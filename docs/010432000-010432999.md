# StackOverflow 问答 10432000-10432999

# c++ - 使用模板元编程在 C++ 中进行“深度”函数柯里化

> ID：10432001
> 
> 赞同：14
> 
> 时间：2012-05-03T13:04:55.947
> 
> 标签：c++, functional-programming

我刚刚想出了一个（又一个！）使用模板元编程在 C++ 中实现函数柯里化。（我几乎可以肯定其他实现比我的更好/更完整，但我这样做是为了学习目的，我认为重新发明轮子是合理的。）

我的 funcion currying 实现，包括测试用例，如下：

```
#include <iostream>
#include <functional>

template <typename> class curry;

template <typename _Res>
class curry< _Res() >
{
  public:
    typedef std::function< _Res() > _Fun;
    typedef _Res _Ret;

  private:
    _Fun _fun;

  public:
    explicit curry (_Fun fun)
    : _fun(fun) { }

    operator _Ret ()
    { return _fun(); }
};

template <typename _Res, typename _Arg, typename... _Args>
class curry< _Res(_Arg, _Args...) >
{
  public:
    typedef std::function< _Res(_Arg, _Args...) > _Fun;
    typedef curry< _Res(_Args...) > _Ret;

  private:
    class apply
    {
      private:
        _Fun _fun;
        _Arg _arg;

      public:
        apply (_Fun fun, _Arg arg) 
        : _fun(fun), _arg(arg) { }

        _Res operator() (_Args... args)
        { return _fun(_arg, args...); }
    };

  private:
    _Fun _fun;

  public:
    explicit curry (_Fun fun)
    : _fun(fun) { }

    _Ret operator() (_Arg arg)
    { return _Ret(apply(_fun, arg)); }
};

int main ()
{
  auto plus_xy = curry<int(int,int)>(std::plus<int>());
  auto plus_2x = plus_xy(2);
  auto plus_24 = plus_2x(4);
  std::cout << plus_24 << std::endl;

  return 0;
} 
```

这个函数柯里化实现是“浅的”，在以下意义上：如果原来`std::function`的签名是......

```
(arg1, arg2, arg3...) -> res 
```

那么柯里化函数的签名是......

```
arg1 -> arg2 -> arg3 -> ... -> res 
```

但是，如果任何参数或返回类型本身可以被柯里化，它们就不会被柯里化。例如，如果原件`std::function`的签名是...

```
(((arg1, arg2) -> tmp), arg3) -> res 
```

那么咖喱函数的签名将是......

```
((arg1, arg2) -> tmp) -> arg3 -> res 
```

代替...

```
(arg1 -> arg2 -> tmp) -> arg3 -> res 
```

这就是我想要的。所以我想要一个“深度”的柯里化实现。有谁知道我怎么写？

* * *

**@vhallac：**

这是应该传递给构造函数的函数类型`curry<int(int(int,int),int)>`：

```
int test(std::function<int(int,int)> f, int x)
{ return f(3, 4) * x; } 
```

然后应该能够执行以下操作：

```
auto func_xy = curry<int(int(int,int),int)>(test);
auto plus_xy = curry<int(int,int)>(std::plus<int>());
auto func_px = func_xy(plus_xy);
auto func_p5 = func_px(5);
std::cout << func_p5 << std::endl; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-03T21:47:03.297

我已经实现了一个`decurry`类的作弊版本来演示你将如何实现专业化。该版本是作弊的，因为它被声明为 的朋友`curry<T>`，并访问内部`_fun`以将函数的柯里化版本转换回原始版本。应该可以写一个通用的，但我不想花更多时间在上面。

`decurry`实现是：

```
template <typename _Res, typename... _Args>
class decurry< curry<_Res(_Args...)> > {
public:
    typedef curry<_Res(_Args...)> _Curried;
    typedef typename curry<_Res(_Args...)>::_Fun _Raw;

    decurry(_Curried fn): _fn(fn) {}

    _Res operator() (_Args... rest) {
        return _fn._fun(rest...);
    }
private:
    _Curried _fn;
}; 
```

它需要这条线：

```
friend class decurry< curry<_Res(_Arg, _Args...)> >; 
```

在里面`class curry< _Res(_Arg, _Args...) >`让我们的班级访问`curry<T>._fun`.

现在，专业化可以写成：

```
template <typename _Res, typename _Res2, typename... _Args2, typename... _Args>
class curry< _Res(_Res2(_Args2...), _Args...) >
{
public:
    typedef curry< _Res2(_Args2...) > _Arg;
    typedef std::function< _Res2(_Args2...) > _RawFun;
    typedef std::function< _Res(_RawFun, _Args...) > _Fun;
    typedef curry< _Res(_Args...) > _Ret;

private:
    class apply
    {
    private:
        _Fun _fun;
        _RawFun _arg;

    public:
        apply (_Fun fun, _RawFun arg)
            : _fun(fun), _arg(arg) { }

        _Res operator() (_Args... args)
        { return _fun(_arg, args...); }
    };

private:
    _Fun _fun;

public:
    explicit curry (_Fun fun)
        : _fun(fun) { }

    _Ret operator() (_Arg arg)
    { return _Ret(apply(_fun, decurry<_Arg>(arg))); }
}; 
```

测试代码是在问题中指定的：

```
int test(std::function<int(int,int)> f, int x)
{ return f(3, 4) * x; }

int main ()
{
    auto func_xy = curry<int(int(int,int),int)>(test);
    auto plus_xy = curry<int(int,int)>(std::plus<int>());
    auto func_px = func_xy(plus_xy);
    auto func_p5 = func_px(5);
    std::cout << func_p5 << std::endl;

    return 0;
} 
```

代码输出再次出现在[Ideone.com](http://ideone.com/bTJAL)上。

# android - 通过android找出上传/下载速度

> ID：10432013
> 
> 赞同：2
> 
> 时间：2012-05-03T13:05:40.773
> 
> 标签：android

我想问一下，当应用程序从设备发送一些数据或从外部接收数据时，是否可以在 android 上找到下载/上传速度。如果是，我们该怎么做。我认为一个选项可以是 PacketManager API，但我不确定。我们可以拥有端口，而不是监听端口的流量，而不是简单的速度公式。我们需要什么权限。（有根或无根权限要求）谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T13:08:02.380

您应该尝试使用`TrafficStats`该类来执行此操作。

您可以在此处找到更多信息：

[TrafficStats Class - Download and Upload Speed Android](https://stackoverflow.com/questions/8252656/how-to-get-download-speed-in-android-device-or-mobile)

为了帮助您，另一个带有一些代码的好链接：[Network Monitor Android TrafficStats Class](http://www.techrepublic.com/blog/app-builder/create-a-network-monitor-using-androids-trafficstats-class/774)

# c# - 如何使用 C# 使用 Microsoft 视频捕获宏

> ID：10432015
> 
> 赞同：0
> 
> 时间：2012-05-03T13:05:54.657
> 
> 标签：c#, video-capture

我想使用 C#.NET 制作一个 Windows 应用程序，在其中我从连接的网络摄像头捕获视频并将其存储到任何位置。

任何人都可以告诉我如何开始/完成这个吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T19:43:48.987

如果您使用 Winforms，那么您需要使用 DirectX 的一个称为 DirectShow 的组件来执行此操作。[您可以从此链接](http://www.codeproject.com/Articles/7637/DirectX-Video-Stream-and-frame-capture)查看示例并下载源代码。

[如果您使用的是 WPF，您可以通过此链接](http://www.codeproject.com/Articles/285964/WPF-Webcam-Control)了解这是如何完成的。

如果您需要一个可与 WPF 和 Winforms 一起使用的库，请尝试[此链接](http://easywebcam.codeplex.com/)

# java - 检查一个 java.lang.reflect.Type 的对象是否可以转换为另一个的组件？

> ID：10432018
> 
> 赞同：0
> 
> 时间：2012-05-03T13:06:14.787
> 
> 标签：java, generics

`java.lang.reflect.Type`Java 在运行时通过接口及其子接口（ParameterizedType、WildcardType）公开通用类型信息，例如字段类型。

有谁知道我在哪里可以找到一个组件，该组件可以确定一种类型的对象是否可以转换为另一种类型，例如是否`Set<Object>`可以转换为`Set`a 或 a`Comparator<User>`是否可以转换为`Comparator<? extends Object>`？

该解决方案应该适用于由 表示的类型信息`java.lang.reflect.Type`，而不仅仅是`Class`es，并且应该考虑泛型，即 a`List<Integer>`不应该转换为 a `List<Object>`。

问候， 约臣

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-03T13:24:31.430

J你可以看看[Apache Commons-lang](http://commons.apache.org/lang/)：

[http://commons.apache.org/proper/commons-lang/javadocs/api-3.7/org/apache/commons/lang3/reflect/TypeUtils.html](http://commons.apache.org/proper/commons-lang/javadocs/api-3.7/org/apache/commons/lang3/reflect/TypeUtils.html)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-03T15:38:33.207

[Guava's](http://code.google.com/p/guava-libraries/) [`TypeToken`](http://docs.guava-libraries.googlecode.com/git-history/release/javadoc/com/google/common/reflect/TypeToken.html#isAssignableFrom%28java.lang.reflect.Type%29)正是针对这个问题而设计的。它旨在替代`Class`泛型感知。（披露：我为 Guava 做出了贡献。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-03T13:11:02.443

```
if (clazz.isAssignableFrom(otherClazz))
{
    return true; 
} 
```

# python - set.pop() 是确定性的吗？

> ID：10432022
> 
> 赞同：20
> 
> 时间：2012-05-03T13:06:28.867
> 
> 标签：python, set

我知道 python 集合的元素没有排序。调用pop方法返回任意元素；我很好。

我想知道的是，当集合具有相同的历史时，pop 是否总是返回相同的元素。当然，在一个版本的 python 中，我不介意 python 的不同版本/实现是否做自己的事情。特别是，我问的是python 2.7。在这种情况下，这不仅仅是 api 的实现问题。

我在游戏的程序地牢生成器中使用了很多集合，我希望结果对于给定的种子是确定的。

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-05-03T13:51:58.090

一般来说，答案是**否定的。**@Christophe 和 @Marcin (un) 有用地指出的 python 源代码显示元素按照它们在哈希表中出现的顺序弹出。因此，弹出顺序（可能是迭代顺序）*是*确定性的，但仅适用于*固定*的哈希值。根据文档中的**注释**，数字就是这种情况，但字符串*不是*这种情况，顺便说一下，它也直接涉及您的问题：**[`__hash__`](https://docs.python.org/3.5/reference/datamodel.html#object.__hash__)**

 **> 请注意，默认情况下，str、bytes 和 datetime 对象的**hash** () 值是用不可预测的随机值“加盐”的。尽管它们在单个 Python 进程中保持不变，但它们在 Python 的重复调用之间是不可预测的。
> 
> [ ... ]
> 
> 更改哈希值会影响 dicts、sets 和其他映射的迭代顺序。Python 从未对这种顺序做出保证（它通常在 32 位和 64 位版本之间变化）。

**编辑：**正如@Marcin 指出的那样，我引用的链接不适用于 Python 2。哈希随机化[成为 Python 3.3 的默认设置。](https://docs.python.org/3/whatsnew/3.3.html#summary-release-highlights)默认情况下，Python 2.7 没有有意的非确定性字符串散列。

通常，对于散列不是其值的可重复函数的任何对象（例如，如果散列基于内存地址），这都是一个问题。但相反，如果您为集合中的对象定义自己的`__hash__`方法，则可以预期它们将以可重现的顺序返回。（前提是该系列的历史和平台保持不变）。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-03T13:13:25.380

在内部我认为情况类似于`dict`。顺序由哈希算法确定，在*某些*情况下会产生相同的结果。但是你不应该依赖它，因为一旦元素数量变大，集合就会遇到冲突（即它的内部散列），最终导致不同的排序。

简而言之：不，`set.pop()`不是确定性的。不要假设任何顺序，因为 API 明确指出，

> 集合对象是**无序**集合

*   文档：[http ://docs.python.org/library/stdtypes.html#set-types-set-frozenset](http://docs.python.org/library/stdtypes.html#set-types-set-frozenset)
*   来源：[http ://svn.python.org/view/python/trunk/Objects/setobject.c?view=markup](http://svn.python.org/view/python/trunk/Objects/setobject.c?view=markup)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-05-03T13:09:03.067

[该文档](http://docs.python.org/library/stdtypes.html#set-types-set-frozenset)没有指定它必须是确定性的，因此您应该假设它不是。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-03T13:33:22.000

如果你想强制确定性，你可以尝试类似

```
value = min(my_set)
my_set.remove(value) 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-05-03T13:40:06.980

如果您确实针对某个特定版本的 python，那么您可以查看源代码并测试其行为（但测试良好 - 考虑负载因素等）。

如果您想要便携性，或者您发现`set`没有按要求执行，请使用有序字典（这里有一个：[http](http://code.activestate.com/recipes/576693/) ://code.activestate.com/recipes/576693/ ；还有很多其他的，所以找一个你喜欢的样子of)，并将其改编为一组。

更新：这是一个有序集：[http ://packages.python.org/Brownie/api/datastructures.html#brownie.datastructures.OrderedSet](http://packages.python.org/Brownie/api/datastructures.html#brownie.datastructures.OrderedSet)**

# objective-c - 如何测量两个 CLLocation 之间的距离（以米为单位）？

> ID：10432023
> 
> 赞同：19
> 
> 时间：2012-05-03T13:06:28.990
> 
> 标签：objective-c, cocoa-touch, core-location, cllocation

如何获得两个`CLLocation`s 之间的距离（以米为单位）？`CLLocation`似乎没有提供任何方法来做到这一点。

* * *

## 回答 #1

> 赞同：63
> 
> 时间：2012-05-03T13:09:00.780

```
CLLocationDistance distance = [aCLLocationA distanceFromLocation:aCLLocationB];
// distance is a double representing the distance in meters 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-03T13:08:23.790

```
CLLocationDistance distance = [secondLocation distanceFromLocation:firstLocation];  //      distance is expressed in meters

CLLocationDistance kilometers = distance / 1000.0;
// or you can also use this..
CLLocationDistance meters = distance;

NSString *distanceString = [[NSString alloc] initWithFormat: @"%f", kilometers];

flot totaldistancecovered = [distanceString floatValue];

//Now,you can use this float value for addition...
// distanceMoved  should be float type variable which is declare in .h file...

 distanceMoved = distanceMoved + totaldistancecovered ;
 theLabel.text = [NSString stringWithFormat: @"%f meters", distanceMoved]; 
```

希望对你有帮助...

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-03T13:09:35.650

```
CLLocation *loc1 = [[CLLocation alloc]  initWithLatitude:dblLatitude longitude:dblLongitude];   
CLLocation *loc2 = [[CLLocation alloc]  initWithLatitude:dblCurrentLatitude longitude:dblCurrentLongitude];
double dMeters = [loc1 distanceFromLocation:loc2];
[loc1 release];
[loc2 release]; 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-03T13:09:03.940

```
+ (CLLocationDistance)distanceBetweenCoordinate:(CLLocationCoordinate2D)originCoordinate andCoordinate:(CLLocationCoordinate2D)destinationCoordinate {    
    CLLocation *originLocation = [[CLLocation alloc] initWithLatitude:originCoordinate.latitude longitude:originCoordinate.longitude];
    CLLocation *destinationLocation = [[CLLocation alloc] initWithLatitude:destinationCoordinate.latitude longitude:destinationCoordinate.longitude];
    CLLocationDistance distance = [originLocation distanceFromLocation:destinationLocation];
    [originLocation release];
    [destinationLocation release];

    return distance;
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-11-22T20:00:59.243

**斯威夫特 3.0**

```
let location1 = CLLocation(latitude: <CLLocationDegrees>, longitude: <CLLocationDegrees>)
let location2 = CLLocation(latitude: <CLLocationDegrees>, longitude: <CLLocationDegrees>)

let distance = location1.distance(from: location2) 
```

`distance`以米为单位`Double`

[https://developer.apple.com/reference/corelocation/cllocation/1423689-distance](https://developer.apple.com/reference/corelocation/cllocation/1423689-distance)

# google-maps-api-3 - How can I display a different icon for markers that fit wthin different categories?

> ID：10432027
> 
> 赞同：3
> 
> 时间：2012-05-03T13:06:57.530
> 
> 标签：google-maps-api-3, google-maps-markers

I'm attempting to make a Google Map which allows the user to check off a category and have those specific locations display. I've got that part working:

[http://thedenvillehub.com/test-hs/adv/scripts/test.html](http://thedenvillehub.com/test-hs/adv/scripts/test.html)

What I want to do is have a different icon come up for each category, so that one is red, one is blue, etc. I found a couple of examples online but nothing seems to be working for me. Here's my code for reference:

```
var markers = new Array();
var locations = [
    ['Boonton Town', '402-9410', 'Dial-a-Ride', 40.902, -74.407, 1 ],
    ['Boonton Township', '331-3336', 'Dial-a-Ride', 40.933, -74.425, 2 ],
    ['Butler Borough', '835-8885', 'Dial-a-Ride', 40.999497, -74.346326, 3 ]
    //other locations and categories
];

var map = new google.maps.Map(document.getElementById('map'), {
    zoom: 10,
    center: new google.maps.LatLng(40.7967667, -74.4815438),
    mapTypeId: google.maps.MapTypeId.ROADMAP
});

var infowindow = new google.maps.InfoWindow();
var marker, i;

for (i = 0; i < locations.length; i++) {  
  marker = new google.maps.Marker({
      position: new google.maps.LatLng(locations[i][3], locations[i][4]),
      map: map,
      icon: 'http://labs.google.com/ridefinder/images/mm_20_red.png'
  });

  markers.push(marker);
  google.maps.event.addListener(marker, 'click', (function(marker, i) {
      return function() {
          infowindow.setContent(locations[i][0] +
              "<br />"+locations[i][2]+"<br />"+locations[i][1]);
          infowindow.open(map, marker);
      }
  })(marker, i));
}

// shows all markers of a particular category,
// and ensures the checkbox is checked

function show(category) {
    for (var i=0; i<locations.length; i++) {
        if (locations[i][2] == category) {
            markers[i].setVisible(true);
        }
    }
}

// hides all markers of a particular category,
// and ensures the checkbox is cleared

function hide(category) {
    for (var i=0; i<locations.length; i++) {
        if (locations[i][2] == category) {
            markers[i].setVisible(false);
        }
    }
}

// == show or hide the categories initially ==

hide("Dial-a-Ride");
hide("American Legion");
hide("Veterans of Foreign Wars");
hide("Nutrition");

$(".checkbox").click(function(){
    var cat = $(this).attr("value");

    // If checked
    if ($(this).is(":checked")) {
        show(cat);
    }
    else {
        hide(cat);
    }
}); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-03T13:13:30.833

Make an object `var iconSrc = {}`

Then, match categories to icon images to it.

```
iconSrc['Dial-a-ride'] = 'http://labs.google.com/ridefinder/images/mm_20_red.png';
iconSrc['American Legion'] = 'http://labs.google.com/ridefinder/images/mm_20_green.png';
... 
```

when adding a marker, replace the icon image source with the new variable:

```
icon: iconSrc[locations[i][2]] 
```

Here's a jsfiddle, the navigation is tough in the small pane so I moved the checkboxes to the top. [http://jsfiddle.net/DA92S/1/](http://jsfiddle.net/DA92S/1/)

# php - 解析 PHP 菜单系统 3d 数组。修改以允许我指定父页面并返回子页面

> ID：10432029
> 
> 赞同：0
> 
> 时间：2012-05-03T13:07:07.853
> 
> 标签：php, menu, multidimensional-array, recursive-query

我建立了一个包含网站菜单系统的数组：

* * *

```
$menu = array(
    'Page_1' => array(
        'display' => 'Page 1'
    ),
    'Page_2' => array(
        'display' => 'Page 2',
        'sub' => array(
            'Sub_Page_1' => array(
                'display' => 'Sub Page 1'
            )
        )
    ),
    'Page_3' => array(
        'display' => 'Page 3',
        'sub' => array(
            'Sub_Page_2' => array(
                'display' => 'Sub Page 2'
            ),
            'Sub_Page_3' => array(
                'display' => 'Sub Page 3'
            )
        )
    )
); 
```

* * *

我正在使用以下函数将菜单系统解析并输出为嵌套无序列表。

* * *

```
function Build_Menu($menu_array,$is_sub){

    $attr = (!$is_sub) ? ' class="menu"' : ' class="submenu"';
    $menu = "<ul$attr>";

    foreach($menu_array as $id => $properties){

        foreach($properties as $key => $val){

            if(is_array($val)){
                $sub = Build_Menu($val,TRUE);
            }
            else{
                $sub = NULL;
                $$key = $val;
            }
        }

        $menu .= '<li><a href="#">'.$display.'</a>'.$sub.'</li>';

        unset($url, $display, $sub);

    }

    return $menu . "</ul>";

} 
```

* * *

这可以正常工作并生成如下列表：

```
Page 1
Page 2
    Sub Page 1
Page 3
    Sub Page 2
    Sub Page 3 
```

* * *

我卡住的地方是我现在正在寻找修改函数，以便我可以传入父页面并返回该父页面的子页面。

就像是：

函数 Build_Menu($menu_array,$is_sub,'Page 2'){ ... }

这将生成以下输出：

```
Page 2
    Sub Page 1 
```

或者

函数 Build_Menu($menu_array,$is_sub,'Page 3'){ ... }

这将产生：

```
Page 3
    Sub Page 2
    Sub Page 3 
```

* * *

重要的是该函数保持递归，因此无论它们有多少子级别，它们都将作为函数的一部分输出。计划是每个页面的“显示”值将是唯一标识符。

任何帮助将不胜感激，因为我已经为此转了几个小时！

非常感谢，詹姆斯。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T13:11:19.513

这看起来有点像重新发明轮子。您可能希望使用您选择的搜索引擎来查找“php 树结构”或查看 SPL 中的堆和双链表。[http://www.php.net/manual/en/spl.datastructures.php](http://www.php.net/manual/en/spl.datastructures.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T13:20:36.267

你就不能这样吗？

```
function Build_Sub_Menu($menu, $key) {
   return Build_Menu(array($menu[$key]), false);
}

echo Build_Sub_Menu($menu, 'Page_2'); 
```

当然你可以在里面做同样的事情`Build_Menu`，但我认为另一个功能更容易理解和维护。

由您来验证是否`$key`存在于`$menu`.

# java - 更改密码时如何在 Java 客户端中出现 Active Directory 密码策略错误

> ID：10432038
> 
> 赞同：0
> 
> 时间：2012-05-03T13:07:37.557
> 
> 标签：java, active-directory, ldap

我正在从 java 客户端更改活动目录密码。我收到像“不会执行”这样的一般错误。我正在使用 Windows 2003 服务器作为活动目录。如何获取特定错误，例如密码强度或长度错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T08:54:44.467

在 Windows 2003 以及“将不执行”的 LDAP 错误代码中，AD 返回一条错误消息。该错误消息包含您需要的所有数据。其中一部分是[System Error Code](http://msdn.microsoft.com/en-us/library/windows/desktop/ms681381%28v=vs.85%29.aspx)，它指定了更准确的错误，有时字符串以 结尾`data XXX`，它提供了更多信息，但是我永远无法找到从哪里获取 XXX 代码（在大多数情况下它只是 0），所以你可能需要做一些实验。

在您的情况下，该消息将类似于此消息：

```
LDAP error 0x35\. Unwilling To Perform (0000052D: SvcErr: DSID-031A0FC0, problem 5003 (WILL_NOT_PERFORM), data 0). 
```

在这种情况下，错误是：

> ERROR_PASSWORD_RESTRICTION 1325 (0x52D)
> 
> 无法更新密码。为新密码提供的值不符合域的长度、复杂性或历史要求。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T14:53:23.317

没有任何机制可以从 LDAP 获取这种级别的详细信息，尤其是在 Windows 2003 上。

# asp.net - 在 Gridview 中动态填充 DropDown 模板控件

> ID：10432041
> 
> 赞同：0
> 
> 时间：2012-05-03T13:07:41.643
> 
> 标签：asp.net, vb.net, gridview, drop-down-menu

我有一个带有列的 GRIDVIEW，其中一个包含一个 CSV，其中包含必须出现在每一行上的下拉列表的可能值。

```
 Private Sub GridViewParameters_RowDataBound(ByVal sender As Object, ByVal e As System.Web.UI.WebControls.GridViewRowEventArgs) Handles GridViewParameters.RowDataBound

        If e.Row.RowType = DataControlRowType.DataRow Then
            'Get value of third column. Index is zero based, to 
            'get text of third column we use Cells[2].Text
            Dim CellValue As Integer = Convert.ToSingle(e.Row.Cells(0).Text)
            Dim ntextbox As New TextBox
            Dim ncheckbox As New CheckBox
            Dim ndropdown As New DropDownList
            Dim CellType As String = Convert.ToString(e.Row.Cells(3).Text)
            'MsgBox(CellType)
            Dim DropDownItems(0) As String
            Dim cnt As Integer
            Dim marker As Integer
            Dim arraydim As Integer = 0
            'MsgBox(Convert.ToString(e.Row.Cells(2).Text))
            If Trim(CellType) = "select" Then
                'e.Row.Cells(2).Controls.Remove(ntextbox)
                'e.Row.Cells(2).Controls.Add(ndropdown)
                If Len(Trim(Convert.ToString(e.Row.Cells(4).Text))) > 0 Then
                    For cnt = 1 To Len(Trim(Convert.ToString(e.Row.Cells(4).Text)))
                        If Mid(Trim(Convert.ToString(e.Row.Cells(4).Text)), cnt, 1) = "," Then
                            'e.Row.Cells(2).Controls.
                            'MsgBox("lll")
                        End If
                    Next
                    arraydim = arraydim + 1
                    ReDim Preserve DropDownItems(arraydim)
                    DropDownItems(arraydim) = Mid(Trim(Convert.ToString(e.Row.Cells(4).Text)), marker + 1, cnt - marker - 1)
                End If
                e.Row.Cells(5).Controls.Item(5).Visible = False
                e.Row.Cells(5).Controls.Item(1).Visible = False
                e.Row.Cells(5).Controls.Item(2).Visible = False
                e.Row.Cells(5).Controls.Item(3).Visible = True 'select drop down
                'e.Row.Cells(5).Controls.Item(3).Controls.
            End If
            If Trim(CellType) = "textbox" Then
                'e.Row.Cells(2).Controls.Add(ntextbox)
                'e.Row.Cells(2).Text = Convert.ToString(e.Row.Cells(3).Text)
                e.Row.Cells(5).Controls.Item(5).Visible = True
                e.Row.Cells(5).Controls.Item(1).Visible = False
                e.Row.Cells(5).Controls.Item(2).Visible = False ' textbox
                e.Row.Cells(5).Controls.Item(3).Visible = False
                'e.Row.DataItem(
            End If
            If Trim(CellType) = "boolean" Then
                'e.Row.Cells(2).Controls.Add(ndropdown)
                'e.Row.Cells(2).Text = Convert.ToString(e.Row.Cells(3).Text)
                e.Row.Cells(5).Controls.Item(5).Visible = False
                e.Row.Cells(5).Controls.Item(1).Visible = True 'checkbox
                e.Row.Cells(5).Controls.Item(2).Visible = False
                e.Row.Cells(5).Controls.Item(3).Visible = False
            End If
            If Trim(CellType) = "hidden" Then
                e.Row.Visible = False
            End If
            'e.Row.Cells(2).Controls.Remove(ntextbox)

            '' If value is greater of 10, change format
            If CellValue > 0 Then
                ' Use this syntax to change format of complete row
                e.Row.BackColor = System.Drawing.Color.LightGreen
                e.Row.Cells(0).ForeColor = System.Drawing.Color.LightGreen
                e.Row.Cells(3).ForeColor = System.Drawing.Color.LightGreen
                'e.Row.Cells(5).ForeColor = System.Drawing.Color.LightGreen
            Else
                e.Row.BackColor = System.Drawing.Color.LightPink
                e.Row.Cells(0).ForeColor = System.Drawing.Color.LightPink
                e.Row.Cells(3).ForeColor = System.Drawing.Color.LightPink
                'e.Row.Cells(5).ForeColor = System.Drawing.Color.LightPink

                ' Use this syntax to change format of single cell
                'e.Row.Cells(2).BackColor = System.Drawing.Color.Red
            End If
        End If
    End Sub 
```

根据控件的类型是下拉列表、文本框还是复选框（在表格中限定），它会隐藏或显示相关的控件类型。如果它是下拉列表，则需要从相应列中的 CSV 获取其值。如果传递了相关行的 id，我有一个 SP 以表格形式返回这些。

我如何从 gridview 中获取它以传递给下拉列表并正确加载它？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T13:39:09.410

因此，如果我没看错，您已经将 CSV 值读入 DropDownItems 数组，但是您看不到如何获取该数组并从中填充 DropDownList，对吗？

好吧，一个 DropDownList 可以使用一个数组作为它的' `DataSource`，所以我们可以设置属性并调用`DataBind`方法，我们就完成了：

```
....
e.Row.Cells(5).Controls.Item(3).Visible = True

ndropdown.DataSource = DropDownItems
ndropdown.DataBind() 
```

顺便说一句，您可以使用 String.Split 方法为您完成工作，而不是自己解析 CSV 值以去除逗号：

```
'We can replace all this
For cnt = 1 To Len(Trim(Convert.ToString(e.Row.Cells(4).Text)))
    If Mid(Trim(Convert.ToString(e.Row.Cells(4).Text)), cnt, 1) = "," Then
    End If
Next
arraydim = arraydim + 1
ReDim Preserve DropDownItems(arraydim)
DropDownItems(arraydim) = Mid(Trim(Convert.ToString(e.Row.Cells(4).Text)), marker + 1, cnt - marker - 1)

'with
DropDownItems = e.Row.Cells(4).Text.Split(",".ToCharArray()) 
```

# c# - 任务并行库是否提供了一种池打开连接的方法？

> ID：10432045
> 
> 赞同：4
> 
> 时间：2012-05-03T13:07:51.600
> 
> 标签：c#, c#-4.0, task-parallel-library, dynamics-crm-2011

## 背景

我有一项服务连接到 Microsoft CRM 2011，并更新了数万条记录。在我们的开发环境中，单线程运行它会导致一分钟内只更新 30 条记录。我使用 TPL Parallel.Inovke 切换到多线程，但与 CRM 的连接不是线程安全的，因此我为我正在处理的每条记录创建一个新连接。此更改仅将我的吞吐量提高到每分钟 60 条记录。然后我回去将记录批处理在一起，这样每个线程都会打开一个连接，然后一次处理 1000 条记录。这将我的吞吐量提高到每分钟大约 500 次更新。我可以继续沿着这条路走下去，并尝试根据线程数微调批处理的大小，但真正的解决方案是执行某种连接池，所以每个线程都有它

## 如何执行连接池？

TPL 是否提供了一种将对象从正在完成的 Action 传递到将要处理的下一个 Action 的方法？如果没有，是否有一个很好的例子来说明如何编写自己的连接池类？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-03T13:31:22.907

我认为 TPL 中没有这样的东西，提供连接池不是它的工作。

但是这样做的一种方法是使用支持线程本地初始化[的 的重载之一。`Parallel.ForEach()`](http://msdn.microsoft.com/en-us/library/dd991486.aspx)

# mercurial - TeamCity Mercurial 克隆错误

> ID：10432053
> 
> 赞同：0
> 
> 时间：2012-05-03T13:08:07.250
> 
> 标签：mercurial, teamcity, teamcity-7.0

运行 Team City 配置时，它包含一个空格

```
[Updating sources] Failed to perform checkout on agent:'hg clone -U --uncompressed http://_VcsAccess:******@xxxx.com/hg/repo/ 7eaf0d18c3c2de83' command failed. 
```

为什么 tc 包含空格的任何线索。我尝试测试 vcs root 并且它可以工作......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T15:45:27.133

Mercurial 没有安装在目标机器上

# c# - GridView 在选择按钮上：从选定行获取值，将用户重定向到另一个页面，使用页面中的值

> ID：10432054
> 
> 赞同：1
> 
> 时间：2012-05-03T13:08:18.023
> 
> 标签：c#, asp.net, sql

我有一个简单的gridview 和SqlData 源将数据表绑定到gridview。

我的问题是：在 gridview 的“选择”按钮上。我想从当前选定行的列中获取一个值，然后将用户重定向到另一个页面并使用取值执行 Sql Select 命令。

我知道如何获取值，但我不知道如何将用户和值重定向到另一个页面并使用获取的值执行 sql 语句。

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T13:10:38.050

您只需要`Respose.Redirect(url);`在对您有用的查询字符串中执行并附加值..

```
i.e Response.Redirect("xyz.aspx?selectedValue = " + selectedvalue); 
```

在重定向页面上从查询字符串中获取选定的值，`Request.QueryString["selectedValue"]` 但在执行此操作之前，请确保查询字符串变量不为空。

**或者**

如果信息是敏感的，你不希望用户看到它而不是使用`Session`变量而不是做`Response.Redirect(url);`

```
Session["SelectedValue"] = SelectValue;
Respose.Redirect(url); 
```

在重定向页面上从查询字符串中获取选定的值，`string s = Session["SelectedValue"].ToString()` 但在此之前确保会话变量不为空。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T13:19:41.670

那这个呢？

```
<asp:GridView ID="GridView1" Width="100%" runat="server"
    ClientIDMode="Static" AutoGenerateColumns="False" Font-Names="Arial" Font-Size="X-Small">
<Columns>
    <asp:HyperLinkField DataTextField="YouFieldNameForText" DataNavigateUrlFields="YouFieldNameForValue" DataNavigateUrlFormatString="YourURL.aspx?YourValue={0}"
        HeaderText="header text" Target="_self" />
</Columns>
</asp:GridView> 
```

# c# - 一个非常小的程序 C# 中的访问冲突异常

> ID：10432059
> 
> 赞同：2
> 
> 时间：2012-05-03T13:08:30.093
> 
> 标签：c#, access-violation

我正在制作一个带有一些`textboxes`和一些`labels`带有 a`button`和 a的小程序`webbrowser`。代码不超过 80 行，它只包含一个按钮单击事件，该事件提供`webbrowser`在文本框中输入的链接并`neviage()`调用函数，第二个事件是浏览器的文档完成事件。错误如下

![在此处输入图像描述](../Images/8d26a79e15925f6a1728f726cb8aaf07.png)

我已经在 stackoverflow 上搜索并搜索了很多关于访问冲突的信息，但我找不到任何适合我的目的的东西。异常不会在任何特定点发生。它随机出现并且总是在`Application.Run`没有任何堆栈跟踪的情况下出现！

最困扰我的一件事是错误发生在 try 块中并且没有被捕获！

这个例外有什么解决办法吗？我尝试去调试->异常->公共语言运行时异常->系统并检查抛出，但它没有用。

我是新手程序员，所以请原谅我的经验不足！

编辑：代码

```
public Form1()
        {
            InitializeComponent();
        }

        private void simpleButton_Go_Click(object sender, EventArgs e)
        {
            webBrowser1.Navigate(textEdit_url.Text);
            webBrowser1.ScriptErrorsSuppressed = true;
        }

        private void webBrowser1_DocumentCompleted(object sender, WebBrowserDocumentCompletedEventArgs e)
        {
            if (webBrowser1.Url.ToString().Contains("member/login"))
            {
                if (webBrowser1.Document.GetElementById("email_address")!=null)
                {                    
                    webBrowser1.Document.GetElementById("email_address").SetAttribute("value", textEdit_username.Text);
                    webBrowser1.Document.GetElementById("member_password").SetAttribute("value", textEdit_password.Text);

                    var c = webBrowser1.Document.GetElementsByTagName("button");
                    foreach (HtmlElement element in c)
                    {
                        if (element.InnerText == "Login")
                            element.InvokeMember("click");
                    }
                }
            }
            if (webBrowser1.Document.GetElementById("toolbar_login") != null && webBrowser1.Document.GetElementById("toolbar_login").InnerText == "Log In")
            {
                webBrowser1.Navigate("www.somesite.com");
            }
            else if (webBrowser1.Url.ToString() == textEdit_url.Text)
            {

                var c = webBrowser1.Document.GetElementsByTagName("button");
                foreach (HtmlElement element in c)
                {
                    if (element.InnerText == "Add to this list")
                    {
                        element.InvokeMember("click");

                        var te = webBrowser1.Document.GetElementsByTagName("textarea");
                    }
                }
            }
            else
                webBrowser1.Navigate(textEdit_url.Text);
        } 
```

编辑：更新

正如我建议的那样，我删除了 devexpress，创建了一个新的 winform 项目，将代码复制到该项目中，但错误仍然出现。新项目的堆栈跟踪是

```
 at System.Windows.Forms.UnsafeNativeMethods.DispatchMessageW(MSG& msg)
   at System.Windows.Forms.Application.ComponentManager.System.Windows.Forms.UnsafeNativeMethods.IMsoComponentManager.FPushMessageLoop(IntPtr dwComponentID, Int32 reason, Int32 pvLoopData)
   at System.Windows.Forms.Application.ThreadContext.RunMessageLoopInner(Int32 reason, ApplicationContext context)
   at System.Windows.Forms.Application.ThreadContext.RunMessageLoop(Int32 reason, ApplicationContext context)
   at System.Windows.Forms.Application.Run(Form mainForm)
   at app.Program.Main() in C:\Documents and Settings\admin\My Documents\Visual Studio 2010\Projects\app\app\Program.cs:line 18
   at System.AppDomain._nExecuteAssembly(RuntimeAssembly assembly, String[] args)
   at System.AppDomain.ExecuteAssembly(String assemblyFile, Evidence assemblySecurity, String[] args)
   at Microsoft.VisualStudio.HostingProcess.HostProc.RunUsersAssembly()
   at System.Threading.ThreadHelper.ThreadStart_Context(Object state)
   at System.Threading.ExecutionContext.Run(ExecutionContext executionContext, ContextCallback callback, Object state, Boolean ignoreSyncCtx)
   at System.Threading.ExecutionContext.Run(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.ThreadHelper.ThreadStart() 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T13:47:55.567

可能导致问题的一件事是 DevExpress 组件。我有类似的问题 - 解决方案是强制初始化酒吧经理。所以你可以试试：

1.  删除 DevExpress 组件，看看它是否有效。
2.  在方法中设置断点`InitializeComponent`（在 Form1.Designer.cs 文件中）并步进每一行，在其中一个中你应该得到错误。如果您找到一个，您可以发布该行，我们可以尝试重现错误或尝试找出解决方法。

也尝试以管理员身份启动 Visual Studio。

# javascript - 让 Facebook 检索 url 数据的最佳方法是什么（如计数、评论计数、分享计数......）？

> ID：10432060
> 
> 赞同：0
> 
> 时间：2012-05-03T13:08:34.423
> 
> 标签：javascript, api, sdk, facebook-opengraph

获取#Facebook检索网址数据的最佳方法是什么（如计数，评论计数，分享计数......）#OpenGraph #API #Javascript #SDK

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T13:26:59.413

```
https://graph.facebook.com/?id=YOUR_URL&access_token=YOUR_APP_ACCESS_TOKEN 
```

# c# - 缓存 RenderPartial 输出

> ID：10432061
> 
> 赞同：0
> 
> 时间：2012-05-03T13:08:34.260
> 
> 标签：c#, asp.net, asp.net-mvc, renderpartial

我有一个分页用户控件（ascx），我用它来渲染：

```
<% Html.RenderPartial("Pagination", ViewData["Pagination"]); %> 
```

不过，我想在该页面结果的上方和下方两个地方显示此内容。两次渲染控件似乎效率低下，所以是否可以将渲染的输出存储在一个变量中，然后我可以输出到我心中的内容而不必担心？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T19:07:50.750

简短的回答是，目前在 MVC 中没有超级干净的方法可以做到这一点。有几种不同的方法可以解决这个问题，但是由于您想将返回从另一个视图而不是控制器中捕获，我会做一个 HtmlHelper 扩展，将视图结果作为字符串返回，而不是直接写入响应。

有关详细信息，请参阅此链接： [将视图呈现为字符串](https://stackoverflow.com/questions/483091/render-a-view-as-a-string)

# c# - 如何对加载 ASP.NET MVC 项目时挂起的 Visual Studio 进行故障排除？

> ID：10432067
> 
> 赞同：7
> 
> 时间：2012-05-03T13:08:57.223
> 
> 标签：c#, vb.net, visual-studio, visual-studio-2010

昨天我在 Visual Studio 2010 中处理了一个 MVC 3 项目，然后在下班前关闭了 Visual Studio。

今天早上，当我尝试在 Visual Studio 中加载相同的项目时，项目挂起。我已经重新启动了我的计算机，禁用了所有我可以使用的附加组件和扩展。还是没有香蕉。

我不知道如何解决这个问题。如果我可以加载它，我会尝试清理解决方案，但我不能。（我可以从 VS 命令窗口清除解决方案吗？）。

任何帮助将不胜感激。我该如何解决这个问题？

赛斯

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-03T13:12:24.737

[您可以尝试从启用了日志记录](http://msdn.microsoft.com/en-us/library/ms241272.aspx)的命令行启动 Visual Studio 。

还有[其他几个可用的开关](http://msdn.microsoft.com/en-us/library/xee0c8y7.aspx)，它们也可能有用，例如以[安全模式](http://msdn.microsoft.com/en-us/library/ms241278.aspx)启动...

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-03T13:13:33.123

虽然有些出乎意料。一个疯狂的猜测尝试[重置 Visual Studio 的用户设置](http://msdn.microsoft.com/en-us/library/ms247075.aspx)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-01-07T07:15:03.697

关闭解决方案，删除您的 *.suo 并再次打开它。如果问题仍然存在，请再次执行上述提示，清理并重建解决方案，等待检查是否弹出窗口提示进行日志记录（azure、sharepoint 或类似的东西）。输入凭证，选择记住。

希望有所帮助。

# php - 将发布日期或时间戳插入数据库

> ID：10432074
> 
> 赞同：1
> 
> 时间：2012-05-03T13:09:07.427
> 
> 标签：php, mysql

从 rss 提要中，我有 pubdate 以及时间戳：

```
pubdate:
Thu, 03 May 2012 09:00:00 +0000
timestamp:
1336035600 
```

但是，当我将它插入数据库时​​，它总是：0000-00-00 ETC。这是查询：

```
 $query = "INSERT INTO adafruit_articles VALUES ('', '$title', '$link', '$comments', '$timestamp', '$description', '$content')"; 
```

![在此处输入图像描述](../Images/373df819110293eaa62675b71ada88aa.png)

我的数据库设置正确吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T13:12:53.367

您需要将其转换为 MySQL 友好格式。将时间戳传递给`date()`函数使这很容易：

```
echo date("Y-m-d H:i:s", 1336035600); 
```

或者使用[DateTime](http://us.php.net/manual/en/class.datetime.php)对象：

```
$date = new DateTime(1336035600);
echo $date->format('Y-m-d H:i:s'); 
```

# iphone - iCloud 文件，2 版本保存 1 带有扩展名 1 没有

> ID：10432085
> 
> 赞同：1
> 
> 时间：2012-05-03T13:09:45.257
> 
> 标签：iphone, objective-c, ipad, file, icloud

我是少数几个真正使用 iCloud 在使用同一应用程序的设备之间进行数据持久性的开发人员之一。在最前面，呵呵。在大多数情况下，一切正常，到处都有一些小问题。我正在使用 NSFileManager 和 UIDocument 保存 plist 文件。

我已经为文件名定义了常量，但有些用扩展名保存，有些则没有？定义后，它们包括 .plist 扩展名。有 3 个文件，一个从不显示 .plist，一个显示，第三个同时显示。

我的一个文件保存了两次 1 有扩展名，1 没有。尺寸相同，所以我必须假设它们是相同的。

有没有其他人遇到过这个问题？任何解决方案，文件命名的最佳做法是什么？顺便说一句，我可以删除 iCloud 中的文件，它们会重新出现。我还实施了 iCloud 冲突解决方案。

谢谢你

# sql-server - 从 SQL Server 中的字符串中删除所有空格

> ID：10432086
> 
> 赞同：287
> 
> 时间：2012-05-03T13:09:50.457
> 
> 标签：sql-server

从 SQL Server 2008 中的字符串中删除所有空格的最佳方法是什么？

`LTRIM(RTRIM(' a b '))`将删除字符串左右两侧的所有空格，但我还需要删除中间的空格。

* * *

## 回答 #1

> 赞同：483
> 
> 时间：2012-05-03T13:11:44.833

只需更换它；

```
SELECT REPLACE(fld_or_variable, ' ', '') 
```

**编辑：** 只是为了澄清；它是一个全局替换，不需要`trim()`或担心多个空格`char`或`varchar`：

```
create table #t (
    c char(8),
    v varchar(8))

insert #t (c, v) values 
    ('a a'    , 'a a'    ),
    ('a a  '  , 'a a  '  ),
    ('  a a'  , '  a a'  ),
    ('  a a  ', '  a a  ')

select
    '"' + c + '"' [IN], '"' + replace(c, ' ', '') + '"' [OUT]
from #t  
union all select
    '"' + v + '"', '"' + replace(v, ' ', '') + '"'
from #t 
```

**结果**

```
IN             OUT
===================
"a a     "     "aa"
"a a     "     "aa"
"  a a   "     "aa"
"  a a   "     "aa"
"a a"          "aa"
"a a  "        "aa"
"  a a"        "aa"
"  a a  "      "aa" 
```

* * *

## 回答 #2

> 赞同：47
> 
> 时间：2012-05-03T13:12:15.220

我会使用替换

```
select REPLACE (' Hello , How Are You ?', ' ', '' ) 
```

[代替](http://msdn.microsoft.com/en-us/library/ms186862.aspx)

* * *

## 回答 #3

> 赞同：36
> 
> 时间：2013-05-25T01:37:25.927

如果它是对表的更新，您所要做的就是多次运行此更新，直到它影响 0 行。

```
update tableName
set colName = REPLACE(LTRIM(RTRIM(colName)), '  ', ' ')
where colName like '%  %' 
```

* * *

## 回答 #4

> 赞同：18
> 
> 时间：2016-07-28T12:53:12.993

100% 工作

```
UPDATE table_name SET  "column_name"=replace("column_name", ' ', ''); //Remove white space

UPDATE table_name SET  "column_name"=replace("column_name", '\n', ''); //Remove newline

UPDATE table_name SET  "column_name"=replace("column_name", '\t', ''); //Remove all tab 
```

您可以使用`"column_name"`或`column_name`

谢谢

苏布罗托

* * *

## 回答 #5

> 赞同：16
> 
> 时间：2012-05-03T13:13:29.780

[`REPLACE()`功能](http://technet.microsoft.com/en-us/library/ms186862.aspx)：

```
REPLACE(field, ' ', '') 
```

* * *

## 回答 #6

> 赞同：13
> 
> 时间：2016-05-23T19:08:05.280

**[参考来自这个博客：](http://www.dbrnd.com/2016/01/sql-server-script-to-remove-extra-spaces-from-a-string/)**

**首先，创建示例表和数据：**

```
CREATE TABLE tbl_RemoveExtraSpaces
(
     Rno INT
     ,Name VARCHAR(100)
)
GO

INSERT INTO tbl_RemoveExtraSpaces VALUES (1,'I    am     Anvesh   Patel')
INSERT INTO tbl_RemoveExtraSpaces VALUES (2,'Database   Research and     Development  ')
INSERT INTO tbl_RemoveExtraSpaces VALUES (3,'Database    Administrator     ')
INSERT INTO tbl_RemoveExtraSpaces VALUES (4,'Learning    BIGDATA    and       NOSQL ')
GO 
```

**选择没有额外空格的字符串的脚本：**

```
SELECT
     [Rno]
    ,[Name] AS StringWithSpace
    ,LTRIM(RTRIM(REPLACE(REPLACE(REPLACE([Name],CHAR(32),'()'),')(',''),'()',CHAR(32)))) AS StringWithoutSpace
FROM tbl_RemoveExtraSpaces 
```

**结果：**

```
Rno         StringWithSpace                                 StringWithoutSpace
----------- -----------------------------------------  ---------------------------------------------
1           I    am     Anvesh   Patel                      I am Anvesh Patel
2           Database   Research and     Development         Database Research and Development
3           Database    Administrator                       Database Administrator
4           Learning    BIGDATA    and       NOSQL          Learning BIGDATA and NOSQL 
```

* * *

## 回答 #7

> 赞同：9
> 
> 时间：2012-05-03T13:12:54.900

t-sql 替换[http://msdn.microsoft.com/en-us/library/ms186862.aspx](http://msdn.microsoft.com/en-us/library/ms186862.aspx)

替换（val，''，''）

* * *

## 回答 #8

> 赞同：8
> 
> 时间：2017-08-25T17:36:55.747

这可以消除字符串上的空格：

```
UPDATE
    tablename
SET
    columnname = replace(columnname, ' ', ''); 
```

* * *

## 回答 #9

> 赞同：7
> 
> 时间：2012-07-20T15:39:39.853

如果字符串中有多个空格，则替换可能无法正常工作。为此，应使用以下功能。

```
CREATE FUNCTION RemoveAllSpaces
(
    @InputStr varchar(8000)
)
RETURNS varchar(8000)
AS
BEGIN
declare @ResultStr varchar(8000)
set @ResultStr = @InputStr
while charindex(' ', @ResultStr) > 0
    set @ResultStr = replace(@InputStr, ' ', '')

return @ResultStr
END 
```

例子：

```
select dbo.RemoveAllSpaces('aa  aaa       aa aa                 a') 
```

输出：

```
aaaaaaaaaa 
```

* * *

## 回答 #10

> 赞同：3
> 
> 时间：2018-02-14T09:29:28.157

替换（替换（列名，CHAR（13），''），CHAR（10），''）

* * *

## 回答 #11

> 赞同：3
> 
> 时间：2020-08-12T11:15:54.563

如果 LTRM 或 RTRM 没有删除正常空格，请尝试这样使用

```
LTRIM(RTRIM(REPLACE(REPLACE(REPLACE(Column_data, CHAR(9), ''), CHAR(10), ''), CHAR(13), ''))) 
```

* * *

## 回答 #12

> 赞同：2
> 
> 时间：2014-03-07T22:11:03.793

以防万一您需要修剪所有列中的空格，您可以使用此脚本动态执行此操作：

```
--Just change table name
declare @MyTable varchar(100)
set @MyTable = 'MyTable'

--temp table to get column names and a row id
select column_name, ROW_NUMBER() OVER(ORDER BY column_name) as id into #tempcols from INFORMATION_SCHEMA.COLUMNS 
WHERE   DATA_TYPE IN ('varchar', 'nvarchar') and TABLE_NAME = @MyTable

declare @tri int
select @tri = count(*) from #tempcols
declare @i int
select @i = 0
declare @trimmer nvarchar(max)
declare @comma varchar(1)
set @comma = ', '

--Build Update query
select @trimmer = 'UPDATE [dbo].[' + @MyTable + '] SET '

WHILE @i <= @tri 
BEGIN

    IF (@i = @tri)
        BEGIN
        set @comma = ''
        END
    SELECT  @trimmer = @trimmer + CHAR(10)+ '[' + COLUMN_NAME + '] = LTRIM(RTRIM([' + COLUMN_NAME + ']))'+@comma
    FROM    #tempcols
    where id = @i

    select @i = @i+1
END

--execute the entire query
EXEC sp_executesql @trimmer

drop table #tempcols 
```

* * *

## 回答 #13

> 赞同：2
> 
> 时间：2015-03-20T20:47:13.373

如果要从字符串中删除空格、- 和其他文本，请使用以下内容：

假设您的表格中有一个手机号码，例如“718-378-4957”或“7183784957”，并且您想要替换并获取手机号码，然后使用以下文本。

```
select replace(replace(replace(replace(MobileNo,'-',''),'(',''),')',''),' ','') from EmployeeContactNumber 
```

结果：-- 7183784957

* * *

## 回答 #14

> 赞同：2
> 
> 时间：2016-12-20T20:08:18.227

只是一个提示，如果您在使用替换功能时遇到问题，您可能会将数据类型设置为 nchar （在这种情况下，它是固定长度并且不起作用）。

* * *

## 回答 #15

> 赞同：2
> 
> 时间：2017-11-29T21:50:52.333

为了使上述所有答案完整，StackOverflow 上有关于如何处理所有空白字符的附加帖子（有关这些字符的完整列表，请参见[https://en.wikipedia.org/wiki/Whitespace_character ）：](https://en.wikipedia.org/wiki/Whitespace_character)

*   [TSQL 2008 使用 LTrim(RTrim 并且数据中仍有空格](https://stackoverflow.com/questions/3374888/tsql-2008-using-ltrimrtrim-and-still-have-spaces-in-the-data/12600716?s=1|36.5590#12600716)
*   [如何从 SQL Server 中的列中删除不间断空格？](https://stackoverflow.com/questions/15214848/how-do-i-remove-non-breaking-spaces-from-a-column-in-sql-server/15215094?s=2|36.4102#15215094)
*   [在没有 UDF 和 CLR 的情况下，从 T-SQL 中的字符串中修剪所有空白字符的好方法是什么？](https://stackoverflow.com/questions/35245812/whats-a-good-way-to-trim-all-whitespace-characters-from-a-string-in-t-sql-witho/35247507?s=3|22.0859#35247507)

* * *

## 回答 #16

> 赞同：2
> 
> 时间：2018-03-08T17:17:29.497

*这对我有用：*

```
CREATE FUNCTION dbo.TRIM(@String VARCHAR(MAX))
RETURNS VARCHAR(MAX)
BEGIN
    RETURN LTRIM(RTRIM(REPLACE(REPLACE(REPLACE(REPLACE(REPLACE(REPLACE(@String,CHAR(10),'[]'),CHAR(13),'[]'),char(9),'[]'),CHAR(32),'[]'),'][',''),'[]',CHAR(32))));
END
GO 
```

.

* * *

## 回答 #17

> 赞同：1
> 
> 时间：2016-07-19T14:40:56.023

我今天遇到了这个问题，replace / trim 成功了..见下文。

```
update table_foo 
set column_bar  = REPLACE(LTRIM(RTRIM(column_bar)), '  ', '') 
```

之前和之后 ：

```
old-bad:  column_bar    |   New-fixed:   column_bar
       '  xyz  '        |                'xyz'   
       '  xyz  '        |                'xyz' 
       '  xyz  '        |                'xyz' 
       '  xyz  '        |                'xyz' 
       '  xyz  '        |                'xyz' 
       '  xyz  '        |                'xyz' 
```

* * *

## 回答 #18

> 赞同：1
> 
> 时间：2020-01-18T10:28:15.660

检查并尝试以下脚本（单元测试）-

```
--Declaring
DECLARE @Tbl TABLE(col_1 VARCHAR(100));

--Test Samples
INSERT INTO @Tbl (col_1)
VALUES
('  EY     y            
Salem')
, ('  EY     P    ort       Chennai   ')
, ('  EY     Old           Park   ')
, ('  EY   ')
, ('  EY   ')
,(''),(null),('d                           
    f');

SELECT col_1 AS INPUT,
    LTRIM(RTRIM(
    REPLACE(
    REPLACE(
    REPLACE(
    REPLACE(
    REPLACE(
        REPLACE(
        REPLACE(
        REPLACE(
        REPLACE(
        REPLACE(
        REPLACE(col_1,CHAR(10),' ')
        ,CHAR(11),' ')
        ,CHAR(12),' ')
        ,CHAR(13),' ')
        ,CHAR(14),' ')
        ,CHAR(160),' ')
        ,CHAR(13)+CHAR(10),' ')
    ,CHAR(9),' ')
    ,' ',CHAR(17)+CHAR(18))
    ,CHAR(18)+CHAR(17),'')
    ,CHAR(17)+CHAR(18),' ')
    )) AS [OUTPUT]
FROM @Tbl; 
```

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2015-08-13T04:43:38.237

删除字符串左右的空格。删除中间使用的空间`Replace`。

您可以使用`RTRIM()`从右侧`LTRIM()`删除空格并从左侧删除空格，从而删除左右空格，如下所示：

```
SELECT * FROM table WHERE LTRIM(RTRIM(username)) = LTRIM(RTRIM("Bob alias baby")) 
```

* * *

## 回答 #20

> 赞同：0
> 
> 时间：2018-03-08T17:25:25.473

**替换特定字符的语法：**

```
REPLACE ( string_expression , string_pattern , string_replacement ) 
```

例如在字符串“HelloReplaceThingsGoing”中，替换词被替换为 How

```
SELECT REPLACE('HelloReplaceThingsGoing','Replace','How');
GO 
```

* * *

## 回答 #21

> 赞同：0
> 
> 时间：2018-07-24T23:32:34.970

删除空格、cr、lf、制表符或可配置的功能版本 (udf)。

```
select Common.ufn_RemoveWhitespace(' 234   asdf   wefwef 3  x   ', default) as S 
```

结果：'234asdfwefwef3x'

```
alter function Common.RemoveWhitespace
(
    @pString nvarchar(max),
    @pWhitespaceCharsOpt nvarchar(max) = null -- default: tab, lf, cr, space 
)  
returns nvarchar(max) as
/*--------------------------------------------------------------------------------------------------
    Purpose:   Compress whitespace

    Example:  select Common.ufn_RemoveWhitespace(' 234   asdf   wefwef 3  x   ', default) as s 
              -- Result: 234asdfwefwef3x

    Modified    By          Description
    ----------  ----------- --------------------------------------------------------------------
    2018.07.24  crokusek    Initial Version 
  --------------------------------------------------------------------------------------------------*/ 
begin    
    declare 
        @maxLen bigint = 1073741823, -- (2^31 - 1) / 2 (https://stackoverflow.com/a/4270085/538763)
        @whitespaceChars nvarchar(30) = coalesce(
            @pWhitespaceCharsOpt, 
            char(9) + char(10) + char(13) + char(32));  -- tab, lf, cr, space

    declare
        @whitespacePattern nvarchar(30) = '%[' + @whitespaceChars + ']%',
        @nonWhitespacePattern nvarchar(30) = '%[^' + @whitespaceChars + ']%',
        @previousString nvarchar(max) = '';

    while (@pString != @previousString)
    begin
        set @previousString = @pString;

        declare
            @whiteIndex int = patindex(@whitespacePattern, @pString);

        if (@whiteIndex > 0)
        begin                   
            declare 
                @whitespaceLength int = nullif(patindex(@nonWhitespacePattern, substring(@pString, @whiteIndex, @maxLen)), 0) - 1;                

            set @pString = 
                substring(@pString, 1, @whiteIndex - 1) + 
                iif(@whiteSpaceLength > 0, substring(@pString, @whiteIndex + @whiteSpaceLength, @maxLen), '');
        end        
    end        
    return @pString;
end
go 
```

* * *

## 回答 #22

> 赞同：0
> 
> 时间：2019-01-26T17:36:48.080

出于某种原因，替换每次只能使用一个字符串。我有一个像“ **Test MSP** ”这样的字符串，我只想留一个空格。

我使用了@Farhan 所做的方法，但做了一些修改：

```
CREATE FUNCTION ReplaceAll
(
    @OriginalString varchar(8000),
    @StringToRemove varchar(20),
    @StringToPutInPlace varchar(20)
)
RETURNS varchar(8000)
AS
BEGIN
declare @ResultStr varchar(8000)
set @ResultStr = @OriginalString
while charindex(@StringToRemove, @ResultStr) > 0
    set @ResultStr = replace(@ResultStr, @StringToRemove, @StringToPutInPlace)

return @ResultStr
END 
```

然后我像这样运行我的更新

```
UPDATE tbTest SET Description = dbo.ReplaceAll(Description, '  ', ' ') WHERE ID = 14225 
```

然后我得到了这个结果： **Test MSP**

如果有人像我一样需要它，请在此处发布。

运行于：Microsoft SQL Server 2016 (SP2)

* * *

## 回答 #23

> 赞同：0
> 
> 时间：2021-10-29T10:53:42.657

我知道最初的问题是关于简单地替换*空格*，但如果您需要替换所有空格，您可以使用 TRANSLATE 函数（自 Sql Server 2019 起）将给定的字符列表转换为更容易替换的字符。然后用 REPLACE 函数包装它。

这可以节省重复调用：

```
DECLARE @Whitespace CHAR(4) = CHAR(0) + CHAR(9) + CHAR(13) + CHAR(10);
SELECT REPLACE(
    TRANSLATE(' TEST    ', @Whitespace, '    '),
    ' ', ''); 
```

* * *

## 回答 #24

> 赞同：-1
> 
> 时间：2019-08-20T17:36:26.740

似乎每个人都在提到一个单一的 REPLACE 函数。甚至多次调用 REPLACE 函数。但是当你有未知数量的空格的动态输出时，它就不起作用了。任何经常处理这个问题的人都知道，REPLACE 只会删除一个空格，而不是全部，因为它应该这样做。LTRIM 和 RTRIM 似乎也有同样的问题。把它留给微软。这是一个使用 WHILE 循环删除 ALL CHAR(32) 值（空格）的示例输出。

```
DECLARE @INPUT_VAL  VARCHAR(8000)
DECLARE @OUTPUT_VAL VARCHAR(8000)

SET @INPUT_VAL = '      C               A                         '
SET @OUTPUT_VAL = @INPUT_VAL
WHILE CHARINDEX(CHAR(32), @OUTPUT_VAL) > 0 BEGIN
    SET @OUTPUT_VAL = REPLACE(@INPUT_VAL, CHAR(32), '')
END

PRINT 'START:' + @INPUT_VAL + ':END'
PRINT 'START:' + @OUTPUT_VAL + ':END' 
```

这是上面代码的输出：

```
START:      C               A                         :END
START:CA:END 
```

现在更进一步并在 UPDATE 或 SELECT 语句中使用它，将其更改为 udf。

```
CREATE FUNCTION udf_RemoveSpaces (@INPUT_VAL    VARCHAR(8000))
RETURNS VARCHAR(8000)
AS 
BEGIN

DECLARE @OUTPUT_VAL VARCHAR(8000)
SET @OUTPUT_VAL = @INPUT_VAL
-- ITTERATE THROUGH STRING TO LOOK FOR THE ASCII VALUE OF SPACE (CHAR(32)) REPLACE IT WITH BLANK, NOT NULL
WHILE CHARINDEX(CHAR(32), @OUTPUT_VAL) > 0 BEGIN
    SET @OUTPUT_VAL = REPLACE(@INPUT_VAL, CHAR(32), '')
END

RETURN @OUTPUT_VAL
END 
```

然后在 SELECT 或 INSERT 语句中使用该函数：

```
UPDATE A
SET STATUS_REASON_CODE = WHATEVER.dbo.udf_RemoveSpaces(STATUS_REASON_CODE)
FROM WHATEVER..ACCT_INFO A
WHERE A.SOMEVALUE = @SOMEVALUE

INSERT INTO SOMETABLE
(STATUS_REASON_CODE)
SELECT WHATEVER.dbo.udf_RemoveSpaces(STATUS_REASON_CODE)
FROM WHATEVER..ACCT_INFO A
WHERE A.SOMEVALUE = @SOMEVALUE 
```

# javascript - 从javascript获取水印绑定文本框的文本值

> ID：10432087
> 
> 赞同：0
> 
> 时间：2012-05-03T13:09:51.217
> 
> 标签：javascript, jquery, asp.net, ajaxcontroltoolkit, watermark

我想从 javascript 中获取文本框的文本值。文本框附有水印扩展器。因此，在从 javascript 中获取值时，如果文本框为空，那么我们也会得到那个水印文本。

我们的标记就像

```
<asp:TextBox ID="txtname" runat="server" MaxLength="30"></asp:TextBox>
<asp:TextBoxWatermarkExtender ID="wmname" runat="server" TargetControlID="txtname"
                                WatermarkText="Name" WatermarkCssClass="txt">
                            </asp:TextBoxWatermarkExtender> 
```

JS：

```
$('input').blur(function() {            
        alert($(this).val());
    }); 
```

在模糊事件中，如果我们没有输入任何值，那么它也会发出警报“名称”。

有什么方法可以获取文本框的确切文本，即不是来自 javacript 的水印文本？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T13:15:48.233

在 中`wrapper behavior`，有一个**_isWatermarked**属性，我们可以使用它来检查 TextBox 是否加水印。

脚本：

```
<script>
function addValue() {
    if (!AjaxControlToolkit.TextBoxWrapper.get_Wrapper($get("TextBox1"))._isWatermarked) {
         $get("TextBox1").value = $get("TextBox1").value + ": Hello!";
     }
   }    
</script> 
```

控制：

```
 <asp:TextBox ID="TextBox1" runat="server"></asp:TextBox>
 <cc1:TextBoxWatermarkExtender ID="TWE1" runat="server" Enabled="True" TargetControlID="TextBox1"
 WatermarkText="Type here:" WatermarkCssClass="watermarked" /> 
```

# asp.net - 中继器内的条件RequiredFieldValidator

> ID：10432090
> 
> 赞同：0
> 
> 时间：2012-05-03T13:10:00.280
> 
> 标签：asp.net, repeater, requiredfieldvalidator

我有一个中继器，它包含一个单选按钮列表、一个文本框和一个 requiredfieldvalidator 控件。Radiobuttonlist 包含以下内容：

```
Meets (Value M)
Above (Value A)
Below (Value B)
N/A (Value(N/A) 
```

文本框设置为允许用户为他们的答案输入一些理由，并且 requiredfieldvalidator 确保文本框不为空，足够简单。但是范围发生了一些变化，现在客户希望仅当答案不是“M”时才触发 requiredfieldvalidator。

我尝试为验证器设置 Load 方法，但是当验证器加载时，它不知道 RBL 中的答案是什么，因为它在用户回答之前被触发。我不认为我可以进行回发，因为转发器是在模态弹出窗口中处理的，如果我进行回发，我不确定会发生什么。仅当用户选择“Meets”以外的其他内容时，如何将验证器设置为 false？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T13:57:15.427

试试这个：

java脚本：

```
<script type="text/javascript">
    function UpdateValidator(radioID, validatorid) {
        //enabling the validator only if the checkbox is checked
        var enableValidator = $("#" + radioID).is(":checked");          
        ValidatorEnable(validatorid, enableValidator);
    }
</script> 
```

cs代码：

```
protected void myRepeater_ItemDataBound(object sender, RepeaterItemEventArgs e)
    {
        if (e.Item.ItemType == ListItemType.Item || e.Item.ItemType == ListItemType.AlternatingItem)
        {
            RadioButton rd = e.Item.FindControl("myRb") as RadioButton;
            RequiredFieldValidator rfv = e.Item.FindControl("myRfv") as RequiredFieldValidator;
            // you can just pass "this" instead of "myDiv.ClientID" and get the ID from the DOM element
            rd.Attributes.Add("onclick", "UpdateValidator('" + rd.ClientID + "','" + rfv.ClientID + "');");
        }
    } 
```

# silverlight - 如何在 WP7 中拖动列表框项？

> ID：10432097
> 
> 赞同：2
> 
> 时间：2012-05-03T13:10:27.033
> 
> 标签：silverlight, windows-phone-7, datatemplate

正如下面的代码，我有一个列表框。我想将 listboxitem 水平向右拖动并消失。但是当拖动它时，会弹出这个错误，

变换.X += e.Horizo​​ntalChange; **[空引用异常]**

我查看手表，发现 e.Horizo​​ntalChange 的值为 65.0，为什么会显示错误？以及我如何实现我的目标？

```
<DataTemplate x:Key="TasksListDataTemplate">
    <StackPanel x:Name="stackPanel" Margin="0,0,0,10" RenderTransformOrigin="0.5,0.5">
            <toolkit:GestureService.GestureListener>
                <toolkit:GestureListener 
                    DragDelta="taskitem_DragDelta"
            </toolkit:GestureService.GestureListener>
        <TextBlock x:Name="textBlock" TextWrapping="Wrap" Text="{Binding Title}" FontSize="{StaticResource PhoneFontSizeLarge}" HorizontalAlignment="Left" Width="432" RenderTransformOrigin="0.5,0.5">
        </TextBlock>
        <StackPanel x:Name="stackPanel1" Orientation="Horizontal" HorizontalAlignment="Left">
            <TextBlock x:Name="textBlock1" TextWrapping="Wrap" Text="due:" d:LayoutOverrides="Width" FontSize="{StaticResource PhoneFontSizeMedium}" RenderTransformOrigin="0.5,0.5">
            </TextBlock>
            <TextBlock x:Name="textBlock2" TextWrapping="Wrap" Text="{Binding DueDate}" d:LayoutOverrides="Width" FontSize="{StaticResource PhoneFontSizeMedium}" RenderTransformOrigin="0.5,0.5">
            </TextBlock>
        </StackPanel>
    </StackPanel>
</DataTemplate> 
```

文件后面的代码是

```
 private void taskitem_DragDelta(object sender, DragDeltaGestureEventArgs e)
    {
        TranslateTransform transform = (sender as StackPanel).RenderTransform as TranslateTransform;
        transform.X += e.HorizontalChange;
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T13:29:33.870

您的 StackPanel 没有`TranslateTransform`指定，因此 .RenderTransform 属性在转换为 .RenderTransform 时为空`TranslateTransform`。

原因是一个元素可以有许多不同类型的变换（`CompositeTransform`、`ScaleTransform`、`SkewTransform`、`TranslateTransform`等`RotateTransform`）。默认情况下，元素根本没有`RenderTransform`。

如果您使用 Blend 来编辑 XAML，a`CompositeTransform`是它创建的最常见的类型（因为它在一个对象中包含许多不同类型的转换）。

`TranslateTransform`在声明中添加一个默认值`StackPanel`，它应该可以工作。

```
<StackPanel x:Name="stackPanel" Margin="0,0,0,10" RenderTransformOrigin="0.5,0.5">
    <StackPanel.RenderTransform>
        <TranslateTransform X="0" Y="0"/>
    </StackPanel.RenderTransform> 
```

*附带说明：您应该始终测试“as”操作的结果，因为它们可以为空。*

# c# - 通过测试命令和事件记录文档

> ID：10432100
> 
> 赞同：0
> 
> 时间：2012-05-03T13:10:35.180
> 
> 标签：c#, testing, documentation, cqrs, event-sourcing

我愿意通过我的测试生成一些文档。到目前为止，我的测试看起来像这样：

```
 public class creation_of_a_new_inventory_item : BaseClass<CreateInventoryItem>
    {
    private Guid _Id = Guid.NewGuid();
    private string _Name = "test";

    public override CommandHandler<CreateInventoryItem> OnHandle(IRepository repository)
    {
        return  new CreateInventoryItemHandler(repository);
    }

    protected override IEnumerable<IEvent> Given()
    {
        yield break;
    }

    protected override CreateInventoryItem When()
    {
        return new CreateInventoryItem()
        {
            Id = _Id,
            Name = _Name
        };
    }

    protected override IEnumerable<IEvent> Expect()
    {
        yield return new InventoryItemCreatedAdded()
                         {
                             Id = _Id,
                             Name = _Name
                         };
    }

   [Test]
    public void does_not_throw_an_Exception()
    {
        Assert.IsNull(Caught);
    }
} 
```

不幸的是，在使用 Nunit 时，我很难获得所需的信息以生成一些漂亮且易于阅读的文档。

你们中有人使用 Nunit 来做到这一点吗？你能给我指出一些有趣的资源吗，我会在网上忽略吗？您是否使用其他工具从测试中生成文档？

[编辑] 我的意图是从我的代码中生成如下内容：

```
 creation of a new inventory item
     When I Create Inventory Item 
        Id:{id},
        Name:{name}
     Then 
         Inventory Item is Created ({Success/Fail})
             Id:{id},
             Name:{name} 
     And does not throw an Exception ({Success/Fail}) 
```

这适用于第一种方法。我以后可能会改变，但主要目标是这个。我的目标是能够在不让他输入代码的情况下写出我的老板可能会理解的东西。

[/编辑]

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T15:37:07.463

我在 Documently 中得到了类似的东西：

```
[Subject(typeof(Customer))]
public class When_customer_relocates
    : Handler_and_Aggregate_spec
{
    static NewId AggregateId = NewId.Next();

    static RelocateTheCustomerHandler handler;

    Establish context = () =>
        {
            setup_repository_for<Customer>();
            has_seen_events<Customer>(CustomerTestFactory.Registered(AggregateId));
            handler = new RelocateTheCustomerHandler(() => repo);
        };

    Because of = () =>
        handler.Consume(a_command<RelocateTheCustomer>(new MsgImpl.Relocate
            {
                AggregateId = AggregateId,
                NewAddress = new MsgImpl.Address
                    {
                        City = "Berlin",
                        PostalCode = "4566",
                        Street = "FünfteStrasse",
                        StreetNumber = 45
                    },
                Version = 1U
            }));

    It should_have_loaded_existing = () =>
        A.CallTo(() => repo.GetById<Customer>(AggregateId, 1)).MustHaveHappened(Repeated.Exactly.Once);

    It should_have_published_relocated_event = () => 
        yieldedEvents.ShouldContain<Relocated>(
            r => r.City.ShouldEqual("Berlin"));

    Behaves_like<Event_versions_are_greater_than_zero> should_specify_versions_above_zero;
    Behaves_like<Event_versions_are_monotonically_increasing> should_specify_monotonically_increasing_versions;
    Behaves_like<Events_has_non_default_aggregate_root_id> should_have_non_default_ar_ids;
} 
```

但是，由您来说明您发现它的可读性。

您的另一个选择可能是 SpecFlow，如下所示：

```
Feature: Score Calculation 
  In order to know my performance
  As a player
  I want the system to calculate my total score

Scenario: Gutter game
  Given a new bowling game
  When all of my balls are landing in the gutter
  Then my total score should be 0

Scenario: Beginners game
  Given a new bowling game
  When I roll 2 and 7
  And I roll 3 and 4
  And I roll 8 times 1 and 1
  Then my total score should be 32

Scenario: Another beginners game
  Given a new bowling game
  When I roll the following series: 2,7,3,4,1,1,5,1,1,1,1,1,1,1,1,1,1,1,5,1
  Then my total score should be 40

Scenario: All Strikes
  Given a new bowling game
  When all of my rolls are strikes
  Then my total score should be 300

Scenario: One single spare
   Given a new bowling game 
   When I roll the following series: 2,8,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1
   Then my total score should be 29

Scenario: All spares
  Given a new bowling game
  When I roll 10 times 1 and 9
  And I roll 1
  Then my total score should be 110 
```

如果取决于您所说的文档；规范流程实际上非常接近文档。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T07:49:51.723

不要为 NUnit 烦恼。只需使用反射扫描您的程序集。您的测试夹具的结构将始终相同，因此生成文档非常容易。您还可以将类似 Description() 格式化方法添加到所有命令和事件中，以便获得具有实际值的描述性输出。

# php - 通过 PHP 连接到 MySQL 数据库访问被拒绝

> ID：10432103
> 
> 赞同：-1
> 
> 时间：2012-05-03T13:10:46.013
> 
> 标签：php, mysql

我在尝试连接到数据库时收到“拒绝访问错误”。这是代码：

```
 <?php
    mysql_connect("00.00.00.00:00000","user","pass");
    mysql_select_db("dbname");

    $q=mysql_query("CALL  GetMaterialInfo('".$_REQUEST['user']."','".$_REQUEST['pass']."','6c3e91d3')");
    while($e=mysql_fetch_assoc($q))
        $output[]=$e;

    print(json_encode($output));

    mysql_close();
    ?> 
```

我当然更改了主机的 IP 地址（不是全为零）以及用户名和密码以及数据库名称。我确定用户和密码，以及主机 ip 和端口号以及数据库名称是正确的。我设法使用 JDBC 连接器连接到数据库，但它通过 PHP 脚本给出了以下错误：

```
<b>Warning</b>:  mysql_connect() [<a href='function.mysql-connect'>function.mysql-connect</a>]: Access denied for user 'username'@'192.168.1.1' (using password: YES) in <b>/www/zxq.net/t/e/s/testphpbach/htdocs/Connection.php</b> on line <b>2</b><br /> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-03T13:25:43.023

您需要进行以下检查：

1.  检查 192.168.1.1 是否包含在 /etc/hosts 中。如果您的数据库在 localhost 机器上，请尝试使用 localhost 而不是 ip。
2.  检查端口是否打开。尝试使用 telnet（例如 ip/localhost）。例如远程登录 localhost 2222
3.  检查数据库是否具有您的用户名和密码的授予权限。要检查权限，请使用`SHOW GRANTS [FOR user]`. 更多信息可以在[这里](http://dev.mysql.com/doc/refman/5.0/en/show-grants.html)找到 如果这些都不起作用，也许尝试使用默认用户以外的其他用户。
    让知道会发生什么

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-03T13:15:07.350

您可能成功地从 phpmyadmin 使用相同的用户名/密码登录，但如果主机不是本地主机，则无法从 php 登录。我有同样的问题。转到 mysql 并授予该用户从所有主机 (%) 或您运行 php 代码的特定主机 IP 登录的权限。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-11T12:03:34.180

Gavriel，你救了我一个受伤的世界。

我以前收到 mysql 错误消息“用户拒绝访问...”

我在 php 中的远程访问问题的解决方案是授予对 cPanel '%' 中所有主机的访问权限

此外，要找出您的 mysql 虚拟主机和端口，请在您的数据库上执行 sql 命令“显示变量”。变量 'hostname' 和 'port' 会告诉你 mysql 数据库连接需要知道的内容。

要注意的另一件事是确保您创建的用户实际添加到数据库中。

# database - pgAdmin 数据库恢复

> ID：10432104
> 
> 赞同：1
> 
> 时间：2012-05-03T13:10:46.377
> 
> 标签：database, postgresql, syntax-error, pgadmin, psql

我写了命令：

```
\i /home/creative/Desktop /NASEEM_ALRABEEH_20120425_04_00_01.sql 
```

从终端恢复数据库时出现此错误：

> psql:/home/creative/Desktop:0: 无法从输入文件中读取：是一个目录

任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-05T15:39:59.943

好像您的路径中有一个空白：

```
\i /home/creative/Desktop /NASEEM_ALRABEEH_20120425_04_00_01.sql
-------------------------^ here 
```

删除它并重试。

[**顺便说一句，这看起来像是psql**](http://www.postgresql.org/docs/current/interactive/app-psql.html)的元命令，而不是您将在 pgAdmin 中执行的任何内容。可能是混搭？

# android - 在Android地图中显示搜索位置的标记？

> ID：10432106
> 
> 赞同：2
> 
> 时间：2012-05-03T13:10:55.860
> 
> 标签：android, maps, android-alertdialog, google-maps-markers

在这里，我正在根据搜索地点获取地图，但该地点的标记未显示默认我为一个地点设置标记，它很好地显示了我如何显示该市​​场以在地图中搜索地点。所以我编写了代码当我们单击标记时显示警报对话框？

p

```
ackage com.commonsware.android.nooer;
import java.io.IOException;
import java.util.ArrayList;
import java.util.List;
import java.util.Locale;
import android.app.AlertDialog;
import android.app.Dialog;
import android.content.DialogInterface;
import android.content.DialogInterface.OnCancelListener;
import android.content.DialogInterface.OnClickListener;
import android.graphics.Point;
import android.graphics.drawable.Drawable;
import android.location.Address;
import android.location.Geocoder;
import android.os.Bundle;
import android.view.MotionEvent;
import android.view.View;
import android.widget.Button;
import android.widget.EditText;
import android.widget.Toast;
import com.google.android.maps.GeoPoint;
import com.google.android.maps.MapActivity;
import com.google.android.maps.MapController;
import com.google.android.maps.MapView;
import com.google.android.maps.MyLocationOverlay;
import com.google.android.maps.OverlayItem;

public class NooYawk extends MapActivity {

MapView mapView;

MapController mapController;

GeoPoint mgeoPoint;

Drawable marker;

MyLocationOverlay mLocationOverlay;

MotionEvent e;
public void changeMap(String area)
{

MapController mc=mapView.getController();
GeoPoint myLocation=null;
double lat = 0;
double lng = 0;
try
{

Geocoder g = new Geocoder(this, Locale.getDefault());

java.util.List<android.location.Address> result=g.getFromLocationName(area, 1);
if(result.size()>0){

Toast.makeText(NooYawk.this, "country: " + String.valueOf(result.get(0).getCountryName()), Toast.LENGTH_SHORT).show();
lat = result.get(0).getLatitude();
lng = result.get(0).getLongitude();

}            
else{
Toast.makeText(NooYawk.this, "record not found", Toast.LENGTH_SHORT).show();
return;
}
}
catch(IOException io)
{
Toast.makeText(NooYawk.this, "Connection Error", Toast.LENGTH_SHORT).show();
}
myLocation = new GeoPoint(
(int) (lat * 1E6),
(int) (lng * 1E6));
Drawable drawable = this.getResources().getDrawable(R.drawable.icon);
mc.animateTo(myLocation);
mc.setZoom(10);
mapView.invalidate();
}

@Override
protected void onCreate(Bundle icicle) {

    // TODO Auto-generated method stub
    super.onCreate(icicle);
    setContentView(R.layout.main);
    Button btnSearch=(Button) findViewById(R.id.btnSearch);
    btnSearch.setOnClickListener(new View.OnClickListener() {

        public void onClick(View v) {

        EditText txtSearch=(EditText)findViewById(R.id.txtMapSearch);
        String area=txtSearch.getText().toString();
        Toast.makeText(NooYawk.this, "Click-" + String.valueOf(area), Toast.LENGTH_SHORT).show();
        NooYawk.this.changeMap(area);

                    }

        });

    mapView = (MapView) findViewById(R.id.map);

    mapController = mapView.getController();

    mapView.setBuiltInZoomControls(true);

    marker = getResources().getDrawable(R.drawable.marker);

    marker.setBounds(0, 0, marker.getIntrinsicWidth(), marker
            .getIntrinsicHeight());

    mapView.getOverlays().add(new MapOverlay(marker));

    mLocationOverlay = new MyLocationOverlay(this, mapView);
    mapView.getOverlays().add(mLocationOverlay);

    setViewLocation();
}

@Override
protected Dialog onCreateDialog(int id) {

    // TODO Auto-generated method stub

    switch (id) {
        case 0:
            return new AlertDialog.Builder(this).setTitle("You want Add it to favorites").setIcon(
                    R.drawable.icon).setPositiveButton("Yes",
                    new OnClickListener() {

                        public void onClick(DialogInterface dialog , int which) {

                            // TODO Auto-generated method stub

                        }
                    }).setCancelable(true).setNegativeButton("Cancel",
                    new OnClickListener() {

                        public void onClick(DialogInterface dialog , int which) {

                            // TODO Auto-generated method stub

                        }
                    })

            .setOnCancelListener(new OnCancelListener() {

                public void onCancel(DialogInterface dialog) {

                    // TODO Auto-generated method stub
                    Toast.makeText(getApplicationContext(), "Dismiss",
                            Toast.LENGTH_SHORT).show();
                }

            }).create();

        default:
            break;
    }
    return null;
        }

private void setViewLocation() {
    String[] coordinates = { "22.716221", "75.896816" };

    double lat = Double.parseDouble(coordinates[0]);
    double lng = Double.parseDouble(coordinates[1]);
    mgeoPoint = new GeoPoint((int) (lat * 1E6), (int) (lng * 1E6));

    mapController.animateTo(mgeoPoint);
    mapController.setZoom(15);

    mapView.invalidate();

}

@Override
protected boolean isRouteDisplayed() {

    // TODO Auto-generated method stub
    return false;
}

Point scrPoint;

private GeoPoint getPoint(double lat , double lon) {

    return (new GeoPoint((int) (lat * 1E6), (int) (lon * 1E6)));
}

class MapOverlay extends
        com.google.android.maps.ItemizedOverlay<OverlayItem> {

    List<OverlayItem> ListofGeopoints = new ArrayList<OverlayItem>();

    public MapOverlay(Drawable defaultMarker ) {

        super(defaultMarker);

        ListofGeopoints.add(new OverlayItem(getPoint(22.716221, 75.896816),
                "IN", "India"));

        populate();

    }

    @Override
    protected boolean onTap(int index) {

    switch (index) {
            case 0:
                Toast.makeText(getApplicationContext(), "GeoLocation : 0",
                        Toast.LENGTH_LONG).show();
                showDialog(0);
            break;
        }

        return true;
    }

    String add = "";

    List<Address> add_List = new ArrayList<Address>();

    private void getAddress() {

        /*add_List = ReverseGeocode
                .getFromLocation(35.594227, -105.223618, 2);
*/
    }

    @Override
    protected OverlayItem createItem(int i) {
        return (ListofGeopoints.get(i));
    }

    @Override
    public int size() {
        return ListofGeopoints.size();
    }
}
} 
```

提前致谢.......

# sql - sql中ON子句和using子句的区别

> ID：10432107
> 
> 赞同：17
> 
> 时间：2012-05-03T13:11:00.497
> 
> 标签：sql, oracle, join

我正在做一些与加入 oracle 相关的任务。在某些情况下，我卡住了，即 USING 和 ON 子句有什么区别。

我知道使用 ON 子句我们可以加入无限的表。是否可以使用 USING 子句连接无限表？如何？你能用例子解释一下吗？

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-05-03T13:12:42.540

*   子句：这`USING`允许您按名称指定连接键。

*   **子句：此语法允许您为两个表**中的`ON`连接键指定列名。

 ****USING 子句**

> 如果多个列共享相同的名称但您不想使用所有这些公共列连接，则使用 USING 子句。USING 子句中列出的列在语句中不能有任何限定符，包括 WHERE 子句：

**ON 子句**

> ON 子句用于连接两个表中列名不匹配的表。连接条件从 WHERE 子句中的过滤条件中删除：

[**甲骨文**](http://www.dba-oracle.com/art_sql_iso_99.htm)

```
select department_name, city
from departments
JOIN locations
USING (location_id); -- specify the same column name 
                     -- for both of the tables for the join
select department_name, city
from departments dept
join locations loc
on (dept.location_id = loc.id); -- specify different column name 
                                -- for the tables for the join. 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-05-03T14:20:41.513

除了上面的答案之外，一个重要的区别是 ON 子句分别保留每个连接表中的列，而 USING 子句将连接表中的列合并到一个列中。例如，如果您希望仅在其中一个联接表**中不存在**匹配行时才在结果集中保留行，这可能很重要。为此，您通常会使用 OUTER JOIN 以及 WHERE 子句中的条件，例如

```
SELECT t1.*
  FROM TABLE_1 t1
  LEFT OUTER JOIN TABLE_2 t2
    ON (t2.KEY_FIELD = t1.KEY_FIELD)
  WHERE t2.KEY_FIELD IS NULL 
```

在这种情况下，假设 TABLE_2.KEY_FIELD 是 TABLE_2 上主键的一部分，因此如果 TABLE_2 中实际存在数据，则永远不能为 NULL。如果在上述join之后，发现joined set中的TABLE_2.KEY_FIELD包含NULL，则表示没有找到与对应的TABLE_1行匹配的TABLE_2行。这有时很有用。

分享和享受。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2016-01-21T13:43:42.957

除了上述答案。

`using`子句将只打印一次加入的列。

```
A.id  B.id
1      1
2      2
3      3 
```

`Select * from A JOIN B using(id);`

输出将是

```
id
1
2
3 
```

但是在 On 子句中

`Select * from A JOIN B on A.id=B.id;`

输出会。

```
id     id
1      1
2      2
3      3 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-05-03T13:15:17.020

两者都允许加入“无限”表。不同之处在于 USING 要求连接列具有相同的名称：

```
select emp.ename, dept.dname
from emp join dept using (deptno); 
```

当连接列具有不同的名称时，ON 版本也可以工作：

```
select emp.ename, emp2.ename manager_name
from emp join emp emp2 on (emp.mgr = emp2.empno); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-07-19T12:06:07.087

`USING`条款：

```
SELECT * FROM COUNTRIES JOIN CITIES USING (COUNTRY) 
```

上面的查询在等于的条件下执行`COUNTRIES`表和表之间的内连接`CITIES``COUNTRIES.COUNTRY``CITIES.COUNTRY`

`ON`条款：

```
SELECT * FROM COUNTRIES JOIN CITIES ON (COUNTRIES.COUNTRY = CITIES.COUNTRY) 
```

上面的查询使用 on 子句执行内部连接操作。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2014-09-26T06:26:31.333

```
SELECT s.SID, s.SNAME, a.CNAME, c.MAJOR
FROM STUDENT s JOIN COLLEGE c
ON s.SID = c.SID;

SELECT SID, s.SNAME, a.CNAME, a.MAJOR
FROM STUDENT s JOIN COLLEGE c
USING (SID); 
```

子句：这`USING`允许按名称指定连接键。

允许为两个表中的`ON`连接键指定列名。

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2020-12-31T23:28:51.023

`On`子句和`Using`子句的作用相同，但如果列名相同，则使用`USING`子句。否则，如果列名不同，则使用 for`ON`子句。**

# jquery - 如何使用 jqgrid + Struts2 jquery 插件 + Freemarker 模板自定义搜索

> ID：10432109
> 
> 赞同：1
> 
> 时间：2012-05-03T13:11:08.930
> 
> 标签：jquery, jqgrid, struts2, freemarker

我正在使用 Hibernate + Struts2 + Struts2-jquery (jqgrid) + freemarker 运行一个 webapp。我正在尝试创建一个 jqgrid (JSON) 来向用户呈现一些结果，并使用多重搜索启用一些复杂的数据过滤。我的标准功能工作得很好。这是我的ftl：

```
<div id="mygridfilter">
    <@sj.submit id="grid_edit_searchbutton" value="Search" onClickTopics="searchgrid" button="true"/>
    <@sj.submit id="grid_edit_colsbutton" value="Show/Hide Columns" onClickTopics="showcolumns" button="true"/>
    <@sj.submit id="grid_reload_button" onClickTopics="reloadItems" value="Reload" button="true"/>

    </div>
<hr />
<@sjg.grid
        id="gridedittable"
        caption="Glycobase Users"
        dataType="json"
        href="json_table.action"
        pager="true"
        navigator="true"
        navigatorSearchOptions="{multipleSearch:true,
                        sopt:['cn'],
                        reloadAfterSubmit:true,
                        }"
        gridModel="gridModel"
        reloadTopics="reloadItems"
        rowList="10,15,20"
        rowNum="15"
        rownumbers="true"
        sortname="userName"
        sortorder="asc"
        navigatorAdd="false"
        navigatorEdit="false"
        navigatorDelete="false"
        navigatorView="true"
        width="800"
        prmNames=""
        resizable="true"
        altRows="true"
    navigatorExtraButtons="{
            seperator: { 
                title : 'seperator'  
            }, 
            hide : { 
                title : 'Show/Hide', 
                icon: 'ui-icon-wrench', 
                topic: 'showcolumns'
            },
            alert : { 
                title : 'Alert', 
                onclick: function(){ alert('Grid Button clicked!') }
            }
        }"
        shrinkToFit="true"
    >

    <@sjg.gridColumn name="userName" index="contributorName" title="Contributor Name" sortable="true"/>
    <@sjg.gridColumn name="email" index="email" title="Email" sortable="true"/>
    <@sjg.gridColumn name="fullName" index="fullName" title="Full Name" sortable="true"/>

    </@sjg.grid>
    <script> 
```

和一些顶部的javascript：

```
<script>
    $.subscribe('showcolumns', function(event,data) {
        $.struts2_jquery.require("js/plugins/grid.setcolumns.js");
            $("#gridedittable").jqGrid('setColumns',{});
    });

    $.subscribe('searchgrid', function(event,data) {
            $("#gridedittable").jqGrid('searchGrid', {
                        multipleSearch:true,
                        sopt:['cn'],
                        reloadAfterSubmit:true
                        }
                        );
        });

</script> 
```

这是当前的行为：当我单击搜索图标（或搜索按钮）时，一个对话窗口允许使用某些运算符（即“名称”“包含”“...”）对列字段进行多重搜索。我需要在搜索中包含一些额外的查询，以进一步完善我在服务器端的查询......即说我需要一个额外的搜索条件“名称长度”“更大”“......”。1）我可以在没有相对列的情况下向搜索下拉列表添加条件吗？2) 我怎样才能附加到 JSON.filters 发送到服务器的查询？IE

```
filters: "{"groupOp":"AND","rules":[{"field":"nameLength","op":"gt","data":"4"}]}" 
```

在服务器端，我会为 nameLenght 设置 setter 和 getter，并相应地执行休眠条件查询以将正确的行返回给 gridModel。

有什么帮助吗？

谢谢

# javascript - Google Maps API v3 添加标记到地图

> ID：10432114
> 
> 赞同：1
> 
> 时间：2012-05-03T13:11:31.100
> 
> 标签：javascript, asp.net, google-maps-api-3

我在我的 asp.net 站点的 GridView 中有 GoogleMaps (api v3) 标记坐标。我想在地图上显示这些标记。问题是标记彼此重叠。所有标记都在第一个标记坐标上。我在 GridView 中有更多的标记（标记是可拖动的）。

```
//.aspx
<script type="text/javascript" src="http://maps.google.com/maps/api/js?sensor=false&key=xyz"></script>
<script type="text/javascript">
    //google maps API v3

    //változók

    var GMLat = '<%= Label_GMLat.Text %>';
    var GMLng = '<%= Label_GMLng.Text %>';
    var GMHirdetesID = [];
    var GMLatLng = [];
    var GMKep = [];
    var GMTitle = [];
    var GMIngatlanCim = [];
    var GMSzoveg = [];
    var Grid_Table = '';
    var hirdetesid = '';
    var lat = '';
    var lng = '';
    var kep = '';
    var title = '';
    var ingatlancim = '';
    var szoveg = '';
    var latlng_1 = new google.maps.LatLng(49, 17);    //(GMLat, GMLng);
    var marker_1_pos = latlng_1;
    var map;
    var marker_1;
    var infowindow_1;
    var infowindow_1_off = true;

    //funkciók

    //init
    function initialize() {
        var myOptions =
        {
            zoom: 8,
            center: latlng_1,
            mapTypeId: google.maps.MapTypeId.ROADMAP,
            mapTypeControl: true,
            mapTypeControlOptions:
            {
                style: google.maps.MapTypeControlStyle.DROPDOWN_MENU,
                poistion: google.maps.ControlPosition.TOP_RIGHT,
                mapTypeIds: [google.maps.MapTypeId.ROADMAP,
                             google.maps.MapTypeId.TERRAIN,
                             google.maps.MapTypeId.HYBRID,
                             google.maps.MapTypeId.SATELLITE]
            },
            navigationControl: true,
            navigationControlOptions:
            {
                style: google.maps.NavigationControlStyle.SMALL   //ZOOM_PAN; SMALL; ANDROID
            },
            scaleControl: true,
            disableDoubleClickZoom: true,
            draggable: true,
            streetViewControl: true,
            draggableCursor: 'move'
        }

        //térkép
        map = new google.maps.Map(document.getElementById("map_canvas"), myOptions);
        Grid_Table = document.getElementById('<%= GridView1.ClientID %>');
        //tömbök föltöltése
        for (var row = 1; row < Grid_Table.rows.length; row++) {
            for (var col = 0; col < Grid_Table.rows[row].cells.length; col++) {
                if (col == 0) {
                    if (document.all)
                        hirdetesid = Grid_Table.rows[row].cells[col].innerText;
                    else
                        hirdetesid = Grid_Table.rows[row].cells[col].textContent;
                }
                if (col == 3) {
                    lat = '';
                    if (document.all)
                        lat = Grid_Table.rows[row].cells[col].innerText;
                    else
                        lat = Grid_Table.rows[row].cells[col].textContent;
                }
                if (col == 4) {
                    lng = '';
                    if (document.all)
                        lng = Grid_Table.rows[row].cells[col].innerText;
                    else
                        lng = Grid_Table.rows[row].cells[col].textContent;
                }
                if (col == 5) {
                    if (document.all)
                        ingatlancim = Grid_Table.rows[row].cells[col].innerText;
                    else
                        ingatlancim = Grid_Table.rows[row].cells[col].textContent;
                }
                if (col == 6) {
                    if (document.all)
                        title = Grid_Table.rows[row].cells[col].innerText;
                    else
                        title = Grid_Table.rows[row].cells[col].textContent;
                }
                if (col == 7) {
                    if (document.all)
                        szoveg = Grid_Table.rows[row].cells[col].innerText;
                    else
                        szoveg = Grid_Table.rows[row].cells[col].textContent;
                }
                if (col == 8) {
                    if (document.all)
                        kep = Grid_Table.rows[row].cells[col].innerText;
                    else
                        kep = Grid_Table.rows[row].cells[col].textContent;
                }
                GMHirdetesID.push(hirdetesid);
                GMLatLng.push(new google.maps.LatLng(GMLat, GMLng));
                GMKep.push(kep);
                GMTitle.push(title);
                GMIngatlanCim.push(ingatlancim);
                GMSzoveg.push(szoveg);
            }
            //align(GMLatLng);
            //markerek fölrakása
                for (var i = 0; i <= GMHirdetesID.length; i++) {
                    marker = new google.maps.Marker({
                        map: map,
                        position: GMLatLng[i],
                        animation: google.maps.Animation.DROP,
                        draggable: true
                    });

                    (function (i, marker) {
                        google.maps.event.addListener(marker, 'click', function () {
                            if (!infowindow) {
                                infowindow = new google.maps.InfoWindow();
                            }
                            infowindow.setContent("Message " + i);
                            //infowindow.SetSize(300, 200);
                            infowindow.open(map, marker);
                        });
           /**/         google.maps.event.addListener(marker, 'click', function () { infowindow.open(map, marker) });
                    })(i, marker);
            }
        }
    // google.maps.event.addListener(marker, 'click', function () { infowindow.open(map, marker) });
    google.maps.event.addListener(map, 'click', function () { infowindow.close() });
    }
    // Onload handler to fire off the app.
    google.maps.event.addDomListener(window, 'load', initialize);
</script>

    <div style=" width: 1000px; margin-right: auto; margin-left: auto;">
        Térkép:
        <br />
        <br />
        <asp:GridView ID="GridView1" runat="server" AutoGenerateColumns="False" 
            DataKeyNames="HirdetesID" DataSourceID="SqlDataSource1" Width="1000px">
            <Columns>
                <asp:BoundField DataField="HirdetesID" HeaderText="HirdetesID" ReadOnly="True"
                    SortExpression="HirdetesID" />
                <asp:BoundField DataField="Email" HeaderText="Email" SortExpression="Email" />
                <asp:BoundField DataField="Coord" HeaderText="Coord" SortExpression="Coord" />
                <asp:BoundField HeaderText="Lat" SortExpression="Lat" NullDisplayText=" " />
                <asp:BoundField HeaderText="Lng" SortExpression="Lng" NullDisplayText=" " />
                <asp:BoundField DataField="IngatlanCim" HeaderText="IngatlanCim" 
                    SortExpression="IngatlanCim" />
                <asp:BoundField DataField="GoogleMapsTitle" HeaderText="GoogleMapsTitle" 
                    SortExpression="GoogleMapsTitle" />
                <asp:BoundField DataField="GoogleMapsSzoveg" HeaderText="GoogleMapsSzoveg" 
                    SortExpression="GoogleMapsSzoveg" />
                <asp:BoundField DataField="Prp_keputvonal_thumb" 
                    HeaderText="Prp_keputvonal_thumb" SortExpression="Prp_keputvonal_thumb" >
                </asp:BoundField>
            </Columns>
            <EditRowStyle Width="1000px" />
        </asp:GridView>
        <asp:SqlDataSource ID="SqlDataSource1" runat="server" 
            ConnectionString="<%$ ConnectionStrings:PROPYTESZT_ConnectionString1 %>" 
            SelectCommand="SELECT tblGoogleMapsCoord.HirdetesID, tblGoogleMapsCoord.Email, tblGoogleMapsCoord.Coord, tblGoogleMapsCoord.IngatlanCim, tblGoogleMapsCoord.GoogleMapsTitle, tblGoogleMapsCoord.GoogleMapsSzoveg, Prp_kep.Prp_keputvonal_thumb FROM tblGoogleMapsCoord LEFT OUTER JOIN Prp_kep ON tblGoogleMapsCoord.HirdetesID = Prp_kep.Prp_hirdetes WHERE (Prp_kep.Prp_GoogleMapsKep = N'igen') OR (Prp_kep.Prp_GoogleMapsKep IS NULL)">
        </asp:SqlDataSource>
        <br />
        <br />
    </div>
    <div id="map_canvas" style="width: 800px; height: 600px; margin-right: auto; margin-left: auto;"></div>
    <div style="width: 800px; text-align: left; margin-right: auto; margin-left: auto;">
        GMLat: <asp:Label ID="Label_GMLat" runat="server" Text="Label_GMLat"></asp:Label><br />
        GMLng: <asp:Label ID="Label_GMLng" runat="server" Text="Label_GMLng"></asp:Label><br />
        GMTitle: <asp:Label ID="Label_GMTitle" runat="server" Text="" Visible="True"></asp:Label><br />
        GMIngatlanCim: <asp:Label ID="Label_GMIngatlanCim" runat="server" Text="" Visible="True"></asp:Label><br />
        GMSzoveg: <asp:Label ID="Label_GMSzoveg" runat="server" Text="" Visible="True"></asp:Label><br />
        GMLink: <asp:Label ID="Label_GMLink" runat="server" Text="" Visible="True"></asp:Label><br />
        GMKep: <asp:Label ID="Label_GMKep" runat="server" Text="" Visible="True"></asp:Label><br />
        MegjelenitesAdatok(error): <asp:Label ID="Label_MegjelenitesAdatok" runat="server" Text="" Visible="True"></asp:Label><br />
    </div>

//.aspx.cs
    protected void Page_Load(object sender, EventArgs e)
    {
        string HirdetesID = "";
        string GMCoord = "";
        string GMLat = "";
        string GMLng = "";
        int GMindex;
        int test1;
    /*GridView1 Lat és Lng oszlopainak feltöltése Coord oszlopa alapján*/
        for (int i = 1; i < GridView1.Rows.Count; i++)
        {
            GMCoord = GridView1.Rows[i].Cells[2].Text;
            GMCoord = GMCoord.Replace("(", "");
            GMCoord = GMCoord.Replace(")", "");
            GMLat = GMCoord;
            GMLng = GMCoord;
            GMindex = GMCoord.IndexOf(",");
            test1 = GMLat.Length - GMindex;
            GMLat = GMLat.Remove(GMindex, (GMLat.Length - GMindex));
            GMLng = GMLng.Remove(0, GMindex+1);
            GridView1.Rows[i].Cells[3].Text = GMLat;
            GridView1.Rows[i].Cells[4].Text = GMLng;
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T13:06:03.590

更新行“GMLatLng.push(new google.maps.LatLng(GMLat, GMLng));” 到“GMLatLng.push（新 google.maps.LatLng（lat，lng））；”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-11-01T13:56:47.740

你试过了吗？

```
for (i = 0; i < markers.length; i++) {
            var data = markers[i]
            var myLatlng = new google.maps.LatLng(data.lat, data.lng);
            lat_lng.push(myLatlng);
            var marker = new google.maps.Marker({
                position: myLatlng,
                map: map,
                title: data.title
            });
            latlngbounds.extend(marker.position);
            (function (marker, data) {
                google.maps.event.addListener(marker, "click", function (e) {
                    infoWindow.setContent(data.description);
                    infoWindow.open(map, marker);
                });
            })(marker, data);
        }
        map.setCenter(latlngbounds.getCenter());
        map.fitBounds(latlngbounds); 
```

# ruby-on-rails - 回形针：用图片保存博客文章不起作用，没有

> ID：10432120
> 
> 赞同：1
> 
> 时间：2012-05-03T13:11:41.380
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我已经按照他们的 github 页面上的[回形针教程进行操作。](https://github.com/thoughtbot/paperclip)

我创建了一个迁移

```
rails g paperclip blog picture 
```

在我的 blog.rb （模型）

```
has_attached_file :picture, :styles => { :medium => "600x400>", :thumb => "260x180>" }
attr_accessible :title, :body, :picture 
```

在我的控制器中

```
def create
@blog = Blog.new( params[:blog] )
respond_to 
```

等等....

在我的 _form.html

```
<%= form_for @blog, :html => { :multipart => true, :class => 'form-horizontal' } do |f| %> 
```

现在，如果我尝试创建一个没有图像的新博客，它会像往常一样创建。但是，如果我尝试用图片创建一个，它不会被创建，我会被重定向到`new_blogs_path`. 重定向很好，考虑到我有一个 if `@blog.save respond_to`，所以发生的一切就是它似乎没有被保存。

有人有想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T13:18:18.080

请像这样使用整个命令

```
 rails generate paperclip user avatar 
```

不是

```
 rails g paperclip user avatar 
```

请检查您的数据库中是否存在这些列。

```
1 avatar_file_name 
2 avatar_content_type 
3 avatar_file_size 
4 avatar_updated_at 
```

然后告诉我。如果不存在然后手动创建，我希望它会工作....

# c++ - 实现镜像

> ID：10432125
> 
> 赞同：2
> 
> 时间：2012-05-03T13:11:52.217
> 
> 标签：c++, opengl, directx

如何实现 HUD 镜像？为了简化问题，让我们考虑场景中有一些对象，并且在 HUD 矩形中，用户将看到后面的所有对象（即从相同的眼点渲染场景，但看向量方向相反）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-03T13:15:20.703

您可以在 FBO 中渲染镜像的内容。渲染 HUD 时，使用 FBO 绘制镜像。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-03T13:18:14.553

另一种方法（除了 fbafelipe 提出的方法之外）是将视口设置为“镜子”所在的矩形区域，或者将其模版出来（或两者的组合，大多数真实的镜子都不是完美的矩形）。然后镜像模型视图投影矩阵（可能带有比例，如果它类似于汽车镜子）并绘制您身后的所有内容。

“渲染到 FBO”解决方案的优点是您可以更轻松地作弊，例如每隔一帧只绘制一次镜像。很可能没有人会注意到差异。您也可以轻松地将任何类型的图像过滤器（模糊，涂抹）应用于镜子。

# c# - 在读取其值之前验证 DataRow 中是否存在列

> ID：10432126
> 
> 赞同：24
> 
> 时间：2012-05-03T13:11:52.903
> 
> 标签：c#

如何编写读取 DataRow 的代码，但是，如果 DataRow 中的文件不存在，它只是跳过它并继续前进，例如：

```
string BarcodeIssueUnit;
if (dr_art_line["BarcodeIssueUnit"].ToString().Length <= 0)
{
    BarcodeIssueUnit = "";
}
else
{
    BarcodeIssueUnit = dr_art_line["BarcodeIssueUnit"].ToString();
} 
```

现在，列`BarcodeIssueUnit`可以属于表，但在某些情况下，表中不存在该列。如果它不存在并且我阅读了它，我会收到此错误：

```
System.ArgumentException: Column `BarcodeIssueUnit` 
does not belong to table Line. 
```

我只想检查该列是否存在，让我们看看值，如果不是，则跳过该部分并继续。

* * *

## 回答 #1

> 赞同：50
> 
> 时间：2012-05-03T13:14:09.450

使用 . 检查列名`DataRow.Table.Columns`。如果有转换价值，其他出来。

```
BarcodeIssueUnit = dr_art_line.Table.Columns.Contains("BarcodeIssueUnit")?
                   dr_art_line["BarcodeIssueUnit"].ToString(): ""; 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-03T13:16:29.873

```
if(dr_art_line.Table.Columns.Contains("BarcodeIssueUnit"))
{
    BarcodeIssueUnit = dr_art_line.Field<String>("BarcodeIssueUnit");
}
else
{
    BarcodeIssueUnit = String.Empty;
} 
```

[http://msdn.microsoft.com/en-us/library/system.data.datacolumncollection.contains.aspx](http://msdn.microsoft.com/en-us/library/system.data.datacolumncollection.contains.aspx)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-03T13:15:01.830

您可以检查当前行的表方案是否包含特定列：

```
 if (!dr_art_line.Table.Columns.Contains("BarcodeIssueUnit"))
 {
     BarcodeIssueUnit = "";
 }
 else
 {
      BarcodeIssueUnit = dr_art_line["BarcodeIssueUnit"].ToString();
 } 
```

# weblogic - 部署我的应用程序时出错

> ID：10432129
> 
> 赞同：0
> 
> 时间：2012-05-03T13:12:09.843
> 
> 标签：weblogic

我想在我的 weblogic 服务器上部署我的应用程序，所以当我看到日志时出现此错误

> **2012 年 5 月 3 日下午 3:00:20 CEST 错误配置管理 BEA-150027 在域 BUP 中找不到服务器名称集成。**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T14:21:38.893

听起来部署的“目标”被指定为“集成”，并且您的域中没有具有该名称的服务器。目标必须是为您的域配置的服务器或集群名称。

# android - Android：调用两个不同类的两个不同按钮无法正常工作

> ID：10432134
> 
> 赞同：-1
> 
> 时间：2012-05-03T13:12:19.467
> 
> 标签：android, android-intent

这是一个非常幼稚的问题。我想从两个不同的按钮调用两个不同的类。下面的代码工作正常，但**GalleryView.class**只执行一次。我调用**SelectImage.class**的那一刻，这是一个对话似乎工作正常，但另一个只显示一次。请对此有所了解.

感谢和问候阿维吉特保罗

```
private Button button,button1;
public static String filename = "prefs";
SharedPreferences prefs;

public vp_default() 
{
    // TODO Auto-generated constructor stub
}

 public void onCreate(Bundle savedInstanceState) 
    {       
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);   
        prefs = getSharedPreferences(filename,0);

        button  = (Button)findViewById(R.id.view_gallery_button);
        button.setOnClickListener(this);

        button1  = (Button)findViewById(R.id.sel_image_button);
        button1.setOnClickListener(this); 

    }

    @Override
    public void onClick(View v) 
    {
            String setPhnNo = "9231512345";
            boolean stat = prefs.contains(setPhnNo);

            switch(v.getId())
            {
             case R.id.view_gallery_button:     
                    if(stat!=false)
                    {

                        startActivity(new Intent(getApplicationContext(), VirtualPainterActivity.class));

                    }
                    else
                    {
                        startActivity(new Intent(getApplicationContext(), GalleryView.class));

                    }
                break;
                case R.id.sel_image_button: 
                        startActivity(new Intent(getApplicationContext(), SelectImage.class));

                break;
            }

    } 
```

}

//manifest.xml

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="mcc.vp.apps"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk android:minSdkVersion="15" />

    <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name" >
         <activity
            android:label="@string/app_name"
            android:name=".vp_default" >
            <intent-filter >
                <action android:name="android.intent.action.MAIN" />
                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity> 
        <activity
            android:label="@string/app_name"
            android:name=".VirtualPainterActivity"
            android:theme="@android:style/Theme.Dialog">
            <intent-filter >
                <action android:name="android.intent.action.vp_regn" />
                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
        <activity
            android:label="@string/app_name"
            android:name=".GalleryView">
            <intent-filter >
                <action android:name="android.intent.action.vp_gview" />
                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
        <activity
            android:label="@string/app_name"
            android:name=".SelectImage" >
            <intent-filter >
                <action android:name="android.intent.MAIN" />
                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
        <activity
            android:label="@string/app_name"
            android:name=".ViewImage">
            <intent-filter >
                <action android:name="android.intent.vp_view_img" />
                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
    </application>
</manifest> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-13T18:33:49.013

终于解决了……问题出在清单文件中……我已经两次声明了“action.MAIN”……并且按钮不断迭代默认活动……感谢大家的时间……@ Perroloco @Akki @Zaz Gmy

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T13:30:03.627

我不知道错误是什么，但请尝试以下操作：

像这样将监听器直接放在 onCreate 方法中

```
button1.setOnClickListener(new OnClickListener(){
   @Override
    public void onClick(View v) 
    {
    YOUR CODE FOR BUTTON 1
    }

}); 
```

对按钮做同样的事情；）

# flash - 是否有网页的音频视频播放器

> ID：10432142
> 
> 赞同：-1
> 
> 时间：2012-05-03T13:12:46.270
> 
> 标签：flash, video-conversion

我正在创建一个网站，用户可以在其中上传不同格式的视频音频，但我想要一个在我的网页上打开并播放相应视频或音频的 Flash 播放器（或任何其他播放器）。

我在谷歌上搜索了很多，但找不到任何东西。

我也不想在上传时转换视频，因为它在内存和 CPU 的使用方面成本太高。（我检查了转换 4 个视频需要大约 70% 的 CPU 和 25 秒来转换所有视频）

是否有任何此类播放器在网页上用于播放所有格式的视频/音频。

我们可以创建任何这样的 Flash 播放器吗？如果是，我应该从哪里开始？

我在这里有一些细节[http://activeden.net/category/flash/video-players/video-players](http://activeden.net/category/flash/video-players/video-players)。

任何人都可以在这里指导我进行演示或示例，以查看上述播放器是否在网站上正确播放多种格式播放器。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T07:39:23.243

看看这个开源项目：[flowplayer.org](http://flowplayer.org)

它是高度可定制的，并且能够添加音频播放器：

[http://flowplayer.org/plugins/streaming/audio.html#example-flowplayer-as-a-music-box](http://flowplayer.org/plugins/streaming/audio.html#example-flowplayer-as-a-music-box)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T13:45:21.253

如果你想学习，那就去开源项目： [Miro](http://www.getmiro.com/)

有很多免费的网页播放器。

通过具有音频/视频播放器的链接：

1.  [http://www.instantshift.com/2010/05/14/21-free-video-players-for-your-website-and-blogs/](http://www.instantshift.com/2010/05/14/21-free-video-players-for-your-website-and-blogs/)
2.  [http://www.instantshift.com/2010/02/10/21-free-music-players-for-your-website/](http://www.instantshift.com/2010/02/10/21-free-music-players-for-your-website/)
3.  [http://www.webdesignbooth.com/10-easy-to-implement-flash-based-mp3-players-for-your-website/](http://www.webdesignbooth.com/10-easy-to-implement-flash-based-mp3-players-for-your-website/)
4.  [http://www.tripwiremagazine.com/2009/05/13-essential-flash-video-and-audio-players-for-your-website-or-blog.html](http://www.tripwiremagazine.com/2009/05/13-essential-flash-video-and-audio-players-for-your-website-or-blog.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-13T15:57:38.093

对于 .flv、.mp4 和 .mp3，[FlowPlayer](http://flowplayer.org/)或[JWPlayer](http://www.longtailvideo.com/players/)可以正常工作。对于其他格式，有几种可能性，但没有一个像上述播放器那样可靠。对于那些不太适合的文件格式，我建议设置[ffmpeg](http://ffmpeg.org/)以自动将您的文件转换为首选文件格式之一。您应该能够在上传页面的服务器端代码中执行此操作。

作为参考，我所知道的在网页中嵌入这些奇怪文件格式的选项是嵌入 Windows Media Player（仅限 IE），使用 JWPlayer 的 Silverlight 视频播放器（仅适用于 .wmv 和 .wma，并且仅适用于使用 Silverlight 的人） , 并仅使用`<object>`或标记链接到网页中的文件`<a>`（倾向于与 .wav 一起使用，可能对使用其他格式的某些人有效 - 很大程度上取决于计算机上安装的程序）。JWPlayer（由于其 HTML5 模式）也有可能为某些人播放奇怪的文件格式，主要取决于他们的浏览器。

# mongodb - 如何处理 MongoDB 中的陈旧连接

> ID：10432145
> 
> 赞同：2
> 
> 时间：2012-05-03T13:12:54.140
> 
> 标签：mongodb, database-connection

在 Mongo 中自动刷新陈旧连接的最佳方法是什么？

回收 mongod 服务后，我从 Liferay Portlets 中得到了这个异常：

```
com.mongodb.MongoException$Network: can't call something : /127.0.0.1:27017/connection_test 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T15:06:00.977

您需要在代码中包含“处理异常和重试逻辑”。这可能会有所帮助：[异常，以及在重置连接时如何最好地重试？](https://stackoverflow.com/questions/4198289/exceptions-and-how-best-to-retry-when-a-connection-is-reset)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T15:12:07.050

我最终编写了在`DBCollection`请求每个连接之前轮询连接的代码。

```
private DBCollection safeColl(String pCollectionName, DBCollection pColl) {
    try {
        if (log.isDebugEnabled()) {
            log.debug("getting safe coll count on coll: " + pColl.getName());
        }
        pColl.count();
    } catch (MongoException e) {
        if (e.getMessage().startsWith("can't call something")) {
            pColl = getCollection(pCollectionName, true);
            return pColl;
        } else {
            throw e;
        }
    }
    return pColl;
} 
```

# c# - 对 WCF 行为扩展进行单元测试

> ID：10432147
> 
> 赞同：4
> 
> 时间：2012-05-03T13:12:56.957
> 
> 标签：c#, json, wcf, unit-testing, wcf-behaviour

这真让我抓狂。我有一个扩展，如果出现错误，我们可以使用它来更改请求的内容响应。基本上，如果一切正常，它会像往常一样序列化为 JSON，但如果我们得到一个未处理的异常，我们会基于不同的对象进行序列化。

我们需要围绕这个进行单元测试，但我不知道如何编写它们。验证它是否有效的方法围绕着 StatusCode、故障消息实例和响应的 ContentType。

为了修改返回的响应，我使用了 WebOperationContext 静态类。我已经看到了嘲笑这个的例子，但似乎我必须硬编码特殊的逻辑，然后开始渗透到我不想要的实际代码中。

对 WCF 行为扩展进行单元测试的最佳方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T23:27:30.147

我有类似的情况，无法模拟 WCF（至少使用 Moq），主要是因为大多数类要么是密封的，要么有内部构造函数。

我所做的是让我的行为只应用一个`IParameterInspector`和一个`IClientMessageInspector`（在我的情况下我需要两者）并将我的所有逻辑放在`AfterCall`or`BeforeCall`或您需要的任何一个中，具体取决于检查员的类型。

这样我就可以测试我关心的所有逻辑。实际的 WCF 行为仍未经过测试，但它真正所做的只是添加了两个检查器，仅此而已。

# javascript - 我需要在元素周围创建一条线

> ID：10432148
> 
> 赞同：-2
> 
> 时间：2012-05-03T13:13:01.703
> 
> 标签：javascript, jquery, css

[示例 http://www.uppic.org/thumb-5558_4FA283FC.jpg](http://www.uppic.org/thumb-5558_4FA283FC.jpg)

如果我需要在元素周围创建一条线，我应该怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-03T13:15:14.417

使用 CSS`outline`或`border`. 他们是这样工作的：

```
outline:1px solid blue; 
```

厚度、风格和颜色几乎可以是任何东西。

[有关大纲边框规范](http://www.w3.org/TR/css3-background/#the-border-shorthands)[的更多信息](https://developer.mozilla.org/en/CSS/outline)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-03T13:14:45.667

使用`style="border:1px solid black;"`？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-03T13:15:15.817

考虑 `.css('border','1px solid #000');`为该选择器添加？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-03T13:22:35.813

在它的 CSS 文件中使用：

```
#Element_id {
               border: 1px solid #FF0000;
} 
```

或者如果元素被多次使用，它应该是一个类，所以使用：

```
.Element_class {
               border: 1px solid #FF0000;
} 
```

# android - 信任android的一个证书

> ID：10432149
> 
> 赞同：1
> 
> 时间：2012-05-03T13:13:03.153
> 
> 标签：android, ssl, ssl-certificate

我想在 android 和网站之间使用 https 连接。网站证书由 geotrust 验证，但我仍然得到`Error in http connection javax.net.ssl.SSLException: Not trusted server certificate`。安卓2.2版本。我已经阅读了其他类似的主题，但我无法提出解决方案，而是接受所有我不想申请的证书。我可以（以某种方式）处理这个信任问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T15:35:41.287

听起来您的机器人没有 geotrust 根证书。

[您可以按照how-to-install-a-web-certificate-on-an-android-device](https://android.stackexchange.com/questions/4039/how-to-install-a-web-certificate-on-an-android-device)中的说明手动安装它

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T22:30:14.540

问题的原因在这里：

[https://support.servertastic.com/entries/426677-rapidssl-and-geotrust-certificate-not-trusted-on-mobile-device](https://support.servertastic.com/entries/426677-rapidssl-and-geotrust-certificate-not-trusted-on-mobile-device)

解决方案也在链接中。

安装根证书和中间证书解决了这个问题。

# bash - 从文件名中提取数字

> ID：10432150
> 
> 赞同：4
> 
> 时间：2012-05-03T13:13:06.017
> 
> 标签：bash

我有很多文件的名称是这样的：

```
tmp1.csv
tmp32.csv
tmp9.csv
tmp76.csv
... 
```

它们在同一个目录中，我想提取文件名中的数字。我怎样才能做到这一点`bash`？

**附言**

我试过`grep`了，但做不到。我也试过了`${filename##[a-z]}`。他们是正确的方法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-03T13:20:46.500

```
ls |grep -o "[0-9]\+" 
```

例子：

```
$ ls *.csv
3tmp44.csv  newdata_write.csv  tmp1.csv  tmp2.csv

$ ls *.csv |grep -o "[0-9]\+"
3
44
1
2 
```

编辑：

从 grep 手册页：

> 基本与扩展正则表达式
> 
> ```
>  In basic regular expressions the meta-characters ?, +, {, |, (, and )  lose  their  special  meaning;  instead  use  the  backslashed
>    versions \?, \+, \{, \|, \(, and \). 
> ```

这就是为什么你需要使用`\+`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-03T13:17:05.757

```
for f in *.csv; do echo $f | egrep -o "[0-9]+" ; done 
```

如果您有其他文件名中包含数字的 csv 文件，请使用：

```
for f in *.csv; do echo $f | sed -re 's/^tmp([0-9]+)\.csv$/\1/' ; done 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-03T13:19:12.070

我可能会使用几个调用`cut`：

```
$ ls -1 *.csv | cut -dp -f 2 | cut -d. -f1 
```

该管道可以：

1.  列出与`*.csv`模式匹配的所有文件，每行一个
2.  使用字母“p”作为分隔符，并删除每行的第二个字段。这例如`tmp4711.csv`转换为`4711.csv`.
3.  使用字母“。” 作为分隔符，并删除每行的第一个字段。这转换`4711.csv`为 just `4711`，将数字隔离开来，我们就完成了。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-05-03T13:20:03.573

简单易用，不使用 bash 本身外部的子进程或其他工具：

```
for f in *[0-9]*; do
  if [[ $f =~ [0-9]+ ]] ; then
    echo "$BASH_REMATCH"
  fi
done 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-03T13:15:24.820

```
find . -maxdepth 1 -type f -name 'tmp[0-9]*.csv' | sed 's/tmp\([0-9]\+\).csv/\1/' 
```

# hibernate - 是否可以在子查询过滤器中引用实体本身？

> ID：10432151
> 
> 赞同：0
> 
> 时间：2012-05-03T13:13:07.577
> 
> 标签：hibernate, orm, subquery

我必须为实体 A 制定标准，使用实体 B 的子查询（将实体 A 作为字段）。为了避免缓存未命中，我必须拒绝基于 id 的查询。

那是伪代码示例

```
DetachedCriteria criteriaA = (criteria for A)....

DetachedCriteria bCriteria = DetachedCriteria.forClass(B.class);
                bCriteria.add(Restrictions.eq(".....));
                bCriteria.add(Restrictions.ge(....));
                bCriteria.setProjection(Projections.property("A"));

Criterion  criterion = Subqueries.in("A entity", bCriteria);//here i want to refer to entity A

criteriaA.add(criterion); 
```

# html - 页面无法正确缩放

> ID：10432152
> 
> 赞同：-4
> 
> 时间：2012-05-03T13:13:19.047
> 
> 标签：html

我有一个页面 uf.appload.nu/map.php，不能正确缩放。它应该始终缩放以使页面适合屏幕宽度。怎么了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T13:23:13.943

`<img src="http://uf.appload.nu/karta16.jpg" alt="MÃ¤sskarta" width="2500">`请注意`width="2500"`使图像适合屏幕宽度使用`width="100%"`，尽管页面上有隐藏的元素。

`<div class="monter" style="left: 270px;top:280px;" id="B0210"></div>`

您将需要找到一种新的方式来排列它们，因为它们可能是根据 2500 像素的图像大小而不是屏幕大小来定位的，因此您将在这些方面进行一些工作

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T13:21:01.370

将此添加到您的CSS：

```
img { 
  max-width: 100%;
  height: auto;
}

.monter { display: none; } 
```

如果您不提供更多信息，我只能告诉您这些。所有 class="monter" div 的用途是什么？

# javascript - 创建树结构

> ID：10432153
> 
> 赞同：2
> 
> 时间：2012-05-03T13:13:20.293
> 
> 标签：javascript, algorithm, visualization, hierarchical-data

我正在开发一个 .net 项目。在我的 aspx 页面中，我有一个 gridview，它有 3 列（“元素”、“目标”、“父”）。在客户端，我想使用gridview中的数据构建一个树结构，然后用图形构建一个树。我找到了有关如何构建图形的信息和模块，但我想要一些关于如何制作结构的建议。有没有现成的 JavaScript 算法可以做到这一点？提前谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-05T20:49:33.943

使用 CSS 树，如下所示：

*   [CSS 树](http://www.thecssninja.com/demo/css_tree/)
*   [CSS3 家谱](http://thecodeplayer.com/walkthrough/css3-family-tree)

使用`:checked`伪类将复选框设置为表示元素以模拟状态，例如：

```
 .folder input[type='checkbox']:checked { display: block; }
 .folder input[type='checkbox'] { display: inline; } 
```

将其与作为代理的元素结合`<label>`起来以按需隐藏/显示，并将嵌套`<blockquote>`元素作为层次结构。

**参考**

*   [CSS3 选择器: :checked 伪类](http://www.w3.org/TR/css3-selectors/#checked)
*   [CSS 选择器：UI 元素状态伪类](http://www.w3.org/wiki/CSS/Selectors#The_UI_element_states_pseudo-classes)

# sunspot - 如何在太阳黑子中配置 edismax 处理程序？

> ID：10432155
> 
> 赞同：0
> 
> 时间：2012-05-03T13:13:24.427
> 
> 标签：sunspot, sunspot-rails, sunspot-solr

谁能解释如何开始在太阳黑子中使用 edismax 请求处理程序？

我想在我的应用程序中使用通配符搜索。目前 dismax 处理程序在那里。我搜索并发现 edismax 是通配符搜索的唯一选项。****请给我一些特定的教程，以便我可以遵循相同的方法。****我在我的应用程序中搜索了 edismax，但没有找到任何位置。我还检查了 solrconfig.xml 和 schema.xml。请告诉我如何在 sunspot 中激活和停用请求处理程序。提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T17:21:54.510

我使用了以下猴子补丁来让 edismax 请求处理程序与 Sunspot 一起工作。

[https://github.com/sunspot/sunspot/issues/93](https://github.com/sunspot/sunspot/issues/93)

用于发展

更改 gem 文件以使用 sunspot_solr 的预发行版（这使用 Solr 3.x）。

```
group :development do
  gem "sunspot_solr", "~> 2.0.0.pre.120925"
end 
```

然后，我使用上面链接中描述的补丁创建了一个初始化程序。没有办法在给定补丁的两个请求处理程序之间切换。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-10-19T20:16:49.323

`edismax`是 sunspot_solr 2.2.0 的默认解析器

参考：

*   [https://github.com/sunspot/sunspot/pull/487](https://github.com/sunspot/sunspot/pull/487)
*   [https://rubygems.org/gems/sunspot_solr](https://rubygems.org/gems/sunspot_solr)

# .net - 停止 ShowDialog 从父窗体移除焦点

> ID：10432163
> 
> 赞同：1
> 
> 时间：2012-05-03T13:13:50.560
> 
> 标签：.net, winforms, focus, showdialog

我正在开发一个多线程 TDI UI（如果您有兴趣，可以使用 C1 DockingTabs）。到目前为止，我已经设法让每个窗口在单独的线程中打开，并使用 SetParent Win32 API 将其放入相应的选项卡中。我还设法让模态对话框也显示在选项卡中，并且不会阻止其他选项卡工作（通过在对话框表单上的 Shown 事件上添加处理程序以再次调用 SetParent - 一些涉及打开和关闭的摆弄TopLevel 在选项卡内的表单上，但它有效）。

现在，有点烦人的是对话框正在打开，它从 TDI 父窗体中移除焦点，然后焦点立即被放回。如果我在显示之前调用 SetParent，我只会得到一个异常，因为在具有父级的表单上不能有模式对话框。我已经设法绕过窗口动画滑动/淡入淡出，方法是给它一个 0,0 的大小，直到它在选项卡内，但我不知道如何停止焦点闪烁并重新回到主要父窗体。

我想有两种可能的方法：

1.  禁用窗口效果，使其看起来失去焦点（可能阻止窗口消息？）
2.  实际上真的阻止它失去焦点

我很欣赏这是一个不寻常的查询，非常高兴得到任何帮助！

* * *

编辑：

为了澄清练习中的要点 - 我有一个基于选项卡的 UI，其中每个选项卡实际上是独立的。我收到最终用户的投诉，每次调用 ShowDialog 时，它都会阻止整个应用程序，而不仅仅是一个选项卡。我能看到解决这个问题的唯一方法（缺少像 Google Chrome 这样的多进程）是给每个选项卡一个单独的 UI 线程并在选项卡内加载对话框，以便用户仍然可以访问其他选项卡。我已经设法在某种程度上消除了一些 hackiness 并且现在解决了大部分问题（只是玩了更多）。实际上，我已经设法通过阻止主窗体上的 WM_NCACTIVATE 消息来解决我提出的问题，尽管这有点混乱，因为现在它从未显示为已停用。我想我 必须检测激活的表单是否是该表单的子对话框，以决定是否激活。我也有一些闪烁要尝试解决，但它看起来好多了。我会发布代码，但是涉及 3 种表单，因此上传项目太短了，会有点混乱。如果有人好奇，我会看看我是否可以减少它？

我目前只是在使用它作为概念证明——如果我让它工作，那么我需要将它改装到我现有的应用程序中，这才是真正有趣的开始！我有一个控制 TDI 方面的框架，所以从这方面来说它应该是相当简单的。真正的噩梦将是审计整个事情以解决不同线程之间可能存在的同步问题，因为有一些共享资源本质上不是线程安全的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T13:41:34.170

谢谢你的笑声。听起来很令人印象深刻。你可能最终会后悔所有这些黑客行为的后果，但我并不认为你无所畏惧地尝试完成这项工作:)我假设你有充分的理由这样做，或者你是改变它的路太远了，但它确实让我感到奇怪，你会经历这么多麻烦来强制 UI 成为多线程而不是仅仅将业务逻辑包装到一些异步方法中。如果所有业务逻辑都是异步的，那么所有表单都可以在一个线程中。但是，尽管如此，我唯一的建议是添加到您所说的内容中，即询问使用 Show 而不是 ShowDialog 显示表单是否会导致相同的问题。如果Show没有问题，您可以实现自己的 ShowDialog 同步方法，该方法会阻塞线程，直到用户关闭表单。在方法内部，它可以显示自己，然后在表单可见时处于循环状态，执行睡眠和执行事件，我认为这会产生相同的影响。不过，这让我有点畏缩。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T14:00:14.410

```
Friend NotInheritable Class Win32
  Public Const WM_NCACTIVATE = &H86
  Public Const WM_SDLG_ACTIVATE = &H8000

  <DllImport("user32.dll")> Public Shared Function GetForegroundWindow() As IntPtr
  End Function

  <DllImport("user32.dll", SetLastError:=True, CharSet:=CharSet.Auto)> _
  Public Shared Function SendMessage(ByVal hWnd As IntPtr, ByVal Msg As UInteger, ByVal wParam As IntPtr, ByVal lParam As IntPtr) As IntPtr
  End Function
End Class 
```

要在对话框中停止主窗体似乎失去焦点 - 在主窗体中： -

```
Protected Overrides Sub WndProc(ByRef m As System.Windows.Forms.Message)

    Select Case m.Msg
        Case Win32.WM_NCACTIVATE
            Dim m2 As New System.Windows.Forms.Message()
            m2.HWnd = m.HWnd
            m2.Msg = m.Msg
            m2.LParam = m.LParam

            Dim fgwh = Win32.GetForegroundWindow()

            m2.WParam = If(fgwh = Handle, 1, 0) 'title bar state - TRUE for active
            m.Result = 1 'TRUE to do default processing, FALSE to block
            MyBase.WndProc(m2)
            Exit Sub

        Case Win32.WM_SDLG_ACTIVATE
            Dim m2 As New System.Windows.Forms.Message()
            m2.HWnd = m.HWnd
            m2.Msg = Win32.WM_NCACTIVATE
            m2.LParam = m.LParam

            Dim fgwh = Win32.GetForegroundWindow()

            If m.WParam = 0 Then
                m2.WParam = If(fgwh = Handle, 1, 0) 'title bar state - TRUE for active
            Else
                m2.WParam = 1
            End If

            m.Result = 1 'TRUE to do default processing, FALSE to block
            MyBase.WndProc(m2)
            Exit Sub

    End Select

    MyBase.WndProc(m)
End Sub 
```

并在子表格中： -

```
Protected Overrides Sub WndProc(ByRef m As System.Windows.Forms.Message)
    If m.Msg = Win32.WM_NCACTIVATE Then

        Dim fgwh = Win32.GetForegroundWindow()
        Dim wParam As IntPtr
        If fgwh = Me.Handle OrElse fgwh = MainForm.Instance.Handle Then
            wParam = 1
        Else
            wParam = 0
        End If

        Win32.SendMessage(MainForm.Instance.Handle, Win32.WM_SDLG_ACTIVATE, wParam, m.LParam)
    End If

    MyBase.WndProc(m)
End Sub 
```

要停止主窗体被停用并获取，在对话框窗体类中：-

```
Protected Overrides ReadOnly Property ShowWithoutActivation As Boolean
    Get
        Return True
    End Get
End Property 
```

# php - 将 php 数组的重复值添加到另一个数组并保持相同的键

> ID：10432164
> 
> 赞同：0
> 
> 时间：2012-05-03T13:13:56.587
> 
> 标签：php, arrays

我有一个 PHP 数组，我想从中提取重复的值，并将每个值的对应键保存在一个新的数组中。

这是我的起始数组

```
Array
(
    [0] => ABC123-A
    [1] => BG231-B
    [2] => ABC123-A
    [3] => BG231-E
    [4] => BG231-F
    [5] => BG231-G
    [6] => BG231-H
    [7] => ABC123-A
    [8] => BG231-J
    [9] => BG231-K
    [10] => ABC123-A
) 
```

这就是我想要的：

```
Array
(
    [0] => ABC123-A
    [2] => ABC123-A
    [7] => ABC123-A
    [10] => ABC123-A
) 
```

我怎样才能做到这一点 ？

感谢帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T13:20:08.997

测试一下：

```
$return = array_unique($array);
var_dump(
    array_diff($array, array_diff($return, array_diff_assoc($array, $return)))
); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-03T13:25:43.333

PHP 没有内置函数可以执行此操作，但您可以组合[`array_count_values`](http://php.net/array_count_values)并[`array_intersect`](http://php.net/array_intersect)获得所需的数组。

第一个用于了解数组中确实存在哪些值（并对它们进行计数，以便轻松过滤掉每个不重复的值），第二个函数确实保留键。如果您预先知道重复值，则只需要使用后者：

```
$duplicatesArray = array_intersect($array, array($duplicate)); 
```

完整示例：

```
/**
 * @param array $array
 * @param int $threshold (optional) minimum number of elements per group
 * @return array
 */
function array_group_by_value(array $array, $threshold = 1)
{
    $grouped = array();
    foreach(array_count_values($array) as $value => $count)
    {
        if ($count < $threshold) continue;
        $grouped[$value] = array_intersect($array, array($value));
    }
    return $grouped;
} 
```

使用示例：

```
$test = array('a', 'b', 'a', 'a', 'b', 'c');

var_dump(array_group_by_value($test, 2)); 
```

Output:

```
array(2) {
  ["a"]=>
  array(3) {
    [0]=>
    string(1) "a"
    [2]=>
    string(1) "a"
    [3]=>
    string(1) "a"
  }
  ["b"]=>
  array(2) {
    [1]=>
    string(1) "b"
    [4]=>
    string(1) "b"
  }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-03T14:01:33.053

If you need all duplicates in one array, You can try:

```
$unique = array_unique($array); //get unique values
$diff = array_diff_assoc($array, $unique); //get duplicates
$intersect = array_intersect($unique, $diff); //get unique values with duplicates
return $intersect+$diff; //join unique with duplicates and duplicates 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-03T13:20:14.587

```
$duplicated=null;

foreach($yourarray as $k => $v){
    foreach($yourarray as $k2 => $v2){
        if($v == $v2 && $k2 != $k){
            $duplicated[$k]=$v;
        }
    }
} 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-05-03T13:18:35.710

您可以使用`array_unique()`.http://php.net/manual/en/function.array-unique.php

# sql - 如何根据表单值连接到指定的数据库表

> ID：10432175
> 
> 赞同：2
> 
> 时间：2012-05-03T13:14:22.807
> 
> 标签：sql, database, forms, connect

我有一个要求用户输入的表单。我需要获取该用户输入的内容并连接到相关的数据库表。 **例如：假设表单要求用户输入某个州的城市。我为那个州的每个城市都有一张桌子。我如何获取用户输入的值（城市）并连接到该特定表？**

*我有一个数据库，每个城市都有一个表格，* 我试图根据某人居住的城市组织信息。例如：如果表单要求输入 3 个条目：城市、姓名和电话号码。我希望用户输入他们居住的城市 - 然后我希望将他们的姓名和电话号码注入与其城市相关的 SQL 数据库中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T14:16:16.120

突出，SQL 中的表代表对象的“类型”，例如，您需要一个城市表，以及一个州表。你会有这样的东西：

![在此处输入图像描述](../Images/2d0a07c281283010cfa97af9ee503024.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T13:19:26.250

首先，您使用的是哪个数据库引擎？

其次，您不直接连接到表。您连接到服务器\数据库，然后您可以访问该服务器\数据库上的所有表。

您的问题很困惑，请提供更多详细信息

# jaxb - 生成的 XML - 命名空间前缀

> ID：10432177
> 
> 赞同：0
> 
> 时间：2012-05-03T13:14:31.000
> 
> 标签：jaxb, jaxb2-maven-plugin

目前我已经从大量模式文件 (.xsd) 中创建了 Java 类。生成的类正在运行（通过 jaxb2-maven-plugin 生成）。但现在我尝试从对象结构中生成 XML。第一件事是我不完全理解为什么我需要提供在创建 JAXB 上下文期间可用的所有名称空间？

```
String[] context = { "Namespace1", "Namespace2", ...};

JAXBContext jc = JAXBContext.newInstance(Joiner.on(":").join(context)); 
```

通过编组器，我可以生成 XML 文档，但我遇到的问题如下：

```
<StartTag xmlns="Basenamespace" xmlns:ns1="Namespace1" xmlns:ns2="Namespace2" ...>
   <...>
     <ns1:T1>...</ns1:T1>
     <ns2:TX>...</ns2:TX>
     ...
</StartTag> 
```

我想产生这样的东西：

```
<StartTag xmlns="Basenamespace">
   <...>
     <T1 xmlns="Namespace1">
     ...
     </T1>

     <TX xmlns="Namespace2">
      ...
     </TX>
     ...
</StartTag> 
```

所以问题是：这可以通过 JAXB 中的属性来实现吗？此外，是否可以影响`xmlns`将在哪个标签上创建元素？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T14:39:30.227

看来我对这个问题没有运气。我发现了以下内容：

[编组期间每个元素中的 jaxb 命名空间而不是根元素](https://stackoverflow.com/questions/2385523/jaxb-namespaces-in-each-element-instead-of-root-element-during-marshalling)

# android - 警报对话框中未显示警报消息？

> ID：10432184
> 
> 赞同：1
> 
> 时间：2012-05-03T13:15:10.557
> 
> 标签：android, android-layout, dialog, android-alertdialog

我想向设备屏幕大小显示警报对话框。我通过此链接获得了解决方案[How to make a alert dialog fill 90% of screen size?](https://stackoverflow.com/questions/2306503/how-to-make-an-alert-dialog-fill-90-of-screen-size) 我使用那里给出的解决方案，它工作得很好，但我的警报消息以非常小的尺寸显示。我们甚至无法以横向方式识别信息。我使用了以下代码。

```
AlertDialog.Builder builder = new AlertDialog.Builder(this);
builder.setMessage(R.string.app_description).setPositiveButton(
                    "Ok", new DialogInterface.OnClickListener() {
                        public void onClick(DialogInterface dialog, int id) {
                            dialog.dismiss();
                        }
                    });
            builder.Title(title);

            Dialog d = builder.setView(new View(this)).create();
            WindowManager.LayoutParams lp = new WindowManager.LayoutParams();
            lp.copyFrom(d.getWindow().getAttributes());
            lp.width = WindowManager.LayoutParams.FILL_PARENT;
            lp.height = WindowManager.LayoutParams.FILL_PARENT;
            d.show();
            d.getWindow().setAttributes(lp); 
```

如何设置消息，使其正确显示在对话窗口中？

在此先感谢 Pushpa

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T13:25:24.413

默认情况下，您无法设置文本大小。你可以做一件简单的事情。编写一个 XML 并扩展该 XML 并传递给构建器视图。

```
 builder.setView(view) 
```

除了您将视图设置为对话框之外，什么都没有。并且该视图将处理所有触摸。您可以在 xml 中指定视图的高度和宽度，包括文本大小。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-03T13:58:30.477

检查此代码并告诉我这是否是您真正想要实现的目标？

```
 AlertDialog.Builder builder = new AlertDialog.Builder(this);

    // Creates textview
    TextView text = new TextView(this);  
    text.setText("Hello This text");  
    text.setLayoutParams(new LayoutParams(LayoutParams.FILL_PARENT, LayoutParams.FILL_PARENT));
    text.setTextSize(20);        
    text.setGravity(Gravity.CENTER);

    //Creates a linearlayout layout and sets it with initial params
    LinearLayout ll = new LinearLayout(this);
    ll.setLayoutParams(new LayoutParams(LayoutParams.FILL_PARENT, LayoutParams.FILL_PARENT));
    ll.setGravity(Gravity.CENTER);
    ll.addView(text);  //adds textview to llayout

    builder.setMessage("Title").setPositiveButton(
            "Ok", new DialogInterface.OnClickListener() {
                public void onClick(DialogInterface dialog, int id) {
                    dialog.dismiss();
                }
            }); 

    Dialog d = builder.setView(ll).create();   

    //Fills up the entire Screen
    WindowManager.LayoutParams lp = new WindowManager.LayoutParams();
    lp.copyFrom(d.getWindow().getAttributes());
    lp.width = WindowManager.LayoutParams.FILL_PARENT;
    lp.height = WindowManager.LayoutParams.FILL_PARENT;
    d.show();
    d.getWindow().setAttributes(lp); 
```

# python - 如何避免在类蠕虫游戏中每帧复制关卡 Surface？

> ID：10432195
> 
> 赞同：9
> 
> 时间：2012-05-03T13:16:05.003
> 
> 标签：python, python-2.7, pygame, pyglet

我正在开发一款具有可破坏地形的游戏（例如在游戏《蠕虫》或《焦土》中），并通过蒙版使用像素完美碰撞检测。

关卡是一个单一的表面，现在它的工作方式是我每帧创建一个副本，绘制所有需要在其上绘制的精灵，然后将可见区域blit到显示表面。

有什么办法可以避免每帧复制整个关卡表面并且仍然可以使用 pygame 中的像素完美碰撞工具？

我尝试先对水平面进行 blitting，然后再对屏幕上的每个 sprite 进行 blit（通过相机调整它们的 blit 坐标，除了坐标是静态的玩家角色），但在这种情况下，碰撞检测系统崩溃了，我可以' t 似乎能够修复它。

## 更新

我设法使其工作如下：绘制精灵时，我将它们的游戏世界坐标（基本上是相对于关卡位图原点的坐标）转换为屏幕坐标（相对于相机的坐标，这是当前水平的可见区域）。

在碰撞检测阶段，我使用相对于水平面定位的坐标和边界框；所以就像上面一样。问题是相机的位置绑定到玩家的位置，这不是也不应该是静态值（我真的不知道我是如何设法这么长时间没有意识到这一点的）。

虽然这解决了我的问题，但下面的答案更全面地介绍了如何在这种情况下提高性能。我也愿意接受使用其他库的建议，这些库可以使考验更容易或更快。我曾考虑过 pyglet 和 rabbyt，但看起来那里也存在同样的问题。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-10T07:41:52.197

这是一个在图形加速器出现之前经常出现的问题，当时计算机速度很慢。您基本上希望最大限度地减少刷新屏幕所需的工作。你在正确的轨道上，但我建议如下：

1.  正如您现在所做的那样，在屏幕外保留一份可用的背景副本。

2.  分配与屏幕大小相同的工作位图。

3.  对于每个精灵，计算其新旧位置的边界矩形（边界框）。

4.  如果新旧边界框重叠，则将它们合并为一个更大的框。如果它们不重叠，请分开处理。

5.  将所有边界框分组为重叠的集合。它们可能最终都在一个集合中（当精灵彼此靠近时），或者每个边界框可能单独在一个集合中（当精灵相距很远时）。

6.  将背景复制到与每个边界框集对应的工作位图区域。

7.  将每个集合的精灵复制到工作位图中的新位置（当然，以正确的 z 顺序！）。

8.  最后，将完成的离屏位图复制到显示表面，通过设置边界框设置边界框。

这种方法最大限度地减少了您必须进行的复制量，包括背景和精灵。如果精灵相对于显示区域较小，则节省的空间应该很大。最坏的情况是所有精灵都排列在对角线上，几乎没有相互重叠。在这种情况下，您可能希望切换到比框更通用的边界形状。以 QuickDraw Regions 为例：[Wikipedia](http://en.wikipedia.org/wiki/QuickDraw) [Discussion](http://www.mactech.com/articles/mactech/Vol.05/05.06/ConvertPict2Rgn/index.html) [Patent](http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO1&Sect2=HITOFF&d=PALL&p=1&u=/netahtml/PTO/srchnum.htm&r=1&f=G&l=50&s1=4622545.PN.&OS=PN/4622545&RS=PN/4622545) [Source](http://www.computerhistory.org/highlights/macpaint/)。

现在，您可能会认为将边界框分组为集合的工作是 O(n^2) 操作，您是对的。但它只随着精灵数量的平方增长。16 个精灵意味着 256 次比较。这可能比单个 sprite blit 工作量少。

我专注于最小化像素复制工作。我必须管理员我不熟悉您的碰撞检测库的详细信息，但我明白了。希望这与我提出的算法兼容。

祝你好运。如果您完成游戏并将其发布到网上，请在您的问题或评论中添加指向它的链接。

# jquery - 如何使用 jQuery 从 JSON 中获取属性值

> ID：10432196
> 
> 赞同：2
> 
> 时间：2012-05-03T13:16:07.610
> 
> 标签：jquery, json

我正在使用 Newtonsoft dll 从 xml 文件生成 json。从下面我将如何将地址详细信息放入列表中（如果示例中有更多）并将它们写入下拉列表我有以下有效的 json（检查 onjsonlint）：

```
{
    "?xml": {
        "@version": "1.0",
        "@encoding": "utf-8"
    },
    "Root": {
        "Information": {
            "Error": {
                "ErrorNo": "0",
                "ErrorMsg": null
            },
            "Address": {
                "Address": [
                    {
                        "@AddressID": "14961943",
                        "@Sequence": "1",
                        "@Description": "Some Company Name, Some Building, 10 Some Street, Some County, Some City"
                    }            
                ]
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T13:18:44.070

试试这个：

```
var json = // that object above
var addresses = json.Root.Information.Address.Address;

for (var i = 0; i < addresses.length; i++) {
    var $option = $("<option></option>").val(addresses[i]["@AddressID"]).text(addresses[i]["@Description"]);
    $("#mySelect").append($option);
} 
```

[**示例小提琴**](http://jsfiddle.net/JNmfv/1)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T13:20:38.783

不使用jQuery的解决方案：

```
var select = document.getElementById('selectID');
var addresses = json.Root.Information.Address.Address;

for(var i = 0, l = addresses.length; i < l; i++) {
  var o = document.createElement('option');
  o.value = addresses[i]['@AddressID'];
  o.innerHTML = addresses[i]['@Description'];
  select.appendChild(o);
} 
```

# jquery - 在滚动视图 jquerymobile 中添加视口

> ID：10432198
> 
> 赞同：0
> 
> 时间：2012-05-03T13:16:10.577
> 
> 标签：jquery, jquery-mobile, viewport

我正在使用[https://github.com/watusi/jquery-mobile-iscrollview](https://github.com/watusi/jquery-mobile-iscrollview)。我有一个问题，起初一切正常，但是当我添加视口时：例如：`<meta name="viewport" content="width=device-width, initial-scale=1">`。它调整了固定页脚，现在有一个 5em 填充底部，这是纵向模式。最糟糕的是在横向模式下，页脚进一步调整为 10em。T_T。

我正在使用 iphone4 版本。4.3.3.

希望任何人都可以在这里帮助我。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T20:57:23.337

您应该考虑更改为 Jquery mobile 1.1.0 及其真正的固定工具栏。[阅读他们的公告](http://jquerymobile.com/blog/2012/04/13/announcing-jquery-mobile-1-1-0/)。大多数在用设备和最干净的解决方案都支持它：

> 这种方法最酷的部分是，与基于 JS 的解决方案在所有平台上强加不自然的滚动物理特性不同，我们的滚动感觉是 100% 原生的，因为它*是*. 这意味着滚动感觉无处不在，并且适用于触摸、鼠标滚轮和键盘用户输入。作为奖励，我们基于 CSS 的解决方案是超轻量级的，不会影响兼容性或可访问性。

# c# - 实现接口如何为我们提供强类型 API？

> ID：10432201
> 
> 赞同：2
> 
> 时间：2012-05-03T13:16:17.130
> 
> 标签：c#

在深入的 C# 中，Jon Skeet 使用`IEquatable<>`重写~~重载~~操作`Equals()`。

```
public sealed class Pair<T1, T2> : IEquatable<Pair<T1, T2>>
{
    public bool Equals(Pair<T1, T2> other)
    {
       //...
    }
} 
```

他说我们这样做“是为了提供一个强类型的 API，以避免不必要的执行时检查”。

避免了哪些执行时间检查？更重要的是，实现一个接口是如何实现强类型API的呢？

在这本书的上下文中，我可能遗漏了一些东西。我认为接口通过多态性给了我们代码重用。我也明白它们有利于编程到抽象而不是具体类型。这就是我所知道的。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-03T13:19:08.467

默认[`Equals`方法](http://msdn.microsoft.com/en-us/library/bsc2ak47.aspx)以 an`object`作为参数。因此，在实现此方法时，您必须在代码中进行运行时检查以确保此对象是类型`Pair`（在您可以比较这两个之前）：

```
public override bool Equals(Object obj) {
    // runtime type check here
    var otherPair = obj as Pair<T1, T2>;
    if (otherPair == null)
        return false;

    // comparison code here
    ...
} 
```

然而，的`Equals`方法将 a作为类型参数。因此，您可以避免在您的实现中进行检查，从而提高效率：[`IEquatable<T>`](http://msdn.microsoft.com/en-us/library/ms131187.aspx)`Pair<T1,T2>`

```
public bool Equals(Pair<T1, T2> other)    
{    
    // comparison code here
    ...
} 
```

诸如 、 和 之类的类`Dictionary<TKey, TValue>`足够`List<T>`聪明`LinkedList<T>` ，可以使用`IEquatable<T>.Equals`而不是`object.Equals`在它们的元素上使用（如果可用）（请参阅[MSDN](http://msdn.microsoft.com/en-us/library/ms131187.aspx)）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-03T13:19:21.357

在这种情况下，他提供了 的强类型版本`Object.Equals`，它将替换可能如下所示的代码：

```
public override bool Equals(object other)
{
    // The following type check is not needed with IEquatable<Pair<T1, T2>>
    Pair<T1, T2> pair = other as Pair<T1, T2>;
    if (pair != null)
    {
        // <-- IEquatable<Pair<T1, T2>> implementation
    }
    else
    {
        return base.Equals(other);
    }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-03T13:19:11.183

该接口提供了该方法的`IEquatable<T>`强类型实现，与接收.`Equals``Equals``System.Object``System.Object`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-03T13:17:17.800

我认为乔恩说“强类型”是指泛型。

我还没有找到非通用`IEquitable`接口，但`IComparable<T>`存在`IComparable`。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-03T13:27:25.020

公平地说，Skeet（尽管他肯定很快就会加入）他确实花时间讨论了第 2.2.1 节中“强类型”的含义。

在您的问题的上下文中（我的版本中的第 85 页）），我认为他的意思是默认的 Equals 方法（它将对象作为参数）遵循实现接口的强类型 Equals 方法。

# r - 将函数结果输出到向量

> ID：10432202
> 
> 赞同：1
> 
> 时间：2012-05-03T13:16:20.230
> 
> 标签：r, function, vector

我创建了一个函数来调用数据集中每一行的函数。我想将输出作为向量。正如您在下面看到的，函数将结果输出到屏幕，但我不知道如何将输出重定向到可以在函数外部使用的向量。

```
n_markers <- nrow(data)
p_values <-rep(0, n_markers)

test_markers <- function()
   {
   for (i in 1:n_markers)
      {
      hets  <- data[i, 2]
      hom_1 <- data[i, 3]
      hom_2 <- data[i, 4]   
      p_values[i] <- SNPHWE(hets, hom_1, hom_2)
      }
      return(p_values)
   }

test_markers() 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-03T13:32:36.730

您是从[这里](http://www.sph.umich.edu/csg/abecasis/Exact/r_instruct.html)获取此代码吗？我担心你甚至没有先尝试自己弄清楚，但希望我错了。

这个你可能想多了。只需将函数的结果存储在向量中，就像使用其他函数一样：

```
stored_vector <- test_markers() 
```

但是，正如评论中提到的，您的功能可能会简化为：

```
stored_vector <- sapply(1:nrow(data), function(i) SNPHWE(data[i,2],data[i,3],data[i,4]) ) 
```

# android - 在运行时从 Android 主题获取默认属性值？

> ID：10432203
> 
> 赞同：4
> 
> 时间：2012-05-03T13:16:24.587
> 
> 标签：android, styles, themes

我需要以编程方式找出默认情况下使用哪个可绘制 Android 来呈现`ProgressBar`. 由于这取决于所使用的主题，因此我尝试了以下方法：

```
 TypedArray progressBarAttrs = context.getTheme().obtainStyledAttributes(
            new int[] { android.R.attr.indeterminateDrawable });
    progressDrawableId = progressBarAttrs.getResourceId(0, -1); 
```

但这总是返回-1。

这是因为`android.R.attr.indeterminateDrawable`没有声明为可样式化的还是什么？有没有其他方法可以实现相同的目标？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T16:52:49.957

以下为我返回了一个drawable（反复试验，我当然不明白obtainStyledAttributes究竟是如何解决的）：

```
 int[] attrs = new int[] { android.R.attr.indeterminateDrawable /* index 0 */};
 TypedArray ta = context.obtainStyledAttributes(android.R.style.Widget_ProgressBar, attrs);
 // ....
 ta.recycle(); 
```

但是，当将该drawable分配给progressBar时：

```
 progressBar.setIndeterminateDrawable(ta.getDrawable(0)); 
```

结果看起来不像默认的 ProgressBar 不确定微调器。它是 Android 微调器，但更大更厚。

我现在知道为什么了，但是请注意 Android 中的 ProgressBar.java，在检索到可绘制资源后，会对其进行处理：

```
drawable = tileifyIndeterminate(drawable);
setIndeterminateDrawable(drawable); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T15:59:55.217

如果您需要，很高兴在星期一为您提供更多帮助（只是出去并注意到您的问题），

但是请在此处查看 Hackbods 的答案[https://stackoverflow.com/a/2130528/726954](https://stackoverflow.com/a/2130528/726954)以及她指向示例项目的链接，这将允许您从主题中提取样式资源。

# android - Github 最佳实践 - 如何维护多个用户界面

> ID：10432205
> 
> 赞同：0
> 
> 时间：2012-05-03T13:16:30.963
> 
> 标签：android, user-interface, github

我是一名 android 开发人员，我正在开发一个具有多个用户界面的应用程序。

问题：在 github 上维护多个接口的最佳实践是什么？

感谢您的帮助：D

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-03T13:18:09.760

只需为不同的接口创建不同的分支。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-03T16:19:53.567

我宁愿使用android环境的功能

您可以设置一个（基础）库android项目和N个依赖（gui）项目。依赖的项目可能有自己的代码和资源。

每个项目可能会在 git 中使用自己的主干

# javascript - 关于JavaScript函数的两个问题

> ID：10432208
> 
> 赞同：0
> 
> 时间：2012-05-03T13:16:33.117
> 
> 标签：javascript, return, settimeout

关于以下功能，我有两个问题。显然，这是关于聊天的。在`chat()`函数中调用了不同的函数，一个是建立连接，一个是搜索（随机）聊天的人，一个是每秒获取消息。

```
function chat()
{
    //Open connection
    var openconnection=openConnection();
    //Stop function if connection could not be established
    if(openconnection==false) return;

    //Search for someone to chat with
    searchforcontact=searchForContact();
    if(searchforcontact==false) return;

    //Constantly get messages
    setTimeout(function(){
        setInterval(getMessages(),1000);
    },2000);
}

function openConnection() { 
    //Establish connection to php script 
    $.ajax({ 
        type: 'POST', 
        url: 'action/chat/openconnection.php', 
        success: function(connection) { 
            //Let user know that someone to chat with is searched for 
            $('#chatTextDiv').append('bla'); 
            //Return that the connection was successfull 
            return true; 
        } 
    }).error(function() { 
        //Let user know that a connection could not be established 
        $('#chatTextDiv').append('bla'); 
        //Return false 
        return false; 
    }); 
} 
```

以下是我的问题：

`chat()`1：如果无法建立连接，我会使用 return 来停止函数。然而，功能继续`searchForContact()`，即使失败，仍然继续。怎么来的？

2：函数`getMessages()`只运行一次，不知道为什么？仅供参考，我使用超时来提高可用性。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-03T13:28:47.543

很可能`openConnection()`不会返回 false。由于同步 API 非常少见，并且不能在 JavaScript 中真正使用，我很确定，这`openConnection`与您使用它的方式不一样。请提供有关该`openConnection`功能的更多信息。

此外，您无需将`getMessages`函数传递给对 的调用`setInterval`，而是调用`getMessages`并将其返回的任何内容传递给`setInterval`。这很可能不是您想要的。您应该将该调用更改为以下内容：

```
setTimeout(function(){
    setInterval(getMessages,1000);
},2000); 
```

您应该真正了解 AJAX 和异步 API 在一般情况下是如何工作的。为了让您领先一步，这里对您的代码进行了更新，该更新应该证明您做错了什么：

```
function openConnection(success, error) { 
    //Establish connection to php script 
    $.ajax({ 
        type: 'POST', 
        url: 'action/chat/openconnection.php', 
        success: success
    }).error(error||function () {}); 
}

function chat(ready) {
    //Open connection
    openConnection(function () {
        // If this function is called, then the connection is established

        //Search for someone to chat with
        searchforcontact=searchForContact();
        if(searchforcontact==false) return;

        // I STRONGLY SUPPOSE searchForContact is also an asynchronous API!

        //Constantly get messages
        setTimeout(function(){
            setInterval(getMessages,1000);
            ready();
        },2000);
    }, function () {
        // when this function is called, something went wrong.
    });
}

chat(function () {
    // when this function is called, chat is ready to be used!
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-03T13:28:17.420

1.  很抱歉用问题回答问题，但是 和 的值是`openconnection`什么`searchforcontact`？看来他们不满足条件，所以你的 return 语句没有运行。您可以使用 FireBug 或 Chrome 开发人员工具验证该值。

2.  `getMessages`只运行一次，因为您调用它而不是将其传递给`setInterval`. 应该是`setInterval(getMessages, 1000);`。

# c# - 如何在 C# 中将图像保存在 ftp 服务器中？

> ID：10432211
> 
> 赞同：0
> 
> 时间：2012-05-03T13:16:34.397
> 
> 标签：c#

如何将流数据保存为 ftp 服务器中的图像？

```
 FileInfo fileInf = new FileInfo("1" + ".jpg");
                        string uri = "ftp://" + "hostip//Data//" + fileInf.Name;
                        FtpWebRequest reqFTP;

                        // Create FtpWebRequest object from the Uri provided
                        reqFTP = (FtpWebRequest)FtpWebRequest.Create(new Uri(
                             "ftp://" + "ipaddress//Data//" + fileInf.Name));

                        // Provide the WebPermission Credintials
                        reqFTP.Credentials = new NetworkCredential("username",
                                                              "password");

                        // By default KeepAlive is true, where the control connection is 
                        // not closed after a command is executed.
                        reqFTP.KeepAlive = false;

                        // Specify the command to be executed.
                        reqFTP.Method = WebRequestMethods.Ftp.UploadFile;

                        // Specify the data transfer type.
                        reqFTP.UseBinary = true;

                        // Notify the server about the size of the uploaded file
                        //reqFTP.ContentLength = fileInf.Length; ???
                        using (var img = Image.FromStream(image))
                        {
                            img.Save(adduser.User_Id + ".jpg", ImageFormat.Jpeg);
                        } 
```

你能告诉我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T13:29:26.353

您需要将数据（图像）放入字节数组中，然后发送。[FtpWebRequest.GetResponse 文档](http://msdn.microsoft.com/en-us/library/system.net.ftpwebrequest.getresponse.aspx)示例显示了基础知识，尽管它附加了一个文件。其他一切都与您正在做的事情相关（您将用上传文件替换附加）。

要将图像放入字节数组，您可以编写：

```
byte[] imageBuffer = File.ReadAllBytes(imageFileName); 
```

其他一切都应该与文档示例非常相似。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T14:45:32.837

这是从 FTP 服务器下载文件的示例代码

```
Uri url = new Uri("ftp://ftp.demo.com/Image1.jpg");
if (url.Scheme == Uri.UriSchemeFtp)
{
    FtpWebRequest objRequest = (FtpWebRequest)FtpWebRequest.Create(url);
    //Set credentials if required else comment this Credential code
    NetworkCredential objCredential = new NetworkCredential("FTPUserName", "FTPPassword");
    objRequest.Credentials = objCredential;
    objRequest.Method = WebRequestMethods.Ftp.DownloadFile;
    FtpWebResponse objResponse = (FtpWebResponse)objRequest.GetResponse();
    StreamReader objReader = new StreamReader(objResponse.GetResponseStream());
    byte[] buffer = new byte[16 * 1024];
    int len = 0;
    FileStream objFS = new FileStream(Server.MapPath("Image1.jpg"), FileMode.Create, FileAccess.Write, FileShare.Read);
    while ((len = objReader.BaseStream.Read(buffer, 0, buffer.Length)) != 0)
    {
        objFS.Write(buffer, 0, len);
    }
    objFS.Close();
    objResponse.Close();
} 
```

# c#-2.0 - IE9 中的 Report Viewer 8.0 呈现问题

> ID：10432217
> 
> 赞同：0
> 
> 时间：2012-05-03T13:17:02.107
> 
> 标签：c#-2.0

我们已经在 Web 应用程序中创建了**SSRS 2008 SQL Reports/Report Viewer 8.0**。从**IE9**开始，报表的呈现和在报表查看器中的处理与我们之前的经验发生了巨大变化。

因此，我们曾经非常漂亮的功能性应用程序突然变成了一个看起来很业余的东西……要善待它。

我需要在我们的下一个版本之前解决这个问题，我希望有人之前至少遇到过其中一些问题并得到一些提示。

我首先注意到我们一直依赖的古老的**Report Viewer 8.0.0.0**中的渲染问题。

主要问题是未能遵守布局的大小，导致文本换行和其他不受欢迎的渲染器尝试在最小的缩小空间中显示报告。

我认为这很可能是因为老化的 ReportViewer 不支持更新的浏览器。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T13:23:04.923

检查您在aspx页面中的reportviewer控件是否具有以下属性

```
AsyncRendering="False" 
SizeToReportContent="True" 
```

# forms - Drupal 7、表单提交：显示查询结果？

> ID：10432220
> 
> 赞同：0
> 
> 时间：2012-05-03T13:17:07.017
> 
> 标签：forms, drupal, drupal-7, form-api

使用表单api，我将在表单发送帖子后显示一些处理的结果。

所以我实现了 module_name_submit(...) 方法：

```
function cmis_views_block_view($delta = '') {

    $cmisview = cmis_views_load($delta);
    $block['content'] = cmis_views_info($cmisview);
    return $block;
} 
```

处理非常简单。通话正常进行，我想在屏幕上显示 $block。退回这个没有帮助。也许重定向可能会有所帮助，但我首先在寻找与 drupal_set_message() 等效的东西，但这会在页面中显示 html。

欢迎任何线索:-) 谢谢，J。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T16:34:20.257

你可能需要使用`$form_state['redirect']`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T08:10:11.493

将内容放入会话变量中，重定向到该页面并在 $content 中使用自定义块输出该特定变量

# jquery - 使用 jquery.cookie.js 存储多个复选框状态

> ID：10432221
> 
> 赞同：0
> 
> 时间：2012-05-03T13:17:07.440
> 
> 标签：jquery, cookies, checkbox

我想在 cookie 中存储一个复选框状态：

```
<script type="text/javascript">
$(document).ready(function(){
var checkbox = $('#boxlawreg :checkbox'),
    checkboxCookieName = 'checkbox-state';

checkbox.prop('checked', +$.cookie(checkboxCookieName));

checkbox.click(function() {
   $.cookie(checkboxCookieName, +this.checked);
});
});
</script> 
```

它工作得很好，但我有 7 个复选框，如果我选中一个，重新加载我的网站，所有复选框都被选中。

它看起来像：

```
<input type="checkbox" name="option1" value="1">
<input type="checkbox" name="option2" value="2">
<input type="checkbox" name="option3" value="3">
<input type="checkbox" name="option4" value="4"> 
```

有任何想法吗 ？

（Ps：对不起英语，我是法国人）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-03T15:25:57.720

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title></title>
    <script src="Scripts/jquery-1.7.1.min.js" type="text/javascript"></script>
    <script src="https://github.com/carhartl/jquery-cookie/blob/master/jquery.cookie.js"
        type="text/javascript"></script>
    <script type="text/javascript">
        $(document).ready(function () {
            var checkbox = $('#boxlawreg').find(':checkbox'), checkboxCookieName = 'checkbox-state';

            checkbox.each(function () {
                $(this).attr('checked', $.cookie(checkboxCookieName + '|' + $(this).attr('name')));
            });

            checkbox.click(function () {
                $.cookie(checkboxCookieName + '|' + $(this).attr('name'), $(this).prop('checked'));
            });
        });
    </script>
</head>
<body>
    <div id="boxlawreg">
        <input type="checkbox" name="option1" value="1" />1<br />
        <input type="checkbox" name="option2" value="2" />2<br />
        <input type="checkbox" name="option3" value="3" />3<br />
        <input type="checkbox" name="option4" value="4" />4<br />
    </div>
</body>
</html> 
```

# php - 从mysql数据库中选择最近地理位置的最快方法是什么？

> ID：10432222
> 
> 赞同：2
> 
> 时间：2012-05-03T13:17:08.543
> 
> 标签：php, mysql, sorting, coordinates, geographic-distance

我在 MySQL 数据库中有一个表，其中包含地理坐标和其他有关地点的信息。表中的每一行代表一个地理位置，并具有如下坐标：纬度 = 45.05235 和经度 = 8.02354，这是欧洲某个地方。

给定一些输入地理坐标（相同格式），我需要从该表中选择最近的地方，或某个半径内的最近的地方。

我已经在使用索引，但是我想加快这个过程，因为这些函数被多次使用。

如果我可以通过一个查询直接选择某个半径内最近的一个或多个地方，这可能会有所帮助。当然，任何其他解决方案也非常受欢迎。

我制作了一个可以获取最近位置的函数（正在工作但速度很慢）：

```
<?php
//Function for getting nearest destinations:
function nearest_destination($lat1,$lon1,$radius,$type,$maxdistance){
  //Determine geo bounds:
  $lonlow = $lon1 - rad2deg($maxdistance/6371);
  $lonhigh = $lon1 + rad2deg($maxdistance/6371);
  $latlow = $lat1 - rad2deg($maxdistance/6371);
  $lathigh = $lat1 + rad2deg($maxdistance/6371);

  //Database details and connect to database
  include(realpath($_SERVER["DOCUMENT_ROOT"]).'/connect_to_db.php'); 
  //Set initial counters to zero
  $ii=0;
  $i=0;

  while($row = mysql_fetch_array($result, MYSQL_ASSOC)){
    $shortnamelist[$ii]=$row['shortname'];
    $fullnamelist[$ii]=$row['fullname'];
    $latitudelist[$ii]=$row['latitude'];
    $longitudelist[$ii]=$row['longitude'];
    $lon2=$row['longitude'];
    $lat2=$row['latitude'];

    //Calculate the distance:
    $delta_lon = $lon2 - $lon1;
    $earth_radius = "6371"; # in km
    $distance  = sin(deg2rad($lat1)) * sin(deg2rad($lat2)) + cos(deg2rad($lat1)) * cos(deg2rad($lat2)) * cos(deg2rad($delta_lon)) ;
    $distance  = acos($distance);
    $distance  = $earth_radius*$distance;
    $distance  = round($distance, 4);
    $distancelist[$ii] = $distance;
    $ii=$ii+1;
  }

  //Select position of nearest, and select the destination
  if(isset($distancelist)){
    $minkey=array_keys($distancelist, min($distancelist));
    $minkey=$minkey[0];

    $fullname=$fullnamelist[$minkey];
    $shortname=$shortnamelist[$minkey];
    $latitude=$latitudelist[$minkey];
    $longitude=$longitudelist[$minkey];

    // remove the big arrays to conserve memory:
    unset($fullnamelist);
    unset($latitudelist);
    unset($longitudelist);
    unset($distancelist);
    unset($shortnamelist);
  }

  if(isset($destinid)=='TRUE'){
    $nearest_destination = array("shortname" => $shortname, "fullname" => $fullname, "latitude" => $latitude, "longitude" => $longitude, "distancelist" => $distancelisting);}
  else $nearest_destination = 0;
  mysql_close ();
  return $nearest_destination;
}
?> 
```

这是在一定半径内选择最近地点的函数（工作但速度慢）：

```
<?php
//Function for getting nearest destinations:
function nearest_destination($lat1,$lon1,$radius,$type,$maxdistance){
  //Determine geo bounds:
  $lonlow = $lon1 - rad2deg($maxdistance/6371);
  $lonhigh = $lon1 + rad2deg($maxdistance/6371);
  $latlow = $lat1 - rad2deg($maxdistance/6371);
  $lathigh = $lat1 + rad2deg($maxdistance/6371);

  // Convert from string to number:
  $lon1=floatval($lon1);
  $lat1=floatval($lat1);

  //Database details and connect to database
  include(realpath($_SERVER["DOCUMENT_ROOT"]).'/connect_to_database.php'); //Get DB login details

  //Select data from destinations table:
  $sql="SELECT shortname, fullname, latitude, longitude FROM destinations WHERE type='$type' AND longitude > $lonlow AND longitude < $lonhigh AND latitude > $latlow AND latitude < $lathigh";
  $result=mysql_query($sql);

  //Set initial counter to zero
  $i=0;

  while($row = mysql_fetch_array($result, MYSQL_ASSOC)){
    $lon2=$row['longitude'];
    $lat2=$row['latitude'];
    $lon2=floatval($lon2);
    $lat2=floatval($lat2);

    //Calculate the distance:
    $delta_lon = $lon2 - $lon1;
    $earth_radius = "6371"; # in km
    $distance  = sin(deg2rad($lat1)) * sin(deg2rad($lat2)) + cos(deg2rad($lat1)) * cos(deg2rad($lat2)) * cos(deg2rad($delta_lon)) ;
    $distance  = acos($distance);
    $distance  = $earth_radius*$distance;
    $distance  = round($distance, 4);

    //If distance is smaller than the radius the destination is saved in the array:
    if($distance<$radius){
      $fullname[$i]=$row['fullname'];
      $shortname[$i]=$row['shortname'];
      $latitude[$i]=$row['latitude'];
      $longitude[$i]=$row['longitude'];
      $distancelisting[$i] = $distance;
      $i=$i+1;
    }
  }

  if(isset($destinid)=='TRUE'){
    $nearest_destination = array("shortname" => $shortname, "fullname" => $fullname, "latitude" => $latitude, "longitude" => $longitude, "distancelist" => $distancelisting);
  }else $nearest_destination = 0;
  mysql_close ();
  return $nearest_destination;
}
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T13:21:59.667

使用 mysql gis 支持将提高您的速度，因为它是为此创建的。如果您经常阅读和比较距离，那么使用 postgis 是值得的，它是一个完全支持的地理空间数据库。它将让您索引您的点以进行有效的距离查询。MySQL 确实提供有限的支持并依赖于 GEOS [http://trac.osgeo.org/geos/](http://trac.osgeo.org/geos/)

[http://forge.mysql.com/wiki/GIS_Functions](http://forge.mysql.com/wiki/GIS_Functions)

[http://postgis.refractions.net/](http://postgis.refractions.net/)

与此最相关的链接是由 Anigel 的评论发布的，它为您的问题提供了准确的答案[查找两个纬度/经度点之间距离的最快方法](https://stackoverflow.com/questions/1006654/fastest-distance-lookup-given-latitude-longitude)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-03T13:25:17.547

根据需要随意修改：

```
<?php
$center_lat = $_GET["lat"];
$center_lng = $_GET["lng"];
$radius = $_GET["radius"];
$unit = $_GET["unit"];
$unitConst = $unit == "mi" ? 3959 : 6371;
$sql = sprintf("SELECT Address, City, State, Country, PostalCode, PhoneNumber, Lat, Lng, ($unitConst * acos(cos(radians('%s')) * cos(radians(Lat)) * cos(radians(Lng) - radians('%s')) + sin(radians('%s')) * sin(radians(Lat)))) AS Distance FROM destinations WHERE (Lat != '0' AND Lng !=0) HAVING distance < '%s' ORDER BY distance", mysql_real_escape_string($center_lat), mysql_real_escape_string($center_lng), mysql_real_escape_string($center_lat), mysql_real_escape_string($radius));
?> 
```

# c# - C# 线程 - 需要锁或监视器？

> ID：10432225
> 
> 赞同：-1
> 
> 时间：2012-05-03T13:17:25.550
> 
> 标签：c#, multithreading

我是线程新手，我想知道我是否有好的代码。情况：3个类，Reader，Writer和Data。Writer 尽可能快地向 Data 写入数据，Reader 每秒读取一次（如果 writer 没有写入新数据，他会检查 flag，如果为 true，则有新数据要读取，如果不是，他可以使用旧数据）。请告诉我它是否是 Data 类的有效代码：

```
class GameData
{
    String GameData="";
    bool newData = false;
    public String ReadData()
    {
        newData = false;
        return GameData;
    }
    public void WriteData(String d)
    {
        lock (this)
        {
            GameData = d;
            newData = true;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T13:24:18.120

[读卡器写锁超薄](http://msdn.microsoft.com/en-us/library/system.threading.readerwriterlockslim.aspx)。[阻止收集](http://msdn.microsoft.com/en-us/library/dd267312.aspx)

一个很好的起点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-03T13:20:47.543

您应该考虑使用[阻塞集合](http://msdn.microsoft.com/en-us/library/dd267312.aspx)。这将为您处理锁定。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-03T13:22:56.643

您的代码仅确保多个作者不会同时编写。它不会阻止 ReadData 在写入者正在写入和执行相同操作时读取和更改 newData 标志。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-03T13:25:52.660

2 次连续写入会覆盖数据。这是故意的吗？你是从外面检查 newData 吗？您试图实现/保护什么行为？

# jquery - 将 $(this) 存储在变量中

> ID：10432228
> 
> 赞同：9
> 
> 时间：2012-05-03T13:17:51.123
> 
> 标签：jquery

如果我想保存`this`为 jQuery DOM 对象然后选择它，我应该使用以下哪种方法？

```
var element = $(this) 
```

然后用于选择

```
$(element) 
```

或者干脆

```
var element = this 
```

另外，如果我想连接`element`成一个更大的选择器，是这样的：

```
$(element + " .class") 
```

正确的方式？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-05-03T13:20:18.560

```
var element = $(this) 
```

然后你可以使用`element`而不是`$(this)`. 您不必再`element`插入`$()`。

例如：`element.remove()`而不是`$(this).remove()`

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-05-03T13:19:35.880

`$this = $(this)`通常是人们所做的。美元符号是变量名的有效字符，因此它可以很好地提醒变量是一个 jQuery 对象。

然后，您可以`$this`像使用任何 jQuery 元素一样使用它。例如，`$this.css('border', 'none')`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-03T13:21:02.257

`var element = $(this)`用于存放

然后`element`用于选择

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-03T13:42:35.023

如果你想选择所有类 myClass 的项目，你应该这样做：

```
var $this = $(this);
var myClassElements = $(".myClass", $this); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-03-28T09:32:20.647

正确的方法是：

```
var element= this.html();
$(element).find(div) /* from modefy div you can change it with any other selector */
$(element).attr({"class":"myClass","other atrribut":"it's value"}); 
```

我希望这很有用。

# php - 如何在 Code Igniter 项目中包含 APNS-PHP？

> ID：10432236
> 
> 赞同：1
> 
> 时间：2012-05-03T13:18:19.417
> 
> 标签：php, codeigniter, apns-php

我已成功使用 APNS-PHP 发送 PN - 太棒了！

但是，我对如何将它添加到 Code Igniter 项目（在将从命令行调用的控制器内）有点卡住。

来电：

```
require_once APPPATH.'/third_party/ApnsPHP/Autoload.php'; 
```

导致错误：

```
Fatal error: Uncaught exception 'Exception' with message 'Class file 
'XXXXXXX/application/third_party/CI/DB/mysql/result.php' does not 
exists' in XXXXXXX/application/third_party/ApnsPHP/Autoload.php:49 
```

我假设这是某种自动加载冲突？但我不确定！

任何帮助都会很棒——我在谷歌上拖网时运气不佳！

这是我试图在函数内部使用的行：

```
require_once APPPATH.'/third_party/ApnsPHP/Autoload.php'; 
```

这是我为加载 Ion Auth 的库添加的 __autoload 函数：

```
function __autoload($class)
{

    if (strpos($class, 'CI_') !== 0)
    {
        if (file_exists($file = APPPATH.'core/'.$class.EXT))
        {
            include $file;
        }
        else if (file_exists($file = APPPATH.'libraries/'.$class.EXT))
        {
            include $file;
        }
        else if (file_exists($file = APPPATH.'core/base_controllers/'.$class.EXT))
        {
            include $file;  
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-05-19T04:09:44.327

对库没有其他更改，这对我有用。它稍微回避了 CI，但仍然允许您将 APNS-PHP 作为模型加载：

```
<?php

if(!defined('BASEPATH')) exit('No direct script access allowed');

class Notification_model extends CI_Model {

    protected $apnsDir = '';

    // -----------------------------------------------

    /**
     * Setup some basic stuffs
     * @param void
     * @return void
     * @access public 
     */
    public function __construct() {

        parent::__construct();

        /* get all the APNS files */
        $this->apnsDir = $_SERVER['DOCUMENT_ROOT'].'/application/third_party/ApnsPHP/';
        $this->_apns_req();

        return;

    } /* /__construct() */

    // -----------------------------------------------

    /**
     * Will send the actual iOS notification to the user
     * @param $token string iOS device token
     * @param $msg string 
     * @param $attrs array Key/value pairs to be sent as meta with APN
     * @return void
     * @access public
     */
    private function send_ios($token=null, $msg=null, $attrs=array()) {

        if(!$token || !$msg) return;

        // Instantiate a new ApnsPHP_Push object
        $push = new ApnsPHP_Push(
            ApnsPHP_Abstract::ENVIRONMENT_SANDBOX,
            $this->apnsDir.'SSL/server_certificates_bundle_sandbox.pem'
        );

        // Set the Provider Certificate passphrase
        // $push->setProviderCertificatePassphrase('tablecan29');

        // Set the Root Certificate Autority to verify the Apple remote peer
        $push->setRootCertificationAuthority($this->apnsDir.'SSL/entrust_root_certification_authority.pem');

        // Connect to the Apple Push Notification Service
        $push->connect();

        // Instantiate a new Message with a single recipient
        $message = new ApnsPHP_Message($token);

        // Set a custom identifier. To get back this identifier use the getCustomIdentifier() method
        // over a ApnsPHP_Message object retrieved with the getErrors() message.
        $message->setCustomIdentifier("Message-Badge-3");

        // Set badge icon to "3"
        // $message->setBadge(0);

        // Set a simple welcome text
        $message->setText($msg);

        // Play the default sound
        $message->setSound();

        // Set custom properties
        if( is_array($attrs) && count($attrs) )
        {
            foreach( $attrs as $attr_key => $attr_val )
            {
                $message->setCustomProperty($attr_key, $attr_val);
            }
        }

        // Set the expiry value - in seconds
        $message->setExpiry(120);

        // Add the message to the message queue
        $push->add($message);

        // Send all messages in the message queue
        $push->send();

        // Disconnect from the Apple Push Notification Service
        $push->disconnect();

        // Examine the error message container
        // $aErrorQueue = $push->getErrors();
        // if (!empty($aErrorQueue)) {
        //  var_dump($aErrorQueue);
        // }

        return TRUE;

    } /* /send_ios() */

    // -----------------------------------------------

    private function _apns_req() {

        require_once $this->apnsDir.'Abstract.php';
        require_once $this->apnsDir.'Exception.php';
        require_once $this->apnsDir.'Feedback.php';
        require_once $this->apnsDir.'Message.php';
        require_once $this->apnsDir.'Log/Interface.php';
        require_once $this->apnsDir.'Log/Embedded.php';
        require_once $this->apnsDir.'Message/Custom.php';
        require_once $this->apnsDir.'Message/Exception.php';
        require_once $this->apnsDir.'Push.php';
        require_once $this->apnsDir.'Push/Exception.php';
        require_once $this->apnsDir.'Push/Server.php';
        require_once $this->apnsDir.'Push/Server/Exception.php';

        return;

    } /* /_apns_req() */

} /* /Notification_model{} */

/* End of file notification_model.php */
/* Location: ./application/models/notification_model.php */ 
```

示例用法：

```
$this->load->model('notification_model');
$this->notification_model->send_ios($token, 'Test Message', array('custom_var' => 'val')); 
```

# tomcat - 有没有办法告诉什么上下文/webapp正在写入给定的日志文件？

> ID：10432237
> 
> 赞同：0
> 
> 时间：2012-05-03T13:18:21.633
> 
> 标签：tomcat, logging, tomcat6

我有一个运行大约 70 个 Web 应用程序的 tomcat6 服务器，并且我有一个（或多个）已设置共享 .jar 以登录调试模式，这正在占用我的磁盘。

我试过在文件上使用 lsof ，但它只是告诉我是 tomcat 用户和正在写入文件的 java 程序（我已经知道了）。

我在谷歌上花了一些时间，但一定是使用了错误的搜索词，因为我得到的只是关于 Tomcat 本身如何记录或如何编写从 web 应用程序中进行记录或文件写入所需的代码的信息。

日志文件没有我需要能够判断哪个 webapp 正在调用它的信息，只有与实际正在编写的 jar 相关的信息。

有人可以向我指出一些有关如何找出导致问题的 webapp 的信息或告诉我如何确定吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T19:04:40.013

如果多个 Web 应用程序正在写入同一个文件，则没有简单的方法可以取消该文件。您需要重新配置每个 Web 应用程序的日志记录以记录到单独的文件而不是同一个文件。我假设此日志记录是通过诸如 log4j 之类的框架完成的。您需要以适当的方式为正在使用的框架修改配置。

或者，检查日志记录配置文件以查看哪个配置文件用于调试并更改它。

作为第三种 - 远非理想的选择 - 使用管理器应用程序在您停止 Web 应用程序时执行二进制搜索以确定哪个正在填充您的日志文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T02:46:06.360

将线程 ID 添加到日志格式，然后与线程转储进行比较。

# android - Android：setActionView(null) 不会删除带有 ActionView 的 MenuItem 上的视图和宽度问题

> ID：10432239
> 
> 赞同：9
> 
> 时间：2012-05-03T13:18:34.147
> 
> 标签：android, android-actionbar

[我尝试以类似于用于 Honeycomb 的 ActionBarHelper](http://developer.android.com/resources/samples/ActionBarCompat/src/com/example/android/actionbarcompat/ActionBarHelperHoneycomb.html)的方式使用操作视图为 ActionBar 设置 MenuItem 动画以具有旋转刷新按钮。但我有两个麻烦：

1.  当我显示动作视图时，项目的宽度小于 MenuItem（请参阅屏幕截图的第 1 部分和第 2 部分）
2.  当我想通过 setActionView(null) 停止动画并返回默认 MenuItem 状态时，我的操作视图仍显示在我的 MenuItem 内（屏幕截图的第 3 部分）

[MenuItem的不同步骤（截图）](https://i.stack.imgur.com/W1myH.png)

ActionView 布局 (R.layout.menu_item_refresh) 是：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:gravity="center">

    <ImageView
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:src="@drawable/ic_menu_refresh" />

</LinearLayout> 
```

onOptionsItemSelected 方法代码是：

```
@Override
public boolean onOptionsItemSelected(MenuItem item) {
    switch(item.getItemId()){               
        default:
            return super.onOptionsItemSelected(item);

        case R.id.Menu_Feed_Refresh:
            mAnimatedItem = item;
            item.setActionView(R.layout.menu_item_refresh);
            item.startAnimation(mAnimation);

            load();
            return true;
    }
} 
```

加载完成后，我调用处理程序 mAnimatedItem.setActionView(null)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-29T17:46:58.153

`mAnimation.clearAnimation()`当你想停下来的时候打电话。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T16:46:51.787

如果我正确理解了您的代码，则将动画应用于 MenuItem。您删除 ActionView `setActionView(null)`，但 menuItem 动画。

您需要从 ActionView 获取图像并对其应用动画：

```
@Override
public boolean onOptionsItemSelected(MenuItem item) {
switch(item.getItemId()){               
    default:
        return super.onOptionsItemSelected(item);

    case R.id.Menu_Feed_Refresh:
        mAnimatedItem = item;
        item.setActionView(R.layout.menu_item_refresh);
        ImageView iv = (ImageView) item.getActionView().findViewById(R.id.refresh_image_id);
        iv.startAnimation(mAnimation);
        load();
        return true;
    }
} 
```

# entity-framework - 如何为这些表定义实体/模型？

> ID：10432243
> 
> 赞同：0
> 
> 时间：2012-05-03T13:18:46.427
> 
> 标签：entity-framework

表学生，列：

```
 id int primary key,
name varchar(20) not null 
```

表类，列：

```
 id int primary key,
name varchar(20) not null 
```

学生和班级是多对多的，所以我们有表StudentClass，在这个表中，我们会知道一个学生上哪些课，一个班级有哪些学生。

```
 StudentId int FK,
ClassId int FK, 
```

接下来，表StudentClassProperty（使用该表存储额外的属性，这些属性不属于student也不属于class，它们属于class+student），列：

```
 StudentId,
ClassId
Name,
Value, 
```

表 课程

```
 id,
name 
```

和表StudentClassCourse（不同的班级，有不同的课程，但所有课程都是可选的）

```
 StudentId,
ClassId,
CourseId 
```

据我所知，模型可以是：

```
 class Student 
{
 int Id,
 string Name,

 ICollection Classes,
}

class Class
{
 int Id,
string name,

 ICollection Students,
}

class Course
{
 int Id,
string Name
}

in DbContext class, defines the many-to-many relationship for Class and Student

_db.Entry(
  .HasMany(a => a.Classes)
  .WithMany(b => b.Students)
  .Map (m => m.MapLeftKey("StudentId").MapRightKey("ClassId").ToTable("StudentClass")); 
```

但是如何定义表 StudentCLassPropery 和 StudentClassCourse 的关系？我想使用这样的实体：

```
 foreach(Student s in _db.Students)
{
  foreach(Class c in s.Classes)
  {
    foreach(Course course in c.Coures)
    {
      // ....
    }
  }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T09:05:00.940

[http://codebetter.com/jeremymiller/2007/02/01/composite-keys-are-evil/](http://codebetter.com/jeremymiller/2007/02/01/composite-keys-are-evil/)

受上述链接的启发，使用代理键替换复合键。比一切都变得更快更容易。

# ruby-on-rails - Activeadmin 限制对非超级用户项目的访问

> ID：10432244
> 
> 赞同：4
> 
> 时间：2012-05-03T13:18:56.720
> 
> 标签：ruby-on-rails, activeadmin

我在 Rails 上使用 ActiveAdmin，我试图锁定站点中维护管理员用户到非超级用户的部分。

当然，我可以像这样隐藏菜单选项：

```
ActiveAdmin.register AdminUser do
  menu :parent => "Settings", :if => proc { current_admin_user.superuser }
end 
```

但是，如果您绕过菜单并直接转到 /admin/admin_users，该路线仍然有效

在 ActiveAdmin 中为管理员锁定路由和控制器的最佳做法是什么？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2014-06-14T07:42:54.810

您可以将 before_filter 添加到注册资源的控制器块中，这对我有用：

```
ActiveAdmin.register User do

  menu :if => proc{ current_user.superadmin? }

  controller do
    before_filter :superadmin_filter

    def superadmin_filter
      raise ActionController::RoutingError.new('Not Found') unless current_user.superadmin?
    end
  end 
```

[资源](https://github.com/gregbell/active_admin/issues/1108)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-03T13:39:17.803

你试过cancan吗：[https](https://github.com/ryanb/cancan) ://github.com/ryanb/cancan ？有一个完美例子的要点：[https ://gist.github.com/1264060](https://gist.github.com/1264060)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-11-15T13:45:46.510

@Tom Power 的解决方案很棒，但我建议将其存储在配置中：`config/initializers/active_admin.rb`

```
ActiveAdmin.setup do |config|
  def ensure_admin!
    raise ActionController::RoutingError.new('Not Found') unless current_user.superadmin?
  end

  config.before_action :ensure_admin!      
end 
```

# ios - 需要立即截屏

> ID：10432245
> 
> 赞同：1
> 
> 时间：2012-05-03T13:18:59.080
> 
> 标签：ios, uipageviewcontroller

所以伙计们，我正在使用这个功能来拍摄`UIWebView`加载电子书的照片并在用户渲染页面时显示它

```
-(UIImage*)captureScreen:(UIView*) viewToCapture
{

    UIGraphicsBeginImageContextWithOptions(viewToCapture.bounds.size, viewToCapture.opaque, 0.0);
    [viewToCapture.layer renderInContext:UIGraphicsGetCurrentContext()];
    UIImage *viewImage = UIGraphicsGetImageFromCurrentImageContext();
    UIGraphicsEndImageContext();
    return viewImage;
} 
```

但问题是获取图像发生延迟（0.5 秒）.. 当我在时间分析器中测试时，仪器指向这条线 `[viewToCapture.layer renderInContext:UIGraphicsGetCurrentContext()];`作为导致延迟的线.. 所以任何建议，建议我怎么能过来这个延迟。

先谢谢了。

注意事项： 1.Im 使用 UIPageController 实现书籍效果。

2.要检查我尝试过的内容，请检查此[链接](https://stackoverflow.com/q/10399235/705559)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T13:23:04.453

解决这个问题的最好方法是使用委托。这意味着如果您告诉委托方法制作图像，它可以在后台执行并告诉您的视图“嘿，现在我为您获取了 XXX 的图像”（取决于您如何实现它。这样您就可以加载您的查看其中的电子书，并在书的中间显示一个带有默认背景的加载器。图像完成后，您使用正确的图像更新书的视图并删除加载器。就像苹果的iBooks 和任何其他好的应用程序都可以。

我自己的一个项目的示例（根据您的需要进行了调整，但在 UITableViewController 中使用）：
**BookDelegate.h**

```
#import <Foundation/Foundation.h>

@class Book;

@protocol BookDelegate <NSObject>

@optional
- (void)didRecieveImageForBook:(NSString*)imagePath indexPath:(NSIndexPath*)indexPath;

@end 
```

**书.h**

```
#import <Foundation/Foundation.h>
#import "BookDelegate.h"

@interface Book : NSOperation <NSObject>
{   
    id <BookDelegate> delegate;
    SEL didRecieveImageForBookSelector;
}

@property (strong, nonatomic) id delegate;
@property (assign) SEL didRecieveImageForBookSelector;

- (NSString*)getBookImageForBookId:(int)BookId externalRefference:(NSString*)url indexPath:(NSIndexPath*)indexPath;
- (id)delegate;

// Delegate methods
- (void)didRecieveImageForBook:(NSString*)imagePath indexPath:(NSIndexPath*)indexPath;

@end 
```

**书.m**

```
#import "Book.h"
#import <objc/runtime.h>

@implementation Book

static char kAssociationKey;

@synthesize didRecieveImageForBookSelector;
@synthesize delegate;

- (id)init
{
    if (self = [super init])
    {
        [self setDidRecieveImageForBookSelector:@selector(didRecieveImageForBook:indexPath:)];
    }
    return self;
}

#pragma mark -
#pragma mark The default delegate functions

- (void)didRecieveImageForBook:(NSString*)imagePath indexPath:(NSIndexPath*)indexPath
{
    NSLog(@"********************************************************");
    NSLog(@"*** PLEASE IMPLEMENT THE FOLLOWING DELEGATE FUNCTION ***");
    NSLog(@"***       didRecieveImageForBook:indexPath:       ***");
    NSLog(@"********************************************************");
}

#pragma mark -
#pragma mark Function for fechting images

// This method is not adapted to what YOU need, but left my code here in case it might help you out.
- (NSString*)getBookImageForBookId:(int)bookId externalRefference:(NSString*)url indexPath:(NSIndexPath*)indexPath
{    
    NSString *ext = [[url lastPathComponent] pathExtension];

    NSString *documentsPath = [NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES) objectAtIndex:0];

    NSString *imagePath = [documentsPath stringByAppendingPathComponent:[NSString stringWithFormat:@"%@%d.%@", APP_BookIMAGEPEFIX, BookId, ext]];
    BOOL fileExists = [[NSFileManager defaultManager] fileExistsAtPath:imagePath];

    if (fileExists)
    {
        return imagePath;
    }
    else {
        NSURL *theUrl = [NSURL URLWithString:url];

        ASIHTTPRequest *request = [ASIHTTPRequest requestWithURL:theUrl];
        [request setDidFinishSelector:@selector(BookImageFetched:)];
        [request setDidFailSelector:@selector(processFailed:)];
        [request setTimeOutSeconds:60];
        [request setDownloadDestinationPath:imagePath];
        [request setDelegate:self];

        [request startAsynchronous];

        objc_setAssociatedObject(request, &kAssociationKey, indexPath, OBJC_ASSOCIATION_RETAIN_NONATOMIC);

        return @"";
    }
}

- (void)BookImageFetched:(ASIHTTPRequest *)request 
{
    NSIndexPath *indexPath = objc_getAssociatedObject(request, &kAssociationKey);
    NSString *imagePath = request.downloadDestinationPath;

    [[self delegate] performSelector:self.didRecieveImageForBookSelector withObject:imagePath withObject:indexPath];
}

#pragma mark -
#pragma mark delegate functions

- (id)delegate
{
        return delegate;
}

- (void)setDelegate:(id)newDelegate
{
        delegate = newDelegate;
}

#pragma mark -

@end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-03T13:26:35.830

您可以使用 GCD - 我注意到您提供的链接中的 GCD 缺少一个步骤。这是我用来异步获取图像并在它准备好并且工作正常时通知的方法：

```
dispatch_queue_t concurrent = dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_HIGH, 0);
    dispatch_async(concurrent, ^{
        __block UIImage *image = nil;
        dispatch_sync(concurrent, ^{
            //put code to grab image here
        });
        dispatch_sync(dispatch_get_main_queue(), ^{
            //this gets called when the above is finshed
            //you should also check if the image is nil or not
        });
    }); 
```

希望能帮助到你

记录在案 - 我用它来拍摄 UIView 快照，并且总是尝试将我的目标放在父视图中，即使它是暂时的 - 它似乎加快了速度。

```
UIGraphicsBeginImageContextWithOptions(self.bounds.size, YES, 0.0);
[self.layer renderInContext:UIGraphicsGetCurrentContext()];

UIImage *image = UIGraphicsGetImageFromCurrentImageContext();
UIGraphicsEndImageContext();
return image; 
```

不确定它是否有帮助，或者您是否使用相同的方法。我希望你能尽快解决这个问题：）

# objective-c - 在 OCMock 中为类的所有实例模拟方法

> ID：10432253
> 
> 赞同：7
> 
> 时间：2012-05-03T13:19:18.437
> 
> 标签：objective-c, unit-testing, ocmock

我想使用 OCMock 模拟类的所有实例的实例方法，但是我没有类的实例来覆盖它，而是在我正在测试的方法中创建它。

所以我的问题是：是否可以为类的所有实例重写此方法，还是我需要将该实例注入方法而不是在方法中创建它？

IE

```
[[ClassThatHasTheInstanceMethodToOverride andCall:@selector(callThisMethodInstead) onObject:self] someInstanceMethod]; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-03T14:07:24.253

我最终通过这组方法到达了那里：

方法 originalMethod = nil; 方法 swizzleMethod = nil;

```
#import <objc/runtime.h>

....

- (void) swizzleInstanceMethodForInstancesOfClass:(Class)targetClass selector:(SEL)selector
{
    originalMethod = class_getInstanceMethod(targetClass, selector);
    swizzleMethod = class_getInstanceMethod([self class], selector);
    method_exchangeImplementations(originalMethod, swizzleMethod);
}

- (void) deswizzle
{
    method_exchangeImplementations(swizzleMethod, originalMethod);
    swizzleMethod = nil;
    originalMethod = nil;
} 
```

# jquery - Jqgrid 虚拟分页

> ID：10432256
> 
> 赞同：0
> 
> 时间：2012-05-03T13:19:24.580
> 
> 标签：jquery, jquery-ui, jqgrid, jqgrid-asp.net, jqgrid-formatter

是否有任何示例显示如何进行虚拟分页？

我想在页面加载时加载 25 条记录，然后在用户单击寻呼机或下一步按钮时将其他 25 条记录加载到现有 25 条记录之上，这样它将返回服务器并带来 50 条记录（前 25 条加下一个 25）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T12:46:53.717

请参阅[演示](http://trirand.com/blog/jqgrid/jqgrid.html)，“3.7 版中的新功能”部分 -> 虚拟滚动

# jquery - Jquery 用列表链接打开所有父 ul

> ID：10432262
> 
> 赞同：0
> 
> 时间：2012-05-03T13:19:37.380
> 
> 标签：jquery

我有一个菜单结构，如：

```
<ul id="menu">
    <li>
        <a href="javascript:void(0)">HR</a>
        <ul>
            <li><a href="javascript:void(0)">Address</a>
                <ul>
                    <li><a href="listcountrymaster.aspx">Country</a></li>
                    <li><a href="listregionmaster.aspx">Region</a></li>
                </ul>
            </li>

            <li><a href="javascript:void(0)">Assets</a>
                <ul>
                    <li><a href="ListVendorMaster.aspx">Vendor</a></li>
                     <li><a href="Listassetmaster.aspx">Asset</a></li>
                </ul>
            </li>
        </ul>
    </li>
</ul> 
```

我想做的是：我想打开`<ul>`链接上方的所有父级`href="ListVendorMaster.aspx"`

我尝试过的是：

```
var openmenu = 'ListVendorMaster.aspx';
$('#menu ul').hide();
if(openmenu)
{
    $('a[href="'+openmenu+'"]').closest('ul').show();
} 
```

有了这个，我只能打开一级父级 ul。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T13:23:02.927

而不是`closest()`使用`parents()`.

jQuery[父母（）](http://api.jquery.com/parents/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T13:29:12.097

```
if(openmenu)
{
    $('a[href="'+openmenu+'"]').parent().parent('ul').show();
} 
```

**[演示](http://jsfiddle.net/SqBYs/)**

# ios - 更新应用程序是否会删除 UIWebView 的 cookie？

> ID：10432265
> 
> 赞同：0
> 
> 时间：2012-05-03T13:19:41.837
> 
> 标签：ios, cookies, uiwebview, google-analytics

我正在构建一个 iOS 应用程序，它使用 a`UIWebView`来显示它的大部分内容。我想使用 Google Analytics (Web) 来跟踪`UIWebView`. 一旦用户更新他们的应用程序，cookie 会被删除吗？我能以某种方式保留它吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T13:33:26.773

它不应该！

但是 NSCookie 默认存储位置没有透露。但是从 IOS4 你可以提供你的存储位置使用

```
– initWithStorageLocation: 
```

方法。文档文件夹在更新中持续存在。因此您可以通过存储在文档文件夹中来确保它持续存在。

# ruby-on-rails - https重定向代理后面的rails应用程序？

> ID：10432266
> 
> 赞同：20
> 
> 时间：2012-05-03T13:19:48.030
> 
> 标签：ruby-on-rails, https, nginx, unicorn, proxypass

我的 nginx.conf 中的服务器声明：

```
 listen       1.2.3.4:443 ssl;
    root /var/www/myapp/current/public;
    ssl on;
    ssl_certificate /etc/nginx-cert/server.crt;
    ssl_certificate_key /etc/nginx-cert/server.key;
    location / {
          proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
          proxy_set_header Host $http_host;
          proxy_redirect off;

          if (!-f $request_filename) {
            proxy_pass http://upstreamy;
            break;
          }
     } 
```

nginx.conf 中的上游声明：

```
upstream upstreamy {
    server unix:/var/www//myapp/shared/sockets/unicorn.sock fail_timeout=0;
} 
```

这很好用，myapp 可以通过[https://somehost访问](https://somehost)

但是该应用程序正在为重定向生成 http url，因此例如在使用[devise 进行身份验证时，/ 被重定向到 http://somehost/user/sign_in](http://somehost/user/sign_in)而不是 https（从 rails 应用程序的角度来看，无论如何都是 http）。

我试过

```
proxy_pass https://upstreamy; 
```

但这只是试图加密 nginx 和运行 rails 应用程序的独角兽之间的流量。

我也尝试过，在 application_helper.rb 中：

```
# http://stackoverflow.com/questions/1662262/rails-redirect-with-https
def url_options
  super
  @_url_options.dup.tap do |options|
  options[:protocol] = Rails.env.production? ? "https://" : "http://"
  options.freeze
end 
```

但它似乎不起作用。

如何解决这个问题？

编辑：所以，目标不是让rails应用程序需要ssl，或者被迫使用ssl；目标是让 Rails 应用程序在重定向时生成 https:// url...（我认为所有其他 url 都是相对的）。

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2012-05-03T13:39:10.333

您需要添加以下行：

> proxy_set_header X-Forwarded-Proto https；

如在

```
location / {
      proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
      proxy_set_header Host $http_host;
      proxy_set_header X-Forwarded-Proto https;
      proxy_redirect off;

      if (!-f $request_filename) {
        proxy_pass http://upstreamy;
        break;
      }
 } 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-05-03T13:46:16.430

您可以将`:protocol => "https"`, 传递给 redirect_to。

您可以通过将以下内容添加到 application.rb 来将其设置为默认值

```
Rails.application.routes.default_url_options[:protocol]= 'https' 
```

参考：[https ://stackoverflow.com/a/6101147/446203](https://stackoverflow.com/a/6101147/446203)

# java - 如何解决 java.net.MalformedURLException：找不到协议：android 中的 9

> ID：10432271
> 
> 赞同：1
> 
> 时间：2012-05-03T13:20:02.303
> 
> 标签：java, android, malformedurlexception

我正在尝试使用以下代码从 url ( [http://www.elifeshopping.com/images/stories/virtuemart/product/thumbnail (2).jpg](http://www.elifeshopping.com/images/stories/virtuemart/product/thumbnail%20%282%29.jpg) )在我的 android 应用程序中加载图像：`BitmapFactory`

```
try {
            // ImageView i = (ImageView)findViewById(R.id.image);
            bitmap = BitmapFactory.decodeStream((InputStream) new URL(url)
                    .getContent());
            i.setImageBitmap(bitmap);
        } catch (MalformedURLException e) {
            e.printStackTrace();
        } catch (IOException e) {
            e.printStackTrace();
        } 
```

我在这里

```
05-03 15:57:13.156: W/System.err(1086): java.net.MalformedURLException: Protocol not found: 9
05-03 15:57:13.167: W/System.err(1086):     at java.net.URL.<init>(URL.java:273)
05-03 15:57:13.167: W/System.err(1086):

at java.net.URL.<init>(URL.java:157). 
```

请帮助告诉我我做错了什么。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-11T10:58:15.887

我用了

```
productImgUrl = productImgUrl.replaceAll(" ", "%20"); 
```

我将所有空格替换为`%20`

它为我工作..

感谢大家的回复

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-03T13:30:55.777

> 请帮助告诉我我做错了什么。

我认为问题在于您`URL`使用无效的 URL 字符串调用构造函数。实际上，异常消息暗示 URL 字符串以“9:”开头。（“协议”组件是 URL 的第一个冒号字符之前的字符序列。）

如果 URL 字符串真的是，这没有多大意义：

“http://www.elifeshopping.com/images/stories/virtuemart/product/thumbnail (2).jpg”

所以我推断它是……事实上……别的东西。在调用构造函数之前将其打印出来`URL`以找出它的真正含义。

（您还应该 %-escape URL 路径中的空格字符......但我怀疑这会解决这个特定的异常化身。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-03T13:28:13.813

将您的网址更改为[http://www.elifeshopping.com/images/stories/virtuemart/product/thumbnail%20%282%29.jpg](http://www.elifeshopping.com/images/stories/virtuemart/product/thumbnail%20%282%29.jpg)

# iphone - 当用户在 UITableView 和 UIScrollView 的文本字段之外点击时隐藏键盘

> ID：10432275
> 
> 赞同：1
> 
> 时间：2012-05-03T13:20:11.760
> 
> 标签：iphone, ios5

我的 UIViewController 层次结构如下

```
UIView
    UIScrollView
        UITableView
            UITableViewCell
                UITextField 
```

UITableView 以编程方式添加到视图控制器。当用户在视图或 UITableView 上点击 UTTextField 外部时，我想隐藏键盘当用户点击其他 UITableView 行时，我正在执行一些方法

我试过了

```
-(void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event 
```

UIScrollView 不发送触摸事件。

我尝试添加点击手势

```
UITapGestureRecognizer *singleTap = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(handleSingleTap:)];
[singleTap setNumberOfTapsRequired:1];

[[self view] addGestureRecognizer:singleTap]; 
```

但使用 TapGesture，隐藏以下事件

```
-(void) tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath 
```

还有其他可能的方法来隐藏键盘吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-25T12:09:27.193

使用代码：[self.view endEditing:YES];

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-03T13:25:30.060

使用 UITextFieldDelegate 和方法

```
– textFieldShouldEndEditing:(UITextField*) txtField
{

[txtField resignKeyPads];
return YES:
} 
```

这也可以由scrollview delgate完成

```
-(void) scrollViewWillBeginDragging:(UIScrollView *)scrollView
{
    //resign all keypads of all textfields use array containing keypads
} 
```

还有一件事是将 UIView 的类更改为 UIControl 并创建一个方法 IBAction 并将 UIControl touchupInside 连接到该 ibaction，它将放弃键盘

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-23T22:19:07.020

如果你想在背景视图上放置一个手势识别器，你需要确保它有一个。

添加

```
self.tableView.backgroundView = [[UIView alloc] initWithFrame:self.tableView.bounds]; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-15T10:28:20.010

当 UITableview 为编辑模式时，UITableView didSelectRowAtIndexPath 不会调用。所以你想创建自定义手势事件来处理同样的事情。

```
 -(UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath{
//cell design code goes here.
 UITapGestureRecognizer *doubleTapGestureRecognizer = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(handleDoubleTap:)];
doubleTapGestureRecognizer.numberOfTapsRequired = 1;
//tapGestureRecognizer.delegate = self;
[cell addGestureRecognizer:doubleTapGestureRecognizer];
 return cell; 
} 
//Handle the click event 
-(void) handleDoubleTap:(UITapGestureRecognizer*)sender{ 
[self.view endEditing:YES]; 
UITableViewCell * cell =(UITableViewCell*) sender.view; 
//get the selected table indexpath. 
NSIndexPath * indexPath= [tblCart indexPathForCell:cell]; //to handle the scroll
tblCart scrollToRowAtIndexPath:indexPath atScrollPosition:UITableViewScrollPositionTop animated:YES]; 
NSLog(@"Comming"); 
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-03T13:29:54.580

如果您仍想使用点击手势，您需要将手势识别器添加到表格背景，如下所示：

```
[tableView.backgroundView addGestureRecognizer:singleTap]; 
```

这将防止隐藏：

```
-(void) tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath 
```

# c++ - 通过与 OPOS Common Controls 1.8 交互的 C++ 代码打印 Code 128 C 条形码

> ID：10432277
> 
> 赞同：0
> 
> 时间：2012-05-03T13:20:14.783
> 
> 标签：c++, printing, barcode, epson, opos

我正在尝试使用 OPOS Common Controls 1.8 通过 Epson TM-H6000III 收据打印机打印 Code 128 C 型条形码（因为 A/B 型对于我的要求来说太宽了）。我的代码是用 C++ 编写的。

通常，我使用以下代码段打印条形码：

```
const LONG PTR_BCS_Code128 = 110;
lOposBarcodeType = PTR_BCS_Code128;
lReturn = m_PosPrinter.PrintBarCode(2,*lpszTextline,lOposBarcodeType,120,5,PTR_BC_CENTER,PTR_BC_TEXT_BELOW); 
```

这里，`*lpszTextline`表示要打印为条形码的数据。

根据在线找到的建议，我尝试进行以下更改以打印 Code 128 C 格式的条形码：

```
const LONG PTR_BCS_Code128_Parsed = 123;
lOposBarcodeType = PTR_BCS_Code128_Parsed;
lReturn = m_PosPrinter.PrintBarCode(2,*lpszTextline,lOposBarcodeType,120,5,PTR_BC_CENTER,PTR_BC_TEXT_BELOW); 
```

并尝试以各种方式格式化条形码数据：

*   前导“{C”
*   前导“{C”，尾随“H”
*   没有。数据中的字符数

但没有一种方法奏效。它总是导致 ResultCodeExtended = 300003 的 OPOS_E_ILLEGAL 错误。我也无法在 Internet 上找到有关扩展代码的更多信息。

在这方面的任何帮助将不胜感激。

提前致谢。普罗苏

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T17:00:20.893

该模式通常由打印机固件根据您尝试打印的数据确定。最好的行为是它尝试尽可能紧凑地打印：如果数据都是数字，则使用模式 C，如果数据是字母等，则使用模式 A，并根据需要从模式切换到模式：17 位数字前 16 位可能打印为模式 C，然后切换到第 17 位的模式 A。

如果您的打印机固件直接处理此问题，您甚至可能无法自己选择模式。或者，某些热敏打印机只能打印模式 C，如果您尝试打印字母字符，则会返回错误。（我们有一些只能打印模式 C 的旧 IBM Suremark 打印机。）

你应该去爱普生看看。

# c++ - 抽象派生类

> ID：10432279
> 
> 赞同：1
> 
> 时间：2012-05-03T13:20:25.333
> 
> 标签：c++, inheritance

我的小组的代码具有以下结构

```
class Base
{
public:
  float some_base_function(); 
};

class Derived : public Base
{
public: 
  float some_other_function(); 
  float yet_another_function(); 
}; 
```

这很简单。问题是我目前正在考虑`Derived`以一些实验方式重新实现。我的想法是这样做：

```
class IDerived : public Base
{ 
public: 
  virtual float some_other_function() = 0; 
  virtual float yet_another_function() = 0; 
}; 
```

然后将旧的`Derived`改为继承自`IDerived`。这种具体->抽象->具体继承结构在C++中是否允许？

更糟糕的是，原来的`Derived`类是在框架内持久化的，所以它必须在内存中保持相同的结构（我希望通过`IDerived`抽象来实现）。新`Derived`的内存布局是否相同？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-03T13:26:14.610

这是合法的，但您似乎不需要这样做。额外继承的意义何在？

此外，`Base`并且`Derived`没有任何虚拟方法，因此通过添加任何方法，您可以 99% 确定内存布局不会相同。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-03T13:22:50.417

是的，这是允许的。但一般做法是避免使用任何类型的具体基类（参见 Scott Meyers' [*More Effective C++*](http://www.amazon.co.uk/More-Effective-Programs-Professional-Computing/dp/020163371X/)的第 33 条）。

试图通过存储其二进制表示来持久化复杂对象必然会导致各种问题。我建议找到更好的机制（序列化等）。

# php - PHP 包含在包含中

> ID：10432280
> 
> 赞同：1
> 
> 时间：2012-05-03T13:20:28.983
> 
> 标签：php, filesystems, include, directory

我有三个 php 文件。“上部”文件是一个网页（我们称之为 Sample.php）。在页面顶部，它执行以下操作：

```
<body>
<?php include("../Top.php"); ?>
//Webpage content
</body> 
```

Top.php 文件是一个存储了菜单和横幅的文件，以便于更改。Top.php 文件有这样一行：

```
<?php include("ConnectToDB.php"); ?> 
```

ConnectToDB.php 是一个包含一些用于连接数据库的 php 代码的文件。

在这里，文件系统的顺序如下：

*   根文件夹
    *   ConnectToDB.php
    *   顶部.php
    *   其他示例.php
    *   文章
        *   示例.php

当我访问 Sample.php 时，语句`include("ConnectToDB.php");`内部出现错误。`include("../Top.php");`但是如果我有`OtherSample`带有`include("Top.php");`语句的文件，我将不会出错，并且 Top.php 和 ConnectToDB.php 都可以正常工作。问题是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-03T14:05:03.863

你可以使用：

`include_once($_SERVER['DOCUMENT_ROOT'].'/RootFolder/whatever.php');`

包含文件，这样你总是有一个包含的绝对路径，它不依赖于它被调用的位置。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-03T13:25:07.300

“include”语句实际上将代码移植到您的页面中。所以请记住，它`include("ConnectToDB.php")`是从 Sample.php 执行的，因此路径是错误的。

正确的代码行是：`include("../RootFolder/ConnectToDB.php")`

where`..`代表整个 dir 结构之后`"localhost/"`或您正在使用的任何内容。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-03T13:25:22.450

路径不对，调用Sample.php，所有路径都属于Sample.php所在的base。PHP 在错误的文件夹中搜索 ConnectToDB... 尝试 ../ConnectToDB.php，就像 Sample.php 文件中一样，这个文件在上面的一个文件夹中...

更好的解决方案，使用绝对路径！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-07-17T07:28:50.893

我遇到了同样的问题。不幸的是，萨姆森的回答不能为我解决问题。你可以试试这个。这对我来说可以。添加文件存在检查，然后像这样在 Top.php 中添加正确的路径

```
<?php
if (file_exists("ConnectToDB.php")) {
    include_once("ConnectToDB.php");
}elseif(file_exists("../ConnectToDB.php")){
    include_once("../ConnectToDB.php");
}
?> 
```

然后您可以访问正确的路径。

# grails - Grails 中的测试服务产生 'org.junit.ComparisonFailure: expected: 但是是： ' 错误

> ID：10432282
> 
> 赞同：-4
> 
> 时间：2012-05-03T13:20:32.770
> 
> 标签：grails, service, integration-testing

我正在通过“Grails in Action”工作，并且在尝试为我的一项服务编写集成测试时遇到了问题。

我意识到我使用的是 Grails 2.0.3，而这本书是在考虑 Grails 1.xx 的情况下编写的。

这是我的服务：

```
package qotd 
```

类报价服务{

```
boolean transactional = true

def getRandomQuote(){

    def allQuotes = Quote.list()
    def randomQuote

    if(allQuotes.size() > 0){
        def randomIndex = new Random().nextInt(allQuotes.size())
        randomQuote = allQuotes[randomIndex]
    }
    else{
        randomQuote = getStaticQuote()
    }
    return randomQuote

}

def getStaticQuote(){
    return new Quote(author: "Anonymous",
    content: "Real Programmers Don't eat quiche")
} 
```

}

下面是我的集成测试，位于'/test/integration/qotd/'

```
package qotd 
```

导入静态 org.junit.Assert.*

导入 org.junit.*

类 QuoteServiceIntegrationTests 扩展 GroovyTestCase {

```
def quoteService

@Before
void setUp() {
}

@After
void tearDown() {
}

@Test
void testStaticQuote() {
    def staticQuote = quoteService.getStaticQuote()
    assertNotNull quoteService
    assertEquals "Ananymous",staticQuote.author
    assertEquals "Real Programmers Don't Eat Quiche",staticQuote.content

} 
```

}

以防万一它可能是相关的，这是我正在测试上述内容的 Quote 类：

包 qtd

类报价{

```
String content
String author
Date created = new Date()

static constraints = {

    author(blank:false)
    content(maxSize:1000,blank:false)

} 
```

}

当我运行测试时，使用“test-app -integration”我得到以下信息：

* * *

运行 1 个集成测试... 1 of 1
失败：testStaticQuote(qotd.QuoteServiceIntegrationTests)
org.junit.ComparisonFailure：预期：An[a]nymous 但
在 org.junit.Assert.assertEquals(Assert. java:125)
在 org.junit.Assert.assertEquals(Assert.java:147)
在 qotd.QuoteServiceIntegrationTests.testStaticQuote(QuoteServiceIntegrationTests.groovy:24)

* * *

任何见解将不胜感激。谢谢你们！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-03T13:22:18.730

你在这一行拼错了“匿名”

`assertEquals "Ananymous",staticQuote.author`

# notepad - 我们如何识别记事本文件？

> ID：10432289
> 
> 赞同：-2
> 
> 时间：2012-05-03T13:20:38.810
> 
> 标签：notepad

我们如何识别在两台计算机上创建的记事本文件，有没有办法获得有关它是在哪台计算机上创建的任何信息。或者它是在 xp 还是 linux 中构建的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T13:23:29.243

如果您右键单击该文件，您应该能够看到该文件的权限和属性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T13:25:35.827

在行尾检查。在 GNU/Linux 下，行以 \n (ascii: 0x0A) 结尾，而在 Miscrosoft W$ndos 下则是 \r\n (ascii: 0x0D 0x0A)。

维基百科：[https ://en.wikipedia.org/wiki/Newline](https://en.wikipedia.org/wiki/Newline)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-03T13:28:51.530

发现这个：[http ://bit.ly/J258Mr](http://bit.ly/J258Mr)

用于识别 word 文档，但某些信息是相关的

> 要查看文档是在哪台计算机上创建的，请在十六进制编辑器中打开 Word 文档并查找“PID_GUID”。后跟一个全局唯一标识符，根据所使用的 Word 版本，该标识符可能包含创建文件的系统的 MAC 地址。
> 
> 检查用户属性（如前所述）是查看原始文件的创建者是谁的好方法......所以，如果文档不是从头开始创建的，而是最初在另一个系统上创建的，那么用户信息将为原始文件。
> 
> 在这种情况下找到“罪魁祸首”的另一种方法是为每台计算机上的每个用户解析 NTUSER.DAT 文件的内容。虽然这听起来工作量很大，但实际上并不是……b/c 您只是在寻找几条信息。具体来说，您对正在使用的 Word 版本的 MRU 键以及RecentDocs 键感兴趣。”

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-03T13:33:02.093

我能想到的一件事是检查文件中的换行符——我假设你的文件确实有多行。如果文件是使用 Windows 生成的，则换行符的特征是回车符和换行符 (CR+LF) 的组合，而简单的换行符 (LF) 将暗示文件是在 Linux 机器中生成的。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-05-03T13:24:36.880

右键单击一个文件-> 详细信息 。您可以看到创建它的计算机名称和日期。

# primefaces - 将 p:orderList 与 p:inplace 结合起来

> ID：10432296
> 
> 赞同：1
> 
> 时间：2012-05-03T13:21:07.487
> 
> 标签：primefaces

我想要一个可以移动/排序并同时可编辑的条目列表。所以我很难`p:orderList`用`p:inplace`这种方式结合：

```
<p:scrollPanel style="width:300px;height:100px" scrollMode="native">
    <p:orderList var="title" value="#{detailModel.afterObject.metadata.getTitlesAsList()}" type="definition">
        <f:facet name="description">
            <p:inplace id="basic" editor="true">
                <p:inputText value="#{title.value}" required="true"/>
            </p:inplace>
        </f:facet>
    </p:orderList>
</p:scrollPanel> 
```

但我收到以下错误：

```
java.lang.NullPointerException
    at org.primefaces.component.orderlist.OrderListRenderer.encodeOptions(OrderListRenderer.java:152)
    at org.primefaces.component.orderlist.OrderListRenderer.encodeList(OrderListRenderer.java:108)
    at org.primefaces.component.orderlist.OrderListRenderer.encodeMarkup(OrderListRenderer.java:79)
    at org.primefaces.component.orderlist.OrderListRenderer.encodeEnd(OrderListRenderer.java:49)
    at javax.faces.component.UIComponentBase.encodeEnd(UIComponentBase.java:875)
    at org.primefaces.renderkit.CoreRenderer.renderChild(CoreRenderer.java:61)
    at org.primefaces.renderkit.CoreRenderer.renderChildren(CoreRenderer.java:45)
    at org.primefaces.component.scrollpanel.ScrollPanelRenderer.encodeMarkup(ScrollPanelRenderer.java:51)
    at org.primefaces.component.scrollpanel.ScrollPanelRenderer.encodeEnd(ScrollPanelRenderer.java:30)
    at javax.faces.component.UIComponentBase.encodeEnd(UIComponentBase.java:875)
    at com.sun.faces.renderkit.html_basic.HtmlBasicRenderer.encodeRecursive(HtmlBasicRenderer.java:312)
    at com.sun.faces.renderkit.html_basic.GroupRenderer.encodeChildren(GroupRenderer.java:105)
    at javax.faces.component.UIComponentBase.encodeChildren(UIComponentBase.java:845)
    at javax.faces.component.UIComponent.encodeAll(UIComponent.java:1757)
    at javax.faces.render.Renderer.encodeChildren(Renderer.java:168)
    at javax.faces.component.UIComponentBase.encodeChildren(UIComponentBase.java:845)
    at javax.faces.component.UIComponent.encodeAll(UIComponent.java:1757)
    at javax.faces.component.UIComponent.encodeAll(UIComponent.java:1760)
    at com.sun.faces.application.view.FaceletViewHandlingStrategy.renderView(FaceletViewHandlingStrategy.java:402)
    at com.sun.faces.application.view.MultiViewHandler.renderView(MultiViewHandler.java:131)
    at javax.faces.application.ViewHandlerWrapper.renderView(ViewHandlerWrapper.java:288)
    at javax.faces.application.ViewHandlerWrapper.renderView(ViewHandlerWrapper.java:288)
    at com.sun.faces.lifecycle.RenderResponsePhase.execute(RenderResponsePhase.java:121)
    at com.sun.faces.lifecycle.Phase.doPhase(Phase.java:101)
    at com.sun.faces.lifecycle.LifecycleImpl.render(LifecycleImpl.java:139)
    at javax.faces.webapp.FacesServlet.service(FacesServlet.java:594)
    at org.apache.catalina.core.StandardWrapper.service(StandardWrapper.java:1542)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:281)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:175)
    at org.apache.catalina.core.StandardPipeline.doInvoke(StandardPipeline.java:655)
    at org.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java:595)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:161)
    at org.apache.catalina.connector.CoyoteAdapter.doService(CoyoteAdapter.java:331)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:231)
    at com.sun.enterprise.v3.services.impl.ContainerMapper$AdapterCallable.call(ContainerMapper.java:317)
    at com.sun.enterprise.v3.services.impl.ContainerMapper.service(ContainerMapper.java:195)
    at com.sun.grizzly.http.ProcessorTask.invokeAdapter(ProcessorTask.java:849)
    at com.sun.grizzly.http.ProcessorTask.doProcess(ProcessorTask.java:746)
    at com.sun.grizzly.http.ProcessorTask.process(ProcessorTask.java:1045)
    at com.sun.grizzly.http.DefaultProtocolFilter.execute(DefaultProtocolFilter.java:228)
    at com.sun.grizzly.DefaultProtocolChain.executeProtocolFilter(DefaultProtocolChain.java:137)
    at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:104)
    at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:90)
    at com.sun.grizzly.http.HttpProtocolChain.execute(HttpProtocolChain.java:79)
    at com.sun.grizzly.ProtocolChainContextTask.doCall(ProtocolChainContextTask.java:54)
    at com.sun.grizzly.SelectionKeyContextTask.call(SelectionKeyContextTask.java:59)
    at com.sun.grizzly.ContextTask.run(ContextTask.java:71)
    at com.sun.grizzly.util.AbstractThreadPool$Worker.doWork(AbstractThreadPool.java:532)
    at com.sun.grizzly.util.AbstractThreadPool$Worker.run(AbstractThreadPool.java:513)
    at java.lang.Thread.run(Thread.java:619) 
```

我错过了什么还是不可能这样做？

如果我改用 :dataList ，我不会收到错误，但它的行为很奇怪；当我单击一个条目时，所有条目都变为可编辑的，但随后它们仍处于编辑模式，没有更多可能...

![滚动、确认和取消没有效果](../Images/c3aa17449ff0de5dc7d87b13b1ed8156.png)

有什么建议么？

**编辑**

这是豆：

```
public class DoiDetailModel extends DetailModel
{
    private List< String >      selectedTitles;
    private List< String >      selectedCreators;

    private String              title;
    private String              creator;

    public DoiDetailModel()
    {
        super();
    }

    public List< String > getSelectedTitles()
    {
        return selectedTitles;
    }

    public void setSelectedTitles( List< String > selectedTitles )
    {
        this.selectedTitles = selectedTitles;
    }
} 
```

# c# - 请求日期时间时自定义时间类被冻结

> ID：10432297
> 
> 赞同：-1
> 
> 时间：2012-05-03T13:21:07.840
> 
> 标签：c#, web-services, asmx

我正在使用一个简单的 ASMX Web 服务，它使用户能够添加评论。对于添加的每条评论，我都会在该行中添加一个时间戳。我遇到的问题是，如果我相隔 1 秒添加两条评论，它们都将具有相同的时间戳。`DateTime.Now`我没有在我的代码中使用，而是使用了一个静态类，这样我就可以轻松地编写单元测试。

这是我的`Time`课：

```
public class Time : IDisposable
{
    public static DateTime Now;

    static Time()
    {
        ResetToDefault();
    }

    public static IDisposable Freeze(DateTime dateTimeToFreeze)
    {
        Now = dateTimeToFreeze;

        return new Time();
    }

    void IDisposable.Dispose()
    {
        ResetToDefault();
    }

    private static void ResetToDefault()
    {
        Now = DateTime.Now;
    }
} 
```

我猜这个类是罪魁祸首，因为如果我用所有实例替换所有实例，`Time.Now`一切`DateTime.Now`都会按预期工作。

是什么导致我的`Time`班级在请求当前时间时冻结而不总是刷新？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T13:50:57.407

本质上，静态的东西是你的问题。由于静态变量（或具有静态构造函数的类）保留在内存中的方式，静态方法也会给多线程的东西带来真正的麻烦。使用名为 Now() 的静态函数而不是静态 var 可能会更好。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-03T14:29:17.187

仅当您调用 Freeze 或 ResetToDefault 方法之一时，您的类中的 public Now 变量才会更新。访问变量本身只会为您获取最后更新的值。相反，DateTime 的 Now 属性总是返回一个反映当前时间的值。

# gwt - 如何在 Contentpanel GWT 中居中 Grid

> ID：10432298
> 
> 赞同：1
> 
> 时间：2012-05-03T13:21:11.807
> 
> 标签：gwt, grid, gxt

我需要有人告诉我如何在内容面板中将网格居中。

我创建了 100% 的内容面板宽度和 50% 的网格宽度，我需要在内容面板内将网格居中。

先感谢您，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T11:46:56.360

您可以使用 CenterLayoutContainer 小部件。示例代码：

```
@Override
public Widget asWidget() {
    //Your panel
    ContentPanel panel = new ContentPanel(); 
    //Сontainer with your content
    CenterLayoutContainer container = new CenterLayoutContainer();
    container.add(yourGrid);
    //Put container into panel
    panel.setWidget(container);
    return panel;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T18:12:28.660

看看`CenterLayoutContainer`：[http ://www.sencha.com/examples/#ExamplePlace:centerlayout](http://www.sencha.com/examples/#ExamplePlace:centerlayout)

这是针对新版本 3.0。较旧的 2.2.5 也有类似的布局类型。

# file - 将 UDP 套接字数据保存到文件中

> ID：10432303
> 
> 赞同：1
> 
> 时间：2012-05-03T13:21:31.683
> 
> 标签：file, sockets, datagram

我有一个发送和接收 UDP 套接字的代码

发送 UDP 代码：

```
public static void main(String args[]) throws Exception
{

    try
      {
          FileOutputStream fo = new FileOutputStream("OUTFILE.txt");
          PrintStream ps = new PrintStream(fo);  
          DatagramSocket Socket = new DatagramSocket(4555);
          byte[] receiveData = new byte[1000000];    
          DatagramPacket receivePacket = new DatagramPacket(receiveData, receiveData.length);

          while(true)
         {  

               receivePacket.setLength(receiveData.length);
               Socket.receive(receivePacket);

                String sentence = new String( receivePacket.getData());

                System.out.printf("RECEIVED: %s  " , new String(receivePacket.getData()));
                ps.println(sentence);
                ps.println();
                ps.close();
                fo.close();

         }

          File file = new File("OUTFILE.txt");
          FileInputStream fis = new FileInputStream(file);
          byte[] fsize = new byte[(int) file.length()];
          int size = fis.read(fsize);
          System.out.println("Received Size = " + size);

      } 
        catch (Exception e) {
          System.err.println(e);
        }

} 
```

}

我想将每个接收到的数据包的值写入文件，然后获取整个文件的大小。在我的代码中，我刚刚收到了写入文件中的第一个接收值。您能否告诉我如何将整个收到的值写入文件中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T13:28:26.280

在第一个循环结束时，您将关闭流，因此无法写入其他行。您需要将`ps.close();`and`fs.close()`调用移到循环之外。此外，你有一个无限循环，它保证从文件中读取的代码不能被调用——你需要有一些机制来确定何时停止循环。

# jpa - JPA @OneToMany 不持久/级联

> ID：10432306
> 
> 赞同：1
> 
> 时间：2012-05-03T13:21:46.783
> 
> 标签：jpa, jsf-2, primefaces, persistence, eclipselink

`UserController`我的Session Scoped Bean 中有以下代码

```
public void addItemToBundle(ItemEntity item){
    //System.out.println(item.getTitle());
    try {
        em.getTransaction().begin();
        UserEntity user = em.find(UserEntity.class, this.username);
        BundleEntity bundle = new BundleEntity();
        BundleEntityPK compositePk = new BundleEntityPK();
        compositePk.setCheckedOutDate(new Date());
        compositePk.setItemId(item.getItemId());
        compositePk.setUsername(user.getUsername());
        bundle.setId(compositePk);
        Set<BundleEntity> bundles = new HashSet<BundleEntity>();
        bundles.add(bundle);
        user.setBundleEntities(bundles);        
        em.persist(user);
        em.flush();
        em.getTransaction().commit();
    } finally {
    }
}

public String addToBundle(){        
    try {
        addItemToBundle(item);
    } catch (NullPointerException e) {
        e.getMessage();
    }

    return null;
} 
```

此代码使用`private ItemEntity item;`由以下 JSF 标记传入的代码：

```
<p:commandLink action="#{itemController.item}">
    <f:setPropertyActionListener target="#{itemController.selectedItem}" value="#{movie}" />
</p:commandLink> 
```

（我在此示例中使用 PrimeFaces）问题是`addItemToBundle`没有在控制台中调用任何 SQL 代码（我启用了 FINE），并且永远不会创建捆绑包或将其添加给用户。我还尝试在我的 UserEntity`em.persist(user)`中`em.flush()`设置 cascadeType ，但没​​有成功。

```
@OneToMany(mappedBy="userEntity",cascade=CascadeType.PERSIST)
private Set<BundleEntity> bundleEntities; 
```

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-03T13:39:10.567

你知道这个：

```
try {
    addItemToBundle(item);
} catch (NullPointerException e) {
    e.getMessage();
} 
```

是非常糟糕的做法，对吧？也许，这就是问题所在，你遇到了 NPE，却从未注意到它。

您至少应该记录异常以了解那里发生了什么（仅出于演示目的，我使用了标准输出，请替换为您最喜欢的日志记录框架）：

```
try {
    addItemToBundle(item);
} catch (NullPointerException e) {
    System.err.println(e.getMessage()); //use logger here
} 
```

# mysql - 如何从另一个表中引用 SQL？

> ID：10432307
> 
> 赞同：0
> 
> 时间：2012-05-03T13:21:51.167
> 
> 标签：mysql, sql

情况是这样的：我有一张桌子供员工使用，另一张桌子供课程使用。当然，我将有一个名为 coordinator 的列，它将引用 staff_id。这是因为有些员工是协调员，有些不是，等等。

Staff_id 是一个 IDENTITY，因此它是自动递增的，我必须确保在课程表中，它不会遵循这个自动递增。

我只是不确定如何为这种情况实施检查约束。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T13:33:19.930

> 我必须确保在课程表中，它不会遵循这个自动增量。

您只是说您不希望`coordinator`课程表中的字段自动递增吗？除非你告诉它，否则它不会。

例如，这两个表可以正常工作：

```
CREATE TABLE Staff
(
    `staff_id` INT NOT NULL AUTO_INCREMENT,
    `name` VARCHAR(64),
    PRIMARY KEY (`staff_id`)
)

CREATE TABLE Courses
(
    `course_id` INT NOT NULL AUTO_INCREMENT,
    `coordinator_id` INT NOT NULL,
    `coursename` VARCHAR(64),
    PRIMARY KEY (`course_id`),
    INDEX `coordid` (`coordinator_id`)
) 
```

当然，正如 GarethD 所说，您可以然后额外添加约束以保证 coordinator_id 正确填写并且相应的记录存在于人员中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-03T13:25:46.043

如果我正确理解您的要求，您可以向表中添加外键约束，以便它引用自身：

```
ALTER TABLE Staff 
ADD CONSTRAINT FK_Staff_Coordinator FOREIGN KEY (Coordinator)
REFERENCES Staff (StaffID) 
```

**附录**

我想我误解了你的要求，我错过了关于课程表的部分。所以现在我认为课程表需要链接回人员表，在这种情况下，命令将是：

```
ALTER TABLE Course
ADD CONSTRAINT FK_Course_Coordinator FOREIGN KEY (Coordinator)
REFERENCES Staff (StaffID) 
```

您当然可以自由地为约束实现自己的命名约定。

# cakephp - CakePHP 2.1 登录用户在视图中

> ID：10432316
> 
> 赞同：0
> 
> 时间：2012-05-03T13:22:18.187
> 
> 标签：cakephp, cakephp-2.0

我正在使用 cakephp 2.1。所以我正在寻找在视图中获取登录用户。如何在视图中获取登录用户。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T13:33:13.060

你可以看看这里：

[http://book.cakephp.org/2.0/en/core-libraries/components/authentication.html#accessing-the-logged-in-user](http://book.cakephp.org/2.0/en/core-libraries/components/authentication.html#accessing-the-logged-in-user)

或在这里：

[http://api20.cakephp.org/class/auth-component#method-AuthComponentuser](http://api20.cakephp.org/class/auth-component#method-AuthComponentuser)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T16:03:31.190

`$this->Auth->loggedIn()`在你看来试试这个。如果它不起作用，那么您必须使用 `$this->Auth->user('id')`.

例如;

```
if($this->Auth->loggedIn()) {
  // then do something
} 
```

**或者：**

```
if($this->Auth->user('id')) {
  // then do something
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-03T16:13:01.290

如果要向所有视图显示当前登录的用户详细信息。最好将逻辑放在布局文件中，而不是将代码放在所有视图文件中。

要获取当前登录的用户详细信息，您可以使用`$this->Auth->user`

假设您想显示当前登录的用户名，您可以使用`echo $this->Auth->user('user_name');`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-04T08:39:48.783

如果您使用的是 Auth 组件，则用户数据也存储在 Session 的“Auth.User”键中。因此，在视图中可以使用**SessionHelper** ::read() 方法访问它：

```
$user = $this->Session->read("Auth.User"); 
```

Auth.User 包含来自数据库的用户记录。不要忘记在控制器的 $helpers 数组中包含会话助手。

# spring-mvc - Spring portlet MVC 3.1 如何确定使用多个控制器呈现哪个带注释的方法？

> ID：10432321
> 
> 赞同：4
> 
> 时间：2012-05-03T13:22:38.527
> 
> 标签：spring-mvc, portlet, spring-portlet-mvc

在使用多个控制器类和 DefaultAnnotationHandlerMapping 时，我们在使用 Spring Portlet MVC 3.1 时遇到了问题。

**背景**

*   我们使用 Spring Portlet MVC 3.1 和 Render & Action 阶段的注释
*   我们正在使用 JBoss EPP 5.1.1

**问题**

*   对于带有参数的 Portlet 呈现请求，Portlet 中呈现了不正确的页面

**原因**

*   Spring Portlet MVC 使用的 @RenderMapping 方法与具有正确注释的预期方法不同

**技术分析**

1.  我们所有的控制器都包含@RenderMapping 和@ActionMapping 注释，并且都具有“params”参数，以确保根据我们的portlet URL 中的参数集调用预期的方法。对于默认渲染，我们有一个方法，它有一个没有“params”参数的@RenderMapping 注解，当请求不包含参数时，我们使用它来渲染一个空白的JSP。

2.  根据对本书第 7 章和第 8 章的阅读，我们了解到 Dispatcher Portlet 尝试为传入请求获取适当的处理程序映射，并将其发送到配置的控制器 bean 中的适当方法。我们的假设是，我们的默认 @RenderMapping 注释（没有参数）只有在它检查控制器中没有其他方法与特定请求参数匹配的注释后才会被调用。

3.  然而，我们经过调试发现这个假设是不正确的。DefaultAnnotationHandlerMapping 似乎以某种预定义的顺序遍历 Controller bean 中可用的注释列表。这意味着，如果具有默认 @RenderMapping 注释（没有参数）的控制器 bean 出现在列表之前，则将调用具有默认 @RenderMapping 注释（没有参数）的方法，而不是列表下方的正确方法.

**显示的错误**

我们在 Windows 环境下开发并部署到 Linux 环境。在 Windows 中，我们看到处理程序按字母顺序循环通过控制器 bean，因此我们最初通过在控制器中添加不带参数的 @RenderMapping 注释方法来解决我们的问题，其中 bean 名称最接近“Z”。

然而，在 Linux 中，控制器 bean 的检测顺序似乎有所不同。我附上了下面的 Spring 日志以突出显示该问题。无参数 @RenderMapping 注释在 YourDetailsController 中，正如您在 Windows 日志中看到的那样，它出现在列表的最后，而在 Linux 中则没有。这意味着，如果我们尝试访问出现在列表中 YourDetailsController 之后的控制器之一，我们最终总是会点击 YourDetailsController 中的 no params 注释。

**问题**

1.  我们的假设不正确吗？
2.  我们的诊断是否反映了预期的行为？还是 Spring Portlet MVC 的错误？
3.  是否有其他方法可以扫描注释以形成处理程序映射 bean 列表？
4.  使用 xml 配置（而不是注释）会解决我们的问题吗？
5.  我们能否定义多个处理程序映射和顺序，以便默认处理程序映射是调度程序 portlet 使用的最后一个处理程序映射？

您对此问题的任何想法或建议将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T13:46:42.467

麦克风。我遇到了完全相同的问题。我正在使用 JDK 7、Spring 3.1.1.RELEASE 和 Hibernate 4.1.3.Final。我正在 Linux (Fedora) 上开发并在 Linux (Fedora 和 SL) 上进行部署。

我被卡住了，因为我确定各个部分（控制器）一次都在工作，但是对渲染请求的调用被随机忽略了。有时改变一些东西会使事情在渲染请求上再次工作，但他们从来没有一起工作过。

正如 Walter 建议的那样，当我在其自己的包中隔离仅包含默认呈现请求的控制器时，仅在其中留下默认呈现请求（在我有删除/查看请求之前）并在 portlet 的 XML 配置中分离控制器的扫描两个在其他人之后扫描默认控制器，突然一切都像魅力一样。

看看这个错误是否在 Spring 跟踪器中会很有趣......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T23:03:53.103

我最近被这个问题所困扰，所以我想我会根据我的发现添加一些额外的信息。

在我的情况下，我的默认控制器（带有空`@Controller`和`@ActionMapping`注释）总是被调用，即使有更具体的注释控制器/动作（例如`@Controller(XXXX)`or `@ActionMapping(YYYY)`）。让我的案例更奇怪的是它在 Tomcat/Pluto 中运行良好，但在 WAS/WebSphere Portal Server 中却不行。

事实证明，Spring 3.1.x 中引入了一个错误，这意味着注释处理程序没有正确排序。请参阅[https://jira.springsource.org/browse/SPR-9303](https://jira.springsource.org/browse/SPR-9303)和 [https://jira.springsource.org/browse/SPR-9605](https://jira.springsource.org/browse/SPR-9605)。显然，这在 3.1.3 中已修复。

对我来说最大的谜团是为什么它在 Tomcat 而不是 WebSphere 中工作？根本原因是 Pluto (2.0.3) 使用 Sun JRE 1.6.0，而 WebSphere 使用 IBM JRE 1.5.0。这两个 JRE 具有不同的实现，`Collections.sort()`当对报告它们相等的数组元素进行排序时（即`compareTo()`函数的结果），这会导致不同的输出顺序。由于上面的 Spring 错误（它报告一些处理程序不应该相等），这意味着处理程序的顺序在两个 JRE 之间是不确定的。

因此，在我的例子中，IBM JRE 恰好将默认控制器作为第一个元素，因此每次都会被选中。我们可以影响“相等”处理程序的顺序的一种方法（其中“相等”是由于 Spring 错误而产生的一个狡猾的定义）是更改 Spring 找到它们的顺序 - 这会影响输入到排序中的顺序常规。这就是为什么根据上述帖子，将控制器从组件扫描移动到在 XML 配置中明确列出的原因。在我的情况下，将我的默认控制器包设置为组件扫描中的最后一个条目就足够了。我不需要将它移到 XML 配置中。

无论如何，希望这有助于更多地了解正在发生的事情。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-19T09:34:20.880

我们使用 context:component-scan（在 nnn-portlet.xml 中）来划分控制器在 portlet 之间的默认呈现映射。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-07T15:30:00.577

迈克，您的描述与我们遇到的问题完全相同。在 Windows 中，我们实现了相同的解决方法（在控制器前面加上 Z 的默认渲染）并解决了这个问题。Linux 环境中的相同代码与您的问题相同。看起来这是一个时间戳问题排序，因为没有被选中的方法，但走这条路没有运气。

我认为这是一个弹簧错误。

我认为这里的方法还可以——我们希望不同的控制器处理不同的功能，但我们需要一个默认控制器。

我现在只是找到了一种解决方法。我将具有默认渲染方法的控制器移动到不同的包中，因此它不包含在组件扫描中。

我在组件扫描行之后手动添加了该控制器（在 portletname-portlet.xml 文件中），因此它将它添加为最后一个控制器。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-04T09:30:28.960

从 Ashish Sarin 收到的回复：

> 嗨迈克，
> 
> 虽然我没有测试过您在项目中遵循的完全相同的场景，但我可以说它看起来不像定义控制器的正确方法。如果您的控制器仅使用@RenderMapping 和@ActionMapping 注释，那么开发人员可能很难找出负责处理传入portlet 请求的确切控制器。我建议您在类型级别使用@RequestMapping 将portlet 请求映射到特定控制器，并使用请求参数将请求进一步缩小到控制器中的特定方法。
> 
> 如果您仍然遇到这种方法的任何问题，请告诉我。

# ios - 按下时重绘 UIButton

> ID：10432328
> 
> 赞同：2
> 
> 时间：2012-05-03T13:22:57.480
> 
> 标签：ios

我正在使用paintcodeapp 来绘制我的自定义按钮。我画了两种不同的状态“按下”和“正常”

当按钮处于“按下状态”时，我需要调用 setNeedsDisplay

`self.highlighted`然后我在`drawRect:`方法中使用分派两个抽奖

我试过：

```
- (id)initWithFrame:(CGRect)frame
{
    self = [super initWithFrame:frame];
    if (self) {
        [self addTarget:self action:@selector(didDetectEvent:) forControlEvents:UIControlEventTouchDown];
        [self addTarget:self action:@selector(didDetectEvent:) forControlEvents:UIControlEventTouchUpInside];
        [self addTarget:self action:@selector(didDetectEvent:) forControlEvents:UIControlStateNormal];

    }
    return self;
}

-(void)didDetectEvent:(id)sender {
    [self setNeedsDisplay];
} 
```

但它不起作用。有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-03-12T20:39:41.857

我遇到了同样的问题（使用 Swift）。我需要设置背景并让它立即显示，即使它会减慢用户的 UI。解决方案是确保它在主线程上完成。

```
dispatch_async(dispatch_get_main_queue(), {
   testButton?.backgroundColor = .greenColor()
}) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T13:47:05.147

```
- (id)initWithFrame:(CGRect)frame
{
    self = [super initWithFrame:frame];
    if (self) {

        [self addTarget:self action:@selector(didDetectEvent:) forControlEvents:UIControlEventAllTouchEvents];
    }
}

  -(void)didDetectEvent:(id)sender {
        [self setNeedsDisplay];
        [self performSelector:@selector(setNeedsDisplay) withObject:nil afterDelay:0.2];
} 
```

这行得通。我不完全相信这是最好的解决方案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-03T13:26:50.740

尝试：

```
-(void)didDetectEvent:(id)sender {
    UIButton *btn = (UIButton *)sender;
    [btn setNeedsDisplay];
} 
```

我假设它是在具有您要管理的按钮的通用视图中实现的。

# android - android可绘制名称

> ID：10432342
> 
> 赞同：1
> 
> 时间：2012-05-03T13:23:44.257
> 
> 标签：android, drawable

我有一个我正在设计的应用程序，昨天花了大约一个小时试图弄清楚为什么我的一个可绘制对象不会出现。我终于能够通过重命名它来显示它。它的文件名 alc.png 不会显示，我将它重命名为 alcs.png 它工作得很好，但是 alc1、alc2 和 alc3 不起作用。alc 是 android 中的保留名称，如果是，它是什么？我知道这不是长度问题，因为我有几个名称较小的可绘制文件，即 hs.png。

只是好奇它让我发疯。

# java - HttpUrlConnection 致命错误

> ID：10432344
> 
> 赞同：2
> 
> 时间：2012-05-03T13:23:45.830
> 
> 标签：java, android, http

我在使用 HttpUrlConnection 类时遇到了 Android 问题，我的方法是这样的：

```
public InputStream test() {
        URL url = null;
        try {
            url = new URL("http://www.android.com/");
        } catch (MalformedURLException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
       HttpURLConnection urlConnection = null;
    try {
        urlConnection = (HttpURLConnection) url.openConnection();
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
    InputStream in= null;

       try {
         in = new BufferedInputStream(urlConnection.getInputStream());
       }catch(IOException e){
           e.printStackTrace();
       }
        finally {
         urlConnection.disconnect();
       }
return in;
} 
```

当我执行此方法时，android会生成此异常：

> 05-03 15:15:19.116: W/System.err(1085): android.os.NetworkOnMainThreadException 05-03 15:15:19.116: W/System.err(1085): 在 android.os.StrictMode$AndroidBlockGuardPolicy。 onNetwork(StrictMode.java:1099) 05-03 15:15:19.116: W/System.err(1085): 在 java.net.InetAddress.lookupHostByName(InetAddress.java:391) 05-03 15:15:19.116: W/System.err(1085): 在 java.net.InetAddress.getAllByNameImpl(InetAddress.java:242) 05-03 15:15:19.116: W/System.err(1085): 在 java.net.InetAddress.getAllByName (InetAddress.java:220) 05-03 15:15:19.126: W/System.err(1085): 在 libcore.net.http.HttpConnection.(HttpConnection.java:71) 05-03 15:15:19.126: W/System.err(1085): 在 libcore.net.http.HttpConnection.(HttpConnection.java:50) 05-03 15:15:19.126: W/System.err(1085): 在 libcore.net.http。 HttpConnection$Address.connect(HttpConnection.java:351) 05-03 15:15:19.126: W/System.err(1085): 在 libcore.net.http.HttpConnectionPool.get(HttpConnectionPool.java:86) 05-03 15:15:19.126: W/System。错误（1085）：在 libcore.net.http.HttpConnection.connect（HttpConnection.java:128）05-03 15:15:19.126：W/System.err（1085）：在 libcore.net.http.HttpEngine.openSocketConnection (HttpEngine.java:308) 05-03 15:15:19.126: W/System.err(1085): 在 libcore.net.http.HttpEngine.connect(HttpEngine.java:303) 05-03 15:15:19.126 : W/System.err(1085): 在 libcore.net.http.HttpEngine.sendSocketRequest(HttpEngine.java:282) 05-03 15:15:19.126: W/System.err(1085): 在 libcore.net。 http.HttpEngine.sendRequest(HttpEngine.java:232) 05-03 15:15:19.126: W/System.err(1085): 在 libcore.net.http.HttpURLConnectionImpl.getResponse(HttpURLConnectionImpl.java:273) 05-03 15：15：19.136：W/System.err（1085）：在 libcore.net.http.HttpURLConnectionImpl.getInputStream(HttpURLConnectionImpl.java:168) 05-03 15:15:19.136: W/System.err(1085): 在 com.BertacchiMazzoni.HTTPClient.HttpClientTutorial.test(HttpClientTutorial.java: 35) 05-03 15:15:19.136: W/System.err(1085): 在 com.BertacchiMazzoni.HTTPClient.HTTPClientActivity.onCreate(HTTPClientActivity.java:18) 05-03 15:15:19.136: W/System。错误（1085）：在 android.app.Activity.performCreate（Activity.java:4465）05-03 15:15:19.136：W/System.err（1085）：在 android.app.Instrumentation.callActivityOnCreate（Instrumentation.java :1049) 05-03 15:15:19.136: W/System.err(1085): 在 android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1920) 05-03 15:15:19.136: W/System.err (1085): 在 android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1981) 05-03 15:15:19。136: W/System.err(1085): 在 android.app.ActivityThread.access$600(ActivityThread.java:123) 05-03 15:15:19.136: W/System.err(1085): 在 android.app。 ActivityThread$H.handleMessage(ActivityThread.java:1147) 05-03 15:15:19.146: W/System.err(1085): 在 android.os.Handler.dispatchMessage(Handler.java:99) 05-03 15: 15:19.146: W/System.err(1085): 在 android.os.Looper.loop(Looper.java:137) 05-03 15:15:19.146: W/System.err(1085): 在 android.app .ActivityThread.main(ActivityThread.java:4424) 05-03 15:15:19.146: W/System.err(1085): 在 java.lang.reflect.Method.invokeNative(Native Method) 05-03 15:15: 19.146: W/System.err(1085): 在 java.lang.reflect.Method.invoke(Method.java:511) 05-03 15:15:19.146: W/System.err(1085): 在 com.android .internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784) 05-03 15:15:19.146:W/System.err(1085): 在 com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551) 05-03 15:15:19.146: W/System.err(1085): 在 dalvik.system .NativeStart.main（本机方法）

我可以解决这个问题吗？错误在哪里？

非常感谢！问候！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T13:30:03.267

将您的代码移动到后台线程。

```
new Thread(){
     public void run(){
          test();
     }
}.start(); 
```

当操作系统版本为 ICS 时，我们无法在 Main UI Thread 中访问网络，它可以保护您的应用程序在进行长时间操作时不会阻塞 UI。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-03T13:30:11.317

一个快速的谷歌异常会带你到这里：http: [//developer.android.com/reference/android/os/NetworkOnMainThreadException.html](http://developer.android.com/reference/android/os/NetworkOnMainThreadException.html)

其中指出：

> 当应用程序尝试在其主线程上执行网络操作时引发的异常。
> 
> 这仅针对面向 Honeycomb SDK 或更高版本的应用程序抛出。允许以早期 SDK 版本为目标的应用程序在其主事件循环线程上进行网络连接，但非常不鼓励这样做。请参阅文档设计响应性。

所以基本上我猜你是在主应用程序线程上执行你的网络操作；对于 Honeycomb 及更高版本，您似乎无法做到这一点。无论如何，这是一个坏主意，因为它可能会使您的应用程序挂起并显得无响应。您需要使用另一个线程或处理程序或 asynctask 或 Loader 来执行操作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-03T13:30:19.070

您的日志显示“android.os.NetworkOnMainThreadException”。这意味着您正在尝试在主线程上运行此网络代码，这不是一件好事，因为网络访问往往会阻塞很长时间。因此，较新的 Android 版本对此有保护，并阻止您这样做。

要解决它，请在另一个线程中运行此代码。例如，使用 AsyncTask 或纯 java 线程。

# c++ - opencv - cvCaptureFromCAM(CV_CAP_DSHOW) 捕获空白帧

> ID：10432345
> 
> 赞同：0
> 
> 时间：2012-05-03T13:23:53.397
> 
> 标签：c++, opencv, screen

我在 Windows 中使用 OpenCV 2.1 和 Visual Studio 2008。我正在尝试从 CCD 相机中获取帧并希望在 Windows 上显示。相机为 PAL 格式。相机正在检测但显示空白的灰色屏幕。

我发现了许多与空白屏幕相关的帖子，但在我的情况下没有一个可以工作。所以发布我发布这个问题。

下面是我的代码：

```
#include "stdafx.h"
#include "cv.h"
#include "cxcore.h"
#include "highgui.h"
#include <iostream>

int main(int argc, char* argv[])
{   
    cvNamedWindow( "mywindow", CV_WINDOW_AUTOSIZE );

    CvCapture* capture = cvCaptureFromCAM(CV_CAP_DSHOW);

    if ( !capture ) {
        fprintf( stderr, "ERROR: capture is NULL \n" );
        getchar();
        return -1;
    }

    while ( 1 ) {
        IplImage* frame = cvQueryFrame( capture );

        if ( !frame ) {
            fprintf( stderr, "ERROR: frame is null...\n" );
            getchar();
            break;
        }
        else
        {
            fprintf( stderr, "Size of camera frame %d X %d\n",frame->width,frame->height );
        }

        cvShowImage( "mywindow", frame );

        if ( (cvWaitKey(10) & 255) == 27 ) break;
    }

    // Release the capture device housekeeping
    cvReleaseCapture( &capture );
    cvDestroyWindow("mywindow");

    return 0;
} 
```

以上代码返回帧大小 320 X 240 但空白屏幕。

带有代码的 USB 网络摄像头的代码工作正常`CvCapture* capture = cvCaptureFromCAM(1);`

我在我的板上使用 Avermedia Gold 相机卡。那么我是否需要 SDK 才能使用这款相机，或者是否有任何选项可以使用 CCD 相机？

驱动程序已正确安装并检查 EzCaptureVC 应用程序。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T19:56:16.937

OpenCV 需要支持您的相机，否则无法保证它可以正常工作：检查[兼容性列表](http://opencv.willowgarage.com/wiki/Welcome/OS)。

2.1也是非常过时的。我建议您使用 2.3.1 再试一次，因为这方面已经有了一些改进。

# c# - C# 使用属性添加 const 字段

> ID：10432352
> 
> 赞同：0
> 
> 时间：2012-05-03T13:24:31.303
> 
> 标签：c#, .net-assembly

我们有“SomeClass”类：

```
namespace Namespace
{
    class SomeClass
    {
        // something
    }
} 
```

和属性“SomeAttribute”：

```
class SomeAttribute : System.Attribute { } 
```

**任务：**通过 SomeAttribute 'public const string Type' 字段添加到所有类市场。修改后的类必须如下：

```
class SomeClass
{
    // something
    public const string Type = @"Namespace.SomeClass";
} 
```

**升级版：**

我正在使用以下方法进行消息事务：

```
class Manager
{
    // message has 3 parts:
    // string message = String.Format("{0}{1}{2}",
    //     typeof(SomeClass).ToString(),
    //     splitter,
    //     Manager.Serialize(someClassObj)
    // )
    public static string GetType(string message) { /* some code */ }
    public static string Serialize(SomeClass message) { /* XML serialization */ }
    public static SomeClass Deserialize(string message) { /* deserialization */ }
}

class Logic 
{
    public void ProcessMessage(string message)
    {
        switch (Manager.GetType(message))
        {
            case SomeClass.Type:
                {
                    SomeClass msg = Manager.Deserialize(message) as SomeClass;
                    // send message to binded objects
                }
                break;
            case ClassInheritedFromSomeClass.Type:
                {
                    // the same
                }
                break;
            // etc.
        }
    }
} 
```

**更新 2：**

更多关于消息。此时我正在使用下一种方法：

```
public class BaseMessage
{
    public const string Type = @"Messages.BaseMessage";
}

public class LoginMessage : BaseMessage
{
    public new const string Type = @"Messages.Client.LoginMessage";

    public string Nickname { get; set; }
    public string Password { get; set; }
} 
```

**结论**

我认为最好的情况是像这样修改 Manger：

```
class Manager
{
    // create event table

    public Action<BaseMessage> this[string eventName]
    {
        get 
        {
            if (!m_eventTable.ContainsKey(eventName))
            {
                m_eventTable.Add(eventName, new Action<BaseMessage>(message => { }));
            }
            return m_eventTable[eventName]; 
        }
        set
        {
            m_eventTable[eventName] = value;
        }
    }

    public void Send(BaseMessage message, string messageName)
    {
        if (m_eventTable.ContainsKey(messageName) && this[messageName].Method != null)
        {
            this[messageName].Invoke(message);
        }
    }

    private Dictionary<string, Action<BaseMessage>> m_eventTable = new Dictionary<string, Action<BaseMessage>>();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T13:54:05.507

使用`switch`with`GetType`是实现多态性的错误方法，因为它只检查派生最多的类（破坏可扩展性）。

在您希望`Manager`对行为负责的特定情况下，您可以使用`dynamic`关键字和重载方法。但这将再次违反 SOLID，因为它不开放用于扩展。

不要以这种方式违反 SOLID，而是尝试找到一种方法来使用虚拟方法来执行特定于类型的操作。

# c# - 从字典中检索原始密钥

> ID：10432353
> 
> 赞同：3
> 
> 时间：2012-05-03T13:24:35.907
> 
> 标签：c#, dictionary

有没有办法从 C# 字典中直接访问原始键对象（其中键是引用类型）？我在另一个网站（[http://www.pcreview.co.uk/forums/get-original-key-object-dictionary-t3351718.html](http://www.pcreview.co.uk/forums/get-original-key-object-dictionary-t3351718.html)）上看到过这个问题，因为大多数响应者不明白为什么会这样是一个合理的问题/不是不良底层设计的症状，我在下面给出背景细节。

到目前为止，我的解决方法是：

(a) 遍历检查是否相等的键，这是 O(n) 复杂度:(

(b) 维护一个额外的实习生池（例如，另一个将键映射到自己的字典）。这使我们达到 O(1) 复杂性，但需要额外的内存，将项目添加到字典时需要额外的工作，未能正确协调的风险......这些都不是致命的，但它并不理想，如果Dictionary<> 提供了一种按键检索键的方法。

具体来说，我有一个表示状态图的 Dictionary<State, List<State>>：每个键表示状态机的状态，关联的值是可从那里直接到达的相邻状态列表。例如，状态可以表示棋盘的配置，而相邻状态将是单步可到达的配置。

我从初始状态开始填充状态图，构建邻居列表，然后递归调用每个邻居的填充例程。在每个阶段，算法都会检查邻居状态是否已经是字典中的键（否则我们永远不会完成）。State 是一个引用类型（即一个类），具有重写的 GetHashCode 和 Equals 方法。

从语义上讲，这很好用。但是现在邻居列表是状态的不同副本而不是原始副本，所以如果有 N 个状态，每个状态平均有 M 个邻居，我们在内存中有 NxM 个状态对象，而我们真的只想要 N 个状态对象和 NxM对 State 对象的引用。除了增加内存占用之外，它还会使相等测试变慢，因为您无法从 Equals() 中的引用相等快捷方式中受益。

从评论看来问题还不清楚，所以这里有一些伪代码可以更好地说明它：

```
public class StateGraphExample
{
    public static void Main()
    {
        State initialState = State.GetInitialState();
        var graph = new Dictionary<State, List<State>>();
        BuildGraph(initialState, graph);
    }

    public static void BuildGraph(State state, Dictionary<State, List<State>> graph)
    {
        var neighbours = new List<State>();

        foreach (State.Move move in state.GetValidMoves())
            neighbours.Add(state.ApplyMove(move));

        graph[state] = neighbours;

        foreach (State neighbour in neighbours)
            if (!graph.ContainsKey(neighbour))
                BuildGraph(neighbour, graph);
    }

    public class State
    {
        //Lots of data members here...

        public static State GetInitialState()
        { /* Return State object representing initial state... */ }

        public class Move
        { /* Representation of a move that takes us from one State to another... */ }

        public List<State.Move> GetValidMoves()
        { /* Return valid moves from this State object... */ }

        public State ApplyMove(State.Move move)
        { /* Clones this State object, applies move to it and returns the result... */ }

        public override int GetHashCode()
        { /* Compute hash... */ }

        public override bool Equals(object obj)
        { /* Test equality... */ }

        private State Clone()
        { /* Clone self... */ }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T13:35:51.233

您可以创建一个“池” `State`，然后在创建时使用现有的（如果已创建）。样本：

```
class Sample : IEquatable<Sample>
{
  private int _params;
  private Sample(int params) { _params = params; }

  private static HashSet<Sample> _samples = new HashSet<Sample>();

  public static GetSample(int params)
  {
    Sample s = new Sample(params);
    if (!_samples.ContainsKey(s))
      _samples.Add(s);

    return _samples[s];
  }
} 
```

# php - 我想查询连接的记录（左连接）并将它们放入 PhP 中的数组结构中，如何？

> ID：10432355
> 
> 赞同：0
> 
> 时间：2012-05-03T13:24:37.860
> 
> 标签：php, mysql, join

几乎类似这样：[PHP/mySQL - 如何将嵌套行提取到多维数组中](https://stackoverflow.com/questions/357122/php-mysql-how-to-fetch-nested-rows-into-multidimensinal-array)

```
SELECT products.NAME, products_prices.PRICE FROM products LEFT JOIN products_prices ON products.ID = products_prices.PROD_ID 
```

这通常会导致：

```
NAME,   PRICE
window, 1000
window, 1200
mouse,  1400 
```

因为有两个价格，`window`可能根本没有价格。我希望它产生一个数组：

```
$arr = array(
             array('NAME' => 'window', 'price' => array(
                                                        array('PRICE' => 1000),
                                                        array('PRICE' => 1200)
                                                       ),
             array('NAME' => 'mouse', 'price' => array(
                                                       array('PRICE' => 1400)
                                                      )
            ); 
```

因此，连接的记录将是子数组。另一个问题可以有多个连接，但只有 LEFT JOIN-s。如何很好地做到这一点？链接的示例将连接的列放在主要部分，我不想这样做。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T13:49:20.470

它看起来像这样：

```
 $dataStore = array();
 foreach ($recordSet as $record){
     $dataStore[$record['NAME']]['prices'][] = $record['PRICE'];
 } 
```

仅当您确定单个产品名称可以有多个价格时，这才有效。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-03T13:58:54.037

```
//array you get from mysql:
$arrMysql = array(
             array('NAME' => 'window', 'PRICE' => 1000),
             array('NAME' => 'window', 'PRICE' => 1200),
             array('NAME' => 'mouse', 'PRICE' => 1400)
            );

$arr = array();
foreach ($arrMysql as $row) {
    if (isset($arr[$row['NAME']])) {
        if (isset($arr[$row['NAME']]['price'])) {
            $arr[$row['NAME']]['price'].push(array('PRICE' => $row['PRICE']));
        } else {
            $arr[$row['NAME']]['price'] = array(array('PRICE' => $arr[$row['NAME']]['PRICE']), array('PRICE' => $row['PRICE']));
            unset($arr[$row['NAME']]['PRICE']);
        }
    }
    else {
        $arr[$row['NAME']] = $row;
    }
}

//you get:

$arr = array(
             'window' => array('NAME' => 'window', 'price' => array(
                                                        array('PRICE' => 1000),
                                                        array('PRICE' => 1200)
                                                       ),
             'mouse' => array('NAME' => 'mouse', 'price' => array(
                                                       array('PRICE' => 1400)
                                                      )
            );

// and if you want your array:
$arr = array_values($arr); 
```

# android - 无法在新活动中打开图像

> ID：10432357
> 
> 赞同：2
> 
> 时间：2012-05-03T13:24:43.913
> 
> 标签：android, imageview, android-imageview

需要帮忙。这可能很奇怪。

第一个活动有列表视图（如lazyadapter），一旦我单击列表，它就会打开一个带有描述、标题和图像的新活动。但我无法显示图像。不知道怎么寄。。。

```
public void onItemClick(AdapterView<?> parent, View view,
                int position, long id) {

String title = ((TextView) view.findViewById(R.id.title)).getText().toString();
String description = ((TextView) view.findViewById(R.id.artist)).getText().toString();
String pdate = ((TextView)view.findViewById(R.id.pdate)).getText().toString();
//ImageView thumb = ((ImageView) view.findViewById(R.id.list_image));

// Starting new intent
Intent in = new Intent(getApplicationContext(), SingleMenuItemActivity.class);
    in.putExtra(KEY_PLAYER, title);
    in.putExtra(KEY_THUMB_URL, R.id.list_image);
    in.putExtra(KEY_TRANSACTION, description);
    in.putExtra(KEY_PUBDATE, pdate);
    startActivity(in);  } 
```

我的第二个活动

```
 public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    Intent in = getIntent();

    String title = in.getStringExtra(KEY_PLAYER);
    String description = in.getStringExtra(KEY_TEXT);
    String pdate = in.getStringExtra(KEY_PUBDATE);
    String thumb_image = in.getStringExtra(KEY_THUMB_URL);

    TextView lblName = (TextView) findViewById(R.id.name_label);
    TextView lblDesc = (TextView) findViewById(R.id.description_label);
    TextView lblPdate = (TextView) findViewById(R.id.pubdate_label);
    ImageView thumb = (ImageView) findViewById(R.id.thumb_label);

    lblName.setText(title);
    thumb.setImageURI(Uri.parse(thumb_image));
    lblDesc.setText(description);
    lblPdate.setText(pdate); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T13:33:41.703

```
int thumb_image = in.getIntExtra(KEY_THUMB_URL);
thumb.setImageResource(thumb_image); 
```

您正在将资源 ID（整数）传递给您的意图。`getIntExtra`当您收到该意图时，您使用which 将其提取出来，这将为您提供`R.id.list_image`. 然后你可以调用`setImageResource`你的 ImageView 来设置图像。

当你传入一个整数时调用`getStringExtra`将导致一个空字符串。

# jquery-templates - 从外部上下文获取属性数据

> ID：10432358
> 
> 赞同：1
> 
> 时间：2012-05-03T13:24:48.310
> 
> 标签：jquery-templates, jsrender

我正在尝试从嵌套模板访问父数据。

根据这个[https://github.com/BorisMoore/jsrender/issues/34](https://github.com/BorisMoore/jsrender/issues/34)，我正在尝试做类似的事情，但我收到*错误：data.parent is undefined。*

在我的“主”模板中，我有声明

```
{{for Rooms  tmpl="#RoomTmpl" layout=true /}} 
```

并在*#RoomTmpl*

```
 <script id="RoomTmpl" type="text/x-jsrender">
     {{:parent.data.Room1Label}}
     {{for #data}}
         {{:RoomName}}
     {{/for}}
 </script> 
```

我尝试了各种组合，但总是出错

```
 {{:parent.parent.data.Room1Label}}
 {{:#data.parent.parent.data.Room1Label}}
 {{:#data.parent.data.Room1Label}}
 {{:#data.parent.Room1Label}} 
```

有谁知道该怎么做？

--**解决方案**--

正确的语法是

```
#parent.parent.data.Room1Label 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-04T16:37:36.857

您想逐步浏览视图并从父视图获取数据。视图是渲染模板的结果，因此嵌套块标签，例如 {{for...}}...{{/for}} 或 {{if...}}...{{/ if}} 将添加子视图。如果将数组传递给“for”标签 {{for myArray}}，它将遍历数据数组并导致一个子视图，其数据属性是数组，然后该视图将具有子视图的集合对于每个渲染的项目。

所以你需要知道#view是视图，#view.parent是父视图，#view.parent.data是父视图的数据等等。#foo是#view.foo的缩写，所以#data是数据, #parent 父视图等。

现在唯一的问题是正确计算父母的数量。您可以通过向数据添加方法来调试正在发生的事情：{ ... properties ..., test: function() {debugger;} }。现在在该数据项的模板中的任意位置添加 {{:test()}}，然后进入编译的模板：查看视图、其父级等。

另一个技巧。如果您在任何块标记上设置模板变量，则可以从任何嵌套模板访问它。所以在你的例子中，你可以把

> {{for Rooms tmpl="#RoomTmpl" ~label=Room1Label layout=true /}}

然后从嵌套模板访问它：

> {{:~标签}}

这样，您不再需要担心通过父视图进行升级。

# javascript - preventDefault() 不会阻止该操作

> ID：10432365
> 
> 赞同：17
> 
> 时间：2012-05-03T13:25:09.717
> 
> 标签：javascript, jquery, jquery-events

当我`event.preventDefault()`在链接上使用它时它可以工作，但是当我在按钮上使用它时却不行！

[演示](http://jsfiddle.net/46sbB/)

我的代码：

```
<a id="link" href="http://www.google.com">link</a>
<button id="button" onclick="alert('an alert')">button</button>​

$('#link').click(function(event){
  event.preventDefault();
});
$('#button').click(function(event){
  event.preventDefault();
}); 
```

​ 链接动作被取消，但是当我点击按钮时，仍然执行`onClick`动作。

有什么帮助吗？我想做的是在**不更改按钮html的情况下**`onClick`阻止按钮动作（我知道该怎么做

 **`$('#button').removeAttr('onclick');`

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-05-03T13:26:13.427

`event.stopImmediatePropagation();`如果一个元素上有多个事件处理程序并且您希望阻止其他事件处理程序执行，则您需要。`preventDefault()`只是阻止默认操作（例如提交表单或导航到另一个 URL），同时`stopImmediatePropagation()`防止事件在 DOM 树中冒泡*并*阻止执行同一元素上的任何其他事件处理程序。

以下是一些有用的链接，解释了各种方法：

*   [http://api.jquery.com/event.preventDefault/](http://api.jquery.com/event.preventDefault/)
*   [http://api.jquery.com/event.stopPropagation/](http://api.jquery.com/event.stopPropagation/)
*   [http://api.jquery.com/event.stopImmediatePropagation/](http://api.jquery.com/event.stopImmediatePropagation/)

但是，由于它仍然不起作用，这意味着`onclick=""`处理程序在附加的事件处理程序之前执行。您无能为力，因为当您的代码运行时，`onclick`代码已经被执行。

最简单的解决方案是完全删除该处理程序：

```
$('#button').removeAttr('onclick'); 
```

[`addEventListener()`](https://developer.mozilla.org/en/DOM/element.addEventListener)即使通过纯 javascript ( )添加事件侦听`useCapture=true`器也无济于事 - 显然内联事件甚至在事件开始下降 DOM 树之前触发。

如果您只是因为需要而不想删除处理程序，只需将其转换为正确附加的事件：

```
var onclickFunc = new Function($('#button').attr('onclick'));
$('#button').click(function(event){
    if(confirm('prevent onclick event?')) {
        event.stopImmediatePropagation();   
    }
}).click(onclickFunc).removeAttr('onclick'); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-03T13:26:31.380

你`stopImmediatePropagation`不需要`preventDefault`。preventDefault 防止默认浏览器行为，而不是方法冒泡。

[http://api.jquery.com/event.stopImmediatePropagation/](http://api.jquery.com/event.stopImmediatePropagation/)

[http://api.jquery.com/event.preventDefault/](http://api.jquery.com/event.preventDefault/)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-03T13:27:14.500

该`preventDefault`函数不会阻止事件处理程序被触发，而是**停止默认操作**的发生。对于链接，它会停止导航，对于按钮，它会停止提交表单等。

您正在寻找的是`stopImmediatePropagation`.

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-03T13:26:22.847

你可以试试这个：

```
$('#button').show(function() {
  var clickEvent = new Function($(this).attr('click')); // store it for future use
  this.onclick = undefined;
}); 
```

**[演示](http://jsfiddle.net/46sbB/4/)**

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-03-19T09:34:26.610

它帮助了我

```
function goToAccessoriesPage(targert) {
       targert.onclick.arguments[0].preventDefault();
       ...
} 
```**

# php - php“找不到类”和“无法重新声明类”错误

> ID：10432366
> 
> 赞同：1
> 
> 时间：2012-05-03T13:25:16.300
> 
> 标签：php, symfony

我正在`PHP`使用`Symfony2`.

`MainContent`我在文件中定义了一个类`MainController.php`

我不得不在其他名为的控制器文件中使用这个类`SecurityController.php`

尽管这两个类都定义在同一个命名空间中，但它给出了错误：

```
Class 'MainContent' not found... 
```

所以我尝试再次定义该类，`SecurityController.php`但结果是：

```
Cannot redeclare class 'MainContent...' 
```

我不明白，它要么被声明，要么没有。

事实上，我是一名`C#`程序员，也许我因为这些语言之间的一些差异而感到困惑。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T13:29:25.980

Symfony 使用所谓的自动加载。由于您的类未在其自己的文件中定义，因此遵循自动加载规则，无法加载它，因此找不到该类。但是如果你定义了类，那么脚本处理成功，包含其他定义相同类的文件，并产生冲突（不能重新声明类）。

可能的解决方案是：

*   在一个地方定义类（最好在控制器之外）并在需要时使用 include_once / require_once
*   使该类实际上是一个 Symfony 辅助类，因此自动加载实际上可以工作
*   每当您声明类时，请使用

    `if(!class_exists('ClassName')) { class ClassName {} }`

# java - JSTL 测试和 HTML 输入

> ID：10432371
> 
> 赞同：0
> 
> 时间：2012-05-03T13:25:27.497
> 
> 标签：java, jsp, jakarta-ee, jstl

我的 JSP 页面中有类似的内容：

```
<% if(id!=null) { %>
     <input type="hidden" name="id" value="<%= id %>" />
<%
}
%> 
```

当我想编辑一个用户 id 应该是非 null 时，我希望在我的 HTML 中输入。但是，当我想添加一个用户 id 时应该为 null，所以我不输入什么。

它适用于该代码。但我想使用 JSTL 我尝试使用 c:if 和 c:when ：

```
<c:choose>
    <c:when test="${id != null }">
        <input type="hidden" name="id" value="<%=id%>" />
    </c:when>
    <c:otherwise>
        <br/>
    </c:otherwise>
</c:choose> 
```

问题是这段代码`<br />`何时显示`id`为空或非空（添加和编辑）......而且我不明白为什么它不起作用。

谢谢你的帮助，

小号

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-03T13:30:04.640

问题是您的变量 id 不在 jstl 可以到达的范围内。你需要做：

```
pageContext.setAttribute("id", id); 
```

此外，最好针对空进行测试：

```
<c:when test = "${!empty id}"> 
```

最后，在输出 id 的值时应该使用 jstl：

```
<input type="hidden" name="id" value="${id}" /> 
```

# iphone - iPhone - 通过蓝牙发送图像和文本的错误

> ID：10432378
> 
> 赞同：8
> 
> 时间：2012-05-03T13:25:45.473
> 
> 标签：iphone, ios, image, bluetooth, gamekit

`GameKit`我的框架有问题。在我的应用程序中，我想发送文本或图像。现在，当我从 发送图像时`UIImagePicker`，它运行良好。当我发送文本时，它不会显示相同`UIAlertView`的图像，没有图像。这是`.h`：

```
 #import <UIKit/UIKit.h>
#import <GameKit/GameKit.h>

@interface ViewController : UIViewController <GKPeerPickerControllerDelegate, GKSessionDelegate, UIActionSheetDelegate, UINavigationControllerDelegate, UIImagePickerControllerDelegate> {
    GKSession *currentSession;
    IBOutlet UITextField *txtMessage;
    IBOutlet UIButton *connect;
    IBOutlet UIButton *disconnect;
    GKPeerPickerController *picker;
    UIImagePickerController *imgPicker;
    BOOL isText;
    UIImage *_image;
}
@property (nonatomic, retain) GKSession *currentSession;
@property (nonatomic, retain) UITextField *txtMessage;
@property (nonatomic, retain) UIButton *connect;
@property (nonatomic, retain) UIButton *disconnect;
-(IBAction) btnSend:(id) sender;
-(IBAction) btnConnect:(id) sender;
-(IBAction) btnDisconnect:(id) sender;
-(IBAction)chooseImageData:(id)sender;
@end 
```

和`.m`：

```
#import "ViewController.h"
#import <GameKit/GameKit.h>

@implementation ViewController

@synthesize currentSession;
@synthesize txtMessage;
@synthesize connect;
@synthesize disconnect;

- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
    // Release any cached data, images, etc that aren't in use.
}

#pragma mark - View lifecycle

- (void)viewDidLoad {
    [connect setHidden:NO];
    [disconnect setHidden:YES];
    [super viewDidLoad];
}

- (void)peerPickerController:(GKPeerPickerController *)picker
              didConnectPeer:(NSString *)peerID
                   toSession:(GKSession *) session {
    self.currentSession = session;
    session.delegate = self;
    [session setDataReceiveHandler:self withContext:nil];
    picker.delegate = nil;
    [picker dismiss];
}

-(IBAction) btnConnect:(id) sender {
    picker = [[GKPeerPickerController alloc] init];
    picker.delegate = self;
    picker.connectionTypesMask = GKPeerPickerConnectionTypeNearby;
    [connect setHidden:YES];
    [disconnect setHidden:NO];
    [picker show];
}

- (void)peerPickerControllerDidCancel:(GKPeerPickerController *)picker
{
    picker.delegate = nil;
    [connect setHidden:NO];
    [disconnect setHidden:YES];
}   

-(IBAction) btnDisconnect:(id) sender {
    [self.currentSession disconnectFromAllPeers];
    currentSession = nil;
    [connect setHidden:NO];
    [disconnect setHidden:YES];
}

- (void)session:(GKSession *)session
           peer:(NSString *)peerID
 didChangeState:(GKPeerConnectionState)state {
    switch (state)
    {
        case GKPeerStateConnected:
            NSLog(@"connected");
            break;
        case GKPeerStateDisconnected:
            NSLog(@"disconnected");
            currentSession = nil;
            [connect setHidden:NO];
            [disconnect setHidden:YES];
            break;
    }
}

- (void) mySendDataToPeers:(NSData *) data
{
    if (currentSession)
        [self.currentSession sendDataToAllPeers:data
                                   withDataMode:GKSendDataReliable
                                          error:nil];
}
- (void) mySendImageToPeers:(NSData *) data
{
    if (currentSession)
        [self.currentSession sendDataToAllPeers:data
                                   withDataMode:GKSendDataReliable
                                          error:nil];
}

-(IBAction) btnSend:(id) sender
{
    //---convert an NSString object to NSData---
    NSData* data;
    NSString *str = [NSString stringWithString:txtMessage.text];
    data = [str dataUsingEncoding: NSASCIIStringEncoding];
    [self mySendDataToPeers:data];
}

- (void) receiveData:(NSData *)data
            fromPeer:(NSString *)peer
           inSession:(GKSession *)session
             context:(void *)context {
    //---convert the NSData to NSString---

    if (isText) {
        isText = YES;
    NSString* str;
    str = [[NSString alloc] initWithData:data encoding:NSASCIIStringEncoding];
    UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Messaggio"
                                                    message:str
                                                   delegate:self
                                          cancelButtonTitle:@"OK"
                                          otherButtonTitles:nil];
    [alert show];
    }
    else
    {
        UIImage *tempSentImg = [UIImage imageWithData:data];
        _image = tempSentImg;
        UIAlertView* alert = [[UIAlertView alloc] initWithTitle:@"Immagine"
                                                        message:@"\n\n\n\n\n"
                                                       delegate:self
                                              cancelButtonTitle:@"OK"
                                              otherButtonTitles:nil];
        UIImageView *imageView = [[UIImageView alloc] initWithImage:_image];
        CGFloat imageHeight = 100;
        CGFloat imageWidth = imageHeight * _image.size.width / _image.size.height;
        imageView.frame = CGRectMake(floor((284 - imageWidth)/2), 47, imageWidth, imageHeight);
        [alert addSubview:imageView];
        [alert show];
        return;
    }

}

-(IBAction)chooseImageData:(id)sender {
    [self performSelector: @selector(dialogOtherAction)];
}

- (void)dialogOtherAction {
    UIActionSheet *actionSheet = [[UIActionSheet alloc] initWithTitle:nil
                                                             delegate:self 
                                                    cancelButtonTitle:NSLocalizedString(@"Annulla", @"")
                                               destructiveButtonTitle:nil
                                                    otherButtonTitles:NSLocalizedString(@"Scegli dalla libreria", @""),
                                  NSLocalizedString(@"Scatta una foto", @""),nil];
    actionSheet.actionSheetStyle = UIActionSheetStyleBlackTranslucent;
    [actionSheet showInView:self.view];
}

- (void)actionSheet:(UIActionSheet *)actionSheet clickedButtonAtIndex:(NSInteger)buttonIndex
{
    if (buttonIndex == 0)
    {
        imgPicker = [[UIImagePickerController alloc] init];
        imgPicker.sourceType =  UIImagePickerControllerSourceTypePhotoLibrary;
        imgPicker.allowsEditing = NO;
        imgPicker.delegate = self;

        [self presentModalViewController:imgPicker animated:YES];   
     }
    else if (buttonIndex == 1)
    {
        imgPicker = [[UIImagePickerController alloc] init];
        imgPicker.sourceType = UIImagePickerControllerSourceTypeCamera;
        imgPicker.delegate = self;
        imgPicker.allowsEditing = NO;
        [self presentModalViewController:imgPicker animated:YES];
    }
}

-(void)actionSheet:(UIActionSheet *)actionSheet didDismissWithButtonIndex:(NSInteger)buttonIndex {
    [actionSheet dismissWithClickedButtonIndex:0 animated:YES];
}

- (void)imagePickerController:(UIImagePickerController *)imgPicker didFinishPickingMediaWithInfo:(NSDictionary *)info
{
   [self dismissModalViewControllerAnimated:YES];    

    UIImage *image = [info objectForKey:@"UIImagePickerControllerOriginalImage"];
    [self performSelector: @selector(btnImageSend:) withObject: image afterDelay: 1.0];
}
-(IBAction) btnImageSend:(UIImage *)image
{
    //---convert an NSString object to NSData---
    NSData* data;
    data = UIImagePNGRepresentation(image);
    [self mySendImageToPeers:data];
}

- (void)viewDidUnload
{
    [super viewDidUnload];
    // Release any retained subviews of the main view.
    // e.g. self.myOutlet = nil;
}

- (void)viewWillAppear:(BOOL)animated
{
    [super viewWillAppear:animated];
}

- (void)viewDidAppear:(BOOL)animated
{
    [super viewDidAppear:animated];
}

- (void)viewWillDisappear:(BOOL)animated
{
    [super viewWillDisappear:animated];
}

- (void)viewDidDisappear:(BOOL)animated
{
    [super viewDidDisappear:animated];
}

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    // Return YES for supported orientations
    return (interfaceOrientation != UIInterfaceOrientationPortraitUpsideDown);
}

@end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-12T20:36:35.573

在我看来，您无法说出接收端发送了什么。最初，“isText”变量为 NO。每次接收数据时（在receiveData:fromPeer:inSession:context:中），if (isText) 总是失败并且接收到的数据总是被解释为图像数据。

解决此问题的一种方法是，您可以发送字典，而不是简单地发送文本或图像数据。对 mySendDataToPeers:、mySendImageToPeers: 和 receiveData:fromPeer:inSession:context 进行以下更改：

```
- (void) mySendDataToPeers:(NSData *) data
{
    NSDictionary *dict = @{@"data type" : @"text",
                           @"data" : data};
    NSData *dictData = [NSPropertyListSerialization dataWithPropertyList:dict format:NSPropertyListBinaryFormat_v1_0 options:0 error:nil];

    if (currentSession)
        [self.currentSession sendDataToAllPeers:dictData
                                   withDataMode:GKSendDataReliable
                                          error:nil];
}

- (void) mySendImageToPeers:(NSData *) data
{
    NSDictionary *dict = @{@"data type" : @"image",
                           @"data" : data};
    NSData *dictData = [NSPropertyListSerialization dataWithPropertyList:dict format:NSPropertyListBinaryFormat_v1_0 options:0 error:nil];

    if (currentSession)
        [self.currentSession sendDataToAllPeers:dictData
                                   withDataMode:GKSendDataReliable
                                          error:nil];
}

- (void) receiveData:(NSData *)dictdata
            fromPeer:(NSString *)peer
           inSession:(GKSession *)session
             context:(void *)context
{
    NSDictionary *dict = (NSDictionary *) [NSPropertyListSerialization propertyListWithData:dictdata options:0 format:0 error:nil];
    isText = [@"text" isEqualToString:[dict objectForKey:@"data type"]];
    NSData *data = [dict objectForKey:@"data"];

    //---convert the NSData to NSString---
    if (isText)
    {
        NSString* str;
        str = [[NSString alloc] initWithData:data encoding:NSASCIIStringEncoding];
        UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Messaggio"
                                                        message:str
                                                       delegate:self
                                              cancelButtonTitle:@"OK"
                                              otherButtonTitles:nil];
        [alert show];
    }
    else
    {
        UIImage *tempSentImg = [UIImage imageWithData:data];
        _image = tempSentImg;
        UIAlertView* alert = [[UIAlertView alloc] initWithTitle:@"Immagine"
                                                        message:@"\n\n\n\n\n"
                                                       delegate:self
                                              cancelButtonTitle:@"OK"
                                              otherButtonTitles:nil];
        UIImageView *imageView = [[UIImageView alloc] initWithImage:_image];
        CGFloat imageHeight = 100;
        CGFloat imageWidth = imageHeight * _image.size.width / _image.size.height;
        imageView.frame = CGRectMake(floor((284 - imageWidth)/2), 47, imageWidth, imageHeight);
        [alert addSubview:imageView];
        [alert show];
        return;
    }

} 
```

# objective-c - UIAutomation 随机失败

> ID：10432380
> 
> 赞同：1
> 
> 时间：2012-05-03T13:25:46.690
> 
> 标签：objective-c, ui-automation

我正在使用 bwoken 进行 iOS UI 测试，它在后台使用 UIAutomation 来运行所有测试。

我已经设置了一个非常简单的示例应用程序，在启动时有两个按钮和一个 1.5 秒的小动画——我测试的只是查看两个按钮在视图中是否实际可用。

这个简单的测试用例大约有 1/3 的测试运行失败。

请参阅我附加的测试用例：

```
#import "../../../../tuneup/tuneup.js"

test "Initial screen has two buttons", (target, app) ->
  target.delay(2) # wait until animation is over
  window = app.mainWindow()
  assertNotNull window.elements()["buttonA"], "buttonA is missing"
  assertNotNull window.elements()["buttonB"], "buttonB is missing" 
```

关于为什么会这样的任何想法？

我检查了常见错误：

*   无障碍标签设置正确
*   即使禁用启动时的动画，测试也会失败
*   添加/删除延迟不会改变问题

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T14:51:17.193

你可能想看看你的语法是不是 ryt。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T00:48:14.383

正确的方法是让它变得更简单。删除动画。测试是否存在一个按钮。我有一种感觉是动画。此外，它有助于粘贴您得到的确切日志错误/打印输出。

# struts2 - Struts2 包含标签

> ID：10432381
> 
> 赞同：0
> 
> 时间：2012-05-03T13:25:52.113
> 
> 标签：struts2

我需要使用struts2 在jsp 中包含一个html。

我用了

```
<s:include value="objBarcodeCertificationTaskForm.strTrainingPage"></s:include> 
```

html 路径必须在行动中动态开发并在表单 bean 中设置

```
objBarcodeCertificationTaskForm.setStrTrainingPage(strTrainingPage); 
```

但是当我运行 jsp 时，我收到一条错误消息“请求的源不可用”

有没有办法继续使用`<s:bean>`标签？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T14:17:37.517

我尝试了这样的事情，并且效果很好

```
<s:set name="embedded" value="%{'myjsp.jsp'}"/>
<s:include value="%{#embedded}">New Jsp Page</s:include> 
```

我建议您观察该值是否获得正确的jsp名称，并且在找不到资源时会收到上述错误消息。使用以下标识值。

```
<s:property value="#embedded"/> 
```

# java - 如何在java中使jtable不可编辑？

> ID：10432385
> 
> 赞同：11
> 
> 时间：2012-05-03T13:26:06.153
> 
> 标签：java, swing, netbeans, jtable

我创建了一个将数据加载到`JTable`. 一切正常，只是此表中的所有单元格都是可编辑的。顺便说一句，我用于`defaultTableModel`表格模型。我在 Netbeans IDE 中这样做。请帮忙。这是我的代码：

```
private void updateTable(String searchText){

    if(searchText != null)
        this._sqlCmd = this._sqlCmd + " WHERE "+columnCombo.getSelectedItem()+" LIKE '%"+searchText+"%'";
    jTable1.setSurrendersFocusOnKeystroke(true);
    table = (javax.swing.table.DefaultTableModel) jTable1.getModel();  

    try{
        table.setRowCount(0);
    }catch(Exception e){}

    try {
        ResultSet rs = conn.createStatement(ResultSet.TYPE_SCROLL_INSENSITIVE,ResultSet.CONCUR_READ_ONLY).executeQuery(_sqlCmd);
        while (rs.next()){
            Object[] data = new Object[numOfCols];
            for(int i=0; i<data.length; i++){
                data[i] = rs.getObject(i+1);
            }
            table.addRow(data);
        }
        table.fireTableDataChanged();

    } catch (SQLException ex) {
        Logger.getLogger(FindContactGrid.class.getName()).log(Level.SEVERE, null, ex);
    } 
} 
```

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-05-03T13:31:20.707

```
 private TableModel model = new DefaultTableModel(data, columnNames)
  {
    public boolean isCellEditable(int row, int column)
    {
      return false;//This causes all cells to be not editable
    }
  };
  private JTable table = new JTable(model); 
```

已编辑。如果您在**Netbeans IDE 设计**器中执行此操作，请按照以下步骤操作：

> *   选择放置 JTable 的表单
> *   从导航窗格中，展开 JScrollPane 并右键单击 JTable 并选择**自定义代码**，如下所示：

![导航器窗格](../Images/3530108fc9ab49f98bb2abde17d60378.png)

*   在代码定制器上，选择第二个下拉菜单并选择**custom property**。这使您能够编辑 DefaultTableModel 代码定义。
*   现在粘贴这个： `{public boolean isCellEditable(int row, int column){return false;}}`在最后一个关闭 blacket 之前**）；**

**您的最终设置应如下所示：**

*   按确定保存 - 并完成工作。

![代码定制器](../Images/1ba2d4ca817f6931237334ec91fcac67.png)

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-05-03T13:38:39.440

如果您使用 DefaultTableModel，您可以覆盖方法 isCellEditable 并在构建 GUI 时实现它：

```
table.setModel(new DefaultTableModel() {

    @Override
    public boolean isCellEditable(int row, int column) {
       return false;
    }
}); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-08-27T16:30:40.173

使用 Netbeans 的另一种方式是可能的。如果您想继续使用 OP 提到的默认表模型，如果您不想创建新的表模型，则没有必要。

1.  选择 JTable 的“属性”

2.  在“属性”中选择“TableModel”字段，这将打开另一个对话框。

3.  从那里可以修改每列的“可编辑”复选框字段。

不确定从哪个版本开始，但我使用的是 Netbeans 7.2

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2017-11-16T02:14:31.323

尝试这个

```
JTable table = new JTable();
table.setEnabled(false); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-03T13:52:13.803

正如其他人所说，您必须创建自己的`DefaultTableModel`并覆盖`isCellEditable`。为了在 Netbeans 设计器中使用它：

*   右键单击您的表
*   属性 -> 代码
*   在**自定义创建代码**中添加：（`new JTable(new MyModel())`假设您创建类 MyModel 扩展 AbstractTableModel）

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2019-09-14T16:38:17.097

```
JTextField f = new JTextField();
f.setEditable(false);
for (int i = 0; i < table.getColumnModel().getColumnCount(); i++) {
    table.getColumnModel().getColumn(i).setCellEditor(new DefaultCellEditor(f));
} 
```

# google-api - 使用 Zend Gdata Google Docs API 复制文档

> ID：10432393
> 
> 赞同：0
> 
> 时间：2012-05-03T13:26:26.627
> 
> 标签：google-api, zend-gdata

我正在尝试确定如何使用 Google Docs API Zend Gdata 客户端制作文档副本。

我有以下代码正在访问 DocumentList 并允许我检索各个条目。

```
$service = Zend_Gdata_Docs::AUTH_SERVICE_NAME;

$sourceClient = Zend_Gdata_ClientLogin::getHttpClient($sourceUser, $sourcePass, $service);

$sourceDocs = new Zend_Gdata_Docs($sourceClient);

$entry = new Zend_Gdata_Docs_DocumentListEntry();

$docfeed = $sourceDocs->getDocumentListFeed();

foreach ($docfeed->entries as $entry)
{
      $entry->getTitleValue();
} 
```

我正在尝试确定如何制作特定文档条目的副本，而无需下载然后重新上传。我知道它可以基于 API 文档来完成，但是这个例子是在 .NET 中给出的，它似乎并没有很好地翻译成 PHP。

谷歌文档 API 链接 [https://developers.google.com/google-apps/documents-list/#copying_documents](https://developers.google.com/google-apps/documents-list/#copying_documents)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T12:10:31.870

我是这样做的：（电子表格）

```
$service = Zend_Gdata_Docs::AUTH_SERVICE_NAME;
$sourceClient = Zend_Gdata_ClientLogin::getHttpClient($sourceUser, $sourcePass, $service);
$connection = new Zend_Gdata_Spreadsheets($sourceClient);

// Get the Id of a sheet you want to copy [ensure its an object]
$titleOfSheetToCopy = 'CopyMe';
$feed = $connection->getSpreadsheetFeed();
foreach($feed as $entry) {
  if($entry->getTitle() == $titleOfSheetToCopy) {
    // this is a url string so you need to clean it
    $data = (string)$entry->getId();
    $data = explode("/",$data);
    $id = array_pop($data);
  }
}

// Create blank Entry Object       
$blankEntry = new Zend_Gdata_Spreadsheets_SpreadsheetEntry();

// Set title
$blankEntry->setTitle(new Zend_Gdata_App_Extension_Title("My new spreadsheet", null));

// Set the id to the id of the sheet you want to copy (we got that above)
$blankEntry->setId(new Zend_Gdata_App_Extension_Id($id); 
```

就是这样-对我有用！灵感来自[如何使用 Zend GData](https://stackoverflow.com/questions/6764868/how-to-create-an-empty-spreadsheet-using-zend-gdata) [gaetan-frenoy]创建一个空的电子表格

# ios - xcode 4.3 - 如何从现有类创建数据模型

> ID：10432398
> 
> 赞同：1
> 
> 时间：2012-05-03T13:26:43.890
> 
> 标签：ios, xcode, core-data, entities

在 xcode 3 中，当您添加数据模型（.xcdatamodel 文件）时，您可以选择现有的类来创建实体。

你如何在 xcode 4 中做到这一点？

我发现了这个优秀的教程（[http://wiresareobsolete.com/wordpress/2009/12/adding-core-data-existing-iphone-projects/](http://wiresareobsolete.com/wordpress/2009/12/adding-core-data-existing-iphone-projects/)），它几乎涵盖了向现有项目添加核心数据的所有内容，唯一的事情缺少的（因为它是从 2009 年开始的）是我问题的答案..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T13:29:14.057

在您的数据模型中单击一个实体。然后转到文件-> 新文件-> 核心数据-> NSManageObject 子类。

# sitecore - 查看模板继承选项卡时核心数据库中的 Sitecore 服务器错误

> ID：10432401
> 
> 赞同：1
> 
> 时间：2012-05-03T13:26:51.680
> 
> 标签：sitecore

我有 Sitecore 6.5 rev。111230 已安装，当我尝试查看 Core 数据库中任何模板的继承选项卡时出现服务器错误。这是我收到的错误的屏幕截图：

![System.InvalidOperationException：fieldTypeItem](../Images/f6c69ed4a90a8db39b24aafe7c5fe9cf.png)

我已经检查了我的 Sitecore.Kernel.dll 和 Sitecore.Client.dll 的版本，它们与我安装的 Sitecore 修订版相匹配。

我还确认模板正确地从基本模板继承。

关于可能导致这种情况的任何想法？提前致谢，

山姆

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T23:13:27.343

这已在 Sitecore 客户端中注册为错误。问题是其中一个字段的数据类型错误。

这是您无法升级的修复方法-

> 转到核心数据库中的 /sitecore/templates/System/Templates/Sections/Security 并将“单行文本”字段类型分配给 __Owner 字段。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T13:48:32.090

您应该就此联系 Sitecore 支持，因为在每次默认安装 Sitecore 6.5 时都会发生这种情况

我刚刚尝试过，并且在我的（干净）安装中出现了完全相同的问题。

如果您无法获得 Sitecore 支持，请告诉我。然后我将创建一个关于它的支持案例。

# jquery-mobile - jQuery 移动页脚并不总是在屏幕底部

> ID：10432405
> 
> 赞同：0
> 
> 时间：2012-05-03T13:27:04.050
> 
> 标签：jquery-mobile

我正在使用 jQuery mobile 和 phonegap 开发手机应用程序。我正在使用固定的页脚和页眉。有时，键盘弹出后，页脚栏和键盘之间会出现一个空格。这个空间与背景颜色相同，所以我假设页脚只是出于某种原因向上移动。该行为似乎不一致，因为它不会发生在所有页面上。

这是一段代码...此代码对于所有页面都是相同的，但差距仅在一个页面上。页面之间的唯一区别是页面上的字段数。

```
<div data-role="footer" data-position="fixed" class="ui-btn-right" style="min-height:42px;">
        <a href="#accident_menu" data-icon="arrow-l" data-direction="reverse" data-iconpos="left"
           style="margin-left: 10px; margin-top: 5px">Done</a>
        <a href="index.html" rel="external" data-icon="home" data-direction="reverse" data-iconpos="notext"
           style="float: right; margin-right: 10px; margin-top: 5px"></a>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-02-18T12:18:01.713

我遇到了类似的问题，当键盘弹出时，页脚向上移动。所以我用我的页脚添加了内联样式。这对我有用。

```
<div data-role="footer" data-position="fixed" style="position:absolute"> 
```

> --> " style = "position:absolute" "

我添加到页脚标签中的那一小部分……效果很好。我希望这对你有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T21:02:46.897

您应该考虑更改为 Jquery mobile 1.1.0 及其真正的固定工具栏。[阅读公告](http://jquerymobile.com/blog/2012/04/13/announcing-jquery-mobile-1-1-0/)。大多数在用设备和最干净的解决方案都支持它：

> 这种方法最酷的部分是，与基于 JS 的解决方案在所有平台上强加不自然的滚动物理特性不同，我们的滚动感觉是 100% 原生的，因为它是。这意味着滚动感觉无处不在，并且**适用于触摸、鼠标滚轮和键盘用户输入。**

# glassfish - Glassfish 3.1.2 集群远程监控 JConsole/VisualVM

> ID：10432410
> 
> 赞同：1
> 
> 时间：2012-05-03T13:27:25.913
> 
> 标签：glassfish, monitoring, glassfish-3, visualvm, jconsole

我有一个包含两个节点的集群，我正在尝试使用 VisualVM 或 JConsole 连接到这些节点，以便检查 JVM 的运行状况。但是，我无法连接到节点，使用 JConsole 它只会显示“连接失败”，而使用 VisualVM 它只会不断弹出输入用户名和密码的提示。所以它似乎没有正确验证。我正在使用管理员用户名和密码。奇怪的是我可以远程连接到 DAS JVM，这只是节点的问题。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T16:47:31.563

经过更多研究，glassfish 3.1.2 (b23) 似乎存在一个错误，该错误会阻止 JMX 连接到远程实例（基本上是集群中的节点）。目前还没有变通办法，他们不确定是否要将修复程序向后移植到 3.1.2 请密切注意。[http://java.net/jira/browse/GLASSFISH-18450](http://java.net/jira/browse/GLASSFISH-18450)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T11:27:10.663

你用的是 8686 端口吗？网址应该是 ip:8686 ？如果启用 AS 身份验证，则必须在 jconsole 连接屏幕上提供用户名/密码。

# octave - 八度音阶中的向量到矩阵

> ID：10432412
> 
> 赞同：6
> 
> 时间：2012-05-03T13:27:31.130
> 
> 标签：octave

`vec`Octave中的逆运算是什么？

例如，如果我需要将 12x1 向量转换为 3x4 矩阵，我应该怎么做？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-05-03T13:34:16.587

我不知道 Octave，但我认为您正在寻找[`reshape`](http://www.gnu.org/software/octave/doc/interpreter/Rearranging-Matrices.html#doc%2dreshape).

> — 内置函数：**reshape** ( *A, m, n, ...* )
> — 内置函数：**reshape** ( *A,* [ *mn ...* ])
> — 内置函数： **reshape** ( *A, ...,* [ ] *, ...* )
> — 内置函数：**reshape** ( *A, size* )
> 
> 返回具有指定维度 ( *m, n, ...* ) 的矩阵，其元素取自矩阵 A。矩阵的元素以列优先顺序访问（就像存储 Fortran 数组一样）。
> 
> 以下代码演示了将 1x4 行向量重塑为 2x2 方阵。
> 
> ```
>  reshape ([1, 2, 3, 4], 2, 2)
>            ⇒  1  3
>                2  4 
> ```
> 
> 请注意，原始矩阵 ( `prod (size (A))`) 中的元素总数必须与新矩阵 ( `prod ([`*mn ...*`])` ) 中的元素总数相匹配。
> 
> 返回矩阵的单个维度可能未指定，Octave 将自动确定其大小。空矩阵 ([]) 用于标记未指定的维度。

# html - 黑莓位置：固定css不起作用

> ID：10432413
> 
> 赞同：2
> 
> 时间：2012-05-03T13:27:31.273
> 
> 标签：html, css, jquery-mobile, blackberry-jde

我使用 rho mobile 为黑莓 Os6.0 和 android 创建了一个应用程序，我想在其中使用修复页眉和页脚。我为此创建了一个 css 使用**position:fixed; 顶部：0px；**. 它在黑莓中不起作用，但在 android 中运行良好。它与页面一起滚动，当停止滚动时，它再次固定在黑莓中的确切位置......我的其他 css 工作正常，没有错误..

请帮我解决这个问题..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T22:22:36.080

在标签中我看到了 jQuery mobile，所以你可以[使用它](http://jquerymobile.com/test/docs/toolbars/bars-fixed.html)

> 固定工具栏在支持 CSS position: fixed 的浏览器中（大多数桌面浏览器、iOS5+、Android 2.2+、BlackBerry 6 等），使用“fixedtoolbar”插件的工具栏将固定在视口的顶部或底部，而页面内容在两者之间自由滚动。在不支持固定定位的浏览器中，工具栏将保持在页面顶部或底部的流动位置。
> 
> 要在页眉或页脚上启用此行为，请将 data-position="fixed" 属性添加到 jQuery Mobile 页眉或页脚元素。
> 
> 固定标题标记示例：

```
<div data-role="header" data-position="fixed">
    <h1>Fixed Header!</h1>
</div> 
```

# zend-framework - Zend_Form 单选按钮

> ID：10432414
> 
> 赞同：1
> 
> 时间：2012-05-03T13:27:31.663
> 
> 标签：zend-framework, zend-form

我想要以下 HTML：

```
<form name="input" action="post" method="get">
    <label>1</label><input type="radio" value="1" name="rating" />
    <label>2</label><input type="radio" value="2" name="rating" /> 
    <label>3</label><input type="radio" value="3" name="rating" /> 
    <label>4</label><input type="radio" value="4" name="rating" /> 
    <label>5</label><input type="radio" value="5" name="rating" /> 
    <input type="submit" value="Submit" />
</form> 
```

在我的 zend 框架项目中，我如何使用 Zend_Form 做到这一点？我已经尝试了某些博客中的一些示例代码，但它们不起作用..

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-03T14:56:46.990

您可以使用 ViewScript 装饰器来创建您需要的标记。在您的表单类中创建 radio 元素并使用 setDecorators 方法为该元素分配 viewscript 装饰器

```
$element = new Zend_Form_Element_Radio('rating');
$element->addMultiOptions(array(
    '1' => '1',
    '2' => '2',
    '3' => '3',
    '4' => '4',
    '5' => '5'
))
    ->setDecorators(array(array('ViewScript', array('viewScript' => 'radio.phtml'))));
$this->addElement($element); 
```

然后使用以下内容在您的视图/脚本目录中创建文件 radio.phtml

```
<?php foreach ($this->element->getMultiOptions() as $label => $value) : ?>
<label><?php echo $label; ?></label><input type="radio" value="<?php echo $value; ?>" name="<?php echo $this->element->getName(); ?>" />
<?php endforeach; ?> 
```

# asp.net - INSTEAD OF INSERT 触发器导致实体框架的 SaveChanges 出错

> ID：10432415
> 
> 赞同：2
> 
> 时间：2012-05-03T13:27:33.240
> 
> 标签：asp.net, sql-server, web-services, entity-framework-4, savechanges

这是我的第一篇文章，但我经常来这里为我的问题找到正确的解决方案。

我有一个数据库（SQL Server 2008 R2），其中包含一个`INSTEAD OF INSERT`用于检查插入数据的触发器的表。

如果是重复行，则更新该行；否则，插入该行。

扳机：

```
ALTER TRIGGER [dbo].[CheckDataTrigger]
    ON [dbo].[MonitorSummary]
    INSTEAD OF INSERT
AS 
BEGIN
    SET NOCOUNT OFF

    IF exists( select * from inserted i, MonitorSummary ms
            where ms.ServiceUrl = i.ServiceUrl
                AND ms.AppName = i.AppName
                AND ms.BuildVersion = i.BuildVersion
                AND ms.FunctionName = i.FunctionName
                AND ms.Company = i.Company
                AND ms.UserName = i.UserName
                AND ms.ServerName = i.ServerName)
    BEGIN
       UPDATE MonitorSummary  
       SET MonitorSummary.Function_Count = inserted.Function_Count,
           MonitorSummary.Execution_Time_Sum = inserted.Execution_Time_Sum,
           MonitorSummary.LogLevel = inserted.LogLevel
       FROM inserted
       WHERE MonitorSummary.ServiceUrl = inserted.ServiceUrl
       AND MonitorSummary.AppName = inserted.AppName
       AND MonitorSummary.BuildVersion = inserted.BuildVersion
       AND MonitorSummary.FunctionName = inserted.FunctionName
       AND MonitorSummary.Company = inserted.Company
       AND MonitorSummary.UserName = inserted.UserName
       AND MonitorSummary.ServerName = inserted.ServerName
    END
    ELSE
    BEGIN
      INSERT INTO MonitorSummary
         SELECT 
             i.ServiceUrl, i.EmailAdress, i.EmailSent, i.AppName, i.BuildVersion, 
             i.FunctionName, i.Company, i.UserName, i.ServerName, i.Function_Count, 
             i.Execution_Time_Sum, i.LogLevel
         FROM inserted i
    END

    SELECT Monitor_Id 
    FROM MonitorSummary 
    WHERE @@ROWCOUNT > 0 AND Monitor_Id = SCOPE_IDENTITY()
END 
```

如您所见，`SET NOCOUNT OFF`我在触发器结束时执行选择查询。关于表的额外信息：

```
CREATE TABLE [dbo].[MonitorSummary](
    [Monitor_Id] [int] IDENTITY(1,1) NOT NULL,
    [ServiceUrl] [nvarchar](100) NULL,
    [EmailAdress] [nvarchar](100) NULL,
    [EmailSent] [bit] NOT NULL default 0,
    [AppName] [nvarchar](100) NULL,
    [BuildVersion] [nvarchar](100) NULL,
    [FunctionName] [nvarchar](100) NULL,
    [Company] [nvarchar](100) NULL,
    [UserName] [nvarchar](100) NULL,
    [ServerName] [nvarchar](100) NULL,
    [Function_Count] [int] NOT NULL default 0,
    [Execution_Time_Sum] [numeric](18, 8) NOT NULL default 0,
    [LogLevel] [nvarchar](50) NULL,
PRIMARY KEY CLUSTERED 
(
    [Monitor_Id] ASC
) 
```

我在使用之前测试了触发器。效果很好！

测试代码：

```
INSERT INTO MonitorSummary VALUES
    ('ServiceUrl2', 'EmailAdress2', 0, 'AppName2', 'BuildVersion2', 'FunctionName2',
        'Company2', 'UserName2', 'ServerName2', 1, 1, 'LogLevel2'),
    ('ServiceUrl2', 'EmailAdress2', 0, 'AppName2', 'BuildVersion2', 'FunctionName2',
        'Company3', 'UserName2', 'ServerName2', 1, 1, 'LogLevel2'),                 
    ('ServiceUrl3', 'EmailAdress3', 0, 'AppName2', 'BuildVersion2', 'FunctionName2',
        'Company2', 'UserName2', 'ServerName2', 1, 1, 'LogLevel2'),
    ('ServiceUrl3', 'EmailAdress3', 0, 'AppName2', 'BuildVersion2', 'FunctionName2',
        'Company2', 'UserName2', 'ServerName2', 2, 2, 'LogLevel2') 
```

现在，问题是 EF（实体框架）不起作用。

我认为这在 Web 服务 (.asmx) 中有效无关紧要，因为我使用测试表（没有触发器）测试了 EF，一切正常。

在这段代码中，我将一些对象添加到 EF 并保存更改。

已经尝试保存循环中的更改，但这没有效果......

```
private void StoreData(MonitorSummary[] data)
{
    foreach (MonitorSummary item in data)
    {
        MonitorEntity.MonitorSummary.AddObject(item);
        //MonitorEntity.SaveChanges();
    }
    MonitorEntity.SaveChanges();
} 
```

我总是以这个错误结束：

> 存储更新、插入或删除语句影响了意外数量的行 (0)。自加载实体后，实体可能已被修改或删除。刷新 ObjectStateManager 条目。

我也尝试过`Attach`对象并将并发模式更改为固定，所有这些都不起作用..

我什至尝试了一个`AFTER INSERT`触发器，但这不是我想要的解决方案，我必须编写更多代码，因为它已经插入到表中..

现在有人可以解决我的问题吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-03T15:07:26.293

我相信您需要在触发器的 UPDATE 部分设置@@identity。为此，请创建一个简单的插入查询并执行它。`id`假设MonitorSummary 中有标识列：

```
declare @strSql varchar(1000)
declare @id int

select @id = max (id) 
  from MonitorSummary
 where -- whole join condition to identify changed record(s)

set @strSql = 'SELECT Identity (Int, ' + Cast(@id As Varchar(10)) + ',1) AS id 
                     INTO #Tmp'
EXECUTE (@strSql) 
```

如果您使用 Sql Server 2005 或更新版本，则 UPDATE 中有输出子句，您可以使用它来检索已更改记录的列表。

顺便说一句，您可能会删除存在的部分并检查 UPDATE 是否将@@rowcount 设置为零；如果是这样，您需要插入行。

# java - 如何使用 Ant 连接到远程服务器并启动/停止在该特定服务器上运行的 Tomcat？

> ID：10432416
> 
> 赞同：3
> 
> 时间：2012-05-03T13:27:35.820
> 
> 标签：java, xml, ant, jmx, cargo

## 目的是：

```
1: connect to a remote server maybe via host: ip , port: 8181
2: stop Tomcat that's running on that server 
3: deploy a .war file 
4: restart tomcat 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-03T13:44:32.337

我相信[监控和管理 Tomcat](http://tomcat.apache.org/tomcat-6.0-doc/monitoring.html)下的[Tomcat 文档](http://tomcat.apache.org/tomcat-6.0-doc/index.html)提供了一些关于如何停止给定应用程序的信息，但不是完全停止服务器：

```
<jmx:invoke
    name="Catalina:type=Manager,path=/servlets-examples,host=localhost" 
    operation="stop"/> 
```

如果您对服务器具有 ssh 访问权限，那么您可能需要考虑[JSch 库](http://www.jcraft.com/jsch/)，您可以将其与[SSHExec Ant Task](http://ant.apache.org/manual/Tasks/sshexec.html)结合使用来启动和停止服务器：

```
<sshexec host="somehost"
    username="dude"
    password="yo"
    command="/etc/init.d/tomcat restart"/> 
```

# java - 如何在页面加载时在另一个网站中使用 joomla 插件使用页面（joomla 文章）？

> ID：10432421
> 
> 赞同：0
> 
> 时间：2012-05-03T13:27:47.347
> 
> 标签：java, jsp, joomla1.5, joomla-extensions

我正在使用 joomla 为我的 Web 应用程序加载一些静态内容。现在我需要在 joomla 中创建一个页面，当应用程序 url 在浏览器上被点击时加载。基本上流程是：1）输入应用程序网址。2) 页面将显示带有page_mask 效果的宣传视频。3) 播放器会在“ESC”上消失，并且会出现网页应用程序的主页。

我已经通过使用 joomla 插件完成了视频嵌入部分（没有 ESC 控制），因为它是主要要求，但问题是我想在我的 Web 应用程序中以相同的功能使用这个页面，它应该由 joomla 管理。

这个问题是高度优先的。如果我能得到与该问题相关的快速回复，我将不胜感激。

谢谢，维克拉姆

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T18:31:09.560

过去曾尝试过这种方法并取得了普遍成功（必须修改以供我们自己使用） [简单的弹出窗口](http://extensions.joomla.org/extensions/style-a-design/popups-a-iframes/17214)

# android - 有什么方法可以将视图稍微放在其父布局之外？

> ID：10432422
> 
> 赞同：34
> 
> 时间：2012-05-03T13:27:49.997
> 
> 标签：android, android-layout

这是一个关于Android布局的问题。这是我*急切*想要得到的：

![布局](../Images/3d76a689698413e11a0feb994f1d9284.png)

深灰色是一种线性布局。橙色是布局 X，然后绿色是 FrameLayout。我需要将 Green 放在其父级 - 布局 X 之外。所描述的布局层次结构无法更改。唯一的选择是布局 X - 它可以是你想要的任何东西。

有任何想法吗？

* * *

## 回答 #1

> 赞同：73
> 
> 时间：2015-07-13T13:01:48.347

利用 -

```
android:clipChildren="false"
android:clipToPadding="false" 
```

在您的子视图的每个父视图中，您将视图的“左边距”设置为负值，这会将您的子视图置于父视图之外，甚至不会剪切视图。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-03T13:48:09.013

您不能将绿色部分放在布局 X 中，因为它不能在其父级之外绘制。

因此，您应该实现一个 RelativeLayout 或 FrameLayout（根布局）作为所有这些视图的父级。

并将绿色视图作为根布局的子视图。

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/layout_root"
    android:layout_width="fill_parent"
    android:layout_height="200dp"
    android:orientation="vertical" >

    <LinearLayout
        android:id="@+id/layout_dark_grey"
        android:layout_width="100dp"
        android:layout_height="match_parent"
        android:orientation="vertical" >
    </LinearLayout>

    <LinearLayout
        android:id="@+id/layout_orange"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:layout_toRightOf="@id/layout_dark_grey"
        android:orientation="vertical" >
    </LinearLayout>

    <RelativeLayout
        android:id="@+id/layout_green"
        android:layout_width="100dp"
        android:layout_height="100dp"
        android:layout_centerVertical="true"
        android:layout_toLeftOf="300dp" >
    </RelativeLayout>

</RelativeLayout> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-03-29T09:05:17.200

只需添加`android:clipChildren="false"`到父布局。

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="horizontal"
    android:clipChildren="false">

    <LinearLayout
        android:layout_marginLeft="-25dp"
        android:background="@color/colorGray"
        android:layout_width="100dp"
        android:layout_height="100dp"/>
    <LinearLayout
        android:gravity="center|left"
        android:layout_width="fill_parent"
        android:layout_height="100dp"
        android:background="@color/colorOrange">
        <LinearLayout
            android:layout_marginLeft="-25dp"
            android:background="@color/colorGreen"
            android:layout_width="50dp"
            android:layout_height="50dp"></LinearLayout>
    </LinearLayout>
</LinearLayout> 
```

# actionscript-3 - 我们如何在计时器运行时重置 repeatCount 属性

> ID：10432424
> 
> 赞同：0
> 
> 时间：2012-05-03T13:27:51.743
> 
> 标签：actionscript-3

我们如何在计时器运行时重置 repeatCount 属性。

在游戏中，倒计时计时器从 120 开始运行。如果用户单击“提示”按钮，我需要将时间减少 5 秒并开始显示倒计时

现在的问题是倒数计时器减少了五，但计时器运行到“-n * 5”。“n”是点击提示按钮的次数。

如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T14:04:54.263

这是解决您的问题的一种方法。保持一个与 Timer 分开的计时器计数`repeatCount`，并在该单独的计数器达到 0 时停止，而不是在 TimerComplete 事件发生时停止。

```
public var t:Timer;
public var count:int = 120;

protected function init(event:FlexEvent):void
{   
    t = new Timer(1000,count);
    t.addEventListener(TimerEvent.TIMER, onTimer);
    t.start();
}

protected function onTimer(evt:TimerEvent):void
{
    count--;
    //display count as time remaining

    if (count <= 0)
    {
        //out of time!
        t.stop();
    }
}

protected function onHint(evt:MouseEvent):void
{
    count-=5;
    //update time or wait for next tick
} 
```

# python - Yajl 在 Python 中使用 githubarchive.org JSON 流解析错误

> ID：10432432
> 
> 赞同：5
> 
> 时间：2012-05-03T13:28:18.650
> 
> 标签：python, json, yajl

我正在尝试使用 yajl-py 解析 GitHub 存档文件。我相信文件的基本格式是 JSON 对象流，因此文件本身不是有效的 JSON，但它包含的对象是有效的。

为了测试这一点，我安装`yajl-py`并使用了他们的示例解析器（来自[https://github.com/pykler/yajl-py/blob/master/examples/yajl_py_example.py](https://github.com/pykler/yajl-py/blob/master/examples/yajl_py_example.py)）来尝试解析文件：

```
python yajl_py_example.py < 2012-03-12-0.json 
```

`2012-03-12-0.json`已解压缩的 GitHub 存档文件之一在哪里。

看来这种事情应该从他们在 Ruby 中的参考实现中起作用。Python 包不处理 JSON 流吗？

顺便说一句，这是我得到的错误：

```
yajl.yajl_common.YajlError: parse error: trailing garbage
          9478bbc3","type":"PushEvent"}{"repository":{"url":"https://g
                     (right here) ------^ 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-04T18:09:01.477

您需要使用流解析器来读取数据。Yajl 支持流解析，它允许您一次从文件/流中读取一个对象。话虽如此，看起来 Python 并没有为 Yajl 提供有效的绑定。

py-yajl 已`iterload`注释掉，不知道为什么：[https ://github.com/rtyler/py-yajl/commit/a618f66005e9798af848c15d9aa35c60331e6687#L1R264](https://github.com/rtyler/py-yajl/commit/a618f66005e9798af848c15d9aa35c60331e6687#L1R264)

不是 Python 解决方案，但您可以使用 Ruby 绑定来读取数据并以您需要的格式发出它：

```
# gem 安装 yajl-ruby

需要'open-uri'
需要'zlib'
需要'yajl'

gz = open('http://data.githubarchive.org/2012-03-11-12.json.gz')
js = Zlib::GzipReader.new(gz).read

Yajl::Parser.parse(js) 做 |事件|
  打印事件
结尾

```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-06-08T04:06:14.770

我知道这已经得到解答，但我更喜欢以下方法，它不使用任何包。由于某种原因，github 字典位于一行，因此您不能假设每行只有一个字典。这看起来像：

```
{"json-key":"json-val", "sub-dict":{"sub-key":"sub-val"}}{"json-key2":"json-val2", "sub-dict2":{"sub-key2":"sub-val2"}} 
```

我决定创建一个一次获取一本字典的函数。它以字符串形式返回 json。

```
def read_next_dictionary(f):
    depth = 0
    json_str = ""
    while True:
        c = f.read(1)
        if not c:
            break #EOF
        json_str += str(c)
        if c == '{':
            depth += 1
        elif c == '}':
            depth -= 1

        if depth == 0:
            break

    return json_str 
```

我使用这个函数通过一个 while 循环遍历 Github 存档：

```
arr_of_dicts = []
f = open(file_path)
while True:
    json_as_str = read_next_dictionary(f)
    try:
        json_dict = json.loads(json_as_str)
        arr_of_dicts.append(json_dict)
    except: 
        break # exception on loading json to end loop

pprint.pprint(arr_of_dicts) 
```

这适用于此处的数据集帖子：http: [//www.githubarchive.org/](http://www.githubarchive.org/)（在 gunzip 之后）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-06T19:07:42.127

该示例未启用任何 Yajl 额外功能，因为您需要`allow_multiple_values`在解析器上启用标志。这是您需要对基本示例进行修改以使其解析文件的内容。

```
--- a/examples/yajl_py_example.py
+++ b/examples/yajl_py_example.py
@@ -37,6 +37,7 @@ class ContentHandler(YajlContentHandler):

 def main(args):
     parser = YajlParser(ContentHandler())
+    parser.allow_multiple_values = True
     if args:
         for fn in args:
             f = open(fn) 
```

Yajl-Py 是 yajl 的一个薄包装器，因此您可以使用 Yajl 提供的所有功能。以下是[yajl 提供的所有可以启用的标志](https://github.com/lloyd/yajl/blob/master/src/api/yajl_parse.h)：

```
yajl_allow_comments
yajl_dont_validate_strings
yajl_allow_trailing_garbage
yajl_allow_multiple_values
yajl_allow_partial_values 
```

要在 yajl-py 中打开这些，请执行以下操作：

```
parser = YajlParser(ContentHandler())
# enabling these features, note that to make it more pythonic, the prefix `yajl_` was removed
parser.allow_comments = True
parser.dont_validate_strings = True
parser.allow_trailing_garbage = True
parser.allow_multiple_values = True
parser.allow_partial_values = True
# then go ahead and parse
parser.parse() 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-05-31T22:54:37.093

作为一种解决方法，您可以将 GitHub 存档文件分成几行，然后将每一行解析为 json：

```
import json
with open('2013-05-31-10.json') as f:
    lines = f.read().splitlines()
    for line in lines:
        rec = json.loads(line)
        ... 
```

# android - 是否可以从本机代码获取 Android 活动堆栈？

> ID：10432433
> 
> 赞同：2
> 
> 时间：2012-05-03T13:28:21.107
> 
> 标签：android, android-ndk, java-native-interface, signal-handling

我正在实现一个本机信号处理程序，它生成的日志比标准墓碑文件更详细。我想包含当前任务的活动堆栈的转储，以帮助我诊断错误。

一种方法是使用 JNI 从 Java 代码中获取活动管理器。这会起作用，但不能保证从信号处理程序中调用时是安全的。

我的问题是，是否可以从本机代码中获取有关活动堆栈的信息？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T13:32:16.917

也许使用 Thread.currentThread().getStackTrace() 会有所帮助？

# c++-cli - 为什么不能将跟踪引用用作类成员？

> ID：10432435
> 
> 赞同：3
> 
> 时间：2012-05-03T13:28:24.763
> 
> 标签：c++-cli, tracking-reference

以下代码：

```
ref class A
{
private:
  int% referenceToAnInt;
}; 
```

在 Visual Studio 中产生以下错误：

错误 C3160：“int %”：托管类的数据成员不能具有此类型

我认为跟踪引用是一个托管的东西 - 那么为什么它们不能成为托管类的成员呢？另外：如何正确存储对 C++/CLI 中值类型的引用？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-03T13:59:32.817

CLR 不允许将跟踪引用存储为字段。此外，来自 C++/CLI 规范：

> 包含具有非自动存储持续时间的跟踪引用的程序是格式错误的。（这排除了将跟踪引用作为数据成员。）

我猜他们想避免让引用比被引用对象的实际生命周期更长的问题。另一种方法是使用包装器 ref 类来保存值，或使用委托进行读/写。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-03T14:04:45.153

跟踪引用*是*“托管的东西”，这就是为什么您不能将它们用作类的成员。它们类似于 C++`&`引用，因为您可以使用它们在其他方法中引用局部变量。但是局部变量存储在短期存储（也称为堆栈）中。这意味着当包含该局部变量的方法结束时，引用将不再有效，但对象仍然存在。

这不会是内存安全的，这就是.Net 中禁止这样做的原因。

# objective-c - 何时使用实例变量以及何时使用属性

> ID：10432441
> 
> 赞同：5
> 
> 时间：2012-05-03T13:28:43.017
> 
> 标签：objective-c, ios, cocoa, instance-variables

当使用 Objective-C 属性时，您是否可以完全停止创建实例变量，或者显式实例变量（不是由属性合成的变量）仍然用于属性不合适的目的？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-05-03T13:40:10.373

> 你能完全停止创建实例变量吗

不，你不能（在某种意义上）。如果您有属性，您可以做的是停止声明它们。如果您合成一个属性并且您没有声明 instvar，它将为您声明，因此您正在创建一个实例变量，只是没有显式地。

> 它们是否仍然用于属性不合适的目的？

它曾经是为所有内容创建属性的建议，因为合成属性会为您完成几乎所有的保留和释放。然而，对于 ARC，使用属性来包装内存管理的理由已经消失。我相信现在（对于 ARC）的建议是使用属性来声明您的外部接口，但使用直接实例变量，其中变量是对象内部状态的一部分。

这是采用 ARC 的一个很好的理由：属性恢复到它们的真正目的，只是作为类 API 的一部分，并且不再需要将它们用作隐藏内存管理工作的黑客方式。

**编辑**

还有一件事：您现在可以在 中声明实例变量，`@implementation`因此现在无需在`@interface`. IE

```
@implementation MyClass
{
    NSString* myString;
}
// method definitions
@end 
```

~~而且我很确定它也适用于类别。~~- 见下面的评论

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-05-03T13:54:53.970

我建议将所有内容都声明为属性并完全避免手动 ivars。手动创建 ivars 并没有真正的好处。在头文件中声明公共属性，`@interface`在 .m 文件的私有类扩展中声明私有属性。

对于 JeremyP 的某些观点，在 ARC 下，访问器的内部使用仍然具有重要价值，尽管内存管理不再是一个重要问题。它确保 KVO 正常工作，更好地子类化，支持自定义 setter（特别是对于类似的东西`NSTimer`），支持自定义 getter（例如延迟实例化）等。混合使用访问器和 ivars 非常容易出错。忘记您需要以哪种方式访问​​哪个太容易了。一致性是好的 ObjC 的标志。

如果您出于某种原因绝对必须声明 ivar，那么您应该`@implementation`按照 JeremyP 的说明在块中进行。

* * *

更新（2013 年 10 月）：

[Apple 的指导](https://developer.apple.com/library/ios/documentation/cocoa/conceptual/ProgrammingWithObjectiveC/EncapsulatingData/EncapsulatingData.html)（来自 Objective-C 编程：封装数据）：

> **大多数属性都由实例变量支持**
> 
> 通常，即使您从对象自己的实现中访问对象的属性，您也应该使用访问器方法或点语法进行属性访问，在这种情况下，您应该使用`self`：
> 
> ...
> 
> 此规则的例外是在编写初始化、释放或自定义访问器方法时，如本节后面所述。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-03T13:32:38.707

这个问题在[此之前已解决](https://stackoverflow.com/questions/3074248/properties-and-instance-variables-in-objective-c-2-0)

当您使用`synthesize`实例变量时，会为您处理和实例化。如果您将 Lion 与新版本的 XCode 一起使用，还请查看[过渡到 ARC 中 ARC 中的各种属性](https://developer.apple.com/library/mac/#releasenotes/ObjectiveC/RN-TransitioningToARC/Introduction/Introduction.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-03T13:36:36.760

您始终可以从外部访问属性。因此，如果您只想从类中读取变量，您仍然必须声明 iVar。访问公共 ivar`object->ivar`也比使用方法调用稍快。

# powershell - Powershell脚本按顺序运行多个批处理文件

> ID：10432445
> 
> 赞同：0
> 
> 时间：2012-05-03T13:29:09.897
> 
> 标签：powershell

真正的 n00b 到 powershell。我想知道社区是否可以帮助我构建一个非常简单的脚本。

真的，我可以在 Windows 批处理文件中实现我需要的一切——但这些文件一次只能完成一项任务。我想要一个主脚本（一个 powershell 脚本）来依次调用每个单独的批处理。也就是说，我想运行 Batch_1，然后仅在 Batch_1 调用的程序中的任务完成时才运行 Batch_2。

这可能吗？是使用某种形式的 IF THEN ELSE 类型场景还是有办法让 powershell 等待某些事件发生？

谢谢！

GPC

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T13:44:33.603

您可以使用常规 Windows shell (cmd.exe) 中的[FOR](http://ss64.com/nt/for.html)命令来解决此问题。以下命令执行当前目录中的每个 cmd 文件：

```
FOR %f IN (*.cmd) DO %f 
```

以下命令按内部“DIR”命令返回的顺序执行每个文件：

```
FOR /F %f IN ('DIR /b /oen *.cmd *.bat') DO %f 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T13:57:33.960

通常从批处理文件调用到控制台程序是同步的。用于此的 PowerShell 脚本很简单：

```
master-script.ps1 contents:
---------------------------
c:\batch1.bat
c:\batch2.bat 
```

现在，如果批处理文件正在调用 Windows 子系统 exe（非控制台 EXE），那么这将变得更加棘手，因为它们执行异步。如果是这种情况，请更新您的问题以表明这一点。

# iphone - 在 iPad 上强制使用 iPhone 版本

> ID：10432448
> 
> 赞同：0
> 
> 时间：2012-05-03T13:29:12.907
> 
> 标签：iphone, xcode, ipad, version

有没有一种快速的方法可以在 Xcode 中强制通用应用程序在 iPad 上的 iPhone 版本中运行？“快速方式”是指一种不涉及编码（或过多编码）的方式。例如，在我的目标应用程序的摘要页面中，有一个关于设备的选择按钮；我尝试将其设置为 iPhone（尽管我的应用程序是通用的），但是在 iPad 上我的应用程序仍然启动 iPad 版本。

任何帮助表示赞赏。

干杯。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T13:42:49.237

在构建设置中更改目标设备系列（检查屏幕截图）。

![在此处输入图像描述](../Images/14f89ca3df4ac3d10cebd5717e455280.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T14:11:03.277

我最终通过在我的应用程序的 .plist 文件中删除对 iPad 设置的任何引用并声明该应用程序仅适用于 iPhone 设备来做到这一点。几乎是 Jonas 和 Brian 提到的，但扩展到所有参考资料。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-03T13:38:54.997

删除 Info.plist 中指向 iPad 界面的条目。我认为它`NSMainNibFile~ipad`或类似的东西。

# javascript - 使用 json 预填充 php 字段是否有效？

> ID：10432451
> 
> 赞同：0
> 
> 时间：2012-05-03T13:29:16.763
> 
> 标签：javascript, json

我需要用登录人的电子邮件地址填充一个字段。由于这个应用程序被各种客户使用，我想根据需要将代码添加到外部 javascript 代码中。我一直在使用 json，但现在我想知道这是否是答案。

**在我的 php 代码中，我有这个：**

```
<?php
$myemail = $this->session->userdata('USER_EMAIL');
//echo $myemail; 
```

**接下来我有这个：**

```
var $jsonEmail = trim(json_encode($myemail)); 
```

**然后在我的 js 自定义页面中，我有这个：**

```
var jsonObj = $jsonEmail;
document.getElementById("email-12").innerHTML=jsonObj.value; 
```

它不起作用，但由于我是新手，我不知道我做错了什么。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T13:33:28.787

您正在混合 PHP 和 JavaScript，这是行不通的。你的 PHP 应该是这样的：

```
$jsonEmail = trim(json_encode($myemail)); // Get rid of 'var' 
```

您的 JavaScript 应如下所示：

```
var jsonObj = <?php echo $jsonEmail; ?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T13:33:59.630

你可以做这样的事情，它会很脏，但我认为会起作用。

```
var jsonObj = <?php echo $jsonEmail ?>;
document.getElementById("email-12").innerHTML=jsonObj.value; 
```

您不能将服务器端 PHP 与本地端 Javascript 混合使用。PHP 将文本写入 SDIO，浏览器将其解释为 JS 代码或 HTML 之类的东西。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-03T13:34:17.257

您需要将`$jsonEmail`变量回显到 JavaScript，例如：

```
var jsonObj = <?php echo $jsonEmail; ?>
document.getElementById("email-12").innerHTML=jsonObj.value; 
```

# google-drive-api - 远程上传文件到驱动器

> ID：10432452
> 
> 赞同：2
> 
> 时间：2012-05-03T13:29:25.460
> 
> 标签：google-drive-api

我试图从桌面应用程序将文件上传到谷歌驱动器，但我找不到如何使用谷歌驱动器 API 来做到这一点，因为它基于谷歌浏览器应用程序。对于这个问题，我应该使用 Google Drive API 还是 Document API？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T13:37:04.993

您可以使用 Drive API 或 Documents List API 来实现，但 Drive API 有一个额外的要求，即需要从 Chrome Web Store[安装应用程序（目前）。](https://developers.google.com/drive/apps_overview#installing_a_drive_app)安装后，如果您使用 OAuth 2.0 授权用户，则可以在桌面应用程序中使用 Drive API。

# mysql - 从不同的相关记录组中选择两列之一中包含重复值的所有行

> ID：10432458
> 
> 赞同：6
> 
> 时间：2012-05-03T13:29:38.367
> 
> 标签：mysql, group-by, duplicates, inner-join, having

我正在尝试创建一个 MySQL 查询，该查询将返回包含一组相关记录中重复值的所有单个行（未分组）。“相关记录组”是指具有相同帐号的那些（根据下面的示例）。

基本上，在共享相同不同帐号的每组相关记录中，仅选择那些其`date`或`amount`列的值与该帐户记录组中另一行的值相同的行。仅应将值视为该帐户组中的重复值。下面的示例表和理想输出详细信息应该可以解决问题。

此外，我不关心返回状态为 X 的任何记录，即使它们具有重复值。

## 带有相关数据的小样本表：

```
id   account   invoice   date         amount   status
1    1         1         2012-04-01   0        X
2    1         2         2012-04-01   120      P
3    1         2         2012-05-01   120      U
4    1         3         2012-05-01   117      U
5    2         4         2012-04-01   82       X
6    2         4         2012-05-01   82       U
7    2         5         2012-03-01   81       P
8    2         6         2012-05-01   80       U
9    3         7         2012-03-01   80       P
10   3         8         2012-04-01   79       U
11   3         9         2012-04-01   78       U 
```

## 从所需的 SQL 查询返回的理想输出：

```
id   account   invoice   date         amount   status
2    1         2         2012-04-01   120      P
3    1         2         2012-05-01   120      U
4    1         3         2012-05-01   117      U
6    2         4         2012-05-01   82       U
8    2         6         2012-05-01   80       U
10   3         8         2012-04-01   79       U
11   3         9         2012-04-01   78       U 
```

因此，不应同时返回第 7/9 行和第 8/9 行，因为它们的重复值在其各自帐户的范围内不被视为重复值。但是，应该返回第 8 行，因为它与第 6 行共享一个重复值。

稍后，我可能想通过仅抓取具有匹配状态的重复行来进一步完善选择，因此将排除第 2 行，因为它与该帐户记录组中的其他两个不匹配。这会使查询变得更加困难吗？是否只是添加 WHERE 或 HAVING 子句的问题，还是比这更复杂？

我希望我对我要完成的工作的解释是有道理的。我尝试过使用 INNER JOIN ，但这会多次返回每个所需的行。我不想要重复的重复。

### 表结构和样本值：

```
CREATE TABLE payment (
  id int(11) NOT NULL auto_increment,
  account int(10) NOT NULL default '0',
  invoice int(10) NOT NULL default '0',
  date date NOT NULL default '0000-00-00',
  amount int(10) NOT NULL default '0',
  status char(1) NOT NULL default '',
  PRIMARY KEY  (id)
);

INSERT INTO payment VALUES (1, 1, 1, '2012-04-01', 0, 'X'); 
INSERT INTO payment VALUES (2, 1, 2, '2012-04-01', 120, 'P'); 
INSERT INTO payment VALUES (3, 1, 2, '2012-05-01', 120, 'U'); 
INSERT INTO payment VALUES (4, 1, 3, '2012-05-01', 117, 'U'); 
INSERT INTO payment VALUES (5, 2, 4, '2012-04-01', 82, 'X'); 
INSERT INTO payment VALUES (6, 2, 4, '2012-05-01', 82, 'U'); 
INSERT INTO payment VALUES (7, 2, 5, '2012-03-01', 81, 'p'); 
INSERT INTO payment VALUES (8, 2, 6, '2012-05-01', 80, 'U'); 
INSERT INTO payment VALUES (9, 3, 7, '2012-03-01', 80, 'U'); 
INSERT INTO payment VALUES (10, 3, 8, '2012-04-01', 79, 'U'); 
INSERT INTO payment VALUES (11, 3, 9, '2012-04-01', 78, 'U'); 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-03T13:53:50.523

这种类型的查询可以实现为[半连接](http://en.wikipedia.org/wiki/Relational_algebra#Semijoin)。

半连接用于从连接中的*一个*表中选择行。

例如：

```
select distinct l.*
from payment l
inner join payment r
on 
  l.id != r.id and l.account = r.account and
  (l.date = r.date or l.amount = r.amount)
where l.status != 'X' and r.status != 'X'
order by l.id asc; 
```

请注意 , 的使用`distinct`，并且我只从左表中选择列。这样可以确保没有重复。

连接条件检查：

*   它没有加入一行（`l.id != r.id`）
*   行在同一个帐户中 ( `l.account = r.account`)
*   并且日期或金额相同 ( `l.date = r.date or l.amount = r.amount`)

* * *

对于问题的第二部分，您需要更新`on`查询中的子句。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-03T14:07:53.533

这似乎有效

```
select * from payment p1
join payment p2 on
(p1.id != p2.id 
 and p1.status != 'X'
 and p1.account = p2.account
 and (p1.amount = p2.amount or p1.date = p2.date))
group by p1.id 
```

[http://sqlfiddle.com/#!2/a50e9/3](http://sqlfiddle.com/#!2/a50e9/3)

# php - 将 PHP 代码转换为 Ruby

> ID：10432469
> 
> 赞同：-1
> 
> 时间：2012-05-03T13:30:13.153
> 
> 标签：php, ruby-on-rails, ruby

```
<?php

   if(!isset($_REQUEST['filename']))
   {
     exit('No file');
   }

   $upload_path = dirname("files"). '/';

   $filename = $_REQUEST['filename'];

   $fp = fopen($upload_path."/".$filename.".wav", "wb");

   ***fwrite($fp, file_get_contents('php://input'));***

   fclose($fp);

   exit('done');

?> 
```

我正在使用[此](http://www.sajithmr.me/jrecorder/index.html)示例尝试录制音频并将其发送到服务器。使用 PHP 它可以正常工作，但我想将此代码转换为 Ruby。在这一行中有 (php://input)，这是什么意思？我应该用红宝石写什么

fwrite($fp, file_get_contents('php://input')); 谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-03T13:37:56.167

显然，ruby 没有`php://`流包装器——它是特定于 PHP 的。所以你不能从字面上移植它。

`php://input`在这里解释：http: [//php.net/manual/en/wrappers.php.php](http://php.net/manual/en/wrappers.php.php)

> php://input 是一个只读流，允许您从请求正文中读取原始数据。

So for example, if that is a post request (which is normally the case), for Rails 3, the `request.raw_post` documentation is at [http://api.rubyonrails.org/classes/ActionDispatch/Request.html#method-i-raw_post](http://api.rubyonrails.org/classes/ActionDispatch/Request.html#method-i-raw_post) .

# ruby - 我正在使用 rbenv，那么为什么我的系统上有两个 Gem 路径？（OS X 狮子）

> ID：10432470
> 
> 赞同：18
> 
> 时间：2012-05-03T13:30:17.497
> 
> 标签：ruby, rubygems, rbenv

澄清一下，我`rbenv`用来管理我的 ruby​​ 版本。我的印象是二进制文件是`shims`在它们各自的 ruby​​ 版本目录中管理的。

这是我运行 gem 环境时系统显示的内容（我排除了不相关的部分）：

```
 - GEM PATHS:
     - /Volumes/Data/nathan/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1
     - /Volumes/Data/nathan/.gem/ruby/1.9.1 
```

有两个位置的任何理由？好奇的人想知道。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-05-11T19:34:09.437

我想我想出了这个问题的答案，所以我会发布它。

Rbenv 允许 ruby​​ 的全局和/或本地版本。因此，一旦通过 rbenv 安装和管理 ruby​​，您就可以将其声明为整个系统使用的全局 ruby​​ 版本。

同样，您可以在给定目录中声明本地 ruby​​ 版本（例如：特定的 rails 项目）。

全局 ruby​​ 版本使用主路径中的 .gem 文件，而本地 ruby​​ 版本使用隐藏在 rbenv 目录中的文件。

请注意，您可以（无论出于何种原因）声明与全局版本相同的本地版本。在这种情况下，本地版本将依赖于更深的 rbenv 目录中的 gem 文件，而不是 ~/.gem 目录。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-11T20:32:47.627

请记住，像 rbenv 和 rvm 这样的 ruby​​ 版本管理器是相对较新的作品。在它们存在之前，管理员用户通常会将 ruby​​ 安装在系统范围的位置，例如 /usr/local。但是非管理员需要一个地方来安装他们自己的 gem，因为他们在 /usr/local 下没有写权限。因此 ruby​​gems 创建者决定在当前用户的主目录中添加一个辅助 gem 路径，该路径将具有与系统位置类似的结构。

以下是过去 gem 路径的示例：

```
 - /usr/local/lib/ruby/gems/1.9.1
 - /Users/kelvin/.gem/ruby/1.9.1 
```

仍然可能有这样安装 ruby​​ 的机器，并且您仍然可以使用自动辅助 gem 路径。当然，您也可以使用 GEM_PATH 环境变量添加更多路径，但自动路径非常适合处理常见情况。

如果你有管理员权限，或者你使用版本管理器，你可以忽略 ~/.gem 目录作为工件，如果你愿意的话，它是过去的遗物。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-05T23:56:54.807

```
 - /Volumes/Data/nathan/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1 
```

来自 rbenv，因此 ruby​​ 会查找已安装的 gems rbenv。

```
 - /Volumes/Data/nathan/.gem/ruby/1.9.1 
```

显然， rbenv 并没有将自己限制在自己的 gems 中，而是包括来自系统 ruby​​ 的 gems，但仅包括作为用户安装的 gems（通过`gem --user-install`）。

# c# - C# for iPhone 中的推送通知问题？

> ID：10432475
> 
> 赞同：1
> 
> 时间：2012-05-03T13:30:40.680
> 
> 标签：c#, iphone, apple-push-notifications

我在我的应用程序中使用了推送通知，并且我使用了我们自己的服务器，它与苹果服务器通信。但问题是，通知在苹果服务器中排队，它不会向设备发送任何通知。

在服务器端，他们将 C# 用于推送通知服务，并且他们已经跟踪了该方法“service.QueueNotification(alertNotification)”中的值。所以通知总是在队列中，它不会向设备发送任何通知。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T11:33:07.960

我已经解决了这个问题，我正在 adhoc 模式下测试通知。问题是，我的开发人员帐户已过期，因此通知始终在来自苹果服务器的队列中，并且它不会向设备发送任何通知。之后，我使用了一些不同的有效帐户，现在可以正常工作了。

谢谢！

# javascript - 使用 jquery 悬停时显示文本

> ID：10432481
> 
> 赞同：2
> 
> 时间：2012-05-03T13:31:17.853
> 
> 标签：javascript, jquery, hover

我是 jquery 的新手，并试图在将鼠标悬停在 div 上时显示文本。我现在有一个带有几个正方形的基本 html 页面，其中一个在单击按钮时会旋转。现在，在同一个正方形 (div2) 中，我希望在将鼠标悬停在它上面时显示一些文本。

这是我的 HTML

```
<!DOCTYPE html>
<html>
<head>
<LINK href="divtest.css" rel="stylesheet" type="text/css"/>
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js" type="text/javascript"></script>
<script type="text/javascript" src=divtest.js></script>
</head>
<body>
<div id="border">
<div id="div1">
<div id="div2">
</div> 
</div>
</div>
<input type="button" value="button" onclick="rotate()" />

<script>
$("id=div2").hover(
function () {
    $(this).append($("<span> HOVERING!!!!! </span>"));
});
</script>

</body>
</html> 
```

我如何确定我想要文本“HOVERING!!!” 显示在 div2 上。

这是CSS

```
#border{
position:relative;
border-style:solid;
border-width:5px;
border-color:black;
width:1366;
height:768
}

#div1{
position:relative;
background-color: blue;
display:block;
height:500px;
width:500px;
left:350px;
}

#div2{
position:relative;
background-color: green;
display:block;
height:400px;
width:400px;
top:50px;
left:50px;
} 
```

现在对于我的 .js 页面

```
var obj = "div2";
    var angle = 0;
    var interval = 100;
    increment = 5;

   function rotate() {
    $('#' + obj).css({
        '-moz-transform': 'rotate(' + angle + 'deg)',
        'msTransform': 'rotate(' + angle + 'deg)',
        '-webkit-transform': 'rotate(' + angle + 'deg)',
        '-o-transform': 'rotate(' + angle + 'deg)'
    });
        angle += increment;
        setTimeout(rotate, interval);
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T13:35:09.037

仅使用 id

```
$("#div2").hover( 
```

代替

```
$("id=div2").hover( 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-03T13:52:56.857

与 Makkesk8 的建议相反，除非您有充分的理由这样做，否则如果您使用 jquery，请不要使用 MouseOver 和 MouseOut。请改用 MouseEnter 和 MouseLeave。[正如 Ben Nadel 的博客](http://www.bennadel.com/blog/1805-jQuery-Events-MouseOver-MouseOut-vs-MouseEnter-MouseLeave.htm)中所解释的那样，MouseEnter 和 MouseLeave 将使您的生活更轻松一些。

也就是说，悬停在正确的轨道上，因为它将 MouseEnter 和 MouseLeave 包装到一个函数中。您现在需要的是一个调用中的两个处理程序。您的脚本应该看起来更像这样：

```
<script>
    $("#div2").hover(
function ()
{
    $(this).html($("<span> HOVERING!!!!! </span>"));
},
function ()
{
    $(this).html($(""));
});
</script> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-03T13:36:09.210

```
<script>
    $("#div2").hover(function () {
        $(this).append($("<span> HOVERING!!!!! </span>"));
    });
</script> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-03T13:37:48.710

```
$("#div2").hover(
function () {
    $(this).append($("<span> HOVERING!!!!! </span>"));
}); 
```

**或者**

```
$('div[id="div2"]').hover(
function () {
    $(this).append($("<span> HOVERING!!!!! </span>"));
}); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-03T13:38:15.920

您的代码（即使是固定的）将始终附加 HOVERING！！！（一次又一次）。请参阅此处的示例以获取仅显示一次的版本：http: [//jsfiddle.net/ggjbP/](http://jsfiddle.net/ggjbP/)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-05-03T13:39:36.447

试试这个-->

JSFiddle（适用于 chrome/FF）--> [http://jsfiddle.net/rt2800/Mab6g/](http://jsfiddle.net/rt2800/Mab6g/)

```
var obj = "div2";
    var angle = 0;
    var interval = 100;
    increment = 5;

   function rotate() {
    $('#' + obj).css({
        '-moz-transform': 'rotate(' + angle + 'deg)',
        'msTransform': 'rotate(' + angle + 'deg)',
        '-webkit-transform': 'rotate(' + angle + 'deg)',
        '-o-transform': 'rotate(' + angle + 'deg)'
    });
        angle += increment;
        setTimeout(rotate, interval);
    }

$(document).ready(function(){
$("#div2").hover(
function () {
    $(this).append($("<span> HOVERING!!!!! </span>"));
});
$('#btnRotate').on('click', rotate);
                  })​ 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-05-03T13:44:59.253

试试这个

```
<div id=div2><span></span></div>
<script>
    $("#div2").hover(
        function () {
            $(this).find("span").text("HOVERING!!!!!");
        },
        function () { 
            $(this).find("span").text("");
        },
    );  
</script> 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-05-03T13:32:36.903

通过 id 索取东西的方法是`#`

```
$("id=div2") 
```

应该

```
$("#div2") 
```

[http://jsfiddle.net/9qU4Z/1/](http://jsfiddle.net/9qU4Z/1/)

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-05-03T13:34:02.373

你应该看看 OnMouseOver();

[http://www.w3schools.com/jsref/event_onmouseover.asp](http://www.w3schools.com/jsref/event_onmouseover.asp)

# python - web2py：创建传递参数的文档测试

> ID：10432488
> 
> 赞同：2
> 
> 时间：2012-05-03T13:31:28.673
> 
> 标签：python, web2py, doctest, url-parameters

希望是一个简单的问题，但文档或 web2py 书中似乎没有涵盖它......

我有一个看起来像这样的 web2py 控制器方法：

```
def mymethod():
    '''
    doctests go here
    '''
    param1 = request.vars['param1']
    param2 = request.vars['param2']
    param3 = request.vars['param3']
    # Stuff happens...
    return dict(result=result) 
```

根据文档，参数作为请求变量传入

有什么方法可以构建一个 doctest（与方法定义内联）来评估调用的返回值，例如`mymethod(param1=9, param2='a', param3=3.7)`？

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-03T14:22:50.463

只需将所需的值放在 doctest 中的 request.vars 中：

```
def mymethod():
    '''
    >>> request.vars.update(param1=9, param2='a', param3=3.7)
    >>> mymethod()
    [expected output of mymethod goes here]
    ''' 
```

为了获得正确的 doctest，您可以在 web2py shell 中进行操作，您可以按如下方式开始：

```
python web2py.py -S myapp/mycontroller -M -N 
```

这将在执行应用程序模型文件的环境中为您提供 Python shell（这就是 -M 选项的作用）。由于指定了 mycontroller，您还可以调用 mycontroller 中的任何函数。在 shell 中运行一些命令，然后将会话粘贴到您的文档字符串中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T14:45:23.900

除了@Anthony 提供的出色示例外，我还尝试在测试 restful 服务时使用 urllib2.urlopen(...) 。从文档的角度来看，代码不是很干净，但它可以工作。

```
@request.restful()
def api():
    '''The following code demostrates how to interact with this api via python.

    >>> import urllib2, urllib, httplib, json
    >>> host = 'localhost:8000'
    >>> func = 'api'  # Otherwise request.function is NOT current function name during doctest
    >>> base = 'http://%s/%s/%s/%s' % (host, request.application, request.controller, func)

    Read all stuff.
    >>> json.load(urllib2.urlopen(base))
    {u'content': []}

    Create an entries.
    >>> p = {'name': 'Peter Pan', 'address': 'Neverland',}
    >>> r = json.load(urllib2.urlopen(base, urllib.urlencode(p)))
    >>> r['id'] > 0 and r['errors'] == {}  # typically as {'errors': {}, 'id': 1}
    True

    blah blah

    '''
    # the function body goes here 
```

# java - 有没有办法在 IResultListener 方法之前运行 @after 方法？

> ID：10432490
> 
> 赞同：0
> 
> 时间：2012-05-03T13:31:59.740
> 
> 标签：java, testing, testng

我有一个监听器，它实现了 IResultListener2 的 onTestSuccess 和 onTestFailure 方法。在我的测试中，我在 @after 注释方法中创建了侦听器所需的屏幕截图。但是 testng 在 @after 方法之前调用侦听器中的方法。

是否有先运行@after 方法的参数？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T07:28:12.877

AFAIK，没有这种参数。after 方法将特定于一组特定的情况。您不希望为所有案例而不是特定集合执行捕获屏幕截图的逻辑吗？在这种情况下，您的屏幕截图捕获逻辑应该在您的侦听器方法中，并且您的特定案例集的任何清理逻辑都应该在 after 方法中。
如果您想在 aftermethods 之后做一些特定的事情，那么您可以尝试实现 IconfigurationListener，并在检查调用方法是否是 aftermethod 之后实现这些方法，例如..

```
public void onConfigurationSuccess(ITestResult arg0) {
    if(arg0.getMethod().isAfterMethodConfiguration())...do something;

} 
```

希望能帮助到你..

# primefaces - Primefaces 和圆形旋转木马

> ID：10432491
> 
> 赞同：1
> 
> 时间：2012-05-03T13:32:07.990
> 
> 标签：primefaces, jsf-2, carousel

我将 Primefaces 3.2 与 Tomcat 7.0.23 和 JSF 2.0 一起使用，我正在使用该组件。

```
 <p:carousel id="aCarousel" value="#{BBCarousel.carouselItems}" var="carouselItem"  
              autoPlayInterval="3000"
              rows="4" vertical="true" circular="true" pageLinks="0" headerText="Informations"  >      

    <div class="thumbnail">
      <img src="images/minilogo.png" />
    </div>
    <div class="info">
      <a href="#">#{carouselItem.item_title}</a>
      <span class="cat">Category: #{carouselItem.item_cat}</span>
    </div>
  </p:carousel> 
```

当轮播到达最后一个轮播项目时，轮播滑动到（向上移动）第一个元素。相反，我希望最后一个项目以“循环方式”连接到第一个项目，没有中断。 .所以我得到了一个连续的滚动效果..我希望我已经清楚了..谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T13:47:04.080

看着 Firebug，我看到轮播主要是一个 div 和一个具有坐标值的隐藏输入。

```
<div id="slideShow" class="ui-carousel ui-widget ui-widget-content ui-corner-all" style="width: 404px;">
<div class="ui-carousel-header ui-widget-header ui-corner-all">
<div class="ui-carousel-viewport" style="width: 404px; height: 253px;">
<ul style="left: -808px;">
<li class="ui-carousel-item ui-widget-content ui-corner-all photo">
<img id="slideShow:j_idt15" alt="" src="/showcase/images/nature1.jpg;jsessionid=A181FD9A4E1990E40E09B3743EB2EE61">
</li>
<li class="ui-carousel-item ui-widget-content ui-corner-all photo">
<li class="ui-carousel-item ui-widget-content ui-corner-all photo">
<li class="ui-carousel-item ui-widget-content ui-corner-all photo">
</ul>
</div>
<input id="slideShow_first" type="hidden" value="2" name="slideShow_first">
</div> 
```

这些值在 autoPlayInterval 处发生变化，看起来就像调用 jQuery 脚本来移动图像并在执行此操作时执行效果。

我在 Primefaces 文档中没有看到任何暗示可以更改不需要的自动播放效果的内容。如果不修改 Primefaces 代码，我认为这是不可能的。

# c# - 如何检测客户端线程何时退出？

> ID：10432494
> 
> 赞同：18
> 
> 时间：2012-05-03T13:32:11.897
> 
> 标签：c#, .net, multithreading

这是一个有趣的图书馆作家的困境。在我的库中（在我的情况下为 EasyNetQ），我正在分配线程本地资源。因此，当客户端创建一个新线程然后在我的库上调用某些方法时，就会创建新资源。在 EasyNetQ 的情况下，当客户端在新线程上调用“发布”时，会创建到 RabbitMQ 服务器的新通道。我希望能够检测到客户端线程何时退出，以便我可以清理资源（通道）。

我想出的唯一方法是创建一个新的“观察者”线程，它只会阻塞对客户端线程的 Join 调用。这里做一个简单的演示：

首先是我的“图书馆”。它抓取客户端线程，然后创建一个阻塞“加入”的新线程：

```
public class Library
{
    public void StartSomething()
    {
        Console.WriteLine("Library says: StartSomething called");

        var clientThread = Thread.CurrentThread;
        var exitMonitorThread = new Thread(() =>
        {
            clientThread.Join();
            Console.WriteLine("Libaray says: Client thread existed");
        });

        exitMonitorThread.Start();
    }
} 
```

这是一个使用我的图书馆的客户。它创建一个新线程，然后调用我的库的 StartSomething 方法：

```
public class Client
{
    private readonly Library library;

    public Client(Library library)
    {
        this.library = library;
    }

    public void DoWorkInAThread()
    {
        var thread = new Thread(() =>
        {
            library.StartSomething();
            Thread.Sleep(10);
            Console.WriteLine("Client thread says: I'm done");
        });
        thread.Start();
    }
} 
```

当我这样运行客户端时：

```
var client = new Client(new Library());

client.DoWorkInAThread();

// give the client thread time to complete
Thread.Sleep(100); 
```

我得到这个输出：

```
Library says: StartSomething called
Client thread says: I'm done
Libaray says: Client thread existed 
```

所以它有效，但它很丑。我真的不喜欢所有这些被阻塞的观察者线程挂在周围的想法。有没有更好的方法来做到这一点？

**第一种选择。**

提供一个返回实现 IDisposable 的 worker 的方法，并在文档中明确说明您不应在线程之间共享 worker。这是修改后的库：

```
public class Library
{
    public LibraryWorker GetLibraryWorker()
    {
        return new LibraryWorker();
    }
}

public class LibraryWorker : IDisposable
{
    public void StartSomething()
    {
        Console.WriteLine("Library says: StartSomething called");
    }

    public void Dispose()
    {
        Console.WriteLine("Library says: I can clean up");
    }
} 
```

客户端现在有点复杂：

```
public class Client
{
    private readonly Library library;

    public Client(Library library)
    {
        this.library = library;
    }

    public void DoWorkInAThread()
    {
        var thread = new Thread(() =>
        {
            using(var worker = library.GetLibraryWorker())
            {
                worker.StartSomething();
                Console.WriteLine("Client thread says: I'm done");
            }
        });
        thread.Start();
    }
} 
```

此更改的主要问题是它是 API 的重大更改。现有客户将不得不重新编写。现在这不是一件坏事，这意味着重新审视它们并确保它们正确清理。

**非破坏性第二种选择**。API 为客户端提供了一种声明“工作范围”的方法。范围完成后，库可以清理。该库提供了一个实现 IDisposable 的 WorkScope，但与上面的第一个替代方案不同，StartSomething 方法保留在 Library 类中：

```
public class Library
{
    public WorkScope GetWorkScope()
    {
        return new WorkScope();
    }

    public void StartSomething()
    {
        Console.WriteLine("Library says: StartSomething called");
    }
}

public class WorkScope : IDisposable
{
    public void Dispose()
    {
        Console.WriteLine("Library says: I can clean up");
    }
} 
```

客户端只需将 StartSomething 调用放在 WorkScope 中......

```
public class Client
{
    private readonly Library library;

    public Client(Library library)
    {
        this.library = library;
    }

    public void DoWorkInAThread()
    {
        var thread = new Thread(() =>
        {
            using(library.GetWorkScope())
            {
                library.StartSomething();
                Console.WriteLine("Client thread says: I'm done");
            }
        });
        thread.Start();
    }
} 
```

我不喜欢第一种选择，因为它不会强迫图书馆用户考虑范围。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-03T16:41:07.930

您可以创建具有终结器的线程静态监视器。当线程处于活动状态时，它将持有监视器对象。当thead死亡时，它将停止持有它。稍后，当 GC 启动时，它将最终确定您的监视器。在终结器中，您可以引发一个事件，该事件将通知您的框架有关（观察到的）客户端线程的死亡。

可以在此要点中找到示例代码：[https ://gist.github.com/2587063](https://gist.github.com/2587063)

这是它的副本：

```
public class ThreadMonitor
{
    public static event Action<int> Finalized = delegate { };
    private readonly int m_threadId = Thread.CurrentThread.ManagedThreadId;

    ~ThreadMonitor()
    {
        Finalized(ThreadId);
    }

    public int ThreadId
    {
        get { return m_threadId; }
    }
}

public static class Test
{
    private readonly static ThreadLocal<ThreadMonitor> s_threadMonitor = 
        new ThreadLocal<ThreadMonitor>(() => new ThreadMonitor());

    public static void Main()
    {
        ThreadMonitor.Finalized += i => Console.WriteLine("thread {0} closed", i);
        var thread = new Thread(() =>
        {
            var threadMonitor = s_threadMonitor.Value;
            Console.WriteLine("start work on thread {0}", threadMonitor.ThreadId);
            Thread.Sleep(1000);
            Console.WriteLine("end work on thread {0}", threadMonitor.ThreadId);
        });
        thread.Start();
        thread.Join();

        // wait for GC to collect and finalize everything
        GC.GetTotalMemory(forceFullCollection: true);

        Console.ReadLine();
    }
} 
```

我希望它有所帮助。我认为它比你额外的等待线程更优雅。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-03T13:49:02.553

由于您不直接控制线程创建，因此您很难知道线程何时完成其工作。另一种方法可能是让您强制客户在完成后通知您：

```
public interface IThreadCompletedNotifier
{
   event Action ThreadCompleted;
}

public class Library
{
    public void StartSomething(IThreadCompletedNotifier notifier)
    {
        Console.WriteLine("Library says: StartSomething called");
        notifier.ThreadCompleted += () => Console.WriteLine("Libaray says: Client thread existed");
        var clientThread = Thread.CurrentThread;
        exitMonitorThread.Start();
    }
} 
```

这样，任何呼叫您的客户端都将被迫传递某种通知机制，该机制将告诉您何时完成它的工作：

```
public class Client : IThreadCompletedNotifier
{
    private readonly Library library;

    public event Action ThreadCompleted;

    public Client(Library library)
    {
        this.library = library;
    }

    public void DoWorkInAThread()
    {
        var thread = new Thread(() =>
        {
            library.StartSomething();
            Thread.Sleep(10);
            Console.WriteLine("Client thread says: I'm done");
            if(ThreadCompleted != null)
            {
               ThreadCompleted();
            }
        });
        thread.Start();
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-03T13:57:14.630

除了做任何异步花哨的东西来完全避免线程之外，我会尝试将所有监视合并到一个线程中，该线程会轮询所有已访问您的库的线程的 .ThreadState 属性，例如，每 100 毫秒（我不确定您需要多快清理资源...）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-03T13:48:20.517

如果客户端线程调用您的库并在内部分配一些资源，则客户端应该“打开”您的库并取回一个令牌以进行所有进一步的操作。该标记可以是库内部向量的 int 索引，也可以是指向内部对象/结构的 void 指针。坚持客户必须在终止前关闭令牌。

这就是所有此类 lib 调用中 99% 的工作原理，其中必须在客户端调用中保留状态，例如。套接字句柄，文件句柄。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-03T13:48:53.627

你的`.Join`解决方案对我来说看起来很优雅。阻塞的观察者线程并不是一件可怕的事情。

# php - 从文本中提取特定数字的正则表达式模式

> ID：10432499
> 
> 赞同：-7
> 
> 时间：2012-05-03T13:32:32.827
> 
> 标签：php, regex, preg-match-all

我正在尝试使用该`preg_match_all()`函数从 php 中的字符串中提取电话号码。我知道这种模式会`'!\d+!'`提取所有数字。但我需要它做更多。我要提取的数字要么以 256 开头，然后是 9 个数字，要么以 078,077,071,079 开头，然后是 8 个数字。谢谢你。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-03T13:44:54.923

**尝试这个：**

```
\b(?:256\d{9}|07[17-9]\d{8})\b 
```

**解释：**

```
<!--
\b(?:256\d{9}|07[17-9]\d{8})\b

Options: ^ and $ match at line breaks; free-spacing

Assert position at a word boundary «\b»
Match the regular expression below «(?:256\d{9}|07[17-9]\d{8})»
   Match either the regular expression below (attempting the next alternative only if this one fails) «256\d{9}»
      Match the characters “256” literally «256»
      Match a single digit 0..9 «\d{9}»
         Exactly 9 times «{9}»
   Or match regular expression number 2 below (the entire group fails if this one fails to match) «07[17-9]\d{8}»
      Match the characters “07” literally «07»
      Match a single character present in the list below «[17-9]»
         The character “1” «1»
         A character in the range between “7” and “9” «7-9»
      Match a single digit 0..9 «\d{8}»
         Exactly 8 times «{8}»
Assert position at a word boundary «\b»
--> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-03T13:47:29.360

我会使用：

```
(256\d|07[17-9])\d{8} 
```

[正则表达式链接](http://regexr.com?30reh)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-03T13:39:52.717

我并不声称自己是正则表达式的专家，但我测试了一个有效的。

`(^(256[0-9]{9})|^(078|077|071|079)[0-9]{8})`

我针对以下情况进行了尝试：

```
256123456789
07812345678
07712345678
07112345678
07912345678
07212345678 
```

注意最后一个不符合你说的规则之一。输出与最后一个匹配。

# python - webapp 处理程序中的百分比编码不一致

> ID：10432505
> 
> 赞同：-1
> 
> 时间：2012-05-03T13:32:42.207
> 
> 标签：python, google-app-engine, python-2.5

我正在尝试让处理程序映射与 Google App Engine 一起使用。

正则表达式是这样的：

```
('/api/1/apps/([-0-9a-zA-Z]+)/values/(.+)', ApiValueHandler) 
```

当 URL 看起来像`/api/1/apps/50b96eb0/values/New%20note%2Fhello`传递给我的处理程序的值是`New%20note/hello`. 如您所见，它没有转义斜线，但没有转义空格。

是否有我在某处缺少的设置，或者我需要做一些逃避自己的事情？如果有一些价值观，它永远不会逃避，在某个地方有这些清单吗？

**更新：**

这是一个测试应用程序，它在使用 Python 2.5 在 Windows 7 上的开发服务器上运行时显示此行为。

主文件

```
from google.appengine.ext import webapp
from google.appengine.ext.webapp import util

class MainHandler(webapp.RequestHandler):
    def get(self, blah):
        self.response.out.write(blah)

app = webapp.WSGIApplication([('/(.*)', MainHandler)], debug=True)
util.run_wsgi_app(app) 
```

应用程序.yaml

```
application: engineapp
version: 1
runtime: python
api_version: 1

handlers:
- url: .*
  script: main.py 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T13:37:33.107

用于`urllib.unquote`对字符串进行转义。

[例子](http://ideone.com/sB9CW)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T18:44:34.560

未转义字符由`quote`：字母、数字`_.-`和默认安全字符定义`/`。

[http://docs.python.org/library/urllib.html#urllib.quote](http://docs.python.org/library/urllib.html#urllib.quote)

只需`unquote`在匹配的字符串上使用。

```
>>> urllib.unquote('/%24/')
'/$/' 
```

[http://docs.python.org/library/urllib.html#urllib.unquote](http://docs.python.org/library/urllib.html#urllib.unquote)

# java - 未知的抽象模式类型

> ID：10432521
> 
> 赞同：7
> 
> 时间：2012-05-03T13:33:49.587
> 
> 标签：java, mysql, database-design, jpql, toplink

根据 axtavt 的回答，这几乎可以肯定是 Notebean 和 NoteBean 之间的命名问题。这里是否有特定的约定，只是普通的 CamelCase？

我相信我已经更新了实体中的 @NamedQuery 注释并正在使用控制器中的注释，并且名称看起来匹配，但我仍然收到关于架构的相同错误，我无法获得太多信息在。

JPA 控制器：

```
package net.bounceme.dur.nntp.controller;

import java.util.*;
import java.util.logging.Logger;
import javax.mail.Message;
import javax.persistence.*;
import javax.swing.DefaultListModel;
import net.bounceme.dur.nntp.model.NoteBean;

public class NotesController {

    private static final long serialVersionUID = 1L;
    private static final Logger LOG = Logger.getLogger(NotesController.class.getName());
    private Message message;
    private List<NoteBean> notes = new ArrayList<NoteBean>();
    private DefaultListModel defaultListModel = new DefaultListModel();
    private EntityManagerFactory emf;
    private EntityManager em;
    private String PERSISTENCE_UNIT_NAME = "nntpPU";

    public NotesController() {
        emf = Persistence.createEntityManagerFactory(PERSISTENCE_UNIT_NAME);
        em = emf.createEntityManager();
        LOG.info("entity manager made???" + em.isOpen());
        populateList();
    }

    private void populateList() {
        LOG.info("open?" + em.isOpen());
        em.getTransaction().begin();
        LOG.info("trying to populate.....");
        //Query q = em.createQuery("SELECT n FROM NoteBean n WHERE n.id = :id");
        Query q = em.createNamedQuery("NoteBean.findAll");
        LOG.info(q.toString());
        List results = q.getResultList();
        em.getTransaction().commit();
        setNotes(results);
        DefaultListModel dlm = new DefaultListModel();
        for (NoteBean n : getNotes()) {
            dlm.addElement(n);
        }
        setDefaultListModel(dlm);
    }

    public Message getMessage() {
        return message;
    }

    public void addNote(NoteBean noteBean) {
        LOG.info(noteBean.toString());
        em.getTransaction().begin();
        em.persist(noteBean);
        em.getTransaction().commit();
        populateList();
    }

    public void setMessage(Message message) {
        this.message = message;
    }

    private List<NoteBean> getNotes() {
        return notes;
    }

    private void setNotes(List<NoteBean> notes) {
        this.notes = notes;
    }

    public DefaultListModel getDefaultListModel() {
        return defaultListModel;
    }

    public void setDefaultListModel(DefaultListModel defaultListModel) {
        this.defaultListModel = defaultListModel;
    }
} 
```

实体：

```
package net.bounceme.dur.nntp.model;

import java.io.Serializable;
import java.util.Date;
import javax.persistence.*;
import javax.xml.bind.annotation.XmlRootElement;

@Entity
@Table(name = "NOTEBEAN", catalog = "nntp", schema = "")
@XmlRootElement
@NamedQueries({
    @NamedQuery(name = "NoteBean.findAll", query = "SELECT n FROM NoteBean n"),
    @NamedQuery(name = "NoteBean.findById", query = "SELECT n FROM Notebean n WHERE n.id = :id"),
    @NamedQuery(name = "NoteBean.findByStamp", query = "SELECT n FROM Notebean n WHERE n.stamp = :stamp"),
    @NamedQuery(name = "NoteBean.findByNote", query = "SELECT n FROM Notebean n WHERE n.note = :note")
})
public class NoteBean implements Serializable {

    private static final long serialVersionUID = 1L;
    @Id
    @Basic(optional = false)
    @Column(name = "ID", nullable = false)
    private Long id;
    @Column(name = "STAMP")
    @Temporal(TemporalType.DATE)
    private Date stamp;
    @Column(name = "NOTE", length = 255)
    private String note;

    public NoteBean() {
    }

    public NoteBean(Long id) {
        this.id = id;
    }

    public Long getId() {
        return id;
    }

    public void setId(Long id) {
        this.id = id;
    }

    public Date getStamp() {
        return stamp;
    }

    public void setStamp(Date stamp) {
        this.stamp = stamp;
    }

    public String getNote() {
        return note;
    }

    public void setNote(String note) {
        this.note = note;
    }

    @Override
    public int hashCode() {
        int hash = 0;
        hash += (id != null ? id.hashCode() : 0);
        return hash;
    }

    @Override
    public boolean equals(Object object) {
        // TODO: Warning - this method won't work in the case the id fields are not set
        if (!(object instanceof NoteBean)) {
            return false;
        }
        NoteBean other = (NoteBean) object;
        if ((this.id == null && other.id != null) || (this.id != null && !this.id.equals(other.id))) {
            return false;
        }
        return true;
    }

    @Override
    public String toString() {
        return "net.bounceme.dur.nntp.model.Notebean[ id=" + id + " ]";
    }
} 
```

运行时错误：

```
init:
Deleting: /home/thufir/NetBeansProjects/SwingNNTP/build/built-jar.properties
deps-jar:
Updating property file: /home/thufir/NetBeansProjects/SwingNNTP/build/built-jar.properties
Compiling 2 source files to /home/thufir/NetBeansProjects/SwingNNTP/build/classes
warning: [options] bootstrap class path not set in conjunction with -source 1.5
Note: /home/thufir/NetBeansProjects/SwingNNTP/src/net/bounceme/dur/nntp/controller/NotesController.java uses unchecked or unsafe operations.
Note: Recompile with -Xlint:unchecked for details.
1 warning
compile:
run:
May 03, 2012 7:23:05 AM net.bounceme.dur.nntp.PropertiesReader getProps
INFO: NNTP.loadMessages...
May 03, 2012 7:23:06 AM net.bounceme.dur.nntp.controller.MessagesEnum <init>
INFO: starting controller..
[TopLink Info]: 2012.05.03 07:23:10.319--ServerSession(10922033)--TopLink, version: Oracle TopLink Essentials - 2.0.1 (Build b09d-fcs (12/06/2007))
Exception in thread "AWT-EventQueue-0" Local Exception Stack: 
Exception [TOPLINK-8034] (Oracle TopLink Essentials - 2.0.1 (Build b09d-fcs (12/06/2007))): oracle.toplink.essentials.exceptions.EJBQLException
Exception Description: Error compiling the query [NoteBean.findByNote: SELECT n FROM Notebean n WHERE n.note = :note]. Unknown abstract schema type [Notebean].
    at oracle.toplink.essentials.exceptions.EJBQLException.unknownAbstractSchemaType(EJBQLException.java:494)
    at oracle.toplink.essentials.internal.parsing.ParseTreeContext.classForSchemaName(ParseTreeContext.java:163)
    at oracle.toplink.essentials.internal.parsing.SelectNode.getClassOfFirstVariable(SelectNode.java:366)
    at oracle.toplink.essentials.internal.parsing.SelectNode.getReferenceClass(SelectNode.java:354)
    at oracle.toplink.essentials.internal.parsing.ParseTree.getReferenceClass(ParseTree.java:463)
    at oracle.toplink.essentials.internal.parsing.ParseTree.adjustReferenceClassForQuery(ParseTree.java:103)
    at oracle.toplink.essentials.internal.parsing.EJBQLParseTree.populateReadQueryInternal(EJBQLParseTree.java:127)
    at oracle.toplink.essentials.internal.parsing.EJBQLParseTree.populateQuery(EJBQLParseTree.java:108)
    at oracle.toplink.essentials.internal.ejb.cmp3.base.EJBQueryImpl.buildEJBQLDatabaseQuery(EJBQueryImpl.java:219)
    at oracle.toplink.essentials.queryframework.EJBQLPlaceHolderQuery.processEjbQLQuery(EJBQLPlaceHolderQuery.java:111)
    at oracle.toplink.essentials.internal.sessions.AbstractSession.processEJBQLQueries(AbstractSession.java:2059)
    at oracle.toplink.essentials.internal.sessions.AbstractSession.processEJBQLQueries(AbstractSession.java:2046)
    at oracle.toplink.essentials.internal.sessions.DatabaseSessionImpl.postConnectDatasource(DatabaseSessionImpl.java:724)
    at oracle.toplink.essentials.internal.sessions.DatabaseSessionImpl.loginAndDetectDatasource(DatabaseSessionImpl.java:604)
    at oracle.toplink.essentials.ejb.cmp3.EntityManagerFactoryProvider.login(EntityManagerFactoryProvider.java:280)
    at oracle.toplink.essentials.internal.ejb.cmp3.EntityManagerSetupImpl.deploy(EntityManagerSetupImpl.java:229)
    at oracle.toplink.essentials.internal.ejb.cmp3.base.EntityManagerFactoryImpl.getServerSession(EntityManagerFactoryImpl.java:93)
    at oracle.toplink.essentials.internal.ejb.cmp3.base.EntityManagerFactoryImpl.createEntityManagerImpl(EntityManagerFactoryImpl.java:126)
    at oracle.toplink.essentials.internal.ejb.cmp3.base.EntityManagerFactoryImpl.createEntityManagerImpl(EntityManagerFactoryImpl.java:120)
    at oracle.toplink.essentials.internal.ejb.cmp3.EntityManagerFactoryImpl.createEntityManager(EntityManagerFactoryImpl.java:91)
    at net.bounceme.dur.nntp.controller.NotesController.<init>(NotesController.java:23)
    at net.bounceme.dur.nntp.gui.Detail.<init>(Detail.java:20)
    at net.bounceme.dur.nntp.gui.NewFrame.initComponents(NewFrame.java:30)
    at net.bounceme.dur.nntp.gui.NewFrame.<init>(NewFrame.java:17)
    at net.bounceme.dur.nntp.gui.NewFrame$2.run(NewFrame.java:62)
    at java.awt.event.InvocationEvent.dispatch(InvocationEvent.java:251)
    at java.awt.EventQueue.dispatchEventImpl(EventQueue.java:705)
    at java.awt.EventQueue.access$000(EventQueue.java:101)
    at java.awt.EventQueue$3.run(EventQueue.java:666)
    at java.awt.EventQueue$3.run(EventQueue.java:664)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.security.ProtectionDomain$1.doIntersectionPrivilege(ProtectionDomain.java:76)
    at java.awt.EventQueue.dispatchEvent(EventQueue.java:675)
    at java.awt.EventDispatchThread.pumpOneEventForFilters(EventDispatchThread.java:211)
    at java.awt.EventDispatchThread.pumpEventsForFilter(EventDispatchThread.java:128)
    at java.awt.EventDispatchThread.pumpEventsForHierarchy(EventDispatchThread.java:117)
    at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:113)
    at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:105)
    at java.awt.EventDispatchThread.run(EventDispatchThread.java:90)
BUILD SUCCESSFUL (total time: 10 seconds) 
```

仅供参考，mysql控制台输出：

```
mysql> describe nntp.NOTEBEAN;
+-------+--------------+------+-----+---------+-------+
| Field | Type         | Null | Key | Default | Extra |
+-------+--------------+------+-----+---------+-------+
| ID    | bigint(20)   | NO   | PRI | NULL    |       |
| STAMP | date         | YES  |     | NULL    |       |
| NOTE  | varchar(255) | YES  |     | NULL    |       |
+-------+--------------+------+-----+---------+-------+
3 rows in set (0.00 sec)

mysql> 
mysql> select * from nntp.NOTEBEAN;
Empty set (0.04 sec)

mysql> 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-03T13:41:54.187

您的实体类的名称（因此，用于查询的实体的默认逻辑名称）是`NoteBean`，而堆栈跟踪抱怨`Notebean`.

因此，您应该在查询中使用`NoteBean`而不是：`Notebean`

```
@NamedQuery(name = "Notebean.findById", 
    query = "SELECT n FROM NoteBean n WHERE n.id = :id") 
```

# sinatra - 在 Sinatra 中启用 Sprockets 调试模式

> ID：10432527
> 
> 赞同：1
> 
> 时间：2012-05-03T13:34:17.927
> 
> 标签：sinatra, asset-pipeline, sprockets

如何在 Sinatra 中启用 Sprockets 的调试模式。我更喜欢在开发时不连接资产

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T02:53:42.393

我不相信 Sprockets 本身有调试选项。我可能是错的，但我在他们的源代码中没有看到任何关于调试模式的信息。

我确实碰巧在[sprockets-rails 源码中看到了与 Rails 开发模式相关的内容](https://github.com/rails/sprockets-rails/blob/master/lib/sprockets/rails/helpers/rails_helper.rb)

编辑：我可能会为 Sinatra 推荐一些东西，比如[Sinatra-assetpack](http://ricostacruz.com/sinatra-assetpack/#assets_serve)，它内置了开发和生产模式。

# android - Android for SQLite 数据库中 i18n l10n 的最佳方式

> ID：10432529
> 
> 赞同：0
> 
> 时间：2012-05-03T13:34:34.283
> 
> 标签：android, sqlite

我正在使用 SQLite 在类似琐事的 android 游戏中存储问题。我已按照使用自己的 SQLite 数据库的教程进行操作：

[http://www.reigndesign.com/blog/using-your-own-sqlite-database-in-android-applications/](http://www.reigndesign.com/blog/using-your-own-sqlite-database-in-android-applications/)

我想添加 i18n 功能，我想知道该表是否`android_metadata`可以用于此（**以及如何**）或用于其他用途，我最好为 i18n 添加一个字段。

如果`android_metadata`要使用表：它如何链接到存储在 QUESTIONS 表中的每个问题？

我当前的数据库只有一个具有这种结构的表（除了 android_metadata）：

```
CREATE TABLE "QUESTIONS" (
_id INTEGER, 
question TEXT,
answer TEXT
) 
```

在此先感谢，丹尼尔。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T13:36:33.530

为您的不同语言环境添加一个字段

```
CREATE TABLE "QUESTIONS" (
 _id INTEGER, 
 language TEXT,
 question TEXT,
 answer TEXT
) 
```

并在适当的查询中使用语言

# c++ - 包含指针向量的类的 C++ 析构函数

> ID：10432533
> 
> 赞同：0
> 
> 时间：2012-05-03T13:35:07.693
> 
> 标签：c++, destructor, stdvector

我有一个看起来像这样的类：

```
#include <iostream>
#include <vector>
using namespace std;

class MyClass
{
    vector<int*> V;

public:
    MyClass();        
    MyClass(int n);
    ~MyClass();
};

MyClass::MyClass()
{             
    return;
}

MyClass::MyClass(int n)
{
    int* T = new int[n];
    for(int i=0; i<n; i++)
    {
        T[i]=i;
        V.push_back(&(T[i]));
    }
    return;
}

MyClass::~MyClass()
{
    for(int i =0; i<V.size(); i++)
        delete V[i];
    return;
}

int main()
{   
    MyClass C(5);
    return 0;
} 
```

1.  我的析构函数有什么问题？执行此操作时出现“ *** glibc detected *** ./a.out: free(): invalid pointer:...”错误。
2.  你认为我应该使用 ptr_vector 吗？我不知道我是否有勇气去了解这些。

提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-03T13:38:00.563

编辑：你的意图是有一个指针向量，而不是数组，所以问题出在你的构造函数上：

```
int* T = new int[n];
for(int i=0; i<n; i++)
{
   T[i]=i;
   V.push_back(&(T[i]));
} 
```

这不会创建`n`指针，而是指向`n` `int`s 的指针。你应该做：

```
for(int i=0; i<n; i++)
{
    V.push_back(new int(i));
} 
```

编辑前：

问题*不仅*在于析构函数，还在于构造函数。

我假设您想将数组推送到向量中，在这种情况下您需要：

```
MyClass::MyClass(int n)
{
    int* T = new int[n];
    for(int i=0; i<n; i++)
    {
        T[i]=i;
    }
    V.push_back(T);
    return;
} 
```

您还可以通过调用获得未定义的行为

```
delete V[i]; 
```

代替

```
delete[] V[i]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-03T13:37:58.690

在您的析构函数中，您正在删除从未分配过的指针。如果 (or ) 有特定的匹配使用，则只能使用`delete`( or )，并且对于 n-1 个指针，没有这样的调用。`delete[]``new``new[]``int`

如果您希望您的向量保存指向各个不相关`int`s 的指针，那么您需要使用`new`单独分配每个。如果它们总是在这样的数组中，则在成员中保留指向该数组的指针，并在析构函数中删除该指针。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-03T13:39:01.483

您正在分配一个连续的内存块

```
int *T = new int[n]; 
```

您不能删除此块的单个元素。您一次只能删除整个块。

# android - 如何检查哪个 ImageButton 被按下？

> ID：10432536
> 
> 赞同：1
> 
> 时间：2012-05-03T13:35:24.027
> 
> 标签：android

我有很多图像按钮。用户可以按下任何这些按钮，我需要知道按下了哪个按钮。这些按钮是动态显示的，所以我不知道它们会有多少。对于一个图像按钮，我会写这个监听器：

```
ImageButton ib = new ImageButton(this);
    ib.setOnClickListener(new View.OnClickListener() {
        @Override
        public void onClick(View v) {
            Toast.makeText(TravelBite.this, "test", Toast.LENGTH_SHORT).show();
        }
    }); 
```

但是如何为我的所有图像按钮做一个监听器？我能认出它的标签按下了哪个按钮吗？像标签将是来自 sqlite 的 ID。

我也用这个代码把图像放到按钮上：

```
button.setImageDrawable( testPic ); 
```

`button`是 ImageButton 并且`testPict`是可绘制的（图像）

但是当我按下这个按钮时，如果我这样做，它不会显示它被按下：

```
button.setBackgroundColor(R.color.transparent_background); 
```

我必须这样做，因为我只想看到我可以按下的按钮图像并识别我按下的内容。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T13:54:43.317

```
 ok what you can do is that you can write a single callback function and then set it to each and every button it will allow you to handle each button with a sing function like :

    View.OnClickListener btn_listener = View.OnClickListener() {
                    @Override
                    public void onClick(View v) {
                        // Do whatever work you want.
                        int id = v.getid();
                        // check for id and do you task.
                    }

Arraylist<Button> btn_group = new Arraylist<Button>;
or
Arraylist<int> btn_id_group = new ArrayList<int>;

    for (int i =0; i < 10; i++) {
        Button btn = new Button(getApplicationContext());
        btn.setId(i);
        btn_id_group.add(i) or btn_group.add(btn);
        btn.SetOnClickListener(btn_listener);
    }

I think it will work for you. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T14:02:15.597

您必须手动分配 ID 以将它们分开 - 我必须做类似的事情（1000 也是我选择添加的基本 ID）

尽管侦听器中的 View v 指的是按下的按钮，但是当您以编程方式创建按钮时，id 不是唯一的并给我带来了问题，所以这就是我专门设置它们的原因

```
View.OnClickListener btn_listener = View.OnClickListener() 
{
      @Override
      public void onClick(View v) 
      {
            //you can use v.getID() here
      }
}

for (int i =0; i < 10; i++) 
{
    Button btn = new Button(getApplicationContext());
    btn.setID( 1000 + i );
    btn.SetOnClickListener(btn_listener);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-03T14:02:19.303

您可以[使用](http://developer.android.com/reference/android/view/View.html#setTag%28java.lang.Object%29)View.setTag(object) 和 View.getTag() 并将 sqlite id 存储在其中。像这样的东西：

```
View.OnClickListener listener = View.OnClickListener() {
            @Override
            public void onClick(View v) {
                Toast.makeText(TravelBite.this, (String)v.getTag(), Toast.LENGTH_SHORT).show();
                //or some function that do somthing useful
                //if( ((String)v.getTag).equals("image1") ){} or anything else
            } 
```

在 for 循环中：

```
String tagFromSqlite = "image1";
ImageButton ib = new ImageButton(this);
ImageButton.setTag(tagFromSqlite);
ib.setOnClickListener(listener); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-03T13:40:07.833

```
final OnClickLisener listener = new OnClickListener() {
     public void onClick(View v){
         switch((Integer)v.getTag()){ 
         case R.id.zero:
            break;
         case R.id.one:
            break;
         case R.id.two:
            break;
         }
     }
}

//when init the Buttom
ImageButton btn = new ImageButton(Context);
btn.setTag(NUMBER); 
```

# jquery - jQuery Div.Click()：函数执行多次后放弃/更改函数

> ID：10432537
> 
> 赞同：0
> 
> 时间：2012-05-03T13:35:24.623
> 
> 标签：jquery, function, click

假设我有两个`div`，`#move` 并且`#object`分别，

`#object`以及单击时移动的功能`#move`

```
$("#move").click(function(){
$("#object").animate({
    "left": "+=1px"
}
  );
    }) 
```

在使用事件或其他东西执行**特定次数**后，如何放弃或更改函数？`.Keyup()`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T13:43:55.803

```
var count = 0;
$("#move").on('click', function(){
   count++;
   $("#object").animate({
     "left": "+=1px"
   });
}) 
```

**假设，如果您想在任何输入上发生按键时关闭动画事件**

```
$('SOME_ELEMENT').on('keyup', function() {  // SOME_ELEMENT is any valid selector

   if(count === 3) { // I assume after 3 times animation you will unbind/off it
     $('#move').unbind('click');  //  or $('#move').off('click');
   }

}); 
```

**假设，如果你想在使用时关闭动画事件按*ESC*键**

```
$(document).on('keyup', function(e) {

     if(e.which === 27 && count === 3) { // 27 is keycode of ESC key
        $('#move').off('click');
     }
   }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T13:37:07.443

您正在寻找`.unbind()`删除事件处理程序的方法。

# xml - Eclipse 导入 conf .xml 文件

> ID：10432538
> 
> 赞同：28
> 
> 时间：2012-05-03T13:35:25.930
> 
> 标签：xml, eclipse, configuration

我有 3 个 .xml 文件：格式化程序规则、代码模板和清理规则。如何将其导入 Eclipse？

* * *

## 回答 #1

> 赞同：51
> 
> 时间：2012-05-03T14:57:24.097

窗口/首选项/Java/代码样式/清理/导入...

窗口/首选项/Java/代码样式/代码模板/导入...

窗口/首选项/Java/代码样式/格式化程序/导入...

# php - 如何在不使用 php thumb 的情况下获得多种尺寸的图像？

> ID：10432542
> 
> 赞同：1
> 
> 时间：2012-05-03T13:35:49.847
> 
> 标签：php, javascript, jquery

我已经为包机、游艇和其他车辆预订设置了一个管理面板，我只想为车辆上传一张图片，并且需要在不使用 phpthumb 库的情况下调整多种尺寸的图片，因为加载列表需要太多时间页面，首先它会缓存图像，因此它很烂。我需要一种简单的方法来调整单个图像的大小，这样管理员就不必上传该车辆的多个图像。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T13:38:25.427

好的[，这](http://net.tutsplus.com/tutorials/php/image-resizing-made-easy-with-php/)是一个非常好的库，可以满足您的需要。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T13:41:26.557

我使用我制作的这个功能：

```
<?php
function getImageXY( $image, $type='original' ) {
    if( $type == 'original' ) {
        $imgDimsMax = 200;
    } else if( $type == 'thumb' ) {
        $imgDimsMax = 60;
    } else if( $type == 'defualt' ) {
        $imgDimsMax = 140;
    }

    $aspectRatio = 1;    // deafult aspect ratio...keep the image as is.

    // set the default dimensions.
    $imgWidth   = $imgDimsMax;
    $imgHeight  = $imgDimsMax;

    list( $width, $height, $type, $attr ) = getimagesize( $image );
    //$imgHeight    = floor ( $height * ( $imgWidth / $width ) );

    if( $width == $height ) {
        // if the image is less than ( $imgDimsMax x $imgDimsMax ), use it as is..
        if( $width < $imgDimsMax ) {
            $imgWidth   = $width;
            $imgHeight  = $height;
        }
    } else {
        if( $width > $height ) {
            // set $imgWidth to $imgDimsMax and resize $imgHeight proportionately
            $aspectRatio    = $imgWidth / $width;
            $imgHeight      = floor ( $height * $aspectRatio );
        } else if( $width < $height ) {
            // set $imgHeight to $imgDimsMax and resize $imgWidth proportionately
            $aspectRatio    = $imgHeight / $height;
            $imgWidth       = floor ( $width * $aspectRatio );
        }
    }

    return array( $imgWidth, $imgHeight );
}
?> 
```

将原始图像和尺寸类型传递给它（不同的类型给出不同的尺寸）并返回新的宽度和高度。希望即有帮助。

# java - 从字符串中提取哈希标签

> ID：10432543
> 
> 赞同：9
> 
> 时间：2012-05-03T13:35:50.533
> 
> 标签：java, extract

`#`我想在 a 中的字符之后立即提取任何单词`String`，并将它们存储在一个`String[]`数组中。

例如，如果这是我的`String`...

```
"Array is the most #important thing in any programming #language" 
```

然后我想将以下单词提取到一个`String[]`数组中......

```
"important"
"language" 
```

有人可以提供实现这一目标的建议。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-05-03T13:40:15.963

尝试这个 -

```
String str="#important thing in #any programming #7 #& ";
Pattern MY_PATTERN = Pattern.compile("#(\\S+)");
Matcher mat = MY_PATTERN.matcher(str);
List<String> strs=new ArrayList<String>();
while (mat.find()) {
  //System.out.println(mat.group(1));
  strs.add(mat.group(1));
} 
```

输出 -

```
important
any
7
& 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-05-03T13:39:07.713

```
String str = "Array is the most #important thing in any programming #language";
Pattern MY_PATTERN = Pattern.compile("#(\\w+)");
Matcher mat = MY_PATTERN.matcher(str);
while (mat.find()) {
        System.out.println(mat.group(1));
} 
```

使用的正则表达式是：

```
#      - A literal #
(      - Start of capture group
  \\w+ - One or more word characters
)      - End of capture group 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-05-03T13:38:24.183

试试这个正则表达式

```
#\w+ 
```

# c# - 实体框架无法执行查询：对象引用未设置为对象的实例

> ID：10432548
> 
> 赞同：0
> 
> 时间：2012-05-03T13:36:08.817
> 
> 标签：c#, .net, entity-framework, exception-handling, linq-to-entities

当我尝试检索一些数据时出现此错误。这是我查询的方式

```
 using (_realtyContext = new realtydbEntities())
   {
                foreach (int yr in years)
                {
                    var standard = (from feest in _realtyContext.FeeStandards
                                    where feest.Year == yr && feest.FeeCategory.CategoryName == "PropertyFee"
                                    select feest).SingleOrDefault();

                    var chargeItem = (from chrgItem in _realtyContext.PropertyFees
                                      where chrgItem.FeeStandardID == standard.FeeStandardID
                                      && chrgItem.HousholdId == Householder.HouseholdID
                                      select chrgItem).SingleOrDefault();

                        this._propertyFees.Add(chargeItem);
                        this._standards.Add(standard);
                }
   } 
```

* * *

> 异常详细信息：System.NullReferenceException：对象引用未设置为对象的实例。
> 
> ## 错误出现在第二次查询中。（var chargeItem）

此查询引发错误：**var chargeItem =...**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-03T13:38:07.083

.SingleOrDefault() 在没有找到记录时返回 null，并且在下一个语句中，您使用“标准”，就好像它从不为 null。

但这只是众多可能原因之一...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-03T13:39:05.980

您必须检查标准是否为空。如果没有结果，SingleOrDefault() 将返回 null

# jquery - 在codeigniter jquery + ajax书签功能中停止页面加载

> ID：10432556
> 
> 赞同：0
> 
> 时间：2012-05-03T13:36:35.400
> 
> 标签：jquery, jquery-ui, codeigniter, codeigniter-2

我正在研究书签功能（codeigniter、jquery、ajax）。下面是表单的 HTML 和 jQuery 代码。

**这是正在发生的事情：**

*   表单正在将数据提交到数据库
*   页面正在重新加载
*   我没有收到成功警报
*   如果我使用 e.preventDefault() 或返回 false，则页面不会重新加载并且我会收到成功警报，但传递给数据库的数据是 0。

**HTML 表格**

```
<?php echo form_open('bookmarks/addBookmark'); ?>
<?php echo form_hidden('bookn', $bname); ?>
<?php echo form_hidden('booki', $this->uri->segment(4, 0)); ?>
<button class="bb_button">Bookmark</button>
<?php echo form_close(); ?> 
```

**jQuery**

```
$('.bb_button').click(function() { 
            $.ajax({
                url: 'bookmarks/addBookmark',
                type: 'POST',
                success: function (result) {
                    alert("Your bookmark has been added.");
                }                                         
            }); 
       //return false<--this is where I used it
    }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T13:45:37.587

你没有传入任何数据。

尝试

```
$('.bb_button').click(function(e) { 
    $.ajax({
        url: 'bookmarks/addBookmark',
        type: 'POST',
        data: { bookn: $("[name='bookn']").val()​, booki: $("[name='booki']").val()​ },
        success: function (result) {
            alert("Your bookmark has been added.");
        }                                         
    }); 
    e.preventDefault();
}); 
```

# lotus-notes - 我应该为审批工作流使用什么结构？

> ID：10432558
> 
> 赞同：0
> 
> 时间：2012-05-03T13:36:43.167
> 
> 标签：lotus-notes

这是我在编写 Lotus Notes 应用程序时发现的常见问题。

用例：雇主在请求数据库中填写请求表。通知会邮寄给可能会同意或拒绝该请求的人。权威人士访问 Request 数据库并给出 OK 或 REJECT。

好的。但是，您将在哪里保存批准状态 OK 或 REJECT：

*   授权人是否对原始请求具有写入权限并直接设置状态（并可能更改表单中的其他数据）
*   aproval 操作是否应创建对原始文档的响应文档（并且我无法在视图中显示当前状态）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-03T14:00:40.477

通常，您最好直接在请求上设置批准状态。最初这似乎并不理想，但请记住，Lotus Notes 不像关系数据库那样事情会更加规范化。

让我们考虑另一种方法，在响应文档中放置一个状态。现在如何显示所有请求及其状态？您可能必须编写一些代码才能做到这一点，而使用第一个选项您可以创建一个视图。

您可以使用读取器和写入器访问字段来控制对文档的访问。看看内置模板是如何做到的（审批工作流模板）。本质上，当文档更改状态（即新建、提交以供批准、已批准或已拒绝等）时，您还可以在该点更改读取器和写入器访问字段。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-03T19:18:46.317

有一次，我设计了一个数据库，该数据库将该请求连同存储在文档中的表单一起邮寄给审批者。只要用户使用 Notes 客户端访问文档，他们就可以单击消息中的按钮进行批准，这会将带有字段数据的消息发送回数据库以将请求标记为已批准。该请求数据库中的代理设置为在新邮件到达时运行，读取这些消息并更改原始请求的状态。这样，审批者就不必离开他们的收件箱，甚至不需要编辑请求的权限。

如果用户将通过浏览器客户端进行批准，您可以使用 URL 来执行此操作 - 拥有到代理的链接并传入参数。

或者，回到您的场景，一旦请求者提交了请求，不要显示您不想更改的字段，而是将值显示为计算文本。

反正你看，最好把批准记录在原件上。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-04T04:07:35.450

对于上述，一切都是我们关心的。在 SQL 或任何其他 RDMS 中，我们需要对其进行规范化。同样，这里我们有视图分类，在层次结构中显示响应文档，以及基于角色、ACL、唯一人员和您需要的任何功能的大量隐藏功能。我们可以很容易地操作依赖于当前用户的数据渲染。

对于您的问题：- 1\. 我们可以控制适当的用户[授权人] 编辑申请表的项目。2.我们也可以通过响应文件来做。在那里，我们可以使用显示层次结构中的响应文档来显示视图中的文档。

# php - php URL 重写 wamp

> ID：10432560
> 
> 赞同：0
> 
> 时间：2012-05-03T13:36:54.057
> 
> 标签：php, mod-rewrite

我想在 wamp 中实现 URL 重写。我丑陋的链接是： [http](http://mysite.com/news.php?id=4654654&title=asdasdasdas-das-dasd-as-da-sda-d-asd-ads-as-da-sd) ://mysite.com/news.php?id=4654654&title=asdasdasdas-das-dasd-as-da-sda-d-asd-ads-as-da-sd 我想要漂亮的网址 [http://mysite.com/4654654/asdasdasdas-das-dasd-as-da-sda-d-asd-ads-as-da-sd](http://mysite.com/4654654/asdasdasdas-das-dasd-as-da-sda-d-asd-ads-as-da-sd)

使用 www.generateit.net/mod-rewrite/ 上的在线生成器作为我的链接，我得到了这个 .htaccess 结果：

```
RewriteEngine On
RewriteRule ^([^/]*)/([^/]*)$ /news.php?id=$1&title=$2 [L] 
```

在 wamp apache rewrite_module 中检查，在 httpd.conf 我更改`AllowOverride None`为`AllowOverride All`. 我删除了 # 符号 `LoadModule rewrite_module modules/mod_rewrite.so`

但是当我点击带有类似[http://mysite.com/4654654/asdasdasdas-das-dasd-as-da-sda-d-asd-ads-as-da-sd](http://mysite.com/4654654/asdasdasdas-das-dasd-as-da-sda-d-asd-ads-as-da-sd)的链接的 hred 时，我收到 Not Found 错误`The requested URL /myfolder/4654654/asdasdasdas-das-dasd-as-da-sda-d-asd-ads-as-da-sd was not found on this server`

站点根文件夹位于 c:/www/myfolder

有人能告诉我我该怎么做才能完成这项工作吗？

谢谢

* * *

编辑

我应该在我的 php 文件中进行一些更改，除了 href 值吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T14:02:42.220

RewriteRule 部分应在 RewriteEngine on 下的新行中开始。

有一个很好的初学者指南和解释： [http ://www.workingwith.me.uk/articles/scripting/mod_rewrite](http://www.workingwith.me.uk/articles/scripting/mod_rewrite)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T13:39:04.587

`.htaccess`在您的网络根目录中创建一个新文件，即`c:/www/myfolder`并将代码放入其中。它应该可以工作。

# c# - DateTime 这种奇怪行为的原因是什么？

> ID：10432562
> 
> 赞同：1
> 
> 时间：2012-05-03T13:36:57.630
> 
> 标签：c#, datetime

我有这个方法：

```
public static DateTime GetDatetime(string ampm, string hour, string minute)
        {
            int iHour = Convert.ToInt32(hour);
            int iMinute = Convert.ToInt32(minute);

            if (ampm == "PM" && iHour != 12)
                iHour = 12 + iHour;

            DateTime dtTime = new DateTime(DateTime.Now.Year, DateTime.Now.Month,
                DateTime.Now.Day, iHour, iMinute, 0);

            return dtTime;
        } 
```

它基本上接受 AM/PM 和小时和分钟并给出 DateTime。我输入为

```
 DateTime startTIme = GetDatetime("AM", "12", "30"); 
```

我在本地机器上正确地获得了早上 12:30 的时间。但是，当我在服务器上运行相同的方法时，我会得到 12:30 PM。这让我发疯了。有人可以帮帮我吗？我究竟做错了什么？

**更新：**

我的新功能是：

```
public static DateTime GetDatetime(string ampm, string hour, string minute)
        {
            int iHour = Convert.ToInt32(hour);
            int iMinute = Convert.ToInt32(minute);

            if (ampm == "PM" && iHour != 12)
                iHour = 12 + iHour;
            else if (ampm == "AM" && iHour == 12)
                iHour = 0;

            DateTime dtTime = new DateTime(DateTime.Now.Year, DateTime.Now.Month,
                DateTime.Now.Day, iHour, iMinute, 0);

            return dtTime;
        } 
```

这似乎工作正常。任何人都可以在此代码中找到任何问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T13:47:00.610

调用时，您的函数始终返回 12:30 PM（中午）：`GetDatetime("AM", "12", "30");`

正如 Eric 所说，您得到不同结果的原因可能是两台计算机以不同的方式打印日期。

例如，使用我的设置，结果是：

> 2012-05-03 12:30:00（我的电脑格式的中午过去半小时）

使用美国设置，结果是：

> 2012 年 5 月 3 日下午 12:30:00（美国格式的中午过去半小时）

要在两台机器上以相同的方式打印日期，您可以指定用于日期格式的文化信息：

```
DateTime dateResult = GetDatetime("AM", "12", "30");
string strResult = dateResult.ToString(System.Globalization.CultureInfo.GetCultureInfo("en-US")); 
```

在所有计算机上，strResult 将具有以下值：`5/3/2012 12:30:00 PM`

但最重要的是，您应该修复您的代码以获得预期的结果（12AM 应该是午夜，而不是中午）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-03T13:44:11.667

请像这样检查当前的文化：

```
Thread.CurrentThread.CurrentCulture = new System.Globalization.CultureInfo("en-us"); 
```

因为在不同的文化中，日期以不同的格式书写。例如（5 月 3 日）= 3/5/2012 或 5/3/2012 等等

[http://msdn.microsoft.com/en-us/library/system.threading.thread.currentculture.aspx](http://msdn.microsoft.com/en-us/library/system.threading.thread.currentculture.aspx)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-03T13:45:56.153

您可以简单地使用`DateTime.Parse()`( [msdn link](http://msdn.microsoft.com/en-us/library/1k1skd40.aspx) ) (or `TryParse()`) 方法来执行此操作。看下面的示例代码：

```
string[] times = new string[] 
{
    "00:00 AM"
    , "01:00 AM"
    , "10:00 AM"
    , "12:00 AM"
    , "00:00 PM"
    , "01:00 PM"
    , "10:00 PM"
    , "12:00 PM"
};

foreach (var time in times)
{
    DateTime date = DateTime.Parse(time);
    Console.WriteLine(date);
} 
```

给出输出：

```
03/05/2012 00:00:00
03/05/2012 01:00:00
03/05/2012 10:00:00
03/05/2012 00:00:00
03/05/2012 12:00:00
03/05/2012 13:00:00
03/05/2012 22:00:00
03/05/2012 12:00:00 
```

在您的情况下，只需创建一个包含“小时”：“分钟”+“上午”或“下午”的字符串。在代码中（如果您的输入无效，则 Parse() 方法会引发异常或非常奇怪的结果））：

```
public static DateTime GetDatetime(string ampm, string hour, string minute)
{
    return DateTime.Parse(hour + ":" + minute + " " + ampm);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-03T13:52:24.613

您的机器未设置为使用 24 小时制

服务器是。

以通常的方式改变它，一切都会好起来的:)

如何：

1.  单击开始，然后单击控制面板。
    1.  单击日期、时间、语言和区域选项，然后单击区域和语言选项。
    2.  要更改一项或多项单独设置，请单击自定义。
    3.  到时间标签，格式就在那里！

# postgresql - PostgreSql 中的数十亿行：分区还是不分区？

> ID：10432565
> 
> 赞同：6
> 
> 时间：2012-05-03T13:37:18.940
> 
> 标签：postgresql, partitioning

**我有的：**

*   具有 8 个逻辑内核、16 GB 内存、2 个 7200rpm 驱动器的 mdadm raid1 的简单服务器。
*   PostgreSql
*   有很多数据可以处理。每天导入多达 3000 万行。
*   时间 - 复杂查询最多可以执行一个小时

**表的简化模式，这将非常大：**

```
id| integer | not null default nextval('table_id_seq'::regclass)
url_id      | integer | not null
domain_id   | integer | not null
position    | integer | not null 
```

上述模式的问题是我没有关于如何对其进行分区的确切答案。将使用所有时期的数据（**没有查询将有日期过滤器**）。

我考虑过在“domain_id”字段上进行分区，但问题是很难预测每个分区会有多少行。

我的主要问题是：

**如果我不使用分区修剪并且我不打算删除旧数据，那么分区数据是否有意义？**

**那会有什么优点/缺点？**

**如果我不进行分区，将如何降低我的导入速度？**

另一个与标准化有关的问题：

**应该将 url 导出到另一个表吗？**

**标准化的优点**

*   表将包含平均大小为 20-30 字节的行。
*   “url_id”上的连接应该比“url”字段快得多

**非规范化的优点**

*   可以更快地导入数据，因为我不必在每次插入之前查找“url”表。

**任何人都可以给我任何建议吗？谢谢！**

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-03T15:00:23.877

如果您要在大多数查询中使用选择标准以允许规划器在大多数情况下跳过对大多数分区的访问，或者如果您要定期清除分配给分区的所有行，则分区是最有用的，或者两个都。（删除表是删除大量行的一种非常快速的方法！）我听说有人达到了一个阈值，分区有助于保持索引更浅，从而提高性能；但实际上这又回到了第一点，因为您有效地将索引树的第一级移动到另一个地方——它仍然必须发生。

从表面上看，分区听起来并没有帮助。

另一方面，规范化可能比您预期的更能提高性能。通过保持所有这些行更窄，您可以将更多的行放入每个页面，从而减少整体磁盘访问。我会做适当的第 3 范式规范化，并且仅根据它会有所帮助的证据来偏离。如果您在仍有磁盘空间用于数据的第二个副本时发现性能问题，请尝试创建非规范化表并查看与规范化版本相比性能如何。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-03T13:41:45.057

我认为这是有道理的，具体取决于您的用例。我不知道您的 30B 行历史记录可以追溯到多长时间，但是如果您的事务数据库不需要的分区超过您决定的几个分区，那么分区是有意义的。

例如，如果您一次只查询两个月的数据，则按月分区非常有意义。一年中的其他十个月可以移动到报告仓库中，从而使交易存储空间更小。

您可以在分区中使用的字段受到限制。你必须小心那些。

获取性能基线，进行分区并重新测量以检查性能影响。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-03T15:20:20.937

考虑到给定的数据量，您将主要等待 IO。如果可能，请使用不同的硬件配置执行一些测试，以尝试为您的方案获得最佳 IO 数据。恕我直言，一段时间后 2 个磁盘将不够用，除非幕后还有其他事情。

你的桌子每天都会以已知的比例增长。而且很可能每天都会被查询。由于您没有提到要清除的数据（如果*是*，则对它进行分区），这意味着查询每天都会运行得更慢。在某个时间点，您将开始研究如何优化您的查询。其中一种可能性是在应用程序级别上并行化查询。但是这里应该满足一些条件：

*   您的表应该被分区以并行化查询；
*   硬件应该能够在 N 个并行流中提供请求数量的 IO。

所有答案都应通过不同设置的性能测试给出。

正如其他人所提到的，分区表中的 DBA 有更多好处，所以我个人会去分区任何预计每个间隔接收超过 5M 行的表，无论是一天、一周还是一个月。

# php - 可变增量，但是当我在函数中使用它时，它不会像我预期的那样处理

> ID：10432568
> 
> 赞同：2
> 
> 时间：2012-05-03T13:37:28.163
> 
> 标签：php

我用一些代码来检查浏览器是 IE6 还是 IE7 有一个小问题，我相信问题是处理`$browserCheck`变量的简单问题。我的意图是有`$browserCheck`变量增量，但出于测试目的，我也有变量 echo。我认为问题可能是脚本无法识别我将变量设置为整数的位置，因此使用[http://php.net/manual/en/language.types.type-juggling.php](http://php.net/manual/en/language.types.type-juggling.php)来更改类型。这个网站是[http://www.asuperiorcallcenter.com/development/](http://www.asuperiorcallcenter.com/development/)

```
<?php
    $browserCheck = (int) 0;
    if (strpos($_SERVER['HTTP_USER_AGENT'],'MSIE 6') !== false) { $browserCheck++; echo $browserCheck; }
    if (strpos($_SERVER['HTTP_USER_AGENT'],'MSIE 7') !== false) { $browserCheck++; echo $browserCheck; }
    function browseRight($t)
    {
        if (($t == 'css') && ($browserCheck > 0))
        {
            ?>
            <link href='http://fonts.googleapis.com/css?family=Ubuntu|Oswald' rel='stylesheet' type='text/css'>
            <style type="text/css">
            #browseRight
            {
                min-width: 1000px;
                padding: 0px 100px 0px 100px;
                height: 440px;
                background: url(browseRight/bg.jpg) repeat;
                text-align: center;
            }

            #browseRight ul
            {
                width: 1000px;
            }

            #browseRight ul li
            {
                float: left;
                list-style-type: none;
                height: 310px;
                width: 180px;
                padding: 10px 10px 10px 10px;
            }

                #browseRight ul li:hover
                {
                    background: #eee7d5;
                }

            #browseRight ul li img
            {
                height: 130px;
                clear: both;
            }

            #browseRight h2
            {
                font-family: 'Oswald', sans-serif;
                width: 100%;
                clear: both;
                font-size: 20px;
                padding: 20px 0px 0px 0px;
                color: #333333;
            }

            #browseRight ul li h2
            {
                font-family: 'Oswald', sans-serif;
                width: 100%;
                clear: both;
                font-size: 16px;
                color: #333333;
            }

            #browseRight p
            {
                font-family: 'Ubuntu', sans-serif;
                font-size: 12px;
                color: #333333;
                text-align: center;
                overflow: hidden;
            }

            #browseRight ul li p
            {
                height: 80px;
            }
            </style>
            <?php
        }
        if (($t == 'html') && ($browserCheck > 0))
        {
            ?>
                <div align="center"><div id="browseRight">
                <h2>Your Browser is out of date.</h2>
                <p>Does the website below look bad? if so it is because your browser is out of date. Fortunately you can fix this, it is as easy as updating your web browser. Below are the most popular web browsers around, visit thier websites and update to a new browser.</p>
                <div align="center"><ul>
                    <a href="http://www.google.com/chrome/" target="_blank"><li><img src="browseRight/google-chrome-logo.png"><h2>Google Chrome</h2><p>Get a fast, free web browser</p></li></a>
                    <a href="http://www.mozilla.org/en-US/" target="_blank"><li><img src="browseRight/mozilla-firefox-logo.png"><h2>Mozilla Firefox</h2><p>We are mozilla. Non-profit, for the good of the Web</p></li></a>
                    <a href="http://www.apple.com/safari/" target="_blank"><li><img src="browseRight/safari-logo.png"><h2>Safari</h2><p>Opera Software has always strived to develop the fastest and technologically most advanced browsers.</p></li></a>
                    <a href="http://www.opera.com/" target="_blank"><li><img src="browseRight/opera-logo.png"><h2>Opera</h2><p>It’s a browser. It’s a platform. It’s an open invitation to innovate. Safari sets the standard for the way browsing should be.</p></li></a>
                    <a href="http://windows.microsoft.com/en-us/internet-explorer/products/ie/home" target="_blank"><li><img src="browseRight/internet-explorer-logo.png"><h2>Internet Explorer</h2><p>A more beautiful web</p></li></a>
                </ul></div>
                </div></div>
            <?php
        }
    }
?> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-03T13:39:35.417

您的问题与 ' 类型无关`$browserCheck`，而与它的范围有关。它在你的函数内部是未知的。您必须使用`global`关键字或`$GLOBALS['browserCheck']`在函数内部，或者更好的是，将其作为参数传递给函数。

但是，如果`$browserCheck`未在代码中的其他任何地方使用，则应在函数内部而不是在全局范围内定义它。

### 最佳方法：作为参数传递

```
// Declared at global scope, unknown to the function.
$browserCheck = 0;
if (strpos($_SERVER['HTTP_USER_AGENT'],'MSIE 6') !== false) { $browserCheck++; echo $browserCheck; }
if (strpos($_SERVER['HTTP_USER_AGENT'],'MSIE 7') !== false) { $browserCheck++; echo $browserCheck; }

// Pass as a parameter to the function.
function browseRight($t, $browserCheck)
{
  // etc...
} 
```

### 替代方案：通过 $GLOBALS 访问

```
function browseRight($t)
{
    // pull browserCheck from the $GLOBALS array
    if (($t == 'css') && ($GLOBALS['browserCheck'] > 0))
    {
    // etc...
} 
```

最后，您可以`global $browserCheck`在函数顶部使用，但不建议这样做。我更喜欢`$GLOBALS`它，因为它在您的代码中明确表明您正在访问全局变量。

推荐阅读：[PHP 的变量范围手册。](http://us3.php.net/manual/en/language.variables.scope.php)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-03T13:39:37.583

$browserCheck 变量是全局的

如果你想从函数中访问它，你需要声明

```
global $browserCheck 
```

在您的功能开始时

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-03T13:45:51.293

最简单的方法是添加 GLOBAL $browsercheck; 像这样

```
function browseRight($t)
{
    GLOBAL $browserCheck; 
```

声明函数后在此处添加它。不过，这又快又脏。您应该真正将 $browserCheck 传递给函数，而不是使用全局变量。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-03T13:47:40.187

您需要移动浏览器 - 检查是否应该显示 CSS 或 HTML 的决定是基于功能的，在它之外它是无用的。这也将确保它不会被无用地执行，并且您可以正确关心变量范围。

使用静态变量可确保值不会在调用之间丢失。默认情况下，静态值在第一个函数调用时为 NULL（除非您初始化它们）：

```
<?php
function browseRight($t)
{
    static $browserCheck;
    if (NULL === $browserCheck)
    {
        $browserCheck = 0;
        if (strpos($_SERVER['HTTP_USER_AGENT'],'MSIE 6') !== false) { $browserCheck++; echo $browserCheck; }
        if (strpos($_SERVER['HTTP_USER_AGENT'],'MSIE 7') !== false) { $browserCheck++; echo $browserCheck; }
    }

    if ($browserCheck === 0) return;

    if ($t == 'css')
    {
        ?>
        <link href='http://fonts.googleapis.com/css?family=Ubuntu|Oswald' rel='stylesheet' type='text/css'>
        <style type="text/css">
        #browseRight
        {
            min-width: 1000px;
            padding: 0px 100px 0px 100px;
            height: 440px;
            background: url(browseRight/bg.jpg) repeat;
            text-align: center;
        }

        #browseRight ul
        {
            width: 1000px;
        }

        #browseRight ul li
        {
            float: left;
            list-style-type: none;
            height: 310px;
            width: 180px;
            padding: 10px 10px 10px 10px;
        }

            #browseRight ul li:hover
            {
                background: #eee7d5;
            }

        #browseRight ul li img
        {
            height: 130px;
            clear: both;
        }

        #browseRight h2
        {
            font-family: 'Oswald', sans-serif;
            width: 100%;
            clear: both;
            font-size: 20px;
            padding: 20px 0px 0px 0px;
            color: #333333;
        }

        #browseRight ul li h2
        {
            font-family: 'Oswald', sans-serif;
            width: 100%;
            clear: both;
            font-size: 16px;
            color: #333333;
        }

        #browseRight p
        {
            font-family: 'Ubuntu', sans-serif;
            font-size: 12px;
            color: #333333;
            text-align: center;
            overflow: hidden;
        }

        #browseRight ul li p
        {
            height: 80px;
        }
        </style>
        <?php
    }

    if ($t == 'html')
    {
        ?>
            <div align="center"><div id="browseRight">
            <h2>Your Browser is out of date.</h2>
            <p>Does the website below look bad? if so it is because your browser is out of date. Fortunately you can fix this, it is as easy as updating your web browser. Below are the most popular web browsers around, visit thier websites and update to a new browser.</p>
            <div align="center"><ul>
                <a href="http://www.google.com/chrome/" target="_blank"><li><img src="browseRight/google-chrome-logo.png"><h2>Google Chrome</h2><p>Get a fast, free web browser</p></li></a>
                <a href="http://www.mozilla.org/en-US/" target="_blank"><li><img src="browseRight/mozilla-firefox-logo.png"><h2>Mozilla Firefox</h2><p>We are mozilla. Non-profit, for the good of the Web</p></li></a>
                <a href="http://www.apple.com/safari/" target="_blank"><li><img src="browseRight/safari-logo.png"><h2>Safari</h2><p>Opera Software has always strived to develop the fastest and technologically most advanced browsers.</p></li></a>
                <a href="http://www.opera.com/" target="_blank"><li><img src="browseRight/opera-logo.png"><h2>Opera</h2><p>It’s a browser. It’s a platform. It’s an open invitation to innovate. Safari sets the standard for the way browsing should be.</p></li></a>
                <a href="http://windows.microsoft.com/en-us/internet-explorer/products/ie/home" target="_blank"><li><img src="browseRight/internet-explorer-logo.png"><h2>Internet Explorer</h2><p>A more beautiful web</p></li></a>
            </ul></div>
            </div></div>
        <?php
    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-03T13:41:32.140

这将得到修复：

```
<?php
    $browserCheck = false;
    if (strpos($_SERVER['HTTP_USER_AGENT'], 'MSIE 6.') !== FALSE) { $browserCheck = true; echo $browserCheck; }
    if (strpos($_SERVER['HTTP_USER_AGENT'], 'MSIE 7.') !== FALSE) { $browserCheck = true; echo $browserCheck; }
    function browseRight($t)
    {
        if (($t == 'css') && $browserCheck)
        {
            ?>
            <link href='http://fonts.googleapis.com/css?family=Ubuntu|Oswald' rel='stylesheet' type='text/css'>
            <style type="text/css">
            #browseRight
            {
                min-width: 1000px;
                padding: 0px 100px 0px 100px;
                height: 440px;
                background: url(browseRight/bg.jpg) repeat;
                text-align: center;
            }

            #browseRight ul
            {
                width: 1000px;
            }

            #browseRight ul li
            {
                float: left;
                list-style-type: none;
                height: 310px;
                width: 180px;
                padding: 10px 10px 10px 10px;
            }

                #browseRight ul li:hover
                {
                    background: #eee7d5;
                }

            #browseRight ul li img
            {
                height: 130px;
                clear: both;
            }

            #browseRight h2
            {
                font-family: 'Oswald', sans-serif;
                width: 100%;
                clear: both;
                font-size: 20px;
                padding: 20px 0px 0px 0px;
                color: #333333;
            }

            #browseRight ul li h2
            {
                font-family: 'Oswald', sans-serif;
                width: 100%;
                clear: both;
                font-size: 16px;
                color: #333333;
            }

            #browseRight p
            {
                font-family: 'Ubuntu', sans-serif;
                font-size: 12px;
                color: #333333;
                text-align: center;
                overflow: hidden;
            }

            #browseRight ul li p
            {
                height: 80px;
            }
            </style>
            <?php
        }
        if (($t == 'html') && $browserCheck)
        {
            ?>
                <div align="center"><div id="browseRight">
                <h2>Your Browser is out of date.</h2>
                <p>Does the website below look bad? if so it is because your browser is out of date. Fortunately you can fix this, it is as easy as updating your web browser. Below are the most popular web browsers around, visit thier websites and update to a new browser.</p>
                <div align="center"><ul>
                    <a href="http://www.google.com/chrome/" target="_blank"><li><img src="browseRight/google-chrome-logo.png"><h2>Google Chrome</h2><p>Get a fast, free web browser</p></li></a>
                    <a href="http://www.mozilla.org/en-US/" target="_blank"><li><img src="browseRight/mozilla-firefox-logo.png"><h2>Mozilla Firefox</h2><p>We are mozilla. Non-profit, for the good of the Web</p></li></a>
                    <a href="http://www.apple.com/safari/" target="_blank"><li><img src="browseRight/safari-logo.png"><h2>Safari</h2><p>Opera Software has always strived to develop the fastest and technologically most advanced browsers.</p></li></a>
                    <a href="http://www.opera.com/" target="_blank"><li><img src="browseRight/opera-logo.png"><h2>Opera</h2><p>It’s a browser. It’s a platform. It’s an open invitation to innovate. Safari sets the standard for the way browsing should be.</p></li></a>
                    <a href="http://windows.microsoft.com/en-us/internet-explorer/products/ie/home" target="_blank"><li><img src="browseRight/internet-explorer-logo.png"><h2>Internet Explorer</h2><p>A more beautiful web</p></li></a>
                </ul></div>
                </div></div>
            <?php
        }
    }
?> 
```

# sql-server-2008 - SSRS 2008，报告表

> ID：10432571
> 
> 赞同：0
> 
> 时间：2012-05-03T13:37:37.287
> 
> 标签：sql-server-2008, ssrs-2008

在报告表中，我如何将变量分配为指向 URL 值的链接，例如。[链接] 必须更改为“单击此处查看 URL”，当单击它应该显示作为 url 的值或将您直接带到页面

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T14:11:24.057

右键单击文本框，选择属性并配置如下：

![在此处输入图像描述](../Images/00005cc07eb5ad6e72b513701a5fca89.png)

在表达式上，执行：

```
="http://your_url/"+Fields!Your_field.Value.ToString() 
```

# knockout.js - knockoutJS - 从其他 javascript 函数重新绑定表

> ID：10432572
> 
> 赞同：0
> 
> 时间：2012-05-03T13:37:46.710
> 
> 标签：knockout.js

我正在使用 KnockoutJS 来显示用户列表。在同一页面上，一个链接会触发一个影子框模式窗口。当用户关闭模式时，我希望刷新用户列表。我已经有了 Shadowbox 模式触发的回调函数，但是如何让它刷新用户列表呢？

```
 function User(data) {
            this.firstname = ko.observable(data.firstname);
            this.lastname = ko.observable(data.lastname);
            this.fullname = ko.computed(function () {
                return this.firstname() + " " + this.lastname();
            }, this);
            this.userfunctions = ko.observable(data.userfunctions);
            this.phonework = ko.observable(data.phonework);
            this.phonemobile = ko.observable(data.phonemobile);
            this.email = ko.observable(data.email);
            this.editurl = ko.observable(data.editurl);
        }

        function UserListViewModel() {
            var self = this;
            self.users = ko.observableArray([]);

            self.users.loading = ko.observable(false);

            self.users.loading(true);
            $.getJSON("/UserJSON.ashx", {
                requestType: "userList",
                pageId: '12',
                companyId: '1'
            },
            function (allData) {
                var mappedUsers = $.map(allData, function (item) { return new User(item); });
                self.users(mappedUsers);
                self.users.loading(false);
            });
        }

        ko.applyBindings(new UserListViewModel()); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T15:56:42.017

你看过淘汰赛映射吗？它处理来自服务器的数据更新：

[http://knockoutjs.com/documentation/plugins-mapping.html](http://knockoutjs.com/documentation/plugins-mapping.html)

我会在您的视图模型上创建一个“数据”属性，该属性从剔除映射中加载，并且可以从那里更新。我将处理 jsfiddle 并更新此答案。

**更新**

我正在研究一个 JSFiddle，但发现一个已经完成的 :-)（感谢 RP Niemeyer！）

[http://jsfiddle.net/rniemeyer/EDC7q/](http://jsfiddle.net/rniemeyer/EDC7q/)

**更新 2**

我更新了你的 JSFiddle：http: [//jsfiddle.net/sb2BX/1/](http://jsfiddle.net/sb2BX/1/)

到这个：http: [//jsfiddle.net/JasonMore/sb2BX/3/](http://jsfiddle.net/JasonMore/sb2BX/3/)

看到它工作，首先单击“加载初始数据”，然后单击“Shadowbox Callback”。这回答了你的问题了吗？

# ruby-on-rails - 在 rake 文件中包含 gem

> ID：10432587
> 
> 赞同：0
> 
> 时间：2012-05-03T13:38:44.773
> 
> 标签：ruby-on-rails, ruby, rubygems, gem, rake

我正在尝试在 Rails 项目之外编写一个 rakefile。

我创建了一个新目录，添加了一个 rakefile 并设置了一个基本的默认任务。有用。

我想使用[premailer gem](https://github.com/alexdunae/premailer/)所以在我的默认任务中我添加了这个 -

```
premailer = Premailer.new('http://localhost/email.html', :warn_level => Premailer::Warnings::SAFE) 
```

这不起作用，我收到以下错误。

```
uninitialized constant Object::Premailer 
```

如何在我的任务中引用 premailer gem？我应该将它包含在各种 gemfile 中吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T13:52:50.257

您可以在没有这样的 Gemfile 的情况下工作：

```
require 'rubygems' # only needed for ruby 1.8.7
require 'premailer'

desc "My Task"
task :my_task do
  ..
  premailer = Premailer.new(...)
  ...
end 
```

或使用 Gemfile：

```
require 'rubygems' # only needed for ruby 1.8.7
require 'bundler'

Bundler.setup
Bundler.require

desc "My Task"
task :my_task do
  ..
  premailer = Premailer.new(...)
  ...
end 
```

我希望这有帮助。

# php - Yii 验证规则 - 唯一

> ID：10432591
> 
> 赞同：3
> 
> 时间：2012-05-03T13:39:05.307
> 
> 标签：php, yii

在 Yii 框架中，我可以使用唯一验证规则来检查某个条件下字段的唯一性（我知道有条件，但这个条件有点棘手）？即，我想检查 property_id 唯一的 num_days。

桌子：

```
NUM PROP_ID

3   4

3   5 
```

如果我尝试插入 3、6，验证应该通过，但在 3、4 的情况下失败

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-03T16:14:09.453

查看[UniqueAttributesValidator](http://www.yiiframework.com/extension/unique-attributes-validator/ "http://www.yiiframework.com/extension/unique-attributes-validator/")以及[这个答案](https://stackoverflow.com/questions/9670992/yii-how-to-make-a-unique-rule-for-two-attributes "https://stackoverflow.com/questions/9670992/yii-how-to-make-a-unique-rule-for-two-attributes")。在链接中，您会看到它们已用于CUniqueValidator 选项的数组，但出于某种原因`$this->attributename`是`params`为了我。我相信这是因为没有正确地传递给验证器，所以无论如何最好使用 UniqueAttributesValidator 类，因为它只是针对这些情况而设计的。`criteria``$this->attributename``null``$this`

生成的 sql 将具有`WHERE`如下子句：

```
SELECT ... WHERE (`num`=:value) AND (`prop_id`=:prop_id) ... 
```

3、4 很容易失败，3、6 则通过。所以它应该适合你的情况。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-06-24T07:31:36.190

首先在您的表中创建唯一字段

并在模型中将此添加到您的规则（）

```
 array('field_name', 'unique'), 
```

对于两个唯一字段的组合，请使用此代码

```
public function rules() {
return array(
    array('firstKey', 'unique', 'criteria'=>array(
        'condition'=>'`secondKey`=:secondKey',
        'params'=>array(
            ':secondKey'=>$this->secondKey
        )
    )),
);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-03T15:20:29.423

创建您的自定义验证器或验证函数，这很简单。

# batch-file - 仅复制丢失的文件

> ID：10432598
> 
> 赞同：4
> 
> 时间：2012-05-03T13:39:10.750
> 
> 标签：batch-file

让我先说我对编写批处理文件比较陌生，所以如果我的问题似乎是补救性的，我深表歉意。

我正在尝试将文件从目录移动到我映射的共享驱动器。我知道使用“XCOPY c:\etc..z:\etc../Y”会将所有内容从一个地方复制到另一个地方，但我不想做的是每次都覆盖每个文件。有没有办法只复制不在目标目录中的文件？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-03T13:42:54.450

## 解决方案1：

```
xcopy  /d/y 
```

应该管用..........

![在此处输入图像描述](../Images/1399cc7d9f724cb55dafce54053a8227.png)

## 解决方案 2

```
echo "No" | copy/-Y c:\source c:\Dest\ 
```

在职的。经过测试

2个文件夹有相同的文件，让我们尝试复制。

```
 C:\r\Roi>echo "No" | copy/-Y  . 2
.\DSpubring.pkr
Overwrite 2\DSpubring.pkr? (Yes/No/All): "No"
Overwrite 2\DSpubring.pkr? (Yes/No/All):
.\DSsecring.skr
Overwrite 2\DSsecring.skr? (Yes/No/All):
        0 file(s) copied. 
```

让我们创建 1 个新文件

```
C:\r\Roi>copy con g.txt
sdfsdf
^Z
    1 file(s) copied. 
```

让我们复制：

```
C:\r\Roi>echo "No" | copy/-Y  . 2
.\DSpubring.pkr
Overwrite 2\DSpubring.pkr? (Yes/No/All): "No"
Overwrite 2\DSpubring.pkr? (Yes/No/All):
.\DSsecring.skr
Overwrite 2\DSsecring.skr? (Yes/No/All):
.\g.txt
        1 file(s) copied. <------------ one file only 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-08-01T16:13:07.283

你也可以做

```
robocopy /xc /xn /xo /s source destination 
```

答案取自[这里](https://superuser.com/questions/466090/how-to-copy-only-those-files-that-are-not-in-the-destination)。

# camera - 从屏幕坐标计算光线方向矢量

> ID：10432600
> 
> 赞同：0
> 
> 时间：2012-05-03T13:39:20.980
> 
> 标签：camera, rendering, hlsl

我正在寻找一种更好的方法（或注意这*是*最好的方法）将像素坐标从*任意*相机位置/方向传输到其相应的光线方向。

我目前的方法如下。我将“相机”定义为位置向量、观察向量和向上向量，命名为这样。（注意，lookat 向量是相机所面对方向上的单位向量，而不是（位置-lookat）是方向，就像 XNA 的 Matrix.CreateLookAt 中的标准一样）这三个向量可以唯一地定义一个相机位置。这是实际代码（嗯，不是真正的实际代码，是简化的抽象版本）（语言是 HLSL）

```
float xPixelCoordShifted = (xPixelCoord / screenWidth * 2 - 1) * aspectRatio;
float yPixelCoordShifted = yPixelCoord / screenHeight * 2 - 1;
float3 right = cross(lookat, up);
float3 actualUp = cross(right, lookat);
float3 rightShift = mul(right, xPixelCoordShifted);
float3 upShift = mul(actualUp, yPixelCoordShifted);
return normalize(lookat + rightShift + upShift); 
```

（返回值是射线的方向）

所以我要问的是——有什么更好的方法来做到这一点，也许使用矩阵等。这种方法的问题是，如果你的视角太宽，屏幕的边缘会有点“径向拉伸” ”。

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2012-05-15T17:31:54.770

`ray`您可以在像素着色器、HLSL 代码中计算它（ ）：

```
float4x4 WorldViewProjMatrix; // World*View*Proj
float4x4 WorldViewProjMatrixInv; // (World*View*Proj)^(-1)

void VS( float4 vPos : POSITION,
     out float4 oPos : POSITION,
     out float4 pos  : TEXCOORD0 )
{
    oPos = mul(vPos, WorldViewProjMatrix);
    pos = oPos;
}

float4 PS( float4 pos : TEXCOORD0 )
{
    float4 posWS = mul(pos, WorldViewProjMatrixInv);
    float3 ray = posWS.xyz / posWS.w;

    return float4(0, 0, 0, 1);
} 
```

有关相机位置和方向的信息在`View`矩阵 (Matrix.CreateLookAt) 中。

# highcharts - 具有最小值-最大值的 Highstock 阶梯图

> ID：10432610
> 
> 赞同：-2
> 
> 时间：2012-05-03T13:39:41.767
> 
> 标签：highcharts, highstock

我在 highstock 图表中有一系列 json 数据，我想将这些数据修剪为只有 0 或 1 的值：如果数据为 0，则为 0，否则为 1。我必须在选项中写什么？我现在的代码是这样的：

```
window.chart = new Highcharts.StockChart({
    chart: {
      renderTo: 'chart_div'
    },

    rangeSelector: {
      selected: 1
    },

    title: {
      text: 'prova'
    },

    {% if net.ntype == "ztc" and sens.type == 2 %}

     // HERE I WANT TO DO AN OPTION TO TRIM VALUES
     // TO 0 OR 1

    {% end %}

    series: [{
        name: 'prova',
        data: data,
        step: true,
        tooltip: {
          valueDecimals: 2
        }
      }]
  })
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T01:56:28.170

首先使用 $each() 在 Jason 中循环创建一个数组，例如 x 然后添加 if 条件并推送到 x 你的日期时间和值 0 或 1 然后你的数据：x; 这只是一个想法，如果您可以给我们您的代码，我们可以为您提供更多帮助

# html - 如何在固定宽度的 div 中居中动态宽度按钮？

> ID：10432614
> 
> 赞同：1
> 
> 时间：2012-05-03T13:40:00.473
> 
> 标签：html, css, button, center

我有不同宽度的提交按钮或普通按钮，具体取决于它们包含在固定 div 中的值。现在，即使拥有`margin: 0 auto;`并且`display:block;`由于缺少`width`属性，按钮也不会在 div 内居中。如何在不明确设置每个按钮的宽度的情况下使它们居中？

```
input[type="submit"], .button {
      border: none;
      outline: none;
      -moz-border-radius: 10px;
      -webkit-border-radius: 10px;
      border-radius: 10px;
      color: white;
      display: block;
      cursor: pointer;
      margin: 0 auto !important;
      clear: both;
      padding: 5px 7px;
      text-shadow: 0 1px 1px #777;
      font-weight: bold;
      font-family: "Century Gothic", Helvetica, sans-serif;
      font-size: 14px;
      -moz-box-shadow: 0px 0px 3px #aaa;
      -webkit-box-shadow: 0px 0px 3px #aaa;
      box-shadow: 0px 0px 3px #aaa;
      background: #4797ED;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T13:45:48.033

设置`input[type="submit"], .button {}` 为`display: inline-block;`。然后将父级设置`div`为`text-align: center;`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-03T13:42:42.107

按钮是内联元素。是否有`display:block`必要出于其他原因，或者是否有任何反对将所有文本/内联元素集中在 div 中？

如果没有，您可以`text-align:center`改为分配给 div 并`display:block`从按钮中删除。

附带说明一下，您当前的样式在 FF12 中将按钮居中。你使用的是什么浏览器？编辑：也适用于 IE9 ( [jsfiddle](http://jsfiddle.net/xLPE4/) )。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-03T13:50:03.857

[http://jsfiddle.net/gSaBj/1/](http://jsfiddle.net/gSaBj/1/)

看看这个网址....

# java - 计算具有两个变量的单个简单方程的解集的算法

> ID：10432619
> 
> 赞同：13
> 
> 时间：2012-05-03T13:40:11.433
> 
> 标签：java, algorithm, math

假设我有一个简单的公式：

```
7x + 4y = n 
```

其中 n 由我们选择，x、y 和 n 都是正整数。这是给我们的唯一等式。在可能的解决方案中，我们需要 x 最小的解决方案 (x,y)。例如

```
7x + 4y = 14, then (2, 0) is the solution
7x + 4y = 15, then (1, 2) is the solution
7x + 4y = 32, then (4, 1) and (0, 8) are the possible solutions,
of which (0, 8) is the correct solution 
```

我想设计一种算法以尽可能少的运行时间计算它。我想到的当前算法是这样的：

```
Given an input n
Calculate max(x) = n/7
for i = 0 to max(x)
    If the equation 7*i + 4*y = n holds
        return value of i and y
    else
        continue 
```

我认为，在最坏的情况下，该算法的运行时间可达 O(n)。有没有更好的算法来计算解决方案？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-03T14:05:28.960

让我们考虑更一般的问题

*   对于两个互质的正整数`a`和`b`，给定一个正整数`n`，找到一`(x,y)`对非负整数，使得`a*x + b*y = n`具有最小`x`。（如果有。不必有，例如`7*x + 4*y = 5`没有非负`x`和的解`y`。）

暂时忽略非否定性，给出任何解决方案

```
a*x0 + b*y0 = n 
```

*所有*解决方案都有`(x0 - k*b, y0 + k*a)`一些整数的形式`k`。所以`x`模`b`和`y`模的余数`a`是解的不变量，我们有

```
a*x ≡ n (mod b), and b*y ≡ n (mod a) 
```

所以我们需要解方程`a*x ≡ n (mod b)`——另一个方程如下。

设`0 < c`为 的整数`a*c ≡ 1 (mod b)`。例如，您可以通过扩展欧几里得算法或（等效地）`a/b`O(log b) 步骤中的连分数展开来找到它。两种算法自然会产生`c < b`具有该属性的唯一性。

那么最小的候选是modulo`x`的余数。`x0``n*c``b`

该问题有一个非负的解`x`，`y`当且仅当`x0*a <= n`，然后是出现在任何非负和的解`x0`中的最小非负数。`x``x``y`

当然，对于像 7 和 4 这样的小`a`，`b`蛮力并不比计算`a`modulo的倒数慢`b`。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-03T13:45:08.063

我们有

```
7(x-4)+4(y+7)=7x+4y 
```

所以如果 (x, y) 是一个解，那么 (x-4,y+7) 也是一个解。因此，如果有一个解决方案，那么就有一个 x<4。这就是为什么您只需要测试在恒定时间内运行的 x=0..3 的原因。

这可以扩展到任何形式为 ax+by=n 的方程，您只需要测试 x=0..b-1。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-03T14:05:04.873

我建议您查看“ [C 中的数值食谱”](http://apps.nrbook.com/c/index.html)一书中的 Simplex 方法。您可以轻松地将 C 代码视为伪代码并制作 java 版本。您想要的单纯形的版本是“约束单纯形”，它只处理正值。该书[可在线免费获得](http://apps.nrbook.com/c/index.html)。从第 10.8 节开始并向前阅读。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-03T13:55:57.580

上） ：

```
y=n/4;
while((n-4y)%7!=0 && y!=0){
 y--;
}
x=(n-4y)/7; 
```

# json - 我可以同时从我的操作方法返回一个部分视图和一个 Json 对象吗

> ID：10432623
> 
> 赞同：0
> 
> 时间：2012-05-03T13:40:22.773
> 
> 标签：json, asp.net-mvc-3

我有以下操作方法，它返回一个局部视图`_create`。但是有没有办法传递 Json 对象，例如`return Json(new { IsSuccess = "True" },`使用 Partial 视图。

我的 Action 方法如下所示：-

```
try
{
  if (ModelState.IsValid)
  {
     var v = repository.GetVisit(visitid);
     if (!(v.EligableToStart(User.Identity.Name)))
     { 
       return View("NotFound"); 
     }
     vlr.VisitID = visitid;
     repository.AddVisitLabResult(vlr);
     repository.Save();
     ViewBag.LabTestID = new SelectList(repository.FindAllLabTest(), "LabTestID", "Description", vlr.LabTestID);
     // return Json(new { IsSuccess = "True" }, JsonRequestBehavior.AllowGet);
     @ViewBag.status = "Added Succsfully";
     return  PartialView("_create",vlr) ;
   }
} 
```

**：：-更新-：：**

我想要做的事情如下： -

1.  我正在使用 ajax.beginform 调用操作方法

    ```
    using (Ajax.BeginForm("CreateAll", "VisitLabResult", new AjaxOptions
    {
      HttpMethod = "Post",
      UpdateTargetId = item.ToString(),
      InsertionMode = InsertionMode.Replace,
      OnSuccess = string.Format("disableform({0})", Json.Encode(item)),
    })) 
    ```

2.  成功接收到服务器的响应后，将执行 Onsuccess 脚本，该脚本只是禁用表单：-

    ```
    function disableform(id) {
        $('#' + id + ' :input').prop("disabled", true);
    } 
    ```

问题是**脚本将始终禁用表单，即使发生一些验证错误**，所以我试图实现的是返回一个带有部分视图的 JSON，指示 ModelState.IsValid 是否有效，**以及如果保持表单启用以允许用户更正验证错误是无效的。**

BR

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T13:50:11.077

为什么不简单地扩展您已经传递给 View 添加属性的模型`IsSuccess`？

ViewBag 或 ViewData 在我看来是邪恶的。尝试在将数据返回到视图时始终使用 ViewModel。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T13:43:53.903

不，您可以只返回视图并将 JSON 作为模型或 ViewBag（我推荐模型）传递。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-26T12:47:29.737

在这种情况下，我使用了以下解决方案：

在您的 ajax 表单定义集中：

```
OnComplete = "yourCallback" 
```

然后：

```
yourCallback = function(response){
  var json = response.responseJSON;
  if(json.success){
     alert('Well done!');
  } else {
     var form = $('#formId');
     form.html(json.html);
     form.removeData("validator").removeData("unobtrusiveValidation");
     $.validator.unobtrusive.parse(form);
  }
} 
```

您的控制器应返回如下内容：

```
var result = new { success = false, html = helper.Partial("_YourPartial", model) };
return Json(result); 
```

Where`helper`可帮助您向局部视图添加验证。（此处描述：[https](https://stackoverflow.com/a/4270511/952023) ://stackoverflow.com/a/4270511/952023 ）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-03T13:42:51.213

您只能从操作方法返回一个视图，如果您想传递其他信息，请使用 ViewData 或 ViewBag

```
ViewBag.IsSuccess =  "True"; 
```

或者

```
ViewData["IsSuccess"] = "True"; 
```

# javascript - Razor 在使用 Javascript 时失败，它们是构建的

> ID：10432627
> 
> 赞同：1
> 
> 时间：2012-05-03T13:40:46.240
> 
> 标签：javascript, asp.net-mvc, razor

在我切换到测试驱动开发之后，我最近开始[构建自己的视图](http://www.dotnetcurry.com/ShowArticle.aspx?ID=698)，以提高代码的质量和可维护性。

这很有帮助，编译器在我的观点中发现了一些缺陷，比如已重命名的变量或其他类似的东西。

然而，现在，当我构建我的解决方案时，我**看到了一些误报。**这是一些以前在运行时运行良好但现在无法编译的代码示例：

```
<script type="text/javascript">
var url = null;

@{
    Html.Raw("url = 'doesnt work';");
}

url = "@Url.Action("DoesNotWorkEither")";

</script> 
```

*请记住，当我在服务器上执行它而不首先构建视图时，它实际上会运行！*

## 收到的错误

*   **代码中的**字符无效**`@{`**

***   **预期的 ';'** 在代码`url = "@Url.Action("DoesNotWorkEither")";`** 

 **我该如何解决这些错误？

## 更新 1

应该注意的是，忽略这个错误对我来说不是一个选择。你看，它甚至不能构建（因为我启用了视图的构建）。这意味着它也将无法在我的构建服务器上构建，我已经在其中进行了签入（不允许在构建和运行测试之前提交签入）。

## 更新 2

正如在对答案的评论中向我解释的那样，这显然只是一个可以忽略的 Visual Studio 解析器错误。构建服务器实际上也会构建视图并告诉您视图中是否存在具体错误，但会忽略误报。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-03T13:43:08.903

这些错误来自 Visual Studio 的 Javascript 解析器，它不了解 Razor。
它们与构建系统无关。

您可以放心地忽略它们。

您可以使用注释和字符串文字从 Javascript 解析器中隐藏 Razor 代码，如下所示：（未经测试）

```
<script type="text/javascript">
var url = null;

/*@{ 
    Html.Raw(" *"+"/ url = 'doesnt work'; /*");
} */

url = '@Url.Action("DoesNotWorkEither")';

</script> 
```

更好的解决方法是创建扩展方法，`<script>`使用您需要的数据发出标签，然后在`<script>`.**

# ruby-on-rails - 在 Rails 控制台中加载 Capistrano 的环境

> ID：10432632
> 
> 赞同：2
> 
> 时间：2012-05-03T13:41:12.450
> 
> 标签：ruby-on-rails, deployment, capistrano

在 rails 控制台中加载 Capistrano 环境的最佳方式是什么？

我想访问 capistrano 在部署中使用的变量和方法，例如 latest_release、source 等。

尝试破解复杂的 capistrano 任务时，Ruby 调试效率不高。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-03T14:37:32.157

在 Rails 控制台中可能不实用，因为这两种环境可能会发生冲突。不过，在交互式控制台中并不难。您可以添加一个简单地启动一个 Capistrano 任务：

```
task :console do
  require 'irb'
  $config = self
  ARGV.clear
  IRB.start
end 
```

这会将当前配置对象公开为全局`$config`. 尽管使用全局变量有点难看，但我找不到从`main`对象切换 IRB 的默认上下文的方法。

# command-line - 如何在不创建工作区的情况下从 tfs 获取特定版本的文件夹？

> ID：10432634
> 
> 赞同：11
> 
> 时间：2012-05-03T13:41:20.937
> 
> 标签：command-line, tfs, tfs-sdk, visual-studio-macros

我想在特定时间（变更集）获取项目的源代码。所以我需要下载整个文件夹。我想在不同的时间做这件事，处理不同的工作空间不是很方便。

我知道[TFS 将特定版本放入单独的文件夹](https://stackoverflow.com/questions/1597476/tfs-get-specific-version-into-separate-folder)（带有工作区）和[需要命令从没有工作区的 TFS 获取文件](https://stackoverflow.com/questions/1175830/need-command-to-get-a-file-from-tfs-without-a-workspace)（一个文件）。

在不创建新工作区的情况下是否有针对整个文件夹的解决方案？

**编辑** 我发现接受的答案过于雄心勃勃。我需要一些更简单的东西。

假设：

*   我可以在我的计算机上从 Visual Studio 访问 TFS
*   我想从TFS 项目中`ChangeSetNumber`的文件夹中获取变更 集`DesiredFolder``tProj`

*我从Visual Studio 命令提示符*中的目标文件夹运行以下批处理

 *```
set workspace_name=TemporaryWorkspace%username%
set changeset= ChangeSetNumber                
tf workspace -new %workspace_name% -noprompt
tf workfold -map $/tProj . -workspace:%workspace_name%
tf get $/tProj/DesiredFolder -version:C%changeset% -recursive -noprompt
tf workfold -unmap . -workspace:%workspace_name%
tf workspace -delete %workspace_name% -noprompt 
```

启动下载的解决方案时，需要确认删除源代码控制关联。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-05-09T21:14:11.527

我将此语法用于临时工作区：

```
tf workspace -new %JOB_NAME%;%user% -noprompt -server:http://%host%:8080/tfs/%project% -login:%user%,%password%
tf workfold -map $/Release/MilestoneX.X . -workspace:%JOB_NAME% -server:http://%host%:8080/tfs/%project% -login:%user%,%password%
tf get . -version:L%TFS_LABEL% -recursive -noprompt -login:%user%,%password%
tf workfold -unmap . -workspace:%JOB_NAME% -login:%user%,%password%
tf workspace -delete %JOB_NAME%;%user% -noprompt -server:http://%host%:8080/tfs/%project% -login:%user%,%password% 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-11-05T00:21:58.343

我发现您可以通过 TFS 公开的 HTTP api 执行此操作。URL 的“签名”如下：

```
http(s)://{server}:{port}/tfs/{collectionName}/{teamProjectName}/_api/_versioncontrol/itemContentZipped?version={versionSpec}&path={escapedPathToFolder} 
```

因此，如果您在 DefaultCollection 中有一个名为“MyProject”的项目，并且想要获取名为“MyFeature”的文件夹的内容：

```
http://MyTfsServer:8080/tfs/DefaultCollection/MyProject/_api/_versioncontrol/itemContentZipped?version=C1001&path=%24%2FMyProject%2FMyFeature 
```

我认为“版本”可以是 TFS API 文档中记录的任何版本规范。我的示例是请求更改集 1001 的版本。我使用 .NET API 来获取特定版本，这非常简单，但速度很慢，因为它一次只能获取一个文件。我试图弄清楚是否通过 .NET API 公开了相同的功能，因为以这种方式下载文件比一次获取单个文件要快得多。

我将此作为扩展方法实现，`Microsoft.TeamFoundation.VersionControl.Client.Item.`它返回一个包含 zip 文件的流。我曾将此用作自定义 MSBuild 任务的一部分，然后将此流的内容保存到文件位置。

```
public static class TfsExtensions
{

    const String ItemContentZippedFormat = "/_api/_versioncontrol/itemContentZipped?version={0}&path={1}&__v=3";

    public static Stream DownloadVersion(this Item folder, VersionSpec version)
    {
        if (folder.ItemType != ItemType.Folder)
            throw new ArgumentException("Item must be a folder", "folder");

        var vcs = folder.VersionControlServer;

        var collectionName = vcs.TeamProjectCollection.CatalogNode.Resource.DisplayName;

        var baseUri = folder.VersionControlServer.TeamFoundationServer.Uri;
        if (!baseUri.LocalPath.EndsWith(collectionName, StringComparison.OrdinalIgnoreCase))
            baseUri = new Uri(baseUri, baseUri.LocalPath + "/" + collectionName);

        var apiPath = String.Format(ItemContentZippedFormat, version.DisplayString, WebUtility.UrlEncode(folder.ServerItem));
        var downloadUri = new Uri(baseUri, baseUri.LocalPath + apiPath);

        var req = WebRequest.Create(downloadUri);
        req.Credentials = CredentialCache.DefaultCredentials;
        var response = req.GetResponse();
        return response.GetResponseStream();
    }
} 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-05-03T19:33:05.700

我认为您应该创建一个临时工作区来检索您想要的内容，然后删除工作区并保留本地项目。

TFS 中的工作区是服务器上内容的本地视图，对于给定的工作区，您可以选择要在本地检索的文件夹以及存储文件夹/文件的位置。

它与 SourceSafe 不同，您**不仅限于一个**工作区，您可以在给定的计算机上拥有任意数量的工作区。

所以我建议你为你想要做的操作创建一个专用的Workspace，并在你判断它合适的时候去掉它。

使用[TF.exe 工作区](http://msdn.microsoft.com/en-us/library/y901w7se.aspx)命令从 Shell 创建/删除工作区。然后[TF.exe 开始](http://msdn.microsoft.com/en-us/library/fx7sdeyf.aspx)检索文件。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-08-13T15:33:24.547

您可以使用`tf view`来获取特定文件，而无需创建工作区。

```
Retrieves a specific version of a file to a temporary folder on your computer and displays it.

tf vc view [/collection:TeamProjectCollectionUrl]
       [/console] [/recursive] [/output:localfile]
       [/shelveset:shelvesetname[;owner]] [/noprompt] itemspec
       [/version:versionspec] [/login:username,[password]]

Versionspec:
Date/Time         D"any .Net Framework-supported format"
                  or any of the date formats of the local machine
Changeset number  Cnnnnnn
Label             Llabelname
Latest version    T
Workspace         Wworkspacename;workspaceowner 
```*

# android - SlidingDrawer 旋转使用 onConfigurationChanged

> ID：10432637
> 
> 赞同：0
> 
> 时间：2012-05-03T13:41:22.107
> 
> 标签：android, rotation, slidingdrawer

我发现了一个让我很头疼的 Android 错误。

清单上的活动：

```
<activity
        android:name=".ActivityTest"
        android:configChanges="orientation"
        android:label="@string/app_name" /> 
```

布局：

```
<TextView
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:text="TEST" />

<SlidingDrawer
    android:id="@+id/drawer"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:content="@+id/content"
    android:handle="@+id/handle"
    android:orientation="vertical" >

    <ImageView
        android:id="@id/handle"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:src="@drawable/ic_launcher" />

    <LinearLayout
        android:id="@id/content"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:orientation="vertical" >

        <Button
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:text="Big Big Button" />
    </LinearLayout>
</SlidingDrawer> 
```

现在..抓住抽屉的把手，将其移到中间并在旋转设备的同时保持手指...

**抽屉尺寸都被拧紧了……**直到它完全打开。

![纵向抽屉关闭](../Images/30e2318df32e0c0b93cf5e908e7f94dd.png) ![抽屉半纵向打开](../Images/743ddca3977bb6e14bc4d3bf5dba5b7f.png) ![旋转到横向后的抽屉没有调整大小（手指仍然按下）](../Images/5349e83ba2fc32dd6ff9f1002c585fa1.png)

有人知道如何解决它吗？我正在尝试查看 SlidingDrawer 打开代码以检查为什么打开时它会正常……但还没有运气。

不自己处理轮换不是我现在愿意选择的选项...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T14:41:28.633

我从来没有使用过滑动抽屉，所以我只是想在这里提出一个想法，也许它会粘在墙上。

如果每当调用 onConfiguration 时，您会获得屏幕的宽度并将滑动抽屉的 layout_width 设置为该值怎么办？*看起来*当您中途停止并旋转屏幕时，宽度（旋转后）与旋转前的宽度相同。也许如果您明确设置宽度，它将正确扩展。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T10:29:01.547

好的，设法用一些技巧修复它......触摸事件有时在抽屉半打开后旋转后无法到达视图......

首先我扩展了抽屉，然后：在一些方法中添加了一些代码：

```
@Override
protected void onLayout(boolean changed, int l, int t, int r, int b)
{
    if (mTracking && !rotationStopTracking)
    {
        return;
    }
    else if (rotationStopTracking)
    {
        rotationStopTracking = false;
         if (isMoving())
        {
            animateOpen();
            close();
        }else{
            animateOpen();
        }
    }

    ...

   }

//Called from Activity onConfigurationChanged
public void enableRotationResize()
{
    if (mTracking)
    {
        mTracking = false;
        rotationStopTracking = true;
    }
} 
```

# php - 使用 Zend Framework 或 Javascript 进行浏览器检测

> ID：10432641
> 
> 赞同：2
> 
> 时间：2012-05-03T13:41:29.033
> 
> 标签：php, javascript, zend-framework, mootools, cross-browser

我正在创建一个需要能够上传大文件的应用程序。我选择使用[FormData](https://developer.mozilla.org/en/XMLHttpRequest/FormData)对象，因为使用它我可以向用户报告进度。

毫不奇怪 IE 不支持这一点，所以我不得不回退到 Flash。使用 Zend Framework 检测 IE 7/8/9+ 的最佳方法是什么？我正在通过每个控制器中的 indexAction 方法根据需要加载其他资产。例如：

```
public function indexAction()
{
    $this->view->stepnumber = 1;
    $this->view->stepintro = 'Upload your photo.';
    $this->view->headScript()->appendFile($this->view->baseUrl().'/assets/js/fileuploader.js');
} 
```

现在，在我的一个页面中，我已经完成了某种形式的浏览器检测（对于某些`canvas`工作）：

```
public function indexAction()
{

    $u_agent = $_SERVER['HTTP_USER_AGENT'];

    $this->view->stepnumber = 5;
    $this->view->stepintro = 'Select your cut out detail.';

    if(preg_match('/MSIE/i', $u_agent)) {
        $this->view->headScript()->appendFile($this->view->baseUrl().'/assets/js/excanvas.js');
    } else {
        $this->view->headScript()->appendFile($this->view->baseUrl().'/assets/js/mootools/mootools-canvas-lib/mcl-min.js');
    }      

    $this->view->headScript()->appendFile($this->view->baseUrl().'/assets/js/frank/pentool.js');

    $image = $this->uploadsDb->getImage();    

    $data = $this->nodedataDb->getNodedata($image->id);

    $this->view->image = $image;
    $this->view->nodeData = $data;

} 
```

不过，我不太喜欢这种方法，我宁愿使用 Javascript 进行检查，因为这将更具前瞻性（我认为）。但是我将如何在我的 ZF layout.phtml 中使用 Javasript，所以我只加载我需要的 Javascript？减少对服务器的调用。

任何帮助深表感谢。

解决方案：

我决定使用 YepNope：

```
yepnope({  
  test : "FormData" in window,
  yep  : 'normal.js',  
  nope : 'flashupload.js'  
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T14:16:58.033

如果您正在寻找一种简单的方法来为仅限 IE 的浏览器附加 css 样式表/javascript 文件，您可以使用条件注释参数，如下所示：

对于除 css 样式表之外的任何文件：

```
$this->view->headLink()->appendFile($this->view->baseUrl() . '/media/js/core.js', 'text/javascript', array('conditional' => 'IE'); 
```

注意`array('conditional' => 'IE')`论点。

对于附加样式表文件，函数参数略有不同：

```
$this->view->headLink()->appendStylesheet($this->view->baseUrl() . '/media/css/core.css', 'all', 'IE'); 
```

[http://framework.zend.com/manual/en/zend.view.helpers.html#zend.view.helpers.initial.headstyle](http://framework.zend.com/manual/en/zend.view.helpers.html#zend.view.helpers.initial.headstyle)

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-05-03T14:35:17.960

如果该功能不可用，您可以添加一个 javascript（我使用 jquery 作为短语法）；

```
if(typeof featureA == "undefined"){
    $("<script/>").attr({
        "src" : "/assets/featurea.js",
        "type": "text/javascript"
    }).appendTo($("head").eq(0));
} 
```

您可以将其用于其他功能，因此您不必全部下载。

# php - PHP函数获取数组中最后插入的数据

> ID：10432645
> 
> 赞同：2
> 
> 时间：2012-05-03T13:41:35.120
> 
> 标签：php, function

我知道你们会说这可能与[PHP get index of last insert item in array重复](https://stackoverflow.com/questions/3275082/php-get-index-of-last-inserted-item-in-array)

但我已经尝试过但没有成功让我的功能正常工作，我正试图找出原因。

我有一个功能可以从 Wordpress 帖子的内容中获取缩略图附件。

该代码适用于只有一个图像的帖子，但如果帖子中有多个图像，它将正确显示第一张图像`array`，但我不知道为什么它会反向存储图像。意味着最后存储的帖子的第一张图片和最后存储的第一张图片。我猜这可能就是`media`Wordpress 的功能。

无论如何，我只需要从函数中获取最后插入的数据，即使它有一个或多个图像存储在`array`

```
// Get Image Attachments
function sa_get_image($postid=0, $size='thumbnail') { 
    if ($postid<1)
    $postid = get_the_ID();
    $thumb = get_post_meta($postid, "thumb", TRUE); 
    if ($thumb != null or $thumb != '') {
        echo $thumb;
    }
    elseif ($images = get_children(array( 
        'post_parent' => $postid,
        'post_type' => 'attachment',
        'numberposts' => '1',
        'post_mime_type' => 'image', )))
        foreach($images as $image) {
            $thumbnail=wp_get_attachment_image_src($image->ID, $size);
            ?>
    <?php echo $thumbnail[0]; ?> // here is the problem where the image display.
    <?php }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T13:44:50.933

更改：
`$thumbnail=wp_get_attachment_image_src($image->ID, $size);`
至：
`$thumbnail[] = wp_get_attachment_image_src($image->ID, $size);`

不要忘记`$thumbnail = array()`在 for-each 之外声明。

然后你可以使用（首选）：

`echo end($thumbnail);`

或类似的东西：

`echo $thumbnail[count($thumbnail)-1];`

如果您不想获得“最后一个”附加值。
或者您可以使用`[0]`or`first()`来获取第一个值

* * *

您可以在此处添加它（例如）：

```
$thumb = get_post_meta($postid, "thumb", TRUE); 
$thumbnail = array(); //<<<
if ($thumb != null or $thumb != '') { 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-03T13:43:59.687

您正在将 $thumbnail 作为数组访问，但您正在覆盖 foreach() 中的变量，就好像它是一个字符串一样。

改变：

```
$thumbnail=wp_get_attachment_image_src($image->ID, $size); 
```

至

```
 $thumbnail[]=wp_get_attachment_image_src($image->ID, $size); 
```

使它成为一个数组，那么你的其余代码应该可以工作

啊

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-04T20:17:23.123

我的解决方案有一个更简单的方法，这里是我们如何从数组中获取最后一个。

只需将其添加到数组区域即可。

```
'orderby' => 'menu_order',
'order' => 'ASC', //If reverse use DESC 
```

# c# - 解析 json 对象

> ID：10432647
> 
> 赞同：10
> 
> 时间：2012-05-03T13:41:38.083
> 
> 标签：c#, .net, json, visual-studio

我无法理解如何使用 Visual .NET 将 JSON 字符串解析为 c# 对象。任务很简单，但我还是迷路了……我得到了这个字符串：

```
{"single_token":"842269070","username":"example123","version":1.1} 
```

这是我尝试消毒的代码：

```
namespace _SampleProject
{
    public partial class Downloader : Form
    {
        public Downloader(string url, bool showTags = false)
        {
            InitializeComponent();
            WebClient client = new WebClient();
            string jsonURL = "http://localhost/jev";   
            source = client.DownloadString(jsonURL);
            richTextBox1.Text = source;
            JavaScriptSerializer parser = new JavaScriptSerializer();
            parser.Deserialize<???>(source);
        } 
```

我不知道在“<”和“>”之间放什么，从我在网上阅读的内容来看，我必须为它创建一个新类..？另外，我如何获得输出？一个例子会很有帮助！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-03T13:49:48.940

创建一个可以将您的 JSON 反序列化为的新类，例如：

```
public class UserInfo
{
    public string single_token { get; set; }
    public string username { get; set; }
    public string version { get; set; }
}

public partial class Downloader : Form
{
    public Downloader(string url, bool showTags = false)
    {
        InitializeComponent();
        WebClient client = new WebClient();
        string jsonURL = "http://localhost/jev";
        source = client.DownloadString(jsonURL);
        richTextBox1.Text = source;
        JavaScriptSerializer parser = new JavaScriptSerializer();
        var info = parser.Deserialize<UserInfo>(source);

        // use deserialized info object
    }
} 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-05-03T13:47:30.860

如果您使用的是 .NET 4 - 使用动态数据类型。

[http://msdn.microsoft.com/en-us/library/dd264736.aspx](http://msdn.microsoft.com/en-us/library/dd264736.aspx)

```
string json = "{ single_token:'842269070', username: 'example123', version:1.1}";

     JavaScriptSerializer jss = new JavaScriptSerializer();

     dynamic obj = jss.Deserialize<dynamic>(json);

     Response.Write(obj["single_token"]);
     Response.Write(obj["username"]);
     Response.Write(obj["version"]); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-03T13:43:06.703

是的，您需要一个具有与您的 JSON 匹配的属性的新类。

```
MyNewClass result = parser.Deserialize<MyNewClass>(source); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-03T13:54:08.013

通常的方法是创建一个类（或一组类，用于更复杂的 JSON 字符串）来描述您要反序列化的对象并将其用作通用参数。

另一种选择是将 JSON 反序列化为`Dictionary<string, object>`：

```
parser.Deserialize<Dictionary<string, object>>(source); 
```

这样，您可以访问数据，但除非您必须这样做，否则我不建议您这样做。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-03T13:44:07.133

您需要一个与您获得的 JSON 匹配的类，它将返回该类的一个新对象，其中填充了值。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-09-12T12:22:50.843

以下是代码..

```
ServicePointManager.ServerCertificateValidationCallback = new System.Net.Security.RemoteCertificateValidationCallback(AcceptAllCertifications);

        request = WebRequest.Create("https://myipaddress/api/admin/configuration/v1/conference/1/");

        request.Credentials = new NetworkCredential("admin", "admin123");
        // Create POST data and convert it to a byte array.
        request.Method = "GET";          

                // Set the ContentType property of the WebRequest.
        request.ContentType = "application/json; charset=utf-8";          

        WebResponse response = request.GetResponse();
        // Display the status.
        Console.WriteLine(((HttpWebResponse)response).StatusDescription);
        // Get the stream containing content returned by the server.
        dataStream = response.GetResponseStream();
        // Open the stream using a StreamReader for easy access.
        StreamReader reader = new StreamReader(dataStream);
        // Read the content.
        string responseFromServer = reader.ReadToEnd();
        JavaScriptSerializer js = new JavaScriptSerializer();
        var obj = js.Deserialize<dynamic>(responseFromServer);
        Label1.Text = obj["name"];
        // Display the content.
        Console.WriteLine(responseFromServer);
        // Clean up the streams.
        reader.Close();
        dataStream.Close();
        response.Close(); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-05-10T23:27:13.800

```
dynamic data = JObject.Parse(jsString);
var value= data["value"]; 
```

# multithreading - “指令线程”和“控制线程”有什么区别？

> ID：10432648
> 
> 赞同：1
> 
> 时间：2012-05-03T13:41:39.817
> 
> 标签：multithreading, pthreads

我阅读了上面使用的术语，它们的含义隐含不同，但我无法弄清楚我在哪里阅读它。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-03T14:25:04.383

我认为“指令线程”仅指代码及其围绕函数、过程、循环和条件的流动方式。“控制线程”是指内核线程使用自己的程序计数器/堆栈执行。一个“指令线程”可以有多个“控制线程”执行其代码。

# c# - WPF TreeView 在多个监视器上显示不正确

> ID：10432649
> 
> 赞同：1
> 
> 时间：2012-05-03T13:41:44.897
> 
> 标签：c#, wpf, refresh, multiple-monitors

我有一个问题，我的应用程序可以正常工作，但是我有一个用户有 2 个监视器，当应用程序在第二个监视器上时，他遇到了以下问题：

以下屏幕截图取自单个文件。似乎当名称以几个相同的字符开头并且它们位于树视图的顶部边缘时，名称不会更新。

在文件中，从 20 到 23 有 4 个名为“DOVI*”，但当“DOVI21”是显示的第一个时，显示的名称与第二个相同（“DOVI22”）。对于那些以 2 个相同字符开头的字符，我也看到了相同的名称显示错误。如果这还不够难理解，那么只有在我的第二台显示器上查看应用程序时才会发生错误。

以下是截图：

正确的：

![在此处输入图像描述](../Images/265ea74036516fcf0e5d4af60ea221a2.png)

不正确：

![在此处输入图像描述](../Images/51550a06933054fc96f4223a01974652.png)

更新：我打开了树视图的虚拟化，并且树视图的滚动视图上的 IsDeferredScrollingEnabled 属性设置为 true。我不知道这是否相关。

另一个更新：我让另一个拥有多个显示器的用户尝试复制该问题，但他不能。我让最初的用户重新启动认为这只是一些奇怪的操作系统显示问题。这不起作用，所以我要让他更换他的显示器以确定这是否是图形/驱动程序问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T15:41:55.847

这似乎是一些奇怪的驱动程序或操作系统问题。尽管我的其他用户使用相同或相似的硬件和附件在相同的操作系统上，但没有一个用户可以重复这个问题。

# actionscript-3 - 移除事件监听器

> ID：10432651
> 
> 赞同：0
> 
> 时间：2012-05-03T13:41:50.607
> 
> 标签：actionscript-3, flash

我已经学会了这种使用 addEventLister 传递值的方法。这是代码：

```
for (var i:uint = 0; i < asteroids.length; i++)
{

     asteroids[i].x = Math.random() * 450;
     asteroids[i].y = Math.random() * 450;
     asteroids[i].addEventListener(MouseEvent.MOUSE_UP, function(e:MouseEvent){
         changeValue(e, otherArguments);
     });

}

public function changeValue(event:MouseEvent, otherArguments:Object):void
{

    playSound(anote);
    trace(event.currentTarget);

} 
```

但是没有关于如何从中删除事件侦听器的解释

```
 asteroids[i].addEventListener(MouseEvent.MOUSE_UP, function(e:MouseEvent){
     changeValue(e, otherArguments);
 }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T13:58:17.480

那是因为如果你没有对它的引用，你就不能解开一个匿名函数。如果您愿意，您可以随时保留参考：

```
asteroidsMouseUpHandler = function(e:MouseEvent){
    changeValue(e, otherArguments);
};

asteroids[i].addEventListener(MouseEvent.MOUSE_UP, asteroidsMouseUpHandler);

asteroids[i].removeEventListener(MouseEvent.MOUSE_UP, asteroidsMouseUpHandler); 
```

当然，如果这些事情发生在单独的成员函数中，那么你需要定义一个成员变量（`var asteroidsMouseUpHandler:Function`）。此时，您可能只想将其创建为命名函数。您也只想这样做一次（而不是循环）以避免破坏您的参考。真的，我显示此代码仅用于说明目的。

进一步考虑这一点，您可能会这样做，因为它`otherArguments`是特定于特定`asteroids[i]`实例的，因此您实际上是在每次挂钩时创建一个新的匿名函数。在这种情况下，如果这是您真正想要做的，您可以在字典中跟踪您的匿名函数：

```
var asteriodsCallbacks:Dictionary = new Dictionary(); 
```

然后，您可以跟踪那里的功能：

```
asteroidsCallbacks[asteroids[i]] = asteroidsMouseUpHandler;
asteroids[i].addEventListener(MouseEvent.MOUSE_UP, asteroidsMouseUpHandler); 
```

然后当你想脱钩时，你可以查一下：

```
asteroids[i].removeEventListener(MouseEvent.MOUSE_UP, asteroidsCallbacks[asteroids[i]]); 
```

当然，为了简单起见，我忽略了存在检查。您还必须添加它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T13:47:06.690

你为什么不像正常一样声明函数，而不是在参数中？您可以执行以下操作：

```
for (var i:uint = 0; i < asteroids.length; i++)
{

     asteroids[i].x = Math.random() * 450;
     asteroids[i].y = Math.random() * 450;
     asteroids[i].addEventListener(MouseEvent.MOUSE_UP, onMouseUp);
     });

}

public function onMouseUp(e:MouseEvent) {
    changeValue(e, otherArguments);
}

public function changeValue(event:MouseEvent, otherArguments:Object):void
{
    playSound(anote);
    trace(event.currentTarget);

} 
```

您可以按如下方式删除它：

```
asteroids[index].removeEventListener(MouseEvent.MOUSE_UP, onMouseUp) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-03T13:53:18.903

当您将匿名函数添加为事件侦听器时，您唯一可以合理地删除该事件侦听器的时间是在回调内部。

```
public function changeValue(event:MouseEvent, otherArguments:Object):void
{

    playSound(anote);
    trace(event.currentTarget);
    event.currentTarget.removeEventListener(MouseEvent.MOUSE_UP, arguments.callee);

} 
```

否则，您需要有一个非匿名函数才能将其删除。

# php - 奏鸣曲更改默认格式_日期

> ID：10432652
> 
> 赞同：0
> 
> 时间：2012-05-03T13:41:52.593
> 
> 标签：php, symfony, symfony-sonata

我已经安装了`SonataIntlBundle`捆绑包。默认的 format_date 会产生类似`day-number month-name year`.

`{{ date_time_object | format_date }} => '1 août 2011'`[资源](http://sonata-project.org/bundles/intl/master/doc/reference/datetime.html)

现在，我想将此默认值更改`dayNumber-monthNumber-yearNumber`为具有英语翻译 (en)`monthNumber-dayNumber-yearNumber`的人和具有荷兰语翻译 (nl) 的人。我应该怎么做？他们有任何文件吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T14:09:43.230

`{{ date_time_object | format_date('MM-dd-yyyy', 'nl') }}`会工作。如文档底部所定义。

**编辑**

要在全局范围内执行此操作，您可以扩展[DateTimeHelper](https://github.com/sonata-project/SonataIntlBundle/blob/master/Templating/Helper/DateTimeHelper.php)类并将`sonata.intl.templating.helper.datetime.class`参数设置为`app/config/config.yml`.

# asp.net-mvc - 有哪些好的库可用于自定义 html（不是基于表格）的分页？

> ID：10432654
> 
> 赞同：1
> 
> 时间：2012-05-03T13:41:56.693
> 
> 标签：asp.net-mvc, pagination

我有 asp.net mvc 网站，在某些页面中我需要分页功能，我想使用一个好的库来为我做到这一点，我不希望这个分页呈现表的问题，我希望它呈现我有诸如 li 或 div 之类的自定义 html。

你为这个任务推荐哪个库？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-06T04:29:21.983

我已经成功使用[了 MvcPaging](http://nuget.org/packages/MvcPaging)，它还允许您使用自己的视图覆盖默认的分页视图。

您可以使用以下命令 通过[NuGet安装它](http://nuget.org/packages/MvcPaging)**Install-Package *MvcPaging***

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-05T20:44:12.230

您可以非常轻松地使用 jquery 数据表 [http://datatables.net/](http://datatables.net/) 它们将允许您插入 HTML 内容并为您处理服务器端分页。因此，尽管您使用的是表格，但它们不会显示为一个，只需保留一列并在其中插入 html 内容。

# android - 我可以在 ViewGroup.addView 中重复使用 LayoutPrams 吗？

> ID：10432656
> 
> 赞同：11
> 
> 时间：2012-05-03T13:42:02.590
> 
> 标签：android, android-layout

是否将数据`ViewGroup.addView`克隆`LayoutParams`到内部或链接到它？我可以用不同的视图重复`LayoutParams`使用多次调用的同一个实例吗？`addView()`

在 apidoc 中没有任何关于它的内容。

**哇**

答案是否定的（通过实验检查）：

```
public class SymbolPadActivity extends Activity {
/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {

    super.onCreate(savedInstanceState);

    RelativeLayout.LayoutParams labelParams;

    /*
     * This block to reuse is not working
    labelParams = new RelativeLayout.LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT);
    labelParams.addRule(RelativeLayout.ALIGN_PARENT_LEFT, RelativeLayout.TRUE);
    labelParams.addRule(RelativeLayout.ALIGN_PARENT_TOP, RelativeLayout.TRUE);
    */

    RelativeLayout mover = new RelativeLayout(this);

    TextView textView;
    for(int leftMargin = 0; leftMargin<3000; leftMargin += 100) {
        for(int topMargin=0; topMargin<800; topMargin += 40) {

            // I can't omit these 3 lines 
            labelParams = new RelativeLayout.LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT);
            labelParams.addRule(RelativeLayout.ALIGN_PARENT_LEFT, RelativeLayout.TRUE);
            labelParams.addRule(RelativeLayout.ALIGN_PARENT_TOP, RelativeLayout.TRUE);

            labelParams.leftMargin = leftMargin;
            labelParams.topMargin = topMargin;

            textView = new TextView(this);
            textView.setText("(" + leftMargin + "," + topMargin + ")");
            mover.addView(textView, labelParams);

        }
    }

    RelativeLayout.LayoutParams moverParams = new RelativeLayout.LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT);
    moverParams.addRule(RelativeLayout.ALIGN_PARENT_LEFT, RelativeLayout.TRUE);
    moverParams.addRule(RelativeLayout.ALIGN_PARENT_TOP, RelativeLayout.TRUE);
    moverParams.leftMargin = 0;
    moverParams.topMargin = 0;

    RelativeLayout stator = new RelativeLayout(this);
    stator.addView(mover, 0, moverParams);

    setContentView(stator);

} 
```

}

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-03T13:51:34.983

> 在 apidoc 中没有任何关于它的内容。

这意味着无论当前的实现是什么，您都需要做出更保守的选择，因为实现可能会发生变化。

`LayoutParams`因此，您需要假设重用with different的实例是不安全的`Views`。

对于它的价值，据我所知，无论如何这是真的 -`ViewGroup`不会复制。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-03-22T15:25:39.673

这是一个老问题，但似乎有一个更新的答案：

LayoutParams 有一个用于复制另一个来源的构造函数：http: [//developer.android.com/reference/android/view/ViewGroup.LayoutParams.html](http://developer.android.com/reference/android/view/ViewGroup.LayoutParams.html)

```
ViewGroup.LayoutParams(ViewGroup.LayoutParams source) 
```

这建议不要重复使用它，但也许用你需要的一切创建 1 个布局参数对象，然后调用

```
new LayoutParams(someLayoutParamsToReUse) 
```

就我而言，我想将按钮的布局参数设置为与另一个按钮相同。我最初尝试过：

```
button.setLayoutParams(button2.getLayoutParams()); 
```

这将不起作用，但是这应该：

```
button.setLayoutParams(new LayoutParms(button2.getLayoutParams))' 
```

# r - 在 gamm4 R 封装中进行 GAM-GEE？

> ID：10432671
> 
> 赞同：2
> 
> 时间：2012-05-03T13:42:59.990
> 
> 标签：r, statistics, spatial, gam

我正在尝试分析生物的一些视觉横断面数据以生成栖息地分布模型。一旦看到有机体，就会在给定时间间隔收集点数据时跟踪它们。由于这些“跟随”之间的自相关，我希望使用类似于 Pirotta 等人的 GAM-GEE 方法。2011，使用包'yags'和'splines'（http://www.int-res.com/abstracts/meps/v436/p257-272/）。他们的 R 脚本显示在这里 (http://www.int-res.com/articles/suppl/m436p257_supp/m436p257_supp1-code.r)。我使用此代码的成功有限，并且存在多个模型无法收敛的问题。

以下是我的数据结构：

```
> str(dat2)

'data.frame':   10792 obs. of  4 variables:

 $ dist_slag       : num  26475 26340 25886 25400 24934 ...
 $ Depth           : num  -10.1 -10.5 -16.6 -22.2 -29.7 ...
$ dolphin_presence: int  0 0 0 0 0 0 0 0 0 0 ...

 $ block           : int  1 1 1 1 1 1 1 1 1 1 ...

> head(dat2)

  dist_slag    Depth dolphin_presence block
1  26475.47 -10.0934                0     1
2  26340.47 -10.4870                0     1
3  25886.33 -16.5752                0     1
4  25399.88 -22.2474                0     1

5  24934.29 -29.6797                0     1
6  24519.90 -26.2370                0     1 
```

这是我的块变量的摘要（指示每个块中存在自相关的组数

```
> summary(dat2$block)
   Min. 1st Qu.  Median    Mean 3rd Qu.    Max. 
   1.00   39.00   76.00   73.52  111.00  148.00 
```

但是，我想使用'gamm4'包，因为我更熟悉Simon Wood教授的包和功能，看来gamm4可能是最合适的。重要的是要注意模型具有二元响应（沿样带的有机体存在缺失），因此我认为 gamm4 比 gamm 更合适。在 gamm 帮助中，它为因子内的自相关提供了以下示例：

```
## more complicated autocorrelation example - AR errors
## only within groups defined by `fac'
e <- rnorm(n,0,sig)
for (i in 2:n) e[i] <- 0.6*e[i-1]*(fac[i-1]==fac[i]) + e[i]
y <- f + e
b <- gamm(y~s(x,k=20),correlation=corAR1(form=~1|fac)) 
```

按照此示例，以下是我用于数据集的代码

```
b <- gamm4(dolphin_presence~s(dist_slag)+s(Depth),random=(form=~1|block),  family=binomial(),data=dat) 
```

但是，通过检查输出 (summary(b$gam)) 和特别是 summary(b$mer))，我要么不确定如何解释结果，要么不相信组内的自相关被考虑在内.

```
> summary(b$gam)

Family: binomial 
Link function: logit 

Formula:
dolphin_presence ~ s(dist_slag) + s(Depth)

Parametric coefficients:

            Estimate Std. Error z value Pr(>|z|)   
    (Intercept)  -13.968      5.145  -2.715  0.00663 **
---
Signif. codes:  0 ‘***’ 0.001 ‘**’ 0.01 ‘*’ 0.05 ‘.’ 0.1 ‘ ’ 1 

Approximate significance of smooth terms:

               edf Ref.df Chi.sq  p-value    
s(dist_slag) 4.943  4.943  70.67 6.85e-14 ***
s(Depth)     6.869  6.869 115.59  < 2e-16 ***
---
Signif. codes:  0 ‘***’ 0.001 ‘**’ 0.01 ‘*’ 0.05 ‘.’ 0.1 ‘ ’ 1 

R-sq.(adj) =  0.317glmer.ML score =  10504  Scale est. = 1         n = 10792
> 

> summary(b$mer)
Generalized linear mixed model fit by the Laplace approximation 

   AIC   BIC logLik deviance
 10514 10551  -5252    10504
Random effects:
 Groups Name         Variance Std.Dev.
 Xr     s(dist_slag) 1611344  1269.39 
 Xr.0   s(Depth)       98622   314.04 
Number of obs: 10792, groups: Xr, 8; Xr.0, 8

Fixed effects:
                 Estimate Std. Error z value Pr(>|z|)   
X(Intercept)      -13.968      5.145  -2.715  0.00663 **
Xs(dist_slag)Fx1  -35.871     33.944  -1.057  0.29063   
Xs(Depth)Fx1        3.971      3.740   1.062  0.28823   

---
Signif. codes:  0 ‘***’ 0.001 ‘**’ 0.01 ‘*’ 0.05 ‘.’ 0.1 ‘ ’ 1 

Correlation of Fixed Effects:
            X(Int) X(_)F1
Xs(dst_s)F1  0.654       
Xs(Dpth)Fx1 -0.030  0.000
> 
```

如何确保在“块”变量的每个唯一值中确实考虑了自相关？解释“summary(b$mer)”输出的最简单方法是什么？

结果确实与使用相同变量和参数但没有“correlation=...”术语的普通 gam（包 mgcv）不同，表明正在发生不同的事情。

但是，当我为相关项（季节）使用不同的变量时，我得到了相同的输出：

```
> dat2 <- data.frame(dist_slag = dat$dist_slag, Depth = dat$Depth, dolphin_presence = dat$dolphin_presence,

+ block = dat$block, season=dat$season)
 > head(dat2)
      dist_slag    Depth dolphin_presence block season
1  26475.47 -10.0934                0     1      F
2  26340.47 -10.4870                0     1      F

3  25886.33 -16.5752                0     1      F
4  25399.88 -22.2474                0     1      F
5  24934.29 -29.6797                0     1      F
6  24519.90 -26.2370                0     1      F

> summary(dat2$season)

   F    S 
3224 7568 

> b <- gamm4(dolphin_presence~s(dist_slag)+s(Depth),correlation=corAR1(1, form=~1 |   season), family=binomial(),data=dat2)
> summary(b$gam)

Family: binomial 
Link function: logit 

Formula:
dolphin_presence ~ s(dist_slag) + s(Depth)

Parametric coefficients:
            Estimate Std. Error z value Pr(>|z|)   
    (Intercept)  -13.968      5.145  -2.715  0.00663 **
---
Signif. codes:  0 ‘***’ 0.001 ‘**’ 0.01 ‘*’ 0.05 ‘.’ 0.1 ‘ ’ 1 

Approximate significance of smooth terms:
               edf Ref.df Chi.sq  p-value    
s(dist_slag) 4.943  4.943  70.67 6.85e-14 ***
s(Depth)     6.869  6.869 115.59  < 2e-16 ***
---
Signif. codes:  0 ‘***’ 0.001 ‘**’ 0.01 ‘*’ 0.05 ‘.’ 0.1 ‘ ’ 1 

R-sq.(adj) =  0.317glmer.ML score =  10504  Scale est. = 1         n = 10792
> summary(b$mer)
Generalized linear mixed model fit by the Laplace approximation 
   AIC   BIC logLik deviance

 10514 10551  -5252    10504
Random effects:
 Groups Name         Variance Std.Dev.
 Xr     s(dist_slag) 1611344  1269.39 
 Xr.0   s(Depth)       98622   314.04 
Number of obs: 10792, groups: Xr, 8; Xr.0, 8

Fixed effects:
                 Estimate Std. Error z value Pr(>|z|)   
X(Intercept)      -13.968      5.145  -2.715  0.00663 **
Xs(dist_slag)Fx1  -35.871     33.944  -1.057  0.29063   
Xs(Depth)Fx1        3.971      3.740   1.062  0.28823   
---
Signif. codes:  0 ‘***’ 0.001 ‘**’ 0.01 ‘*’ 0.05 ‘.’ 0.1 ‘ ’ 1 

Correlation of Fixed Effects:
            X(Int) X(_)F1
Xs(dst_s)F1  0.654       
Xs(Dpth)Fx1 -0.030  0.000
> 
```

我只是想确保它正确地允许“块”变量的每个值内的相关性。我如何制定模型来说明自相关可以存在于块的每个单个值中，但假设块之间是独立的？

另一方面，在大型模型（变量多于 2）的模型完成后，我还会收到以下警告消息：

```
Warning message:
 In mer_finalize(ans) : false convergence (8) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-03T14:44:03.730

*   `gamm4`构建在 之上`lme4`，它**不允许**`correlation`参数（与`nlme`, 包相反，它是 的基础）`mgcv::gamm`。 `mgcv::gamm` *确实*处理二进制数据，尽管它使用 PQL，这通常不如 Laplace/GHQ 近似值准确，如`gamm4/lme4`. 不幸的是（！！）您没有收到警告，告诉您该`correlation`参数被忽略（当我尝试使用带有 的`correlation`参数的简单示例时`lme4`，我确实收到了警告，但有可能额外的参数正在吞下里面的某个地方`gamm4`）。
*   您想要的自相关结构（“自相关可以存在于块的每个单个值中，但假设块之间是独立的”）正是相关结构的编码方式`nlme`（因此在 中`mgcv::gamm`）。
*   我会使用`mcgv::gamm`, 并建议如果可能的话，您可以在一些具有已知结构的模拟数据上进行尝试（或使用上面补充材料中提供的数据集，看看您是否可以用您的替代方法重现他们的定性结论）。
*   StackOverflow 很好，但可能有更多的混合模型专业知识`r-sig-mixed-models@r-project.org`

# objective-c - CATiledLayer 在 iPad 第 3 代放大时被移除和刷新

> ID：10432675
> 
> 赞同：5
> 
> 时间：2012-05-03T13:43:17.663
> 
> 标签：objective-c, ios, ipad, pdf, catiledlayer

当父 UIScrollView 放大时，我在 CATiledLayer 上遇到重绘问题。

我在 CATiledLayer 支持的 UIView 中呈现 PDF 页面。它后面有另一个 UIImageView，其中包含 CATiledLayer 将绘制的页面的低分辨率图像。当我放大时，它按预期工作。CATiledLayer 将根据缩放级别渲染更高分辨率的图像。

缩放后出现问题。如果我放大然后只留下 iPad，显示的图像会模糊然后重新锐化。看起来 CATiledLayer 正在被移除，因为我在背景视图中看到模糊的低分辨率图像，然后 CATiledLayer 被重新绘制，即我看到了平铺效果和图像的重新锐化。如果我不理会应用程序并等待大约 30 到 40 秒，就会发生这种情况。我只在第三代 iPad（新 iPad、iPad3 等）上观察到它。我也在 iPad2s 上进行测试，但我还没有遇到这个问题。

有没有其他人遇到过这个问题？任何已知的原因和可能的解决方案？

编辑：

我的 UIScrollViewDelegate 方法如下：

```
// currentPage, previousPage, and nextPage are the pdf page views
// that are having the refresh problem 

- (void)positionBufferedPages { 
  // performs math {code omitted}

  // then sets the center of the views
  [previousPage.view setCenter:...];        
  [nextPage.view setCenter:...];
}

- (void)hideBufferedPages {
  if ([previousPage.view isDescendantOfView:scrollView]) {
    [previousPage.view removeFromSuperview];
  }

  if ([nextPage.view isDescendantOfView:scrollView]) {
    [nextPage.view removeFromSuperview];
  }          
}

- (void)showBufferedPages {
  if (![previousPage.view isDescendantOfView:scrollView]) {
    [scrollView addSubview:previousPage.view];
  }

  if (![nextPage.view isDescendantOfView:scrollView]) {
    [scrollView addSubview:nextPage.view];
  }

  if (![currentPage.view isDescendantOfView:scrollView]) {
    [scrollView addSubview:currentPage.view];
  }
} 

- (UIView *)viewForZoomingInScrollView:(UIScrollView *)scrollView {
  return currentPage.view;
}

- (void)scrollViewWillBeginZooming:(UIScrollView *)scrollView withView:(UIView *)view {
  [self hideBufferedPages];
}

- (void)scrollViewDidEndZooming:(UIScrollView *)scrollViewParam withView:(UIView *)view atScale:(float)scale {
  [self positionBufferedPages];
  [self showBufferedPages];    
}

- (void)scrollViewDidZoom:(UIScrollView *)scrollView {
  // nothing relating to the pdf page view
  // but does set the center of some other subviews on top of the pdf page views
} 
```

不确定这会有多大帮助，因为当问题发生时，滚动视图没有接收到输入。如上所述，pdf页面加载到CATiledLayer，然后我不理会iPad（设备没有接收到输入），CATiledLayer会自行重绘。

我还尝试在视图和平铺层上捕获对`setNeedsDisplay`、`setNeedsDisplayInRect:`、`setNeedsLayout`和的调用`setNeedsDisplayOnBoundsChange:`，但是重绘发生时没有调用任何这些函数。`drawLayer:inContext:`当然会被调用，但是跟踪仅显示在后台线程中启动了一些 Quartz 调用（正如预期的那样，因为平铺层在后台准备内容），所以它也无济于事。

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-11T11:35:31.963

您的应用程序的内存使用情况如何？如果出现内存警告，CATiledLayer 将丢弃其缓存并重绘。即使没有向应用程序发送内存警告（只是比通常的内存负载高），我也看到它这样做了。使用 Instruments 查看内存使用情况。您可能需要使用 OpenGL ES Driver 工具来查看图形内存的情况。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-01T01:24:42.350

我与一位 Apple 工程师就此进行了交谈，简短的回答是 iOS 只有 X 量的内存可用于缓存 CATiledLayer，并且在 iPad 的 Retina 显示屏上，像素太多，无法使用多个图层。

我一直在使用两个 CATileLayers 在顶部显示地图视图和绘图视图。我删除了第二个 CATiledLayer，问题就消失了。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-03T14:00:55.783

我遇到了完全相同的问题。在我的情况下，它是由使用 UIGraphicsBeginImageContext() 函数引起的；这个函数没有考虑到比例，这会给视网膜显示器带来问题。解决方案是用 UIGraphicsBeginImageContextWithOptions() 替换调用，将 scale (=third) 参数设置为 0.0。

如果您像我一样基于 Apple 的 Zooming PDF Viewer 示例代码编写代码，那么这很可能也可以解决您的问题。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-11T22:51:38.343

Longshot，您是否有可能从非主线程调用视图上的任何方法？如果你这样做，就会发生各种意想不到的时髦事情。

# mongodb - 更新 MongoDB 中精确元素数组中的字段

> ID：10432677
> 
> 赞同：71
> 
> 时间：2012-05-03T13:43:29.187
> 
> 标签：mongodb, mongodb-query, nosql

我有一个结构如下的文档：

```
{
    _id:"43434",
    heroes : [
        { nickname : "test",  items : ["", "", ""] },
        { nickname : "test2", items : ["", "", ""] },
    ]
} 
```

我可以在数组中嵌入对象数组的`$set`第二个元素吗？`items``heros``nickname` `"test"`

**结果：**

```
{
    _id:"43434",
    heroes : [
        { nickname : "test",  items : ["", "new_value", ""] }, // modified here
        { nickname : "test2", items : ["", "", ""] },
    ]
} 
```

* * *

## 回答 #1

> 赞同：144
> 
> 时间：2012-05-03T14:03:16.997

您需要使用 2 个概念：[mongodb 的位置运算符](http://docs.mongodb.org/manual/reference/operator/update/positional/)和简单地使用要更新的条目的数字索引。

位置运算符允许您使用如下条件：

```
{"heroes.nickname": "test"} 
```

然后像这样引用找到的数组条目：

```
{"heroes.$  // <- the dollar represents the first matching array key index 
```

当您要更新“项目”中的第二个数组条目时，数组键的索引为 0 - 这就是键 1。

所以：

```
> db.denis.insert({_id:"43434", heroes : [{ nickname : "test",  items : ["", "", ""] }, { nickname : "test2", items : ["", "", ""] }]});
> db.denis.update(
    {"heroes.nickname": "test"}, 
    {$set: {
        "heroes.$.items.1": "new_value"
    }}
)
> db.denis.find()
{
    "_id" : "43434", 
    "heroes" : [
        {"nickname" : "test", "items" : ["", "new_value", "" ]},
        {"nickname" : "test2", "items" : ["", "", "" ]}
    ]
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2021-04-23T10:36:13.023

尝试[使用位置 $ 更新数组中的文档](https://docs.mongodb.com/manual/reference/operator/update/positional/#update-documents-in-an-array)，

位置 $ 运算符有助于更新包含嵌入文档的数组。使用位置 $ 运算符访问嵌入文档中的字段，并在 $ 运算符上使用点符号。

```
db.collection.update(
  { "heroes.nickname": "test" },
  { $set: { "heroes.$.items.1": "new_value" } },
  { multi: true }
); 
```

[操场](https://mongoplayground.net/p/P9Yxicz7NVh)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-04-17T04:44:28.917

这个解决方案效果很好。只想加一分。这是结构。我需要找到 OrderItemId 是 'yyy' 并更新。如果条件中的查询字段是一个数组，比如下面的“OrderItems.OrderItemId”就是一个数组。您不能在查询中使用“OrderItems.OrderItemId[0]”作为操作。相反，您需要使用“OrderItems.OrderItemId”进行比较。否则，它不能匹配一个。

```
{
  _id: 'orderid',
  OrderItems: [
   {
     OrderItemId: ['xxxx'], 
    ... },
   {
     OrderItemId: ['yyyy'], 
    ...}, 
]

} 
```

```
 result =  await collection.updateOne(
        { _id: orderId, "OrderItems.OrderItemId": [orderItemId] },
        { $set: { "OrderItems.$.imgUrl": imgUrl[0], "OrderItems.$.category": category } },
        { upsert: false },
      )
    console.log('  (result.modifiedCount) ', result.modifiedCount)
    console.log('  (result.matchedCount) ', result.matchedCount) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-10-11T13:27:14.993

尝试使用位置 $ 和[$position](https://docs.mongodb.com/manual/reference/operator/update/position/)进行更新，

```
db.collection.update(
  { heroes:{ $elemMatch:{ "nickname" : "test"} } },
  {
    $push: {
      'heroes.$.items': {
        $each: ["new_value" ],
        $position: 1
      }
    }
  }
) 
```

# actionscript-3 - Flash AS3 - 尝试将当前嵌入字体更改为另一种字体，但未显示新字体

> ID：10432678
> 
> 赞同：0
> 
> 时间：2012-05-03T13:43:30.173
> 
> 标签：actionscript-3

我继承了一个项目，需要重新设计以供另一家公司使用，我无法使用 Helvetica Neue 更改当前嵌入的字体 DIN Next LT Pro

我是 Flash 和 AS3 的新手，所以真的从头开始学习。说我花了最后一天在谷歌上研究这个问题并尝试了多种解决方案都无济于事。

以下是闪光灯的设置方法。

**feedback.fla**嵌入了以下字体：

*   DIN Next LT Pro Bold Condensed
*   DIN Next LT Pro Light Condensed
*   DIN Next LT Pro 常规
*   Helvetica Neue LT Std 45 Light
*   Helvetica Neue LT Std 55 Roman
*   Helvetica Neue LT Std 75 粗体

DIN 字体已安装。我通过单击嵌入添加了 Helvetica 字体，添加了一个与字体相同但没有空格的字体名称，例如：HelveticaNeueLTStd75Bold。

**FeedbackPage.as**似乎指定了要使用的字体并将它们应用于标签：

```
public class FeedbackPage extends AbstractPage {
    public static const FONT_BOLD : String = "DIN Next LT Pro Bold Condensed";
    public static const FONT_LIGHT : String = "DIN Next LT Pro Light Condensed";
    public static const FONT_REGULAR : String = "DIN Next LT Pro";
    etc.. etc.. 
```

FeedbackPage.as 还导入另一个 .as 文件：

```
import dk.electric.synoptik.components.feedbackelements.PercentFeedback; 
```

**PercentFeedback.as**此文件创建文本文件并应用字体：

```
var tfmtPercent : TextFormat = new TextFormat(FeedbackPage.FONT_BOLD, fontSize, 0x0a9fda);
_tfPercent = TextFieldUtils.createTextField(6, yPos, 150, 95, Math.abs(pctDif).toString() + "%", tfmtPercent, false, TextFieldAutoSize.NONE);
_sprContainer.addChild(_tfPercent); 
```

将我的新字体 Helvetica Neue LT Std 75 Bold 嵌入到 fla 文件后，我将 FeedbackPage.as 更改为：

```
public static const FONT_BOLD : String = "Helvetica Neue LT Std 75 Bold"; 
```

导出我的fla，上传看看，文字消失了。我尝试使用嵌入时指定的名称（HelveticaNeueLTStd75Bold），但这也不起作用。

有什么想法，因为我被大量卡住了吗？

**文本字段实用程序**

```
package com.madsb.utils {
    import flash.text.TextField;
    import flash.text.TextFormat;

    public class TextFieldUtils {

        public static function createTextField(x : Number = 0,
            y : Number = 0,
            width : Number = 100,
            height : Number = 100,
            text : String = "",
            textFormat : TextFormat = null,
            multilineWordWrap : Boolean = false,
            autoSize : String = "none",
            embedFonts : Boolean = true,
            antiAliasType : String = "advanced",
            selectable : Boolean = false) : TextField {

                var tf : TextField = new TextField();
                tf.x = x;
                tf.y = y;
                tf.width = width;
                tf.height = height;
                tf.embedFonts = embedFonts;
                tf.selectable = selectable;
                tf.multiline = tf.wordWrap = multilineWordWrap;
                tf.autoSize = autoSize;
                tf.antiAliasType = antiAliasType;
                tf.defaultTextFormat = textFormat;
                tf.htmlText = text;

                return tf;
            }

    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T15:08:08.950

尝试通过将嵌入字体放入库中来使用嵌入字体（这样，如果他们的计算机上没有安装该字体，人们也可以看到它）并从中制作一个 var。然后将字体设置为该名称（`myFormat.font = myFont.fontName;`其中 myFormat 名称是您的 TextFormat 的名称，myFont 是您字体的变量名称。“fontName”部分应该保持这样，而不是您的字体名称）

另外，我不确定，但我认为因为“Helvetica Neue LT Std 75 Bold”和“HelveticaNeueLTStd75Bold”不一样（因为有空格），flash 可能无法理解您指的是哪种字体。

# google-app-engine - 从 GAE 数据存储复制数据

> ID：10432679
> 
> 赞同：3
> 
> 时间：2012-05-03T13:43:37.680
> 
> 标签：google-app-engine, google-cloud-datastore

我们有一个要在 GAE 上部署的应用程序。我的任务是提出将我们存储在 GAE 数据存储中的数据复制到在亚马逊云中运行的系统的选项。

理想情况下，我们可以做到这一点，而不必在每次同步时传输整个数据存储。复制不需要接近实时，所以一天一两次同步就可以了。

任何有 GAE 经验的人都可以在这里帮助我了解可能的选择吗？到目前为止，我想出了：

1.  使用 Google 提供的 bulkloader.py 将数据导出到 CSV 并以某种方式将 CSV 传输到亚马逊并在那里处理

2.  创建一个在 GAE 上运行的 Java 应用程序，从数据存储中读取数据并将数据发送到另一个在 Amazon 上运行的 Java 应用程序。

这些选项有效吗？这些会有什么问题？还有哪些其他选择？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-03T15:03:45.683

您可以使用类似于 App Engine HRD 迁移或备份工具正在执行的逻辑：

1.  用子实体标记标记修改的实体
2.  [使用App Engine mapreduce 库](http://code.google.com/p/appengine-mapreduce/)运行 MapperPipeline ，使用Datastore Input Reader 对这些实体进行迭代
3.  在您的地图函数中获取父实体并使用文件输出写入器将其序列化到 Google 存储并删除标记
4.  ping 远程主机以从 Google Storage url 导入这些实体

作为 3 和 4 的替代方案，您可以使用多个 urlfetch(POST) 将每个序列化实体直接发送到远程主机，但它更脆弱，因为单个故障可能会损害数据导入的完整性。

您可以查看[数据存储管理源代码](http://code.google.com/p/googleappengine/source/browse/#svn/trunk/python/google/appengine/ext/datastore_admin)以获取灵感。

# soap - Coldfusion 使用 SOAP 发布 web 服务

> ID：10432681
> 
> 赞同：0
> 
> 时间：2012-05-03T13:43:40.027
> 
> 标签：soap, coldfusion, request, response, publishing

我正在尝试创建一个可以与 SOAP 一起使用的 Web 服务。我正在使用返回任何值的普通 Web 服务进行锻炼，但我知道我想检查 SOAP:BODY 中的哪些元素是需要的，并通过响应返回它们。我找到了方法

> 获取肥皂请求（）

和

> AddSoapResponse()

在adobe的livedoc中，但不知道如何使用它们。[我在w3school.com](http://www.w3schools.com/soap/soap_example.asp)上看到了请求和响应的解释

我试图用标签“cfsavecontent”解决问题

```
<cffunction
        name="soap"
        access="remote"
        returntype="any"
        output="false">

        <cfsavecontent variable="soapMessage">
            <?xml version="1.0">
            <soap:Envelope
                xmlns:soap="http://www.w3.org/2001/12/soap-envelope"
                soap:encodingStyle="http://www.w3.org/2001/12/soap-encoding">

                <soap:Header>

                </soap:Header>

                <soap:Body>
                     <m:GetPriveResponse xmlns:m="namespace">
                         <m:Price>1.90</m:Price>
                    </m:GetPriceResponse>
                </soap:Body>        
             </soap:Envelope>
         </cfsavecontent> 
```

但它仅在 cffunction 具有 returntype="any" 时才有效。“xml”类型发生错误。

谢谢你

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-03T16:37:18.500

在 CF 中创建 Web 服务的最简单方法，请参见

为 Web 服务创建组件[http://help.adobe.com/en_US/ColdFusion/9.0/Developing/WSc3ff6d0ea77859461172e0811cbec13a13-7fe2.html](http://help.adobe.com/en_US/ColdFusion/9.0/Developing/WSc3ff6d0ea77859461172e0811cbec13a13-7fe2.html)

发布 Web 服务 [http://help.adobe.com/en_US/ColdFusion/9.0/Developing/WSc3ff6d0ea77859461172e0811cbec22c24-78b7.html](http://help.adobe.com/en_US/ColdFusion/9.0/Developing/WSc3ff6d0ea77859461172e0811cbec22c24-78b7.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-07T06:13:12.147

我刚刚安装`soapUI` `eclipse` `addon`并调用了`WSDL`包含复杂类型参数的。在使用插件测试我的方法后`web service`，我得到了我一直在搜索的 SOAP-Message。也许它会帮助任何人，我只是在很长时间内寻找这个解决方案。

```
<soapenv:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"     
    xmlns:xsd="http://www.w3.org/2001/XMLSchema"           
    xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" 
    xmlns:com="http://components.conner.somebody">
    <soapenv:Header/>
    <soapenv:Body>
          <com:echoAddress soapenv:encodingStyle="http://schemas.xmlsoap.org/soap/encoding/">
          <input xsi:type="com:Address">
              <City xsi:type="xsd:string">?</City>
              <Country xsi:type="xsd:string">?</Country>
              <State xsi:type="xsd:string">?</State>
              <Street xsi:type="xsd:string">?</Street>
          </input>
          </com:echoAddress>
    </soapenv:Body>
</soapenv:Envelope> 
```

这是将调用的coldfusion组件的方法

```
<cffunction
    name="echoAddress"
    returnType="address"
    output="false"
    access="remote">

    <cfargument
        name="input"
        type="address">

    <cfreturn #arguments.input#>
</cffunction> 
```

# c++ - 我的 Dijkstra 算法实现中的逻辑错误

> ID：10432682
> 
> 赞同：1
> 
> 时间：2012-05-03T13:43:40.623
> 
> 标签：c++, dijkstra

我一直在研究 Dijkstra 的算法很长一段时间，试图通过使用邻接矩阵来找出顶点之间的最短距离。似乎大多数算法都可以正常工作，但是当该移动到下一个顶点时我遇到了一些问题。这是我的代码：

```
/*Declarations and initialization*/
int* result;
int dist[this->nr_airport];
int unvisited[this->nr_airport];
int cur_vertex = source;
int check_dist = 0;
bool check_val_found = false;
for(int i=0 ; i<this->nr_airport ; i++)
{
     dist[i] = -1;      //-1 represents infinity
     unvisited[i] = i;  //the set of all unvisited nodes
}
dist[source] = 0;

/*Determining distances*/
for(int i=0 ; i<this->nr_airport ; i++)
{
    if(unvisited[i]!=-1 && this->matrix[cur_vertex][i]>0)   //Check if node is unvisited and neighbour to cur_vertex
    {
        if(dist[i]>=dist[cur_vertex]+this->matrix[cur_vertex][i] || dist[i]==-1)    //Check distance
        {
            dist[i] = dist[cur_vertex]+this->matrix[cur_vertex][i]; //Assign new distance
        }
    }
}

/*Setting the new vertex*/
for(int i=0 ; i<this->nr_airport ; i++)
{
    if(this->matrix[cur_vertex][i]>0 && unvisited[i]!=-1 && dist[i]>0)
    {
        if(!check_val_found)
        {
            check_dist = dist[i];
            cur_vertex = i;
            check_val_found = true;
        }
        if(dist[i]<check_dist)
        {
            check_dist = dist[i];
            cur_vertex = i;
        }
    }
} 
```

首先，我循环遍历矩阵以确定当前顶点邻居的最短距离，并将该值分配给 dist[]。如果顶点未访问（未访问 []！=-1）并且矩阵值表明它是邻居，我会这样做。

然后，为了检查下一个顶点，我循环遍历所有顶点并检查它们与起始节点的距离，起始节点由 dist[] 保存。如果一个顶点已经被访问过 (unvisited[]==-1) 或者该顶点是当前顶点或不是当前顶点的邻居 (this->matrix[][]==0 或 this->matrix[] []==-1)，则它不会检查，因为该顶点不能是下一个要检查的顶点。

这里出了点问题，因为当我运行程序时，似乎首先，它没有检查它应该检查的所有顶点，其次，它检查了一些它不应该检查的顶点；我遇到的问题是我从一个顶点到另一个顶点，实际上它*不是*当前顶点的邻居。我检查了矩阵，它是正确的。

# node.js - 移动到 Ubuntu 12.04 后标准 nodejs http.get 返回超时

> ID：10432683
> 
> 赞同：1
> 
> 时间：2012-05-03T13:43:42.780
> 
> 标签：node.js, ubuntu

将我的应用程序从`Fedora`Linux 移动到最新`Ubuntu 12.04`的 . 两台机器都位于公司网络代理后面。上的节点版本`Ubuntu`是`0.6.6`. 这可能是一个`Ubuntu 12.04`特定的问题吗？其他人也看到了吗？

# python - 自动更新和发送 IP 地址

> ID：10432684
> 
> 赞同：3
> 
> 时间：2012-05-03T13:43:44.527
> 
> 标签：python, networking, automation

我在具有 ADSL 连接的机器上运行 SSH。每次机器有新的 IP 地址时，我都会制作这个脚本来向我发送一封电子邮件。

我无法访问该机器。我把脚本给了一个朋友，所以我无法通过调试来找出这个脚本有什么问题。我现在正在使用大学连接，它有一个静态 IP 地址。在上面运行脚本没有意义。

所以任何关于如何改进/修复脚本的建议。有时我会收到无效的 IP 地址，或者有时 IP 地址会更改但我没有收到电子邮件。我应该为这种自动化使用另一种方法吗？

```
import urllib
import time
import smtplib

fromaddr = '***@gmail.com'  
toaddrs  = '***@gmail.com'    
ip = ""

username = '****'  
password = '****'  
f = False

def update():
    global ip,f
    #print "sleeping 5 seconds"
    time.sleep(5)
    while not f:
        try:
            f = urllib.urlopen("http://automation.whatismyip.com/n09230945.asp")
        except IOError, e:
            print "no internet !"
            time.sleep(5)

    if not ip and f:
        ip = f.read()
        print "getting the first ip"
        print ip
        sendmail(ip)
        print "mail sent"

    else:
        if f:
            ip2 = f.read()
            #print ip,ip2
            if ip != ip2 and ip and ip2:
                ip = ip2
                print "new ip",ip,"sending mail"
                sendmail(ip)
            else:
                print "ip is the same"
            f = False
    #print ip

def sendmail(ip):
    a = False
    while not a:
        try:
            #just to check if i have internet or not
            a = urllib.urlopen("http://automation.whatismyip.com/n09230945.asp")
            server = smtplib.SMTP('smtp.gmail.com:587')
            server.ehlo()
            server.starttls()
            server.ehlo()
            server.login(username,password)
            server.sendmail(fromaddr, toaddrs, ip)  
            server.quit()
        except IOError, e:
            print "no internet"
            time.sleep(5)
            #sendmail(ip)

print "program started"

while(1):
    update() 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-03T14:22:59.243

我建议您可能过于频繁地访问服务器并被阻止... [http://forum.whatismyip.com/f14/pace-yourself-t6/](http://forum.whatismyip.com/f14/pace-yourself-t6/)

将您的第一个更改`time.sleep(5)`为`time.sleep(300)`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-11T15:15:19.107

感谢伟大的剧本！这肯定会起作用（使用 echoip.com 作为 urlopen 数据）

```
import urllib
import time
import smtplib

fromaddr = '***'  
toaddrs  = '***'    
ip = ""

username = '***'  
password = '***'  
f = False

def update():
    global ip,f
    #print "sleeping 5 seconds"
    time.sleep(20)
    while not f:
        try:
            f = urllib.urlopen("http://echoip.com")
        except IOError as e:
            print ("no internet !", e)
            time.sleep(5)

    if not ip and f:
        ip = f.read()
        print "getting the first ip"
        print ip
        sendmail(ip)
        print "mail sent"

    else:
        if f:
            ip2 = f.read()
            #print ip,ip2
            if ip != ip2 and ip and ip2:
                ip = ip2
                print "new ip",ip,"sending mail"
                sendmail(ip)
            else:
                print "ip is the same"
            f = False
    #print ip

def sendmail(ip):
    a = False
    while not a:
        try:
            #just to check if i have internet or not
            a = urllib.urlopen("http://echoip.com")
            server = smtplib.SMTP('smtp.gmail.com:587')
            server.ehlo()
            server.starttls()
            server.ehlo()
            server.login(username,password)
            server.sendmail(fromaddr, toaddrs, ip)  
            server.quit()
        except IOError as e:
            print ("no internet", e)
            time.sleep(10)
            #sendmail(ip)

print "program started"

while(1):
    update() 
```

# asp.net - 将 DNN 表单更改为普通的 GET 表单

> ID：10432692
> 
> 赞同：0
> 
> 时间：2012-05-03T13:44:06.020
> 
> 标签：asp.net, forms, search, dotnetnuke

我正在对带有自定义皮肤的 Dot Net Nuke 网站进行一些更改。我发现皮肤文件的标头位于[此处](https://stackoverflow.com/a/10341932/773263)的“Default.aspx”中。

该表单有一些非常奇怪的行为。我不得不禁用回车按钮，因为在表单中按下会导致网页转到“/HOME.aspx”，但是该操作从未在 Default.aspx 中指定。

代码如下。

```
 <dnn:Form id="Form" runat="server" ENCTYPE="multipart/form-data" >
    <asp:Label ID="SkinError" runat="server" CssClass="NormalRed" Visible="False"></asp:Label>
    <asp:PlaceHolder ID="SkinPlaceHolder" runat="server" />
    <input id="ScrollTop" runat="server" name="ScrollTop" type="hidden" />
    <input id="__dnnVariable" runat="server" name="__dnnVariable" type="hidden" />
</dnn:Form> 
```

处理后的表单在浏览器中显示为。

```
<form name="Form" method="post" action="/HOME.aspx" onsubmit="javascript:return WebForm_OnSubmit();" id="Form" enctype="multipart/form-data"> 
```

我希望代码简单地显示。

```
<form name="Form" method="get" action="/SearchResults.aspx"  id="Form"> 
```

我尝试直接使用 html 删除 dnn 代码，但删除 dnn 表单会导致网站崩溃。

* * *

*编辑*

*我正在尝试做的可以在[http://www.ontariosheep.org](http://www.ontariosheep.org)看到。 注意如果你按下按钮搜索工作，但按下回车会导致页面刷新。*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T05:31:12.580

您可以使用一些 Javascript 来执行此操作：

```
jQuery('#SearchBox').keypress(function(e){
   if(e.which == 13){
       e.preventDefault();CallSearchPage('http://www.ontariosheep.org/SearchResults.aspx');
   }
}); 
```

你需要把它放在脚本标签和一个 jQuery 文档就绪区域......比如

`<script>` `jQuery(document).ready(function(){`

`//code above here`

`});` `</script>`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T21:40:08.527

在 DNN 中更改表单的行为并不是一件容易的事。DNN 使用 ASP.NET Web 窗体模型，因此页面的操作始终是当前页面。

如果你想自定义这个，唯一真正的方法是在特定页面上通过 JavaScript 修改表单操作，但请注意，在单击按钮或类似触发器之前这样做会破坏页面上需要回发到服务器。

你想达到什么目的？

# sql - 如何按通用字段分组？

> ID：10432694
> 
> 赞同：1
> 
> 时间：2012-05-03T13:44:09.140
> 
> 标签：sql, sql-server, sql-server-2008

如果我有一个带有状态字段的表，并且我想知道每个状态有多少条记录，我可以做一个简单的分组。如果我想知道 2 条记录的计数和所有其他记录的计数如何。

换句话说，我想要这个：

```
Status   Count
-------- -----
Success   X
Running   Y
Failure   Z 
```

但是*失败*是***失败*****在桌子上，它包含实际的错误消息，所以我想要与成功**和**运行**不同的一切**`not`**

 ******* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-03T13:49:41.120

```
select case when Status <> 'Success' 
             and Status <> 'Running' 
            then 'Failure' 
            else Status 
        end Status, 
       count (*) [Count]
from atable
group by case when Status <> 'Success' 
               and Status <> 'Running' 
              then 'Failure' 
              else Status 
          end 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-03T14:07:44.653

[**单击此处查看 SQL Fiddle 中的演示。**](http://sqlfiddle.com/#!6/4dd47/2)

*脚本*：

```
CREATE TABLE errormsgs 
(
    id          INT         NOT NULL IDENTITY
  , statusmsg   VARCHAR(30) NOT NULL
);

INSERT INTO errormsgs (statusmsg) VALUES
  ('Success'),
  ('This is error message 1.'),
  ('Running'),
  ('This is error message 2.'),
  ('This is error message 3.'),
  ('Success'),
  ('Success'),
  ('This is error message 4.'),
  ('Running'),
  ('failure, may be'),
  ('failure, absolutely.');

;WITH statuses AS
(
    SELECT  CASE
                WHEN statusmsg NOT IN ('Success', 'Running') THEN 'Failure' 
                ELSE statusmsg 
            END status
    FROM    errormsgs
)
SELECT      status
        ,   COUNT(status) AS status_count
FROM        statuses 
GROUP BY    status; 
```

*输出*：

```
STATUS   STATUS_COUNT
-------- ------------
Failure        6
Running        2
Success        3 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-03T13:48:46.120

```
SELECT DISTINCT CASE 
                     WHEN [status]='s' OR [STATUS]='r' THEN [status]
                     ELSE 'OTHER'
                END AS STATUS
      ,COUNT(1) OVER(
           PARTITION BY CASE 
                             WHEN [status]='s'
           OR [STATUS]='r' THEN [status] ELSE 'aaa' END
       ) AS 'count'
FROM   tbl2 
```

![在此处输入图像描述](../Images/b2740bc7c671da207a4a7bab2879b5d8.png)******

# c++ - QT。QLabel 性能

> ID：10432697
> 
> 赞同：0
> 
> 时间：2012-05-03T13:44:12.070
> 
> 标签：c++, performance, qt, widget

在我的应用程序中，我有一个类似于标准 Windows 资源管理器的文件管理器。

结构是：

*   QScrollArea
*   *   QWidget
*   *   *   电子档案
*   *   *   电子档案
*   *   *   电子档案

ETC...

每个 EFile 小部件包含 5 个 QLabel。因此，当文件数超过 30 时，我在创建它们时会有一点延迟。我决定只创建可见文件并在滚动时创建隐藏文件或在它们变得可见时调整大小。但这不是一个解决方案 - 延迟仍然存在（尽管它当然减少了）。

问题是我应该如何修改我的应用程序以消除显示文件时的延迟。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T14:00:21.243

答案是您不编写自定义的 QLabels 小部件。相反，您覆盖paint() 函数并使用QPainter 绘制文本/像素图。这并不像听起来那么工作。Qt 示例/教程中有大量示例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T14:04:07.017

如果它确实是您要实现的文件资源管理器，则应考虑将 a`QFileSystemModel`与 a 结合使用，如下面`QTreeView`的示例所示：http:
[//qt-project.org/doc/qt-4.8/qfilesystemmodel.html](http://qt-project.org/doc/qt-4.8/qfilesystemmodel.html)

这将为您省去很多麻烦。

# c# - linq 中的子查询而不是递归

> ID：10432699
> 
> 赞同：1
> 
> 时间：2012-05-03T13:44:13.967
> 
> 标签：c#, linq, entity-framework, linq-to-entities

我有一个嵌套结构。

类页面有 ChildPages

```
class Page
{
 IQueryable<Page> ChildPages;
 string type; //catalog or product
} 
```

我需要获取所有子类别**(type=="catalog")中所有产品****(type=="product")**的样本请求。

 **循环和递归很容易做到。但这需要大量的时间和资源

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T14:55:17.313

我认为 EF 不支持这一点，但您可以使用递归 CTE 查询在一次数据库调用中检索整个树。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T15:37:59.637

我知道做递归 Linq 的唯一方法是使用 Fixpoint 运算符（见下文）

但我怀疑 EF 能否将其转换为 CTE 查询（请参阅@erikkallen 答案），这是我知道在一个语句中进行递归查询的唯一方法。

```
class Page
{
    IQueryable<Page> ChildPages;
    string type; //catalog or product

    // the query
    static IQueryable<Page> GetProductsWithCatalogAncestor(IQueryable<Page> pages)
    {
        return FixPoint<bool, IQueryable<Page>, IQueryable<Page>>
            (processChildPages => (hasCatalogAncestor, thePages) 
                => thePages.SelectMany(p => (hasCatalogAncestor && p.type == "product" ) 
                    ? new[] { p }.AsQueryable()
                    : processChildPages(hasCatalogAncestor || p.type == "catalog", p.ChildPages)))
                    (false, pages);
    }

    // Generic FixPoint operator
    static Func<T1, T2, TResult> FixPoint<T1, T2, TResult>(Func<Func<T1, T2, TResult>, Func<T1, T2, TResult>> f)
    {
        return (t1, t2) => f(FixPoint(f))(t1, t2);
    }
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-05-04T09:48:50.763

尝试使用`SelectMany()`扁平化层次结构。

```
var data = pages.SelectMany(p=>p.ChildPages)
                .Where(p=>p.type == "product" || p.type == "catalog"); 
```**

# javascript - Ajax 页面导航 '#' 符号

> ID：10432710
> 
> 赞同：0
> 
> 时间：2012-05-03T13:45:07.817
> 
> 标签：javascript, ajax, navigation

我关注谷歌的

```
 https://mail.google.com/mail/?shva=1#inbox 
```

特别是**#inbox**

这个网址可以收藏，怎么实现呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T13:48:45.273

因为它是由 Javascript 通过 Ajax 调用处理的，所以要考虑查询字符串中的内容。

在 Javascript 中定位所有 # 标记的示例是：

```
urlquery=location.href.split("#"); 
```

因此，当第一次加载包含此类链接的页面时，页面上的链接会生成包含 # 个锚点，单击这些锚点会更改位置地址，但不会导致页面重新加载，因为它是当前页面。然后 javascript 挂钩到 click 事件完成通过 Ajax 加载真实内容的真正工作。

但是，由于地址栏上的地址已更改，您可以将其存储在书签中。加载该书签时，它会使用 javascript 加载准系统 Web，以再次检测带有 # 的地址上的标签，然后通过 Ajax 加载真实内容。

这就是为什么，例如，Google Chrome 上 Twitter 页面的缩略图总是显示一个没有消息的界面，因为在生成该缩略图时，Ajax 仍然没有加载内容。

# sql - SSRS 2008 报告中除以零/空解决方法

> ID：10432714
> 
> 赞同：13
> 
> 时间：2012-05-03T13:45:10.193
> 
> 标签：sql, reporting-services, ssrs-2008

我有一个字段的报告，其值为表达式：

```
Fields!TotalPrice.Value/Fields!TotalSlots.Value 
```

虽然有时 TotalSlots 是空白的，因此我得到了除以零的运行时错误。所以我将表达式更改为：

```
=IIF(Fields!TotalSlots.Value > 0, Fields!TotalPrice.Value/Fields!TotalSlots.Value,"unknown") 
```

但我仍然得到除以零的错误。我如何解决这个零除数问题。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-05-04T01:28:49.420

Jamie F 的回答是正确的。作为提示，您可以在报表代码中添加一个函数，以使划分更容易在多个单元格中实现，例如

```
Public Function Divider (ByVal Dividend As Double, ByVal Divisor As Double)
If IsNothing(Divisor) Or Divisor = 0
  Return 0
Else
  Return Dividend/Divisor
End If
End Function 
```

然后，您可以像这样在单元格中调用它：

```
=Code.Divider(Fields!FieldA.Value, Fields!FieldB.Value) 
```

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2012-05-03T16:39:13.523

VB IIF[评估所有 arguments](https://stackoverflow.com/questions/1204179/does-the-iif-function-compute-both-paths-in-ssrs-or-is-it-short-circuited)，因此如果任何参数引发错误，它将引发错误：

你的公式可以写成：

```
=IIF(Fields!TotalSlots.Value > 0,
   Fields!TotalPrice.Value /
   IIF(Fields!TotalSlots.Value > 0,
       Fields!TotalSlots.Value,
       1 ),
   "unknown") 
```

那么即使 TotalSlots 为零，公式仍然不会遇到除法问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-03T15:13:28.787

我不认为你的错误是在计算上。首先，SSRS 会自动处理这种情况。请参阅我的第三个专栏。第四个显示你的表情：

![在此处输入图像描述](../Images/c5dec8acd941797b9a7df09847c21295.png)

您的问题可能在其他地方

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-30T14:20:13.527

这似乎只发生在除法是 IIF 的结果之一时，而不是如果您只是编写一个公式将一个除以另一个，例如

```
=IIF(thing=1,10/0,0) 
```

在评估事物之前，它已经尝试计算两个结果，导致错误。您不能以这种方式使用 IIF 来防止零，您必须将 IIF 放在除法的底线上，例如

```
=IIF(thing=1, 10/IIF(divisor=0,-99999999999,divisor),0) 
```

这并不令人满意，因为我们引入了一个奇怪的小非零数字作为结果，但如果你只想要一个非错误可能没问题。

从技术上讲，#error 是正确的答案。

# python - 如何打印只要用户输入的水平线

> ID：10432716
> 
> 赞同：1
> 
> 时间：2012-05-03T13:45:13.493
> 
> 标签：python, string

如果我想创建一条由用户决定的水平星号线，我该怎么做？例如，我想打印一行显示
01:...........(custom number)
02:........(custom number)
03:...... .（自定义编号）
等...
在这种情况下，我从文件中获取销售编号并打印一些星号，这些星号代表公司在任何一天的数百个收入。以防万一发生任何变化。

抱歉，编辑：这是在 python 中

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-03T14:15:56.613

利用：

```
print '*' * n 
```

`n`您希望显示的星号数量在哪里。

这是一个更完整的示例：

```
lens = [3, 5, 10, 1]
for i, l in enumerate(lens):
  print '%02d:%s' % (i + 1, '*' * l) 
```

这显示：

```
01:***
02:*****
03:**********
04:* 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2020-03-31T06:59:06.710

以下答案仅适用于您想在 Jupyter Lab / Jupyter Notebook 中绘制水平线：

```
from IPython.display import Markdown, display
display(Markdown('---')) 
```

好像： [![在此处输入图像描述](../Images/cfe93c92cd1a9df059b462f896470400.png)](https://i.stack.imgur.com/nNz5i.png)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-03T14:16:40.917

您是否尝试将其乘以输入的长度？如果是这样，您可以执行以下操作：

```
x=raw_input("number/message: ")
y="*"*len(x)
print y 
```

但是，如果您希望将 x 数量的“*”转换为一个数字，您可以执行以下操作：

```
x=int(raw_input("number: "))
y="*"*x
print y 
```

# android - Android：对 CONTENT_URI 的 sql 查询

> ID：10432717
> 
> 赞同：1
> 
> 时间：2012-05-03T13:45:17.877
> 
> 标签：android, sqlite, android-4.0-ice-cream-sandwich, android-contentresolver

你好每个机器人开发者！请你帮忙回答一个问题。我在尝试

```
Cursor cursor = getContentResolver().query(Contacts.CONTENT_URI,CONTACT_PROJECTION, n" _id = _id ) GROUP BY ("+ Calls.NUMBER, null, "cnt DESC"); 
```

它在 Android 2.3.3 中运行良好，但在 Android 4.03 中它崩溃了，因为 Android 4.03 不再支持 GROUP BY 查询。（[https://stackoverflow.com/questions/8837544/android-ics-sqlite-error](https://stackoverflow.com/questions/8837544/android-ics-sqlite-error)）

所以我决定用示例代码对 URI Contacts.CONTENT_URI 形成原始 sql 查询

```
ContentProviderClient client =  getContentResolver().acquireContentProviderClient(AUTHORITY);
SQLiteDatabase dbHandle= ((MyContentProvider)client.getLocalContentProvider()).getDbHandle();                    
Cursor cursor = dbHandle.rawQuery("SELECT _id, date, duration, number, type, name,   numbertype, COUNT(*) as cnt FROM calls WHERE ( 1=1 ) GROUP BY (number) ORDER BY cnt DESC", null); 
```

或与

```
SQLiteQueryBuilder qb = new SQLiteQueryBuilder();
qb.query(db, projectionIn, selection, selectionArgs, groupBy, having, sortOrder) 
```

具有 groupBy 参数的。

但我不明白如何在第二种情况下从 CONTENT_URI 或 CONTENT_URI 的数据库名称中获取 dbHandle。

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T13:51:33.303

不要在 Android 中进行 SQL 注入。因为谷歌会修复它的错误。

GroupBy 应该在 ContentProvider 中调用。不是 ContentResolver。

# c# - Datagrid 多重触发器引用来自代码隐藏的值

> ID：10432726
> 
> 赞同：0
> 
> 时间：2012-05-03T13:45:54.763
> 
> 标签：c#, wpf, datagrid, triggers, local-variables

我在 WPF 中仍然是血腥的绿色，还没有完全掌握它背后的概念。我有以下问题：

我想根据先决条件在数据网格中设置触发器。

例子：

在我的代码隐藏中，我有一个字符串变量，我们称之为`variableString`. 现在根据 的值`variableString`，我想启用/禁用数据网格中的触发器，我在 XAML 中定义了这些触发器，例如：

```
if(variableString == "a") 
```

然后

XAML

```
<DataGrid AutoGenerateColumns="False" Margin="5,5,0,75" Name="dataGrid1" ItemsSource="Binding}">
  <DataGrid.ItemContainerStyle>
        <Style TargetType="DataGridRow">
             <Style.Triggers>
                  <DataTrigger Binding="{Binding Path=SomeColumnName}" Value="someValue">
                  <Setter Property="Background" Value="White"/>
                  <DataTrigger Binding="{Binding Path=SomeColumName}" Value="someOtherValue">
                  <Setter Property="Background" Value="Red"/>
             </Style.Triggers>
        </Style>
   </DataGrid.ItemContainerStyle> 
```

否则，如果

```
if(variableString == "b") 
```

然后

```
Do Nothing` 
```

我已经尝试将字符串绑定到数据网格的数据上下文，但这会适得其反，因为它删除了我与数据库的绑定。

有人能帮我一下吗。一个例子，朝着正确的方向推动等等......

我真的很喜欢 WPF 为您提供的选项，但正是这些基本的东西，在 WinForms 中很容易处理，让我在 WPF 中发疯。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T14:02:07.133

我认为您想要一个[MultiDataTrigger](http://msdn.microsoft.com/en-us/library/system.windows.multidatatrigger.aspx)，它允许您将触发器基于多个值

```
 <MultiDataTrigger>
    <MultiDataTrigger.Conditions>
      <Condition Binding="{Binding Path=SomeColumnName}" Value="someValue" />
      <Condition Binding="{Binding RelativeSource={RelativeSource AncestorType={x:Type Window}}, Path=variableString}" Value="A" />
    </MultiDataTrigger.Conditions>
    <Setter Property="Background" Value="White" />
  </MultiDataTrigger> 
```

要在后面的代码中找到您的字符串，您可能必须使用某种`RelativeSource`绑定来查找包含该属性的类。我的示例假设类`variableString`上有一个公共属性`Window`

# c# - 验证控制 2 个日期之间的天数

> ID：10432727
> 
> 赞同：-1
> 
> 时间：2012-05-03T13:45:56.027
> 
> 标签：c#, asp.net, validation, datetime

我有两个文本框，txtStartDate，txtEndDate，允许用户选择格式（dd/mm/yyyy）的日期。我需要能够创建一个验证器来检查这两个用户选择的日期之间的天数是否为 45 天或更短。我可以使用 Range 或 Compare 等验证器控件之一，还是必须创建自定义验证器？任何示例都会非常有帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T14:13:46.643

您可以使用[`CustomValidator`](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.customvalidator.aspx)：

```
<asp:CustomValidator id="StartEndDiffValidator"
       ValidateEmptyText="true"
       ClientValidationFunction="StartEndValidate"
       OnServerValidate="StartEndValidate"
       Display="Dynamic"
       ErrorMessage="Timespan between start and end must be exactly 45 days"
       runat="server"/> 
```

[这个答案](https://stackoverflow.com/a/141159/284240)将引导你到`ClientValidationFunction`.

始终实现服务器端验证：

```
void StartEndValidate(object source, ServerValidateEventArgs args)
{
    DateTime startDate;
    DateTime endDate;
    bool isStartDate = DateTime.TryParse(txtStartDate.Text, out startDate);
    bool isEndDate   = DateTime.TryParse(txtEndDate.Text, out endDate);
    if(isStartDate && isEndDate)
    {
        int days = (endDate - startDate ).Days;
        args.IsValid = days == 45;
    }
    else
    {
        args.IsValid = false;
    }
} 
```

您还可以使用 [`CompareValidators`](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.comparevalidator.aspx)with `Operator`property set to`ValidationCompareOperator.DataTypeCheck`和[Type](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.basecomparevalidator.type.aspx) =Date 来确保在两者中都输入了日期。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T13:55:20.197

试试这个块：

```
Dim st As String = txtClientSerStartTime.Text
Dim et As String = txtClientSerEndTime.Text
Dim time1 As DateTime
DateTime.TryParse(st, time1)
Dim ts1 As New TimeSpan(time1.Hour, time1.Minute, time1.Second)

Dim time As DateTime
DateTime.TryParse(et, time)
Dim ts As New TimeSpan(time.Hour, time.Minute, time.Second)

Dim dur As TimeSpan = ts - ts1
Dim unit As Decimal = dur.Hours 

If unti = 45 Then
    'do something'
Else
    'do something'
End If 
```

# java - JPA/Hibernate 查询构造

> ID：10432730
> 
> 赞同：1
> 
> 时间：2012-05-03T13:46:04.187
> 
> 标签：java, hibernate, jpql

我正在从我的“记录”表中获取记录。“记录”表有很多列，其中

1.  client_id，外键映射到客户端表。
2.  creation_date , 记录创建日期

我想对此表进行查询，但我想为每个客户端仅获取一条记录（最新创建日期记录具有偏好）。

跟随工作吗？

```
select r.id,r.xx,r.yy
group by(r.client_id),r.creation_date 
from record r 
order by creation_date desc 
```

我在上面尝试过，似乎获取的记录不是最新的创建日期。希望我的问题很清楚

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T14:02:30.787

只需保留您的查询并添加`WHERE`条件：

```
SELECT r.id,r.xx,r.yy
GROUP BY(r.client_id)
FROM record r
WHERE r.creation_date = (SELECT MAX(creation_date) FROM record tmp WHERE tmp.client_id = r.client_id ) 
```

看看[这个讨论](https://stackoverflow.com/questions/121387/fetch-the-row-which-has-the-max-value-for-a-column)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T13:55:29.157

这应该为您提供一个很好的 HQL 起点。

```
from Record as r inner join fetch r.client
where r.creation_date > (
    select max(rec.creation_date) from Record rec
    where rec.client.client_id = r.client.client_id
) 
```

这当然假设您的 Record 有一个对其父 Client 的引用，称为`client`.

# sql - Derby SQL 使用标量子查询以及 Order BY 和 FETCH NEXT 将结果限制为一个

> ID：10432734
> 
> 赞同：1
> 
> 时间：2012-05-03T13:46:16.910
> 
> 标签：sql, derby

这是我正在尝试的简化 SQL 语句：

```
SELECT * FROM cows WHERE lastMilkedDate = 
(SELECT milkDate from Lactaction order by 
milkDate desc FETCH NEXT ROW ONLY) 
```

这将导致此错误：

```
Error code -1, SQL state 42X01: Syntax error: 
Encountered "FETCH" at line 1, column 148. 
```

我也尝试过 FETCH NEXT 1 ROWS，结果相同。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T14:43:42.403

这是我能够解决我的问题的方法。我使用列函数和 where 子句来强制执行一个值。它开启了一个使我的视图参数化的新问题，但我必须解决这个问题……</p>

```
SELECT * FROM cows WHERE lastMilkedDate = 
(SELECT MAX(milkDate) from Lactaction WHERE cowID=55) 
```

当然，这使它成为对 1 只动物的非常具体的查询。我想我可以修改其他代码来传递cowID。

# xcode - 更改滑块时如何更新子类 UIView 以进行绘图？

> ID：10432736
> 
> 赞同：0
> 
> 时间：2012-05-03T13:46:27.393
> 
> 标签：xcode, uiview, drawing, uislider

前段时间我在 iTunes U 的一部电影中看到了这一点（我认为是斯坦福）。不幸的是，我找不到确切的视频......所以如果你知道请告诉我。

我想创建一个视图，用户可以在其中使用滑块来更改笑脸。

所以我目前的计划是继承 UIView，然后使用 drawInRect 进行绘图。但是如何将滑块值连接到我的绘图以及如何“平滑”更新它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T13:53:02.493

在滑块的值更改处理程序中，要求视图重绘自身。视图应首先清除其上下文，然后根据您将传递给它的输入（滑块的值）做它需要做的任何事情，然后再要求它使用`-setNeedsDisplay`et al 重绘自己。

# sql - 调用一些sql代码来重置局部变量的值

> ID：10432746
> 
> 赞同：-1
> 
> 时间：2012-05-03T13:47:18.407
> 
> 标签：sql, sql-server-2008, code-reuse, sql-function

我正在使用 Sql Server 2008。在我的 sql 文件中，我定义了 5 个局部变量（全部为 int）并将它们全部设置为 0。然后我执行一些操作（不在循环中）。每次操作后，我需要将局部变量的值重置为 0。现在，我在每次操作后手动将所有变量设置为 0。有没有更好的方法将它们每次都重置为 0，也许是通过调用某个函数而不是手动执行？

```
DECLARE @int1 int
DECLARE @int2 int
DECLARE @int3 int
DECLARE @int4 int
DECLARE @int5 int

SET @int1 = 0
SET @int2 = 0
SET @int3 = 0
SET @int4 = 0
SET @int4 = 0

-- Operation 1
SELECT * FROM Orders

-- Reset values (Number of times the reset code written: 1)

SET @int1 = 0
SET @int2 = 0
SET @int3 = 0
SET @int4 = 0
SET @int4 = 0
-------------------- END OF OPERATION 1 and RESETTING VARIABLES ---------------

-- Operation 2

SELECT * FROM Lines

-- Reset values (Number of times the reset code written: 2)

SET @int1 = 0
SET @int2 = 0
SET @int3 = 0
SET @int4 = 0
SET @int4 = 0
-------------------- END OF OPERATION 2 and RESETTING VARIABLES ---------------

-- Operation 3

SELECT * FROM Customers

-- Reset values (Number of times the reset code written: 3)

SET @int1 = 0
SET @int2 = 0
SET @int3 = 0
SET @int4 = 0
SET @int4 = 0
-------------------- END OF OPERATION 3 and RESETTING VARIABLES ---------------

-- Operation 4

SELECT * FROM Address

-- Reset values (Number of times the reset code written: 4)

SET @int1 = 0
SET @int2 = 0
SET @int3 = 0
SET @int4 = 0
SET @int4 = 0
-------------------- END OF OPERATION 4 and RESETTING VARIABLES ---------------

-- Operation 5

SELECT * FROM Accounts

-- Reset values (Number of times the reset code written: 5)

SET @int1 = 0
SET @int2 = 0
SET @int3 = 0
SET @int4 = 0
SET @int4 = 0
-------------------- END OF OPERATION 5 and RESETTING VARIABLES --------------- 
```

很明显，重置局部变量已被写入 5 次（由“写入重置代码的次数：#”标识）。有没有更好的方法来调用一个执行重置的函数，这样我只需要调用一个函数，例如 ResetVaraibles() 它将具有重置局部变量的代码。现在更清楚了吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T17:10:06.730

您可以使用带有 5 个输出参数的存储过程。

```
create procedure ResetTo0
  @int1 int out,
  @int2 int out,
  @int3 int out,
  @int4 int out,
  @int5 int out
as

set @int1 = 0
set @int2 = 0
set @int3 = 0
set @int4 = 0
set @int5 = 0 
```

它会被这样称呼。

```
exec ResetTo0 @int1 out, @int2 out, @int3 out, @int4 out, @int5 out 
```

但与使用 select 重置值相比，我认为您不会获得太多（如果有的话）。

```
select @int1 = 0, @int2 = 0, @int3 = 0, @int4 = 0, @int5 = 0 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-05-02T06:47:59.020

方式 1：断开连接并连接到 SQL Server。

方式2：Ctrl-A Ctrl-C Ctrl-N Ctrl-V 复制代码到新窗口。

# c - 以下 C 程序的输出

> ID：10432747
> 
> 赞同：3
> 
> 时间：2012-05-03T13:47:18.190
> 
> 标签：c

这个 C 程序的输出应该是什么？

```
#include<stdio.h>
int main(){
  int x,y,z;
  x=y=z=1;
  z = ++x || ++y && ++z;
  printf("x=%d y=%d z=%d\n",x,y,z);
  return 0;
} 
```

给定的输出是： x=2 y=1 z=1
我理解 x 的输出，但看不到 y 和 z 值如何不增加。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-03T13:48:51.310

这是[短路评估](http://en.wikipedia.org/wiki/Short-circuit_evaluation)的结果。

该表达式的`++x`计算结果为`2`，并且编译器知道无论是什么，它`2 || anything`总是计算为("true") 。因此，它不会进行评估，并且值不会改变。`1``anything``anything``y``z`

如果你尝试

```
x=-1;
y=z=1; 
```

*您将*看到这一点`y`并将其递增，因为编译器必须评估 OR 的右侧以确定表达式的结果。`z`

 ***编辑：** asaerl 首先在评论中回答了您的后续问题，所以我将稍微扩展他的正确答案。

运算符优先级决定了组成表达式的部分如何绑定在一起。因为 AND 的优先级高于 OR，编译器知道你写了

```
++x || (++y && ++z) 
```

代替

```
(++x || ++y) && ++z 
```

这使它的任务是在 和 之间进行`++x`OR `++y && ++z`。此时，通常可以自由选择是否“更喜欢”首先评估一个或另一个表达式——根据标准——并且您通常不能依赖特定的顺序。此顺序与运算符优先级无关。

然而，特别`||`是`&&`标准要求评估*总是*从左到右进行，以便短路可以工作，如果评估 lhs 的结果表明，开发人员可以*依赖*不评估的 rhs 表达式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-09-11T13:49:41.163

在 C 中，除 0 以外的任何事物都被视为真，而对 || 的评估 从左到右开始。

因此编译器将检查第一个左操作数，如果为真，则编译器不会检查其他操作数。前任。一个 || B - 在这种情况下，如果 A 为真，那么编译器将只返回真，并且不会检查 B 是真还是假。但是如果 A 为假，那么它将检查 B 并相应地返回，这意味着如果 B 为真，则返回真，如果 B 为假，则返回假。

在您的程序中，编译器首先将检查 ++x(ie 2) 并且在 C 中除 0 以外的任何内容都为真。因此它不会检查/增加其他表达式。*

# javascript - jQuery：在 $.each 中从字符串类型转换为字符串对象

> ID：10432748
> 
> 赞同：3
> 
> 时间：2012-05-03T13:47:19.810
> 
> 标签：javascript, jquery

```
$.each(["foo","bar"],function(){console.debug(this);}); 
```

将字符串类型的“foo”和“bar”转换为它们在字符串对象中的等价物。

然而...

```
$.each(["foo","bar"],function(i,e){console.debug(e);}); 
```

将 "foo" 和 "bar" 保留其原始字符串类型。

我想知道为什么 $.each 进行转换？而且，更重要的是......这种转换永远不会发生 - 让字符串保持原样，无论它们是字符串类型还是字符串对象？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T14:24:01.117

根据[jQuery 文档](http://api.jquery.com/jQuery.each/)：

> （该值也可以通过 this 关键字访问，但 Javascript 将始终将 this 值包装为一个对象，即使它是一个简单的字符串或数字值。）

这表明进行转换的是 Javascript，而不是 jQuery。

在使用回调函数中的值的情况下，jQuery 自己传递该值，因此它可以保留其类型。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-03T15:31:39.667

jQuery 在这里不应该受到责备：它是 JavaScript 的一个怪癖。正如 ECMAScript 第三版第 10.4.3 节中所定义的，当你调用一个函数时，`this`伪参数被操纵：特别是，一个空值被转换为全局对象（`window`），并且原始值被自动装箱：

> 3) 否则，如果 Type(thisArg) 不是 Object，则将 ThisBinding 设置为 ToObject(thisArg)。

参数不会以同样的方式被破坏，这就是为什么 each() 的第二个参数更可靠的原因。

JavaScript 这样做并没有特别的理由，这只是 Netscape 在当时所做的疯狂事情之一，然后必须在 ECMAScript 中进行标准化。在第五版的严格模式中，这种奇怪的行为消失了。

# c# - 当我尝试创建 UserProfileManager 的实例时发生异常

> ID：10432750
> 
> 赞同：0
> 
> 时间：2012-05-03T13:47:26.213
> 
> 标签：c#, sharepoint, exception

我正在使用 UserProfileManager 在 sharepoint 中获取用户配置文件。我在 MOSS 机器上编译了代码，然后尝试在 SP2010 机器上运行它，但是它抛出了一个异常，它找不到 'Microsoft.Office.Server' version=12.0.0.0 但现在我的问题是它为什么要寻找 MOSS 程序集在 SP2010 机器上

它抛出的错误是

```
 System.IO.FileNotFoundException: Could not load file or assembly
'Microsoft.Office.Server, Version=12.0.0.0, Culture=neutral,
publicKeyToken=71e9bce111e9429c' or one of its dependencies. The system cannot find the
file specified.File name: 'Microsoft.Office.Server, Version=12.0.0.0, Culture=neutral,
publicKeyToken=71e9bce111e9429c' 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T06:56:47.593

您应该为 SharePoint Server（而不是 Foundation！）2010 程序集重新创建代码。为此，您应该在同一台机器上安装 SPS2010 和 VS2010。

# rcp - 在 Eclipse RCP 应用程序中使用 classmexer？

> ID：10432753
> 
> 赞同：2
> 
> 时间：2012-05-03T13:47:32.757
> 
> 标签：rcp, javaagents

我尝试在 Eclipse RCP 应用程序中使用 classmexer，但只收到 IllegalStateException：

```
java.lang.IllegalStateException: Agent not initted
at com.javamex.classmexer.Agent.getInstrumentation(Agent.java:33)
at com.javamex.classmexer.MemoryUtil.deepMemoryUsageOf(MemoryUtil.java:104)
at com.javamex.classmexer.MemoryUtil.deepMemoryUsageOf(MemoryUtil.java:80)
at classmexertester.ViewPart.createPartControl(ViewPart.java:22)
at org.eclipse.ui.internal.ViewReference.createPartHelper(ViewReference.java:375)
at org.eclipse.ui.internal.ViewReference.createPart(ViewReference.java:229)
at org.eclipse.ui.internal.WorkbenchPartReference.getPart(WorkbenchPartReference.java:595)
at org.eclipse.ui.internal.PartPane.setVisible(PartPane.java:313)
at org.eclipse.ui.internal.ViewPane.setVisible(ViewPane.java:534)
at org.eclipse.ui.internal.presentations.PresentablePart.setVisible(PresentablePart.java:180)
at org.eclipse.ui.internal.presentations.util.PresentablePartFolder.select(PresentablePartFolder.java:270)
at org.eclipse.ui.internal.presentations.util.LeftToRightTabOrder.select(LeftToRightTabOrder.java:65)
at org.eclipse.ui.internal.presentations.util.TabbedStackPresentation.selectPart(TabbedStackPresentation.java:473)
at org.eclipse.ui.internal.PartStack.refreshPresentationSelection(PartStack.java:1245)
at org.eclipse.ui.internal.PartStack.setSelection(PartStack.java:1198)
at org.eclipse.ui.internal.PartStack.showPart(PartStack.java:1597)
at org.eclipse.ui.internal.PartStack.createControl(PartStack.java:643)
at org.eclipse.ui.internal.PartStack.createControl(PartStack.java:570)
at org.eclipse.ui.internal.PartSashContainer.createControl(PartSashContainer.java:568)
at org.eclipse.ui.internal.PerspectiveHelper.activate(PerspectiveHelper.java:272)
at org.eclipse.ui.internal.Perspective.onActivate(Perspective.java:981)
at org.eclipse.ui.internal.WorkbenchPage.onActivate(WorkbenchPage.java:2714)
at org.eclipse.ui.internal.WorkbenchWindow$28.run(WorkbenchWindow.java:3030)
at org.eclipse.swt.custom.BusyIndicator.showWhile(BusyIndicator.java:70)
at org.eclipse.ui.internal.WorkbenchWindow.setActivePage(WorkbenchWindow.java:3011)
at org.eclipse.ui.internal.WorkbenchWindow.busyOpenPage(WorkbenchWindow.java:799)
at org.eclipse.ui.internal.Workbench$23.runWithException(Workbench.java:1229)
at org.eclipse.ui.internal.StartupThreading$StartupRunnable.run(StartupThreading.java:31)
at org.eclipse.swt.widgets.RunnableLock.run(RunnableLock.java:35)
at org.eclipse.swt.widgets.Synchronizer.runAsyncMessages(Synchronizer.java:135)
at org.eclipse.swt.widgets.Display.runAsyncMessages(Display.java:4140)
at org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:3757)
at org.eclipse.ui.application.WorkbenchAdvisor.openWindows(WorkbenchAdvisor.java:803)
at org.eclipse.ui.internal.Workbench$33.runWithException(Workbench.java:1600)
at org.eclipse.ui.internal.StartupThreading$StartupRunnable.run(StartupThreading.java:31)
at org.eclipse.swt.widgets.Synchronizer.syncExec(Synchronizer.java:180)
at org.eclipse.ui.internal.UISynchronizer.syncExec(UISynchronizer.java:150)
at org.eclipse.swt.widgets.Display.syncExec(Display.java:4683)
at org.eclipse.ui.internal.StartupThreading.runWithoutExceptions(StartupThreading.java:94)
at org.eclipse.ui.internal.Workbench.init(Workbench.java:1595)
at org.eclipse.ui.internal.Workbench.runUI(Workbench.java:2628)
at org.eclipse.ui.internal.Workbench.access$4(Workbench.java:2499)
at org.eclipse.ui.internal.Workbench$7.run(Workbench.java:679)
at org.eclipse.core.databinding.observable.Realm.runWithDefault(Realm.java:332)
at org.eclipse.ui.internal.Workbench.createAndRunWorkbench(Workbench.java:668)
at org.eclipse.ui.PlatformUI.createAndRunWorkbench(PlatformUI.java:149)
at classmexertester.Application.start(Application.java:20)
at org.eclipse.equinox.internal.app.EclipseAppHandle.run(EclipseAppHandle.java:196)
at org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.runApplication(EclipseAppLauncher.java:110)
at org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.start(EclipseAppLauncher.java:79)
at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:344)
at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:179)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
at java.lang.reflect.Method.invoke(Method.java:597)
at org.eclipse.equinox.launcher.Main.invokeFramework(Main.java:622)
at org.eclipse.equinox.launcher.Main.basicRun(Main.java:577)
at org.eclipse.equinox.launcher.Main.run(Main.java:1410)
at org.eclipse.equinox.launcher.Main.main(Main.java:1386) 
```

在我输入的运行时配置中：

-javaagent:C:/Users/kd/workspace/ClassmexerTester/classmexer.jar

是不是我必须在 plugin.xml 中添加一些东西？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-03T16:01:09.860

> 在我输入的运行时配置中：
> 
> -javaagent:C:/Users/kd/workspace/ClassmexerTester/classmexer.jar

这听起来不对。您需要`-javaagent:C:/Users/kd/workspace/ClassmexerTester/classmexer.jar`作为 JVM 参数传递。您可以在产品配置的 Launching 选项卡上的 JM Arguments 窗格中指定这些。

您还需要 plugin.xml 的 Runtime 选项卡的类路径窗格中包含的 jar 列表中的 classmexer.jar。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-04T13:20:53.090

我看了这个多一点，并最终处于同样的情况。我不认为有一个简单的解决方案，因为问题源于 OSGi 框架使用单独的类加载器来加载包。请参阅[如何在 Eclipse RCP 应用程序中使用 java.lang.instrument？](https://stackoverflow.com/questions/2063829/how-can-i-use-java-lang-instrument-in-an-eclipse-rcp-application)

问题是由 -javaagent VM arg 初始化的 classmexer 代理的实例与我们在插件中获得的实例不同，因为使用了不同的类加载器。我能看到解决这个问题的唯一方法是修改代理类，或者使用上面示例中给出的基于 System.properties 的对象共享机制，或者通过实现[VM 启动后启动代理](http://docs.oracle.com/javase/6/docs/api/java/lang/instrument/package-summary.html)机制并以编程方式附加代理在你的插件中。这两种方法都需要更改 classmexer Agent 类，因此由于源似乎不公开，因此不能立即可行。

但是，您可以使用[Eclipse 测试和性能工具平台中提供的优秀应用程序分析工具](http://www.eclipse.org/articles/Article-TPTP-Profiling-Tool/tptpProfilingArticle.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-10-14T07:05:24.497

以下步骤为我完成了这项工作。在 Eclipse Java IDE 中，转到 Run Configuration->Arguments 选项卡并在 VM arguments 下输入“-javaagent:classmexer.jar”并应用更改。确保 classmexer.jar 也包含在 Eclipse Build 路径中。

# events - Backbone.js DOM 事件完整列表

> ID：10432754
> 
> 赞同：13
> 
> 时间：2012-05-03T13:47:37.347
> 
> 标签：events, dom, backbone.js

任何人都知道我在哪里可以找到 Backbone.js 中内置 DOM 事件的完整列表？我设法猜到了一些花哨的东西，比如“mouseout”，但只是一个完整的列表会很有帮助。在官方文档或谷歌中不可用。

谢谢！

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-05-03T13:54:55.000

Backbone 的视图 DOM 事件（我假设您正在谈论）来自 jQuery 或 ZeptoJS（无论您使用哪个）。来自这些库中的任何一个的任何有效事件都是 Backbone 视图中的有效事件。

[http://api.jquery.com/category/events/](http://api.jquery.com/category/events/)

[http://zeptojs.com/](http://zeptojs.com/)

# java - Riak ReferenceError - 使用自定义 javascript

> ID：10432761
> 
> 赞同：3
> 
> 时间：2012-05-03T13:48:01.737
> 
> 标签：java, javascript, client, riak

我正在玩 riak 和 riak-java-client。

现在我遇到了自定义 javascript 的问题，我想在 map reduce 查询中使用。

如果我使用纯 javascript 函数作为匿名函数，它们运行良好。

所以这就是我所做的：

在 app.conf 中未注释

```
{js_source_dir, "/tmp/js_source"}, 
```

然后我将 mylib.js 存储在 /tmp/js_source

```
/* content of mylib.js */
var NS = (function() {
    return {
        mapHighValues: function(value, keydata, arg) {
            var data = JSON.parse(value.values[0].data);
            ejsLog('/tmp/map_reduce.log', JSON.stringify(data.High));
             return [data.High];}
        },
        reduceSumHighValues: function(values) {
            ejsLog('/tmp/map_reduce.log', "ReduceVals\n" + JSON.stringify(values));
            return [values.reduce(function(prev, curr, index, array) {return prev + curr} ,0)];
        }
    }
})(); 
```

之后我重新启动了riak。

这是相关的java代码：

```
MapReduceBuilder builder = new MapReduceBuilder(new RiakClient("localhost"))
    .setBucket("goog")
    .map(JavascriptFunction.named("NS.mapHighValues"), false)
    .reduce(JavascriptFunction.named("NS.reduceSumHighValues"), true);
MapReduceResponseSource response = builder.submit(); 
```

有人看到我的错误吗？

干杯

猿衣架

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T01:06:13.427

'return [data.High];' 之后看起来像一个额外的 '}'

# java - 使用 GLSurfaceView 显示软件键盘（并从中获取输入）

> ID：10432763
> 
> 赞同：3
> 
> 时间：2012-05-03T13:48:08.977
> 
> 标签：java, android, opengl-es, opengl-es-2.0

我想为我的 OpenGL ES 2.0 应用程序获取用户输入，但有两个问题：

*   1) 如何将软件键盘带到我的应用程序的前面？
*   2）我怎样才能捕捉到它的输入？

我试着用这个：

```
//OpenGL ES 2.0 view class
public class OGLES2View extends GLSurfaceView 
{
    private static final int OGLES_VERSION = 2;
    private static Handler softKeyboardHandler;
    private final static int SHOW_IME_KEYBOARD = 0;
    private final static int HIDE_IME_KEYBOARD = 1;
    private static EditText textEdit;
    private static  InputMethodManager imm;

    private void setSoftKeyboardHandler()
    {
        softKeyboardHandler = new Handler()
        {
            public void handleMessage(Message msg)
            {
                switch(msg.what)
                {
                    case SHOW_IME_KEYBOARD:
                        textEdit.requestFocus();
                        imm.showSoftInput(textEdit,inputMethodManager.SHOW_IMPLICIT);//Nothing happens
                        Log.i("GLVIEW","SHOW KEYBOARD");
                        break;

                    case HIDE_IME_KEYBOARD:
                        imm.hideSoftInput(textEdit, 0);
                        Log.i("GLVIEW","HIDE KEYBOARD");
                        break;

                    default:
                        break;
                }
            }
        };
    }

    public OGLES2View(Context context) 
    {
        super(context);
        textEdit = new EditText(context);
        setEGLContextClientVersion(OGLES_VERSION);
        setRenderer(new OGLES2Renderer());
        imm = (InputMethodManager)context.getSystemService(Context.INPUT_METHOD_SERVICE);
        setSoftKeyboardHandler();
    }

    public static void showIMEKeyboard() 
    {
        softKeyboardHandler.sendEmptyMessage(SHOW_IME_KEYBOARD);
    }

    public static void hideIMEKeyboard()
    {
        softKeyboardHandler.sendEmptyMessage(HIDE_IME_KEYBOARD);
    }

    //In main activity class
    private GLSurfaceView ogles2SurfaceView = null;

    @Override
    public void onCreate(Bundle savedInstanceState)
    {
        super.onCreate(savedInstanceState);
        //...
        ogles2SurfaceView = new OGLES2View(this);
        setContentView(ogles2SurfaceView);
    } 
```

处理程序收到消息，但我没有软件键盘。为了捕捉文本，我写了一些类：

```
public class TextInputWatcher implements TextWatcher 
```

和：

```
textEdit.addTextChangedListener(/*TextInputWatcher instance*/); 
```

或扩展 a`TextEdit`以便它在背面捕获输入的文本或输入键。

**PS**我有一个平板电脑 - 变压器，所以连接了一个硬件键盘。我尝试了它和没有它，但没有区别。所以额外的问题 - 如果有一个硬件键盘，它会阻止软件键盘弹出，那么如何从中获取输入？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-03T13:56:24.180

显示键盘：

```
getWindow().setSoftInputMode(WindowManager.LayoutParams.SOFT_INPUT_STATE_ALWAYS_VISIBLE); 
```

隐藏键盘：

```
getWindow().setSoftInputMode(WindowManager.LayoutParams.SOFT_INPUT_STATE_ALWAYS_HIDDEN); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-03T14:04:03.223

我做了2D游戏。我想你以前和我有同样的问题。试试这个：

```
class DrawingPanel extends SurfaceView implements SurfaceHolder.Callback {

private static DrawThread _thread;    

public DrawingPanel(Context context, AttributeSet attrs) {
    super(context, attrs);
    getHolder().addCallback(this);       
   _thread = new DrawThread(getHolder(), this);
}
.... 
```

布局“游戏视图”：

```
<FrameLayout
xmlns:android="http://schemas.android.com/apk/res/android"
 android:layout_width="fill_parent" 
android:layout_height="fill_parent">
<!-- YOUR SURFACE -->
<com.yourcompany.DrawingPanel android:id="@+id/surfaceView" android:layout_width="fill_parent" 
android:layout_height="fill_parent"></com.yourcompany.DrawingPanel>

<!-- YOUR BUTTONS -->
<RelativeLayout android:id="@+id/controlPanel" android:layout_width="fill_parent" android:orientation="horizontal"
android:layout_height="fill_parent" >   
<RelativeLayout android:layout_width="50px" android:orientation="vertical"
    android:layout_height="fill_parent"  android:gravity="center_vertical" android:layout_alignParentLeft="true">
         <Button android:id="@+id/leftButton" android:layout_width="wrap_content" 

        android:layout_height="50px" android:background="@xml/button_left_state"/> 
        <Button android:id="@+id/upgradeButton" android:layout_width="wrap_content" 
        android:layout_below="@id/leftButton"
        android:layout_height="50px" android:background="@xml/button_upgrade_state"/> 
</RelativeLayout>
</RelativeLayout>           
 </FrameLayout> 
```

然后你应该在游戏活动中设置内容，如下所示：

```
 @Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);     
    setContentView(R.layout.gameview);
   ... 
```

希望它可以帮助你。

# .htaccess - Cake php 子文件夹安装，来自 htaccess 或文件权限的临时文件夹错误？

> ID：10432767
> 
> 赞同：1
> 
> 时间：2012-05-03T13:48:24.053
> 
> 标签：.htaccess, cakephp, cakephp-2.0, file-permissions, subdirectory

我的客户要求我为他们制作的蛋糕 php 应用程序进入他们现有服务器上的子目录。一切都在我的测试远程和本地安装上完美运行。

最初，我遇到了 htaccess 问题，必须将 RewriteBase /quotesystem/ 添加到我的 htaccess 文件中才能看到该站点。所以我改变了我的htaccess如下：

蛋糕根.htaccess：

```
<IfModule mod_rewrite.c>
   RewriteEngine on
   RewriteBase /quotesystem/
   RewriteRule    ^$ app/webroot/    [L]
   RewriteRule    (.*) app/webroot/$1 [L]
</IfModule> 
```

应用程序.htaccess：

```
<IfModule mod_rewrite.c>
    RewriteEngine on
RewriteBase /quotesystem/app/
    RewriteRule    ^$    webroot/    [L]
    RewriteRule    (.*) webroot/$1    [L]
</IfModule> 
```

和 webroot .htaccess：

```
<IfModule mod_rewrite.c>
    RewriteEngine On
RewriteBase /quotesystem/app/webroot/
    RewriteCond %{REQUEST_FILENAME} !-d
    RewriteCond %{REQUEST_FILENAME} !-f
    RewriteRule ^(.*)$ index.php?/$1 [QSA,L]
</IfModule> 
```

现在我可以访问我的网站，但我收到了大量关于临时目录的警告：

警告 (2): SplFileInfo::openFile(/web/sites/_p/_e/_t/petersen-stainless.co.uk/public/www/quotesystem/app/tmp/cache/persistent/cake_core_cake_en-gb) [功能。 SplFileInfo-openFile]：无法打开流：没有这样的文件或目录 [CORE/Cake/Cache/Engine/FileEngine.php，第 295 行]

你可以在这里看到它：[http ://www.petersen-stainless.co.uk/quotesystem](http://www.petersen-stainless.co.uk/quotesystem)

现在，我已经将临时目录 CHMOD 到 777，所以每个人都应该有权限，但我仍然得到这些错误。

我已经删除了这些文件夹中的所有文件，以便清理临时目录。

当我使用我的 ftp 客户端 - 传输 - 查看所有者显示为 (?) 的文件权限时，如果我尝试更改它，我会收到错误消息：无法更改“tmp”的所有者。服务器说：'SITE CHOWN' 不理解

我没有在我工作的任何其他网站上得到这个。

我不太了解发生了什么，这是权限问题还是 .htaccess 问题或两者兼而有之？还是服务器配置问题？

如果有人可以帮助阐明这一点并帮助我理解，我将不胜感激。

**更新：** 我在服务器上的目录结构如下：

- 上市

--- 万维网

----- 报价系统

-------- 库

- - - - 应用程序

--------- 配置

--------- 网络根

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-04-25T21:22:16.520

根据我的经验，当 Cake 尝试读/写它没有访问权限的缓存时，会出现 SplFileInfo 警告。确保您的应用程序有权读取/写入 cache/tmp 文件夹（取决于您的 Cake 版本）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T13:52:50.960

这可能是一个 .htaccess 问题。和.htaccess`RewriteBase`应该是相同的。所以两个文件中的行应该是：`webroot``app`

```
RewriteBase /quotesystem/ 
```

我个人从不接触 Cake 根目录中的 .htaccess，因为似乎没有必要更改那里的任何内容。

此外，`/tmp/cache`它的子目录也应该是可写的。

# php - PHP：如果 $timestamp 超过 12 周，那么……

> ID：10432769
> 
> 赞同：1
> 
> 时间：2012-05-03T13:48:30.463
> 
> 标签：php, date, comparison, timestamp

`echo ($timestamp)`给`"2012-05-03 15:35:46"`

PHP 命令看起来像这样：`"if $timestamp is older than 12 weeks then…"`

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-05-03T13:50:39.843

就微优化而言，这是 PHP 中最快的方法。

```
if(strtotime($timestamp) <= time() - (60*60*24*7*12)){
    // 60 secs * 60 mins * 24 hours * 7 days * 12 weeks
} 
```

请阅读[strtotime](http://ca.php.net/manual/fr/function.strtotime.php)以了解如何将时间戳转换为 unixtime。另请阅读有关[时间](http://ca.php.net/manual/fr/function.time.php)功能的信息。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-03T13:51:49.760

你需要的是[`strtotime()`](http://uk.php.net/manual/en/function.strtotime.php)！

```
$timestamp = strtotime($timestamp);
$twelveWeeksAgo = strtotime('-12 weeks');

if($timestamp < $twelveWeeksAgo) {
 // do something
} 
```

有多种检查方法，恕我直言，这是最能说明问题的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-03T13:54:15.563

如果您使用的是 php > 5.2，则可以使用 DateTime 和 DateInterval 对象：

```
$now = new DateTime();
$before = bew DateTime("2012-05-03 15:35:46");

$diff = $now->diff($before);

if ($diff->d > (12 * 7)) {
    print "Older than 12 weeks";
} 
```

请参阅[此处](http://php.net/manual/en/book.datetime.php)的上述对象的文档。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-03T13:51:52.333

```
$time_to_compare  = new DateTime();
$twelve_weeks_ago = new DateTime ("-12 weeks");
if ($time_to_compare < $twelve_weeks_ago)
{
    // Do stuff
} 
```

# phing - Phing 字符串操作

> ID：10432771
> 
> 赞同：4
> 
> 时间：2012-05-03T13:48:34.350
> 
> 标签：phing

我有一个 Phing 项目，你传入一个参数。我想对此参数执行简单的字符串操作，例如 strtolower() 或 ucwords() 等。有什么想法可以解决这个问题吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-03T14:13:15.680

使用 PhpEvaLTask 怎么样：

```
<project name="StringTest" default="all" basedir=".">
<target name="stringtest"  description="test">
    <php expression="strtolower(${param})" returnProperty="paramToLower"/>
    <php expression="ucwords(${param})" returnProperty="paramUcwords"/>
    <echo>To lower ${paramToLower}</echo>
    <echo>UcWords ${paramUcwords}</echo>
</target> 
```

运行它：

```
phing -Dparam=BLAH stringtest 
```

产量：

```
Buildfile: /export/users/marcelog/build.xml 
```

字符串测试 > 字符串测试：

```
 [php] Evaluating PHP expression: strtolower(BLAH)
  [php] Evaluating PHP expression: ucwords(BLAH)
 [echo] To lower blah
 [echo] UcWords BLAH 
```

建造完成

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-11-06T15:34:51.867

另一种方法：

```
<php function="strtolower" returnProperty="paramToLower">
    <param value="${param}" />
</php>

<php function="ucwords" returnProperty="paramUcwords">
    <param value="${param}" />
</php> 
```

# c# - 有没有办法使用反射来单独检查程序集？

> ID：10432778
> 
> 赞同：0
> 
> 时间：2012-05-03T13:48:59.970
> 
> 标签：c#, .net, reflection

我有一个插件程序集，它为它“插入”的应用程序引用了第 3 方程序集。然后我有一个实用程序来运行这个 3rd 方应用程序，将类的全名、程序集名称和要运行的插件中的方法传递给它。

我可以将这些细节硬编码为实用程序中的字符串常量。相反，我想在运行时使用反射来获取它们。插件类实现了一个特定的接口，并且该方法使用自定义属性进行了注释。所以我应该是有可能的。我在插件中添加了一个特定的反射类并调用它来获取详细信息。但它落在（代表）线上：

由于尝试加载第 3 方程序集之一，Assembly.GetExecutingAssembly().GetExportedTypes() 带有 FileNotFoundException。由于许可规则，我不想将该实用程序直接链接到这些第 3 方程序集。

所以我的问题是，如何在不触发其他引用程序集的尝试加载的情况下获取插件程序集中的类列表？有可能，还是我必须求助于我的字符串常量？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T14:38:31.127

[莫诺·塞西尔](https://github.com/jbevain/cecil)

# xcode - 在不重新启动 Xcode 的情况下重新加载 docset

> ID：10432780
> 
> 赞同：1
> 
> 时间：2012-05-03T13:49:05.723
> 
> 标签：xcode, documentation, appledoc, docset

我正在使用 appledoc 生成文档集。一切都很好，除了每次我重建它（使用我的 plist 并运行 shell 脚本）我必须重新启动 xcode 以查看更改。

有没有办法强制 xcode 重新加载 docset ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T23:50:51.787

不是你真正想要的，也不是我的一个应用程序的无耻推销，但你可能想使用[Dash](http://kapeli.com/dash)进行文档浏览/搜索，你不会遇到这个问题 :)

# c# - GET请求里面有一个点

> ID：10432782
> 
> 赞同：1
> 
> 时间：2012-05-03T13:49:12.923
> 
> 标签：c#, .net, web-services, rest, restsharp

我创建了一个 Web 服务 RESTful，知道我想使用该 Web 服务中的一项服务，以及 RestSharp API

作品：

```
http://localhost:7895/.../Connexion/login/pass 
```

如果我在服务中设置断点，则调用该服务，并且一切正常

不工作：

```
http://localhost:7895/.../Connexion/lo.gin/pass 
```

如果在服务中放置断点，则永远不会调用该服务。

**编辑** 这里的网址，如果你想要确切的网址

```
http://192.168.56.1:1759/ConnexionService.svc/Connexion/jean.marc/HASHEDPASSWORD"; 
```

这样可行

```
http://192.168.56.1:1759/ConnexionService.svc/Connexion/jeanmarc/HASHEDPASSWORD"; 
```

jean.marc 是登录名。然后我生成一个 oauth 签名，将其添加到 url 然后我使用 RestSharp API 来执行请求。

问题是，当使用登录 jean.marc 发出请求时，我的服务永远不会被调用。点之所以存在，是因为登录名是用名字“点”和姓氏构造的。如果无法通过点传递信息，我应该更改登录结构并添加下划线。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T13:56:07.903

当然，第二个不起作用；这是一个不同的网址。

您不能只是在任何地方添加点并期望它起作用。为什么要添加额外的点？

# sql-server-2008 - 如何在视图中使用 OpenRowSet 调用带有#temp 的 SP？

> ID：10432792
> 
> 赞同：0
> 
> 时间：2012-05-03T13:50:01.037
> 
> 标签：sql-server-2008, tsql, view, temp, openrowset

我正在尝试从支持仅连接到表和视图的应用程序运行存储过程。我的解决方法是使用通过 Openrowset() 从 SP 获取结果的视图。结果表明，SP 使用#temp 表来存储中间结果，这是一个 DDL 操作，似乎不支持分布式查询。我可以用@temp 表变量替换#temp，但它会大大减慢整个代码的速度（我使用批量插入（从t1 中选择* 到#temp）来加快速度）。

我收到的错误消息是

> 无法处理对象“exec DW.dbo.TestSpWithTempTable”。链接服务器“(null)”的 OLE DB 提供程序“SQLNCLI10”表示该对象没有列，或者当前用户对该对象没有权限。

**无论如何我可以在SP中使用#temp表并使用OpenRowSet从视图中调用它吗？**

```
CREATE PROC TestSpWithTempTable
AS
Select distinct TxnType into #txnTypes from Transactions
-- lot of other stuffs going on here
select TxnType from #temp
GO 
```

我创建的视图是：

```
CREATE VIEW SelectDataFromSP
    SELECT a.*
    FROM OPENROWSET('SQLNCLI', 'Server=(local);TRUSTED_CONNECTION=YES;',
         'exec DW.dbo.TestSpWithTempTable') AS a 
```

有效但缓慢的代码是

```
CREATE PROC TestSpWithTempTable
AS
declare @TxnTypes table(TxnType varchar(100))    
insert into @TxnTypes
Select distinct TxnType from Transactions
-- lot of other stuffs going on here
select TxnType from @TxnTypes
GO 
```

# maven - 如何在不影响功能的情况下将一个大的 Jenkins 工作/项目拆分成更小的工作？

> ID：10432794
> 
> 赞同：4
> 
> 时间：2012-05-03T13:50:07.893
> 
> 标签：maven, jenkins, build-automation, eclipse-pde, tycho

我们正在努力改进我们的 Jenkins 设置。到目前为止，我们有两个目录：/plugins 和 /tests。

我们的项目是一个 Eclipse Plugins 的多模块项目。/tests 文件夹中的测试插件是片段项目，依赖于 /plugins 中相应的生产代码插件。

到目前为止，我们只有一项 Jenkins 工作，它检查了 /plugins 和 /tests，构建了所有这些并产生了 Surefire 结果等。

我们现在正在考虑将项目拆分为与我们提供的功能相对应的较小的工作。看来我们试图做到这一点的方式并不理想。

我们尝试了以下方法：

1.  我们为核心功能创建了一个工作。该作业检查整个 /plugins 和 /tests 目录并仅构建该功能所包含的插件。该作业有一个单独的 pom.xml，它定义了核心工件并讲述了该功能中包含的模块。
2.  我们为应该在功能插件上运行的测试创建了一个单独的作业。此作业使用来自核心作业的克隆工作区。该作业将在构建核心功能后运行。

我不知何故认为这不是最佳的。

*   例如，只有核心作业可以更新签出的文件。如果只更新测试，核心功能不需要重新构建，但它会。
*   一旦我有一个依赖于核心功能的功能，这个功能要么需要使用核心功能工作区的克隆，要么检查它自己的 /plugins 和 /tests 副本，这会导致膨胀。
*   使用克隆的工作区，我无法更新我的来源。所以当我有一个特性依赖于另一个特性时，只有更新和构建核心特性才能完成这项工作。

我想我在这里遗漏了一些基本的东西。有人可以帮忙吗？肯定有一个更简单的方法。

编辑：如果一切正常，我将尝试制定我认为理想情况下会发生的情况：

*   检查功能组件是否已更改（即可以对其进行更新）
*   如果更改，构建功能
    *   如有必要，构建依赖特征（即检查 ob 对应的作业）
    *   构建功能本身
    *   如果构建成功，开始功能测试工作
    *   让我看看功能作业中的测试作业的结果

最后，项目工作应该

*   做一个夜间构建
*   查看 /plugins 和 /tests 的所有来源
*   全部构建，全部测试，将结果发送到 Sonar

此外，如果不需要每晚构建，那将是整洁的，因为项目功能的构建和测试结果将结合在项目工作结果中。

这样的事情可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T14:31:04.673

从问题的结尾开始。我会保留一个单独的夜间工作，进行干净的签出（在签出之前摆脱任何生成的东西），从头开始构建所有内容，并运行所有测试。如果您没有进行干净的构建，则无法保证签入存储库的内容确实可以构建。

> *   检查功能组件是否已更改（即可以对其进行更新）
> *   如果更改，构建功能
>     1.  如有必要，构建依赖特征（即检查 ob 对应的作业）
>     2.  构建功能本身
>     3.  如果构建成功，开始功能测试工作
>     4.  让我看看功能作业中的测试作业的结果

[我假设 1 中的“依赖特征”是指 2 中的“特征”所需的东西。]

要做到这一点，我会说你有多个工作。

*   每个单独的功能和每个简单构建该功能的依赖功能的工作。作业应该由（相关）功能的 SCM 更改启动。
*   我不会将测试作业与编译作业分开。它允许成功编译的代码永远不会被测试。相反，我会依赖于 Jenkins 中的构建步骤失败的事实，它通常会中止进一步的构建步骤。

诀窍在于如何将所有这些连接在一起。

假设我们有一个名为*F1*的构建作业，它建立在 2 个依赖特性*DF1.1*和*DF1.2 之上*，每个特性都有自己的构建作业。

*   DF1.1和*DF1.2**都*应该配置为触发*F1*的构建。
*   *F1*应配置为从最新成功的*DF1.1*和*DF1.2*构建中获取所需的工件。不幸的是，非常好的“克隆 SCM”插件在这里不会有太大帮助，因为它只是从以前的一项工作中提取的。也许其中一个工件发布器插件可能有用，或者您可能需要添加一些自定义构建步骤来放置/获取工件。

# java - 使用 JPA 重置 MySql 数据库的自动增量值

> ID：10432797
> 
> 赞同：2
> 
> 时间：2012-05-03T13:50:11.347
> 
> 标签：java, mysql, spring, jpa, junit

我刚开始使用 JUnit 编写我的第一个单元测试，但遇到了一个小问题。在我的单元测试中，我将新数据插入到我的 MySql 数据库中。添加信息后，我会在下一个单元测试中删除相同的信息。

我的 table-id 是自动递增的，并且在每个单元测试中，我运行下一个 id 的值都会递增 1。

我使用 @AfterClass 注释实现了一个新方法，以便在我完成单元测试后它会重置增量值。我使用了这个查询：

```
entityManager.createNativeQuery("ALTER TABLE student AUTO_INCREMENT = 1"); 
```

如果我将新信息直接添加到 MySql 数据库中，则下一个 id 的值不是我想要的（表中的最后一个 id 值 +1）。

但是，当我直接在数据库中运行 sql-query 时，查询确实有效。

我的问题：在单元测试时是否不可能运行这些查询？还是我完全看错了。

我正在使用 java、spring、hibernate、jpa、junit

提前致谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-03T13:56:57.560

您创建了一个查询，但忘记执行它：

```
entityManager
    .createNativeQuery("ALTER TABLE student AUTO_INCREMENT = 1")
    .executeUpdate(); 
```

# java - 在 Java Swing 中淡化图形的一部分

> ID：10432798
> 
> 赞同：1
> 
> 时间：2012-05-03T13:50:26.037
> 
> 标签：java, swing, animation, alpha-transparency

我正在尝试在摇摆中实现淡入/淡出动画。我正在使用其中没有任何组件的 JPanel。它完全由paintComponent() 方法绘制。

现在在这个 JPanel 的一部分中，我想实现淡入/淡出动画。当我尝试使用 AlphaComposite 时，整个 JPanel 都会触发动画。

我可以将此动画限制在该面板中的一个小剪辑区域中吗？

```
Graphics2D g2d = (Graphics2D) g;
    g2d.setComposite(AlphaComposite.getInstance(
            AlphaComposite.XOR, alpha)); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T05:41:35.283

您可以在绘画之前使用 setClip() 来限制淡入淡出区域。假设你想要一个小的渐变矩形。使用区域类创建 2 个形状。原始剪辑与渐变矩形的交集和减法（从原始剪辑中减去渐变矩形）。

使用 2 个不同的剪辑调用 super.paintComponent() 两次。对于第二个油漆，您可以设置您的 alpha 过滤器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-03T14:05:07.260

也许吧，但这可能比它的价值更难实现。创建一个`JComponent`您想要动画（或淡出）的大小，将其添加到您的`JPanel`，并在动画期间在较小的组件上调用 repaint() 而不是较大的`JPanel`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-03T13:55:21.380

您是否尝试过使用图形对象（如矩形、圆形等）进行淡入/淡出？这样，整个面板就不会被触发。

祝你好运！

# nuget - Nuget脚手架安装失败

> ID：10432799
> 
> 赞同：1
> 
> 时间：2012-05-03T13:50:27.917
> 
> 标签：nuget, scaffolding, mvcmailer

我正在尝试在MVC4的VS2010 SP1中安装脚手架包（目标是用户MvcMailer），这是我运行的命令

```
PM> install-package T4Scaffolding
PM> install-package MvcScaffolding 
```

并安装 T4Scaffolding 给了我这个错误：

> 导入模块：无法加载文件或程序集 'file:///path/packages\T4Scaffolding.1.0.5\tools\T4Scaffolding.dll' 或其依赖项之一。不支持操作。（来自 HRESULT 的异常：0x80131515）

如果我再次使用安装它，它安装但是当我使用脚手架命令时给我这个错误

```
PM> Scaffolding Mailer.Razor UserMailer subs 
```

> 术语“脚手架”未被识别为 cmdlet、函数、脚本文件或可运行程序的名称。检查名称的拼写，或者如果包含路径，请验证路径是否正确并重试。在 line:1 char:12 + Scaffolding <<<< Mailer.Razor UserMailer subs + CategoryInfo : ObjectNotFound: (Scaffolding:String) [], CommandNotFoundException + FullyQualifiedErrorId : CommandNotFoundException

我尝试卸载并删除软件包并重新安装，但没有运气。我在两个包上都尝试了更新命令，但没有。

当我运行 import-module "dllpath"

我收到相同的错误消息，即

> 无法加载文件或程序集 'file:///path/packages\T4Scaffolding.1.0.5\tools\T4Scaffolding.dll' 或其依赖项之一。不支持操作。（来自 HRESULT 的异常：0x80131515）

在卸载、安装、重新安装所有可能的情况下尝试重新启动 VS，但没有任何改变。

我做错了什么。

编辑：我尝试使用电源外壳

> PS C:\Windows\system32> import-module "path\T4Scaffolding.1.0.5\tools\T4Scaffolding.dll" Import-Module : 无法加载文件或程序集 'file:///path\T4Scaffolding.1.0.5\ tools\T4Scaffolding.dll' 或其依赖项之一。此程序集由比当前加载的运行时更新的运行时构建，无法加载。在 line:1 char:14 + import-module <<<< "path\T4Scaffolding.1.0.5\tools\T4Scaffolding.dll" + CategoryInfo : NotSpecified: (:) [Import-Module], BadImageFormatException + FullyQualifiedErrorId : System. BadImageFormatException,Microsoft.PowerShell.Commands.ImportModuleCommand

它给出错误“此程序集由比当前加载的运行时更新的运行时构建，无法加载。” 我相信这是开始的失败点。任何想法？如何先解决这个问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-11T10:58:30.457

解决了，解决方案中没有什么新东西，但必须进行大量搜索、点击和试用，我有 VS2010 SP1，默认安装。项目是从网络驱动器加载的。

导入模块：无法加载文件或程序集 'file:///path/packages\T4Scaffolding.1.0.5\tools\T4Scaffolding.dll' 或其依赖项之一。不支持操作。

上面的错误信息来自 VS，因为它无法从远程源加载东西。修复：转到您的 Visual Studio devenv.exe 位置。即 devenv.exe.config 中的默认 C:\Program Files\Microsoft Visual Studio 10.0\Common7\IDE 在运行时部分添加行，即：

```
<configuration>
<configSections>

</configSections>
<startup useLegacyV2RuntimeActivationPolicy="true">
    <supportedRuntime version="v4.0.30319"/>
    <requiredRuntime version="v4.0.30319" safemode="true"/>

</startup>
<runtime>
<loadFromRemoteSources enabled="true"/> 
```

我希望错误消息首先更合适，但我也应该阅读更多内容。

# java - jsf 1.2 自定义函数可变参数签名

> ID：10432803
> 
> 赞同：1
> 
> 时间：2012-05-03T13:50:30.503
> 
> 标签：java, methods, jsf-1.2, method-signature

我有一个自定义 JSF 函数，我需要创建一个具有可变长度参数列表的自定义函数：

签名是：

```
public static boolean myFunction(String... args) {
...
} 
```

如何在 taglib 文件中写入函数的签名？

例如，如果我只有一个 String 参数，则此方法有效：

```
<function>
    <function-name>myFunction</function-name>
    <function-class>functions.Functions</function-class>
    <function-signature>boolean myFunction(java.lang.String)</function-signature>
</function> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T14:01:11.363

在内部，一个 vararg 参数`String... args`被替换为一个数组参数（`String[]`在这种情况下）。

尝试：

```
<function-signature>boolean myFunction(java.lang.String[])</function-signature> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T11:43:36.780

采用这种方法时效果很好：http: [//seamframework.org/Documentation/CreatingCustomELFunctions](http://seamframework.org/Documentation/CreatingCustomELFunctions)

这个想法是不明确定义函数，而是将它们从静态类动态加载到库中。对我来说唯一的问题是 Netbeans 不能以这种方式识别库。

# jquery - 在水平幻灯片中一次滑动 3 个 div

> ID：10432804
> 
> 赞同：0
> 
> 时间：2012-05-03T13:50:34.483
> 
> 标签：jquery, jquery-animate, slideshow, slide

我正在构建一个幻灯片，在底部显示 3 个水平 div 和 3 个链接。链接需要一次滑动 3 个 div 并将其替换为接下来的 3 个 div（每次单击正好 3 个）这是我迄今为止构建的：http: [//tipoos.com/buzz](http://tipoos.com/buzz)

我想知道是否需要在 UL 列表中执行此操作或仅使用浮动 div。最后决定使用div。

有谁知道我怎么能做到这一点？我还希望它每 5 秒左右自动滑动 3 个 div。

将不胜感激任何帮助谢谢，吉尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T13:52:07.653

如果一个插件是合适的，那么我以前使用过：[http](http://gmarwaha.com/jquery/jcarousellite/) ://gmarwaha.com/jquery/jcarousellite/ 可以满足您的需求

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T14:40:13.043

检查您的页面的以下修改：

[http://jsfiddle.net/snies/B4FB5/35/](http://jsfiddle.net/snies/B4FB5/35/)

主要思想是您需要 6 张图像才能滚动 3 进 3 出。他们住在 1 个包含“滑块”的 div 中，它会被移动。它必须足够宽以容纳 6 张图像。整个设置包含在一个“slider_window”div 中，其宽度仅足以容纳 3 个图像。这个将 css 属性“溢出”设置为“隐藏”。

想象一个硬纸板窗和一张带图片的纸条，现在您沿着窗户移动纸条。

为了便于使用和动画，我使用 jQuery ( [http://api.jquery.com/animate/](http://api.jquery.com/animate/) )。

动画完成后，您将切换图像并将整个 div 移回原位。如果您预加载图像，则切换速度足够快以至于用户看不到它。或者，您可以删除一侧的图像并在另一侧添加新图像。在演示中，我只是在 5 秒后将其移回原位。

# c# - 使用 linq 获取以逗号分隔的实体集合列表

> ID：10432808
> 
> 赞同：2
> 
> 时间：2012-05-03T13:50:51.140
> 
> 标签：c#, linq, entity-framework

我有 2 个实体`Line`和`Tag`. 关系是`Line *----* Tag`

从`line`我有一个导航属性`Line.Tags`，它返回标签对象的列表。是后面的`Tag.Name`字符串值。

我真正需要的是以逗号分隔的方式获取所有标签名称，如下所示：

```
tag1, tag2, tag3 
```

我试图在投影中这样做，但它说它不支持`toString()`

```
var o = dgvLines.CurrentRow.DataBoundItem as Order;
                var r = _rs.Lines.Where(y => y.InvoiceNo == o.InvoiceNo).Select(x => new
                {
                    ReturnNo = x.Return.ReturnNo,
                    Part = x.Part,
                    Tags = String.Join(", ", x.Tags.ToList().Select(t => t.Name))
                });
                dgvExistingParts.DataSource = r; 
```

错误：

**LINQ to Entities 无法识别方法 'System.String Join(System.String, System.Collections.Generic.IEnumerable`1[System.String])' 方法，并且此方法无法转换为存储表达式。**

知道如何获得这个逗号分隔的标签列表吗？

提前致谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-03T13:53:51.623

```
var r = _rs.Lines.Where(y => y.InvoiceNo == o.InvoiceNo).ToList().Select(x => new
{
    ReturnNo = x.Return.ReturnNo,
    Part = x.Part,
    Tags = String.Join(", ", x.Tags.Select(t => t.Name))
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-03T14:20:55.023

你不能在 SQL 中进行连接，所以你必须取回你需要的数据，然后在正常的代码中工作：

```
var o = dgvLines.CurrentRow.DataBoundItem as Order;

var r = _rs.Lines
  .Where(y => y.InvoiceNo == o.InvoiceNo)
  .Select(x => new
    {
      ReturnNo = x.Return.ReturnNo,
      Part = x.Part,
      TagNames = x.Tags.Select( t => t.Name ),
    }
  )
  .ToList() // this runs the SQL on the database
  .Select( x => new
    {
      ReturnNo = x.ReturnNo,
      Part = x.Part,
      Tags = String.Join( ", ", x.TagNames ),
    }
  )
  .ToList();

  dgvExistingParts.DataSource = r; 
```

# java - 在 Prefuse 中以编程方式绘制有向边

> ID：10432811
> 
> 赞同：4
> 
> 时间：2012-05-03T13:51:02.823
> 
> 标签：java, prefuse

我使用以下代码显示图表：

```
 graph = new Graph(true);
    vis = new Visualization();
    vis.add(GRAPH, graph);

    CustomLabelRenderer re = new CustomLabelRenderer();
    re.setImageField(NODE_TYPE_IMAGE);
    re.setImagePosition(Constants.TOP);
    EdgeRenderer edgeRenderer = new EdgeRenderer(Constants.EDGE_TYPE_LINE, Constants.EDGE_ARROW_FORWARD);
    edgeRenderer.setArrowType(Constants.EDGE_ARROW_FORWARD);
    edgeRenderer.setArrowHeadSize(10, 10);
    DefaultRendererFactory factory = new DefaultRendererFactory(re, edgeRenderer);
    factory.add(new InGroupPredicate(EDGE_DECORATORS), new LabelRenderer(VisualItem.LABEL));
    vis.setRendererFactory(factory); 
```

如您所见，实例化图形以使用有向边。之后我将 EdgeRenderer 设置为使用箭头。但是，我看不到边缘上的任何箭头，而只是简单的线条。我究竟做错了什么？

这就是我添加边缘的方式：

```
graph.addEdge(node1, node2); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-07T09:14:36.723

您需要设置`FILLCOLOR`边缘：

```
filter.add(new ColorAction(edges, VisualItem.FILLCOLOR, 
    ColorLib.rgb(100,100,100)); 
```

我用演示重现了这个问题，`RadialGraphView`除了这一行之外，我不需要对源代码进行任何更改。（不过，我不得不更改数据文件。）

# .net - 如何删除英文报价

> ID：10432814
> 
> 赞同：1
> 
> 时间：2012-05-03T13:51:13.427
> 
> 标签：.net, vb.net, string, text

我想知道，如何从字符串中删除英文引号？

例如：Denomina “CAMPOS” a Rua B, em local que especifica。

我想删除此引号，或将其替换为“此引号”之类的简单引号。我试过这段代码，但它不起作用：

```
Dim txt As String = mytext.Replace("““", """").Replace("””", """") 
```

## 编辑

看看我在 Visual Studio 2010 上的代码：

![在此处输入图像描述](../Images/aa8c412032c7519ae8ae27e7b0013d32.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-03T14:46:33.887

尝试使用 asci 而不是真正的引号

# c - 使用与文件 B 共享的元素（外键）访问文件 A 中的数据

> ID：10432815
> 
> 赞同：0
> 
> 时间：2012-05-03T13:51:28.387
> 
> 标签：c, file, foreign-keys, structure

我有一个文件 car.txt 和一个文件 reservation.txt。这两个文件都有一个保留号 (Rxxx)。

我想使用reservation.txt中的预订号来打印带有相应预订号的汽车的详细信息。或者更准确地说，我试图找到在任何给定日期可用的所有汽车的详细信息。

car.txt：（从让到右：reservationID、carID、carYOM、carMake、carModel、carFuel、category）

```
R002;V001;2003;Toyota;Camry;Petrol;Budget
R007;V002;2005;Toyota;Prius;Petrol;Economy
R001;V003;1999;Ford;Falcon;Petrol;Midsize
R008;V004;2007;Ford;Territory;Diesel;Fullsize
R011;V005;2010;Ferrari;599;Petrol;Fullsize
R035;V006;1998;Holden;Comadore;Diesel;Midsize
R006;V007;2008;Honda;Civic;Petrol;Budget
R004;V008;2000;Mazda;MX5;Petrol;Economy 
```

reservation.txt：（从左到右：reservationID、customerID、reservationStartDate、reservationStartTime、reservationEndDate、reservationEndTime）

```
R001;C005;12/02/2012;09:15A.M;15/03/2012;05:00P.M
R002;C002;15/04/2012;10:00A.M;22/04/2012;10:30A.M
R003;C003;16/01/2012;02:11P.M;15/04/2012;12:00P.M
R004;C004;05/05/2012;03:00P.M;08/05/2012;10:40A.M
R005;C005;15/04/2012;10:00A.M;23/04/2012;05:00P.M
R006;C006;11/04/2012;05:30P.M;15/04/2012;10:00A.M
R010;C008;15/05/2012;03:15P.M;18/05/2012;11:00A.M
R011;C007;15/04/2012;11:40P.A;23/04/2012;09:00A.M 
```

如果我输入任何日期，它只会决定输入的日期是否在预订开始日期和结束日期之间。“所有汽车都可用”。

但是，如果我输入 13/02/2012，它会打印 7 次“cars.txt 中没有匹配的 resID”。

有问题的代码：

```
#include <stdio.h>
#include <string.h>
#define MAX_CAR 100
#define MAX_RES 100

int main(){

    typedef struct{                 //car struct
        char reservationID[20];
        char carID[20];
        char carYOM[20];
        char carMake[20];
        char carModel[50];
        char carFuel[20];
        char catagory[20];
    } car_t;

    typedef struct{                 //res struct
        char reservationID[20];
        char customerID[20];
        char reservationStartDate[20];
        char reservationStartTime[20];
        char reservationEndDate[50];
        char reservationEndTime[20];
    } res_t;

    car_t car[MAX_CAR];             //car array
    res_t reservation[MAX_RES];     //res array
    FILE *carHandle;
    FILE *resHandle;
    char line[100];
    char *item;
    int rescount = 0;
    int carcount =0;
    int k;
    int i;
    int option;
    char choice[20];    

    resHandle = fopen("reservation.txt","r");    

    while (fgets(line, 99, resHandle)){                         //cut up the reservation file line by line and put the bits into the res array.
        item = strtok(line,";");
        strcpy(reservation[rescount].reservationID,item);
        item = strtok(NULL,";");
        strcpy(reservation[rescount].customerID,item);
        item = strtok(NULL,";");
        strcpy(reservation[rescount].reservationStartDate,item);
        item = strtok(NULL,";");
        strcpy(reservation[rescount].reservationStartTime,item);
        item = strtok(NULL,";");
        strcpy(reservation[rescount].reservationEndDate,item);
        item = strtok(NULL,"\n");
        strcpy(reservation[rescount].reservationEndTime,item);
        rescount++;
    }

    fclose(resHandle);

    carHandle = fopen("car.txt","r");    

    while (fgets(line, 99, carHandle)){                                 //cut up the car file line by line and put the bits into the car array.
        item = strtok(line,";");
        strcpy(car[carcount].reservationID,item);
        item = strtok(NULL,";");
        strcpy(car[carcount].carID,item);
        item = strtok(NULL,";");
        strcpy(car[carcount].carYOM,item);
        item = strtok(NULL,";");
        strcpy(car[carcount].carMake,item);
        item = strtok(NULL,";");
        strcpy(car[carcount].carModel,item);
        item = strtok(NULL,";");
        strcpy(car[carcount].carFuel,item);
        item = strtok(NULL,"\n");
        strcpy(car[carcount].catagory,item);
        carcount++;
    }

    fclose(carHandle);

    printf("Enter todays date:");
    scanf("%s", choice);
    for (k=0;k<=rescount; k++){
        if (strcmp(choice,reservation[k].reservationEndDate)<0 && strcmp(choice,reservation[k].reservationStartDate)>0){
            for (i=0;i<=carcount; i++){
                if (strcmp(car[k].reservationID,reservation[i].reservationID)==0){
                    printf("\nreservationID: %s\nreservationStartTime: %s\ncustomerID: %s\ncarid: %s\nyom: %s\nmake: %s\nmodel: %s\nfueltype: %s\ncategory: %s\n\n", car[k].reservationID, reservation[i].reservationStartTime, reservation[i].customerID, car[k].carID, car[k].carYOM, car[k].carMake, car[k].carModel, car[k].carFuel, car[k].catagory);
                    //printf("This works");
                    goto outofloop;
                }else printf("\n\nno matching resID in cars.txt\n");
            }
        }
        else printf("\nall the cars are available\n");
        break;
    }
    outofloop:

    return(0);
} 
```

任何帮助，将不胜感激。:)

编辑：更新的代码。

这是输出，仍然错误:(:

输入今天日期：13/02/2012

car.txt 中没有匹配的 resID

```
reservationID: R002
reservationStartTime: 10:00A.M
customerID: C002
carid: V001
yom: 2003
make: Toyota
model: Camry
fueltype: Petrol
category: Budget

Press any key to continue . . . 
```

* * *

输入今天日期：13/02/2012

所有的车都可用

按任意键继续...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T15:24:45.620

您没有正确计算汽车和预订的数量：在两个循环中（读取汽车的循环和读取预订的循环），您都将`reccount`其用作计数器。您需要使用两个计数器，`carcount`并且`rescount`. 稍后，您需要在 for 循环中使用 carcount 和 rescount。

```
for (k=0;k<=rescount; k++){
    if (strcmp(choice,reservation[k].reservationEndDate)<0 && strcmp(choice,reservation[k].reservationStartDate)>0){
        for (i=0;i<=carcount; i++){ 
```

您还应该考虑为 car 和 reservation 数组以及 car_t 和 reservation_t 中的字符数组动态分配内存，因为您当前的代码（即使已修复明显的错误）会出现段错误或在您输入后立即给出意外结果文件有超过 MAX_CAR/MAX_RES 行，或者行中的字符串太长。

**更新** 您的更新代码仍有几个问题：

*   您不应该将不应该是字符串的数据存储在字符串变量中。尽可能多地存储在整数或无符号变量中，尤其是 ID 和日期。
*   谈到日期：只需使用`time(NULL)`UNIX 时间格式（“从 1970-01-01 00:00 开始的秒数”）获取当前时间。将所有日期存储为 UNIX 时间中的整数。
*   读取文件时，检查carcount是否大于CAR_MAX

    ```
    for(carcount = 0; carcount < CAR_MAX; carcount++) 
    ```

*   阅读文本文件时应使用 fscanf：

    ```
    if(fscanf(filehandle, "R%03u...\n", &car[carcount].reservationID, ...) == EOF)
        break; 
    ```

    这将使您的文件扫描更加健壮，并将其变成单行。

*   尽可能避免字符串比较。相反，使用“真实数据类型”。

*   避免 goto，真的。Linux 内核开发人员确实使用它们，但他们知道自己在做什么。
*   您的外部 for 循环包含一个 break 语句，在任何情况下，它都会在第一次运行后中断循环执行。您可能在“其他”之后忘记了大括号。
*   我认为您的程序流程逻辑包含一些错误。你`printf("\n\nno matching resID in cars.txt\n")`在每一辆车之后。

一般来说，您是否尝试过调试您的代码？gdb 是一个非常强大的实用程序。您可以使用它来跟踪程序流程，随时暂停程序查看变量内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T12:13:40.187

我已经解决了这个问题。问题是使用 resID 作为通用标识符而不是 carID。

感谢大家的帮助。

# javascript - 连接字符串的正确方法是什么？

> ID：10432817
> 
> 赞同：0
> 
> 时间：2012-05-03T13:51:31.310
> 
> 标签：javascript, json

```
var d=getEntity( {"Division": 
{
"oddTerms": 
    [           
        {
              "entity": "Sunshine",
              "Sunshine": [
                    {
                         "count": 2,
                        "entity": "Dodge"
                    },
                    {
                        "count": 1,
                        "entity": "Dodge Avenger"
                    },

              ]
        }
  ]

}}); 
```

我想遍历 json 字符串和实体名称 Dodge 和 Dodge Avenger。我使用了以下方法

```
for (var k in h.Division.oddTerms)
{
s=h.Division.oddTerms[k].entity;
h.Division.oddTerms[k].+s+.entity;
} 
```

但我确实认为这不是连接的正确方法，因为它没有工作..有人知道正确的格式吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T13:55:10.030

`oddTerms`是一个数组，而不是一个对象。对于 JavaScript 中的数组，您需要使用带有计数器的 for 循环，而不是遍历元素：

```
var concatedString = '';
for (var k=0; k<h.Division.oddTerms.length;k++)
{
    // Get the name of the entity we want to collect the entity terms of
    var entityName =h.Division.oddTerms[k].entity;
    // iterate through all the instances of each entity
    for(var j=0; j<h.Division.oddTerms[k][entityName].length;j++){
      concatedString += h.Division.oddTerms[k][entityName][j].entity;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T14:14:58.423

```
var entityName = "",
    arrTerms = [],
    outputTemplate = '{"%entityName":[%terms]}',
    h = {
        "Division":
        {
            "oddTerms":
            [
                {
                    "entity": "Sunshine",
                    "Sunshine": [
                    {
                        "count": 2,
                        "entity": "Dodge"
                    },
                    {
                        "count": 1,
                        "entity": "Dodge Avenger"
                    },

                    ]
                }
            ]

        }
    };

for (var i = 0; i <  h.Division.oddTerms.length; i++)
{
    entityName=h.Division.oddTerms[i].entity; // "Sunshine"
    terms = h.Division.oddTerms[i][entityName];

    for (var j = 0; j < terms.length; j++) {
        arrTerms.push('"' + terms[j].entity + '"');
    }
}

// This will give you '{"Sunshine":["Dodge","Dodge Avenger"]}':
console.log(outputTemplate.replace('%entityName', entityName).replace('%terms', arrTerms.join(","))); 
```

* * *

编辑：

只是关于这个。

如果您不习惯使用 JS 以及对象和数组“文字”，那么使用 JSON 可能会有些混乱。在 JS 中，您可以通过多种方式定义对象和数组，但最简单的（也是许多开发人员最喜欢的）是使用这些文字。

这是一个对象的示例：

```
var myObj = {
    "some prop":"some value",
    "anotherProp":"another value"
} 
```

`myObj`您可以通过以下几种方式查找成员：

`myObj.anotherProp`//“另一个值”

`myObj["some prop"]`// 如果属性名称中有空格，则必须使用此表单

要遍历数组的内容，请使用第二种形式。例如，这不起作用：

```
for (var strPropName in myObj) {
   console.log(myObj.strPropName); // This won't work!
} 
```

相反，您应该像这样遍历属性：

```
for (var strPropName in myObj) {
    if (myObj.hasOwnProperty(strPropName)) {
       console.log(myObj[strPropName]);
    }
} 
```

该`if`块是可选的，但如果您始终将其包含在代码中，您将避免潜在的问题。一些验证器也需要它。

现在，这是一个数组的示例：

```
var myArray = ["some value", "anotherValue"]; 
```

您可以使用数字索引访问这些：

```
myArray[0] // "some value"
myArray[1] // "anotherValue"
myArray[2] // undefined 
```

你可以遍历它们：

```
for (var index = 0; index < myArray.length; index++) {
    console.log(myArray[index]);
} 
```

您可以将对象嵌套在数组中：

```
myArray = [{},{},{}]; 
```

您可以在对象内嵌套数组：

```
myObject = {"arr1":[], "arr2":[], "arr3":[]} 
```

# javascript - 如何让 IE9 MSXML6 执行集成的 XSLT 处理，包括 javascript？

> ID：10432821
> 
> 赞同：1
> 
> 时间：2012-05-03T13:51:46.090
> 
> 标签：javascript, xslt, dom, internet-explorer-9, msxml6

IE9 默认应用 MSXML6，而 IE8 应用 MSXML3。MSXML6 中某些功能默认关闭的事实会导致麻烦，尤其是在加载页面时

```
<?xml version="1.0" encoding="UTF-8"?>
<?xml-stylesheet type="text/xsl" href="test.xsl"?>
<root>...</root> 
```

其中提到的 xslt 样式表应用嵌入式 javascript（例如，自定义扩展函数）。

可以在脚本代码中设置 DOM xslt 属性，例如在 Jscript 中：

```
var xsltDoc = new ActiveXObject("Msxml2.DOMDocument.6.0");
xsltDoc.setProperty("AllowXsltScript", true);
xsltDoc.loadXML(xsltfile); 
```

但是在加载上面提供的文件时，IE9 会自动加载 xslt 文件，并使用默认属性值。这导致与 IE8 的显着差异：IE8 将完美地加载页面，但 IE9 由于默认的 MSXML6 DOM 对象属性“允许 xslt scripting = false”而引发错误。***这不是真的 - 请参阅下面的答案。因此问题的其余部分无关紧要***

**如何触发 IE9 加载上面的文件并仍然允许在 xslt 中运行脚本？**

注意：我已经按照 msdn 的建议尝试了 Internet 选项/安全/自定义级别.../脚本/活动脚本 = 启用，但该设置已经正确。

我希望有一个特定的 IE9 处理指令可用，但我想没有。但也许这是一个特殊的样式表属性，它与 IE9 xslt 加载配合使用。
结论也可能是，这只能通过在主 html 文件上运行脚本来实现，其中不进行自动加载，而是将 XML 和 XSLT 加载到具有指定属性（如 AllowXsltScript）的指定 DOM 对象中，并且然后将转换显式加载到浏览器中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T14:37:39.443

[我在http://home.arcor.de/martin.honnen/xslt/test2012050301.xml](http://home.arcor.de/martin.honnen/xslt/test2012050301.xml)尝试了一个示例，样式表为[http://home.arcor.de/martin.honnen/xslt/test2012050301.xsl](http://home.arcor.de/martin.honnen/xslt/test2012050301.xsl)，它可以工作我和 Windows 7 上的 IE 9 都很好。基于该脚本，即使 IE 9 使用 MSXML 版本 6 执行样式表也是如此。如果您收到错误，肯定有其他原因，或者您的代码一定有某些特殊之处，您将需要发布最少但完整的详细信息，以便我们重现问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-05T03:36:04.527

我有一个网页，它使用 JavaScript 调用的内置浏览器支持（在 IE9、MSXML6 中）执行客户端 XSLT。JavaScript 使用 Ajax 调用将 XSLT 样式表（静态 .xsl 文件）从服务器加载到 XSLT 处理器对象变量中。要转换的 XML 位于由 JavaScript 创建的 XML 文档对象变量中。XML 文档的内容基于页面上 textarea 元素的值。

XSL 转换在所有目标浏览器（Firefox、Chrome、Safari）的当前版本中工作，除了 IE9，它报告了错误：

“不支持在 DTD 中使用默认命名空间声明属性。”

我尝试了一堆东西都无济于事。最后，凭直觉，我的脖子后面竖起了头发，我插入了这个属性：

xmlns="http://www.w3.org/1999/xhtml"

在网页的 html 元素中。不是在被转换的 XML 文档中，而是在*包含调用 XSLT 转换的 JavaScript 的网页中*。

错误消失了。该网页现在可以在 IE9 中运行。

（该网页还包含一个 XML 声明和一个 XHTML 1.0 Strict DOCTYPE。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-14T09:33:53.380

我被误导了。首先，触发怪癖模式的不是 IE 安全设​​置；这是（缺少的）文档类型。[其次，从xslt8690-xslt-processing-failed](https://stackoverflow.com/questions/10529999/why-xslt8690-xslt-processing-failed-when-processing-local-xml-xslt/10567546#10567546)中可以看出，不触发本地文件怪癖的真正原因是与区域无关的 IE9 安全设置。

所以 DOM 设置没有任何作用——当 IE 加载 xml 或 xslt 时，该`allowXsltScript`属性似乎自动设置为 true。

# jbehave - JBehave 模式变体 - 尝试匹配替代方案

> ID：10432823
> 
> 赞同：0
> 
> 时间：2012-05-03T13:51:46.550
> 
> 标签：jbehave

我的故事中有以下内容，我正在尝试匹配

```
!-- Block 1
When I "action" of document "document" to "status" and nextAction
When I "action" for document "document" to "status" and nextAction
When I "action" document "document" to "status" and nextAction
!-- Block 2
When I "action" of document "document" and nextAction
When I "action" for document "document" and nextAction
When I "action" document "document" and nextAction
!-- Block 3
When I "action" of document "document" to "status"
When I "action" for document "document" to "status"
When I "action" document "document" to "status"
!-- Block 4
When I "action" of document "document"
When I "action" for document "document"
When I "action" document "document" 
```

在*"action"*和*document*之间可能有*of* , *for*或空 *到 "status"*是可选的 *并且 nextAction*是可选的

在步骤文件中，我有以下内容

```
@When ("I \"$action\"{| of| for} document \"$document\"{ to \"$status\"|}{ and $nextAction|}") 
```

这是匹配故事文件中的块 1 和 2，但不匹配块 3 和 4。

你能给我一些关于我需要如何修改步骤文件以匹配所有 4 个块的指示吗？

我尝试添加具有 to 状态的别名，并删除了下一步操作，但是 JBehave 错误并带有重复的候选步骤错误。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T21:08:59.880

如果唯一的变体是包含或不包含（到“状态”）和包含或不包含（nextAction）的选项的 2x2 网格 - 那么我将只有 4 个带有“of|for”变体的注释方法。然后让所有这些方法调用一个方法（未注释）。

这比使用变体包含/排除整个短语要干净得多。

此外，大多数 JBehave 人都不看 StackOverflow，所以我也会询问用户列表。

# mysql - 如何在表中强制执行唯一性？

> ID：10432831
> 
> 赞同：2
> 
> 时间：2012-05-03T13:52:13.077
> 
> 标签：mysql, sql

例如，我必须编写一个注册表，其中包含：

1.  enrolment_id
2.  学术期
3.  结果
4.  学生卡
5.  学科

我想强制执行以确保学生在特定学术期间不能多次注册一个科目。因此，约束应涉及 student_id、主题和学年列。

我仍然不确定如何实现这一点。有什么帮助吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-05-03T13:55:26.967

向您的表添加唯一约束：

```
ALTER TABLE yourtable ADD CONSTRAINT constraintname UNIQUE (student_id, subject, academic_period) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-03T13:55:44.333

创建一个[唯一的约束](https://stackoverflow.com/q/635937/27535)，`academic_period, student_id, subject`
我会让你计算出实际的 SQL

注意：这是*正确*的自然键：`enrolment_id`由于数据库架构，它是在实现时添加的代理项。在任何设计或建模过程中都没有强制要求

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-03T13:55:52.363

添加唯一约束。从[这里](http://www.w3schools.com/sql/sql_unique.asp)：

> 要允许命名 UNIQUE 约束并在多个列上定义 UNIQUE 约束，请使用以下 SQL 语法：
> 
> MySQL / SQL Server / Oracle / MS Access：

```
CREATE TABLE Persons
 (
 P_Id int NOT NULL,
 LastName varchar(255) NOT NULL,
 FirstName varchar(255),
 Address varchar(255),
 City varchar(255),
 CONSTRAINT uc_PersonID UNIQUE (P_Id,LastName)
 ) 
```

（修改以上您需要设置为唯一的列）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-03T13:54:16.640

您将只获得从此示例查询返回的行数：

`SELECT COUNT(*) FROM enrollment WHERE student_id = 'XYZ' AND subject = 'ABC' AND academic_period = 'DEF'`

如果返回的行数大于 0，则他们已经在学期间注册了该学科。

# proguard - 保护接口中的复制方法

> ID：10432833
> 
> 赞同：0
> 
> 时间：2012-05-03T13:52:16.603
> 
> 标签：proguard

反编译我的接口后，我发现proguard在上层接口中复制了我实现的方法，它本身就是一个类。

这是我的界面在混淆后的样子（请注意，proguard 甚至添加了实现中的注释）

```
package com.company.project.f.a.a;

import java.util.List;
import org.apache.log4j.Logger;

@Component(value="ServiceImpl")
public class a
{

    public b a(int i)
    {
        if((i = b.a(i)) != null)
        {
            if(i.size() == 0)
            {
                a_.fatal("It is expected at least one record.");
                return null;
            } else
            {
                return (b)i.get(0);
            }
        } else
        {
            return null;
        }
    }

    public a()
    {
        a_ = Logger.getLogger(getClass());
    }

    public com.company.project.b.a.a a()
    {
        return b;
    }

    public void a(com.company.project.b.a.a a1)
    {
        b = a1;
    }

    private com.company.project.b.a.a b;
    Logger a_;
} 
```

下面的类也发生了同样的问题（proguard 将接口转换为具有相同组件名称的类）

```
@Component("testDao")
public class TestDaoImpl implements TestDao {

    @Override
    public void testing() {
        // TODO Auto-generated method stub

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T08:54:57.690

解决了它：根据先生 eric lafortune，优化器正在合并接口和类。所以我用

```
-dontoptimize 
```

# api - 使用 Exchange 服务器作为 API 的桥梁？

> ID：10432839
> 
> 赞同：0
> 
> 时间：2012-05-03T13:52:44.893
> 
> 标签：api, exchange-server

有谁知道是否可以使用 Exchange 服务器作为 API 的桥梁？

在我的公司，我们有一些 API（如邮件、联系人、日历......）。我们正在寻找一种解决方案，以通过智能手机上的 API 同步联系人和日历（无需任何可选应用程序）。

例如，我将 Exchange 帐户添加到 iPhone。我选择同步我的联系人。我们希望 Exchange 服务器查询我们的联系人 API，该 API 将返回一个 Json 编码的响应。通过 Exchange 插件，我们可以将此响应转换为与 Exchange 格式匹配。

我们不想将任何数据存储到 Exchange 服务器中以避免冗余。

有人认为有解决方案吗？（我看到有 2 或 3 个用于 Exchange 的 SDK，但我没有找到有关我正在搜索的内容的一些信息。否则，我不是 Microsoft Exchange 专家：/）

对不起，我的英语不好 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T16:35:03.723

不，你不能那样做。Exchange 不会给您打电话，您有责任致电 Exchange 以请求现有数据或在 Exchange 邮箱之一中创建新项目。

# java - 使用 TabHelper 滑动切换选项卡

> ID：10432841
> 
> 赞同：0
> 
> 时间：2012-05-03T13:52:49.023
> 
> 标签：java, android

我正在创建一个需要在旧设备上使用的应用程序，我使用包含在[https://developer.android.com/training/backward-compatible-ui/index.html](https://developer.android.com/training/backward-compatible-ui/index.html)的源来创建选项卡，但我会喜欢能够使用滑动在它们之间切换。

现在我想我可能通过使用该培训文章中的 java 文件并将其修改为我的应用程序来搞砸一切，但我的应用程序完全按照我想要的方式工作，尽管没有刷卡。

那么，重新开始？或任何其他建议？

# wmi - 最大同时 WMI 查询？

> ID：10432844
> 
> 赞同：0
> 
> 时间：2012-05-03T13:52:54.800
> 
> 标签：wmi

对服务器的同时 WMI 查询是否有最大值或建议？我想知道，我可以同时向具有 WS 2008 R2 的系统发送多少个查询。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T09:50:33.230

不确定数字，但如果服务器没有响应，则可以创建多线程程序。

# android - 关闭对话框后系统调用适配器 getView()

> ID：10432849
> 
> 赞同：0
> 
> 时间：2012-05-03T13:53:05.977
> 
> 标签：android

我的活动包含一个 ListView。当我打开一个对话框（继承自 Dialog 的自定义对话框）时，适配器的 getView() 会被系统地调用，因此必须在某处调用 notifyDataSetChanged。我不希望每次关闭对话框时都刷新我的列表。我怎样才能防止这种情况？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T20:02:39.240

我有同样的问题，并认为我无能为力。

当它在 ListView 中可见时，我正在向我的一个视图添加一个 onClick。当时我不知道，但是视图的这种修改（在 getView 之后）导致 ListView 在显示或关闭对话框时在我的适配器上调用 getView()。（大概是为了视图测量）

由于我无法轻松地重新添加 onClick，因此我更改了代码以在 getView() 中添加 onClick 并且**之后没有修改视图**。

事实证明，现在因为我根本没有修改我的视图（在调用原始 getView() 之后），所以 getView() 不会在 Dialog show 上调用或关闭。

不确定这是否也解决了您的问题，但它可能对其他人有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T14:16:44.350

对我来说这听起来像是一个生命周期问题......就像当你从你的列表活动开始一个新活动，然后回到你的列表活动时......如果你的列表创建代码在 onResume 中，它将重新运行。

并不是说这真的是这里的问题，但没有看到你的代码，这是我能做出的最好的猜测。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-03T14:19:50.483

如果您不想设置通知数据集更改，那么您可以将数据临时保存在任何对象中，当您想要更新它时，只需将该数据保存到您传入列表视图的数组列表或字符串数​​组中，然后调用 notifydatasetchanged这样它只会在你想要的时候更新。如果您发布一些代码会更好，这样我们就可以确切地知道您想要做什么..

# java - 无法到达我的 OnClickListener 函数中的（最终）按钮

> ID：10432851
> 
> 赞同：0
> 
> 时间：2012-05-03T13:53:15.890
> 
> 标签：java, android

我这个片段的最终目标是：

1.  从按钮调用 Dialog(Interface)。
2.  让最终用户选择一个选项（在 5 个选项的列表中）
3.  将按钮文本更改为所选选项

目前我有这个：

```
public void onCreate(Bundle savedInstanceState) {
   setLayoutState();
   // rest of code omitted
} 
```

然后是设置按钮的 setLayoutState()

```
public void setLayoutState() {
    setContentView(R.layout.main);
    Button rate = (Button) findViewById(R.id.ratebutton);
    rate.setOnClickListener(onRatePress); 
} 
```

**所以在这里：** *setOnClickListener 调用一个单独的函数（为了保持干净，Activity 有很多按钮）*

```
private final View.OnClickListener onRatePress = new View.OnClickListener() {
public void onClick(View v) {

final ArrayAdapter<CharSequence> adapter = ArrayAdapter.createFromResource(
                context, R.array.rates, android.R.layout.select_dialog_item );
        adapter.setDropDownViewResource(android.R.layout.select_dialog_item);

        new AlertDialog.Builder(context).setTitle("Rate this item!")
       .setAdapter(adapter, new DialogInterface.OnClickListener() {

            public void onClick(DialogInterface dialog, int which) {
                Common.makeToast(context,adapter.getItem(which) + "", 3000);
                Button rate = (Button) findViewById(R.id.ratebutton);
                rate.setText(adapter.getItem(which)+"");
                // TODO: user specific action
                dialog.dismiss();
            }
        }).create().show();
    }
}; 
```

虽然**这很好**用，但我想知道是否有一种方法可以在**不**重新声明对话框的 onClick 内的按钮速率的情况下完成此操作

我已经尝试在顶部将按钮声明为最终按钮，但这不会让我在对话框的 onClick 中调用按钮。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T18:12:16.820

Java 中的变量有一个作用域。它始终在包含其声明的块（一对大括号 {} ）内以及该块包含的任何块中可用。但不是在外面。

因此，如果您在方法内声明按钮，则无法在此方法之外访问它。You 按钮只能在 drupappSetUploadLayout 内部访问。

如果您希望所有方法都可以访问它，则将其直接放在类主体中。这样的变量称为字段，所有方法都可以访问字段。

```
public class A {
  private Button b;

  public void foo() {
    b=null;
  }
} 
```

b 可以通过所有方法访问。

阅读更多关于 java 的基础知识，在开始使用 android 之前，您应该考虑制作小型 J2SDK 程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T13:57:43.737

作为参数的 View v 指的是被点击的按钮......所以你可以删除按钮的重新声明并使用

```
 ( (Button) v).setText(adapter.getItem(which)+""); 
```

# c# - Asmx 私有变量可见性

> ID：10432853
> 
> 赞同：0
> 
> 时间：2012-05-03T13:53:20.347
> 
> 标签：c#, web-services, asmx

我正在编写这个 ASMX Web 服务，我想使用一个类变量来管理我发回的响应消息。我只是想确保如果多个客户端同时调用 Web 服务，则私有变量不会在创建不稳定行为的客户端之间共享。这是示例代码：

注意变量message在这个类的所有web服务中都用到了，为了演示，我只放了一个简单的方法。

```
private string message;

[WebMethod]
        public DomainResponseMultiple FindAll(string user, string password, EntityEnum entity)
        {
            DomainResponseMultiple response;
            if (Authenticate(user, password, out message) && HasReadPrivileges(user, out message))
            {
                SelectAllTransaction transaction = new SelectAllTransaction(user, entity);
                response = (DomainResponseMultiple)transaction.Execute();
            }
            else
            {
                response = new DomainResponseMultiple();
                response.ResponseCode = ResponseCode.Error;
                response.Message = message;
            }
            return response;
        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T13:55:56.397

此变量将在会话范围内可用，根据用户，持续到他的会话，直到根据您的配置超时

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-03T13:56:41.943

只要它不是静态的，你就不应该有问题。

# php - 试图将文件上传到服务器，但 php 脚本没有获取文件详细信息

> ID：10432857
> 
> 赞同：0
> 
> 时间：2012-05-03T13:53:35.223
> 
> 标签：php, html, sql

我正在尝试将图像上传到服务器，然后获取该图像名称并将其插入 mysql 数据库。在我进入数据库位之前，上传不起作用。我已将其范围缩小到 $_FILES 数组中没有数据的事实，当我回显 $imageFileName 时它是空白的。

这是我的表格的一部分：

```
<form name="addItem" method="post" action="add-new-item.php">   
    <input name="name" placeholder="Portfolio Item Name" type="text" id="itemName"/><br />
    <input type="file" name="imageName" id="imageName" /><br />

</form> 
```

脚本，它是表单所在页面的一部分：

```
 $target = "images/";
   $target = $target . basename( $_FILES['imageName']['name']);        
   $imageFileName=($_FILES['imageName']['name']);

    if(move_uploaded_file($_FILES['imageName']['tmp_name'], $target)){

          echo "The file ". basename( $_FILES['uploadedfile']['name']). " has been uploaded, and your information has been added to the directory";
    }else {
          echo "Sorry, there was a problem uploading your file.";
    }

 $query1="INSERT INTO portfolio_items (item_name,full_size_image)  VALUES('$itemName','$itemImage')"; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-03T13:55:47.690

您需要在`<form>`标签中包含以下内容：

```
enctype="multipart/form-data" 
```

所以它会变成：

```
<form name="addItem" method="post" action="add-new-item.php" enctype="multipart/form-data"> 
```

[在这里记录得很好](http://www.php.net/manual/en/features.file-upload.post-method.php)-请参阅第一页底部的注释...

# windows-phone-7 - 带有自定义对象的 WP7 DesignData

> ID：10432861
> 
> 赞同：1
> 
> 时间：2012-05-03T13:53:46.410
> 
> 标签：windows-phone-7, xaml, data-binding

我正在为 Windows Phone 7.0 开发一个应用程序，并且我正在尝试添加一个示例设计数据文件，以便在使用 Visual Studio 时获得一些图形。String 或 int 类型工作正常，但自定义对象不行。

我解释 ：

我有一个这样的类：（代表我的自定义对象）

```
public class CustomObject
{
    public string Title { get; set; }
} 
```

这是我的视图模型：

```
public class MainViewModel
{
    public MainViewModel()
    {
        this.Custom= new CustomObject();
        this.Custom.Title = "Hey, i'm the Runtime Custom";
    }

    public CustomObject Custom{ get; set; }

    public string TestProperty { get; set; }
} 
```

我创建了一个这样的示例数据文件：

```
<local:MainViewModel 
    xmlns:local="clr-namespace:Project.ViewModels"
    TestProperty ="I'm the Design testProperty and I work">

    <local:MainViewModel.Custom Title="Hey, i'm the Design Custom, and I don't work" />

</local:MainViewModel> 
```

在我的应用程序的主页中，我在电话标签中添加了这个：

```
d:DataContext="{d:DesignData SampleData.xaml}" 
```

好吧，当我用这样的 TestProperty 变量进行测试时`Text="{Binding TestProperty}"`（`Text="{Binding Custom.Title}"`

我发现的所有资源都不能谈论自定义对象。

有人知道吗？

坦克。

PS：我尝试添加 DesignData 标签（最能描述我的问题）但我不允许:(

**编辑：** 没有编译，Visual Studio 不显示任何内容，当我编译时，它会显示`Hey, i'm the Runtime Custom`......它绕过我的示例数据文件，但仅适用于这个自定义对象。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-26T21:21:08.750

尝试这个：

```
<local:MainViewModel 
    xmlns:local="clr-namespace:Project.ViewModels"
    TestProperty ="I'm the Design testProperty and I work"
    xmlns:local2="clr-namespace:Project.NamespaceDefinitionOfTheCustomClass">

    <local:MainViewModel.Custom>
        <local2:Custom Title="Hey, i'm the Design Custom, and I don't work" />
    </local:MainViewModel.Custom>

</local:MainViewModel> 
```

如果你的类“Custom”没有在类“MainViewModel”的同一个命名空间中定义，那么像我一样添加命名空间声明，否则只删除它并将local2范围重命名为local；

这个对我有用。希望这对你有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T12:35:56.790

尝试稍微简单的：

```
<local:MainViewModel 
    xmlns:local="clr-namespace:Project.ViewModels"
    TestProperty ="I'm the Design testProperty and I work">

    <local:Custom Title="Hey, i'm the Design Custom, and I don't work" />
</local:MainViewModel> 
```

# php - jQuery / PHP - 不同的标签取决于 DIV 的值

> ID：10432865
> 
> 赞同：1
> 
> 时间：2012-05-03T13:53:55.940
> 
> 标签：php, jquery, wordpress

我有两个 div`<div class="number"></div>`和`<div class="label"></div>`.

我想设计一个 if/else 语句，这样如果“数字”中的值为 1，它会返回一个标签，例如“用户”，而如果数字是 2 或更高，它会更改为“用户” ”。

有没有办法检查 .number 的值，然后根据它返回标签？

此外，同一页面上将有 5 个“数字”和“标签”实例。每个数字将通过从数据库（Wordpress 自定义字段元）中查询其值来返回。

此外，每个实例的标签都不同，第一个可能是“用户”，而第二个可能是“产品”，等等。

我将如何做我需要的？

这是我的代码示例：

```
<div class="data-item employees">
     <div class="number"><?php echo $sc_data_employees; ?></div>
     <div class="label"></div>
</div>
<div class="data-item products">
     <div class="number"><?php echo $sc_data_products; ?></div>
     <div class="label"></div>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T13:56:42.447

试试这个：

```
var users = parseInt($(".number").text(),10);
var label = (users == 1) ? "user" : "users";
$(".label").text(label); 
```

如果用户数不是整数，例如`12.3456`，使用`parseFloat()`代替`parseInt()`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-03T14:02:56.203

尝试：

```
$('.number').each(function(){
    $(this).next('.label').html( ($(this).text()==1)?'user':'users');
});​​​​​​​​ 
```

这将遍历类号的所有元素并更改元素标签的下一个实例。根据 div 的排列方式，您可能需要将 .next() 更改为另一个函数。

**[jsFiddle 示例](http://jsfiddle.net/j08691/UQmL4/1/)**。

更新：根据您的修订，试试这个：

```
$('.number').each(function(){
    var plural = $(this).parent().attr('class').split(' ')[1];
    var singular = plural.substring(0, plural.length - 1);
    $(this).next('.label').html( ($(this).text()==1)?singular:plural);
});​ 
```

**[jsFiddle 示例](http://jsfiddle.net/j08691/UQmL4/4/)**。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-03T14:03:01.023

或者，您可以在使用 PHP 输出到浏览器之前执行此操作。

```
$number = 1; // The number from your database

$text = ($number == 1) ? "User" : "Users"; //

$output = '<div class="number">{$number}</div>
           <div class="label">{$text}</div>';

echo $output; 
```

# r - 如何更改按期间分类的日期时间格式

> ID：10432877
> 
> 赞同：0
> 
> 时间：2012-05-03T13:54:39.417
> 
> 标签：r, datetime

我需要你的帮助来解决我在 R 中的日期时间问题。

我在因子类中有一个日期时间，例如：

```
"02/02/2010 12:00" "02/02/2010 12:05" "02/02/2010 12:10" 
```

然后我只想选择时间，比如：`"12:00" "12:05" "12:10"`

我尝试先将因子转换为字符，然后再将其更改为日期类。我的目标是将时间范围分类为周期（晚上，中午，下午，晚上）

```
getPeriode <- function(RAYON) {
    Midi <- as.character.POSIXt("12:00", format ='%H:%M:%S') # Winter Solstice

    d <- as.character.POSIXt(HEURE, format='%H:%M:%S')

    ifelse (rayon < 10, "night",
            ifelse (d = Midi, "noon",
                ifelse (d >= Midi, "afternoon", "evening")))

} 
```

但是，它似乎不起作用.. :(

我想关键是当我们要输入数据时

```
d <- as.character.POSIXt(HEURE, format='%H:%M:%S') 
```

我真的很感谢你的帮助..谢谢之前..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T14:45:48.423

我经常发现日期和时间类的操作相当混乱，在这种情况下，我认为将变量作为字符串和整数处理会更容易。我不确定我是否理解您的所有代码，但这可能会激发您自己的解决方案。

```
datetime <- c("02/02/2010 07:00", "02/02/2010 08:05", "02/02/2010 11:00",
              "02/02/2010 12:10", "02/02/2010 16:10", "02/02/2010 23:10")
heure <- as.integer(substr(datetime, 12, 13))
conversion <- data.frame(datetime=datetime, heure=heure,
     period=cut(heure, c(-Inf, 7, 10, 12, 17, Inf),
                labels=c("night", "morning", "noon", "afternoon", "evening"))) 
```

给你

```
> conversion
          datetime heure    period
1 02/02/2010 07:00     7     night
2 02/02/2010 08:05     8   morning
3 02/02/2010 11:00    11      noon
4 02/02/2010 12:10    12      noon
5 02/02/2010 16:10    16 afternoon
6 02/02/2010 23:10    23   evening 
```

# sql - 在 SQL 查询中调整 NOT EXISTS 的最佳方法

> ID：10432883
> 
> 赞同：1
> 
> 时间：2012-05-03T13:54:55.140
> 
> 标签：sql, performance, netezza

我正在尝试调整查询中包含 NOT EXISTS 子句的 SQL。我的数据库是 Netezza。我尝试用 NOT IN 替换 NOT EXISTS 并查看了查询计划。两者在执行时间上看起来相似。有人可以帮我解决这个问题吗？我正在尝试调整一些 SQL 查询。提前致谢。

```
 SELECT   ETL_PRCS_DT, COUNT (*) TOTAL_PRGM_HOLD_DUE_TO_STATION
            FROM DEV_AM_EDS_1..AM_HOLD_TV_PROGRAM_INSTANCE D1
           WHERE NOT EXISTS (
                             SELECT *
                              FROM DEV_AM_EDS_1..AM_STATION
                              WHERE D1.STN_ID = STN_ID
                            ) 
 GROUP BY ETL_PRCS_DT; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T13:57:46.017

您可以尝试加入：

```
SELECT ETL_PRCS_DT, COUNT (*) TOTAL_PRGM_HOLD_DUE_TO_STATION
FROM DEV_AM_EDS_1..AM_HOLD_TV_PROGRAM_INSTANCE D1
LEFT JOIN DEV_AM_EDS_1..AM_STATION TAB2 ON D1.STN_ID = TAB2.STN_ID
WHERE TAB2.STN_ID IS NULL 
```

尝试比较执行计划。JOIN 可能会产生与您已有的相同的结果。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-03T14:52:02.573

您可以尝试加入，但有时需要小心。如果连接键在第二个表中不是唯一的，那么您最终可能会得到多行。以下查询负责处理此问题：

```
SELECT ETL_PRCS_DT, 
   COUNT (*) TOTAL_PRGM_HOLD_DUE_TO_STATION
FROM DEV_AM_EDS_1..AM_HOLD_TV_PROGRAM_INSTANCE D1 
left outer join
(
   select distinct STN_ID
   from DEV_AM_EDS_1..AM_STATION ams
) ams
  on d1.STN_ID = ams.STN_ID
WHERE ams.STN_ID is NULL 
```

# android - Http Put 请求

> ID：10432885
> 
> 赞同：0
> 
> 时间：2012-05-03T13:54:57.440
> 
> 标签：android, http, http-put

我正在使用 HttpPut 与 Android 中的服务器进行通信，我得到的响应代码是 500。在与服务器人员交谈后，他说准备如下所示的字符串并发送。

{“键”：“值”，“键”：“值”}

现在我完全困惑我应该在我的请求中在哪里添加这个字符串。

请帮帮我。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-19T15:02:51.903

我最近不得不想办法让我的 android 应用程序与 WCF 服务通信并更新特定记录。起初，这真的让我很难弄清楚，主要是因为我对`HTTP`协议知之甚少，但我能够`PUT`使用以下方法创建一个：

```
 URL url = new URL("http://(...your service...).svc/(...your table name...)(...ID of record trying to update...)");

    //--This code works for updating a record from the feed--
    HttpPut httpPut = new HttpPut(url.toString());
    JSONStringer json = new JSONStringer()
    .object() 
       .key("your tables column name...").value("...updated value...")
    .endObject();

    StringEntity entity = new StringEntity(json.toString());
    entity.setContentType("application/json;charset=UTF-8");//text/plain;charset=UTF-8
    entity.setContentEncoding(new BasicHeader(HTTP.CONTENT_TYPE,"application/json;charset=UTF-8"));
    httpPut.setEntity(entity); 

    // Send request to WCF service 
    DefaultHttpClient httpClient = new DefaultHttpClient();

    HttpResponse response = httpClient.execute(httpPut);                     
    HttpEntity entity1 = response.getEntity(); 

    if(entity1 != null&&(response.getStatusLine().getStatusCode()==201||response.getStatusLine().getStatusCode()==200))
    {
         //--just so that you can view the response, this is optional--
         int sc = response.getStatusLine().getStatusCode();
         String sl = response.getStatusLine().getReasonPhrase();
    }
    else
    {
         int sc = response.getStatusLine().getStatusCode();
         String sl = response.getStatusLine().getReasonPhrase();
    } 
```

话虽如此，有一个更简单的选择，即使用一个库，该库将为您生成更新方法，以允许您更新记录，而无需像我上面那样手动编写代码。似乎很常见的 2 个库是`odata4j`和`restlet`. 虽然我还没有找到一个清晰简单的教程，因为`odata4j`有一个`restlet`非常好的： [http ://weblogs.asp.net/uruit/archive/2011/09/13/accessing-odata-from-android -using-restlet.aspx?CommentPosted=true#commentmessage](http://weblogs.asp.net/uruit/archive/2011/09/13/accessing-odata-from-android-using-restlet.aspx?CommentPosted=true#commentmessage)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-08-29T01:36:23.770

错误 500 是内部服务器错误。~~不确定这是否能回答您的问题，但~~我个人在尝试在 JSON 格式的 PUT 请求中发送动画 gif 的数据 URI 但数据 URI 太长时遇到了这个问题。您可能一次发送了太多信息。

# math - 四舍五入 - 成一条规则

> ID：10432895
> 
> 赞同：2
> 
> 时间：2012-05-03T13:55:28.577
> 
> 标签：math, language-agnostic, rounding

我需要将一个数字舍入 1/32，然后将其舍入 1/100。我需要将其转换为一个单一的舍入规则（使用一个古老的程序......）。我可以乘除原始数字等等，只是不能四舍五入......

有没有办法在数学上做到这一点？

谢谢！

克罗斯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T14:23:12.433

如果您使用的任何东西都允许您定义函数，那么最易读的实现将是：

```
function round(x, interval){
    //implementation left as an exercise to the reader
}

#rounds x by interval1, then by interval2
function doubleRound(x, interval1, interval2){
    return round(round(x, interval1), interval2)
} 
```

但是，如果您只有简单的算术，您可以将所有内容展开到一个语句中。

要将非负数 x 舍入到最接近的 N 区间，可以使用以下公式：

```
round(x,N) = floor((x + (N/2)) / N) * N 
```

舍入两次，您将函数嵌套在自身中：

```
round(round(x, N1), N2) = floor(((floor((x + (N1/2)) / N1) * N1) + (N2/2)) / N2) * N2 
```

所以要四舍五入 1/32 然后 1/100，你使用：

```
floor(((floor((x + ((1/32)/2)) / (1/32)) * (1/32)) + ((1/100)/2)) / (1/100)) * (1/100) 
```

# php - 提交后停留在页面

> ID：10432908
> 
> 赞同：3
> 
> 时间：2012-05-03T13:55:56.437
> 
> 标签：php, jquery, html

就一个问题 -

我如何实际提交表单并在执行脚本时仍然停留在同一页面上？

我有一个简单的表格，如下所示：

```
<form action="process.php" method="post" id="form">
    <label for="name">Name</label>
    <input type="text" name="name" id="name" required="required" />
    <label for="email">Email</label>
    <input type="email" name="email" id="email" required="required" />
    <label for="subject">Subject</label>
    <input type="text" name="subject" id="subject" required="required" />
    <label for="message">Message</label>
    <input type="text" name="message" id="message" required="required" />
    <input type="submit" id="button" value="Submit"/>
</form> 
```

但每次我提交表单时，它都会转到 process.php。我不希望这样，我希望它保持在同一页面上，甚至可能有一个 jquery 弹出窗口说“谢谢”或其他东西。

在运行脚本时，我如何实际停留在同一页面上？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-03T13:58:07.543

1.  将表单处理逻辑与表单放在同一页面上
2.  使用 Ajax
3.  当 process.php 处理完表单后重定向回该页面

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-03T14:17:29.577

在这种情况下，您必须使用 ajax。

基本上，您需要使用 ajax 发布所有数据。在服务器端，您需要像在服务器脚本中通常那样使用 $_POST['name'] 获取所有参数。

形式

```
<form action="process.php" method="post" id="form">
    <label for="name">Name</label>
    <input type="text" name="name" id="name" required="required" />
    <label for="email">Email</label>
    <input type="email" name="email" id="email" required="required" />
    <label for="subject">Subject</label>
    <input type="text" name="subject" id="subject" required="required" />
    <label for="message">Message</label>
    <input type="text" name="message" id="message" required="required" />
    <input type="button" id="button" value="Submit"/>
</form>

<div id="dialog-message" title="Thank You">
    <p>Your message here</p>
</div>

​ 
```

查询

```
$(document).ready(function(){

    $('#dialog-message').dialog({
        modal: true,
        autoOpen: false,
        buttons: {
            Ok: function() {
                $(this).dialog("close");
            }
        }
    });

    $('#button').on('click', function() {
        var name = $('#name').val();
        var email = $('#email').val();
        var subject = $('#subject').val();
        var message = $('#message').val();
        var dataString = 'name=' + name + '&email=' + email + '&subject=' + subject + '&message=' + message;
        $.ajax({
            type: "POST",
            url: "process.php",
            data: dataString,
            success: function() {
                alert('');
                $('#dialog-message').dialog('open');
            }
        });
    });
});​ 
```

[请参阅此处](http://jsfiddle.net/GqL48/2/)的示例

请注意，不要忘记放置 jquery 参考和 jquery ui 参考

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-03T14:29:42.367

我认为约翰·康德给出了最好的答案。

我会这样做，以便显示表单的 php 文件也处理 $_POST 或者如果你不能这样做，那么在 Ajax 中使用类似于以下的代码进行处理：

```
$("#form").bind("submit", function() { 

var nameTxt = $("#name").val();
var emailTxt = $("#email").val();
$.post('process.php', 
    {
        name: nameTxt,
        email: emailTxt
    }, 
    function(data) {
                if (data == 'ko')
                    alert('Could not submit...');
                else {
                    alert('Thank you for your message.');
                }
            });
return false;
} 
```

它的作用是在您单击提交按钮时“阻止”表单的常规提交，检索输入值并将它们发送到 process.php 脚本。

它假设你的“process.php”做了一个

```
 echo "ko"; 
```

如果有错误。在表单成功发送后，您可以通过重置输入来进行一些表单清理：

```
$("#name").val('');
$("#email").val(''); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-03T13:57:53.050

假设您使用的是 jquery：

```
$(document).ready(function(){
  $('#form').submit(function(e){
    // do some ajax request to process.php here...

    // stop the form doing its default action of submitting directly to process.php
    e.preventDefault();
  });
}); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-03T14:00:00.603

尝试这样的事情

```
 action="<?php print $_SERVER["PHP_SELF"]; ?>" (or) action="" 
```

编辑：

```
 <?php
         if(isset($_POST['Submit'])){
             //do your validation or something here
             header("location:Process.php");

             } 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2016-04-24T01:10:40.917

我瞄准了一个 iframe 来解决这个问题，它工作得很好。

```
<form name="contact" role="form" method="post" action="contact.php" target="my_iframe">

  Feild 1: <input name="feild1" id="feild1" type="text" placeholder="Lorem ipsum dolor"><br/><br/>
  Feild 2: <input name="feild2" id="feild2" type="text" placeholder="Lorem ipsum dolor"><br/><br/>
  Feild 3: <textarea name="feild3" id="feild3" rows="5" type="text" placeholder="Lorem ipsum dolor, sit amet."></textarea><br/><br/>
  <input type="submit">

</form>

<!-- target iframe to prevent redirection to 'contact.php' -->
<iframe name="my_iframe" width="1" height="1" style="border:none"></iframe>
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-05-03T13:59:26.763

字面上地：

```
<form action="process.php" method="post" id="form" target="_blank">
                                                   ^^^^^^^^^^^^^^^^ 
```

这将使浏览器停留在同一页面上，即使表单已提交。

但是您更有可能寻找 AJAX，[一些 Introduction](http://www.switchonthecode.com/tutorials/simple-ajax-php-and-javascript)。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-05-03T14:00:44.113

为此，您需要 jquery ajax，请参见此处[$.post](http://api.jquery.com/jQuery.post/)

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-05-03T14:01:57.077

你可以做这样的事情（使用 jQuery，未经测试）

```
$(function() {
    $("#form").submit(e) {
        // Prevent regular form submission
        e.preventDefault();

        // Submit the form via AJAX
        var $form = $("#form");
        $.post(
            $form.attr("action"),
            $form.serialize(),
            function() { alert("Done!"); }
        );
   }
} 
```

# iphone - DejalActivityView 和指标视图错误

> ID：10432918
> 
> 赞同：1
> 
> 时间：2012-05-03T13:56:46.440
> 
> 标签：iphone, objective-c, ios, xcode, uiactivityindicatorview

我正在尝试在我的应用程序中集成 dejalactivityview 指示器视图，我遇到了这个错误：

```
Undefined symbols for architecture i386:
   "_OBJC_CLASS_$_DejalActivityView", referenced from:
  objc-class-ref in WelcomeMessage.o
ld: symbol(s) not found for architecture i386
 clang: error: linker command failed with exit code 1 (use -v to see invocation) 
```

这个库很容易集成，我很确定我做的一切都是正确的：添加了 .m 和 .h 文件，我的项目启用了 ARC，这就是我调用该方法的方式：

```
[DejalActivityView activityViewForView:self.view]; 
```

很简单，不是吗？仍然无法正常工作...感谢您的帮助！

更新：

我试过这个：

```
 DejalActivityView *testvc;
[testvc activityViewForView:self.view]; 
```

但是我收到一个错误（在编译之前）“没有可见的@interface for "DejalActivityView" 声明选择器'activityViewForView:self.view'”

![在此处输入图像描述](../Images/b29dc98f437ecce3f8bd1b99a12eef14.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-12T06:30:46.980

好的，我刚才得到了同样的东西。似乎如果您只是将 .m 和 .h 文件拖到您的项目中，则 .m 文件不会被添加为链接到您的项目的源，因此会出现链接错误。为我解决这个问题的方法是将 DejalActivityView.m 源文件添加到项目目标的“构建阶段”下的“编译源”部分。换句话说，转到 Project Navigator 并单击最上面的项目，然后选择“Build Phases”选项卡，然后将 .m 文件添加到“Compile Sources”部分。再次构建并运行您的项目，这次它不应该出现链接器错误！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-03T14:00:01.290

你的班级名称是什么？如果再次不起作用，请确保您拼写正确，然后更改类名。cz 有时您的类名与项目中已使用的某些内置名称或某些方法名称匹配

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-03T14:04:31.347

检查您是否实际复制了 .m 和 .h 文件，或者您只是在引用它们。如果您没有将这些文件复制到项目文件夹，编译器可能无法编译它们。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-03T14:42:05.760

检查这个

```
"no visible @interface for "DejalActivityView" declares selector 'activityViewForView:self.view'" 
```

`reply:-`不需要 DejalActivityView 的属性

请将此文件导入您的视图控制器.m

```
#import "DejalActivityView.h" 
```

并在 viewdidload 中编写此代码并检查

```
[DejalActivityView activityViewForView:self.view]; 
```

如果您在实施后有任何错误，请[从此链接](http://www.dejal.com/developer/)下载并实施，我使用并工作我的代码

# vb.net - 在 VB.NET 中使用后台工作程序以后台模式加载数据

> ID：10432919
> 
> 赞同：0
> 
> 时间：2012-05-03T13:56:48.433
> 
> 标签：vb.net, multithreading

我使用来自 SQLite 数据库的查询作为 ComboBox 的 AutocompleteCustomSource。另外，我想在单独的线程中加载数据。我的 LoadData 方法在直接调用时工作正常，但在从 BackgroundWorker 线程调用时会失败。当从后台线程调用它时，它会在行**`Specified cast is not valid`**上抛出异常`csearch.AutoCompleteCustomSource.Add(hh("Taj"))`。下面是我的代码：

```
Sub LoadData()

        Dim connetionString As String
        Dim cnn As SQLiteConnection
        connetionString = "Data Source=" + Application.StartupPath + "\Mydatabase.db;"
        cnn = New SQLiteConnection(connetionString)
        cnn.Open()
        Dim sqlComm88 As New SQLiteCommand("SELECT Taj FROM Taj_deu ", cnn)
        Dim hh As SQLiteDataReader = sqlComm88.ExecuteReader()
        While hh.Read()
            csearch.AutoCompleteCustomSource.Add(hh("Taj"))
        End While

    End Sub

Private Sub BackgroundWorker1_DoWork(ByVal sender As System.Object, ByVal e As System.ComponentModel.DoWorkEventArgs) Handles BackgroundWorker1.DoWork

        Call loaddata()

    End Sub

 Private Sub Button3_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Button3.Click
        BackgroundWorker1.RunWorkerAsync()

    End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T15:06:29.280

奇怪的是它会出现转换错误，但问题是您正在从工作线程访问 ComboBox 的属性。您永远不应该从另一个线程访问控件或表单。您需要在 UI 线程上完成所有 UI 工作。典型的方法是使用窗体或控件的`Invoke`方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T14:04:04.387

我们需要知道它在哪一行失败，但一目了然，尝试使用 & 符号而不是加号来连接 VB 中的字符串。

```
connetionString = "Data Source=" & Application.StartupPath & "\Mydatabase.db;" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-03T14:24:20.983

改变：

```
 csearch.AutoCompleteCustomSource.Add(hh("Taj")) 
```

至：

```
 csearch.AutoCompleteCustomSource.Add(hh("Taj").ToString()) 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-05-03T14:18:15.163

是的，使用与号而不是加号。VB.net 不将 + 解释为连接（加号用于基于 C 的语言）。如果这不能解决您的错误，请在代码周围使用“try catch”块进行测试。请参阅下面的示例。

在 catch 上添加一个断点。使用手表检查有关错误的所有信息。

# c++ - 如何知道重载赋值运算符中的代码是否执行？

> ID：10432923
> 
> 赞同：2
> 
> 时间：2012-05-03T13:56:56.330
> 
> 标签：c++, assignment-operator

我有以下代码：

```
class Sales_item {
     public:
     int ii;
         Sales_item& operator=(const Sales_item &item)
     {
        cout << "Inside assignment\n"; // Line 1
        ii = item.ii;
        return *this; // Line 2
     }
}; 
```

然后，我做了：（只是一个例子）

```
Sales_item s;
Sales_item s1 = s; 
```

但是`Line 1`没有执行。如何“查看”重载赋值中的代码以执行？例如，可能有复杂的代码，我想调试？我试图在第 1 行设置断点，但程序没有跳转到该断点。

为什么`Line 2`退货`*this`？我试图改变`void`并得到相同的结果。有什么不同？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-03T13:57:34.533

您正在初始化`s1`，而不是分配给它。

```
Sales_item s1 = s; 
```

调用编译器生成的**复制构造函数**。它相当于：

```
Sales_item s1(s); 
```

你需要：

```
Sales_item s1;
s1 = s; 
```

为什么`Line 2`退货`*this`？- 这是实现赋值运算符的惯用方式，我建议你坚持下去。它有助于方法和操作链接。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-03T13:59:59.553

关于问题 2：您返回 *this 是为了启用链式分配，例如 s1 = s2 = s3 = ...

# c# - Parallel.ForEach finally 子句

> ID：10432926
> 
> 赞同：1
> 
> 时间：2012-05-03T13:57:00.093
> 
> 标签：c#, .net, c#-4.0, parallel-processing

我想知道是否有`finally`我可以在 a 中使用的 a `Parallel.ForEach`？

```
try
{
}
finally
{
} 
```

这是可能的`Parallel.ForEach`吗？

**当循环完成时，我需要做一个 finally。**

```
Parallel.ForEach(someList, x =>
{
    //...
}, // Now i need to do a finally); 
```

我的问题是我终于在我的 Parallel.ForEach 周围进行了尝试，但我不希望 finally 发生。它必须仅在并行任务完成时发生。

所以这对我不起作用：

```
try
{
   Parallel.ForEach(someList, x =>
   {
      //...
   });
}
finally
{
} 
```

是否有另一种方法可以做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-03T13:58:39.667

循环并且`finally`不要一起使用（可能在[Python](https://stackoverflow.com/q/743164/21567)中除外）。您只需编写代码以在循环之后运行，好吧，在循环之后。

如果您想运行它而不考虑循环中的异常，请执行以下操作：

```
try
{
   Parallel.ForEach(...)
}
finally
{
   // ...
} 
```

再想一想，可能是使用此 Parallel.ForEach[重载](http://msdn.microsoft.com/en-us/library/dd991486.aspx)的 OP ，它允许您提供“localFinal”操作，只要线程（用于执行循环的另一次迭代）完成，就会调用该操作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-03T14:00:01.597

`try .. finally`您可以在并行执行的操作内部或外部放置一个块：

```
Parallel.ForEach(someList, x =>
{
    try
    {
    }
    finally
    {
    }
}); 
```

或者：

```
try
{
    Parallel.ForEach(someList, x =>
    {
    });
}
finally
{
} 
```

这取决于您的用例，从问题中并不清楚。

# vba - 从给定单元格右侧的范围中选择值并从它们迭代地创建一个子文件夹

> ID：10432930
> 
> 赞同：4
> 
> 时间：2012-05-03T13:57:12.317
> 
> 标签：vba, excel, filesystems

一切顺利。

我正在尝试使用 Excel 和 vba 创建一个海量文件夹创建器。这是我第一次使用 VBA，因为我通常专注于基于 Web 的语言，所以请原谅我事先缺乏知识。我已经有一些代码，它只是在完成我正在努力的最后润色。

当前，用户在给定单元格中指定目录，在另一个单元格中指定父文件的名称。单击按钮后，宏将使用父文件单元格中的目录和名称创建父文件夹。然后，它使用受访者在运行宏时选择的任何单元格的值创建子文件夹。

我目前正在努力处理项目的下一阶段，即在子文件夹中创建子文件夹（我将称之为孙子文件夹）。如果所有子文件夹都有相同的孙子，这将很容易，但事实并非如此。我想做的是获取每个单元格右侧的 3 个值，这些值定义了子文件夹的名称，并使用它们来创建孙子，但是我目前正在使用我当前使用的代码收到“无效的限定符”消息（见下文）。

```
BasePath = Range("folder_path")

'Check if the project folder already exists and if so raise and error and exit
If Dir(BasePath, vbDirectory) <> "" Then
MsgBox BasePath & " already exists", , "Error"
Else

'Create the project folder
MkDir BasePath

MsgBox "Parent folder creation complete"

'Loop through the 1st tier subfolders and create them
For Each c In ActiveWindow.RangeSelection.Cells
    'create new folder path
    NewFolder = BasePath & "\" & c.Value
    'create folder

    If fs.folderexists(NewFolder) Then
        'do nothing
    Else
        MkDir NewFolder
    End If

Next c

'Create GrandChildren
For Each d In ActiveWindow.RangeSelection.Cells
    'Offset the selection to the right

    For Each e In d.Offset(0, 1).Resize(1, 3).Cells

    Test = e.Value
    GrandChild = BasePath & "\" & d.Value & "\" & Test

    If fs.folderexists(GrandChild) Then
        'do nothing
    Else
        MkDir GrandChild
    End If

Next e
Next d

MsgBox "Sub-folder creation complete"

End If

End Sub 
```

如果您需要任何进一步的信息，请告诉我。

干杯，

杰森

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-03T14:22:43.243

我认为你的问题在这里

`Test = d.Offset(0, 1).Select`

测试是一个字符串，您正在选择一个单元格。你应该试试这个：

```
Test = d.Offset(0,1).Value 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-03T17:03:57.677

您可能会发现这很有用，这是我用来将整个路径中的所有文件夹输入函数的简单例程。

例子：

1.  C:\2011\测试\
2.  C:\2012\测试
3.  C:\2013\Test\DeepTest\
4.  C:\2014\Test\DeeperTest\DeeperStill

根据上面的列表，这个宏将尝试创建 11 个目录，这些目录已经存在......没问题。

```
Option Explicit

Sub MakeDirectories()
'Author:    Jerry Beaucaire, 7/11/2010
'Summary:   Create directories and subdirectories based
'           on the text strings listed in column A
'           Parses parent directories too, no need to list separately
'           10/19/2010 - International compliant
Dim Paths   As Range
Dim Path    As Range
Dim MyArr   As Variant
Dim pNum    As Long
Dim pBuf    As String
Dim Delim   As String

Set Paths = Range("A:A").SpecialCells(xlConstants)
Delim = Application.PathSeparator
On Error Resume Next

    For Each Path In Paths
        MyArr = Split(Path, Delim)
        pBuf = MyArr(LBound(MyArr)) & Delim
        For pNum = LBound(MyArr) + 1 To UBound(MyArr)
            pBuf = pBuf & MyArr(pNum) & Delim
            MkDir pBuf
        Next pNum
        pBuf = ""
    Next Path

Set Paths = Nothing

End Sub 
```

这里也有一个 UDF 版本和一个用于测试的示例[文件](https://sites.google.com/a/madrocketscientist.com/jerrybeaucaires-excelassistant/text-functions/make-folders)。供参考。

# javascript - 使用 jQuery 自动调整图像大小以适应容器

> ID：10432935
> 
> 赞同：1
> 
> 时间：2012-05-03T13:57:22.083
> 
> 标签：javascript, jquery, css, image

我正在尝试构建一个脚本，该脚本可以对大于容器的图像进行浏览器调整：

```
 $('img').each(function(i){
    var parent_width = parseInt($(this).parent().width()),
        image_width = parseInt($(this).width());

    if(parent_width !== image_width){
      $(this).width(parent_width).wrap(
         '<a class="resized-image" href="' + this.src + '">'
       + ' <span class="msg">'
       + '   This image has been resized to ' + parent_width + ' pixels'
       + '   and ' + $(this).height() + ' pixels'
       + '</span>'
       + '</a>'
      );
    }
  }); 
```

调整大小有效，但我怎样才能在那里得到一个很好的消息，告诉用户原始图像大小、图像调整大小的百分比以及原始图像大小（以 KB 为单位）？

喜欢

> 此图像已调整为 400 x 300 (50%)。原始图像有 800 x 600 和 75 KB。点击查看原文

到目前为止，我只能计算出调整后图像的宽度（height() 由于某种原因返回 0）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T14:38:19.410

用 $(window).load 包装你的代码

```
$(window).load(function() {
     // your code
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-03T16:37:13.973

尝试这个：

```
$('img').one('load', function () {

    var parent_width = parseInt($(this).parent().width()),
        image_width = parseInt($(this).width());

    if(parent_width !== image_width){
      $(this).width(parent_width).wrap(
         '<a class="resized-image" href="' + this.src + '">'
       + ' <span class="msg">'
       + '   This image has been resized to ' + parent_width + ' pixels'
       + '   and ' + $(this).height() + ' pixels'
       + '</span>'
       + '</a>'
      );
    } 

});

$('img').each(function () {
     //If image is cached by browsers, trigger .load()
    if (this.complete){        
         $(this).trigger('load');
    }
 });
​ 
```

在[jsfiddler](http://jsfiddle.net/kibria/DgHRa/)中测试。

# objective-c - 调整 CAShapeLayer 的大小

> ID：10432936
> 
> 赞同：2
> 
> 时间：2012-05-03T13:57:22.930
> 
> 标签：objective-c, uiview, resize, cashapelayer

我有一个简单的测试应用程序，我的 rootViewController 的 UIView 包含一堆 UIView 子视图。这些 UIView 子视图中的每一个都由 CAShapeLayer 支持。

我希望这些子视图（虚线区域内的四个形状..）创建的[构图](http://i49.tinypic.com/dfdmjn.jpg)始终相对于我的 UIWindow 保持垂直和水平居中。（左/右，上/下边距的最小尺寸将在每次方向更改时在运行时更改）

因此，例如，当我旋转到[纵向](http://i50.tinypic.com/2nkuxr4.jpg)时，我将不得不调整这些单个形状的大小并重新定位，以使整个图形保持居中并且每个 CAShapeLayer 子层保持清晰（我希望调整它们的路径大小而不仅仅是光栅调整大小）

调整形状大小/移动形状以始终具有居中构图同时保持形状路径清晰外观的最佳技术是什么？

最终对我来说，最好有一个答案：我怎样才能缩小整个子视图？我的意思是它们的大小和相对位置？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T12:16:50.407

您可以使用`CGPathCreateMutableCopyByTransformingPath()`或`-[UIBezierPath applyTransform:]`重新计算路径中的所有点。

# php - PHP与XML融合，正确编码特殊字符

> ID：10432937
> 
> 赞同：1
> 
> 时间：2012-05-03T13:57:24.597
> 
> 标签：php, xml, regex

我有一个输出大量信息的数据库。我目前正在构建一个 PHP 应用程序，以将此数据库构建为 XML 格式，以供另一个应用程序读取。

我有点卡在特殊字符上。
在数据库中，一些字符打印得很奇怪：

Ø变为 Ã~
° 变为 Â°

我正在使用 fwrite() 在 PHP 中编写 XML 文件，我认为错误以某种方式存在。

我需要一种方法来克服这个问题，也许是通过检测这些字符出现的位置并适当地替换它们。

我正在使用 PHP，但我不确定如何逐个替换这些字符，更重要的是，我不确定用什么替换它们！

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-03T14:04:31.957

`Ø`变成`Ã˜`，`°`变成`Â°`

看起来 UTF-8 编码的字符被传递到某个显示设备，并被告知显示设备这些是 ISO-8859-X 或 Windows-125X 编码的字符。

告诉显示设备这确实是 UTF-8（默认情况下是 XML 的标准编码）。

# sql-server - 如何 LTRIM/RTRIM 特定字符？

> ID：10432942
> 
> 赞同：2
> 
> 时间：2012-05-03T13:57:40.303
> 
> 标签：sql-server, sql-server-2008, tsql, sql-server-2005

**例如**，我有这个`nvarchar`字符串：

 **```
declare @s as nvarchar(max)
set @s = '  ##a# bc##   ###' 
```

所以我需要修剪空格和`#`字符。
我怎么才能回来`'a# bc'`呢？

（前导和尾随的数量`#`可能会有所不同）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-03T14:47:46.727

假设 abc 部分只由数字和字母组成：

```
DECLARE @s NVARCHAR(50)
SET @s = ' ##a# bc### '

SELECT 
SUBSTRING(@s,PATINDEX('%[A-Za-z0-9]%',@s),LEN(@s) - PATINDEX('%[A-Za-z0-9]%',REVERSE(@s)) -1) as string2 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-03T15:07:42.810

您可以使用以下通用函数来剪切任意前导和尾随字符，只需调用

```
dbo.LTrimX(dbo.RTrimX(' ##a# bc### ', ' #'), ' #') 
```

这里是 UDF（改编自[这里](http://blog.sqlauthority.com/2008/10/10/sql-server-2008-enhenced-trim-function-remove-trailing-spaces-leading-spaces-white-space-tabs-carriage-returns-line-feeds/)）：

```
CREATE FUNCTION dbo.LTrimX(@str VARCHAR(MAX), @trimchars VARCHAR(255)) RETURNS VARCHAR(MAX)
     AS
     BEGIN  
     IF @str LIKE '[' + @trimchars + ']%'
     SET @str =STUFF ( @str , 1 , PATINDEX('%[^' + @trimchars + ']%', @str)-1 , '')
     RETURN @str
END

CREATE FUNCTION dbo.RTrimX(@str VARCHAR(MAX), @trimchars VARCHAR(255)) RETURNS VARCHAR(MAX)
     AS
     BEGIN
     IF @str LIKE '%[' + @trimchars + ']' 
     SET @str = REVERSE(dbo.LTrimX(REVERSE(@str), @trimchars))
     RETURN @str
END
GO 
```**

# facebook-graph-api - 图形 API 不工作

> ID：10432947
> 
> 赞同：-1
> 
> 时间：2012-05-03T13:57:58.433
> 
> 标签：facebook-graph-api

我刚开始使用 Graph API 并让它登录，但不进行图形 api 调用。我已经设置了委托（我认为），但它没有回调我实现的委托方法。这是我的代码：

```
#import <UIKit/UIKit.h>
#import "Profile.h"
#import "AppDelegate.h"
#import "FBRequest.h"
@interface HomeViewController : UITableViewController <FBRequestDelegate>
{
    Profile *profile;
    AppDelegate *appDelegate;
}
- (void)request:(FBRequest *)request didLoad:(id)result;

@end 
```

执行：

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    profile = [[Profile alloc] initWithUserId:1];
    [profile refreshMatchesWithCallback:^ 
     {
             [self.tableView reloadData];
     }];   

    [appDelegate.facebook requestWithGraphPath:[NSString stringWithFormat: @"me", appDelegate.facebook.accessToken] andDelegate:self];
    [[appDelegate facebook] requestWithGraphPath:@"me" andDelegate:self];
    // Uncomment the following line to preserve selection between presentations.
    // self.clearsSelectionOnViewWillAppear = NO;

    // Uncomment the following line to display an Edit button in the navigation bar for this view controller.
    // self.navigationItem.rightBarButtonItem = self.editButtonItem;
}

- (void)request:(FBRequest *)request didLoad:(id)result {
    NSLog(@"%@", result);
}

- (void)request:(FBRequest *)request didFailWithError:(NSError *)error {
    NSLog(@"erre");
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T18:47:21.027

从我所看到的 - 看起来你还没有初始化你的应用程序委托。

类似的东西：

```
appDelegate = (AppDelegate *)[[UIApplication sharedApplication] delegate]; 
```

您的 appDelegate 变量尚未初始化 - nil 也是如此。

注意：我是基于您尚未在其他任何地方初始化应用程序委托的假设。

# windows-phone-7 - 当滚动条可见性设置为禁用时，如何防止 Scrollviewer 向后滚动？wp7

> ID：10432948
> 
> 赞同：0
> 
> 时间：2012-05-03T13:58:05.437
> 
> 标签：windows-phone-7, uiscrollview

我在 WP7 中创建了一个 Scrollviewer，它包含 3 个用户控件，每个用户控件都保存为 XAML 创建的用户控件的内容。这工作正常。此滚动查看器应该能够在这些项目之间滚动，但使用户无法滚动。因此，当单击这些内容之一中的项目时，滚动查看器会根据所选项目向左或向右滑动，并显示其他用户控件之一。我使用调解器来完成此操作：

```
<Grid.Resources>
        <Storyboard x:Name="ItemAnimation">
            <DoubleAnimation x:Name="ItemAnimationContent"
                             Storyboard.TargetName="Mediator"
                             Storyboard.TargetProperty="ScrollableWidthMultiplier"/>
        </Storyboard>
</Grid.Resources> 
<ScrollViewer Name="ScrollableItemPanel" 
                  Grid.Row="2" 
                  Grid.RowSpan="3" 
                  Grid.ColumnSpan="3"
                  VerticalScrollBarVisibility="Disabled"
                  HorizontalScrollBarVisibility="Disabled">

        <StackPanel Orientation="Horizontal">
            <UserControl    Name="NewsListBoxControl" Width="480" />
            <UserControl    Name="DetailedItemControl" Width="480"/>            
            <UserControl    Name="ExternalBrowserItemControl" Width="480"/>
        </StackPanel>
    </ScrollViewer>

    <local:ScrollableItemAnimationMediator x:Name="Mediator" 
                                           ScrollViewer="{Binding ElementName=ScrollableItemPanel}"/> 
```

基本上，这也很好用，我可以在项目之间导航，并将内容作为用户控件加载到它们上面。但问题在于授予用户滚动的能力。在项目滚动之前，我将 hittestvisibilty 设置为 true，并将 Horizo​​ntalscrollbarvisibility 设置为可见。动画完成后，我想授予 hittestvisibility 并再次将 Horizo​​ntalscrollbarvisibility 设置为 Disabled。后者是问题所在：当我将 Horizo​​ntalscrollbarvisibility 设置为 Disabled 时，scrollviewer 会自动将堆栈面板中的三个项目中的第一个带回到视图中。我怎样才能阻止这个？这是我用来滚动中介的代码：

```
private void CreateDetailedArticleItem( Dictionary<string, string> itemQuery )
    {
        _articleDetailPage.ItemQuery = itemQuery;
        DetailedItemControl.Content = _articleDetailPage as UserControl;
        Animate( _articleDetailPage, 0.0f, 0.5f, 250 );
    }

private void Animate( IContentControl control, float from, float to, double milliseconds )
    {                                                                                                                            
        //this eventhandler will fire when the animation has completed
        EventHandler handler = null;
        //we take away the User Input just for the moment, so that we can animate without the user interfering. Also, we make horizontalScroll Visible
        IsUserEnabled = false;

        //we then set the content of the animation. Where from will it move, towards where and in what duration?
        ItemAnimationContent.From = from;
        ItemAnimationContent.To = to;
        ItemAnimationContent.Duration = TimeSpan.FromMilliseconds( milliseconds );
        //we start the animation
        ItemAnimation.Begin( );

        //we tell the new control that it will appear soon, so it can load its main content
        control.ViewWillAppear( );
        //also, we tell the currentcontrol that it will disappear soon, so it can unload its content and eventhandlers and so on
        CurrentControl.ViewWillDisAppear( );

        //the handler is a delegate. This way, it becomes rather easy and clean to fire the completed event, without creating a strong reference ( well, actually,
        //we do create a strong reference, but as soon as it is fired, we remove it again, shhhh! ).
        handler = delegate( object sender, EventArgs e )
        {
            //as stated, we remove the eventlistener again, so it won't keep firing all the time
            ItemAnimation.Completed -= handler;

            //after the animation, we tell the new control that it is now in screen, and can start downloading its data
            control.ViewDidAppear( );
            //at the same time, the "current" control has fully moved out of view, so it can now fully unload all its content.
            CurrentControl.ViewDidDisAppear( );
            //now, all we have to do is to make sure that the next time an item is being loaded, the new content is spoken to, not the old one
            CurrentControl = control;

            //and finally, enable the users input again, and remove the horizontal scrollbarvisibility
            IsUserEnabled = true;                
        };            
        ItemAnimation.Completed += handler;
    }
 private bool IsUserEnabled
    {
        set
        {
            //when the user can control the scrollviewer, then the horizontal scrollvisibility is disabled, so that the user cannot move horizontally,
            //otherwise, so we only make it visible when the program needs to animate.
            ScrollableItemPanel.IsHitTestVisible = value;
            ScrollableItemPanel.HorizontalScrollBarVisibility = value ? ScrollBarVisibility.Disabled : ScrollBarVisibility.Visible;
        }
    } 
```

我已经问过这个问题，然后将其视为已回答，因为我认为它已回答，即使用 ScrollbarVisibility.Hidden 而不是 ScrollbarVisibility.Disabled，只有滚动条可见性保持可见，并且用户仍然可以滚动。有没有办法解决这个问题？

任何帮助将不胜感激。格雷茨

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T08:40:54.710

与其对抗本机控件的行为，不如使用自定义控件（包装您的其他控件）自己操纵项目的位置可能更容易，该控件根据“选定”项目在不同的视觉状态之间进行动画处理（调整平移变换） .

# c# - 是否可以从桌面应用程序访问 Silverlight 应用程序隔离存储？

> ID：10432954
> 
> 赞同：1
> 
> 时间：2012-05-03T13:58:24.770
> 
> 标签：c#, silverlight, isolatedstorage

我有一个 Silverlight 应用程序，它在其独立存储中创建日志文件，我想创建一个可以从独立存储中收集日志文件的客户端工具（一个单独的桌面应用程序，即 WinForm、WPF）。

据我了解，隔离的存储路径位于[本网站](http://kalpesh2804.blogspot.ca/2011/06/silverlight-isolated-storage-folder-out.html)所说的文件夹路径中，它们的文件夹名称和应用程序的路径非常随机。

所以我想使用[IsolatedStorageScope](http://msdn.microsoft.com/en-us/library/dwc9b5sy.aspx)方法来访问我的Silverlight 应用程序隔离存储。但我相信我需要参数**assemblyIdentity**才能获得访问权限。

在msdn中，参数只描述为：

```
assemblyIdentityType: System.Object
An object that contains evidence for the code assembly identity. 
```

那么我应该通过什么来访问另一个应用程序隔离存储？还是我会走错方向，这是不可能的？

# android - 在一项活动中使用多个 onItemClick ..“重复方法”错误？

> ID：10432956
> 
> 赞同：2
> 
> 时间：2012-05-03T13:58:26.797
> 
> 标签：android, listview, mediastore, onitemclick

我制作了一个艺术家列表，点击后会显示专辑列表。这个想法是，一旦单击专辑，就会出现歌曲列表。

不幸的是，因为在这个活动中生成了两个列表视图，第二个“onItemClick”方法在 Eclipse 中被标记为“重复”。有谁知道如何解决这个问题？

这是主要的活动代码：

```
package music.library;

import android.app.Activity;
import android.database.Cursor;
import android.os.Bundle;
import android.provider.MediaStore;
import android.view.View;
import android.widget.AdapterView;
import android.widget.AdapterView.OnItemClickListener;
import android.widget.ListView;
import android.widget.SimpleCursorAdapter;

public class MusicLibrary extends Activity implements OnItemClickListener {
  Cursor cursor;
  @SuppressWarnings("deprecation")
  @Override
  public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    String[] columns = { 
            MediaStore.Audio.Artists._ID,
            MediaStore.Audio.Artists.ARTIST };

    cursor = managedQuery(MediaStore.Audio.Artists.EXTERNAL_CONTENT_URI,
        columns, null, null, null);

    ListView listView = (ListView) findViewById(R.id.listView);
    listView.setOnItemClickListener(this);
    String[] displayFields = new String[] { MediaStore.Audio.Artists.ARTIST };
    int[] displayViews = new int[] { R.id.artistItem };
    SimpleCursorAdapter adapter = new SimpleCursorAdapter(this,
        R.layout.artist_item, cursor, displayFields, displayViews);
    listView.setAdapter(adapter);

  }

  @SuppressWarnings("deprecation")
public void onItemClick(AdapterView<?> a, View v, int position, long id) {
    if (cursor.moveToPosition(position)) {

      String[] columns = {
          MediaStore.Audio.Media._ID,
          MediaStore.Audio.Media.ALBUM,
     };

      String where = android.provider.MediaStore.Audio.Media.ARTIST
          + "=?";

      String whereVal[] = { cursor.getString(cursor
          .getColumnIndex(MediaStore.Audio.Albums.ARTIST)) };

      String orderBy = android.provider.MediaStore.Audio.Media._ID;

      cursor = managedQuery(
          MediaStore.Audio.Albums.EXTERNAL_CONTENT_URI, columns,
          where, whereVal, orderBy);

      ListView listView = (ListView) findViewById(R.id.listView);
      String[] displayFields = new String[] { MediaStore.Audio.Media.ALBUM };
      int[] displayViews = new int[] { R.id.albumItem };
      SimpleCursorAdapter adapter = new SimpleCursorAdapter(this,
          R.layout.album_item, cursor, displayFields, displayViews);
      listView.setAdapter(adapter);

    }
  }

  @SuppressWarnings("deprecation")
public void onItemClick(AdapterView<?> a, View v, int position, long id) {
        if (cursor.moveToPosition(position)) {

            String[] columns = { 
                MediaStore.Audio.Media._ID,
                MediaStore.Audio.Media.DISPLAY_NAME,
            };

            String where = MediaStore.Audio.Media.ALBUM
                + "=?";

            String whereVal[] = { cursor.getString(cursor
                .getColumnIndex(MediaStore.Audio.Albums.ALBUM)) };

            String orderBy = MediaStore.Audio.Media._ID;

            cursor = managedQuery(
                MediaStore.Audio.Media.EXTERNAL_CONTENT_URI, columns,
                where, whereVal, orderBy);

            ListView listView = (ListView) findViewById(R.id.listView);
            String[] displayFields = 
                    new String[] { MediaStore.Audio.Media.DISPLAY_NAME };
            int[] displayViews = new int[] { R.id.songItem };
            SimpleCursorAdapter adapter = new SimpleCursorAdapter(this,
                    R.layout.song_item, cursor, displayFields, displayViews);
                listView.setAdapter(adapter);

    }
  }

} 
```

谢谢你的帮助。

- - 编辑 - -

谢谢你们的答案。虽然所有答案都很棒，但我选择了 dymmeh 的答案作为我的“接受”答案，因为将视图分成不同的活动似乎是最有意义的（即使这不是我所说的我在寻找的最初的问题）。

我最终创建了以下内容：

第一堂课，展示艺术家：

```
package music.library;

import android.app.Activity;
import android.content.Intent;
import android.database.Cursor;
import android.os.Bundle;
import android.provider.MediaStore;
import android.view.View;
import android.widget.AdapterView;
import android.widget.AdapterView.OnItemClickListener;
import android.widget.ListView;
import android.widget.SimpleCursorAdapter;

public class MusicLibrary extends Activity implements OnItemClickListener {
  Cursor cursor;
  @SuppressWarnings("deprecation")
  @Override
  public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    String[] columns = { 
            MediaStore.Audio.Artists._ID,
            MediaStore.Audio.Artists.ARTIST 
            };

    cursor = managedQuery(MediaStore.Audio.Artists.EXTERNAL_CONTENT_URI,
        columns, null, null, null);

    ListView listView = (ListView) findViewById(R.id.listView);
    listView.setOnItemClickListener(this);
    String[] displayFields = new String[] { MediaStore.Audio.Artists.ARTIST };
    int[] displayViews = new int[] { R.id.artistItem };
    SimpleCursorAdapter adapter = new SimpleCursorAdapter(this,
        R.layout.artist_item, cursor, displayFields, displayViews);
    listView.setAdapter(adapter); }

    public void onItemClick(AdapterView<?> a, View v, int position, long id) {
        if (cursor.moveToPosition(position)) {

            String where = android.provider.MediaStore.Audio.Media.ARTIST
          + "=?";

            String whereVal[] = { cursor.getString(cursor
          .getColumnIndex(MediaStore.Audio.Albums.ARTIST)) };

    Intent intent = new Intent(MusicLibrary.this, AlbumSelection.class);
    intent.putExtra("where", where);
    intent.putExtra("whereVal", whereVal);
    startActivity(intent);

        }
     }
  } 
```

第二课，展示专辑：

```
package music.library;

import android.app.Activity;
import android.content.Intent;
import android.database.Cursor;
import android.os.Bundle;
import android.provider.MediaStore;
import android.view.View;
import android.widget.AdapterView;
import android.widget.AdapterView.OnItemClickListener;
import android.widget.ListView;
import android.widget.SimpleCursorAdapter;

public class AlbumSelection extends Activity implements OnItemClickListener {
  Cursor cursor;
  @SuppressWarnings("deprecation")
  @Override
  public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    Bundle extras = getIntent().getExtras();
    String where = extras.getString("where");
    String[] whereVal = extras.getStringArray("whereVal");

    String[] columns = {
            MediaStore.Audio.Media._ID,
            MediaStore.Audio.Media.ALBUM,
       };

        String orderBy = android.provider.MediaStore.Audio.Media._ID;

    cursor = managedQuery(MediaStore.Audio.Albums.EXTERNAL_CONTENT_URI,
        columns, where, whereVal, orderBy);

    ListView listView = (ListView) findViewById(R.id.listView);
    listView.setOnItemClickListener(this);
    String[] displayFields = new String[] { MediaStore.Audio.Media.ALBUM };
    int[] displayViews = new int[] { R.id.albumItem };
    SimpleCursorAdapter adapter = new SimpleCursorAdapter(this,
        R.layout.album_item, cursor, displayFields, displayViews);
    listView.setAdapter(adapter); }

  public void onItemClick(AdapterView<?> a, View v, int position, long id) {
      if (cursor.moveToPosition(position)) {

        String where = android.provider.MediaStore.Audio.Media.ALBUM
        + "=?";

        String whereVal[] = { cursor.getString(cursor
        .getColumnIndex(MediaStore.Audio.Albums.ALBUM)) };

  Intent intent = new Intent(AlbumSelection.this, SongSelection.class);
  intent.putExtra("where", where);
  intent.putExtra("whereVal", whereVal);
  startActivity(intent);

       }    
    }
  } 
```

第三课，展示歌曲：

```
package music.library;

import android.app.Activity;
import android.database.Cursor;
import android.os.Bundle;
import android.provider.MediaStore;
import android.view.View;
import android.widget.AdapterView;
import android.widget.AdapterView.OnItemClickListener;
import android.widget.ListView;
import android.widget.SimpleCursorAdapter;

public class SongSelection extends Activity implements OnItemClickListener {
    Cursor cursor;
      @SuppressWarnings("deprecation")
      @Override
      public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        Bundle extras = getIntent().getExtras();
        String where = extras.getString("where");
        String[] whereVal = extras.getStringArray("whereVal");

        String[] columns = {
                MediaStore.Audio.Media.DATA,
                MediaStore.Audio.Media._ID,
                MediaStore.Audio.Media.TITLE,
                MediaStore.Audio.Media.DISPLAY_NAME,
                MediaStore.Audio.Media.MIME_TYPE,
           };

            String orderBy = android.provider.MediaStore.Audio.Media.TITLE;

        cursor = managedQuery(MediaStore.Audio.Media.EXTERNAL_CONTENT_URI,
            columns, where, whereVal, orderBy);

        ListView listView = (ListView) findViewById(R.id.listView);
        listView.setOnItemClickListener(this);
        String[] displayFields = new String[] { MediaStore.Audio.Media.TITLE };
        int[] displayViews = new int[] { R.id.songItem };
        SimpleCursorAdapter adapter = new SimpleCursorAdapter(this,
            R.layout.song_item, cursor, displayFields, displayViews);
        listView.setAdapter(adapter); }

        public void onItemClick(AdapterView<?> a, View v, int position, long id) {
            if (cursor.moveToPosition(position)) {

        /*Intent intent = new Intent(AlbumSelection.this, SongSelection.class);
        intent.putExtra("ARTIST", artist);
        startActivity(intent);
*/
           }    
        }
      } 
```

这一切都很顺利。

非常感谢所有的回复。我很想听听有关如何整理/提高代码效率的任何反馈。

再次感谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-02-01T11:23:39.333

我找到了这个解决方案。`View.getId()`将返回值 -1。所以我们不知道该项目是否被点击。改为使用`adapter.getId()`。它将返回正确的项目 ID。

```
 @Override
 public void onItemClick(AdapterView<?> adapter, View view, int position, long id) {
     if (adapter.getId() == R.id.ls_menu_genre) {
         //item was clicked
     }
 } 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-03T14:04:32.863

您应该使用以下方法：

```
public void onItemClick(AdapterView<?> a, View v, int position, long id) { 
```

就一次。然后，您可以执行以下操作：

```
v.getId() 
```

并做这样的事情：

```
@SuppressWarnings("deprecation")
public void onItemClick(AdapterView<?> a, View v, int position, long id) {

        if( v.getId() == R.id.listView ){
            if (cursor.moveToPosition(position)) {

                String[] columns = { 
                    MediaStore.Audio.Media._ID,
                    MediaStore.Audio.Media.DISPLAY_NAME,
                };

                String where = MediaStore.Audio.Media.ALBUM
                    + "=?";

                String whereVal[] = { cursor.getString(cursor
                    .getColumnIndex(MediaStore.Audio.Albums.ALBUM)) };

                String orderBy = MediaStore.Audio.Media._ID;

                cursor = managedQuery(
                    MediaStore.Audio.Media.EXTERNAL_CONTENT_URI, columns,
                    where, whereVal, orderBy);

                ListView listView = (ListView) findViewById(R.id.listView);
                String[] displayFields = 
                        new String[] { MediaStore.Audio.Media.DISPLAY_NAME };
                int[] displayViews = new int[] { R.id.songItem };
                SimpleCursorAdapter adapter = new SimpleCursorAdapter(this,
                        R.layout.song_item, cursor, displayFields, displayViews);
            }
                    listView.setAdapter(adapter);
        }else{
            if (cursor.moveToPosition(position)) {

              String[] columns = {
                  MediaStore.Audio.Media._ID,
                  MediaStore.Audio.Media.ALBUM,
             };

              String where = android.provider.MediaStore.Audio.Media.ARTIST
                  + "=?";

              String whereVal[] = { cursor.getString(cursor
                  .getColumnIndex(MediaStore.Audio.Albums.ARTIST)) };

              String orderBy = android.provider.MediaStore.Audio.Media._ID;

              cursor = managedQuery(
                  MediaStore.Audio.Albums.EXTERNAL_CONTENT_URI, columns,
                  where, whereVal, orderBy);

              ListView listView = (ListView) findViewById(R.id.listView);
              String[] displayFields = new String[] { MediaStore.Audio.Media.ALBUM };
              int[] displayViews = new int[] { R.id.albumItem };
              SimpleCursorAdapter adapter = new SimpleCursorAdapter(this,
                  R.layout.album_item, cursor, displayFields, displayViews);
              listView.setAdapter(adapter);

            }

        }

} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-03T14:04:35.907

我看到了两种方法

1.) 将您的第二个 onItemClick 方法内容移动到第一个。有一个标志来确定您是否在艺术家或专辑列表视图中，并基于此在您的 onItemClick 方法中执行功能。

```
if (artistMode)
{
   //do artist mode stuff for clicks
}
else
{
  //do album mode stuff for clicks
} 
```

2.) 以更“标准”的方式进行操作，并将您的专辑和艺术家视图拆分为单独的活动。这样，您就不会在一个文件中管理通常在两个活动中完成的事情的两组代码。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-03T14:08:52.320

仅使用一个 onItemClick，然后检查您获得的 AdapterView 并`if`在其中设置一个以处理两个列表。但是您需要有不同的适配器名称，在尝试执行此操作时将它们都称为“适配器”是行不通的。

**编辑**

错过了您正在重复使用相同的列表视图。新策略。设置一个变量并使用它来区分。

在 MusicLibrary 中添加：

```
private String currentList = "Artist";  // set the tracking variable to your initial list 
```

现在您的 onClick 应该如下所示：

```
public void onItemClick(AdapterView<?> a, View v, int position, long id) {
    if (currentList.equals("Artist")) {
        if (cursor.moveToPosition(position)) {
            String[] columns = {
            MediaStore.Audio.Media._ID,
            MediaStore.Audio.Media.ALBUM,
        };
        String where = android.provider.MediaStore.Audio.Media.ARTIST + "=?";
        String whereVal[] = { cursor.getString(cursor.getColumnIndex(MediaStore.Audio.Albums.ARTIST)) };
        String orderBy = android.provider.MediaStore.Audio.Media._ID;

        cursor = managedQuery(MediaStore.Audio.Albums.EXTERNAL_CONTENT_URI, columns, where, whereVal, orderBy);

        ListView listView = (ListView) findViewById(R.id.listView);
        String[] displayFields = new String[] { MediaStore.Audio.Media.ALBUM };
        int[] displayViews = new int[] { R.id.albumItem };
        SimpleCursorAdapter adapter = new SimpleCursorAdapter(this,
        R.layout.album_item, cursor, displayFields, displayViews);
        listView.setAdapter(adapter);
        currentList = "Album";  // re-set the list variable
    } else if (currentList.equals("Album")) {
        if (cursor.moveToPosition(position)) {
            String[] columns = { 
            MediaStore.Audio.Media._ID,
            MediaStore.Audio.Media.DISPLAY_NAME,
        };
        String where = MediaStore.Audio.Media.ALBUM + "=?";
        String whereVal[] = { cursor.getString(cursor.getColumnIndex(MediaStore.Audio.Albums.ALBUM)) };
        String orderBy = MediaStore.Audio.Media._ID;

        cursor = managedQuery(MediaStore.Audio.Media.EXTERNAL_CONTENT_URI, columns, where, whereVal, orderBy);

        ListView listView = (ListView) findViewById(R.id.listView);
        String[] displayFields = 
        new String[] { MediaStore.Audio.Media.DISPLAY_NAME };
        int[] displayViews = new int[] { R.id.songItem };
        SimpleCursorAdapter adapter = new SimpleCursorAdapter(this,
        R.layout.song_item, cursor, displayFields, displayViews);
        listView.setAdapter(adapter);
        currentList = "Songs";  // re-set the list variable
        }
    }
} 
```

# android - 在主屏幕小部件中实现 ListView

> ID：10432959
> 
> 赞同：10
> 
> 时间：2012-05-03T13:58:39.260
> 
> 标签：android, android-widget

如何使用 ListView 之类的东西制作小部件。我已经使用 LinearLayout 做到了，但我不知道如何发现行数。（我想知道确切的行数以使小部件能够分页）

我希望它看起来像这样（photoshop 和 copypast）：

![在此处输入图像描述](../Images/8f4628b5c7c2351c2af20f364a193788.png)

笔记：

1.  安卓 2.3.4 及以下。
2.  大小为 4x4 的小部件

更新和澄清：

当我说“可滚动”时，我的意思是通过单击向上和向下按钮滚动（您在屏幕截图上看到），即分页

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T09:08:08.340

我不知道如何确定 dp 中小部件 4x4 的实际大小。似乎只有知道具体的设备才能确定。

您可以按固定的行数滚动。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-15T10:50:42.087

我知道的唯一 3.0 之前的示例是 Google Code 上的[ScrollableContacts](http://code.google.com/p/scrollablecontacts/)项目。它在主屏幕小部件中具有可滚动列表，并从 2.1 开始工作。但是，该小部件需要更换家庭 - 请参阅项目描述。源代码可以在[这里](http://code.google.com/p/scrollablecontacts/source/browse/)查看。

# jquery - 具有可扩展 div 的粘性页眉和页脚

> ID：10432961
> 
> 赞同：0
> 
> 时间：2012-05-03T13:58:39.573
> 
> 标签：jquery, css

我正在尝试使用内部主要内容实现固定的页眉和页脚，以在页眉和页脚下滚动并修复正确的导航。

[http://jsfiddle.net/sjUBQ/](http://jsfiddle.net/sjUBQ/)

我可以接近这一点的唯一方法是这个[http://jsfiddle.net/sjUBQ/](http://jsfiddle.net/sjUBQ/)尝试，但我必须将高度固定为 300px #main .yui3-u-3-5{background:#aaa;height ：300像素；overflow:auto;} 以获取滚动条。

我尝试添加 jQuery 代码：

```
$(document).ready(function() {
  var desiredHeight = $("body").height() - $("head").height() - $("footer").height();
  $(".yui3-u-3-5").css("min-height", desiredHeight );
});​ 
```

但这不起作用，所以如果内容高于实际浏览器窗口，我如何获得一个带有内部 div 的粘性页眉和页脚显示滚动条？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T20:00:47.823

这是你想要的吗？[http://jsfiddle.net/RiderSargent/sjUBQ/4/](http://jsfiddle.net/RiderSargent/sjUBQ/4/)

尝试更改右下窗格的高度，看看它是否符合您的要求。我认为关键（如果我理解您要正确执行的操作）是`position: fixed;`用于您的页眉和页脚。您可能还希望将主 div 的顶部和底部边距设置为分别为页眉和页脚的高度设置的相同尺寸。

编辑：我将“BEGIN”和“END”放在 lorum ipsum 中以确保所有内容都显示出来。

编辑#2：更新 jsFiddle：http: [//jsfiddle.net/RiderSargent/sjUBQ/5/](http://jsfiddle.net/RiderSargent/sjUBQ/5/)

编辑#3：简而言之，我认为这是您需要的 jQuery：

```
var headerHeight = $('#head').height(),
    footerOffset = $('#footer').offset().top,
    desiredHeight = footerOffset - headerHeight;

$('.yui3-u-3-5').css('height', desiredHeight); 
```

# matlab - 这个函数定义 SomeFunction(hObject,~) 在 Matlab 中是什么意思？

> ID：10432964
> 
> 赞同：2
> 
> 时间：2012-05-03T13:58:47.387
> 
> 标签：matlab

我想这是来自新版本的 Matlab 的东西。但我无法弄清楚它`~`代表什么。

```
SomeFundtion(hObject,~)
%function content here 
```

任何线索将不胜感激。

另外，也许是我，但我总是找不到好的资源在matlab中找到这种特殊的运算符。有什么好的matlab资源推荐吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-03T14:27:36.250

它用于忽略函数输入。相关[的 MATLAB 参考页](http://www.mathworks.com/help/techdoc/matlab_prog/br67dkp-1.html)告诉我们：

> 当您的函数必须接受一组预定义的输入，但您的函数并未使用所有输入时，请使用此运算符。常见的应用程序包括定义回调函数，如此处所示，或从超类派生类。

您可以参考示例代码的参考。

波浪号也用于忽略一些输出。对于这种用法，您可以参考[此处的答案。](https://stackoverflow.com/questions/6766330/what-is-this-matlab-statement-for-m-n-sizeimge)

# c++ - 将动态库链接到链接到其他静态库的静态库

> ID：10432968
> 
> 赞同：2
> 
> 时间：2012-05-03T13:59:12.130
> 
> 标签：c++, gcc, static-linking, dynamic-linking

在我的 C++ 应用程序中，我有一个链接到 boost 库的静态库 (libCOMMON.a)：system、filsystem、timer 和 chrono。

我正在使用 CMake，这是我创建和链接 libCOMMON.a 的方式：

```
ADD_LIBRARY(COMMON ${COMMON_SRCS})
target_link_libraries(COMMON 
    ${BOOST_LIB_DIR}/libboost_filesystem.a
    ${BOOST_LIB_DIR}/libboost_system.a
    ${BOOST_LIB_DIR}/libboost_timer.a
    ${BOOST_LIB_DIR}/libboost_chrono.a
) 
```

我也有链接到 libCOMMON.a 的这个应用程序的插件。插件被构建为动态库。一切都可以编译（使用 gcc），但是当我启动应用程序时，无法加载插件，因为无法解析与 boost 相关的动态库中的某些符号。

解决方案是将每个插件链接到 boost。有没有更好的办法 ？我认为如果boost库静态链接到libCOMMON.a，将插件链接到libCOMMON.a就足够了。

有人可以解释发生了什么吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T20:01:28.327

我认为问题在于默认情况下，boost 库是作为动态库构建的。即使“.a”表明它们是作为静态库构建的，boost 的 lib 文件夹也包含一个“.so”库，每个“.a”。这意味着 libCOMMON.a 动态链接到 boost 库。出于这个原因，静态链接到 libCOMMON.a 的插件也必须动态链接到 boost 库。更好的解决方案是将 boost 库构建为静态库。

# ruby-on-rails - Phusion Passenger + Apache 2 + Rails 3。在本地网络上工作，而不是在外部访问时

> ID：10432973
> 
> 赞同：0
> 
> 时间：2012-05-03T13:59:28.947
> 
> 标签：ruby-on-rails, apache, passenger, phusion

**问题：**

`rails new TestApp`我在`/var/www/`我的服务器目录中创建了一个 Rails 项目框架。当我从服务器运行所在的同一网络。但是，如果我从与服务器不同网络上的机器访问该站点，则会显示该页面，但我没有获得 rails 徽标图像，并且单击“关于您的应用程序的环境”会导致页面上显示以下错误：

```
Not Found
The requested URL /TestApp/rails/info/properties was not found on this server 
```

并且不应找到该 URL，因为它不存在。然而，`TestApp/public/rails/info/properties`确实存在。

**配置：**

该站点位于其中`/var/www/TestApp`，我从子 URI 访问它。我创建了一个`/var/www/`名为`rails`如下的符号链接：`rails -> /var/www/TestApp/public`，以便可以从 www.mydomain.com/rails 访问该项目。我的 Apache 配置如下，请注意，`<VirtualHost>`为简洁起见，我已经省略、更改或缩短了标记中的某些部分：

```
LoadModule passenger_module /usr/local/rvm/gems/ruby-1.9.3-p194/gems/passenger-3.0.12/ex$
PassengerRoot /usr/local/rvm/gems/ruby-1.9.3-p194/gems/passenger-3.0.12
PassengerRuby /usr/local/rvm/wrappers/ruby-1.9.3-p194/ruby

<VirtualHost *:80>
    ServerAdmin webmaster@localhost
    ServerName www.mydomain.com
    DocumentRoot /var/www
    <Directory />
            Options FollowSymLinks
            AllowOverride None
    </Directory>
    <Directory /var/www/>
            Options Indexes FollowSymLinks MultiViews
            AllowOverride None
            Order allow,deny
            allow from all
    </Directory>
    .
    .
    .
    #Rails Configuration

    RailsBaseURI /rails
    RailsEnv development
    PassengerUserSwitching off
    PassengerDefaultUser www-data
    <Directory /TestApp/public>
            Options FollowSymLinks -MultiViews
            AllowOverride All
            Allow from all
    </Directory>

    #End Rails Configuration
    .
    .
    .
</VirtualHost> 
```

有几件事：[适当的文件夹](http://www.modrails.com/documentation/Users%20guide%20Apache.html#user_switching)由`www-data`乘客文档定义的适当权限拥有。在设置[符号链接和 RailsBaseURI](http://www.modrails.com/documentation/Users%20guide%20Apache.html#deploying_rails_to_sub_uri)设置时，我遵循了乘客文档。

我想我在这里不知所措，因为从服务器所在的同一网络访问网站时，一切似乎都在工作。我不确定为什么从不同的网络访问该站点时事情没有解决，但我觉得某些资源/资产的路径（如 rails 徽标）没有正确解析。也许我的符号链接配置不当，或者我的 Apache 配置有问题？

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T02:11:13.033

事实证明，默认 Rails 页面有些损坏的问题[并非完全不正常。](http://ruby.railstutorial.org/chapters/beginning#sec:1.4.3)

我删除了默认的 Rails 页面并替换为包含一些 Rails 代码的另一个页面，一切都像魅力一样工作。

# cryptography - 过期多方加密方案中的密钥子集

> ID：10432976
> 
> 赞同：4
> 
> 时间：2012-05-03T13:59:33.193
> 
> 标签：cryptography

假设一个多方加密方案，类似于以下问题的答案：[Encryption with multiple different keys？](https://stackoverflow.com/questions/597188/encryption-with-multiple-different-keys). 那是。一组密钥`K`可用于破译密文。

有没有办法过期：

```
K'⊆ K 
```

这样`K \ K'`仍然可以破译密文，但不再`K'`？

我当然假设密文已因`K'`. 我不确定如何攻击它，或者是否有可能？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-17T21:23:30.017

*这是一个名为广播加密*的特定密码学分支研究的问题。特别是，还假设：

*   必须最小化发送消息的开销
*   用于重新键入目的的流量是有限的，甚至没有
*   存在广播/多播频道
*   每个用户拥有的存储空间是有限的，有时甚至无法更改
*   即使两个或多个“过期”用户串通一气，该协议也是安全的（例如，将他们的密钥放在一起，看看他们是否仍然可以访问数据）
*   用户的计算能力有限

存在几种协议，并且每种协议都针对上述条件实现了不同的权衡。但是，我不知道围绕它们的任何标准。

描述问题和一些解决方案的两个非常好的和开创性的文件是：

*   [Fiat 和 Naor 的广播加密](http://www.wisdom.weizmann.ac.il/~naor/PAPERS/broad_abs.html)
*   [Wallner 和 Harder 的多播密钥管理](http://www.hjp.at/doc/rfc/rfc2627.txt)

在互联网上，您可以找到更多材料，但在大多数情况下，它们可以追溯到这两篇文章。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T16:24:12.910

假设像 PGP/GPG 这样的公钥密码系统，答案是“不”。您必须以某种方式更改密文，以便`K'`不再对其进行解密，这意味着生成新的密文。

由于无法收回原始密文，`K'`因此始终能够解密它。

# c - keil uvision4是否足以替代8051硬件

> ID：10432977
> 
> 赞同：2
> 
> 时间：2012-05-03T13:59:33.067
> 
> 标签：c, embedded, microcontroller, 8051, keil

我想在 8051 MC 上编写一些程序或 Embedded-C。ISR、LED 闪烁、轮询等程序。没有硬件可以吗？只有keil uvision4硬件模拟器就够写程序了？请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T17:36:54.507

Keil 模拟器模拟内核和外设，可用于指令周期级时序。它不会模拟您可能附加到设备本身的外部硬件。理论上你可以附加调试脚本来模拟外部设备，但坐下来是很多工作。

就闪烁的 LED 而言，您对 Keil 模拟器所做的最好的事情就是观察 GPIO 寄存器中的某个位从 0 变为 1。

模拟中断（我相信）只是在适当的外围设备中设置中断标志的一种情况。

简而言之，您可能可以做到，但这并不好玩，并且可能会让您完全放弃嵌入式开发。

Silicon Labs ToolStick 入门套件售价 24.99 美元，随附 Keil 工具和 SiLabs 的 IDE，因此这可能是一种更有趣的入门方式。硬件包括一个 LED、一个开关、一个电位器和用于所有 I/O 引脚扩展的焊盘访问。如果您有潜在的商业前景，SiLabs 通常会免费提供这些。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T14:44:31.003

一个简单的谷歌搜索显示了许多 8051 模拟器。更有教育意义的是编写自己的模拟器。8051 架构的问题在于有多少东西依赖于寄存器，并且寄存器空间因芯片和供应商而异，因此您只能仅使用指令集就可以做到这一点。

同样，从 sdcc 到其他开源汇编程序等也有大量工具。不需要付费工具。如果您愿意，可能需要，但不是必需的。

您可以在没有硬件的情况下免费学习 8051 编程。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-03T14:53:38.187

模拟器可以帮助诊断多种类型的编码问题，尽管我不知道有任何 8051 模拟器可以轻松模拟自定义硬件；不过，如果他们在那里，我不会感到惊讶。但是，如果您开始使用微控制器，我建议您至少对实际电路进行一些工作。模拟一切都很好，但它都是屏幕上的动画。拥有一个可以闪烁灯、产生啁啾或切换一些继电器、螺线管、电机或其他“真实”事物的实际电路更引人注目。

许多控制器都有预制开发板和套件，价格通常低于 100 美元。其中一些带有做一些半真实世界演示所需的所有东西。其他人可以很容易地使用价值约 10 美元的穿孔板、电线和杂项零件以及便宜的烙铁，甚至是一点点技能就可以做到这一点。自从我为 8051 型控制器寻找任何便宜的开发套件以来，已经有很长时间了，但我知道目前有一些可用于基于 ARM 的处理器之类的东西，我希望有一些 8051 克隆具有可用的开发套件也是。我认为 Cypress 存在基于 8051 的 PSOC 衍生产品，使用起来可能特别有趣和有趣，我从他们那里购买的早期基于 USB 的 PSOC 的开发套件有一个板，其中包括一个操纵杆、LCD、

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-20T12:52:46.600

出于学习目的，模拟器就足够了。但是，实际上开发嵌入式系统需要硬件进行测试。

当我为 8051 编写一个 bit-banged I2C 协议以与 EEPROM 存储器通信时，我遇到了同样的问题。

# android - Android 的 Youtube Gdata API 问题

> ID：10432980
> 
> 赞同：1
> 
> 时间：2012-05-03T13:59:38.853
> 
> 标签：android

我使用 Youtube gdata api 从 youtube 获取数据。但我在网上遇到错误

YouTubeService 服务 = new YouTubeService("myService");

**这是我的代码。**

```
YouTubeService service = new YouTubeService("myService");
Log.i("YouTubeApp", "SelectedProgramID: " + urlLink);
VideoFeed videoFeed = null;
try {
    videoFeed = service.getFeed(new URL(urlLink), VideoFeed.class);
} catch (MalformedURLException e) {
    // TODO Auto-generated catch block
    e.printStackTrace();
} catch (IOException e) {
    // TODO Auto-generated catch block
    e.printStackTrace();
} catch (ServiceException e) {
    // TODO Auto-generated catch block
    e.printStackTrace();
} 
```

**进入 IOException 块**

**错误**

```
05-03 19:08:54.085: W/System.err(465): java.io.IOException: Hostname <gdata.youtube.com> was not verified
05-03 19:08:54.085: W/System.err(465):  at org.apache.harmony.luni.internal.net.www.protocol.http.HttpConnection.getSecureSocket(HttpConnection.java:170)
05-03 19:08:54.095: W/System.err(465):  at org.apache.harmony.luni.internal.net.www.protocol.https.HttpsURLConnection$HttpsEngine.connect(HttpsURLConnection.java:398)
05-03 19:08:54.095: W/System.err(465):  at org.apache.harmony.luni.internal.net.www.protocol.https.HttpsURLConnection.connect(HttpsURLConnection.java:146)
05-03 19:08:54.095: W/System.err(465):  at com.google.gdata.client.http.HttpGDataRequest.execute(HttpGDataRequest.java:511)
05-03 19:08:54.095: W/System.err(465):  at com.google.gdata.client.http.GoogleGDataRequest.execute(GoogleGDataRequest.java:536)
05-03 19:08:54.095: W/System.err(465):  at com.google.gdata.client.Service.getFeed(Service.java:1135)
05-03 19:08:54.095: W/System.err(465):  at com.google.gdata.client.Service.getFeed(Service.java:998)
05-03 19:08:54.095: W/System.err(465):  at com.google.gdata.client.GoogleService.getFeed(GoogleService.java:645)
05-03 19:08:54.095: W/System.err(465):  at com.google.gdata.client.Service.getFeed(Service.java:1017) 
```

**我添加了这些权限：**

```
<uses-permission android:name="android.permission.INTERNET" />
<uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" />
<uses-permission android:name="android.permission.ACCESS_MOCK_LOCATION" />
<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" /> 
```

**我已经进口了**

```
"activation.jar", 
"additionnal.jar", 
"gdata-base-1.0.jar", 
"gdata-client-1.0.jar", 
"gdata-core-1.0.jar", 
"gdata-media-1.0.jar", 
"gdata-youtube-2.0.jar", 
"guava-12.0.jar" and 
"mail.jar" 
```

此代码在独立的 java 命令行项目上运行良好。我的代码有什么问题。？有任何想法吗..

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T10:22:30.087

**gDATA**无法在**ANDROID EMULATOR**上运行。它总是返回**null**。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-26T11:07:31.683

我在我的 Android 应用程序中遇到了类似的问题。我的应用中有这个 URL：[https](https://gdata.youtube.com/feeds/api/videos) ://gdata.youtube.com/feeds/api/videos ，我将它替换为[http://gdata.youtube.com/feeds/api/videos](http://gdata.youtube.com/feeds/api/videos)并且它可以工作。我认为 SSL 有问题。

# asp.net - 如何通过网络发现软件是否安装在用户机器上

> ID：10432981
> 
> 赞同：0
> 
> 时间：2012-05-03T13:59:41.630
> 
> 标签：asp.net, winforms, activex, user-agent, agent

在我的公司，我们有很多 .NET 软件，包括 Windows 窗体和 Web 窗体。

现在我们有一些挑战，我们需要审核用户的机器上是否有一些盗版软件。

对于 Windows 窗体很容易访问 Windows 注册表。

那么，我们可以为网站做些什么呢？因为如果安装了代理，用户只能在网站上工作。

我在考虑登录页面，我们可以以某种方式验证用户是否安装了代理，如果没有，我们将重定向到新页面以安装此代理。

PS: AGENTE 将是一个 Windows 服务器。

我的问题是：

我如何通过网站验证用户是否安装了代理？

Some1 有其他方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T14:07:12.827

您能否在网站上提供一个可下载的工具来审核用户的机器并提供登录或启用帐户所需的密钥？

# entity-framework-4 - ObjectStateManager 不包含引用对象的 ObjectStateEntry

> ID：10432983
> 
> 赞同：3
> 
> 时间：2012-05-03T13:59:51.083
> 
> 标签：entity-framework-4

我以为我理解 EF，特别是在极其简单的 CRUD 方面，但我可能错了。

我有一个 ObjectContext/Repository 模式，在这种情况下是一个具有增值税率集合的增值税代码实体。

**增值税代码 1--* 增值税率**

我想提供对这些实体进行 CRUDing 的功能。这是在 WPF 应用程序中，并且正在“断开连接”运行，因为我没有不必要地打开数据库连接。我更喜欢数据库访问的输入/输出方法。这显示在以下集成测试中：

```
 [TestMethod()]
    public void AddVatRateAndSaveVatCodeTest()
    {
        VatCode vatCode=null;
        DateTime expectedDateFrom = DateTime.Now.AddDays(1).Date;
        using (SopEntities sopEntities = EntitiesFactory.Create(Properties.Resources.ConnectionString))
        {
            VatRepository target = new VatRepository(sopEntities);
            vatCode = target.SingleOrDefault(q => q.Key == "X4");
            Assert.IsNotNull(vatCode);
        }

        // mimick offline editing/disconnect

        using (SopEntities sopEntities = EntitiesFactory.Create(Properties.Resources.ConnectionString))
        {
            VatRepository target = new VatRepository(sopEntities);

            vatCode.VatRates.Add(new VatRate()
                {
                    DateFrom=expectedDateFrom,
                    Rate=20
                });
            target.Attach(vatCode);
            target.SaveChanges();
        }

        using (SopEntities sopEntities=EntitiesFactory.Create(Properties.Resources.ConnectionString))
        {
            VatRepository vatRepository=new VatRepository(sopEntities);
            VatCode actual=vatRepository.SingleOrDefault(q=>q.Key=="X3");
            Assert.IsNotNull(actual);
            Assert.AreEqual(vatCode.VatRates.Count,actual.VatRates.Count);
            Assert.AreEqual(expectedDateFrom,actual.VatRates.OrderBy(q=>q.DateFrom).Last().DateFrom);
        }
    } 
```

代码很简单。它检索一个已知的现有实体并将其分配给 vatCode。然后，该实体在 UI 上的 ViewModel 中传递，并重新保存。在这个测试中，我通过打开一个新的上下文来模仿这个。这正是我在 UI 中的方式，所以我在这里证明它。

但是，在调用 vatRepository 的 Attach() 方法时，该方法具有以下方法主体：

```
 public void Attach(TEntity entity)
    {
        if (entity == null)
            throw new ArgumentNullException("entity");

        _context.ObjectStateManager.ChangeObjectState(entity, System.Data.EntityState.Modified); // exception here
        _objectSet.Attach(entity);
    } 
```

我在 ChangeObjectState 方法上得到了以下异常（我之所以调用该方法，是因为实体已与原始上下文范围断开连接）。

> System.InvalidOperationException 未由用户代码处理
> Message=ObjectStateManager 不包含 ObjectStateEntry，其中引用了“Mac.Sop.Core.Data.VatCode”类型的对象。

我确实考虑过我在 EF 模型中的 XML 可能不正确（考虑到对“Mac.Sop.Core.Data.VatCode”的引用），但是通过它我找不到任何问题，并且这些实体与我的其他实体遵循类似的模式.

**更新：** 我的 EF 模型。我找不到对“Mac.Sop.Core.Data.VatCode”的任何引用：

```
<?xml version="1.0" encoding="utf-8"?>
<edmx:Edmx Version="2.0" xmlns:edmx="http://schemas.microsoft.com/ado/2008/10/edmx">
  <edmx:Runtime>
    <edmx:StorageModels>
    <Schema Namespace="Model.Store" Alias="Self" Provider="System.Data.SqlClient" ProviderManifestToken="2008" xmlns:store="http://schemas.microsoft.com/ado/2007/12/edm/EntityStoreSchemaGenerator" xmlns="http://schemas.microsoft.com/ado/2009/02/edm/ssdl">
        <EntityContainer Name="ModelStoreContainer">
          <EntitySet Name="MacsSop_VATCode" EntityType="Model.Store.MacsSop_VATCode" store:Type="Tables" Schema="dbo" />
          <EntitySet Name="MacsSop_VATRate" EntityType="Model.Store.MacsSop_VATRate" store:Type="Tables" Schema="dbo" />
          <AssociationSet Name="FK_MacsSop_VATRate_MacsSop_VATCode" Association="Model.Store.FK_MacsSop_VATRate_MacsSop_VATCode">
            <End Role="MacsSop_VATCode" EntitySet="MacsSop_VATCode" />
            <End Role="MacsSop_VATRate" EntitySet="MacsSop_VATRate" />
          </AssociationSet>
        </EntityContainer>
        <EntityType Name="MacsSop_VATCode">
          <Key>
            <PropertyRef Name="Key" />
          </Key>
          <Property Name="Key" Type="varchar" Nullable="false" MaxLength="3" />
          <Property Name="Name" Type="nvarchar" Nullable="false" MaxLength="128" />
        </EntityType>
        <EntityType Name="MacsSop_VATRate">
          <Key>
            <PropertyRef Name="ID" />
          </Key>
          <Property Name="ID" Type="int" Nullable="false" StoreGeneratedPattern="Identity" />
          <Property Name="Key" Type="varchar" Nullable="false" MaxLength="3" />
          <Property Name="DateFrom" Type="datetime" Nullable="false" />
          <Property Name="Rate" Type="decimal" Nullable="false" Scale="2" />
        </EntityType>
        <Association Name="FK_MacsSop_VATRate_MacsSop_VATCode">
          <End Role="MacsSop_VATCode" Type="Model.Store.MacsSop_VATCode" Multiplicity="1" />
          <End Role="MacsSop_VATRate" Type="Model.Store.MacsSop_VATRate" Multiplicity="*" />
          <ReferentialConstraint>
            <Principal Role="MacsSop_VATCode">
              <PropertyRef Name="Key" />
            </Principal>
            <Dependent Role="MacsSop_VATRate">
              <PropertyRef Name="Key" />
            </Dependent>
          </ReferentialConstraint>
        </Association>
      </Schema></edmx:StorageModels>
    <!-- CSDL content -->
    <edmx:ConceptualModels>
      <Schema Namespace="Model" Alias="Self" xmlns:annotation="http://schemas.microsoft.com/ado/2009/02/edm/annotation" xmlns="http://schemas.microsoft.com/ado/2008/09/edm">
        <EntityContainer Name="SopEntities" annotation:LazyLoadingEnabled="true" >
          <EntitySet Name="VatCodes" EntityType="Model.VatCode" />
          <EntitySet Name="VatRates" EntityType="Model.VatRate" />
          <AssociationSet Name="FK_MacsSop_VATRate_MacsSop_VATCode" Association="Model.FK_MacsSop_VATRate_MacsSop_VATCode">
            <End Role="MacsSop_VATCode" EntitySet="VatCodes" />
            <End Role="MacsSop_VATRate" EntitySet="VatRates" />
          </AssociationSet>
        </EntityContainer>
        <EntityType Name="VatCode">
          <Key>
            <PropertyRef Name="Key" />
          </Key>
          <Property Type="String" Name="Key" Nullable="false" MaxLength="3" FixedLength="false" Unicode="false" />
          <Property Type="String" Name="Name" Nullable="false" MaxLength="128" FixedLength="false" Unicode="true" />
          <NavigationProperty Name="VatRates" Relationship="Model.FK_MacsSop_VATRate_MacsSop_VATCode" FromRole="MacsSop_VATCode" ToRole="MacsSop_VATRate" />
        </EntityType>
        <EntityType Name="VatRate">
          <Key>
            <PropertyRef Name="ID" />
          </Key>
          <Property Type="Int32" Name="ID" Nullable="false" annotation:StoreGeneratedPattern="Identity" />
          <Property Type="String" Name="Key" Nullable="false" MaxLength="3" FixedLength="false" Unicode="false" />
          <Property Type="DateTime" Name="DateFrom" Nullable="false" />
          <Property Type="Decimal" Name="Rate" Nullable="false" Precision="18" Scale="2" />
          <NavigationProperty Name="VatCode" Relationship="Model.FK_MacsSop_VATRate_MacsSop_VATCode" FromRole="MacsSop_VATRate" ToRole="MacsSop_VATCode" />
        </EntityType>
        <Association Name="FK_MacsSop_VATRate_MacsSop_VATCode">
          <End Type="Model.VatCode" Role="MacsSop_VATCode" Multiplicity="1" />
          <End Type="Model.VatRate" Role="MacsSop_VATRate" Multiplicity="*" />
          <ReferentialConstraint>
            <Principal Role="MacsSop_VATCode">
              <PropertyRef Name="Key" />
            </Principal>
            <Dependent Role="MacsSop_VATRate">
              <PropertyRef Name="Key" />
            </Dependent>
          </ReferentialConstraint>
        </Association>
      </Schema>
    </edmx:ConceptualModels>
    <!-- C-S mapping content -->
    <edmx:Mappings>
      <Mapping Space="C-S" xmlns="http://schemas.microsoft.com/ado/2008/09/mapping/cs">
        <EntityContainerMapping StorageEntityContainer="ModelStoreContainer" CdmEntityContainer="SopEntities" >
          <EntitySetMapping Name="VatCodes">
            <EntityTypeMapping TypeName="Model.VatCode">
              <MappingFragment StoreEntitySet="MacsSop_VATCode">
                <ScalarProperty Name="Name" ColumnName="Name" />
                <ScalarProperty Name="Key" ColumnName="Key" />
              </MappingFragment>
            </EntityTypeMapping>
          </EntitySetMapping>
          <EntitySetMapping Name="VatRates">
            <EntityTypeMapping TypeName="Model.VatRate">
              <MappingFragment StoreEntitySet="MacsSop_VATRate">
                <ScalarProperty Name="Rate" ColumnName="Rate" />
                <ScalarProperty Name="DateFrom" ColumnName="DateFrom" />
                <ScalarProperty Name="Key" ColumnName="Key" />
                <ScalarProperty Name="ID" ColumnName="ID" />
              </MappingFragment>
            </EntityTypeMapping>
          </EntitySetMapping>
        </EntityContainerMapping>
      </Mapping>
    </edmx:Mappings>
  </edmx:Runtime>

</edmx:Edmx> 
```

这需要以这种断开连接的方式工作，并且必须有可能，因为这种模式的 WCF/ASP.NET 实现显然存在！

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-03T14:19:38.690

交换`Attach`和`ChangeObjectState`线，因为您需要添加实体`ObjectStateManager`才能更改状态。

```
public void Attach(TEntity entity)
{
    if (entity == null)
        throw new ArgumentNullException("entity");

    _objectSet.Attach(entity);
    _context.ObjectStateManager.ChangeObjectState(entity, EntityState.Modified);        
} 
```

# javascript - 无法将值标签放在列的末尾

> ID：10432989
> 
> 赞同：1
> 
> 时间：2012-05-03T14:00:06.343
> 
> 标签：javascript, html, google-visualization

我已经使用 google api 在我的网页上使用以下代码创建图表

我想把标签放在图表的顶部，告诉每列顶部的列的值我想把列的值放在它上面，当我将鼠标悬停在它上面时它显示为工具提示，但我希望它是总有可能

```
<html>
  <head>
    <script type="text/javascript" src="https://www.google.com/jsapi"></script>
    <script type="text/javascript">
      google.load("visualization", "1", {packages:["corechart"]});
      google.setOnLoadCallback(drawChart);
      function drawChart() {
        var data = google.visualization.arrayToDataTable([
          ['Year', 'Sales', 'Expenses'],
          ['2004',  1000,      400],
          ['2005',  1170,      460],
          ['2006',  660,       1120],
          ['2007',  1030,      540]
        ]);

        var options = {
           title : 'Performance Metrics',
           vAxis: { 
              title: "marks",
              gridlines:{
              count:11,             
              },
              viewWindowMode:'explicit',
              viewWindow:{
                max:100,
                min:0
              },

            },

           hAxis: {title: "Subjects"},
           is3D: true,
           seriesType: "bars",

           };

        var chart = new google.visualization.ColumnChart(document.getElementById('chart_div'));
        chart.draw(data, options);
      }
    </script>
  </head>
  <body>
    <div id="chart_div" style="width: 900px; height: 500px;"></div>
  </body>
</html> 
```

# c - 使用结构在C中引用内存

> ID：10432992
> 
> 赞同：0
> 
> 时间：2012-05-03T14:00:25.250
> 
> 标签：c, memory, reference, structure, arguments

我正在学习 C 中的结构。当我们将结构作为参数传递给另一个函数时，我们到底在做什么？我们是否将所有成员值复制到另一个函数中？当我们传递一个数组作为参数时，我们传递的是数组的第一个地址——array[0]。结构似乎并不那么简单。我的猜测是我们既没有复制任何值也没有传递任何地址。我们告诉编译器准备好在需要时使用正在传递的结构成员的地址。我不确定..任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T14:06:51.510

这取决于如何`struct`传递：

*   如果按值传递，则进行复制，并且在函数内部对调用者进行的更改`struct`对调用者不可见
*   如果通过引用传递，则不会生成副本，并且在函数内部对调用者所做的更改`struct`对调用者可见

例如：

```
#include <stdio.h>

struct X {
  int value;
};

void pass_by_value(struct X a_x)
{
    a_x.value = 10;
    printf("by_value(address=%p, value=%d)\n", &a_x, a_x.value);
}

void pass_by_ref(struct X* a_x)
{
    a_x->value = 20;
    printf("by_ref(address=%p, value=%d)\n", a_x, a_x->value);
}

int main()
{
    struct X my_x = { 1 };

    printf("my_x(address=%p, value=%d)\n\n", &my_x, my_x.value);

    pass_by_value(my_x);
    printf("my_x(address=%p, value=%d)\n\n", &my_x, my_x.value);

    pass_by_ref(&my_x);
    printf("my_x(address=%p, value=%d)\n\n", &my_x, my_x.value);

    return 0;
} 
```

输出：

```
my_x（地址=0013FF74，值=1）

按值（地址=0013FF78，值=10）
my_x（地址=0013FF74，值=1）

by_ref（地址=0013FF74，值=20）
my_x（地址=0013FF74，值=20）

```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-03T14:04:09.757

结构体既可以通过值传递，也可以通过引用传递。如果有一个大结构，建议通过引用传递，否则可能会消耗大量堆栈空间，因为传递的结构的副本将在被调用的函数中制作阅读此以了解有关结构传递的更多信息

[在 C 中按值传递结构而不是传递指针有什么缺点吗？](https://stackoverflow.com/questions/161788/are-there-any-downsides-to-passing-structs-by-value-in-c-rather-than-passing-a)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-03T14:13:31.807

```
#include <stdio.h>

struct foo {
  int a;
}

void by_value(struct foo x) {
  x.a = 10;
}

void by_reference(struct foo* x) {
  x->a = 10;
}

int main(int argc, char* argv[]) {
  struct foo v;
  v.a = 5;

  by_value(v);
  printf("%d\n", v.a);

  by_reference(&v);
  printf("%d\n", v.a);

  return 0;
} 
```

如果您编译并运行它，这应该回答您的问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-03T14:18:06.317

在我们调用函数之前，编译器首先将参数压入堆栈，然后调用该函数。因此，该函数可以从堆栈中获取参数。

当通过 address 传递时，地址被传递给函数。并且编译器还会处理参数内存，称为“内存对齐”或类似的东西，以提高性能。因此，在您的函数中，您可以轻松地将该内存块转换为结构。

当按值传递时，编译器会处理参数并将处理后的参数地址传递给您的函数。

顺便说一句，在一个进程中，内存地址是相同的。任何功能都可以使用它。

# r - 命名列表到/从 Data.Frame

> ID：10432993
> 
> 赞同：45
> 
> 时间：2012-05-03T14:00:30.867
> 
> 标签：r, dataframe

我正在寻找一种在以下格式列表之间来回切换的快速方法：

```
$`a`
  [1] 1 2 3
$`b`
  [1] 4 5 6 
```

到/从以下格式的data.frame：

```
 name x
 1    a 1
 2    a 2
 3    a 3
 4    b 4
 5    b 5
 6    b 6 
```

（在这种情况下，不要真正关心列的名称是什么。）

这是上面以 R 格式使用的数据框：

```
df <- data.frame(name=c(rep("a",3),rep("b",3)), x=c(1:3,4:6)) 
```

同样，我正在寻找两个单独的操作：一个将上述 data.frame 转换为列表，另一个将其转换回 data.frame。

* * *

## 回答 #1

> 赞同：60
> 
> 时间：2012-05-03T15:11:51.847

在基数 R 中使用`stack`和：`unstack`

```
x <- data.frame(a=1:3, b=4:6)

x
  a b
1 1 4
2 2 5
3 3 6 
```

用于`stack`从宽到高，即将向量堆叠在一起。

```
y <- stack(x)
y
  values ind
1      1   a
2      2   a
3      3   a
4      4   b
5      5   b
6      6   b 
```

用来`unstack`做相反的事情。

```
unstack(y)
  a b
1 1 4
2 2 5
3 3 6 
```

* * *

如果您的数据结构比您描述的更复杂，`stack`并且`unstack`可能不再适合。在这种情况下，您必须`reshape`在 base R 或`melt`和`dcast`package 中使用`reshape2`。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2019-08-15T06:17:25.617

另一种选择是`enframe`从`tibble`

```
library(tidyverse)
enframe(lst1) %>%
   unnest 
```

### 数据

```
lst1 <- list(a=1:3, b=4:6) 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2012-05-03T14:14:06.300

也许是这样的：

```
X <- split(df$x, df$name)
data.frame(name = rep(names(X), sapply(X, length)), 
    x=do.call('c', X)) 
```

**编辑：** *我决定将 Andrie 和我的解决方案组合成一个似乎正是 OP 要求的相当简单的解决方案。话虽如此，我不太明白我会以这种方式处理数据而不是 Andrie 如何处理数据的情况，因为数据帧无论如何都是等长向量的列表。*

```
# Your data set
df <- data.frame(name=c(rep("a",3),rep("b",3)), x=c(1:3,4:6))

# converting it to list of vectors
X <- split(df[, 2], df[, 1])
# converting it to a dataframe
Y <- stack(X)[, 2:1]; names(Y) <- names(df)

# Take Y and feed it back to these lines to show it 
# switches back and forth
(X <- split(Y[, 2], Y[, 1]))
Y <- stack(X)[, 2:1]; names(Y) <- names(df);Y 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-02-10T02:00:13.747

我希望对@Tyler Rinker 的建议发表一些重要的评论

```
X <- split(df$x, df$name) 
```

可以更普遍地完成

```
X <- split(df, df$name) 
```

@Tyler Rinker 的 split() 解释与 R 食谱相匹配

[http://my.safaribooksonline.com/book/programming/r/9780596809287/6dot1dot-splitting-a-vector-into-groups/id3392005](http://my.safaribooksonline.com/book/programming/r/9780596809287/6dot1dot-splitting-a-vector-into-groups/id3392005)

指定可以对向量进行分组，而实际上可以对整个数据帧进行分组。我认为对数据框而不是向量进行分组将是更有价值的工具（实际上也是让我写这篇文章的原因）。

```
(df <- data.frame(name=c(rep("a",3),rep("b",3), rep("c",3)), x=c(1:3,4:6, 7:9)))
(X <- split(df, df$name)) 
```

HTH。

# coronasdk - 拖动时如何生成多个硬币？

> ID：10432994
> 
> 赞同：-6
> 
> 时间：2012-05-03T14:00:34.537
> 
> 标签：coronasdk

在我的游戏中。我将硬币拖到某个地方。当我拖动新硬币时，新硬币已经生成以替换该硬币。请帮助我。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-05-03T14:28:34.293

我认为这会有所帮助。当旧硬币可以碰撞到任何其他地方时尝试碰撞事件生成新硬币。将值分配给新创建的硬币。