# StackOverflow 问答 11667000-11667999

# python - 如何使用 python 以编程方式生成 shapefile？

> ID：11667005
> 
> 赞同：0
> 
> 时间：2012-07-26T10:05:05.450
> 
> 标签：python, d3.js, shapefile

最终，我希望通过像 ogr2ogr 这样的地理转换器运行 shapefile 并产生坐标，然后我可以将其提供给 d3。

# c# - 从数据表中删除列

> ID：11667015
> 
> 赞同：3
> 
> 时间：2012-07-26T10:05:36.027
> 
> 标签：c#, linq

我有一个包含 20 列的数据表。但我不需要当前处理的所有列，除了 5。所以我做了以下操作来删除列

```
List<string> clmnames = new List<string>() { "clm6","clm7"..."clm20" };
foreach (string dcName in clmnames)
{
  TestAndRemoveColumn(dcName, ds.Tables["TestTable"]);
}

 private void TestAndRemoveColumn(string dcName,DataTable datatable)
 {
       DataColumnCollection dcCollection = datatable.Columns;
       if (dcCollection.Contains(dcName))
       {
           dcCollection.Remove(dcName);
       }
 } 
```

除了循环 15 次之外，还有其他方法可以轻松实现使用吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2016-02-11T18:35:34.123

尝试这个

```
List<string> listtoRemove = new List<string> { "CLM6", "CLM7", "CLM20" };
for (int i = dt.Columns.Count - 1; i >= 0; i--)
{
   DataColumn dc = dt.Columns[i];
   if (listtoRemove.Contains(dc.ColumnName.ToUpper()))
   {
       dt.Columns.Remove(dc);
   }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-02-07T17:02:13.590

在某些情况下，克隆 DataTable 并指定要复制的列可能更可取。

```
DataView view = new DataView(table);
DataTable table2 = view.ToTable(false, "clm6", "clm7", ...); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-26T10:09:46.997

问题似乎出在您的代码中，您从数据表中获取所有列，然后删除列，但您没有再次将列分配给该数据表，首先您获得列

```
 DataColumnCollection dcCollection = datatable.Columns; // get cols
   if (dcCollection.Contains(dcName))
   {
       dcCollection.Remove(dcName); /// remove columns
     // but you have not updated you datatable columns.
        here should be something like this
       datatable.Columns = dcCollection; /// i don't know this will work or not check it
   } 
```

尝试这个

```
 DataTable dt;
 dt.Columns.Remove("columnName");
 dt.Columns.RemoveAt(columnIndex); 
```

您可以将它们用作

```
private void TestAndRemoveColumn(string dcName,DataTable datatable)
{
    DataTable dt = datatable; 
    dt.Columns.Remove("dcName");      
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-26T10:45:56.570

或者，您可以像这样只选择所需的列（在您的情况下只有 5 个）。

```
 DataTable dt = new DataTable();
        dt.Columns.Add("ID");
        dt.Columns.Add("Value");

        dt.Rows.Add("1", "One");
        dt.Rows.Add("2", "Two");

        string[] arr= new string[1];
        arr[0] = "Value";//add the required columns to the array

        //return only the required columns.
        DataTable dt2 = dt.DefaultView.ToTable(false, arr); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-26T10:10:44.220

您可以将要删除的列与可用列连接起来：

```
var keepColNames = new List<String>(){ "clm5" };
var allColumns   = tbl.Columns.Cast<DataColumn>();
var allColNames  = allColumns.Select(c => c.ColumnName);
var removeColNames = allColNames.Except(keepColNames);
var colsToRemove = from r in removeColNames
                   join c in allColumns on r equals c.ColumnName
                   select c;
while (colsToRemove.Any())
    tbl.Columns.Remove(colsToRemove.First()); 
```

如果您知道您只有很少的剩余列，则可以添加列：

```
var colsToAdd = (from keepCol in keepColNames
                 join col in tbl.Columns.Cast<DataColumn>()
                 on keepCol equals col.ColumnName
                 select col).ToList();
tbl.Columns.Clear();
foreach (var colToAdd in colsToAdd)
    tbl.Columns.Add(colToAdd); 
```

# jquery - Highcharts图表大小的动态变化

> ID：11667016
> 
> 赞同：0
> 
> 时间：2012-07-26T10:05:39.007
> 
> 标签：jquery, size, alignment, highcharts

我对使用 Highcharts 制作的图表的大小有疑问。为了更好地理解，我附上了当前情况的截图。我希望所有馅饼的大小实际上都相同，并且它们应该水平对齐。由于这些值是动态的，我不能只通过反复试验将图表容器的高度设置为正确的大小。

这是一个图表和相关容器的代码：

```
var auftrag;
$(document).ready(function() {
    auftrag = new Highcharts.Chart({
        chart: {
            renderTo: 'angebot-container',
            height: 400,
            plotBackgroundColor: '#f5f5f5',
            backgroundColor: '#f5f5f5',
            plotBorderWidth: null,
            plotShadow: false
        },
        credits: {
            enabled: false
        },
        title: {
            text: ''
        },
        tooltip: {
            formatter: function() {
                return '<b>'+ this.point.name +'</b>: '+ Highcharts.numberFormat(this.y, 0, ',', '.') +' €';

            },
            positioner: function () {
                return { x: 3, y: 40 };
            }
        },
        legend: {
            layout: 'vertical'
        },
        plotOptions: {
            pie: {
                allowPointSelect: true,
                cursor: 'pointer',
                dataLabels: {
                    enabled: false
                },
                showInLegend: true
            }
        },
        series: [{
            type: 'pie',
            name: '',
            data: [
                <?php
                foreach ($offerPie as $offer) {
                    echo '[\'' . utf8_encode(shorten_word($offer['company'], 20, '...')) . '\', ' . $offer['summe'] . '],';
                }
                ?>
            ]
        }]
    });
}); 
```

这是容器的标记：

```
<div class="chart" id="angebot-container" style="min-width: 250px; margin: 0 auto"></div> 
```

我尝试了几件事，但我什至没有接近我想要的。问题是，图例中的项目可以改变，图例的高度会改变实际饼图的高度和宽度。

![这是它目前的样子](../Images/cc8c46c29dc37c0714e279c4e26e6255.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T01:41:35.797

移动你的传奇怎么样？

```
...
legend: {
    layout: 'vertical',
    align: 'right',
    verticalAlign: 'top',
    y: 100
},
... 
```

[**演示**](http://jsfiddle.net/CqJkr/)

# c# - Img 标签未在 Windows azure 云服务中显示图像

> ID：11667019
> 
> 赞同：4
> 
> 时间：2012-07-26T10:05:44.780
> 
> 标签：c#, jquery, asp.net-mvc-3, jquery-ui, azure

我将我的 MVC-3 项目部署在`windowsAzure cloud service`. 然后当我打开它时

`staging url`. 这些图像未显示在我的应用程序中。我的图像`src`是一个相对地址，即：

```
<img src="/images/1.jpg" alt="Lion" /> 
```

我也在使用 jquery-UI，但它（按钮）之类的插件也不起作用。我使用了循环插件，分页插件这些也不起作用。有什么问题 ？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-26T10:09:46.507

尽管您的路径“出现”是相对的，但您仍需要使用`Url helper`正确导航文件夹结构。尝试使用以下内容：

```
<img src='@Url.Content("~/images/1.jpg")' alt="Lion" /> 
```

所有远程托管都是善变的，Azure 也不例外。如果我省略了帮助器，这个问题**总是让我感到困惑。**`@Url.Content()`我确信这会奏效。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-26T11:13:34.623

问题可能是因为您的图像未**在 MVC 项目中导入**。部署云服务时，仅部署项目中的资源。仅在您的文件系统中的资源不是。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-09-06T02:35:01.867

我遇到了同样的问题并做了以下事情：

1.  我的图像文件夹在 \Content 目录之外，因此，我在这个目录中创建了一个目录，所以现在我有了 \Content\images
2.  我现在将我的图像移动到这个新目录
3.  在解决方案资源管理器中右键单击图像文件夹名称并单击选项“包含在项目中”，我还右键单击图像本身并选择相同的选项
4.  已发布，瞧，它奏效了！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-10-25T06:01:13.997

我遇到过同样的问题。我远程桌面到我在 Azure 中的服务器，打开 IIS，转到我有图像的文件夹并尝试浏览它，我收到内部服务器错误，告诉我“无法访问请求的页面，因为页面的相关配置数据是无效的”。问题在于这个 staticContent 定义：

```
<mimeMap fileExtension=".mp4" mimeType="video/mp4"/> 
```

所以我打开了 web.config，搜索了“mp4”并删除了我定义 mimeMap 的部分。

之后我可以浏览图像，当我在本地机器上刷新页面时，所有图像都会显示出来。

然后我从我的 Web.Release.config 文件中删除了那个 mimeMap 定义。我之所以创建它，是因为之前我已将这个项目发布为 azure 中的网站，并且我无法使用该标签提供 mp4 视频，但在使用云服务时似乎没有必要这样做。

希望这可以帮助。

# javascript - 使用 valums ajax 上传器从上传列表中删除特定文件

> ID：11667020
> 
> 赞同：1
> 
> 时间：2012-07-26T10:05:55.930
> 
> 标签：javascript, ajax, file-upload

当使用**valums ajax 上传**器上传文件时，我们会得到文件名和文件大小的文件列表。我希望该列表带有**文件名、文件大小和文件的删除链接**。这样当用户单击删除时，文件应该会从显示的列表中消失。我成功地获得了每个文件的删除链接，但是由于我对 JavaScript 的了解较少，因此无法按我的意愿进行处理。如果有人可以提供帮助，那就太好了。这就是我到目前为止所做的。

```
 function deleteme(id){
 //something like this
     var item = this._getItemByFileId(id);                
     qq.remove(this._find(item));
 }     

fileTemplate:'<li>' +
            '<span class="qq-upload-file"></span>' +
            '<span class="qq-upload-spinner"></span>' +
            '<span class="qq-upload-size"></span>' +
            '<a class="qq-upload-cancel" href="#">Cancel</a>' +
            '<span class="qq-upload-failed-text">Failed</span>' +
            '<a class="qq-upload-del-text" href="javascript:deleteme(this.id);">Delete</a>' +
            '</li>', 
```

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-01T14:06:48.510

我使用的是 FileUploaderBasic 版本并遇到了同样的问题。所以我做了一个DIY删除

这是完整的示例：

```
var $fub = $('#fine-uploader-basic'),
                                    $messages = $('#upload-messages');

                                // try the basic uploader 

                                var uploader = new qq.FileUploaderBasic({
                                        button: $fub[0],
                                        action: base_ajax_url + 'upload',
                                        debug: true,
                                        autoUpload: false,
                                        allowedExtensions: ['jpeg', 'jpg', 'gif', 'png'],
                                        sizeLimit: 204800, // 200 kB = 200 * 1024 bytes
                                        // the method name really should be onSelect 
                                        onSubmit: function(id, fileName) {

                                            var _self = this;

                                            var entry = $('<div id="file-' + id + '" class="alert" style="margin: 10px 0 0">' + fileName + ' <span class="qq-upload-cancel close">&times;</span></div>'
                                                ).appendTo(
                                                    $messages[0]
                                                ).find('.qq-upload-cancel').click(function() {
                                                    _self._storedFileIds.splice(_self._storedFileIds.indexOf(id) , 1);
                                                    $($(this).parent()).remove();
                                                return false;
                                                });

                                        },
                                        onUpload: function(id, fileName) {
                                            $('#file-' + id).addClass('alert-info')
                                                .html('<img src="/sites/all/themes/pb_admin/images/loading.gif" alt="Initializing. Please hold."> ' +
                                                'Initializing ' +
                                                '"' + fileName + '"');
                                        },
                                        onProgress: function(id, fileName, loaded, total) {
                                            if (loaded < total) {
                                              progress = Math.round(loaded / total * 100) + '% of ' + Math.round(total / 1024) + ' kB';
                                              $('#file-' + id).removeClass('alert-info')
                                                              .html('<img src="/sites/all/themes/pb_admin/images/loader.gif" alt="In progress. Please hold."> ' +
                                                                    'Uploading ' +
                                                                    '"' + fileName + '" ' +
                                                                    progress);
                                            } else {
                                              $('#file-' + id).addClass('alert-info')
                                                              .html('<img src="/sites/all/themes/pb_admin/images/loader.gif" alt="Saving. Please hold."> ' +
                                                                    'Saving ' +
                                                                    '"' + fileName + '"');
                                            }
                                        },
                                        onComplete: function(id, fileName, responseJSON) {
                                            if (responseJSON.success) {
                                              $('#file-' + id).removeClass('alert-info')
                                                              .addClass('alert-success')
                                                              .html('<i class="icon-ok"></i> ' +
                                                                    'Successfully saved ' +
                                                                    '"' + fileName + '"');
                                            } else {
                                              $('#file-' + id).removeClass('alert-info')
                                                              .addClass('alert-error')
                                                              .html('<i class="icon-exclamation-sign"></i> ' +
                                                                    'Error with ' +
                                                                    '"' + fileName + '": ' +
                                                                    responseJSON.error);
                                            }
                                        }
                                     }); 
```

（onSubmit 的名称有点问题......无论如何）

我试图调用 onCancel 方法（但抛出未定义的异常）。

然后这个工作 - 通过从**_storedFileIds**数组中删除 id。就是这样。

# opencv - 如何使用我自己的 c/c++、基于 OpenCV 的软件将图像发送到投影仪？

> ID：11667021
> 
> 赞同：1
> 
> 时间：2012-07-26T10:06:11.593
> 
> 标签：opencv, projector, screen-projection

我想要的是，我想使用我自己用 C/C++、OpenCv 语言编写的软件将图像发送到投影仪。那么，是否有任何支持此功能的库。实际上，我正在研究 3D 扫描仪，因此对于 3D 扫描仪，我必须将图像发送到投影仪以显示到对象上，而对于实时，我必须直接从我自己的软件发送图像以进行进一步处理。

与 OpenCV 一样，它可以初始化任何相机并具有捕获能力。OpenCV中有什么方法可以初始化投影仪并将图像发送到投影仪以使用我自己的方式显示？

# c - 如何确保在其他库的析构函数之前调用析构函数？

> ID：11667022
> 
> 赞同：0
> 
> 时间：2012-07-26T10:06:14.780
> 
> 标签：c, gcc

我有两个共享库：mylib 和 loglib（名称已更改）。两者都有析构函数（gcc 的扩展）。mylib 的析构函数需要loglib 的函数。这边走：

来自 libmy.so 的 mylib.c：

```
void __attribute__ ((destructor)) mylib_destructor()
{
    loglib_write_log("destructor");
} 
```

来自 liblog.so 的 loglib.c：

```
void loglib_write_log( const char* txt )
{
   fprintf( log_file, "%s\n", txt );
}

void __attribute__ ((destructor)) loglib_destructor()
{
    if( log_file )
    {
        fclose( log_file );
        log_file = NULL;
    } 
} 
```

如您所见，如果`loglib_destructor()`在之前调用会出现问题`mylib_destructor()`： fprintf 将获得 NULL 指针参数。

我无法更改 loglib.c。

如何确保`mylib_destructor`在其他库的析构函数之前调用它？

我不想为 设置最高优先级`mylib_destructor`，因为 mylib 的用户可能希望为自己的析构函数使用更高的优先级。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T10:14:17.987

从`gcc`文档：

> 您可以提供一个可选的整数优先级来控制构造函数和析构函数的运行顺序。具有较小优先级编号的构造函数在具有较大优先级编号的构造函数之前运行；相反的关系适用于析构函数。因此，如果您有一个分配资源的构造函数和一个释放相同资源的析构函数，则这两个函数通常具有相同的优先级。构造函数和析构函数的优先级与为命名空间范围的 C++ 对象指定的优先级相同（请参阅 C++ 属性）。

你试过这个吗？

它不必是 的最高优先级`mylib`，只要足够大即可。如果它被记录在案，你的图书馆的用户可以依赖它。

# c++ - 如何在 OMNeT++ 中创建消息 (.msg) 的子类？

> ID：11667026
> 
> 赞同：0
> 
> 时间：2012-07-26T10:06:18.263
> 
> 标签：c++, parent-child, omnet++

我想知道是否可以创建消息声明的子类（扩展 cPacket 的文件 *.msg，请参阅[OMNeT++ 模拟库](http://www.omnetpp.org/doc/omnetpp/api/classcPacket.html)）。到目前为止我尝试过的是：

```
packet childPacket : parentPacket{...} 
```

和

```
parentPacket childPacket {...} 
```

两者都不能由*opp_msgc*编译。

因此，到目前为止，我还没有找到实现这一目标的方法，我非常感谢任何提示。

干杯
- 亚历克斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T12:02:26.117

解决方案非常简单，很可能只是表明我缺乏 C++ 知识（我认为“扩展”只是在 java 中使用）......

最后，我只需键入即可实现上述目标

```
packet childPacket extends parentPacket{...} 
```

天哪，这里好热……

# php - 负回溯中的反向引用

> ID：11667031
> 
> 赞同：1
> 
> 时间：2012-07-26T10:06:28.713
> 
> 标签：php, regex

以 aa 或 bb 开头。以它结束（反向引用）。并且中间没有它。

没有“或”和反向引用也没关系——`aa.*?(?!aa).*?aa`
但它不适用于它们： `(aa|bb).*?(?!\1).*?\1`

```
echo preg_match("@(aa|bb).*?(?!\\1).*?\\1@", 'aaxxaaxaa'); // 1 ??
echo preg_match("@(aa|bb).*?(?!\\1).*?\\1@", 'aaxxxaa'); // 1 
```

怎么了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T10:08:21.753

您需要检查**每个字符**的否定条件。

```
(aa|bb)((?!\\1).)*\\1 
```

您还需要添加锚点。

```
^(aa|bb)((?!\\1).)*\\1$ 
```

在线查看它：[ideone](http://ideone.com/mQxgG)

# c# - 从 FileSystemWatcher 错误中恢复的最佳实践是什么？

> ID：11667041
> 
> 赞同：7
> 
> 时间：2012-07-26T10:07:32.833
> 
> 标签：c#, .net, exception-handling, filesystemwatcher

提出一个`FileSystemWatcher.Error`事件后，我不知道下一步该做什么。异常可以是[相对]较小的异常，例如

> 目录中一次更改太多

这不会影响 watcher 的观看过程，但它也可能是一个大问题 - 例如被监视的目录被删除，在这种情况下 watcher 不再起作用。

我的问题是处理错误事件的最佳方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-26T10:13:19.987

肯定取决于错误吗？

1.  如果由于缓冲区溢出（许多更改）而导致数据过多，请执行列表目录并获取您所追求的更改。
2.  如果由于您没有足够快地处理 FileSystemWatcher 事件而导致数据过多，请确保您正在有效地处理它。
3.  已删除的目录，除了处理 FileSystemWatcher 或可能再次监视父目录以重新创建该目录名称之外，无法对其执行任何操作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-26T10:12:39.717

我会简单地获取内部异常类型，然后根据每个错误决定要做什么（重新启动或失败）。

所以

```
myWatcher.Error += new ErrorEventHandler(OnError); 
```

跟随

```
private static void OnError(object source, ErrorEventArgs e)
{
    if (e.GetException().GetType() == typeof(InternalBufferOverflowException))
    {
        //  This can happen if Windows is reporting many file system events quickly 
        //  and internal buffer of the  FileSystemWatcher is not large enough to handle this
        //  rate of events. The InternalBufferOverflowException error informs the application
        //  that some of the file system events are being lost.
        Console.WriteLine(("The file system watcher experienced an internal buffer overflow: " + e.GetException().Message));
    }
} 
```

# android - Android WebView 内容不合理

> ID：11667043
> 
> 赞同：1
> 
> 时间：2012-07-26T10:07:47.867
> 
> 标签：android, android-webview, text-justify

```
I read all possible questions/response on stackoverflow, but i still can't do what i would like.

I created an application to show News
    1\. Used**Thoolika.ttf** Unicode font. 
    2.Now I am using **AnjaliOldLipi.ttf** font
    3.Older data was in the form **c&not;&yen;Vvp&cent;: d&iexcl;...**.
    4.New data is in the form **&#3384 ; &#3394 ; &#3370 ; &#3405 ; &#3370 ;** . 
```

我的问题是我无法在 webview 中证明这个消息的合理性。为此，我使用下面给出的 html。

```
 <html>
    <head>
    <meta http-equiv=Content-Type content=text/html; charset=UTF-8 />
    <meta name=viewport content=width=device-width; initial-scale=1.0; maximum-scale=5.0; user-scalable   = yes /><style>@font-face { font-family: 'Anjali';src: url('file:///android_asset/fonts/**AnjaliOldLipi.ttf'**);}body { font-family: 'Anjali';}</style></head><body style=font-family:Anjali;margin:5px;><div style=padding:5px;**text-align:justify;** >
    <span style=color:#3070AC;font-family:Anjali;font-size:20px;font-weight:bold;text-decoration:none;>NEWS TITLE</span><br>
    <div style=width:100%;text-align:right;padding-top:2px;padding-right:2px;color:#BCBCBC;font-family:monospace;font-size:11px;><i>NEWS DATE</i></div></div>
    <div style=padding-top:5px;padding-left:5px;padding-right:5px;color:#000000;font-family:Anjali;font-size:14px;text-decoration:none;text-align:;>
    NEWS CONTENT
    </div></body></html> 
```

我如何对齐此 webview 的左侧和右侧（**对齐**）。

# java - 如何在java中启用断言

> ID：11667044
> 
> 赞同：-3
> 
> 时间：2012-07-26T10:07:54.167
> 
> 标签：java, assert

我正在使用 eclipse 并收到错误 assertArrayEquals(expectedPos, sent.getPosTags().toArray()); 没有定义？我已经进口了

导入静态 org.junit.Assert.*；

不知道如何解决？

```
 ArrayList<Range> gotRanges = new ArrayList<Range>();
    Iterables.addAll(gotRanges, sent.getNpChunkRanges());

    assertEquals(expectedLength, sent.getLength()); 
```

*   **
*   **assertArrayEquals(expectedPos, sent.getPosTags().toArray());**

    2.  **assertArrayEquals(expectedToks, sent.getTokens().toArray());**

** assertEquals(expectedRanges, gotRanges);

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T11:44:28.480

目前尚不清楚您的哪个 assertArrayEquals 有问题，但至少对于您传入的一个参数，String[] 作为第一个参数，Object[] 作为第二个参数。如果您查看 Assert 类的 JavaDoc [http://junit.sourceforge.net/javadoc/org/junit/Assert.html](http://junit.sourceforge.net/javadoc/org/junit/Assert.html)，则没有采用这两个参数的方法。

检查您传入的变量的类型（我们不能这样做，因为您没有在代码中包含所有定义）

*此外*，如果一个是对象数组，一个是字符串数组，那就是它们不相等的线索：-)

对于您提到的第二段代码

```
double[] expectedJane = { 1.0, 1.0, 1.0 };
double[] gotJane = StringFeatures.featureSet.featurizeToDouble("jane");       
assertArrayEquals(expectedJane, gotJane, 0.001); 
```

您正在调用方法 assertArrayEquals(double[], double[], double)。看看javadoc，那个方法存在吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T10:10:57.160

你的消息不清楚。

您似乎没有为[assertEquals](http://www.cs.laurentian.ca/badams/c2006/junit-docs/junit/framework/Assert.html)方法使用正确的类型。

# ios - 滚动 RMMapView (MapBox SDK) 时 RMPath 闪烁并“振动”

> ID：11667049
> 
> 赞同：3
> 
> 时间：2012-07-26T10:08:12.390
> 
> 标签：ios, route-me

我正在使用带有离线地图的 MapBox SDK。我正在向 mapView 添加一个 RMPath 叠加层，一切都显示正常。

**问题号 1：** 在滚动地图时，RMPath 叠加层也会滚动，但有时它会在几分之一秒内以偏移量（刚刚出现的位置）绘制，之后它会到达正常位置，并且这会产生闪烁的感觉。为什么会发生这种情况，我该如何摆脱它？

**问题号 2：** 滚动地图时，RMMarker 和 RMPath 叠加层“振动”，就像滚动地图时叠加层试图“赶上”它的正常位置一样。它只有几个像素，但放大后看起来很糟糕。发生这种情况很可能是因为仅当地图移动超过一个像素时才调用 -draw() 方法。如何使叠加层滚动更平滑？

我的搜索结果完全没有，所以欢迎任何帮助。

ps 在 iPhone3GS 和 iPhone4S 上测试过，同样的问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T10:03:51.353

不推荐使用 RMPath，请尝试改用 RMShape。也不要忘记在将注释添加到地图之前设置它的边界框（setBoundingBoxFromLocations 可能很有用）。

例子 ：

```
pathAnnotation = [[RMAnnotation alloc]initWithMapView:mapView    coordinate:CLLocationCoordinate2DMake(long,lat) andTitle:@"path"];
[pathAnnotation setBoundingBoxFromLocations:pathLocations]; 
```

然后在你的 layerForAnnotation() 中：

```
RMShape *path = [[RMShape alloc] initWithView:mapView] ;
[path setLineColor:[UIColor colorWithRed:0.2 green:0.7 blue:1 alpha:0.7]];
[path setLineWidth:4];

// Create real coordinates from data
for(int idx = 0; idx < pathPoints.count; idx++)
{

    CLLocationCoordinate2D coords = CLLocationCoordinate2DMake(pathPoints[idx].latitude,pathPoints[idx].longitude);

    // First point
    if( idx == 0){
        [path moveToCoordinate:coord];
    }else{
        [path addLineToCoordinate:coord];
    }
}
return path; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T17:33:10.787

对于您的问题 n°2，我认为这可能与[MapBox ios sdk 上的这个问题有关](https://github.com/mapbox/mapbox-ios-sdk/issues/72)

对于问题 n°1，我注意到相同的行为，但仅在地图滚动/缩放时添加注释时。地图稳定后，注释会转到正确的位置。我仍在为此进行调查。

# c# - 文本框上的附加文本仅在最后显示在 wpf 中

> ID：11667053
> 
> 赞同：0
> 
> 时间：2012-07-26T10:08:25.903
> 
> 标签：c#, wpf, textbox

我的程序中有一个简单的文本框。其他功能：来自用户 textbox1 的另一个输入和一个按钮。一旦用户在 textbox1 中输入一个值并按下按钮，我就开始检查并向用户打印消息。我的问题是我没有实时看到这些消息，一次一个。消息立即出现，最后出现。我没有定义数据绑定，因为我认为既然它是一件简单的事情，我就不需要它，还是我错了？这是我程序的一小部分，它在按钮单击事件处理程序中。

```
MainText.AppendText("Starting Refiling...\u2028");
foreach (DocumentData doc in Docs)
{
    try
    {
        wsProxy.RefileDocument(doc);
        MainText.AppendText(String.Format("Refilling doc # {0}.{1}\u2028", doc.DocNum, doc.DocVer));
    }
    catch (Exception exc)
    {
        if (exc.Message.Contains("Document is in use") == true)
            MainText.AppendText(String.Format("There was a problem refilling doc # {0}, it is in use.\u2028",doc.DocNum));
        else
            MainText.AppendText(String.Format("There was a problem refilling doc # {0} : {1}.\u2028", doc.DocNum, exc.Message));
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T13:15:05.103

您正在 GUI 线程中进行所有循环/打印。基本上，您是在给它展示新项目，而不是给它时间展示它们。创建一个[后台工作人员](http://msdn.microsoft.com/en-us/library/system.componentmodel.backgroundworker.aspx)，让他在您发布的 foreach 循环中完成工作。这应该允许 UI 线程在文本更改时更新视图，而不是在最后获得所有更改的更新。我发布的链接包括有关如何使用 backgroundworker 类的示例，但这就是我要做的。

创建一个后台工作者：

```
private readonly BackgroundWorker worker = new BackgroundWorker(); 
```

初始化他：

```
public MainWindow()
  {
     InitializeComponent();

     worker.DoWork += worker_DoWork;
  } 
```

为他创建一个任务：

```
void worker_DoWork( object sender, DoWorkEventArgs e)
{
   // Set up a string to hold our data so we only need to use the dispatcher in one place
   string toAppend = "";
   foreach (DocumentData doc in Docs)
   {
      toAppend = "";
      try
      {
         wsProxy.RefileDocument(doc);
         toAppend = String.Format("Refilling doc # {0}.{1}\u2028", doc.DocNum, doc.DocVer);  
      }
      catch (Exception exc)
      {
         if (exc.Message.Contains("Document is in use"))
            toAppend = String.Format("There was a problem refilling doc # {0}, it is in use.\u2028",doc.DocNum);
         else
            toAppend = String.Format("There was a problem refilling doc # {0} : {1}.\u2028", doc.DocNum, exc.Message);
      }

      // Update the text from the main thread to avoid exceptions
      Dispatcher.Invoke((Action)delegate
      {
         MainText.AppendText(toAppend);
      });
   }
} 
```

当你得到按钮按下事件时启动他：

```
private void Button_Click(object sender, RoutedEventArgs e)
  {
     worker.RunWorkerAsync();
  } 
```

# c# - C#：接口实现结构和覆盖

> ID：11667055
> 
> 赞同：0
> 
> 时间：2012-07-26T10:08:28.847
> 
> 标签：c#, inheritance, interface, overriding

我有一个具有这种结构的 C# 解决方案：

*   项目一：包含一个道（可以包含多个）
*   项目2：包含一个接口（只有一个）
*   项目3：一个自带接口的wcf服务

*   项目1中的dao实现了项目2中的接口。

*   项目3中的wcf服务接口实现/继承/继承了项目2中的接口。

我遇到的问题是需要项目 2 中的接口来描述我的 dao 类。需要wcf接口来描述我在项目3中的wcf服务中可以使用哪些功能。这两个接口完全一样，除了wcf属性在wcf接口上，因为dao中的所有功能都需要通过wcf 服务文件也是如此。实现或更确切地说是 dao 类可以更改/交换，但必须始终遵循相同的结构，因此需要接口。现在，当我尝试在我的 wcf 接口中实现它时，这两个接口是相同的，我被告知我必须有效地覆盖我派生的接口中的所有方法。这是正确的做法吗？wcf 接口需要实现项目 2 中的接口，以便提供我们需要的 dao 中的所有功能（这就是全部）。

以前我的项目设置如下：

*   项目 1：包含 dao
*   项目 2：也包含一个带有 wcf 属性的接口
*   项目 3：不包含接口，只包含 wcf 服务

dao 和 wcf 服务都实现了与项目 2 相同的接口。将 wcf 属性放在接口上是否会在与 dao 一起使用时产生任何不利影响？我可能遇到的一个问题是 wcf 接口最终可能具有基本接口没有的额外功能，因此我认为以前的结构是错误的。说实话我不知道。

我知道我可能没有很清楚地解释它，实际上这里涉及两个甚至三个问题，但这是最好的表达方式。我想我的三个主要问题如下：

1.  哪种继承/实现结构最好，为什么？
2.  在普通类中实现 wcf 服务使用的相同接口会产生任何不良影响（由 wcf 属性引起，即 [ServiceContract]、[OperationContract]）。
3.  覆盖基接口提供的所有方法是否正确？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T10:28:07.587

您首先定义的结构很好，您有一个实现接口的接口，并且子接口可以添加不在基础中的新方法。但是，您不需要在子接口中定义基本方法，因为它们都是继承的，所以现在您的子接口将为空。在此模型中，子接口可以具有 WCF 属性。

现在，您是否必须在 WCF 服务中实现所有这些方法？很简单，因为这就是接口的作用——它们定义了必须实现的契约。

# ant - 对同一模块的多个工件的依赖

> ID：11667056
> 
> 赞同：0
> 
> 时间：2012-07-26T10:08:31.240
> 
> 标签：ant, ivy

我刚刚做了一个非常丑陋的黑客攻击。

我有一个模块 A 产生两个罐子。

```
moduleA.jar and moduleA.test.jar 
```

module.test.jar 由同一存储库中的其他项目使用，不会进一步发布到其他存储库。

我将此添加到 moduleA 的 ivy.xml

```
<publications>
    <artifact name="moduleA" type="jar" ext="jar" conf="compile"/>

    <artifact name="moduleA.test" type="jar" ext="jar" conf="test"/>
</publications> 
```

我如何在 moduleB 中使用它。我知道 Maven 不支持每个模块的多个工件，我在某处读到 IVY 支持。我只是似乎没有得到它写。

我在moduleB的ivy.xml中试过这个：

```
<dependency org="my.org" name="moduleA" rev="SNAPSHOT" conf="compile,test->default,test" />
<dependency org="my.org" name="moduleA.test" rev="SNAPSHOT" conf="compile,test->default,test" /> 
```

但这显然不起作用，因为“名称”是模块的名称而不是工件的名称。我有一个使用类型属性的工作：在moduleA中：

```
<artifact name="moduleA" type="test.jar" ext="jar" conf="test"/> 
```

在模块B中：

```
<dependency org="my.org" name="moduleA" rev="SNAPSHOT" conf="compile,test->default,test" /> 
```

这有效，但看起来很丑陋。因为我必须在 ANT 中生成如下所示的文件：

```
moduleA-SNAPSHOT.test.jar 
```

依赖同一模块的多个工件的任何巧妙解决方案？

这个问题 id 不同于： [如何解决模块 X 的多个工件被检索到 Apache Ivy 中的同一个文件？](https://stackoverflow.com/questions/7283757/how-do-i-solve-multiple-artifacts-of-the-module-x-are-retrieved-to-the-same-file)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T19:23:31.320

假设模块 A 如下所示：

```
<info organisation="my.org" module="moduleA" .../>

<configurations>
    <conf name="compile description="???"/>
    <conf name="test    description="???"/>
    ..
</configurations>

<publications>
    <artifact name="moduleA" type="jar" ext="jar" conf="compile"/>
    <artifact name="moduleA.test" type="jar" ext="jar" conf="test"/>
</publications> 
```

以下模块 B 声明将检索 moduleA.jar

```
<dependency org="my.org" name="moduleA" rev="latest.integration" conf="default->compile" /> 
```

以下模块 B 声明将检索 moduleA.test.jar

```
<dependency org="my.org" name="moduleA" rev="latest.integration" conf="default->test" /> 
```

它是使它工作的配置映射：

```
default->compile
^          ^
|          |
Local configuration
           |
           Remote configuration 
```

本地配置不必是“默认”。显然，如果模块 B 也使用配置，您可以使用其中之一。

# jquery - 如何使用jQuery查找不在特定id容器中的给定类的所有元素

> ID：11667060
> 
> 赞同：1
> 
> 时间：2012-07-26T10:08:38.970
> 
> 标签：jquery

它可能很简单，但我做不到。我想查找并选择一个类中不包含在给定 id 下的所有元素。例如：在下面，如何在 id "con" 之外找到类 "me" 的元素

```
<div id="con">
    <div class="me">hi1</div>
    <div class="me">hi2</div>
</div>
    <div class="me">hi3</div>
    <div class="me">hi4</div> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-26T10:14:45.427

```
$(".me").not("#con .me"); 
```

使用[`not()`](http://api.jquery.com/not/)您可以指定元素不应匹配的选择**器**。

[http://jsfiddle.net/AufVD/](http://jsfiddle.net/AufVD/)

* * *

这也可以写成：

```
$(".me:not(#con .me)"); 
```

[http://jsfiddle.net/AufVD/1/](http://jsfiddle.net/AufVD/1/)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-26T10:20:10.980

您可以使用

`$('.me:not(#con)')`​​​​</p>

或者

```
$('.me').not('#con') 
```

# java - 使用 httpclient 进行 URL 编码

> ID：11667062
> 
> 赞同：9
> 
> 时间：2012-07-26T10:08:42.643
> 
> 标签：java, encoding, apache-httpclient-4.x

我有一个需要获取其内容的 URL 列表。URL 带有特殊字符，因此需要进行编码。我使用 Commons HtpClient 来获取内容。

当我使用：

```
GetMethod get = new GetMethod(url); 
```

我得到一个“无效的”非法转义字符“异常。当我使用

```
 GetMethod get = new GetMethod();
 get.setURI(new URI(url.toString(), false, "UTF-8")); 
```

尝试获取页面时出现 404，因为转到了一个空格`%2520`而不是`%20`.

我看过很多关于这个问题的帖子，其中大多数建议部分地构建 URI。问题是它是一个给定的 URL 列表，而不是我可以手动处理的。

这个问题还有其他解决方案吗？

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-26T10:37:17.403

如果您从它的字符串中创建一个新的 URL 对象，例如`URL urlObject = new URL(url)`，然后正确拆分它`urlObject.getQuery()`，`urlObject.getPath()`将查询参数解析为 List 或 Map 或其他东西，然后执行以下操作：

**编辑：**我刚刚发现 HttpClient Library 有一个`URLEncodedUtils.parse()`方法，您可以使用下面提供的代码轻松使用它。我将对其进行编辑以适应，但未经测试。

使用 Apache HttpClient 会是这样的：

```
URI urlObject = new URI(url,"UTF-8");
HttpClient httpclient = new DefaultHttpClient();
List<NameValuePair> formparams = URLEncodedUtils.parse(urlObject,"UTF-8");
UrlEncodedFormEntity entity;
entity = new UrlEncodedFormEntity(formparams);

HttpPost httppost = new HttpPost(urlObject.getPath());
httppost.setEntity(entity);
httppost.addHeader("Content-Type","application/x-www-form-urlencoded");

HttpResponse response = httpclient.execute(httppost);

HttpEntity entity2 = response.getEntity(); 
```

使用 Java URLConnection 会是这样的：

```
 // Iterate over query params from urlObject.getQuery() like
while(en.hasMoreElements()){
    String paramName  = (String)en.nextElement(); // Iterator over yourListOfKeys
    String paramValue = yourMapOfValues.get(paramName); // replace yourMapOfNameValues
    str = str + "&" + paramName + "=" + URLEncoder.encode(paramValue);
}
try{
    URL u = new URL(urlObject.getPath()); //here's the url path from your urlObject
    URLConnection uc = u.openConnection();
    uc.setDoOutput(true);
    uc.setRequestProperty("Content-Type","application/x-www-form-urlencoded");
    PrintWriter pw = new PrintWriter(uc.getOutputStream());
    pw.println(str);
    pw.close();

    BufferedReader in = new BufferedReader(new 
            InputStreamReader(uc.getInputStream()));
    String res = in.readLine();
    in.close();
    // ...
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-12-12T14:00:57.263

如果您需要使用请求 URI 进行操作，强烈建议使用`URIBuilder`Apache HttpClient 附带的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-12-12T12:57:23.550

试试看

```
GetMethod get = new GetMethod(url.replace(" ","%20")).toASCIIString()); 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-07-26T10:12:57.240

请使用[URLEncoder](http://docs.oracle.com/javase/1.4.2/docs/api/java/net/URLEncoder.html)类。
我在一个确切的场景中使用它，它对我来说效果很好。
我所做的是使用 URL 类来获取主机之后的部分
（例如 - 在 www.bla.com/mystuff/bla.jpg 这将是“mystuff/bla.jpg” - 你应该只使用 URLEncode这部分，然后再构造URL。

例如，如果原始字符串是“http://www.bla.com/mystuff/bla foo.jpg”那么：
编码-“mystuff/bla foo.jpg”得到“mystuff/bla%20foo.jpg”，然后将其附加到主机和协议部分：
“http://www.bla.com/mystuff/bla%20foo.jpg”
我希望这会有所帮助

# c++ - 同一个 c++ 类的所有实例是否共享一个 vtable，或者每个实例都有自己的？

> ID：11667063
> 
> 赞同：3
> 
> 时间：2012-07-26T10:08:45.007
> 
> 标签：c++, process, vtable

如果 Base 是基类，而 Derived 是派生类，并且有 25 个 Derived 实例，那么如何设置 vtable 以供所有实例访问？它们在内存中的什么位置？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-26T10:10:40.957

内存中的某处将有一个 vtable，可能与代码位于同一位置。该类的每个实例都将包含一个指向该类的 vtable 的指针，因此在您的情况下，所有 25 个实例都将包含一个指向该 vtable 副本的指针。

多重继承和虚继承使事情变得复杂，但原理是一样的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-26T10:20:44.517

允许编译器在 C++ 中实现他们想要的动态调度，我认为实际上根本不需要使用 vtable，但是找到没有的编译器是非常不寻常的。

在大多数情况下，我认为每个类（包含一些虚拟方法）都将拥有一个 vtable（因此，如果我有 5 个实例，`class A`我仍然只有 1 个 vtable），但不应以任何方式依赖此行为。

据我所知，非虚拟类不需要 vtables。

阅读您的问题似乎您认为每个对象都有自己的代码副本，我不确定，我不想指责您这样做，但以防万一......

谷歌类似：“c++ 对象在内存中的样子”

# android - 创建一个定时器来定期发送 HTTP 请求 - Android

> ID：11667064
> 
> 赞同：4
> 
> 时间：2012-07-26T10:08:46.280
> 
> 标签：android

我想结束从 Android 设备到 Web 服务器的 HTTP 请求，并定期（每分钟一次）检查数据库的特定数据。我无法为此实现计时器。

谢谢

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-26T10:18:29.090

```
public class MyActivity extends Activity {
Timer t ;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    t = new Timer();
    t.schedule(new TimerTask() {

        public void run() {

            //Your code will be here 

        }
      }, 1000);

   }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-26T10:13:44.783

尝试`AlarmManager`运行`Service`。我不建议您每分钟发送请求，除非它仅在用户手动触发此操作时发生。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-26T10:21:11.993

```
TimerTask doAsynchronousTask;
final Handler handler = new Handler();
Timer timer = new Timer();

doAsynchronousTask = new TimerTask() {

    @Override
    public void run() {

        handler.post(new Runnable() {
            public void run() {
                 if(isOnline){// check net connection
                  //what u want to do....
                }

            }
        });

    }

};

timer.schedule(doAsynchronousTask, 0, 10000);// execute in every 10 s 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-26T10:20:21.027

最简单的方法是循环处理程序：

```
private Handler iSender = new Handler() { 
    @Override
    public void handleMessage(final Message msg) { 
        //Do your code here
        iSender.sendEmptyMessageDelayed(0, 60*1000);
    }
}; 
```

要开始循环，请调用以下语句：

```
 iSender.sendEmptyMessage(0); 
```

# php - 检测选择了哪个下拉菜单并返回其值和 ID

> ID：11667068
> 
> 赞同：0
> 
> 时间：2012-07-26T10:09:08.003
> 
> 标签：php, javascript, jquery

我有几个下拉框。有什么方法可以检测使用 jquery 更改了哪个下拉列表？

```
<form id="products">
 <select id="Ram">
   <option value="0">4 GB</option>
   <option value="1">8 GB</option>
 </select>

 <select id="Hdd">
   <option value="0">300 GB</option>
   <option value="1">500 GB</option>
 </select>
</form> 
```

Javascript/Jquery

```
$(document).ready(function() {
  $('#products').change(function() {
     var value = $(this).val(); //In here I want to detect and return the value.
     alert(value); // Want to return dropdown ID and its selected value
  });
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-26T10:18:50.807

阿司匹林是对的，

我只会改进他的答案。

```
$(document).ready(function() {
  $('#products select').change(function() {
     var id = $(this).attr('id');
     var value = $(this).val();
     alert('ID ='+id+' Value ='+value);
  });
}); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-26T10:10:00.767

```
$(document).ready(function() {
  $('select').not('ids of select tags which you want to exclude seperated by a comma').change(function() {
     var id = $(this).attr('id');
     var value = $(this).val();
     alert('ID ='+id+' Value ='+value);
  });
}); 
```

# wpf - 无法在窗口本身上应用 WPF 主题

> ID：11667076
> 
> 赞同：1
> 
> 时间：2012-07-26T10:09:45.507
> 
> 标签：wpf, themes

我正在尝试应用[Windows Presentation Foundation (WPF)](http://wpf.codeplex.com/wikipage?title=WPF%20Themes) CodePlex 项目中的 ExpressionDark 主题。

我已将文件添加到`ExpressionDark.xaml`子`Themes`文件夹中，并将`App.xaml`文件更改为引用此文件：

```
<Application.Resources>
    <ResourceDictionary>
        <ResourceDictionary.MergedDictionaries>
            <ResourceDictionary
                Source="Themes/ExpressionDark.xaml" />
        </ResourceDictionary.MergedDictionaries>
    </ResourceDictionary>
</Application.Resources> 
```

当我运行程序时，样式会应用于所有控件，但不会应用于窗口本身。窗口的背景保持白色。我的理解是该样式适用于`Window`类，但不适用于派生类。

为了解决这个问题，我尝试在我的`app.xaml`文件中创建一个新样式，以便为我的自定义窗口类继承 Windows 样式：

```
<Application.Resources>
    <ResourceDictionary>
        <Style
            TargetType="{x:Type local:MainWindow}"
            BasedOn="{StaticResource {x:Type Window}}" />
        <ResourceDictionary.MergedDictionaries>
            <ResourceDictionary
                Source="Themes/ExpressionDark.xaml" />
        </ResourceDictionary.MergedDictionaries>
    </ResourceDictionary>
</Application.Resources> 
```

结果完全相同。

我也尝试过[WPF 的建议：主题冒险（第 2 部分）](http://www.nickdarnell.com/2010/01/wpf-adventures-in-theming-part-2/)。我添加到我的窗口定义中：

```
<Window
    x:Class="MyProject.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:vm="clr-namespace:MyProject.ViewModel"
    Title="MainWindow"
    Height="350"
    Width="525"
    Style="{DynamicResource {x:Type Window}}" /> 
```

没有更多的成功。

什么不见​​了？

PS：不知道是否重要，但我窗口的孩子是网格。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-13T23:05:46.760

在 Window XAML 中使用动态资源指定背景

```
<Window x:Class="HellowWorld.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Hellow World" Height="614" Width="821"
        Background="{DynamicResource WindowBackgroundBrush}"> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-26T10:49:49.733

上次我检查`Window`主题中没有样式。

# jquery - 在 Jquery 插件中访问变量

> ID：11667081
> 
> 赞同：-1
> 
> 时间：2012-07-26T10:09:56.233
> 
> 标签：jquery, jquery-plugins

```
(function ($) {
    $.fn.required = function (options) {
        var defaults = {
            controlid: 'none',
            custommessage: 'red',
            itemFunction: function () { },
            isValid: false;
            };
        }); 
```

这是我的 jquery 插件（不是完整代码）我想访问 isValid 外部插件我该怎么做

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T10:26:26.063

您在一个闭包内，因此无法从外部访问该变量。我会做的是：

```
(function ($) {
  $.fn.required = function (options) {
    var defaults = $.fn.required.defaults;
  };
  $.fn.required.defaults = {
    controlid: 'none',
    custommessage: 'red',
    itemFunction: function () { },
    isValid: false
  };
}); 
```

现在可以像这样访问变量：`$.fn.required.defaults.isValid`.

# spring - 使用 spring-security 更改方法调用的安全上下文

> ID：11667086
> 
> 赞同：7
> 
> 时间：2012-07-26T10:10:14.463
> 
> 标签：spring, spring-security

目前我正在使用 spring security 和`@PreAuthorize`annotations 来保护方法调用。现在，我想更改方法调用的身份验证令牌，例如 spring-security 的[run-as 身份验证替换](http://static.springsource.org/spring-security/site/docs/3.1.x/reference/runas.html)允许我这样做。

我可以根据每个方法配置替换吗？每个注释，SpEL 表达式......如果没有，是否有可能在 runAsManager 中找出调用了什么方法？我将如何为安全对象配置安全配置属性？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2014-07-05T17:33:17.360

我已经发布[了一篇](http://thatjavathing.blogspot.nl/2014/07/spring-security-run-as-example-using.html)关于结合`@PreAuthorize`.

1) 实现您自己的，基于任何自定义逻辑`RunAsManager`创建在方法执行期间使用的。`Authentication`下面的示例使用提供额外角色的自定义注释：

```
public class AnnotationDrivenRunAsManager extends RunAsManagerImpl {

        @Override
        public Authentication buildRunAs(Authentication authentication, Object object, Collection<ConfigAttribute> attributes) {
            if(!(object instanceof ReflectiveMethodInvocation) || ((ReflectiveMethodInvocation)object).getMethod().getAnnotation(RunAsRole.class) == null) {
                return super.buildRunAs(authentication, object, attributes);
            }

            String roleName = ((ReflectiveMethodInvocation)object).getMethod().getAnnotation(RunAsRole.class).value();

            if (roleName == null || roleName.isEmpty()) {
                return null;
            }

            GrantedAuthority runAsAuthority = new SimpleGrantedAuthority(roleName);
            List<GrantedAuthority> newAuthorities = new ArrayList<GrantedAuthority>();
            // Add existing authorities
            newAuthorities.addAll(authentication.getAuthorities());
            // Add the new run-as authority
            newAuthorities.add(runAsAuthority);

            return new RunAsUserToken(getKey(), authentication.getPrincipal(), authentication.getCredentials(),
                    newAuthorities, authentication.getClass());
        }
    } 
```

此实现将`@RunAsRole`在受保护的方法（例如）上查找自定义注释`@RunAsRole("ROLE_AUDITOR")`，如果找到，则将给定权限（`ROLE_AUDITOR`在本例中）添加到已授予权限的列表中。`RunAsRole`本身只是一个简单的自定义注解。

```
@Retention(RetentionPolicy.RUNTIME)
@Target(ElementType.METHOD)
public @interface RunAsRole {
    String value();
} 
```

2）实例化管理器：

```
<bean id="runAsManager"
    class="org.springframework.security.access.intercept.RunAsManagerImpl">
  <property name="key" value="my_run_as_key"/>
</bean> 
```

3）注册它：

```
<global-method-security pre-post-annotations="enabled" run-as-manager-ref="runAsManager">
    <expression-handler ref="expressionHandler"/>
</global-method-security> 
```

4）控制器中的示例用法：

```
@Controller
public class TransactionLogController {

   @PreAuthorize("hasRole('ROLE_REGISTERED_USER')") //Authority needed to access the method
   @RunAsRole("ROLE_AUDITOR") //Authority added by RunAsManager
   @RequestMapping(value = "/transactions",  method = RequestMethod.GET) //Spring MVC configuration. Not related to security
   @ResponseBody //Spring MVC configuration. Not related to security
   public List<Transaction> getTransactionLog(...) {
    ... //Invoke something in the backend requiring ROLE_AUDITOR
   {

   ... //User does not have ROLE_AUDITOR here
} 
```

**编辑：**`key` in 的值`RunAsManagerImpl`可以是您想要的任何值。[这是Spring 文档](http://springcert.sourceforge.net/sec-3/runas.html)关于其使用的摘录：

> 为确保恶意代码不会创建`RunAsUserToken`并呈现它以保证接受`RunAsImplAuthenticationProvider`，密钥的哈希存储在所有生成的令牌中。`RunAsManagerImpl`and`RunAsImplAuthenticationProvider`是在 bean 上下文中使用相同的键创建的：
> 
> ```
> <bean id="runAsManager"
>     class="org.springframework.security.access.intercept.RunAsManagerImpl"> 
> ```
> 
> ```
> <bean id="runAsAuthenticationProvider"
>     class="org.springframework.security.access.intercept.RunAsImplAuthenticationProvider"> 
> ```
> 
> 通过使用相同的密钥，`RunAsUserToken`可以验证每个密钥都是由已批准的`RunAsManagerImpl`. `RunAsUserToken`出于安全原因，它在创建后是不可变的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-24T07:03:16.770

我通过实现自己的方法来解决这个问题，`RunAsManager`该方法检查调用方法上的自定义注释并返回适当的令牌。

效果很好。

# android - MediaPlayer在Android中播放声音时如何突出显示文本？

> ID：11667088
> 
> 赞同：2
> 
> 时间：2012-07-26T10:10:15.523
> 
> 标签：android, text, media-player, highlight

我想在 TextView 中突出显示文本，因为 MediaPlayer 会播放预先录制的文本声音。（如卡拉OK）现在，我只想在声音的开头不覆盖任何文字，在声音的结尾处覆盖所有文字。（我突出显示的文本应该看起来像一个进度条。）

我尝试`isPlaying()`了 MediaPlayer 对象的方法，为了获取文本的索引，我计算了百分比。

我的代码如下。

```
while(mediaPlayer.isPlaying())
{
  int percentage = mediaPlayer.getCurrentPosition() / mediaPlayer.getDuration() * 100;
  int end = text.length() * percentage / 100;
  story.setText("Hello world!", BufferType.SPANNABLE);
  Spannable span = new SpannableString(story.getText());
  text = story.getText().toString();
  span.setSpan(new BackgroundColorSpan(0xFF00FF00), 0, end, Spannable.SPAN_EXCLUSIVE_EXCLUSIVE);
  story.setText(span);
} 
```

这似乎阻塞了线程，因为我的应用程序冻结了。我尝试使用 AsyncTask 但失败了。

你知道我该如何让它工作吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2018-04-14T21:31:51.990

这可能为时已晚，但迟到总比没有好，您可以通过使用`Handler`and 方法来实现`Handler#postDelay`

```
 private val runnable = object : Runnable {
    override fun run() {
        val string = textView.text.toString()
        val span = SpannableString(string)
        val end = textView.length() * percentage / 1000
        span.setSpan(BackgroundColorSpan(Color.RED), 0, end, Spannable.SPAN_EXCLUSIVE_EXCLUSIVE)
        textView.clearFocus()
        textView.setTextKeepState(span)
        percentage += 1 // to make the percentage increases, you can remove it
        handler.postDelayed(this, 1000)
    }

} 
```

并在任何你喜欢的地方调用这个方法

```
 handler.postDelayed(runnable, 1000) 
```

> 离开活动时不要忘记清除回调`handler.removeCallbacks(runnable)` ，否则会泄漏资源。
> 
> 当百分比达到 100% 时不要忘记停止删除回调，否则它将永远运行或只是崩溃`NullPointerException`。

祝你好运，快乐编码。

# html - html5语义元素和旧浏览器

> ID：11667094
> 
> 赞同：3
> 
> 时间：2012-07-26T10:10:37.650
> 
> 标签：html, internet-explorer, internet-explorer-8, semantic-markup

我即将为网页设计一个新的布局，并想利用这一刻来实现一些 html5 标记。

我首先想到的是语义元素（导航、标题、文章..）

检查[http://caniuse.com/#feat=html5semantic](http://caniuse.com/#feat=html5semantic)后，我注意到 IE8（及以下）不支持这些元素。这可能意味着我无法对期望连贯结果的语义元素进行样式设置。

该网站从 IE7/8 浏览器收到大量流量，我不知道如何继续。我听说过modernizr 和html5shiv，但我不知道现在最好的标准是什么..

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-26T10:13:30.347

您可以为它们设置样式。您只需运行[HTML5shiv](http://code.google.com/p/html5shiv/)或[Modernizr](http://modernizr.com/)。您还想添加一些 CSS 以使它们在默认情况下被阻止。

```
article, header, nav, section, footer
{
    display: block;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-26T10:38:48.557

除了通过客户端脚本之外，没有办法让旧版本的 IE 识别新元素。如果您决定可以忽略非 JavaScript 的使用，您可以使用其他答案中提到的一些工具，或者您可以自己动手——该技术很奇怪，但根本不是火箭科学，例如

```
 <script>
 document.createElement('nav');
 document.createElement('header');
 document.createElement('article');
 </script> 
```

除了使用新元素之外，更强大的解决方案是使用`div`带有`class`（或）属性的标记，例如`id`

```
 <nav><div="nav">...</div></nav> 
```

并使用类（或 id）选择器（如`.nav`. 这将是健壮的，它还将为您提供使用据称语义标记（如`nav`. （从未出现过任何切实的好处，但也许会出现一些好处。）

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-26T10:14:43.957

因为您只是在寻找一种方法来设置 HTML5 元素的样式，所以请使用 HTML5Shiv（专为此目的而设计）。Modernizr 包含更多功能。你不会使用它（从问题来看）。

这是源代码，以防您想知道：[https ://github.com/aFarkas/html5shiv/blob/master/src/html5shiv.js](https://github.com/aFarkas/html5shiv/blob/master/src/html5shiv.js)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-26T10:13:19.107

您可以（并且应该？）使用它们。一定要让它们在旧浏览器中显示得很好，我推荐 html5shiv。

[http://code.google.com/p/html5shiv/](http://code.google.com/p/html5shiv/)

我们在这里使用它：[米德兰兹健康网络](http://provider.midlandshn.health.nz/)

# ruby - Yard：为编译的文档指定不同的路径（而不是 doc/）？

> ID：11667096
> 
> 赞同：8
> 
> 时间：2012-07-26T10:10:38.687
> 
> 标签：ruby, yard

有没有办法告诉 Yard 不要弄乱我的 Rails 项目`doc/`文件夹？我希望它保存它的文件`doc/yard/`或类似的东西。可悲的是，我没有找到任何选择。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-27T06:23:01.093

```
yardoc --output-dir /path/to/yard/doc app.rb 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-02-13T23:00:43.067

您可能想要配置它并忘记它。如果是这样，`.yardopts`在您的项目根目录中是要走的路 - 您只需在文件中写入选项，每行一个，如下所示：

```
$ echo --output-dir /path/to/yard/doc >> .yardopts 
```

（或使用`vi`或手动编辑文件）

有了它，你就可以做到

```
$ yard doc 
```

# asp.net - 在 UserControl 中重置 Textbox.Text

> ID：11667099
> 
> 赞同：0
> 
> 时间：2012-07-26T10:10:44.307
> 
> 标签：asp.net

```
<%@ Control Language="C#" AutoEventWireup="true" CodeBehind="ChatUserControl.ascx.cs"
    Inherits="MetamorphismApp.ChatUserControl" %>

<asp:Timer ID="timer1" runat="server" OnTick="timer1_Tick" Interval="5000">
</asp:Timer>
<div id="divChatWindow" class="clChatWindow">
    <div>
        <asp:Label runat="server" Text='<%# Eval("username") %>' class="divHeader" ID="lblChatFriend"></asp:Label>
        <asp:Image ID="imgFriend" runat="server" CssClass="classFriendImage" />
        <asp:LinkButton ID="lbClose" runat="server" CommandName="Close" CssClass="lbClose"
            OnClick="lbClose_Click">Close</asp:LinkButton></div>
    <div class="chatText" id="idChatText" runat="server">
        <asp:UpdatePanel ID="UpdatePanel" runat="server">
            <Triggers>
                <asp:AsyncPostBackTrigger ControlID="timer1" EventName="Tick" />
                <asp:AsyncPostBackTrigger ControlID="btnSendChat" EventName="Click" />
            </Triggers>
            <ContentTemplate>
                <asp:Repeater runat="server" ID="rpChatMessages">
                    <ItemTemplate>
                        <asp:Image ID="imageForFriend" runat="server" CssClass="clFriendsImage" ImageUrl='<%# "HttpImageHandler.jpg?username=" +  DataBinder.Eval(Container.DataItem,"fromusername").ToString() %>' />
                        <asp:Label ID="chatMessage" runat="server" Text='<%# Eval("Message") %>'></asp:Label>
                        <br>
                    </ItemTemplate>
                </asp:Repeater>
            </ContentTemplate>
        </asp:UpdatePanel>
    </div>
    <asp:TextBox ID="txtChatMessage" runat="server" Width="142px" CssClass="clChatMessage" EnableViewState="true"
        TextMode="MultiLine"></asp:TextBox>
    <asp:LinkButton ID="btnSendChat" runat="server" CommandName="Insert" CommandArgument='<%# Eval("username") %>'
        OnClick="btnSendChat_Click">Send</asp:LinkButton>

</div>

protected void btnSendChat_Click(object sender, EventArgs e)
        {            
            string username = lblChatFriend.Text;
            ucc.InsertMessage(Session["username"].ToString(), username, txtChatMessage.Text);
            txtChatMessage.Text = "";
        } 
```

调用 btnSendChat_Click 事件处理程序时，txtChatMessage 不会变为空白

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-07-26T10:17:38.703

尝试这个：

```
txtChatMessage.Text = string.Empty; 
```

确保文本为空或为空

# drop-down-menu - Zurb Css 框架下拉问题

> ID：11667100
> 
> 赞同：3
> 
> 时间：2012-07-26T10:10:45.773
> 
> 标签：drop-down-menu, css-frameworks, zurb-foundation

我正在使用 Zurb Css 框架，如[foundation.zurb.com/docs/forms.php](http://foundation.zurb.com/docs/forms.php)中所述，我使用了与下面提供的相同的代码

```
<label for="customDropdown">Dropdown Label</label>
<select style="display:none;" id="customDropdown">
  <option SELECTED>This is a dropdown</option>
  <option>This is another option</option>
  <option>Look, a third option</option>
</select>
<div class="custom dropdown">
  <a href="#" class="current">This is a dropdown</a>
  <a href="#" class="selector"></a>
  <ul>
    <li>This is a dropdown</li>
    <li>This is another option</li>
    <li>Look, a third option</li>
  </ul>
</div> 
```

但我看不到任何下拉菜单，上面的代码是从他们的网站复制粘贴的。

谢谢你。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-26T10:53:04.677

这是一个愚蠢的错误，我忘了将 class='custom' 用于表单元素。

# jquery - 使用 IE 进行 Jquery offset() 和 css 转换

> ID：11667104
> 
> 赞同：0
> 
> 时间：2012-07-26T10:10:54.220
> 
> 标签：jquery, internet-explorer, offset, css-transforms

我有一个带有 css-transfrom 的“滚动”的 div。我使用 jquery offset() 来获得最高位置。这在 Chrome 中运行良好，但在 Internet Explorer (9) 中，偏移量不会改变。我认为这与 css 变换和偏移函数的组合有关，但我不知道如何解决这个问题。这是我代码的一小部分，但如果我在每次滚动后记录 pos.top，它在 IE 中不会改变。

```
infoInnerContainer = $('.container_info')
   $window.on('scroll' , function(event) {
     var scrollDisctanceTemp = $window.scrollTop();
     var pos = infoInnerContainer.offset();
     console.log(pos.top); // does not change in IE
} 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T23:20:05.827

你是绝对正确的。我所做的是从样式标签中获取变换位置。并将其添加到元素的初始位置。这在所有浏览器中都运行良好。我在某处得到它。

我使用了以下代码：

```
function matrixToArray(matrix) {
    return matrix.substr(7, matrix.length - 8).split(', ');
} 
```

从这篇文章：

[用jquery获取元素的-webkit-transform的值](https://stackoverflow.com/questions/5968227/get-the-value-of-webkit-transform-of-an-element-with-jquery)

# sharepoint - SharePoint 内部是否使用服务器对象模型？

> ID：11667110
> 
> 赞同：0
> 
> 时间：2012-07-26T10:11:15.413
> 
> 标签：sharepoint

SharePoint 已提供通过以下选项访问其数据库的条款

1.  服务器对象模型
2.  客户对象模型
3.  网页服务

SharePoint 网站本身是否在内部使用服务器对象模型？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T11:06:53.617

是的，它确实。显然，对象模型的某些区域是其自身私有的，但如果它可用，那么您使用的是与 SharePoint 相同的东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T16:52:54.663

我同意安迪伯恩斯的回答，但让我们澄清一下。所有东西都按下一个方案工作

```
Client Object        Server       COM wrappers        Unmanaged  
    Models      <->  Object  <->        &       <->  Native Code  <->  DataBases
 Web Services   <->  Model         COM objects          (core) 
```

是的，没错，SharePoint 在内部仍然可以在旧的非托管代码中运行，因为第一个版本是在 .NET Framework 诞生之前发布的。

# android - Facebook 登录并通过我的 android 应用使用多个帐户发帖

> ID：11667112
> 
> 赞同：-1
> 
> 时间：2012-07-26T10:11:32.807
> 
> 标签：android, facebook, postmessage

* * *

在我的 android 应用程序中，我有多个活动。我在 Facebook 上登录，也可以在 Facebook 墙上发布消息并成功从 facebook 注销。但是当我使用另一个帐户登录时，我能够成功登录但无法在 facebook 墙上发布消息我该如何发布消息在具有多个帐户的 facebook 上（当我分享消息时，它会转到以前的用户墙而不是当前用户）。请提供任何代码或建议。这是我的代码。

```
 public boolean saveCredentials(Facebook facebook) {
 Editor editor = getApplicationContext().getSharedPreferences(KEY,
 Context.MODE_PRIVATE).edit();
 editor.putString(TOKEN, facebook.getAccessToken());
 editor.putLong(EXPIRES, facebook.getAccessExpires());
 return editor.commit();
 }

 public boolean restoreCredentials(Facebook facebook) {
 SharedPreferences sharedPreferences = getApplicationContext()
.getSharedPreferences(KEY, Context.MODE_PRIVATE);
facebook.setAccessToken(sharedPreferences.getString(TOKEN, null));
facebook.setAccessExpires(sharedPreferences.getLong(EXPIRES, 0));
return facebook.isSessionValid();
}

 public void share(View button) {
 msg = tv.getText().toString();
 System.out.println("THIS is message to firstposttttttttttttt" + msg);
 messageToPost = msg;
 System.out.println("THIS is message to posttttttttttttt"
 + messageToPost);
 if (!facebook.isSessionValid()) {
 loginAndPostToWall();

 } else {
 postToWall(messageToPost);
 }
 }
 public void loginAndPostToWall() {
 facebook.authorize(this, PERMISSIONS, Facebook.FORCE_DIALOG_AUTH,
 new LoginDialogListener());
 }

 public void postToWall(String message) {
 byte[] data = null;

   /* Bitmap bi = BitmapFactory.decodeFile(LoginActivity.hospitalImage);
    ByteArrayOutputStream baos = new ByteArrayOutputStream();
    bi.compress(Bitmap.CompressFormat.JPEG, 100, baos);
    data = baos.toByteArray();*/

 Bundle parameters = new Bundle();
//parameters.putString("picture","http://www.indiatalkies.com/images/hospitals18400l.jpg" );
 parameters.putString("message", message);
 parameters.putString("link", "http://redkansoftware.com/");
  parameters.putString("description", "topic share");

 try {
 facebook.request("me");
 String response = facebook.request("me/feed", parameters, "POST");
 // facebook.dialog(this, "feed", parameters,new
 // LoginDialogListener());
 Log.d("Tests", "got response: " + response);
 System.out
 .println("this is respose from facebookkkkkkkkkkkkkkkkkkkk"
   + response);
 if (response == null || response.equals("")
 || response.equals("false")) {
 showToast("Blank response.");

 } else {

 showToast("Message posted to your facebook wall!");

 }

 finish();
 } catch (Exception e) {
 showToast("Failed to post to wall!");
 e.printStackTrace();
 finish();
 }
 }
   for logout am using ths code
   Util.clearCookies(youractivity.this);
    SessionStore.clear(youractivity.this);

          thanks in advance....... 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T07:29:53.487

我有点面临同样的问题。并更新下面的代码来解决它。

```
 public void loginAndPostToWall() {
facebook.authorize(this, PERMISSIONS, Facebook.FORCE_DIALOG_AUTH,
        new LoginDialogListener()); 
```

}

# php - 如何打印包含用户特定值的所有行的列表？

> ID：11667132
> 
> 赞同：1
> 
> 时间：2012-07-26T10:12:58.360
> 
> 标签：php, mysql

我有一个 MYSQL 数据库，其设置如下：user varchar(50)。类型 1 整数（50）。类型 2 整数（50）。我想创建一个 php 脚本，我可以在其中执行[http://example.com/main.php/?user=example](http://example.com/main.php/?user=example)，页面将显示一个列表，其中列出了所有等于 1 的整数的名称。

我无法确定行数，因为将从另一个 php 文件添加更多行。我只能说第 1 行将被称为用户并且是一个 varchar。每隔一行的默认值将是整数将是 0。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T13:50:54.460

这个问题很不清楚，但我认为你的意思是你有一个这样的数据库表

```
 user  varchar2(50)
  type1 int(50)
  type2 int(50) 
```

有一些像这样的数据（对不起，这有点像米老鼠的例子：）

```
 user          type1       type2     type3
  -----------------------------------------
  mickey            0           1         0
  donald            1           1         0
  pluto             1           1         1 
```

如果浏览器调用带有参数user=donald的网页，你想显示

```
 type1
  type2 
```

那正确吗 ？

似乎有点奇怪，但如果是这种情况，您似乎更有可能想要一个包含类型的列，以便您可以对它使用 select 语句

```
 user           type
  -----------------------
  mickey            type2
  donald            type1
  donald            type2
  pluto             type1
  pluto             type2
  pluto             type3 
```

然后要获取属于用户的所有类型，您可以使用 SQL 选择，例如

```
 SELECT type from <table> where user='mickey'; 
```

这将返回

```
 type
  --------
  type2 
```

通过非规范化，我们将有一个用户表、一个类型表和一个 user_type 表来节省空间

```
 user

  id       name
  --------------------
  1        Mickey
  2        Donald
  3        Pluto

  type

  id       type
  --------------------
  1        type 1
  2        type 2
  3        type 3

  user_type

  user_id     type_id
  --------------------      
  1            2
  2            1
  2            2
  3            1
  3            2
  3            3 
```

然后我们的选择变成

```
 SELECT type FROM user as u, user_type as ut, type as t 
 where u.id=ut.user_id
   and ut.type_id=t.id
   and u.name='Mickey' 
```

然后，这将只存储该类型/用户组合实际存在值的数据。然后，您只需将此选择嵌入到 php 中即可进行选择并检索您想要的数据。

# java - DI、Guice 和策略模式

> ID：11667134
> 
> 赞同：0
> 
> 时间：2012-07-26T10:13:09.033
> 
> 标签：java, dependency-injection, guice, strategy-pattern

假设我有以下基类，Queen 和 Knight 作为它的派生类。WeaponBehaviour 是一个接口。根据具体的 GameCharacter 类型，我无法弄清楚如何使用 Guice 注入武器。

```
public abstract class GameCharacter {
    @Inject
    protected WeaponBehaviour weapon;

    public GameCharacter() {

    }

    public void fight() {
        weapon.useWeapon();
    }

    public void setWeapon(WeaponBehaviour weapon) {
        this.weapon = weapon;
    }
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-26T10:46:19.590

您可以使用[Binding Annotations](http://code.google.com/p/google-guice/wiki/BindingAnnotations#Binding_Annotations)。

一个子类：

```
class GimliSonOfGloin extends GameCharacter {

    @Inject
    public void setWeapon(@Axe WeaponBehaviour weapon) {
        super.setWeapon(weapon);
    }
} 
```

注释：

```
@BindingAnnotation 
@Target({ FIELD, PARAMETER, METHOD }) 
@Retention(RUNTIME)
public @interface Axe {} 
```

绑定：

```
bind(WeaponBehaviour.class)
    .annotatedWith(Axe.class)
    .to(MyAxe.class); 
```

# wpf - 将焦点矩形应用于子元素

> ID：11667136
> 
> 赞同：3
> 
> 时间：2012-07-26T10:13:09.300
> 
> 标签：wpf, xaml, focus

在我目前正在处理的控件中，当一个项目获得焦点时，默认焦点矩形跨越整个行及其所有可见的子项目。我知道如何隐藏它。但是当项目具有键盘焦点时，我仍然想要这样的焦点指示器。我已经阅读了有关 IsKeyboardFocused 属性的信息，但是当鼠标单击该项目时也是如此。所以我想我需要以某种方式使用 FocusVisualStyle。但我不知道怎么做。

这是默认焦点的样子：

![在此处输入图像描述](../Images/9a7a3abc2f530b85b766751490aacc1d.png)

这就是它应该的样子：

![在此处输入图像描述](../Images/e7158fd86b2a5fc08d38ae8063d42ea5.png)

这是我的控件模板的 XAML 代码：

```
<Border ...>
    <ContentPresenter FocusManager.IsFocusScope="True"
        Content="{TemplateBinding HeaderedContentControl.Header}"
        ContentTemplate="{TemplateBinding HeaderedContentControl.HeaderTemplate}"
        ContentStringFormat="{TemplateBinding HeaderedItemsControl.HeaderStringFormat}"
        ContentSource="Header"
        Name="PART_Header" .../>
</Border>
<!-- Additional border glare inside the item -->
<Border BorderThickness="1" BorderBrush="#80ffffff" Margin="1"
    SnapsToDevicePixels="True" CornerRadius="2"/>
<!-- Focus rectangle inside the item -->
<Rectangle StrokeDashArray="1 2" StrokeThickness="1" Stroke="Black"
    SnapsToDevicePixels="True" Margin="2"
    Visibility="Hidden" Name="FocusRectangle"
    FocusVisualStyle="{StaticResource FocusStyle}"/> 
```

我的 XAML 中已经有一个默认不可见的焦点矩形。使用 FocusVisualStyle 或任何东西，它应该是可见的。但我没能做到。它要么在任何焦点处可见，要么从不可见。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T21:00:25.953

我找到了解决该问题的方法。对我来说看起来一样，但我不完全确定这是否是*正确*的方法。我从上面使用 FocusRectangle 并关心自己显示和隐藏它。

这是管理焦点矩形可见性的触发器：

```
<!-- Show the focus rectangle when the item is focused -->
<MultiTrigger>
  <MultiTrigger.Conditions>
    <Condition Property="Controls:TreeViewExItem.IsKeyboardMode" Value="True"/>
    <Condition Property="Controls:TreeViewExItem.IsFocused" Value="True"/>
  </MultiTrigger.Conditions>
  <Setter TargetName="FocusRectangle" Property="Visibility" Value="Visible"/>
</MultiTrigger> 
```

然后，我向 TreeViewExItem 添加了一个新属性，该属性指示最后一次输入是来自鼠标还是键盘。这可能会扩展到触摸或手写笔，但我没有这样的设备来测试。

```
public static DependencyProperty IsKeyboardModeProperty =
    DependencyProperty.Register(
        "IsKeyboardMode",
        typeof(bool),
        typeof(TreeViewExItem),
        new FrameworkPropertyMetadata(false, null));

public bool IsKeyboardMode
{
    get
    {
        return (bool) GetValue(IsKeyboardModeProperty);
    }
    set
    {
        SetValue(IsKeyboardModeProperty, value);
    }
} 
```

此属性通过绑定从父控件传递给每个项目：

```
<!-- Pass on the TreeViewEx' IsKeyboardMode value to each item because
  we couldn't access it otherwise in the triggers -->
<Setter Property="IsKeyboardMode"
  Value="{Binding (Controls:TreeViewEx.IsKeyboardMode),
    RelativeSource={RelativeSource
      AncestorType={x:Type Controls:TreeViewEx}}, Mode=OneWay}" /> 
```

相同的 IsKeyboardMode 属性被添加到 TreeViewEx 父控件，这就是我的魔力：

```
protected override void OnPreviewKeyDown(KeyEventArgs e)
{
    base.OnPreviewKeyDown(e);
    if (!IsKeyboardMode)
    {
        IsKeyboardMode = true;
        //Debug.WriteLine("Changing to keyboard mode from PreviewKeyDown");
    }
}

protected override void OnPreviewKeyUp(KeyEventArgs e)
{
    base.OnPreviewKeyDown(e);
    if (!IsKeyboardMode)
    {
        IsKeyboardMode = true;
        //Debug.WriteLine("Changing to keyboard mode from PreviewKeyUp");
    }
}

protected override void OnPreviewMouseDown(MouseButtonEventArgs e)
{
    base.OnPreviewMouseDown(e);
    if (IsKeyboardMode)
    {
        IsKeyboardMode = false;
        //Debug.WriteLine("Changing to mouse mode");
    }
} 
```

这会对键盘和鼠标的预览事件做出反应以设置适当的输入模式。只有当最后一个输入来自键盘时，焦点矩形才可见。

# android - 为android设计可滚动的选项选择器

> ID：11667141
> 
> 赞同：0
> 
> 时间：2012-07-26T10:13:31.740
> 
> 标签：android, menu, android-button

嗨，下面是我需要开发的 UI 的屏幕截图。这里每个按钮都是可滚动的文本字符，所以我的小部件应该提供滚动和读取当前显示字符的选项。请为我的问题提供建议

[http://i.stack.imgur.com/yhyW8.png](http://i.stack.imgur.com/yhyW8.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T10:40:21.857

您将需要开发自定义 View 实现来处理此问题。有关如何执行此操作的信息，请参阅[http://developer.android.com/guide/topics/ui/custom-components.html](http://developer.android.com/guide/topics/ui/custom-components.html)上 developer.android.com 上的教程。如果您有任何更具体的问题，请详细发布。

# iphone - 如何重置 UIView 的背景

> ID：11667142
> 
> 赞同：0
> 
> 时间：2012-07-26T10:13:35.677
> 
> 标签：iphone, objective-c, ipad

将背景（图像）添加到我的 UIView（View_0）后，我希望实现一个按钮来删除相同的背景。

我该怎么做？我试图将不同的图像设置为 View_0 的背景，但这不起作用（我怀疑这个背景设置在“图像”后面）。

我不想用

```
[View_0 removeFromSuperview]; 
```

因为我需要 View_0 仍然存在用于其他目的....

```
//Create an ImageView
UIImageView *image = [[UIImageView alloc] initWithFrame:CGRectMake(0, 0, 940, 422)];;           

//Add the ImageView as the background of the View_0
[View_0 addSubview:image];
//Move custom image behind View
[View_0 sendSubviewToBack: image];

//Failed attempt to remove the background....
View_0.backgroundColor = [[UIColor alloc] initWithPatternImage:[UIImage imageNamed:@"defaultImage.PNG"]]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T10:19:43.180

```
 //Create an ImageView
        UIImageView *image = [[UIImageView alloc] initWithFrame:CGRectMake(0, 0, 940, 422)];;  
        image.tag = 1234;         

        //Add the ImageView as the background of the View_0
        [View_0 addSubview:image];
        //Move custom image behind View
        [View_0 sendSubviewToBack: image];

        UIImageView *imgView = [self.view viewWithTag:1234];
        [img setImage:nil]; 
```

我认为这应该可行

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-26T10:22:11.490

您已将 UIImageView 添加到视图而不是视图的背景。所以发生的事情是，当你实施

```
View_0.backgroundColor = [[UIColor alloc] initWithPatternImage:[UIImage imageNamed:@"defaultImage.PNG"]]; 
```

正在设置 View 的背景，但 UIImageView 现在位于 View 的顶部，这就是没有显示 View 的背景的原因。

相反，如果您只是想添加背景，您可以将其更改为 UIButton 的操作。

此外，如果您使用`[View_0 removeFromSuperview];`您正在尝试删除不正确的视图。

# calendar - primefaces日历输入文本如何更改

> ID：11667143
> 
> 赞同：6
> 
> 时间：2012-07-26T10:13:37.500
> 
> 标签：calendar, primefaces

我可以在 p:inputText、p:autocompelte、p:inputMask 中自定义输入字段（更改字体、大小等），但我不知道如何更改 p:calendar 的输入文本字段。

对面板中的元素使用 .ui-datepicker-sth 效果很好，但我找不到任何用于更改 p:calendar 元素中的输入文本字段的内容。任何人都可以帮助我吗？

米。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2016-04-11T07:40:22.707

要更改 p:calendar 的输入字段的宽度，以下对我使用 Primefaces 5.1 有效。

我在 CSS 文件中定义了这个：

```
.calendarClass input {
    width: 50px !important
} 
```

p:calendar 组件样式类设置为：

```
<p:calendar id="fromdate" styleClass="calendarClass" .../> 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-21T10:12:03.210

在这种情况下，正如@Matt 所指出的，您应该覆盖`ui-inputfield`该类。例如，移除边框半径或阴影（与焦点相同）：

```
.ui-inputfield {
    border-radius:0px;
    box-shadow: none;
} 
```

然后添加您的属性（边框、字体大小/粗细...）以使课程符合您的喜好。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2014-07-09T11:06:57.717

您可以直接使用 size 属性来更改大小

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2019-05-22T10:36:39.910

要更改 p:calendar 的输入字段的宽度，您可以使用

```
<p:calendar inputStyleClass="dateTimeField" .../>

.dateTimeField{
   width: 200px;
} 
```

或者

```
<p:calendar inputStyle="width:200px" .../> 
```

或者

```
<p:calendar styleClass="dateTimeField".../>

.dateTimeField input {
   width:200px;
} 
```

[https://forum.primefaces.org/viewtopic.php?t=2610](https://forum.primefaces.org/viewtopic.php?t=2610)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-26T10:22:03.990

为 Primefaces 日历输入字段生成的 html 如下所示（从[陈列柜](http://www.primefaces.org/showcase/ui/calendarBasic.jsf)复制）：

```
<input id="form:popupCal_input" name="form:popupCal_input" type="text" 
       class="ui-inputfield ui-widget ui-state-default ui-corner-all 
              hasDatepicker ui-state-hover" role="textbox"  ... > 
```

因此，您需要调整/覆盖一个或多个给定类来更改输入字段。也许您需要将您的 css 选择器与生成的 id 结合起来以仅更改日历输入而不是所有其他输入字段。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-11-25T21:41:03.320

这在内`p:calendar`联模式下对我有用：

CSS：

```
.calendar .ui-datepicker-inline{
  width: 100% !important;
} 
```

HTML：

```
<p:calendar styleClass="calendar" mode="inline" locale="pt_BR".../> 
```

# localization - 应用清单中的 Windows 8 本地化

> ID：11667146
> 
> 赞同：3
> 
> 时间：2012-07-26T10:13:47.610
> 
> 标签：localization, windows-8, microsoft-metro, windows-runtime

我需要本地化应用程序清单中的一些数据（如名称、描述、启动画面图像等）。根据文档，这些数据可以作为资源提供，但我不知道该怎么做。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-06T11:14:42.143

1.  添加具有键“Appname”和值“My App Title”的本地化资源（例如 Strings/en/Resources.resw）
2.  添加第二个本地化资源（例如 Strings/de/Resources.resw），键为“Appname”，值为“My German App Title”
3.  编辑您的“App Manifest”并在“显示名称”字段（应用程序 UI）中输入“ms-resource:Appname”
4.  编辑您的“App Manifest”并在“Package display name”字段（Packaging）中输入“ms-resource：Appname”

注意：在执行所有这些操作之前，您应该在 Windows 应用商店仪表板中[注册应用程序名称](https://appdev.microsoft.com/StorePortals/en-US/Developer/Catalog/AddProductName/)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-26T12:47:26.093

简而言之，您遵循文件夹层次结构中的命名约定。这是一个解释[如何正确命名](http://msdn.microsoft.com/en-us/library/windows/apps/hh965372.aspx)的链接。这里还有另一篇有用的“操作方法”文章[和](http://msdn.microsoft.com/en-us/library/windows/apps/hh967759.aspx)两个快速入门，可引导您使用[Javascript](http://msdn.microsoft.com/en-us/library/windows/apps/hh943060.aspx)和[XAML](http://msdn.microsoft.com/en-us/library/windows/apps/xaml/Hh965329(v=win.10).aspx)完成它。

具体来说，请查看快速入门（使用上面的链接）以获取分步演练。JavaScript 与 XAML 略有不同，但总体步骤如下：

1.  在 Visual Studio 项目属性中设置默认语言。
2.  在您的项目中创建一个文件夹来保存所有不同的资源文件（每种语言一个）。这将使您的项目保持整洁有序。
3.  右键单击此文件夹并选择“添加新项目”以添加一种语言的资源文件。此文件可能是 .resx、.resw、.resjson - 请参阅快速入门了解具体信息，具体取决于您使用的编码语言。
4.  在资源文件中添加要翻译的项目。再次，请参阅快速入门了解详情。
5.  将您的控件与资源相关联，并将字符串资源标识符添加到您的代码中。

如果快速入门没有帮助，请告诉我。

# function - 让函数从头开始重新启动

> ID：11667149
> 
> 赞同：1
> 
> 时间：2012-07-26T10:14:03.680
> 
> 标签：function, loops, recursion, goto

我听说在 C++ 中使用 goto 是一种不好的做法，尤其是在处理内存管理时。另一方面，使用递归调用将停止函数的当前实例并使其等待新实例停止，这可能会持续很长时间，直到它遇到停止条件。

是否有任何方法不使用递归或 goto 来让函数停止并重新启动自身或返回循环的开头？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-07-26T10:20:29.623

您可以简单地使用无限循环，例如：

```
function dontLikeGotos() {
    while(true) {
        //whatever
    }
} 
```

是相同的

```
function yummiGotos() {
    beginning:
        //whatever
    goto beginning;
} 
```

作为记录，[goto 在 Java 中不可用有几个原因](http://java.sun.com/docs/white/langenv/Simple.doc2.html#4093)。

# wcf - LinQ 和 WCF 服务操作

> ID：11667150
> 
> 赞同：0
> 
> 时间：2012-07-26T10:14:05.397
> 
> 标签：wcf, linq, entity-framework

我在让一些 LinQ 在 WCF 服务操作中工作时遇到问题：

```
[WebGet]
public IQueryable<StockItem> AllStockableItems(int LocationAddressId)
    {
    StockEntities svc = this.CurrentDataSource;

    //get all the stock at a location
    var StockAtLocation = from s in svc.Stock
                          where s.Location == Location
                          select s;

    //weave it into the list of all stockable items
    var StockableItems = from si in svc.StockableItems
                         join s in StockAtLocation on si.ItemId equals s.ItemId into tmp
                         select si <and somehow expand> si.Stock;

    return StockableItems;
    } 
```

问题是，我不知道如何扩展返回数据中的库存？

如下所示的网址：

....my.svc/AllStockableItems?LocationAddressId=3&$expand=Stock

将扩大所有地点的库存，而不仅仅是所需的地点。这是可能的还是我最好的选择是从 Silverlight 客户端发出 2 个单独的请求并加入客户端？

非常感谢任何帮助。

是的，示例数据，很抱歉没有第一次将其放入：示例股票数据：

```
ItemId    Location   Quantity
   1         1           4
   1         2           3
   1         3           2
   2         2           6
   3         3           0
   7         1           3
   7         2           0 
```

示例 stockableItems 数据

```
 ItemId   <other columns>..
   1
   2
   3
   4
   5
   6
   7
   8 
```

说 locationAddressId 参数 =2，我正在尝试让服务操作返回（不是字面意思，而是在 Atom/Pub 等效项中）：

```
StockableItem  { ItemId :1 
                 Stock { 
                     entry { 
                           Stock {LocationId : 2, Qty :4} 
                           } 
                       } 
               }
StockableItem  { ItemId :2 }
StockableItem  { ItemId :3 }
StockableItem  { ItemId :4 }
StockableItem  { ItemId :5 }
StockableItem  { ItemId :6 }
StockableItem  { ItemId :7 
             Stock { 
                     entry { 
                           Stock {LocationId : 2, Qty :0} 
                           } 
                   } 
               }
StockableItem  { ItemId :8 } 
```

谢谢你。

[更新 2]

好的，我已经尝试了几件事；首先我试了一下：

```
var StockableItems = from si in svc.AllStockableItems
                     join s in svc.Stock on si.ItemId equals s.ItemId
                     where s.Location == Location
                     select  new StockableItem
                           {
                           ItemId = s.ItemId,
                           Stock = new EntityCollection<Stock>
                                    {
                                    new Stock()
                                        {
                                        Location = s.Location,
                                        Quantity= s.Quantity
                                        }
                                    }
                           }; 
```

这给了我：

```
The entity or complex type '...' cannot be constructed in a LINQ to Entities query 
```

这导致我来到这里：

[无法在 LINQ to Entities 查询中构造实体](https://stackoverflow.com/questions/5325797/the-entity-cannot-be-constructed-in-a-linq-to-entities-query)

这导致我将查询重写为：

```
var StockableItems = svc.AllStockableItems
                    .Join(svc.Stock, si => si.ItemId, s => s.ItemId, (si, s) => si)
                    .ToList()
                    .Select(si => new StockableItem
                       {
                       ItemId = si.ItemId,
                       Stock = new EntityCollection<Stock>
                           {
                           new Stock()
                                {
                                Location = si.Stock.First().Location,
                                Quantity= si.Stock.First().Quantity
                                }
                           }
                       })
                       .AsQueryable(); 
```

它返回所有 StockableItems，但有点令人沮丧的是，它不包括任何 Stock。我只是在最后一个查询中发出了嘘声吗？我怀疑我对 Stock 实体的内部预测不正确？

再次感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T13:38:42.897

我想你正在寻找这样的东西：

```
var StockableItems = from si in svc.StockableItems
    join s in StockAtLocation on si.ItemId equals s.ItemId
    select new
    {
        StockableItem = si,
        Stock = s
    }; 
```

您可以选择如何在 select 子句中投影输出。您可以像上面一样选择整个对象，也可以选择对象中的字段。例如：

```
 select new
    {
        ItemId = si.ItemId,
        Stock = s,
        Qty = s.Quantity
    }; 
```

此外，您可能需要考虑将两个查询合并为一个查询：

```
var StockableItems = from si in svc.StockableItems
    join s in svc.Stock on si.ItemId equals s.ItemId
    where s.Location == Location
    select new
    {
        StockableItem = si,
        Stock = s
    }; 
```

现在还有一个示例向您展示了与示例输出非常接近的内容：

```
var StockableItems = from si in svc.StockableItems
    join s in svc.Stock on si.ItemId equals s.ItemId
    where s.Location == Location
    select new
    {
        StockableItem = new
        {
            ItemId = s.ItemId,
            Stock = new
            {
                LocationId = s.Location,
                Qty = s.Quantity
            }
        }
    }; 
```

## 更新

我对您修改后的查询进行了一些调整，该查询使用`Join`来创建传递到查询其余部分的数据。我还将您的`Where`子句放回那里（如果您想在那里使用它）以过滤位置。我还把 ToList() 从那里拿走了，因为我不确定它是否有必要。

```
var StockableItems = svc.AllStockableItems 
                .Join(svc.Stock, si => si.ItemId, s => s.ItemId, 
                      (si, s) => new 
                      { 
                          ItemId = si.ItemId, 
                          Location = s.Location, 
                          Quantity = s.Quantity
                      }) 
                .Where(x => x.Location == Location)
                //.ToList() 
                .Select(x => new StockableItem 
                   { 
                   ItemId = x.ItemId, 
                   Stock = new EntityCollection<Stock> 
                       { 
                       new Stock() 
                            { 
                            Location = x.Location, 
                            Quantity= x.Quantity 
                            } 
                       } 
                   }) 
                   .AsQueryable(); 
```

# events - 重叠图像上的鼠标事件干扰

> ID：11667159
> 
> 赞同：1
> 
> 时间：2012-07-26T10:14:24.533
> 
> 标签：events, mouse, overlay

我添加了一些覆盖图像，我将它们用作按钮/控件来显示/隐藏一些自定义图层，这工作正常，但是它们仍然会触发地图上通常的拖动/移动事件。这还不错，但是当您进入街景并单击这些（按钮位于屏幕左侧）时，相机会将其视图向左移动，这对用户来说非常烦人。

只是想知道是否有人遇到过这种情况并有建议？我想我可以将按钮完全移出地图区域，但使用标准控件在地图上看起来非常好。

非常感谢！

# javascript - 当类型存储在变量中而不使用 eval 时创建对象实例

> ID：11667160
> 
> 赞同：1
> 
> 时间：2012-07-26T10:14:23.803
> 
> 标签：javascript

我有一堆用 javascript 编写的代表高级可重用控件的对象。这些控件作为具有类型属性的 div 放置在页面中的某处。选择这些很容易，但创建适当的 javascript 对象并将所选节点传递给适当的类型 init 函数并不那么直接。我试图避免按照 'new' + controlType + '(' + selector + ')' 的行构建一个字符串，然后对其调用 eval 。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-26T10:17:35.913

如果每个构造函数都是全局的，则可以通过`window`对象（全局对象）显式访问它们：

```
var instance = new window[controlType](selector): 
```

否则我建议为构造函数创建一个“命名空间”

```
var types = {
    'TypeA': TypeA,
    'TypeB': TypeB,
    //...
}; 
```

并执行与上述相同的操作。

# c# - 使用 DynamicDataDisplay 设置图形轴的值范围

> ID：11667162
> 
> 赞同：1
> 
> 时间：2012-07-26T10:14:33.333
> 
> 标签：c#, wpf, graph, dynamic-data-display

我正在创建一个应用程序，我想在其中绘制一个图表，其中 DateTime 作为 X 轴，0-100 的数字作为 Y 轴。

我使用了以下代码

```
 <d3:ChartPlotter.HorizontalAxis>
        <d3:HorizontalDateTimeAxis Name="dateAxis"/>
     </d3:ChartPlotter.HorizontalAxis>
     <d3:ChartPlotter.VerticalAxis>
        <d3:VerticalIntegerAxis Name="countAxis"  />   
     </d3:ChartPlotter.VerticalAxis>

     <d3:Header FontFamily="Times New Roman" Foreground="SteelBlue"  Content="Radiation Monitoring System"/>
     <d3:VerticalAxis FontFamily="Times New Roman" Foreground="SteelBlue" Content="Radiation Number" HorizontalAlignment="Center"  VerticalAlignment="Top" Height="346" Width="179" />
     <d3:HorizontalAxis FontFamily="Times New Roman" Foreground="SteelBlue" Content="Real time" HorizontalAlignment="Center" />

  </d3:ChartPlotter> 
```

我如何将 Y 轴值设置在 0 - 100 之间？

我还需要设置 Y 轴的内容，就像我们在正常图中看到的那样。（旋转 270 度）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T19:16:34.007

我不确定您的第二个要求（旋转），但要限制您的 y 轴值，您可以使用 ViewPort.Domain。域为您的绘图仪设置界限。例子 ：

```
var axis = (DateTimeAxis)productPlot.MainHorizontalAxis;
double yMin = 0;
double yMax = 100;       
Rect domainRect = new Rect(xMin, yMin, xMax - xMin, yMax - yMin);
//xMin and xMax are left to your discretion based on your DateTimeAxis

plotter.ViewPort.Domain = domainRect; 
```

如果您可以更多地解释您的第二个要求，我会尽力用所需内容更新我的答案。

# plugins - 在 TinyMCE 中打开插件对话框

> ID：11667169
> 
> 赞同：0
> 
> 时间：2012-07-26T10:14:47.267
> 
> 标签：plugins, tinymce

我在 TinyMCE 中创建了插件，以在其中默认定制 advimage 插件。我在常规选项卡中的图像 url 文本框末尾添加了一个浏览按钮。这是我的代码：

tinyMCE.execCommand('mceAdvImgMgr',false,'src');

我可以打开我的插件。但我不知道如何传递值并在我的插件中获取它？因为我想将来自 advimage 的 ID（图像 url 图像的 ID）传递给我的插件，然后在从我的插件中选择图像后，它会将图像 url 返回给调用者插件（advimage）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T09:50:08.897

这并不难，但取决于您要将值分配给变量的时间点或操作。

您可以将值保存在编辑器对象中：

```
tinyMCEPopup.editor.last_selected_value = value; 
```

然后从那里得到它

```
ed.last_selected_value 
```

# python - 在 django 中检索表单字段属性

> ID：11667171
> 
> 赞同：4
> 
> 时间：2012-07-26T10:15:20.390
> 
> 标签：python, django, forms, view, attributes

我的表单中有一个输入文本字段，其中有一个通过 JavaScript 添加的重要新属性。属性名称是`fieldid`。

有没有办法在表单登顶后从视图中检索此属性及其值？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T10:51:03.023

提交表单时，表单元素的属性不会传递给服务器；只有输入元素值是。

在表单提交时添加额外信息以发送回服务器的方法是向表单添加额外`<input />`的元素，特别是`<input type="hidden" />`元素。

例如

```
<input type="hidden" name="foobar" value="spam and eggs" /> 
```

`foobar`使用 value 向表单数据添加一个新字段`spam and eggs`。

# cakephp - 检查现有控制器

> ID：11667176
> 
> 赞同：0
> 
> 时间：2012-07-26T10:15:39.750
> 
> 标签：cakephp, routing

我为我的应用程序编写了静态页面组件，管理员可以在其中动态添加/编辑/删除静态内容页面。这些都保存在数据库中。

（例如，您可以创建一个名为“about”的页面，并可以在 myapplication/about 中访问它）

这是我对这些页面的路由：

```
$page = new StaticPage();
$slugs = $page->find('list', array(
    'fields' => array('slug'),
    'recursive' => -1,
    'order' => 'StaticPage.slug DESC',
));

Router::connect('/:slug', 
    array('controller' => 'static_pages', 'action' => 'display'),
    array(
        'pass' => array('slug'),
        'slug' => implode($slugs, '|')
    )
); 
```

现在我有一个问题，当您创建一个与现有控制器（例如用户）匹配的页面时，它会覆盖用户控制器的路由。

所以我需要一个黑名单或类似的东西：我开始写一个验证规则，我想检查那个控制器是否存在。对于 cake 1.3，有一个函数“loadController”，如果控制器不存在，则返回 false，但对于 cake 2.x，没有这样的函数。我想念这个吗？它有新名称还是现在在实用程序库中？

还是有更好的方法来解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T10:22:57.967

你应该试试这个：[http ://www.cleverweb.nl/cakephp/list-all-controllers-in-cakephp-2/](http://www.cleverweb.nl/cakephp/list-all-controllers-in-cakephp-2/)

通过获取所有控制器的列表，您可以轻松排除控制器的名称

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T10:45:26.263

这是我现在的验证方法：

```
$route = Router::parse($check['slug']);
$controllerName = Inflector::camelize($route['controller'] . 'Controller');

$aCtrlClasses = App::objects('controller');

  foreach ($aCtrlClasses as $controller) {
    if ($controller != 'AppController') {
      // Load the controller
      App::import('Controller', str_replace('Controller', '', $controller));

      // Load the ApplicationController (if there is one)
      App::import('Controller', 'AppController');
      $controllers[] = $controller;
    }
  }

  if (in_array($controllerName, $controllers)) {
    return false;
  } else {
    return true;
  } 
```

# ios - 在 iOS 应用程序上加密信用卡信息并发送到服务器

> ID：11667177
> 
> 赞同：1
> 
> 时间：2012-07-26T10:15:41.230
> 
> 标签：ios, credit-card, public-key-encryption

首先，iOS 应用程序可以收集信用卡信息并将其发送到服务器吗？这样的应用会被苹果拒绝吗？

进一步的问题是： -

我正在开发一个 iOS 应用程序，它获取信用卡相关信息并将其发送到服务器。服务器然后通过支付网关处理支付请求。

在将其发送到服务器之前，我需要知道在我的 iOS 应用程序上加密此信息的最佳/好方法。服务器使用 MongoDB 运行 PHP，服务器端人员计划使用 RSA-2048 加密。

请尽快在这件事上指导我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T10:44:55.707

如果您观看 WWDC 2012 视频，则有一个名为“网络最佳实践”的视频。该视频是解释您应该实施何种网络安全以及如何使用 Apple api 来执行此操作的最佳方式。

# android - sqlite 数据库不是在我的文件资源管理器中创建的 eclips

> ID：11667180
> 
> 赞同：0
> 
> 时间：2012-07-26T10:15:47.690
> 
> 标签：android, sqlite

我创建了数据库，但是当我运行应用程序时，数据库没有创建，并且 catlog 中没有错误，请帮助我。并且在 fileexplorer/data/data 中没有创建文件夹名称数据库，并且当我在 MySQLiteHelper 中打印一些内容到控制台时，控制台上没有任何内容打印。请帮助我提前谢谢。

公共类 MySQLiteHelper 扩展 SQLiteOpenHelper {

```
public static final String TABLE_NAME_BOY = "question_boy";
public static final String ID_BOY = "_id";
public static final String QUESTION_BOY = "questions";
public static final String ANSWER_BOY = "answer";

public static final String TABLE_NAME_GIRL = "questions_girl";
public static final String ID_GIRL = "_id";
public static final String QUESTION_GIRL = "questions";
public static final String ANSWER_GIRL = "answer";

private static final String DATABASE_NAME = "bg.database";
private static final int DATABASE_VERSION = 3;

private static final String CREATE_TABLE_BOY = "create table "
        + TABLE_NAME_BOY + "(" + ID_BOY
        + "integer primary key autoincrement, " + QUESTION_BOY + " text, "
        + ANSWER_BOY + " text);";

private static final String CREATE_TABLE_GIRL = "create table "
        + TABLE_NAME_GIRL + "(" + ID_GIRL
        + "integer primary key autoincrement, " + QUESTION_GIRL + " text, "
        + ANSWER_GIRL + " text);";

public MySQLiteHelper(Context context, String name,
        CursorFactory factory, int version) {
    super(context, DATABASE_NAME, null, DATABASE_VERSION);
    // TODO Auto-generated constructor stub
}

@Override
public void onCreate(SQLiteDatabase db) {
    // TODO Auto-generated method stub

    db.execSQL(CREATE_TABLE_BOY);
    db.execSQL(CREATE_TABLE_GIRL);

}

@Override
public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
    // TODO Auto-generated method stub
    Log.w(MySQLiteHelper.class.getName(),

            "Upgrading database from version " + oldVersion + " to "

                        + newVersion + ", which will destroy all old data");

db.execSQL("DROP TABLE IF EXISTS" + TABLE_NAME_BOY);
db.execSQL("DROP TABLE IF EXISTS" + TABLE_NAME_GIRL);

onCreate(db);
} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T10:18:30.950

除非您的设备已植根，否则您无法访问该文件。

看看这个问题：

[Android：数据库文件存储在哪里？](https://stackoverflow.com/questions/1105219/android-where-are-database-files-stored)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T10:44:14.400

这应该为你创建一个数据库......

```
public class DBHandler extends SQLiteOpenHelper {

    private SQLiteDatabase sqliteDatabaseInstance_ = null;

    public DBHandler(Context context){

        super(context, "TESTDATABASE.db", null, 1);
        sqliteDatabaseInstance_ = getWritableDatabase();
        sqliteDatabaseInstance_.execSQL("PRAGMA foreign_keys = ON;");
    }

@Override
    public void onCreate(SQLiteDatabase db) {

        try {

            db.execSQL("CREATE TABLE ACCOUNT (accountId INTEGER PRIMARY KEY, name TEXT)");

            db.execSQL("CREATE TABLE ORDER_DETAILS (orderNo INTEGER, accountId INTEGER," +
                    "FOREIGN KEY (accountId) REFERENCES ACCOUNT(accountId))");
        }catch (SQLiteConstraintException sqliteConstraintException) {

            System.out.println("sqliteConstraintException: " + sqliteConstraintException.getMessage());
        }catch (Exception e) {

            System.out.println("Exception in DBHandler.onCreate: "+e.getMessage());
        }
    }

    @Override
    public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {}

} 
```

你的数据库文件应该在.........

转到文件资源管理器 -----> 数据 ------> 数据 ------> com.test -----> TESTDATA.db

希望这可以帮助。

# c - 为什么填充必须是 2 的幂？

> ID：11667181
> 
> 赞同：5
> 
> 时间：2012-07-26T10:15:48.450
> 
> 标签：c, struct

我正在做一些示例程序来探索 C，并想知道为什么结构填充只能以 2 的幂来完成。

```
#include <stdio.h>

#pragma pack(push, 3)

union aaaa
{

   struct bbb
   {
      int a;
      double b;
      char c;
   }xx;

   float f;
};

#pragma pack(pop)

int main()
{

printf("\n Size: %d", sizeof(union aaaa));

return 0;
} 
```

编译时

```
warning: alignment must be a small power of two, not 3 [-Wpragmas]
warning: #pragma pack (pop) encountered without matching #pragma pack (push) [-Wpragmas] 
```

似乎#pragma 没有效果。输出仅为 24。即4字节对齐。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-07-26T12:25:05.230

简短的回答是，处理器中的基本对象的大小是 2 的小幂（例如，1、2、4、8 和 16 字节），并且内存按大小是 2 的小幂（例如，8字节），因此必须对齐结构才能很好地适应这些大小。

长答案是，其原因是基于物理学和初等数学。计算机自然而然地使用值为 0 和 1 的位。这是因为很容易设计在两个值之间切换的物理事物：高电压和低电压，是否存在电荷，等等。区分三个值更难，因为您必须对值之间的转换更加敏感。因此，随着计算机技术几十年来的发展，我们使用了比特（二进制数字）而不是像三进制数字这样的替代品。

为了产生更大的数字，我们组合了多个位。所以两位可以结合起来有四个值。三位可以有八个值，依此类推。在较旧的计算机中，有时位一次被分组为 6 个或 10 个。然而，八个变得普遍，并且现在基本上是标准的。使用 8 位作为一个字节并不像我描述的其他一些分组那样有很强的物理原因，但它是世界的方式。

计算机的另一个特点是内存。一旦我们有了这些字节，我们就想将它们中的很多存储在一个处理器可以轻松访问的设备中，这样我们就可以快速地将大量字节输入和输出处理器。当我们有很多字节时，我们需要一种方法让处理器告诉内存处理器想要读取或写入哪些字节。所以处理器需要一种方法来寻址字节。

处理器使用位来表示值，因此它将使用位来表示地址值。因此，内存将被构建为接受位，以指示在处理器读取时向处理器提供哪些字节，或者在处理器写入时存储哪些字节。存储设备如何处理这些位？一件简单的事情是使用一个位来控制通往记忆的路径的一个开关。内存将由许多存储字节的小部分组成。

考虑内存设备中可以存储一个字节的东西，并考虑其中两个彼此相邻的东西，比如 A 和 B。我们可以使用开关来选择是希望 A 字节处于活动状态还是 B 字节处于活动状态积极点。现在考虑其中的四个，比如 A、B、C 和 D。我们可以使用一个开关来选择是使用 AB 组还是使用 CD 组。然后另一个开关选择 A 或 B（如果使用 AB 组）或 C 或 D（如果使用 CD）组。

这个过程继续：内存地址中的每个位选择一组要使用的存储单元。1位选择2个存储单元，2位选择4个，3位选择8个，4位选择16个，以此类推。8位选择256个存储单元，24位选择16,777,216个存储单元，32位选择4,294,967,296个存储单元。

还有一种复杂情况。在处理器和内存之间移动单个字节很慢。相反，现代计算机将内存组织成更大的部分，例如 8 个字节。您一次只能在内存和处理器之间移动八个字节。当处理器请求内存提供一些数据时，处理器只发送地址的高位——低三位选择八个字节内的单个字节，它们不发送到内存。

这更快，因为处理器在其他情况下让内存完成所有切换以提供一个字节所需的时间获得八个字节，并且它更便宜，因为您不需要大量额外的开关来区分个体内存中的字节。

但是，现在这意味着处理器无法从内存中获取单个字节。当您执行访问单个字节的指令时，处理器必须从内存中读取八个字节，然后在处理器内部移动这些字节以获得您想要的一个字节。同样，为了获得两个或四个字节，处理器读取八个字节并仅提取您想要的字节。

为了简化这个过程，处理器设计人员指定数据应该以某种方式对齐。通常，它们需要将 2 字节数据（如 16 位整数）与 2 字节的倍数对齐，将 4 字节数据（如 32 位整数和 32 位浮点值）与 4 的倍数对齐字节和八字节数据对齐为八字节的倍数。

这种所需的对齐有两个效果。首先，由于四字节数据只能从内存读取的八字节块中的两个位置开始（开头或中间），处理器设计人员只需插入电线即可从两个位置提取四个字节。他们不需要添加所有额外的线来从八个单独的字节中的任何一个中提取四个字节，如果允许任何对齐，这些字节可能是起始位置。（一些处理器将完全禁止加载未对齐的数据，而一些处理器将允许它，但使用缓慢的方法来提取它，使用更少的线路但使用迭代算法在多个处理器周期内移动数据，因此未对齐的加载很慢。）

第二个影响是，因为四字节数据只能从八字节块中的两个位置开始，它也在该块内结束。考虑一下如果您尝试加载从 8 字节块的第 6 个字节开始的 4 字节数据会发生什么。前两个字节在块中，但接下来的两个字节在内存中的下一个块中。处理器必须从内存中读取两个块，从每个块中获取不同的字节，然后将这些字节放在一起。这比只读取一个块要慢得多。

因此，内存是按 2 的幂来组织的，因为这是位的自然结果，而处理器需要对齐，因为这样可以提高内存访问的效率。对齐自然是 2 的幂，这就是为什么当结构大小是用于对齐的 2 的幂的倍数时，结构尺寸会更好地工作。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-07-26T10:21:40.133

因为否则就没有意义。您向结构添加填充是因为 CPU 在对齐数据上的工作速度更快（并且，在某些架构上，它们根本不适用于未对齐的数据），并且各种数据类型的对齐要求始终是 2 的小幂（至少，在我听说过的任何架构上）。

尽管如此，如果出于某种奇怪的原因您确实需要任意对齐，那么没有什么可以阻止您`char`在正确的位置添加虚拟数组来强制对齐（这或多或少是编译器在后台所做的）。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-26T15:46:42.167

内存总线只有这么多字节宽，通常是两个字节宽的幂，因为这是字段中位的最大有效使用

像这样的三位字段

```
[0][0][0] 
```

有八个数字的可能表示

```
0, 1, 2, 3, 4, 5, 6, 7, and 8 
```

如果你把自己限制在数字上

```
0, 1, 2 
```

那么您将浪费最高位，该位始终为零。计算早期的硬件和软件设计人员需要他们可以抓住的每一点，因为内存*非常昂贵*，所以这种浪费是在系统之外设计的。

后来，随着内存子系统的增长，对齐访问的设计成本变得更低。对齐访问要求数据元素的开始位于某些边界上，以减少跨内存总线的传输次数，并减少总线管理中的计算次数。

“二的幂”要求是总线架构加上一个简单的例程的副作用，该例程确保 C 数据结构可以与对齐的访问边界对齐。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-26T15:37:30.033

虽然计算机设计有利于内存的二次幂内存对齐的物理原因，但另一个同样重要的要求是所有内存对齐必须均匀地划分为某个数字。否则，例如，如果一个结构需要在 7 的倍数上对齐，一个需要在 8 的倍数上对齐，一个需要在 9 的倍数上对齐，则`union`包含所有三个结构的 a 必须对齐到504 的倍数。

处理可分性要求的正常方式是说所有对齐大小必须细分为 2 的某个较大的幂。这种方法会奏效，但它不是唯一可行的实施方案。如果有人愿意的话，可以设计能够与 120 字节缓存线一起工作的硬件，并允许对象在 2、3、4、5、6、8、10、12、15、20 的倍数上对齐、24、30、40、60 或 120 字节。从硬件的角度来看，这样的设计实际上是非常合理的（每个高速缓存行将被存储为 1024 位，包括 64 位的纠错、写入标记或其他信息），并且将允许有效存储 80 位实数, RGB 或 XYZ 三元组（任何数字类型，包括 80 位实数）。如果不要求物理地址与逻辑地址的数字顺序相同，将 120 字节范围映射到缓存行所需的电路不会过于昂贵。另一方面，在专业应用程序之外，非二次方映射的好处不太可能足以克服成本和市场惯性问题。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-26T13:44:23.660

根据 GCC 文档（[http://gcc.gnu.org/onlinedocs/gcc/Structure_002dPacking-Pragmas.html），pack](http://gcc.gnu.org/onlinedocs/gcc/Structure_002dPacking-Pragmas.html) pragma 用于“与 Microsoft Windows 编译器兼容”。

如果您搜索有关对齐的 MS 文档 ( [http://msdn.microsoft.com/en-us/library/ms253949(v=vs.80).aspx](http://msdn.microsoft.com/en-us/library/ms253949(v=vs.80).aspx) )，您会发现 MSVC 编译器确保基于数据的类型对齐尺寸; 正如其他帖子所解释的那样，*从逻辑上讲*，它始终是 2 的幂。

如果您的问题是您需要对数据结构进行一些花哨的对齐（以访问一些考虑不周的内存映射外围设备），那么您最好的办法是通过添加添加所需填充的字段来使用*手动打包结构。*

# foursquare - 开发者模式

> ID：11667183
> 
> 赞同：0
> 
> 时间：2012-07-26T10:15:55.533
> 
> 标签：foursquare

有没有办法仅仅为了发展目的而成为场地的经理，而不必完成声称场地的所有步骤？也许通过创造一个虚假的场地并成为它的管理者？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T20:43:25.757

对于 Venue Push API，您可以创建一个“家”场地，并自动被视为该场地的管理者。

对于特价/统计信息，请创建一个测试场地并完成场地的[申领流程](http://support.foursquare.com/entries/191119-how-do-i-claim-my-venue)，或发送电子邮件至 api@foursquare.com 并提供场地 ID 和您的用户 ID，要求他们为您申领场地。

# android - 为什么 TwitterApp 会给出 VerifyError？

> ID：11667184
> 
> 赞同：1
> 
> 时间：2012-07-26T10:16:02.730
> 
> 标签：android

我正在将 twitter 集成到我的 android 应用程序中，在打开启动应用程序 stackTrace 之前发生了一个异常，如下所示：-

```
 07-26 16:01:34.004: E/AndroidRuntime(1043): FATAL EXCEPTION: main
    07-26 16:01:34.004: E/AndroidRuntime(1043): java.lang.VerifyError: com.appstudioz.twitter.TwitterApp
    07-26 16:01:34.004: E/AndroidRuntime(1043):     at com.appstudioz.bidnear.NewsFeed.onCreate(NewsFeed.java:44)
   07-26 16:01:34.004: E/AndroidRuntime(1043):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1048)
  07-26 16:01:34.004: E/AndroidRuntime(1043):   at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1712)
  07-26 16:01:34.004: E/AndroidRuntime(1043):   at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1764)
  07-26 16:01:34.004: E/AndroidRuntime(1043):   at android.app.ActivityThread.access$1500(ActivityThread.java:122)
 07-26 16:01:34.004: E/AndroidRuntime(1043):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1002)
 07-26 16:01:34.004: E/AndroidRuntime(1043):    at android.os.Handler.dispatchMessage(Handler.java:99)
 07-26 16:01:34.004: E/AndroidRuntime(1043):    at android.os.Looper.loop(Looper.java:132)
07-26 16:01:34.004: E/AndroidRuntime(1043):     at android.app.ActivityThread.main(ActivityThread.java:4025)
 07-26 16:01:34.004: E/AndroidRuntime(1043):    at java.lang.reflect.Method.invokeNative(Native Method)
 07-26 16:01:34.004: E/AndroidRuntime(1043):    at java.lang.reflect.Method.invoke(Method.java:491)
 07-26 16:01:34.004: E/AndroidRuntime(1043):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:841)
 07-26 16:01:34.004: E/AndroidRuntime(1043):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:599)
  07-26 16:01:34.004: E/AndroidRuntime(1043):   at dalvik.system.NativeStart.main(Native Method) 
```

我正在使用这段代码： -

按钮 mbutton;

```
private TwitterApp mTwitter;
ProgressDialog mProgressDialog = null;
private String url;

/** Called when the activity is first created. */
public static final String CONSUMER_KEY = "mdgzcl73NRkKaRzqVutQpA";
public static final String CONSUMER_SECRET="FVZwc6m4FZ5TbAU2uAfWhbxUMMcZ835Hp3VWBEF10";

private enum FROM {
    TWITTER_POST, TWITTER_LOGIN
};

private enum MESSAGE {
    SUCCESS, DUPLICATE, FAILED, CANCELLED
};

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.demo);//newsfeed);
    mbutton = (Button)findViewById(R.id.demo);
    mbutton.setOnClickListener(new View.OnClickListener() {

        public void onClick(View v) {
         calltwitter();         
        }
    });
    mTwitter = new TwitterApp(NewsFeed.this, CONSUMER_KEY, CONSUMER_SECRET);
    mTwitter.setListener(mTwLoginDialogListener);
    //setTabs();
}

private void calltwitter()
{

    if (mTwitter.hasAccessToken())
    {
        try
        {
            String comment = "I found this App Send SuccessFully..?";
            String demo = "Hi ! Share Have been done ...";
            try {
                mTwitter.updateStatus(demo);
                //mTwitter.updateStatus("rentfaster: "+demo+");
            } catch (Exception e) {
                e.printStackTrace();
            }
        }catch(Exception e)
        {

        }
    }
    else 
    {
        mTwitter.authorize();
    }

}

/**
 * Twitter Dialog Listner.
 */
//private TwDialogListener mTwLoginDialogListener = new TwDialogListener() 

private TwDialogListener mTwLoginDialogListener = new TwDialogListener() {

    public void onError(String value) {
        mTwitter.resetAccessToken();
    }

    public void onComplete(String value) {

        String comment = "I found working fine";
        try
        {
            String demo = "Hi ! Share Have been done ...";
            try {
                mTwitter.updateStatus(demo);
                //mTwitter.updateStatus("rentfaster: "+demo+");
            } catch (Exception e) {
                e.printStackTrace();
            }
        }catch(Exception e)
        {

        }
        mTwitter.resetAccessToken();
    }
};

private void setTabs()
{

} 
```

在启动应用程序之前发生上述异常。我要求在 twitter 上共享一些数据，但第一步我面临这个问题，请有人建议我！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T10:30:49.170

为此使用 Twitter4j 库并使用以下代码将 twitter 集成到您的应用程序中。

MainActivity.java

```
private TwitterApp mTwitter;
    private static final String CONSUMER_KEY = "your consumer key"; 
    private static final String CONSUMER_SECRET = "your consumer secret key"; 

    private enum FROM {
        TWITTER_POST, TWITTER_LOGIN
    };

    private enum MESSAGE {
        SUCCESS, DUPLICATE, FAILED, CANCELLED
    };

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        mTwitter = new TwitterApp(this, CONSUMER_KEY, CONSUMER_SECRET);
    }

    public void onClick(View v) {
        mTwitter.setListener(mTwLoginDialogListener);
        mTwitter.resetAccessToken();
        if (mTwitter.hasAccessToken() == true) {
            try {
                mTwitter.updateStatus(TwitterApp.MESSAGE);
                postAsToast(FROM.TWITTER_POST, MESSAGE.SUCCESS);
            } catch (Exception e) {
                if (e.getMessage().toString().contains("duplicate")) {
                    postAsToast(FROM.TWITTER_POST, MESSAGE.DUPLICATE);
                }
                e.printStackTrace();
            }
            mTwitter.resetAccessToken();
        } else {
            mTwitter.authorize();
        }
    }

    private void postAsToast(FROM twitterPost, MESSAGE success) {
        switch (twitterPost) {
        case TWITTER_LOGIN:
            switch (success) {
            case SUCCESS:
                Toast.makeText(this, "Login Successful", Toast.LENGTH_LONG)
                        .show();
                break;
            case FAILED:
                Toast.makeText(this, "Login Failed", Toast.LENGTH_LONG).show();
            default:
                break;
            }
            break;
        case TWITTER_POST:
            switch (success) {
            case SUCCESS:
                Toast.makeText(this, "Posted Successfully", Toast.LENGTH_LONG)
                        .show();
                break;
            case FAILED:
                Toast.makeText(this, "Posting Failed", Toast.LENGTH_LONG)
                        .show();
                break;
            case DUPLICATE:
                Toast.makeText(this,
                        "Posting Failed because of duplicate message...",
                        Toast.LENGTH_LONG).show();
            default:
                break;
            }
            break;
        }
    }

    private TwDialogListener mTwLoginDialogListener = new TwDialogListener() {

        @Override
        public void onError(String value) {
            postAsToast(FROM.TWITTER_LOGIN, MESSAGE.FAILED);
            Log.e("TWITTER", value);
            mTwitter.resetAccessToken();
        }

        @Override
        public void onComplete(String value) {
            try {
                mTwitter.updateStatus(TwitterApp.MESSAGE);
                postAsToast(FROM.TWITTER_POST, MESSAGE.SUCCESS);
            } catch (Exception e) {
                if (e.getMessage().toString().contains("duplicate")) {
                    postAsToast(FROM.TWITTER_POST, MESSAGE.DUPLICATE);
                }
                e.printStackTrace();
            }
            mTwitter.resetAccessToken();
        }
    }; 
```

将以下 3 类添加到新包“com.twitter.android”中

第 1 类：-（TwitterApp.java）

```
package com.twitter.android;

import java.net.MalformedURLException;
import java.net.URL;
import java.net.URLDecoder;
import oauth.signpost.OAuthProvider;
import oauth.signpost.basic.DefaultOAuthProvider;
import oauth.signpost.commonshttp.CommonsHttpOAuthConsumer;
import twitter4j.Twitter;
import twitter4j.TwitterException;
import twitter4j.TwitterFactory;
import twitter4j.User;
import twitter4j.http.AccessToken;
import android.app.Activity;
import android.app.ProgressDialog;
import android.os.Handler;
import android.os.Message;
import android.view.Window;

public class TwitterApp {
    private Twitter mTwitter;
    private TwitterSession mSession;
    private AccessToken mAccessToken;
    private CommonsHttpOAuthConsumer mHttpOauthConsumer;
    private OAuthProvider mHttpOauthprovider;
    private String mConsumerKey;
    private String mSecretKey;
    private ProgressDialog mProgressDlg;
    private TwDialogListener mListener;
    private Activity context;

    public static final String  OAUTH_CALLBACK_SCHEME   = "x-oauthflow-twitter";
    public static final String  OAUTH_CALLBACK_HOST     = "callback";
    public static final String  CALLBACK_URL      = OAUTH_CALLBACK_SCHEME + "://" + OAUTH_CALLBACK_HOST;
    private static final String TWITTER_ACCESS_TOKEN_URL = "https://api.twitter.com/oauth/access_token";
    private static final String TWITTER_AUTHORZE_URL = "https://api.twitter.com/oauth/authorize";
    private static final String TWITTER_REQUEST_URL = "https://api.twitter.com/oauth/request_token";
    public static final String MESSAGE = "Hello Everyone....";

    public TwitterApp(Activity context, String consumerKey, String secretKey) {
        this.context = context;

        mTwitter = new TwitterFactory().getInstance();
        mSession = new TwitterSession(context);
        mProgressDlg = new ProgressDialog(context);

        mProgressDlg.requestWindowFeature(Window.FEATURE_NO_TITLE);

        mConsumerKey = consumerKey;
        mSecretKey = secretKey;

        mHttpOauthConsumer = new CommonsHttpOAuthConsumer(mConsumerKey,
                mSecretKey);

        String request_url=TWITTER_REQUEST_URL;
        String access_token_url=TWITTER_ACCESS_TOKEN_URL;
        String authorize_url=TWITTER_AUTHORZE_URL;

        mHttpOauthprovider = new DefaultOAuthProvider(
                request_url,
                access_token_url,
                authorize_url);
        mAccessToken = mSession.getAccessToken();

        configureToken();
    }

    public void setListener(TwDialogListener listener) {
        mListener = listener;
    }

    @SuppressWarnings("deprecation")
    private void configureToken() {
        if (mAccessToken != null) {
            mTwitter.setOAuthConsumer(mConsumerKey, mSecretKey);
            mTwitter.setOAuthAccessToken(mAccessToken);
        }
    }

    public boolean hasAccessToken() {
        return (mAccessToken == null) ? false : true;
    }

    public void resetAccessToken() {
        if (mAccessToken != null) {
            mSession.resetAccessToken();

            mAccessToken = null;
        }
    }

    public String getUsername() {
        return mSession.getUsername();
    }

    public void updateStatus(String status) throws Exception {
        try {
            mTwitter.updateStatus(status);
        } catch (TwitterException e) {
            throw e;
        }
    }

    public void authorize() {
        mProgressDlg.setMessage("Initializing ...");
        mProgressDlg.show();

        new Thread() {
            @Override
            public void run() {
                String authUrl = "";
                int what = 1;

                try {
                    authUrl = mHttpOauthprovider.retrieveRequestToken(
                            mHttpOauthConsumer, CALLBACK_URL);
                    what = 0;
                } catch (Exception e) {
                    e.printStackTrace();
                }
                mHandler.sendMessage(mHandler
                        .obtainMessage(what, 1, 0, authUrl));
            }
        }.start();
    }

    public void processToken(String callbackUrl) {
        mProgressDlg.setMessage("Finalizing ...");
        mProgressDlg.show();

        final String verifier = getVerifier(callbackUrl);

        new Thread() {
            @Override
            public void run() {
                int what = 1;

                try {
                    mHttpOauthprovider.retrieveAccessToken(mHttpOauthConsumer,
                            verifier);

                    mAccessToken = new AccessToken(
                            mHttpOauthConsumer.getToken(),
                            mHttpOauthConsumer.getTokenSecret());

                    configureToken();

                    User user = mTwitter.verifyCredentials();

                    mSession.storeAccessToken(mAccessToken, user.getName());

                    what = 0;
                } catch (Exception e) {
                    e.printStackTrace();
                }

                mHandler.sendMessage(mHandler.obtainMessage(what, 2, 0));
            }
        }.start();
    }

    private String getVerifier(String callbackUrl) {
        String verifier = "";

        try {
            callbackUrl = callbackUrl.replace("twitterapp", "http");

            URL url = new URL(callbackUrl);
            String query = url.getQuery();

            String array[] = query.split("&");

            for (String parameter : array) {
                String v[] = parameter.split("=");

                if (URLDecoder.decode(v[0]).equals(
                        oauth.signpost.OAuth.OAUTH_VERIFIER)) {
                    verifier = URLDecoder.decode(v[1]);
                    break;
                }
            }
        } catch (MalformedURLException e) {
            e.printStackTrace();
        }

        return verifier;
    }

    private void showLoginDialog(String url) {
        final TwDialogListener listener = new TwDialogListener() {

            public void onComplete(String value) {
                processToken(value);
            }

            public void onError(String value) {
                mListener.onError("Failed opening authorization page");
            }
        };

        new TwitterDialog(context, url, listener).show();
    }

    private Handler mHandler = new Handler() {
        @Override
        public void handleMessage(Message msg) {
            mProgressDlg.dismiss();

            if (msg.what == 1) {
                if (msg.arg1 == 1)
                    mListener.onError("Error getting request token");
                else
                    mListener.onError("Error getting access token");
            } else {
                if (msg.arg1 == 1)
                    showLoginDialog((String) msg.obj);
                else
                    mListener.onComplete("");
            }
        }
    };

    public interface TwDialogListener {
        public void onComplete(String value);

        public void onError(String value);
    }
} 
```

第 2 类：- (TwitterDialog.java)

```
package com.twitter.android;

import android.app.Dialog;
import android.app.ProgressDialog;
import android.content.Context;
import android.graphics.Bitmap;
import android.graphics.Color;
import android.graphics.Typeface;
import android.graphics.drawable.Drawable;
import android.os.Bundle;
import android.view.Display;
import android.view.ViewGroup;
import android.view.Window;
import android.webkit.WebView;
import android.webkit.WebViewClient;
import android.widget.FrameLayout;
import android.widget.LinearLayout;
import android.widget.TextView;
import com.twitter.android.TwitterApp.TwDialogListener;

public class TwitterDialog extends Dialog {

    static final float[] DIMENSIONS_LANDSCAPE = { 460, 260 };
    static final float[] DIMENSIONS_PORTRAIT = { 280, 420 };
    static final FrameLayout.LayoutParams FILL = new FrameLayout.LayoutParams(
            ViewGroup.LayoutParams.FILL_PARENT,
            ViewGroup.LayoutParams.FILL_PARENT);
    static final int MARGIN = 4;
    static final int PADDING = 2;
    private String mUrl;
    private TwDialogListener mListener;
    private ProgressDialog mSpinner;
    private WebView mWebView;
    private LinearLayout mContent;
    private TextView mTitle;
    private boolean progressDialogRunning = false;

    public TwitterDialog(Context context, String url, TwDialogListener listener) {
        super(context);

        mUrl = url;
        mListener = listener;
    }

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        mSpinner = new ProgressDialog(getContext());

        mSpinner.requestWindowFeature(Window.FEATURE_NO_TITLE);
        mSpinner.setMessage("Loading...");

        mContent = new LinearLayout(getContext());

        mContent.setOrientation(LinearLayout.VERTICAL);

        setUpTitle();
        setUpWebView();

        Display display = getWindow().getWindowManager().getDefaultDisplay();
        final float scale = getContext().getResources().getDisplayMetrics().density;
        float[] dimensions = (display.getWidth() < display.getHeight()) ? DIMENSIONS_PORTRAIT
                : DIMENSIONS_LANDSCAPE;

        addContentView(mContent, new FrameLayout.LayoutParams(
                (int) (dimensions[0] * scale + 0.5f), (int) (dimensions[1]
                        * scale + 0.5f)));
    }

    private void setUpTitle() {
        requestWindowFeature(Window.FEATURE_NO_TITLE);

        Drawable icon = getContext().getResources().getDrawable(
                R.drawable.twitter_icon);

        mTitle = new TextView(getContext());

        mTitle.setText("Twitter");
        mTitle.setTextColor(Color.WHITE);
        mTitle.setTypeface(Typeface.DEFAULT_BOLD);
        mTitle.setBackgroundColor(0xFFbbd7e9);
        mTitle.setPadding(MARGIN + PADDING, MARGIN, MARGIN, MARGIN);
        mTitle.setCompoundDrawablePadding(MARGIN + PADDING);
        mTitle.setCompoundDrawablesWithIntrinsicBounds(icon, null, null, null);

        mContent.addView(mTitle);
    }

    private void setUpWebView() {
        mWebView = new WebView(getContext());

        mWebView.setVerticalScrollBarEnabled(false);
        mWebView.setHorizontalScrollBarEnabled(false);
        mWebView.setWebViewClient(new TwitterWebViewClient());
        mWebView.getSettings().setJavaScriptEnabled(true);
        mWebView.loadUrl(mUrl);
        mWebView.setLayoutParams(FILL);

        mContent.addView(mWebView);
    }

    private class TwitterWebViewClient extends WebViewClient {

        @Override
        public boolean shouldOverrideUrlLoading(WebView view, String url) {
            if (url.startsWith(TwitterApp.CALLBACK_URL)) {
                mListener.onComplete(url);

                TwitterDialog.this.dismiss();

                return true;
            } else if (url.startsWith("authorize")) {
                return false;
            }
            return true;
        }

        @Override
        public void onReceivedError(WebView view, int errorCode,
                String description, String failingUrl) {
            super.onReceivedError(view, errorCode, description, failingUrl);
            mListener.onError(description);
            TwitterDialog.this.dismiss();
        }

        @Override
        public void onPageStarted(WebView view, String url, Bitmap favicon) {
            super.onPageStarted(view, url, favicon);
            mSpinner.show();
            progressDialogRunning = true;
        }

        @Override
        public void onPageFinished(WebView view, String url) {
            super.onPageFinished(view, url);
            String title = mWebView.getTitle();
            if (title != null && title.length() > 0) {
                mTitle.setText(title);
            }
            progressDialogRunning = false;
            mSpinner.dismiss();
        }

    }

    @Override
    protected void onStop() {
        progressDialogRunning = false;
        super.onStop();
    }

    public void onBackPressed() {
        if(!progressDialogRunning){
            TwitterDialog.this.dismiss();
        }
    }
} 
```

第 3 类：- (TwitterSession.java)

```
package com.twitter.android;

import android.content.SharedPreferences;
import android.content.SharedPreferences.Editor;
import android.content.Context;
import twitter4j.http.AccessToken;

public class TwitterSession {
    private SharedPreferences sharedPref;
    private Editor editor;

    private static final String TWEET_AUTH_KEY = "auth_key";
    private static final String TWEET_AUTH_SECRET_KEY = "auth_secret_key";
    private static final String TWEET_USER_NAME = "user_name";
    private static final String SHARED = "Twitter_Preferences";

    public TwitterSession(Context context) {
        sharedPref = context.getSharedPreferences(SHARED, Context.MODE_PRIVATE);

        editor = sharedPref.edit();
    }

    public void storeAccessToken(AccessToken accessToken, String username) {
        editor.putString(TWEET_AUTH_KEY, accessToken.getToken());
        editor.putString(TWEET_AUTH_SECRET_KEY, accessToken.getTokenSecret());
        editor.putString(TWEET_USER_NAME, username);

        editor.commit();
    }

    public void resetAccessToken() {
        editor.putString(TWEET_AUTH_KEY, null);
        editor.putString(TWEET_AUTH_SECRET_KEY, null);
        editor.putString(TWEET_USER_NAME, null);

        editor.commit();
    }

    public String getUsername() {
        return sharedPref.getString(TWEET_USER_NAME, "");
    }

    public AccessToken getAccessToken() {
        String token = sharedPref.getString(TWEET_AUTH_KEY, null);
        String tokenSecret = sharedPref.getString(TWEET_AUTH_SECRET_KEY, null);

        if (token != null && tokenSecret != null)
            return new AccessToken(token, tokenSecret);
        else
            return null;
    }
} 
```

并将以下 Jar 文件作为参考库添加到您的项目中：-

1) 路标-commonshttp4-1.2.1.1.jar

2）signpost-core-1.2.1.1.jar

3) 路标-jetty6-1.2.1.1.jar

4) twitter4j-core-2.1.6.jar

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-28T06:30:05.777

只需将您的 jar 文件从 lib 文件夹移动到 libs。它对我有用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-31T07:52:12.317

它的sdk问题，我确实更新了我的sdk。它工作正常

# html - 应用标签时退出目录

> ID：11667187
> 
> 赞同：0
> 
> 时间：2012-07-26T10:16:15.867
> 
> 标签：html, directory

如何退出当前目录*Dreamland*？

![在此处输入图像描述](../Images/fc58708db5dd42237677e6d7ae7cfb65.png)

*我必须在Dreamland目录内的**jsp*页面中使用以下标记：

 *```
 <link href="css/style.css" rel="stylesheet" type="text/css" /> 
```

目前它无法找到*css*目录。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T10:20:31.603

您可以尝试使用`/css/style.css`, 或`../css/style.css`（如果您不使用服务器）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-26T10:22:18.310

```
<link href="../css/style.css" rel="stylesheet" type="text/css" /> 
```

`../`意味着上一级目录，一级`../`将您放入*Web Pages*文件夹*

# c++ - 如何使用 rtsp 地址而不是文件使 live555 服务器进行流式传输

> ID：11667189
> 
> 赞同：1
> 
> 时间：2012-07-26T10:16:17.717
> 
> 标签：c++, rtsp, live555

我一直在研究 testOnDemandRTSPServer 代码，我想通过使用 rtsp 地址从实时源获取输入来进行流式传输。我读过我必须修改 OnDemandServerMediaSubsession 和 createNewStreamSource() 和 createNewRTPSink() 函数。我不知道该怎么做。我不知道如何开始。我一直在通过互联网搜索信息，但我没有找到任何东西。请帮忙。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T12:09:13.963

我认为您需要的是他们的[proxyServer](http://www.live555.com/proxyServer/)。它就像您的 RTSP 源的客户端和其他客户端的服务器。

常见情况是知道如何执行单播流并需要进行多播的源。（通常是 IP 摄像机）

# android - 如何调整屏幕分辨率？

> ID：11667195
> 
> 赞同：2
> 
> 时间：2012-07-26T10:16:39.667
> 
> 标签：android

> 在 android 中有许多不同类型的屏幕分辨率可用。如何使用java代码调整屏幕分辨率？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T10:42:52.677

无法以编程方式更改屏幕分辨率。AFAIK，您需要进行硬件级别的修改才能更改它。

相反，您必须以一种能够很好地跨显示器缩放的方式编写您的应用程序。使用不同尺寸和密度的多个图像，使用 dp 单位而不是 px 单位。为不同的屏幕尺寸制作布局。[所有这些以及更多内容都在此处](http://developer.android.com/guide/practices/screens_support.html)的在线文档中进行了解释。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-26T10:47:57.453

如果您询问如何使您的应用程序适应设备分辨率，您应该使用下面的代码阅读屏幕分辨率，并让您的应用程序按照您的意愿填充空间。

```
Display display = getWindowManager().getDefaultDisplay();
Point size = new Point();
display.getSize(size);
int width = size.x;
int height = size.y; 
```

由于有 1000 多种不同的 Android 设备，您无法使用一行代码自动为您执行此操作。

如果您正在谈论像在 PC 中一样更改屏幕分辨率。LCD 屏幕具有无法更改的原始分辨率。但是，在 PC 中，显示器背后的驱动程序或硬件会通过将连续像素视为单个像素来更改分辨率。高分辨率显示器中添加了此选项，只是为了保持与旧视频卡的兼容性。在手机中，我们不需要这样做，所以没有这样的选择。当 LCD 显示器取代 CRT 时，他们需要在不同的分辨率下工作，例如 CRT 可以在多个原始分辨率下工作。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2014-04-08T10:08:47.363

```
public int AR(int input)
{       
    final float scale = getResources().getDisplayMetrics().density;        
    return (int) (input * scale + 0.5f);
} 
```

> 其中，输入是您要使用的值。例子：

```
ImageView TitleImage = new ImageView(this);
TitleImage.setPadding(AR(10), AR(5), AR(2), AR(3)); 
```

> 现在图像填充适合各种分辨率。

# sql-server-2008 - 在 Sql server 中跨多个表搜索相关性

> ID：11667197
> 
> 赞同：0
> 
> 时间：2012-07-26T10:16:55.470
> 
> 标签：sql-server-2008, full-text-search, ranking

我正面临一个挑战`Full Text Search in SQL SERVER 2008.`

我有 2 个表 A 和 B ，它们各自的列 a, b 。现在，我想对所有这 3 个表进行全文搜索，并具有组合搜索相关性。

这意味着，如果在所有两个表中都找到了搜索文本，则它的排名应该更高。如果它仅在 col 中找到。表 A 的 a，如果只在 col 中找到，则应该排在第二位。表B的b，那么它应该排在第三位

如何才能做到这一点。

像这样的查询，

```
SELECT A.a, B.b, C.c, a.Title, akt.[Rank] + bkt.[Rank] /2  AS [Rank]
    FROM PublicationSearch b
    INNER JOIN Publication a ON a.Id = b.Id
    INNER JOIN FREETEXTTABLE(A, a, 'search text') akt ON a.Id = akt.[Key]
    INNER JOIN FREETEXTTABLE(B, b, 'search text') bkt ON b.Id = bkt.[Key] 

ORDER BY [Rank] DESC 
```

发生的事情是，如果搜索结果存在于两个具有适当排名的表中，它会向我显示搜索结果。

但是，如果搜索结果只在一个表中，则它不会显示。如果我申请 a `LEFT JOIN`，那么记录即将到来，但带有`RANK = Null`.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T05:50:56.760

SELECT Aa, Bb, akt.[Rank] + bkt.[Rank] /2 AS [Rank] FROM B b INNER JOIN Publication a ON a.Id = b.Id INNER JOIN FREETEXTTABLE(A, a, 'search text') akt ON a.Id = akt.[Key] INNER JOIN FREETEXTTABLE(B, b, 'search text') bkt ON b.Id = bkt.[Key]

ORDER BY [等级] DESC

联盟

SELECT Aa, null as Bb, akt.[Rank] as [Rank] FROM A a INNER JOIN FREETEXTTABLE(A, a, 'search text') akt ON a.Id = akt.[Key]

联盟

SELECT null as Aa, Bb, bkt.[Rank] as [Rank] FROM B b INNER JOIN FREETEXTTABLE(A, a, 'search text') akt ON a.Id = akt.[Key]

上述查询用于跨两个表搜索记录（使用排名）。第一个查询：只有搜索文本在两个表的列中的那些记录才会显示。

第二个查询：只有那些 searchtext 只在表 A 的列中的记录

第三个查询：仅那些 searchtext 仅在表 B 的列 b 中的记录

我的问题是，如果我必须搜索 4 或 5 个表，UNION 的数量会像疯了一样增加。它也会太复杂和缓慢。

那么，有没有其他方法可以减少我尝试过的这些 UNION 视图，但它们不能被全文索引。

任何想法..谢谢，马库斯

# css - 移动响应式设计中的可用性原则

> ID：11667200
> 
> 赞同：1
> 
> 时间：2012-07-26T10:17:15.020
> 
> 标签：css, usability, responsive-design

我目前正在研究网站的移动改编，我很好奇人们的通用规则是关于可用性问题的，例如按钮和链接大小。

例如，我的网站在 iPad 上看起来略有不同（横向显示没有任何变化），但是一旦屏幕小于 515 像素，我就会将链接字体大小更改为 150%，并在按钮之间添加额外的边距。我这样做的原因是，在较小的屏幕上具有良好的可用性，按钮更大更清晰，因此更易于使用。事情是大多数规则我发现自己一直在争论我应该将这些规则应用于哪些尺寸的屏幕以及我应该忽略哪些尺寸。例如，我是否也应该增加 iPad 屏幕上的链接大小？！

此外，在为某些设备尺寸设计时，是否有人有任何好的做法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T10:22:26.657

这是一篇关于响应式设计的有趣文章：

[http://webdesignerwall.com/tutorials/responsive-design-with-css3-media-queries](http://webdesignerwall.com/tutorials/responsive-design-with-css3-media-queries)

不要忘记，重要的不仅仅是可读性。人们通常用手指使用小型设备，因此只要元素的“命中区域”良好，那么一半的可用性问题已经得到解决。

我想得到更多帮助，但这确实有点像“吸了就看”类型的交易。没有一种适合所有解决方案的尺寸。

祝你好运。

# java - Android：如何停止收听 PhoneCallListener？

> ID：11667209
> 
> 赞同：-1
> 
> 时间：2012-07-26T10:18:29.763
> 
> 标签：java, android, call, phone-state-listener

> **可能重复：**
> [Android：为什么 PhoneCallListener 在活动完成后仍然存在？](https://stackoverflow.com/questions/11666853/android-why-phonecalllistener-still-alive-after-activity-finish)

当电话状态回到 IDLE 时，我正在拨打电话并使用电话监听器重新启动活动。但是在我完成活动后，电话监听器仍在运行，因此当用户拨打自己的电话并挂断时，我的活动再次出现！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-26T10:20:10.980

`LISTEN_NONE`用作方法的参数以`listen`停止侦听更新。

# jquery - 数据表 - 将编辑器集成到我现有的表中

> ID：11667212
> 
> 赞同：0
> 
> 时间：2012-07-26T10:18:46.520
> 
> 标签：jquery, datatables, jquery-datatables-editor

我使用 Datatables 插件 ( [http://www.datatables.net](http://www.datatables.net) ) 和 Datatables Editor ( [http://editor.datatables.net](http://editor.datatables.net) ) 设置了一些表。

我正在尝试将编辑器集成到我现有的表中，但在所有编辑字段中都未定义（在弹出窗口中）。

我所拥有的和生成器下载之间的唯一区别是 aoColumns 设置。

这是我目前拥有的：

```
"aoColumns": [
{  "sTitle": "id" },
{  "sTitle": "Name" },
{  "sTitle": "Surname" },
{  "sTitle": "Email" } 
```

但编辑器代码有：

```
"aoColumns": [
{  "mDataProp": "id" },
{  "mDataProp": "Name" },
{  "mDataProp": "Surname" },
{  "mDataProp": "Email" } 
```

当我将“sTitle”更改为“mDataProp”时，我的表不再加载。

我显然走错了路……对此的任何方向都将不胜感激。

编辑：

这是我的完整代码：

```
 <script type="text/javascript">
    function fnShowHide( iCol ){
        /* Get the DataTables object again - this is not a recreation, just a get of the object */
        var oTable = jQuery('#example').dataTable();

        var bVis = oTable.fnSettings().aoColumns[iCol].bVisible;
        oTable.fnSetColumnVis( iCol, bVis ? false : true );
    }

    (function($){

    $(document).ready(function() {

    var aDataSet = [
            var aDataSet = [
['805',
'Emelia',
'Smith',
'emelia_s@yahoo.com'
],
['804',
'david',
'Davies',
'ddavies@yahoo.co.uk'
],      
    ]; 
                    var editor = new $.fn.dataTable.Editor( {
                        "ajaxUrl": "php/table.wp_newsletter.php",
                        "domTable": "#example",
                        "fields": [
                {
                    "label": "First Name",
                    "name": "name",
                    "type": "text"
                },
                {
                    "label": "Last Name",
                    "name": "surname",
                    "type": "text"
                },
                {
                    "label": "Email Address",
                    "name": "email",
                    "type": "text"
                }
            ]
                    } );
                    var oTable;             
                    var oTable = $('#example').dataTable( {
                        "sDom": '<"postbox full"<W>><"clear"><"postbox full"<C><T>><"clear"><"postbox full"<lfr>><"clear"><"postbox full"<t>>ip',
                        "oColumnFilterWidgets": {
                            "aiExclude": [ 0,1,2,3,6,7,9 ],
                        },
                        "iDisplayLength": 50,
                        "sPaginationType": "full_numbers",
                        "bSortClasses": false,
                        "aaData": aDataSet,
                        "oLanguage": {
                            "sSearch": "Search all columns:"
                        },
                        "oTableTools": {
                        "sSwfPath": "swf/copy_csv_xls_pdf.swf",
                        "sRowSelect": "multi",
                        "aButtons": [
                            { "sExtends": "editor_create", "editor": editor },
                            { "sExtends": "editor_edit",   "editor": editor },
                            { "sExtends": "editor_remove", "editor": editor }
                        ]
                        },
                        "aoColumns": [
                            { "sTitle": "id" },
                            { "sTitle": "Name" },
                            { "sTitle": "Surname" },
                            { "sTitle": "Email" },
                            {
                                "sTitle": "Admin",
                                "sClass": "center",
                                "sDefaultContent": '<a href="" class="editor_edit">Edit</a> / <a href="" class="editor_remove">Delete</a>'
                            }
                        ],
                    } );

                    oTable.fnSetColumnVis( 7, false );
                    oTable.fnSetColumnVis( 8, false );
                    oTable.fnSetColumnVis( 9, false );

                    // New record
                    $('a.editor_create').on('click', function (e) {
                        e.preventDefault();

                        editor.create(
                            'Create new record',
                            { "label": "Add", "fn": function () { editor.submit() } }
                        );
                    } );

                    // Edit record
                    $('#example').on('click', 'a.editor_edit', function (e) {
                        e.preventDefault();

                        editor.edit(
                            $(this).parents('tr')[0],
                            'Edit record',
                            { "label": "Update", "fn": function () { editor.submit() } }
                        );
                    } );

                    // Delete a record (without asking a user for confirmation)
                    $('#example').on('click', 'a.editor_remove', function (e) {
                        e.preventDefault();

                        editor.remove( $(this).parents('tr')[0], '123', false, false );
                        editor.submit();
                    } );

                    var asInitVals = new Array();

                    $("#filter input").keyup( function () {
                        /* Filter on the column (the index) of this element */
                        oTable.fnFilter( this.value, $("#filter input").index(this)+1 );
                        //console.log($("#filter input").index(this)+1);
                    } );
                    /*
                     * Support functions to provide a little bit of 'user friendlyness' to the textboxes in 
                     * the footer
                     */
                    $("#filter input").each( function (i) {
                        asInitVals[i] = this.value;
                    } );

                    $("#filter input").focus( function () {
                        if ( this.className == "search_init" )
                        {
                            this.className = "";
                            this.value = "";
                        }
                    } );

                    $("#filter input").blur( function (i) {
                        if ( this.value == "" )
                        {
                            this.className = "search_init";
                            this.value = asInitVals[$("#filter input").index(this)];
                        }
                    } );

    } );

    }(jQuery));

        </script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T12:46:26.087

尝试改变：

```
 "aoColumns": [
   {  "mDataProp": "id" },
   {  "mDataProp": "Name" },
   {  "mDataProp": "Surname" },
   {  "mDataProp": "Email" } 
```

至

```
"aoColumns": [
{  "sTitle": "id" },
{  "mDataProp": "name", "sTitle": "Name" },
{  "mDataProp": "surname", "sTitle": "Surname" },
{  "mDataProp": "email", "sTitle": "Email" } 
```

我从经验中知道 datatables/jvascript 是区分大小写的，所以这可能是`mDataProp`. 如果不是这样，我们可以深入搜索：D

更新：

改变这个：

```
"fields": [
            {
                "label": "First Name",
                "name": "name",
                "type": "text"
            },
            {
                "label": "Last Name",
                "name": "surname",
                "type": "text"
            },
            {
                "label": "Email Address",
                "name": "email",
                "type": "text"
            } 
```

至：

```
"fields": [
            {
                "label": "ID",
                "name": "id",
                "type": "text"
            },
            {
                "label": "First Name",
                "name": "name",
                "type": "text"
            },
            {
                "label": "Last Name",
                "name": "surname",
                "type": "text"
            },
            {
                "label": "Email Address",
                "name": "email",
                "type": "text"
            } 
```

然后更新这个：

```
"aoColumns": [
{  "mDataProp": "id", "sTitle": "id" },
{  "mDataProp": "name", "sTitle": "Name" },
{  "mDataProp": "surname", "sTitle": "Surname" },
{  "mDataProp": "email", "sTitle": "Email" } 
```

# python - NumPy 数组中的向量化字符串处理

> ID：11667216
> 
> 赞同：3
> 
> 时间：2012-07-26T10:18:52.010
> 
> 标签：python, arrays, string, numpy

如何优雅地处理 numpy 数组中的文本？

我总是可以遍历数组，但是也有一些神奇的 oneliner 可能吗？我只是在学习 python，并希望以一种看起来不错的方式来做。

我想要的例子：

```
for y in data['filename']:
first = 12
last  = y[1][12:].find('.')
y= y[1][first+1:last+12] 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-05-24T06:16:35.323

您可以使用`numpy.char.array()`，例如：

```
from string import find

import numpy as np

a = np.char.array(['cmd.py', 'matrix.txt', 'print.txt', 'test.txt', 'testpickle.test', 'Thumbs.db', 'tmp.py', 'tmp.txt', 'tmp2.py'])
find(a, '.py')
#array([ 3, -1, -1, -1, -1, -1,  3, -1,  4])

np.char.array(a.split('.'))[:,0]
#chararray(['cmd', 'matrix', 'print', 'test', 'testpickle', 'Thumbs', 'tmp', 'tmp', 'tmp2'], dtype='|S10') 
```

# iphone - 有谁知道如何从应用程序内部更改 iPhone 设置？

> ID：11667219
> 
> 赞同：0
> 
> 时间：2012-07-26T10:18:51.557
> 
> 标签：iphone, objective-c, ios, xcode

有谁知道如何更改应用程序的 iPhone 设置？例如：应用程序中通知的打开或关闭开关。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T10:42:30.853

这不能在您的应用程序中完成。但是，您可以使用 URL 方案从您的应用程序中打开首选项（即离开您的应用程序并打开首选项）

[此链接应提供更多信息](http://maniacdev.com/2011/11/tutorial-using-url-schemes-to-open-the-settings-app-to-a-specific-page-in-ios-5/)

# javascript - jqGrid中的正则表达式验证

> ID：11667221
> 
> 赞同：1
> 
> 时间：2012-07-26T10:19:00.917
> 
> 标签：javascript, regex, validation, jqgrid, jqgrid-formatter

我想使用正则表达式验证（电子邮件、网站、电话号码等）。那么如何在[jqGrid](http://www.trirand.com/jqgridwiki/doku.php?id=start)添加和编辑表单中做到这一点？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-07-26T11:27:03.550

我希望这些文章对您有所帮助：

*   *[jqGridnew 编辑规则正则表达式](http://www.trirand.com/blog/?page_id=393/feature-request/new-editrule-regex/)*

*   Stack Overflow 问题*[jQuery validate：如何为正则表达式验证添加规则？](https://stackoverflow.com/questions/280759/jquery-validate-how-to-add-a-rule-for-regular-expression-validation/709358#709358)*

# xml - 检查元素在 xslt 中有值

> ID：11667222
> 
> 赞同：0
> 
> 时间：2012-07-26T10:19:00.700
> 
> 标签：xml, xslt, xpath

如何获取 xslt 中元素的值。假设我的xml是这样的，

```
<comp>
 <link ref=1>1997</link>
 <link ref=2><?LINK 2008?></link>
</comp> 
```

我需要这样的输出，

```
<comp>
  <link ssref=1/><num>1997</num>
  <link ssref=2/><num>2008</num>
</comp> 
```

如果链接具有价值，我需要获得该价值，如果它具有这样的价值，`<?LINK 2008?>`我只需要一年。我使用了以下xsl，但它不起作用。

```
<xsl:template match ="link">
<xsl:element name ="{local-name(.)}">
  <xsl:attribute name ="sshref">
    <xsl:value-of select ="@ref"/>
  </xsl:attribute>
    </xsl:element>
<xsl:if test="text()">
  <xsl:element name ="num">
    <xsl:value-of select ="link"/>
  </xsl:element>
</xsl:if>
</template> 
```

我知道这个 xsl 错误我只是发布一些参考。提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-26T10:45:55.973

首先，您的 XML 格式不正确，因为属性应该用撇号或引号括起来，但我猜这可能是一个简单的错字。

至于具体问题是一个处理指令，所以你的**xsl:if**检查 text() 不会选择这个。

您还遇到了一个问题，`<xsl:value-of select="link" />`因为您当前的上下文已经在**链接**元素上，因此这是在寻找另一个**链接**元素，它是当前元素的子元素。你可能只想做这样的事情

```
<xsl:value-of select="." /> 
```

所以，你可以像这样重写你的模板

```
<xsl:template match="link">
    <xsl:element name="{local-name(.)}">
        <xsl:attribute name="sshref">
            <xsl:value-of select="@ref"/>
        </xsl:attribute>
        <xsl:if test="text()|processing-instruction()">
            <xsl:element name="num">
                <xsl:apply-templates select="text()|processing-instruction()"/>
            </xsl:element>
        </xsl:if>
    </xsl:element>
</xsl:template>

<xsl:template match="processing-instruction()">
    <xsl:value-of select="."/>
</xsl:template> 
```

然而，值得注意的是，最好避免使用**xsl:if**元素，而是使用模板匹配的强大功能。试试这个替代的 XSLT。

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
   <xsl:output method="xml" indent="yes"/>

   <xsl:template match="link[text()|processing-instruction()]">
      <link>
         <num>
            <xsl:apply-templates select="text()|processing-instruction()"/>
         </num>
      </link>
   </xsl:template>

   <xsl:template match="link/@ref">
      <xsl:attribute name="ssref">
         <xsl:value-of select="."/>
      </xsl:attribute>
   </xsl:template>

   <xsl:template match="processing-instruction()">
      <xsl:value-of select="."/>
   </xsl:template>

   <xsl:template match="@*|node()[not(self::processing-instruction())]">
      <xsl:copy>
         <xsl:apply-templates select="@*|node()"/>
      </xsl:copy>
   </xsl:template>
</xsl:stylesheet> 
```

应用于以下 XMK 时

```
<comp>
   <link ref="1">1997</link>
   <link ref="2"><?LINK 2008?></link>
</comp> 
```

以下是输出：

```
<comp>
   <link sshref="1">
      <num>1997</num>
   </link>
   <link sshref="2">
      <num>2008</num>
   </link>
</comp> 
```

请注意，除非您想要动态命名的元素，否则无需使用**xsl: element。**

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-26T11:18:30.997

您可以做的最简单的 XSLT 转换如下所示

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
  <xsl:output method="xml" indent="yes"/>

  <xsl:template match="@* | node()">
    <xsl:copy>
       <xsl:apply-templates select="@* | node()" />
    </xsl:copy>
  </xsl:template>

  <xsl:template match="link/text() | link/processing-instruction()">
    <num><xsl:value-of select="normalize-space()" /></num>
  </xsl:template>

  <xsl:template match="link/@ref">
     <xsl:attribute name="ssref"><xsl:value-of select="."/></xsl:attribute>
  </xsl:template>
</xsl:stylesheet> 
```

它转变

```
<comp>
 <link ref="1">1997</link>
 <link ref="2"><?LINK 2008?></link>
</comp> 
```

成想要的结果。

```
<comp>
 <link ssref="1"><num>1997</num></link>
 <link ssref="2"><num>2008</num></link>
</comp> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-26T11:00:04.173

您的 XML 格式不正确，应该是这样的：

```
<comp>
  <link ref="1">1997</link>
  <link ref="2"><?LINK 2008?></link>
</comp> 
```

然后您可以使用以下 XSLT 来获得您想要的结果：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
  <xsl:template match="/">
    <xsl:element name="comp">
      <xsl:apply-templates/>
    </xsl:element>
  </xsl:template>
  <xsl:template match="comp/link">
    <xsl:element name="{local-name(.)}">
      <xsl:attribute name="sshref"><xsl:value-of select="@ref"/></xsl:attribute>
    </xsl:element>
    <xsl:if test="text()|processing-instruction()">
      <xsl:element name="num">
        <xsl:apply-templates select="text()|processing-instruction()"/>
      </xsl:element>
    </xsl:if>
  </xsl:template>
  <xsl:template match="processing-instruction()">
    <xsl:value-of select="."/>
  </xsl:template>
</xsl:stylesheet> 
```

# java - Java中可序列化的工作

> ID：11667223
> 
> 赞同：0
> 
> 时间：2012-07-26T10:19:10.670
> 
> 标签：java, serializable

当 serializable 是一个标记接口时，它如何使对象持久化？当接口的主体什么都不是时，它如何对实现它的类执行一些操作？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-26T10:26:04.563

使用 ObjectOutputStream 使对象可持久化。此类只会序列化标有此接口的类，以防止您序列化您不打算或无法序列化的类。

注意：有些序列化库不遵循 Serialzation 的所有规则，可以忽略 Serializable 接口。

# java - 在 Weblogic Server 中设置 Java 堆空间

> ID：11667228
> 
> 赞同：2
> 
> 时间：2012-07-26T10:19:40.303
> 
> 标签：java, jakarta-ee, out-of-memory, weblogic, heap-memory

我在 Weblogic 服务器中部署并运行了我的 Java EE Web 应用程序。

如果我想设置像这样的最小和最大参数，Xms100m Xmx500m，我应该在哪里更改？

无论是在`Weblogic 10.0MP`服务器中（如果是，在哪里）还是在 IDE 中构建应用程序时？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-26T10:23:50.323

对于 Admin Server，这可以在`$domain_home/bin/setDomainEnv.sh`（如果您使用 Windows，很可能是相应的 bat）脚本中完成，对于通过 Weblogic 控制台的托管服务器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T10:25:58.217

如果您正在启动 weblogic 形式的 IDE，例如 Eclipse，您可以在运行配置选项（JVM 参数）中进行更改。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-02T09:29:09.907

您可以在服务器启动参数中更改它，如下所述：http: [//itbitsolutions.wordpress.com/2010/08/22/increasing-the-heap-size-of-the-jvm/](http://itbitsolutions.wordpress.com/2010/08/22/increasing-the-heap-size-of-the-jvm/)

更改后，您需要重新启动服务器以应用更改。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-03-26T11:32:40.923

WLS 12c 上的环境变量 USER_MEM_ARGS。

例如：

```
-Xms256m -Xmx768m -XX:MaxPermSize=256m 
```

不要忘记 MaxPermSize，否则它将默认并且可能就足够了。

# sql-server-2008 - Windows Phone 与远程数据库同步

> ID：11667229
> 
> 赞同：2
> 
> 时间：2012-07-26T10:19:41.043
> 
> 标签：sql-server-2008, windows-phone-7

我开始构建一个需要来自远程 SQL 服务器数据库的数据的 windows phone 应用程序。为了提高性能，有人建议我与手机上的本地数据库进行同步。因此，在同步中，我可以从远程 SQL 数据库批量复制到本地紧凑型 SQL 数据库。

谁能建议执行此同步的最佳方法是什么？有什么工具吗？蜜蜂？

谢谢

# android - Intent.ACTION_VIEW 不允许在图库应用中进行编辑

> ID：11667232
> 
> 赞同：3
> 
> 时间：2012-07-26T10:19:43.257
> 
> 标签：android, android-intent, gallery

我有一个应用程序想要在图库应用程序中查看图像。我使用这段代码来查看它：

```
File cachedImage = cache.getFile(image.getImageUrl());
Intent intent = new Intent();
intent.setAction(Intent.ACTION_VIEW);
intent.setDataAndType(Uri.fromFile(cachedImage), "image/*");
startActivity(intent); 
```

这有效，除非我单击此处的编辑设置：

![在此处输入图像描述](../Images/0b2c60d6eba3b891fe038ba9bb8b59f9.png)

我得到没有应用程序可以执行此操作消息：

![在此处输入图像描述](../Images/2114172ea2321682ac721220a9de365f.png)

有什么办法可以使这项工作？我需要传递额外的额外内容吗？我知道 Gmail 应用程序能够查看图库中的图像附件，并且编辑功能有效。这是在果冻豆上。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T11:30:22.257

> 有什么办法可以使这项工作？

安装一个可以编辑图片的应用程序。您的屏幕截图似乎是 Gallery 应用程序的屏幕截图，该应用程序可能试图用于`ACTION_EDIT`启动一个活动来编辑图片，并且没有此类活动可用。

# asp.net - ASPNET：在会话状态提供者之间切换？

> ID：11667234
> 
> 赞同：2
> 
> 时间：2012-07-26T10:19:48.090
> 
> 标签：asp.net, session-state

我想开发一个新的自定义会话状态提供程序或使用现有的（分布式缓存，sql ...）。我们的主网站每天的访问量超过 10 000 000 次。对于我们来说，在出现错误或性能下降的情况下提供简单的回滚/切换非常重要。更改 web.config 不是最优的，因为我们有超过 20 台前端服务器。我们的想法是通过数据库中的简单配置在会话提供者（从我们的自定义到 InProc）之间切换。

是否可以有多个会话状态提供者或在提供者之间轻松切换？

我在这里找到了[http://netpl.blogspot.fr/2007/06/wrapped-inprocsessionstatestore.html](http://netpl.blogspot.fr/2007/06/wrapped-inprocsessionstatestore.html)，这是一个拥有通用包装器的解决方案，但它似乎不太健壮。

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T12:02:07.500

仅供将来参考，不可能动态更改会话状态提供程序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-04-01T09:45:54.633

这不是.. 完全正确.. 你可以使用反射来做到这一点：

```
var privateFieldFlags = System.Reflection.BindingFlags.Instance | System.Reflection.BindingFlags.NonPublic;

//Get session state section
var sessionStateSection = ConfigurationManager.GetSection("system.web/sessionState") as SessionStateSection;
var values = typeof(ConfigurationElement).GetField("_values", privateFieldFlags).GetValue(sessionStateSection);
var entriesArray = values.GetType().BaseType.GetField("_entriesArray", privateFieldFlags).GetValue(values);

//Get "Mode" entry (index: 2)
var modeEntry = (entriesArray as System.Collections.ArrayList)[2];
var entryValue = modeEntry.GetType().GetField("Value", privateFieldFlags).GetValue(modeEntry);

//Change entry value to InProc
entryValue.GetType()
        .GetField("Value", privateFieldFlags)
        .SetValue(entryValue, System.Web.SessionState.SessionStateMode.InProc); 
```

参考：
[动态会话状态提供者](https://stackoverflow.com/questions/17785084/dynamic-session-state-provider)
[http://www.answerandquestion.net/questions/4447903/dynamic-session-state-provider](http://www.answerandquestion.net/questions/4447903/dynamic-session-state-provider)

# css - 显示验证标签时表单中标签元素上的 CSS 错误

> ID：11667235
> 
> 赞同：1
> 
> 时间：2012-07-26T10:19:49.670
> 
> 标签：css

当我单击发送按钮并显示红色验证消息时，表单左侧的标签（例如“**姓名**添加您的姓名”）似乎移动了位置。

该表格可在此处找到：

[http://www.bestclowintown.co.uk/book.php](http://www.bestclownintown.co.uk/book.php)

这是标签的 CSS 规则，第二条规则是错误消息的规则。无论如何要修改这些 CSS 规则或其他元素的规则，以确保单击“发送”时，黑色标签显示在左侧，红色验证标签显示在表单的右侧。

```
#stylized label {
display: block;
font-weight: bold;
text-align: left;
width: 140px;
float: left;
}

label.error {  
color: red; 
padding-left: .5em; 
vertical-align: top; 
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T10:55:16.857

进行以下更改。

*   将表单的宽度从 500 像素更改为 900 像素，以适应标签、输入和错误消息。
*   添加明确：两者；到左侧标签。
*   删除错误消息的 padding-left。
*   将 height:40px 添加到错误消息中。

所有样式都在 style.css 中定义。因此，检查用于上述更改的类并在该文件中进行所需的更改。

如果有任何问题，请告诉我。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T10:30:26.787

您将完全相同的 css 应用于原始标签和错误标签，因为它们都与 #stylized 标签匹配

您应该为每个标签添加一个类。或者，您可以为错误标签编写特定样式，例如：

```
#stylized label {
display: block;
font-weight: bold;
text-align: left;
width: 140px;
float: left;
clear: both;
}

#stylized label.error {  
color: red; 
padding-left: 140px; 
vertical-align: top;
float: left; 
} 
```

这可能会整理一些东西。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-26T10:57:17.120

[小狗胡子](https://stackoverflow.com/users/343067/puppybeard)有帖子的解决方案是合适的。

虽然如果您希望/需要您的验证显示在右侧，那么您可能需要稍微编辑您的代码。

float 在 IE 浏览器中产生一些问题。仅当您想要极左或极右位置时才使用它。您可以使用..

```
display:inline-block; 
```

利用，

```
*display:inline-block; (for ie-7/8) 
```

# java - catch 语句的顺序？

> ID：11667238
> 
> 赞同：10
> 
> 时间：2012-07-26T10:20:07.297
> 
> 标签：java, exception, exception-handling, try-catch

在`try`-语法中，catch 语句的写入`catch`顺序是否重要？`FileNotFoundException``IOExceptipon`

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-26T10:21:19.010

是的，应该先写具体的例外，然后再写更广泛的，

就像你先把房间里的所有动物都叫出来，然后再试着看看外面是否有人

**例如**

```
try{
  //do something
}catch(Exception ex){

}catch(NullPointerException npe){

} 
```

会给你编译时错误

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-07-26T10:20:48.437

是的。FileNotFoundException 继承自 IOException。必须首先捕获异常的子类。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-07-26T10:27:19.577

必须在一般异常之前捕获特定异常，否则您将收到无法访问的代码错误。例如 -

```
try{
  //do something
}catch(NullPointerException npe){

}catch(NumberFormatException nfe){

}catch(Exception exp){

} 
```

如果将`Exception`catch 块放在`NullPointerException`or `NumberFormatException`catch 块之前，则会出现编译时错误。（无法访问的代码）。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-26T10:23:39.683

在切线上，我建议您三思而后行，是否首先需要所有这些 catch 块。您确定要为每个案例提供不同的有意义的处理吗？如果你只是要打印一条消息，你只能赶上`IOException`去做。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-26T10:22:00.340

好吧...从子类开始到超类...这是理想的方式..否则您将收到**无法访问的代码错误**

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-26T10:24:23.530

是的当然。更具体的异常应该写在第一个 catch 块中，一般的异常`catch(Exception ex){ex.printStackTrace();}`应该写在最后一组 catch 块中。

**如果您尝试其他方式，那么 JVM 编译器将无法访问您的特定异常！**

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-07-26T10:24:47.783

`IOException`是 的超类`FileNotFoundException`。因此，如果您将**catch**语句放在 for`IOException`之上`FileNotFoundException`，那么第二个 catch 的代码将变得无法访问，编译器将`error`为此抛出一个。原因很简单：`every object of a sub class can be easily accepted by a super class reference`。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2015-04-09T10:44:03.267

**IOException 是 FileNotFoundException 的超类。所以首先捕获子类即 FileNotFoundException 然后你需要捕获 IOException**

*例如，*

```
try{
      // something
   } catch(FileNotFoundException fne){
      // Handle the exception here
   } catch(IOException ioe) {
      // Handle the IOException here
   } 
```

# iphone - 如何使用 AVAudioRecorder 暂停和恢复录音

> ID：11667241
> 
> 赞同：4
> 
> 时间：2012-07-26T10:20:11.820
> 
> 标签：iphone, objective-c, avaudiorecorder, recording

我需要暂停然后恢复录音，我正在使用 AVAudioRecorder 进行录音……有人知道该怎么做吗？任何帮助将不胜感激！非常感谢和平马西

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-26T10:35:12.167

在初始化和创建一个对象之后`AVAudioRecorder`，比如说`AVAudioRecorder *recorder`，简单地调用`[recorder record]`记录和`[recorder pause]`暂停。

如果您在单独的方法中调用记录和暂停，例如单击不同的按钮，那么您需要创建`recorder`一个类级别的变量。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-26T10:25:55.790

要暂停录制，请在 上使用以下方法`AVAudioRecorder`：

```
- (void)pause 
```

并恢复，使用：

```
- (BOOL)record 
```

这一切都[在](https://developer.apple.com/library/mac/#documentation/AVFoundation/Reference/AVAudioRecorder_ClassReference/Reference/Reference.html)文档中......

# testing - 使用 Capybara 测试逐步增强的功能

> ID：11667243
> 
> 赞同：1
> 
> 时间：2012-07-26T10:20:27.873
> 
> 标签：testing, cucumber, capybara, progressive-enhancement

我正在使用 Capybara 来测试逐渐增强的网站上的功能。假设我的功能是在位置层次结构中导航。当我们点击不同的位置时，非 JavaScript 版本涉及获取页面的新版本。增强的 javascript 版本打开隐藏元素，或通过 Ajax 加载新信息。

我首先为非 javascript 版本编写一个测试，它看起来像这样：

```
When I visit the page for "UK"
And I click "London"
Then I should see the information for "London" 
```

使用默认的机械化驱动程序，测试失败，我开发了功能，然后测试通过了。

然后我为 javascript 版本创建了一个相同的测试，用@javascript 标记。它使用 javascript 驱动程序运行测试，并且该测试通过，因为该功能已实现。（它通过非 js 流程运行）。但是，我希望 javascript 版本的测试在这一点上失败，因为该功能尚未使用 Javascript 增强。

所以我正在寻找一个好的策略来确定一个全新的页面是否来自服务器，并确保该功能的两个版本都有效。（我计划将此与 pushState 集成，因此不会对更改的 URL 进行测试）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T13:40:38.373

我很想听听其他人对此的看法 - 我不相信 Cucumber 是适合这项工作的工具，因为您是从用户交互的角度描述功能，听起来您对渐进增强的实施将导致在基本相同的用户交互中。

除此之外，我认为您可能需要考虑在页面本身上构建某种测试挂钩来帮助解决这个问题。在不知道您的确切情况的情况下很难说什么，但可能是以下之一：

*   页面的脚本增强版本可以向 DOM 添加一些元素，表明增强功能处于活动状态，或者表明数据来自 AJAX 请求而不是页面加载。
*   您可以在每次加载时（例如新的 GUID）生成一个随机页面标识符（来自服务器），将其嵌入到 DOM 中并断言它在交互后没有更改（在增强版本上）。这将是实现您既定目标的一种非常简单的方法（“确定一个全新的页面是否来自服务器”）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T17:07:41.360

为什么您的 javascript“增强”版本与非增强版本的工作方式相同？您使用 @javascript 进行的黄瓜测试应该进行测试以确保增强功能有效。

例如，* 如果 javascript 打开一个模态对话框而不是跟随一个指向新页面的链接，请对此进行测试。* 如果 javascript 提交了一个表单并更新了一个值，那么测试一下。

如果在没有 javascript 支持的情况下运行这些测试将失败。

# javascript - 单个功能的多个元素

> ID：11667247
> 
> 赞同：0
> 
> 时间：2012-07-26T10:20:34.860
> 
> 标签：javascript, jquery, ajax

我有多个产品图像，它们共享相同的“基”类（`.billede_wrapper1`, `.billede_wrapper2`）和一个 JQuery 函数。

我如何`.retslet5`只显示，什么时候`.billede_wrapper.5`有鼠标悬停？

这是代码的当前状态，以及示例： [jsfiddle](http://jsfiddle.net/6C6Mu/23/)

在示例中，两个产品都具有相同的类 ( `.billede_wrapper`, `.retslet`)，它们在真实页面上将是 ( `.billede_wrapper1`, . `retslet1`, `.billede_wrapper2`, `.retslet2`) 等等。

代表产品数据库 ID 的数字。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-26T10:32:36.760

通过使用找到子 .retslet`$(this).find('.retslet')`

```
$(document).ready(function(){
    $('.retslet').hide();

    $('.billede_wrap').mouseenter(function(){
        $(this).find('.retslet').slideDown("fast");
    });

    $('.billede_wrap').mouseleave(function(){
        $(this).find('.retslet').slideUp("fast");
    });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T10:35:08.567

您可以使用`hover`：

```
$(document).ready(function(){
    $('.retslet').hide();

    $('.billede_wrap').hover(function(){
        $(this).find('.retslet').slideDown("fast");
    }, function() {
        $(this).find('.retslet').slideUp("fast");
    });

}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-26T10:35:57.067

你应该寻找 div 像这样在元素的子元素中向上滑动

```
$('.billede_wrap').mouseenter(function(){
    $(this).children('.retslet').slideDown("fast");
}); 
```

[http://jsfiddle.net/6C6Mu/28/](http://jsfiddle.net/6C6Mu/28/)

# jquery - jQuery更改每个元素的功能

> ID：11667255
> 
> 赞同：2
> 
> 时间：2012-07-26T10:20:57.937
> 
> 标签：jquery, css, image, each

我试图用一个portfolio.Img类来查找每个图像的高度，然后将它应用到一个类为.Img的兄弟div上`.overlay`。如果该高度小于 500，则不显示具有 page_categories 的 id 和`.entry`.

这有效，但仅适用于一个图像，而不是页面上的所有图像：

```
<script>
  $(document).ready(function () {   
  $('img.portfolioImg').load(function() {
    var imgHeight = $('img.portfolioImg').height();
    $('.overlay').css('height', imgHeight - 40 + 'px');
    if ( $('.overlay').height() < 500 ) {
      $('#page_categories').css('display', 'none');
      $('.entry').css('display', 'none');
    }else{
    // do nothing
    }
  });
});
</script>
<div class="ct-coll-item col2 masonry-brick">
  <article>
    <img class="portfolioImg" src="_/img/13.png" />
    <div class="overlay">
      <div id="page_categories">
        <a href="#">Publication</a>, <a href="#">Typeface</a>
      </div>
      <h2><a href="#">Adam Howe Styles Men of Alaska for Port Magazine</a></h2>
      <div class="entry">
        <p>An experimental typographic project by Riccardo Sabatini, which is a typeface inspired by old mechanics technical drawings, the steampunk visual world, and modern machinery.</p>
      </div>
      <footer class="postmetadata">
        <time>July 23rd, 2012</time> / <a href="#">1 Comment</a>
      </footer>
    </div>
  </article>
</div> 
```

这`div.ct-coll-item`重复了很多次，我不知道如何申请`.each()`使其适用于所有图像和兄弟姐妹/孩子。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T10:24:21.470

可能你想要这个：

```
$('img.portfolioImg').bind('load',function() {
    var imgHeight = $(this).height();
    var $overlay = $(this).siblings('.overlay');
    $overlay.css('height', imgHeight - 40 + 'px');
    if ( $overlay.height() < 500 ) {
        $('#page_categories',$overlay).css('display', 'none');
        //                    ^---------- selector context
        $('.entry',$overlay).css('display', 'none');
        //            ^---------- selector context
    }else{
    // do nothing
    }
}); 
```

[[`.load()`已弃用](http://api.jquery.com/category/deprecated/)]

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-26T10:25:42.667

我觉得你应该改变

```
$('img.portfolioImg').load(function() {
var imgHeight = $('img.portfolioImg').height(); 
```

至

```
$('img.portfolioImg').each(function(image) {
var imgHeight = $(this).height(); 
```

因为`$('img.portfolioImg').height();`给你第一个元素的高度

# grails - 在 grails 中使用 JQGrid 重定向 rowSelection

> ID：11667256
> 
> 赞同：0
> 
> 时间：2012-07-26T10:20:59.357
> 
> 标签：grails, redirect, jqgrid, grails-plugin, grails-2.0

我在具有 Grails 2.0.3 版本的 Grails 项目上使用插件 JQGrid 3.8.0.1。

我有这个`<jqgrid:grid>`有一个属性`onSelectRow`。我打算将我的重定向结构从表单结构转换为窗口结构。进行这种转换的原因是并非所有`.gsp`具有 JQGrid 组件的文件都`<form>`在该`<body>`区域中具有组件。

由此：

```
<jq:resources/>
<jqui:resources/>
<jqgrid:resources/>
<jqgrid:grid
// other main attributes (i.e., url, colNames, colModel, etc.)
onSelectRow="function(id) {
    document.<formname>.action = 'view/' + id;
    document.<formname>.submit();
}"></jqgrid:grid>

// html body content of form
<form name="<formname>">
</form> 
```

对此：

```
<jq:resources/>
<jqui:resources/>
<jqgrid:resources/>
<jqgrid:grid
// other main attributes (i.e., url, colNames, colModel, etc.)
onSelectRow ="function(id) {
    window.location.href = ${createLink(action:'show', id:id)};
}"></jqgrid:grid> 
```

> , `jq`,标签是 grails 命令安装在项目上的`jqui`插件`jqgrid``grails> install-plugin jquery jquery-ui jqgrid`

问题是新脚本不起作用。检查新的 html 源代码后返回`onSelectRow`属性的值`window.location.href = /<Project Name>/<Controller>/show;`。问题是如何让 JQGrid 在新脚本上正常运行。

> 注意：我目前正在使用 Grails 的脚手架功能或`generate-all *`命令

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T05:07:53.613

```
onSelectRow: function(id,status)
{
     //var rowData = jQuery(this).getRowData(id); 
} 
```

尝试替换`'='`并`':'`尝试。

# silverlight - Silverlight - 公开子模板依赖属性

> ID：11667259
> 
> 赞同：1
> 
> 时间：2012-07-26T10:21:18.717
> 
> 标签：silverlight, dependency-properties, controltemplate

我创建了一个自定义的 silverlight 模板控件，它包含两个部分，一个 ContentControl 和一个 ItemsControl。我已经成功地在自定义模板控件中创建了一个与它们一起使用的模板，但我想将部件的内部模板公开给 Blend，以便可以编辑它们，并使用默认值公开。

我尝试了以下代码的各种变体，试图让它工作，但没有成功。

```
 [TemplatePart(Name = ExpanderTemplateControl2.PartName_FullViewItem, Type = typeof(ExpanderFullViewItem))]
[TemplatePart(Name = ExpanderTemplateControl2.PartName_ItemsControl, Type = typeof(ItemsControl))]
public class ExpanderTemplateControl2 : Control
{
    public const string PartName_FullViewItem = "PART_FullViewItem";
    public const string PartName_ItemsControl = "PART_ItemsControl";

    #region Parts

    private ContentControl part_FullViewItem;
    private ItemsControl part_ItemsControl;

    #endregion

    static ExpanderTemplateControl2()
    {
        //DefaultStyleKeyProperty.OverrideMetadata(typeof(CustomListControl), new FrameworkPropertyMetadata(typeof(CustomListControl)));

        //Add Ownership of dependency property
        ItemTemplateProperty = ItemsControl.ItemTemplateProperty;//.AddOwner(typeof(ExpanderTemplateControl2));
        ItemsPanelProperty = ItemsControl.ItemsPanelProperty;//.AddOwner(typeof(ExpanderTemplateControl2));
        FullViewTemplateProperty = ContentControl.TemplateProperty;//.AddOwner(typeof(ExpanderTemplateControl2));
    }

    public ExpanderTemplateControl2()
    {
        this.DefaultStyleKey = typeof(ExpanderTemplateControl2);
    }

    #region Dependency Properties

    public static readonly DependencyProperty ItemTemplateProperty;
        //= DependencyProperty.Register("ItemTemplate", typeof(DataTemplate), typeof(ExpanderTemplateControl2), new PropertyMetadata(null));

    public static readonly DependencyProperty ItemsPanelProperty;
        //= DependencyProperty.Register("ItemsPanel", typeof(ItemsPanelTemplate), typeof(ExpanderTemplateControl2), new PropertyMetadata(null));

    public static readonly DependencyProperty FullViewTemplateProperty;
        //= DependencyProperty.Register("FullViewItemTemplate", typeof(ControlTemplate), typeof(ExpanderTemplateControl2), new PropertyMetadata(null));

    #endregion

    #region Properties

    [BindableAttribute(false)]
    public DataTemplate ItemTemplate
    {
        get { return (DataTemplate)GetValue(ItemTemplateProperty); }
        set { SetValue(ItemTemplateProperty, value); }
    }

    [BindableAttribute(false)]
    public ItemsPanelTemplate ItemsPanel 
    {
        get { return (ItemsPanelTemplate)GetValue(ItemsPanelProperty); }
        set { SetValue(ItemsPanelProperty, value); }
    }

    [BindableAttribute(false)]
    public ControlTemplate FullViewTemplate
    {
        get { return (ControlTemplate)GetValue(FullViewTemplateProperty); }
        set { SetValue(FullViewTemplateProperty, value); }
    }

    #endregion
} 
```

谁能给我一些指示？

干杯

特里斯坦

更新：通过执行以下操作，我设法使其处于某种工作状态，但我对此并不满意。有没有更好的办法？

```
 #region Dependency Properties

    public static readonly DependencyProperty ItemTemplateProperty
            = DependencyProperty.Register("ItemTemplate", typeof(DataTemplate), typeof(ExpanderTemplateControl2), new PropertyMetadata(null));

    public static readonly DependencyProperty ItemsPanelProperty
            = DependencyProperty.Register("ItemsPanel", typeof(ItemsPanelTemplate), typeof(ExpanderTemplateControl2), new PropertyMetadata(null));

    public static readonly DependencyProperty FullViewTemplateProperty
            = DependencyProperty.Register("FullViewTemplate", typeof(ControlTemplate), typeof(ExpanderTemplateControl2), new PropertyMetadata(null));

    #endregion

    #region Properties

    [BindableAttribute(false)]
    public DataTemplate ItemTemplate
    {
        get 
        {
            var result = (DataTemplate)GetValue(ItemTemplateProperty);

            if (result == null)
            {
                SetValue(ItemTemplateProperty, part_ItemsControl.ItemTemplate);
                result = part_ItemsControl.ItemTemplate;
            }

            return result; 
        }
        set 
        {
            part_ItemsControl.ItemTemplate = value;
            SetValue(ItemTemplateProperty, value);
        }
    }

    [BindableAttribute(false)]
    public ItemsPanelTemplate ItemsPanel
    {
        get 
        { 
            var result = (ItemsPanelTemplate)GetValue(ItemsPanelProperty);

            if (result == null)
            {
                SetValue(ItemsPanelProperty, part_ItemsControl.ItemsPanel);
                result = part_ItemsControl.ItemsPanel;
            }

            return result; 
        }
        set 
        {
            part_ItemsControl.ItemsPanel = value;
            SetValue(ItemsPanelProperty, value);
        }
    }

    [BindableAttribute(false)]
    public ControlTemplate FullViewTemplate
    {
        get 
        {
            var result = (ControlTemplate)GetValue(FullViewTemplateProperty);

            if (result == null)
            {
                SetValue(FullViewTemplateProperty, part_FullViewItem.Template);
                result = part_FullViewItem.Template;
            }

            return result; 
        }
        set 
        {
            part_FullViewItem.Template = value;
            SetValue(FullViewTemplateProperty, value); 
        }
    }

    #endregion 
```

# sql - 禁用通过 Windows 身份验证访问数据库，并禁用 SQL Management Studio

> ID：11667261
> 
> 赞同：0
> 
> 时间：2012-07-26T10:21:21.477
> 
> 标签：sql, sql-server, sql-server-2008

我正在为客户部署我的应用程序（包括数据库）。

我需要的是安装 SQL Server 2008（没有 SQL Management Studio），这样只有我可以使用我的笔记本电脑访问数据库。

如何实现？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T10:41:45.673

查看[此链接](http://blog.sqlauthority.com/2008/06/12/sql-server-2008-step-by-step-installation-guide-with-images/)提供了有关如何安装 MSSQL Server 2008 的步骤的完整教程。在显示此图像的步骤中，只需取消选中该复选框：

> 管理工具 - 基本

![这个图片](../Images/d16da7954b81768c3678551069dea9d5.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T10:36:16.353

取消单击 SQL Server 安装程序中的管理工具复选框。

这不会阻止他们通过 Windows 身份验证访问数据库，也不会阻止他们以后安装 Management Studio。

# wpf - Datagrid 列标题模板

> ID：11667262
> 
> 赞同：0
> 
> 时间：2012-07-26T10:21:24.270
> 
> 标签：wpf, datagrid

我想以一种非常简单的方式对一些标题列进行模板化，但我没有得到我正在寻找的结果。我希望边框填充整个标题，而不仅仅是里面的文本框。现在我仍然在我自己的控件后面拥有默认的灰色。

```
<DataGrid x:Name="grdItems"
    Grid.Row="0"
    CanUserAddRows="False"
    CanUserDeleteRows="False"
    ItemsSource="{Binding Path=Items}"
    CanUserSortColumns="False" AutoGenerateColumns="False" CanUserResizeColumns="False">
<DataGrid.Columns>
<DataGridComboBoxColumn ItemsSource="{Binding Source={StaticResource GetSignalTypeValues}}" Width="auto" SelectedValueBinding="{Binding SignalType}" >
    <DataGridComboBoxColumn.HeaderTemplate>
        <DataTemplate>
            <Border Background="Orange" >
                <TextBlock Text="Signal Type" />
            </Border>
        </DataTemplate>
    </DataGridComboBoxColumn.HeaderTemplate>
</DataGridComboBoxColumn>

<DataGridTextColumn Width="auto" Binding="{Binding AmplitudeMax}">
    <DataGridTextColumn.HeaderTemplate>
        <DataTemplate>
            <Border Background="Violet">
                <StackPanel>
                    <TextBlock Text="Amplitude" HorizontalAlignment="Center" />
                    <TextBlock Text="-maximum-" HorizontalAlignment="Center" />
                </StackPanel>
            </Border>
        </DataTemplate>
    </DataGridTextColumn.HeaderTemplate>
</DataGridTextColumn> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T10:38:11.860

如果您只是在列标题的背景颜色之后，您可以使用它：

```
<DataGridComboBoxColumn  Width="auto" SelectedValueBinding="{Binding SignalType}" >
    <DataGridComboBoxColumn.HeaderStyle>
        <Style TargetType="DataGridColumnHeader">
            <Setter Property="Background" Value="Orange"/>
        </Style>
    </DataGridComboBoxColumn.HeaderStyle> 
```

# php - PHP 邮件问题 - 不会发送电子邮件

> ID：11667263
> 
> 赞同：0
> 
> 时间：2012-07-26T10:21:26.407
> 
> 标签：php, email

我目前正在处理一个简单的表单，我希望通过 php 脚本收集信息，然后作为邮件发送给我，但我没有收到具体的电子邮件。

任何人都可以提供任何指示或突出问题吗？谢谢你

这是我的表单的代码：

```
<form name="bookingForm" method="post" action="send_dates.php">
<table border="0" cellspacing="1" cellpadding="2">

<tr>
    <td>Booking From</td>
        <td>:</td>
    <td><input name="fromDate" id="fromDate" size="20"></td>

    <td>To</td>
    <td>:</td>
    <td><input name="toDate" id="toDate" size="20"></td>
</tr>

<tr>
    <td>Name</td>
    <td>:</td>
    <td><input name="name" type="text" id="name" size="30"></td>
</tr>

<tr>
    <td width="20px">Telephone</td>
    <td>:</td>
    <td><input name="telephone" type="text" id="customer_telephone" size="30"></td>
</tr>

<tr>
    <td width="20px">Email</td>
    <td>:</td>
    <td><input name="customer_mail" type="text" id="customer_mail" size="30"></td>
</tr>

<tr>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td><input type="submit" name="submit" value="Submit"> <input type="reset" name="ResetForm" value="Reset"></td>
</tr>
</table>
</form> 
```

这是我的 php 脚本：

```
<?php 

 $name = $_POST['name'];
 $fromDate = $_POST['fromDate'];
 $toDate = $_POST['toDate');
 $email = $_POST['customer_email'];
 $telephone = $_POST['customer_telephone'];

// Mail of reciever
$to = "blablabla@blabla.com";

// Contact subject
$subject ="Reservation Enquiry from $name";

// Details
$message="From: $name
Email: $email
Telephone: $customer_telephone
--------------------------------------------------------------
Reservation date from: $fromDate to: $toDate ";

// Mail of sender
$mail_from="$customer_mail";

// From

$res=mail($to,$subject,$message);
    if($res)
{
    header('Location:index.php');
}

    ?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T10:26:53.863

缺少分号

```
$to = "blablabla@blabla.com"; 
```

更新：

删除 `if(!empty($data))`循环

检查`$res = mail(...);`

然后放

```
if($res)
         {
            echo '<script type="text/javascript">
                     window.location = "index.php";
                  </script>';
         }
         else
         {
             echo 'something wrong';
         } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-26T10:29:01.207

可能的原因是错误的 SMTP 服务器地址。

停止网络服务器，更正 PHP.INI 中的 SMTP 服务器地址，重新启动网络服务器。

`<?php phpinfo(); ?>`您可以通过执行和搜索 SMTP来检查当前配置。

# c++ - 在调整大小时移动对话框上的按钮

> ID：11667264
> 
> 赞同：1
> 
> 时间：2012-07-26T10:21:28.437
> 
> 标签：c++, winapi, dialog, move

我在 c++ windows 应用程序（使用 ATL lib）中创建了一个对话框，并在其上设置了三个按钮。该按钮像往常一样位于对话框的底部。我想通过调整对话框的大小，将按钮保留在其底部的位置。换句话说，它们应该与对话框的底部边缘和左侧（右侧或左侧）保持恒定（低）距离。为了实现这一点，我尝试在更改对话框大小时相应地移动按钮。我使用以下代码（仅作为 OK 按钮的示例），但唯一的结果是按钮在调整大小期间消失。我应该如何修改代码以使按钮保持与对话框底部和右侧的距离？

```
LRESULT RenameFolderDlg::OnSize(UINT uMsg, WPARAM wParam, LPARAM lParam, BOOL& bHandled)
{
RECT r;
GetWindowRect(&r);

CWindow okB(GetDlgItem(IDOK));
RECT okR;
okB.GetWindowRect(&okR);

okB.MoveWindow( r.right - 80 , r.bottom - 40, okR.right - okR.left, okR.bottom -     okR.top, 1);

return 0;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-26T12:40:50.927

我用的是winapi。我使用[GetWindowRect](http://msdn.microsoft.com/en-us/library/windows/desktop/ms633519%28v=vs.85%29.aspx)来获取控制坐标，然后使用[MapWindowPoints](http://msdn.microsoft.com/en-us/library/windows/desktop/dd145046%28v=vs.85%29.aspx)将这些直角坐标映射到屏幕上。然后使用[SetWindowPos](http://msdn.microsoft.com/en-us/library/windows/desktop/ms633545%28v=vs.85%29.aspx)根据映射的直角坐标定位窗口。

在 Google 上，我找到[了 ATL 的 MapWindowPoints](http://msdn.microsoft.com/en-us/library/ftsk6k6b%28v=vs.80%29.aspx)。我认为您在代码中使用的是 mapwindowpoints。尝试使用它。

希望它工作....

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-26T11:40:55.073

代替

```
GetWindowRect(&r); 
```

你应该使用

```
GetClientRect(&r); 
```

因为返回的坐标`GetWindowRect`是相对于屏幕左上角的，而`MoveWindow`调用子控件则期望它们相对于父窗口客户区的左上角。

# iphone - 将子视图添加到具有附加子视图的滚动视图

> ID：11667273
> 
> 赞同：0
> 
> 时间：2012-07-26T10:22:10.480
> 
> 标签：iphone, ios, uiscrollview, frame, subview

我正在根据 for 循环中数组元素的数量将子视图添加到我的滚动视图中。容器视图内部还有一个额外的子视图。问题是只有第一个容器视图包含添加的子视图，而新的容器视图不包含第三个一个也有。我检查了子视图的框架，但似乎仍然不起作用。

```
CGFloat contentOffset = 0.0f;
//add tej views one by one to scrollview

for (NSString *packageType in packageTypesArray) 
{

    CGRect lvPackageContainerFrame = CGRectMake(contentOffset, 0.0f,scrollView.frame.size.width,scrollView.frame.size.height);

    LVPackageContainer *lvPackageContainer = [[LVPackageContainer alloc] initWithFrame:lvPackageContainerFrame];

    NSLog(@"Frame %@",NSStringFromCGRect(lvPackageContainerFrame));
    lvPackageContainer.packageType = packageType;
    [packageContainersArray addObject:lvPackageContainer];

     UIImageView *backgroundImage = [[UIImageView alloc] initWithFrame:CGRectMake(0, 0, 264, 314)];
     NSLog(@"BackgroundImage %@",backgroundImage);
     backgroundImage.backgroundColor = [UIColor redColor];
     [backgroundImage setImage:[UIImage imageNamed:@"shadowBackground.png"]];
     backgroundImage.center = lvPackageContainer.center;
     [lvPackageContainer addSubview:backgroundImage];

    [scrollView addSubview:lvPackageContainer];

    contentOffset += lvPackageContainerFrame.size.width;
    scrollView.contentSize = CGSizeMake(contentOffset, scrollView.frame.size.height);

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T10:58:49.977

```
backgroundImage.center = CCGPointMake(lvPackageContainerFrame.size.width/2, lvPackageContainerFrame.size.height/2); 
```

如果添加子视图，则坐标系从其父视图开始

在您的情况下，当您为第二个视图设置中心时，它将变成 {480,240} （假设该视图在 iphone 中是全屏）因此，您可以看到的第三个子视图实际上是第 2 页的子视图。

更新：当您获得视图的中心时，它实际上是根据帧值计算的：

```
center.x = (frame.origin.x + frame.size.width) / 2;
center.y = (frame.origin.y + frame.size.height) / 2; 
```

Therefore assume your second view is with `CGRectMake(320, 0, 320, 480)`, the center of it will be

```
center.x = (320 + 320) / 2;
center.y = (0 + 480) / 2; 
```

So your subview will be center at `{480,240}` of the second view.

If you convert it relative to the scrollview, the subview will be at `{(320+480),(0+240)}`, which you will see it is on the 3rd view, not the 2nd one

# scorm - 全球目标

> ID：11667280
> 
> 赞同：1
> 
> 时间：2012-07-26T10:22:28.500
> 
> 标签：scorm, scorm2004

假设我们有两个内容包，CP_A 的objectiveGlobalToSystem = true 和CP_B 的objectiveGlobalToSystem = false。CP_A 创建一个 id 为 g-obj 的全局目标，CP_B 也创建一个 id 为 g-obj 的全局目标。我有两个问题？

1.  这两个全球目标是否相同？
2.  如果 CP_C 想读取 g-obj 的状态，在这种情况下应该读取哪个全局目标？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T17:10:57.787

> 1.  这两个全球目标是否相同？

不，他们不是。CP_B 的 g-obj 仅对 CP_B 是全局的，不能从外部访问。CP_A 的 g-obj 对除 CP_B 之外的所有课程都是全局的，前提是其他课程的 objectsGlobalToSystem 设置为 true，这是默认值。

> 1.  如果 CP_C 想读取 g-obj 的状态，在这种情况下应该读取哪个全局目标？

它仅读取存储在 CP_A 的 g-obj 中的值。

# crystal-reports - Crystal Reports 在客户端系统中询问密码

> ID：11667281
> 
> 赞同：1
> 
> 时间：2012-07-26T10:22:30.800
> 
> 标签：crystal-reports

这是登录信息方法

```
private void SetLogonInfo()
    {
        try
        {
            LogInfo.ConnectionInfo.ServerName = "ServerName";
            LogInfo.ConnectionInfo.UserID = "UserID";
            LogInfo.ConnectionInfo.Password = "Password";
            LogInfo.ConnectionInfo.DatabaseName = "DataBase";
        }

        catch (Exception ex)
        {
            MessageBox.Show(ex.Message);
        }

    } 
```

要创建报告，我使用了此代码

```
 crystalReportViewer1.ReportSource = null;
            rptdoc = new ReportDocument();
            rptdoc.Load("REPORTS\\TC.rpt");
            crystalReportViewer1.SelectionFormula =selectionFormula;
            crystalReportViewer1.ReportSource = rptdoc;
            rptdoc.Database.Tables[0].ApplyLogOnInfo(LogInfo); 
```

它在服务器系统中运行良好，但如果我在客户端系统中使用它，它会要求输入用户名和密码。我正在使用 Crystal Reports 10。此外，有时它还会在服务器系统中询问用户名密码。如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T14:27:45.227

你做事的顺序不对。在将报告加载到查看器之前，您需要以编程方式登录。

此外，我不能强调您需要在服务器机器和测试客户端机器上测试您的程序，然后再将其发布给用户。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-01-20T17:16:11.943

此错误的原因是用户名、密码错误。
检查用户名、密码并使用以下代码：

```
ReportDocument cryRpt = new ReportDocument();
TableLogOnInfos crtableLogoninfos = new TableLogOnInfos();
TableLogOnInfo crtableLogoninfo = new TableLogOnInfo();
ConnectionInfo crConnectionInfo = new ConnectionInfo();
Tables CrTables;

//This is for Access Database
crConnectionInfo.ServerName = "" + "" +Application.StartupPath + "\\Database.mdb"; //access Db Path
crConnectionInfo.DatabaseName = "" + "" + Application.StartupPath + "\\Database.mdb";//access Db Path
crConnectionInfo.UserID = "ADMIN";
crConnectionInfo.Password = Program.DBPassword; //access password

//This is for Sql Server
crConnectionInfo.UserID = Program.Severuser; //username
crConnectionInfo.Password = Program.Password;//password
crConnectionInfo.ServerName = Program.server;//servername
crConnectionInfo.DatabaseName = Program.database;//database

string path = "" + Application.StartupPath + "\\supportingfiles\\Invoice.rpt";
cryRpt.Load(path);
CrTables = cryRpt.Database.Tables;
foreach (CrystalDecisions.CrystalReports.Engine.Table CrTable in CrTables)
{
   crtableLogoninfo = CrTable.LogOnInfo;
   crtableLogoninfo.ConnectionInfo = crConnectionInfo;
   CrTable.ApplyLogOnInfo(crtableLogoninfo);
}

cryRpt.SetParameterValue("invoiceno", Program.billno);

crystalReportViewer1.ReportSource = cryRpt;
crystalReportViewer1.Refresh(); 
```

# android - TabHost.setCurrentTab(index) 第一次工作

> ID：11667284
> 
> 赞同：0
> 
> 时间：2012-07-26T10:22:35.407
> 
> 标签：android

我创建了具有两个选项卡和两个活动的 TabActivity。一个是登录选项卡，另一个是欢迎选项卡。

除非成功登录，否则用户不应进入欢迎选项卡。如果他尝试选择欢迎选项卡，他会抛出登录选项卡。我使用 tabHost.setcurrenttab(index)。

但是，当我单击直接欢迎选项卡时，它第一次可以正常工作。当我再次快速单击选项卡时，它会打开欢迎选项卡。

这是我的代码：

```
public void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);
            setContentView(R.layout.product_list);
            SharedPreferences mPreference = PreferenceManager.getDefaultSharedPreferences(getApplicationContext());
            username = mPreference.getBoolean("valid", false);
            Toast.makeText(this, "In Create", Toast.LENGTH_SHORT).show();
           //login sucessful            
           tabActivity.switchTab(0);
     } 
```

在 onResume 上，我重复相同的代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T10:33:38.710

在你的 TabActivity 中试试这个。这是为了防止用户在未登录的情况下切换标签。（我现在没有时间检查它，如果代码有任何问题，请告诉我）：

```
SharedPreferences mPreference;
....onCreate(){

    ...

    mPreference = PreferenceManager.getDefaultSharedPreferences(getApplicationContext());
    tabHost.setOnTabChangedListener(new OnTabChangeListener() {

    @Override
    public void onTabChanged(String arg0) {

                username = mPreference.getBoolean("valid", false);
                if(user is logged in){
                     tabHost.setcurrenttab(0);//welcome page
                }
                else{
                     tabHost.setcurrenttab(1);//login page
                }
        }
    });
    ...
} 
```

# android - Admob 中介中的自定义事件添加不受支持的广告网络

> ID：11667285
> 
> 赞同：3
> 
> 时间：2012-07-26T10:22:37.433
> 
> 标签：android, admob

我已经阅读了有关如何在 Admob 中介中实现自定义事件的所有内容。我添加了完整的打包类名，一切都在 Admob 门户中设置。

这是完成的类实现

```
 public class CustomEvent implements CustomEventBanner, AdListener{

private CustomEventBannerListener bannerListener;
private AdView adView;

@Override
public void requestBannerAd(final CustomEventBannerListener listener,
        final Activity activity,
        String label,
        String serverParameter,
        AdSize adSize,
        MediationAdRequest mediationAdRequest) {
    // Keep the custom event listener for use later.
    this.bannerListener = listener;

    // Determine the best ad format to use given the adSize. If the adSize
    // isn't appropriate for any format, an ad will not fill.
    AdSize bestAdSize = adSize = adSize.findBestSize(
            AdSize.BANNER,
            AdSize.IAB_BANNER,
            AdSize.IAB_LEADERBOARD,
            AdSize.IAB_MRECT,
            AdSize.IAB_WIDE_SKYSCRAPER);
    if (bestAdSize == null) {
        listener.onFailedToReceiveAd();
        return;
    }

    // Initialize an AdView with the bestAdSize and the publisher ID.
    // The publisher ID is the server parameter that you gave when creating
    // the custom event.
    this.adView = new AdView(activity, bestAdSize, serverParameter);

    // Set the listener to register for events.
    this.adView.setAdListener(this);
    // Generate an ad request using custom targeting values provided in the
    // MediationAdRequest.
    AdRequest adRequest = new AdRequest()
    .setBirthday(mediationAdRequest.getBirthday())
    .setGender(mediationAdRequest.getGender())
    .setKeywords(mediationAdRequest.getKeywords())
    .setLocation(mediationAdRequest.getLocation());
    if (mediationAdRequest.isTesting()) {
        adRequest.addTestDevice(AdRequest.TEST_EMULATOR);
    }

    // Load the ad with the ad request.
    this.adView.loadAd(adRequest);
}

@Override
public void onReceiveAd(Ad ad) {
    this.bannerListener.onReceivedAd(this.adView);
}

@Override
public void onFailedToReceiveAd(Ad ad, ErrorCode errorCode) {
    this.bannerListener.onFailedToReceiveAd();
}

@Override
public void onPresentScreen(Ad ad) {
    this.bannerListener.onClick();
    this.bannerListener.onPresentScreen();
}

@Override
public void onDismissScreen(Ad ad) {
    this.bannerListener.onDismissScreen();
}

@Override
public void onLeaveApplication(Ad ad) {
    this.bannerListener.onLeaveApplication();
}

} 
```

问题是我真的不知道如何在 onReceivedAd() 中添加使用我的 layout.add(adview)，

任何输入都会有所帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-26T21:57:42.940

与普通 AdMob 实施相比，自定义事件略有不同。在`requestBannerAd`您创建广告网络的 adview 并请求广告。一旦收到广告（在此`onReceiveAd`回调中），您调用：

`this.bannerListener.onReceivedAd(this.adView);`

您已经在代码中执行此操作。调用它时，您是在告诉 AdMob 中介层“嘿，我成功加载了一个广告，这是我的视图供您展示。” 中介层接收您的 adview 并基本上`layout.addView(adView)`代表您调用（它将它添加为您在应用程序中定义的主 AdView 的子项）。

所以在你的情况下，这段代码应该可以工作。

# javascript - plupload 添加文件功能

> ID：11667286
> 
> 赞同：1
> 
> 时间：2012-07-26T10:22:40.193
> 
> 标签：javascript, ajax, plupload

我在 textarea 上拖放了一个文件。我在 JavaScript 中有文件对象。所以现在我想调用一个函数将它添加到`pluploadQueue`.

我怎么做？

我认为这将是一个函数，例如： `pluploadQueue.addFile( File )`或者`uploader.addFile( File )`但我在任何地方都找不到它。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T23:31:35.613

在 plupload 中还没有包含的支持，但是您可以通过公开来添加它`addSelectedFiles`。

在 plupload.html5.js 上搜索 addSelectedfiles 的定义位置并将该行替换为：

```
var addSelectedFiles = uploader.addFiles = function(native_files) { 
```

您可以稍后通过调用从您的实例访问它`myinstance.addFiles(...)`

你可以看到我大约 7 个月前在这里提出这个建议：[https](https://github.com/moxiecode/plupload/issues/461)
://github.com/moxiecode/plupload/issues/461 遗憾的是，plupload 开发人员大多是 MIA。

# git - 另一个存储库推送到远程后如何自动更新本地存储库？

> ID：11667287
> 
> 赞同：4
> 
> 时间：2012-07-26T10:22:47.327
> 
> 标签：git, push, auto-update

我在驱动器 E 中有 N+2 个存储库：

1.  Test_central - 中央存储库；
2.  Test_primary1 - 本地存储库；
3.  Test_primaryN - 本地存储库；
4.  Test_slave - 本地存储库。

当 Test_primaryI 将自己的更改推送到 Test_central 时，如何更新 Test_slave？

PS：一个驱动器上的所有存储库仅用于测试

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-26T10:33:45.380

您需要挂钩到`Test_slave`repo 中的可用挂钩之一。看看[这里](http://www.kernel.org/pub/software/scm/git/docs/githooks.html)。这就像编写一个脚本来做你想做的事情一样简单，在`.git/hooks`文件夹中给它正确的名称，然后让它可执行。

为了使事情变得简单易用，`hooks`文件夹中已经提供了示例脚本。只需从文件中删除您要使用的钩子的`.sample`扩展名，然后编辑脚本以满足您的需要。`.sample`

# asp.net - 文本未插入表中，但仅自动递增其他列

> ID：11667293
> 
> 赞同：0
> 
> 时间：2012-07-26T10:23:08.633
> 
> 标签：asp.net

我有多个`textboxes`进入一个名为`dbo.skills`

```
dbo.Skills SkillID (PK- AutoIncrement) | SkillName 
```

因此，当我使用此方法时，名称不会被存储，但只有 SkillID 会自动递增。 **这是我的 .cs 代码**

```
 public void InsertSkillInfo()
    {

        String KKStech = @"Data Source=USER-PC\SQLEXPRESS;Initial Catalog=KKSTech;Integrated Security=True";
        SqlConnection conn = new SqlConnection(KKStech);

        try
        {

            for (int i = 1; i <= 4; i++)
            {
                conn.Open();

                //string skill = (TextBox)((Page.FindControl("TextBox" + i.ToString()))).Text;

                var skill = "";
                var control = Page.FindControl("TextBox" + i.ToString()) as TextBox;
                if (control != null)
                {
                    skill = control.Text;
                }
                const string sqlStatement = "INSERT INTO Skills (SkillName) VALUES (@SkillName)";
                SqlCommand cmd = new SqlCommand(sqlStatement, conn);
                cmd.CommandType = CommandType.Text;
                cmd.Parameters.AddWithValue("@SkillName", skill);
                cmd.ExecuteNonQuery();
                conn.Close();
            }
        }

        catch (System.Data.SqlClient.SqlException ex)
        {
            string msg = "Insert Error:";
            msg += ex.Message;
            throw new Exception(msg);
        } 
```

在文本框中输入值后，表格如下所示 -

```
Dbo.Skills
SkillID | SkillName
1       | 
2       | 
3       | 
4       | 
```

ASP 代码：

```
 <asp:Label ID="Label1" class="caption" runat="server" Text="Skill Name"></asp:Label>
    <asp:TextBox ID="TextBox1" class="box" runat="server"></asp:TextBox> <br /> <br />

    <asp:Label ID="Label2" class="caption" runat="server" Text="Skill Name"></asp:Label>
    <asp:TextBox ID="TextBox2" class="box" runat="server"></asp:TextBox> <br /> <br />

    <asp:Label ID="Label3" class="caption" runat="server" Text="Skill Name"></asp:Label>
    <asp:TextBox ID="TextBox3" class="box" runat="server"></asp:TextBox> <br /> <br />

    <asp:Button ID="Button1" class="box" runat="server" Text="Insert" 
        onclick="Button1_Click" /> <br /><br /><br /> 
```

# apache-flex - Flex DataGrid：仅显示在一列中具有特定值的行

> ID：11667294
> 
> 赞同：1
> 
> 时间：2012-07-26T10:23:12.757
> 
> 标签：apache-flex, actionscript

我有一个 ArrayCollection，它是 DataGrid 的数据提供者。ArrayCollection 可能如下所示：

```
{Name: Bob; LikesIceCream:YES},
{Name: Carl; LikesIceCream:NO},
{Name: Ed; LikesIceCream:NO} 
```

我想要一个复选框，这将使 DataGrid 在选中时显示所有人，或者在未选中时仅显示具有属性 LikesIceCream:NO 的人。我该如何做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T13:30:16.783

您可以使用 ArrayCollection 的 filterFunction 属性。

编写您自己的过滤集合的函数：

> ```
> function myFilterFunction(item: Object): Boolean 
> {
>    var result: Boolean = true;
>    if (!checkBox.selected)  
>    {
>       result = (item.LikesIceCream == "Yes");
>    }
>    return result;
> } 
> ```

设置集合 filterFunction 属性

> 集合.filterFunction = myFilterFunction;

最初和复选框更改后刷新集合

> 集合.刷新（）；

# design-patterns - 访问者模式和遍历机制

> ID：11667295
> 
> 赞同：6
> 
> 时间：2012-07-26T10:23:15.667
> 
> 标签：design-patterns, graph, visitor-pattern

我有一个图形和一组非常简单的访问者，它们对图形的顶点/边进行一些计算，例如获取边的总权重并漂亮地打印图形。

我想更进一步，让访问者以 DFS 方式访问图表。

但是，我认为访问者模式应该与遍历机制分开，并且应该使用迭代器等其他模式来创建遍历方法。我是正确的还是我错过了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-22T10:46:52.093

正如评论所说，访问者并不关心遍历机制本身。这是由迭代器或其他一些具体的遍历方法来决定的工作。

如果您有一个迭代器，那么访问者就不是“不需要的”。这取决于您要应用于您正在迭代的项目的操作的复杂性。

访问者在逻辑上是现有对象的扩展而不改变它们的实现。因此，它的目的是封装这个扩展以供重用和进一步扩展。

如果您有一个迭代器和一个想要应用于所有元素的简单操作，那么就不需要访问者。

# javascript - FB.init 失败，抛出不停的 xd_arbiter.php 错误

> ID：11667308
> 
> 赞同：4
> 
> 时间：2012-07-26T10:24:26.223
> 
> 标签：javascript, facebook, facebook-javascript-sdk

在我调用 FB.init 后，此错误反复发送到我的控制台并且从未停止。

不安全的 JavaScript 尝试从具有 URL [http://static.ak.facebook.com/connect/xd_arbiter.php?version=9#cb的框架访问具有 URL](http://static.ak.facebook.com/connect/xd_arbiter.php?version=9#cb=f2c537d51c&origin=http%3A%2F%2Fdomain.com%2Ff292b6c658&domain=domain.com&relation=parent&frame=f151cd576c&code=2.AQD5022tv7g5YP9h.3600.1343304000.5-809735726%7CRK1BKSccupfslgdlXkXL_5TJgiU&signed_request=RTIhluTQhwrHRBNdI3hPLrzMZ8kh-J3M3_Y73AH0BAE.eyJhbGdvcml0aG0iOiJITUFDLVNIQTI1NiIsImNvZGUiOiIyLkFRRDUwMjJ0djdnNVlQOWguMzYwMC4xMzQzMzA0MDAwLjUtODA5NzM1NzI2fGZNSjJTdWZST25Wa2RnSEdWWldVUFN6NmhJcyIsImlzc3VlZF9hdCI6MTM0MzI5NzA1NywidXNlcl9pZCI6IjgwOTczNTcyNiJ9&access_token=AAAFOhEfCjnQBAJSZAFyZBrLZBckHoGOqdPM2jn1Q0wpfNPVFGFTzMxUZBsBo9wWVNOYFlfe0ovLtpHWZCnuXUCZATJcGhRMPRzlFddQ0XZBagZDZD&expires_in=6943&https=1) [http://domain.com/index.php/tms/updateprofile的框架](http://domain.com/index.php/tms/updateprofile)[=f2c537d51c&origin=http%3A%2F%2Fdomain.com%2Ff292b6c658&domain=domain.com&relation=parent&frame=f151cd576c&code=2.AQD5022tv7g5YP9h.3600.1343304000.5-809735726%7CRK1BKSccupfslgdlXkXL_5TJgiU&signed_request=RTIhluTQhwrHRBNdI3hPLrzMZ8kh-J3M3_Y73AH0BAE.eyJhbGdvcml0aG0iOiJITUFDLVNIQTI1NiIsImNvZGUiOiIyLkFRRDUwMjJ0djdnNVlQOWguMzYwMC4xMzQzMzA0MDAwLjUtODA5NzM1NzI2fGZNSjJTdWZST25Wa2RnSEdWWldVUFN6NmhJcyIsImlzc3VlZF9hdCI6MTM0MzI5NzA1NywidXNlcl9pZCI6IjgwOTczNTcyNiJ9&access_token=AAAFOhEfCjnQBAJSZAFyZBrLZBckHoGOqdPM2jn1Q0wpfNPVFGFTzMxUZBsBo9wWVNOYFlfe0ovLtpHWZCnuXUCZATJcGhRMPRzlFddQ0XZBagZDZD&expires_in=6943&https=1](http://static.ak.facebook.com/connect/xd_arbiter.php?version=9#cb=f2c537d51c&origin=http%3A%2F%2Fdomain.com%2Ff292b6c658&domain=domain.com&relation=parent&frame=f151cd576c&code=2.AQD5022tv7g5YP9h.3600.1343304000.5-809735726%7CRK1BKSccupfslgdlXkXL_5TJgiU&signed_request=RTIhluTQhwrHRBNdI3hPLrzMZ8kh-J3M3_Y73AH0BAE.eyJhbGdvcml0aG0iOiJITUFDLVNIQTI1NiIsImNvZGUiOiIyLkFRRDUwMjJ0djdnNVlQOWguMzYwMC4xMzQzMzA0MDAwLjUtODA5NzM1NzI2fGZNSjJTdWZST25Wa2RnSEdWWldVUFN6NmhJcyIsImlzc3VlZF9hdCI6MTM0MzI5NzA1NywidXNlcl9pZCI6IjgwOTczNTcyNiJ9&access_token=AAAFOhEfCjnQBAJSZAFyZBrLZBckHoGOqdPM2jn1Q0wpfNPVFGFTzMxUZBsBo9wWVNOYFlfe0ovLtpHWZCnuXUCZATJcGhRMPRzlFddQ0XZBagZDZD&expires_in=6943&https=1). 域、协议和端口必须匹配。

有什么想法可能导致这种情况吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T21:54:50.483

显然这是预期的？

[https://developers.facebook.com/bugs/122268321247958](https://developers.facebook.com/bugs/122268321247958)

# linux - 使用 wpa_supplicant 中的状态/事件通知获取连接过程错误的原因

> ID：11667310
> 
> 赞同：0
> 
> 时间：2012-07-26T10:24:38.977
> 
> 标签：linux, android-wifi, wpa, wifi

我正在使用 wpa_supplicant-0.7.3 。

有时用户输入的密码错误，导致连接错误。

我想知道，如何通过状态或事件通知获取正常模式下wpa_supplicant连接错误的原因？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-17T02:41:16.323

wpa_supplicant 日志将指示失败的原因代码。查看wpa_supplicant头文件找到原因对应的代码（src/common/defs.h）

此链接也将有助于 [https://supportforums.cisco.com/docs/DOC-14033](https://supportforums.cisco.com/docs/DOC-14033)

# iphone - 让 self.view 成为 UIScrollView？

> ID：11667311
> 
> 赞同：1
> 
> 时间：2012-07-26T10:24:40.540
> 
> 标签：iphone, ios, uiscrollview

我正在尝试使用 TabBarController，默认项目会创建 UITabBarController 并为您提供两个视图控制器。

我希望这些视图控制器之一的视图是 UIScrollView，即在调用`self.view`时`FirstViewController`我想返回 a`UIScrollView *`而不仅仅是 a `UIView *`。

视图控制器被初始化，`initWithNibName:`但我看不到任何分配视图属性的东西。

如果这一切听起来有点奇怪，也许我做错了？我意识到我可以将 UIScrollView 放到已经用我创建的视图上，但在这种情况下拥有父视图似乎有点毫无意义。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T10:39:10.917

好的，刚刚意识到如何做到这一点。

我可以在我的代码中进行强制转换以使 UIView 成为 UIScrollView。像这样...

```
UIScrollView *tempScrollView = (UIScrollView *)self.view;
tempScrollView.contentSize = self.view.bounds.size; 
```

然后，在 Interface Builder 中，您可以使用检查器为您的 UIView 设置自定义类。我在这里将类设置为 UIScrollView ，似乎一切正常！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T10:39:54.677

如果你想使用界面生成器。只需加载您的 nib，删除左侧面板上的视图，然后将 UIScrollView 拖入该区域。

从 Files Owner 到新 UIScrollView 作为视图属性的下一个链接。

这样做的唯一缺点是在您的代码中，每当您需要特定`UIScrollView`功能时，您都必须对视图属性进行类型转换（使用`(UIScrollView *)self.view`），或者将其放入像这样的变量中

```
 UIScrollView *sview = self.view;
 //Then use sview for your changes 
```

然而，最好的方法是用代码来做。

# javascript - 将元素排列到哈希数组中

> ID：11667319
> 
> 赞同：0
> 
> 时间：2012-07-26T10:25:05.547
> 
> 标签：javascript, arrays, json, recursion, hash

我正在尝试将 javascript 对象分解为小数组，以便我可以在需要时轻松访问内部数据。

我已经使用递归函数来访问json中的所有节点，使用程序

[http://jsfiddle.net/SvMUN/1/](http://jsfiddle.net/SvMUN/1/)

我在这里要做的是我想将这些存储到一个单独的数组中，以便我可以像访问它一样访问它

```
newArray.Microsoft= MSFT, Microsoft;
newArray.Intel Corp=(INTC, Fortune 500);
newArray.Japan=Japan
newArray.Bernanke=Bernanke; 
```

每个数组的深度是不同的，所以单层的可以使用相同的名称，就像我在伯南克的例子中展示的那样。有可能这样做吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T10:53:45.580

不，您将其简化`Facets`为一个名为`html`- 但您想要一个对象的字符串。

```
function generateList(facets) {
    var map = {};
    (function recurse(arr) {
        var join = [];
        for (var i=0; i<arr.length; i++) {
            var current = arr[i].term; // every object must have one!
            current = current.replace(/ /g, "_");
            join.push(current);  // only on lowest level?
            if (current in arr[i]) 
                map[current] = recurse(arr[i][current]);
        }
        return join;
    })(facets)
    return map;
} 
```

[jsfiddle.net 上的演示](http://jsfiddle.net/SvMUN/5/)

要获取一级数据，您可以在 if 之后添加此 else 语句：

```
 else
                map[current] = [ current ]; // create Array manually 
```

尽管我认为结果（[演示](http://jsfiddle.net/SvMUN/6/)）没有多大意义。

# ruby-on-rails - 为 ActiveRecord 关联创建视图的教程？

> ID：11667320
> 
> 赞同：3
> 
> 时间：2012-07-26T10:25:10.940
> 
> 标签：ruby-on-rails, activerecord, associations, railstutorial.org

在教 Rails 学生时，我经常会遇到他们创建了两个模型并建立关联的情况，并且想知道如何才能使该关联在视图中可见。

现在我的问题是，是否有任何概述文章/教程/博客文章，

它概述了在视图中显示关联的不同方式。例如，我看到几个“关联模式”，即一个

*   1:n 关联可以是 UML 中描述的聚合或组合，对关联实体的创建具有不同的含义（可能指向嵌套资源，仅在路由方面进行讨论）
*   ...或属于某个类别等的东西，如果找不到所需的实体，您可能希望从现有选项中进行选择或创建一个新选项；这由 first_or_create 处理，但同样，我还没有看到任何文档总结了视图中的不同选项（例如，RailsCast #57 和 258 描述。）

我已经尝试搜索它。此外，Michael Hartl 的教程或 PragProgs “Agile Web Development with Rails”都没有类似的东西。

那么，那里有什么东西吗？如果没有，人们认为创造它会有用吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-29T07:15:38.340

有关在视图中呈现对象图的更多 OO/更少 Rails 方式的讨论，请查看 Avdi Grimm 对他所谓的展览模式的讨论：

[http://objectsonrails.com/#ID-2656c30c-080a-4a4e-a53e-4fbaad39c262](http://objectsonrails.com/#ID-2656c30c-080a-4a4e-a53e-4fbaad39c262)

这有很好的例子和很好的讨论，如果你的学生有兴趣超越 API，那么在哪里以及为什么不遵循纯 Rails 方式可能是一个好的设计决策。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-26T11:46:31.860

一些 Railscasts：

*   has-and-belongs-to-many (n:m) 关系的复选框：[http ://railscasts.com/episodes/17-habtm-checkboxes](http://railscasts.com/episodes/17-habtm-checkboxes)
*   嵌套表格：[http ://railscasts.com/episodes/196-nested-model-form-revised](http://railscasts.com/episodes/196-nested-model-form-revised)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-31T18:42:41.153

您可能想让他们查看 Draper gem。它具有出色的文档和截屏视频：

[https://github.com/jcasimir/draper](https://github.com/jcasimir/draper)

它可能不是您正在寻找的东西，但它会教他们装饰器模式。

我希望这有帮助！

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-28T21:54:16.607

我写了一个 gem 来做嵌套表单（cocoon），并在 gem 的 wiki 中记录了如何解决所有类型的嵌套表单。见[https://github.com/nathanvda/cocoon/wiki/A-guide-to-doing-nested-model-forms](https://github.com/nathanvda/cocoon/wiki/A-guide-to-doing-nested-model-forms)

希望这可以帮助。

# java - 将 Maven 项目转换为 Netbeans 项目

> ID：11667328
> 
> 赞同：1
> 
> 时间：2012-07-26T10:25:47.217
> 
> 标签：java, maven, plugins, netbeans

当我在 Netbeans 中打开一个[Maven 项目](http://www.disasterarea.co.uk/blog/wp-content/uploads/2011/02/spannersws.zip)并尝试执行“启动构建”或正常的“构建”时，它会失败。它要么卡住下载依赖项，要么抛出错误。是否有插件或可以将 Maven 项目转换为 Netbeans 项目的东西？即使您必须手动下载依赖项...

这是我得到的错误之一：

> 在构建有效模型时遇到了一些问题
> 
> org.dontpanic:spannersws:war:1.0-SNAPSHOT 'build.plugins.plugin.version' for org.apache.maven.plugins:maven-compiler-plugin 丢失。@ 第 66 行，第 21 列
> 
> 强烈建议修复这些问题，因为它们会威胁您构建的稳定性。
> 
> 出于这个原因，未来的 Maven 版本可能不再支持构建这种格式错误的项目。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T11:01:59.147

Netbeans 只是打开 Maven 项目。你不需要转换它们。你期待的是一个 Maven 问题。似乎 pom.xml 坏了。我认为该项目是在 Maven 2 上准备的。最新的 Netbeans 包含 Maven 3。尝试按照说明修复 pom.xml 或下载 Maven 2 并将 Netbeans 中的 Maven 版本从嵌入式切换到外部。

我建议修复 pom.xml。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T11:41:11.537

NetBeans 原生支持 Maven 项目。错误消息不是错误。这只是一个警告，在版本 3 之后开始出现在 Maven 中，以帮助人们更好地配置他们的项目。

# ios - iOS：对象重叠时禁用平移手势

> ID：11667329
> 
> 赞同：0
> 
> 时间：2012-07-26T10:25:49.527
> 
> 标签：ios, gesture, pan

我有一些使用`Pan Gesture`. 现在我希望对象在以下任一情况下**永久停止移动**：

1.  它与特定的（静止的，无法移动的）对象重叠，或
2.  它进入一定范围的位置。

`removeGestureRecogniser`当两个对象重叠使用但它不起作用时，我试图停止它。

```
- (IBAction)cowimagemove:(UIPanGestureRecognizer *)recognizer {

if (cowimage.center.x==stayimage.center.x) {
    [self removeGestureRecogniser];
    }
else {
    CGPoint translation = [recognizer translationInView:self.view];
    recognizer.view.center = CGPointMake(recognizer.view.center.x + translation.x,
                                         recognizer.view.center.y + translation.y);
    [recognizer setTranslation:CGPointMake(0, 0) inView:self.view];
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T11:24:24.490

尝试在 UIGestureRecognizer Delegate 中捕捉重叠。

```
- (BOOL)gestureRecognizerShouldBegin:(UIGestureRecognizer *)gestureRecognizer {
   if ([self checkForOverlap:gestureRecognizer]) {
       return NO;
   } 
   return YES;

} 
```

在您的`checkForOverlap`方法中，您使用手势识别器对象来测试相关点等，如果是这样，则返回 YES。

（当然，上述内容的较短版本是

```
return ![self checkForOverlap:gestureRecognizer]; 
```

)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T11:07:56.570

由于您没有包含任何设置代码，因此这个答案有点像在黑暗中闲逛，但首先让我印象深刻的是 removeGestureRecognizer 是一种需要参数的方法，即您要删除的手势识别器。所以第三行显示读取

```
[self removeGestureRecognizer: recognizer]; 
```

在所有委托方法中总是传递这些引用的一个原因正是——你知道你为哪个对象工作......

在我使用 addGestureRecognizer/removeGestureRecognizer 对的所有情况下，它们都运行良好，所以我们希望它们也适用于您的情况！

问候，诺比

# android - IO EXCEPTION 在 android 中导入本地 .vcf 文件

> ID：11667330
> 
> 赞同：0
> 
> 时间：2012-07-26T10:25:50.477
> 
> 标签：android, import, vcf-vcard

我正在开发需要导入本地 .vcf 文件的 Android 2.3.3 应用程序。我尝试导入它来启动意图

```
final String pathDownload = Environment.getExternalStorageDirectory()+"/vcard1.vcf";

    Intent i = new Intent();
    i.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
    i.setAction(android.content.Intent.ACTION_VIEW);
    i.setDataAndType(Uri.parse(pathDownload), "text/x-vcard");
    activity.startActivity(i); 
```

但是即使文件存在并且可以从任何文件管理器轻松导入，这也会导致 IOException。有任何想法吗？

```
07-26 12:10:04.995: I/ActivityManager(307): START {act=android.intent.action.VIEW dat=/storage/sdcard0/vcard1.vcf typ=text/x-vcard flg=0x10000000 cmp=com.android.contacts/.vcard.ImportVCardActivity u=0} from pid 7681
07-26 12:10:05.050: I/ActivityManager(307): START {cmp=com.android.contacts/.vcard.SelectAccountActivity u=0} from pid 7604
07-26 12:10:05.057: I/SelectAccountActivity(7604): The number of available accounts: 2
07-26 12:10:05.057: I/AccountSelectionUtil(7604): The number of available accounts: 2
07-26 12:10:10.065: I/ActivityManager(307): Displayed com.android.contacts/.vcard.SelectAccountActivity: +5s15ms (total +5s26ms)
07-26 12:10:19.190: I/VCardImport(7604): Starting vCard import using Uri /storage/sdcard0/vcard1.vcf
07-26 12:10:19.198: I/VCardImport(7604): Bind to VCardService.
07-26 12:10:19.307: I/VCardImport(7604): Connected to VCardService. Kick a vCard cache thread (uri: [/storage/sdcard0/vcard1.vcf])
07-26 12:10:19.307: I/VCardImport(7604): vCard cache thread starts running.
07-26 12:10:19.315: I/VCardImport(7604): Copy a Uri to app local storage (/storage/sdcard0/vcard1.vcf -> import_tmp_0.vcf)
07-26 12:10:19.315: E/VCardImport(7604): IOException during caching vCard
07-26 12:10:19.315: E/VCardImport(7604): java.io.FileNotFoundException: No content provider: /storage/sdcard0/vcard1.vcf
07-26 12:10:19.315: E/VCardImport(7604):    at android.content.ContentResolver.openTypedAssetFileDescriptor(ContentResolver.java:708)
07-26 12:10:19.315: E/VCardImport(7604):    at android.content.ContentResolver.openAssetFileDescriptor(ContentResolver.java:612)
07-26 12:10:19.315: E/VCardImport(7604):    at android.content.ContentResolver.openInputStream(ContentResolver.java:447)
07-26 12:10:19.315: E/VCardImport(7604):    at com.android.contacts.vcard.ImportVCardActivity$VCardCacheThread.copyTo(ImportVCardActivity.java:392)
07-26 12:10:19.315: E/VCardImport(7604):    at com.android.contacts.vcard.ImportVCardActivity$VCardCacheThread.run(ImportVCardActivity.java:300)
07-26 12:10:19.315: I/VCardImport(7604): Finished caching vCard.
07-26 12:10:19.339: I/ActivityManager(307): Displayed com.android.contacts/.vcard.ImportVCardActivity: +14s303ms 
```

更新：将意图更改为：

```
 Intent i = new Intent(android.content.Intent.ACTION_VIEW,   Uri.parse(pathDownload));
     i.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
     i.setType("text/x-vcard");
     activity.startActivity(i); 
```

我可以导入任何 2.1 vcf 文件。但是，如果我尝试使用 3.0 vcf 进行相同操作，则会发生以下情况：

```
07-26 15:55:40.783: I/VCardImport(2453): Bind to VCardService.
07-26 15:55:40.923: I/VCardImport(2453): Connected to VCardService. Kick a vCard cache thread (uri: [file:///storage/sdcard0/Podcasts/vcard1.vcf])
07-26 15:55:40.923: I/VCardImport(2453): vCard cache thread starts running.
07-26 15:55:40.931: I/VCardImport(2453): Copy a Uri to app local storage (file:///storage/sdcard0/Podcasts/vcard1.vcf -> import_tmp_1.vcf)
07-26 15:55:40.939: W/vCard(2453): Property name unsupported by vCard 2.1: N
07-26 15:55:40.939: W/vCard(2453): Property name unsupported by vCard 2.1: ORG
07-26 15:55:40.947: W/vCard(2453): The value unsupported by TYPE of 1: 
07-26 15:55:40.955: E/VCardImport(2453): Maybe the file is in wrong format
07-26 15:55:40.955: E/VCardImport(2453): com.android.vcard.exception.VCardException: Space exists at the beginning of the line
07-26 15:55:40.955: E/VCardImport(2453):    at com.android.vcard.VCardParserImpl_V30.getNonEmptyLine(VCardParserImpl_V30.java:124)
07-26 15:55:40.955: E/VCardImport(2453):    at com.android.vcard.VCardParserImpl_V21.parseItem(VCardParserImpl_V21.java:306)
07-26 15:55:40.955: E/VCardImport(2453):    at com.android.vcard.VCardParserImpl_V21.parseItems(VCardParserImpl_V21.java:289)
07-26 15:55:40.955: E/VCardImport(2453):    at com.android.vcard.VCardParserImpl_V21.parseOneVCard(VCardParserImpl_V21.java:226)
07-26 15:55:40.955: E/VCardImport(2453):    at com.android.vcard.VCardParserImpl_V21.parse(VCardParserImpl_V21.java:932)
07-26 15:55:40.955: E/VCardImport(2453):    at com.android.vcard.VCardParser_V30.parse(VCardParser_V30.java:87)
07-26 15:55:40.955: E/VCardImport(2453):    at com.android.contacts.vcard.ImportVCardActivity$VCardCacheThread.constructImportRequest(ImportVCardActivity.java:478)
07-26 15:55:40.955: E/VCardImport(2453):    at com.android.contacts.vcard.ImportVCardActivity$VCardCacheThread.run(ImportVCardActivity.java:339)
07-26 15:55:40.955: I/VCardImport(2453): Finished caching vCard. 
```

清单权限：

```
<uses-permission android:name="android.permission.GET_ACCOUNTS" />
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE"/>
<uses-permission android:name="android.permission.WRITE_CONTACTS"/>
<uses-permission android:name="android.permission.READ_CONTACTS"/> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T10:27:35.857

```
java.io.FileNotFoundException: No content provider: /storage/sdcard0/vcard1.vcf 
```

它清楚地说文件不可用

并且您是否在清单文件中给予了**许可？**

```
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" /> 
```

# java - 如何使用java代码生成xsd文件？

> ID：11667335
> 
> 赞同：2
> 
> 时间：2012-07-26T10:26:09.700
> 
> 标签：java, xsd, jaxb

```
<complexType name="spThread">
        <sequence>
            <element name="SPThreadID" type="int" />
            <element name="durtime" minOccurs="0" default="0">
                <simpleType>
                    <restriction base="int">
                        <minInclusive value="0" />
                    </restriction>
                </simpleType>
            </element>
            <element name="minexecutions" minOccurs="0" default="0">
                <simpleType>
                    <restriction base="int">
                        <minInclusive value="0" />
                    </restriction>
                </simpleType>
            </element>
            <element name="numThreads" type="int" />
            <element name="procedures" type="spm:procedure" minOccurs="1"
                maxOccurs="unbounded" />
        </sequence>
    </complexType> 
```

我想使用java代码生成这种类型的.xsd文件..？我怎样才能做到这一点。？

特别是如何生成简单类型的元素并对其进行限制？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T10:47:00.643

我建议您将 JAXB 用于您所做的任何 XML 工作。但通常 XSD 文件是手动生成的，然后 XML 文件是使用 XSD 文件以编程方式生成的。你想开发什么？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-26T14:00:34.023

`0`您可以利用现有类型，而不是创建自己的简单类型来表示以 开头的整数`xs:nonNegativeInteger`。我将用一个例子来演示。

**线程**

您可以使用`@XmlSchemaType`注释指定应在 XML 模式中为字段/属性生成的类型。

```
package forum11667335;

import javax.xml.bind.annotation.XmlSchemaType;

public class SpThread {

    private int durTime;

    @XmlSchemaType(name="nonNegativeInteger")
    public int getDurTime() {
        return durTime;
    }

    public void setDurTime(int durTime) {
        this.durTime = durTime;
    }

} 
```

**演示**

您可以使用`generateSchema`on 方法`JAXBContext`生成 XML 模式：

```
package forum11667335;

import java.io.IOException;
import javax.xml.bind.*;
import javax.xml.transform.Result;
import javax.xml.transform.stream.StreamResult;

public class Demo {

    public static void main(String[] args) throws Exception {
        JAXBContext jc = JAXBContext.newInstance(SpThread.class);

        jc.generateSchema(new SchemaOutputResolver() {

            @Override
            public Result createOutput(String namespaceUri, String suggestedFileName) throws IOException {
                StreamResult result = new StreamResult(System.out);
                result.setSystemId(suggestedFileName);
                return result;
            }

        });
    }

} 
```

**输出**

下面是生成的 XML 模式。

```
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<xs:schema version="1.0" xmlns:xs="http://www.w3.org/2001/XMLSchema">
  <xs:complexType name="spThread">
    <xs:sequence>
      <xs:element name="durTime" type="xs:nonNegativeInteger"/>
    </xs:sequence>
  </xs:complexType>
</xs:schema> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-26T10:30:36.493

您可以使用任何 XML 处理 API 来实现此目的。JDOM 就是其中之一。如果您想要一个特定于构建 XML 模式的 API，然后将其序列化为 XML，您可能需要查看[Eclipse MDT](http://www.eclipse.org/modeling/mdt/?project=xsd#xsd) API。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-26T10:35:07.533

您可以使用 Java2Schema 工具从 java 类生成模式，也可以尝试 JaxB 2.0

# playframework - 使用 restFB 和播放框架 2.0.2 时获取 FacebookNetworkException

> ID：11667340
> 
> 赞同：1
> 
> 时间：2012-07-26T10:26:33.553
> 
> 标签：playframework, restfb

尝试从 facebook 获取用户名或关于我的信息时出现异常。我已经设置了一个应用程序并且正在正确获取令牌。

我进入浏览器 URL 字段：

```
http://localhost:9000/?code=AQCoZN22V9BJbG4o9CMPq0vbw5LnLCuaSJ87XctcvSM4t6DoaZu-HGD_co_Y63gd-M9NHOaT1BBWVk_SrtF5YVYgDcZfXo_KBiV9SVmXflzzD4nx0VNr76LU0THrXnzL5D3EEqP6uyzzJAoEV_dZ8VEXwA7ObRXpEUQU_n2ERFvLy6gY0pJhxRoBWAsjUGUJ9U8#_=_ 
```

我的代码：

```
public class Application extends Controller {

    private static final String FACEBOOK_APP_URL = 
        "https://www.facebook.com/dialog/oauth?client_id=271131522987567&redirect_uri=http://localhost:9000/&scope=user_about_me";

  public static Result index(String code) {
       String userDetails = connectToFacebook(code);
       return ok(index.render("Your new application is ready!\n" + userDetails));
  }

  private static String connectToFacebook(String token){
      FacebookClient facebookClient = new DefaultFacebookClient(token);
      System.out.println("\nGetting user\n");
     User user = facebookClient.fetchObject("me", User.class);
     return user.getAbout();
  }

} 
```

和路线文件：

```
# Home page
GET     /                           controllers.Application.index(code)

# Map static resources from the /public folder to the /assets URL path
GET     /assets/*file               controllers.Assets.at(path="/public", file) 
```

浏览器中的异常（播放框架）：

```
[FacebookNetworkException: A network error occurred while trying to communicate with Facebook: Facebook request failed (HTTP status code null)]

In D:\play-2.0.2\injustice\target\scala-2.9.1\src_managed\main\routes_routing.scala at line 32.

28

29// @LINE:6

30case controllers_Application_index0(params) => {

31   call(params.fromQuery[String]("code", None)) { (code) =>

32        invokeHandler(_root_.controllers.Application.index(code), HandlerDef(this, "controllers.Application", "index", Seq(classOf[String])))

33   }

34} 
```

在控制台中：

```
Getting user

[error] application -

! @6b6b0mehm - Internal server error, for request [GET /?code=AQCoZN22V9BJbG4o9C
MPq0vbw5LnLCuaSJ87XctcvSM4t6DoaZu-HGD_co_Y63gd-M9NHOaT1BBWVk_SrtF5YVYgDcZfXo_KBi
V9SVmXflzzD4nx0VNr76LU0THrXnzL5D3EEqP6uyzzJAoEV_dZ8VEXwA7ObRXpEUQU_n2ERFvLy6gY0p
JhxRoBWAsjUGUJ9U8] ->

play.core.ActionInvoker$$anonfun$receive$1$$anon$1: Execution exception [[Facebo
okNetworkException: A network error occurred while trying to communicate with Fa
cebook: Facebook request failed (HTTP status code null)]]
        at play.core.ActionInvoker$$anonfun$receive$1.apply(Invoker.scala:134) [
play_2.9.1.jar:2.0.2]
         at play.core.ActionInvoker$$anonfun$receive$1.apply(Invoker.scala:115) [
play_2.9.1.jar:2.0.2]
         at akka.actor.Actor$class.apply(Actor.scala:318) [akka-actor.jar:2.0.2]
        at play.core.ActionInvoker.apply(Invoker.scala:113) [play_2.9.1.jar:2.0.
2]
        at akka.actor.ActorCell.invoke(ActorCell.scala:626) [akka-actor.jar:2.0.
2]
         at akka.dispatch.Mailbox.processMailbox(Mailbox.scala:197) [akka-actor.j
ar:2.0.2]
Caused by: com.restfb.exception.FacebookNetworkException: A network error occurr
ed while trying to communicate with Facebook: Facebook request failed (HTTP stat
us code null)
        at com.restfb.DefaultFacebookClient.makeRequestAndProcessResponse(Defaul
tFacebookClient.java:492) ~[restfb-1.6.9.jar:na]
        at com.restfb.DefaultFacebookClient.makeRequest(DefaultFacebookClient.ja
va:469) ~[restfb-1.6.9.jar:na]
        at com.restfb.DefaultFacebookClient.makeRequest(DefaultFacebookClient.ja
va:428) ~[restfb-1.6.9.jar:na]
        at com.restfb.DefaultFacebookClient.fetchObject(DefaultFacebookClient.ja
va:238) ~[restfb-1.6.9.jar:na]
        at controllers.Application.connectToFacebook(Application.java:26) ~[clas
ses/:na]
        at controllers.Application.index(Application.java:19) ~[classes/:na]
Caused by: java.net.ConnectException: Connection timed out: connect
        at java.net.PlainSocketImpl.socketConnect(Native Method) ~[na:1.6.0_27]
        at java.net.PlainSocketImpl.doConnect(Unknown Source) ~[na:1.6.0_27]
        at java.net.PlainSocketImpl.connectToAddress(Unknown Source) ~[na:1.6.0_
27]
        at java.net.PlainSocketImpl.connect(Unknown Source) ~[na:1.6.0_27]
        at java.net.SocksSocketImpl.connect(Unknown Source) ~[na:1.6.0_27]
        at java.net.Socket.connect(Unknown Source) ~[na:1.6.0_27] 
```

如您所见，打印“获取用户”字符串后发生错误。

请帮忙，提前谢谢！

# activemq - bean id activemqTx 的含义是什么？

> ID：11667344
> 
> 赞同：0
> 
> 时间：2012-07-26T10:26:46.143
> 
> 标签：activemq, apache-camel

我一直在处理 Camel 事务时遇到问题，经过骆驼列表的一些大力帮助后，我最终追踪到在 ID 为“activemq”的 bean 中使用 org.apache.activemq.camel.component.ActiveMQComponent。如果我使用 'activemqTx' 的 id，它就可以工作。但我似乎找不到任何关于“activemqTx”作为 bean id 的重要性的文档。

只有一条消息通过这条路线：

```
<bean id="activemq" class="org.apache.activemq.camel.component.ActiveMQComponent"> 
```

一切都与此有关：

```
<bean id="activemqTx" class="org.apache.activemq.camel.component.ActiveMQComponent"> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T11:55:54.680

一定是豆名冲突

# iphone - 从视图控制器中删除顶部栏

> ID：11667348
> 
> 赞同：2
> 
> 时间：2012-07-26T10:27:06.050
> 
> 标签：iphone, ios, interface, navigation

我有一个视图控制器，我想要一个顶栏，另一个我没有。

它们都在**同一个导航控制器**中。

如何使第**一个视图控制器没有顶栏**，而**第二个视图控制器有顶栏**？

* * *

**编辑：**

如果我使用`[self.navigationController setNavigationBarHidden:YES];`，那么顶部栏曾经是一个黑框，直到下一个屏幕完成它才会飞入。我怎样才能避免这种情况？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-26T10:28:34.700

在您的第一个视图控制器中使用此属性：

```
[self.navigationController setNavigationBarHidden:NO]; 
```

在第二个视图控制器中，在 viewWillAppear 中，放入下面的行，

```
 [self.navigationController setNavigationBarHidden:YES]; 
```

在第二个视图控制器中，在 viewWillDisappear 中，放入下面的行，

```
[self.navigationController setNavigationBarHidden:NO]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T10:32:12.823

您可以使用此代码隐藏导航栏：

```
[self.navController setNavigationBarHidden:YES]; 
```

并在下一个视图控制器中再次设置：

```
[self.navController setNavigationBarHidden:NO]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-26T10:35:24.863

调用方法：

```
[self.navController setNavigationBarHidden:YES];
[self.navController setNavigationBarHidden:NO]; 
```

在要隐藏/显示 NavController 的每个视图的 ViewWillAppear 方法中。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-26T10:35:48.550

`self.navigationController.navigationBar.hidden = YES;`想要隐藏导航栏时使用，`self.navigationController.navigationBar.hidden = NO;`想要取消隐藏时使用。

# windows - 您可以将 OCaml 项目本地编译为 Windows 库吗？

> ID：11667357
> 
> 赞同：3
> 
> 时间：2012-07-26T10:27:43.067
> 
> 标签：windows, dll, compiler-construction, ocaml, llvm

我是 OCaml 的新手（但我过去使用过 SML），我想知道两件事：
1- OCaml 程序可以编译为库吗？
2-如果是这样，它们可以编译为本机 Windows dll。

我想要做的是使用 LLVM 在 OCaml 中创建一个编译器库，并从另一个 Windows 程序中使用它。

PS：我知道我可以在 C++ 和 C 中使用 LLVM，但我更喜欢 OCaml，因为我这样做是为了好玩。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-26T11:11:09.073

是的，请参阅手册的`ocamlopt` `-output-obj`选项和章节[18.7.5 在 C 代码](http://caml.inria.fr/pub/docs/manual-ocaml-312/manual032.html#htoc249)中嵌入 Caml 代码。

# php - php html语法错误

> ID：11667361
> 
> 赞同：-4
> 
> 时间：2012-07-26T10:28:03.573
> 
> 标签：php

我正在尝试将嵌入在 html 中的 php 代码转换为带有嵌入 html 代码的 php 代码。我的 IDE 抛出语法错误。有人可以帮忙吗，谢谢。

html/php（工作）：

```
 <select name="products">
                        <option value="select">Select</option>
                        <option value="product1" <?php if (!isset($updatebtn_clicked)){ echo @$product_list['product1']; }elseif ($_POST['products'] == $product_name[0]){ echo 'selected="selected"' ;} echo
                        '>'. $product_name[0]. '</option>' ?> </select> 
```

以上是我的下拉列表中单个项目的片段。他们只是不断重复所有产品，并且有效。

php/html（无法正常工作）：

```
<?php
        $select = '<select name="products">
               <option value="select">Select</option>
                value="'.$product_name[0].'"'. 
                if (!isset($updatebtn_clicked))
                { echo @$product_list[$product_name[1]]; }elseif ($_POST['products'] == $product_name[1]){ echo 'selected="selected"' ;} echo'>'. $product_name[1]. '</option></select>';
?> 
```

以上在第一个 if 语句中生成语法错误。我只是不明白为什么：/

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T10:31:59.380

第二个是尝试“将`if`语句附加到字符串”。你不能这样写。

试试这个：

```
<?php
    $select = '<select name="products">
           <option value="select">Select</option>
            value="'.$product_name[0].'"';   // <- Finish assignment here

    if (!isset($updatebtn_clicked))
    { 
        $select = $select . @$product_list[$product_name[1]]; 
    }
    elseif ($_POST['products'] == $product_name[1])
    { 
        $select = $select . 'selected="selected"';
    }

    $select = $select . '>'. $product_name[1]. '</option></select>';

    echo $select;
?> 
```

您尝试做的第一件事和第二件事之间的区别是：第一件事输出 HTML 和混合的 PHP。PHP 代码由 PHP 解释器替换为`echo`语句的输出。

第二种方法是将所有 HTML 放入一个变量中。但是，您不能混合使用 PHP 和 HTML。你一直在 PHP 脚本的范围内，所以你必须编写正确的 PHP。该声明

```
$select = 'Hello ' . if (condition) echo 'foo'; 
```

不是正确的 PHP 代码，而

```
$select = 'Hello ';
if (condition) $select = $select . 'foo'; 
```

是正确的 PHP 语法。

**编辑**
顺便说一句：您发布的第二个示例（我修改过）没有输出有效的第二个`option`！它应该是：

```
 $select = '<select name="products">
           <option value="select">Select</option>
           <option value="'.$product_name[0].'"';   // <- Finish assignment here 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T10:38:54.493

试试这个：

```
<?php
$select = "
    <select name='products'>
        <option value='select'>Select</option>
        <option value='product1' ".( (!isset($updatebtn_clicked)) ? @$product_list['product1']  : "selected='selected'").">".$product_name[0]."</option>
    </select> 
";
?> 
```

# php - 使用 $i PHP 回显一个变量

> ID：11667364
> 
> 赞同：-1
> 
> 时间：2012-07-26T10:28:13.360
> 
> 标签：php, variables, loops, for-loop

我正在尝试使用一些数据库连接进行动态 for 循环。

```
<?php for ($i = 1; $i <= 8; $i++): ?>

<?php echo $question[0]->option

<?php endfor; ?> 
```

选项在数据库中的存储位置如下：option1、option2、option3 等。

我有 $i 变量进行计数，但我不知道如何将其放入 $question[0]->option 变量中。试过 $question[0]->option,$i 等，但没有运气。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T10:31:01.877

试试这个：

```
<?php
for ($i = 1; $i <= 8; $i++) {
    $num = "option".$i;
    echo $question[0]->$num;
}
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T10:31:17.023

您不必在只有 php 代码的块中打开和关闭 php 标签。

```
<?php
for ($i = 1; $i <= 8; $i++):
    $optionname = "option$i";
    echo $question[0]->$optionname
endfor;
?> 
```

# java - 当窗口失去焦点时，JComboBox 保持打开状态

> ID：11667366
> 
> 赞同：1
> 
> 时间：2012-07-26T10:28:15.403
> 
> 标签：java, swing, jcombobox

我的任务是将带有 JComboBox 的 java 应用程序从 OS2 移植到 Windows。

OS2（JRE1.4）中的JComboBox 有一个行为，当弹出窗口打开时，用户点击其他窗口，弹出窗口保持打开状态。但是当它在 Windows (JRE1.6) 中运行时，用户点击其他窗口时，JComboBox 会自动关闭。

如何在 Windows 中实现相同的行为？我希望它保持打开状态...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T10:34:16.807

1.  不可能，`JComboBoxe`总是隐藏弹出窗口`focusLost`，这些[更改在 Java 1.4 中已修复](http://tips4java.wordpress.com/2009/05/17/combo-box-no-action/)

2.  必须创建自己`Component`的模拟功能`JComboBox`，`popup window`应该基于`JDialog / JWindow`（强烈不建议......）

# oracle-apex - 在 apexrefresh 期间/之后刷新区域的项目

> ID：11667367
> 
> 赞同：1
> 
> 时间：2012-07-26T10:28:19.553
> 
> 标签：oracle-apex

我有一个通过 jQuery 刷新的报告区域。我有以下带有区域页脚的代码来设置刷新过程：

```
<script type="text/javascript">
var refreshId = setInterval(function(){ apex.jQuery('##REGION_ID#').trigger('apexrefresh');
}, 5000);
</script> 
```

这可以正常工作，并且报告数据每 5 秒刷新一次。但是，该区域还包含一个项目，其源值是通过 SQL 查询确定的。我希望每次刷新报表区域数据时也刷新此值，但触发的刷新不会这样做。

仔细观察，报告区域`div`似乎不包含 Item HTML，因此在刷新期间被换出的 DOM 部分不包含该项目。该项目出现在名为的同级表节点内`apex_layout_#REGION_ID#`：

```
<div class="rc-content-main">
    <table id="apex_layout_7017903473906209" class="formlayout" border="0" summary="">
    <div id="report_7017903473906209_catch">
    <script type="text/javascript">
</div> 
```

我已经尝试做一个额外的`.trigger()`调用，而不是传递项目的 ID，`#REGION_ID#`但令人困惑的是，这对报告数据进行了完全相同的刷新。我还尝试设置一个动态操作以在将刷新项目的区域上的“刷新后”触发，但这也有一些奇怪的事情 - 它会毫无延迟地触发重复的 AJAX 调用并且不会更改项目值。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T10:37:40.050

您不能使用 apexrefresh 事件刷新项目。您在动态操作的正确轨道上：您将需要“手动”检索新值。

您能否详细说明您是如何为您的项目设置“刷新后”触发的动态操作的？有没有真正的“设置值”和“sql语句”的动作？你检查了ajax调用吗？有什么错误吗？电话是否不断重复？另外，检查项目的会话状态（通过底部开发者栏上的“会话”按钮访问），看看那里的值是否发生了变化。

# android - 检测Android WebView中的javascript函数调用

> ID：11667368
> 
> 赞同：1
> 
> 时间：2012-07-26T10:28:20.090
> 
> 标签：android, webview

由于单击链接（链接调用函数），我想在 web 视图中调用 javascript 函数之前做一些事情。

我试图通过重载“setOnTouchListener”来做到这一点，但是当我试图做 ((WebView)v).getHitTestResult().getExtra(); 时我总是得到空值。

```
 mMainWebView.setOnTouchListener(new View.OnTouchListener() {

        public boolean onTouch(View v, MotionEvent event) {
            WebView.HitTestResult hr = ((WebView)v).getHitTestResult();
            return false;
        }

    }); 
```

我知道要调用的函数的名称，我可以为函数调用做类似“shouldOverrideUrlLoading”的事情吗？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T10:34:53.600

```
 mWebView.setWebViewClient(new WebViewClient(){

                @Override
                public boolean shouldOverrideUrlLoading(WebView view, String url) {
                    Log.d(TAG,"shouldOverrideUrlLoading url: "+url);
                    if( url.startsWith("http:") || url.startsWith("https:") ) {
                   //capture the url and call method you want
                        return false;
                    }

                    // Otherwise allow the OS to handle it
                    Intent intent = new Intent(Intent.ACTION_VIEW, Uri.parse(url));
                    mcContext.startActivity( intent ); 
                    return true;

                } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T12:55:14.173

这对于 OP 来说可能有点晚了，但我找到了一个适合我的解决方案。基本上，当你打电话时，`setOnTouchListener(...)`你应该传入一个`new OnTouchListener() {...}`. 注意：我*没有*使用`new View.OnTouchListener() {...}`（`View.`从声明中删除）。

我确信有比我更好的 Java 经验的人可以解释为什么会这样，但我想这与继承模型或这些方面的解释有关。

# python - Python：每次我重新启动解释器时都会撤消 sys.path 中的项目删除

> ID：11667371
> 
> 赞同：2
> 
> 时间：2012-07-26T10:28:27.603
> 
> 标签：python, path, python-2.7, pythonpath

```
>>> sys.path[6]
/path/to/django
>>> sys.path.pop(6)
/path/to/django 
```

然后`CTRL + D`

```
$ python

>>> sys.path[6]
/path/to/django 
```

哦，亲爱的...

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-26T10:40:03.973

sys.path 由外部维护的 PYTHONPATH 变量填充。重新启动 python 时更改此变量以获得永久更改。

在 unix（包括 Mac）上，当使用 bash 时，它的配置很可能是这样的：

> 导出 PYTHONPATH=....

而这个语句很可能隐藏在你的 .profile 或 .bashrc 文件中。

要在 Windows 中执行此操作，您需要执行类似的操作

> 设置 PythonPATH=....

它可能在系统控制面板中的某个地方 - 在环境下。

如果您想查看 PYTHONPATH 的当前设置，请转到命令（终端）窗口并键入`echo $PYTHONPATH`(unix) 或`echo %PYTHONPATH%`(windows)

# wpf - 如果在父样式的 Style.Resources 中定义父样式，为什么 Style.BasedOn 不适用于子控件的样式？

> ID：11667372
> 
> 赞同：0
> 
> 时间：2012-07-26T10:28:31.353
> 
> 标签：wpf

我有这样的风格：

```
<Style TargetType="Panel" x:Key="{ComponentResourceKey TypeInTargetAssembly={x:Type styles:CommonStyles}, ResourceId=ButtonsPanelStyle}">

        <Style.Resources>
            <Style TargetType="Button">
                <Setter Property="Margin" Value="5"/>
                <Setter Property="MinWidth" Value="75"/>
            </Style>
        </Style.Resources>

        <Setter Property="Background" Value="#E0E0E0"/>
        <Setter Property="StackPanel.Orientation" Value="Horizontal"/>
        <Setter Property="FlowDirection" Value="RightToLeft"/>
        <Setter Property="HorizontalAlignment" Value="Stretch"/>
        <Setter Property="VerticalAlignment" Value="Bottom"/>
        <Setter Property="MinWidth" Value="{Binding RelativeSource={RelativeSource Self}, Path=DesiredSize.Width}"/>

    </Style> 
```

及其用法：

```
<DockPanel Grid.Row="3" Grid.Column="0" Grid.ColumnSpan="2" 
                   Style="{DynamicResource {x:Static styles:CommonStyles.ButtonsPanelStyleKey}}">
            <Button  Content="Add" Command="{Binding Add}" Grid.RowSpan="2" Height="23" HorizontalAlignment="Right" Name="AddButton" VerticalAlignment="Center" TabIndex="2" >
                <Button.Style>
                    <Style BasedOn="{StaticResource ResourceKey={x:Type Button}}" TargetType="Button">
                        <Style.Triggers>
                            <DataTrigger  Binding="{Binding ActionType}" Value="Edit">
                                <Setter Property="Button.Visibility" Value="Collapsed"></Setter>
                            </DataTrigger>
                        </Style.Triggers>
                    </Style>
                </Button.Style>
            </Button>
        </DockPanel> 
```

应用于按钮的样式不尊重样式资源中定义的样式中设置的边距。为什么？

# .net - 复杂的DTO结构

> ID：11667377
> 
> 赞同：3
> 
> 时间：2012-07-26T10:28:46.323
> 
> 标签：.net, design-patterns, domain-driven-design, data-transfer-objects

我已经在 SO、书籍和文章中阅读了很多关于 DTO 的信息，但我不确定我是否正确。

我们在项目中使用 DTO，因此它们几乎只是域对象的属性。因此，我们需要有一个复杂的 DTO 结构。有一些类相互扩展，组合，聚合等。

问题更笼统。

从另一个 dto 继承一个 dto 或在另一个 dto 中引用一个 dto 是否正确？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-26T13:00:19.247

> 从另一个继承 DTO 是否正确

如果它们具有共同的属性，那为什么不呢？

> 在 DTO 中有对另一个 DTO 的引用

这绝对没有错，请考虑以下几点：

```
public class UserDto
{
    public string Id { get; set; }
    public string Username { get; set; }
    public string Email { get; set; }
    public AddressDto Address { get; set; }
}

public class AddressDto
{
    public string AddressLine1 { get; set; }
    public string AddressLine2 { get; set; }
    public string City { get; set; }
} 
```

请记住，DTO 只是*愚蠢*的对象，即它们没有任何行为（除了获取/设置自己的数据）。从架构的角度来看，相同的规则适用于 DTO，就像它们适用于标准类/对象一样，所以如果可以的话，没有理由不遵循相同的原则。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-04-29T18:07:27.557

DTO 用于层间通信。

我更喜欢简单的 DTO，因为它们主要用于告诉持久层，一般来说是数据访问对象，要存储什么。如果是这种情况，请不要选择复杂的 DTO。

如果 DTO 很复杂（即一个 DTO 具有另一个 DTO 作为属性），则 DAO 存储数据所需的复杂性更大。这与 DAO 作为与存储技术分离的方式的目标相冲突。

So, if a DTO needs to address another DTO, just use string ids as attributes and keep a simple DAO for each DTO. Logic to handle interconnected DTOs should go to the Service Application or Business Object making use of the DAOs. This way, you increase reuse of the code.

# .net - 是否可以以这样的方式定义 POCO，当我设置标识列值时它会使用它，而当我不使用它时，它会自动递增？

> ID：11667378
> 
> 赞同：0
> 
> 时间：2012-07-26T10:28:49.920
> 
> 标签：.net, entity-framework, ef-code-first

我正在定义 POCO，与 Entity Framework 4.0 的 Code First 功能一起使用。

我的部分数据来自外部源，对于这些数据，我需要保持标识列的值与外部源的相同，有时我需要自己设置 ID。但是对于相同的实体，我有时没有 Id 并且想要类似自动增量的行为。

是否可以以这样的方式定义 POCO，即当我设置它会使用它的值时，当我不设置它时，它会自动递增？根据[this mySQL forum answer](http://forums.devshed.com/mysql-help-4/identity-insert-286989.html) mySQL应该可以很好地处理这种情况，但似乎实体框架不能......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T11:33:58.000

我认为您正在寻找的是身份插入。

检查此链接：[使用 IDENTITY_INSERT 和 EF4](https://stackoverflow.com/questions/3332003/using-identity-insert-with-ef4)

至于以这种方式定义 POCO，它会自动知道您的意图是什么——我认为这是不可能的。在进行插入时，您必须明确设置。

我要做的是对带有 EF 的表运行原始 SQL，在其中设置 Identity Insert = ON，然后在其中插入一些行，然后将其重新设置为关闭。

请记住，您的自动递增 ID 最终可能最终具有与您在手动插入中使用的值相同的值，这实际上会破坏您的程序。

最好的问候，拉里

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T11:46:49.097

继 Lari 的回答之后，我建议编写一个存储过程，将 identity_insert 设置为打开，插入记录，然后再关闭。

然后我将其作为函数导入导入，然后在实体类型本身的扩展方法中使用它，或者只是作为对象上下文中的函数。

这样你就可以标准：

```
var user = new User("John"); 
entities.Add(user);
entities.SaveChanges(); 
```

键入 thing，当您想使用自动递增数字时，然后使用以下内容：

```
entities.CreateUser("John"); // This would be the SP 
```

这样你就可以有条件地使用一种方法或另一种方法。它不是自动的，但可以让您使用其中任何一个。

# android - 如何处理 SOAP 请求正文中的多个标签

> ID：11667381
> 
> 赞同：1
> 
> 时间：2012-07-26T10:29:14.787
> 
> 标签：android, soap, android-ksoap2

我在我的应用程序中使用 SOAP Webservice。我面临的问题是，SOAP 请求正文中有一个额外的标签。因此，我收到 SOAP 错误错误“SoapFault - faultcode: 'soap:Server' faultstring: 'Server was unable to process request.---> Object reference not set to an instance of an object.' faultactor：'null' 详细信息：org.kxml2.kdom.Node@40516ce8"。

这是 SOAP 请求....

```
POST /appws.asmx HTTP/1.1
Host: www.xxxxxx.com
Content-Type: text/xml; charset=utf-8
Content-Length: length
SOAPAction: "http://xxxxxxx.com/saveCustomerProfile"

<?xml version="1.0" encoding="utf-8"?>
<soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/">
<soap:Body>
<saveCustomerProfile xmlns="http://xxxxxx.com/">
  <customerProfile>
    <id>long</id>
    <name>string</name>
    <lastName>string</lastName>
    <phoneNumber>string</phoneNumber>
    <zipCode>string</zipCode>
    <email>string</email>
    <birthday>string</birthday>
    <gender>string</gender>
    <emailExclusiveSavings>boolean</emailExclusiveSavings>
    <textExclusiveSavings>boolean</textExclusiveSavings>
  </customerProfile>
</saveCustomerProfile>
</soap:Body>
</soap:Envelope> 
```

这是我用来调用此网络服务的代码

```
 SoapObject request = new SoapObject(NAMESPACE, "saveCustomerProfile");
    request.addProperty("id", 0);
            request.addProperty("name","aaaaa");
            request.addProperty("lastName","bbbbbb");
            request.addProperty("phoneNumber", "1234567890");
            request.addProperty("zipCode", "1234");
            request.addProperty("email", "123@gmail.com");
            request.addProperty("birthday", "02/02/2011");
            request.addProperty("gender", "male");

      request.addProperty("emailExclusiveSavings","true");
  request.addProperty("textExclusiveSavings", "false");

      SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(
            SoapEnvelope.VER11);
    envelope.dotNet = true;
    envelope.setOutputSoapObject(request);

    HttpTransportSE httpTransport = new HttpTransportSE(URL);
            httpTransport.call(SOAP_ACTION, envelope);
            System.out.println("response "+envelope.getResponse()); 
```

我发现问题出在哪里。

```
 <saveCustomerProfile xmlns="http://xxxxxx.com/">
     <customerProfile> 
```

通常只有一个主标签会出现在 SOAP 主体中，这里我有两个和 . 我不知道如何处理它。我已经检查了其他一些 SOAP Web 服务，它们都在使用相同的代码。请帮我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T10:47:19.253

请参阅本[***教程***](http://www.helloandroid.com/tutorials/using-ksoap2-android-and-parsing-output-data)..可能对您有所帮助：

# .net - 目标上的未映射字段设置为空

> ID：11667383
> 
> 赞同：0
> 
> 时间：2012-07-26T10:29:22.107
> 
> 标签：.net, automapper, automapper-2

我正在使用 Automapper 来映射两个对象。

我在目的地有字段 VehicleModel 有一些默认值。我在源中没有此目标字段的映射。所以我没有映射它。映射完成后，我的默认值在目的地设置为空值。数据对象如下所示。

```
public partial class Source
{

private Car[] cars;

public Car[] Cars
{
    get { return this.cars; }
    set { this.cars = value; }
}
}

public partial class Destination
{
private OutputData output;

public OutputData Output
{            
    get {  return this.output; }
    set {  this.output= value; }
}   
}

public class OutputData
{
private List<Cars> cars;
private string vehicleModel;

public Car[] Cars
{
    get { return this.cars; }
    set { this.cars = value; }
}
public string VehicleModel
{            
    get {  return this.vehicleModel; }
    set {  this.vehicleModel= value; }
}
} 
```

Source 和 OutputData 之间的映射。

```
Mapper.CreateMap<Source, OutputData>();
Mapper.CreateMap<Source, Destination>().ForMember( dest => dest.Output, input => 
    input.MapFrom(s=>Mapper.Map<Source, OutputData>(s))); 
```

如何避免这种行为。

提前致谢。桑迪普

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T23:55:28.813

I have modified the code to make it compilable. Correct if something is wrong.

```
public class Car
{
    public string Brand {get;set;}
}

public partial class Source
{
    private Car[] cars;

    public Car[] Cars
    {
        get { return this.cars; }
        set { this.cars = value; }
    }
}

public partial class Destination
{
    private OutputData output;

    public OutputData Output
    {            
        get {  return this.output; }
        set {  this.output= value; }
    }   
}

public class OutputData
{
    private List<Car> cars;
    private string vehicleModel = "DEFAULTMODEL";

    public Car[] Cars
    {
        get { return cars.ToArray(); }
        set { this.cars = value.ToList(); }
    }
    public string VehicleModel
    {            
        get {  return this.vehicleModel; }
        set {  this.vehicleModel= value; }
    }
} 
```

*Note: I added default model.*

With you configuration and above code the following mapping works as you expected:

```
var res = Mapper.Map<Source, Destination>(new Source { Cars = new Car[]{ new Car{ Brand = "BMW" }}}); 
```

So looks like you some important piece of code is not provided.

# c++ - 使用 MinGW 静态链接到 Windows 上的 libarchive

> ID：11667387
> 
> 赞同：7
> 
> 时间：2012-07-26T10:29:39.520
> 
> 标签：c++, dll, mingw, shared-libraries, static-libraries

我在我的项目中使用 libarchive 已经有一段时间了，它工作得很好，目前我正在动态链接到它，所以在 Windows 上，libarchive.dll 文件必须出现在系统上。我现在想静态链接到库，所以我不必费心分发 DLL，但我在尝试实现这一点时遇到了真正的麻烦！

目前，在我的make文件中，我有这样的东西： -Lpath/to//libarchive/ -larchive

这有效，但它确实是一个动态链接。我不知道如何强制执行静态链接。

我可以看到在 libarchive 目录中有两个*a*文件，libarchive.dll.a 和 libarchive_static.a。我想我想链接到 libarchive_static.a 但我似乎无法指定这一点，在 make 文件中执行 -larchive_static 会导致链接器错误。

我的印象是windows下的静态库是lib文件，但是当我构建libarchive时我没有得到这样的文件类型。

如何从 libarchive 制作 .lib 文件。*另外，作为一个额外的问题， a*文件和*lib*文件有什么区别？

**更新**

要静态链接到 libarchive，您的 make 库命令应包含：

-Lpath/to//libarchive/ -larchive_static

这将链接到 libarchive_static.a 文件。但是，您还需要在代码中定义 LIBARCHIVE_STATIC。

现在的问题是 libarchive 依赖于 bzip2 库（以及其他库），如果您没有它们的静态构建，您将收到链接器错误，例如：

未定义对“BZ2_bzCompressInit”的引用

在 libarchive 命令*之后*，您需要依赖库的静态构建和与链接器类似的命令：

-Lpath/to/bzip2/ -lbzip2

您可以从源代码构建 bzip2，也可以通过简单的方法从 Gnu32Win 项目中获取预构建的二进制文件：http: [//gnuwin32.sourceforge.net/packages.html](http://gnuwin32.sourceforge.net/packages.html)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-26T10:40:04.430

只需`libarchive_static.a`明确添加到您的链接命令。

```
gcc -o YourApp.exe $(OBJS) path/to/libarchive_static.a $(OtherLibs) 
```

“.lib”文件因编译器而异（Borland、Microsoft 等），“.a”是 UNIX`ar`工具的旧“归档”格式。它现在仅用于捆绑静态库。

> > 目前，在我的制作文件中，我有一些东西......这有效，但它有一个动态链接

.a 文件实际上包含一些用于动态链接到 .dll 文件的代码，而不是 libarchive 本身。在启动时分配指向函数的指针并完成动态链接。

# c# - 在动态类型上制作自定义 LINQ 扩展

> ID：11667388
> 
> 赞同：0
> 
> 时间：2012-07-26T10:29:41.740
> 
> 标签：c#, c#-4.0, dynamic, extension-methods

我有以下代码：

```
dynamic users = BLClass.MYBLMethod();
List<string> usernames = BLClass.MYBLSecondMethod();
foreach (string username in usernames)
{
    users[username].test();
} 
```

我正在从 BL 方法中获取用户（动态类型）。接下来从其他方法我正在获取用户名列表。之后，我在用户名列表上应用 foreach。在这个循环中，我调用一个方法“测试”。这个“测试”方法将在我的 JavaScript 代码中使用。现在我的问题是**如何将上面的代码转换为这样的扩展方法**：

```
BLClass.SomeExtensionMethod(methodname) 
```

即我的 SomeExtensionMethod 将涵盖以下逻辑：

```
dynamic users = BLClass.MYBLMethod();
List<string> usernames = BLClass.MYBLSecondMethod();
foreach (string username in usernames)
{
    users[username].methodname();
} 
```

你能帮我做这个扩展吗？

编辑：

我的目标是拥有**BLClass.SomeExtensionMethod(methodname)**。我将在其中传递方法名称，并且内部代码（在扩展内）应该调用此代码：

```
users[username].methodname(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T11:14:46.327

我不确切知道您的类型是什么样的，但您可以使用[`GetMethod()`](http://msdn.microsoft.com/en-us/library/4s2kzbw8.aspx).

```
public static class Extensions
{
    public static void SomeExtensionMethod(this BLClass blclass, string methodname)
    {
        dynamic users = blclass.MYBLMethod();
        List<string> usernames = blclass.MYBLSecondMethod();
        foreach (string username in usernames)
        {
            var user = users[username];
            user.GetType().GetMethod(methodname).Invoke(user, null);
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-08-06T14:15:09.387

不知道为什么你需要这样做......

```
public class 1 {
    public void method(){
        //do stuff
    }
}

public class 2 {
    public void method2(){
        dynamic users = BLClass.MYBLMethod();
        List<string> usernames = BLClass.MYBLSecondMethod();
        foreach (string username in usernames)
        {
             1.method(users[username]);
         }
    }
 } 
```

这会更简单吗？

# cocos2d-android - Cocos2d 中的自定义字体

> ID：11667392
> 
> 赞同：4
> 
> 时间：2012-07-26T10:30:18.697
> 
> 标签：cocos2d-android

标签字体不起作用，我在资产文件夹下添加了字体文件夹。

```
pop = CCLabel.makeLabel("Eggs left: ", "fonts/comic.ttf", 14); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-28T02:34:16.117

```
CCLabel labelMainMenu = CCLabel.makeLabel("OPTIONS MENU", "Fonts/JimboStd-Regular.otf", 20); 
```

我想你忘了提到浮动的字体大小。并看到字体文件夹是在assets中创建的...

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-08T09:17:22.780

发生这种情况是因为 android-cocos2d.jar.. 我已经用新的 jar 替换了，现在它给了我更改的字体..

# coldfusion - 自上而下的coldfusion网络服务

> ID：11667393
> 
> 赞同：0
> 
> 时间：2012-07-26T10:30:23.557
> 
> 标签：coldfusion, wsdl

是否有任何可能性（特殊方法或 wsdl2cfc 实用程序）生成具有复杂输入输出参数和基于指定 WSDL 的自定义失败消息的 Web 服务（或它的存根）？我已经阅读了很多描述如何使用这种类型的 Web 服务的文章，但我还没有找到任何描述如何实现它们的文章。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T16:10:07.313

[您可以使用wsdlfile 属性](http://livedocs.adobe.com/coldfusion/8/htmldocs/help.html?content=Tags_c_10.html)指定 CFC 呈现的 WSDL ，因此您当然可以呈现现有的 WSDL，如果您有的话。在调用服务时让 CF 正确映射事物是另一回事。我将首先获取您拥有的 WSDL，让 CFC 使用它并实现不带指定参数的正确方法名称，然后 CFDUMPing 参数结构以查看 CF 得到了什么。

通过使用具有正确名称和 CFPROPERTY 标记的 CFC，您可以做很多事情来呈现您想要的 Web 服务。[您还可以](http://tjordahl.blogspot.co.uk/2008/04/array-types-in-coldfusion-web-services.html)在 CFARGUMENT 中指定 type="foo[]" 和生成的 WSDL 将期望传入一个 FOO 对象列表。

我没有通过 Web 服务返回自定义错误的经验，您可能必须使用 CFTHROW 从 Web 服务中执行的操作

我假设您正在尝试实现已经存在的服务？

# java - 使用 Java 的 Http POST 请求执行 Jelly 脚本

> ID：11667396
> 
> 赞同：0
> 
> 时间：2012-07-26T10:30:27.587
> 
> 标签：java, jira, jelly

我对用户名和密码进行了编码，并创建了登录 JIRA 应用程序并使用 Java 执行 Jelly 脚本的 URL。这确实有效。但问题是，通过这个 URL，我能够登录到 JIRA 并转到 JellyRunner 并将我的脚本粘贴到 textarea 中。但无法执行。你能告诉我如何使用 URL 执行 JellyScript。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-14T10:03:13.013

我使用 Java Http Post 方法将所有数据直接发布到所需的页面。因为我被卡住了，所以我没有使用 JellyScript。抱歉，没有提供完整的详细信息..:):)

谢谢。

# c++ - 如何调用模板类的析构函数？

> ID：11667401
> 
> 赞同：1
> 
> 时间：2012-07-26T10:30:48.553
> 
> 标签：c++, class, destructor, eigen

我正在使用库[Eigen](http://eigen.tuxfamily.org/index.php?title=Main_Page)的 SparseMatrix 类。要创建一个，我使用：

```
typedef Eigen::SparseMatrix<float>  matrix;
matrix M (10,10); 
```

我怎样才能调用这个对象的析构函数？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-26T10:33:49.143

你不需要。您的对象正在堆栈上创建，超出范围时将自动删除。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-07-26T10:38:17.737

> (...) 因为我需要在一个循环中多次重新初始化同一个稀疏矩阵。我希望每次由其析构函数破坏矩阵将导致最小的内存泄漏。

清晰、明显、最安全且可能最有效的解决方案是只使用*正常*的C++ 语义。“重新初始化”是通过赋值完成的。

```
typedef Eigen::SparseMatrix<float>  matrix;
matrix M (10,10);
M = matrix(12, 12); 
```

在循环体内声明矩阵，它会在每次循环迭代时正确初始化和销毁​​。

哦，假设一个没有错误的库，在所有这些情况下内存泄漏*为零。*只是不要折腾`new`，不要玩火（比如直接调用析构函数）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-26T10:35:31.197

您不直接调用析构函数；当此变量超出范围时将调用它。

```
void myFunction()
{
    matrix A (10,10);
    ... some code
    {
        matrix B (10,10);
    } // destructor of B is called here.
    ... some code
}// destructor of A is called here. 
```

这是代码中自动变量的行为。调用析构函数的另一种方法是，如果您已使用 动态分配对象`new`，并使用 销毁该对象`delete`：

```
void myFunction()
{
    matrix* A = new matrix(10,10);
    ... some code
    {
        matrix* B = new matrix(10,10);
        delete B;// destructor of B is called
    }
    ... some code
    delete A;// destructor of A is called
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-26T11:11:54.493

我知道只有一种情况需要显式调用析构函数：使用placement new时，例如

```
class Foo { /* lots of stuff here */ };

char foo[sizeof(Foo)];
new (&foo[0]) Foo();
/* ... */
reinterpret_cast<Foo *>(&foo[0])->~Foo(); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-26T10:49:54.537

虽然我真的不确定你为什么要这样做，但这很容易：

```
M.~SparseMatrix(); 
```

通常，您可以在任何类上显式调用析构函数，只需像调用任何其他函数一样调用它。模板类也不例外。

# extjs - Extjs 属性网格

> ID：11667406
> 
> 赞同：1
> 
> 时间：2012-07-26T10:31:14.427
> 
> 标签：extjs, propertygrid

我需要在 extjs 属性网格中显示特定属性的复选框。从 api doc 可以看出，这可以通过属性网格的 customEditor 属性来实现。

```
My property store: [{name: 'xxx', type: 'boolean', value:'false'},
           {name: 'yyy', type: 'checkbox', value: 'false'}] 
```

在这里，我需要显示名称“yyy”行的复选框。有可能这样做吗？当我使用如下自定义编辑器时，

```
Ext.grid.propertyGrid({
  customEditor: {
    'yyy': new Ext.grid.GridEditor(new Ext.form.checkbox())
  }
}) 
```

复选框以编辑模式显示。但是在正常模式下会显示一个字符串（真/假）。我还需要在正常模式下显示复选框。

请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T07:59:30.043

这可以使用 propertyGrid 的 customRenderers 属性来实现，

```
customRenderers: {
  yyy: function(value) {
    return "<input type='checkbox' name='yyy'>"
  }

} 
```

使用上述属性，复选框也将以正常模式显示。

# django - 具有多对多字段的查询

> ID：11667411
> 
> 赞同：0
> 
> 时间：2012-07-26T10:31:40.590
> 
> 标签：django, many-to-many

我需要查看没有任何组的用户。我试图进行查询， `.except`但由于许多字段而失败...

我的模型：

```
class UserProfile(models.Model):
    user = models.OneToOneField(User, unique=True)
    courses_list = models.ManyToManyField('Course', blank=True)
    group_list = models.ManyToManyField('Group', blank=True)

class Group(models.Model):
    name = models.CharField(max_length=30)
    assignment = models.ForeignKey(Assignment)
    members = models.ManyToManyField(UserProfile, through=UserProfile.group_list.through, blank=True)

class Assignment (models.Model):
    course = models.ForeignKey(Course)

class Course(models.Model):
    subscribed = models.ManyToManyField(UserProfile, through= UserProfile.courses_list.through, blank=True) 
```

所以，我需要选择订阅了`assignment.course.subscribed.all`没有任何组的作业（全部发送）的用户（问题是我只需要处理与此作业相关的组）

我试过`groupless = detailedassignment.course.subscribed.exclude(username = group_list.filter(assignment=detailedassignment).members.username.all())`了，但它根本不起作用（我认为当我看到代码时这是正常的..）

**编辑 ：**

我以某种方式删除了关系，现在我的模型是：

```
My models :

class UserProfile(models.Model):
    user = models.OneToOneField(User, unique=True)

class Group(models.Model):
    name = models.CharField(max_length=30)
    assignment = models.ForeignKey(Assignment)
    members = models.ManyToManyField(UserProfile, blank=True)

class Assignment (models.Model):
    course = models.ForeignKey(Course)

class Course(models.Model):
    subscribed = models.ManyToManyField(UserProfile, blank=True) 
```

我试过使用：

```
groupless = detailedassignment.course.subscribed.exclude(user__username__in = Group.objects.filter(assignment=detailedassignment).members.objects.values_list('user__username')) 
```

但是我有`'QuerySet' object has no attribute 'members'`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T11:55:35.737

你忘记了`user`参考。因此，如果我正确地解释您，您会想要-

```
groupless = detailedassignment.course.subscribed.exclude(user__username__in = group_list.filter(assignment=detailedassignment).members.objects.values_list('user__username')) 
```

或者试试这个 -

```
groupless = UserProfile.objects.filter(courses_list__assignment = detailedassignment).exclude(group_list__assignment=detailedassignment) 
```

顺便说一句，您的模型设计看起来有些倾斜，相同的参考相互交叉。并且不需要添加反向引用（如模型“课程”中）。Django 为您提供了向后引用的功能。请参阅[https://docs.djangoproject.com/en/dev/topics/db/queries/#following-relationships-backward](https://docs.djangoproject.com/en/dev/topics/db/queries/#following-relationships-backward)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T16:17:50.060

因此，当向后引用被删除时，我`related_name`在 ManyToManyField 和 Rahul 的回答中使用了 a 并稍作编辑：

```
groupless = User.objects.filter(course_list__assignment=detailedassignment).exclude(group_list__assignment=detailedassignment) 
```

如果有用的话.. :D

# c# - 无法安装 msi 包，要求 .Net framework 4

> ID：11667415
> 
> 赞同：10
> 
> 时间：2012-07-26T10:32:00.257
> 
> 标签：c#, .net, msdeploy

我最近将我的系统升级到了 Windows 7 Enterprise。我为在 VS2010 中使用 .Net framework 3.5 构建的控制台应用程序创建了一个安装包。但是当我尝试在 XP 机器上安装 msi 时，它给了我需要 .Net Framework 4 的警告。

我尝试解决错误的步骤：

1.  右键单击项目并在应用程序选项卡中将目标框架设置为 .Net Framework 3.5。
2.  右键单击项目，选择发布 > 先决条件 > a) 选择 .Net Framework 3.5 SP1 和 b) Windows Installer 3.1
3.  右键单击安装项目，先决条件 > a) 选定的 .Net Framework 3.5 SP1 和 b) Windows Installer 3.1
4.  重建安装项目以创建 msi。

我上面的所有步骤都是徒劳的，因为当我在 XP 机器上安装 msi 时仍然收到警告。

有没有人有更好的主意来解决这个问题？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-27T07:18:33.500

我想我已经找到了解决这个问题的方法。

右键单击设置项目 > 查看 > 启动条件。这边已经是.Net Framework了，右键>属性，把版本改成.Net Framework 3.5。它解决了这个问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T10:51:42.507

在您的 XP 机器上安装完整的 .NET Framework 4

[http://www.microsoft.com/en-us/download/details.aspx?id=17851](http://www.microsoft.com/en-us/download/details.aspx?id=17851)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-26T14:38:22.410

你需要消除一些东西。尝试以上述方式构建一个没有依赖关系的“空白”msi 项目，看看生成的 MSI 是否需要目标机器上的 .net4？

其次，**您收到什么警告需要 .net4？**它只是将您重定向到通用 .NET 下载页面的帮助链接吗？如果是这样，您可以将此链接更改为专门指向 .NET3.5 SP1。

# c# - 用 C# 创建 Word 文档？

> ID：11667417
> 
> 赞同：0
> 
> 时间：2012-07-26T10:32:09.207
> 
> 标签：c#, reference, ms-word

我正在尝试在 Visual Studio 2008 中使用 C# 创建 Word 文档，这是我的代码：

```
using Word = Microsoft.Office.Interop.Word;

Word.Application oWord = new Word.Application();
oWord.Visible = true; 
```

Visual Studio 向我显示错误：

> 类、结构或接口成员声明中的标记“=”无效

为什么会这样？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-26T10:37:31.470

您的代码必须在方法内部，而不是在方法之外的类定义中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T10:51:56.423

它应该看起来像这样：

```
using Word = Microsoft.Office.Interop.Word;

namespace TestApp
{
    public partial class MainWindow : Window
    {

        public MainWindow()
        {
            Word.Application oWord = new Word.Application();
            oWord.Visible = true;
        }

    }
} 
```

# c# - 如何从解决方案位置读取 XML 文件并将 xml 文件与 dll 绑定？

> ID：11667423
> 
> 赞同：0
> 
> 时间：2012-07-26T10:32:25.123
> 
> 标签：c#

我正在创建一个类库，并且我在解决方案目录中创建了一个名为 config 的文件夹。我在文件夹中放置了一个 xml。

如何在我的类函数中加载 xml 文件？

我试过如下，它没有加载

```
 XmlDocument contentxml = new XmlDocument();
        String configxmlfile = System.AppDomain.CurrentDomain.BaseDirectory.ToString() + "Config\\instruction.xml";
        contentxml.Load(configxmlfile); 
```

我想将 xml 文件与 dll 绑定，因为我要在另一个应用程序中上传 dll，我将从 dll 调用我的类，我的类将在那里查找 xml 文件信息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T11:02:01.163

为了将 xml 嵌入到程序集中

```
1\. Right click the xml file and Select properties
2\. In the Properties Pane Set the BuildAction as Embeded resource
So this Xml becomes a embeded resource when the application is compiled 
```

然后您可以通过以下代码从程序集中读取xml

```
 System.Reflection.Assembly _assembly = Assembly.GetExecutingAssembly();
   System.IO.Stream _xmlStream = _assembly.GetManifestResourceStream("[[YourNamespace]].[[XMLFileName.xml]]");
   System.IO.StreamReader _textStreamReader = new System.IO.StreamReader(_xmlStream);
   string xml = _textStreamReader.ReadToEnd(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T11:00:41.880

例如，您可以将“资源文件”添加到您的项目中，并将 xml 添加到此资源文件（Resources.resx）中。

以下是获取 xml 内容的一些代码（在我的示例中为 config.xml）：

```
public class Class1
{
    public XDocument GetXml()
    {
        return XDocument.Parse(Resources.config);
    }
} 
```

现在，在另一个项目中：

```
MyClassLibrary.Class1 c = new MyClassLibrary.Class1();
var xml = c.GetXml(); 
```

# mysql - SQL 在单个列中返回所有相关行

> ID：11667424
> 
> 赞同：4
> 
> 时间：2012-07-26T10:32:26.887
> 
> 标签：mysql, sql, relational-database

我在 SQL Server 中看到了对递归的引用，但我使用的是 MySQL，并且要求结果在单个列中。如果我有一个关系表：

```
itemID1 | itemiD2
---------------
  1     |   2
  1     |   3
  4     |   5 
```

如何在任一列中选择与单个 ID 相关的所有 ID？例如：

1 ==> 2,3

3 ==> 1,2

我尝试了自联接，但无法在单个列中获取所有相关 ID。如果对此有更好的架构，那么更改表还为时不晚。

谢谢你。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-26T11:21:19.003

请尝试以下查询：

```
select
    itemID1, group_concat(cast(itemID2 as char) separator ',')
from
(
    select itemID1, itemID2 from st where itemID1 = :ID
    union 
    select itemID2, itemID1 from st where itemID2 = :ID
    union
    select s1.itemID2, s2.itemID2 from st as s1 inner join st as s2 on s1.itemID1 = s2.itemID1
    where s1.itemID2 = :ID
    union
    select s1.itemID1, s2.itemID1 from st as s1 inner join st as s2 on s1.itemID2 = s2.itemID2
    where s1.itemID1 = :ID
) as subquery
where itemID1 <> itemID2
group by itemID1 
```

通过这种方式，您可以选择两种方式的关系（`union`提供独特性）以及连接项目之间的关系（也可以两种方式）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T11:04:53.513

问题的部分答案。这不是解决递归而是传递性。

```
select itemID1, itemID2
from ((select itemID1, itemID2
       from t
      ) union all
      (select itemID2, itemID1
       from t
      )
     ) t
group by itemID1, itemID2 
```

要将它们作为列表获取：

```
select itemID1, group_concat(distinct cast(itemID2 as varchar(32)) separator ',')
from ((select itemID1, itemID2
       from t
      ) union all
      (select itemID2, itemID1
       from t
      )
     ) t
group by itemID1, itemID2 
```

# ruby - Rails：控制 url_for 中查询参数的顺序？

> ID：11667426
> 
> 赞同：6
> 
> 时间：2012-07-26T10:32:30.950
> 
> 标签：ruby, ruby-on-rails-3

我想生成一个 URL，其中“p = 1”查询参数出现在 URL 的末尾，例如：

```
/path?foo=X&bar=Y&p=1 
```

是否可以通过以下方式生成 URL 时控制查询参数的顺序：

```
url_for(params.merge({ p: page_num })) 
```

?

**更新：**

我在下面尝试[了 ChuckE 的](https://stackoverflow.com/users/1396395/chucke) [建议](https://stackoverflow.com/a/11668620/93995)。事实证明，在 Ruby 1.9 中，哈希已经排序，因此其中的代码`ActiveSupport::OrderedHash`实际上是无操作的。您可以使用 Ruby 1.9 验证是否保留了订单：

```
>> h = {one: 1, two: 2, three: 3 }
{:one=>1, :two=>2, :three=>3}
>> f = h.except(:one)
{:two=>2, :three=>3}
>> f[:one] = 1
1
>> f
{:two=>2, :three=>3, :one=>1} 
```

但是，`url_for` *仍然*将“p”参数放在首位。似乎任何潜在的解决方案都需要解决如何`url_for`迭代哈希。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-03T20:36:42.933

在进一步挖掘之后，我看到正在发生的事情`url_for`实际上是按字典顺序对参数进行排序，与它们在哈希中的插入顺序无关。显然，这样做是为了帮助缓存，因为 URL 参数通常用于页面缓存键。

简而言之，不打补丁是不行的`Hash`，具体来说，你需要重写`activesupport/core_ext/object/to_param.rb`，这样 Hash#to_param 就不会调用`.sort`返回值。

相关问题：[如何在 Rails link_to 中生成自定义排序查询字符串 URL？](https://stackoverflow.com/questions/6047402/how-to-generate-custom-sorted-query-string-url-in-rails-link-to).

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-26T11:47:49.257

第一个问题是：你为什么需要这样的东西？参数出现在 url 中的顺序不会影响服务器获取它们的方式，因为它们是基本的键/值关联。因此，无论参数出现在哪里，它都会被服务器识别。

尽管如此，要回答您的问题，是的，这是可能的。你只需要使用有序的哈希。它们可以通过积极的支持获得。

```
opts = OrderedHash.new
opts[:foo] = 'X'
opts[:bar] = 'Y'
opts[:p] = 1
your_helper_url(opts) 
```

应该为您解决问题。

# asp.net - 如何将 ListItemCollection 转换为 List（对象）

> ID：11667431
> 
> 赞同：2
> 
> 时间：2012-07-26T10:33:09.717
> 
> 标签：asp.net, vb.net

我已经定义了一个类

```
Public Class MyClass
 Public Type1 As Integer
 Public Type2 As float
End Class 
```

如何将 ListItemCollection 转换为 list(of MyClass) ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T10:35:54.317

```
Dim x As New List(of [MyClass])

For Each y as [MyClass] in ListItemCollectionInstance.Items

    if (y.Selected)
         x.Add(y)
Next y 
```

使用 Linq：

```
Dim selectedItems As List(Of [MyClass]) = ListItemCollectionInstance.Items.Cast(Of [MyClass])().Where(Function(itm) itm.Selected = True).ToList() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-26T11:08:22.547

VB.NET 中的`MyClass`is 关键字和`float`类型通过`Single`别名 (System.Single)表示

```
Public Class Item
   Public Type1 As Integer
   Public Type2 As Single
End Class 
```

我已经用*示例*数据构建了集合。

```
Dim cl As New ListItemCollection
cl.Add(New ListItem("1", "1.2"))
cl.Add(New ListItem("2", "2.3"))
cl.Add(New ListItem("3", "3.4"))

Dim lst = From ele In cl Select New  _
                    Item With
                     {
                         .Type1 = Integer.Parse(ele.Text),
                         .Type2 = Single.Parse(ele.Value)
                     }

For Each ele As Item In lst
    Response.Write("<br/>  " & ele.Type1 & " " & ele.Type2)
Next 
```

# git - 具有功能分支和团队工作的 Git 工作流

> ID：11667434
> 
> 赞同：0
> 
> 时间：2012-07-26T10:33:23.140
> 
> 标签：git, workflow, branch

我最近一直在研究 git 工作流程，哪个最适合我们的团队。

**我们可以使用的最好**（或最好的）**git 工作流程是什么？**此工作流程应尊重以下部分/大部分/所有要点：

*   2 个团队将使用 git（每个大约 8 人），他们都在同一个应用程序上工作。每个团队可能有也可能没有自己的私有存储库。
*   该应用程序有多个版本。版本（n+1）的开发开始可能在版本（n）发布之前开始。版本 (n+1) 上的开发不应包含在版本 (n) 中
*   客户可能会在最后一刻决定不将 Feature x 包含在前一个月开发的下一个版本中。
*   项目历史应该很容易理解。

我的工作流程理念：与可在此处找到的工作流程略有不同： http: [//nvie.com/posts/a-successful-git-branching-model/](http://nvie.com/posts/a-successful-git-branching-model/)

*   两个团队的一个中央存储库，可通过 SSH 使用。
*   分行主稳定。
*   没有创建分支开发。相反，应用程序的每个版本都有自己的分支，团队在这些分支上进行开发。版本 (n+1) 的分支是从版本 (n) 的分支创建的。因此，分支 (n+1) 上可能会出现新的开发人员，而分支 (n) 上可能会出现错误修复。
*   为每个新功能和错误修复创建一个分支，就像在模型中一样。
*   两个团队只有一个中央存储库，因为为每个团队使用两个主要存储库似乎并不容易。**每个团队有两个存储库的工作流程是什么？值得吗？**
*   大多数（如果不是全部）合并不应该快进，因为如果发生快进，似乎没有办法阻止 Feature x 被包含在内。
*   发布时，将版本 (n) 合并到 master 中，并标记

**另外，这样的策略不会有太多的分支吗？**发布后很容易有大约 30~ 个错误修复。如果每个 bug 修复都建立分支，那么很快就会有很多分支。有什么办法可以避免这种情况吗？

补丁工作流程是个好主意吗？会是什么呢？我认为每个错误修复和功能都可以有自己的补丁，让客户能够选择他想要的补丁。

感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T12:37:28.617

Git 工作流程，例如分支。您实际上无法阻止人们拥有私有存储库和分支（尝试像这样控制它们是一个非常愚蠢的想法：您将失去分布式 VCS 的最强点）。您可以控制（仅！）的是您可以直接访问的存储库：您可以阻止其他人将他们的更改推送到其中，甚至完全关闭访问权限。在严格控制的环境中，通常不允许直接推送：更改由专门的团队成员从其他人那里拉取。经过测试，然后推动整个团队使用。

对于您要求的简单工作流程，Pro Git 书中描述的策略看起来很合适： http: [//git-scm.com/book/en/Git-Branching-Branching-Workflows](http://git-scm.com/book/en/Git-Branching-Branching-Workflows)

请参阅`git cherry-pick`最后*一分钟，长期完成*的功能。`gitk`用于历史浏览（实际上有很多图形工具）。公共开发和发布分支就是这样，公共分支，可能有自己的维护者。

您可能想查看由**GitHub**等大型 Git 托管站点提供的工作流程。这些有类似的开源实现（如 Android 项目的 Gerrit）。

# cakephp - Cakephp testAction() 没有向控制器发送 json 有效负载

> ID：11667435
> 
> 赞同：1
> 
> 时间：2012-07-26T10:33:33.150
> 
> 标签：cakephp, testing

我正在尝试测试一个接受 json 有效负载的控制器函数。

根据 testAction() 的文档，这可以通过将 $options['data'] 设置为适当的字符串来完成。它不适合我。请参阅此处引用的文档：http: [//api20.cakephp.org/class/controller-test-case](http://api20.cakephp.org/class/controller-test-case)（请向下滚动 testAction() 部分）。

这是我的测试用例。

```
public function testCreate(){
    //Some code here
    $this->testAction('/shippingbatches/create', array('data' => '[3,6]', 'method' => 'post'));
    //Some more code here
} 
```

这是我的控制器功能

```
public function create(){        
    debug($this->request); //This debug shows me an empty array in $this->request->data
    ob_flush();
    $order_ids = json_decode($this->request->data);
    //Some more code here
} 
```

控制器函数的第一行在 $this->request->data 中显示了一个空数组。如果从 testAction() 传递的“数据”是一个实际的数组，它就很好。但不是当它设置为字符串时（与文档中所说的不同）。

这是调试的输出。

```
object(Mock_CakeRequest_ef4431a5) {
    params => array(
        'plugin' => null,
        'controller' => 'shippingbatches',
        'action' => 'create',
        'named' => array(),
        'pass' => array(),
        'return' => (int) 1,
        'bare' => (int) 1,
        'requested' => (int) 1
    )
    data => array()
    query => array(
        'case' => 'Controller\ShippingBatchesController'
    )
    url => 'shippingbatches/create'
    base => ''
    webroot => '/'
    here => '/shippingbatches/create'
} 
```

请帮忙。

古普雷特

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T14:25:56.373

像这样传递数据时，您必须使用[`CakeRequest::input()`](http://api20.cakephp.org/class/cake-request#method-CakeRequestinput).

```
public function create() {
    $json = $this->request->input('json_decode', true);  
    debug($json);
} 
```

我应该注意到，我是通过阅读 Cake 的[`ControllerTestCase::testAction`](https://github.com/cakephp/cakephp/blob/master/lib/Cake/Test/Case/TestSuite/ControllerTestCaseTest.php#L435). 阅读测试用例可以让您深入了解 Cake 的内部工作原理，并为您提供编写测试的提示。

# java - 布局中的 Android 微调器

> ID：11667436
> 
> 赞同：1
> 
> 时间：2012-07-26T10:33:33.897
> 
> 标签：java, android, android-layout, spinner

我正在尝试填充微调器，但我的布局文件中似乎缺少某些内容

```
 ArrayAdapter<String> cuisines = new ArrayAdapter<String>(this, R.layout.spinner_view,
    getResources().getStringArray(R.array.cuisines)); 
```

我找不到 R.layout.spinner_view 并且只能假设我必须在我的布局文件中自己制作它。我怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-26T10:37:36.887

在 xml 文件中包含微调器：

```
<Spinner 
        android:id="@+id/spin"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"/> 
```

并在活动中：

```
Spinner spinner=(Spinner) findViewById(R.id.spin);
        ArrayAdapter<String> adapter=new ArrayAdapter<String>(YourActivity.this, android.R.layout.simple_spinner_item,R.array.cuisines);
        adapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
        spinner.setAdapter(adapter); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-26T10:35:42.467

利用`import com.companyname.product.R;`

**代替**

`import android.R;`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-26T10:35:57.040

如果要使用默认微调器视图加载，请使用，

```
ArrayAdapter<String> cuisines = new ArrayAdapter<String>(this, android.R.layout.simple_spinner_item,
    getResources().getStringArray(R.array.cuisines)); 
```

# android - LinearLayout内的ListView爆发（Android）

> ID：11667437
> 
> 赞同：0
> 
> 时间：2012-07-26T10:33:35.340
> 
> 标签：android, listview, android-linearlayout

已经为此苦苦挣扎了一段时间。我有一个由各种 LinearLayouts 组成的布局 XML，具有单独的权重。最终结果看起来像这样..

![主活动屏幕的图像](../Images/9470dfd2a0f49296662cbc4e5772a11e.png)

不要介意颜色，它只是为了查看断点。无论如何，在终端/原点等 LinearLayout 下方是一个使用自定义适配器填充的 ListView。数据加载正常，但随后 listView “突破”了 LinearLayout，并占据了大部分页面

![在此处输入图像描述](../Images/56bf82ae4688251f9c561c0a1d4b66a9.png)

（不要介意颜色，它只是为了查看断点..）

IE。它流过上面和下面的视图。

我的 XML 如下：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="vertical"
tools:ignore="HardcodedText" >

<RelativeLayout
    android:id="@+id/navigation"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:layout_weight="0.2"
    android:background="#FF0000"
    android:gravity="right" >

    <Button
        android:id="@+id/update"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_centerVertical="true"
        android:onClick="getFlightInfo"
        android:text="Refresh" />
</RelativeLayout>

<LinearLayout
    android:id="@+id/table_header"
    android:layout_width="match_parent"
    android:layout_height="0px"
    android:layout_weight="0.4"
    android:background="#FFFFFF"
    android:weightSum="1" >

    <TextView
        android:id="@+id/header_cell1"
        android:layout_width="0px"
        android:layout_height="fill_parent"
        android:layout_weight="@string/cell_1_weight"
        android:gravity="center_vertical"
        android:paddingLeft="5dp"
        android:paddingRight="12dp"
        android:text="@string/table_header_terminal"
        android:textSize="11dp" />

    <TextView
        android:id="@+id/header_cell2"
        android:layout_width="0px"
        android:layout_height="fill_parent"
        android:layout_weight="@string/cell_2_weight"
        android:gravity="center_vertical"
        android:paddingRight="12dp"
        android:text="@string/table_header_origin"
        android:textSize="11dp" />

    <TextView
        android:id="@+id/header_cell3"
        android:layout_width="0px"
        android:layout_height="fill_parent"
        android:layout_weight="@string/cell_3_weight"
        android:gravity="center_vertical"
        android:paddingRight="12dp"
        android:text="@string/table_header_flight"
        android:textSize="11dp" />

    <TextView
        android:id="@+id/header_cell4"
        android:layout_width="0px"
        android:layout_height="fill_parent"
        android:layout_weight="@string/cell_4_weight"
        android:gravity="center_vertical"
        android:paddingRight="12dp"
        android:text="@string/table_header_scheduled"
        android:textSize="11dp" />

    <TextView
        android:id="@+id/header_cell5"
        android:layout_width="0px"
        android:layout_height="fill_parent"
        android:layout_weight="@string/cell_5_weight"
        android:gravity="center_vertical"
        android:paddingRight="12dp"
        android:text="@string/table_header_status"
        android:textSize="11dp" />
</LinearLayout>

<LinearLayout
    android:id="@+id/table_list_view"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:layout_weight="3"
    android:background="#FFFFFF"
    android:orientation="vertical" >

    <ListView
        android:id="@+id/list_view"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" >
    </ListView>

</LinearLayout>

<LinearLayout
    android:id="@+id/filter"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:layout_weight="1"
    android:background="#00FF00" />

</LinearLayout> 
```

我可能错过了一些明显的东西，但对于我的生活，我看不到它。任何人都可以帮忙吗？

太感谢了..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T10:38:00.767

这是因为您保留了 LinearLayout 的高度（一个包装列表视图）“wrap_content”。将其大小固定到某个下垂可以解决您的问题。

然后将列表视图的高度设为“fill_parent”。

**编辑 ：**

试试这种方式：

...

```
<ListView
    android:id="@+id/list_view"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content" >
</ListView> 
```

在上面的两个布局中，您使用 0.2 和 0.4 作为权重，但在下面的两个布局中，您的用户 3 和 1 ...尝试以前的方式，看看是否可以帮助您。也尝试制作 LinearLayout 的高度（一个包装列表视图) 到 0dip。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-04-16T21:09:25.203

也许已经晚了，但我可以帮助别人。

```
<?xml version="1.0" encoding="utf-8"?>

<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent"

android:orientation="vertical">

<LinearLayout
    android:id="@+id/linearLayout1"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:background="#ff0000">

    <TextView
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:padding="20dp"
        android:text="Content 1" />

</LinearLayout>

<LinearLayout
    android:id="@+id/linearLayout2"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:layout_alignParentBottom="true"
    android:background="#00ff00">

    <TextView
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:padding="20dp"
        android:text="Content 2" />

</LinearLayout>

<ListView
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:layout_above="@id/linearLayout2"
    android:layout_below="@id/linearLayout1"
    android:background="#00f0f0"></ListView> 
```

结果： [![结果](../Images/7402ffeb65b05fa002f0db02943e8c8e.png)](https://i.stack.imgur.com/Ewcby.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-26T10:43:13.637

好的..在查阅[了这篇文章后](https://stackoverflow.com/questions/10873128/wrapping-a-listview-inside-a-linearlayout)，我想出了一个修复方法

1.  去掉ListView外的LinearLayout，是多余的。
2.  将高度 '0px'（我在网上找到）添加到 ListView 以确保它正确遵守 android:weight 参数。

希望这可以帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-26T10:43:33.200

*   去掉 的重量`id/filter`。
*   让`ListView`权重为 1 和`fill_parent`高度。
*   删除 listView 的直接父级。

您错过的另一件事是`weightSum=sum_of all_child_weight`在您的根目录中设置。那应该可以解决问题。

# c++ - 在 Visual Studio 中监视调用堆栈大小

> ID：11667440
> 
> 赞同：8
> 
> 时间：2012-07-26T10:33:45.190
> 
> 标签：c++, visual-studio-2008, monitoring, stack-overflow, callstack

有没有办法监控 Visual Studio 中的调用堆栈大小？运行时提供调用堆栈窗口，但不显示堆栈的大小。我正在使用 C++ 并面临堆栈溢出问题。我知道我正在使用的某些递归函数可能有问题，但在解决这些问题之前，我想监控调用堆栈大小以查看发生了什么。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-26T11:00:56.060

在这里使用数据断点会很有帮助。无论您碰巧在代码中的哪个位置，只要您在正确的线程上都没关系，使用 Debug + New Breakpoint + New Data Breakpoint。在地址框中输入`@esp - 250000`. 按 F5 继续运行，当使用了四分之一的可用堆栈空间时，它将在递归内部的某个地方中断。与 esp 的确切偏移并不重要。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-26T10:45:55.270

有几种方法：

1.  在监视窗口中检查 ESP。您可以通过`@esp`在监视窗口中观看来做到这一点。将此与流程开始时的 ESP 进行比较。
2.  同样，检查第一个/最后一个堆栈帧中堆栈分配变量的地址。

请注意，堆栈通常是向后分配的，因此随着堆栈的增长，ESP 变得越来越小。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-03-07T02:15:57.180

“Microsoft 推荐的本机规则”代码分析可以查看您的代码并发现您的代码可能会溢出堆栈的问题。我不确定它在找到递归问题方面有多好，但它确实在我的代码中发现了一个问题，我使用了一个非常大 (1MB) 的类的本地实例。在运行时，唯一的错误是堆栈溢出。当然，在堆栈上使用大对象是个坏主意。您应该只使用小物件和将大部分脏衣服堆放在堆上的物件。

在 VS2012 中，右键单击项目*Properties*，然后选择*Code Analysis*，然后单击复选框以*Enable Code Analysis*。运行需要几分钟。

# c# - 匿名方法和 lambda 表达式之间的区别

> ID：11667443
> 
> 赞同：1
> 
> 时间：2012-07-26T10:33:48.903
> 
> 标签：c#, .net, delegates, lambda

> **可能重复：**
> [delegate 关键字与 lambda 表示法](https://stackoverflow.com/questions/299703/delegate-keyword-vs-lambda-notation)

我同时使用匿名方法和 lambda 表达式，但除了语法之外，我找不到这些表达式之间的区别。谁能帮我找出 lambda 表达式的优点？在哪些情况下我需要使用 lambda，在哪些情况下需要使用匿名方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T10:52:17.843

Eric Lippert @解释了细微的差异

*   [Lambda 表达式与匿名方法，第一部分](http://blogs.msdn.com/b/ericlippert/archive/2007/01/10/lambda-expressions-vs-anonymous-methods-part-one.aspx)
*   [Lambda 表达式与匿名方法，第二部分](http://blogs.msdn.com/b/ericlippert/archive/2007/01/11/lambda-expressions-vs-anonymous-methods-part-two.aspx)
*   [Lambda 表达式与匿名方法，第三部分](http://blogs.msdn.com/b/ericlippert/archive/2007/01/12/lambda-expressions-vs-anonymous-methods-part-three.aspx)

**更新：**

另一个区别是，Lambda 表达式可以表示为 Expression tres 并且可以在运行时进行解析。虽然匿名方法不能。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-26T10:40:20.650

它们是相同的；在 lambda 表达式中，您可以省略方法参数类型的定义，因此输入更少。

lambda 表达式是一种以数学方式定义函数的方法。

# c# - ASP.NET SmtpClient 从另一个地址发送邮件，而不是在 Mailsettings 中

> ID：11667444
> 
> 赞同：0
> 
> 时间：2012-07-26T10:33:48.780
> 
> 标签：c#, asp.net, email, smtp, settings

在我的 web.config 中，我设置了我的邮件设置：

```
<mailSettings>
  <smtp from="info@domainA.com">
    <network host="smtp.domainA.com" port="25" userName="username" password="passowrd" />
  </smtp>
</mailSettings> 
```

现在我想从另一个地址 info@domainB.com 而不是 info@domainA.com 发送电子邮件。

这可能吗？有什么解决办法吗？在 php 中，这可以通过 php-mail 功能实现。

* * *

**我的解决方案是：** 只需设置另一个 MailMessage.From 值并设置发件人。这就是我所需要的。

# c# - 基于字符串的返回值

> ID：11667452
> 
> 赞同：-1
> 
> 时间：2012-07-26T10:34:21.847
> 
> 标签：c#, asp.net, string, linq, return

嗨，我创建了一个类来从我的客户的帐户表中获取值，我为此创建了一个类。我想通知 AccountId 和我想要返回结果的表的字段（例如 FirstName）。实现这一目标的最佳方法是什么？我得到了类似下面的东西作为我的替代方案，但我无法让它工作......

这就是我想要获得名字结果的方式：

```
 LabelFirstName.Text = Manage.GetAccount(2, "FirstName"); // where 2 is the id I informed and FirstName is the Column I want to retrieve from the table. 
```

例如，结果将是“John”。

## 这就是我所拥有的：

```
public class Manage
{

    public Manage()
    {
    }

    public static string GetAccount(int AccountId, string Field)
    {
        LinqSqlDataContext contextLoad = new LinqSqlDataContext();

        var q = (from p in contextLoad.MyAccounts
                 where p.AccountId == AccountId
                 select p).Single();

        string var = q.??    // ?? would be my Field string "FirstName" for example

        return var;
    }

} 
```

* * *

请帮忙

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T10:49:04.887

我建议您返回 Account 对象，然后在您需要的地方检索属性，如下所示：

```
public static Account GetAccount(int AccountId)
{
    LinqSqlDataContext contextLoad = new LinqSqlDataContext();

    var q = (from p in contextLoad.MyAccounts
             where p.AccountId == AccountId
             select p).Single();

    return q;
}

public void myMethod()
{
    var account = GetAccout(2);

    var accountName = account.FirstName;
    var accountNumber = account.Number;
    // ... and so on
} 
```

如果这真的没有帮助，您可以使用其他帖子中提到的反射。

祝你好运。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T10:56:48.023

在这种情况下，DataReader 可能很有用：

```
 var q = from p in contextLoad.MyAccounts 
             where p.AccountId == AccountId 
             select p;

using (var command = dc.GetCommand(q)) 
{ 
    command.Connection.Open(); 
    using (var reader = command.ExecuteReader()) 
    { 
        // expecting one row
        if(reader.Read())
        { 
            return reader.GetString(reader.GetOrdinal(Value)); 
        } 
    } 
    return null;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-26T10:37:33.167

您可以返回类的对象

```
 public static Object GetAccount(int AccountId)
    {
        LinqSqlDataContext contextLoad = new LinqSqlDataContext();       
        var q = (from p in contextLoad.MyAccounts
                 where p.AccountId == AccountId
                 select p).FirstOrDefault();

        return q;
    }

var Account = GetAccount(int AccountId) as Account;
LabelFirstName.Text = Account.FirstName;
LabelLastName.Text = Account.LastName; 
```

您可以从对象中获取所有字段！所以任务可以通过一个数据库调用来完成

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-26T10:39:46.537

```
string value = (string)q.GetType().GetProperty(Field).GetValue(q, null); 
```

# javascript - Jquery Ajax 请求失败

> ID：11667454
> 
> 赞同：1
> 
> 时间：2012-07-26T10:34:30.437
> 
> 标签：javascript, jquery, ajax, post

我有一个 Web 服务在直接通过 url 询问时可以正常工作，但我似乎无法通过 Jquery Ajax 调用来调用它。

这是我的代码：

```
jQuery("#field1").focusout(function() {
    alert("focusOut");
    jQuery.ajax({
        type: 'POST',
        url: '/motifRes/name',
        data: { 'clRef' : document.getElementById("field1") },
        datatype: 'text',
        success: function(msg) {
            $("#nomClient").val(msg);
        },
        error: function (xmlHttpRequest, textStatus, errorThrown) {
             alert(textStatus, errorThrown);
        }
    });
}); 
```

我确实输入了该函数，因为我收到了“focusOut”警报，但是什么也没有，什么都没有。我使用了 Chrome 开发者工具和提琴手，我没有看到任何请求，也没有错误。

有任何想法吗 ？

编辑：

关于您的问题：

> 您是从外部域请求吗？块引用

不我不是

> 你确定它是一个 POST 请求吗？

无论哪种方式，它都不会改变任何事情=/

这是我的 HTML

```
 <div class="panel" id="standard">
                <form id="test" action="#" method="get">
                <fieldset>
                    <legend>Formulaire de changement du motif d'annulation</legend>
                    <div class="form-row">
                        <div class="field-label"><label for="field1">Ref Client</label>:</div>
                        <div class="field-widget"><input name="field1" id="field1" title="Entrer la référence client" /><input id="nomClient" readonly="readonly" type="text" value=""></input></div>
                    </div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T10:41:29.927

使用 done()、fail() 和 always() 代替 success() 和 error()。也使用 document.getElementById("field1").value 代替 document.getElementById("field1")。

```
jQuery("#field1").focusout(function() {
    alert("focusOut");
    jQuery.ajax({
        type: 'POST',
        url: '/motifRes/name',
        data: { 'clRef' : document.getElementById("field1").value },
        datatype: 'text',
        done: function(msg) {
            $("#nomClient").val(msg);
        },
        fail: function (xmlHttpRequest, textStatus) {
             alert(textStatus);
        }
    });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T10:45:40.207

`data`将您的属性更改为

```
data: { 'clRef' : $("#field1").val() }, 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-27T08:10:42.203

终于明白了。我猜这是一个恶毒的新手错误......

```
url: '/motifRes/name' 
```

=！

```
url: 'motifRes/name' 
```

斜杠确实意味着绝对路径，没有它，我的 web 服务的根会与 url 连接...

# android - 很好地缩放 Imageview

> ID：11667457
> 
> 赞同：0
> 
> 时间：2012-07-26T10:34:33.613
> 
> 标签：android, android-layout, android-imageview

这个想法是要么显示一张照片，要么 - 如果没有定义 - 一个象征它的小图标。

我在布局中定义了以下 ImageView：

```
 <ImageView
            android:id="@+id/imgPic"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:adjustViewBounds="true"
            android:contentDescription="@+string/strImgPic"
            android:paddingRight="10dip"
            android:paddingTop="10dip"
            android:saveEnabled="false"
            android:src="@drawable/pic_icon" /> 
```

所以 ImageView 是用“icon”PNG预初始化的。

加载它的代码：

```
try {
imgURL = vinfo.getString("mainpic_url");
    if (imgURL.length() > 1) {
   imgURL = getString(R.string.urlPicsFull) + imgURL;
   ImageView imgPic = (ImageView) findViewById(R.id.imgPic);
   ImageDownloader img = new ImageDownloader();
   img.download(imgURL, imgPic);
    }
 } catch (..) {
(..) 
```

ImageDownloader() 基本上除了异步检索图像之外什么也不做。然而问题是，如果没有图像（ imgURL.length()==0 ），则图标会在布局中的空白方块中间显示一个非常大的“边框”。

我希望将图像按比例缩小（或放大）到父视图的宽度，但要按原样显示图标（大约 90 下垂宽和高）。

关于如何实现这一点的任何建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T10:55:50.160

查看[.android:scaleType](http://developer.android.com/reference/android/widget/ImageView.ScaleType.html)的标签`ImageView`。对于您的情况，如果您添加

```
android:scaleType="fitXY" 
```

在`ImageView`布局中的定义中，图像将调整为您的`ImageView`大小。像这样的东西：

```
<ImageView
        android:id="@+id/imgPic"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:adjustViewBounds="true"
        android:contentDescription="@+string/strImgPic"
        android:paddingRight="10dip"
        android:scaleType="fitXY"
        android:paddingTop="10dip"
        android:saveEnabled="false"
        android:src="@drawable/pic_icon" /> 
```

但是，这不会保持纵横比，因此图像可能会失真。如果您不希望这样，请在`android:scaleType`提供的链接中检查标签可以采用的其他值。

# ruby-on-rails - Rails：Delayed_job 用于排队但通过 cron 运行作业

> ID：11667463
> 
> 赞同：0
> 
> 时间：2012-07-26T10:34:59.157
> 
> 标签：ruby-on-rails, cron, delayed-job, shared-hosting

好的，所以这可能是邪恶的，但是..这是问题所在！我想在共享环境（site5）上运行一个非常轻量级的应用程序。理想情况下，我想使用delayed_job 来方便地对邮件进行排队（大约200+ 每隔一段时间）。但是，作为一个共享环境，他们不希望后台进程一直运行（很公平）。

因此，我的计划是使用延迟作业对邮件进行排队，然后每隔一小时左右，启动一个 cron 作业，发送几封电子邮件（10 封或一些小邮件），然后终止该进程。并重复。

Q) 是否有一个 rake jobs:works:1 等效任务，它很容易设置吗？- 指针会很方便。

我对“这是一个糟糕的主意，甚至不要去那里”作为答案持开放态度。在这种情况下，我可能会考虑另一种排队策略......（或者 heroku 雇佣火也许......）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T11:36:08.137

您可以通过执行以下操作获得延迟作业以仅处理一定数量的作业：

```
Delayed::Worker.new.work_off(10) 
```

您可以从 cron 触发脚本来执行此操作或使用“rails runner”：

```
rails runner -e production 'Delayed::Worker.new.work_off(10)' 
```

我想关于这是否是一个好主意的主要问题是弄清楚什么小价值实际上足够高，以确保您在合理的时间范围内处理所有工作。此外，每次您想要处理甚至检查是否应该处理任何作业时，都会产生启动 rails 环境的开销。如果它们对内存或 CPU 使用率的峰值特别严格，这可能会在共享环境中引起问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T11:42:54.990

为什么不跳过“工人”（它们只是寻找工作的守护进程）并让您的 cron 触发 10.times { MailerJob.first.perform } 的自定义 rake 任务

您只需要在此之前要求您是该行中的应用程序，以便加载它。

# ios - 使用“NSHTTPCookie cookieWithProperties”创建 cookie 失败

> ID：11667468
> 
> 赞同：4
> 
> 时间：2012-07-26T10:35:16.057
> 
> 标签：ios, nshttpcookie

我使用以下代码创建 cookie，但失败了。（iOS SDK 5）

```
// add cookie
NSDictionary *properties = [NSDictionary dictionaryWithObjectsAndKeys:
                            req.URL, NSHTTPCookieOriginURL,
                            @"MLSTORAGE", NSHTTPCookieName,
                            @"1234567890", NSHTTPCookieValue,
                            nil];
NSHTTPCookie *cookie = [NSHTTPCookie cookieWithProperties:properties];
NSLog(@"\nurl: %@\ncookie: %@", req.URL, cookie);
[[NSHTTPCookieStorage sharedHTTPCookieStorage] setCookie:cookie];
// 
```

日志是：

```
2012-07-26 18:30:49.914 Motilink[15289:707] -[FMWebDAVRequest sendRequest:][Line 154] 
url: http://210.116.114.195:8080/MLServer/storage/
cookie: (null) 
```

任何人都知道如何创建一个cookie？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-12T08:02:01.150

`NSHTTPCookieOriginURL`使用请求的 URL时似乎存在问题。

尝试使用此代码，它对我有用：

```
// add cookie
    NSDictionary *properties = [NSDictionary dictionaryWithObjectsAndKeys:
                                req.URL.host, NSHTTPCookieDomain,
                                req.URL.path, NSHTTPCookiePath,
                                @"MLSTORAGE", NSHTTPCookieName,
                                @"1234567890", NSHTTPCookieValue,
                                nil];
    NSHTTPCookie *cookie = [NSHTTPCookie cookieWithProperties:properties];
    NSLog(@"\nurl: %@\ncookie: %@", req.URL, cookie);
    [[NSHTTPCookieStorage sharedHTTPCookieStorage] setCookie:cookie];
    // 
```

但是，我不知道为什么`NSHTTPCookieOriginURL`在这里不起作用。

希望这可以帮助，

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-02-12T03:50:50.300

要成功创建 cookie，您必须（至少）为 NSHTTPCookiePath、NSHTTPCookieName 和 NSHTTPCookieValue 键以及 NSHTTPCookieOriginURL 键或 NSHTTPCookieDomain 键提供值。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2018-02-08T15:34:11.700

我遇到了同样的问题。当我查看文档并发现属性只需要'name'、'value'和'originURL'或'domain'时，我尝试了，但失败了。在我添加了“路径”之后它就起作用了。因为我没有准确理解，如果你只提供'originURL'以外的'domain'，'path'也是必需的。

```
<tr>
    <th>Property key constant</th>
    <th>Type of value</th>
    <th>Required</th>
    <th>Description</th>
</tr>
<tr>
    <td>NSHTTPCookieName</td>
    <td>NSString</td>
    <td>YES</td>
    <td>Name of the cookie</td>
</tr>
<tr>
    <td>NSHTTPCookieValue</td>
    <td>NSString</td>
    <td>YES</td>
    <td>Value of the cookie</td>
</tr>
<tr>
    <td>NSHTTPCookieDomain</td>
    <td>NSString</td>
    <td>Special, a value for either NSHTTPCookieOriginURL or
    NSHTTPCookieDomain must be specified.</td>
    <td>Domain for the cookie. Inferred from the value for
    NSHTTPCookieOriginURL if not provided.</td>
</tr>
<tr>
    <td>NSHTTPCookieOriginURL</td>
    <td>NSURL or NSString</td>
    <td>Special, a value for either NSHTTPCookieOriginURL or
    NSHTTPCookieDomain must be specified.</td>
    <td>URL that set this cookie. Used as default for other fields
    as noted.</td>
</tr>
<tr>
    <td>NSHTTPCookiePath</td>
    <td>NSString</td>
    <td>NO</td>
    <td>Path for the cookie. Inferred from the value for
    NSHTTPCookieOriginURL if not provided. Default is "/".</td>
</tr> 
```

最终代码如下：

```
NSMutableDictionary *cookieProperties = [NSMutableDictionary dictionary];
[cookieProperties setObject:@"SESSION" forKey:NSHTTPCookieName];
[cookieProperties setObject:@"value" forKey:NSHTTPCookieValue];
[cookieProperties setObject:@".domain.com" forKey:NSHTTPCookieDomain];
[cookieProperties setObject:@"/" forKey:NSHTTPCookiePath];
NSHTTPCookie *co = [NSHTTPCookie cookieWithProperties:cookieProperties];
[[NSHTTPCookieStorage sharedHTTPCookieStorage] setCookie:co]; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-01-20T08:55:38.423

这对于在 NSHTTPCookieStorage 中设置 cookie 数组可能很有用。我遇到了这个问题，我使用下面的代码解决了。希望这对尝试设置 cookie 数组的人有所帮助。

```
 NSDictionary *cookieProperties = [NSDictionary dictionaryWithObjectsAndKeys:
                                  @".domain.com", NSHTTPCookieDomain,
                                  @"/", NSHTTPCookiePath,
                                  @"SESSION", NSHTTPCookieName,
                                  @"Session value",NSHTTPCookieValue,nil];
NSDictionary *cookieProperties1 = [NSDictionary dictionaryWithObjectsAndKeys:
                                  @".domain.com", NSHTTPCookieDomain,
                                  @"/", NSHTTPCookiePath,
                                  @"some cookie", NSHTTPCookieName,
                                  @"some cookie value",NSHTTPCookieValue,nil];

NSHTTPCookie *cookie1 = [NSHTTPCookie cookieWithProperties:cookieProperties1];
NSHTTPCookie *cookie = [NSHTTPCookie cookieWithProperties:cookieProperties];
NSArray* cookieArray = [NSArray arrayWithObjects: cookie,cookie1, nil];
[[NSHTTPCookieStorage sharedHTTPCookieStorage] setCookies:cookieArray forURL:[NSURL   URLWithString:urlString] mainDocumentURL:nil]; 
```

您可以使用以下代码交叉验证您的 cookie。

```
[[[NSHTTPCookieStorage sharedHTTPCookieStorage] cookies] enumerateObjectsUsingBlock:^(id obj, NSUInteger idx, BOOL *stop) {

    NSLog(@"Printing cookies %@", obj);
}]; 
```

# javascript - 使用css设置背景的宽度和高度

> ID：11667469
> 
> 赞同：1
> 
> 时间：2012-07-26T10:35:21.063
> 
> 标签：javascript, html, css, image, image-size

我想设置图像的背景宽度和高度。

```
document.getElementById('outerModalPopupDiv').style.backgroundImage = "url('samandar_003.jpeg')";
document.getElementById('outerModalPopupDiv').style.backgroundRepeat = "no-repeat"; 
```

现在我想设置图像的宽度和高度。我知道`background-size: 200px 50px;`设置高度和宽度，但是我不能使用相同的。我必须以上述格式设置宽度和高度。

如果我使用

```
document.getElementById('outerModalPopupDiv').style.background.size = "200px 500px"; 
```

它行不通。图像保持不变。

任何想法我怎样才能使它工作。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-26T10:53:40.027

[如此处](http://www.w3schools.com/cssref/css3_pr_background-size.asp)所示，CSS3 的 js 语法为`background-size`：

```
object.style.backgroundSize="60px 80px" 
```

所以，为了方便复制粘贴，试试这个：

```
document.getElementById('outerModalPopupDiv').style.backgroundSize = "200px 500px"; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-26T10:50:43.257

使用 css3 你可以设置背景大小：

```
#outerModalPopupDiv {
    background-size: 200px 500px;
} 
```

正如你[在这里看到的](http://www.w3schools.com/cssref/tryit.asp?filename=trycss3_background-size)

或者，如果您想使用 javascript 设置它，您可以创建一个 css 类并将该类添加到元素

javascript:

```
document.getElementById("outerModalPopupDiv").className += "resizeBg200x500"; 
```

CSS：

```
.resizeBg200x500 {
    background-size: 200px 500px;
} 
```

或直接使用javascript：

```
document.getElementById("outerModalPopupDiv").style.backgroundSize="200px 500px"; 
```

或使用 jQuery 的另一种选择:)

```
$("#outerModalPopupDiv").css("background-size","200px 500px"); 
```

background-size 是 css3，但被许多浏览器广泛支持，如您[在此处看到的](http://www.caniuse.com/#search=background-size)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-26T10:37:28.813

就我个人而言，我会制作一个调整大小并使用 JS 动态添加的类

[http://jsfiddle.net/spacebeers/FFeEh/15/](http://jsfiddle.net/spacebeers/FFeEh/15/)

```
document.getElementById('outerModalPopupDiv').style.backgroundRepeat = "no-repeat";

var element = document.getElementById('outerModalPopupDiv');

element.className += element.className ? ' backgroundResize' : 'backgroundResize';​ 
```

# objective-c - 核心位置与 RestKit 结合

> ID：11667471
> 
> 赞同：0
> 
> 时间：2012-07-26T10:35:28.383
> 
> 标签：objective-c, restkit, core-location, grand-central-dispatch

我在我的应用程序中使用 RestKit 进行所有网络/网络调用。启动时，在 AppDelegate 中，我开始更新用户的位置。当用户批准应用程序使用该位置时（第一次启动时），应用程序将移动到`RootViewController`并启动 RestKit HTTP 调用。HTTP 调用需要用户的位置，因此会失败。

有什么方法可以解决这个问题？如何在使用 RestKit 的并发性的同时使用 Core Location？

我知道应用程序的结构方式（在 Web 服务检索时更新 UI）非常危险。我试图尽可能多地避免重构（管理命令）。有什么方法可以解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T10:44:58.720

不要在 AppDelegate 上询问位置。

而是导航到 RootController 并在 ViewDidLoad 中调用 startUpdatingLocation 并立即弹出一个带有处理图像的视图，如 UIActivityIndi​​cator。

成功获取位置后，会触发协议方法，删除此处的弹出视图并发送带有获取坐标的 RestKit 调用。

# javascript - 加载collada纹理时如何调用函数？(三.js)

> ID：11667479
> 
> 赞同：2
> 
> 时间：2012-07-26T10:36:07.747
> 
> 标签：javascript, webgl, three.js, collada

```
loader.load( 'path/to/collada.dae', function ( collada ) {
  // This function is called, when collada were loaded.

}); 
```

但是当纹理被加载时如何调用函数呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T14:13:24.227

ColladaLoader 类使用 THREE.ImageUtils 在[第 3087 行](https://github.com/mrdoob/three.js/blob/master/examples/js/loaders/ColladaLoader.js#L3087)加载纹理。ImageUtils 类[可以在](https://github.com/mrdoob/three.js/blob/master/src/extras/ImageUtils.js#L10)加载图像时提供回调，但 ColladaLoader 不使用它。

您可以通过遍历 collada 场景来寻找图像来创建解决方法。这是一个[现场演示](http://jsfiddle.net/4mSMM/)。相关代码为：

```
THREE.SceneUtils.traverseHierarchy( dae.scene, function (object) {
    if (object.material && object.material.map) {
        object.material.map.image.onload = function() {
            console.log('image loaded');
            object.material.map.needsUpdate = true;
        };
    }
}); 
```

当加载每个纹理时，这会将“图像加载”打印到控制台。

# passwords - 为什么 PBE 生成具有不同盐和迭代次数的相同密钥？

> ID：11667480
> 
> 赞同：7
> 
> 时间：2012-07-26T10:36:10.967
> 
> 标签：passwords, key, iteration, salt

我正在尝试测试 PBE 加密/解密。我发现 PBE 生成具有不同盐和迭代次数的相同密钥。当然，使用的密码是一样的。据我了解，相同的密码和不同的盐/迭代应该得到不同的密钥。下面是我的测试代码：

```
import java.security.Key;
import java.security.SecureRandom;
import javax.crypto.SecretKeyFactory;
import javax.crypto.spec.PBEKeySpec;

public class PBETest
{
    public static void main(String[] args)
        throws Exception
    {
        String algo = "PBEWithSHA1andDESede";
        System.out.println("====== " + algo + " ======");

        char[] password = "password".toCharArray();
        SecureRandom rand = new SecureRandom();
        byte[] salt = new byte[32];
        rand.nextBytes(salt);
        int iterationCount = rand.nextInt(2048);

        //encryption key
        PBEKeySpec          encPBESpec = new PBEKeySpec(password, salt, iterationCount);
        SecretKeyFactory    encKeyFact = SecretKeyFactory.getInstance(algo);
        Key encKey = encKeyFact.generateSecret(encPBESpec);
        System.out.println("encryptioin iteration: " + iterationCount);

        //decryption key
        rand.nextBytes(salt);
        iterationCount = rand.nextInt(2048);
        PBEKeySpec          decPBESpec = new PBEKeySpec(password, salt, iterationCount);
        SecretKeyFactory    decKeyFact = SecretKeyFactory.getInstance(algo);
        Key decKey = decKeyFact.generateSecret(decPBESpec);
        System.out.println("decryptioin iteration: " + iterationCount);

        System.out.println("encryption key is same as decryption key? " + encKey.equals(decKey));

    }

} 
```

我期待最终输出是`false`. 我做错什么了吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-27T08:41:48.280

你非常幸运，你的随机盐和迭代计数恰好匹配。直接去拉斯维加斯。现在。;)

我搜索了 PBEWithSHA1andDESede 并找到了这个例子：[http](http://cryptofreek.org/2010/06/04/encrypting-and-decrypting-files-with-java) ://cryptofreek.org/2010/06/04/encrypting-and-decrypting-files-with-java其中他单独指定了密钥并使用盐`new PBEKeySpec(password)` 创建了一个单独的和`PBEParameterSpec`然后将其传递给 Cipher.init() 的迭代计数。

所以，不，你没有做错任何事，你只是在盐和计数被塞进密码之前停下来。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-02-21T13:35:16.883

如果您使用`PBKDF2WithHmacSHA1`而不是`PBEWithSHA1andDESede`您的假设，因为它支持盐。您只需将`keyLength`参数添加到`PBEKeySpec`：

```
 String algo = "PBKDF2WithHmacSHA1"; 
```

...

```
 PBEKeySpec decPBESpec = new PBEKeySpec( password, salt, iterationCount, 128 ); 
```

我已经进行了测试，结果是：`false`.

但是，请注意，要使加密和解密正常工作，您需要在生成密钥时使用相同的盐和迭代计数。

# mysql - 如何识别整个数据库中对主键的所有外键引用？

> ID：11667482
> 
> 赞同：1
> 
> 时间：2012-07-26T10:36:14.180
> 
> 标签：mysql, foreign-keys

我的问题是关于外键的。例如，我们有带有 X_PK 的表 X 和带有空 A_FK_X 和空 B_FK_X 的表 A、B、C。表 C 不包含表 X 的 FK。表 A 已经具有初始化 A_FK_X 的记录，但表 B 没有。

是否可以在所有表​​中找到指定 X_PK 的所有用法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T10:57:01.977

你想使用`information_schema`数据库。试试这段代码（尽管`CREATE TABLE`语句过于简单）：

```
CREATE TABLE `X` (
    `X_id` INT NOT NULL AUTO_INCREMENT,
    PRIMARY KEY  (`X_id`)
  );

  CREATE TABLE `A` (
    `A_id` INT NOT NULL AUTO_INCREMENT,
    `X_id` INT NULL,
    PRIMARY KEY  (`A_id`),
    CONSTRAINT `A_FK_X` FOREIGN KEY (`X_id`) REFERENCES `X` (`X_id`)
  );

CREATE TABLE `B` (
    `B_id` INT NOT NULL AUTO_INCREMENT,
    `X_id` INT NULL,
    PRIMARY KEY  (`B_id`),
    CONSTRAINT `B_FK_X` FOREIGN KEY (`X_id`) REFERENCES `X` (`X_id`)
  );

CREATE TABLE `C` (
  `C_id` INT NOT NULL AUTO_INCREMENT,
  PRIMARY KEY (`C_id`)
);

USE information_schema;
SELECT * FROM KEY_COLUMN_USAGE WHERE REFERENCED_TABLE_NAME = 'X' AND REFERENCED_COLUMN_NAME = 'X_id'; 
```

这将返回`X_id`每个数据库中的所有引用，因此您可以通过包含以下内容来缩小搜索范围`TABLE_SCHEMA`：

```
SELECT * FROM KEY_COLUMN_USAGE WHERE REFERENCED_TABLE_NAME = 'X' AND REFERENCED_COLUMN_NAME = 'X_id' AND TABLE_SCHEMA='testdbname'; 
```

在我的系统上，这些返回相同的输出，因为我只有一个包含对 的引用的数据库`X_id`，但输出会因您的数据库/表结构而异。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-26T11:48:43.860

您可以进行以下查询：

选择约束模式、约束名、表名、列名、引用表名、引用列名`information_schema.key_column_usage`

# java - 使用运算符 + 与使用字符串缓冲区进行字符串连接？

> ID：11667486
> 
> 赞同：2
> 
> 时间：2012-07-26T10:36:34.447
> 
> 标签：java, string

如果我使用实例方法，在连接方面是否有任何区别 b/w 1 和 2。我的意思是在任何一种情况下，最终只会构造一个对象，即“abc”。是的，我看到的唯一区别是测试将位于 permgen 空间内，即使线程从实例方法中出来，但是一旦线程不在方法中，x 将被垃圾收集但在构造的对象数量是相同的。对？

```
// option 1
String test="a"+"b"+"c";

// option 2  
StringBuffer x = new StringBuffer().append("a").append("b").append("c").toString() 
```

我参考了链接[http://docs.oracle.com/javase/7/docs/api/java/lang/StringBuffer.html](http://docs.oracle.com/javase/7/docs/api/java/lang/StringBuffer.html)来得出这个结论。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-26T10:39:03.527

首先请注意，您链接的文档非常旧。请注意，它适用于**Java 1.4.2**。

> J2SE 1.4.2 处于其 Java 技术生命周期终止 (EOL) 过渡期。EOL 过渡期从 2006 年 12 月 11 日开始，到 2008 年 10 月 30 日结束，届时 J2SE 1.4.2 将达到其使用寿命 (EOSL)。

在[较新版本的文档中，](http://docs.oracle.com/javase/6/docs/api/java/lang/StringBuffer.html)此语句已被删除。但是，添加了另一个声明，您应该注意：

> 从 JDK 5 开始，该类已经补充了一个为单线程使用而设计的等效类 StringBuilder。**通常应该优先使用 StringBuilder 类而不是这个类**，因为它支持所有相同的操作，但速度更快，因为它不执行同步。

* * *

其次请注意，您引用的文档有以下代码：

```
x = "a" + 4 + "c"; 
```

`4`不只是一个错字。您的示例不同，因为编译器会将代码转换为仅使用单个字符串文字。这两行是相同的：

```
x = "a" + "b" + "c"; 
x = "abc"; 
```

字符串文字将被实习。

* * *

但是在编译器不能只使用单个字符串文字的一般情况下，编译器会将第一个版本转换为第二个版本，除非它会使用`StringBuilder`它，因为它更有效。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-26T10:42:24.180

首先 - 使用`StringBuilder`而不是`StringBuffer`,`StringBuffer`现在已弃用。

对于您的问题，如今这并不重要，编译器会自动将字符串连接转换为 StringBuilder。

只有两种情况可以使用它。第一个是更好的代码可读性（例如，如果您正在构建像 SQL 查询这样的长字符串）。第二个，当你在循环中连接字符串时，编译器总是为每个遍历循环创建一个新的 StringBuilder 实例，所以要小心。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-07-26T10:42:12.437

首先，`StringBuilder`是`StringBuffer`什么`ArrayList`是`Vector`：它应该是首选，因为它不同步。

您的第一个 String 完全在编译时构建，并存储为 String 文字。这个字面量在一个池中，`test`变量总是指向同一个 String 实例。

您的第二个片段在运行时动态连接三个字符串文字。每次调用它都会返回一个新的 String 实例。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-07-26T10:42:36.033

查看 2 个示例生成的字节码，第一个字符串转换为“abc”字符串文字，而第二个调用 StringBuilder 方法。您实际上可以使用 来测试它`System.out.println(test == "abc");`，打印结果为 true。

```
 0: ldc           #2                  // String abc
   2: astore_1      
   3: new           #3                  // class java/lang/StringBuffer
   6: dup           
   7: invokespecial #4                  // Method java/lang/StringBuffer."<init>":()V
  10: ldc           #5                  // String a
  12: invokevirtual #6                  // Method java/lang/StringBuffer.append:(Ljava/lang/String;)Ljava/lang/StringBuffer;
  15: ldc           #7                  // String b
  17: invokevirtual #6                  // Method java/lang/StringBuffer.append:(Ljava/lang/String;)Ljava/lang/StringBuffer;
  20: ldc           #8                  // String c
  22: invokevirtual #6                  // Method java/lang/StringBuffer.append:(Ljava/lang/String;)Ljava/lang/StringBuffer;
  25: invokevirtual #9                  // Method java/lang/StringBuffer.toString:()Ljava/lang/String;
  28: astore_2 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-07-26T10:42:07.170

在这种特定情况下，您在编译时连接三个字符串文字，编译器将生成代码，就像您输入的一样：

```
String test="abc"; 
```

从而完全避免任何中间对象。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-26T10:39:56.087

我认为在内存使用的情况下两者都是相同的。

# html - 如何让 Internet Explorer 正确呈现这些列

> ID：11667487
> 
> 赞同：0
> 
> 时间：2012-07-26T10:36:34.857
> 
> 标签：html, internet-explorer

**解决方案**

`<!DOCTYPE html>`应该出现在页面的顶部，以向浏览器指示页面应该以标准模式呈现。

Internet Explorer 8+ 包含一个兼容性视图设置，该设置将呈现在 IE 7 中显示的页面。默认情况下，所有 Intranet 分区站点都设置为以兼容模式呈现，这会产生下面概述的问题。要强制页面从不以兼容模式呈现，可以将此元标记添加到`<head>`页面的部分。

```
<meta http-equiv="X-UA-Compatible" content="IE=9; IE=8; IE=7;" /> 
```

就我而言，我使用的是 ASP.NET，因此为了方便起见，我将上述内容添加为自定义标题，以使我网站中的所有页面都以标准模式呈现。

**原帖**

首先，我在一个专门使用 IE 8 的环境中工作，所以我不需要在所有浏览器上都兼容的解决方案——只需要 IE。

我有一个页面显示宽度= 100％的表格，除了最后一列中的单元格之外的每个单元格都设置为特定宽度（在本例中为 200 像素）。在 IE 中呈现时，它按预期工作。也就是说，我得到了 200px 宽的 3x 列，第 4 列占据了剩余的空间（取决于用户的屏幕分辨率/窗口大小）。

但是，如果我在表格中添加一个额外的行，并使这个底行跨越所有列，Internet Explorer 8 和 9 将完全忽略指定的列宽，具体取决于该底行中文本的宽度。当我将 text-align:right 合并到第一行的列中时，这种行为更加不寻常。当我这样做时，IE 会根据列的宽度对齐文本*，*同时在列之间插入不可用的空间。最好用屏幕截图来说明这一点。

![来自 img685.imageshack.us/img685/7117/iecolumnwidths.png](../Images/fa0d365d9471d6322268183b2a842414.png)

这表明表格在 Opera 12 中正确呈现，但在 IE 8 或 9 中不正确。这是我用来说明问题的 HTML：

```
<html>
<head>
  <style>
    td{
       background-color:#AAAAAA;
    }
    .s1{
       text-align:right;
       width:200px;
    }
  </style>
</head>
<body>

<table width="100%">
  <tr>
    <td class="s1">Col 1 a a a a a a a a a</td>
    <td class="s1">Col 2 a a a a a a a a a</td>
    <td class="s1">Col 3 a a a a a a a a a</td>
    <td>Col 4</td>
  </tr>
  <tr>
    <td class="s1">Col 1 a a a a a a v vv vv v v v</td>
    <td class="s1">Col 2 a a a a a a v vv vv v v v</td>
    <td class="s1">Col 3 a a a a a a v vv vv v v v</td>
    <td>Col 4</td>
  </tr>
  <tr>
    <td colspan="4">This text causes the table columns to expand xxxxxxx xxxxxxx xxxxxxxx xxxxxx aaaaaaa aaaaa aaaaaa aaaaaaaa aaaaa xxxxxxx xxxxxxx xxxxxxxx 

xxxxxx aaaaaaa aaaaa aaaaaa aaaaaaaa aaaaa xxxxxxx xxxxxxx xxxxxxxx xxxxxx aaaaaaa aaaaa aaaaaa aaaaaaaa aaaaa xxxxxxx xxxxxxx xxxxxxxx xxxxxx aaaaaaa aaaaa aaaaaa 

aaaaaaaa aaaaa</td>
  </tr>
</table>

</body>
</html> 
```

所以我的问题是，我需要改变什么才能让它在 IE 中呈现与在 Opera 中相同的效果？我希望表格动态调整大小，同时将我指定的列固定为特定宽度。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T10:41:15.617

您没有指定使 IE 进入怪癖模式的文档类型。所以把它放在你的页面顶部：

```
<!DOCTYPE html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T10:48:59.240

不要使用 colspan，这可能会导致问题。

# perl - 如何在 Nginx 上运行 CGI 脚本

> ID：11667489
> 
> 赞同：29
> 
> 时间：2012-07-26T10:36:43.450
> 
> 标签：perl, nginx, cgi, centos

我在设置要在 Nginx 上运行的 CGI 脚本时遇到问题，到目前为止，我已经找到了[http://wiki.nginx.org/SimpleCGI](http://wiki.nginx.org/SimpleCGI)这个东西，但问题是我不能让 perl 脚本作为服务运行，所以它会在后台运行，即使重新启动它也会自动开始运行

你有什么主意吗？我正在运行 Centos 5

我在[这里](https://stackoverflow.com/questions/766397/how-can-i-run-a-perl-script-as-a-system-daemon-in-linux)找到了一些解决方案，但我无法将那里给出的代码与[这个 Perl 脚本](http://wiki.nginx.org/SimpleCGI)集成 我在 Perl 完全为零，请帮助我谢谢

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-07-26T11:22:54.393

Nginx 没有原生 CGI 支持（它支持 fastCGI）。典型的解决方案是将 Perl 脚本作为 fastCGI 进程运行并编辑 nginx 配置文件以将请求重定向到 fastCGI 进程。如果您只想运行 CGI 脚本，这是一个相当复杂的解决方案。

你必须使用 nginx 来解决这个问题吗？如果您只想执行一些 Perl CGI 脚本，请考虑使用 Apache 或 Lighttpd，因为它们带有 CGI 模块，它们可以本地处理您的 CGI 脚本，并且不需要将脚本作为单独的进程运行。为此，您需要安装 Web 服务器并编辑 Web 服务器配置文件以加载 CGI 模块。对于 Lighttpd，您需要在配置文件中添加一行以启用 CGI 文件的处理。然后将 CGI 文件放入 cgi-bin 文件夹。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-07-26T12:02:13.413

安装另一个在不同端口上运行的 Web 服务器（Apache、Lighttpd）。然后使用 nginx 将您的 CGI 请求代理到网络服务器。

在 8080 上安装 Web 服务器后，您只需将其添加到 nginx 配置中

```
location /cgi-bin {
    proxy_pass http://127.0.0.1:8080;
} 
```

查看[Nginx Location Directive Explained](https://www.keycdn.com/support/nginx-location-directive)了解更多详细信息。

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2012-07-26T11:55:36.357

Nginx 是一个网络服务器。您需要为您的任务使用应用程序服务器，例如[uWSGI](http://projects.unbit.it/uwsgi/)。它可以使用其原生的非常有效的二进制接口 uwsgi 与 nginx 通信。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2017-11-08T18:28:58.523

我发现这个使用 FastCGI 的 hack 比运行另一个 Web 服务器要好一些。[http://nginxlibrary.com/perl-fastcgi/](http://nginxlibrary.com/perl-fastcgi/)

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2019-01-02T04:07:26.437

我发现了这个： [https](https://github.com/ruudud/cgi) ://github.com/ruudud/cgi 它说：

===

```
On Ubuntu: apt-get install nginx fcgiwrap
On Arch: pacman -S nginx fcgiwrap

Example Nginx config (Ubuntu: /etc/nginx/sites-enabled/default):

server {
    listen   80;
    server_name  localhost;
    access_log  /var/log/nginx/access.log;

    location / {
        root /srv/static;
        autoindex on;
        index index.html index.htm;
    }

    location ~ ^/cgi {
        root /srv/my_cgi_app;
        rewrite ^/cgi/(.*) /$1 break;

        include fastcgi_params;
        fastcgi_pass unix:/var/run/fcgiwrap.socket;
        fastcgi_param SCRIPT_FILENAME /srv/my_cgi_app$fastcgi_script_name;
    }
} 
```

将 root 和 fastcgi_param 行更改为包含 CGI 脚本的目录，例如此存储库中的 cgi-bin/ 目录。

如果您是控制狂并手动运行 fcgiwrap，请务必相应地更改 fastcgi_pass。当使用开箱即用的 fcgiwrap 设置时，示例中列出的路径是 Ubuntu 中的默认路径。

===

我正要试一试。

# php - 查看使用 AJAX 加载的文件中的 PHP 变量

> ID：11667490
> 
> 赞同：0
> 
> 时间：2012-07-26T10:37:02.110
> 
> 标签：php, ajax

如果我有一个包含以下内容的 PHP 页面：

`<?php $showLink = true; ?>`

然后在一些内容中使用 AJAX 加载，内容如下：

```
<?php if($showLink ) { ?>
    <a href="#">This link should appear if the variable exists</a>
    <?php } ?> 
```

加载的页面在父页面中看不到变量...任何想法为什么？

我已经尝试使用两个会话和定义，并且发生了同样的问题，并且还尝试在 ajax 设置中将缓存设置为 false。

真的很纠结这个。。。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T10:40:35.807

`$showLink`只需在进行 AJAX 调用时作为参数传递。然后在您使用 AJAX 调用的服务器端脚本中处理该变量。

**编辑：**这是我可以给出的最佳建议，而无需查看实际源代码或获得更多信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-26T10:54:58.150

```
<?php
session_start();
$_SESSION['showLink'] = true; ?> 
```

和

```
<?php
session_start();
 if($_SESSION['showLink']) { ?>
    <a href="#">This link should appear if the variable exists</a>
 <?php } ?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-26T10:42:17.130

```
<?php 

if($showLink == true) {
  echo '<a href="#">This link should appear if the variable exists</a>';
} 

?> 
```

您无需关闭并重新打开 php 标签。您需要实际比较变量，或者如果您想检查它是否存在，请使用`isset($showLink)`

鉴于你所展示的，这就是我真正能说的。

# glassfish-3 - 什么是 GlassFish 3.1.x 域初始值设定项？

> ID：11667493
> 
> 赞同：8
> 
> 时间：2012-07-26T10:37:22.183
> 
> 标签：glassfish-3

在 GlassFish 3.1.1 中使用 create-domain 命令时，我看到此日志消息

```
No domain initializers found, bypassing customization step 
```

域初始化器可以完成什么？有文件吗？

此处显示了带有日志记录输出的创建域用法示例，

[http://docs.oracle.com/cd/E18930_01/html/821-2433/create-domain-1.html](http://docs.oracle.com/cd/E18930_01/html/821-2433/create-domain-1.html)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-11T12:36:40.580

参考手册报告：

> 如果在运行 create-domain 子命令时在 as-install/modules 目录的 JAR 文件中找到域定制器，则处理定制器。域定制器是一个实现 DomainInitializer 接口的类。

我确实没有找到有关自定义的文档，但根据源代码，我可以确定域初始化程序用于在域创建期间自定义 domain.xml。

```
package org.glassfish.api.admin.config;

import org.jvnet.hk2.annotations.Contract;
import org.glassfish.api.admin.config.Container;

/**
 * Marker interface to mark inhabitants that require some minimal initial 
 * configuration to be inserted into a newly create domain's domain.xml
 *
 * @author Nandini Ektare
 */
@Contract
public interface DomainInitializer {
    /**
     * The actual initial config that needs to be inserted into
     * the fresh domain.xml
     *
     * See {@link Attribute#value()} for how the default value is inferred.
     *
     */
    public <T extends Container> T getInitialConfig(DomainContext initialCtx);
} 
```

你可以在[这里](http://grepcode.com/file/repo1.maven.org/maven2/org.glassfish.common/glassfish-api/3.1/org/glassfish/api/admin/config/DomainInitializer.java)找到来源。

该`getInitialConfig`方法返回一个`Container`实例。`Container`interface 扩展`org.jvnet.hk2.config.ConfigBeanProxy`了似乎是`Dom`类代理的接口：

```
/**
 * Marker interface that signifies that the interface
 * is meant to be used as a strongly-typed proxy to
 * {@link Dom}. 
 *
 * <p>
 * To obtain the Dom object, use {@link Dom#unwrap(ConfigBeanProxy)}.
 * This design allows the interfaces to be implemented by other code
 * outside DOM more easily.
 *
 * @author Kohsuke Kawaguchi
 * @see Dom#unwrap(ConfigBeanProxy)
 * @see DuckTyped
 * @see Element
 * @see Attribute
 */
public interface ConfigBeanProxy { 
```

我发现[hk2](http://hk2.java.net/)是了解域自定义如何工作的关键。

我希望其他人能给你一些更有用的信息。

# iphone - 从 iPhone 中保存的视频文件路径获取缩略图

> ID：11667495
> 
> 赞同：2
> 
> 时间：2012-07-26T10:37:27.987
> 
> 标签：iphone, objective-c, video

我正在尝试在我的一个应用程序中显示下载视频的缩略图。我已经在表格视图中显示了图像以及视频标题。我正在使用此代码获取图像：

```
NSURL *videoURL = [NSURL fileURLWithPath:myString];
MPMoviePlayerController *player = [[MPMoviePlayerController alloc] 
    initWithContentURL:videoURL];

UIImage *thumbnail = 
    [player thumbnailImageAtTime:1.0 
                      timeOption:MPMovieTimeOptionNearestKeyFrame];      
cell.imageView.image = thumbnail;` 
```

显示从 YouTube 下载的文件的图像，但我没有从 .flv 视频文件中获取图像。任何人都可以提出解决方案吗？这是我的视频路径示例

```
/Users/admin/Library/Application Support/iPhone Simulator/5.0/Applications/AA8DDEED-E91C-47BB-8F1E-C057D9E94B7C/Documents/downloads/qkycmzafawmk.flv 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T10:49:11.387

`thumbnail`调用后的价值是`-thumbnailImageAtTime:timeOption:`多少？假设这`UIImage`不是`nil`，您检查过它的`alpha`属性吗？

如果`thumbnail`是`nil`，您是否检查了有关此的许多其他 SO 问题？这里有一些可以帮助您入门：

*   [MPMoviePlayerControlle thumbnailImageAtTime: timeOption: 给空 UIImage](https://stackoverflow.com/questions/7178631/mpmovieplayercontrolle-thumbnailimageattime-timeoption-giving-empty-uiimage)
*   [MPMoviePlayerController thumbnailImageAtTime:timeOption: 简单案例不起作用](https://stackoverflow.com/questions/11496757/mpmovieplayercontroller-thumbnailimageattimetimeoption-simple-case-doesnt-wor)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T10:28:04.523

这是我为解决这个问题而遵循的教程。希望这可以帮助某人： http: [//www.codza.com/extracting-frames-from-movies-on-iphone](http://www.codza.com/extracting-frames-from-movies-on-iphone)。

# c# - 具有多色行的虚拟 DataGridView 导致 CellValueNeeded 竞争

> ID：11667500
> 
> 赞同：0
> 
> 时间：2012-07-26T10:37:52.610
> 
> 标签：c#, datagridview, virtual

我第一次尝试虚拟 DataGridView 时遇到了一个奇怪的问题。网格显示来自 DataTable 的数据，并且根据状态列的值对行进行颜色编码。我使用事件*RowPostPaint*根据其状态值设置每行的颜色。

只要网格中的行在所有列中都具有相同的颜色，这将非常有效。但是当我每行引入一种以上的颜色时，网格会变得疯狂并连续触发 CellValueNeeded 事件，并且 CPU 使用率会上升到 100%。一旦多色行滚动出视图，问题就会消失。

DataGridView 在常规模式下没有问题。但是，我真的很想使用虚拟 DataGridView 来实现最佳性能。有谁知道这个问题以及如何避免它？

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Windows.Forms;
using System.Diagnostics;

namespace VirtualDGV
{
    public partial class Form1 : Form
    {
        protected Color greenColor =  Color.FromArgb(200, 240, 140);
        protected Color redColor = Color.FromArgb(255, 100, 50);
        protected Color cyanColor = Color.FromArgb(175, 255, 225);
        protected Color pinkColor = Color.FromArgb(255, 200, 150);

        private DataTable data = null;

        public Form1()
        {
            InitializeComponent();

            LoadData2();

            dgv.VirtualMode = true;

            dgv.CellValueNeeded += new DataGridViewCellValueEventHandler(dgv_CellValueNeeded);
            dgv.RowPostPaint += new DataGridViewRowPostPaintEventHandler(dgv_RowPostPaint);
        }

        private void CreateDataTable()
        {
            if (data != null)
            {
                data.Clear();
                data.Dispose();
                data = null;
            }

            data = new DataTable();
            List<DataColumn> columns = new List<DataColumn>();
            columns.Add(new DataColumn("A", typeof(string)));
            columns.Add(new DataColumn("B", typeof(string)));
            columns.Add(new DataColumn("C", typeof(DateTime)));
            columns.Add(new DataColumn("D", typeof(DateTime)));
            columns.Add(new DataColumn("E", typeof(string)));
            columns.Add(new DataColumn("F", typeof(double)));
            columns.Add(new DataColumn("G", typeof(double)));
            columns.Add(new DataColumn("H", typeof(string)));
            columns.Add(new DataColumn("I", typeof(string)));
            columns.Add(new DataColumn("J", typeof(int)));
            columns.Add(new DataColumn("Status", typeof(int)));

            data.Columns.AddRange(columns.ToArray());
        }

        private void LoadData1()
        {
            CreateDataTable();

            data.Rows.Add("Abcdefghijklmnopqrstuvwxyz", "XYZ", DateTime.Now, DateTime.Now, "ZZZ", 110, 110, "", "", 250, 2);
            data.Rows.Add("Abcdefghijklmnopqrstuvwxyz", "XYZ", DateTime.Now, DateTime.Now, "ZZZ", 110, 110, "", "", 250, 0);
            data.Rows.Add("Abcdefghijklmnopqrstuvwxyz", "XYZ", DateTime.Now, DateTime.Now, "ZZZ", 110, 110, "", "", 250, 1);
            data.Rows.Add("Abcdefghijklmnopqrstuvwxyz", "XYZ", DateTime.Now, DateTime.Now, "ZZZ", 110, 110, "", "", 250, 5);
            data.Rows.Add("Abcdefghijklmnopqrstuvwxyz", "XYZ", DateTime.Now, DateTime.Now, "ZZZ", 110, 110, "", "", 250, 5);
            data.Rows.Add("Abcdefghijklmnopqrstuvwxyz", "XYZ", DateTime.Now, DateTime.Now, "ZZZ", 110, 110, "", "", 250, 5);
            data.Rows.Add("Abcdefghijklmnopqrstuvwxyz", "XYZ", DateTime.Now, DateTime.Now, "ZZZ", 110, 110, "", "", 250, 0);
            data.Rows.Add("Abcdefghijklmnopqrstuvwxyz", "XYZ", DateTime.Now, DateTime.Now, "ZZZ", 110, 110, "", "", 250, 0);
            data.Rows.Add("Abcdefghijklmnopqrstuvwxyz", "XYZ", DateTime.Now, DateTime.Now, "ZZZ", 110, 110, "", "", 250, 0);
            data.Rows.Add("Abcdefghijklmnopqrstuvwxyz", "XYZ", DateTime.Now, DateTime.Now, "ZZZ", 110, 110, "", "", 250, 0);
            data.Rows.Add("Abcdefghijklmnopqrstuvwxyz", "XYZ", DateTime.Now, DateTime.Now, "ZZZ", 110, 110, "", "", 250, 0);
            data.Rows.Add("Abcdefghijklmnopqrstuvwxyz", "XYZ", DateTime.Now, DateTime.Now, "ZZZ", 110, 110, "", "", 250, 0);

            dgv.RowCount = data.Rows.Count;
        }

        private void LoadData2()
        {
            CreateDataTable();
            data.Rows.Add("Abcdefghijklmnopqrstuvwxyz", "XYZ", DateTime.Now, DateTime.Now, "ZZZ", 110, 110, "", "", 250, 0);
            data.Rows.Add("Abcdefghijklmnopqrstuvwxyz", "XYZ", DateTime.Now, DateTime.Now, "ZZZ", 110, 110, "", "", 250, 9);
            data.Rows.Add("Abcdefghijklmnopqrstuvwxyz", "XYZ", DateTime.Now, DateTime.Now, "ZZZ", 110, 110, "", "", 250, 0);
            data.Rows.Add("Abcdefghijklmnopqrstuvwxyz", "XYZ", DateTime.Now, DateTime.Now, "ZZZ", 110, 110, "", "", 250, 0);
            data.Rows.Add("Abcdefghijklmnopqrstuvwxyz", "XYZ", DateTime.Now, DateTime.Now, "ZZZ", 110, 110, "", "", 250, 0);
            data.Rows.Add("Abcdefghijklmnopqrstuvwxyz", "XYZ", DateTime.Now, DateTime.Now, "ZZZ", 110, 110, "", "", 250, 0);
            data.Rows.Add("Abcdefghijklmnopqrstuvwxyz", "XYZ", DateTime.Now, DateTime.Now, "ZZZ", 110, 110, "", "", 250, 0);
            data.Rows.Add("Abcdefghijklmnopqrstuvwxyz", "XYZ", DateTime.Now, DateTime.Now, "ZZZ", 110, 110, "", "", 250, 0);
            data.Rows.Add("Abcdefghijklmnopqrstuvwxyz", "XYZ", DateTime.Now, DateTime.Now, "ZZZ", 110, 110, "", "", 250, 0);
            data.Rows.Add("Abcdefghijklmnopqrstuvwxyz", "XYZ", DateTime.Now, DateTime.Now, "ZZZ", 110, 110, "", "", 250, 0);
            data.Rows.Add("Abcdefghijklmnopqrstuvwxyz", "XYZ", DateTime.Now, DateTime.Now, "ZZZ", 110, 110, "", "", 250, 0);
            data.Rows.Add("Abcdefghijklmnopqrstuvwxyz", "XYZ", DateTime.Now, DateTime.Now, "ZZZ", 110, 110, "", "", 250, 0);
            data.Rows.Add("Abcdefghijklmnopqrstuvwxyz", "XYZ", DateTime.Now, DateTime.Now, "ZZZ", 110, 110, "", "", 250, 0);

            dgv.RowCount = data.Rows.Count;
        }

        protected void SetRowColor(DataGridViewRow row, int status, int dateColumn, int amountColumn)
        {
            switch (status)
            {
                case 10:
                    for (int i = 1; i < row.Cells.Count; i++)
                        row.Cells[i].Style.BackColor = greenColor;

                    row.Cells[dateColumn].Style.BackColor = Color.FromArgb(255, 170, 130);
                    break;

                case 11:
                    row.Cells[dateColumn].Style.BackColor = Color.FromArgb(255, 170, 130);
                    row.Cells[amountColumn].Style.BackColor = greenColor;
                    break;

                case 1:
                    for (int i = 1; i < row.Cells.Count; i++)
                        row.Cells[i].Style.BackColor = greenColor;
                    break;

                case 2:
                    for (int i = 1; i < row.Cells.Count; i++)
                        row.Cells[i].Style.BackColor = greenColor;

                    row.Cells[amountColumn].Style.BackColor = pinkColor;
                    break;

                case 3:
                    for (int i = 1; i < row.Cells.Count; i++)
                        row.Cells[i].Style.BackColor = greenColor;

                    row.Cells[dateColumn].Style.BackColor = Color.FromArgb(255, 170, 130);
                    break;

                case 4:
                    row.Cells[dateColumn].Style.BackColor = Color.FromArgb(255, 170, 130);
                    row.Cells[amountColumn].Style.BackColor = Color.FromArgb(255, 200, 150);
                    break;

                case 5:
                    for (int i = 1; i < row.Cells.Count; i++)
                        row.Cells[i].Style.BackColor = redColor;
                    break;

                case 6:
                    for (int i = 1; i < row.Cells.Count; i++)
                        row.Cells[i].Style.BackColor = cyanColor;
                    break;

                case 7:
                    row.Cells[amountColumn].Style.BackColor = greenColor;
                    break;

                case 8:
                    for (int i = 1; i < row.Cells.Count; i++)
                        row.Cells[i].Style.BackColor = cyanColor;
                    break;

                case 9:
                    for (int i = 1; i < row.Cells.Count; i++)
                        row.Cells[i].Style.BackColor = greenColor;

                    row.Cells[dateColumn].Style.BackColor = redColor;
                    row.Cells[amountColumn].Style.BackColor = redColor;
                    break;

            }
        }

        private void dgv_CellValueNeeded(object sender, DataGridViewCellValueEventArgs e)
        {
            //Debug.WriteLine(e.RowIndex + ", " + e.ColumnIndex);

            e.Value = data.Rows[e.RowIndex][e.ColumnIndex];
        }

        private void dgv_RowPostPaint(object sender, DataGridViewRowPostPaintEventArgs e)
        {
            SetRowColor(dgv.Rows[e.RowIndex], (int)data.Rows[e.RowIndex]["Status"], 4, 7);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T10:52:08.730

像这样处理 CellFormatting 事件而不是 RowPostPaint：

```
private void dataGridView1_CellFormatting(object sender, DataGridViewCellFormattingEventArgs e)
{
    if (e.RowIndex == 1 && e.ColumnIndex == 2)
    {
        e.CellStyle.ForeColor = Color.Red;
    }
} 
```

只使用 CellStyle 属性，不要触摸`dgv[col, row].Style`属性，因为会再次触发事件。

# c# - 如何对创建任务的方法进行单元测试

> ID：11667505
> 
> 赞同：2
> 
> 时间：2012-07-26T10:38:21.660
> 
> 标签：c#, unit-testing, c#-4.0, task

以下方法应该如何进行单元测试？

```
 /// <summary>
    /// Entry point for GUI thread.
    /// </summary>
    public void VerifyDataTypesAsync()
    {
        Task verificationTask = Task.Factory.StartNew(() =>
        {
            VerifyDataManagerAsync();
        });
    } 
```

是否只能通过集成测试进行测试，或者是否可以测试已创建任务？

谢谢你的帮助

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-26T11:39:40.940

您可以创建一个工厂来创建此任务并通过接缝使用它。您可以使用属性接缝 - 这是当您将工厂的实例设置为被测类的属性时，或者您可以通过构造函数为工厂提供构造函数接缝。然后你可以模拟这个工厂并通过两个接缝之一设置它，并检查你的 VerifyDataTypesAsync 方法是否调用了创建任务的方法。

```
class YourClass
{
    public YourClass(ITaskFactory factory)
    {}

    public void VerifyDataTypesAsync()
    {
       Task verificationTask = factory.Create(); // you can pass an instance of a delegate as parameter if you need.  
    }
}

class TasksFactory : IFactory
{
   public Task Create()
   {

   }
} 
```

然后在您的测试中，您可以创建一个 IFactory 的模拟对象并将其传递给您的类的构造函数，然后为模拟设置模拟规则以检查方法 Create 是否被调用。

如果我们谈论的是 NUnit 和 RhinoMocks，可以查看以下内容：

```
var mockRepository = new MockRepository();
var mockObject = mockRepository.CreateMock<IFactory>();
var yourClass = new YourClass(mockObject);    

Expect.Call(mockObject.Create);

mockRepository.ReplayAll();

mockObject.VerifyDataTypesAsync()

mockRepository.VerifyAll(); // throw Exception if your VerifyDataTypesAsync method doesn't call Create method of IFactory mock 
```

大致这样说……但这只是一种方式……

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-26T11:08:53.670

您可以将任务的创建包装在您自己的 Task 工厂类中，并通过在单元测试中模拟它来验证它是否已正确使用。例如，创建一个这样的类：

```
class MyTaskFactory
{
  public virtual void CreateTask(Action a)
  {
    Task.Factory.StartNew(a);
  }
} 
```

您为需要创建任务的对象提供这些工厂对象之一。在单元测试中，您提供一个模拟版本而不是实际工厂，并查看该`CreateTask`方法是否已被调用。

有关模拟的更多信息，请查看[RhinoMocks](http://ayende.com/blog/tags/rhino-mocks)或[Moq](http://code.google.com/p/moq/)。

# php - MAMP Pro 图像在 Mountain Lion 上不刷新

> ID：11667506
> 
> 赞同：1
> 
> 时间：2012-07-26T10:38:23.120
> 
> 标签：php, apache, mamp

我每天都使用 mamp Pro 在本地测试基于 php 的站点，尽管我是一个简单的设计师，编写 PhP 真的不是我的事。自从我安装 OS X ML 以来，我一直遇到的问题是，当在浏览器中测试站点时，图像似乎缓存了一次，然后永远不会刷新，即使在替换相同的图像或在 PS 中编辑它之后也是如此。

我认为这是 MAMP 的图像缓存问题，因为它发生在所有浏览器中，除非我在刷新页面之前清除缓存。HTML 和 CSS 更新非常好。

不用说，这是一个大问题，因为这意味着我需要做一大堆测试而不是简单的页面刷新。

有人遇到这个问题或可以提供解决方案吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-28T11:58:34.167

MAMP 似乎默认启用[mod_expires](http://httpd.apache.org/docs/current/mod/mod_expires.html)（至少在我的 MAMP 2.1.0 安装中），因此您应该能够在 .htaccess 文件中添加一些适当的设置。

默认立即过期：

```
 ExpiresActive On
 ExpiresDefault "now" 
```

或者更细化（修改到期以适应您的测试）：

```
 ExpiresActive On
 ExpiresDefault "now"
 ExpiresByType image/gif "access plus 10 seconds"
 ExpiresByType image/jpeg "access plus 10 seconds"
 ExpiresByType image/png "access plus 10 seconds"
 ExpiresByType text/css "access plus 10 seconds"
 ExpiresByType text/javascript "access plus 2 minutes"
 ExpiresByType application/x-javascript "access plus 2 minutes"
 ExpiresByType application/x-shockwave-flash "access plus 10 minutes"
 ExpiresByType text/xml "access plus 5 seconds" 
```

如果出现无效指令的错误，则需要启用`mod_expires`.

*   在 MAMP PRO 中，这是在 Server => Apache 选项卡上完成的。确保`expires_module`检查模块。

*   在香草 MAMP 中，您可以编辑`/Applications/MAMP/conf/apache/httpd.conf`. 应该有一个类似于以下内容的注释行：

    # LoadModule expires_module modules/mod_expires.so

    ...删除前导“#”以取消注释。

启用后，`mod_expires`您需要使用 MAMP 管理界面来停止/启动服务器，并且 Expires 指令现在应该可用。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-10-19T21:59:28.960

在我禁用缓存之前，我的页面不会刷新。也许它适用于您的图像。如果您使用 php 版本 5.5.3，则在您的 MAMP 首选项中有一个缓存。同样的事情发生在我身上，我在那里找到了解决方案：[MAMP time between seen live changes](https://stackoverflow.com/questions/19079089/mamp-time-between-seeing-live-changes)

In your MAMP Dir go to : /bin/php/php5.5.3/conf/php.ini
并评论 Opcahe 行：

```
[OPcache]
;zend_extension="/Applications/MAMP/bin/php/php5.5.3/lib/php/extensions/no-debug-non-zts-20121212/opcache.so"
;  opcache.memory_consumption=128
;  opcache.interned_strings_buffer=8
;  opcache.max_accelerated_files=4000
;  opcache.revalidate_freq=60
;  opcache.fast_shutdown=1
;  opcache.enable_cli=1 
```

# postgresql - 如何将主键添加到视图？

> ID：11667508
> 
> 赞同：26
> 
> 时间：2012-07-26T10:38:30.860
> 
> 标签：postgresql

我有一个观点，想将一个属性设为主键。

```
CREATE VIEW filedata_view
AS SELECT num PRIMARY KEY, id, ST_TRANSFORM(the_geom,900913) AS the_geom
FROM filedata 
```

但是得到一个错误

```
ERROR:  syntax error at or near "PRIMARY"
LINE 2: AS SELECT num PRIMARY KEY, id, ST_TRANSFORM(the_geom,900913)... 
```

这个怎么做？

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-07-26T10:47:58.830

Postgresql 中的视图不能有主键。

您基本上在视图上创建约束的方式是错误的，应该在表上创建约束，但是某些 DBMS 确实支持使用以下语法在诸如 oracle 之类的视图上添加约束：

```
ALTER VIEW VIEW_NAME ADD PRIMARY KEY PK_VIEW_NAME DISABLE NOVALIDATE; 
```

[Oracle Doc For Constraints](https://docs.oracle.com/cd/B19306_01/server.102/b14200/clauses002.htm)

> 您只能在视图上指定唯一、主键和外键约束，并且它们仅在 DISABLE NOVALIDATE 模式下受支持。

所以他们只支持它的兼容性，如果你想有一个主键来停止在**filedata表的第****num**列中插入重复数据，你应该通过改变**filedata**表并在其上添加主键或创建你的表来做到这一点从一开始就在列**num上使用主键。**

 ******* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-07-26T10:50:28.327

Postgresql 不支持对视图的约束。其他 DBMS（例如 Oracle）确实支持这一点，但 Postgresql 不支持。******

# java - 单类休眠中的嵌套限制

> ID：11667509
> 
> 赞同：0
> 
> 时间：2012-07-26T10:38:32.327
> 
> 标签：java, hibernate, criteria

我正在尝试为不在表中的类的依赖字段添加标准。person 类有年龄和体重字段。现在我想要年龄正好比他的体重小 5 岁的人的列表。

在 SQL 查询中将是这样的：

`select * from Person p Where p.age = p.weight +5 ;`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T14:23:55.343

至少有 sqlRestriction

```
Restrictions.sqlRestriction("AGE = WEIGHT + 5") 
```

我看不出有任何方法（除了实现您自己的 Criterion 对象）使用标准 api 执行此操作。使用 hql 可能会更好。

# c# - 确定 MSBuild CoreCompile 是否将运行并调用自定义目标

> ID：11667510
> 
> 赞同：8
> 
> 时间：2012-07-26T10:38:33.187
> 
> 标签：c#, msbuild

这似乎是一件显而易见的事情，但我已经把大部分头发都拉出来了，试图在网上找到任何例子或自己做。

我有 19 个项目的 ac# 解决方案和一个运行构建脚本来驱动 MSBuild 的 Jenkins 构建服务器。MSBuild 当然会根据输入与输出来确定需要编译和不需要编译的内容。

我正在尝试创建一个自定义目标，以有条件地更新 MSBuild 将要编译的那些项目的 AssemblyInfo.cs 以增加文件版本。当然，我想让项目不单独编译。

我知道如何在每次运行的 CoreBuild 之前注入一个目标，所以如果有一些变量，我可以测试看看是否会发生可以工作的编译。我也知道如何确定编译是否运行，因此有条件地进行一些可能但不理想的后处理。

我如何调整我的构建过程来实现这一点？

由于这个问题似乎没有直接的答案，有谁知道如何执行与 MSBuild 相同的逻辑来确定哪些项目需要重建？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-08T17:04:27.727

最后，解决方案结合了[Sayed Ibrahim Hashimi 的博客条目](http://sedodream.com/2012/07/28/MSBuildHowToExecuteATargetAfterCoreCompilePart2.aspx)和 MSDN 论坛条目['Execute target when (core)compile will execute'](http://social.msdn.microsoft.com/Forums/eu/msbuild/thread/e2b77ab3-b8bb-41d1-83b3-fe1e46fdc4de)中的信息。

我基本上采用了 Sayed 的注入方法来让我的目标在所有项目上运行“extend-corecompile.proj”，而无需编辑每个 proj 文件，但将其内容替换为“CoreCompileDependsOn”的覆盖，该覆盖指向采用相同的自定义目标输入和输出作为“CoreCompile”目标。最终结果是一个仅在“CoreCompile”运行时运行的目标，同时在构建脚本中进行集中管理。

感谢大家的输入，这是我在“extend-corecompile.proj”中使用的框架代码：

```
<!--The following property group adds our custom post-target to the post compile call list -->
<PropertyGroup>
    <TargetsTriggeredByCompilation>
        $(TargetsTriggeredByCompilation);
        CustomPostTarget
    </TargetsTriggeredByCompilation>
</PropertyGroup>

<!--The following property group adds our custom pre-target to CoreCompileDependsOn to ensure it is called before CoreCompile -->
<PropertyGroup>
    <CoreCompileDependsOn>
        $(CoreCompileDependsOn);
        CustomPreTarget
    </CoreCompileDependsOn>
</PropertyGroup>

<!-- The following custom pre-target has the same inputs and outputs as CoreCompile so that it will only run when CoreCompile runs.
    Because we have injected this file and Targets are resolved in sequence we know this Target will fire before CoreCompile.-->
<Target Name="CustomPreTarget" 
    Inputs="$(MSBuildAllProjects);
            @(Compile);                               
            @(_CoreCompileResourceInputs);
            $(ApplicationIcon);
            $(AssemblyOriginatorKeyFile);
            @(ReferencePath);
            @(CompiledLicenseFile);
            @(EmbeddedDocumentation); 
            $(Win32Resource);
            $(Win32Manifest);
            @(CustomAdditionalCompileInputs)"
    Outputs="@(DocFileItem);
             @(IntermediateAssembly);
             @(_DebugSymbolsIntermediatePath);                 
             $(NonExistentFile);
             @(CustomAdditionalCompileOutputs)">
    <!--Do pre-compilation processing here-->
</Target>

<!--This target will be called by CoreCompile-->
<Target Name="CustomPostTarget" >
    <!--Do post-compilation processing here-->
</Target> 
```

不确定如果 CoreCompile 失败会发生什么，它仍然调用我们的目标吗？我想我们会及时发现:)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-07-28T23:32:56.313

我刚刚在[http://sedodream.com/2012/07/28/MSBuildHowToExecuteATargetAfterCoreCompilePart2.aspx](http://sedodream.com/2012/07/28/MSBuildHowToExecuteATargetAfterCoreCompilePart2.aspx)上写了这个答案，但我已经在下面为您粘贴了解决方案。

几个月前，我写了一篇博[文 MSBuild 如何在 CoreCompile 之后执行目标](https://stackoverflow.com/q/11667510/105999)，其中我描述了如果执行 CoreCompile 目标，您如何执行目标，如果跳过 CoreCompile，那么您的其他目标也将如此。我在上一篇文章中概述的方法的缺点是它需要您编辑 .csproj/.vbproj/etc 文件本身。因此，如果您有构建多个项目的场景，那么您将不得不编辑所有项目文件。在这篇文章中，我将描述如何执行相同的自定义，而无需编辑项目文件本身。

在我们为这个特殊案例找到解决方案之前，让我描述一下 C# 和 VB 项目所具有的可扩展性挂钩。用于构建 C# 和 VB 项目的大部分逻辑都包含在 C:\Windows\Microsoft.NET\Framework\v4.0.30319\Microsoft.Common.targets 的 MSBuild 目标文件中。如果您查看该文件，您会注意到顶部的导入如下所示。

```
<Import Project="$(CustomBeforeMicrosoftCommonTargets)" Condition="'$(CustomBeforeMicrosoftCommonTargets)' != '' and Exists('$(CustomBeforeMicrosoftCommonTargets)')"/> 
```

如果属性不为空且文件存在，则此语句将导入文件（位于 CustomBeforeMicrosoftCommonTargets 的值处）。CustomBeforeMicrosoftCommonTargets 的默认值为 C:\Program Files (x86)\MSBuild\v4.0\Custom.Before.Microsoft.Common.targets。因此，如果您将 MSBuild 文件放在该位置，它将修改在该计算机上构建的每个 C#/VB 项目的构建过程。或者，如果您不想要（或由于 ACL 而不能），则可以将文件放到其他位置，然后通过覆盖 CustomBeforeMicrosoftCommonTargets 属性来指定其位置。这是我将在这里采取的方法。我创建了一个示例解决方案，其中包含两个项目 ProjA 和 ProjB。我还有一个构建脚本 build.proj，可以为此自动构建。下面是 build.proj 的全部内容。

## 构建项目

```
<?xml version="1.0" encoding="utf-8"?>
<Project ToolsVersion="4.0" DefaultTargets="Build" xmlns="http://schemas.microsoft.com/developer/msbuild/2003">
  <PropertyGroup>
    <FileToInject Condition=" '$(FileToInject)'=='' ">$(MSBuildThisFileDirectory)extend-corecompile.proj</FileToInject>
  </PropertyGroup>

  <ItemGroup>
    <ProjectsToBuild Include="ProjA\ProjA.csproj"/>
    <ProjectsToBuild Include="ProjB\ProjB.csproj"/>
  </ItemGroup>

  <Target Name="Build">
    <MSBuild Projects="@(ProjectsToBuild)"
             Properties="CustomBeforeMicrosoftCommonTargets=$(FileToInject)" />   
  </Target>

  <Target Name="Clean">
    <MSBuild Projects="@(ProjectsToBuild)" Targets="Clean"/>
  </Target>

  <Target Name="Rebuild" DependsOnTargets="Clean;Build"/>

</Project> 
```

在上面的构建目标中，我使用 MSBuild 任务来构建 ProjA 和 ProjB。如您所见，我正在传递指向extend-corecompile.proj 的属性CustomBeforeMicrosoftCommonTargets=$(FileToInject)。通过在构建 ProjA 和 ProjB 时传递此属性，它将自动为构建过程导入 extend-corecompile.proj 文件。您可以在下面看到 extend-corecompile.proj 的内容。

## 扩展-corecompile.proj

```
<?xml version="1.0" encoding="utf-8"?>
<Project ToolsVersion="4.0" xmlns="http://schemas.microsoft.com/developer/msbuild/2003">
  <PropertyGroup>
    <TargetsTriggeredByCompilation>
      $(TargetsTriggeredByCompilation);
      MyCustomTarget
    </TargetsTriggeredByCompilation>
  </PropertyGroup>

  <Target Name="MyCustomTarget">
    <Message Text="MyCustomTarget called" Importance ="high"/>
  </Target>

</Project> 
```

此项目文件使用[我之前的博客文章](http://sedodream.com/2012/05/14/MSBuildHowToExecuteATargetAfterCoreCompile.aspx)中概述的技术，仅在执行 CoreCompile 时执行 MyCustomTarget。

[注意：您可以在https://github.com/sayedihashimi/sayed-samples/tree/master/ExtBuildMultiple](https://github.com/sayedihashimi/sayed-samples/tree/master/ExtBuildMultiple)获取此示例的最新版本。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-26T11:47:11.763

即使您获得了需要编译的项目列表，如果您更新其中一个项目的 assemblyinfo.cs，它也可能导致触发另一个项目编译的更改。

因此，最简单的方法是根据源代码控制修订号生成所有 AssemblyInfo.cs 文件。您甚至可以获取每个项目目录的最新修订号，从而有效地了解该项目的“最后”修改时间。

请参阅此问题：[如何使用 MSBuild 更改 AssemblyProduct、AssemblyTitle？](https://stackoverflow.com/questions/3585444/how-can-i-change-assemblyproduct-assemblytitle-using-msbuild)

根据您的评论，您是否查看了 BeforeBuild 和 AfterBuild 目标（在您的 csproj 文件末尾）：

```
 <Target Name="BeforeBuild">
  </Target>
  <Target Name="AfterBuild">
  </Target> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-26T12:05:52.040

或者，您可以使用所有项目都引用的单个自动生成的 VersionInfo.cs 文件。要使用此技术，请从项目的 AssemblyInfo.cs 文件中删除版本、公司信息等属性（是的，这很痛苦，但您只需执行一次），并让批处理命令输出基于模板的 VersionInfo.cs 文件。要在 Visual Studio 中引用公用文件，请从项目上下文菜单中选择添加现有项，然后在文件浏览器中导航到 VersionInfo.cs 文件后，单击添加旁边的下拉箭头并选择添加为关联。

下面是我使用的一个示例。该脚本被检入我们的 SCC 系统并在构建开始时执行，向脚本提供 %BUILD_NUMBER%。

```
SET BUILD=%1

@echo using System.Reflection; > "%~p0Version.cs"
@echo [assembly: AssemblyCompany("MyCompany, Inc.")] >> "%~p0Version.cs"
@echo [assembly: AssemblyProduct("MyProduct")] >> "%~p0Version.cs"
@echo [assembly: AssemblyCopyright("Copyright © 2012 MyCompany, Inc.")] >> "%~p0Version.cs"
@echo [assembly: AssemblyTrademark("")]@echo [assembly: AssemblyVersion("1.0.%BUILD%.0")] >> "%~p0Version.cs"

@echo [assembly: AssemblyFileVersion("1.0.%BUILD%.0")] >> "%~p0Version.cs"

@echo ^<Include xmlns="http://schemas.microsoft.com/wix/2006/wi"^> > "%~p0Version.wxi"
@echo   ^<?define VersionBuild="%BUILD%"?^> >> "%~p0Version.wxi"
@echo ^</Include^> >> "%~p0\Version.wxi" 
```

# php - php INF 的值为零

> ID：11667512
> 
> 赞同：1
> 
> 时间：2012-07-26T10:38:49.717
> 
> 标签：php

我有一个系统，其中 php 预定义常量 INF var_dumps 为 0（零）。

```
$inf = INF;
var_dump($inf); 
```

结果：

> 浮动（0）

这是正确的行为吗？我猜不是。

是什么原因造成的？

我本来期望的这个值：http:
[//codepad.org/LQRuFMyg](http://codepad.org/LQRuFMyg)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2018-04-07T16:51:46.730

从 PHP 7.0.0 开始，NaN 和 Infinity 在转换为整数时将始终为零，而不是未定义和平台相关。链接：<a href="http://www.php.net/manual/en/language.types.integer.php" rel="nofollow noreferrer">http://www.php.net/manual/en/语言.types.integer.php

# javascript - 自动重新连接超时后如何在活动中重新连接 socket.io 客户端？

> ID：11667516
> 
> 赞同：7
> 
> 时间：2012-07-26T10:39:03.647
> 
> 标签：javascript, socket.io

笔记本电脑进入睡眠状态是很常见的。这会导致 socket.io 客户端断开连接。当用户返回 Web 应用程序时，socket.io 客户端不会尝试重新连接（可能已达到重新连接限制？）。如果用户执行某些操作，我如何告诉套接字重新连接？

例如，我希望该`emit`功能检查连接是否处于活动状态，如果没有，则尝试重新连接。

注意：我只需要客户端的 JS 代码，我没有使用 node.js。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-18T07:28:53.067

在 0.9 版中，您可以尝试将连接选项对象设置为一些激进的设置：

```
 var main = io.connect('/', {
    'reconnection delay': 100, // defaults to 500
    'reconnection limit': 100, // defaults to Infinity
    'max reconnection attempts': Infinity // defaults to 10
  }); 
```

请注意，`max reconnection attemps`这并不意味着 io 客户端将在 10 次尝试失败后停止重新连接到服务器。如果它能够重新连接到服务器 10 次并且第 11 次失去连接，它将停止重新连接。

请参阅[Socket.IO 配置](https://github.com/LearnBoost/Socket.IO/wiki/Configuring-Socket.IO)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-01T22:23:33.963

Socket 实例有一个内部的 'socket' 属性，它又具有你可以调用的 connect() 方法。它通常在您实例化对象时自动调用（由“自动连接”选项控制）。内部套接字还有一个布尔“已连接”属性，如果您不确定状态是什么，您可以检查它。像这样：

```
sio = io.connect();
//... time passes ...
if (! sio.socket.connected) {
  sio.connect();
} 
```

connect() 方法检查以确保套接字不在尝试连接的过程中，但由于某种原因它不检查它是否已经连接。不知道如果你 connect() 一个已经连接的套接字会发生什么......

客户端库的源代码相当清晰并且注释很好，这很好，因为[github 上的 README](https://github.com/LearnBoost/socket.io-client#readme)并没有提供很多帮助。在进行开发时使用库的未缩小版本很方便，这样您就可以深入研究源代码。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-26T10:45:42.557

您可以尝试使用该`connect.failed`事件：

```
socket.on('connect_failed', function () {
   /* Insert code to reestablish connection. */
}); 
```

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2014-09-26T16:52:41.170

您可以运行 setInterval 来检查连接状态，例如

```
s.connect()

if (! s.socket.connected) {
   s.connect(); 
```

# jquery - 带有jquery的鱼眼菜单？

> ID：11667520
> 
> 赞同：0
> 
> 时间：2012-07-26T10:39:28.827
> 
> 标签：jquery, menu, fisheye

我想为我的网站制作一个简单的鱼眼菜单，例如[http://www.smartmeup.org](http://www.smartmeup.org)（左侧）

您知道执行此操作的 jquery 插件或简单代码吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T10:49:01.667

这里有一些，让你选择：

*   [界面元素鱼眼菜单](http://interface.eyecon.ro/docs/fisheye)
*   [Mark Grabanski 的 Fisheye js 菜单](http://marcgrabanski.com/articles/fisheye-javascript-menu)
*   [AjaxDaddy 的鱼眼菜单](http://www.ajaxdaddy.com/demo-interface-fisheye.html)
*   [n.design 工作室的鱼眼菜单](http://ndesign-studio.com/blog/css-dock-menu)
*   [wizuud 的 jqDock](http://www.wizzud.com/jqDock/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-26T10:43:14.750

你试过jqdock吗？这是一个jquery插件

[http://www.wizzud.com/jqdock/](http://www.wizzud.com/jqdock/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-12T04:18:38.303

[http://net.tutsplus.com/tutorials/javascript-ajax/jquery-os-x-style-dock-and-stack-navigation/](http://net.tutsplus.com/tutorials/javascript-ajax/jquery-os-x-style-dock-and-stack-navigation/)

我发布这个是因为似乎没有一个线程提供完整的解决方案。很好的建议，但没有确定的，所以我想我会把它放在那里。希望这可以帮助！！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-26T10:47:56.363

下面是一些使用jquery的

[http://www.ajaxdaddy.com/demo-interface-fisheye.html](http://www.ajaxdaddy.com/demo-interface-fisheye.html)

[http://www.webappers.com/2009/06/02/jqdock-jquery-fish-eye-menu/](http://www.webappers.com/2009/06/02/jqdock-jquery-fish-eye-menu/)

[http://blog.jquery.com/2007/05/09/fisheye-dock-menu/](http://blog.jquery.com/2007/05/09/fisheye-dock-menu/)

[http://www.hscripts.com/scripts/jquery/fisheyemenu.php](http://www.hscripts.com/scripts/jquery/fisheyemenu.php)

# asp.net - 母版页图像未显示在内容页面中？

> ID：11667521
> 
> 赞同：3
> 
> 时间：2012-07-26T10:39:30.140
> 
> 标签：asp.net, css, visual-studio, html, master-pages

我有一个带有一个`div`标题的母版页。

```
#header
        {
             background-image: url("images/ST_ERP_2.jpg");
            background-repeat: no-repeat;
            background-position: right top;

            height: 200px;
            width: 1200px;
        } 
```

下面是标题`div`

```
<div id="header" >
            <h1>
                Header goes here</h1>               
</div> 
```

以上两个代码片段都在我的母版页中。

现在我有一个内容页面 ( `xyz.aspx`)，它位于某个目录中。

图像 (ST_ERP_2.jpg) 在`images`文件夹中。

现在，当我尝试`xyz.aspx`在浏览器中查看页面 ( ) 时，它不会显示我设置的图像，`background-image`而是显示一个空白区域。可能是什么问题呢？

**笔记：**

1.  我也尝试过`background-image: url("~/images/ST_ERP_2.jpg");`，但它对我没有帮助。

2.  我正在使用 VS2010 和 ASP.NET

**母版页：**

```
<%@ Master Language="C#" AutoEventWireup="true" CodeFile="Site.master.cs" Inherits="Site" %>

<%@ Register Assembly="AjaxControlToolkit" Namespace="AjaxControlToolkit" TagPrefix="ajax" %>
<%--<%@ Register Assembly="AccordionSiteMap" Namespace="FranchiseBlast.UserControls.Interface"
    TagPrefix="lb" %>--%>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head id="Head1" runat="server">

    <style type="text/css">

        #wrapper
        {
            background: #FFFFFF;
            margin: 0px auto;
            width: 1200px;
            height: 1024px;
        }

        #header
        {
             background-image: url("images/ST_ERP_2.jpg");
            background-repeat: no-repeat;
            background-position: right top;

            height: 200px;
            width: 1200px;
        }

        #footer
        {
            background: #838283;
            height: 40px;
            width: 1200px;
            margin: 600px 0px;
        }
    </style>
    <title></title>
</head>
<body style="background: LightBlue">
    <form id="form1" runat="server">
    <div id="wrapper">
        <div id="header" >
            <h1>
                Header goes here</h1>
            <br />

        </div>
        <!--Header-->

 .... content place holder and etc  ......

         <div id="footer" style="clear: both">
            <h3>
                Footer goes here</h3>
        </div>
        <!--Footer-->
    </div>
    </form>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-26T11:16:49.750

尝试用这个替换背景图像：

```
background-image: url(<%=ResolveClientUrl("~/images/ST_ERP_2.jpg")%>); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T10:44:55.843

尝试：

```
background-image: url("../images/ST_ERP_2.jpg"); 
```

# ajax - 关于 xmlhttp.open 的查询

> ID：11667522
> 
> 赞同：0
> 
> 时间：2012-07-26T10:39:35.323
> 
> 标签：ajax

专家我需要你的帮助

我可以在 xmlhttp.open 参数列表中传递服务器 url，例如：`xmlhttp1.open("GET","http://10.6.10.222/DEV/Cgate/dailystat.txt",true);`

我无法传递服务器 url（第二个参数）并且没有得到响应

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T10:43:12.227

任何可以被浏览器访问的 url 都可以使用 ajax 调用来调用。

如果您可以在浏览器中直接访问您的服务器，那么您可以调用它。

**编辑** 您不能进行跨域呼叫。为此，您需要设置特殊权限。

# android - 网格视图中的焦点问题

> ID：11667528
> 
> 赞同：0
> 
> 时间：2012-07-26T10:39:56.400
> 
> 标签：android, android-layout, android-intent

我的布局中有一个gridview。我在这个 gridview 中添加了三个图像视图。

我有以下要求。默认情况下，当我启动或恢复活动时，我需要默认选择一个图像视图。我怎样才能做到这一点？放置**gridView.setSelection(1);** 在**onResume()**中没有效果，即；imageview 在启动或恢复时没有被选中，我想知道为什么！有人可以告诉我为什么没有突出显示吗？

以下是我的主要活动和适配器类。

```
public class MyActivity extends Activity
{
GridView gridView;
/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState)
{
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    gridView = (GridView) findViewById(R.id.grid_view);
    // Instance of ImageAdapter Class
    gridView.setAdapter(new ImageAdapter(this));
    // set up the onClick listener
    gridView.setOnItemClickListener(new AdapterView.OnItemClickListener() {
        @Override
        public void onItemClick(AdapterView<?> parent, View v,
                                int position, long id) {
            Log.d("Pos", "setOnItemClickListener() - pos:" + position);
            handleItemClick(position);
        }
    });

}
public void onResume() {
    super.onResume();
    gridView.setSelection(1);
}
private void handleItemClick(int position) {

        Intent intent = new Intent();
        intent.setAction(Intent.ACTION_VIEW);

        switch(position) {
            case 0:  // Phone
                intent.setClassName("com.android.contacts",
                        "com.android.contacts.DialtactsActivity");
                break;
            case 1:  // People
                intent.setClassName("com.android.contacts",
                        "com.android.contacts.activities.PeopleActivity");
                intent.setAction("com.android.contacts.action.LIST_CONTACTS");
                break;
            case 2:  // Places
                intent.setClassName("com.android.contacts",
                        "com.android.contacts.DialtactsActivity");
                break;
            default:
                break;
        }
        startActivity(intent);
}
} 
```

适配器类

```
public class ImageAdapter extends BaseAdapter {
private Context mContext;

// Keep all Images in an array   
public Integer[] mThumbIds = {
    R.drawable.call, 
    R.drawable.contacts,
    R.drawable.music,
};

public ImageAdapter(Context c){
    mContext = c;
}

@Override
public int getCount() {
    return mThumbIds.length;
}

@Override
public Object getItem(int position) {
    return mThumbIds[position];
}

@Override
public long getItemId(int position) {
    return position;
}

@Override
public View getView(int position, View convertView, ViewGroup parent) {
    ImageView imageView; 

    if (convertView == null) {           
        imageView = new ImageView(mContext);  
        imageView.setLayoutParams(new GridView.LayoutParams(350, 350));  
    } else {  
        imageView = (ImageView) convertView;   
    }

    imageView.setImageResource(mThumbIds[position]);
    imageView.setId(position);

    return imageView;
}

} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-26T11:02:54.140

你可以试试这个：

```
public void onResume() {
    super.onResume();
    Thread.sleep(1);
    gridview.requestFocusFromTouch();
    gridview.setSelection(1); 
} 
```

或者这也可以帮助：

公共无效 onResume() {

```
super.onResume();
mGridView.setSelection(1);
mGridView.requestFocusFromTouch();
mGridView.setSelection(1); 
```

}

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-26T10:43:22.447

只是猜测可能有效

```
 setContentView(R.layout.main);
    gridView = (GridView) findViewById(R.id.grid_view);
    // Instance of ImageAdapter Class
    gridView.setAdapter(new ImageAdapter(this));
    gridView.setSelection(1); <--- try to add this here 
```

# ruby-on-rails - 数组：数组中的索引 -7

> ID：11667531
> 
> 赞同：-10
> 
> 时间：2012-07-26T10:40:15.727
> 
> 标签：ruby-on-rails

我得到错误：

```
index -7 out of array 
```

我的阵列有什么问题？我不能存储太多数字，还是什么？

**更新**

PS - （从 json 我只得到 ids）

```
answers_from_json = ActiveSupport::JSON.decode(params[:answers_from_json])

answers_from_json.each_with_index do |item, i|

   posts     = Post.find(:all, :conditions => ["id=?",item.to_i])

       sheet[header_y_offset-1,0]           = 'Name'   

   posts.each_with_index do |post,i|
    sheet[1+i,0]  = post.name
   end 
 end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T10:47:31.307

您正在从一个数组中读取一个值，但它并不存在 - 期望一个数组中的元素比它实际的多。再看看你的`sheet`数组，它可能没有`i+1`项目。

编辑：请记住，对于基于 0 的索引，长度为 7 的数组的最后一个索引是 6 ;)

只需打印出它的长度和您尝试访问的索引。然后您可能会看到问题：

```
 posts.each_with_index do |post,i|
     p "length of the post: " + post.size
     p "trying to access element nr. : " + (i + 1)
     sheet[1+i,0]  = post.name
   end 
```

如果此处未引发错误，则可能是`sheet[header_y_offset-1,0]`错误实际发生的语句或类似语句-您得到了我希望的图片。最佳方法是调试 - 但由于我不知道超出基础的红宝石 - 我只能建议如何打印调试 - 这应该足够了。

# android - Android中的OpenGL onCreate片段视图

> ID：11667532
> 
> 赞同：3
> 
> 时间：2012-07-26T10:40:17.023
> 
> 标签：android, android-fragments, opengl-es, oncreate

我创建了 OpenGLRenderer.java 类并在其中放置了一些代码，没有显示错误。然后我将这段代码放在 RoomFragment.java 片段中创建视图：

```
public class RoomFragment extends Fragment {

/** Called when the fragment is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    GLSurfaceView view = new GLSurfaceView(this);
    view.setRenderer(new OpenGLRenderer());
    setContentView(this);
}} 
```

但我越来越

> 构造函数 GLSurfaceView(RoomFragment) 未定义

和

> 未为 RoomFragment 类型定义方法 setContentView(RoomFragment)

错误。这些方法不是在标头中实现的吗？我猜这是因为这不是一个活动，而是一个仅在单击前一个片段的按钮时才处于活动状态的片段（在主活动菜单选择上处于活动状态）。

我该怎么做？如何在片段层中创建 GLSurfaceView？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-26T12:51:05.010

GLSurfaceView 需要`Activity`通过给它一个`Context`. `Fragment`并没有从`Activity`它的外观延伸，你正试图`GLSurfaceView`从它内部创建一个权利。

此外，`setContentView`必须从 中调用`Activity`，基本上你所说的是“我希望这个 Activity 以`**View`告诉它的方式显示”。因此，您必须从 Activity 本身调用该方法。

尝试将 in从调用 的位置`GLSurfaceView`放入，或使用'方法检索它绑定到的。`Activity``Fragment``Fragment``getActivity()``Activity`

第二个解决方案最终看起来像这样：

```
public class RoomFragment extends Fragment {

/** Called when the fragment is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    GLSurfaceView view = new GLSurfaceView(this.getActivity());
    view.setRenderer(new OpenGLRenderer());
    this.getActivity().setContentView(view);
}} 
```

我不确定这是否是您正在寻找的东西，如果它有效，请告诉我！

# c# - Xdocument，获取每个元素的值

> ID：11667536
> 
> 赞同：1
> 
> 时间：2012-07-26T10:40:35.447
> 
> 标签：c#, linq, linq-to-xml

我有如下的xml：

```
<Reports>
  <report>
    <name>By Book</name>
    <report_type>book</report_type>
    <Object>Count Change</Object>
    <Slicers detail="detail">
      <Namespace>EOD</Namespace>
      <BookNode>HighLevel</BookNode>
      <DateFrom>T-2</DateFrom>
      <DateTo>T-1</DateTo>
      <System>NewSystem</System>
    </Slicers>
  </report>
</Reports> 
```

我只是想遍历 Xdocument 的每个元素的值（首选是 Slicers 下的任何元素），但只从所有元素开始。

当我运行以下命令时：

```
 var slicers = from c in config.Elements("Reports")
                      select c.Value ;

        foreach (var xe in slicers)
        {
            Console.WriteLine(xe);
        } 
```

输出是将所有值连接在一起的单行。

“按 BookbookCount 更改 EODHighLevelT-2T-1NewSystem”

我想一次循环浏览它们，首先是“按书”，然后运行一些代码，然后进行预订等。

我确信这很简单，但无法绕过它。我试过 foreach(Xelement in query) 但结果相同

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-07-26T12:48:43.770

我会这样做；

```
XmlDocument doc = new XmlDocument();
doc.LoadXml(xml);
//load in your xml here
XmlNodeList xnList = doc.SelectNodes("nodeYou'reLookingFor");
//for getting just the splicers you could do "Reports/report/Slicers"

foreach (XmlNode node in xnList)
    string namespace = node["Namespace"].InnerText;
    //go through all your nodes here 
```

您正在创建一个 xmldoc，将您的 xml 加载到其中，创建一个包含列表中每个节点的列表（在指定的 Xpath 处），然后遍历每个节点。在循环中，您可以通过引用做任何您想做的事情

```
 node["nodenamehere"].InnerText 
```

# sql - 在表中查找重复的对称行

> ID：11667538
> 
> 赞同：3
> 
> 时间：2012-07-26T10:40:36.350
> 
> 标签：sql, oracle

我有一个包含数据的表

```
col1  col2  
a      b  
b      a  
c      d
d      c
a      d 
a      c 
```

对我来说，第 1 行和第 2 行是重复的，因为`a, b`&`b, a`是相同的。第 3 行和第 4 行也是如此。

我需要一个 SQL（不是 PL/SQL）查询，它的输出为

```
col1   col2
a       b
c       d
a       d
a       c 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-26T10:51:13.660

```
select distinct least(col1, col2), greatest(col1, col2)
from your_table 
```

编辑：对于那些使用支持标准 SQL 函数的 DBMS 的人，`least`可以`greatest`使用 CASE 表达式来模拟：

```
select distinct 
       case 
         when col1 < col2 then col1
         else col2
       end as least_col, 
       case 
         when col1 > col2 then col1
         else col2
        end as greatest_col 
from your_table 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T11:03:25.167

试试这个：

```
CREATE TABLE t_1(col1 varchar(10),col2   varchar(10))

INSERT INTO t_1
VALUES ('a','b'),  
('b','a'),  
('c','d'),
('d','c'),
('a','d'),
('a','c')

;with CTE as (select ROW_NUMBER() over (order by (select 0)) as id,col1,col2,col1+col2 as col3 from t_1)
,CTE1 as (
select id,col1,col2,col3 from CTE where id=1
union all
select c.id,c.col1,c.col2,CASE when c.col3=REVERSE(c1.col3) then null else c.col3 end from CTE c inner join CTE1 c1
on c.id-1=c1.id

)

select col1,col2 from CTE1 where col3 is not null 
```

# java - 用于替换完全匹配的 Java 正则表达式

> ID：11667540
> 
> 赞同：2
> 
> 时间：2012-07-26T10:40:44.240
> 
> 标签：java, regex

我的 java 应用程序正在尝试从文件中修改以下行：

```
static int a = 5; 
```

目标是用“mod_a”替换“a”。

使用一个简单的`string.replace(var_name, "mod" + var_name)`给我以下：

```
stmod_atic int mod_a = 5; 
```

这是完全错误的。谷歌搜索我发现你可以在前面加上“\b”，然后 var_name 必须代表一个单词的开头，但是，`string.replace("\\b" + var_name, "mod" + var_name)`绝对什么都不做:(

（我也用“\b”而不是“\b”进行了测试）

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-26T10:47:48.283

*   `\b`这是一个表示单词边界的[正则表达式](http://docs.oracle.com/javase/7/docs/api/java/util/regex/Pattern.html)，所以它几乎就是你想要的。
*   [`String.replace()`](http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#replaceFirst%28java.lang.String,%20java.lang.String%29)不**使用**正则表达式（因此`\b`只会匹配文字`\b`）。
*   [`String.replaceAll()`](http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#replaceAll%28java.lang.String,%20java.lang.String%29) *确实*使用正则表达式
*   您还可以`\b` *在*变量之前*和*之后使用，以避免将“aDifferentVariable”替换为“mod_aDifferentVariable”。

所以一个可能的解决方案是这样的：

```
String result = "static int a = 5;".replaceAll("\\ba\\b", "mod_a"); 
```

或更笼统地说：

```
static String prependToWord(String input, String word, String prefix) {
    return input.replaceAll("\\b" + Pattern.quote(word) + "\\b", Matcher.quoteReplacement(prefix + word));
} 
```

请注意，我使用`Pattern.qoute()`的 case`word`包含在正则表达式中有意义的任何字符。出于类似的原因[`Matcher.quoteReplacement()`](http://docs.oracle.com/javase/7/docs/api/java/util/regex/Matcher.html#quoteReplacement%28java.lang.String%29)，用于替换字符串。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-26T10:49:06.407

尝试：

```
string.replaceAll("\\b" + var_name + "\\b", "mod" + var_name); 
```

# php - Highslide Gallery 单击缩略图后加载图像（提高页面速度）

> ID：11667544
> 
> 赞同：4
> 
> 时间：2012-07-26T10:41:13.727
> 
> 标签：php, web, photo, thumbnails, slowdown

我使用 Highslide jQuery Gallery 在单个页面上加载专辑及其缩略图。用户可以单击缩略图，然后加载每个相册。

如果我每页有超过 10 个相册（由于加载拇指和图片），网站运行速度很慢，我对数据库中的数据使用 base64 编码。

如何仅加载缩略图而不是整个专辑？仅当用户单击缩略图后，相册才会加载。

```
<?php 

//vars
$albumsQuery = mysql_query("select * from albums");
$album_count = 0;
// start loop
while ($album = mysql_fetch_array($albumsQuery)) {
    $album_count++;
    $unserializePhotos  = unserialize(base64_decode($album['photos']));
    $unserializeDescriptions = unserialize(base64_decode($album['descriptions']));
    $firstPhoto = '';
    $first_photo_count = 0;
    foreach ($unserializePhotos as $k => $v) {
        if ($first_photo_count == 0) {
            $firstPhoto = $v['name'];
        }
        $first_photo_count++;
    }
    $first_desc_count = 0;
    foreach ($unserializeDescriptions as $k => $v) {
        $unserializeDescriptions[$k]=htmlspecialchars($v);
        if ($first_desc_count == 0) {
            $firstDesc = htmlspecialchars($v);
        }
    $first_desc_count++;
    }
?>

<div class="highslide-gallery">
<a class='highslide' id="thumb<?php echo $album_count; ?>" href='/albums/<?php echo $firstPhoto; ?>' onclick="return hs.expand(this, {slideshowGroup: <?php echo $album_count; ?>})">
    <img src='/albums/<?php echo $firstPhoto; ?>' height="100px" width="100px" />
</a>
<div class="hidden-container">
    <?php 
    $photoDescIndex = 0;
    foreach ($unserializePhotos as $k => $v) {
        if ($v['name'] != '' && $v['name'] != $firstPhoto){
    ?>
        <a class='highslide' href='/albums/<?php echo $v['name']; ?>'  onclick="return hs.expand(this, {slideshowGroup: <?php echo $album_count; ?>})">
            <img src='/albums/<?php echo $v['name']; ?>' />
        </a>
    <?php 
        }
    $photoDescIndex++;
    } 
    ?>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T09:36:43.050

1.  您正在将完整图像加载到缩略图中：`<img src='/albums/<?php echo $firstPhoto; ?>' height="100px" width="100px" />`。浏览器需要更多时间来加载大照片，甚至需要更多时间来调整大小。您应该在服务器端准备 100x100 的小缩略图。

2.  您不应`<div class="hidden-container">...</div>`显式加载所有专辑。通过 AJAX 按需加载所选专辑的内容（当用户单击缩略图时）。此外，您可以在页面加载后开始在后台预加载相册。

3.  不要将事件处理程序直接分配给每个`onclick="..."`使用[事件委托](http://api.jquery.com/on/ "事件委托")，例如

    ```
    $("body").on("click", ".highslide", function() {
      var album_count = this.id.slice(5); // a id="thumb<?php echo $album_count; ?>"
      var target = $(this).next("div.hidden-container");
      // TODO: load album album_count into target via AJAX
      // TODO: after load: hs.expand(this, {slideshowGroup: album_count});
    }); 
    ```

# c# - 在连接到我的数据库之前，如何从 C# MOBILE 检查 MySQL 服务器是否处于活动状态

> ID：11667546
> 
> 赞同：0
> 
> 时间：2012-07-26T10:41:24.957
> 
> 标签：c#, mysql

我需要一种快速的方法来检查运行 MySQL 的服务器是否从 C# mobile 启动。我尝试使用 Socket ......非常缓慢！...而 C# 移动设备中不存在 Ping 类

```
IPHostEntry myHostEntry = Dns.GetHostEntry("192.168.2.222");
IPEndPoint host = new IPEndPoint(myHostEntry.AddressList[0], 3306);

Socket s = new Socket(AddressFamily.InterNetwork,
SocketType.Stream, ProtocolType.Tcp);
s.Connect(host);
if (s.Connected) { 
      MessageBox.Show("Ping Ok!!!"); 
} else {
       MessageBox.Show("Ping not Ok !!!");
} 
```

有没有人有什么建议 ？？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T10:51:27.860

调整超时并删除 dns-resolve。

```
IPEndPoint host = new IPEndPoint(IPAddress.Parse("192.168.2.222"), 3306);

Socket s = new Socket(AddressFamily.InterNetwork,
s.ReceiveTimeout = 100;
s.SendTimeout = 100;
SocketType.Stream, ProtocolType.Tcp);
s.Connect(host);
if (s.Connected) { 
      MessageBox.Show("Ping Ok!!!"); 
} else {
       MessageBox.Show("Ping not Ok !!!");
} 
```

但这在高延迟环境（移动网络）中可能不可靠

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T11:00:47.043

服务器可能还活着并且很健康，但是您的“健康检查”可能会超时，导致您认为它已经死了；另一方面，您可能会发现您的服务器非常健康并且您继续查询，这反过来又超时（情况并没有那么不同）。

我建议您假设服务器处于活动状态*并*假设每个查询都可以并且将会超时，从而适当地处理各种条件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-26T10:45:15.633

如果您可以在 MySQL 所在的服务器上托管某种脚本，则编写一个连接到本地 MySQL 的简单脚本，并在成功时打印 1，在失败时打印 0。从 C# 移动端使用 HTTP 查询脚本。这将是最可靠的解决方案恕我直言。

# java - 为不同的屏幕大小设置不同的文本大小（以编程方式创建的 TextViews）

> ID：11667547
> 
> 赞同：2
> 
> 时间：2012-07-26T10:41:26.137
> 
> 标签：java, android

我有许多以编程方式创建的 TextView，但我不知道如何根据设备的屏幕尺寸更改文本大小。

示例：我有 layout_sw300dp 和 layout_sw600dp 文件夹，其中包含单独的屏幕设计，以适应所使用的手机。但由于我以编程方式创建 TextView，我无法针对不同的屏幕尺寸更改 TextSize。

我该如何解决这个问题？是否可以为不同的屏幕设置不同的 /res/values/styles.xml，这样我可以通过代码附加样式并在 XML 中单独定义样式，如果是，文件夹布局是什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-26T10:42:30.877

如果您使用“sp”设置 TextView 的文本大小，则应自动缩放文本。

# c# - 时间：2019-05-10 标签：c#unit testing visual studio 2010

> ID：11667548
> 
> 赞同：1
> 
> 时间：2012-07-26T10:41:26.990
> 
> 标签：c#, unit-testing

我是 c# 和一般编程的新手。需要写一些单元测试。想为这门课写一些：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using teamcanada.Models;
using System.Configuration;
using teamcanada.ingestion;

/* This class writes the parsed CSV data into the database */

namespace teamcanada.dal
{
    public class csvParseDAL
    {
        protected torontoDB db = new torontoDB();

        /* if the database is empty, then do not continue with the CSV parsing */

        public csvParseDAL()
        {
            if ((db.ElectionResults.ToList().Count() == 0) && (db.ElectionContributions.ToList().Count() == 0))
            {
                insertcsv();
            }
        }

        /* Start CSV parsing  */

        public void insertcsv()
        {
            List<Results> results = null;
            List<Contributions> contributions = null;

            LoadCSV import = new LoadCSV();

            results = import.loadResults();

            foreach (Results r in results)
            {
                db.ElectionResults.Add(r);
            }

            contributions = import.loadContributions();

            foreach (Contributions r in contributions)
            {

                db.ElectionContributions.Add(r);
            }
            db.SaveChanges();
        }
    }
} 
```

任何帮助表示赞赏。

D

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T10:50:31.610

通常，您要做的是使用`Assert`该类来比较预期值和实际值。实际值通常是方法的返回值。在您的情况下，我建议测试`import.loadResults();`并`import.loadContributions();`确保它们返回您期望的返回值。

我看到您使用 EF，这不是您需要进行单元测试的东西，微软已经完成了。如果需要，您可以使用集成测试，其中测试可以访问数据库并检查是否插入了正确的值。

很难给出更具体的建议，只需在 Visual Studio 中创建一个测试项目，玩一圈，然后尝试提出更具体的问题。您可以使用此[演示文稿](http://www.slideshare.net/kgayda/unit-testing-in-visual-studio-2010)来了解单元测试的基础知识。

# c# - Youtube Api 2.0 相关视频的限制

> ID：11667550
> 
> 赞同：1
> 
> 时间：2012-07-26T10:41:37.623
> 
> 标签：c#, youtube-api

我正在使用[适用于 .NET 的 YouTube 数据 API](https://developers.google.com/youtube/2.0/developers_guide_dotnet)。

我在[类上调用该](http://google-gdata.googlecode.com/svn-history/r887/docs/folder56/T_Google_YouTube_YouTubeRequest.htm)[`GetRelatedVideos`函数](http://google-gdata.googlecode.com/svn-history/r887/docs/folder56/M_Google_YouTube_YouTubeRequest_GetRelatedVideos.htm)，它返回与视频相关的 25 个视频，如下所示：[`YouTubeRequest`](http://google-gdata.googlecode.com/svn-history/r887/docs/folder56/T_Google_YouTube_YouTubeRequest.htm)

```
Video video = Request.Retrieve<Video>(
    new Uri(String.Format("https://gdata.youtube.com/feeds/api/videos/{0}{1}",
        vID ,"?max-results=50&start-index=1")));  

Feed<Video> relatedVideos = Request.GetRelatedVideos(video);

return FillVideoInfo(relatedVideos.Entries); 
```

这是请求链接：

[https://gdata.youtube.com/feeds/api/videos/1FJHYqE0RDg?max-results=50&start-index=1](https://gdata.youtube.com/feeds/api/videos/1FJHYqE0RDg?max-results=50&start-index=1)

但我得到这个错误

> 此资源不支持“max-results”参数

如果我只是使用：

[https://gdata.youtube.com/feeds/api/videos/1FJHYqE0RDg](https://gdata.youtube.com/feeds/api/videos/1FJHYqE0RDg)

然后我得到 25 个视频。但我想获得 50 个视频和更多的页面。我能够得到以下 URL 的结果：

[https://gdata.youtube.com/feeds/api/videos/1FJHYqE0RDg/related?max-results=50&start-index=1](https://gdata.youtube.com/feeds/api/videos/1FJHYqE0RDg/related?max-results=50&start-index=1)

在这里我得到了回应，但我只得到了 25 个视频，即使我为`max-results`参数传递了 50 个视频。

如何一次获取特定视频的 50 个相关视频，而不是默认的 25 个（50 个是 的最大值`max-results`）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T20:34:06.067

而不是自己创建 URL 字符串，您应该使用[`YouTubeRequest`类](http://google-gdata.googlecode.com/svn-history/r887/docs/folder56/AllMembers_T_Google_YouTube_YouTubeRequest.htm)上的属性为您设置它们。

例如，在获取[`Video`](http://google-gdata.googlecode.com/svn-history/r887/docs/folder56/T_Google_YouTube_Video.htm)实例时，您*不想*在实例上指定[`PageSize`属性](http://google-gdata.googlecode.com/svn-history/r887/docs/folder54/P_Google_GData_Client_RequestSettings_PageSize.htm)[`YouTubeRequestSettings`](http://google-gdata.googlecode.com/svn-history/r887/docs/folder56/T_Google_YouTube_YouTubeRequestSettings.htm)，如下所示：

```
// Create the request.
var request = new YouTubeRequest(
    new YouTubeRequestSettings("my app", null) { AutoPaging = false });

// Get the video.
var video = request.Retrieve<Video>(
    new Uri("https://gdata.youtube.com/feeds/api/videos/1FJHYqE0RDg")); 
```

但是，您希望在调用[method](http://google-gdata.googlecode.com/svn-history/r887/docs/folder56/M_Google_YouTube_YouTubeRequest_GetRelatedVideos.htm)时使用附加到实例的*不同* ：`YouTubeRequestSettings``YouTubeRequest`[`GetRelatedVideos`](http://google-gdata.googlecode.com/svn-history/r887/docs/folder56/M_Google_YouTube_YouTubeRequest_GetRelatedVideos.htm)

```
// Create the request again.  Set the page size.
request = new YouTubeRequest(
    new YouTubeRequestSettings("my app", null) { 
        AutoPaging = false, PageSize = 50
 });

 // Get the related videos.
 var related = request.GetRelatedVideos(video); 
```

现在它将返回 50 个视频。如果`PageSize`在获取视频时尝试设置该属性，则会出现错误，因为`max-results`获取单个视频时该参数无效。

然后，您可以写出条目的计数以验证是否返回了 50：

```
// Write out how many videos there are.
Console.WriteLine(string.Format(CultureInfo.CurrentCulture, 
    "{0} related videos in first page.", related.Entries.Count())); 
```

结果将是：

> 第一页有 50 个相关视频。

# python - 使用 python 将订阅者添加到 mailchimp

> ID：11667551
> 
> 赞同：3
> 
> 时间：2012-07-26T10:41:41.467
> 
> 标签：python, google-app-engine, mailchimp

在谷歌应用引擎上使用 python 2.5 向 mailchimp 添加订阅者的最简单方法或库是什么？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-26T20:26:03.990

[mailsnake](https://github.com/michaelhelmick/python-mailsnake)和[PostMonkey](https://github.com/ericrasmussen/postmonkey/)都需要[Requests](http://docs.python-requests.org/en/latest/index.html)库，它在 0.10.1 中放弃了对 python 2.5 的支持。

最简单的路径似乎是[chimpy](http://code.google.com/p/chimpy/)。

代码示例：

```
from chimpy import chimpy

chimp = chimpy.Connection('MAILCHIMP_APIKEY')
chimp.list_subscribe('your_list_id', self.request.get('email'), {'FIRST': '', 'LAST': ''}, double_optin=False) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-26T11:10:18.667

MailChimp API 包含您想要的功能的所有详细信息。

*   API 文档：[http ://apidocs.mailchimp.com](http://apidocs.mailchimp.com)
*   Python 库：[http](http://apidocs.mailchimp.com/api/downloads/) ://apidocs.mailchimp.com/api/downloads/并转到 Python 部分
*   订阅电子邮件到列表：[http ://apidocs.mailchimp.com/api/1.3/listsubscribe.func.php](http://apidocs.mailchimp.com/api/1.3/listsubscribe.func.php)

希望这可以帮助。

# ruby-on-rails - minitest：未定义的方法“get”

> ID：11667552
> 
> 赞同：3
> 
> 时间：2012-07-26T10:41:42.240
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, testing, minitest

我需要用 minitest 测试我的控制器。我试过了：

```
describe 'CommentsController' do
  it "should get index" do
    get :index
    assert_response :success
  end
end 
```

和

```
class CommentsControllerTest < MiniTest::Unit::TestCase
  def test_should_get_index
    get :index
    assert_response :success
  end
end 
```

但我有“未定义的方法‘get’”错误

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-27T01:51:24.193

您应该按照文档中概述的步骤添加[minitest-rails gem。](http://blowmage.com/minitest-rails/)然后你的测试应该是这样的：

```
require "minitest_helper"

describe CommentsController do
  it "should get index" do
    get :index
    assert_response :success
  end
end 
```

或者，看起来像这样：

```
require "minitest_helper"

class CommentsControllerTest < MiniTest::Rails::ActionController::TestCase
  test "should get index" do
    get :index
    assert_response :success
  end
end 
```

# c# - MonoTouch.Dialog DialogViewController 中未显示 LeftBarButtonItem 和 RightBarButtonItem

> ID：11667554
> 
> 赞同：4
> 
> 时间：2012-07-26T10:41:46.473
> 
> 标签：c#, xamarin.ios, monotouch.dialog

MonoTouch 是 5.2.12。iOS是v5.1.1（模拟器）

似乎我在这里错过了一个重要的难题。我正在继承`DialogViewController`并将其设置为我的 UINavigationController 中的唯一控制器。在`ViewWillAppear`subclassed`DialogViewController`中，我正在尝试设置左右栏按钮项：

```
this.NavigationController.NavigationItem.LeftBarButtonItem = new UIBarButtonItem(UIBarButtonSystemItem.Done, this.HandleDoneButtonTouched ); 
```

他们中的任何一个都没有出现。但是会显示标题。如果我调试，我可以看到项目设置正确。

我也尝试`SetItems()`在导航控制器上使用：也没有效果。

导航控制器以模态方式呈现在页面表中。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-26T10:51:53.343

导航项通常不通过导航控制器更新。相反，它们是通过视图控制器上的 NavigationItem 属性更新的：

```
this.NavigationItem.SetRightBarButtonItem(
        new UIBarButtonItem(UIImage.FromFile("some_image.png")
        , UIBarButtonItemStyle.Plain
        , (sender,args) => {
           // button was clicked
        })
    , true); 
```

[http://docs.xamarin.com/ios/recipes/Content_Controls/Navigation_Controller/Add_a_Nav_Bar_Right_Button](http://docs.xamarin.com/ios/recipes/Content_Controls/Navigation_Controller/Add_a_Nav_Bar_Right_Button)

# batch-processing - 使用 expdp 命令运行批处理文件

> ID：11667556
> 
> 赞同：0
> 
> 时间：2012-07-26T10:41:53.417
> 
> 标签：batch-processing

嗨，我试图在 oracle 中进行模式备份，在 c 提示符下运行以下命令

```
D:\oracle11g\product\11.2.0\dbhome_1\BIN>expdp system/password schemas='XYZ' compress=Y directory=expdp_dir dumpfile='expdp_dumpfile_%T.dmp' logfile='c:\dumpfile_exp.log 
```

它工作得很好。

但是当我尝试将上述命令放入 bat 文件时，它不起作用

我将以下代码保存在 bat 文件中。

```
@ECHO OFF
D:\Oracle11g\product\11.2.0\dbhome_1\BIN expdp system/password schemas='XYZ' compress=Y directory=expdp_dir dumpfile='expdp_dumpfile_%T.dmp' logfile='c:\dumpfile_exp.log

if %ERRORLEVEL%==0 (
echo    Success
)

if %ERRORLEVEL%==2 (

echo Failed
) 
```

我收到一条消息，因为系统无法找到路径和成功消息。

请帮帮我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T00:46:57.460

你的代码：

```
@ECHO OFF
D:\Oracle11g\product\11.2.0\dbhome_1\BIN expdp system/password schemas='XYZ' compress=Y directory=expdp_dir dumpfile='expdp_dumpfile_%T.dmp' logfile='c:\dumpfile_exp.log

if %ERRORLEVEL%==0 (
echo    Success
)

if %ERRORLEVEL%==2 (

echo Failed
) 
```

我会用什么：

```
@Echo off
D:\Oracle11g\product\11.2.0\dbhome_1\BIN\expdp.exe system/password schemas='XYZ' compress=Y directory=expdp_dir dumpfile='expdp_dumpfile_%T.dmp' logfile='c:\dumpfile_exp.log

if %ERRORLEVEL%==0 (echo "Success") else (echo "Failed with error code: " %ERRORLEVEL%) 
```

注意第二行，你输入：

```
D:\Oracle11g\product\11.2.0\dbhome_1\BIN expdp system/password schemas='XYZ' compress=Y directory=expdp_dir dumpfile='expdp_dumpfile_%T.dmp' logfile='c:\dumpfile_exp.log 
```

注意我放的第二行：

```
D:\Oracle11g\product\11.2.0\dbhome_1\BIN\expdp.exe system/password schemas='XYZ' compress=Y directory=expdp_dir dumpfile='expdp_dumpfile_%T.dmp' logfile='c:\dumpfile_exp.log 
```

# iphone - 如何在 iOS 上将图像旋转 90 度？

> ID：11667565
> 
> 赞同：49
> 
> 时间：2012-07-26T10:42:29.277
> 
> 标签：iphone, objective-c, ios, rotation

我想要做的是从我的相机拍摄快照，将其发送到服务器，然后服务器将我发送回 viewController 上的图像。如果图像处于纵向模式，则图像在屏幕上显示良好，但是如果图像是在横向模式下拍摄的，则图像在屏幕上会出现拉伸（因为它试图以纵向模式出现！）。我不知道如何解决这个问题，但我想一个解决方案是首先检查图像是否处于纵向/横向模式，然后如果它处于横向模式，则将其旋转 90 度，然后再将其显示在屏幕上。那么我该怎么做呢？

* * *

## 回答 #1

> 赞同：128
> 
> 时间：2012-07-26T10:45:15.780

```
self.imageview.transform = CGAffineTransformMakeRotation(M_PI_2); 
```

**斯威夫特 4+：**

```
self.imageview.transform = CGAffineTransform(rotationAngle: CGFloat(Double.pi/2)) 
```

* * *

## 回答 #2

> 赞同：30
> 
> 时间：2012-07-26T10:59:10.193

这是将图像旋转到任何程度的完整代码，只需将其添加到适当的文件中，即 .m 中，如下所示，您要在其中使用图像处理

**形式**

```
@interface UIImage (RotationMethods)
- (UIImage *)imageRotatedByDegrees:(CGFloat)degrees;
@end

@implementation UIImage (RotationMethods)

static CGFloat DegreesToRadians(CGFloat degrees) {return degrees * M_PI / 180;};

- (UIImage *)imageRotatedByDegrees:(CGFloat)degrees 
{   
    // calculate the size of the rotated view's containing box for our drawing space
    UIView *rotatedViewBox = [[UIView alloc] initWithFrame:CGRectMake(0,0,self.size.width, self.size.height)];
    CGAffineTransform t = CGAffineTransformMakeRotation(DegreesToRadians(degrees));
    rotatedViewBox.transform = t;
    CGSize rotatedSize = rotatedViewBox.frame.size;

    // Create the bitmap context
    UIGraphicsBeginImageContext(rotatedSize);
    CGContextRef bitmap = UIGraphicsGetCurrentContext();

    // Move the origin to the middle of the image so we will rotate and scale around the center.
    CGContextTranslateCTM(bitmap, rotatedSize.width/2, rotatedSize.height/2);

    //   // Rotate the image context
    CGContextRotateCTM(bitmap, DegreesToRadians(degrees));

    // Now, draw the rotated/scaled image into the context
    CGContextScaleCTM(bitmap, 1.0, -1.0);
    CGContextDrawImage(bitmap, CGRectMake(-self.size.width / 2, -self.size.height / 2, self.size.width, self.size.height), [self CGImage]);

    UIImage *newImage = UIGraphicsGetImageFromCurrentImageContext();
    UIGraphicsEndImageContext();
    return newImage;

}

@end 
```

[这是苹果SquareCam](https://developer.apple.com/library/ios/#samplecode/SquareCam/Listings/SquareCam_SqareCamViewController_m.html#//apple_ref/doc/uid/DTS40011190-SquareCam_SqareCamViewController_m-DontLinkElementID_4)示例的代码片段。

要调用上述方法，只需使用以下代码

```
UIImage *rotatedSquareImage = [square imageRotatedByDegrees:rotationDegrees]; 
```

这里的**正方形**是 1 `UIImage`，**rotationDegrees**是 1`flote`以将图像旋转角度

* * *

## 回答 #3

> 赞同：21
> 
> 时间：2017-04-13T20:19:15.923

Swift 3 和 Swift 4 改用 .pi

例如：

```
//rotate 90 degrees
myImageView.transform = CGAffineTransform(rotationAngle: .pi / 2)

//rotate 180 degrees
myImageView.transform = CGAffineTransform(rotationAngle: .pi)

//rotate 270 degrees
myImageView.transform = CGAffineTransform(rotationAngle: .pi * 1.5) 
```

* * *

## 回答 #4

> 赞同：14
> 
> 时间：2012-07-26T10:44:10.090

```
- (UIImage *)rotateImage:(UIImage*)image byDegree:(CGFloat)degrees 
{   
    UIView *rotatedViewBox = [[UIView alloc] initWithFrame:CGRectMake(0,0,image.size.width, image.size.height)];
    CGAffineTransform t = CGAffineTransformMakeRotation(DegreesToRadians(degrees));
    rotatedViewBox.transform = t;
    CGSize rotatedSize = rotatedViewBox.frame.size;
    [rotatedViewBox release];

    UIGraphicsBeginImageContext(rotatedSize);
    CGContextRef bitmap = UIGraphicsGetCurrentContext();

    CGContextTranslateCTM(bitmap, rotatedSize.width, rotatedSize.height);

    CGContextRotateCTM(bitmap, DegreesToRadians(degrees));

    CGContextScaleCTM(bitmap, 1.0, -1.0);
    CGContextDrawImage(bitmap, CGRectMake(-image.size.width, -image.size.height, image.size.width, image.size.height), [image CGImage]);

    UIImage *newImage = UIGraphicsGetImageFromCurrentImageContext();
    UIGraphicsEndImageContext();
    return newImage;

} 
```

* * *

## 回答 #5

> 赞同：8
> 
> 时间：2012-07-26T10:46:35.147

只需将此代码添加到图像中。

```
Image.transform=CGAffineTransformMakeRotation(M_PI / 2); 
```

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2015-05-19T21:32:53.397

我在 XCode 6.3 Swift 1.2 中尝试此操作时出错

```
self.imageview.transform = CGAffineTransformMakeRotation(M_PI_2); 
```

你应该试试这个来强制类型转换修复：

```
self.imageview.transform = CGAffineTransformMakeRotation(CGFloat(M_PI_2)); 
```

**斯威夫特 4 编辑**

```
imageview.transform = CGAffineTransform(rotationAngle: .pi) 
```

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2017-02-03T08:11:54.800

斯威夫特 3 版本：

```
imageView.transform = CGAffineTransform(rotationAngle: CGFloat(M_PI_2)) 
```

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2018-02-17T06:29:51.930

**斯威夫特 4+。**

```
arrowImageView.transform = CGAffineTransform(rotationAngle: .pi/2) 
```

[注：角度以弧度为单位](https://developer.apple.com/documentation/coregraphics/cgaffinetransform/1455666-init)

> .pi = 180 度
> 
> .pi/2 = 90 度

如果要添加动画

```
 @IBAction func applyTransForm(sender: UIButton) {
        sender.isSelected = !sender.isSelected
        UIView.animate(withDuration: 1, animations: {
        if sender.isSelected {
            self.arrowImageView.transform = CGAffineTransform(rotationAngle: .pi)
        } else {
            self.arrowImageView.transform = CGAffineTransform(rotationAngle: 0)

        }
        })
    } 
```

**输出：**

[![在此处输入图像描述](../Images/82e93028a828041c0f468e31fa41bdd9.png)](https://i.stack.imgur.com/nB1Zp.gif)

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2017-09-26T15:16:06.950

**斯威夫特 4 | Xcode 9 语法**（请注意，此代码将 UIImageView 顺时针旋转 90 度，而不是 UIImage）：

```
myImageView.transform = CGAffineTransform(rotationAngle: CGFloat(Double.pi / 2)) 
```

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2019-07-17T13:35:32.813

```
 func imageRotatedByDegrees(oldImage: UIImage, deg degrees: CGFloat) -> UIImage {

    let size = oldImage.size
    UIGraphicsBeginImageContext(size)

    let bitmap: CGContext = UIGraphicsGetCurrentContext()!
    //Move the origin to the middle of the image so we will rotate and scale around the center.
    bitmap.translateBy(x: size.width / 2, y: size.height / 2)
    //Rotate the image context
    bitmap.rotate(by: (degrees * CGFloat(Double.pi / 180)))
    //Now, draw the rotated/scaled image into the context
    bitmap.scaleBy(x: 1.0, y: -1.0)

    let origin = CGPoint(x: -size.width / 2, y: -size.width / 2)

    bitmap.draw(oldImage.cgImage!, in: CGRect(origin: origin, size: size))

    let newImage: UIImage = UIGraphicsGetImageFromCurrentImageContext()!
    UIGraphicsEndImageContext()
    return newImage

} 
```

函数的使用

```
imageRotatedByDegrees(oldImage: yourImage, deg: degree) 
```

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2020-09-14T07:32:05.587

***在Swift 5***`Image`的关卡中执行此操作：

 **```
extension UIImage{

    func imageRotated(by radian: CGFloat) -> UIImage{

        let rotatedSize = CGRect(origin: .zero, size: size)
            .applying(CGAffineTransform(rotationAngle: radian))
            .integral.size
        UIGraphicsBeginImageContext(rotatedSize)
        if let context = UIGraphicsGetCurrentContext() {
            let origin = CGPoint(x: rotatedSize.width / 2.0,
                                 y: rotatedSize.height / 2.0)
            context.translateBy(x: origin.x, y: origin.y)
            context.rotate(by: radian)
            draw(in: CGRect(x: -origin.y, y: -origin.x,
                            width: size.width, height: size.height))
            let rotatedImage = UIGraphicsGetImageFromCurrentImageContext()
            UIGraphicsEndImageContext()

            return rotatedImage ?? self
        }

        return self

    }
} 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2016-06-21T15:14:36.007

这是 iOSDev 答案的 Swift 2.2 版本（在 UIImage 扩展中）：

```
func degreesToRadians(degrees: CGFloat) -> CGFloat {
    return degrees * CGFloat(M_PI) / 180
}

func imageRotatedByDegrees(degrees: CGFloat) -> UIImage {
    // calculate the size of the rotated view's containing box for our drawing space
    let rotatedViewBox = UIView(frame: CGRectMake(0,0,self.size.width, self.size.height))
    let t = CGAffineTransformMakeRotation(self.degreesToRadians(degrees))
    rotatedViewBox.transform = t
    let rotatedSize = rotatedViewBox.frame.size

    // Create the bitmap context
    UIGraphicsBeginImageContext(rotatedSize)
    let bitmap = UIGraphicsGetCurrentContext()

    // Move the origin to the middle of the image so we will rotate and scale around the center.
    CGContextTranslateCTM(bitmap, rotatedSize.width/2, rotatedSize.height/2);

    // Now, draw the rotated/scaled image into the context
    CGContextScaleCTM(bitmap, 1.0, -1.0);
    CGContextDrawImage(bitmap, CGRectMake(-self.size.width / 2, -self.size.height / 2, self.size.width, self.size.height), self.CGImage);

    let newImage = UIGraphicsGetImageFromCurrentImageContext();
    UIGraphicsEndImageContext();
    return newImage;

} 
```

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2019-01-19T16:22:20.313

最好只使用位图。在我的情况下，使用 reference.image 中的 UIImage，我在 base64String 处转换了图像。没有 CGAffineTransformMakeRotation 和没有 rotateViewBox.transform

```
var rotatedSize = reference.image.size;
                //Create bitmap context
                UIGraphicsBeginImageContext(rotatedSize);
                var bitmap = UIGraphicsGetCurrentContext();
                //move origin to the middle of the image for rotation
                CGContextTranslateCTM(bitmap, rotatedSize.width / 2, rotatedSize.height / 2);
                //rotate image context
                CGContextRotateCTM(bitmap, 1.5708);
                CGContextDrawImage(bitmap, CGRectMake(-reference.image.size.width / 2, -reference.image.size.height / 2, reference.image.size.width, reference.image.size.height), reference.image.CGImage);
                var rotatedImage = UIGraphicsGetImageFromCurrentImageContext();
                var base64Image = UIImageJPEGRepresentation(rotatedImage, compression).base64EncodedStringWithOptions(0);
                UIGraphicsEndImageContext();
                return base64Image; 
```

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2020-05-08T21:04:16.800

如果您要保存图像，则需要旋转图片上下文而不是视图。我已经使用了上面提供的示例，但是在将图像居中时它们效果不佳。所以我已经增强和修复如下：

```
func imageRotatedByDegrees(deg degrees: CGFloat) -> UIImage {

    UIGraphicsBeginImageContext(CGSize(width: self.size.height, height: self.size.width))

    let bitmap: CGContext = UIGraphicsGetCurrentContext()!

    // Move the origin to the middle of the image so we will rotate and scale around the center.
    bitmap.translateBy(x: self.size.width / 2, y: self.size.height / 2)

    // Rotate the image context
    bitmap.rotate(by: (degrees * CGFloat(Double.pi / 180)))

    // Now, draw the rotated/scaled image into the context
    bitmap.scaleBy(x: 1.0, y: -1.0)

    let origin = CGPoint(x: -self.size.height / 2, y: -self.size.width / 2)

    bitmap.draw(self.cgImage!, in: CGRect(origin: origin, size: CGSize(width: self.size.width, height: self.size.height)))

    let newImage: UIImage = UIGraphicsGetImageFromCurrentImageContext()!

    UIGraphicsEndImageContext()

    return newImage
} 
```**

# php - 通过 PHP 远程 url 发送 XML 文件

> ID：11667568
> 
> 赞同：0
> 
> 时间：2012-07-26T10:42:30.003
> 
> 标签：php, xml

情况如下。我必须将定义的 XML 发送到`http:\\www.example.com:1234`带有一些我必须先前定义的变量的 url。

XML 是这样的：

```
<Title1>
<Title2>Some Text</Title2>
<Title3>Variable 1</Title3>
<Title4>Some Text</Title4>
<Title5>
    <Title51>Variable 2</Title51>
</Title5>
</Title1> 
```

但是，我想在 html/php 表单和 get 方法中定义这些变量（1、2），因此用户可以引入这两个变量，然后单击表单中的提交按钮以将 XML 发送到以前的 URL。

此外，XML 应该有`"Content-Type","application/x-www-form-urlencoded"`标题。

这可能吗？我尝试将这些变量直接传递给 XML，而我得到的最好方法是显示 XML 而不是解析 php 字符串。

另外，我尝试了一些脚本，例如 PHP 类中的 simplexml，但到目前为止还没有运气。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T13:24:44.853

1) 用新值修改现有 XML。试试这个

**示例.xml**：

```
<Title1>
   <Title2>Some Text</Title2>
   <Title3>Variable 1</Title3>
   <Title4>Some Text</Title4>
   <Title5>
      <Title51>Variable 2</Title51>
   </Title5>
</Title1> 
```

PHP：

```
$xml = simplexml_load_file("sample.xml");
$xml->Title3 = $_GET['t3'];              // Updating <Title3></Title3> from GET method
$xml->Title5[0]->Title51 = $_GET['t5'];  // Updating <Title51></Title51> from GET method
$xml->asXML('sample.xml');               // saving the xml file 
```

* * *

2）创建新的 XML 文件（sample.xml）：

PHP：

```
$xml = new SimpleXMLElement("<Title1></Title1>");
$xml->Title2='Some Text';
$xml->Title3 = $_GET['t3'];
$xml->Title4='Some Text';
$xml->Title5[0]->Title51 = $_GET['t5'];
$xml->asXML('sample.xml');               // saving the xml file 
```

我已经向您展示了评论中提到的两种可能性。使用任何让你感到安慰的人:)

# sorting - Tablesorter 将 sortList 与禁用的列相结合

> ID：11667572
> 
> 赞同：0
> 
> 时间：2012-07-26T10:42:44.870
> 
> 标签：sorting, tablesorter

我确信这是一个简单的答案，但作为一个菜鸟，我看不到它。我只想要一个表从排序中禁用第 0 列和第 2 列，然后默认排序为第 1 列。两个单独的命令，但是当它们单独工作时，它们似乎相互冲突。我可以禁用我的第 0 列和第 2 列，并且表格可以完美运行。或者我可以将我的初始排序设置为第 2 列，并且表格可以完美运行。但是，当我剩余的可排序列放在一起时，将只允许单击一次，它们不能切换升序、降序。

谁能帮忙，因为我只是不知道我做错了什么？先感谢您！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T19:20:28.387

试试这个[演示](http://jsfiddle.net/eY8uH/81/)：

```
$('table').tablesorter({

    sortList : [[ 1, 0 ]],
    headers : {
        0 : { sorter: false },
        2 : { sorter: false }
    }

});​ 
```

# web-services - 为多个操作生成的 gSOAP 错误代理 C++ 类

> ID：11667575
> 
> 赞同：1
> 
> 时间：2012-07-26T10:43:03.433
> 
> 标签：web-services, wsdl, gsoap

我有以下`wsdl`文件部分：

```
<wsdl:binding name="Binding" type="intf:PortType">
    <wsdlsoap:binding transport="http://schemas.xmlsoap.org/soap/http" style="rpc"/>
    <wsdl:operation name="Op1">
        <wsdlsoap:operation soapAction=""/>
        <wsdl:input>
            <wsdlsoap:body use="encoded" namespace="Op1" encodingStyle="http://schemas.xmlsoap.org/soap/encoding/"/>
        </wsdl:input>
        <wsdl:output>
            <wsdlsoap:body use="encoded" namespace="services:ca" encodingStyle="http://schemas.xmlsoap.org/soap/encoding/"/>
        </wsdl:output>
    </wsdl:operation>
    <wsdl:operation name="Op2">
        <wsdlsoap:operation soapAction=""/>
        <wsdl:input>
            <wsdlsoap:body use="encoded" namespace="Op2" encodingStyle="http://schemas.xmlsoap.org/soap/encoding/"/>
        </wsdl:input>
        <wsdl:output>
            <wsdlsoap:body use="encoded" namespace="services:ca" encodingStyle="http://schemas.xmlsoap.org/soap/encoding/"/>
        </wsdl:output>
    </wsdl:operation>
    <wsdl:operation name="Op3">
        <wsdlsoap:operation soapAction=""/>
        <wsdl:input>
            <wsdlsoap:body use="encoded" namespace="Op3" encodingStyle="http://schemas.xmlsoap.org/soap/encoding/"/>
        </wsdl:input>
        <wsdl:output>
            <wsdlsoap:body use="encoded" namespace="services:ca" encodingStyle="http://schemas.xmlsoap.org/soap/encoding/"/>
        </wsdl:output>
    </wsdl:operation>
</wsdl:binding> 
```

问题是迭代地`soapcpp2`生成`soapBidingProxy.h`文件，有效地覆盖旧文件（for `Op1`and `Op2`），并且只留下代理类`Op3`。是这个`soapcpp2`错误，还是我做错了什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T14:23:47.837

我想到了。问题在于，在`input body namespace`. 如果`namespace`所有操作都相同，则生成的文件只有一个，并且包含所有方法。谢谢大家。

# java - 使用 Apache-POI 创建的 Excelsheet 没有标题

> ID：11667589
> 
> 赞同：1
> 
> 时间：2012-07-26T10:43:49.737
> 
> 标签：java, excel, apache-poi

下面的代码段将结果集数据导出到 excel 文件，但它不会创建标题。我用过

`HSSFRow rowhead = sheet.createRow((short) 0);`创建标题，但创建的 Excel 表仅包含没有标题的数据。可能是什么问题？请指导。

```
public boolean prepareExcelFilefromQuery(Collection<List> queryDataRowWise,HttpServletResponse response)        
    HSSFRow row = null;
                HSSFCell cell=null;
                Integer rowCounter=0;
                Integer colCounter;
                boolean success=false;
                try {

                    Iterator<List> rowIterator = queryDataRowWise.iterator();

                    HSSFWorkbook workbook = new HSSFWorkbook();
                    HSSFSheet sheet = workbook.createSheet("Zero_Report_N");

                    HSSFRow rowhead = sheet.createRow((short) 0);

                      rowhead.createCell((short) 0).setCellValue("APPLN_RECD_DT");
                    rowhead.createCell((short) 1).setCellValue("POLICY_NO");
                    rowhead.createCell((short) 2).setCellValue("APPLN_NO");
                    rowhead.createCell((short) 3).setCellValue("OR_NUMBER");

                    while(rowIterator.hasNext())
                    {
                        colCounter=0;

                        queryDataColWise=(List)rowIterator.next();

                        Iterator colIterator = queryDataColWise.iterator();

                        row = sheet.createRow(rowCounter++);
                        while(colIterator.hasNext())
                        {
                            cell = row.createCell(colCounter++);

                            Object o = colIterator.next();

                            if(o instanceof java.lang.String )
                            {   
                                String s=(String)o;
                                cell.setCellValue(s);
                            }
                            else if(o instanceof java.lang.Double )
                            {
                                Double d=(Double)o;
                                cell.setCellValue(d);
                            }
                            else if(o instanceof java.lang.Integer )
                            {
                                Integer i=(Integer)o;
                                cell.setCellValue(i);
                            }
                            else if(o instanceof java.util.Date )
                            {   
                                Date date=(Date)o;

                                SimpleDateFormat FORMATTER;              

                                FORMATTER = new SimpleDateFormat("MM/dd/yyyy");  
                                String date11 = FORMATTER.format(date);     

                                HSSFCellStyle cellStyle = workbook.createCellStyle();
                                cellStyle.setDataFormat(HSSFDataFormat.getBuiltinFormat("m/d/yy"));
                                cell.setCellStyle(cellStyle);
                                cell.setCellValue(FORMATTER.parse(date11));
                            }
                        }
                    }

        workbook.write(response.getOutputStream());
                success=true;
    catch (Exception e) {
            logger.debug("Exception caught in prepareExcelFilefromQuery class ", e);
                }
        return success;
    } 
```

其中 expReportDetailCol 包含结果集数据`Collection<List> expReportDetailCol = new ArrayList<List>();`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-26T20:14:13.827

你`++rowCounter`不想`rowCounter++`。`rowCounter++`意味着给我当前值，然后递增。您的 rowCounter 值开始时为零，因此您的第一组数据会覆盖它

完成标题后增加 rowCounter，或改用 ++rowCounter

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T10:49:16.643

HSSFSheet sheet = workbook.createSheet("Zero_Report_N"); // 创建工作表后

你可以通过放入arraylist来添加标题

```
 HSSFCell cell = row.createCell(i);//u can pass values of headers
    cell.setCellValue(value);
    sheet.autoSizeColumn(i); 
```

# iphone - 具有可变行高的 UITableview 在重新排序时崩溃

> ID：11667592
> 
> 赞同：0
> 
> 时间：2012-07-26T10:44:09.587
> 
> 标签：iphone, uitableview, heightforrowatindexpath

似乎有一个`UITableView`错误，`UITableView`创建了简单并且编辑模式设置为 YES，所有行都有不同的高度。例如，

```
- (CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath {  
    if(indexPath.row == 0)
        return 58;
    else if(indexPath.row == 1)
        return 520;
    else
        return 100;
} 
```

现在触摸对第二行应用程序崩溃的重新排序控制。也许这些行高强制从底部`UITableView`自动滚动不可见，但应该处理它。`UITableViewCell``UITableView`

任何的想法…。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T04:56:56.793

您需要交换它..不要删除并重新插入它..

```
[self.itemArray exchangeObjectAtIndex:sourceIndex
                                 withObjectAtIndex:targetIndex];
[self.tableView reloadData]; 
```

# java-native-interface - JNI 编程：错误 - 找不到类 jni

> ID：11667600
> 
> 赞同：1
> 
> 时间：2012-07-26T10:44:36.580
> 
> 标签：java-native-interface, runtime-error

运行此代码时发生错误：

```
$ javac HelloWorld.java
$ javah jni HelloWorld
error: cannot access jni
class file for jni not found
javadoc: error - Class jni not found.
2 errors 
```

我怎么能克服它？请给我一个解决方案..谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T10:53:19.183

使用`javah -jni`而不是`javah jni`.

# php - TYPO3 - 选择/获取当前 BE 用户可访问的页面

> ID：11667601
> 
> 赞同：0
> 
> 时间：2012-07-26T10:44:39.223
> 
> 标签：php, database, permissions, typo3, backend

对所有页面进行选择/获取的推荐方法是什么，BE 用户可以访问这些页面以修改所有页面树（按权限过滤+按工作区配置过滤）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T10:55:05.497

取决于您的需要，访问模块 +（可选）[be_acl](http://typo3.org/extensions/repository/view/be_acl)是我控制页面树访问的最佳方式。我从来都不是 Workspaces 的粉丝，所以几年前我就避开了它们，因为恕我直言，它们非常不舒服。

# node.js - 如何设置 nodejs v8 选项以表现良好？

> ID：11667602
> 
> 赞同：2
> 
> 时间：2012-07-26T10:44:41.317
> 
> 标签：node.js, v8

我了解到，如果我在小内存机器上运行 NodeJs 和其他软件（imagemagick ...）

我可以跑`node --global_gc your_script.js`

我不会得到 OOME

* * *

跑步时看到很多选项`node --v8-options`

但我找不到任何文件？

是否有任何我应该注意的重要选项来扩展我的 Nodejs？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T08:23:23.687

该标志称为--gc-global 或--gc_global，而不是--global_gc。

您可能会发现此标志列表很有帮助：[http ://erikcorry.blogspot.dk/2012/11/memory-management-flags-in-v8.html](http://erikcorry.blogspot.dk/2012/11/memory-management-flags-in-v8.html)

# plone - zope/plone 如何评估变量？

> ID：11667611
> 
> 赞同：0
> 
> 时间：2012-07-26T10:45:03.033
> 
> 标签：plone, zope, template-tal, zpt

想象一下这个场景：

我在 Zope 中有一个 ZPT，我在金属块中定义了一个全局变量。
这个变量从这样的表达式中获取它的值

```
global myVar id | nothing;
global anotherVar 1; 
```

where`nothing`可以替换为`python:0`or `python:False`or`None`等​​等。

现在想象到另一个街区，我会做类似的事情

```
global myVar2 myVar | anotherVar | nothing; 
```

`nothing`我上面指定的所有内容都在哪里。

现在假设它`id`没有一个值，因此`myVar`被采用`nothing`（或其他可能的值；它根本没有区别）。
我所期望的是，它`myVar2`具有`anotherVar`价值，因为`anotherVar`它具有价值。`myVar2`但令我大吃一惊的是，我注意到这不是真的，而且很有`myVar`价值。这意味着`nothing`。

如果我理解发生了什么，我会假设这种语句只控制该变量的**存在**而不是它的值。

显然，我可以将这种陈述变成一种 Python 的方式，当然，它工作得“很好”（即，正如我所期望的那样）
所以，有人可以证实或反驳我在那里的假设吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T13:04:30.403

您要问的不是 Plone 或 Zope 特定的，您在这里处理的是[TALES 语句](http://wiki.zope.org/ZPT/TALESSpecification13)，它与 TAL 和 METAL 一起构成了 Zope Page Templates 实现的页面模板语言（顺便说一下，还有[chameleon](/questions/tagged/chameleon "显示标记为“变色龙”的问题")以及其他几个实现用不同的编程语言）。

使用字符时使用的是 TALES 路径表达式`|`，它*与*Python`or`表达式不同。表达式中命名的每个路径都将被解析，只有*当它不存在*时才会使用下一个路径。从规范：

> 评估 TALES 路径表达式时，它会尝试从左到右遍历每条路径，直到成功或用完路径。

由于您的所有路径都解析为现有变量名称，因此它们都存在并且将使用第一个，无论它的值如何。

您想改用`python:`表达式：

```
myVar2 python:myVar or anotherVar or None; 
```

请注意，在 TAL 中很少需要`global`关键字。您可能希望在文档的根元素上定义这些项目；变量在与定义它们的 XML 或 HTML 元素相同的范围内可见：

```
<html tal:define="myVar id | nothing; anotherVar 1;">
  <!-- myVar and anotherVar are visible in the whole HTML document -->
</html> 
```

# java - JTabbedPane 上所有选项卡的 JToolbar 控件

> ID：11667615
> 
> 赞同：3
> 
> 时间：2012-07-26T10:45:20.670
> 
> 标签：java, swing, jpanel, jtoolbar

我想要一个 JToolBar，它在我的 java 程序上具有所有控件，如添加、编辑、删除、保存等。我希望该工具栏能够控制将通过我的 JTabbedPane 打开的所有面板。有没有一种更方便的方法可以控制一个工具栏上的所有面板，因为我的实现是，每次打开它时，我都会在每个面板类（选项卡）上传递工具栏。我也尝试使用 java 反射，但我不确定它是否对我的程序有效。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T20:15:44.140

听起来您需要某种上下文/状态管理器。基本上，您可能希望使用可以维护当前“上下文”的全局可访问的单例管理器。这意味着当某些控件变为活动状态时，您将希望将其注册为“活动”上下文。

当用户单击工具栏中的按钮时，该按钮可以找到活动上下文并执行所需的操作。

# c++ - CLIPS 和与 C++ 的集成

> ID：11667628
> 
> 赞同：4
> 
> 时间：2012-07-26T10:46:22.057
> 
> 标签：c++, rule-engine, clips

我正在开发一个相当复杂的规则引擎。所以我决定借助任何 GNU 规则引擎并将其与我的应用程序集成。我发现[CLIPS](http://en.wikipedia.org/wiki/CLIPS)是一个很好的规则引擎。

现在，我的应用程序是 C++ 语言，我想要一个示例方式（一种 Hello world 程序），从中我可以学习如何将 .clp 规则引擎集成到我的 C++ 应用程序中。

**问题**

1.  我的应用程序是在 Linux/AIX/HP 和 Mingw (for windows) 上开发的。我们能否在 CLIPS 中开发规则引擎并将其集成到所有这些平台上的 C++ 应用程序中？您能否分享有关如何集成的链接。
2.  进入规则引擎的根本原因是，我经历过在我的 C/C++ 应用程序中“构建”的规则需要大量内存/CPU。我的印象是，通过使用规则引擎，我可以以更优化（更好的资源利用率）的方式实现相同的目标。CLIPS 可以帮助我实现这一目标吗？

* * *

**更新1：**

*   您正在开发什么样的应用程序？
    总而言之，我正在开发一个基于过滤器匹配的计数器。用户可以增加 (NetworkID=XYZ, Increment count = 7), (NetworkID = MNO, Increment count=934)... 等等。现在您得到 NetworkID=X* 的查询，然后我需要提供来自 XAA 的所有计数。 ..XZZ。它在跨不同节点（分布式环境）的多进程、多线程中更新。

*   为什么里面有专家系统规则，是什么规则？
    现在，我的平台/应用程序在 C++ 中（用户在其中进行递增/递减/查询）。现在我想使用规则引擎来帮助我完成这些。用 C/C++ 代码编写逻辑似乎会消耗更多所需的资源。

PS：增量/减量/查询相关的关键代码都在优化的c代码中。一些包装器在 C++ 代码中。所以我正在检查规则引擎来为我做这件事，它可以从我的平台/应用程序（在 C/C++ 代码中）调用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-08-03T02:14:09.213

将 CLIPS 与 C++ 集成的最简单方法是使用编译器选项（如果可用）将 C 代码编译为 C++ 代码。[来自高级编程指南 ( http://clipsrules.sourceforge.net/documentation/v624/apg.htm](http://clipsrules.sourceforge.net/documentation/v624/apg.htm) )的第 1.2 节，C++ 兼容性：

> 现在可以使用 ANSI C 或 C++ 编译器编译 CLIPS 源代码。最低限度，非 ANSI C 编译器必须支持完整的 ANSI 样式函数原型和 void 数据类型才能编译 CLIPS。如果您想从 C++ 程序进行 CLIPS API 调用，通常通过将 CLIPS 源文件编译为 C++ 文件来进行集成更容易。这消除了在 C++ 程序中为 CLIPS API 进行外部“C”声明的需要。某些编程环境允许您根据文件扩展名指定文件应编译为 C 代码还是 C++ 代码。其他环境允许您明确指定要使用的编译器，而不管扩展名如何（例如，在 gcc 中，选项“-x c++”会将 .c 文件编译为 C++ 文件）。在某些环境中，相同的编译器用于编译 C 和 C++ 程序，并且编译器使用文件扩展名来确定文件应编译为 C 程序还是 C++ 程序。在这种情况下，将 CLIPS 源文件的 .c 扩展名更改为 .cpp 通常可以将源代码编译为 C++ 程序。

或者，您可以尝试使用 clipsmm ( [http://sourceforge.net/projects/clipsmm/](http://sourceforge.net/projects/clipsmm/) ) 之类的东西，它是 CLIPS 库的 C++ 接口。

# scala - 在scala中使用App trait和main方法的区别

> ID：11667630
> 
> 赞同：93
> 
> 时间：2012-07-26T10:46:26.367
> 
> 标签：scala

和有什么区别

```
object Application extends App {
   println("Hello World")
} 
```

和

```
object Application {
    def main(args: Array[String]): Unit = {
        println("Hello World");
    }
} 
```

* * *

## 回答 #1

> 赞同：65
> 
> 时间：2012-07-26T10:58:13.130

App trait 是一种创建可执行 scala 程序的便捷方式。与 main 方法的不同之处在于（除了明显的语法差异之外）App trait 使用了延迟初始化功能。

来自 2.9 的发行说明（请参阅[http://www.scala-lang.org/old/node/9483](http://www.scala-lang.org/old/node/9483)）

> 继承 App trait 的对象使用 Scala 2.9 的延迟初始化特性来执行整个主体作为继承的 main 方法的一部分。
> 
> App 方案的另一个新特性是命令行参数现在可以通过 args 值访问（继承自 trait App）

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2016-09-23T15:24:25.540

这两种情况在 scala 脚本上是不一样的。

`object extends App`不是由“ `scala MyObject.scala`”命令执行的，而是包含*main*方法的对象是由“ `scala MyObject.scala`”命令执行的。这被描述为 scala 寻找具有主要脚本方法的对象。

当使用 Eclipse 的 REPL 或 scala 工作集时，需要`MyObject.main(Array[String]())`为这两种情况显式调用。

这个简单的提示对像我这样的初学者很有帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-08-18T15:10:25.550

App trait 是使用 [[DelayedInit]] 功能实现的，这意味着在执行 main 方法之前对象的字段不会被初始化。

# php - 从excel文件中我如何获得特定国家/地区的最大费率，然后将其添加到mysql db

> ID：11667633
> 
> 赞同：0
> 
> 时间：2012-07-26T10:46:34.570
> 
> 标签：php, mysql, excel, import

```
<?php

error_reporting(E_ALL ^ E_NOTICE);
//ini_set('display_errors', '1');

ini_set('max_execution_time',60);
$con=mysql_connect('localhost','root','');

$link=mysql_select_db('playsms');

if($_POST)
{

/** Include path **/
set_include_path(get_include_path() . PATH_SEPARATOR . '/../../Classes/');

/** PHPExcel_IOFactory */
include('C:\xampp\htdocs\phpexcel\Classes\PHPExcel.php');
include('C:\xampp\htdocs\phpexcel\Classes\PHPExcel\IOFactory.php');
/** PHPExcel */
require_once 'C:\xampp\htdocs\phpexcel\Classes\PHPExcel.php';

/** PHPExcel_IOFactory */
require_once 'C:\xampp\htdocs\phpexcel\Classes\PHPExcel\IOFactory.php';
//include 'PHPExcel/IOFactory.php';
//create reader

//$inputFileName = $_GET['sel_file'];

 $file=$_FILES['sel_file']['name'];
                 if(!$file)
                 {
                 $file="";
                 }
     else
     {
                $target_path= "C:\\xampp\\htdocs\\playsms\\uploads\\";
                $target_path=$target_path.basename($_FILES['sel_file']['name']);

                if(move_uploaded_file($_FILES['sel_file']['tmp_name'],$target_path))
                {
                     echo "The file ".  basename( $_FILES['sel_file']['name']). 
                     " has been uploaded";
                }
                else
                {
                  echo "There was an error uploading the file, please try again!";
                }
    }           
//$inputFileName = "C:\Users\SHIVA\Desktop\CM.2012.25.xls";

$inputFileName= $target_path;
$inputFileType = PHPExcel_IOFactory::identify($inputFileName);

//$objPHPExcel = $objReader->load($inputFileName);

//echo 'File ',pathinfo($inputFileName,PATHINFO_BASENAME),' has been identified as an ',$inputFileType,' file<br />';

//echo 'Loading file ',pathinfo($inputFileName,PATHINFO_BASENAME),' using IOFactory with the identified reader type<br />';
$objReader = PHPExcel_IOFactory::createReader($inputFileType);

$objPHPExcel = $objReader->load($inputFileName);

$sheet = $objPHPExcel->getActiveSheet()->toArray(null,true,true,true);
//var_dump($sheet);
//print_r($sheet);die;
$objsheet = $objPHPExcel->getActiveSheet();
$sheet = $objPHPExcel->getSheet(0); 
$highestRow = $sheet->getHighestRow();
$highestColumn = $sheet->getHighestColumn();
$highestColumnIndex = PHPExcel_Cell::columnIndexFromString($highestColumn);

$nrColumns = ord($highestColumn) - 64;

echo "<br>File ".$sheetTitle  . " has ";
echo $nrColumns . ' columns';
echo $highestRow . ' rows.';

//  Loop through each row of the sheetData in turn    

    for ($row = 6; $row <= $highestRow; ++ $row)
     {  //echo "1"."\n" ;
            //$myvar=max;

        //for($i = 0; $i<=$highestRow; $i++)
        // echo "2"."\n" ;

        $val=array("i");

                for ($col = 0; $col <= $highestColumnIndex; ++ $col)
                 {
                    $cell = $sheet->getCellByColumnAndRow($col, $row);
                    $val[] = $cell->getValue();
                    echo $cell->getvalue(); 

                    //echo"<br>";

                }   
         //echo "<br><br><br>";
         //echo $val[2];
          //echo "<br><br><br>";
          $data=0;

          //$data = array();
            //$data[]=array($val2);  
          for($i = 0; $i<$highestRow; $i++)
           {
             //for($j=0;$j<$col; $j++)
            // {
            if( $data <= $val[6])
            {

                $data=$val[6];
                //mysql_query("SELECT max(rate) FROM `playsms_toolssimplerate` WHERE prefix=$val[12]");

                    //$data=$val[6];
                //echo "<br><br><br>";
                //$abc=$val[12];
                //$query =mysql_query("SELECT max(rate) as rate FROM `playsms_toolssimplerate` WHERE prefix='$abc'");
                 //$query['rate'];

                 //$result=mysql_query($query);
                // echo $query;
                //$data=$result;
            }   
            //}  
          }
          //echo $data; 
            //  echo "<br><br><br>";
         // echo $val[12];
          //extract($val);

        //print_r(array_values($val));
        //exit;
        //echo "</br></br></br></br>";
        $sql = "INSERT INTO playsms_toolssimplerate (dst,rate,mccmnc,prefix)
VALUES ('$val[2]- $val[4]','$data','$val[11]','$val[12]')";
//echo $sql."\n";
mysql_query($sql);
}
exit;
  }
?>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Untitled Document</title>
</head>

<body>
<br />
<br />
<br />
<br />
<br />

     <form action="" method="post" enctype="multipart/form-data" >

     <table border="1" width="40%" align="center">
<tr >
<td colspan="2" align="center"><strong>Import Excel file</strong></td>
</tr>

<tr>
<td align="center">Excel File:</td>
<td><input type="file" name="sel_file" id="sel_file" value=upload file/></td>
</tr>
<tr >
<td colspan="2" align="center"><input type="submit" name="submit" id="button" value="Submit" /></td>
</tr>
</table>

</form>
</table>
    <label></label></td>
  </tr>
</table> If The Table Is Filled Then Delete This<br />
<a href="javascript:linkto('index.php?app=menu&inc=tools_simplerate&op=simplerate_upload')"><h><input type='submit' class='button' value='DELETE TABLE'></h3></a>
<br />
<br />
</body>
</html> 
```

我有一个 excel 文件，其中包含国家、运营商、费率、prifix、mccmnc。在这方面，每个国家/地区将有多个国家和运营商，并且还有费率。我必须获得一个国家/地区的最高费率，然后将其添加到相同的运营商等等。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-29T08:25:36.603

```
<?php

error_reporting(E_ALL ^ E_NOTICE);
//ini_set('display_errors', '1');

ini_set('max_execution_time',60);
$con=mysql_connect('localhost','root','');

$link=mysql_select_db('playsms');

if($_POST)
{

/** Include path **/
set_include_path(get_include_path() . PATH_SEPARATOR . '/../../Classes/');

/** PHPExcel_IOFactory */
include('C:\xampp\htdocs\phpexcel\Classes\PHPExcel.php');
include('C:\xampp\htdocs\phpexcel\Classes\PHPExcel\IOFactory.php');
/** PHPExcel */
require_once 'C:\xampp\htdocs\phpexcel\Classes\PHPExcel.php';

/** PHPExcel_IOFactory */
require_once 'C:\xampp\htdocs\phpexcel\Classes\PHPExcel\IOFactory.php';
//include 'PHPExcel/IOFactory.php';
//create reader

//$inputFileName = $_GET['sel_file'];

 $file=$_FILES['sel_file']['name'];
                 if(!$file)
                 {
                 $file="";
                 }
     else
     {
                $target_path= "C:\\xampp\\htdocs\\playsms\\uploads\\";
                $target_path=$target_path.basename($_FILES['sel_file']['name']);

                if(move_uploaded_file($_FILES['sel_file']['tmp_name'],$target_path))
                {
                     echo "The file ".  basename( $_FILES['sel_file']['name']). 
                     " has been uploaded";
                }
                else
                {
                  echo "There was an error uploading the file, please try again!";
                }
    }           
//$inputFileName = "C:\Users\SHIVA\Desktop\CM.2012.25.xls";

$inputFileName= $target_path;
$inputFileType = PHPExcel_IOFactory::identify($inputFileName);

//$objPHPExcel = $objReader->load($inputFileName);

//echo 'File ',pathinfo($inputFileName,PATHINFO_BASENAME),' has been identified as an ',$inputFileType,' file<br />';

//echo 'Loading file ',pathinfo($inputFileName,PATHINFO_BASENAME),' using IOFactory with the identified reader type<br />';
$objReader = PHPExcel_IOFactory::createReader($inputFileType);

$objPHPExcel = $objReader->load($inputFileName);

$sheet = $objPHPExcel->getActiveSheet()->toArray(null,true,true,true);
//var_dump($sheet);
//print_r($sheet);die;
$objsheet = $objPHPExcel->getActiveSheet();
$sheet = $objPHPExcel->getSheet(0); 
$highestRow = $sheet->getHighestRow();
$highestColumn = $sheet->getHighestColumn();
$highestColumnIndex = PHPExcel_Cell::columnIndexFromString($highestColumn);

$nrColumns = ord($highestColumn) - 64;

echo "<br>File ".$sheetTitle  . " has ";
echo $nrColumns . ' columns';
echo $highestRow . ' rows.';

//  Loop through each row of the sheetData in turn    

    for ($row = 6; $row <= $highestRow; ++ $row)
     {

        $val=array("i");

                for ($col = 0; $col <= $highestColumnIndex; ++ $col)
                 {
                    $cell = $sheet->getCellByColumnAndRow($col, $row);
                    $val[] = $cell->getValue();

                    //echo $cell->getvalue();   

                    //echo"<br>";

                }   

        $sql = "INSERT INTO playsms_toolssimplerate (dst,rate,prefix)
VALUES ('$val[2]- $val[4]','$val[6]','$val[12]')";
//echo $sql."\n";
mysql_query($sql);
}
 $sql="select distinct prefix from playsms_toolssimplerate";
$query=mysql_query($sql);
//echo $query;
while($row=mysql_fetch_array($query))
{
$prefix_db=$row['prefix'];
$sql_max_rate="select max(rate) as maxrate from playsms_toolssimplerate where prefix='$prefix_db'";
$query_max_rate=mysql_query($sql_max_rate);
//echo $query_max_rate;
$row_max_rate_arr=mysql_fetch_array($query_max_rate);
$row_max_rate_val=$row_max_rate_arr['maxrate'];
echo $row_max_rate_val;
$sql_update="update playsms_toolssimplerate set rate='$row_max_rate_val' where prefix='$prefix_db'";
mysql_query($sql_update);

}

exit;
  }
?>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Untitled Document</title>
</head>

<body>
<br />
<br />
<br />
<br />
<br />

     <form action="" method="post" enctype="multipart/form-data" >

     <table border="1" width="40%" align="center">
<tr >
<td colspan="2" align="center"><strong>Import Excel file</strong></td>
</tr>

<tr>
<td align="center">Excel File:</td>
<td><input type="file" name="sel_file" id="sel_file" value=upload file/></td>
</tr>
<tr >
<td colspan="2" align="center"><input type="submit" name="submit" id="button" value="Submit" /></td>
</tr>
</table>

</form>
</table>
    <label></label></td>
  </tr>
</table> If The Table Is Filled Then Delete This<br />
<a href="javascript:linkto('index.php?app=menu&inc=tools_simplerate&op=simplerate_upload')"><h><input type='submit' class='button' value='DELETE TABLE'></h3></a>
<br />
<br />
</body>
</html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T11:22:03.240

也许您可以先添加整个 excel 文件，然后更轻松地创建一条 SQL 语句，将每个国家/地区的最高评分放入第二个数据库中？或者只是做一个forloop，找到每个国家的最高评分，然后删除那些较低的？

# c# - 增加 TabContainer header 的宽度

> ID：11667634
> 
> 赞同：0
> 
> 时间：2012-07-26T10:46:38.263
> 
> 标签：c#, asp.net, ajaxcontroltoolkit, tabcontainer

我有一个垂直的 TabContainer，但我无法固定 TabPanel 的宽度（它会增加一点，但不会增加到文本的全宽）。文本隐藏在 ContentTemplate 后面。例如：

![隐藏选项卡标题文本的屏幕截图。](../Images/9765f8315c250356e05636ebf4094c8a.png)

这是标记：

```
 <asp:TabContainer ID="TabContainer1" runat="server" ActiveTabIndex="0" Visible="false"  UseVerticalStripPlacement="true">
       <asp:TabPanel ID="TabPanel2" runat="server" >
             <HeaderTemplate>
                   <div style="width: 200px">General Examination </div>
             </HeaderTemplate>
             <ContentTemplate>  </ContentTemplate>
        </asp:TabPanel> 
```

如何将选项卡的宽度固定为它们都相同？第二个选项卡“一般检查”不完全可见。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T13:09:51.317

您需要为选项卡标题添加一些 CSS。应用于 AJAX 控件工具包 TabContainer 的该元素的样式名为`.ajax__tab_header_verticalleft`。像这样的东西应该工作：

```
.ajax__tab_header_verticalleft 
{
    width: 200px;
} 
```

您可能可以从 200px 回拨一点，但这应该适合您。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-02-23T08:17:31.173

希望这可以帮助其他面临同样问题的人。

在 asp:TabContainer 中提供 VerticalStripWidth="150px"

# java - 找不到 ResourceBundle 文件，属性文件不在 jar 中

> ID：11667638
> 
> 赞同：3
> 
> 时间：2012-07-26T10:47:12.897
> 
> 标签：java, properties, resourcebundle

关于 resourcebundle 错误，我已经阅读了有关同一主题的其他问题，但我没有得到任何更明智的信息。尝试了不同的东西，没有帮助。提供一点背景知识：我开发了一个小应用程序（JDK6），它可以自动进行一些平面文件的解析和编辑。该应用程序首先从属性文件中读取一些数据。

**重要提示**：我希望能够更改属性文件。我不想把它放在 jar 文件中。

但是，即使使用我尝试创建的小示例应用程序，基于另一个问题/答案 [这里][1]：

```
package restestapp;

import java.util.Locale;
import java.util.ResourceBundle;

public class ResourceBundleTester
{
    public static void main(String[] args)
    {
        Locale locale = Locale.getDefault();
        String basename ="myresource";
        ResourceBundle resourceBundle = ResourceBundle.getBundle(basename, locale);
        System.out.println(resourceBundle.getString("STARTING_MYAPP"));
    }
} 
```

两个文件都在这里：

```
/home/dakoina/Documents/ResTestapp/ResTestApp.jar
/home/dakoina/Documents/ResTestapp/myresource.properties 
```

甚至

```
c:/temp/ResTestApp.jar
c:/temp/myresource.properties 
```

但是当我运行它时，它给了我这个输出：

```
dakoina@ubuntu:~/Documents/ResTestapp$ java -cp /home/dakoina/Documents/ResTestapp/ -jar "ResTestApp.jar"
Exception in thread "main" java.util.MissingResourceException: Can't find bundle for base name myresource, locale en_US
    at java.util.ResourceBundle.throwMissingResourceException(ResourceBundle.java:1539)
    at java.util.ResourceBundle.getBundleImpl(ResourceBundle.java:1278)
    at java.util.ResourceBundle.getBundle(ResourceBundle.java:805)
    at restestapp.ResTestApp.main(ResTestApp.java:19) 
```

在 Windows 中，同样...

```
c:\temp>java -jar ResTestApp.jar
Exception in thread "main" java.util.MissingResourceException: Can't find bundle
 for base name myresource, locale en_US
        at java.util.ResourceBundle.throwMissingResourceException(Unknown Source)
        at java.util.ResourceBundle.getBundleImpl(Unknown Source)
        at java.util.ResourceBundle.getBundle(Unknown Source)
        at restestapp.ResTestApp.main(ResTestApp.java:19)
  [1]: http://stackoverflow.com/questions/3742158/using-resourcebundle-with-an-external-file-java 
```

我看不出我错在哪里：/

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-26T10:52:12.377

`-jar`意思是：从给定的 jar 和它在清单中引用的所有 jar 组成类路径。所以这个`-cp`选项被忽略了。

你的命令行应该是：

```
java -cp /home/dakoina/Documents/ResTestapp;/home/dakoina/Documents/ResTestapp/ResTestApp.jar the.main.Class 
```

也就是说，资源包用于加载国际化标签。如果您只想阅读属性，则最好使用`java.util.Properties`该类。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-26T10:49:14.753

`myresource.properties` [需要在 jar 文件的类路径中](http://docs.oracle.com/javase/tutorial/deployment/jar/downman.html)

将此属性文件放入 jar 并配置类路径（如链接中所述）

# wpf - 如何在选择时选择 TreeViewItem

> ID：11667645
> 
> 赞同：0
> 
> 时间：2012-07-26T10:47:34.247
> 
> 标签：wpf

```
 <HierarchicalDataTemplate x:Key="SchemTemplate">
            <TextBlock Text="{Binding Path=path}" />
        </HierarchicalDataTemplate>

        <HierarchicalDataTemplate x:Key="SchemesTemplate">
            <TreeViewItem TextBlock.FontStyle="Italic" 
                          Header="{Binding name}" 
                          ItemsSource="{Binding schemes}"
                          ItemTemplate="{StaticResource SchemTemplate}" />
        </HierarchicalDataTemplate>

        <DataTemplate x:Key="ProjectTemplate">                
            <TreeView>
                <TreeViewItem Header="{Binding Path=name}"
                              ItemsSource="{Binding schemes}"
                              ItemTemplate="{StaticResource SchemesTemplate}">
                </TreeViewItem>
            </TreeView>            
        </DataTemplate> 
```

使用：

```
 <ListBox Style="{StaticResource ListProjectsStyle}"                         
                 x:Name="projects" 
                 Grid.Row="0" Grid.Column="0"
                 ItemsSource="{Binding projects_models, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
                 ItemTemplate="{StaticResource ProjectTemplate}"
                 SelectedItem="{Binding active_project, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}">
        </ListBox> 
```

当我在 TreeView 上单击鼠标右键时，ListBox 的 SelectedItem 发生了变化，但左键单击会这样做。左键单击将焦点放在 TreeView 上或展开 TreeView 项目。当焦点位于 TreeView 上时，如何更改对 ListBox 的焦点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T11:40:43.253

解决方案：

```
 <ListBox.Resources>
                <Style TargetType="{x:Type ListBoxItem}" BasedOn="{StaticResource ListBoxItem}">
                    <EventSetter Event="ListBoxItem.PreviewMouseLeftButtonDown"
                                 Handler="ListBoxItem_Select" />
                </Style>
            </ListBox.Resources>

 private void ListBoxItem_Select(object sender, MouseEventArgs e)
    {
        var mouseOverItem = sender as ListBoxItem;
        if (mouseOverItem != null&& e.LeftButton == MouseButtonState.Pressed)
        {
            mouseOverItem.IsSelected = true;
        }
    } 
```

# android - 是否可以在 ActionbarSherlock 和 Tabs 之间插入布局？

> ID：11667653
> 
> 赞同：3
> 
> 时间：2012-07-26T10:48:35.787
> 
> 标签：android, android-layout, tabs, android-actionbar, actionbarsherlock

我正在使用 ActionBarSherlock，我想插入一个自定义布局，如 Youtube 应用程序。

这是屏幕截图，如您所知，我想要的是绿色边框。据我所知，谷歌正在使用本机 ActionBar，但我想了解是否可以使用 ActionBarSherlock，而且只有在可以使用 ActionBar 的情况下，我该怎么做？

![第一的](../Images/ca1c60796d4212f658c7941f0eb24740.png)...![第二](../Images/f7eb8b44086a5cb4b30e4fdf0af99d1c.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-08T09:27:31.070

不，您不能使用本机或 ActionBarSherlock 选项卡执行此操作。您应该使用以下出色的库之一。它们易于使用，您可以很容易地获得上述外观。

[http://viewpagerindicator.com/](http://viewpagerindicator.com/)

或者

[https://github.com/astuetz/PagerSlidingTabStrip](https://github.com/astuetz/PagerSlidingTabStrip)

# ruby-on-rails - 如何显示相关表中的描述字段（2）

> ID：11667658
> 
> 赞同：0
> 
> 时间：2012-07-26T10:49:06.540
> 
> 标签：ruby-on-rails, activerecord

刚开始玩 Ruby（没有 IT 背景）并根据之前的问题/答案（[链接](https://stackoverflow.com/questions/11630906/how-to-show-description-fields-from-related-table)）重新启动项目。我现在有以下情况：

创建了一个包含以下列的*currencymaster*`id:integer`表，`description:string`其中`isocode:string`ID 列是由 Ruby 创建的。

创建了一个包含以下列的 currencyrates 表， *并且*`id:integer`ID`dominant:integer`列是由 Ruby 创建的。`converted:integer``rate:decimal`

基于[此站点上的帮助，](https://stackoverflow.com/questions/2125440/activerecord-has-many-where-two-columns-in-table-a-are-primary-keys-in-table-b)我创建了以下模型。*models/currencymaster.rb*看起来像这样：

```
class Currencymaster < ActiveRecord::Base
  has_many :currency_rates_dominant, :validate => true, :class_name => 'Currencyrate' 
  has_many :currency_rates_converted, :validate => true, :class_name => 'Currencyrate' 
end 
```

models/currencyrate.rb 看起来像这样：

```
class Currencyrate < ActiveRecord::Base
  belongs_to :currency_master_doms, :class_name => 'Currencymaster' 
  belongs_to :currency_master_convs, :class_name => 'Currencymaster' 
end 
```

我还没有更改两个控制器中的任何内容。

*views\currencyrates\index.html.erb*是通过 Ruby 自动生成的，并将记录的值显示为整数。目标是显示表外的`currencymaster.iso`值`Currencymaster``currencyrate.dominant``currencyrate.converted`

非常感谢！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T12:33:09.993

我认为你应该像这样改变你的班级：

```
class Currencyrate < ActiveRecord::Base
  belongs_to :currency_master_dom, :class_name => 'Currencymaster', :foreign_key => 'dominant' 
  belongs_to :currency_master_conv, :class_name => 'Currencymaster' , :foreign_key => 'converted'
end 
```

之后你应该这样做：

```
rate = Currencyrate.first
rate.currency_master_dom.iso
rate.currency_master_conv.iso 
```

所有的约定都没有得到尊重。你应该使用`dominant_id`and`converted_id`作为外键，`CurrencyRate`对于`CurrencyMaster`类名，你不应该使用 's' `belongs_to`。

# c# - 总是从资源文件中返回默认语言的字符串

> ID：11667665
> 
> 赞同：0
> 
> 时间：2012-07-26T10:49:46.143
> 
> 标签：c#, .net, cultureinfo

我有两个资源文件，`Emails.es.resx`（es-ES）和`Emails.eu.resx`（eu-ES），我在从 eu-ES 文件中检索字符串时遇到问题`myLib.Emails.ResourceManager.GetString("textKey", "eu-ES");`

在本地，这可以正常工作，但在服务器上，是一个 Web 应用程序 + IIS，不起作用，总是返回正确的“textKey”值，但使用默认语言 es-ES。

我清理了解决方案并重建了所有内容，但没有结果。

有谁知道会发生什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T11:49:07.853

确保设置正确的文化。假设您在网站默认页面的某处提供了选项，用户可以在其中选择语言。在更改语言时，将所选语言保存在应用程序状态中的某处.. session 或 catch 或您的任何套件。设置文化如下 [在以下链接中解释：](http://ondotnet.com/pub/a/dotnet/2005/08/08/localizingaspnet20.html?page=3)

```
 protected void Page_PreInit(object sender, System.EventArgs e) {

    System.Globalization.CultureInfo lang = null;
    lang = new System.Globalization.CultureInfo("zh-CN");

    System.Threading.Thread.CurrentThread.CurrentCulture = lang;
    System.Threading.Thread.CurrentThread.CurrentUICulture = lang;

} 
```

现在检索您的资源.. 它应该返回正确的资源。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-06-05T09:45:42.763

将文件重命名为`Emails.es-ES.resx`和`Emails.eu-ES.resx`

# action - 发布操作时出现 OAuthException

> ID：11667667
> 
> 赞同：0
> 
> 时间：2012-07-26T10:49:50.010
> 
> 标签：action, facebook-opengraph

我正在尝试使用以下 javascript 代码发布操作：

```
FB.api('/me/spacemaze:fly_through',
'post',
{maze: 'http://www.gethugames.in/html5spacemaze/', lid: state.currentLevel, score: 1001},
function(resp) {
    if(!resp || resp.error) {
        console.log('err occured');
        console.log(resp.error);
    } else {
        console.log('successfull action');
        console.log(resp);
    }
}); 
```

但是请求失败并得到以下错误：

```
code: 1
message: "An unknown error has occurred."
type: "OAuthException" 
```

在 Open Graph Dashboard 中，`fly_through`定义为具有 2 个自定义属性`lid`和类型`score`的操作。是一个对象，我还没有创建任何聚合。`float``Maze`

我的代码有什么问题？

**编辑1：**

我得到了一个访问令牌，在访问令牌调试器中验证它是有效的，但问题字段显示未知。不确定这是否有问题。

然后在 Graph API Explorer 中，我发布了一个包含以下字段的查询

```
URL: me/spacemaze:fly_through
maze: http://www.gethugames.in/html5spacemaze
lid: 5
score: 10.1 
```

但得到同样的错误：

```
"error": {
"message": "An unknown error has occurred.", 
"type": "OAuthException", 
"code": 1
} 
```

PS：我获得了扩展权限`publish_stream`和`read_stream`扩展权限。还不够吗？

# android - Sprite.setImage() in andengine

> ID：11667668
> 
> 赞同：3
> 
> 时间：2012-07-26T10:49:50.967
> 
> 标签：android, sprite, andengine

I'm developing a game for Android using andEngine. I have to change sprite images dynamically. In J2ME, i used

```
sprite.setImage("img.png"); 
```

But in andengine, i not able to find method

```
//sprite.setImage(?); -In andengine 
```

Any solutions ?

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-04T05:29:30.960

I think use TextureRegion is a better way to change sprite's image.

Add the following code in org.anddev.andengine.entity.sprite

```
public void setTextureRegion(TextureRegion textureRegion) {
    this.mTextureRegion = textureRegion;
} 
```

Then you can change image by this method. You can check the andengine samples to see how to create a texture region from an image.

PS, if `mTextureRegion` is final, just remove the `final` syntax.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-26T12:21:51.527

You need to use `TiledSprite` instead of simple `Sprite`. That `TiledSprite` takes `TiledTextureRegion` as parameter. You create a single `TiledTextureRegion` containing an image with all the small images you need to set on your sprite. Then you call `setCurrentTileIndex(index)` where `index` is the index of the image you need to place on your sprite.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-26T11:36:38.553

I believe you have to do it manually, that is detach/hide the sprite and attach/show a different one.

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2014-07-01T09:10:46.683

I solved this by detaching my sprite, assigning a new Sprite (mySprite = new Sprite(...)) to my sprite and attaching my sprite again.

# javascript - 文档高度未达到全高

> ID：11667669
> 
> 赞同：0
> 
> 时间：2012-07-26T10:49:52.243
> 
> 标签：javascript, jquery, html, height

我有一个黑色覆盖在页面上，但它似乎总是在浏览器的视口底部结束，而不是在页面底部。

我正在使用

```
$(document).height(); 
```

这被称为 AFTER *$(document).ready()*，它在我的页面上安慰 1115，但实际上页面高达 1200。

我试过了，window，innerHeight。所有的报告都是一样的。

我有一种感觉，它不是在等待加载图像，这很高。但是，如果是这样的话，不确定是否有办法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-26T10:56:17.637

在里面做`$(window).load()`而不是`$(document).ready()`

看到这个[链接](http://4loc.wordpress.com/2009/04/28/documentready-vs-windowload/)

# powershell - 使用 powershell 进行 Unix 时间转换

> ID：11667670
> 
> 赞同：1
> 
> 时间：2012-07-26T10:49:52.600
> 
> 标签：powershell, unix-timestamp

```
Import-Module SQLite
mount-sqlite -name places -data (resolve-path C:\Users\malware_win7x86\Desktop\places.sqlite)
$places = Get-ChildItem places:\moz_places

foreach ($entry in $places)
{
    [datetime]$origin = '1970-01-01 00:00:00'
    $visited = $entry.last_visit_date

    if ($visited) {
        $vtime = $origin.AddSeconds($visited)
    } else {
        $vtime = 'testing'
    }

    write-host ""
    $entry.url,
    $entry.visit_count,
    $vtime
} 
```

参考：[使用 PowerShell 转换 Unix 时间](https://stackoverflow.com/questions/10781697/convert-unix-time-with-powershell)

我很好奇如何处理没有数据的条目。

例如，以下是该脚本的一些输出：

```
http://sysforensics.org/
1
Exception calling "AddSeconds" with "1" argument(s): "Value to add was out of range.
Parameter name: value"
At line:7 char:28
+ $vtime = $origin.AddSeconds <<<< ($visited)
    + CategoryInfo          : NotSpecified: (:) [], MethodInvocationException
    + FullyQualifiedErrorId : DotNetMethodException 
```

对此有什么想法吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-04-27T18:46:25.867

该错误看起来像是您给出`AddSeconds`的参数太大或太小，而不是缺少数据。`AddSeconds`使用`$null`或调用`0`将返回原始日期不变。

话虽这么说——我不能确定，因为你没有提供你想要转换的实际整数——我遇到了同样的问题，直到我意识到我收到的数据是以*毫秒*为单位的，而不是秒. 如果您不关心精度的损失，您可以使用`AddMilliseconds`，或者在使用前将数字除以 1000 。`AddSeconds`

感谢[这个答案](https://stackoverflow.com/a/9914134/2498819)为我指明了正确的方向。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T11:36:51.353

在这种情况下，您只需跳过方法调用并替换默认值，例如：

```
if ($visited) { # or maybe $ivisited -is [int] or whatever your criterion is
  $vtime = $origin.AddSeconds($visited)
} else {
  $vtime = $null
} 
```

# symfony - 将 jqmPhp 与 symfony2 集成

> ID：11667672
> 
> 赞同：0
> 
> 时间：2012-07-26T10:49:56.063
> 
> 标签：symfony

我尝试将 jqmphp 与 symfony2 集成。

我已将 lib 文件夹复制到`/vendor/jqmphp`并更新了自动加载器文件，但它不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T12:22:31.823

请确保您仔细执行了这些步骤。

1.  将库复制到`/vendor/jqmphp`
2.  在`autoload.php`底部添加：

    ```
    require_once __DIR__.'/../vendor/jqmphp/lib/jqmPhp.php'; 
    ```

3.  在您的控制器中，您可以开始使用`\JqmPhp()`

# jquery - 用 jQuery 获得 IE8 过渡效果

> ID：11667673
> 
> 赞同：1
> 
> 时间：2012-07-26T10:49:56.500
> 
> 标签：jquery, html, css, internet-explorer

各位大侠，我怎样才能得到ie8的这种颜色过渡效果？我有这个在现代浏览器中完美运行的[**小提琴示例**](http://jsfiddle.net/jojaba/BEndP/1/)，但在 IE8 上它不起作用！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T11:05:49.390

CSS PIE 尚不支持 CSS3 过渡。查看[此处支持的内容](http://css3pie.com/documentation/supported-css3-features/)

# android - 在android中创建带有进度条的对话框

> ID：11667674
> 
> 赞同：4
> 
> 时间：2012-07-26T10:50:05.387
> 
> 标签：android, dialog, progress-bar, progressdialog

我已经成功创建了一个自定义对话框。对话框运行良好。我`ListView`用来列出特定路径中的所有文件。我的自定义对话框包含文件名和复选框。可以移动或删除选定的文件。所有这些工作正常。

我需要在对话框中添加进度条。因为可以删除或移动文件需要一些时间。如何添加进度条。请帮我。

示例屏幕截图：-（如何在绿色中添加进度条）

![在此处输入图像描述](../Images/05d5d3e82e0920c9774ef4c066dc336f.png)

谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-26T10:55:44.440

[Bala 将您创建为对话框的自定义布局插入具有自定义颜色的水平 SCrollBar 中](https://stackoverflow.com/questions/5745814/android-change-horizonal-progress-bar-color)具有绿色颜色的水平进度条的代码。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-26T11:01:38.263

您已经写过您知道如何创建自定义对话框，但我想先发布它：

```
final Dialog dialog = new Dialog(MyActivity.this, R.style.CustomDialogTheme);
dialog.requestWindowFeature(Window.FEATURE_NO_TITLE);
dialog.setContentView(R.layout.info_dialog);
dialog.setTitle("Info");
dialog.setCancelable(false);

    Button deleteButton = (Button) dialog.findViewById(R.id.deleteButton);
ProgressBar progressBar = (Button) dialog.findViewById(R.id.progressBar);

deleteButton.setOnClickListener(new OnClickListener() {
     @Override
     public void onClick(View v) {
     // start progress
     }
     });    

dialog.show(); 
```

对于 info_dialog.xml 文件使用

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout  xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:orientation="vertical">

<ProgressBar
    android:id="progressBar"
    style="@android:style/Widget.ProgressBar.Horizontal"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content" />

</LinearLayout> 
```

# javascript - iframe如何在chrome扩展中访问父窗口

> ID：11667679
> 
> 赞同：5
> 
> 时间：2012-07-26T10:50:18.967
> 
> 标签：javascript, google-chrome, iframe, google-chrome-extension, cross-domain

我的 chrome 扩展文件夹中有一个页面 iframe.html。我希望它显示在我当前的网页中。这就是问题所在，当我单击 iframe 中的按钮时，如何关闭 iframe？我试过这样的代码：

```
window.parent.iframe.hide() 
```

但它不适用于错误：

```
Unsafe JavaScript attempt to access frame with URL 
```

但是我清楚地阅读了evernote的源文件。它有一些代码，如

```
window.parent.$readable.hide() 
```

为什么evernote的扩展有效，但我的扩展显示一些错误？这是我应该在 manifest.json 中做的事情吗？这是我的清单文件。

```
{
  "name": "Reader",
  "version": "1.0",
  "manifest_version": 2,
  "description": "A great start!",
  "browser_action": {
    "default_icon": "icon.png"
  },
  "background": {"scripts": ["background.js"]},
  "permissions": [
    "tabs", "<all_urls>"
  ],
  "web_accessible_resources": [
    "iframe/index.html"
  ]
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T05:20:18.377

我没有仔细研究过 Evernote，但有一种可能性：也许 Evernote 正在为其`<iframe>`添加的内容指定额外的权限属性。看看 MDN 对[`sandbox`属性](https://developer.mozilla.org/en/HTML/Element/iframe#Attributes)的描述：

> 该属性的值可以是解除特定限制的以空格分隔的令牌列表。有效的令牌是：
> 
> `allow-same-origin`：允许将内容视为与包含文档来自同一来源。如果未使用此关键字，则嵌入的内容将被视为来自唯一来源。
> 
> ...
> 
> `allow-scripts`：允许嵌入式浏览上下文运行脚本（但不创建弹出窗口）。如果不使用该关键字，则不允许该操作。

因此，当您的内容脚本将 iframe 添加到页面时，让它添加一个`sandbox`属性，以减轻源和/或脚本限制。

```
<iframe src="chrome-extension://abcdefghijk/iframe/index.html" sandbox="allow-same-origin"> 
```

尝试添加不同的`sandbox`权限，看看是否可以解决它。我相当有信心`allow-same-origin`和/或`allow-scripts`将解决这个问题。

# jquery - 如何使用 jQuery .not() 仅在当前级别选择第一个孩子？

> ID：11667684
> 
> 赞同：1
> 
> 时间：2012-07-26T10:50:39.840
> 
> 标签：jquery, jquery-selectors

我有以下列表结构（顺便说一下，这是一个菜单）：

```
<div id="mainmenu"> 
    <ul class="menu">
        <li class="item-435">
        <li class="item-468 active deeper parent">
            <a href="#">News</a>
            <ul>
                <li class="item-469 current active">
                    <a href="/index.php/news/news-topaktuell">Topaktuell</a>
                </li>
                <li class="item-480">
                    <a href="/index.php/news/events">Events</a>
                </li>
            </ul>
        </li>
        <li class="item-476">
        <li class="item-477">
        <li class="item-478">
        <li class="item-479">
    </ul>
</div> 
```

我想`click()`在第一个上附加一个事件侦听器`<li>`，以便它显示页面的标题。其他`<li>`标签也应该有一个`click()`监听器，但是在这个事件的情况下，标题应该被隐藏；默认情况下显示标题，因此标题应仅显示在主页上（第一个孩子）。

我已经做了什么：

```
$('#mainmenu .menu li:not(:first-child)').click(function() {
     //hide header
});

$('#mainmenu .menu li:first-child').click(function() {
     //show header
}); 
```

但这也会从子列表中选择第一个孩子，这是我不想要的。有什么优雅的方法可以只选择所需的标签吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T10:53:17.197

尝试

```
$('#mainmenu .menu > li:not(:first-child)').click(function() {
     //hide header
});

$('#mainmenu .menu > li:first-child').click(function() {
     //show header
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T10:56:26.920

希望这是您想要实现的目标？

[http://jsfiddle.net/gRoberts/myVs9/](http://jsfiddle.net/gRoberts/myVs9/)

基本上，当您单击 LI 时，您希望其中包含的 UL 显示/隐藏，同时保持您单击的文本可见。

希望有帮助吗？

# c# - 如果用户输入的不是有效整数，我如何使用 `if` 和 `else` 抛出异常？

> ID：11667690
> 
> 赞同：-2
> 
> 时间：2012-07-26T10:51:11.070
> 
> 标签：c#

我正在编写一个添加数字的程序。该程序将用户输入作为整数值，并给他两个数字的总和。但我希望当用户输入除数字之外的任何字符时，将自定义错误写入控制台。你如何用`if`and做到这一点`else`？

我的代码：

```
class Program
{
    static void Main(string[] args)
    {
        double firstnum, secondnum, total;

        Console.WriteLine("FIRST NUMBER");
        firstnum = Convert.ToDouble(Console.ReadLine());
        if (Console.ReadLine == char)
        {
            Console.WriteLine("error... error wrong keyword, enter only numbers...");
        }

        Console.WriteLine("SECOND NUMBER");
        secondnum = Convert.ToDouble(Console.ReadLine());

        total = firstnum + secondnum;
        Console.WriteLine("TOTAL VALUE IS =" + total);

        Console.ReadLine(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T10:58:47.310

首先将字符串读入字符串变量。然后用`TryParse`把它变成一个数字。`false`如果字符串不是有效数字，它将返回，您可以使用它来显示错误。

```
var firstNumAsString = Console.ReadLine();
int firstNum;
if (!int.TryParse(firstNumAsString, out firstNum))
{
    Console.WriteLine("error... error wrong keyword, enter only numbers...");
    return;
} 
```

如果您想抛出异常而不是仅仅显示错误，请使用`int.Parse`. 如果输入无效，它会抛出一个`FormatException`或一个。`OverflowException`

# python - Google App Engine：Win 7（64 位）上的 Python 2.5 和 Python 2.7

> ID：11667698
> 
> 赞同：1
> 
> 时间：2012-07-26T10:51:45.570
> 
> 标签：python, google-app-engine, sdk

我在 Win 7（64 位）上，我想玩 Google App Engine。[我从https://developers.google.com/appengine/downloads](https://developers.google.com/appengine/downloads)下载了最新版本的“Google App Engine SDK for Python” ，我将安装它。

我知道我需要先安装 Python 2.5 和 2.7。

我的问题：

1.  我可以在同一台计算机上安装两个 Python 版本吗？

2.  我想根据配置行**自动**使用 Python 2.5 或 2.7 ：或`app.yaml``runtime: python``runtime: python27`

通过**AUTOMATICALLY**，我的意思是我不必每次运行应用程序时都选择 Python 版本`Google App Engine -> Edit (Tab) -> Preferences -> Python Path`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T10:59:09.200

1.  是的，您可以毫无问题地在您的计算机上安装多个 python 版本。

2.  Python 2.7 向后兼容 2.5。适用于 2.5 的代码也适用于 2.7。在您的 SDK 中使用 Python 2.7 二进制文件，将所有应用程序切换到`python27`运行时，不要回头。无需来回切换。

# objective-c - 如果不是 -O0，则 ObjC / Clang 优化外壳崩溃

> ID：11667703
> 
> 赞同：1
> 
> 时间：2012-07-26T10:52:10.790
> 
> 标签：objective-c, clang, llvm-clang

`clang`做了哪些优化`-O1`？一旦显然执行任何优化，我尝试调试的代码就会失败。是`-O1`我可以一个一个尝试的标志集合吗？

# mongodb - MongoDB 到 Java 集成

> ID：11667706
> 
> 赞同：9
> 
> 时间：2012-07-26T10:52:22.397
> 
> 标签：mongodb, hibernate, jpa, hibernate-ogm, nosql

我们正在尝试将旧的 Oracle sql 应用程序转换为 NO-SQL，我们选择了 Mongo DB。

是否有像 Hibernate 这样的对 Mongo DB 的 ORM 支持来减少我们的编码？

我们可以使用 JPA 规范为 Mongo DB 构建应用程序吗？

如果是 JPA，最好选择哪个 ORM 供应商，为什么？

他们是否为 Mongo DB 提供了 no-sql 方言，以便我们可以使用非关系数据库构建应用程序？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-09T14:12:49.843

Hibernate 4.0 具有支持 MongoDB 的 OGM，您可以在此处查看 Hibernate 与 MongoDB 的示例[Porting Seam Hotel Booking Example to OGM](https://community.jboss.org/wiki/PortingSeamHotelBookingExampleToOGM)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-26T10:59:40.120

你可以选择[Morphia](http://code.google.com/p/morphia/)。它是 Mongodb 的其他 ORM 工具中最稳定的一种。

其他一些工具是：

*   [绿豆](https://github.com/jannehietamaki/mungbean)
*   [弹簧数据](http://www.springsource.org/spring-data/mongodb)
*   [昆德拉](https://code.google.com/p/kundera/)
*   [钟吾](http://jongo.org/)

[您可以在MongoDB 第三方框架和库](http://www.mongodb.org/display/DOCS/Java+Language+Center#JavaLanguageCenter-POJOMappers)部分中找到完整列表。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-26T13:01:35.163

[DataNucleus JPA使用](http://www.datanucleus.org/products/accessplatform_3_1)*真正的*JPA为 MongoDB 提供完全持久性（与 Spring-Data、Morphia 等有自己的 API 不同，因此您没有直接的可移植性 - 但这可能不是您最关心的问题）；对于 DataNucleus，它提供 JPA2（带有一些预览 JPA2.1 功能）。它还为 HBase、RDBMS、NeoDatis、Excel、ODF、XML、JSON、LDAP 和其他一些提供 JPA 持久性，以防您需要对它们进行移植。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-26T12:05:43.910

试试昆德拉。比 Morphia 更好的性能，并提供了很多简单的编码/实现方法。

-维维克

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-07-27T14:50:25.750

您还应该查看2.4 版中发布的[EclipseLink](http://www.eclipse.org/eclipselink)的[MongoDB 支持。](http://java-persistence-performance.blogspot.com/2012/04/eclipselink-jpa-supports-mongodb.html)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-07-26T10:57:29.663

您可以查看[Spring Data](http://www.springsource.org/spring-data/mongodb/) 并查看本[教程](http://krams915.blogspot.it/2011/02/spring-data-mongodb-tutorial.html)

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-09-18T05:05:43.827

[PlayORM](http://buffalosw.com/products/playorm/)现在也支持 MongoDB。PlayORM 是一个对象 NoSQL 映射解决方案，因此您可以编写 POJO 并让它处理编组/解组到 MongoDB 的所有细节。在此处访问其[文档](http://buffalosw.com/wiki/playorm-documentation/)

# c# - 覆盖 winforms OnLoad 导致错误创建处理程序错误

> ID：11667707
> 
> 赞同：0
> 
> 时间：2012-07-26T10:52:22.147
> 
> 标签：c#, winforms

我正在开发一个具有数百个表单的应用程序，并且表单以多种方式与每个表单相关联。

问题是我想对表单应用身份验证。

我所做的是从一个公共类继承所有形式，在我的情况下它是“ **AUTH** ”

在 Auth 中，我所做的是 Override OnLoad 方法，在这里检查是否满足某些条件，然后显示表单，否则隐藏它并显示其他表单。

我的代码是：

```
public class Auth : Telerik.WinControls.UI.RadForm
{

    protected override void OnLoad(EventArgs e)
    {
        if (<Some Condition>)
        {
            base.Hide();

            frmAccessDenied fs = new frmAccessDenied();

            fs.Show();

            base.OnLoad(e);

        }
        else
        {
            base.OnLoad(e);
        }

    }

} 
```

在这种情况下发生的事情是它打开了 frmAccessDenied 但应用程序崩溃说**Error Creating HANDLER**

并指出我在哪里打开表格

```
 Form childForm = new frmMyFORM();
                                        childForm.MdiParent = this;
       **==>>>Crashed HERE**            childForm.Show(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T15:07:00.980

您可以在主程序文件中检查条件。在 Main 方法中，您将拥有如下内容：

```
public static void Main(string[] args) {
    // Starts the application.
    if (<Some Condition>)
    {
        Application.Run(new frmAccessDenied());
    }
    else Application.Run(new Form1());
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T12:16:09.257

MDI 父级是错误。

```
 Form childForm = new frmMyFORM();
                                    childForm.MdiParent = this;
   **==>>>Crashed HERE**            childForm.Show(); 
```

如果我跳过代码

```
childForm.MdiParent = this; 
```

然后一切正常。

# css - 为字体系列中的每种字体指定不同的权重

> ID：11667709
> 
> 赞同：2
> 
> 时间：2012-07-26T10:52:45.893
> 
> 标签：css, fonts, typography, font-family

在您的字体系列中使用备份字体时，有时您可能想使用轻量级版本的 futura 来替代 Century gothic，我如何在我的 css 中指定这个？通常我只是写

```
p {font-family:"century gothic", futura; font-weight:300; font-size:14px;} 
```

但这也会使世纪哥特式的重量达到 300，对吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T11:14:14.627

`font-weight`不，无论字体系列是什么，它都会等于 300。但是，几乎所有字体都没有 300 版本，因此通常会映射到 400（正常）。如果某些字体具有对应于 300 的版本，如 Futura（可用时，它不在大多数计算机中）可能具有的版本，则粗细设置生效。

根据浏览器和系统，轻量级版本也可能以其自己的名称而闻名，因此类似的东西`p {font-family:"century gothic", "futura light"; font-size:14px;}`可能有效。字体权重的处理在浏览器中确实很混乱。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T11:06:04.603

CSS 样式仅应用于选择器。在这种情况下，它将应用于所有 p 标签。

“世纪哥特式”不是这里的选择器。而 font-weight 和 font-family 是完全不同的。它们应用于选择器。

300不会对“世纪哥特”产生任何影响。它只会改变使用 p 标签定义的所有段落的字体粗细。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-26T11:08:03.233

我认为只有使用 Javascript 才能做到这一点。

看看这个： http: [//lucassmith.name/2009/05/test-if-a-font-is-installed-via-javascript.html](http://lucassmith.name/2009/05/test-if-a-font-is-installed-via-javascript.html)

在这里演示：http: [//lucassmith.name/pub/font_installed.html](http://lucassmith.name/pub/font_installed.html)

如果未安装字体，您可以设置不同的`font-weight`.

# ruby-on-rails-3 - 如何挽救来自 Rails 3.2 中的中间件的自定义异常？

> ID：11667710
> 
> 赞同：8
> 
> 时间：2012-07-26T10:52:47.300
> 
> 标签：ruby-on-rails-3, exception-handling, middleware

我有一个使用[Apartment](https://github.com/bradrobertson/apartment/)的 Rails 3.2 应用程序，它用作中间件。Apartment 抛出`Apartment::SchemaNotFound`异常，无法`rescue_from`从`ApplicationController`. 我想我会按照[这篇博](http://blog.plataformatec.com.br/2012/01/my-five-favorite-hidden-features-in-rails-3-2/)`config.exceptions_app`文中第 3 点的描述使用，但我不能将路由器设置为异常应用程序，我假设我必须创建自己的。

所以问题是：我该**如何进行？**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-12-02T16:37:45.357

我们特意保留了`Apartment`非常少的内容，以允许您自己处理异常，而无需任何 Rails 特定设置。

我会做*类似于*上面@jenn 所做的事情，但我不会费心设置机架环境并稍后处理它，只需在机架中完全处理响应即可。

例如，您可能只想重定向回`/`on`SchemaNotFound`

你可以做类似的事情

```
module MyApp
  class Apartment < ::Apartment::Elevators::Subdomain
    def call(env)
      super
    rescue ::Apartment::TenantNotFound
      [302, {'Location' => '/'}, []]
    end
  end
end 
```

这是对异常的非常原始的处理。如果您需要在 Rails 方面发生更多事情，那么@jenn 的回答也应该有效。

查看[机架](https://github.com/rack/rack)以获取更多详细信息

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-25T19:36:43.997

我在另一个中间件抛出自定义异常时遇到了类似的问题，所以我实际上根本没有看过 Apartment，但可能是这样的：

```
#app/middleware/apartment/rescued_apartment_middleware.rb
module Apartment
  class RescuedApartmentMiddleware < Apartment::Middleware
    def call(env)
      begin
        super
      rescue Apartment::SchemaNotFound
        env[:apartment_schema_not_found] = true # to be later referenced in your ApplicationController
        @app.call(env) # the middleware call method should return this, but it was probably short-circuited by the raise
      end
    end
  end
end 
```

然后在您的环境中：

```
config.middleware.use(Apartment::RescuedApartmentMiddleware, etc) 
```

要访问您从 ApplicationController 或任何控制器设置的环境变量：

```
if request.env[:apartment_schema_not_found]
  #handle
end 
```

如何从 Ruby on Rails 应用程序中的 OAuth::Unauthorized 异常中解救的组合[？](https://stackoverflow.com/questions/9227440/how-to-rescue-from-a-oauthunauthorized-exception-in-a-ruby-on-rails-applicatio)以及[如何从 Rails 中访问 Rack 环境？](https://stackoverflow.com/questions/848591/how-do-i-access-the-rack-environment-from-within-rails)

# spring - Spring Security：同时授权两个或多个 Web 应用程序

> ID：11667711
> 
> 赞同：2
> 
> 时间：2012-07-26T10:52:51.790
> 
> 标签：spring, security, authentication, spring-security, simultaneous

您能否给我一个提示，如何同时在几个 Web 应用程序上授权用户？

我有：

*   耳朵
*   *   战争 1 (example.com/)
*   *   战争 2 (example.com/shop/)
*   *   ...
*   *   WAR n (example.com/forum/)

每个 WAR 都是基于 Spring MVC (+Security) 的应用程序。用户在 WAR 1 上被认证和授权。当他切换到任何其他 WAR 时，他必须再次通过认证。如何绕过它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T11:23:49.663

为此，您应该使用spring security 的[CAS](http://static.springsource.org/spring-security/site/docs/3.0.x/reference/cas.html)功能。

# mysql - 随机选择 3 行相等的次数

> ID：11667712
> 
> 赞同：1
> 
> 时间：2012-07-26T10:52:54.470
> 
> 标签：mysql, sql

我正在为我的网站创建一个广告平台，我们需要随机选择 3 行，并且横幅显示的次数也应该平衡。

我们可以像这样得到随机行，

`SELECT column FROM table ORDER BY RAND() LIMIT 0,3`

我们可以通过在每次选择行的同时增加计数字段来平衡次数，并选择计数较少的行，如下所示，

`SELECT * FROM table ORDER BY display_count LIMIT 0,3`.

但它会返回诸如`1,2,3`,之类的值`4,5,6`。但我需要随机选择最少计数的行。对此有任何建议或想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T10:56:27.810

这是你想要的：

```
SELECT * 
FROM table 
ORDER BY display_count ASC, RAND() 
LIMIT 0,3; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T10:56:17.407

你试过了吗

```
SELECT column FROM table ORDER BY RAND(), display_count LIMIT 0,3 
```

? 我想这就是你想要的。

# php - 列出受保护帐户中的推文？

> ID：11667716
> 
> 赞同：2
> 
> 时间：2012-07-26T10:53:05.907
> 
> 标签：php, twitter

我有一个受保护的 Twitter 帐户，但我希望能够在我的网站上显示我最近的推文列表。

我已经准备好深入研究 twitter 文档，但我只是想知道它是否可能？

我的脚本是否必须使用我的帐户进行身份验证，或者有没有办法允许从特定 IP 访问我的 Twitter 帐户？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-26T11:45:52.830

是的，绝对有可能。我不知道是否有更简单的解决方案，但一种方法是在您的帐户授权的 Twitter 上创建一个新应用程序。在授权过程中，Twitter 将为您提供特定帐户的访问令牌。将您的访问令牌存储在数据库中。从使用 Twitter PHP API 的 PHP 小部件读取您的推文，并使用您的访问令牌来显示它。

当您检索推文时，只要您已授权该特定应用程序，它是否受到保护并不重要。

简而言之，显示您的推文的小部件是您已授权的 Twitter 应用程序。（一次性认证）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T11:19:58.760

好吧，我不认为您可以从受保护的帐户中读取任何内容。

我正在阅读有关同一问题的几篇文章，如果您想尝试一下，这里是替代解决方案。（我个人没有试过，所以留给你出手）

[http://www.ehow.com/how_6474863_protected-twitter-updates.html](http://www.ehow.com/how_6474863_protected-twitter-updates.html)

# javascript - 来自 Safari 的山狮通知中心

> ID：11667718
> 
> 赞同：4
> 
> 时间：2012-07-26T10:53:07.547
> 
> 标签：javascript, osx-mountain-lion

是否可以使用类似于 alert() 函数的东西使用 javascript 向通知中心发送通知？我试过谷歌搜索，但它只是打开了苹果网站的 10.8 功能。任何关于如何做到这一点的指针都会很棒，如果它甚至可能的话......

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-26T11:23:26.970

是的，它可以使用 HTML5 向通知中心发送通知。看看这个[http://dangercove.github.com/html5-notifications/](http://dangercove.github.com/html5-notifications/)

# mysql - MySQL INSERT WHERE 变量不重复

> ID：11667719
> 
> 赞同：1
> 
> 时间：2012-07-26T10:53:10.167
> 
> 标签：mysql, sql, database, database-design

我有一些麻烦`DECLARE`，`CALL`功能和`IF`解决。到目前为止我所拥有的是：

```
CREATE PROCEDURE number_of_projects(project_name VARCHAR)
BEGIN
    DECLARE variable INT;
    SET variable = 4;
    SELECT variable;

    SELECT count(project_id) FROM atm_projects WHERE project_name = variable;
END

IF number_of_projects("PROJECT NAME") = 0
    THEN
    INSERT INTO atm_projects(project_id,project_name,added_from_mti)
    VALUES (project_id,'PROJECT NAME',1)
ENDIF 
```

`project_name`主要目标是在不重复的表中插入一行。

我可以更改`project_name`为`UNIQUE`密钥，但请告诉我我的代码有什么问题，我该如何解决？

我需要了解 a `PROCEDURE`, `CALL` `procedure`,的`IF`工作原理。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T11:03:36.560

尝试：

```
CREATE PROCEDURE number_of_projects(project_name VARCHAR(255))
BEGIN
    DECLARE var_project_no INT;
    SET var_project_no = 0;
    SELECT var_project_no;

    SELECT count(project_id) INTO var_project_no FROM atm_projects WHERE var_project_name = 4;

    IF var_project_no = 0
    THEN
        INSERT INTO atm_projects(project_id,project_name,added_from_mti)
        VALUES (project_id,'PROJECT NAME',1)
    END IF;
END; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T10:57:31.897

您已将 project_name 声明为 varchar，但未指定长度。将其更改为 varchar(100)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-26T11:09:40.783

```
CREATE PROCEDURE number_of_projects(project_name VARCHAR(255))
BEGIN

 if NOT  exists(SELECT Top 1 1  FROM atm_projects WHERE var_project_name = 4)
 BEGIN 
   INSERT INTO atm_projects(project_id,project_name,added_from_mti)
   Select project_id,project_name ,1
 END
END; 
```

# sql-server-2008-r2 - 远程 SQL Server 2008 R2 连接错误

> ID：11667723
> 
> 赞同：0
> 
> 时间：2012-07-26T10:53:23.593
> 
> 标签：sql-server-2008-r2, remote-connection

我将首先尝试解释我遇到的问题。我有一个在 Windows 2003 R2 SP2 上运行的 SQL Server 2008 R2。SQL Server 配置为接受端口 1433 上的远程连接。在我配置了 WAMP 服务器的 Windows 7 机器上，我使用 PHP 脚本连接到数据库并检索一些数据。这很完美。

现在我试着把它移到网上。将整个应用程序移到具有 PHP 的 sqlsrv 驱动程序的托管服务器上，我收到此错误。

> 10060 [2] => [Microsoft][SQL Server Native Client 10.0]在建立与 SQL Server 的连接时发生与网络相关或特定于实例的错误。服务器未找到或无法访问。检查实例名称是否正确以及 SQL Server 是否配置为允许远程连接。有关详细信息，请参阅 SQL Server 联机丛书。[消息] => [Microsoft][SQL Server Native Client 10.0]在建立与 SQL Server 的连接时发生与网络相关或特定于实例的错误。服务器未找到或无法访问。检查实例名称是否正确以及 SQL Server 是否配置为允许远程连接。有关详细信息，请参阅 SQL Server 联机丛书。) ) 10060 [2] => [Microsoft][SQL Server Native Client 10.0]在建立与 SQL Server 的连接时发生与网络相关或特定于实例的错误。服务器未找到或无法访问。检查实例名称是否正确以及 SQL Server 是否配置为允许远程连接。有关详细信息，请参阅 SQL Server 联机丛书。[消息] => [Microsoft][SQL Server Native Client 10.0]在建立与 SQL Server 的连接时发生与网络相关或特定于实例的错误。服务器未找到或无法访问。检查实例名称是否正确以及 SQL Server 是否配置为允许远程连接。有关详细信息，请参阅 SQL Server 联机丛书。) ) 0]建立与 SQL Server 的连接时发生与网络相关或特定于实例的错误。服务器未找到或无法访问。检查实例名称是否正确以及 SQL Server 是否配置为允许远程连接。有关详细信息，请参阅 SQL Server 联机丛书。[消息] => [Microsoft][SQL Server Native Client 10.0]在建立与 SQL Server 的连接时发生与网络相关或特定于实例的错误。服务器未找到或无法访问。检查实例名称是否正确以及 SQL Server 是否配置为允许远程连接。有关详细信息，请参阅 SQL Server 联机丛书。) ) 0]建立与 SQL Server 的连接时发生与网络相关或特定于实例的错误。服务器未找到或无法访问。检查实例名称是否正确以及 SQL Server 是否配置为允许远程连接。有关详细信息，请参阅 SQL Server 联机丛书。[消息] => [Microsoft][SQL Server Native Client 10.0]在建立与 SQL Server 的连接时发生与网络相关或特定于实例的错误。服务器未找到或无法访问。检查实例名称是否正确以及 SQL Server 是否配置为允许远程连接。有关详细信息，请参阅 SQL Server 联机丛书。) ) 有关详细信息，请参阅 SQL Server 联机丛书。[消息] => [Microsoft][SQL Server Native Client 10.0]在建立与 SQL Server 的连接时发生与网络相关或特定于实例的错误。服务器未找到或无法访问。检查实例名称是否正确以及 SQL Server 是否配置为允许远程连接。有关详细信息，请参阅 SQL Server 联机丛书。) ) 有关详细信息，请参阅 SQL Server 联机丛书。[消息] => [Microsoft][SQL Server Native Client 10.0]在建立与 SQL Server 的连接时发生与网络相关或特定于实例的错误。服务器未找到或无法访问。检查实例名称是否正确以及 SQL Server 是否配置为允许远程连接。有关详细信息，请参阅 SQL Server 联机丛书。) )

我很困惑为什么我会有不同的结果。我还应该提到托管服务器也在 Windows 上运行。任何人都知道为什么我可能无法从某个服务器连接？任何答案表示赞赏。谢谢！

考斯敏

* * *

谢谢大家的答案。我与我的主机提供商讨论过他们不允许连接。

“使用我们构建您网站的共享主机计划，您将无法通过该站点远程连接到第三方或远程数据库。此外，我们共享主机计划中 MS SQL 数据库的最大大小为 200 MB 和不能改变。”

我对 SQL 很陌生。我考虑过生成一个包含所有记录的 xml 并使用 ftp 自动更新它，但由于用户应该只被允许在登录后查看他们的数据库部分，我不确定这是否安全。

有谁知道如何在网站上显示来自我的 SQL Server 的数据？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T11:02:01.537

首先要做的是建立一个良好的连接：创建一个具有适当 odbc 连接的 udl 文件。最简单的方法是打开记事本并创建一个空文件，然后将 .txt 重命名为 .udl 并双击。UDL 文件经常被误解。它们只是一个格式化的字符串文本文件，它为数据库驱动程序提供足够的信息以建立连接并让数据库服务做出回应。首先检查非 php 驱动程序。

Theb 确定端口 1433 是否打开以及 utp 1434 和任何实例端口。这些通常被您的防火墙阻止。可以通过关闭防火墙来测试

高温高压

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T11:02:39.397

是专用服务器吗？托管服务通常会限制从共享托管到本地环境的允许连接。请与您的主机提供商确认他们是否允许从他们托管的应用程序进行远程连接。

第二件事。您确定您的服务器具有从本地网络外部可见的端口 1433 吗？您的机器可以访问它的事实并不意味着可以从 Internet 访问它。

# magento - Magento 1.12 和 Solr 3.6 没有正确的结果，也没有拼写建议

> ID：11667728
> 
> 赞同：5
> 
> 时间：2012-07-26T10:53:39.900
> 
> 标签：magento, solr

任何想法或建议。我有点困惑，我已经设置了 solr 和 magento 几次，但现在使用 magento 1.12 它的行为很奇怪，没有正确的结果，也没有拼写检查。

我们的 magento 1.11 在 solr 1.4 上运行良好，它仍然运行良好我尝试使用 1.4 和 solr 3.6 没有修复。

任何想法或建议。我有点困惑

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-20T00:50:02.757

我们发现 Magento EE 1.12 的 solr 存在多个问题。

1.  如果您通过 cronjob 从 shell 运行全文索引器，则不会调度以下事件（是的，拼写错误）“catelogsearch_searchable_attributes_load_after”，并且不会运行此方法：storeSearchableAttributes。这会阻止在 Solr 文档中发送所有全文属性。解决方案是从 GUI 运行它，但您必须在 .htaccess 中延长 php 超时时间，并且还可能延长 php 内存限制。我可能会在某个地方对其进行硬编码，因为您显然不希望您的网站访问者有这么长时间的超时。

2.  我建议在 magento 管理 gui 中启用“部分提交”。

3.  运行此索引器时请注意 solr 日志。它提供了宝贵的线索。我们有两个问题导致 solr 出现严重错误。一个“*”被错误地转义为“\*”的地方。我们通过从核心创建本地覆盖来覆盖它，我们检查！==“*”：app/code/local/Enterprise/Search/Model/Adapter/Solr/Abstract.php

    ```
     foreach ($facetFieldConditions as $facetCondition) {
                     if (is_array($facetCondition) && isset($facetCondition['from'])
                             && isset($facetCondition['to'])) {
                        $from = (isset($facetCondition['from']) && strlen(trim($facetCondition['from'])) && trim($facetCondition['from']) !== "*")
                             ? $this->_prepareQueryText($facetCondition['from'])
                             : '*';
                        $to = (isset($facetCondition['to']) && strlen(trim($facetCondition['to'])) && trim($facetCondition['to']) !== "*") 
    ```

4.  我们还遇到过这样一种情况，即设置为多选的属性可能没有选择任何选项。长话短说，当数组为空时，它会导致附加一个空字符串，从而引发错误。解决方案是首先检查数组是否为空。所以我们不得不用 app/code/local/Enterprise/Search/Model/Adapter/Abstract.php 覆盖

    `if (!empty($val)) { $preparedValue = array_merge($preparedValue, explode(',', $val)); }`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-16T15:10:33.497

我们还刚刚修复了带有选择/多选属性的产品与空白标签一起发送到 solr 的问题。这导致索引器无法完成。

我们覆盖了 app/code/core/Enterprise/Search/Model/Adapter/Abstract.php 并将创建一个本地模块来正确覆盖它。

这是修复

```
--- a/app/code/core/Enterprise/Search/Model/Adapter/Abstract.php
+++ b/app/code/local/Enterprise/Search/Model/Adapter/Abstract.php
@@ -434,6 +434,10 @@ abstract class Enterprise_Search_Model_Adapter_Abstract
                     foreach ($preparedValue as $id => $val) {
                         $preparedValue[$id] = $attribute->getSource()->getOptionText($val);
                     }
+                    
+                    $preparedValue = array_filter($preparedValue);
+                    $preparedNavValue = array_filter($preparedNavValue);
+                    
                 } else {
                     $preparedValue = $value;
                     if ($backendType == 'datetime') { 
```

# java - Netbeans 拖放生成器不起作用（Kubuntu 12.04，Netbeans 7.0）

> ID：11667733
> 
> 赞同：3
> 
> 时间：2012-07-26T10:53:51.683
> 
> 标签：java, user-interface, netbeans, drag-and-drop

我需要在 Netbeans 中为我的应用程序构建 gui **（我对其他解决方案不感兴趣，例如 Eclipse 及其插件导致我的老师要求我的应用程序仅用 Netbeans 编写）。**

我创建了一个 Netbeans Java 项目并添加了 JPanel 和 JFrame 表单，但拖放构建器不起作用。我仍然看到这个：

![在此处输入图像描述](../Images/fc728082974a2556a01988c9651ddae0.png)

即使我尝试拖动（例如）JButton 并将其放在 JPanel 上，也没有任何反应。

我该怎么办？在 Kubuntu 12.04 上使用最新的 Netbeans 7.1。

***我的 IDE 日志：*** [http: //pastie.org/private/lige9jjnsi2fq7bx08purw](http://pastie.org/private/lige9jjnsi2fq7bx08purw)

另请参阅：

![在此处输入图像描述](../Images/c5383293e286435c85e2cc4ce1ab68c0.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-26T11:33:34.460

# Debian/Ubuntu

这可能是目前 Debian/Ubuntu 版本中的一个错误。我发现了以下两个错误报告，似乎与您的错误相匹配：

*   [http://bugs.debian.org/cgi-bin/bugreport.cgi?bug=653915](http://bugs.debian.org/cgi-bin/bugreport.cgi?bug=653915)
*   [https://bugs.launchpad.net/ubuntu/+source/netbeans/+bug/944857](https://bugs.launchpad.net/ubuntu/+source/netbeans/+bug/944857)

总结一下错误报告：似乎还没有真正的修复，但对于使用以下命令启动 NetBeans 的某些人来说是一种解决方法：

```
$ netbeans -cp:a /usr/share/java/xercesImpl.jar 
```

不幸的是，我目前没有 Debian 基础系统，所以我无法测试它是否适合我。

# 琴图

似乎同样的错误也影响了 Gentoo Linux。我可以通过出现`dev-java/batik`然后启动 NetBeans 来解决这个问题：

```
$ netbeans-7.1 -cp:a /usr/share/batik-1.7/lib/batik-ext.jar 
```

如果您安装了不同版本的应用程序，则可能需要交换此命令中的版本。

# r - R - 对照其他向量检查向量的元素

> ID：11667734
> 
> 赞同：0
> 
> 时间：2012-07-26T10:53:52.537
> 
> 标签：r, loops, indexing, match

我想将数据框中列的元素与另一个数据框进行匹配。

考虑这些数据框：

```
A=data.frame(par=c('long A story','long C story', 'blabla D'),val=1:3) 
B=data.frame(par=c('Z','D','A'),val=letters[1:3]) 
```

B 列“par”的每个元素都应与 A 列 par 匹配。如果有匹配项，则应在 A 中标记。[这将给出一列用于合并 A 和 B 的常用值]。

因此，期望的结果是：

```
A=transform(A,label=c('A','NA','D')) 
```

如何才能做到这一点？

亨克

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T12:03:37.197

嗨，你可以这样做：

```
list <- lapply(1:length(B$par),function(x) grep(B$par[x],A$par))
list
[[1]]
integer(0)

[[2]]
[1] 3

[[3]]
[1] 1

label <- rep("NA",length(list))

B$par <-as.character(B$par)

label[unlist(list)] <- B$par[which(list != "integer(0)")]
label
[1] "A"  "NA" "D" 

A <- transform(A,label=label)
A
           par val label
1 long A story   1     A
2 long C story   2    NA
3     blabla D   3     D 
```

希望这可以帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-26T12:12:51.103

我想到的方法：

```
M <- lapply(strsplit(as.character(A$par), " "), function(x) x[x %in% B$par])
M[sapply(M, function(x) {identical(x, character(0))})] <- NA
A$label <- unlist(M)
A

           par val label
1 long A story   1     A
2 long C story   2  <NA>
3     blabla D   3     D 
```

Microbenchmarked 答案在这里和这里是结果：

```
Unit: microseconds
       expr      min       lq   median       uq      max
1  EDWARD() 1638.815 1678.934 1698.061 1726.983 4973.823
2   SONAL()  705.348  725.874  734.738  747.334 2085.721
3     TLM()  268.705  281.300  287.831  294.362 1465.744
4 TRINKER()  156.278  168.407  173.538  177.737 1331.391 
```

![在此处输入图像描述](../Images/8db0d6696f19b0f528d62500b67a5fef.png)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-26T11:52:15.070

要执行您的要求，请尝试

```
A=data.frame(par=c('long A story','long C story', 'blabla D'),val=1:3) 
B=data.frame(par=c('Z','D','A'),val=letters[1:3])
A$label <- NA
for (x in B$par){
    is.match <- lapply(A$par,function(y) grep(x, y))
    A$label[which(is.match > 0)] <- x
} 
```

（我假设您在示例中指的是大写字母 A `A=transform(a,label=c('A','NA','D'))`；在这种情况下，这些完全匹配）。编辑：我看到你做了那个编辑。他们确实匹配。

仅当恰好有一个 B 适合每个 A 时，上述方法才有效（换句话说，一个 B 可以有多个 As，但 A 不能有多个 B）。这是因为您在输出中需要的结构。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-26T12:12:16.390

在一个方便的函数中没有循环：

```
findkey <- function(key,terms) {
  result <- sapply(as.character(key),function(x) grepl(x,terms))
  result <- apply(result,1,function(x) names(x)[x==TRUE])
  result[(lapply(result,length)==0)] <- NA

  return(unlist(result))
} 
```

应用于当前示例：

```
A$label <- findkey(B$par,A$par) 
```

结果：

```
> A
           par val label
1 long A story   1     A
2 long C story   2  <NA>
3     blabla D   3     D 
```

# javascript - 更改 2 个元素的不透明度以提供交叉淡入淡出效果

> ID：11667735
> 
> 赞同：1
> 
> 时间：2012-07-26T10:53:57.233
> 
> 标签：javascript, jquery, animation

我正在为电子商务开发一些功能，其中用户单击产品颜色，并且产品的先前图像在新产品消失时淡出，我正在尝试实现交叉淡入淡出效果，但是我有闪烁效果在那里我不想要，我认为当我从 dom 中删除旧图像时，这是一个向你展示我想要做什么的小提琴。

[http://jsfiddle.net/L9Z5G/](http://jsfiddle.net/L9Z5G/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T10:57:49.603

使用 .hide() 和 .show() 并让它们自己淡入淡出不是更容易吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-26T11:00:06.843

要绑定单击事件，请使用 click() 方法。

```
$('#color1').click(function(){
      $('#image1').fadeOut('fast');
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-26T11:00:39.400

请试试这个：**工作演示** [http://jsfiddle.net/djMZe/1/](http://jsfiddle.net/djMZe/1/) **或** [http://jsfiddle.net/R7u8G/1/](http://jsfiddle.net/R7u8G/1/)

希望能满足需求！`:)`

**代码**

```
$("#colours li").click(function() {
    $(".large-image:first-child:not(.new)").animate({
        opacity: 0
    }, 500);
    var img = $("<img />").attr('src', $(this).data("alternative")).attr("class", "large-image new");
    img.css({
        opacity: 0
    })
    $(".zoom-image").append(img);
    //img.animate({ opacity    :    1}, 500);
    img.css({
        "opacity": "1"
    }).fadeIn("slow");
    $(".large-image:not(:last-child)").remove();

});​ 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-26T11:14:15.767

看这个[**DEMO**](http://jsfiddle.net/akhurshid/jwnWU/)，希望你需要这个效果。

**编辑：** [**更新的小提琴**](http://jsfiddle.net/akhurshid/ZKgnR/10/)

**jQuery 循环插件**

```
$('#slideshow').before('<ul id="nav">').cycle({
    fx: 'fade',
    speed: 'fast',
    timeout: 0,
    pager: '#nav',

    // callback fn that creates a thumbnail to use as pager anchor 
    pagerAnchorBuilder: function(idx, slide) {
        return '<li><a href="#"><img src="' + slide.src + '" width="50" height="50" /></a></li>';
    }
});​ 
```

[**见参考**](http://jquery.malsup.com/cycle/)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-26T11:33:19.587

我希望这就是你要找的：[Demo](http://jsfiddle.net/bKYwV/1/)

```
$('.colours').click(function() {
  if ($('#' + $(this).html().toLowerCase()).attr('class') == 'active') { return; }

  var active = $('.active');
  var next = $('#' + $(this).html().toLowerCase());

  active.fadeOut(500, function() {
    $(this).toggleClass('active');
  });
  next.fadeIn(500, function() {
    $(this).toggleClass('active');
  });
});​ 
```

# php - SOAP 函数调用未执行

> ID：11667736
> 
> 赞同：0
> 
> 时间：2012-07-26T10:54:04.660
> 
> 标签：php, soap

我有一个类似的代码

```
$data = $soapClient->__soapCall($method, $parameters, $options, $headers, $outputHeaders); 
```

我的代码在这里中断，通过给出如下错误

```
[Thu 07 26 15:53:42 2012]   exception:Critical  SoapClient->__doRequest@145 /www/soaps/index    A SoapFault has occured: Gone 
```

我正在尝试访问 URL：`http://soap.amazon.com/schemas3/AmazonWebServices.wsdl`使用函数`KeywordSearchRequest`。`__soapCall`正在破坏，但`__getFunctions`工作正常。我该如何解决这个问题或我做错了什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T06:58:02.687

当我尝试访问 Web 服务时，我得到了响应。可能您需要升级/更改 WebService。

我们很抱歉

## 我们很抱歉 - 服务消失了

Amazon Ecommerce Web Service 3.0 在 2008 年 3 月 31 日经过多年的有用服务后已被弃用。请按照[迁移指南](http://developer.amazonwebservices.com/connect/entry.jspa?categoryID=12&externalID=627)中的详细说明升级到 Amazon Associates Web Service 4.0 。请访问[Amazon Associates Web 服务开发者论坛](http://developer.amazonwebservices.com/connect/forum.jspa?forumID=9&start=0)了解更多信息。如果您从 RSS 提要访问此页面，请访问[亚马逊的产品 RSS 提要](http://www.amazon.com/b/?ie=UTF8&node=390052011)页面进行升级。

# javascript - 弹出代码文档的语法荧光笔

> ID：11667739
> 
> 赞同：-2
> 
> 时间：2012-07-26T10:54:07.450
> 
> 标签：javascript, jquery, syntax-highlighting

是否有任何带有代码文档弹出窗口的基于 javascript 的语法荧光笔。我的意思是当光标悬停一些标签或属性时，它会显示带有标签描述的弹出屏幕。

就像[Mozilla Thimble](https://thimble.webmaker.org/en-US/editor)一样，当你点击一些 HTML 标签或 CSS 属性时，它会弹出带有代码描述的帮助。 ![在此处输入图像描述](../Images/3a0d0294dc8d3ecd76d89e7eebd20a46.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T11:10:28.083

您可以使用 ACE 编辑器 - [http://ace.ajax.org/](http://ace.ajax.org/) - 然后覆盖编辑器单击事件。

# java - 文件夹观察器在 JDK 7 中如何工作？

> ID：11667743
> 
> 赞同：3
> 
> 时间：2012-07-26T10:54:35.220
> 
> 标签：java, operating-system, directory, subdirectory, java-7

我正在开发 Java 应用程序，我需要查看文件夹中是否出现新文件或新文件夹。我的问题是 Folder Watcher 只监听文件夹树中第一级的修改，我需要查看是否在树结构的所有子文件夹中创建了新文件夹。我的想法是将文件夹监视程序放在我的所有子文件夹上。我不知道这是多么有效，因为我不知道是什么导致了文件被创建|删除|修改的事件。我希望操作系统会发出一个事件，表明文件系统中已创建了一个新文件，并且这会以某种方式对 JVM 进行一些调用。我的猜测正确吗？因为我需要一种有效的方法来知道我的文件夹结构中已经创建了一个文件。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-26T11:00:38.807

的[JavaDoc 是`WatchService`](http://docs.oracle.com/javase/7/docs/api/java/nio/file/WatchService.html)这样说的：

> 从文件系统观察事件的实现旨在直接映射到可用的本地文件事件通知设施，或者在本地设施不可用时使用原始机制，例如轮询。

换句话说：如果操作系统提供了一种有效的方式来实现这一点，那么虚拟机应该使用这种方式，如果操作系统不提供这种方式，那么使用更简单（但更昂贵）的轮询机制。

话虽如此，大多数现代操作系统*确实*具有必要的文件监视 API，但它们的具体实现有所不同。一些允许观察整个子树，而另一些只观察一层深度（就像 Java API 所做的那样）。这可能也是`WatcherService`默认情况下只有一级深度的原因。

# math - Slope Of Line Between Two Points With Same X

> ID：11667744
> 
> 赞同：0
> 
> 时间：2012-07-26T10:54:40.947
> 
> 标签：math, 2d, point

I am implementing a 2D football game. For my pass algorithm, I calculate the slope between the passer and reciever with the equation `m = (y[2]-y[1])/(x[2]-x[1])`

In some conditions `x[2]` and `x[1]` are equal resulting in a divide by zero exception. What should I do in this case?

I did not ask this question on [math.stackexchange.com](http://math.stackexchange.com) because it's a programming question.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-26T11:04:07.027

Don't use the slope of a line for this sort of operation, for just the reason you have stumbled across. Use instead the angle of the line from passer to passee. Apply a little trigonometry. If that little trigonometry is beyond you, delete this question, do some work, then post again when you get stuck again.

**EDIT**

I suggest you use trigonometry for 2 reasons.

1.  Because the slope of a line between two points with the same x coordinate is indeterminate. Yes, you could, as the other answer suggests, fiddle around and make the slope a very large value when the x coordinates are the same, but it's an unnecessary compromise when trigonometry, which will produce an angle whatever the x and y coordinates, is available.
2.  Trigonometry will give you a natural interpretation of the value of the angle from passer to passee. A pass at an angle of 90 degrees (pi/2 radians, though I'm not sure many footballers or fans think of angles in radians during a match) means a cross-field pass (I'm assuming that your y-axis aligns with the long axis of your pitch), a pass at an angle of 180 degrees is a back pass, and so forth.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-26T11:14:25.770

If you would like to skip the Trig application, you could check `if(x1 != x2) //whatever math needs to be done`

This way, if the x's are equal, you could set your own value for a "flat pass" in the else statement and never have to worry about a divide by zero exception again.

Good luck with whatever route you choose! (I would recommend using Trig if you have the time to learn it (if necessary))

# asp.net-mvc-3 - 为什么会出现“无法访问已关闭的文件”错误？为什么只在服务器上？

> ID：11667745
> 
> 赞同：0
> 
> 时间：2012-07-26T10:54:41.803
> 
> 标签：asp.net-mvc-3, file-upload

我有一个上传图片的代码片段。上传时，它会将文件临时存储在 Session 中。然后单击“保存”，它将文件保存在数据库中。

我的机器上没有问题，但是在服务器上，每当我尝试上传一些文件，然后单击“保存”时，它都会显示错误“无法访问已关闭的文件”。在谷歌上搜索，我[在这里](http://shivasoft.in/blog/microsoft/net/cannot-access-a-closed-file-fileupload-in-asp-net/)读到这是由于上传了大文件。我想确认一下，是我上传大文件的问题吗？或者它可能是别的东西？另外，为什么我没有在我的机器上得到这个，而只在服务器上得到这个？

编辑：顺便说一句，错误出现在`file size > 80kb`

上传文件的代码：

```
public ActionResult StoreLogoInSession(HttpPostedFileBase file, int assetID)
        {
            string filename = null;
            if (ValidateOnUpload(file))
            {
                Session.Add("TempLogo", file);
                filename = file.FileName;
                Session.Add("filename", filename);
            }
            return RedirectToAction("Edit", new { id = assetID });
        } 
```

保存代码（这是发生错误的时间）：

```
public ActionResult SaveLogo(LogoModel m, int assetID)
        {
                HttpPostedFileBase file = (HttpPostedFileBase)Session["TempLogo"];
                var logoModel = new LogoModel();
                var asset = this.GenerateAssetForUploadFile(file, (int)m.Asset.AccountID, m.Asset.TextContents, m.Asset.AssetName);
                this.LogoManagementFacade.SaveLogo(asset);
                logoModel.Asset = asset;
                this.LogoModelList.Add(logoModel);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T13:12:10.980

解决此问题的第一件事是摆脱会话并将上传的文件临时存储在文件系统上，或者如果您在共享文件夹上的网络场中运行，或者文件不够大，您甚至可以存储它们在数据库中。

因此，假设您当前没有在网络场中运行，并且您有一个网络服务器，并且我们可以将上传的文件存储在一个临时文件夹中（当然，您将编写一个可以每晚运行并删除的预定脚本早于 X 天的文件，以避免白白浪费磁盘空间）：

```
public const string AssetsFolderBase = "~/App_Data";

public ActionResult StoreLogo(HttpPostedFileBase file, int assetID)
{
    string filename = null;
    if (ValidateOnUpload(file))
    {
        var folder = Path.Combine(Server.MapPath(AssetsFolderBase), assetID.ToString());
        if (!Directory.Exists(folder))
        {
            Directory.CreateDirectory(folder);
        }
        folder = Path.Combine(folder, Path.GetFileName(file.FileName));
        file.SaveAs(folder);
    }
    return RedirectToAction("Edit", new { id = assetID });
} 
```

然后当您需要访问它时：

```
public ActionResult SaveLogo(LogoModel m, int assetID)
{
    var folder = Path.Combine(Server.MapPath(AssetsFolderBase), assetID.ToString());
    var file = Directory.GetFiles(folder).FirstOrDefault();
    if (file == null)
    {
        // no file with this assetID was uploaded => throw an exception
        // or return 404 or something
        return HttpNotFound();
    }

    // at this stage the file variable is pointing to the uploaded filename
    // => you could process it here ...
} 
```

现在，如果您想处理大文件上传，您显然应该确保[在 web.config 中调整正确的设置](https://stackoverflow.com/a/10446355/29407)。默认情况下，您被限制为 4MB。

哦，当您编辑 web.config 时，请确保添加以下行，以确保没有其他开发人员犯与您相同的错误并意外使用 ASP.NET 会话：

```
<sessionState mode="Off" /> 
```

# jquery - jquery 自动完成功能出错，因为“a 为空”

> ID：11667746
> 
> 赞同：0
> 
> 时间：2012-07-26T10:54:42.333
> 
> 标签：jquery, jquery-autocomplete

此函数在文本框的 onkeydown 上调用

```
function autoComplete(type, select) {
    $('#search_name').autocomplete({
    source: function( request, response ) {
        $.ajax({
        url: "/searches/autoComplete",
        dataType: "json",
        data: {
            term: $.trim(request.term)
        },
        success: function( data ) {
            response( $.map( data, function( item ) {
            return {
                label: item.value,
                value: item.value,
                type : item.type,
                id   : item.id
            }
            }));
        }
        });
    },
    minLength: 2,
    select: function( event, ui ) {
        var url = ui.item.type + '/edit/' + ui.item.id;
        $(location).attr('href', url);
    }
    });

} 
```

在控制台中签入时出现如下错误

```
a is null

..."resolve"],fail:[b,"reject"],progress:[c,"notify"]},function(a,b){var c=b[0],e=b... 
```

只有在没有返回响应时才会出现此错误`data`，否则它工作正常。

如何避免这个错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T10:58:59.947

如果您希望请求返回数据，但它返回 null，则不应将其视为成功，而应视为失败。在您的服务器代码中，如果您无法返回请求的数据，您应该返回 404 或类似的内容。

**编辑：**从下面的评论来看，这似乎最好`header("HTTP/1.0 404 Not Found");`在 PHP 中解决。

我想你也可以只签入 JavaScript 以避免错误，但这并不是一个真正干净的解决方案..

```
success: function( data ) {
    if(data) {
        response( $.map( data, function( item ) {
            return {
                label: item.value,
                value: item.value,
                type : item.type,
                id   : item.id
            }
        }));
    }
} 
```

# java - 错误：com.google.gson 包不存在（在 play 框架 2.0 中）

> ID：11667753
> 
> 赞同：0
> 
> 时间：2012-07-26T10:55:22.690
> 
> 标签：java, playframework-2.0

我正在尝试在我的 play framework2.0 项目中使用 com.google.gson，我已将 jar 文件包含在库中，并在我的 build.scala 文件中提及它们，但它仍然给我错误：`package com.google.gson`不存在.

我的`build.scala`文件看起来像：

```
val appDependencies = Seq(
                    // Add your project dependencies here,

                    "com.google.gson" % "gson" % "2.2.2"
        ) 
```

我已经从[这里下载了 jar 文件](http://code.google.com/p/google-gson/downloads/detail?name=google-gson-2.2.2-release.zip&can=2&q)

请建议我是否应该将所有三个 jar 文件包含在`build.scala`? 还是我的 build.scala 文件是正确的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T11:01:09.860

您必须使用：

“com.google **.code.gson** ”%“gson”%“2.2.2”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T16:00:49.830

你必须以一种或另一种方式做到这一点：

*   将其包含在`build.scala`文件中，让 Play 为您下载。
*   或者直接在`lib`文件夹中包含jar。

你应该双向进行。

正如 adis 的评论中所说：如果您使用 IDE，您是否重新加载了它？

# wpf - WPF错误？将 UnsetValue 应用于超链接中的 Foreground 属性

> ID：11667761
> 
> 赞同：0
> 
> 时间：2012-07-26T10:55:57.527
> 
> 标签：wpf, richtextbox, flowdocument

我目前正在 WPF 中开发一个可突出显示的富文本框控件。用户可以在搜索框中键入一些文本，富文本框突出显示搜索词的出现。一切正常，直到我在richtextbox中有超链接，例如：

```
blablabla stackoverflow.com 
```

我搜索这个词：

```
st 
```

它用红色前景正确突出显示文本（stackoverflow 中的“st”）。但是当我按下退格键时——所以搜索词变成了单个“s”字母——我得到了一个例外：

```
System.ArgumentException: 'NamedObject' parameter type is not valid for formatting property 'Foreground'.
Parameter name: value 
```

这是因为我的算法是这样的：

1.  突出显示richtextbox 中的文本：我将每个突出显示的TextRange 添加到字典中，其中键是突出显示的TextRange，值是我使用以下代码检索的那个TextRange 的旧前景属性：

    ```
    textrange.GetPropertyValue(TextElement.ForegroundProperty) 
    ```

2.  每次用户更改过滤器字符串时，我都会删除旧的突出显示，并使用新的过滤器字符串“重新突出显示”richtextbox，就像在步骤 1 中一样。

    *   例外来自过程的“删除突出显示”部分。为了删除突出显示，我枚举了字典，并且对于每个 TextRange，我将 ForegroundProperty 重置为保存的值：

        ```
        foreach (var textRangeEntry in highlightedTexts)
        {                
            textRangeEntry.Key.ApplyPropertyValue(TextElement.ForegroundProperty, textRangeEntry.Value);
        } 
        ```

问题是有时保存的 ForegroundProperty 变成 DependencyProperty.UnsetValue - 我得到一个异常。

这很奇怪。看起来 ForegroundProperty “不喜欢” UnsetValue，但是例如，当我过滤到

```
ov 
```

在文中

```
blablabla stackoverflow.com 
```

然后当我擦除“v”时，一切正常。

仅当我突出显示超链接的开头时才会出现异常。

这是 WPF 中的一个奇怪的错误还是我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T11:38:40.003

我已经意识到这个问题（错误？）在 textrange.GetPropertyValue 调用中。我将以更短和更具体的形式重新发布这个问题。

# c - 将客户端绑定到本地端口

> ID：11667763
> 
> 赞同：0
> 
> 时间：2012-07-26T10:56:02.490
> 
> 标签：c, linux, sockets, tcp, tcpclient

我正在尝试将我的 TCP 客户端配置为使用特定的本地端口连接到另一个 TCP 服务器。

我正在使用下面的代码，但它不起作用。你知道我做错了什么，如果这可能吗？我正在使用LINUX机器。

谢谢

AFG

```
 int localport=32000;
    m_clientfd = socket( AF_INET, SOCK_STREAM, 0 );
    assert( m_clientfd >= 0 );

    // someone set the localport        
    struct sockaddr_in sa_loc;
    struct hostent* pLocalHostInfo = gethostbyname( "localhost" );
    long LocalHostAddress;
    memcpy( &LocalHostAddress, pLocalHostInfo->h_addr
    , pLocalHostInfo->h_length );

    // Local
    memset(&sa_loc, 0, sizeof(struct sockaddr_in));
    sa_loc.sin_family = AF_INET;
    sa_loc.sin_port = htons(localport);
    sa_loc.sin_addr.s_addr = LocalHostAddress;
    int ret_bind = bind(m_clientfd, (struct sockaddr *)&sa_loc
    , sizeof(struct sockaddr));
    assert( ret_bind != -1 ); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-26T10:58:40.490

> ```
> int ret_bind = bind(m_clientfd, (struct sockaddr *)&sa_loc,
>     sizeof(struct sockaddr)); 
> ```

最后一个参数应该是`sizeof(sa_loc)`or `sizeof(struct sockaddr_in)`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T11:38:57.737

看起来使用下面的代码可以使应用程序正常工作。删除本地IP的设置就足够了。

```
// Local
memset(&sa_loc, 0, sizeof(struct sockaddr_in));
sa_loc.sin_family = AF_INET;
sa_loc.sin_port = htons(localport);
// sa_loc.sin_addr.s_addr = LocalHostAddress; // COMMENT THIS TO WORK
int ret_bind = bind(m_clientfd, (struct sockaddr *)&sa_loc
, sizeof(struct sockaddr));
assert( ret_bind != -1 ); 
```

# javascript - Javascript 新运算符

> ID：11667765
> 
> 赞同：1
> 
> 时间：2012-07-26T10:56:09.493
> 
> 标签：javascript

我是基于 OOP 的 JavaScript 的新手。出于测试目的，我创建了以下代码段。我已经创建了四个按钮，点击每个按钮都会有不同的功能。当我第一次单击任何按钮时，它会给出预测的结果。在第二次单击任何按钮时，它给了我以下错误：

```
classFunction = new classFunction(); 
```

我使用的代码如下：

```
<html>
  <head>
    <script type="text/javascript">
      var classFunction;

      function classFunction() {
        this.publicVariable = 'Public Varibale';
        var privateVariable = 'Private Variable';

        this.publicMethod = function () {
          alert('Public Method');
        }

        function privateMethod() {
          alert('private Method');
        }

        return this;
      }

      function privateVariable() {
        classFunction = new classFunction();
        alert(classFunction.privateVariable);
      }

      function publicvariable() {
        classFunction = new classFunction();
        alert(classFunction.publicVariable);
      }

      function privateFunction() {
        classFunction = new classFunction();
        classFunction.privateMethod();
      }

      function publicFunction() {
        classFunction = new classFunction();
        classFunction.publicMethod();
      }
    </script>
  </head>

  <body>
    <input type="button" value="Private Variable" onclick="privateVariable()" />
    <input type="button" value="Public Variable" onclick="publicvariable()" />
    <input type="button" value="Private Function" onclick="privateFunction()" />
    <input type="button" value="Public Function" onclick="publicFunction()" />
  </body>
</html> 
```

新的操作员第二次不工作有什么原因吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T11:00:56.920

您通过重用名称`classFunction`作为变量名来覆盖构造函数。规范是 JS 是大写构造函数，像这样： `ClassFunction`这可能会有所帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-26T11:01:31.960

原因是你的变量名和构造函数名是一样的。因此，当您第一次创建新实例并将其分配给变量时，类会被实例覆盖。

确保您以不同的方式命名以下内容。

```
var classFunction; 
function classFunction() 
```

# wcf - SOAP 信封中的 WCF 和输入参数顺序

> ID：11667771
> 
> 赞同：7
> 
> 时间：2012-07-26T10:56:27.953
> 
> 标签：wcf, soap, request, input-parameters

我在使用 webHttpBinding (soap 1.1) 的 WCF Web 服务中收到未设置为对象错误实例的对象引用我注意到，如果您以特定顺序输入参数，则不会引发错误。

IE

```
<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:not="http://schemas.globalfoundries.com/NotificationService">
   <soapenv:Header/>
   <soapenv:Body>
      <not:NotifyWorkflowItemUpdate>
         <not:userIDs>testUserID</not:userIDs>
         <not:taskID>testTaskID</not:taskID>
         <not:taskType>testTaskType</not:taskType>
         <not:status>testStatus</not:status>
         <not:appID>testAppID</not:appID>
         <not:message>testMessage</not:message>
      </not:NotifyWorkflowItemUpdate>
   </soapenv:Body>
</soapenv:Envelope> 
```

但是，如果我更改请求模板中输入参数的顺序，则会出现上述错误。ie（注意message和userIDs参数切换）

```
<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:not="http://schemas.globalfoundries.com/NotificationService">
   <soapenv:Header/>
   <soapenv:Body>
      <not:NotifyWorkflowItemUpdate>
     <not:message>testMessage</not:message>
         <not:taskID>testTaskID</not:taskID>
         <not:taskType>testTaskType</not:taskType>
         <not:status>testStatus</not:status>
         <not:appID>testAppID</not:appID>
         <not:userIDs>testUserID</not:userIDs>
      </not:NotifyWorkflowItemUpdate>
   </soapenv:Body>
</soapenv:Envelope> 
```

为什么会这样？请求参数是否通过顺序而不是名称映射到 .Net 方法参数？是否必须在服务合同上指定一个属性才能使命名参数映射成为可能？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2014-06-26T05:38:55.757

您需要在 WCF 服务接口中使用**XmlSerializerFormat**类。

```
[ServiceContract, XmlSerializerFormat]
public interface IGoodMessageService
{
    ...
} 
```

此链接中解释了问题和解决方案：http: [//neimke.blogspot.com.tr/2012/03/serialization-ordering-causes-problems.html](http://neimke.blogspot.com.tr/2012/03/serialization-ordering-causes-problems.html)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-26T11:40:29.990

SOAP 消息的 XML 模式指定顺序。在元素的 XML 顺序中，WCF 正在根据架构验证 XML。

# c# - 创建新实体时出错（FK 约束问题）

> ID：11667775
> 
> 赞同：1
> 
> 时间：2012-07-26T10:57:08.917
> 
> 标签：c#, asp.net-mvc-2, entity-framework-4

我有点……奇怪的问题。保存与另一个实体具有 * 到 1 关系的新创建实体时出现错误。有点难以解释，但这是设置：

（注意：我使用的是 MVC 2 - 实体框架 4）

我的实体设置如下（为了可读性而替换了名称，但结构如所述）： 我们公司有一些经理。(tblManagers) 每个经理拥有未定义数量的 Store (tblStores)。每个商店都有未定义数量的设备 (tblEquipment)。所以我的数据模型如下：

(tblManagers) 1<----->* (tblStores) 1<----->* (tblEquipment)

这个设置是有效的，因为我们已经有很多数据（来自导出旧的 Access 文件）。

在创建新设备时，您显然必须选择它所属的商店。将下拉列表中选择的值（Store 的 ID）传递给 HttpPost 方法，该方法执行以下代码：

*db 是我的数据库上下文变量*

```
myNewItem.tblStore = db.tblStores.Single(x => x.Id == store_id_from_dropdown);

db.tblEquipments.AddObject(myNewItem);

db.SaveChanges(); 
```

在我看来，这似乎是有效的代码。Resharper 没有发现任何问题，也没有编译错误（甚至警告）。但是，在运行代码时，我遇到了以下异常（在 db.SaveChanges() 上抛出）：

```
Entities in 'CMT_DevEntities.tbl_Stores' participate 
in the 'tblManagerstblStores' relationship. 
0 related 'tblManager' were found. 
1 'tblManager' is expected. 
```

我不知道为什么它甚至在看 tblManager 因为在我的代码中没有引用它。我知道这与经理和他们的商店之间的关系有关，但我不明白*为什么*。

这是让我感到困惑的部分：

*   查看 的调试值时`myNewItem`，我可以看到商店已添加到实体中。我什至可以检查 Store 的 tblManager 属性，它是正确的 tblManager。因此，这确认了数据库中的一切正常（如果没有经理，商店甚至都不存在）。
*   我实际上遗漏了一些代码。设备中有一个完全相似的导航属性（假设是供应商。供应商又具有国家/地区的导航属性。关系完全相同）。我没有得到这个错误。只有商店/经理之一。

我可能遗漏了一些东西，也许是一些非常简单的东西。无论哪种方式，我都不知道为什么会这样。

所以我的问题是：给定由 MVC 中的 ModelBinder 创建的实体和导航属性的 (int) ID，我如何将新实体添加到数据库中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T11:41:00.683

您可以为您的实体 ( )`Store`添加外键 ID，而不是加载所有实体。`Store``Equipment``equipment.StoreId`

这将确保 EF 在不加载整个图表的情况下看到新创建`Equipment`的实体与实体之间的关系。`Store`

[由于您使用的是模型优先方法，因此您可以在 MSDN](http://msdn.microsoft.com/en-us/library/bb738477.aspx)上找到有关如何执行此操作的文档。

重要的部分在注释部分：

> 通过清除导航属性和将外键属性添加到实体复选框，您可以选择不向关联末尾的实体添加导航属性或外键属性。如果您只添加一个导航属性，则关联将只能在一个方向上遍历。如果不添加导航属性，则必须选择添加外键属性才能访问关联末端的实体。对于多对多 ( *:* ) 和一对一 (1:1) 关联，您不能将外键添加到实体。有关更多信息，请参阅定义和管理关系（实体框架）。

您应该在“添加关联”对话框中检查“将外键属性添加到“设备”实体”。使用外键属性是 Entity Framework 4 中的一个新特性。它会让你的生活变得更轻松。

[在这里](http://blogs.msdn.com/b/efdesign/archive/2009/03/16/foreign-keys-in-the-entity-framework.aspx)你可以找到更详细的解释。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T06:32:05.320

您需要正确配置实体：如果您有两个通过外键链接的实体，则需要配置导航属性。例子：

```
public class Destination
{
    public int DestinationId { get; set; }
    public string Name { get; set; }
    public string Country { get; set; }
    public string Description { get; set; }
    public byte[] Photo { get; set; }
    public List<Lodging> Lodgings { get; set; }
}

public class Lodging
{
     public int LodgingId { get; set; }
     public string Name { get; set; }
     public string Owner { get; set; }
     public bool IsResort { get; set; }
     public decimal MilesFromNearestAirport { get; set; }
     public int DestinationId { get; set; }
     public Destination Destination { get; set; }
}

internal class LodgingConfiguration:EntityTypeConfiguration<Charge>
{
    HasRequired(d=>d.Destination).WithMany(l=>l.Logings).HasForeignKey(d=>d.DestinationId)
} 
```

创建日志记录类似于：

```
var loging = new Loging
                 {
                     ...initialize properties...
                     Destination = new Destination{..initialize destination..}
                 }
context.Add(loging);
context.SaveChanges(); 
```

# javascript - 如何将 Greasemonkey 脚本作为 Firefox 插件发布？

> ID：11667776
> 
> 赞同：7
> 
> 时间：2012-07-26T10:57:09.387
> 
> 标签：javascript, firefox-addon, greasemonkey

我最近在 Greasemonkey 中编写了一个脚本，并希望将其作为 Firefox 的附加组件发布。最简单的方法是什么？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-30T19:26:04.197

虽然您可以“编译”一个 GreaseMonkey 脚本（请参阅 Brock 的回答），但该解决方案并没有得到很好的支持。更可靠的选择是使用[Add-on SDK](https://developer.mozilla.org/en-US/Add-ons/SDK)和[JPM](https://developer.mozilla.org/en-US/Add-ons/SDK/Tutorials/Getting_Started_%28jpm%29)。您的`lib/main.js`文件可以非常简单（[`page-mod`模块文档](https://developer.mozilla.org/en-US/Add-ons/SDK/High-Level_APIs/page-mod)）：

```
var data = require("sdk/self").data;
var pageMod = require("sdk/page-mod");
pageMod.PageMod({
  include: "*.example.com",
  contentScriptWhen: 'end',
  contentScriptFile: data.url("contentScript.js")
}); 
```

这等效于以下 GreaseMonkey 脚本头：

```
// @include http://example.com/*
// @include http://*.example.com/* 
```

然后您将 GreaseMonkey 脚本添加为`data/contentScript.js`（附加 SDK 将忽略 GreaseMonkey 标头，该信息在其他地方指定）并构建扩展。在大多数情况下它会起作用——除非你的 GreaseMonkey 脚本当然使用任何特殊的 GreaseMonkey API，在这种情况下你需要找到一个替代品。[`unsafeWindow`顺便支持](https://developer.mozilla.org/en-US/Add-ons/SDK/Guides/Content_Scripts/Interacting_with_page_scripts#Access_objects_defined_by_page_scripts)一下（通常的警告适用）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-26T11:16:56.817

只需将您的脚本发布到~~[userscripts.org](http://userscripts.org/)~~ ¹ [OpenUserJS.org](https://openuserjs.org/)（或其他 userscripts.org 替代品之一）。
尝试将其重新打包为附加组件通常比其价值更麻烦。

* * *

如果你真的需要，你可以使用[Greasemonkey 脚本编译器](https://arantius.com/misc/greasemonkey/script-compiler.php)将你的脚本变成一个“插件”，然后[通过正常的插件流程将该插件提交给 Mozilla](https://addons.mozilla.org/en-us/developers/docs/policies/submission)。

**请注意，弗拉基米尔的答案比 Greasemonkey 脚本编译器要好。**

* * *

¹ [Userscripts.org 现在早已死去](http://www.ghacks.net/2014/05/09/userscripts-org-good-alternatives/)。

# directory - Flash 开发服务器 4.5 建议

> ID：11667778
> 
> 赞同：0
> 
> 时间：2012-07-26T10:57:21.723
> 
> 标签：directory, flash-media-server

我刚刚在 Windows 上下载了 Flash Media Development Server 4.5。例如，这不是从 3.5 或 4.0 升级的。我的问题是当我去开始>程序>Flash Media 4.5>启动Flash Media Server时由于某种原因我无法登录，但是当我进入我的网络浏览器时，我输入本地主机URL我可以登录。为什么是这样？此外，我无法在我的文档中看到我的应用程序文件夹或配置。

我在这里错过了什么吗？我做错了吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T21:46:15.077

开始菜单中的 Start Flash Media Server 没有界面，它只是告诉 FMS 启动。登录屏幕是管理控制台的一部分，只能通过 swf/web 浏览器访问。

您的应用程序和配置文件夹默认不在文档中，而是在 FMS 的安装目录中，对于大多数人来说可能是 C:\Program Files\Adobe\Flash Media Server 4.5\。

# c++ - 在单线程代码中是否有 std::shared_ptr 比 std::unique_ptr 更合适的用法

> ID：11667779
> 
> 赞同：1
> 
> 时间：2012-07-26T10:57:24.127
> 
> 标签：c++, c++11, std, smart-pointers

我对 C++11 中的新内存`<memory>`头的理解有点周，但据我所知，shared_ptr 是 refcounted ptr，这使得复制它真的非常昂贵（尤其是在例如 ARM arch 上）。并且 unique_ptr 几乎是围绕 new/delete 的非常轻量级的包装器。而且它是可移动的，因此它不受您创建它的范围的限制。
所以我的问题是：
在单线程代码使用中，shared_ptr 比 unique_ptr 更受欢迎吗？

我对以下答案不感兴趣：让您的单线程代码为未来的多线程做好准备。假定代码是并且会说是单线程的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-26T11:01:18.917

您在这里对线程的关注有点像红鲱鱼。两者之间有明显的对比，它与线程几乎没有关系。如果您在单线程环境中使用这些类，您可以关闭原子操作支持；例如，使用 Boost 定义宏`BOOST_SP_DISABLE_THREADS`.

当您不太确定对象的生命周期是多少时使用`shared_ptr<>`，并且希望“房间里最后一个人关灯”——即，您不希望在没有客户端之前删除对象不再使用它。当您`unique_ptr<>`确切地知道谁将删除该对象时使用 - 即，当指向对象的生命周期由范围精确界定时。

复制 a`shared_ptr<>`确实不是免费的，但它*远非*“非常非常昂贵”。您为引用计数开销付出了一点点，但这就是使用它的全部意义：您需要跟踪对象的客户端；涉及一点成本，但您可以获得不泄漏对象的好处。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-26T12:19:57.083

这个问题问得好。

在多线程构建中`shared_ptr<>`，即使对象永远不会在线程之间共享，基本上总是为原子引用计数器的递增/递减付费。

另一个缺点是 的大小`shared_ptr<>`是普通指针大小的两倍。

由于这两个原因`shared_ptr<>`，它从来都不是性能关键型应用程序的好选择。

多线程应用程序有几种类型的对象在线程之间共享，而大多数不是。只有线程共享对象才需要使用原子引用计数器递增/递减，而为大多数其他对象支付原子操作成本是愚蠢的。因此，为线程共享和线程非共享对象使用不同的（基本）类型并使用`boost::intrusive_ptr<>`. 线程共享对象有一个原子引用计数器，而线程非共享对象有一个纯整数计数器。例如：

```
#include <atomic>
#include <boost/intrusive_ptr.hpp>

template<class Derived, class Counter>
class RefCounter
{
    Counter ref_count_;

    friend void intrusive_ptr_add_ref(RefCounter* p) {
        ++p->ref_count_;
    }

    friend void intrusive_ptr_release(RefCounter* p) {
        if(!--p->ref_count_)
            delete static_cast<Derived*>(p);
    }

protected:
    RefCounter() : ref_count_() {}
};

class NonThreadShared
    : public RefCounter<NonThreadShared, unsigned>
{};

class ThreadShared
    : public RefCounter<ThreadShared, std::atomic<unsigned> >
{};

int main() {
    boost::intrusive_ptr<NonThreadShared> p(new NonThreadShared);
    boost::intrusive_ptr<ThreadShared> q(new ThreadShared);
} 
```

# ruby-on-rails - 如何正确创建实例（或类）方法（关联模型）

> ID：11667780
> 
> 赞同：1
> 
> 时间：2012-07-26T10:57:28.560
> 
> 标签：ruby-on-rails, model, controller

我想添加实例方法（或类），但不断得到未定义的方法错误。

网站已关联报告，具有价值。我需要得到这个值。

**在我的观点中，我想如何称呼它：**

```
 <%websites.each do |website|%>
   //and use website.amount here 
```

这是我来自 WebsiteController 的代码（**我知道此代码用于类方法**）：

```
 def self.amount
      self.performance_report.conversions
  end 
```

我不知道如何正确地制作它，它应该是类方法还是实例方法，它应该是怎样的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T12:18:35.370

您应该在模型中添加该方法，而不是在控制器中。这是一个实例方法，所以它应该是`def amount`：

```
class Website < ActiveRecord::Base
  def amount
    self.performance_report.conversions
  end
end 
```

有了这个，您可以在您的视图中执行以下操作：

```
<% websites.each do |website| %>
  <%= website.amount %>
<% end %> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T11:10:27.373

Website.find() 返回一个网站实例。

如果一个网站有一个performance_report，并且PerformanceRecord有一个字段conversions，

```
 Website.find(38).performance_report.conversions 
```

应该在不定义任何方法的情况下工作。如果这不能按预期工作，您应该检查您的关联定义。在 Controller 上定义类方法不会有任何效果。

# normalization - 四元数和归一化

> ID：11667783
> 
> 赞同：24
> 
> 时间：2012-07-26T10:57:41.800
> 
> 标签：normalization, quaternions

我知道如果要旋转矢量，则需要对四元数进行归一化。

但是有什么理由不自动规范化四元数吗？如果有，哪些四元数运算会导致非归一化四元数？

*   将两个四元数相乘？
*   点积？

对不起，如果这个问题有点模糊。我仍在尝试围绕四元数。

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2012-10-17T12:52:07.417

迟到的反应；这个答案适用于将来遇到这个问题的人，而不是提问者。

我不同意其他两个关于仅偶尔标准化四元数的答案。使用四元数来旋转/变换向量或生成旋转/变换矩阵的标准公式隐含地假设四元数是归一化的。使用非归一化四元数导致的误差与四元数幅度的平方成正比。最好避免二次误差增长。

如果您经常标准化，则不需要平方根。一阶近似效果很好。这是我将四元数用作 IEEE 双精度数的方法，有点程式化：

```
double qmagsq = quat.square_magnitude();
if (std::abs(1.0 - qmagsq) < 2.107342e-08) {
    quat.scale (2.0 / (1.0 + qmagsq));
}
else {
    quat.scale (1.0 / std::sqrt(qmagsq));
} 
```

请注意，我使用一阶 Padé 近似值`2.0/(1.0+qmagsq)`而不是一阶泰勒展开`0.5*(3.0-qmagsq)`来估计`1.0/std::sqrt(qmagsq)`. 如果有效，这个近似值会用一个简单的除法代替平方根调用。关键是要找到该近似值何时有效，这就是神奇数字 2.107342e-08 发挥作用的地方。

为什么要使用 Padé 近似值？两个原因。一种是对于`qmagsq`接近 1 的值，`1+qmagsq`损失的精度比`3-qmagsq`. 另一个是与泰勒展开式相比，Padé 近似值将误差减少了三倍。对于`qmagsq`0 到 2 之间的值，此近似值的误差小于`(1-qmagsq)^2 / 8`. 幻数 2.107342e-08 表示此错误超过 IEEE 双倍 ULP 的一半。如果您采取合理的小步骤，则四元数大小的平方将始终在该限制内。你永远不会打电话`sqrt`。

如果您使用李群积分技术来传播四元数，则这种“始终标准化”范式的一个例外可能是。如果您不知道这意味着什么，您可能正在使用等价物`q(t+Δt) = q(t) + dq(t)/dt*Δt`来传播四元数。即使您使用不是李群积分器的高阶积分技术，您仍在某处使用该欧拉步骤。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-07-26T11:09:27.390

任何产生四元数的操作都需要归一化，因为浮点进动错误会导致它不是单位长度。

出于性能原因，我建议不要使用标准例程自动执行规范化。任何称职的程序员都应该意识到精度问题，并能够在必要时对数量进行规范化——并不总是需要有一个单位长度的四元数。

向量运算也是如此。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-07-31T19:58:08.967

有趣的是，构建旋转矩阵是一种不需要归一化四元数的操作，为您节省了一个`sqrt`：

```
M = [w*w+x*x-y*y-z*z, 2*(-w*z+x*y),    2*(w*y+x*z);
     2*(w*z+x*y),     w*w-x*x+y*y-z*z, 2*(-w*x+y*z);
     2*(-w*y+x*z),    2*(w*x+y*z),     w*w-x*x-y*y+z*z] / (w*w+x*x+y*y+z*z) 
```

（在 MATLAB-ish 表示法中）用于 quaternion `w+x*i+y*j+z*k`。

此外，如果您使用齐次坐标和 4x4 变换矩阵，您还可以省去一些除法操作：只需将 3x3 旋转部分作为四元数归一化，然后将其平方长度放入 (4,4) 元素：

```
M = [w*w+x*x-y*y-z*z, 2*(-w*z+x*y),    2*(w*y+x*z),     0;
     2*(w*z+x*y),     w*w-x*x+y*y-z*z, 2*(-w*x+y*z),    0;
     2*(-w*y+x*z),    2*(w*x+y*z),     w*w-x*x-y*y+z*z, 0;
     0,               0,               0,               w*w+x*x+y*y+z*z]. 
```

像往常一样乘以平移矩阵等，以获得完整的变换。这样你可以做，例如，

```
[xh yh zh wh]' = ... * OtherM * M * [xold yold zold 1]';
[xnew ynew znew] = [xh yh zh] / wh. 
```

当然，仍然建议至少偶尔标准化四元数（其他操作也可能需要它）。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-10T16:59:41.430

如果一个单位四元数是通过对其一阶时间导数进行数值积分获得的，积分器可以使用简单的误差反馈自动对其进行归一化。

令*q*表示 4 x 1 列的四元数矩阵，*dq*表示其时间导数。然后将*dq+0.5(1-qq)q/tau*发送到积分器以代替*dq*并使用合适的时间常数*tau*将连续归一化*q*。*qq*表示内积。

我模拟了一个保守的、铰接式 Bricard 机构在无重力空间中漂浮 360 万秒，也就是将近 42 天。四元数代表浮动基体的方向。使用0.5 秒的时间常数*tau* ，总能量保持恒定在百万分之一以内。在数值积分器 DE 中使用了 10^-12 的绝对误差容限和零的相对误差容限。

[http://www.amazon.com/Computer-Solution-Ordinary-Differential-Equations/dp/0716704617/](https://rads.stackoverflow.com/amzn/click/com/0716704617)

四元数通常通过数值积分获得。如果它们没有在积分器内部归一化，那么幅度和相位误差将会累积。一个归一化的四元数沿着一个单位球体移动，它的一阶导数与该球体相切。如果四元数偏离单位球面，它将开始累积在积分器外部进行归一化无法校正的相位误差。因此，四元数必须在数值积分器内连续归一化，以最小化相位误差。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-07-09T02:26:55.900

你的问题是模棱两可的，但如果你需要标准化一个四元数很简单

q_normalized = q /square(norm(q))

其中，q = q1 +q2i +q3 j +q4 k 范数 (q) = (q1)^2 + (q2)^2 + (q3)^2) + (q4)^4

如果要向我解释你的问题

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2014-03-17T12:01:15.877

使用 NONunit 四元数可能是有效的。

只有少数操作需要单位长度，例如插值。

一些技巧：

1.  创建和转换为非单位四元数会更有效。
2.  从非单位四元数转换为矩阵仍然很快。只需补偿四元数平方的比例。
3.  将矩阵转换为非单位 quat 的速度更快。

所以不需要只使用单位四元数，这只是常见的做法。对于每个用例，您都可以决定是否使用规范化。我个人更喜欢使用非单位四元数。

警告：通常，在使用单位四元数时，我们会忘记数值错误。例如，从/到矩阵四元数转换并认为它仍然是单位会使数值不稳定，矩阵被缩放，提取的四元数是无效的。你可以很容易地做这样的实验。

# html - 拖放在android模拟器中不起作用。是否有任何要添加的内容以在模拟器中运行它

> ID：11667790
> 
> 赞同：2
> 
> 时间：2012-07-26T10:58:09.350
> 
> 标签：html, cordova, android-emulator

```
 <!DOCTYPE HTML> 
 <html> <head>` <style type="text/css">
 #div1, #div2, #div3, #div4
{float:left; width:100px; height:35px; margin:10px;padding:10px;border:1px solid #aaaaaa;}
</style>
<script type="text/javascript">
function allowDrop(ev) { ev.preventDefault(); }
] function drag(ev) { ev.dataTransfer.setData("Text",ev.target.id); }
function drop(ev) { ev.preventDefault(); var data=ev.dataTransfer.getData("Text"); ev.target.appendChild(document.getElementById(data)); }
</script> </head> <body>
<div id="div1" ondrop="drop(event)" ondragover="allowDrop(event)"> <img src="http://creativebits.org/files/trash-osx.png" draggable="true" ondragstart="drag(event)" id="drag1" width="88" height="31" /> </div>
<div id="div2" ondrop="drop(event)" ondragover="allowDrop(event)"></div>
<div id="div3" ondrop="drop(event)" ondragover="allowDrop(event)"></div>
<div id="div4" ondrop="drop(event)" ondragover="allowDrop(event)"></div>
</body> </html> 
```

我想在我的应用程序中拖放事件.....我已经编写了我从网上获得的上述 html5 文件，这在网络浏览器中运行良好，但是当我在 android 模拟器上运行它时，没有任何功能正在运行。没有点击选项也来了......我是否需要添加任何东西才能在 android 模拟器或任何其他设备上运行它......

# android - 片段混乱.. ViewPager 中的片段，试图获得类似联系人的导航

> ID：11667792
> 
> 赞同：2
> 
> 时间：2012-07-26T10:58:17.030
> 
> 标签：android, android-fragments, android-actionbar, android-viewpager

当我说类似联系人时，我的意思是这样的：

*   `ViewPager`多页
*   一个片段有一个包含可点击项目的列表
*   单击某个项目时，显示该项目的详细信息页面

目前，我的列表片段在 ViewPager 中运行良好，而我的详细信息片段本身也运行良好。

我想正确设置此流程，以便稍后让我针对平板电脑对其进行优化。现在，只需让它打开一个带有详细信息的新屏幕就可以了。

这是我的适配器：

```
public class SectionsPagerAdapter extends FragmentPagerAdapter {
    FragmentManager fm;

    public SectionsPagerAdapter(FragmentManager fm) {
        super(fm);

        this.fm = fm;
    }

    @Override
    public Fragment getItem(int position) {
        switch (position) {
        case 0:
            return Files.newInstance();
        case 1:
            return Files.newInstance();
        }
        return null;
    }

    @Override
    public int getCount() {
        return 2;
    }

    @Override
    public CharSequence getPageTitle(int position) {
        switch (position) {
        case 0:
            return getString(R.string.files).toUpperCase();
        case 1:
            return getString(R.string.transfers).toUpperCase();
        }
        return null;
    }
} 
```

还有我的列表片段的一部分，我想在其中提出详细信息：

```
listview.setOnItemClickListener(new OnItemClickListener() {

    @Override
    public void onItemClick(AdapterView<?> a,
            View view, int position, long id) {
        if (!file[position].isFolder) {
            I don't know what to do here!
        }
    }

}); 
```

我该怎么做？

# ios - 带有 UI 回调的块 for 循环

> ID：11667793
> 
> 赞同：2
> 
> 时间：2012-07-26T10:58:17.607
> 
> 标签：ios, optimization, for-loop, objective-c-blocks, grand-central-dispatch

我有一个耗时的过程，并且有一个进度指示器向用户显示事情进展了多远。因为我必须在主线程上做消耗的事情，所以我没有选择在更新之间简单地在主队列上分派更新。我必须暂时切换到后台线程，以便在切换回并继续之前让 UI 更新。

这就是我所拥有的，但感觉非常不正统。有没有更好的方法来执行我缺少的“带有回调到 UI 的循环块”？我也不完全确定这是否真的会最终释放块，但这是另一回事。

```
__block NSUInteger i = 0;
__block dispatch_block_t obtainBlock;

obtainBlock = [^{
    [self obtainAssetAtIndex:i];
    progressView.progress += progressPerFile;
    i++;
    if (i < assets.count) {
        dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_LOW, 0), ^{
            usleep(500);
            dispatch_async(dispatch_get_main_queue(), obtainBlock);
        });
    } else {
        [self didImportGroup];
        [obtainBlock release];
    }
} copy];

dispatch_async(dispatch_get_main_queue(), obtainBlock); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-26T17:29:18.293

思路太复杂了。当前设置：

1.  做一件工作
2.  将控制权交给后台线程
3.  在后台睡觉
4.  在主线程上安排下一个工作

你想做什么：

1.  做一件工作
2.  安排下一项工作

这是代码：

```
- (void)doWork
{
    if (_assetIndex < assets.count) {
        [self obtainAssetAtIndex:_assetIndex++];
        progressView.progress += progressPerFile;
        [self performSelector:@selector(doWork) withObject:nil afterDelay:0];
    } else {
        [self didImportGroup];
    }
} 
```

您根本不需要后台线程（尤其是当它所做的只是睡觉时）。

# android - 如何在 Android 默认设置中添加应用程序设置（首选项）？

> ID：11667794
> 
> 赞同：1
> 
> 时间：2012-07-26T10:58:24.627
> 
> 标签：android, settings, default

我正在开发一个应用程序，我正在使用 res/xml/settings.xml 来满足我的偏好。

它工作正常但现在我希望这些设置位于 Android 默认设置中。

我已经搜索了很多但找不到解决方案。

任何人都可以帮助我如何在 android 默认设置（无线和网络、呼叫设置、声音、应用程序等）中添加应用程序设置。

提前致谢....

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T11:05:07.933

您不能将自己的应用程序设置添加到默认 Android 设置应用程序。

它们应该存在于您的应用程序中。如果您想要与默认设置相同的外观和感觉，您应该使用[PreferenceActivity](http://developer.android.com/reference/android/preference/PreferenceActivity.html)或[PreferenceFragment](http://developer.android.com/reference/android/preference/PreferenceFragment.html) for Honeycomb+

# listview - 是否可以在 VB6 中将 ListView 上的数据变灰？

> ID：11667796
> 
> 赞同：1
> 
> 时间：2012-07-26T10:58:31.427
> 
> 标签：listview, vb6

我正在创建一个具有搜索功能的程序。它工作正常。如果我在搜索框中输入一个项目，它会显示该项目，如果我将其留空，它将显示所有项目等。我的问题是，如果我要搜索特定产品，ListView 是否可以在列表顶部和之后的所有其他项目并尽可能变灰？我需要所有数据，以便可以将其复制到外部文件。

这是我目前的代码。正如我所说，它工作正常，但有可能因为我需要列表视图中的所有项目，以便我的程序可以正常运行。谢谢

```
 Dim desc As String
 Dim barcode As String
 Dim quantity As String
 Dim dept As String

 Dim listitm As ListItem
 Dim itm As ListItem
 Dim SearchStr As String
 Dim SearchChar As String
 Dim colhead As ColumnHeader

 ListView1.ListItems.Clear

 Open "E:\Latest VB\Export.CSV" For Input As #1
 Do Until EOF(1)
 Input #1, desc, barcode, quantity, dept
 If InStr(1, LCase(desc), txtProduct.Text, vbTextCompare) Then
 With ListView1
    .View = lvwReport
    .FullRowSelect = True
 Set itm = .FindItem(txtProduct.Text, lvwText, , lvwPartial)
 Set listitm = .ListItems.Add(, , desc)
 listitm.SubItems(1) = (barcode)
 listitm.SubItems(2) = (quantity)
 listitm.SubItems(3) = (dept)
 End With
 End If
 Loop
 Close #1
 End Sub 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T11:03:06.060

您不能将项目变灰（禁用），但您可以将前景色更改为灰色，就像使用[自定义绘图回调](http://btmtz.mvps.org/listview/)( [zip](http://btmtz.mvps.org/listview/lvcustomdraw.zip) ) 将其禁用一样。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T13:16:10.420

如果您只想将文本变灰而不禁用它，那么以下操作将起作用：

```
' Purpose: If a match for <the_sText> is found, then the first item matching is moved to the top of the control, and all the other items are greyed out.
Private Sub HighlightTextInListView(ByRef the_sText As String)

    Dim sKeyOfPreviousItem  As String
    Dim oListItemAtTop      As ListItem
    Dim oFoundListItem      As ListItem
    Dim nIndex              As Long

    Set oListItemAtTop = lvData.ListItems(1)
    sKeyOfPreviousItem = oListItemAtTop.Tag         ' We are storing the original previous item's key in the top item's Tag property.

    ' If it is set to non-empty string, the we know that it has been previous sorted to the top.
    ' Undo this before anything else.
    If sKeyOfPreviousItem <> "" Then
        MoveItem oListItemAtTop, lvData.ListItems.Item(sKeyOfPreviousItem).Index + 1
    End If

    If the_sText = "" Then

        ' If the search box is empty, then ungrey all the text.
        SetTextForeColor vbWindowText

    Else

        ' Look for the text.
        Set oFoundListItem = lvData.FindItem(the_sText, lvwText, , lvwPartial)

        If oFoundListItem Is Nothing Then
            SetTextForeColor vbWindowText
        Else
            SetTextForeColor vbGrayText

            ' Find the text in the previous item to the selected item (if none, use "").
            nIndex = oFoundListItem.Index
            If nIndex = 1 Then
                sKeyOfPreviousItem = ""
            Else
                sKeyOfPreviousItem = lvData.ListItems.Item(nIndex - 1).Key
            End If

            ' Move this item to the top of the list, and set its Tag property to indicate the previous item.
            ' Note that this new item will not have grey text.
            MoveItem(oFoundListItem, 1).Tag = sKeyOfPreviousItem

        End If

    End If

End Sub

' Purpose: Adds a new item to the list view.
Private Sub AddListItem(ByRef the_sKey As String, ByRef the_sDescription As String, the_sBarCode As String, ByRef the_sQuantity As String, ByRef the_sDepartment)

    With lvData.ListItems
        With .Add(, the_sKey, the_sDescription)
            .SubItems(1) = the_sBarCode
            .SubItems(2) = the_sQuantity
            .SubItems(3) = the_sDepartment
        End With
    End With

End Sub

' Purpose: Adds a new item with the same properties as the previous, at a specific position.
Private Function MoveItem(ByRef the_oListItem As ListItem, ByVal the_nNewPos As Long) As ListItem

    Dim oListItem               As ListItem
    Dim sKey                    As String

    Set oListItem = lvData.ListItems.Add(the_nNewPos, , the_oListItem.Text)
    oListItem.SubItems(1) = the_oListItem.SubItems(1)
    oListItem.SubItems(2) = the_oListItem.SubItems(2)
    oListItem.SubItems(3) = the_oListItem.SubItems(3)

    sKey = the_oListItem.Key
    lvData.ListItems.Remove sKey
    oListItem.Key = sKey

    Set MoveItem = oListItem

End Function

' Purpose: Set the fore colour of each list item.
Private Sub SetTextForeColor(ByVal the_cForeColor As OLE_COLOR)

    Dim oListItem               As ListItem
    Dim oSubItem                As ListSubItem

    For Each oListItem In lvData.ListItems
        oListItem.ForeColor = the_cForeColor
        For Each oSubItem In oListItem.ListSubItems
            oSubItem.ForeColor = the_cForeColor
        Next oSubItem
    Next oListItem

End Sub 
```

当您想要运行搜索时，只需使用 HighlightTextInListView() 即可。本质上，我删除了该项目并在顶部重新添加它。为了记住它的旧位置，前一个项目的 Key 属性存储在移动项目的 Tag 属性中。要使此代码起作用，您必须为您的项目提供唯一键。

# asp.net-mvc - 使用 signalr 时，IIS 是否有任何连接限制

> ID：11667799
> 
> 赞同：56
> 
> 时间：2012-07-26T10:58:41.160
> 
> 标签：asp.net-mvc, iis, signalr

最近几天我一直在看 SignalR。使用它，我创建了一个管理仪表板来获取有关数据库表的实时信息。基本上，该表由来自各种应用程序的不同用户填充。结果很好。只有当客户端 Broswer 和 WebServer 之间存在持久连接时，这些更新才可能发生。在将这个应用程序部署到生产环境之前，我几乎没有任何疑问。

我知道 SignalR 首先检查 WebSockets，然后根据客户端和服务器之间的可用性查找长轮询。无论它使用什么，客户端和服务器之间都会打开一个连接。

我的问题是它在更多用户连接到同一台服务器的情况下如何执行，例如同时连接 100,000 名管理员。IIS 对它可以在某一时刻打开的持久连接的数量是否有任何限制？如果是这样，我们可以将其配置为最大值以及该值是多少。

抱歉，如果是菜鸟问题

ASP.NET MVC3 & IIS 7 用于开发。

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-07-26T14:42:54.903

您应该查看 GitHub 上 SignalR Wiki 的[性能部分](https://github.com/SignalR/SignalR/wiki/Performance)。这为以下内容提供了一些非常好的指导：

*   IIS 配置 - 每个应用程序的最大并发请求数
*   ASP.NET 配置 - 最大并发请求和请求队列限制

此外，它还说明了在执行应用程序负载测试时要监控的关键性能计数器。您应该做哪个 IMO 才能真正了解您的应用程序将如何执行并根据您的特定场景进行必要的调整。

最后，有一个指向[Crank](https://github.com/SignalR/SignalR/tree/dev/src/Microsoft.AspNet.SignalR.Crank)的链接，该链接是使用 SignalR 生成客户端负载的推荐工具。

**更新**：链接到曲柄现在是最新的。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-28T13:02:01.870

谢谢佩奇。这是我的发现。默认情况下，ASP.NET 4.0 每个 CPU 最多接受 5000 个并发请求。要改变这一点，我们需要在 ASP.NET 配置文件中设置这个数字，该文件可以在这个位置 %windir%\Microsoft.NET\Framework\v4.0.30319\aspnet.config

我还发现了 Scott HanselMan 的这个很棒的 PodCast [http://www.hanselminutes.com/325/aspnet-45-updates-core-webforms-and-signalr-with-damian-edwards](http://www.hanselminutes.com/325/aspnet-45-updates-core-webforms-and-signalr-with-damian-edwards)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-10-11T20:27:08.527

您可能更有可能在连接限制仅为 10* 的 Windows 8 / 10 上遇到此问题。当然，这只会在开发过程中影响您 - 但是如果您打开多个浏览器并打开活动连接并且很容易超过 10 个，这将是一个很大的痛苦。

*我目前无法确认 Windows 10 与 Windows 8 具有相同的连接限制，但很可能如此。

# jar - 如何在类路径中引用耳朵内的jar

> ID：11667802
> 
> 赞同：1
> 
> 时间：2012-07-26T10:58:46.827
> 
> 标签：jar, classpath

我怎样才能在我的类路径中引用一个 jar inside ear

我累了

```
javac Main.java -classpath myear.ear/common.jar 
```

和

```
javac Main.java -classpath myear.ear!/common.jar 
```

但没有用

谢谢

# jquery - Bugzilla - 通过 JSON-RPC 的网络服务

> ID：11667809
> 
> 赞同：5
> 
> 时间：2012-07-26T10:59:17.733
> 
> 标签：jquery, web-services, jsonp, bugzilla

这是我到目前为止尝试过的..

```
<html>
  <head>
    <title>bugstats.com</title>
  </head>
<script type="text/javascript"     src="http://ajax.googleapis.com/ajax/libs/jquery/1.3.2/jquery.min.js"></script>
<script type="text/javascript" src="http://jquery-json.googlecode.com/files/jquery.json-    1.3.min.js"></script>
<script type="text/javascript" >
function hello(){
var myObject = {"method":"User.login", /* is this the right method to call? */
"params":[  { "login" :"user", /*should i include the login credentials here? */
"password" : "pass123" , 
"remember" : "True"} ]  };
var enc = $.toJSON(myObject);

$.ajax({"contentType":"application/json",
    "data": enc, 
    "crossDomain":"true",
    "dataType": "json", 
    "url": "https://bugzilla.company.com/bugzilla/jsonrpc.cgi", /* is this correct or should it be https://bugzilla.company.com/bugzilla/jsonrpc.cgi?method=User.login? */ 
    "type": "POST",
    success: function(){
            alert("Hallelujah");
                console.log(arguments); 

             },
    error: function () {
    alert("Failed")
    }

   });
}
function parseResponse(obj){
 alert("Success")
 console.log(obj)
}
</script>
  <body>
    <h1>bugzilla.com</h1>
    <input type="button" onclick="hello()" value="Click">
</body> 
```

阅读此[**JSONPRC**](http://www.bugzilla.org/docs/4.2/en/html/api/Bugzilla/WebService/Server/JSONRPC.html)，并没有走多远。

当我单击按钮 - 拨打电话，登录/为此做任何事情时 - 我收到以下错误 -

```
OPTIONS https://bugzilla.company.com/bugzilla/jsonrpc.cgi 403 (Forbidden) jquery.min.js:19
XMLHttpRequest cannot load https://bugzilla.company.com/bugzilla/jsonrpc.cgi. Origin http://172.16.229.137 is not allowed by Access-Control-Allow-Origin. 
```

据我了解，“Access-Control-Allow-Origin”是由于“同源策略”问题引起的，因此我应该使用“jsonp”。但是，Jsonp - 即脚本注入只能通过 GET 请求完成。但是，如果我使用 GET 请求尝试相同的 JS 脚本 - 我会得到以下信息：

```
code: 32610
message: "For security reasons, you must use HTTP POST to call the 'User.login' method." 
```

对如何通过 Web 服务连接/登录感到困惑，我显然在做一些愚蠢的事情，这里主要是错误的。如果有人可以帮助我连接并获取错误详细信息，那将是一个很大的帮助。我从那时起就一直在做现在8-10天.. :(

供参考：

*   我无权访问服务器

*   我正在设置客户端并访问 Bugzilla 服务器

其他链接，

[**阿贾克斯调用**](http://guy-pyrzak.blogspot.in/2009/07/bugzilla-json-rpc-webservice-with.html)

[**登录**](http://www.bugzilla.org/docs/4.2/en/html/api/Bugzilla/WebService.html#LOGGING_IN)

[**BugzillaApc**](https://wiki.mozilla.org/User%3aHarthur/BugzillaRPC)

[**Google 网上论坛 - 实时对话**](https://groups.google.com/forum/?fromgroups#!topic/mozilla.support.bugzilla/-kNtcaggyJY)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-31T22:38:06.623

您需要使用`Bugzilla_login`and`Bugzilla_password`参数来验证每个调用，这将是使用 jsonp 的 GET。您的调用将如下所示，`User.get`以示例为例：

```
// Method parameters
var params = [{
  /* The authentication parameters */
  "Bugzilla_login": "YourUserName",
  "Bugzilla_password": "YourPassword",
  /* The actual method parameters */
  "ids": [1, 2]
}];
var myObject = {
  "method": "User.get",
  "params": JSON.stringify(params)
};

$.ajax({"contentType": "application/json",
    "data": myObject, /* jQuery will handle URI encoding */
    "crossDomain": "true",
    "dataType": "jsonp", /* jQuery will handle adding the 'callback' parameter */
    "url": "https://bugzilla.company.com/bugzilla/jsonrpc.cgi", 
    "type": "GET",
    ... 
```

你必须这样做，因为：

*   您将进行跨域调用
*   因为你不能设置`Access-Control-Allow-Origin`你必须通过 jsonp （或代理，但 jsonp 更简单）来做的事情
*   jsonp 一定是`GET`请求，不是`POST`

相关文档：

*   [通过 GET 连接](http://www.bugzilla.org/docs/4.2/en/html/api/Bugzilla/WebService/Server/JSONRPC.html#Connecting_via_GET)- 您将仅限于检索信息，更改需要`POST`调用。
*   [`Bugzilla_login`通过和登录`Bugzilla_password`](http://www.bugzilla.org/docs/4.2/en/html/api/Bugzilla/WebService.html#LOGGING_IN)

# php - 是否可以使用不同的检查值重复相同的单选按钮？

> ID：11667813
> 
> 赞同：0
> 
> 时间：2012-07-26T10:59:45.933
> 
> 标签：php, html, dynamic, radio

我的问题是关于单选按钮。我有 10 个具有相同名称和顺序值的单选按钮。选中其中一个单选按钮。下面提到的示例代码：

```
<li><input type="radio" value="1000" checked="checked" name="status" />Yet to contact</li>
<li><input type="radio" value="1001" name="status"/>To call back, follow up</li>
<li><input type="radio" value="1002" name="status"/>Interested, to meet</li>
<li><input type="radio" value="1003" name="status"/>Meeting over, to follow up</li>
<li><input type="radio" value="1004" name="status"/>Meeting over, not interested</li>
<li><input type="radio" value="1005" name="status"/>Not interested now</li>
<li><input type="radio" value="1006" name="status"/>Wrong contact details</li>
<li><input type="radio" value="1007" name="status"/>Services taken</li> 
```

上面的代码将是通过 PHP 生成的动态代码，并且会在单个页面上重复多次。但是，我尝试过使用纯 html 代码，发现它会产生问题并且没有显示任何选中的单选按钮。如果我按不同的名称对它进行分组，例如 name="status[1]" 和 name="status[2]" 那么只有每组单选按钮显示一个选中的单选按钮。

有没有人有一个解决方案，我可以为所有单选按钮保留相同的名称，并且每组（具有相同名称）单选按钮将显示一个默认单选按钮？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T11:19:09.983

每组单选按钮的名称必须是唯一的。

尝试这样的事情：

```
for ($i=1; $i<=5; $i++) {
   echo '<li><input type="radio" value="1000" checked="checked" name="status'.$i.'" />Yet to contact</li>
         <li><input type="radio" value="1001" name="status'.$i.'"/>To call back, follow up</li>

         <li><input type="radio" value="1002" name="status'.$i.'"/>Interested, to meet</li>

         <li><input type="radio" value="1003" name="status'.$i.'"/>Meeting over, to follow up</li>

         <li><input type="radio" value="1004" name="status'.$i.'"/>Meeting over, not interested</li>

         <li><input type="radio" value="1005" name="status'.$i.'"/>Not interested now</li>

         <li><input type="radio" value="1006" name="status'.$i.'"/>Wrong contact details</li>

         <li><input type="radio" value="1007" name="status'.$i.'"/>Services taken</li>';
} 
```

要读取所选值，请使用：

```
for ($i=1; $i<=5; $i++) {
   echo $_POST["status$i"] . '<br>;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T11:03:52.067

如果我正确理解了您的问题：

`name`在单选按钮的属性中指定一个数组。

```
<input  type="radio" name="check[]" value="1" />
<input  type="radio" name="check[]" value="2" />
<input  type="radio" name="check[]" value="3" /> 
```

当你使用时，`$_POST['check']`你会得到一个数组，其中包含选中的单选按钮的索引和值。

假设如果您检查了第一个和第三个单选按钮，则数组将如下所示：

`array('0'=>'1', '2'=>'3')`

# jquery - 悬停时放大的水平 div 滚动条

> ID：11667814
> 
> 赞同：0
> 
> 时间：2012-07-26T10:59:48.900
> 
> 标签：jquery, hover, scroller

我想知道是否有人可以提供帮助。我正在尝试创建一个由鼠标激活的水平滚动条，它会在悬停时放大 div。但不能让它工作。

我在这里创建了一个示例：http: [//vonholmes.co.uk/scroller/scroll-test.html](http://vonholmes.co.uk/scroller/scroll-test.html)

但是，列表中的第 6 个元素根本不显示，第 5 个元素在悬停时变得不稳定！

有谁知道这样做的更好方法或修复我的代码的某种方法？

也尝试过使用：[http](http://www.smoothdivscroll.com/index.html#quickdemo) ://www.smoothdivscroll.com/index.html#quickdemo - 但在悬停时放大也会导致此中断。

任何帮助是极大的赞赏！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T12:45:37.247

我对你的 jquery animate 函数做了一个小改动，现在它对我来说工作正常。问题在于分配给 li 标签的宽度。

```
$("ul li").hover(
function(){ 
$("ul li").animate({'width':'100px'},'fast');   
    $(this).animate({'width' : '250px'},'fast');
},
function()
{
    $(this).animate({'width':'130px'},'fast');
});
}); 
```

# cakephp - CakePHP Containable 错误：两级关联不起作用

> ID：11667817
> 
> 赞同：0
> 
> 时间：2012-07-26T10:59:55.810
> 
> 标签：cakephp, containable

我做下一个查询：

```
 $this->find('all',array(
            'contain' => array(
                'User' => array('id','facebook_id','name','username','Author' => array('first_name','last_name','code','photo')),
                'Tab.code'
            ),
            'fields' => array('Comment.date','Comment.time','Comment.content'),
            'conditions' => array(
                'Tab.code' => $code
            ),
            'limit' => $limit,
            'offset' => $offset
        )); 
```

评论...

```
 public $belongsTo = array(
        'User' => array('foreignKey' => 'user_id'),
        'Tab' => array('foreignKey' => 'tab_id')
    ); 
```

用户...

```
 public $hasOne = array('Author' => array('foreignKey' => 'id')); 
```

和作者...

```
 public $belongsTo = array(
        'User' => array(
            'className' => 'User',
            'foreignKey' => 'id'
        )
    ); 
```

这会返回类似这样的内容（在 json 中）...

```
[
    {
        "Comment": {
            "date": "2001-12-15",
            "time": "17:32:12",
            "content": "..."
        },
        "User": {
            "id": "29",
            "facebook_id": "1234",
            "name": "User 29",
            "username": "user29"
        },
        "Tab": {
            "code": "llibre-de-prova-29",
            "id": "229"
        }
    }
    ...
] 
```

...虽然我希望附加到用户出现一个带有我指定的字段的作者。你知道为什么作者没有出现吗？我在代码上做了其他包含两个级别的递归，并且所有工作都按预期工作。

感谢您的帮助和关注！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T14:39:37.037

您需要在“字段”键中指定字段。把它当作一个额外的`find()`电话。

```
$this->find('all', array(
            'contain' => array(
                'User' => array(
                    'fields' => array('id','facebook_id','name','username'),
                    'Author' => array(
                        'fields' => array('first_name','last_name','code','photo')
                    ),
                    'Tab.code'
                ),
            ),
            'fields' => array('Comment.date','Comment.time','Comment.content'),
            'conditions' => array(
                'Tab.code' => $code
            ),
            'limit' => $limit,
            'offset' => $offset
        )); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-16T15:15:59.640

所有外键都必须在您的字段数组中

```
'fields' => array('Comment.date','Comment.time','Comment.content', 'Comment.user_id', ....) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-17T17:00:21.927

确保您的模型附加了 Containable 行为。它应该包括以下行：

```
$actsAs = array('Containable'); 
```

请注意确保您没有在“acts”中省略“s”，这是一种很难发现的常见错字。您还可以像这样动态附加 Containable 行为：

```
$this->YourModel->Behaviors->attach('Containable');
$this->YourModel->find('all', array('contain' => array(...))); 
```

还要确保键入“contain”作为数组键，而不是“contains”。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-06-10T01:55:09.727

```
 $this->find('all',array(
        'contain' => array(
            'User' => array('id','facebook_id','name','username','Author' =>array( 'AuthorModelName'=>array('first_name','last_name','code','photo'))),
            'Tab.code'
        ), 
```

# c - 在辅助过程完成时终止 Main

> ID：11667821
> 
> 赞同：0
> 
> 时间：2012-07-26T11:00:04.983
> 
> 标签：c, multithreading, process, pthreads, terminate

我有一个 Main C 程序，它创建两个线程，每个线程都使用 system() 调用启动一个进程。一旦线程创建的任何一个进程完成操作，是否可以终止主程序？

```
#include <stdlib.h>
#include <stdio.h>
#include <pthread.h>
#include <sys/shm.h>
#include <unistd.h>
#include <errno.h>
#include <string.h>

extern errno;
key_t key = 1;
int *shm;

void* Start_Ether(){
    printf("Creating Ethernet Process\n");
    int ret = system("sudo ./Ether");
    if (ret < 0){
        printf("Error Starting Ethernet Process\n");
    }
}

void* Start_Display(){
    printf("Creating Display Process\n");
    int ret = system("./Display");
    if (ret < 0){
        printf("Error Starting Display Process\n");
    }
}

int main (int argc, char **argv)
{                       
    pthread_t Ether, opengl;
    int ret1, ret2;
    printf("**********************************************\nMain Started\n**********************************************\n");   
    ret2 = pthread_create(&opengl, NULL, &Start_Display, NULL);
    if (ret2 != 0){
       printf("Error in Creating Display Thread\n");
    }
    ret1 = pthread_create(&Ether, NULL, &Start_Ether, NULL);
    if (ret1 != 0){
        printf("Error in Creating Ether Thread\n");
    }
    while(1){
        continue;   
    }
    return 1;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T11:03:56.443

该`system`函数在其调用的命令完成后立即返回。因此，终止进程的最简单方法是调用任一线程`exit`。

```
void* Start_Display()
{
    /* ... */
    exit(0);
    return NULL;
} 
```

或者，您可以调用`pthread_join`主线程，但这样您必须等待一个特定线程完成。

# javascript - 如何在 Jquery 中捕获变量的输入

> ID：11667826
> 
> 赞同：1
> 
> 时间：2012-07-26T11:00:28.853
> 
> 标签：javascript, jquery, ajax

基本上我正在尝试在 Jquery 中创建一个 AJAX 脚本。但主要问题是我想像这样定义变量

```
$(document).ready(function () {
    var u = $('#username');
    var s = $('#server');
    var p = $('#password');

    $('#server').keyup(function () {
         $.post("connect.php", { s: s.value, u: u.value , p: p.value },
             function(data) {
             $('#hol').html('checking connection...' + u.value + " " + p.value + " " + s.value + " " + data);
                             }
                 ); 
   });

}); 
```

但这不知何故不起作用....我必须用“this”定义变量而不是能够事先分配它们，这似乎很奇怪。

有效的代码是

```
$(document).ready(function () {

    $('#username').keyup(function () {
        var u = this;
            $('#password').keyup(function () {
            var p = this;
                   $('#server').keyup(function () {
                    var s = this;

                     $.post("connect.php", { s: s.value, u: u.value , p: p.value },
                     function(data) {
                        $('#hol').html('checking connection...' + u.value + " " + p.value + " " + s.value + " " + data);
                                         }); });
                 }); 
                  }); 
   }); 
```

所以我的问题基本上是“如何让 jquery 捕获文本字段中的输入并将其分配给变量？就像在第一个示例中一样？？” 或者它不必做很长的路要走？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-26T11:02:41.687

您需要使用`.val()`而不是`.value`：

```
{ s: s.val(), u: u.val() , p: p.val() } 
```

as `s`, `u`, and`p`是 jQuery 对象，而不是 DOM 元素。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-26T11:03:04.203

采用`.val();`

```
var u = $('#username').val();
var s = $('#server').val();
var p = $('#password').val(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-26T11:03:04.533

作为*替代方案*，您可以使用[**`serialize()`**](http://api.jquery.com/serialize/)以下方法：

> 将一组表单元素编码为字符串以进行提交

```
$('#server').keyup(function () {
         $.post("connect.php", $('input[type=text]').serialize(),
             function(data) {
             $('#hol').html('checking connection ' + data);
         }); 
   }); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-26T11:04:01.723

你可以用这种方式

```
$(document).ready(function () {
    var u = $('#username');
    var s = $('#server');
    var p = $('#password');

    s.keyup(function () {
         $.post("connect.php", { s: s.val(), u: u.val() , p: p.val() },
             function(data) {
             $('#hol').html('checking connection...' + u.val() + " " + p.val() + " " + s.val() + " " + data);
                             }
                 ); 
   });

}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-26T11:05:07.467

您正在使用 jQuery 选择器..

```
var u = $('#username');
var s = $('#server');
var p = $('#password'); 
```

并以时尚的方式获取价值`javascript`......

```
u.value; //WRONG 
```

如果您正在使用，`jQuery`那么正确的方法是

```
u.val(); 
```

或者

```
u.attr('value'); 
```

v 和 w 也是如此 :)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-26T11:09:23.060

这应该涵盖所有内容：

```
$(document).ready(function() {

  var u = $('#username'),
      s = $('#server'),
      p = $('#password');

  function doYourAjaxCall() {
    $.post("connect.php", { 
      s: s.val(), 
      u: u.val(), 
      p: p.val() 
    },
    function(data) {
      $('#hol').html('checking connection...' + u.val() + " " + p.val() + " " + s.val() + " " + data);
    });
  }

  u.keyup(doYourAjaxCall);
  s.keyup(doYourAjaxCall);
  p.keyup(doYourAjaxCall);

}); 
```

与往常一样，我建议阅读[良好的 C# 习惯如何鼓励不良的 JavaScript 习惯](http://enterprisejquery.com/2010/10/how-good-c-habits-can-encourage-bad-javascript-habits-part-1/)

# c - 释放分配给指针的内存与释放分配给指针指向的内存

> ID：11667834
> 
> 赞同：0
> 
> 时间：2012-07-26T11:00:56.873
> 
> 标签：c, pointers

以下是 C 中堆栈结构的实现。我需要编写一个函数（而不是方法）来处理现有堆栈，并释放在堆上为其分配的任何内存。dispose (stack *s) 函数接收一个指向要被释放的堆栈的指针。

```
typedef struct {
    int allocatedLength;
    int logicalLength;
    int elementSize;
    void *elems;
} stack; 
```

如果我按如下方式实现 dispose() 函数，是否会导致某些内存永远不会被释放？

```
void dispose (stack *s) {
    free (s->elems);
} 
```

在上面的实现中，我只是释放分配给 elems 的内存，甚至不在堆上。我们需要记住，elems 是指向某物的指针。我们不应该释放那个东西，而不是释放分配给指针的内存吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T11:04:21.430

你误会了：`free(p)`不是释放内存为，*而是*`p`内存为`*p`——即*指向`p`*的内存。因此，您*正确*地释放了存储指针的分配内存`s->elems`，一切都很好。

随意责怪每个谈论“释放指针”的人这个用词不当，而实际上他们应该说“释放我有指针的内存”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T11:39:16.570

如果您为结构堆栈分配内存，则 free() 应该仅用于结构。不是为了它的成员。这是一个为整个结构分配内存的示例程序。free() 应该用于结构指针 s。

如果`free (s->elems);`未注释且`free (s);`已注释，则 printf 打印分配的数据。struct 的内存不会被释放并导致内存泄漏。

```
#include <stdio.h>
#include <stdlib.h>

typedef struct {
    int allocatedLength;
    int logicalLength;
    int elementSize;
    void *elems;
} stack;

void dispose (stack *s) {
    //free (s->elems); 
    free (s);
}

int main()
{

 stack *p = malloc(sizeof(stack));

 if(p == NULL)
    {
            printf("\n Memory Allocation Error\n");
            return 0;
    }

  p->allocatedLength = 10;
  p->logicalLength = 20;
  p->elementSize = 30;

  dispose(p);

  /* This printf is undefined behaviour if stack's ptr is freed. If the elem only freed, then it prints data */
  printf("\n allocatedLength: %d\nlogicalLength:%d\nelementSize:%d", p->allocatedLength, p->logicalLength, p->elementSize);

return 0;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-26T11:05:35.890

您将释放什么取决于您是否会`stack`动态分配结构。如果不动态分配，只需要释放`elems`所指向的（动态分配的内存）即可。这正是你正在做的`free (s->elems);`

# php - PDO 连接不起作用

> ID：11667835
> 
> 赞同：3
> 
> 时间：2012-07-26T11:00:57.090
> 
> 标签：php, pdo

我尝试使用 PDO 连接到 mysql DB，但不起作用。我写的：

```
 $db = new PDO('mysql:dbname=test;host=localhost','user','pass'); 
```

返回错误：

```
 Warning: PDO::__construct() [pdo.--construct]: [2002] No connection could be made because
 the target machine actively refused it. 
```

请告诉我，PDO 想要吗？

php版本：5.3.9

主机：本地计算机，（服务器 - “usbwebserver”）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-03T09:47:17.187

是端口问题。`USBwebsever`使用 mysql 端口**3307**而不是**3306**，所以使用`$db = new PDO('mysql:dbname=test;host=localhost:3307','user','pass');`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T11:07:28.710

## 描述：

如果当前不存在连接并且在没有指定连接信息的情况下运行 mysql_query，则 mysql_error 返回：“无法建立连接，因为目标机器主动拒绝了它。”

这不是真的。

这是非常具有欺骗性的： • “目标机器”表示数据库服务器。• “主动拒绝”是指服务器收到请求并拒绝它。

这导致人们相信已提供无效凭据或未按预期配置指定的帐户 (Host=)。

应更改错误消息以反映不存在数据库连接（或连接信息）的事实。

（这在使用 PDO 和函数时尤其麻烦，因为函数只知道传递给它们的变量）

数据来源： [https ://bugs.php.net/bug.php?id=60315](https://bugs.php.net/bug.php?id=60315)

网站和数据库都是本地的，都是吗？

# javascript - 如何使用 HTML5 地理位置或 Google API 获取地址经纬度？

> ID：11667838
> 
> 赞同：8
> 
> 时间：2012-07-26T11:01:17.620
> 
> 标签：javascript, html, geolocation, latitude-longitude

我对一个问题感到困惑，即我可以从 Facebook 获取用户的位置，而我只需要获取该位置的纬度和经度，但我仍然找不到解决方案。

如果我可以使用 HTML5 地理位置或任何 Google API 获得该纬度和经度，这将有所帮助。解决办法是什么？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-07-26T13:25:05.667

```
if (navigator.geolocation) {
    navigator.geolocation.getCurrentPosition(successFunction, errorFunction);
} 别的 {
    alert('您的浏览器似乎没有启用此页面所需的地理定位功能。请使用支持它的浏览器。');
}

```

如果浏览器支持地理定位并且`getCurrentPosition`成功运行，则调用成功函数。然后在函数中`successFunction`

有

```
 function successFunction(position) {
    var lat = position.coords.latitude;
    var long = position.coords.longitude;
    console.log('Your latitude is :'+lat+' and longitude is '+long);
} 
```

在此处阅读有关地理位置 API 的更多信息

*   [http://dev.opera.com/articles/view/how-to-use-the-w3c-geolocation-api/](http://dev.opera.com/articles/view/how-to-use-the-w3c-geolocation-api/)（免责声明：我的文章）
*   [http://dev.w3.org/geo/api/spec-source.html](http://dev.w3.org/geo/api/spec-source.html)（规范）

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-26T13:36:18.003

Flyleaf，我在[SmartyStreets](http://smartystreets.com)工作，我们还提供 API 来获取地址坐标；它被称为[LiveAddress API](http://smartystreets.com/products/liveaddress-api)。

正如 Bart 提到的，Google 的 TOS 不允许您在不显示 Google Map 的情况下进行地理编码，而且您无法存储结果。如果您希望按照您的建议查找*地址*，我建议使用 LiveAddress 之类的方法，它实际上也可以验证地址的有效性——这些其他 API 和 HTML5 不会这样做。

希望你能找到适合你的东西。现在的问题有点模糊，但也许这会有所帮助。它可能会像这样（[使用 Javascript](http://smartystreets.com/kb/liveaddress-api/javascript)）：

```
LiveAddress.geocode(address, function(geo) {
    alert("The address is at: " + geo.coords);
}); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-06-08T17:05:12.380

我发现最好的选择是通过他们拥有的子项目 ( [Nominatim](http://nominatim.openstreetmap.org/) ) API直接使用[OpenStreetMap 。](http://openstreetmap.org)

[API 文档](http://wiki.openstreetmap.org/wiki/Nominatim)

[REST](http://en.wikipedia.org/wiki/Representational_State_Transfer)调用示例： [http ://nominatim.openstreetmap.org/reverse?format=xml&lat=35.958&lon=-83.952&zoom=18](http://nominatim.openstreetmap.org/reverse?format=xml&lat=35.958&lon=-83.952&zoom=18)

请注意，虽然他们的服务条款确实允许从浏览器 JavaScript 直接客户端使用，但他们不希望大量使用并建议使用您的服务器作为代理来添加缓存，因此可以轻松切换。数据可供下载，并提供了设置本地可查询数据数据库的说明。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-26T11:05:00.597

查看[Gisgraphy](http://www.gisgraphy.com/)一个免费的开源地理服务。

每个人都会告诉您使用 Google Maps API，但请阅读使用[条款](https://developers.google.com/maps/terms)。

> (g) 不得使用没有 Google 地图的内容。您不得在没有相应 Google 地图的情况下使用或显示内容，除非 Maps API 文档明确允许您这样做，或获得 Google 的书面许可。在任何情况下，您都不得在非谷歌地图上或与非谷歌地图一起使用或显示内容。例如，您不得将通过服务获得的地理编码与非 Google 地图结合使用。再举一个例子，您不得在非 Google 地图旁边显示街景图像，但您可以在没有相应 Google 地图的情况下显示街景图像，因为 Maps API 文档明确允许您这样做。

因此，对于 Google API，您**必须使用 Google Map**。所以如果你需要一张地图，你就可以了。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-26T12:03:10.023

> 如果我可以使用 HTML5 地理位置获得该纬度和经度，这将有所帮助

好吧，那就这样做吧——你的问题到底在哪里？

这就是该[`getCurrentPosition`方法](http://dev.w3.org/geo/api/spec-source.html#get-current-position) [的用途](https://developer.mozilla.org/en/Using_geolocation#Getting_the_current_position)。

# android - 返回按钮在phonegap android中不起作用

> ID：11667841
> 
> 赞同：2
> 
> 时间：2012-07-26T11:01:32.053
> 
> 标签：android, jquery-mobile, cordova

我有一个 phonegap 应用程序，我在其中使用 JQM 来设计我的页面。

我面临的问题是 JQM 生成的后退按钮在*某些情况下*无法在 android 平台上运行。虽然它在 IOS 上运行良好

**编辑：** 它也适用于浏览器。所以我怀疑在使用cordova时可能会出现一些问题。

我尝试关注[这篇文章](https://stackoverflow.com/questions/10774608/cordova-phonegap-1-7-android-back-button-not-firing)并从 1.7 升级到 cordova 1.8，但这可以解决我的问题。

*后退按钮不起作用的*情况**

 *我有几个从索引页面调用的 JQM 文件。后退按钮在这些文件上不起作用。但是在这些文件中有[JQM 页面](http://jquerymobile.com/demos/1.0a3/docs/pages/docs-pages.html)，其中后退按钮确实有效

后退按钮是标准的 JQM 后退按钮

```
<a data-role="button" data-rel="back">Back</Back> 
```

很长一段时间以来，我一直坚持这一点。

任何人都可以提供一些方向吗？

**编辑：**

只是为了消除任何混乱。BackButton 事件侦听器（[参考](http://docs.phonegap.com/en/1.0.0/phonegap_events_events.md.html#backbutton)并在评论中建议）确实被调用。但这是设备的后退按钮（物理按钮）。我的问题是 JQM 的后退按钮，即带有 data-rel="back" 的后退按钮

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T05:45:40.740

在没有看到您的代码的情况下，我无法帮助您解决 JQM 后退按钮问题。虽然我可以提出一个新的解决方案。

您可以像这样注册一个后退按钮侦听器

```
document.addEventListener("backbutton",onBackClickEvent,false); 
```

然后在 onBackClickEvent 你可以像这样使用它

```
function onBackClickEvent {

var currentPageId = $.mobile.activePage.attr('id');

  if(currentpageId == 'home') {
    $.mobile.changePage("#page2",{ transition : "slide"});
  } else {...}
} 
```

像这样，您可以控制应用程序的流程。希望这会有所帮助...*

# django - 对象没有属性“get”

> ID：11667845
> 
> 赞同：45
> 
> 时间：2012-07-26T11:01:49.537
> 
> 标签：django, django-templates

对于类似错误的问题，我找不到任何解决方案。

错误是当我尝试编辑对象时：

> 'Intention' 对象没有属性 'get'

我有它符合form.as_p：

```
{% extends "layout.html" %}
{% block content %}
    <form action="{{ form_url }}" method="post">{% csrf_token %}
    {{ form.as_p }}
    <input type="submit" value="Submit" />
    </form>
{% endblock %} 
```

控制器代码：

```
def edit(request, id):
    if request.method == 'POST': # If the form has been submitted...
        form = IntentionForm(request.POST) # A form bound to the POST data
        if form.is_valid(): # All validation rules pass
            # Process the data in form.cleaned_data
            # ...
            intention = form.save()
            return HttpResponseRedirect(reverse_lazy('intention-show', args=[intention.id])) # Redirect after POST
    else:
        intention = Intention.objects.get(pk=id)
        form = IntentionForm(intention) # An unbound form

    return render_to_response('intentions/templates/form.html', 
                                {'form': form, 'form_url': reverse_lazy('intention-edit', args=[intention.id])},
                                 context_instance=RequestContext(request)  
                             ) 
```

有人可以给我任何建议吗？

追溯：

```
Environment:

Request Method: GET
Request URL: http://127.0.0.1:8000/intentions/3/edit

Django Version: 1.4
Python Version: 2.7.3
Installed Applications:
('django.contrib.auth',
 'django.contrib.contenttypes',
 'django.contrib.sessions',
 'django.contrib.sites',
 'django.contrib.messages',
 'django.contrib.staticfiles',
 'intentions',
 'django.contrib.admin')
Installed Middleware:
('django.middleware.common.CommonMiddleware',
 'django.contrib.sessions.middleware.SessionMiddleware',
 'django.middleware.csrf.CsrfViewMiddleware',
 'django.contrib.auth.middleware.AuthenticationMiddleware',
 'django.contrib.messages.middleware.MessageMiddleware')

Template error:
In template /home/marek/devel/django/prayer/intentions/templates/form.html, error at line 4
   'Intention' object has no attribute 'get'
   1 : {% extends "layout.html" %}

   2 : {% block content %}

   3 :  <form action="{{ form_url }}" method="post">{% csrf_token %}

   4 :   {{ form.as_p }} 

   5 :  <input type="submit" value="Submit" />

   6 :  </form>

   7 : {% endblock %}

   8 : 

Traceback:
File "/usr/local/lib/python2.7/dist-packages/django/core/handlers/base.py" in get_response
  111\.                         response = callback(request, *callback_args, **callback_kwargs)
File "/home/marek/devel/django/prayer/intentions/views.py" in edit
  55\.                                  context_instance=RequestContext(request)  
File "/usr/local/lib/python2.7/dist-packages/django/shortcuts/__init__.py" in render_to_response
  20\.     return HttpResponse(loader.render_to_string(*args, **kwargs), **httpresponse_kwargs)
File "/usr/local/lib/python2.7/dist-packages/django/template/loader.py" in render_to_string
  176\.         return t.render(context_instance)
File "/usr/local/lib/python2.7/dist-packages/django/template/base.py" in render
  140\.             return self._render(context)
File "/usr/local/lib/python2.7/dist-packages/django/template/base.py" in _render
  134\.         return self.nodelist.render(context)
File "/usr/local/lib/python2.7/dist-packages/django/template/base.py" in render
  823\.                 bit = self.render_node(node, context)
File "/usr/local/lib/python2.7/dist-packages/django/template/debug.py" in render_node
  74\.             return node.render(context)
File "/usr/local/lib/python2.7/dist-packages/django/template/loader_tags.py" in render
  123\.         return compiled_parent._render(context)
File "/usr/local/lib/python2.7/dist-packages/django/template/base.py" in _render
  134\.         return self.nodelist.render(context)
File "/usr/local/lib/python2.7/dist-packages/django/template/base.py" in render
  823\.                 bit = self.render_node(node, context)
File "/usr/local/lib/python2.7/dist-packages/django/template/debug.py" in render_node
  74\.             return node.render(context)
File "/usr/local/lib/python2.7/dist-packages/django/template/loader_tags.py" in render
  62\.             result = block.nodelist.render(context)
File "/usr/local/lib/python2.7/dist-packages/django/template/base.py" in render
  823\.                 bit = self.render_node(node, context)
File "/usr/local/lib/python2.7/dist-packages/django/template/debug.py" in render_node
  74\.             return node.render(context)
File "/usr/local/lib/python2.7/dist-packages/django/template/debug.py" in render
  84\.             output = self.filter_expression.resolve(context)
File "/usr/local/lib/python2.7/dist-packages/django/template/base.py" in resolve
  571\.                 obj = self.var.resolve(context)
File "/usr/local/lib/python2.7/dist-packages/django/template/base.py" in resolve
  721\.             value = self._resolve_lookup(context)
File "/usr/local/lib/python2.7/dist-packages/django/template/base.py" in _resolve_lookup
  772\.                             current = current()
File "/usr/local/lib/python2.7/dist-packages/django/forms/forms.py" in as_p
  238\.             errors_on_separate_row = True)
File "/usr/local/lib/python2.7/dist-packages/django/forms/forms.py" in _html_output
  143\.         top_errors = self.non_field_errors() # Errors that should be displayed above all fields.
File "/usr/local/lib/python2.7/dist-packages/django/forms/forms.py" in non_field_errors
  246\.         return self.errors.get(NON_FIELD_ERRORS, self.error_class())
File "/usr/local/lib/python2.7/dist-packages/django/forms/forms.py" in _get_errors
  115\.             self.full_clean()
File "/usr/local/lib/python2.7/dist-packages/django/forms/forms.py" in full_clean
  270\.         self._clean_fields()
File "/usr/local/lib/python2.7/dist-packages/django/forms/forms.py" in _clean_fields
  281\.             value = field.widget.value_from_datadict(self.data, self.files, self.add_prefix(name))
File "/usr/local/lib/python2.7/dist-packages/django/forms/widgets.py" in value_from_datadict
  205\.         return data.get(name, None)

Exception Type: AttributeError at /intentions/3/edit
Exception Value: 'Intention' object has no attribute 'get' 
```

* * *

## 回答 #1

> 赞同：92
> 
> 时间：2012-07-26T12:23:05.177

你的问题在这里：

```
intention = Intention.objects.get(pk=id)
form = IntentionForm(intention) # An unbound form 
```

表单的第一个参数是数据，但您正在传递实例。要正确传递实例，您应该使用：

```
intention = Intention.objects.get(pk=id)
form = IntentionForm(instance=intention) # An unbound form 
```

* * *

## 回答 #2

> 赞同：31
> 
> 时间：2016-04-30T06:58:58.433

上面的答案是正确的，但是，这个错误也可能是由于在用于管理模型的表单的**init中错误地传递参数而产生的。**

例子：

```
class MyForm(forms.ModelForm):
  def __init__(self, *args, **kwargs):
    super(MyForm, self).__init__(self, *args, **kwargs) 
```

注意到 self 的双重传递了吗？它应该是：

```
class MyForm(forms.ModelForm):
  def __init__(self, *args, **kwargs):
    super(MyForm, self).__init__(*args, **kwargs) 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2017-03-21T02:28:02.303

在 Django 中，请注意如何命名视图和模型。

就我而言，我有这个`models.py`：

```
class Contact(models.Model):
    ... 
```

在`views.py`中，我有：

```
def contact(request):
    ... 
```

然后，在 中`urls.py`，我有：

```
from .views import Contact 
```

所以，我实际上是在导入模型类，而不是联系人函数，所以我的错误是：

```
'Contact' object has no attribute 'get' 
```

该对象没有属性`get`。那应该来自`views.py`，而不是`model`。

# java - Ms Access Query 不适用于插入语句

> ID：11667849
> 
> 赞同：-1
> 
> 时间：2012-07-26T11:02:04.047
> 
> 标签：java, ms-access

我正在执行查询

```
insert into paymentdetails(fov,fse,nform,total) values(120,120,200,1640) where docketno='60000000'; 
```

在 Ms Access 中执行它后，我得到一个错误

```
java.sql.SQLException: [Microsoft][ODBC Microsoft Access Driver] Missing semicolon (;) at end of SQL statement. 
```

任何人都可以告诉是什么问题。？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T11:12:08.287

如果该行存在，我认为您想更新值。

插入一行

```
str="INSERT INTO TableName (Col1,Col2) VALUES (va1,va2)"; 
```

要更新现有行，

```
str="UPDATE TableName Set Col1=Val1, Col2=Val2 WHERE Col3=Val3"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T11:10:40.390

如何在 INSERT 语句中有 WHERE 子句？你不是说更新吗？

或者

只需删除 WHERE 子句即可插入新记录。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-26T11:11:23.457

请删除 'where' 条件，执行如下：

```
insert into paymentdetails(fov,fse,nform,total) values(120,120,200,1640); 
```

如果，你想用 where 执行然后使用 select 语句，如：

```
insert into paymentdetails(fov,fse,nform,total) 

select col1,col2,col3,col4 from tablename  where docketno='60000000'; 
```

# c# - Linq List.Select 抛出空引用异常，但 List.First 没有

> ID：11667851
> 
> 赞同：1
> 
> 时间：2012-07-26T11:02:11.143
> 
> 标签：c#, linq, nullreferenceexception

我有一个返回一项的 linq 查询。当我这样做时`myList.Select(p => p.ID)`，它会抛出空引用异常，但是，如果我这样做`myList.First().ID`很好。我已经尝试过`myList.ToList().Select(p => p.ID)`但也失败了。

最奇怪的是它可以在另一台电脑上运行......

任何的想法？

**代码更新**

```
 var test = A2012_DomainDB.GetGadgetDomainsForUser(userID);
   var viewableGadgetIDs = test.Where(p => p != null).Select(p => p.GadgetID); // this line fails 

public static IEnumerable<A2012_Domain_Gadget> GetGadgetDomainsForUser(int userID)
    {
        var db = Database_Factory.EVISION_EMAGINE_DB;
        var viewableDomainIDs = GetDomainsForUser(userID).Select(p => p.DomainID);
        var result = db.A2012_Domain_Gadget.Where(p => viewableDomainIDs.Contains(p.DomainID));
        return result;
    }

  public static List<A2012_Domain> GetDomainsForUser(int userID)
    {
        var db = Database_Factory.EVISION_EMAGINE_DB;
        List<int> viewableIDs = new List<int>();
        List<A2012_Domain> domains = new List<A2012_Domain>();

        viewableIDs.AddRange(db.A2012_Domain_User.Where(p => p.UserID == userID).Select(p => p.DomainID));                        

        viewableIDs.ForEach(i =>
        {
            domains.Add(db.A2012_Domain.Where(p => p.DomainID == i).Single());
        });

        return domains;
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-26T11:33:13.860

我真的无法确切地看到这将来自哪里。`GetGadgetDomainsForUser`查询应该推迟到您实际迭代返回的，`viewableGadgetIDs`但您似乎暗示仅在运行该行时会发生异常。

我真正能建议的是尝试使用 null 保护所有 lambda 表达式：

```
var result = db.A2012_Domain_Gadget
                 .Where(p => p != null)
                 .Where(p => viewableDomainIDs.Contains(p.DomainID)); 
```

和：

```
viewableIDs.AddRange(
    db.A2012_Domain_User
        .Where(p => p != null)
        .Where(p => p.UserID == userID)
        .Select(p => p.DomainID));                        

viewableIDs.ForEach(i =>
{
    domains.Add(
        db.A2012_Domain
           .Where(p => p != null)
           .Where(p => p.DomainID == i)
           .Single());
}); 
```

我很想说错误来自这里：

```
var result = db.A2012_Domain_Gadget.Where(p => viewableDomainIDs.Contains(p.DomainID)); 
```

也许对 的查询`db`产生了一个空项目，然后在`p.DomainID`没有空检查的情况下使用它。

# jquery - 在某些选择上显示不同的图像

> ID：11667852
> 
> 赞同：0
> 
> 时间：2012-07-26T11:02:19.153
> 
> 标签：jquery, show-hide

所以我正在用 simplecartjs 制作这个小型网上商店。我想在用户选择某种产品的新类型时显示不同的产品图像，并写了这个。它有效，但可能有更简单的方法来做到这一点？来自 teipit.php：

```
<?php
include 'nav.php';
?><br><br>
<p> 
<script type="text/javascript">
$(document).ready(function() {
    $(".item_lenght").change(function() {
        $('.item_price').html($('option:selected', this).data('price'));
    });
    $(".item_type").change(function() {
       if ($(this).val() == "Harjattu Alumiini") {
            $('.product_image1').show();
            $('.product_image2').hide();
            $('.product_image3').hide();
            $('.product_image4').hide();
      }
       if ($(this).val() == "Hiilikuitu (Musta)") {
            $('.product_image1').hide();
            $('.product_image2').show();
            $('.product_image3').hide();
            $('.product_image4').hide();
      }
       if ($(this).val() == "Hiilikuitu (Valkoinen)") {
            $('.product_image1').hide();
            $('.product_image2').hide();
            $('.product_image3').show();
            $('.product_image4').hide();
      }
       if ($(this).val() == "Mattamusta") {
            $('.product_image1').hide();
            $('.product_image2').hide();
            $('.product_image3').hide();
            $('.product_image4').show();
      }
    });
});

</script>
<div class="simpleCart_shelfItem">
    <h2 class="item_name">Teipit </h2>
<p>     
<div class="product_image_container">
<img class="product_image1" src="kuvat/teipit/harja-alu.jpg ">
<img class="product_image2" style="display:none;" src="kuvat/teipit/hiilimusta.jpg">
<img class="product_image3" style="display:none;" src="kuvat/teipit/hiilivalkoinen.jpg">
<img class="product_image4" style="display:none;" src="kuvat/teipit/mattamusta.jpg">
</div>
        <select class="item_lenght" name="size">
        <option value="Tyhjä">Valitse koko</option>
        <option data-price="47.00€" value="25cm"> 25cm x 150cm </option>
        <option data-price="48.00€" value="50cm"> 50cm x 150xm</option>
        <option data-price="49.00€" value="100cm"> 100cm x 150cm </option>
        </select><br>
        <select class="item_type" name="type">
        <option value="Ei valintaa">Valitse väri</option>
        <option value="Harjattu Alumiini"> Harjattu Alumiini </option>
        <option value="Hiilikuitu (Musta)"> Hiilikuitu (Musta) </option>
        <option value="Hiilikuitu (Valkoinen)"> Hiilikuitu (Valkoinen) </option>
        <option value="Mattamusta"> Mattamusta </option>
        </select><br>
    <input type="text" value="1" class="item_Quantity"><br>
    <span class="item_price">0.00€&lt;/span>
   <br>
<a class="item_add" href="javascript:;"> Lisää koriin </a></p>
</div>
<br>

<?php
include 'footer.php';
?> 
```

因此，如果有更简单的方法可以实现这一点，我愿意学习，因为我是 jQuery 的初学者。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T11:06:05.433

你可以试试这个： http: [//jsfiddle.net/3nSuE/1/](http://jsfiddle.net/3nSuE/1/) **或**大大减少代码，但稍微改变了你的 HTML：http: [//jsfiddle.net/sxJh8/](http://jsfiddle.net/sxJh8/)

简单的链式版本：

```
$(document).ready(function() {
    $(".item_lenght").change(function() {
        $('.item_price').html($('option:selected', this).data('price'));
    });
    $(".item_type").change(function() {
        if ($(this).val() == "Harjattu Alumiini") {
            $('.product_image1').show();

        }
        if ($(this).val() == "Hiilikuitu (Musta)") {

            $('.product_image2').show();
            $('.product_image1,.product_image3,.product_image4').hide();

        }
        if ($(this).val() == "Hiilikuitu (Valkoinen)") {

            $('.product_image3').show();
            $('.product_image1,.product_image2,.product_image4').hide();

        }
        if ($(this).val() == "Mattamusta") {
            $('.product_image1,.product_image2,.product_image3').hide();

            $('.product_image4').show();
        }
    });
});​ 
```

**或** [http://jsfiddle.net/sxJh8/](http://jsfiddle.net/sxJh8/)（对 html 的小改动）

```
$(document).ready(function() {
    $(".item_lenght").change(function() {
        $('.item_price').html($('option:selected', this).data('price'));
    });
    $(".item_type").change(function() {
        $('.product_image1,.product_image2,.product_image3,.product_image4').hide();

            classname = $(".item_type option:selected").prop("class");

            $('.'+classname).show();

    });
});​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T11:08:32.157

嗯 - 你知道，这有点啰嗦，但老实说，它是有效的，试图简化它可能只会让它复杂化！

我能看到的唯一方法是 on (".item_type").change，调用一个隐藏所有的新函数，然后每种类型只调用该图像的单个显示。

```
 $(document).ready(function() {
    $(".item_lenght").change(function() {
    $('.item_price').html($('option:selected', this).data('price'));
    });
    $(".item_type").change(function() {
        $('.product_image1,.product_image2,.product_image3,.product_image4,').hide();

        if ($(this).val() == "Harjattu Alumiini") {
            $('.product_image1').show();

        }
        if ($(this).val() == "Hiilikuitu (Musta)") {
            $('.product_image2').show();

        }
        if ($(this).val() == "Hiilikuitu (Valkoinen)") {
            $('.product_image3').show();

        }
        if ($(this).val() == "Mattamusta") {
            $('.product_image4').show();
        }
    });
});​ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-26T11:11:33.743

这看起来很不错。

为了节省一些代码，我会添加第二个类，比如`productImage`所有*IMG*标签。然后你可以在显示你想要的之前隐藏所有内容：

```
...  
$('.productImage').hide();  
...  
if ($(this).val() == "Mattamusta") {  
    $('.product_image4').show();
  } 
```

# c# - Visual Studio 参数化单元测试，如 java

> ID：11667868
> 
> 赞同：8
> 
> 时间：2012-07-26T11:03:18.910
> 
> 标签：c#, java, unit-testing, junit, tdd

在 Java 测试环境中，我可以使用参数化单元测试，如下代码所示：

```
@RunWith(value = Parameterized.class)
public class JunitTest6 {

    private int number;

    public JunitTest6(int number) {
        this.number = number;
    }

    @Parameters
    public static Collection<Object[]> data() {
        Object[][] data = new Object[][] { { 1 }, { 2 }, { 3 }, { 4 } };
        return Arrays.asList(data);
    }

    @Test
    public void pushTest() {
        System.out.println("Parameterized Number is : " + number);
    }
} 
```

如何在 Visual Studio 单元测试项目中执行此操作？我找不到任何参数化属性或任何这样的样本。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-26T13:10:14.210

使用[NUnit 框架](http://www.nunit.org)，您可以像这样将参数传递给测试：

```
[TestCase(1, 2, 3)]
[TestCase(10, 20, 30)]
public void My_test_method(int first, int second, int third)
{
    // Perform the test
} 
```

这将运行两个不同的时间，`1, 2, 3`在第一次运行和`10, 20, 30`第二次运行中传递值。

编辑：有关 NUnit 可用测试运行器的概述，[请参阅此 SO 问题](https://stackoverflow.com/questions/336655/what-is-the-best-nunit-test-runner-out-there)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-27T08:46:55.407

如果您可以参考[NUnit](http://nunit.org/)，请查看[Parameterized Tests](http://nunit.org/index.php?p=parameterizedTests&r=2.5)页面。支持内联静态和动态数据值。

如果您出于某种原因不想使用 NUnit，MSTest 或 VS 单元测试[支持从](http://msdn.microsoft.com/en-US/library/ms182527%28v=vs.100%29)CSV、XML 或 DB 获取输入。内联支持可通过[扩展](http://archive.msdn.microsoft.com/UnitTestExtendSample)获得。动态支持尚未.. 如果您想动态计算输入/输出，您必须将动态代码添加到您的测试方法中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-07-11T08:50:25.293

这现在也可以通过[MSTest 2](https://blogs.msdn.microsoft.com/devops/2017/09/01/upgrade-to-mstest-v2/)框架实现。

它带有一个“DataTestMethod”属性和相关的“DataRow”属性。这使得 NUnit 的工作方式相似。

[这里](https://blogs.msmvps.com/bsonnino/2017/03/18/parametrized-tests-with-ms-test/)有一些关于如何使用它的好例子。

# sql-server - Service Broker 重复读取/接收

> ID：11667870
> 
> 赞同：1
> 
> 时间：2012-07-26T11:03:24.550
> 
> 标签：sql-server, sql-server-2008, service-broker

有没有人有任何示例脚本来生成从服务代理队列接收消息但未从中删除的场景。我们认为我们在生产中不时会遇到这种情况，但根本无法在本地复制它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T07:45:31.820

如果您在事务中收到消息然后提交事务，则会从队列中删除消息（除非保留 = on，但保留消息会更改其状态）。

但是，如果您在事务中收到消息，对其进行处理并回滚事务，则消息将保留在队列中。

在您的情况下，可能有一些未处理的异常导致此行为（并且并非代码中的所有事件都在接收消息的同一事务中）。

# android - main.XML 对谷歌地图有错误

> ID：11667872
> 
> 赞同：1
> 
> 时间：2012-07-26T11:03:34.667
> 
> 标签：android, xml, eclipse, google-maps

这是我的 XML 文件：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent">

    <com.google.android.maps.MapView
          android:id="@+id/mvMain"
                 android:layout_width="fill_parent"
                 android:layout_height="fill_parent"
                 android:clickable="true"
                 android:apiKey="MAP API KEY" />
</RelativeLayout> 
```

并且在 Ant 编辑器中显示问题出在此处： android:layout_height="fill_parent" **>** 但事实并非如此。这是清单：

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.natasamisic.maptest"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk
        android:minSdkVersion="8"
        android:targetSdkVersion="15" />
    <uses-permission android:name="android.permission.INTERNET"/>

    <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
         android:theme="@android:style/Theme.NoTitleBar">
        <uses-library android:name="com.google.android.maps" />
        <activity
            android:name=".Main"
            android:label="@string/title_activity_main" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
    </application>

</manifest> 
```

我试图清理一个项目，但仍然无法工作。当我尝试运行它时，它在控制台中显示：XML 文件中的错误：正在中止构建。

并显示新的空白 XML 文件**main.out.xml** ...

我应该怎么办？我的 Main.java 没问题。问题出在 XML 中，可能是一些 Eclipse 错误，我不知道如何解决。请帮忙...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T11:04:08.523

删除**main.out.xml**并清理您的项目表单`Menu -> Project -> Clean`

接着`RightClick on Project -> Run as -> Android Application`

# php - PHP 不等待响应/立即回复返回

> ID：11667876
> 
> 赞同：1
> 
> 时间：2012-07-26T11:03:44.280
> 
> 标签：php

我有一个用 PHP 编写的 Web 服务，一个 iPhone 应用程序连接到该服务。当应用程序调用该服务时，一系列通知消息会发送到 Apple 的 APNs 服务器，以便它可以向应用程序的其他用户发送推送通知。

在某些情况下，此过程可能会很耗时，并且我的应用程序必须等待很长时间才能获得响应。响应完全独立于发送到 APNs 服务器的通知消息的结果。

因此，我希望 Web 服务将响应发送回应用程序，无论是否已向 APNs 发送消息。

我当前的代码：

```
<?
    <...>
    echo $chatID; // This has to be printed immediately
    include('apns.php'); // Just invoke this, dont wait for response! 
?> 
```

我该怎么做呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-26T11:11:25.647

您应该关闭连接，然后像这样继续处理：

```
set_time_limit(0); 
ignore_user_abort(true);  

//start the output buffer
ob_start();

//process what needs to be returned to browser
echo $chatID;

//tell the browser not to expect any more content and close the connection
header("Content-Length: " . ob_get_length());
header("Connection: close");
ob_end_flush(); 
ob_flush(); 
flush(); 
//continue processing 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-26T11:04:52.987

打电话[`flush();`](http://php.net/flush)；这将确保之前打印的任何数据都立即发送给客户端。如果您使用输出缓冲，您需要先调用[`ob_flush();`](http://php.net/ob_flush)。

# android - 在 ICS 上阅读浏览器历史记录

> ID：11667883
> 
> 赞同：0
> 
> 时间：2012-07-26T11:04:05.377
> 
> 标签：android, browser-history

我可以使用 CONTENT_URI 指向的以下光标获取 Android 2.2 上的默认历史记录`Browser.BOOKMARKS_URI`

`cursor = context.getContentResolver().query(CONTENT_URI, Browser.HISTORY_PROJECTION, null, null, null);`

```
if (cursor.moveToLast()) 
        String url = cursor.getString(Browser.HISTORY_PROJECTION_URL_INDEX); 
```

但它在 android ICS 上不起作用我得到了一个错误的 url，它总是一样的：`1970-01-01 00:00:00 http://www.samsung.com/m-manual/common`

PS：获取我使用的日期`cursor.getLong(Browser.HISTORY_PROJECTION_DATE_INDEX)`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T20:14:10.513

您是否也尝试过[getAllBookmarks()](http://developer.android.com/reference/android/provider/Browser.html#getAllBookmarks%28android.content.ContentResolver%29)？

```
Cursor cursor = Browser.getAllBookmarks(getContentResolver());
if (cursor != null) {
    try {
        while (cursor.moveToNext()) {
            String url = cursor.getString(cursor.getColumnIndex(Browser.BookmarkColumns.URL));
        }
    } finally {
        cursor.close();
    }
} 
```

编辑：

```
String sortOrder = Browser.BookmarkColumns.DATE + " ASC";
Cursor cursor = getContentResolver().query(CONTENT_URI, Browser.HISTORY_PROJECTION, null, null, sortOrder);
if (cursor != null) {
    try {
        if (cursor.moveToLast()) {
            String url = cursor.getString(Browser.HISTORY_PROJECTION_URL_INDEX);
            long date = cursor.getLong(Browser.HISTORY_PROJECTION_DATE_INDEX);
        }
    } finally {
        cursor.close();
    }
} 
```

其实为什么`http://www.samsung.com/m-manual/common`网址是错误的？你期待什么网址？您尚未指定任何要排序的列。通过`cursor.moveToLast()`您将光标移动到最后一项，而不是遍历书签。

# html - CSS：如何更改 webkit 中滚动条右下角方块的颜色？

> ID：11667890
> 
> 赞同：19
> 
> 时间：2012-07-26T11:04:29.247
> 
> 标签：html, css, webkit

问题：

如何在 webkit (Google-Chrome) 中更改滚动条右下角方块的颜色（变为黑色）？

![滚动条](../Images/129bb2a7225b538d6f62fdfc0317e0d6.png)

这是我到目前为止所拥有的：

```
/*
http://www.coffeepowered.net/2011/06/17/sexy-css-scrollbars/
http://css-tricks.com/custom-scrollbars-in-webkit/
*/
::-webkit-scrollbar {
    width: 13px;
    height: 13px; }

::-webkit-scrollbar:hover {
    height: 18px; }

::-webkit-scrollbar-button:start:decrement,
::-webkit-scrollbar-button:end:increment 
{
    height: 15px;
    width: 13px;
    display: block;
    background: #101211;
    background-repeat: no-repeat; 
}

::-webkit-scrollbar-button:horizontal:decrement 
{
    background-image: url(./images/horizontal-decrement-arrow.png);
    background-position: 4px 3px; 
}

::-webkit-scrollbar-button:horizontal:increment 
{
    background-image: url(./images/horizontal-increment-arrow.png);
    background-position: 3px 3px; 
}

::-webkit-scrollbar-button:vertical:decrement 
{
    background-image: url(./images/vertical-decrement-arrow.png);
    background-position: 3px 4px; 
}

::-webkit-scrollbar-button:vertical:increment 
{
    background-image: url(./images/vertical-increment-arrow.png);
    background-position: 3px 4px; 
}

::-webkit-scrollbar-button:horizontal:decrement:active { background-image: url(./images/horizontal-decrement-arrow-active.png); }

::-webkit-scrollbar-button:horizontal:increment:active { background-image: url(./images/horizontal-increment-arrow-active.png); }

::-webkit-scrollbar-button:vertical:decrement:active { background-image: url(./images/vertical-decrement-arrow-active.png); }

::-webkit-scrollbar-button:vertical:increment:active { background-image: url(./images/vertical-increment-arrow-active.png); }

::-webkit-scrollbar-track 
{
    -webkit-box-shadow: inset 0 0 6px rgba(0,0,0,0.3); 
    border-radius: 10px;
}

::-webkit-scrollbar-track-piece {
    background-color: #151716; }

::-webkit-scrollbar-thumb:vertical 
{
    height: 50px;
    background: -webkit-gradient(linear, left top, right top, color-stop(0%, #4d4d4d), color-stop(100%, #333333));
    border: 1px solid #0d0d0d;
    border-top: 1px solid #666666;
    border-left: 1px solid #666666; 
    border-radius: 10px;
    -webkit-box-shadow: inset 0 0 6px rgba(0,0,0,0.5); 
}

::-webkit-scrollbar-thumb:horizontal 
{
    width: 50px;
    background: -webkit-gradient(linear, left top, left bottom, color-stop(0%, #4d4d4d), color-stop(100%, #333333));
    border: 1px solid #1f1f1f;
    border-top: 1px solid #666666;
    border-left: 1px solid #666666; 
    border-radius: 10px;
    -webkit-box-shadow: inset 0 0 6px rgba(0,0,0,0.5); 
} 
```

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-07-26T11:17:20.303

啊没关系：

[在这里](http://trac.webkit.org/export/41842/trunk/LayoutTests/scrollbars/overflow-scrollbar-combinations.html)找到答案

```
::-webkit-scrollbar-corner {
/*
background-image: url(resources/corner.png);
background-repeat: no-repeat;
*/
background-color: #3D3D3D;
} 
```

# c# - 动作委托中的任务实例

> ID：11667892
> 
> 赞同：3
> 
> 时间：2012-07-26T11:04:43.283
> 
> 标签：c#, .net, task-parallel-library

我不能`t`在下面的代码中的任务操作委托中使用我的任务 ( ) 的实例。我收到以下错误：

> 使用未分配的局部变量 't'

代码：

```
Task t = Task.Factory.StartNew(() =>
{
    MessageBox.Show(t.Id.ToString());
}); 
```

现在，如果我执行以下操作，它会起作用：

```
Task t = null;
t = Task.Factory.StartNew(() =>
{
    MessageBox.Show(t.Id.ToString());
}); 
```

有人可以解释为什么会这样吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-26T11:09:25.393

C# 编译器对`Task.Factory.StartNew`. 就编译器而言，访问`t`可能在调用之后的任何时间发生`StartNew`，包括`t`分配之前的时间。

您的第二个代码片段有一个竞争条件：如果并发线程上的任务在分配完成之前显示消息框，您将看到一个空引用异常。

试试这个实验：

```
private static Task Wrapper(Action f) {
    var res = Task.Factory.StartNew(f);
    Thread.Sleep(1000);
    return res;
} 
```

`Task.Factory.StartNew`现在用第二个代码段中的调用替换直接调用`Wrapper`，然后观察程序崩溃。

```
Task t = null;
t = Wrapper(() => {
    MessageBox.Show(t.Id.ToString());
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-26T11:08:51.680

您必须首先为 t 赋值，以便它获得对 Task 类型对象的引用。

在您的第一段代码中，您尝试为 t 分配一个值并在一个语句中使用它（那里只有一个分号）。

在第二个示例中，这是两个单独的语句，因此它会起作用。

# javascript - .val() 在 jquery 中不起作用？

> ID：11667893
> 
> 赞同：-5
> 
> 时间：2012-07-26T11:04:50.717
> 
> 标签：javascript, jquery

我们是否也可以将字符串值传递给某个变量并通过以下代码调用

```
$(document).ready(function() {
    var i = "1, 2, 3";
    $('#textvalue').val(i);
}); 
```

它有效吗？

它不工作不知道如何:(

还有一篇与此相关的帖子

链接：[设置变量时 jQuery .val() 不起作用](https://stackoverflow.com/questions/5327331/jquery-val-not-working-when-setting-a-variable)

提前致谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T11:07:33.763

如果`#textvalue`是一个`<select multiple>`元素，您可以将其值设置为一个数组，该数组将选择数组中具有值的所有选项：

```
var somearray = [1, 2, 3];
$('#textvalue').val(somearray); 
```

但是，对于任何其他元素，数组没有意义，因此它将被转换为字符串或简单地失败。

无论如何，您拥有的*字符串*`somearray`可以毫无问题地分配给任何输入元素（`type="file"`当然除外）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T11:11:41.227

也许这就是你要找的东西：http: [//jsfiddle.net/XKgFy/2/](http://jsfiddle.net/XKgFy/2/)

使用您的字符串设置值 attr，然后将其拆分回数组：

```
var somearray = "1, 2, 3";
$('#textvalue').attr('value',somearray).on('click', function(){
    var arr = $(this).attr('value').split(', ');
    $('<p>').html("Your array has " + arr.length + " elements").appendTo($('body'));
}); 
```

# android - 当方向从陆地变为港口时，为什么 Android 生命周期方法会调用两次？

> ID：11667898
> 
> 赞同：0
> 
> 时间：2012-07-26T11:05:05.213
> 
> 标签：android, android-activity, android-lifecycle, android-orientation

我知道当方向变化时，Android 会破坏并重新创建当前活动，除非我们处理了方向变化。当遵循生命周期方法的方向发生变化时被调用

```
protected void onSaveInstanceState(Bundle outState)
protected void onStop()
protected void onDestroy()
public void onCreate(Bundle savedInstanceState)
protected void onStart()
protected void onRestoreInstanceState(Bundle savedInstanceState)
protected void onResume() 
```

我的问题是为什么当我从横向切换到纵向时这些方法被调用两次，而当我从纵向切换到横向时只调用一次。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T21:54:51.323

查看[Activity API - Configuration Changes](http://developer.android.com/reference/android/app/Activity.html#ConfigurationChanges)，它应该回答你所有的问题。

> 如果设备的配置（由 Resources.Configuration 类定义）发生更改，则显示用户界面的任何内容都需要更新以匹配该配置。因为 Activity 是与用户交互的主要机制，所以它包括对处理配置更改的特殊支持。
> 
> 除非您另外指定，否则配置更改（例如屏幕方向、语言、输入设备等的更改）将导致您当前的活动被破坏，并通过 onPause()、onStop() 和onDestroy() 视情况而定。如果活动在前台或对用户可见，则在该实例中调用 onDestroy() 后，将创建活动的新实例，其中包含前一个实例从 onSaveInstanceState(Bundle) 生成的任何已保存实例状态。
> 
> 这样做是因为任何应用程序资源（包括布局文件）都可以根据任何配置值进行更改。因此，处理配置更改的唯一安全方法是重新检索所有资源，包括布局、可绘制对象和字符串。因为活动必须已经知道如何保存它们的状态并从该状态重新创建自己，所以这是一种使用新配置重新启动活动的便捷方式。
> 
> 在某些特殊情况下，您可能希望根据一种或多种类型的配置更改绕过重新启动活动。这是通过清单中的 android:configChanges 属性完成的。对于您说您在那里处理的任何类型的配置更改，您将收到对当前活动的 onConfigurationChanged(Configuration) 方法的调用，而不是重新启动。但是，如果配置更改涉及您未处理的任何内容，则活动仍将重新启动，并且不会调用 onConfigurationChanged(Configuration)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T11:48:33.230

这可能是模拟器中的某种错误，它不会在真实设备上发生。

# asp.net - ASP.NET Web 窗体不在 GridView 中显示数据

> ID：11667901
> 
> 赞同：0
> 
> 时间：2012-07-26T11:05:17.573
> 
> 标签：asp.net, datagrid, webforms

我在这里遇到了一些麻烦。

我从我的数据库中获得了一个 DataTable，我想用它作为我的 GridView 的数据源。

问题：当我用我的 DataTable 设置这个 GridView 的数据源时，什么也没有发生。但是，如果我设置另一个组件（如 ListItem）的数据源，则会显示数据。

我该怎么办？按照下面的代码：

```
<!-- Here I have a ListView. When I set the datasource, the data is showed. -->
<asp:ListView ID="listviewCustomers" runat="server">
    <ItemTemplate>
        <asp:Label runat="server" ID="myLabel" text="<%# bind('Name') %>" />
    </ItemTemplate>
</asp:ListView>

<!-- Here I have a GridView. When I set the datasource, nothing happens. -->
<asp:GridView runat="server" ID="gridviewPassageiros">
    <Columns>
        <asp:TemplateField>
            <ItemTemplate>
            <asp:Label runat="server" ID="myLabel" text="<%# bind('Name') %>" />
            </ItemTemplate>
        </asp:TemplateField>
    </Columns>
</asp:GridView> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T11:13:45.993

最简单的情况可能是缺少对“gridviewPassageiros”的“DataBind”的调用。另一种选择是添加虚拟内容。

代码隐藏

```
public void Page_OnLoad(object sender, EventArgs eventArgs)
{
  if (!IsPostback)
  {
    gridviewPassageiros.DataSource = GetPassageiros();
    gridviewPassageiros.DataBind();
  }
} 
```

ASPX：

```
<asp:GridView runat="server" ID="gridviewPassageiros">
    <Columns>
        <asp:TemplateField>
            <ItemTemplate>
            <h1>TEST</h1>
            <asp:Label runat="server" ID="myLabel" text="<%# bind('Name') %>" />
            </ItemTemplate>
        </asp:TemplateField>
    </Columns>
</asp:GridView> 
```

评论代码：

```
DAOPassenger objDAOPassenger = new DAOPassenger(); 
gridviewPassageiros.DataSource = objDAOPassenger.GetAllPassangers(); 
gridviewPassageiros.DataBind(); 
```

你检查过，结果`GetAllPassangers`吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T11:28:30.917

缺少 DataSourceID .. 即没有向您的网格提供数据源。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-26T11:10:02.827

尝试使用

```
<asp:Label ID="myLabel" runat="server" Text='<%# Eval("Name") %>'></asp:Label> 
```

还要确保正确绑定数据

例如

```
 if (dt.Rows.Count>0) 
 {
    GridView1.DataSource = dt; 
    GridView1.DataBind(); 
 } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-26T11:13:08.167

我在您的代码中看到两个问题：试试这个

```
Text='<%# Bind("Name") %>' 
```

安装的

```
text="<%# bind('Name') %>" 
```

我也看不到您的代码中的 DataSourceID

希望我有所帮助

# drupal-7 - 从drupal 7中的3rd pary站点获取内容

> ID：11667905
> 
> 赞同：1
> 
> 时间：2012-07-26T11:05:25.230
> 
> 标签：drupal-7, views, drupal-views

我有网站，我需要从另一个网站的某些页面中获取内容。我如何使用 drupal7 和可能的视图来做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T09:53:21.227

使用 Parser 2 模块用于 drupal

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T07:42:03.810

根据您是否要将内容存储在节点中，您将需要使用以下模块之一：Aggregator、Feeds、Aggregator2 或 Leech。

这些模块的详细描述可以在[这里](http://groups.drupal.org/node/3418)找到。

# android - Android模拟器分配内存失败8

> ID：11667907
> 
> 赞同：157
> 
> 时间：2012-07-26T11:05:27.413
> 
> 标签：android, android-emulator

当我尝试从 Eclipse 运行我的 WXGA800 仿真器时，它会出现这样的错误

```
Failed to allocate memory: 8
This application has requested the Runtime to terminate it in an unusual way.
Please contact the application's support team for more information. 
```

我还检查了以下链接

[分配内存失败：8](https://stackoverflow.com/questions/7222906/failed-to-allocate-memory-8)

[Android：分配内存失败](https://stackoverflow.com/questions/5969067)

我尝试减少模拟器中的 RAM 大小并增加 Java heapsize 和 ramsize 但我仍然面临同样的错误。

* * *

## 回答 #1

> 赞同：410
> 
> 时间：2012-08-08T15:46:17.937

**更新**：从 Android SDK Manager 版本 21 开始，解决方案是编辑`C:\Users\<user>\.android\avd\<avd-profile-name>.avd\config.ini`和更改值

```
hw.ramSize=1024 
```

到

```
hw.ramSize=1024MB 
```

![安卓 4.2 API 17](../Images/713a88e9d4f3640661054f44ac76fd47.png)

模拟器真的很慢~~希望他们能尽快发布英特尔图像~~如果您想更改它，请使用新的 API17 Intel x86 映像..（[HAXM](http://software.intel.com/en-us/articles/intel-hardware-accelerated-execution-manager/)，[配置](http://www.developer.com/ws/android/development-tools/haxm-speeds-up-the-android-emulator.html)）

* * *

**较早的 Android SDK Manager 版本：**

内置的 WXGA800 皮肤也有同样的问题。我通过将虚拟设备设置编辑为：

*   目标 4.0.3 API 15 / 4.1.0 API 16
*   SD 卡 300MiB
*   分辨率 1280 x 800（手动设置 - 不是内置的）
*   设备内存大小 1024MB（数字加上 MB）
*   抽象LCD 160

这是我的平板电脑配置 4.1.0 API 16 `C:\Users\<user>\.android\avd\<avd-profile-name>.avd\config.ini`

```
hw.lcd.density=160
sdcard.size=300M
skin.path=1280x800
skin.name=1280x800
hw.cpu.arch=arm
abi.type=armeabi-v7a
hw.cpu.model=cortex-a8
vm.heapSize=48
hw.ramSize=1024MB
image.sysdir.1=system-images\android-16\armeabi-v7a\ 
```

此配置也显示软件密钥 ![截图 Android 4.1 模拟器 1280x800@160](../Images/7f0a65586a1777b3669f7a7179f40747.png)

* * *

## 回答 #2

> 赞同：67
> 
> 时间：2012-12-05T19:29:44.953

以下解决方案对我有用。在以下配置文件中：

```
C:\Users\<user>\.android\avd\<avd-profile-name>.avd\config.ini 
```

代替

```
hw.ramSize=1024 
```

经过

```
hw.ramSize=1024MB 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2013-01-11T12:18:19.243

就我而言，解决方案不仅是更改特定皮肤，`config.ini`还要更改`hardware.ini`特定皮肤从`hw.ramSize=1024`到`hw.ramSize=1024MB`。

要查找`hardware.ini`文件：

1.  打开`config.ini`并找到`skin.path`。
2.  然后导航到android sdk所在的文件夹。
3.  打开路径，如下所示：`android-sdk\platforms\android-15\skins\WXGA720`.
4.  在此文件夹中，您将找到`hardware.ini`.
5.  更改`hw.ramSize=1024`为`hw.ramSize=1024MB`。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2014-02-17T05:09:54.087

更新：从 Android SDK Manager 版本 21 开始，解决方案是编辑 C:\Users\.android\avd\.avd\config.ini 并更改值

hw.ramSize=1024 到

hw.ramSize=1024MB

或者

hw.ramSize=512MB

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2013-01-06T00:30:03.810

如果您将 AVD RAM 设置为大于模拟器能够分配的单个最大连续内存块的任何值，则会触发此错误。关闭任何 RAM 重的东西，启动你的模拟器，启动你需要的一切。在之前的回答中，我已将其限制为使用 IntelHAXM 的 x86 图像，但实际上所有类型的仿真器实例都是这种情况。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2013-01-09T09:43:22.697

在 AVD 设置中：将 CPU/ABI 选项更改为 MIPS。它对我有用

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-12-21T17:35:21.883

我遇到了同样的问题，最终的问题是 RAM 大小：显然 1024（或任何大小）与 1024MB 不同。确保您指定了单位，它应该适合您。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2013-03-13T10:30:40.740

更改 config.ini 文件中的 ramSize 对我不起作用。

我在“编辑 Android 虚拟设备”窗口中将 SD 卡大小更改为 1000 MiB ...它成功了！:)

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2013-05-26T17:36:21.907

去编辑Android Virtual Devices，把1024 Under Memory Options改成768。如果还是不行，继续往下走。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2013-06-04T02:22:43.093

减少 AVD 设置中的 RAM 大小对我有用。缓慢的 AVD 会占用大量 RAM，因此将其保持在最低限度是可行的。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2014-08-28T05:23:17.767

对于皮肤，去掉 No Skin 并在其中添加一些皮肤

![在此处输入图像描述](../Images/854e90dc3c380e5a7462d9c3ba1ea875.png)

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2018-06-03T08:10:22.217

**如果其他答案对您不起作用，请尝试此操作。**

对我来说这发生在 API 27 模拟器上。

API 26 模拟器工作得很好。所以我先启动了 API 26 Emulator，然后关闭了它。

然后我启动了 API 27 Emulator，它完全没有错误。

# xml-parsing - 在 jaxb 中使用 xsd 进行 xml 验证

> ID：11667908
> 
> 赞同：1
> 
> 时间：2012-07-26T11:05:28.270
> 
> 标签：xml-parsing

我有一个xml。我为 xml 创建了一个 XSD。

我想编写一个 prog 来针对 xsd 验证 xml。我写了一个 prog 并设置了个人值。

但是有没有办法，我可以将 xml 文件作为输入，并可以查看 xml 是否对 XSD 有效？

谢谢，妮妮

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-26T11:11:36.430

这是使用 XSD 进行 xml 验证的示例。

```
public static boolean validate() {
    Source xmlFile = null;
    File schemaFile;
    SchemaFactory schemaFactory;
    Schema schema;
    try {
        schemaFile = new File(xsdFileName);
        xmlFile = new StreamSource(new File(xmlFileName));
        schemaFactory = SchemaFactory.newInstance(XMLConstants.W3C_XML_SCHEMA_NS_URI);
        schema = schemaFactory.newSchema(schemaFile);
        Validator validator = schema.newValidator();
        validator.validate(xmlFile);
        System.out.println(xmlFile.getSystemId() + " is valid");
    } catch (SAXException | IOException e) {
        System.out.println(xmlFile.getSystemId() + " is NOT valid");
        System.out.println("Reason: " + e.getLocalizedMessage());
        return false;
    }
    return true;
} 
```

# sql - Sql 查询 - 不同的组

> ID：11667912
> 
> 赞同：0
> 
> 时间：2012-07-26T11:05:45.137
> 
> 标签：sql, sql-server-2008

我有一个名为 TableA 的表。

输入：

```
ColumnA      ColumnB    ColumnC
jim          1788           5F
jim          2000           9F
jim          500            9F
ben          190            4H
geri          40        manny
geri          40        kelly
geri          20        joker
geri          20        jam 
```

输出：

```
ColumnA     ColumnB     ColumnC
jim            2000         9F
jim            2000         NULL
ben             190         4H
geri            40          manny
geri            40          kelly
geri            40          NULL 
```

有人可以帮我处理 SQL 查询吗？

逻辑如下：

我想按 ColumnA 对行进行分组，例如“gerri”组将有 4 行。对于每个组，计算 ColumnB 中的最大元素，对于 gerri 组，它是 40。针对 ColumnB 分析组中的每个元素：如果 element.ColumnB = 最大值，则将行放在输出中（如果它不存在已经）。否则，如果 element.ColumnB 与最大值不同，则将当前行放入输出中，ColumnC 为 NULL，ColumnB 为 MAXIMUM（同样，如果它在输出中不存在）。

从我给出的示例中更清楚。

提前感谢您的任何建议！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-26T11:16:58.870

```
; with maxes as (
  select ColumnA,
         ColumnB,
         ColumnC,
         max(ColumnB) over (partition by ColumnA) mx
    from tablea
)
select distinct
       ColumnA, 
       mx ColumnB, 
       case when mx = ColumnB 
            then ColumnC 
            else null 
        end ColumnC
from maxes 
```

[Sql Fiddle 上的示例](http://sqlfiddle.com/#!3/5da25/6)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-26T11:08:43.480

查看有关子查询的这篇文章：它将在未来帮助您解决这个问题以及其他许多问题：

[http://allenbrowne.com/subquery-01.html](http://allenbrowne.com/subquery-01.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-26T11:16:58.707

```
WITH CTE AS 
(
    select   ColumnA,MAX(ColumnB) as max
    FROM    TABLE 
)select ColumnA,b.max,CASE WHEN a.ColumnB=b.max  THEN ColumnC ELSE NULL END
FROM TABLE  a
INNER JOIN CTE b on a.ColumnA=b.ColumnA 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-26T11:23:29.857

这样的事情可能会奏效

```
with cte (columna,columnb)
as
( 
select columna,max(columnb) as columnb from table
group by  columna
)

select t1.columna,t1.columnb,t1.columnc from table as t1 inner join cte as ct 
on t1.columna=t2.columna and t1.columnb=t2.columnb
union all
select columa,columnb,NULL from cte 
```

# php - PHP 和 Toad Oracle 查询结果不同

> ID：11667916
> 
> 赞同：0
> 
> 时间：2012-07-26T11:06:00.453
> 
> 标签：php, oracle, toad

当使用 Toad for Oracle 和 PHP 函数 oci_fetch_assoc 使用相同的查询、相同的用户数据库凭据时，oci_fetch_assoc 返回的数据数组在一些列中丢失，并且一些列一起丢失。Toad 结果中显示了所有预期结果。

我在这里用谷歌搜索和搜索，没有解决方案。

Toad 正在使用 Instant Client - 11.2.0.1.0

**我的 PHP oci8 信息**

OCI8 支持 - 已启用

版本 1.4.6

修订 $Revision: 313688 $

活动持久连接 0

活动连接 0

Oracle 运行时客户端库版本 11.2.0.2.0

Oracle 即时客户端 10.2 版

启用临时 Lob 支持

已启用集合支持

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T14:41:00.180

使用 oci_fetch_assoc 时，只会返回值为非 NULL 的字段。为此，我使用以下代码获取列名：

```
for ($i=1; $i<=oci_num_fields($parsed); $i++)
{
    $col = oci_field_name($parsed, $i);
    $columnNames[] = $col; // store column names in array
} 
```

然后我的 fetch 函数看起来像这样：

```
function fetch()
{
    global $columnNames; // (I actually have a Query class so I use $this->columnNames)
    $row = oci_fetch_array($parsed, OCI_ASSOC);
    foreach ($columnNames as $colname)
        $row[$colname] = isset($row[$colname]) ? $row[$colname] : null;

    return $row;
} 
```

编辑：另一个（不太可能）的可能性是缺少的列是 CLOBS。您需要使用 OCI_RETURN_LOBS 标志获取那些（请参阅[oci_fetch_array](http://php.net/manual/en/function.oci-fetch-array.php)）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T11:07:48.947

如果您在 PHP 和 Toad 中运行完全相同的查询并且它们返回不同的结果，那么唯一的结论是您的 PHP 忽略了结果集中的几列。

# sql - 用于以相同格式获取两个日期的总差异的sql

> ID：11667917
> 
> 赞同：0
> 
> 时间：2012-07-26T11:06:02.043
> 
> 标签：sql

我想在 sql 中编写一个查询，以查找一个人在日月和年中的年龄.....lik3 Age:'65Years/7Month/2Days'

我有一张包含员工姓名和出生日期的表格

我可以通过使用`datediff`查询找到年或月或日的年龄，但不知道如何为所有的混合写

```
DATEDIFF(day,Column_1,DateNow()) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T11:14:57.417

试试这个：

```
CREATE TABLE emp(ename varchar(100),DOB date,  Age varchar(100))
INSERT INTO emp
VALUES('d','06/02/2011',NULL)--,('b','07/10/1947',NULL),('c','12/21/1982',NULL)

;WITH CTE(ename,DOB,years,months,days) 
AS 
(
SELECT 
    ename,DOB,DATEDIFF(yy,DOB,getdate()),DATEDIFF(mm,DOB,getdate()),DATEDIFF(dd,DOB,getdate()) 
FROM 
    emp
)
SELECT 
    ename,DOB,CAST(months/12 as varchar(5))+' Years'+
    CAST((months % 12) as varchar(5))+' month/s '+
    CAST(CASE WHEN DATEADD(MM,(months % 12),DATEADD(YY,(months/12),DOB)) <= GETDATE() then 
            DATEDIFF(dd,DATEADD(MM,(months % 12),DATEADD(YY,(months/12),DOB)),GETDATE()) 
        ELSE DAY(getdate())   
        END 
        as varchar(5))+' days' as Age
FROM CTE 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T11:11:55.070

试试这里[http://social.msdn.microsoft.com/Forums/en/transactsql/thread/399a7e87-bc78-47a5-8cc2-2d2436886fd7](http://social.msdn.microsoft.com/Forums/en/transactsql/thread/399a7e87-bc78-47a5-8cc2-2d2436886fd7) google 是你的朋友“ms sql for age from date”

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-26T11:13:41.233

请参阅此处显示的方法[http://www.sqlservercurry.com/2010/07/calculate-age-from-date-of-birth-using.html](http://www.sqlservercurry.com/2010/07/calculate-age-from-date-of-birth-using.html)

# android - Android drawBitmap 位置参数

> ID：11667923
> 
> 赞同：3
> 
> 时间：2012-07-26T11:06:30.087
> 
> 标签：android, canvas, bitmap, drawbitmap

我是 android 图形编程的新手。我想在画布的中心放置一个位图。因此，我使用：

```
public void onDraw(Canvas canvas) {
    float canvasx = (float) canvas.getWidth();
    float canvasy = (float) canvas.getHeight(); 
```

然后我调用我想使用的位图，

```
Bitmap myBitmap = BitmapFactory.decodeResource(getResources(),
        R.drawable.myBitmap); 
```

然后我使用这些找到我的位图的坐标位置，

```
float bitmapx = (float) myBitmap.getWidth();
float bitmapy = (float) myBitmap.getHeight();

float boardPosX = (canvasx - bitmapx) / 2;
float boardPosY = (canvasy - bitmapy) / 2; 
```

最后，我使用绘制位图，

```
canvas.drawBitmap(myBitmap, boardPosX, boardPosY, null); 
```

但是，位图不在画布的中心。它略低于我认为应该是画布中心的位置。

在 onDraw() 方法中获取画布高度和宽度是否正确？知道有什么问题吗？提前致谢。

*编辑 ：

最后，我通过改变使它工作

```
public void onDraw(Canvas canvas) {
    float canvasx = (float) canvas.getWidth();
    float canvasy = (float) canvas.getHeight(); 
```

至

```
public void onDraw(Canvas canvas) {
    float canvasx = (float) getWidth();
    float canvasy = (float) getHeight(); 
```

但是，我不知道为什么更改可以解决我的问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T11:07:37.933

用这个：

```
float boardPosX = ((canvasx/2) - (bitmapx / 2));
float boardPosY = ((canvasy/2) - (bitmapy / 2)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-09-12T09:51:50.363

```
private int mWidth;
private int mHeight;
private float mAngle;

@Override protected void onMeasure(int widthMeasureSpec, int heightMeasureSpec)
{
    mWidth = View.MeasureSpec.getSize(widthMeasureSpec);
    mHeight = View.MeasureSpec.getSize(heightMeasureSpec);

    setMeasuredDimension(mWidth, mHeight);
}

@Override protected void onDraw(Canvas canvas)
{
    super.onDraw(canvas);
    Bitmap myBitmap = BitmapFactory.decodeResource(getResources(), R.drawable.compass);

    // Here's the magic. Whatever way you do it, the logic is:
    // space available - bitmap size and divide the result by two.
    // There must be an equal amount of pixels on both sides of the image.
    // Therefore whatever space is left after displaying the image, half goes to
    // left/up and half to right/down. The available space you get by subtracting the
    // image's width/height from the screen dimensions. Good luck.

    int cx = (mWidth - myBitmap.getWidth()) >> 1; // same as (...) / 2
    int cy = (mHeight - myBitmap.getHeight()) >> 1;

    if (mAngle > 0) {
        canvas.rotate(mAngle, mWidth >> 1, mHeight >> 1);
    }

    canvas.drawBitmap(myBitmap, cx, cy, null);
} 
```

# javascript - 在用户离开或关闭页面之前保存 HTML5 视频 currentTime

> ID：11667925
> 
> 赞同：5
> 
> 时间：2012-07-26T11:06:30.673
> 
> 标签：javascript, html, ajax, html5-video, dom-events

`currentTime`当用户离开网页时，我想将 HTML5 视频的位置保存到数据库中。这似乎`window.onbeforeunload`不是一种可靠的方法（更不用说它给出了一个不受欢迎的弹出窗口！）。有一个更好的方法吗？

除了定期将位置保存到服务器之外，我想不出任何办法。但这似乎很浪费资源/带宽。Netflix 似乎在记住您上次查看的位置方面做得很好。他们如何能够可靠地实现这一目标？可能是低级服务器端 C/C++ 代码？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-26T11:34:59.533

有多种方法可以保存这些东西：

## 本地（对于同一个域）

### 卸载前

如果您愿意，这使您可以取消卸载事件。但是，弹出窗口是可选的。

### 卸下

此事件无法取消，但您仍然可以完全访问所有节点和 JavaScript 变量。因此，如果不想取消，您可以进行最终清理/保存。您可以使用任何您喜欢的保存方法，例如`document.cookie`或`window.localStorage`。

```
window.onunload = function () {
    window.localstorage[myVideo.currentTime] = document.getElementById("myVid").currentTime;
} 
```

如果您可以处理这样一个事实，即您只能在用户返回您的站点时处理 cookie 和 localStorage。我认为这种方法将是完美的。您只需保存当前时间，在用户下次访问时，您将获得更新的信息。

## 在后端

如果您确实需要将该信息保存到后端，您可以尝试其他一些方法。

### 数据库轮询

根据您的准确性需求，您可以每 10 - 20 秒发送一次 ajax 请求以更新播放时间。如果您只包含视频 ID 和当前时间，则请求非常小，不会对性能产生影响。但是请记住，如果您有很多域 cookie，它可能会极大地增加请求的大小，并且您的 500 字节有效负载可能带有 5kB 标头。

# javascript - javascript初学者-无法在屏幕上显示消息框

> ID：11667926
> 
> 赞同：0
> 
> 时间：2012-07-26T11:06:44.160
> 
> 标签：javascript

我只是想在屏幕上显示一个消息框。

这是调用消息框的按钮的 HTML ---

```
 <button onclick="myFunction()">Try it</button> 
```

这是相关的javascript函数代码——

```
function myFunction()
{
    alert("Hello World!");
} 
```

javascript 函数存储在 js/fetchdetails.js（相对于 HTML 文件的路径）。

我已经在 HTML 文件中包含了 JS 文件，在 head 部分使用了以下代码——

```
<script src="js/fetchdetails.js"></script> 
```

我在这里做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T11:09:06.993

您发布的代码没有任何问题；错误在其他地方。

您`fetchdetails.js`没有被加载，或者此处未显示的 javascript 中的某些错误导致您的脚本停止执行。

使用浏览器的检查工具查找任何错误消息，并验证文件是否已正确加载（通常有一个“网络”选项卡）。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-26T11:54:14.440

试试这个..

```
<!DOCTYPE html>
<html>
    <head>
        <title>Page Name</title>

        <script type="text/javascript" src="js/fetchdetails.js"> </script>

    </head>

    <body>
<button onclick="myFunction();">Try it</button>
    </body>
</html> 
```

在您的 javascript 文件中

```
function myFunction(){alert("Hello World!");} 
```

这对我来说很完美

如果它不起作用，请提供更多详细信息或尝试这些按钮：

```
<button onclick="javascript:myFunction();">Try it</button>
<input type="button" onclick="myFunction();" value="Try me"/>
<input type="button" onclick="javascript:myFunction();" value="Try Me"/> 
```

希望这可以帮助

# apache - apache限制带宽

> ID：11667927
> 
> 赞同：0
> 
> 时间：2012-07-26T11:06:45.030
> 
> 标签：apache, xampp

我一直在网上四处寻找，但没有取得多大成功。

我正在运行本地 xampp (1.7.0) 安装和我开发的 Web 应用程序，用于备份我的文件并将它们发送到 FTP 服务器。问题是 apache 似乎只使用了我有限的带宽，我不确定为什么会这样。

它通常不会超过 64KB/s，但我知道我目前的宽带将允许超过 1MB/s，这是一个巨大的差异。此外，如果我使用我的 FTP 程序登录到服务器，它会让我下载超过 500KB/s。有谁知道我该如何解决这个问题，因为我的备份是非常大的文件，并且需要数小时才能以 64KB/s 的速度复制？

谢谢麦克风

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T11:10:20.837

您似乎对下载和上传速度感到困惑：“如果我使用我的 FTP 程序登录到服务器，它将让我下载超过 500KB/s。”

您是否使用 1Mb/64Kb ADSL 或电缆连接？

# java - JPA：覆盖自动生成的 ID

> ID：11667929
> 
> 赞同：12
> 
> 时间：2012-07-26T11:06:53.407
> 
> 标签：java, hibernate, jpa

我在 Employee 类中有以下定义

```
@Id
@GeneratedValue(strategy = GenerationType.AUTO)
@Column(name = "employee_id")
private Integer employeeId; 
```

现在我想用现有员工 ID 导入现有员工。即使我在保存之前设置了员工 ID，分配的 ID 也会被忽略并存储自动递增的 ID。我们如何覆盖它？

***我对复合键***有类似的问题，[这里](https://stackoverflow.com/a/63096129/977919)已经解释过

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-08-02T08:03:47.970

我编写了自己的生成器来解决这个问题。

```
public class UseExistingIdOtherwiseGenerateUsingIdentity extends IdentityGenerator {

    @Override
    public Serializable generate(SharedSessionContractImplementor session, Object object) throws HibernateException {
        Serializable id = session.getEntityPersister(null, object).getClassMetadata().getIdentifier(object, session);
        return id != null ? id : super.generate(session, object);
    }
} 
```

并像这样使用它：（替换包名）

```
@Id
@GenericGenerator(name = "UseExistingIdOtherwiseGenerateUsingIdentity", strategy = "{package}.UseExistingIdOtherwiseGenerateUsingIdentity")
@GeneratedValue(generator = "UseExistingIdOtherwiseGenerateUsingIdentity")
@Column(unique = true, nullable = false)
protected Integer id; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-26T11:13:04.727

你不能覆盖它。首先，JPA 没有提供这样做的方法。第二个问题是 GenerationType.AUTO 可以生成这样的列类型，它不会通过 SQL 语句接受用户分配的值。

手动执行数据导入，不要尝试将应用程序本身用作导入工具。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-21T06:54:46.727

在这种情况下，您必须覆盖 getEmployeeId() 方法并在此方法上使用 Annotation，JPA 对类中的所有字段使用 getter 方法，您必须在 getter 方法上移动其他 Annotation

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-07-26T12:44:27.747

在这种情况下，最好有一个 @MappedSuperclass

```
@MappedSuperclass
public AbstractEmployee {
   // declare all properties, getters, setters except for the id
}

@Entity
@Table(name="EMPLOYEE")
public class Employee extends AbstractEmployee {
    @Id
    @GeneratedValue(strategy = GenerationType.AUTO)
    @Column(name = "employee_id")
    private Integer employeeId;

    ...
}

@Entity
@Table(name="EMPLOYEE")
public class EmployeeWithAssignedId extends AbstractEmployee {
    @Id
    @Column(name = "employee_id")
    private Integer employeeId;

    ...
} 
```

因此，当您要手动分配 ID 时，请使用第二类。我没有对此进行测试，但我相信它应该适用于您的情况。我不相信 JPA 中有任何规则说两个类不能具有相同的表名:)

# javascript - onload 事件中的“递归过多”

> ID：11667938
> 
> 赞同：0
> 
> 时间：2012-07-26T11:07:42.753
> 
> 标签：javascript

我正在尝试将表单从一个域的一个页面包含到另一个域的另一个页面。这是我放在我的块形式之后的代码。

```
function IncludeSrc(src) {
  var s= document.createElement("script");
  s.src = src;
  s.async = true;
  document.getElementsByTagName("head")[0].appendChild(s);
 }
 var onLoadFunc = window.onload;
 window.onload=function(){
   if (typeof(onLoadFunc)=='function') onLoadFunc();
   IncludeSrc('MYADRESS');
 }; 
```

在任何浏览器中都没有错误，但不会加载表单。在 Firefox 控制台中，我发现了错误`too much recursion`。脚本的地址是有效的，我查过了。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T11:12:10.773

那是因为你`onLoadFunc`在自身内在呼唤。无论您为什么要这样做，递归都没有基本案例，因此它永远不会触底......

# .net - 对于某些用户来说，在 .NET 中处理键盘快捷键太慢了

> ID：11667943
> 
> 赞同：0
> 
> 时间：2012-07-26T11:07:56.850
> 
> 标签：.net, wpf, winforms, keyboard-shortcuts

我的应用程序中有一些键盘处理代码，例如`Ctrl`+ `C`。

我的应用程序的一些用户在键盘上非常快（按下`Ctrl`并立即按下`C`和释放两者），因此事件处理程序的速度不够快。

该效果同时出现在[Windows Forms](http://en.wikipedia.org/wiki/Windows_Forms)和[WPF](http://en.wikipedia.org/wiki/Windows_Presentation_Foundation)上。

请查看此 Windows 窗体示例。如果您对如何固定东西有任何建议，我会很高兴。您可以使用此示例来重现它（但您必须要快）。

我想知道其他应用程序是如何编程的。以 Visual Studio 为例。在那里，您输入该快捷方式的速度无关紧要。它的行为符合预期。

示例：当快捷方式成功捕获时，我有一个包含一个面板的窗口，该面板在 100 毫秒内变为红色。

```
using System;
using System.Drawing;
using System.Threading;
using System.Threading.Tasks;
using System.Windows.Forms;

namespace KeyboardShortcutTest
{
    public partial class Form1 : Form
    {
        private TaskScheduler _uiScheduler;

        public Form1()
        {
            InitializeComponent();
        }

        private void Form1_Load(object sender, EventArgs e)
        {
            _uiScheduler = TaskScheduler.FromCurrentSynchronizationContext();
            KeyUp += Form1_KeyUp;
        }

        private void Form1_KeyUp(object sender, KeyEventArgs e)
        {
            if (e.Control && e.KeyCode == Keys.C)
            {
                ColorizePanelRed(_displayPanel);
            }
        }

        private void ColorizePanelRed(Panel panel)
        {
            Color c = panel.BackColor;

            Task.Factory.StartNew(() => { panel.BackColor = Color.Red; }, CancellationToken.None, TaskCreationOptions.None, _uiScheduler)
                .ContinueWith(t => { Thread.Sleep(100); })
                .ContinueWith(t => { panel.BackColor = c; }, _uiScheduler);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T11:13:13.777

`Ctrl`问题可能是一些用户在放开钥匙之前太快放手了`C`。我认为捕获*[KeyDown](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.keydown.aspx)*事件而不是[KeyUp](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.keyup.aspx)将是避免这些问题的好方法。

# javascript - 单引号导致jquery mobile出现问题

> ID：11667946
> 
> 赞同：0
> 
> 时间：2012-07-26T11:08:20.570
> 
> 标签：javascript, ruby-on-rails, jquery-mobile, ruby-on-rails-3.1

我有一个视图，它试图将带有以下变量的链接呈现为文本：

```
<ul data-role="listview" data-inset="true" data-filter="true" data-filter-placeholder="Search ideas...">
   <% @ideas.each do |idea| %>
     <li>
       <%= link_to(idea.name + " for " + idea.relationship.name, idea_path(idea) ) %>
     </li>
  <% end %>
</ul> 
```

值 idea.name（从 PG SQL 检索）中有一个单引号。单击链接时，这会导致 javascript 问题：

```
Uncaught SyntaxError: Unexpected identifier jquery-1.7.1.min.js:2
e.extend.globalEval jquery-1.7.1.min.js:2
e.extend.globalEval jquery-1.7.1.min.js:2
bp jquery-1.7.1.min.js:2
e.extend.each jquery-1.7.1.min.js:2
f.fn.extend.domManip jquery-1.7.1.min.js:4
f.fn.extend.append jquery-1.7.1.min.js:3
f.each.f.fn.(anonymous function) jquery-1.7.1.min.js:4
a.mobile.loadPage.a.mobile.allowCrossDomainPages.l.isSameDomain.a.ajax.success jquery.mobile-1.1.0.min.js:58
f.Callbacks.n jquery-1.7.1.min.js:2
f.Callbacks.o.fireWith jquery-1.7.1.min.js:2
w jquery-1.7.1.min.js:4
f.support.ajax.f.ajaxTransport.send.d 
```

我尝试使用`escape_javascript`which 不能提供正确的结果（`\`在单引号前面放一个然后在浏览器中呈现的链接仍然会导致错误。

我正在使用 Rails 3.1、jQuery Mobile 1.1.0 和 jQuery 1.7.1。任何建议表示赞赏。

更新：这是客户端中呈现的响应的样子：

```
<ul data-role="listview" data-inset="true" data-filter="false">
   <li><a href="/ideas/34">toms shoes</a></li>
   <li><a href="/ideas/32">Toms shoes</a></li>
   <li><a href="/ideas/35">Remote controlled boat</a></li>
   <li><a href="/ideas/36">Toms Shoes</a></li>
   <li><a href="/ideas/33">Tom's shoes</a></li>
</ul> 
```

这是最后一个有问题的项目（/ideas/33）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-01-06T05:41:30.043

我在使用 jquery mobile 时遇到了类似的问题。
我有以下 HTML：

```
<ul id="searchPanel" data-role="listview" data-filter="true" class="inputData" data-filter-reveal="true"
                    data-filter-placeholder="I'm looking for..."> 
```

JQM 在 DOM 中将其呈现为：

```
<input data-type="search" placeholder="I" m="" looking="" for...'="" data-lastval=""> 
```

我的解决方案是使用 ' 或 ' 而不是单引号 '。
参考[https://docs.webplatform.org/wiki/html/entities#HTML_Entities_Table](https://docs.webplatform.org/wiki/html/entities#HTML_Entities_Table)
以下是用作撇号或单引号的紧密匹配项

```
&lsquo; OR &rsquo; OR &prime; 
```

呈现为：' OR ' OR ' （这三个都不同于单引号 ' 但它们看起来很相似）

因此，作为一种解决方法，您应该替换从 PG SQL 获得的文本中的单引号，并选择上述三个字符中的任何一个作为替换。

# java - 数组列表和链接列表的区别

> ID：11667955
> 
> 赞同：16
> 
> 时间：2012-07-26T11:08:57.273
> 
> 标签：java, arraylist, collections, linked-list

> **可能重复：**
> [何时在 ArrayList<> 上使用 LinkedList<>？](https://stackoverflow.com/questions/322715/when-to-use-linkedlist-over-arraylist)
> [何时在数组/数组列表上使用链表？](https://stackoverflow.com/questions/393556/when-to-use-a-linked-list-over-an-array-array-list)

什么时候应该使用arrayList，什么时候应该使用LinkedList？

我应该什么时候使用`TreeSet`,`LinkedHashSet`和`HashSet`?

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-07-26T11:16:22.607

```
When should i use arrayList and when should I go for LinkedList? 
```

Arraylist 像数组一样维护索引。因此，如果想要比 put 更频繁的 get 操作，那么最好使用 arraylist。

LinkedList 维护指向元素的指针。你不能像在arraylist中那样指定一个特定的索引。但是linkedlist的优势在于它们不需要像在arraylist中那样来回移动来维护连续索引。因此，链表中的获取操作成本很高，因为您必须通过指针才能访问您的元素。但是与 arraylist 相比，put 操作是好的。你只需要连接到指针就可以了。

```
When should I use TreeSet, LinkedHashSet and HashSet? 
```

区别仅在于订购。treeset 元素需要维护由您的成员对象定义的特定顺序。

# c++ - 复制操作省略后对象无效？

> ID：11667959
> 
> 赞同：0
> 
> 时间：2012-07-26T11:09:22.270
> 
> 标签：c++, most-vexing-parse

> **可能重复：**
> [为什么使用空括号调用不带参数的构造函数是错误的？](https://stackoverflow.com/questions/180172/why-is-it-an-error-to-use-an-empty-set-of-brackets-to-call-a-constructor-with-no)
> [最令人头疼的解析：为什么不 A a(()); 工作？](https://stackoverflow.com/questions/1424510/most-vexing-parse-why-doesnt-a-a-work)

这让我很生气。也许它太简单了。

```
struct Foo
{
  Foo() {}
  Foo(const Foo& f) {}
  void work() {}
};

int main()
{
  Foo f( Foo() );
  f.work();
} 
```

GCC 4.6 给了我：

```
error: request for member ‘work’ in ‘f’, which is of non-class type ‘Foo(Foo (*)())’ 
```

省略复制操作后，有效代码可能如下所示：

```
int main()
{
  Foo f;
  f.work();
} 
```

但是为什么我不能打电话`work()`？？

编辑：

是的，重复（见下文）。第一次搜索时没有找到原始帖子，因为这个症状的来源位于我没想到的地方。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-26T11:12:55.350

因为`Foo f( Foo() );`是函数声明。

我想你想要：`Foo f;`

或者如果您想复制构造：

```
Foo f( (Foo()) ); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-26T11:13:56.317

f 实际上是 main 函数中的函数声明。尝试

```
Foo f((Foo())); // to make the definition of f explicit enough. 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-26T11:17:21.210

n3337 8.2

> The ambiguity arising from the similarity between a function-style cast and a declaration mentioned in 6.8 can also occur in the context of a declaration. In that context, the choice is between a function declaration with a redundant set of parentheses around a parameter name and an object declaration with a function-style cast as the initializer. Just as for the ambiguities mentioned in 6.8, the resolution is to consider any construct that could possibly be a declaration a declaration. [ Note: A declaration can be explicitly disambiguated by a nonfunction-style cast, by an = to indicate initialization or by removing the redundant parentheses around the parameter name. — end note ] [ Example:

```
struct S {
S(int);
};
void foo(double a) {
S w(int(a));
//function declaration
S x(int());
//function declaration
S y((int)a);
//object declaration
S z = int(a);
//object declaration
} 
```

> — end example ]

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-26T11:18:00.607

C++ parser interprets `Foo f(Foo());` expression as the function declaration with the signature `Foo(Foo(*)())`, i.e. a function returning Foo and taking a function pointer to the function returning Foo. Adding explicit parenthesis around the argument like so `Foo f((Foo()));` will resolve the ambiguity. But consider actually just doing `Foo f;` which avoids redundant code.

# php - PHPUnit 代码覆盖所有测试文件加上另一个目录

> ID：11667970
> 
> 赞同：2
> 
> 时间：2012-07-26T11:10:03.123
> 
> 标签：php, xml, unit-testing, phpunit, code-coverage

我们正在努力使用 phpunit 从覆盖率报告中获得所需的结果。

以前，我们**只**捕获与单元测试相关联的文件的代码覆盖率（我相信这是白名单为空时的默认设置）。

现在我们想要一份覆盖率报告，其中包括我们已经测试过的文件，以及一个或两个特定目录（其中包含 0% 覆盖率的文件）。这应该给我们更现实的统计数据。

我们使用 xml 配置文件来尝试完成此操作：

```
<filter>
    <whitelist processUncoveredFilesFromWhitelist="true">
        <directory suffix=".php">php/lib/</directory>
    </whitelist>
    <blacklist>
        <directory suffix=".php">/usr/share/php/SymfonyComponents/YAML</directory>
    </blacklist>
</filter> 
```

但是，此配置现在仅包含我们白名单中指定目录的覆盖率报告。它没有捕获我们为其编写单元测试的其他文件的覆盖率。

如何实现代码覆盖率配置，以捕获以下覆盖率：

1) 所有已经有与之关联的单元测试的文件

2) 其他可配置目录

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T21:44:40.223

以下是我们用来覆盖测试未涵盖的目录的示例。该部分涵盖了应用程序。我们有不同的文件扩展名，因此也包含目录后缀示例。

```
<!-- Add files not covered with tests into Code Coverage Analysis -->
<filter>
    <whitelist addUncoveredFilesFromWhitelist="true">
        <directory suffix=".class">.</directory>
        <directory suffix=".fn">.</directory>
        <directory suffix=".php">lib/UTIL</directory>

        <exclude>
            <file>lib/UTIL/AJAX.class</file>
            <file>lib/UTIL/GetDump.fn</file>
            <directory>ExternalLibraries</directory>
        </exclude>
    </whitelist>
</filter> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T12:08:20.603

IIRC，PHPUnit`<whitelist>`如果出现则使用，如果没有，则使用`<blacklist>`. 尝试`<whitelist>`完全删除。

# java - 日志记录和普通文件写入有什么区别？

> ID：11667971
> 
> 赞同：1
> 
> 时间：2012-07-26T11:10:03.957
> 
> 标签：java

我只是想知道普通文件写入和日志记录之间的区别。当然日志记录用于记录异常、错误、安装细节和其他重要数据。但这也可以使用普通的文件写入来完成。我已经看到记录使用锁来共享资源（在 java 中）。除此之外，使用日志记录还有什么特别或非常重要的原因吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T11:44:25.593

日志记录是将数据写入某个流以记录应用程序中发生的事件。请注意，您不一定必须登录到文件。例如，您可以登录到控制台。

某些应用程序需要系统中用户活动的“审核日志”。这是日志记录满足非常特定的业务需求的情况。

请注意，您可以写入文件而不是记录。例如，如果您使用文件的存在来为进程创建锁，则您已写入文件，但未记录。

但总的来说，日志记录只是在某处写入事件数据。“启动”、“进入方法 x”、“发生异常”都是**事件**。我认为这确实定义了“日志”与具有不同语义的文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-26T11:52:20.070

写入文件是进行日志记录的一种可能性。日志记录是“保存重要事件以备后用”之类的更通用术语。如果您查看日志框架，您会发现它们允许您将写入文件作为一种选择。但是它们为您提供了更多配置选项，例如日志记录级别、不同的日志记录接收器等。当然可以通过将某些信息写入文件来自行实现这一点。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-26T12:21:36.477

记录意味着附加到文件。通过写入，您可以覆盖以前的数据，而附加您不能。这只是我的想法。

# php - 不知道我做错了什么php登录脚本

> ID：11667972
> 
> 赞同：0
> 
> 时间：2012-07-26T11:10:12.563
> 
> 标签：php, mysql, login, phpmyadmin

按照指示，我必须在虚线之间插入代码。应该刷新并查看“存在”我有正确的数据库、表，我很确定一切，但我认为不存在。我应该继续遵循指南还是我搞砸了？

如果我正确地遵循它，是否有人有保证工作的指南？

我的 login.php

```
<?php
include 'core/init.php';

-----------------------------------------
if (user_exists('alex') === true) {
echo "exists";
}
die('no exist');
-------------------------------------------
if (empty($_POST) === false) {
    $username = $_POST['username'];
    $password = $_POST['password'];

    if (empty($username) === true || empty($password) === true) {
        $errors[] = 'You need to enter a username and password';
    } else if (user_exists($username) === false) {
        $errors[] = 'We can not find that user';
    }
}
    ?> 
```

我有 init.php

```
<?php
session_start();
error_reporting(0);

require 'database/connect.php';
require 'functions/general.php';
require 'functions/users.php';

$errors = array();
?> 
```

我有 users.php

```
<?php
function user_exists($username) {
    $username = sanitize($username);
    $query = mysql_query("SELECT COUNT('user_id') FROM 'users' WHERE 'username' = '$username'");
    return (mysql_result($query, 0) == 1) ? true : false;
}
?>

i have general.php
<?php
function sanitize($data) {
    return mysql_real_escape_string($data);
}
?> 
```

我用：

```
<form action="login.php" method="post"> 
```

注意：如果有人熟悉 phpacademy，我会按照他的指南进行操作

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T11:15:10.493

你`die`总是被调用，你应该将你的代码更改为：

```
if (user_exists('alex') === true) {
    echo "exists";
}
else{
   die('no exist');
} 
```

# php - Symfony2 中不推荐使用的方法 addValidation 和类 CallbackValidator

> ID：11667976
> 
> 赞同：7
> 
> 时间：2012-07-26T11:10:23.373
> 
> 标签：php, symfony-2.1

我有个问题。我需要验证表单类型类中不在实体中的字段。以前我使用过这段代码：

```
$builder->addValidator(new CallbackValidator(function(FormInterface $form){
    if (!$form['t_and_c']->getData()) {
        $form->addError(new FormError('Please accept the terms and conditions in order to registe'));
    }
})) 
```

但由于 Symfony 2.1 方法`addValidator`和类`CallbackValidator`已被弃用。有谁知道我应该改用什么？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-21T09:12:45.953

我是这样做的：

```
add('t_and_c', 'checkbox', array(
            'property_path' => false,
            'constraints' => new True(array('message' => 'Please accept the terms and conditions in order to register')),
            'label' => 'I agree')) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-26T12:13:26.697

该接口`FormValidatorInterface`已被弃用，将在 Symfony 2.3 中删除。

> `FormEvents::POST_BIND`如果您使用此接口实现了自定义验证器，则可以用侦听（或任何其他事件）的事件侦听器替换它们 `*BIND`。如果您使用了 CallbackValidator 类，您现在应该将回调直接传递给`addEventListener`.

通过[https://github.com/symfony/symfony/blob/master/UPGRADE-2.1.md#deprecations](https://github.com/symfony/symfony/blob/master/UPGRADE-2.1.md#deprecations)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-06-05T09:51:58.637

For anyone else looking for help changing their validators to event subscribers (as it is slightly different to normal subscribers) follow this:

## Step 1

Change:

`$builder->addValidator(new AddNameFieldValidator());`
to
`$builder->addEventSubscriber(new AddNameFieldSubscriber());`

## Step 2

Replace your validator class (and all the namespaces) to a subscriber class. Your subscriber class should look like the following:

```
// src/Acme/DemoBundle/Form/EventListener/AddNameFieldSubscriber.php
namespace Acme\DemoBundle\Form\EventListener;

use Symfony\Component\Form\FormEvent;
use Symfony\Component\Form\FormEvents;
use Symfony\Component\Form\FormError;
use Symfony\Component\EventDispatcher\EventSubscriberInterface;

class AddNameFieldSubscriber implements EventSubscriberInterface
{
    public static function getSubscribedEvents()
    {
        return array(FormEvents::POST_BIND => 'postBind');
    }

    public function postBind(FormEvent $event)
    {
        $data = $event->getData();
        $form = $event->getForm();

        $form->addError(new FormError('oh poop'))
    }
} 
```

**You do not need to register the subscriber in a service file (yml or otherwise)**

* * *

Reference: [http://symfony.com/doc/2.2/cookbook/form/dynamic_form_modification.html#adding-an-event-subscriber-to-a-form-class](http://symfony.com/doc/2.2/cookbook/form/dynamic_form_modification.html#adding-an-event-subscriber-to-a-form-class)

# android - 使用android将图像上传到服务器

> ID：11667981
> 
> 赞同：0
> 
> 时间：2012-07-26T11:10:33.970
> 
> 标签：android, web-services

我正在尝试将图像上传到服务器。为此，我添加了 jar 文件，例如 apache-mime4j、http 客户端、httpcore 和 httpmime。

我的代码如下..

```
 HttpClient httpClient = new DefaultHttpClient();
    HttpPost httpPost = new HttpPost(url);

    MultipartEntity multiPart = new MultipartEntity();
    multiPart.addPart("my_picture", new FileBody(new File(imagePath.toString())));

    httpPost.setEntity(multiPart);
    HttpResponse res = httpClient.execute(httpPost);

    BufferedReader reader = new BufferedReader(new InputStreamReader(response.getEntity().getContent()));
    String json = reader.readLine();
    JSONTokener tokener = new JSONTokener(json);
    JSONObject object = (JSONObject) new JSONTokener(json).nextValue();
    JSONArray  data = object.getJSONArray("data");
    System.out.println("posted finalResult"+data);

    if (responseEntity != null) {
        responseEntity.consumeContent();
    }

    httpclient.getConnectionManager().shutdown(); 
```

问题是我在生产线上遇到错误

```
multiPart.addPart("my_picture", new FileBody(new File(imagePath.toString()))); 
```

在单击该错误时，我得到“配置构建路径”。

任何人都请告诉我我的代码有什么问题。

提前谢谢。

# favorites - 我如何在 android 的表格布局中添加单选按钮

> ID：11667982
> 
> 赞同：1
> 
> 时间：2012-07-26T11:10:37.800
> 
> 标签：favorites

我有一个表格布局并且有一些行。在每一行中，我都有一个单选按钮。我的问题是这样的。

1.  我怎样才能使一次只选中一个单选按钮，而其他单选按钮必须取消选中。一次只选中一个。

2.  每当我检查任何单选按钮时，底部都会出现一个由 4 个按钮组成的按钮栏。我已经制作了一个按钮栏，该按钮栏将保留在底部，但我希望它仅在我单击任何单选按钮时才会出现。

这是我的 xml 文件

```
<?xml version="1.0" encoding="utf-8"?>
        <RelativeLayout
            xmlns:android="http://schemas.android.com/apk/res/android"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            >
        <LinearLayout android:id="@+id/LinearLayout01"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            xmlns:android="http://schemas.android.com/apk/res/android"
            android:orientation="vertical"
            android:background="#C85A17">
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
            android:layout_gravity="left"
    android:orientation="horizontal" > 

        <ScrollView 
            xmlns:android="http://schemas.android.com/apk/res/android"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:orientation="vertical"> 

        <TableLayout android:id="@+id/table"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            xmlns:android="http://schemas.android.com/apk/res/android"
            android:orientation="vertical"
            android:background="#C85A17">

    <View android:layout_height="1dip" android:background="#FF909090" /> 
    <TableRow android:id="@+id/top1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:orientation="horizontal">

        <ImageView 
            android:id="@+id/image" 
            android:src="@drawable/music"
            android:scaleType="centerCrop"
            android:layout_marginTop="15dip"
            android:layout_marginBottom="10dip" 
            android:layout_marginLeft="10dip"
            android:layout_marginRight="10dip" 
            android:cropToPadding="true" /> 

        <TextView
            android:id="@+id/text1"
            android:text="Cocktail"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:textSize="15dip"
            android:layout_marginTop="10dip"
            android:layout_marginBottom="10dip"
            android:layout_marginLeft="10dip"/>
    <RadioGroup
        android:id="@+id/radiogroup1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" >
        <RadioButton
            android:id="@+id/radio1"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:checked="true"
            android:layout_marginLeft="20dip"/>
        </RadioGroup>
    </TableRow>
    <View android:layout_height="1dip" android:background="#FF909090" /> 
    <TableRow android:id="@+id/top2"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:orientation="horizontal">

        <ImageView 
            android:id="@+id/image" 
            android:src="@drawable/music"
            android:scaleType="centerCrop"
            android:layout_marginTop="15dip"
            android:layout_marginBottom="10dip" 
            android:layout_marginLeft="10dip"
            android:layout_marginRight="10dip" 
            android:cropToPadding="true" /> 

        <TextView
            android:id="@+id/text2"
            android:text="Bol Bachchan"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:textSize="15dip"
            android:layout_marginTop="10dip"
            android:layout_marginBottom="10dip"
            android:layout_marginLeft="10dip"/>
    <RadioGroup
        android:id="@+id/radiogroup2"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" >
        <RadioButton
            android:id="@+id/radio2"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_marginLeft="20dip"/>
        </RadioGroup>
        </TableRow>
    <View android:layout_height="1dip" android:background="#FF909090" /> 
    <TableRow android:id="@+id/top3"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:orientation="horizontal">

        <ImageView 
            android:id="@+id/image" 
            android:src="@drawable/music"
            android:scaleType="centerCrop"
            android:layout_marginTop="15dip"
            android:layout_marginBottom="10dip" 
            android:layout_marginLeft="10dip"
            android:layout_marginRight="10dip" 
            android:cropToPadding="true" /> 

        <TextView
            android:id="@+id/text3"
            android:text="Rowdy Rathor"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:textSize="15dip"
            android:layout_marginTop="10dip"
            android:layout_marginBottom="10dip"
            android:layout_marginLeft="10dip"/>
    <RadioGroup
        android:id="@+id/radiogroup3"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" >
        <RadioButton
            android:id="@+id/radio3"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_marginLeft="20dip"/>
        </RadioGroup>
    </TableRow>
    <View android:layout_height="1dip" android:background="#FF909090" /> 
    <TableRow android:id="@+id/top4"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:orientation="horizontal">

        <ImageView 
            android:id="@+id/image" 
            android:src="@drawable/music"
            android:scaleType="centerCrop"
            android:layout_marginTop="15dip"
            android:layout_marginBottom="10dip" 
            android:layout_marginLeft="10dip"
            android:layout_marginRight="10dip" 
            android:cropToPadding="true" /> 

        <TextView
            android:id="@+id/text4"
            android:text="Shanghai"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:textSize="15dip"
            android:layout_marginTop="10dip"
            android:layout_marginBottom="10dip"
            android:layout_marginLeft="10dip"/>
    <RadioGroup
        android:id="@+id/radiogroup4"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" >
        <RadioButton
            android:id="@+id/radio4"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_marginLeft="20dip"/>
        </RadioGroup>
    </TableRow>
    <View android:layout_height="1dip" android:background="#FF909090" /> 
    <TableRow android:id="@+id/top5"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:orientation="horizontal">

        <ImageView 
            android:id="@+id/image" 
            android:src="@drawable/music"
            android:scaleType="centerCrop"
            android:layout_marginTop="15dip"
            android:layout_marginBottom="10dip" 
            android:layout_marginLeft="10dip"
            android:layout_marginRight="10dip" 
            android:cropToPadding="true" /> 

        <TextView
            android:id="@+id/text5"
            android:text="Jannat 2"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:textSize="15dip"
            android:layout_marginTop="10dip"
            android:layout_marginBottom="10dip"
            android:layout_marginLeft="10dip"/>
    <RadioGroup
        android:id="@+id/radiogroup5"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" >
        <RadioButton
            android:id="@+id/radio5"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_marginLeft="20dip"/>
        </RadioGroup>
    </TableRow>
    <View android:layout_height="1dip" android:background="#FF909090" /> 
    <TableRow android:id="@+id/top6"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:orientation="horizontal">

        <ImageView 
            android:id="@+id/image" 
            android:src="@drawable/music"
            android:scaleType="centerCrop"
            android:layout_marginTop="15dip"
            android:layout_marginBottom="10dip" 
            android:layout_marginLeft="10dip"
            android:layout_marginRight="10dip" 
            android:cropToPadding="true" /> 

        <TextView
            android:id="@+id/text6"
            android:text="Maximum"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:textSize="15dip"
            android:layout_marginTop="10dip"
            android:layout_marginBottom="10dip"
            android:layout_marginLeft="10dip"/>
    <RadioGroup
        android:id="@+id/radiogroup6"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" >
        <RadioButton
            android:id="@+id/radio6"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_marginLeft="20dip"/>
        </RadioGroup>
    </TableRow>
    <View android:layout_height="1dip" android:background="#FF909090" /> 
    <TableRow android:id="@+id/top7"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:orientation="horizontal">

        <ImageView 
            android:id="@+id/image" 
            android:src="@drawable/music"
            android:scaleType="centerCrop"
            android:layout_marginTop="15dip"
            android:layout_marginBottom="10dip" 
            android:layout_marginLeft="10dip"
            android:layout_marginRight="10dip" 
            android:cropToPadding="true" /> 

        <TextView
            android:id="@+id/text7"
            android:text="Teri Meri Kahani"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:textSize="15dip"
            android:layout_marginTop="10dip"
            android:layout_marginBottom="10dip"
            android:layout_marginLeft="10dip"/>
    <RadioGroup
        android:id="@+id/radiogroup7"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" >
        <RadioButton
            android:id="@+id/radio7"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_marginLeft="20dip"/>
        </RadioGroup>
    </TableRow>
    <View android:layout_height="1dip" android:background="#FF909090" /> 

</TableLayout>    
</ScrollView>
</LinearLayout>
    <LinearLayout
     android:layout_width="fill_parent"
     android:layout_height="wrap_content"
        android:orientation="horizontal"
        android:layout_gravity="right">
<RadioGroup
        android:id="@+id/radioSex"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" 
        >

        <RadioButton
            android:id="@+id/radioMale"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"

            android:checked="true" />

        <RadioButton
            android:id="@+id/radioFemale"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
             />
        <RadioButton
            android:id="@+id/radioMale"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
             />

        <RadioButton
            android:id="@+id/radioFemale"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            />
        <RadioButton
            android:id="@+id/radioMale"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
             />

        <RadioButton
            android:id="@+id/radioFemale"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
             />

    </RadioGroup>
</LinearLayout>         
</LinearLayout>
    <LinearLayout
     android:id="@+id/buttonBar"
     android:layout_width="fill_parent"
     android:layout_height="wrap_content"
     android:layout_alignParentBottom="true"
     style="@android:style/ButtonBar"
     android:gravity="center"
     >
<Button android:id="@+id/share" android:layout_width="wrap_content"
    android:layout_height="wrap_content" android:layout_weight="1"
    android:text="Share" />

<Button android:id="@+id/activate" android:layout_width="wrap_content"
    android:layout_height="wrap_content" android:layout_weight="1"
    android:text="Activate" />
<Button android:id="@+id/listen" android:layout_width="wrap_content"
    android:layout_height="wrap_content" android:layout_weight="1"
    android:text="Listen" />

<Button android:id="@+id/deactivate" android:layout_width="wrap_content"
    android:layout_height="wrap_content" android:layout_weight="1"
    android:text="Deactivate" />
</LinearLayout>
    </RelativeLayout> 
```

请帮帮我。

提前致谢...

# java - 将spring aop添加到不覆盖父类方法的类的方法中

> ID：11667983
> 
> 赞同：0
> 
> 时间：2012-07-26T11:10:38.630
> 
> 标签：java, spring, spring-aop

我有两节课

```
AbstractWorkFlow

ProductionWorkFlow 
```

`AbstractWorkFlow`已经完全实现`executeWorkFlow`了我没有覆盖的方法`ProductionWorkFlow`。

现在我正在向该`ProductionWorkFlow.executeWorkFlow`方法添加一个 Spring AOP。

```
<aop:pointcut id="businessService"
         expression="execution(* ProductionWorkFlow.executeWorkFlow())" />
<aop:around pointcut-ref="businessService"  method="log"/> 
```

但是即使执行了 executionWorkFlow，我的方面似乎也没有被触发。关于这个问题的任何想法。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-26T11:16:48.167

尝试将切入点替换为：

```
execution(* AbstractWorkflow+.executeWorkflow()); 
```

您的建议不匹配，因为，因为`ProductionWorkFlow`不覆盖`executeWorkFlow`，`execution(* ProductionWorkFlow.executeWorkflow())`不存在。

如果您真的只想建议`ProductionWorkFlow`，而不是其他实现，请将其更改为：

```
execution(* AbstractWorkFlow+.executeWorkflow()) && target(ProductionWorkFlow); 
```

# python - 删除文件夹中包含文件的文件和子文件夹

> ID：11667985
> 
> 赞同：1
> 
> 时间：2012-07-26T11:10:46.453
> 
> 标签：python

我正在使用以下代码删除一个文件夹中的所有文件，该文件夹由我不会被删除的 zip 文件和一个 txt 文件和一个由许多 txt 文件和两个带有文件的子文件夹组成的子文件夹：

```
for file_object in os.listdir(folder_path):
    file_object_path = os.path.join(folder_path, file_object)
    print file_object_path
    if os.path.isfile(file_object_path):
        if 'zip.zip' in file_object:
            pass
        else:
            print ('       Deleting file ' + file_object)
            os.unlink(file_object_path)
    else:
        print ('       Deleting folder ' + file_object)
        rmtree(file_object_path) 
```

但结果是错误 5 访问被拒绝删除子文件夹。主文件夹中的其他文件没有被删除，因为要检查的第一个文件实际上是访问被拒绝的子文件夹。我希望有人理解我遇到的问题的描述:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-26T11:19:10.013

[python-shutil-rmtree-失败](https://stackoverflow.com/questions/2656322/python-shutil-rmtree-fails-on-windows-with-access-is-denied)。我错过了注意到您已经使用 rmtree。

# c++ - 如何获得覆盖另一堆矩形的最小数量矩形？

> ID：11667988
> 
> 赞同：7
> 
> 时间：2012-07-26T11:10:57.990
> 
> 标签：c++, algorithm, merge, computational-geometry

假设我有一堆矩形，其中一些相交，一些孤立。例如。

```
    +--------------- + +-------- +
    | | | |
    | | | |
    | 一个 | | C |
    | +---------------- + | |
    | | | | +---------+-------- +
    | | | | | |
    +---------|----- + B | | D |
              | | | |
              | | +------------------ +
              +---------------- +

    +-------- + +-------- +
    | | | |
    | E | | X |
    +-------------------+ | |
    | | +-------- +
    | | +------------ +
    | | | |
    | F | | |
    | | | 是 |
    | | | |
    +--------------------+ +------------ +

```

矩形 A、B 相交，C、D 有一个相同点，E、F 有两个相同点，X、Y 是孤立的。

我有两个问题：

1.  如何将这些矩形划分为覆盖 A、B、C、D、E、F、X、Y 的矩形也具有这样的最小计数：

```
    +---------+----- + +-------- +
    | | | | |
    | | | | |
    | | | | |
    | | +--------- + | |
    | | | | +---------+-------- +
    | | | | | |
    +---------+ | | | |
              | | | | |
              | | | +-------------------+
              +--------+----------+

    +-------- + +-------- +
    | | | |
    | | | |
    | | | |
    | | +----------+
    | | +------------ +
    | | | |
    | | | |
    | | | |
    | | | |
    +--------------------+ +-------------+

```

1.  如何用大矩形覆盖相交的矩形？像这样：

```
    +---------------------------+ +------------------------+
    | | | |
    | | | |
    | | | |
    | | | |
    | | | |
    | | | |
    | | | |
    | | | |
    | | +-------------------+
    +---------------+

    +--------------------+ +---------+
    | | | |
    | | | |
    | | | |
    | | +----------+
    | | +------------ +
    | | | |
    | | | |
    | | | |
    | | | |
    +--------------------+ +-------------+

```

对于第一季度，我完全不知道......对于第二季度，我用 C++ 编写了一些代码，但效率很差。我相信有更好的方法/算法。

```
 bool intersectRect(const Rect& rect1, const Rect& rect2) {
    /* if rect1 and rect2 intersect return true
       else return false
    */
}
Rect mergeIntersectRects(const set<Rect>& rects) {
    // suppose rects are all intersected. This function only return a smallest Rect that cover all rects.
}
set<Rect> mergeRectToRects(const set<Rect>& rectset, const Rect& rect) {
    set<Rect> _intersect_rects;
    set<Rect> _unintersect_rects;
    for(set<Rect>::const_iterator it = rectset.begin();
        it != rectset.end();
        ++it) {
        if(intersectRect(*it, rect))
            _intersect_rects.insert(*it);
        else 
            _unintersect_rects.insert(*it);
    }
    if(!_intersect_rects.empty()) {
        _intersect_rects.insert(rect);
        return mergeRectToRects(_unintersect_rects,
                                mergeIntersectRects(_intersect_rects));
    }
    else {
        _unintersect_rects.insert(rect);
        return _unintersect_rects;
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-26T12:34:45.607

首先，我假设您的矩形都是轴对齐的。

对于 Q1，一种选择是[扫描平面](http://en.wikipedia.org/wiki/Sweep_line_algorithm)，同时保持沿扫描线位于矩形内部的线段列表。当您在扫描期间发现每个矩形顶点时，您可以检查它是否修改了当前的内部段，如果是，则根据需要开始或结束一个矩形。

例如，假设您的扫描线从左向右移动：

```
                                                                     当前的
                                                                     内部的
      |                                                                  
    +-|------------- + +-------- + *
    | | | | | |
    | | | | | |
    | | 一个 | | C | |
    | | +---------------- + | | |
    | | | | | +---------+-------- + |
    | | | | | | | |
    +-|-------|----- + B | | D | *
      | | | | |
      | | | +------------------ +
      | +---------------- +
      |
    +-|---------------- + +-------- + *
    | | | | | |
    | | E | | X | |
    | |-----------------+ | | |
    | | | +-------- + |
    | | | +------------ + |
    | | | | | |
    | | F | | | |
    | | | | 是 | |
    | | | | | |
    +-|-----------------+ +------------ + *
      |

```

当扫描线位于上图所示位置时，有两个内部段。即A里面那个和那个里面(EUF)。当扫描线到达 B 的最左边缘时，我们为 A 位于左侧的部分输出一个矩形。然后我们用（AUB）的内部替换段列表中A的内部。

```
                                                                     当前的
                                                                     内部的
                |                                                        
    +---------+-|--- + +-------- + *
    | | | | | | |
    | | | | | | |
    | | | | | C | |
    | | |-------------- + | | |
    | | | | | +---------+-------- + |
    | | | | | | | |
    +---------+ |--- + B | | D | |
              | | | | | |
              | | | +------------------ + |
              +-|-------------- + *
                |
    +-----------|------ + +-------- + *
    | | | | | |
    | | | | X | |
    | |-------+ | | |
    | | | +-------- + |
    | | | +------------ + |
    | | | | | |
    | | | | | |
    | | | | 是 | |
    | | | | | |
    +-----------|--------+ +------------ + *
                |

```

对于 Q2，可以通过跟踪第一次将片段添加到列表的 x 坐标（例如“A 的左侧”）以及最小和最大 y 坐标，在同一扫描期间计算答案它在其生命周期内跨越（例如 B 的底部到 A 的顶部）。当段最终从列表中移除时（例如“B 的右侧”），然后使用这四个坐标输出一个矩形。

在预处理步骤中按字典顺序对矩形顶点进行排序将是 O(n * log n)。处理它们将是 O(log n)，因为您可以对已知的内部范围进行二进制搜索。总运行时间应该是 O(n * log n)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-26T15:05:35.990

Q1：这称为直线多边形的划分。[Rob评论](https://stackoverflow.com/questions/5919298/algorithm-for-finding-the-fewest-rectangles-to-cover-a-set-of-rectangles)的回答有很好的描述。我发现[答案](https://stackoverflow.com/questions/4701887/find-the-set-of-largest-contiguous-rectangles-to-cover-multiple-areas/4702591#4702591)中提到的[论文](http://www.cise.ufl.edu/~sahni/papers/part.pdf)很有用。

Q2：我想你不希望两个不相交区域的覆盖相交。就像 3 个矩形的覆盖，2 个矩形产生 L 和 L 的矩形交叉覆盖，但不是任何 L 矩形。

如果是这样，则可以逐步创建封面。这是一个简单的算法。

```
covers = {A}
for each rectangle R
  while there is a cover that intersects R, say C
    remove C from covers and set R = cover of R and C
  add R to covers 
```

此代码在标准形式下效率不高。结构良好的`covers`结构，它可以是高效的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-26T11:58:04.490

我会使用@Damon 建议的方法，但会使用一些空间索引结构（例如四叉树或网格）加速相邻矩形搜索。您需要其中两个，首先构建在输入矩形集上，以搜索要拆分的相交矩形，第二个构建在第一步获得的拆分矩形集上，以搜索要合并的相邻矩形。与天真的方法相比，这应该会大大加快速度。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-26T14:10:34.667

这是算法：http: [//goo.gl/aWDJo](http://goo.gl/aWDJo)

您可以阅读有关查找凸包算法的信息：[http ://ralph.cs.cf.ac.uk/papers/Geometry/boxing.pdf](http://ralph.cs.cf.ac.uk/papers/Geometry/boxing.pdf)

# sencha-touch-2 - 移动网站不以 iPhone 为中心

> ID：11667994
> 
> 赞同：0
> 
> 时间：2012-07-26T11:11:17.270
> 
> 标签：sencha-touch-2

我正在使用 Sencha Touch 2.0 构建网站的移动版本，我将移动网站基于 Sencha Touch 文档 ( [http://docs.sencha.com/touch/2-0/ ) 中提供的示例应用程序#!/guide/first_app](http://docs.sencha.com/touch/2-0/#!/guide/first_app)）。

我在[http://iphone4simulator.com/](http://iphone4simulator.com/)上测试该应用程序只是为了看看它会是什么样子，但由于某种原因它没有居中，它认为屏幕宽度是 360 像素而不是 320 像素。

我不知道如何纠正这个问题，有没有人遇到过类似的问题？

问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T11:48:36.100

实际上仔细观察，我认为问题出在[http://iphone4simulator.com/](http://iphone4simulator.com/)而不是 sencha touch。

# ios - XMPPFramework 和 OpenFire 服务器，身份验证工作，连接挂起

> ID：11667997
> 
> 赞同：2
> 
> 时间：2012-07-26T11:11:22.030
> 
> 标签：ios, xmpp, openfire, xmppframework

我正在尝试使用适用于 iOS 的 XMPPFramework 连接到 OpenFire 服务器。连接建立，身份验证完成（强制到普通），但在身份验证之后发送了一个重新协商包，没有响应。我尝试在 StackOverflow、google 和 OpenFire 支持上进行搜索，但找不到任何有用的东西。

我的 XML 转储（来自应用程序）：

```
2012-07-26 13:07:26:745 iPhoneXMPP[1777:707] iPhoneXMPPAppDelegate: xmppStream:socketDidConnect:
2012-07-26 13:07:26:749 iPhoneXMPP[1777:1c03] SEND: <?xml version='1.0'?>
2012-07-26 13:07:26:750 iPhoneXMPP[1777:1c03] SEND: <stream:stream xmlns='jabber:client' xmlns:stream='http://etherx.jabber.org/streams' version='1.0' to='xmpp.mobile-engineering.nl'>
2012-07-26 13:07:26:981 iPhoneXMPP[1777:1b03] RECV: <stream:stream xmlns:stream="http://etherx.jabber.org/streams" xmlns="jabber:client" from="xmpp.mobile-engineering.nl" id="153cc75d" stream1:lang="en" version="1.0"/>
2012-07-26 13:07:27:107 iPhoneXMPP[1777:1c03] RECV: <stream:features xmlns:stream="http://etherx.jabber.org/streams"><starttls xmlns="urn:ietf:params:xml:ns:xmpp-tls"/><mechanisms xmlns="urn:ietf:params:xml:ns:xmpp-sasl"><mechanism>DIGEST-MD5</mechanism><mechanism>PLAIN</mechanism><mechanism>CRAM-MD5</mechanism></mechanisms><compression xmlns="http://jabber.org/features/compress"><method>zlib</method></compression><auth xmlns="http://jabber.org/features/iq-auth"/></stream:features>
2012-07-26 13:07:27:113 iPhoneXMPP[1777:707] iPhoneXMPPAppDelegate: xmppStreamDidConnect:
2012-07-26 13:07:27:116 iPhoneXMPP[1777:707] SEND: <auth xmlns="urn:ietf:params:xml:ns:xmpp-sasl" mechanism="PLAIN">AGhvcHNhAGhvcHNh</auth>
2012-07-26 13:07:27:219 iPhoneXMPP[1777:1b03] RECV: <success xmlns="urn:ietf:params:xml:ns:xmpp-sasl"/>
2012-07-26 13:07:27:220 iPhoneXMPP[1777:1b03] SEND: <stream:stream xmlns='jabber:client' xmlns:stream='http://etherx.jabber.org/streams' version='1.0' to='xmpp.mobile-engineering.nl'> 
```

最后一条消息是发送给服务器的，它在那里结束。当我询问 XMPPFramework 的状态是什么时，我得到：STATE_XMPP_OPENING

我从上面的 XML 转储中得到的是身份验证成功。但下一步不是...

我在这里做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T08:28:26.407

我已经使用以下页面中提到的补丁修复了它： [https ://github.com/robbiehanson/XMPPFramework/issues/81](https://github.com/robbiehanson/XMPPFramework/issues/81)

似乎框架发送了消息，但没有监听它。我已经实现了补丁，现在可以登录 OpenFire 服务器了！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-27T07:28:44.673

嗨，我也看到了同样的问题，我只是想连接到 Jabber.org。我的 didAuthenticate 和 didNotAuthenticate 方法没有被调用。是否有我们尚未设置的通知？

我的转储：

```
2012-07-27 00:24:22:013 cloud9learning[41017:1c03] RECV: <stream:stream xmlns="jabber:client" xmlns:stream="http://etherx.jabber.org/streams" from="jabber.org" id="d528010a9f1f6e27" version="1.0"/>
2012-07-27 00:24:22:014 cloud9learning[41017:1c03] RECV: <stream:features xmlns:stream="http://etherx.jabber.org/streams"><starttls xmlns="urn:ietf:params:xml:ns:xmpp-tls"/><mechanisms xmlns="urn:ietf:params:xml:ns:xmpp-sasl"><mechanism>CRAM-MD5</mechanism><mechanism>LOGIN</mechanism><mechanism>PLAIN</mechanism><mechanism>DIGEST-MD5</mechanism><mechanism>SCRAM-SHA-1</mechanism></mechanisms><compression xmlns="http://jabber.org/features/compress"><method>zlib</method></compression><ver xmlns="urn:xmpp:features:rosterver"><optional/></ver></stream:features>
2012-07-27 00:24:22:014 cloud9learning[41017:c07] JabberManager: xmppStreamDidConnect:
2012-07-27 00:24:24:750 cloud9learning[41017:c07] SEND: <auth xmlns="urn:ietf:params:xml:ns:xmpp-sasl" mechanism="DIGEST-MD5"/>
RECV: <challenge xmlns="urn:ietf:params:xml:ns:xmpp-sasl">bm9uY2U9IlBsRlh4eGVFa1hZdnRNYVdBdVdQT1F3a0VURjVDVnl6ZWxzODZZbkxmcFE9IixyZWFsbT0iamFiYmVyLm9yZyIscW9wPSJhdXRoIixtYXhidWY9MTYzODQsY2hhcnNldD11dGYtOCxhbGdvcml0aG09bWQ1LXNlc3M=</challenge>
2012-07-27 00:24:24:841 cloud9learning[41017:4603] SEND: <response xmlns="urn:ietf:params:xml:ns:xmpp-sasl">dXNlcm5hbWU9ImNsb3VkOXRlc3QiLHJlYWxtPSJqYWJiZXIub3JnIixub25jZT0iUGxGWHh4ZUVrWFl2dE1hV0F1V1BPUXdrRVRGNUNWeXplbHM4NlluTGZwUT0iLGNub25jZT0iNzc1N0M5RUQtNjJGQy00M0VCLUIxOUYtNjlBREYzRkFBMTlFIixuYz0wMDAwMDAwMSxxb3A9YXV0aCxkaWdlc3QtdXJpPSJ4bXBwL2phYmJlci5vcmciLHJlc3BvbnNlPTUxZmY3YTFhYzI1NzM5ZTIxOGQ2MmI0Njk1NjE0ZjcwLGNoYXJzZXQ9dXRmLTg=</response>
2012-07-27 00:24:24:932 cloud9learning[41017:6e03] RECV: <success xmlns="urn:ietf:params:xml:ns:xmpp-sasl">cnNwYXV0aD1lYzE4OTI1YTY0NTZlMzMwMDg3ZTZjZmE1ZmQzMjMzZQ==</success>
2012-07-27 00:24:24:932 cloud9learning[41017:6e03] SEND: <stream:stream xmlns='jabber:client' xmlns:stream='http://etherx.jabber.org/streams' version='1.0' to='jabber.org'> 
```