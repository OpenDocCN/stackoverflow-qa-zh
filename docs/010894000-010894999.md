# StackOverflow 问答 10894000-10894999

# python - 替换numpy中的子数组

> ID：10894000
> 
> 赞同：6
> 
> 时间：2012-06-05T08:31:16.547
> 
> 标签：python, replace, numpy, indexing

给定一个数组，

```
>>> n = 2
>>> a = numpy.array([[[1,1,1],[1,2,3],[1,3,4]]]*n)
>>> a
array([[[1, 1, 1],
        [1, 2, 3],
        [1, 3, 4]],

       [[1, 1, 1],
        [1, 2, 3],
        [1, 3, 4]]]) 
```

我知道可以像这样简洁地替换其中的值，

```
>>> a[a==2] = 0
>>> a
array([[[1, 1, 1],
        [1, 0, 3],
        [1, 3, 4]],

       [[1, 1, 1],
        [1, 0, 3],
        [1, 3, 4]]]) 
```

是否可以对数组中的整行（最后一个轴）执行相同的操作？我知道这`a[a==[1,2,3]] = 11`将起作用并将匹配子数组的所有元素替换为 11，但我想替换一个不同的子数组。我的直觉告诉我要写以下内容，但结果是错误的，

```
>>> a[a==[1,2,3]] = [11,22,33]
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
ValueError: array is not broadcastable to correct shape 
```

总之，我想得到的是：

```
array([[[1, 1, 1],
        [11, 22, 33],
        [1, 3, 4]],

       [[1, 1, 1],
        [11, 22, 33],
        [1, 3, 4]]]) 
```

...当然，一般来说，n 比 2 大很多，其他轴也比 3 大，所以如果我不需要的话，我不想循环它们。

* * *

更新：（`[1,2,3]`或我正在寻找的其他任何东西）并不总是在索引 1。一个例子：

```
a = numpy.array([[[1,1,1],[1,2,3],[1,3,4]], [[1,2,3],[1,1,1],[1,3,4]]]) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-03-23T12:05:51.350

`np.all`您可以通过检查所有列是否具有`True`用于比较的值，然后使用创建的掩码替换值来实现更高的性能：

```
mask = np.all(a==[1,2,3], axis=2)
a[mask] = [11, 22, 23]

print(a)
#array([[[ 1,  1,  1],
#        [11, 22, 33],
#        [ 1,  3,  4]],
# 
#       [[ 1,  1,  1],
#        [11, 22, 33],
#        [ 1,  3,  4]]]) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-05T09:26:59.490

你必须做一些更复杂的事情来实现你想要的。

您不能像这样选择数组切片，但可以选择所需的所有特定索引。

因此，首先您需要构造一个表示您希望选择的行的数组。IE。

```
data = numpy.array([[1,2,3],[55,56,57],[1,2,3]])

to_select = numpy.array([1,2,3]*3).reshape(3,3) # three rows of [1,2,3]

selected_indices = data == to_select
# array([[ True,  True,  True],
#        [False, False, False],
#        [ True,  True,  True]], dtype=bool)

data = numpy.where(selected_indices, [4,5,6], data)
# array([[4, 5, 6],
#        [55, 56, 57],
#        [4, 5, 6]])

# done in one step, but perhaps not very clear as to its intent
data = numpy.where(data == numpy.array([1,2,3]*3).reshape(3,3), [4,5,6], data) 
```

`numpy.where`如果为真，则从第二个参数中选择，如果为假，则从第三个参数中选择。

您可以使用 where 从 3 种不同类型的数据中进行选择。第一个是一个与 具有相同形状的数组，`selected_indices`第二个只是一个单独的值（如 2 或 7）。第一个是最复杂的，因为它的形状可以广播成与 相同的形状`selected_indices`。在这种情况下，我们提供`[1,2,3]`了可以堆叠在一起以获得形状为 3x3 的数组。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-05T08:39:28.570

请注意，如果这是您想要的，您的代码示例不会创建您所说的数组。但：

```
>>> a = np.array([[[1,1,1],[1,2,3],[1,3,4]], [[1,1,1],[1,2,3],[1,3,4]]])
>>> a
array([[[1, 1, 1],
        [1, 2, 3],
        [1, 3, 4]],

       [[1, 1, 1],
        [1, 2, 3],
        [1, 3, 4]]])
>>> a[:,1,:] = [[8, 8, 8], [8,8,8]]
>>> a
array([[[1, 1, 1],
        [8, 8, 8],
        [1, 3, 4]],

       [[1, 1, 1],
        [8, 8, 8],
        [1, 3, 4]]])
>>> a[:,1,:] = [88, 88, 88]
>>> a
array([[[ 1,  1,  1],
        [88, 88, 88],
        [ 1,  3,  4]],

       [[ 1,  1,  1],
        [88, 88, 88],
        [ 1,  3,  4]]]) 
```

# java - 如何监控名称中包含“下载”等特定字符串的所有sdcard文件夹？

> ID：10894004
> 
> 赞同：1
> 
> 时间：2012-06-05T08:31:23.067
> 
> 标签：java, android, file-io, android-sdcard

在我的APP中，我想监视**所有名称包含“下载”的sdcard文件夹**，无论它们在哪个级别，如果新文件添加到这些文件夹中，我想注意自己。

该文件夹可能位于根路径的子目录中，也可能位于“子”目录中。

从现在开始，我想使用“ **FileObserver** ”，扫描所有特定文件夹并在它们上设置观察者。但这是一项巨大的工作。谁能有更好的主意？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T09:10:28.527

你可以使用这个：

```
String sdCardState = Environment.getExternalStorageState(); 
if( !sdCardState.equals(Environment.MEDIA_MOUNTED ) ) {
    displayMessage("No SD Card.");
    return;
} else {
    File root = Environment.getExternalStorageDirectory();
    lookForDownloadDirectories(root);
}

// lookForDownloadDirectories() method:

public void lookForDownloadDirectories(File dir) {
    if( dir.getName().equalsIgnoreCase("download") ) {
        doSomethingWithDownloadDirectory(dir);
    }
    String[] filesAndDirectories = dir.list();
    for( String fileOrDirectory : filesAndDirectories) {
        File f = new File(dir.getAbsolutePath() + "/" + fileOrDirectory);
        if( f.isDirectory() ) {
            lookForDownloadDirectories(f);
        }
    } 
} 
```

这是递归方法，如您所知，它耗费时间和资源......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-05T09:44:29.923

[您可以从org.apache.commons.io](http://commons.apache.org/io/api-release/index.html?org/apache/commons/io/package-summary.html)库扩展 DirectoryWalker 类。

# iphone - 向 iphone 应用程序添加可访问性会导致链接错误

> ID：10894009
> 
> 赞同：1
> 
> 时间：2012-06-05T08:32:01.650
> 
> 标签：iphone, ios, xcode4.3, reachability

我在尝试运行 Reachability.h 时不断收到这些错误

![在此处输入图像描述](../Images/5c5ec547c0e014aee2af82b9515a117c.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T08:35:30.607

您的课程引用了[Reachability](http://developer.apple.com/library/ios/#samplecode/Reachability/Introduction/Intro.html)，但您没有将其添加到您的项目中。您可能应该将`Reachability.m`文件添加到项目中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-05T09:00:42.060

转到项目`build phases`并添加以下内容

在 下`Compile sources`，按“+”图标并添加`Reachability.m`

在`Link Binary With Libraries`按下“+”图标并添加`SystemConfiguration.framework`

![检查屏幕截图](../Images/66fe4b997d1e909c663dbd3cf12c4855.png)

**更新：**

如果您收到 ARC 编译错误您将不得不在特定文件上禁用 ARC 为此，请按照此答案中的步骤操作 [如何为项目中的单个文件禁用 ARC？](https://stackoverflow.com/questions/6646052/how-can-i-disable-arc-for-a-single-file-in-a-project)

# android - 将 svn 作为 android 项目运行

> ID：10894013
> 
> 赞同：0
> 
> 时间：2012-06-05T08:32:14.003
> 
> 标签：android, svn

我在网上四处寻找，但无法找到解决问题的方法，我将项目导入 eclipse Import -> Checkout Projects using Svn。导入项目后，我尝试将其作为 android 应用程序运行，但该项目没有 Android 库，无法通过右键单击添加库 -> 构建路径，请帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-05T08:50:19.867

您刚刚签出的是一个 android 项目。

但由于没有 .project 和 .classpath 文件，因此该项目默认未设置为使用 eclipse 运行。

为了让 Eclipse 将此项目识别为 Android 项目，您需要将“Android Nature”添加到您的项目中。

.project 文件在 Eclipse 中不可见，但在将其导入 Eclipse 后，您可以在 Shelves 项目的根目录下找到它。

编辑您的 .project 文件并使其看起来像这样：

```
<?xml version="1.0" encoding="UTF-8"?>
<projectDescription>
    <name>Shelves</name>
    <comment></comment>
    <projects>
    </projects>
    <buildSpec>
        <buildCommand>
            <name>com.android.ide.eclipse.adt.ResourceManagerBuilder</name>
            <arguments>
            </arguments>
        </buildCommand>
        <buildCommand>
            <name>com.android.ide.eclipse.adt.PreCompilerBuilder</name>
            <arguments>
            </arguments>
        </buildCommand>
        <buildCommand>
            <name>org.eclipse.jdt.core.javabuilder</name>
            <arguments>
            </arguments>
        </buildCommand>
        <buildCommand>
            <name>com.android.ide.eclipse.adt.ApkBuilder</name>
            <arguments>
            </arguments>
        </buildCommand>
    </buildSpec>
    <natures>
        <nature>com.android.ide.eclipse.adt.AndroidNature</nature>
        <nature>org.eclipse.jdt.core.javanature</nature>
    </natures>
</projectDescription> 
```

还要确保你结帐

> [http://shelves.googlecode.com/svn/trunk/Shelves](http://shelves.googlecode.com/svn/trunk/Shelves)

并不是

> [http://shelves.googlecode.com/svn/trunk](http://shelves.googlecode.com/svn/trunk)

您还必须在 Shelves 项目的根目录下创建一个 .classpath 文件，并使其看起来完全如下：

```
<?xml version="1.0" encoding="UTF-8"?>
<classpath>
    <classpathentry kind="src" path="src"/>
    <classpathentry kind="src" path="gen"/>
    <classpathentry kind="con" path="com.android.ide.eclipse.adt.ANDROID_FRAMEWORK"/>
    <classpathentry kind="con" path="com.android.ide.eclipse.adt.LIBRARIES"/>
    <classpathentry kind="output" path="bin/classes"/>
</classpath> 
```

确保您的 SDK 已正确安装，并且您的 project.properties 以已安装的 SDK 版本为目标。例如，如果您安装了 SDK API-Level 10：

```
# Project target.
target=android-10 
```

然后关闭项目，再次打开，make project > Clean...，refresh，bla bla bla ...直到它工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-22T00:27:59.117

我不相信给定的答案是最佳实践。很多时候，repos 中的项目没有 .project 或 .classpath 文件（有充分的理由，但这是另一回事），因此您可以“从现有源创建项目”。

在eclipse中有两个相似但不同的选项。File->Import->Import Android Project... 和 File->New ->Project->Android->Android project from existing code。首先，提供了 .project 和 .classpath 文件，但您可能需要调整构建路径。在后者中，仅提供源，因此这是您要使用的选项。选择“现有代码中的 Android 项目”后，只需浏览到刚刚签出的目录，然后构建项目。

# asp.net-mvc - 具有排除属性的全局自定义授权属性

> ID：10894022
> 
> 赞同：1
> 
> 时间：2012-06-05T08:32:26.240
> 
> 标签：asp.net-mvc, asp.net-mvc-3, authorization, action-filter, authorize-attribute

我有两个属性：

```
public class AnonymousAllowedAttribute : AuthorizeAttribute { }

public class ActionAuthorizeAttribute : AuthorizeAttribute { 

  public override void OnAuthorization(AuthorizationContext filterContext) {

    bool skipAuthorization =
        filterContext.ActionDescriptor.IsDefined(typeof(AnonymousAllowedAttribute), true)
        ||
        filterContext.ActionDescriptor.ControllerDescriptor.IsDefined(typeof(AnonymousAllowedAttribute), true);
        if(!skipAuthorization)
            base.OnAuthorization(filterContext);
  }

  bool CustomeCheck() {
    bool result = //My Checks
    return result;
   }
} 
```

我定义`ActionAuthorizeAttribute`为全局属性。

所以我需要这3个项目：

1-如果没有登录（`!User.Identity.IsAuthenticated`）：转到登录页面`Accounts/LogIn`。我必须提到`LogIn`标有 的操作`AnonymousAllowedAttribute`。

2- 如果登录 ( `User.Identity.IsAuthenticated`) 并且操作或控制器已`AnonymousAllowedAttribute`授权，则授权为真（不需要任何授权）。

3- 如果登录 ( `User.Identity.IsAuthenticated`) 并且操作没有`AnonymousAllowedAttribute`返回`CustomeCheck()`方法

`OnAuthorization()`如您所见，我通过覆盖方法尝试第二个。

第三个如下：

```
protected override bool AuthorizeCore(System.Web.HttpContextBase httpContext){
   if(!httpContext.User.Identity.IsAuthenticated)
      return false;

   return CustomeCheck();
} 
```

但是当我没有登录时总是返回：

IIS 7.5 错误详情：

HTTP 错误 401.0 - 未经授权

使用此网址：`http://myProject/Accounts/LogIn?ReturnUrl=%2f`

问题出在哪里？怎样才能`ActionAuthorizeAttribute`实现这3个目标？

**更新**

我找到答案：问题是：`AnonymousAllowedAttribute`需要继承`Attribute`而不是`AuthorizeAttribute`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T12:29:19.460

问题是： `AnonymousAllowedAttribute`需要继承自`Attribute`而不是`AuthorizeAttribute`.

当`AnonymousAllowedAttribute`继承时`AuthorizeAttribute`需要授权，但我创建它以减少授权！

# c# - PrincipalServerDownException 在 Windows XP 上但在 Windows 7 上没有

> ID：10894031
> 
> 赞同：2
> 
> 时间：2012-06-05T08:33:13.313
> 
> 标签：c#, windows-7, active-directory, windows-xp, principalcontext

我们有一个完全信任运行的 WPF 应用程序。

应用程序的一部分检查 Windows AD 组的成员资格。

这适用于 Windows 7 机器，但不适用于 Windows XP 机器。

错误发生在以下行：

```
PrincipalContext ctx = new PrincipalContext(ContextType.Domain, "domain name"); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T10:31:27.437

根据[.NET Framework 3.5 中的管理目录安全主体一](http://msdn.microsoft.com/en-us/magazine/cc135979.aspx)文，可能不需要“域名”变量。也就是说，如果您正在访问与您的应用程序在同一个域中的 Active Directory，则不需要该域名。

> 您可以在 PrincipalContext 构造函数中使用 name 参数，以便提供要连接到的特定目录的名称。这可以是特定服务器、机器或域的名称。请务必注意，如果此参数为空，AccountManagement 将尝试根据您当前的安全上下文确定连接的默认机器或域。

该问题的解决方案或解决方法（至少在 XP 和 W7 上都对我有用）是以下更改：

```
PrincipalContext ctx = new PrincipalContext(ContextType.Domain, null); 
```

# ios - 如何在ios上更改日期格式？

> ID：10894036
> 
> 赞同：0
> 
> 时间：2012-06-05T08:33:49.880
> 
> 标签：ios, date, format

我有一个这样的日期：星期一，2012 年 6 月 4 日 14:13:00 GMT 并想删除显示的时间，以便我可以有这样的东西：星期一，2012 年 6 月 4 日

我尝试了下面的代码：

```
NSString *dateTex = [[stories objectAtIndex: storyIndex] objectForKey: @"date"];
NSLog(@"the object value is:%@",dateTex);    

//changing dates format
NSDateFormatter *dateFormatter = [[NSDateFormatter alloc] init]; 
[dateFormatter setDateFormat:@"EEE, dd MMM yyyy HH:mm:ss Z"];    
NSDate *date = [dateFormatter dateFromString:dateTex];
[dateFormatter release];

NSDateFormatter *dateFormatter2 = [[NSDateFormatter alloc] init];
[dateFormatter2 setDateFormat:@"EEE, dd MMM yyyy"];
NSString *dateText = [dateFormatter2 stringFromDate:date];
[dateFormatter2 release];
NSLog(@"the object value is:%@",dateText); 
```

日期从 xml 文件中解析并保存在`NSString dateTex`. 然后我尝试更改格式并将新日期保存在`NSString dateText`. 但是，当我尝试打印 dateText 变量时，我得到`the object value is (null)`. 有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T08:39:26.723

您可以尝试以下代码：

```
NSString *dateTex = [[stories objectAtIndex: storyIndex] objectForKey: @"date"];
NSLog(@"the object value is:%@",dateTex);    

 //changing dates format
NSDateFormatter *dateFormatter = [[NSDateFormatter alloc] init]; 
[dateFormatter setDateFormat:@"EEE, dd MMM yyyy HH:mm:ss Z"]; 
NSDate *date = [dateFormatter dateFromString:dateTex];
[dateFormatter release];

NSDateFormatter *dateFormatter = [[NSDateFormatter alloc] init];
[dateFormatter setDateStyle:NSDateFormatterShortStyle];
[dateFormatter setDateFormat:@"EEE, dd MMM yyyy"];

NSLocale *enUSPOSIXLocale = [[NSLocale alloc] initWithLocaleIdentifier:@"en_US_POSIX"];
[dateFormatter setLocale:enUSPOSIXLocale];

NSString *my_date_string = [dateFormatter stringFromDate:date];
//my_date_string returns like value Tue 05 jun 2012 
```

欢迎！

# php - 给图片水印代码添加文字水印

> ID：10894041
> 
> 赞同：1
> 
> 时间：2012-06-05T08:34:19.233
> 
> 标签：php, watermark

我正在使用效果很好的图像水印代码，但我还需要为其添加文本水印。

这是完整的代码：

```
<?php  

$main_img       = "Porsche_911_996_Carrera_4S.jpg"; // main big photo / picture
$watermark_img  = "watermark.gif"; // use GIF or PNG, JPEG has no tranparency support
$padding        = 3; // distance to border in pixels for watermark image
$opacity        = 100;  // image opacity for transparent watermark

$watermark  = imagecreatefromgif($watermark_img); // create watermark
$image      = imagecreatefromjpeg($main_img); // create main graphic

if(!$image || !$watermark) die("Error: main image or watermark could not be loaded!");

$watermark_size     = getimagesize($watermark_img);
$watermark_width    = $watermark_size[0];  
$watermark_height   = $watermark_size[1];  

$image_size     = getimagesize($main_img);  
$dest_x         = $image_size[0] - $watermark_width - $padding;  
$dest_y         = $image_size[1] - $watermark_height - $padding;

// copy watermark on main image
imagecopymerge($image, $watermark, $dest_x, $dest_y, 0, 0, $watermark_width, $watermark_height, $opacity);

// print image to screen
header("content-type: image/jpeg");   
imagejpeg($image);  
imagedestroy($image);  
imagedestroy($watermark);  

?> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-05T08:38:17.040

您可以使用[imagestring()](http://www.php.net/manual/en/function.imagestring.php)还有其他图像文本功能，因此请[查看 GD 手册](http://www.php.net/manual/en/book.image.php)

```
imagestring($im, 1, 5, 5,  'A Simple Text String', $text_color); 
```

# jquery - 对文本的淡入效果

> ID：10894050
> 
> 赞同：1
> 
> 时间：2012-06-05T08:35:08.920
> 
> 标签：jquery, html, fadein, fade

我有这个div：

```
<div id="maintext">
        <div>
        <span>This is Photoshop's</span>
        <span>version  of Lorem</span>
        <span>Ipsum. Proin gravida</span>
        <span>nibh vel velit</span>
        <span>auctor aliquet. Aenean</span>
        <span>Psollicitudin, lorem quis</span>
        <span>bibendum auctor.</span>       
        </div>
    </div> 
```

我想要，这个跨度得到淡入淡出效果。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-05T08:40:48.217

如果您需要一起显示所有元素，您可以简单地隐藏并应用`fadeIn()`到`#maintext > div`元素而不是为每个`span`元素应用淡入淡出

否则，如果您需要顺序淡入，请查看此演示：http: [//jsfiddle.net/FUZwL/](http://jsfiddle.net/FUZwL/)

```
$('#maintext span').hide().each(function(i) {
    $(this).delay(i * 200).fadeIn(200);
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T08:36:43.473

```
$(function(){
   $('#maintext span').hide().fadeIn('slow');
}); 
```

或者你可以设置你`spans`使用`display:none;`css 然后[`fadeIn`](http://api.jquery.com/fadeIn/)使用 jQuery。

```
#maintext span{
 display:none;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-05T08:36:58.017

如果您`<span>`不可见，则可以使用 jQuery ：

```
$("#maintext > div > span").fadeIn(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-05T08:41:30.637

淡入所有跨度以便使用**回调**：

```
function fadein(obj){
 obj.fadeIn('normal', function(){ 
  var next = (obj).next(); if (next.length>0) fadein(next); 
 });
}
$("#maintext span:first"); 
```

# c++ - 调用模板类错误的复制构造函数

> ID：10894058
> 
> 赞同：3
> 
> 时间：2012-06-05T08:35:50.923
> 
> 标签：c++, templates

**解决方案**

为了避免 std::auto_ptr 的问题，可以切换到 boost::shard_ptr 或 C++11 std::shared_ptr。

我收到一个错误，在我的模板类中调用了错误的复制构造函数：

```
MPINetworkCode.hpp: error: no matching function for call to 
MPILib::MPINode<double>::MPINode(MPILib::MPINode<double>)

MPINode.hpp: note: candidate is: 
MPILib::MPINode<double>::MPINode(MPILib::MPINode<double>&) 
```

以下是导致此错误的代码行。

```
int MPINetwork<WeightValue>::AddNode(const AlgorithmInterface<WeightValue>& alg,
    NodeType nodeType) {

    MPINode<WeightValue> node = MPINode<WeightValue>(alg, nodeType, 
          tempNodeId, _nodeDistribution, _localNodes);
    _localNodes.insert(std::make_pair(tempNodeId, node));
} 
```

这段代码有什么问题，为什么调用了错误的复制构造函数？在没有模板的此类的先前版本中，这工作正常。

这里是相关类的标题。模板实现在头文件中。

这里是 MPINetwork：

```
template <class WeightValue>
class MPINetwork: private boost::noncopyable {

public:

    explicit MPINetwork();

    ~MPINetwork();

    /**
     * Adds a new node to the network
     * @param alg The Algorithm of the actual node
     * @param nodeType The Type of the Node
     * @return returns the NodeId of the generated node
     */
    int AddNode(const AlgorithmInterface<WeightValue>& alg, NodeType nodeType);

//lot of code

}; 
```

第二个 MPINode，应该调用默认的复制构造函数：

```
template <class Weight>
class MPINode {
public:
    /**
     * Constructor
     * @param algorithm Algorithm the algorithm the node should contain
     * @param nodeType NodeType the type of the node
     * @param nodeId NodeId the id of the node
     * @param nodeDistribution The Node Distribution.
     * @param localNode The local nodes of this processor
     */
    explicit MPINode(const AlgorithmInterface<Weight>& algorithm, NodeType nodeType,
            NodeId nodeId,
            const boost::shared_ptr<utilities::NodeDistributionInterface>& nodeDistribution,
            const std::map<NodeId, MPINode<Weight> >& localNode);

    virtual ~MPINode();

    Time Evolve(Time time);

    void ConfigureSimulationRun(const SimulationRunParameter& simParam);

    void addPrecursor(NodeId nodeId, const Weight& weight);

    void addSuccessor(NodeId nodeId);

    NodeState getState() const;

    void setState(NodeState state);

    void receiveData();

    void sendOwnState();

private:

    void waitAll();

    std::vector<NodeId> _precursors;

    std::vector<Weight> _weights;

    std::vector<NodeId> _successors;

    std::auto_ptr<AlgorithmInterface<Weight> > _algorithm;

    NodeType _nodeType;

    NodeId _nodeId;

    const std::map<NodeId, MPINode>& _refLocalNodes;

    boost::shared_ptr<utilities::NodeDistributionInterface> _nodeDistribution;

    NodeState _state;

    std::vector<NodeState> _precursorStates;

    std::vector<boost::mpi::request> _mpiStatus;
};

template<class Weight>
MPINode<Weight>::MPINode(const AlgorithmInterface<Weight>& algorithm, NodeType nodeType,
        NodeId nodeId,
        const boost::shared_ptr<utilities::NodeDistributionInterface>& nodeDistribution,
        const std::map<NodeId, MPINode>& localNode) :
        _algorithm(algorithm.Clone()), _nodeType(nodeType), _nodeId(nodeId), _nodeDistribution(
                nodeDistribution), _refLocalNodes(localNode) {

} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-05T08:46:34.720

您的问题本质上是由该成员引起的：

```
std::auto_ptr<AlgorithmInterface<Weight> > _algorithm; 
```

`std::auto_ptr`的复制构造函数并没有真正复制，它转移了所有权。正因为如此，它对其参数采用非常量引用，而不是 const 引用。

这意味着当编译器为特化生成复制构造函数时，`MPINode`它不能生成一个接受 const 引用的复制构造函数`MPINode`，它只能生成一个接受非 const 引用的复制构造函数。

在此初始化中，临时`MPINode<WeightValue>`无法绑定到生成的复制构造函数所需的非常量引用参数。

```
MPINode<WeightValue> node = MPINode<WeightValue>(alg, nodeType, 
      tempNodeId, _nodeDistribution, _localNodes); 
```

如何解决此问题取决于您的设计。可能是提供一个用户定义的复制构造函数，它接受 const 引用并正确克隆`_algorithm`成员是正确的方法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-05T08:46:50.903

您的编译器似乎正在为您生成一个接受 type 参数的复制构造函数`MPILib::MPINode<double>&`。尝试定义您自己的采用 type 的复制构造函数`const MPILib::MPINode<double>&`。`node`in变量的初始化`AddNode`是调用复制构造函数，编译器不允许您将临时值传递给需要可修改引用的函数。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-05T08:47:12.013

因为您有一个`std::auto_ptr<AlgorithmInterface<Weight> >`（它没有采用 const 引用的“正常”复制构造函数，但不幸的是有一个不正当的引用）作为数据成员，编译器无法生成采用 const 的默认复制构造函数-参考。在这种情况下，如果可能，编译器会生成带有非常量引用的那个。您的代码尝试调用它，但它失败了。

## 你应该怎么做

*立即*禁用它，因为生成的“复制”构造函数实际上从其参数中窃取了数据成员。然后，使用您想要的行为实现您自己的复制构造函数。

# android - mapview.getoverlays() 空指针异常

> ID：10894064
> 
> 赞同：3
> 
> 时间：2012-06-05T08:36:36.457
> 
> 标签：android, google-maps, nullpointerexception, android-mapview, fatal-error

大家好，我正在尝试在我的谷歌地图上实现覆盖。但是我在运行时收到一个致命错误，它似乎是某种 NullPointerException。当我删除“overlayList = mapView.getOverlays();”时，应用程序运行正常 和“overlayList.add(t);” 代码行。任何帮助是极大的赞赏！

主要活动：

```
public class CSActivity extends MapActivity implements LocationListener  {

 MapController mapController;
 MapView mapView;
 LocationManager locationManager;

MyLocationOverlay myLocationOverlay;
MyLocationOverlay compass;

private Button click_but;
private Button exit_but;
long start;
long stop;
int x,y;
GeoPoint touchedPoint;
Drawable d;
List<Overlay> overlayList;
String towers;
int lat;
int lng;

public void onCreate(Bundle bundle) {
    super.onCreate(bundle);
    setContentView(R.layout.main); // bind the layout to the activity

    click_but = new Button(this);
    click_but = (Button)findViewById(R.id.clickBtn);
    exit_but = new Button(this);
    exit_but = (Button)findViewById(R.id.exitBtn);

    d = getResources().getDrawable(R.drawable.markerblue);
    Touchy t = new Touchy();

    overlayList = mapView.getOverlays();
    overlayList.add(t);
    /*compass = new MyLocationOverlay(CSActivity.this, mapView);
    overlayList.add(compass);*/

    // Configure the Map
    mapView = (MapView) findViewById(R.id.mapView);
    mapView.setBuiltInZoomControls(true);
    mapView.setSatellite(true);
    mapController = mapView.getController();
    mapController.setZoom(20); // Zoom 1 is world view
    locationManager = (LocationManager) getSystemService(Context.LOCATION_SERVICE);

    myLocationOverlay = new MyLocationOverlay(this, mapView);
    mapView.getOverlays().add(myLocationOverlay);

    Criteria crit = new Criteria();
    towers = locationManager.getBestProvider(crit, false);
    Location L = locationManager.getLastKnownLocation(towers);
    if (L != null){
        lat = (int) (L.getLatitude()*1E6);
        lng = (int) (L.getLongitude()*1E6);

        GeoPoint ourLocation = new GeoPoint(lat, lng);
        OverlayItem overlayItem = new OverlayItem(ourLocation, "What's up", "2nd String");
        MyItemizedOverlay custom = new MyItemizedOverlay(d, CSActivity.this);
        custom.insertPinpoint(overlayItem);
        overlayList.add(custom);
    }else{
        Toast.makeText(CSActivity.this, "Couldn't get provider", Toast.LENGTH_SHORT).show();
    }

    final CSActivity home = this;   

    exit_but.setOnClickListener(new OnClickListener(){

        @Override
        public void onClick(View v) 
        {
            Intent intent = new Intent();
            intent.setClass(home, homeActivity.class);
            startActivity(intent);

        }

    });

    click_but.setOnClickListener(new OnClickListener(){

        @Override
        public void onClick(View v) 
        {

        }

    });

}

@Override
protected boolean isRouteDisplayed() {
    return false;
}

@Override
protected void onResume() {
    super.onResume();
    myLocationOverlay.enableMyLocation();
    myLocationOverlay.enableCompass();
    locationManager.requestLocationUpdates(towers, 500, 1, this);

}

@Override
protected void onPause() {
    super.onResume();
    myLocationOverlay.disableMyLocation();
    myLocationOverlay.disableCompass();
    locationManager.removeUpdates(this);
}

class Touchy extends Overlay {
    public boolean onTouchEvent(MotionEvent e, MapView m){
        if (e.getAction() == MotionEvent.ACTION_DOWN){
            start = e.getEventTime();
            x = (int) e.getX();
            y = (int) e.getY();
             touchedPoint = mapView.getProjection().fromPixels(x, y);
        }
        if (e.getAction() == MotionEvent.ACTION_UP){
            stop = e.getEventTime();
        }
        if (stop - start > 1000){
            //Perform action
            AlertDialog alert = new AlertDialog.Builder(CSActivity.this).create();
            alert.setTitle("Pick an Option");
            alert.setMessage("I said pick!");
            alert.setButton("place a pinpoint", new DialogInterface.OnClickListener() {

                @Override
                public void onClick(DialogInterface dialog, int which) {
                    // TODO Auto-generated method stub

                    OverlayItem overlayItem = new OverlayItem(touchedPoint, "What's up", "2nd String");
                    MyItemizedOverlay custom = new MyItemizedOverlay(d, CSActivity.this);
                    custom.insertPinpoint(overlayItem);
                    overlayList.add(custom);
                }
            });

    alert.setButton2("get address", new DialogInterface.OnClickListener() {

                @Override
                public void onClick(DialogInterface dialog, int which) {
                    // TODO Auto-generated method stub

                    Geocoder geocoder = new Geocoder(getBaseContext(), Locale.getDefault());
                    try{
                        List<Address> address = geocoder.getFromLocation(touchedPoint.getLatitudeE6() / 1E6, touchedPoint.getLongitudeE6() / 1E6, 1);
                    if (address.size() > 0){
                        String display = "";
                        for (int i = 0; i<address.get(0).getMaxAddressLineIndex(); i++){

                            display += address.get(0).getAddressLine(i) + "\n";
                        }
                        Toast t = Toast.makeText(getBaseContext(), display, Toast.LENGTH_LONG);
                        t.show();
                    }
                    } catch (IOException e) {
                        // TODO Auto-generated catch block
                        e.printStackTrace();
                    } finally{

                    }
                }
            });
            alert.show();
            return true;

        }

        return false;
    }
}

@Override
public void onLocationChanged(Location location) {
    // TODO Auto-generated method stub
    lat = (int) (location.getLatitude() *1E6);
    lng = (int) (location.getLongitude()*1E6);

}

@Override
public void onProviderDisabled(String provider) {
    // TODO Auto-generated method stub

}

@Override
public void onProviderEnabled(String provider) {
    // TODO Auto-generated method stub

}

@Override
public void onStatusChanged(String provider, int status, Bundle extras) {
    // TODO Auto-generated method stub

}
} 
```

逐项叠加活动：

```
 public class MyItemizedOverlay extends ItemizedOverlay<OverlayItem>  {

private ArrayList<OverlayItem> pinpoints = new ArrayList<OverlayItem>(); 
private Context c;

public MyItemizedOverlay(Drawable defaultMarker) {
    super(boundCenter(defaultMarker));
    // TODO Auto-generated constructor stub
}

public MyItemizedOverlay(Drawable m, Context context) {
    // TODO Auto-generated constructor stub
    this(m);
    c = context;
}

@Override
protected OverlayItem createItem(int i) {
    // TODO Auto-generated method stub
    return pinpoints.get(i);
}

@Override
public int size() {
    // TODO Auto-generated method stub
    return pinpoints.size();
}

public void insertPinpoint(OverlayItem item) {
    pinpoints.add(item);
    this.populate();
}

} 
```

主要 XML：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:gravity="center" >

<com.google.android.maps.MapView
    android:id="@+id/mapView"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:layout_centerInParent="true"
    android:apiKey="(key here)"
    android:clickable="true"
    android:enabled="true" />

<Button
    android:id="@+id/clickBtn"
    style="@style/ButtonText"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentBottom="true"
    android:layout_alignParentRight="true"
    android:background="@drawable/blue"
    android:text="Click" />

<Button
    android:id="@+id/exitBtn"
    style="@style/ButtonText"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentBottom="true"
    android:layout_alignParentLeft="true"
    android:background="@drawable/red"
    android:text="Home" />

</RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-05T08:39:24.723

`mapView is null so get NPE`首先从 xml 文件中给出参考

```
mapView = (MapView) findViewById(R.id.mapView); 
```

然后得到覆盖

```
overlayList = mapView.getOverlays(); 
```

**和**

```
if(null!=overlayList&&overlayList.size()!=0){
overlayList.add(t);
} 
```

[为什么 NullPointerException ？](http://samir-mangroliya.blogspot.in/p/why-nullpointerexception-occures-in.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-05T08:42:59.657

在定义 MapView 之前，您将获得 mapview 的覆盖，因此，您将获得空指针期望..

所以先定义mapview控件，然后再使用它。

```
 mapView = (MapView) findViewById(R.id.mapView);
overlayList = mapView.getOverlays(); 
```

# python - 如何使用位串读取完整的文件

> ID：10894067
> 
> 赞同：6
> 
> 时间：2012-06-05T08:36:44.480
> 
> 标签：python, bitstring, bitstream

我想从文件中读取尽可能多的 24 位块。 当我现在不知道有多少块时，如何使用位串的**ConstBitStream来做到这一点？**

目前我这样做：

```
eventList = ConstBitStream(filename = 'events.dat')
for i in range(1000) :
    packet = eventList.read(24) 
```

（这里我要预先计算事件的数量）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-05T08:50:09.663

您可以阅读直到生成 ReadError 异常

```
try:
    while True:
        packet = eventList.read(24)
except ReadError:
    pass 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-05T09:40:56.037

捕捉`ReadError`是一个非常好的答案，但另一种方法是使用[cut](http://packages.python.org/bitstring/constbitarray.html?highlight=cut#bitstring.Bits.cut)方法，该方法返回给定长度的位串的生成器，所以只需

```
for packet in eventList.cut(24): 
```

应该管用。

# javascript - 找出 html 元素在 iframe 中的位置

> ID：10894083
> 
> 赞同：6
> 
> 时间：2012-06-05T08:38:41.167
> 
> 标签：javascript, html, position

我想找出 iframe 中元素的位置。我正在尝试使用：-

```
//Function to find the position of element on page
function getElementPosition(elem){
  var posX = 0;
  var posY = 0;
  while(elem!= null){  
        posX += elem.offsetLeft;  
        posY += elem.offsetTop;  
        elem = elem.offsetParent;
    console.log("In function:" + elem.tagName + " " + posX + " " + posY);
  }                              
 return { x : posX, y : posY };  
} 
```

要获取 iframe 的所有元素的列表，

```
var doc1 = $('#page1').get(0).contentDocument; // page1 is id of iframe element
var list1 = doc1.getElementsByTagName('*');
console.log(list1.length);                     // Printing correctly
var index = prompt("Enter element index");
var elem1 = list1[index];
var pos1 = getElementPosition(elem1);
console.log("Positions:" + pos1.x + " " + pos1.y); 
```

但这不起作用。最初 elem 不为空，但 elem.offsetParent 在每种情况下都为空。我做错了吗？

对于某些元素，它工作正常。但是对于某些元素，offsetParent 为 null，因此它们的 offsetLeft 为 0，offetTop 为 0。

有没有其他方法可以找出每个元素的位置。

提前致谢..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T18:32:50.590

您似乎已经在使用 jQuery。为什么不让 jQuery 为您完成繁重的工作？

[http://api.jquery.com/position/](http://api.jquery.com/position/)

[http://api.jquery.com/offset/](http://api.jquery.com/offset/)

# ios - 是否可以在 CentOS 的命令行中构建 XCode 项目？

> ID：10894088
> 
> 赞同：0
> 
> 时间：2012-06-05T08:39:04.707
> 
> 标签：ios, xcode, command-line

我正在创建一个可以购买和个性化的应用程序，以便买家可以将自己的应用程序上传到应用程序商店。我希望能够自动化个性化，我想知道是否可以在 CentOS 中通过命令行构建和应用程序？我知道这在 OS X 中是可能的，但是其他 unix 系统呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-08T01:57:41.357

> 我想知道是否可以在 CentOS 中通过命令行构建和应用程序？我知道这在 OS X 中是可能的，但是其他 unix 系统呢？

是的。[iphone-dev](http://code.google.com/p/iphone-dev/wiki/Portability)团队似乎已经移植到 CentOS 4 。

在 Cydia 上工作的人使用基于 Debian 的系统进行开发，所以我希望其他 linux 衍生产品可用。Cydia 的人甚至为设备烘焙了 apt-get 和 repo。

[越狱 QA](http://www.jailbreakqa.com)、[升级 iPhone 工具链](http://www.saurik.com/id/4)、[iphone-dev 可移植性](http://code.google.com/p/iphone-dev/wiki/Portability)和[将 Debian APT 引入 iPhone](http://www.saurik.com/id/1)可能会对您有所帮助。

# c# - 如何根据第二个下拉列表禁用下拉列表

> ID：10894089
> 
> 赞同：-1
> 
> 时间：2012-06-05T08:39:09.747
> 
> 标签：c#, asp.net, webforms

我有两个下拉列表，第一个如果我选择国家/地区，另一个会填充相应的州，但我想将第二个 DDL 变灰并显示一条消息，例如选择其中的州。我怎样才能做到这一点？我没有为此使用 AJAX。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T08:45:00.307

为什么不在服务器端暂时禁用它？

```
ddl2.Enabled = false; 
```

或者最好这样做，在第一次更改时，检查状态，如果选择了 smth，则启用辅助 ddl。

```
ddl1_OnSelectedIndexChanged(object sender....)
{
    if (ddl1.SelectedIndex != 0)
        ddl2.Enabled = true;
} 
```

# java - 如何解析 WSDL 中的复杂类型以在 Java 中获取其中的基本元素？

> ID：10894092
> 
> 赞同：1
> 
> 时间：2012-06-05T08:39:22.977
> 
> 标签：java, wsdl, castor, complextype, wsdl4j

我在 WSDL4J、JDOM 和 Castor 库的帮助下解析了 wsdl 文件。现在，我可以获得复杂类型，但仍然无法访问其序列中的元素。

```
<xs:element name="AddInstanceGroupsResult">
    <xs:complexType>

        <xs:annotation>
          <xs:documentation><![CDATA[
              <p>Output from an AddInstanceGroups call.</p>
           ]]></xs:documentation>
        </xs:annotation>

      <xs:sequence>
        <xs:element name="JobFlowId" type="tns:XmlStringMaxLen256" minOccurs="0">

          <xs:annotation>
            <xs:documentation><![CDATA[
                <p>The job flow ID in which the instance groups are added.</p>
             ]]></xs:documentation>
          </xs:annotation>

        </xs:element>
        <xs:element name="InstanceGroupIds" type="tns:InstanceGroupIdsList" minOccurs="0">

          <xs:annotation>
            <xs:documentation><![CDATA[
                <p>Instance group IDs of the newly created instance groups.</p>
             ]]></xs:documentation>
          </xs:annotation>

        </xs:element>
      </xs:sequence>
    </xs:complexType>
  </xs:element> 
```

例如，我可以将 AddInstanceGroupsResult 作为一个复杂类型，但我无法获取其中的基本元素（JobFlowId 和 InstanceGroupIds）..

```
case Structure.MODELGROUP:
Group modelGroup = (Group)ct;
ContentModelGroup contentModel = modelGroup.getContentModelGroup();
int count = contentModel.getParticleCount();
for (int n=0; n< count; n++){
    ElementDecl elementDecl2 = (ElementDecl)contentModel.getParticle(n);

    result.add(elementDecl2.getName());
    resultLong.add(parseParameterName(elementDecl2.getName()));
    resultType.add(elementDecl2.getType().getName()); 
```

}

有什么建议么？谢谢..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-06-25T13:15:50.090

您将需要执行以下操作：

```
Sequence seq = ct.getSequence(); 
```

然后，一旦你完成了，你就可以像获取复杂类型本身的元素一样获取该序列中的元素，即

```
for(Element el : seq.getElements())
{
     //do stuff
} 
```

# android - 运行线程不到一秒

> ID：10894104
> 
> 赞同：0
> 
> 时间：2012-06-05T08:40:42.233
> 
> 标签：android

```
new Handler().postDelayed(new Runnable() {
            public void run() {
                //code
            }
        }, secondsDelayed * 1000); 
```

即使将 1000 的值更改为 100 或 10 个线程运行至少 1 秒。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T08:52:55.027

这个方法 postDelayed，有第二个参数让它知道它应该在多长时间内开始运行。不是它应该运行多少时间，请参阅下面的方法信息

```
 public final boolean postDelayed (Runnable r, long delayMillis)
  Since: API Level 1 
```

使 Runnable r 添加到消息队列中，在经过指定的时间后运行。可运行对象将在附加此处理程序的线程上运行。参数 r 将被执行的 Runnable。delayMillis 执行 Runnable 之前的延迟（以毫秒为单位）。退货

如果 Runnable 已成功放入消息队列，则返回 true。失败时返回 false，通常是因为处理消息队列的 looper 正在退出。请注意，结果为 true 并不意味着 Runnable 将被处理——如果在消息的传递时间发生之前退出 looper，则消息将被丢弃。

****还请包括“您想做什么”，以便您还可以提供其他可能的解决方案 :)**

# hbase - 什么是 RDBMS 表最合适的 HBase 模式

> ID：10894108
> 
> 赞同：1
> 
> 时间：2012-06-05T08:41:10.357
> 
> 标签：hbase

我只是 HBase 的初学者。我想将 RDBMS 表迁移到 HBase。

RDBMS 中的表模式有点像这样：

```
Field            Type              Collation          Null    Key     Default  Extra             Privileges                       Comment
---------------  ----------------  -----------------  ------  ------  -------  ------------  --  -------------------------------  -------
id               int(16) unsigned  (NULL)             NO      PRI     (NULL)       auto_increment  select,insert,update,references         
user_id          varchar(64)       latin1_swedish_ci  NO      MUL     (NULL)                   select,insert,update,references         
type_id          int(11)           (NULL)             NO              (NULL)                   select,insert,update,references         
application_id   int(16) unsigned  (NULL)             YES     MUL     (NULL)                   select,insert,update,references         
title            varchar(128)      latin1_swedish_ci  YES             (NULL)                   select,insert,update,references         
body             text              latin1_swedish_ci  YES             (NULL)                   select,insert,update,references         
posted_time      datetime          (NULL)             YES             (NULL)                   select,insert,update,references         
template_params  text              latin1_swedish_ci  YES             (NULL)                   select,insert,update,references         
count            int(11)           (NULL)             YES             (NULL)                   select,insert,update,references         
reference_id     int(16)           (NULL)             YES             (NULL)                   select,insert,update,references         
viewer_id        varchar(64)       latin1_swedish_ci  YES             (NULL)                   select,insert,update,references 
```

这里 body 和 Templete 有 varchar 格式的 json 数据。现在我想在 HBase 中为这个表创建模式。

对此数据执行的操作：

```
1\. Activity retrival for a user id
2\. Activity retrival for a viewer id
3\. Activity retrival for particular type_id/particular type_id and user_id.
4\. Activity retrival made after t time. 
```

什么是合适的模式？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T20:18:28.893

```
4\. Activity retrival made after t time. 
```

这不会是什么大问题。HBase 存储带有时间戳的所有内容，您可以查询时间 t 之后的所有条目。

至于 1、2 和 3，您是否要快速访问？如果是这样，我建议创建三个单独的表来存储数据 - 是的，存在冗余，但查询会很快。

1.  使用 user_id 作为行键，并将其余值存储在列中
2.  使用 viewer_id 作为行键，并将其余值存储在列中
3.  使用 type_id AND user_id 作为行键，type_id 在 user_id 前面。这样，如果仅提供了 type_id ，则可以通过 type_id 和 user_id 查询，如果两者都提供，则可以通过 type_id 和 user_id 进行查询。（请注意，您必须在此处扫描，而不是使用常规的 get()。）

您可以使用[HappyBase](http://happybase.readthedocs.org/en/latest/) Python 库对此进行编码，如下所示：

```
con = happybase.Connection()
user = conn.table('user')
viewer = conn.table('viewer')
type_user = conn.table('type_user')

def insert (user_id, viewer_id, type_id):
  user.put (user_id, {'viewer_id': viewer_id, 'type_id': type_id})
  viewer.put (viewer_id, {'user_id': user_id, 'type_id': type_id})
  type_user.put (type_id + user_id, {'viewer_id': viewer_id})

def get_user (user_id):
  return user.row(user_id)

def get_viewer (viewer_id):
  return viewer.row(viewer_id)

def get_type_user (type_id, user_id):
  if user_id == "":
    rowkey = type_id
  else
    rowkey = type_id + user_id
  # Note that we use a scan here to match only type_id if it exists
  return type_user.scan(row_prefix=rowkey) 
```

# linux - wait_event_interruptible 的代码

> ID：10894113
> 
> 赞同：1
> 
> 时间：2012-06-05T08:41:36.087
> 
> 标签：linux, kernel, sleep

我在哪里可以找到内核树中 wait_event_interruptible 的代码。我能找到的是 wait_event_interruptible 被定义为 __wait_event_interruptible 在 . 但我找不到代码。请帮帮我。

考虑一个通过 wait_event_interruptible 进入睡眠状态的进程。假设现在有中断并且中断处理程序唤醒（wake_up_event_interruptible）休眠进程。为了让进程成功唤醒，wait_event_interruptible 中给出的条件是否应该为真？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-05T08:51:55.660

它在`include/linux/wait.h`：

```
#define wait_event_interruptible(wq, condition)               \
({                                                            \
    int __ret = 0;                                            \
    if (!(condition))                                         \
        __wait_event_interruptible(wq, condition, __ret);     \
    __ret;                                                    \
}) 
```

...

```
#define __wait_event_interruptible(wq, condition, ret)        \
do {                                                          \
    DEFINE_WAIT(__wait);                                      \
                                                              \
    for (;;) {                                                \
        prepare_to_wait(&wq, &__wait, TASK_INTERRUPTIBLE);    \
        if (condition)                                        \
            break;                                            \
        if (!signal_pending(current)) {                       \
            schedule();                                       \
            continue;                                         \
        }                                                     \
        ret = -ERESTARTSYS;                                   \
        break;                                                \
    }                                                         \
    finish_wait(&wq, &__wait);                                \
} while (0) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T02:10:48.933

回答你的第二个问题，是的。

Whenever an interrrupt handler (or any other thread for that matter) calls `wake_up()` on the waitqueue, all the threads waiting in the waitqueue are woken up and they check their conditions. Only those threads whose conditions are true continue, the rest go back to sleep. See [waitqueues](http://www.makelinux.net/ldd3/chp-6-sect-2) in LDD3.

Use `ctags` or `cscope` so that you can easily find definitions like these.

# c# - 有没有办法在c#中缩放按钮？

> ID：10894115
> 
> 赞同：-2
> 
> 时间：2012-06-05T08:41:49.343
> 
> 标签：c#, button, resize

我用几个按钮创建了 Windows 窗体。现在我希望当光标指向每个按钮时，按钮弹出或缩放，当光标从该按钮上移除时，它会以正常大小出现。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-05T08:46:50.883

可能看起来类似于：

```
Button.MouseEnter += new EventHandler(delegate(object Sender, EventArgs e) { Button.Size = new Size(Button.Size.Width + 50, Button.Size.Height + 50); } Button.Location = new Point(Button.Location.X - (50 / 2), Button.Location.Y - (50 / 2)});

Button.MouseLeave += new EventHandler(delegate(object Sender, EventArgs e) { Button.Size = new Size(Button.Size.Width - 50, Button.Size.Height - 50 }; Button.Location = new Point(Button.Location.X + (50 / 2), Button.Location.Y + (50 / 2)});

Button.GotFocus +=  new EventHandler(delegate(object Sender, EventArgs e) { Button.Size = new Size(Button.Size.Width + 50, Button.Size.Height + 50); } Button.Location = new Point(Button.Location.X - (50 / 2), Button.Location.Y - (50 / 2)});

Button.LostFocus += new EventHandler(delegate(object Sender, EventArgs e) { Button.Size = new Size(Button.Size.Width - 50, Button.Size.Height - 50 }; Button.Location = new Point(Button.Location.X + (50 / 2), Button.Location.Y + (50 / 2)}); 
```

您还可以循环“This.controls”事件，定义每个按钮，然后添加此事件。这是脚本，你几乎可以做任何事情 =)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-05T08:44:24.830

您可以通过鼠标输入事件中的代码更改按钮大小。并在鼠标离开事件中重置它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-05T08:46:26.333

您可以在鼠标进入和离开事件时更改按钮的大小，或者创建两个图像，一个小，另一个大，然后更改这些事件的图像。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-05T08:55:26.260

您必须同时处理 MouseEnter/MouseLeave 和 GotFocus/LostFocus 事件来解决键盘导航问题。

这样的效果在 WPF 应用程序中要容易得多。如果您需要视觉效果，也许您应该考虑创建一个 WPF 应用程序。检查[按钮上的 xaml 中的缩放转换（在 controltemplate 中）以执行“缩放”](https://stackoverflow.com/questions/2604152/scale-transform-in-xaml-in-a-controltemplate-on-a-button-to-perform-a-zoom)，其中通过缩放按钮来处理类似的要求，以一种可以附加到您想要的任何按钮的方式，避免编写代码。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-05T09:06:29.913

最简单的方法似乎是使用`SetBounds`. `Control.Scale`效果不好，因为它假定您缩放一个包含所有子控件的完整窗口，因此将始终从视口的左上角（在本例中为窗口客户端框架）进行缩放。

```
 Button b;

    public Form1()
    {
        InitializeComponent();

        b = new Button();
        b.Text = "Hover me";
        b.Top = 100;
        b.Left = 100;
        b.Size = new Size(80, 30);

        this.Controls.Add(b);

        b.MouseEnter += delegate(object sender, EventArgs e)
        {
            b.SetBounds(b.Left - 5, b.Top - 2, b.Width + 10, b.Height + 4);
        };
        b.MouseLeave += delegate(object sender, EventArgs e)
        {
            b.SetBounds(b.Left + 5, b.Top + 2, b.Width - 10, b.Height - 4);
        };
    } 
```

# c# - ASP.NET c# 修复函数库中自定义 ConfirmMessagebox 的 OK 事件

> ID：10894116
> 
> 赞同：6
> 
> 时间：2012-06-05T08:41:56.770
> 
> 标签：c#, asp.net, delegates, modal-dialog, confirm

我们制作了一个函数，通过 javascript 从 c# 动态显示 modalpopupmessage，它工作正常，但我们想添加一个参数，以便我们可以传递一个函数委托（或事件处理程序），如果用户按下 OK 按钮，它将被调用。有什么建议么？

Postdata：我们不想要典型的“确认您要按下此按钮”解决方案，而是在必要时在流程的任何部分要求确认的功能。示例：用户单击删除项目按钮，在代码隐藏中检查项目是否具有某些依赖性，因此显示一条确认消息，其中 mensaje 函数传递委托 deleteitemconfirmed()，如果用户单击确定，则调用委托...

库中的功能：

```
public static void Mensaje(string mensaje, EventHandler EventoClickLLamar, bool botoncancelar, string cssclass, Color colorfondo)
{
    string colorfondox = ColorTranslator.ToHtml(colorfondo);

    string idbotonok = EventoClickLLamar == null ? "" : EventoClickLLamar.Method.Name.Replace("_Click", "");
    string script =
        " function verifyStyle(selector) {" + " \r\n" +
        "   var rules;" + " \r\n" +
        "   var haveRule = false;" + " \r\n" +
        "                 " + " \r\n" +
        "   if (typeof document.styleSheets != \"undefined\") {   //is this supported" + " \r\n" +
        "     var cssSheets = document.styleSheets;" + " \r\n" +
        "     " + " \r\n" +
        "     outerloop:" + " \r\n" +
        "     for (var i = 0; i < cssSheets.length; i++) {" + " \r\n" +
        "         " + " \r\n" +
        "          //using IE or FireFox/Standards Compliant" + " \r\n" +
        "         rules =  (typeof cssSheets[i].cssRules != \"undefined\") ? cssSheets[i].cssRules : cssSheets[i].rules;" +
        " \r\n" +
        "         " + " \r\n" +
        "          for (var j = 0; j < rules.length; j++) {" + " \r\n" +
        "              if (rules[j].selectorText == selector) {" + " \r\n" +
        "                      haveRule = true;" + " \r\n" +
        "                     break outerloop;" + " \r\n" +
        "              }" + " \r\n" +
        "         }//innerloop" + " \r\n" +
        "         " + " \r\n" +
        "     }//outer loop" + " \r\n" +
        "   }//endif" + " \r\n" +
        "   " + " \r\n" +
        "     return haveRule;" + " \r\n" +
        " }//eof" + " \r\n" +

        " function setFading(o, b, e, d, f) {" + " \r\n" +
        " var t = setInterval" + " \r\n" +
        "         (" + " \r\n" +
        "           function () {" + " \r\n" +
        "               b = stepFX(b, e, 2);" + " \r\n" +
        "               setOpacity(o, b / 100);" + " \r\n" +
        "               if (b == e) {" + " \r\n" +
        "                   if (t) { clearInterval(t); t = null; }" + " \r\n" +
        "                   if (typeof f == 'function') { f(); }" + " \r\n" +
        "               }" + " \r\n" +
        "           }" + " \r\n" +
        "         , d / 50);" + " \r\n" +
        " }" + " \r\n" +
        " function setOpacity(e, o) {" + " \r\n" +
        "   // for IE" + " \r\n" +
        "   e.style.filter = 'alpha(opacity=' + o * 100 + ')';" + " \r\n" +
        "   // for others" + " \r\n" +
        "   e.style.opacity = o;" + " \r\n" +
        " }" + " \r\n" +
        " function stepFX(b, e, s) {" + " \r\n" +
        "   return b > e ? b - s > e ? b - s : e : b < e ? b + s < e ? b + s : e : b;" + " \r\n" +
        " }" + " \r\n" +

        " // we may consider adding frames support" + " \r\n" +
        " var w = window;" + " \r\n" +
        " // shortcut to document" + " \r\n" +
        " var d = w.document;" + " \r\n" +
        " // canvas, window width and window height" + " \r\n" +
        " var r = d.documentElement;" + " \r\n" +
        " var ww = w.innerWidth ? w.innerWidth + w.pageXOffset : r.clientWidth + r.scrollLeft;" + " \r\n" +
        " var wh = w.innerHeight ? w.innerHeight + w.pageYOffset : r.clientHeight + r.scrollTop;" + " \r\n" +
        " // create a block element" + " \r\n" +
        " var b = d.createElement('div');" + " \r\n" +
        " b.id = 'Message';" + " \r\n" +
        " b.className = '" + cssclass + "' || '';" + " \r\n" +
        " b.style.cssText = 'top:-9999px;left:-9999px;position:absolute;white-space:nowrap;z-index: 1001;';" +
        " \r\n" +
        " // classname not passed, set defaults" + " \r\n" +
        " if (!verifyStyle(\"." + cssclass + "\")) {" + " \r\n" +
        "   b.style.margin = '0px 0px';" + " \r\n" +
        "   b.style.padding = '8px 8px';" + " \r\n" +
        "   b.style.border = '1px solid #A4BED0';" + " \r\n" +
        "   b.style.backgroundColor = '#E0ECF1';" + " \r\n" +
        " }" + " \r\n" +
        " var bx = d.createElement('div');" + " \r\n" +
        " bx.style.cssText = 'position: absolute;left:0px;top:0px;width:100%;height:100%;text-align:center;z-index: 1000;background-color: " + //va seguido sin salto
        colorfondox + ";opacity:0.5;filter:alpha(opacity=50);'" + " \r\n" +
        " d.body.insertBefore(bx, d.body.firstChild);" + " \r\n" +
        " d.body.insertBefore(b, d.body.firstChild); " + " \r\n" +
        " // write HTML fragment to it  " + " \r\n" +
        " b.innerHTML = '<table><tr><td>" + mensaje + "</td></tr><tr><td align=\"center\">" +

        (string.IsNullOrEmpty(idbotonok)
        ? "<input type=\"submit\" value=\"Aceptar\" onClick=\"disabled=true;setFading(b, 100, 0, 1000, function () { d.body.removeChild(bx); d.body.removeChild(b); });\" >"
        : "<input type=\"submit\" value=\"Aceptar\" onClick=\"__doPostBack(\\'" + idbotonok + "\\',\\'\\')\" id=\"" + idbotonok + "\" >") +

        (botoncancelar
        ? "<input type=\"submit\" value=\"Cancelar\" onClick=\"disabled=true;setFading(b, 100, 0, 1000, function () { d.body.removeChild(bx); d.body.removeChild(b); });\" >"
        : "") +

        "</td></tr></table>';" + " \r\n" +
        " // save width/height before hiding " + " \r\n" +
        " var bw = b.offsetWidth;" + " \r\n" +
        " var bh = b.offsetHeight;" + " \r\n" +
        " // hide, move and then show" + " \r\n" +
        " b.style.display = 'none';" + " \r\n" +
        " b.style.top = (wh / 2 - bh / 2) + 'px'; //center" + " \r\n" +
        " b.style.left = (ww / 2 - bw / 2) + 'px'; //center" + " \r\n" +
        " b.style.display = 'block';" + " \r\n";

    ScriptManager.RegisterClientScriptBlock((Page)HttpContext.Current.Handler, typeof(Page), "mensaje", script, true);
} 
```

测试页面：

```
public partial class Test: Page
{
    protected void Page_Load(object sender, EventArgs e)
    {
    }

    btnDeleteItem_Click(object sender, EventArgs e)
    {
        //DB checks
        ....
        ....
        //After x checks against Database we see the item has some dependency so we ask for confirmation
        FunctionsLibrary.Mensaje("This Item has x dependency, are you sure you want to delete it?", btnDeleteItemConfirmed_Click, true, "cssclassx", System.Drawing.Color.Gray);
    }

    btnDeleteItemConfirmed_Click(object sender, EventArgs e)
    {
        //delete item definitively, handle dependencies etc...
    }
} 
```

我们无法使用的选项（以防我们走上正轨但出了点问题）：

*   案例 1：（在我们的示例代码中实现的那个）使用 EventHandler + __doPostBack，因此如果您在页面中定义了 buttonid_click，它将在回发时被调用。（事件没有上升......我们认为这是因为我们没有在页面加载中添加 Ok 控件......这给了我们案例 2）

*   案例2：保存传递的委托函数，注册事件Page.Load+=GetPostBackControlID()，在下面的页面加载GetPostBackControlID()被调用，这里我们检查点击的控件id是不是我们的OK按钮，如果是调用委托函数

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-07T09:46:16.380

所以你想和 Javascript 对话框中的代码隐藏对话？最好的解决方案是使用 Ajax。在这里查看它是如何完成的：http: [//encosia.com/using-jquery-to-directly-call-aspnet-ajax-page-methods/](http://encosia.com/using-jquery-to-directly-call-aspnet-ajax-page-methods/)

请记住，您将在代码隐藏中调用静态方法，因此并非页面中的所有数据都可用。例如，您可以通过 HttpCurrent 对象访问 Session 对象。

祝你好运。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T08:47:40.980

检查依赖关系后，将 btnDeleteItem.OnClick 设置为 `btnDeleteItem.OnClick +=btnDeleteItemConfirmed_Click` 并设置 btnDeleteItem.OnClientClick `OnClientClick="return confirm('Are you sure you want to delete this item?');"`

愿这对您有所帮助

# web-services - 来自网络服务的 Magento 最终价格

> ID：10894119
> 
> 赞同：2
> 
> 时间：2012-06-05T08:42:15.257
> 
> 标签：web-services, magento

由于 MAGE 价格计算复杂性 + EPR 与 MAGE 计算不兼容，我正在考虑以某种方式覆盖 getPrice() 和 getFinalPrice() 方法，它们将调用外部 Web 服务以获得请求的价格。是否有人尝试以建议的方式解决价格计算问题，如果这在真实环境中有效吗？

第二种选择是从 MAGE 数据库中的 ERP 逆向工程价格引擎（附加表 + MAGE 内的逻辑）。

你觉得什么？任何的建议都受欢迎。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T20:58:36.027

我在复杂的定价问题上遇到了类似的问题。我最终添加了一些自定义属性字段，这些字段在客户编号上动态选择。

你能给我一些关于你的问题的背景吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T08:53:24.207

我们有非常复杂的价格计算。每个客户都有自己的定价规则（每个产品、每个产品组、特别折扣等）。有 15.000 名客户和 60.000 件商品。

可以将所有规则添加到 MAGE 中，但是价格索引需要非常非常长的时间，而且 MAGE 几乎无法使用。另一方面，定价引擎实现起来并不难，但一个问题仍然存在扩展原始逻辑。不需要管理员 GUI 来检查价格，因为同步是自动完成的，用户从不输入。（目标是完全取代 MAGE 的定价逻辑）。谢谢你的回答。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-09T20:38:15.447

经过一些工作和测试，我在 Magento 中做了新模型并重新实现了基于 od ERP 规则的价格计算逻辑。Webservice 可以工作，但它会非常慢（调用 getPrice 或 getFinalPrice 对于显示的每个项目至少执行两次）。

# java - JAVA中的字符串到PublicKey

> ID：10894120
> 
> 赞同：2
> 
> 时间：2012-06-05T08:42:25.133
> 
> 标签：java, digital-signature, public-key

我正在用java编写程序Digitalsignature现在我可以将公钥和签名发送给接收者但是当接收者收到我的公钥和签名时

它是字符串类型（Base64）（我需要发送字符串数据）

如何再次将 String(Base64) 恢复为 PublicKey(Type)

```
public verifiSign(String signature,String data)  {
String publickey="MIG...."

    Signature sig = Signature.getInstance("SHA1withRSA");

    sig.initVerify(publickey); //<-- Cannot  use String
    sig.update(data.getBytes());
    boolean verified = sig.verify(asBytes(signature));
    System.out.println("Verify = " + verified);

} 
```

请帮帮我谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T09:16:43.183

您可以使用此类从字符串中获取字节数组：

[http://www.docjar.com/docs/api/sun/misc/BASE64Decoder.html](http://www.docjar.com/docs/api/sun/misc/BASE64Decoder.html)

```
import sun.misc.BASE64Decoder; 
```

从字节数组中，获取一个 PublicKey 对象...顺便说一句。标准 sdk 不支持此代码，它只是 sun，所以要小心。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T09:20:02.657

您可以使用它在 PublicKey 实例中转换您的字符串（以 Base64 编码）：

注意：我不知道您如何在 Base64 中编码您的字符串，例如，如果您使用 apache commons，请使用同一 API 中的“revert”方法。对于这个示例，我使用了 sun.misc.BASE64Decoder，因为字符串 publicKey 是使用 sun.misc.BASE64Encoder 编码的。

```
 /**
 * Verify the origin of the message using signature and encoded message.
 * @param publicKey String - a public key, created with RSA and encoded with sun.misc.BASE64Encoder.
 * @param sign      String - a signature encoded with sun.misc.BASE64Encoder.
 * @param message   String - an encoded message.
 * @return
 * @throws NoSuchAlgorithmException
 * @throws NoSuchPaddingException
 * @throws InvalidKeySpecException
 * @throws InvalidKeyException
 * @throws InvalidAlgorithmParameterException
 * @throws IllegalBlockSizeException
 * @throws BadPaddingException
 * @throws NoSuchProviderException
 * @throws IOException
 * @throws SignatureException 
 * @see sun.misc.BASE64Encoder
 */
public boolean verifyMessageSign(String publicKey, String sign, String message) throws NoSuchAlgorithmException, NoSuchPaddingException, InvalidKeySpecException, InvalidKeyException, InvalidAlgorithmParameterException, IllegalBlockSizeException, BadPaddingException, NoSuchProviderException, IOException, SignatureException{

    KeyFactory keyFactory = KeyFactory.getInstance("RSA");

    //Create the PublicKey object from the String encoded in Base64.
    X509EncodedKeySpec publicKeySpec = new X509EncodedKeySpec(new BASE64Decoder().decodeBuffer(publicKey));
    PublicKey pub = keyFactory.generatePublic(publicKeySpec);

    Signature sig = Signature.getInstance("SHA1withRSA");
    sig.initVerify(pub);
    sig.update(message.getBytes());
    return sig.verify(new BASE64Decoder().decodeBuffer(sign));
} 
```

# java - 支持Unicode的Java正则表达式？

> ID：10894122
> 
> 赞同：86
> 
> 时间：2012-06-05T08:42:49.423
> 
> 标签：java, regex, unicode, cjk

为了匹配 A 到 Z，我们将使用正则表达式：

> [A-Z-Z]

如何允许正则表达式匹配用户输入的 utf8 字符？例如像环保部这样的中文单词</p>

* * *

## 回答 #1

> 赞同：130
> 
> 时间：2012-06-05T09:21:08.527

您正在寻找的是 Unicode 属性。

eg`\p{L}`是来自任何语言的任何类型的字母

所以匹配这样一个中文单词的正则表达式可能类似于

```
\p{L}+ 
```

有很多这样的属性，有关更多详细信息，请参阅[regular-expressions.info](http://www.regular-expressions.info/unicode.html#prop)

另一种选择是使用修饰符

`Pattern.UNICODE_CHARACTER_CLASS`

在 Java 7 中，有一个新属性`Pattern.UNICODE_CHARACTER_CLASS`可以启用预定义字符类的 Unicode 版本，有关[更多详细信息和链接，请参阅我的答案here](https://stackoverflow.com/a/9500409/626273)

你可以做这样的事情

```
Pattern p = Pattern.compile("\\w+", Pattern.UNICODE_CHARACTER_CLASS); 
```

并且`\w`将匹配来自任何语言的所有字母和所有数字（当然还有一些组合字符的单词，例如`_`）。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2015-07-07T10:04:13.123

为了解决 NLS 支持并避免接受英文特殊字符，我们可以使用以下模式...

**[a-zA-Z0-9 \u0080-\u9fff]*+**

对于 UTF 代码点参考：[http ://www.utf8-chartable.de/unicode-utf8-table.pl](http://www.utf8-chartable.de/unicode-utf8-table.pl)

代码片段：

```
 String vowels = "అఆఇఈఉఊఋఌఎఏఐఒఓఔౠౡ";
    String consonants = "కఖగఘఙచఛజఝఞటఠడఢణతథదధనపఫబభమయరఱలళవశషసహ";
    String signsAndPunctuations = "కఁకంకఃకాకికీకుకూకృకౄకెకేకైకొకోకౌక్కౕకౖ";
    String symbolsAndNumerals = "౦౧౨౩౪౫౬౭౮౯";
    String engChinesStr = "ABC導字會";

    Pattern ALPHANUMERIC_AND_SPACE_PATTERN_TELUGU = Pattern
            .compile("[a-zA-Z0-9 \\u0c00-\\u0c7f]*+");
    System.out.println(ALPHANUMERIC_AND_SPACE_PATTERN_TELUGU.matcher(vowels)
            .matches());

    Pattern ALPHANUMERIC_AND_SPACE_PATTERN_CHINESE = Pattern
            .compile("[a-zA-Z0-9 \\u4e00-\\u9fff]*+");

    Pattern ENGLISH_ALPHANUMERIC_SPACE_AND_NLS_PATTERN = Pattern
            .compile("[a-zA-Z0-9 \\u0080-\\u9fff]*+");

    System.out.println(ENGLISH_ALPHANUMERIC_SPACE_AND_NLS_PATTERN.matcher(engChinesStr)
            .matches()); 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2012-06-05T08:50:24.760

`\u03FB`要匹配单个字符，您可以简单地将它们作为文字或通过语法包含在一个字符类中。

显然，您通常无法列出表意语言中所有允许的字符。为了使正则表达式根据它们的类型或代码块处理 unicode 字符，支持[此处](http://docs.oracle.com/javase/6/docs/api/java/util/regex/Pattern.html)定义的各种其他转义。查看“Unicode 支持”部分，特别是对`Character`类和 Unicode 标准本身的引用。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-06-05T09:19:58.903

*   Java 正则表达式 API 适用于`char`类型
*   类型是`char`隐式 UTF-16
*   如果您有 UTF-8 数据，如果尚未完成，则需要在输入时将其转码为 UTF-16

Unicode 是通用字符集，UTF-8 可以描述所有字符（包括控制字符、标点符号、符号、字母等）。您必须更具体地说明要包含的内容和要排除的内容。Java 正则表达式使用`\p{category}`语法按[类别](http://www.unicode.org/notes/tn36/)匹配代码点。有关类别[列表](http://www.unicode.org/notes/tn36/Categories.txt)，请参阅[Unicode 标准](http://www.unicode.org/standard/standard.html)。

如果您想识别和分隔一系列表意文字中的单词，则需要查看更复杂的 API。我将从[`BreakIterator`](http://docs.oracle.com/javase/7/docs/api/java/text/BreakIterator.html#getWordInstance%28%29)类型开始。

# javascript - 对关联数组键值求和并按键分组

> ID：10894123
> 
> 赞同：0
> 
> 时间：2012-06-05T08:42:49.780
> 
> 标签：javascript, jquery

我有如下表格：

```
<table>
   <thead>
      <th>PRODUCT</th>
      <th>QUANTITY</th>
      <th>AREA</th>
      <th>PRICE</th>
      <th>TOTAL</th>
   <tr>
      <td id="name">SWEETS</td>
      <td id="qty">10</td>
      <td id="area">250</td>
      <td id="price">16.50</td>
      <td id="total">160.50</td>
   </tr>
   <tr>
      <td id="name"">DRY FOODS</td>
      <td id="qty">5</td>
      <td id="area">100</td>
      <td id="price">10.25</td>
      <td id="total">51.25</td>
   </tr>
   <tr>
      <td id="name">FRESH</td>
      <td id="qty">20</td>
      <td id="area">250</td>
      <td id="price">5</td>
      <td id="total">100</td>
   </tr>
   <tr>
      <td id="name">MEAT</td>
      <td id="qty">10</td>
      <td id="area">250</td>
      <td id="price">15</td>
      <td id="total">150</td>
   </tr>
   <tr>
      <td id="name">FROZEN</td>
      <td id="qty">20</td>
      <td id="area">300</td>
      <td id="price">10</td>
      <td id="total">200</td>
   </tr>
</table> 
```

所以，我想创建一个数组，`{area:total}`然后根据面积和总面积值对数组值进行分组。

喜欢 :
**区域 250** : 410.5
**区域 100** : 51.25
**区域 300** : 200

我尝试了以下方法，得到了数组，但我不知道如何对区域进行分组（我使用了 setInterval 函数，因为员工可以删除或更改区域值）

```
 setInterval(function() {
            var $row = $(this).closest("tr");
            var sasData = [];
            $row.each(function(i) {
                var sasValue = parseFloat($row.find("#area").val());
                var totValue = parseFloat($row.find("#total").val());
                sasData.push({sas:sasValue, tot:totValue});
                console.log(sasData);
            });

            function compressedArray(original) {
                var compressed = [];
            };
        }, 1500) 
```

你能告诉我我们如何处理这个问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T08:58:28.553

这个 JSFiddle 应该可以解决你的问题。我还修复了您丢失的标题、*DRY FOODS* td 中的双引号，并将 id 更改为类：

[http://jsfiddle.net/Q9nrf/1/](http://jsfiddle.net/Q9nrf/1/)

```
var areas = {};
$("tr").each(function() {
    var area = $(this).find("td.area").text();
    if (area != "") {
        var total = parseFloat($(this).find("td.total").text());
        if (!areas.hasOwnProperty(area)) {
            areas[area] = 0;            
        }
        areas[area] += total;
    }
});
console.log(areas); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-05T08:53:44.280

您需要将 id 值更改为其他属性，例如 class。

循环遍历行（使用 tbody 元素跳过标题）并从具有您所追求的类的元素中收集值。您将需要使用数组来存储它们，因为您不能对对象的属性进行排序，并且每个属性都必须具有唯一的名称。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-05T08:54:59.787

id 应该是**唯一的**。所以`<td id="area">250</td>`改为`<td class="area">250</td>`

然后只需调用：

```
o = {};
$("td.area").each(function(){ 
 key = o[$(this).text()];
 if (!key) key = 0;
 key += parseFloat( $(this).closest("tr").find(".total").text());
}); 
```

然后你有对象包含键值[key=area code, value=total]

# php - 在 LastFM API 和 PHP 中检索 BIO 信息

> ID：10894126
> 
> 赞同：0
> 
> 时间：2012-06-05T08:42:56.633
> 
> 标签：php, api, curl, last.fm

我正在尝试使用 LASTFM api 查找艺术家 BIO 信息，但我遇到了麻烦。

我正在使用 PHP 和一个将结果作为 XML 返回的 CURL 请求。

如果我使用 CURL 发送的 url 并在浏览器中正常加载它，它会显示所需的一切。但是，CURL 在 php 脚本中返回的结果缺少 XML 的某些属性。

例如：artist->bio->summary 存在但没有内容。

您可以复制我正在做的事情，在这里复制基本概念：

在浏览器中打开它： [http ://ws.audioscrobbler.com/2.0/artist/cher/info.xml](http://ws.audioscrobbler.com/2.0/artist/cher/info.xml)

将其复制并粘贴到 PHP 文件中并打开：

```
$url = 'http://ws.audioscrobbler.com/2.0/artist/cher/info.xml';
 $ch = curl_init();
 curl_setopt($ch, CURLOPT_URL, $url);
 curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
 curl_setopt($ch, CURLOPT_TIMEOUT, 20);
 curl_setopt($ch, CURLOPT_HEADER, 0);
 curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, FALSE);
 $retData = curl_exec($ch);
 curl_close($ch);
 echo '<pre>';
 echo $retData;
 echo '</pre>'; 
```

您会看到返回的结果相似，但 curl 请求中缺少内容。我也尝试过做一个 simplexml_load_file() 但同样的事情发生。我错过了什么？为任何帮助干杯！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-05T08:50:54.660

尝试更换

```
echo $retData; 
```

和

```
echo htmlspecialchars($retData); 
```

你会看到一切都在那里。您在 HTML 上下文中打印原始 XML，并且 XML 中的一些标记被解释为 HTML 标记。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-05T08:55:53.833

网址错误，但可能是错字；p。它的内容丢失的原因是`<![CDATA[`标签，在解析之前去掉它，你应该很高兴。

```
<?php
$ch = curl_init();
curl_setopt($ch, CURLOPT_URL, 'http://ws.audioscrobbler.com/2.0/artist/cher/info.xml');
curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
curl_setopt($ch, CURLOPT_TIMEOUT, 20);
curl_setopt($ch, CURLOPT_HEADER, 0);
curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, FALSE);
$retData = curl_exec($ch);

$retData = str_replace(array('<![CDATA[',']]>'),'',$retData);

$xml = simplexml_load_string($retData);
$lastFM = json_decode(json_encode($xml),TRUE);

print_r($lastFM);

/*Array
(
    [name] => Cher
    [mbid] => bfcc6d75-a6a5-4bc6-8282-47aec8531818
    [url] => http://www.last.fm/music/Cher
    [image] => Array
        (
            [0] => http://userserve-ak.last.fm/serve/34/63530405.png
            [1] => http://userserve-ak.last.fm/serve/64/63530405.png
            [2] => http://userserve-ak.last.fm/serve/126/63530405.png
            [3] => http://userserve-ak.last.fm/serve/252/63530405.png
            [4] => http://userserve-ak.last.fm/serve/500/63530405/Cher.png
        )

    [streamable] => 1
    [stats] => Array
        (
            [listeners] => 768175
            [playcount] => 7895613
        )

    [similar] => Array
        (
            [artist] => Array
                (
                    [0] => Array
                        (
                            [name] => Sonny & Cher
                            [url] => http://www.last.fm/music/Sonny+&+Cher
                            [image] => Array
                                (
                                    [0] => http://userserve-ak.last.fm/serve/34/71168880.png
                                    [1] => http://userserve-ak.last.fm/serve/64/71168880.png
                                    [2] => http://userserve-ak.last.fm/serve/126/71168880.png
                                    [3] => http://userserve-ak.last.fm/serve/252/71168880.png
                                    [4] => http://userserve-ak.last.fm/serve/500/71168880/Sonny++Cher.png
                                )

                        )

                    [1] => Array
                        (
                            [name] => Cyndi Lauper
                            [url] => http://www.last.fm/music/Cyndi+Lauper
                            [image] => Array
                                (
                                    [0] => http://userserve-ak.last.fm/serve/34/76056286.png
                                    [1] => http://userserve-ak.last.fm/serve/64/76056286.png
                                    [2] => http://userserve-ak.last.fm/serve/126/76056286.png
                                    [3] => http://userserve-ak.last.fm/serve/252/76056286.png
                                    [4] => http://userserve-ak.last.fm/serve/_/76056286/Cyndi+Lauper++for+Uniqlo.png
                                )

                        )

                    [2] => Array
                        (
                            [name] => Madonna
                            [url] => http://www.last.fm/music/Madonna
                            [image] => Array
                                (
                                    [0] => http://userserve-ak.last.fm/serve/34/78270650.png
                                    [1] => http://userserve-ak.last.fm/serve/64/78270650.png
                                    [2] => http://userserve-ak.last.fm/serve/126/78270650.png
                                    [3] => http://userserve-ak.last.fm/serve/252/78270650.png
                                    [4] => http://userserve-ak.last.fm/serve/_/78270650/Madonna+Shes+a+bad+girl.png
                                )

                        )

                    [3] => Array
                        (
                            [name] => Kylie Minogue
                            [url] => http://www.last.fm/music/Kylie+Minogue
                            [image] => Array
                                (
                                    [0] => http://userserve-ak.last.fm/serve/34/78217522.png
                                    [1] => http://userserve-ak.last.fm/serve/64/78217522.png
                                    [2] => http://userserve-ak.last.fm/serve/126/78217522.png
                                    [3] => http://userserve-ak.last.fm/serve/252/78217522.png
                                    [4] => http://userserve-ak.last.fm/serve/500/78217522/Kylie+Minogue+KylieBestOf.png
                                )

                        )

                    [4] => Array
                        (
                            [name] => Tina Turner
                            [url] => http://www.last.fm/music/Tina+Turner
                            [image] => Array
                                (
                                    [0] => http://userserve-ak.last.fm/serve/34/74998404.jpg
                                    [1] => http://userserve-ak.last.fm/serve/64/74998404.jpg
                                    [2] => http://userserve-ak.last.fm/serve/126/74998404.jpg
                                    [3] => http://userserve-ak.last.fm/serve/252/74998404.jpg
                                    [4] => http://userserve-ak.last.fm/serve/_/74998404/Tina+Turner+Queen+3.jpg
                                )

                        )

                )

        )

    [tags] => Array
        (
            [tag] => Array
                (
                    [0] => Array
                        (
                            [name] => pop
                            [url] => http://www.last.fm/tag/pop
                        )

                    [1] => Array
                        (
                            [name] => female vocalists
                            [url] => http://www.last.fm/tag/female%20vocalists
                        )

                    [2] => Array
                        (
                            [name] => 80s
                            [url] => http://www.last.fm/tag/80s
                        )

                    [3] => Array
                        (
                            [name] => dance
                            [url] => http://www.last.fm/tag/dance
                        )

                    [4] => Array
                        (
                            [name] => rock
                            [url] => http://www.last.fm/tag/rock
                        )

                )

        )

    [bio] => Array
        (
            [published] => Tue, 1 May 2012 12:51:56 +0000
            [summary] => Cher (born Cherilyn Sarkisian on May 20, 1946) is an American singer, actress, songwriter, author and entertainer. Among her many career accomplishments in music, television and film, she has won an Academy Award, a Grammy Award, an Emmy Award and three Golden Globe Awards among others.  Referred to as the Goddess of Pop, Cher first rose to prominence in 1965 as one half of the pop/rock duo Sonny & Cher.
            [content] => Cher (born Cherilyn Sarkisian on May 20, 1946) is an American singer, actress, songwriter, author and entertainer. Among her many career accomplishments in music, television and film, she has won an Academy Award, a Grammy Award, an Emmy Award and three Golden Globe Awards among others.

 Referred to as the Goddess of Pop, Cher first rose to prominence in 1965 as one half of the pop/rock duo Sonny & Cher. She also established herself as a solo recording artist, releasing 25 albums, contributing to numerous compilations, and tallying 34 Billboard Top 40 entries over her career, both solo and with Sonny. These include eighteen Top 10 singles and five number one singles (four solo). Cher has had 16 top ten hits in the UK between 1965 and 2003, four of which reached number one (two solo, one with Sonny, one as part of a charity single).

 In a career surpassing 40 years, Cher has been described as an enduring pop icon and one of the most popular female artists in music history. Since her debut in 1964, Cher has sold as a solo artist over 180 million records worldwide and an estimated 70 million singles and with duo Sonny and Cher over 80 million records becoming one of the biggest-selling artists of all time.

 She became a television star in the 1970s and a film actress in the 1980s. In 1987, she won the Academy Award for Best Actress for her role in the romantic comedy Moonstruck.

 During 2007, in the seventh volume of Chrome Hearts, Cher once again confirmed that she is working on her twenty-sixth studio album. No recordings have taken place as of yet, and no release date had been scheduled.

 It is rumoured that Cher will collaborate with Lady Gaga in a song for her next album Born This Way. This album is expected to be released in Spring 2011.

 On February 7, 2008 Cher, at 61, announced that she had reached a deal to perform 200 shows over three years live at the Colosseum at Caesar's Palace in Las Vegas. Her new show, entitled Cher at the Colosseum, debuted on May 6, 2008\. The show reportedly includes 18 dancers, 4 aerialists, and multiple costumes designed by Bob Mackie. Choreography will be directed by Doriana Sanchez who also worked with Cher on her past three major tours. Her show will perform four nights a week for a month, and a second leg of the show will continue in August. Cher will share the stage on a rotating basis with contemporaries Bette Midler (whose The Showgirl Must Go On opened on February 20, 2008) and Elton John (whose The Red Piano which opened in 2004, will continues its run of about 50 shows a year).

 Cher made her musical debut and first film role in a decade in , starring alongside Christina Aguilera, who also made her musical and film debut. The film was released in November 2010.

User-contributed text is available under the Creative Commons By-SA License and may also be available under the GNU FDL.
        )

)

*/ 
```

# panel - 嵌套列表在面板内时不显示商店数据

> ID：10894130
> 
> 赞同：0
> 
> 时间：2012-06-05T08:43:20.807
> 
> 标签：panel, sencha-touch-2, nested-lists

当此列表显示在面板内时，我在加载我的嵌套列表数据时遇到问题。这是我的代码：

```
 var titleBar = Ext.create("Ext.TitleBar", {
            id: 'mainNavigationBar',
            xtype : 'titlebar',
            layout: 'hbox',
            docked: 'top',
            title : 'cSenchaTitleBar',
            items:[
                {
                    xtype:"button",
                    text:"Menu",
                    align:"left",
                    listeners:{
                        tap: function(){
                             nestedListxx.showBy(this);
                        }
                    }
                },
            ]
        });

    var nestedList = 
        Ext.create('Ext.NestedList', {
            displayField: 'text',
            title:"cSenchaMenu",
            store: "oNavStore",
            id: 'mainNestedList',
            xtype : 'nestedlist',
            width:250,
            useTitleAsBackText: false,

         });
     var nestedListxx = Ext.create("Ext.Panel", {
         width:260,
        items:nestedList
    }); 
```

问题如下：假设我更改 `nestedListxx.showBy(this);`为`nestedList.showBy(this);` It works like a charm，只有嵌套列表周围没有光滑的黑色边框。但是如果我把它改回来，它确实会显示带有漂亮边框但没有任何数据的嵌套列表。

我确定我忘了设置一些关键配置，唯一的问题是：哪些

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T11:07:58.203

您可能需要为您的`Ext.Panel`.

尝试 ：

```
var nestedListxx = Ext.create("Ext.Panel", {
    width:260,
    layout:'fit',
    items:nestedList
}); 
```

希望这可以帮助

# html - html / css 如何在中间（垂直）对齐文本

I want to centre the text inside a text area; I am trying with the line height, but it doesn't work.

![scr</h1>
<blockquote>
        <p>ID：10894131</p>
        <p>赞同：10</p>
        <p>时间：2012-06-05T08:43:24.490</p>
        <p>标签：html, css</p>
        </blockquote>

            <hr/>
            <h2>回答 #1</h2>
            <blockquote>
            <p>赞同：3</p>
            <p>时间：2012-06-05T08:57:23.967</p>
            </blockquote>

<p>您可以<code>contenteditable=](https://i.stack.imgur.com/wNtXZ.jpg)在 a 上使用该属性`<div>`，然后使用 CSS 对其进行蒙皮。

这是跨浏览器兼容性的链接：[Reliable cross-browser info on ContentEditable](https://stackoverflow.com/questions/4052102/reliable-cross-browser-info-on-contenteditable)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-05T08:47:07.537

您只能使用填充来实现这一点，但这不是很好的做事方式。您也可以使用 jQuery 使填充灵活，而不仅仅是自己设置。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-05T08:49:18.547

嘿，现在你可以使用输入标签

像这样将 textarea 替换为输入标签

并定义`height`和`line-height`

**CSS**

```
input[type="text"]{
line-height:125px;
    height:125px;
} 
```

**HTML**

```
<input type="text" value=""> 
```

现场演示[http://jsfiddle.net/MTCrt/](http://jsfiddle.net/MTCrt/)

# python - 请解释为什么这两个内置函数在传入关键字参数时表现不同

> ID：10894135
> 
> 赞同：7
> 
> 时间：2012-06-05T08:43:34.523
> 
> 标签：python

考虑这些不同的行为::

```
>> def minus(a, b):
>>    return a - b

>> minus(**dict(b=2, a=1))
-1

>> int(**dict(base=2, x='100'))
4

>> import operator
>> operator.sub.__doc__
'sub(a, b) -- Same as a - b.'
>> operator.sub(**dict(b=2, a=1))
TypeError: sub() takes no keyword arguments 
```

为什么`operator.sub`行为与 不同`int(x, [base])`？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-05T08:48:35.717

这是一个实现细节。用于检索参数的[Python C API 将](http://docs.python.org/c-api/arg.html#PyArg_UnpackTuple)位置参数和关键字参数分开。位置参数在内部甚至没有名称。

用于检索`operator.add`函数（以及类似的函数`sub`）参数的代码是这样的：

```
PyArg_UnpackTuple(a,#OP,2,2,&a1,&a2) 
```

如您所见，它不包含任何参数名称。相关的整个代码`operator.add`是：

```
#define spam2(OP,AOP) static PyObject *OP(PyObject *s, PyObject *a) { \
  PyObject *a1, *a2; \
  if(! PyArg_UnpackTuple(a,#OP,2,2,&a1,&a2)) return NULL; \
  return AOP(a1,a2); }

spam2(op_add           , PyNumber_Add) 
```

```
#define spam2(OP,ALTOP,DOC) {#OP, op_##OP, METH_VARARGS, PyDoc_STR(DOC)}, \
                           {#ALTOP, op_##OP, METH_VARARGS, PyDoc_STR(DOC)},
spam2(add,__add__, "add(a, b) -- Same as a + b.") 
```

如您所见，唯一使用`a`和的地方`b`是在文档字符串中。方法定义也不使用`METH_KEYWORDS`方法接受关键字参数所必需的标志。

一般来说，你可以放心地假设一个你知道参数名称的基于 python 的函数将**始终**接受关键字参数（当然，有人可以通过`*args`解包做一些讨厌的事情，但创建一个参数看起来正常的函数文档），而 C 函数可能或可能不接受关键字参数。具有多个参数或可选参数的函数很有可能接受后面/可选参数的关键字参数。但是您几乎必须对其进行测试。

[你可以在python-ideas 邮件列表](http://groups.google.com/group/python-ideas/browse_thread/thread/9bf7674861d656d9?pli=1)中找到关于支持关键字参数的讨论。*Guido van Rossum*（The [Benevolent Dictator For Life](http://wiki.python.org/moin/BDFL)，又名 Python 的创造者）也发表了声明：

> 嗯。我认为对于许多（大多数？）1-arg 和选定的 2-arg 函数（很少是 3+-arg 函数），这会降低可读性，如 ord(char=x) 的示例所示。
> 
> 我实际上希望看到一个语法特性来声明一个参数*不能*作为关键字参数给出（就像我们已经添加了语法来声明它*必须*是一个关键字一样）。
> 
> 我认为添加关键字 args 的一个领域是完全错误的：内置类型或 ABC 的方法，它们是可覆盖的。例如，考虑 dict 上的 pop() 方法。由于参数名称当前未记录，如果有人将 dict 子类化并覆盖此方法，或者如果他们创建另一个尝试使用鸭子类型模拟 dict 的可变映射类，那么参数名称是什么并不重要——所有调用者 (期望 dict、dict 子类或类似 dict 的鸭子）将在调用中使用位置参数。但是，如果我们要记录 pop() 的参数名称，并且用户开始使用这些名称，那么大多数 dict 子类和鸭子会突然被破坏（除非他们碰巧选择了相同的名称）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-05T08:50:18.643

`operator`是一个 C 模块，它以[不同的方式定义函数](http://docs.python.org/c-api/structures.html#PyMethodDef)。除非模块初始化中的函数声明包含`METH_KEYWORDS`，否则该函数在任何情况下都不会接受关键字参数，并且您会收到问题中给出的错误。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-05T08:45:56.047

`minus(**dict(b=2, a=1))`扩展到`minus(b=2, a=1)`. 这是有效的，因为您的定义具有参数名称`a`和`b`.

`operator.sub(**dict(b=2, a=1))`扩展到`operator.sub(b=2, a=1)`. 这不起作用，因为 sub 不接受关键字参数。

# ios5 - 复制的块和 CLANG 泄漏警告

> ID：10894136
> 
> 赞同：0
> 
> 时间：2012-06-05T08:43:36.953
> 
> 标签：ios5, memory-management, asynchronous, clang, objective-c-blocks

我有一个需要一个块的方法：

```
- (void)methodWithBlock:(blockType)block 
```

该方法从复制开始`block`，因为它在使用它之前会执行异步操作，否则它将被丢弃。然后它在另一个块中调用该方法，然后在该块中释放它。总结：

```
- (void)methodWithBlock:(blockType)block
{
    block = [block copy];
    [something asyncStuffWithFinishedBlock:^{
        // ..
        block();
        [block release];
    }];
} 
```

CLANG 抱怨“块”的内存泄漏。如果我删除了复制和释放语句，该块将在它被调用时消失——至少早期的崩溃表明情况就是这样。

这是错误的做事方式吗？如果是这样，我应该如何执行上述操作 - 即方法中的块语句中的块回调？我不能将块存储为实例变量，因为在异步部分发生时，可以使用不同的参数重复调用该方法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-05T09:25:00.730

首先，`-copy`and`-release`应该是不必要的。该`-asyncStuffWithFinishedBlock:`方法必须复制传递给它的块。当一个块被复制并引用其他块对象时，它也会复制这些块对象。您需要弄清楚您所看到的崩溃的真实性质。

其次，你释放了错误的东西。 `[block copy]`不会修改`block`（`-copy`消息的接收者）以某种方式将其变成副本。它*返回*该块的副本。您希望在调用语句 ( `block();`) 和释放时都引用这个返回的副本。

所以，你可以这样做：

```
block = [block copy];
[something asyncStuffWithFinishedBlock:^{
    // ..
    block();
    [block release];
}]; 
```

请注意重新分配局部`block`变量以指向副本。

可以这样想：您是否会以尝试复制该块的方式复制字符串？你会怎么做：

```
[someString copy];
// ... use someString ...
[someString release]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-05T18:59:17.703

我认为你不应该那样做`release`内部的块。您假设该块仅被调用一次。但仅从代码中，我们不知道。可能是该方法根本不执行该块，在这种情况下您将不会释放，因此会泄漏。也可能是该方法多次执行该块，在这种情况下您将过度释放。

如果你真的想复制它，你需要像这样在块外释放它（保留一些东西的范围应该负责释放它）：

```
- (void)methodWithBlock:(blockType)block
{
    block = [block copy];
    [something asyncStuffWithFinishedBlock:^{
        // ..
        block();
    }];
    [block release];
} 
```

（这与它的论点无关`asyncStuffWithFinishedBlock`；根据内存管理规则，如果它需要保留它更长的时间，它需要保留或复制它（对于它需要复制它的块）。）

但是，正如 Ken Thomas 指出的那样，您不必在此方法中复制它，因为您没有将块存储在任何地方。`asyncStuffWithFinishedBlock`如果需要异步运行，则应复制其参数块；并且该块捕获的任何块都应在复制时被复制。

# objective-c - didChangeObject：未调用 NSFetchedResultsController

> ID：10894137
> 
> 赞同：3
> 
> 时间：2012-06-05T08:43:37.550
> 
> 标签：objective-c, ios, core-data, nsfetchedresultscontroller

我几乎尝试了一切，但无法弄清楚出了什么问题。我有一个 NSFetchedResultsController 并从核心数据中获取一些帖子。然后我有一种方法可以将新帖子插入到相同的上下文中并保存上下文。通常，didChangeObject: 方法现在应该被调用，但它不会。我有一个类似的视图控制器，我在不同的表（=nsmanaged 对象）上基本相同，并且 didChangeObject: 方法被成功调用。

到目前为止我已经尝试过：

*   为这个视图控制器创建了另一个上下文

*   移除了 NSFetchedResultsController 的缓存

以下方法从核心数据数据库中提取数据并将其“存储”到 NSFetchedResultsController（变量：）`controller`中。

```
//reloading newsgroups from coredata
- (void)reloadNewsgroupsFromCoreData
{    
    //creating fetch request
    NSFetchRequest *fetchRequest = [[NSFetchRequest alloc] initWithEntityName:@"Post"];

    //sorting by transient date (hour and secons cutted off)
    NSSortDescriptor *sortByDate = [[NSSortDescriptor alloc] initWithKey:@"dateCreatedTransient" ascending:NO];
    NSArray *sortDescriptors = [[NSArray alloc] initWithObjects:sortByDate, nil];
    [fetchRequest setSortDescriptors:sortDescriptors];

    //where clause
    [fetchRequest setPredicate:[NSPredicate predicateWithFormat:@"ref_subscribed_newsgroup == %@ AND references == nil", self.newsgroup]];

    //setting fetchrequest
    self.controller = [[NSFetchedResultsController alloc]
                       initWithFetchRequest:fetchRequest
                       managedObjectContext:self.context
                       sectionNameKeyPath:@"dateCreatedForSections"
                       cacheName:nil]; //todo, maybe add a cache here!

    //fetch
    NSError *error;
    [self.controller performFetch:&error];

    if (error) {
        NSLog(@"%@", error);
    }
} 
```

此外，根据文档，我将 NSFetchedResultsController 的委托设置为我的视图控制器（这与上述 fetch 方法所在的位置相同）。

在`viewDidLoad`：

```
self.controller.delegate = self; 
```

然后我实现了协议中的方法，也是`didChangeObject:`

```
- (void)controller:(NSFetchedResultsController *)controller didChangeObject:(id)anObject atIndexPath:(NSIndexPath *)indexPath forChangeType:(NSFetchedResultsChangeType)type newIndexPath:(NSIndexPath *)newIndexPath {    
    UITableView *tableView = self.tableView;   

  // I HAVE ADDED A BREAKPOINT HERE BUT IT NEVER STOPS HERE.

    switch(type) {

        case NSFetchedResultsChangeInsert:
            [tableView insertRowsAtIndexPaths:[NSArray arrayWithObject:newIndexPath] withRowAnimation:UITableViewRowAnimationFade];

            break;
        case NSFetchedResultsChangeDelete:
            [tableView deleteRowsAtIndexPaths:[NSArray arrayWithObject:indexPath] withRowAnimation:UITableViewRowAnimationFade];
            break;

        case NSFetchedResultsChangeUpdate:
            [self configureCell:[tableView cellForRowAtIndexPath:indexPath]
                    atIndexPath:indexPath];

            break;

        case NSFetchedResultsChangeMove:
            [tableView deleteRowsAtIndexPaths:[NSArray
                                               arrayWithObject:indexPath] withRowAnimation:UITableViewRowAnimationFade];
            [tableView insertRowsAtIndexPaths:[NSArray
                                               arrayWithObject:newIndexPath] withRowAnimation:UITableViewRowAnimationFade];
            break;
    }

} 
```

然后我有另一种方法将一些帖子存储到核心数据中。我认为这很重要：这个方法是通过另一个线程的委托调用的。（服务器连接使用 调用它`performSelectorOnMainThread:...`）

```
- (void)storeIntoCoreData:(NSArray*)postsArray
{ 
...
        Post *entity = [NSEntityDescription insertNewObjectForEntityForName: @"Post" inManagedObjectContext:context];

        entity.inReply = dummy.in_reply;
        entity.body = dummy.body;
        entity.email = dummy.email;
        entity.from = dummy.from;
        entity.messageIdentifier = dummy.message_identifier;
        entity.references = dummy.references;
        entity.subject = dummy.subject;
        entity.dateCreated = dummy.date;
        entity.unread = [NSNumber numberWithInt:1];
...
    [self.context save:&error];
    if (error)
    {
        NSLog(@"error: %@", error);
    }

// IMPORTANT: CURRENTLY I AM CALLING THIS METHOD AGAIN HERE, WHICH 
// FETCHES ALL POSTS OUT OF CORE DATA.
// THIS IS SO UGLY AND NOT PERFORMANT. 
// THEN I INVOKE RELOADDATA ON THE TABLEVIEW TO RELOAD THE ENTIRE TABLE
// BUT THERE WAS JUST ONE INSERT SO A ENTIRE RELOAD WOULD NOT BE NECESSARY. 
    [self reloadNewsgroupsFromCoreData];
    [self.tableView reloadData];

// I HAVE TO DO THIS BECAUSE THE didChangeObject METHOD GETS NOT CALLED.
} 
```

有没有人有提示或建议可能有什么问题？

谢谢和问候， 克里斯

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-29T06:09:16.627

问题是您正在设置控制器委托，`viewDidLoad`然后在`reloadNewsgroupsFromCoreData`. 您新分配的控制器没有设置委托。尝试直接在`reloadNewsgroupsFromCoreData`.

您通常不想`NSFetchedResultsController`在数据发生变化时分配新的。使用的全部目的是在发生变化时`NSFetchedResultsController`获取委托消息。如果您的 fetch 请求发生变化，`NSFetchedResultsControllerDelegate`您只需要分配一个新的。`NSFetchedResultsController`我建议再看看[Apple Docs](http://developer.apple.com/library/ios/#DOCUMENTATION/CoreData/Reference/NSFetchedResultsController_Class/Reference/Reference.html)。

# android - 如何在 achartengine android 中设置网格深度？

> ID：10894138
> 
> 赞同：1
> 
> 时间：2012-06-05T08:43:45.297
> 
> 标签：android, grid, achartengine

我必须绘制心电图波，我已经使用 achartengine 作为库来绘制。它工作得很好:) 现在我想设置背景，这样我就可以得到一张毫米纸作为普通的心电图纸。我试图得到它，但我做不到！有人可以给提示我如何继续！我正在使用 1280 x 800 像素的三星 Galaxy Tab 10.1。

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T14:11:44.950

您可以使用 AChartEngine 内置网格。要启用它：

```
renderer.setGridEnabled(true); 
```

请注意，网格线是从标签点绘制的。因此，您将不得不调整所需的标签数量：

```
renderer.setXLabels(approximateNumberOfXAxisLabels);
renderer.setYLabels(approximateNumberOfYAxisLabels); 
```

# java - 如何将长值转换为字符串集

> ID：10894144
> 
> 赞同：2
> 
> 时间：2012-06-05T08:44:15.813
> 
> 标签：java

我有一些带有值的地图：

```
private static Map<String, Long> hodnotyUdaju = new HashMap<String, Long>();

static {
    hodnotyUdaju.put("a", 1L);
    hodnotyUdaju.put("b", 2L);
    hodnotyUdaju.put("b", 4L);
    hodnotyUdaju.put("d", 8L);
    hodnotyUdaju.put("e", 16L);
    hodnotyUdaju.put("f", 32L);
    hodnotyUdaju.put("g", 64L);
    hodnotyUdaju.put("h", 128L);
    hodnotyUdaju.put("i", 256L);
    hodnotyUdaju.put("j", 512L);
    .
    .
    .
} 
```

以及将一组值转换为长整数的方法

```
public static long bitovaHodnotaSeznamuUdaju(Set<String> udaje) {
    long bitovaHodnota = 0;

    for (String udaj : udaje) {
        Long tmp = hodnotyUdaju.get(udaj);
        if (tmp != null)
            bitovaHodnota += tmp;
    }

    return bitovaHodnota;
} 
```

我如何反之亦然实现此方法？我需要从很长的时间创建一组字符串

更新

方法应如下所示：

```
public static Set<String> bin2Udaje(long binUdaje) {
    Set<String> udaje = new HashSet<String>();
    for (Map.Entry<String, Long> entry : hodnotyUdaju.entrySet()) {
        if (udaje some operation entry.getValue() ) {
            udaje.add(entry.getKey());
        }
        return udaje;

    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-05T08:48:12.357

听起来你真的应该`Enum`为此使用而不是地图。例如，虽然您可以*保证*使用值 1、2、4、8...，但您最终会得到一个明确的答案 - 但在一般地图上这样做是行不通的。

我建议你使用一个枚举，如果你需要它，它对字符串有一个额外的值，如果你真的想要，你可以使用它`1L << value.ordinal()`来获取一个值。`long`但是，要表示这些值的一般集合，您可以简单地使用`EnumSet`.

如果这*不合适*，请向我们提供更多信息。

编辑：如果你*真的*想坚持现有的结构，你可以使用：

```
public static Set<String> valueToKeySet(long value) {
    Set<String> keys = new HashSet<String>();
    for (Map.Entry<String, Long> entry : hodnotyUdaju.entrySet()) {
        if ((value & entry.getValue()) != 0) {
            keys.add(entry.getKey());
        }
    }
    return keys;
} 
```

如果您的地图不仅包含单个位设置的值，这*将产生意想不到的结果。*

# php - PHP 会话不工作，无法在下一页带来价值

> ID：10894146
> 
> 赞同：0
> 
> 时间：2012-06-05T08:44:24.273
> 
> 标签：php, html

需要有关会话的帮助，不知道出了什么问题。

第 1 页

```
 <?php session_start()?>
    <html>
      <head>
      </head>
        <body>
          <?php
            $_SESSION['name'] = 'John';
            Print_r ($_SESSION);
          ?>
        </body>
    </html> 
```

第2页

```
 <?php session_start()?>
    <html>
      <head>
      </head>
        <body>
          <?php  
           Print_r ($_SESSION);
          ?>
        </body>
    </html> 
```

第 1 页结果数组 ( [name] => John )

第 2 页结果数组 ( )

我确实有 session_start(); 在这两个页面上都
尝试过 IE 和 Firefox，但没有工作
请提供建议并感谢 :)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T08:50:48.737

正如 lanzz 所说，您需要`session_start()`在两个页面中调用或将`session.auto_start`yout 上的 1设置为`php.ini`。

**编辑后**

您似乎在 php 开始标记 ( `<?php`) 之前有一些空格。它必须是要评估的第一件事。如果不是，它不能发送带有会话数据的标头，因此它们不起作用。它应该发出警告，因此您可能已禁用它们。要修复它，请编写如下代码。

```
<?php session_start()?>
<html>
  <head>
  </head>
    <body>
      <?php
        $_SESSION['name'] = 'John';
        Print_r ($_SESSION);
      ?>
    </body>
</html> 
```

如果它们仍然不起作用，您可能会将文件作为 UTF-8**和 BOM**，您应该禁用 BOM。如何做到这一点取决于编辑器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T08:53:38.997

您必须`session_start()`在所有页面顶部调用

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-05T08:58:22.900

1.  试试`<?php print_r($_COOKIE);?>`。并确保你有`PHPSESSID`饼干。
2.  `<?php echo phpinfo(); ?>`并确保`session.save_path`您的 apache 用户可写。

**更新：**

很明显您的浏览器没有传入所需的 cookie。您能否再次确认您的 phpinfo 是否`session.name`存在`PHPSESSID`？

要检查目录是否可写，只需运行带有以下脚本的 php 文件：

```
<?php
    $fp = fopen('D:\xampp\tmp\test.txt', 'w');
    fwrite($fp, 'test');
    fclose($fp);
?> 
```

# cakephp - 复制到本地后cakephp数据库表未找到错误

> ID：10894150
> 
> 赞同：0
> 
> 时间：2012-06-05T08:44:31.167
> 
> 标签：cakephp, cakephp-1.3

我正在使用 cakephp 1.3 ...它在服务器中的工作就像魅力一样，我将它复制到本地并执行它....之后它显示一个奇怪的错误。它说“缺少数据库表

错误：未找到模型收件箱的数据库表收件箱。

注意：如果您想自定义此错误消息，请创建 app/views/errors/missing_table.ctp “复制到本地后我所做的事情：我使用了不同名称的相同数据库（是的..我也在 database.php 中更改了）

但是存在表“收件箱”我尝试了这些方法： 1\. 删除了收件箱模型和控制器——没有发生任何事情 2\. 从 app/tmp/cache/models 中删除了缓存文件 --- 没有发生任何事情 3\. 从 core.php 中禁用缓存

当我使用与服务器中同名的另一个表时，它的工作但在我使用另一个数据库名称后似乎没有任何工作，因为我正在将该数据库名称用于另一个应用程序....任何人都可以帮我解决这个问题...真的发生这种情况.,它的紧急..提前谢谢...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T13:08:54.683

正如约瑟夫在评论中提到的，这可能是一个拼写错误。但可能还有一个原因：

在网络服务器上（主要是在共享主机上）你有数据库名称前缀。所以有可能你的服务器上的数据库的真实名称和你本地主机上的数据库不同。您可以在您的应用程序文件夹 config/database.php 中配置它

最好的问候，托尼。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T11:21:49.937

经过几天的头痛，我把它整理出来。即使我使用不同名称的相同数据库，它也使用不同的编码。我使用 uttf_genereal_ci 编码创建了新数据库并将旧数据库导入其中。现在它像魅力一样工作。谢谢大家帮助我

# php - 与 iis、memcached 或 ramdisk 的 php 会话？

> ID：10894156
> 
> 赞同：1
> 
> 时间：2012-06-05T08:45:03.447
> 
> 标签：php, iis, memcached

我需要一个稳定的解决方案，将会话数据存储在 MS/IIS7 上的 ram 中。

单服务器设置。

感谢任何有关的经验

*   [http://splinedancer.com/memcached-win32/](http://splinedancer.com/memcached-win32/)
*   常规的 ramdisk，只是改变 session_save_path。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T09:38:48.540

该解决方案取决于您当前和未来的可扩展性要求。您提到的 3 的任何设置肯定会稳定。是否足以满足您的要求；是另一个问题。

好消息是，您可以随时将策略从内存中切换到分布式会话（如果您计划添加更多服务器），只需安装 php 的 memcache 会话扩展。

因此，我建议您现在不要担心它，只需在内存会话中使用，除非您需要扩展。

# cocoa - 如何更改 NSSplitView 中分隔线的颜色？

> ID：10894164
> 
> 赞同：7
> 
> 时间：2012-06-05T08:45:55.477
> 
> 标签：cocoa, xcode4, appkit, nssplitview

我们可以改变分隔线的颜色吗？苹果文档说，我们可以为此覆盖 NSSplitView 子类中的 -dividerColor ，但这对我不起作用，或者我的理解不正确。我也尝试在分隔线上创建颜色层，例如：

```
colorLayer = [CALayer layer];
NSRect dividerFrame = NSMakeRect([[self.subviews objectAtIndex:0] frame].size.width, [[self.subviews objectAtIndex:0] frame].origin.y, [self dividerThickness], self.frame.size.height);

[colorLayer setBackgroundColor:[color coreGraphicsColorWithAlfa:1]];
[colorLayer setFrame:NSRectToCGRect(dividerFrame)];

[self.layer addSublayer:colorLayer]; 
```

不工作。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2015-11-27T21:37:23.030

这个答案可能迟到了，但是：
如果您使用的是 Interface Builder，则可以通过转到`NSSplitView`( `cmd`++ `alt`)的身份检查器并添加颜色类型`3`的用户定义的运行时属性来更改属性。`dividerColor`

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2014-03-27T09:59:03.363

实际上，简单的子类化`NSSplitView`和覆盖`-(void)dividerColor`工作，但仅适用于薄或厚的分隔线。

我创建了简单的可配置拆分视图，如下所示：

```
@interface CustomSplitView : NSSplitView
@property NSColor* DividerColor
@end

@implementation CustomSplitView
- (NSColor*)dividerColor {
  return (self.DividerColor == nil) ? [super dividerColor] : self.DividerColor;
}
@end 
```

然后在 Interface Builder 中为您的拆分视图指定自定义类，`CustomSplitView`并添加新的用户定义运行时属性，键路径 = DividerColor，type = Color 并选择所需的拆分器颜色。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-06-13T04:37:10.910

我也尝试过子类 `- (void)dividerColor`化，但我不确定为什么它不起作用，即使我知道它被调用（并且它在文档中）。

更改分隔线颜色的一种方法是子类[化 - (void)drawDividerInRect:(NSRect)aRect](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/ApplicationKit/Classes/NSSplitView_Class/Reference/Reference.html)。但是，由于某种原因，这个方法没有被调用，我已经在网上检查了所有答案，但找不到任何东西，所以我最终从`drawRect`. 这是子类 NSSplitView 的代码：

```
-(void) drawRect {
    id topView = [[self subviews] objectAtIndex:0];
    NSRect topViewFrameRect = [topView frame];
    [self drawDividerInRect:NSMakeRect(topViewFrameRect.origin.x, topViewFrameRect.size.height, topViewFrameRect.size.width, [self dividerThickness] )];
}

-(void) drawDividerInRect:(NSRect)aRect {
    [[NSColor redColor] set];
    NSRectFill(aRect);
} 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2018-10-01T15:10:38.510

根据 Palle 的回答，但可以在代码中动态更改颜色，我目前正在使用这个解决方案（Swift 4）：

```
splitView.setValue(NSColor.red, forKey: "dividerColor") 
```

如果你的 splitview 控件是 NSSplitViewController 的一部分，你应该使用这样的东西：

```
splitViewController?.splitView.setValue(NSColor.red, forKey: "dividerColor") 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2021-03-11T13:59:31.647

在 Swift 和 macOS 11 上，我可以通过简单地继承 NSSPlitView 并且只覆盖 drawDivider() 来实现这一点

```
import Foundation
import AppKit

class MainSplitView: NSSplitView {
    override func drawDivider(in rect: NSRect) {
        NSColor(named: "separatorLinesColor")?.setFill()
        rect.fill()
    }
} 
```

我以前尝试过其他一些方法，在此处列出，并且以前的工作方式停止与 macOS 11 一起工作......但似乎这可行。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-11-14T17:34:46.577

我在任何地方都没有提到的一个重要点是，如果您在拆分视图中覆盖 drawRect ，那么您必须调用 super ——否则 drawDividerInRect: 永远不会被调用。所以，它应该是这样的：

```
- (void)drawRect:(NSRect)dirtyRect {
    // your other custom drawing

    // call super last to draw the divider on top
    [super drawRect:dirtyRect];

}

- (void)drawDividerInRect:(NSRect)aRect {
    [[NSColor blueColor] set];
    NSRectFill(aRect);
} 
```

# php - 如何使用 PHP-Symfony 单击文件路径下载文件？

> ID：10894166
> 
> 赞同：0
> 
> 时间：2012-06-05T08:46:00.803
> 
> 标签：php, symfony1, upload, symfony-1.4

我正在创建一个使用 symfony 写博客的网站。用户可以将他们的帖子上传到网站。当用户添加文件时，它将保存在内部`web/upload/file_upload`，文件路径将保存在`add_post`表中。当管理员查看`add_post`表格模板时，他可以看到每个用户的下载文件的路径，我想要做的是通过这个文件路径下载文件。

我怎样才能做到这一点？

**编辑1：**

模型 - Blog_user 模块 - 发布

表结构 - 表名 - Blog_user

```
 1  user_id      bigint(20)      
 2 gender       varchar(255)             
 3  blog_status  tinyint(1)      
 4 file         varchar(255) 
```

形式

```
'user_id' => new sfWidgetFormInputHidden(), 
'gender'  => new sfWidgetFormInputText(), 
'file'    => new sfWidgetFormInputFile(), 
```

这里上传文件时，文件路径保存在 Blog_user 表中，文件保存在 web/upload 目录中。

**编辑2：**

//保存文件方法

```
public function saveFile(){
    $file = $this->getValue('file');
    if(isset($file)){
        $filename = 'POST_Uploaded -' .($file->getOriginalName());
        $file->save(sfConfig::get('sf_upload_dir').'/post_upload'.'/'.$filename);
    }
} 
```

`E:\xampp\htdocs\trunk\web\uploads\post_upload\POSt_Uploaded -JS.pdf`

这如何保存在侧 web/upload/post_upload 目录中，并且相同的路径也将保存在 db 中

**编辑3：**

当用户上传博客时，它将保存在 blog_user 表中，它包含 blog_id 作为主键，user_id 在用户表上。我想要做的是当用户上传文件时，user_id 和 blog_id 都应该保存在 blog 表中。怎么做？

用户表 - user_id ，文件（上传的文件）

博客表 - blog_id - 有博客标题，每个标题都有一个唯一的博客ID，以便用户可以在每个标题下上传一个文件，

发布表 - post_id、blog_id、user_id

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T08:49:54.380

您可以将此文件写入任何控制器中，并在用户单击下载时调用该函数

```
function download(){
    $file = "path/to/the/file.zip";
    if (file_exists($file)) {
      exit;
    }
   header('content-type:');
   header('Content-Description: File Transfer');
   //header('Content-Type: application/octet-stream');
   header('Content-Disposition: attachment; filename='.basename($file));
   header('Content-Transfer-Encoding: binary');
   header('Expires: 0');
   header('Cache-Control: must-revalidate, post-check=0, pre-check=0');
   header('Pragma: public');
   header('Content-Length: ' . filesize($file));
   ob_clean();
   flush();
   readfile($file);
   exit;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T09:48:03.777

假设：

*   你的模块名称是`moduleName`
*   带有文件的模型是`BlogUser`
*   该模型的主键是`id`

我会这样：

在您的模板中：

```
<a href="<?php echo url_for('post/download?user_id='.$blog_user->getUserId()) ?>">Download file</a> 
```

然后，在您的操作中（使用来自*Miqdad Ali*的函数）：

```
 public function executeDownload(sfwebRequest $request)
  {
    $blog_user = Doctrine_Core::getTable('Blog_user')->find($request->getParameter('user_id'));
    $this->forward404Unless($blog_user);

    header('content-type:');
    header('Content-Description: File Transfer');
    //header('Content-Type: application/octet-stream');
    header('Content-Disposition: attachment; filename='.basename($blog_user->getFile()));
    header('Content-Transfer-Encoding: binary');
    header('Expires: 0');
    header('Cache-Control: must-revalidate, post-check=0, pre-check=0');
    header('Pragma: public');
    header('Content-Length: ' . filesize($blog_user->getFile()));
    ob_clean();
    flush();

    readfile($blog_user->getFile());

    return sfView::NONE;
  } 
```

# windows - git svn 抱怨路径未锁定

> ID：10894172
> 
> 赞同：1
> 
> 时间：2012-06-05T08:46:32.440
> 
> 标签：windows, git, svn, locking, cygwin

我正在使用 git-svn（来自 cygwin）并且我已经在本地完成了几次 git 提交。我已经完成了`git svn rebase`，它检查了 SVN 中的最新更改，并成功地与我的本地 git 副本合并。

```
C:\src\git\MyProject>git svn rebase
Current branch master is up to date.

C:\src\git\MyProject>git status
# On branch master
nothing to commit (working directory clean)

C:\src\gitsvn\MyProject>git svn dcommit
Committing to http://mysvnrepo/svn/MyProject ...
        M       .gitignore
        M       trunk/module/src/main/webapp/file_1.html
        M       trunk/module/src/main/webapp/js/file_2.js
        A       trunk/module/src/main/webapp/js/file_3.js
        M       trunk/module/src/main/webapp/js/file_4.js
        M       trunk/module/src/main/webapp/js/file_5.js
        M       trunk/module/src/main/webapp/file_6.html
        M       trunk/module/src/main/webapp/file_7.html
Path is not locked: No lock on path '/svn/MyProject/!svn/wrk/0c6b9b9e-3155-41d8-aa30-979cc5815cee/trunk/module/src/main/webapp/file_8.html' (Status 423 on PUT Request): Server sent unexpected return value (423 Locked) in response to PUT request for '/svn/MyProject/!svn/wrk/0c6b9b9e-3155-41d8-aa30-979cc5815cee/trunk/module/src/main/webapp/file_8.html' at /usr/lib/git-core/git-svn line 922 
```

任何想法出了什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T01:23:50.443

必须做一个 svn unlock 来解决这个问题。

# google-app-engine - Google Appengine 每日预算未反映在配额中

> ID：10894174
> 
> 赞同：1
> 
> 时间：2012-06-05T08:46:41.490
> 
> 标签：google-app-engine, email, billing, quota

亲爱的 AppEngine 人（我知道所有 AppEngine 支持已经转移到 StackOverflow - 如果我弄错了，那么很抱歉在这里发布这个），我有一个非常严重的问题，我希望你能帮助我解决。

昨天我在我的应用程序 (friendbazaar.appspot.com) 上启用了每日预算 500 美元的计费，我的计费状态为“已启用”。但是，我仍然表明我已经最大限度地使用了以 100 of 100 发送电子邮件的收件人。

配额刚刚在 2 小时前重置，所以我不明白为什么这没有反映基于计费设置的更新配额。

这是一个大问题，因为我最近向我的其他网站的成员（超过 10 万人）发出了注册这个新网站的邀请——而且由于完成注册过程需要电子邮件授权，我完全被淹没并且基本上已经通过让他们注册然后从不向他们发送电子邮件来完成该过程，这激怒了很多客户。

请让我知道这是否可以解决，以及 appengine 配额反映计费设置的正常延迟是多少。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T08:59:42.593

根据计费常见问题解答

**为什么启用计费后我的邮件配额没有增加？**

*Google 会等到第一笔付款结清后再增加您的邮件配额。这意味着至少需要 7 天才能获得更高的配额。*

[https://developers.google.com/appengine/kb/billing#quota_increase](https://developers.google.com/appengine/kb/billing#quota_increase)

免责声明 - 我与 Google 没有任何关联，我也不相信您可以通过 stackoverflow 从他们那里获得官方回复。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-05-05T19:12:59.870

根据他们的技术支持，GAE 不再支持每天发送超过 100 封电子邮件（2016 年 5 月）。相反，他们正在推动人们使用 SendGrid。不幸的是，他们正在降低 GAE 对事务电子邮件等基本功能的能力。我可以理解为什么营销或批量电子邮件会不受欢迎，但对于大多数应用程序/网站需要的核心交易电子邮件，拥有一个本机、低成本的选项会很好。去看看亚马逊的电子邮件服务！

# javascript - 可以使用 utf8 跨浏览器 url 参数吗？

> ID：10894175
> 
> 赞同：0
> 
> 时间：2012-06-05T08:46:45.587
> 
> 标签：javascript, utf-8, browser-support

1.我知道所有现代浏览器都支持像[http://abc.com?something=UTF8chactersHERE](http://abc.com?something=UTF8chactersHERE)这样的用户地址参数 吗？

2.哪个浏览器不支持？
3\. javascript 可以在所有浏览器上正确解析参数吗？

> 例如：[http](http://abc.com?something) ://abc.com?something = 环保部&something2=环保部</p>

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T09:18:23.287

您应该对字符的 UTF-8 表示进行百分比转义：

```
http://abc.com/?something=环保部&amp;something2=环保部 
```

变成

```
http://abc.com/?something=%E7%8E%AF%E4%BF%9D%E9%83%A8&something2=%E7%8E%AF%E4%BF%9D%E9%83%A8 
```

任何现代浏览器都会在 URL 栏中将第二个显示为第一个。

# jquery - 如何将模型属性传递给咖啡脚本以在 Rails 中进行 select2 模板

> ID：10894176
> 
> 赞同：0
> 
> 时间：2012-06-05T08:46:47.127
> 
> 标签：jquery, ruby-on-rails, coffeescript, jquery-select2

我正在尝试在 Rails 3.2 应用程序中实现[select2 。](http://ivaynberg.github.com/select2/)

具体来说，我想使用模板来显示带有国家标志+国家名称的国家选择字段。

我有一个 Country 模型和 User 模型。My Country 模型有一个`:code`属性。我正在使用 CSS 精灵来显示基于`:code`属性的标志。

```
<img class="flag flag-#{country.code}"> 
```

在我的用户表单中

```
<%= f.collection_select :country_id, Country.order(:name), :id, :name, include_blank: true %> 
```

在 user.js.coffee.erb 我有

```
jQuery ->  
    format = (country) ->
        "<img class='flag flag-#{country.code}' src='#'/>" + country.name       
    $('#prerep_country_id').select2
        placeholder: "Select a country",
        allowClear: true,
        formatResult: format,
        formatSelection: format 
```

我无法将它们全部联系在一起（可能是我不断学习资产管道和 js.erb 如何工作的一部分）。

目前，选择字段使用 select2 呈现，但仅包含国家列表。没有格式化。

如何将每个国家/地区传递给该`format = (country)`函数，以便使用标志对其进行格式化？

感谢您的任何指示。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T16:51:47.470

来自[精美手册](http://ivaynberg.github.com/select2/#documentation)：

> 格式选择
> 
> 用于呈现当前选择的函数。
> 
> ```
> formatSelection(object) 
> ```

`object`参数是

> 从函数返回的选定结果对象`query`。

再往下一点，我们会看到`query`所有内容，特别是：

> 结果对象数组。默认渲染器需要带有`id`和`text`键的对象。`id`即使使用了自定义渲染器，该属性也是必需的。

如果我们看一个例子（[http://jsfiddle.net/ambiguous/a73gc/](http://jsfiddle.net/ambiguous/a73gc/)），我们会看到你的`format`函数被传递了一个`country`带有`id`和`text`键的对象。另一方面，您正在查看，`country.code`但那里什么也没有，您会生成如下图像：

```
<img class='flag flag-' src='#'/> 
```

所以你不会得到任何标志。

试试这个：

```
format = (country) ->
    "<img class='flag flag-#{country.id}' src='#'/>" + country.name
    #--------------------------------^^ 
```

大概你已经拥有`height`并且`width`在你的`img.flag`CSS 中，所以我们不必担心标志有多大。

此外，如果您使用的是 HTML5，则可能会丢失 XML 样式的`/>`自闭合标签，这`<img ...>`很好。

# c# - PDFNet - 我如何获取所有书签

> ID：10894177
> 
> 赞同：1
> 
> 时间：2012-06-05T08:46:48.363
> 
> 标签：c#, pdf, bookmarks

我正在使用适用于 c# 的 PDFnet SDK。我想在我自己的窗口中列出所有书签。

但是，我找到了访问第一个书签的唯一方法，而不是其他书签。

这是我的代码：

```
namespace David.PDFTest
{
    public partial class PDFView : PDFViewCtrl
    {
        protected override void OnMouseDown(MouseEventArgs e)
        {
            Trace.WriteLine(GetDoc().GetFirstBookmark().GetTitle());
        }
    }
} 
```

有没有可能得到所有的书签？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T08:50:44.510

似乎有一种[`Bookmark.GetNext()`](http://www.pdftron.com/pdfnet/PDFNetAPIRef/html/c46d24dc-c60c-0131-e182-3eee74e687a4.htm)方法可以使用。

所以我会写这样的东西：

```
namespace David.PDFTest
{
    public partial class PDFView : PDFViewCtrl
    {
        protected override void OnMouseDown(MouseEventArgs e)
        {   
            var bm = GetDoc().GetFirstBookmark();
            while ( bm!=null )
            {
                Trace.WriteLine(bm.GetTitle());
                bm = bm.GetNext();
            }
        }
    }
} 
```

# c# - C# 中的 ExecuteNonQuery 结果

> ID：10894178
> 
> 赞同：2
> 
> 时间：2012-06-05T08:46:50.343
> 
> 标签：c#, mysql, executenonquery

我如何知道我是否成功创建了数据库？我`"CREATE DATABASE DemoDB"`用作 SQL 命令。`ExecuteNonQuery()`方法返回 0。如果我成功创建了数据库，我应该使用什么来理解？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T08:49:14.920

正如 MSDN 所说：

> 对于 UPDATE、INSERT 和 DELETE 语句，返回值是受命令影响的行数。当正在插入或更新的表上存在触发器时，返回值包括受插入或更新操作影响的行数以及受一个或多个触发器影响的行数。对于所有其他类型的语句，返回值为 -1。如果发生回滚，则返回值也是 -1。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-05T08:55:28.773

ExecuteNonQuery 将为 CREATE DATABASE 命令返回 0，因为它返回由您的查询更改的**行。**

如果数据库存在，这将返回一些行：

```
SELECT SCHEMA_NAME FROM INFORMATION_SCHEMA.SCHEMATA WHERE SCHEMA_NAME = 'DemoDB' 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-05-24T09:23:56.000

如果出现错误，ExecuteNonQuery 会抛出 MySqlException 异常。如果成功则返回 0 但您不需要检查返回值；如果正常返回就成功了。例如，当我尝试创建一个已经存在的数据库时，我得到了一个例外：

**无法创建数据库*“名称”*；数据库存在**

# wpf - WPF DataTemplate 访问同一 ResourceDictionary 中的资源

> ID：10894186
> 
> 赞同：0
> 
> 时间：2012-06-05T08:47:10.873
> 
> 标签：wpf, resources, datatemplate

简化后，我有一个 ResourceDictionary，其中包含一个 DataTemplate 和一个 ViewModel-Class。

```
<ResourceDictionary>
    <DataTemplate DataType="Whatever">
        <ListBox ItemsSource="{Binding Source={StaticResource MyViewModel}, Path=SomeGlobalData}" />
    </DataTemplate>

    <MyViewModelClass x:Key="MyViewModel" />
</ResourceDictionary> 
```

当然，Binding 不起作用（它会引发异常），因为 DataType 没有资源“MyViewModel”。但是在 VisualTree 中，获取 DataTemplated 的“事物”是一个对象的子对象，该对象将 ResourceDictionary 合并到其资源中，因此可能有一种方法可以在运行时访问它。

所以我的问题是：是否有任何干净的方法可以在 DataTemplate 中访问“MyViewModel”？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T13:55:36.153

`StaticResource`您的问题是这些资源被实例化的顺序以及您使用vs的事实`DynamicResource`。

A`StaticResource`通过查找对已定义资源的引用为任何 XAML 属性特性提供值。尝试了解有关该主题的更多信息。

因此，如果您仍打算使用`StaticResource`.

# iphone - NSDictionary 到 NSArray 包含键和值

> ID：10894189
> 
> 赞同：1
> 
> 时间：2012-06-05T08:47:17.573
> 
> 标签：iphone, objective-c, ios, nsarray, nsdictionary

不知道有没有简单的方法可以实现，还是需要自己实现算法。

这就是我所拥有的（NSDictionary）：

```
 {
    14 =         (
        "M"
    );
    15 =         (
        "H"
    );
    16 =         (
        "F",
        "G"
    ); 
```

这就是我想要的（NSArray）：

```
 {
        14,
        "M",
        15,
        "H"
...
} 
```

我正在寻找一种简单的方法，以防我需要自己做算法

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-05T08:54:15.677

您可以遍历`NSDictionary`并添加键和值，如下所示：

```
 NSMutableArray *array = [NSMutableArray array];
    [may enumerateKeysAndObjectsUsingBlock:^(id key, id obj, BOOL *stop)
    {
        [array addObject:key];

        for (int i = 0; i < [obj count]; i++){
            [array addObject:[obj objectAtIndex:i]];
        }
    }]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-05T08:52:59.007

试试这个方法：

```
NSMutableArray *allObjs = [[NSMutableArray alloc] initWithArray:[d allKeys ]];
[allObjs addObjectsFromArray:[d allValues]]; 
```

# javascript - JavaScript 对象构造函数未显示稳定值

> ID：10894190
> 
> 赞同：0
> 
> 时间：2012-06-05T08:47:31.983
> 
> 标签：javascript

我有一个js代码如下，

```
 function findDealerByIdResponse() {
findDealerByIdResponse.prototype = findDealerByIdResponseType;

this.getPrefix = function(){
        return "tns1";
};
this.getNS = function(){
    return "http://www.hp.com/bookservice";
};

} 

function findDealerByIdResponseType(){
var DEALER ;

this.getPrefix = function(){
        return "tns1";
};
this.getNS = function(){
    return "http://www.hp.com/bookservice";
};

}

function getName( obj ) { 

   var funcNameRegex = /function (.{1,})\(/;
   var results = new Object();
   results = (funcNameRegex).exec((obj).constructor.toString());
   return (results && results.length > 1) ? results[1] : "";
};

function test(){
var req = new findDealerByIdResponse();
alert(getName(req));
} 
```

但是，如果我第一次执行“测试”，它会给出我所期望的：“doTransactionType”。但之后它给出了 "Function" 。请说明原因。

谢谢

迪帕克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T09:37:51.840

After the first call to `findDealerByIdResponse`, you set its `prototype` property to a function, namely `findDealerByIdResponseType`. As a result, `.constructor` will be overwritten by this assignment, and it will resolve to the constructor of that function - which is, as any function, `Function`.

Instead, you want this:

```
// set prototype to a parent instance
findDealerByIdResponse.prototype = new findDealerByIdResponseType;

// restore .constructor
findDealerByIdResponse.prototype.constructor = findDealerByIdResponse; 
```

You'd want to place it after the declarations of both functions.

# scala - 使用 Scala 时是否有用于在 IntelliJ 中搜索引用的热键？

> ID：10894191
> 
> 赞同：6
> 
> 时间：2012-06-05T08:47:34.633
> 
> 标签：scala, intellij-idea

使用 Scala 时是否有用于在 IntelliJ 中搜索引用的热键？

在 Eclipse 中，当对名称使用热键 CTRL+SHIFT+G 时，将开始搜索引用。这对于查找使用某种方法的位置非常有用。使用 Scala 时 IntelliJ 中是否有类似的东西？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-05T14:07:28.743

*   `Ctrl`+ `Alt`+ `F7`：显示用法；显示带有用法的弹出窗口。
*   `Alt`+ `F7`：查找用法；打开*Find*视图，以各种方式（例如按方法和按文件）显示用法。

通过`Ctrl`++找到，然后键入*find*，然后查看*Show Usages*`Shift`和Find *Usages*列表。我先尝试*搜索*，但只显示设置。现在，我知道 IDEA 将其称为*Usages*，而不是*References*，但我避免搜索它，因为您不知道要搜索它。`A`

 **** * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-03-07T17:59:39.013

我认为在 Ubuntu Linux 的第 12 版中，它是 Control + Alt + 数字键 7 而不是 F7。***

# jquery - 日期时间选择器滑块

> ID：10894192
> 
> 赞同：1
> 
> 时间：2012-06-05T08:47:49.890
> 
> 标签：jquery, datepicker, slider

是否可以使用范围滑块[http://jqueryui.com/demos/slider/#range](http://jqueryui.com/demos/slider/#range)获取 datetimepicker [http://trentrichardson.com/examples/timepicker/](http://trentrichardson.com/examples/timepicker/)时间范围？

**编辑** @Boris Delormas。我需要选择日期。然后选择该日期的时间范围。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-10T13:07:35.070

它适用于带有日期选择器的单个处理程序滑块。对我来说，它工作正常。

```
$(function() {
  var baseDate = new Date(2011, 1-1, 1);
  $('#datepicker').datepicker(); // Initialise datepicker
  $('#slider').slider({ // Initialise slider
        slide: function(event, ui) { // As it slides
              var date = new Date(baseDate.getTime()); // Calculate the new date
              date.setDate(date.getDate() + ui.value);
              $('#datepicker').datepicker('setDate', date); // And set into the datepicker
        }
  });
}); 
```

# javascript - 如何使用 ExtJS 4.1 将网格放入另一个网格的单元格中

> ID：10894196
> 
> 赞同：3
> 
> 时间：2012-06-05T08:48:13.930
> 
> 标签：javascript, extjs, grid, extjs4

我在 ExtJS 中阅读了有关网格的行扩展器功能，但这仅适用于行，顾名思义。我想将网格放入另一个网格的单个单元格中，以显示详细数据。我读到可以使用 ExtJS4 将任何内容嵌套到任何组件中，但我找不到这样的示例。

我想做的事：

为我的数据使用大网格，但记录的一个字段有大约 20 个子条目。所以我想把所有东西放在一行中，但是一个字段应该是每行 1 个字段中的 1 列网格。所以用户可以滚动到这个单元格，我保持行的宽度很小。

```
ID | hits | key/value
1  | 123  | a = 2rtr
---------------------
2  | 234  | a = 53jgh
---------------------
3  | 345  | a = 10asd     <--- 1 column table/for scrolling
   |      | b = 111asd
   |      | c = 123adsad
   |      | ...
---------------------
4  | 456  | b = xyz 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-02-27T17:36:11.670

通过大量的工作，您也许可以将网格嵌入到单元格中，但我绝不会推荐这样做。如果你能让它工作，它会表现得很糟糕。网格并不意味着像表格一样嵌套。也许您可以使用标题分组来获得您想要的。

[http://docs.sencha.com/extjs/4.2.2/extjs-build/examples/build/KitchenSink/ext-theme-neptune/#grouped-header-grid](http://docs.sencha.com/extjs/4.2.2/extjs-build/examples/build/KitchenSink/ext-theme-neptune/#grouped-header-grid)

否则，您可以为注入 HTML 表的列定义自定义渲染器

# java - 递归函数检查是否子数组

> ID：10894197
> 
> 赞同：-1
> 
> 时间：2012-06-05T08:48:29.697
> 
> 标签：java, arrays, recursion

我正在尝试编写一个递归函数来检查一个数组是否包含在第二个数组中（我的示例也是子数组）并返回真或假。

例如：`[d, e]`包含在`[a, b​​, c, d, e, f]`

.

我知道如何在没有递归的情况下进行检查（使用 for 循环），但想不出使用递归的解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T09:03:15.937

原理如下：

0) 如果第一个数组比第二个长，则它不是子数组。

1) 如果第二个数组以第一个数组开头（如 [a,b] 和 [a,b,c,d]），则它是子数组。

2）否则：如果第一个数组是第二个数组*尾部*的子数组（即第一个元素之后的部分），那么它就是一个子数组。

只是为了确定：（`tail([a,b,c,d]) == [b,c,d]`因为我不知道在 Java 中是如何调用的。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T09:11:59.207

您可以使用哈希将大数组的元素存储在哈希表中，然后检查子数组的每个元素是否存在于哈希表中，如果找到所有元素，则它将是子数组。

# c# - C# WinForms 向用户显示电子邮件消息

> ID：10894199
> 
> 赞同：0
> 
> 时间：2012-06-05T08:48:40.070
> 
> 标签：c#, winforms, email, client

所以，我有这个 POP3/SMTP 电子邮件客户端作为我的实习项目，我需要向用户显示电子邮件。电子邮件已经下载并存储在文件系统中，URI 存储在数据库表中。

那么向用户显示电子邮件的最佳方法是什么？

先感谢您。

若昂·博雷戈。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T08:56:09.097

这取决于。如果你只想显示纯文本，你会选择`TextBox`or `RichTextBox`。如果您还想显示 HTML 内容，则需要使用`WebBrowser`控件。

# android - ontouch 逐帧动画

> ID：10894200
> 
> 赞同：2
> 
> 时间：2012-06-05T08:48:41.940
> 
> 标签：android, imageview

如何在用于逐帧动画的图像视图上实现触摸......我使用它如下

```
 final AnimationDrawable newtonAnimation = (AnimationDrawable) animation.getBackground();

           AnimationStart(newtonAnimation);

            animation.setOnTouchListener(l);

public void AnimationStart(final AnimationDrawable newanimation){
    Thread timer=new Thread(){
        @Override
        public void run(){
                            try{
                                    sleep(40);
                                }catch(Exception e){}
                                finally{
                                            Newton_LawsActivity.this.runOnUiThread(new Runnable() {
                                                public void run(){
                                                newanimation.start();
                                            }});
                                        }
                            }
                        };
    timer.start(); 
```

这就是我得到 ontouch 事件的地方......

```
public boolean onTouch(View v, MotionEvent event) {
        // TODO Auto-generated method stub
        Log.w("debug","nullis event"+event+"OR"+gestureDetector.onTouchEvent(event));

        return gestureDetector.onTouchEvent(event);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T09:30:29.050

像下面这样设置ontouch lintener

```
 animation.setOnTouchListener(new OnTouchListener()
                {
                    @Override
                    public boolean onTouch(View v, MotionEvent event)
                    {
                        newtonAnimation.stop(); 
                        Toast.makeText(FrameAnimationActivity.this, "animation stoped", Toast.LENGTH_LONG).show();
                        return false;
                    }
            }); 
```

# c# - C# Winform - 像信使一样的笑脸框

> ID：10894203
> 
> 赞同：0
> 
> 时间：2012-06-05T08:48:51.463
> 
> 标签：c#, winforms, picturebox

我想让我的笑脸盒像现场信使一样。

![笑脸盒](../Images/048cd19adec273a07984fdb1c44bad34.png)

我怎样才能做到这一点？我想得到选中的图片？

谢谢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T10:37:39.653

我会使用[ToolStrip](http://msdn.microsoft.com/en-us/library/63k0z90h%28v=vs.80%29)和[ToolStripSplitButton](http://msdn.microsoft.com/en-us/library/system.windows.forms.toolstripsplitbutton.aspx)控件，然后我会创建自己的控件，从面板中继承来显示图片框中包含的微笑，当单击 ToolStripSplitButton 时会发生这种情况。

我试图模拟你想做的行为。所以这里有一些代码：

```
public partial class Form1 : Form
{
    public Form1()
    {
        InitializeComponent();

        this.SuspendLayout();

        List<Bitmap> Smiles = new List<Bitmap>(); //Add images

        ToolStripSplitButton _toolStripSplitButton = new ToolStripSplitButton();
        _toolStripSplitButton.Size = new Size(23, 23);
        //_toolStripSplitButton.Image = myImage; //Add the image of the stripSplitButton

        ToolStrip _toolStrip = new ToolStrip();
        _toolStrip.Size = new Size(ClientSize.Width, 10);
        _toolStrip.Location = new Point(0, this.ClientSize.Height - _toolStrip.Height);
        _toolStrip.BackColor = Color.LightGray;
        _toolStrip.Dock = DockStyle.Bottom;
        _toolStrip.Items.AddRange(new ToolStripItem[] { _toolStripSplitButton });

        SmileBox smilebox = new SmileBox(new Point(_toolStripSplitButton.Bounds.Location.X, _toolStrip.Location.Y - 18), 6);
        smilebox.Visible = false;

        Controls.Add(smilebox);

        foreach (Bitmap bmp in Smiles)
            smilebox.AddItem(bmp);

        _toolStripSplitButton.Click += new EventHandler(delegate(object sender, EventArgs e)
        {
            smilebox.Visible = true;
        });

        Click += new EventHandler(delegate(object sender, EventArgs e)
        {
            smilebox.Visible = false;
        });

        this.Controls.Add(_toolStrip);
        this.ResumeLayout();
    }

    void Form1_Click(object sender, EventArgs e)
    {
        throw new NotImplementedException();
    }
}

class SmileBox : Panel
{
    public List<Item> Items
    {
        get;
        set;
    }

    Size _ItemSpace = new Size(20, 20);
    Point _ItemLocation;
    int _rowelements = 0;

    public SmileBox(Point Location, int RowElements)
    {
        BackColor = Color.LightGray;

        Height = _ItemSpace.Height;
        Width = _ItemSpace.Width * RowElements;

        this.Location = new Point(Location.X, Location.Y - Height);
        _ItemLocation = new Point(0, 0);
        _rowelements = RowElements;
    }

    int count = 1;
    public void AddItem(Bitmap Image)
    {
        Item item = new Item(_ItemSpace, _ItemLocation, Image);

        if (_ItemLocation.X + _ItemSpace.Width >= Width)
            _ItemLocation = new Point(0, _ItemLocation.Y);
        else
            _ItemLocation = new Point(_ItemLocation.X + _ItemSpace.Width, _ItemLocation.Y);

        if (count == _rowelements)
        {
            _ItemLocation = new Point(_ItemLocation.X, _ItemLocation.Y + _ItemSpace.Height);
            Height += _ItemSpace.Height;
            Location = new Point(Location.X, Location.Y - _ItemSpace.Height);

            count = 0;
        }

        count++;

        Controls.Add(item);
    }
}

class Item : PictureBox
{
    int _BorderSpace = 2;

    public Item(Size Size, Point Location, Bitmap Image)
    {
        this.Size = new Size(Size.Width - 2 * _BorderSpace, Size.Height - 2 * _BorderSpace);
        this.Location = new Point(Location.X + _BorderSpace, Location.Y + _BorderSpace);
        this.Image = new Bitmap(Image, this.ClientSize);

        Click += new EventHandler(delegate(object sender, EventArgs e)
        {
            //Here what do you want to do when the user click on the smile
        });

        MouseEnter += new EventHandler(delegate(object sender, EventArgs e)
        {
            Focus();
            Invalidate();
        });
    }

    protected override void OnMouseDown(MouseEventArgs e)
    {
        this.Focus();
        base.OnMouseDown(e);
    }

    protected override void OnEnter(EventArgs e)
    {
        this.Invalidate();
        base.OnEnter(e);
    }

    protected override void OnLeave(EventArgs e)
    {
        this.Invalidate();
        base.OnLeave(e);
    }

    protected override void OnPaint(PaintEventArgs pe)
    {
        base.OnPaint(pe);

        if (this.Focused)
        {
            ClientRectangle.Inflate(-1, -1);
            Rectangle rect = ClientRectangle;
            ControlPaint.DrawFocusRectangle(pe.Graphics, rect);
        }
    }
} 
```

这是创建此代码的快照：

![在此处输入图像描述](../Images/7d4661b53ac832f5cfd4f053b2e95117.png)

当你微笑结束时：

![在此处输入图像描述](../Images/cf2c160f620ccbc5d7ee79db68427161.png)

在这里您可以单击单个项目。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T08:58:08.553

创建一个用户控件或一个新表单（如果你想要一个浮动的东西），每个表情都带有图片框。每当用户单击图片框（单击事件）时，您都可以注册单击并将笑脸粘贴到适当的位置。

实际上，您可以创建一个新的图片框类来继承内置类的所有内容，然后添加一个包含笑脸代码的公共字符串。您在事件中获得了发送者对象，因此您所要做的就是在 Click 事件的函数中读取该字符串。

# javascript - 从另一个域加载 CSS 和 JS 文件并从一致的 URL 提供资源

> ID：10894205
> 
> 赞同：1
> 
> 时间：2012-06-05T08:48:59.240
> 
> 标签：javascript, css

我有一个网站，它变得有点大，并且建立在一个超级限制平台（SBI）上。在那里，您必须遵循他们的文件结构并将所有内容放在适当的文件夹中，然后通过他们的界面手动上传每个文件。我有很酷的 HTML5 模板和一些带有大量小文件和图像的 Javascript，因此使用 Filezilla 将所有这些内容上传到 Hostgator 托管的我的 OTHER DOMAIN 会更容易，然后只需将我的 SBI 站点中的 css 和 js 文件引用到他们的在我的 Hostgator 的域中的位置。

这种方法有什么潜在的问题吗？

我问的原因是因为昨天我看到了谷歌关于从一致的 URL 提供资源的文章：[https](https://developers.google.com/speed/docs/best-practices/payload#duplicate_resources) ://developers.google.com/speed/docs/best-practices/payload#duplicate_resources但是，我可能会误解它的含义方法。[当我在这里https://developers.google.com/speed/pagespeed/insights](https://developers.google.com/speed/pagespeed/insights)将我的实际 URL 放在 Google 的页面速度洞察力测试时，它建议我从一致的 URL 提供资源，但在细节上它并没有抱怨我的CSS 和 JS 文件，它只抱怨 Facebook，像这样：

此页面的建议：以下资源具有相同的内容，但来自不同的 URL。从一致的 URL 提供这些资源以保存 1 个请求和 24.3KiB。http://static.ak.facebook.com/.../xd_arbiter.php?... https://s-static.ak.facebook.com/.../xd_arbiter.php?...

感谢您阅读本文。提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T08:55:07.950

提供来自不同域的静态内容是常见的做法，我认为那里没有任何问题 - 它与您用于提供它的服务器一样安全可靠。

facebook 警告可能意味着您正在加载相同的 FB API 脚本两次，或者它可能只是 FB 开发人员所做的一些黑魔法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-05T08:55:20.983

将文件托管在不同的站点上应该不会有任何问题。您的用户可能会遇到页面加载速度稍慢的情况，因为他们的机器必须进行更多的 DNS 查找，另一方面，大多数 Web 浏览器最多只能同时从主机下载 2 个文件，因此将主机加倍可以同时下载加倍。关于 Facebook 的警告是因为从两个不同的地方下载了两次相同的脚本，这并不理想，但我不熟悉 Facebook api，所以我不确定这是否有帮助。

# asp.net - 只需在 aspx 页面中/上显示 RSS 提要

> ID：10894206
> 
> 赞同：0
> 
> 时间：2012-06-05T08:49:09.317
> 
> 标签：asp.net, rss, rss-reader

也许我在这里是一个 n00b，但对于我的生活，我找不到一个简单的类型解决方案来在 aspx 页面中显示 rss 提要？

我正在寻找一个简单的解决方案，因为当 Firefox 被指向一个 rss 提要时，它只是简单地显示它，没有刺激，没有大惊小怪。我不想进入 xml 并对其进行广泛格式化。我只想要一个基本的提要，用字体和 a:styles 设置它的样式。而已。

有任何想法吗？

编辑：

我正在尝试在 aspx 页面中显示一个 worpress“提要”...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T08:57:43.950

最简单的解决方案是将其显示在 iframe 中，浏览器将负责格式化。否则，您需要解析 xml 并为其每个元素和/或属性创建适当的 html 标记。

# java - 在java中将字符串转换为java.util.date格式

> ID：10894212
> 
> 赞同：5
> 
> 时间：2012-06-05T08:49:28.720
> 
> 标签：java, string, datetime, date, date-conversion

我有这样的字符串。

```
Thu Oct 07 11:31:50 IST 2010 
```

我想将其转换为确切的日期时间格式以将其存储在 SQL 中。

熟悉这么多字符串到日期的转换，如下所示。

```
String dateString = "2001/03/09";

SimpleDateFormat dateFormat = new SimpleDateFormat("yyyy/mm/dd");
Date convertedDate = dateFormat.parse(dateString); 
```

但我需要将一个字符串转换`Thu Oct 07 11:31:50 IST 2010` 为带有时间戳的日期格式。

谁能解释将其转换为其 java.util.Date 格式的正确方法。？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-05T08:55:30.393

试试这个：

```
SimpleDateFormat dateFormat = new SimpleDateFormat("EEE MMM dd HH:mm:ss z yyyy"); 
```

为了将来参考阅读 SimpleDateFormat 类： [http ://docs.oracle.com/javase/7/docs/api/java/text/SimpleDateFormat.html](http://docs.oracle.com/javase/7/docs/api/java/text/SimpleDateFormat.html)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-05T08:57:05.897

使用这种[格式](http://docs.oracle.com/javase/1.4.2/docs/api/java/text/SimpleDateFormat.html)-' `EEE MMM dd HH:mm:ss z yyyy`'

```
Date date = new SimpleDateFormat("EEE MMM dd HH:mm:ss z yyyy")
                      .parse("Thu Oct 07 11:31:50 IST 2010");
System.out.println(date); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-05T08:59:11.627

你不能像下面那样做吗

```
 String str = "Thu Oct 07 11:31:50 IST 2010";
   SimpleDateFormat sdf = new SimpleDateFormat("E MMM dd hh:mm:ss   'IST' yyyy");
   SimpleDateFormat sdf2 = new SimpleDateFormat("yyyy/MM/dd");
   System.out.println(sdf2.format(sdf.parse(str))); 
```

# sql-server - 为什么我桌面上的 ODBC 查询在快速连续运行多个查询后被 sql server 阻止？

> ID：10894214
> 
> 赞同：2
> 
> 时间：2012-06-05T08:49:37.783
> 
> 标签：sql-server, sql-server-native-client

我通常使用 Visual Foxpro 9.0 创建从台式计算机到运行在 Windows Enterprise Server (2003) 上的 MS SQL Server 2005 的查询。我的查询是重复的，有时，一个会话会快速连续地查询 SQL 服务器 200,000 次。前几天，我的程序运行良好，但突然 SQL Server 拒绝处理查询。

在检查 SQL Server 中的日志时，我发现某个`spid`正在杀死我的查询进程：

> 进程 ID 71 被主机名 SQLSERVER、主机进程 ID xxxx 杀死。

我很困惑，因为主机名不是我要查询的 SQL Server，而是另一个 SQL Server。

从活动监视器中，我注意到有问题的进程 ID 具有以下信息：

```
62   NO   sa   master   sleeping    0   AWAITING COMMAND   Sql Agent - Generic Refresher .. 
```

详细信息显示一条消息：

> 设置 NO_BROWSETABLE ON

最后，考虑到这可能是 Visual FoxPro 的问题，我尝试从 SQL Server Management Studio 中的台式机运行查询，但在尝试查询 SQL Server 时仍然遇到同样的问题：

> 向服务器发送请求时发生传输级错误。（提供者：TCP 提供者，错误：0 - 现有连接被远程主机强行关闭。）

这令人难以置信，因为我能够建立连接，但我的查询被服务器拒绝。再次，认为我的桌面是问题，我尝试从另一台计算机运行查询。起初它正在运行，然后突然发生了同样的问题。现在这两个桌面被服务器拒绝了。

我在想这可能是一种安全，但我不知道如何解决这个问题。

我们还尝试将我们的数据库备份恢复到另一台主机，同样的情况发生了......起初很好，然后在几次查询会话后出现了问题。

以下是 ODBC SQL Server 驱动程序：

*   用于 Sql Server 的 Microsoft Ole DB 提供程序
*   Sql Server 原生客户端 10.0
*   Sql Server 原生客户端 11.0

我在网上搜索了一个可能的解决方案，并尝试了建议的解决方案，`spid`阻塞、烟囱卸载、rss 等，但无济于事。请，有需要的专家指教！

先感谢您。

# ios - 用户从 Facebook 应用程序中删除之前添加的授权后，iOS 应用程序的预期行为？

> ID：10894216
> 
> 赞同：0
> 
> 时间：2012-06-05T08:49:50.560
> 
> 标签：ios, facebook, authorization

通过在游戏启动时初始化然后通过首先检查会话有效性并在需要时触发登录来发布消息，我成功地从我们的 Unity iOS 游戏发布到 Facebook。

第一次打电话时，我从 Facebook 应用程序授权游戏。尝试再次启动该过程，我转到 Facebook 应用首选项并删除应用授权。

现在，当我尝试从游戏中再次发帖时，发帖消息完成处理程序没有错误，但帖子没有出现在用户的墙上。

纠正这个问题的过程是什么？有没有办法在发布之前检查游戏是否已获得授权，如果没有则要求重新授权？还是用户决定是最终决定，他们需要重新安装应用程序以重置所有内容？

尽管我正在使用 Prime31 的 Unity 的 Facebook 插件，但我对这个问题的 iOS SDK 答案很感兴趣。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T09:56:07.140

你会得到一个需要处理的异常。

```
- (void)request:(FBRequest *)request didFailWithError:(NSError *)error{

    NSLog(@"didFailWithError : %@",[error description]);

    NSDictionary* userinfo=[error userInfo];
    NSString *type=[[userinfo valueForKey:@"error"]valueForKey:@"type"];
    if([type isEqualToString:@"OAuthException"]){
        NSLog(@"Exception from oauth let's take new token");
        [facebook authorize:_permissions delegate:self];
    }

} 
```

使用此委托函数来处理异常。

# android - 退出应用程序时Android应用程序强制关闭

> ID：10894217
> 
> 赞同：0
> 
> 时间：2012-06-05T08:49:51.003
> 
> 标签：android

我的 android 应用程序中的另一个问题。当我单击主页按钮时，它会退出应用程序但说`Sorry, the application has stopped unexpectedly`

我的主页按钮的代码是

```
ImageView home  =   (ImageView)findViewById(R.id.home1);
    home.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View arg0) {
            // TODO Auto-generated method stub
            kalma1.stop();
            Intent i =new Intent(Kalma1.this, null);
            i.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
            finish();
        }
    }); 
```

控制台显示以下内容

```
GC_EXTERNAL_ALLOC freed 1110 objects / 70984 bytes in 77ms
Shutting down VM
threadid=1: thread exiting with uncaught exception (group=0x4001d800)
FATAL EXCEPTION: main
java.lang.NullPointerException
at android.content.ComponentName.<init>(ComponentName.java:76)
at android.content.Intent.<init>  (Intent.java:2678)
at com.kalmas.Kalma1$5.onClick(Kalma1.java:74)
at android.view.View.performClick(View.java:2408)
at android.view.View$PerformClick.run(View.java:8816)
at android.os.Handler.handleCallback(Handler.java:587)
at  android.os.Handler.dispatchMessage(Handler.java:92)
at android.os.Looper.loop(Looper.java:123)
at android.app.ActivityThread.main(ActivityThread.java:4627)
at  java.lang.reflect.Method.invokeNative(Native Method)
at java.lang.reflect.Method.invoke(Method.java:521)
at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
at dalvik.system.NativeStart.main(Native Method)
Sending signal. PID: 368 SIG: 9 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-05T08:54:34.377

如果您只想完成该活动，请不要使用任何意图，只需编写`finish()`

```
home.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View arg0) {
            // TODO Auto-generated method stub

            finish();
        }
    }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T08:53:22.933

```
Intent i =new Intent(Kalma1.this, null); 
```

是造成这种情况的主要原因`NullPointerException`。

您必须提及要导航到的活动的名称作为第二个参数。

## 编辑

Android 的设计不支持选择退出应用程序，而是由操作系统管理它。您可以通过其相应的 Intent 调出 Home 应用程序：

```
Intent intent = new Intent(Intent.ACTION_MAIN);
intent.addCategory(Intent.CATEGORY_HOME);
intent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
startActivity(intent); 
```

代替

```
Intent i =new Intent(Kalma1.this, null); 
```

请在 SO 上参考[此问题](https://stackoverflow.com/questions/3226495/android-exit-application-code)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-05T08:54:30.580

您应该如下调用它来完成您当前的活动：

```
home.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View arg0) {
            // TODO Auto-generated method stub
            kalma1.stop();
            //Intent i =new Intent(Kalma1.this, null);
            //i.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
            finish();
        }
    }); 
```

# php - Google Calendar API 限制的数量是多少 - 更新 ACL

> ID：10894220
> 
> 赞同：0
> 
> 时间：2012-06-05T08:50:08.673
> 
> 标签：php, google-api

我试图通过 PHP 脚本添加一些谷歌日历，并更新这些日历的 ACL 以使其对我们的整个域用户可用。

一切顺利，除了我在创建一堆日历后收到此错误：

```
Zend_Gdata_App_HttpException: Expected response code 200, 
got 403 User has updated too many ACLs today. Please try again tomorrow. in
/Zend/Gdata/App.php on line 709 
```

各位大佬知道具体的数字是多少吗？这很有趣。我试着看这里并没有得到答案。

[https://developers.google.com/google-apps/calendar-resource/limits](https://developers.google.com/google-apps/calendar-resource/limits)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T13:28:10.100

[向您显示实时配额使用情况的 Google控制台](https://code.google.com/apis/console)位于 code.google.com：https://code.google.com/apis/console

# ruby - ruby - 返回当前类的实例

> ID：10894224
> 
> 赞同：1
> 
> 时间：2012-06-05T08:50:19.380
> 
> 标签：ruby, inheritance

我注意到如果我创建一个继承自的子类`Datetime`，`.now`它将返回子类实例，而不是`Datetime`实例。

```
class MyDateTime < DateTime
end

MyDateTime.now
>#<MyDateTime: 2012-06-05T16:42:57+08:00 ((2456084j,31377s,900801494n),+28800s,2299161j)> 
```

这似乎很神奇。我无法在自己的课堂上重现这种行为：

```
class A
  def self.a
   return A.new
  end
end

class B < A
end

B.a
#<A:0x00000001e22358> 
```

我试图阅读它的源代码，`DateTime`但它是用 C 编写的。是否可以编写一个类方法来返回它所属的类的实例？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-05T08:52:15.173

用自己试试：

```
class A
  def self.a
   return self.new
  end
end

class B < A
end

B.a 
```

# iphone - UITableView - 如何在用户滚动时保持表格行固定

> ID：10894227
> 
> 赞同：14
> 
> 时间：2012-06-05T08:50:28.400
> 
> 标签：iphone, ios, uitableview

我希望能够在用户滚动时修复 UITableView 中某些行的位置。

具体来说，我有一个表格，其中某些行是随后行的“标题”，我希望标题在用户向上滚动时保持在屏幕顶部。当用户滚动到下一个标题行将取代它的位置时，它就会移开。

一个类似的例子是 Any.DO 应用程序。“今天”、“明天”和“以后”表格行在屏幕上始终可见。

有人对如何实施有任何建议吗？

我目前正在考虑遵循 TableDidScroll 委托并将我自己的单元格放置在表格视图前面的适当位置。问题是，在其他时候，我真的希望这些单元格成为真正的表格单元格，以便它们可以例如由用户重新排序。

谢谢，

蒂姆

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-06-12T13:29:42.693

我一直在玩这个，我想出了一个简单的解决方案。

首先，我们向控制器添加一个 UITableViewCell 属性。这应该被初始化，使其看起来与我们将用于创建虚假节标题的行单元格完全相同。

接下来，我们截取表格视图的滚动

```
- (void)scrollViewDidScroll:(UIScrollView *)scrollView
{
    // Add some logic here to determine the section header. For example, use 
    // indexPathsForVisibleRows to get the visible index paths, from which you 
    // should be able to get the table view row that corresponds to the current 
    // section header. How this works will be implementation dependent.
    //
    // If the current section header has changed since the pervious scroll request 
    // (because a new one should now be at the top of the screen) then you should
    // update the contents.

    IndexPath *indexPathOfCurrentHeaderCell = ... // Depends on implementation
    UITableViewCell *headerCell = [self.tableView cellForRowAtIndexPath:indexPathOfCurrentHeaderCell];

    // If it exists then it's on screen. Hide our false header

    if (headerCell)
        self.cellHeader.hidden = true;

    // If it doesn't exist (not on screen) or if it's partially scrolled off the top,
    // position our false header at the top of the screen

    if (!headerCell || headerCell.frame.origin.y < self.tableView.contentOffset.y )
    {
        self.cellHeader.hidden = NO;
        self.cellHeader.frame = CGRectMake(0, self.tableView.contentOffset.y, self.cellHeader.frame.size.width, self.cellHeader.frame.size.height);
    }

    // Make sure it's on top of all other cells

    [self.tableView bringSubviewToFront:self.cellHeader];
} 
```

最后，我们需要拦截对该单元格的操作并做正确的事情......

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-05T09:21:22.770

`UITableView`这是普通实例中节标题的默认行为。如果要创建自定义标题，`tableView:viewForHeaderInSection:`请在表视图委托中实现该方法并返回标题的视图。

尽管您将不得不管理部分和行，而不仅仅是行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-06-25T14:47:50.263

**斯威夫特 5 解决方案**

```
var header: UIView?

func tableView(_ tableView: UITableView, cellForRowAt indexPath: IndexPath) -> UITableViewCell {
    let cell = tableView.dequeueReusableCell(indexPath: indexPath) as UITableViewCell
    header = cell.contentView
    return cell
}

func scrollViewDidScroll(_ scrollView: UIScrollView) {
    let headerCell = tableView.cellForRow(at: IndexPath(row: 0, section: 0))
    guard headerCell == nil || (headerCell!.frame.origin.y < self.tableView.contentOffset.y + headerCell!.frame.height/2) else {
        header?.isHidden = true
        return
    }
    guard let hdr = header else { return }
    hdr.isHidden = false
    hdr.frame = CGRect(x: 0, y: tableView.contentOffset.y, width: hdr.frame.size.width, height: hdr.frame.size.height)
    if !tableView.subviews.contains(hdr) {
        tableView.addSubview(hdr)
    }
    tableView.bringSubviewToFront(hdr)
} 
```

# python - 从标记化的 url 计算单词

> ID：10894228
> 
> 赞同：1
> 
> 时间：2012-06-05T08:50:33.343
> 
> 标签：python, count, tokenize, words

对 Python 非常陌生，希望你们能给我一些帮助。

我有一本关于伟大战争的书，想计算一个国家出现在书中的次数。到目前为止，我有这个：

```
>>> from __future__ import division 
>>> import nltk, re, pprint
>>> from urllib import urlopen
>>> url = "http://www.gutenberg.org/files/29270/29270.txt"
>>> raw = urlopen(url).read() 
>>> type(raw)
<type 'str'>
>>> len(raw)
1067008
>>> raw[:75]
'The Project Gutenberg EBook of The Story of the Great War, Volume II (of\r\nV'
>>> 
```

标记化。将字符串分解为单词和标点符号。

```
>>> tokens = nltk.word_tokenize(raw)
>>> type(tokens)
<type 'list'>
>>> len(tokens)
189743
>>> tokens[:10] //vind de eerste 10 tokens
['The', 'Project', 'Gutenberg', 'EBook', 'of', 'The', 'Story', 'of', 'the', 'Great']
>>> 
```

更正书的开头和结尾

```
 >>> raw.find("PART I")
    >>> 2629
    >>> raw.rfind("End of the Project Gutenberg")
    >>> 1047663
    >>> raw = raw[2629:1047663]
    >>> raw.find("PART I")
    >>> 0 
```

不幸的是，我不知道如何将这本书应用到字数中。我理想的结果是这样的：

```
Germany 2000
United Kingdom 1500
USA 1000
Holland 50
Belgium 150 
```

等等

请帮忙！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T08:54:24.620

Python 有一个内置方法来计算字符串中的子字符串。

```
from urllib import urlopen

url = "http://www.gutenberg.org/files/29270/29270.txt"
raw = urlopen(url).read()
raw = raw[raw.find("PART I"):raw.rfind("End of the Project Gutenberg")]

countries = ['Germany', 'United Kingdom', 'USA', 'Holland', 'Belgium']
for c in countries:
    print c, raw.count(c) 
```

生产

```
Germany 117
United Kingdom 0
USA 0
Holland 10
Belgium 63 
```

编辑：eumiro 是对的，如果你想计算确切的单词，这不起作用。如果您想搜索确切的单词，请使用它：

```
import re
from urllib import urlopen

url = "http://www.gutenberg.org/files/29270/29270.txt"
raw = urlopen(url).read()
raw = raw[raw.find("PART I"):raw.rfind("End of the Project Gutenberg")]

for key, value in {c:len(re.findall(c + '[^A-Za-z]', raw)) for c in countries}.items():
    print key, value 
```

编辑：如果你想要行号：

```
from urllib import urlopen
import re
from collections import defaultdict

url = "http://www.gutenberg.org/files/29270/29270.txt"
raw = urlopen(url).readlines()

count = defaultdict(list)
countries = ['Germany', 'United Kingdom', 'USA', 'Holland', 'Belgium']
for c in countries:
    for nr, line in enumerate(raw):
        if re.search(c + r'[^A-Za-z]', line):
            count[c].append(nr + 1) #nr + 1 so the first line is 1 instead of 0
    print c, len(count[c]), 'lines:', count[c] 
```

# asp.net - 我如何从 json 中取出值并在 NSLog 中显示它们

> ID：10894235
> 
> 赞同：0
> 
> 时间：2012-06-05T08:50:58.280
> 
> 标签：asp.net, ios, xcode, json, dictionary

你好，我为 web 服务创建了一个 json 字符串，我想输出名称和描述以在 NSLog 中显示它。我怎样才能做到这一点。到目前为止，这是我的代码：

```
 dic = [NSJSONSerialization JSONObjectWithData:result options:kNilOptions error:nil];

NSLog(@"Results %@",[NSString stringWithFormat:@"%@",[[dic objectForKey:@"d"]objectForKey:@"Name"]]); 
```

我收到此错误：

```
-[__NSCFString objectForKey:]: unrecognized selector sent to instance 0x6b50f30 
```

当我在我的字典中创建一个 NSLog 时，我得到了这个：

```
{
d = "{
\n  \"Name\": \"Apple\",
\n  \"Beschreibung\": \"Steve Jobs ist tot\"}";
} 
```

我来自 werbservice 的 json 字符串如下所示：

```
string json = @"{
""Name"": ""Apple"",
""Beschreibung"": ""Steve Jobs ist tot""}"; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T09:24:39.977

做这种嵌套日志记录：

```
NSLog(@"Results %@",[NSString stringWithFormat:@"%@",[[dic objectForKey:@"d"]objectForKey:@"Name"]]); 
```

真的很棘手。我猜想返回的任何对象“d”不一定是 NSDictionary 对象，也许是 NSArray ？

尝试这样的事情：

```
NSDictionary * dic = [NSJSONSerialization JSONObjectWithData:result options:kNilOptions error:nil];

// this gives the whole NSDictionary output:
NSLog( @"Results %@", [dic description] );

// get the dictionary that corresponds to the key "d"
NSDictionary * dDic = [dic objectForKey: @"d"];
if(dDic)
{
    NSString * nameObject = [dDic objectForKey: @"Name"];
    if(nameObject)
    {
        NSLog( @"object for key 'Name' is %@", nameObject );
    } else {
        NSLog( @"couldn't get object associated with key 'Name'" );
    }
} else {
    NSLog( @"couldn't get object associated with key 'd'") );
} 
```

看看它是否能帮助你弄清楚你的假设在哪个级别和哪个对象上被打破了。

# javascript - 需要在鼠标悬停时更改当前 div 中的图像和不同 div 中的图像

> ID：10894236
> 
> 赞同：0
> 
> 时间：2012-06-05T08:51:02.937
> 
> 标签：javascript, mouseover

我在 DW 中使用 .png 图像作为导入的翻转图像。将鼠标悬停在该图像上时，我希望图像发生变化，但我也希望另一个 div 中的内容发生变化。我可以一次改变一个或另一个，但不能同时改变。我一直在使用分号来分隔函数调用，但无济于事。

HTML

```
<div> 
   <a href="#" onmouseout="MM_swapImgRestore()"
               onmouseover="changeIt('images/change.jpg','animationbox');MM_swapImage('Image5','',images/'peaberryrollover.png',1);">
      <img src="images/peaberrybutton.png" width="170" height="200" id="Image5" />
   </a>
</div> 
```

Javascript

```
 <script type="text/javascript">
    function changeIt(imageName,objName)

    {
     var obj = document.getElementById(objName);

     var imgTag = "<img src='"+imageName+"' border='0' />";

     obj.innerHTML = imgTag;

     return;
     }

 function MM_swapImgRestore() { //v3.0
  var i,x,a=document.MM_sr; for(i=0;a&&i<a.length&&(x=a[i])&&x.oSrc;i++) x.src=x.oSrc;
}
function MM_preloadImages() { //v3.0
  var d=document; if(d.images){ if(!d.MM_p) d.MM_p=new Array();
    var i,j=d.MM_p.length,a=MM_preloadImages.arguments; for(i=0; i<a.length; i++)
    if (a[i].indexOf("#")!=0){ d.MM_p[j]=new Image; d.MM_p[j++].src=a[i];}}
}

function MM_findObj(n, d) { //v4.01
  var p,i,x;  if(!d) d=document; if((p=n.indexOf("?"))>0&&parent.frames.length) {
    d=parent.frames[n.substring(p+1)].document; n=n.substring(0,p);}
  if(!(x=d[n])&&d.all) x=d.all[n]; for (i=0;!x&&i<d.forms.length;i++) x=d.forms[i][n];
  for(i=0;!x&&d.layers&&i<d.layers.length;i++) x=MM_findObj(n,d.layers[i].document);
  if(!x && d.getElementById) x=d.getElementById(n); return x;
}

function MM_swapImage() { //v3.0
  var i,j=0,x,a=MM_swapImage.arguments; document.MM_sr=new Array; for(i=0;i<(a.length-2);i+=3)
   if ((x=MM_findObj(a[i]))!=null){document.MM_sr[j++]=x; if(!x.oSrc) x.oSrc=x.src; x.src=a[i+2];}
}
</script> 
```

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T08:55:41.243

看看[这个页面](http://www.webdevelopersnotes.com/tutorials/javascript/changing_images_on_mouseover_mouseout_javascript.php3)，他们演示了他们如何在鼠标悬停事件上更改图片。很简单：

```
<div>
  <a href="some.html" onmouseover="document.imageTag.src='pic2.png'"
                      onmouseout ="document.imageTag.src='pic1.png'">

    <img src="pic1.png" name="imageTag" 
         width="100" height="50" border="0" alt="..." />

  </a>
</div> 
```

这样你就不需要所有的 javascript

# javascript - 如何访问存储在指标对象中的日期？

> ID：10894242
> 
> 赞同：0
> 
> 时间：2012-06-05T08:51:29.587
> 
> 标签：javascript, google-maps, google-maps-api-3, firebug

我有一个地图应用程序，在界面中，有一个组合框包含 5 个指标（HDI、预期寿命、..、..、..）。我使用 FireBug 1.9.2 检查了每个指标的“数据”，我发现在每个指标的“数据”中都列出了指标的名称，其中有一个日期列表，例如 (1960.. ...直到 2010 年）其中一些日期包含根据其相应指标的数据，而其中一些日期不包含数据“”。

我想要做的是检查每个指标的日期，如果日期包含数据或值，我想存储该日期，否则对日期不做任何事情。

请查看我发布的快照，也许它会让我更清楚地了解我想要做什么。

也请看看我是如何尝试实现这个目标的，但不幸的是结果不是我想要的：

```
function getYearsByIndicator(layername, indicator) {

var matchingLayers;
var vectorLayer;
var yearStore;

// get vector layer
matchingLayers = map.getLayersByName(layername);
if (matchingLayers.length == 1) {
    vectorLayer = matchingLayers[0];
}
else {
    console.log("getThematicStyleMap: Warning, the layer " + layername + " was not found!");
    return;
}

for (var i=0;i < vectorLayer.features.length;i++) {
    if (vectorLayer.features[i]['data'][indicator]) {
        // extract keys here!
    }
}

//build store containing the extracted keys

//return the store
return yearStore; 
```

}

![图像1](../Images/353226b6332db42c7565805df7221dd6.png) ![img2](../Images/1ad5da65fad30e1a1718a072acd4a16b.png) ![图像3](../Images/f28d24a837195699cf0cc666ba913ff6.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T09:43:18.577

由于它是一个对象，我想您可以通过以下方式访问它：

```
$data->{propertyname} 
```

编辑：我很困惑，我猜你使用的是 javascript 而不是 PHP（这是你的标签之一）。当您使用 javascript 时，您可以访问值，例如访问数组`variable["property"]["subproperty"]`等

EDIT2：您可以使用

```
 if(data["HDI"][1980] != "")
   {
      //date is not empty
   } 
```

EDIT3：使用以下内容迭代内容：

```
for(var key in data["HDI"])
{
  //Key is 1980 etc
  if(data["HDI"][key] != "")
  {
    //Date is not empty
  }
} 
```

# ruby-on-rails - 在活动脚手架中隐藏编辑按钮而不排除更新操作

> ID：10894243
> 
> 赞同：0
> 
> 时间：2012-06-05T08:51:31.797
> 
> 标签：ruby-on-rails, scaffold

我只想隐藏编辑按钮而不排除 :update 操作。我正在使用内置的编辑功能创建一个自定义编辑按钮，该按钮根据该记录的条件显示。排除该操作，将删除在自定义区域中使用编辑的功能。请建议

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T08:58:05.417

生成控制器（包括操作）后，只需从文件`:update`中删除按钮即可。`app/views/<controller>/<page>.html.erb`

注意：在这些相同的文件中，您可以在完成后添加自定义按钮。

# asp.net-mvc - 如何将事件添加到以这种方式添加的下拉列表@Html.DropDownList("List")？

> ID：10894244
> 
> 赞同：1
> 
> 时间：2012-06-05T08:51:32.670
> 
> 标签：asp.net-mvc

如何将一个或多个事件添加到以这种方式添加的下拉列表中

@Html.DropDownList("List") ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T09:08:29.150

**如果你习惯使用 jQuery:**，试试这个：

```
 $("#DropDownListID").change(function () {
        var selectedValue = $(this).val();
        //Do whatever you want to do on selection changes here
     }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-05T09:07:56.737

```
@Html.DropDownList("PageItemDD", (SelectList)ViewBag.itemsPerPage, new { onchange = "document.location.href = '/List?ipp=' + this.options[this.selectedIndex].value;" }) 
```

部分（DropDownList的`new { onchange = "document.location.href = '/List?ipp=' + this.options[this.selectedIndex].value;" }`第三个参数）是 html 属性。在这种情况下，我有一个`onchange`加载此页面：`/List?ipp= the value of the dropdownlist`

# javascript - 使用 toggleclass 在 3 个类之间切换

> ID：10894250
> 
> 赞同：4
> 
> 时间：2012-06-05T08:52:04.477
> 
> 标签：javascript, jquery, html, toggleclass

我有 3 张图像要在它们之间切换。我将它们中的每一个放在一个类中并在 css 中更改它的图像。我现在可以在 2 个类之间切换，但是当我添加第三个类时，代码不起作用。他们中的任何一个班级都可以成为起始班级。

```
 $('.one').click(function(){                             
        $(this).toggleClass("two");
        $(this).toggleClass("one");

    });
     $('.two').click(function(){                             
        $(this).toggleClass("one");
        $(this).toggleClass("two");

    }); 
```

当我添加这一行时：

```
 $(this).toggleClass("three"); 
```

根本不切换....

你知道我可以把它们都放在一个函数中的方法吗？

谢谢。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-06-05T09:09:34.460

小提琴示例：http: [//jsfiddle.net/KdfEV/](http://jsfiddle.net/KdfEV/)

此代码将允许您循环浏览一系列已定义的类

```
$('.one, .two, .three').click(function() {                             
    this.className = {
       three : 'one', one: 'two', two: 'three'
    }[this.className];
}); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-05T08:54:17.907

```
$('.one, .two, .three').click(function(){                             
        $(this).toggleClass("one, two, three");
    }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-05T08:54:27.313

最安全的方法是删除不需要的类并添加所需的类：

```
// Switch to class 'three'
$(this).removeClass('one').removeClass('two').addClass('three'); 
```

# iphone - 弹出时如何从主视图调用函数

> ID：10894251
> 
> 赞同：0
> 
> 时间：2012-06-05T08:52:05.417
> 
> 标签：iphone, ios, xcode, popviewcontroller

这可能已经被问过几次了，我如何在弹回时调用一个函数？NSlog 显示文本，但弹出后视图上不显示任何内容。

列表弹出到表格，但图像未显示

DrinkListViewController

```
DrinkTableViewController *drinkTable = [[DrinkTableViewController alloc]init];

- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath 
{
[[self navigationController] popToViewController:obj animated:NO];
                                 [drinkTable addImgViewAfterPopTime];
} 
```

DrinkTableViewController

```
-(void)addImgViewAfterPopTime
{
    [self performSelector:@selector(addImgViewAfterPop) withObject:nil afterDelay:3];
    NSLog(@"casasasasa");
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T09:05:59.787

您可以制作委托方法。并在推动 viewController 的同时使

`controller.delegate = self;`

然后在弹出时您可以调用该委托方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-05T09:11:08.307

当您调用 DrinkTableViewController *drinkTable = [[DrinkTableViewController alloc]init]; 时，您正在创建 DrinkTableViewController 的新实例

因此，您可以这样做，而不是这样做：

DrinkListViewController.h

```
id m_RequestTarget;
SEL m_RequestSelector; 
```

DrinkListViewController.m

```
-(void)setTarget:(id)inTarget Selector:(SEL)inSelector
{   
    m_RequestTarget = inTarget;
    m_RequestSelector = inSelector;
}

- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath 
{
   if ([m_RequestTarget respondsToSelector:m_RequestSelector]) {
                    [m_RequestTarget performSelector:m_RequestSelector withObject:nil];
    }
   [[self navigationController] popToViewController:obj animated:NO];

} 
```

在 DrinkTableViewController.m 中初始化 DrinkListViewController 时，调用 setTarget 方法如下：

```
[theDrinkListViewControllerObj setTarget:self andSelector:@selector(addImgViewAfterPopTime)]; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-05T08:54:46.260

使用 NSNotification 来代替这种复杂的情况，在弹回时发布通知。

# zend-framework - 如何在加载 layout.phtml 之前初始化 db 插件

> ID：10894252
> 
> 赞同：0
> 
> 时间：2012-06-05T08:52:10.903
> 
> 标签：zend-framework, layout, load

我想根据存储在数据库中的用户权限在运行时创建菜单，我使用 ACL 来获取和撤销资源..

现在我想根据用户权限加载菜单。

这是我的 navigation.phtml 子页面

```
<?php

 $resourceLoader = new Application_Plugin_ResourceLoader();
 $namaspace = new Zend_Session_Namespace('Zend_Auth');

 $db = $registry::get('pmodel_Db');

 $roleId = $namaspace->id;
 $module = $resourceLoader->getUserModulesPrivileges($db, $roleId);

 var_dump($module);

?> 
```

我在引导程序中加载数据库 pmodel_Db，我遇到了一个异常

```
 Notice: Undefined variable: registry in D:\wamp\www\zend_apps\inspect\application\layouts\scripts\navigation.phtml on line 6. 
```

问题意味着包含 navigation.phtml 页面的 layout.phtml`_initDbRegistry()`在引导文件中的方法之前加载。

如何在加载布局之前加载 pmodel_Db ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T10:20:55.117

你必须使用这个

```
 $db = Zend_Registry::get('pmodel_Db'); 
```

> 问题意味着包含 navigation.phtml 页面的 layout.phtml 在引导文件中的 _initDbRegistry() 方法之前加载

你错了，Zend 在引导所需资源之前不会分派请求。

您访问注册表的方式是错误的。

# yii - 动态添加菜单项时 CMenu URL 属性的使用？

> ID：10894254
> 
> 赞同：2
> 
> 时间：2012-06-05T08:52:30.233
> 
> 标签：yii, cmenu

不确定这是否是最佳实践，但我们希望在**布局视图**上有一个**菜单，并作为****URL 参数**传递一个应该检索一些数据的值。

 ****菜单将类似于：

```
<ul id="menu">
<li>districtA</li>
<li>districtB</li>
<li>districtC</li>
</ul> 
```

所以像：

```
'url'=>array('/event/getEventsByDistrict', 'district'=>id), 
```

有更好的方法吗？

我的意思是，通过这样做，我相信，如果将一个新区添加到数据库中，那么我们应该手动编辑菜单，将相应的 id 放在那里？有没有办法从数据库中检索该 id，以便每次呈现菜单时，我们可以确定该新项目将链接到该新项目的适当 id（刚刚添加的区域？）？

这对你有意义吗？

似乎唯一的方法可能是创建一个包装类或其他东西？

也许地区不是一个很好的例子，它们不会经常变化，但让我们想象一下经常变化的东西。

请指教

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T09:10:05.720

如果我正确理解你的问题，这应该可以工作，假设你的`District`模型有一个`name`属性。

```
$districts = DistrictModel::model()->findAll();
$menu = array();
foreach($districts as $district) $menu[] = array('label'=>$district->name, 'url'=>array('event/getEventsByDistrict', 'district'=>$district->id));

$this->widget('zii.widgets.CMenu', array(
    'items'=>$menu
)); 
```****

# javascript - 如何从 js 映射中获取键和值

> ID：10894255
> 
> 赞同：0
> 
> 时间：2012-06-05T08:52:31.487
> 
> 标签：javascript, jquery

我正在尝试在 jquery 中编写自定义网格，因此查看了 jquery 插件开发。在其中，我为网格分配了标题并希望分配行，但在为行分配值时需要帮助。

```
var headers=new Array();
headers=["Name","Host Name","Description","Type","Last Update Time"]; 
```

我想创建一个像下面这样的地图数组，它们将在我的网格中分配为行，但在理解如何分配时需要帮助。类似于`headers`这些行可以是通用的。

```
var myrows = [
                {cfgid:0, name:"Lukas Arts",host:"baxton", description:"test",type:"Dev",updateDate:"Thu Apr 26 04:31:10 IST 2012"},
                {cfgid:1, name:"Adiga",host:"beetle", description:"test",type:"Dev",updateDate:"Fri Apr 27 07:21:43 IST 2012"},
                {cfgid:2, name:"Max Miller",host:"barry", description:"test",type:"Dev",updateDate:"Mon Apr 16 04:11:40 IST 2012"}
                ]; 
```

这是代码

```
jQuery.fn.abcGrid = function (tableid, heading, data, options) {
    abcoptions = jQuery.extend ({
    tableCss: "tableForms",
    tableHeaderCss: "tableHeading",
    label: "Informatica CSM",
    header: heading,
    rows: data
    }, options);

    var ele_table='';
    var ele_table_start='<table id="'+abcoptions.tableid+'" class="'+abcoptions.tableCss+'"><tbody>';
    var ele_table_end='</tbody></table>';
    var ele_table_header='';
    var ele_table_row='';

    var tempHeader='';
    var tempRow='';

    /*Table header creation*/
    for(var i=0;i<abcoptions.header.length;i++)
        tempHeader+='<td class="'+abcoptions.tableHeaderCss+'">'+abcoptions.header[i]+'</th>';
    ele_table_header='<tr>'+tempHeader+'</tr>';

    ele_table=ele_table_start+ele_table_header+ele_table_end;
    $(this).html(ele_table);
    //it creates only headers properly
}; 
```

我将此代码称为

```
$('#updateDiv').abcGrid("tabel1", headers, myrows); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T09:59:01.440

要获取地图中某个项目的值，您可以执行以下操作：

```
abcoptions.rows[i].cfgid 
```

这`rows[i]`是你的地图——你可以把钥匙放在点之后，或者`rows[i]['cfgid']`

-- 编辑：重命名`header`为`rows`.

# node.js - node.js中的旅程和路由器有什么区别？

> ID：10894259
> 
> 赞同：1
> 
> 时间：2012-06-05T08:52:54.367
> 
> 标签：node.js

我对 node.js 中的旅程和路由器感到困惑。任何人都可以告诉我 node.js 中的旅程和路由器之间的确切区别吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T08:58:12.753

[Journey](https://github.com/cloudhead/journey) *是*Node.js 的 HTTP 请求路由器模块。它不是核心 Node.js 的一部分。HTTP 请求路由器是一个库，它有助于根据 HTTP 请求的细节选择要调用的代码。

# python - 在 Python 中抓取网页时遇到的问题

> ID：10894263
> 
> 赞同：0
> 
> 时间：2012-06-05T08:52:59.130
> 
> 标签：python

因此，我编写了一个最小的函数来从网页中抓取所有文本：

```
url = 'http://www.brainpickings.org'
request = requests.get(url)
soup_data = BeautifulSoup(request.content)
texts = soup_data.findAll(text=True)

def visible(element):
    if element.parent.name in ['style', 'script', '[document]', 'head', 'title']:
        return False

    return True
print filter(visible,texts) 
```

但是，它并没有那么顺利。那里仍然有不必要的标签。此外，如果我尝试对我不想要的各种字符进行 reg-ex 删除，我会得到一个

```
error     elif re.match('<!--.*-->', str(element)):
UnicodeEncodeError: 'ascii' codec can't encode character u'\u2019' in position 209: ordinal not in range(128) 
```

因此，我怎样才能更好地改进它以使其更好？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T09:31:19.077

使用[lxml](http://lxml.de/)这很容易：

```
from lxml import html

doc = html.fromstring(content)
print doc.text_content() 
```

**编辑**：过滤头部可以如下完成：

```
print doc.body.text_content() 
```

# java - 有没有办法让枚举在没有方法的情况下返回值

> ID：10894266
> 
> 赞同：0
> 
> 时间：2012-06-05T08:53:30.330
> 
> 标签：java, enums

如果这是我的枚举：

```
public enum Planet {
    MERCURY (3.303e+23),
    NEPTUNE (1.024e+26);

    private final double mass;   // in kilograms

    Planet(double mass) {
        this.mass = mass;
    }
    private double mass() { 
        return mass; 
    }
} 
```

我可以访问像

```
Planet.MERCURY.mass(); 
```

**有没有机会将枚举定义为“double”并让**

```
Planet.MERCURY; 
```

**返回双倍？**

无论如何，我主要对调用的外观感兴趣，以确保代码的可读性。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T08:55:26.070

不，这对于枚举的 Java 表示是不可能的。我个人觉得`Planet.MERCURY.mass()`更具可读性。

我想到的唯一稍微增加可读性的事情是制作质量`public final`而不是`private final`参考，`Planet.MERCURY.mass`但我会再考虑一下。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T08:57:41.570

您可以定义类而不是枚举：

```
public static class Planet {
    public static final double MERCURY = 3.303e+23;
} 
```

现在您可以获得价值：

```
Planet.MERCURY 
```

但是据我所知，使用枚举是不可能的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-05T09:14:30.890

如果您对外观感兴趣，那么我强烈建议您将当前的实现与`Planet.MERCURY.mass()`. 你无法获得更多的可读性。我也倾向于尽量缩短代码。但多年来我发现这只会带来更多问题。如果您想在长公式中使用汞的质量以保持一定的可读性，您可以在本地执行

```
double mMerc = Planet.MERCURY.mass();
// other local temp variables

double distance = Math.sqrt(G*mMerc*mRocket/F); 
```

或者。这种方法还使您以后可以非常轻松地添加更多常量（例如 distanceToSun、surfaceTemperature、eccentricity、albedo，...）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-05T13:26:04.677

您也可以将质量作为字符串返回，但它仅适用于字符串连接和期望字符串作为参数的方法，例如`System.out.println()`或`String.format()`

```
public enum Planet {
   MERCURY (3.303e+23),
   NEPTUNE (1.024e+26);

   private final double mass;   // in kilograms

   Planet(double mass) {
      this.mass = mass;
   }
   private double mass() { 
      return mass; 
   }

   public String toString() { 
      return String.valueOf(mass);
   }
} 
```

我同意先前的答案/评论，即详细`.mass()`方法是一种更具可读性/可维护性的解决方案

此外，您可以避免使用枚举、声明常量容器类，如下所示：

```
public class Planet { 
    public final static double MERCURY = 3.303e+23;
    public final static double NEPTUNE = 1.024e+26;
    // .... 

    // Make 'Planet' not easily instantiable for others
    private Planet() {}
} 
```

像这样你可以毫无问题地使用 Planet.MERCURY 作为双精度

# ajax - Google 可以跟踪嵌套的 hashbang URL 吗？

> ID：10894272
> 
> 赞同：0
> 
> 时间：2012-06-05T08:53:45.400
> 
> 标签：ajax, google-analytics, hashbang

我创建了一个 onepager 网站，谷歌能够通过 !#my-url <-> _escaped_fragment_ "translation" 加载每个内容来跟踪主站点的 ajax 加载内容。包含用于显示/加载产品数据的 URL。谷歌似乎没有阅读那些二级 ajax 内容。

有没有办法告诉谷歌阅读这些内容？

提前致谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T19:23:09.943

TBH I'm not 100% sure what you are asking here, perhaps update your question to give some more details (more specific URL "this vs. this" examples, *what* you are wanting to track (a general page view? an event? etc..) but assuming you are just looking to track a page view, you can pop

`_gaq.push(['_trackPageview']);`

whenever you want, and you can keep calling it (for instance, inject it into your response from AJAX calls). It also allows for an option 2nd element to the array you pass, to specify what you want the page name to be (by default if you don't specify, it is just the current URL):

`_gaq.push(['_trackPageview','whatever you want here']);`

# plugins - 在插件中创建活动响应实体

> ID：10894273
> 
> 赞同：0
> 
> 时间：2012-06-05T08:53:53.717
> 
> 标签：plugins, dynamics-crm-2011

我编写了在通话步骤中触发的插件是 setstatedynamic。我在我的插件步骤中注册帖子图像。我从帖子图像中获取电话实体。当我在活动响应中将 phonecallid 设置为 origanitingactivityid

```
(
like

campaignResponse.OriginatingActivityId = new EntityReference();
campaignResponse.OriginatingActivityId.LogicalName = PhoneCall.EntityLogicalName;
campaignResponse.OriginatingActivityId.Id = phoneCall.ActivityId.Value;
) 
```

插件抛出超时。（我设置 serviceproxy，超时属性 30 分钟，它仍然抛出超时。）当我不设置 originatingactivityid 时，会创建campaingresponse。

关于这个问题的任何建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T10:45:32.930

试试这个

```
campaignResponse.OriginatingActivityId = new EntityReference(PhoneCall.EntityLogicalName, phoneCall.Id); 
```

这对我有用。

# android - 在edittext中移动drawable的位置

> ID：10894274
> 
> 赞同：1
> 
> 时间：2012-06-05T08:53:59.733
> 
> 标签：android, android-layout, android-widget, android-edittext

有谁知道如何将edittext的drawable的图像向左/向右移动？？？

我得到的是[这个](http://imageshack.us/photo/my-images/823/26251665.png/)

我想要的是[这个](http://imageshack.us/photo/my-images/228/55310994.png/)：

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-05T09:58:20.287

使用`padding`你可以做到这一点...

```
android:paddingLeft="5dp" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-05T10:05:29.820

将以下行添加到您的 xml：

`android:drawablePadding="5dip"`

有关详细信息，请参阅[Android 开发人员参考](http://developer.android.com/reference/android/widget/TextView.html#attr_android%3adrawablePadding)。

# curl - 远程服务器在请求现有 url 时返回 404

> ID：10894278
> 
> 赞同：0
> 
> 时间：2012-06-05T08:54:22.557
> 
> 标签：curl, http-status-code-404, remote-server

我又遇到了一个奇怪的问题：

我正在编写一个爬虫来索引一个特定的站点。几个星期以来，它运行良好，我只是在每小时发送太多请求时遇到问题。

但是现在我什至无法访问单个页面。

但更奇怪的是：我必须通过 POST 提交一些表单值，但服务器返回 404 错误——尽管 URL 绝对正确。

我实施了许多技术来防止beeing被识别为机器人：更改用户代理、延迟，并且我正在发送一个Referer-header来假装表单是从他们自己的网站提交的。

这可能再次成为他们服务器上的垃圾邮件或 DDOS 保护吗？还是有其他可能的错误来源？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-14T22:27:30.393

确保您的 URL 没有任何额外数据。

这个：

```
curl_setopt($ch, CURLOPT_URL, 'http://www.aspsite.com/'); 
```

变为（注意反斜杠已删除）：

```
curl_setopt($ch, CURLOPT_URL, 'http://www.aspsite.com'); 
```

如果您打算使用 GET 数据，请确保您的 ASP 文件完全请求您发送的数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T15:28:58.190

好的，刚刚解决了。

远程服务器的一个非常奇怪的行为导致了这个问题：当发送的参数比预期的多时，它返回 404 而不是忽略不需要的参数。

# ubuntu - 如何正确备份我的 phpmyadmin？

> ID：10894281
> 
> 赞同：0
> 
> 时间：2012-06-05T08:54:28.800
> 
> 标签：ubuntu, phpmyadmin, database-backups, database-restore

我的服务器有问题。然后我尝试备份我的 phpmyadmin 中的所有数据库。首先，登录后我选择`DATABASE --> SELECT EXPORT --> THEN SELECT ALL DATABASE -> THEN DOING EXPORT`. ![在此处输入图像描述](../Images/c9e7cd82491148c33b6d299e28069d41.png)

但是，在我想将它恢复到新的 phpmyadmin 之后，一些数据库无法恢复。

`mysql -u root -p > localhost.sql`

为什么 ？

* * *

编辑

我将phpmyadmin中的整个数据库都备份了。恢复后只有3个数据库恢复了另外2个数据库不显示（这个数据库有大约200.000行）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-26T00:53:28.540

如果 localhost.sql 包含完整的 mysqldump，那么您希望将其通过管道传输到 mysql：

```
mysql -u root -p < localhost.sql 
```

在您的问题中，您使用的是输出重定向 (>)，而不是输入重定向 (<)

我不知道 phpMyAdmin 是否会创建包含 CREATE DATABASE 命令的转储文件。它可能有一个选择。如果您仍然缺少某些数据库，请先使用 CREATE DATABASE 创建它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T01:08:36.260

这是行不通的，因为 PHPMYADMIN 中的所有数据库都作为单个文件下载。例如信息架构和所有 phpmyadmin 设置都已备份。

之所以会出现这个问题，是因为在恢复到新的 phpmyadmin 期间，旧的信息模式会满足新模式的默认信息模式。从一些网站阅读后，他们说不要用旧的替换它。

因此，只是一些成功恢复的转储查询（此查询在信息模式转储查询之前）。但是，对于下一个查询（在信息架构转储查询之后）无法恢复。然后我必须在该文件中一个一个地恢复数据库。

笔记 ：

备份所有数据库，除了信息架构或您自己的数据库之外的其他东西如果您的数据库太大，最好使用 MySQL shell。

# string - 如何在 iOS 上删除字符串的一部分？

> ID：10894286
> 
> 赞同：1
> 
> 时间：2012-06-05T08:54:39.160
> 
> 标签：string, filter

假设我有一个 NSString 存储在一个变量中，我总是希望将字符串保留到我的第 10 个字符并删除其余字符。我如何在 Objective-C 中做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T09:29:42.753

```
NSMutableString *tmp = [NSMutableString stringWithString:@"012346578901234567890"];
[tmp replaceCharactersInRange:NSMakeRange(10, tmp.length-10) withString:@""];
NSLog(@"tmp : %@",tmp); 
```

# javascript - 火狐内存泄漏

> ID：10894287
> 
> 赞同：0
> 
> 时间：2012-06-05T08:54:45.180
> 
> 标签：javascript, firefox, browser, memory-leaks, raphael

我有以下脚本（我也使用 raphaeljs）绘制一个圆圈，等待 1 秒，再次绘制圆圈等（您可以复制粘贴它 - 是功能性的，只需要包含来自 raphaeljs.com 的 raphael）：

```
<div id="holder">

</div>  
<script src="raphael.js" type="text/javascript"></script>
<script>
    var paper = Raphael(10, 50, 320, 200);
    var rad = Math.PI / 180;
    var finAngle = 0;
    function sector(cx, cy, r, startAngle, endAngle, params) {
            var x1 = cx + r * Math.cos(-startAngle * rad),
            x2 = cx + r * Math.cos(-endAngle * rad),
            y1 = cy + r * Math.sin(-startAngle * rad),
            y2 = cy + r * Math.sin(-endAngle * rad);
        return ["M", cx, cy, "L", x1, y1, "A", r, r, 0, +(endAngle - startAngle > 180), 0, x2, y2];
    }

    var path = sector(100,100,50,0,180);
    var arc = paper.path(path);

    function draw()
    {
        path = sector(100,100,50,0,finAngle);
        arc.attr({"path": path});

        finAngle += 1;
        /*
        if (finAngle == 360)
            finAngle = 359;
        */
        if (finAngle > 360)
        {           
            clearInterval(interval);
            setTimeout("setNewInterval();", 1000);
            finAngle = 1;
        }

        return;
    }

    function setNewInterval()
    {
        interval = setInterval("draw();", 3);
    }
    var interval = setInterval("draw();", 3);

</script> 
```

问题是它似乎在 firefox 上产生了内存泄漏（我让它运行了 10 分钟，firfox 达到了 700MB 的内存（chrome 保持在 25MB））。Chrome 对此没有任何问题。

任何想法我如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T03:08:38.080

看起来像是某种奇怪的 GC 启发式问题。我提交了[https://bugzilla.mozilla.org/show_bug.cgi?id=761893](https://bugzilla.mozilla.org/show_bug.cgi?id=761893)

与此同时，你能做的最好的事情就是找出每秒分配数十兆字节字符串的原因，而不是这样做......

# javascript - javascript中非对象调用函数的不同行为

> ID：10894289
> 
> 赞同：0
> 
> 时间：2012-06-05T08:54:57.103
> 
> 标签：javascript, this

Firefox 的 js 引擎/gjs (spidermonkey) 和 webkit 的 jscore 在非对象上调用内置和普通 js 函数时似乎有不同的行为。

```
gjs> toString.call(null)
"[object Null]"
gjs> function cccc() {return toString.call(this);}
gjs> cccc.call(null)
"[object GjsGlobal]" 
```

因此，如果使用非对象调用普通的 js 函数，它`this`会自动被 current 替换`this`，而对于内置函数则不会发生这种情况。

这是标准行为（根据某些规范？）还是只是依赖于实现的行为？第一行检查任何值的类型总是安全的吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T09:18:43.143

这种行为是设计使然。如[Mozilla 文档](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Function/call#Parameters)中所述：

> 注意，这可能不是方法看到的实际值：如果方法[是非严格模式](https://developer.mozilla.org/en/JavaScript/Reference/Functions_and_function_scope/Strict_mode)代码中的函数`null`，`undefined`将被替换为全局对象，原始值将被装箱。

显然，内置函数被（视为）严格模式代码。你自己的函数不是，当然，除非你写了一个[严格模式](https://developer.mozilla.org/en/JavaScript/Reference/Functions_and_function_scope/Strict_mode)函数。:-)

这在 ECMAScript 5 中会有所不同。来自[规范（PDF）](http://www.ecma-international.org/publications/files/ECMA-ST/Ecma-262.pdf)：

> **注意 thisArg 值作为this**值不加修改地传递 。这是对第 3 版的更改，其中**undefined**或**null** thisArg 被替换为全局对象并`ToObject`应用于所有其他值，并且该结果作为 this 值传递。

这是规范的非规范但 HTML 版本的[更直接链接。](http://people.mozilla.org/~jorendorff/es6-draft.html#sec-15.3.4.4)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-05T09:07:00.367

您可以在此处找到更多信息：[https ://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Function/call](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Function/call)

这是 ECMAScript 第 3 版定义的标准行为，是的，这是一种检查任何值类型的方法，通常用于检查数组。

# c++ - 模板调用之间的 C++ 转换

> ID：10894295
> 
> 赞同：0
> 
> 时间：2012-06-05T08:55:10.523
> 
> 标签：c++, templates, casting

假设`X<T>`是一个以类为参数的模板类，`A`并且`B`是从不涉及多重继承或虚拟继承的情况下`B`派生的类（即在and`A`之间进行转换时不需要调整指针）。`A``B`

`X<A*>`从to执行电锯重新解释转换是否安全`X<B*>`？反之亦然？当然， a`X<A*>`是 no `X<B*>`，但是这些类不应该总是共享相同的行为吗？因为使用了指针，所以内存布局应该是相等的。因此，让方法对`X<B*>`实际上是`X<A*>`.

当然，这会以某种方式破坏类型安全，因为我可以将一个元素插入`A*`到 an`X<B*>`中，但这超出了这个问题的范围。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T11:59:30.010

如果你真的需要它，最好写这样的东西。

```
X<A*> a(new B());
X<B*> b( dynamic_cast<B*> ( a.get_pointer() ) );
if(b.get_pointer() != NULL)
{
    ...
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T00:52:03.990

不，你不能。如果 B 属于多态类，则将 B* 转换为 A* 可能会更改指针的值。一般来说，使用 reinterpret_cast 从来都不是安全的，如果你仍然需要它，那么你可能写错了（在某些情况下，你需要它，但这不是其中之一）。

顺便说一下，模板可以专门用于模板参数，因此 X 和 X 甚至可能没有相同的内部结构。

# android - Android：我的应用程序保存的图像不会显示在图库中 - 即使在重新启动后

> ID：10894299
> 
> 赞同：2
> 
> 时间：2012-06-05T08:55:27.647
> 
> 标签：android, image, gallery

我在我的 Android 应用程序中创建并保存图像：

```
File dir = new File(Environment.getExternalStorageDirectory(), ".myappname/saved");
File imageFile = new File(dir, "IMG" + random() + ".jpg");
FileOutputStream out = new FileOutputStream(imageFile);
bi.compress(Bitmap.CompressFormat.JPEG, 100, out); 
```

图像不会出现在图库中——即使重新启动后也是如此。

更新：我只显示部分代码！我还更正了我在编写 StackOverFlow 消息时引入的拼写错误。图像保存得很好——我可以查看它们——它们只是没有显示在图库中。我刚刚从“.myappname”中删除了这个点——画廊没有显示图像。奇怪的。正如我在下面所说，其他应用程序将图像保存在点文件夹中，并显示在图库中:(

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T09:11:47.590

您正在通过在文件夹名称前加上“。”来创建隐藏文件夹。（句点）媒体扫描仪将忽略这一点。至少这是我在手动执行相同操作时看到的行为，我没有通过代码尝试过。查看这篇文章中的选项 2 [http://www.makeuseof.com/tag/hide-private-picture-folders-gallery-android/](http://www.makeuseof.com/tag/hide-private-picture-folders-gallery-android/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-05T09:00:08.300

将文件保存在 SDCARD/“某些文件夹 r”上，它将反映在图库中，图库应用程序不显示来自私人空间的图像。更改以下代码行

```
 File fwdir = new File(Environment.getExternalStorageDirectory(), "myappname/saved"); 
```

编辑：- 删除。从目录名称。因为它将是隐藏文件夹。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-14T18:37:49.160

你目前的问题是。出现在文件路径中，使其隐藏，但在某些情况下，
画廊不会从私人空间填充图像，
因此请使用代码

```

`sendBroadcast(new Intent(
Intent.ACTION_MEDIA_MOUNTED,
            Uri.parse("file://" + Environment.getExternalStorageDirectory())));`

```

在你的方法中**`onDestroy()`**`。
检查此链接
[http://rajareddypolam.wordpress.com/2013/01/29/android-saving-file-to-external-storage/](http://rajareddypolam.wordpress.com/2013/01/29/android-saving-file-to-external-storage/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-01-31T12:34:02.023

在您的活动中编写此功能...

私人无效扫描文件（字符串路径）{

```
 MediaScannerConnection.scanFile(MainActivity.this,
                new String[] { path }, null,
                new MediaScannerConnection.OnScanCompletedListener() {

                    public void onScanCompleted(String path, Uri uri) {
                        Log.i("TAG", "Finished scanning " + path);
                    }
                });
    } 
```

然后在保存图像的位置调用此函数

```
scanFile(yourFile.getAbsolutePath()); 
```

# jquery - JQuery 效率需要让我的代码更好并学习

> ID：10894307
> 
> 赞同：4
> 
> 时间：2012-06-05T08:55:43.637
> 
> 标签：jquery, performance

我有下面的代码，它做了我想要的，但我知道这是纠正它的坏方法。我怎样才能完成同样的事情而不必为每组项目复制代码。任何帮助将不胜感激。

```
<script type="text/javascript">
$('#plink-1').click(function() {
    $('.active').slideUp().removeClass('active');
    $('#pshow-1').slideToggle().addClass('active');
});
$('#plink-2').click(function() {
    $('.active').slideUp().removeClass('active');
    $('#pshow-2').slideToggle().addClass('active');
});
$('#plink-3').click(function() {
    $('.active').slideUp().removeClass('active');
    $('#pshow-3').slideToggle().addClass('active');
});
$('#plink-4').click(function() {
    $('.active').slideUp().removeClass('active');
    $('#pshow-4').slideToggle().addClass('active');
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-05T08:56:52.587

```
$('#plink-1, #plink-2, #plink-3, #plink-4').click(function() {
    var index = this.id.replace('plink-','');  // will give you ->  1,2,..
    $('.active').slideUp().removeClass('active');
    $('#pshow-' + index).slideToggle().addClass('active');
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-05T09:30:02.650

这应该有效：

```
$('a[id^="plink-"]').click(function() {
    $('.active').slideUp().removeClass('active');
    $('#pshow-' + $(this).prop('id').replace('plink-','')).slideToggle().addClass('active');   
}) 
```

使用此代码，您在添加或删除 plinks 时不需要更新您的 jquery 代码

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-05T14:58:35.660

感谢您的出色回答，您让我的头脑朝着正确的方向发展。我最终根据我在 CSS 中创建的内容使用了以下函数。仍在调整一些动画等，但效果很好。谢谢！

```
$('.pitem a').each(function(i) {
    $(this).click(function() {
        $('html, body').animate({ scrollTop: 0 }, 150);
        $('#portfolios').find('.active').fadeOut(500).removeClass('active');
        $('#portfolios').find('#pshow-'+i).fadeIn(500).addClass('active');
    });
}); 
```

# c# - 从导致会话结束的编程中删除 .ascx

> ID：10894309
> 
> 赞同：0
> 
> 时间：2012-06-05T08:55:49.310
> 
> 标签：c#, user-controls

我有一个情况：

我在 webapp 中上传用户控件，然后在需要时加载它们。有时我不想要其中的一些。所以我想从我的网络应用程序中删除它们。

这是找到控件的层次结构。

/controls
/controls/uc/
/controls/uc/ctrl1/ctrl1.ascx（带有 ctrl.ascx.cs）
/controls/uc/ctrl2/ctrl2.ascx（带有 ctrl.ascx.cs）

现在从delete.aspx 中，我得到了我从中选择目录结构的代码。并拿起控制目录“ctrl1（n）”并使用删除递归删除目录。

删除结束后，我使用 asp.net 的重定向功能重定向页面。但是一旦网页被重定向，会话就结束了，它要求我登录（因为只有登录的用户可以删除控件）

为什么会有这种奇怪的行为？

请记住，app_code中没有找到任何代码，所有控件都放在网站根目录下，如上所示。

编辑：当然它不是预编译的！

有什么帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T09:13:06.180

删除正在运行的应用程序（甚至是网站项目）中的类很可能会导致应用程序池回收、结束会话和其他所有内容。
上传用户控件的整个想法似乎很奇怪。

有关详细信息：[ASP.NET 案例研究：丢失的会话变量和 appdomain 回收](http://blogs.msdn.com/b/tess/archive/2006/08/02/asp-net-case-study-lost-session-variables-and-appdomain-recycles.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-05T09:28:11.870

对目录结构（但不是文件，请注意）的每次更改都会导致应用程序池回收 - 您正在做的事情令人怀疑，但不要删除任何文件夹（仅文件），您应该没问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-11T08:07:28.840

好的，我花了一些时间来解决这个问题......听起来它可能不是一个解决方案，但到目前为止我想要的已经实现了。

我所做的是将会话状态定义为“StateServer”，当我删除文件夹时，它会重新启动应用程序池，但会话仍然存在。由于应用程序池回收取决于几个因素，包括删除网站的子文件夹，因此您不能碰巧停止它，但实际上可以保留会话。如果您删除文件夹，它不会导致会话丢失，但当然应用程序将重新启动，您必须不惜一切代价接受！

反正，

### 我在主机上的 web.config 中使用了以下配置节点：

```
<system.web>
    <sessionState mode="StateServer"  cookieless="false" timeout="20" />
</system.web> 
```

### 当然，在我的本地主机上这样做了：

```
<system.web>
    <sessionState mode="StateServer"  stateConnectionString="tcpip=127.0.0.1:42424" cookieless="false" timeout="20" />
</system.web> 
```

**注意：**在 localhost 上，您必须启动 ASP.NET 状态管理服务

### 概括：

1.  您必须将 SessionState 定义为 StateServer 或 SqlServer 才能保留会话。这是你至少可以做的。

2.  在开发此类应用程序时，您**必须**为它们提供应对应用程序重启周期的方法。

3.  您必须使会话变量尽可能简单，不要放置大对象或依赖于许多其他对象的对象。序列化和反序列化需要大量时间才能让它们来回移动。

# c# - “YZ”类型中不存在“X”类型

> ID：10894310
> 
> 赞同：5
> 
> 时间：2012-06-05T08:55:51.047
> 
> 标签：c#, .net, .net-4.0, compiler-errors

我们的团队最近从 Visual Studio 2008/.NET3.5 迁移到 Visual Studio 2010/.NET4.0。现在，VS2010 给了我一个奇怪的错误信息。它可以通过以下程序重现：

```
using System;

namespace Some.Main
{
}

namespace SomeLib
{
    interface Some
    {
    }
}

namespace ConsoleApplication1
{
    using Some.Main;
    using SomeLib;

    class Program
    {
        static void Main(string[] args)
        {
            Console.Write("Press enter to continue");
            Console.ReadLine();
        }
    }
} 
```

这在 VS2008 中工作得很好，但在 VS2010 中我收到以下错误消息：

> “SomeLib.Some”类型中不存在类型名称“Main”

有趣的是，如果我点击“构建解决方案”，程序构建得很好，我什至可以毫无问题地执行它。只是 Visual Studio 似乎对此代码有问题。

不幸的是，我正在开发一个大型遗留应用程序，我无法（轻松）更改这些命名空间的名称。

我想知道如何解决这个错误，我也很好奇是什么原因造成的。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-05T09:05:35.590

你只是让编辑*感到困惑*。`Some`既是命名空间又是接口名称，显然它不会`using`按照声明的顺序检查/解析 s。

如果你想明确你指的是命名空间而不是类型名称，只需添加`global::`到`using`声明中（从*根*命名空间开始），如下所示：

```
using global::Some.Main; 
```

**更新**
非常好的帖子在这里由@alex 在评论中链接：[“使用”语句应该在命名空间内部还是外部？](https://stackoverflow.com/questions/125319/should-usings-be-inside-or-outside-the-namespace)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-05T09:10:26.210

我认为 IntelliSense 对命名感到困惑，并且不“理解”谁是谁。

附加的屏幕截图演示了发生了什么：IntelliSense“认为”`Some.Main`指的是名为的接口`Some`，可能是因为在任何地方都没有命名空间`Some`。

幸运的是，编译器并没有像你说的那样被愚弄，代码似乎工作得很好。

![智能感知被愚弄](../Images/bcce89dadd1430f6d2787135859b0e54.png)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-05T08:58:12.890

尝试这个：

```
using Some.Main;
using SomeLib;

namespace ConsoleApplication1
{
    // instead of placing usings here.
} 
```

# qt - 包括计算器示例作为自定义小部件而不进行促销？

> ID：10894311
> 
> 赞同：0
> 
> 时间：2012-06-05T08:55:51.740
> 
> 标签：qt, widget

我已经构建了几个小部件的集合，并成功地将它们包含在 QTDesigenr 中。但我不知道如何包含calculatorform-example。这是一个ui构建小部件，添加集合接口后我仍然无法编译它，因为明显缺少ui_calculatorform.h文件。

我错过了什么？推广小部件是没有选择的，必须拖放。谢谢你的任何提示。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T11:50:14.493

如果您想从表单 form.ui 创建 ui_form.h。做，

```
 uic -o ui_form.h form.ui 
```

# zend-framework - Zend 框架中的对象运算符

> ID：10894314
> 
> 赞同：0
> 
> 时间：2012-06-05T08:55:57.413
> 
> 标签：zend-framework

一个菜鸟问题

```
$this->_helper->viewRenderer->setNoRender(); 
```

上面的代码取自我一直在关注的教程中的 indexController 的 init 方法。代码示例是否真的意味着从 zend_Controller_Action 对象的 _helper 对象的 viewRenderer 对象执行“setNoRender”方法？或者是否有我不知道的特定于 zend 框架的代码编写约定？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T10:16:39.813

它不是一个 zend 约定。它是一种 PHP 语法。

$this 指的是当前的 obj。使用 -> 运算符，您可以访问其属性或方法。

> 代码示例是否真的意味着从 zend_Controller_Action 对象的 _helper 对象的 viewRenderer 对象执行“setNoRender”方法？

是的，你是对的。

> $this->_helper->viewRenderer->setNoRender();

这将禁用视图，这在您使用 ajax 请求时非常有用。

仅供参考：[Zend 控制器动作](http://framework.zend.com/manual/en/zend.controller.action.html#zend.controller.action.introduction)

> 禁用 ViewRenderer 的主要原因是您根本不需要视图对象，或者您不通过视图脚本进行渲染（例如，当使用操作控制器来提供 Web 服务协议（如 SOAP、XML-RPC 或 REST）时）。在大多数情况下，您永远不需要全局禁用 ViewRenderer，只需在单个控制器或操作中选择性地禁用。

# java - java HttpClient库中的连接超时异常但不是通过chrome浏览器？

> ID：10894318
> 
> 赞同：1
> 
> 时间：2012-06-05T08:56:30.587
> 
> 标签：java, tomcat

我已通过以下命令阻止了端口 8070：

```
sudo iptables -A INPUT -p tcp --destination-port 8070 -j DROP 
```

现在，当我在端口 8070 上的嵌入式 Tomcat 7 中部署我的 Web 应用程序时，如果我通过 URL`http://localhost:8070/app`或访问`http://192.168.1.3:8070/app`，我总是得到异常`Connection timed out`。这很正常，因为我已经封锁了那个端口。

`http://192.168.1.3:8070/app`但是当我通过 chrome 浏览器访问 URL 时，我收到了`Connection Timed out`错误消息。这也符合预期。**但是当我尝试`http://localhost:8070/app`通过 chrome 浏览器访问时，它给了我成功的响应。**这是不寻常的。

为什么我可以通过 localhost 上的浏览​​器访问，但不能通过 Apache HttpClient 库访问？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T09:00:33.950

请注意，这应该在[serverfault.com](http://serverfault.com)上。

但是您应该尝试`iptables`像这样指示您的网络接口：

```
iptables -A INPUT -p tcp -s 192.168.1.3 --destination-port 8070 -j DROP
iptables -A INPUT -p tcp -s localhost --destination-port 8070 -j DROP 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T09:01:56.637

Chrome 使用 IPv6，因此它可以使用它解析 localhost，其他示例使用 IPv4。所以检查你的主机文件是否包含`::1`本地主机的条目？

您也可以使用以下命令行标志尝试不使用 IPv6 for chrome：

`--disable-ipv6`

# ruby-on-rails - 在 CanCan 的能力类中调用方法时出现 NameError

> ID：10894321
> 
> 赞同：1
> 
> 时间：2012-06-05T08:56:43.530
> 
> 标签：ruby-on-rails, cancan

我在我正在构建的应用程序中使用 CanCan 作为基于角色的管理系统。它是一种网上商店的模板，因此管理员可以在他/她有权访问的每个网上商店中担任不同的角色。例如：在网店 1 中，他是版主，在网店 2 中，他是编辑。

所以我在CanCan的能力类中需要做的是检查当前用户在当前店铺（current_shop）中的角色是什么。我写了这个：

```
class Ability
 include CanCan::Ability

 def initialize(admin)

   if admin.supervise?(current_shop, controller_gsub)
     can :manage, :all
   elsif admin.manage?(current_shop, controller_gsub)
     can :manage, :all
   elsif admin.access?(current_shop, controller_gsub)
     can :read, :all
   end

 end
end 
```

问题是我似乎无法从能力类调用 current_shop 方法，因为我收到此错误：

```
undefined local variable or method `current_shop' for #<Ability:0x104df38b0> 
```

有人知道该怎么做吗？提前谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T13:27:29.327

实际上，您无法将任何控制器方法访问到 Ability 类中。什么是业务逻辑？如果管理员是 current_shop 的主管，他真的可以管理每一件事吗？或者他可能只能管理他管理商店的东西？

那么有这样的东西会很好：

```
class Ability
 include CanCan::Ability

 def initialize(admin)

   can :manage, :all do |obj|
     admin.supervise?(obj.shop) || admin.manage?(obj.shop)
   end
   can :read, :all do |obj|
     admin.access?(obj.shop)
   end

 end
end 
```

PS我不太确定该块是否可以使用`:all`，并且调用未知类不太合乎逻辑`.shop`，但这只是为了说明问题，列出将使用它的模型很容易

# python - c 下划线表达式 `c_` 究竟做了什么？

> ID：10894323
> 
> 赞同：84
> 
> 时间：2012-06-05T08:56:58.520
> 
> 标签：python, numpy

这似乎是某种水平连接，但我在网上找不到任何文档。这是一个最小的工作示例：

```
In [1]: from numpy import c_
In [2]: a = ones(4)
In [3]: b = zeros((4,10))    
In [4]: c_[a,b]
Out[4]: 
array([[ 1.,  0.,  0.,  0.,  0.,  0.,  0.,  0.,  0.,  0.,  0.],
       [ 1.,  0.,  0.,  0.,  0.,  0.,  0.,  0.,  0.,  0.,  0.],
       [ 1.,  0.,  0.,  0.,  0.,  0.,  0.,  0.,  0.,  0.,  0.],
       [ 1.,  0.,  0.,  0.,  0.,  0.,  0.,  0.,  0.,  0.,  0.]]) 
```

* * *

## 回答 #1

> 赞同：70
> 
> 时间：2012-06-08T12:17:06.527

使用 IPython 的`?`语法来获取更多信息：

```
In [2]: c_?
Type:       CClass
Base Class: <class 'numpy.lib.index_tricks.CClass'>
String Form:<numpy.lib.index_tricks.CClass object at 0x9a848cc>
Namespace:  Interactive
Length:     0
File:       /usr/lib/python2.7/dist-packages/numpy/lib/index_tricks.py
Docstring:
Translates slice objects to concatenation along the second axis.

This is short-hand for ``np.r_['-1,2,0', index expression]``, which is
useful because of its common occurrence. In particular, arrays will be
stacked along their last axis after being upgraded to at least 2-D with
1's post-pended to the shape (column vectors made out of 1-D arrays).

For detailed documentation, see `r_`.

Examples
--------
>>> np.c_[np.array([[1,2,3]]), 0, 0, np.array([[4,5,6]])]
array([[1, 2, 3, 0, 0, 4, 5, 6]]) 
```

* * *

## 回答 #2

> 赞同：62
> 
> 时间：2018-08-16T19:37:29.467

我花了很多时间来理解，但似乎我终于明白了。

您所要做的就是**沿第二个轴添加。**

让我们来 ：

```
np.c_[np.array([1,2,3]), np.array([4,5,6])] 
```

但是没有第二轴。所以我们在心里加一个。

所以两个数组的形状都变成了`(3,1)`。

因此，结果形状将是 (3,1+1)，即 (3,2)。这是结果的形状 -

```
array([[1, 4],
       [2, 5],
       [3, 6]]) 
```

另一个例子：

```
np.c_[np.array([[1,2,3]]), 0, 0, np.array([[4,5,6]])] 
```

形状：

`np.array([[1,2,3]])`=`1,3`

`np.array([[4,5,6]])`=`1,3`

`0`所以我们可以把它想象成`[[0]]`=`1,1`

所以结果`1,3+1+1+3`=`1,8`

这是结果的形状：`array([[1, 2, 3, 0, 0, 4, 5, 6]])`

* * *

## 回答 #3

> 赞同：16
> 
> 时间：2019-04-24T15:26:54.043

我将解释如下。它将您的第一个数组连接到函数中最后一个数组的**最后一个维度（轴）**。

例如：

```
# both are 2 dimensional array
a = array([[1, 2, 3], [4, 5, 6]])
b = array([[7, 8, 9], [10, 11, 12]]) 
```

现在，让我们来看看`np.c_(a, b)`：

**首先，让我们看一下形状：**

a 和 b 的形状都是`(2, 3)`。将 a (2, 3) 连接到 b (3) 的最后一个轴，同时保持其他轴不变 (1) 将变为

```
(2, 3 + 3) = (2, 6) 
```

那是新的形状。

**现在，让我们看看结果：**

在 b 中，最后一个轴中的 2 项是：

```
1st: [7, 8, 9]
2nd: [10, 11, 12] 
```

添加 a 意味着：

```
1st item: [1,2,3] + [7,8,9] = [1,2,3,7,8,9]
2nd item: [4,5,6] + [10,11,12] = [4,5,6,10,11,12] 
```

所以，结果是

```
[
  [1,2,3,7,8,9],
  [4,5,6,10,11,12]
] 
```

它的形状是 (2, 6)

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2019-10-21T23:11:58.320

它将几个 1D 数组转换为 2D 数组，原始数组的一维保留为 2D 数组的第 1 维。多个输入数组用作第二维。

可以这样想：如果您将 30 条记录的数据系列收集到单独的一维数组中，`np.c_`请像在 excel 表中一样组合这些系列：并排在 30 列的单独列中，而不是扩展第一个系列。

例如，2 个起始数组：

```
>>> arrayX = np.array([X1,X2...,X30])
array([X1, X2..., X30])
>>> arrayY = np.array([Y1,Y2...,Y30])
array([Y1, Y2..., Y30]) 
```

让我们看看如何`np.c_`组合它们：

```
>>>arrayC = np.c_(arrayX, arrayY)
array([[X1, Y1],
       [X2, Y2],
       ...
       [X30, Y30]]) 
```

看看它仍然有 30 条记录吗？您现在可以使用第二个维度在数据系列之间导航。

[文档](https://docs.scipy.org/doc/numpy/reference/generated/numpy.c_.html)有点神秘地指出：“将切片对象转换为沿第二个轴的连接。” *第二轴是什么？*他们的意思是生成的二维数组。目前尚不清楚您是否不知道这是 的变体`np.r_`，它沿第一个轴连接；并且如果您不认为一维数组*具有*另一个维度。但从句法上讲，确实如此。

查询数组的形状来说明这一点：

```
>>> np.shape(arrayX)
(30,)
>>> np.shape(arrayY)
(30,)
>>> np.shape(arrayC)
(30,2) 
```

您可以看到该方法创建了第二维或轴，`np.c_`并且在那里进行了连接。相比之下：

```
>>> arrayR = np.r_[array1,array2]
array([X1, X2..., X30, Y1, Y2..., Y30])
>>> np.shape(arrayR)
(60,) 
```

该`np.r_`方法在第一维内或沿第一轴连接。

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2021-01-18T18:06:55.067

使用 numpy 连接数组的一种简短技术是 np.c_ 和 np.r_

np.c_[] 沿第二个轴连接数组，但 np.r_[] 沿第一个轴连接数组

认为：

```
import numpy as np
a = np.array([[1,2,3],
             [11,22,33]]
             )
b = np.array([[4,5,6],
             [44,55,66]]
             ) 
```

a的形状：（2,3）即（行数，列数）也=（第1轴，第2轴）

b 的形状：(2,3) 即（第 1 轴，第 2 轴）

np.r_ 沿第一个轴连接，因此 np.r_[a,b] 给出：

```
array([[ 1,  2,  3],
       [11, 22, 33],
       [ 4,  5,  6],
       [44, 55, 66]]) 
```

即沿行（第一轴）连接，因此此处的行数会增加。

而 np.c_[a,b] 沿第二轴连接，即此处的列如下：

```
array([[ 1,  2,  3,  4,  5,  6],
       [11, 22, 33, 44, 55, 66]]) 
```

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2013-11-20T20:12:08.663

实际上它不是一个函数，它是类 CClass 的一个对象。

```
it is "not a function, so takes no parameters 
```

以上是官方文档所说的。您可以查看此问题以获取详细信息。

[numpy.r_ 不是函数。它是什么？](https://stackoverflow.com/questions/18601001/numpy-r-is-not-a-function-what-is-it)

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2021-02-27T09:45:26.003

例如：

我有 2 个带有值的数组：
`a = [x1,x2,x3]`
`b = [y1,y2,y3]`

我们想将它们合并在一起，我们有类似的东西：`[[x1, y2],[x2, y2],[x3, y3]]`.

因此我们使用`numpy.c_[a, b]`

```
import numpy

a = [1,2,3]
b = [4,5,6]  
value = numpy.c_[a,b]

print(value)
# [
#  [1, 4],
#  [2, 5],
#  [3, 6]
# ] 
```

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2020-10-30T06:54:16.243

np.c_[[1,4,5,4,5,3],[1,4,2,4,5,3],[2,4,6,8,9,0]]..这个Concats阵列水平或按轴 0.So 阵列将是

```
array([[1, 1, 2],
       [4, 4, 4],
       [5, 2, 6],
       [4, 4, 8],
       [5, 5, 9],
       [3, 3, 0]]) 
```

***确定行数，*** 总元素/数组总数

（即 18/3）[{len([1,4,5,4,5,3])}+{len([1,4,5,4,5,3])}+{len([2 ,4,6,8,9,0])}]//len([[1,4,5,4,5,3],[1,4,2,4,5,3],[2, 4,6,8,9,0]])

所以上面的人给出了 6..SO 6 行将在那里。

***对于列数，*** 总元素/长度（数组中的任何一个数组）

例如 18/len([1,4,5,4,5,3])

所以列将是 18/6，即 3。

# mysql - 具有零值的 MySQL 查询

> ID：10894324
> 
> 赞同：0
> 
> 时间：2012-06-05T08:57:03.620
> 
> 标签：mysql, count

我有这两个表（文章和销售）：

```
id  |  name     |
====+============
1   |   milk    |
2   |   apple   |
3   |   bread   |
... |    ...    |

id  |   idArticle  |   date     |
====+==============+=============
1   |       2      | 2011-01-01 |
2   |       2      | 2011-01-01 |
3   |       3      | 2011-01-01 |
4   |       1      | 2011-01-02 |
... |      ...     |    ...     | 
```

我需要获取 2011/01/01 的销售额：文章和计数

```
2011-01-01 Milk 0
2011-01-01 Apple 2
2011-01-01 Bread 1
... 
```

但是我不知道如何显示**“牛奶：0”**，因为那天它没有卖牛奶。

此查询不起作用：

```
SELECT s.date, a.name, COUNT(*)
FROM article a
LEFT JOIN sale s ON a.id = s.idArticle
WHERE s.date = "2011-01-01"
GROUP BY s.date, a.name 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T09:09:03.907

```
SELECT "2011-01-01" AS date, a.name, IFNULL(s.total, 0)
FROM article a
LEFT JOIN (
    SELECT idArticle, COUNT(*) AS total
    FROM sale
    WHERE date = "2011-01-01"
    GROUP BY idArticle
) AS s ON a.id = s.idArticle 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T09:06:26.197

```
SELECT a.name, COUNT(s.id)
FROM article a
LEFT JOIN sale s ON a.id = s.idArticle AND s.date = '2011-01-01'
GROUP BY a.name 
```

# tomcat - 使用 Solr 时在 Tomcat 中“未创建内核”

> ID：10894328
> 
> 赞同：2
> 
> 时间：2012-06-05T08:57:25.797
> 
> 标签：tomcat, solr

我正在开发基于 ASP.NET MVC3(C#) 的包含 200k 产品的大型电子商务网站。为了更好地发挥站点搜索功能，我决定使用 Solr Search。我是 Solr 和 Tomcat 7 的新手。我用谷歌搜索并找到 [了这个](http://crazorsharp.blogspot.in/2010/01/full-text-search-using-solr-lucene-and.html)链接并关注了它。
将 schema.xml 替换为现有时，出现如下错误

> HTTP 状态 500 - solr 配置中的严重错误。检查您的日志文件以获取有关可能出现问题的更多详细信息。如果你希望 solr 在配置错误后继续，在 solr.xml 中更改：false --------------------------------- ---------------------------- org.apache.solr.common.SolrException：没有创建核心

可能是什么问题？我做错了什么还是什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-05T11:18:42.063

在您的日志中，您可以找到以下行：

```
Caused by: java.lang.NumberFormatException: For input string: "MA147LL/A" 
```

这意味着，应用程序试图解析`schema.xml`文件，并期望在包含字符串的字段中出现一个数字`"MA147LL/A"`。因此，在文件中搜索字符串并检查文档以找出该值有什么问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T06:05:29.100

文档是你的朋友：

[http://wiki.apache.org/solr/QueryElevationComponent](http://wiki.apache.org/solr/QueryElevationComponent)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-04-20T10:53:11.787

我想补充一下，@Christophe Fondacci 是对的，demo 中的 elevate.xml 具有此值，只需删除 elevate 标记中的内容，即可解决问题。

# asp.net-mvc - 将某些子成员排除在验证之外

> ID：10894329
> 
> 赞同：3
> 
> 时间：2012-06-05T08:57:27.857
> 
> 标签：asp.net-mvc, validation

要注册新成员，我有一个名为`UserRegisterModel`. 这个模型从用户那里得到两种地址，`HomeAddress`一个是**必需**的，`WorkAddress`一个是**可选**的。为了获取地址，我使用了一个名为`ContactEntryModel`. 我用`[Required]`属性装饰了我的 ContactEntryModel 成员，这会导致家庭和工作地址都得到自动验证。

我正在寻找将 WorkAddress 标记为**Ignored**或**Excluded**的解决方案，并通过它告诉验证引擎停止验证 WorkAddress 子属性，即使它们装饰有验证属性。

```
public class UserRegisterModel
    {
        [StringLength(50), Required]
        public string FirstName { get; set; }
        [StringLength(50), Required]
        public string LastName { get; set; }
        [StringLength(10), Required]
        public string IdCardNo { get; set; }
        [StringLength(100), Email]
        public string Email { get; set; }

        public ContactEntryModel HomeContact { get; set; }  //Required

        public ContactEntryModel WorkContact { get; set; }  //Optional
     }

   public class ContactEntryModel
    {
        [MaxLength(4), Required]
        public string TelPrefix { get; set; }
        [MaxLength(10), Required]
        public string Tel { get; set; }
        [MaxLength(50), Required]
        public string Province { get; set; }
        [MaxLength(50), Required]
        public string City { get; set; }
        [MaxLength(300), Required]
        public string AddressLine { get; set; }
        [MaxLength(20)]
        public string PostalCode { get; set; }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T09:16:19.073

最好的方法是创建一个自定义视图模型，根据您的情况进行适当装饰。

另一个版本是告诉您的模型绑定器忽略这些字段（这也会跳过验证）。您可以使用 Bind 属性执行此操作：

```
[Bind(Exclude="WorkAddress")]
public ActionResult DoSomething(UserRegisterModel model)
{
    //controller code here
} 
```

# javascript - 使用 _.extend() 将 Backbone.js View,Model,Router... 放入对象中

> ID：10894330
> 
> 赞同：1
> 
> 时间：2012-06-05T08:57:30.627
> 
> 标签：javascript, object, backbone.js, underscore.js

我正在构建一个应用程序，并且正在使用 Backbone.js。因为我对 Backbone 很陌生，所以我已经阅读了那里的文档，查看并测试了多个应用程序并阅读了 Backbone 模式。

现在我开始了解整个主干原理，但我有一些问题。我有一个全局对象（例如：）`App`，我将我的视图、模型、...放入其中（例如：）`App.Views.ListView`。现在的问题是我需要扩展这些对象，因为它里面可能有默认值。

所以当我开始的时候，我有这样的事情

```
App.Views.ListView = Backbone.View.extend({}); 
```

但现在我想要这样的东西

```
_.extend(App.Views.ListView, Backbone.View.extend({}); 
```

这不像我想要的那样工作。App.Views.ListView 存在（它在配置文件中定义，您可以在其中看到文件对象结构并且扩展做了一些事情）。问题是我无法创建视图的实例（例如`new App.Views.ListView();`）

**例子：**

在我的配置中创建的对象

```
App:{
 Views:{
  ListView:{
   myVar: "hello"
   DeeperList: {
   }
  }
 }
} 
```

如果您查看，您会看到对象 App.Views.ListView 包含一个值为 hello 的变量和一个对象 DeeperList。但是在这个对象中，我想在不覆盖 myVar 和 DeeperList 的情况下添加我的视图。使用`App.Views.ListView = Backbone.View.extend({});`时会覆盖它，但是有没有办法避免这种情况。就像使用扩展...

是否也有这个问题的人知道如何解决它？

非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T15:11:50.890

所以这是你想要的对象：

```
App = {
    Views: {
        ListView: {
            myVar: "hello"
            DeeperList: {}
        }
    }
} 
```

只需将第一个参数设置为 true 进行 jQuery 扩展，您将深度扩展/合并此命名空间与另一个对象/命名空间

```
(function(App, ListView, undefined){
    $.extend(true, ListView, {
        'DeeperList': Backbone.View.extend({

        })
    });
})(window.App, App.Views.ListView); 
```

有关 javascript 命名空间的更多信息，请访问以下有趣的博客文章： [http ://addyosmani.com/blog/essential-js-namespacing/](http://addyosmani.com/blog/essential-js-namespacing/)

如果您不使用 jQuery，您也可以使用博文中提到的扩展功能。

```
function extend(destination, source) {
    var toString = Object.prototype.toString,
        objTest = toString.call({});
    for (var property in source) {
        if (source[property] && objTest == toString.call(source[property])) {
            destination[property] = destination[property] || {};
            extend(destination[property], source[property]);
        } else {
            destination[property] = source[property];
        }
    }
    return destination;
}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T12:23:54.683

如果我理解正确的话，`App.Views.ListView`是一种混合。因此，您可以执行以下操作：

```
var App.Views.ExtendedListView = Backbone.View.extend(_.extend(App.Views.ListView, {
    newMethod: function () {
        // ...
    }
}));

var extListView = new App.Views.ExtendedListView(); 
```

它看起来有点难看，但它确实有效。如果你能展示你的`App.Views.ListView`，也许我们可以找到一个更漂亮的决定。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-05T16:06:30.253

Backbone[`extend`](https://github.com/documentcloud/backbone/blob/master/backbone.js#L1292)与 Underscore 不同[`extend`](https://github.com/documentcloud/underscore/blob/master/underscore.js#L666)。下划线`extend`只不过是一个`for`用于（浅）复制对象属性的循环：

```
_.extend = function(obj) {
  each(slice.call(arguments, 1), function(source) {
    for (var prop in source) {
      obj[prop] = source[prop];
    }
  });
  return obj;
}; 
```

Backbone`extend`是其内部[`inherits`功能](https://github.com/documentcloud/backbone/blob/master/backbone.js#L1398)的包装器：

```
var extend = function(protoProps, classProps) {
  var child = inherits(this, protoProps, classProps);
  child.extend = this.extend;
  return child;
};

//...

// Helper function to correctly set up the prototype chain, for subclasses.
// Similar to `goog.inherits`, but uses a hash of prototype properties and
// class properties to be extended.
var inherits = function(parent, protoProps, staticProps) {
  var child;
  // [Bunch of code for properly setting up the prototype chain and elided]...
  return child;
}; 
```

注意 and 中的调用`return child`：它们都创建并返回新的东西，它们不会修改它们的参数。`extend``inherits`

使用`_.extend`将视图“类”混合到现有对象中的问题：

```
_.extend(App.Views.ListView, Backbone.View.extend({}); 
```

是它`_.extend`不会对原型做任何事情，`_.extend`也不会神奇地将对象转换为函数，所以你不能调用给你`new`的东西`_.extend`。您可以将属性混合到视图“类”中，但您必须将属性混合到`prototype`视图中并将视图分配给其最终目的地，以便您获得以下功能`App.Views.V`：

```
var V = Backbone.View.extend({ ... }); // Create the view.
_.extend(V.prototype, App.Views.V);    // Mix App.Views.V into its prototype.
App.Views.V = V;                       // Replace App.Views.V with our view function. 
```

演示：http: [//jsfiddle.net/ambiguous/5KSbw/](http://jsfiddle.net/ambiguous/5KSbw/)

所有这些诡计都会使必须扩展和维护此代码的可怜灵魂感到困惑，因此我建议不要这样做。你最好使用一个单独的对象来保存你的默认值：

```
var DEFAULTS = {
    Views: { ... }
}; 
```

然后明确引用这些默认值：

```
App.Views.ListView = Backbone.View.extend({
    myVar: DEFAULTS.Views.ListView.myVar,
    //...
}); 
```

但是，您将遇到问题，如果您只是复制参考`DeeperList`，则必须显式复制其内容以避免更改版本：`DEFAULTS`

```
App.Views.ListView = Backbone.View.extend({
    DeeperList: _.extend({}, DEFAULTS.Views.ListView.myVar),
    //...
}); 
```

如果`DeeperList`包含对象或数组，则需要使用 jQuery 的[`$.extend`](http://api.jquery.com/jQuery.extend/)with`true`作为第一个参数来获取深层副本：

```
App.Views.ListView = Backbone.View.extend({
    DeeperList: $.extend(true, {}, DEFAULTS.Views.ListView.myVar),
    //...
}); 
```

# php - 非常不擅长理解异常

> ID：10894332
> 
> 赞同：2
> 
> 时间：2012-06-05T08:57:35.480
> 
> 标签：php, exception, pdo

所以我正忙着转移到 PDO（是的，我仍然是这样的老式 mysql 驱动程序）而且我以前从未使用过异常。我下面的代码是基于我迄今为止所理解的。我需要它的应用程序将创建 3 个单独的数据库连接，其中 2 个是 mysql 和 1 个 mssql（因此是 if else 类型）。

问题是，即使我提供了不正确的连接值，它仍然会处理并继续执行脚本，并完全跳过“catch”，就好像没有错误一样。我知道基础应该是：

```
 try {
      if("condition" != "conditions") {
           throw new Exception("Oops I did it again");
      }
 catch(Exceptions as e) {
       echo $e->getMessage();
 } 
```

我也明白 PDO 将通过异常，所以我不必抛出，但它只是没有解决，请帮助并给我更多的监督，让我了解我对这个概念的误解：

```
 // connect(): Connect to a database (MySQL):

private function connect($cred) {
    $type = $cred['type'];
    if($type == "mysql") {
        try {
            $handler = new PDO("mysql:host".$cred['credentials']['server'].";dbname=".$cred['credentials']['database'].", ".$cred['credentials']['username'].",".$cred['credentials']['password']);
            if($cred['errors'] == 'exception') {
                $handler->setAttribute( PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION );
            } elseif($cred['errors'] == 'warning') {
                $handler->setAttribute( PDO::ATTR_ERRMODE, PDO::ERRMODE_WARNING );
            } else {
                $handler->setAttribute( PDO::ATTR_ERRMODE, PDO::ERRMODE_SILENT );
            }
        }
        catch(PDOException $e) {
            $this->informer("FATAL","An error has occured trying to connect to the connection (".$cred['name'].") -".$e->getMessage());
            return false;
        }
        return $handler;
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T09:52:19.120

发现了问题，这是我创建 PDO 异议时上面的语法问题，我有：

```
 $handler = new PDO("mysql:host".$cred['credentials']['server'].";dbname=".$cred['credentials']['database'].", ".$cred['credentials']['username'].",".$cred['credentials']['password']); 
```

它应该是：

```
 $handler = new PDO("mysql:host=".$cred['credentials']['server'].";dbname=".$cred['credentials']['database'].", ".$cred['credentials']['username'].",".$cred['credentials']['password']); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T10:01:10.803

我只是在这里猜测，但要从构造函数接收 PDO 异常，您可能必须在`new`调用中传递属性：

```
new PDO($dsn, $user, $password, array(
    PDO::ATTR_ERRMODE => PDO::ERRMODE_EXCEPTION
)); 
```

**更新**

刚刚测试过，但即使没有传递属性，它也会引发异常。

# ios - 如何从公司的商业名称中获取坐标？

> ID：10894334
> 
> 赞同：0
> 
> 时间：2012-06-05T08:57:42.530
> 
> 标签：ios, geocoding

我正在开发一个 Mapkit 应用程序，我想根据公司的商业名称显示注释，例如“Apple Inc.”。

你知道如何检索坐标吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T09:16:24.330

地理编码——http: [//developer.apple.com/library/ios/#DOCUMENTATION/CoreLocation/Reference/CLGeocoder_class/Reference/Reference.html#//apple_ref/occ/cl/CLGeocoder](http://developer.apple.com/library/ios/#DOCUMENTATION/CoreLocation/Reference/CLGeocoder_class/Reference/Reference.html#//apple_ref/occ/cl/CLGeocoder)

# objective-c - 在 iOS 中从 SQLite 保存和检索图像

> ID：10894337
> 
> 赞同：5
> 
> 时间：2012-06-05T08:57:54.917
> 
> 标签：objective-c, ios

我正在尝试将图像保存到 Sqlite，然后将图像加载到 UIImageView。但它没有得到工作。我不知道出了什么问题。这是我正在使用的代码。谁能帮我解决这个问题。

```
- (void)saveImage {
    sqlite3_stmt *compiledStmt;
    if(sqlite3_open([dbPath UTF8String], &db)==SQLITE_OK){
        const char *insertSQL="insert into Image(Image)values(?)";
        if(sqlite3_prepare_v2(db,insertSQL, -1, &compiledStmt, NULL) == SQLITE_OK){
            UIImage *image = [UIImage imageNamed:@"farmhouse.png"];
            NSData *imageData=UIImagePNGRepresentation(image);
            sqlite3_bind_blob(compiledStmt, 1, [imageData bytes], [imageData length], NULL);

            sqlite3_step(compiledStmt);

            char *errMsg;
            sqlite3_exec(db, insertSQL, NULL,compiledStmt,&errMsg);

        }
    }
}

- (void)showImage {
    sqlite3_stmt *compiledStmt;
    if(sqlite3_open([dbPath UTF8String], &db)==SQLITE_OK){
        const char *insertSQL = "Select Image from Image Where Sl.No = ?";
        sqlite3_prepare_v2(db,insertSQL, -1, &compiledStmt, NULL);
        if(sqlite3_prepare_v2(db,insertSQL, -1, &compiledStmt, NULL) == SQLITE_OK){
            sqlite3_bind_int(compiledStmt, 1, 1);
            if(SQLITE_DONE != sqlite3_step(compiledStmt)) {                
                NSData *data = [[NSData alloc] initWithBytes:sqlite3_column_blob(compiledStmt, 1) length:sqlite3_column_bytes(compiledStmt, 1)];

                if(data == nil)
                    NSLog(@"No image found.");
                else
                    imgView.image = [UIImage imageWithData:data];

            }
        }
    }
} 
```

谁能指出上面代码的问题。

提前致谢

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-05T09:10:10.350

```
- (void)saveImage 
{
  sqlite3_stmt *compiledStmt;
  sqlite3 *db;
  if(sqlite3_open([dbPath UTF8String], &db)==SQLITE_OK){
  NSString *insertSQL=@"insert into Image(image) VALUES(?)";
  if(sqlite3_prepare_v2(db,[insertSQL cStringUsingEncoding:NSUTF8StringEncoding], -1, &compiledStmt, NULL) == SQLITE_OK){
  UIImage *image = [UIImage imageNamed:@"vegextra.png"];
  NSData *imageData=UIImagePNGRepresentation(image);

  sqlite3_bind_blob(compiledStmt, 1, [imageData bytes], [imageData length], SQLITE_TRANSIENT);

  if(sqlite3_step(compiledStmt) != SQLITE_DONE ) {
      NSLog( @"Error: %s", sqlite3_errmsg(db) );
  } else {
      NSLog( @"Insert into row id = %lld", (sqlite3_last_insert_rowid(db)));
  }

sqlite3_finalize(compiledStmt);
  }
 }
sqlite3_close(db);
}

- (void)showImage
 {
   sqlite3_stmt *compiledStmt;
   sqlite3 *db;
   int i = 1;
   if(sqlite3_open([dbPath UTF8String], &db)==SQLITE_OK){
   NSString *insertSQL = [NSString stringWithFormat:@"Select image from Image Where Id = %d",i];
   if(sqlite3_prepare_v2(db,[insertSQL cStringUsingEncoding:NSUTF8StringEncoding], -1, &compiledStmt, NULL) == SQLITE_OK) {
   while(sqlite3_step(compiledStmt) == SQLITE_ROW) {

   int length = sqlite3_column_bytes(compiledStmt, 0);
   NSData *imageData = [NSData dataWithBytes:sqlite3_column_blob(compiledStmt, 0) length:length];

   NSLog(@"Length : %d", [imageData length]);

  if(imageData == nil)
     NSLog(@"No image found.");
  else
     imgView.image = [UIImage imageWithData:imageData];
   }
 }
 sqlite3_finalize(compiledStmt);
}
sqlite3_close(db);
} 
```

# php - 我可以加载外部页面而不重定向到它吗？

> ID：10894342
> 
> 赞同：1
> 
> 时间：2012-06-05T08:58:05.103
> 
> 标签：php, javascript, load

我想运行 HTML 第 1 页，当它完成加载时，我想让它加载 HTML 第 2 页但不重定向到第 2 页。只是为了运行那里的操作，但要留在第 1 页上。我不确定是否你可以使用 PHP、JS 或 META 标签来做类似的事情，但可能有一种方法。

请告诉我。提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T09:02:14.470

你可以通过 javascript 来实现，但我认为它通常是不好的形式。

为了简洁起见，下面的示例使用 jQuery。

```
$(window).load(function(){
   $('#dynamic').load('page2.html');
}); 
```

您必须有一个要替换的容器，在这种情况下，我们使用 ID 为“动态”的 div。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T10:15:25.283

见[http://api.jquery.com/jQuery.get/](http://api.jquery.com/jQuery.get/)

如您所见，只有第一个参数是强制性的。这意味着如果您不提供它，则请求并获取该页面，但结果不会用于任何事情。听起来这就是你想要的。

# java - 如何仅将html文件中的表格显示到Android中的webview中

> ID：10894348
> 
> 赞同：0
> 
> 时间：2012-06-05T08:58:10.483
> 
> 标签：java, android, webview, web-scraping

我想知道如何通过直接从给定的 url 获取它来仅显示 webview 中的表格。考虑例如网址： http: [//www.soccerstats.com/](http://www.soccerstats.com/)，在右侧我们有几个表格显示已玩的比赛和积分，我们如何做到这一点，只包括包含英超联赛详细信息的表格网络视图。否则，唯一的选项是解析每个单独的元素，然后一一添加。请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-11-15T00:29:51.767

您可以使用[Jsoup](https://jsoup.org/)轻松完成。所以你的代码看起来像这样。

```
new AsyncTask<Void, Void, String>() {
    @Override
    protected String doInBackground(Void... params) {
        String data = null;
        try {
            Document doc = Jsoup.connect("http://wikipedia.com").get();
            data = doc.select("css_selector_here").html();
        } catch (Exception e) {
            e.printStackTrace();
        }
            return data;
    }

    @Override
    protected void onPostExecute(String s) {
        super.onPostExecute(s);
        wv.loadData(s, "text/html", "UTF-8");
    }
}.execute(); 
```

# apache - 速度事件的例子

> ID：10894349
> 
> 赞同：0
> 
> 时间：2012-06-05T08:58:11.860
> 
> 标签：apache, events, velocity

我使用**Apache Click**。

我在组中组织资源（例如：alert.nofile.found.title alert.nofile.found.text，）。所以我并不总是包括文本​​编程需求（page.addModel（“alertNofileFoundTitle”，getMessage（“alert.nofile.found.title”）））我正在寻找一个机会与速度拦截事件以匹配名称资源。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T15:08:48.660

查看ReferenceInsertionEventHandler，我不知道Click，但这通常用于拦截Velocity中的引用。

# usb - 如何在 C# 中模拟 USB 的插拔

> ID：10894357
> 
> 赞同：2
> 
> 时间：2012-06-05T08:58:36.520
> 
> 标签：usb

我是编程新手，我想我必须深入编程。我们有一个连接到 USB 端口的设备，并且在重新启动期间进入低功耗模式，之后它无法唤醒，除非它被拔下并再次插入。我已经尝试过 devcon，但是 Windows 无法正确识别该设备，因此它无法正常工作。到目前为止，我已经设法使用电力线中的继电器使其工作，如果可能的话，这就是我想以编程方式模拟的内容。我知道是司机，但我已经联系了公司，他们说这是他们的司机的问题，但没有修复日期，我们的截止日期很快就到了。我在互联网上进行了搜索，实现它的唯一方法是通过 IOCTL_USB_HUB_CYCLE_PORT 但我不知道如何开始。任何帮助都会非常有价值。在一些论坛中，他们已经做出了努力，但到目前为止我还没有找到任何有效的例子，所以如果你给我一些代码提示，对我来说真的很好。撕开 USB 电缆并改变屏蔽层并不是最好的选择，这就是我寻求帮助的原因。如果可以，请向我提供一些额外的信息。非常感谢

# jquery - 检查 IE 兼容性 jquery

> ID：10894358
> 
> 赞同：-2
> 
> 时间：2012-06-05T08:58:48.313
> 
> 标签：jquery

要检查用户是否正在使用 IE，这是否可行：

```
if( $.browser.msie)
alert('in IE'); 
```

这适用于所有版本的 IE 吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T09:32:44.297

这适用于所有版本的 IE 吗？

**是的，**它适用于所有版本的IE *（我刚刚在ie7、ie8、ie9上测试过，你应该有）*

***完全不推荐***，从 jQuery 文档本身，

由于[$.browser](http://api.jquery.com/jQuery.browser/)用于`navigator.userAgent`确定平台，因此很容易受到用户的欺骗或浏览器本身的虚假陈述。在可能的情况下，最好完全避免使用特定于浏览器的代码。[$.support](http://api.jquery.com/jQuery.support/)属性可用于检测对特定功能的支持，而不是依赖于 $.browser 。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T09:02:37.880

取决于您使用的 jQuery 版本，`$.browser`已弃用。您应该阅读[API](http://api.jquery.com/jQuery.browser/)以获得更多信息。用于`$.support`测试浏览器的兼容性。

# android - 插入 SQLite 数据的最有效方法

> ID：10894359
> 
> 赞同：0
> 
> 时间：2012-06-05T08:58:48.823
> 
> 标签：android, sqlite

首次安装时，我的应用程序必须缓存从网络获取的数据，并将行插入 SQLite 数据库。我最终得到了大约 700 个插入，这至少需要 15 秒。目前我的逻辑如下（伪）：

```
ScrollThroughAllObjects(){
    if(objectDoesNotExist){
        cacheObject();
    }
}

cacheObject(Object ob){
    ContentValues values = new ContentValues();
    values.put(KEY_ID, ob.getId);
    // add lots more values
    return mDb.insert(DATABASE_TABLE, null, values);
} 
```

有没有更有效、更快的方法来处理这个插入？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-05T09:01:21.463

**使用SQLite Transaction**执行记录插入。它将惊人地加快整个过程；因为当您执行单个插入（一次一个）时，SQLite 将每个插入视为一个事务，并且需要为每次执行创建*日志文件*（这需要时间）。但是，当您将所有添加/编辑/删除查询绑定到单个事务时，在整个事务结束时只会创建一个日志文件，从而导致 SQLite 快速执行查询。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T09:10:41.750

你应该使用`bulkInsert`方法。您可以从[SQLiteContentProvider](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android-apps/2.3_r1/com/android/apps/tag/provider/SQLiteContentProvider.java)获取代码。根据您的需要对其进行修改。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-05T10:59:57.653

**创建并连接到数据库**

首先将 android.databse.sqlite.SQLiteDatabase 导入您的应用程序。然后使用 openOrCreateDatabase() 方法创建或连接到数据库。[Sqlite 文档](http://developer.android.com/reference/android/database/sqlite/SQLiteDatabase.html)。

onCreate() – 这是我们需要编写创建表语句的地方。这在创建数据库时调用。onUpgrade() - 当数据库升级时调用此方法，例如修改表结构，向数据库添加约束等，

公共类 DatabaseHandler 扩展 SQLiteOpenHelper {

```
// All Static variables
// Database Version
private static final int DATABASE_VERSION = 1;

// Database Name
private static final String DATABASE_NAME = "contactsManager";

// Contacts table name
private static final String TABLE_CONTACTS = "contacts";

// Contacts Table Columns names
private static final String KEY_ID = "id";
private static final String KEY_NAME = "name";
private static final String KEY_PH_NO = "phone_number";

public DatabaseHandler(Context context) {
    super(context, DATABASE_NAME, null, DATABASE_VERSION);
}

// Creating Tables
@Override
public void onCreate(SQLiteDatabase db) {
    String CREATE_CONTACTS_TABLE = "CREATE TABLE " + TABLE_CONTACTS + "("
            + KEY_ID + " INTEGER PRIMARY KEY," + KEY_NAME + " TEXT,"
            + KEY_PH_NO + " TEXT" + ")";
    db.execSQL(CREATE_CONTACTS_TABLE);
}

// Upgrading database
@Override
public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
    // Drop older table if existed
    db.execSQL("DROP TABLE IF EXISTS " + TABLE_CONTACTS);

    // Create tables again
    onCreate(db);
} 
```

**插入记录**

Android 附带了一系列简化数据库使用的类。使用 ContentValues 实例创建一系列表字段来匹配将传递给 insert() 方法的数据。Android 为更新和删除记录创建了类似的方法。

该`addContact()`方法接受联系人对象作为参数。我们需要使用 Contact 对象构建 ContentValues 参数。一旦我们在数据库中插入数据，我们需要关闭数据库连接。

```
 // Adding new contact
public void addContact(Contact contact) {
    SQLiteDatabase db = this.getWritableDatabase();

    ContentValues values = new ContentValues();
    values.put(KEY_NAME, contact.getName()); // Contact Name
    values.put(KEY_PH_NO, contact.getPhoneNumber()); // Contact Phone Number

    // Inserting Row
    db.insert(TABLE_CONTACTS, null, values);
    db.close(); // Closing database connection
} 
```

请参阅此[链接](http://www.androidhive.info/2011/11/android-sqlite-database-tutorial/)的完整文章。

观看这个[视频](http://thenewboston.org/watch.php?cat=6&number=117)，它是简单的定义，如何创建表并将数据插入到 android。

最后不要错过这个，Android SQLite：插入、更新、删除和显示数据（[链接](http://blog.sptechnolab.com/2011/03/02/mysql/android-sqlite-insert-update-delete-and-display-data/)）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-05T09:02:25.023

将整个操作包装在一个事务中。仅此一项就可以极大地提高您的速度，并为您带来交易行为的好处。

# javascript - 使用 jQuery 进行图像预览，如何删除 a href 点击事件

> ID：10894364
> 
> 赞同：0
> 
> 时间：2012-06-05T08:58:54.683
> 
> 标签：javascript, html, css

这不应该那么复杂：

我正在使用[最简单的工具提示和图像预览使用 jQuery](http://cssglobe.com/post/1695/easiest-tooltip-and-image-preview-using-jquery) 我正在尝试使用这个[示例](http://cssglobe.com/lab/tooltip/02/)

如何禁用原始图片上的点击事件，我只想显示工具提示（我不想让点击图片）

如何才能做到这一点？谢谢！

这是当前的样式：

```
<style>
#preview{
    position:absolute;
    border:1px solid #ccc;
    background:#333;
    padding:5px;
    display:none;
    color:#fff;
    }
</style> 
```

这是Javascript：

```
this.imagePreview = function(){ 
    /* CONFIG */

        xOffset = 10;
        yOffset = 30;

        // these 2 variable determine popup's distance from the cursor
        // you might want to adjust to get the right result

    /* END CONFIG */
    $("a.preview").hover(function(e){
        this.t = this.title;
        this.title = "";    
        var c = (this.t != "") ? "<br/>" + this.t : "";
        $("body").append("<p id='preview'><img src='"+ this.href +"' alt='Image preview' />"+ c +"</p>");                                
        $("#preview")
            .css("top",(e.pageY - xOffset) + "px")
            .css("left",(e.pageX + yOffset) + "px")
            .fadeIn("fast");                        
    },
    function(){
        this.title = this.t;    
        $("#preview").remove();
    }); 
    $("a.preview").mousemove(function(e){
        $("#preview")
            .css("top",(e.pageY - xOffset) + "px")
            .css("left",(e.pageX + yOffset) + "px");
    });         
};

// starting the script on page load
$(document).ready(function(){
    imagePreview();
}); 
```

这是主要的：

```
<a href="1.jpg" /*class="preview"*/><img src="1s.jpg" alt="gallery thumbnail" /></a> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T09:02:52.927

如果您使用的是最新版本的 jQuery：

```
$('selector').click(false); 
```

对于早期版本：

```
$('selector').click(function(){return false;}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-05T09:16:34.197

我会使用：

```
 $('.preview').click(function(e) {
        e.preventDefault();
        return false;
    }); 
```

（如果您删除围绕 class="preview" 的评论）

# jquery - 不稳定的 jQuery 导航

> ID：10894368
> 
> 赞同：2
> 
> 时间：2012-06-05T08:59:16.743
> 
> 标签：jquery, navigation, slidedown, slideup

我的 jQuery 导航存在问题。它没有通常的导航设置（ul > li > ul 等）。我在这里有一个 jsfiddle：http: [//jsfiddle.net/RMRGH/2/](http://jsfiddle.net/RMRGH/2/)
*如果将代码放在本主题中而不是 jsfiddle 更方便，请告诉我，我会将其粘贴在这里；） .*

CSS 有点乱，但确实有效 =)。由于底层的 CMS(Joomla)，我不得不使用这个设置。

导航似乎不稳定，我没有足够的 jQuery 知识来找出原因。

当您将鼠标悬停在项目上时，从一个项目到另一个项目相当快。菜单变得无法使用，因为它会立即向上滑动。摆弄它，你会明白我在说什么（很难解释）。

我无法弄清楚这个问题的根源以及如何解决它。我希望你们在stackoverflow的人可以帮助我。

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T09:14:30.960

我更新了你的小提琴：http: [//jsfiddle.net/RMRGH/6/](http://jsfiddle.net/RMRGH/6/)

似乎问题在于丢失`clearTimeout()`导致`jQuery('#nav li').hover(function(){}..)`超时继续，即使您再次悬停菜单，从而关闭它。

这是代码：

```
jQuery(document).ready(function(){

    var timer;
    var hover;

    jQuery('.moduletable-subNav > ul').hide();

    jQuery('#nav li').hover(
        function(){
            var id = jQuery(this).attr('data-number');
            jQuery('.moduletable-subNav > ul').slideUp();
            jQuery('#submenu-'+id).stop().slideDown();
            clearTimeout(timer);
        },
        function(){
            var id = jQuery(this).attr('data-number');
            timer = setTimeout(function() { jQuery('#submenu-'+id).slideUp(); },1000);
        }
    );

    jQuery('.moduletable-subNav ul').hover(
        function(){
            clearTimeout(timer);
        },
        function(){
            var id = jQuery(this).attr('id');
            timer = setTimeout(function() { jQuery('#'+id).slideUp(); },1000);
        }
    );
});
​ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-05T09:13:58.600

您的幻灯片上下起伏是异步运行的并且变得混乱。以下工作并且相当顺利......虽然不确定它是否是你想要的！

```
jQuery(document).ready(function(){
    jQuery('.moduletable-subNav > ul').hide();

    jQuery('#nav li').hover(
        function(){
            var id = jQuery(this).attr('data-number');
            jQuery('.moduletable-subNav > ul').hide();
            jQuery('#submenu-'+id).slideDown();
        },
        function(){
            var id = jQuery(this).attr('data-number');
            jQuery('#submenu-'+id).slideUp();
        }
    );
}); 
```

# php - 操作 PHP 对象（删除/编辑）

> ID：10894369
> 
> 赞同：2
> 
> 时间：2012-06-05T08:59:21.880
> 
> 标签：php, arrays, object

我有一个从 MySQL 检索到的 PHP 对象。

我可以通过 foreach 循环并使用 => 运算符来检索每个对象的值。我想做的是在 foreach 循环之前应用一些逻辑，并可能编辑/删除一些行。

我将如何更改其中一项的值，例如对象 1 的 question_id？另外，如果满足某个条件，我将如何遍历每个对象并删除它？然后如何插入新对象？

有没有我可以阅读的教程，我可以用数组做大部分事情，但对象对我来说是新的。

提前致谢。

```
Array ( 
    [0] => stdClass Object ( 
        [question_id] => 1 
        [question_type] => multiple_choice 
        [question_unit] => 7 
        [question_difficulty] => 56.5956047853 
    ) 
    [1] => stdClass Object ( 
        [question_id] => 2 
        [question_type] => multiple_choice 
        [question_unit] => 7 
        [question_difficulty] => 54.665002232  
    ) 
    [2] => stdClass Object ( 
        [question_id] => 3 
        [question_type] => multiple_choice 
        [question_unit] => 7 
        [question_difficulty] => 55.2923002984 
    ) 
) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T09:03:33.957

[您可以使用unset()](http://php.net/manual/en/function.unset.php)删除对象属性：

> 甚至可以取消设置在当前上下文中可见的对象属性。

[http://php.net/manual/en/function.unset.php](http://php.net/manual/en/function.unset.php)

```
unset($array[1]->question_type); 
```

* * *

如果要遍历对象并对其进行操作，可以使用foreach [(](http://php.net/manual/en/control-structures.foreach.php) [)](http://php.net/manual/en/language.references.pass.php)并[使用`$obj`](http://php.net/manual/en/language.references.pass.php)`&`.

**例如，如果**要删除所有等于 的键`question_id`，请使用以下命令：**`3`**

 **```
foreach ($array as &$obj) {
    if ($obj->question_id == 3) unset($obj->question_id);
} 
```

或者，如果你想删除整个对象，你可以这样做：

```
foreach ($array as &$obj) {
    if ($obj->question_id == 3) unset($obj);
} 
```

* * *

### 更新

似乎通过引用传递不起作用（至少在你的情况下不是），所以你可以试试这个：

```
$c = count($questions);
for ($i=0; $i<$c; $i++) {
    if ($questions[$i]->question_id == 3) unset($questions[$i]);
} 
```**

# javascript - 动态添加 SVG 渐变

> ID：10894377
> 
> 赞同：9
> 
> 时间：2012-06-05T08:59:42.703
> 
> 标签：javascript, jquery, svg

我有这个带路径的 SVG 容器。我想编辑它，所以路径的填充将是一个模式。这是我失败的尝试：

我添加了一个渐变：

```
$('svg defs').prepend('<linearGradient id="MyGradient"><stop offset="5%" stop-color="#F60" /><stop offset="95%" stop-color="#FF6" /></linearGradient>'); 
```

然后更改路径的填充：

```
$(base + ' svg path').each(function() {
    this.setAttribute('fill','url(#MyGradient)')
} 
```

这行不通。我错过了什么？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-06-05T13:32:40.640

您的问题（您“缺少”）是 jQuery 在 XHTML 命名空间中创建新元素，而 SVG 元素必须在 SVG 命名空间中创建。您不能在 SVG 元素的字符串中使用原始代码。

最简单（无插件）的方法是停止过度依赖 jQuery，而只使用简单的 DOM 方法来创建元素。是的，它比仅仅使用 jQuery 为你神奇地构造你的元素更冗长......但是 jQuery 在这种情况下不起作用。

### 演示：http: [//jsfiddle.net/nra29/2/](http://jsfiddle.net/nra29/2/)

```
createGradient($('svg')[0],'MyGradient',[
  {offset:'5%', 'stop-color':'#f60'},
  {offset:'95%','stop-color':'#ff6'}
]);
$('svg path').attr('fill','url(#MyGradient)');

// svg:   the owning <svg> element
// id:    an id="..." attribute for the gradient
// stops: an array of objects with <stop> attributes
function createGradient(svg,id,stops){
  var svgNS = svg.namespaceURI;
  var grad  = document.createElementNS(svgNS,'linearGradient');
  grad.setAttribute('id',id);
  for (var i=0;i<stops.length;i++){
    var attrs = stops[i];
    var stop = document.createElementNS(svgNS,'stop');
    for (var attr in attrs){
      if (attrs.hasOwnProperty(attr)) stop.setAttribute(attr,attrs[attr]);
    }
    grad.appendChild(stop);
  }

  var defs = svg.querySelector('defs') ||
      svg.insertBefore( document.createElementNS(svgNS,'defs'), svg.firstChild);
  return defs.appendChild(grad);
} 
```

### 使用库

或者，您可以包含[Keith Woods 的“jQuery SVG”插件](http://keith-wood.name/svg.html)，该插件具有许多用于常见 SVG 操作的便捷方法，包括[创建线性渐变](http://keith-wood.name/svgRef.html#lineargradient)的能力。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-05T09:11:47.477

我认为您必须使用 jQuery 的 SVG 插件（在[此处](http://keith-wood.name/svg.html)找到）。使用“普通”jQuery 库添加 SVG 元素时，命名空间可能会混淆。

尝试以下操作：

```
svg.linearGradient( $('svg defs'), 
                    'MyGradient', 
                    [ ['5%', '#F60'], ['95%', '#FF6']] ); 
```

（不过，不完全确定。您可能需要稍微修改一下该代码。）

***编辑***

刚刚创建了这个[小提琴](http://jsfiddle.net/ufurA/1/)来测试论文（正如@Phrogz 所建议的那样）。实际上，它`http://www.w3.org/1999/xhtml`作为插入的命名空间返回`<linearGradient>`，这是错误的命名空间，因此验证了我的上述推测。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-05T09:25:20.917

找到了解决方案。它有点难看，但不需要使用额外的插件。

显然，在第一次创建 SVG 时，必须在标签中包含一个模式（它可能只是在那时才读取）。

因此，用它们自己替换 SVG 标签的包装器的内容是可行的（`base`作为那个包装器）：

```
$(base).html($(base).html()) 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-02-06T13:48:37.267

我只是想顺便说一下，我找到了一个更优雅的解决方案，它允许您继续使用带有 SVG 元素的 jQuery，但没有 jQuery SVG 库（不再更新，并且在 jQuery 1.8 或更高版本中存在一些问题）。只需使用这样的函数：

```
createSVGElement= function(element) {
    return $(document.createElementNS('http://www.w3.org/2000/svg', element));
} 
```

它在 SVG 命名空间上创建一个 SVG 元素并用 jQuery 封装它，一旦在正确的命名空间中创建了元素，您就可以在 jQuery 中自由使用它：

然后，您可以通过以下方式使用该功能：

```
var $myGradient= createSVGElement('linearGradient')
    .attr( {
        id:"MyGradient"
    });

//if you dont need `defs`, skip this next line
var $myDefs = createSVGElement('defs');

createSVGElement('stop')
    .attr({
        offset: "5%",
        "stop-color": "#F60"
    })
    .appendTo($myGradient);

createSVGElement('stop')
    .attr({
        offset:"95%",
        "stop-color":"#FF6"
    })
    .appendTo($myGradient);

//Use this if you already have `defs`
$('svg defs').prepend($myGradient);

//Use this if you dont have `defs`
$('svg').prepend($myDefs);
$('svg defs').prepend($myGradient); 
```

它不像您希望的那样紧凑，因为您必须手动创建每个元素，但它比使用 DOM 方法操作所有内容要好得多。

一个小提示，jQuery .attr() 函数假定所有属性都是小写的，这不是 SVG 元素的情况（例如标签中的`viewBox`属性）。`<svg>`为了解决这个问题，当使用大写字母设置属性时，请使用以下内容：

```
$("svg")[0].setAttribute("viewBox", "0 0 1000 1000"); 
```

# java - OpenCV 2.4.1：UnsatisfiedLinkError

> ID：10894379
> 
> 赞同：6
> 
> 时间：2012-06-05T08:59:55.450
> 
> 标签：java, android, opencv, android-ndk, java-native-interface

我有一个 android 项目，它有本机代码。在本机部分，我使用 OpenCV。当我使用 OpenCV 2.3.1 时，一切都可以编译并且工作正常，但是当我尝试切换到 2.4.1 版本时，我遇到了问题：

它编译没有任何错误，但是当我启动我的应用程序时，由于 UnsatisfiedLinkError，它无法加载我的库。

```
Cannot load library: link_image[1936]:    37 could not load needed library 'libopencv_java.so' for 'mylibrary.so' (load_library[1091]: Library 'libopencv_java.so' not found) 
```

我看到 Open CV 尝试加载 libopencv_java.so，但我不需要它，而且我不在 java 代码中使用 OpenCV。这个图书馆的大小> 5M。

如何在不将此库添加到项目的情况下进行编译？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-05T12:12:15.580

除了 JNI 包装器到 C++ OpenCV 接口之外，libopencv_java.so 还包含所有 OpenCV 本机代码**。**
当您使用适用于 Android 的 OpenCV 2.4 构建 JNI 库时，您可以使用**libopencv_java.so （默认选项）****动态**链接并将其包含到您的 APK 中，或者通过显式添加此选项来**静态链接：**

 ****```
include $(CLEAR_VARS)
OPENCV_LIB_TYPE:=STATIC
include <your path>/OpenCV.mk 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-26T01:37:11.980

当我从 2.3 升级到 2.4 时，以下变体对我有用（如果您的应用程序中有 JNI 部分，请遵循说明。底部链接中的详细信息。）：

1/ 替换 Android.mk 中的路径，以便 OpenCV.mk 链接仍然有效（在 2.4 中它位于 native/jni/ 而不是 share/OpenCV/ 中）。

2/ 然后在包含 OpenCV.mk 之前写下这个：

```
OPENCV_INSTALL_MODULES:=on 
(this copies libopencv_java.so to your project's lib folder) 
```

您也可以复制其他库（例如底部链接中使用的 OPENCV_CAMERA_MODULES）

3/ 之后，在 Activity 类的静态部分中，您可以加载库（在依赖它的其他人之前加载库）：

```
System.loadLibrary("opencv_java"); 
(this loads libopencv.so) 
```

或者：

```
if (!OpenCVLoader.initDebug()) {
    // Handle initialization error
}) 
```

（第二个看起来更干净，但我还没有尝试过）

源（对于部分）是链接中的第 3 步和第 4 步：[使用静态初始化的应用程序开发](http://docs.opencv.org/doc/tutorials/introduction/android_binary_package/dev_with_OCV_on_Android.html#application-development-with-static-initialization)****

# ios - 核心数据映射模型版本哈希与源模型版本哈希不匹配

> ID：10894383
> 
> 赞同：3
> 
> 时间：2012-06-05T09:00:13.793
> 
> 标签：ios, core-data, migration, mapping-model

启用 Core Data Migration Debug 后，在执行迁移时，我看到三个实体（2、3、4）的哈希值发生了变化，正如预期的那样。实体 1 没有变化，仅用于说明。

存储元数据（源模型）：

```
Entity1 = <67852e01 ...>; 
Entity2 = <2b68bba5 ...>; 
Entity3 = <58babd8d ...>; 
Entity4 = <1c694c80 ...>; 
```

当前模型（目标模型）：

```
Entity1 = <67852e01 ...>; 
Entity2 = <260e4d68 ...>;
Entity3 = <13360b6f ...>; 
Entity4 = <16513e1b ...>; 
```

接下来，我创建映射模型，但映射模型中的哈希值与实际模型中的不同：

映射模型源哈希：

```
Entity1 = <67852e01 ...>; 
Entity2 = <2b68bba5 ...>; 
Entity3 = <d66bed18 ...>; // !!!
Entity4 = <2c56997a ...>; // !!! 
```

映射模型目标哈希：

```
Entity1 = <67852e01 ...>; 
Entity2 = <260e4d68 ...>; 
Entity3 = <cb08343c ...>; // !!!
Entity4 = <1bc2cf8c ...>; // !!! 
```

可以使用与实际商店的哈希值不同的哈希值创建映射模型的原因是什么？我查看了这个[问题](https://stackoverflow.com/questions/2492103/core-data-migration-problem-persistent-store-migration-failed-missing-source)并尝试更新映射模型的模型，但没有奏效。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-26T09:31:23.453

最终奏效的解决方案是创建一个新模型版本，其中删除了这些实体，然后创建另一个新模型，重新引入实体。

# android - 在使用 android 在linkedin 上发布消息时需要帮助

> ID：10894384
> 
> 赞同：1
> 
> 时间：2012-06-05T09:00:17.117
> 
> 标签：android, rest, linkedin

如何对android中linkedin中的帖子/共享发表评论我想对用户在android中linkedin中发送的共享/帖子发表评论？是否有任何可用的工作源代码？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T22:05:09.327

一旦你获取了网络更新并有一个特定的更新要评论，你需要做的就是进行以下 POST 调用：

```
POST http://api.linkedin.com/v1/people/~/network/updates/key={NETWORK UPDATE KEY}/update-comments 
```

发布的 XML 输入示例：

```
<?xml version='1.0' encoding='UTF-8'?>
<update-comment>
  <comment>I wish my company also offered skydiving classes!</comment>
</update-comment> 
```

可以在本文档中找到更多详细信息：[https ://developer.linkedin.com/documents/commenting-reading-comments-and-likes-network-updates](https://developer.linkedin.com/documents/commenting-reading-comments-and-likes-network-updates)

# opencl - clBuildProgram 产生访问冲突（使用 Cloo）

> ID：10894386
> 
> 赞同：0
> 
> 时间：2012-06-05T09:00:21.173
> 
> 标签：opencl, cloo

OpenCL 1.1，使用 Cloo 0.9.1.0。

对于某个 CL 模块，我在以下行出现崩溃：

```
program.Build(null, null, null, IntPtr.Zero); 
```

Visual Studio 2010 告诉我：

> Cloo.dll 中出现“System.AccessViolationException”类型的未处理异常
> 
> 附加信息：试图读取或写入受保护的内存。这通常表明其他内存已损坏。

我已将错误追溯到某行代码。

```
int offset = 1000000 * (input == 0); // This is the culprit!
const sampler_t smp = CLK_NORMALIZED_COORDS_FALSE | CLK_ADDRESS_CLAMP | CLK_FILTER_NEAREST;
int4 pixel = read_imagei(image, smp, (int2)(offset + x, y)); 
```

我正在使用上面的技巧来避免分支。**除了上述在编译时**产生访问冲突的一种情况外，它在所有情况下都可以正常工作。如果我删除条件乘法，它会起作用。例如

```
int offset = 1000000;
// -or-
int offset = (input != 0 ? 0 : 1000000); 
```

**我在这里面临编译器错误吗？如何解决此错误？**

关于我的显卡/驱动程序的一些详细信息：

> 驱动封装版本：8.85.7.2-110901a1-125827C-富士通科技
> 
> 解决方案提供商：ATI Technologies Inc. 2D 驱动程序版本：8.01.01.1152

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T10:34:17.693

这是一个编译器错误。希望有一天它会得到修复。现在，我将避免使用特定的优化技巧。

# iphone - iPhone 3GS 和 iPhone4/4S 的安全性（硬件加密）差异

> ID：10894387
> 
> 赞同：1
> 
> 时间：2012-06-05T09:00:22.827
> 
> 标签：iphone, hardware, data-protection

我这里有一部 iPhone 4S 和一部 iPhone 3GS 用于研究目的。在接下来的几周里，我想执行一些安全测试，特别是基于硬件加密和 Apple 的数据保护 API。这还包括寻找一些潜在的攻击场景。所以我想我必须为它越狱其中一个设备。

那么问题来了：iPhone 4S 与 iPhone 3GS 在硬件加密、安全机制、数据保护等方面有什么不同吗？因为我更喜欢越狱 3GS 但它也必须代表最新一代的设备（iPhone 4S）。

我不确定堆栈溢出是否是问这个问题的正确地方，但我认为这是一个关于安全机制的硬件特定实现和操作系统中的安全软件的问题。所以我认为这对于 apple.stackexchange.com 来说太详细了。

# javascript - 单选按钮、文本区域和输入检查

> ID：10894394
> 
> 赞同：1
> 
> 时间：2012-06-05T09:00:45.007
> 
> 标签：javascript, jquery

我有一个表单，所有输入字段都为 class `item`。当我单击提交时，它会使用以下功能检查是否填写了所有值。

```
$.each($(".items"),function(i,e){
    // loop through all the items
    if(e.value == "" || !$("input[name='"+e.name+"']:radio:checked").length)
        if(error.indexOf(e.title) === -1)
            error += e.title + "<br/>";
    }); 
```

此表单由文本区域、单选框和普通文本输入字段组成。它返回所有未填写的单选框，以及所有未填写的文本输入。但它也返回所有文本区域，无论是否填写。

我最初以为是因为我指定它来检查值，但似乎值检查实际上是检查文本区域，所以不可能是这样。

谁能帮助我让它只返回空元素？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-05T09:05:03.963

```
$.each( $( '.items' ), function() {
    if ( ( this.type === 'checkbox' || this.type === 'radio' ) && !this.checked ) {
        // Go
    }
    else if ( this.value === '' ) {
        // Do your stuff
    }
}); 
```

不幸的是，似乎别无选择，只能将案件分开。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-05T09:11:20.013

```
$.each($('.items'),function(i,elem){
    if( ($(elem).attr('type') == 'radio' || $(elem).attr('type') == 'checkbox') && !$(elem).is(':checked') ) {
               // RADIOS AND CHECKBOXES EMPTY
    } else if( $(elem).val().length == 0 ) {
              // INPUTS TYPE TEXT AND TEXTAREA EMPTY
    }
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-05T09:52:37.080

所以我结合使用了 JBRTRND 和 Florian Margaine 的答案，因为两者都不想 100% 正确工作。

我只是把它放在这里，以防有人遇到同样的问题。我从不相信我从他们那里得到的任何帮助，我真的很感激。

这就是我修复它的方法：

```
$.each($(".items"),function(){
    // loop through all the items
        // and alert the value
        if ( this.type == 'radio' && !$("input[name='"+this.name+"']:radio:checked").length) {
            if(error.indexOf(this.title) === -1)
                error += this.title + "<br/>";
        }
        else if ( this.value === '' ) {
            if(error.indexOf(this.title) === -1)
                error += this.title + "<br/>";
        }
    }); 
```

# jsf - 如何使用 ajax 从 selectOneRadio 重新渲染 selectManyCheckbox

> ID：10894396
> 
> 赞同：1
> 
> 时间：2012-06-05T09:00:45.203
> 
> 标签：jsf, trinidad

我正在尝试使用 a`selectOneRadio`重绘我的一些组件（即启用/禁用它们）。我试过只使用我的`selectManyCheckbox`; 没用。我也试过把`selectManyCheckbox`里面的`h:panelGroup`; 也没有工作。我很确定我的标签是正确创建的，因为我不知道它还能如何工作。

这是我到目前为止所拥有的：

```
 <tr:selectOneRadio id="useFilterChoices" value="#{randomCardBean.useFilters}">
        <f:selectItem itemLabel="All Cards" itemValue="allCards"/>
        <f:selectItem itemLabel="Filter By Category" itemValue="someCards"/>
        <f:ajax event="click" render="categoryChoicesBox"/>
    </tr:selectOneRadio>

    <tr:selectManyCheckbox id="categoryChoicesBox" disabled="#{randomCardBean.filterDisabled}" value="#{randomCardBean.selectedFilters}">
        <f:selectItems value="#{randomCardBean.filterChoices}"/>
    </tr:selectManyCheckbox> 
```

我使用 selectOneRadio 是因为我希望最终能够扩展过滤器选项。对此的任何帮助将不胜感激！

# android - 如何在 android 2.1 的 Activity 上支持多点触控功能？

> ID：10894399
> 
> 赞同：1
> 
> 时间：2012-06-05T09:01:07.973
> 
> 标签：android, android-layout, android-widget, multi-touch

我想在具有一组活动的应用程序中支持多点触控功能，如何在 Android 2.1 版本中以编程方式实现它？

请分享一些示例代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-07-04T10:34:16.437

这是您可以使用较新版本的 Android 执行此操作的方法：

```
@Override
public boolean onTouchEvent(MotionEvent e) {
    super.onTouchEvent(e);

    switch (MotionEventCompat.getActionMasked(e)) {
        case MotionEvent.ACTION_DOWN:
        case MotionEvent.ACTION_POINTER_DOWN:
            //Do action
            break;

    }

    return true;

} 
```

（`onTouchEvent`在视图中可用；不是活动）

无需调用`setOnTouchListener`，因为无论何时触摸屏幕都会调用它。通过覆盖它，您可以使用触摸事件对其进行自定义。请记住，普通的 onTouchListener 不**支持**多点触控

# r - 在数据框中每行选择一个单元格

> ID：10894402
> 
> 赞同：5
> 
> 时间：2012-06-05T09:01:18.920
> 
> 标签：r, matrix, dataframe

我有一个向量告诉我，对于日期框架中的每一行，应该更新该行中的值的列索引。

```
> set.seed(12008); n <- 10000; d <- data.frame(c1=1:n, c2=2*(1:n), c3=3*(1:n))
> i <- sample.int(3, n, replace=TRUE)
> head(d); head(i)
  c1 c2 c3
1  1  2  3
2  2  4  6
3  3  6  9
4  4  8 12
5  5 10 15
6  6 12 18
[1] 3 2 2 3 2 1 
```

这意味着对于第 1 行和第 4 行，应更新 c3；对于第 2、3 和 5 行，应更新 c2（除其他外）。在 R 中使用矢量化操作（即没有`apply`和朋友）实现这一目标的最简洁方法是什么？**编辑：**而且，如果可能的话，没有 R 循环？

我曾考虑过转换`d`为矩阵，然后使用一维向量寻址矩阵元素。但是我还没有找到一种从行索引和列索引计算一维地址的干净方法。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-05T10:47:56.923

使用您的示例数据，并且仅使用前几行（`D`及`I`以下），您可以通过矩阵轻松地做您想的事情。

```
set.seed(12008)
n <- 10000
d <- data.frame(c1=1:n, c2=2*(1:n), c3=3*(1:n))
i <- sample.int(3, n, replace=TRUE)
## just work with small subset
D <- head(d)
I <- head(i) 
```

首先，转换`D`成矩阵：

```
dmat <- data.matrix(D) 
```

接下来计算对应于由 指示的行和列的矩阵的向量表示的索引`I`。为此，很容易生成行索引以及列索引（由 给出`I`）`seq_along(I)`，在这个简单的例子中是向量`1:6`。要计算向量索引，我们可以使用：

```
(I - 1) * nrow(D) + seq_along(I) 
```

其中第一部分 ( `(I - 1) * nrow(D)`) 为我们提供了行数的正确倍数（此处为 6）来索引`I`第 th 列的开头。然后我们添加行索引以获得第`I`th 列中第 n 个元素的索引。

使用这个我们只是索引到`dmat`using `"["`，把它当作一个向量。`"["`( )的替换版本`"[<-"`允许我们在一行中进行替换。在这里，我将指示的元素替换为`NA`，以便更容易看到识别出正确的元素：

```
> dmat
  c1 c2 c3
1  1  2  3
2  2  4  6
3  3  6  9
4  4  8 12
5  5 10 15
6  6 12 18
> dmat[(I - 1) * nrow(D) + seq_along(I)] <- NA
> dmat
  c1 c2 c3
1  1  2 NA
2  2 NA  6
3  3 NA  9
4  4  8 NA
5  5 NA 15
6 NA 12 18 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-05T09:34:03.540

这是一种方法：

```
d[which(i == 1), "c1"] <- "one"
d[which(i == 2), "c2"] <- "two"
d[which(i == 3), "c3"] <- "three"

   c1  c2    c3
1   1   2 three
2   2 two     6
3   3 two     9
4   4   8 three
5   5 two    15
6 one  12    18 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-07T16:36:56.770

如果您愿意先将 data.frame 转换为矩阵，则可以使用两列矩阵索引要替换的元素。（从 开始`R-2.16.0`，可以直接使用 data.frames。）索引矩阵的第一列应该有行索引，第二列应该有列索引。

这是一个例子：

```
## Create a subset of the your data
set.seed(12008); n  <- 6 
D  <- data.frame(c1=1:n, c2=2*(1:n), c3=3*(1:n))
i <- seq_len(nrow(D))            # vector of row indices
j <- sample(3, n, replace=TRUE)  # vector of column indices 
ij <- cbind(i, j)                # a 2-column matrix to index a 2-D array 
                                 # (This extends smoothly to higher-D arrays.)  

## Convert it to a matrix    
Dmat <- as.matrix(D)

## Replace the elements indexed by 'ij'
Dmat[ij] <- NA
Dmat
#      c1 c2 c3
# [1,]  1  2 NA
# [2,]  2 NA  6
# [3,]  3 NA  9
# [4,]  4  8 NA
# [5,]  5 NA 15
# [6,] NA 12 18 
```

* * *

从 开始`R-2.16.0`，您将能够对数据帧使用相同的语法（即无需先将数据帧转换为矩阵）。

从`R-devel` `NEWS`文件中：

> 现在支持通过两列数字索引对数据帧进行矩阵索引以进行替换和提取。

使用当前`R-devel`快照，如下所示：

```
D[ij] <- NA
D
#   c1 c2 c3
# 1  1  2 NA
# 2  2 NA  6
# 3  3 NA  9
# 4  4  8 NA
# 5  5 NA 15
# 6 NA 12 18 
```

# cocoa - 我应该如何在应用沙箱中迁移 CoreData 文档？

> ID：10894404
> 
> 赞同：0
> 
> 时间：2012-06-05T09:01:22.733
> 
> 标签：cocoa, core-data, data-migration

我正在尝试更新基于 CoreData 的应用程序以满足在沙盒中运行的要求。然而，事实证明，迁移很困难。似乎 NSPersistentDocument 试图就地进行迁移，并希望在未经用户许可的情况下保存到磁盘。因此，轻量级迁移失败。

我只能想象我需要避免在磁盘上进行迁移的人，但我不知道如何在 NSPersistentDocument 中执行此操作。有人建议继承 NSDocumentController 并覆盖 makeDocumentForURL:... 以检查是否需要迁移。我假设当时的逻辑是创建一个新的无标题文档并将数据迁移到该文档，但我不确定这是否是最佳方法或应该考虑哪些其他方法。

我应该如何为沙盒核心数据应用程序执行迁移？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T21:58:25.727

我能够通过临时权利解决它。

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE plist PUBLIC "-//Apple//DTD PLIST 1.0//EN" "http://www.apple.com/DTDs/PropertyList-1.0.dtd">
<plist version="1.0">
<dict>
    <key>com.apple.security.app-sandbox</key>
    <true/>
    <key>com.apple.security.files.user-selected.read-write</key>
    <true/>
    <key>com.apple.security.network.client</key>
    <true/>
    <key>com.apple.security.temporary-exception.files.absolute-path.read-write</key>
    <string>/Volumes/</string>
    <key>com.apple.security.temporary-exception.files.home-relative-path.read-write</key>
    <string>/</string>
</dict>
</plist> 
```

就像没有启用沙箱一样，自动迁移就可以工作了。

但是，它本质上是禁用了大部分沙盒，所以我不确定苹果在应用商店批准时会如何反应。

在 developer.apple.com 上，当您发现自己不得不使用临时权利时，他们建议您提交错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-10T13:29:14.540

我发现解决方案比我想象的要复杂。因为有很多代码我在日记上写了答案：http: [//www.codeotaku.com/blog/2012-06/sandboxing-core-data-and-migrations](http://www.codeotaku.com/blog/2012-06/sandboxing-core-data-and-migrations)

不过，这里有一个简短的总结：Core Data 尝试迁移数据并就地写入文件。这在沙盒中不起作用，因为您只有对该文件的只读访问权限。因此，Core Data 迁移失败。就我而言，我劫持了文档创建过程以检查是否需要迁移，如果需要，请用户（通过提供 NSSavePanel）为迁移的数据选择一个位置。然后，迁移任务被传递给一个专门的类，并在合适的临时目录中进行迁移。最终数据被复制回用户指定的位置，然后打开该文档。

# java - CSS 样式和 使用 Apache Tika 解析时忽略标签

> ID：10894406
> 
> 赞同：1
> 
> 时间：2012-06-05T09:01:25.040
> 
> 标签：java, apache-tika

当我使用 AutoDetectParser 解析 PDF 或 Word 文档时，“li”、“ul”标签被转换为“p”标签。我需要 PDF 或 Word 文档的确切 HTML 内容。

我尝试了以下几种方式：

```
ToHTMLContentHandler textHandler = new ToHTMLContentHandler();
Metadata metadata = new Metadata();
Parser parser = new AutoDetectParser();
ParseContext context = new ParseContext();
context.set(HtmlMapper.class, new IdentityHtmlMapper());
parser.parse(in, textHandler, metadata, context); 
```

* * *

```
SAXTransformerFactory factory = (SAXTransformerFactory)SAXTransformerFactory.newInstance();
TransformerHandler handler = factory.newTransformerHandler();
handler.getTransformer().setOutputProperty(OutputKeys.METHOD, "html");
handler.getTransformer().setOutputProperty(OutputKeys.INDENT, "no");
handler.getTransformer().setOutputProperty(OutputKeys.ENCODING, "utf-8");
handler.setResult(new StreamResult(writer));
System.out.println(handler.toString());
return handler; 
```

但是“li”标签被替换为带有类的“p”标签，但在解析的 HTML 输出中看不到 CSS 样式。

任何帮助表示赞赏。

# php - 如果他们尚未登录，则使帐户过期

> ID：10894407
> 
> 赞同：-1
> 
> 时间：2012-06-05T09:01:26.453
> 
> 标签：php

如果他们没有登录网站，我需要在 3 个月后过期帐户。我怎样才能在代码中自动寻址来做到这一点？如何在 php 语言中解决三个月内自动从数据库中删除用户的问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T09:03:56.247

你有两个选择：

1.  运行一个 cron 作业，选择 3 个月未登录的用户，并将他们的帐户标记为已删除（恕我直言，实际上不要删除它们，可能只是一些残留数据）

2.  用户登录时，查看上次登录时间，如果大于3个月，则返回错误并强制用户注册。

# ruby-on-rails - Authlogic：如何阻止某些 IP 地址注册？

> ID：10894408
> 
> 赞同：1
> 
> 时间：2012-06-05T09:01:31.963
> 
> 标签：ruby-on-rails, ruby, authlogic

在 Rails 应用程序中使用 authlogic，我想阻止来自某些 IP 地址的用户注册（因为滥用）。这样做的正确方法是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-05T10:14:36.423

```
class SignupsController < ApplicationController
  before_filter :block_ip_addresses

  protected

  def block_ip_addresses
    head :unauthorized if current_ip_address == "XX.XX.XX.XX"
  end

  def current_ip_address
    request.env['HTTP_X_REAL_IP'] || request.env['REMOTE_ADDR']
  end
end 
```

# perl - 在 ./MIME/Parser/Filer.pm 第 365 行调用未定义的子例程 utf8::SWASHGET

> ID：10894411
> 
> 赞同：1
> 
> 时间：2012-06-05T09:01:59.257
> 
> 标签：perl, email, extract, mime, attachment

我正在尝试从收到的电子邮件中提取附件，并且正在使用以下与 MIME::Tools 相关的代码：

```
$parser = MIME::Parser->new();
$parser->output_dir("./tmp");
$message  = $parser->parse_data($msg); # $msg contains the email contents 
```

调用时`$parser->parse_data($msg)`，脚本失败并显示以下内容：

**在 ./MIME/Parser/Filer.pm 第 364 行调用的未定义子例程 utf8::SWASHGET**

这恰好是 Filer.pm 文件中正则表达式匹配的第一个实例，所以我假设它与执行正则表达式匹配的方式有关。我之前放置了一个正则表达式匹配，只是为了看看它是否确实与此相关，并且它在那个确切的位置失败并出现相同的错误。

对此有任何帮助吗？我检索电子邮件及其内容没有问题，但附件很痛苦。

我的 perl 版本是 5.8.9，MIME::Tools - 5.502，我不是 root 用户，遗憾的是无法访问 root 权限（我通过使用来解决这个问题

```
BEGIN { unshift @INC, "~email/mime"; } 
```

在顶部 /mime 包含来自相关 CPAN 模块的所有 lib 文件夹，在本例中为 MIME）

首先十分感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T05:52:06.117

在有帮助的 perl 修士插话之后，问题是我使用的 shebang 指向的是旧版本的 perl（显然我们的工作环境中有两个 perl 版本，位于完全不同的位置，我不知道）。

为什么旧版本会以这种方式运行仍然有点神秘，但我想解决这个问题的方法似乎是升级到新版本（如另一篇文章中所指出的那样）。

无论如何，我不太确定交叉发布有多好，所以如果我的主题由于被发布在两个地方而感到多余，我深表歉意，我最初的动机是我会得到足够不同的回应。

# jquery - jQuery 事件只执行一次 (Primefaces 3.2, JSF 2.2)

> ID：10894413
> 
> 赞同：1
> 
> 时间：2012-06-05T09:02:08.503
> 
> 标签：jquery, jsf, primefaces, datatable, toggle

我们正在使用 primefaces，jsf。

我有以下数据表：

```
<p:dataTable var="dataRow"
                first="#{wirkungsgradeEditBean.firstRowIndex}"
                value="#{wirkungsgradeEditBean.wirkgradList}" editable="true"
                id="table" paginator="true"
                rows="#{wirkungsgradeEditBean.rowsPerPage}"
                paginatorTemplate="{CurrentPageReport}  {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                rowsPerPageTemplate="15,25,35">
                <p:column headerText="#{msg.table_wirkungsgrade_wirk4}">
                    <p:cellEditor>
                        <f:facet name="output">
                            <h:outputText value="#{dataRow.wirk4}" />
                        </f:facet>
                        <f:facet name="input">
                            <p:inputText value="#{dataRow.wirk4}" required="true" />
                        </f:facet>
                    </p:cellEditor>
                </p:column>
                <p:column headerText="#{msg.column_head_edit}">
                    <p:rowEditor />
                    <p:commandButton icon="ui-icon-close"
                        rendered="#{wirkungsgradeEditBean.renderDeleteButton}"
                        styleClass="rainstar-button-small-edit"
                        action="#{wirkungsgradeEditBean.btn_deleteEntryClick()}"
                        update=":form:table" widgetVar="delBut" >
                        <f:setPropertyActionListener value="#{dataRow}"
                            target="#{wirkungsgradeEditBean.selectedWirkgrad}" />
                    </p:commandButton>
                </p:column>
                <p:ajax event="rowEdit"
                    listener="#{wirkungsgradeEditBean.btn_editEntryClick}"
                    update=":form:table" />
                <p:ajax event="rowSelect"
                    listener="#{wirkungsgradeEditBean.selectRo()}"
                    update=":form:table" />
            </p:dataTable> 
```

现在我想在按下编辑按钮（铅笔符号）时切换删除按钮。我使用以下 jquery 构造来做到这一点：

```
$(document).ready(function(){
        $("span.ui-row-editor span").click(function(){
            $(this).parent().parent().children("button").toggle();
        });
    }); 
```

如果我第一次尝试这个，一切都很好。但如果我再试一次，切换不会发生。

怎么了？！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T09:12:07.100

当您单击编辑按钮时，会进行部分更新，重新创建表并且您的处理程序会丢失。通过 JSF 控制删除按钮更安全，只需`wirkungsgradeEditBean.renderDeleteButton`在编辑时进行相应的更新。

编辑：另一种选择是使用功能：

```
$(document).on("click", "span.ui-row-editor span", function(){
  $(this).parent().parent().children("button").toggle();
}); 
```

您可以将其微调为更本地化的内容而不是文档，但不受部分更新的影响。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T09:07:08.663

代替

```
 $(this).parent().parent().children("button").toggle(); 
```

您可以使用

```
 $(this).parent().siblings("button").toggle(); 
```

# facebook-graph-api - 获取状态消息的隐私设置？

> ID：10894414
> 
> 赞同：1
> 
> 时间：2012-06-05T09:02:13.863
> 
> 标签：facebook-graph-api, status, privacy

有谁知道是否可以查询状态更新的隐私设置？我知道您可以将它们用于相册，但对于我的应用程序来说，能够从不久前提取一条随机状态消息并说“您与所有人分享了这篇文章，您今天还会这样做吗？”将会很有用。看看人们对在线分享的态度如何变化。

我不追求任何花哨的东西，只是“朋友”、“公众”或“定制”会很棒。

干杯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T10:04:51.193

如果是用户自己的状态更新（即使用您的应用程序的人），这很容易获得，`privacy`Post 对象上有一个字段，我的 /feed 连接中的示例是：

```
 "privacy": {
        "description": "Friends; Except: Restricted", 
        "value": "CUSTOM", 
        "friends": "ALL_FRIENDS", 
        "deny": "< ID of my restricted list >"
} 
```

如果它在当前用户的朋友的墙上，我不确定是否/如何检索相同的数据

# javascript - 想通过jquery拖一个div

> ID：10894418
> 
> 赞同：1
> 
> 时间：2012-06-05T09:02:25.713
> 
> 标签：javascript, jquery, jquery-ui, drag-and-drop

我正在尝试使用 jquery UI 可拖动选项`handle`，但不工作，我试过：

```
 $("div").draggable( { handle : $("#buttonid") }) 
```

谁能告诉我这个问题？

**编辑**

手柄实际上并没有作为手柄工作，意味着我想拖动`handle`到拖动 div，但它不起作用？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-05T09:04:50.820

```
$("div").draggable( { 
         handle : "#buttonid"  // you need not to wrap with $()
       }); 
```

* * *

### 根据您的编辑

> 我没有测试过这个。作为 Button 的默认`event-handler`设置 `mousedown`。您可能想 在处理程序`event.preventDefault()`内部尝试使用，或者用or`mousedown`包装该按钮并将其或 作为处理程序，但我认为它们都不起作用。`span``div``div``span`

更多看**[这里](https://stackoverflow.com/questions/6875063/draggable-button-using-jquery)**

# windows - 用于运行 R 代码的 CMD 批处理文件。如何选择不同版本的 R？

> ID：10894422
> 
> 赞同：2
> 
> 时间：2012-06-05T09:02:46.817
> 
> 标签：windows, r

我有一段我想定期运行的 R 代码。所以我使用 CMD 批处理文件来运行它。该命令类似于：

R CMD BATCH --vanilla --slave "/mylocalDir/myRcode.r"

我的 Windows 中安装了不同版本的 R。安装了某些版本的某些特定软件包仅适用于该版本。因此我需要在 CMD 命令中指定需要运行哪个版本的 RI。我只是想知道如何指定。或者我可以设置一个默认的 R 版本吗？

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-05T09:39:14.427

我使用 Windows 任务计划程序解决了运行计划的批处理作业。

您最新安装的 R 版本是默认设置。如果您想运行特定版本，请在您的通话中明确调用它，例如

```
"C:\Program Files\R\R-2.14.0\bin\x64\R.exe" CMD BATCH --vanilla --slave "windows not linux path :P.R" 
```

# java - 加载自定义字体的问题

> ID：10894426
> 
> 赞同：2
> 
> 时间：2012-06-05T09:03:01.087
> 
> 标签：java, fonts, stream, embedded-resource, ioexception

我正在尝试在 slick2d 中加载字体，该字体（在 Eclipse 中）位于：`"resources\fonts\slkscr.ttf"`使用以下代码：

```
private void loadResources()  {
    try  {
        Font fontRaw = Font.createFont(Font.TRUETYPE_FONT, 
            new BufferedInputStream(Game.class.getClassLoader().
                getResourceAsStream("resources/fonts/slkscr.ttf")));
        Font fontBase = fontRaw.deriveFont(Font.PLAIN, 20);

        this.font = new TrueTypeFont(fontBase, false);
    } catch (IOException e)  {
        e.printStackTrace();
    } catch (FontFormatException e) {
        e.printStackTrace();
    }
} 
```

堆栈跟踪打印：

```
java.io.IOException: Stream closed 
    at java.io.BufferedInputStream.getInIfOpen(BufferedInputStream.java:151) 
    at java.io.BufferedInputStream.read1(BufferedInputStream.java:273) 
    at java.io.BufferedInputStream.read(BufferedInputStream.java:334) 
    at java.io.FilterInputStream.read(FilterInputStream.java:107) 
    at java.awt.Font.createFont(Font.java:885) 
    at org.darestium.applications.games.game.EditorState.loadResources(EditorState.java:43) 
    at org.darestium.applications.games.game.EditorState.init(EditorState.java:61) 
    at org.darestium.applications.games.game.Game.initStatesList(Game.java:36) 
    at org.newdawn.slick.state.StateBasedGame.init(StateBasedGame.java:164) 
    at org.newdawn.slick.AppGameContainer.setup(AppGameContainer.java:390) 
    at org.newdawn.slick.AppGameContainer.start(AppGameContainer.java:314) 
    at org.darestium.applications.games.game.Game.main(Game.java:31) java.io.IOException: Stream closed 
    at java.io.BufferedInputStream.getInIfOpen(BufferedInputStream.java:151) 
    at java.io.BufferedInputStream.read1(BufferedInputStream.java:273) 
    at java.io.BufferedInputStream.read(BufferedInputStream.java:334) 
    at java.io.FilterInputStream.read(FilterInputStream.java:107) 
    at java.awt.Font.createFont(Font.java:885) 
    at org.darestium.applications.games.game.EditorState.loadResources(EditorState.java:43) 
    at org.darestium.applications.games.game.EditorState.init(EditorState.java:61) 
    at org.newdawn.slick.state.StateBasedGame.init(StateBasedGame.java:171) 
    at org.newdawn.slick.AppGameContainer.setup(AppGameContainer.java:390) 
    at org.newdawn.slick.AppGameContainer.start(AppGameContainer.java:314) 
    at org.darestium.applications.games.game.Game.main(Game.java:31) 
Mon Jun 04 18:36:32 EST 2012 ERROR:null 
```

关于如何防止字体不加载的任何想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-05T10:17:23.513

```
private void loadResources() throws FontFormatException, IOException  {
        Font fontRaw = Font.createFont(Font.TRUETYPE_FONT, new File("resources/fonts/slkscr.ttf"));
        Font fontBase = fontRaw.deriveFont(28f);
        this.font = new TrueTypeFont(fontBase, false);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-05T09:16:41.600

放置一个前导斜杠表示从类路径的根目录开始搜索，vis。

```
..getResourceAsStream("/resources/fonts/slkscr.ttf").. 
```

* * *

作为旁白。该`stream closed`消息可能告诉我们`createFont`需要一个可重新定位的`InputStream`. 请尝试：

```
getResource("/resources/fonts/slkscr.ttf") 
```

..或者..

```
getResource("/slkscr.ttf") 
```

...取决于路径。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-08T11:09:48.410

你加载的字体都错了，你应该看看这里的例子[Slick Wiki - True Type Fonts](http://slick.cokeandcode.com/wiki/doku.php?id=truetype_font_support)

# sorting - 对子列表序言进行排序

> ID：10894428
> 
> 赞同：1
> 
> 时间：2012-06-05T09:03:09.987
> 
> 标签：sorting, prolog, sublist

我在 Prolog 中有这个列表：

[[13,Audi A3,11.11.2011,75000,berlina,audi,12100,verde pisello,[4wd],3.0000133333333334],[11,santafe,11.11.2011,80000,fuoristrada,audi,2232232,verde pisello,[ Metalizzata,Sedile in Pelle,4wd],7.0000125]]|

我想将此列表排序为子列表的最后一个值，例如我想得到这个结果：

[[11,santafe,11.11.2011,80000,fuoristrada,audi,2232232,verde pisello,[Metalizzata,Sedile in Pelle,4wd], *7.0000125* ],[13,Audi A3,11.11.2011,75000,berlina,audi, 12100,verde pisello,[4wd], *3.0000133333333334* ]]

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T10:35:55.470

[predsort](http://www.swi-prolog.org/pldoc/doc_for?object=predsort/3)它是你的朋友。那么排序很容易，但卖一辆奥迪`verde pisello`仍然非常非常困难......

```
sort_on_last(List, Sorted) :-
    predsort(compare_last, List, Sorted).

compare_last(R, X, Y) :-
    last(X, Xl),
    last(Y, Yl),
    compare(R, Xl, Yl). 
```

尝试一下：

```
test :- sort_on_last(
        [[11,santafe,'11.11.2011',80000,fuoristrada,audi,2232232,'verde pisello',['Metalizzata','Sedile in Pelle','4wd'],7.0000125],
         [13,'Audi A3','11.11.2011',75000,berlina,audi,12100,'verde pisello',['4wd'],3.0000133333333334]
        ], S),
    maplist(writeln, S).
?- test.
[13,Audi A3,11.11.2011,75000,berlina,audi,12100,verde pisello,[4wd],3.0000133333333334]
[11,santafe,11.11.2011,80000,fuoristrada,audi,2232232,verde pisello,[Metalizzata,Sedile in Pelle,4wd],7.0000125]
true. 
```

predsort/3 的特殊性：它充当 sort/2，从而**删除**重复项。为了避免这个问题， compare_last/3 可以改变，避免 return **=**，这样：

```
compare_last(R, X, Y) :-
    last(X, Xl),
    last(Y, Yl),
    ( Xl < Yl -> R = (<) ; R = (>) ). 
```

# r - 向量化获取位置的函数

> ID：10894430
> 
> 赞同：1
> 
> 时间：2012-06-05T09:03:21.497
> 
> 标签：r, vectorization, data.table

我有两个数据框 (`db1`和`db2`)，我想在`db2`匹配的一些参数中获取位置`db1`。这可以使用`for`如下循环来实现：

```
db1 <- data.frame(id=rep(1:4,each=4),
                  class=sample(1:10, 16, replace=TRUE),
                  var=rnorm(16)
                  )
db2 <- expand.grid(id=1:4, class=1:10)
db2$x <- rnorm(nrow(db2))

for(i in 1:nrow(db1)) print(which(db2$id==db1$id[i] & db2$class==db1$class[i])) 
```

但是循环效率很低，所以我想对这个循环进行矢量化。可以将向量传递给`which()`函数，以便该函数在 db2 中搜索 db1 中的每个值？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-05T14:39:41.920

```
library(data.table)
db1 <- data.table(db1)
db2 <- data.table(db2)
# You can index by additional columns as necessary
setkeyv(db1, c("id","class"))
setkeyv(db2, c("id","class"))

# Show only records in db2 that match id and class with db1

db2[db1,]

      id class           x         var
 [1,]  1     1 -0.50266835  0.82391749
 [2,]  1     9 -1.21245991 -1.43163848
 [3,]  1     9 -1.21245991 -0.68622189
 [4,]  1    10 -0.28659235 -0.98107793
 [5,]  2     4  2.18779836  1.25841256
 [6,]  2     6  1.32407301  0.42287395
 [7,]  2     7 -0.53808409 -0.12069089
 [8,]  2    10 -0.67679146 -0.73930821
 [9,]  3     7  0.03133591  0.31142901
[10,]  3     8  0.78927215  1.86952233
[11,]  3     9 -0.04674115 -0.45102021
[12,]  3    10 -0.83388764 -0.04354332
[13,]  4     8  1.17608109 -0.07343352
[14,]  4     8  1.17608109 -0.00053299
[15,]  4     9  0.59344187 -0.21407897
[16,]  4    10 -2.06237055  0.78420146

# To just return an index of matching rows
db2[db1, which=T]

 [1]  1  9  9 10 14 16 17 20 27 28 29 30 38 38 39 40

# To get only unique row indices
> db2[unique(db1),which=T]
[1]  1  9 10 14 16 17 20 27 28 29 30 38 39 40 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T11:30:02.763

如果 db1 和 db2 具有相同的行数，则打印 db2 和 db1 'id, class' 相等的所有 db2 行：

```
print(db2[db2$id == db1$id & db2$class == db1$class,]) 
```

按 db2$id 排序的相同查询：

```
print(db2[order(db2[db2$id == db1$id & db2$class == db1$class,]$id, decreasing = TRUE)) 
```

# c++ - 在 Visual Studio 中为单个文件设置 /showincludes 属性

> ID：10894432
> 
> 赞同：1
> 
> 时间：2012-06-05T09:03:26.463
> 
> 标签：c++, visual-studio, dependencies, header-files

我想找出项目中单个文件的头文件依赖项。我发现 /showincludes 属性可以做到这一点。但我只想为单个文件启用它。可能吗 ？

# jsf-2 - PF 根据日历更新 TextInput

> ID：10894433
> 
> 赞同：0
> 
> 时间：2012-06-05T09:03:27.627
> 
> 标签：jsf-2, primefaces

我从用户那里得到一个开始日期和一个结束日期，然后根据这些值计算工作日。这些是我的组件：

```
<h:outputText  value="Starting Date: "/>
<p:calendar  pattern="dd/MM/yyyy" value="#{aView.holidays.startingDate}">
   <p:ajax event="blur" listener="#{aView.count}" update="count"/>
</p:calendar>
<h:outputText value="End Date: "/>
<p:calendar pattern="dd/MM/yyyy" value="#{aView.holidays.endDate}">
   <p:ajax event="blur" listener="#{aView.count}" update="count"/>
</p:calendar>
<h:outputText  value="Count of Days: "/>
<p:inputText id="count" value="#{aView.holidays.count}"/> 
```

但它不会更新计数。上面的代码有什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T09:08:31.440

您必须定义执行 ajax 侦听器的事件！

所以使用

```
<p:ajax event="dateSelect" listener="#{aView.count}" update="count"/> 
```

代替

```
<p:ajax listener="#{aView.count}" update="count"/> 
```

# hibernate - 休眠 4：没有 EntityMode.DOM4J？没有 dom4j 导出？

> ID：10894437
> 
> 赞同：1
> 
> 时间：2012-06-05T09:03:48.307
> 
> 标签：hibernate, dom4j

使用休眠 3，我能够使用与 EntityMode.DOM4J 的会话导出 xml 数据：

```
Session session = sessionFactory.getCurrentSession();
org.hibernate.Session dom4jSession = session.getSession(EntityMode.DOM4J);
... 
```

今天我尝试了hibernate 4。包org.hibernate.classic是空的，EntityMode中没有DOM4J了。我还尝试将属性“hibernate.default_entity_mode”设置为“dom4j”，但这指的是与上面相同的错误（原因：java.lang.IllegalArgumentException：没有枚举常量类 org.hibernate.EntityMode.DOM4J）。

是否仍然可以在休眠 4 中使用 dom4j xml 序列化？还是我错过了其他东西？

谢谢你

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T07:59:22.687

> That feature was always experimental and has been removed. I would like to get back to allowing such a thing, but it will more be allowing "marshallers" to be passed in. If you feel like working on that, contact the dev team on the hibernate-dev mailing list.

this feature was removed in hibernate 4\. sadly, the documentation of hibernate 4 still describes this feature the way it was in hibernate 4.

is there an other way to have jpa and xml export/import without using additional jaxb annotations? maybe eclipselink has such a feature?

# android - 如何以编程方式触发 Onclick 事件？

> ID：10894440
> 
> 赞同：25
> 
> 时间：2012-06-05T09:04:16.303
> 
> 标签：android, onclicklistener

我有一个带有 2 个线性布局的自定义视图：第一个是视图的标题，第二个是详细信息视图。

在自定义视图中，标头 Linearlayout 的 OnClickListener 已经定义：当它触发时，它会折叠/展开第二个线性布局。

我想要做的是为我的标题的 OnClickListener 事件添加更多功能（即：折叠/展开第二个布局并显示 Toast）。

我无法修改自定义视图的源代码。我试图设置一个新的 OnClickListener，但它隐藏了初始事件（折叠/展开）。

我应该如何实现这个？

我的自定义视图的源代码：

```
public class ExpandoLayout extends ViewGroup
{
    /* some declarations */
    private Linearlayout header;
    private linearlayout footer;

    /* some code */
    @override
    protected void onFinishInflate() {
    header= new LinearLayout(context);
    header.setOnClickListener(new OnClickListener() {
            @Override
            public void onClick(View v) {
                toggleExpand();
            }
        });
    }
} 
```

我想要做的是向我的活动中已经定义的 OnClickListener 事件添加一些代码。像这样的东西：

```
public class myActivity extends Activity {
private Linearlayout myCustomView;
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.rsdetail);
    myCustomView= (MyCustomView) findViewById(R.id.expanded);

    myCustomView.getChildAt(0).setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {
            if(v instanceof LinearLayout)
            {
                v.performClick();

                Toast.makeText(getActivity(), "ExpandoOnClickListener", 2000).show();
            }
        }
    });
} 
```

* * *

## 回答 #1

> 赞同：86
> 
> 时间：2012-06-05T09:15:51.373

您可以以编程方式在 View 上引发 click 事件来调用它`OnClickListener`，如下所示：

```
view.performClick(); 
```

现在，如果您在第一个布局的*OnClickListener*下的第二个布局上调用它，那么我希望它会发挥作用

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-06-05T10:12:24.707

简单的解决方案是获取原始 OnClickListener，然后在新的 OnClickListener 中触发它：

```
final OnClickListener preDefinedListener = myCustomView.getChildAt(0).getOnClickListner();

myCustomView.getChildAt(0).setOnClickListener(new OnClickListener() {
    @Override
    public void onClick(View v) {
        if(v instanceof LinearLayout)
        {
            preDefinedListener.onClick(v); // calls default (defined by MyCustomView)

            Toast.makeText(getActivity(), "ExpandoOnClickListener", 2000).show();
        }
    }
}); 
```

可悲的是，`View`没有`getOnClickListner()`，但我想你可以使用[反射](http://java.sun.com/developer/technicalArticles/ALT/Reflection/)来获得它。它存储在[字段](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/reflect/Field.html) `mOnClickListener`（[源](http://www.netmite.com/android/mydroid/frameworks/base/core/java/android/view/View.java)）中。

这是您可以`OnClickListener`为您的布局定义的方式：

```
OnClickListener tmpOnClickListener = null;
try {
    Class<View> cls = (Class<View>) Class.forName("android.view.View");
    Field fld = cls.getDeclaredField("mOnClickListener");
    fld.setAccessible(true); // because it is protected

    tmpOnClickListener = (OnClickListener) fld.get(myCustomView.getChildAt(0));

    fld.setAccessible(false); // restore it's original property
} catch (SecurityException e) {
    e.printStackTrace();
} catch (NoSuchFieldException e) {
    e.printStackTrace();
} catch (IllegalArgumentException e) {
    e.printStackTrace();
} catch (IllegalAccessException e) {
    e.printStackTrace();
} catch (ClassNotFoundException e) {
    e.printStackTrace();
} 

final OnClickListener preDefinedListener = tmpOnClickListener;

if (preDefinedListener != null) {
    myCustomView.getChildAt(0).setOnClickListener(new OnClickListener() {
        @Override
        public void onClick(View paramView) {
            preDefinedListener.onClick(paramView);

            Toast.makeText(getActivity(), "ExpandoOnClickListener", Toast.LENGTH_LONG).show();
        }
}); 
```

我并没有真正费心正确处理所有异常，但这足以理解这个想法。它可能看起来很乱，但实际上只需 5 行新代码即可解决您的问题。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2015-09-02T11:28:32.580

从 SDK 15 开始，您只需调用方法：

```
view.callOnClick() 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-05T09:25:44.437

如果您无法修改 CustomView 的代码，那么您有以下选项。

*   扩展自定义视图。
*   覆盖 onClick() 方法并将其作为侦听器绑定到第一个布局。
*   在 onClick() 首先调用 super.onClick() 然后在下面添加你的附加功能。

这样，您就可以保留现有代码并添加其他功能。

# php - array_filter 基于来自另一个数组的键

> ID：10894443
> 
> 赞同：3
> 
> 时间：2012-06-05T09:04:25.630
> 
> 标签：php, arrays

我有两个数组：

`$arr1 = array('a' => 10, 'b' => 20);`

`$arr2 = array('a' => 10, 'b' => 20, 'c' => 30);`

如何使用 array_filter 删除`$arr2`不存在的元素`$arr1`？就像我的例子中的“c”......

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-05T09:09:55.840

有一个专门为此目的制作的函数：[array_intersect()](http://php.net/manual/en/function.array-intersect.php)：

> **array_intersect** — 计算数组的交集

```
$arr2 = array_intersect($arr1, $arr2); 
```

* * *

如果要比较键，而不是像[array_intersect()](http://php.net/manual/en/function.array-intersect.php)这样的值，请使用[array_intersect_key()](http://www.php.net/manual/en/function.array-intersect-key.php)：

> **array_intersect_key** — 使用键计算数组的交集以进行比较

```
$arr2 = array_intersect_key($arr1, $arr2); 
```

* * *

如果要比较`key=>value`对，请使用[array_intersect_assoc()](http://www.php.net/manual/en/function.array-intersect-assoc.php)：

> **array_intersect_assoc** — 计算带有附加索引检查的数组的交集

```
$arr2 = array_intersect_assoc($arr1, $arr2); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-05T09:05:58.757

在你的 array_filter 回调中使用[in_array ：](http://php.net/in_array)

```
$arr2 = array_filter($arr2, function($e) use ($arr1) {
    return in_array($e, $arr1);
  }); 
```

请注意，这将考虑元素的*值*，而不是键。array_filter 不会给你任何工作的关键，所以如果这是你需要的，一个常规的[foreach](http://php.net/foreach)循环可能更适合。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-05T09:14:05.767

要基于键与数组相交：

```
array_intersect_key($arr1, $arr2); 
```

**更新**

不幸的是，没有`array_filter`基于数组键相交的解决方案:(

# android - 如何销毁android中的图像按钮？

> ID：10894445
> 
> 赞同：0
> 
> 时间：2012-06-05T09:04:33.380
> 
> 标签：android, layout, timer, imageview, collision

我有一个简单的游戏..有雪向下移动，底部布局有一只企鹅..我们必须保护企鹅免受落雪

我想问你当我们点击它时我们如何破坏图像视图（雪景图片）？我设置：

```
 lebah2.setVisibility(View.GONE); 
```

但它只是隐藏了..因为我创建了一个计时器来检查碰撞..当雪地与企鹅碰撞时，生命是减一..如果我输入这段代码，计时器将永远减少生命..

```
for(int awal = 1 ; awal<=akhir; awal++)
                                    {
                                        ImageView lebah2 = (ImageView) findViewById(awal);
                                        int atas = lebah2.getTop();
                                        int left = lebah2.getLeft();
                                        if(atas >=180)
                                        {
                                            if(left >180 && left <240)
                                            {
                                                data.live--;
                                                 TextView nyawa = (TextView) findViewById(R.id.live);
                                                 nyawa.setText(String.valueOf(data.live));
                                                 lebah2.setVisibility(View.GONE);
                                            }
                                        } 
```

我必须做什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T09:14:18.433

您可以像这样删除视图：

```
((LinearLayout)lebah2.getParent()).removeView(lebah2); 
```

如果视图不可见，您也可以跳过循环：

```
if(iv.getVisibility() == View.VISIBLE) {
   for(int awal = 1 ; awal<=akhir; awal++) {
      //Check if collision
   }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T09:14:56.010

当您将可见性设置为 GONE 时，视图不会被移除。例如，如果您为父级获取所有子级，则视图将被计算在内。

用这个：

```
 ImageView lebah2 = (ImageView) findViewById(R.id.lebah2);

((RelativeLayout)lebah2.getParent()).removeView(lebah2); 
```

# jquery - jQuery 发送 2 个 ntlm 协商请求？

> ID：10894453
> 
> 赞同：1
> 
> 时间：2012-06-05T09:05:02.643
> 
> 标签：jquery, http, .net-4.0, fiddler, ntlm

我正在使用 jQuery ajax 调用返回 json 对象的 Ashx 处理程序。

我的 IIS 服务器配置为使用 NTLM（Windows 身份验证）。

但是，对于每个请求（我称之为**1 time**） -日志中**有超过**1 个请求。

[http://i.stack.imgur.com/Bf2ps.jpg](https://i.stack.imgur.com/Bf2ps.jpg) ![在此处输入图像描述](../Images/dc5de59b4240ae3d2fef7d65627f9d70.png)

![在此处输入图像描述](../Images/e41b3f41e7fb3e15ed43df9311a428a1.png)

![在此处输入图像描述](../Images/35761838a591bd3332d1455dfcfd415e.png)

![在此处输入图像描述](../Images/d383d31d55fcc1e446d4f9b997b06e05.png)

问题 ：

如何将其转换为 **单个**请求/响应？

# windows-xp - 是否可以更改 Windows XP“跳转列表”

> ID：10894459
> 
> 赞同：0
> 
> 时间：2012-06-05T09:05:24.063
> 
> 标签：windows-xp, contextmenu, jump-list

我想更改附加到任务栏的任何应用程序的上下文菜单（应该与单击左侧的文件夹图标相同，例如[this](http://img.photobucket.com/albums/v34/TulsaRose/Help%20Tips/Max-1.jpg)）

对于 Windows XP，有什么方法可以做到这一点吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T15:50:01.400

如果我理解你的问题，你需要系统范围的钩子来处理 WM_SYSCOMMAND 消息来修改系统菜单。请参阅 c# 中的类似问题。 [修改全局系统菜单](https://stackoverflow.com/questions/1943965/modifying-global-system-menus)

# c++ - 什么是流？和标准的东西和它们的用法。

> ID：10894460
> 
> 赞同：1
> 
> 时间：2012-06-05T09:05:29.580
> 
> 标签：c++, c

我经常看到人们使用术语流，但我从来不明白它的确切含义。标准是什么意思？只是意味着从终端输入和输出到终端？标准错误怎么样？我们什么时候需要使用它，它有什么作用？

其次，我们可以创建自己的流吗？为什么我们需要创建它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T09:12:15.383

在[类型论中](http://en.wikipedia.org/wiki/Stream_%28type_theory%29)，流只是一个无限的数据列表。

但是，在[C 或 C++](http://en.wikipedia.org/wiki/Stream_%28computing%29)中，它通常被认为是无限源或无限汇。当然，在大多数情况下，无限实际上是一个谎言，但它是一个有用的抽象，因为它强调了大小是未知的。

我认为条款`source`和`sink`更有用。你可以想`stderr`一个角色的水槽。从程序的角度来看，它毕竟只是消耗字符而没有任何明显效果的东西。

您当然可以创建流（源或接收器或同时创建两者）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-05T09:09:29.503

**我经常看到人们使用流这个词，但我从来不明白它的确切含义**

C++ 提供以下类来执行文件的字符输出和输入：

```
ofstream: Stream class to write on files
ifstream: Stream class to read from files
fstream : Stream class to both read and write from/to files. 
```

我总是将流视为我们可以对文件执行操作的文件句柄。

**标准是什么意思？**

> 在 C++ 中，C++ 标准库是类和函数的集合。
> 
> C++ 标准库为诸如求数的平方根之类的任务提供了几个日常函数。
> 
> C++ 标准库的特性在 std.int 命名空间中声明。

**标准错误怎么样？**

标准错误流是错误消息和其他诊断警告的默认目的地。与标准输出一样，它通常也被定向到标准控制台的输出设备。

也可以使用 freopen 函数将 stderr 从程序中重定向到其他目的地。

**其次，我们可以创建自己的流吗？为什么我们需要创建它？**

[这](http://faculty.cs.niu.edu/~mcmahon/CS241/Notes/extraction.html)将指导您

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-05T09:09:30.670

流是派生自[std::ios_base](http://www.cplusplus.com/reference/iostream/ios_base/)的类。与随机访问相比，它们一个接一个地呈现元素。您可以通过调用适当的构造函数来创建一个。如果您想实现自己的流，请从 ios_base 派生并相应地实现所有方法。

# jsf - h:outputLink 导航有时不起作用

> ID：10894466
> 
> 赞同：1
> 
> 时间：2012-06-05T09:06:10.880
> 
> 标签：jsf, jsf-2, richfaces, seam2

我有一个从一个页面到另一个页面的导航定义，就像这样。

```
<h:outputLink id="idLink"  value="Page1.seam" >
    <f:param name="m" value="n103" />
    <f:param name="mss" value="110" />
<h:outputText value="Return to Page 1" />
<a4j:support event="onclick" action="#{beanName.action}" limitToList="true" ignoreDupResponses="true" eventsQueue="que" ajaxSingle="true" immediate="true">
</a4j:support>
</h:outputLink> 
```

问题是有时视图不会更改为 Page1.seam 并保留在 Page2.seam 中。有谁知道的更好吗？帮助将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-05T12:35:20.720

这种结构毫无意义。使其成为普通链接

```
<h:outputLink value="Page1.seam">
    <f:param name="m" value="n103" />
    <f:param name="mss" value="110" />
    <h:outputText value="Return to Page 1" />
</h:outputLink> 
```

并在打开页面时调用操作，`<f:event type="preRenderView">`请改为在目标视图中使用。

```
<f:event type="preRenderView" listener="#{beanName.action}" /> 
```

### 也可以看看：

*   [如何使用 f:viewParam 对 GET 请求执行操作？](https://stackoverflow.com/questions/5647679/how-to-execute-action-on-get-request-with-fviewparam)
*   [<f:metadata>、<f:viewParam> 和 <f:viewAction> 可以用来做什么？](https://stackoverflow.com/questions/6377798/what-can-fmetadata-and-fviewparam-be-used-for)

# css - 是否可以垂直拉伸纯文本行以仅使用 CSS 来适应 div 高度？

> ID：10894472
> 
> 赞同：0
> 
> 时间：2012-06-05T09:06:31.790
> 
> 标签：css

我希望 div 中的纯文本行垂直均匀拉伸以填充 div 高度，而不使用，`line-height`因为我不知道会有多少行

它可以用 jQuery 来完成，但是用纯 CSS 可以吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T09:11:00.710

不，这是不可能的。

line-height % 适用于字体大小，而不适用于外部高度。而且您甚至没有固定行数

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T09:11:30.357

您可以使用边框执行此操作，但不确定这是否是您要查找的内容。演示：http: [//jsfiddle.net/EChzQ/](http://jsfiddle.net/EChzQ/)

```
<div>
    <span>&nbsp;</span>
</div>

div{
    height: 500px;
    border: 1px solid #000
}
div span{
    width: 20px;
    height: 100%;
    display: inline-block;
    border-right: 1px solid #f00
} 
```

# iphone - 将 Twitter.framework 添加到 iPhone 上的 Theos

> ID：10894475
> 
> 赞同：3
> 
> 时间：2012-06-05T09:06:59.180
> 
> 标签：iphone, ios, twitter, widget, jailbreak

我正在`Theos`我的 iPhone 上开发一个通知中心小部件。

在`makefile`我添加了“Twitter”框架并在我的项目中添加了`<Twitter/Twitter.h>`.

当我编译小部件时，我得到一个“ `Twitter/Twitter.h no such file or directory.`”。

如何添加此框架？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T07:53:14.210

##编译 -------------你的------ ----------- your_FILES = your/xxx.m

##连接----------------框架------ -------- your_FRAMEWORKS = UIKit QuartzCore Foundation CoreFoundation CoreGraphics MobileCoreServices

your_FRAMEWORKS = SystemConfiguration CFNetwork

## 连接----------------dylib------ ------------

your_LDFLAGS = -lxml2 -lz -licucore

# android - 在 xml 中定义 autoLink 属性时出现锚链接问题

> ID：10894476
> 
> 赞同：0
> 
> 时间：2012-06-05T09:06:59.897
> 
> 标签：android, html, anchor

我已经为 textview 设置了 android:autoLink="all" 但是当我尝试将一些锚链接合并到该文本视图中时，锚链接不会显示为链接。任何人都可以帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T09:12:09.800

我想你正在寻找这个[http://xjaphx.wordpress.com/2011/09/12/auto-link-for-textview/](http://xjaphx.wordpress.com/2011/09/12/auto-link-for-textview/)

```
 textview.setText("any data");
 Linkify.addLinks(textview, Linkify.ALL); 
```

见[http://developer.android.com/reference/android/text/util/Linkify.html](http://developer.android.com/reference/android/text/util/Linkify.html)

更新：

```
String urlink = "http://www.google.com";
String link = "<a href="+urlink+ ">link</a>"; 

TextView tv = (TextView) findViewById(R.id.textview);

tv.setText(link);
Linkify.addLinks(tv, Linkify.ALL); 
```

最新的：

```
String googleLink = "http://www.google.com ";
String clickLink = "click here";
Spannable mSpannableString= new SpannableString(googleLink+clickLink);
mSpannableString.setSpan(new URLSpan("http://www.google.com"), 0, googleLink.length(), 0); 
mSpannableString.setSpan(new URLSpan("http://www.example.com"), googleLink.length(), clickLink.length(), 0); 

TextView tv = (TextView) findViewById(R.id.textview);
tv.setMovementMethod(LinkMovementMethod.getInstance());  
tv.setText(mSpannableString) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T09:15:47.410

对于使用下面的代码片段`Linkify`的文本`TextView`

```
TextView tv = (TextView)v.findViewById(R.id.text4);
Linkify.addLinks(tv, Linkify.PHONE_NUMBERS | Linkify.EMAIL_ADDRESSES | Linkify.WEB_URLS); 
```

编辑：

```
TextView tv= (TextView)findViewById(R.id.textview1);
    String urlink = "google.com";
    String link = "<a href=\""+urlink + "\">link</a>";
    tv.setText(Html.fromHtml(link));
    Linkify.addLinks(tv, Linkify.PHONE_NUMBERS | Linkify.EMAIL_ADDRESSES | Linkify.WEB_URLS); 
```

# ipad - 我的应用程序正在 iPad 上进行测试，尽管它是为 iPhone 开发的

> ID：10894479
> 
> 赞同：0
> 
> 时间：2012-06-05T09:07:04.157
> 
> 标签：ipad, ios5, crash, crash-reports

我的应用程序被拒绝，但我不知道确切的问题是什么。

拒绝原因是：

> 我们发现您的应用在运行 iOS 5.1.1 的第三代 iPad 上崩溃，这不符合 App Store 审查指南。
> 
> 当我们从表格视图中选择一个项目时，您的应用程序在 Wi-Fi 和蜂窝网络上都崩溃了。

但是我只提交了我的 iPhone 申请。最重要的是，我无法弄清楚崩溃文件中有什么问题，也无法调试，因为我在 iPhone 上对其进行了测试，并且没有任何错误或崩溃。

任何帮助或提示将不胜感激，因为我完全迷失在这一点上。百万提前感谢。

您可以在下面找到崩溃报告。

```
Incident Identifier: 5E4A2B4C-EC76-441B-82A2-3782F53B533B
CrashReporter Key:   5ee8aa21dffe8c0b7f3386a5290b271457c404c8
Hardware Model:      iPad3,3
Process:         *****
Path:            *****
Identifier:      *****
Version:         ??? (???)
Code Type:       ARM (Native)
Parent Process:  launchd [1]

Date/Time:       2012-06-04 18:44:59.930 -0700
OS Version:      iPhone OS 5.1.1 (9B206)
Report Version:  104

Exception Type:  EXC_CRASH (SIGABRT)
Exception Codes: 0x00000000, 0x00000000
Crashed Thread:  0

Application Specific Information:
*** Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: 
'Application tried to present a nil modal view controller on target <ViewController: 
0x176f80>.'
*** First throw call stack:
(0x3309e88f 0x35043259 0x35687441 00x356e26a7 0x84d9f 0x3565793d 0x356d1627 0x3777d933 
0x33072a33 0x33072699 0x3307126f 0x32ff44a5 0x32ff436d 0x33141439 0x355d3cd5 0x83f03 
0x83ec4)

Last Exception Backtrace:
(0x3309e88f 0x35043259 0x35687441 0x356e26a7 0x84d9f 0x3565793d 0x356d1627 0x3777d933 
0x33072a33 0x33072699 0x3307126f 0x32ff44a5 0x32ff436d 0x33141439 0x355d3cd5 0x83f03 
0x83ec4)

Thread 0 name:  Dispatch queue: com.apple.main-thread
Thread 0 Crashed:
0   libsystem_kernel.dylib          0x3557532c __pthread_kill + 8
1   libsystem_c.dylib               0x3249b208 pthread_kill + 48
2   libsystem_c.dylib               0x32494298 abort + 88
3   libc++abi.dylib                 0x34219f64 abort_message + 40
4   libc++abi.dylib                 0x34217346 _ZL17default_terminatev + 18
5   libobjc.A.dylib                 0x35043350 _objc_terminate + 140
6   libc++abi.dylib                 0x342173be _ZL19safe_handler_callerPFvvE + 70
7   libc++abi.dylib                 0x3421744a std::terminate() + 14
8   libc++abi.dylib                 0x3421881e __cxa_rethrow + 82
9   libobjc.A.dylib                 0x350432a2 objc_exception_rethrow + 6
10  CoreFoundation                  0x32ff4506 CFRunLoopRunSpecific + 398
11  CoreFoundation                  0x32ff4366 CFRunLoopRunInMode + 98
12  GraphicsServices                0x33141432 GSEventRunModal + 130
13  UIKit                           0x355d3cce UIApplicationMain + 1074
14  ******                  0x00083efc 0x82000 + 7932
15  ******                  0x00083ebc 0x82000 + 7868

Thread 1 name:  Dispatch queue: com.apple.libdispatch-manager
Thread 1:
0   libsystem_kernel.dylib          0x355653a8 kevent + 24
1   libdispatch.dylib               0x317c9f04 _dispatch_mgr_invoke + 708
2   libdispatch.dylib               0x317c9c22 _dispatch_mgr_thread + 30

Thread 2:
0   libsystem_kernel.dylib          0x35575cd4 __workq_kernreturn + 8
1   libsystem_c.dylib               0x32456f36 _pthread_wqthread + 610
2   libsystem_c.dylib               0x32456cc8 start_wqthread + 0

Thread 3 name:  WebThread
Thread 3:
0   libsystem_kernel.dylib          0x35565004 mach_msg_trap + 20
1   libsystem_kernel.dylib          0x355651fa mach_msg + 50
2   CoreFoundation                  0x330723ec __CFRunLoopServiceMachPort + 120
3   CoreFoundation                  0x33071124 __CFRunLoopRun + 876
4   CoreFoundation                  0x32ff449e CFRunLoopRunSpecific + 294
5   CoreFoundation                  0x32ff4366 CFRunLoopRunInMode + 98
6   WebCore                         0x35d92c9c _ZL12RunWebThreadPv + 396
7   libsystem_c.dylib               0x3245c72e _pthread_start + 314
8   libsystem_c.dylib               0x3245c5e8 thread_start + 0

Thread 4:
0   libsystem_kernel.dylib          0x35575cd4 __workq_kernreturn + 8
1   libsystem_c.dylib               0x32456f36 _pthread_wqthread + 610
2   libsystem_c.dylib               0x32456cc8 start_wqthread + 0

Thread 5:
0   libsystem_kernel.dylib          0x35575cd4 __workq_kernreturn + 8
1   libsystem_c.dylib               0x32456f36 _pthread_wqthread + 610
2   libsystem_c.dylib               0x32456cc8 start_wqthread + 0

Thread 6:
0   AddressBook                     0x338c7cc8 ABAddressBookCreate + 0
1   TextInput                       0x345d11be
KB::fill_with_matchable_strings_from_address_book(KB::Hashmap<KB::String, bool>&) + 10
2   TextInput                       0x345d7dee 
KB::DynamicDictionaryImpl::background_load_address_book(KB::StaticDictionary const&) + 194
3   TextInput                       0x345d8728 _ZN2KBL14BackgroundLoadEPv + 272
4   libsystem_c.dylib               0x3245c72e _pthread_start + 314
5   libsystem_c.dylib               0x3245c5e8 thread_start + 0

Thread 0 crashed with ARM Thread State:
    r0: 0x00000000    r1: 0x00000000      r2: 0x00000001      r3: 0x00000000
    r4: 0x00000006    r5: 0x3ea85d98      r6: 0x00000002      r7: 0x2fe80a60
    r8: 0x00000000    r9: 0x00000000     r10: 0x3f330d4c     r11: 0x3f3459c0
    ip: 0x00000148    sp: 0x2fe80a54      lr: 0x3249b20f      pc: 0x3557532c
  cpsr: 0x00020010 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T12:20:34.887

应用程序也需要在 iPad 上运行，即使它们仅针对 iPhone。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T09:15:57.923

我假设您的 iOS 应用程序目标设置为 iPhone 而不是通用的？

![xcode 截图](../Images/833fc82f35ece82cf4b6cd6030d5058c.png)

如果您认为您的所有设置都是正确的，您可以向 Apple 提交上诉：

[https://developer.apple.com/appstore/contact/appreviewboard/index.html](https://developer.apple.com/appstore/contact/appreviewboard/index.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-05T09:20:31.933

照 Lee Crossley 所说的去做，但你也应该去 iTunes Connect 中的调解中心告诉审阅者这件事。他们可以回复并解决您的问题。他们会比我们提供更好的建议！

# c - 一种跨平台的方式来创建一个进程

> ID：10894480
> 
> 赞同：2
> 
> 时间：2012-06-05T09:07:06.423
> 
> 标签：c, windows, winapi, vlc, createprocess

我需要从 C 程序启动 VLC，我想找到一种跨平台的方式来做到这一点。

当然，我知道我将为 Linux 和 Windows 使用两个不同的函数（fork 和 CreateProcess）。我不知道如何从 Windows 启动 VLC。[在这里](http://msdn.microsoft.com/en-us/library/windows/desktop/ms682425%28v=vs.85%29.aspx)阅读官方文档我看到我必须使用可执行文件的绝对路径。如何检索已安装 VLC 的目录的绝对路径？

* * *

我想我的代码将如下所示：

```
#ifdef WINDOWS
// use CreateProcess
#else
// use fork
#endif 
```

我还不知道如何动态检索 VLC 的路径。

* * *

更新

也许我找到了另一种获得相同结果的方法。这有点棘手，但它应该可以工作。libvlc 提供了直接从 C 代码播放媒体文件的功能。这是[官方文档的链接](http://www.videolan.org/developers/vlc/doc/doxygen/html/group__libvlc__media__list.html)

# c# - 在 Windows 8 Metro 应用程序中从 IE10 检索代理设置

> ID：10894481
> 
> 赞同：0
> 
> 时间：2012-06-05T09:07:07.713
> 
> 标签：c#, windows, windows-runtime

我想从我的 Metro 应用程序中检索 IE10 的代理设置，但 WebRequest.GetSystemWebProxy 方法看起来不可用，我想不出其他方法。

我已经编写了 IWebProxy 的实现，其中我的所有代理设置都是硬编码的，但这实际上只是一种解决方法。

我的应用程序是用 C# 编写的。

在网上拖网，这似乎是一个没有明确答案的常见问题。

我正在 ISA 服务器后面开发我的应用程序，我需要能够对其进行身份验证。

这是我的第一篇文章，如果我没有提供足够的细节，敬请见谅。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T09:06:54.850

我认为凭据现在将存储在 Windows 8 密码库中。最后，这就是我所做的，它似乎运作良好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T08:15:08.670

据我所知，这是不可能的（可能在 RTM 版本中）。

# java - 使用 Ant 构建多平台 SWT 应用程序

> ID：10894483
> 
> 赞同：0
> 
> 时间：2012-06-05T09:07:14.140
> 
> 标签：java, ant, build, jar, swt

我正在编写一个可在 Windows（32/64 位）和 Mac OSX（32/64 位）上使用的 SWT 应用程序。

除了 JRE，我还依赖[这里](http://archive.eclipse.org/eclipse/downloads/drops/R-3.6.1-201009090800/index.php#SWT)的 SWT 库。根据我的目标平台（如上所述），我可以找到四个版本的 SWT 库。

在构建我的应用程序时，如何使用正确的 SWT Jar 进行编译？如果可能的话，我想尽量避免对 Jar 版本、平台和架构进行硬编码。SWT 罐子的命名如下：

*   swt-win32-x86_64.jar
*   swt-win32-x86_32.jar
*   swt-macosx-x86_32.jar
*   swt-macosx-x86_64.jar

（我的项目将是一个开源项目。我希望人们能够下载源代码并构建它，因此我考虑在源代码分发中包含所有四个版本的 SWT Jars。我希望这是依赖第三方库发布代码的正确方法。）

谢谢大家。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T10:37:11.680

我试过这样完成它：我安装了 Ant Contrib 任务，因为它支持`if`语句。我已经修改了构建文件以用于检测操作系统平台和体系结构。

编译时，它使用我的所有 4 个 SWT Jars，`lib.dir`但编译后，它只将必要的 SWT Jar 复制到我的构建目录。我想这将使我的最终 ZIP 的大小比保留所有四个 JAR 小得多。

```
<target name="copy" depends="compile">
    <if>
    <os family="windows"/>
    <then>
        <exec dir="." executable="cmd" outputproperty="command.ouput">
            <arg line="/c SET ProgramFiles(x86)"/>
        </exec>
        <if>
            <contains string="${command.ouput}" substring="Program Files (x86)"/>
            <then>
                <copy file="${lib.dir}/swt-win32-x86_64.jar" tofile="${jar.dir}/SWT.jar"/>
            </then>
            <else>
                <copy file="${lib.dir}/swt-win32-x86_32.jar" tofile="${jar.dir}/SWT.jar"/>
            </else>
        </if>
    </then>
    <elseif>
        <os family="unix"/>
        <then>
            <exec dir="." executable="/bin/sh" outputproperty="command.ouput">
                <arg line="/c uname -m"/>
            </exec>
            <if>
                <contains string="${command.ouput}" substring="_64"/>
                <then>
                    <copy file="${lib.dir}/swt-macosx-x86_64.jar" tofile="${jar.dir}/SWT.jar"/>
                </then>
                <else>
                    <copy file="${lib.dir}/swt-macosx-x86_32.jar" tofile="${jar.dir}/SWT.jar"/>
                </else>
            </if>
        </then>
    </elseif>
    </if>
</target> 
```

到目前为止，这似乎有效。我将对其进行更多测试并添加评论。

# javascript - 在jQuery中通过索引获取字典的键值

> ID：10894484
> 
> 赞同：11
> 
> 时间：2012-06-05T09:07:20.287
> 
> 标签：javascript, jquery, dictionary, javascript-objects

我有一个 javascript 字典对象，它有一个默认为`0`. 然后我需要通过**索引**遍历这个字典的元素，并使用键的值来设置它的值。下面是我的代码，使事情更容易理解：

```
var _map = {
    'severity-normal': 0,
    'severity-minimal': 0,
    'severity-moderate': 0,
    'severity-severe': 0,
    'severity-highly-severe': 0
};

    mapSeverities: function () {
        for (var i = 0; i < _map.length; i++) {
            //get the key value, ex: severity-normal, by index (which would by i)
            var key = //retrieved key value
            _map[key] = this.data(key);
        }
    } 
```

换句话说，假设我们正在处理 C#，我想获取`KeyValuePair`某个索引处的 ，然后访问它的`Key`和`Value`属性。

有什么建议么？

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-06-05T09:12:21.290

你也可以[`$.each`](http://api.jquery.com/jQuery.each/)这样使用

```
$.each(_map, function(key, value) { 
  // key is the key
  // value is the value
}); 
```

[工作小提琴](http://jsfiddle.net/joycse06/fBy5K/1/)

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-06-05T09:09:32.903

对于对象`_map`，您应该使用`for .. in`.

```
for (var key in _map) {
  _map[key] = this.data[key];
} 
```

# c# - Redis - 在给定日期时间范围内的命中计数跟踪和查询

> ID：10894486
> 
> 赞同：0
> 
> 时间：2012-06-05T09:07:49.633
> 
> 标签：c#, java, python, ruby, redis

我有许多不同的项目，我想跟踪每个项目的命中次数，然后查询给定日期时间范围内每个项目的命中计数，直到每秒。

所以我开始将命中存储在一个排序集中，每秒一个排序集（unix epoch time），例如：

```
zincrby ItemCount:1346742000 item1 1    
zincrby ItemCount:1346742000 item2 1
zincrby ItemCount:1346742001 item1 1
zincrby ItemCount:1346742005 item9 1 
```

现在获取给定日期范围内每个项目的总命中数：

```
1\. Given a start datetime and end datetime:
   Calculate the range of epochs that fall under that range.

2\. Generate the key names for each sorted set using the epoch values example:
   ItemCount:1346742001, ItemCount:1346742002, ItemCount:1346742003

3\. Use Union store to aggregate all the values from different sorted sets 

   ZUINIONSTORE _item_count KEYS....

4\. To get the final results out:

   ZRANGE _item_count 0, -1 withscores 
```

所以它有点工作，但是当我有一个像 1 个月这样的大日期范围时遇到问题，从第 1 步和第 2 步计算的键名数量达到数百万（每天 86400 个纪元值）。使用如此大量的键，ZUINIONSTORE 命令失败 - 套接字被破坏。另外，循环并生成这么多密钥需要一段时间。

我怎样才能在 Redis 中以更有效的方式设计它，并且仍然将跟踪粒度一直保持在几秒钟而不是几分钟或几天。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T09:36:11.050

yeah, you should avoid big unions of sorted sets. a nice trick you can do, assuming you know the maximum hits an item can get per second.

1.  sorted set per item with timestamps as BOTH scores and values.
2.  but the scores are incremented by 1/(max_predicted_hits_per_second), if you are not the first client to write them. this way the number after the decimal dot is always hits/max_predicted_hits_per second, but you can still do range queries.

so let's say max_predicted_hits_per_second is 1000\. what we do is this (python example):

```
#1\. make sure only one client adds the actual timestamp, 
#by doing SETNX to a temporary key)

now = int(time.time())
rc = redis.setnx('item_ts:%s' % itemId, now)

#just the count part
val = float(1)/1000
if rc: #we are the first to incement this second
   val += now
   redis.expire('item_ts:%s' % itemId, 10) #we won't need that anymore soon, assuming all clients have the same clock

#2 increment the count
redis.zincrby('item_counts:%s' % itemId, now, amount = val) 
```

and now querying a range will be something like:

```
counts = redis.zrangebyscore('item_counts:%s' % itemId, minTime, maxTime + 0.999, withscores=True)

total = 0
for value, score in counts:
    count = (score - int(value))*1000
    total += count 
```

# jquery - 全局范围内的 jQuery 插件函数

> ID：10894492
> 
> 赞同：0
> 
> 时间：2012-06-05T09:08:13.320
> 
> 标签：jquery, jquery-plugins

现在我学习了很多关于 jQuery 插件开发和关于 jQuery 的知识。我制作了一个简单的 jQuery 插件，我从 $.fn.testplugin 移到了 initialize() 函数之外，但现在 initialize() 函数在全局范围内。我的问题是如何从 $.fn.testplugin 移出 initialize() 函数，但同时使其成为本地范围。

插入：

```
(function($){
    function initialize($obj, color){
        $obj.css("color",color);
    };      

    $.fn.testplugin = function(options){
       var defaults = { 
        color: "red"
       };
       var option = $.extend(defaults, options);

       return this.each(function(){
        var $this = $(this);  
        initialize($this, option.color);
       });      
    };
})(jQuery); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T09:12:20.407

您的`initialize()`功能不在全局范围内；您正在显式创建一个定义它的闭包。您无法`initialize()`从发布的代码中最外层的函数外部访问该函数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T09:12:11.710

使用`var`：

```
var initialize = function() {}; 
```

它将在您的匿名函数的本地范围内。

# asp.net - tostring 中的数组 将 char 类型转换为字符串

> ID：10894493
> 
> 赞同：0
> 
> 时间：2012-06-05T09:08:15.187
> 
> 标签：asp.net, c#-4.0, frameworks

我有这段代码，但出现了一些错误。之后我更改了代码。但我想知道那是正确的。

```
 modifiedMessage = convertToISOfromUtf8(modifiedMessage, "ISO8859-1", "UTF-8");

        char[] characters_to_removed_from_start = { ' ' };
        modifiedMessage = modifiedMessage.TrimStart(characters_to_removed_from_start);

        String msg_arr = modifiedMessage.Split(' ');

        String keyword = msg_arr[0];

        //Linq
        if (keyword != null)
        {
            string[] key = Regex.Split(msg_arr, @keyword).Skip(0).ToArray();
          //  message_in = String.Join(message_in,key);
            message_in = String.Join(msg_arr, key);

            modifiedMessage="";

        } 
```

这些是显示的错误错误 1 ​​无法将类型“字符串 []”隐式转换为“字符串”
错误 2 无法将类型“字符”隐式转换为“字符串”

然后我像这样更改我的代码..（仅更改下面列出的代码）

```
 String msg_arr = modifiedMessage.Split(' ').ToString();

 String keyword = msg_arr[0].ToString(); 
```

我想知道我的作品是否正确？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T09:12:47.303

不，那不正确，改变

```
String msg_arr = modifiedMessage.Split(' '); 
```

至

```
String[] msg_arr = modifiedMessage.Split(' '); 
```

这将解决“错误 1 ​​无法将类型 'string[]' 隐式转换为 'string'”

并且错误 2 也消失了

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T09:13:59.073

将**msg_arr**变量声明为`string[]`或`var`。

您的语法不符合 .NET 和 C#[命名准则](http://msdn.microsoft.com/en-us/library/xzf533w0.aspx)，请使用[StyleCop](http://stylecop.codeplex.com)获得帮助。

# android - 我们什么时候应该在 Android 中使用 Looper？

> ID：10894494
> 
> 赞同：0
> 
> 时间：2012-06-05T09:08:15.390
> 
> 标签：android, handlers, looper

有人可以告诉我什么时候应该在处理程序中使用 Looper 吗？我有一个代码库，其中有多个线程和处理程序。但是`Looper.prepare()`并`Looper.loop()`没有要求所有这些。

我的疑问是我们是否需要 looper 来持续处理 handleMessage 方法中的消息？即使我们没有looper，当消息发送到处理程序时，不会调用handleMessage()吗？Looper 在这里还有什么额外的用途？

谢谢， 沙米

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-05T09:39:32.593

用于为线程运行消息循环的类。默认情况下，线程没有与之关联的消息循环；要创建一个，请在要运行循环的线程中调用 prepare()，然后 loop() 让它处理消息，直到循环停止。

大多数与消息循环的交互都是通过 Handler 类进行的。

下面有一个线程的run方法

```
@Override
    public void run() {
        try {
            // preparing a looper on current thread         
            // the current thread is being detected implicitly
            Looper.prepare();

            Log.i(TAG, "DownloadThread entering the loop");

            // now, the handler will automatically bind to the
            // Looper that is attached to the current thread
            // You don't need to specify the Looper explicitly
            handler = new Handler();

            // After the following line the thread will start
            // running the message loop and will not normally
            // exit the loop unless a problem happens or you
            // quit() the looper (see below)
            Looper.loop();

            Log.i(TAG, "DownloadThread exiting gracefully");
        } catch (Throwable t) {
            Log.e(TAG, "DownloadThread halted due to an error", t);
        } 
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T09:44:47.977

Android Looper 是 Android 用户界面中的一个 Java 类，它与 Handler 类一起处理 UI 事件，例如按钮单击、屏幕重绘和方向切换。它们还可用于将内容上传到 HTTP 服务、调整图像大小和执行远程请求。

[http://developer.android.com/reference/android/os/Looper.html](http://developer.android.com/reference/android/os/Looper.html)

# wcf - 响应对象在 WCF 中不可用？

> ID：10894496
> 
> 赞同：0
> 
> 时间：2012-06-05T09:08:26.027
> 
> 标签：wcf, silverlight, response

我正在创建一个基于 silverlight 的电子邮件系统，我使用 WCF 来阅读电子邮件，然后将我的数据传递给 SL 应用程序，我在另一个测试 Web 项目中使用以下代码将字节数组保存到客户端系统上的文件中（电子邮件附件），它工作正常，但是当我想在我的 WCF（myservice.svc.cs）中使用它们时，我收到此错误：“当前上下文中不存在名称'响应'”，出了什么问题这里？是否可以在服务中使用响应对象？

```
 Response.AppendHeader("Content-Disposition", String.Format("attachment; filename={0}", messages[i].Attachments[j].FileName));
                    Response.BinaryWrite(messages[i].Attachments[j].FileData); 
```

如何保存我的附件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T10:07:07.667

不，您通常不会在 WCF 中使用 HttpResponse 对象（尽管我不能 100% 确定您是否*可以*在 REST 服务中使用它）。如果要向客户端发送文件，则需要实现返回字节数组或文件流的服务操作。这篇[文章](http://stefanoricciardi.com/2009/08/28/file-transfer-with-wcp/)可能会帮助你。

# google-app-engine - 如何缓存谷歌应用引擎

> ID：10894500
> 
> 赞同：2
> 
> 时间：2012-06-05T09:08:40.603
> 
> 标签：google-app-engine

是否可以为我的静态内容缓存 Google Apps Engine；到目前为止，我唯一做的就是按照这些说明存储我的文件[http://www.digitalistic.com/2008/06/09/10-easy-steps-to-use-google-app-engine- as-your-own-cdn/](http://www.digitalistic.com/2008/06/09/10-easy-steps-to-use-google-app-engine-as-your-own-cdn/) 但是，为了改善我的最终用户体验，我需要一种能够为我的用户缓存所有内容（主要是横幅/图像）的方法

对于不那么热衷于 python 的人来说，是否有一个友好的指南？

提前致谢！！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-05T10:05:39.167

您是否按照[此处](https://developers.google.com/appengine/docs/python/config/appconfig#Static_File_Handlers)配置静态处理程序的说明进行操作。？您可以为静态数据配置缓存过期时间，AppEngine 将为文件提供正确配置的标头。

# iphone - CLLocation - 在另一个位置查找磁偏角/偏差

> ID：10894501
> 
> 赞同：7
> 
> 时间：2012-06-05T09:08:44.750
> 
> 标签：iphone, objective-c, ios, cllocation

我知道如何找到我的手机当前所在位置的真实航向/磁航向，但是否可以找到远程位置的磁偏角/磁偏角？

我想做的是能够在地图上的某个地方放一个大头针，然后从该点找到真正的方位和具有磁性变化的方位。

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-01-25T00:05:39.933

计算它的代码必须已经存在于某个框架中，因为它在位置服务可用时由 CLHeading 使用。

如果有人能找到该代码或拥有用于发布世界磁模型的 Objective C，将不胜感激。

**更新：**我发现了一个很棒的开源 iOS 包装器！谢谢曲颈！ [https://github.com/stephent/ObjectiveWMM](https://github.com/stephent/ObjectiveWMM)

**作为 git 子模块的简单安装**

```
run this command:
$git submodule add https://github.com/stephent/ObjectiveWMM.git ObjectiveWMM

Add these files to your Xcode project:
CCMagneticDeclination.h
CCMagneticDeclination.m
CCMagneticModel.h
CCMagneticModel.m
NSDate+DecimalYear.h
NSDate+DecimalYear.m
WMM/EGM9615.h
WMM/GeomagnetismHeader.h
WMM/GeomagnetismLibrary.c
WMM/WMM.COF 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-14T22:44:17.947

你解决了吗？否则，您可以计算远程位置的方位角。首先是磁北航向，然后是真北航向。最后将两者相减得到磁偏差。

以下是如何计算远程位置的方位角：

```
-(float)azimuthFromLocations:(CLLocationCoordinate2D)first toCoordinate:(CLLocationCoordinate2D)second{
float longitudeDifference = second.longitude - first.longitude;
float latitudeDifference = second.latitude  - first.latitude;
float possibleAzimuth = (M_PI * .5f) - atan(latitudeDifference / longitudeDifference);

if (longitudeDifference > 0)
    return possibleAzimuth;
else if (longitudeDifference < 0)
    return possibleAzimuth + M_PI;
else if (latitudeDifference < 0)
    return M_PI;

return 0.0f;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-12-11T09:34:50.257

我需要在 Swift 中基于 World Magnetic Model 的相同解决方案。

这是我的实现： [https ://github.com/kanchudeep/Geomagnetism-Swift](https://github.com/kanchudeep/Geomagnetism-Swift)

这是一个简单的单一类，可以放入任何项目并使用。

# c++ - 即使使用多核上下文，是否有任何 std::chrono 线程安全保证？

> ID：10894504
> 
> 赞同：16
> 
> 时间：2012-06-05T09:09:04.563
> 
> 标签：c++, c++11, c++-standard-library

首先，我假设调用 std::chrono 的任何函数都保证是线程安全的（如果从不同的线程调用，没有未定义的行为或竞争条件或任何危险）。我对么？

接下来，例如[在 Windows 上，有一个众所周知的与多核处理器相关的问题](http://support.microsoft.com/kb/274323)，它强制[时间相关系统的某些实现允许强制特定内核获取任何时间信息](https://bitbucket.org/sinbad/ogre/src/8fc4ef8aae3b/OgreMain/src/WIN32/OgreTimer.cpp)。

我想知道的是：

1.  在标准中使用 std::chrono 是否可以保证不会出现这样的问题？
2.  还是实现定义
3.  或者是否有明确的缺乏保证意味着在 Windows 上你最好总是从同一个核心获得时间？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-04T14:01:43.790

是的，来自不同线程的调用`some_clock::now()`应该是线程安全的。

至于您提到的具体问题`QueryPerformanceCounter`，只是 Windows API 在某些平台上暴露了硬件问题。其他操作系统可能会也可能不会将此硬件问题暴露给用户代码。

就 C++ 标准而言，如果时钟声称是“稳定时钟”，那么它绝不能倒退，因此如果在同一个线程上有两次读取，则第二次读取的值绝不能早于第一次，即使操作系统将线程切换到不同的处理器。

对于非稳定时钟（例如`std::chrono::system_clock`在许多系统上），不能保证这一点，因为外部代理无论如何都可以任意更改时钟。

通过[我对 C++11 线程库](http://www.stdthread.co.uk)（包括这些`std::chrono`东西）的实现，该实现会注意确保稳定的时钟确实是稳定的。这确实会在确保同步的原始调用之上产生成本`QueryPerformanceCounter`，但不再将线程固定到 CPU 0（它曾经这样做）。我希望其他实现也有解决这个问题的方法。

稳定时钟的要求在 20.11.3 [time.clock.req]（C++11 标准）

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-06-06T08:58:13.887

老实说，我相信下面的陈述完全回答了这个问题：不能保证实现不会有特定于平台的错误。这一切都应该完美地工作，但有时出于某种原因，它没有。没有人可以向你保证它会做你想做的事，但它应该可以工作。

# reactiveui - 异步批量处理 ReactiveCollection CollectionChangeEvent

> ID：10894508
> 
> 赞同：1
> 
> 时间：2012-06-05T09:09:12.457
> 
> 标签：reactiveui

我正在探索反应式 UI。我有一个 ObservableCollection 模型，其中以非常高的速度添加对象。我处理 collectionchanged 事件并为另一个 ObservableCollection 中的每个模型添加 viewModel。我们可以抑制模型列表的 CollectionChanged 事件并为一堆记录或在指定的时间间隔过去后引发事件吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T09:45:31.137

是的，这是如何做到的：

```
using (someReactiveCollection.SuppressChangeNotifications()) {
    // TODO: Add a bunch of items
} 
```

# notifications - 当有人取消他们预先批准的付款时，贝宝会发送通知吗？

> ID：10894517
> 
> 赞同：2
> 
> 时间：2012-06-05T09:09:39.803
> 
> 标签：notifications, paypal-ipn, paypal-adaptive-payments

如果用户批准了预先批准的付款，然后转到贝宝并取消了他们预先批准的付款，贝宝是否会向我的应用程序发送任何类型的通知，让我知道它已被取消？

以下是有关此事的一些文档：[Paypal Preapproval API Operation](https://developer.paypal.com/webapps/developer/docs/classic/api/adaptive-payments/Preapproval_API_Operation/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-10T15:10:29.050

> PayPal 发送 IPN 消息以响应付款、退款、创建预批准和取消预批准。您的 IPN 消息处理程序必须按照即时付款通知指南中所述的方式进行设置。

[来源](https://developer.paypal.com/webapps/developer/docs/classic/adaptive-payments/integration-guide/APIPN/)

# objective-c - 创建 NSManagedObject（大尺寸）。内存警告和应用程序崩溃

> ID：10894525
> 
> 赞同：0
> 
> 时间：2012-06-05T09:10:16.700
> 
> 标签：objective-c, ios, core-data, memory, nsmanagedobject

我是一名新的 iOS 开发人员。希望得到帮助。我希望能够创建许多 NSManagedObjects。一个 NSManagedObject 的字段大小约为 5Mb。我无法在 iPhone 内存中保存如此大量的内存。我想将它保存在数据库中。但是当我保存 NSManagedObject 时，它仍然在内存中，因为当我保存大约 20 个对象时，我收到内存警告并且应用程序崩溃。这是我的代码

```
- (void)SaveItem
    {
        NSString *entityName = kEntityName;
        AppDelegate *appDelegate = [[UIApplication sharedApplication] delegate];
        NSManagedObjectContext *context = appDelegate.managedObjectContext;
        NSEntityDescription *entityDesctiption = [NSEntityDescription 
                                                  entityForName: entityName
                                                  inManagedObjectContext:context];
        // check if town exists
        NSPredicate *predicate = [NSPredicate predicateWithFormat:@"id == %d", self.imageID];
        NSFetchRequest *requestToCheckExistense = [[NSFetchRequest alloc] init];
        [requestToCheckExistense setEntity:entityDesctiption];
        [requestToCheckExistense setPredicate:predicate];
        NSArray *objects = [context executeFetchRequest:requestToCheckExistense error:nil];
        [requestToCheckExistense release];
        if (objects == nil)
        {
            NSLog(@"there was an error");
        }
        NSManagedObject *object;
        if ([objects count] > 0)
        {
            // edit item
            object = [objects objectAtIndex:0];
        }
        else
        {
            // if object doesn't exist, find max id to imlement autoincrement
            NSFetchRequest *request = [[NSFetchRequest alloc] init];
            [request setEntity:entityDesctiption];
            request.propertiesToFetch = [NSArray arrayWithObjects: @"id", nil];
            NSArray *allobjects = [context executeFetchRequest:request error:nil];
            [request release];
            NSInteger newID = 1;
            if ([allobjects count] > 0)
            {
                NSNumber *maxID = [allobjects valueForKeyPath:@"@max.id"];
                newID = [maxID intValue] + 1;
            }

            // write item
            object = [NSEntityDescription insertNewObjectForEntityForName:entityName inManagedObjectContext:context]; 
            [object setValue:[NSNumber numberWithInt:newID] forKey:@"id"];
            self.imageID = newID;
        }
        // fill NSManagedObject
        // size of objNSData is about 5MB
        NSMutableData *objNSData = [[DatabaseManager sharedDatabaseManager] encryptedDataFromImage:bigImage];
        [object setValue:objNSData forKey:@"big"];

         [context save:nil];
     } 
```

当我尝试调用 [self SaveItem] 20 次时，应用程序崩溃并出现内存警告。当我评论

```
[object setValue:objNSData forKey:@"big"]; 
```

一切都很好。

我试图将代码添加到 @autoreleasepool ，但这没有帮助。

我知道，现在，当我将数据保存到数据库时，它仍在 iPhone 内存中。如何从这个内存中释放它？当我获得一组托管对象时，它们不在内存中（我可以轻松获得 100 个对象，每个对象都有 5Mb 字段）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-05T11:34:01.143

在核心数据中存储图像（或大二进制值）不是一个好的选择。苹果建议不要这样做。这是有规则的。[检查这个其他问题/答案。](https://stackoverflow.com/a/2098401/1322377)

如果你想从内存中取出对象，你需要删除你对它们的所有引用。如果您在紧密循环中执行“SaveItem”，则应将每个循环执行包装在自动释放池中，而不是循环本身。

从苹果文档中，这也可能是您的问题：

*具有未决更改（插入、删除或更新）的托管对象由其上下文保留，直到其上下文被发送 save:、reset、rollback 或 dealloc 消息，或适当数量的撤消来撤消更改。与上下文关联的撤消管理器保留任何更改的托管对象。默认情况下，上下文的撤消管理器保留无限的撤消/重做堆栈。为了限制应用程序的内存占用，您应该确保在适当的时候清理（使用 removeAllActions）上下文的撤消堆栈。除非您保留上下文的撤消管理器，否则它会随其上下文一起被释放。*

***如果您不打算使用 Core Data 的撤消功能，您可以通过将上下文的撤消管理器设置为 nil 来减少应用程序的资源需求。这对于后台工作线程以及大型导入或批处理操作可能特别有益。***

# python - AttributeError：“NoneType”对象没有“显示”属性

> ID：10894532
> 
> 赞同：1
> 
> 时间：2012-06-05T09:10:31.223
> 
> 标签：python, pychart

我想获取 PDF 文件，但出现错误：`AttributeError: 'NoneType' object has no attribute 'show'`. 错误说`can`没有属性`show`。为什么？如您所见，我`show`从`pychart.canvas`.

```
from pychart import *
from pychart.canvas import show
can = canvas.init("pic.pdf")
x, y = (100, 500)

def show_text(str):
    global x, y
    can.show(x, y, str)
    can.show(x + 200, y, "/12/C" + font.quotemeta(str))
    y -= 20

show_text("/12/hLLeft align")
show_text("/12/hRRight align")
show_text("/12/hCCenter align")
show_text("/a20/12/hRAngled text")

def show_textv(str):
    global x, y
    can.show(x, y, str)
    x += 150

y -= 40
x = 100
show_textv("/12/vT//12//vTTop align")
show_textv("/12/vM//12//vT/12Middle align")
show_textv("/12/vB//12//vT/12Bottom align")

y -= 40
x = 100
show_text("/16/HHelvetica")
show_text("/12/CCourier")
show_text("/12/NHelvetica-Narrow")
show_text("/12/PPalatino-Roman")
show_text("/12/AAvantgarde")
show_text("/12/T/iTimes-Italic")
show_text("/12/F{ZapfDingbats}ZapfDingbats") 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T09:39:08.143

NoneType 是 None 对象的类型。什么时候可以 == None 并且您调用以下命令：

```
can.show(x, y, str) 
```

你实际上调用了 None.show(x, y, str) 并得到 AttributeError，因为 None 没有“show”属性

要解决您的问题，请尝试调查为什么可以 == 无

# java - Java - 缩短目录的路径

> ID：10894536
> 
> 赞同：0
> 
> 时间：2012-06-05T09:10:43.950
> 
> 标签：java, file, path, directory

我想缩短目录的路径。

我知道路径必须开始的目录，例如（路径从*1*开始）：

而不是`C:\temp\top\1\file.txt`，我想得到`1\file.txt`。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T09:16:24.820

*注意：小心使用 \ 和 /....*

您可以遍历从文件到根目录的路径，以检查该目录是否是您想要的目录：

```
File baseDir = new File(basePath);
File candidate = new File(fullPath);
String subPath = candidate.getName();
candidate = candidate.getParent();

while (candidate != null && !candidate.equals(baseDir))
{
    candidate = candidate.getParent();
    subPath = candidate.getName() + File.separatorChar + subPath;
}

// now if candidate == null the file is on another directory, you have to use all the path
// if candidate != null, then subpath has what you want 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T09:14:21.157

您可以尝试使用来自[String](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/String.html)对象的 substring 和 indexOf 方法。

例子：

```
String path = "C:/temp/top/1/file.txt";
System.out.println(path.substring(path.indexOf("1"))); 
```

# c# - 将值与数组进行比较并获得最接近的值

> ID：10894550
> 
> 赞同：3
> 
> 时间：2012-06-05T09:11:52.757
> 
> 标签：c#, arrays, compare

我是 C# 的新手，我正在努力学习这种语言。

你们能给我一个提示，我如何将数组与从中选择最低值的值进行比较？

像：

```
Double[] w = { 1000, 2000, 3000, 4000, 5000 };

double min = double.MaxValue;
double max = double.MinValue;

foreach (double value in w)
{
    if (value < min)
        min = value;
    if (value > max)
        max = value;
}

Console.WriteLine(" min:", min); 
```

给我 的最低值`w`，我现在该如何比较？

如果我有：

```
int p = 1001 + 2000;  // 3001 
```

我现在如何与数组列表进行比较并找出 (3000) 值是最接近我的“搜索值”的值？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-06-05T09:20:40.650

你可以用一些简单的数学来做到这一点，并且有不同的方法。

### LINQ

```
Double searchValue = ...;

Double nearest = w.Select(p => new { Value = p, Difference = Math.Abs(p - searchValue) })
                  .OrderBy(p => p.Difference)
                  .First().Value; 
```

### 手动

```
Double[] w = { 1000, 2000, 3000, 4000, 5000 };

Double searchValue = 3001;
Double currentNearest = w[0];
Double currentDifference = Math.Abs(currentNearest - searchValue);

for (int i = 1; i < w.Length; i++)
{
    Double diff = Math.Abs(w[i] - searchValue);
    if (diff < currentDifference)
    {
        currentDifference = diff;
        currentNearest = w[i];
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-05T09:15:54.383

```
Double[] w = { 1000, 2000, 3000, 4000, 5000 };
var minimumValueFromArray = w.Min(); 
```

生产

`1000`，正如预期的那样，因为我们执行[Enumerable.Min](http://msdn.microsoft.com/en-us/library/bb359972.aspx)。

[Enumerable.Max](http://msdn.microsoft.com/en-us/library/bb358977.aspx)也是如此，计算最大值：

```
Double[] w = { 1000, 2000, 3000, 4000, 5000 };
var maximumValueFromArray = w.Max(); 
```

考虑到您正在与`double.MinValue`and进行比较`double.MaxValue`，我假设您只想从数组中选择最小值和最大值。

如果这不是您要搜索的内容，请澄清。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-22T08:40:26.547

根据您的代码，您可以以非常简单的方式实现这一目标

```
 Double[] w = { 1000, 2000, 3000, 4000, 5000 }; // it has to be sorted

    double search = 3001;
    double lowerClosest = 0;
    double upperClosest = 0;

        for (int i = 1; i < w.Length; i++)
        {
            if (w[i] > search)
            {
                upperClosest = w[i];
                break; // interrupts your foreach
            }

        }
        for (int i = w.Length-1; i >=0; i--)
        {
            if (w[i] <= search)
            {
                lowerClosest = w[i];
                break; // interrupts your foreach
            }

        }

    Console.WriteLine(" lowerClosest:{0}", lowerClosest);
    Console.WriteLine(" upperClosest:{0}", upperClosest);
    if (upperClosest - search > search - lowerClosest)
        Console.WriteLine(" Closest:{0}", lowerClosest);
    else
        Console.WriteLine(" Closest:{0}", upperClosest);

    Console.ReadLine(); 
```

根据您的搜索值的位置，这将**小于 O(n)**

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2014-01-07T08:06:23.967

```
 Performance wise custom code will be more use full. 

                List<int> results;
                int targetNumber = 0;
                int nearestValue=0;
                if (results.Any(ab => ab == targetNumber ))
                {
                    nearestValue= results.FirstOrDefault<int>(i => i == targetNumber );
                }
                else
                {
                    int greaterThanTarget = 0;
                    int lessThanTarget = 0;
                    if (results.Any(ab => ab > targetNumber ))
                    {
                        greaterThanTarget = results.Where<int>(i => i > targetNumber ).Min();
                    }
                    if (results.Any(ab => ab < targetNumber ))
                    {
                        lessThanTarget = results.Where<int>(i => i < targetNumber ).Max();
                    }

                    if (lessThanTarget == 0 )
                    {
                        nearestValue= greaterThanTarget;
                    }
                    else if (greaterThanTarget == 0)
                    {
                        nearestValue= lessThanTarget;
                    }
                    else if (targetNumber - lessThanTarget < greaterThanTarget - targetNumber )
                    {
                        nearestValue= lessThanTarget;
                    }
                    else
                    {
                            nearestValue= greaterThanTarget;
                    }
                } 
```

# bash - 使用heredoc重定向命令的输出

> ID：10894554
> 
> 赞同：4
> 
> 时间：2012-06-05T09:12:09.173
> 
> 标签：bash, heredoc, zenity

我有这样的命令：

```
sftp user@host <<EOF
put file.txt
exit
EOF 
```

现在我想将它的输出通过管道传输到`zenity --progress`，但我找不到放置它的地方。

```
# SFTP doesn't work anymore
sftp user@host | zenity --progress <<EOF
put file.txt
exit
EOF

# Invalid syntax, no end of heredoc
sftp user@host <<EOF
put file.txt
exit
EOF | zenity --progress

# Not picked as part of the command
sftp user@host <<EOF
put file.txt
exit
EOF
| zenity --progress

# Does not help
sftp user@host | zenity --progress <<EOF
put file.txt
exit
EOF\
| zenity --progress 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-05T09:19:10.673

这应该可以解决问题：

```
sftp user@host <<EOF | zenity --progress
...
EOF 
```

# java - HashTable 和 HashMap key-value 是如何存储在内存中的？

> ID：10894558
> 
> 赞同：18
> 
> 时间：2012-06-05T09:12:14.930
> 
> 标签：java, hashmap, hashtable

我知道有一种散列技术应用于键以将其值存储在内存地址中。

但我不明白这里**的碰撞是如何发生的**？**Java 使用哪种散列算法来创建内存空间**？是MD5吗？

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2012-06-05T09:45:21.807

的基本思想`HashMap`是这样的：

1.  A`HashMap`实际上是一个包含 Key 和 Value 的特殊对象数组。
2.  该数组有一定数量的桶（槽），比如 16 个。
3.  散列算法由`hashCode()`每个对象具有的方法提供。因此，当您编写新的 时`Class`，您应该注意正确的`hashCode()`方法`equals()`实现。默认的（`Object`类）将内存指针作为一个数字。但这对于我们想要使用的大多数类来说并不好。例如，`String`该类使用一种算法，从字符串中的所有字符生成散列 - 可以这样想：（`hashCode = 1.char + 2.char + 3.char...`简化）。因此，两个相等的字符串，即使它们位于内存中的不同位置，也具有相同的`hashCode()`.
4.  的结果`hashCode()`，比如说“132”，如果我们有一个那么大的数组，那么应该存储对象的桶数。但我们没有，我们的只有 16 个桶长。因此，我们使用明显的计算`'hashcode % array.length = bucket'`或`'132 mod 16 = 4'`将键值对存储在 4 号存储桶中。
5.  *   如果还没有另一对，没关系。
    *   如果有一个 Key 等于我们拥有的 Key，我们删除旧的。
    *   如果有另一个键值对（冲突），我们将新的在旧的之后链接到一个链表中。
6.  如果后备数组变得太满，那么我们将不得不创建太多的链表，我们创建一个长度加倍的新数组，重新散列所有元素并将它们添加到新数组中，然后处理旧数组。这很可能是 上最昂贵的操作`HashMap`，因此如果您以前知道的话，您想告诉您`Maps`将使用多少个存储桶。
7.  如果有人试图获取一个值，他会提供一个键，我们对其进行散列、修改，然后通过潜在的链表进行精确匹配。

[图片由维基百科提供：](http://en.wikipedia.org/wiki/Hash_table#Separate_chaining_with_list_heads) ![图形](../Images/0b9db38fa4980230d1c5d60340a6105f.png)

在这种情况下，

*   有一个包含 256 个桶的数组（编号，当然是 0-255）
*   有五个人。它们的哈希码在通过后`mod 256`，指向数组中的四个不同的插槽。
*   你可以看到 Sandra Dee 没有空位，所以她被锁在 John Smith 之后。

现在，如果您尝试查找 Sandra Dee 的电话号码，您将散列她的姓名，将其修改为 256，然后查看存储桶 152。在那里您会找到 John Smith。那不是 Sandra，再看远点……啊哈，Sandra 被锁在 John 身后。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-05T09:17:40.190

这里`Hash`并不意味着[MD5](http://en.wikipedia.org/wiki/MD5)[`Hashing`](http://en.wikipedia.org/wiki/Hash_function)等技术。它是用于存储特定键的内存位置的[HashCode 。](http://en.wikipedia.org/wiki/Java_hashCode%28%29)`Object`

读数：

*   [Java hashmap 是如何工作的？](https://stackoverflow.com/a/6493946/803285)
*   [HashMap 在 Java 中的工作原理](http://javarevisited.blogspot.in/2011/02/how-hashmap-works-in-java.html)

[这](http://mkbansal.wordpress.com/2010/06/24/hashmap-how-it-works/)是对 HashMap 如何工作的更清晰的解释？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-05T09:14:20.140

作为类中的默认实现 `hashCode()`函数，`Object`将内存地址作为哈希值返回，用作`HashTable`&中的键`HashMap`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-10-22T19:44:38.500

经过@Slanec 的回答后，请查看 Java-8 中的 javadoc，因为有重大变化。例如：“TREEIFY”，其中 LinkedList 被转换为 TreeMap，以防达到每个桶的条目数阈值（当前为 8）。

# css - 关于基本 CSS 类和层次结构 - 不影响所有页面元素

> ID：10894568
> 
> 赞同：0
> 
> 时间：2012-06-05T09:12:28.487
> 
> 标签：css, styles, stylesheet

我有以下示例做我想做的事：

```
<style>
div { position: relative; padding-top: 30px; display: block; }
div h3 { position: absolute; top: 0px; left: 0px; display: block; }
div h3 a { width: 200px; height: 230px; display: block; }
div img { width: 200px; height: 200px; display: block; }
</style>

<div>
 <h3><a href="/xxxx/abcd.htm">linker</a></h3>
 <img src="/xxxx/abcd.jpg" alt="linker image" />
</div> 
```

明显的问题是它会影响页面上的所有项目，而不仅仅是所需的 div。如何在不丢失层次结构且不影响所有页面元素的情况下将其放入正确的类结构中。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T09:17:01.480

阅读更多关于 css 中的后代选择器的信息：http: [//www.w3.org/TR/CSS2/selector.html#descendant-selectors](http://www.w3.org/TR/CSS2/selector.html#descendant-selectors)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T09:15:05.600

使用`class`es 和`ID`s。它们用于解决您的问题 - 区分元素。`ID`s 需要在整个文档中是唯一的，而`class`es 可以出现多次。一个元素也可以有多个类（空格分隔列表），但只有一个 ID。

```
<div id="unique-id" class="class1 class2 class2">    
    <h3 class="child-h3"><a href="/xxxx/abcd.htm">linker</a></h3>
</div> 
```

在 CSS 中：

```
#unique-id{
   ...styles
}

#unique-id h3,
#unique-id child-h3{ /* both selectors will match the same element*/
    ...styles
}

.class1{
   ...styles
} 
```

你可以在这里找到一个简短的教程：http: [//www.tizag.com/cssT/cssid.php](http://www.tizag.com/cssT/cssid.php)

另外，您可能想查看**选择器**：[http ://www.w3.org/TR/CSS2/selector.html](http://www.w3.org/TR/CSS2/selector.html)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-06-05T09:17:02.917

这是更好更简单的方法..

```
<style>
.div { position: relative; padding-top: 30px; display: block; }
.div h3 { position: absolute; top: 0px; left: 0px; display: block; }
.div h3 a { width: 200px; height: 230px; display: block; }
.div img { width: 200px; height: 200px; display: block; }
</style>

<div class='div'>
 <h3><a href="/xxxx/abcd.htm">linker</a></h3>
 <img src="/xxxx/abcd.jpg" alt="linker image" />
</div> 
```

# java - Android L2TP 连接到服务器

> ID：10894571
> 
> 赞同：2
> 
> 时间：2012-06-05T09:12:43.823
> 
> 标签：java, android, connection, authorization, vpn

这是我的希望信。我正在使用 android 4.* 创建到服务器的 l2tp 连接。问题在于授权。我有一个服务器密钥、用户登录名和密码。我在互联网上搜索任何解决方案，不仅适用于 android，而且完全适用于 java，并且没有找到任何代码示例。我不知道如何在服务器上授权。android 示例中的 ToyVpn 没有帮助，它只是常规连接的示例（未经任何授权）。请有人帮忙！对于这个问题中的任何有用信息，我将不胜感激。

# android - Android 按文件夹列出音乐并播放

> ID：10894576
> 
> 赞同：2
> 
> 时间：2012-06-05T09:13:01.653
> 
> 标签：android, android-music-player

我正在开发已经上市的安卓音乐播放器。用户要求添加文件夹视图以列出智能手机中包含音乐的所有文件夹，我想开发它。

MediaStore 已经知道要遵循的正确路径（因为它需要知道它们以每次重新扫描 sdcard）所以我想知道是否有办法获取这些路径并使用它们向用户显示音乐。

获取这些路径的另一种选择（但我不喜欢它）是在 MediaStore 中查询库中的所有音乐并循环它们以获取公共基本路径。但如果用户拥有超过 1/2k 的音乐，这将是一种巨大且未优化的方式。

你知道我该如何解决吗？

我也在考虑列出 sdcard 中的所有文件夹和文件，但我遇到了一些递归问题，因为我不想显示：

*   不是音频文件（已经使用 FileFilter 完成）
*   不显示空文件夹（已经完成但有递归问题）
*   不显示带有 .nomedia 文件的文件夹（这告诉我没有任何媒体文件，但存在递归问题）。其他应用程序创建的许多文件夹也没有放置 .nomedia 文件，所以我必须向它们展示

你怎么看待这件事？

**更新**：我想做的是这样的：[https](https://play.google.com/store/apps/details?id=cyberniko.musicFolderPlayer) ://play.google.com/store/apps/details?id=cyberniko.musicFolderPlayer我想显示有音乐的文件夹并允许用户开始播放所选文件夹中的音乐。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T13:28:00.297

正如我所说的，一种可能的解决方案是使用我编写的 FileFilter 开始扫描 SDCard 中的所有目录：

此 AudioFilter 应用于返回所有歌曲文件（检查扩展名）的目录以及包含歌曲但不包含 .nomedia 的所有目录

无论如何，需要跳过此解决方案，因为加载 dir 列表需要很长时间（因为递归 alg）

```
package com.designfuture.music.util;

import java.io.File;
import java.io.FileFilter;
import java.io.FilenameFilter;
import java.util.ArrayList;

import com.designfuture.framework.util.LogHelper;

public class AudioFileFilter implements FileFilter {

    protected static final String TAG = "AudioFileFilter";
    /**
     * allows Directories
     */
    private final boolean allowDirectories;

    public AudioFileFilter( boolean allowDirectories) {
        this.allowDirectories = allowDirectories;
    }

    public AudioFileFilter() {
        this(true);
    }

    @Override
    public boolean accept(File f) {
        if ( f.isHidden() || !f.canRead() ) {
            return false;
        }

        if ( f.isDirectory() ) {
            return checkDirectory( f );
        }
        return checkFileExtension( f );
    }

    private boolean checkFileExtension( File f ) {
        String ext = getFileExtension(f);
        if ( ext == null) return false;
        try {
            if ( SupportedFileFormat.valueOf(ext.toUpperCase()) != null ) {
                return true;
            }
        } catch(IllegalArgumentException e) {
            //Not known enum value
            return false;    
        }
        return false; 
    }

    private boolean checkDirectory( File dir ) {
        if ( !allowDirectories ) {
            return false;
        } else {
            final ArrayList<File> subDirs = new ArrayList<File>();
            int songNumb = dir.listFiles( new FileFilter() {

                @Override
                public boolean accept(File file) {
                    if ( file.isFile() ) {
                        if ( file.getName().equals( ".nomedia" ) )
                            return false;

                        return checkFileExtension( file );
                    } else if ( file.isDirectory() ){
                        subDirs.add( file );
                        return false;
                    } else
                        return false;
                }
            } ).length;

            if ( songNumb > 0 ) {
                LogHelper.i(TAG, "checkDirectory: dir " + dir.toString() + " return true con songNumb -> " + songNumb );
                return true;
            }

            for( File subDir: subDirs ) {
                if ( checkDirectory( subDir ) ) {
                    LogHelper.i(TAG, "checkDirectory [for]: subDir " + subDir.toString() + " return true" );
                    return true;
                }
            }
            return false;
        }       
    }

    private boolean checkFileExtension( String fileName ) {
        String ext = getFileExtension(fileName);
        if ( ext == null) return false;
        try {
            if ( SupportedFileFormat.valueOf(ext.toUpperCase()) != null ) {
                return true;
            }
        } catch(IllegalArgumentException e) {
            //Not known enum value
            return false;    
        }
        return false; 
    }

    public String getFileExtension( File f ) {
        return getFileExtension( f.getName() );
    }

    public String getFileExtension( String fileName ) {
        int i = fileName.lastIndexOf('.');
        if (i > 0) {
            return fileName.substring(i+1);
        } else 
            return null;
    }

    /**
     * Files formats currently supported by Library
     */
    public enum SupportedFileFormat
    {
        _3GP("3gp"),
        MP4("mp4"),
        M4A("m4a"),
        AAC("aac"),
        TS("ts"),
        FLAC("flac"),
        MP3("mp3"),
        MID("mid"),
        XMF("xmf"),
        MXMF("mxmf"),
        RTTTL("rtttl"),
        RTX("rtx"),
        OTA("ota"),
        IMY("imy"),
        OGG("ogg"),
        MKV("mkv"),
        WAV("wav");

        private String filesuffix;

        SupportedFileFormat( String filesuffix ) {
            this.filesuffix = filesuffix;
        }

        public String getFilesuffix() {
            return filesuffix;
        }
    }

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-06T10:33:35.603

> MediaStore 已经知道要遵循的正确路径（因为它需要知道它们以在每次 sdcard 时重新扫描）所以我想知道是否有办法获取这些路径并使用它们向用户显示音乐。

`MediaStore`扫描所有外部存储，AFAIK，而不仅仅是一些特定的根文件夹。

# iphone - 如何对核心数据获取结果进行排序

> ID：10894578
> 
> 赞同：0
> 
> 时间：2012-06-05T09:13:16.123
> 
> 标签：iphone, objective-c, core-data

嗨，我需要对获取结果进行排序，这是我的代码

```
NSManagedObjectContext *context = [appDelegate managedObjectContext]; 

NSError *error1;
NSEntityDescription *entityDesc;
NSFetchRequest *fetchRequest = [[NSFetchRequest alloc] init];
entityDesc=[NSEntityDescription entityForName:@"SubCategoryEntity" inManagedObjectContext:context];
[fetchRequest setEntity:entityDesc];
NSSortDescriptor *sortDescriptor = [[NSSortDescriptor alloc]
                                            initWithKey:@"subCategoryId" ascending:NO];
[fetchRequest setSortDescriptors:[NSArray arrayWithObject:sortDescriptor]];
[sortDescriptor release];
NSArray *array = [context executeFetchRequest:fetchRequest error:&error1]; 
```

在这里我使用“子类别”字符串类型，所以它以“个位数”显示正确的顺序，但它不能以“双位数”工作

这是我在数“11”“9”，“8”，“7”，“6”，“5”，“4”，“3”，“2”，“1”，“10”后得到的订单， “0”

在这里我需要显示 "10","9","8","7","6","5","4","3","2","1","0"

我不知道为什么会发生任何人都可以帮助我

感谢提前。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T09:23:00.443

您以这种方式获得订单，因为这就是字符串排序的工作方式。您可以尝试在自定义类中使用`NSSortDescriptor`with custom `compareSubCategoryId:`selector for .`SubCategory``SubCategoryEntity`

**更新**

像这样初始化您的排序描述符：

```
NSSortDescriptor *sortDescriptor = [[NSSortDescriptor alloc] initWithKey:@"subCategoryId" 
                                                           ascending:NO
                                                            selector:@selector(compareSubCategoryId:)]; 
```

然后向您的自定义`NSManagedObject`子类添加一个方法：

```
- (NSComparisonResult)compareSubCategoryId:(id)otherObject {
  int ownSubCatId = [[self subCategoryId] intValue];
  int otherSubCatId = [[otherObject subCategoryId] intValue];

  if (ownSubCatId < otherSubCatId) return NSOrderedAscending;
  if (ownSubCatId > otherSubCatId) return NSOrderedDescending;
  return NSOrderedSame;
} 
```

# c# - 如何使用 HttpWebRequest 发送大型 URI

> ID：10894582
> 
> 赞同：1
> 
> 时间：2012-06-05T09:13:31.360
> 
> 标签：c#, .net, httpwebrequest, uri

我正在使用这些行从我公司的服务器中获取数据

```
HttpWebRequest request = (HttpWebRequest)WebRequest.Create(url);
request.Credentials = new NetworkCredential(usr, pass);
ServicePointManager.ServerCertificateValidationCallback = ((sender, certificate, chain, sslPolicyErrors) => true);
HttpWebResponse response = (HttpWebResponse)request.GetResponse(); 
```

它工作得很好，但问题是当我发送这样的大 URL 时：

```
https://172.16.100.1:5002/arx/eventexport?num_events=-1&start_date=1335079800000&end_date=1335382199000&filter=<filter><name><mask>controller.door.closed</mask><mask>controller.notification.digitalOutputChanged</mask><mask>controller.dac.eventBufferOverflow</mask><mask>controller.door.forcedOpen</mask><mask>controller.door.notClosed</mask><mask>controller.door.opened</mask><mask>controller.dac.powerOn</mask><mask>controller.door.pulseOpen</mask><mask>controller.door.pulseOpenRequest</mask><mask>controller.door.requestToExit</mask><mask>controller.reader.duress.alarm</mask><mask>controller.access.card.valid.standard</mask><mask>controller.access.card.invalid.inhibited</mask><mask>controller.access.card.invalid.pin</mask><mask>controller.access.card.invalid.pinMode</mask><mask>controller.access.card.invalid.door</mask><mask>controller.reader.invalid.format</mask><mask>controller.access.card.invalid.operatorControl</mask><mask>controller.access.card.invalid.pinAttempts</mask><mask>controller.access.card.invalid.pinTimeout</mask><mask>controller.access.card.invalid.zone.antipassback</mask><mask>controller.access.card.invalid.time.antipassback</mask><mask>controller.access.card.valid.pin</mask><mask>controller.reader.communicationFailure.active</mask><mask>controller.reader.communicationFailure.restored</mask><mask>controller.intrusionarea.blockingInput.closed</mask><mask>controller.intrusionarea.blockingInput.open</mask><mask>controller.notification.digitalInput1Closed</mask><mask>controller.notification.digitalInput1Opened</mask><mask>controller.dac.input2closed</mask><mask>controller.dac.input2opened</mask><mask>controller.dac.input4closed</mask><mask>controller.dac.input4opened</mask><mask>controller.dac.inputChanged</mask><mask>controller.door.mode.buzzerEnabled</mask><mask>controller.door.mode.conference</mask><mask>controller.door.mode.rteMaintainedUnlock</mask><mask>controller.door.mode.motorlockLowSecurity</mask><mask>controller.door.mode.unlocked</mask><mask>controller.door.mode.access.accessInhibited</mask><mask>controller.door.mode.access.buyAlarmtime</mask><mask>controller.door.mode.access.pinOnlyAllowed</mask><mask>controller.door.mode.access.dualCardsRequired</mask><mask>controller.door.mode.access.pinCardNumber</mask><mask>controller.door.mode.access.modePinRequired</mask><mask>controller.door.mode.access.modeSiteCodeOnly</mask><mask>controller.door.mode.access.apEnabled</mask><mask>controller.door.mode.exit.accessInhibited</mask><mask>controller.door.mode.exit.apEnabled</mask><mask>controller.door.mode.exit.buyAlarmtime</mask><mask>controller.door.mode.exit.dualCardsRequired</mask><mask>controller.door.mode.exit.pinCardNumber</mask><mask>controller.door.mode.exit.pinOnlyAllowed</mask><mask>controller.door.mode.exit.modePinRequired</mask><mask>controller.door.mode.exit.modeSiteCodeOnly</mask><mask>controller.door.motorlock.dayLocked</mask><mask>controller.door.motorlock.initJumperInstalled</mask><mask>controller.door.motorlock.locked</mask><mask>controller.door.motorlock.nightLocked</mask><mask>controller.door.motorlock.tubTurned</mask><mask>controller.door.motorlock.unlocked</mask><mask>controller.door.motorlock.error.encryptionFault</mask><mask>controller.door.motorlock.error.failedToLock</mask><mask>controller.door.motorlock.error.failedToUnlock</mask><mask>controller.door.motorlock.error.problemAtLock</mask><mask>controller.door.motorlock.error.problemAtPermanentUnlock</mask><mask>controller.door.motorlock.error.problemAtUnlock</mask><mask>controller.door.motorlock.error.seriousProblemAtLock</mask><mask>controller.notification.powerFault.active</mask><mask>controller.notification.powerFault.restored</mask><mask>controller.reader.tamper.active</mask><mask>controller.notification.tamper.restored</mask></name></filter> 
```

我得到了这个例外

> {“远程服务器返回错误：(414) 请求 URI 太大。”}

在这一行：

```
HttpWebResponse response = (HttpWebResponse)request.GetResponse(); 
```

那么如何使用 HttpWebRequest 发送大型 URI？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T09:40:52.370

414 错误代码是由于 URI 太长，正如您所提到的，如果您/您的公司拥有该服务器，则可以在 Web 服务器上设置支持的 URI 的长度，然后您可以更改此设置以满足您的需求，有关更多信息，请转到[在这里](http://www.iis.net/ConfigReference/system.webServer/security/requestFiltering/requestLimits)，

但我想你应该在这里改变你的方法，因为你的 URI 的 80% 是过滤参数，你应该找到一些其他方法来缩短该参数，因为你可以使用比 XML 更短的 JSON 并且可以用于数据通信

# email - 有没有办法从 OWA 备份电子邮件？

> ID：10894583
> 
> 赞同：4
> 
> 时间：2012-06-05T09:13:47.483
> 
> 标签：email, outlook, email-client, outlook-web-app

我在 IE8 上使用 OWA，并且没有安装任何电子邮件客户端，例如 Outlook。我们只是使用 OWA 在浏览器中访问电子邮件。是否有备份电子邮件的脚本（可能是刮板）？

我该如何编写这样的脚本，是否有 OWA API？

我用谷歌搜索了很多，但每个解决方案首先将 OWA 同步到 Exchange 或 Outlook 或其他一些电子邮件客户端，然后将其备份。我没有那种奢侈。

我已经安装了 python，所以一个用 python 编写的简单电子邮件客户端脚本也会很有帮助，如果它可以以某种方式配置为登录并读取来自 OWA 的电子邮件。

谢谢 ！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-02-23T04:25:40.180

[http://davmail.sourceforge.net/](http://davmail.sourceforge.net/)可用作代理以通过 IMAP 和 POP3 公开 OWA 文件夹。

> DavMail 的主要目标是在专有 Exchange 之前提供符合标准的协议。这意味着.. IMAP 浏览服务器上任何文件夹中的邮件，POP 仅检索收件箱邮件，.. 因此任何符合标准的客户端都可以与 Microsoft Exchange 一起使用。

那么问题就变成了如何备份 IMAP 或 POP3 服务器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-09T15:58:23.907

据我所知，不可能从 OWA 批量导出邮件。

正如您所建议的，唯一的方法是使用 Outlook ..

# r - 使用蒙特卡罗方法模拟卡方检验的 p 值

> ID：10894584
> 
> 赞同：1
> 
> 时间：2012-06-05T09:13:48.353
> 
> 标签：r, testing, statistics, simulation

我正在尝试在 R 中编写一个脚本，该脚本允许通过模拟 Pearson Chi Squared 测试的临界值（p 值）来近似，并采用不同的 alpha 值。

我知道“chisq.test”中存在一个选项，但我想知道如何手动进行此模拟。

例如：

[请在http://www.biostat.wisc.edu/~kbroman/teaching/stat371/comp21.R](http://www.biostat.wisc.edu/~kbroman/teaching/stat371/comp21.R)查看代码（我不知道如何正确放置代码）

如果您检查最后一部分（“模拟 p 值”），您将看到在脚本中获取 p 值的方式。我想这样做，但采用不同的 alpha 值。

非常感谢你！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T13:05:57.407

如果您的意思是显着性水平，那么任何统计测试的 p 值的**计算**（无论方法：经典、自举）都与 alpha 值无关。在决定接受或拒绝原假设时，您需要 alpha 值（如果 p 值小于**选择**的 alpha，则拒绝原假设）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-05T13:28:52.670

如果您已按照脚本中所示进行了模拟，并导出了模拟值向量，则 alpha*水平*`xsqsim`的临界值`alpha`约为

 *```
quantile(xsqsim,1-alpha) 
```

如果你有一个小样本，你必须要小心一点，因为临界值应该是检验统计量*q*的值，使得观察值大于**或等于** *q*的概率等于 alpha ...*

# c# - 多行文本框有大量数据，导致应用程序在调整窗口大小时挂起

> ID：10894585
> 
> 赞同：2
> 
> 时间：2012-06-05T09:13:50.433
> 
> 标签：c#, .net, wpf, .net-3.5

在我的 WPF 应用程序中，WPF 倍数`TextBox`从 WCF 服务中填充了非常大的数据。现在，当我尝试选择该应用程序的所有文本`TextBox`或调整其父窗口的大小时，`TextBox`该应用程序将完全挂起 1-2 分钟。有什么具体的解决方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T10:57:59.130

一个相关的问题和答案[在这里](https://stackoverflow.com/questions/11048179/poor-textbox-performance-with-wrapping-on-and-large-amounts-of-data/11053170#11053170)

尝试在 xaml 中关闭 TextWrapping 或处理 windowResizeStart 事件以禁用换行，直到调整大小完成。

# android-layout - 如何在大屏幕上启用智能手机大小的 Android 应用程序

> ID：10894594
> 
> 赞同：0
> 
> 时间：2012-06-05T09:14:30.017
> 
> 标签：android-layout, android

我的问题可以总结在一张图片中，可以在这个位置看到：http: [//imgur.com/qOiyl](http://imgur.com/qOiyl)

该应用程序最初是为智能手机开发的，在小分辨率上没有问题，应用程序会填满整个屏幕。但在平板电脑中，如您所见，仅使用与智能手机对应的尺寸。

我猜这意味着某处的高度和宽度值很难设置。但我看不到在哪里！在哪里可以为所有应用程序设置高度和宽度（所有活动都在做同样的事情）。

这是我的 AndroidManifest.xml ：

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="com.dombox.app"
android:versionCode="11"
android:versionName="2.0.4" >

<uses-sdk android:minSdkVersion="3" />

<uses-permission android:name="android.permission.WRITE_SETTINGS" >
</uses-permission>
<uses-permission android:name="android.permission.INTERNET" >
</uses-permission>
<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" >
</uses-permission>
<uses-permission android:name="android.permission.ACCESS_WIFI_STATE" >
</uses-permission>

<application
    android:icon="@drawable/icon"
    android:label="@string/app_name" >
    <activity
        android:name=".activity.DomboxHome"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>

    <uses-library android:name="android.test.runner" />

    <activity
        android:name=".activity.list.ZonesList"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="Dombox.MENU" />
        </intent-filter>
    </activity>
    <activity
        android:name=".activity.list.EquipementsList"
        android:label="@string/app_name" >
    </activity>
    <activity
        android:name=".activity.PullToRefreshActivity"
        android:label="@string/app_name" >
    </activity>
    <activity android:name="org.achartengine.GraphicalActivity" />

    <instrumentation
        android:name="android.test.InstrumentationTestRunner"
        android:label="Tests for Android Dombox"
        android:targetPackage="com.application.androiddombox" >
    </instrumentation>
    <activity
        android:name=".activity.list.SuiviConsoList"
        android:label="@string/app_name" >
    </activity>
    <activity android:name=".activity.list.PlanningList"       android:label="@string/app_name"></activity>
</application> 
```

这是我的布局之一（都在文件夹/res/layout/中）

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout
xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:orientation="horizontal">
<fragment
    android:name="com.dombox.app.fragment.MenuFragment"
    android:layout_width="0dp"
    android:layout_height="fill_parent"
    android:id="@+id/menu_fragment"
    android:layout_weight="30">
    <!-- Preview: layout=@layout/list_text -->
</fragment>

<fragment
    android:name="com.dombox.app.fragment.SettingsFragment"
    android:layout_width="0dp"
    android:layout_height="fill_parent"
    android:id="@+id/settings_fragment"
    android:layout_weight="70">
    <!-- Preview: layout=@layout/settings -->
</fragment>
</LinearLayout> 
```

你有什么主意吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T09:25:03.780

我认为您的应用程序正在以兼容模式运行，请将这段代码`<application>`放在清单文件中的标记之前。

```
<supports-screens android:largeScreens="true"
android:normalScreens="true" android:smallScreens="true"
android:anyDensity="true" android:xlargeScreens="false" /> 
```

希望有效，

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T09:21:42.693

我认为你需要设置`android:weightSum="100"`你的**LinearLayout**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-05T09:23:27.307

您可以尝试添加

```
<supports-screens android:xlargeScreens="true" /> 
```

在 AndroidManifest.xml 中。这告诉系统您的应用程序与超大屏幕（平板电脑）兼容，并且您的应用程序应该被拉伸以填满屏幕。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-05T09:35:42.867

是的，你显然错过了重要的东西之一。

您的清单文件中没有[支持屏幕](http://developer.android.com/guide/topics/manifest/supports-screens-element.html)标记，因此默认情况下“normalScreens”设置为 true，其他所有设置为 false。

[这是有关支持多分辨率的更多信息的链接。](http://developer.android.com/guide/practices/screens_support.html)

[还要检查这个链接](http://developer.android.com/guide/practices/tablets-and-handsets.html)

# objective-c - 未调用 CoreLocation 区域代表

> ID：10894600
> 
> 赞同：2
> 
> 时间：2012-06-05T09:15:01.060
> 
> 标签：objective-c, ios, gps, core-location

我正在构建一个应用程序，特别是一个基于位置的应用程序，所以我需要让用户坐标经度和纬度及其工作。

现在我需要知道用户是否进入了我使用`CLLocationManager`委托预定义的某个区域，因此我`didEnterRegion`用一个语句覆盖了该`NSLog`语句以了解用户是否进入了该区域。

在

```
-(void)locationManager:(CLLocationManager *)manager didUpdateToLocation:(CLLocation *)newLocation fromLocation:(CLLocation *)oldLocation 
```

我称之为，`startMonitoringForRegion:`但在像`didEnterRegion`或`monitoringDidFailForRegion`或任何`CLRegion`.

这是我的一些代码：

```
 -(void)locationManager:(CLLocationManager *)manager didUpdateToLocation:(CLLocation *)newLocation fromLocation:(CLLocation *)oldLocation
   {
        locLongittude=newLocation.coordinate.longitude;
        locLattiude=newLocation.coordinate.latitude;

        self.regionTimer=[NSTimer scheduledTimerWithTimeInterval:3 target:self selector:@selector(monitorRegion) userInfo:nil repeats:NO];
   }

   -(void)startMonitor:(float)latitude longitude:(float)longitude radius:(float)radius
   {
      CLLocationCoordinate2D home;
      home.latitude = latitude;
      home.longitude = longitude;

      CLRegion* region = [[CLRegion alloc] initCircularRegionWithCenter:home radius:radius identifier:@"home"];

      if([CLLocationManager regionMonitoringEnabled] && [CLLocationManager regionMonitoringAvailable])
          [locManager startMonitoringForRegion:region desiredAccuracy:kCLLocationAccuracyBest]; 

      NSLog(@"Count: %d region aval %d enable %d",[[locManager monitoredRegions]count], [CLLocationManager regionMonitoringAvailable],[CLLocationManager regionMonitoringEnabled]);
      for( CLRegion* region in locManager.monitoredRegions )
      NSLog( @"%@", region );
   }

   -(void)monitorRegion
   {
      [self startMonitor:31.971160 longitude:35.832465 radius:10000.0];
   } 
```

编辑：使用模拟器完成所有测试并使用 Product-> Debug -> Simulate Location 模拟位置

好的，伙计们，它有效。上面的代码很好用，问题是要使`didEnterRegion`方法被调用是在您需要输入的区域之外，然后您输入它以使其工作。

我所做的是在模拟中我总是在我需要输入的区域内选择一个坐标，这就是它必须在该区域之外的问题。

所以这是我的代码与您分享

更新：我想知道为什么当我离开该区域时没有调用 didExitRegion ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-31T11:50:05.707

根据我自己的经验，Region Monitoring 似乎依赖于 Cell Change 事件（为什么 Apple 会这样设计？我想是为了延长电池寿命）。所以，这个实现并不理想。

理想情况下，只要您越过边界，它就应该可以工作，但在 iPhone 上却不会以同样的方式发生。即使使用内置的提醒应用程序，有时它也会通过基于位置的提醒在附近失败。

因此，在您的情况下，我认为单元格更改事件不会发生，这就是为什么不调用 didExitRegion 的原因。您可以使用 startMonitoringSignificantLocationChanges 仔细检查它。

# android - 如何在android中将libgdx添加为子视图

> ID：10894601
> 
> 赞同：23
> 
> 时间：2012-06-05T09:15:04.547
> 
> 标签：android, libgdx

我有 main.xml 如下：

```
 <RelativeLayout>
     ...
     <FrameLayout
                    android:id="@+id/panel_sheet"
                    android:layout_width="match_parent"
                    android:layout_height="match_parent">

        <com.libgdx.Sheet3DViewGdx 
                android:id="@+id/m3D"
                android:layout_width="1000dp"
                android:layout_height="600dp"
        />

    </FrameLayout>

...
</RelativeLayout> 
```

我的主要活动课程如下：

```
public class Test extends Activity {

    MainActivity  m3DActivity;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
    }
} 
```

我的 GDX 类如下扩展 ApplicationListener 类而不是 View。

```
public class Sheet3DViewGdx implements ApplicationListener{

    @Override
    public void create() {
        InputStream in = Gdx.files.internal("data/obj/Human3DModel.obj").read();
        model =  ObjLoader.loadObj(in);
    }

    @Override
    public void dispose() {
    }

    @Override
    public void pause() {
    }

    @Override
    public void render() {
        Gdx.gl.glClearColor(0.0f, 0.0f, 0.0f, 1.0f);
        Gdx.gl.glClear(GL10.GL_COLOR_BUFFER_BIT | GL10.GL_DEPTH_BUFFER_BIT);
        model.render(GL10.GL_TRIANGLES);
    }

    @Override
    public void resize(int arg0, int arg1) {
        float aspectRatio = (float) arg0 / (float) arg1;
    }

    @Override
    public void resume() {
    }
} 
```

现在，我应该如何在主布局中添加 Sheet3DViewGdx 作为子视图？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-06-05T15:17:52.773

AndroidApplication 类（它扩展了活动）有一个名为的方法，该方法`initializeForView(ApplicationListener, AndroidApplicationConfiguration)`将返回一个`View`您可以添加到布局中的方法。

因此，您的 Test-class 可以扩展 AndroidApplication 而不是 Activity，以便您可以调用该方法并将 View 添加到您的布局中。

如果由于某种原因这不是一个选项，请查看[AndroidApplication 源代码](https://github.com/libgdx/libgdx/blob/master/backends/gdx-backend-android/src/com/badlogic/gdx/backends/android/AndroidApplication.java#L223)的作用，并模仿它。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2016-08-09T17:18:54.457

我[在 github 上创建了一个 Hello World 程序，](https://github.com/kbigdelysh/libgdx-in-fragment)用于使用 Android Studio 2.1 在片段中运行的 libgdx。它遵循[官方 libgdx wiki 上的说明](https://github.com/libgdx/libgdx/wiki/Starter-classes-%26-configuration#fragment-based-libgdx)。

[![在此处输入图像描述](../Images/a93d5e26c606f13bb9847830e55507ef.png)](https://i.stack.imgur.com/5i3gU.png)

AndroidLauncher 类：

```
import android.os.Bundle;
import android.support.v4.app.FragmentActivity;
import com.badlogic.gdx.backends.android.AndroidFragmentApplication;

public class AndroidLauncher extends FragmentActivity implements  AndroidFragmentApplication.Callbacks {
    @Override
    public void onCreate (Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        setContentView(R.layout.layout);

        // Create libgdx fragment
        GameFragment libgdxFragment = new GameFragment();

        // Put it inside the framelayout (which is defined in the layout.xml file).
        getSupportFragmentManager().beginTransaction().
                add(R.id.content_framelayout, libgdxFragment).
                commit();
    }

    @Override
    public void exit() {

    }

} 
```

GameFragment 类：

```
import android.os.Bundle;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;

import com.badlogic.gdx.backends.android.AndroidFragmentApplication;

public class GameFragment extends AndroidFragmentApplication{

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState)
    {
        // return the GLSurfaceView on which libgdx is drawing game stuff
        return initializeForView(new MyGdxGame());
    }
} 
```

布局.xml：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/main_layout"
    android:orientation="vertical"
    android:layout_width="match_parent"
    android:layout_height="match_parent">

    <FrameLayout
    android:id="@+id/content_framelayout"
    android:layout_width="match_parent"
    android:layout_height="0dp"
    android:layout_weight="2">
    </FrameLayout>

    <TextView
        android:layout_width="match_parent"
        android:layout_height="0dp"
        android:layout_weight="1"
        android:background="#FF0000"
        android:textColor="#00FF00"
        android:textSize="40dp"
        android:text="I'm just a TextView here with red background :("/>

</LinearLayout> 
```

MyGdxGame 类：

```
import com.badlogic.gdx.ApplicationAdapter;
import com.badlogic.gdx.Gdx;
import com.badlogic.gdx.graphics.Color;
import com.badlogic.gdx.graphics.GL20;
import com.badlogic.gdx.graphics.Texture;
import com.badlogic.gdx.graphics.g2d.BitmapFont;
import com.badlogic.gdx.graphics.g2d.SpriteBatch;

public class MyGdxGame extends ApplicationAdapter {
    SpriteBatch batch;
    Texture img;
    private BitmapFont font;

    @Override
    public void create () {
        batch = new SpriteBatch();
        img = new Texture("badlogic.jpg");
        font = new BitmapFont();
        font.setColor(Color.BLUE);
    }

    @Override
    public void render () {
        Gdx.gl.glClearColor(0, 0, 0, 0);
        Gdx.gl.glClear(GL20.GL_COLOR_BUFFER_BIT);

        batch.begin();

        //batch.draw(img, 0, 0);
        font.getData().setScale(6.0f);
        font.draw(batch, "Hello World from libgdx running in a fragment! :)", 100, 300);

        batch.end();
    }

    @Override
    public void dispose () {
        batch.dispose();
        img.dispose();
    }
} 
```

确保您已添加以下内容：

```
compile "com.android.support:support-v4:24.1.1" 
```

到项目 (":android") 部分内的 "dependencies {.}" 部分中的项目 gradle 脚本。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2014-12-04T14:54:48.180

使用 libgdx 项目作为 Android 应用程序中的视图现在已清楚地记录在[libgdx wiki 中的示例代码，作为片段实现](https://github.com/libgdx/libgdx/wiki/Starter-classes-and-configuration#fragment-based-libgdx)（现代 Android 应用程序的最佳实践）：

> 1.  将 Android V4 支持库添加到 -android 项目及其构建路径（如果尚未添加）。这是为了以后扩展 FragmentActivity 所必需的
> 2.  更改 AndroidLauncher 活动以扩展 FragmentActivity，而不是 AndroidApplication
> 3.  在 AndroidLauncher 活动上实现 AndroidFragmentApplication.Callbacks
> 4.  创建一个扩展 AndroidFragmentApplication 的类，它是 Libgdx 的 Fragment 实现。
> 5.  在 Fragment 的 onCreateView 方法中添加 initializeForView() 代码。
> 6.  最后，将 AndroidLauncher 活动内容替换为 Libgdx 片段。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2014-01-29T14:06:46.553

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    AndroidApplicationConfiguration cfg = new AndroidApplicationConfiguration();
    cfg.useGL20 = false;
    //initialize(new LoveHearts(), cfg);
    LinearLayout lg=(LinearLayout)findViewById(R.id.game);
    lg.addView(initializeForView(new LoveHearts(), cfg));
} 
```

# nosql - 建议 NoSQL 初学者

> ID：10894605
> 
> 赞同：2
> 
> 时间：2012-06-05T09:15:17.083
> 
> 标签：nosql

我打算开始学习 NoSQL。我从“Professional NoSQL”一书开始。书中有使用 CouchDB、Cassandra、MongoDB 等的示例。我的疑问是我应该安装所有不同的风格来完全学习 NoSQL 吗？对于开始学习 NoSQL 的人来说，首选哪个 NoSQL DB？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-05T09:42:17.647

StackOverflow 上已经有效地回答了这个问题。以下是以前讨论的一些链接以及其他博客和维基百科的链接 -

[https://stackoverflow.com/questions/5883326/nosql-databases](https://stackoverflow.com/questions/5883326/nosql-databases)

[NoSql 和数据仓库](https://stackoverflow.com/questions/2684462/nosql-and-data-warehouse)

nosql 维基百科页面包含大量信息，是一个很好的起点 - [http://en.wikipedia.org/wiki/NoSQL](http://en.wikipedia.org/wiki/NoSQL)。

所有的 nosql 供应商在他们的网站上都有教程 - 只需谷歌“mongodb 教程”或“couchdb 教程”等。

只有您可以决定哪个 sql db 不适合您 - 这取决于您的应用程序和数据，我猜您从技术角度对解决方案感到满意。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-05T09:18:26.020

我认为`redis`它很受欢迎并且很容易上手。

# 64-bit - 构建freetype2。未生成 libfreetype.a

> ID：10894606
> 
> 赞同：0
> 
> 时间：2012-06-05T09:15:39.700
> 
> 标签：64-bit, freetype, freetype2

我正在尝试构建freetype2。我在 x64 架构下使用 fedora 17。当我在 freetype 源目录中调用 make 命令时，只会生成 libfreetype.la（以及一些目标文件）。为什么我缺少 libfreetype.a ？

在 Ubuntu 11.10 和 32 位架构上，我编译了相同的并获得了 libfreetype.a。x64架构中是否有任何特殊程序？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T00:34:12.160

为了安全起见，请删除整个文件夹并解压缩包，以便我们知道您正在处理原始文件。然后执行以下操作：

```
./configure --enable-static
make 
```

这将生成静态库。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T22:40:17.430

具体回答您的最后一个问题：就在昨天，我在 MSYS 下成功编译了 x86_64-w64-mingw32 的 Freetype2 （git master，head revision），同时使用`--enable-static`and `--enable-shared`，它产生了静态 libfreetype.a 就好了。我没有做任何特别的事情，所以显然不需要特殊的程序。

如果您未指定`--enable-static`，则在最新版本的 Freetype 配置脚本中，默认情况下仍应将其设置为 YES。问题一定出在你的尽头。如果你现在还没有解决它，我建议你按照 Dustin Juliano 的建议去做。

# java - 使用 Java 将系统调用输出重定向到文件

> ID：10894608
> 
> 赞同：1
> 
> 时间：2012-06-05T09:15:48.487
> 
> 标签：java, multithreading, logging, file-io, iostream

目前无法将小型 Windows 批处理控制台的输出重定向到日志文件。我的 Java 应用程序需要启动 Runtime.exec() 调用而不等待它完成并仍然记录输出。这是我的记录器类：

```
public class BatchThreadLogger extends Thread {
  private Process process;
  private String logFilePath;
  private static final Logger logger = Logger.getLogger(BatchThreadLogger.class);

  public BatchThreadLogger(Process process, String logFilePath) {
    this.process = process;
    this.logFilePath = logFilePath;
  }

  public void run() {
    try {
      // create logging file
      File file = new File(logFilePath);
      file.createNewFile();

      // create a writer object
      OutputStream os = new FileOutputStream(file);
      PrintWriter pw = new PrintWriter(os);

      // catch the process output in an InputStream
      InputStreamReader isr = new InputStreamReader(process.getInputStream());
      BufferedReader br = new BufferedReader(isr);

      // wait for the process to complete
      int processStatus = process.waitFor();

      // redirect the output to the log file
      String line = null;
      while ((line = br.readLine()) != null) {
        pw.println(line);
      }

      // add a small message with the return code to the log
      pw.println("********************************************");
      pw.println("********************************************");
      pw.println("Batch call completed with return status " + processStatus);

      pw.flush();
      os.close();
    }
    catch (IOException e) {
      logger.error("IOException raised during batch logging on file " + logFilePath, e);
    }
    catch (InterruptedException e) {
      logger.error("InterruptedException raised during batch process execution", e);
    }
  }
} 
```

我的电话很简单：

```
Process process = Runtime.getRuntime().exec(command);
BatchThreadLogger logger = new BatchThreadLogger(process, logFilePath);
logger.start(); 
```

我的命令目前只是用两个参数调用我的 test.bat。我的测试批次现在只做：

```
echo "BATCH CALLED WITH PARAMETER %1 AND %2"
exit 
```

但是，我的日志文件仅包含：

```
********************************************
********************************************
Batch call completed with return status 0 
```

我试图在`waitFor()`将输出重定向到日志文件的代码之前和之后进行调用，但没有成功。我总是看到正在启动的命令的黑屏，但日志中没有任何内容......

任何帮助将不胜感激，我遗漏了一些东西，但无法理解......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T11:01:25.967

您没有从您创建的流程的标准错误中读取。

I suspect that an error message is being written to the standard error, and because you're only reading from standard output, you're not picking up this error.

I would recommend replacing your use of `Runtime.getRuntime().exec(...)` with a [ProcessBuilder](http://docs.oracle.com/javase/6/docs/api/java/lang/ProcessBuilder.html), using something like the following:

```
ProcessBuilder pb = new ProcessBuilder("cmd.exe", "/c", "test.bat", "One", "Two");
pb.redirectErrorStream(true);
Process process = pb.start(); 
```

The line `pb.redirectErrorStream(true);` redirects the process' standard error into its standard output, so that you don't have to read from two streams (standard output and standard error) in two separate threads.

# google-maps - GMAP API v2 密钥过期

> ID：10894614
> 
> 赞同：1
> 
> 时间：2012-06-05T09:16:09.493
> 
> 标签：google-maps

我已经生成了 GMAP API v2 密钥。在控制台窗口中 api 访问下方的报告部分中，它显示密钥在 28 天后过期。此密钥是否过期

# windows - 玩框架bat windows java进程

> ID：10894615
> 
> 赞同：7
> 
> 时间：2012-06-05T09:16:10.073
> 
> 标签：windows, playframework

我在 Windows 上将独立播放应用程序作为 Java 进程启动时遇到问题。我使用“play dist”命令来生成一个包含应用程序运行所需的所有 jar 的 zip 文件。zip 文件还包含“启动”文件，其中包含应该启动应用程序的脚本（在 Linux 服务器上运行良好）。

[我使用“play dist-unzip”命令https://github.com/typesafehub/play-plugins/tree/master/sbtgoodies](https://github.com/typesafehub/play-plugins/tree/master/sbtgoodies)找到了 sbtgoodies 插件。它工作正常，但我总是得到一个 unix 脚本“开始”。如何获得 Windows 脚本“start.bat”？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-06-06T07:54:23.230

带有以下命令行的 start.bat 应该可以工作：

```
java %1 -cp "./lib/*;" play.core.server.NettyServer . 
```

注意“;” 在 lib/* 之后以防止 Windows 预处理器扩展通配符

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T10:55:38.643

看起来您的类路径属性不同。你试过 -cp "staged/*"

# .net - 使用 Device.Device(Int32,DeviceType,Control,CreateFlags,PresentParameters[]) 构造函数 (Microsoft.DirectX.Direct3D) 创建 DirectX 设备

> ID：10894616
> 
> 赞同：0
> 
> 时间：2012-06-05T09:16:15.927
> 
> 标签：.net, wpf, directx

我是 DirectX 编程的新手，我对 DirectX 设备构造函数有这个疑问。根据微软的文档，我们可以使用创建设备

Device.Device(Int32,DeviceType,Control,CreateFlags,PresentParameters[]) 构造函数 (Microsoft.DirectX.Direct3D)。

第一个参数到底是什么意思？MS文档说

“适配器 System.Int32 标识对象代表的物理设备的序号。设备 0 是默认设备。此参数中可以使用的最高值是物理设备总数的 1。”

我们这里所说的物理设备是什么意思。我们指的是连接到系统的监视器吗？或者是别的什么？

另外，如果有多个显卡，我希望我的应用程序使用特定的显卡。有没有办法通过显卡列表进行枚举？我们可以强制我们的应用程序使用特定的显卡吗？如果是，我该怎么做？我曾尝试使用 AdapterInformation 类，但我相信这对应于连接的显示器而不是显卡。

任何帮助都会很有价值。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T13:31:06.553

第一个参数是显示适配器的编号。在大多数情况下，适配器相当于连接到计算机的物理监视器。

您可以通过迭代获得所有显示适配器`Manager.Adapters`。该`Information`属性包含显卡特定信息。试试看，哪些信息对你识别显卡有用。如果您已经确定了目标卡的适配器，您可以选择其中之一。

# html - 可调整粘滞页脚 CSS 的小问题

> ID：10894622
> 
> 赞同：0
> 
> 时间：2012-06-05T09:16:30.530
> 
> 标签：html, css

以下是我的粘性页脚的一段 CSS 代码。只有一个问题；每当我在最大化窗口中打开网站时，如果没有太多内容，粘性页脚就可以正常工作。但是，当我在恢复的向下窗口中打开它时，页脚会出现在页面中间。我想做的就是在正文内容之后保留页脚。如果内容没有填满整个屏幕，则页脚应该出现在底部，如果内容超过屏幕，页脚应该出现在内容之后的底部。请让我知道如何修改 CSS 以解决此问题。

```
.footy {
    height: 100px;
    position:absolute;
    color: #eaeaea;
    background-color: #333333;
    bottom: 0;
    width: 100%;
    max-width:100%;
    margin-left: -8px;
}

.footin {
    padding-top: 45px;
    width:900px;
    margin:0 auto;
} 
```

```
<div class="footy">
<div align="left" class="footin"> LLC. 2012 All rights reserved &copy; </div>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T10:12:31.270

尝试将`min-height`and添加`position:relative`到放置页脚的主容器中。

编辑：

```
 <html>
<head>
    <title>You site Title</title>
    <style>
        body,html{margin:0;padding:0;}
        #wrapper{position:relative;min-height:700px;background-color:#ccc;}
        #footer{position:absolute;bottom:0;background-color:#ff4345;height:100px;width:100%;}
    </style>
</head>

 <body>

  <div id="wrapper">

   <div id="header">
     <!-- header code-->
   </div>

   <div id="content">
     <!--your content goes here-->
   </div>

   <div id="footer">
     <!--your footer code goes here-->
   </div>
  </div>

 </body>
</html> 
```

你可以尝试这种方式来完成你的项目。这个想法是你的主容器应该有整个视口的高度，你的页脚将相对于这个容器在底部的位置。

# c# - 在不添加新构造函数的情况下向下转换类

> ID：10894624
> 
> 赞同：1
> 
> 时间：2012-06-05T09:16:34.813
> 
> 标签：c#, inheritance, binding, casting, xamarin.ios

再会，

我正在尝试为（ObjectiveC）创建绑定

```
@interface GPUImageView : UIView <GPUImageInput>
{
    GPUImageRotationMode inputRotation;
} 
```

通过在 ApiDefinitions.cs (MonoTouch) 中编写

```
[BaseType (typeof(UIView))]
interface GPUImageView : GPUImageInput{
    [Export ("initWithFrame:")]
    IntPtr Constructor(RectangleF frame);

    [Export ("autoresizingMask")]
    UIViewAutoresizing AutoResizingMask { get; set;}

    [Export ("addSubView:")]
    void AddSubView(UIView view);
} 
```

当我打电话时我得到一个“InvalidCastException”

```
GPUImage.GPUImageView filterView = (GPUImage.GPUImageView)this.View; 
```

我可以创建一个使用反射的构造函数。但这真的是正确的方法吗？

干杯!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T17:52:46.577

正如 Rolf Bjarne Kvinge 指出的那样，解决方案是将 Interface Builder 中的类类型更改为 GPUImageView。这将创建一个应该继承自 GPImageView 的类，而后者又继承自 UIView。也不需要绑定 AddSubview。

# scala - 为什么在 Akka 2.0.2 中不推荐使用 akka.jsr166y.ForkJoinPool？

> ID：10894628
> 
> 赞同：2
> 
> 时间：2012-06-05T09:16:52.553
> 
> 标签：scala, akka, fork-join, jsr166

这是否意味着它将迁移到 Scala 2.10 或 jsr166y 将单独发布？...或者是其他东西？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-05T10:42:12.157

是的，ForkJoin 的新实现将嵌入到 Scala 2.10 中，而 Akka 将使用它。

# c++ - 使用 boost::spirit::qi 嵌套 utree？

> ID：10894632
> 
> 赞同：2
> 
> 时间：2012-06-05T09:17:05.280
> 
> 标签：c++, visual-c++, boost, boost-spirit-qi

我尝试将一些分层数据解析为 boost::utree 结构，但它似乎不像expexted那样工作。这就是我所做的：

```
qi::rule<const char*, utree(), chars::space_type> inner, outer;
outer %= '<' > qi::int_ > *inner > '>';
inner %= outer | qi::as_string[qi::lexeme[+(chars::alnum - '>')]];
const char txt[] = "<21 hello <34 some> strange <12 world>>";
const char* txtIt = txt;
try {
    if (qi::phrase_parse(txtIt, txt + strlen(txt), outer, chars::space, data))
    {
        std::cout << "Numbers parsed" << std::endl;
        HGrammar::traverseData()(data);
    }

    //return;
    data.clear();
 }catch(qi::expectation_failure<...>(...)) ... 
```

其中 traverseData() 只是对 operator<<(cout, utree) 的调用。这就是我得到的：

> （21“你好”34“一些”“奇怪”12“世界”）

然而，我希望 utree 反映输入到短语解析（）中的字符串的嵌套性质。喜欢：

> （21“你好”（34“一些”）“奇怪”（12“世界”））

我如何获得这种输出？

PS 在 Visual Studio 2010 中使用 boost 1.49.0

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-06T15:08:13.370

这很简单......我只需要将“外”气规则的声明更改为：

```
qi::rule<const char*, utree::list_type(), chars::space_type> outer; 
```

从而将规则的属性类型更改为 utree::list_type。但是我不知道为什么会这样......

在 boost 1.47.0 中，还有另一个错误，即 utree 在与语义操作结合使用时无法传播其属性值。

# android - 为什么 Videoview 无法播放 Youtube 视频？

> ID：10894633
> 
> 赞同：2
> 
> 时间：2012-06-05T09:17:06.563
> 
> 标签：android, youtube-api, android-videoview

我正在尝试在某些设备上播放来自 Youtube 的 Youtube 视频，但它们返回一个对话框：“无法播放视频”。

我已经阅读了 Youtube API 文档。

我有一个 VideoView，我将视频 Uri 设置为扩展名为 .3pg 的 url。

这是我的代码：

```
 VideoView videoView = (VideoView)this.findViewById(R.id.video); 
 MediaController mc = new MediaController(this); 
 videoView.setMediaController(mc);
 videoView.setVideoURI(Uri.parse("rtsp://v1.cache2.c.youtube.com/CigLENy73wIaHwmhXrOROaqgpBMYESARFEgGUgx1c2VyX3VwbG9hZHMM/0/0/0/video.3gp")); 
 videoView.requestFocus(); 
 videoView.start(); 
```

我尝试了其他视频并正常播放。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T09:34:21.910

如果嵌入视频不是您的明确要求，您为什么不简单地使用 Youtube 视频 URL 启动一个意图，让操作系统为您处理该意图？据我所知，这是在 android 上播放视频的最简单方法。例如，

```
Intent intent = new Intent(Intent.ACTION_VIEW, Uri.parse("Your youtube URL here"));
startActivity(intent); 
```

有关 Android Intents 的更多信息，请参阅[此链接](http://blog.vimviv.com/android/intent-android/)和[vogella 的教程](http://www.vogella.com/articles/AndroidIntent/article.html#intents_explicit)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T09:24:25.457

以下片段将帮助您。

基本上你需要`setOnPreparedListener`

```
 try {

                final VideoView videoView =(VideoView)findViewById(R.id.videoView1);
                // Set video link (mp4 format )
                Uri video = Uri.parse(video_url);
                videoView.setVideoURI(video);
                videoView.setOnPreparedListener(new OnPreparedListener() {
                    public void onPrepared(MediaPlayer mp) {
                       progressDialog.dismiss();
                       videoView.start();
                    }
                });

             }catch(Exception e){
                 progressDialog.dismiss();
                 System.out.println("Video Play Error :"+e.getMessage());
             } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-05T09:34:03.630

您需要使用 YouTube URL 启动意图并让操作系统处理它。也就是说，我不认为你可以将 YouTube 视频直接嵌入到你的活动中，尽管我很想被证明是错误的。

# c++ - 不使用额外空间的回文

> ID：10894636
> 
> 赞同：0
> 
> 时间：2012-06-05T09:17:16.757
> 
> 标签：c++, c, algorithm

我知道通过使用**字符串转换、堆栈和数字中断来检查****整数**是否为**回文**的各种方法，但这里的问题是“我们如何在不**使用****任何****额外****空间的****情况下检查****整数**是否为**回文**？”

 ******* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T09:21:42.427

您可以使用以下代码还原数字：

```
int revert(int num) {
  int reverted = 0;
  while (num) {
    reverted = reverted*10 + num%10;
    num /= 10;
  }
  return reverted;
} 
```

现在你只检查是否

> 数量 == 还原（数量）

就这些。很抱歉给出了确切的解决方案而不仅仅是一个小费，但我认为如果没有解决方案本身，我就无法给出任何小费。******

# javascript - 点击后 jQuery img.src 重置

> ID：10894637
> 
> 赞同：0
> 
> 时间：2012-06-05T09:17:25.130
> 
> 标签：javascript, jquery, html, css

我的导航有问题。

### HTML

```
<ul id="menu_bar">
    <li><a href="#home" class="hov selected"><img src="img/Home_on.png" alt="Home" />Home</a></li>
    <li><a href="#portfolio" class="hov"><img src="img/Portfolio_off.png" alt="Portfolio" />Portfolio</a></li>
    <li><a href="#about" class="hov"><img src="img/About_off.png" alt="About" />About</a></li>
   <li><a href="#contact" class="hov"><img src="img/Contact_off.png" alt="Contact" />Contact</a></li>
</ul> 
```

### JS

```
$(document).ready(function() {
    $("img.roll").hover(
        function() { this.src = this.src.replace("_off", "_over");},
        function() { this.src = this.src.replace("_over", "_off");}
    );
    $("a.hov").hover(
        function() {
            var img = $(this).find("img")[0];
            img.src = img.src.replace("_off", "_over");},
        function() {
            var img = $(this).find("img")[0];
            img.src = img.src.replace("_over", "_off");}
    );
    $("a.hov").click(
        function() {
            var img = $(this).find("img")[0];
            img.src = img.src.replace("_over", "_on");
            $("a.hov").removeClass("selected");
            $(this).addClass("selected");
        }
    );

}); 
```

我想创建一个点击函数来改变锚类，改变这个锚内部的img src，当我在另一个锚上使用它时，它会将最后点击的锚重置为普通类和普通img src。现在我的函数从所有“a.hov”中删除类，但没有将所有这些项目的 img.src 更改为“_off”，并且不知道如何制作它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T09:45:08.163

```
$("a.hov").click(
        function() {

            $("a.hov").each( //Change all "_over" to "_off" for all items
             function() {
                 var img = $(this).find("img")[0];
                 img.src = img.src.replace("_over", "_off");
             });

            var img = $(this).find("img")[0];
            img.src = img.src.replace("_over", "_on"); //replace all "_over" (mabe all will work without this line)
            img.src = img.src.replace("_off", "_on"); //replace "_off"

            $("a.hov").removeClass("selected");
            $(this).addClass("selected");
        }
    ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T09:18:59.393

```
$("a.hov").click(
        function() {
            var img = $('img', this);
            console.log(img)
            img.attr('src', img.attr('src').replace("_off", "_on"));
            $('a.hov').removeClass("selected");
            $(this).addClass("selected");
        }
    ); 
```

# javascript - 如何在Javascript中将光标设置为输入框？

> ID：10894638
> 
> 赞同：98
> 
> 时间：2012-06-05T09:17:28.467
> 
> 标签：javascript, dom-events

```
document.getElementById(frmObj.id).value="";
document.getElementById(frmObj.id).autofocus;
document.getElementById("errorMsg").innerHTML = "Only numeric value is allowed"; 
```

在上面的代码中，表单对象的值完美设置为，`""`但文本框中没有光标。我想要一个光标在那里。`focus()`仅聚焦该输入框，但并未实际设置光标。

* * *

## 回答 #1

> 赞同：125
> 
> 时间：2012-06-05T09:23:31.643

在**JavaScript**中，首先关注控件，然后选择控件以在 texbox 上显示光标...

```
document.getElementById(frmObj.id).focus();
document.getElementById(frmObj.id).select(); 
```

或使用**jQuery**

```
$("#textboxID").focus(); 
```

* * *

## 回答 #2

> 赞同：64
> 
> 时间：2015-12-08T10:36:15.957

我意识到这是一个相当古老的问题，但我有一个类似问题的“愚蠢”解决方案，也许可以帮助某人。

我在显示为选中的文本框（通过 JQuery 中的 Focus 方法）时遇到了同样的问题，但没有将光标移入。

事实是我打开了 Debugger 窗口以查看正在发生的事情，而*那个*窗口正在窃取焦点。解决方案非常简单：只需关闭调试器，一切都很好……花了 1 个小时进行测试！

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-06-05T09:22:20.243

有时您确实获得焦点，但文本字段中没有光标。在这种情况下，您可以这样做：

```
document.getElementById(frmObj.id).select(); 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2016-01-31T01:00:34.407

如果您将`.onmousedown`其用作用户交互，那么可能会咬到您的一件事；当您这样做时，然后立即尝试选择一个字段，它不会发生，因为*鼠标被按住在其他东西上*。因此，更改为`.onmouseup`和 viola，现在`focus()`可以正常工作，因为当尝试更改焦点时，鼠标处于未单击状态。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2019-10-18T06:25:26.073

这种方式将焦点和光标设置到输入的末尾：

```
div.getElementsByTagName("input")[0].focus();
div.getElementsByTagName("input")[0].setSelectionRange(div.getElementsByTagName("input")[0].value.length,div.getElementsByTagName("input")[0].value.length,"forward"); 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-06-05T09:56:29.677

您没有提供足够的代码来帮助您可能提交表单并重新加载页面，或者您在页面上有一个对象，例如嵌入的 PDF，它窃取了焦点。

这是验证表单的规范纯 javascript 方法可以使用 onubtrusive JS 进行改进，这将删除内联脚本，但这是起点：

```
function validate(formObj) {
  document.getElementById("errorMsg").innerHTML = "";
  var quantity = formObj.quantity;
  if (isNaN(quantity)) {
    quantity.value = "";
    quantity.focus();
    document.getElementById("errorMsg").innerHTML = "Only numeric value is allowed";
    return false;
  }
  return true; // allow submit
}
```

```
#errorMsg { color:red }
```

```
<form onsubmit="return validate(this)">
  <input type="text" name="quantity" value="" />
  <input type="submit" />
</form>
<span id="errorMsg"></span>
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-10-07T12:22:43.487

在我的经验中

> document.getElementById(frmObj.id).focus();

在 PC 上运行的浏览器上很好。但是在移动设备上，如果您希望显示键盘以便用户可以直接输入，那么您还需要：

> document.getElementById(frmObj.id).select();

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2020-12-06T14:35:49.113

在输入标签内，您可以为使用 jsx/react 的任何人添加 autoFocus={true}。

```
<input
 type="email"
 name="email"
 onChange={e => setEmail(e.target.value)}
 value={email}
 placeholder={"Email..."}
 autoFocus={true}
/> 
```

# rest - 使用 Javascript 调用 REST 服务时出错

> ID：10894639
> 
> 赞同：0
> 
> 时间：2012-06-05T09:17:33.480
> 
> 标签：rest, xmlhttprequest

我开发了一个 REST Web 服务来获取资源，我可以通过 Java/Spring 模板访问它，如果我在浏览器上键入 URI，甚至会出现 xml 响应。

但是当我在 Java 脚本中使用 XMLHttpRequest 调用相同的 URI 时，我收到以下错误。 **“XMLHttpRequest 无法加载 URI（带有服务器名称的实际 uri ..etc）。原始文件：// 不允许 Access-Control-Allow-Origin。”**

**未捕获的错误：NETWORK_ERR：XMLHttpRequest 异常 101。**

我的JS代码如下。

```
 xmlHttp = new XMLHttpRequest(); 
xmlHttp.open( "GET", "http://localhost:8080/rest/apps", false );
xmlHttp.send( null ); 
```

请让我知道会出现什么问题并帮助我解决这个问题。

问候， 斯里德哈

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T09:23:13.087

这里[Origin](http://en.wikipedia.org/wiki/Same_origin_policy)是本地文件系统，您正在加载 HTML 页面，通过 file:/// 加载调用。请求来自同一来源。如果您尝试从其他地方加载，那么您将不会收到错误。

[检查这个答案](https://stackoverflow.com/questions/8456538/origin-null-is-not-allowed-by-access-control-allow-origin)

# oracle - 哪些语句将导致在 PL/SQL 过程中提交？

> ID：10894645
> 
> 赞同：4
> 
> 时间：2012-06-05T09:17:52.383
> 
> 标签：oracle, plsql, commit, oracle11gr2

我在 Oracle 11g 中编写了一个 PL/SQL 过程。我没有`truncate`, `create`or`commit`声明，但会话仍在提交中。我正在使用 SQL Developer 和 PL/SQL Developer。

有人可以告诉我哪些语句会导致过程或函数内的提交吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-05T09:28:25.227

所有 DML 语句 (INSERT/DELETE/UPDATE/MERGE) 都不会在 PL/SQL 中提交。

所有 DDL 语句**都会提交**(ALTER/CREATE...)，即使语句失败。如果您正在运行运行 DDL 的动态语句 (EXECUTE IMMEDIATE)，这也将提交您的事务。

一些[DBMS 包](http://docs.oracle.com/cd/E11882_01/appdev.112/e25788/toc.htm)也有提交的过程，例如[DBMS_STATS](http://docs.oracle.com/cd/E11882_01/appdev.112/e25788/d_stats.htm#CIHBIEII)。把它们都列出来会很麻烦。当您使用 DBMS 包时，请阅读相应的文档。

# java - 独立于平台的 OSGi 控制台

> ID：10894649
> 
> 赞同：0
> 
> 时间：2012-06-05T09:18:17.387
> 
> 标签：java, console, osgi, platform-independent

我正在设计一个外壳来管理应用程序。计划让下一个应用程序版本使用 OSGi，但 OSGi 平台（Felix、Equinox、...）尚未确定。如果我们也可以用我们的 shell 来管理 OSGi，那就太好了。

如何以独立于平台的方式管理 OSGi？你能指点我的示例代码吗？

谢谢，乌尔里希

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T11:35:26.843

事实上，您不仅可以使用 karaf 的控制台。您可以简单地使用 Apache Karaf 作为您的服务器。只需一个配置设置，它就可以从 Felix 切换到 Equinox。如果你对它在实践中的工作方式感兴趣，我做了一个关于 Karaf 的教程系列。[http://www.liquid-reality.de/display/liquid/Karaf+Tutorials](http://www.liquid-reality.de/display/liquid/Karaf+Tutorials)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-05T09:46:48.253

您可以签出例如 Apache Karaf 的控制台实现。它是功能齐全的 OSGi 运行时。这是[命令的概述](http://karaf.apache.org/manual/latest-2.2.x/users-guide/using-console.html)，您可能只选择子集。

您也可以使用运行时并使用您的命令扩展控制台：http: [//karaf.apache.org/manual/latest-2.2.x/developers-guide/extending-console.html](http://karaf.apache.org/manual/latest-2.2.x/developers-guide/extending-console.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-05T11:10:30.573

是的，当然可以以独立于平台的方式管理 OSGi。这完全取决于您准备自己实施多少管理。

OSGi API 让您可以访问所有内容，您只需要设计/选择您的外壳、命令格式等。

您想要一个基于命令提示符的命令提示符、基于 Web 的命令提示符还是远程管理协议与某个后端管理服务器一起使用？

1）让我们从功能开始。你的 shell 将作为一个包本身来实现。您可以使用此捆绑包的 BundleContext 来访问其他捆绑包对象。通过它们，您可以：

*   安装、启动、停止、更新捆绑包：

`BundleContext.installBundle(String)`– 从指定的位置字符串（应该是 URL）安装包。

```
BundleContext.getBundles( )
Bundle.start()
Bundle.update( InputStream input ) 
```

*   检查捆绑包、捆绑包版本、导出/导入包、注册服务

*   从 OSGi 服务注册表中，您可以获得 ConfigurationAdmin 服务，通过它您可以列出捆绑包的配置，并更改它们

*   您还可以从注册表中获取 LogService，以读取日志

*   从 StartLevel 服务中，您可以控制启动 fw 时捆绑包的启动顺序

等等等等

2）您希望如何使上述信息可访问？如果你想要一个基于命令的控制台，你可以写一个，使用系统输出。[你可以检查这个实现的想法](http://dz.prosyst.com/pdoc/mBS_SDK/um/runtime/osgi/docs/framework/api/bundles/com/prosyst/util/pcommands/PluggableCommands.html)

如果您想要一个基于 Web 的服务，那么保持平台独立性的最简单方法是编写一个标准 servlet 并将其注册到标准 OSGi HTTP 服务中。然后相关的网页会调用上面的函数。

如果您想要一个远程管理协议，您可以映射到许多不同的可能性。例如，检查映射到 OMA DM 规范的 OSGi DMT 服务，该规范很容易映射到 TR-069 管理协议。有现有的实现。

所有这些都完全独立于 Felix、Equinox 等，并且适用于其中任何一个，以及任何其他 OSGi fw。

# web-applications - 使用基于 MAC 地址的应用程序注册设备

> ID：10894652
> 
> 赞同：0
> 
> 时间：2012-06-05T09:18:32.223
> 
> 标签：web-applications, lan, mac-address, arp

我正在尝试构建一个在本地服务器上运行的应用程序，该应用程序可以由通过路由器连接到它的智能手机设备访问（比如放置在安全门处）。它是一个校园内签入/签出本地应用程序，并不意味着客户可以通过互联网访问。

现在我想用网络应用程序唯一地注册每个智能手机设备，这样就不需要输入额外的详细信息，或者每次入住或退房时都不需要登录。我的方法是根据其 MAC 地址注册每个设备。

我可以检索网络上连接到应用程序的任何设备的 MAC 地址吗？我更喜欢PHP。

```
exec('arp '.$_SERVER['REMOTE_ADDR'],$user_mac); 
```

arp 命令能否检索此网络上的地址？此外，是否有更好的方法来唯一且永久地识别设备？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T09:21:44.770

MAC 地址跨网段不可见，您和客户端之间需要没有路由器才能从 ARP 获取其 MAC 地址。

# wpf - MVVM 灯光中的子窗口

> ID：10894654
> 
> 赞同：0
> 
> 时间：2012-06-05T09:18:39.680
> 
> 标签：wpf, mvvm-light

如何在 am WPF 应用程序中使用来自 MVVM Light 的消息传递来显示 ChildWindow 并从中返回一些值？我需要向用户呈现一个带有 2 个日期选择器的模态对话框和消息以某种方式返回这些 2 个值，以用作其他视图的参数。可能吗 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T13:29:22.530

通常我只是用 a`Popup`来做这样的事情。

`Popup`通常与 中的属性`Visibility`绑定，并且 Popup通常也是 ViewModel 的一部分`IsPopupVisible``ViewModel``DataContext`

我不是 WPF 默认控件的忠实拥护者，所以如果您有兴趣，我[在这里](http://rachel53461.wordpress.com/2011/08/20/popup-panel-for-wpf/)`Popup`有我自己的自定义 Popup 控件。

它通常这样使用：

```
<local:PopupPanel Content="{Binding PopupContent}"
    local:PopupPanel.PopupParent="{Binding ElementName=ParentPanel}"
    local:PopupPanel.IsPopupVisible="{Binding IsPopupVisible}" /> 
```

我是`ViewModel`这样展示的：

```
PopupContent = new SelectDatesViewModel();
IsPopupVisible = true; 
```

一旦`SelectDatesViewModel.SaveCommand`触发，您可以向任何感兴趣的 ViewModel 发送一条包含所选日期的消息：

```
Messenger.Default.Send(new DatesChangedMessage(this.Date1, this.Date2)) 
```

实际的弹出内容可以在 XAML 中定义，也可以使用隐式`DataTemplate`

```
<DataTemplate DataType="{x:Type local:SelectDatesViewModel}">
    <local:SelectDatesView />
</DataTemplate> 
```

# .net - Lambda 表达式以垂直获取包含行的部分的单元格

> ID：10894660
> 
> 赞同：1
> 
> 时间：2012-06-05T09:19:19.963
> 
> 标签：.net, linq, linq-to-sql, linq-to-objects

我必须遍历每个部分并为行创建单元格以最终创建一个表。这里每个 Section 都有 rows `0....n`，并且 Rows 有单元格说`0...n`

例如如下图所示：

```
Row 0->   Cell0 | Cell1| Cell2 | Cell3 | Cell4 | Cell5         
Row 1->   Cell0 | Cell1| Cell2 | Cell3 | Cell4 | Cell5      
Row 2->   Cell0 | Cell1| Cell2 | Cell3 | Cell4 | Cell5     
.. 
```

我想创建一个 lambda 表达式（比如说）：

```
var allColumns = ........... 
```

要获取所有 Cell0，然后是所有 Cell1，所有 Cell2 等等......这样我就可以循环迭代并为每个单元创建一个表。该要求不希望我逐行进行，但希望我逐列进行（如上图中所示的单元格，我首先创建单元格 0，然后创建单元格 1，然后创建单元格 2 等，就像在下面的循环中一样。

```
foreach(Cell c in allColumns){
    //I want to iterate in this loop and create my cells and rows.    
} 
```

你能帮我给这个 lambda 表达式吗？

我试着这样做

```
var allColumns = Sections.Rows.SelectMany(a=>a.Cells).GroupBy(What should come here). 
```

您能否改进或建议一个更好的 Lambda 表达式，同时牢记上面的 foreach 循环和插图。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T11:04:15.243

你可以试试我整理的这个演示，看看它是否适合你（它应该放在 Windows 控制台应用程序中）：

```
 DataTable dt = new DataTable();
        dt.Columns.AddRange(new DataColumn[] { 
               new DataColumn("col1"), 
               new DataColumn("col2"), 
               new DataColumn("col3") });

        dt.Rows.Add("cell0", "cell1", "cell2");
        dt.Rows.Add("cell0", "cell1", "cell2");
        dt.Rows.Add("cell0", "cell1", "cell2");
        dt.Rows.Add("cell0", "cell1", "cell2");

        // writes out the original data
        foreach (DataRow row in dt.Rows)
        {
            foreach (var column in row.ItemArray)
                Console.Write("{0} ", column);

            Console.WriteLine();
        }
        Console.WriteLine();

        // reverses columns and rows
        var result = dt.Columns
                       .Cast<DataColumn>()
                       .Select(column => 
                          dt.AsEnumerable()
                            .Select(row => 
                               row.ItemArray[column.Ordinal].ToString()));

        // writes out the reversed columns and rows
        foreach (var row in result)
        {
            foreach(var column in row)
                Console.Write("{0} ",column);

            Console.WriteLine();
        }

        Console.ReadKey(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-17T07:33:23.523

## [Linqpad](http://www.linqpad.net)演示程序

我拿了 Ivan Gs Code 并创建了一个 Linqpad 程序

![获取数据表的列](../Images/b3d1b099fd97596fa5a599c1ae0914fe.png)

```
void Main(){        
    // get and write out the original data
    var dt = GetDataTable();
    dt.Dump();
    // get columns
    var result = GetColumnsFromDataTable(dt);
    result.ElementAt(0).Dump();
    result.ElementAt(1).Dump();
    result.ElementAt(2).Dump(); 
}

private IEnumerable<EnumerableRowCollection<String>> GetColumnsFromDataTable(DataTable dt){

    // Lambda Expression to get the cells 
    // vertically for a section containing rows     
    var result = dt.Columns.Cast<DataColumn>()
               .Select(column =>  dt.AsEnumerable()
               .Select(row => row.ItemArray[column.Ordinal].ToString()));   
    return result;
}

private DataTable GetDataTable(){
    DataTable dt = new DataTable();
    dt.Columns.AddRange(new DataColumn[] { 
        new DataColumn("col1 id"), 
        new DataColumn("col2 name"), 
        new DataColumn("col3 job") 
    });
    dt.Rows.Add("1", "John", "Barista");
    dt.Rows.Add("2", "Mike", "Handyman");
    dt.Rows.Add("3", "Jane", "Teacher");
    dt.Rows.Add("4", "Quentin", "Producer");
    return dt;
} 
```

# puppet - 我的 Vagrant 机器上支持 Augeas 吗？

> ID：10894661
> 
> 赞同：5
> 
> 时间：2012-06-05T09:19:25.753
> 
> 标签：puppet, vagrant, augeas

我正在尝试在我的 Vagrant 机器上获得对 augeas 的支持。

我尝试使用这些指令安装一些软件包：

```
package { "augeas-tools":   ensure => installed }
package { "libaugeas-dev":  ensure => installed }
package { "libaugeas-ruby": ensure => installed } 
```

当我尝试在我的清单上使用 augeas 时，在 vm 启动后我收到此错误：

```
err: Could not find a suitable provider for augeas 
```

我正在使用带有 Vagrant 1.0.3 的精确 32 官方框。

Vagrant 1.0.3 有 ruby​​ 1.8.7 和 puppet 2.7.14

```
$ ruby -v
$ ruby 1.8.7 (2011-06-30 patchlevel 352) [i686-linux]
$ puppet help
$ Puppet v2.7.14 
```

**这是我的php**类的小清单，包含在**apache**类、**mysql**和其他单独测试的类之后。除了 augeas 命令外，所有东西都正常工作。

```
class php {

    exec { "apt-update":
        command     => "/usr/bin/apt-get update",
        refreshonly => true;
    }

    package { "augeas-tools":   ensure => installed }
    package { "libaugeas-dev":  ensure => installed }
    package { "libaugeas-ruby": ensure => installed }

    package { "php5":               ensure => installed }
    package { "php5-cli":           ensure => installed }
    package { "php5-xdebug":        ensure => installed }
    package { "php5-curl":          ensure => installed }
    package { "php5-intl":          ensure => installed }
    package { "php5-imap":          ensure => installed }
    package { "php5-mcrypt":        ensure => installed }
    package { "php5-imagick":       ensure => installed }
    package { "php5-sqlite":        ensure => installed }
    package { "php5-gd":            ensure => installed }
    package { "php-apc":            ensure => installed }

    package { 
        "libapache2-mod-php5" : 
            ensure => installed,
            require => Package["php5"]
    }

    augeas { "php-cli":
        require =>  [
                        Package["php5"],
                        Package["augeas-tools"],
                        Package["libaugeas-dev"],
                        Package["libaugeas-ruby"],
                    ],
        context => "/etc/php5/cli/php.ini",
        changes => [
            "set date.timezone Europe/Rome",
            "set short_open_tag Off",
        ];
    }

    augeas { "php-apache":
        require =>  [
                        Package["php5"],
                        Package["augeas-tools"],
                        Package["libaugeas-dev"],
                        Package["libaugeas-ruby"],
                    ],
        context => "/etc/php5/apache2/php.ini",
        changes => [
            "set date.timezone Europe/Rome",
            "set short_open_tag Off",
        ];
    }

} 
```

安装软件包后，使用“vagrant ssh”登录 vagrant 机器，我启动：

```
vagrant@precise32:~$ ruby -raugeas -e "puts Augeas.open"
#<Augeas:0xb77a3598> 
```

提前致谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-27T07:18:24.857

我将以下内容添加到我的 Vagrantfile 中，它开始工作了。

如果在 ubuntu 上，在声明 puppet provisioner 之前添加以下行：

**config.vm.provision :shell, :inline => "sudo apt-get update && sudo apt-get install puppet -y"**

这将更新您的 apt 包，然后更新最新版本已经修复的 puppet 客户端。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-06-05T18:38:16.193

事实证明，这在我在其他答案中引用的[错误 #6907中没有得到修复。](http://projects.puppetlabs.com/issues/6907)该修复仅适用于依赖于随后在运行期间提供的命令的 Puppet 提供程序。

对于 Augeas 提供程序，它使用称为“功能”的内部 Puppet 来检查 ruby​​-augeas 库是否可用。功能只被检查一次并且结果被缓存，所以即使在安装库之后，这意味着该功能仍然被评估为假。

我将此作为[错误 #14822](http://projects.puppetlabs.com/issues/14822)提交到上游，并已发送带有修复的[拉取请求。](https://github.com/puppetlabs/puppet/pull/833)使用补丁进行测试，我现在可以成功运行：

```
notice: /Stage[main]//Package[ruby-augeas]/ensure: created
notice: /Stage[main]//Augeas[test]/returns: executed successfully 
```

我不熟悉 Vagrant，但我认为您需要找到一种解决方法来在 Puppet 运行之前安装 libaugeas-ruby 包。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-05T12:37:46.457

在 Puppet 2.7.14 上，这[应该可以工作](http://projects.puppetlabs.com/projects/1/wiki/Release_Notes#Allow-providers-to-be-used-in-the-run-they-become-suitable)，因为提供者的依赖项只会在需要时进行评估 - 即当 Puppet 需要运行这些 Augeas 资源时。

如果没有完整的 Puppet 日志文件进行确认，我怀疑这是因为您缺少 Augeas 包和需要它们的 Augeas 资源之间的显式依赖关系。请记住，以该顺序在清单中列出资源并不意味着 Puppet 以这种方式执行它。

您可以向每个 Augeas 资源添加需要参数：

```
augeas { "php-cli":
    require => [ Package["php5"], Package["libaugeas-ruby"] ],
    # ...
} 
```

或者使用[链接语法](http://docs.puppetlabs.com/guides/language_guide.html#chaining-resources)自动使每个 Augeas 资源都依赖于一个包。将其添加到类内的一行，但不在任何资源内：

```
Package["libaugeas-ruby"] -> Augeas <| |> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-16T09:52:02.410

从@m0dlx 阅读答案后，我检查`/home/vagrant/postinstall.sh`了文件，发现 Vagrant 使用自己的 Ruby 副本：

> `# The base path to the Ruby used for the Chef and Puppet gems ruby_home="/opt/vagrant_ruby"`

之后，我通过更改行找到文件并对其进行`augeas.rb`编辑`/opt/vagrant_ruby/lib/ruby/gems/1.8/gems/puppet-2.7.19/lib/puppet/provider/augeas/augeas.rb`

```
confine :true => Puppet.features.augeas? 
```

至

```
confine :true => :augeas 
```

（简而言之，我部分应用[了来自 @m0dlx 的补丁](https://github.com/puppetlabs/puppet/commit/d019047c826de02949d2a0b98db38f65716bc5fd)。）

之后这个错误就消失了。

# java - 指定应用程序的工作线程数

> ID：10894662
> 
> 赞同：1
> 
> 时间：2012-06-05T09:19:32.100
> 
> 标签：java, multithreading, threadpool

我正在开发一个进行大量数字运算的应用程序。它旨在在单台计算机上运行。最近，我们开始研究多线程以加快计算速度。一些算法可以毫不费力地并行运行，我使用一个固定的线程池来运行每个子任务。

我想知道的是：通常为这些算法指定的线程数（池的大小）如何？我怀疑这通常是通过使用配置文件或命令行参数来完成的，但我还没有看到任何这样的例子，所以我想知道是否有更好的方法。

与此相关：指定线程数是否相关？我在想将池大小设置为可分配内核的数量可能会运行得最快，但是在过度分配的情况下处理能力的线程争用甚至与性能相关吗？例如：在 4 核机器上设置 20 个最大线程会比设置 4 个最大线程更糟糕吗？

**编辑：**该应用程序打算出售，所以我不知道它将在什么计算机上运行。我正在寻找一般准则和最佳实践。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T09:25:45.840

一个经验法则是使用`NUMBER_OF_CORES + 1`线程（某些并行构建系统使用它） - 一个“备用”线程在另一个线程的 IO 期间工作。要查找核心数，请参阅[此 SO question](https://stackoverflow.com/questions/4759570/finding-number-of-cores-in-java)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T09:25:04.500

线程的数量取决于几个因素，主要是你提到的硬件内核的数量，以及线程中正在解决/处理的问题。最好对不同的线程池大小进行一些试验和错误。

如果线程正在做的工作是像您提到的那样处理硬核数字，那么我不会期望通过使用比硬件内核更多的线程来提高性能。如果线程在必须等待外部实体（如网络）的地方工作，那么您可能会看到通过使用更多线程来提高性能。

# mysql - 从第一个表中选择全部并使用外键添加特定列的行

> ID：10894665
> 
> 赞同：0
> 
> 时间：2012-06-05T09:19:48.857
> 
> 标签：mysql, sql, select, sum

我有两张桌子：

1.  `product_session`
2.  `product_sale`

`product_session`和`product_sale`映射`product_session_id`，这是主键`product_session`和外来的`product_sale`。

`product_sale`可以针对`product_session_id`.

`product_sale`有 4 列：

*   `product_sale_id`
*   `product_session_id`
*   `sales1`
*   `sales2`.

现在我需要一个查询，它将返回第一个表（`product_session`）`product_session_id`和`sum(sales1),sum(sales2)`第二个表（`product_sale`）的所有列，如果`product_sale`有多行反对`product_session_id`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T09:21:45.087

```
SELECT   product_session.*, SUM(product_sale.sales1), SUM(product_sale.sales2)
FROM     product_session LEFT JOIN product_sale USING (product_session_id)
GROUP BY product_session_id 
```

# c# - 检查对象时 NUnit Has.Member 失败

> ID：10894666
> 
> 赞同：2
> 
> 时间：2012-06-05T09:19:56.050
> 
> 标签：c#, unit-testing, nunit, ienumerable

我有以下 NUnit 测试：

```
[Test]
    public void GetComplexRulesTestContents()
    {
        var _rule = new RuleViewModel(null, "third rule", "description");
        var result = _complexRulesService.GetComplexRules();

        Assert.That(result, Has.Member(_rule));

    } 
```

从 _complexRulesService.GetComplexRules() 调用的代码是：

```
public IEnumerable<IRuleViewModel> GetComplexRules()
    {

        IEnumerable<RuleViewModel> _rules;
        _rules = new List<RuleViewModel>
                     {
                         new RuleViewModel(null, "first default rule", "description"),
                         new RuleViewModel(null, "second default rule", "description"),
                         new RuleViewModel(null, "third rule", "description")
                     };
        return _rules;
    } 
```

我得到的错误信息是：

```
PL.Web.MVC.Rules.Tests.ComplexRulesServiceTests.GetComplexRulesTestContents:
Expected: collection containing <PL.Web.MVC.Models.Rules.RuleViewModel>
But was:  < <PL.Web.MVC.Models.Rules.RuleViewModel>, PL.Web.MVC.Models.Rules.RuleViewModel>, <PL.Web.MVC.Models.Rules.RuleViewModel> > 
```

我已经尝试了来自[http://www.nunit.org/index.php?p=collectionConstraints&r=2.5.5](http://www.nunit.org/index.php?p=collectionConstraints&r=2.5.5)的测试，它们都通过了。

我做错了什么？

提前感谢您的帮助！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-05T10:09:50.930

`Has.Member`使用对象相等性来验证集合是否包含项目：

> 对于引用，Has.Member 使用对象相等来查找集合中的成员。

这意味着，将使用默认相等比较来比较您的类是否相等，默认相等比较（除非您覆盖它）是对象引用相等。这些都是 4 个不同的实例。

您可以使用一些 LINQ 执行简单的谓词匹配来解决您的问题：

```
var expectedItem = results.FirstOrDefault(vm => vm.Property1 == null
    && vm.Name == "third rule" && vm.Description == "description");
Assert.That(expectedItem, Is.Not.Null); 
```

或者，为了使其更简洁，您可以将自定义相等比较方法添加到您的测试类中，并将其与谓词匹配一起使用以更流畅：

```
private bool RulesMatch(RuleViewModel actual, RuleViewModel expected)
{
    return actual.Property1 == expected.Property1
        && actual.Name == expected.Name
        && actual.Description == expected.Description;
}

Assert.That(results, Has.Some.Matches<RuleViewModel>(v => RulesMatch(v, _rule))); 
```

# visual-studio-2010 - Webdeploy 的 MsDeploy 失败

> ID：10894671
> 
> 赞同：7
> 
> 时间：2012-06-05T09:20:09.870
> 
> 标签：visual-studio-2010, iis-7.5, webdeploy

我正在尝试网络部署。

因为我希望能够重现这一点，所以我使用了一个测试系统

Windows 2008 RC、IIs 7.5 + 部署包 我使用 [http://learn.iis.net/page.aspx/516/configure-the-web-deployment-handler/](http://learn.iis.net/page.aspx/516/configure-the-web-deployment-handler/)配置部署 启用跟踪 [http://technet.microsoft.com /en-us/library/ff729439(v=ws.10).aspx](http://technet.microsoft.com/en-us/library/ff729439(v=ws.10).aspx)

我创建了一个新的 WCF 服务应用程序，（没有改变）编译它并尝试部署

我得到以下回复（几分钟后）

```
------ Build started: Project: WcfService1, Configuration: Debug Any CPU ------
  WcfService1 -> C:\Development\BrandShield\Services\WcfService1\bin\WcfService1.dll
------ Publish started: Project: WcfService1, Configuration: Debug Any CPU ------
Transformed Web.config using Web.Debug.config into obj\Debug\TransformWebConfig\transformed\Web.config.
Auto ConnectionString Transformed obj\Debug\TransformWebConfig\transformed\Web.config into obj\Debug\CSAutoParameterize\transformed\Web.config.
Copying all files to temporary location below for package/publish:
obj\Debug\Package\PackageTmp.
Start Web Deploy Publish the Application/package to http://dev1:8172/msdeploy.axd/MSDEPLOYAGENTSERVICE ...
C:\Program Files (x86)\MSBuild\Microsoft\VisualStudio\v10.0\Web\Microsoft.Web.Publishing.targets(3847,5): Error : Web deployment task failed.(Could not complete the request to remote agent URL 'http://dev1:8172/msdeploy.axd/MSDEPLOYAGENTSERVICE'.)
This error indicates that you cannot connect to the server. Make sure the service URL is correct, firewall and network settings on this computer and on the server computer are configured properly, and the appropriate services have been started on the server.
Error details:
Could not complete the request to remote agent URL 'http://dev1:8172/msdeploy.axd/MSDEPLOYAGENTSERVICE'.
The underlying connection was closed: An unexpected error occurred on a receive.
Unable to read data from the transport connection: An existing connection was forcibly closed by the remote host.
An existing connection was forcibly closed by the remote host
Publish failed to deploy.
========== Build: 1 succeeded or up-to-date, 0 failed, 0 skipped ==========
========== Publish: 0 succeeded, 1 failed, 0 skipped ========== 
```

并且 dev1 服务器端没有日志（根本没有）。

我尝试了很多变体，但这是最简单、最容易复制的方法。它失败了。

有任何想法吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-05T15:12:29.483

我发现了这个问题。

而不是“http://” dev1:8172/msdeploy.axd 我使用 dev1:8172/msdeploy.axd

这实际上与“https://”dev1:8172/msdeploy.axd 相同，出于某种原因，这是部署代理侦听的位置。

从这里，您将收到一个新错误：

```
Could not complete the request to remote agent URL 'https://dev1:8172/msdeploy.axd?site=Default web site'. 
The underlying connection was closed: 
Could not establish trust relationship for the SSL/TLS secure channel.
The remote certificate is invalid according to the validation procedure. 
```

这是因为您没有 SSL 证书。

在发布配置文件窗口中，您需要选中“允许不受信任的证书”复选框

并且发布应该成功。祝你好运

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-03-25T05:08:27.583

通过证书：

第1步：

```
System.Net.HttpWebRequest req = (HttpWebRequest)WebRequest.Create(Url);
ServicePointManager.ServerCertificateValidationCallback = AcceptAllCertifications; 
```

第2步：

```
public Boolean AcceptAllCertifications(Object sender, System.Security.Cryptography.X509Certificates.X509Certificate certification, System.Security.Cryptography.X509Certificates.X509Chain chain, System.Net.Security.SslPolicyErrors sslPolicyErrors)
{
    return true;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-03-09T19:13:49.590

就我而言，我在*Azure DevOps*构建管道中遇到了这个问题，这是构建代理（本地机器）和*Azure DevOps*之间的 SSL/TLS 版本不匹配。我不确定它为什么会发生，但我按照本[指南](https://docs.microsoft.com/en-us/dotnet/framework/network-programming/tls#the-sch_use_strong_crypto-flag)详细说明了在注册表中使用**SCH_USE_STRONG_CRYPTO**标志来强制使用“强加密”（TLS 1.2、TLS 1.1 和 TLS 1.0）。

在构建代理机器上，我使用 .NET Framework 4 (x86/x64) 的以下键更新了注册表：

```
[HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\.NETFramework\v4.0.30319]
"SchUseStrongCrypto"=dword:00000001

[HKEY_LOCAL_MACHINE\SOFTWARE\Wow6432Node\Microsoft\.NETFramework\v4.0.30319]
"SchUseStrongCrypto"=dword:00000001 
```

我仍然不明白的是为什么我从一开始就没有使用“强密码学”以及我实际使用的是什么？（SSL vX？为什么？）

# maven - 添加 JVM 参数和 jacoco-maven-plugin？

> ID：10894672
> 
> 赞同：1
> 
> 时间：2012-06-05T09:20:12.790
> 
> 标签：maven, jacoco

只是想知道使用 maven 插件启动 jacoco 代理并向 surefire 添加一些参数是否有用？它会启动 Jacoco 两次吗？

例子 ：

```
 <plugin>
            <groupId>org.jacoco</groupId>
            <artifactId>jacoco-maven-plugin</artifactId>
            <version>${jacoco.version}</version>
            <executions>
                <execution>
                    <phase>pre-integration-test</phase>
                    <goals>
                        <goal>prepare-agent</goal>
                    </goals>
                </execution>
            </executions>           
        </plugin> 
```

和

```
<plugin>
<groupId>org.apache.maven.plugins</groupId>
<artifactId>maven-surefire-plugin</artifactId>
<configuration>
<argLine>-javaagent:${sonar.jacoco.jar}=destfile='${sonar.jacoco.reportPath}'</argLine> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T09:31:48.563

他们提供了[Maven 使用示例](http://www.eclemma.org/jacoco/trunk/doc/examples/build/pom.xml)，因此似乎不需要 Surefire 的其他参数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-05T13:30:59.107

我不知道你`${jacoco.version}`是什么，但下面的代码片段对我有用。

你不需要为 surefire 插件提供额外的参数。

该版本必须是在[Maven 存储库](http://mvnrepository.com/artifact/org.jacoco/jacoco-maven-plugin)中声明的版本（假设您没有在本地安装依赖项或使用其他/自定义存储库）：

```
 <plugin>
            <groupId>org.jacoco</groupId>
            <artifactId>jacoco-maven-plugin</artifactId>
            <version>0.5.7.201204190339</version>
            <executions>
                <execution>
                    <id>jacoco-initialize</id>
                    <goals>
                        <goal>prepare-agent</goal>
                    </goals>
                </execution>
            </executions>
        </plugin> 
```

# android - 在片段中替换或创建新视图？

> ID：10894677
> 
> 赞同：0
> 
> 时间：2012-06-05T09:20:22.327
> 
> 标签：android, android-listview, android-fragments

我构建了一个活动，它从 rss 文件中获取数据并将它们显示在 ListFragment 上；这就是我在布局文件中定义它的方式：

```
 <fragment
        android:id="@+id/news_list_fragment"
        android:name="com.thecoffeedrinker.theforcereader.NewsListFragment"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:layout_below="@+id/header_layout" /> 
```

可能会发生没有可用连接的情况；在这种情况下，我希望应用程序显示一个布局以警告用户，以显示在列表的同一布局区域中。实现这一目标的最佳方法是什么？我应该创建一个“断开连接的片段”类并用同一活动的列表替换一个实例吗？我应该在 List Fragment 类中加载这个布局吗？我试图替换它，但是当我恢复活动时它崩溃了……这是为什么呢？感谢您的回复。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T09:29:06.233

**用另一个片段替换一个片段**

```
Fragment newFragment = new ExampleFragment();
FragmentTransaction transaction = getFragmentManager().beginTransaction();

// Replace whatever is in the fragment_container view with this fragment,
// and add the transaction to the back stack
transaction.replace(R.id.fragment_container, newFragment);
transaction.addToBackStack(null);

// Commit the transaction
transaction.commit(); 
```

**添加新片段**

```
ExampleFragment fragment = new ExampleFragment();
fragmentTransaction.add(R.id.fragment_container, fragment);
fragmentTransaction.commit(); 
```

# c# - 无法使用 ajax 在 asp.net mvc 中呈现部分视图？

> ID：10894681
> 
> 赞同：0
> 
> 时间：2012-06-05T09:20:32.933
> 
> 标签：c#, ajax, asp.net-mvc, razor

问题是：我确实有**Index.cshtml**作为

```
@{
    ViewBag.Title = "Search";
    Layout = "~/Views/Shared/_Layout.cshtml";
}
<script src="@Url.Content("../../Scripts/jquery.unobtrusive-ajax.min.js") type="text/javascript"></script>
<h2>Answer's are </h2>

<div id="result">
@Ajax.ActionLink("Search Wiki",
                  "WikiAns",
                new AjaxOptions{
                    UpdateTargetId = "result",
                InsertionMode=InsertionMode.Replace,
                HttpMethod="GET",
                LoadingElementId="progress"
                })

</div>
<div id="progress" style="display: none">
<img src="@Url.Content("../../Content/Images/ajax-loader.gif")" alt="loader" />
</div> 
```

现在我确实有部分视图模型**_WikiAns**：

```
@model IEnumerable<Questions.Models.WikiAnsClass>

    <h2>Our Links</h2>
    <table>
    @foreach (var item in Model) {
        <tr>
            <td>
            <a href="@item.url" target="_blank">@item.content</a>
            </td>
        </tr>
    }
    </table> 
```

现在使用上面我想要的是...在单击**搜索 Wiki**操作链接时，id="result" 获取在其中呈现的所有局部视图。但它没有发生。而不是转到页面“ `localhost:80/Search/WikiAns`”并在那里显示结果。但我想让它留在`localhost:80/Search`并替换它的“结果”ID。但它不是这样工作的。

这是我的动作`WikiAns`

```
public ActionResult WikiAns()
{
 //Code to follow...
 var wikians = //code to follow
  return PartialView("_wikiAns", wikians); 
 } 
```

有什么问题 ？

另外，我如何实现这个 Ajax GIF 加载器...我的意思是在执行操作时显示它。?

请建议

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T09:39:58.630

@Pbirkoff 对此可能是正确的，但您可以阅读我的帖子，非常容易实现您的场景演示并从那里构建它。

[http://mazharkaunain.blogspot.com/2011/05/aspnet-mvc-razor-render-partial-view.html](http://mazharkaunain.blogspot.com/2011/05/aspnet-mvc-razor-render-partial-view.html)

[http://mazharkaunain.blogspot.com/2011/04/aspnet-mvc-render-partial-view-using.html](http://mazharkaunain.blogspot.com/2011/04/aspnet-mvc-render-partial-view-using.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T09:57:37.017

您需要在页面或布局中包含 Microsoft Ajax 脚本。

# unicode - cstring m_pszdata 与 UNICODE 中转换后的 char* 不匹配

> ID：10894682
> 
> 赞同：0
> 
> 时间：2012-06-05T09:20:34.327
> 
> 标签：unicode, cjk, cstring

我用一个 UNICODE MFC 对话框应用程序测试了 Unicode 转换，我可以在编辑框中输入一些中文。读入字符后使用

> DDX_Text(pDX, IDC_EDIT1, m_strUnicode) UpdateDate(TRUE)

的`m_pszdata`显示`m_strUnicode`“e0 65 2d 4e 1f 75 09 67”。然后我使用以下代码将其转换为 char*：

> 字符 *psText; psText = 新字符[dwMinSize]; WideCharToMultiByte (CP_OEMCP, NULL, m_strUnicode,-1, psText, dwMinSize, NULL, FALSE);

包含“ `psText`ce de d6 d0 c9 fa d3 d0”，与`m_pszdata`m_strUnicode 没有相似之处。有人能解释一下为什么会这样吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T11:37:32.567

`ce de d6 d0 c9 fa d3 d0`在`无中生有`GBK。你确定你在操纵Unicode？

* * *

```
CP_OEMCP instructs the API to use the currently set default OEM codepage. 
```

所以我的猜测是你在一台中国PC上，默认代码页为GBK。

`无中生有`在 UTF16LE 中`e0 65 2d 4e 1f 75 09 67`，基本上你正在将 UTF-16-LE 字符串转换为 GBK。

# c++ - 在基类中打印派生类名称

> ID：10894683
> 
> 赞同：8
> 
> 时间：2012-06-05T09:20:37.057
> 
> 标签：c++

如何从基类中打印出派生类名称，而无需一直链接构造函数。换句话说，是否可以从基类严格执行此操作，而无需在每个派生类中添加代码？

这是我得到的一个例子，如果有一种方法我想摆脱构造函数链接。

**编辑：** 理想情况下，我正在寻找一些东西来添加到基类中，而不必编辑所有派生类。目前我的真实代码有大约 17 个类（需要更多类），所以可以直接从基类完成工作的东西是理想的。即使它是特定于编译器的（g++ 或 clang）。

```
#include <iostream>

class Base {
public:
    Base(std::string id) {
            std::cout<<"Creating "<<id<<std::endl;
    }
};

class Child : Base {
public:
    Child(std::string id) : Base(id) {}
    Child() : Base(typeid(this).name()) {}
};

class GrandChild : Child {
public:
    GrandChild(std::string id) : Child(id) {}
    GrandChild() : Child(typeid(this).name()) {}
};

class GrandGrandChild : GrandChild {
public:
    GrandGrandChild(std::string id) : GrandChild(id) {}
    GrandGrandChild() : GrandChild(typeid(this).name()) {}
};

int main() {
    GrandGrandChild *A = new GrandGrandChild();
    GrandChild *B = new GrandChild();
    Child *C = new Child();

    return 0;
} 
```

哪个打印：

```
Creating GrandGrandChild
Creating GrandChild
Creating Child 
```

但是编译后添加了前缀。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-05T11:15:54.513

不幸的是，没有简单的解决方案。

问题是构造多态对象是相当复杂的，在你构建`Base`一个`Child`类的子部分的那一刻，你正在构建一个`Base`静止的，而不是一个`Child`（因为试图访问`Child`成员是没有意义的，它们还没有被构建！ )

因此，所有检索动态信息（称为 RTTI 或运行时类型信息）的方法都被自愿*锁定*以防止此类错误。

出于对称原因，析构函数中也会出现同样的情况。

* * *

现在，只有构造函数和析构函数被如此锁定，因此您可以完美地拥有一个在所有其他情况下`name()`愉快地返回实例的动态类型的*真实名称的方法：*

```
class Base {
public:
    std::string name() const { return typeid(*this).name(); }
}; 
```

它会工作......除非你从构造函数或析构函数调用它，在这种情况下它将报告静态类型。

现在，就“奇怪”的输出而言，每个实现（编译器）都可以在这里提供自己的输出（而且对于不同的类型，它们甚至不需要不同，太疯狂了！）。您似乎正在使用 gcc 或 clang。

有*demanglers*可以解释这样的输出，或者如果你的程序足够简单并且它们的界面让你害怕，你可以简单地尝试手动解析它以去除杂物。类的名称应该完全出现，它只会在前面加上一些废话（本质上是命名空间和数字）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T10:03:43.207

由于您指出这是为了调试，您可以依靠虚拟继承来避免将名称传递给所有中间派生类，而是将其直接传递给`Base`. 此外，`Base`可以修改为采用模板构造函数来简化派生类的事情。

```
class Base {
public:
    template <typename DERIVED>
    Base (DERIVED *d) {
        std::cout << "Creating " << typeid(*d).name() << std::endl;
    }
};

class Child : virtual public Base {
public:
    Child () : Base(this) {}
};

class GrandChild : public Child, virtual public Base {
    GrandChild () : Base(this) {}
}

class GrandGrandChild : public GrandChild, virtual public Base {
    GrandGrandChild () : Base(this) {}
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-05T10:15:02.737

您可以提供需要从每个构造函数调用的初始化函数。

```
class Base {
protected:
  Base() { init(typeid(this).name()); }
  void init(std::string id) {
    std::cout<<"Creating "<<id<<std::endl;
  }
}; 
```

您需要以某种方式确保后续初始化将安全地取代先前初始化的更改：

```
Creating P4Base
Creating P5Child
Creating P10GrandChild
Creating P15GrandGrandChild
Creating P4Base
Creating P5Child
Creating P10GrandChild
Creating P4Base
Creating P5Child 
```

* * *

> 我打算将它纯粹用于调试目的，这就是为什么将一些东西放入基类会很方便的原因。

您是否考虑过在代码中添加一个宏来打印调试输出？

```
#ifdef DEBUG
  #define PRINT_CLASSNAME std::cout<<"Creating "<<id<<std::endl;
#else
  #define PRINT_CLASSNAME ;
#endif 
```

您需要将它添加到您的构造函数一次，但如果您想（暂时）禁用它，您只需取消定义它？

# c - snprintf 混乱

> ID：10894686
> 
> 赞同：5
> 
> 时间：2012-06-05T09:20:48.040
> 
> 标签：c, string, printf

我对 snprintf 函数感到困惑。首先，我没有在 stdio.h 下的 turbo C 版本编译器中找到函数 snprintf 其次在 GNU 编译器中，当缓冲区大小小于格式化字符串时，snprintf 返回 -1，尽管它应该返回的字符数本来是如果缓冲区大小足够大，则打印。我有以下来源：

```
#include<stdio.h>
int main()
{
  char str[100];
  int numchar = snprintf(str,2,"ello jdj");
  printf("%d\n",numchar);
  return 0;
} 
```

到目前为止，根据我对 snprintf 的了解，此代码应输出 8。但它在我的 GNU 编译器中返回 -1。背后的事实是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-05T09:24:16.373

听起来您使用的是旧版本的 glibc。从手册页`snprintf`：

> 从 glibc 2.1 版开始，函数 snprintf() 和 vsnprintf() 的 glibc 实现符合 C99 标准，也就是说，其行为如上所述。在 glibc 2.0.6 之前，当输出被截断时，它们将返回 -1。

# sql - 如何使用powershell执行.sql文件？

> ID：10894688
> 
> 赞同：78
> 
> 时间：2012-06-05T09:20:58.183
> 
> 标签：sql, sql-server, powershell, powershell-module

我有一个 。`sql`文件。我正在尝试通过 Powershell 脚本传递连接字符串详细信息并调用`.sql`文件。

我正在搜索并想出了一个与`Invoke-sqlcmd`. 当我试图找到一个对应于 SQL 的模块时，我没有在我的机器中找到任何一个。

我应该在我的机器上安装任何东西（机器已经有 SQL Server Management Studio 2008 R2）来获取模块，还是有什么简单的方法可以`.sql`使用 Powershell 执行文件？

* * *

## 回答 #1

> 赞同：96
> 
> 时间：2012-06-05T10:09:43.637

尝试查看是否存在 SQL 管理单元：

```
get-pssnapin -Registered

Name        : SqlServerCmdletSnapin100
PSVersion   : 2.0
Description : This is a PowerShell snap-in that includes various SQL Server cmdlets.

Name        : SqlServerProviderSnapin100
PSVersion   : 2.0
Description : SQL Server Provider 
```

如果是这样

```
Add-PSSnapin SqlServerCmdletSnapin100 # here lives Invoke-SqlCmd
Add-PSSnapin SqlServerProviderSnapin100 
```

然后你可以做这样的事情：

```
invoke-sqlcmd -inputfile "c:\mysqlfile.sql" -serverinstance "servername\serverinstance" -database "mydatabase" # the parameter -database can be omitted based on what your sql script does. 
```

* * *

## 回答 #2

> 赞同：44
> 
> 时间：2012-06-06T22:21:17.477

引用MSDN 上的[Import the SQLPS Module ，](http://msdn.microsoft.com/en-us/library/hh231286.aspx)

> 从 PowerShell 管理 SQL Server 的推荐方法是将 sqlps 模块导入 Windows PowerShell 2.0 环境。

所以，是的，您可以使用`Add-PSSnapin`Christian 详述的方法，但欣赏推荐的 sqlps 模块方法也很有用。

最简单的情况假设您拥有 SQL Server 2012：安装中包含**sqlps ，因此您只需像其他任何模块（通常在您的**[配置文件](http://msdn.microsoft.com/en-us/library/windows/desktop/bb613488%28v=vs.85%29.aspx)中）一样通过`Import-Module sqlps`. 您可以检查该模块是否在您的系统上可用`Get-Module -ListAvailable`。

如果您没有 SQL Server 2012，那么您只需将**sqlps**模块下载到您的模块目录中，以便 Get-Module/Import-Module 找到它。奇怪的是，微软没有*提供*这个模块供下载！但是，Chad Miller 已将必要的部分打包并提供[此模块下载](http://sev17.com/2010/07/making-a-sqlps-module/)。将其解压缩到您的 ...Documents\WindowsPowerShell\Modules 目录下，然后继续导入。

有趣的是，模块方法和 snapin 方法并不相同。如果您加载管理单元然后运行`Get-PSSnapin`（*不带*-Registered 参数，仅显示您已加载的内容），您将看到 SQL 管理单元。另一方面，如果您加载 sqlps 模块`Get-PSSnapin`将不会显示加载的管理单元，因此`Invoke-Sqlcmd`仅通过检查管理单元来测试 cmdlet 的各种博客条目可能会给出假阴性结果。

**2012.10.06 更新**

有关 sqlps 模块与 sqlps mini-shell 与 SQL Server 管理单元的完整故事，请查看我最近在 Simple-Talk.com 上发布的[面向 SQL Server 开发人员和 DBA 的两部分迷你系列实用 PowerShell](http://www.simple-talk.com/sql/database-administration/practical-powershell-for-sql-server-developers-and-dbas-%E2%80%93-part-1/)根据一位读者的评论，我成功地“消除了混淆”这个问题。:-)

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2013-09-11T17:27:54.893

```
if(Test-Path "C:\Program Files\Microsoft SQL Server\MSSQL11.SQLEXPRESS") { #Sql Server 2012
    Import-Module SqlPs -DisableNameChecking
    C: # Switch back from SqlServer
} else { #Sql Server 2008
    Add-PSSnapin SqlServerCmdletSnapin100 # here live Invoke-SqlCmd
}

Invoke-Sqlcmd -InputFile "MySqlScript.sql" -ServerInstance "Database name" -ErrorAction 'Stop' -Verbose -QueryTimeout 1800 # 30min 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-09-12T11:30:40.537

这是我的 PowerShell 配置文件中用于加载 SQL 管理单元的函数：

```
function Load-SQL-Server-Snap-Ins
{
    try 
    {
        $sqlpsreg="HKLM:\SOFTWARE\Microsoft\PowerShell\1\ShellIds\Microsoft.SqlServer.Management.PowerShell.sqlps"

        if (!(Test-Path $sqlpsreg -ErrorAction "SilentlyContinue"))
        {
            throw "SQL Server Powershell is not installed yet (part of SQLServer installation)."
        }

        $item = Get-ItemProperty $sqlpsreg
        $sqlpsPath = [System.IO.Path]::GetDirectoryName($item.Path)

        $assemblyList = @(
            "Microsoft.SqlServer.Smo",
            "Microsoft.SqlServer.SmoExtended",
            "Microsoft.SqlServer.Dmf",
            "Microsoft.SqlServer.WmiEnum",
            "Microsoft.SqlServer.SqlWmiManagement",
            "Microsoft.SqlServer.ConnectionInfo ",
            "Microsoft.SqlServer.Management.RegisteredServers",
            "Microsoft.SqlServer.Management.Sdk.Sfc",
            "Microsoft.SqlServer.SqlEnum",
            "Microsoft.SqlServer.RegSvrEnum",
            "Microsoft.SqlServer.ServiceBrokerEnum",
            "Microsoft.SqlServer.ConnectionInfoExtended",
            "Microsoft.SqlServer.Management.Collector",
            "Microsoft.SqlServer.Management.CollectorEnum"
        )

        foreach ($assembly in $assemblyList)
        { 
            $assembly = [System.Reflection.Assembly]::LoadWithPartialName($assembly) 
            if ($assembly -eq $null)
                { Write-Host "`t`t($MyInvocation.InvocationName): Could not load $assembly" }
        }

        Set-Variable -scope Global -name SqlServerMaximumChildItems -Value 0
        Set-Variable -scope Global -name SqlServerConnectionTimeout -Value 30
        Set-Variable -scope Global -name SqlServerIncludeSystemObjects -Value $false
        Set-Variable -scope Global -name SqlServerMaximumTabCompletion -Value 1000

        Push-Location

         if ((Get-PSSnapin -Name SqlServerProviderSnapin100 -ErrorAction SilentlyContinue) -eq $null) 
        { 
            cd $sqlpsPath

            Add-PsSnapin SqlServerProviderSnapin100 -ErrorAction Stop
            Add-PsSnapin SqlServerCmdletSnapin100 -ErrorAction Stop
            Update-TypeData -PrependPath SQLProvider.Types.ps1xml
            Update-FormatData -PrependPath SQLProvider.Format.ps1xml
        }
    } 

    catch 
    {
        Write-Host "`t`t$($MyInvocation.InvocationName): $_" 
    }

    finally
    {
        Pop-Location
    }
} 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2021-03-08T20:44:26.243

这是一种无需额外工具/设置/PowerShell 附加组件的简单脚本的轻量级方法。

```
$conn = New-Object System.Data.SqlClient.SqlConnection
$conn.ConnectionString = $connectionStringGoesHere
$conn.Open()
$content = Get-Content $scriptFileNameGoesHere
$cmds = New-Object System.Collections.ArrayList
$cmd = ""
$content | foreach {
    if ($_.Trim() -eq "GO") { $cmds.Add($cmd); $cmd = "" } 
    else { $cmd =  $cmd + $_ +"`r`n" }
}
$cmds | foreach {
    $sc = New-Object System.Data.SqlClient.SqlCommand 
    $sc.CommandText = $_
    $sc.Connection = $conn
    $sc.ExecuteNonQuery()
} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2016-03-04T16:30:31.157

使用 2008 Server 2008 和 2008 R2

```
Add-PSSnapin -Name SqlServerCmdletSnapin100, SqlServerProviderSnapin100 
```

2012 年和 2014 年

```
Push-Location
Import-Module -Name SQLPS -DisableNameChecking
Pop-Location 
```

# .net - 避免违反复用抽象原则

> ID：10894690
> 
> 赞同：9
> 
> 时间：2012-06-05T09:21:08.563
> 
> 标签：.net, dependency-injection

在依赖注入中，我们针对抽象进行编程。

根据我的经验，我可以说应用程序中的大多数抽象与其实现具有 1:1 的关系。这违反了**重用抽象原则**。

Mark Seeman 在他的一些帖子中建议我们可以为抽象使用 Null 对象实现以避免违反**RAP**（Mark Seeman 的这个建议可能是我的推论。如果我在此引用 Mark 的错误，请纠正我）。我的问题是。

1.  如何做空对象实现？
2.  可以违反 RAP 吗？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-06-05T09:28:54.473

就我个人而言，即使只有一个生产实现，我也发现对抽象进行编程很有*用*。尤其是：

*   即使你只有一个*生产*实现，你也可能在*测试*中有其他实现，要么是成熟的假货，要么是动态创建的 mocks
*   在许多情况下，它比依赖于具体类更清楚地表达了依赖关系。例如，由于各种原因，具体类可能会公开一些您*不*依赖的其他公共成员。

请注意，这是一个错误的陈述：

> 在依赖注入中，我们针对抽象进行编程。

您可以非常轻松地将依赖注入与具体类一起使用。没有什么可以说你*必须*为你的依赖创建接口。依赖注入更多的是关于你的类如何*获得*它的依赖，而不是关于它使用什么抽象级别来表达它们。

所以基本上：

*   不要低估“测试替身”对实现抽象的重要性，即使你只有一个生产实现
*   如果你真的想要，不要害怕依赖具体的实现，但是注入这个依赖仍然比在你的类中创建它更干净，它确实是一个“正确”的依赖
*   不要尝试注入*所有内容*- 如果依赖项的行为不是真正的*交互*，那么您可能不想注入它。例如，不要仅仅为了避免创建实例而开始注入“集合提供程序” `List<T>`——例如，您不需要将您的类与`List<T>`用于测试目的的行为隔离开来。

# python - python：如果超过特定文件大小，则输出到另一个文本文件

> ID：10894692
> 
> 赞同：7
> 
> 时间：2012-06-05T09:21:32.990
> 
> 标签：python, file-io

我在 ubuntu 中使用 scapy 和 python。我想问是否有人知道如何编写示例代码：

假设我有两个文本文件在脚本运行时正在写入，那么我想检查文件是否超过示例 500 字节，如果超过，那么它将存储文件中的任何内容并创建一个新的文本文件来写入。（输出1.txt、输出2.txt等）

如果有任何专业知识会有所帮助，将不胜感激。谢谢

* * *

我的部分代码是：

```
file = open("output.txt","w")

def example(p):
    if p.haslayer(Dot11Beacon):
        if p.addr2 not in uniqueAP:
            file.writelines(p.addr2 + "\n") 
```

* * *

因此，当脚本在终端中运行时，它会将其写入名为 output.txt 的文件中，但我想改进脚本以检查文本文件的文件大小，如果超过它将停止在当前写入并创建一个例如新的 output2.txt 并继续。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-06-05T11:52:24.547

如果您不想使用[RotatingFileHandler](http://docs.python.org/library/logging.handlers.html#rotatingfilehandler)的简单示例。

您应该使用`os.stat('filename').st_size`来检查文件大小。

```
import os
import sys

class RotatingFile(object):
    def __init__(self, directory='', filename='foo', max_files=sys.maxint,
        max_file_size=50000):
        self.ii = 1
        self.directory, self.filename      = directory, filename
        self.max_file_size, self.max_files = max_file_size, max_files
        self.finished, self.fh             = False, None
        self.open()

    def rotate(self):
        """Rotate the file, if necessary"""
        if (os.stat(self.filename_template).st_size>self.max_file_size):
            self.close()
            self.ii += 1
            if (self.ii<=self.max_files):
                self.open()
            else:
                self.close()
                self.finished = True

    def open(self):
        self.fh = open(self.filename_template, 'w')

    def write(self, text=""):
        self.fh.write(text)
        self.fh.flush()
        self.rotate()

    def close(self):
        self.fh.close()

    @property
    def filename_template(self):
        return self.directory + self.filename + "_%0.2d" % self.ii

if __name__=='__main__':
    myfile = RotatingFile(max_files=9)
    while not myfile.finished:
        myfile.write('this is a test') 
```

运行这个之后...

```
[mpenning@Bucksnort ~]$ ls -la | grep foo_
-rw-r--r--  1 mpenning mpenning    50008 Jun  5 06:51 foo_01
-rw-r--r--  1 mpenning mpenning    50008 Jun  5 06:51 foo_02
-rw-r--r--  1 mpenning mpenning    50008 Jun  5 06:51 foo_03
-rw-r--r--  1 mpenning mpenning    50008 Jun  5 06:51 foo_04
-rw-r--r--  1 mpenning mpenning    50008 Jun  5 06:51 foo_05
-rw-r--r--  1 mpenning mpenning    50008 Jun  5 06:51 foo_06
-rw-r--r--  1 mpenning mpenning    50008 Jun  5 06:51 foo_07
-rw-r--r--  1 mpenning mpenning    50008 Jun  5 06:51 foo_08
-rw-r--r--  1 mpenning mpenning    50008 Jun  5 06:51 foo_09
[mpenning@Bucksnort ~]$ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-08-27T12:49:38.073

另一种方法（短一点）是使用一个有条件检查文件大小的`with`子句：-`if`

```
def RotateFile(count, file_size, file_name):
    indX = 0
    while indX < count:  
        with open(file_name,"a") as fd:  
            ##
            fd.write("DUMMY TEXT\n")      
            ##  
            if int(os.path.getsize(file_name)) > file_size:
                indX += 1
                file_name = "new_file"+str(indX)+".txt" 
```

`with`语句创建一个上下文管理器，所以当你到达`if`条件结束时，文件对象`fd`将自动关闭。

接下来是指定您需要的选项并传递给方法：

```
if __name__ == "__main__":
    count = 10                           ## 10 number of files
    file_size = 10000                    ## 10KB in size
    file_name = "new_file.txt"           ## with this name
    RotateFile(count, file_size, file_name) 
```

执行后，它将给出 10 个大小为 10KB 的文件（在当前目录中）...

[![在此处输入图像描述](../Images/95486349297d49d87af4cc5ce087251c.png)](https://i.stack.imgur.com/Byejr.jpg)

# python - jinja2 嵌套变量

> ID：10894693
> 
> 赞同：8
> 
> 时间：2012-06-05T09:21:38.527
> 
> 标签：python, yaml, jinja2

我目前正在学习 jinja2，但不确定如何以正确的方式处理变量：

这是我在 yaml 中的变量：

```
---
hosts:
   app201.acme.com: {eth0: {ip: 46.0.0.1, netmask: 255.255.255.255}}
   graphite.acme.com: {eth0: {ip: 46.0.0.2, netmask: 255.255.255.255},
                       eth0.1: {ip: 10.2.90.1, netmask: 255.255.255.255}} 
```

这里是jinja2模板：

```
{{ fqdn }}
{% for interface in hosts[fqdn] %}
    {{ interface }}
    {{ hosts[fqdn].interface.ip }} << doesn't work
    {{ hosts[fqdn].{{ interface }}.ip }} << doesn't work
    {{ interface.ip }} << doesn't work
{% endfor %} 
```

所以目前我的输出看起来像这样，因为我无法访问 yaml 哈希的第二维。

石墨.acme.com eth0.1

eth0

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-06-05T09:42:58.290

变量`hosts`是一个`dict`。访问值的正确方法`dict`是使用`[]`运算符。

```
{{ fqdn }}
{% for interface in hosts[fqdn] %}
    {{ interface }}
    {{ hosts[fqdn][interface]['ip'] }}
{% endfor %} 
```

`.`运算符用于访问对象的属性。

# java - 如何使用 xpath 检索属性名称中包含冒号的属性的值

> ID：10894696
> 
> 赞同：17
> 
> 时间：2012-06-05T09:21:42.933
> 
> 标签：java, android, xml, xml-parsing, saxparser

我有一个简单的要求，我需要获取属性`xml:id`ie的值`af1`。我正在使用 a`SAXParser`而这是我`xpath:a/aff/@xml:id`的相反，我能够获取使用`xpath:a/aff/@value`.

但是我无法检索到值，您能帮帮我吗？

```
<?xml version="1.0" encoding="UTF-8" ?>
<a>
   <aff xml:id="af1" value="a">
        <uAff>
            Hello
        </uAff>
    </aff>
    <aff xml:id="corr1">
        <uAff>
            Hello1
        </uAff>
    </aff>
</a> 
```

提前致谢。

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-06-05T09:54:35.473

要获取您可以使用的属性的值：

```
/a/aff/@*[name()='xml:id'] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-05T09:42:26.523

/a/aff/@xml:id 在获取值方面工作得很好......

您是否试图同时获得这两个值？

如果您只想获取第一个值，则可以使用 /a/aff[1]/@xml:id

# iphone - 故事板是否支持 Push Pop 操作？

> ID：10894700
> 
> 赞同：0
> 
> 时间：2012-06-05T09:21:57.700
> 
> 标签：iphone, xcode, uistoryboard

我正在制作故事板，并包括 Oauth 库 1.0 来验证用户身份。

该库包含一些对其 .xib 文件的推送弹出操作。是否支持导航，因为我有 iphone 的主情节提要。

或者我是否必须在我的故事板中重新创建这些库类的视图才能允许这样做？

任何帮助，将不胜感激

谢谢维卡斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T19:52:48.550

故事板是一种定义视图控制器的机制，它还允许您定义这些视图控制器之间的转换，但它并不限制您使用这些视图控制器。

您可以自由地将情节提要与从任何其他来源（XIB 和代码）创建的视图控制器混合。

以您认为合适的任何方式从库中创建视图控制器，并呈现它们。将视图控制器从故事板推送到现有的导航控制器上，或者以模态方式运行它们都是将视图控制器从静态库中获取到应用程序中的有效方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T10:39:00.623

是的，如上所述，故事板支持所有 xib 功能。它们只是使用方式略有不同...

要以编程方式推送，您可以使用以下命令：

```
 UIViewController *myController = [self.storyboard instantiateViewControllerWithIdentifier:@"myID"];
    [self.navigationController pushViewController:myController animated:YES]; 
```

![在此处输入图像描述](../Images/68b86472333dfbca3e77cda00f5f4fcc.png)

并使用它弹出到根目录：

```
[self.navigationController popToRootViewControllerAnimated:YES]; 
```

# linux-kernel - IO-APIC 级别和 PCI-MSI-X 之间的差异

> ID：10894702
> 
> 赞同：8
> 
> 时间：2012-06-05T09:22:05.470
> 
> 标签：linux-kernel, linux-device-driver

在`/proc/interrupts`文件中，我看到了 IO-APIC 级别（或边缘），在我的其他系统中，我看到了 PCI-MSI-X。两者都具有相同的设备精神。
我没有得到这两者之间的差异。我可以将 PCI-MSI-X 更改为 IO-APIC 吗？它属于哪个内核模块或文件或conf或proc文件？

将中断分配到所有可用的 CPU 内核是否安全？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-06-05T14:41:17.433

MSI-X 中断是基于消息的中断，是 PCIe 设备发出中断信号的唯一方法。该设备不是通过断言硬件线来发出中断信号，而是将单个字写入预配置的地址。该地址要么是 CPU 中的控制寄存器，要么是模拟传统中断系统的 PCIe 根端口中的寄存器。你看到了这两种情况。

BIOS 将主板配置为将其 MSI 中断发送到根端口，根端口模拟 INTx 中断，这些中断通过 APIC 中的路由到达 CPU。当 OS 直接支持 MSI 时，设备驱动程序可以重新编程 MSI 目标地址，使中断消息直接到达 CPU 中断寄存器。

MSI-X 与 MSI 的不同之处仅在于支持多个中断向量（例如，一个用于双端口 NIC 上的每个网络端口，或者一个用于 TX 和 RX）。

MSI 的性能优于 INTx 仿真，因为 INTx 仿真在同一个 PCIe 桥后面的设备之间共享其中断，尽管这实际上只对产生大量中断的设备很重要，而现代 NIC 实际上不这样做。您的问题应该是，“为什么我的一个系统无法在我的网卡上启用 MSI-X 中断。”

参考：

[http://lwn.net/Articles/44139/](http://lwn.net/Articles/44139/)

[http://en.wikipedia.org/wiki/Message_Signaled_Interrupts](http://en.wikipedia.org/wiki/Message_Signaled_Interrupts)

# opengl - 改变Y轴。从“左下”到“左上”？(opengl)

> ID：10894703
> 
> 赞同：1
> 
> 时间：2012-06-05T09:22:16.047
> 
> 标签：opengl, coordinates, coordinate-systems

改变Y轴。从“左下”到“左上”？试过 glScalef (1.f,-1.f, 1.f); 但它把一切都颠倒了。如何制作 glRectf (0,0,200,200); 画在左上角而不是左下角？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T07:10:21.363

给定

*   `width`和`height`视口，
*   和一个“相应的”正交投影（例如`gluOrtho2D(0, width, 0, height)`，
*   并且没有其他模型视图转换，

`glRectf(0, height, 200, height-200)`创建所需的输出。

# asp.net-mvc-3 - 如何在弹出窗口中将对象从视图传递到局部视图？

> ID：10894704
> 
> 赞同：0
> 
> 时间：2012-06-05T09:22:18.497
> 
> 标签：asp.net-mvc-3, partial-views, telerik-grid, telerik-mvc, telerik-window

我有一个包含 Telerik 网格的视图：

### 索引.cshtml

```
@(Html.Telerik().Grid(Model)
.Name("Grid")
.DataKeys(keys => keys.Add(c => c.CustomerID))
.ToolBar(toolBar => toolBar.Template(
        @<text>
            <button id="feedback-open-button" title="Add Customer" class="t-button t-state-default">Add</button>
        </text>))
.Columns(columns =>
        {   
            columns.AutoGenerate(column =>
                {
                    //customize autogenereted column's settings
                    column.Width = "150px";                                                    
                    if (column.Member == "CustomerID")
                        column.Visible = false;
                });
            columns.Command(commands => commands
                .Custom("editCustomer")
                .Text("Edit")
                .DataRouteValues(route => route.Add(o => o.CustomerID).RouteKey("CustomerID"))
                .Ajax(true)
                .Action("EditCustomer", "Grid"))
            .HtmlAttributes(new { style = "text-align: center" })
            .Width(150);
        })    
) 
```

我想使用弹出窗口向此网格添加/编辑记录。我使用了 Telerik 窗口，在其中我打开了另一个视图作为部分视图来添加/编辑记录。这是窗口的代码以及我如何将其作为“添加功能”的弹出窗口打开。

### 索引.cshtml

```
@{  Html.Telerik().Window()
    .Name("Window")
    .Title("Add / Edit Customer")        
    .Content(@<text>                 
                        @Html.Partial("AddEditCustomer", new Customer());
             </text>)
    .Width(400)
    .Draggable(true)
    .Modal(true)
    .Visible(false)
    .Render();
} 

@{ Html.Telerik().ScriptRegistrar()
    .OnDocumentReady(@<text>
        // open the initially hidden window when the button is clicked
        $('#feedback-open-button')
            .click(function(e) {
                e.preventDefault();
                $('#Window').data('tWindow').center().open();
            });           
                    </text>);
} 
```

我尝试使用相同的窗口进行编辑。但是我在将客户对象传递给窗口中的部分视图时遇到问题。

### 客户控制器.cs

```
public JsonResult EditCustomer(int CustomerID)
{
    var model = CustomerModel._CustomerCollection.FirstOrDefault(o => o.CustomerID == CustomerID);

    return Json(new { customer = model });
} 
```

### 索引.cshtml

```
<script type="text/javascript">
function onComplete(e) {
    if (e.name == "editCustomer") {
       var detailWindow = $("#Window").data("tWindow");       
       var customer = e.response.customer;                        
       detailWindow.center().open();
    } 
}
</script> 
```

如何将此“客户”对象传递给弹出窗口内的局部视图？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T17:23:36.920

在我工作的地方，我们处理这个问题的方式是在 Telerik 窗口中创建一个空的 div。“编辑”链接是一个 AJAX 链接，它使用窗口的 div 作为其目标。该链接调用您选择的控制器方法，并从那里而不是返回 Json，只返回您想要显示的 PartialView。这种方法的好处是您可以像使用任何普通视图/部分一样使用客户对象。

AJAX 完成后，打开 Telerik 窗口，内容应该在那里。

# python - mysql Compress() 与 sqlalchemy

> ID：10894706
> 
> 赞同：6
> 
> 时间：2012-06-05T09:22:24.797
> 
> 标签：python, mysql, sqlalchemy

*表*：
**id**（整数主键）
**数据**（blob）

我使用 mysql 和 sqlalchemy。要插入数据，我使用：

```
o = Demo()
o.data = mydata
session.add(o)
session.commit() 
```

我想像这样插入表格：

```
INSERT INTO table(data) VALUES(COMPRESS(mydata)) 
```

如何使用 sqlalchemy 做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T14:18:17.257

您可以将 SQL 函数分配给属性：

```
from sqlalchemy import func
object.data = func.compress(mydata)
session.add(object)
session.commit() 
```

这是一个使用更多与 DB 无关的 lower() 函数的示例：

```
from sqlalchemy import *
from sqlalchemy.orm import *
from sqlalchemy.ext.declarative import declarative_base

Base= declarative_base()

class A(Base):
    __tablename__ = "a"

    id = Column(Integer, primary_key=True)
    data = Column(String)

e = create_engine('sqlite://', echo=True)
Base.metadata.create_all(e)
s = Session(e)

a1 = A()
a1.data = func.lower("SomeData")
s.add(a1)
s.commit()

assert a1.data == "somedata" 
```

您可以使用@validates 使其自动化：

```
from sqlalchemy.orm import validates
class MyClass(Base):
    # ...
    data = Column(BLOB)

    @validates("data")
    def _set_data(self, key, value):
        return func.compress(value) 
```

如果您希望它在刷新之前在 python 中可读，您需要在本地存储它并使用描述符来访问它。

# css - IE7 在新行上浮动

> ID：10894707
> 
> 赞同：2
> 
> 时间：2012-06-05T09:22:32.333
> 
> 标签：css, internet-explorer-7, css-float

我的应用程序在时间线上使用了一些条。每行都包含一个 barkeeper div，该 div 包含该行的酒吧。酒吧老板也有 2 个样式属性宽度和高度。

```
.barkeeper {
    margin-bottom: 1px;
    position: relative;
} 
```

这些栏有一些来自 Richfaces 和 CSS hover 和 jquery javascript 的交互式 ajax 操作。因此，在每个条形周围都有一个表格。我省略了动作 javascript 来简化这个例子。

```
.bar {
    position: absolute;
    text-align: center;
    vertical-align: middle;
    z-index: 0;
}

<form id="j_id163:0:j_id165:0:medfrm" onmouseover="" method="post" name="j_id163:0:j_id165:0:medfrm" target="">
    <div id="bar1" class="bar antibiotic" onmouseout="" onmouseover="" style="left: 7px; width:1528px;">
        <img style="float:right;" src="endarrow.gif">
        <div class="cornr_top">
            <div></div>
        </div>
        <div style="text-align: center; direction: ltr;">Bartext </div>
        <div class="cornr_bottom">
            <div></div>
        </div>
        <script type="text/javascript">
    </div>
   <input type="hidden" value="" name="" autocomplete="off">
   <input type="hidden" value="" name="autoScroll" autocomplete="off">
   <script type="text/javascript">
   <input id="javax.faces.ViewState" type="hidden" autocomplete="off" value="" name="javax.faces.ViewState">
</form> 
```

使用 left 和 width 参数绝对定位条形。

条形必须有圆角，所以我添加了这些cornr_top 和cornr_bottom

```
.cornr_top div, .cornr_top, .cornr_bottom div, .cornr_bottom {
    font-size: 1px;
    height: 3px;
    width: 100%;
}

.cornr_top {
    background: url("../img/tr.gif") no-repeat scroll right top transparent;
}

.cornr_top div {
    background: url("../img/tl.gif") no-repeat scroll left top transparent;
} 
```

除了使用的图像外，cornr_bottom 类的定义相同。

我添加的最后一件事是这一行

```
<img style="float:right;" src="endarrow.gif"> 
```

这会在栏的末尾显示一个正在运行的箭头，表示它仍在运行。

现在每个浏览器都能正确显示所有这些。角落被添加到角落，如果可用，箭头会覆盖栏的右侧并与那里的 2 个角落重叠。

![火狐中的箭头](../Images/d0e6a8cdc9e10e168d4e4cccc9b1ee37.png) ![火狐没有箭头](../Images/a1befd40f77de4637c2f4ab39bf0348a.png)

在 IE7 中，箭头显示在新行上。我该如何解决这个问题？

![IE7中的箭头](../Images/8c2dbe5767bc7c86699edd5fda971d79.png) ![IE7没有箭头](../Images/b5e64b046437867fa2fc1d227476ca46.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T09:30:37.647

我自己找到了解决方案。

我已将箭头图像标签从

```
<img style="float:right;" src="endarrow.gif"> 
```

至

```
<img style="position:absolute; right:0px;" src="endarrow.gif"> 
```

# c# - 保存 3 列并通过任何列快速查找行的结构

> ID：10894708
> 
> 赞同：5
> 
> 时间：2012-06-05T09:22:34.490
> 
> 标签：c#, data-structures, hashtable

我们有一个哈希表作为对如下值列表的只读引用：

```
internal static readonly Hashtable relationcodeAcodeB = new Hashtable
{
    {"149", "23"},
    {"139", "17"}
} 
```

现在我们需要一个可以容纳 3 个值（列）并通过其他 2 个值快速查找值的结构。

像这样的东西：

```
internal static readonly Hashtable relationcodeAcodeBcodeC = new Hashtable
{
    {"149", "23", "xx"},
    {"139", "17", "xxx"}
}
string codeB=relationcodeAcodeBcodeC[codeA="149"]["codeB"]; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T09:40:12.940

假设您的对象具有三个属性 codeA、codeB 和 codeC，您维护三个哈希表，如下所示：

```
Dictionary<string, MyObj> dictA, dictB, dictC; 
```

创建新的`MyObj`时，将其添加到三个字典中：

```
dictA[obj.codeA] = obj;
dictB[obj.codeB] = obj;
dictC[obj.codeC] = obj; 
```

抬头很容易。您的示例将被编码为`dictA["149"].codeB`

当然，在一个大的查找类中保持一切整洁。

# bmp - 在位图图像上绘制文本

> ID：10894709
> 
> 赞同：1
> 
> 时间：2012-06-05T09:22:34.703
> 
> 标签：bmp

我正在寻找一个 C/C++ 库（最好是跨平台的）来在 bmp 图像上绘制文本。我已经看过 EasyBMP，它有一个字体扩展。但是，我需要显示 Arial 文本 - 这在 EasyBMP 中不可用。

建议赞赏！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T09:35:49.173

Use [QPainter](http://qt-project.org/doc/qt-4.8/QPainter.html) from Qt framework. It's cross-platform and dual licensed(LGPL and commercial)

# firefox - ff 插件执行菜单项

> ID：10894710
> 
> 赞同：1
> 
> 时间：2012-06-05T09:22:35.610
> 
> 标签：firefox, firefox-addon, xul

为了简单起见，我想修改现有的插件。我有这个代码：

```
<popup id="contentAreaContextMenu">
<menu id="llOpenLocalLink" label="&llOpenLocalLink.label;" insertbefore="context-sep-open" >

 <menupopup>
  <menuitem id="llOpenInThisTab" label="&llOpenInThisTab.label;" oncommand="LocalLink.openLinkInThisTab(event)"/>
  <menuitem id="llOpenInNewTab" label="&llOpenInNewTab.label;" oncommand="LocalLink.openLinkInNewTab(event)"/>
  <menuitem id="llOpenInNewWindow" label="&llOpenInNewWindow.label;" oncommand="LocalLink.openLinkInNewWindow(event)"/>
 </menupopup>

</menu>
</popup> 
```

而且我只想要一个菜单​​条目，如果单击它就会执行。我试过了，但没有执行：

```
<popup id="contentAreaContextMenu">
<menu id="llOpenLocalLink" label="&llOpenLocalLink.label;" insertbefore="context-  sep-open" oncommand="LocalLink.openLinkInNewTab(event)">
</menu>
</popup> 
```

好的。我找到了答案：

```
<popup id="contentAreaContextMenu">
  <menuitem id="llOpenLocalLink" label="&llOpenLocalLink.label;" insertbefore="context-sep-open" oncommand="LocalLink.openLinkInNewTab(event)"/>
</popup> 
```

# c# - 自托管 WCF 服务的多个 http 基地址？

> ID：10894717
> 
> 赞同：0
> 
> 时间：2012-06-05T09:23:22.977
> 
> 标签：c#, wcf, wcf-endpoint

我有一个具有一个 http 端点的 WCF 服务，我想添加另一个具有不同绑定的 http 端点地址。该服务未托管在 IIS 中，因此设置 multipleSiteBindingsEnabled 是没有用的。

我正在尝试这样的事情。

```
<system.serviceModel>
<serviceHostingEnvironment multipleSiteBindingsEnabled="true" />

    <services>
            <service behaviorConfiguration="ServiceBehaviorConfiguration"
             name="ServerService">
                <endpoint address="http://localhost:6732/ServerService" binding="webHttpBinding" behaviorConfiguration="webby"
         contract="IClientAppContract">
                    <identity>
                        <dns value="localhost" />
                    </identity>
                </endpoint>
                <endpoint address="http://localhost:800/ServerService" binding="basicHttpBinding"
         contract="IClientAppContract">
                    <identity>
                        <dns value="localhost" />
                    </identity>
                </endpoint>
                <endpoint address="mex" binding="mexHttpBinding" contract="IMetadataExchange" />
                <host>
                    <baseAddresses>
                        <add baseAddress="http://localhost:800/ServerService" />
                        <add baseAddress="http://localhost:6732/ServerService" />
                    </baseAddresses>
                </host>
            </service>
        </services>
</system.serviceModel> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T22:05:56.027

您可以创建两个服务，每个服务都有自己不同的 baseAddress，但它们的内部端点是相同的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T13:27:34.697

尝试如下所示的配置。它通过*单个*端口公开多个端点，但我确信 WCF 支持这种配置模式。

```
 <services>
        <service behaviorConfiguration="ServiceBehaviorConfiguration"
                 name="ServerService">
            <endpoint address=""
                      binding="webHttpBinding"
                      behaviorConfiguration="webby"
                      contract="IClientAppContract">
                <identity>
                    <dns value="localhost" />
                </identity>
            </endpoint>
            <endpoint address="basic"
                      binding="basicHttpBinding"
                      contract="IClientAppContract">
                <identity>
                    <dns value="localhost" />
                </identity>
            </endpoint>
            <endpoint address="mex"
                      binding="mexHttpBinding"
                      contract="IMetadataExchange" />
            <host>
                <baseAddresses>
                    <add baseAddress="http://localhost:800/ServerService" />
                </baseAddresses>
            </host>
        </service>
    </services> 
```

# xml - 重复的 xml 标头

> ID：10894723
> 
> 赞同：0
> 
> 时间：2012-06-05T09:23:39.630
> 
> 标签：xml

我有一个 xml 片段，如下所示：

```
<?xml version="1.0" encoding="utf-8"?>
<!-- _lcid="1033" _version="14.0.4731" _dal="1" -->
<!-- _LocalBinding -->
<?xml version="1.0" encoding="utf-8"?>
<Templates xmlns:ows="Microsoft SharePoint">
  <Template Name="PowerPointBroadcast" ID="3001"> 
    <Configuration ID="0" Title="PowerPoint Broadcast Site" />
  </Template>
</Templates> 
```

如您所见，有两个标题`<?xml version="1.0" encoding="utf-8"?>`导致 XmlDocument.Load 出错。谁能告诉如何处理这种情况？

谢谢

# xamarin.ios - 在启动应用程序之前显示有关 Internet 连接的警报 (Monotouch)

> ID：10894725
> 
> 赞同：0
> 
> 时间：2012-06-05T09:23:43.390
> 
> 标签：xamarin.ios, connection, alert

我正在开发一个需要互联网连接的应用程序，所以我想在启动前检查可用性。如果互联网连接不可用，请向用户显示警报并返回主页，而不是尝试启动应用程序。

所以我使用了这里推荐的 Reachability 类（http://stackoverflow.com/questions/1961341/check-for-internet-access-with-monotouch）来检查互联网连接。到现在为止还挺好。但是如果我将此检查放在我的 Main.cs 中，它会执行检查，但不会显示警报。

```
if(!Reachability.IsHostReachable("http://google.com")) {
                Debug.WriteLine("OFFLINE");
                UIAlertView alert = new UIAlertView("Offline","Voor deze app is een internetverbinding vereist.",null,"OK",null);
                alert.Show();
            }
            else{           
            MPFramework.Application app = new MPFramework.Application();
            UIApplication.Main (args, null, "AppDelegate");         
            } 
```

如果我将此检查放在 AppDelegate.cs 中，它会执行检查，显示警报，但保持黑屏而不是返回主页。那么我应该在哪里放置我的代码以便在启动应用程序之前检查并显示警报？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-05T09:41:13.583

你看这个有点错误：

*   Apple 不赞成杀死/关闭自己的应用程序（参见：[https](https://stackoverflow.com/a/356342/183422) ://stackoverflow.com/a/356342/183422 ）。如果用户想关闭你的应用程序，他应该自己做。

*   您需要运行主循环来显示任何 UI - 并且当您调用 UIApplication.Main 时会启动主循环（这就是为什么您必须在 AppDelegate.cs 中进行检查并在那里而不是在 Main 方法中显示相应的警报） .

所以，把这些东西放在一起，我认为你应该显示一个空白/启动屏幕，检查可达性，如果没有，则显示警报（如果用户关闭警报，可能会再次检查）。

# .htaccess - htaccess 将多行减为一行？

> ID：10894728
> 
> 赞同：0
> 
> 时间：2012-06-05T09:23:58.783
> 
> 标签：.htaccess

我有一个具有以下规则的 .htaccess 文件：

```
RewriteRule ^(boards)/(.+)/(.+)/(.+)/(.+)/([^./+])/?$ index.php?param0=$1&param1=$2&param2=$3&param3=$4&param4=$5&param5=$6 [NC]

RewriteRule ^(boards)/(.+)/(.+)/(.+)/([^./]+)/?$ index.php?param0=$1&param1=$2&param2=$3&param3=$4&param4=$5 [NC]

RewriteRule ^(boards)/(.+)/(.+)/([^./]+)/?$ index.php?param0=$1&param1=$2&param2=$3&param3=$4 [NC]

RewriteRule ^(boards)/(.+)/([^./]+)/?$ index.php?param0=$1&param1=$2&param2=$3 [NC]

RewriteRule ^(boards)/([^./]+)/?$ index.php?param0=$1&param1=$2 [NC]

RewriteRule ^(boards)/?$ index.php?param0=$1 [NC] 
```

我的问题：是否有可能将它们组合成一个规则？保持这样的状态很烦人...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T09:30:19.587

如果你可以修改`index.php`，你可以这样做：

```
RewriteRule ^boards/(.*) index.php?url=$1 [NC] 
```

并在里面解析`$_GET['url']`自己`index.php`。

更好的是，你可以做到

```
RewriteRule ^boards/.* index.php [NC] 
```

然后将`$_SERVER['REQUEST_URI']`自己解析为`index.php`.

# javascript - 这个回调函数是如何工作的

> ID：10894731
> 
> 赞同：0
> 
> 时间：2012-06-05T09:24:22.443
> 
> 标签：javascript, node.js

我是 nodejs 和几乎 n00b 的 JavaScript 新手。我看到了使用 nodejs 创建服务器的代码。我可以理解在请求到达服务器后调用匿名函数。

```
var http=require("http");
http.createServer(function(request,response){
 response.writeHead(200,{"Content-Type":"text/plain"});
 response.write("hello world");
 responde.end();
}).listen(8888); 
```

我的问题是如何实现类似 createServer 函数 (foo() bar())..以了解此方法的工作原理。

为了说清楚。我已经这样做了，这是行不通的。以及如何使它像 createServer() 一样工作？

```
function dummycallback(para1,para2,callback)
{
 console.log('para1 is ' + para1+' para2 is '+ para2);
 callback();
}

dummycallback(1,2,function(req,res)
{
 req.senddata("good");
}); 
```

我在nodejs中到处都看到过这些代码，所以我非常想知道细节......再次感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T06:16:32.100

也许，您在问匿名函数是如何工作的。

```
var fun = function(foo){
    if (foo) foo(1, 2); ///< if function foo exists, call it.
}
fun(function(p1, p2){
    return p1 + p2;
}); 
```

# android - Android - 以编程方式创建 TextView（或 EditText）并将其设置在屏幕上的特定位置给出坐标

> ID：10894733
> 
> 赞同：4
> 
> 时间：2012-06-05T09:24:33.657
> 
> 标签：android, textview, android-edittext, coordinates

我正在构建一个 android 应用程序，用户在屏幕上绘制一些对象。一种类型的对象是文本对象。用户通过拖动他的手指来创建对象，并且对象显示为可以移动/重塑的矩形。当用户点击文本对象时，我启动一个新活动，用户在其中输入我在 onActivityResult 方法上返回的文本。

现在我想在对象中显示文本。我可以从我的文本类中访问诸如 Rectangle 等坐标的东西。本质上我想要做的是以编程方式创建一个 TextView（或 EditText）并将其边界设置为我的对象被绘制的矩形的边界。有没有一种方法可以帮助我做到这一点？

（另一种方法是在我的文本对象中使用 canvas.drawTextOnPath 方法。但这似乎更复杂，因为我的文本可能会脱离对象，而且我还必须处理多行）

非常感谢您！

编辑：尝试 GAMA 的方法

```
protected void onActivityResult(int requestCode, int resultCode, Intent data) {                 
  switch(requestCode) { 
  case 1:
      if (resultCode == Activity.RESULT_OK) { 
            String text=data.getStringExtra("text");
            System.out.println(text);
            TextView tv=new TextView(this);
            //LayoutParams lp = new LayoutParams(new ViewGroup.MarginLayoutParams((int)texts.get(index).width,(int)texts.get(index).height));
            LayoutParams lp = new LayoutParams(new ViewGroup.MarginLayoutParams(100,100));
            //tv.setLayoutParams(lp);
            //lp.setMargins((int)texts.get(index).Sx, (int)texts.get(index).Sy, (int)texts.get(index).Lx, (int)texts.get(index).Ly);

            tv.setLayoutParams(lp);
            tv.setTextSize(10);
            tv.setTextColor(Color.RED);
            tv.setText(text);
            lp.setMargins(0,0,0,0);
            //tv.setVisibility(View.VISIBLE);
            System.out.println("got "+tv.getText());
            }
      break;
      }
  } 
```

两个打印都按预期显示文本，但我在屏幕上看不到任何内容（尝试将其设置在左下角开始）

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-05T09:38:11.980

```
 EditText edText = new EditText(this);
            edText .setId(i);
            edText .setLayoutParams(new LinearLayout.LayoutParams(
                    LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT,
                    1f));

                    edText .setWidth(100);
            edText .setImeOptions(EditorInfo.IME_ACTION_NEXT);
            edText .setInputType(InputType.TYPE_CLASS_NUMBER);
            edText .setKeyListener(DigitsKeyListener.getInstance());
            edText .setMaxLines(1);
                    edText .setOnFocusChangeListener(this);
            edText .setOnEditorActionListener(this);
            edText .addTextChangedListener(this);

                    //this linearlayout id is declared inside your xml file
                        LinearLayout linear=(LinearLayout)findViewById(R.id.linearLayout1);
                        linear.addView(edText ); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-05T09:32:12.987

其实，`drawTextOnPath`是你最好的选择。它不会流血。您所要做的就是创建一条从矩形的左侧中心垂直到右侧中心垂直的路径。该方法将负责调整文本大小，使其保持在路径内。

您可以使用 来相应地调整路径`Paint.getTextWidth()`。如果宽度大于框，请`Paint.getTextHeight()`在第一行下方添加一条线来扩展您的路径。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-05T09:29:26.470

试试这个：

```
TextView tv=new TextView(this);
LayoutParams lp = new LayoutParams(new ViewGroup.MarginLayoutParams(width,height));
tv.setLayoutParams(lp);
lp.setMargins(0, 0, 0, 0); 
```

# php - PHP - 连接 2 个对象

> ID：10894739
> 
> 赞同：4
> 
> 时间：2012-06-05T09:25:00.753
> 
> 标签：php

我有 2 个对象。

`print_r`这是我用PHP 的方法打印出来的对象的输出。

项目#1；

```
stdClass Object ( [id] => 1 [portal_id] => 1 [name=> NEVZAT ) 
```

对象#2；

```
stdClass Object ( [surname] => YILMAZ) 
```

我想将这两个对象相互连接，所以在过程结束时我需要一个包含这两个对象的所有变量的对象；

```
stdClass Object ( [id] => 1 [portal_id] => 1 [name=> NEVZAT [surname] => YILMAZ ) 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-05T09:29:10.710

一种简单的方法是将对象临时转换为数组，合并这些数组，然后将结果数组转换回`stdClass`对象。

```
$merged = (object) array_merge((array) $object_a, (array) $object_b); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-05T09:31:28.247

只需像这样复制属性：

```
// assume $o1 and $o2 are your objects
// we copy $o1 attributes to $o2
foreach ($o1 as $attr => $value) {
        $o2->{$attr} = $value;
} 
```

# c# - C# - 不同的 .NET 框架版本

> ID：10894741
> 
> 赞同：1
> 
> 时间：2012-06-05T09:25:04.160
> 
> 标签：c#, .net, visual-studio, runtime, portability

`.NET`是否有人在执行运行时升级时遇到可移植性问题*（例如从 2.0 -> 3 -> 3.5 -> 4 -> 4.5 切换）*？

我找不到任何证据证明升级到更高版本的运行时不会影响我的应用程序的行为*（我想应该是这样，但是，总是有隐藏的警告）。*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T09:30:07.103

请参阅以下链接：http: [//msdn.microsoft.com/en-us/library/ee941656.aspx](http://msdn.microsoft.com/en-us/library/ee941656.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-05T09:35:58.110

There are always a few changes that could change the behavior of existing code, but these are in most cases rare edge cases and are kept to a minimum. You can find a list of breaking changes for recent releases of Visual Studio:

[Visual C# 2012 RC Breaking Changes](http://msdn.microsoft.com/en-us/library/hh678682%28v=vs.110%29)
[Visual C# 2010 Breaking Changes](http://msdn.microsoft.com/en-us/library/ee855831.aspx)
[Visual C# 2008 Breaking Changes](http://msdn.microsoft.com/en-us/library/cc713578%28v=vs.90%29)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-05T09:40:19.373

某些功能可能已被弃用，如果您跳过多个更新，则可能会一起删除该功能，从而造成一些麻烦。

[.NET Framework 中已过时的内容](http://msdn.microsoft.com/en-us/library/ee461502.aspx)

# html - html css 背景叠加

> ID：10894743
> 
> 赞同：2
> 
> 时间：2012-06-05T09:25:12.330
> 
> 标签：html, css

我已经有一个背景，我想做的是在它上面放一个白色块和里面的文本/图像，就像这里 - [http://dzconstructions.co.uk](http://dzconstructions.co.uk)

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T10:16:17.170

最好避免内联样式并将以下内容放在单独的样式表中......

```
body {
  background-image:url(/background-image.png);
}

div {
  width:500px; 
  height: 200px;
  background-color: white;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T09:32:13.917

使用 CSS 放置背景

```
body {
    background: transparent url("Images/Background.png");
    height: 100%;
    width: 100%;
} 
```

然后用Divs在上面加白块

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-05T09:29:07.497

div 应该可以帮助您实现这一点。只需将背景放在主体上并插入背景颜色为白色的 div。然后，您可以将内容/图像插入此 div。

例子：

```
<body style="background-image:url(/background-image.gif)">
<div style="width:500px; height: 200px;">
YOUR CONTENT AND IMAGES HERE
</div>
</body> 
```

# spring - Spring：如何定义数据库配置？

> ID：10894746
> 
> 赞同：1
> 
> 时间：2012-06-05T09:25:21.037
> 
> 标签：spring

我尝试通过 jdbcTemplate 对 MySql 数据库执行简单请求，但是当框架加载和解析定义我的数据源的 xml 文件时出现错误：

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xmlns:util="http://www.springframework.org/schema/util"
xmlns:tx="http://www.springframework.org/schema/tx"
xsi:schemaLocation="http://www.springframework.org/schema/beans
    http://www.springframework.org/schema/beans/spring-beans-3.0.xsd

    http://www.springframework.org/schema/tx
    http://www.springframework.org/schema/tx/spring-tx-3.0.xsd">

    <bean id="dataSource" class="org.springframework.jdbc.datasource.DriverManagerDataSource">
      <property name="driverClassName" value="com.mysql.jdbc.Driver"/>
      <property name="url" value="jdbc:mysql://localhost:3306/spring_training"/>
      <property name="username" value="root"/>
      <property name="password" value="pass"/>
    </bean>
</beans> 
```

web.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app 
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
xmlns="http://java.sun.com/xml/ns/javaee" 
xmlns:web="http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd" 
xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd" id="WebApp_ID" version="2.5">
  <display-name>SpringTrainingTemplate</display-name>

<context-param>
    <param-name>contextConfigLocation</param-name>
    <param-value>/WEB-INF/spring-config.xml /WEB-INF/jdbc-config.xml</param-value>
</context-param>

<listener>
    <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
</listener>

<servlet>
    <servlet-name>hello</servlet-name>
    <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
    <init-param>
        <param-name>contextConfigLocation</param-name>
        <param-value>/WEB-INF/servlet-context.xml</param-value>
    </init-param>
    <load-on-startup>1</load-on-startup>
</servlet>

<servlet-mapping>
    <servlet-name>hello</servlet-name>
    <url-pattern>/</url-pattern>
</servlet-mapping> 
```

和调用它的控制器：

```
@Controller
public class HomeController {

@Autowired
private ExampleService exampleService;

@RequestMapping(value = "/details", method = RequestMethod.GET)
public String details(Model model) {

    ApplicationContext context = new ClassPathXmlApplicationContext("jdbc-config.xml");
    ExampleDao dao = (ExampleDao) context.getBean("ExampleDao");
    List<Application> list = dao.getAllApplications();

    model.addAttribute("application", list.get(0).getName());
    model.addAttribute("descriptionOfApplication", list.get(0).getDescription());

    return "details";
}
}

public class ExampleDao {

private String request = "select * from application";

private JdbcTemplate jdbcTemplate;

@Autowired
private DataSource dataSource;

public ExampleDao(DataSource dataSource) {
    this.jdbcTemplate = new JdbcTemplate(dataSource);
}

public List<Application> getAllApplications() {
    List<Application> applications = this.jdbcTemplate.query(request, new RowMapper<Application>() {
        @Override
        public Application mapRow(ResultSet rs, int i) throws SQLException {
            Application application = new Application();
            application.setName(rs.getString("name"));
            application.setType(rs.getString("type"));
            application.setDescription(rs.getString("description"));
            application.setDownloads(rs.getInt("downloads"));
            return application;
        }
    });
    return applications;
}
} 
```

![在此处输入图像描述](../Images/fb94a8c28c4a75ec37a33e42a39115ae.png)

当我运行它并输入时，`http://localhost:8080/details`我得到了一个带有堆栈跟踪的 500 异常，并带有以下消息：

```
root cause
org.springframework.beans.factory.BeanDefinitionStoreException: IOException parsing XML document from class path resource [jdbc-config.xml]; nested exception is java.io.FileNotFoundException: class path resource [jdbc-config.xml] cannot be opened because it does not exist 
```

你能解释一下如何以正确的方式配置 jdbc 连接，或者我的方法是否正确，我应该在哪里寻找我的问题的解决方案？所有帮助将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-05T09:44:42.607

Spring 找不到您的 jdbc-config.xml 配置文件。

您可以将它放在您的类路径而不是 WEB-INF 文件夹中，并将其加载到您的 web.xml 中，如下所示：

```
<context-param>
    <param-name>contextConfigLocation</param-name>
    <param-value>classpath:spring-config.xml,classpath:jdbc-config.xml</param-value>
</context-param> 
```

一个好的做法是在 src 文件夹中创建文件夹 main 和 resources 并将它们添加到类路径中。然后你可以把 spring 配置文件放在 src/resources 文件夹中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-05T09:32:51.840

> 类路径资源 [jdbc-config.xml] 无法打开，因为它不存在

文件名是否正确，它位于何处？指定数据库连接的文件不在您所说的位置 - 在类路径上。

# python - suds 中的属性和值

> ID：10894747
> 
> 赞同：1
> 
> 时间：2012-06-05T09:25:34.740
> 
> 标签：python, wsdl, suds

我在 wsdl 中遇到了一些复杂类型的问题。这里是wsdl的一部分：

```
<xs:element name="Params" nillable="true">                   
    <xs:complexType>                                                                       
        <xs:sequence>                                                                      
            <xs:element name="Param" minOccurs="0" maxOccurs="unbounded">
                <xs:complexType>                             
                    <xs:simpleContent>                       
                        <xs:extension base="xs:string">      
                            <xs:attribute name="name" type="xs:string"/>
                        </xs:extension>                      
                    </xs:simpleContent>                      
                </xs:complexType>                            
            </xs:element>                                                                  
        </xs:sequence>                                                                     
    </xs:complexType>                                                                      
</xs:element> 
```

SOAP-req 中的结果字段必须类似于：

```
<ns0:Params>
    <ns0:Param ns1:name="name1">val1</ns1:Param>
    <ns0:Param ns1:name="name1">val1</ns1:Param>
</ns0:Params> 
```

泡沫给了我下一个类型：

```
>>> client.factory.create("Payment.Params.Param")  
(Param){  
    _name = ""  
} 
```

如果我设置 _name，suds 会生成 XML：

```
<ns0:Params>
    <ns0:Param name="name1"/>
    <ns0:Param name="name2"/>
</ns0:Params> 
```

所以，我可以为“Param”设置属性名称，但是如何设置值呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-29T11:51:51.207

您必须创建没有属性的“参数”元素，然后使用编组插件添加“名称”属性：

```
# disclaimer: not tested!
from suds.plugin import MessagePlugin

class MyPlugin(MessagePlugin):
    def marshalled(self, context):
        body = context.envelope.getChild('Body')
        params = body.getChild('fix_this_path').getChild('Params')  
        foo = params[0]
        foo.set('name', 'name1')

client = Client(url, plugins=[MyPlugin()])
...
params = client.factory.create("Payment.Params")
params.param = "val1" 
```

更多信息在这里：[https ://fedorahosted.org/suds/wiki/Documentation#MessagePlugin](https://fedorahosted.org/suds/wiki/Documentation#MessagePlugin)

希望这可以帮助

# jsf - 用于处理用户身份验证的 JSF 2.0 代码是什么？

> ID：10894748
> 
> 赞同：0
> 
> 时间：2012-06-05T09:25:38.860
> 
> 标签：jsf, jakarta-ee, login

J2EE 6 的标准教程显示了用户身份验证的处理，如下所示：

```
<form method="POST" action="j_security_check">
    <table cellpadding="0" cellspacing="0" border="0">
         <tr>
            <td align="right">Username:&nbsp;</td>
            <td>
                <input type="text" name="j_username">
             </td>
         </tr>
         <tr>
             <td align="right">Password:&nbsp;</td>
             <td>
                <input type="password" name="j_password">
             </td>
         </tr>
         <tr>
             <td></td>
             <td>
                 <input type="submit" value="Login">
             </td>
        </tr>
    </table>
</form> 
```

该方法使用具有特殊字段“j_username”和“j_password”的特殊容器函数“j_security_check”。

*** 这可以在 JSF 2.0 中实现吗？
* 认证成功后 j_username/j_password 字段是否可用？更准确地说，在用户通过身份验证后如何识别用户？**

任何简单的示例代码片段将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T04:28:26.577

> *这可以在 JSF 2.0 中实现吗？*

是的。毕竟只是一堆 HTML，而容器是进行身份验证的人，而不是 JSF 本身。另一种方法是通过[`HttpServletRequest#login()`](http://docs.oracle.com/javaee/6/api/javax/servlet/http/HttpServletRequest.html#login%28java.lang.String,%20java.lang.String%29). 这使您可以使用具有基于 JSF 的验证、ajax 幻想等功能的完整 JSF 表单。另请参阅此答案以获取启动示例：[JSF 是否支持基于表单的安全性](https://stackoverflow.com/questions/10686547/does-jsf-support-form-based-security)

* * *

> *认证成功后 j_username/j_password 字段是否可用？更准确地说，在用户通过身份验证后如何识别用户？*

Only the username is in JSF context available by [`ExternalContext#getRemoteUser()`](http://docs.oracle.com/javaee/6/api/javax/faces/context/ExternalContext.html#getRemoteUser%28%29) and in views by `#{request.remoteUser}`. The password is not available for obvious security reasons.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-06T06:34:36.143

1.  很久以前，我尝试使用 Spring Security 完成一个 jsf (1.2) 登录页面。但是，由于我没有成功，所以我最终放弃了，并使用“常规” jsp 进行操作，就像您在上面所做的那样。

2.  您可以通过将当前 SessionContext 注入您的 EJB 来识别当前用户：

    ```
    @Resource
    SessionContext sessionContext;
    public void doSth() {
        log.info("The current user's name is: " 
           + sessionContext.getCallerPrincipal().getName() );
    } 
    ```

    你可以在 HttpServletRequest 上做同样的事情：

    ```
    request.getUserPrincipal(); 
    ```

    或来自 FacesContext：

    ```
    FacesContext.getCurrentInstance().getExternalContext().getUserPrincipal(); 
    ```

# asp.net-mvc - 为视图中 DropDownListFor 中的项目设置值

> ID：10894750
> 
> 赞同：1
> 
> 时间：2012-06-05T09:25:43.000
> 
> 标签：asp.net-mvc

我有这个：

```
<div class="editor-field">
        <%: Html.DropDownListFor(m => m.Language, new SelectList(new[] { "string1", "string2", "string3", "string4" }, "string1"))%>
</div> 
```

我希望字符串具有一些值。例如，string1，有一个 value=1，string2：value=2 等。如何做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T10:31:59.510

只需使用

```
new List<SelectListItem>(){ new SelectListItem{Text="item1", Value = "valuer1", ... } 
```

或使用 SelectList 但将自定义对象的 Dictionary 或 List<> 传递给它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T14:45:56.207

**静态绑定**

```
public class HomeController : Controller
    {
        public ActionResult Index()
        {
            ViewBag.Message = "Welcome to the Training Courses...";
            List objcourses = new List();
            objcourses.Add("Asp.Net");
            objcourses.Add("MVC");
            objcourses.Add("WCF");
            objcourses.Add("WPF");
            objcourses.Add("C#.Net");
            ViewBag.Courses = new SelectList(objcourses);
            return View();
        }
    }

@{
ViewBag.Title = "Home Page";
}
Index
@using(@Html.BeginForm(“Index”,”Home”,FormMethod.Get)) {
Courses List; @Html.DropDownList(“Courses“)
} 
```

**动态绑定**

```
public class HomeController : Controller
    {
        public ActionResult Index()
        {
            private MovieDBContext db = new MovieDBContext();
            var GenreLst = new List();
            var GenreQry = from d in db.Movies
                           orderby d.Genre
                           select d.Genre;
            GenreLst.AddRange(GenreQry.Distinct());
            ViewBag.Courses = new SelectList(GenreLst);
            return View();
        }
    }
@{
    ViewBag.Title = "Home Page";
}
Index

@using(@Html.BeginForm("Index","Home",FormMethod.Get)) {

Courses List; @Html.DropDownList("Courses")
} 
```

# forms - 如何在表单 Symfony2 中添加自动完成字段？

> ID：10894754
> 
> 赞同：8
> 
> 时间：2012-06-05T09:25:54.803
> 
> 标签：forms, symfony

实际上，我可以在编辑任务中为用户分配任务。编辑任务时，我会显示系统中所有用户的下拉列表。现在，我将能够为用户显示带有自动完成功能的文本输入，并且能够在不存在的情况下添加用户。

怎么做？

提前致谢。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-06-05T11:37:27.217

你需要做两件事：

1) 创建数据转换器

hich 将允许您使用输入字段而不是链接实体的默认下拉列表。

数据转换器基本上将您的输入（在您的情况下为用户名字符串）转换为您可以与实体一起存储的实际用户对象。它将允许您定义一个输入字段，而不是链接实体的默认下拉列表。看一下[文档](http://symfony.com/doc/current/cookbook/form/data_transformers.html)，很简单。

2) 创建 Ajax 自动完成

这可以在客户端使用您想要的任何库（jQuery、Prototype 等）来完成，而服务器端则在您的 Controller 操作中处理它并使用 JSON 或呈现的模板进行回复。那里有很多教程。如果没有找到，Ajax 结果可能包括一个创建新用户的链接。

数据转换器是您需要关注的，我会在处理 UI 之前先完成它。

# php - 过滤带有空行的 MySQL 结果

> ID：10894757
> 
> 赞同：0
> 
> 时间：2012-06-05T09:26:05.233
> 
> 标签：php, mysql

我搜索了高和低以过滤我的 mysql 查询，但 WHERE NOT NULL 不起作用。我希望有人可以帮助我。我有一些名为“路径”的空列。我想过滤掉这些。

我的查询：

```
SELECT 
p.path, p.title, p.body, p.post_date, u.username FROM pages p 
LEFT JOIN users u ON p.post_author = u.id 
ORDER BY p.id ASC 
```

我怎样才能完成这项工作？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T09:33:02.463

```
SELECT 
    p.path, p.title, p.body, p.post_date, u.username 
FROM pages p 
LEFT JOIN users u ON p.post_author = u.id
WHERE 
    p.path IS NOT NULL AND 
    p.path <> ''
ORDER BY p.id ASC 
```

那么这是否有帮助，或者您在问一些不同的问题？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T09:33:30.970

尝试使用 php 检查空字段：

```
$query = "SELECT 
    p.path, p.title, p.body, p.post_date, u.username FROM pages p 
    LEFT JOIN users u ON p.post_author = u.id 
    ORDER BY p.id ASC";
$result = mysql_query($query);

while( $row = mysql_fetch_assoc($result) ){

// Check for empty record
if( !empty($row['path']) ){
    echo $row['path'];
   }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-05T09:39:47.233

试试这个，这可能有效。

```
SELECT 
p.path, p.title, p.body, p.post_date, u.username FROM pages p 
LEFT JOIN users u ON p.post_author = u.id 
WHERE p.path IS NOT NULL AND p.path <> ''
ORDER BY p.id ASC 
```

# java - L10N：为什么应用默认语言

> ID：10894758
> 
> 赞同：3
> 
> 时间：2012-06-05T09:26:06.120
> 
> 标签：java, jsf-2, localization

在我的应用程序中，在[登录页面](http://lingua123.com)上，页面顶部有一个语言选项。

![语言选项](../Images/269d6b0c007143c275510636b95bd31e.png)

如果我选择中文，一切都会完美地翻译成中文。

![中国人](../Images/672580b09c096d5184875101a979091c.png)

如果我点击`Refresh`按钮 或`Ctrl + R`，页面仍然是中文的。但是，如果我打开另一个指向相同 URL 的选项卡，即使语言选项仍然显示`Chinese`已选择，一切都会再次变为英语。

![又是英语](../Images/5bb39be47ca76afb98ef3a15a6a31df0.png)

但是，如果您单击`About us`或`Methodology`，则下一页将再次显示为中文。

如果您能告诉我我在这里做错了什么，我将不胜感激。

最好的祝福，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T12:45:12.370

您如何设置`UIViewRoot`.

它应该`<f:view locale>`在您的主模板中按照以下方式完成，也许您对所有其他页面都有此权限，但对主页没有此权限。

例如

```
<!DOCTYPE html>
<html lang="#{localeBean.language}"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:h="http://java.sun.com/jsf/html"
    ...
>
    <f:view locale="#{localeBean.locale}">
        <h:head>
            ...
        </h:head>
        <h:body>
            ...
        </h:body>
    </f:view>
</html> 
```

哪里`#{localeBean}`有一个和[这个](https://stackoverflow.com/questions/4830588/jsf-locale-is-set-per-request-not-for-session/4830669#4830669)`@SessionScoped`相似的。

顺便说一下，这个问题表明这些页面不共享一个公共主模板，并且您正在到处复制 XHTML 代码。我也会努力的:)

# java - 如何在 Swing 中使用 Spring IOC

> ID：10894760
> 
> 赞同：1
> 
> 时间：2012-06-05T09:26:14.413
> 
> 标签：java, spring, swing, spring-mvc

我正在使用 Swing 开发一个桌面应用程序，但是我想使用 Spring 框架来使用 IOC，并且我想使用接口技术来做。但是当我通过接口的实例调用函数并且该接口由声明被调用函数的类实现时，我得到了 nullPointerException。

这是我的简单应用程序代码：

## 界面：

```
public interface IEmpMasterService {    
    public InternalResultsResponse<EmpMaster> maintainEmpMaster(
            EmpMaster empMaster);
} 
```

## 实现类：

```
public class EmpMasterService implements IEmpMasterService {    
    private IEmpMasterDAO empMasterDAO; 
    public IEmpMasterDAO getEmpMasterDAO() {
        return empMasterDAO;
    }
    public void setEmpMasterDAO(IEmpMasterDAO empMasterDAO) {
        this.empMasterDAO = empMasterDAO;
    }
    @Override
    public InternalResultsResponse<EmpMaster> maintainEmpMaster(
            EmpMaster empMaster) {
        InternalResultsResponse<EmpMaster> response = new InternalResultsResponse<EmpMaster>();
        //some logic her...
        response = getEmpMasterDAO().maintainEmpMaster(request);
        return response;
    }} 
```

## DAO接口：

```
public interface IEmpMasterDAO {
    InternalResultsResponse<EmpMaster> maintainEmpMaster(
            EmpMasterRequest request);
}
class Implementing DAO:
public class EmpMasterDAO extends HibernateDaoSupport implements IEmpMasterDAO{
    @Override
    public InternalResultsResponse<EmpMaster> maintainEmpMaster(
            EmpMasterRequest empMasterRequest) {
//hibernate code goes here...       
        return resultsResponse;
    }
} 
```

## 主类：

```
public class EmpManager extends javax.swing.JFrame {    
    private IEmpMasterService empMasterService;
    private static ApplicationContext context;  
    public IEmpMasterService getEmpMasterService() {
        return empMasterService;
    }
    public void setEmpMasterService(IEmpMasterService empMasterService) {
        this.empMasterService = empMasterService;
    }
public static void main(String args[]) {
        context = new ClassPathXmlApplicationContext(new String[]{"ApplicationContext.xml"});
empMasterService = (EmpMasterService)context.getBean("empMasterService");
}
private void jButton1ActionPerformed(java.awt.event.ActionEvent evt) {
        String name = jTextField1.getText();
        String salary = jTextField2.getText();
        EmpMaster empMaster = new EmpMaster();
        empMaster.setEmpName(name);
        empMaster.setSalary(Double.parseDouble(salary));  
//***** getting Error at this line *****//    
        InternalResultsResponse<EmpMaster> response = getEmpMasterService().maintainEmpMaster(empMaster);       
    } 
```

我的 ApplicationContext.xml ：

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xsi:schemaLocation="http://www.springframework.org/schema/beans
           http://www.springframework.org/schema/beans/spring-beans-3.0.xsd">
    <import resource="dataSource.xml"/>
       <bean id="mainFrame" class="org.UI.EmpManager">
        <property name="title"> <value>Spring Example</value></property>    
        <property name="empMasterService" ref="empMasterServiceImpl"></property>    
    </bean>     
    <bean id="empMasterServiceImpl" class="org.service.EmpMasterService">
        <property name="empMasterDAO" ref="empMasterDAOTarget"></property>      
    </bean> 
    <bean id="empMasterDAOTarget" class="org.DAO.EmpMasterDAO">
        <property name="hibernateTemplate" ref="matrixHibernateTemplate"/>
    </bean> 
</beans> 
```

当我点击按钮时，我得到了一个错误。

```
Exception in thread "AWT-EventQueue-0" java.lang.NullPointerException
    at org.UI.EmpManager.jButton1ActionPerformed(EmpManager.java:140)
    at org.UI.EmpManager.access$0(EmpManager.java:132)
    at org.UI.EmpManager$1.actionPerformed(EmpManager.java:67)
    at javax.swing.AbstractButton.fireActionPerformed(Unknown Source)
    at javax.swing.AbstractButton$Handler.actionPerformed(Unknown Source)
    at javax.swing.DefaultButtonModel.fireActionPerformed(Unknown Source)
    at javax.swing.DefaultButtonModel.setPressed(Unknown Source)
    at javax.swing.plaf.basic.BasicButtonListener.mouseReleased(Unknown Source)
    at java.awt.Component.processMouseEvent(Unknown Source)
    at javax.swing.JComponent.processMouseEvent(Unknown Source)
    at java.awt.Component.processEvent(Unknown Source)
    at java.awt.Container.processEvent(Unknown Source)
    at java.awt.Component.dispatchEventImpl(Unknown Source)
    at java.awt.Container.dispatchEventImpl(Unknown Source)
    at java.awt.Component.dispatchEvent(Unknown Source)
    at java.awt.LightweightDispatcher.retargetMouseEvent(Unknown Source)
    at java.awt.LightweightDispatcher.processMouseEvent(Unknown Source)
    at java.awt.LightweightDispatcher.dispatchEvent(Unknown Source)
    at java.awt.Container.dispatchEventImpl(Unknown Source)
    at java.awt.Window.dispatchEventImpl(Unknown Source)
    at java.awt.Component.dispatchEvent(Unknown Source)
    at java.awt.EventQueue.dispatchEvent(Unknown Source)
    at java.awt.EventDispatchThread.pumpOneEventForFilters(Unknown Source)
    at java.awt.EventDispatchThread.pumpEventsForFilter(Unknown Source)
    at java.awt.EventDispatchThread.pumpEventsForHierarchy(Unknown Source)
    at java.awt.EventDispatchThread.pumpEvents(Unknown Source)
    at java.awt.EventDispatchThread.pumpEvents(Unknown Source)
    at java.awt.EventDispatchThread.run(Unknown Source) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T13:23:53.663

您如何创建 EmpManager，在您的应用程序 xml 中有一个用于管理器的 bean，但它也包含您的 main 方法。然后在您的 main 方法中，您将获取应用程序上下文并设置服务 bean，因此您的 EmpManager bean 不会在您的应用程序上下文中执行任何操作。

我建议将 main 方法提取到不同的类中，在该类中加载应用程序上下文并仅在 UI 管理器上使用 getBean。您当前的设置方式忽略了 Spring 的许多 IoC 功能，直接从应用程序上下文中获取 bean，而不是让 Spring 为您做这些。

这可能不会直接解决你的问题，但它至少可以让 Spring 有一个单一的入口点，并将 DI 保留在 Spring 手中，而不是依靠你自己设置它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T09:43:47.780

您的代码中缺少某些内容。

您发布的主要功能不会调用任何 Swing 框架的创建。这真的是您要调用的代码吗？

其次，bean 名称不匹配，在您的 xml 中，bean 被命名为`empMasterServiceImpl`，而在代码中您使用`empMasterService`. 不起作用。

# java - 基于java中的第二个节点读取xml的第三个节点

> ID：10894761
> 
> 赞同：0
> 
> 时间：2012-06-05T09:26:20.870
> 
> 标签：java, xml

我如何读取 xml 的第三个节点，它是基于使用 java 的第二个节点产品组的产品。我想根据产品代码获取产品

```
 <?xml version="1.0" encoding="UTF-8"?>
            <Restaurant>
                <ProductGroup id="1">
                    <label>BURGERS</label>
                    <image_url>burger.png</image_url>
                    <Product>
                        <label>Hamburger</label>
                        <productCode>aab</productCode>
                        <img_url>Hamburger.png</img_url>
                        <price>129.46</price>
                    </Product>
                    <Product>
                        <label>Cheeseburger</label>
                        <productCode>cch</productCode>
                        <img_url>Cheeseburger.png</img_url>
                        <price>129.46</price>
                    </Product>      
                </ProductGroup>
                <ProductGroup id="2">
                    <label>FRIES/ONION RING</label>
                    <image_url>friesonionring.png</image_url>
                    <Product>
                        <label>Fries</label>
                        <productCode>FRS</productCode>
                        <img_url>fries.png</img_url>
                        <price>50.46</price>
                    </Product>
                    <Product>
                        <label>Onion Rings</label>
                        <productCode>ONR</productCode>
                        <img_url>onionring.png</img_url>
                        <price>50.46</price>
                    </Product>      
                </ProductGroup>
            </Restaurant> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T09:48:49.890

有一种专门为此类任务设计的查询语言。它被称为 XPath。您可以使用它从 XML 树中选择特定节点，方法是指定类似于您从操作系统或 Web 地址中知道的路径。它还使您能够指定各种条件，这些条件决定了您选择的节点。

让我们看几个例子。

您可以使用这样的 XPath 查询从由其`id`属性值指定的组中选择所有产品代码：

```
/Restaurant/ProductGroup[@id='2']/Product/productCode 
```

要从特定组中获取具有特定 ID 的产品，您需要添加另一个条件。以下查询还要求`Product`元素有一个名为`productCode`'的子元素`aab'`：

```
/Restaurant/ProductGroup[@id='2']/Product[productCode='aab'] 
```

也可以不指定文档的整个结构，只需要一个`Product`元素位于文档中的某个位置，而不必位于作为 Restaurant 子级的 ProductGroup 中。

```
//Product[productCode='cch'] 
```

有许多关于 XPath 的教程将帮助您了解这种简单的语言。它功能强大、易于理解、实现广泛，并且不需要您的代码冗长。

要在 Java 应用程序中使用它的强大功能，请查看 XPath API：http: [//ibm.com/developerworks/library/x-javaxpathapi/index.html](http://ibm.com/developerworks/library/x-javaxpathapi/index.html)

# c - 通过管道进行服务器/客户端通信

> ID：10894763
> 
> 赞同：0
> 
> 时间：2012-06-05T09:26:40.110
> 
> 标签：c, client-server, ipc, communication, pipe

我最近开始学习 IPC，但遇到了一些问题。我编写了一个程序，它创建了两个通过管道进行通信的进程，如下所示：

```
#include <stdio.h>
#include <stdlib.h>
#include <errno.h>
#include <sys/types.h>
#include <unistd.h>

int main(void)
{
    int pfds[2];
    char buf[30];
    pipe(pfds);
    if (!fork()) 
    {
        printf(" CHILD: writing to the pipe\n");
        write(pfds[1], "test", 5);
        printf(" CHILD: exiting\n");
        exit(0);
    } 
    else 
    {
        printf("PARENT: reading from pipe\n");
        read(pfds[0], buf, 5);
        printf("PARENT: read \"%s\"\n", buf);
        wait(NULL);
    }
    return 0;
} 
```

很抱歉没有处理潜在的错误，为了简单起见，我这样写。

这很好用，但我的问题是：是否有可能有两个程序 - 服务器/客户端（两个单独的可执行文件 - 不是父进程/子进程关系）通过管道进行通信？就像你可以通过 FIFO 一样？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T09:56:30.420

一个普通的管道只能连接两个相关的进程。它由一个进程创建，并在最后一个进程关闭它时消失。

要在两个单独的进程之间进行通信，您必须使用命名管道 ( [FIFO](http://linux.die.net/man/3/mkfifo) )。

# android - 连接更改接收器在启动后仍然存在/启动？

> ID：10894766
> 
> 赞同：0
> 
> 时间：2012-06-05T09:26:55.123
> 
> 标签：android, connectivity, bootcompleted

我有一个简单的广播接收器，它监听连接变化，如果网络可用，它会设置一个循环警报，启动一个短期服务。如果没有网络连接，它将禁用重复警报：

```
public class ConnectivityChange extends BroadcastReceiver {

    @Override
    public void onReceive(Context context, Intent intent) {
        Log.d(getClass().getName(), "Connectivity changed! :/");

        MyApplication app = (MyApplication ) context
                .getApplicationContext();

        if (app.isConnected()) {
            // setup repeating alarms, since we are connected.
            app.setCurrencyRatesServiceRepeatingAlarm(context);
            Log.d(getClass().getName(), "Connected :D");
        } else {
            // cancel any repeating alarm, since we are NOT connected.
            app.unsetCurrencyRatesServiceRepeatingAlarm(context);
            Log.d(getClass().getName(), "Not connected :(");
        }

    }

} 
```

清单看起来像：

```
<receiver android:name="ConnectivityChange">
    <intent-filter>
        <action android:name="android.net.conn.CONNECTIVITY_CHANGE"/>
    </intent-filter> 
</receiver> 
```

所有这些都很好。

但是，即使在我重新启动模拟器后，这段代码似乎也能运行。我不是要 BOOT_COMPLETE。我确保我没有从快照中恢复模拟器。这是预期的行为吗？我不确定这是在哪里记录的。当我遇到这个时，我正要询问 BOOT_COMPLETE。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T14:26:34.410

我知道这是一个有点老的问题，但我想我还是会权衡一下。每当您启动时，您的连接很可能会发生变化，例如设备从无连接变为连接。因此，您的代码将在每次设备启动时运行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T09:40:25.757

您可以注册一个 BOOT_COMPLETED 广播接收器，即使没有请求 RECEIVE_BOOT_COMPLETED 作为权限，它也会获得控制权。

该错误已[在此处报告](http://code.google.com/p/android/issues/detail?id=14044)

即使你可以检查[这个](https://stackoverflow.com/questions/4635353/is-android-permission-receive-boot-completed-not-required)SO 线程

# android - 从数据库中删除数据时显示即时更改

> ID：10894769
> 
> 赞同：0
> 
> 时间：2012-06-05T09:27:10.927
> 
> 标签：android, database, sqlite

**查看数据库 XML 文件：**

```
 <?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="vertical" 
android:background="@drawable/wood_bg" >

<TextView
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_gravity="center_horizontal"
    android:layout_marginBottom="10dp"
    android:layout_marginTop="10dp"
    android:text="Daily Fruit Log"
    android:textAppearance="?android:attr/textAppearanceLarge" 
    android:textStyle="bold"/>

<TableLayout
    android:layout_width="fill_parent"
    android:layout_height="wrap_content" >

    <TableRow>

    <TextView
        android:layout_width="110dp"
        android:layout_height="fill_parent"
        android:text="Name of fruit" 
        android:layout_weight="1"
        android:textStyle="bold"/>

    <TextView
        android:layout_width="wrap_content"
        android:layout_height="fill_parent"
        android:text="No Of Fruit" 
        android:layout_weight="1"
        android:textStyle="bold"/>

     <TextView
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:text="Total Calories" 
        android:layout_weight="1"
        android:textStyle="bold"/>

    </TableRow>
    </TableLayout>

<TableLayout
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_marginTop="10dp">

    <TableRow>

    <TextView
    android:id="@+id/view"
    android:layout_width="110dp"
    android:layout_height="wrap_content"
    android:text="food"
    android:layout_weight="1" />

    <TextView
        android:id="@+id/view1"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:text="1" 
        android:layout_weight="1"/>

     <TextView
         android:id="@+id/view2"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:text="20" 
        android:layout_weight="1"/>

    </TableRow>
    </TableLayout>

<Button
    android:id="@+id/bdelete"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="Clear Log"
    android:layout_gravity="center"
    android:layout_marginTop="30dp" /> 
```

**查看数据库页面的Java类：**

```
 public class FruitLog extends Activity {

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.fruitlog);

            TextView tv = (TextView) findViewById(R.id.view);
            TextView tv1 = (TextView) findViewById(R.id.view1);
            TextView tv2 = (TextView) findViewById(R.id.view2);

            FruitDB info = new FruitDB(this);
            info.open();
            String data = info.getName();
            String data1 = info.getNum();
            String data2 = info.getCal();
            info.close();

            tv.setText(data);
            tv1.setText(data1);
            tv2.setText(data2);

            Button save = (Button) findViewById(R.id.bdelete);
            save.setTextColor(Color.BLUE);
            save.setOnClickListener(new View.OnClickListener(){

                public void onClick(View v) {
                    // TODO Auto-generated method stub
                    FruitDB info = new FruitDB(FruitLog.this);
                    info.open();
                    info.deleteAll();
                    info.close();
                }

            });

} 
```

我已经编辑了代码，现在我可以删除页面中的所有数据，但问题是，我必须返回并进入此 FruitLog 页面才能查看更改（所有行都已删除）。当用户单击“清除日志”按钮而不前后导航时，我希望立即看到结果。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T09:32:08.770

您的数据库类中的此方法：

```
public boolean deleteAll() {        
    // Returns true if number of deleted rows is larger than 0;
    return mDb.delete(DATABASE_TABLE, null, 1) > 0;
} 
```

在 onClickListener 中：

```
 public void onClick(View v) {
     FruitDB db = new FruitDB(YourClass.this);
     db.open();
         db.deleteAll();
     db.close();
 } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T09:33:22.853

到`delete`整个表：

```
db.delete(DATABASE_TABLE, null, null); 
```

* * *

对于`delete`表中的特定记录：

```
db.delete(DATABASE_TABLE, whereCondition, null); 
```

例如：
db.delete(DATABASE_TABLE, "KEY_NAME='mango'", null);

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-05T09:36:07.627

```
Button save = (Button) findViewById(R.id.bdelete);
        save.setTextColor(Color.BLUE);
        save.setOnClickListener(new View.OnClickListener(){

            public void onClick(View v) {
                // TODO Auto-generated method stub

                DbHelper myDbHelper =new DbHelper(Activity.this);

            try{
                myDbHelper.open();
                myDbHelper.delete();
            }catch(Exception e){
                e.printStackTrace();
            }finally{
                myDbHelper.close();
            }

            }

        }); 
```

在 DBHelper 类中创建一个方法

```
public void delete() {
     ourDatabase.execSQL("delete from "+ DATABASE_TABLE);
     ourDatabase.execSQL("UPDATE sqlite_sequence set "+ KEY_ROWID + " =0 where name= '"+DATABASE_TABLE+"'");

} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-05T10:11:51.490

它将删除所有记录

```
public void deleteAll() {
    final SQLiteDatabase db = getWritableDatabase();
    db.delete(DATABASE_TABLE, null, null);
    db.close();
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-05T22:58:40.153

删除后将此代码移至`save.setOnClickListener(new View.OnClickListener(){..}`或移至`onResume()`

```
FruitDB info = new FruitDB(this);
        info.open();
        String data = info.getName();
        String data1 = info.getNum();
        String data2 = info.getCal();
        info.close();

        tv.setText(data);
        tv1.setText(data1);
        tv2.setText(data2); 
```

# jquery - bx 滑块加载破坏了卡扣到位

> ID：10894770
> 
> 赞同：0
> 
> 时间：2012-06-05T09:27:11.103
> 
> 标签：jquery, bxslider

在所有浏览器中，我的 bxSlider 加载时不带样式并显示所有级别，然后向左移动，直到脚本启动并卡入到位。

我尝试使用 style="display:none" 设置它所在的 div，然后在页面下方放置这个 $(document).ready(function(){ $('#div-id').css({'display ': '块'}).animate(); }); 我尝试了几种不同的语法，但对于我的生活，我无法让它工作。任何人看到明显的东西或有想法

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T15:53:38.680

做这个

```
$('#div-id').css('display','block'); 
```

而不是

```
$('#div-id').css({'display': 'block'}).animate(); 
```

html:

```
<div id="div-id"><ul class="slider"><li><a rel="gallery" href="img/carousel/1.jpg"><img src="img/carousel/1.jpg" width="170" height="150" /></a></li></ul></div> 
```

CSS：

```
#div-id {display: none} 
```

js：

```
$(document).ready(function() { $('#div-id').css('display','block'); }); 
```

或者，在我的示例中，我使用了 ul 标记，以下内容也同样有效：html（不需要 div）：

```
<ul class="slider"><li><a rel="gallery" href="img/carousel/1.jpg"><img src="img/carousel/1.jpg" width="170" height="150" /></a></li></ul> 
```

CSS：

```
.slider ul {    display:none;   } 
```

js：

```
$(document).ready(function() {      $('.slider ul').css('display','block');  }); 
```

# ruby-on-rails - 电子邮件正则表达式。这个正则表达式合适吗？

> ID：10894771
> 
> 赞同：-5
> 
> 时间：2012-06-05T09:27:13.320
> 
> 标签：ruby-on-rails, ruby, regex, email, rubular

> **可能重复：**
> [如何使用正则表达式来验证电子邮件地址？](https://stackoverflow.com/questions/201323/how-to-use-a-regular-expression-to-validate-an-email-addresses)

`\A[\w.-]+\w@[a-z\d\-.]+\.[a-z]+\z`

您如何看待上述电子邮件验证表达式。有什么错误，有什么漏洞吗？提前感谢您的支持。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T10:29:22.090

> 您如何看待上述电子邮件验证表达式。

一方面，它不接受我的地址。所以，很明显那里有一个错误。我建议您仔细阅读 RfC5322，它非常清楚地描述了地址的有效语法，尽管不幸的是它尚未针对 IDN 进行更新。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T11:17:51.127

```
[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+(?:[A-Z]{2}|com|org|net|edu|gov|mil|biz|info|mobi|name|aero|asia|jobs|museum)\b 
```

来自[正则表达式信息](http://www.regular-expressions.info/email.html)的正则表达式。它应该符合 RFC 2822 标准。

# cakephp - 电子邮件在 cake php 中进入垃圾邮件

> ID：10894773
> 
> 赞同：0
> 
> 时间：2012-06-05T09:27:17.867
> 
> 标签：cakephp, cakephp-1.3, sendmail

这是我的代码：-

```
//Sending mail
if ($this->Session->read('Enrollment.personalinfo_language') == 'English') {
    $language = "english";
    $subject = "Thank you for submitting your enrollment request to Apna Energy.";
} else {
    $language = "spanish";
    $subject = "Gracias por enviar su solicitud de inscripci?n a Apna Energy.";
}
$details = $this->Session->read('Enrollment');
$details['plan_name'] = $product['Product']['name'];
$details['rate'] = $plan_rate;
$details['term'] = $product['Term']['term'];
$this->Email->sendAs = 'html';
$this->Email->from = 'Apna Energy <contact@apnaenergy.com>';
$this->Email->to = $this->Session->read('Enrollment.personalinfo_first_name') . ' ' . $this->Session->read('Enrollment.personalinfo_last_name') . '<' . $this->Session->read('Enrollment.personalinfo_email') . '>';
$this->Email->bcc = array('my@mail.com');
$this->Email->subject = $subject;
$this->set('details', $details);
if ($this->Session->read('Enrollment.personalinfo_language') == 'English') {
    $template = "enrollment_confirmation";
} else {
    $template = "enrollment_confirmation";
}
$this->Email->template = $template;
$this->Email->send(); 
```

我的问题是，如果客户填写表格，他们在他/她的垃圾邮件文件夹中接收邮件.. 客户在“to”中的邮件 id .. 以及我在“BCC”中的邮件 id 邮件在我的收件箱文件夹中正常。

我关注了两个 URL，但它们对我没有用..

[Cakephp 电子邮件变成垃圾邮件](https://stackoverflow.com/questions/4215013/cakephp-emails-going-to-spam)

[如何确保以编程方式发送的电子邮件不会自动标记为垃圾邮件？](https://stackoverflow.com/questions/371/how-do-you-make-sure-email-you-send-programmatically-is-not-automatically-marked)

引导我朝着正确的方向前进。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T09:33:10.070

通过使用 SMTP

使用普通 PHP，您的服务器必须正确配置，这对于初学者来说并不容易（MX 记录需要匹配服务器 ip 等）。因此，只要始终坚持使用 SMTP 作为邮件网关，就可以了。

PS：我不认为它与你的代码有任何关系，虽然它不是很漂亮。例如：您应该转换从会话中读取的数组以避免引发通知：

```
$details = (array)$this->Session->read('Enrollment'); 
```

# ios - 在没有互联网的两个 iDevice 之间传输数据

> ID：10894774
> 
> 赞同：1
> 
> 时间：2012-06-05T09:27:19.763
> 
> 标签：ios, file, transfer

> **可能重复：**
> [蓝牙点对点网络 API iOS](https://stackoverflow.com/questions/7733338/bluetooth-peer-to-peer-networking-apis-ios)

我正在构建一个应用程序，我需要在两个应用程序之间传输文件或信息字符串。每个 iDevice 上一个。每个设备都有一个单独的应用程序。有什么方法可以做到这一点（最好不需要 wifi 或 3G 或 4g）。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-06-05T09:30:49.147

也许这个问题可以帮助你： [蓝牙点对点网络 APIs iOS](https://stackoverflow.com/questions/7733338/bluetooth-peer-to-peer-networking-apis-ios)

# jquery - jQuery 中的 $(document).ready(...) 和 $(function() {}) 有什么区别？

> ID：10894777
> 
> 赞同：2
> 
> 时间：2012-06-05T09:27:40.633
> 
> 标签：jquery

有什么区别：

```
$(document).ready(function() {// Do something}); 
```

和

```
$(function() {//Do something}); 
```

在 jQuery 中？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-05T09:28:51.807

如果我简而言之，它们是**alias**。它们是等价的。

### 笔记

```
$(document).ready(function() {

})

$().ready(function() {
  // this is not recommended
}) 

$(function() {

}); 
```

都是一样的。

* * *

### 更多的

jQuery 开发者推荐使用：

```
$(document).ready(function() {

}); 
```

为什么`$().ready()`不推荐看看为什么不推荐[“$().ready(handler)”？](https://stackoverflow.com/questions/10753306/why-readyhandler-is-not-recommended)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-05T09:33:02.700

```
$(document).ready(handler)
$().ready(handler) (this is not recommended)
$(handler) 
```

是等价的。

实际上，你可以调用`.ready(handler)`任何*jQuery*对象，无论它包含什么，它都会做同样的事情：

```
ready: function( fn ) {
    // Attach the listeners
    jQuery.bindReady();

    // Add the callback
    readyList.add( fn );

    return this;
}, 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-05T09:30:11.780

没有。

来自 jQ API：

> 以下所有三种语法都是等效的：
> 
> ```
>  $(document).ready(handler)
>  $().ready(handler) (this is not recommended)
>  $(handler) 
> ```

[http://api.jquery.com/ready/](http://api.jquery.com/ready/)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-06-05T09:29:22.403

它们是相同的（意味着它们做同样的事情）。从 doc 检查这些行

```
All three of the following syntaxes are equivalent:

$(document).ready(handler)
$().ready(handler) (this is not recommended)
$(handler) 
```

实际上`$(handler)`是一个硬编码的快捷方式`$(document).ready(handler)`。在这里的源代码[http://code.jquery.com/jquery.js](http://code.jquery.com/jquery.js)如果你搜索`rootjQuery`你很快就会找到这些行

```
// HANDLE: $(function)
        // Shortcut for document ready
        } else if ( jQuery.isFunction( selector ) ) {
            return rootjQuery.ready( selector );
        } 
```

或查看此链接[https://github.com/jquery/jquery/blob/37ffb29d37129293523bf1deacf3609a28b0ceec/src/core.js#L174](https://github.com/jquery/jquery/blob/37ffb29d37129293523bf1deacf3609a28b0ceec/src/core.js#L174)以了解

表示如果传递`selector`的是一个函数，那么它被用作`$(document).ready(`处理程序。

[http://api.jquery.com/ready/](http://api.jquery.com/ready/)

还要检查[哪个 JQuery document.ready 更好？](https://stackoverflow.com/questions/6332760/which-jquery-document-ready-is-better)

# tomcat - jsf东西的gzip压缩

> ID：10894779
> 
> 赞同：6
> 
> 时间：2012-06-05T09:27:45.393
> 
> 标签：tomcat, jsf-2, primefaces, mojarra

我有一个在 tomcat 6 上运行的 jsf 应用程序（mojarra 2.1.8，primefaces 3.3）。在使用谷歌页面速度分析 firebug 页面时，我意识到我可以通过 gzip 压缩来优化一些东西。

```
Compressing the following resources with gzip could reduce their transfer size by 371,1KiB (74% reduction).

 Compressing http://localhost:8080/someApp/javax.faces.resource/jquery/jquery.js.jsf?ln=primefaces could save 72,5KiB (74% reduction).
 Compressing http://localhost:8080/someApp/javax.faces.resource/theme.css.jsf?ln=primefaces-aristo could save 53,4KiB (71% reduction).
 Compressing http://localhost:8080/someApp/javax.faces.resource/jsf.js.jsf?ln=javax.faces could save 49,6KiB (78% reduction). 
 ... 
```

我已经在 server.xml 中打开了压缩

```
<Connector connectionTimeout="20000" port="8080" protocol="HTTP/1.1" redirectPort="8443"
      compression="on" 
      noCompressionUserAgents="gozilla, traviata"
      compressableMimeType="text/html,text/xml,text/plain,application/javascript,application/json,text/javascript"/> 
```

但它不会压缩上面列出的文件。

我还需要做什么才能使压缩工作？

强尼

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-06T01:47:17.823

你`server.xml`的一切都很好。您的具体问题很可能是您编辑了错误的`server.xml`文件。在像 Eclipse 这样的 IDE 中，原始的 Tomcat 服务器安装默认保持不变。*相反，Eclipse 在Servers*项目中创建其所有配置文件的副本，并使用工作区元数据来部署 web 应用程序，最终只使用 Tomcat 安装中的 Tomcat 服务器引擎。

确保您正在编辑正确的`server.xml`文件，即*Servers*项目中的文件：

![在此处输入图像描述](../Images/17dfc75165b546f65813af082ba5a795.png)

Tomcat 自己的`/conf/server.xml`文件仅在您在 Eclipse 之外启动它时使用，或者当您告诉 Eclipse 完全控制 Tomcat 安装时使用。为此，请双击*服务器*视图中的 Tomcat 服务器条目并相应地更改*服务器位置*。

![在此处输入图像描述](../Images/f8e07c18ffa79b595c412727c5b3ed34.png)

# authentication - 是否可以将 facebook 和 twitter 作为电子商务网站的身份验证？

> ID：10894780
> 
> 赞同：0
> 
> 时间：2012-06-05T09:27:48.337
> 
> 标签：authentication, e-commerce

我一直在环顾四周，注意到电子商务网站没有使用社交身份验证，我正在构建一个电子商务网站，并想知道不使用社交身份验证的原因。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T09:37:40.763

In a recent survey my employer conducted, we established that in younger (<30 years) users there was a perception that they did not want to link financial data with there social networking data due to, primarily, a lower level of trust in social networking brands, w.r.t visa et. al

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-05T13:23:35.153

这取决于，您会存储信用卡详细信息吗？如果可以通过社交网络登录进行购买，您可能会遇到一些 PCI 合规性问题。

如果您只是将其用作注册的有用方式，那么您应该没问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-05T09:33:33.107

我永远不会相信任何允许我使用我的 Facebook 帐户登录的网站。让我的用户和密码被嗅探和滥用的风险太大。

# c# - cshtml中的'@'符号是什么意思？

> ID：10894783
> 
> 赞同：6
> 
> 时间：2012-06-05T09:28:04.790
> 
> 标签：c#, .net, html

你能解释一下cshtml中每个变量之前的'@'符号是什么意思吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-05T09:31:10.853

@ 用于从视图标记切换到代码。是打印单个值还是编写代码块。

来自[ASP.NET](http://www.asp.net/web-pages/tutorials/basics/2-introduction-to-asp-net-web-programming-using-the-razor-syntax)：

> @ 字符开始内联表达式、单语句块和多语句块：

阅读有关其语法的[教程](https://www.w3schools.com/asp/razor_intro.asp)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2016-05-17T10:44:15.507

我会尽量简化答案。我自己写了一段代码，弄明白了。最常用的地方是：-

*   用于在 Razor 视图中放置注释（@* 这是注释行 *@）
*   与直接从控制器返回的 ViewData 或 Viewbag 属性一起使用时。（例如`@ViewData["SomeVariable"]`）
*   用于在剃刀视图中标记一段服务器端代码。它可以是单行甚至是块。（例如 `@{int flag = 0, lastVar = 0;}` ）
*   用于描述来自模型（如在 MVC 中）的内联变量，该变量与标准 html 标记一起使用。（例如 `<i>You reached a new level <b> @item.levelName </b></i>` ）

**注意：**即使表达式已经在已经用“@”符号描述的服务器代码块内，也必须放置这个内联变量的“@”符号。

```
 <ul>
    @for (int i = 0; i < 10; i++) {
    <li>@i</li>     /*See this inline depiction despite the external for-loop already depicted.*/
    }
    </ul> 
```

# php - 用php下载文件

> ID：10894784
> 
> 赞同：1
> 
> 时间：2012-06-05T09:28:11.213
> 
> 标签：php, xampp

我只是想知道。所以我有两台电脑，其中一台安装了 xampp，另一台没有安装。（同一网络）。都是windows xp

我编写了这个脚本来测试下载文件。

```
<?php
$txt = "http://www.branded3.com/wp-content/uploads/2011/05/Google_Chrome1.jpg";
$img = "01.jpg";
file_put_contents($img, file_get_contents($txt));
?> 
```

我在安装了 xampp 的计算机上运行脚本，它绝对有效。

但我在我的另一台电脑上运行它，不工作。有人可以在这个问题上帮助我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T09:50:02.763

这是一种非常粗略的方式，您可以代理图像并提示下载。

```
<?php
$url = "http://www.branded3.com/wp-content/uploads/2011/05/Google_Chrome1.jpg";

//Get file
$source = file_get_contents($url);

//Image Mime types
$images = array('jpg'=>'image/jpg','png'=>'image/png','png'=>'image/png');
//Is it an image extention
if(in_array(substr($url,-3),$images)){
    $type = $images[substr($url,-3)];
}else{
    //No its somthing else
    $type = 'application/octet-stream';
}

//Set the headers
header('Content-Description: File Transfer');
header('Content-Type: '.$type);
header('Content-Disposition: attachment; filename='.basename($url));
header('Content-Transfer-Encoding: binary');
header('Content-Length: ' . sprintf("%u", strlen($source)));
header('Cache-Control: must-revalidate, post-check=0, pre-check=0');
header('Expires: 0');
header('Pragma: public');

//echo the source
echo $source;
?> 
```

# jquery - 使用ajax来自mysql的highchart数据

> ID：10894788
> 
> 赞同：1
> 
> 时间：2012-06-05T09:28:23.640
> 
> 标签：jquery, mysql, ajax, database, highcharts

我想创建一个折线图来实时显示我的数据库中的数据。

我大约每 100 微秒将新数据放入我的数据库中。

我使用 ajax 来检查新数据。

这是我的代码：

```
<html>
<head>
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js" type="text/javascript"></script>
<script src="http://code.highcharts.com/highcharts.js"></script>

<script type="text/javascript">
$(function () {
    var chart = new Highcharts.Chart({
        chart: {
            renderTo: 'container'
        },
        xAxis: {
            type: 'datetime',
            tickPixelInterval: 150,
            maxZoom: 20 * 1000
        },

        series: [{
            name: 'Random data',
            data: []
        }]
    });

    $('#button').click(function() {
        $.get('data.php', function(data) {
        chart.series[0].setData(data);
        });
    });
});
</script>
  </head>

  <body>
    <div id="container" style="width: 100%; height: 400px"></div>
    <button id="button">Set new data</button>
  </body>
</html> 
```

data.php 返回以下内容：

```
[
[Date.UTC(0000, 00, 00, 11, 11, 47, 7), 144],
[Date.UTC(0000, 00, 00, 11, 11, 47, 17), 143],
[Date.UTC(0000, 00, 00, 11, 11, 47, 29), 142],
[Date.UTC(0000, 00, 00, 11, 11, 47, 39), 141],
] 
```

但它没有出现在我的图表中。

你能帮我完成这项工作吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T11:50:15.927

有用。我不知道你面临什么问题。但是我看到的是您的数据之间的时间间隔以毫秒为单位，并且您提供了更大的滴答间隔。

我删除了刻度间隔（以便 highcharts 自动绘制它们）以及 maxzoomperiod。

在这里检查。[http://jsfiddle.net/pLUza/](http://jsfiddle.net/pLUza/)

**PS：**我只是将数据嵌入到系列选项中的数据字段中。但是，当您使用 AJAX 时，结果将保持不变。

# windows-7 - Symfony2 和 Assetics：Windows 7 上的符号链接？

> ID：10894790
> 
> 赞同：8
> 
> 时间：2012-06-05T09:28:27.827
> 
> 标签：windows-7, symfony, symlink, assets

我很难使用资产在我的视图中加载资源（我使用 Symfony2）。我在 Linux (Ubuntu 10.4) 上工作，几天前切换到 Windows 7。我一直遇到麻烦（例如，有些图像没有加载），但至少大多数图像，所有样式和脚本都可以正常加载。

当我切换到 Windows 时，一些资源没有加载，所以我尝试了`php app/console assets:install web --symlink`

看到它删除了我正在处理的捆绑包的整个公用文件夹，我感到非常惊讶。并且无法再次找到源（幸运的是，我保存了其中一些，并且由于缓存文件，我能够检索到大部分工作）。

在我恢复我的文件（并备份它们）后，我再次尝试命令。结果相同。我尝试不使用`--symlink`它，它在文件夹中创建了一些文件`web/bundle`夹，而不是之前存在的文件（据说是符号链接）。

现在该命令甚至不再响应（即使在我的一些备份文件夹中，它也一直在删除我的资源！！）。

底线：有没有办法在 Windows 7 上配置资产，这样它就不会吃掉我的文件并正确加载资源（包括 css 中的图像）？

提前致谢！

编辑 ：

我刚刚再次运行该命令，这次它起作用了（复制了 web/bundle/... 中的文件）。我必须说我真的不明白这次它是如何或为什么起作用的……如果碰巧有人知道……

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2014-01-15T23:21:34.130

为了`assets:install web --symlink`在 PC 上运行，您需要一个[提升的命令提示符](http://pcsupport.about.com/od/windows7/a/elevated-command-prompt-windows-7.htm)（`cmd.exe`管理员模式下的花哨词）。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-05T16:56:02.553

Symfony2 使用 PHP[符号链接](http://www.php.net/manual/en/function.symlink.php)功能，根据文档，它应该适用于 Windows Vista、Server 2008 或更高版本。

默认情况下[，只有管理员可以在 Windows 中创建符号链接](https://security.stackexchange.com/a/10198)。因此，您必须使用提升的提示或为您的用户提供*SeCreateSymbolicLinkPrivilege 权限*。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-01-28T05:58:24.577

你可以用 windows 控制台来做，但 Git Bash 更好。获取并下载。附言。如果您在此之前从未使用过 git，那么这是开始的正确时间。:)

当您安装它时，在 Windows 程序中搜索 git bash 并右键单击它以管理员身份运行。如果您在当前文件夹“git bash here”中右键单击打开了 Git bash，它将无法正常工作，因为默认情况下它不会在管理员模式下启动。如果你这样做了，你会得到这个警告。

```
app/console assets:install web --symlink 
```

[![在此处输入图像描述](../Images/9afa546580e8fca75a7320f6e3ce2b39.png)](https://i.stack.imgur.com/8IY4N.png) 警告。使用硬拷贝而不是符号链接。

但是，如果你打得很好，按照我说的去做。（以管理员身份运行..你会让一切工作顺利。

```
app/console assets:install web --symlink 
```

[![在此处输入图像描述](../Images/600499662acb3b612656dc9bb3281082.png)](https://i.stack.imgur.com/eOYbz.png) 创建的符号链接！:) 现在您不需要在每次更改 css 文件时都安装 assets:install 。

附言。git bash 控制台比本机 Windows 控制台更好，但是……例如 Ubuntu 等 Unix 系统看起来会更好。此外，带有 Xamp 的 Windows 上的 Symfony 运行速度将比在 Linux Ubuntu 系统上慢得多。我说的是 Linux 上的页面响应速度提高了 5 到 20 倍。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-06-11T20:13:46.030

您可以使用配置 composer.json 并永远使用没有任何问题，将其放入 --symlink。这是您的操作方法。 [http://www.w3docs.com/snippets/symfony/how-to-keep-symlinks-in-web-bundles-after-composer-update.html](http://www.w3docs.com/snippets/symfony/how-to-keep-symlinks-in-web-bundles-after-composer-update.html)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-06-13T13:25:23.740

您可以在您的`composer.json`：

```
{
    "extra": {
        "symfony-assets-install" : "symlink",
    }
} 
```

# iphone - 将数据从 .csv 文件导入 IOS 中的 sqlite 数据库。调频数据库

> ID：10894791
> 
> 赞同：2
> 
> 时间：2012-06-05T09:28:32.757
> 
> 标签：iphone, sqlite, fmdb

在我的应用程序中，我需要将 csv 文件中的数据导入 sqlite 数据库。

为了使用 sqlite，我使用 FMDB 库，因为它易于使用:)

请帮助我，如何将数据从csv文件导入表？

我创建了一个表，对应于 csv 文件中的一个表，所以应该很容易导入。

我查看了互联网上的解决方案，并找到了 sqlite 的终端命令，例如

```
".mode csv"
".separator ';'"
".import mycsvfile.csv mytablename" 
```

但是当我尝试在 FMDB 中执行这个 sql 语句时，它失败了..

我的源代码：

```
 [db beginTransaction];
   NSString *query1 = @".mode csv";
   NSString *query2 = @".separator ';'";
   NSString *query3 = @".import mycsvfile.csv mytablename";

   BOOL result = [db executeUpdate:query];
   result = [db executeQuery:query2];
   result = [db executeQuery:query3];

   [db commit]; 
```

此处经过 BOOL result = [db executeUpdate:query]; 结果等于FALSE，表示它是错误的..

打开登录 FMDB 后，它在我的查询中显示“语法不正确”。

但是为什么这个语句在 OS X 的 sqlite 中有效呢？

注意：当我尝试在 OS X 终端中执行此命令时，在 sqlite3 中，一切正常。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-05-01T18:45:00.087

您使用的 .import 命令不是 SQLite 本身的一部分，而是 SQLite CLI（命令行界面）shell 的一部分。这个工具的文档在[这里](http://www.sqlite.org/cli.html)。您可以从 sqlite.org 下载 CLI 工具的源代码（我认为文件是 shell.c）作为 SQLite 发行版的一部分。

如果要将 iOS 应用程序中的 CSV 数据导入 SQLite，则需要自己手动解析 CSV 文件，并将数据插入 SQLite 数据库的表中。

# javascript - 如何作为一个整数？

> ID：10894792
> 
> 赞同：0
> 
> 时间：2012-06-05T09:28:40.970
> 
> 标签：javascript

我需要在逗号后四舍五入到两个数字。例子

5000.0000 至 5000

5000.123 至 5000.12

5000.136 至 5000.13

这是怎么做的？

我需要函数 x.toFixed(2); 但如果在两个零的末尾，那么它们不应该显示

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T20:58:20.797

由于`x.toFixed(2)`返回一个字符串，您可以执行以下操作：

```
function cut(str) {
    if (str[str.length-1] == "0")
        return str.substr(0, str.length-1);
    if (str[str.length-1] == ".")
        return str.substr(0, str.length-1);
    return str;
}

x = cut(cut(cut(x.toFixed(2)))); 
```

不是最优雅的（例如，您可以将函数添加到字符串的原型中），但绝对可以工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T09:33:23.790

正如@freakish 所建议的那样，`toFixed`对数字进行四舍五入是个好主意。如果你想落地，我建议

```
parseInt(5000.136*100)/100; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-05T09:33:06.763

您可以使用此 javascript 函数来舍入数字

```
function roundNumber(rnum, rlength) { 
  var newnumber = Math.round(rnum*Math.pow(10,rlength))/Math.pow(10,rlength);
return parseFloat(newnumber);
}

var num = roundNumber(5000.0000,0);   //will return 5000 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-06-05T09:32:59.117

这个链接可以帮助你

[http://www.w3schools.com/jsref/jsref_tofixed.asp](http://www.w3schools.com/jsref/jsref_tofixed.asp)

例子

将数字转换为字符串，只保留两位小数：

> 变量编号 = 5.56789; var n=num.toFixed(2);

n 的结果将是：

> 5.57

# javascript - 如何获取 HTML 元素的部分数量在视口中可见

> ID：10894801
> 
> 赞同：0
> 
> 时间：2012-06-05T09:29:09.783
> 
> 标签：javascript, html, dom

*   是否有可能知道像图像这样的 HTML 元素在当前视口中是否可见，或者在滚动时是否可见？
    *   如果它完全或部分可见，那么我如何才能看到部分的数量？

我试图从下图解释它： ![在此处输入图像描述](../Images/08926fa0ad9a156ffa28e97ad185b64e.png)

底部的两个图像在视口中部分可见，如果向下滚动一点，这些图像将完全可见。

现在我想得到上述信息。

在实际场景中，我试图在我的相册中的图像悬停上获得弹出缩放效果，例如谷歌图像搜索。一切都很好，除非图像以所描述的方式放置，然后缩放的 div 也显示为一半。

图像完全在视口中的正常情况： ![在此处输入图像描述](../Images/7a98e0d96a7959a7315436b47a705b8b.png)

部分在视口中： ![在此处输入图像描述](../Images/c33d0c1ab8050782ace5cf245123b135.png)

我真的很感谢你的帮助。

编码：

```
var albumDetailOnReady = function() {  

    $('.image').each(function(){
        var photo = $(this);
        var wrap = $(findParentByClassName(document.getElementById(photo.attr('id')), 'wrap'));
        var row = $(findParentByClassName(document.getElementById(wrap.attr('id')), 'albumDetailRow'));
        var visibleZone = $(wrap).find('.alDtlColumn');
        var pictureBlock = $(visibleZone).find('.pictuteBlock');        
        var hiddenZone = $(wrap).find('.hiddenZone');        

        $(photo).load(function(){
            if(177 > $(photo).width()){
                var imgleft = ($(pictureBlock).width() - $(photo).width())/2 + 'px';
                $(photo).css({'left': imgleft});
            }
        });

        $(photo).hover(function(){                         
            var y;            
            if($(photo).height() > $(photo).width()) {
                y = ($(visibleZone).offset().top - 50) + 'px';               
            } else {
                y = ($(visibleZone).offset().top + 50) + 'px';
            }         

            var x;
            if($(row).find('.wrap:first').attr('id') === $(wrap).attr('id')) {
                x = ($(visibleZone).offset().left - 10) + 'px';
            } else if($(row).find('.wrap:last').attr('id') === $(wrap).attr('id')) {
                x = ($(visibleZone).offset().left - 50) + 'px';
            } else {
                x = ($(visibleZone).offset().left - 20) + 'px';
            }

            $(hiddenZone).css({
                'top': y,
                'left': x,                
                'position': 'absolute',
                'z-index': '10'
            });          

            $(hiddenZone).fadeIn('fast');
        }, function(){

        });

        $(hiddenZone).hover(function(){},function(){
            $(hiddenZone).hide().stop(true, true);
        });
    });   
}

var findParentByClassName = function(element, clazz) {
    while (element.parentNode) {
        element = element.parentNode;
        if (hasClass(element, clazz)) {
            return element;
        }
    }
    return null;
}

function hasClass(element, cls) {
    var regex = new RegExp('\\b' + cls + '\\b');
    return regex.test(element.className);
} 
```

我无法显示任何 HTML，因为我没有任何 HTML，我正在使用 ADF 框架。

但是为了解释：

每个图像都有两个区域：可见和隐藏。他们两个都在一个包裹里。现在悬停在图像上，我正在显示隐藏的 div。隐藏 div 的顶部和左侧是由可见 div 的顶部和左侧在某些条件下测量的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T09:32:32.383

**jQuery.Viewport**

非常有用且轻量级的 jQuery 插件，它使元素成为一个方便的视口，用于显示具有绝对位置的元素。该插件托管在 GitHub 上。你可以在那里看到它的实际效果：

[https://github.com/borbit/jquery.viewport](https://github.com/borbit/jquery.viewport)

# java - 使用递归查找字符串中“hi”的数量，而不是“xhi”

> ID：10894803
> 
> 赞同：1
> 
> 时间：2012-06-05T09:29:12.090
> 
> 标签：java, recursion

我正在从codingbat做一个问题，我被困在这个问题上。问题要求我找到`'hi'`字符串中的所有内容，但忽略`'hi'`它们`'x'`之前的内容。换句话说，不要计算`'xhi'`，而只有`'hi'`.

除了输入为`"xxxx"`. 我的代码如下：

```
public int countHi2(String str) {
      String s = "hi";
      int count = 0;

      if(str.length() < 2) {
          return 0;
      }
      else if(str.charAt(0) == 'x' && str.substring(1,3).equals(s)) {
           count+= countHi2(str.substring(3));
      }
      else if(str.substring(0,2).equals(s)){
          count+= 1 + countHi2(str.substring(2));
      }
      else {
          count+= countHi2(str.substring(1));
      }
      return count;
} 
```

问题是它抛出 IndexOutOfBoundsException。可以在[此处](http://codingbat.com/prob/p143900)找到问题的链接。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-05T09:38:39.210

您可以执行以下操作：

```
public static int countHi2(String str) {
    if (str.startsWith("xhi")) {
        return countHi2(str.substring(3));
    } else if (str.startsWith("hi")) {
        return countHi2(str.substring(2)) + 1;  
    } else if (str.length() > 0){
        return countHi2(str.substring(1));
    } else {
        return 0;
    }
} 
```

（它不处理空值，而且它确实没有优化。）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-05T09:36:48.680

问题是，如果您的字符串末尾有一个“x”（或在最后 2 个位置之一），您的子字符串将从超出范围的索引开始（正如您的异常告诉您的那样）。`str.substring(3)`如果可行，您可以检查这种情况：

```
else if(str.charAt(0) == 'x' && str.substring(1,3).equals(s)) {
  if (str.length() > 3) count+= countHi2(str.substring(3));
  else return count;
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-05T09:37:20.197

您会看到一个异常，因为[如果 beginIndex 为负数，或者 endIndex 大于此 String 对象的长度，或者 beginIndex 大于 endIndex，则会](http://docs.oracle.com/javase/6/docs/api/java/lang/String.html#substring%28int,%20int%29)[`substring`引发异常。`IndexOutOfBoundsException`](http://docs.oracle.com/javase/6/docs/api/java/lang/String.html#substring%28int,%20int%29)您检查长度是否至少为 2，然后执行`substring(1, 3)`，导致异常。

您可以通过切换到API 来避免`IndexOutOfBoundsException`in的问题，即使您将字符串与更长的字符串进行比较，它也不会引发异常。`substring``startsWith`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-05T09:39:36.780

第 8 行需要修改。

```
else if(str.length()>=3 && str.charAt(0) == 'x' && str.substring(1,3).equals(s))
{...} 
```

总代码应该是 -

```
public int countHi2(String str) {
  String s = "hi";
      int count = 0;

      if(str.length() < 2) {
          return 0;
      }
      else if(str.length()>=3 && str.charAt(0) == 'x' && str.substring(1,3).equals(s)) {
           count+= countHi2(str.substring(3));
      }
      else if(str.substring(0,2).equals(s)){
          count+= 1 + countHi2(str.substring(2));
      }
      else {
          count+= countHi2(str.substring(1));
      }
      return count;
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-05T09:39:54.383

固定一个

```
public int countHi2(String str) {
    String s = "hi";
    int count = 0;

    if(str.length() < 2) {
        return 0;
    }
    else if(str.charAt(0) == 'x' && str.length() > 2 && str.substring(1,3).equals(s)) {
        count+= countHi2(str.substring(3));
    }
    else if(str.substring(0,2).equals(s)){
        count+= 1 + countHi2(str.substring(2));
    }
    else {
        count+= countHi2(str.substring(1));
    }
    return count;
} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-06-05T09:41:40.977

此代码适用于“XXXX”和其他组合。但我没有检查所有组合。

```
public static int countHi2(String str) {
      String s = "hi";
      int count = 0;

      if(str.length() < 2) {
          return 0;
      }
      else if((str.length() >= 3) && (str.charAt(0) == 'x' && str.substring(1,3).equals(s))) {
           count+= countHi2(str.substring(3));
      }
      else if(str.substring(0,2).equals(s)){
          count+= 1 + countHi2(str.substring(2));
      }
      else {
          count+= countHi2(str.substring(1));
      }
      return count;
    } 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-06-05T09:37:40.913

你永远不会到达这条线

```
return count; 
```

当您的输入为“xxxx”时，您一直在使用 if else

```
count+= countHi2(str.substring(1)); 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-06-05T09:54:18.187

当您剩下 2 个字母“xx”并检查第一个条件时，您所做`str.substring(1,3)`的就是当您收到该错误时。在这种情况下，您应该检查`str.lenght()`不是 2，例如：

```
public int countHi2(String str) {
    String s = "hi";
    int count = 0;

    if(str.length() < 2) {
        return 0;
    }
    else if(str.length()>2 && str.charAt(0) == 'x' && str.substring(1,3).equals(s)) {
         count+= countHi2(str.substring(3));
    }
    else if(str.substring(0,2).equals(s)){
        count+= 1 + countHi2(str.substring(2));
    }
    else {
        count+= countHi2(str.substring(1));
    }
    return count;
} 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2015-02-16T01:58:03.497

你们太复杂了。这是一个简单的解决方案。

```
public int countHi2(String str) {
  return (str.length() < 2)?0:
         (str.substring(0,2).equals("xh"))?
           countHi2(str.substring(2)):
           (str.substring(0,2).equals("hi"))?
               1 + countHi2(str.substring(1)):
               countHi2(str.substring(1));   
} 
```

或者如果它看起来太奇怪了：

```
public int countHi2(String str) {
   if(str.length() < 2)
     return 0;
   else if(str.substring(0,2).equals("xh"))
     return countHi2(str.substring(2));
   else (str.substring(0,2).equals("hi"))
     return 1 + countHi2(str.substring(1));
   else return countHi2(str.substring(1));   
} 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2015-02-16T02:26:17.387

如果您不必使用递归：

```
public int countHi(String test) {
        if (test == null){
            return 0;
        }
        test = test.replaceAll("xhi", "");
        int n1 = test.length();
        int n2 = test.replaceAll("hi", "").length();
        return (n1-n2)/2;

    } 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2018-05-24T03:45:49.207

下面是获取特定字符串中“hi”计数的代码。

```
public int countHi(String str) {
 int count = 0;
 int len = str.length();
 if(len<2) {
  return 0;
 }
 else {
   if(str.substring(0,2).equals("hi")) {
     return count+1+countHi(str.substring(2));
   }
   else {
     return count+countHi(str.substring(1));
   }
 }
} 
```

# c++ - 结构的前向声明

> ID：10894804
> 
> 赞同：16
> 
> 时间：2012-06-05T09:29:16.930
> 
> 标签：c++

我有一个头文件啊，里面我声明了一个结构。该结构的名称是`file`。里面`file`我有3个成员：a，b，c。在 a.cpp 中，我实现了该结构并为该结构变量分配了一些值。

现在我有另一个文件 bh 在里面我有一个结构的前向声明`file`。直到此时，如果我编译它并没有显示错误，但是当我要通过该 b.cpp 类访问该结构中存在的变量时，它会给出类似“未定义结构”的错误。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-06-05T09:31:57.317

> **错误的根本原因是什么？**

当您 Forward 声明一个类型时，编译器会将其视为**Incomplete type**。

前向声明告诉编译器所述类型存在，而没有更多关于特定类型的信息。因此，您不能对需要编译器知道其内存布局的类型 执行任何操作（*如创建对象或取消引用指向该类型的指针）。*

> **解决方案：**

如果需要引用结构成员，则不能转发声明，您需要在源文件中包含头文件。这将确保编译器*知道*该类型的内存布局。您将不得不相应地设计您的项目。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-06-05T09:30:29.010

要访问成员，需要完整的定义。您需要`include`在内部标头`b.cpp`，而不仅仅是前向声明`struct`（这会产生不完整的类型）。

编辑：

前向声明足以：

```
class B;
class C
{
    B& b;
    B* b;
    B foo();
    foo(B b);
}; 
```

但不是为了

```
class B;
class C
{
    B b;   //ERROR
    B foo()
    {
        B x; //error
        x.whatever(); //error
        return B(); //error
    }
}; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-05T09:38:41.933

您需要包含使用成员的结构的定义，否则编译器不知道它们是什么。

所以如果你有 b.cpp，这个

```
 func(mystruct &s)
   {
        s.a = 1;
   } 
```

编译器在执行分配之前很好。此时，它试图在“mystruct”中找到“a”的定义，但找不到。

您应该 `#include "a.h"`在 b.cpp 中，或者可能，根据 ah 中的其他内容，您可能需要一个单独的结构标题并将其包含在内。

# xml - 如何将现有按钮/组从功能区选项卡添加到新的自定义选项卡？

> ID：10894809
> 
> 赞同：1
> 
> 时间：2012-06-05T09:29:28.687
> 
> 标签：xml, visual-studio-2010, vsto, add-in, ribbon

我正在开发一个 VSTO 插件，我想用其他选项卡中的按钮创建一个新选项卡。我已经创建了新选项卡，但无法成功添加现有按钮和组。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T09:32:02.023

我成功了！在 XML 文件的自定义选项卡部分中，添加：用于添加组：

```
<group idMso="existing group id"></group > 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-03-07T11:21:19.140

你可以试试。但是您不能更改组（[https://social.msdn.microsoft.com/Forums/vstudio/en-US/3391b0a8-9dea-4372-b28c-ca62b9420f25/customizing-an-existing-ribbon?forum=vsto](https://social.msdn.microsoft.com/Forums/vstudio/en-US/3391b0a8-9dea-4372-b28c-ca62b9420f25/customizing-an-existing-ribbon?forum=vsto)）

但是你可以隐藏和显示你自己的覆盖：见想法（[http://www.rondebruin.nl/win/s2/win016.htm](http://www.rondebruin.nl/win/s2/win016.htm)）

例如：

```
 <!-- Set visible to false for the Clipboard group on the Home tab-->
  <tab idMso="TabHome">
    <group idMso="GroupClipboard" visible="false"/>
  </tab>

  <!-- Point to the Built-in tab to the ribbon -->
  <tab idMso="TabHome">

    <!-- Add Clipboard group -- And hear you could add your controls   >
    <group id="DupClipboard" label="Clipboard" insertBeforeMso="GroupClipboard" >
      <splitButton idMso="PasteMenu" size="large" />
      <button idMso="Cut"/>
      <button idMso="Copy"/>
      <control idMso="FormatPainter"/>

      <dialogBoxLauncher>
        <button  idMso="ShowClipboard" />
      </dialogBoxLauncher>
    </group>

  </tab> 
```

# c# - 如何在编辑模式（详细视图）中显示外键值？

> ID：10894810
> 
> 赞同：2
> 
> 时间：2012-06-05T09:29:31.343
> 
> 标签：c#, asp.net, sql

我的gridview有点问题。在 Editmode 中，我从我的数据库（外键！）中加载了一个包含内容的下拉列表。当我保存更改并在编辑视图中再次执行时，下拉列表显示表中的第一个条目，而不是保存的值中的值。当我进入编辑模式时，如何将下拉列表中的默认值设置为数据库中设置的值？

我希望我的担忧是可以理解的。非常感谢您的帮助！

我的代码（短）

```
<asp:DetailsView ID="dtvProjektdetails" runat="server" DataSourceID="sqlProjectDetails" AutoGenerateRows="False" DataKeyNames="ProjectID" DefaultMode="Edit" onitemupdating="dtvProjektdetails_ItemUpdating">
<Fields>
   <asp:TemplateField HeaderText="Segment" SortExpression="FK_Segment">
      <EditItemTemplate>
         <asp:DropDownList ID="ddlSegment" runat="server" DataSourceID="sqlDSSegment" DataTextField="Segment" DataValueField="SegID">
         </asp:DropDownList>
      </EditItemTemplate>
   </asp:TemplateField>
</Fields>
</asp:DetailsView> 
```

下拉列表的数据源（短）

```
<asp:SqlDataSource ID="sqlDSSegment" runat="server" ConnectionString="<%$ ConnectionStrings:CSLinker %>" SelectCommand="SELECT * FROM [tabSegment] ORDER BY Segment]"></asp:SqlDataSource> 
```

Detailview的数据源：

```
<asp:SqlDataSource ID="sqlProjectDetails" runat="server" 
        ConnectionString="<%$ ConnectionStrings:CSLinker %>" 
        SelectCommand="SELECT * FROM [tabProjects] WHERE ([ProjectID] = @ProjectID)" 
        UpdateCommand="UPDATE [tabProjects] SET [Name] = @Name, [ProejctNo] = @ProejctNo, [Startdate] = @Startdate, [Enddate] = @Enddate, [FK_Owner] = @FK_Owner, [FK_Segment] = @FK_Segment, [FK_ProjectCategorie] = @FK_ProjectCategorie, [FK_ProjectFiles] = @FK_ProjectFiles, [FK_Mailings] = @FK_Mailings, [Botschaft] = @Botschaft, [Ziel] = @Ziel, [Callmenge] = @Callmenge, [Quote] = @Quote, [Zielgruppe] = @Zielgruppe, [Inboundnummer] = @Inboundnummer, [Wissen] = @Wissen, [Prozess] = @Prozess, [Goodies] = @Goodies, [FK_Sprachen] = @FK_Sprachen WHERE [ProjectID] = @ProjectID">
        <SelectParameters>
            <asp:ControlParameter ControlID="lblPID" Name="ProjectID" PropertyName="Text" Type="Int64" />
        </SelectParameters>
        <UpdateParameters>
            <asp:Parameter Name="Name" Type="String" />
            <asp:Parameter Name="ProejctNo" Type="String" />
            <%--<asp:Parameter Name="Description" Type="String" />--%>
            <asp:Parameter Name="Startdate" Type="DateTime" />
            <asp:Parameter Name="Enddate" Type="DateTime" />
            <asp:Parameter Name="FK_Owner" Type="Int64" />
            <asp:Parameter Name="FK_Segment" Type="Int64" />
            <asp:Parameter Name="FK_ProjectCategorie" Type="Int64" />
            <asp:Parameter Name="FK_ProjectFiles" Type="Int64" />
            <asp:Parameter Name="FK_Mailings" Type="Int64" />
            <asp:Parameter Name="Botschaft" Type="String" />
            <asp:Parameter Name="Ziel" Type="String" />
            <asp:Parameter Name="Callmenge" Type="String" />
            <asp:Parameter Name="Quote" Type="String" />
            <asp:Parameter Name="Zielgruppe" Type="String" />
            <asp:Parameter Name="Inboundnummer" Type="String" />
            <asp:Parameter Name="Wissen" Type="String" />
            <asp:Parameter Name="Prozess" Type="String" />
            <asp:Parameter Name="Goodies" Type="String" />
            <asp:Parameter Name="FK_Sprachen" Type="Int64" />
            <%--<asp:Parameter Name="FK_Agenten" Type="Int64" />--%>
            <asp:Parameter Name="ProjectID" Type="Int64" />
        </UpdateParameters>
    </asp:SqlDataSource> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T09:37:12.933

设置 selectedvalue - 下拉列表的属性：

```
<asp:DropDownList ID="ddlLinkCategorie" runat="server" DataSourceID="sqlDScategorie"
                            DataTextField="Categorie" DataValueField="LinCatID" selectedvalue='<%Bind("columnName")%>'>
                        </asp:DropDownList> 
```

# embedded - 智能SPI控制器（基于队列）的实现参考

> ID：10894815
> 
> 赞同：0
> 
> 时间：2012-06-05T09:30:03.630
> 
> 标签：embedded, spi, flash-memory

智能 SPI 控制器是队列串行外设接口 (QSPI) 是 SPI 控制器的一种。它使用带有可编程队列指针的数据队列，允许在没有 CPU 干预的情况下进行一些数据传输。 [6] 它还具有环绕模式，允许在没有 CPU 干预的情况下连续进出队列。

有人可以建议我一些好的教程/参考代码，这样我就可以更好地理解上述智能 SPI 控制器。

# mysql - GROUP BY lname ORDER BY 显示错误结果

> ID：10894820
> 
> 赞同：1
> 
> 时间：2012-06-05T09:30:17.327
> 
> 标签：mysql, sql, group-by

我写的这个查询列出了销售竞争中的前 25 名，显示的结果是错误的。

用户没有显示应该在列表中很远。知道问题可能是什么吗？

```
SELECT u.fname, u.lname, SUM(p.point) as points 
  FROM comp_sale s, comp_product p, comp_user u
 WHERE s.prod_id = p.product_id 
   AND s.sale_id = u.wp_id 
 GROUP BY lname 
 ORDER BY points DESC limit 25 
```

表comp_user：

```
user_id int(11) NO  PRI NULL    auto_increment
fname   varchar(255)    NO      NULL    
lname   varchar(255)    NO      NULL    
storename   varchar(255)    NO      NULL    
city    varchar(255)    NO      NULL    
phone   varchar(255)    NO      NULL    
wp_id   int(11) NO      NULL    
type    varchar(255)    NO      NULL 
```

表 comp_sale

```
prod_id int(11) NO      NULL    
sale_id int(11) NO      NULL    
serial  varchar(255)    NO      NULL 
```

表 comp_product

```
product_id  int(11) NO  PRI NULL    auto_increment
description varchar(255)    NO      NULL    
type    varchar(255)    NO      NULL    
cylinda_num int(11) NO      NULL    
eel_num int(11) NO      NULL    
point   int(11) NO      NULL 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-05T09:33:31.657

尝试使用适当的 ANSI 标准 GROUP BY

```
SELECT
    u.fname, u.lname, SUM(p.point) as points
FROM 
    comp_sale s
    JOIN
    comp_product p ON s.prod_id = p.product_id 
    JOIN
    comp_user u ON s.sale_id = u.wp_id
GROUP BY
    u.fname, u.lname
ORDER BY 
    points DESC 
LIMIT 25 
```

此外，为了清楚起见，使用显式 JOIN

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T10:04:16.623

回答我自己的问题：我不是按 and 分组，`fname`而`lname`只是`lname`.

```
SELECT fname, lname, SUM(point) as points FROM cylinda_sale s, cylinda_product p, cylinda_user u  WHERE s.prod_id = p.product_id AND s.sale_id = u.wp_id GROUP BY lname, fname ORDER BY points DESC limit 25; 
```

# jpa - 为树元素声明 JPA 实体

> ID：10894823
> 
> 赞同：0
> 
> 时间：2012-06-05T09:30:27.320
> 
> 标签：jpa, tree

我确实有一个带有单向树的数据库表。这些树的叶子可以有几个孩子/父母。周期受到限制。这是我的数据库表定义：

```
CREATE MULTISET TABLE WORKFLOW_SEQ_REL ,NO FALLBACK ,
     NO BEFORE JOURNAL,
     NO AFTER JOURNAL,
     CHECKSUM = DEFAULT,
     DEFAULT MERGEBLOCKRATIO
     (
      WORKFLOW_SEQ_ID INTEGER NOT NULL,
      REL_WORKFLOW_SEQ_ID INTEGER NOT NULL,
      JOB_ID BIGINT)
PRIMARY INDEX ( WORKFLOW_SEQ_ID ); 
```

如您所见，它现在没有主键。但是后面会出现:) 真正的PK是：JOB_ID+PARENT_ID+CHILD_ID。

这个想法是：

1.  REL_WORKFLOW_SEQ_ID = 父级
2.  WORKFLOW_SEQ_ID = 孩子
3.  JOB_ID = TREE_IDENTIFICATOR（用于分隔存储在一个表中的不同树的决定因素）。

我正在尝试声明一个 JPA 实体：

```
@Entity
@Table(name="WORKFLOW_SEQ_REL")
public class EtlWorkflowSeqNode {

    @EmbeddedId 
    public EtlWorkflowSeqNodeId etlWorkflowSeqNodeId;

    //@Column(name="JOB_ID")
    //public Integer jobId;

    @Embeddable
    class EtlWorkflowSeqNodeId{

        @Column(name="JOB_ID")
        public Integer jobId;

        @ManyToOne(fetch = FetchType.EAGER)
        @JoinColumn(name="REL_WORKFLOW_SEQ_ID")
            //EtlWorkflowSeq.id = PK of EtlWorkflowSeq entity
        public EtlWorkflowSeq parent;

        @OneToMany(fetch=FetchType.EAGER /*, mappedBy="parent"*/)
        @JoinColumn(name="WORKFLOW_SEQ_ID")
        public Set<EtlWorkflowSeq> children;
    }
} 
```

我生成一个错误： **引起：org.hibernate.AnnotationException：引用 models.EtlWorkflowSeqNode 的外键来自 models.EtlWorkflowSeq 的列数错误。应该是 2**

这是 EtlWorkflowSeq 实体：

```
@Entity
@Table(name="WORKFLOW_SEQ")
public class EtlWorkflowSeq {

    @Id
    @Column(name="WORKFLOW_SEQ_ID")
    public Integer id;

    @OneToOne(fetch=FetchType.EAGER)
    @JoinColumn(name="WORKFLOW_ID")
    public EtlWorkflow etlWorkflow;
} 
```

我做错了什么？

UPD：这里是表定义：--一个糟糕的设计。PK 应该是：WORKFLOW_SEQ_ID + REL_WORKFLOW_SEQ_ID + JOB_ID

```
 CREATE MULTISET TABLE WORKFLOW_SEQ_REL ,NO FALLBACK ,
         NO BEFORE JOURNAL,
         NO AFTER JOURNAL,
         CHECKSUM = DEFAULT,
         DEFAULT MERGEBLOCKRATIO
         (
          WORKFLOW_SEQ_ID INTEGER NOT NULL, --a ref to child
          REL_WORKFLOW_SEQ_ID INTEGER NOT NULL, -- a ref to parent
          START_TYPE_ID SMALLINT NOT NULL, -- a type of connection
          DISABLE_START_TYPE_ID SMALLINT, -- other type of connection
          JOB_ID BIGINT) -- a tree determinant, 
    PRIMARY INDEX ( WORKFLOW_SEQ_ID );

    CREATE MULTISET TABLE   WORKFLOW_SEQ ,NO FALLBACK ,
         NO BEFORE JOURNAL,
         NO AFTER JOURNAL,
         CHECKSUM = DEFAULT,
         DEFAULT MERGEBLOCKRATIO
         (
          WORKFLOW_SEQ_ID INTEGER NOT NULL, -- an id
          WORKFLOW_ID BIGINT NOT NULL, -- a ref to original workflow, not interesting
          IS_NAME VARCHAR(255) CHARACTER SET UNICODE NOT CASESPECIFIC, -- some name
          INFO_SYSTEM_INST_CD VARCHAR(255) CHARACTER SET UNICODE NOT CASESPECIFIC, -- other name
          DISABLE BYTEINT) -- so garbage
    UNIQUE PRIMARY INDEX ( WORKFLOW_SEQ_ID ); -- it should also be a PK 
```

想法是，几棵树存储在 WORKFLOW_SEQ_REL JOB_ID 是树的决定因素。WORKFLOW_SEQ_ID、REL_WORKFLOW_SEQ_ID 指的是 REL_WORKFLOW_SEQ 表中的一些定制模板。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T08:07:34.060

我不禁注意到您的问题前后不一致。

您首先声明：

> 这些树的叶子可以有几个孩子/父母。

我相信这使得叶子之间的关系变得**多对多**。

当我提出`EtlWorkflowSeq`代表叶子的问题时，我认为`EtlWorkflowSeqNode`代表对象之间的关系`EtlWorkflowSeq`？

但是，节点指向**一个**父节点和**多个**子节点。

你可以使用这样的东西来创建类似的东西：

```
@Entity
@Table(name="WORKFLOW_SEQ")
public class EtlWorkflowSeq
{
    @Id
    @GeneratedValue
    @Column(name="WORKFLOW_SEQ_ID")
    public Integer id;

    @ManyToOne
    @JoinColumn(name="WORKFLOW_ID")
    public EtlWorkflow etlWorkflow;

    @ManyToMany
    @JoinTable(name = "WORKFLOW_SEQ_REL")
    private Set<EtlWorkflowSeq> children;

    @ManyToMany(mappedBy = "children")
    private Set<EtlWorkflowSeq> parents;

    @ManyToOne
    @JoinColumn(name = "JOB_ID", referencedColumnName = "id")
    private Job job;
} 
```

这将`EtlWorkflowSeqNode`过时`EtlWorkflowSeqNodeId`。

我还想声明，在使用 an 时，`@Embeddable`您应该只在其中使用基本类型。使用非基本类型是不可能的/导致问题/不标准（如果我错了，请纠正我）。

如果您想在复合主键中使用外键，可以使用：

```
@Entity
public class Foo
{
    @Id
    private Long id;
}

@Entity
public class Bar
{
    @EmbeddedId
    private BarPK key;

    @MapsId(value = "fooId")
    @ManyToOne
    @JoinColumns({
        @JoinColumn(name = "foo_id", referencedColumnName = "id")
    })
    private Foo foo;
}

@Embeddable
public class BarPK
{
    @Column(name = "id")
    private Long id;

    @Column(name = "foo_id")
    private Long fooId;
} 
```

# hadoop - 使用 HIVE 进行 Twitter 数据分析

> ID：10894828
> 
> 赞同：0
> 
> 时间：2012-06-05T09:30:44.497
> 
> 标签：hadoop, hive

我是 Hive 和 Hadoop 的新手，我想创建一个非常简单的演示来分析示例 twitts，如下所示：

T 2009-06-08 21:49:37 U [http://twitter.com/blabla](http://twitter.com/blabla) WI 认为数据挖掘很棒！

T 2009-06-08 21:49:37 U [http://twitter.com/blublu](http://twitter.com/blublu) WI 不这么认为。我不喜欢数据挖掘....一般可以这样做吗？但我不知道我应该从哪一点开始。你知道做这项工作的任何简单明了的参考吗？或者你能告诉我（不详细）我该怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T12:24:24.660

简而言之 - 您应该创建自己的 SerDe，它将以记录的形式呈现推文，然后您可以在 hive 中将推文作为表格处理。 [https://cwiki.apache.org/Hive/developerguide.html#DeveloperGuide-SerDe](https://cwiki.apache.org/Hive/developerguide.html#DeveloperGuide-SerDe)

# google-chrome - javascript 函数在 Firefox 和 Safari 中不起作用（仅在 Chrome 中）

> ID：10894833
> 
> 赞同：0
> 
> 时间：2012-06-05T09:31:18.300
> 
> 标签：google-chrome, javascript-events

我有一个页面，其他 javascripts 已经正常工作......除了这个：

```
<script>
function add(numDaysToAdd) {
    var data_in = new Date (document.WADAInsertForm.data_in.value);
    var data_out = data_in.setDate(data_in.getDate()+numDaysToAdd);
    var final_day = data_out.getDate();
    var final_month = data_out.getMonth() + 1;
    var final_year = data_out.getFullYear();

    document.WADAInsertForm.data_out.value = final_year+'-'+final_month+'-'+final_day;

    }
</script> 
```

此脚本由复选框上的“OnChange”调用以及“OnClick”事件触发。澄清：

```
<input type="checkbox" name="product" value="Insurance plan: 1 month" id="product" onClick="this.form.price.value='41.40'" onChange="add(+30)"> 
```

当我在 Chrome 中测试页面时，它会完成所有作业：在“价格”字段中插入价格值，并使用正确的值更新“data_out”字段。

当我在 Firefox 和 Safari 中做同样的事情时......它只适用于“价格”设置。

有什么建议或帮助吗？非常感谢提前

米歇尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T12:27:06.780

```
onChange="add(+30)" 
```

这里**+30**不代表脚本中的任何字符串或任何整数，它会通过类型错误，将天数添加到当前日期，您可以使用此脚本

```
<script type="text/javascript" language="javascript">
    function AddDays(toAdd) {
        if (!toAdd || toAdd == '' || isNaN(toAdd)) return;
        var d = new Date();
        d.setDate(d.getDate() + parseInt(toAdd));

        document.getElementById("result").innerHTML = d.getDate() + "/" + d.getMonth() + "/" + d.getFullYear();
    }
</script>
---------------------- UI ---------------
    <div id="result">
    </div>
    <input type="text" value="0" onkeyup="AddDays(this.value);" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T09:39:18.967

`onClick`无效。使用`onclick`.

而且我发现同时拥有`onclick`和`onchange`在复选框上很奇怪。您应该`onclick`在`onchange`.

# c# - 时间：2019-01-10 标签：c#convert image format to jpg

> ID：10894836
> 
> 赞同：25
> 
> 时间：2012-06-05T09:31:28.297
> 
> 标签：c#, image, image-processing

我需要从用户那里得到一张带有不同格式扩展名的图片，并且我想始终将其保存为“jpg”，以便于处理。有没有在c#中做到这一点而不提高质量的好方法？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-06-05T09:47:14.597

来自：http: [//msdn.microsoft.com/en-us/library/system.drawing.imaging.encoderparameter.aspx](http://msdn.microsoft.com/en-us/library/system.drawing.imaging.encoderparameter.aspx)

```
private void VaryQualityLevel()
{
// Get a bitmap.
Bitmap bmp1 = new Bitmap(@"c:\TestPhoto.jpg");
ImageCodecInfo jpgEncoder = GetEncoder(ImageFormat.Jpeg);

// Create an Encoder object based on the GUID
// for the Quality parameter category.
System.Drawing.Imaging.Encoder myEncoder =
    System.Drawing.Imaging.Encoder.Quality;

// Create an EncoderParameters object.
// An EncoderParameters object has an array of EncoderParameter
// objects. In this case, there is only one
// EncoderParameter object in the array.
EncoderParameters myEncoderParameters = new EncoderParameters(1);

EncoderParameter myEncoderParameter = new EncoderParameter(myEncoder, 
    50L);
myEncoderParameters.Param[0] = myEncoderParameter;
bmp1.Save(@"c:\TestPhotoQualityFifty.jpg", jpgEncoder, 
    myEncoderParameters);

myEncoderParameter = new EncoderParameter(myEncoder, 100L);
myEncoderParameters.Param[0] = myEncoderParameter;
bmp1.Save(@"c:\TestPhotoQualityHundred.jpg", jpgEncoder, 
    myEncoderParameters);

// Save the bitmap as a JPG file with zero quality level compression.
myEncoderParameter = new EncoderParameter(myEncoder, 0L);
myEncoderParameters.Param[0] = myEncoderParameter;
bmp1.Save(@"c:\TestPhotoQualityZero.jpg", jpgEncoder, 
    myEncoderParameters);

}

...

private ImageCodecInfo GetEncoder(ImageFormat format)
{

    ImageCodecInfo[] codecs = ImageCodecInfo.GetImageDecoders();

    foreach (ImageCodecInfo codec in codecs)
    {
        if (codec.FormatID == format.Guid)
        {
            return codec;
        }
    }
    return null;
} 
```

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2013-07-29T11:08:28.717

我使用这个简单的扩展来转换流，它所做的只是转换它并且对质量没有任何作用。

```
public static Stream ConvertImage(this Stream originalStream, ImageFormat format)
{
                var image = Image.FromStream(originalStream);

                var stream = new MemoryStream();
                image.Save(stream, format);
                stream.Position = 0;
                return stream;
} 
```

用法：

```
var outputStream = gifStream.ConvertImage(ImageFormat.Png); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-05T09:53:21.840

> Windows GDI+ 提供了[Image 类](http://msdn.microsoft.com/en-us/library/k7e7b2kd)和[Bitmap 类](http://msdn.microsoft.com/en-us/library/system.drawing.bitmap.aspx)，用于在内存中存储图像和在内存中操作图像。GDI+ 借助图像编码器将图像写入磁盘文件，并借助图像解码器从磁盘文件加载图像。

检查[Image.Save 方法](http://msdn.microsoft.com/en-us/library/8ex6sdew)重载以实现您的功能。[它支持ImageFormat Class](http://msdn.microsoft.com/en-us/library/system.drawing.imaging.imageformat)类型的各种图像格式。

遵循[Image.Save Method (String, ImageCodecInfo, EncoderParameters)](http://msdn.microsoft.com/en-us/library/ytz20d80)上的示例，它可以让您`Jpg`使用编码等保存文件。

代码片段：

```
using System;
using System.Drawing;
using System.Drawing.Imaging;
class Example_SetJPEGQuality
{
    public static void Main()
    {
        Bitmap myBitmap;
        ImageCodecInfo myImageCodecInfo;
        Encoder myEncoder;
        EncoderParameter myEncoderParameter;
        EncoderParameters myEncoderParameters;

        // Create a Bitmap object based on a BMP file.
        myBitmap = new Bitmap("Shapes.bmp");

        // Get an ImageCodecInfo object that represents the JPEG codec.
        myImageCodecInfo = GetEncoderInfo("image/jpeg");

        // Create an Encoder object based on the GUID

        // for the Quality parameter category.
        myEncoder = Encoder.Quality;

        // Create an EncoderParameters object.

        // An EncoderParameters object has an array of EncoderParameter

        // objects. In this case, there is only one

        // EncoderParameter object in the array.
        myEncoderParameters = new EncoderParameters(1);

        // Save the bitmap as a JPEG file with quality level 25.
        myEncoderParameter = new EncoderParameter(myEncoder, 25L);
        myEncoderParameters.Param[0] = myEncoderParameter;
        myBitmap.Save("Shapes025.jpg", myImageCodecInfo, myEncoderParameters);

        // Save the bitmap as a JPEG file with quality level 50.
        myEncoderParameter = new EncoderParameter(myEncoder, 50L);
        myEncoderParameters.Param[0] = myEncoderParameter;
        myBitmap.Save("Shapes050.jpg", myImageCodecInfo, myEncoderParameters);

        // Save the bitmap as a JPEG file with quality level 75.
        myEncoderParameter = new EncoderParameter(myEncoder, 75L);
        myEncoderParameters.Param[0] = myEncoderParameter;
        myBitmap.Save("Shapes075.jpg", myImageCodecInfo, myEncoderParameters);
    } 
```

// 编解码器信息

```
 private static ImageCodecInfo GetEncoderInfo(String mimeType)
        {
            int j;
            ImageCodecInfo[] encoders;
            encoders = ImageCodecInfo.GetImageEncoders();
            for(j = 0; j < encoders.Length; ++j)
            {
                if(encoders[j].MimeType == mimeType)
                    return encoders[j];
            }
            return null;
        }

    } 
```

希望这有帮助..

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-09-10T14:31:26.273

试试这个：

```
 public static class BitmapExtension
       {
          public static void Save(this Bitmap bitmap, String fileName, ImageFormat imageFormat, long quality = 75L)
          {
             using (var encoderParameters = new EncoderParameters(1))
             using (encoderParameters.Param[0] = new EncoderParameter(System.Drawing.Imaging.Encoder.Quality, quality))
             {
                ImageCodecInfo[] codecs = ImageCodecInfo.GetImageDecoders();

                bitmap.Save(fileName, codecs.Single(codec => codec.FormatID == imageFormat.Guid), encoderParameters);
             }
          }
       }

       ...

       Bitmap bitmap = new Bitmap("myImage.bmp");

       bitmap.Save("myImage.jpg", ImageFormat.Jpeg, 50L); 
```

# iphone - mobilesubstrate 可以挂这个吗？

> ID：10894838
> 
> 赞同：0
> 
> 时间：2012-06-05T09:31:44.143
> 
> 标签：iphone, c++, ios, jailbreak

我想挂钩一个`png_handle_IHDR`在 ImageIO 框架中本地声明的函数。我使用 MobileSafari 作为过滤器。但是在调用原始函数时，mobilesafari 崩溃了。在检查 NSLog 后，我得到了这个：

```
Jun  5 17:21:08 unknown MobileSafari[553] <Warning>: dlopen ImageIO success!
Jun  5 17:21:08 unknown MobileSafari[553] <Warning>: Zeroing of nlist success!
Jun  5 17:21:08 unknown MobileSafari[553] <Warning>: method name successfully assigned!
Jun  5 17:21:08 unknown MobileSafari[553] <Warning>: nlist SUCCESS! nlsetting..
Jun  5 17:21:08 unknown MobileSafari[553] <Warning>: nlset success! Hooking..
Jun  5 17:21:09 unknown MobileSafari[553] <Warning>: Png IHDR handle hooking!
Jun  5 17:21:09 unknown UIKitApplication:com.apple.mobilesafari[0x819][553] <Notice>: libpng error: Invalid IHDR chunk
Jun  5 17:21:09 unknown ReportCrash[554] <Notice>: Formulating crash report for process MobileSafari[553]
Jun  5 17:21:09 unknown com.apple.launchd[1] <Warning>: (UIKitApplication:com.apple.mobilesafari[0x819]) Job appears to have crashed: Abort trap: 6
Jun  5 17:21:09 unknown SpringBoard[530] <Warning>: Application 'Safari' exited abnormally with signal 6: Abort trap: 6 
```

我立即意识到很可能我得到了`png_handle_IHDR`错误的函数原型。以下是我在调整中的代码：

```
#import <CoreFoundation/CoreFoundation.h>
#include <substrate.h>

#define ImageIO "/System/Library/Frameworks/ImageIO.framework/ImageIO"

void (*png_handle_IHDR)();

MSHook(void, png_handle_IHDR){
    NSLog(@"Png IHDR handle hooking!\n");
    _png_handle_IHDR(); //crashed here!!
    NSLog(@"Png IHDR handle hooking finished!\n");

}

template <typename Type_>
static void nlset(Type_ &function, struct nlist *nl, size_t index) {
    struct nlist &name(nl[index]);
    uintptr_t value(name.n_value);
    if ((name.n_desc & N_ARM_THUMB_DEF) != 0)
        value |= 0x00000001;
    function = reinterpret_cast<Type_>(value);
}

MSInitialize {

        if (dlopen(ImageIO, RTLD_LAZY | RTLD_NOLOAD)!=NULL)
        {       
                NSLog(@"dlopen ImageIO success!\n");
                struct nlist nl[2];
                bzero(&nl, sizeof(nl));
                NSLog(@"Zeroing of nlist success!\n");
                nl[0].n_un.n_name = (char*) "_png_handle_IHDR"; 
                NSLog(@"method name successfully assigned!\n");
                nlist(ImageIO,nl);
                NSLog(@"nlist SUCCESS! nlsetting..\n");
                nlset(png_handle_IHDR, nl, 0);  
                NSLog(@"nlset success! Hooking..\n");
                MSHookFunction(png_handle_IHDR,MSHake(png_handle_IHDR));
        }        
} 
```

我的makefile是这样的：

```
include theos/makefiles/common.mk

TWEAK_NAME = privateFunctionTest
privateFunctionTest_FILES = Tweak.xm

include $(THEOS_MAKE_PATH)/tweak.mk
privateFunctionTest_FRAMEWORKS = UIKit ImageIO CoreGraphics Foundation CoreFoundation 
```

编辑：问题是，知道成功钩子所必需的原始函数参数吗？如果是，从反汇编中获取函数原型是唯一的方法吗？在任何 SDK 标头中都没有对此的定义。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T03:18:00.520

好的，我反编译了函数，得到了反编译器猜到的函数原型。只要参数和返回类型大致匹配，例如`bool : int`, `unsigned int : int`，它仍然可以工作而不会终止执行。所以这有效：

```
int *png_handle_IHDR(int a1, int a2, int a3);

MSHook(int, png_handle_IHDR, int a1, int a2, int a3){

    NSLog(@"png_handle_IHDR(%d,%d,%d)", a1,a2,a3);
    int val = _png_handle_IHDR(a1,a2,a3);
    NSLog(@"Png IHDR handle hooking finished, returning %d as result!", val);
    return val;

} 
```

# c# - 应用程序在 Visual Studio 之外冻结。从 Visual Studio 启动它时，它可以工作

> ID：10894839
> 
> 赞同：11
> 
> 时间：2012-06-05T09:31:44.323
> 
> 标签：c#, visual-studio-2010, visual-studio-2008, freeze

慢慢地，我劳累了……

我有一个带有线程、计时器、调用（不是 BeginInvoke，所以它是同步的）和 Application.DoEvents 的巨大应用程序。

在这里发帖太多了，我不知道问题出在哪里。

我的每个方法都在 try catch 中。每一次捕获都会被记录下来。

如果我从 Visual Studio (F5) 启动我的应用程序，或者通过 Ants 对其进行分析，则没有问题。该应用程序从几天开始运行。但是，一旦我通过 Windows 资源管理器启动相同的调试版本，它就会每隔几个小时冻结一次。它毫无例外地冻结。如果我将 Visual Studio 附加到该应用程序并中断它，它会在 Application.Run(new Form1()); 上停止。

我真的很困惑，不知道要修复它。

这是一个 .net 3.5 winforms 应用程序

它看起来像一个线程挂在这里：

```
if (grabber.InvokeRequired)
{
    Console.WriteLine("grabber.InvokeRequired");
    this.Invoke((MethodInvoker) delegate { grabber.Navigate("http://www.google.de"); }); // <-- hang
}
else
{
    grabber.Navigate(ig.StartUrl);
} 
```

此片段是计时器事件的一部分

```
_timeout = new System.Timers.Timer(10000);
_timeout.Elapsed += new ElapsedEventHandler(OnWatchDogBark); 
```

***编辑***

DoEvents() 的示例。这是在 lock() 和调用中

```
grabber.DocumentCompleted -= grabber_DocumentCompleted;
grabber.Navigate("http://www.google.de");

while (grabber.ReadyState != WebBrowserReadyState.Complete)
{
    timeout--;
    Application.DoEvents();
    Thread.Sleep(200);

    if (timeout < 0)
    {
        timeout = 50;
        grabber.Navigate("http://www.google.de");
    }
} 
```

目前我使用 System.Windows.Forms.Timer 和一些锁，但没有任何改进。

好的，我使用 WinDbg 获取了一些信息

# 编辑：14.06.2012

**!线程**

```
 PreEmptive   GC Alloc           Lock
       ID OSID ThreadOBJ    State     GC       Context       Domain   Count APT Exception
   0    1 37ec 007cab18      6020 Enabled  00000000:00000000 007c8510     0 STA System.ArgumentException (02762ba8)
   2    2 85b8 007d7c38      b220 Enabled  00000000:00000000 007c8510     0 MTA (Finalizer)
XXXX    3    0 06e9f548      9820 Enabled  00000000:00000000 007c8510     0 Ukn
  21    5 3464 0d6dc598   200b020 Enabled  28cb5820:28cb5fe8 007c8510     0 MTA
  22    6 62b0 0d6db9e0   200b220 Enabled  00000000:00000000 007c8510     0 MTA
  23    7 8e58 0d6db5f8    80a220 Enabled  00000000:00000000 007c8510     0 MTA (Threadpool Completion Port)
XXXX    4    0 06f62d40   1801820 Enabled  00000000:00000000 007c8510     0 Ukn (Threadpool Worker)
XXXX    f    0 132a3290   1801820 Enabled  00000000:00000000 007c8510     0 Ukn (Threadpool Worker)
XXXX   10    0 132a3678   1801820 Enabled  00000000:00000000 007c8510     0 Ukn (Threadpool Worker)
XXXX    e    0 132a26d8   1801820 Enabled  00000000:00000000 007c8510     0 Ukn (Threadpool Worker)
XXXX    9    0 0d6db210   1801820 Enabled  00000000:00000000 007c8510     0 Ukn (Threadpool Worker) 
```

**!dlk**

```
Examining SyncBlocks...
Scanning for ReaderWriterLock instances...
Scanning for holders of ReaderWriterLock locks...
Scanning for ReaderWriterLockSlim instances...
Scanning for holders of ReaderWriterLockSlim locks...
Examining CriticalSections...
Could not find symbol ntdll!RtlCriticalSectionList.
No deadlocks detected. 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-05T09:41:31.060

可能是后台线程中的死锁。尝试查看可能阻止您的应用程序的其他线程。

```
Toolbar -> Debug -> Windows -> Threads 
```

[http://msdn.microsoft.com/en-us/library/w15yf86f.aspx](http://msdn.microsoft.com/en-us/library/w15yf86f.aspx)

应该有多个线程，如果您双击一个线程，您会看到它正在停止您的应用程序的行。

如果您在代码中使用这一行：

```
Control.CheckForIllegalCrossThreadCalls = false; 
```

再次将其设置为 true。死锁的一个可能原因是后台线程访问控件。

而不是从背景线程写这个。

```
button1.Text = "hello" 
```

写这个。

```
this.Invoke(() => button1.Text = "hello"); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-07T14:23:56.293

如果它冻结，您可能会看到死锁。我发现找到死锁的最好方法之一是使用崩溃转储和 sosex。

这是一篇关于使用这种技术的好文章（它是 asp.net，但适用相同的原则）：http: [//blogs.msdn.com/b/tess/archive/2010/04/27/debugging-a-classic-readerwriterlock -deadlock-with-sosex-dll.aspx](http://blogs.msdn.com/b/tess/archive/2010/04/27/debugging-a-classic-readerwriterlock-deadlock-with-sosex-dll.aspx)

让应用程序运行直到它冻结，并进行挂起转储：http: [//blogs.msdn.com/b/tess/archive/2006/10/16/net-hang-debugging-walkthrough.aspx](http://blogs.msdn.com/b/tess/archive/2006/10/16/net-hang-debugging-walkthrough.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-13T17:49:46.183

调用很危险，很容易以意想不到的方式导致死锁，我建议更换

`this.Invoke((MethodInvoker)...`

和

`this.BeginInvoke((MethodInvoker)...`

这不会阻止调用者并且可能会解决问题。

编辑如果不是，您将需要等到它死锁，然后使用 windbg 来查看您为什么会死锁。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-13T23:50:32.833

当从 VS 运行时，它会注入一个调试器线程，这会改变一些消息路由。您可能在`Invoke(...)`阻止队列中正在等待消息的内容时遇到问题，但在调试器下，获胜消息的处理顺序不同。

IIUC 您不需要使用 System.Windows.Forms.Timer 锁定，因为它使用 win 消息泵，因此计时器事件始终在 GUI 线程上处理（除非您的应用程序中的其他东西正在 TheadPool 或专用后台线程上运行代码）。

因此，您的示例代码中没有任何内容涉及线程，除非 Web 浏览器控件在后台线程上触发其事件（在这种情况下，将这些事件 POST 回 UI 线程，使用`BeginInvoke()`）。一旦你在主 UI 线程上运行了所有应用程序控制，就移除锁（作为调试辅助）。请发布有关后台处理和迄今为止的任何结果的更多信息。

# sql - Django 优化查询集

> ID：10894840
> 
> 赞同：0
> 
> 时间：2012-06-05T09:31:48.263
> 
> 标签：sql, django, optimization

我正在尝试这样做：

```
emails = [c.email for c in Client.objects.all().order_by('lastname', 'firstname')] 
```

有没有更好的方法可以查询`SELECT email from clients ORDER BY lastname, firstname`？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-05T09:39:50.190

```
Client.objects.order_by('lastname', 'firstname').values_list('email', flat=True) 
```

# liferay - Liferay ext插件——在util-java中重写java类

> ID：10894849
> 
> 赞同：1
> 
> 时间：2012-06-05T09:32:27.117
> 
> 标签：liferay

我需要覆盖 /util-java/src/com/liferay/util/Normalizer.java

[我在git](https://github.com/brianchandotcom/liferay-portal/pull/4838/files)上找到了代码。

我按照[这个说明](http://www.liferay.com/web/edward.shin/blog/-/blogs/4701348)做了*蚂蚁清洁*

我读[了这个](http://www.liferay.com/documentation/liferay-portal/6.0/development/-/ai/creating-an-ext-plugin)

将我的 .java 文件放入 my-ext-plugin/docroot/WEB-INF/ext-util-java/com/liferay/util/Normalizer.java

*蚂蚁构建*

```
 BUILD FAILED
`/liferay/plugins/liferay-plugins-sdk-6.1.0-ce-ga1/ext/build-common-ext.xml:122: The` following error occurred while executing this line:
/liferay/plugins/liferay-plugins-sdk-6.1.0-ce-ga1/ext/build-common-ext.xml:173: The following error occurred while executing this line:
/liferay/plugins/liferay-plugins-sdk-6.1.0-ce-ga1/build-common.xml:80: /liferay/plugins/liferay-plugins-sdk-6.1.0-ce-ga1/ext/normalizer-ext/docroot/WEB-INF/ext-service/src does not exist. 
```

我知道正确的方法是创建 Normalizer.java 的孩子并覆盖那些私有方法，但我想知道将这些文件放在哪里。

我很惊讶你能找到多少关于这方面的信息。所有 Liferay 大师都表现得非常简单。但事实并非如此。

更新

buld.username.properties

```
 app.server.dir = /liferay/bundles/liferay-portal-6.1.0-ce-ga1-new/tomcat-7.0.23
    ext.work.dir = /liferay/bundles
    app.server.zip = /liferay/portal/liferay-portal-tomcat-6.1.0-ce-ga1.zip 
```

**更新 2**

我创建了 ext-service/src 文件夹并获得了 BUILD SUCCESSFUL 的奖励。

*ant compile*和*ant deploy*正在工作

*url-redirect-fix-ext*是我的 ext 插件的名称。

```
[root@localhost url-redirect-fix-ext]# ant deploy
Buildfile: /liferay/plugins/liferay-plugins-sdk-6.1.0-ce-ga1/ext/url-redirect-fix-ext/build.xml

compile:

compile-with-global-class-loader:

compile-java:

compile-with-portal-class-loader:

compile-java:

compile-with-portal-class-loader:

compile-java:

compile-with-portal-class-loader:

compile-java:

compile-with-portal-class-loader:

compile-java:

war:

war-util:

war-util:

war-util:
   [delete] Deleting: /liferay/plugins/liferay-plugins-sdk-6.1.0-ce-ga1/dist/url-redirect-fix-ext-6.1.0.1.war
      [zip] Building zip: /liferay/plugins/liferay-plugins-sdk-6.1.0-ce-ga1/dist/url-redirect-fix-ext-6.1.0.1.war
   [delete] Deleting: /liferay/plugins/liferay-plugins-sdk-6.1.0-ce-ga1/ext/url-redirect-fix-ext/docroot/WEB-INF/ext-url-redirect-fix-ext.xml

deploy:
     [copy] Copying 1 file to /liferay/bundles/liferay-portal-6.1.0-ce-ga1-new/deploy

BUILD SUCCESSFUL 
```

**但是*蚂蚁部署*不起作用**

```
[root@localhost url-redirect-fix-ext]# ant build
Buildfile: /liferay/plugins/liferay-plugins-sdk-6.1.0-ce-ga1/ext/url-redirect-fix-ext
/build.xml

BUILD FAILED
Target "build" does not exist in the project "url-redirect-fix-ext". 
```

我按照说明部署了我的插件，然后重新启动了服务器。

这是我的 Tomcat 日志。我猜插件部署成功了。

```
15:36:18,815 INFO  [AutoDeployDir:167] Processing url-redirect-fix-ext-6.1.0.1.war
15:36:18,818 INFO  [ExtAutoDeployListener:43] Copying extension environment plugin for /liferay/bundles/liferay-portal-6.1.0-ce-ga1-new/deploy/url-redirect-fix-ext-6.1.0.1.war
  Expanding: /liferay/bundles/liferay-portal-6.1.0-ce-ga1-new/deploy/url-redirect-fix-ext-6.1.0.1.war into /liferay/bundles/liferay-portal-6.1.0-ce-ga1-new/tomcat-7.0.23/temp/20120605153618829
  Copying 1 file to /liferay/bundles/liferay-portal-6.1.0-ce-ga1-new/tomcat-7.0.23/temp/20120605153618829/WEB-INF
  Copying 1 file to /liferay/bundles/liferay-portal-6.1.0-ce-ga1-new/tomcat-7.0.23/temp/20120605153618829/WEB-INF/classes
  Copying 1 file to /liferay/bundles/liferay-portal-6.1.0-ce-ga1-new/tomcat-7.0.23/temp/20120605153618829/WEB-INF/classes
  Copying 1 file to /liferay/bundles/liferay-portal-6.1.0-ce-ga1-new/tomcat-7.0.23/temp/20120605153618829/WEB-INF
  Warning: WEB-INF/ext-impl/classes/com/liferay/portal/deploy/dependencies/ext-url-redirect-fix-ext-util-bridges.jar modified in the future.
  Warning: WEB-INF/ext-impl/classes/com/liferay/portal/deploy/dependencies/ext-url-redirect-fix-ext-util-java.jar modified in the future.
  Warning: WEB-INF/ext-impl/classes/com/liferay/portal/deploy/dependencies/ext-url-redirect-fix-ext-util-taglib.jar modified in the future.
  Warning: WEB-INF/ext-impl/ext-impl.jar modified in the future.
  Warning: WEB-INF/ext-service/ext-service.jar modified in the future.
  Warning: WEB-INF/ext-util-bridges/ext-util-bridges.jar modified in the future.
  Warning: WEB-INF/ext-util-java/ext-util-java.jar modified in the future.
  Warning: WEB-INF/ext-util-taglib/ext-util-taglib.jar modified in the future.
  Warning: WEB-INF/ext-web/docroot/WEB-INF/liferay-portlet-ext.xml modified in the future.
  Warning: WEB-INF/ext-web/docroot/WEB-INF/portlet-ext.xml modified in the future.
  Warning: WEB-INF/ext-web/docroot/WEB-INF/struts-config-ext.xml modified in the future.
  Warning: WEB-INF/ext-web/docroot/WEB-INF/tiles-defs-ext.xml modified in the future.
  Warning: WEB-INF/liferay-plugin-package.properties modified in the future.
  Warning: WEB-INF/ext-impl/classes modified in the future.
  Warning: WEB-INF/ext-impl/classes/com/liferay modified in the future.
  Warning: WEB-INF/ext-impl/classes/com/liferay/portal modified in the future.
  Warning: WEB-INF/ext-impl/classes/com/liferay/portal/deploy modified in the future.
  Warning: WEB-INF/ext-impl/src modified in the future.
  Warning: WEB-INF/ext-lib modified in the future.
  Warning: WEB-INF/ext-lib/global modified in the future.
  Warning: WEB-INF/ext-lib/portal modified in the future.
  Warning: WEB-INF/ext-service/classes modified in the future.
  Warning: WEB-INF/ext-service/src modified in the future.
  Warning: WEB-INF/ext-util-bridges modified in the future.
  Warning: WEB-INF/ext-util-bridges/classes modified in the future.
  Warning: WEB-INF/ext-util-bridges/src modified in the future.
  Warning: WEB-INF/ext-util-java modified in the future.
  Warning: WEB-INF/ext-util-java/classes modified in the future.
  Warning: WEB-INF/ext-util-java/com modified in the future.
  Warning: WEB-INF/ext-util-java/com/liferay modified in the future.
  Warning: WEB-INF/ext-util-java/com/liferay/util modified in the future.
  Warning: WEB-INF/ext-util-java/src modified in the future.
  Warning: WEB-INF/ext-util-taglib modified in the future.
  Warning: WEB-INF/ext-util-taglib/classes modified in the future.
  Warning: WEB-INF/ext-util-taglib/src modified in the future.
  Warning: WEB-INF/ext-web modified in the future.
  Warning: WEB-INF/ext-web/docroot modified in the future.
  Copying 8 files to /liferay/bundles/liferay-portal-6.1.0-ce-ga1-new/tomcat-7.0.23/webapps/url-redirect-fix-ext
  Copying 2 files to /liferay/bundles/liferay-portal-6.1.0-ce-ga1-new/tomcat-7.0.23/webapps/url-redirect-fix-ext
  Deleting directory /liferay/bundles/liferay-portal-6.1.0-ce-ga1-new/tomcat-7.0.23/temp/20120605153618829
15:36:19,062 INFO  [ExtAutoDeployListener:50] Extension environment for /liferay/bundles/liferay-portal-6.1.0-ce-ga1-new/deploy/url-redirect-fix-ext-6.1.0.1.war copied successfully. Deployment will start in a few seconds.
Jun 5, 2012 3:36:25 PM org.apache.catalina.startup.HostConfig checkResources
INFO: Reloading context [/url-redirect-fix-ext]
15:36:25,612 INFO  [PluginPackageUtil:1099] Reading plugin package for url-redirect-fix-ext
15:36:25,618 INFO  [ExtHotDeployListener:226] Extension environment for url-redirect-fix-ext will not be undeployed
15:36:26,090 INFO  [PluginPackageUtil:1099] Reading plugin package for url-redirect-fix-ext
15:36:26,133 INFO  [ExtHotDeployListener:234] Registering extension environment for url-redirect-fix-ext
15:36:26,133 INFO  [ExtHotDeployListener:152] Extension environment for url-redirect-fix-ext has been applied. 
```

**不工作。我的门户中仍然存在错误。**

所以我在 Git 上找到的解决方案没有处理我的错误或者新的 Normalizer.java 没有覆盖旧的 Normalizer.class

我怎么能确定？

**更新 3**

*蚂蚁部署*

```
ERROR [ExtHotDeployListener:189] Extension environment for normalizer-ext cannot be applied because of detected conflicts:
url-redirect-fix-ext:
    ext-util-java/com/liferay/util/Normalizer.java
    ext-web/docroot/WEB-INF/liferay-portlet-ext.xml
    ext-web/docroot/WEB-INF/portlet-ext.xml
    ext-web/docroot/WEB-INF/struts-config-ext.xml
    ext-web/docroot/WEB-INF/tiles-defs-ext.xml
    ext-web/docroot/WEB-INF/web.xml 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T12:02:58.503

您从 util-java 更改代码，但将其放入 util-bridges？试着把它放在 ext-util-java 中。似乎没有涉及调用它的弹簧自动装配，并且该类中只有静态方法，因此您可能只需要复制现有代码并根据需要对其进行修补，然后编译。

编辑/添加：

从错误消息看来，您从[http://www.liferay.com/documentation/liferay-portal/6.0/development/-/ai/creating-an-ext-plugin](http://www.liferay.com/documentation/liferay-portal/6.0/development/-/ai/creating-an-ext-plugin)中的这一段太难了：

> 提示：创建 Ext 插件后，删除所有默认添加的扩展不需要的文件。这很重要，因为 Liferay 会跟踪每个 Ext 插件部署的文件，如果两个 Ext 插件覆盖同一文件以避免冲突，它将不允许部署两个 Ext 插件。通过从 ext 插件中删除任何不需要的文件，它将更容易与其他 Ext 插件一起使用。

您应该*只*删除插件中不需要的*文件，而不是**目录*。您声明的错误消息说

> normalizer-ext/docroot/WEB-INF/ext-service/src 不存在

编辑2：

在您的最新编辑中，您说“ant deploy”不起作用，但您实际执行的命令是“ant build”——ant 抱怨找不到“build”目标。用“ant deploy”再试一次

编辑3：

这更像是一个交互式调试会话而不是问答 :-)

您可以拥有任意数量的 ext 插件，但每个文件只能在一个 ext 插件中覆盖（包含）。错误消息告诉您出了什么问题：构建过程抱怨的文件是从不同的 ext-plugins 修改的。这就是为什么引用（请参阅上面我的回答，“提示”部分）说要从插件中删除*文件*，除非你真的需要并覆盖它们。构建过程抱怨的文件正是 create-script 自动启动 ext 插件的文件。

# ruby-on-rails - 如何在 Rails 中设置日期时间格式

> ID：10894851
> 
> 赞同：3
> 
> 时间：2012-06-05T09:32:28.740
> 
> 标签：ruby-on-rails, datetime, activerecord

我正在使用一个 js 日历，它将一个字符串插入一个文本字段以作为日期时间值提交。不确定这是否重要，但我现在正在使用 SQLite。

我将格式设置如下（在初始化程序中）：

```
Time::DATE_FORMATS[:default] = '%m/%d/%Y %H:%M'
Time::DATE_FORMATS[:db] = '%m/%d/%Y %H:%M' 
```

这不起作用，因为 Rails 显然使用不同的格式验证日期。

例如，如果我将其设置如下：

```
myobject.my_datetime = '06/30/2012 00:00' 
```

它最终为空（ActiveRecord 生成的 SQL 查询本身将其设置为 NULL）。如果我将它设置为小于或等于 12 的一天，则日期部分最终正确（但生成的 SQL 查询仍然显示该月前一天的字符串，即在上面的示例中，SQL 查询的字符串为 '30 /06/2012 05:00:000000')。

如您所见，即使我将 config.time_zone 设置为东部时间，它似乎也为 UTC（？）增加了 5 个小时。

从控制台或通过表单提交的行为是相同的。

关于我所缺少的任何建议？

更新：

当我按照 jdoe 的建议执行此操作时：

myobject.my_datetime = Time.strptime('06/30/2012 08:00', '%m/%d/%Y %H:%M')

生成的查询现在看起来正确（忽略 4 小时的差异）：

```
UPDATE "myjoin_table" SET "my_datetime" = '06/30/2012 04:00.000000' ..... 
```

它以这种方式在数据库中结束。

但是当我重新加载对象时，AR 对象中的值被初始化为 nil。

我想我将在我的控制器操作中逐个解析字符串并手动将参数设置为 update_attributes。这比它应该的更难。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-05T10:59:17.267

ActiveRecord 以 UTC+00:00 存储日期/时间。如果您居住在 +5 区域，ActiveRecord 会自动减少 5 小时的分配时间。因此，您当前的时区只是说明必须从您的本地时间添加/减去多少小时。

关于解析。您是否尝试过以下操作？

```
myobject.my_datetime = Time.strptime('06/30/2012 00:00', '%m/%d/%Y %H:%M') 
```

Rails 时间/日期设置是为了显示，而不是为了分配。从用户那里获取字符串并将它们分配给您的日期/时间属性并不是一个好主意。您最好在分配中使用适当的时间对象而不是刺痛。如果某些用户试图成为黑客，该`strptime`方法将引发。`ArgumentError`你`record.date_time='string'`默默地失败了。

* * *

**UPD：使用示例**

```
p = Product.first
p.last_visited = Time.strptime('06/30/2012 00:00', '%m/%d/%Y %H:%M')
p.save # leads to UPDATE "products" SET "last_visited" = '2012-06-29 21:00:00.000000'
Product.last_visited.localtime.strftime('%m/%d/%Y %H:%M') # => "06/30/2012 00:00" 
```

如您所见，时间的存储和检索没有任何问题。

**UPD 2：I18n**

找到您的`config/locales/en.yml`. 添加以下内容：

```
en:
  time:
    formats:
      default: '%m/%d/%Y %H:%M' 
```

要解析您的时间使用`t`（或`translate`）助手：

```
@time = Time.strptime('06/30/2012 00:00', t('time.formats.default')) 
```

使用`l`（或`localize`）助手以您的格式显示时间：

```
= l @time 
```

# django - 自动生成的 photologue 图像 url 是否可以覆盖？

> ID：10894852
> 
> 赞同：3
> 
> 时间：2012-06-05T09:32:32.170
> 
> 标签：django, photologue, media-url

我有两个独立的服务器。一个是托管 django 实例`"www.example.com"`，另一个是提供静态文件`"static.example.com"`。在 django 设置中，`MEDIA_URL`指向`"static.example.com"`. 因此，我的 photologue 正在使用该`"static.example.com"`域。

我想`"www.example.com"`用于我的 photologue，但我不知道如何覆盖`MEDIA_URL`photologue 的设置。你知道有什么办法可以解决这个问题吗？

**注意：** Django 通过 apache 提供服务，静态文件托管在 AWS（亚马逊网络服务）上。我只想更改 photologue 域。其他静态文件必须保留在原处。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T10:30:20.877

不幸的是，Photologue 没有为此提供设置。

但是查看代码，我发现了一种解决方法，应该可以解决问题。我假设您使用这些`get_SIZE_url()`方法。所有这些方法都调用`self.cache_url()`. 因此，您可以创建一个覆盖此方法的子类`ImageModel`（或者`Photo`如果您想拥有它附带的功能）。

```
from photologue.models import ImageModel  # or Photo

class LocalPhoto(ImageModel):   # or Photo

    def cache_url(self):
        local_path = os.path.dirname(self.image.url)[7:].split('/', 1)[1]
        return '/%s/%s' % (local_path, 'cache') 
```

如果你扩展`Photo`了你已经有一个工作，`get_absolute_url()`否则一个实现是直截了当的。

Django admin 使用`get_admin_thumbnail_url()`，所以如果你定义一个`PhotoSize`名为 'admin_thumbnail' 的方法，上面的方法也应该在那里工作。

效果有一种方法`sample_url()`用于在 Django admin 中显示示例图像的效果。这个方法是基于`MEDIA_URL`所以它不会起作用。不幸的是，在这种情况下，您不能简单地覆盖此方法。但由于这些图像不会改变，您可以将它们上传到 AWS。

# javascript - .style .backgroundColor 错误

> ID：10894854
> 
> 赞同：1
> 
> 时间：2012-06-05T09:32:34.617
> 
> 标签：javascript, selenium, ide

这是我的脚本（在 Selenium IDE 中）：

```
storeEval |   var form =window.document.forms[0];

elements = form.elements; for (var i = 0; i < elements.length; i++) 
{window.document.getElementsByTagName("elements").item(i).style.backgroundColor}
| result 
```

这是我的错误：

```
[error] Threw an exception: window.document.getElementsByTagName("elements").item(i) is null 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-05T09:35:59.487

Your code is looking for elements of type `element`, like this:

```
<element>Something</element> 
```

but there aren't any in the document.

Did you really mean to search for `<element>` elements? It looks like the content of your loop wants to be something like this:

```
elements.item(i).style.backgroundColor 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-05T09:38:09.517

Instead of this:

`window.document.getElementsByTagName("elements").item(i).style.backgroundColor`

Just use this:

`elements[i].style.backgroundColor`

# typo3 - 清除缓存后链接中的 Typo3 realurl 错误 defaultValue

> ID：10894858
> 
> 赞同：1
> 
> 时间：2012-06-05T09:32:49.843
> 
> 标签：typo3, realurl

我正在运行 Typo3 4.5.12 和 realurl 扩展版本 1.11.1。我的网站有 3 种语言 de、en、ch，默认语言是 de、德语。

如果我清除 realurl 的缓存并首先调用 www.example.com/site 一切正常。

但是，如果我首先在 clearCache 之后调用例如带有语言参数的 URL，例如 www.example.com/en/site，然后在 www.example.com/site 之后，所有链接都会在 href 中获取 ../en/.. - 像 www.example.com/en/site2 这样的标签。

当我在 clearCache 之后第一次调用带有 ../ch/.. 或 ../de/.. 的站点时，情况是一样的

当我在链接中调用 www.example.com/site 时，为什么他不选择默认语言？

我的realurl配置：

```
$TYPO3_CONF_VARS['EXTCONF']['realurl']['_DEFAULT'] = array(
    init' => array(
        'enableCHashCache' => 1,
        'appendMissingSlash' => 'ifNotFile',
        'enableUrlDecodeCache' => 1,
        'enableUrlEncodeCache' => 1,
        'respectSimulateStaticURLs' => 0,
    ),
    'redirects_regex' => array (
    ),
    'preVars' => array(
        array(
            'GETvar' => 'no_cache',
            'valueMap' => array('no_cache' => 1),
            'noMatch' => 'bypass',
        ),
        array(
            'GETvar' => 'L',
            'valueMap' => array(
                'de' => '0',
                'en' => '1',
                'cn' => '2',
            ),
            'defaultValue' => 'de',
            'noMatch' => 'bypass',
        ),
    ),
... 
```

我的页面配置：

```
simulateStaticDocuments = 0
tx_realurl_enable = 1
prefixLocalAnchors = all

linkVars = mobile(off),L
uniqueLinkVars = 1

sys_language_uid = 0
language = de
locale_all = de_DE.UTF-8

sys_language_mode = content_fallback
sys_language_overlay = 1 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T22:41:34.620

```
[...]
'defaultValue' => 'de',
'noMatch' => 'bypass',
[...] 
```

都有些反字典。

拿出`noMatch`来，这将创建像这样的 url：

```
/site1 (german)
/en/site1 (english)
/cn/site1 (chinese) 
```

否则去

```
'noMatch' => 'de' //(without `'defaultValue' => 'de'`) 
```

要得到

```
/de/site1 (german)
/en/site1 (english)
/cn/site1 (chinese) 
```

# backbone.js - 主干集合在重置/获取时与模型分离

> ID：10894859
> 
> 赞同：1
> 
> 时间：2012-06-05T09:32:51.433
> 
> 标签：backbone.js, backbone-relational

我正在开发一个有两个视图的应用程序。

View 1 是一个文档列表，展示了一些重要的细节 View 2 是它本身的文档。可编辑。

该应用程序是多用户的。因此，应用程序会轮询服务器以获取对集合的更新。

问题是，当集合（视图 1）被刷新（.fetch）时，它会从子模型中解除所有事件的绑定。包括在视图 2 中打开的一个。与获取之前一样，文档（模型）中的任何更改都反映在列表（集合）中，获取之后文档（现在是旧模型）现在与列表（集合）无关.

查看backbone.js 源代码后，这是预期的行为。是否有解决此问题的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T09:45:45.200

是的，这是一个非常普遍的问题。集合被重置并且它的所有引用都被刷新，即使它们的目标是与以前相同的模型。

我认为实施一种`Collection.update()`与`Collection.fetch()`.

检查此步骤以了解处理此行为的方法：[Backbone.js collection upsert?](https://stackoverflow.com/questions/9640095/backbone-js-collection-upsert)

# html - 尝试使用 CSS 专门定位文本，并允许它随页面移动

> ID：10894866
> 
> 赞同：1
> 
> 时间：2012-06-05T09:33:11.083
> 
> 标签：html, css

```
<!DOCTYPE html>
<html>
<head>

<style type="text/css">
p.titletext
{
font-family:"arial";
font-size:50px;
position:relative;
left:425px;
top:10px;
}
</style>
</head>

<body>
<p class="titletext">Hello World.</p>

</body>
</html> 
```

我在问是否有任何东西可以处理文本定位，从而在页面展开/收缩时实际上将文本保持在其位置。换句话说，我希望根据页面大小来定位文本。例如，如果我新建一个段落并将其居中对齐，那么无论窗口大小，文本将始终保持居中。有没有办法在根据自己的喜好设置文本位置时实现这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T09:40:08.517

试试这个方法

```
body{text-align:center;}
p.titletext
{
font-family:"arial";
font-size:50px;
} 
```

更新：-对于水平和垂直

```
<style type="text/css">

p.titletext
{ position:absolute; top:50%; left:50%; height:2em; margin-top:-1em; width:40%; margin-left:-20%;text-align:center; 
font-family:"arial";
font-size:50px;
}
</style> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-05T09:40:22.117

这可以通过`text-align:center`and `top:50%`in`p.titletext`和 remove完成，`position:relative`因此它将始终位于中心

# jquery - jquery - 使用变量？

> ID：10894867
> 
> 赞同：1
> 
> 时间：2012-06-05T09:33:12.683
> 
> 标签：jquery

假设我有一个变量：

```
var $box = $(this).next('widget'); 
```

现在说我想让小部件 div 内的另一个 div 淡出。我怎样才能访问 box 变量中的那个 div？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-05T09:34:27.263

```
var $box = $(this).next('widget');

$box.find('#your_div').fadeOut(); // #your_div is just a selector, 
                                  // you may have something different 
```

# jquery - colorbox中有多个tinymces

> ID：10894868
> 
> 赞同：1
> 
> 时间：2012-06-05T09:33:18.690
> 
> 标签：jquery, ajax, tinymce, colorbox

我正在编写一个内联 CMS，管理员通过点击前端的“编辑”按钮来编辑内容。

我需要包含多个 tinymces 的 Web 表单才能在灯箱中打开，并且需要一个优雅的解决方案。我有在自己的 url 上工作的 web 表单（对于非 js 用户），并且正在使用 ajax 将它们加载到 colorbox 灯箱中。这是我到目前为止所拥有的：

```
jQuery(document).ready(function(){
    jQuery(".ajax").colorbox({
        onComplete : function(){ tinyMCE.execCommand('mceAddControl', true, "mytextarea"); },
        onClosed   : function(){ tinyMCE.execCommand('mceRemoveControl', true, "mytextarea");}
    });
});
...
<a class='ajax' href="/mywebformurl #mywebform">Edit</a> 
```

我有三个问题：

1.  这仅适用于具有 id 的文本区域`mytextarea`。我希望它与类的所有文本区域一起工作`.tiny_mce`（根据我的 tinymce 配置`mode : "specific_textareas", editor_selector : "tiny_mce"`）。

2.  我不想在主机页面上加载tinymce，只有当灯箱打开时。

3.  如何删除对`#mywebform`href 的添加，但仍然让它只加载 webform，而不是 /mywebformurl 的整个页面？

本质上，我希望 ajax 加载的内容是独立的，并且像我直接访问 mywebform url 时一样工作（使其成为自己的 js 包含等）。我正在考虑使用 iFrame 而不是 ajax，但一直认为应该不惜一切代价避免使用 iframe。

# javascript - 是否有在平板电脑上运行的 javascript 开发环境？

> ID：10894879
> 
> 赞同：0
> 
> 时间：2012-06-05T09:33:38.120
> 
> 标签：javascript, android

我经常乘火车旅行，最近买了一个安卓平板电脑，我想学习一些 javascript。我可以在平板电脑上阅读书籍，但我也想在上面编程。有没有办法在平板上开发？我看到的解决方案专注于在 PC 上开发并在模拟器/平板电脑上运行，这不是我想要的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T09:37:08.273

只要您有 Internet 连接，您就可以使用[http://jsfiddle.net](http://jsfiddle.net)来测试代码片段。您还可以在左侧导航器中选择要使用的 js 框架。

# c# - 无法解密文件。读取受 Excel 保护的文件

> ID：10894880
> 
> 赞同：1
> 
> 时间：2012-06-05T09:33:40.453
> 
> 标签：c#, asp.net, excel

我有 excel 文件，它给出错误“无法解密文件。”。当我打开 excel 文件时，它正在打开并且不提示我输入任何密码。

但是当我在 excel 中检查它对工具栏的保护时。它显示文件受保护。

如何使用 OLEDBConnection 读取该文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T16:31:07.363

我今天有一个用户遇到这个问题......我只是告诉她要么取消保护工作表

在我的具体情况下，她实际上无法取消保护工作表，因为它需要密码才能取消保护，所以我只是让她将数据复制/粘贴到一个新的 Excel 文件中。

# ios - UITextField 删除“...”

> ID：10894887
> 
> 赞同：3
> 
> 时间：2012-06-05T09:34:02.253
> 
> 标签：ios, cocoa, uitextfield

我对 UITextField 有疑问，而我最好的朋友 google 不想帮助我...

如果内容太长，我会删除在字段末尾自动添加的“...”。可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T09:38:41.717

This is "truncate tail" of LineBreaks property in xib file. You can change to "word wrap" for example.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T10:43:11.200

如果您制作了一个 UILabel 并按照“kaspartus”的描述进行操作，并将 UITextField 放在相同的位置和大小，并具有清晰的背景和文本颜色，该怎么办。然后只需将目标添加到“UIControlEventEditingChanged”上的文本字段并将标签的文本设置为文本字段的文本。这个解决方案不是你真正应该做的，但如果它有效..

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-05T11:00:35.360

在这里你使用你自己的尺寸..

```
yourTextField.frame=CGRectMake(0, 0, 320, yourTextField.contentVerticalAlignment); 
```

以及水平对齐使用波纹管代码

```
_positionTextField.frame=CGRectMake(0, 0, _positionTextField.contentHorizontalAlignment, 44); 
```

你也可以同时使用...希望这对你有帮助.... :)

# jquery - 如何在 jQuery 元素选择器中获取多个名称？

> ID：10894891
> 
> 赞同：16
> 
> 时间：2012-06-05T09:34:07.077
> 
> 标签：jquery

我想在多个页面上应用我的脚本，所以 var 应该读取 3 个名称而不仅仅是一个；这是现在的样子：

```
var first;
$(document).ready(function() {
  first = $('[name=body]').val();
}); 
```

需要做一个或“||”或一个和“&&”，所以名称可能是'body'，'body2'和'body3'，取决于它是什么页面。请帮忙

谢谢大家，

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-06-05T09:38:32.890

您可以在选择器中列出多个项目，如下所示：

```
var body;
$(function() {
   body = $('[name=body], [name=body2], [name=body3]').val();
}); 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-06-05T09:35:45.930

为什么不使用 attribute-starts-with 选择器 ( `attribute^="value"`) 涵盖所有可能性：

```
var first;
$(document).ready(function() {
    first = $('[name^="body"]').val();
}); 
```

请记住，这将在所有元素中搜索该特定属性/值；所以最好限制浏览器必须做的工作量，例如通过识别特定的元素类型：

```
first = $('input[name^="body"]'); 
```

此外，由于选择器返回一个数组，该数组`val()`将从选择器返回的*第一个*匹配元素中获取，它不会返回所有匹配元素的值的数组。

参考：

*   [属性以（`attribute^="value"`）开始的选择器](http://api.jquery.com/attribute-starts-with-selector/)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-04-06T09:32:21.053

检查我的片段

```
$('a[name="' + href + '"]' + ', a[name="' + decodeURIComponent(href) + '"]'); 
```

生成的`selector`会像

```
'a[name="May%2FJune"], a[name="May/June"]"' 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-02-19T16:06:08.523

大卫托马斯回答有效。我只想提一下，如果您希望 tp 一次获取所有值（例如，对于 ajax 调用），您可以使用 serialize 函数，该函数将为您提供一个 urlencoded 字符串，您可以在 jQuery 或任何其他基于 url 的 ajax 函数中使用该字符串函数（例如 window.location.href）

```
all = $('input[name^="body"]').serialize; 
```

# jquery - 从 jquery 数据表中删除第一个和最后一个分页

> ID：10894892
> 
> 赞同：4
> 
> 时间：2012-06-05T09:34:13.993
> 
> 标签：jquery, datatable

我目前正在使用[jQuery Datatable](http://datatables.net)。我还使用 jquery ui 来提供好的主题。但是，我想通过对 jquery 库进行一些自定义来禁用（隐藏）表中的分页`first`和`last`按钮。 ![在此处输入图像描述](../Images/e07d7ef0c34d5c2bff1492fac6ce5bf5.png)

问题是自定义只有 2 种方法：`full_numbers`和`two_button`.

那么我怎样才能在没有`first`and last的情况下获得分页`button`呢？

任何帮助将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2014-11-10T16:14:59.220

您有 4 个选项：

*   `simple`- 仅“上一个”和“下一个”按钮
*   `simple_numbers`- “上一个”和“下一个”按钮，加上页码
*   `full`- “第一个”、“上一个”、“下一个”和“最后一个”按钮
*   `full_numbers`- “第一个”、“上一个”、“下一个”和“最后一个”按钮，以及页码

所以在你的情况下：

```
$("#youridtable").dataTable(
{
  "pagingType": "simple_numbers"
}); 
```

来源：[http ://www.datatables.net/examples/basic_init/alt_pagination.html](http://www.datatables.net/examples/basic_init/alt_pagination.html)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-05T09:39:38.547

编写您自己的 javascript 来隐藏/删除元素。

`$(".first.paginate_button, .last.paginate_button").hide();`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-05-22T19:45:20.967

你总是可以使用 css

```
.dataTables_paginate .last{display:none;} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-05-30T11:16:05.953

我们不需要使用 CSS。只需破解 Datatable 的 sFirst 和 sLast 选项：

```
$(document).ready( function() {
  $('#example').dataTable( {
    "oLanguage": {
      "oPaginate": {
        "sFirst": "",
        "sLast": ""
      }
   }
  });
}); 
```

参考： http: [//legacy.datatables.net/usage/i18n](http://legacy.datatables.net/usage/i18n)

# java - 使用谷歌应用引擎上传图片的一步上传

> ID：10894895
> 
> 赞同：1
> 
> 时间：2012-06-05T09:34:25.087
> 
> 标签：java, android, google-app-engine, http-post, blobstore

我正在尝试实现一个非常基本的功能，将图像从 Android、iPhone 和网络客户端上传到谷歌应用引擎。感谢[这个](http://jeremyblythe.blogspot.nl/2010/10/manipulating-images-in-blobstore.html)博客，我做了一个初始版本的实现：

然而，上传图像似乎总是有一个两步过程：

1.  使用 createUploadUrl() 获取要 POST 的初始上传 URL。我附上了我使用的代码片段：

```
    公共类 CreateUploadUrl 扩展 HttpServlet {

    @覆盖
    public void doGet(HttpServletRequest req, HttpServletResponse resp) 抛出 IOException {
        BlobstoreService blobstoreService = BlobstoreServiceFactory.getBlobstoreService();
        String uploadURL = blobstoreService.createUploadUrl("/image/uploadImage");
        resp.setContentType("text/plain");
        resp.getWriter().println(uploadURL);
    }
}

```

1.  使用您刚刚“获得”的 URL 发布图像

```
    公共无效doPost（HttpServletRequest req，HttpServletResponse res）抛出ServletException，IOException {
        BlobKey blobKey = ParameterExtractor.getBlobParameter(req, "blob-key", blobstoreService);
        如果（blobKey == null）{
            log.info("blob ID 为空。POST 失败");
        } 别的 {
            log.info("ze 业务逻辑");
        }
    }

```

我的问题是是否可以一步完成，因为现在所有客户端都需要执行 http GET 来获取上传 URL，然后执行 http POST 来发布图像。

不可能只用预定义的 URL 做一个 Http POST。

谢谢拉贾特

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T20:46:17.063

这是可能的，但有限制。您可以绕过 UploadUrl 机制，方法是使用（当前实验性的）[createNewBlobFile](https://developers.google.com/appengine/docs/java/blobstore/overview#Writing_Files_to_the_Blobstore) API 直接在您的 servlet 中创建 blob。在您的移动应用程序中创建一个编码为 multipart/form-data 的 HTTP 请求，并教您的 servlet 如何解码这样的东西（请参阅[如何在 JSP/Servlet 中上传文件？](https://developers.google.com/appengine/docs/quotas#Requests)）。请注意，HTTP 请求[限制为 32MB](https://developers.google.com/appengine/docs/quotas#Requests)；使用表单编码，您可以上传的二进制数据量将少于此数量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T09:45:22.913

当然，您可以使用单个 POST 来完成。例如，您有一个具有 id 的用户。该用户选择图像，您在客户端发送 POST 图像数据和用户数据。

在服务器端 (GAE) 上，您有用于图像上传 (your_host/imageUpload) 的 url 以及从请求中读取数据并将其写入 Blobstore 的服务器或 Spring 控制器。

# c# - Combobox 选中的项目一旦被选中就会被删除。无效的回发或回调参数

> ID：10894900
> 
> 赞同：0
> 
> 时间：2012-06-05T09:34:44.937
> 
> 标签：c#, asp.net

我的页面中有四个文本框、一个组合框和一个按钮（以及其他一些控件）。根据在文本框中键入的值，相关值在组合框中更新。单击我页面中的提交按钮时，出现以下错误。

> > “无效的回发或回调参数。在配置或页面中启用事件验证。出于安全目的，此功能验证回发或回调事件的参数是否源自最初呈现它们的服务器控件。如果数据有效且符合预期. 使用该`ClientScriptManager.RegisterForEventsValidation`方法来注册回发或回调数据以进行验证。"

现在在我添加的页面指令中

```
<%@Page EnableEentValidation="false"> 
```

当我在四个文本框中键入值时，相应的值将出现在 cobobox 中。但是当我选择该组合框值时，所选值将被删除。这是什么原因？

```
<%@ Page Language="C#" MasterPageFile="~/Main.Master" AutoEventWireup="true" CodeBehind="AddeChecklist.aspx.cs"
    Inherits="LabTrack.WebApplication.Echecklist.AddeChecklist" EnableEventValidation ="false" %>

<%@ Register TagPrefix="Labinal" TagName="AutoCompleteControl" Src="~/UserControls/AutoCompleteEnabledWebUserControl.ascx" %>
<asp:Content ID="Content1" ContentPlaceHolderID="head" runat="Server">
    <link href="../Styles/CheckListRev.css" rel="stylesheet" type="text/css" />
    <!-- Style for the page -->
    <link href="../Styles/AddeChecklist.css" rel="stylesheet" type="text/css" />
</asp:Content>
<asp:Content ID="Content2" ContentPlaceHolderID="ContentPlaceHolder1" runat="Server">
    <asp:ScriptManager ID="ScriptManager1" EnablePartialRendering="true" runat="server">
    </asp:ScriptManager>
    <asp:Panel ID="ErrorMessagePanel" CssClass="ErrorPanel" Visible="true" runat="server">
        <div class="ErrorDiv">
            <asp:BulletedList CssClass="ErrorMessage" ID="ErrorMessageBulletedList" runat="server">
            </asp:BulletedList>
        </div>
    </asp:Panel>
    <div class="PageTitle">
        <asp:Label ID="PageHeaderLabel" runat="server"></asp:Label>
    </div>
    <div class="MainDiv">
        <div style="text-align: center;">
            <div class="PlaceHolder">
                <table id="formTable">
                    <tr>
                        <td>
                            <asp:UpdatePanel runat="server" ID="updatepanelCustomer" UpdateMode="Conditional">
                                <ContentTemplate>
                                    <span class="boldLabelLong">Customer:</span><br />
                                    <asp:TextBox ID="CustomerNameTextBox" Width="200" runat="server"></asp:TextBox>
                                    <asp:HiddenField ID="IxCustomerHiddenField" runat="server" />
                                    <asp:Button ID="customerTriggerbutton" runat="server" Text="Button" Style="display: none;" />
                                </ContentTemplate>
                            </asp:UpdatePanel>
                        </td>
                        <td>
                            <asp:UpdatePanel runat="server" ID="updatepanelProgram" UpdateMode="Conditional">
                                <ContentTemplate>
                                    <span class="boldLabelLong">Program:</span><br />
                                    <asp:TextBox ID="ProgramNameTextBox" Width="200" runat="server"></asp:TextBox>
                                    <asp:Button ID="programTriggerbutton" runat="server" Text="Button" Style="display: none;" />
                                    <asp:HiddenField ID="IxProgramHiddenField" runat="server" />
                                </ContentTemplate>
                                <Triggers>
                                    <asp:AsyncPostBackTrigger ControlID="customerTriggerbutton" EventName="Click" />
                                </Triggers>
                            </asp:UpdatePanel>
                        </td>
                        <td>
                            <asp:UpdatePanel runat="server" ID="updatepanelWorkPackage" UpdateMode="Conditional">
                                <ContentTemplate>
                                    <span class="boldLabelLong">WorkPackage:</span><br />
                                    <asp:TextBox ID="WorkPackageNameTextBox" Width="200" runat="server"></asp:TextBox>
                                    <asp:HiddenField ID="IxWorkPackageHiddenField" runat="server" />
                                    <asp:Button ID="workPackageTriggerbutton" runat="server" Text="Button" Style="display: none;" />
                                </ContentTemplate>
                                <Triggers>
                                    <asp:AsyncPostBackTrigger ControlID="programTriggerbutton" EventName="Click" />
                                </Triggers>
                            </asp:UpdatePanel>
                        </td>
                        <td>
                            <asp:UpdatePanel runat="server" ID="updatepanelActivity" UpdateMode="Conditional">
                                <ContentTemplate>
                                    <span class="boldLabelLong">Activity:</span><br />
                                    <asp:TextBox ID="ActivityNameTextBox" Width="200" runat="server"></asp:TextBox>
                                    <asp:HiddenField ID="IxActivityHiddenField" runat="server" />
                                    <asp:Button ID="activityTriggerbutton" runat="server" Text="Button" Style="display: none;" />
                                </ContentTemplate>
                                <Triggers>
                                    <asp:AsyncPostBackTrigger ControlID="workPackageTriggerbutton" EventName="Click" />
                                    <asp:AsyncPostBackTrigger ControlID="activityTriggerbutton" EventName="Click" />
                                </Triggers>
                            </asp:UpdatePanel>
                        </td>
                    </tr>
                </table>
            </div>
            <div class="PlaceHolder">
                <asp:Label ID="TemplateLabel" Text="Template:" CssClass="ControlLabel" runat="server"></asp:Label>
                <asp:UpdatePanel runat="server" ID="updatepanelTemplate" UpdateMode="Conditional">
                    <ContentTemplate>
                        <asp:DropDownList ID="TemplateSelectDropDownList" runat="server" Width="400" Visible="true"
                            AutoPostBack="true">
                        </asp:DropDownList>
                        <asp:HiddenField ID="IxTemplateHiddenField" runat="server" />
                    </ContentTemplate>
                    <Triggers>
                        <asp:AsyncPostBackTrigger ControlID="workPackageTriggerbutton" EventName="Click" />
                    </Triggers>
                </asp:UpdatePanel>
                <asp:Panel ID="SustainPanelTemplateOwner" Visible="true" runat="server">
                    <div>
                        <asp:Label ID="TemplateOwnerLabel" Text="Owner:" CssClass="ControlLabel" runat="server"></asp:Label>
                        <asp:TextBox ID="TemplateOwnerTextBox" CssClass="controlMargin" Width="400" runat="server"></asp:TextBox>
                    </div>
                </asp:Panel>
                <asp:HiddenField ID="IxDeliverableHiddenField" runat="server" />
                <asp:HiddenField ID="IxReleaseActionHiddenField" runat="server" />
                <asp:HiddenField ID="IxConfigHiddenField" runat="server" />
                <asp:HiddenField ID="IxTemplateOwnerHiddenField" runat="server" />
                <asp:HiddenField ID="TemplateSelectedSnameHiddenField" runat="server" />
                <asp:HiddenField ID="TemplateOwnerSelectedsNameHiddenField" runat="server" />
                <asp:HiddenField ID="DeliverableSelectedHiddenField" runat="server" />
                <div>
                    <asp:Label ID="DeliverableLabel" CssClass="ControlLabel" runat="server" Text="Deliverable:"></asp:Label>
                    <asp:TextBox ID="DeliverableTextBox" CssClass="controlMargin" Width="400" runat="server"></asp:TextBox>
                </div>
                <asp:Panel ID="SustainPanelConfig" Visible="true" runat="server">
                    <div>
                        <asp:Label ID="ConfigurationLabel" runat="server" Text="Configuration:" CssClass="ControlLabel"></asp:Label>
                        <select id="ConfigurationSelect" class="controlMargin">
                            <option></option>
                        </select>
                    </div>
                </asp:Panel>
                <asp:Panel ID="SustainPanelRelease" Visible="true" runat="server">
                    <div>
                        <asp:Label ID="ReleaseActionLabel" CssClass="ControlLabel" runat="server" Text="Release Action:"></asp:Label>
                        <asp:TextBox ID="ReleaseActionTextBox" CssClass="controlMargin" Width="400" runat="server"></asp:TextBox>
                    </div>
                </asp:Panel>
                <asp:Panel ID="SustainPanel" Visible="true" runat="server">
                    <div class="SustainPanelControls">
                        <div>
                            <asp:Label ID="ChangeLabel" Text="Change #: " runat="server"></asp:Label>
                        </div>
                        <div>
                            <asp:TextBox ID="ChangeTextBox" Width="110" runat="server"></asp:TextBox>
                        </div>
                        <div>
                            <asp:Label ID="SupplementLabel" Text="Supplement: " runat="server"></asp:Label>
                        </div>
                        <div>
                            <asp:TextBox ID="SupplementTextBox" Width="80" runat="server"></asp:TextBox>
                        </div>
                        <div>
                            <asp:Label ID="NewWrrLabel" Text="WRR #: " runat="server"></asp:Label>
                        </div>
                        <div>
                            <asp:TextBox ID="NewWrrTextBox" Width="80" runat="server"></asp:TextBox>
                        </div>
                        <div>
                            <asp:Label ID="DddLabel" Text="3D: " runat="server"></asp:Label>
                        </div>
                        <div>
                            <asp:TextBox ID="DddTextBox" Width="80" runat="server"></asp:TextBox>
                        </div>
                    </div>
                    <div>
                        <table id="DesignDataTable2">
                            <tr>
                                <td>
                                    <asp:Label ID="AllFbSheetsWrrLabel" Text="All F/B Sheets w/WRR #:" CssClass="ControlLabel" runat="server"></asp:Label>
                                </td>
                                <td>
                                    <asp:TextBox CssClass="completeControl" ID="AllFbSheetsWrrTextBox" Width="588" Rows="2"
                                        TextMode="MultiLine" runat="server"></asp:TextBox>
                                </td>
                            </tr>
                        </table>
                    </div>
                </asp:Panel>
            </div>
            <div class="EditButtonGroup">
                <input id="EditButton" type="button" value="Edit" class="ButtonSettings" />
                <input id="RemoveButton" type="button" value="-" class="ButtonSettings" />
                <input id="AddButton" type="button" value="+" class="ButtonSettings" />
            </div>
        </div>
        <div class="ViewData">
            <div class="ViewDataDiv">
                <table id="DesignDataTable" class="designDataTable">
                    <tbody>
                    </tbody>
                </table>
            </div>
        </div>
        <div class="submitButtonDiv">
            <asp:Button ID="SubmitButton" runat="server" Text="Button Text" class="submitButtonCreateChecklist" />
        </div>
    </div>
</asp:Content> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T09:37:38.487

听起来像是 Viewstate 覆盖值的问题。

尝试直接使用获取值`Request.Form[Dropdown.ClientId]`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-05T10:15:03.960

您正在客户端创建新值，并将它们发送回服务器。

出于安全原因，ASP.NET 实现了“事件验证”。当启用偶数验证时，如果服务器创建一个包含 3 个可能值的组合，它只会在回发时接受这些值。如果您创建不同的值并将其发送回服务器，则会收到您所指的错误。

在这里你有一些信息： [Page.EnableEventValidation 属性](http://msdn.microsoft.com/en-us/library/system.web.ui.page.enableeventvalidation.aspx)

如果您知道哪些是在客户端生成的可能值，则可以使用[ClientScriptManager.RegisterForEventValidation 方法](http://msdn.microsoft.com/en-us/library/system.web.ui.clientscriptmanager.registerforeventvalidation.aspx)，或者如果您事先不知道它们，则可以完全禁用验证。

要禁用验证：

> > 通过设置 @Page 指令的 enableEventValidation 属性或 Web.config 文件中 pages 元素的 enableEventValidation 属性来设置 EnableEventValidation 属性。如果在代码中设置此属性，则必须在页面初始化之前设置它。

# webview - 如何在 JavaFX 2 webview 之上进行叠加？

> ID：10894903
> 
> 赞同：7
> 
> 时间：2012-06-05T09:34:59.307
> 
> 标签：webview, overlay, javafx, javafx-2

是否可以在 JavaFX 2 webview 之上覆盖任何 JavaFx2 小部件或画布？

我想在 webview 之上通过 JavaFX 2 生成一个透明的热图。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-05T12:06:12.443

添加叠加层非常简单：只需将 webview 和任何窗格放入 StackPane。

另一个故事是同步叠加层和 webview 数据。为此，您需要通过 javascript 向 webview 询问对象坐标。这是一个找到 stackoverflow 问题区域并将其标记在叠加层上的示例：

![webView 覆盖](../Images/7efc19ce59faff0cd9a6e56d7016f29e.png)

公共类 WebOverlay 扩展应用程序 {

```
 @Override
    public void start(Stage stage) {
        StackPane root = new StackPane();
        WebView webView = new WebView();

        final WebEngine webEngine = webView.getEngine();
        Canvas overlay = new Canvas(600,600);
        overlay.setOpacity(0.5);
        final GraphicsContext gc = overlay.getGraphicsContext2D();
        gc.setFill(Color.RED);

        root.getChildren().addAll(webView, overlay);
        stage.setScene(new Scene(root, 600, 600));

        webEngine.getLoadWorker().workDoneProperty().addListener((observable, oldValue, newValue) -> {
            if (newValue.intValue() == 100) {
                // find coordinates by javascript call
                JSObject bounds = (JSObject)webEngine.executeScript("document.getElementsByClassName('question-hyperlink')[0].getBoundingClientRect()");

                Number right = (Number)bounds.getMember("right");
                Number top = (Number)bounds.getMember("top");
                Number bottom = (Number)bounds.getMember("bottom");
                Number left = (Number)bounds.getMember("left");

                // paint on overlaing canvas
                gc.rect(left.doubleValue(), top.doubleValue(), right.doubleValue(), bottom.doubleValue());
                gc.fill();
            }
        });
        webEngine.load("http://stackoverflow.com/questions/10894903/how-to-make-an-overlay-on-top-of-javafx-2-webview");

        stage.show();
    }

    public static void main(String[] args) { launch(); }
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-05T11:44:19.483

你的意思是这样的：

```
import javafx.application.Application;
import javafx.scene.Scene;
import javafx.scene.layout.Pane;
import javafx.scene.layout.StackPane;
import javafx.scene.paint.Color;
import javafx.scene.shape.Rectangle;
import javafx.scene.shape.RectangleBuilder;
import javafx.scene.text.Font;
import javafx.scene.text.FontWeight;
import javafx.scene.text.Text;
import javafx.scene.text.TextBuilder;
import javafx.scene.web.WebView;
import javafx.stage.Stage;

public class Demo extends Application {

    @Override
    public void start(Stage primaryStage) {
        WebView webView = new WebView();
        webView.getEngine().load("http://www.google.com");
        StackPane root = new StackPane();
        root.getChildren().addAll(webView, getOverlay());
        primaryStage.setScene(new Scene(root, 300, 250));
        primaryStage.show();
    }

     private Pane getOverlay() {
        StackPane p = new StackPane();
        Rectangle r = RectangleBuilder.create()
                .height(100).width(100)
                .arcHeight(40).arcWidth(40)
                .stroke(Color.RED)
                .fill(Color.web("red", 0.1))
                .build();

        Text txt=TextBuilder.create().text("Overlay")
                .font(Font.font("Arial", FontWeight.BOLD, 18))
                .fill(Color.BLUE)
                .build();
         p.getChildren().addAll(r, txt);
         return p;
    }

     public static void main(String[] args) {
        launch(args);
    }
} 
```

# android - SQLite 查询从游标中检索数据

> ID：10894904
> 
> 赞同：0
> 
> 时间：2012-06-05T09:35:06.687
> 
> 标签：android, sqlite

我的 UI 中有 2 个编辑框。我想从表中检索数据，并且想将这些检索到的数据插入到那些编辑文本框中，如何将数据从光标插入到那些编辑文本框中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T09:37:35.477

检查你的号码。列及其名称`cursor.getColumnCount()` 和`cursor.getColumnName(0).`分别。如果您的列数是`2`那么光标有两列

```
cursor.moveToFirst();

String columnName1 = cursor.getColumnName(0);
String columnName2 = cursor.getColumnName(1);    

String str1 = cursor.getString(cursor.getColumnIndex(columnName1)));
String str2 = cursor.getString(cursor.getColumnIndex(columnName2))); 

editext1.seText(str1);   
editext2.seText(str2); 
```

完成从数据库获取数据后，使用`cursor.close();`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T09:39:51.483

```
// Activity.onCreate function

EditText etfirstname= (EditText)findViewById(R.id.firstname);
EditText etlastname= (EditText)findViewById(R.id.lastname);
MyDatabase database = new MyDatabase(this);

Cursor c = database.queryRaw("SELECT firstname, lastname FROM users WHERE id=1"); // query data from database
if(c.moveToFirst()){
    etfirstname.setText(c.getString(0)); // read firstname
    etlastname.setText(c.getString(1)); // read lastname
}

c.close(); // dont forget to close cursor! 
```

# facebook - Facebook 喜欢的计数器总是为零，并且 Facebook 评论消失

> ID：10894914
> 
> 赞同：-1
> 
> 时间：2012-06-05T09:36:00.797
> 
> 标签：facebook, wordpress, facebook-like

我对网站中的 Facebook 插件有一些问题：www.talnavarro.com

在某些帖子中，点赞按钮计数器始终保持为零，但有些帖子计数器工作得很好。我试图禁用我网站中的所有社交插件（可能它们之间存在一些冲突）并从 Facebook 开发者网站放入简单的 Facebook 之类的代码，但计数器仍然不起作用。

另一个问题是我的 Facebook 评论有时会消失...

因此，基本上，我需要的是能够在我的网站中修复我的社交插件的人..

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T10:06:40.777

根据[http://www.facebook.com/help/?faq=210086019031867](http://www.facebook.com/help/?faq=210086019031867)，您的页面应该有 6 个元标记。使用 linter 工具 ( [http://developers.facebook.com/tools/debug](http://developers.facebook.com/tools/debug) ) 调试您的页面 url，并检查调试工具是否读取了所有必需的元标记。就我而言，我错过了 fb:app_id 和 og:site_name （看起来 fb 对它变得更加严格，因为它曾经在没有它的情况下工作）。

# symfony - symfony2 覆盖服务 security.authentication.manager

> ID：10894919
> 
> 赞同：0
> 
> 时间：2012-06-05T09:36:27.440
> 
> 标签：symfony

我想在 Symfony\Component\Security\Core\Authentication\AuthenticationProviderManager 的函数 authenticate() 中添加一些代码。

我试图创建安全包的子包。我像这样在这个捆绑包中重新定义了 security.authentication.manager 的服务

```
 <!-- Authentication related services -->
    <service id="security.authentication.manager" class="%security.authentication.manager.class%" public="false">
        <argument type="collection" />
    </service> 
```

但是当我重新加载页面时，框架抛出异常： InvalidArgumentException：您必须至少添加一个身份验证提供程序。

我想这是因为依赖项是在父捆绑配置中创建的。

在不重新定义整个安全包的情况下，我必须做些什么才能让它工作？谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T10:17:09.930

我想最好创建自己的处理程序。

1.  您需要创建[服务](http://symfony.com/doc/current/glossary.html#term-service)
2.  将其注册到[服务容器中](http://symfony.com/doc/current/book/service_container.html)。
3.  只需在您的[`security.yml`](http://symfony.com/doc/current/reference/configuration/security.html)：

```
form_login:
    success_handler: success_login_handler
    failure_handler: failure_login_handler
logout:
    success_handler: success_logout_handler 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T14:38:51.927

好的，我发现最好的方法是创建自己的工厂，扩展 symfony2 的 formFactory

然后我必须创建自己的 AuthentificationProvider 来扩展 DaoAuthenticationProvider 并将其声明为抽象服务。

然后通过 createAuthProvider() 方法在工厂内部创建服务并替换我们需要的参数。

```
protected function createAuthProvider(ContainerBuilder $container, $id, $config, $userProviderId)
{
    $provider = 'acme.authentication.provider.dao.'.$id;
    $container
        ->setDefinition($provider, new DefinitionDecorator('acme.authentication.provider.dao'))
        ->replaceArgument(0, new Reference($userProviderId))//replace args on the service constructor
        ->replaceArgument(2, $id)
        ->addArgument(new Reference('acme.api'))//add some args to the service constructor
    ;

    return $provider;
} 
```

# c# - DrawToBitmap on windows xp

> ID：10894921
> 
> 赞同：2
> 
> 时间：2012-06-05T09:36:40.893
> 
> 标签：c#, winforms, .net-4.0, windows-xp

I have a user control that shows plate number of a vehicle(it contains a background image and some TextBoxes), I use `DrawToBitmap()` Method to get a bitmap of this control and show the bitmap on my form, It works fine on Windows 7 but in Windows XP service pack 3 only background image is drawn and texts in textboxes are not drawn, what should I do?

```
var clt = new ControlLisenceTouch();Bitmap b = new Bitmap(clt.Width, clt.Height);
clt.License = License.FromCar(someCar);
clt.Invalidate(true);
clt.DrawToBitmap(b, Rectangle.FromLTRB(0, 0, clt.Width, clt.Height));
pictureBox1.Image = b; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T11:00:34.017

这家伙也有同样的问题，虽然答案并不完美，但确实为他解决了。这里最大的问题是，如果另一个窗口覆盖了您的控件，则该窗口也会显示。看看我的回答，第三个编辑显示截屏，并从中裁剪出一个控件。

[如何获得控制截图？DrawToBitmap 不工作](https://stackoverflow.com/questions/10741384/how-can-i-get-a-screenshot-of-control-drawtobitmap-not-working/10741703#10741703)

根据[http://msdn.microsoft.com/en-us/library/system.windows.forms.control.drawtobitmap.aspx](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.drawtobitmap.aspx)
完全支持 Windows XP sp3

# c# - Entity-Framework: Sort on Many-to-Many

> ID：10894925
> 
> 赞同：1
> 
> 时间：2012-06-05T09:36:46.543
> 
> 标签：c#, sql, winforms, entity-framework

I have two entities with a many-to-many relationship and I'm looking for a way to be able to sort the result from the tables.
In other words, when I get a row from table1 and all the corresponding records from table2 I want to be able to have a stored sort order for table2 that's specific for that row in table1.

My first thought was to add a sort column to the table that represents the relation, but to my knowledge there is no way of accessing the new column in the relation.

Does anybody have any suggestions on how to accomplish this?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T10:09:41.967

正如 Ladislav Mrnka 所说，如果您将新列添加到联结表中，“中间”将会有一个新实体，这将使导航更加困难。

如果您想避免这种情况，但仍然能够像往常一样进行导航，您可以保留连接表并添加一个新表，就像连接一样，添加订单列。当您需要订单信息时，您只需加入此表即可获取并使用它。

当然，这个新表需要一些维护。即，您可以在级联上为联结表创建删除 + 订单。并使用触发器（哎呀，这不好！）为每个新创建的关系创建一个具有默认顺序的新行。因此，最好在您的业务逻辑中处理这个问题。

我知道这太棘手了，但没有神奇的解决方案......只需选择对你来说更舒服的东西。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-05T16:15:01.890

由于您需要按 table1 行而不是全局对 table2 结果进行排序，因此您有三个非优雅的解决方案：

*   Ladislav 建议的方法（使用看起来很糟糕的模型） - 添加 order 列，**添加 bridge entity**。

*   JotaBe 建议的方法（使用看起来很糟糕的架构） -**添加一个额外的表并同时维护**.

*   如果上下文**仅用于读取**（无需更改关系）并且您不介意**在每次从 DB 更新后手动更改 EDMX**，那么您可以破解 emdx 并将关系表的 SSDL 定义更改为 SQL 查询例如

 `````
<EntitySet Name="AS_TO_BS" EntityType="BlaBla.Store.AS_TO_BS">
    <DefiningQuery>
        SELECT ID1, ID2 ORDER BY ORDERVALUE
        FROM AS_TO_BS
    </DefiningQuery>
</EntitySet> 
````  `代替：

 `````
<EntitySet Name="AS_TO_BS" EntityType="BlaBla.Store.AS_TO_BS"
    store:Type="Tables" Schema="MY_SCHEMA" /> 
````  `看看您是否可以放宽您的要求，如果不能，请选择三种解决方案之一。

编辑：

另一个想法：

*   使用视图复制关系表，然后将关系映射到视图（只读）和订单实体映射到表（可写）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-05T09:52:16.120

您可以向联结表添加新列，但该表将成为一个新实体，因此您的模型现在将包含三个实体和两个一对多关系，而不是两个实体和单个多对多关系。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-07T10:55:49.023

谢谢大家对我的问题的好回答。我现在对不同解决方案的优缺点更有信心。

我最终做的是：事实证明，只是向关系表添加一个排序列不会影响模型，从数据库更新仍然有效，并且表仍然被映射为多对多关系。然后我创建了一个从关系表中获取排序列的存储过程和另一个存储过程来更新指定记录的排序索引。````

# git - Git / Github submodule specific branch

> ID：10894926
> 
> 赞同：-1
> 
> 时间：2012-06-05T09:36:48.500
> 
> 标签：git, github

I forked a submodule project on github and modified it.

I created new local and origin branches for my modifications, and set it as default branch in github.

Now when I'm adding the submodule into a project, it is not my branch but the old head branch that is being pulled.

How can I make it that my newly created branch will be pulled by default from github ?

How can I switch submodule branches within the submodule, within my project ?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T11:59:53.060

原来我只需要将主分支与我新创建的分支合并......

# html - Form input is not clickable on an inline form

> ID：10894933
> 
> 赞同：1
> 
> 时间：2012-06-05T09:37:15.273
> 
> 标签：html, css, forms, google-chrome, webkit

With the latest update of Chrome to revision 19.0.1084.52 we notice some strange behavior on forms on our website.

When the form has a style with display:inline and position:relative and the input is wrapped in a div that floats then the input is not selectable anymore

Here is the most simple example of the bug (check it in Chrome)

```
<form action="" method="get" style="display:inline; position:relative">
  <div>
    <label>test1</label>
    <input id="test1" name="test1" type="text" value="clickable" />
  </div>
  <div style="float: left;">
    <label>test2</label>
    <input id="test2" name="test2" type="text" value="not clickable" />
  </div>
  <div style="clear:both;"><input type="submit" value="submit"></div>
</form>
```

Is this a browser bug or is this style not possible?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T09:47:35.600

嘿替换`float:left`成`inline-block`

像这样

```
<form action="" method="get" style="display:inline; position:relative">
  <div>
    <label>test1</label>
    <input id="test1" name="test1" type="text" value="clickable" />
  </div>
  <div style="display:inline-block;">
    <label>test2</label>
    <input id="test2" name="test2" type="text" value="not clickable" />
  </div>
  <div style="clear:both;"><input type="submit" value="submit"></div>
</form>
```

现场演示[http://jsfiddle.net/t4a3r/](http://jsfiddle.net/t4a3r/) ​</p>

# visual-studio-2012 - Visual Studio 11 shims vs mocks

> ID：10894936
> 
> 赞同：2
> 
> 时间：2012-06-05T09:37:22.400
> 
> 标签：visual-studio-2012, shim

Just read about the new Stubs & Shims support in Visual Studio 11.

Stubs are clear to me, but Shims? Are they an alternative for Moles? Or can they be used to do mocking?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T19:37:12.053

在我看来，它们不仅仅是 Moles 的替代品，它们实际上是替代品。垫片可用于隔离您正在测试的代码，类似于 Moles。

来自[Moles 的 Microsoft Research 页面](http://research.microsoft.com/en-us/projects/moles/)：

> Visual Studio 2012 中的 Fakes Framework 是下一代 Moles & Stubs。然而，Fakes 与 Moles 不同，因此从 Moles 转移到 Fakes 将需要对您的代码进行一些修改。Visual Studio 2012 将不支持 Moles 框架。

# c# - Is there a way to allow a list of specific values for a cell in a DataTable only?

> ID：10894938
> 
> 赞同：0
> 
> 时间：2012-06-05T09:37:24.390
> 
> 标签：c#, datatable

I wonder if there is a good way to allow a list of speccific values for a cell in a DataTable and block the rest? Couldn't find something online.

Thank you.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T09:50:22.253

一种方法是监听 DataTable 的 RowChanging 事件。在那里，您可以检查您的有限 DataColumn 是否是修改过的，如果需要，拒绝更改。请参阅[http://msdn.microsoft.com/en-us/library/system.data.datatable.rowchang](http://msdn.microsoft.com/en-us/library/system.data.datatable.rowchanging)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T09:42:04.323

不太清楚你的意思。但是您可以使用验证：

[演练：向数据集添加验证](http://msdn.microsoft.com/en-us/library/ms171930%28v=vs.80%29.aspx)
[在行更改期间验证数据](http://msdn.microsoft.com/en-us/library/1120xds5%28v=vs.71%29.aspx)

# python - How to count number of strings in a list

> ID：10894943
> 
> 赞同：0
> 
> 时间：2012-06-05T09:37:43.203
> 
> 标签：python

My needs check windows process number.

```
import sys
import os
import commands

ip = sys.argv[5]
val = sys.argv[1]
oid = "HOST-RESOURCES-MIB::hrSWRunName"
cmd = "snmpwalk -v 2c -c public %s %s" % (ip,oid)
(r_c,r_e) = commands.getstatusoutput(cmd)
if r_c != 0:
    print "C - snmpwalk is Error."
else:
    for i in r_e.split('\n'):
    a  =  i.split(':')[-1].strip(' "')
    print a 
```

Result：</p>

```
conhost.exe
conhost.exe
conhost.exe
conhost.exe
fdhost.exe
cmd.exe
fdhost.exe 
```

I hope the result is. I do not know how to achieve it.

```
if sys.argv[1] <5:#count(conhost.exe)
    print "critical -"
else:
    print "OK - " 
```

How the statistics of my results? conhost.exe 4 conhost.exe 1 conhost.exe 1

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T09:46:19.383

```
# replace here
else:
    processes = r_e.split('\n')
    programs = 0
    for program in processes:
        programFile = program.split(':')[-1].strip(' "')
        # the first argument you pass to the program should be conhost.exe
        if programFile == sys.argv[1]:
            programs = programs + 1
    if programs < 5 :#count(conhost.exe)
        print "critical: running less than 5 times:", sys.argv[1] 
    else:
        print "OK" 
```

第二版

```
# replace here
else:
    processes = r_e.split('\n')
    processes = map(lambda program: program.split(':')[-1].strip(' "'), processes)
    if processes.count(sys.argv[1]) < 5 :#count(conhost.exe)
        print "critical: running less than 5 times:", sys.argv[1] 
    else:
        print "OK" 
```

# matplotlib - Multiplot 与 matplotlib 不知道运行前的绘图数量

> ID：10894950
> 
> 赞同：7
> 
> 时间：2012-06-05T09:38:20.013
> 
> 标签：matplotlib, subplot

我对 Matplotlib 的子图有疑问。我不知道我想事先绘制的子图的数量，但我知道我希望它们分成两行。所以我不能使用

```
plt.subplot(212) 
```

因为我不知道我应该提供的号码。

它应该如下所示：

![情节示例](../Images/b21a3616830e7ae776df3c8a94d9cc6d.png)

现在，我将所有的绘图都绘制到一个文件夹中，并与 illustrator 一起将它们放在一起，但 Matplotlib 必须有更好的方法。如果我不清楚某处，我可以提供我的代码。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-11T11:56:47.160

我的理解是，您只知道运行时的绘图数量，因此正在努力使用速记语法，例如：

```
plt.subplot(121) 
```

值得庆幸的是，为了避免你不得不做一些笨拙的数学来以编程方式计算出这个数字，还有另一个界面允许你使用表格：

```
plt.subplot(n_cols, n_rows, plot_num) 
```

所以在你的情况下，如果你想要`n`情节，你可以这样做：

```
n_plots = 5 # (or however many you programatically figure out you need)
n_cols = 2
n_rows = (n_plots + 1) // n_cols
for plot_num in range(n_plots):
   ax = plt.subplot(n_cols, n_rows, plot_num)
   # ... do some plotting 
```

或者，您可能希望了解一个稍微更 Pythonic 的界面：

```
fig, subplots = plt.subplots(n_cols, n_rows)
for ax in subplots:
   # ... do some plotting 
```

（请注意，这`subplots()`不是平原`subplot()`）。尽管我必须承认，我从未使用过后一种界面。

高温高压

# java - Localhost address in the Virtual Machine

> ID：10894955
> 
> 赞同：1
> 
> 时间：2012-06-05T09:38:40.587
> 
> 标签：java, linux, networking, jmf

I am using a virtual machine on a server. My local IP of the VM is `192.168.1.10`

I am trying to achieve something which requires me to edit my `/etc/hosts` as provided in this link

[http://www.thatisjava.com/java-tech/55200/](http://www.thatisjava.com/java-tech/55200/)

I am having similar problems, My console reads

```
RTP--- :DataAddress: /192.168.1.10
ControlAddress: /192.168.1.10
DataPort: 42050
ControlPort: 42051
java.io.IOException: Local Data AddressDoes not belong to any of this hosts local interfaces
java.io.IOException: Local Data AddressDoes not belong to any of this hosts local interfaces
at org.speechforge.cairo.rtp.RTPConsumer.init(RTPConsumer.java:181)
    at org.speechforge.cairo.rtp.RTPConsumer.<init>(RTPConsumer.java:95)
    at org.speechforge.cairo.rtp.server.RTPStreamReplicator.<init>    (RTPStreamReplicator.java:69) 
```

And some more.

The answer to the problem given is

> I solved this one. The problem is JMF seems to use InetAddress.getAllByName() which returns (at least in my case) only single IP address no matter how many addresses I have defined on my interfaces. The problem was solved by placing my IP address that I wanted to use by session manager into /etc/hosts. It must be the first line in /etc/hosts otherwise the other row that matches is used.

Unfortunately, I cant make out what He is trying to state. My `/etc/hosts` read

```
127.0.0.1    localhost
127.0.1.1       SparkVM104 
```

So am I supposed to change `127.0.0.1` with my `192.168.1.10`

or am I supposed to create an alias like `127.0.0.1/192.168.1.10`

or Shall I just paste `192.168.1.10` in the top as

```
192.168.1.10
127.0.0.1    localhost
127.0.1.1       SparkVM104 
```

Any help is appreciated.

Regards.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T10:15:14.310

的格式`/etc/hosts`是

```
IP_address canonical_hostname [aliases...] 
```

（见[http://linux.die.net/man/5/hosts](http://linux.die.net/man/5/hosts)），所以要首先列出 192.168.1.10，`/etc/hosts`文件必须如下所示：

```
192.168.1.10    SomeHostName    SomeOtherHostName
127.0.0.1       localhost 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T11:55:14.787

在 /etc/hosts 中，localhost 应该映射到 127.0.0.1 而不是其他任何东西，而您的外部主机名应该映射到您的外部 IP 地址而不是其他任何东西。一些 Linux 发行版被声明违反了这条规则，它破坏了一切。

# asp.net - AppFabric 崩溃时，会话状态如何仍然可用？

> ID：10894959
> 
> 赞同：3
> 
> 时间：2012-06-05T09:38:52.450
> 
> 标签：asp.net, session-state, appfabric, high-availability

我正在使用 AppFabric 作为 ASP.NET 的会话状态提供程序，并且正在考虑 HA 的解决方案。我发现当 AppFabric 崩溃时，整个 Web 应用程序都会受到影响。当 AppFabric 崩溃时，我可以有一个解决方案让 ASP.NET 路由使用进程内会话来实现更多 HA？提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-05T09:42:31.580

如果您只有一台服务器，那么切换到 inproc 会话可能是有意义的，但如果您有多台服务器并且您没有使用粘性路由（如果您的会话是分布式的，这将没有意义），那么它只会使您受益。

虽然我不认为有任何开箱即用的方法可以做到这一点，但原则上你应该可以编写一个从 appfabric 切换到 inproc 会话的会话提供程序，并以某种方式向你的负载均衡器发出信号以诉诸粘性会话。

但是，您应该注意，如果您的应用程序结构缓存中有多个服务器，那么所有这些服务器同时出现故障的可能性非常低，因此我什至不会实施任何过度设计的解决方案。

# javascript - 单击事件以自动事件图像在 Jquery 中更改

> ID：10894960
> 
> 赞同：0
> 
> 时间：2012-06-05T09:38:56.147
> 
> 标签：javascript, jquery, html, css

这是我的代码..当我单击图像的缩略图时，图像将显示没关系..现在我需要自动更改图像..而不是单击事件，所以请帮我更改此 javascript

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
<script type="text/javascript">
         $(function() {
            $(".image").click(function() {
            var image = $(this).attr("rel");
            $('#img').hide();
            $('#img').fadeIn('slow');
            $('#img').html('<img src="' + image + '" class="img"/>');
            $('#img').
            return false;
                });
        });
</script>

<style>
.img{
border:4px #666 solid;
width:410px; height:350px;
}

.thumb{
float:left; 
height:60px;
width:80px;
padding:10px;
}
</style>

<div  id="img" ><img src="../content/ohoopee1.jpg" border="0" style="width:410px; height:350px;border:4px #666 solid;" /></div>

                    <a href="#" rel="../content/ohoopee1.jpg" class="image"><img src="../content/ohoopee1.jpg" class="thumb" border="0"/></a>
                    <a href="#" rel="../content/ohoopee2.jpg" class="image"><img src="../content/ohoopee2.jpg" class="thumb" border="0"/></a>
                    <a href="#" rel="../content/ohoopee3.jpg" class="image"><img src="../content/ohoopee3.jpg" class="thumb" border="0"/></a>
                    <a href="#" rel="../content/ohoopee4.jpg" class="image"><img src="../content/ohoopee4.jpg" class="thumb" border="0"/></a> 
```

帮助这个......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T09:46:57.100

[http://jonraasch.com/blog/a-simple-jquery-slideshow](http://jonraasch.com/blog/a-simple-jquery-slideshow)

你可以通过这个教程。

# jquery - 在 jquery 中调用 jsTree

> ID：10894964
> 
> 赞同：0
> 
> 时间：2012-06-05T09:39:19.243
> 
> 标签：jquery, jstree

首先，我是 jQuery 的新手程序员。我想用 HTML 中的无序列表创建一个树结构。我发现 jsTree 可以使用它。所以，我写了这段代码：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<title>Insert title here</title>
<script type="text/javascript" src="js/jquery-1.7.2.js"></script>
<script type="text/javascript" src="js/jquery.jstree.js"></script>
<script type="text/javascript">
$(document).ready(function(){
    $("#fileLister").jstree();

});

</script>

</head>
<body>

    <div id="fileLister">
        <ul>
            <li><a>Folder A</a>
                <ul>
                    <li><a>Child 1</a>
                        <ul>
                            <li><a>Child A</a>
                            </li>
                            <li><a>Child B</a>
                            </li>
                            <li><a>Child C</a>
                            </li>
                        </ul></li>
                    <li><a>Child 2</a>
                        <ul>
                            <li><a>Child D</a>
                            </li>
                        </ul></li>
    </ul></li>
    </ul>
    </div>

</body>
</html> 
```

但它没有在文件夹树结构中打印它。而是只打印文件夹 A，在网页上除了它之外什么都没有。

# c# - c#比较不同语言的字符串

> ID：10894966
> 
> 赞同：0
> 
> 时间：2012-06-05T09:39:27.223
> 
> 标签：c#, compare, localized

我有一些不同语言的字符串；例如：

*   “kot jest dobry”（波兰语）
*   “猫好”（英文）

它们是从英语翻译成用户选择的语言的按钮的标题。

以编程方式比较这些字幕的最佳方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T09:48:48.537

由于两个字符串都是彼此的翻译，你可以维护一个翻译表，如果你想知道两个字符串是否相同，你可以在你的表中查找它们，如果它们恰好落在同一行，那么它们是例如相等

```
class TranslatedText
{
      public int Id {get; set; }
      public string Language {get; set; }
      public string Text {get; set; }
} 
```

因此，使用每个字符串填充`TranslatedText`对象列表，并将相同的 id 分配给相同的文本。稍后进行比较，您可以在列表中查找相应的对象并像这样检查 Id

```
var first = translatedTextList.FirstOrDefault(t=>t.Text.Equals(firstString));
var second = translatedTextList.FirstOrDefault(t=>t.Text.Equals(secondString));
bool areSame = (first != null & second !=null & first.Id == second.Id);
return areSame; 
```

假设您要比较的字符串被称为`firstString`and `secondString`;

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-06-05T09:41:38.387

覆盖 .equal() 函数或将其转换为 char 数组然后比较！

在这里你可以找到如何：

[http://msdn.microsoft.com/en-us/library/ms173147.aspx](http://msdn.microsoft.com/en-us/library/ms173147.aspx)

# android - 在错误之间不断跳动，找不到微调器/适配器的好方法

> ID：10894970
> 
> 赞同：2
> 
> 时间：2012-06-05T09:39:37.867
> 
> 标签：android, simplecursoradapter, android-spinner

我似乎无法弄清楚这一点`SimpleCursorAdapter`，每次我修复一个错误时，都会弹出另一个错误，如果我按照步骤修复那个错误，第一个错误会再次出现。我觉得我在这里绕圈子，所以这是我正在尝试调试的代码块，请注意，第一部分只是创建数据库，但我认为任何事情都可能有助于弄清楚它。

```
 SQLiteDatabase rpgDB = null;
        String classFields = " (classID, className, classHP)";

        try {
            rpgDB = this.openOrCreateDatabase("RpgDB", MODE_PRIVATE, null);
            rpgDB.execSQL("DROP TABLE IF EXISTS " + classTable);

            rpgDB.execSQL("CREATE TABLE IF NOT EXISTS " + classTable + " (classID INT(3), className TEXT, classHP INT(4));");
            rpgDB.execSQL("INSERT INTO " + classTable + classFields + " VALUES (1, 'Warrior', 10);");
            rpgDB.execSQL("INSERT INTO " + classTable + classFields + " VALUES (2, 'Rogue', 7);");
            rpgDB.execSQL("INSERT INTO " + classTable + classFields + " VALUES (3, 'Mage', 5);");

            String query = "SELECT className AS _id FROM " + classTable;
            Cursor cursor = rpgDB.rawQuery(query, null);
            rpgDB.close();

            int[] to = new int[] { R.id.classDropDown };
            String[] spinnerFields = new String[] { "_id" };
            /**
             * Test code to check value of cursor
             */ 
            int count = cursor.getCount();
            cursor.moveToFirst();
            while (cursor.isAfterLast() == false) 
            {
                String test  = cursor.getString(0);
                cursor.moveToNext();
            }

            SimpleCursorAdapter cursorAdapter = new SimpleCursorAdapter(this, R.layout.main, cursor, spinnerFields, to);
            int cursorcount = cursorAdapter.getCount();
            // cursorAdapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
            Spinner classDropDown = (Spinner) this.findViewById(R.id.classDropDown);
            classDropDown.setAdapter(cursorAdapter);
        } catch (Exception ex) {
            System.out.println("Exception: " + ex);
        } 
```

从 SimpleCursorAdapter 填充 Spinner 似乎非常麻烦。

**编辑：**此代码的错误是

```
Invalid statement in fill window 
```

如果我注释掉 rpgDB.close() 行

```
Spinner is not a view that can be bounds by this SimpleCursorAdapter 
```

如果我将 select 语句和 spinnerfields 更改为（将 DB 注释掉）：

```
String query = "SELECT className FROM " + classTable;
String[] spinnerFields = new String[] { "className" }; 
```

我得到：

```
column '_id' does not exist 
```

**编辑 XML：**这是 main.xml（也是 id main）XML

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/main"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical"
    android:background="@color/white" >

    <TextView
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:gravity="center_horizontal"
        android:textSize="11pt"
        android:text="@string/hello"
        android:textColor="@color/baseTextColor" />

    <Spinner
        android:id="@+id/classDropDown"
        android:layout_width="match_parent"
        android:layout_height="wrap_content" />

</LinearLayout> 
```

**说明：**因此，如果将来有人遇到此问题，多亏了 Luksprog，我对此了解得更好（他向我展示了修复程序）：

android.R.id 和 android.R.layout "ids/layouts" 是 Android 组件的默认 xml 布局，例如 TextField 和 Spinner "list" 布局。Spinner 对象本身基本上是不完整的。您需要另一个 XML 部分来定义列表本身的外观和另一个用于行的部分（text1 是默认的 android TextField）。

因此，简而言之，将您的“to”字段分配给 TextField 或使用默认的 Android 字段之一，例如 android.id.text1，但为了使用它，我相信您还必须使用包含默认 android 字段的布局, andoid.R.layout（在我的例子中是 simple_spinner_item）。最后，将 dropdownresource 设置为您自己的 xml 或 android 默认值（我的是 android.R.layout.simple_spinner_dropdown_item）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T10:04:35.260

检查这个：

```
String query = "SELECT _id, className FROM " + classTable;
Cursor cursor = rpgDB.rawQuery(query, null);
int[] to = new int[] { android.R.id.text1 };
String[] spinnerFields = new String[] { "className"};
SimpleCursorAdapter cursorAdapter = new SimpleCursorAdapter(this, android.R.layout.simple_spinner, cursor, spinnerFields, to);
cursorAdapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
Spinner classDropDown = (Spinner) this.findViewById(R.id.classDropDown);
classDropDown.setAdapter(cursorAdapter); 
```

> 填充窗口中的无效语句

如果要从中提取数据，则无法关闭数据库连接`Cursor`。

> Spinner 不是可以受此 SimpleCursorAdapter 限制的视图

int 数组表示您传递给从数组绑定数据的行布局文件的`to`id ( ，我希望您确实有一个布局文件并且只传递活动的布局)。您在那里使用的 id代表一个视图，而 a不知道如何将数据绑定到该视图（它可以将数据绑定到 a或）。如果你想要每一行都有一个（你真的想要这个吗？或者你想要默认的微调器行布局？）然后使用自定义适配器或.`Views``SimpleCursorAdapter``from``R.layout.main``R.id.classDropDown``Spinner``SimpleCursorAdapter``TextView``ImageView``Spinner``SimpleCursorAdapter.ViewBinder`

> 列“_id”不存在

因为您在 table 中没有具有此名称的列`classTable`。此列应声明为：

```
INTEGER PRIMARY KEY AUTOINCREMENT 
```

也许你可以查看这个简单的[教程](http://developer.android.com/resources/tutorials/views/hello-spinner.html)。`Spinners`

# ios - 带有动画 gif 图像的 IOS UIButton

> ID：10894972
> 
> 赞同：3
> 
> 时间：2012-06-05T09:39:41.450
> 
> 标签：ios, cocoa

如何将动画 gif 文件添加为 UIButton 的默认图像。我已将 gif 文件添加为按钮图像。但它不是动画。

谢谢。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-06-05T09:43:09.050

动画 GIF 不会在 iphone 中动画。您应该将 UIImageView 作为子视图添加到 UIButton，从 GIF 中提取所有图像并使用 UIImageView Animation 进行动画处理

```
UIImageView* animatedImageView = [[UIImageView alloc] initWithFrame:self.view.bounds];
animatedImageView.animationImages = [NSArray arrayWithObjects:    
                               [UIImage imageNamed:@"image1.gif"],
                               [UIImage imageNamed:@"image2.gif"],
                               [UIImage imageNamed:@"image3.gif"],
                               [UIImage imageNamed:@"image4.gif"], nil];
animatedImageView.animationDuration = 1.0f;
animatedImageView.animationRepeatCount = 0;
[animatedImageView startAnimating];
[yourButton addSubview: animatedImageView]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-05T09:44:19.503

您不能只加载 gif 文件。将 gif 的每一帧保存到单独的图像文件（png 或类似文件） - 例如，您可以使用 photoshop 执行此操作，然后使用 animationImages 将它们加载到 UIImage 并执行 startAnimating。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-05T09:43:04.270

在 iOS 中不支持 .gif 文件格式。所以避免在 iOS 中使用 .gif 文件

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-05T09:43:39.483

您应该探索使用它的替代方法`UIButton`，因为它不允许进行此类自定义。例如，您可以使用`UIImageView` 作为您的按钮并为“触摸结束”事件设置一个操作。`

# database - phonegap 数据库错误代码 5 - 非错误

> ID：10894973
> 
> 赞同：0
> 
> 时间：2012-06-05T09:39:45.100
> 
> 标签：database, sqlite, cordova

我正在使用 phonegap 访问电话数据库。但是我的创建过程每次都会调用带有错误代码的错误例程：5 和消息：`non an error`？

难道不能在一个事务中执行多个sql语句吗？

SQLite Expert 找不到语法错误...

```
createDB: function(error, success) {
        if(typeof error != 'function') error = this.errorDB;
        if(typeof success != 'function') success = this.successDB;
        sql = "DROP TABLE IF EXISTS `boiler`; "
            +"CREATE TABLE IF NOT EXISTS `boiler` ( "
            +" `id` int NOT NULL, `object` int NOT NULL, `number` varchar(100) NOT NULL, "
            +" `volume` double DEFAULT NULL, `brand` varchar(100) DEFAULT NULL, `year` year(4) DEFAULT NULL, "
            +" `price_before` float NOT NULL DEFAULT '0', `price_after` float NOT NULL DEFAULT '0',  `description` TEXT DEFAULT NULL, "
            +" `img1` varchar(200) DEFAULT NULL, `img2` varchar(200) DEFAULT NULL, `img3` varchar(200) DEFAULT NULL, "
            +" `img4` varchar(200) DEFAULT NULL, `img5` varchar(200) DEFAULT NULL,  `img6` varchar(200) DEFAULT NULL, "
            +" `img7` varchar(200) DEFAULT NULL, `img8` varchar(200) DEFAULT NULL, `img9` varchar(200) DEFAULT NULL, "
            +"PRIMARY KEY (`id`)); "

            +"DROP TABLE IF EXISTS `counter`; "
            +"CREATE TABLE IF NOT EXISTS `counter` ( "
            +" `number` varchar(100) NOT NULL, `object` int NOT NULL, `type` tinyint NOT NULL DEFAULT '0', "
            +" `value` double DEFAULT NULL, `access` varchar(100) DEFAULT NULL, "
            +"PRIMARY KEY (`number`)); "

            +"DROP TABLE IF EXISTS `link`; "
            +"CREATE TABLE IF NOT EXISTS `link` ( "
            +" `id` int NOT NULL, `boiler` int NOT NULL, `name` varchar(100) DEFAULT NULL, "
            +" `units` tinyint DEFAULT NULL, `price` float NOT NULL DEFAULT '0', "
            +"PRIMARY KEY (`id`)); "

            +"DROP TABLE IF EXISTS `manager`; "
            +"CREATE TABLE IF NOT EXISTS `manager` ( "
            +" `id` int NOT NULL, `company` varchar(100) DEFAULT NULL, `name` varchar(100) NOT NULL, "
            +" `phone` varchar(15) DEFAULT NULL, "
            +"PRIMARY KEY (`id`)); "

            +"DROP TABLE IF EXISTS `object`; "
            +"CREATE TABLE IF NOT EXISTS `object` ( "
            +" `id` int NOT NULL,  `state` tinyint NOT NULL DEFAULT '0', `user` varchar(50) DEFAULT NULL, "
            +" `date` char(15) DEFAULT NULL,  `street` varchar(100) DEFAULT NULL, `number` varchar(16) DEFAULT NULL, "
            +" `zip` char(5) DEFAULT NULL, `city` varchar(100) DEFAULT NULL, `manager` int NOT NULL DEFAULT '0', "
            +" `units` int NOT NULL DEFAULT '0', "
            +"PRIMARY KEY (`id`));";
        console.log(sql);
        this.DB.transaction(function (tx) { tx.executeSql(sql); }, error, success);
    }, 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T10:00:32.440

不知道错误码：5但可以执行多条sql语句

```
 // Wait for PhoneGap to load

            document.addEventListener("deviceready", onDeviceReady, false);

            // PhoneGap is ready

            function onDeviceReady() {
                var db = window.openDatabase("Database", "1.0", "PhoneGap Demo", 200000);
                db.transaction(populateDB, errorCB, successCB);
            }

            // Populate the database 

            function populateDB(tx) {
                 tx.executeSql('DROP TABLE IF EXISTS DEMO');
                 tx.executeSql('CREATE TABLE IF NOT EXISTS DEMO (id unique, data)');
                 tx.executeSql('INSERT INTO DEMO (id, data) VALUES (1, "First row")');
                 tx.executeSql('INSERT INTO DEMO (id, data) VALUES (2, "Second row")');
        //here you can do  multiple sql statements.
            }

            // Transaction error callback

            function errorCB(err) {
                alert("Error processing SQL: "+err);
            }

            // Transaction success callback

            function successCB() {
                alert("success!");
            } 
```

[链接在这里](http://docs.phonegap.com/en/1.3.0/phonegap_storage_storage.md.html#SQLTransaction)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-24T06:14:18.990

请从文件资源管理器检查您的数据库

仅在创建表时存在问题，例如您正在输入四个值，但在您的表中只有三列，因此会出现此错误

tx.executeSql("CREATE TABLE IF NOT EXISTS quotes(id INTEGER NOT NULL PRIMARY KEY AUTOINCREMENT,name,flag INTEGER,address,description,phone_number,date INTEGER,quote_number,job,images)");

错误是由于如果您直接分配整数值而不是 var 类型值，例如我使用 1 或 0 的 var 类型值，但现在我将此值存储在 var 类型中

# android - setLatitude setLongitude NullPointer 异常

> ID：10894982
> 
> 赞同：2
> 
> 时间：2012-06-05T09:40:20.580
> 
> 标签：android, location, nullpointerexception

我有一个位置：

`public Location temp;`

现在我想记住地图上的一些坐标，所以我这样做：

双a = 40.156729，b = 44.47197；

```
temp.setLatitude(40.156729);
temp.setLongitude(44.47197); 
```

这会引发 NullPointerException。我也尝试过这种方式：

```
double a = 40.156729, b = 44.47197;
temp.setLatitude(a);
temp.setLongitude(b); 
```

但还是一样。

日志猫：

```
06-05 09:32:55.720: E/AndroidRuntime(1370): Caused by: java.lang.NullPointerException 
```

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-05T09:42:36.357

初始化变量

```
 public Location temp = new Location(""); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-05T09:44:16.507

您是否初始化了 Location 对象？例如：

```
Location temp  = new Location(LocationManager.NETWORK_PROVIDER); 
```

# javascript - 如何不向频道的所有订阅者发送消息

> ID：10894984
> 
> 赞同：1
> 
> 时间：2012-06-05T09:40:23.197
> 
> 标签：javascript, ruby, publish-subscribe, faye

有没有办法使用来自服务器的 Faye 和 Ruby 客户端和/或来自浏览器的 javascript 在频道上向**N**个随机订阅者发送消息，而不是发送给所有订阅者。如果可能的话，我对这两种编程语言中的客户端示例感兴趣。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-09T21:30:51.660

从 faye [http://groups.google.com/group/faye-users/browse_thread/thread/6cabf09bb9367e04的创建者那里找到答案](http://groups.google.com/group/faye-users/browse_thread/thread/6cabf09bb9367e04)

“Faye 不支持这一点（仅向一个特定的客户端发送消息），您只能将消息发送到频道。一种简单的方法是让客户端使用 GUID 生成器选择一个唯一的频道并让它传达到服务器。”

# c# - Async Tcp Server 无法接收数据

> ID：10894987
> 
> 赞同：0
> 
> 时间：2012-06-05T09:40:34.313
> 
> 标签：c#, multithreading, asynchronous, tcp

我目前正在努力创建一个实现 Tcpl 侦听器的多线程和异步 tcp 服务器

当前服务器正在按预期工作，因为我能够将数据发送到服务器并将数据传输到客户端而没有任何问题

但是，在我将数据发送到服务器然后将数据发送回客户端后，当客户端再次将数据发送回服务器时，服务器无法获取数据

我已经尝试了几天来找到这个问题的答案但是没有运气

这是我目前在服务器中使用的代码：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Net;
using System.Net.Sockets;
using System.Threading;
using System.Windows.Forms;
using System.IO;

namespace MyTcpAsyncClass
{
    public class StateObject
    {
        public TcpClient MyTcpClient = null;
        public NetworkStream MyNetworkStream = null;
        public const int MyBufferSize = 1024;
        public byte[] MyBuffer = new byte[MyBufferSize];
        public string RequestString = "";
        public StringBuilder MyStringBuilder = new StringBuilder();
        char[] RequestChars; // Char array of Request
        const char STX = (char)0x02; // Start Character
        const char FTX = (char)0x03; // Finish Character

        public void Dispose()
        {
            try
            {
                MyTcpClient.Close();
                MyNetworkStream.Close();
                MyNetworkStream.Dispose();
            }
            catch (Exception ex)
            {
                MessageBox.Show("Message:\n" + ex.Message + "\n\nStacktrace:\n" + ex.StackTrace);
            }
        }
    }

    public static class AsyncServerFunctions
    {
        private static int mPort = 0;

        private static ManualResetEvent MyManualResetEvent = new ManualResetEvent(false);

        public static void StartListening()
        {

            //Catch to Tcp Client Connection
            try
            {
                //Get the database connection
                //MyReaderWriterLockSlim.EnterReadLock();
                LoadSettings();
                //MyReaderWriterLockSlim.ExitReadLock();

                TcpListener MyTcpListener = new TcpListener(IPAddress.Any, mPort);
                MyTcpListener.Start();

                while (true)
                {
                    //Set the event to nonsignaled state
                    MyManualResetEvent.Reset();

                    //Start an asynchronous TcpListener to listen for a connection
                    MyTcpListener.BeginAcceptTcpClient(AcceptTcpClientCallback, MyTcpListener);

                    //Wait until a connection is made before continuing
                    MyManualResetEvent.WaitOne();
                }

                MyTcpListener.Stop();
            }
            catch (Exception ex)
            {
                AddErrorLog(ex.Message, ex.StackTrace);
            }
        }

        private static void AcceptTcpClientCallback(IAsyncResult result)
        {
            try
            {
                //BeginAcceptTcpClientCallback
                //Signal the main thread to continue
                MyManualResetEvent.Set();
                //Get the TcpClientNetworkStream:
                TcpListener MyTcpListener = (TcpListener)result.AsyncState;

                //Finish Async Get Client Process
                TcpClient MyTcpClient = MyTcpListener.EndAcceptTcpClient(result);
                StateObject MyStateObject = new StateObject();
                MyStateObject.MyTcpClient = MyTcpClient;
                MyStateObject.MyNetworkStream = MyTcpClient.GetStream();

                //Begin Async read from the NetworkStream
                MyStateObject.MyNetworkStream.BeginRead(MyStateObject.MyBuffer, 0, StateObject.MyBufferSize, new AsyncCallback(BeginReadCallback), MyStateObject);
            }
            catch (Exception ex)
            {
                AddErrorLog(ex.Message, ex.StackTrace);
            }
        }

        private static void BeginReadCallback(IAsyncResult result)
        {
            StateObject MyStateObject = (StateObject)result.AsyncState;
            NetworkStream MyNetworkStream = MyStateObject.MyNetworkStream;
            string MyRequestString = "";

            try
            {
                //Get Request Data here

                if (MyStateObject.MyBuffer.Length > 0)
                {
                    //Store the data recived
                    MyStateObject.MyStringBuilder.Clear();
                    MyStateObject.MyStringBuilder.Append(Encoding.ASCII.GetString(MyStateObject.MyBuffer));

                    //Get the stored Request string
                    MyRequestString = MyStateObject.MyStringBuilder.ToString();

                    //Record the string recived
                    DatabaseFunctions.AddMessageLog("String Recived (BeginReadCallback): " + MyRequestString);

                    //Remove the first and last character
                    MyRequestString = CleanString(MyRequestString);

                    //Record the Request String
                    DatabaseFunctions.AddMessageLog("Request String Recived:" + MyRequestString);

                    //Get the Message Identifier
                    string MessageIdentifier = "";
                    MessageIdentifier = MyRequestString.Substring(0, 2);

                    switch (MessageIdentifier)
                    {
                        case "value":
                            SendResponse(MyStateObject, StartUp(MessageIdentifier, MyRequestString));
                            SendResponse(MyStateObject, SendTransactionStart(MessageIdentifier, MyAmount));
                            GetResponse(MyStateObject);
                            break;
                        default:
                            //***Default Case***
                            SendResponse(MyStateObject, DefaultCase(MyRequestString));
                            break;
                    }

                    //Dispose of the connection
                    MyStateObject.Dispose();
                }
            }
            catch (Exception ex)
            {
                AddErrorLog(ex.Message, ex.StackTrace);
                try
                {
                    MyStateObject.Dispose();
                }
                catch
                {
                    AddErrorLog(ex.Message, ex.StackTrace);
                }
            }
        }

        private static void SendResponse(StateObject pMyStateObject, string pResponseString)
        {
            try
            {
                //Send a response to the client
                //Get bytes from string sent
                byte[] MyResponseBytes = Encoding.ASCII.GetBytes(pResponseString);
                //Get the network stream
                NetworkStream MyNetworkStream = pMyStateObject.MyNetworkStream;
                //Call SendResponseCallback
                MyNetworkStream.BeginWrite(MyResponseBytes, 0, MyResponseBytes.Length, new AsyncCallback(SendResponseCallback), pMyStateObject);
            }
            catch (Exception ex)
            {
                AddErrorLog(ex.Message, ex.StackTrace);
            }
        }

        private static void GetResponse(StateObject pStateObject)
        {
            //This will run a new AsyncCallback To get the response from the client
            NetworkStream MyNetworkStream = pStateObject.MyNetworkStream;
            pStateObject.MyBuffer = new byte[1024];
            MyNetworkStream.BeginRead(pStateObject.MyBuffer, 0, pStateObject.MyBuffer.Length, new AsyncCallback(BeginReadCallback), pStateObject);
        } 

        private static void SendResponseCallback(IAsyncResult result)
        {
            try
            {
                //End the send procedure
                StateObject MyStateObject = (StateObject)result.AsyncState;
                NetworkStream MyNetworkStream = MyStateObject.MyNetworkStream;
                MyNetworkStream.Flush();
            }
            catch (Exception ex)
            {
                AddErrorLog(ex.Message, ex.StackTrace)
            }
        }

        private static void ShowExceptionMessage(string pMessage, string pStacktrace)
        {
            MessageBox.Show("Message:\n" + pMessage + "\n\nStacktrace:\n" + pStacktrace);
        }

        private static void AddErrorLog(string pMessage, string pStackTrace)
        {
            DatabaseFunctions.AddMessageLog("Message:" + pMessage + "; Stacktrace:" + pStackTrace);
        }
    }
} 
```

谢谢大家

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T09:53:28.293

你也应该打电话`BeginAcceptTcpClient`来`AcceptTcpClientCallback`。在第一个连接之后，您不接受任何新连接。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T08:12:47.467

在您的`BeginReadCallback`函数中，您处置了您用来调用的对象，`BeginRead`尝试在没有处置函数的情况下运行代码，并且您仅`GetRespone`在切换条件下调用该函数，请尝试`BeginRead`在您的`BeginReadCallback`函数中调用。

# asp.net - 使用类型安全机制进行数据绑定时替换 ASP .NET Eval

> ID：10894988
> 
> 赞同：1
> 
> 时间：2012-06-05T09:40:35.817
> 
> 标签：asp.net, data-binding

我期待重构一些应用程序，并且有很多行代码看起来像这样：

```
<asp:TemplateField HeaderText="Name">
    <ItemTemplate>
        <%# Eval("Employee.LAST_NAME")%>
    </ItemTemplate>
</asp:TemplateField>
<asp:TemplateField HeaderText="First Name">
    <ItemTemplate>
        <%# Eval("Employee.FIRST_NAME")%>
    </ItemTemplate>
</asp:TemplateField> 
```

在重构属性名称 (LAST_NAME, FIRST_NAME) 时，Visual Studio 当然不会在 Eval 中找到这些对属性的引用。所以现在，当我重构时，我想用类型安全的东西+在编译时可以发现的东西来替换它，以防万一将来我需要再次重构。有什么办法可以用更好的机制代替 Eval 吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-05T09:51:27.693

`Eval`是邪恶的（为什么说来话长），使用`((Employee)Container.DataItem).LAST_NAME`and`((Employee)Container.DataItem).FIRST_NAME`代替 - 它更快、类型安全、重构友好、避免反射等...

# android - 使用 url 的 facebook 私人消息

> ID：10894995
> 
> 赞同：2
> 
> 时间：2012-06-05T09:41:07.790
> 
> 标签：android, facebook, cordova

我正在使用phonegap 做简单的android 项目。我必须从我的应用程序向我在 Facebook 中的朋友发送私人消息。有没有办法通过Url发送消息？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-09-08T18:25:35.907

直到最近 Facebook 还不支持移动设备上的发送对话，所以你不能这样做。

随着他们对 Facebook Messenger 的推动，他们开始在移动设备上支持私人消息 - [https://developers.facebook.com/docs/ios/share#message-dialog](https://developers.facebook.com/docs/ios/share#message-dialog)

不知道是否有支持它的PhoneGap插件，我也在寻找一个......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T07:37:39.637

在 m.facebook.com 上，不需要任何显示，也不允许任何其他显示，因为我们始终默认为“触摸”。所以这似乎并不能解决问题。Facebook 表示这是设计上的错误[https://developers.facebook.com/bugs/507406422635550?browse=search_511bd57f912f84e18364257](https://developers.facebook.com/bugs/507406422635550?browse=search_511bd57f912f84e18364257)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-05T09:46:09.220

[检查发送对话框](https://developers.facebook.com/docs/reference/dialogs/send/)页面中的直接 URL 示例部分

> [https://www.facebook.com/dialog/send?app_id=123050457758183&name=People%20Argue%20Just%20to%20Win&link=http://www.nytimes.com/2011/06/15/arts/people-争论只是为了赢学者-assert.html&redirect_uri=http://www.example.com/response](https://www.facebook.com/dialog/send?app_id=123050457758183&%20name=People%20Argue%20Just%20to%20Win&%20link=http://www.nytimes.com/2011/06/15/arts/people-argue-just-to-win-scholars-assert.html&%20redirect_uri=http://www.example.com/response)

这是文档中给出的示例链接。

# forms - 在 extjs 中折叠时面板隐藏

> ID：10894997
> 
> 赞同：0
> 
> 时间：2012-06-05T09:41:09.507
> 
> 标签：forms, extjs, panel

我试图解释我的问题。我有一个标签面板。在一个选项卡中，我有一个表单面板和一个网格面板，两者都是可折叠的。当我折叠表单面板时，它会折叠，当我折叠网格面板时，它们都会折叠。现在，当我展开两个面板之一时，另一个面板消失了。这可能是什么？

```
Ext.define('MyApp.view.TMS', {
    extend: 'Ext.container.Viewport',

    id: 'tmsViewport',
    layout: {
        type: 'border'
    },

    initComponent: function () {
        var me = this;

        Ext.applyIf(me, {
            items: [{
                xtype: 'tabpanel',
                id: 'mainTab',
                activeTab: 0,
                region: 'center',
                items: [{
                    xtype: 'panel',
                    id: 'configurationTab',
                    title: 'Configuration',
                    items: [{
                        xtype: 'tabpanel',
                        id: 'configurationVehicles',
                        title: 'configuration',
                        activeTab: 0,
                        items: [{
                            xtype: 'panel',
                            id: 'configurationDrivers',
                            collapsed: false,
                            title: 'Drivers',
                            items: [{
                                xtype: 'form',
                                floating: false,
                                height: 400,
                                id: 'configurationDriversConfiguration',
                                itemId: 'configurationDriversConfiguration',
                                bodyPadding: 10,
                                animCollapse: false,
                                collapsed: false,
                                collapsible: true,
                                title: 'Driver Configuration',
                                items: [{
                                    xtype: 'button',
                                    id: 'configurationDriversAdd',
                                    text: 'Add'
                                }, {
                                    xtype: 'button',
                                    id: 'configurationDriversDelete',
                                    text: 'Delete'
                                }, {
                                    xtype: 'textfield',
                                    id: 'configurationDriversCode',
                                    fieldLabel: 'Driver Code'
                                }, {
                                    xtype: 'textfield',
                                    id: 'configurationDriversName',
                                    fieldLabel: 'Driver Name'
                                }, {
                                    xtype: 'textfield',
                                    id: 'configurationDriversLicense',
                                    fieldLabel: 'Driver License nr'
                                }, {
                                    xtype: 'textfield',
                                    id: 'configurationDriversGivenName',
                                    fieldLabel: 'Driver Given Name'
                                }, {
                                    xtype: 'textfield',
                                    id: 'configurationDriversFamilyName',
                                    fieldLabel: 'Driver Familiy Name'
                                }, {
                                    xtype: 'textfield',
                                    id: 'configurationDriversPhone',
                                    fieldLabel: 'Driver Phone Nr'
                                }, {
                                    xtype: 'textfield',
                                    id: 'configurationDriversEmail',
                                    fieldLabel: 'Driver Email'
                                }, {
                                    xtype: 'combobox',
                                    id: 'configurationDriversProvider',
                                    fieldLabel: 'Provider',
                                    displayField: 'name',
                                    store: 'comboProviders',
                                    valueField: 'id'
                                }, {
                                    xtype: 'textareafield',
                                    id: 'configurationDriversMemo',
                                    fieldLabel: 'Memo'
                                }, {
                                    xtype: 'button',
                                    handler: function (button, event) {
                                        var form = document.forms;

                                        Ext.MessageBox.alert('Submitted Values', form.getValues(true));

                                    },
                                    height: 37,
                                    id: 'configurationDriversSave',
                                    text: 'Save'
                                }]
                            }, {
                                xtype: 'gridpanel',
                                height: 300,
                                id: 'configurationDriversGrid',
                                itemId: 'configurationDriversGrid',
                                animCollapse: false,
                                collapsible: true,
                                title: 'Drivers',
                                store: 'gridDrivers',
                                viewConfig: {

                                },
                                columns: [{
                                    xtype: 'gridcolumn',
                                    dataIndex: 'id',
                                    text: 'Id'
                                }, {
                                    xtype: 'gridcolumn',
                                    dataIndex: 'version',
                                    text: 'Version'
                                }, {
                                    xtype: 'gridcolumn',
                                    dataIndex: 'driverId',
                                    text: 'DriverId'
                                }, {
                                    xtype: 'gridcolumn',
                                    dataIndex: 'firstName',
                                    text: 'FirstName'
                                }, {
                                    xtype: 'gridcolumn',
                                    dataIndex: 'middleName',
                                    text: 'MiddleName'
                                }, {
                                    xtype: 'gridcolumn',
                                    dataIndex: 'lastName',
                                    text: 'LastName'
                                }, {
                                    xtype: 'gridcolumn',
                                    dataIndex: 'email',
                                    text: 'Email'
                                }, {
                                    xtype: 'gridcolumn',
                                    dataIndex: 'workPhone',
                                    text: 'WorkPhone'
                                }, {
                                    xtype: 'gridcolumn',
                                    dataIndex: 'note',
                                    text: 'Note'
                                }, {
                                    xtype: 'gridcolumn',
                                    dataIndex: 'licenseNumber',
                                    text: 'LicenseNumber'
                                }, {
                                    xtype: 'gridcolumn',
                                    dataIndex: 'providerId',
                                    text: 'ProviderId'
                                }]
                            }]
                        }]
                    }]
                }]
            }]
        });

        me.callParent(arguments);
    }

}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T11:15:28.510

如果没有小提琴或一些更简单的示例，很难说任何话，但是查看您的代码，我注意到一件有趣的事情：

你`layout: border`只有在顶层，然后你有很多嵌套的面板。尝试`border`在包含正在折叠的两个面板的容器中定义布局。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T05:43:38.427

如果您要使用边框布局，您可能需要参考：[http](http://docs.sencha.com/ext-js/4-0/#!/example/layout/border.html) ://docs.sencha.com/ext-js/4-0/#!/example/layout/border.html 我只做过将其用于东面板和西面板，以隐藏和显示有关事件触发器的其他信息。由于您已经有了 ID，因此最好手动触发这些 ID。