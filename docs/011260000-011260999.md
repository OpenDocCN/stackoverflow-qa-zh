# StackOverflow 问答 11260000-11260999

# jquery - 哪些值应该放在引号中，哪些不应该放在 jQuery 的动画中

> ID：11260006
> 
> 赞同：0
> 
> 时间：2012-06-29T10:17:55.337
> 
> 标签：jquery, animation, jquery-animate

我想知道在哪些情况下应该将动画的值放在引号中。

[jQuery](http://api.jquery.com/animate/)的网站并没有真正解释什么时候。我想它会是当你给出一个单位值时：例如`"52px"`，或者`"1em"`虽然不透明度是无单位的（`0.9`），但我不知道如何处理诸如`borderStyle`, `backgroundColor`,之类的东西`boxShadow`，`backgroundImage`但我似乎找不到任何例子. 任何帮助和指导将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T10:31:16.283

# 简短的回答

当您将值放在引号中时，您应该总是很好，除了布尔值（`true`或`false`）。

# 长答案

该值将用于什么并不重要。*"opacity, borderStyle, backgroundColor"*，它们无关紧要。它与您要传递的数据*类型有关。*

当您将值放在引号中时，您将其作为字符串传递，当 jQuery 读取该值时，它将分析该字符串并解释该值。例如，当你想要一个百分比宽度时，你通过`{width:"10%"}`，jQuery 将看到百分比符号并使用它。

对于百分比示例，您不能在没有引号的情况下传递它，因为- 符号`%`在您的脚本中起作用，所以简单地传递`{width:10%}`将导致 TypeError。与 相同`"10px"`，传递`10px`将导致错误，因为`px`如果它不在引号中，JavaScript 将尝试将其解释为变量名。

因此，实际上您唯一可以不使用引号的情况是，当它们不是字符串时，它们具有*相同含义的值，例如数字或布尔值。*

# javascript - 使用 Ajax 在 Rails 中检索 Javascripts 变量

> ID：11260007
> 
> 赞同：0
> 
> 时间：2012-06-29T10:17:55.727
> 
> 标签：javascript, jquery, ruby-on-rails, ajax

我遇到了一些麻烦，我不知道如何使用 Ajax 来检索 javascript 变量。

这是代码，我想你会明白我的意思

```
%form{:name => "widget"}
  %input{:name => "color", :onclick => "ob()", :type => "radio"} Bleu/Orange
  %input{:name => "color", :onclick => "bo()", :type => "radio"} Bleu/Orange
%script{:Language => "javascript"}
  function ob()
  {
    var ojblue = 1;
  }
  function bo()
  {
    var ojblue = 2;
  }
= link_to("Edit", "#ojblue", :class => 'btn btn-info', :'data-toggle' => "modal") 
```

所以我试图检索“ojblue”值；经过多次搜索，我知道我必须使用 Ajax 或 Jquery，我知道的唯一提示是使用“remote_function”方法，但我不知道如何处理......

非常感谢你

# android - 来自服务中的 Parcelable 对象的 getExtra() 上的 classCastException

> ID：11260015
> 
> 赞同：0
> 
> 时间：2012-06-29T10:18:24.287
> 
> 标签：android, service, location, classcastexception, parcelable

我正在尝试实现一个服务，并且我的服务中有一个 classCastException。由于位置不是 Parcelable，我将它包装在 ParcelableArrayList 中。

```
public class GPSService extends Service {
    public void setLocation(Location location) {
        ArrayList<Location> locationArrayList = new ArrayList<Location>(1);
        locationArrayList.add(location);
        Bundle b = new Bundle();
        b.putParcelableArrayList("location", locationArrayList);
        // try with an arrayList instead of just getExtra doesn't change anything :(
        ArrayList<GPSResultReceiver> resultReceiverArrayList = intent.getParcelableArrayListExtra("receiver");
        // this is a resultReceiver and not a GPSResultReceiver
        // where did the upcast happen?
        GPSResultReceiver receiver = resultReceiverArrayList.get(0);
        Log.d("ResultClass", receiver.getClass().toString());
        receiver.onReceiveResult(1111, b);
    } 
```

我的活动如下所示：

```
public class MyActivity extends Activity implements GPSResultReceiver.Receiver {
    void startService() {
        resultReceiver = new GPSResultReceiver(new Handler());
        resultReceiver.setReceiver(this);
        final Intent intent = new Intent(Intent.ACTION_SEND, null, this, GPSService.class);
        // intent.putExtra("receiver", resultReceiver);
        ArrayList<GPSResultReceiver> resultReceiverArrayList = new ArrayList<GPSResultReceiver>(1);
        resultReceiverArrayList.add(resultReceiver);
        intent.putParcelableArrayListExtra("receiver", resultReceiverArrayList);
        serviceRunning = true;
        startService(intent);
    } 
```

我的 GPSResultReceiver：

```
public class GPSResultReceiver extends ResultReceiver {
    private Receiver resultReceiver;
    public GPSResultReceiver(Handler handler) {
        super(handler);
    }
    public void setReceiver(Receiver receiver) {
        resultReceiver = receiver;
    }
    public interface Receiver {
        public void onReceiveResult(int resultCode, Bundle resultData);
    }
    @Override
    public void onReceiveResult(int resultCode, Bundle resultData) {
        if (resultReceiver != null) {
            resultReceiver.onReceiveResult(resultCode, resultData);
        }
    }
} 
```

那么为什么这里会出现这种演员阵容，我该如何解决呢？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-30T06:05:06.300

似乎它按预期工作，因为ResultReceiver 的[CREATOR](http://developer.android.com/reference/android/os/ResultReceiver.html#CREATOR%20CREATOR)创建 ResultReceiver，但不是子类。这里的要点如下：实际上，服务中不需要 GPSResultReceiver。只需 ResultReceiver 就足以将结果发回，但是您应该调用[public void send (int resultCode, Bundle resultData)](http://developer.android.com/reference/android/os/ResultReceiver.html#send%28int,%20android.os.Bundle%29 "发送")，而不是`onReceiveResult`。所以，它看起来像

服务：

```
public class GPSService extends Service {

    Intent intent = null;
    ResultReceiver receiver = null;

    @Override
    public IBinder onBind(final Intent arg0) {
        // TODO Auto-generated method stub
        return null;
    }

    @Override
    public void onStart(final Intent inIntent, final int startId) {

        super.onStart(inIntent, startId);

        this.intent = inIntent;
        setLocation(null);
    }

    void setLocation(final Location location) {
        final ArrayList<Location> locationArrayList = new ArrayList<Location>(1);
        locationArrayList.add(location);
        final Bundle b = new Bundle();
        b.putParcelableArrayList("location", locationArrayList);

        try {
            this.receiver = this.intent.getParcelableExtra("com.example.testservice.TestResultReceiver");
        } catch (final ClassCastException e) {
            Log.e("GPSService", "Failed to cast to  GPSResultReceiver", e);
        }

        try {
            this.receiver = GPSResultReceiver.class.cast(this.intent.getParcelableExtra("com.example.testservice.TestResultReceiver"));
        } catch (final ClassCastException e) {
            Log.e("GPSService", "Failed to cast to  GPSResultReceiver 2", e);
        }

        Log.d("ResultClass", this.receiver.getClass().toString());
        this.receiver.send(1111, b);
    }
} 
```

# php - PHP 解析 XML 并按字母顺序对子节点进行排序

> ID：11260018
> 
> 赞同：0
> 
> 时间：2012-06-29T10:18:27.377
> 
> 标签：php, xml, sorting

我有一个 XML 文件并将其解析到我的 PHP 文档中。我想按字母顺序对 XML 的子节点进行排序，并将它们显示在我的选择框中。有人可以帮帮我吗？我被困在排序过程中...... :)

国家.xml

```
 <?xml version="1.0"?>
<countries>
    <country>
        <name>Deutschland</name>
        <league>Bundesliga</league>
    </country>
    <country>
        <name>Frankreich</name>
        <league>Ligue 1</league>
    </country>
    <country>
        <name>Osterreich</name>
        <league>Tipp3-Bundesliga</league>
    </country>
    <country>
        <name>England</name>
        <league>Premier League</league>
    </country>
    <country>
        <name>Schweden</name>
        <league>Allsvenskan</league>
    </country>
    <country>
        <name>Kanada</name>
        <league>Canadian Soccer League</league>
    </country>
</countries> 
```

我的 PHP 代码如下所示：

```
echo "<select>";    
foreach ($newXml as $item) {
   $country=$item->name;
   $league=$item->league;
   echo $league;
   echo "<option>".$country."-".$league."</option>";
}
   echo "</select>"; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T10:24:18.140

您可以分三个步骤执行此操作：

```
// 1\. collect
foreach ($newXml as $country) {
  $items[] = "{$country->name} - {$country->league}";
}
// 2\. sort (on country and league in this case)
sort($items);
// 3\. enumerate
echo '<select>';
foreach ($items as $item) {
  echo '<option>', htmlspecialchars($item), '</option>';
}
echo '</select>'; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T10:27:11.483

您可以在创建选择框之前使用数组。

```
echo "<select>";    
$temp =  array()
foreach ($newXml as $item)
   $temp [$item->name] = $item->league;

ksort($temp);
foreach ($teml as $name => $league) {
   $country=$name;
   $league=$league;
   echo $league;
   echo "<option>".$country."-".$league."</option>";
}
   echo "</select>"; 
```

它是一个盲目的镜头......应该工作。

# c# - 检查 PropertyDescriptor 是否有属性

> ID：11260024
> 
> 赞同：12
> 
> 时间：2012-06-29T10:18:56.303
> 
> 标签：c#, .net

**我正在尝试检查属性是否应用了 DataMemberAttribute（使用 TypeDescriptor）**

这就是我现在所拥有的：

```
PropertyDescriptor targetProp = targetProps[i];

var has = argetProp.Attributes.Contains(
Attribute.GetCustomAttribute(typeof(DataMemberAttribute).Assembly,typeof(DataMemberAttribute))); 
```

问题是

```
Attribute.GetCustomAttribute(typeof(DataMemberAttribute).Assembly,typeof(DataMemberAttribute)) 
```

返回空

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-06-29T10:24:28.487

你可以使用 LINQ。[`.OfType<T>()`](http://msdn.microsoft.com/en-us/library/bb360913.aspx)和扩展方法链[`.Any()`](http://msdn.microsoft.com/en-us/library/bb337697)可以很好地完成这项工作：

```
PropertyDescriptor targetProp = targetProps[i];
bool hasDataMember = targetProp.Attributes.OfType<DataMemberAttribute>().Any(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-07-08T11:24:29.830

在那里找到了一个更好的答案：[https ://stackoverflow.com/a/2051116/605586](https://stackoverflow.com/a/2051116/605586)

基本上你可以使用：

```
bool hasDataMember = Attribute.IsDefined(property, typeof(DataMemberAttribute)); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-03-07T17:09:23.563

有3种方式：

*   第一的：

    ```
    PropertyDescriptor targetProp = targetProps[i];
    bool hasDataMember = targetProp.Attributes.Contains(new DataMemberAttribute()); 
    ```

*   第二：

    ```
    PropertyDescriptor targetProp = targetProps[i];
    bool hasDataMember = targetProp.Attributes.OfType<DataMemberAttribute>().Any(); 
    ```

*   第三：

    ```
    PropertyDescriptor targetProp = targetProps[i];
    bool hasDataMember = targetProp.Attributes.Matches(new DataMemberAttribute()); 
    ```

最良好的问候！

# objective-c - 两种方法之间的Objective C内存管理

> ID：11260027
> 
> 赞同：1
> 
> 时间：2012-06-29T10:19:14.227
> 
> 标签：objective-c, memory-management

在以下情况下，我对内存管理有点困惑

```
-(NSData *)getData{ 
    NSData *TempData = [[NSData alloc]init];
    return TempData; 
  }

 //in some other method
 NSData *NewData = [self getData]; 
```

现在的问题是直到何时保留 NewData 以及我应该如何发布它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T10:22:44.937

更改您的代码

```
-(NSData)getData{ 
    NSData *TempData = [[NSData alloc]init];
    return NSData; 
 } 
```

至

```
-(NSData)getData{ 
    NSData *TempData = [[NSData alloc]init];
    return [TempData autorelease]; 
 } 
```

或仅通过代码释放它

```
[NewDate release]; 
```

我认为问题出在你的吸气剂方法上。它不会返回您保留的 TempData。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-29T10:25:37.823

它会一直保持活动状态，直到您调用 [newData release]，由于分配，您的方法返回一个保留 cout 为 1 的对象，这意味着根据可可内存管理规则，您的方法应该以 new 或 alloc 开头或包含副本，因此将方法名称更改为 newData。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-29T10:22:18.130

`release`完成对象后只需调用：

```
-(NSData *)newData{ 
    NSData *TempData = [[NSData alloc]init];
    return TempData; 
}

//in some other method
NSData *NewData = [self newData];

// use data

[NewData release]; 
```

*编辑*：为了符合约定，返回保留对象的方法应以`new`. 感谢@PeterSarnowski。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-29T10:23:51.263

这是此 getter 方法的错误用法。它应该返回一个自动发布的 NSData 副本。调用者可能会或可能不会保留自动发布的副本。如果它被保留，调用者有责任释放它。

其次是这个方法的一个错字，它应该是 NSData*。我的错字作为回报。感谢 Peter Sarnowski 的指点。

```
-(NSData *)getData { 
    NSData *tempData = [NSData data];
    return tempData; 
} 
```

调用者可以使用以下代码保留它：

```
NSData *myData = [[self getData] retain];
//Some code

[myData release]; 
```

如果调用者对保留这个对象不感兴趣，他只会调用

```
NSData *myData = [self getData]; 
```

并在调用它的同一函数中使用。

# hive - 如何使用 Java API 访问 Hive

> ID：11260028
> 
> 赞同：4
> 
> 时间：2012-06-29T10:19:15.823
> 
> 标签：hive

[http://wiki.apache.org/hadoop/Hive/HiveJDBCInterface](http://wiki.apache.org/hadoop/Hive/HiveJDBCInterface) - 是否有比 Hive JDBC 驱动程序更高级别的 ORM 接口，我们可以使用它来运行查询和解析结果

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-29T14:26:11.250

不，ORM 中的“R”代表“关系数据库”。Hive 是一个 NOSQL 数据库，而不是关系数据库。与许多其他 NOSQL 数据库相比，Hive 的一个巨大优势是您可以使用（几乎）普通 SQL 和使用（几乎）功能齐全的标准 JDBC 接口来访问它。但是，如果您正在考虑一起使用 ORM 和 Hive，那么您可能从错误的角度来处理您的问题。

**编辑 6/4/13：**这是来自 Wikipedia 的引用：在关系模型中，每个表模式必须标识一个主列，用于标识称为主键的行。表可以通过使用指向主键的外键来关联。

Hive 既不支持外键也不支持主键，因此它不是关系数据库。

我要感谢投反对票的人让我有机会仔细检查导致我最初发表声明的理由。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-02T10:53:34.330

Hive 是 Hadoop 之上的一个生态系统组件。它既不是 RDBMS 也不是 NOSQL 数据库，它只是在 HDFS（文件系统）之上编写 MapReduce 编程的一种方式。

创建 Hive 是为了让具有 sql 知识的开发人员友好，只需编写一种 sql 语句即可轻松运行 MapReduce。MapReduce 可以表示为一个 sql，其中 Hive 引擎使用 Driver 将它们转换为 MapReduce。

Hive 使用 Metastore 对存储及其结构进行划分。Metastore 是简单的 RDBMS，就像任何其他 RDBMS 一样，我们可以连接到它并在此之上创建一个 sql 语句。一旦我们在 Metastore 上创建了 HQL 语句，Metastore 就有能力告诉下划线 Hive 引擎执行 HQL 语句并返回结果作为结果集。

# javascript - 从 vb.net 关闭脚本弹出窗口

> ID：11260029
> 
> 赞同：0
> 
> 时间：2012-06-29T10:19:17.477
> 
> 标签：javascript, html, vb.net, vb.net-2010

我正在使用“WebBrowser”控件在 vb.net 中开发一个需要从某些网站读取信息的 win32 应用程序。

问题是，有时在服务正在读取网站时会随机出现一些弹出窗口，我只需要关闭或“接受”此弹出窗口，以便服务可以继续工作。

希望任何人都可以帮助我。

编辑：我可以禁用脚本错误：

```
WebBrowser1.ScriptErrorsSuppressed = True 
```

这只是没有显示错误，但没有解决问题，仍在解决问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T11:59:28.130

我不认为使用网络浏览器控件是最好的方法。如果您正在阅读网页，那么您可以使用以下代码来阅读 html，然后自己解析它（这将避免任何弹出窗口）

```
Public Shared Function GetPageAsString(ByVal address As Uri) As String
    Dim request As HttpWebRequest
    Try
        request = DirectCast(WebRequest.Create(address), HttpWebRequest)
        Using response As HttpWebResponse = DirectCast(request.GetResponse(), HttpWebResponse)
            Using reader As StreamReader = New StreamReader(response.GetResponseStream())
                Return reader.ReadToEnd
            End Using
        End Using
    Catch ex As Exception
        MessageBox.Show(ex.Message)
        Return ""
    End Try
End Function 
```

用法：

```
Dim url as string = "http://www.bbc.co.uk"
Dim webContent As String = GetPageAsString(New Uri(url)) 
```

# c# - 使用非对称密钥 windows 窗体和 windows 服务解密 Xml 文件

> ID：11260031
> 
> 赞同：0
> 
> 时间：2012-06-29T10:19:28.213
> 
> 标签：c#, xml, winforms, encryption, windows-services

我正在使用 .NET3.5 (C#) 开发一个 winforms 应用程序。为了保护应用程序，我使用了一个 Xml 文件，应该使用非对称密钥对其进行加密。

现在，我的应用程序有两部分，windows 窗体部分和 windows 服务部分（检查应用程序的真实性）。因此，我的文件将由两部分加密/解密。这就是问题出现的地方。当 win 表单部分尝试解密服务已创建的文件时，会发生异常（数据不正确）。这是我的代码：

```
private readonly static string containerName = "ENC_XML_ASY_KEY";
private readonly static string keyName = "keyName";

public static void EncryptXmlFile(this XmlDocument doc, string elemToEncryptName)
    {
        if (doc == null)
            return;

        var cspParams = new CspParameters() { KeyContainerName = containerName };
        var rsaKey = new RSACryptoServiceProvider(cspParams);

        var elementToEncrypt = doc.GetElementsByTagName(elemToEncryptName)[0] as XmlElement;
        if (elementToEncrypt == null)
            return;

        // Create a 256 bit Rijndael key.
        var sessionKey = new RijndaelManaged() { KeySize = 256 };

        var eXml = new EncryptedXml();
        byte[] encryptedElement = eXml.EncryptData(elementToEncrypt, sessionKey, false);

        var edElement = new EncryptedData()
        {
            Type = EncryptedXml.XmlEncElementUrl,
            Id = "XmlID",
            EncryptionMethod = new EncryptionMethod(EncryptedXml.XmlEncAES256Url)
        };

        var ek = new EncryptedKey();
        var encryptedKey = EncryptedXml.EncryptKey(sessionKey.Key, rsaKey, false);

        ek.CipherData = new CipherData(encryptedKey);
        ek.EncryptionMethod = new EncryptionMethod(EncryptedXml.XmlEncRSA15Url);
        edElement.KeyInfo.AddClause(new KeyInfoEncryptedKey(ek));

        // Create a new KeyInfoName element.
        var kin = new KeyInfoName() { Value = keyName };

        // Add the KeyInfoName element to the encryptedKey object.
        ek.KeyInfo.AddClause(kin);
        edElement.CipherData.CipherValue = encryptedElement;
        EncryptedXml.ReplaceElement(elementToEncrypt, edElement, false);

    }

public static void DecryptXmlFile(this XmlDocument doc)
    {
        if (doc == null)
            return;

        var cspParams = new CspParameters() { KeyContainerName = containerName };
        var rsaKey = new RSACryptoServiceProvider(cspParams);

        var exml = new EncryptedXml(doc);
        exml.AddKeyNameMapping(keyName, rsaKey);
        exml.DecryptDocument();
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T13:36:16.287

您已经指出运行服务和客户端的帐户不同，这解释了为什么它不起作用 - 除非您另外指定，否则密钥是在用户自己的密钥存储中创建的，其他用户无权访问。

相反，您需要在机器存储中创建密钥，*并*授予其他用户对它的访问权限（因为默认情况下，即使在机器存储中创建，应用于密钥的安全性也只允许访问创建的用户它）。

如果一个新密钥不存在，您还允许解密创建一个新密钥（这会导致您的“坏数据”异常，而不是可能更有用的“密钥集不存在”）。

我建议修改加密方法如下：

```
public static void EncryptXmlFile(this XmlDocument doc, string elemToEncryptName)
{
    if (doc == null)
        return;

    var security = new CryptoKeySecurity();
    // Give the creating user full access
    security.AddAccessRule(new CryptoKeyAccessRule(new NTAccount(Environment.UserDomainName, Environment.UserName), CryptoKeyRights.FullControl, AccessControlType.Allow));

    // Add read-only access to other users as required
    security.AddAccessRule(new CryptoKeyAccessRule(new NTAccount("<domain name>", "<user name>"), CryptoKeyRights.GenericRead, AccessControlType.Allow));

    // Specify that the key is to be stored in the machine key-store, and apply the security settings created above
    var cspParams = new CspParameters
    {
        KeyContainerName = containerName,
        Flags = CspProviderFlags.UseMachineKeyStore,
        CryptoKeySecurity = security
    };
    var rsaKey = new RSACryptoServiceProvider(cspParams);

    // Remainder of the method here... 
```

以及解密方法：

```
public static void DecryptXmlFile(this XmlDocument doc)
{
    if (doc == null)
        return;

    // Specify that the key is to be loaded from the machine key-store, and not to create a new key if it doesn't exist.
    var cspParams = new CspParameters
    {
        KeyContainerName = containerName,
        Flags = CspProviderFlags.UseMachineKeyStore | CspProviderFlags.UseExistingKey
    };
    var rsaKey = new RSACryptoServiceProvider(cspParams);

    // Remainder of the method here... 
```

# jquery - 如果元素具有属性，则在 jQuery 中执行其他操作

> ID：11260034
> 
> 赞同：0
> 
> 时间：2012-06-29T10:20:12.300
> 
> 标签：jquery

我正在使用 qTip 插件为 alt 和 title 标签创建工具提示。这样做的原因是因为在我正在处理的应用程序中，我无法将图像上的所有 alt 标签都转换为标题标签，因此必须同时使用两者：

例如

```
$('*[title]').qtip({
        content: {
            attr: 'title'
        },
        hide: {
            fixed: false,
            event: 'click mouseleave'
        },
        position: {
            target: "mouse",
            adjust: {
                x: 20,
                y: 10,
                method: "flipinvert flipinvert"
            },
            container: false,
            viewport: true,
            at: "right center",
            my: "left center"
        },
        style: {
            classes: "ui-tooltip-tipsy",
            tip: {
                corner: false
            }
        }
    });

    $('img[alt]').qtip({
        content: {
            attr: 'alt'
        },
        hide: {
            fixed: false,
            event: 'click mouseleave'
        },
        position: {
            target: "mouse",
            adjust: {
                x: 20,
                y: 10,
                method: "flipinvert flipinvert"
            },
            container: false,
            viewport: true,
            at: "right center",
            my: "left center"
        },
        style: {
            classes: "ui-tooltip-tipsy",
            tip: {
                corner: false
            }
        }
    }); 
```

不过，我遇到的问题是，如果我有一个带有包含图像的标题的链接，我将得到两个工具提示，这是不正确的行为。

我的想法是做一些逻辑检查，如果我悬停的元素有一个标题标签或替代标签，那么只做一个或另一个，而不是两者。

因此，例如，如果`<a href="#" title="Tooltip info"><img src="#" alt="Tooltip info"></a>`在这种情况下它应该使用 alt 或 title 标记。

任何人都可以帮忙吗？谢谢

例子：

```
$('a').hover(function() {

if($(this).attr('title')) {
// dont run the alt tag tooltip code
}
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-29T10:37:47.677

您可以将以下选择器用于第一个

```
$('*[title]:not(:has([alt]))').qtip({..... 
```

它将做的是，它将选择所有具有属性的元素，这些元素`title`没有任何具有`alt`属性的子元素。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-29T10:31:30.687

试试这个：

```
$('*[title]:not(:has([alt]))').qtip({
  // code
}); 
```

将在标签 has 中过滤`title`并排除那些 child has `alt`。

# javascript - 安全的 Javascript 加密库？

> ID：11260036
> 
> 赞同：3
> 
> 时间：2012-06-29T10:20:23.750
> 
> 标签：javascript, node.js, encryption, sjcl

我正在搜索一个提供安全加密的 javascript 库。客户端必须生成一个密钥，所有上传到服务器的数据都被加密，所有下载的数据都被解密。我需要一个经过身份验证的加密方案，仅 CTR 或 CBC 是不够的。

我听说过 sjcl，但似乎 sjcl 只能一次加密整个数据。我没有找到一种方法来逐块加密数据。因为上传的文件可能非常大，这种方法是不可行的。我需要类似 java 加密接口的东西，它有两个方法 update() 和 final()。

我发现 nodeJS 加密库似乎可以满足我的需要，但我不知道如何在浏览器端使用它。

我找到了 google crypto-js，但是这个库似乎不提供经过身份验证的加密，而只提供标准模式。

有没有办法用 sjcl 逐块加密数据？在浏览器端使用 nodeJS 加密库？将经过身份验证的加密与 crypto-js 一起使用？或者是否有另一个安全的 javascript 库可以提供我需要的东西？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-29T10:32:46.990

**简短的回答**
恐怕这不是不可能的。

**长答案**
因为你不能保证 Javascript 库的完整性，所以你不能依赖它来做你期望它做的事情。因此，您无法保证任何安全性。

这个问题已经被广泛讨论并且总是以相同的结论结束：没有任何双向身份验证和安全通道，您的客户端无法验证库的正确性。如果任何中间人更改了加密程序，您的客户不会知道，更不用说您会发现。

因此，为了保证安全，您将需要 SSL 和客户端证书。
^(（当然，非保证安全确实不存在）)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-30T00:01:30.383

SJCL 部署的来自 CCM 的 Appart 是一种流密码模式，我会仔细查看它，而不仅仅是查看便利包装器。它是开源的，所以无论如何都应该在某个地方实现原始密码。

请注意，这不是最终应受信任的代码。当我尝试为它编写 Java 包装器时，我很快发现了身份验证失败的错误。似乎便利库根本没有对关联的身份验证数据进行身份验证。由于它没有使用其他库进行测试，因此我敦促您注意不要出现一些遗留的错误。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-29T17:46:17.787

是否有任何理由需要从客户端推送到不受信任的服务器？

如果提供您网站的服务器是受信任的，那么您应该能够将您的数据发送回受信任的服务器，让受信任的服务器加密，然后受信任的服务器可以将数据发送到不受信任的服务器进行存储。

# c# - 如何提取“”之间的信息？C＃

> ID：11260038
> 
> 赞同：-5
> 
> 时间：2012-06-29T10:20:31.793
> 
> 标签：c#, serial-port, buffer

谁能告诉我如何从这个输出中以简单的方式将以下信息提取到变量中。

输出：

```
AT+CMGL="ALL"
+CMGL: 0,"REC READ","+40728072005",,"12/06/29,13:04:26+12"
password,1,ON 
```

我想从上面的输出中提取一些信息，如下所示：

```
msisdn="+40728072005"
passwd="password"
itemno="1"
command="ON" 
```

--

```
 string split = ",";
    string[] substrings = Regex.Split(buff, split);
    foreach (string match in substrings)
    {
        Console.WriteLine("'{0}'", match);
    } 
```

图片-> [1]：http: [//i.stack.imgur.com/zl6Nj.png](http://i.stack.imgur.com/zl6Nj.png)

有没有办法从一开始就排除不需要的输出？就像 grep -v，我对 C# 不是很熟悉。

到目前为止，我到了这一点：

```
 string split = ",";
    string split1 = "\"";
    string split2 = "OK";
    string[] substrings = Regex.Split(buff, split);
    string[] substrings1 = Regex.Split(substrings[2], split1);
    Console.WriteLine(substrings1[1]);
    string[] substrings2 = Regex.Split(substrings[5], split1);

    Console.WriteLine(substrings2[1]);
    Console.WriteLine(substrings[6]);
    string[] substrings3 = Regex.Split(substrings[7], split2);
    Console.WriteLine(substrings3[0]); 
```

不过，这是通过拆分字符串来完成的，因为我知道消息格式。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T10:25:13.390

看起来您有固定数量的逗号分隔值，因此该位置定义了特定值的含义。我会删除等号之前的所有内容，然后用逗号分隔并分别处理所需的值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T11:02:48.563

试试这个演示，把它放在控制台应用程序的 Main 方法中（它使用正则表达式，所以你必须添加行“使用 System.Text.RegularExpressions;”）：

```
 string input = "AT+CMGL=\"ALL\"\n+CMGL: 0,\"REC READ\",\"+40728072005\",,\"12/06/29,13:04:26+12\"\npassword,1,ON";
        var matches = Regex.Matches(
            input,
            @"\""(?<msisdn>\+\d*)\"",.*,\""(?<date>\d{2}\/\d{2}/\d{2},\d{2}:\d{2}:\d{2}\+\d{2})\"".*\n+(?<passwd>[^,]*),(?<itemno>\d*),(?<command>\w*)"
            , RegexOptions.Multiline);

        foreach (Match m in matches)
        {
            Console.WriteLine(m.Groups["msisdn"].Value);
            Console.WriteLine(m.Groups["date"].Value);
            Console.WriteLine(m.Groups["passwd"].Value);
            Console.WriteLine(m.Groups["itemno"].Value);
            Console.WriteLine(m.Groups["command"].Value);
        }
        Console.ReadKey(); 
```

基本上，正则表达式在文本中搜索定义的模式。表达式的含义：

\"" - 这就是引号符号的定义方式，它用反斜杠转义并写入两次，因此不会导致编译器错误。

(?+\d*) - 通常，括号中的表达式表示您正在捕获一个组，这是一个命名组，它的名称由 ? 指定，该组将捕获以 + 号开头的字符串（它被转义反斜杠）后跟由反斜杠和字母“d”表示的数字（“d”来自“digit”）。反斜杠用作具有特殊含义的字符的转义字符。星号 * 表示在它之前出现的字符可以出现 0 次或更多次。

\"" - 报价，这是“msisdn”号码的结束报价。

, - 表示逗号。

.* - 点表示任何字符，其后的星号表示任何字符可以出现 0 次或多次。

(?\d{2}/\d{2}/\d{2},\d{2}:\d{2}:\d{2}+\d{2}) - 捕获日期的命名组, 表达式 \d{2} 有 \d 表示数字和 {2} 告诉正则表达式引擎数字应该出现两次，然后是 / - 它表示正斜杠（它被反斜杠转义）。之后是用冒号分隔的数字，最后是加号和后面的两位数字，这就是提取日期的方式。

\n+ - \n 表示换行符，+ 是量词，表示换行符出现一次或多次。

(?[^,]*) - 是捕获密码部分的命名组，[^,] 表示应捕获除逗号以外的任何字符，方括号表示字符范围，^ 表示否定，星号表示字符可以出现 0或更多次。

(?\d*) - 是一个命名组，它捕获由 \d* 定义的数字

(?\w*) - 是一个命名组，用于捕获单词字符（字母、数字和下划线）

# video - 在 OpenCV 中反向播放视频

> ID：11260042
> 
> 赞同：16
> 
> 时间：2012-06-29T10:20:37.007
> 
> 标签：video, opencv, reverse

是否可以在 OpenCV 中向后播放视频？通过 API 调用或通过缓冲视频帧并将顺序反转为新的视频文件。

谢谢

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-06-29T11:19:10.397

唯一可行的方法是手动提取帧，缓冲它们（在内存或文件上），然后以相反的顺序重新加载它们。

问题是视频压缩器都在利用时间冗余——两个连续帧大部分时间非常相似的事实。因此，它们不时编码一个完整的帧（通常每几百帧），然后只发送前一个和当前之间的差异。

现在，为了解码工作，必须以相同的顺序完成 - 解码一个关键帧（一个完整的），然后对于每个新帧，添加差异以获得当前图像。

这种策略使得在视频中反向播放变得非常困难。有几种技术，但都涉及缓冲。

现在，您可能已经看到了 Astor 描述的 CV_CAP_PROP_POS_FRAMES 参数。看起来没问题，但由于上述问题，OpenCV 无法正确跳转到特定帧（在这些问题上存在多个错误）。他们（OpenCV 开发人员）正在研究一些解决方案，但即使这些解决方案也会非常慢（它们涉及返回到上一个关键帧，然后解码回选定的关键帧）。如果使用这种技术，每帧必须平均解码数百次，因此速度非常慢。然而，它不起作用。

**编辑** 如果您追求缓冲方式来反转它，请记住，解码后的视频将很快耗尽普通计算机的内存资源。一个普通的 720p 视频**一分钟长**，解压后需要**4.7GB**内存！将帧作为单个文件存储在磁盘上是解决此问题的实用方法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-06-01T19:48:34.550

另一种解决方案，类似于[ArtemStorozhuk 的答案](https://stackoverflow.com/a/11260499/1831052)是使用 FPS 从帧域移动到时域，然后使用`CV_CAP_PROP_POS_MSEC`（不会像`CV_CAP_PROP_POS_FRAMES`可以那样锤击 CPU）向后搜索。这是我的示例代码，它在 .mpg 上完美运行，仅使用大约 50% 的 CPU。

```
#include <opencv2/opencv.hpp>

int main (int argc, char* argv[])
{
  cv::VideoCapture cap(argv[1]);

  double frame_rate = cap.get(CV_CAP_PROP_FPS);

  // Calculate number of msec per frame.
  // (msec/sec / frames/sec = msec/frame)
  double frame_msec = 1000 / frame_rate;

  // Seek to the end of the video.
  cap.set(CV_CAP_PROP_POS_AVI_RATIO, 1);

  // Get video length (because we're at the end).
  double video_time = cap.get(CV_CAP_PROP_POS_MSEC);

  cv::Mat frame;
  cv::namedWindow("window");

  while (video_time > 0)
  {
    // Decrease video time by number of msec in one frame
    // and seek to the new time.
    video_time -= frame_msec;
    cap.set(CV_CAP_PROP_POS_MSEC, video_time);

    // Grab the frame and display it.
    cap >> frame;
    cv::imshow("window", frame);

    // Necessary for opencv's event loop to work.
    // Wait for the length of one frame before
    // continuing the loop. Exit if the user presses
    // any key. If you want the video to play faster
    // or slower, adjust the parameter accordingly.    
    if (cv::waitKey(frame_msec) >= 0)
      break;
  }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-29T10:53:37.630

是的，这是可能的。请参阅带有注释的代码：

```
//create videocapture
VideoCapture cap("video.avi");

//seek to the end of file
cap.set(CV_CAP_PROP_POS_AVI_RATIO, 1);

//count frames
int number_of_frames = cap.get(CV_CAP_PROP_POS_FRAMES);

//create Mat frame and window to display
Mat frame;
namedWindow("window");

//main loop
while (number_of_frames > 0)
{
    //decrease frames and move to needed frame in file
    number_of_frames--;
    cap.set(CV_CAP_PROP_POS_FRAMES, number_of_frames);

    //grab frame and display it
    cap >> frame;
    imshow("window", frame);

    //wait for displaying
    if (waitKey(30) >= 0)
    {
        break;
    }
} 
```

另请阅读[这篇](http://opencv.willowgarage.com/documentation/cpp/reading_and_writing_images_and_video.html)文章。

# android - 如何使用 ffmpeg 更改音频速度和音高个性？

> ID：11260043
> 
> 赞同：6
> 
> 时间：2012-06-29T10:20:52.650
> 
> 标签：android, audio, android-ndk, ffmpeg, audiotrack

我已经设法在我的 android 项目中使用 ffmpeg 和 AudioTrack 类播放音频文件。我可以使用 AudioTrack 类的 setRate 方法更改音频的速度。但它也会改变音频的音高，我只想改变音频的速度，但我在网上找不到解决方案。

任何人都可以请帮助我，因为没有对此的支持。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2014-04-15T16:16:37.597

您可以在 ffmpeg 1.0 及更高版本中使用[atempo 过滤器：](https://www.ffmpeg.org/ffmpeg-filters.html#atempo)

```
ffmpeg -i input.wav -f:a atempo=1.25 output.wav 
```

`atempo`仅接受 0.5 和 2.0 之间的值，但您可以通过链接多个过滤器来绕过限制：

```
ffmpeg -i input.wav -f:a atempo=2,atempo=1.5 output.wav 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-07-16T13:05:25.217

**解决方案：** 我尝试了 SoundTouch 库。我为 android 成功编译了它，但后来我没有使用它的功能，因为我不知道如何使用这个库来加载音频。

但在那之后，我尝试了名为[Sonic](http://dev.vinux-project.org/sonic/)的库。它基本上用于语音，因为它使用 PSOLA 算法来改变音高和速度。但没关系。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-29T17:40:45.073

音高和节奏有着非常紧密的联系。您正在尝试做的事情称为“时间拉伸”，并且是一种有点复杂的算法。您可以在网上找到有关它的信息，并且可以在[此处](http://tarsos.0110.be/artikels/lees/Audio_Time_Stretching_-_Implementation_in_Pure_Java_Using_WSOLA)找到它的 java 库，以及描述该过程的论文。

# objective-c - 上一个 下一个 导航

> ID：11260047
> 
> 赞同：0
> 
> 时间：2012-06-29T10:21:13.863
> 
> 标签：objective-c, ios

我想在左右滑动时导航到画廊中的上一个和下一个图像，但是我不想要上一个下一个按钮。在搜索时我遇到了滑动手势，这是我必须使用的还是简单的滚动视图？谁能提供想法如何做到这一点。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T10:32:26.097

一个水平扩展`UIScrollView`的`contentSize`就足够了。

例如，假设您有 4 个`UIImageView`对象，它们位于`imageViewArray`

```
for (int i = 0; i < 4; i++)
{
    UIImageView *imgView = [imageViewArray objectAtIndex:i];
    //one thing to note is while adding the image views, don't forget to change each views frame.origin.x property accordingly (in this case, each one will increase by the width of the view
    //e.g. 
    imgView.frame = CGRectMake (self.view.frame.size.width * i, 0, self.view.frame.size.width, self.view.frame.size.height);

    [yourScrollView addSubview:imgView];
}

[yourScrollView setContentSize:CGSizeMake(self.view.frame.size.width * 4, self.view.frame.size.height)]; // 4 is the number that will expand the scrollview horizontally 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T10:24:38.127

我认为您应该使用启用分页的滚动视图。我建议不要自己实施画廊。为此目的使用一些开源库。查看three20库。

[http://three20.info/](http://three20.info/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-29T10:25:24.307

我建议使用`UIScrollView`set `pagingEnabled`to `YES`。有了这个，您可以使用 the`UIScrollView`作为所有图像/图像视图的包装器。

# java - 监控 Java 应用程序以获取访问文件的列表

> ID：11260048
> 
> 赞同：0
> 
> 时间：2012-06-29T10:21:17.190
> 
> 标签：java, monitor

我正在使用一个复杂的应用程序，并且想知道它创建和访问了哪些文件。有没有办法监视应用程序或它运行的 jvm 以获取此信息？

编辑：我正在使用 Windows 7

马蒂亚斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T10:26:37.820

您可以为此尝试 JConsole： [Using JConsole to Monitor Applications](http://java.sun.com/developer/technicalArticles/J2SE/jconsole.html)

# php - 浏览某些 html 标签集

> ID：11260054
> 
> 赞同：0
> 
> 时间：2012-06-29T10:21:38.357
> 
> 标签：php, curl

我需要一点帮助。我想做的是提取 b 节点中的所有内容。

```
<P><B>Credit Weighting: </B>5<BR><BR>
<B>Teaching Period(s): </B>Teaching Periods 1 and 2.<BR><BR>
<B>No. of Students: </B>-.<BR><BR>
<B>Pre-requisite(s): </B>None<BR><BR>
<P><A HREF="#top" class="toppage">[Top of page]</A></P>

<P><B>Credit Weighting: </B>20<BR><BR>
<B>Teaching Period(s): </B>Teaching Periods 1 and 2.<BR><BR>
<B>No. of Students: </B>-.<BR><BR>
<B>Pre-requisite(s): </B>None<BR><BR>
<P><A HREF="#top" class="toppage">[Top of page]</A></P>

<P><B>Credit Weighting: </B>10<BR><BR>
<B>Teaching Period(s): </B>Teaching Periods 1 and 2.<BR><BR>
<B>No. of Students: </B>-.<BR><BR>
<B>Pre-requisite(s): </B>None<BR><BR>
<P><A HREF="#top" class="toppage">[Top of page]</A></P> 
```

我能够从第一组中提取数据。下面是执行此操作的示例代码

```
 // GETTING ALL THE B NODE STUFFS AND PRINTING IT'S CONTENTS
    $result = array();
    foreach($document->getElementsByTagName('b') as $node){
    $result[preg_replace('/:\s+$/','',$node->textContent)] = trim($node->nextSibling->textContent);
    } 
    var_dump($result);
    echo '<br /><br />'; 
```

现在我要做的是循环遍历三组 html 代码以获取所有 b 节点并获取内容。请问我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T10:34:24.477

尝试

```
preg_match_all("/\<B\>(.*)\<\/B>([^\<]+)/", $text, $regs); 
```

假设第二位数据中没有 html 标签。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T10:34:52.557

你的意思是这样吗？

```
$result = array();
$id= -1;
foreach($document->getElementsByTagName('b') as $node){
    $field= preg_replace('/:\s+$/','',$node->textContent);
    if ( $field == "Credit Weighting" ) $id++;
    $result[$id][$field]= trim($node->nextSibling->textContent);
}.
var_dump($result); 
```

这让你：

```
array(3) {
  [0] =>
  array(4) {
    'Credit Weighting' =>
    string(1) "5"
    'Teaching Period(s)' =>
    string(25) "Teaching Periods 1 and 2."
    'No. of Students' =>
    string(2) "-."
    'Pre-requisite(s)' =>
    string(4) "None"
  }
  [1] =>
  array(4) {
    'Credit Weighting' =>
    string(2) "20"
    'Teaching Period(s)' =>
    string(25) "Teaching Periods 1 and 2."
    'No. of Students' =>
    string(2) "-."
    'Pre-requisite(s)' =>
    string(4) "None"
  }
  [2] =>
  array(4) {
    'Credit Weighting' =>
    string(2) "10"
    'Teaching Period(s)' =>
    string(25) "Teaching Periods 1 and 2."
    'No. of Students' =>
    string(2) "-."
    'Pre-requisite(s)' =>
    string(4) "None"
  }
} 
```

# blackberry - HttpConnection.getContentLength() 在黑莓中不可用

> ID：11260057
> 
> 赞同：1
> 
> 时间：2012-06-29T10:21:44.647
> 
> 标签：blackberry, java-me

我正在尝试使用 HttpConnection 类的“getContentLength()”来读取我的响应的长度。

但我得到方法 getContentLength() 不可用错误..

是否有任何解决方法可以在黑莓中找到响应的长度..？？

下面是我的代码片段。

```
 HttpConnection httpconn = null;
        httpconn = (HttpConnection) Connector.open(URL);
        httpconn.setRequestMethod(HttpConnection.GET);
        InputStream is = httpconn.openInputStream();
        fileSize = httpconn.getContentLength(); 
```

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-29T12:06:47.507

您总是可以从 http 标头中获取它：

```
long contentLength = Long.parseLong(httpconn.getHeaderField("Content-Length")); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-03T04:38:06.240

您可以使用以下方法找到响应的长度 `httpConn.getLength()`

# java - 错误： : 公共类 org.apache.commons.dbcp.BasicDataSource

> ID：11260058
> 
> 赞同：0
> 
> 时间：2012-06-29T10:22:03.877
> 
> 标签：java, maven, apache-commons-dbcp

安装 Maven 项目时出现此错误（以及所有相关的“未解决类型”错误）。没有与 dbcp 相关的更改，我尝试删除所有本地存储库，再次安装并`commons-dbcp`下载，所以我想依赖关系很好（实际上我可以在几个小时前安装相同的依赖关系）。这种行为的原因可能是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T15:24:28.893

好吧，在这种情况下，我遇到了一个问题，因为其中一个演示者中未使用服务器端类的导入（我错误地放在那里然后忘记了），这可能是尝试自动装配的原因bean 是在应用程序上下文中，它只是不适合它的时间。

# exchangewebservices - EWS 是否有基于 Exchange Server 2010 的服务公开可用

> ID：11260063
> 
> 赞同：0
> 
> 时间：2012-06-29T10:22:19.457
> 
> 标签：exchangewebservices, exchange-server

我被要求开发一个连接以使用 EWS（Exchange Web 服务）从 Exchange 2010 下载电子邮件。询问的公司没有可从外部获得的 Exchange 服务器，但如果没有，开发和测试是不可能的。我也不能也不想安装和配置完整的 Exchange 2010 服务器，因为我没有许可证和经验。

那么问题来了：是否有使用 EWS 可以访问的 Exchange Server 2010 的公开可用的电子邮件服务？我愿意为一个帐户支付费用，所以这不是问题。我只是想通过获得许可证和学习配置 MSES2010 来节省时间和金钱。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T18:59:47.240

您可以免费使用[http://www.microsoft.com/en-us/office365/online-software.aspx](http://www.microsoft.com/en-us/office365/online-software.aspx)一个月。之后，您可以每月支付几美元来保持您的帐户活跃。

我过去曾使用过此服务并启用了 EWS。

# javascript - CSS 和 HTML：如何在点击时创建扩展 DIV？

> ID：11260066
> 
> 赞同：0
> 
> 时间：2012-06-29T10:22:31.853
> 
> 标签：javascript, css, html, onclick

我需要创建一个包含一些内容（其中一些是隐藏的）的 DIV，当您单击它时，它会展开并显示其其余内容。

我找到了很多 HOWTO，但使用 jQuery....

我想要一个使用 CSS 和 HTML 的解决方案（Javascript 也很好！）

提前致谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-29T10:30:57.583

```
<div id="sample"></div> 
```

css

```
#sample {
    border: 1px solid black;
    height: 15px;
    padding: 12px;
    overflow: hidden;    
} 
```

javascript

```
document.getElementById("sample").onclick = function() {
    this.style.height = 'auto';
} 
```

你可以使用一些 jquery 动画 div

# javascript - 限制此随机发生器中连续“As”和“Bs”的数量

> ID：11260067
> 
> 赞同：0
> 
> 时间：2012-06-29T10:22:35.333
> 
> 标签：javascript, random

有些[人](https://stackoverflow.com/questions/11121924/building-a-simple-randomizer-which-includes-a-dot-an-underscore-the-letter-a-a)帮我建立了一个随机化器：

```
function makeid() {
    var text = "";
    var possibleChars = "._";
    var possibleLetters = "AB";

    text += possibleLetters.charAt(Math.floor(Math.random() * possibleLetters.length));
    for( var i=0; i < Math.floor(Math.random() * 3)+1; i++ )
        text += " " + possibleChars.charAt(Math.floor(Math.random() * possibleChars.length));

    return text;
}

for (var i=0; i < 20; i++)
    $("body").append("<div>" + makeid() + "</div>"); 
```

它输出如下内容：

> 乙。.
> 
> 乙。
> 
> 乙 _
> 
> 一个 _ 。
> 
> 乙。
> 
> 一个 。
> 
> 一个 _
> 
> 乙。.
> 
> 一个 _
> 
> 一个 _
> 
> 乙_。
> 
> 乙。. .
> 
> 乙_
> 
> 乙_。

我想修改上面的 JavaScript 代码，使 A 和 B 不会连续重复两次以上：

> 一个 。.
> 
> 乙。
> 
> 乙 _
> 
> 一个 _ 。
> 
> 乙。
> 
> 一个 。
> 
> 一个 _
> 
> 乙。.
> 
> 一个 _
> 
> 一个 _
> 
> 乙_。
> 
> 乙。. .
> 
> 一个 _
> 
> 乙_。

有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T10:42:29.717

记住最后生成的两个字母（或者，更好的是：连续最近生成的相同字母的数量 - 适应任何其他数字会更容易）。如果新的将要相同，请插入另一个。完毕。

随机性会受到影响。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-29T10:43:36.173

给你 - 不漂亮，但应该工作（唉，未经测试）：

```
function makeid() {
    var text = "";
    var possibleChars = "._";
    var possibleLetters = "AB";

    while ( true ) {
        var ch= possibleLetters.charAt(Math.floor(Math.random() * possibleLetters.length));
        if ( this._prev1 != this._prev2 || this._prev1 != ch ) break;
    }
    this._prev2= this._prev1;
    this._prev1= ch;
    text += ch;

    for( var i=0; i < Math.floor(Math.random() * 3)+1; i++ )
        text += " " + possibleChars.charAt(Math.floor(Math.random() * possibleChars.length));

    return text;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-29T10:40:38.797

当然，从分布中生成随机样本的方式取决于分布。如果您不关心这一点，您可以简单地跟踪生成的最后两个字母，如果它们不满足约束，则丢弃新生成的字母。

但是，如果您想将此视为二阶马尔可夫模型，最好定义给定前两个字母的每个字母的概率，例如 P(A|AA)=0; P(B|AA)=1；P(A|BB)=1；P(B|BB)=0；P(A|AB)=0.5；P(B|AB)=0.5；请注意，如果所有条件分布都是均匀的，除了导致相同符号出现三次的那些（在减少的结果集上也是均匀的），这将产生与上述约束生成过程相同的分布。

# tomcat - Grails 参数编码

> ID：11260074
> 
> 赞同：1
> 
> 时间：2012-06-29T10:22:55.047
> 
> 标签：tomcat, grails, encoding, nginx

当我尝试使用像 q 这样的参数请求（方法获取）时，我有 1 个参数编码问题

例子：

```
q=%31%1223%123% 
```

当我渲染它时：

```
�V�▒č 
```

如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T03:47:55.853

我整天都在和这个作斗争。

如果您更改 UrlMappings 并将参数作为路径的一部分而不是查询字符串的一部分，它将被正确解码。

不知道为什么，但这就是我修复它的方式。

# objective-c - 任何人都可以帮助弄清楚如何使用objective c将文件上传到window azure服务器

> ID：11260076
> 
> 赞同：1
> 
> 时间：2012-06-29T10:23:08.800
> 
> 标签：objective-c, https, nsurlconnection, nsurl

我想使用帐户密钥和帐户名将文件上传到窗口 Azure 存储。任何人都可以帮助我在目标 c 中实现这一目标。

我试过代码

NSString *urlString = :@"https://myaccount.blob.core.windows.net/coretest";

```
NSMutableURLRequest *request = [[[NSMutableURLRequest alloc] init] autorelease];
[request setURL:[NSURL URLWithString:urlString]];
[request setHTTPMethod:@"POST"];
NSString *boundary = [NSString stringWithString:@"0xLhTaLbOkNdArZ"];

//Reading the file
NSString *filePath = @"/Users/rcj/Documents/Xcode.rtf";
NSLog(@"file Path to upload: %@",filePath);
NSData *myData = [NSData dataWithContentsOfFile:filePath];

NSMutableData *body = [NSMutableData data];

[body appendData:[[NSString stringWithFormat:@"\r\n--%@\r\n",boundary] dataUsingEncoding:NSUTF8StringEncoding]];
[body appendData:[[NSString stringWithFormat:@"Content-Disposition: form-data; name=\"userfile\"; filename=\"Xcode.rtf\"\r\n"]      dataUsingEncoding:NSUTF8StringEncoding]];

[body appendData:[[NSString stringWithString:@"Content-Type: application/octet-stream\r\n\r\n"] dataUsingEncoding:NSUTF8StringEncoding]];
[body appendData:myData];
[body appendData:[[NSString stringWithFormat:@"\r\n--%@--\r\n",boundary] dataUsingEncoding:NSUTF8StringEncoding]];

NSDate *now = [[NSDate alloc] init];
NSString *dateString = [self rfc1123String:now];
NSString *AZURE_ACCOUNT_NAME = @"myaccount";
NSString *password = @"xxxxxxxxxxxxxxxxxxxxxxxxxxx==";

[request addValue:[NSString stringWithFormat:@"SharedKey %@:%@",AZURE_ACCOUNT_NAME, password] forHTTPHeaderField:@"Authorization"];

[request addValue:dateString forHTTPHeaderField:@"x-ms-date"];

[request addValue:@"application/atom+xml, application/xml"forHTTPHeaderField:@"Accept"];

[request addValue:@"UTF-8" forHTTPHeaderField:@"Accept-Charset"];

[request setHTTPBody:body]; 

NSLog(@"Headers: %@", [request allHTTPHeaderFields]);

NSLog(@"URL: %@", [[request URL] absoluteString]);
connection =[[NSURLConnection alloc] initWithRequest:request delegate:self];

if(connection) {
    receivedData = [[NSMutableData data] retain];
}

else {
       // Inform the user that the con
 } 
```

感谢 RCJ

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-03T13:18:47.810

我刚刚偶然发现了这个[https://github.com/WindowsAzure/azure-mobile-services#readme](https://github.com/WindowsAzure/azure-mobile-services#readme)，您可以在其中下载[适用于 Azure beta 的 iOS SDK](https://go.microsoft.com/fwLink/?LinkID=266533&clcid=0x409)

# javascript - JQuery 多个 onload 动画循环，带有多个选项卡的错误

> ID：11260078
> 
> 赞同：0
> 
> 时间：2012-06-29T10:23:38.620
> 
> 标签：javascript, jquery, jcarousel

我正在开发的网站上有一个问题，可以在[http://hg.ipagtest.com/](http://hg.ipagtest.com/)上看到它的版本！我将 JQuery 和 JCarosel 用于主页底部的滑块功能，并使用 mien 的前同事编写的一段 JQuery 用于页面顶部的大型图像转换器。页面按预期加载，动画按预期工作！在选项卡之间单击时会出现问题。当我从选项卡上单击并返回它时，似乎动画循环已经失控了！我在 windows 7 上的 Firefox 13 和 chrome 19 中看到了这个问题，据我所知，它不会在 IE9 中发生。

我用此处显示的代码替换了顶部图像转换器上使用的代码... [http://www.queness.com/post/152/simple-jquery-image-slide-show-with-semi-transparent-caption](http://www.queness.com/post/152/simple-jquery-image-slide-show-with-semi-transparent-caption) 我在开发人员上进行了此更改。服务器不在线，所以我无法显示链接。这产生了完全相同的问题。

我意识到这是一个非常具体的问题，但我不知道下一步该做什么。任何指针的帮助将不胜感激

尼尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T11:20:29.903

小备注

代替：

```
.linkdiv {
    color: #FFFFFF;
    font-size: 20px;
    height: 200px;  //
    line-height: 22px;
    padding: 0 0 0 25px;  //
    position: relative;
    text-decoration: none;
    text-indent: 0;
    top: 20px;  //
    width: 225px;  //
} 
```

至：

```
.linkdiv {
    color: #FFFFFF;
    font-size: 20px;
    height: 180px;  //
    line-height: 22px;
    padding: 20px 0 0 25px;  //
    position: relative;
    text-decoration: none;
    text-indent: 0;
    top: 0;  //
    width: 200px;  //
} 
```

# python - python/twisted, twsSite: 安全关机

> ID：11260081
> 
> 赞同：0
> 
> 时间：2012-06-29T10:23:48.953
> 
> 标签：python, service, twisted, shutdown

有

```
class CnxAwareSite(server.Site):
    def __init__(self, *args, **kwargs):
        server.Site.__init__(self, *args, **kwargs)
        self.cnx_cnt = 0

    def buildProtocol(self, addr):
        channel = server.Site.buildProtocol(self, addr)

        def cntCnxMade(f):
            self.cnx_cnt += 1
            print 'new conn', self.cnx_cnt

            return f
        channel.connectionMade = cntCnxMade(channel.connectionMade)

        def cntCnxLost(f):
            def post_wrap(result):
                self.cnx_cnt -= 1
                return result

            return lambda *args, **kwargs: post_wrap(f(*args, **kwargs))
        channel.connectionLost = cntCnxLost(channel.connectionLost)

        return channel
...

site = CnxAwareSite(root)
site.port = reactor.listenTCP(PORT, site) 
```

并安装了触发器，对 site.cnx_cnt 延迟链接到 site.port.stopListening() 执行异步循环检查

```
reactor.addSystemEventTrigger('before', 'shutdown', shutdown, site) 
```

在停止反应堆之前确保服务的“干净关闭”是正确的方法吗？

使用 twistd 对我来说不是一个选择......（叹气）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T16:47:04.913

一般来说，您的想法基本上是正确的*。*您的`shutdown`函数（未显示，因此我无法确定）可以返回 a`Deferred`在任何必要的清理完成时触发。但是，我总是把相关代码做成一个[`IService`](http://twistedmatrix.com/documents/12.1.0/api/twisted.application.service.IService.html)，然后做`reactor.addSystemEventTrigger('before', 'shutdown', myService.stopService)`；这使测试更容易，并且可以在以后将您的服务集成到`twistd`插件服务层次结构中，如果您可以使用这种可能性。

*但是，具体来说*，您不需要仅仅为了停止侦听端口而执行此操作。反应堆将在关闭时自动为您处理。另外：“执行异步循环检查”是什么意思？如果你只是在等待连接计数变为零，那么你应该`Deferred`在它变为零时触发 a，你不应该循环。

（您的代码示例中的更多详细信息将有助于解决其中一些问题。）

# .net - 解压pdf问题

> ID：11260085
> 
> 赞同：0
> 
> 时间：2012-06-29T10:24:14.147
> 
> 标签：.net, pdf

![在此处输入图像描述](../Images/2b06a71c0541cd932fc74f385dbd54fc.png)

当我们解压 pdf 文件时，我们会得到一些奇怪的输出，如图所示。（pdf在notepad++中打开）

我们尝试使用多个库和工具（如 mupdf、pdftk 和我们自己的 .net 应用程序）解压缩它，该应用程序使用 zlib 解压缩所有流。

所有这些选项都给出相同的结果。有人知道如何使它更具可读性吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T16:02:48.970

**是**的，您可以*解压缩*PDF 文件和其中包含的大多数对象。

但是**不**，zlib 不是 PDF 中唯一可以使用的压缩方法。

**不**，并非您成功解压缩的每个对象都必须由简单的 ASCII 字符组成。它们可能仍包含“二进制”、非 ASCII 字符。并且二进制数据（压缩与否）不会通过“解压缩”来转换为 ASCII...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T12:01:49.117

数据需要通过编码映射以使其可读。它将以 WIn 编码（与记事本相同）显示为文本，但不会以其他方式显示 - 为什么您希望它是可读文本？

# asp.net - MVC 4 中的级联下拉列表

> ID：11260086
> 
> 赞同：2
> 
> 时间：2012-06-29T10:24:17.177
> 
> 标签：asp.net, asp.net-mvc, entity-framework, asp.net-mvc-4, cascadingdropdown

我有一个带有 EF 的 ASP.NET MVC 4 项目我有一个带有*Parteners*的表。该表有 2 种类型的合作伙伴：代理（part_type=1）和客户（part_type=2）。在 Create 视图中，我有第一个 DropDownList 显示我的所有代理、一个按钮和第二个 DDL 显示与所选代理对应的所有客户端。Q1：我应该使用什么按钮？, , @Html.ActionLink() ？创建.cshtml

```
 <div class="editor-field">
        @Html.DropDownList("idagenti", ViewData["idagenti"] as List<SelectListItem>, String.Empty)
    </div>
    @*a button*@
    <div class="editor-label">
        @Html.LabelFor(model => model.id_parten, "Client")
    </div>
    <div class="editor-field">
        @Html.DropDownList("id_parten", String.Empty)
        @Html.ValidationMessageFor(model => model.id_parten)
    </div> 
```

OrdersController.cs

```
 public ActionResult Create(int? id) // id is the selected agent
 {
    var agqry = db.partener.Where(p => p.part_type == 1).Where(p => p.activ == true);
    var cltqry = db.partener.Where(p => p.part_type == 2).Where(p => p.activ == true);
    List<SelectListItem> idagenti = new List<SelectListItem>();
    foreach (partener ag in agqry)
    {
       idagenti.Add(new SelectListItem { Text = ag.den_parten, Value = ag.id_parten.ToString() });
    }
    if (id != null)
    {
        cltqry = cltqry.Where(p => p.par_parten == id);
    }
    ViewData["idagenti"] = idagenti;
    ViewBag.id_parten = new SelectList(cltqry, "id_parten", "den_parten");//
 } 
```

**问：**如何将选定的代理 ID 从第一个 DDL 传递到我的控制器？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-29T13:02:39.080

下面的表格是根据选择的性别（男性或女性）显示性别的标题（Mr.代表男性，Mrs.代表女性）的情况。

使用`Ajax.Begin()`帮助程序，您可以回发到控制器并将值返回到视图。

所有数据都是硬编码的，因此请原谅手动添加信息。

**查看 - Form.cshtml**

```
<fieldset>
    <legend>Form</legend>
    @* This will post to the BindTitles method in the Form Controller *@
    @using (Ajax.BeginForm("BindTitles", "Form", new AjaxOptions
    {
        HttpMethod = "POST"
    }))
    {  
        <p>
            @Html.DropDownList("Genders")
        </p>        
        <p>
            <input type="submit" value="Submit" />
        </p>
    }
    <p>
        @Html.DropDownList("Titles")
    </p>
</fieldset> 
```

**控制器 - 表单控制器**

```
 public ActionResult Form()
    {
        List<string> genderList = new List<string>();
        genderList.Add("Male");
        genderList.Add("Female");
        ViewBag.Genders = new SelectList(genderList);
        ViewBag.Titles = new SelectList(new List<string>());
        return View();
    }

    [HttpPost]
    public ActionResult BindTitles(string genders)
    {
        List<string> titles = new List<string>();
        if (genders == "Male")
        {
            titles.Add("Mr.");
            titles.Add("Sr.");
        }
        else
        {
            titles.Add("Ms.");
            titles.Add("Mrs.");
        }
        ViewBag.Titles = new SelectList(titles);
        List<string> genderList = new List<string>();
        genderList.Add("Male");
        genderList.Add("Female");
        ViewBag.Genders = new SelectList(genderList);
        return View("Form");
    } 
```

# iphone - 将图像滑块嵌入 UITableViewCell

> ID：11260087
> 
> 赞同：0
> 
> 时间：2012-06-29T10:24:18.047
> 
> 标签：iphone, image, uitableview, slider

我想将照片滑块添加到 UITableViewCell 中，如 appstore 应用程序描述中所示。有一个带有应用程序屏幕截图的滑块。

我尝试添加一个 EGOPhotoViewController，但我被卡住了。

关于什么是实现它的最佳解决方案的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T10:40:08.963

我会创建一个自定义`UITableViewCell`，其中包含一个`UIScrollView`, 几个`UIImageView`并`pagingEnabled`设置为`YES`.

# java - 在 MATLAB 之外运行 MATLAB 函数时，MatlabControl 中出现异常

> ID：11260095
> 
> 赞同：1
> 
> 时间：2012-06-29T10:24:57.577
> 
> 标签：java, matlab, matlab-deployment

我需要帮助通过[MatlabControl](http://code.google.com/p/matlabcontrol/)在 Java 和 MATLAB 之间进行连接。

首先我想在演练中测试代码，但每次我遇到同样的异常：

myfunc.m：

```
function myfunc()
    disp('hello from MYFUNC')
end 
```

爪哇：

```
class ShowImage {

 public static void main(String[] args)
        throws MatlabConnectionException, MatlabInvocationException
    {
         // create proxy
         MatlabProxyFactoryOptions options =
            new MatlabProxyFactoryOptions.Builder()
                .setUsePreviouslyControlledSession(true)
                .build();
        MatlabProxyFactory factory = new MatlabProxyFactory(options);
        MatlabProxy proxy = factory.getProxy();

        // call builtin function
        proxy.eval("disp('hello world')");

        // call user-defined function (must be on the path)
        proxy.eval("addpath('E:\\vm')");
        proxy.feval("myfunc");
        proxy.eval("rmpath('E:\\vm)");

        // close connection
        proxy.disconnect();

}} 
```

这里有例外：

```
Exception in thread "main" matlabcontrol.MatlabConnectionException: Could not launch MATLAB. Command: [matlab, -r, javaaddpath 'C:\Users\walaa\Desktop\matlabcontrol-4.0.0.jar'; matlabcontrol.MatlabClassLoaderHelper.configureClassLoading(); javarmpath 'C:\Users\walaa\Desktop\matlabcontrol-4.0.0.jar'; matlabcontrol.MatlabConnector.connectFromMatlab('PROXY_RECEIVER_42dd44d9-815e-41ad-bec9-e469718b5710', 2100);]
    at matlabcontrol.RemoteMatlabProxyFactory.createProcess(RemoteMatlabProxyFactory.java:305)
    at matlabcontrol.RemoteMatlabProxyFactory.requestProxy(RemoteMatlabProxyFactory.java:116)
    at matlabcontrol.RemoteMatlabProxyFactory.getProxy(RemoteMatlabProxyFactory.java:134)
    at matlabcontrol.MatlabProxyFactory.getProxy(MatlabProxyFactory.java:81)
    at ShowImage.main(ShowImage.java:19)
Caused by: java.io.IOException: Cannot run program "matlab": CreateProcess error=2, The system cannot find the file specified
    at java.lang.ProcessBuilder.start(Unknown Source)
    at matlabcontrol.RemoteMatlabProxyFactory.createProcess(RemoteMatlabProxyFactory.java:292)
    ... 4 more
Caused by: java.io.IOException: CreateProcess error=2, The system cannot find the file specified
    at java.lang.ProcessImpl.create(Native Method)
    at java.lang.ProcessImpl.<init>(Unknown Source)
    at java.lang.ProcessImpl.start(Unknown Source)
    ... 6 more 
```

我不知道是什么问题，任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T11:25:58.067

我假设您正在使用[此处](https://stackoverflow.com/a/7212651/97160)的示例。显然它已经过测试并且可以工作，只需确保 MATLAB 在 Windows 路径上（错误消息表明它找不到程序“matlab.exe”）

![截屏](../Images/d483130c022c50a229b96b84f00c21c2.png)

# css - 如何用 div 和 css 实现这种布局？

> ID：11260096
> 
> 赞同：1
> 
> 时间：2012-06-29T10:25:11.453
> 
> 标签：css, layout, html

我想设计一个布局非常简单和严格的静态网页。我想用 div 和 css 来实现这一点。

这是一个想法，它应该看起来如何：

```
image HEADING                          -> .... Content continues here 
      teasertext tesertext             Content Content Content Content 
                                       Content Content Content Content 
      Content starts here ... Content  Content Content Content Content 
      Content Content Content Content  Content Content Content Content 
      Content Content Content .....->  Content Content Content Content 

      -----------------    -----------------
      |Large Image 1  |    | Large Image 2 |          Imagedescription
      |               |    |               |          Imagedescription
      |               |    |               |          Imagedescription
      -----------------    -----------------
      image copyright 
```

基本思想是在左侧有一个小图像（红色方块）。页面的其余部分与图像右对齐。首先是标题，然后是预告文本。

内容区域应为固定大小，文本应溢出到右侧区域（如果更大）

之后，我有两张图片，右边有描述，下面有版权。

我以前从未对 css / div 做过任何事情，对我来说最大的问题是如何将内容区域定义为溢出。我已经搞砸了一段时间，无法弄清楚如何做到这一点。

我希望这对于有经验的 Web 开发人员来说是一件容易的事，他可以给我一个提示。

这是我到目前为止所拥有的：

CSS：

```
*.left_area {
    padding:10px;
    text-align:left;
    width:40px; 
    float:left; 
} 

*.right_area {
    padding:10px;
    text-align:left;
    width:90%; 
    float:left; 
} 

*.heading {
    font-family:Tahoma,Arial,Verdana,sans-serif;
    font-size:16px;
    font-weight:bold;
    margin-bottom:10px;
}

*.teaser {
    font-family:Tahoma,Arial,Verdana,sans-serif;
    font-size:12px;
    font-style:italic;
    margin-bottom:10px;
}

*.content {
    width:50%;
    height:20px;
    float:left;
} 
```

html:

```
<html>
<head>
<link type="text/css" rel="stylesheet" href="test.css">
</head>
<body>
<div class="left_area">
    <img src="square.png"  width="16" height="16" />
</div>
<div class="right_area">

    <div class="heading">
    Heading Heading Heading
    </div>

    <div class="teaser">
    Teaser Teaser Teaser Teaser Teaser Teaser
    </div>

    <div class="content">
    Content Content Content Content Content Content Content Content Content Content Content Content Content Content Content Content Content Content Content Content Content Content Content Content Content Content Content Content Content Content Content 
    </div>

</div>

</body> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T11:50:31.817

请参阅[https://developer.mozilla.org/en/CSS/columns](https://developer.mozilla.org/en/CSS/columns) - 我相信这是您格式化`div.content`元素所需要的（或者通常 - 页面的上半部分）。

我不确定您提供的 html 是否真的是您在漂亮的 ascii 图片中绘制的那个。但是大图像似乎很容易格式化。只需将它们全部包装在某个元素中（`div`也许）用`overflow:hidden`- 给它一个 BFC （您可以在*[http://colinaarts.com/articles/the-magic-of-overflow-hidden/](http://colinaarts.com/articles/the-magic-of-overflow-hidden/)**阅读它）*，然后添加`float: left`或只是让它们内联。

一般来说，我会建议类似的 HTML 结构：

```
<div id="textSection">
  <h1>HEADING</h1>
  <p>Teasertext...</p>
  <p>Content...</p>
</div>
<div id="imagesSection">
  <div class="image">
    <img src=".." alt="..">
    <p>Image copyright or something</p>
  </div>
  <div class="image">
    ...
  </div>
  <div class="descriptions">
    <p>Imagedescription...</p>
    ...
  </div>
</div> 
```

适用`columns`于`#textSection`. 适用`overflow:hidden`于`#imageSection`. 如果您希望图像和图像描述表现得像表格单元格，则应用`float:left`到或（或者），只需将它们设为：`#imageSection > *`

```
#textSection {
     -moz-columns: 2;
  -webkit-columns: 2;
          columns: 2;
}
#imagesSection {
  display: table;/* add width, margins and so on */
}
#imagesSection > * {
  display: table-cell;/* add widths, paddings, and so on */
} 
```

我必须承认我没有测试过那个代码，但我希望我没有犯严重的错误:)

# eclipse - Eclipse Juno 在 OS X Lion 上的打字延迟

> ID：11260099
> 
> 赞同：8
> 
> 时间：2012-06-29T10:25:15.410
> 
> 标签：eclipse, macos, editor, lag

我猜这主要是为了提高认识并促进 Eclipse 团队中的某些错误。

环境：

*   MacOSX 10.7.4 -Eclipse Juno final 64bit
*   Core2Duo MacBookPro 2009
*   SSD主高清。
*   使用 Java 6 SDK（Apple Update 的最新版本）

似乎在相当大的 Java 源文件（1-2klines）上，在任何地方键入任何代码都会导致

*   1) 极端 CPU 负载（峰值）
*   2）打字很滞后

我曾尝试禁用自动完成、行打印和其他功能，减少或增加 eclipse.ini 上的内存设置，但没有任何解决方法。

还有其他人有同样的问题吗？

Eclipse Bugzilla 搜索[查询](https://bugs.eclipse.org/bugs/buglist.cgi?quicksearch=typing%20lag)。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-15T11:31:06.190

我在 Windows 7 上也注意到了这一点。我检查了我的任务管理器，eclipse 正在从内存中分页。编辑`eclipse.ini`文件（在 eclipse 可执行文件旁边）。我将内存限制提高到：

```
-Xms1024m
-Xmx2048m 
```

根据您的机器有多少 RAM，您可以先尝试

```
-Xms512m
-Xmx1024m 
```

我有 16GB 的 RAM，所以我更高了。

它帮助了我，希望它也适用于你。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T17:43:18.663

感谢您的输入...

我很确定你所看到的大部分是由

[https://bugs.eclipse.org/bugs/show_bug.cgi?id=389019](https://bugs.eclipse.org/bugs/show_bug.cgi?id=389019)

这导致我们在每个字符上执行一些非常重量级的代码。它已修复（截至 2012 年 9 月 20 日）并将在 4.2.2 中提供。如果您想测试看看这是否能解决您的问题，它可以在该日期之后的任何“M”版本中使用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-23T12:17:35.333

我也有同样的问题。如果我关闭控制台窗口（无论如何都不起作用？！）并重新启动 Eclipse，滞后就会消失。

我的运行/调试配置窗口和子剪辑提交/更新窗口也不起作用。

# unicode - 使用 Javascript 和 gjs 的 Unicode 文件 I/O？

> ID：11260100
> 
> 赞同：4
> 
> 时间：2012-06-29T10:25:15.697
> 
> 标签：unicode, gnome, gnome-3, gio, gjs

任何人都可以给出如何使用**Javascript**和[**Gjs**](https://live.gnome.org/Gjs/ "吉斯")**读/写Unicode**文本文件的任何工作示例，可能使用 Gio 和/或 Glib？我在 Javascript 方面经验丰富，但这些 API 对我来说仍然是陌生的，而且是相当新的技术，谷歌搜索并没有多大帮助。**[](https://live.gnome.org/Gjs/ "吉斯")**

 ****我看过这个：[https](https://live.gnome.org/Seed/Tutorial/Simple_file_io) ://live.gnome.org/Seed/Tutorial/Simple_file_io ，但它是基于种子的（不是 Gjs），而且看起来很旧。我收到错误（例如第 9 行 Gio.read 上的参数太少），因此无法使用 Unicode 文本进行测试。

一个工作片段会很有帮助。谢谢！

**更新**：我正在 Ubuntu 12.04 64 位上进行测试。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T02:21:53.237

要大致了解一下，您可以查看[gjs 源代码存储库](http://git.gnome.org/browse/gjs/tree)中的示例[gio-cat.js](http://git.gnome.org/browse/gjs/tree/examples/gio-cat.js)。

您还可以查看“[如何开始编写 Gnome Shell 扩展](https://stackoverflow.com/a/8305423/278878)”的答案，其中包含一些可以帮助您的链接。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-01-29T15:18:22.063

如果不介意同步读取文本文件，可以使用 GLib 的辅助函数[GLib.file_get_contents(String fileName)](https://people.gnome.org/~gcampagna/docs/GLib-2.0/GLib.file_get_contents.html)：

```
const GLib = imports.gi.GLib;
//...
let fileContents = String(GLib.file_get_contents("/path/to/yourFile")[1]); 
```****

# java - 在java中将对象声明为final

> ID：11260102
> 
> 赞同：17
> 
> 时间：2012-06-29T10:25:23.493
> 
> 标签：java, oop, final

有人可以澄清以下代码的重要性。

```
class A
{
    int i = 10;

    public void setI(int b)
    {
        i = b;
    }

    public int getI()
    {
        return i;
    }
}

class Test
{    
    public static void main(String args[]) throws Throwable
    { 
        final A ob = new A();
        ob.setI(10);
        System.out.println(ob.getI());
    }
} 
```

对象 A 被声明为 final，但我可以更改该对象的实例变量的值并检索更新后的值。那么将一个对象声明为 final 有什么意义呢？我知道将原始数据类型声明为 final，这使得该变量保持不变。

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-06-29T10:26:18.607

ob 将无法引用任何其他对象：[final 关键字](http://en.wikipedia.org/wiki/Final_%28Java%29)。

它不能被重新分配。但是您可以更改它的内部结构（如果它最初是可变的，它是可变的）。所以这有效：

```
 final A ob = new A();
  ob.setI(6) 
```

但这不是：

```
 final A ob = new A();
  ob = new A(); 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-06-29T11:26:03.440

如果您指示任何变量是最终的，则意味着您不希望它包含在内存中的值发生变化。在原始类型的情况下，由变量表示的值是实际值。在对象类型的情况下，内存中的值是对对象的引用，而不是实际对象。

例如，您有：

```
final int x = 7;
final Object y = new Object(); 
```

您可以这样认为数据在内存中表示：

```
+----------+----------+
|  block   |  value   |
+----------+----------+
|  1001    |    7     |
|  1002    |  2110    |
+----------+----------+ 
```

为了便于讨论，让我们省略 Java 实际如何管理内存的细节（因为我对此也不太了解）。因此，在上面的示例中，块 1001 由变量 x 表示，而 1002 由 y 表示。两者都是最终变量，这意味着它们所代表的值不能更改。在 x 的情况下，它是 7，这是实际值，但在 y 的情况下，2110 只是对另一个内存位置的引用。两者都不能改变，但原始类型变量成为*常量*的原因是它们代表实际值。但实际上，您也可以对对象类型变量说同样的话，只是它们所代表的*常量*是引用。所以*final*关键字在这方面几乎是一致的。

因此，对于最终变量，如果它们是原始类型，它们将不断地表示您设置它们的任何特定值。如果它们是对象/引用类型，它们将不断指向您指向它们的任何对象（无论对象的可变性如何）。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-06-29T10:28:19.833

这意味着以下情况是不可能的：

```
final A ob = new A();
ob = new A(); // This is not possible 
```

该变量`ob`还将引用`A`首先分配给它的类的实例。在这种情况下，这就是`final`关键字的含义。这确实意味着您可以修改 的属性，`ob`因为它是一个普通对象，就像 . 的任何其他实例一样`A`。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-06-29T10:27:47.180

如果一个对象是`final`您可以像往常一样调用任何进行内部更改的方法，但您不能重新分配引用以指向不同的对象。尝试这样做：

```
final A ob = new A();
ob = new A(); 
```

并注意代码不会编译。

将此视为一个恒定的参考。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-06-29T10:28:31.900

好吧，在对象的情况下，引用的值是对象的地址。所以**ob**的值将是最终创建的对象的地址`new A();`，您将无法更改其值。意思是，您不能为此引用分配新对象。

你不能这样写。

```
final A ob = new A();

ob= new A(); // not allowed 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-06-29T10:27:38.927

在java中，与C++相反，所有对象都是指针，所以一个`final`对象是可以改变的，它只是不能指向任何新的地方，也就是说，你不能把它放在赋值运算符的左边。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-06-29T11:08:16.000

java中不会有任何常量（最终）对象。对象是在堆内存区域中创建的。我们可以随时修改对象。
java中只有常量（最终）引用：-意味着您不能修改引用并将其重新分配给任何其他对象，因为它是常量，并且最终引用仅指一个正在分配的对象宣言。

所以 ：

```
 final A objectA = new A();
 objectA.setI(6); 
```

是有效的，因为我们只更改对象内容，而不是引用。

但：

```
 final A objectA = new A();
   objectA = new A(); 
```

无效，因为您正在尝试修改引用。

# widget - 自动将小部件添加到我的启动器屏幕

> ID：11260105
> 
> 赞同：3
> 
> 时间：2012-06-29T10:25:30.013
> 
> 标签：widget, system, launcher

我打算在我的启动器屏幕上放置一些小部件，而不需要用户从小部件列表中进行选择。我google了一下，发现这个操作需要绑定appWidgetId到AppWidgetInfo，只有BIND_APPWIDGET权限才可以。即此操作只能在系统应用程序中进行（但我的启动器不是）。我的发现正确吗？

但我发现在 GO Launcher 中，下载安装后，它的所有小部件都可以自动放在启动器屏幕上。GO Launcher 及其小部件不应是系统应用程序。关于 GO Launcher 如何实现自动添加到主屏幕的小部件的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-14T04:28:44.383

试试这个： [在这里回答](https://stackoverflow.com/questions/9999584/android-adding-appwidgets-to-an-activity/11464789#11464789)

唯一的问题仍然是添加的小部件不会响应点击。

在此处跟踪答案以获得解决方案： [通过代码重新添加时小部件不响应](https://stackoverflow.com/questions/11470189/widgets-dont-respond-when-re-added-through-code)

# android - 图片未在 Tumblr 中发布

> ID：11260107
> 
> 赞同：0
> 
> 时间：2012-06-29T10:25:32.503
> 
> 标签：android, tumblr

[我使用了链接https://github.com/FredrikL/android-ttTumblr](https://github.com/FredrikL/android-ttTumblr)中提到的代码。当我使用此代码时，它已成功登录，之后我尝试发布图像或文本或引用或视频，不会发布任何内容。我不明白为什么会发生。任何人都可以解释为什么它不会发布。我的一个应用程序需要 Tumblr。在我的应用程序中，我必须发布图像和文本。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-08-12T07:20:53.900

我使用从 github 下载的 Tumblr 示例发布图像和文本。

查看[我的答案](https://stackoverflow.com/questions/24867481/how-to-post-image-or-text-in-tumblr-android/25073702#25073702)了解更多详情。

而且，它有效！

# c# - 德语 UI 文化 de-DE 十进制更改为 asp.net 中的逗号值问题

> ID：11260111
> 
> 赞同：5
> 
> 时间：2012-06-29T10:25:45.323
> 
> 标签：c#, asp.net

我在我的 asp.net 应用程序中使用德语 UI 文化。我正在根据下拉列表中选择的语言更改我的应用程序的 UI 文化，在下拉选择的索引更改上我正在使用此代码

```
Thread.CurrentThread.CurrentCulture = new CultureInfo(this.lstLanguage.SelectedValue);
Thread.CurrentThread.CurrentUICulture = new CultureInfo(this.lstLanguage.SelectedValue); 
```

下拉菜单如下

```
<asp:DropDownList cssClass="ddllanguage" ValidationGroup="b" runat="server" ID="lstLanguage" AutoPostBack="True"  OnSelectedIndexChanged="LstLanguage_SelectedIndexChanged" meta:resourcekey="lstLanguage">                    
  <asp:ListItem Value="en-US" Text="English" meta:resourcekey="ListItemResource2" ></asp:ListItem>
  <asp:ListItem Value="de-DE" Text="Deutsch" meta:resourcekey="ListItemResource3"></asp:ListItem>
</asp:DropDownList> 
```

我的问题是在将语言更改为 de-DE 后，我的应用程序中的所有十进制值都被更改为逗号，所有像 5.12 这样的十进制数都变成了 5,12，所有十进制值都被更改为逗号。如何在没有逗号的情况下获取十进制值。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-29T10:29:14.413

`Thread.CurrentUICulture`旨在用于用户界面，它是用于显示文本、方向等的语言。
`Thread.CurrentCulture`旨在用于解析/格式化内容。日期和时间、数字和字符串比较（例如）。

如果您只想更改 UI 语言（并使其他所有内容与您的 Web 服务器的文化保持一致），您只需修改`Thread.CurrentUICulture`.

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-29T10:32:43.713

您可以根据以下代码更改数字格式信息

```
Thread.CurrentThread.CurrentCulture.NumberFormat.NumberDecimalSeparator = "."; 
```

尝试下面的代码来根据文化解析十进制值。

```
string str = "50,3";
Thread.CurrentThread.CurrentCulture = new CultureInfo("de-DE");
double d = double.Parse(str, Thread.CurrentThread.CurrentCulture.NumberFormat); 
```

它给出结果 d = 50.3

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-06-29T10:29:04.293

> 在德国文化中，十进制由“，”表示
> 
> 德国文化使用“。” 作为组分隔符和“，”作为小数分隔符

参考[维基链接](http://en.wikipedia.org/wiki/Decimal_mark)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-29T16:20:00.563

这种行为对于德语是正确的。但是，您可能想要使用 . 当序列化为 XML、插入数据库等时，您可以使用不变的文化进行格式化。您可以在以下链接中了解有关 Invariant Culture 的更多信息： [CultureInfo.InvariantCulture 是什么意思](https://stackoverflow.com/questions/9760237/what-does-cultureinfo-invariantculture-mean-in-c-sharp)

# ruby-on-rails - 嵌套模型，update_attributes 不起作用

> ID：11260112
> 
> 赞同：0
> 
> 时间：2012-06-29T10:25:54.037
> 
> 标签：ruby-on-rails, nested-forms, update-attributes

我很难理解我认为是教科书更新示例的内容。搜索SO但找不到答案。简而言之，当我单击提交时，配置文件模型中的 user_id 会被清除，并且不会保存其他数据。我正在使用 Rails 3.2.2。

这是我所拥有的...

用户模型...

```
class User < ActiveRecord::Base
  attr_accessible :email, :password, :password_confirmation, :profile_attributes
  has_one :profile
  accepts_nested_attributes_for :profile
end 
```

轮廓模型...

```
class Profile < ActiveRecord::Base
  validates :first_name, :presence => true
  validates :last_name, :presence => true
  belongs_to :user
  attr_accessible :first_name, :last_name
end 
```

用户控制器...

```
class UsersController < ApplicationController

  def new
    @user = User.new
    @user.accounts_users.build()
    @user.build_profile()

    respond_to do |format|
      format.html # new.html.erb
      format.json { render json: @user }
    end
  end

  def edit
    @user = User.find(params[:id])
  end

  def update
    @user = User.find(params[:id])
    respond_to do |format|
      if @user.update_attributes(params[:user])
        format.html { redirect_to @user, notice: 'Profile was successfully updated.' }
        format.json { head :no_content }
      else
        format.html { render action: "edit" }
        format.json { render json: @user.errors, status: :unprocessable_entity }
      end
    end
  end    
end 
```

嵌套形式...

```
<%= form_for @user, :validate => true do |f| %>
  <%=  f.fields_for :profile do |p| %>
    <fieldset>
      <div class="field">
        <%= p.label :first_name %>
        <%= p.text_field :first_name %>
      </div>
      <div class="field">
        <%= p.label :last_name %>
        <%= p.text_field :last_name %>
      </div>
  <% end %>
      <div class="field">
        <%= f.label :email %>
        <%= f.text_field :email %>
      </div>
      <div class="actions">
        <%= f.submit 'Edit Profile', :class => "btn btn-large btn-success" %>
        <%= cancel %>
      </div>
    </fieldset>
<% end %> 
```

编辑：我编辑了 UsersController 以包含新操作。为什么新操作会影响编辑/更新操作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T13:05:47.917

我之前也遇到过类似的问题。我们可以查看您的`new`操作代码吗？你`@user.build_profile`在里面（正下方`@user = User.new`）吗？或者`new`操作是否正常？

# maven - axis2、Maven 和 IntelliJ

> ID：11260113
> 
> 赞同：1
> 
> 时间：2012-06-29T10:25:59.920
> 
> 标签：maven, intellij-idea, axis2

我正在尝试使用axis2 为Web 服务客户端生成Java 类。我不断收到无法解析符号'wsname_ServiceStub' java 文件没有被拾取。同时，同一目录中的 java 文件的“wsname_ServiceCallbackHandler”正在被拾取，我可以从项目的其余部分中引用它。

由于某种原因，该文件显示为“非类文件”

我正在使用 IntelliJ 11.1.2 和 Maven 2.2.1

```
<?xml version="1.0" encoding="UTF-8"?>
<project xmlns="http://maven.apache.org/POM/4.0.0"
         xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
    <modelVersion>4.0.0</modelVersion>

    <groupId>AnotherWS</groupId>
    <artifactId>AnotherWS</artifactId>
    <version>1.0</version>

    <dependencies>

        <dependency>
            <groupId>junit</groupId>
            <artifactId>junit</artifactId>
            <version>4.6</version>
        </dependency>

        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-context</artifactId>
            <version>3.0.3.RELEASE</version>
        </dependency>

        <dependency>
            <groupId>org.apache.axis2</groupId>
            <artifactId>axis2</artifactId>
            <version>1.6.2</version>
        </dependency>

        <dependency>
            <groupId>org.apache.ws.commons.axiom</groupId>
            <artifactId>axiom-api</artifactId>
            <version>1.2.13</version>
        </dependency>

        <dependency>
            <groupId>axis</groupId>
            <artifactId>axis-wsdl4j</artifactId>
            <version>1.5.1</version>
        </dependency>

    </dependencies>

    <build>
        <pluginManagement>
            <plugins>
                <plugin>
                    <groupId>org.apache.maven.plugins</groupId>
                    <artifactId>maven-idea-plugin</artifactId>
                    <version>2.2</version>
                </plugin>
            </plugins>
        </pluginManagement>
        <plugins>
            <plugin>
                <artifactId>maven-compiler-plugin</artifactId>
                <configuration>
                    <source>1.6</source>
                    <target>1.6</target>
                </configuration>
            </plugin>
            <plugin>
                <groupId>org.apache.axis2</groupId>
                <artifactId>axis2-wsdl2code-maven-plugin</artifactId>
                <version>1.6.2</version>
                <configuration>
                    <!--<generateTestcase>true</generateTestcase>-->
                    <!--<outputDirectory>${project.build.directory}/generated-sources</outputDirectory>-->
                    <packageName>wsname</packageName>
                    <wsdlFile>src/main/resources/wsname.wsdl</wsdlFile>
                    <!--<generateAllClasses>true</generateAllClasses>-->
                </configuration>
                <executions>
                    <execution>
                        <phase>generate-sources</phase>
                        <goals>
                            <goal>wsdl2code</goal>
                        </goals>
                    </execution>
                </executions>
            </plugin>
        </plugins>
    </build>

</project> 
```

# c# - 如何建立拨号上网

> ID：11260115
> 
> 赞同：2
> 
> 时间：2012-06-29T10:26:03.087
> 
> 标签：c#, networking, windows-7, usb, modem

我有一个 Nokaia 3G USB 调制解调器（棒），我想以编程方式打开和关闭它。

此调制解调器将自身安装在 Windows 7 中，仅作为另一个网络适配器 - 没有添加新的调制解调器。

因为没有添加调制解调器，所以我不能使用 RAS 从代码建立连接，就像我可以（并且确实）使用许多其他 3G USB 调制解调器棒一样。

在“网络连接”窗口中，网络适配器看起来像一个**WLAN**适配器（您知道，图标中有那些“信号强度条”），通过右键单击它，我可以交互地执行连接/断开操作。

但是我怎样才能用这个调制解调器**从代码中建立连接呢？**我敢肯定一定有一个简单的方法......？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T10:34:17.360

您真正要问的是，如何启用或禁用网络连接。[您可以使用 WMI 执行此操作，如此SO question](https://stackoverflow.com/questions/8244496/c-sharp-programmatically-disconnect-network-connectivity)中所示，使用[Win32_NetworkAdapter](http://msdn.microsoft.com/en-us/library/windows/desktop/aa394216%28v=vs.85%29.aspx)类的适当方法启用或禁用卡。您可以通过读取 NetConnectionStatus 属性来检查但不能更改连接状态。

在您的情况下，您可能应该使用如下查询：

```
"SELECT * FROM Win32_NetworkAdapter WHERE Manufacturer == 'Nokaia' " 
```

或任何实际的制造商名称。不能保证按名称进行查询，因为用户可以更改连接的名称。

另请查看 Technet 上的“[我如何判断是否连接了无线网络](http://blogs.technet.com/b/heyscriptingguy/archive/2007/08/20/how-can-i-tell-if-a-wireless-network-adapter-is-connected-to-the-network.aspx)”，以更全面地描述如何使用 Win32_NetworkAdapter。

# .htaccess - (.htaccess) 301 重定向具有相同的 url 结构

> ID：11260118
> 
> 赞同：0
> 
> 时间：2012-06-29T10:26:10.873
> 
> 标签：.htaccess, redirect

我使用从非 WWW 到 WWW 域的 301 重定向！工作正常，但链接不同。

例子：

```
from - ggkj.com/posts/godzilla/43
to - www.ggkj.com/index.php?view=posts&author=godzilla&aid=43 
```

我的 .htaccess 301 重定向代码：

```
RewriteEngine On
RewriteBase /
RewriteCond %{HTTP_HOST} !^www\.example\.com [NC]
RewriteRule ^(.*) http://www.example\.com/$1 [L,R=301] 
```

.ht 访问代码： http: [//pastebin.com/t3FA59uq](http://pastebin.com/t3FA59uq)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T19:37:28.303

这是我目前在我的网站上成功使用的：

```
Options +FollowSymlinks
RewriteEngine On
RewriteCond %{http_host} !^www.walterbax.ca [NC]
RewriteRule ^(.*)$ http://www.walterbax.ca/$1 [R=301,L] 
```

编辑：在进一步研究您的问题后，我可以告诉您您的问题未正确放置在文件中。它必须符合另一个将其重写为 URL 变量的规则。

我将从 www 的基本 htaccess 开始。测试规则并从那里添加到它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T10:43:18.700

尝试这个：

```
RewriteEngine On
RewriteCond %{HTTP_HOST} ^yourdomain.com$
RewriteRule ^(.*)$ http://www.yourdomain.com/$1 [R=301,L] 
```

# ruby - SASS 覆盖不停止

> ID：11260121
> 
> 赞同：1
> 
> 时间：2012-06-29T10:26:20.630
> 
> 标签：ruby, sass

我安装 ruby​​，然后安装 sass。然后输入`sass`--watch ruby​​.scss:test.css

格式已制作，但此错误也显示

```
"Listen has fallen back to polling" and won't watch 
```

所以更新到新版本**3.2.0.alpha.247**就没有了^_^。

但是在更新之前和文件被覆盖之后，当我保存 ruby​​.scss 文件时，它会继续覆盖文件

```
overwrite test.css
overwrite test.css
overwrite test.css
overwrite test.css
overwrite test.css
overwrite test.css
overwrite test.css
... Infinite Loop 
```

并阻止它`ctrl+c`

任何想法如何解决这一问题 ？

# android - 空指针异常：用于 ICS 4.0 的 android 中自定义画廊的 GestureDetector.onTouchEvent

> ID：11260127
> 
> 赞同：3
> 
> 时间：2012-06-29T10:26:31.040
> 
> 标签：android, nullpointerexception, gallery, android-4.0-ice-cream-sandwich

在我的一个 android 应用程序中，我使用自定义图库在图库中显示图像。（我正在使用自定义画廊以便在交换画廊时一次显示 1 个项目）

这是我用于自定义画廊的代码：

```
public class CustomGallery extends Gallery {

     public CustomGallery(Context context) {
            super(context); 
        }

        public CustomGallery(Context context, AttributeSet attrs) {
            super(context, attrs);
        }

        public CustomGallery(Context context, AttributeSet attrs, int defStyle) {
            super(context, attrs, defStyle);
        }

    private boolean isScrollingLeft(MotionEvent e1, MotionEvent e2) {
        return e2.getX() > e1.getX();
    }

    @Override
    public boolean onFling(MotionEvent e1, MotionEvent e2, float velocityX,
            float velocityY) {
        int kEvent;
        if (isScrollingLeft(e1, e2)) { // Check if scrolling left
            kEvent = KeyEvent.KEYCODE_DPAD_LEFT;
        } else { // Otherwise scrolling right
            kEvent = KeyEvent.KEYCODE_DPAD_RIGHT;
        }
        onKeyDown(kEvent, null);
        return true;

    }
} 
```

上面的代码工作正常 2.2,2.3 等....但它**在 ICS 4.0 中崩溃导致空指针异常 GestureDetector.onTouchEvent**。

请帮忙 。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-05-26T17:14:56.580

我有同样的零星问题。`MotionEvent`传递给 override方法的两个参数`onFling`有时为 null，调用`e2.getX()`会引发异常。您可以通过像这样启动 onFling 方法来解决此问题：

```
if (e1 == null || e2 == null) return false; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T12:41:59.453

我只在 ICS4.0 上遇到了同样的问题——我在用户点击一个项目时`Gallery` `View`打开了一个——它总是给但只在 ICS4 上——我最终做了以下事情：`Activity``TabHost``Gallery``NullPointerException`

```
//flag returned by onTouch event always false except when we are about to start activity
boolean flag = false;
//add a touch listener
myGallery.setOnTouchListener(new OnTouchListener() {
@Override
    public boolean onTouch(View v, MotionEvent event) {
        return flag;
    }
});

myGallery.setOnItemClickListener(new OnItemClickListener() {
    //handle clicks

    //set flag returned by touch listener to true
    flag = true;

    //now add logic to open up the activity
 } 
```

异常现在已在 ICS4 上进行。

# jquery - 如何为隐藏面板创建自定义动画

> ID：11260128
> 
> 赞同：-1
> 
> 时间：2012-06-29T10:26:36.650
> 
> 标签：jquery, jquery-animate

我在页面中有一些面板（如 Visual Studio），我希望当用户单击按钮时隐藏此面板，![在此处输入图像描述](../Images/85cdd77978b18e90a6aa40d4b50b5447.png) 当用户单击带有动画的 + 图标工具箱时，像 Visual Studio 一样隐藏此面板并隐藏到左侧并隐藏。我想设计这个动画。谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T10:39:26.157

我想你正在寻找这样的[东西](http://aext.net/example/slide-panel-jquery/)？

# java - 如何检查 jUnit 中的文件？

> ID：11260131
> 
> 赞同：0
> 
> 时间：2012-06-29T10:26:55.483
> 
> 标签：java, testing, junit

我需要使用 JUnit 进行一些测试。我的方法返回 java.io.File。我需要检查哪些属性？

*   检查文件大小？
*   检查文件名？
*   查看 ...？

您如何为使用文件的方法编写 JUnit 测试？有没有框架？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-29T10:43:57.190

> 方法返回 java.io.File。检查它的最佳方法是什么？

没有“最好的方法”。这完全取决于文件应该包含的内容以及您需要测试的内容。

在不同的情况下，我可能会测试：

*   `File`参数是非空的，
*   由 编码的文件路径`File`具有给定值，
*   对应的文件存在，
*   相应的文件具有给定的长度或行数，
*   相应的文件包含给定的字符串（或字符串）或模式（模式），
*   文件内容与预期输出的文件完全匹配，
*   文件内容解析为与另一个文件相同的数据结构，或
*   文件内容解析为一些其他属性的数据结构。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-29T10:44:51.027

如果您想创建一些临时文件来运行测试，那么您应该尝试使用`TemporaryFolder`.

[这](http://garygregory.wordpress.com/2010/01/20/junit-tip-use-rules-to-manage-temporary-files-and-folders/)是一个例子。

这是一种使用必要文件准备测试的方法。

但这一切都归结为您真正想做的事情，而您的问题并没有真正提供很多线索...

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-29T10:34:43.647

每个测试都必须基于要求。例如，可以声称该方法返回可以安全创建的不存在文件的名称 - 单元测试必须检查确实没有这样的文件：

```
assertTrue(!file.isDirectory() && !file.canRead()) 
```

当需求告诉您返回的文件是具有某些属性的文件时，您必须检查确切声明的属性。例如，根据位置 3 的要求，您会发现符号“@”。所以你的测试应该检查：

1.  文件确实存在，可以读取
2.  位置 3 确实包含预期的符号

# ios - 如何在导航控制器中推送 UIViewController 之前关闭键盘

> ID：11260132
> 
> 赞同：0
> 
> 时间：2012-06-29T10:26:58.243
> 
> 标签：ios, uitextfield, uitableview, uialertview

我的视图包含`UITableViewController`可以`UITextFields`输入一些文本的位置。`UITableView`我在键盘出现/消失时调整高度。它工作得很好。

现在我`UIAlertView`有了`UITextField`。`UITextField`用户在in &中输入文本，`UIAlertView`当按下 Ok 时，我按下另一个 `UIViewController`. 问题是当我回到视图时它被搞砸了。原因是`KeyboardWillHide`通知永远不会被触发，因此 tableView 的高度是应用程序框架高度 - 键盘高度。

有什么修复它的建议吗？我打电话给`[resignFirstResponder]` 但`- (void)alertView:(UIAlertView *)actionSheet clickedButtonAtIndex:(NSInteger)buttonIndex`没有帮助。我什至用力打电话`KeyboardWillHide`，但这也无济于事。

有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-30T08:36:39.683

我在 viewWillDisappear 中调用 removerObserver。viewWillDisappear 在keyboardWillHide 被调用之前被调用。解决方案是将 removeObserver 移至 viewDidDisappear。那成功了。

# eclipse - eclipse无法自动生成makefile

> ID：11260133
> 
> 赞同：3
> 
> 时间：2012-06-29T10:27:08.330
> 
> 标签：eclipse, makefile

我的操作系统是 Ubuntu12.04 64bit，我从这个站点下载了 c/c++ 的 eclipse：http: [//www.eclipse.org/downloads/download.php? file=/technology/epp/downloads/release/juno/R /eclipse-cpp-juno-linux-gtk-x86_64.tar.gz](http://www.eclipse.org/downloads/download.php?file=/technology/epp/downloads/release/juno/R/eclipse-cpp-juno-linux-gtk-x86_64.tar.gz) 运行 eclipse 时，如果灰色，我发现“自动生成 Makefiles”复选框，但我希望 eclipse 自动生成 makefile。谢谢你的帮助。 ![在此处输入图像描述](../Images/652764088687b95dcfc4b5eeaec399a5.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T13:49:19.073

我认为这是因为您在创建项目时选择的项目类型。不要选择 makefile 项目（在这种情况下，您必须提供自己的 makefile），而是选择其他选项之一。

# css - CSS 多输入[类型] 选择器

> ID：11260135
> 
> 赞同：46
> 
> 时间：2012-06-29T10:27:13.770
> 
> 标签：css

根据 W3 CSS 规范，类似：`input[type~="text password"]`应该选择类型设置为“文本”或“密码”的输入字段，但它不起作用！我误解了这条线吗？

> E[foo~="warning"] 匹配任何“foo”属性值为空格分隔值列表的 E 元素，其中一个值正好等于“warning”。

[CSS 规范源](http://www.w3.org/TR/CSS2/selector.html#pattern-matching)，它是表格中倒数第四个。

* * *

## 回答 #1

> 赞同：69
> 
> 时间：2012-06-29T10:35:48.793

是的，你搞错了。选择器是*在*空格分隔的列表中搜索..即

`<element attribute="text password" />`

你可以找到使用：

`element[attribute~="text"]`

这样做的好处是它不应该匹配：

`<element attribute="textual password" />`

希望有帮助吗？

要实现您实际尝试做的事情会更加冗长：

`input[type="text"], input[type="password"]`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2019-01-12T07:39:20.677

请按照以下说明操作：

html:

```
<div class="contact-form">
        <label for="">Name</label>
        <input type="text">

        <label for="">Email</label>
        <input type="email">

        <label for="">Subject</label>
        <input type="text">

        <label for="">Message</label>
        <textarea></textarea>

        <input type="submit" value="Send">

    </div> 
```

CSS：

```
.contact-form input[type="text"], input[type="email"]{
    width:100%;
    box-sizing:border-box;
    border:1px solid black;
    padding:5px;

}
.contact-form input[type="submit"]{
    display:block;
    color:black;
    background-color:white;
    border:1px solid black;
    border-radius:10px;
    margin-top:10px;
    padding:10px;
    cursor:pointer; 
    margin:auto;
    margin-top:20px;
} 
```

我希望你能理解。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-29T10:37:19.263

你读错了。`E[foo~="warning"]`将选择任何警告它的元素以空格分隔的列表。像这样：`<el foo="test warning etc" />`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-02-19T00:01:07.430

我试过`input{property: ....}`了，它奏效了。

**例如** `input{border: 3px solid red;}`

# java - 如何启动 jboss 7.1.1 服务器并在 jboss 7.1.1 中部署项目

> ID：11260137
> 
> 赞同：5
> 
> 时间：2012-06-29T10:27:14.153
> 
> 标签：java, jakarta-ee, jboss

我使用 JBoss 7 服务器，所以我下载了 JBoss 7.1.1 版本并解压缩了这个 zip 文件。

然后我转到 bin 文件夹并双击，`standalone.bat`但新的 cmd 窗口在 2 -3 秒内打开和关闭。

如果我使用 cmd 运行它，我会得到：

```
E:\jboss-as-7.1.1.Final\bin>standalone.bat
Calling "E:\jboss-as-7.1.1.Final\bin\standalone.conf.bat" 
```

然后它停止。

所以 JBoss 服务器没有启动。

如何在 Window 7 上运行 JBoss 服务器并在其中部署项目？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-30T06:22:03.290

在您的系统属性环境变量中提供 JAVA_HOME 环境变量，如下所示；

```
C:\Program Files\Java\jdk1.7 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-29T11:31:33.540

在您的系统属性环境变量中提供 JBOSS_HOME 环境变量，如下所示；

```
 E:\jboss-as-7.1.1.Final 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-26T07:06:44.370

您可以尝试将您的 Java 放在“程序文件”之外。有时命令会因为路径中的空间而失败。就像您的 JAVA_HOME 路径设置为“C:\Program Files\Java”一样，因此它可能会失败。

请尝试将 Java 文件夹直接放在 C:\ 下，并以类似的方式设置 JAVA_HOME 变量（不带 bin）和 JBOSS_HOME 变量（不带 bin）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-29T10:32:42.820

您是否尝试过右键单击“cmd”和“以管理员身份运行”？然后 cd 到该文件夹​​并在那里运行它...

还是右键单击bat文件并“以管理员身份运行”？

我认为通常在 Windows 7 中启动服务器需要管理员权限。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-10T12:36:58.237

它解决了。将 java_home 更改为 c:\java\jdk1.6.0_23 并将 java_home 环境变量设置为该路由

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-30T17:22:17.627

如上所述，您需要同时添加 JBOSS_HOME 和 JAVA_HOME。

# web - 为网页中的弹出窗口创建键盘快捷键php

> ID：11260140
> 
> 赞同：0
> 
> 时间：2012-06-29T10:27:25.480
> 
> 标签：web, popup, keyboard-shortcuts

当用户按下键盘快捷键时，我需要激活一个弹出窗口。你能告诉我这是怎么做到的吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T10:34:25.960

这将是一个 javascript 函数。看看 onkeypress 或 onkeyup。

最好的选择可能是 jQuery：

```
$(document).keyup(function(e) {
  if (e.keyCode == x) {
    //do something, i.e. alert('popup');
  }
});

A few of the key codes:
Enter       13
Up arrow    38
Down arrow  40
Left arrow  37
Right arrow 39
Escape      27
Spacebar    32
Ctrl        17
Alt     18
Tab     9
Shift       16
Caps-lock   20
Windows key 91
Backspace   8
Home        36
End     35
Insert      45
Delete      46 
```

# android - 在设置 NDK 之前我还需要做什么？

> ID：11260144
> 
> 赞同：1
> 
> 时间：2012-06-29T10:27:41.267
> 
> 标签：android, android-ndk

我已经在这个网站上设置 NDK 几天了，但仍然无法正常工作：http: [//psrdotcom.blogspot.fr/2011/12/android-ndk-jni-windows -xp7-with-3264.html](http://psrdotcom.blogspot.fr/2011/12/android-ndk-jni-windows-xp7-with-3264.html)。

我坚持使用“javah”命令，但认为它必须与我的 PATH 变量有关。我已经设置了 JAVA_HOME 和 NDK_HOME 以及 PATH，但我一定是设置错误。有人可以帮助澄清 JAVA_HOME 和 NDK_HOME 目录的含义吗？我知道这意味着 java 和 ndk 目录，但我读过一些地方，它需要是 bin 文件夹，或类似的东西。这是我尝试运行 javah 命令时的图片：

编辑：由于我的声誉不到十个，我必须链接图片......但这里是链接 [http://i.stack.imgur.com/7FYd6.png](http://i.stack.imgur.com/7FYd6.png)

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-06-29T11:24:50.167

不管你用的是什么版本的JDK，只要用

```
javah -classpath ..\bin\classes com.samplendk.SampleNDKActivity 
```

# jquery - Fancybox onload 内联内容问题

> ID：11260147
> 
> 赞同：1
> 
> 时间：2012-06-29T10:27:53.140
> 
> 标签：jquery, fancybox

希望这里有人可以帮助我！

我正在尝试设置fancybox，以便在网页加载时显示一些内联内容。但是我似乎无法让它工作。这是我到目前为止使用的代码：

```
<script type="text/javascript">
    $(document).ready(function() {
        /*
         *  Simple image gallery. Uses default settings
         */

        $('.fancybox').fancybox();

        /*
         *  Different effects
         */

        // Change title type, overlay opening speed and opacity
        $(".fancybox-effects-a").fancybox({
            helpers: {
                title : {
                    type : 'outside'
                },
                overlay : {
                    speedIn : 500,
                    opacity : 0.95
                }
            }
        });

        $.fancybox.open([
            {
                href : '#inline1',
                title : '1st title'
            }   
        ], {
            padding : 0   
        });​

    });
</script>
<style type="text/css">
    .fancybox-custom .fancybox-skin {
        box-shadow: 0 0 50px #222;
    }
</style> 
```

html如下：

```
 <h1>fancyBox</h1>

<ul>
    <li><a class="fancybox" href="#inline1" title="Lorem ipsum dolor sit amet">Inline</a></li>

</ul>

<div id="inline1" style="width:400px;display: none;">
    <h3>Etiam quis mi eu elit</h3>
    <p>
        Lorem ipsum dolor sit amet, consectetur adipiscing elit. Etiam quis mi eu elit tempor facilisis id et neque. Nulla sit amet sem sapien. Vestibulum imperdiet porta ante ac ornare. Nulla et lorem eu nibh adipiscing ultricies nec at lacus. Cras laoreet ultricies sem, at blandit mi eleifend aliquam. Nunc enim ipsum, vehicula non pretium varius, cursus ac tortor. Vivamus fringilla congue laoreet. Quisque ultrices sodales orci, quis rhoncus justo auctor in. Phasellus dui eros, bibendum eu feugiat ornare, faucibus eu mi. Nunc aliquet tempus sem, id aliquam diam varius ac. Maecenas nisl nunc, molestie vitae eleifend vel, iaculis sed magna. Aenean tempus lacus vitae orci posuere porttitor eget non felis. Donec lectus elit, aliquam nec eleifend sit amet, vestibulum sed nunc.
    </p>
</div> 
```

希望有人可以提供帮助，因为我现在才刚刚学习 jquery/javascript，而且我知道这一切都被破解了。

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T15:45:00.593

如果你已经有了这个

```
<a class="fancybox" href="#inline1" .... 
```

那么你可以设置你的脚本

```
$('.fancybox').fancybox().trigger("click"); 
```

（你不需要这个`$.fancybox.open`部分。）

它将在页面加载或单击链接时打开 fancybox 中的内联内容。

如果您想以更复杂的方式执行此操作，这意味着仅在有人第一次访问网站时（不是每次他们在同一会话期间返回页面时）在页面加载时启动fancybox，然后检查此[https： //stackoverflow.com/a/8305703/1055987](https://stackoverflow.com/a/8305703/1055987)

# c# - 多重继承和C#

> ID：11260149
> 
> 赞同：4
> 
> 时间：2012-06-29T10:28:07.960
> 
> 标签：c#, architecture, multiple-inheritance

假设我有两个具有完全不同功能的基本抽象类：笔记本电脑和智能手机。（假设功能完全不同）。在我目前的项目中，我已经有很多笔记本电脑和智能手机的实现，而且它们总是完全不同的。

但突然我收到一个请求，要添加一个类，它是 pc-tablet 的实现，它实际上具有智能手机和笔记本电脑的功能。改基类已经来不及了，其实我很确定这个pc-tablet只会出现一次。

问题是，我应该能够将我的 pc-tablet 包含在智能手机的容器中，但它也应该是笔记本电脑，因为继承了功能（实际上除此之外，在项目的某些部分中，pc-tablet 仅用作笔记本电脑，它不需要智能手机功能。此外，将 pc-tablet 视为项目特定部分的智能手机是不好的）。所以我有 PcTabletAsLaptop ：笔记本电脑类，实际上是笔记本电脑，而不是智能手机。

我的解决方案是添加一个包装器：

```
class PcTablet : SmartPhone
{
    private PcTabletAsLaptop _pcTablet;

    // Here goes all the methods of PcTabletAsLaptop as proxies:

    public void Call(int number)
    {
      _pcTablet.Call(number);
     }

     // .....
} 
```

有 200 多种方法，我希望它们从 PcTabletAsLaptop 自动生成。

这个解决方案看起来相当复杂。我的问题是它很好，或者也许有一些更简单的方法可以做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-29T11:03:20.657

您可以从 SmartPhone 和笔记本电脑中提取一个接口，然后创建第三个接口 PcTablet，它将继承前两个接口。这样，您就可以将 PcTablet 用作智能手机或笔记本电脑。

**编辑：**

为了能够重用每个智能手机和笔记本电脑内部的逻辑，您可以使用适配器模式，因此 PcTablet 应该看起来像这样：

```
public class PcTablet :ISmartPhone, ILaptop
{
     private SmartPhone _smartphone;
     private Laptop _laptop;
     public void ISmartPhone.Call()
     {
         _smartPhone.Call();
         // OR IMPLEMENT THE RIGHT BEHAVIOR 
         //INSTEAD OF CALLING _smartPhone.Call()
     }
} 
```

当然，您必须在构造函数中创建智能手机和笔记本电脑，但它应该可以解决问题！这样，您将能够重用笔记本电脑和智能手机中的代码，但也可以在它们没有提供正确的情况下覆盖它们的行为。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-29T10:51:00.087

如果您需要多重继承 - 在大多数情况下，您做错了事或试图以错误的方式解决问题。如下所示的层次结构怎么样？

```
internal class PcTabletAslaptop : LaptopBase
{
    // here is you can expose / override laptop specific stuff
}

internal class PcTabletAsSmartphone : SmartphoneBase
{
    // here is you can expose / override smartphone specific stuff
}

public interface IPcTablet
{
   // just expose PcTablet specific API
}

public sealed class PcTablet : IPcTablet
{
   private PcTabletAsSmartphone asSmartphone;
   private PcTabletAsLaptop asLaptop;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-29T10:40:21.980

我认为你可以从组合而不是聚合的角度来思考。

> [聚合与组合](https://softwareengineering.stackexchange.com/questions/61376/aggregation-vs-composition)

`SmartPhone`包含`Tablet`. _

# iphone - 如何在 xcode 4.2 的 Supporting Files 中获取文件夹中的文件？

> ID：11260150
> 
> 赞同：1
> 
> 时间：2012-06-29T10:28:16.683
> 
> 标签：iphone, filesystems, xcode4.2, nsbundle

我已经完成了以下步骤。1.创建了一个xcode项目，并在Supporting Files中创建了一个名为“Images”的文件夹。

1.  将 4 张图像拖放到其中。尝试使用以下代码访问这些文件

    ```
    NSString *pathString = [[NSBundle mainBundle] pathForResource:@"Images" ofType:nil];
    NSArray *fileList = [[NSFileManager defaultManager] contentsOfDirectoryAtPath:pathString error: nil];
    NSLog(@"the fileList is %d",[fileList count]); 
    ```

计数始终为 0。我现在该怎么办？里面有文件，我可以在 imageviews 中使用它。

那么我犯的错误是什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-29T11:00:25.143

Xcode 不会在您的应用程序包中生成任何与组相对应的文件夹。添加的任何资源都存在于目标构建阶段的 Copy Bundle Resources 中。然后，您可以在 [[NSBundle mainBundle] bundlePath] 路径下访问您的资源。

但是，如果您想计算任何文件夹下的文件，那么在添加该文件夹时，您必须检查选项：

“为任何添加的文件夹创建文件夹引用。”

这将在您添加它们时在同一层次结构中创建文件夹和子文件夹。然后您可以轻松地以与上面相同的方式计算它们......

否则，应用程序包会将您的所有资源放在一个位置，而不是在您所说的“图像”中的任何文件夹中。使用以下代码：

```
NSArray *fileList = [[NSFileManager defaultManager] contentsOfDirectoryAtPath:[[NSBundle mainBundle] resourcePath] error: nil];
NSLog(@"the fileList is %d",[fileList count]); 
```

它将列出您的所有资源。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T10:58:55.767

尝试这个，

```
NSString *imagespath = [[NSBundle mainBundle] pathForResource:"yourimagename" ofType:@"png" inDirectory:@"images"]; 
```

# speech-recognition - 使用有限状态语法 (JSGF) 为 CMU Sphinx 训练声学模型

> ID：11260151
> 
> 赞同：1
> 
> 时间：2012-06-29T10:28:17.550
> 
> 标签：speech-recognition, cmusphinx

我需要训练自己的声学模型。在官方 wiki 上，这个过程是针对 DMP 格式的 ngramm 模型描述的，但是我需要使用以 JSGF 格式提供的（语法）语言模型。有这种可能吗？如果是这样，你能提供一个关于这个主题的教程吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T13:56:03.527

修改是最小的。在安装位置或脚本中打开 psdecode.pl 脚本并更改

```
-lm => $ST::DEC_CFG_LANGUAGEMODEL, 
```

至

```
-jsgf => "/full/path/to/jsgf/file", 
```

# python - 向 Python 文件提供输入并接收输出？

> ID：11260154
> 
> 赞同：0
> 
> 时间：2012-06-29T10:28:33.133
> 
> 标签：python

我对 Python 很陌生，我正在尝试做一些事情。我正在使用 Python IRC 机器人，它让我构建用作通道上的命令的函数。我已经获得了 Cleverbot 的 python 版本，并希望将这两个链接在一起。但是因为我不擅长 Python，所以我不知道该怎么做。

要使用cleverbot python，我只需在终端中输入：

```
python cleverbot.py 
```

它会给我一个“>”，我可以在其中输入。然后我在那行说“你好”，cleverbot 脚本将使用打印命令打印结果。

所以，我一直在搞乱，发现我可以使用 Python IRC 机器人命令来打印一个字符串，所以它只会为我打印结果字符串。问题是我无法让它输入任何东西到cleverbot脚本中。我希望可以做类似的事情：

```
print python cleverbot.py "hello" 
```

它只会打印来自 Cleverbot 的响应，这有意义吗？然后我可以简单地使用 IRC 命令来打印对通道的响应。

在此先感谢，我希望可以理解。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T10:34:23.770

在里面`cleverbot.py`你可以用这些语句打印提供的命令行参数：

```
 import sys
   print(sys.argv[1])  #or print(' '.join(sys.argv[1:])) if the arguments are more than one 
```

所以现在`python cleverbot.py hello`将打印`hello`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T10:42:10.840

尝试

```
echo "hello" | python cleverbot.py 
```

# flask - 如何使用浮点过滤器仅显示小数点后两位？

> ID：11260155
> 
> 赞同：75
> 
> 时间：2012-06-29T10:28:33.703
> 
> 标签：flask, wsgi, jinja2

我正在使用 Flask/Jinja2 模板来显示一个使用**|float**过滤器的数字。

这是我的代码

```
{% set proc_err = nb_err|length / sum * 100 %}
({{proc_err|float}}%) 
```

输出有点尴尬：

```
17/189 (8.99470899471%) 
```

我正在寻找一种方法来将点后的位置限制为数字，例如 2。

期望的输出：

```
17/189 (8.99%) 
```

* * *

## 回答 #1

> 赞同：90
> 
> 时间：2012-06-29T10:37:23.387

它变得非常简单：

我的代码：

```
{% set proc_err = nb_err|length / sum * 100 %}
({{proc_err|float}}%) 
```

可以通过以下方式进行一些更改：

```
{% set proc_err = nb_err|length / sum * 100 %}
({{'%0.2f' % proc_err|float}}%) 
```

或使用***格式***：

```
({{'%0.2f'| format(proc_err|float)}}%) 
```

可以在[jinja2 github issue 70上找到参考资料](https://github.com/mitsuhiko/jinja2/issues/70)

* * *

## 回答 #2

> 赞同：76
> 
> 时间：2014-05-31T09:49:30.457

您可以使用`round`将 a 格式化为`float`给定的精度。

[从文档中](http://jinja.pocoo.org/docs/templates/#round)提取：

`round(value, precision=0, method='common')`

将数字四舍五入到给定的精度。第一个参数指定精度（默认为`0`），第二个参数指定舍入方法：

*   `common`向上或向下四舍五入
*   `ceil`总是四舍五入
*   `floor`总是四舍五入

如果您不指定使用方法`common`。

```
{{ 42.55|round }}
    -> 43.0
{{ 42.55|round(1, 'floor') }}
    -> 42.5 
```

请注意，即使四舍五入到`0`精度，`float`也会返回 a。如果您需要一个实整数，请将其通过管道传输`int`：

```
{{ 42.55|round|int }}
    -> 43 
```

* * *

## 回答 #3

> 赞同：29
> 
> 时间：2018-02-11T00:59:00.253

这是一种方法::

```
{{ "%.2f"|format(result) }} 
```

随心所欲地调整它:)

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2017-07-15T13:30:39.760

（我假设您使用 Ionic v2）

使用这个前端代码：

```
<div *ngIf="device.usage > 0">
   {{ Round(device.usage)}} min  
</div> 
```

并将以下函数放入 .ts 文件中：

```
Round(number):number
{
    return parseFloat(Number((number/1000) / 60).toFixed(2)); 
} 
```

# sql - 如何从 SQL Server 2008 返回 XML，该 XML 由多个选择共享一个共同的父项构成

> ID：11260156
> 
> 赞同：5
> 
> 时间：2012-06-29T10:28:35.417
> 
> 标签：sql, sql-server, xml, sql-server-2008, sqlxml

我试过使用“FOR XML PATH”、“FOR XML EXPLICIT”和“FOR XML AUTO”，但数据的结构从来没有正确的层次结构。

基本上，我有一个父表（客户）和 3 个子表。每个表都有一个 customerid 列。从 Customers 表到 3 个子表中的每一个都存在一对多关系。

作为一个模拟示例，我有一个父“客户”表，还有 3 个其他表 - 产品、爱好和车辆 - 所有这些表都通过 customerid 与客户表相关。

实现以下结构的 SQL 代码是什么 -

```
<Customers>
    <Customer customerid="1" name="Fred">
       <Products>
           <Product productname="table" />
           <Product productname="chair" />
           <Product productname="wardrobe" />
       </Products>
       <Hobbies>
           <Hobby hobbyname="Golf" />
           <Hobby hobbyname="Swimming" />
       </Hobbies>
       <Vehicles>
           <Vehicle name="Car" color="Red" />
           <Vehicle name="Bicycle" color="Blue" />
       </Vehicles>
    </Customer>
    <Customer customerid="2" name="Sue">
       <Products>
           <Product productname="CD player" />
           <Product productname="Picture frame" />
       </Products>
       <Hobbies>
           <Hobby hobbyname="Dancing" />
           <Hobby hobbyname="Reading" />
       </Hobbies>
       <Vehicles>
           <Vehicle name="Car" color="Yellow" />
       </Vehicles>
    </Customer>
</Customers> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-29T11:55:21.113

尝试这样的事情 - 它使用 FOR`XML PATH`和 subselects 为给定客户创建“链接”子节点（*我将其限制为两个子表 - 但您应该了解它的“要点”并能够将其扩展到任何链接子表的数量*）：

```
SELECT
    CustomerID AS '@CustomerID',
    CustName AS '@Name',

    (SELECT ProductName AS '@productname'
     FROM dbo.Products p
     WHERE p.CustomerID = c.CustomerID  
     FOR XML PATH('Product'), TYPE) AS 'Products',

    (SELECT HobbyName AS '@hobbyname'
     FROM dbo.Hobbies h 
     WHERE h.CUstomerID = c.CustomerID
     FOR XML PATH('Hobby'), TYPE) AS 'Hobbies'
FROM
    dbo.Customers c
FOR XML PATH('Customer'), ROOT('Customers') 
```

给我一个类似的输出：

```
<Customers>
  <Customer CustomerID="1" Name="Fred">
    <Products>
      <Product productname="Table" />
      <Product productname="Wardrobe" />
      <Product productname="Chair" />
    </Products>
    <Hobbies>
      <Hobby hobbyname="Golf" />
      <Hobby hobbyname="Swimming" />
    </Hobbies>
  </Customer>
  <Customer CustomerID="2" Name="Sue">
    <Products>
      <Product productname="CD Player" />
      <Product productname="Picture frame" />
    </Products>
    <Hobbies>
      <Hobby hobbyname="Dancing" />
      <Hobby hobbyname="Gardening" />
      <Hobby hobbyname="Reading" />
    </Hobbies>
  </Customer>
</Customers> 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-29T10:53:17.897

使用`FOR XML RAW`

```
IF OBJECT_ID ('tempdb..#customer') IS NOT NULL DROP TABLE #Customer
IF OBJECT_ID ('tempdb..#product') IS NOT NULL DROP TABLE #product
IF OBJECT_ID ('tempdb..#vehicle') IS NOT NULL DROP TABLE #Vehicle
IF OBJECT_ID ('tempdb..#hobbies') IS NOT NULL DROP TABLE #Hobbies

CREATE TABLE #Customer (id INT,name NVARCHAR(20))
INSERT INTO #customer SELECT 1,'Fred' UNION ALL SELECT 2,'Sue'

CREATE TABLE #product(customer_id INT, name NVARCHAR(20))
INSERT INTO #product
SELECt 1 AS id, 'table' as product 
UNION ALL SELECT 1 AS id, 'chair' as product 
UNION ALL SELECT 1 AS id, 'wardrobe' as product 
UNION ALL SELECT 2 AS id, 'CD Player' as product 
UNION ALL SELECT 2 AS id, 'Picture Frame' as product 

CREATE TABLE #vehicle(customer_id INT, name NVARCHAR(20),colour NVARCHAR(20))
INSERT INTO #vehicle
SELECt 1 AS id, 'Car' as vehicle,'red' as colour
UNION ALL SELECT 1 AS id, 'bicycle' as vehicle,'Blue' AS colour
UNION ALL SELECT 2 AS id, 'Car' as vehicle, 'Yellow' as colour

CREATE TABLE #hobbies(customer_id INT, name NVARCHAR(20))
INSERT INTO #hobbies
SELECt 1 AS id, 'Golf' as name
UNION ALL SELECT 1 AS id, 'Swimming' as name
UNION ALL SELECT 2 AS id, 'Dancing' as name
UNION ALL SELECT 2 AS id, 'Reading' as name

SELECT 
c.id AS id
,c.name AS name
,(SELECT p.name
    FROM #product p
    WHERE p.customer_id = c.id
    FOR XML RAW('Products'),TYPE) AS Products
,(SELECT h.name
    FROM #hobbies h
    WHERE h.customer_id = c.id
    FOR XML RAW('Hobbies'),TYPE) AS Hobbies
,(SELECT v.name,v.colour
    FROM #vehicle v
    WHERE v.customer_id = c.id
    FOR XML RAW('Vehicle'),TYPE) AS Vehicle
FROM #customer c
FOR XML RAW('Customer'), ROOT('Customers') 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-09-05T12:31:46.403

```
select
    c.customerid,
    c.name,
    (
        select p.productname
        from Products as p
        where p.customerid = c.customerid
        for xml raw('Product'), root('Products'), type
    ),
    (
        select h.hobbyname
        from Hobbies as h
        where h.customerid = c.customerid
        for xml raw('Hobby'), root('Hobbies'), type
    ),
    (
        select v.name, v.color
        from Vehicles as v
        where v.customerid = c.customerid
        for xml raw('Vehicle'), root('Vehicles'), type
    )
from Customers as c
for xml raw('Customer'), root('Customers') 
```

[**=> sql 小提琴演示**](http://sqlfiddle.com/#!3/3f33b/3)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-12-03T20:45:00.277

```
DECLARE @sampleCount int =10
SET STATISTICS TIME ON 

SELECT

    (SELECT TOP  (@sampleCount) * FROM [Table1]TABLESAMPLE(100 PERCENT) FOR XML PATH('tbl1'), TYPE) AS 'tbl1',
    (SELECT top (@sampleCount) * FROM [Table2] TABLESAMPLE(100 PERCENT)  FOR XML PATH('tbl2'), TYPE) AS 'tbl2',
    (SELECT top (@sampleCount) * FROM [Table3] TABLESAMPLE(100 PERCENT) FOR XML PATH('tbl3'), TYPE) AS 'tbl3'

FOR XML PATH(''), ROOT('Table') 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-09-05T12:22:34.303

```
USE [EAPP_BranchDb]
GO

/****** Object:  StoredProcedure [dbo].[SP_procXMLOutput]    Script Date: 09/05/2013 15:14:05 ******/
SET ANSI_NULLS ON
GO

SET QUOTED_IDENTIFIER ON
GO

CREATE PROCEDURE [dbo].[SP_procXMLOutput] 
                   @Data XML  OUTPUT 
AS
BEGIN

DECLARE @myDoc xml,
        @myDoc1 xml,
        @var_Doc1 nvarchar(max),
        @myDoc2 xml,
        @var1 nvarchar(max),
        @var2 nvarchar(max),
        @var3 nvarchar(max),
        @var_id as int,
        @var_id1 as nvarchar(10),
        @var_grp_id1 as nvarchar(10),
        @var_parent_id as bigint,
        @var_grp_id as nvarchar(10),
        @var_parent_type as nvarchar(1),
        @var_type as nvarchar(10),
        @xml XML,
        @grp1 nvarchar(max),
        @grp2 nvarchar(max)

DECLARE xml_cur_id CURSOR FOR
SELECT id, parent_id, grp_id, parent_type,type FROM xml_table where parent_type='P' order by id

DECLARE xml_cur_grpid CURSOR FOR
SELECT GRP_ID FROM xml_table WHERE parent_id=6 and parent_type='C' group by GRP_ID

BEGIN
    SET @myDoc = N'<frameSet label="Personal Details" id="1"         
                   </frameSet';

    SET @var_Doc1='<field pid="6" type="ROW" /</field';               
    OPEN xml_cur_id
        FETCH NEXT FROM xml_cur_id INTO @var_id, @var_parent_id, @var_grp_id, @var_parent_type,@var_type
            WHILE @@FETCH_STATUS = 0
            BEGIN

            IF @var_type<'TABLE' and @var_parent_type='P'  
            BEGIN   
                SET @myDoc1=(SELECT id, name, type, isMandtory, isDependent, isDependentValue,dataType, lookupPath, lookupName, defaultValue, minDate, maxDate, fieldLabel, maxLength, readonly, disabled, onChangeEvent, reloadEvent,  validationMessage, tabindex FROM xml_table WHERE id=@var_id FOR XML RAW('field')) 
                SET @myDoc.modify('insert sql:variable("@myDoc1") as last into (/frameSet)[1] ')
            END 

            IF @var_type='TABLE' and @var_parent_type='P'   
            BEGIN
                /*table parent creation START*/ 
                SET @myDoc1=(SELECT id, name, type,fieldLabel FROM xml_table WHERE id=@var_id FOR XML RAW('field')) 
                SET @myDoc.modify('insert sql:variable("@myDoc1") as last into (/frameSet)[1] ')
                /*table parent creation END*/   

                /*table COLUMN creation START*/
                SELECT @var1=(SELECT type,fieldLabel FROM XML_RELATION_TABLE WHERE Parent_id=6 order by id FOR XML RAW('field'))
                SELECT @var2=(SELECT '<field type="ROW"'+@var1+'</field')
                SELECT @myDoc1=@var2
                SET @var_id1=@var_id
                /*table COLUMN creation START*/
                /*TABLE CHILD row creation START*/
                SET @var3=''
                OPEN xml_cur_grpid
                    FETCH NEXT FROM xml_cur_grpid INTO @var_grp_id1
                        WHILE @@FETCH_STATUS = 0
                        BEGIN

                            SELECT @grp1=(SELECT id, name, type, isMandtory, isDependent, isDependentValue,dataType, lookupPath, 
                            lookupName, defaultValue, minDate, maxDate, fieldLabel, maxLength, 
                            readonly, disabled, onChangeEvent, reloadEvent,  validationMessage, tabindex FROM xml_table 
                            WHERE parent_id=@var_parent_id and parent_type='C' and grp_id=@var_grp_id1 order by id
                            FOR XML RAW('field'))

                            SELECT @grp2=(SELECT '<field type="ROW"'+@grp1+'</field')
                            SET @var3=@var3+@grp2

                        FETCH NEXT FROM xml_cur_grpid INTO @var_grp_id1
                        END
                CLOSE xml_cur_grpid
                DEALLOCATE xml_cur_grpid            
                /*TABLE CHILD row creation END*/

                SELECT @myDoc1=@var2+@var3
                SET @myDoc.modify('insert sql:variable("@myDoc1")  into (/frameSet/field[@id=sql:variable("@var_id1")])[1] ')
                SET @var2=''
                SET @var3=''
           END

           FETCH NEXT FROM xml_cur_id INTO @var_id, @var_parent_id, @var_grp_id, @var_parent_type,@var_type
           END
    CLOSE xml_cur_id
    DEALLOCATE xml_cur_id

    SET @Data=@myDoc

END        

END    

GO 
```

# jquery - 具有向下钻取功能的 Gridview

> ID：11260157
> 
> 赞同：1
> 
> 时间：2012-06-29T10:28:41.343
> 
> 标签：jquery, asp.net, gridview, webforms, drilldown

大家好，我需要你的帮助，我手头有一个项目是使用带有向下钻取的网格视图，我必须能够单击一个按钮或在线并向下延伸另一行并提供详细信息，我已经有代码按钮展开和折叠并更改按钮，但不能同时执行这两项操作，这正是我想要的，当我单击“加号”时，该行会展开并在单击时将按钮图像更改为减号和减号为“加号”并折叠详细信息。谢谢 :) 这是 gridview、jquery 和代码隐藏的代码：

```
Gridview:
    <asp:GridView 
    ID="gvMajor" 
    runat="server" 
    AutoGenerateColumns="False" 
    BackColor="White" 
    BorderColor="Black" 
    BorderStyle="Ridge" 
    BorderWidth="1px" 
    CellPadding="1" 
    onrowdatabound="MyGrid_RowDataBound" 
    onrowcommand="Delete_info" 
    AllowPaging="True" 
    onselectedindexchanging="Edit_info" 
    PageSize="5" 
    Width="100%"  
    onpageindexchanged="GridView1_PageIndexChanged" 
    DataKeyNames="ID" 
    DataSourceID="MajorsDS" 
        onselectedindexchanged="gvMajor_SelectedIndexChanged"  >

    <RowStyle 
        BackColor="#EEEEEE" 
        ForeColor="Black" 
        BorderColor="Black"/>

    <Columns>

        <asp:TemplateField ShowHeader="False">
            <ItemTemplate>
                <asp:ImageButton ID="ImageButton1" runat="server" 
                    CommandName="Expand/Collapse" ImageUrl="~/Images/Expand.png" 
                    Text="Button" CssClass="View"/>
            </ItemTemplate>
        </asp:TemplateField>

        <asp:BoundField DataField="ID" HeaderText="ID" 
            SortExpression="ID" ReadOnly="True" />
        <asp:BoundField DataField="Subject" HeaderText="Subject" 
            SortExpression="Subject" />
        <asp:BoundField DataField="InsertDate" HeaderText="InsertDate" 
            SortExpression="InsertDate" />
        <asp:BoundField DataField="DisabledDate" HeaderText="DisabledDate" 
            SortExpression="DisabledDate" />
        <asp:CommandField ShowSelectButton="True" ButtonType="Image" 
            SelectImageUrl="~/Images/1340789891_gtk-edit.png" />

        <asp:ButtonField ButtonType="Image" CommandName="Delete_info" 
                    ImageUrl="~/Images/1340790235_gnome-fs-trash-empty.png" 
            Text="Button"  />

    </Columns>

<FooterStyle 
    BackColor="#CCCCCC" 
    ForeColor="Black" />

<PagerStyle 
    BackColor="#999999" 
    ForeColor="Black" 
    HorizontalAlign="Center" />

<SelectedRowStyle 
    BackColor="#008A8C" 
    Font-Bold="True" 
    ForeColor="White" />

<HeaderStyle 
    BackColor="#000084" 
    Font-Bold="True" 
    ForeColor="White" />

<AlternatingRowStyle 
    BackColor="Gainsboro" />

</asp:GridView>

Jquery:

    <script type="text/jscript">
    $('.View').click(function()
    {
        $('#details').remove();
        var detailID=$(this).attr('data-id');

        $(this).closest('tr').after('<tr id="details"><td colspan="9"></td></tr>')
        $('#details td').load('Details.aspx?detail='+detailID+' #content');

    });
</script> 

<script type="text/jscript">
    $('.Hide').click(function()
    {
        $('table td img.Hide').click(function(){     $(this).parent().parent().remove(); });
    });
</script> 

Codebehind: 

        protected void Delete_info(object sender, GridViewCommandEventArgs e)
    {
        sqlconn.Open();
        int idx = Convert.ToInt32(e.CommandArgument);
        if (e.CommandName == "Delete_info")
        {
            GridViewRow selectedRow = gvMajor.Rows[idx];
            TableCell ID_info = selectedRow.Cells[2];
            string ID = ID_info.Text;
            //código para descobrir o nome do user introduzido
            string user_status = "Select Status FROM JANELA_CSD_USERS WHERE ID=@ID";
            SqlCommand USTATUS = new SqlCommand(user_status, sqlconn);
            USTATUS.Parameters.AddWithValue("@ID", Convert.ToInt32(ID.ToString()));
            USTATUS.ExecuteNonQuery();
            int User_status = Convert.ToInt32(USTATUS.ExecuteScalar());
            if (User_status == 1)
            {

                SqlCommand sqlcomm = new SqlCommand("UPDATE JANELA_CSD_INFO SET Status=0, DisabledDate=@DisabledDate WHERE ID=@ID", sqlconn);
                sqlcomm.Parameters.Add("@DisabledDate", SqlDbType.SmallDateTime).Value = DateTime.Now.Date;
                sqlcomm.Parameters.Add("@ID", SqlDbType.Int).Value = Convert.ToInt32(ID.ToString());
                sqlcomm.ExecuteNonQuery();

            }
            else
            {
            }
            sqlconn.Close();
        }
        if (e.CommandName == "Expand/Collapse")
        {
            int index = Convert.ToInt32(e.CommandArgument);
            GridViewRow gvrow =gvMajor.Rows[index];
            if (((ImageButton)gvrow.Controls[0].Controls[0]).ImageUrl == "~/Images/1340791822_delete.png")
                ((ImageButton)gvrow.Controls[0].Controls[0]).ImageUrl = "~/Images/1340791835_add.png";
            else
                ((ImageButton)gvrow.Controls[0].Controls[0]).ImageUrl = "~/Images/1340791822_delete.png";
        }
    } 
```

# haskell - Haskell - “IO（）”是否意味着我们放弃了对程序的控制？

> ID：11260159
> 
> 赞同：1
> 
> 时间：2012-06-29T10:28:53.137
> 
> 标签：haskell, functional-programming

我们知道，在 Haskell 程序中，几乎每一次计算都会返回一些东西，而这样的返回值可以被另一个计算捕获，以对其进行更多的转换。所以如果我们“扁平化”一个普通的 Haskell 程序，它应该是：

```
-- pure `a`: comes from Hask; not from file, network or any 
-- other side-effected devices

a → a' → a'' → a''' → .... → a_fin 
```

当然，这个纯值可能是“上下文”的。但我们仍然可以追溯交替的路径：

```
a → m a → m a' → a'' → n a''' → ... → z a_fin 
```

对我来说，这表明我们可以控制我们的程序以避免副作用和其他“意外”，这可能是由于缺少类型系统或我们自己造成的。但是当`IO ()`出现时，似乎缺少：

```
--!! What happened between the IO () and the next computation ?

a → m a → m a' → IO () >> b → b' → m b' 
```

似乎什么都没有传递/接收，`IO ()`但它至少必须读/写一些东西。特别是如果我们考虑“接收者”过程：

```
Sender::   a → m a → m a' → IO () >> b → b' → m b' ... → m b_fin
Receiver:: IO a' → IO a'' → IO a''' → ... → IO a_fin 
```

`a`在发件人中，我们看不到`IO ()`. 但如果我们同时考虑这两个过程，缺失的部分又回来了！所以我们可以说我们错过了或没有错过信息，根据你的观点。这是信息泄漏，我们只是放弃了对程序的控制，当我们将 放入`IO ()`程序中时？

谢谢 ！

PS。哦，我还发现接收器只能从“上下文”值开始计算，而不是纯值，这是我脑海中出现的另一个问题......

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-29T17:53:21.887

从您的评论看来，您认为因为`IO ()`-typed 计算没有返回有用的东西，所以类型系统不能保证您的程序是正确的。

首先，类型系统*不*保证程序的正确性，除非是简单的情况。在复杂的程序中，完全有可能犯逻辑错误，你的程序会编译但返回错误的结果。避免逻辑错误是程序员的职责，而类型系统只是一种（确实是强大的）工具。

第二点是从第一点开始的。`IO`是一个普通的单子；它与任何其他类型都是相同的类型（当然，从类型系统的角度来看）。AFAIK 它没有从类型系统中得到一些特殊处理。type 的值`IO ()`确实意味着“不纯的计算，在执行时可能会以某种方式影响外部世界，并且不会产生任何有意义的东西”，仅此而已。考虑 type 的值`State Int ()`：它的意思是“一个有状态的计算，当执行时，它可能会对当前的 type 状态做一些事情，`Int`并且不会产生任何有用的东西”。你看，这两个值都有某种副作用，并且它们都具有与计算*结果相关的相同含义*. 从类型系统的角度来看，它们是等价的。但第二个是完全*纯粹*的计算。您可以使用或轻松将其转换为有意义的值（在本例中为`Int`）。`execState``runState`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-29T16:02:55.880

不。您认为链中的每个动作只能看到其前一个动作的结果；但实际上，如果需要，每个操作都可以访问**任何**先前操作的结果。只是使用一个玩具示例：

```
return 5 >>= (\x -> putStrLn "mwahaha!" >>= (\_ -> putStrLn "x is " ++ show x >>= (\_ -> return ()))) 
```

注意变量的范围`x`——它延伸到整个表达式的末尾。（括号在那里是可选的，但我把它们放在里面是为了使范围更明显。）

再次考虑 的类型`>>=`：

```
(>>=) :: Monad m => m a -> (a -> m b) -> m b 
```

这可以解释为“使用类型动作的结果和类型`m a`函数`a -> m b`来构造**程序的其余部分**”（不仅仅是下一个动作）。

动作还具有可变内存和程序可用的任何 I/O 设备的上下文，因此这也是动作可以与另一个进行通信的另一种机制。就你所知，两种类型的动作`IO ()`可以通过共享内存或共享文件进行通信。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-01T23:55:03.520

是的，从某种角度来看，类型的值`IO a`是凭空提取信息的；并非源自生成它们的函数的输入的信息。这是不可避免的，因为它的全部*意义*在于`IO`编写其结果取决于（并且可以影响）程序外部世界的计算。调用产生的信息`readFile`驻留在磁盘上的文件中，而不是在您的程序中。所以是的，你“放弃了控制”，因为任何程序使用任何`IO`动作的结果都取决于不受你正在编写的程序控制的东西。但是*每个*程序都是这样的；避免它的唯一方法是不使用`IO`（或任何与外界通信的机制），然后你的程序只是写下最终结果的一种非常复杂的方式。

但是类型系统从不关心实际的输入/输出**值**，并且它不能证明它们是正确的，即使`IO`不涉及。在类型检查中，`Integer -> String`它所做的只是验证它是否使用确实接受 a`Integer`并返回 a 的操作来实现`String`。它*不*知道是否生成了**正确**的字符串。

你甚至可以对类型系统“撒谎”；`undefined`是*任何*函数的有效定义，然后它为您提供一个函数，例如，就类型系统而言，它接受一个整数并返回一个字符串。但这并不意味着它是该功能的正确实现；并且根据这个定义的任何其他函数也是不正确的，类型检查器根本不在乎。

同样，类型函数`Integer -> IO ()`检查该函数是否使用接受`Integer`和产生的操作`IO ()`。这就是类型检查所证明的**全部**`IO ()`内容，这与 for`IO Integer`或 for`Integer`或*任何*其他类型没有什么不同。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-29T10:46:40.873

该链由程序的“状态”组成（嗯，有点）。让我们考虑一个简单的程序：

```
main = do
  let a = 4  -- 1
  print a    -- 2
  print a    -- 3 
```

在这里，在第 1 步之后，您的状态为`4`。但是在第 2 步之后，这`4`并没有消失——你现在的状态是 (4, ())。在第 3 步之后是 (4, (), ()) 等等。

* * *

长话短说，稍后将使用的信息保留在链中。之后不会消失`IO ()`。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-29T13:57:57.403

我不太确定问题是什么，但无论如何，如果我的直觉是正确的，我会给出答案。

事实是，如果你只看程序的组成函数的类型，你可以得出以下两个结论之一：

1.  您的程序不使用 IO，因此可以保证计算是纯的，因此不会产生副作用（当然，在一定范围内。）

或者

1.  您的程序确实使用了 IO，因此不是纯粹的，并且不能保证它不会产生副作用。

当然，在所有可能的 IO 计算范围内都有一些计算不会产生副作用，就像有些计算的类型表明纯度一样，但使用了不安全的函数，例如`unsafePerformIO`. 但总的来说，您可以查看纯函数的类型并说：此函数不会在磁盘 IO、网络 IO 或任何类型的情况下失败。同样的保证不适用于 IO 计算。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-29T19:01:58.347

`IO ()`意味着计算可能会受到过去`IO`行为的影响，也可能会影响“计算链”中的未来`IO`行为。但是，后续的非 IO 值（如果它有一个 monad 堆栈，则在堆栈中的任何位置都没有 IO）*不能*直接受到影响，因为`()`这是微不足道的值，这就是它们被允许依赖的全部。如果它们依赖于一些受影响的东西，它们可能会受到间接`IO a`影响。这是 ignoring `unsafePerformIO`，只能以上述解释仍然基本成立的方式使用。

# c# - Rijndael 或 AES 匹配 java 加密 - 使用盐和密钥

> ID：11260161
> 
> 赞同：0
> 
> 时间：2012-06-29T10:29:08.257
> 
> 标签：c#, java, aes, rijndael

我需要使用盐和密钥加密字符串以匹配 java 加密，以便第 3 方提供者可以解密另一端的值。

我已经尝试了几篇 StackOverflow 文章，因为我不是加密专家，只是无法使用 SALT 和 KEY 作为第 3 方提供商获得相同的加密字符串。

我需要知道 C# 中使用哪种加密类型和模式来匹配这里使用的 java 的 AES 加密

[https://gist.github.com/ca958d5921d47c4c0a0f](https://gist.github.com/ca958d5921d47c4c0a0f)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-03T10:12:22.107

好的-即使在一定程度上作弊，我也想通了。因为我找不到任何与第 3 方提供的纯 AES 加密相匹配的加密技术，所以我要求他们将其更改为

密码密码 = Cipher.getInstance("AES/CBC/PKCS5Padding");

有了这个，我修改了我的 C# 代码并最终使集成工作：

```
public static string Encrypt2(string plainText)
    {
        string PassPhrase = "somepassphrase";
        string SaltValue = "somesalt";
        int PasswordIterations = 0; //amend to match java encryption iteration
        string InitVector = "someiv";
        int KeySize = 0; //amend to match java encryption key size

        byte[] initVectorBytes = Encoding.ASCII.GetBytes(InitVector);
        byte[] saltValueBytes = Encoding.ASCII.GetBytes(SaltValue);

        byte[] plainTextBytes = Encoding.UTF8.GetBytes(plainText);

        Rfc2898DeriveBytes password = new Rfc2898DeriveBytes(
                                                        PassPhrase,
                                                        saltValueBytes,
                                                        PasswordIterations);

        byte[] keyBytes = password.GetBytes(KeySize / 8);
        RijndaelManaged symmetricKey = new RijndaelManaged();
        symmetricKey.Mode = CipherMode.CBC;

        ICryptoTransform encryptor = symmetricKey.CreateEncryptor(
                                                         keyBytes,
                                                         initVectorBytes);
        MemoryStream memoryStream = new MemoryStream();

        CryptoStream cryptoStream = new CryptoStream(memoryStream,
                                                     encryptor,
                                                     CryptoStreamMode.Write);

        cryptoStream.Write(plainTextBytes, 0, plainTextBytes.Length);
        cryptoStream.FlushFinalBlock();
        byte[] cipherTextBytes = memoryStream.ToArray();

        memoryStream.Close();
        cryptoStream.Close();

        string cipherText = Convert.ToBase64String(cipherTextBytes);

        return cipherText;
    } 
```

# asp.net-mvc-3 - 发布前在 mvc 3 中上传和保存图像

> ID：11260168
> 
> 赞同：1
> 
> 时间：2012-06-29T10:29:22.217
> 
> 标签：asp.net-mvc-3, image, upload

我的网络应用程序中的图像有问题。假设我有一个表单，其中有一些文本字段、下拉列表、用于多个图像上传的上传 ajax 控件和按钮保存。

我知道如何上传图片和发布表单并将所有内容保存到数据库，但问题是我想实现以下用户体验：

成功上传后，用户可以上传多个图像和浏览器显示缩略图（我知道该怎么做）......这里的问题是我不想在按下按钮保存之前将图像保存到数据库。是否有任何方便的保存临时图像的方法...我试过临时表，按下按钮后，将所有图像复制到图像表，但这是浏览器刷新问题，丢失所有数据，图像留在临时表中。您可以使用会话来存储临时图像或任何其他方式吗（我认为会话对于此类事情并不是特别好的主意。）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T11:56:45.047

实现此目的的一种简单方法是使用[HTML5 文件 API](https://developer.mozilla.org/en/Using_files_from_web_applications/#Example%3a_Showing_thumbnails_of_user-selected_images)，并在用户选择要上传的文件后显示缩略图。您甚至不需要浪费带宽，因为一切都发生在客户端上。用户提交表单后，图像将上传到服务器。

另一种可能性是使用大量可用的 AJAX 上传控件之一，例如 Uploadify、Valums Ajax Upload、Uploadify、jQuery 表单插件……这将允许您使用 AJAX 请求将文件上传到服务器，以便您可以在那里调整它的大小并将调整大小的图像返回给客户端，您可以在客户端上显示缩略图。

# java - 分段执行线程

> ID：11260169
> 
> 赞同：-2
> 
> 时间：2012-06-29T10:29:24.713
> 
> 标签：java, multithreading

```
class{

...

     method(x,y){

...

     method(x-1,y);  //own thread for recursion
     method(x,y-1);  //own thread for recursion
     }
} 
```

我想执行线程代码部分，我如何在 java 中对这些部分进行签名。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-29T10:34:36.240

你看过内置的java设施吗？如果您使用的是 java 7，则并行递归很容易：

[递归任务](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/RecursiveTask.html)

javadocs 包含经典斐波那契问题的解决方案。

**更新** 这是对数组求和的示例。我并不是说放入 RecursiveTask 是最有效的方法，但它是如何使用它的一个很好的例子。

```
import java.util.concurrent.ForkJoinPool;
import java.util.concurrent.RecursiveTask;

public class Sum extends RecursiveTask<Long> {
    private static final long serialVersionUID = 1548240649873455442L;
    private int arr[];
    private int hi;
    private int lo;

    public Sum(int arr[]) {
        this.arr = arr;
        this.lo = 0;
        this.hi = arr.length-1;
    }

    private Sum(int arr[], int lo, int hi) {
        this.arr = arr;
        this.hi = hi;
        this.lo = lo;
    }

    @Override
    protected Long compute() {
        if (lo == hi) {
            return Long.valueOf(arr[lo]);
        }
        else {
            int mid = (hi+lo)/2;
            Sum sumleft = new Sum(arr, lo, mid);
            Sum sumright = new Sum(arr, mid+1, hi);
            sumleft.fork();
            return sumright.compute().longValue() + sumleft.join().longValue();
        }
    }

    public static void main(String args[]) throws Exception {
        ForkJoinPool pool = new ForkJoinPool();
        int arr[] = new int[] { 1, 2, 3, 4, 5 };
        Sum sum = new Sum(arr);
        System.out.println(pool.invoke(sum));
    }

} 
```

这里要注意的大事：

1.  你必须有一种方法来停止递归（在这个例子中，当你只对一个元素求和时）

2.  您应该将 .compute() 用于减少的一侧，然后将 .fork() 用于另一侧，并使用 .join() 来获得它的价值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-29T10:35:28.470

小心这样的线程场景。第一个冲动是写这样的东西：

```
 Thread t1 = new Thread(new Runnable() {
           public void run() {
               method(x-1,y);
           }
       });
 Thread t2 = new Thread(new Runnable() {
           public void run() {
               method(x,y-1);
           }
       });
 t1.start();
 t2.start();

 //...
 t1.join();
 t2.join(); 
```

这将满足您的要求，但不幸的是，由于该方法是递归的，因此线程生成将很快失去控制并过度订阅系统，因为线程将在每个递归级别生成。

您将需要设置一个阈值，然后在达到阈值时切换到顺序调用：

```
 if(currentLevel < threshold) {
    Thread t1 = new Thread(new Runnable() {
              public void run() {
                  method(x-1,y,currentLevel + 1);
              }
          });
    Thread t2 = new Thread(new Runnable() {
              public void run() {
                  method(x,y-1,currentLevel + 1);
              }
          });
    t1.start();
    t2.start();

    //...
    t1.join();
    t2.join();
 } else {
     method(x-1,y); 
     method(x,y-1); 
 } 
```

# javascript - 用于地理数据的 Javascript 或其他图表库

> ID：11260171
> 
> 赞同：0
> 
> 时间：2012-06-29T10:29:32.887
> 
> 标签：javascript, d3.js, charts, highcharts, gis

我正在使用 openlayers 和 wms。但我见过图表 API，例如：

[http://code.google.com/apis/ajax/playground/?type=visualization#geo_chart](http://code.google.com/apis/ajax/playground/?type=visualization#geo_chart) [http://www.highcharts.com/studies/us-map.htm](http://www.highcharts.com/studies/us-map.htm)

这些 API 生成非常好的界面（基于地图或其他），打印选项为图像或 png。

[带有打印选项的高图表](http://highcharts.com/demo/combo-multi-axes)

我发现 D3 是一个丰富的库，但 Highcharts 更具交互性（我猜）。

[http://www.smartjava.org/content/using-d3js-visualize-gis](http://www.smartjava.org/content/using-d3js-visualize-gis)

哪个是可视化**GIS数据的最佳****图表**选项？与区域、边界相关的数据，而不是与自定义位置和区域相关的数据。并且还提供图像或 pdf 格式的保存选项。

 *** * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T13:20:09.800

我会说 HighCharts 在这一点上没有用。原因是您链接到的地图是 alpha 版本。它不在 HighCharts 代码库的主干中。如果与 javascript/html5 技术保持一致，还有其他几种方法可以满足您的需求：

*   [http://www.giscloud.com/](http://www.giscloud.com/)
*   [ArcGIS Javascript](http://resources.esri.com/help/9.3/arcgisserver/apis/javascript/arcgis/help/jshelp_start.htm)

请注意，ArcGIS 绝不便宜。**

# asp.net - 多语言 Web 应用程序更改 div 文本？

> ID：11260172
> 
> 赞同：9
> 
> 时间：2012-06-29T10:29:35.650
> 
> 标签：asp.net, localization, multilingual

我正在使用 asp.net Web 应用程序多语言站点。

我正在使用以下链接：

[http://techaxe.com/2010/09/04/creating-multilingual-website-using-asp-net/](http://techaxe.com/2010/09/04/creating-multilingual-website-using-asp-net/)

这里我们在我的 App_LocalResource 文件夹中有用于更改文本内容的文件。它适用于标签控制。

```
<asp:Label ID="Label1" runat="server" Text="<%$Resources:AboutText%>"></asp:Label> 
```

在这里，我想根据所选语言更改我的 div 内容。

```
<div class="registration_content" runat="server">
                    <%$Resources:AboutText%> </div> 
```

请建议我如何根据本地资源变量更改 div 内容。

感谢您的任何建议..

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-29T15:26:00.257

您可以使用`asp:Literal`标签：

```
<div class="registration_content" runat="server">
    <asp:Literal runat="server" Text="<%$Resources:AboutText%>" /> 
</div> 
```

# java - 进程被杀死后R.java中的Android NoSuchField错误

> ID：11260176
> 
> 赞同：4
> 
> 时间：2012-06-29T10:30:14.147
> 
> 标签：java, android

我的一个应用程序遇到了一个非常令人沮丧的问题。

我有一个启动画面活动，它为我的应用程序加载一些初始数据，然后启动主要活动并自行完成。

主要活动运行后，我通过按主页键使应用程序后台运行，然后终止我的应用程序的进程。

当我重新启动我的应用程序时，闪屏会尝试运行，但一旦我尝试访问 R.java 文件中的任何字段就会失败：

例如，我立即尝试像这样设置 textview 的文本：

```
((TextView)findViewById(R.id.splash_tv_1)).setText(application.getLanguage().pleasewait); 
```

这会引发以下异常：

```
06-29 11:18:14.661: ERROR/AndroidRuntime(21427): java.lang.NoSuchFieldError: com.pagesuite.android.reader.framework.R$id.splash_tv_1 
```

然后当我再次启动它时，它很好。

如果我使用 TaskKiller 工具终止应用程序（我知道很多用户会天真地使用我怀疑的东西）或操作系统终止我的进程，我会得到相同的行为。

有任何想法吗？

编辑：

刚刚在 logcat 中注意到，就在此活动的 onCreate() 执行之前，记录了以下内容：

```
06-29 11:18:14.571: WARN/dalvikvm(21427): VFY: unable to resolve static field 1945 (splash_logo) in Lcom/pagesuite/android/reader/framework/R$id;
06-29 11:18:14.571: DEBUG/dalvikvm(21427): VFY: replacing opcode 0x60 at 0x0000
06-29 11:18:14.571: DEBUG/dalvikvm(21427): VFY: dead code 0x0002-0010 in Lcom/pagesuite/android/reader/framework/activities/PS_Splashscreen;.loadLogoImg (Lcom/pagesuite/android/reader/framework/xml/appsettings/PS_AppSettings;)V
06-29 11:18:14.571: DEBUG/dalvikvm(21427): DexOpt: couldn't find static field
06-29 11:18:14.571: WARN/dalvikvm(21427): VFY: unable to resolve static field 1946 (splash_tv_1) in Lcom/pagesuite/android/reader/framework/R$id;
06-29 11:18:14.571: DEBUG/dalvikvm(21427): VFY: replacing opcode 0x60 at 0x0000
06-29 11:18:14.571: DEBUG/dalvikvm(21427): VFY: dead code 0x0002-0039 in Lcom/pagesuite/android/reader/framework/activities/PS_Splashscreen;.setLanguage ()V
06-29 11:18:14.571: DEBUG/dalvikvm(21427): DexOpt: couldn't find static field
06-29 11:18:14.571: WARN/dalvikvm(21427): VFY: unable to resolve static field 1946 (splash_tv_1) in Lcom/pagesuite/android/reader/framework/R$id;
06-29 11:18:14.571: DEBUG/dalvikvm(21427): VFY: replacing opcode 0x60 at 0x0000
06-29 11:18:14.571: DEBUG/dalvikvm(21427): VFY: dead code 0x0002-0020 in Lcom/pagesuite/android/reader/framework/activities/PS_Splashscreen;.setTextColors ()V 
```

这是我尝试在课堂上访问 R.id 的三个实例。

需要注意的一件事是我确实打电话：

```
setContentView(R.layout.ps_splashscreen); 
```

并且这条线似乎运行良好，所以似乎缺少的是 R.id。

编辑：这是布局：

```
<?xml version="1.0" encoding="utf-8"?> 
```

```
<LinearLayout
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_centerInParent="true"
    android:orientation="vertical" 
    android:gravity="center">

    <ImageView
        android:id="@+id/splash_logo"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" />

    <TextView
        android:id="@+id/splash_tv_1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Please wait"
        android:textColor="@color/white"
        android:textSize="20dip" />

    <TextView
           android:id="@+id/splash_tv_2"
        android:layout_marginTop="20dip"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Loading..."
        android:textColor="@color/white" />

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-12-10T13:30:22.137

我有同样的问题，它给了我

```
DexOpt: couldn't find static field 
```

错误，因为我有两个同名的布局 xml 文件，一个在外部库中，一个在项目中。我不知道这对其他人是否有用:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-06T23:28:11.477

我想我也看到了这个问题。你在引用图书馆项目吗？如果是这样，来自 R.java 的静态可能会丢失，因为 Eclipse 在将 R.java 从另一个库导入您的项目时将其删除。

请参阅：[https ://stackoverflow.com/a/26791329/1748628](https://stackoverflow.com/a/26791329/1748628)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-06-29T13:12:16.243

```
//Have you Define this line in your oncreat method

      setcontentview(R.layout.yourlayout);

 // clen code then run again. 
```

# sift - SIFT-图像比较

> ID：11260178
> 
> 赞同：1
> 
> 时间：2012-06-29T10:30:27.063
> 
> 标签：sift

我正在使用 Stephan Saalfeld 的 sift 实现在 java 中使用 SIFT 比较两个图像 - [http://fly.mpi-cbg.de/~saalfeld/Projects/javasift.html](http://fly.mpi-cbg.de/~saalfeld/Projects/javasift.html)。但由于缺乏适当的例子，我发现很难使用它。我能够获得两个图像的描述符，然后是它们相应的匹配描述符，最后应用 RANSAC 来忽略错误匹配。现在，我留下了一些内线。但是我很困惑如何得出两个图像是否相似的结论？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T15:58:56.893

RANSAC 为您提供变换矩阵（包括平移、旋转和缩放值）。使用此信息，您可以尝试将图像相互匹配，以查看 SIFT 找到的匹配项。

RANSAC 的一个优点是它能够对模型参数进行稳健的估计，即即使数据集中存在大量异常值，它也可以高度准确地估计参数。RANSAC 的一个缺点是计算这些参数所需的时间没有上限。当计算的迭代次数有限时，获得的解决方案可能不是最佳的，甚至可能不是一个以良好方式拟合数据的解决方案。通过这种方式，RANSAC 提供了一种权衡；通过计算更多的迭代次数，可以增加生成合理模型的概率。RANSAC 的另一个缺点是它需要设置特定问题的阈值。RANSAC 只能为特定数据集估计一个模型。对于存在两个（或更多）模型实例时的任何一种模型方法，RANSAC 可能无法找到其中任何一个。Hough 变换是一种替代的鲁棒估计技术，当存在多个模型实例时可能很有用。

最后，您可以说出两张图片的相似程度。它不能总是告诉你这是完全匹配还是完全不同。因此，您将在应用 RANSAC 后获得匹配项。然后你可以找出好的匹配占总匹配的百分比，然后你需要根据这个信息来决定。

# javascript - 正则表达式匹配 URL/网址

> ID：11260180
> 
> 赞同：1
> 
> 时间：2012-06-29T10:30:30.090
> 
> 标签：javascript, regex

我有一个 JS 函数，它传递了一个运行 RegEx 的字符串，并返回任何匹配项：

```
searchText= // some string which may or may not contain URLs
Rxp= new RegExp("([a-zA-Z\d]+://)?(\w+:\w+@)?([a-zA-Z\d.-]+\.[A-Za-z]{2,4})(:\d+)?(/.*)?/ig")
return searchText.match(Rxp); 
```

RegExp 应返回以下任何（和类似的派生）的匹配项：

*   google.com
*   www.google.com
*   [http://www.google.com](http://www.google.com)
*   [http://google.com](http://google.com)
*   google.com?querystring=value
*   www.google.com?querystring=value
*   [http://www.google.com?querystring=value](http://www.google.com?querystring=value)
*   [http://google.com?querystring=value](http://google.com?querystring=value)

然而，没有这样的运气。有什么建议么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-29T10:33:20.107

在字符串中，`\`必须转义：`\\`.

首先，字符串被解释。`\w`转入`w`，因为它没有重要意义。
*然后*，将解析后的字符串转入正则表达式。但是`\`在字符串解析过程中丢失了，所以你的 RegEx 会中断。

不使用`RegExp`构造函数，而是使用 RegEx 文字：

```
Rxp = /([a-zA-Z\d]+:\/\/)?(\w+:\w+@)?([a-zA-Z\d.-]+\.[A-Za-z]{2,4})(:\d+)?(\/.*)?/ig;
// Note: I recommend to use a different variable name. Variables starting with a
//  capital usually indicate a constructor, by convention. 
```

如果您不能 100% 确定输入是字符串，最好使用该[`exec`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/RegExp/exec)方法，该方法将参数强制转换为字符串：

```
return Rxp.exec(searchText); 
```

这是一个包含查询字符串和 URL 片段的模式：

```
/([a-zA-Z\d]+:\/\/)?(\w+:\w+@)?([a-zA-Z\d.-]+\.[A-Za-z]{2,4})(:\d+)?(\/[^?#\s]*‌)?(\?[^#\s]*)?(#\S*)?/ig 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-29T10:38:13.290

首先，没有真正需要通过 RegExp 构造函数创建您的模式，因为它不包含任何动态。您可以只使用文字`/pattern/`。

但是，如果您确实使用了构造函数，则必须记住您的模式被声明为字符串，而不是文字 REGEXP，因此您需要对特殊字符进行双重转义，例如`\\d`，not `\d`。此外，有几个正斜线你根本没有逃脱。

使用构造函数，修饰符 (g, i) 作为第二个参数传递，而不是附加到模式中。

因此，要从字面上改变你所拥有的，它将是：

```
Rxp= new RegExp("([a-zA-Z\\d]+:\\/\\/)?(\\w+:\\w+@)?([a-zA-Z\\d.-]+\\.[A-Za-z]{2,4})(:\\d+)?(\\/.*)?", "ig") 
```

但更好的是：

```
Rxp = /([a-zA-Z\d]+:\/\/)?(\w+:\w+@)?([a-zA-Z\d.-]+\.[A-Za-z]{2,4})(:\d+)?(\/.*)?/gi; 
```

# php - 通过复选框错误选择多行时出错未定义索引：复选框

> ID：11260181
> 
> 赞同：0
> 
> 时间：2012-06-29T10:30:33.007
> 
> 标签：php

我想从中选择多行，`checkbox`并希望通过单击按钮一次全部更新它们。我尝试了多种方式..但不起作用..你能帮忙吗？它显示错误为`Undefined index: checkbox`

```
<td>
    <input type="hidden" name="id" id="id" value="<?php echo $row["file_serial_id"]; ?>" />
    <input type="checkbox" name="checkbox[]" id="checkbox[]"  value="<?php echo $row['file_serial_id']?>" />
</td>

if(isset($_POST['send_btn']) and $_POST['send_btn']=="Send"){
    $checkbox = $_POST['checkbox']; //from name="checkbox[]"
    $countCheck = count($_POST['checkbox']);

    for($i=0;$i<$countCheck;$i++){
        $del_id = $checkbox[$i];
        $sql2 = "UPDATE retained_file_mst SET mark_to_dispose=1 WHERE file_serial_id='$del_id'";
        $result2 = mysql_query($sql2,$conn);
    }

    // if successful redirect to delete_multiple.php
    if($result2){
        echo "success";
    }else{
        echo "error";
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T10:40:27.843

您可以像这样访问您的复选框：

```
$checkbox = isset($_POST['checkbox']) ? $_POST['checkbox'] : 0; 
```

这允许您在用户输入时将其设置为正确的值，如果用户未检查则将其设置为 0。

另一种选择是将其设置为 0，这对于数据库之类的东西可能更保守。

### 编辑

由于您实际上将它用作数组，这会更好：

```
$checkbox = isset($_POST['checkbox']) ? $_POST['checkbox'] : array(); 
```

或者只是快速`if`查看 $checkbox 是否是一个数组：

```
if(is_array($checkbox)){
    // do the for statement
} 
```

PS 如果您希望人们理解您的问题，请使用代码格式。这次我为你做了

# logic - 一个例子来说明：“编码只是抽象的 p‌r‌o‌b‌l‌e‌m 解决方案”指向一个完整的外行？

> ID：11260182
> 
> 赞同：0
> 
> 时间：2012-06-29T10:30:40.017
> 
> 标签：logic

不久前我在酒吧里和某人交谈，不可避免的问题是“你是做什么的？” 上来了。我的回答“哦，我刚毕业；我在 X 公司工作。我是一名程序员”并没有让她很满意。

我已经进行了一百次这样的对话，但人们对答案从来都不是很满意。他们总是有更多的问题。我认为这是因为，在大多数情况下，人们并不真正了解程序员的*工作*。这个问题的答案通常会让你对一个人有所了解（有点）：会计师可能善于分析并擅长数字，律师可能擅长文字和辩论等，而“程序员”则不然。

所以我试图给出一个能够提供这种洞察力的答案。

我试图用一个经典编程问题的例子来说明我的观点“嗯，这基本上是花哨的问题解决”。

跳入我脑海的第一件事（出于某种原因）是最小子集问题......但我必须解释数组、时间复杂度等我想到了 n-queens 问题，但她从未见过棋盘在她的生活中（是的，我知道）河内之塔一般来说太难想象了......

所以我被卡住了，话题改变了。

你们能想出一个问题的例子吗？一个完整的外行（wo）人可以理解，这会让某人了解程序员必须做的那种思考？（并且通过扩展让我回答关于我如何谋生的尴尬问题）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T14:48:33.237

我也被问到我在做什么，基本上，我所说的只是你对此不太了解，这会让你得到以下两种回答之一：“试试我”，她很感兴趣 -> 转到下一部分评论，否则她会闭嘴，认为你认为她不聪明。谨慎使用。

现在，如果她说试试我，你就有挑战了。显然你所做的事情会让她无法理解，但你知道你可以向她解释一下。基本上，我试图解释的是我是一个逻辑学家，有点像魔术师。当需要告诉计算机做某事而没有其他人知道如何告诉它时，他们会打电话给我。有时它很简单，有时它就像用手指攀登珠穆朗玛峰，完成一些不可能完成的任务。想象一下世界上最大的词搜索，而你不知道你在寻找什么词。我就是做这个的。我找到了那些话。所以你可以想象，我很快就会注意到小事并记住它们。;)

这应该会引起任何值得你花时间的女性的回应。祝你好运！

# jsf - PhaseListener：表单提交时未调用 beforePhase 方法

> ID：11260186
> 
> 赞同：0
> 
> 时间：2012-06-29T10:31:03.653
> 
> 标签：jsf, phaselistener

我正在尝试将焦点设置为有错误的 inputText。当我单击以从另一个页面导航到我的表单时，我的 beforePhase() 代码被命中。但是，在我单击提交后的表单中，我的 beforePhase() 代码未命中。

我的 inputText 元素上的 requiredMessage/validatorMessage 属性是否会阻止它到达我的 beforePhase() 代码？

有任何想法吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T15:50:20.983

问题是客户端验证阻止它走得那么远。关闭客户端验证（jsValidation =“false”），现在它可以工作了。

# master-pages - 在 asp.net 4.0 中单击母版页上的链接时收到错误消息

> ID：11260189
> 
> 赞同：0
> 
> 时间：2012-06-29T10:31:17.313
> 
> 标签：master-pages, asp.net-4.0

**母版页上的脚本链接：**

```
<head runat="server">
<script src="<%=ConfigurationManager.AppSettings["ApplicationURL"].ToString()%>Scripts/jquery-1.7.2.js" type="text/javascript" language="javascript"></script>
</head> 
```

**Default.aspx 页面**

```
<a class="level1" href="VideoLibrary/VideoUpload.aspx">Video Library</a> 
```

当我单击此超链接时，我收到以下错误消息：

![在此处输入图像描述](../Images/95ee39126e24ac506f071a3a2af28e18.png)

我应该怎么办？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T10:45:58.420

尝试将 Script 标签包含在 PlaceHolder 中：

```
<asp:PlaceHolder runat="server">
   <script src="<%=ConfigurationManager.AppSettings["ApplicationURL"].ToString()%>Scripts/jquery-1.7.2.js" type="text/javascript" language="javascript"></script>
</asp:PlaceHolder> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T10:38:03.460

您不能在`<head runat="server">`标签中使用表达式。您需要`<script>`通过`Page.Header`属性添加的内容。

```
 HtmlGenericControl script = new HtmlGenericControl("script");
 script.Attributes.Add("src", System.Configuration
            .ConfigurationManager
            .AppSettings["ApplicationURL"] 
                 + "Scripts/jquery-1.7.2.js");
 script.Attributes.Add("type", "text/javascript");
 Page.Header.Controls.Add(script); 
```

# java - 文件编写器 Java ; 如何覆盖

> ID：11260190
> 
> 赞同：1
> 
> 时间：2012-06-29T10:31:20.863
> 
> 标签：java, file, writer

我正在为我的游戏制作高分实现。这就是我想做的事情：我有包含字符串名称和整数分数的对象分数。现在 ：

*   如果 Name 不在文件中，则添加它
*   如果名称在文件上，则在空格后取字符串并转换为整数，所以我得到了分数。

现在，如果分数比实际分数好，我必须在文件上覆盖它……这是我的问题……我可以这样做吗？我怎样才能在文件的某个点将一个字符串准确地写入另一个字符串？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-29T10:34:44.260

对于这种需求，通常认为替换文本文件中的文本过于繁琐，因此通常的做法是读入整个文件，进行替换并编写整个文件的新版本。如果您有大量数据，您将使用数据库或 NoSQL 解决方案。

PS考虑使用序列化，它可以使事情变得更容易。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-29T10:46:41.823

我同意这最好通过完全重新序列化整个数据库来完成。在现代计算机上，您可以为每个磁盘推送 30MB/s 的线性写入（如果有足够的缓存则更多）。如果您要处理超过 30MB 的数据，那么您真的需要一个数据库（HSQLDB、DerbyDB、BerkleyDB），这些都是微不足道的数据库。或者一路去postgres/mysql。

但是，覆盖现有文件的 FIXED 大小部分的方法（或者更确切地说，模拟这样做的方法）是使用：

```
RandomAccessFile raf = new RandomAccessFile(fileName, "rw");
try {
  raf.seek(position);
  raf.writeInt(newScore);
  raf.close();
} finally { raf.close(); } 
```

注意使用 writeInt 而不是 raf.write(Integer.toHexString(newScore).getBytes())，因为你真的需要固定它的大小。

现在，如果文本文件本质上是 ascii（例如，人类将读取文件），因此该值不能是二进制的。也许你可以保留它 HexString（因为它的大小是固定的），或者你可以零 -填充十进制字符串：

但是你绝对不能做的就是将字符串增加 1 个字节。所以：

```
bob 15
joe 7
nina 981 
```

不能将 joe 的分数替换为 10，除非您填充了一堆空格。

如果这是您的数据文件，那么您绝对必须重写整个文件（即使您编写额外的代码仅从更改点开始重写 - 从统计上讲，这将是文件的 50%，因此不值得烦人。

另一件事——如果你重写，你有缩短文件的风险。为此你需要调用 raf.setLength(0); 在写入第一个字节之前。否则，您会在新文件末尾看到幻影文本。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-29T10:39:49.720

> 我有包含字符串名称和整数分数的对象分数。

[`Properties`](http://docs.oracle.com/javase/7/docs/api/java/util/Properties.html)为此请使用文件。它提供了一个简单的界面来加载和保存文件、获取键（名称）以及设置或检索值（分数）。 `String`值被存储，但它们可以轻松地转换为整数。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-03-30T00:27:07.843

```
final Map<String,Long> symbol2Position = new ConcurrentHashMap<>();
final Map<String,Integer> symbol2Score    = new ConcurrentHashMap<>();
final String fileName;
final RandomAccessFile raf;
// ... skipped code
void storeFull() {
     raf.position(0);
     raf.setLength(0);
     for (Map.Entry<String,Long> e : symbol2Position.entrySet()) {

        raf.writeUTF8(e.getKey());
        raf.write(',');
        symbol2Score.put(e.getKey(), raf.position());
        raf.writeUTF8(String.format("%06d",e.getValue()));
        raf.write('\n');
     }
}
void updateScore(String key, int newScore) {
    if (symbol2Score.containsKey(key)) {
       symbol2Score.put(key, newScore);
       raf.position(symbol2Position.get(key));
       raf.writeString(String.format("%06d", newScore));
    } else {
       symbol2Score.put(key, newScore); 
       long fileLen = raf.length();
       symbol2Position.put(key, fileLen);
       raf.position(fileLen);
       raf.writeString(String.format("%06d", newScore));
    }
} 
```

我可能宁愿使用 DB 或二进制映射文件.. 意思是每个字段 8B 的文件，4B 指向用户名位置，4B 表示分数。但这允许人类可读的数据文件，同时使更新比仅仅重写属性文件更快。

查看 LevelDB - 地球上最快的嵌入式系统数据库。:) 它在上面的主要内容是每秒数千/数百万次更新，而无需在多 GB 文件中随机更新 6 个字节的 rand-seek-rewrite 成本。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-06-29T10:34:31.543

只是一个想法，名称和分数的文件存储有什么具体原因吗？

似乎a`Map<String, Integer>`会更好地为您服务...

# jvm - 如何设计基于堆栈的机器的指令集？

> ID：11260193
> 
> 赞同：1
> 
> 时间：2012-06-29T10:31:41.230
> 
> 标签：jvm, clr, instruction-set, vm-implementation, stack-machine

基于堆栈的虚拟机（如 CLR 和 JVM）具有不同的指令集。在创建虚拟机时设计指令集背后有什么理论吗？例如，有 JVM 指令集将常量从 0-5 加载到堆栈上

```
iconst_0
iconst_1
iconst_2
iconst_3
iconst_4
iconst_5 
```

而在 CLR 中有指令集将数字从 0 加载到 8 到堆栈中，如下所示

```
ldc.i4.0
ldc.i4.1
ldc.i4.2
ldc.i4.3
ldc.i4.4
ldc.i4.5
ldc.i4.6
ldc.i4.7
ldc.i4.8 
```

为什么没有`ldc.i4.9`，如果`ldc.i4 <int32 (num)>`有，为什么我们需要上述操作码？还有其他类似的。

我很想知道不同VM的操作码之间存在这种差异的原因是什么？是否有任何特定的理论来设计这些操作码，或者它完全由 VM 本身的特性驱动，还是取决于高级语言结构？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T04:24:30.560

典型的答案是，因为它们是“字节码”，所以只有 256 个，所以你不想用完整个范围。您需要为初始设计时未考虑的新字节码留出空间。

因此，通常所做的是对常见模式的统计分析并尝试缩短它们。（即：不必总是使用通用的 ldc，而是使用 iconst0 等......作为更短/更密集的版本）。

然后我会猜测，在设计时，CLR 和 JVM 人员只需要非常小的数字。

# ios - 如何修复我的 Cydia 应用程序的用户目录权限？

> ID：11260196
> 
> 赞同：1
> 
> 时间：2012-06-29T10:32:01.357
> 
> 标签：ios, xcode, crash, cydia

我在 Cydia 上托管的应用程序有问题。用户抱怨应用程序在启动时崩溃。该应用程序使用CoreData，我认为它与此有关。奇怪的是，它在测试时使用模拟器或在我的设备上运行良好。但是一旦通过 Cydia 安装它就会崩溃。

事实证明，使用 SBSettings 中的“修复用户目录权限”可以解决此问题。

现在我能做些什么呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T22:10:25.587

我刚刚与 BigBoss 的存储库人员讨论了这个问题。

我从来没有真正得到明确的答案，但在我看来，当 Cydia 安装您的应用程序时，它不一定（明确地）为您的应用程序设置所有权。这对我来说似乎很奇怪。就我而言，他们正在测试安装我的应用程序，并看到它归 user/group = { 1000 / 100 } 所有，这是我准备 .deb 包的机器上的 linux 用户 ID 和组 ID！

如果我构建一个 .deb 包，将其部署到我自己的本地测试存储库，然后使用 Cydia 安装它（指向我自己的存储库），我也可以看到相同的行为。

无论如何，我向他们解释了这一点，他们做了一些事情来解决它（我没有更多的东西）。

但是，另一种选择是手动修复安装后脚本中的权限。在您的 .deb 包中，您将拥有以下文件夹和文件结构：

*   Debian/控制
*   Debian/postrm
*   Debian/postinst
*   Debian/preinst

如果你把它放在你的**postinst**脚本中，我认为它应该立即解决这个问题，之后不必进入 SBSettings：

```
#!/bin/bash

chown -R root.wheel /Applications/MyAppName.app/

exit 0 
```

例如，如果您需要创建其他目录，您可以在脚本中执行更多操作。但是，以上内容至少足以更改 .app 目录本身的所有权。

[这个 BigBoss 链接建议在您的应用程序](http://thebigboss.org/hosting-repository-cydia/submit-your-app/compile-for-cydia-submission)**代码**中创建额外的目录，并指出安装程序以**root**身份运行，而您的应用程序通常以用户**mobile**运行。根据您在做什么，最好在`postinst`（根）或应用程序（移动）中修复所有权/权限。

# gwt - 如何使用 GWT 获取一个月中的天数或天数列表？

> ID：11260200
> 
> 赞同：0
> 
> 时间：2012-06-29T10:32:17.627
> 
> 标签：gwt, gwt-2.4

GWT 中这段代码的对应部分是什么？

```
public int returnAllDaysOf(2012,6){

        Calendar calendar = Calendar.getInstance();

        calendar.set(2012, Calendar.FEBRUARY, 1);

        int daysOfFeb = calendar.getActualMaximum(Calendar.DAY_OF_MONTH);

        return daysOfFeb;

 } 
```

在此先感谢您的帮助。

我想在客户端获取一个月的天数。我搜索了谷歌和 StackOverFlow，但没有得到任何东西。

例如二月有 29 天，比赛有 31 天等等......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T12:37:12.993

我不知道直接的方法，但是您可以通过将一个月添加到您的日期来计算此值，然后计算天数的差异：

```
final Date myDate = ...;

final Date copyOfDate = CalendarUtil.copyDate(myDate);
CalendarUtil.addMonthsToDate(copyOfDate, 1);

final int daysBetween = CalendarUtil.getDaysBetween(myDate, copyOfDate); 
```

[注意：如果 myDate 类似于 2012-01-31，这甚至可以工作。copyOfDate 然后是 2012-03-02 （因为 2 月没有 31 天），结果再次正确。]

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-14T18:59:56.943

“作弊”的做法：

```
int daysInCurrentMonth = new Date(year-1900, month+1, 0).getDate(); 
```

IE

```
int daysInJanuary2014 = new Date(114, 1, 0).getDate(); 
```

基本上将`Date`对象设置为`0th`下个月的日期，然后获取该月的日期。

*注意*：`Date(int year, int month, int date)`期望`year=calendarYear-1900`（即 2014=114）和月份是`0-based`（即 1 月将是第 0 个月）

是的，我知道这个构造函数已被弃用，但我仍然使用它。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2017-10-25T14:15:37.627

```
 DateField dfMois = new DateField();

        Calendar calendar = Calendar.getInstance();

        calendar.setTime(dfMois.getValue());

        Date date = dfMois.getValue();

        Date dateCopy = dateFin;

        dateCopy.setDate(calendar.getActualMaximum(Calendar.DAY_OF_MONTH));

        if(date.getMonth() == Calendar.FEBRUARY + 1){
            date.setDate(31 - dateCopy.getDate());
            date.setMonth(date.getMonth()-1);
        }
        else{
            date.setDate(dateCopy.getDate());
        }
        dfMois.setValue(date); 
```

在你的代码中......它工作。

# xml - xml架构定义问题

> ID：11260201
> 
> 赞同：-1
> 
> 时间：2012-06-29T10:32:21.217
> 
> 标签：xml, xsd, schema

以下输入的 xml 架构是什么：

```
<?xml version="1.0" encoding="utf-16"?>
<string>&lt;!--This file generated by the XMLPull tool on 06/29/2012 03:24:18 AM--&gt;
&lt;!--Datasource: Ticket--&gt;
&lt;DATASET&gt;&lt;DATAROW&gt;&lt;TicketDesc&gt;Test Data. Do not Close.&lt;/TicketDesc&gt;&lt;/DATAROW&gt;&lt;/DATASET&gt;</string> 
```

对此：

```
<?xml version="1.0" encoding="UTF-16"?><!--This file generated by the XMLPull tool on 6/29/2012--><!--Datasource: Ticket--><DATASET><DATAROW TicketDesc="Test Data. Do not Close."/></DATASET> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T11:20:40.887

对于任何给定的输入文档，它所遵循的模式数不胜数。您的第一个输入文档包含一个`<string>`包含一些（相当复杂的）文本的元素。在频谱的两端，一种可能的模式是允许`<string>`元素具有任何内容的模式，另一种是允许`<string>`元素准确包含您显示的文本的模式。您没有提供任何线索来说明您希望您的架构在这个范围内的哪个位置——也就是说，您希望它的约束程度。

请记住，模式描述了一类文档。我们不能从类的单个实例中归纳出该类。

# ruby - Gem Daemons - 如何运行几个不同的守护进程

> ID：11260203
> 
> 赞同：0
> 
> 时间：2012-06-29T10:32:27.157
> 
> 标签：ruby, daemon

基本上我只想在我的 ruby​​ 脚本中运行几个守护进程：

```
require 'daemons'

Daemons.run path_1, { :ARGV => ['start'], :app_name => 'app1', :multiple => true, ... }
Daemons.run path_2, { :ARGV => ['start'], :app_name => 'app2', :multiple => true, ... } 
```

但是当 ARGV[0] == 'start' （与 'status'/'stop' 完美配合）时，第二个 Daemons.run 永远不会被调用。什么是正确的方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T08:15:26.213

来自[http://daemons.rubyforge.org](http://daemons.rubyforge.org)

3-从另一个应用程序控制一堆守护进程

布局：您有一个应用程序 my_app.rb 想要将一堆服务器任务作为守护进程运行。

```
# this is my_app.rb

require 'rubygems'        # if you use RubyGems
require 'daemons'

task1 = Daemons.call(:multiple => true) do
  # first server task

  loop {
    conn = accept_conn()
    serve(conn)
  }
end

task2 = Daemons.call do
  # second server task

  loop {
    something_different()
  }
end

# the parent process continues to run

# we can even control our tasks, for example stop them
task1.stop
task2.stop

exit 
```

合身吗？

# performance - std::vector 的性能 与标准::向量

> ID：11260205
> 
> 赞同：2
> 
> 时间：2012-06-29T10:32:41.857
> 
> 标签：performance, pointers, stl, vector, stdvector

在非 POD 数据类型的 std::vector 中，对象向量和指向对象的（智能）指针向量之间有区别吗？我的意思是编译器对这些数据结构的实现有所不同。

例如：

```
class Test {
   std::string s;
   Test *other;
};

std::vector<Test> vt;
std::vector<Test*> vpt; 
```

vt和vpt之间可能没有性能差异吗？

换句话说：当我定义 a 时`vector<Test>`，编译器会在内部创建 a`vector<Test*>`吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T10:35:12.437

通常，无论存储在向量中的类型是什么，都可以复制其实例。这意味着如果你存储一个 std::string，std::string 的实例将被复制。

例如，当您将 Type 推送到向量中时，Type 实例将被复制到位于向量内部的实例中。指针的复制会很便宜，但是，正如 Konrad Rudolph 在评论中指出的那样，这不应该是您唯一考虑的事情。

对于像您这样的简单对象`Test`，复制将如此之快以至于无关紧要。

此外，在 C++11 中，移动可以避免在不需要时创建额外的副本。

简而言之：指针将被更快地复制，但复制并不是唯一重要的事情。当它成为问题（或情况需要它）时，我会首先担心可维护的逻辑代码和性能。

* * *

至于您关于内部指针向量的问题，不，向量被实现为在必要时定期调整大小的数组。你可以在网上找到 GNU 的 libc++ 实现向量。

答案在低于 C++ 级别时变得复杂得多。由于整个程序无法放入寄存器，因此当然必须涉及指针。不过，我对那个低级别的了解还不够多，无法详细说明。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-25T20:21:42.280

> 换句话说：当我定义一个向量时，编译器会在内部创建一个向量吗？

不，这是 C++ 标准不允许的。以下代码是合法的 C++：

```
vector<Test> vt;
Test t1; t1.s = "1"; t1.other = NULL;
Test t2; t2.s = "1"; t2.other = NULL;
vt.push_back(t1);
vt.push_back(t2);
Test* pt = &vt[0];
pt++;
Test q = *pt; // q now equal to Test(2) 
```

换句话说，向量“衰减”为数组（像访问 C 数组一样访问它是合法的），因此编译器实际上必须在内部将元素存储为数组，而不仅仅是存储指针。

但请注意，数组指针只有在向量没有被重新分配时才有效（这通常只在大小增长到超出容量时才会发生）。

# c# - 是否可以在父类中创建变量，每个派生类型初始化一次？

> ID：11260209
> 
> 赞同：1
> 
> 时间：2012-06-29T10:32:53.527
> 
> 标签：c#, c#-4.0

我正在使用 IDataErrorInfo 接口来验证我的实体。只要验证逻辑从属性中读取元数据，所有实体都是一样的，所以我创建了类

```
public class DataErrorInfo : IDataErrorInfo 
```

所有实体都源自它。问题是，我希望缓存派生类的反射信息以加快验证速度，因此每个实体类型都应该在每个正在运行的应用程序中初始化这个缓存一次。

我在考虑使用`static readonly`字段，但发现它是用第一次使用的实体类型的反射信息初始化的，所以如果有实体 A 和实体 B，并且首先访问实体 A，实体 B 将具有实体 A 反射缓存。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T10:36:28.733

您可以将 a`Dictionary<Type, DataErrorInfo>`实现为[Singleton](http://csharpindepth.com/Articles/General/Singleton.aspx)。

单例模式强制只有一个`Dictionary`存在于内存中。它`Dictionary`本身将强制每个类型获取一个条目作为`Key`. 您`Value`将成为您想要缓存的任何反射信息。在这种情况下，它看起来像`DataErrorInfo`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-29T10:41:58.373

在泛型类中，如果你有一个静态的，它是封闭的泛型类型，你可以利用它。将您的基类定义为泛型（看起来有些奇怪但有效的约束）

```
public class DataErrorInfo<T> : IDataErrorInfo where T : DataErrorInfo<T>{
...
} 
```

然后你像这样定义你的派生类（注意派生类本身作为 T 传递给基本泛型类型）

```
public class EntityClass : DataErrorInfo<EntityClass>{
...
} 
```

这样，只要您不执行以下操作，任何静态都将作用于派生类而不是父类

```
public class AnotherEntityClass : DataErrorInfo<EntityClass>{
...
} 
```

# xtext - 如何在 xtext 项目之外使用 xtext 推断的 JVM 模型？

> ID：11260216
> 
> 赞同：0
> 
> 时间：2012-06-29T10:33:35.520
> 
> 标签：xtext

在 Xtext 文档 (http://www.eclipse.org/Xtext/documentation.html#_17) 的**Inferring a JVM Model**部分中，它首先说：“在许多情况下，您会希望您的 DSL 概念可用作Java 元素。例如，实体将成为 Java 类，并且应该可以这样使用”。

在上面的示例中，如何在 xbase**之外**使用生成的 Entity 类，即在与 xtext 不同的项目中的真实 Java 代码中？

我本质上要问的是，我由模型 Inferrer 创建的 Java 类是否真的可以用作真正的 Java 类，它们可以在一个完全不同的项目中调用它们的方法并从 Java 代码访问字段，如果可以的话，这怎么能做完了？

我浏览文档让我担心生成的“Java 类”只是 Xbase 类型，仅在 xtext 上下文中引用，因此不是真正的 Java 类......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T21:45:36.787

Xbase 编译器可以将所有 Xbase 表达式编译成普通的 Java 代码，在 Java 代码可用的任何地方都可以使用。

如果您将自己的元素添加到语言中，则必须扩展生成器以也支持这些元素 - 为此您定义自己的 JVMModelInferrer。

基本的 Xtext 编译器然后执行 JVMModelInferrer，计算可能（或可能不）包含 Xbase 表达式的 JVM 模型；然后这个 JVM 模型可以生成为 Java 可编译（因此 Java 可重用）代码。

如果您想测试此功能，只需生成 Xtext 域模型示例（可从 Xtext/Examples 类别中的 New... 向导获得），并评估结果：当您编辑域模型时，Xtext 会自动生成可用的 Java 代码（如果设置了所需的依赖项）。

# android - 如何实现滑动按钮？

> ID：11260218
> 
> 赞同：2
> 
> 时间：2012-06-29T10:33:37.430
> 
> 标签：android, android-button

> **可能重复：**
> [Android：如何创建幻灯片（开/关）按钮](https://stackoverflow.com/questions/8150596/android-how-to-create-slide-on-off-button)

我想在我的 Android 应用程序中创建滑动按钮，使其如下所示：

![在此处输入图像描述](../Images/88a2e62440b4bf662b78ff183b680e98.png)

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-29T10:35:45.460

使用 [ToggleButton](http://developer.android.com/reference/android/widget/ToggleButton.html)创建此滑动按钮

请参阅本教程以在 Android 中创建自定义切换按钮

[适用于 Android 的性感风格切换按钮](http://www.mokasocial.com/2011/07/sexily-styled-toggle-buttons-for-android/)（[archive.org 镜像](https://web.archive.org/web/20150324115134/http://www.mokasocial.com/2011/07/sexily-styled-toggle-buttons-for-android/)）

**编辑：**如果您使用的是 Android API LEVEL 14 或更高版本，那么您还可以使用[Switch Widget](http://developer.android.com/reference/android/widget/Switch.html)来创建滑动按钮，请参见此示例：

[创建交换机](http://docs.xamarin.com/android/tutorials/Introduction_to_Ice_Cream_Sandwich)

# c# - 更改gridview分页页脚中所选页码的颜色

> ID：11260235
> 
> 赞同：3
> 
> 时间：2012-06-29T10:34:55.993
> 
> 标签：c#, asp.net, gridview

我有一个gridview 和sqldatasource。

Gridview ，分页号码。

当您在 gridview 的页脚中选择数字页面时，它将在所选数字下划线。

*   有什么方法可以改变所选数字的颜色吗？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2015-11-04T13:17:40.567

解决了............您可以使用 CSS 类来执行此操作：这是一个示例。

```
 <style type="text/css">
    .pager span { color:#009900;font-weight:bold; font-size:16pt; }
  </style>

<asp:GridView ID="GridView1" runat="server" AllowPaging="True" AllowSorting="True" AutoGenerateColumns="False" DataSourceID="SqlDataSource1"  PageSize="5  >
<PagerStyle CssClass="pager" /> 
```

[http://forums.asp.net/t/1092990.aspx?Highlight+current+page+on+gridview+pager](http://forums.asp.net/t/1092990.aspx?Highlight+current+page+on+gridview+pager)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-29T10:38:14.540

查看分配的分页类`CssClass="pagination"`

```
<PagerStyle CssClass="pagination" HorizontalAlign="Center" 
 VerticalAlign="Middle"/> 
```

* * *

```
.pagination .current {
    background: #26B;
    color: #fff;
    border: solid 1px #AAE;
} 
```

# grails - Grails 2.0.X 自动重新加载

> ID：11260239
> 
> 赞同：1
> 
> 时间：2012-06-29T10:35:02.227
> 
> 标签：grails, sts-springsourcetoolsuite, grails-2.0

我安装了带有 STS 2.9.2 的 grails 2.0.4，我面临的问题是控制器的自动重新加载没有发生。

我尝试了以下方法

1）圣杯清洁

2) 删除%user_home%/.grails/projects/%下的项目

3) 创建了一个新项目

有什么解决方法吗

# wcf - 带有详细返回信息的自定义 UserNamePasswordValidator？

> ID：11260245
> 
> 赞同：0
> 
> 时间：2012-06-29T10:35:19.513
> 
> 标签：wcf, http, authentication, rest

我开始通过 WCF 为我的 c#/.net 应用程序开发 REST API。

我通过自定义的 UserNamePasswordValidator 使用基本 HTTP 身份验证。它验证我的 API 方法。

它基于此示例代码，我可以毫无问题地使其工作：

```
public class CustomUserNameValidator : UserNamePasswordValidator
{
    public override void Validate(string userName, string password)
    {

        if (null == userName || null == password)
        {
            throw new ArgumentNullException("You must provide both the username and password to access this service");
        }

        if (!(userName == "user1" && password == "test") && !(userName == "user2" && password == "test"))
        {
            throw new FaultException("Unknown Username or Incorrect Password");
        }
    }
} 
```

当身份验证失败时，我只能向客户端发送“401 Unauthorized”。我知道这是应该的方式，但是在这种情况下，是否有可能以某种方式将一些详细信息发回给我的来电者？一些自定义的错误消息或更详细的信息。如果没有，我的客户端只有身份验证失败的 http 信息，在我的情况下还不够。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T11:00:40.970

也许你应该使用 WebFaultException<> ，在我的例子中我是这样使用的：`throw new WebFaultException<string>("Bad Request", HttpStatusCode.Unauthorized);`

# google-apps-script - 如何获取在使用新 HtmlService 创建的 UI 中输入的值

> ID：11260247
> 
> 赞同：3
> 
> 时间：2012-06-29T10:35:36.477
> 
> 标签：google-apps-script

我可以使用以下方法获取/访问 UI 元素的值，

```
e.parameter.elementname or app.getElementById(id) 
```

如果我使用 UiApps 或 GUI builder 创建 UI，

```
app.add(app.loadComponent("MyGui"));
app.getElementbyId('textbox1').setText("Hi"); 
```

如果我使用， HtmlService.createHtmlOutputFromFile('myPage'); 如何获取在 html 表单元素中输入的值？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-02T20:04:40.043

作为客户端 JavaScript 的替代方案，您还可以创建简单的表单提交给`doPost()`处理程序，然后处理程序处理数据。我创建了一个示例脚本来演示：[Run](https://script.google.com/macros/s/AKfycbw7Hr3-6wRfHzyVAW_98mlXwpPk13ksHZn4rCY3HGMEyYiXJw8/exec) , [Source](https://script.google.com/d/1i65oG_ymE1lreHtB6WBGaPHi3oLD_-wPd5Ter1nsN7maFAWgUA9DbE4C/edit)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-29T17:59:38.150

使用 HtmlService 时，您需要重新考虑您的应用程序主要基于客户端而不是基于服务器。您可以（在客户端 JavaScript 中）将更改处理程序添加到任何元素并使用该值执行某些操作，包括使用 google.script.run.myFunction(someValue) 调用服务器函数。在此处查看新的用户指南：[https ://developers.google.com/apps-script/html_service](https://developers.google.com/apps-script/html_service)

# reporting-services - 在 SSRS 报表管理器中看不到新文件夹、新数据源、上传文件等选项？

> ID：11260250
> 
> 赞同：3
> 
> 时间：2012-06-29T10:35:44.817
> 
> 标签：reporting-services, rdl, reportmanager

我正在尝试使用报告管理器来部署报告。我是SSRS的新手。

当我打开报告管理器 URL 时，我看到类似这样的内容。

![我的报告经理](../Images/329485bef96a415a7b8978449cf249c2.png) ![在此处输入图像描述](../Images/cf833c5ba1a3df1229f715405e2609c1.png)

所以我找不到任何上传 rdl/create dataset 等的方法。当我用谷歌搜索时，我得到了以下图片。

![谷歌报告管理器](../Images/708381687d19f6fa2d1b71a309e0a19b.png)

![在此处输入图像描述](../Images/eb0e6a8c6f1d37838f99077f7fb1b0d2.png)

这里有部署报告的选项。我无法看到这个可能是什么原因？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T14:19:22.800

首先，如果您在本地执行报告，您应该**以管理员身份****运行**IE ，如果文件夹仍然没有显示，您应该配置**站点设置**并添加当前用户。

# wcf - 如何在不同的项目中创建启用 Silverlight 的 WCF 服务

> ID：11260253
> 
> 赞同：0
> 
> 时间：2012-06-29T10:36:09.823
> 
> 标签：wcf, silverlight, web-services

我想在目标网页之外开发一个启用 Silverlight 的 WCF 服务。

可能吗 ？WCF 项目选项卡中没有模板。

如果是的话怎么办？

也许可以像往常一样创建它，然后将其移动（复制）到 WCF 项目。

# javascript - 使用 javascript 获取首页（母版页）

> ID：11260254
> 
> 赞同：1
> 
> 时间：2012-06-29T10:36:16.973
> 
> 标签：javascript, iframe, master-pages

我正在使用母版页，里面是一个 iframe，在 iframe 里面我有时有另一个 iframe。所以我想使用javascript获取母版页。

我正在使用它，但由于某种原因它会循环并且永远不会停止。

```
<script type="text/javascript" language='javascript'>
   var wind = window;
   while(wind.parent!=null)
   {
     wind=wind.parent;
   }
   wind.document.getElementById('consultar processos').style.color = "#D10759";
</script> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-29T10:41:10.230

[window.top](https://developer.mozilla.org/en/DOM/window.top)是你的朋友 :)

> 返回对窗口层次结构中最顶层窗口的引用。
> window.parent 属性返回当前窗口的直接父级，window.top 返回窗口对象层次结构中最顶层的窗口。
> 
> 当您处理位于父级或父级的子框架中的窗口并且您想要访问顶级框架集时，此属性特别有用。

# google-chrome - Chrome中的用户脚本错误

> ID：11260256
> 
> 赞同：1
> 
> 时间：2012-06-29T10:36:19.813
> 
> 标签：google-chrome, userscripts

我目前没有使用用户脚本，我只是在检查我正在处理的页面的“网络”选项卡以查看它在做什么时注意到以下错误（它需要永远为我的 GET 请求提供服务）。

`Uncaught ReferenceError: unsafeWindow is not defined`
`chrome-extensions://bpcnnanbbiobnpfamcdpkopledhphmh/fbex.js:864`

谁能告诉我这是什么？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T07:46:34.130

这是由 Extension 引起的`Hear Youtube`。它似乎对其他网站没有任何不利影响。

# forms - Symfony2：那些方法论“嵌入式表单”和“数据转换器”之间的区别

> ID：11260257
> 
> 赞同：3
> 
> 时间：2012-06-29T10:36:23.450
> 
> 标签：forms, service, symfony

考虑以下场景

我们有一个简单的数据库，它涉及两个实体：`user`和`category`.
对于我们的假设，假设 a`user`可以只有一种类型，`category`并且 a`category`可以与*n* `users`相关联。

现在，考虑一个网页，其中 a `user`-say-`ROLE_ADMINISTRATOR`可以编辑用户表并将它们关联到不同的表`category`。
据我所知（而且我对 symfony 还是很陌生），如果我同时使用 Doctrine 和 symfony2，使用 - 比方说 - 注释方法，我将有两个实体（php 类）。

* * *

**嵌入式表单**
我将创建一个表单，它会显示`user`并且，为了显示 - 当然会持续存在！- 也是他`category`我“选择”遵循“嵌入形式”的策略。
话虽如此，实体已经创建，我将不得不创建一个表单`category`（假设`formBuilder`我将只添加`id`的属性`category`）。
之后，我必须将`formBuilder`前一个表单添加到 UserType 类中，并且通过“某种魔法”，表单将（在适当的操作之后）呈现为魔法，就像魔法一样，当我发布它时（并绑定，和依此类推）返回所有信息将持久保存到数据库中

**数据转换**
器 AKA 将表单的输入转换为对象，反之亦然。
这样，我将不得不在他的构建器中定义一个 - 比方说 -`CategorySelectorType`将添加一个将执行这些转换的类（服务？）。
现在我们定义数据转换器本身，它将实现`DataTransofmerInterface`（使用他的方法等等......）
下一步将该实体注册到服务中并添加到`UserType`将使用该服务的表单中。

* * *

所以我不明白这两种方法之间的任何“强烈”区别，而是服务的“可重用性”。有人可以为我提供不同的观点并解释我的差异，如果有的话？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T08:42:58.603

**数据转换器不会取代嵌入式表单，而是增强表单并很好地包装数据转换。**

[食谱页面上关于数据转换](http://symfony.com/doc/current/cookbook/form/data_transformers.html)器的第一句话很好地总结了它：

> 您经常会发现需要将用户在表单中输入的数据转换为其他内容以便在您的程序中使用。

在上面的示例中，您可以添加一个类别的下拉列表，以便管理员可以为给定用户选择一个类别。这将使用嵌入式表单来完成。由于类别字段是现有类别的 id，因此无需转换数据。

出于某种原因，您现在希望管理员能够输入该类别的自由文本。现在您需要将文本转换为相关对象。也许您希望他能够使用此文本字段添加新类别或选择当前类别。两者都可以通过使用获取文本并搜索类别的数据转换器来实现。根据您的需要，可以创建和返回不存在的类别。

另一个用例是当用户输入需要在存储之前以某种方式修改的数据时。假设用户输入了街道、门牌号和城市，但您想存储坐标。

**在这两种情况下，您是否将表单嵌入到另一个中都没关系！**

你能在你的控制器中做到这一点吗？当然。在控制器中做这些事情是个好主意吗？可能不会，因为您很难进行测试（在转换器中进行测试时，您可以很好地对转换进行单元测试）或重用它。

**更新**

当然，可以将转换代码放在其他地方。用户对象本身不是一个好地方，因为模型不应该知道实体管理器，这是进行转换所需要的。用户类型是可能的，但这意味着它与实体管理器相关联。

这一切都构成了一个非常强大[的关注点分离](http://en.wikipedia.org/wiki/Separation_of_concerns)概念，它指出一个类应该只做一件事以使其可维护、可重复、可测试等。如果您遵循这个概念，那么应该清楚数据转换本身就是一件事情，因此应该受到威胁。如果您不在乎，您可能不需要转换功能。

# c++ - 如何最好地将方法传递给同一类的方法

> ID：11260260
> 
> 赞同：7
> 
> 时间：2012-06-29T10:36:55.067
> 
> 标签：c++, member-function-pointers

我有这个 C++ 类，它`compute`是我想用“计算内核”提供的一个大而复杂的方法，它是同一个类的方法。我想我会做一些类似的事情

```
class test {
int classVar_ = 42;

int compute_add(int a, int b)
{
   compute(int a, int b, this->add_())
}

int compute_mult(int a, int b)
{
   compute(int a, int b, this->mult_())
}

int compute_(int a, int b, "pass in add or multiply as f()")
{
   int c=0;
   // Some complex loops {
   c += f(a,b)
   // }
   return c;
}

int add_(int a, int b){a+b+classVar_;}
int multiply_(int a, int b){a*b+classVar_;}
...

} 
```

但我不确定我将如何通过`add`或`multiply`. 这种方法的一种替代方法是传入`ENUM`某种类型的 an 来指定`add()`or `multiply()`，但我想避免在循环中使用`switch`or 。`if`

这里的最佳做法是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-29T10:45:45.100

正如您所怀疑的，传递成员函数指针是可以接受的做法。

如果你需要知道语法，它是：

```
int compute_(int a, int b, int (test::*f)(int,int))
{
   int c=0;
   // Some complex loops {
   c += (this->*f)(a,b)
   // }
   return c;
} 
```

使用整数表示成员函数和切换会引入程序员开销，以便在可用操作列表更改时保持最新状态。所以你不希望这样，除非在特定情况下有一些重要的原因。

一种替代方法是`compute`更通用——而不是采用成员函数，而是编写一个采用任何可调用类型的函数模板：

```
template <typename BinaryFunction>
int compute_(int a, int b, BinaryFunction f) {
    // body as before but `f(a,b)` instead of `(this->*f)(a,b)`
} 
```

如果有人想将它与他们自己发明的某个运算符一起使用，这个更通用的模板非常棒，这不是`test`. 但是，在成员函数的情况下使用起来更加困难，因为有人需要捕获`this`. 有几种方法可以做到这一点 - C++11 lambda `boost::bind`, 或写出一个仿函数。例如：

```
template <typename BinaryFunction>
int compute_(int a, int b, BinaryFunction f) {
    // body as before with `f(a,b)`
}

int compute_(int a, int b, int (test::*f)(int,int))
{
    return compute_(a, b, bind_this(f, this));
} 
```

定义`bind_this`有点麻烦：就像`std::bind1st`我们想使用 3-arg 仿函数而`bind1st`只使用二元仿函数一样。`boost::bind`，并且`std::bind`在 C++11 中，更加灵活，并且会处理额外的参数。以下将适用于这种情况，但通常不适用于绑定 2-arg 成员函数：

```
struct bind_this {
    int (test::*f)(int,int);
    test *t;
    int operator(int a, int b) const {
        return (t->*f)(a,b);
    }
    bind_this(int (test::*f)(int,int), test *t) : f(f), t(t) {}
}; 
```

在 C++11 中，您可以只使用 lambda：

```
int compute_(int a, int b, int (test::*f)(int,int))
{
    return compute_(a, b, [=](int c, int d){ return (this->*f)(c,d) });
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-29T10:42:53.883

你有两种选择：

1.  使用[指向成员函数的指针](http://www.parashift.com/c++-faq-lite/pointers-to-members.html)
2.  使用[lambda 函数](http://en.wikipedia.org/wiki/C++11#Lambda_functions_and_expressions)

使用指向成员函数的指针的示例：

```
#include <iostream>

class D
{
public:
  D(int v ) : classVar_(v){}
  int add_(int a, int b){return (a+b+classVar_);}
  int multiply_(int a, int b){return (a*b+classVar_);}
private:
  int classVar_;
};

class test {
public:

int compute_(int a, int b, D &d, int (D::*f)(int a, int b))
{
   int c=0;
   // Some complex loops {
   c += (d.*f)(a,b);
   // }
   return c;
}

};

int main()
{
  test test;
  D d(1);

  std::cout<<"add : " << test.compute_( 5, 4, d, &D::add_ ) << std::endl;
  std::cout<<"add : " << test.compute_( 5, 4, d, &D::multiply_ ) << std::endl;
} 
```

使用 lambda 的示例：

```
#include <iostream>
#include <functional>

class D
{
public:
  D(int v ) : classVar_(v){}
  int add_(int a, int b){return (a+b+classVar_);}
  int multiply_(int a, int b){return (a*b+classVar_);}
private:
  int classVar_;
};

class test {
public:

int compute_(int a, int b, std::function< int(int,int) > f)
{
   int c=0;
   // Some complex loops {
   c += f(a,b);
   // }
   return c;
}

};

int main()
{
  test test;
  D d(1);

  std::cout<<"add : " << test.compute_( 5, 4, [&d](int a, int b){ return d.add_(a,b); } ) << std::endl;
  std::cout<<"add : " << test.compute_( 5, 4, [&d](int a, int b){ return d.multiply_(a,b); } ) << std::endl;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-29T10:47:07.373

使用指向函数的指针。

```
int compute(int a, int b, int (test::*f) (int, int) )
{
   int c=0;
   // Some complex loops {
   c += (this->*f)(a,b)
   // }
   return c;
} 
```

# .net - 复杂数据绑定

> ID：11260261
> 
> 赞同：1
> 
> 时间：2012-06-29T10:36:56.907
> 
> 标签：.net, wpf, xaml, data-binding, binding

我希望这里有人可以帮助我。我很沮丧。

所以这是我的问题：

我有一个属性列表，这些属性是控件的属性。现在我必须在我的属性网格和控件本身之间建立一个绑定。我的控件模板如下所示：

```
<DataTemplate x:Key="LabelVisualObject" DataType="{x:Type ContentControl}">
    <ContentControl Content="{Binding}" ContentTemplateSelector="{StaticResource LabelLayoutTemplateSelector}">
            <ContentControl.Style>
                <Style TargetType="{x:Type ContentControl}">
                    <Style.Triggers>
                    <DataTrigger Binding="{Binding Path=Properties, Converter={StaticResource PropertyConverter}, ConverterParameter=VisualizationObjectTypeAttribute.Layout.Name}" Value="Layout_OneLine">
                            <Setter Property="ContentTemplate" Value="{StaticResource LabelOneLineVisualObject}"/>
                        </DataTrigger>
                        <DataTrigger Binding="{Binding Path=Properties, Converter={StaticResource PropertyConverter}, ConverterParameter=VisualizationObjectTypeAttribute.Layout.Name}" Value="Layout_TwoLines">
                            <Setter Property="ContentTemplate" Value="{StaticResource LabelTwoLinesVisualObject}"/>
                        </DataTrigger>
                    </Style.Triggers>
                </Style>
            </ContentControl.Style>
    </ContentControl>
</DataTemplate> 
```

属性转换器

```
[ValueConversion(typeof(IEnumerable<IPropertyEditorAttribute>), typeof(object))]
public class PropertyConverter : IValueConverter
{

    public object Convert(object value, Type targetType, object parameter, System.Globalization.CultureInfo culture)
    {
        if (value != null && value is IEnumerable<IPropertyEditorAttribute>)
        {
            IEnumerable<IPropertyEditorAttribute> list = value as IEnumerable<IPropertyEditorAttribute>;

            foreach (IPropertyEditorAttribute cur in list)
            {
                if (cur.Name.Equals(parameter.ToString(), StringComparison.InvariantCultureIgnoreCase))
                {
                    return cur.Value;
                }
            }
        }
        return null;
    }

    public object ConvertBack(object value, Type targetType, object parameter, System.Globalization.CultureInfo culture)
    {
        throw new NotImplementedException();
    } 
```

好吧，我的机会是，当用户更改属性网格中的布局时，触发器应该做出反应并更改模板。

有谁知道，我怎么能做到这一点？

迎接帕特里克

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T11:03:20.137

您可能正在寻找一个`DataTemplateSelector`.

你可以在这里找到一个简短的教程：[如何使用 DataTemplateSelector](http://www.switchonthecode.com/tutorials/wpf-tutorial-how-to-use-a-datatemplateselector)

或来自 MSDN 文档：

*   [数据模板概述](http://msdn.microsoft.com/en-us/library/ms742521.aspx)
*   [数据模板选择器类](http://msdn.microsoft.com/en-us/library/system.windows.controls.datatemplateselector.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T11:19:47.047

你有一个`ContentTemplateSelector`适当的地方来设置`ContentTemplate`和你尝试`ContentTemplate`通过一个设置`Style`。同时使用两者将不起作用，并且`ContentTemplateSelector`可能[优先](https://msdn.microsoft.com/en-us/library/ms743230%28v=vs.100%29.aspx)于**本地值**。

# java - 使用从 zip 文件中的文件名派生的特殊字符

> ID：11260265
> 
> 赞同：3
> 
> 时间：2012-06-29T10:37:20.577
> 
> 标签：java, mysql, jdbc, zip

此问题涉及连接到 MySQL (5.5.16) 数据库的 Tomcat 7 Web 应用程序。

当我打开一个`zip`文件时，文件名以`windows-1252`字符集编码，Java 似乎正确解释了这些字符：

```
ZipFile zf = new ZipFile( zipFile, Charset.forName( "windows-1252" ) );
Enumeration entries = zf.entries();
while( entries.hasMoreElements() ) {
    ZipEntry ze = ( ZipEntry ) entries.nextElement();
    if( ! ze.isDirectory() ) {
        String name = ze.getName();
        System.out.println( name ); //prints correct filenames, e.g. café.pdf
    }
} 
```

**在 ZipFile 构造函数中省略 Charset 对象会导致异常**。zip 文件中的文件名正确打印到标准输出，包括变音符号。但是，当我随后尝试将文件名存储在数据库中时，e-acute 被替换为问号（如 mysql 控制台客户端所示）。我之前将 Web 应用程序中的特殊字符插入 MySQL 没有问题。

`é`当我在 Java 源代码中执行 INSERT 时：

```
statement.executeUpdate( "insert into files (filename) values ('café.pdf')" ); 
```

在`é`MySQL 中显示良好。

此外，我的日志文件显示逗号而不是`é: caf‚.pfd`

有谁知道这里会发生什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T12:19:14.530

正如您在评论部分提到的，传入的数据（压缩文件的名称）可以是*不同*的字符集。这对您来说将是一个问题，因为您使用的是 MySQL+JDBC 链接，并且它给您带来了很多限制（例如 MySQL 中的每列一个字符集，而 JDBC 中的每个连接只有一个字符集）。

因此，我建议您将 MySQL 端的字符集（查找和 之类的变量`character_set_server`）切换`character_set_connection`为 UTF8，因为它可以让您传输和存储您可能收到的几乎任何字符。请参阅[此处](http://dev.mysql.com/doc/refman/5.6/en/charset.html)了解如何正确设置 MySQL 服务器。请注意，MySQL 服务器的设置可能具有挑战性，因此请随时 PM 寻求更多帮助。JDBC 将自动适应服务器的`character_set_connection`变量，因此您无需更改 Java 应用程序中的任何内容。

您必须在应用程序中更改的一件事是您必须将所有传入数据转换为 UTF8 以便将其发送并存储在 MySQL 服务器上。

祝你好运。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T10:43:05.440

在存储数据的表中，确保使用正确的排序规则以便能够存储 e-acute 字符

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-02T09:41:42.760

问题已解决。[这篇文章](https://blogs.oracle.com/xuemingshen/entry/non_utf_8_encoding_in)建议文件中`zip`文件名的编码可能`windows-1252`不是`IBM437`. 改变`Charset`从：

```
ZipFile zf = new ZipFile( zipFile, Charset.forName( "windows-1252" ) ); 
```

到

```
ZipFile zf = new ZipFile( zipFile, Charset.forName( "IBM437" ) ); 
```

给出了预期的结果：在 MySQL 中保存获取的文件名时，它使用 é 正确存储。

什么地方出了错？

将 zip 文件中包含的文件名打印到标准输出

```
System.out.println( name ); 
```

让我错误地认为 zip 文件中的文件名被很好地解释了：当我使用`windows-1252`编码打开 zip 文件时，文件名很好地打印到标准输出并带有变音符号：café.pdf。使用其他字符编码，出现了不同的符号而不是 é。

但是在[这个答案](https://stackoverflow.com/a/2220476/824957)的帮助下打印`Unicode`é- 的值时，我可以看到，当打开带有编码的 zip 文件时，实际的 Unicode 值不是（拉丁小写字母 e 带锐角），而是（单个低 - 9引号）。当我打开with charset 时，出现了正确的 Unicode 值 DID。`char``windows-1252``\u00e9``\u201a``ZipFile``IBM437`

当然，当使用 将 a 打印`String`到标准输出时`PrintStream`，`PrintStream`也与某种字符编码相关联。来自`PrintStream`Javadoc：

> PrintStream 打印的所有字符都使用平台的默认字符编码转换为字节。

我正在使用 Windows XP。当我创建一个新的`PrintStream`

```
out = new PrintStream( System.out, true, "IBM437" ); 
```

一切都说得通：使用`IBM437`字符编码打开 zip 文件，并使用新的 PrintStream，é 打印正确。

[没有纯文本这样的东西。](http://www.joelonsoftware.com/articles/Unicode.html)

# javascript - 在 jquery 中结合验证函数并替换类名

> ID：11260274
> 
> 赞同：0
> 
> 时间：2012-06-29T10:37:50.687
> 
> 标签：javascript, jquery, validation

我正在验证我的表单是否有必填字段，并希望用“standard_input_error”类替换“standard_input”类，但我的以下代码不起作用。另外，是否可以组合函数，这样我就不需要为每个需要验证的 id 编写函数（有些文本字段不需要验证，所以我不能将它用于整个表单） . 提前致谢。

```
$('#firstname').blur(function()
{
    if( !$(this).val() ) {
          $(this).addClass('standard_input_error');
    }
});

Firstname * <input type="text" id="firstname" name="firstname" class="standard_input"> 
Last Name*  <input type="text" id="lastname" name="lastname" class="standard_input">
another   * <input type="text" id="another" name="another" class="standard_input"> 
another 2   <input type="text" id="another2" name="another2" class="standard_input">
Field      * <input type="text" id="fieldb" name="fieldb" class="standard_input"> 
Blah blah   <input type="text" id="blah" name="blah" class="standard_input">

Checkbox 1* <input type="checkbox" checked="checked" id="cbox1" name="cbox1" />
Blah bla 1 <input type="checkbox" checked="checked" id="blabla" name="blabla" />
Blee blee1* <input type="checkbox" checked="checked" id="blee" name="blee" />
bloblo 1   <input type="checkbox" checked="checked" id="blo" name="blo" /> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T10:41:16.607

对于文本框，请使用：

```
$('form').find('input[type=text]').each(function(){
    if ($(this).val() == ''){
        $(this).removeClass('standard_input').addClass('standard_input_error');
        return false;
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T10:45:56.963

制作一个通用函数并重用它：

```
$('form input[type="text"]').blur(myValidation);

function myValidation() {
  if( !$.trim( this.value) ) {
      $(this).removeClass('standard_input').addClass('standard_input_error');
  } else {
      $(this).removeClass('standard_input_error');
  }
} 
```

**[演示](http://jsbin.com/uvepey/6/edit)**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-29T10:48:41.267

```
$('.validate').bind('blur',function(){
    if (!$(this).val()){
        $(this).removeClass('standard_input');
        $(this).addClass('standard_input_error');
        return false;
    }
}); 
```

其中“验证”是应用于需要验证的输入字段的类

# c# - 如何在 C# 中将两个数据表合并为一个数据表

> ID：11260275
> 
> 赞同：1
> 
> 时间：2012-06-29T10:37:51.013
> 
> 标签：c#

我有两个数据表，我想合并它们并想要这样的输出；

表 1 值：

```
FirstName   LastName    
  AAA         BBB         
  AAA         BBB 
```

表 2 值：*

```
FullName
  CCC
  CCC 
```

*

现在我希望 FullName 的值和 FirstName 的值合并到 Firstname 的一列中，合并后的输出应该是这样的......

```
FirstName   LastName    
  AAA         BBB         
  AAA         BBB         
  CCC
  CCC 
```

两个出表都有来自 dtable1 的 FirstName 和 LastName 列以及来自 dtable2 的 FullName

我的 C# 应用程序中有这段代码

```
 DataSet firstGrid = new DataSet();
            DataSet secondGrid = new DataSet();
            DataTable table1 = dataGridView3.DataSource as DataTable;
            DataTable table2 = dataGridView2.DataSource as DataTable;
            DataColumn[] colunm = new DataColumn[table1.Columns.Count];

            DataTable table3 = new DataTable();
           // table3.;
            table3 = table1.Copy();

            table3.Merge(table2);
            dataGridView1.DataSource = table3; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T10:42:35.457

这是你想要的？

```
SELECT FirstName, LastName
FROM Table1

UNION

SELECT FullName AS 'FirstName', NULL AS 'LastName'
FROM Table2 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-29T10:42:46.533

你可以试试这个

```
for(int i=0;i<dataTable2.Rows.Count;i++)
{
    DataRow drTemp=dataTable1.NewRow();
    drTemp[0]=dataTable2.Rows[i][0];
    drTemp[1]="";
    dataTable1.Rows.Add(drTemp);
} 
```

基本上，您将全名插入到 table1 名字中，并且姓氏为空值。最后 dataTable1 将与 dataTabe2 合并。

# javascript - 我们如何验证 webform 中的文本框输入？

> ID：11260276
> 
> 赞同：0
> 
> 时间：2012-06-29T10:37:53.480
> 
> 标签：javascript, jquery, css

请谁能告诉我在从一个文本框移动到另一个文本框时如何验证文本框。

它必须在文本框之后显示错误图片，并且应该更改文本框边框颜色。我是网页设计的新手。请帮我

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T10:43:47.327

这是通过对字段的模糊事件调用验证函数来实现的。使用 jQuery，您可以注入事件处理程序 - 有许多插件可用于相同的事情。

一个这样的插件可以在这里找到：[http ://www.geektantra.com/2009/09/jquery-live-form-validation/](http://www.geektantra.com/2009/09/jquery-live-form-validation/)

演示： [http ://www.geektantra.com/projects/jquery-form-validate/](http://www.geektantra.com/projects/jquery-form-validate/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T10:44:27.933

```
$(document).ready(function(){
    $('#yourformid').submit(function(){
        $('input[type="text"]').blur(function(){
            if($(this).val() !="Your matching criterias .."){
                //some error messages etc
                return false;
            }
            return true;
        });
    });
}); 
```

# c# - System.Security.SecurityException C# 2.0 windows 服务

> ID：11260281
> 
> 赞同：2
> 
> 时间：2012-06-29T10:38:16.657
> 
> 标签：c#, windows-services

我正在尝试在 Windows 7 x64 上安装我的 Windows 服务

并得到这个错误

```
An exception occurred during the Rollback phase of the System.Diagnostics.EventLogInstaller installer.
System.Security.SecurityException: The source was not found, but some or all event logs could not be searched.  Inaccessible logs: Security.
An exception occurred during the Rollback phase of the installation. This exception will be ignored and the rollback will continue. However, the machine might not fully revert to its initial state after the rollback is complete. 
```

这是我的`MyWindowsServiceInstaller`代码：

```
var processInstaller = new ServiceProcessInstaller();
            var serviceInstaller = new ServiceInstaller();
            processInstaller.Account = ServiceAccount.LocalSystem;
            serviceInstaller.DisplayName = "My Service";
            serviceInstaller.StartType = ServiceStartMode.Manual;
            serviceInstaller.ServiceName = "My Service";
            this.Installers.Add(processInstaller);
            this.Installers.Add(serviceInstaller); 
```

我已经设置了我的应用程序名称来启动项目

这是bat文件

```
@ECHO OFF

REM The following directory is for .NET 2.0
set DOTNETFX2=%SystemRoot%\Microsoft.NET\Framework\v2.0.50727
set PATH=%PATH%;%DOTNETFX2%

echo Installing MyService...
echo ---------------------------------------------------
InstallUtil /i ConsoleApplication5.exe
echo ---------------------------------------------------
echo Done.
pause 
```

如果我要解决此问题，该服务不仅是我的计算机，它是否会为任何其他计算机解决？

谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-03T13:00:57.250

你可以试试这种方式安装。以管理员身份打开 cmd 并定位到系统中的 .Net Framework 路径

```
Eg: "C:\Windows\Microsoft.Net\Framework\v4.0.30319\" 
```

然后在 installutil.exe 的帮助下，您可以安装该服务。

```
Eg: C:\Windows\Microsoft.Net\Framework\v4.0.30319\installutil.exe "Your service exe path" 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-12-19T19:39:40.823

您还可以通过将“Visual Studio 命令提示符”作为**“以管理员身份运行”**选项启动来克服此类问题。现在使用 installutil.exe 命令安装您的程序集

```
x:\Windows\System32>installutil.exe YourService.exe 
```

*（其中 YourService.exe 是您的服务项目编译后的 exe 文件）*

**说明：** 要打开命令提示符，请单击“所有程序”->“Microsoft Visual Studio (20xx)”->“Visual Studio 工具 (20xx)”->“Visual Studio 命令提示符”（其中 20xx 是您使用的相应版本）正在使用 2008、2010 等）。

# facebook - 来自 Facebook fql.query 的点赞数错误

> ID：11260288
> 
> 赞同：0
> 
> 时间：2012-06-29T10:38:39.673
> 
> 标签：facebook, facebook-like, facebook-fql

知道为什么它在这里显示 2 个赞：

[http://www.facebook.com/plugins/like.php?href=https://rodenstock.fbapp.eu/gallery/image/508&layout=box_count](http://www.facebook.com/plugins/like.php?href=https://rodenstock.fbapp.eu/gallery/image/508&layout=box_count)

这里是 0：

[https://api.facebook.com/method/fql.query?query=select%20%20like_count,%20total_count,%20url,%20share_count,%20click_count%20from%20link_stat%20where%20url=%22https://rodenstock .fbapp.eu/gallery/image/508%22](https://api.facebook.com/method/fql.query?query=select%20%20like_count,%20total_count,%20url,%20share_count,%20click_count%20from%20link_stat%20where%20url=%22https://rodenstock.fbapp.eu/gallery/image/508%22)

这里是 0：

[http://api.facebook.com/restserver.php?method=links.getStats&urls=https://rodenstock.fbapp.eu/gallery/image/508](http://api.facebook.com/restserver.php?method=links.getStats&urls=https://rodenstock.fbapp.eu/gallery/image/508)

我知道喜欢按钮旁边的数字将分享和喜欢一起计算在内。但这并不能解释这些数字。

谢谢帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-01T18:16:48.483

现在数字没问题。我猜这要么是临时错误，要么是（新 url-？）查询的缓存可能需要 20 小时才能刷新。

# c# - LINQ获取不同数据并循环获取相关数据

> ID：11260289
> 
> 赞同：3
> 
> 时间：2012-06-29T10:38:41.073
> 
> 标签：c#, linq, loops, distinct

我是Linq的新手。我想知道这是否是最好的方法还是有其他方法可以做到这一点。

我有一个要求，我从 Web 服务中收到一个项目列表：

```
class Item {

  string ItemName { get; set;} 
  string GroupName { get; set; }
} 
```

我收到以下数据：

```
ItemName: Item1; GroupName: A
ItemName: Item2; GroupName: B
ItemName: Item3; GroupName: B
ItemName: Item4; GroupName: A
ItemName: Item5; GroupName: A 
```

现在我想获取列表中的所有唯一组，并将所有项目与该组相关联。所以我做了一个类：

```
class Group {
   string GroupName { get; set; }
   List<string> Items { get; set; }
} 
```

这样就有一个组，所有关联的项目都将在列表下。

我做了两个 LINQ 语句：

```
var uniqueGroups = (from g in webservice
        where g.Group != null
        select g.GroupName).Distinct(); 
```

然后我遍历它

```
foreach (var gn in uniqueGroups)
{
   var itemsAssociated = (from item in webservice 
                          where item.GroupName = gn.ToString()
                          select new {
                               });
} 
```

然后我得到了这些物品，并将它们保存到我的对象中。

这是执行此操作的最佳方法，还是有任何 LINQ 语句可以一次性完成所有这些操作？

谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-29T10:47:17.443

听起来你想要[GroupBy](http://msdn.microsoft.com/en-us/library/bb534501.aspx)

```
var itemsByGroup = items.GroupBy(i => i.GroupName);

foreach (var group in itemsByGroup)
{
    var groupName = group.Key;
    var itemsForThisGroup = group;

    foreach (var item in itemsForThisGroup)
    {
        Console.Out.WriteLine(item.ItemName);
    }
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-29T10:46:03.470

你可以试试这个：

```
//List<Item> webservice = list with items from your webservice
var result = (from i in items
              group i by i.GroupName into groups
              select new Group()
              {
                  GroupName = groups.Key,
                  Items = groups.Select(g => g.ItemName).ToList()
              }).ToList(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-29T10:50:59.310

这可以使用[匿名类型](http://msdn.microsoft.com/en-us/library/bb397696.aspx)一次性完成，并且[`Enumerable.GroupBy`](http://msdn.microsoft.com/en-us/library/system.linq.enumerable.groupby.aspx)：

```
var groupItems =
    webservice.Where(i => i.GroupName != null)
              .GroupBy(i => i.GroupName)
              .Select(grp => new { Group = grp.Key, Items = grp.ToList() });
foreach (var groupItem in groupItems)
    Console.WriteLine("Groupname: {0} Items: {1}"
        , groupItem.Group
        , string.Join(",", groupItem.Items.Select(i => i.ItemName))); 
```

Distinct 是无用的，因为`GroupBy`总是会使组不同，这就是组的性质。

这是运行代码：http: [//ideone.com/R3jjZ](http://ideone.com/R3jjZ)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-29T10:52:58.390

我会使用：

```
 webservice.ToLookup(k => k.GroupName); 
```

这将消除对额外课程的需要。

希望这可以帮助！

# jakarta-ee - EJB3.1：servlet 中的实体外观为空（NetBeans NewsApp 教程示例）

> ID：11260292
> 
> 赞同：2
> 
> 时间：2012-06-29T10:39:06.083
> 
> 标签：jakarta-ee, ejb, java-ee-6, ejb-3.1

EJB3.1 的新手，我正在关注[http://netbeans.org/kb/docs/javaee/javaee-entapp-ejb.html](http://netbeans.org/kb/docs/javaee/javaee-entapp-ejb.html)上的教程示例，完成后，我运行项目但得到一个`NullPointerException`; 当我使用该教程中的源代码 zip 时也会发生同样的情况，所以我想这不是我自己的源代码中的错字。

**问题是`newsEntityFacade`我的`ListNews`servlet 中的 是`null`，因此在`List news = newsEntityFacade.findAll();`**

（Java7、Glassfish 3.1.2、Netbeans 7.1.2）

错误日志：

```
WARNING: StandardWrapperValve[ListNews]: PWC1406: Servlet.service() for servlet ListNews threw exception
java.lang.NullPointerException
    at web.ListNews.processRequest(ListNews.java:53)
    at web.ListNews.doGet(ListNews.java:83)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:668)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:770)
    at org.apache.catalina.core.StandardWrapper.service(StandardWrapper.java:1542)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:281)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:175)
    at org.apache.catalina.core.StandardPipeline.doInvoke(StandardPipeline.java:655)
    at org.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java:595)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:161)
    at org.apache.catalina.connector.CoyoteAdapter.doService(CoyoteAdapter.java:331)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:231)
    at com.sun.enterprise.v3.services.impl.ContainerMapper$AdapterCallable.call(ContainerMapper.java:317)
    at com.sun.enterprise.v3.services.impl.ContainerMapper.service(ContainerMapper.java:195)
    at com.sun.grizzly.http.ProcessorTask.invokeAdapter(ProcessorTask.java:849)
    at com.sun.grizzly.http.ProcessorTask.doProcess(ProcessorTask.java:746)
    at com.sun.grizzly.http.ProcessorTask.process(ProcessorTask.java:1045)
    at com.sun.grizzly.http.DefaultProtocolFilter.execute(DefaultProtocolFilter.java:228)
    at com.sun.grizzly.DefaultProtocolChain.executeProtocolFilter(DefaultProtocolChain.java:137)
    at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:104)
    at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:90)
    at com.sun.grizzly.http.HttpProtocolChain.execute(HttpProtocolChain.java:79)
    at com.sun.grizzly.ProtocolChainContextTask.doCall(ProtocolChainContextTask.java:54)
    at com.sun.grizzly.SelectionKeyContextTask.call(SelectionKeyContextTask.java:59)
    at com.sun.grizzly.ContextTask.run(ContextTask.java:71)
    at com.sun.grizzly.util.AbstractThreadPool$Worker.doWork(AbstractThreadPool.java:532)
    at com.sun.grizzly.util.AbstractThreadPool$Worker.run(AbstractThreadPool.java:513)
    at java.lang.Thread.run(Thread.java:722) 
```

ListNews.java servlet：

```
package web;

[...]

@WebServlet(name = "ListNews", urlPatterns = {"/ListNews"})
public class ListNews extends HttpServlet {
    @EJB
    private SessionManagerBean sessionManagerBean;
    @EJB
    private NewsEntityFacade newsEntityFacade;

    /**
     * Processes requests for both HTTP
     * <code>GET</code> and
     * <code>POST</code> methods.
     *
     * @param request servlet request
     * @param response servlet response
     * @throws ServletException if a servlet-specific error occurs
     * @throws IOException if an I/O error occurs
     */
    protected void processRequest(HttpServletRequest request, HttpServletResponse response)
            throws ServletException, IOException {
        request.getSession(true);
        response.setContentType("text/html;charset=UTF-8");
        PrintWriter out = response.getWriter();
        try {
            out.println("<html>");
            out.println("<head>");
            out.println("<title>Servlet ListNews</title>");            
            out.println("</head>");
            out.println("<body>");
            out.println("<h1>Servlet ListNews at " + request.getContextPath() + "</h1>");

            List news = newsEntityFacade.findAll();
            for (Iterator it = news.iterator(); it.hasNext();) {
                NewsEntity elem = (NewsEntity) it.next();
                out.println(" <b>"+elem.getTitle()+" </b><br />");
                out.println(elem.getBody()+"<br /> ");
            }
            out.println("<a href='PostMessage'>Add new message</a>");

            out.println("<br><br>");
            out.println(sessionManagerBean.getActiveSessionsCount() + " user(s) reading the news.");

            out.println("</body>");
            out.println("</html>");
        } finally {            
            out.close();
        }
    }

    [...]
} 
```

新闻实体外观：

```
package ejb;

import javax.ejb.Stateless;
import javax.persistence.EntityManager;
import javax.persistence.PersistenceContext;

@Stateless
public class NewsEntityFacade extends AbstractFacade<NewsEntity> {
    @PersistenceContext(unitName = "NewsApp-ejbPU")
    private EntityManager em;

    @Override
    protected EntityManager getEntityManager() {
        return em;
    }

    public NewsEntityFacade() {
        super(NewsEntity.class);
    }

} 
```

它从 AbstractFacade 扩展而来：

```
package ejb;

import java.util.List;
import javax.persistence.EntityManager;

public abstract class AbstractFacade<T> {
    private Class<T> entityClass;

    public AbstractFacade(Class<T> entityClass) {
        this.entityClass = entityClass;
    }

    protected abstract EntityManager getEntityManager();

    public void create(T entity) {
        getEntityManager().persist(entity);
    }

    public void edit(T entity) {
        getEntityManager().merge(entity);
    }

    public void remove(T entity) {
        getEntityManager().remove(getEntityManager().merge(entity));
    }

    public T find(Object id) {
        return getEntityManager().find(entityClass, id);
    }

    public List<T> findAll() {
        javax.persistence.criteria.CriteriaQuery cq = getEntityManager().getCriteriaBuilder().createQuery();
        cq.select(cq.from(entityClass));
        return getEntityManager().createQuery(cq).getResultList();
    }

    public List<T> findRange(int[] range) {
        javax.persistence.criteria.CriteriaQuery cq = getEntityManager().getCriteriaBuilder().createQuery();
        cq.select(cq.from(entityClass));
        javax.persistence.Query q = getEntityManager().createQuery(cq);
        q.setMaxResults(range[1] - range[0]);
        q.setFirstResult(range[0]);
        return q.getResultList();
    }

    public int count() {
        javax.persistence.criteria.CriteriaQuery cq = getEntityManager().getCriteriaBuilder().createQuery();
        javax.persistence.criteria.Root<T> rt = cq.from(entityClass);
        cq.select(getEntityManager().getCriteriaBuilder().count(rt));
        javax.persistence.Query q = getEntityManager().createQuery(cq);
        return ((Long) q.getSingleResult()).intValue();
    }

} 
```

# xcode - 致命：不是 git 存储库（或任何父目录）：.git- Xcode 4.3 中的错误

> ID：11260299
> 
> 赞同：2
> 
> 时间：2012-06-29T10:39:46.360
> 
> 标签：xcode, git, version-control

我想重命名我的项目。为此，我只需要选择项目名称 press(command +1) ，然后我就可以编辑我的项目名称。我的项目在 SVN 中，我已经删除了本地 git 存储库。现在，每当我想重命名我的项目时，致命的：不是 git 存储库（或任何父目录）：.git..this 错误来了。任何想法，为什么会发生这种情况以及如何解决这个问题

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-29T10:44:18.217

我会试试这个：

*   转到组织者`Shift`+ `Cmd`+`2`
*   单击存储库
*   通过选择左侧的存储库并单击来删除任何引用您的项目的 Git 存储库`Backspace`
*   在重命名之前重新启动 XCode。

# iphone - uiview 修复内容

> ID：11260303
> 
> 赞同：-2
> 
> 时间：2012-06-29T10:39:55.423
> 
> 标签：iphone, objective-c, xcode

我`UIView`有一个`UILabel`和一个`UIWebView`里面，`UILabel`在顶部，UILabel 有高度变量：

```
theTitle.text = [NSString stringWithFormat:@"%@", noticeTitle];
theTitle.lineBreakMode = UILineBreakModeWordWrap;
theTitle.numberOfLines = 0;
[theTitle sizeToFit]; 
```

如何`UIWebView`在 UILabel 下面开始？

先感谢您。

问候。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T11:10:37.240

我认为您希望您的 webView 显示在标签下方。如果您要显示的字符串是动态的，那么您的标签大小也必须根据字符串大小动态设置。因此，要调整标签大小，只需点击链接：

[根据文本调整 UILabel 高度](https://stackoverflow.com/questions/446405/adjust-uilabel-height-depending-on-the-text)

然后您可以通过以下方式获取标签的高度：

```
 int height = theTitle.frame.size.height; 
```

然后根据标签框架的高度 + yValue 设置 webView 框架。

# mysql - mysql - 在子查询中使用 if 到 CONCAT

> ID：11260305
> 
> 赞同：0
> 
> 时间：2012-06-29T10:40:04.133
> 
> 标签：mysql

我试图编写一个查询来纠正表中 DATETIME 字段中的错误，但我的子查询可以返回 NULL 作为 transactiondetails 并且 CreateDate 字段需要具有有效值。

我当前的查询是这个：

```
UPDATE transactionsheaders H SET CreateDate = 
    CONCAT(
    DATE((SELECT CreateDate FROM transactionsdetails WHERE TransactionUID=H.UID GROUP BY TransactionUID)),
    ' ',
    TIME(CreateDate)) 
WHERE UID>0; 
```

我想使用的结果

```
SELECT CreateDate FROM transactionsdetails WHERE TransactionUID=H.UID GROUP BY TransactionUID 
```

如果它不是**NULL**和**DATE(CreateDate)**否则。

我一直在尝试为此目的使用**IF**，但是我在编写有效的东西时遇到了问题......

还有一件事，**transactiondetails**通过**TransactionUID**（1 到多个）引用**transactionsheaders 。****GROUP BY**是否保证只返回一个结果？

 ***** * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T11:17:40.787

这是正确的事情

```
UPDATE transactionsheaders H
SET CreateDate = CONCAT(DATE(ifnull((SELECT
                       CreateDate
                     FROM transactionsdetails
                     WHERE TransactionUID = H.UID
                     GROUP BY TransactionUID)),'2012-02-02'), ' ', TIME(CreateDate))
WHERE UID > 0; 
```

您可以设置任何默认值 '2012-02-02' 甚至 date(now())****

# php - Kohana 3.1 Auth，密码字段不会产生错误

> ID：11260308
> 
> 赞同：0
> 
> 时间：2012-06-29T10:40:24.033
> 
> 标签：php, kohana

我的 Kohana 视图文件如下所示：

```
 <?=Form::open('/signup/user');?>
    <?=Form::label('username', 'Username: ')?>
    <?=Form::input('username', isset($username)?$username:''); ?>
    <br />
    <?=Form::label('password', 'Password: ')?>
    <?=Form::password('password', ''); ?>
    <br />
    <?=Form::label('confirm', 'Re-enter Password: ')?>
    <?=Form::password('confirm', ''); ?>
    <br />
    <?=Form::label('email', 'Email: ')?>
    <?=Form::input('email', ''); ?>
    <?=Form::submit('submit', "Submit"); ?>
<?=Form::close()?> 
```

我的控制器：

```
public function action_user(){
    if($this->request->method() == "POST"){
        $this->template->set('username', $this->request->post('username'));
        $user = ORM::factory('user');
        try{
            $user->values($_POST)->save();
        }catch(ORM_Validation_Exception $e){
            var_dump($e->errors());
        }
    }
} 
```

问题是后者会接受密码为空或密码不匹配的表单并将其写入数据库。用户名和电子邮件字段验证工作正常，但我不确定如何验证密码字段。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T12:54:41.270

哎，搞错了。在阅读了`Model_Auth_User`我在 rules() 方法上写的文档后：

> 用户模型的规则。**因为密码在设置时*始终*是散列，所以您需要在控制器中运行额外的 not_empty 规则以确保您没有散列空字符串。**密码规则应在模型外部或使用模型辅助方法强制执行。

散列一个空字符串仍然返回一个*不为空*的散列。所以需要在模型之外进行检查，更具体地说，在控制器端进行检查。

# sql-server-2008 - 在 SQL Server 2008 中存储闰秒

> ID：11260310
> 
> 赞同：12
> 
> 时间：2012-06-29T10:40:27.690
> 
> 标签：sql-server-2008, datetime, utc, leap-second

这个周末是一个超长的周末，因为在 6 月 30 日之后将插入[额外的第二个](http://en.wikipedia.org/wiki/Leap_second#Insertion_of_leap_seconds)`23:59:59`周末。

我们有一个系统可以全天候记录大量数据，其中一条业务规则是不能将两条记录记录为同时发生，时间不超过一秒。

我们将 UTC 日期时间与新[`datetimeoffset`](http://msdn.microsoft.com/en-us/library/bb630289.aspx)数据类型一起使用，但据我所知，它们不会让您在一分钟内拥有超过 60 秒的时间。

当然，这会引发错误：

```
select datediff(ss, getdate(), '30-jun-2012 23:59:60') 
```

但根据 UTC 诸神，这将是一个实时的。事件可以发生在`23:59:60`但我们无法记录这一事实。

`23:59:59``00:00:00`7 月 1 日仍将考虑加上一秒的偏移量。

如何正确记录`23:59:60`数据库中发生的事件？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-29T11:42:02.850

你不能，因为 SQL 从 Windows 获取时间，而 Windows 也不支持闰秒。

Windows 通过从上游时间服务器获取新时间来应用闰秒，并应用通常的调整，就好像它是简单的[时钟漂移](http://blogs.msdn.com/b/mthree/archive/2015/01/14/leap-seconds-011415.aspx)一样。

通常这意味着在很长一段时间内将每秒调整几纳秒。在 24 小时内，它的运行速度约为每分钟 1 毫秒。

*   Windows 时间服务如何处理闰秒：http: [//support.microsoft.com/kb/909614](http://support.microsoft.com/kb/909614)
*   [Windows FILETIME 结构是否包含闰秒？](https://stackoverflow.com/questions/130573/does-the-windows-filetime-structure-include-leap-seconds)
*   Windows 时间服务的工作原理：[http ://technet.microsoft.com/en-us/library/cc773013(v=ws.10).aspx](http://technet.microsoft.com/en-us/library/cc773013(v=ws.10).aspx)

基本上，大多数应用程序只是假装没有闰秒之类的东西。

对于大多数目的，这无关紧要。如果您有一个重要的应用程序，操作系统将无法帮助您。您还需要一些特殊的硬件来跟踪时间，因为操作系统通常很难将时间保持在一秒以内。默认情况下，Windows 每周或更少同步时间，大多数便宜的 PC 硬件时钟（甚至是昂贵服务器中的时钟）在这段时间内很容易漂移几秒钟。

由于您确实关心确切时间，我假设您指向 pool.ntp.org 或您的区域子网，并且每天设置几次 w32time 进行同步。

# c# - 拆分用户名和密码凭据

> ID：11260311
> 
> 赞同：0
> 
> 时间：2012-06-29T10:40:28.233
> 
> 标签：c#, web-services, error-handling

我在`WebMethod`应用程序的后端创建了以下内容，用户通过前端登录。

```
[WebMethod]
    public String Login(String userName, String password)
    {

            OleDbConnection connect = new OleDbConnection(connection);
            connect.Open();
            OleDbCommand command = new OleDbCommand("Select * from login where userName='" + userName + "'  and password ='" + password + "'", connect);
            command.CommandType = CommandType.Text;
            OleDbDataAdapter adapter = new OleDbDataAdapter();
            adapter.SelectCommand = command;
            DataSet NSNSet = new DataSet();
            adapter.Fill(NSNSet);

            string username = NSNSet.Tables[0].Rows[0]["firstName"].ToString() + NSNSet.Tables[0].Rows[0]["lastName"].ToString();

            int userID = System.Convert.ToInt16(NSNSet.Tables[0].Rows[0]["UID"].ToString());

            return username + "," + userID;

    } 
```

目前，我有错误处理，其中指出 -

```
catch(Exception ex)
            {
                string error = System.Convert.ToString(ex);
                if (error.Contains("There is no row at position 0"))
                {
                    status.Text = "Incorrect Username/Password combination";
                }
            } 
```

这工作得很好，但是我怎么能修改我的代码，以便它带回一个更具体的错误，即如果`userName`或者`password`特别是不正确的状态？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-29T10:48:40.957

不要透露太多细节，只是给出一个简单的登录错误信息，但不要说用户名不正确或密码不正确，因为黑客可以使用该信息

一个简单的文字说登录不成功应该没问题

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-29T11:21:22.893

你应该这样做：

```
public String Login(String userName, String password)
    {
        OleDbConnection connect = new OleDbConnection(connection);
        connect.Open();

        OleDbCommand command = new OleDbCommand("Select UID, firstName, lastName from login where userName=?  and password =?", connect);
        command.CommandType = CommandType.Text;

        //to avoid sql injection
        command.Parameters.Add(userName);
        command.Parameters.Add(password);

        OleDbDataAdapter adapter = new OleDbDataAdapter();
        adapter.SelectCommand = command;
        DataSet NSNSet = new DataSet();
        adapter.Fill(NSNSet);

        if (NSNSet.Tables[0].Rows.Count == 0)
            return "Access denied";

        string username = NSNSet.Tables[0].Rows[0]["firstName"].ToString() + NSNSet.Tables[0].Rows[0]["lastName"].ToString();
        int userID = int.Parse(NSNSet.Tables[0].Rows[0]["UID"].ToString());
        return username + "," + userID;
    } 
```

或者更好的方法，使用 DataReader 来提高性能：

```
public String Login(String userName, String password)
    {

        OleDbConnection connect = new OleDbConnection(connection);
        connect.Open();

        OleDbCommand command = new OleDbCommand("Select UID, firstName, lastName from login where userName=?  and password =?", connect);
        command.CommandType = CommandType.Text;

        //to avoid sql injection
        command.Parameters.Add(userName);
        command.Parameters.Add(password);

        OleDbDataReader reader=command.ExecuteReader();
        if (reader.Read())
        {
            //that means there's at least one row
            string username = reader["firstName"] + " " + reader["lastName"];
            int userID = int.Parse(reader["UID"].ToString());
            return username + "," + userID;
        }
        else
        {
            //no combination username-password found
            return "Access denied";
        }
    } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-29T10:48:17.170

首先，此代码对 SQL 注入开放。其次，如果您想具体知道哪个元素不正确，则必须将查询分解为两个组件（即分别查询用户名和密码）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-29T10:52:43.177

您可以将您的选择查询稍微更改为：

```
"select * from login where userName='"+userName+"'"; 
```

如果 DataSet 中没有行，则写入

```
Invalid UserName 
```

如果用户存在然后检查密码是否匹配如果不匹配然后写

```
Invalid Password 
```

# java - 通过 CMIS 标准实现注销

> ID：11260314
> 
> 赞同：1
> 
> 时间：2012-06-29T10:40:37.560
> 
> 标签：java, cmis

你能告诉我我应该采用哪种方法来注销。当用户单击按钮注销时，我想在服务器上做一些工作人员。我找不到这样的方法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-29T10:53:24.900

CMIS 根本不包括身份验证，无论是在[AtomPub](http://docs.oasis-open.org/cmis/CMIS/v1.0/errata-01/os/cmis-spec-v1.0-errata-01-os-complete.html#_Toc243905491)中还是在[WS](http://docs.oasis-open.org/cmis/CMIS/v1.0/errata-01/os/cmis-spec-v1.0-errata-01-os-complete.html#_Toc243905609)绑定中，都依赖于传输级别的安全性进行身份验证。AtomPub 绑定应该利用 HTTP 身份验证，WS 存储库应该实现 WS-Security 1.1。

# curl - 如何从xml迭代器返回的数组中获取值

> ID：11260318
> 
> 赞同：0
> 
> 时间：2012-06-29T10:40:52.957
> 
> 标签：curl

我正在使用 xml 迭代器的代码，我得到了这样的输出

```
Array
(
    [RESPONSE] => Array
        (
            [url] => http://www.greencart.com/paynetz/epi/fts
            [param] => Array
                (
                    [0] => NBFundTransfer
                    [1] => 153837
                    [2] => AiHLuf2uZJXyyQ6ZHPR0MvqxcmzhK64ODSoomLi701Q%3D
                    [3] => 1
                )    
        )   
) 
```

现在如何从中提取值以便我想将它转换为这样的 url

[http://www.greencart.com/paynetz/epi/fts?ttype=NBFundTransfer&tempTxnId=153837&token=AiHLuf2uZJXyyQ6ZHPR0MvqxcmzhK64ODSoomLi701Q%3D&txnStage=1](http://www.greencart.com/paynetz/epi/fts?ttype=NBFundTransfer&tempTxnId=153837&token=AiHLuf2uZJXyyQ6ZHPR0MvqxcmzhK64ODSoomLi701Q%3D&txnStage=1)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T16:59:10.520

对于通过 xml 迭代器返回的上述数组生成 url，请参考以下代码

```
 $url=$a['RESPONSE']['url'].'?'.http_build_query($a['RESPONSE']['params']); 
```

http_build_query 是一个 php 函数，用于从数组中生成查询字符串。

有关 http_build_query 函数的文档，请参阅以下网址 [http://php.net/manual/en/function.http-build-query.php](http://php.net/manual/en/function.http-build-query.php)

# wpf - WPF MVVM 控件错误地共享 ViewModel

> ID：11260319
> 
> 赞同：0
> 
> 时间：2012-06-29T10:40:53.553
> 
> 标签：wpf, data-binding, mvvm

我有一个控件：DailyHours。那有一组我创建的自定义 TimeEdit 控件。每个控件都应该绑定到 DailyHours 视图模型类。相反，它会尝试在 TimeEdit 控件中找到我绑定到的值。

TimeEdit 控件绑定的示例：

```
<bc:TimeEdit Time="{Binding CurrentOperatingHours.MondayClose}" ></bc:TimeEdit> 
```

TimeEdit 控件有自己的内部小时和分钟值，这些值绑定到 Hour 和 Minute 属性。由于这个原因，TimeEdit 控件的 DataContext 就是它本身。

```
public TimeEdit()
{
  InitializeComponent();
  this.DataContext = this;
} 
```

但是，这会导致 DailyHours 控件错误地绑定时间值。它在 TimeEdit 控件而不是它自己的视图模型中查找 CurrentOperatingHours 属性。

如何让我的 TimeEdit 控件与内部值正确绑定，而不会干扰其父容器上的绑定？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-29T11:01:13.623

您可以采用两种方式：删除 this.Datacontext = this; 从您的用户控件中并使用 ElementName 的 Hour 和 Minute 绑定（好的做法！）或在 Mainview 中使用 relativeSourceBinding （不好的做法）。

[我在这里](https://stackoverflow.com/questions/11226843/data-binding-in-wpf-user-controls/11227155#11227155)回答了一个类似的问题。

ps：用户控件永远不应该将数据上下文设置为它自己。这破坏了数据上下文继承，它不是预期的行为。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T11:00:09.230

试试这个

```
Time="{Binding DataContext.CurrentOperatingHours.MondayClose, RelativeSource={RelativeSource Mode=FindAncestor, AncestorType=Window}}"> 
```

我希望这会奏效。

# css - 同一DIV中具有不透明背景的图像和文本

> ID：11260324
> 
> 赞同：0
> 
> 时间：2012-06-29T10:41:08.493
> 
> 标签：css, html, background, opacity

我正在尝试制作不透明的图像和文字！

背景出现在同一个 div 中，而不使用图像作为背景。我怎样才能使这项工作？

请看图片：

![](../Images/7713adef8bdc6ec94765543032387532.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T10:44:26.143

```
<div>
  <span>Title</span>
  <img src="" />
</div>

div{
  position: relative;
}
span{
  background: rgba(0,0,0,0.5);
  position: absolute;
  bottom: 0;
  left: 0;
  padding: 6px;
  display: block;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-29T10:44:47.233

```
/* Fallback for web browsers that doesn't support RGBa */
background: rgb(0, 0, 0);
/* RGBa with 0.5 opacity */
background: rgba(0, 0, 0, 0.5); 
```

对于 rgba，最后一个字段是不透明度。但在一些较旧的 IE 版本中并不完全支持它，因此目前唯一完全跨浏览器的方法是使用透明图像作为背景。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-29T10:49:47.463

您应该做的第一件事是编写 HTML：

```
<figure>
    <img src="/image.jpg">
    <figcaption>Title</figcaption>
</figure> 
```

之后您只需要编写 CSS: 示例：

```
figure {
  position: relative;
}
figcaption {
  position: absolute;
  bottom: 0;
  left: 0;
  right: 0;
  background: rgba(0,0,0,.3); // or transparent gif
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-29T10:53:12.323

当您书写时`background-color:rgba(0,0,0,50);`，背景将是黑色和半透明的。

它不会影响文本的透明度，因为要设置文本的透明度，`color:rgba(255,255,255,50);`如果你不写，文本不会是半透明的。

# c++ - 使元组保存 const 引用或 const 值

> ID：11260332
> 
> 赞同：1
> 
> 时间：2012-06-29T10:41:41.400
> 
> 标签：c++, c++11

我正在尝试制作一个`std::tuple`最终保存`const`引用的值，或者在获取引用不明智的情况下（例如临时对象）适当复制或移动的值。

到目前为止，我有：

```
#include <functional>
#include <iostream>

template <typename ...Args>
struct foo {
  const std::tuple<Args...> values;
};

template <typename T1, typename T2>
foo<T1, T2> make2(T1&& v1, T2&& v2) {
  return foo<T1,T2>{std::tuple<T1, T2>(std::forward<T1>(v1),std::forward<T2>(v2))};
}

int main() {
  double d1=1000;
  double& d2 = d1;
  auto f = make2(d2, 0);
  std::cout << std::get<0>(f.values) << ", " << std::get<1>(f.values) << "\n";
  d1 = -666;
  std::get<0>(f.values)=0; // Allowed - how can I inject some more constness into references?
  //std::get<1>(f.values) = -1; // Prohibited because values is const
  std::cout << std::get<0>(f.values) << ", " << std::get<1>(f.values) << "\n";
} 
```

这很接近，但`const`对于我所希望的还不够——我最终得到了一个`const std::tuple<double&, int>`当然允许我修改元组引用的双精度数。

我尝试在其中添加更多`const`内容`make2`：

```
template <typename T1, typename T2>
foo<T1 const, T2 const> make2(T1&& v1, T2&& v2) {
  return foo<T1 const,T2 const>{std::tuple<T1 const, T2 const>(std::forward<T1>(v1),std::forward<T2>(v2))};
} 
```

这成功地制作了`int`（即非引用）元组成员`const`（考虑到我可以很容易地制作整个元组，这并不令人兴奋`const`），但对`double&`成员没有做任何事情。为什么？我怎样才能添加这种额外的`const`东西？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T11:01:01.787

它不起作用，因为`T1 const`添加了顶级`const`. 即，它将使`double &const`，这与 没有什么不同`double&`。您需要一个内部 const：“*对 const* T1 的引用”。

`remove_reference`您可以使用,`add_const`和的组合来构建它`add_reference`，或者只是编写一个将 放在`const`正确位置的小特征：

```
template <typename T>
struct constify { using type = T; };
// needs a better name

template <typename T>
struct constify<T&> { using type = T const&; };

// and an alias for UX ;)
template <typename T>
using Constify = typename constify<T>::type; 
```

# c# - WPF Listview & Checkboxes - 使用相对源时的绑定问题

> ID：11260335
> 
> 赞同：1
> 
> 时间：2012-06-29T10:41:58.060
> 
> 标签：c#, wpf, listview, checkbox, wcf-binding

我有一个包含两列的列表视图，一列包含一个文本框，另一列包含一个复选框。这些绑定到自定义对象的 ObservableCollection，其中包含文本框的字符串和复选框的布尔值。

一切都运行良好，直到我尝试让复选框的检查事件突出显示它是列表视图中的行，如[本文](https://stackoverflow.com/questions/2608187/wpf-listview-selecteditem-is-null/2608315#2608315)中所示。

我的问题是复选框不再绑定到 ObservableCollection。文本框绑定没问题，但是将 checkbox 声明更改为：

```
<CheckBox IsChecked="{Binding RestrictedEdit}"/> 
```

对此：

```
<CheckBox IsChecked="{Binding RestrictedEdit, RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type ListViewItem}}}"/> 
```

停止复选框绑定，并且列表视图显示为所有未选中的复选框，无论布尔值的状态如何。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T10:54:47.277

您正在尝试绑定到没有的`RestrictedEdit`属性`ListViewItem`。这个属性是在视图模型中声明的，它存储在 中`DataContext`，所以这应该可以工作：

```
<CheckBox IsChecked="{Binding DataContext.RestrictedEdit,
                              RelativeSource={RelativeSource FindAncestor,
                                              AncestorType={x:Type ListViewItem}}}"/> 
```

但是，我看不出有任何理由使用此代码而不是 simple `IsChecked="{Binding RestrictedEdit}"`。`CheckBox`继承`DataContext`自`ListViewItem`，因此没有理由使用相对源。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T11:06:00.033

让绑定保持原样（无RelativeSource）并使用样式或DataTemplate，将您的自定义对象类作为TargetType，并在RestrictedEdit 上设置DataTrigger。样式示例：

```
<Style x:Key="MyStyle" TargetType="MyClass">
  <Setter Property="BackGround" Value="White" />
  <Style.Trigger>
     <DataTrigger Binding="{Binding RestrictedEdit}" Value="False">
         <Setter Property="BackGround" Value="Gray" />
      </DataTrigger>
  </Style.Trigger>
</Style> 
```

例如，在您的应用程序资源（在 App.xaml 中）中定义此样式。然后在您的列表视图中，使用：

```
ItemContainerStyle="{StaticResource MyStyle}" 
```

# java - 在 J2ME 中使用 BufferedImage

> ID：11260338
> 
> 赞同：1
> 
> 时间：2012-06-29T10:42:17.347
> 
> 标签：java, image-processing, bufferedimage

有没有办法`BufferedImage`在项目中实现类`J2ME`？我迫切需要它来进行 HSV 图像处理......！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T06:53:18.023

您不能`BufferedImage`在移动项目中使用。实现它对于这个类的所有依赖项将是一场噩梦。最好的办法是尝试一些其他的图像类`Bitmap`，比如`J2ME`

# jquery - 使用 jQuery 对 click() 事件进行排队

> ID：11260341
> 
> 赞同：1
> 
> 时间：2012-06-29T10:42:27.547
> 
> 标签：jquery

是否有可能以某种方式将单击事件处理程序附加到一个元素，该元素将在所有其他元素之后被调用？

我注册了另一个 click 事件处理程序`.click()`，我想附加另一个函数调用，它将在前一个函数调用之后执行，而不使用`setTimeout()`.

干杯，直到

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T10:43:44.367

事件处理程序按照它们注册的顺序被调用。如果你最后注册这个，它会被最后调用。

# c# - 如何从html页面保存xml文件

> ID：11260343
> 
> 赞同：0
> 
> 时间：2012-06-29T10:42:29.453
> 
> 标签：c#, javascript, asp.net, html, xml

我需要保存显示在 HTML 页面中的 XML 文档。

场景是这样的：我正在向服务器发送搜索请求，作为回报，我得到了 xml 文件，但显示在 html 页面中。我想要的是使用javascript，asp.net（C＃）将显示在html表单中的xml文件保存在客户端。

请看这个链接（像这样的服务器返回文件） [http://www.w3schools.com/dom/books.xml](http://www.w3schools.com/dom/books.xml)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T10:44:58.540

您需要将请求中的流保存到 xmldoc 中。应该非常直截了当。

看看这里： http: [//msdn.microsoft.com/en-us/library/system.xml.xmldocument.save (v=vs.100).aspx](http://msdn.microsoft.com/en-us/library/system.xml.xmldocument.save(v=vs.100).aspx)

另外，这里有一篇关于它的微软文章：

[http://support.microsoft.com/kb/307643](http://support.microsoft.com/kb/307643)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T10:48:25.307

发送的文件应该有一个 HTTP 标头，表明它是要保存的，未显示。这样做：

```
context.Response.ContentType = "application/force-download"; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-29T10:48:58.243

假设您正在编写一个客户端应用程序来使用此文件

```
using System.Net;
new WebClient().DownloadFile("http://www.w3schools.com/dom/books.xml", @"c:\books.xml"); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-29T10:50:12.657

正如 Rutesh 所说，您不能使用 javascript。使用 C#.NET 将其保存在服务器上，然后从服务器访问它。其次，您所说的页面不是 html 页面，而是 xml 文件。我希望你知道如何构建一个 asp.net 页面，如果是，那么使用这个：

```
 XmlDocument xdoc = new XmlDocument();
    xdoc.Load("http://www.w3schools.com/dom/books.xml");
    xdoc.Save("myfilename.xml"); 
```

快乐编码！

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-09-09T17:14:23.760

```
sourceResponse.ContentType = "application/octet-stream"; 
byte[] responseContent = "XML File content"
sourceResponse.AddHeader("content-disposition", String.Format("attachment; filename={0}.xml", "yourFileName"));
sourceResponse.BinaryWrite(responseContent);
sourceResponse.End(); 
```

# php - 将 14 位时间戳从 CSV 导入 MySQL 并避免剥离数据

> ID：11260360
> 
> 赞同：0
> 
> 时间：2012-06-29T10:43:47.703
> 
> 标签：php, mysql, csv

我正在创建一个 mySQL 数据库，它将作为其数据的一部分包含时间戳。这些时间戳将从 CSV 文件中导入，它们看起来像这样 - 20110701083231

我的问题是将这些存储为最好的数据类型是什么？

到目前为止，在我的尝试中，在导入过程中（我正在通过 PHPMyAdmin 进行），时间戳的结尾似乎被删除了，它们变成了 2011070000000。

奇怪的是，当我返回 CSV 文件时，那里的条目似乎也以同样的方式被删除了......？

提前感谢您提供的任何信息以及之前提供的所有帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T11:28:30.437

试试这个说法？

```
LOAD DATA INFILE 'yourFile.csv'
INTO TABLE yourTable
(@var1)
SET theColumnWhereItShouldBe = STR_TO_DATE(@var1, '%Y%m%d%H%i%s'); 
```

哦，列的类型应该是`datetime`or `timestamp`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-29T10:58:22.790

将它们保存为`datetime`格式。这意味着您需要在保存这些值之前对它们进行一些格式化，但这并不难做到：

```
$date = DateTime::createFromFormat("YmdHis", "20110701083231");
$date = $date->format("Y-m-d H:i:s"); 
```

# java - 设置 byte[] 下载为文件

> ID：11260362
> 
> 赞同：4
> 
> 时间：2012-06-29T10:43:51.307
> 
> 标签：java, http-headers, jasper-reports, bytearray, seam

我有一个 Jasper 报告，它生成一个 Excel 文件并输出为一个字节 []，我希望该文件在浏览器中显示为下载，但目前它只是将原始代码打印到浏览器。

代码的相关部分如下，这是从 AJAX 请求发起的（页面已经加载）：

```
 JasperReport jasperReport;
    JasperPrint jasperPrint;
    HttpServletResponse response = (HttpServletResponse) context.getExternalContext().getResponse();    

    byte[] excel = null;
    FacesContext facesContext = FacesContext.getCurrentInstance();

    try {
        ArrayList<SwimDataReport> dataList = getData();
        if(dataList!=null){
            JRBeanCollectionDataSource dataSource = new JRBeanCollectionDataSource(dataList, false);

            jasperReport = JasperCompileManager.compileReport(reportFile.getPath());
            jasperPrint = JasperFillManager.fillReport(jasperReport, parameters, dataSource);
            JRXlsExporter exporter = new JRXlsExporter();
            ByteArrayOutputStream  xlsReport = new ByteArrayOutputStream();
            exporter.setParameter(JRExporterParameter.JASPER_PRINT, jasperPrint);
            exporter.setParameter(JRExporterParameter.OUTPUT_STREAM, xlsReport);            
            exporter.exportReport();
            excel = xlsReport.toByteArray();

            response.reset();
            response.setContentType("application/vnd.ms-excel");
            response.setHeader("Content-disposition", "attachment; filename=\"Export.xls\"");

            xlsReport.close();

            OutputStream  ouputStream = response.getOutputStream();
            ouputStream.write(excel);
            ouputStream.close();

            facesContext.responseComplete();
            this.cleanUp();
        }else{
            return;
        }
    } catch (JRException e) {       
        e.printStackTrace();
    } catch (Exception e) {
        e.printStackTrace();
    } 
```

有什么想法我哪里出错了吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T15:16:00.657

看来您无法从 AJAX 请求下载文件，因此我使用 h:commandButton 来触发下载。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T12:58:02.967

我与此类似的工作代码有一个大写的 D。

即：`Content-Disposition`而不是`Content-disposition`.

这也是[RFC2183 的](http://www.ietf.org/rfc/rfc2183.txt)要求。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-03T11:35:32.377

尝试使用`a4j:htmlCommandLink`来触发下载请求并提供`target="_NEW"`标签。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-09-01T14:31:45.623

Excel 文件的内容类型为：

对于 BIFF .xls 文件：***application/vnd.ms-excel***

Excel2007及以上.xlsx文件：***application/vnd.openxmlformats-officedocument.spreadsheetml.sheet***

安装：“内容处置”，“附件；文件名= **\”Export.xls\“** ”

尝试使用：“Content-disposition”、“attachment; filename= **Export.xls** ”

# android - 注册混淆Android GCM

> ID：11260364
> 
> 赞同：10
> 
> 时间：2012-06-29T10:43:57.290
> 
> 标签：android, android-c2dm, google-cloud-messaging

我正在尝试迁移到`GCM`Android，`C2DM`现在已被弃用。[此处](http://pages.citebite.com/i2v6c5g5tkjr)描述的注册过程与[此处](http://pages.citebite.com/f2y6h7i3usfy)描述的注册不同。两个注册一样吗？我们可以看到代码来确定吗？`GCMRegistrar`

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-29T14:39:35.627

我已成功将我的 C2DM 项目迁移到 GCM。经测试，效果很好。唯一的变化是：

*   在 Android 应用程序中 -`sender`在注册时更改 的值
*   在服务器端 - 更改 auth 标头和 URL

就与谷歌的互动而言，就是这样。应用程序的逻辑决定了更多的一些变化：

*   在 Android 应用程序中，注册 ID 缓存在其首选项中。升级后，我从首选项中删除 reg ID 以强制重新注册，这次是使用 GCM。
*   将 reg ID 传递给服务器的逻辑有一个额外的布尔参数 - 如果这是 C2DM 或 GCM reg ID
*   发送消息的逻辑取决于所述参数。

将 C2DM 逻辑完全从服务器中丢弃是不明智的——不是每个人都会升级他们的 Android 应用程序。支持 C2DM 的旧版本将在一段时间内出现。谷歌承诺在短期内保持 C2DM 的运行。所以消息发送是有条件的 - 根据 reg ID 类型，它发送到 GCM 或 C2DM。

编辑重新：条件逻辑：

```
if($RegID_Is_GCM)
{
    $Auth = GCM_Auth();
    $URL = $GCM_URL;
}
else
{
    $Auth = C2DM_AUTH();
    $URL = $C2DM_URL;
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-29T14:34:21.430

它们实际上是同一回事。第二个将第一个封装在静态方法中并注册广播接收器。您可以将源附加到 gcm.jar 并自己查看。您可以在 ~/android-sdks/extras/google/gcm/gcm-client/gcm-src.jar 中找到源代码

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-16T20:31:14.503

我在 GCM 中最喜欢的东西是我们将从 GCM 服务器获得的**RegID ，它不仅是一个 ID，它还是此设备上此应用程序的地址。**所以这次你不需要像在 C2DM 中那样将设备 ID 连同你的*注册 ID一起发送到服务器。*

在 C2DM 中，每次您请求注册 ID 时，您都会获得一个新 ID。

但是在使用您的**应用程序包**和**一些设备 ID**生成的 GCM RegId 中，如果您一次又一次地请求注册 ID，您将收到*相同的 RegId。*

**如果您卸载应用程序并再次安装它，GCM 服务器仍会为您提供相同的注册 ID。**

因此，一个注册 ID 将不需要任何设备 ID 发送到服务器。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-29T14:35:57.433

GCMRegistrar 只是完成第一页中描述的腿部工作的助手。

你可以在这里看到课程。`android-sdk\extras\google\gcm\gcmclient\src\com\google\android\gcm`.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-05T04:22:48.973

我已经成功地从 C2DM 迁移到 GCM。我还记录了如何在 [http://android.amolgupta.in/2012/07/google-cloud-messaging-gcm-tutorial.html实现 GCM](http://android.amolgupta.in/2012/07/google-cloud-messaging-gcm-tutorial.html)

# objective-c - 通过触摸 UITableView 的背景隐藏键盘

> ID：11260369
> 
> 赞同：1
> 
> 时间：2012-06-29T10:44:14.443
> 
> 标签：objective-c, ios, uitableview, keyboard, uitextfield

`UITextFields`我正在寻找一些优化的方法来隐藏后台点击时的键盘`UITableViewCell`。我已经做了一些代码希望这会对你有所帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T10:45:40.103

我制作了一个类别，用于在包含`tableview`时在背景点击时隐藏键盘。`tableview``textfield`

我的头文件：

```
#import <UIKit/UIKit.h>
#import "Utility.h"

@interface UITableView (HitTest)

@end 
```

我的实现文件：

```
#import "UITableView+HitTest.h"

@implementation UITableView (HitTest)

UITableViewCell *activeCell;

-(UIView*) hitTest:(CGPoint)point withEvent:(UIEvent*)event
{
    NSInteger iterations = 0;
    // check to see if the hit is in this table view
    if ([self pointInside:point withEvent:event])
    {
        UITableViewCell* newCell = nil;

        // hit is in this table view, find out 
        // which cell it is in (if any)
        for (UITableViewCell* aCell in self.visibleCells)
        {
            iterations ++;
            if ([aCell pointInside:[self convertPoint:point toView:aCell] withEvent:event])
            {
                newCell = aCell;
                break;
            }
        }
        if (!newCell)
        { 
            for (UIView *view in activeCell.subviews)
            {
                iterations++;
                if ([view isFirstResponder])
                {
                    [view resignFirstResponder];
                    break;
                }
            }
        }
        else
        {
            activeCell = newCell;
        }
        NSLog(@"total Iterations:%d",iterations);
    }

    // return the super's hitTest result
    return [super hitTest:point withEvent:event];   
}    

@end 
```

这对我来说很好。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T10:12:30.740

做**hittest**似乎不是正确的方法

您可以在 tableView 所在的 View 上实现触摸事件，如下所示。

还将textField 对象分配给 中的成员变量`textFieldDidBeginEditing`，这样您就可以放弃显示键盘的特定文本字段。

```
-(void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event
{
    [textFieldObject resignFirstResponder];
} 
```

# php - 如何为多个进程阻止一段代码

> ID：11260374
> 
> 赞同：0
> 
> 时间：2012-06-29T10:44:20.777
> 
> 标签：php, mysql

因为我已经安装了 cron，所以每分钟运行相同的脚本。同时一个脚本被执行多次。

有这么一段：

```
$query = mysql_query("select distinct `task_id` from tasks_pending where `checked`='0' and `taken`='0' limit 50"); 
```

然后，将得到的值设置为“taken = 1”

由于多个进程同时执行，请求为不同的进程返回相同的数据。是否有可能以某种方式禁用她的这部分时间，使其只能执行一个进程？

抱歉英语不好。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T10:46:28.523

使用[SELECT FOR UPDATE](http://dev.mysql.com/doc/refman/5.0/en/innodb-locking-reads.html)它将阻止另一个进程在更新之前选择相同的行

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-29T10:48:50.157

您可能希望在对其进行任何操作之前锁定表，然后使用`[UN]LOCK TABLES`语句将其解锁。

否则，您可以`SELECT FOR UPDATE`在事务范围内使用查询。

# java - Java LDAP 在单个查询中获取多个级别的直接报告

> ID：11260376
> 
> 赞同：1
> 
> 时间：2012-06-29T10:44:21.737
> 
> 标签：java, ldap

我需要编写一个 Java 应用程序，在其中查询 LDAP 并通过读取“直接报告”属性或任何其他方式（如果可能）获取所有用户层次结构信息。即用户/经理及其下属及其下属等的多个级别。我可以通过单独查询每个用户来做到这一点。在这种情况下有一个缺点，它为每个用户查询 LDAP，这样做会花费大量时间来获取结果集。我正在寻找一个单独的查询/LDAP 过滤器或可以获取多达 3-4 级数据的健壮代码，以便我可以根据需要枚举和使用数据。

如果有人以前这样做过或对此问题有合理的想法/建议，请帮助我。

问候， 斯里纳特

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T03:09:47.577

根据具体要求，子树规范和/或集体属性可能会给出一些想法。RFC 3672 和 RFC 3671。

# firefox - 在 selenium 2.24.0 中使用 firefox 和 Chrome 驱动程序

> ID：11260387
> 
> 赞同：1
> 
> 时间：2012-06-29T10:45:22.847
> 
> 标签：firefox, selenium

我正在使用 Selenium 构建一个关于自动化测试的项目，但我对这些代码行有一些问题：

```
String exePath = "Browser\\firefox5.0.1\\firefox.exe";
var firefoxProfile = new FirefoxProfile();
m_browser = new FirefoxDriver(new FirefoxBinary(exePath), firefoxProfile);

m_browser.Navigate().GoToUrl(url); 
```

我无法使用这些代码设置 firefox url。但如果我改用 InternetExplorer，我可以设置 IE url。我不知道问题出在哪里

请帮助我。太感谢了！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-30T02:51:24.020

如果要使用 chrome 驱动程序，则必须按如下方式设置属性 -

```
System.setProperty("webdriver.chrome.driver","chrome driver path"); 
```

您可以从以下位置为您的操作系统下载 chromedriver.exe - [http://code.google.com/p/chromedriver/downloads/list](http://code.google.com/p/chromedriver/downloads/list)

要设置 firefox 驱动程序，假设 Firefox 二进制文件位于特定操作系统（例如 windows）的默认位置 - `%PROGRAMFILES%\Mozilla Firefox\firefox.exe`（参考 - [http://code.google.com/p/selenium/wiki/FirefoxDriver](http://code.google.com/p/selenium/wiki/FirefoxDriver)）

如果 firefox 位于其默认位置，则无需指定 firefox 二进制路径。但如果想这样做，请查看此链接 - [FirefoxBinary(java.io.File pathToFirefoxBinary)](http://selenium.googlecode.com/svn/trunk/docs/api/java/org/openqa/selenium/firefox/FirefoxBinary.html#FirefoxBinary%28java.io.File%29)以确保您的构造函数是正确的。

# c# - 如何使矩形可点击，C#

> ID：11260397
> 
> 赞同：3
> 
> 时间：2012-06-29T10:46:14.253
> 
> 标签：c#, winforms, graphics, clickable, rectangles

代码可以在运行时生成矩形（Rectangle rectangle）。矩形的位置可以根据用户的选择而改变。

我想在创建矩形的方法中添加代码以使矩形可点击。用户单击矩形后，将出现一个新窗口来显示内容，就像文本一样。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-29T10:56:42.413

您可以使用 Rectangle 对象的 Contains 方法。

```
private Rectangle _myRectangle;
private void Form1_MouseDown(object sender, MouseEventArgs e)
{
    if (this._myRectangle.Contains(e.Location))
    {

    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T10:49:26.080

创建一个带有边框属性和透明背景的标签控件（使其看起来像矩形），并为您添加的每个标签添加单击事件处理程序。如果您通过从 Label 类派生创建自己的 Rectangle 控件，或者您可以创建自己的控件（许多其他解决方案），那将会很好。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-06-29T10:50:41.297

我会考虑处理窗口本身（或任何你的“背景”控件）上的点击事件，获取它的坐标，并将它们与矩形的已知位置/大小进行比较。

# android - 点击小图放大图片

> ID：11260401
> 
> 赞同：0
> 
> 时间：2012-06-29T10:46:33.490
> 
> 标签：android, image

我在应用程序上创建了一个图像（ImageView），一旦用户单击小图像，我需要使图像更大并且能够缩放。我尝试弹出但它只显示图像但不能缩放。知道如何实现它。感谢是否可以为我提供一些我可以继续阅读的链接。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T10:52:00.977

ImageView 默认不支持可缩放功能。你必须自己实现，但你可以在互联网上找到一些有用的库：

*   [http://blog.sephiroth.it/2011/04/04/imageview-zoom-and-scroll/](http://blog.sephiroth.it/2011/04/04/imageview-zoom-and-scroll/)：我向您推荐这个，我能够与 ViewPager 集成。

*   [https://github.com/MikeOrtiz/TouchImageView](https://github.com/MikeOrtiz/TouchImageView)

*   [https://github.com/jasonpolites/gesture-imageview](https://github.com/jasonpolites/gesture-imageview)

正如@Amal 评论的那样，有很好的教程可以逐步解释该过程：

*   [http://developer.sonymobile.com/wp/2010/05/18/android-one-finger-zoom-tutorial-part-1/](http://developer.sonymobile.com/wp/2010/05/18/android-one-finger-zoom-tutorial-part-1/)

*   [http://www.zdnet.com/blog/burnette/how-to-use-multi-touch-in-android-2/1747](http://www.zdnet.com/blog/burnette/how-to-use-multi-touch-in-android-2/1747)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-05T10:44:23.080

使用下面的代码来放大和缩小图像视图

```
import android.app.Activity;
import android.graphics.Matrix;
import android.graphics.PointF;
import android.os.Bundle;
import android.util.FloatMath;
import android.util.Log;
import android.view.MotionEvent;
import android.view.View;
import android.view.View.OnTouchListener;
import android.widget.ImageView;

public class ZoomInZoomOut extends Activity implements OnTouchListener 
{
    private static final String TAG = "Touch";
    @SuppressWarnings("unused")
    private static final float MIN_ZOOM = 1f,MAX_ZOOM = 1f;

    // These matrices will be used to scale points of the image
    Matrix matrix = new Matrix();
    Matrix savedMatrix = new Matrix();

    // The 3 states (events) which the user is trying to perform
    static final int NONE = 0;
    static final int DRAG = 1;
    static final int ZOOM = 2;
    int mode = NONE;

    // these PointF objects are used to record the point(s) the user is touching
    PointF start = new PointF();
    PointF mid = new PointF();
    float oldDist = 1f;

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) 
    {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        ImageView view = (ImageView) findViewById(R.id.imageView);
        view.setOnTouchListener(this);
    }

    @Override
    public boolean onTouch(View v, MotionEvent event) 
    {
        ImageView view = (ImageView) v;
        view.setScaleType(ImageView.ScaleType.MATRIX);
        float scale;

        dumpEvent(event);
        // Handle touch events here...

        switch (event.getAction() & MotionEvent.ACTION_MASK) 
        {
            case MotionEvent.ACTION_DOWN:   // first finger down only
                                                savedMatrix.set(matrix);
                                                start.set(event.getX(), event.getY());
                                                Log.d(TAG, "mode=DRAG"); // write to LogCat
                                                mode = DRAG;
                                                break;

            case MotionEvent.ACTION_UP: // first finger lifted

            case MotionEvent.ACTION_POINTER_UP: // second finger lifted

                                                mode = NONE;
                                                Log.d(TAG, "mode=NONE");
                                                break;

            case MotionEvent.ACTION_POINTER_DOWN: // first and second finger down

                                                oldDist = spacing(event);
                                                Log.d(TAG, "oldDist=" + oldDist);
                                                if (oldDist > 5f) {
                                                    savedMatrix.set(matrix);
                                                    midPoint(mid, event);
                                                    mode = ZOOM;
                                                    Log.d(TAG, "mode=ZOOM");
                                                }
                                                break;

            case MotionEvent.ACTION_MOVE:

                                                if (mode == DRAG) 
                                                { 
                                                    matrix.set(savedMatrix);
                                                    matrix.postTranslate(event.getX() - start.x, event.getY() - start.y); // create the transformation in the matrix  of points
                                                } 
                                                else if (mode == ZOOM) 
                                                { 
                                                    // pinch zooming
                                                    float newDist = spacing(event);
                                                    Log.d(TAG, "newDist=" + newDist);
                                                    if (newDist > 5f) 
                                                    {
                                                        matrix.set(savedMatrix);
                                                        scale = newDist / oldDist; // setting the scaling of the
                                                                                    // matrix...if scale > 1 means
                                                                                    // zoom in...if scale < 1 means
                                                                                    // zoom out
                                                        matrix.postScale(scale, scale, mid.x, mid.y);
                                                    }
                                                }
                                                break;
        }

        view.setImageMatrix(matrix); // display the transformation on screen

        return true; // indicate event was handled
    }

    /*
     * --------------------------------------------------------------------------
     * Method: spacing Parameters: MotionEvent Returns: float Description:
     * checks the spacing between the two fingers on touch
     * ----------------------------------------------------
     */

    private float spacing(MotionEvent event) 
    {
        float x = event.getX(0) - event.getX(1);
        float y = event.getY(0) - event.getY(1);
        return FloatMath.sqrt(x * x + y * y);
    }

    /*
     * --------------------------------------------------------------------------
     * Method: midPoint Parameters: PointF object, MotionEvent Returns: void
     * Description: calculates the midpoint between the two fingers
     * ------------------------------------------------------------
     */

    private void midPoint(PointF point, MotionEvent event) 
    {
        float x = event.getX(0) + event.getX(1);
        float y = event.getY(0) + event.getY(1);
        point.set(x / 2, y / 2);
    }

    /** Show an event in the LogCat view, for debugging */
    private void dumpEvent(MotionEvent event) 
    {
        String names[] = { "DOWN", "UP", "MOVE", "CANCEL", "OUTSIDE","POINTER_DOWN", "POINTER_UP", "7?", "8?", "9?" };
        StringBuilder sb = new StringBuilder();
        int action = event.getAction();
        int actionCode = action & MotionEvent.ACTION_MASK;
        sb.append("event ACTION_").append(names[actionCode]);

        if (actionCode == MotionEvent.ACTION_POINTER_DOWN || actionCode == MotionEvent.ACTION_POINTER_UP) 
        {
            sb.append("(pid ").append(action >> MotionEvent.ACTION_POINTER_ID_SHIFT);
            sb.append(")");
        }

        sb.append("[");
        for (int i = 0; i < event.getPointerCount(); i++) 
        {
            sb.append("#").append(i);
            sb.append("(pid ").append(event.getPointerId(i));
            sb.append(")=").append((int) event.getX(i));
            sb.append(",").append((int) event.getY(i));
            if (i + 1 < event.getPointerCount())
                sb.append(";");
        }

        sb.append("]");
        Log.d("Touch Events ---------", sb.toString());
    }
} 
```

# linux - Crontab 每 5 分钟

> ID：11260406
> 
> 赞同：22
> 
> 时间：2012-06-29T10:46:58.850
> 
> 标签：linux, unix, crontab

我怎么能告诉 crontab 每 5 分钟运行一次，但从每小时的第二分钟开始。换句话说，我想在`minute % 5 = 2`.

例如，我的脚本应该运行在：

```
08:02
08:07
08:12
08:17
... 
```

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2012-06-29T10:53:31.157

有两种可能：

```
2,7,12,17... command
*/5 ....     sleep 120 ; command 
```

1.  写下明确的所有分钟`crontab`
2.  在实际命令之前运行`sleep`命令

# c# - 动态创建的用户控件验证不起作用

> ID：11260411
> 
> 赞同：1
> 
> 时间：2012-06-29T10:47:14.207
> 
> 标签：c#, asp.net, user-controls

我创建了一个用户控件，它是一个带有一些验证的文本框，我将其动态添加到网格中。网格的数据源来自数据集。

因此，我正在遍历我的网格并将控件加载到我希望它们所在的网格中的特定单元格中。

我遇到的问题是因为我正在动态添加此控件，这会以某种方式阻止验证工作。

**用户控制**

```
<%@ Control Language="C#" AutoEventWireup="true" CodeBehind="TextboxPercentage.ascx.cs"
Inherits="tesco.User_Controls.TextboxPercentage" %>
<%@ register assembly="AjaxControlToolkit" namespace="AjaxControlToolkit" tagprefix="cc2" %>

<div id="percentage">

    <asp:TextBox runat="server" ID="txtPercentage" Width="40" onfocus="if (this.value=='0') this.value='';" onblur="if
    (this.value=='') this.value='0';" Text="0"></asp:TextBox>
    <asp:Label runat="server" ID="lbl1">%</asp:Label>

    <asp:RegularExpressionValidator ID="Reg_percentage" ControlToValidate="txtPercentage"
    runat="server" ErrorMessage="Numbers with 18 digits and two decimal values only. eg.9999999.99"
    Display="None" ValidationExpression="\b\d{1,18}\.?\d{0,2}" Enabled="true"></asp:RegularExpressionValidator>
    <asp:RangeValidator ID="rval_percentage" ControlToValidate="txtPercentage" MinimumValue="0"
    MaximumValue="100" Type="Double" runat="server" ErrorMessage="Numbers between 0-100 only" Display="None" ></asp:RangeValidator>
    <cc2:ValidatorCalloutExtender ID="vce_percentage_value" runat="server" TargetControlID="Reg_percentage"
    Enabled="True">
</cc2:ValidatorCalloutExtender>
    <cc2:ValidatorCalloutExtender ID="vce_percentage_range" runat="server" TargetControlID="rval_percentage"
    Enabled="True">
</cc2:ValidatorCalloutExtender> 
```

**背后的代码**

```
GridView1.DataSource = ds;

GridView1.DataBind();

AssignCellCoordinates();

private void AssignCellCoordinates()
    {
        // Create IDs for Grid
        for (int i = 0; i < GridView1.Rows.Count; i++)
        {
            GridView1.Rows[i].ID = "r" + i; // Row ID
            for (int ii = 0; ii < GridView1.Rows[i].Cells.Count; ii++)
            {
                GridView1.Rows[i].Cells[ii].ID = "c" + ii; // Cell ID

                if (GridView1.Rows[i].ID == "r25" || GridView1.Rows[i].ID == "r26" || GridView1.Rows[i].ID == "r27")
                {
                    if (GridView1.Rows[i].Cells[ii].ID != "c0")
                    {
                        User_Controls.TextboxPercentage txtPerc = (User_Controls.TextboxPercentage)LoadControl("~/User_Controls/TextboxPercentage.ascx");
                        GridView1.Rows[i].Cells[ii].Controls.Add(txtPerc);
                    }
                }
            }
        }
    } 
```

如您所见，我循环遍历一行，并且对于每一行迭代，我添加单元格 ID，直到达到一行的总单元格。在我的内部循环中，如果控件具有特定的单元格 ID，则添加控件。但是我的验证不起作用。

任何人都有想法为什么会这样？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T10:59:35.097

动态创建的控件在每次回发时都会丢失。我建议将 usercontol 添加到您的标记中以防止出现以下情况：

1.  人们经常遇到用户控件不显示的问题。

2.  用户控件事件没有被触发，因为用户控件不存在于标记中，而是动态生成的。

3.  速度（页面大小）没有区别。您可以根据需要切换那里的可见性。

4.  更清洁，优雅的解决方案。

无论如何，如果您真的需要动态添加表格，请查看这个问题[Dynamic Controls and Postback](https://stackoverflow.com/questions/5430982/dynamic-controls-and-postback)和本教程[http://www.4guysfromrolla.com/articles/092904-1.aspx](http://www.4guysfromrolla.com/articles/092904-1.aspx)

# java - Windows 中 Java 和 C 之间的任何 IPC 机制 - 不想要套接字

> ID：11260413
> 
> 赞同：3
> 
> 时间：2012-06-29T10:47:26.033
> 
> 标签：java, c++, c, windows, ipc

我的要求是使用 JSON 字符串在 Windows 上的 C 客户端和 Java 服务器之间进行 IPC。

刚刚意识到我不能在 java 中的 Windows 中使用命名管道（“\.\pipe\filename”）。我不太热衷于使用任何基于网络的架构，因为它会变得更加复杂以确保安全性和速度。

请建议您碰巧知道的任何共享内存/快速解决方案？

提前致谢 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2018-08-21T08:52:53.233

您可以将 UDP 或 TCP 用于 IPC。

如果您稍后将程序移动到其他操作系统，它也是非常便携的解决方案。

使用 TCP，很容易扩展系统：即：在不同的主机上运行程序。由于 UDP 的不可靠特性，在不可靠的网络上使用它可能会有点困难。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-08-21T04:49:06.990

您可以在 Windows 上使用命名管道；[这个问题](https://stackoverflow.com/questions/634564/how-to-open-a-windows-named-pipe-from-java)和[这个问题](https://stackoverflow.com/questions/3670039/is-it-possible-to-open-a-named-pipe-with-command-line-in-windows)的答案给出了不同的解决方案。

除此之外，通过使用 llvm（在您的情况下为 clang）和[LLJVM Translator](https://github.com/maropu/lljvm-translator)，您可以将代码从数百种编程语言编译为 LLVM 字节码，然后将其转换为 JVM 字节码，此时您现有的 Java 代码可以从您的（编译和翻译的）代码中调用函数。

最后但同样重要的*是*，为了避免做您可能不需要做的工作，您应该专注于使用清晰、可维护的代码来解决您的问题，并在您确定需要完成之前进行优化。那时，您的分析器将成为您测量瓶颈和验证您执行的优化的朋友。

# c# - 将消息从存储过程返回到 C# 应用程序

> ID：11260418
> 
> 赞同：10
> 
> 时间：2012-06-29T10:47:58.817
> 
> 标签：c#, sql-server

我有一个添加用户的存储过程，并且在我添加的每个权限处，我都想开始构建成功消息。

我的存储过程运行良好，但是如何将成功消息返回到我的应用程序的消息对话框中？

我想在我的 C# 应用程序的消息框中显示以下 @text。

```
DECLARE @text NVARCHAR(1000)
SET @text = 'This is line 1.' + CHAR(13)+CHAR(10) + 'This is line 2.'
SELECT @text 
```

这是我在 C# 应用程序中的调用：

```
 public DataTable CreateOrDropUser(string dataBase, string procedure, SqlParameter[] parameters)
    {
       try
       {
          if (dataBase.Length > 0) { procedure = dataBase + ".." + procedure; } //Set procedure to DBNAME..ProcedureName

          SqlCommand cmd1 = new SqlCommand(procedure, con);
          cmd1.CommandType = CommandType.StoredProcedure;

          foreach (SqlParameter p in parameters)
          {
              if (p != null)
              {
                  cmd1.Parameters.Add(p);
              }
          }

          con.Open();
          DataTable dt = new DataTable();
          SqlDataAdapter da = new SqlDataAdapter(cmd1);
          da.Fill(dt);
          con.Close();

          MessageBox.Show("Success"); //This should display the @text variable in my proc

          return dt;      
     }
     catch (Exception ex)
     {
        try
        {
           if (con.State == ConnectionState.Open)
           {
              con.Close();
           }
        }
        catch
        {
           MessageBox.Show("Could not connect to database. Check settings. " + ex.Message, "Connection Error", MessageBoxButtons.OK, MessageBoxIcon.Error);
        }

        MessageBox.Show(ex.Message);
        return null;
      }      
    } 
```

* * *

**我的存储过程，只需关注所有打印的部分，这就是我要添加的文本：**

```
ALTER PROCEDURE [dbo].[AdminDevUserCreate]
    @SQLLoginName varchar(50),
    @SQLLoginPass varchar(50) 
AS

DECLARE @text NVARCHAR(1000)OUTPUT  

--PRINT 'Create SQL Login'
SET @text = 'Create SQL Login ' + @SQLLoginName 
-- USE [Master]

EXEC(' USE [master] CREATE LOGIN [' + @SQLLoginName + '] WITH PASSWORD=''' + @SQLLoginPass + ''', DEFAULT_DATABASE=[TestAudit], CHECK_EXPIRATION=OFF, CHECK_POLICY=OFF')

--PRINT 'Add Server Roles'
SET @text += + CHAR(13)+CHAR(10) + 'Add Server Roles'
--Add Server roles
    EXEC master..sp_addsrvrolemember @loginame = @SQLLoginName, @rolename = N'bulkadmin'
    EXEC master..sp_addsrvrolemember @loginame = @SQLLoginName, @rolename = N'processadmin'
    EXEC master..sp_addsrvrolemember @loginame = @SQLLoginName, @rolename = N'securityadmin'   
--PRINT 'Allow SQL Agent Job Manage'
SET @text += + CHAR(13)+CHAR(10) + 'Allow SQL Agent Job Manage'
--USE [MSDB]
EXEC ('msdb..sp_addrolemember ''SQLAgentOperatorRole'', ''' + @SQLLoginName + '''')

--PRINT 'Allow Trace'
SET @text += + CHAR(13)+CHAR(10) + 'Allow Trace'
--Allow trace (SQL Profiler)
--USE [MASTER]
EXEC (' USE [MASTER] GRANT ALTER TRACE TO ' + @SQLLoginName )

--PRINT 'Prevent admin proc changes '
SET @text += + CHAR(13)+CHAR(10) + 'Prevent admin proc changes '
    EXEC ('USE [TestAudit] DENY ALTER ON [TestAudit].[dbo].[Admin] TO ' + @SQLLoginName) --Prevents changes to Admin function
--PRINT 'Prevent database trigger changes'
SET @text += + CHAR(13)+CHAR(10) + 'Prevent database trigger changes'
    EXEC ('USE [TestAudit] DENY ALTER ANY DATABASE DDL TRIGGER TO ' + @SQLLoginName) --Prevents modify of [SchemaAuditTrigger]

PRINT @text
Select @text 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-29T10:52:38.890

最好的选择是使用输出参数。

在您的存储过程中添加参数`@text nvarchar(1000) OUTPUT`，然后在您的代码中添加一个带有名称的额外参数`@text`并将参数方向设置为`output`.

然后只需`SET @text = 'This is line 1.' + CHAR(13)+CHAR(10) + 'This is line 2.'`在存储过程中添加该行

**编辑：**我的回答是，如果您不希望这影响您当前的查询，如果我误解了您的问题，请告诉我。同样要获取值，在执行查询后，您可以`@name`使用 .Value 从参数中获取值

**编辑 2：示例代码**应该看起来像

```
//Add these lines
SqlParameter text = new SqlParameter("@name", SqlDbType.NVarChar);
text.Direction = ParameterDirection.Output;
cmd1.Parameters.Add(text);

con.Open();
DataTable dt = new DataTable();
SqlDataAdapter da = new SqlDataAdapter(cmd1);
da.Fill(dt);
con.Close();

//Change this line
MessageBox.Show(text.Value); //This should display the @text variable in my proc 
```

如果您需要有关存储过程的帮助，请发布它，我也会举一个例子

**编辑 3：快速示例**使用快速示例进行测试。C# 代码：

```
 using (SqlConnection connection = new SqlConnection(@"Data Source=.\SQLExpress;Initial Catalog=TestDB;Integrated Security=True"))
        {
            connection.Open();
            using (SqlCommand command = connection.CreateCommand())
            {
                command.CommandType = CommandType.StoredProcedure;
                command.CommandText = "Test";

                SqlParameter text = new SqlParameter("@Text", SqlDbType.NVarChar, 1000);
                text.Direction = ParameterDirection.Output;
                command.Parameters.Add(text);

                using (DataTable dt = new DataTable())
                {
                    using (SqlDataAdapter da = new SqlDataAdapter(command))
                    {
                        da.Fill(dt);
                    }
                }

                Trace.WriteLine(text.Value);

                connection.Close();
            }
        } 
```

存储过程：

```
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE PROCEDURE Test
    @Text Nvarchar(1000) OUTPUT
AS
BEGIN
    SET NOCOUNT ON;

    SET @Text = 'test'
END
GO 
```

如果您想对照您的差异检查它，对我来说工作得很好

**编辑 4：**在您的存储过程中，@text 需要是一个参数，所以而不是

```
ALTER PROCEDURE [dbo].[AdminDevUserCreate]
    @SQLLoginName varchar(50),
    @SQLLoginPass varchar(50) 
AS

DECLARE @text NVARCHAR(1000)OUTPUT 
```

做了

```
ALTER PROCEDURE [dbo].[AdminDevUserCreate]
    @SQLLoginName varchar(50),
    @SQLLoginPass varchar(50),
    @text NVARCHAR(1000) OUTPUT 
AS 
```

在创建 SqlParameter 时也使用

```
SqlParameter text = new SqlParameter("@Text", SqlDbType.NVarChar, 1000); 
```

当您告诉它参数是`NVARCHAR(1000)`

线

```
PRINT @text
Select @text 
```

不应该

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-29T11:21:57.500

可以从[`SqlConnection.InfoMessage`](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlconnection.infomessage.aspx)事件中检索信息性消息。它们可以在 T-SQL 代码中使用[`RAISERROR`](http://msdn.microsoft.com/en-us/library/ms178592.aspx)严重性 0-9 引发。

```
 public DataTable CreateOrDropUser(string dataBase, string procedure, SqlParameter[] parameters)
    {
        SqlconnecitonStringBuilder scsb = new SqlConnectionStringBuilder (connstring);
        scsb.Database = database;
        using (SqlConnection con = new SqlConnection (scsb.ConnectionString))
        {
            StringBuilder sb = new StringBuilder ();
            con.Open ();

            SqlCommand cmd1 = new SqlCommand(procedure, con);
            cmd1.CommandType = CommandType.StoredProcedure;
            foreach (SqlParameter p in parameters)
            {
                if (p != null)
                {
                    cmd1.Parameters.Add(p);
                }
            }

            conn.InfoMessage += (args => 
            {
              sb.AppendLine (args.Message);
            });
            DataTable dt = new DataTable();
            SqlDataAdapter da = new SqlDataAdapter(cmd1);
            da.Fill(dt);
            MessageBox.Show(sb);
            return dt;      
        }
    } 
```

在 T-SQL 中：

```
RAISERROR(N'This is line %d', 0,0,1);
RAISERROR(N'This is line %d', 0,0,2); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-29T10:52:40.070

如果您使用的是 MVC，那么这里有一个很好的[示例](https://github.com/martijnboland/MvcNotification)。我在多个项目中使用过它，发现它很棒。

**此外，您真的应该将您的`SqlCommand`和`SqlConnection`对象包装在 using 语句中以阻止泄漏连接。**

注意：这可以适应WebForms而没有太多麻烦。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-29T10:53:34.040

```
MessageBox.Show(dt.Rows[0][0].Tostring()); 
```

或者

使用输出参数

# php - 将密码添加到 zip 文件 PHP

> ID：11260420
> 
> 赞同：1
> 
> 时间：2012-06-29T10:48:02.953
> 
> 标签：php, passwords, compression, zip

是否可以在php中压缩文件然后添加密码来保护它？
压缩文件很容易，但我找不到添加密码的方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T18:01:42.673

如果您的意思是按该顺序，您不想“在 php 中压缩受密码保护的文件”。您将无法对加密的内容进行任何压缩。加密数据会显得随机，因此是不可压缩的。您需要在加密*之前压缩数据。*

如果您想加密 zip 文件中的条目，格式支持有两种方式。第一个使用原始的 zip“加密”，它已被证明很差，永远不应该使用。以后对 zip 格式的更新允许适当的加密，例如 AES，但您可能必须购买一个程序来支持它。

我建议改为使用标准加密实用程序（按照建议使用 system() 执行）来加密整个 .zip 文件。您可以使用 crypt 或 gpg。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T10:53:16.677

当您在 linux 机器上安装了 zip 程序时，它是可能的。然后你就可以运行 zip 命令了[`system`](http://php.net/manual/de/function.system.php)。

# iphone - 使用 Facebook SDK 在朋友的墙上发布图像

> ID：11260425
> 
> 赞同：-2
> 
> 时间：2012-06-29T10:48:17.273
> 
> 标签：iphone, ios, facebook

我可以在朋友的 Facebook 墙上发布消息，但我想发布图片。我需要在我的代码中添加什么？

这是我当前的代码：

```
[[FBRequestWrapper defaultManager] sendFBRequestWithGraphPath:_graphPath params:
  [NSMutableDictionary dictionaryWithObject:@"Post on wall :)" forKey:@"message"]
andDelegate:self]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T21:25:00.443

一种解决方案是在用户的相册中发布一个标题。为此，您需要向字典中添加其他参数：

```
[[FBRequestWrapper defaultManager] sendFBRequestWithGraphPath:_graphPath params:
   [NSMutableDictionary dictionaryWithObjectsAndKeys:@"Post on wall :)", @"message", image, @"source"] andDelegate:self]; 
```

`image`是`UIImage`您要发布的。

您还需要确保`_graphpath`指向用户相册的点：`@"me/photos"`

# java - 为什么不允许下面的接口契约？

> ID：11260426
> 
> 赞同：1
> 
> 时间：2012-06-29T10:48:22.157
> 
> 标签：java, interface

我正在考虑为 Java 提供一个新功能，我想问一下为什么到目前为止它受到设计的限制：

```
public abstract class BodyPart {
    abstract public void followBodyPart(BodyPart part);
}

public class Head extends BodyPart{
     public void followBodyPart(Body body ) { //Why is this kind of implementation not allowed? 
     ...
     }
}
public class Body extends BodyPart{
     public void followBodyPart(Head head ) { //and this
     ...
     }
     public void followBodyPart(Forearm leftForearm ) { //and also this
     ...
     }
     ...
}
//Arm, Forearm, etc... 
```

为什么 Head 中的 followBodyPart(Body body) 没有在 BodyPart 中实现 followBody？如果可以，优势就很明显了。

首先，IDE 将能够在其自动完成功能内将 Body 对象作为参数提供给 followBody，而不是 Head 无法遵循的任何其他 BodyParts 对象。

其次，当前版本的 Body 由一个函数和多个 instanceof 组成，可以删除。

最后，泛型在这里可以提供帮助，但不能解决问题，因为这段代码应该移植到 Java ME 设备上。

[这个问题已经被问过了，在我在这里](https://forums.oracle.com/forums/thread.jspa?messageID=10424263&#10424263)发现的不合适的论坛中

关于答案，我邀请您思考不同的问题。我知道任何实现 BodyPart 的东西都应该接受**任何**BodyPart，但是：我想要的是能够说 Head 能够接受**A** BodyPart 跟随。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-29T10:55:26.137

您链接的论坛帖子中也回答了这个问题。

即；接口定义的功能应该能够接受*任何*实现`BodyPart`。

*通过实现*函数`Head`只接受子类，而不接受任何其他子类；您违反了该合同（因为它不再接受任何实施）。*`Body``BodyPart`*

 *接口通常用于提供给“外部”代码，让他们可以确定提供了接口的哪个实现；他们肯定可以使用接口定义的功能。

因此，如果这个外部代码得到一个`BodyPart`，它就知道它有一个`followBodyPart`可以接受*任何*扩展`BodyPart`作为参数的函数。但是，该外部代码永远不会知道它得到了`Head`（或者可以，在实例检查之后强制转换它之后），因此无法知道接口函数将*只*接受一个`Body`.

* * *

按要求; 假设您将`BodyPart`接口作为某种程序 API 提供。在那种情况下，我不需要直接知道`BodyPart`它是什么类型。现在说我有两个；通过 API 中的某些函数接收，例如带有签名：`public BodyPart getBody()`. 该方法表明它*可能*是`Body`我回来的；但它也可能是别的东西（事实是，我不知道！）。

根据`BodyPart`界面；我可以调用`followBodyPart`第一个`BodyPart`，并将第二个作为参数传递。但是，实际`Body`实现不允许这样做；我无法知道这一点。

如果你真的希望不同的班级接受不同的条目；您应该从中删除该函数`BodyPart`并在子类中实现它。

通过从 API 传回这些子类；每个人都知道他们在谈论什么，以及它可以做什么（例如`public Body getBody()`和`public Head getHead()`）。因为我有了实际的实现类，它们具有一定`BodyPart`“遵循”的实际实现，所以这不是问题。

另一种选择是——但在你的问题中说不可能——使用泛型；在这种情况下，您可以定义一个接口说明：

```
public interface Accepts<T extends BodyPart> {
    public void followBodyPart(T part);
} 
```

例如，API 可以传回已实现`BodyPart`的 或`Accepts<Head>`实例。（编辑：当我在这里写这篇文章时，我忘了记住你不能用不同的泛型类型多次实现相同的接口；所以泛型接口方法需要实际的实现来封装可以实际处理调用的对象，使得一切都变得一团糟）

奖金编辑：当然，您也可以将`AcceptsHead`,`AcceptsArm`作为接口并有效地解决泛型问题:)。

我希望这个编辑能澄清为什么拥有一个通用接口（`BodyPart`用作参数）是一个奇怪（和坏）的想法，但只在（可能隐藏的）实现类中指定特定的实现。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T11:09:25.503

首先，我不是很直观地理解你的类关系——它们是循环的，这已经表明设计不好。我并不是说您不需要那种特定的结构——我只是建议进行一些重构以消除循环性最终可能是一个更好的设计。

看起来您正在尝试做的是实现访问者模式。但是，如果您有对基类的引用，它永远不会触发专用方法的调用 - 例如，由于编译器无法选择您想要的方法，那么运行时只需要进行实例切换对你来说 - 它充其量只是语法糖（查找scala，他们实际上是这样做的）。

```
def bodyPart(part:BodyPart) =>
  part match {
     Head(h) => /* do something with head h */
     Foot(f) => /* do something with foot f */
     Toe(t) => /* do something with toe t */
  } 
```

解决这个问题的另一种方法是抽象地noop所有可能的访问者类型：

```
public class BodyPart { // could have been abstract class
    public void followBodyPart(BodyPart part) { }
    public void followBodyPart(Head part) { }
    public void followBodyPart(Arm part) { }
    public void followBodyPart(Foot part) { }
    public void followBodyPart(Toe part) { }
}
public class Head { ... /* only implements Head, BodyPart, others error */ }
public class Arm { ... /* only implements Arm, Abdomen, etc */ } 
```

现在访问者调用者将在编译时静态选择正确的方法。但它在每个实现中都需要更多的管道，因为它需要决定如何正确处理所有其他输入类型。但这是一件好事——它消除了歧义。*

# java - 具有特定父类的切入点匹配类型

> ID：11260428
> 
> 赞同：2
> 
> 时间：2012-06-29T10:48:28.433
> 
> 标签：java, spring, aop, aspectj, spring-aop

在 Spring AOP 中是否可以实现一个切入点，将类型与某个父类匹配？

我想用`@AfterReturning`注释来做。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-29T10:51:03.340

在 AspectJ 中，您可以使用`some.package.ParentClass+`来表示“所有扩展的类`some.package.ParentClass`”。

# linux - 如何重命名大量文件，在 Linux 中为每个文件更改相同的文件名元素？

> ID：11260436
> 
> 赞同：0
> 
> 时间：2012-06-29T10:49:25.787
> 
> 标签：linux, shell, rename, file-rename

我正在尝试重命名在文件名或文本内容中包含公司名称的文件负载（我数超过 200 个）。我基本上需要将对“公司”的任何引用更改为“新公司”，在适用的情况下保持大写（即“公司变为新公司”，“公司”变为“新公司”）。我需要递归地执行此操作。

因为该名称几乎可以出现在我无法在任何满足我要求的任何地方找到示例代码的任何地方。它可以是这些示例中的任何一个，或者更多：

```
company.jpg
company.php
company.Class.php
company.Company.php
companysomething.jpg 
```

希望你明白这一点。我不仅需要处理文件名，还需要处理文本文件的内容，例如 HTML 和 PHP 脚本。我假设这将是第二个命令，但我不完全确定是什么。

我搜索了代码库，在近 300 个文件中发现了近 2000 次提及公司名称，所以我不喜欢手动进行。

请帮忙！:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T10:58:02.770

`bash`具有强大的循环和替换能力：

```
for filename in `find /root/of/where/files/are -name *company*`; do
    mv $filename ${filename/company/newcompany}
done
for filename in `find /root/of/where/files/are -name *Company*`; do
    mv $filename ${filename/Company/Newcompany}
done 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-29T11:04:43.043

我建议你看看`man rename`一个非常强大的 perl 实用程序，用于重命名文件。

标准语法是

```
rename 's/\.htm$/\.html/' *.htm 
```

聪明的部分是该工具接受任何 perl-regexp 作为要更改的文件名的模式。

您可能希望使用`-n`开关运行它，这将使该工具仅报告它会更改的内容。

目前无法找到保持大写的好方法，但是由于您已经可以搜索文件结构，因此发出几个`rename`不同大小写的问题，直到所有文件都被更改。

要遍历当前文件夹下的所有文件并搜索特定字符串，您可以使用

```
find . -type f -exec grep -n -i STRING_TO_SEARCH_FOR /dev/null {} \; 
```

该命令的输出可以定向到文件（经过一些过滤以仅提取需要更改的文件的文件名）。

```
find . /type ... > files_to_operate_on 
```

然后将其包装在一个`while read`循环中并为 inplace-replacement 做一些 perl-magic

```
while read file
do
    perl -pi -e 's/stringtoreplace/replacementstring/g' $file
done < files_to_operate_on 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-29T11:15:00.147

对于文件和目录名称，请使用`for`、`find`和.`mv``sed`

对于名称中包含的每个路径 ( `f`) `company`，将其 ( `mv`)重命名为替换`f`为 的新名称。`company``newcompany`

```
for f in `find -name '*company*'` ; do mv "$f" "`echo $f | sed s/company/nemcompany/`" ; done 
```

对于文件内容，`find`使用`xargs`和`sed`。

对于每个文件，更改`company`其`newcompany`内容，保留带有扩展名的原始文件`.backup`。

```
find -type f -print0 | xargs -0 sed -i .bakup 's/company/newcompany/g' 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-29T13:54:36.187

递归处理文件的正确方法很少。这是一个：

```
while IFS= read -d $'\0' -r file ; do
    newfile="${file//Company/Newcompany}"
    newfile="${newfile//company/newcompany}"
    mv -f "$file" "$newfile"
done < <(find /basedir/ -iname '*company*' -print0) 
```

这将适用于所有可能的文件名，而不仅仅是其中没有空格的文件名。

假设 bash。

对于更改文件的内容，我建议谨慎，因为如果文件不是纯文本，文件中的盲目替换可能会破坏事情。也就是说，`sed`是为这种事情而制作的。

```
while IFS= read -d $'\0' -r file ; do
    sed -i '' -e 's/Company/Newcompany/g;s/company/newcompany/g'"$file"
done < <(find /basedir/ -iname '*company*' -print0) 
```

对于这次运行，我建议添加一些额外的开关`find`来限制它将处理的文件，也许

```
find /basedir/ \( -iname '*company*' -and \( -iname '*.txt' -or -ianem '*.html' \) \) -print0 
```

# meteor - Meteor Deps - 运行客户端函数

> ID：11260439
> 
> 赞同：0
> 
> 时间：2012-06-29T10:49:35.453
> 
> 标签：meteor

我正在努力掌握 Meteor deps，为了具体说明我的用例是：

2）当集合改变时，我想在客户端运行一个jQuery函数

我*认为*deps 是我正在寻找的，但目前我只使用过：

```
Template.templateName.set () ->
 return Set.find({}) 
```

...就反应性而言。

每次更改时简单地将console.log收集到集合的解决方案就足够了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-30T03:12:11.957

使用上下文当然可以做你想做的事。它比实际情况要复杂一些[1]，但是如果您遵循文档中的 deps 示例，您可以很容易地做您想做的事情。就像是

```
var setup = function() {
  var context = new Meteor.deps.Context();
  context.on_invalidate(function() {
    setup();
  });
  context.run(function() {
    Set.find({});
    console.log('changed');        
  });
}
setup(); 
```

或者您可以创建一个不返回任何内容的助手，以利用将为您设置的上下文：

```
Template.templateName.do_nothing -> 
  console.log 'changed'
  Set.find({})
  null 
```

尽管这会在您可能不希望时强制刷新 HTML。

另一方面，您可能只想要`Collection.observe`.

[1] 如果/当他们合并此[拉取请求](https://github.com/meteor/meteor/pull/193)时，您可以执行以下操作：

```
Meteor.deps.await(function() { return Set.find(); }, function() { 
  console.log('changed'); 
}); 
```

`await`如果您想了解更多信息，可以查看函数的来源。

# c# - ToString() 和 Contains() 不支持对 SQL 的转换

> ID：11260440
> 
> 赞同：1
> 
> 时间：2012-06-29T10:49:35.937
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-3, datatables, jquery-datatables

我有一个将 JSON 返回到 jQuery 数据表的[操作](http://datatables.net)。返回的数据可以根据传递给它的参数进行过滤。这是代码：

```
public ActionResult IndexAjaxHandler(jQueryDataTableParamModel parameters) {
    var data = _mailingListRep.GetAllWithinAccount();
    IEnumerable<MailingList> filtered;

    // Filtering - THIS DOES NOT WORK!
    if (!string.IsNullOrEmpty(parameters.sSearch)) {
        filtered = data.Where(c => 
            c.MailingListName.Contains(parameters.sSearch) ||
            ((c.IsDoubleOptIn) ? "Yes" : "No").Contains(parameters.sSearch, StringComparison.OrdinalIgnoreCase) ||
            c.Created.ToString("dd MMM yyyy").Contains(parameters.sSearch) ||
            c.ActiveMembers.Count().ToString().Contains(parameters.sSearch) ||
        c.AvailableSegments.Count().ToString().Contains(parameters.sSearch)
        );
    }
    else {
        filtered = data;
    }

    // create json object
    // return;
} 
```

问题是这给了我以下错误：

> 方法 'Boolean Contains(System.String, System.String, System.StringComparison)' 不支持对 SQL 的转换。

## **但**

在同一个控制器中是另一个操作，它也将 JSON 返回到数据表，它使用**完全相同的过滤方法**并且工作正常！

```
public ActionResult ViewDeletedAjaxHandler(int id, jQueryDataTableParamModel parameters) {
    var list = _mailingListRep.GetByIDWithinAccount(id);
    var data = list.DeletedMembers;
    IEnumerable<MailingListMember> filtered;

    // Filtering - THIS WORKS, NO ERRORS!
    if (!string.IsNullOrEmpty(parameters.sSearch)) {
        filtered = data.Where(c => 
            c.EmailAddress.Contains(parameters.sSearch, StringComparison.OrdinalIgnoreCase) ||
            c.UnsubscribedDate.ToString("dd MMM yyyy").Contains(parameters.sSearch, StringComparison.OrdinalIgnoreCase)
        );
    }
    else {
        filtered = data;
    }

    // create json object
    // return;
} 
```

有人知道为什么是这样吗？

供参考，`Contains(string, comparison)`是一种扩展方法：

```
public static bool Contains(this string source, string toCheck, StringComparison comp) {
    return source.IndexOf(toCheck, comp) >= 0;
} 
```

我理解错误的含义，这是代码在 1 个动作中工作的事实，但不是让我完全困惑。

感谢您提前提供任何帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T10:57:38.660

您的第一个不起作用的过滤器应用于 a `IQueryable<T>`，而您的第二个起作用的过滤器应用于`IEnumerable<T>`. 当应用于 an`IQueryable<T>`时，过滤器必须可转换为 SQL，而当它用于 an 时`IEnumerable<T>`，过滤器在内存中进行评估。

要使第一个工作正常，您需要在应用过滤器**之前**`ToList()`调用以将结果强制存储到内存中，或者使用类中可用的辅助方法。**[`EntityFunctions`](http://msdn.microsoft.com/en-us/library/system.data.objects.entityfunctions.aspx)**

 *** * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-29T10:55:43.517

如果数据引用的**运行时**类型在这两种情况下不同，则可以采用一种方法。

例如，如果它们都具有编译时类型`IEnumerable<T>`，但一个具有将 LINQ 变为 LINQ2SQL 的运行时类型，而另一个将其变为 LINQ2Object。包含后者但不包含前者的作品

```
IEnumerable<Entity> data = db.GetMyLazilyEvaluatedListOfEntities();
//this will fail
data.Where(e => e.Foo.Contains("bar"));
data = new List<Entity>();
//this will work
data.Where(e => e.Foo.Contains("bar")); 
```

where`db.GetMyLazilyEvaluatedListOfEntities`返回一个对象，该对象实现`IQueryable<Entity>`在评估时将被转换为 SQL

如果`data.ToList()`在 where 之前调用，则可以避免运行时异常。但是，这将从数据库中获取整个表并在内存中进行过滤。如果该表的行数很少，这应该是一个非常值得关注的问题，但是如果您希望数据库表支持数据中有大量记录，您应该重写为可以转换为 SQL 的内容**

# delphi - Delphi XE2 64 位在字符串例程上运行时性能极慢

> ID：11260441
> 
> 赞同：25
> 
> 时间：2012-06-29T10:49:45.447
> 
> 标签：delphi, 64-bit, delphi-xe2

我正在将一些应用程序从 32 位移植到 64 位 delphi，这些应用程序进行了大量的文本处理，并注意到处理速度发生了极大的变化。使用一些程序进行了一些测试，例如，在 64 位中，这已经比编译到 32 位花费了 200% 以上的时间（2000+ ms 与 ~900 相比）

这是正常的吗？

```
function IsStrANumber(const S: AnsiString): Boolean;
var P: PAnsiChar;
begin
  Result := False;
  P := PAnsiChar(S);
  while P^ <> #0 do begin
    if not (P^ in ['0'..'9']) then Exit;
    Inc(P);
  end;
  Result := True;
end;

procedure TForm11.Button1Click(Sender: TObject);
Const x = '1234567890';
Var a,y,z: Integer;
begin
  z := GetTickCount;
  for a := 1 to 99999999 do begin
   if IsStrANumber(x) then y := 0;//StrToInt(x);
  end;
  Caption := IntToStr(GetTickCount-z);
end; 
```

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-06-29T11:48:42.710

目前没有解决方案，因为大多数 64 位字符串例程的代码都是用`PUREPASCAL`定义的 IOW 编译的，它是纯 Delphi，没有汇编程序，而许多重要的代码32 位字符串例程由 FastCode 项目和汇编程序完成。

目前，没有 64 位的 FastCode 等价物，我假设开发团队无论如何都会尝试消除汇编程序，特别是因为他们正在转向更多平台。

这意味着生成代码的优化变得越来越重要。我希望宣布的向 LLVM 后端的迁移将大大加快大部分代码的速度，因此纯 Delphi 代码不再是这样的问题。

很抱歉，没有解决方案，但也许是一个解释。

## 更新

从 XE4 开始，相当多的 FastCode 例程已经取代了我在上面段落中谈到的未优化的例程。它们通常仍然是`PUREPASCAL`，但它们代表了一个很好的优化。所以情况没有以前那么糟糕了。和普通字符串例程在**OS X**`TStringHelper`中仍然显示一些错误和一些极慢的代码（特别是在从 Unicode 转换到 Ansi 或反之亦然的情况下），但 RTL 的**Win64**部分似乎要好得多。

 ***** * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-29T15:40:05.393

尽量避免在循环中分配任何字符串。

在您的情况下，可能涉及 x64 调用约定的堆栈准备。您是否尝试将其`IsStrANumber`声明为`inline`？

我想这会让它更快。

```
function IsStrANumber(P: PAnsiChar): Boolean; inline;
begin
  Result := False;
  if P=nil then exit;
  while P^ <> #0 do
    if not (P^ in ['0'..'9']) then 
      Exit else
      Inc(P);
  Result := True;
end;

procedure TForm11.Button1Click(Sender: TObject);
Const x = '1234567890';
Var a,y,z: Integer;
    s: AnsiString;
begin
  z := GetTickCount;
  s := x;
  for a := 1 to 99999999 do begin
   if IsStrANumber(pointer(s)) then y := 0;//StrToInt(x);
  end;
  Caption := IntToStr(GetTickCount-z);
end; 
```

RTL的“纯帕斯卡”版本确实是这里缓慢的原因......

请注意，与 32 位版本相比，使用 FPC 64 位编译器的情况更糟……听起来 Delphi 编译器不是唯一的！不管市场怎么说，64 位并不意味着“更快”！有时甚至是相反的（例如，众所周知，JRE 在 64 位上速度较慢，并且在涉及指针大小时将在 Linux 中引入新的[x32 模型）。](https://sites.google.com/site/x32abi/)

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-06-29T22:25:35.643

代码可以这样编写，具有良好的性能结果：

```
function IsStrANumber(const S: AnsiString): Boolean; inline;
var
  P: PAnsiChar;
begin
  Result := False;
  P := PAnsiChar(S);
  while True do
  begin
    case PByte(P)^ of
      0: Break;
      $30..$39: Inc(P);
    else
      Exit;
    end;
  end;
  Result := True;
end; 
```

Intel(R) Core(TM)2 CPU T5600 @ 1.83GHz

*   x32 位：2730 毫秒
*   x64 位：3260 毫秒

Intel(R) Pentium(R) D CPU 3.40GHz

*   x32 位：2979 毫秒
*   x64 位：1794 毫秒

展开上述循环可以加快执行速度：

```
function IsStrANumber(const S: AnsiString): Boolean; inline; 
type
  TStrData = packed record
    A: Byte;
    B: Byte;
    C: Byte;
    D: Byte;
    E: Byte;
    F: Byte;
    G: Byte;
    H: Byte;
  end;
  PStrData = ^TStrData;
var
  P: PStrData;
begin
  Result := False;
  P := PStrData(PAnsiChar(S));
  while True do
  begin
    case P^.A of
      0: Break;
      $30..$39:
        case P^.B of
          0: Break;
          $30..$39:
            case P^.C of
              0: Break;
              $30..$39:
                case P^.D of
                  0: Break;
                  $30..$39:
                    case P^.E of
                      0: Break;
                      $30..$39:
                        case P^.F of
                          0: Break;
                          $30..$39:
                            case P^.G of
                              0: Break;
                              $30..$39:
                                case P^.H of
                                  0: Break;
                                  $30..$39: Inc(P);
                                else
                                  Exit;
                                end;
                            else
                              Exit;
                            end;
                        else
                          Exit;
                        end;
                    else
                      Exit;
                    end;
                else
                  Exit;
                end;
            else
              Exit;
            end;
        else
          Exit;
        end;
    else
      Exit;
    end;
  end;
  Result := True;
end; 
```

Intel(R) Core(TM)2 CPU T5600 @ 1.83GHz

*   x32 位：2199 毫秒
*   x64 位：1934 毫秒

Intel(R) Pentium(R) D CPU 3.40GHz

*   x32 位：1170 毫秒
*   x64 位：1279 毫秒

如果你也应用 Arnaud Bouchez 所说的，你可以让它更快。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-02-22T00:03:39.397

`p^ in ['0'..'9']`64 位的测试很慢。

添加了一个内联函数，其中包含对下/上边界的测试而不是`in []`测试，以及对空字符串的测试。

```
function IsStrANumber(const S: AnsiString): Boolean; inline;
var
  P: PAnsiChar;
begin
  Result := False;
  P := Pointer(S);
  if (P = nil) then
    Exit;
  while P^ <> #0 do begin
    if (P^ < '0') then Exit;
    if (P^ > '9') then Exit;
    Inc(P);
  end;
  Result := True;
end; 
```

基准测试结果：

```
 x32     x64
--------------------
hikari  1420    3963
LU RD   1029    1060 
```

在 32 位中，主要的速度差异是内联，它`P := PAnsiChar(S);`会在分配指针值之前调用外部 RTL 例程进行 nil 检查，而`P := Pointer(S);`只是分配指针。

观察到这里的目标是测试字符串是否为数字然后转换它，为什么不使用 RTL [`TryStrToInt()`](http://docwiki.embarcadero.com/Libraries/en/System.SysUtils.TryStrToInt)，它一步完成并处理符号和空格。

通常在分析和优化例程时，最重要的是找到解决问题的正确方法。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-30T06:58:21.687

64 位的好处在于地址空间，而不是速度（除非您的代码受到可寻址内存的限制）。

从历史上看，这种字符操作代码在更广泛的机器上总是较慢。从 16 位 8088/8086 迁移到 32 位 386 确实如此。将 8 位字符放入 64 位寄存器是对内存带宽和缓存的浪费。

为了速度，您可以避免使用 char 变量、使用指针、使用查找表、使用位并行（在一个 64 位字中处理 8 个字符）或使用 SSE/SSE2... 指令。显然，其中一些会使您的代码依赖 CPUID。此外，在调试时打开 CPU 窗口，并寻找编译器“为”你喜欢无声字符串转换（尤其是在调用周围）做愚蠢的事情。

您可以尝试查看 FastCode 库中的一些本机 Pascal 例程。EG PosEx_Sha_Pas_2 虽然不如汇编版本快，但比 RTL 代码（32 位）快。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2014-02-21T13:40:37.997

这里有两个功能。一个只检查正数。第二个检查是否为阴性。并且不限于大小。第二个比常规快 4 倍`Val`。

```
function IsInteger1(const S: String): Boolean; overload;
var
  E: Integer;
  Value: Integer;
begin
  Val(S, Value, E);
  Result := E = 0;
end;

function IsInteger2(const S: String): Boolean; inline; 
var
    I: Integer;
begin
    Result := False;
    I := 0;
  while True do
  begin
    case Ord(S[I+1]) of
      0: Break;
      $30..$39:
        case Ord(S[I+2]) of
          0: Break;
          $30..$39:
            case Ord(S[I+3]) of
              0: Break;
              $30..$39:
                case Ord(S[I+4]) of
                  0: Break;
                  $30..$39:
                    case Ord(S[I+5]) of
                      0: Break;
                      $30..$39:
                        case Ord(S[I+6]) of
                          0: Break;
                          $30..$39:
                            case Ord(S[I+7]) of
                              0: Break;
                              $30..$39:
                                case Ord(S[I+8]) of
                                  0: Break;
                                  $30..$39:
                                    case Ord(S[I+9]) of
                                      0: Break;
                                      $30..$39: 
                                        case Ord(S[I+10]) of
                                          0: Break;
                                          $30..$39: Inc(I, 10);
                                        else
                                          Exit;
                                        end;
                                    else
                                      Exit;
                                    end;
                                else
                                  Exit;
                                end;
                            else
                              Exit;
                            end;
                        else
                          Exit;
                        end;
                    else
                      Exit;
                    end;
                else
                  Exit;
                end;
            else
              Exit;
            end;
        else
          Exit;
        end;
    else
      Exit;
    end;
  end;
  Result := True;
end;

function IsInteger3(const S: String): Boolean; inline;
var
  I: Integer;
begin
  Result := False;
  case Ord(S[1]) of
    $2D,
    $30 .. $39:
    begin
      I := 1;
      while True do
      case Ord(S[I + 1]) of
        0:
        Break;
        $30 .. $39:
        case Ord(S[I + 2]) of
          0:
          Break;
          $30 .. $39:
          case Ord(S[I + 3]) of
            0:
            Break;
            $30 .. $39:
            case Ord(S[I + 4]) of
              0:
              Break;
              $30 .. $39:
              case Ord(S[I + 5]) of
                0:
                Break;
                $30 .. $39:
                case Ord(S[I + 6]) of
                  0:
                  Break;
                  $30 .. $39:
                  case Ord(S[I + 7]) of
                    0:
                    Break;
                    $30 .. $39:
                    case Ord(S[I + 8]) of
                      0:
                      Break;
                      $30 .. $39:
                      case Ord(S[I + 9]) of
                        0:
                        Break;
                        $30 .. $39:
                        case Ord(S[I + 10]) of
                          0:
                          Break;
                          $30 .. $39:
                          case Ord(S[I + 11]) of
                            0:
                            Break;
                            $30 .. $39:
                            case Ord(S[I + 12]) of
                              0:
                              Break;
                              $30 .. $39:
                              case Ord(S[I + 13]) of
                                0:
                                Break;
                                $30 .. $39:
                                Inc(I, 13);
                              else
                                Exit;
                              end; 
                            else
                              Exit;
                            end; 
                          else
                            Exit;
                          end; 
                        else
                          Exit;
                        end; 
                      else
                        Exit;
                      end; 
                    else
                      Exit;
                    end; 
                  else
                    Exit;
                  end; 
                else
                  Exit;
                end; 
              else
                Exit;
              end;  
            else
              Exit;
            end;  
          else
            Exit;
          end;   
        else
          Exit;
        end;    
      else
        Exit;
      end;
    end;
  else
    Exit;
  end;
  Result := True;
end; 
```****

# ios - 实现 iOS Maps 风格的页面卷曲手势交互

> ID：11260443
> 
> 赞同：5
> 
> 时间：2012-06-29T10:50:00.420
> 
> 标签：ios, cocoa-touch, ios5

很多人有兴趣在 iOS 中实现页面卷曲模态转换，就像在原生地图应用程序中找到的那样 - 请参阅[此处](https://stackoverflow.com/questions/5819897/how-to-do-page-curl-with-swipe-gesture-in-ios "这里")、[此处](https://stackoverflow.com/questions/10880031/partial-page-curl-by-pan-gesture-like-in-uipageviewcontroller)和[此处](https://stackoverflow.com/questions/8603326/ios-effect-curl-as-maps-in-ipad)- 但是问题似乎没有得到完全回答。所以：

是否可以像目前在 iOS 6 上的 Maps 中那样在主视图下方显示页面卷曲模式？我希望通过用手指“卷曲”顶视图来实现转场，给人一种与卷曲直接交互的外观，就像在相同版本的 iOS 中使用 iBooks 的情况一样。

实现 segue 本身（如在部分卷曲过渡中）不是问题 - 添加手势交互（使用动态部分剥离）是问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-11T16:48:12.533

这段代码可以解决问题：[XBPageCurl](https://github.com/xissburg/XBPageCurl)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T09:15:37.053

我认为你不需要在 iOS 5`OpenGL ES`中卷曲你`mapView`喜欢的东西。你可以`QuartzCore framework`自己实现这一点。您可以看到我在[此处](https://stackoverflow.com/a/11465504/1083859)提到的代码，我还修改了该代码并尝试了这个

```
- (void)mapCurl {
    [UIView animateWithDuration:1.0 
                     animations:^{
                         CATransition *animation = [CATransition animation];
                         [animation setDuration:0.7];
                         [animation setTimingFunction:[CAMediaTimingFunction functionWithName:@"default"]];
                         animation.fillMode = kCAFillModeForwards;
                         [animation setRemovedOnCompletion:NO];
                         // For curl and uncurl the animation here..
                         if (!_isCurled) {
                             animation.endProgress = 0.65;
                             animation.type = @"pageCurl";
                             [_locationMapView.layer addAnimation:animation forKey:@"pageCurlAnimation"];  
                             // _backView is a view behind the mapView
                             [_locationMapView addSubview:_backView];                                 
                         }else {
                             animation.startProgress = 0.35;
                             animation.type = @"pageUnCurl";
                             [_locationMapView.layer addAnimation:animation forKey:@"pageUnCurlAnimation"];  
                             // _backView is a view behind the mapView
                             [_backView removeFromSuperview];
                         }
                     }
     ];                    
    _isCurled = (!_isCurled);
} 
```

# ruby - 我可以使用 WEBrick 代理服务器过滤 SSL 网站的内容吗

> ID：11260446
> 
> 赞同：0
> 
> 时间：2012-06-29T10:50:26.070
> 
> 标签：ruby, ssl, webrick

我正在使用 WEBrick 制作内容过滤代理服务器。

我可以更改/过滤 ssl 加密页面的内容吗？

谢谢。

这是我的代码；

```
#!/usr/bin/env ruby

require "webrick"
require "webrick/httpproxy"
require "ruby-debug"

include WEBrick

handler = Proc.new do |req, res|
  # res.body is empty when connecting https
  # I wanna chagne the body...
end

server = HTTPProxyServer.new(
  :Port => 4545,
  :ProxyVia => false,
  :ProxyContentHandler => handler,
)

Signal.trap('INT') do
  server.shutdown
end

server.start 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T18:21:45.397

您必须进行中间人攻击。

WEBrick::HTTPProxyServer 本身不支持 MITM，但是你可以找到一些基于 WEBrick 的第三方 MITM 代理实现。

# crystal-reports - 如何在运行时更改水晶报表中报表字段的对齐方式

> ID：11260447
> 
> 赞同：4
> 
> 时间：2012-06-29T10:50:36.853
> 
> 标签：crystal-reports

在水晶报表中，我想相应地设置字段的对齐方式。我怎样才能在运行时做同样的事情？

* * *

很好。这正在工作。谢谢。我也这样做了，代码如下所示。

```
var fo = rpt.ReportDefinition.ReportObjects["InvoiceComment"];
fo.ObjectFormat.HorizontalAlignment = Alignment.LeftAlign;
if (ds.Tables[0].Rows[0].ItemArray[19].ToString() == "Right")
    fo.ObjectFormat.HorizontalAlignment = Alignment.RightAlign;
else
    if (ds.Tables[0].Rows[0].ItemArray[19].ToString() == "Center")
        fo.ObjectFormat.HorizontalAlignment  = Alignment.HorizontalCenterAlign;` 
```

但我现在正在经历另一个问题。

```
FieldObject fo = rpt.ReportDefinition.ReportObjects["InvoiceComment"] as FieldObject; 
```

或者

```
var fo = rpt.ReportDefinition.ReportObjects["InvCom"]; 
```

显示相同的错误“索引超出了数组的范围。” 如果我使用另一个代码而不是它，它会起作用。

```
FieldObject fo = rpt.ReportDefinition.ReportObjects[35] as FieldObject; 
```

如何发生这种情况。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T11:25:20.307

要更改字段的水平对齐方式，请执行以下步骤：

1) 右键单击​​该字段。

2) 单击格式字段选项。

3) 选择常用选项卡。

4) 点击Horizo​​ntal Alignment前面的公式编辑器，添加需要的设置。

5) 以下是可用的对齐常量：

## 持续的

```
crDefaultHorAligned           

crLeftAligned                 

crRightAligned                

crCenteredHorizontally        

crJustified 
```

根据您的标准使用它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-29T17:03:47.183

在 C# 中：

```
var field = report.ReportDefinition.ReportObjects["Description1"];
field.ObjectFormat.HorizontalAlignment = Alignment.Justified; 
```

可能的选择：

```
namespace CrystalDecisions.Shared
{
    public enum Alignment
    {
        DefaultAlign,
        LeftAlign,
        HorizontalCenterAlign,
        RightAlign,
        Justified,
        Decimal,
    }
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2015-09-01T11:37:58.833

我使用文本解释 = RTF 文本并以富文本格式设置值，我的问题得到解决......我使用 RTF 动态设计了更好的水晶报表。

# xml - GWT and Sencha GXT: FormPanel result fails

> ID：11260450
> 
> 赞同：3
> 
> 时间：2012-06-29T10:50:38.973
> 
> 标签：xml, gwt, gxt, formpanel

TL/DR: How to load an XML response via `FormPanel` reliably?

* * *

We have a web application in GWT using Sencha GXT for most of the UI. We use a GXT `FormPanel` to upload a file to a server-side script (which just echoes the file's contents) to get a local file's contents in JS. Eventually this can be done with FileReader, but obviously not in browsers that don't support that.

The `FormPanel` submits its form and loads the result in a hidden IFrame from which the contents are extracted with the following snippet (from `FormPanelImpl.class`):

```
try {
  // Make sure the iframe's window & document are loaded.
  if (!iframe.contentWindow || !iframe.contentWindow.document)
    return null;

  // Get the body's entire inner HTML.
  return iframe.contentWindow.document.body.innerHTML;
} catch (e) {
  return null;
} 
```

We're loading an XML file that way and the problematic line is

```
return iframe.contentWindow.document.body.innerHTML; 
```

because the XML is loaded as XML (and thus not embedded in a HTML wrapper) in a few cases. I tried the following:

1.  I used `Content-Type: text/html` originally (oversight in the local PHP test script, error on my part in the production code). Worked in Firefox and Chrome but not in IE (9) where the XML was loaded as XML in the IFrame instead.
2.  `Content-Type: application/xml` which would be the correct one for the payload. Now it doesn't work anywhere because we now get the behaviour that originally only IE exhibited in Chrome and FF too.
3.  `Content-Type: application/octet-stream`: Not a good idea, it just downloads the file.
4.  `Content-Type: text/plain`: I was hoping this would always trigger the HTML/body wrapping and it does, but it also wraps everything in a `pre` element so it now fails everywhere, but that at least reliably. Great.

After a little digging I found out that apparently the GXT `FormPanel` uses the same `FormPanelImpl` from GWT so results are identical for both anyway. And GWT's documentation says (which Sencha wisely withheld):

> The back-end server is expected to respond with a content-type of `'text/html'`, meaning that the text returned will be treated as HTML. If any other content-type is specified by the server, then the result html sent in the `onFormSubmit` event will be unpredictable across browsers, and the `FormHandler.onSubmitComplete(FormSubmitCompleteEvent)` event may not fire at all.

However, even with sending `text/html` the behaviour is unpredictable across browsers if the payload is XML.

Is there a general solution to this? Or am I missing something terribly trivial (I'm looking at GWT for just three days now)?

**EDIT:** I tried prepending `<html><body>` to the file contents so even IE would have a body in the IFrame. Well, it did, but it also resulted in a very, very strange `innerHTML` starting with:

```
<?XML:NAMESPACE PREFIX = [default] ... 
```

which the XML parser understandably chokes on.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T16:23:27.293

My guess is that in general, wrapping XML in an HTML context without performing any escaping of special characters doesn't work reliably. I would expect it to fail at least with an XML document like

```
<a>
  <b>
    <html>
    </html>
  </b>
</a> 
```

The approach we took is to just send back a small "OK" message, and then use a separate request to get the (cached) contents from the server.

Alternatively, it would probably be possible to perform HTML encoding/decoding (or Base64, ...)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T14:34:50.813

A workaround is to override the method **getContents** in the class **com.google.gwt.dom.client.Element.FormPanelImpl**.

The code change is to use **textContent** instead of **innerHTML**.

```
public native String getContents(Element iframe) /*-{
  try {
    // Make sure the iframe's window & document are loaded.
    if (!iframe.contentWindow || !iframe.contentWindow.document)
      return null;

    // Get the body's entire inner HTML.
    return iframe.contentWindow.document.body.textContent;
  } catch (e) {
    return null;
  }
}-*/; 
```

I don't know whether this is a GWT bug or not.

Jordi.

# apache - htaccess url 重写和图像和重写规则

> ID：11260456
> 
> 赞同：0
> 
> 时间：2012-06-29T10:51:11.930
> 
> 标签：apache, .htaccess, url-rewriting

你能看到我的 htaccess 重写规则有问题吗？因为它总是匹配图像，所以浏览器永远无法找到它们

图像位于`images`Web 应用程序根目录中的文件夹中。

js 和 css 文件也被严重重定向。这应该已经解决了`!-d`，`!-f`但似乎它没有注意到url重写。

```
RewriteEngine On
RewriteBase /

RewriteRule ^.*mootools.*\.js$ mootools.v1.11.js
RewriteRule ^.*javascript\.js$ javascript.js
RewriteRule ^.*style\.css$ style.css
RewriteRule ^.*slimbox\.css$ slimbox.css
RewriteRule ^.*slimbox\.js$ slimbox.js

RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME} !-f
RewriteRule ^([^/]+)/?.html$ ?arg1=$1 [L,QSA] 
```

# android - Android 蓝牙示例 & OBEX

> ID：11260461
> 
> 赞同：3
> 
> 时间：2012-06-29T10:51:41.743
> 
> 标签：android, bluetooth, obex

我有一个仅支持 OBEX 对象推送协议的设备。我想将此设备的数据传输到我的 android 设备。经过数小时的阅读、测试和挫折，我希望有人 @ StackOverflow 可以帮助我。所以这里是：

我发现了什么：

1.  我需要在我的 android 应用程序中实现服务器功能。
2.  因为我知道`MAC`设备的地址，所以我可以直接连接到这个设备。

我可以使用 Android SDK 中的蓝牙类来解决我的问题吗？因为手机应该只与设备配对、连接和传输数据。每当 Android SDK 中的蓝牙类支持 OBEX 协议时，我都无法弄清楚。

我可以使用`Bluetooth chat example`建立手机和设备之间的连接并传输数据吗？有没有人有一个如何编写服务器端来监听端口/通道和检索数据的例子？在找到解决方案后，我整个星期都在谷歌上搜索，所以如果有人知道我如何完成这项任务，我将非常感激。

这是描述我设备的蓝牙配置文件的输出：

```
# sdptool browse  C0:1B:DC:1F:E2:F1
Browsing C0:1B:DC:1F:E2:F1 ...
Service Name: OBEX Object Push
Service RecHandle: 0x10000
Service Class ID List:
"OBEX Object Push" (0x1105)
Protocol Descriptor List:
"L2CAP" (0x0100)   
"RFCOMM" (0x0003)
Channel: 9 
"OBEX" (0x0008)
Profile Descriptor List:
"OBEX Object Push" (0x1105)
Version: 0x0100 
```

那么如何设法从该设备中检索数据呢？

# slideshow - 实现轮播幻灯片的聪明方法

> ID：11260467
> 
> 赞同：0
> 
> 时间：2012-06-29T10:51:51.353
> 
> 标签：slideshow, carousel

我正在使用 Jquery 为图像创建自己的轮播幻灯片。目前我有一个 div 作为视口溢出：不可见；在里面，我有一个非常长的 div，所有不同的图像彼此相邻。

这意味着 div 可能有几千个像素宽。我想知道如果这可能是一个问题怎么办。

我想单独加载所有图像并仅在需要时移动它们，而不是移动整组幻灯片。

您认为什么是实现高性能和轻量化的好解决方案？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T11:06:37.860

在某些设备上，滚动长位图或图层可能会导致视觉撕裂效果，如果我要自己开始这样的项目 - 完成起来更加棘手 - 但使用单独控制的 div 要好得多。

根据您要实现的目标，您通常只需要使用您独立控制的**两个 div**（可能是三个）。您需要做的就是继续将下一个图像加载到“隐藏”在视口之外的 div 中，然后在滑出当前可见的图像时将其滑入到位。

从优化的角度来看，上述方法是一种更好的方法，而且您可以实现各种过渡效果（即幻灯片或淡入淡出等）的灵活性。我还建议您将图像列表存储为**JS 数组**（并在将其插入 HTML Dom 之前预加载每个图像）或作为图像上的**HTML/LI**列表（浏览器已经预加载）。

一个很好的例子如下：

[http://jquery.malsup.com/cycle/](http://jquery.malsup.com/cycle/)

# c# - 如果不为空，检查查询字符串参数值的最优雅方法是什么？

> ID：11260468
> 
> 赞同：10
> 
> 时间：2012-06-29T10:51:56.880
> 
> 标签：c#, asp.net, if-statement, query-string

```
if(Page.Request.QueryString["ParamName"] != null)
  if(Page.Request.QueryString["ParamName"] == expectedResult)
    //Do something spectacular 
```

上面看起来很笨拙。是否有更优雅/紧凑的方法来检查查询字符串参数是否不为空，如果是 - 检索它的值？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-29T10:58:04.083

我首先想到的是提供

```
if ((Page.Request.QueryString["ParamName"] ?? "") == expectedResult) { 
```

但很快意识到，对于字符串，将一些字符串与 null 进行比较是可以的，并且会产生错误，所以真的只使用它就可以了：

```
if(Page.Request.QueryString["ParamName"] == expectedResult)
    //Do something spectacular 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-06-29T10:52:33.993

您可以使用`String.IsNullOrEmpty`

```
String.IsNullOrEmpty(Page.Request.QueryString["ParamName"]); 
```

或者

```
var parm = Page.Request.QueryString["ParamName"] ?? "";
if(parm == expectedResult)
{

} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-29T11:00:53.153

我个人会使用一组简单的扩展方法，如下所示：

```
public static class RequestExtensions
{
    public static string QueryStringValue(this HttpRequest request, string parameter)
    {
        return !string.IsNullOrEmpty(request.QueryString[parameter]) ? request.QueryString[parameter] : string.Empty;
    }

    public static bool QueryStringValueMatchesExpected(this HttpRequest request, string parameter, string expected)
    {
        return !string.IsNullOrEmpty(request.QueryString[parameter]) && request.QueryString[parameter].Equals(expected, StringComparison.OrdinalIgnoreCase);
    }
} 
```

和示例用法

```
string value = Page.Request.QueryStringValue("SomeParam");
bool match = Page.Request.QueryStringValueMatchesExpected("SomeParam", "somevaue"); 
```

# php - Authorize.net SIM 接收数据并更新数据库

> ID：11260472
> 
> 赞同：1
> 
> 时间：2012-06-29T10:52:15.950
> 
> 标签：php, mysql, authorize.net

我已经注册了 Authorize.net 并成功：

1.  将我的购物车转换为发送到 Authorize.net 并处理它的数据。
2.  使用中继响应，将用户发送到我的感谢页面。

一旦交易完成，我无法理解如何实际更新我的数据库。我要搜索哪些术语来解决这个问题？几乎所有文档都显示了解决方案的一部分，但实际上并未说明将其放置在何处以及如何将其接收回来。

在我的购物车页面上，我有一个 Authorize.net 提供的隐藏输入字段列表。我插入了我的美元金额、描述等。我假设我放置了另一个名为“x_po_num”的隐藏字段，并将值作为我在数据库中的动态 PO#。

有没有办法在“谢谢”页面上实际检索它，所以我交叉引用数据库并简单地添加一个“确认”值或其他东西？

如何检索发送到 Authorize.net 的值？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T10:58:22.993

您获得的数据只是在一个`$_POST`数组中，您可以`var_dump()`查看它包含的值。

这是 PHP 中的示例中继响应脚本：

```
<?php

// Retrieving and defining Form Data from Post command body from Authorize.Net
$ResponseCode       = trim($_POST["x_response_code"]);
$ResponseReasonText = trim($_POST["x_response_reason_text"]);
$ResponseReasonCode = trim($_POST["x_response_reason_code"]);
$AVS                = trim($_POST["x_avs_code"]);
$TransID            = trim($_POST["x_trans_id"]);
$AuthCode           = trim($_POST["x_auth_code"]);
$Amount             = trim($_POST["x_amount"]);

?>

    <html>
    <head>
    <title>Transaction Receipt Page</title>
    <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1"></head>
    <body bgcolor="#FFFFFF">

<?php
    // Test to see if this is a test transaction.
    if ($TransID === 0 && $ResponseCode === 1)
    {
        // If so, print it to the screen, so we know that the transaction will not be processed.
?>

    <table align="center">
        <tr>
            <th><font size="5" color="red" face="arial">TEST MODE</font></th>
        <tr>
            <th valign="top"><font size="1" color="black" face="arial">This transaction will <u>NOT</u> be processed because your account is in Test Mode.</font></th>
      </tr>
    </table>

<?php
    }
?>

    <br>
    <br>

<?php
    // Test to see if the transaction resulted in Approvavl, Decline or Error
    if ($ResponseCode === 1)
    {
?>

    <table align="center">
        <tr>
            <th><font size="3" color="#000000" face="Verdana, Arial, Helvetica, sans-serif">This transaction has been approved.</font></th>
      </tr>
    </table>

<?php
    }
    else if ($ResponseCode === 2)
    {
?>

    <table align="center">
    <tr>
        <th width="312"><font size="3" color="#000000" face="Verdana, Arial, Helvetica, sans-serif">This transaction has been declined.</font></th>
    </tr>
    </table>

<?php
    }
    else if ($ResponseCode === 3)
    {
?>

    <table align="center">
    <tr>
        <th colspan="2"><font size="3" color="Red" face="Verdana, Arial, Helvetica, sans-serif">There was an error processing this transaction.</font></th>
    </tr>
    </table>

<?php
    }
?>

    <br>
    <br>
    <table align="center" width="60%">
    <tr>
        <td align="right" width=175 valign=top><font size="2" color="black" face="arial"><b>Amount:</b></font></td>
        <td align="left"><font size="2" color="black" face="arial">$<?php echo $Amount; ?></td>
    </tr>

    <tr>
        <td align="right" width=175 valign=top><font size="2" color="black" face="arial"><b>Transaction ID:</b></font></td><td align="left"><font size="2" color="black" face="arial">

<?php
    if ($TransID === 0)
    {
        echo 'Not Applicable.';
    }
    else
    {
        echo $TransID;
    }
?>

    </td></tr>

    <tr>
        <td align="right" width=175 valign=top><font size="2" color="black" face="arial"><b>Authorization Code:</b></font></td><td align="left"><font size="2" color="black" face="arial">

<?php
    if ($AuthCode === "000000")
    {
        echo 'Not Applicable.';
    }
    else
    {
        echo $AuthCode;
    }
?>

        </td></tr>
    <tr>
        <td align="right" width=175 valign=top><font size="2" color="black" face="arial"><b>Response Reason:</b></font></td><td align="left"><font size="2" color="black" face="arial">(<?php echo $ResponseReasonCode; ?>)&nbsp;<?php echo $ResponseReasonText; ?></font><font size="1" color="black" face="arial"></td></tr>
    <tr>

        <td align="right" width=175 valign=top><font size="2" color="black" face="arial"><b>Address Verification:</b></font></td><td align="left"><font size="2" color="black" face="arial">

<?php
    // Turn the AVS code into the corresponding text string.
    switch ($AVS)
    {
        case "A":
            echo "Address (Street) matches, ZIP does not.";
            break;
        case "B":
            echo "Address Information Not Provided for AVS Check.";
            break;
        case "C":
            echo "Street address and Postal Code not verified for international transaction due to incompatible formats. (Acquirer sent both street address and Postal Code.)";
            break;
        case "D":
            echo "International Transaction:  Street address and Postal Code match.";
            break;
        case "E":
            echo "AVS Error.";
            break;
        case "G":
            echo "Non U.S. Card Issuing Bank.";
            break;
        case "N":
            echo "No Match on Address (Street) or ZIP.";
            break;
        case "P":
            echo "AVS not applicable for this transaction.";
            break;
        case "R":
            echo "Retry. System unavailable or timed out.";
            break;
        case "S":
            echo "Service not supported by issuer.";
            break;
        case "U":
            echo "Address information is unavailable.";
            break;
        case "W":
            echo "9 digit ZIP matches, Address (Street) does not.";
            break;
        case "X":
            echo "Address (Street) and 9 digit ZIP match.";
            break;
        case "Y":
            echo "Address (Street) and 5 digit ZIP match.";
            break;
        case "Z":
            echo "5 digit ZIP matches, Address (Street) does not.";
            break;
        default:
            echo "The address verification system returned an unknown value.";
            break;
        }
?>

        </td>
    </tr>
    </table>
    </body>
</html> 
```

您也可以使用[静默帖子](http://www.johnconde.net/blog/all-about-authorize-nets-silent-post/)。这是一个[PHP 教程](http://www.johnconde.net/blog/handling-authorize-net-silent-post-with-php/)，展示了如何使用它。

# c# - ServiceBroker 对话是否应该在事务中

> ID：11260476
> 
> 赞同：1
> 
> 时间：2012-06-29T10:52:22.160
> 
> 标签：c#, sql-server-2008, service-broker

我们有一些看起来有点像这样的代码（错误处理和其他东西被删除）

```
using (var tran = conn.BeginTransaction())
{
    var client = new Service(...);
    var dialog = client.GetConversation(null, conn, tran);
    var response = dialog.Receive();

    // do stuff with response, including database work

    dialog.Send(message, conn, tran);
    dialog.EndConversation(conn, tran);

    tran.Commit();
    conn.Close();
} 
```

我们继承了这段代码并且不是 ServiceBroker 的专家，如果我们像这样将对话移到事务之外会不会有问题：

```
var client = new Service(...);
var dialog = client.GetConversation(null, conn, tran);
var response = dialog.Receive();

using (var tran = conn.BeginTransaction())
{
    // do stuff with response, including database work
    tran.Commit();
}

dialog.Send(message, conn, tran);
dialog.EndConversation(conn, tran);
conn.Close(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T11:25:56.220

在这种情况下，您会收到消息并将其从队列中删除。您将无法再次收到它..

如果所有代码都在事务中并且消息处理中存在错误 - 事务永远不会提交并且消息留在队列中（默认情况下 - 在 5 次回滚后队列被禁用）。因此，您可以检测错误原因，纠正错误并再次处理消息（预期的异常不应导致回滚，有很多方法可以处理它们）。

我会说一切都应该在交易中。

# objective-c - 使用 setFrame 正确定位 NSTextField：

> ID：11260479
> 
> 赞同：2
> 
> 时间：2012-06-29T10:52:30.090
> 
> 标签：objective-c, xcode, nsview, nstextfield

[![NSView](../Images/87166a53c5c50e395e10a362f12b6edb.png)](https://i.stack.imgur.com/Pwsrz.png)

我在将我的 NSTextFields 定位在我的视图中时遇到问题，所以我希望你们能帮助我。我有这个 NSView *theView ，`[theView setFrame:NSMakeRect(10, 10, 64, 64)];`它可以将视图准确地定位在我想要的位置。

但是现在我正在尝试将 NSTextField 作为 subView 添加到 theView 但有些不对劲。现在*上面的图像应该是这样*的。

这是我的代码和它的样子：

```
primaryDigit = [[NSTextField alloc] init];
[primaryDigit setFrame:NSMakeRect(4, 6, 60, 58)];
[primaryDigit setFont:[NSFont fontWithName:@"Helvetica Neue" size:55]];
[primaryDigit setBezeled:NO];
[primaryDigit setEditable:NO];
[primaryDigit setSelectable:NO];
[primaryDigit setDrawsBackground:NO];
[primaryDigit setTextColor:[NSColor whiteColor]];
[primaryDigit setStringValue:@"2"];
[self addSubview:primaryDigit]; 
```

[![错误的](../Images/27f66b6d265da84a06827d2d413bb8b4.png)](https://i.stack.imgur.com/EZvTP.png)

当我这样做时`[primaryDigit setFrame:NSMakeRect(0, 0, 64, 64)];`，数字不会出现在左下角，但它会这样做：

[![奇怪的](../Images/46110f58ee60e661dc8084a46d8edd41.png)](https://i.stack.imgur.com/ElHh6.png)

关于定位这些视图，是否有一些我不理解的基本内容？我是个菜鸟，但我仍然认为我理解这一点。（顺便说一句，这些图像中的字体不同，但我认为这不会造成问题？）

更新：正如 'dasdom' 要求的那样，这是带有背景颜色的文本字段 [![背景颜色](../Images/9ad3a783ea320a6d1c6ea925582a6804.png)](https://i.stack.imgur.com/SC0Pr.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T14:20:00.880

好的，我发现了问题所在。

NSTextFields 中的文本需要围绕它们的“空间”。因此，当他们有文本时，它们不会出现在视图的左下角，而是距离它有点远。

这也意味着如果 NSTextFields 没有足够大的框架，那么文本可能会被截断。

这里有一个例子：[![二](../Images/3ecf9576baae10de15f6f3ff44c728d1.png)](https://i.stack.imgur.com/t2btv.png)

“2”上方的所有红色空间都必须在那里，否则数字将移出框架并在底部被切断。

# ios - RestKit，问题和标签之间的多对多关系，如 Stackoverflow api

> ID：11260485
> 
> 赞同：0
> 
> 时间：2012-06-29T10:52:42.920
> 
> 标签：ios, core-data, many-to-many, restkit

我们使用 RestKit 缓存来自远程 Web 服务的数据，类似于 Stackoverflows API。

API 中有问题和标签，但我们获取的是标签 ID，而不是文本中的标签。

问题资源如下所示：

```
{
  "items": [
    {
      "question_id": 11260172,
      "tags": [
          { "tag_id" : 1},
          { "tag_id" : 2},
          { "tag_id" : 3}
      ],
      "view_count": 1,
      [...]
} 
```

标签资源如下所示：

```
{
  "items": [
    {
      "id": 1,
      "name": "c#",
    },
    {
      "id": 2,
      "name": "java",
    },
    {
      "id": 3,
      "name": "php",
    }]
} 
```

我们想在问题和标签之间创建一个连接表，以便问题可以有很多标签，标签有很多问题。

我们有一对多的工作，但没有多对多的连接表。因此，我们想知道 RestKit 多对多映射应该如何寻找这样的关系，以及数据模型应该如何看待。

我们尝试了以下映射，但它不是多对多的。

```
[tagMapping mapKeyPath:@"id" toRelationship:@"questions" withMapping:tagsQuestionsMappingMapping];
[questionMapping mapKeyPath:@"tags" toRelationship:@"tags" withMapping:tagsQuestionsMappingMapping]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T15:44:33.427

这样我们就清楚了。因为你的根密钥在这两个不同的 web 服务中是相同的，所以你需要使用两个不同的映射。

这是您的问题端点的示例映射：

```
RKManagedObjectMapping* nested = [RKManagedObjectMapping mappingForClass: [NSDictionary class] inManagedObjectStore:nil];
[nested mapKeyPath: @"tag_id" toAttribute: @"id"];

RKManagedObjectMapping* questions = [RKManagedObjectMapping mappingForClass: [NSDictionary class] inManagedObjectStore: nil];
[questions mapAttributes: @"question_id", @"view_count", nil];  //I don't know your core data model...
[questions hasMany: @"tags" withMapping: nested];
[questions connectRelationship: @"tags" withObjectForPrimaryKeyAttribute: @"tag_id"]; 
```

这是您的标签端点的示例映射

```
RKManagedObjectMapping* tags = [RKManagedObjectMapping mappingForClass: [Tag class] inManagedObjectStore: store];
[tags mapAttributes: @"id", @"name", nil]; 
```

注意：

1）标签映射每次都不一样，因为每个feed的主键属性名都不一样

2）我不知道你的核心数据地形，所以这些地图可能无法正常工作。您将需要了解我在做什么并为您的应用程序重做它。

3）你永远不用担心连接表。这是由框架处理的。

# asp.net - Windows 身份验证为 asp.net 应用程序弹出多次，其中 asp.net 应用程序在 IFrame 中为 Ipad

> ID：11260486
> 
> 赞同：0
> 
> 时间：2012-06-29T10:52:44.403
> 
> 标签：asp.net, safari, windows-authentication

这是场景：使用集成 Windows 身份验证使用 ASP.NET 构建的 Intranet 应用程序。在此应用程序的起始页上，还有另一个嵌入在 IFrame 中的 ASP.NET 应用程序，该应用程序也使用集成的 Windows 身份验证。这对 IE 用户来说没问题，但是当 iPad 用户使用 Safari 连接到站点时，身份验证会弹出两次，这对用户来说非常烦人。是否可以与其他应用程序“共享”第一次身份验证尝试，以便 iPad 用户只需要进行一次身份验证？

# java - J2ME Bouncy Castle 以字符串形式获取 AES 加密结果

> ID：11260487
> 
> 赞同：3
> 
> 时间：2012-06-29T10:52:53.943
> 
> 标签：java, java-me, base64, bouncycastle

我正在 J2ME 中开发一些发送和接收加密消息的应用程序，我发现下面的代码对其进行加密并转换为字符串，但它不起作用并抛出异常，我应该怎么做？当我想解密时，我应该如何将 String 转换为 byte[] ？谢谢

```
 byte[] plainArray = message.getBytes();
        try {
            byte[] keyBytes = "SECRET_1SECRET_2SECRET_3".getBytes();

            // key = new KeyParameter(keyBytes);
            AESEngine engine = new AESEngine();
            PaddedBufferedBlockCipher cipher = new PaddedBufferedBlockCipher(engine);
            cipher.init(true, new KeyParameter(keyBytes));
            byte[] cipherBytes = new byte[cipher.getOutputSize(plainArray.length)];
            int cipherLength = cipher.processBytes(plainArray, 0, plainArray.length, cipherBytes, 0);
            cipher.doFinal(cipherBytes, cipherLength);

            String result2 = org.apache.commons.codec.binary.Base64.encodeBase64String(cipherBytes);
            formSender.append(result2);

        } catch (Exception e) {
        } 
```

例外 ：

> 跟踪：，在显示类 java.lang.Error 中捕获的异常：ClassFormatError：SSMS.EncShow() 中的 56，SSMS.commandAction() 中的 bci=173，javax.microedition.lcdui.Display$ChameleonTunnel.callScreenListener 中的 bci=16( )，在 com.sun.midp.chameleon.layers.SoftButtonLayer.processCommand() 处 bci=44，在 com.sun.midp.chameleon.layers.SoftButtonLayer.soft1() 处 bci=80，在 com.sun 处 bci=31。 midp.chameleon.layers.SoftButtonLayer.keyInput(), bci=48 at com.sun.midp.chameleon.CWindow.keyInput(), bci=38 at javax.microedition.lcdui.Display$DisplayEventConsumerImpl.handleKeyEvent(), bci= 32 在 com.sun.midp.lcdui.DisplayEventListener.process()，bci=294 在 com.sun.midp.events.EventQueue.run()，bci=177 在 java.lang.Thread.run(Thread.java: 722)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-29T16:30:52.797

根据[http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/ClassFormatError.html](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/ClassFormatError.html) “当 Java 虚拟机尝试读取类文件并确定该文件格式错误或否则不能解释为类文件”。

对于基于 Java 1.3 的 Java ME，您的 org.apache.commons 版本可能太新了。请务必使用旧版本的 org.apache.commons。

# php - 使用 PHP 函数集合或如何避免多个文件

> ID：11260502
> 
> 赞同：0
> 
> 时间：2012-06-29T10:53:57.777
> 
> 标签：php, function, collections

我想知道是否可以使用单个 PHP 文件来声明所有必要的函数，而不是为每个函数创建一个唯一的文件。

例如，我有一个向 phpscript.php 提交文本的表单。另一种形式是发送日期。我会这样做：

```
 <form id="text" method="post" action="textscript.php">
            <textarea name="text"></textarea>
        </form>

        <form id="editForm" method="POST" action="datescript.php">

            <input name="date" type="date" /><br />
            <input id="submitDate" type="submit" /><br />

        </form> 
```

现在我想声明包含两个过程的functions.php，然后使用这个文件进行表单操作。我只是不知道如何实现这一点，而且我已经尝试提供 URL 参数。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T10:58:50.903

您可以查看[前端控制器模式](http://en.wikipedia.org/wiki/FrontController)来调度“函数调用”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T10:55:38.343

是的，你可以这样做！

只需创建一个类似functions.php 的文件，然后在每个要使用这些函数的文件中使用`include`. 查看[PHP.net](http://php.net/manual/en/function.include.php)文档的 include 以获取有关如何使用 include 的更多信息。

例子

```
<?php

include ("functions.php");

?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-29T11:00:41.307

您可以通过添加隐藏的输入值来做到这一点。

```
<form id="editForm" method="POST" action="functions.php">

        <input name="date" type="date" /><br />
        <input id="submitDate" type="submit" /><br />
        <input type-'hidden' name='function' value='datescript' />

    </form>

    <form id="text" method="post" action="functions.php">
        <textarea name="text"></textarea>
        <input type-'hidden' name='function' value='textscript' />
    </form> 
```

然后在你的functions.php中，你可以从`$_POST['function']`和

```
 if($_POST['function'] == 'datescript'){
      //do the relevant things
    }
    if($_POST['function'] == 'textscript'){
      //do the relevant things
    } 
```

希望这可以帮助 ：-）

# php - 使用 DOMDocument 创建图像标签失败

> ID：11260505
> 
> 赞同：1
> 
> 时间：2012-06-29T10:54:25.700
> 
> 标签：php, domdocument

我正在使用 DOMDocument 生成一个 XML，这个 XML 必须有一个图像标签。

不知何故，当我这样做时（简化）

```
$response = new DOMDocument();
$actions = $response->createElement('actions');
$response->appendChild($actions);

$imageElement = $response->createElement('image'); 
$actions->appendChild($imageElement);

$anotherNode = $response->createElement('nodexy');
$imageElement->appendChild($anotherNode); 
```

结果是

```
 <actions>
    <img>
    <node></node>
 </actions> 
```

如果我将“image”更改为“images”甚至“img”，它会起作用。当我从 PHP 5.3.10 切换到 5.3.8 时，它也能正常工作。

这是错误还是功能？我的猜测是 DOMDocuments 假设我想构建一个 HTML img 元素......我能以某种方式阻止这种情况吗？

最奇怪的是：我无法在同一服务器上的另一个脚本中重现该错误。但我没有抓住模式......

这是该类的完整pastebin，导致错误： http: [//pastebin.com/KqidsssM](http://pastebin.com/KqidsssM)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T11:11:16.037

这花了我两个小时。

DOMDocument 正确呈现 XML。XML由ajax调用返回，浏览器/javascript在显示之前将其更改为img ...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T11:05:14.130

第 44 行是否有可能`$imageAction->getAction()`返回“img”？你`var_dump()`编过吗？我看不出 DOM 在任何情况下如何将“image”转换为“img”。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-29T11:22:49.617

我认为它表现为“html doc”尝试添加版本号“1.0”

代码

```
<?php

    $response = new  DOMDocument('1.0','UTF-8');
    $actions = $response->createElement('actions');
    $response->appendChild($actions);

    $imageElement = $response->createElement('image'); 
    $actions->appendChild($imageElement);

    $anotherNode = $response->createElement('nodexy');
    $imageElement->appendChild($anotherNode);

    echo $response->saveXML(); 
```

输出：

```
 <?xml version="1.0" encoding="UTF-8" ?> 
     <actions>
       <image>
         <nodexy /> 
       </image>
     </actions> 
```

你也可以使用[SimpleXML](http://www.php.net/manual/en/book.simplexml.php)类

例子 ：

```
<?php
    $response = new SimpleXMLElement("<actions></actions>");
    $imageElement = $response->addChild('image');
    $imageElement->addChild("nodexy");

    echo $response->asXML(); 
```

输出 ：

```
 <?xml version="1.0" ?> 
    <actions>
      <image>
        <nodexy /> 
      </image>
   </actions> 
```

# objective-c - 核心数据：关闭最后一个窗口时崩溃

> ID：11260509
> 
> 赞同：0
> 
> 时间：2012-06-29T10:54:44.430
> 
> 标签：objective-c, core-data, automatic-ref-counting

当我关闭应用程序的最后一个窗口时，我总是会收到此错误：

> 应用程序特定信息：objc_msgSend() 选择器名称：responsToSelector：objc[42729]：垃圾收集关闭
> 
> Thread 0 Crashed:: Dispatch queue: com.apple.main-thread 0
> libobjc.A.dylib 0x00007fff8cc9a15​​0 objc_msgSend_vtable5 + 16 1 com.apple.AppKit 0x00007fff8fbca814 -[NSApplication supplementalTargetForAction:sender:] + 63 2 com.apple.AppKit 0x00007fff8fab91e4 _objectFromResponderChainWhichRespondsToAction + 155 3 com.apple.AppKit 0x00007fff8fab8feb _NSTargetForSendAction + 3255 4 com.apple.AppKit 0x00007fff8fab832f -[NSApplication targetForAction:to:from:] + 682 5 com.apple.AppKit 0x00007fff8fab7e00 -[NSMenu _enable]

我承认文档笔尖有两个窗口。我希望在关闭主窗口时关闭并释放“辅助窗口”。我应该怎么做？也许这些错误来自这里……我正在使用 Core Data 和 ARC。

问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T19:43:44.630

我发现了一些似乎可以解决问题的东西。但我不明白发生了什么，我真的不喜欢这个。

在 IB 中，文件的所有者有一个指向文档窗口的“窗口”出口；但是没有@property NSWindow 窗口；在 NS(Persistent)Document 的默认代码中。

我不得不让一个面板成为文档主窗口的“子窗口”，所以我添加了一个@property NSWindow mainWindow。新的“mainWindow”出口指向与“window”出口相同的窗口。

突然间不再有崩溃，不再有僵尸。发生了什么？我很困惑。

经过反思：我添加了一个指向文档窗口的指针，因此 ARC 计数器永远不会达到零。我想我在某处缺少对 NSDocument 的 _window 的引用，现在由我的插座平衡。

# javascript - 平均值返回的数字太大（两个变量）

> ID：11260512
> 
> 赞同：2
> 
> 时间：2012-06-29T10:54:54.893
> 
> 标签：javascript, html

当我划分两个不同的变量时，我得到了这个返回：

```
1.4007342235591407 
```

但我想要的只是两位小数，如下所示：

```
1.40 
```

这是我的代码：

```
document.getElementById('place').innerHTML = meter / seler; 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-29T10:55:56.610

使用[`<number>.toFixed(2)`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Number/toFixed).

```
document.getElementById('place').innerHTML = (meter / seler).toFixed(2); 
```

# iphone - CorePlot 中的瀑布

> ID：11260513
> 
> 赞同：0
> 
> 时间：2012-06-29T10:54:55.300
> 
> 标签：iphone, ipad, charts, core-plot, waterfall

如何在 ipad 中使用 coreplot 绘制瀑布图。我可以绘制饼图和其他图表，但无法绘制它。如果有人有工作示例，请分享，这将非常有帮助

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-08T13:35:08.407

使用条形图。除了通常的位置和小费值之外，在绘图上设置`barBasesVary`为并从数据源返回基值。`YES`

# jquery - jquery ui 可调整大小更新图像尺寸

> ID：11260522
> 
> 赞同：1
> 
> 时间：2012-06-29T10:55:38.950
> 
> 标签：jquery, jquery-ui

我正在使用 jquery ui resizable 来调整图像大小和[这个插件来旋转它](http://code.google.com/p/jqueryrotate/wiki/Examples)

现在，当我旋转它时，假设`90`度数`resizable`不知道我这样做了，所以我需要以某种方式更新它或者杀死它并再次运行它？无论哪种方式，我都不知道该怎么做，有人可以帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T12:18:03.950

您可以使用以下方法销毁/重新初始化它：

```
$('.ui-resizable').resizable('destroy').resizable(); 
```

这是一个例子 - [http://jsfiddle.net/U7Hqm/1/](http://jsfiddle.net/U7Hqm/1/)

# c# - 代码隐藏中的 WinRT/Metro 动画

> ID：11260529
> 
> 赞同：15
> 
> 时间：2012-06-29T10:56:01.737
> 
> 标签：c#, windows-runtime, winrt-xaml

以下代码在 Silverlight 中运行良好：

```
private void Button_Click_1(object sender, RoutedEventArgs e)
{    
    Storyboard storyboard = new Storyboard();
    DoubleAnimation doubleAnimation = new DoubleAnimation();
    doubleAnimation.From = 50;
    doubleAnimation.To = 100;
    doubleAnimation.RepeatBehavior = RepeatBehavior.Forever;
    doubleAnimation.AutoReverse = true;
    doubleAnimation.Duration = new Duration(TimeSpan.FromMilliseconds(200));
    storyboard.Children.Add(doubleAnimation);
    Storyboard.SetTarget(doubleAnimation, button1);
    Storyboard.SetTargetProperty(doubleAnimation, new PropertyPath("Width"));
    storyboard.Begin();
} 
```

在 WinRT/Metro 中，它需要做一个小改动才能使其编译：

```
Storyboard.SetTargetProperty(doubleAnimation, "Width"); 
```

但是当你运行它时，什么也没有发生。

如果您将属性从“Width”更改为“Opacity”（同时更改 From=0 和 To=1），则可以。

“宽度”有什么问题？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-06-29T12:19:17.250

您需要添加以下内容：

```
doubleAnimation.EnableDependentAnimation = true; 
```

这似乎可以解决问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-29T11:34:39.133

我不确定，但尝试使用：

```
Storyboard.SetTargetProperty(doubleAnimation, Button.WidthProperty); 
```

代替

```
Storyboard.SetTargetProperty(doubleAnimation, "Width"); 
```

# iphone - 如何在 iPhone 中使用 SQLite？

> ID：11260530
> 
> 赞同：0
> 
> 时间：2012-06-29T10:56:02.193
> 
> 标签：iphone, ios, sqlite, fmdb

我是在 iPhone 中使用 SQLite 的新手。我使用谷歌并获得了一些关于 iPhone 版 SQLite 的信息。我已经从[这里](http://www.icodeblog.com/2011/11/04/simple-sqlite-database-interaction-using-fmdb/)下载了示例源代码。我添加了代码来创建如下表，

```
database = [FMDatabase databaseWithPath:path];
[database open];
[database executeUpdate:@"create table test(name text, message text)"]; 
```

我使用下面的代码在表中插入值：

```
 NSString *nameStr = nameText.text;
    NSString *messageStr = ageText.text;

    NSString *executeQuery = [NSString stringWithFormat:@"insert into test values ('%@', '%@')",nameStr, messageStr];
    NSLog(@"Execute Query : %@", executeQuery);
    //[database executeUpdate:executeQuery];

    [database executeUpdate:@"insert into test(name, message) values(?,?)", nameStr,messageStr,nil]; 
```

但是，该应用程序崩溃了，`[database executeUpdate:@"insert into test(name, message) values(?,?)", nameStr,messageStr,nil];`我无法得到这次崩溃的确切原因。

如果我们在 iPhone 中使用 FMDatabase 是安全的，并且它更适合 iPhone 应用程序？任何人都可以帮助解决这些问题吗？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T18:28:46.060

有关于使用 FMDB 和使用 stringWithFormat 的正确方法的文档：不是吗： [https](https://github.com/ccgus/fmdb) ://github.com/ccgus/fmdb （搜索“不应该这样做”）。

相反，你想做这样的事情：

```
database = [FMDatabase databaseWithPath:path];
[database open]; // FIXME check the return value
[database executeUpdate:@"create table test(name text, message text)"];  // FIXME check for an error
// since we're only performing a single update, there's no need for a transaction
[executeUpdate:@"INSERT INTO test (name, message) VALUES (?, ?)", @"Yuva", @"Hi there"]; 
```

-gus（编写 FMDB 的人）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T10:57:46.353

使用此代码

```
database = [FMDatabase databaseWithPath:path];
[database open];
[database executeUpdate:@"create table test(name text, message text)"];
[database beginTransaction];

NSString *executeQuery = [NSString stringWithFormat:@"INSERT INTO test (name, message) VALUES (\"%@\", \"%@\")",@"Yuva", @"Hi there",nil];
NSLog(@"Execute Query : %@", executeQuery);
[database executeUpdate:executeQuery];
[database commit]; 
```

# php - 二维数组php中的尴尬重复

> ID：11260531
> 
> 赞同：0
> 
> 时间：2012-06-29T10:56:11.170
> 
> 标签：php, arrays

我将两个数组合并在一起，它们都包含一个 string(url) 和 int(score)。以下是outome的示例。每当一个字符串重复时，我需要删除该字符串及其对应的 int。例如，第 4 行 (www.thebeatles.com/ - 30) 应该被删除。第 5 行和第 6 行也应该被删除，因为它们已经以不同的分数出现。

```
http://www.thebeatles.com/ - 55
http://en.wikipedia.org/wiki/The_Beatles - 49
http://www.beatlesstory.com/ - 45
http://www.thebeatles.com/ - 30
http://en.wikipedia.org/wiki/The_Beatles - 28
http://www.beatlesstory.com/ - 26
http://www.beatlesagain.com/ - 24
http://www.thebeatlesrockband.com/ - 23
http://www.last.fm/music/The+Beatles - 22
http://itunes.apple.com/us/artist/the-beatles/id136975 - 20
http://www.youtube.com/watch?v=U6tV11acSRk - 18
http://blekko.com/ws/http://www.thebeatles.com/+/seo - 17
http://www.adriandenning.co.uk/beatles.html - 16
http://www.npr.org/artists/15229570/the-beatles - 15
http://mp3.com/artist/The%2BBeatles - 14
http://www.beatles.com/ - 13
http://www.youtube.com/watch?v=TU7JjJJZi1Q - 12
http://www.guardian.co.uk/music/thebeatles - 11
http://www.cirquedusoleil.com/en/shows/love/default.aspx - 9
http://www.recordingthebeatles.com/ - 7
http://www.beatlesbible.com/ - 5 
```

我是 PHP 新手，我尽最大努力让 array_unique() 工作失败了。真的很感谢一些帮助家伙！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T11:35:15.547

这是一个合并两个数组并丢弃任何重复项的函数，希望对您有所帮助：

```
 function merge_links($arr_l, $arr_r) {
            $new_links = array();
            $links = array_merge($arr_l, $arr_r); //the big list with every links

            foreach($links as $link) {
                $found = false; //did we found a duplicate?

                //check if we already have it
                foreach($new_links as $new_link) {
                    if($new_link['url'] == $link['url']) {
                        //duplicate
                        $found = true;

                        break;
                    }
                }

                //not found, so insert it
                if(!$found) {
                    $new_links[] = $link;
                }
            }

            return $new_links;
        }

        $arr1[0]['url'] = 'http://test.nl';
        $arr1[0]['score'] = 30;

        $arr1[1]['url'] = 'http://www.google.nl';
        $arr1[1]['score'] = 30;

        $arr2[0]['url'] = 'http://www.tres.nl';
        $arr2[0]['score'] = 30;

        $arr2[1]['url'] = 'http://test.nl';
        $arr2[1]['score'] = 30;

        print_r(merge_links($arr1, $arr2)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T11:13:34.617

好吧，即使从技术上讲，这些字符串也不是唯一的。即它们完全不同。

> *   [http://www.thebeatles.com/](http://www.thebeatles.com/) - 55
> *   [http://www.thebeatles.com/](http://www.thebeatles.com/) - 30

所以，array_unique() 不会给你所需的输出。解决此问题的一种方法是定义一个单独的数组并分别存储 URI 和数字。一种易于管理的形式是这样的。

```
array(

    array("http://www.thebeatles.com", 55),
    array("http://www.thebeatles.com", 30)

); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-29T11:00:24.923

您可以将链接作为包含链接和分数的数组的键。对应于key，总会有一个值。但是最后添加的那个将在您的最终数组中。

# windows - Windows 8 VB MD5 哈希

> ID：11260532
> 
> 赞同：0
> 
> 时间：2012-06-29T10:56:23.007
> 
> 标签：windows, vb.net, md5

您好，我正在寻找适用于 Windows 8 的 md5 哈希函数（metro 应用程序）

我一直在谷歌（和其他搜索引擎）中寻找这个，但没有任何适用于 windows 8 的内容，其中大多数是关于 win 7（或更早版本）

还是非常感谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T12:05:54.217

我没有找到 MD5，但我找到了 SHA256，如果您有兴趣，这里有一些示例；）

```
Function sha512(Key As String)
    Dim hash As String
    Dim strAlgName As String = "SHA512"
    Dim objAlgProv As HashAlgorithmProvider = HashAlgorithmProvider.OpenAlgorithm(strAlgName)
    Dim objHash As CryptographicHash = objAlgProv.CreateHash()
    Dim buffMsg1 As IBuffer = CryptographicBuffer.ConvertStringToBinary(Key, BinaryStringEncoding.Utf16BE)
    objHash.Append(buffMsg1)
    Dim buffHash1 As IBuffer = objHash.GetValueAndReset()
    Dim strHash1 As String = CryptographicBuffer.EncodeToBase64String(buffHash1)
    hash = strHash1
    Return hash
End Function 
```

# templates - Joomla 2.5 joomshopping 类别模板

> ID：11260533
> 
> 赞同：0
> 
> 时间：2012-06-29T10:56:25.333
> 
> 标签：templates, components, categories, joomla2.5, shop

我正在使用带有 joomshopping 组件的 joomla 2.5。所以我需要一个功能来更改不同类别的模板。我注意到，当我在详细信息选项卡中编辑类别时，joomshopping 可以选择更改类别模板。现在我该怎么做，如何更改模板，在哪里安装另一个模板？有没有人有这个问题的经验。谢谢

![在此处输入图像描述](../Images/8abb63474038701ef7c5d69d99f1ff7a.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-13T07:47:20.627

joomshopping 的路径模板 root/component/com_joomshoping/template/ 您可以在此处创建文件夹模板与默认文件夹相同

# java - 线程“Thread-0”中的异常 java.lang.NoClassDefFoundError: Server$WorkerThread

> ID：11260537
> 
> 赞同：1
> 
> 时间：2012-06-29T10:56:54.667
> 
> 标签：java, multithreading, exception, noclassdeffounderror, classnotfoundexception

当我更改 IP 并在我的系统中编译时，我的聊天程序在我的系统中运行良好。然后我将类文件复制到另一个文件中，它在该系统中也可以正常工作。但是，当客户端发送消息时，会出现以下错误：

`Exception in thread "Thread-0" java.lang.NoClassDefFoundError: Server$WorkerThread`

我使用的是 Windows 7。有什么问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-29T11:03:44.740

您错过了一个名为*Server$WorkerThread.class*的文件。如果在 *.java 文件中创建一个内部类，编译器将生成两个 *.class 文件（一个用于封闭类，一个用于内部类）。内部类名称的名称将以封闭类名称为前缀，并由*$*字符分隔。

**编辑**：我应该添加的东西（我猜）：Java*延迟*加载类。这意味着 jvm 在`Server$WorkerThread.class`真正需要之前不会加载。第一次需要它的代码是（我认为这并不奇怪），当服务器想要创建上述类的实例来管理与客户端的通信时。

您可能想看看Joshua Bloch 的*Java Concurrency in Practice*等，他在其中提倡反对将*Double Checked Locking Idiom*用于线程安全的 Singletons。这是一个更详细的示例/解释。

# javascript - 从解析的 xml 构造 xml 字符串

> ID：11260538
> 
> 赞同：2
> 
> 时间：2012-06-29T10:56:54.827
> 
> 标签：javascript, xml-parsing

我的 parsexml 代码：

```
var parseXml = function (xml) {
   var dom = null;
   if (window.DOMParser) {
      try { 
         dom = (new DOMParser()).parseFromString(xml, "text/xml"); 
      } 
      catch (e) { dom = null; }
   }
   else if (window.ActiveXObject) {
      try {
         dom = new ActiveXObject('Microsoft.XMLDOM');
         dom.async = false;
         if (!dom.loadXML(xml)) // parse error ..

            window.alert(dom.parseError.reason + dom.parseError.srcText);
      } 
      catch (e) { dom = null; }
   }
   else
      alert("cannot parse xml string!");
   return dom;
} 
```

现在假设

```
s="<a>random</a>";
b=parseXml(s); 
```

现在我想`s`从`b`. 我怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-29T11:03:04.737

[`XMLSerializer`](http://html5.org/specs/dom-parsing.html#the-xmlserializer-interface)在大多数浏览器中，您需要一个在`xml`旧版本 IE 中的 XML 节点属性：

```
function serializeXmlNode(xmlNode) {
    if (typeof window.XMLSerializer != "undefined") {
        return new window.XMLSerializer().serializeToString(xmlNode);
    } else if (typeof xmlNode.xml != "undefined") {
        return xmlNode.xml;
    }
    return "";
}

var xmlStr = serializeXmlNode(b); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T11:01:05.747

您需要一个`XMLSerializer`( [MDN docu](https://developer.mozilla.org/en/XMLSerializer) ) 对象来将您的 XML 树转换回字符串：

```
var ser = new XMLSerializer(); 
s = ser.serializeToString( b ); 
```

# asp.net-mvc-3 - 从javascript调用保存对话框

> ID：11260550
> 
> 赞同：0
> 
> 时间：2012-06-29T10:58:05.267
> 
> 标签：asp.net-mvc-3

我有一个 javascript 函数，我需要从中调用控制器操作以将文件流返回到 UI。我没有打开、保存和另存为对话框。在 cshtml 文件中，我有以下功能：DownloadFile

```
var selectUrl = '@Url.Action("Download", "Controller")' + "/" + filedetails; 
$.post(selectUrl); 
```

在控制器中我有以下代码：

```
public ActionResult Download(string id)
return File(downloadStream, "application/octet-stream",fileName); 
```

请让我知道这是正确的呼叫方式。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T11:08:08.387

试试这种方式：ActionResult

```
 public ActionResult Download(string id) 
    {
          var cd = new System.Net.Mime.ContentDisposition
                    {

                        FileName = "imagefilename",
                        Inline = false,
                    };
        Response.AppendHeader("Content-Disposition", cd.ToString());
        string contentType = "application/octet-stream";
          // you are downloadStream
        return File(downloadStream, contentType);
    } 
```

[链接在这里](https://stackoverflow.com/questions/5826649/returning-a-file-to-view-download-in-mvc)

# bash - 为目录结构递归设置 svn:ignore

> ID：11260551
> 
> 赞同：4
> 
> 时间：2012-06-29T10:58:05.747
> 
> 标签：bash, svn, sed, awk, svnignore

我已经将大量的 Maven 项目层次结构导入 IntelliJ IDEA，现在 IDEA 已经在所有不同级别上创建了 .iml 项目。我想 svn:ignore 这些文件。

有几个类似的问题，例如这个：[svn (subversion) ignore specific file types in all sub-directories, configured on root?](https://stackoverflow.com/q/6878673/342852)

但是：答案总是`svn:ignore`与`--recursive`标志一起应用。那不是我要找的，我只想忽略我创建的文件，而不是在下面的数百个目录上设置属性。

基本上，我所拥有的是

```
svn status | grep .iml 
```

看起来像这样：

```
?       foo/bar/bar.iml
?       foo/baz/phleem.iml
?       flapp/flapp.iml 
```

等等

我想做的是为每个条目`dir/project.iml`添加`svn:ignore *.iml`到`dir`. 我猜我必须将上面的 grep 传送到`sed`或`awk`从那里传送到`svn`，但是我完全不知道一方面确切的 sed 或 awk 命令以及确切的 svn 命令（我不会用它覆盖现有的 svn :ignore values) 另一方面。

更新：我也不是在`find`寻找基于仅适用于我的 IDE 创建的 .iml 文件的属性。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-29T11:11:36.660

您可以将客户端设置为全局忽略给定的文件扩展名。只需添加

```
global-ignores = *.iml 
```

进入您的 Subversion 配置文件。

**更新：**如果您只想忽略所涉及目录中的 iml 文件，您可以尝试

```
svn status | grep '^\?.*\.iml' | sed 's=^? *=./=;s=/[^/]*$==' | xargs svn propset svn:ignore '*.iml' 
```

# ruby-on-rails - 为未经身份验证的用户设计重定向到 sign_in_path 而不使用 :database_authenticatable

> ID：11260555
> 
> 赞同：0
> 
> 时间：2012-06-29T10:58:29.007
> 
> 标签：ruby-on-rails, ruby-on-rails-3, authentication, devise

我在 Rails 应用程序中使用 cancan、devise 和omniauth。我对omniauth 很满意，current_user 方法很有帮助。能力课也很有帮助。当用户注册时，我只从omniauth 收到他的电子邮件，并使用一些参数为他手动创建一个用户。所以我没有使用创建用户的设计方式。

因此，我不需要 :database_authenticable。拥有它可以防止我在没有密码的情况下保存用户。但是，如果没有它，当用户遇到未经授权的资源时，他们会转到“/”而不是“/users/sign_in”。

我不想使用 :database_authenticable，如果未经授权，请让用户转到“/users/sign_in”。我该怎么做？

注意：几乎我所有的控制器都有细粒度的 authenticate_user！过滤前，例如：

```
class UsersController < ApplicationController

    before_filter :authenticate_user!, :except => [:index, :index_small, :show,
     :new , :sign_in ] 
```

所以我不确定我是否可以`before_filter :authenticate_user!`在 application_controller 中做任何事情。如果我可以在所有控制器上摆脱这个过滤器，那也很好。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T11:24:38.003

知道了！

在任何帮助程序中，覆盖 sign_in_path

```
 module UsersHelper
  def sign_in_path
    '/users/sign_in'
  end
 end 
```

此外，最重要的`before_filter :authenticate_user!`是，如果使用了 cancan，则应该从控制器中完全删除。

# tridion - 安装 PowerTools 时出错

> ID：11260557
> 
> 赞同：0
> 
> 时间：2012-06-29T10:58:43.477
> 
> 标签：tridion, tridion-2011

我最近在 Tridion 2011 SP1 上安装了最新的 PowerTools。安装我的 CM 后出现以下错误。

> 未捕获的 ReferenceError：未定义 Tridion

附上下面错误的截图 ![在此处输入图像描述](../Images/607f2cc541a855db22a89c114f9461f9.png)

如果现在我删除 PowerTools，我会收到以下错误。

> System.IO.FileNotFoundException：无法加载文件或程序集“Interop.TDSI18NLib，版本=5.4.0.0，Culture=neutral，PublicKeyToken=ddfc895746e5ee6b”或其依赖项之一。该系统找不到指定的文件。文件名：'Interop.TDSI18NLib, Version=5.4.0.0, Culture=neutral, PublicKeyToken=ddfc895746e5ee6b' at Tridion.Web.UI.Models.TCM54.LocalizationModule.InitializeCulture(Object sender, EventArgs args) at System.Web.HttpApplication。 SyncEventExecutionStep.System.Web.HttpApplication.IExecutionStep.Execute() at System.Web.HttpApplication.ExecuteStep(IExecutionStep step, Boolean& completedSynchronously) 程序集管理器加载自：C:\Windows\Microsoft.NET\Framework\v4.0.30319\clr。 dll 在可执行文件 C:\Windows\SysWOW64\inetsrv\w3wp.exe 下运行 --- 详细的错误日志如下。=== 预绑定状态信息 === LOG: User = NT AUTHORITY\NETWORK SERVICE LOG: DisplayName = Interop.TDSI18NLib, Version=5.4.0.0, Culture=neutral, PublicKeyToken=ddfc895746e5ee6b (Full-specified) LOG: Appbase = file:///C:/Program Files (x86)/Tridion/web/WebUI/WebRoot/ LOG: Initial PrivatePath = C:\Program Files (x86)\Tridion\web\WebUI\WebRoot\bin 调用程序集：Tridion。 Web.UI.Models.TCM54，版本=6.1.0.55920，文化=中性，PublicKeyToken=ddfc895746e5ee6b。=== LOG：此绑定在默认加载上下文中开始。LOG：使用应用程序配置文件：C:\Program Files (x86)\Tridion\web\WebUI\WebRoot\web.config LOG：使用主机配置文件：C:\Windows\Microsoft.NET\Framework\v4.0.30319\aspnet .config LOG：使用 C:\Windows\Microsoft.NET\Framework\v4.0.30319\config\machine.config 中的机器配置文件。日志：后策略参考：Interop.TDSI18NLib，Version=5.4.0.0，Culture=neutral，PublicKeyToken=ddfc895746e5ee6b 日志：尝试下载新 URL 文件:///C:/Windows/Microsoft.NET/Framework/v4.0.30319/Temporary ASP.NET 文件/webui/f9209e65/566ab287/Interop.TDSI18NLib.DLL。日志：尝试下载新的 URL 文件：///C:/Windows/Microsoft.NET/Framework/v4.0.30319/Temporary ASP.NET Files/webui/f9209e65/566ab287/Interop.TDSI18NLib/Interop.TDSI18NLib.DLL。日志：正在尝试下载新的 URL 文件：///C:/Program Files (x86)/Tridion/web/WebUI/WebRoot/bin/Interop.TDSI18NLib.DLL。日志：尝试下载新的 URL 文件：///C:/Program Files (x86)/Tridion/web/WebUI/WebRoot/bin/Interop.TDSI18NLib/Interop.TDSI18NLib.DLL。日志：正在尝试下载新的 URL 文件：///C:/Windows/Microsoft.NET/Framework/v4.0.30319/Temporary ASP.NET Files/webui/f9209e65/566ab287/Interop。TDSI18NLib.EXE。日志：正在尝试下载新的 URL 文件：///C:/Windows/Microsoft.NET/Framework/v4.0.30319/Temporary ASP.NET Files/webui/f9209e65/566ab287/Interop.TDSI18NLib/Interop.TDSI18NLib.EXE。日志：正在尝试下载新的 URL 文件：///C:/Program Files (x86)/Tridion/web/WebUI/WebRoot/bin/Interop.TDSI18NLib.EXE。日志：正在尝试下载新的 URL 文件：///C:/Program Files (x86)/Tridion/web/WebUI/WebRoot/bin/Interop.TDSI18NLib/Interop.TDSI18NLib.EXE。

更新 - 错误截图

![在此处输入图像描述](../Images/9152458ce5332d1cddf241c23993c59d.png)

Frank 建议的来自 HTML 的错误。

```
System.Web.HttpUnhandledException (0x80004005): Exception of type 'System.Web.HttpUnhandledException' was thrown. ---> System.IO.FileNotFoundException: Could not load file or assembly 'Tridion.ContentManager.CoreService.Client, Version=6.1.0.996, Culture=neutral, PublicKeyToken=ddfc895746e5ee6b' or one of its dependencies. The system cannot find the file specified.
File name: 'Tridion.ContentManager.CoreService.Client, Version=6.1.0.996, Culture=neutral, PublicKeyToken=ddfc895746e5ee6b'
   at System.Signature.GetSignature(SignatureStruct& signature, Void* pCorSig, Int32 cCorSig, RuntimeFieldHandleInternal fieldHandle, IRuntimeMethodInfo methodHandle, RuntimeType declaringType)
   at System.Signature..ctor(IRuntimeMethodInfo methodHandle, RuntimeType declaringType)
   at System.Reflection.RuntimeMethodInfo.FetchNonReturnParameters()
   at System.Reflection.RuntimeMethodInfo.GetParameters()
   at System.ServiceModel.Description.ServiceReflector.ValidateParameterMetadata(MethodInfo methodInfo)
   at System.ServiceModel.Description.TypeLoader.CreateOperationDescriptions(ContractDescription contractDescription, ContractReflectionInfo reflectionInfo, Type contractToGetMethodsFrom, ContractDescription declaringContract, MessageDirection direction)
   at System.ServiceModel.Description.TypeLoader.CreateContractDescription(ServiceContractAttribute contractAttr, Type contractType, Type serviceType, ContractReflectionInfo& reflectionInfo, Object serviceImplementation)
   at System.ServiceModel.Description.TypeLoader.LoadContractDescriptionHelper(Type contractType, Type serviceType, Object serviceImplementation)
   at System.ServiceModel.Description.ContractDescription.GetContract(Type contractType)
   at System.Web.Script.Services.WCFServiceClientProxyGenerator.GetClientProxyScript(Type contractType, String path, Boolean debugMode, ServiceEndpoint serviceEndpoint)
   at System.Web.Script.Services.ProxyGenerator.GetClientProxyScript(Type type, String path, Boolean debug, ServiceEndpoint serviceEndpoint)
   at Tridion.Web.UI.Core.CachedJsService.get_Contents()
   at Tridion.Web.UI.Core.CachedJsService.WriteContents(HttpResponse response, List`1 writtenResources)
   at Tridion.Web.UI.Core.CachedJsGroup.WriteContents(HttpResponse response, List`1 writtenResources)
   at Tridion.Web.UI.Core.CachedJsPageResources.WriteContents(HttpResponse response, List`1 writtenResources)
   at Tridion.Web.UI.Core.CachedJsControlResources.WriteContents(HttpResponse response)
   at Tridion.Web.UI.Core.Common.HttpUtilities.OutputWithHTTPCacheHeaders(ICachedResource resource, Nullable`1 cacheDuration)
   at Tridion.Web.UI.Controls.TridionPage.Render(HtmlTextWriter writer)
   at System.Web.UI.Control.RenderControlInternal(HtmlTextWriter writer, ControlAdapter adapter)
   at System.Web.UI.Control.RenderControl(HtmlTextWriter writer, ControlAdapter adapter)
   at System.Web.UI.Control.RenderControl(HtmlTextWriter writer)
   at System.Web.UI.Page.ProcessRequestMain(Boolean includeStagesBeforeAsyncPoint, Boolean includeStagesAfterAsyncPoint)

Assembly manager loaded from:  C:\Windows\Microsoft.NET\Framework\v4.0.30319\clr.dll
Running under executable  C:\Windows\SysWOW64\inetsrv\w3wp.exe
--- A detailed error log follows. 

=== Pre-bind state information ===
LOG: User = NT AUTHORITY\NETWORK SERVICE
LOG: DisplayName = Tridion.ContentManager.CoreService.Client, Version=6.1.0.996, Culture=neutral, PublicKeyToken=ddfc895746e5ee6b
 (Fully-specified)
LOG: Appbase = file:///C:/Program Files (x86)/Tridion/web/WebUI/WebRoot/
LOG: Initial PrivatePath = C:\Program Files (x86)\Tridion\web\WebUI\WebRoot\bin
Calling assembly : Tridion.UGC.Model, Version=6.1.0.205, Culture=neutral, PublicKeyToken=null.
===
LOG: This bind starts in default load context.
LOG: Using application configuration file: C:\Program Files (x86)\Tridion\web\WebUI\WebRoot\web.config
LOG: Using host configuration file: C:\Windows\Microsoft.NET\Framework\v4.0.30319\aspnet.config
LOG: Using machine configuration file from C:\Windows\Microsoft.NET\Framework\v4.0.30319\config\machine.config.
LOG: Post-policy reference: Tridion.ContentManager.CoreService.Client, Version=6.1.0.996, Culture=neutral, PublicKeyToken=ddfc895746e5ee6b
LOG: The same bind was seen before, and was failed with hr = 0x80070002.

   at System.Web.UI.Page.HandleError(Exception e)
   at System.Web.UI.Page.ProcessRequestMain(Boolean includeStagesBeforeAsyncPoint, Boolean includeStagesAfterAsyncPoint)
   at System.Web.UI.Page.ProcessRequest(Boolean includeStagesBeforeAsyncPoint, Boolean includeStagesAfterAsyncPoint)
   at System.Web.UI.Page.ProcessRequest()
   at System.Web.UI.Page.ProcessRequestWithNoAssert(HttpContext context)
   at System.Web.UI.Page.ProcessRequest(HttpContext context)
   at ASP.DashboardView.ProcessRequest(HttpContext context)
   at System.Web.HttpApplication.CallHandlerExecutionStep.System.Web.HttpApplication.IExecutionStep.Execute()
   at System.Web.HttpApplication.ExecuteStep(IExecutionStep step, Boolean& completedSynchronously) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-29T11:14:48.620

电动工具是一个开源项目，问题跟踪器位于：

[http://code.google.com/p/tridion-2011-power-tools/issues](http://code.google.com/p/tridion-2011-power-tools/issues)

如果您认为自己发现了一个错误（或者可能是两个），您可以通过报告那里的问题来帮助项目团队。（对于奖励积分 - 下载源代码并进行修复！）

# php - 根据页面上的项目，动态页面的一部分不可见

> ID：11260561
> 
> 赞同：0
> 
> 时间：2012-06-29T10:58:56.397
> 
> 标签：php, html

抱歉这个奇怪的标题，老实说，我试图让它更准确，但我做不到，因为这是一个奇怪的问题。我正在创建的网站上有一个页面，这个页面就像一本书的个人资料页面。现在，奇怪的事情：

对于某些书籍，页面加载正确，除了第一个大页面之外什么都没有`<div>`- 但是当我查看源代码时，两个页面完全相同（除了不同的标题、书籍描述等）。你可以通过下面的链接看到一个可见和不可见的页面，你就会明白我的意思了。我对此完全感到困惑，因为页面源显示所有相同的内容，并且在一个页面上它很好，但在另一个页面上它就像一切都有`display:hidden;`。

工作页面：

[http://jovansfreelance.com/booklist/list/item/Game-Of-Thrones-Book-1](http://jovansfreelance.com/booklist/list/item/Game-Of-Thrones-Book-1)

破碎的页面：

[http://jovansfreelance.com/booklist/list/item/A](http://jovansfreelance.com/booklist/list/item/A)

关于这里发生了什么的任何想法？

书名只是“A”的解释：书名由用户输入，实际书名来自亚马逊。因此，如果用户输入“A”，第一个结果是“A Christmas Carol”，这样就会显示出来。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T11:24:45.513

区别在于`'div.item_super_wiki'`块内：在您引用的第一页中，它是正确的标记，但在第二页中，它是......

```
<DIV>This engrossing tale relates... 
```

而且那个大DIV没有正确关闭。因此 HTML 解析器尝试自己重建正确的标记 - 并且失败了一点。随着标记被破坏，所有这些页脚元素（`'div#page'`等）成为块的一部分，`'div.item_super_info`块`overflow:hidden`作为其样式的一部分。因此失踪。)

# objective-c - iTunes 电影预告片

> ID：11260562
> 
> 赞同：0
> 
> 时间：2012-06-29T10:59:05.700
> 
> 标签：objective-c, ios, uitableview, gridview, epg

我正在尝试为仅横向 iPad 应用程序重现网格视图。

我尝试了一些已知的 Gridview，例如 AQGridview 或 GMGridView，但它不适合，因为它不是“传统”gridview（它用于 epg，因此元素的大小不同 - 取决于它们的持续时间）。

我想要实现的应该更像[iTunes Movie Trailers 应用程序](http://itunes.apple.com/us/app/itunes-movie-trailers/id471966214)。

我想知道您是否知道任何可以帮助我实现这一目标的库（如果可能，免费和开源）。

我看到的最后一个是[NGVaryingGridView](http://www.cocoacontrols.com/platforms/ios/controls/ngvaryinggridview)，它听起来很有希望，但似乎没有经过优化（尝试旋转它只是为了好玩）。

提前感谢您的任何建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T11:00:36.080

从 iOS 6 开始，Apple 添加了`UICollectionView`. 使用 a`UIFlowLayout`你可以做你想做的事。这很整洁。唯一的缺点是它在 iOS 5 中不可用。

# c# - 是否可以在 XNA 游戏中禁用窗口移动以更改其大小？

> ID：11260564
> 
> 赞同：0
> 
> 时间：2012-06-29T10:59:13.017
> 
> 标签：c#, .net, xna

我正在以这种方式更改窗口大小：

```
m_GraphicsDeviceManager.PreferredBackBufferWidth = (int)i_NewSize.X;
m_GraphicsDeviceManager.PreferredBackBufferHeight = (int)i_NewSize.Y;
m_GraphicsDeviceManager.ApplyChanges(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-01T04:40:20.417

您可以添加对 System.Windows.Forms 的引用，从窗口句柄获取 Form 对象，保存位置，更改设置，然后重新定位窗口。

像这样的东西：

```
var form = Form.FromHandle(Window.Handle);
var location = form.Location;
m_GraphicsDeviceManager.PreferredBackBufferWidth = (int)i_NewSize.X;
m_GraphicsDeviceManager.PreferredBackBufferHeight = (int)i_NewSize.Y;
m_GraphicsDeviceManager.ApplyChanges();
form.Location = location; 
```

我没有测试过这个，所以不能保证:)

# asp.net - UpdatePanel 中的复选框列表在选中项目时触发完整的回发

> ID：11260567
> 
> 赞同：4
> 
> 时间：2012-06-29T10:59:28.193
> 
> 标签：asp.net, updatepanel, postback, checkboxlist, partial-postback

所以我有这个复选框列表，我想为其中的元素实现全选功能。我将它放置在 UpdatePanel 中，但每次单击某个项目时，都会重新加载整个页面。这是我的代码：

```
 <asp:UpdatePanel ID="CBLPanel" runat="server" UpdateMode="Conditional"     ChildrenAsTriggers="false">
            <ContentTemplate>
                <div class="LeftAligned">
                    <asp:Label ID="FilterLabel" runat="server" Text="Filter by:" />
                    <asp:DropDownList runat="server" ID="FilterDDL" AutoPostBack="true" OnSelectedIndexChanged="FilterDDL_SelectedIndexChanged" />
                    <asp:ImageButton ID="FB" runat="server" ImageUrl="~/images/filter.png" AlternateText="VALUE"
                        CssClass="filter_button" OnClick="FB_Click" />
                    <div onmouseout="javascript:bMouseOver=false;" onmouseover="javascript:bMouseOver=true;"
                        class="filter_div">
                        <asp:CheckBoxList AutoPostBack="true" ID="FilterCheckBoxList" ClientIDMode="Static"
                            runat="server" CssClass="filter_checklist collapsed" OnSelectedIndexChanged="FilterCheckBoxList_Selected">
                        </asp:CheckBoxList>
                    </div>
                </div>
            </ContentTemplate>
                    </asp:UpdatePanel> 
```

我虽然应该将 ChildrenAsTriggers 设置为 false，这样我只能从代码中更新，但它似乎不起作用。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-29T11:03:40.387

这看起来像一个熟悉的 .NET 错误。在 CheckBoxList 上设置 ClientIDMode=Auto 应该可以解决它

# php - html强制环境中的PHP vs SSI

> ID：11260569
> 
> 赞同：1
> 
> 时间：2012-06-29T10:59:33.040
> 
> 标签：php, ssi

对不起这个奇怪的标题。我有一个用纯 HTML 编写的相当大的网站。现在我必须制作网站的一些标准区域，单次可编辑。所以我正在考虑一种通过外部文件包含这些元素的聪明方法。我无法更改页面的 .html 扩展名，并且强制服务器对每个页面进行 php-parse 似乎是一种资源浪费。

我必须选择：1）包括通过 SSI（我已经读过它的性能很差） 2）mod_rewriting 到假的 .html 扩展名并包括通过 php 包括

你会怎么做？最快和最便宜的方法是什么？其中之一是对 SEO 最友好的吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T11:01:45.170

我认为问题是您知道哪些技术。

但是使用 PHP，您有更多的可能性。

# java - Java将负/正字符串数字转换为负/正双精度

> ID：11260571
> 
> 赞同：1
> 
> 时间：2012-06-29T10:59:35.960
> 
> 标签：java, string, double

有谁知道如何将字符串值类型`-4,5`或`5,4`转换为双精度`-4.5`或`5.4`？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-29T11:01:27.960

~~只需使用`Double.parseDouble(Locale, String)`;~~呜呜，我一头雾水……

你应该使用[java.text.NumberFormat](http://docs.oracle.com/javase/7/docs/api/java/text/NumberFormat.html)

```
NumberFormat format = NumberFormat.getInstance(Locale.FRANCE);
Number number = format.parse("-4,5");
double d = number.doubleValue(); 
```

例如，在比利时或法国，我们使用 a`,`作为小数分隔符。这就是它起作用的原因。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-29T11:03:11.273

首先将 , 替换为 。然后使用以下功能 -

```
 Double.valueOf("-4.5"); 
```

和

```
Double.valueOf("5.4"); 
```

# spring - 使用组件扫描时可以将属性设置为 bean 吗？

> ID：11260572
> 
> 赞同：3
> 
> 时间：2012-06-29T10:59:38.157
> 
> 标签：spring

自动检测到bean时是否可以将属性设置为？

我有一个需要读取文本文件的 bean，我想注入路径，但是这个 bean 是自动检测所有 bean 的 web 应用程序的一部分。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-29T11:01:51.913

是的，只需使用注释注入它们`@Value`，例如：

```
@Service("myService")
public class MyService

    @Value("${myProperty}")
    String whatever;
... 
```

然后在应用程序上下文中：

```
<context:property-placeholder
  location="classpath:application.properties"
  ignore-unresolvable="true"
/> 
```

在类路径中粘贴包含字符串变量的文件 application.properties（通常通过 src/main/resources）。

或者您可以确保您的文件位于类路径中，并将其作为类路径资源引用

```
final org.springframework.core.io.Resource myFile = new ClassPathResource("MyTextFile.text"); 
```

# shell - 在 Shell 脚本中使用 gnuplot 绘制图形

> ID：11260573
> 
> 赞同：2
> 
> 时间：2012-06-29T10:59:46.047
> 
> 标签：shell

`gnuplot`我必须在 shell 脚本的帮助下绘制图表。我已经编写了这段代码，但它不起作用。我想在 html 文件中绘制图形，以便可以在浏览器中看到该图形。

```
 echo "set term canvas mousing size 500, 500
 set output "file_name.html"
 plot 'my_file.txt' with lines" | gnuplot 
```

我已将此文件保存在桌面上的 .bash 中。现在我在终端上写了这个，但没有用

```
sh file_name.bash 
```

请有人帮我解决这个问题。从昨天开始，我就完全被这件事困住了。:-(

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T13:27:42.400

有多个错误，

*   您在其中使用双引号`echo`将不起作用。将其更改为单引号
*   `gnuplot`对多个命令使用分号而不是换行符

所以生成的脚本应该是这样的

```
echo "set term canvas mousing size 500, 500; set output 'file_name.html'; plot 'my_file.txt' with lines" | gnuplot 
```

或者

```
cat << __EOF | gnuplot
set term canvas mousing size 500, 500
set output "file_name.html"
plot 'my_file.txt' with lines
__EOF 
```

# c# - 如何在 ASp.net c# 中从 Facebook Insights API 获取 Pre Post Metrics？

> ID：11260576
> 
> 赞同：1
> 
> 时间：2012-06-29T10:59:53.623
> 
> 标签：c#, .net, facebook

我必须显示我的 Facebook 页面的状态，例如总点赞数、网络应用程序上的总评论数。那么，谁能帮我知道——

如何在 ASp.net c# 中从 Facebook Insights API 获取 Pre Post Metrics？

提前致谢

# objective-c - Cocoa 绑定直接访问值

> ID：11260582
> 
> 赞同：0
> 
> 时间：2012-06-29T11:00:31.303
> 
> 标签：objective-c, macos, cocoa, binding, cocoa-bindings

我使用 Cocoa 绑定（共享用户默认控制器）来绑定一些界面控件的值和启用。有没有可能获得这个值的价值？当然，我可以通过将控件定义为插座然后获取它们的属性来获取它们，但这非常困难，因为我有很多这样的控件，并且在任何需要访问我的值的地方我都需要我的 NIB 实例。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T11:28:05.763

NSUserDefaultsController 只是一种通过 IB 将用户首选项直接绑定到 NSUserDefaults 的可能性。您始终可以使用 NSUserDefaults 类访问分配的值。您只需要知道用于存储值的密钥。

例如 ：

```
NSUserDefaults* defaults = [NSUserDefaults standardUserDefaults]; 
return [defaults     boolForKey:bDiffTCRatesAllowedPrefKey]; 
```

希望这可以帮助，

弗洛

# php - 克服 PHP 中的针草堆混乱

> ID：11260589
> 
> 赞同：16
> 
> 时间：2012-06-29T11:01:04.297
> 
> 标签：php, language-design

在 PHP 中克服针状草垛混淆的最实用方法是什么？

这里 $needle 是第一个参数

```
bool in_array ( mixed $needle , array $haystack [, bool $strict = FALSE ] ) 
```

这里 $needle 是第二个参数

```
string strstr ( string $haystack , mixed $needle [, bool $before_needle = false ] ) 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-29T11:39:33.253

如果您将其视为固定操作的前缀表示，这可能是有道理的。

```
is "bat" in array ("cat", "rat", "bat", "fat")
is $needle in_array $haystack
in_array($needle, $haystack)

does "supercalifragistic" string contain string "percal"
does $haystack strstr $needle
strstr($haystack, $needle) 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2019-07-03T14:50:52.987

我为所有包含 needle haystack 参数的 php 命令制作了备忘单。

字符串函数是 haystack/needle：

```
 strpos $haystack, $needle
         stripos $haystack, $needle
          strstr $haystack, $needle
          strchr $haystack, $needle
         stristr $haystack, $needle
         strrchr $haystack, $needle
        strripos $haystack, $needle
         strrpos $haystack, $needle
    substr_count $haystack, $needle

strpos ( string $haystack , mixed $needle [, int $offset = 0 ] ) : int
stripos ( string $haystack , mixed $needle [, int $offset = 0 ] ) : int
strstr ( string $haystack , mixed $needle [, bool $before_needle = FALSE ] ) : string
(same as strstr) strchr ( string $haystack , mixed $needle [, bool $before_needle = FALSE ] ) : string
stristr ( string $haystack , mixed $needle [, bool $before_needle = FALSE ] ) : string
strrchr ( string $haystack , mixed $needle ) : string
strripos ( string $haystack , mixed $needle [, int $offset = 0 ] ) : int
strrpos ( string $haystack , mixed $needle [, int $offset = 0 ] ) : int
substr_count ( string $haystack , string $needle [, int $offset = 0 [, int $length ]] ) : int 
```

数组函数是 needle/haystack（array_filter 除外）：

```
 array_search $needle, $haystack
        in_array $needle, $haystack

in_array ( mixed $needle , array $haystack [, bool $strict = FALSE ] ) : bool
array_search ( mixed $needle  , array $haystack  [, bool $strict  ] ) 
```

array_filter ( 数组 $array [, 可调用 $callback [, int $flag = 0 ]] ) : 数组

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-06-29T11:21:01.197

我不认为这很重要。Linux bash 也是如此。例如 tar 使用参数存档文件，但 ln 使用参数目标链接名。但我的例子不是编程语言，所以这里有另一种解释：世界上第一个计数或编号是什么？对于您所需要的，它始终是 2 个参数。我的 tar 和 ln 示例也是如此。

# symfony1 - Doctrine/Symfony2 从关系表中获取数据

> ID：11260593
> 
> 赞同：0
> 
> 时间：2012-06-29T11:01:13.180
> 
> 标签：symfony1, doctrine, doctrine-orm, relationship

我有一个与 Steps (OneToMany) 和 Steps 与 Article ManyToOne 有关的表格文章。

我得到文章：

```
$articles = $this->getDoctrine()
            ->getRepository("IftodiDesignBundle:Article")
            ->findAll(); 
```

对于 foreach 我想显示所有文章和步骤：

```
foreach($articles as $article)
    {
        $steps = $this->getDoctrine()
                ->getRepository("IftodiDesignBundle:Steps")
                ->createQueryBuilder('s')
                ->where('s.article = \''.$article.'\'')
                ->getQuery()
                ->execute();

        echo "<b>".$article->getTitle()."</b><br />";
        echo $article->getText()."<br />";
    } 
```

我不知道如何从表 Steps 中获取数据，使用表 Article 和使用 Doctrine 生成的方法 getSteps()。

请帮我。

* * *

感谢你的回答。

在表文章中，我有：

```
 /**
 * @ORM\OneToMany(targetEntity="Steps", mappedBy="Steps",cascade={"persist"})
 * @ORM\JoinColumn(name="id", referencedColumnName="id_article")
 */
protected $steps; 
```

在表中步骤：

```
/**
 * @ORM\ManyToOne(targetEntity="Article", inversedBy="steps")
 * 
 */
protected $article; 
```

当我做：

```
 $articles = $this->getDoctrine()
            ->getRepository("IftodiDesignBundle:Article")
            ->findAll(); 
```

如果我做：

```
foreach($articles as $article)
    {
        $steps = $article->getSteps(); 
```

我收到错误：

```
 Notice: Undefined index: Steps in /var/www/design/vendor/doctrine/lib/Doctrine/ORM/Persisters/BasicEntityPersister.php line 1280 
```

* * *

如果我这样做：

```
 $articles = $this->getDoctrine()
            ->getRepository("IftodiDesignBundle:Article")
            ->findAll();
    foreach($articles as $article)
    {
        //Queries to DB
         $steps = $this->getDoctrine()
            ->getRepository("IftodiDesignBundle:Steps")
            ->findBy(array(
                "article"    => $article->getId()
            ));
         $media = $this->getDoctrine()
                 ->getRepository("IftodiDesignBundle:Media")
                 ->findBy(array(
                     "step" => $steps[0]->getId()
                 )); 
```

我可以获得我需要的数据，但这里对 DB 的询问更多。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T20:39:26.390

从您的注释中删除`@ORM\JoinColumn(name="id", referencedColumnName="id_article")`- 学说会将您的关联映射到具有合理默认值的 MySQL。

删除后，重新生成 SQL：`doctrine:schema:update --force`

此外，如果您正在循环访问您的文章以获取您的步骤，您最好在存储库中编写自定义方法，否则每次调用`->getSteps()`Doctrine 时都会进行 SQL 调用（想象循环超过 100 篇文章 - 您最终会调用 101 次数据库！）

为避免这种情况，您可以在存储库中放置这样的方法

```
public function all()
{
    $queryBuilder = $this->getEntityManager()->createQueryBuilder();

    $queryBuilder
        ->select('Article', 'Steps')
        ->from('IftodiDesignBundle:Article')
        ->leftJoin('Article.steps', 'Steps')
    ;

    // consider using ->getArrayResult() to use less memory
    return $queryBuilder->getQuery()->getResult(); 
} 
```

我在一篇[博文中汇总了一些最佳实践](http://www.uvd.co.uk/blog/some-doctrine-2-best-practices/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T14:29:43.350

好，

假设您在文章模型中有以下关系：

```
/** 
* @OneToMany(targetEntity="Step", mappedBy="article")
* @JoinColumn(name="id_article", referencedColumnName="id_article_in_step")
*/
protected $steps;

public function getSteps(){ return $this->steps; } 
```

你将能够做到`$article->getSteps();`

# c# - 如何从 var 类型转换为对象

> ID：11260597
> 
> 赞同：1
> 
> 时间：2012-06-29T11:01:23.630
> 
> 标签：c#, linq

我只是 linq 从对象列表中找到最大对象，现在我想将它从 var 更改回对象。那是怎么做的。

```
List < MyObject> lt = matchings.ToList();
var wwe = lt.Max(ya => ya.Similarity);
var itemsMax = lt.Where(xa => xa.Similarity == wwe);
MyObject sm =(TemplateMatch) itemsMax;//it gives error here 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-29T11:04:40.253

`var`不是类型。这是一个关键字，意思是“为我填写类型”。

`Where`返回一个集合。您正在尝试将集合转换为单个项目。

而不是`Where`，使用`FirstOrDefault`.

```
var itemsMax = lt.FirstOrDefault(xa => xa.Similarity == wwe); 
```

现在你得到一个单一的项目，并且可以在需要时施放它。

请注意，如果您只想要具有该值的单个项目，则上述方法有效。

如果有可能有多个具有最大值的项目——并且你想要多个项目返回——`Where`与`OfType`or结合`Cast`。

```
var itemsMax = lt.Where(xa => xa.Similarity == wwe); 
var allItemsCasted = itemsMax.Cast<NewType>(); // this throws
var typeCompatibleItems = itemsMax.OfType<NewType>(); // this filters 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-29T11:04:25.963

问题似乎是`Where`返回对象的集合，但您只需要一个对象。尝试`itemsMax.Single()`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-29T11:20:54.923

而不是通过`matchings`两次枚举（一次计算“最大相似性”，第二次找到具有最大相似性的项目），您可以使用以下方法一次性完成此操作`IEnumerable<T>.Aggregate`：

```
var sm = matchings.Aggregate((maxItem, next) => 
            next.Similarity > maxItem.Similarity ? next : maxItem); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-29T11:05:06.327

你`lt.Where`返回一个可枚举的。所以，这就是为什么它不会投射到单个对象。最后添加一个`.Single()`方法，它应该强制转换。

# python - 在 django 内部和外部工作的包。这是一个好的设计吗？

> ID：11260600
> 
> 赞同：5
> 
> 时间：2012-06-29T11:01:34.907
> 
> 标签：python, django

我对 django 和一般的 python 世界都比较陌生。但是我有使用 ruby​​ 的经验（使用 rails 已经 2 年了），所以 python/django 的许多概念对我来说并不新鲜。

无论如何，我正在用 python 编写一个小包，它将有一个数据库连接，我想在 django 内部使用这个包，但也在 django 之外的功能中使用这个包。所以我决定利用**django.db**而不必担心编写任何数据库连接和管理的东西。

所以我开始编写我的第一个模型，并想在 django 环境之外进行第一次测试，我发现自己遇到了一些困难。

我考虑过为我的包设置与任何 django 应用程序相同的配置机制（我的意思是 settings.py 文件）。我编写了一个仅包含 DATABASES 字典的文件（称为 nodjango_settings.py 作为模板）并向其中添加了两个自定义变量：

```
MYAPP_DB_ID   = "myappdb"
MYAPP_DB_PREFIX = "myapp_"
DATABASES = {
  MYAPP_DB_ID: {
    'ENGINE': 'django.db.backends.postgresql_psycopg2',
    'NAME':   'myappdb',
  }
} 
```

我的包的目录结构是：

```
.
|-- README.txt
|-- doc
|   `-- db.txt
|-- setup.py
|-- src
|   |-- __init__.py
|   `-- myapp
|       |-- __init__.py
|       |-- exceptions.py
|       |-- models.py
|       |-- nodjango_settings.py
|       `-- nodjango_settings.pyc
`-- test
    `-- test.py 
```

我正在阅读一点 djangos 自己的代码，以了解如何处理 DJANGO_SETTINGS_MODULE 环境变量并读取配置文件，因此将以下代码添加到`myapp/__init__py`.

```
import os

# try to look after the DJANGO_SETTINGS_MODULE environment variable
# if not present raise an import error

# code abstract from python2.6/site-packages/django/conf/__init__.py
try:
    settings_module = os.environ["DJANGO_SETTINGS_MODULE"]
    if not settings_module: # If it's set but is an empty string.
        raise KeyError
except KeyError:
    raise ImportError("The DJANGO_SETTINGS_MODULE environment variable is not present.")

# TODO: look at python2.6/site-packages/django/conf/__init__.py +93
# if you print sys.path then the project directory gets added
# in django/core/management/__init__.py with sys.path.append
from django.utils import importlib

p = importlib.import_module(settings_module)

print p.MYAPP_DB_ID 
```

我想在`__init__.py`我运行的包的根目录上测试它是否按预期工作：

```
$ DJANGO_SETTINGS_MODULE="src.myapp.nodjango_settings" python src/myapp/__init__.py

Traceback (most recent call last):
  File "src/myapp/__init__.py", line 22, in <module>
    p = importlib.import_module(settings_module)
  File "/home/yanez/devpython/lib/python2.6/site-packages/django/utils/importlib.py",   line 35, in import_module
    __import__(name)
ImportError: No module named src.myapp.nodjango_settings 
```

我没想到。当您创建一个新的 django 应用程序时，会创建一个`manage.py`文件。而这个文件`DJANGO_SETTINGS_MODULE`从应用程序的根目录的角度将变量设置为settings.py文件。

我阅读了更多 django 的代码，并意识到在`django/core/management/__init__.py`应用程序的根目录中添加了`sys.path`. 这也可能是我的问题的解决方案，但我不太确定这是否是一个好主意`sys.path`。

我不太确定我的想法是好还是坏。我想知道您对此有何看法以及我可以在哪里/如何改进它。此外，如果我坚持我的想法，我怎样才能读取我的自定义变量`settings.py`而不必一遍又一遍地重新导入设置模块？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-29T11:28:29.107

使用 mod_wsgi 部署 django 项目时，必须编写一个 wsgi (python) 脚本，该脚本执行“sys.path”并设置 DJANGO_SETTINGS_MODULE 环境变量，然后创建 wsgi 应用程序对象等。

我为什么要提这个？因为，恕我直言，您不应该尝试在“myapp”中处理这部分问题，而是从一个独特的 python 脚本中处理，当在 django 项目上下文之外使用您的应用程序时，该脚本将成为应用程序入口点，并将“myapp”保留为纯库包。然后，此启动器脚本将负责设置正确的环境（sys.path、设置等）。记录一下，设置模块只是一个 Python 模块，它在运行时是一个普通的 Python 对象（类“模块”的实例），并且有很多方法（除了默认的导入机制）来创建模块实例并将其添加到 sys.modules （这是这里的重点）。

作为旁注，在包中进行设置没有意义恕我直言，它是一个配置文件。

Edit : well, I knew there was something about using part of django standalone, and here it is: [https://docs.djangoproject.com/en/dev/topics/settings/#using-settings-without-setting-django-settings-module](https://docs.djangoproject.com/en/dev/topics/settings/#using-settings-without-setting-django-settings-module)

# javascript - 类中的 Javascript 回调失去绑定

> ID：11260601
> 
> 赞同：0
> 
> 时间：2012-06-29T11:01:38.850
> 
> 标签：javascript, callback, mootools

我的类有一个问题，我设置了一个回调函数以在 ajax 请求后触发，这工作正常，除了回调然后有 this= window 而不是 this = 调用类。我试过摆弄绑定等无济于事。任何帮助表示赞赏。

```
<?php
if (isset($_POST['id'])){
    echo json_encode(array('key' => 'val'));
    die;
}
?>
<script type="text/javascript" src="/linkup/js/mootools-core-1.4.3-full-compat-yc.js" charset="utf-8"></script>
    <script type="text/javascript" src="/linkup/js/mootools-more-1.4.0.1.js" charset="utf-8"></script><script>
var myClass = new Class({
    blah: function(){
        console.log('this worked ok');
    },
    foo: function(){
        this.blah(); // at this point it is failing with "unknown function"
    },
    bar: function(){
        this.reqJSON({id:1,req:'grabpoints'},this.foo);
    },
    // data - an aray containing some data to post {id:1,req:'grabpoints'}
    // onS - a function to fire on return of data
    reqJSON: function(data,onS){
        if (this.jsonRequest) this.jsonRequest.cancel();
        this.jsonRequest = new Request.JSON({
                url: 'test.php',
                onRequest: function (object){
                    console.log('sending json');
                },
                onSuccess: function (object){
                    console.log('json success');
                    onS(object);
                }
            }
        ).post(data);
    },

});
var o = new myClass();
o.bar(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T11:17:24.763

`this`绝不是函数的继承作用域（即闭包）的一部分，而是确定函数何时被调用，在本例中由`onS(object)`. 以这种方式调用，函数就是 - 一个函数。您需要调用`this.onS(object)`，但这不适用于您的情况，因为该`onSuccess`函数也不知道`this`。

要使用最外层对象调用 foo/onS 函数，`this`您必须将对它的引用保存在另一个变量中，通常称为`that`：

```
reqJSON: function(data,onS){
    var that = this;
    ...

    onSuccess: function (object){
        console.log('json success');
        that.onS(object);
    } 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-29T11:06:33.627

改变这个

```
bar: function(){
    this.reqJSON({id:1,req:'grabpoints'},this.foo);
} 
```

至 ：

```
bar: function(){
  var self = this;
  this.reqJSON({id:1,req:'grabpoints'},self.foo);
} 
```

# iphone - 如何更改uipicker中的文本颜色？

> ID：11260602
> 
> 赞同：1
> 
> 时间：2012-06-29T11:01:39.510
> 
> 标签：iphone, ios, ipad, uipickerview, uipicker

如何使用各种颜色更改选取器内的文本颜色。例如： ![在此处输入图像描述](../Images/4109ba7c3f3aec340cb609f5a7c4d4ee.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-29T11:03:53.013

使用`pickerView:viewForRow`, 并返回具有所需颜色的 UILabel

```
- (UIView *)pickerView:(UIPickerView *)pickerView viewForRow:(NSInteger)row forComponent:(NSInteger)component reusingView:(UIView *)view
{
    UILabel *label = [[UILabel alloc] init];
    label.text = @"Row";
    label.textColor = [UIColor greenColor];
    return label;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T11:08:51.517

尝试这个：-

```
 - (UIView *)pickerView:(UIPickerView *)pickerView viewForRow:(NSInteger)row forComponent:(NSInteger)component reusingView:(UIView *)view {
        UILabel *demoLbl = (id)view;
        if (!demoLbl) {
            demoLbl= [[[UILabel alloc] initWithFrame:CGRectMake(0.0f, 0.0f, [pickerView rowSizeForComponent:component].width, [pickerView rowSizeForComponent:component].height)] autorelease];
        }

        demoLbl.text = @"Demo";
        demoLbl.textColor = [UIColor redColor];
        demoLbl.font = [UIFont systemFontOfSize:14];
        return demoLbl;
    } 
```

# java - 在 Java 中，如何替换除第一个字符之外的所有字符实例？

> ID：11260604
> 
> 赞同：0
> 
> 时间：2012-06-29T11:01:48.037
> 
> 标签：java, regex

在 Java 中，试图找到一个正则表达式，该表达式将匹配除第一个实例之外的特定字符 (:) 的所有实例，想要将除第一个实例之外的所有实例替换为空。

我可以做这个，

```
Pattern p = Pattern.compile(":");
Matcher m =  p.matcher(input);
String output = m.replaceAll(""); 
```

还有 m.replaceFirst() 但我想先替换所有内容。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-29T11:07:18.720

天真的方法：

```
String[] parts = str.split(":", 2);
str = parts[0] + ":" + parts[1].replaceAll(":", ""); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-29T11:39:24.873

对于正则表达式替换使用匹配模式`\G((?!^).*?|[^:]*:.*?):`并作为替换使用第一组`$1`

*[在此处](http://ideone.com/YXnIJ)查看并测试 Perl 中的正则表达式代码。*

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-29T11:39:58.637

```
public static void main(String[] args) {
    String name ="1_2_3_4_5";
    int index = name.indexOf("_");
    String name1 = name.substring(index+1); 
    name1 = name1.replace("_", "#");

    System.out.println(name.substring(0,index+1)+ name1);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-29T11:33:46.953

您可以使用 reg ex

```
String str1 = "A:B:C:D:E:F:G:H:I:J:K:L:M";
str1= str1.replaceAll("([:|_].*?):", "$1_");
str1= str1.replaceAll("([:|_].*?):", "$1_"); 
```

在这里，我无法修改正则表达式以首先替换自身的输出。实际上，首先 replaceAll 确实在备用位置用 '_' 替换 ':'。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-05-29T07:32:52.180

```
if (matcher.find()) {
    String start = originalString.substring(0, matcher.end());
    matcher.reset(originalString.substring(matcher.end(), originalString.length()));
    replacedString = start + matcher.replaceAll("");
} 
```

# php - 如何在 html onchange 选择的 javascript 中调用 sql 变量，预设响应函数

> ID：11260607
> 
> 赞同：1
> 
> 时间：2012-06-29T11:01:53.017
> 
> 标签：php, javascript, sql

我想要做的是：

--- 在下拉列表中有一个“on change”（包含表格数据“titles”）

--- this on change 运行 javascript 函数

--- javascript 在与下拉列表中选择的相应标题相同的表中使用“消息”数据列填充文本区域。

```
<li><label for="frm_precan">Canned Response</label>
            <span class="input">                        
                    <select id="frm_precan" name="precan" onchange="updateText();">
                            <option value="">--Please Select--</option>
                            <?php foreach($precan_list as $precan) : ?>
                            <option value="<?=$precan['id'];?>"><?=$precan['name'];?></option>
                            <?php endforeach; ?>            
                    </select>
            </span>
        </li>
        </ul>   
        <textarea style="width: 100%; margin: 0; padding: 0; border-width: 1; font-family: courier;" name="message" rows="10" id="text_area"></textarea>

        <script type="text/javascript">
        function updateText()
            {
            var value = $("#frm_precan option:selected").text();
            $('#text_area').val(value);;
            }
        </script> 
```

这是代码，它目前可以将选定的标题放在文本区域中。但是，我需要根据下拉列表的选定索引从数据库中获取数据并用它填充文本框。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T11:35:00.790

您不能用纯 JavaScript 填充文本框。JavaScript 在客户端工作，您需要在更改下拉菜单中的选择时访问数据库。为此，您需要在下拉选择更改中调用同一页面。从数据库中获取数据后，很容易使用“echo”命令创建一个包含数据的文本框。

```
<?
if (isset($_POST['my_selection'])) {
    $result=mysql_query("SELECT * FROM `table` WHERE `column`='".mysql_real_escape_string($_POST['my_selection'])."'");
    $row=mysql_fetch_array($result);
    echo "<input type='text' value='".$row['column']."'>";
    echo "<input type='text' value='".$row['column1']."'>";
}
?>
<select name='my_selection'>
Your existing select box here... 
```

# jquery - 下方/图像旁边的颜色框项目特定 div

> ID：11260610
> 
> 赞同：0
> 
> 时间：2012-06-29T11:02:11.597
> 
> 标签：jquery, customization, colorbox

我在 StackOverflow 上找到了这个问题， [在 colorbox 中的图像下方添加 div](https://stackoverflow.com/questions/6957886/adding-div-below-images-in-colorbox)

但它解释了如何在图像下方放置一个通用（所有图像一个）div，如果我想显示一些图像特定信息怎么办？

有没有办法从回调中知道它要显示的项目？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T15:52:57.490

> 有没有办法从回调中知道它要显示的项目？

这正是它引用`$.colorbox.element()`. 请注意，每次显示的文本对于每个链接都是唯一的。

# html - 本地化字符串时使用strong/em标签的正确方法是什么？

> ID：11260611
> 
> 赞同：6
> 
> 时间：2012-06-29T11:02:16.650
> 
> 标签：html, localization, internationalization, accessibility, semantics

我知道有些语言对单词的强调与英语不同，例如通过改变词尾而不是通过语音的变化来强调单词。

如果您正在本地化一个网站，您会相信标签（`<strong>`及其`<em>`位置）在其他语言中具有相同的含义吗？您会保持这种重点，与您的翻译人员核实还是将其排除在外？

我想知道这是如何将（请原谅双关语）翻译成网络的语义的？— Strong 和 em 标签带有在 SEO、屏幕阅读器等中使用的语义含义。所以应该将它们留在原处以免丢失，还是丢弃以更好地符合目标语言？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-29T11:54:21.493

标记的存在是为了传达一个整体的意义，只要传达了意义，你的标记就成功了。因此，在文本中传达强调强调的语言中，使用标签来表示强调是多余的和可选的。

内联级标记，比块级标记更重要的是，在不同的语言中可能需要完全不同。在一个好的翻译中，应该用每种语言从头开始标记文本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-29T12:00:58.117

对于单个单词，出于上述评论中概述的原因，我会将标记标签留在翻译字符串中。如果强调文本块、整个句子、数字等，如果可能的话，我会把它放在模板中，因为它并不是真正需要被翻译弄乱的东西。

一个好主意可能是在模板中标记您已使用注释完成此操作。如果您决定改变重点（这是不可避免的），您还需要一些可靠的过程来更改所有翻译文件。这很痛苦，所以我倾向于尽可能避免强调单个单词:)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-29T19:55:05.720

有趣的问题！我唯一可以补充的是，只有当搜索引擎将这些标签与您网站上的内容连接起来时，strong 和 em 标签才对 SEO 有用。

我建议仅在有实际原因（例如强调）而不是希望从加粗或斜体关键字中获得 SEO 好处时才使用这些标签。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-29T16:31:52.767

对于屏幕阅读器，这取决于您在说什么语言。以 JAWS 为例，您可以[下载语音文件](http://www.freedomscientific.com/downloads/RealSpeak-Solo-Direct-Voices/RealSpeak-Solo-Direct-Downloads.asp)。如果未列出，则他们必须选择另一种语言或寻找替代方法。关键是您正确设置 lang 属性。

# c# - 对接口编程而不是实现混乱

> ID：11260612
> 
> 赞同：1
> 
> 时间：2012-06-29T11:02:25.770
> 
> 标签：c#, oop, interface

我正在尝试养成对接口而不是实现进行编码的习惯，虽然在大多数情况下，我可以看到其中的一些原因我很挣扎。

举这个非常简单的例子：

```
public interface IAuditLog
{
    void AddLog(string log);
}

public class AuditLog : IAuditLog
{
    public void AddLog(string log)
    {
        //implementation
    }
} 
```

调用审计日志类：

```
public partial class AuditLogPage : System.Web.UI.Page
{
    protected void btnAddLog_Click(object sender, EventArgs e)
    {
        IAuditLog objAuditLog = new AuditLog();
        objAuditLog.AddLog("test log");
    }
} 
```

我在实例化的时候还是要使用 AuditLog 的，那有什么意义呢？如果 AddLog 方法签名发生变化，我仍然需要浏览所有使用它的页面并修改代码。我错过了重点吗？

提前感谢您的帮助，威尔基。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-29T11:06:42.573

在示例中，如果您`FileAuditLogger()`使用`DatabaseAuditLogger()`或者`EventLogAuditLogger()`您可以切换实现而无需重写代码。

通常，您会使用 IoC 容器（Autofac、StructureMap、Unity 等）来自动连接对象实例化。所以`new AuditLog()`你会打电话而不是打电话`IoC.Container.Resolve<IAuditLog>()`

如果您想了解更多信息，请告诉我。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-29T11:06:19.437

假设有两个 AuditLog 类

```
class AuditLogToDatabase : IAuditLog // writes to database 
```

另一个是

```
class AuditLogToFile : IAuditLog // writes to file 
```

喜欢

```
protected void btnAddLog_Click(object sender, EventArgs e)
{
    IAuditLog objAuditLog = AuditLogFactory.GetAuditLog();
    objAuditLog.AddLog("test log");
} 
```

现在您可以在运行时基于某些配置注入任何类，而无需更改实际实现

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-29T11:06:08.513

这并不一定意味着您必须实际使用 C# `interface`。OOP 术语中的接口是 API 的公开可见外观。这是一份合同，应指定外部可见的运营结果。它在表面下究竟是如何工作的应该是无关紧要的，这样您就可以随时更换实现。

当然，在这方面，an`interface`是一种能够使用不同实现的方法，但抽象基类甚至是其他人可以派生的非抽象类也是如此。

但更确切地说是您的问题：当然，在实例化一个类时，它的类型必须是已知的，但您不一定必须在那里创建类实例。您可以`IAuditLog`从外部设置一个或通过工厂类等获取它，在代码中的那个确切点，您不知道您获得的确切类型（除了它与 兼容`IAuditLog`）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-29T11:16:16.643

当您从方法创建实例时，这实际上很有用，`AuditLog`比如`Factory`方法，并且您有多个从接口`AuditLogXXX`派生的类。`IAuditLog`

因此，不要使用此代码：

```
IAuditLog objAuditLog = new AuditLog(); 
```

当您对接口进行编程时，您实际上会使用此代码：

```
IAuditLog objAuditLog = LogFactory.GetAuditLog(); //This call is programmed to an interface 
```

其中`GetAuditLog()`是在类上定义的接口类型方法`LogFactory`，如下所示：

```
class LogFactory
{    
    public IAuditLog GetAuditLog() // This method is programmed to an interface
    {
        //Some logic to make a choice to return appropriate AuditLogXXX instance from the factory
    }    
} 
```

# css - 更改 CSS 中 div 标签之间的空间

> ID：11260614
> 
> 赞同：-4
> 
> 时间：2012-06-29T11:02:29.493
> 
> 标签：css, html, web, space

我有一个网站，我想在其中更改某些元素之间的空间。我对 CSS 了解不多。我是它的新手。你可以在这里看到这个网站。这现在是一个临时域名：[timepasssite.hostoi.com](http://timepasssite.hostoi.com)。

1.  我想减少徽标和主菜单之间的空间1...主页..添加一个列表..我必须将它向上移动一小段距离。
2.  我还想在 Main Menu1 的行中向上移动搜索框。
3.  我想将精选列表向上移动到地球照片附近 4 px 的距离应该足够了。列表类别移动靠近特色列表 2 px 距离..

谁能指导我如何做到这一点？

这是 Common.css 和 Style.css 文件。

下载[Common.css](http://timepasssite.hostoi.com/download/common.css) [Style.css](http://timepasssite.hostoi.com/download/style.css)

图片 ：![i.stack.imgur.com/R91fy.jpg](../Images/7dd975edc13a3f1450205922812c937c.png)

我无法在此处粘贴文件...我不知道如何...请为我下载文件并为我提供解决方案！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T11:16:51.010

一般来说，你必须使用`margin`，`padding`或者在绝对定位`left, top`等情况下......

为了减少徽标和主菜单之间的空间，您必须减少（或删除）位于 上的`padding-bottom`in `div#logo`css 属性，`common.css`如下所示：

```
div#logo {
    padding: 15px 0 0 0;
    text-align: center;
} 
```

对于您的搜索栏，css 包含在父 div 内，内联样式。您必须覆盖`top`您的 css 文件中的属性，并给它 -50 作为例如值。

现在您有了大致的想法，我认为您可以管理其他问题。

我强烈建议您使用 Firebug（Firefox / Chrome 的扩展）。

随意要求精度。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T11:19:04.787

我看过你的css。在`padding: 7px 10px 10px;`菜单和标志之间留出空间，你也提到了高度。减少 padding 和 margin-top 属性。

更好地发布您的代码

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-29T11:15:04.927

在 common.css 中进行此更改以删除徽标的底部间距 -

```
div#logo {
    padding: 15px 0 0 0;
    text-align: center;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-29T11:15:51.900

1.  2、3

我认为你可以使用`margin-top`或`bottom`财产

或者`padding`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-29T11:17:58.183

在 common.css 中，找到这个：

```
div#logo
{
    /*width: 185px;
    height: 75px;
    float: left;*/
    text-align: center;
    padding:15px 0px;
} 
```

当为属性提供两个值时`padding`，它们指定顶部/底部和左侧/右侧值。因此，目前在徽标的顶部和底部都应用了 15px 的填充。（见[http://www.w3schools.com/cssref/pr_padding.asp](http://www.w3schools.com/cssref/pr_padding.asp)。）

`padding:15px 0px;`将行更改为`padding: 15px 0px 0px 0px;`- 这会将除顶部之外的所有填充设置为 0，保持在 15 像素。

您应该能够为您的其他查询找到类似的解决方案：在 HTML 中查找容器 id，然后找到该 id 的 CSS。例如，如果特色列表位于 中`<div id="featured">`，请在 CSS 中查找`div#featured`，并在那里编辑填充属性。

# sql - SELECT @billingMeterID = TOP 1 bmt.BillingMeterTypeID 不起作用

> ID：11260615
> 
> 赞同：0
> 
> 时间：2012-06-29T11:02:40.740
> 
> 标签：sql, sql-server, tsql

我想将 SELECT TOP 1...... 的结果分配给我的 SQL Server 存储过程中的局部变量。请在下面找到存储过程的部分：

```
SELECT 
(
    SELECT @billingMeterID =  TOP 1 bmt.BillingMeterTypeID
    FROM SDP_BillingMeterType bmt
    JOIN SDP_Series s ON s.SeriesID = bmt.SeriesID
    WHERE s.EngineID = SDP_PricePointBase.EngineID
) AS BillingMeterTypeID,                
dbo.fn_GetTotalStreetCost(EngineID, ProgramID, ConsumableTypeID, @billingMeterID) AS StreetCost,
[PricePointBaseID] AS PricePointBaseID, 
(SELECT TOP 1 CountryID FROM SDP_Country) AS CountryID,-- Only US is considered for now
dbo.fn_GetTotalStreetCost(EngineID, ProgramID, ConsumableTypeID, @billingMeterID) * 0.5 AS StatedCost
@dummyCost AS StreetCostUSD,
@dummyCost AS StreetCostEURO,
@dummyCost AS StatedCostUSD,
@dummyCost AS StatedCostEURO,
@exchangeRateSourceID AS ExchangeRateSourceID -- populating dummy value as the source is unknown at present
FROM SDP_PricePointBase 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T11:13:09.093

```
SELECT @billingMeterID =  TOP 1 bmt.BillingMeterTypeID
                FROM SDP_BillingMeterType bmt
                JOIN SDP_Series s ON s.SeriesID = bmt.SeriesID
                Join DP_PricePointBase on s.EngineID = SDP_PricePointBase.EngineID

SELECT       @billingMeterID AS BillingMeterTypeID,                
            dbo.fn_GetTotalStreetCost(EngineID, ProgramID, ConsumableTypeID,  
             @billingMeterID) AS StreetCost,
            [PricePointBaseID] AS PricePointBaseID, 
            (SELECT TOP 1 CountryID FROM SDP_Country) AS CountryID,
             -- Only US is considered for now
            dbo.fn_GetTotalStreetCost(EngineID, ProgramID, ConsumableTypeID, 
            @billingMeterID) * 0.5 AS StatedCost
            @dummyCost AS StreetCostUSD,
            @dummyCost AS StreetCostEURO,
            @dummyCost AS StatedCostUSD,
            @dummyCost AS StatedCostEURO,
            @exchangeRateSourceID AS ExchangeRateSourceID 
            -- populating dummy value as the source is unknown at present                                 
            FROM SDP_PricePointBase 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T13:22:44.677

```
SELECT @billingMeterID = **TOP 1** bmt.BillingMeterTypeID
```

不起作用，因为它应该是

```
SELECT **TOP 1** @billingMeterID = bmt.BillingMeterTypeID
```

它也不能在子选择中使用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-29T11:08:49.183

您需要在单独的语句中将变量设置为将使用它的选择。

# objective-c - iOS - 防止用户将可排序的 UITableViewCell 拖到顶行

> ID：11260617
> 
> 赞同：0
> 
> 时间：2012-06-29T11:02:50.823
> 
> 标签：objective-c, ios, uitableview

我有一个`UITableView`允许用户重新排序单元格的地方。除了顶行，所有单元格都可以重新排序，顶行必须始终保留为顶行。

我已经使用该`canMoveRowAtIndexPath`方法来防止顶行移动。但是，我看不到阻止用户拖动任何其他行并将它们放到顶行上方的方法，从而打破了我的顶行要求。

如何阻止用户将其他行拖到顶行上方？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T11:15:32.743

有一个 UITableViewDelegate 方法，如果它不符合您的要求，您可以修改目标索引路径。我认为这应该有效：

```
- (NSIndexPath *)tableView:(UITableView *)tableView targetIndexPathForMoveFromRowAtIndexPath:(NSIndexPath *)sourceIndexPath toProposedIndexPath:(NSIndexPath *)proposedDestinationIndexPath {
    if (proposedDestinationIndexPath.row == 0) {
        return sourceIndexPath;
    }
    else {
        return proposedDestinationPath;
    }
} 
```

# android - Eclipse Juno 不会创建 Android Activity

> ID：11260619
> 
> 赞同：11
> 
> 时间：2012-06-29T11:02:59.213
> 
> 标签：android, eclipse, android-activity

我下载`Eclipse Juno Java EE edition`并安装了`ADT plugin`. 我从向导中创建了一个新`Android Application`项目，`Eclipse`并在向导中创建了一个名为 TaskariActivity 的活动。在我按下完成后，它创建了项目但没有创建活动，并且向导没有关闭。我按下了取消。src 文件夹中没有活动或任何内容。我通过右键单击 src 创建了一个新活动，选择`new -> other -> Android -> activity`. 我选择了 BlankActivity（就像我之前创建项目时一样），在 Project 组合框中选择了之前创建的项目。我将`Activity`名称设置为TaskariActivity，布局名称设置为activity_main，标题设置为TaskariActivity。接下来我选择了导航类型并将其设置为`Tabs + Swipe`（我认为这会让我成为标签，而我所要做的只是插入元素和为它们执行的操作）。我按了下，什么也没发生。完成也没有做任何事情。我按下了取消，但没有创建活动。

那么，如何`Android application`在早期版本中创建一个赞`Eclipse`？它自动创建了活动，并准备好开箱即用。现在它不会生成任何文件，并且新的活动向导也不起作用。帮助？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-11T12:24:38.060

只需使用默认启动器图像（蓝色笑脸）而不是自定义它，它应该可以工作;）

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-03-09T05:30:10.573

好的，这对我有用：“帮助”->“安装新软件”并从此网址安装（这将更新它）：[https](https://dl-ssl.google.com/android/eclipse/) ://dl-ssl.google.com/android/eclipse/我猜是 Android 网站没有最新版本的 ADT？不知道你应该从哪里下载最新版本

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-29T11:05:39.753

对我有用的解决方法（如果您已安装支持库>8 并且仍然收到错误消息）

*   从 SDK 管理器中删除支持库
*   创建一个新项目并通过单击“安装/升级”安装支持库

[检查这个答案。](https://stackoverflow.com/a/11262706/582571)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-02T11:29:14.533

我通过将支持库（通过 Android SDK 管理器，它位于 Extras > Android 支持库下的列表末尾）从 rev.8 更新到 rev.9 解决了同样的问题！

更新后，Eclipse 现在可以按预期创建项目。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-06-10T07:29:55.290

我遇到了同样的问题，我可以创建将“最低要求 SDK”更改为 3.0 Honeycomb 的项目。

您选择的版本是什么？

# ios - 将 GKSession 限制为 Wifi 并忽略蓝牙

> ID：11260620
> 
> 赞同：3
> 
> 时间：2012-06-29T11:03:00.267
> 
> 标签：ios, bluetooth, wifi, game-center

我正在使用蓝牙、Wifi 和 Game Center 实现一个 IOS 游戏；蓝牙是使用 GKPeerPickerController 的两人游戏，Wifi 版本在本地网络上运行，是需要自动发现的 4 到 6 人游戏，因此我正在配置自己的 GKSession，Game Center 游戏使用 GKMatch 将游戏传播到网。

除了在我想在本地无线网络上玩多人游戏的情况下蓝牙和无线可用之外，所有这些都运行良好。打开蓝牙的事实会减慢并干扰自动发现过程。当蓝牙关闭时，它就像一个梦一样工作，但是以编程方式关闭蓝牙是错误的。

我的问题：无论如何告诉 GKSession 忽略蓝牙并将自己限制在本地 wifi 上。GKPeerPickerContoller 有一个 connectionTypesMask 允许您指定蓝牙或无线，但是如果有 4 到 6 个玩家，这会变得非常健谈，GKSession 似乎没有这个选项。

# uitableview - 以编程方式设置静态单元格的详细文本标签

> ID：11260622
> 
> 赞同：3
> 
> 时间：2012-06-29T11:03:07.693
> 
> 标签：uitableview, static, tableview, cell, detailtextlabel

我有一个包含几个部分的 tableView，我将它设置为静态单元格而不是动态原型。问题是我无法以编程方式设置静态单元格的详细文本标签，或者至少我不知道如何设置。可能吗 ？我看到这样做的唯一方法是拥有动态原型，这意味着我将不得不处理在我的数据源中设置所有 cell.textLabels 以及所有部分和我的 segues 将不再工作。如果有人有想法，那将是很大的帮助。谢谢 ：）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-02T14:31:16.420

假设您`UITableView`在 a 中`UITableViewController`，这里有 2 种有用的方法：

**Custom** `UITableViewCell`：在视图控制器类中，将标签的属性声明为：`@property (strong) IBOutlet UILabel *labelInCell;`

在情节提要中，将 a 拖到`UILabel`单元格中，选择控制器的*Connections Inspector*，然后通过从检查器拖动到`UILabel`对象来连接属性的出口。

然后，您可以以编程方式分配标签文本，例如，在`viewDidLoad:`控制器类中。

**标准数据源**：或者，您可以只实现一种方法： -`(UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath`在视图控制器的数据源中并在`detailTextLabel`那里设置属性。

# java - 如何根据属性找到两个数组列表之间的差异？

> ID：11260628
> 
> 赞同：5
> 
> 时间：2012-06-29T11:03:26.297
> 
> 标签：java, arraylist, find

我有两个数组列表。每个都有 Employee 类型的对象列表。

Employee 类如下所示

```
 public class Employee {

    Employee(String firstname, String lastname, String employeeId) {
        this.firstname = firstname;
        this.lastname = lastname;
        this.employeeId = employeeId;
    }

    private int id; // this is the primary key from employee table

    private String firstname;

    private String lastname;

    private String employeeId; // manually assigned unique id to each employee

    // getters and setters

} 
```

我需要根据员工对象的属性（即员工 ID）来查找两个列表之间的差异。

员工 ID 是手动生成的给每个员工的唯一 ID。

```
 import java.util.ArrayList;
import java.util.List;

public class FindDifferences {

    public static void main(String args[]){
        List<Employee> list1 = new ArrayList<Employee>(); 
        List<Employee> list2 = new ArrayList<Employee>(); 

        list1.add(new Employee("F1", "L1", "EMP01"));
        list1.add(new Employee("F2", "L2", "EMP02"));
        list1.add(new Employee("F3", "L3", "EMP03"));
        list1.add(new Employee("F4", "L4", "EMP04"));
        list1.add(new Employee("F5", "L5", "EMP05"));

        list2.add(new Employee("F1", "L1", "EMP01"));
        list2.add(new Employee("F2", "L2", "EMP02"));
        list2.add(new Employee("F6", "L6", "EMP06"));
        list2.add(new Employee("F7", "L7", "EMP07"));
        list2.add(new Employee("F8", "L8", "EMP08"));

        List<Employee> notPresentInList1 = new ArrayList<Employee>(); 
        // this list should contain EMP06, EMP07 and EMP08

        List<Employee> notPresentInList2= new ArrayList<Employee>(); 
        // this list should contain EMP03, EMP04 and EMP05

    }

} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-29T11:19:37.960

仅在检查相等性时才使用类的重写`equals()`和`hashcode()`方法（我不确定为什么需要该字段。您也可以合并它）。NetBeans / Eclipse IDE 可以为您做到这一点。然后，您可以创建原始列表的**副本**并用于计算差异。`Employee``employeeId``id`**`List.removeAll()`**

 *** * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T11:20:53.720

你的列表不是真正的列表，是吗？他们实际上是一组没有明确顺序的员工。如果它们具有定义的顺序，它们将更容易比较。为employeeId 定义一个Comparator 并使用Collections.sort 对两个数组进行排序。然后，您需要应用差异算法。我没有看到任何好的通用的。您可以将排序列表转换为 XML，然后使用[XMLUnit 的 Diff 类](http://xmlunit.sourceforge.net/api/org/custommonkey/xmlunit/Diff.html)来获取差异。您可以将其呈现为字符串列表并应用[文本 diff](http://code.google.com/p/java-diff-utils/)。如果您想实现一个特定于您的用例的算法，这里是关于差异算法的[讨论。](http://c2.com/cgi/wiki?DiffAlgorithm)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-29T11:27:06.210

在列表中使用 removeAll 方法：

```
list1.removeAll(list2); 
```

此方法将删除 list1 和 list2 中的所有常见元素，因此在调用此方法后 list1 包含以下员工 ID，因为这些在 list2 EMP03 EMP04 EMP05 中是唯一的

并覆盖Employee类中的equals方法

```
 @Override
    public boolean equals(Object obj) {
        Employee employee = (Employee)obj;

        if ( this.employeeId.equalsIgnoreCase(employee.employeeId)){
            return true;
        }
        return false;

    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-29T11:27:44.523

而是将两个员工列表放入地图中。关键是`employeeId`。价值就是`employee`对象。然后`removeAll`按照@AndrewButenko 的建议使用。您应该使用地图进行比列表更有效的查找。（删除涉及查找。）我会推荐 set，但是你需要实现`equals`and `hashcode`。它们已经为 String 实现了。

```
Map<String, Employee> map1 = new HashMap<String, Employee>();
for (Employee e : list1) {
    map1.put(e.getEmployeeId(), e);
}
Map<String, Employee> map2 = new HashMap<String, Employee>();
for (Employee e : list2) {
    map2.put(e.getEmployeeId(), e);
}

// clone makes sure we don't mess with the original map2 because we will reuse it
Collection<Employee> notPresentInList1 = map2.clone().removeAll(map1).values();

Collection<Employee> notPresentInList2 = map1.removeAll(map2).values(); 
```

如果您关心结果的顺序，您可以在最后对集合进行排序或使用`TreeMap`。**

# android - 在 Windows 上使用 Chrome for Android 中的远程调试功能的分步指南

> ID：11260629
> 
> 赞同：1
> 
> 时间：2012-06-29T11:03:29.377
> 
> 标签：android, google-chrome, adb, chrome-for-android

我已经在互联网上搜索了很长时间，以获取有关如何启用 Chrome for Android 内置的远程调试功能的工作教程，但我就是无法让它工作。

[本官方指南](https://developers.google.com/chrome/mobile/docs/debugging)中的第三步对我没有任何意义。我试图粘贴`adb forward tcp:9222 localabstract:chrome_devtools_remote`到 cmd 中，但它只是说“adb 不是内部或外部命令”。我究竟做错了什么？

我确实安装了 Android SDK，安装了包“Android SDK Tools”、“Android SDK Platform-tools”、“Google USB Driver”和“Google Web Driver”。

拜托，我需要一个关于如何正确执行此操作的非常基础的分步教程。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-30T19:05:35.093

Boris Smus 在我最初的帖子中作为评论发布了解决我问题的答案。我错过了将 /platform-tools/ 的位置添加到我在 cmd 中的路径。完成后，一切都很完美！:) 很抱歉没有认真阅读说明。谢谢你。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-29T11:07:48.393

这个 YouTube 视频怎么样.. [http://www.youtube.com/watch?v=s4zpL4VBbuU](http://www.youtube.com/watch?v=s4zpL4VBbuU)

# c# - 如何使用 C# 将 JSON 文本转换为对象

> ID：11260631
> 
> 赞同：31
> 
> 时间：2012-06-29T11:03:32.677
> 
> 标签：c#, json

如何将以下 JSON 响应转换为 C# 对象？

```
{ 
    "err_code": "0", 
    "org": "CGK", 
    "des": "SIN", 
    "flight_date": "20120719",
    "schedule": [
        ["W2-888","20120719","20120719","1200","1600","03h00m","737-200","0",[["K","9"],["F","9"],["L","9"],["M","9"],["N","9"],["P","9"],["C","9"],["O","9"]]],
        ["W2-999","20120719","20120719","1800","2000","01h00m","MD-83","0",[["K","9"],["L","9"],["M","9"],["N","9"]]]
    ]
} 
```

* * *

## 回答 #1

> 赞同：105
> 
> 时间：2017-12-29T13:46:04.323

要从 json 字符串创建一个类，请复制该字符串。

在 Visual Studio 中，单击编辑 > 选择性粘贴 > 将 Json 粘贴为类。

* * *

## 回答 #2

> 赞同：60
> 
> 时间：2012-06-29T11:08:18.823

首先创建一个类来表示您的 json 数据。

```
public class MyFlightDto
{
    public string err_code { get; set; }
    public string org { get; set; } 
    public string flight_date { get; set; }
    // Fill the missing properties for your data
} 
```

**使用 Newtonsoft JSON 序列化程序**[将 json 字符串反](http://www.newtonsoft.com/json/help/html/deserializeobject.htm)序列化为其对应的类对象。

```
var jsonInput = "{ org:'myOrg',des:'hello'}"; 
MyFlightDto flight = Newtonsoft.Json.JsonConvert.DeserializeObject<MyFlightDto>(jsonInput); 
```

或使用 `JavaScriptSerializer`将其转换为类（*不推荐，因为 newtonsoft json 序列化程序似乎性能更好*）。

```
string jsonInput="have your valid json input here"; //
JavaScriptSerializer jsonSerializer = new JavaScriptSerializer();
Customer objCustomer  = jsonSerializer.Deserialize<Customer >(jsonInput) 
```

假设您要将其转换为`Customer`类的实例。你的类应该看起来类似于`JSON`结构（属性）

* * *

## 回答 #3

> 赞同：52
> 
> 时间：2012-06-29T11:07:24.053

我建议你使用[`JSON.NET`](http://james.newtonking.com/projects/json-net.aspx). 它是一个开源库，可将您的 c# 对象序列化和反序列化为 json 和 Json 对象为 .net 对象...

**序列化示例：**

```
Product product = new Product();
product.Name = "Apple";
product.Expiry = new DateTime(2008, 12, 28);
product.Price = 3.99M;
product.Sizes = new string[] { "Small", "Medium", "Large" };

string json = JsonConvert.SerializeObject(product);
//{
//  "Name": "Apple",
//  "Expiry": new Date(1230422400000),
//  "Price": 3.99,
//  "Sizes": [
//    "Small",
//    "Medium",
//    "Large"
//  ]
//}

Product deserializedProduct = JsonConvert.DeserializeObject<Product>(json); 
```

**与其他 JSON 序列化技术的性能比较** ![在此处输入图像描述](../Images/ec7d35d57b1b103e269d6e08acea338e.png)

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2019-01-17T10:18:02.530

复制您的 Json 并粘贴到[http://json2csharp.com/](http://json2csharp.com/)上的文本框，然后单击 Generate 按钮，

将使用该 cs 文件生成一个 cs 类，如下所示：

var generatedcsResponce = JsonConvert.DeserializeObject(yourJson);

其中 RootObject 是生成的 cs 文件的名称；

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-07-21T20:21:57.007

这将接受一个 json 字符串并将其转换为您指定的任何类

```
public static T ConvertJsonToClass<T>(this string json)
    {
        System.Web.Script.Serialization.JavaScriptSerializer serializer = new System.Web.Script.Serialization.JavaScriptSerializer();
        return serializer.Deserialize<T>(json);
    } 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-06-28T08:12:10.503

```
class Program
{
    static void Main(string[] args)
    {
        var res = Json; //Json that has to be converted

        Response resp = new Response();
        resp = JsonSerializer.Deserialize<Response>(res);

        Console.WriteLine(res);
    }
}

public class Response
{
    public bool isValidUser { get; set; }
    public string message { get; set; }
    public int resultKey { get; set; }
} 
```

# java - 是否有任何开源 Java 库或 java 源代码来简化布尔表达式

> ID：11260633
> 
> 赞同：0
> 
> 时间：2012-06-29T11:03:44.127
> 
> 标签：java, boolean-expression

是否有任何开源 Java 库或 Java 源代码来简化布尔表达式，如

```
!((A.B+C).(!A+BC)) 
```

在哪里，

```
! - represents NOT
+ - represents OR
. - represents AND 
```

在这方面您的帮助将不胜感激

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T11:19:19.230

闻起来像 SQL？您可以简单地将 !,.,+ 转换为 NOT、AND、OR，过滤掉某些魔术关键字，然后将它们传递给传统的 JDBC 后端。"SELECT 1 WHERE" + 表达式

否则，听起来您需要一个完整的逻辑 AST+解析器（antlr），因为简单地构造一个表示表达式的 DOM 不会非常有用（因此，没有那么多工具通常采用表达式对象-图形并应用通用公理）.. 有一些高度专业化的变体 - 查找规则引擎，如流口水。但我猜这并不是你想要的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-29T11:07:24.260

[不，我不这么认为，但是使用ANTLR](http://www.antlr.org/)（声明式）或[JParsec](http://jparsec.codehaus.org/)（编程式）为这种语言编写解析器应该很简单

对于 ANTLR，使用[一阶逻辑语法](http://www.antlr.org/grammar/1336156363937/FOL.g)作为起点。

对于 JParsec，[JParceC 计算器教程可以满足](http://jparsec.codehaus.org/jparsec2+Tutorial)您的需求。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-29T11:08:55.677

我不知道java中有任何API。但是，您可以拆分表达式并为每个部分构建谓词。你可能有兴趣看看[这个](http://docs.guava-libraries.googlecode.com/git/javadoc/com/google/common/base/Predicates.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-29T11:15:03.787

首先，让我确认我是否正确地回答了您的问题-您是否正在考虑以简化方式对给定表达式进行编码的能力？

如果是，那么您可以尝试 Xtend：[http](http://eclipse.org/xtend/) ://eclipse.org/xtend/和 Xtext [http://www.eclipse.org/Xtext/](http://www.eclipse.org/Xtext/)

Xtend 是一种静态类型的编程语言，可编译为可理解的 Java 源代码。Xtend 是使用 Xtext 开发的。

Xtext 是一个用于开发编程语言和领域特定语言的框架。

如果您正在查看仅给定表达式的算法，则上述信息不适用。

希望这些信息对你有用。

# c++ - 这是“new auto(enum_type)”的 microsoft VC++ 2010 编译器错误吗

> ID：11260638
> 
> 赞同：6
> 
> 时间：2012-06-29T11:04:03.633
> 
> 标签：c++, visual-c++, enums, c++11, auto

环境：Microsoft Visual Studio 2010 SP1 Preminum(10.0.40219.1 SP1Rel)，Windows XP SP3

VC10 编译器支持 auto 关键字，但推断的类型相关信息似乎并不总是正确的枚举。

例子：

```
#include <type_traits>

enum fruit_t
{
    apple = 100,
    banana = 200,
};

int main()
{
    const auto pa = new auto(banana);
    const auto pb = new fruit_t(banana);
    static_assert(std::is_same<decltype(pa), decltype(pb)>::value, "not same!");
    delete pb;
    delete pa;
} 
```

上面的代码应该没有编译时错误或运行时错误。但令我惊讶的是，它编译正常，没有任何错误或警告，但运行不正确。调试器在退出主函数后告诉：

**检测到堆损坏：在 0x00034878 处的 %hs 块 (#55) 之后。CRT 检测到应用程序在堆缓冲区结束后写入内存。**

所以我猜编译器可能在“自动”类型推导中有错误。下面的汇编器窗口显示，在第一个“operator new”调用中请求的内存大小为 1 个字节，而第二个“operator new”调用为 4 个字节。这表明编译器在推导类型的大小上犯了一个大错误。

你认为这是一个编译器错误吗？微软是否有任何错误修复？

```
int main()
{
004113C0  push        ebp  
004113C1  mov         ebp,esp  
004113C3  sub         esp,10Ch  
004113C9  push        ebx  
004113CA  push        esi  
004113CB  push        edi  
004113CC  lea         edi,[ebp-10Ch]  
004113D2  mov         ecx,43h  
004113D7  mov         eax,0CCCCCCCCh  
004113DC  rep stos    dword ptr es:[edi]  
    const auto pa = new auto(banana);
004113DE  push        1  
004113E0  call        operator new (411181h)  
004113E5  add         esp,4  
004113E8  mov         dword ptr [ebp-104h],eax  
004113EE  cmp         dword ptr [ebp-104h],0  
004113F5  je          main+51h (411411h)  
004113F7  mov         eax,dword ptr [ebp-104h]  
004113FD  mov         dword ptr [eax],0C8h  
00411403  mov         ecx,dword ptr [ebp-104h]  
00411409  mov         dword ptr [ebp-10Ch],ecx  
0041140F  jmp         main+5Bh (41141Bh)  
00411411  mov         dword ptr [ebp-10Ch],0  
0041141B  mov         edx,dword ptr [ebp-10Ch]  
00411421  mov         dword ptr [pa],edx  
    const auto pb = new fruit_t(banana);
00411424  push        4  
00411426  call        operator new (411181h)  
0041142B  add         esp,4  
0041142E  mov         dword ptr [ebp-0F8h],eax  
00411434  cmp         dword ptr [ebp-0F8h],0  
0041143B  je          main+97h (411457h)  
0041143D  mov         eax,dword ptr [ebp-0F8h]  
00411443  mov         dword ptr [eax],0C8h  
00411449  mov         ecx,dword ptr [ebp-0F8h]  
0041144F  mov         dword ptr [ebp-10Ch],ecx  
00411455  jmp         main+0A1h (411461h)  
00411457  mov         dword ptr [ebp-10Ch],0  
00411461  mov         edx,dword ptr [ebp-10Ch]  
00411467  mov         dword ptr [pb],edx  
    static_assert(std::is_same<decltype(pa), decltype(pb)>::value, "not same!");
    delete pb;
0041146A  mov         eax,dword ptr [pb]  
0041146D  mov         dword ptr [ebp-0ECh],eax  
00411473  mov         ecx,dword ptr [ebp-0ECh]  
00411479  push        ecx  
0041147A  call        operator delete (411087h)  
0041147F  add         esp,4  
    delete pa;
00411482  mov         eax,dword ptr [pa]  
00411485  mov         dword ptr [ebp-0E0h],eax  
0041148B  mov         ecx,dword ptr [ebp-0E0h]  
00411491  push        ecx  
00411492  call        operator delete (411087h)  
00411497  add         esp,4  
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T14:17:02.107

是的，我认为这是一个 VS2010 错误。使用 XP SP3（32 位）和 VS2010 SP1 与您运行相同（或至少非常相似），我得到完全相同的错误。它看起来是特定于枚举的，因为在类中尝试它表明一切正常。我还尝试将另一个水果项添加到枚举中，值为 100000 只是为了确保它不像你的枚举那样愚蠢，所有值都低于 255。结果相同。

我在[Microsoft Connect](http://connect.microsoft.com/)上进行了快速搜索，但没有看到这方面的错误报告，因此我建议您输入一个。这是确保 Microsoft 知道并可能修复它的最佳方式。

# php - 使用 php 创建一个小部件以在外部站点上使用

> ID：11260640
> 
> 赞同：0
> 
> 时间：2012-06-29T11:04:17.257
> 
> 标签：php, iframe, widget

我认为让我们的相关经销商有机会在他们自己的网站上将其作为一个小部件是一个好主意。[https://www.autopower.no/](https://www.autopower.no/)（右侧的“Effektoversikt”）。
“effektoversikt”从我们的 MySQL 数据库中获取数据。一旦用户找到他们的汽车并点击“søk！” （搜索）他们应该被重定向到我们的页面......

我正在考虑使用`iframe`- 或`script`-tags 是解决方案吗？
有人可以指出我从哪里开始的正确方向吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T11:10:23.287

这可能是由 ajax 请求提供的 div 元素。ajax 请求返回 html 片段作为搜索表单，当您提交时，结果由生成 ajax 请求的网站发送（因此它看起来像最终用户的重定向）。

[编辑]

*   源网站有一个 url，它创建一个 HTML 片段作为 <form>...</form>。说，不是 HTML 页面，只有表单。

*   例如，目标网站使用[JQuery](http://api.jquery.com/jQuery.get/)通过 Ajax 请求获取表单，并将 html 片段设置到目标网站的 div 中。由于表单目标位于源网站上，因此表单上的提交会自动转发到该源网站。

因此，首先创建一个脚本/任何公开 HTML 片段的内容，然后尝试将其插入另一个页面。[您可以在JSFiddle](http://jsfiddle.net/)上试验插入部分。

# oracle - 如何在 pl/sql 中快速定位准确的位置 (ORA-06502: PL/SQL)

> ID：11260641
> 
> 赞同：1
> 
> 时间：2012-06-29T11:04:18.637
> 
> 标签：oracle, plsql

我有一个 select 语句，需要在我的 pl/sql 中选择几十列到自定义变量中。如下所示：

```
 select col1,
         col2,
         ....
         col30
  into   var1,
         ...
         var30
  from   table
  where .... 
```

执行 SP 时遇到错误：

> ORA-06502: PL/SQL: 数字或值错误: 字符串缓冲区太小

错误信息只指出 select 语句的第一行号。即使我可以发现我定义的变量太小而无法容纳列，它仍然让我很难精确定位错误定义的变量。这对我来说不是调试这个 sp 的有效方法。

有没有更好的办法，请指教。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-29T11:45:01.613

pl/sql 中通常使用两个选项：

1.使用 %type 在 PL/SQL 中定义变量以匹配表的定义。

```
define
  v_col1 my_table.col1%type;
  v_col2 my_table.col2%type;
begin
  select col1,col2
  into v_col1, v_col2
  from my_table
  -- some condition that pulls 1 row
  where rownum = 1;
end; 
```

2.定义一个行变量，使用%rowtype

```
define
  v_my_table_row my_table%rowtype;
begin
  select *
  into v_my_table_row
  from my_table
  where rownum = 1;

end; 
```

# ant - 如何使用 Eclipse AntRunner 在控制台上显示 ant 任务 javac 编译错误

> ID：11260643
> 
> 赞同：0
> 
> 时间：2012-06-29T11:04:34.460
> 
> 标签：ant, eclipse-plugin

我正在使用 Elcipse 的 AntRunner 来执行 Ant 任务。执行 javac 任务时，如果发生任何编译错误，我会在控制台中收到以下错误消息

```
C:\build.xml:41: Compile failed; see the compiler error output for details. 
```

我需要做什么才能在控制台上显示实际的编译错误？如何在文件中记录相同的内容？. 谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T13:56:28.883

我没有使用过 Ant eclipse 插件，但我认为这可能是由于插件内部缺少功能，而不是 Ant 本身。

如果您可以从终端（或 Windows 上的命令提示符）运行 Ant，请尝试运行`ant -verbose`Ant 以输出更多信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T14:00:13.723

Eclipse AntRunner 使用后，为了在控制台显示编译错误

*可以使用*addBuildListener API。**

 *创建一个扩展 org.apache.tools.ant.DefaultLogger 的类。例如

```
Class MyLogger extends DefaultLogger {

    // All overridden method implementation goes here
  }

//  To use with AntRunner:

   AntRunner antRunner = new AntRunner();
   antRunner.addBuildListener(MyLogger.class.getName()); 
```*

# android - 强制 lint 检查准确语言的翻译

> ID：11260644
> 
> 赞同：7
> 
> 时间：2012-06-29T11:04:35.110
> 
> 标签：android, android-lint

我收到此错误：

> "preferences_default_reminder_labels" 没有翻译成 cs, de, es, fr, it, ja, ko, nl, pl, pt, pt-rBR, zh
> 
> 问题：检查未翻译所有字符串的不完整翻译 ID：MissingTranslation

但我的应用程序只需要翻译成英文和俄文。如何调整 lint 以仅检查 en、ru 翻译？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T20:51:01.073

Check if you have set environmental variable `ANDROID_LINT_COMPLETE_REGIONS`.

From [lint docs](http://tools.android.com/tips/lint-checks):

> MissingTranslation
> 
> * * *
> 
> Summary: Checks for incomplete translations where not all strings are translated
> 
> Priority: 8 / 10
> Severity: Fatal
> Category: Correctness:Messages
> 
> If an application has more than one locale, then all the strings declared in one language should also be translated in all other languages.
> 
> By default this detector allows regions of a language to just provide a subset of the strings and fall back to the standard language strings. You can require all regions to provide a full translation by setting the environment variable ANDROID_LINT_COMPLETE_REGIONS.

What is environmental variable and how to use them you can find [here](https://superuser.com/questions/284342/what-are-path-and-other-environment-variables-and-how-can-i-set-or-use-them).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T15:12:34.800

如果您有其他语言`res`的空文件夹，请删除它们。`values-XX``ru`

# python - 如何从 xsd 文件中获取标记名称及其相应属性作为键：值对

> ID：11260649
> 
> 赞同：0
> 
> 时间：2012-06-29T11:04:50.467
> 
> 标签：python, xml

如果xsd文件是这样的

```
<?xml version="1.0" encoding="UTF-8"?>
<xsd:schema xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:xbrli="http://www.xbrl.org/2003/instance" xmlns:xbrldt="http://xbrl.org/2005/xbrldt" xmlns:num="http://www.xbrl.org/dtr/type/numeric" xmlns:nonnum="http://www.xbrl.org/dtr/type/non-numeric" xmlns:link="http://www.xbrl.org/2003/linkbase" xmlns:ifrs="http://xbrl.ifrs.org/taxonomy/2012-03-29/ifrs" targetNamespace="http://xbrl.ifrs.org/taxonomy/2012-03-29/ifrs" elementFormDefault="qualified" attributeFormDefault="unqualified"> 
<xsd:import schemaLocation="http://www.xbrl.org/dtr/type/numeric-2009-12-16.xsd" namespace="http://www.xbrl.org/dtr/type/numeric"/> <xsd:import schemaLocation="http://www.xbrl.org/dtr/type/nonNumeric-2009-12-16.xsd" namespace="http://www.xbrl.org/dtr/type/non-numeric"/> 
<xsd:import schemaLocation="http://www.xbrl.org/2003/xbrl-instance-2003-12-31.xsd" namespace="http://www.xbrl.org/2003/instance"/> <xsd:import schemaLocation="http://www.xbrl.org/2005/xbrldt-2005.xsd" namespace="http://xbrl.org/2005/xbrldt"/> 
<xsd:element xbrli:periodType="duration" type="nonnum:domainItemType" substitutionGroup="xbrli:item" nillable="true" name="AbnormallyLargeChangesInAssetPricesOrForeignExchangeRatesMember" id="ifrs_AbnormallyLargeChangesInAssetPricesOrForeignExchangeRatesMember" abstract="true"/> 
<xsd:element xbrli:periodType="duration" type="xbrli:monetaryItemType" substitutionGroup="xbrli:item" nillable="true" name="AccountingProfit" id="ifrs_AccountingProfit" xbrli:balance="credit"/> 
<xsd:element xbrli:periodType="instant" type="xbrli:monetaryItemType" substitutionGroup="xbrli:item" nillable="true" name="Accruals" id="ifrs_Accruals" xbrli:balance="credit"/> 
<xsd:element xbrli:periodType="instant" type="xbrli:monetaryItemType" substitutionGroup="xbrli:item" nillable="true" name="AccrualsClassifiedAsCurrent" id="ifrs_AccrualsClassifiedAsCurrent" xbrli:balance="credit"/> 
</xml> 
```

我需要这种格式的字典

```
d={'AbnormallyLargeChangesInAssetPricesOrForeignExchangeRatesMember':{'xbrli:periodType':'duration','type':'nonnum:domainItemType','substitutionGroup':'xbrli:item'}} 
```

像这样对于每个元素，它应该将属性“名称”打印为标签，并将所有属性作为该标签的值。

我正在尝试使用任何 xml 解析器，我知道如何使用 re........ 但我只需要通过任何 xml 解析器..

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T11:34:09.957

使用萨克斯解析器：

```
import xml.sax

class MyXsdHandler(xml.sax.handler.ContentHandler):
    def parse(self, f):
        self.result = {}
        s = open(f, "r").read()
        xml.sax.parseString(s, self)
        return self.result

    def startElement(self, name, attrs):
        if name == "xsd:element":
            d = dict(attrs)
            self.result[attrs["name"]] = d

results = MyXsdHandler().parse("myfile.xsd") 
```

在这种情况下，元素的字典包含所有属性。如果您使用的是 python 3，您可以选择您自己感兴趣的或使用字典理解来过滤属性：

```
interestingAttrs = ["type", ...] #all attributes you need
#inside the if in startElement
#python 2:
d = dict()
for a in interestingAttrs: d[a] = attrs[a]

#python 3:
d = {a: attrs[a] for a in interestingAttrs} 
```

需要注意的重要一点：startElement 中的“attrs”对象不是字典，它只是以类似的方式访问属性。但是您实际上无法设置值，并且它缺少 dicts 的一些其他功能，因此如果您要做的不仅仅是打印属性，您应该始终创建属性字典。

# c++ - 无法显示添加了 warpPerspective 功能的 OpenCV/sample/cpp/lkdemo.cpp 的图像

> ID：11260657
> 
> 赞同：0
> 
> 时间：2012-06-29T11:05:51.027
> 
> 标签：c++, opencv

嗨，我试图修改`lkdemo.cpp`in `OpenCV/sample/cpp`。我想得到透视变换，然后`warpPerspective`。所以我添加了第 (1) 和 (2) 行来做到这一点。其中图像和输出的声明如下：

```
Mat gray, prevGray, image, output;

....

calcOpticalFlowPyrLK(prevGray, gray, points[0], points[1], status, err, winSize,
                                 3, termcrit, 0, 0.001);

 (1)   CvMat H = getPerspectiveTransform(points[0], points[1]); 
 (2)   cvWarpPerspective(&image, &output, &H,CV_INTER_LINEAR+CV_WARP_FILL_OUTLIERS, cvScalarAll(0));

... 
```

现在，当我尝试使用`imshow()`我看到扭曲图像的输出时，我收到了这个错误：

```
error: (-206) Unrecognized or unsupported array type in function cvGetMat 
```

调试后的回溯如下：

```
(gdb) bt
#0  0xb7fdd424 in __kernel_vsyscall ()
#1  0xb77741ef in __GI_raise (sig=6) at ../nptl/sysdeps/unix/sysv/linux/raise.c:64
#2  0xb7777835 in __GI_abort () at abort.c:91
#3  0xb79e313d in __gnu_cxx::__verbose_terminate_handler() () from /usr/lib/i386-linux-gnu/libstdc++.so.6
#4  0xb79e0ed3 in ?? () from /usr/lib/i386-linux-gnu/libstdc++.so.6
#5  0xb79e0f0f in std::terminate() () from /usr/lib/i386-linux-gnu/libstdc++.so.6
#6  0xb79e105e in __cxa_throw () from /usr/lib/i386-linux-gnu/libstdc++.so.6
#7  0xb7eb9363 in cv::error(cv::Exception const&) () from /usr/local/lib/libopencv_core.so.2.4
#8  0xb7e40496 in cvGetMat () from /usr/local/lib/libopencv_core.so.2.4
#9  0xb7ceb915 in cvImageWidgetSetImage(_CvImageWidget*, void const*) () from /usr/local/lib/libopencv_highgui.so.2.4
#10 0xb7ced4e0 in cvShowImage () from /usr/local/lib/libopencv_highgui.so.2.4
#11 0xb7cea378 in cv::imshow(std::string const&, cv::_InputArray const&) () from /usr/local/lib/libopencv_highgui.so.2.4
#12 0x0804a1ca in main (argc=2, argv=0xbffff724) at lkdemo-1.cpp:141
(gdb) 
```

请任何人帮我解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T05:15:44.477

实际上，由于 getPerspectiveTransform 方法所需的点数不匹配，我遇到了上述错误。错误是： **错误：OpenCV 错误：断言失败 (src.checkVector(2, CV_32F) == 4 && dst.checkVector(2, CV_32F) == 4) in getPerspectiveTransform**

实际上，转换需要四个点，我正在使用所有点。如果需要，这是使用 lk 光流调用 getPerspectiveTransform 的正确方法。

```
 std::vector<Point2f> img1_corners(4);

    img1_corners[0] = cvPoint(0,0); 
    img1_corners[1] = cvPoint( gray.cols, 0 );
    img1_corners[2] = cvPoint( gray.cols, gray.rows ); 
    img1_corners[3] = cvPoint( 0, gray.rows );

    std::vector<Point2f> img2_corners(4);

    vector<uchar> status;
    vector<float> err;
    calcOpticalFlowPyrLK(gray, gray1, img1_corners, img2_corners, status, err, winSize,
            3, termcrit, 0, 0.001);
    //calcOpticalFlowPyrLK(gray, gray1, corner1, corner2, status, err, winSize,
    //      3, termcrit, 0, 0.001);

    Mat H = getPerspectiveTransform(img1_corners, img2_corners);
    //Mat H = getPerspectiveTransform(corner1, corner2); 
```

# tcl - TCL 中的 if 语句

> ID：11260659
> 
> 赞同：15
> 
> 时间：2012-06-29T11:05:59.887
> 
> 标签：tcl

我对以下代码的 tcl 中的 if 语句有疑问：

```
if {(($number == 1)&&($name == "hello")) || (($number == 0)&&($name == "yes"))} {
    #do something here
} 
```

上面的代码有效，但如果我这样写：

```
if {{$number == 1 && $name == "hello"} || {$number == 0&&$name == "yes"}} {
    #do something here
} 
```

它抱怨应该`$number`是一个布尔值，为什么？第二个不是有效的表达吗？如何纠正它？

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-06-29T12:55:53.360

大括号`{}`, 和圆括号 ,在 Tcl`()`中*不可互换。*

形式上，大括号（[除了一个例外](http://wiki.tcl.tk/17158)）是一种引用，表示不再对内容执行替换。在上面的第一种情况下，这意味着该参数被传递给`if`而没有替换，它将它作为一个表达式来计算。表达式子语言具有与一般 Tcl 高度相似的大括号解释方案；它们表示一个文字值，无需对其执行进一步的替换。

相比之下，括号在 Tcl 中大多不是特殊的。例外情况是数组元素的名称（例如`$foo(bar)`，其他一些东西）。在 Tcl 中使用括号（无论是否平衡）作为命令名的一部分是完全合法的，但你可能会让你的程序员同事抱怨你写了令人困惑的代码。

## 细节

在这种特定情况下， this 的测试表达式`if`：

```
if {{$number == 1 && $name == "hello"} || {$number == 0&&$name == "yes"}} {...} 
```

被解析为：

```
废话#1 LOGICAL_OR 废话#2
```

其中每个`blah`都是文字。不幸的是，`blah#1`（完全等于`$number == 1 && $name == "hello"`）没有布尔解释。（也没有，`blah#2`但我们从不考虑这一点。）这里的事情肯定是非常错误的！

最简单的解决方法是将那些虚假的大括号改回括号：

```
if {($number == 1 && $name == "hello") || ($number == 0&&$name == "yes")} {...} 
```

我敢打赌这就是你最初想要的。

## 警告：高级主题

但是，另一个解决方法是添加一些额外的内容：

```
if {[expr {$number == 1 && $name == "hello"}] || [expr {$number == 0&&$name == "yes"}]} {...} 
```

这通常不是一个好主意——额外的体积没有额外的收益——但在你试图使用动态生成的表达式作为测试条件的地方是有意义的。*除非你真的很确定你需要这样做，否则不要这样做****！***我是认真的。这是一种非常先进的技术，您几乎不需要，而且通常有更好的方法来实现您的总体目标。如果您认为您*可能*需要它，看在上帝的份上，请在 SO 上提问，我们将尝试找到更好的方法；几乎总是有一个可用的。

 *** * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-29T12:29:31.297

我认为您收到的错误消息并不意味着它`$number`必须是布尔值（我收到了消息`expected boolean value but got "$number == 1 && $name == "hello""`）。这意味着字符串`$number == 1 && $name == "hello"`不是布尔值 - 这绝对是真的。如果您在表达式中使用花括号，`if`则不会对这些字符串进行评估，而是将其简单地解释为 - 作为字符串。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-29T16:09:03.537

简而言之：`if`为其条件脚本使用一种特殊的“迷你语言”——与[`expr`command](http://www.tcl.tk/man/tcl8.5/TclCmd/expr.htm)理解的相同。这在[`if`手册页](http://www.tcl.tk/man/tcl8.5/TclCmd/if.htm)中有说明：

> if 命令将 expr1 评估为表达式（与 expr 评估其参数的方式相同）。

与非常类似 LISP 和/或类似 Unix shell 的 Tcl 本身相比，“`expr`迷你语言”在感觉上更像 C 的意义上更“传统”。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-12-11T06:54:44.707

在`($number == 1)`数字中分配 1 并进行比较。例如：`1==1`这里的输出是布尔值。但是在`{$number == 1 && $name == "hello"}`$number 中没有分配，因为花括号`$number`是比较的，`1`所以得到的输出不是布尔值。**

# xquery - 如何使用 search:search API 在 txt 文件中进行搜索？

> ID：11260661
> 
> 赞同：0
> 
> 时间：2012-06-29T11:06:05.183
> 
> 标签：xquery, marklogic

如何使用 Marklogic 中的 search:search API 在文本文件 (.txt) 中进行搜索。我想将一个 txt 文件上传到 Marklogic 并使用 search:search API 来搜索其内容。我该怎么做 ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T21:23:32.420

search:search() 应该能够在文本文档中找到命中。

```
xdmp:document-insert("/text.txt", text { "Hello World " } ) 
```

然后

```
search:search("Hello") 
```

应该回击。（是的，文本文档表示为在根处具有 XML 文本节点的文档）。

# java - 根据父级调整大小最小化或框架的对话框

> ID：11260663
> 
> 赞同：0
> 
> 时间：2012-06-29T11:06:14.800
> 
> 标签：java, swing, jframe, jdialog

我希望有一个窗口，其行为类似于对话框，在条款中，它与父窗口一起关闭，但是它的行为应该像一个普通的框架，特别是它应该有最大化/恢复按钮。如何创建绑定到父窗口的窗口（当父窗口关闭时它们会关闭）并继承一些属性，即 windowicon？

我能想到的最好的方法是编写我自己的类，其中包含一个 JFrame 并接受一个父级。此类为父级安装一个侦听器并跟踪其所有实例，因此它可以在父级关闭时关闭所有实例。Exit_on_close 不能用于父级，因为应用程序的其余部分应该继续运行。

那么有没有一种简单的方法，还是我必须自己上课？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T11:55:56.530

您可以复制几乎任何 JDialog 行为，除了它在 JFrame 之上的定位（对于 Win 平台的这种情况有一些本机解决方案，但使用它是一件坏事......真的）。

以下是您可以在几分钟内完成的操作的示例：

**ChildFrameTest.java**

```
public class ChildFrameTest
{
    public static void main ( String[] args )
    {
        JFrame application = new JFrame ();
        application.setSize ( 600, 600 );
        application.setLocationRelativeTo ( null );
        application.setDefaultCloseOperation ( JFrame.DISPOSE_ON_CLOSE );

        JChildFrame tool = new JChildFrame ( application );
        tool.setModalExclusionType ( Dialog.ModalExclusionType.APPLICATION_EXCLUDE );
        tool.setSize ( 100, 600 );
        tool.setLocation ( application.getX () + application.getWidth (), application.getY () );

        new WindowFollowListener ( tool, application );

        application.setVisible ( true );
        tool.setVisible ( true );
    }

    public static class JChildFrame extends JFrame
    {
        public JChildFrame ( JFrame parent )
        {
            super ();
            parent.addWindowListener ( new WindowAdapter ()
            {
                public void windowClosing ( WindowEvent e )
                {
                    dispose ();
                }
            } );
        }
    }
} 
```

和 WindowFollowListener 添加一些不错的子框架行为：

**WindowFollowListener.java**

```
public class WindowFollowListener extends ComponentAdapter
{
    private boolean enabled = true;
    private Window followingWindow;
    private Window parentWindow;
    private Point ll;

    public WindowFollowListener ( Window followingWindow, Window parentWindow )
    {
        super ();

        this.followingWindow = followingWindow;
        this.parentWindow = parentWindow;
        this.ll = parentWindow.getLocation ();

        parentWindow.addComponentListener ( this );
    }

    public boolean isEnabled ()
    {
        return enabled;
    }

    public void setEnabled ( boolean enabled )
    {
        this.enabled = enabled;
    }

    public Window getFollowingWindow ()
    {
        return followingWindow;
    }

    public void setFollowingWindow ( Window followingWindow )
    {
        this.followingWindow = followingWindow;
    }

    public Window getParentWindow ()
    {
        return parentWindow;
    }

    public void setParentWindow ( Window parentWindow )
    {
        this.parentWindow = parentWindow;
    }

    public void componentResized ( ComponentEvent e )
    {
        this.ll = parentWindow.getLocation ();
    }

    public void componentMoved ( ComponentEvent e )
    {
        if ( enabled && followingWindow != null && parentWindow != null )
        {
            Point nl = parentWindow.getLocation ();
            Point fwl = followingWindow.getLocation ();
            followingWindow.setLocation ( fwl.x + nl.x - ll.x, fwl.y + nl.y - ll.y );
            this.ll = nl;
        }
    }
} 
```

# javascript - Android / Web App - 将方向从横向设置为纵向模式

> ID：11260665
> 
> 赞同：1
> 
> 时间：2012-06-29T11:06:27.933
> 
> 标签：javascript, android, cordova, orientation

我有一个在 PhoneGap 中构建的应用程序，并且在 Android Manifest 文件中我已将方向设置为横向，因为我的应用程序必须始终处于横向模式。

我遇到的问题是我有一些外部链接，它们在默认手机浏览器中加载，但是由于手机处于横向模式，页面以横向模式加载，因此不适合所有内容正确。

所以我的问题是是否有办法将方向设置为在单击外部链接时自动更改为纵向。我目前正在使用以下方法在我的 javascript 中加载外部页面：

```
window.location.href = "http://www.test.com"; 
```

提前致谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-30T08:53:31.187

你不能这样做。用户只能将浏览器的方向设置为默认的纵向或横向模式

# android - 如何创建最吸引人的移动应用程序设计

> ID：11260668
> 
> 赞同：0
> 
> 时间：2012-06-29T11:06:33.777
> 
> 标签：android, android-layout, photoshop

我是一名安卓开发人员，我对 Photoshop 和其他设计工具的了解非常短。我对设计没有太大兴趣。但要制作我自己的安卓应用程序，我将不得不将自己置于设计阶段。

请告诉我应该学习或练习什么，以便我的应用程序看起来比现在更好。

还请告诉我字体样式和字体大小。哪个是更好的 android 原生字体/样式或机器人字体？我的意思是说哪个会更好看。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-29T11:09:36.523

看一下

1.  官方设计指南 [在这里](http://developer.android.com/design/index.html)

2.  幻灯片[在这里](http://www.slideshare.net/retomeier/being-epic-best-practices-for-building-android-apps)

3.  一个pdf[在这里](http://www.unifiedtestinginitiative.org/files/uti_best_practices_v1_final.pdf)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T11:11:08.310

只需使用编辑器（Eclipse）中的构建。放置一些按钮，设置一些设置并查看 xml-tab 以了解发生了什么。这样才能获得基础知识。

更多信息请阅读官方文档：http: [//developer.android.com/guide/topics/ui/index.html](http://developer.android.com/guide/topics/ui/index.html)

# html - 元素的左边缘是动态的（内联...），但右边缘是固定的？

> ID：11260675
> 
> 赞同：1
> 
> 时间：2012-06-29T11:07:04.240
> 
> 标签：html, css

这是一个演示：http: [//jsbin.com/egezog/edit#html,live](http://jsbin.com/egezog/edit#html,live)

抱歉，如果这是新手，但我无法弄清楚。我有一个标题，我需要（出于装饰目的）从它的边缘到页面右侧的一条线（不是实际的页面，而是一个包装器，但无论如何我都隐藏了溢出）。包装器的宽度是固定的，但标题的长度会有所不同。我不能使用绝对位置，而且我不喜欢使用表格。如果我们解决这个问题...

在这里：http: [//jsbin.com/ibecv/edit#html,live](http://jsbin.com/ibeciv/edit#html,live)。所以最后，我实际上更喜欢这一切都是正确的。你可能会问，如果有建议，为什么我需要建议？好吧，正如您所看到的，标题分两行，这在我的情况下是不可接受的，而且我不喜欢使用表格。

我想我可以使用 float:right, 来右对齐，但是，这取决于我希望你给我建议的实现。谢谢！

PS: jsfiddle 现在对我来说已经失败了，所以我在这里使用了 jsbin。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T11:59:28.833

[http://jsbin.com/ujiquq/edit#html,live](http://jsbin.com/ujiquq/edit#html,live)

适用于 IE8 和所有现代浏览器。父元素的背景可以是任何东西。无论选择什么，该线仍将垂直居中`font-size`。

**HTML：**

```
<h3><span>The title</span></h3> 
```

**CSS：**

```
h3:after {
    content: '\00200B';
    background: url(data:image/gif;base64,R0lGODlhAgABAIAAAP8AAAAAACH5BAAAAAAALAAAAAACAAEAAAICBAoAOw==) left center repeat-x;
    display: block;
    overflow: hidden;
}
h3 > span {
    float: right;
    padding-left: 5px;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-29T11:24:40.860

像这样写：

**HTML**

```
<div class="title"><span>Title Here</span></div> 
```

**CSS**

```
.title {text-align:right;border-bottom:1px solid red;}
  span{background:#fff;float:right;margin-top:-9px;} 
```

检查这个[http://jsbin.com/ibeciv/3/edit](http://jsbin.com/ibeciv/3/edit)

**更新**

检查这个[http://jsbin.com/ibeciv/4/edit](http://jsbin.com/ibeciv/4/edit)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-29T11:26:24.993

这是一个不使用表格的解决方案：

[http://jsbin.com/ujawej/5/edit](http://jsbin.com/ujawej/5/edit)

这是带表格的那个（来自我的评论）：

[http://jsbin.com/osovev/2](http://jsbin.com/osovev/2)

# c# - 从多个 TextBox 元素中获取值

> ID：11260681
> 
> 赞同：0
> 
> 时间：2012-06-29T11:07:25.023
> 
> 标签：c#, winforms

我有几个不同的 TextBox 元素，分别命名为“e0”、“e1”、“e2”、“e3”。我知道有多少，我只想能够遍历它们并获取它们的值，而不是手动输入每个值。

我假设我会做这样的事情，我只是不知道如何访问该元素。

```
for(int i= 0; i < 4; ++i) {
    string name = "e" + i;
    // How do I use my newly formed textbox name to access the textbox 
    // element in winforms?
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T11:10:50.103

您可以像这样使用控件的父级（假设您已将所有控件放在表单中，所以我使用了这个）

```
for(int i= 0; i < 4; ++i) {
string name = "e" + i;
TextBox txtBox=this.Controls[name] as TextBox;
Console.Writeline(txtBox.Text);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-29T11:13:23.893

我建议不要使用这种方法，因为它容易出错。如果您想重命名它们怎么办，如果您忘记了这一点并添加其他带有 name 的控件`e...`怎么办？

相反，我会将它们收集在容器控件中，例如[`Panel`](http://msdn.microsoft.com/en-us/library/system.windows.forms.panel.aspx). 然后你可以使用`LINQ`找到相关的`TextBoxes`：

```
var myTextBoxes = myPanel.Controls.OfType<TextBox>(); 
```

`Enumerable.OfType`将相应地过滤和投射控件。如果你想更多地过滤它们，你可以使用`Enumerable.Where`，例如：

```
var myTextBoxes = myPanel.Controls
                         .OfType<TextBox>()
                         .Where(txt => txt.Name.ToLower().StartsWith("e")); 
```

现在你可以迭代那些`TextBoxes`，例如：

```
foreach(TextBox txt in myTextBoxes)
{
    String text = txt.Text;
    // do something amazing
} 
```

**编辑**：

> 文本框位于多个 TabPages 上。此外，名称更合乎逻辑......

当控件位于多个标签页上时，此方法也适用，例如：

```
var myTextBoxes = from tp in tabControl1.TabPages.Cast<TabPage>()
                  from panel in tp.Controls.OfType<Panel>()
                  where panel.Name.StartsWith("TextBoxGroup")
                  from txt in panel.Controls.OfType<TextBox>()
                  where txt.Name.StartsWith("e")
                  select txt; 
```

[（请注意，我添加了面板名称必须以 开头的另一个条件`TextBoxGroup`，只是为了表明您也可以组合这些条件）]

当然，可以根据需要更改检测相关控件的方式（fe 和`RegularExpression`）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-29T11:11:41.413

试试这个 ：

```
this.Controls.Find()

for(int i= 0; i < 4; ++i) {
    string name = "e" + i;
    TextBox txtBox = this.Controls.Find(name) as TextBox;
} 
```

或这个 ：

```
this.Controls["name"]

for(int i= 0; i < 4; ++i) {
    string name = "e" + i;
    TextBox txtBox = this.Controls[name] as TextBox;
} 
```

# c++ - 如何创建winsnmp服务作为windows客户端，它将使用c从服务器获取snmp陷阱？

> ID：11260685
> 
> 赞同：2
> 
> 时间：2012-06-29T11:07:51.783
> 
> 标签：c++, c

我需要使用 WINsnmp 运行 Windows 服务并从在其他系统中运行的服务器获取 snmp 陷阱。您能帮我了解如何从 Winsnmp 服务器获取此陷阱并操作数据，还请分享代码，帮助我获得有关 Winsnmp 客户端服务以及如何从服务器获取陷阱的更多想法。

# c# - 如何进行编码的 UI 测试以在 C# 中选择最新的文件夹

> ID：11260691
> 
> 赞同：0
> 
> 时间：2012-06-29T11:08:18.667
> 
> 标签：c#, visual-studio-2010, coded-ui-tests

我正在编写一个编码的 ui 测试，该测试将作用于每晚创建的文件夹。我希望它工作的方式是测试将选择最新的文件夹。

我该怎么做？断言？

该文件夹是从我使用主应用程序打开的文件夹对话框中选择的。然后将文件夹的名称放入主应用程序的文本框中并扫描补丁。

```
 //Expand 'Computer' -> 'network drive (X:)' -> 'great-granparent' -> 'granparent' -> 'parent' -> 'folder' tree item
 uIfolder_TreeItem.Expanded = this.Browse_For_FolderParams.UIfolder_TreeItemExpanded; 
```

使用 nXu 的代码我试过这个：

```
 DirectoryInfo root = new DirectoryInfo(@"X:\great-granparent\granparent\parent");
        DirectoryInfo[] folders = root.GetDirectories();

        DirectoryInfo newest = folders[0];
        foreach (var dir in folders)
        {
            if (dir.CreationTime.CompareTo(newest.CreationTime) > 0)
                newest = dir;
        }

        //Expand 'Computer' -> 'network drive (X:)' -> 'great-granparent' -> 'granparent' -> 'parent' -> 'folder' tree item
        newest = this.Browse_For_FolderParams(newest); 
```

**结束代码**

```
 DirectoryInfo root = new DirectoryInfo(@"X:\great-granparent\granparent\parent");
        DirectoryInfo[] folders = root.GetDirectories();

        DirectoryInfo newest = folders[0];
        foreach (var dir in folders)
        {
            if (dir.CreationTime.CompareTo(newest.CreationTime) > 0)
                newest = dir;
        }

        uIfolder_TreeItem.SearchProperties["Name"] = newest.Name;

        //Expand 'Computer' -> 'network drive (X:)' -> 'great-granparent' -> 'granparent' -> 'parent' -> 'folder' tree item
        uIfolder_TreeItem.Expanded = this.Get_FolderParams.UIfolder_TreeItemExpanded; 
```

谢谢您的帮助 ：）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-29T11:21:22.407

使用[DirectoryInfo 类](http://msdn.microsoft.com/en-us/library/system.io.directoryinfo.aspx)，它具有 CreationTime、LastAccessTime 和 LastWriteTime 属性。例如，要选择 C:\ root 上最后创建的文件夹，请使用以下代码：

```
DirectoryInfo root = new DirectoryInfo(@"C:\");
DirectoryInfo[] folders = root.GetDirectories();

DirectoryInfo max = folders[0];
foreach (var dir in folders)
{
    if (dir.CreationTime.CompareTo(max.CreationTime) > 0)
        max = dir;
}

// Last created directory is max 
```

# django - 如何在 django 中正确地对 Facebook Graph API 进行 POST 调用

> ID：11260700
> 
> 赞同：1
> 
> 时间：2012-06-29T11:08:51.373
> 
> 标签：django, facebook-graph-api, django-forms

我正在尝试从我的本地应用程序创建一个 Facebook 事件，并且我有一个用户输入事件信息的表单。据此[，](http://developers.facebook.com/docs/reference/api/#publishing)我必须打电话给`https://graph.facebook.com/USERID/events`

为此，我使用了 urlopen

```
form_fields = {
           "access_token": request.user.get_profile().access_token,
           "name" : "name",
           "start_time" : "01/01/2012"
}
urllib2.urlopen(update_url,urllib.urlencode(form_fields)) 
```

运行我得到的代码

```
HTTP Error 400: Bad Request 
```

调试程序后，变量值为

```
update_url = str: https://graph.facebook.com/XXXXXXXX/events

form_fields = dict: {'access_token': u'XXXXXX', 'start_time': datetime.datetime(2012, 1, 6, 0, 0), 'location': 'someplace', 'name': u'ab'} 
```

update_url 似乎是正确的，我猜问题出在 form_fields 上。那么我应该如何将这些字段提供给 Facebook Graph API？

```
 Traceback:
File "C:\Python27\lib\site-packages\django\core\handlers\base.py" in get_response
  111\.                         response = callback(request, *callback_args, **callback_kwargs)
File "C:\Users\Akshay\workspace\example\example\planpouchproto\views.py" in createPouch
  20\.             graph.post('%s/events' %request.user.get_profile().facebook_id, **{"access_token": request.user.get_profile().access_token,"name" : cd['event_name'],"start_time" : "01/01/2012"})
File "C:\Users\Akshay\workspace\example\example\facepy\graph_api.py" in post
  65\.             retry = retry
File "C:\Users\Akshay\workspace\example\example\facepy\graph_api.py" in _query
  240\.                 return load(method, url, data)[0]
File "C:\Users\Akshay\workspace\example\example\facepy\graph_api.py" in load
  196\.             result = self._parse(response.content)
File "C:\Users\Akshay\workspace\example\example\facepy\graph_api.py" in _parse
  282\.                     error.get('code', None)

Exception Type: OAuthError at /pouch/
Exception Value: 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T12:57:09.000

[Facepy](https://github.com/jgorset/facepy)让与 Facebook 的交互更简单，试试看吧。

将事件发布到图表将类似于

```
graph.post('USERID/events', form_fields) 
```

要进行调试，您可以通过发表评论来测试身份验证是否有效：

```
graph = GraphAPI(request.user.get_profile().access_token)
graph.post(path="me/feed", message="hello FB", caption="hello FB", description="hello FB") 
```

然后你可以缩小你的问题。

# java - 如何获取用户的所有 Ldap 组，包括 JAVA 中的嵌套组

> ID：11260704
> 
> 赞同：3
> 
> 时间：2012-06-29T11:09:08.980
> 
> 标签：java, ldap

我想查找用户所属的所有组，包括嵌套组。就像如果用户是 A1 组的一部分并且 A1 组是 A 的一部分，那么我也想获得 A。

以下是代码，我尝试了各种过滤器字符串......但没有给出预期的输出。

```
String samAccountName = "group";

String searchFilter = "(&(objectclass=user)(memberof: 1.2.840.113556.1.4.1941:="+samAccountName+"))";

//String searchFilter = "(&(objectCategory=person)(memberOf=CN="+samAccountName+"))";

//String searchFilter = "(&(objectcategory=user)(memberof=CN="+samAccountName+",OU=Users,DC=new,DC=com))";

String searchBase = "DC=new,DC=com";

NamingEnumeration answer = ctx.search(searchBase, searchFilter, ontrols);
             List rolesList = new ArrayList();
            while(answer.hasMoreElements()){
                SearchResult sr = (SearchResult)answer.next(); 
```

...

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T13:40:32.947

我希望您必须递归搜索用户的 memberOf 属性列表。例如，如果用户从`ldapsearch`调用中获得以下 ldif 样式的结果：

```
cn: user1
memberOf: CN=group1,DC=foo,DC=example,DC=com
memberOf: CN=group2,DC=foo,DC=example,DC=com 
```

..然后您将需要递归查找`group1`并`group2`使用其他 ldap 搜索，等等这些组是成员的组。

我现在正在做类似的事情，但是在 perl 中并从 Active Directory 中获取所有组的所有成员的平面列表。AD 使用`objectClass: group`，而 OpenLDAP 倾向于使用`objectClass: groupOfUniqueNames`或可能`objectClass: posixGroup`，这取决于使用（unix-y 客户端的 posix 组，例如 Linux 机器，groupOfUniqueNames 组以获得更一般的信息。它完全取决于使用目录中信息的客户端）。

*编辑：在 AD 中，还应该有一个名为的属性`tokenGroups`，其中包含用户安全组的 SID，但这对我不起作用。我猜它是可选的，并且没有在我网站的 AD 服务器上启用。*

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-10-03T03:27:33.433

下面的代码用于查找用户所属的组列表。正在使用 Sun LDAP 实现

```
package pack;

import static javax.naming.directory.SearchControls.SUBTREE_SCOPE;

import java.util.ArrayList;
import java.util.Hashtable;
import java.util.Iterator;
import java.util.List;

import javax.naming.AuthenticationException;
import javax.naming.Context;
import javax.naming.NamingEnumeration;
import javax.naming.NamingException;
import javax.naming.directory.Attribute;
import javax.naming.directory.Attributes;
import javax.naming.directory.DirContext;
import javax.naming.directory.SearchControls;
import javax.naming.directory.SearchResult;

import org.acegisecurity.GrantedAuthority;
import org.acegisecurity.GrantedAuthorityImpl;

import com.sun.jndi.ldap.LdapCtxFactory;

class App4 
{

public static void main(String[] args) 
{

    String username = "userName";
    String password = "password";
    String serverName = "server";
    String domainName = "comp.BIZ";

    System.out.println("Authenticating " + username + "@" + domainName
            + " through " + serverName + "." + domainName);

    // bind by using the specified username/password
    Hashtable<String,String> props = new Hashtable<String,String>();
    String principalName = username + "@" + domainName;
    props.put(Context.SECURITY_PRINCIPAL, principalName);
    props.put(Context.SECURITY_CREDENTIALS, password);
    DirContext context;

    try {
        context = LdapCtxFactory.getLdapCtxInstance("ldap://" + serverName
                + "." + domainName + '/', props);
        System.out.println("Authentication succeeded!");

        // locate this user's record
        SearchControls controls = new SearchControls();
        controls.setSearchScope(SUBTREE_SCOPE);

        NamingEnumeration<SearchResult> renum = context.search(
                toDC(domainName), "(& (userPrincipalName=" + principalName
                        + ")(objectClass=user))", controls);

        if (!renum.hasMore()) 
        {
            System.out.println("Cannot locate user information for "
                    + username);
            System.exit(1);
        }
        SearchResult result = renum.next();

        List<GrantedAuthority> groups = new ArrayList<GrantedAuthority>();
        Attribute memberOf = result.getAttributes().get("memberOf");
        if (memberOf != null) 
        {// null if this user belongs to no group at
                                // all
            for (int i = 0; i < memberOf.size(); i++) 
            {
                Attributes atts = context.getAttributes(memberOf.get(i)
                        .toString(), new String[] { "CN" });
                Attribute att = atts.get("CN");
                groups.add(new GrantedAuthorityImpl(att.get().toString()));
            }
        }

        context.close();

        System.out.println();
        System.out.println("User belongs to: ");
        Iterator<GrantedAuthority> ig = groups.iterator();
        while (ig.hasNext()) 
        {
            System.out.println("   " + ig.next().toString());
        }

    } catch (AuthenticationException a) 
    {
        System.out.println("Authentication failed: " + a);
        System.exit(1);
    } catch (NamingException e) 
    {
        System.out
                .println("Failed to bind to LDAP / get account information: "
                        + e);
        System.exit(1);
    }
}

private static String toDC(String domainName) 
{
    StringBuilder buf = new StringBuilder();
    for (String token : domainName.split("\\.")) 
    {
        if (token.length() == 0)
            continue; // defensive check
        if (buf.length() > 0)
            buf.append(",");
        buf.append("DC=").append(token);
    }
    return buf.toString();
} 
```

}

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-10-10T15:13:47.370

字符串 searchFilter ="(&(objectClass=person)(samaccountname="+userName+"))"

我修改了 searchFilter 并且它有效。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2021-05-19T06:01:59.437

在 LDAP 中，一旦您建立了连接，我们就可以查询用户是否属于给定组，您可以使用 member 或 memberOf 属性进行查询。

```
Query for memberOf Attribute : 
filter used : (&(Group Member Attribute=Group DN)(objectClass=Group Object class))
Ex : (&(memberOf=CN=group,ou=qa_ou,dc=ppma,dc=org)(objectClass=group))

Using member Attribute : 
filter used : (&(Group Member Attribute=User DN)(objectClass=Group Object class))
Ex : (&(member=CN=user,ou=qa_ou,dc=ppma,dc=org)(objectClass=group)) 
```

但是您必须使用用户的 member 或 memberOf 属性列表递归搜索。例如，如果用户具有以下组层次结构：

cn: user1 memberOf: CN=group1,DC=foo,DC=example,DC=com memberOf: CN=group2,DC=foo,DC=example,DC=com

那么您将需要使用额外的 LDAP 搜索递归地查找 group1 和 group2，依此类推，以查找这些组所属的组。

下面是查询用户所属的所有嵌套组的示例代码：

```
 import java.util.ArrayList;
import java.util.HashMap;
import java.util.HashSet;
import java.util.Hashtable;
import java.util.Iterator;
import java.util.List;
import java.util.Map;
import java.util.Set;
import java.util.concurrent.CopyOnWriteArrayList;

import javax.naming.Context;
import javax.naming.NamingEnumeration;
import javax.naming.NamingException;
import javax.naming.directory.InitialDirContext;
import javax.naming.directory.SearchControls;
import javax.naming.directory.SearchResult;

public class MemberDemo {
    private static final String contextFactory = "com.sun.jndi.ldap.LdapCtxFactory";
    private static final String connectionURL = "ldap://10.224.243.133:389";
    private static final String connectionName = "CN=administrator,CN=users,DC=ppma,DC=org";
    private static final String connectionPassword = "Conleyqa12345";

    public static int nestLevel = 3;
    public static int level = 1;

    // Optional
    private static final String authentication = null;
    private static final String protocol = null;
    private static String userBase = "OU=qa_OU,DC=ppma,DC=org";

    public static void main(String[] args) throws NamingException {
        long start = System.currentTimeMillis();

        Hashtable<String, String> env = new Hashtable<String, String>();

        // Configure our directory context environment.

        env.put(Context.INITIAL_CONTEXT_FACTORY, contextFactory);
        env.put(Context.PROVIDER_URL, connectionURL);
        env.put(Context.SECURITY_PRINCIPAL, connectionName);
        env.put(Context.SECURITY_CREDENTIALS, connectionPassword);
        if (authentication != null)
            env.put(Context.SECURITY_AUTHENTICATION, authentication);
        if (protocol != null)
            env.put(Context.SECURITY_PROTOCOL, protocol);

        InitialDirContext context = new InitialDirContext(env);

        SearchControls constraints = new SearchControls();
        constraints.setSearchScope(SearchControls.SUBTREE_SCOPE);

        Set<String> traversedGroups = new HashSet<String>();
        Set<String> relatedGroups = new HashSet<String>();
        List<String> tempParentColl = new CopyOnWriteArrayList<String>();
        List<String> tempGroups = new ArrayList<String>();

        String loginUser = "CN=qa20Nest,OU=qa_OU,DC=ppma,DC=org";

        String filter = "(&(member=" + loginUser + ")(objectClass=group))";
        tempGroups = findNestedGroups(tempGroups, context, filter, loginUser, constraints,
                tempParentColl, traversedGroups, getUserName(loginUser));
        relatedGroups.addAll(tempGroups);

        System.out.println("Parent Groups :");

        for (String group : relatedGroups) {
            System.out.println(group);
        }
        long end = System.currentTimeMillis();
        long elapsedTime = end - start;
        System.out.println("Total time taken in sec : " + elapsedTime / 1000);

    }

    @SuppressWarnings("rawtypes")
    public static List<String> findNestedGroups(List<String> tempGrpRelations, InitialDirContext context, String filter,
            String groupName, SearchControls constraints, List<String> tempParentColl, Set<String> traversedGrp,
            String groupIdentifier) {
        NamingEnumeration results;
        try {
            traversedGrp.add(groupName);
            results = context.search(userBase, filter, constraints);

            // Fail if no entries found
            if (results == null || !results.hasMore()) {
                System.out.println("No result found for :" + groupName);
                if (tempParentColl.isEmpty()) {
                    return tempGrpRelations;
                } else {
                    tempParentColl.remove(groupName);
                }
            }

            while (results.hasMore()) {
                SearchResult result = (SearchResult) results.next();
                System.out.println("DN - " + result.getNameInNamespace());
                tempParentColl.add(result.getNameInNamespace());
                tempGrpRelations.add(result.getNameInNamespace());
            }

            Iterator<String> itr = tempParentColl.iterator();
            while (itr.hasNext()) {
                String groupDn = itr.next();
                String nfilter = "(&(member=" + groupDn + ")(objectClass=group))";
                tempParentColl.remove(groupDn);
                if (!traversedGrp.contains(groupDn)) {
                    findNestedGroups(tempGrpRelations, context, nfilter, groupDn, constraints, tempParentColl,
                            traversedGrp, getUserName(groupDn));
                }
            }

        } catch (NamingException e) {
            e.printStackTrace();
        }
        return tempGrpRelations;
    }

    public static String getUserName(String cnName) {

        String name = cnName.substring(cnName.indexOf("CN=")).split(",")[0].split("=")[1];
        return name;
    }
} 
```

# ajax - 作业没有问题分配给多个用户

> ID：11260705
> 
> 赞同：0
> 
> 时间：2012-06-29T11:09:10.167
> 
> 标签：ajax, database, codeigniter, unique

让我详细描述一下这个问题。
我有一个名为导出的表。其中有一个字段 job_no。
当用户来填写此查询时

```
select  max(job_no) as Last_Job from jobs 
```

结果是 A005，它是表中的最后一个作业编号。
在 PHP 端，我在用户要填写和提交的输入表单中显示 A006。
表单中的 job_no 字段是只读的，用户不能更改它。
现在问题来了，如果多个用户同时填写表单 A006 被显示给每个用户，并且当他们提交表单时，A006 与他们的记录一起提交。
这是重复的，不是必需的。
现在应该有什么解决方案来防止这种情况。我有三个解决方案，但我想知道是否有更好的解决方案。

解决方案 1
我将作业编号插入带有用户 ID 的 user_entry 表单并将其显示给用户。
然后当用户提交表单时，我会更新它。
Draback 似乎如果用户取消表单提交，那么 job_no 就没用了。

解决方案 2
我向每个用户显示作业编号，并在提交时检查作业编号，增加它并告诉用户已分配作业编号，因此他将被分配下一个。
如果我不向用户显示提示消息，他会认为他的工作编号是 A006，而在数据库中它将是 A007。

此外，如果我使用 setInterval 运行 ajax 请求，这将是服务器的负载，并且仍然有重复的机会。

这是向用户显示作业编号所必需的。那么在这种情况下有什么更好的方法。或者这个问题有什么替代方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T11:34:39.577

为什么在创建表单之前向用户显示 A006？如果你可以使用解决方案二，我看不出这怎么可能是一个“要求”，它说你无论如何都可以改变它。

你为什么不让他们填写表格，当他们提交时说“谢谢 - 工作 A006 已创建”。简单易行

# r - R中的广义逆伽马分布

> ID：11260707
> 
> 赞同：4
> 
> 时间：2012-06-29T11:09:21.580
> 
> 标签：r, distribution

Mathematica 有一个四参数广义逆伽马分布：

[http://reference.wolfram.com/mathematica/ref/InverseGammaDistribution.html](http://reference.wolfram.com/mathematica/ref/InverseGammaDistribution.html)

并在该页面上提供其 PDF。有没有人在 R 中实现了密度、分布、分位数和采样函数？

我确实做了一个快速入门（PDF 只是该页面上翻译成 R 的方程式），但如果它已经完成，我不会费心实现 CDF 和分位数函数。

是否存在用于计算给定 PDF 的任何分布的 CDF（通过 PDF 积分）和分位数（通过 CDF 反转）的通用函数？

[注意这*不是*广义逆高斯]

另请注意 Mathematica 页面上的“属性和关系”下拉菜单，这似乎暗示它不是任何特殊情况或任何事物的概括（除了逆伽马）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-18T08:05:25.997

我开始了一个包来实现这个：

[https://github.com/barryrowlingson/geninvgamma](https://github.com/barryrowlingson/geninvgamma)

它只使用简单的反演和密度积分，所以没什么聪明的。目前，分布中的随机样本是通过生成 U(0,1) 并获取分位数来完成的，这似乎不是很有效或很准确。

无论如何，它是一个开始。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-29T14:44:44.377

根据[这个小插图](http://cran.r-project.org/web/packages/ghyp/vignettes/Generalized_Hyperbolic_Distribution.pdf)`ghyp`（附录 C2），逆伽马分布是由包实现的广义双曲线分布的特例。

# java - Eclipse Tomcat - 上下文环境变量

> ID：11260709
> 
> 赞同：0
> 
> 时间：2012-06-29T11:09:34.820
> 
> 标签：java, eclipse, tomcat, maven

我使用eclipse + tomcat + maven。

当我将项目部署到 Tomcat 时，以下条目会添加到 tomcat 配置的 server.xml 中：

```
<Context docBase="C:\ws_eclipse\ws\.metadata\.plugins\org.eclipse.wst.server.core\tmp1\wtpwebapps\MyApp" path="/myApp" reloadable="true" source="org.eclipse.jst.jee.server:MyApp"/> 
```

我真正想要的是添加一个环境变量，以便上下文如下所示：

```
 <Context docBase="C:\ws_eclipse\ws\.metadata\.plugins\org.eclipse.wst.server.core\tmp1\wtpwebapps\MyApp" path="/myApp" reloadable="true" source="org.eclipse.jst.jee.server:MyApp">
       <Environment name="config.file" type="java.lang.String" value="C:/test/config.xml" /> 
</Context> 
```

我尝试在 Eclipse 运行配置中将其添加为环境变量，但是当我在 tomcat 上部署应用程序时，上下文不包含环境变量。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-29T11:30:56.130

您可以在webapp的*META-INF*目录中添加一个*context.xml*文件。该文件的内容可能如下所示：

 *```
<Context>
  <Parameter name="config.file" value="C:/test/config.xml"/>
</Context> 
```

`<context-param/>`这与在 web.xml中定义 a 具有相同的效果。用于`ServletContext.getInitParameter("config.file")`将其值作为字符串检索。

您也可以使用`Environment`，但这可能有点过分（我认为您只需要一个字符串）。

见[http://tomcat.apache.org/tomcat-6.0-doc/config/context.html](http://tomcat.apache.org/tomcat-6.0-doc/config/context.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-29T11:23:31.413

在应用程序启动配置中设置它是最好的方法，您可能想要验证您在此处所做的 -[创建 Java 应用程序启动配置](http://help.eclipse.org/galileo/index.jsp?topic=/org.eclipse.jdt.doc.user/tasks/tasks-java-local-configuration.htm)

高温高压*

# seo - 防止谷歌索引我的分页系统

> ID：11260712
> 
> 赞同：-1
> 
> 时间：2012-06-29T11:09:40.357
> 
> 标签：seo, search-engine, web-crawler, robots.txt

我想知道是否有一种方法可以在我的 robots.txt 中包含一条阻止 Google 索引我网站中包含特定文本的任何 URL 的行。

我有不同的部分，所有部分都包含不同的页面。我不希望谷歌索引 page2、page3 等，只是主页。

我的网址结构如下：

```
http://www.domain.com/section
http://www.domain.com/section/page/2
http://www.domain.com/section/article_name 
```

有没有办法在我的 robots.txt 文件中放入不索引任何包含以下内容的 URL：

```
/page/ 
```

提前谢谢大家！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T11:13:04.057

```
User-agent: Googlebot  
Disallow: http://www.domain.com/section/* 
```

或根据您的要求：

```
User-agent: Googlebot 
Disallow: http://www.domain.com/section/page/* 
```

您也可以使用[Google 网站管理员工具](https://www.google.com/webmasters/tools/home?hl=en)而不是 robots.txt 文件

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-06-27T15:43:30.060

1.  转到 GWT / 抓取 / URL 参数
2.  添加参数：页面
3.  设置为：无 URL

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-29T11:15:36.497

可以直接使用 Disallow: /page

# android - 如何使用 JsonArray 和 JsonObject 创建 Json

> ID：11260715
> 
> 赞同：4
> 
> 时间：2012-06-29T11:09:51.213
> 
> 标签：android, json

我想创建一个 Json 结构，它实际上是 JsonObject 中的 JsonArray。样本结构为：

1.

```
{
“req”: [
{
  “ctrlId”:”txt1”
},
{
  “ctrlId”:”txt2”
}
]
} 
```

2.

```
{
“req”: [
{
  “ctrlId”:”txt1”,
  “val” : “val1”
},
{
  “ctrlId”:”txt2”,
  “val” : “val2”
}
]
} 
```

但我无法得到它..任何帮助表示赞赏..

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-06-29T11:13:31.477

```
 JSONObject obj = new JSONObject();
    JSONArray req = new JSONArray();

    JSONObject reqObj = new JSONObject()
    reqObj.put( "ctrlId", "txt1" );
    req.put( reqObj );
    reqObj = new JSONObject();
    reqObj.put( "ctrlId", "txt2" );
    req.put( reqObj );

    obj.put( "req", req ); 
```

最后的对象是`obj`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-29T11:19:21.913

我有这个数组

```
{
"result": "success",
"countryCodeList":
[
  {"countryCode":"00","countryName":"World Wide"},
  {"countryCode":"kr","countryName":"Korea"}
] 
} 
```

下面我正在获取国家/地区详细信息，因此我使用**了 valArray.getJSONArray(1)**

您可以使用**valArray.getJSONArray(0)**

```
JSONObject json = new JSONObject(jsonstring);
JSONArray nameArray = json.names();
JSONArray valArray = json.toJSONArray(nameArray);

JSONArray valArray1 = valArray.getJSONArray(1);

valArray1.toString().replace("[", "");
valArray1.toString().replace("]", "");

int len = valArray1.length();

for (int i = 0; i < valArray1.length(); i++) {

 Country country = new Country();
 JSONObject arr = valArray1.getJSONObject(i);
 country.setCountryCode(arr.getString("countryCode"));                        
 country.setCountryName(arr.getString("countryName"));
 arrCountries.add(country);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-29T11:21:31.423

您可以使用[GSON](http://code.google.com/p/google-gson/)进行此解析。它会让你的生活变得简单。

你可以看看我在这个[SO question中的回答](https://stackoverflow.com/questions/11239304/how-to-turn-json-string-into-table/11240277#11240277)

# maven-3 - 不可解析的父 POM：构建 Maven 3 项目站点时

> ID：11260717
> 
> 赞同：16
> 
> 时间：2012-06-29T11:09:55.927
> 
> 标签：maven-3, maven-site-plugin

当我尝试构建站点时，我目前面临 Maven 3 的以下问题。我会感谢你在这方面的帮助。

*mvn 清洁网站*

```
..........
[INFO] Reactor Summary:
[INFO] 
[INFO] Project A ......................................... SUCCESS [15.383s]
[INFO] Project B ......................................... SUCCESS [2.232s]
[INFO] My Site ........................................... FAILURE [0.105s]
[INFO] ------------------------------------------------------------------------
[INFO] BUILD FAILURE
[INFO] ------------------------------------------------------------------------
[INFO] Total time: 24.769s
[INFO] Finished at: Fri Jun 29 14:26:04 AMT 2012
[INFO] Final Memory: 18M/150M
[INFO] ------------------------------------------------------------------------
[ERROR] Failed to execute goal org.apache.maven.plugins:maven-site-plugin:3.1:site (default-site) on project site: SiteToolException: Unable to read local module-POM: 1 problem was encountered while building the effective model for my.com:projA:0.1-SNAPSHOT
[ERROR] [FATAL] Non-resolvable parent POM: Could not find artifact my.com:parent-pom:pom:0.1-SNAPSHOT and 'parent.relativePath' points at no local POM @ line 12, column 13
[ERROR] for project my.com:projA:0.1-SNAPSHOT
............. 
```

**首先是配置：**

```
Apache Maven 3.0.4 (r1232337; 2012-01-17 12:44:56+0400)
Java version: 1.7.0_04, vendor: Oracle Corporation
Default locale: en_US, platform encoding: UTF-8
OS name: "mac os x", version: "10.7.4", arch: "x86_64", family: "mac"
Nexus repository: 2.0.6 
```

**父 POM：**

```
<modelVersion>4.0.0</modelVersion>

<name>Parent POM</name>
<groupId>my.com</groupId>
<artifactId>parent-pom</artifactId>
<version>0.1-SNAPSHOT</version>
<packaging>pom</packaging>

<build>                         
    <pluginManagement>
        <plugins>
            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-site-plugin</artifactId>
                <version>3.1</version>  
                <configuration>
                    <reportPlugins>
                        <plugin>
                            <groupId>org.apache.maven.plugins</groupId>
                            <artifactId>maven-project-info-reports-plugin</artifactId>
                            <version>2.4</version>
                        </plugin>            
                    </reportPlugins>
                </configuration>
            </plugin>              
        </plugins>
    </pluginManagement>      
</build> 
```

**聚合项目pom：**

```
<modelVersion>4.0.0</modelVersion>

<name>My Site</name>
<groupId>my.com</groupId>
<artifactId>site</artifactId>
<version>0.1-SNAPSHOT</version>
<packaging>pom</packaging>

<parent>
    <groupId>my.com</groupId>
    <artifactId>parent-pom</artifactId>
    <version>0.1-SNAPSHOT</version>
    <relativePath/>
</parent>

<modules>

    <module>projA</module>
    <module>projB</module>

</modules> 
```

**项目A的pom：**

```
<modelVersion>4.0.0</modelVersion>

<name>Project A</name>
<groupId>my.com</groupId>
<artifactId>projA</artifactId>
<version>0.1-SNAPSHOT</version>

<parent>
    <groupId>my.com</groupId>
    <artifactId>parent-pom</artifactId>
    <version>0.1-SNAPSHOT</version>
    <relativePath/>        
</parent> 
```

**项目 B 的 pom：**

4.0.0

```
<name>Project B</name>
<groupId>my.com</groupId>
<artifactId>projB</artifactId>
<version>0.1-SNAPSHOT</version>

<parent>
    <groupId>my.com</groupId>
    <artifactId>parent-pom</artifactId>
    <version>0.1-SNAPSHOT</version>
    <relativePath/>        
</parent> 
```

**这是我运行“mvn clean site”的文件夹的结构：**

```
./pom.xml  (aggregation project)
./projA/pom.xml (Project A)
./projB/pom.xml (Project B) 
```

在执行`mvn clean site`以下命令之前，parent-pom 已成功部署到 NEXUS 存储库`mvn deploy -DaltDeploymentRepository=snapshots::default::http://MyServer:8081/nexus/content/repositories/snapshots`

**最后是问题本身：**

当我`mvn clean site`在成功构建 parent-pom 站点部署后立即运行时。如果我从本地存储库（~/.m2/repository）中删除文件夹（及其内容）“我的”（它包含父 pom），然后尝试构建站点，`mvn clean site`我收到开头描述的错误. 实际上 Maven 从 NEXUS 下载 parent-pom。我比较了下载的文件和部署后生成的文件，发现很少有文件丢失，例如“0.1-SNAPSHOT”文件夹附近的 maven-metadata-local.xml。

因此，当我尝试从 Jenkins 运行站点构建作业时，我收到了上述错误，因为父 pom 不是从运行 Jenkins 的机器上部署的。

我怎么能想出这个问题或我做错了什么？

谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-07-30T12:48:33.023

[正如这个答案](https://stackoverflow.com/a/15371508/208576 "这个答案")所指出的，站点插件中有[一个错误](http://jira.codehaus.org/browse/MSITE-640)，它只在它认为是 Maven 中心的地方寻找依赖项。

我在 Maven 3.0.4 和 site-plugin 3.3 中遇到了同样的问题。我也有一个问题，它可以在我运行 Windows 7 的开发机器中运行，但不能在运行 Debian 上的 Jenkins 的 CI-Server 中运行。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-26T20:51:54.167

问题不在您的 pom 文件中。当我构建你的聚合 pom 时，Maven 从远程 repo 正常下载了 parent-pom（在我从本地 repo 中删除之后）。

尝试这个：

```
mvn -U clean install site dependency:purge-local-repository 
```

此外，您可以进行一些清理：

*   `<relativePath/>`从所有这些中删除
*   从 projA 和 ProjB中删除`<version>0.1-SNAPSHOT</version>`和`<groupId>my.com</groupId>`（它们是从父级继承的）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-01-25T23:18:38.540

我遇到了同样的问题...在我的开发人员 MacBook 上工作，但在`mvn site`使用`maven-site-plugin:3.7`. 我没有测试降级站点插件。

我找到了另一个解决方案。我的问题是`maven-project-info-reports-plugin`特别的目标`dependencies`。如果我跳过`-Dmpir.skip=true`我的网站生成的目标（没有依赖项:(报告）。

# php - 如何在 preg_replace（html 语法）中设置变量？

> ID：11260719
> 
> 赞同：1
> 
> 时间：2012-06-29T11:09:59.743
> 
> 标签：php, preg-replace

```
$con = preg_replace('#(<input type="text"[^>]+?>)#', '<input type="hidden" name="dog" value="$a">${1}', $content); 
```

如何将值设置为变量？这我得到的不正确（$a，语法？）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T11:14:31.887

而不是 ${1}，我认为它应该只是 1 美元。这就是我一直使用的，而且似乎有效。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-29T11:23:01.193

你需要 $a 还是变量 $a 的内容

```
'<input type="hidden" name="dog" value="'.$a.'">${1}' 
```

# ipad - performSelector:withObject:afterDelay: 不在模态视图控制器上工作

> ID：11260721
> 
> 赞同：0
> 
> 时间：2012-06-29T11:10:05.033
> 
> 标签：ipad, ios5, delegates, modalviewcontroller, performselector

我有一个模式视图控制器出现，检查 Internet 上的服务，然后在完成后自行关闭。笔尖包含一个活动指示器和一个标签，用于通知用户正在发生的事情。

更新完成后，标签变为“更新完成”，然后关闭视图控制器。但是，我希望它将关闭延迟几秒钟，让用户有机会在文本消失之前看到它。所以我这样做了：

```
#pragma mark - AssetLoaderServiceDelegate

- (void)assetLoaderServiceDidFinishLoading:(AssetLoaderService *)service
{
    [self.spinner stopAnimating];
    self.infoLabel.text = @"Update complete";
    [self performSelector:@selector(dismissUpdater) withObject:nil afterDelay:2.0];
}

- (void)dismissUpdater
{
    [self dismissModalViewControllerAnimated:YES];
} 
```

但是由于某种原因，选择器永远不会被调用。我也尝试过在模式下运行它`NSRunLoopCommonModes`，但这也不起作用。

我一定是做错了什么，但我看不到是什么...

编辑：委托回调实际上发生在 中`NSOperationQueue`，这可能意味着它在将消息发送回视图控制器时不在同一个线程上？所以我尝试了

```
[self performSelector:@selector(downloadQueueComplete) withObject:nil afterDelay:0.0 inModes:[NSArray arrayWithObject:NSRunLoopCommonModes]]; 
```

其次是

```
- (void)downloadQueueComplete
{
    [delegate assetLoaderServiceDidFinishLoading:self];
} 
```

但是 performSelector 似乎也没有在这里工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T11:25:24.017

跟进您对线程问题的建议，您会尝试：

```
[self performSelectorOnMainThread:@selector(downloadQueueComplete) withObject:nil waitUntilDone:YES]]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-29T11:25:53.387

排序！在 AssetLoaderService 中，我必须在主线程上执行选择器：

```
 [self performSelectorOnMainThread:@selector(downloadQueueComplete) withObject:nil waitUntilDone:YES]; 
```

之后，以下所有调用都在正确的线程上。:)

# ios - 适用于 IOS 的 Chrome 无法在 iframe 中正确打开新窗口

> ID：11260725
> 
> 赞同：4
> 
> 时间：2012-06-29T11:10:30.227
> 
> 标签：ios, google-chrome

我正在尝试在 iframe 内的 Chrome for iOS 的新窗口中打开链接，但 Chrome for iOS 不会在新窗口中打开链接，而是浏览器在同一窗口中而不是在新窗口中打开链接. 弹出窗口也是如此。很奇怪。

例子：

# 测试.html

```
<iframe src="iframe.html" width="500" height="250"></iframe> 
```

# iframe.html

```
<SCRIPT type="text/javascript">
function open_popup()
{
    window.open('http://www.google.com', '_blank', '');
}
</SCRIPT>

<a href="http://www.google.com" target="_blank">New window</a><br>
<a href="#" onclick="open_popup();">New popup</a> 
```

直接浏览 iframe.html 但浏览 test.html 时，链接会在新窗口中打开

这是设计使然，还是 iOS 版 Chrome 中的错误？如果它是一个错误，有人知道如何报告这个错误吗？

（iOS 版 Safari 在浏览 test.html 时会在新窗口中打开链接）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-02T07:02:49.330

这是 iOS 版 Chrome 中的一个（已知）错误。如果您想报告它以便在修复时收到通知，请[提交错误](http://new.crbug.com/)并从“模板”菜单中选择“iOS 问题”。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-20T11:29:38.540

与其（再次）提交此错误，不如为现有问题投票：[https ://code.google.com/p/chromium/issues/detail?id=135498](https://code.google.com/p/chromium/issues/detail?id=135498)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-10-04T18:33:56.700

正如 Aaron 所说，这是 Chrome for iOS 上的一个已知问题：

[https://code.google.com/p/chromium/issues/detail?id=135362](https://code.google.com/p/chromium/issues/detail?id=135362)

您可以在 iframe 中使用 window.top.open() 轻松解决此问题，但如果您有跨域限制或需要在 iframe 中正确处理 window.opener，则需要另一种方法*。

*如果它们是异步的，另一种方法可能会陷入 Popup Blocker 问题。

# python - 多个字符串在python中按位置替换

> ID：11260730
> 
> 赞同：4
> 
> 时间：2012-06-29T11:10:38.627
> 
> 标签：python, string, replace, position

我需要用增强字符串替换字符串中的字符串。

我的问题是，每次替换 info 中字符串的位置并更改原始字符串：如何以 pythonic 方式更新它？

```
str = 'If you do not know where you are going, any road will get you there.'

info = {'you': [(3, 3), (25, 3)], 'get you': [(54, 7)], 'know': [(14, 4)]}

# replace 'you' from info with '<b>you</b>' and 'know' with '<i>know</i>'
# results in

str = 'If <b>you</b> do not <i>know</i> where <b>you</b> are going, any road will get you there.'

info = {'<b>you</b>': [(3, 10), (25, 10)], 'get you': [(54, 7)], '<i>know</i>': [(21, 11)]} 
```

到目前为止我的解决方案：

```
str = 'If you do not know where you are going, any road will get you there.'
info = {'you': [(3, 3), (25, 3)], 'get you': [(54, 7)], 'know': [(14, 4)]}

replacer = [('you', '<b>you</b>'), ('know', '<i>know</i>')]

for s, s2 in replacer:
    print "replacing %s to %s and update position info dict" % (s, s2)

    old_s_pos = info[s]
    diff = len(s2) - len(s)

    new_key_pos = [(old_s_pos[0][0], old_s_pos[0][1] + diff)]

    old_s_pos = old_s_pos[1:]
    if old_s_pos:
        next_old_s_pos_start = old_s_pos[0][0]
    else:
        next_old_s_pos_start = None

    del info[s]

    for key, positions in info.iteritems():

        new_positions = []                    
        for i, (x,y) in enumerate(positions):

            if x < next_old_key_pos_start:
                new_positions.append((x + diff, y))
            else:
                new_positions.append((x, y))

                if next_old_s_pos_start is not None:
                    # update old_s_pos at first pair
                    new_key_pos.append((old_key_pos[0][0], old_s_pos[0][1] + diff))
                    old_s_pos = old_s_pos[1:]
                    if old_s_pos:
                        next_old_s_pos_start = old_s_pos[0][0]

        info[key] = new_positions
    info[s2] = new_key_pos

    print info 
```

亲切的问候，马蒂亚斯

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-29T13:14:48.040

这是基于您应该只替换向后遍历字符串的想法。首先，我必须稍微修改一下您的信息和替换结构：

```
str = 'If you do not know where you are going, any road will get you there.'
info = {'you': [(3, 3), (25, 3)], 'get you': [(54, 7)], 'know': [(14, 4)]}
replacer = [('you', '<b>you</b>'), ('know', '<i>know</i>')]

info2 = {}
replacer2 = {}

for original, replacement in replacer:
    replacer2[original] = replacement

for k, v in info.items():
    for start, length in v:
        replacement = None
        if k in replacer2:
            replacement = replacer2[k]
        info2[start] = (k, length, replacement)

for position in sorted(info2.iterkeys(), reverse=True):
    original, length, replacement = info2[position]
    if replacement is not None:
        str[:position] + replacement + str[position + length]

print str 
```

# iphone - 我实现了这个声音，但它也在我的其他层中

> ID：11260734
> 
> 赞同：0
> 
> 时间：2012-06-29T11:11:04.807
> 
> 标签：iphone, ios5, audio, cocos2d-iphone

切换按钮出现在我的所有其他图层中，我想知道是否有办法只出现在某个图层中。

.h 文件

```
 UISwitch *muteSwitch; 
```

.m 文件

```
 muteSwitch = [[ UISwitch alloc ] initWithFrame: CGRectMake(0, 290, 0, 0) ];
       muteSwitch.on = YES;
    [muteSwitch addTarget:self action:@selector(soundOnOrOff:)   forControlEvents:UIControlEventValueChanged];
    [[[CCDirector sharedDirector] openGLView] addSubview:muteSwitch];
    [muteSwitch release];            

  - (void)soundOnOrOff:(id)sender
  {

     if ([[SimpleAudioEngine sharedEngine] mute]) {
    // This will unmute the sound
    [[SimpleAudioEngine sharedEngine] setMute:0];
    }
else {
    //This will mute the sound
    [[SimpleAudioEngine sharedEngine] setMute:1];
}

     } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T13:31:37.670

这是很正常的，因为您将滑块添加到 GLView 的顶部。因此，即使您更改场景，滑块也会停留在此处。如果要删除它，只需`[muteSwitch removeFromSuperview]`在更改场景时调用 。

我应该使用 CCControlExtension 中的[CCControlSwitch](https://github.com/YannickL/CCControlExtension)，因为它是使用 Cocos2D 构建的，并且可以与任何其他 Cocos2D 组件一样工作。此外，您可以根据需要自定义它。

# javascript - SEO - 使用 Javascript 幻灯片复制内容

> ID：11260737
> 
> 赞同：-1
> 
> 时间：2012-06-29T11:11:23.597
> 
> 标签：javascript, html, seo

我有一个像这样工作的滑块：

*   滑动到某个项目时，URL 会使用[HTML5 History API更改](https://css-tricks.com/using-the-html5-history-api/)
*   如果用户直接输入项目的 URL（例如“ */slide-5* ”），滑块会显示相应的幻灯片。
*   滑块的导航由-`<a>`元素及其各自的-`href`属性（例如`href="slide-5"`）组成。

这很好用，即使禁用了 JavaScript，用户也可以看到每张幻灯片的内容。

我的问题是：搜索引擎将抓取所有链接。但基本上所有这些 URL 都具有相同的内容。这会对页面排名产生负面影响吗？如果是这样，这个问题的最佳解决方案是什么？

* * *

如果这确实影响了页面排名，这是否是一个有效的解决方案：

*   页面上只有请求的幻灯片内容。
*   下一张请求的幻灯片的内容通过 XHR 加载。

* * *

^(对于当前访问者：2012 年的这篇文章现在已经很老了。此时历史 API 没有很好的浏览器支持，也不清楚搜索引擎如何处理 JavaScript。这在过去几年发生了巨大变化，您可以找到涵盖手头主题的资源。不过，这是非常基于意见的。)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T13:33:03.787

它可能会影响您的 SEO.. 它可能不会。但可以肯定的是；看看规范化。

[http://support.google.com/webmasters/bin/answer.py?hl=en&answer=139066#2](http://support.google.com/webmasters/bin/answer.py?hl=en&answer=139066#2)

# java - 我怎样才能在 Java 中实现这种可扩展的布局？灵活的 BoxLayout 等

> ID：11260738
> 
> 赞同：4
> 
> 时间：2012-06-29T11:11:29.827
> 
> 标签：java, swing, layout-manager, gridbaglayout, boxlayout

我希望能够拥有三个 JPanel p1 p2 和 p3，并让它们像这样布置：

![布局](../Images/1d55158e9a6e9bf531d6eb13728680ae.png)
我一直在玩 FlowLayout、BoxLayout 等，但我不确定我是否朝着正确的方向前进。我对Java很陌生，所以如果我很诚实的话，我不知道会发生什么。

我喜欢 BoxLayout 的工作方式，调整面板的大小，但我希望能够给它某种宽度属性。

我没有为此使用视觉设计器，这是我目前的窗口代码：

```
private void initialize() {
    Dimension dimensions = Toolkit.getDefaultToolkit().getScreenSize();

    frame = new JFrame();
    frame.setLayout(new GridLayout(1, 3));
    frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    frame.setBounds(dimensions.width / 2 - WINDOW_WIDTH / 2,
            dimensions.height / 2 - WINDOW_HEIGHT / 2, 
            WINDOW_WIDTH, WINDOW_HEIGHT);

    JPanel p1 = new JPanel(new BorderLayout());
    p1.setBackground(Color.red);

    JPanel p2 = new JPanel(new BorderLayout());
    p2.setBackground(Color.black);  

    JPanel p3 = new JPanel(new BorderLayout());
    p3.setBackground(Color.blue);       

    frame.add(p2);

    frame.add(p1);  
    frame.add(p3);
} 
```

任何指针表示赞赏！

编辑：感谢 mKorbel，我已经设法让它按我想要的方式工作。右栏的布局与我打算做的不完全一样，但我实际上改变了主意并决定保留其他布局。

![面板窗口](../Images/6c7766599185a3cca81d5ea8ea28e82b.png)
编码：

```
import java.awt.*;
import javax.swing.*;

public class PanelWindow extends JFrame {

    private static final long serialVersionUID = 1L;
    private static final int WINDOW_HEIGHT = 600;
    private static final int WINDOW_WIDTH = 800;
    private JPanel p1, p2, p3;

    public static void main(String[] args) {
        javax.swing.SwingUtilities.invokeLater(new Runnable() {
            public void run() {
                PanelWindow panelWindow = new PanelWindow(); 
            }
        });
    }

    public PanelWindow() {
        initialize();
    }

    private void initialize() {
        setLayout(new GridBagLayout());
        GridBagConstraints gbc = new GridBagConstraints();

        p1 = new JPanel();
        p1.setBackground(Color.red);
        p2 = new JPanel();
        p2.setBackground(Color.green);
        p3 = new JPanel();
        p3.setBackground(Color.blue);

        gbc.gridx = gbc.gridy = 0;
        gbc.gridwidth = gbc.gridheight = 1;
        gbc.fill = GridBagConstraints.BOTH;
        gbc.anchor = GridBagConstraints.NORTHWEST;
        gbc.weightx = gbc.weighty = 97;
        gbc.insets = new Insets(2, 2, 2, 2);
        add(p1, gbc);

        gbc.gridy = 1;
        gbc.weightx = gbc.weighty = 3;
        gbc.insets = new Insets(2, 2, 2, 2);
        add(p2, gbc);

        gbc.gridx = 1;
        gbc.gridy = 0;
        gbc.gridwidth = 1;
        gbc.gridheight = 2;
        gbc.weightx = 20;
        gbc.insets = new Insets(2, 2, 2, 2);
        add(p3, gbc);

        pack();
        setVisible(true);
        setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

        Dimension dimensions = Toolkit.getDefaultToolkit().getScreenSize();
        setBounds(dimensions.width / 2 - WINDOW_WIDTH / 2,
            dimensions.height / 2 - WINDOW_HEIGHT / 2, 
            WINDOW_WIDTH, WINDOW_HEIGHT);

        setTitle("Panel Window");
    }
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-29T11:40:11.497

不是我最喜欢的[LayoutManager](http://docs.oracle.com/javase/tutorial/uiswing/layout/visual.html)，例如使用[GridBagLayout](http://docs.oracle.com/javase/tutorial/uiswing/layout/gridbag.html)，最简单的可能是使用[MigLayout](http://www.miglayout.com/)，也许......

![在此处输入图像描述](../Images/df2325b51b285ee1be7ab229e5b66776.png)![在此处输入图像描述](../Images/00f4c954fb945da238e837b63c7efd46.png)

![在此处输入图像描述](../Images/9cf04a6d588d2adeb4ead342032bb015.png)

```
import java.awt.*;
import javax.swing.*;
import javax.swing.border.*;

public class BorderPanels extends JFrame {

    private static final long serialVersionUID = 1L;

    public BorderPanels() {
        setLayout(new GridBagLayout());// set LayoutManager
        GridBagConstraints gbc = new GridBagConstraints();
        JPanel panel1 = new JPanel();
        Border eBorder = BorderFactory.createEtchedBorder();

        panel1.setBorder(BorderFactory.createTitledBorder(eBorder, "70pct"));
        gbc.gridx = gbc.gridy = 0;
        gbc.gridwidth = gbc.gridheight = 1;
        gbc.fill = GridBagConstraints.BOTH;
        gbc.anchor = GridBagConstraints.NORTHWEST;
        gbc.weightx = gbc.weighty = 70;
        add(panel1, gbc); // add compoenet to the COntentPane

        JPanel panel2 = new JPanel();
        panel2.setBorder(BorderFactory.createTitledBorder(eBorder, "30pct"));
        gbc.gridy = 1;
        gbc.weightx = gbc.weighty = 30;
        gbc.insets = new Insets(2, 2, 2, 2);
        add(panel2, gbc); // add component to the COntentPane

        JPanel panel3 = new JPanel();
        panel3.setBorder(BorderFactory.createTitledBorder(eBorder, "20pct"));
        gbc.gridx =1;
        gbc.gridy = 0;
        gbc.gridwidth = /*gbc.gridheight = */1;
        gbc.gridheight = 2;
        gbc.weightx = /*gbc.weighty = */20;
        gbc.insets = new Insets(2, 2, 2, 2);
        add(panel3, gbc);

        setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE); // important
        pack();
        setVisible(true); // important
    }

    public static void main(String[] args) {
        javax.swing.SwingUtilities.invokeLater(new Runnable() { // important

            public void run() {
                BorderPanels borderPanels = new BorderPanels();
            }
        });
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-29T13:40:44.157

一个词：[MigLayout](http://www.miglayout.com/)。如您所见，使用标准布局管理器是可能的。但我可以向你保证，使用 MigLayout 布局代码将减少到 4 行...（尽管进入 MigLayout 需要一些时间，因为它的工作方式与通常的布局管理器有点不同）。

# ios - 使用 Xcode Instruments 从内存地址打印对象

> ID：11260741
> 
> 赞同：1
> 
> 时间：2012-06-29T11:11:37.803
> 
> 标签：ios, xcode, memory-leaks, instruments

是否有可能获得有关仪器中泄漏对象的更有意义的信息？目前 Instruments 会告诉我类型 ( `NSArray`) 和内存地址 ( `0x123456`)。通常，如果我使用 LLDB 进行调试，我会做一个`po 0x123456`以获取有关对象实例的更多信息。Instruments 中是否有任何等价物，还是我以错误的方式处理这个问题？任何建议都会非常受欢迎！

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-06-29T11:17:10.603

在泄漏，调用树中，您可以看到所有泄漏，双击其中任何一个将向您显示正在生成它的代码段，它还会在它认为正在泄漏的行上添加一个百分比

您还可以在代码中添加 NSLog，并在仪器中导航到控制台视图以查看日志

# ruby - 最顶级的 ruby 1.8.7 和 1.9.1

> ID：11260743
> 
> 赞同：-3
> 
> 时间：2012-06-29T11:11:42.790
> 
> 标签：ruby

这是我的面试题。

ruby 1.8.7 和 ruby​​ 1.9.1 哪一个是最顶级的？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-29T11:35:24.417

答案是`Object`1.8 和`BasicObject`1.9。使用`ancestors`将是您自己找出这一点的一种简单方法：

```
1.class.ancestors.last
#=> BasicObject 
```

# java - 科学计算器的算法和提示

> ID：11260746
> 
> 赞同：1
> 
> 时间：2012-06-29T11:12:29.393
> 
> 标签：java, swing, calculator

我有一个使用 Java Swing 的科学计算器项目。但是，我最终计算错误。示例：如果按下按钮：

1 然后 + 然后 2 然后 * 然后 3 答案是 9，而不是 7。

你能给我一个提示，我必须使用什么类？以及如何让它正确答案的算法？

谢谢

```
class Calculator{
    public static void main(String[] args){
        EventQueue.invokeLater(new Runnable(){
            public void run(){
                CalculatorFrame frame = new CalculatorFrame();
                    frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                    frame.setVisible(true);
                }
            }
        );
    }
}

class CalculatorFrame extends JFrame{
    public CalculatorFrame(){
    setTitle("Calculator");
    CalculatorPanel panel = new CalculatorPanel();
    add(panel);
    pack();
    }
}

class CalculatorPanel extends JPanel{
    public CalculatorPanel(){
        setLayout(new BorderLayout());
        result = 0;
        lastCommand = "=";
        start = true;
        // add the display
        display = new JButton("");
        display.setEnabled(false);
        add(display, BorderLayout.NORTH);
        ActionListener insert = new InsertAction();
        ActionListener command = new CommandAction();
        // add the buttons in a  x  grid
        panel = new JPanel();
        panel.setLayout(new GridLayout(4,4 ));
        addButton("7", insert);
        addButton("8", insert);
        addButton("9", insert);
        addButton("/", command);

        addButton("4", insert);
        addButton("5", insert);
        addButton("6", insert);
        addButton("*", command);

        addButton("1", insert);
        addButton("2", insert);
        addButton("3", insert);
        addButton("-", command);
        addButton("0", insert);
        addButton(".", insert);
        addButton("=", command);
        addButton("+", command);
        add(panel, BorderLayout.CENTER);
    }

    private void addButton(String label, ActionListener listener){
        JButton button = new JButton(label);
        button.addActionListener(listener);
        panel.add(button);
    }

    private class InsertAction implements ActionListener{
        public void actionPerformed(ActionEvent event){
            String input = event.getActionCommand();
            if (start){
                display.setText("");
                start = false;
            }
            display.setText(display.getText() + input);
        }
    }

    private class CommandAction implements ActionListener{
        public void actionPerformed(ActionEvent event) {
            String command = event.getActionCommand();

            if (start){
                if (command.equals("-")){
                display.setText(command);
                start = false;
                }
                else lastCommand = command;
            }
            else{
                calculate(Double.parseDouble(display.getText()));
                lastCommand = command;
                start = true;
            }
        }
    }

    public void calculate(double x){
        if (lastCommand.equals("+")) result += x;
        else if (lastCommand.equals("-")) result -= x;
        else if (lastCommand.equals("*")) result *= x;
        else if (lastCommand.equals("/")) result /= x;
        else if (lastCommand.equals("=")) result = x;
        display.setText("" + result);
    }

    private JButton display;
    private JPanel panel;
    private double result;
    private String lastCommand;
    private boolean start;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-29T11:48:03.967

您还可以使用一些数学任务创建 String 并在 JavaScript 引擎中使用它来计算它。更多信息[在这里](http://docs.oracle.com/javase/6/docs/technotes/guides/scripting/programmer_guide/index.html)。

```
// create a script engine manager
ScriptEngineManager factory = new ScriptEngineManager();
// create a JavaScript engine
ScriptEngine engine = factory.getEngineByName("JavaScript");

Double d=(Double)engine.eval("1 + 2 * 3");
System.out.println(d); 
```

输出`7.0`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-29T11:27:45.100

我的方法是将操作表示为对象。（类如`Number`, `Add`, `Multiply`, 将操作数作为字段保存并具有`getValue()`方法。）当用户按下按钮时（除了`=`），您根据数学的优先规则构建此类对象的树，因此您可以计算结果用户按下时的整个表情`=`。

或者，将表达式存储为字符串，然后一次性解析它。

# java - 轻量级 WebLogic 开发环境

> ID：11260750
> 
> 赞同：7
> 
> 时间：2012-06-29T11:12:50.247
> 
> 标签：java, weblogic, oracle-adf

我们刚刚在 Oracle 的 Java EE 框架 ADF 中启动了一个项目。通常我们在 Tomcat 中开发，然后部署到生产 WebLogic 服务器中。

但我们意识到 ADF 需要在本地安装一个 WebLogic 服务器才能在 Eclipse/JDeveloper 中进行开发。这**真的**是重量级的，即使配置为开发，它正在杀死我们的机器，并且需要很长时间才能部署。

那么，是否有任何配置参数我们可以调整以使 WebLogic 占用尽可能少的资源？我们可以使用任何替代方案吗？

我们最关心的是内存（占用了惊人的 800MB）和启动时间（~2 分钟）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T11:56:50.430

关于内存消耗问题，您可能想尝试设置 WebLogic 服务器使用的 JVM 的内存参数。登录到您的 WL Web 管理控制台并转到 Environment/Servers/[your server]/Configuration/Server Start 并在“参数”上设置类似的设置`-Xms256m -Xmx256m`将设置您的 JVM 的初始 (Xms) 和最大 (Xmx) 堆大小到 256 兆字节。您将希望使用这些数字并为您的环境找到最佳值。但请注意，您的 Eclipse 实例也可能会消耗大量内存。

关于启动时间，虽然比我预期的要大一些，但它们看起来还不错。这个问题非常频繁，我不认为你一定能解决它。WebLogic 比 Tomcat 有更多的功能，这反映在环境的其他特征（如启动时间）上。不过，您可能会在此处找到一些有用的提示：[加快 Weblogic Server 启动时间](https://stackoverflow.com/questions/534066/speed-up-weblogic-server-startup-times)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T12:03:57.070

使用本地服务器进行开发没有任何限制。您始终可以使用共享服务器并部署您的项目进行测试。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-02T12:05:06.513

我同意之前的帖子。如果内存是一个问题，那么您可以安装一个独立的 WLS 并从 EAR 部署到它。确保为独立 WLS 安装应用程序开发运行时库，因为默认情况下 WLS 没有为 ADF 启用域 - [http://www.oracle.com/technetwork/developer-tools/adf/downloads/index.html](http://www.oracle.com/technetwork/developer-tools/adf/downloads/index.html)

安装 WLS 时，请确保在开发模式下安装它（这也是设置嵌入式 WLS 的方式）

除此之外，要启动具有有限功能的 WLS，您无能为力。

坦率

# ajax - AjaxBehaviorEvent primefaces3.2

> ID：11260751
> 
> 赞同：2
> 
> 时间：2012-06-29T11:12:51.350
> 
> 标签：ajax, jsf-2, primefaces

我的问题是以下代码返回 null 但是如果我在调试源代码时查看，那么提交的值具有正确的日期。

爪哇：

```
public void changeOneMenuP(AjaxBehaviorEvent event) {
      String id  = (String) event.getComponent().getAttributes().get("value");
      if(id != null) {
           listEntity = escDao.findByxxxx(id, true);
      }
} 
```

XHTML：

```
<h:selectOneMenu id="idSelect" immediate="true" style="width:120px" value="#EntityBB.idUni}" label="#{bundleComunes.unidad}">
                                            <f:selectItem itemLabel="#{bundleComunes.seleccionar}..." itemValue="" />
                                            <f:selectItems  value="#{configuracionBB.listEntity}" var="lUni" itemValue="#lUni.id}" itemLabel="#{lUni.desc}" />
                                    <p:ajax event="change" update="sisArm" listener="#{entityBB.changeOneMenuP}" />
                                        </h:selectOneMenu> 
```

任何想法？？？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T07:49:17.077

最好不要将 primefaces`p:ajax`与 Pure JSF混合使用

尝试使用`f:ajax`

```
<f:ajax event="change" render="sisArm" listener="#{entityBB.changeOneMenuP}" /> 
```

另外，你最`id` 好像这样访问你的

```
public void changeOneMenuP(AjaxBehaviorEvent event) {
    listEntity = escDao.findByxxxx(getidUni(), true);//or just idUni
} 
```

# java - AsyncHttpClient 不工作

> ID：11260754
> 
> 赞同：0
> 
> 时间：2012-06-29T11:13:03.897
> 
> 标签：java, android, android-async-http

我在 onCreate() 中有以下计时器：

```
new Timer().scheduleAtFixedRate(new TimerTask(){

            public void run() {
                Log.i("EOH","timer");
                updateMarkers();
        }}, 0, 1000); 
```

如您所见，它每秒调用一次函数 updateMarkers()。

这是 updateMarkers()：

```
private void updateMarkers(){
        Log.i("EOH","updateMarkers()");
        Drawable drawable = this.getResources().getDrawable(R.drawable.google_maps_marker);
        final MyItemizedOverlay itemizedoverlay = new MyItemizedOverlay(drawable,mapView);

        AsyncHttpClient myClient = new AsyncHttpClient();
        final PersistentCookieStore myCookieStore = new PersistentCookieStore(context);
        myClient.setCookieStore(myCookieStore);
        RequestParams params = new RequestParams();
        params.put("sw_lat", String.valueOf(centrePoint.getLat()-(Double.valueOf(mapView.getLatitudeSpan())/2.0)));
        params.put("sw_lng", String.valueOf(centrePoint.getLat()-(Double.valueOf(mapView.getLongitudeSpan())/2.0)));
        params.put("ne_lat", String.valueOf(centrePoint.getLat()+(Double.valueOf(mapView.getLatitudeSpan())/2.0)));
        params.put("ne_lng", String.valueOf(centrePoint.getLat()+(Double.valueOf(mapView.getLongitudeSpan())/2.0)));

        myClient.post("http://www.prestocab.com/ajax/getRanks.php", params, new AsyncHttpResponseHandler() {

            public void onStart() {
                thinger.setVisibility(View.VISIBLE);
                Log.i("EOH","onStart()");
            }

            public void onSuccess(String response) {
                Log.i("EOH","xxx: "+response);
                thinger.setVisibility(View.INVISIBLE);

                try{
                    JSONArray arr=(JSONArray) new JSONTokener(response).nextValue();
                    Log.i("EOH","yyy: "+String.valueOf(arr.length()));
                }catch(JSONException e){

                }

            }

            public void onFailure(Throwable e) {
                thinger.setVisibility(View.INVISIBLE);
            }

            public void onFinish() {

            }

        });

    } 
```

我遇到的问题是`Log.i("EOH","onStart()");`永远不会被调用！然而`Log.i("EOH","updateMarkers()");`被调用...

我究竟做错了什么？

提前谢谢了，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-26T05:03:59.497

我发现 AsyncHttpClient 的当前实现 - 我开始使用的第一个 - 版本 1.4.3 (2013-09-25) 与本地 Intranet 主机名存在一些问题。我正在使用本地网络进行测试，网络服务器在我的计算机上运行，​​它正在调用 onStart，但从未调用 onSuccess 或任何其他方法。

我的主机名是 RM_UB02（没有 Internet 域后缀）。Android 和 Chrome 网络浏览器能够解析 URL (http://RM_UB02/test/page.html)，但 AsyncHttpClient 从来没有工作过。

我更改为本地 Intranet IP 地址（192.168.1.104）并开始工作。我发现它适用于 Internet 名称 ( [http://slashdot.org](http://slashdot.org) )，但不适用于本地网络。

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2013-05-18T14:57:45.830

```
@Override
public void onStart()
{
}

@Override
public void onFinish()
{
}

@Override
public void onSuccess()
{
}

@Override
public void onFailure()
{
} 
```

# c++ - 在未指定字符串长度的情况下使用 sprintf_s 使 C++ 应用程序崩溃

> ID：11260755
> 
> 赞同：1
> 
> 时间：2012-06-29T11:13:06.140
> 
> 标签：c++, visual-c++

我有一个 c++ 应用程序，其中客户报告了崩溃。但崩溃不容易重现。在分析了一些日志之后，我发现崩溃可能发生在以下代码部分之间。请告诉我，如果我有这些代码语句，应用程序有可能崩溃吗？

```
 //Tesrt
    std::string strAppName = "App1\0";
    int nSize = 10;
    sprintf_s(szBuff, "The appname %s have %d dependancies ", strAppName.c_str(), nSize);
    //Then use the szBuff to log to a text file
    //Test end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T11:22:12.680

问题是您没有提供[正确的参数`sprintf_s`](http://msdn.microsoft.com/en-us/library/ce3zzk1k%28v=vs.80%29.aspx)：

```
int sprintf_s(
   char *buffer,
   size_t sizeOfBuffer,
   const char *format [,
      argument] ... 
); 
```

`sprintf_s`接受 a`size_t`作为它的第二个参数（ 的大小`szBuff`），但您没有提供。相反，你已经给它一个`const char *`参数应该在哪里。编译它的唯一方法是让您忽略编译器警告。

所以`sprintf_s`看到的是：缓冲区打印成大量字符允许进入缓冲区 `strAppName.c_str()`作为格式字符串

换句话说，这并没有像你想要的那样做任何事情。提供大小`szBuff`作为第二个参数，我敢打赌你的问题会消失。

是的，考虑到你所做的，我预计整个地方都会崩溃。

# java - [PersistenceException：获取序列 nextval 时出错]

> ID：11260757
> 
> 赞同：5
> 
> 时间：2012-06-29T11:13:17.173
> 
> 标签：java, playframework-2.0, ebean

我在尝试将数据保存到数据库中的模型时遇到此错误。

```
@Entity
public class User extends Model {
   @Required
   public String name; 
   @Email
   public String email; 
   @Required @MaxLength(value=10)
   public String username;
   @Required @MinLength(value=4)
   public String password;
   @Id 
   public int id;
} 
```

这是我的课。

这是我尝试将模型保存到数据库时的错误。

![在此处输入图像描述](../Images/17afa5a2afc0f635f2cb5a30581b2792.png)

我将不胜感激任何帮助！非常感谢。

编辑：表结构在这里 ![在此处输入图像描述](../Images/34f101f3249c4d71f7731ed7e1a1810c.png)

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-29T11:20:57.467

我认为使用 ebean 您必须实际命名和注释您的 id。您可能还必须告诉它支持音序器的名称（我不记得了）。[这](http://docs.oracle.com/javaee/5/api/javax/persistence/GeneratedValue.html)显示了如何做到这一点。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-07-10T06:53:01.253

这对我有用：

```
@Entity
@Table(name = "table", schema = "schema")
public class Bean extends Model{

   @Id
   @Column(name = "idcolumn")
   @SequenceGenerator(name="gen", sequenceName="schema.table_idcolumn_seq",allocationSize=1) 
   @GeneratedValue(strategy = GenerationType.SEQUENCE, generator = "gen")
   private int id;
} 
```

使用 SequenceGenerator 时，请注意 Hibernate 中的这个错误：[https ://hibernate.atlassian.net/browse/HHH-7232](https://hibernate.atlassian.net/browse/HHH-7232)

它强制您将模式直接写入 sequenceName，而不是使用 SequenceGenerator 注释中的模式字段。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-07-10T03:45:29.260

这对我有用的类注释：

```
@SequenceGenerator(name = "SEQUENCE_NAME", sequenceName = "PST_BUSINESS.S_BUSINESS_DOMAIN")
@Entity
@Table(name = "TB_BUSINESS_DOMAIN", schema = "PST_BUSINESS")
public class PstBusinessDomain extends PstAbstractBaseMappedEntity { 
```

正如 Leo 所说，这种策略适用于现场和课堂上的注释。

# android - 在 lg p-690 上测试安卓应用

> ID：11260758
> 
> 赞同：0
> 
> 时间：2012-06-29T11:13:18.423
> 
> 标签：android

如果我没有数据线，我可以在这台设备上测试应用程序吗？我不知道该怎么做，即使它是可能的。

您是否需要一些特定的手机来测试应用程序？

谢谢你，瑞安

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T11:16:38.650

如果您无法传输文件，您可以通过电子邮件将 apk 文件发送给自己，当您查看附件时，它会为您提供安装选项。您必须确保在手机上的应用程序设置菜单中打开了允许您从不受信任的来源安装应用程序的选项。

# java - 调查内存使用情况时，GC_FOR_ALLOC 是否更“严重”？

> ID：11260761
> 
> 赞同：24
> 
> 时间：2012-06-29T11:13:31.277
> 
> 标签：java, android, garbage-collection

我目前正在调查我的 Android 应用程序的垃圾收集问题，我很想知道 GC_FOR_ALLOC 是否表明比其他 GC 消息（例如 GC_CONCURRENT）更大的问题。

据我了解，GC_CONCURRENT 正在做垃圾收集器应该做的事情。堆已经达到一定的限制，最好去清理内存。

GC_FOR_ALLOC 向我表明，如果我试图创建一个对象并且没有剩余内存可以做，那么会发生更严重的事情。

GC 消息是否有优先级或“严重性”级别？

* * *

## 回答 #1

> 赞同：55
> 
> 时间：2012-07-03T13:36:23.240

从某种意义上说，`GC_FOR_ALLOC`比 更严重`GC_CONCURRENT`，因为`GC_FOR_ALLOC`意味着没有足够的空闲内存来满足分配请求，因此需要进行垃圾收集，而`GC_CONCURRENT`只是意味着 GC 感觉像是在运行，通常是因为空闲内存量变得低于分配后的某个阈值。

但是， A`GC_FOR_ALLOC`本身并不是您的应用程序出现问题的迹象：

*   Android 应用程序从一个小堆开始，当应用程序需要越来越多的内存时，它会增长（直到某个点），并且`GC_FOR_ALLOC`在增加堆大小之前完成。在这种情况下`GC_FOR_ALLOC`是完全正常的。
*   如果您分配内存的速度比并发 GC 释放它的时间快，这`GC_FOR_ALLOC`是不可避免的。分配内存的速度比并发 GC 释放内存的速度快并没有本质上的错误。

Android 上更严重的 GC 类型是`GC_BEFORE_OOM`，当分配请求失败时执行，即使在`GC_FOR_ALLOC`应用程序堆增长到允许的大小之后。当这种情况发生时，作为最后的手段，Dalvik 也会尝试释放 SoftReferences，然后再进行最后一次分配内存的尝试，如果失败则抛出 OutOfMemory 异常。

如果你想看看这个逻辑的代码，它`tryMalloc()`在[dalvik.git/vm/alloc/Heap.cpp](http://git.omapzoom.org/?p=platform/dalvik.git;a=blob;f=vm/alloc/Heap.cpp;h=9eee817e5e5cc1115041c5548214292a7f6e1090;hb=HEAD)

无论如何，如果您不介意，我怀疑查看 logcat 输出是调试垃圾收集问题的最有效方法。我不知道您遇到了什么具体问题，但是您是否研究过诸如 DDMS 中的分配跟踪器之类的工具并在该`hprof-conv`工具的帮助下分析堆转储？（例如，请参阅[http://android-developers.blogspot.se/2011/03/memory-analysis-for-android.html](http://android-developers.blogspot.se/2011/03/memory-analysis-for-android.html)以开始使用。）

# javascript - 使用咖啡脚本缓存的问题

> ID：11260767
> 
> 赞同：1
> 
> 时间：2012-06-29T11:14:14.007
> 
> 标签：javascript, backbone.js, coffeescript

我有这个脚本

```
class Raffler.Views.EntriesIndex extends Backbone.View

    div: $('#input')

    initialize: ->

       console.log @div.val() 
```

如您所见，这是主干的视图。

我想缓存`$('#div')`到一个变量中并调用它。见`console.log @div.val()`。

但这似乎不起作用..

使用普通的javascript我会写这样的东西：

```
var ToDoView = Backbone.View.extend({
    div : $('#input'),
    initialize: function(){
         console.log(this.div.val());
    }
}) 
```

这工作正常。我在哪里用咖啡脚本出错了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T14:43:30.890

Coffeescript 类的工作方式和 Backbone 的扩展机制工作方式存在一些差异，这可能是您遇到的问题。但我猜这不是这里的问题。您运行此代码的确切时间和地点也可能存在差异。如果您将 javascript 代码放在执行咖啡脚本代码的同一位置，那么它可以正常工作吗？在相关说明中，问题究竟*是*什么，即您收到什么错误消息？@div 是否已初始化？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T14:44:19.027

在您的代码运行时，该元素可能`$("#input")`尚未加载。

在类中缓存值的问题在于，该类很可能是在 jQuery.ready 回调之外定义的（在 DOM 完成加载之前），因此目前您的类设置`$("#input")`为`@div`jQuery 实际上并没有找到该元素。

您可以`@div`在`initialize`函数中进行设置，因为它很可能会在 DOM 加载后被调用。

# arrays - 尽管存在于 $this->data 中，Cakephp edit.ctp 没有填充输入框

> ID：11260769
> 
> 赞同：1
> 
> 时间：2012-06-29T11:14:18.760
> 
> 标签：arrays, cakephp, edit

我正在努力寻找这个问题的答案。我只使用 CakePHP 一个月就遇到了问题。这是我可以通过手动插入值来解决的问题，但我希望我的数据能够预先填充。这是正在发生的事情：

该模型是具有许多“动态价格”的产品

我正在测试一个 id 为 7 (/products/edit/7) 的产品。

我的编辑功能的第一部分是：

```
public function edit($id = null) {
    $this->Product->id = $id;

    if (!$this->Product->exists()) {
        throw new NotFoundException('Invalid Product');
    }

    if ($this->request->is('get')){
        $this->request->data = $this->Product->read();
    }
    debug($this->request->data); 
    //other stuff setting vars for drop-down lists
} 
```

这

```
debug($this->request->data); 
```

给了我以下内容：

```
array(
'Product' => array(
'id' => '7',
'category_id' => '70',
'name' => 'Full Test',
'description' => 'This is to test all features',
'price' => '0.00',
'aesthetic' => true,
'image' => '',
'price_structure' => '2',
'suggest_for' => '',
'created' => '2012-06-28 12:49:06',
'modified' => '2012-06-28 12:49:06'
),
'Dynamicprice' => array(
  (int) 0 => array(
  'id' => '15',
  'product_id' => '7',
  'drop' => '600',
  'prices' => '6000:9.99, 12000:18.99 '
  ),
  (int) 1 => array(
  'id' => '16',
  'product_id' => '7',
  'drop' => '1200',
  'prices' => '6000:19.99, 12000:28.99 '
  ),
  (int) 2 => array(
  'id' => '17',
  'product_id' => '7',
  'drop' => '2400',
  'prices' => '6000:29.99, 12000:38.99 '
  )
)
) 
```

但是，虽然 ['Product'] 中的所有内容都预先填充了 ['Dynamicprice'] 数组，但并未预先填充以下内容：

```
<?php
echo $this->Form->input('Dynamicprices.0.id');
echo $this->Form->input('Dynamicprices.0.drop', array('label' => 'Drop 1 (mm). Enter "0" for "Any Drop"'));
echo $this->Form->input('Dynamicprices.0.prices', array('label' => 'Prices 1', 'type' => 'textarea', 'rel' => 'dynamic'));
?><hr><?php
echo $this->Form->input('Dynamicprices.1.id');
echo $this->Form->input('Dynamicprices.1.drop', array('label' => 'Drop 2 (mm).'));
echo $this->Form->input('Dynamicprices.1.prices', array('label' => 'Prices 2', 'type' => 'textarea', 'rel' => 'dynamic'));
?><hr><?php
echo $this->Form->input('Dynamicprices.1.id');
echo $this->Form->input('Dynamicprices.2.drop', array('label' => 'Drop 3 (mm).'));
echo $this->Form->input('Dynamicprices.2.prices', array('label' => 'Prices 3', 'type' => 'textarea', 'rel' => 'dynamic'));
?> 
```

我期望它们自动填充是否正确，如果是这样，我做错了什么？

我创建了 /Model/Dynamicprice.php 以确保：

```
 class Dynamicprice extends AppModel {
    public $name = 'Dynamicprice';
    public $belongsTo = 'Product'; 
```

但正如我所料，它并没有改变任何东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T11:24:16.133

这是我本周第二次这样做；问一个愚蠢的问题。是的，我期望他们预先填充是正确的。问题是我把我的命名约定搞混了。“Dynamicprices.1.drop”最后不应该有“s”。傻我！

# python - Python元组操作和计数

> ID：11260770
> 
> 赞同：4
> 
> 时间：2012-06-29T11:14:22.207
> 
> 标签：python, string, tuples

我有以下元组。我想构建一个字符串，其输出如输出中所述。我想计算与'a'相对应的所有元素，即，有多少k1出现在'a'等等。什么是最简单的方法做这个

```
a=[('a','k1'),('b','k2'),('a','k2'),('a','k1'),('b','k2'),('a','k1'),('b','k2'),('c','k3'),('c','k4')] 
```

输出应为字符串 output=""

```
 a k1  3
 a k2  1
 b k1  1
 b k2  3
 c k3  1
 c k4  1 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-29T11:18:43.377

使用[`Counter`](http://docs.python.org/library/collections.html#collections.Counter)来自的类`collections`：

```
>>> a = [('a', 'k1'), ('b', 'k2'), ('a', 'k2'), ('a', 'k1'), ('b', 'k2'), ('a', 'k1'), ('b', 'k2'), ('c', 'k3'), ('c', 'k4')]
>>> from collections import Counter
>>> c = Counter(a)
Counter({('b', 'k2'): 3, ('a', 'k1'): 3, ('a', 'k2'): 1, ('c', 'k3'): 1, ('c', 'k4'): 1}) 
```

您可以使用`c.items()`迭代计数：

```
>>> for item in c.items():
...     print(item)
... 
(('a', 'k2'), 1)
(('c', 'k3'), 1)
(('b', 'k2'), 3)
(('a', 'k1'), 3)
(('c', 'k4'), 1) 
```

上面的代码是 Python 3。`Counter`该类是 Python 2.7 中的新类。您现在可以按所需顺序重新排列项目，并在需要时将它们转换为字符串。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-29T11:17:39.857

您可以使用[defaultdict](http://docs.python.org/library/collections.html#collections.defaultdict)轻松完成添加部分。默认字典像普通字典一样工作，除了它具有空键存储的默认值，因此您可以在迭代数据集时轻松增加计数器。

```
a=[('a','k1'),('b','k2'),('a','k2'),('a','k1'),('b','k2'),('a','k1'),('b','k2'),('c','k3'),('c','k4')]
from collections import defaultdict
b = defaultdict(int)
for item in a:
    b[item] += 1

print b
defaultdict(<type 'int'>, {('a', 'k2'): 1, ('c', 'k3'): 1, ('b', 'k2'): 3, ('a', 'k1'): 3, ('c', 'k4'): 1}) 
```

为了漂亮地打印它，只需遍历结果数据并按照您的需要打印它。

```
for key, value in b.iteritems():
    print '%s %s %s' % (key[0], key[1], value) 
```

# javascript - 单击时使用变量中的 javascript 解析 XML 文件

> ID：11260773
> 
> 赞同：2
> 
> 时间：2012-06-29T11:14:40.900
> 
> 标签：javascript, html, xml

每次单击链接时，我都尝试根据其 href 加载不同的 xml 文件。我有以下内容：

JAVASCRIPT

```
window.onload=function() {
loadXMLDoc("papers.xml"); // loads the default xml file so that page is not empty
}

function scanForXML(){
var extLinks=document.getElementById('results_list').getElementsByTagName('a');
for (i=0; i<extLinks.length; i++) {
extLinks[i].onclick=function getName()
{
var fileName=this.getAttribute('href');
loadXMLDoc(fileName);
return false;
}
}
} 
```

HTML

```
<ol id="results_list">
<li> <a class="tooltip" href="paper2.xml"> Teaching with Tablet PC's </a></li>
<li> <a href="paper3.xml" class="tooltip"> Tablet PC’s as Instructional Tools </a></li>
</ol> 
```

onclick 事件有效，我得到了 href 值，但没有加载新的 xmlFile。任何想法为什么？

ps：没有jquery plz，不能使用它。尝试学习更好的基本 javascript

Javascript 加载代码 - 顺便说一下，它在 chrome 和 opera 中不起作用 - 但可以在 safari 代码中加载默认的 xml 文件：

```
function loadXMLDoc(dname)
{
if (window.XMLHttpRequest)
  {// code for IE7+, Firefox, Chrome, Opera, Safari
  xmlhttp=new XMLHttpRequest();
  }
else
  {// code for IE6, IE5
  xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
  }
xmlhttp.open("GET",dname,false);
xmlhttp.send();
 xmlDoc=xmlhttp.responseXML;
} 
```

谢谢！ķ

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T11:19:00.227

那是因为请求是异步的：当您的 loadXMLDoc 函数返回时没有响应。

通常的解决方案是这样的：

```
 xmlhttp.onreadystatechange = function() {
    if (xmlhttp.readyState === 4) {
        if (xmlhttp.status === 200) {
                           // use xmlhttp.responseXML;
                    }
            }
   }
  xmlhttp.open("GET",dname,false);
  xmlhttp.send(); 
```

主要区别在于您不使用 loadXMLDoc 函数的返回值，而是要求它在获取 XML 后执行某些操作。

另一种解决方案是使用[jquery 的 ajax 函数强制同步请求](http://api.jquery.com/jQuery.ajax/)

编辑：我将其标记为重复，因为它是一个常见问题，但我希望这个具体的答案会对你有所帮助。

# c# - 如何更改 Telerik RadGrid 列的属性服务器端

> ID：11260775
> 
> 赞同：2
> 
> 时间：2012-06-29T11:14:53.943
> 
> 标签：c#, asp.net, telerik, radgrid

我的 Telerik radgird 中有一个 TemplateColumn，如下所示：

```
<telerik:GridTemplateColumn FilterControlAltText="Filter TemplateColumn_Commands column"
                                HeaderText="Commands" UniqueName="TemplateColumn_Commands"
                                AllowFiltering="False" Display="False">
                                <ItemTemplate>
                                    <asp:LinkButton ID="lbDelete" runat="server" CommandName="Delete" CausesValidation="False"
                                        CssClass="lb">Delete</asp:LinkButton>
                                </ItemTemplate>
                                <HeaderStyle HorizontalAlign="Center" VerticalAlign="Middle" />
                                <ItemStyle HorizontalAlign="Center" VerticalAlign="Middle" />
                            </telerik:GridTemplateColumn> 
```

我想更改此列服务器端的显示（或可见）属性。
我应该使用哪个事件，我该怎么做？
**编辑：**
有一个按钮和一个文本框，单击该按钮后，我检查了该文本框文本，如果可以，我想更改该列的显示（或可见）属性（删除操作应仅适用于管理员）管理员用户名字符串）该按钮在该网格之外。

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T11:20:43.770

你可以像下面那样做。在服务器端代码中绑定 Telerik rad 网格后

```
grdDemo.DataSource = ds
grdDemo.DataBind()

grdDemo.MasterTableView.GetColumn("TemplateColumn_Commands").Display = False 
```

它应该可以解决您的问题。快乐编码

# objective-c - 使用 NFD unicode 的 NSString 规范化

> ID：11260778
> 
> 赞同：3
> 
> 时间：2012-06-29T11:14:58.093
> 
> 标签：objective-c, iphone, unicode, nsstring, unicode-normalization

在我的应用程序中，我必须使用 NFD Unicode 系统规范化一个 NSString。我怎样才能做到这一点？我需要将用户输入的字符串转换为规范化的字符串，并且从这个规范化的字符串中，我必须计算一个数字。谁能帮我？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-29T12:03:11.893

```
NSString *nfdString = [yourString decomposedStringWithCanonicalMapping]; 
```

# jquery - 从jquery mobile中的URL获取参数值

> ID：11260792
> 
> 赞同：0
> 
> 时间：2012-06-29T11:15:47.550
> 
> 标签：jquery, jquery-mobile

我有一个名为 servicesDetails.html 的页面，其中包含链接。网址如下所示

```
../Myapp/servicesDetails.html?servicetype=Advanced&serviceid=1208 
```

**单击时的链接会加载一个名为audioListPage**的内部页面，其中包含一些参数，链接如下所示

```
<a href="#audioListPage?audioid=123&audiotype=mp3" class="loadAudio" data-role="button" data-mini="true" data-inline="true"> 
```

加载 audioListPage 后，url 更改为

```
../Myapp/servicesDetails.html?servicetype=Advanced&serviceid=1208#audioListPage?audioid=123&audiotype=mp3 
```

当audioListPage加载时，我需要向用户显示audioid和audiotype，我该怎么做？

根据下面的评论，我尝试了这个

```
$.urlParam = function(name){
var results = new RegExp('[\\?&]' + name + '=([^&#]*)').exec(window.location.href);
return results[1] || 0;
}

$('#audioListPage').live('pagecreate',function(event) {
   console.log($.urlParam('audioid '));//this is giving me an error
}); 
```

我检查了为什么会发生错误，发现 window.location.href 只给我 ../Myapp/servicesDetails.html?servicetype=Advanced&serviceid=1208，而不是更新的 URL。我不确定我是否调用 $.urlParam( ) 在正确的事件中

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T11:27:05.543

你可以解析`window.location.hash`

看这个例子：

[如何在 JavaScript 中获取查询字符串值？](https://stackoverflow.com/questions/901115/get-query-string-values-in-javascript)

并更换`window.location.search`

和`window.location.hash`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T13:44:36.597

jQM 文档建议使用以下插件之一作为参数：

> jQuery Mobile 不支持将查询参数传递给内部/嵌入式页面，但是您可以添加两个插件到您的项目中来支持此功能。有一个轻量级[页面参数插件](https://github.com/jblas/jquery-mobile-plugins/tree/master/page-params)和一个功能更全面的[jQuery Mobile 路由器插件](https://github.com/azicchetti/jquerymobile-router) ，可与主干.js 或脊柱.js 一起使用。

*   [https://github.com/jblas/jquery-mobile-plugins/tree/master/page-params](https://github.com/jblas/jquery-mobile-plugins/tree/master/page-params)
*   [https://github.com/azicchetti/jquerymobile-router](https://github.com/azicchetti/jquerymobile-router)

文档：（请参阅已知限制部分）

*   [http://jquerymobile.com/demos/1.1.0/docs/pages/page-navmodel.html](http://jquerymobile.com/demos/1.1.0/docs/pages/page-navmodel.html)

# c++ - 使用动态规划从背包中检索物品

> ID：11260795
> 
> 赞同：1
> 
> 时间：2012-06-29T11:16:15.403
> 
> 标签：c++, dynamic-programming, knapsack-problem, recurrence

我是动态编程的新手，并尝试了我的第一个 DP 问题。问题陈述是

> 给定一个大小为 C 的背包和 n 个大小为 s[] 且值为 v[] 的物品，最大化可放入背包的物品的容量。一个项目可以重复任意次数。（允许重复项目）。

虽然我能够制定递归关系并创建 DP 表，并最终获得可以放入背包的最大值，但我无法设计一种方法来检索必须选择哪些值才能获得所需的总和.

这是我的解决方案：

```
#include <iostream>
#include <cstdlib>
#include <algorithm>
#include <vector>

using namespace std;

int main()
{
    int s[] = { 1, 3, 4, 5, 2, 7, 8 , 10};
    int v[] = { 34, 45, 23, 78, 33, 5, 7 , 1};
    int n = ( (sizeof(s)) / (sizeof(s[0])) );
    vector<int> backtrack;
    int C = 15;
    int pos;
    int m[20];
    m[0] = 0;
    int mx = 0;
    for ( int j = 1; j <= C; j++) {
        mx = 0;
        m[j] = m[j-1];
        pos = j-1;  
        for ( int i = 0; i < n; i++) {
            mx = m[i-s[i]] + v[i];
            if ( mx > m[i] ) {
                m[i] = mx;
                pos = i - s[j];
            }
        }   
        backtrack.push_back(pos);
    }
    cout << m[C] << endl<<endl;
    for ( int i = 0; i < backtrack.size(); i++) {
        cout << s[backtrack[i]]  <<endl;
    }   
    return 0;
} 
```

在我的解决方案中，我尝试将选择的最大值项的位置存储在向量中，并最终打印出来。然而，这似乎并没有给我正确的解决方案。

运行程序会产生：

```
79

2
3
0
5
2
7
8
10
34
45
23
78
33
5
7 
```

从输出中可以明显看出，输出中的数字不能是所选项目的大小，因为输出中没有大小为 0 的项目。

我希望你能帮助我找到我的逻辑或实现中的错误。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T13:49:44.553

您正在遵循贪婪的方法。这很聪明，但它是启发式的。我不会给你正确的代码，因为它可能是一个家庭作业，但递归函数`knapsack`看起来像这样：

```
knapsack(C): maximum profit achivable using a knapsack of Capacity C
knapsack(C) = max { knapsack(C-w[i]) + v[i] } for all w[i] <= C
knapsack(0) = 0 
```

在代码中：

```
dp(0) = 0;
for i = 1 to C
  dp(i) = -INF;
  for k = i-1 downto 0
     if w[k] < i then
        dp(i) = max{dp(i-w[k]) + v[k], dp(i)};
print dp(Capacity); 
```

# xslt - XSL 转换将单个节点拆分为同一级别的两个节点

> ID：11260797
> 
> 赞同：1
> 
> 时间：2012-06-29T11:16:17.170
> 
> 标签：xslt

我有一个源 XML

```
<Cars>
  <Car>
    <Make>Fiat</Make>
    <Colors>
      <Color>RED</Color>
      <Color>BLUE</Color>
    </Colors>
  </Car>
  <Car>
    <Make>Volvo</Make>
    <Colors>
      <Color>RED</Color>
      <Color>WHITE</Color>
    </Colors>
  </Car>
  <Car>
    <Make>Renault</Make>
    <Colors>
      <Color>BLUE</Color>
      <Color>BLACK</Color>
    </Colors>
  </Car>
</Cars> 
```

我想把它变成类似的东西

```
<Cars>
  <Detail>
    <Name>MakeName</Name>
    <Entry>Fiat</Entry>
    <Entry>Volvo</Entry>
    <Entry>Renault</Entry>
  </Detail>
  <Detail>
    <Name>AvailableColors</Name>
    <Entry>RED</Entry>
    <Entry>BLUE</Entry>
    <Entry>WHITE</Entry>
    <Entry>BLACK</Entry>
  </Detail>
<Cars> 
```

我是 XSL 的新手，并创建了一个来完成一半的处理，但我坚持将颜色作为目标中的单独元素获取

```
<xsl:template match="/">
  <Cars>
    <xsl:apply-templates />
  </Cars>
</xsl:template>

<xsl:template match="Cars">
  <xsl:apply-templates select="Car" />
</xsl:template>

<xsl:template match="Car">
  <Detail>
    <Name>MakeName</Name>
    <xsl:apply-templates select="Make" />
  </Detail>
</xsl:template>

<xsl:template match="Make">
  <Entry><xsl:value-of select"text()"/></Entry>
</xsl:template> 
```

我无法创建 XSL `<Name>AvailableColors</Name>`，我对 XSL 很陌生，非常感谢任何帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T11:34:19.883

这是一个 XSLT 1.0 样式表，展示了如何使用[Muenchian 分组](http://www.jenitennison.com/xslt/grouping/muenchian.xml)消除重复的颜色：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">

<xsl:output indent="yes"/>

<xsl:key name="k1" match="Car/Colors/Color" use="."/>

<xsl:template match="Cars">
  <xsl:copy>
    <Detail>
      <Name>MakeName</Name>
      <xsl:apply-templates select="Car/Make"/>
    </Detail>
    <Detail>
      <Name>AvailableColors</Name>
      <xsl:apply-templates select="Car/Colors/Color[generate-id() = generate-id(key('k1', .)[1])]"/>
    </Detail>
  </xsl:copy>
</xsl:template>

<xsl:template match="Car/Make | Colors/Color">
  <Entry>
    <xsl:value-of select="."/>
  </Entry>
</xsl:template>

</xsl:stylesheet> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T12:49:59.427

**请参阅此答案中给出的通用“粉碎”解决方案**：

[https://stackoverflow.com/a/8597577/36305](https://stackoverflow.com/a/8597577/36305)

# iphone - mapView 应该抛出“用户提示消息”。找不到位置

> ID：11260803
> 
> 赞同：0
> 
> 时间：2012-06-29T11:16:32.867
> 
> 标签：iphone, ios

在我的应用程序中，输入一些参数后，它会在 mapView 中显示位置。我想要的是当用户输入一些并且找不到那个地方时，它应该抛出一个“找不到”的消息......意思是“提示消息”。怎么做..任何相关的答案都将被应用。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T11:23:48.880

您正在寻找 UIAlertView。这里有一个方便的教程：http: [//getsetgames.com/2009/12/02/iphonedev-advent-tip-2-how-to-show-an-alert-with-uialertview/](http://getsetgames.com/2009/12/02/iphonedev-advent-tip-2-how-to-show-an-alert-with-uialertview/)

# java - JLabel ImageIcon：停止在框架中自动居中

> ID：11260809
> 
> 赞同：2
> 
> 时间：2012-06-29T11:16:53.177
> 
> 标签：java, swing, jframe, jlabel, layout-manager

我有这个：

```
import javax.swing.*;
import java.awt.Canvas;
import java.awt.image.BufferedImage;

public class test extends Canvas{

public static JFrame frame;
public static int WIDTH = 800;
public static int HEIGHT = 600;
public static BufferedImage img;
public static int[] pixels;
public static boolean running=true;

public static void main(String[] a){

        img = new BufferedImage(WIDTH, HEIGHT,BufferedImage.TYPE_INT_RGB);
        frame = new JFrame("WINDOWw");
        frame.add(new JLabel(new ImageIcon(img)));
        frame.pack();
        frame.setVisible(true);
        frame.setSize(WIDTH, HEIGHT);
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

}

} 
```

如何阻止黑色图像在框架上自动居中？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-29T11:19:30.293

它似乎是唯一的组件，它填充了框架。`FlowLayout`如果它是唯一的组件，则使用文本对齐或 a 。

![TestLabelPlacement - FlowLayout](../Images/feef92bbe3ce85d3d9f068d62afa137c.png)

```
import javax.swing.*;
import java.awt.FlowLayout;
import java.awt.image.BufferedImage;

public class TestLabelPlacement {

    public static JFrame frame;
    public static int WIDTH = 200;
    public static int HEIGHT = 150;
    public static BufferedImage img;

    public static void main(String[] a){

        img = new BufferedImage(WIDTH, HEIGHT,BufferedImage.TYPE_INT_RGB);
        frame = new JFrame("Window");
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

        frame.setLayout(new FlowLayout(FlowLayout.LEADING));
        frame.add(new JLabel(new ImageIcon(img)));
        frame.pack();
        frame.setVisible(true);
        // WRONG!  That is the size of the image, not the frame!
        //frame.setSize(WIDTH, HEIGHT);
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-29T11:24:32.643

JFrame 将**BorderLayout 作为默认布局**，当**只有一个组件**要添加到框架时，它**默认进入框架的中心**。

您可以使用**GroupLayout**，并将组件放置到您想要的位置。GroupLayout 是由 NetBean 开发团队于 2005 年开发的，它可以在**Window Builder Pro 中使用，它也是一个 GUI 构建，现在可以从 Google 免费获得。**

# c++ - 析构函数中对象的作用域

> ID：11260823
> 
> 赞同：3
> 
> 时间：2012-06-29T11:17:51.300
> 
> 标签：c++, oop, destructor

我试图理解析构函数。我有以下问题。在下面的代码片段中，为什么对象 b2 超出了 Destructor 的范围？

```
class D
{
   B *b1;
   public:
   D()
   {
       b1 = new B;
       B *b2=new B;
       cout<<"D's Constructor Invoked"<<endl;
       //delete b2;
   }
   ~D()
   {
       delete b1;
       delete b2;  // error : undeclared identifier
       cout<<"D's Destructor Invoked"<<endl;
   }
}; 
```

B 只是一个简单的类。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T11:19:48.793

`b2`是构造函数的局部变量。你想要做的基本上等同于：

```
 void f()
   {
       B *b2=new B;
   }

   void g()
   {
       delete b2;  // error : undeclared identifier
   } 
```

我想你明白为什么它不起作用。（`g`有自己的范围和自己的一组局部变量，与那些不相交`f`。）

相反，创建`b2`一个成员变量：

```
class D
{
   B *b1;
   B *b2;
   public:
   D()
   {
       b1 = new B;
       b2 = new B;
       cout<<"D's Constructor Invoked"<<endl;
   }
   ~D()
   {
       delete b1;
       delete b2;  // works!
       cout<<"D's Destructor Invoked"<<endl;
   }
}; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-29T11:19:36.327

因为它是另一个函数中的局部变量。这与以下无法编译的原因相同：

```
void do_something() {
    int answer = 42;
    frob(answer);
}

void do_something_else_completely_unrelated() {
    answer = 23; // what? there's no "answer" in scope!
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-29T11:19:50.887

`b2`的作用域是你声明它的块，也就是构造函数。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-29T11:19:58.230

对象 b2 在构造函数（本地）中定义，这意味着它在大括号 } 之外无法访问。所以你的析构函数对b2的存在没有任何线索。而 b1 是作为类成员创建的，因此它是可见的。

阅读[本文](http://easycplusplus.com/cpp/cpptutorial28a.html)以了解范围

# extjs4 - Ext.define 和处理程序范围

> ID：11260826
> 
> 赞同：0
> 
> 时间：2012-06-29T11:18:06.263
> 
> 标签：extjs4

[我遇到了与http://www.sencha.com/forum/showthread.php?140992-Ext.define-and-the-Scope](http://www.sencha.com/forum/showthread.php?140992-Ext.define-and-the-Scope)完全相同的问题，不幸的是，线程上没有明确的答案。

我知道这`scope:this`行不通，因为它只会将范围从按钮更改为**窗口**，并且根据我的搜索和线程上给出的建议，我得出结论，唯一的解决方案是

1.  扩展网格面板时定义别名。
2.  遍历 DOM`this.up('alias')`用于获取网格面板。

它*真的*是唯一的解决方案吗？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T11:43:29.157

根据帖子中的示例，试试这个......

```
initComponent: function() {

    ...
    var me = this;

    me.tbar = [
        {
            text: 'Start',
            iconCls: 'icon-start'
        }, {
            text: 'Stop',
            iconCls: 'icon-stop'
        }, {
            text: 'Eintrag hinzufügen',
            iconCls: 'icon-add',
            scope: me,
            handler: function() {
                me.addEntry();
            }
        }
    ],
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-29T11:43:24.720

是的。组件中处理程序的范围通常是调用其处理程序的实例化组件。tbar 中的那个按钮实际上是一个组件，它的实例化形式变成了作用域。您应该像您所说的那样遍历您的面板以获取所需的对象。

# c# - 编写 .csv 文件 - 独立于文化

> ID：11260829
> 
> 赞同：6
> 
> 时间：2012-06-29T11:18:13.957
> 
> 标签：c#

在德语中，十进制分隔符是 ，值分隔符是“;” . 在英语/其他语言中，小数分隔符是 . 和值分隔符是“，”。

我想创建一个独立于当前文化的 .csv 文件。我的意思是 .csv 文件总是应该有“。” 有小数分隔符，"," 有值分隔符。

下面给出的代码。

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.IO;
using System.Globalization;

namespace CSV_FILE_FORMAT
{
    class Program
    {
        static void Main(string[] args)
        {
            string aFileName = "result.csv";
            FileStream aFileStream = new FileStream(aFileName, FileMode.OpenOrCreate, FileAccess.ReadWrite, FileShare.None);
            StreamWriter m_StreamWriter = new StreamWriter(aFileStream);
            double[] values = new double[] { 10.5, 20.3, 30.2 };
            for(int i = 0; i < values.Length;i++)
            {
                m_StreamWriter.Write(values[i].ToString(CultureInfo.InvariantCulture));
                m_StreamWriter.Write(",");
            }
        }
    }
} 
```

此代码的问题在于操作系统是否为德语。小数点分隔符显示为“,”而不是“.”。

请让我知道代码缺少某些内容。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-08-10T23:05:01.470

您可能可以从当前文化中获取小数分隔符和列表分隔符。

```
CultureInfo culture = new CultureInfo(currentCultureName);
string decimalSeparator = culture.NumberFormat.NumberDecimalSeparator;
string listSeparator = culture.TextInfo.ListSeparator; 
```

并且，如果写入的值包含任何分隔符，则将该值括在双引号内。

```
string val = values[i].ToString(CultureInfo.InvariantCulture);
if(val.Contains(decimalSeparator) || val.Contains(listSeparator))
{
    val = string.Format("\"{0}\"", val);
}
m_StreamWriter.Write(val);
m_StreamWriter.Write(listSeparator); 
```

当前的文化名称可能是这样的：“en-US”代表美利坚合众国。

希望这可以帮助！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-29T11:39:03.393

解决德国文化问题的一个快速解决方案是将这些双值嵌入引号。结果：

```
English: "10.5","20.3","30.2"
German: "10,5","20,3","30,2" 
```

[http://en.wikipedia.org/wiki/Comma-separated_values](http://en.wikipedia.org/wiki/Comma-separated_values)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-11T13:07:12.137

这个问题没有简单的解决方案：CSV*不是*文件格式定义（尽管有 RFC 4180）。

例如，Excel 使用用户设置的本地化列表分隔符和本地化数据格式读取和保存 csv。这样，CSV 中的“逗号”并不意味着逗号，而是通用列表分隔符（对于许多欧盟国家来说，这是分号，正如 Tim Schmelter 所说）。

如果值用引号引起来，它们通常被视为字符串。Excel 无论如何都会尝试解析 CSV 行的引用元素，因此这似乎在非常特殊的情况下有效。

问题是 CSV 文件的写入者和读取者都应该使用相同的文化，否则几乎所有不是字符串的东西都会出现问题（数字是一个，日期/时间是另一个问题来源）。

我对日期使用经验派生的解决方案，由格式 string 组成`yyyy/MM/dd HH:mm:ss`。我观察到它允许在 Excel 和我的程序之间交换工作日期，可以用英语或意大利语互换。

我仍然没有找到十进制数的通用解决方案。我怀疑科学记数法可能会，但还没有时间测试。

# android - 并非所有版本设备都支持phonegap设计

> ID：11260832
> 
> 赞同：1
> 
> 时间：2012-06-29T11:18:30.480
> 
> 标签：android, jquery, cordova

我在 android phonegap 中开发了应用程序。我有**页眉**、**页脚**和 8个**文本框**。但是我在不同的**模拟器中得到了不同的****设计**。它没有正确安装在所有移动设备中。

 **请指导我。

```
<!DOCTYPE HTML>
<html>
  <head>
    <meta name="viewport" content="width=320; user-scalable=no" />
    <meta http-equiv="Content-type" content="text/html; charset=utf-8">
    <meta name="inmobi-site-verification" content="d7e348f871ce2cfa2baee7c23da4d1d8">
    <title>PhoneGap</title>
     <script type="text/javascript" charset="utf-8" src="../js/main.js"></script>
    <link rel="stylesheet" href="../js/master.css" type="text/css" media="screen" title="no title" charset="utf-8">
    <script src="../Scripts/jquery-1.4.1-vsdoc.js" type="text/javascript"></script>
    <script src="../Scripts/jquery-1.4.1.js" type="text/javascript"></script>

    <script type="text/javascript" charset="utf-8" src="../js/cordova-1.7.0.js"></script>
    <script type="text/javascript">
        </script>
     <style type="text/css">
     #footer {
    position:absolute;
 bottom:0;
    width:100%;

}
    ul.sidemenu
{
    padding:0;
    margin:0;
    list-style:none;
    font-size:2em;
    border-top:1px solid #000000;
    border-left:1px solid #000000;
    border-right:1px solid #000000;

    border-bottom:1px solid #000000;
    width:260px;
    border-radius:5px 5px 5px 5px;
    background-color:#FFFFFF;
    }
    .searchbox input {
border-top-left-radius: 10px;
border-bottom-left-radius: 10px;

margin-top:0.2cm;

margin-left:1cm;
width:70%;
height: 32px;
float: left;
font-size:15pt;
padding: 2px;
border-top: 4px solid orange;
border-bottom: 4px solid orange;
border-left: 4px solid orange;

}
.sea input {
border-top-right-radius: 10px;
border-bottom-right-radius: 10px;
margin-top:0.2cm;

background-image: url(sea.PNG);
color: #fff;
font-weight: bold; 

width:10%; 
height: 43px;
border: 0;
float: left;
border-top: 4px solid orange;
border-bottom: 4px solid orange;
border-right: 4px solid orange;
}

    </style>
 </head>

 <body id="body">

    <div id="header" style="top;0;width:100%">
    <div style="height:10%;border-width:3px;border-height:6px;background-color:#00458D;" align="center">
    <h1>Header</h1>
    </div>
    </div>
 <br>   
    <table>
        <tr>
            <td></td>
            <td></td>

            <td><label style="font-size:12pt">Choose one of the following options to search our directory of causes</label></td>
            <td></td>
            <td></td>

        </tr>
    </table>

    <div align="center">
    <div class="searchbox"><input type="text" name="searchbox" id="searchbox" placeholder="Search"></div>
<div class="sea"><input name="search" type="button" id="btn"></div>
</div>
      <br/>
      <br/>
     <div align="center">
    <div class="searchbox"><input type="text" name="searchbox" id="searchbox" placeholder="Search"></div>
<div class="sea"><input name="search" type="button" id="btn"></div>
</div>
<br/>
<br/>
<div align="center">
    <div class="searchbox"><input type="text" name="searchbox" id="searchbox" placeholder="Search"></div>
<div class="sea"><input name="search" type="button" id="btn"></div>
</div>
<br/>
<br/>
<div align="center">
    <div class="searchbox"><input type="text" name="searchbox" id="searchbox" placeholder="Search"></div>
<div class="sea"><input name="search" type="button" id="btn"></div>
</div>
<br/>
<br/>
<div align="center">
    <div class="searchbox"><input type="text" name="searchbox" id="searchbox" placeholder="Search"></div>
<div class="sea"><input name="search" type="button" id="btn"></div>
</div>
      <br/>
      <br/>
     <div align="center">
    <div class="searchbox"><input type="text" name="searchbox" id="searchbox" placeholder="Search"></div>
<div class="sea"><input name="search" type="button" id="btn"></div>
</div>
<br/>
<br/>
<div align="center">
    <div class="searchbox"><input type="text" name="searchbox" id="searchbox" placeholder="Search"></div>
<div class="sea"><input name="search" type="button" id="btn"></div>
</div>
<br/>
<br/>
<div align="center">
    <div class="searchbox"><input type="text" name="searchbox" id="searchbox" placeholder="Search"></div>
<div class="sea"><input name="search" type="button" id="btn"></div>
</div>
     <div id="footer" >
        <div style="height:15%;border-width:3px;border-height:6px;background-color:#00458D;" align="center">
        <h3>Footer</h3> </div>
        </div>
 </body>
</html> 
```

我在 Droid 模拟器中的设计

![机器人模拟器](../Images/b34f290f6875ea703b09194c830eceb7.png)

Galaxy Tab 中的设计

![银河模拟器](../Images/f10ab3cbbd19ab2413bf8d1c81dbb3c8.png)

Android 4.2 中的设计

![Android 4.2-模拟器](../Images/60cb99807e5942d6acafc6be3e7f3630.png)**

# asp.net-web-api - 谷歌 N-Gram 网络 API

> ID：11260833
> 
> 赞同：22
> 
> 时间：2012-06-29T11:18:36.143
> 
> 标签：asp.net-web-api

我希望在我的项目中使用 Google 2-grams；但是数据大小使搜索在速度和存储方面都变得昂贵。
是否有可用于此目的的 Web-API（任何语言）？网站[http://books.google.com/ngrams/graph](http://books.google.com/ngrams/graph)呈现图像，我可以获取数据值吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-07-02T08:36:06.823

好吧，我得到了一个关于这样做的方法，使用[谷歌 BigQuery](https://developers.google.com/bigquery/)
在那里，三元组在公共领域是可用的。使用[命令行访问](https://developers.google.com/bigquery/docs/hello_bigquery)为我完成了这项工作。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2014-03-25T17:22:47.733

我找到了一个不错的选择：**Microsoft Web N-Gram**

它可以通过不同的方式进行查询，包括通过[REST 接口](http://web-ngram.research.microsoft.com/info/rest.html)的直接 GET 调用。例如，调用 URL：

```
http://weblm.research.microsoft.com/weblm/rest.svc/bing-body/apr10/1/jp?u={YOUR_TOKEN}&p=red+panda 
```

返回

```
-9.005 
```

这是短语的对数似然`red panda`。

此外，它比 Google N-Grams 更方便，对于给定的短语，它不仅可以输出其绝对频率，还可以输出其联合概率、条件概率甚至最可能出现的单词。

*免责声明：我不是 Microsoft 员工，我只是认为我刚刚发现了一项很棒的服务。*

# android - 在 oncreat() 方法中调用布局更新失败

> ID：11260838
> 
> 赞同：1
> 
> 时间：2012-06-29T11:18:52.850
> 
> 标签：android, layout

我对布局更新有疑问。我有这样的方法：

```
public  void changeview(){
    tabHost.getTabWidget().getChildAt(1).setVisibility(View.GONE);
    tabHost.getTabWidget().getChildAt(2).setVisibility(View.GONE);
    tabHost.getTabWidget().getChildAt(3).setVisibility(View.VISIBLE);
    tabHost.getTabWidget().getChildAt(0).setVisibility(View.VISIBLE);

    try{
        periodicCheck.setVisibility(View.GONE);
        periodiCheckText.setVisibility(View.GONE);
        MessageDelayText.setVisibility(View.GONE);
    }catch (Exception e) {
        throw new Error("set visibility failed: "+e);
    } 
```

当我从 button 的单击侦听器调用该方法时，它可以正常工作，但是当我在 Acitivity 类的 oncreate() 方法中调用该方法时，什么也没有发生。

我只是想知道也许我需要刷新布局但我不确定？我试图通过实现以下代码来使用无效方法，但仍然没有发生任何事情。

```
ViewGroup vg = (ViewGroup) findViewById (R.id.main);
vg.invalidate(); 
```

我将不胜感激任何建议。

提前谢谢了

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T11:22:07.203

从**onWindowFocusChanged()**调用它。这实际上是 Activity 的一个抽象方法，一旦你的 View 被绘制就会被调用。将此覆盖到您的活动并检查，

```
@Override
public void onWindowFocusChanged(boolean hasFocus) {
changeview();
super.onWindowFocusChanged(hasFocus);
} 
```

# c# - 从选定的datagridview行和哪个事件获取数据？

> ID：11260843
> 
> 赞同：43
> 
> 时间：2012-06-29T11:19:15.987
> 
> 标签：c#, winforms, datagridview

我在 Windows 窗体上有一个 DataGridView (Selectionmode: FullRowSelect) 以及一些文本框，所以我想做的是，每当用户选择一行（可能单击或双击）时，该行的内容必须显示在文本中盒子，

我试过这个代码

```
private void dataGridView1_CellDoubleClick(object sender, DataGridViewCellEventArgs e)
{
    MessageBox.Show("CEll Double_Click event calls");
    int rowIndex = e.RowIndex;
    DataGridViewRow row = dataGridView1.Rows[rowIndex];
    textBox5.Text = row.Cells[1].Value;
}

private void dataGridView1_CellClick(object sender, DataGridViewCellEventArgs e)
{
    int rowIndex = e.RowIndex;
    DataGridViewRow row = dataGridView1.Rows[rowIndex];
    textBox5.Text = dataGridView1.Rows[1].Cells[1].Value.ToString();// row.Cells[1].Value;
} 
```

还有许多其他文本框，但主要问题是似乎没有触发任何事件，我应该使用什么事件来这样做，或者我可能设置错误的数据网格的某些属性？任何帮助，将不胜感激...：（

* * *

## 回答 #1

> 赞同：62
> 
> 时间：2012-07-02T12:11:17.557

您可以使用 SelectionChanged 事件，因为您使用的是 FullRowSelect 选择模式。在处理程序内部，您可以访问 SelectedRows 属性并从中获取数据。例子：

```
private void dataGridView_SelectionChanged(object sender, EventArgs e) 
{
    foreach (DataGridViewRow row in dataGridView.SelectedRows) 
    {
        string value1 = row.Cells[0].Value.ToString();
        string value2 = row.Cells[1].Value.ToString();
        //...
    }
} 
```

您还可以遍历列集合而不是键入索引...

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2014-06-01T15:09:05.857

你可以试试这个点击事件

```
private void dataGridView1_CellContentClick(object sender, DataGridViewCellEventArgs e)
{
    if (e.RowIndex >= 0)
    {
        DataGridViewRow row = this.dataGridView1.Rows[e.RowIndex];
        Eid_txt.Text = row.Cells["Employee ID"].Value.ToString();
        Name_txt.Text = row.Cells["First Name"].Value.ToString();
        Surname_txt.Text = row.Cells["Last Name"].Value.ToString(); 
```

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2013-05-14T13:02:05.653

首先取一个标签。将其可见性设置为 false，然后在 DataGridView_CellClick 事件上写下这个

```
private void dataGridView1_CellClick(object sender, DataGridViewCellEventArgs e)
{
    label.Text=dataGridView1.Rows[e.RowIndex].Cells["Your Coloumn name"].Value.ToString();
    // then perform your select statement according to that label.
}
//try it it might work for you 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-02-01T05:26:09.880

您应该检查您的设计器文件。打开 Form1.Designer.cs 并找到这一行：

```
windows Form Designer Generated Code. 
```

展开这个，你会看到很多代码。所以检查这条线是否存在于datagridview1控件中，如果没有放置它。

```
this.dataGridView1.CellClick += new System.Windows.Forms.DataGridViewCellEventHandler(this.dataGridView1_CellClick); 
```

我希望它有所帮助。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2014-11-28T08:16:30.900

简单的解决方案如下。这是来自 vale 的解决方案的改进。

```
private void dgMapTable_SelectionChanged(object sender, EventArgs e) 
{
    int active_map=0;
    if(dgMapTable.SelectedRows.Count>0)
        active_map = dgMapTable.SelectedRows[0].Index;
    // User code if required Process_ROW(active_map);
} 
```

其他读者请注意，以上代码`FullRowSelect`应使用 datagridview 的工作选择模式。如果选择的行超过两行，您可以扩展它以提供消息。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-06-20T03:54:02.143

您可以使用 SelectionChanged 事件。CurrentRow.DataBoundItem 将给出绑定项目。

SelectionMode 属性应该是全行选择。

var item = ([CastToBindedItem])dataGridLocations.CurrentRow.DataBoundItem; tbxEditLocation.Text = item.Name;

# git - 使用 Git 扩展的交互式变基

> ID：11260846
> 
> 赞同：10
> 
> 时间：2012-06-29T11:19:25.887
> 
> 标签：git, git-rebase, git-extensions

有没有人设法使用 Git Extensions 进行交互式变基？

变基时选项可用，但每当我选择最后 n 次提交时，在变基窗口中选择“交互式”，编辑器会弹出“noop”注释而不是提交行。

我哪里错了？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-29T11:34:30.227

默认情况下，Git 扩展将分支设置为基于您当前正在处理的分支。所以，除非你改变它，否则你无事可做，你会得到这个“noop”消息。您必须针对不是您当前的 HEAD 的东西重新设置基准。要么是从你的脑海中返回的一些提交（例如 HEAD~4），要么是你的分支的源版本（例如：origin/master）或特定的命名提交。

# .net - LINQ Lambda 中的继承和多态性

> ID：11260854
> 
> 赞同：1
> 
> 时间：2012-06-29T11:19:52.227
> 
> 标签：.net, linq, inheritance, lambda, .net-4.5

我有几个类继承自基类

```
Public MustInherit Class BaseClass
    Public Property Name as String
End Class

Public MustInherit Class ClassA
    Inherits BaseClass
    Public Property Something As String
End Class

Public MustInherit Class ClassB
    Inherits BaseClass
    Public Property SomethingElse As String
End Class 
```

我希望能够使用单个表达式来查询多个对象列表，所有这些都继承自同一个基类

```
Public Function DoStuff(Expression as System.Linq.Expressions.Expression(Of Func(Of BaseClass, Boolean)))
    Dim ListA As New List(Of ClassA) ''Populating this elsewhere
    Dim ListB As New List(Of ClassB) ''and this

    Dim ResultSetA = ListA.Where(Expression) ''Problems on this line
    Dim ResultSetB = ListA.Where(Expression) ''and this
End Function 
```

由于两者都`ClassA`继承`ClassB`自同一个基类，并且由于 LINQ 查询是针对基类的，因此它*应该可以*工作。`Expression`只能引用基类的属性，这些属性保证在两个派生类上都存在，但我得到以下编译时键入错误：

```
Value of type 'System.Linq.Expressions.Expression(Of System.Func(Of BaseClass, Boolean))' cannot be converted to 'System.Linq.Expressions.Expression(Of System.Func(Of ClassA, Boolean))' 
```

有什么办法可以添加一个扩大的转换（或类似的东西）来让它工作吗？

还是我需要针对每个派生类多次提供完全相同的查询？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-29T12:17:53.320

你需要`AsQueryable()`你的清单（下面的c#语法）

```
var ResultA = lista.AsQueryable().Where(expression); 
```

然后，如果需要，您可以将结果转换回原始类型

```
 foreach (var x in ResultA)
 {
      Response.Write(((ClassA)x).Something);
 } 
```

# java - JPA 和泛型

> ID：11260856
> 
> 赞同：12
> 
> 时间：2012-06-29T11:20:04.363
> 
> 标签：java, generics, jpa

我想知道带有泛型的抽象类将如何处理 JPA？我的意思是该领域需要什么样的注释？

考虑这些：

```
@MappedSuperclass
public abstract class AbstractMyClass<T> {
  // What about Strings and Integers? Do I need some kind of @LOB?
  private T field;

  public T getField() {
    return field;
  }

  public void setField(T field) {
    this.field = field;
  }
} 
```

然后这些

```
@Entity
@Table(name = "String")
public class MyStringClass extends AbstractMyClass<String> {
}

@Entity
@Table(name = "Integer")
public class MyIntegerClass extends AbstractMyClass<Integer> {
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-10T11:42:39.583

JPA 完全能够处理您提出的建议，因为泛型出现在抽象类级别，而对于您的具体类，每个类只有一个值。事实上，JPA 将根据您选择的@InheritanceStrategy 将您的子类存储在一个或多个表中，并为此使用不同的机制。

您可以自己弄清楚为什么您的案例不是问题，推理 ORM 如何将这两个类保存在数据库中：

*   您可以将 MyStringClass 和 MyIntegerClass 存储在同一个表中，添加一个 Discriminator 列，以便 ORM 在从 DB 加载时知道应该调用哪个构造函数。
*   您可以将每个子类存储在更多表中。

另一方面，不可能定义一个泛型

```
@Entity
@Table(name = "MyGenericClass")
public class MyGenericClass<T> {
    private T t;
    public MyGenericClass(T t) {
       this.t=t;
    }
} 
```

这样做的原因是，在编译时， T 由于类型擦除而被“擦除”。它在编译时用于验证签名和类型的正确性，但随后它在 JVM 中变成了 java.lang.Object。如果你遵循到现在，你应该能够理解以下内容：

*   在您的情况下， AbstractMyClass 的每个具体子类都有一个类型 T ，该类型是为该类的所有实例定义的。虽然 T 信息不保留在 AbstractMyClass 中，但它在子类中保留且唯一。
*   在我发布的第二种情况下，MyGenericClass 的每个可能的具体实例都可能具有不同的 T 值，并且由于类型擦除，此信息不会保留。

*注意：第二种情况无法由 JPA 处理是绝对合理的，如果您遇到这种情况，您应该问自己有关您的设计的问题。泛型是设计灵活类的好工具，可以以类型安全的方式处理其他类，但类型安全是一种与持久性无关的编程语言概念。

* * *

额外：您可以使用 javap 来查看真正的擦除内容。从 MyGenericClass 中取出注释并编译它。

```
G:\>javac MyGenericClass.java

G:\>javap -p MyGenericClass
Compiled from "MyGenericClass.java"
public class MyGenericClass extends java.lang.Object{
    private java.lang.Object t;
    public MyGenericClass(java.lang.Object);
} 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2015-12-14T15:07:20.287

我们可以。如果`T`工具`Serializable`

```
@Entity
public class IgsSubject extends BasicObject implements Serializable{

    private static final long serialVersionUID = -5387429446192609471L;

@MappedSuperclass
public class IgsBasicLog<T> extends BasicObject {

    @ManyToOne
    @JoinColumn(name = "ITEM_ID")
    private T item;

@Entity
public class IgsLogA extends IgsBasicLog<IgsSubject> implements Serializable {
    private static final long serialVersionUID = -8207430344929724212L;
} 
```

# vmware - 在黑莓剧本模拟器上加载应用程序遇到错误

> ID：11260857
> 
> 赞同：0
> 
> 时间：2012-06-29T11:20:04.490
> 
> 标签：vmware, blackberry-playbook, qnx

我使用 QNX 在 BlackBerry playbook native sdk 中开发了一个应用程序。我尝试在模拟器（在 vmware 中运行）上对其进行测试，出现类似`"'Downloading and starting the application...' has encoundered a problem"`. 下面附上截图![](../Images/5b739a36028f337e92e0058f84c89b45.png)

**更新**

我在开发人员 alpha 设备上对其进行了测试，结果很好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T18:16:59.250

您似乎正在尝试在运行 PlayBook OS 2.1.0 的 BlackBerry PlayBook 上运行使用 BlackBerry 10 NDK 构建的应用程序。通常，NDK 中构建的应用程序向前兼容，但不向后兼容。

您需要使用 2.x 版 BlackBerry NDK 为运行 2.1.0 的 PlayBook 构建应用程序。

# c# - 如何使用 asp.net 将 gridview 图像和数据导出到 PDF 或使用 asp.net 将 gridview 数据导出到 PDF

> ID：11260859
> 
> 赞同：2
> 
> 时间：2012-06-29T11:20:16.417
> 
> 标签：c#, asp.net, ajax, components

```
protected void Button4_Click(object sender, EventArgs e)
{
    Response.ContentType = "application/pdf";
    Response.AddHeader("content-disposition","attachment;filename=GridViewExport.pdf");
    Response.Cache.SetCacheability(HttpCacheability.NoCache);
    StringWriter sw = new StringWriter();
    HtmlTextWriter hw = new HtmlTextWriter(sw);
    GridView1.AllowPaging = false;
    GridView1.DataBind();
    GridView1.RenderControl(hw);
    StringReader sr = new StringReader(sw.ToString());
    Document pdfDoc = new Document(PageSize.A4, 10f, 10f, 10f, 0f);
    HTMLWorker htmlparser = new HTMLWorker(pdfDoc);
    PdfWriter.GetInstance(pdfDoc, Response.OutputStream);
    pdfDoc.Open();
    htmlparser.Parse(sr);//this is the error line
    pdfDoc.Close();
    Response.Write(pdfDoc);
    Response.End();  
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T11:27:04.967

您将不得不为此使用第 3 方控制尝试使用 iText Sharp 库，它是免费的

欲了解更多信息，[请访问此处](http://www.codeproject.com/Articles/81118/ITextSharp-Helper-Class)

# jquery - 如何在 asp.net 中使用 jquery 创建网格视图并单击选择字段列，然后单击更新、删除和插入新记录

> ID：11260860
> 
> 赞同：3
> 
> 时间：2012-06-29T11:20:27.373
> 
> 标签：jquery, c#-4.0

我想在 asp.net（C#）中使用 jQuery 创建一个网格视图，其中是一个列（选择），然后单击选择链接在我想使用 jquery 编辑、删除、插入记录的编辑表单中显示所有记录。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T07:17:58.467

有一个很好的例子。[示例](http://editor.datatables.net/release/DataTables/extras/Editor/examples/events_keySubmit.html) 您可以为此使用 json jquery 和 http 处理程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T08:16:26.637

您可以使用 .append(html 文本文件) 创建一个表

然后使用 .ajax() 或 .post() 将数据发送到代码隐藏并以加载的形式，你可以做任何你想做的事情，重要的部分是使用 .append() 创建它。

# java - 使用 request.getRequestDispatcher("../login.jsp") 重定向时，url 不会改变

> ID：11260863
> 
> 赞同：1
> 
> 时间：2012-06-29T11:20:34.967
> 
> 标签：java, jsp, servlets

在会话注销时，页面应重定向到`login.jsp`.

如果我使用它会重定向到 login.jsp，`request.getRequestDispatcher("../login.jsp").forward(request, response)`但 url 没有改变。

我应该怎么做才能让它也改变url并将我重定向到登录页面？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-29T11:22:18.823

你需要使用

```
response.sendRedirect("/yourcontextPath/login.jsp); 
```

* * *

**看**

*   [转发和重定向的区别](https://stackoverflow.com/questions/8646650/difference-between-forwarding-and-redirection)

# php - PHP - 上传图片并显示在页面上

> ID：11260867
> 
> 赞同：3
> 
> 时间：2012-06-29T11:20:49.870
> 
> 标签：php, html

以下代码允许我将图片（使用 html 表单）上传到服务器上的目录。

```
<?php 

    $target = "http://www.mockcourt.org.uk/user/htdocs/pics/2012/";
    $target = $target . basename( $_FILES['uploaded']['name']); 
    $ok=1; 

    if (move_uploaded_file($_FILES['uploaded']['tmp_name'], $target)) 
    {
        echo "The file ". basename( $_FILES['uploadedfile']['name']). " has been uploaded";
    } 
    else
    {
        echo "Sorry, there was a problem uploading your file.";
    }
?> 
```

有没有办法修改它，以便将图片添加到 html 页面？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-29T11:41:00.950

那么上传后，你可以使用javascript将它放在html页面上。

不过，我不太确定您的问题是什么

**编辑：**

因此，页面上的 html 表单：

```
<form action="imageUpload.php" method="post" enctype="multipart/form-data" target="upload_target"  onsubmit="jupload();"  id="form1" >
    <div style="visibility:'hidden';" class="imageholder"> <!-- a gif image to show that the process wasn't finished -->
    </div>
    <input type="file" name="imgfile" /> 
    <input type="submit" name="uploadButton" class="upbtn" value="Submit" />
</form> 
```

上传和图片的 Javascript(JQUERY) 代码添加：

```
function jupload()
{
    $(".imageholder").append('<img src="./images/loading.gif">');
}

function juploadstop(result)
{
    if(result==0)
    {
        $(".imageholder").html("");

    }
    // the result will be the path to the image
    else if(result!=0)
    {
        $(".imageholder").html("");
        // imageplace is the class of the div where you want to add the image  
        $(".imageplace").append("<img src='"+result+"'>");
    }   
} 
```

php代码：

```
<?php
    $target = "http://www.mockcourt.org.uk/user/htdocs/pics/2012/";
    $target = $target . basename( $_FILES['uploaded']['name']) ; 
    $ok=1; 

    if (move_uploaded_file($_FILES['uploaded']['tmp_name'], $target)) 
    {
        $result=$target;
    } 
    else
    {
        $result=0;
    }
?>

<script language="javascript" type="text/javascript">
    window.top.window.juploadstop(<?php echo $result; ?>);
</script> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-29T13:40:21.887

假设您有 HTML 格式的表单来提交图像.. 制作提交按钮，而不是提交按钮，而只是一个按钮.. 例如

```
<input type='button' id='submit_form' value='upload' /> 
```

并在 javascript 中，使用 Ajax 提交表单并使用 Jquery 将其显示在网页中

```
$('#submit_form')click(function(){
  $.ajax({
    type: 'POST',
    url: path/phpfile.php,
    data: image_input_name
  });

//after submitting, get the url of the image form the server

  $('#div_to_display_image').html("<img src='path/image_file.jpg' alt='this' />");

}); 
```

希望这可以帮助 ：-）

# android - Eclipse Juno - 断言失败（从插件调用代码时出现问题：“org.eclipse.jface”。）

> ID：11260868
> 
> 赞同：5
> 
> 时间：2012-06-29T11:20:50.707
> 
> 标签：android, eclipse, eclipse-juno

我最近`Eclispe Juno for Java`为`Android`. 我通常`.`在类名后按下以了解关联的方法，以防我希望选择其他方法而不是已从该列表中选择的方法，IDE 中会弹出以下错误。

如何告诉 IDE 这不是错误，不需要一次又一次地弹出此消息？

![在此处输入图像描述](../Images/f3cfd087c83d033d21cdbf7d61265122.png)

以下是来自 Eclipse 的错误日志

```
!ENTRY org.eclipse.jface 4 2 2012-07-01 02:04:29.242
!MESSAGE Problems occurred when invoking code from plug-in: "org.eclipse.jface".
!STACK 0
org.eclipse.core.runtime.AssertionFailedException: assertion failed: 
    at org.eclipse.core.runtime.Assert.isTrue(Assert.java:110)
    at org.eclipse.core.runtime.Assert.isTrue(Assert.java:96)
    at org.eclipse.ui.texteditor.EditorStatusLine$StatusLineClearer.selectionChanged(EditorStatusLine.java:41)
    at org.eclipse.jface.viewers.Viewer$2.run(Viewer.java:164)
    at org.eclipse.core.runtime.SafeRunner.run(SafeRunner.java:42)
    at org.eclipse.ui.internal.JFaceUtil$1.run(JFaceUtil.java:49)
    at org.eclipse.jface.util.SafeRunnable.run(SafeRunnable.java:175)
    at org.eclipse.jface.viewers.Viewer.fireSelectionChanged(Viewer.java:162)
    at org.eclipse.jface.text.TextViewer.fireSelectionChanged(TextViewer.java:2738)
    at org.eclipse.jface.text.TextViewer.selectionChanged(TextViewer.java:2717)
    at org.eclipse.jface.text.TextViewer.setSelectedRange(TextViewer.java:2402)
    at org.eclipse.jface.text.link.LinkedModeUI.select(LinkedModeUI.java:933)
    at org.eclipse.jface.text.link.LinkedModeUI.switchPosition(LinkedModeUI.java:851)
    at org.eclipse.jface.text.link.LinkedModeUI.next(LinkedModeUI.java:798)
    at org.eclipse.jface.text.link.LinkedModeUI.enter(LinkedModeUI.java:717)
    at org.eclipse.jdt.internal.ui.text.java.ParameterGuessingProposal.apply(ParameterGuessingProposal.java:174)
    at org.eclipse.jdt.internal.ui.text.java.AbstractJavaCompletionProposal.apply(AbstractJavaCompletionProposal.java:477)
    at org.eclipse.jdt.internal.ui.text.java.LazyJavaCompletionProposal.apply(LazyJavaCompletionProposal.java:488)
    at org.eclipse.jface.text.contentassist.CompletionProposalPopup.insertProposal(CompletionProposalPopup.java:940)
    at org.eclipse.jface.text.contentassist.CompletionProposalPopup.insertSelectedProposalWithMask(CompletionProposalPopup.java:891)
    at org.eclipse.jface.text.contentassist.CompletionProposalPopup.verifyKey(CompletionProposalPopup.java:1323)
    at org.eclipse.jface.text.contentassist.ContentAssistant$InternalListener.verifyKey(ContentAssistant.java:808)
    at org.eclipse.jface.text.TextViewer$VerifyKeyListenersManager.verifyKey(TextViewer.java:491)
    at org.eclipse.swt.custom.StyledTextListener.handleEvent(StyledTextListener.java:65)
    at org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:84)
    at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:1053)
    at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:1077)
    at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:1062)
    at org.eclipse.swt.widgets.Widget.notifyListeners(Widget.java:774)
    at org.eclipse.swt.custom.StyledText.handleKeyDown(StyledText.java:5932)
    at org.eclipse.swt.custom.StyledText$7.handleEvent(StyledText.java:5629)
    at org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:84)
    at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:1053)
    at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:1077)
    at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:1062)
    at org.eclipse.swt.widgets.Widget.sendKeyEvent(Widget.java:1104)
    at org.eclipse.swt.widgets.Widget.sendKeyEvent(Widget.java:1100)
    at org.eclipse.swt.widgets.Widget.wmChar(Widget.java:1521)
    at org.eclipse.swt.widgets.Control.WM_CHAR(Control.java:4640)
    at org.eclipse.swt.widgets.Canvas.WM_CHAR(Canvas.java:345)
    at org.eclipse.swt.widgets.Control.windowProc(Control.java:4528)
    at org.eclipse.swt.widgets.Canvas.windowProc(Canvas.java:341)
    at org.eclipse.swt.widgets.Display.windowProc(Display.java:4976)
    at org.eclipse.swt.internal.win32.OS.DispatchMessageW(Native Method)
    at org.eclipse.swt.internal.win32.OS.DispatchMessage(OS.java:2546)
    at org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:3756)
    at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine$9.run(PartRenderingEngine.java:1022)
    at org.eclipse.core.databinding.observable.Realm.runWithDefault(Realm.java:332)
    at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine.run(PartRenderingEngine.java:916)
    at org.eclipse.e4.ui.internal.workbench.E4Workbench.createAndRunUI(E4Workbench.java:86)
    at org.eclipse.ui.internal.Workbench$5.run(Workbench.java:585)
    at org.eclipse.core.databinding.observable.Realm.runWithDefault(Realm.java:332)
    at org.eclipse.ui.internal.Workbench.createAndRunWorkbench(Workbench.java:540)
    at org.eclipse.ui.PlatformUI.createAndRunWorkbench(PlatformUI.java:149)
    at org.eclipse.ui.internal.ide.application.IDEApplication.start(IDEApplication.java:124)
    at org.eclipse.equinox.internal.app.EclipseAppHandle.run(EclipseAppHandle.java:196)
    at org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.runApplication(EclipseAppLauncher.java:110)
    at org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.start(EclipseAppLauncher.java:79)
    at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:353)
    at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:180)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.eclipse.equinox.launcher.Main.invokeFramework(Main.java:629)
    at org.eclipse.equinox.launcher.Main.basicRun(Main.java:584)
    at org.eclipse.equinox.launcher.Main.run(Main.java:1438) 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-20T17:04:39.053

如前所述，问题是由插件引起的`Coffee-Byte plugin for Eclipse`。我设法解决了这个问题，至少对我自己而言；禁用除`Import Statements`、`Source Headers`、`Javadocs`和之外的所有内容`User Defined Regions`。我不得不手动将区域添加到方法模板中以使它们自动折叠，但对于自定义折叠来说这是一个很小的代价。

此外，如果有人有兴趣修复它，则只有在**Preferences->Java->Editor**中启用了**Report questions as you type**时才会发生错误。如果禁用，则所有类型的折叠工作。

 ****更新**：我目前正在使用`Eclipse`version`Kepler Service Release 1`和 build id `20130919-0819`。我已重新启用`Normal Methods`,`Constructors`和`Getters and setters`; 到目前为止，断言错误还没有出现。看来问题已经解决了**。**

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-30T21:32:32.200

看起来问题是由`Coffee-Byte plugin of Eclipse`（用于折叠的插件）[http://kosiara87.blogspot.in/2011/12/how-to-install-coffee-bytes-plugin-in.html?showComment=1341091754230#c8853438068212069468](http://kosiara87.blogspot.in/2011/12/how-to-install-coffee-bytes-plugin-in.html?showComment=1341091754230#c8853438068212069468)引起的。**

# php - 打印变量对齐

> ID：11260876
> 
> 赞同：1
> 
> 时间：2012-06-29T11:21:11.787
> 
> 标签：php

我手动执行查询并将输出复制粘贴到编辑器。现在它很好地对齐，如：

> 你好，
> 
> 这是样本数据。
> 
> 谢谢。

如果我将查询的输出存储在 php 变量中并使用 echo 命令打印它，则它没有对齐。看起来像

> 你好，这是样本数据。谢谢。

是否可以像在 php 中一样打印输出？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T11:23:18.280

你需要`<pre>`标签。但我建议你应该用正确的 html 来格式化它

```
echo "<pre>".$youvariable."</pre>"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T11:24:39.323

PHP 打印得非常好。但是，如果您在浏览器中查看它，浏览器会将**连续的空格和换行符折叠成一个空格**。用标签替换换行符`<br>`以保留它们，使用[`nl2br`](http://php.net/nl2br).

# c - 将节点添加到链表中，就在头部之后

> ID：11260880
> 
> 赞同：3
> 
> 时间：2012-06-29T11:21:21.580
> 
> 标签：c

我有一个链表，我需要在头部之后创建一个节点..

这意味着我有这样的事情：

`node *head = NULL;`

最后我的链表应该是这样的：

`head -> node -> NULL`...

但是当我使用普通的 addNode 函数时，它会给我一个运行时错误（不确定是哪个，我的调试有问题）...

这就是我写的：

```
void addNode(node *head)
{
node *temp = head; // a temp to not move the head
node *newNode = (node*)malloc(sizeof(node)); // The new node

while (temp -> next != NULL)
{
    temp = temp -> next // Getting to the last node
}

temp -> next= newNode; // Adding the new node into the linked list insted of the NULL
newNode -> next = NULL; // Adding the NULL after the new node
} 
```

当我有一个已经有 1 个或多个节点的链表时，这段代码对我很有用，但是如果链表只有一个头，它对我有问题......我该如何解决这个问题？

（如果您不理解我的问题 - 使用我在这里编写的 addNode 函数，我在将新节点添加到已经指向 NULL 的头部时遇到运行时错误）..

谢谢，阿米特:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-29T11:22:32.863

需要检查`head`入口是否为 NULL，否则将取消引用空指针：

```
node *temp = head; /* temp set to head, possibly null. */

while (temp->next != NULL) /* 'temp' dereferenced, undefined behaviour
                              if 'temp' is null. */ 
```

为了让调用者看到更改，您需要传入 a `node**`（如[wildplasser](https://stackoverflow.com/users/905902/wildplasser)建议的那样），因为 C 通过值传递参数。更改为（例如）：

```
void addNode(node **head)
{
    node *newNode = malloc(sizeof(node)); /* No need to cast. */
    if (newNode)
    {
        newNode->next = NULL;

        if (NULL == *head)
        {
            *head = newNode; /* Set the head, as there isn't one yet. */
        }
        else
        {
            node* temp = *head;
            while (temp->next) temp = temp->next;
            temp->next = newNode;
        }
    }
} 
```

这将被称为：

```
node* my_list = NULL;
addNode(&my_list); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-29T11:23:33.980

您必须检查 Head 是否为空。否则当您尝试检查时

```
head->next != NULL 
```

head 是 NULL 所以你指的是内存中的随机位置

如果 head 为 NULL，则不能在 head 之后添加节点。您必须为 head 分配内存，然后设置“下一个”指针。顺便说一句，为什么你想在 head 为空时设置 head->next？

编辑

也许您应该尝试将标志添加到诸如 bool active 之类的节点，并在您想要传递它时将其设置为 false。

我会试着用另一种方式说出来。你不能设置 head->next 因为 head 是 NULL。NULL 意味着，它只是一个指针，无处可去。这是一个变量，您可以在其中放置一些地址，但没有别的。如果你想有一个结构，比如节点，你必须在那里放置节点类型的新对象的地址：

```
Node element = malloc(sizeof(Node));
head = element; 
```

之后，您将拥有 Node 对象的头地址，并且您将能够撤销此结构内的变量（如 Node *next）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-29T11:27:54.277

您可以使用指向指针的指针：

```
void addNode(node **pp)
{
node *newNode = malloc(sizeof *newNode); // The new node

if (newNode) {
    newNode->next = *pp; // steal the parent. (this will also work if *pp happens to be NULL)
    *pp = newNode;       // let *pp point to the new node
    }
} 
```

被称为：

```
...
node *head = NULL;
addNode( &head);
... 
```

# hadoop - 是否可以在 S3 中运行 hadoop fs -getmerge？

> ID：11260883
> 
> 赞同：5
> 
> 时间：2012-06-29T11:21:25.620
> 
> 标签：hadoop, amazon-s3, elastic-map-reduce, amazon-emr

我有一个 Elastic Map Reduce 作业，它正在 S3 中编写一些文件，我想连接所有文件以生成一个唯一的文本文件。

目前我正在手动将包含所有文件的文件夹复制到我们的 HDFS (hadoop fs copyFromLocal)，然后我正在运行 hadoop fs -getmerge 和 hadoop fs copyToLocal 来获取文件。

反正有没有直接在S3上使用hadoop fs？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-12T01:13:06.160

一种简单的方法（**如果您要生成适合主机的小文件**）是执行以下操作：

1.  将文件部分合并到本地计算机上的单个文件中（[文档](http://hadoop.apache.org/docs/current/hadoop-project-dist/hadoop-common/FileSystemShell.html#getmerge)）

    ```
    hadoop fs -getmerge hdfs://[FILE] [LOCAL FILE] 
    ```

2.  将结果文件复制到S3，*然后删除本地文件*（[文档](http://hadoop.apache.org/docs/current/hadoop-project-dist/hadoop-common/FileSystemShell.html#moveFromLocal)）

    ```
    hadoop dfs -moveFromLocal [LOCAL FILE] s3n://bucket/key/of/file 
    ```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T16:00:56.193

实际上，这个关于 getmerge 的响应是不正确的。getmerge 需要一个本地目的地，并且不适用于 S3。`IOException`如果您尝试使用 -getmerge 进行响应，它会抛出一个错误：错误的 FS：。

用法：

```
hadoop fs [generic options] -getmerge [-nl] <src> <localdst> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-30T23:01:10.897

我自己没有亲自尝试过 getmerge 命令，但`hadoop fs`EMR 集群节点上的命令支持 S3 路径，就像 HDFS 路径一样。例如，您可以通过 SSH 连接到集群的主节点并运行：

```
hadoop fs -ls s3://<my_bucket>/<my_dir>/ 
```

上述命令将列出指定目录路径下的所有 S3 对象。

我希望`hadoop fs -getmerge`以同样的方式工作。因此，只需使用完整的 S3 路径（以 s3:// 开头）而不是 HDFS 路径。

# code-coverage - Sonar 的代码覆盖率：% 代码覆盖率不连贯

> ID：11260884
> 
> 赞同：0
> 
> 时间：2012-06-29T11:21:29.697
> 
> 标签：code-coverage, sonarqube

我有一个关于`Code coverage`声纳的问题。

在这个例子中：

```
 public static void apply(Person person) {
        if (person != null) {
            callApply(person);
        }
    } 
```

在我的声纳`Code coverage`中，我有以下结果：

```
if (person != null) => hit=(10) % = (75%)
callApply(person); => hit(10) % =() 
```

我不明白为什么在相同的命中数下，覆盖率是 75% ？为什么当我们调用该方法时我没有任何值覆盖率`callApply`

我认为这个版本的 Sonar 使用 Jacoco 作为覆盖代码。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T08:16:36.363

首先，Sonar 默认使用 Cobertura（JaCoCo 将是 Sonar 3.2 中的默认版本，将于 2012 年夏季发布）。

那么，是什么让您认为在第一行可以获得 75% 的覆盖率，而在第二行则什么都没有？

# mysql - 在父窗口中显示弹出窗口输入文本值？

> ID：11260886
> 
> 赞同：0
> 
> 时间：2012-06-29T11:21:43.863
> 
> 标签：mysql, ajax, jsp

```
function showEmp(){ 
      if(validate())
          {
          for(var i=0; i < document.employee.puid.length; i++){
              if(document.employee.puid[i].checked){
                  var emp_value = document.employee.puid[i].value;
              }
          }
          xmlHttp=GetXmlHttpObject();
          if(xmlHttp==null){
              alert ("Browser does not support HTTP Request")
                  return
          }
              var url="getPatient.jsp"
              url=url+"?emp_id="+emp_value;
              xmlHttp.onreadystatechange=stateChanged
                          xmlHttp.open("GET",url,true)
              xmlHttp.send(null)
      }
  }
  function stateChanged()
  {   
    if (xmlHttp.readyState==4 || xmlHttp.readyState=="complete")
    { 
          var showdata = xmlHttp.responseText;
              alert(showdata)
          var strar = trim(showdata).split(":");
          if(strar.length>0)
                  {
              window.opener.location.reload();
              window.location.reload(); 
              opener.document.getElementById("puid").value=strar[1];
              opener.document.getElementById("fname").value=strar[2];
                          window.close();
          }
      }
  } 
```

我无法在父窗口字段中显示值，在这个 var showdata = xmlHttp.responseText; alert(showdata) 在这里，即使我只是对 showdata 保持警惕，但它只显示空警报框，任何人都可以帮助我，！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T11:41:29.767

似乎缺少很多分号；这是某种“复制/粘贴”错误吗？

# jquery - 调用另一个脚本后显示的 Jquery 数据表隐藏列。如何永久隐藏指定的列？

> ID：11260896
> 
> 赞同：1
> 
> 时间：2012-06-29T11:22:32.717
> 
> 标签：jquery, jquery-datatables

我的桌子是

```
<table id="EmployeesTable" style="width: 100%;" class="grid-table06 border-one">
    <thead>
        <tr>
            <th width="80%" align="left" valign="middle">Name</th>
            <th width="20%" align="left" valign="middle">Department</th>
            <th>Id</th>
        </tr>
    </thead>
</table> 
```

我的脚本如下

```
$(function () {
    $(".switchDate").click(function () {
        var id = $(this).attr("rel");
        fetchEmployeedetails(id);
    });

    fetchEmployeedetails(@model.Id); //on load

    function fetchEmployeedetails(id) {
        $("#EmployeesTable").dataTable({
            "bProcessing": true,
            "bServerSide": true,
            "sAjaxSource": "/Employees/FetchDetails?Deptid=" + id + "&thresholdLow=4&threshold=100",
            "sPaginationType": "full_numbers",
            "bDestroy": true,
            "aaSorting": [[1, 'desc']],
            "asStripClasses": ['color01', 'color03'],

            "aoColumnDefs": [{
                "aTargets": [2],
                "bVisible": false
            }, {
                "aTargets": [1],
                "fnRender": function (oObj) {
                    return "<a href='#showemployees' rel='" + oObj.aData[2] + "'></a>";
                }
            }]
        });
    }
}); 
```

加载时它工作正常，不显示隐藏的“Id”列，但如果我通过点击功能上的 switchDate 选择 id，它会导致隐藏列第二次可见。

如何永久隐藏该列？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T12:01:02.777

dataTable ( `.dataTable(...)`) 的初始化应该只发生一次，就在页面加载事件之后。从那时起，`.fnDraw()`负责更新它。

来自[dataTables官方网站](http://datatables.net/api)：

> 使用服务器端处理的注意事项：许多 API 函数假设数据存储在客户端而不是服务器端完成。因此，诸如 fnAddData 和 fnDeleteRow 之类的函数不会影响数据库中保存的数据。事实上，DataTables 甚至不知道您是否正在使用数据库！因此，您必须对服务器进行必要的调用以根据需要处理您的数据，然后只需重新绘制表格 (fnDraw) 即可查看新数据。

在这里阅读更多：http: [//datatables.net/api#fnDraw](http://datatables.net/api#fnDraw)

所以你必须像这样改变你的代码：

```
$(function () {

   dataTableInitialisation();

   $(".switchDate").click(function () {
       var ajaxUrl = "/Employees/FetchDetails?Deptid=" + $(this).attr("rel") + "&thresholdLow=4&threshold=100";
       fetchEmployeedetails(ajaxUrl);
   });
});

fetchEmployeedetails(ajaxSource){
    var oSettings = myOTable.fnSettings();
    oSettings.sAjaxSource = ajaxSource;
    myOTable.fnDraw();
} 

function dataTableInitialisation() {
    myOTable = $("#EmployeesTable").dataTable({
          "bProcessing": true,
          "bServerSide": true,
          "sAjaxSource": "/Employees/FetchDetails?Deptid=" + @model.Id + "&thresholdLow=4&threshold=100",
          "sPaginationType": "full_numbers",
          "bDestroy": true,
          "aaSorting": [[1, 'desc']],
          "asStripClasses": ['color01', 'color03'],
          "aoColumnDefs": [{
                  "aTargets": [2],
                  "bVisible": false
                  }, {
                  "aTargets": [1],
                  "fnRender": function (oObj) {
                  return "<a href='#showemployees' rel='" + oObj.aData[2] + "'></a>";
                  }
           }]
       });
   }
}); 
```

顺便说一句，我建议使用`aoData.push()`将更多数据发送到服务器而不是更改`sAjaxSource`. 以下是有关向服务器发送额外数据的更多信息：http: [//datatables.net/usage/server-side#fnServerParams](http://datatables.net/usage/server-side#fnServerParams)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-29T12:05:23.713

看看这个例子：[http ://datatables.net/examples/api/show_hide.html](http://datatables.net/examples/api/show_hide.html)

```
function fnShowHide( iCol ) {
    /* Get the DataTables object again - this is not a recreation, just a get of the object */
    var oTable = $('#EmployeesTable').dataTable();

    var bVis = oTable.fnSettings().aoColumns[iCol].bVisible;
    oTable.fnSetColumnVis( iCol, bVis ? false : true );
} 
```

比你打电话`dnShowHide(columnPosition);`

# mongoid - Mongoid多态关联+FactoryGirl+RSpec

> ID：11260898
> 
> 赞同：1
> 
> 时间：2012-06-29T11:22:42.753
> 
> 标签：mongoid, factory-bot

我正在尝试使用多态方法将电子邮件嵌入到人 Mongoid 对象中。获取“BSON::InvalidDocument：无法将 Mongoid::Relations::Embedded::Many 类的对象序列化为 BSON。” 每当我运行测试。请参阅下面的代码，任何将不胜感激。我不确定在 FactoryGirl 内部建立电子邮件的正确方法是什么。谢谢。

```
class Email
  include Mongoid::Document
  include Mongoid::Timestamps
  embedded_in :mailable, polymorphic: true

  field :email, type: String
  field :category, type: String
end

class Person
  include Mongoid::Document
  embeds_many :emails, as: :mailable       #polymorhpic
  index  "emails.email", unique: true

  field :first_name, type: String
  field :middle_name, type: String
  field :last_name, type: String

  validates_uniqueness_of :emails

end

FactoryGirl.define do
  sequence(:fn) {|n| "first_name#{n}" }
  sequence(:ln) {|n| "last_name#{n}" }
  factory :person do
    first_name { generate(:fn) }
    last_name { generate(:ln) }
    gender 'M'
    nationality 'USA'
    ssn '123-88-1111'
    factory :emails_ do
      emails { Factory.build(:email) }
    end
  end
end

FactoryGirl.define do
  sequence(:address) {|n| "user#{n}@mail.com" }
  factory :email do
    email { generate(:address) }
    category 'personal'
  end
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T01:18:58.017

这是我上次在 mongoid 中使用带有嵌入式关联的 Factory Girl 时采用的方法。请在您的用户工厂尝试此操作。

```
emails { |e| [e.association(:email)] } 
```

# database - 进行仅显示唯一记录的查询

> ID：11260900
> 
> 赞同：0
> 
> 时间：2012-06-29T11:22:53.003
> 
> 标签：database, ms-access, unique

我有一个表格，其中一个列中的重复条目是可能的（emailAddress - 有些夫妇共享它们），我想向他们发送电子邮件通讯。有没有办法进行选择查询，如果有多个，它只显示一个电子邮件地址的副本？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T11:25:24.027

如果您只需要 emailAddress 这很简单：

```
select distinct emailAddress from <YourTableNameHere> 
```

*根据评论中的要求进行编辑。*

如果您想同时选择不同的 emailAddress 和任何与之相关的 customerName，那么您必须以某种方式告诉 SQL 如何选择 customerName。最简单的方法是选择即 MIN(customerName)，然后丢弃所有其他（通常是字母表中较晚但实际上取决于排序规则的那些）。查询将是：

```
select emailAddress, min(customerName) as pickedCustomerName
from <YourTableNameHere>
group by emailAddress 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-29T11:24:03.610

您可以使用 DISTINCT keywprd，也可以使用 GROUP BY。

```
SELECT DISTINCT email 
FROM table 
```

或者

```
SELECT email, Count(ID)
FROM table
GROUP By email 
```

# windows-phone-7 - 编辑 ObservableCollection 字段

> ID：11260903
> 
> 赞同：0
> 
> 时间：2012-06-29T11:23:07.183
> 
> 标签：windows-phone-7, observablecollection

我有 3 列的 ObservableCollection：id、name、image。

前两个是用 db 中的数据归档的，我想用我的数据填充最后一个。在图像列中，我想放一些静态部分 + id

可能吗？

我认为一些 for 循环会完成这项工作，但不知道从哪里开始

编辑 - 我的代码：

目的：

```
public class HabitatDB
    {
        public int id { get; set; }
        public string name { get; set; }
        public string imagelink { get; set; }
    } 
```

获取数据：

```
ObservableCollection<HabitatDB> _habitatEntries = null;

private void GetHabitats()
        {
            string strSelect = "SELECT id, name FROM habitat ORDER BY id ASC";
            _habitatEntries = (Application.Current as App).db.SelectObservableCollection<HabitatDB>(strSelect);

            HabitatListBox.ItemsSource = _habitatEntries;

        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T14:35:13.407

我几乎失去了一整天，偶然发现了非常简单的解决方案......

只是课堂上的一个小改动，你根本不需要弄乱 ObservableCollection 。

```
public class HabitatDB
{
    public int id { get; set; }
    public string name { get; set; }
    public string imagelink { get { return string.Format("graphics/habitats/{0}.png", id); } }
} 
```

然后就`<Image Source="{Binding imagelink}"/>`

# facebook - 在 curl 中使用 post 参数上传文件

> ID：11260910
> 
> 赞同：0
> 
> 时间：2012-06-29T11:23:46.403
> 
> 标签：facebook, post, curl

如何使用curl中的graph api请求将文件上传到facebook

我正在提出此请求，但收到错误：

```
curl https://graph.facebook.com/<id>/photos  -F "source=@me.jpg"  -d "message=Me"  -v 

ERR:

Only One Http Request can be Selected 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T13:47:48.563

您不能在同一命令行中混合使用 -F 和 -d 选项。如果您想要一个多部分表单（我相信您会这样做），那么您需要使用 -F 添加所有部分，包括“message=Me”部分。

# php - Socket 编程 PHP 脚本不断加载

> ID：11260917
> 
> 赞同：0
> 
> 时间：2012-06-29T11:24:20.240
> 
> 标签：php, sockets

我想实现一个聊天应用程序，其中 php 将充当服务器，而 android 将充当客户端。

问题是 php 脚本一直在加载并且不会停止。当我引入一个循环来监听和输出从我的 android 模拟器连续发送的消息时。但是当我删除循环时，它会继续加载并且只要我从我的android模拟器它输出一次并且脚本停止。现在我不知道如何完成这个（即每当我从android发送消息时它会在页面上回显它们并继续这样做，直到我发送退出消息退出脚本）。

这是我的 php 脚本：

```
 set_time_limit (0);

$address = '10.116.27.107';
$port = 1234;

$sock = socket_create(AF_INET, SOCK_STREAM, 0);
socket_bind($sock, $address, $port) or die('Could not bind to address');

socket_listen($sock);
while(1)
{
   $client = socket_accept($sock);
   $input = socket_read($client, 1024);

   $output = preg_replace("[ \t\n\r]","",$input).chr(0);
   socket_write($client, $output);

       if($input=="exit")
   break;

echo $input;

socket_close($client);

}
socket_close($sock); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T12:14:55.937

为了实现一个聊天应用程序，您必须改进您的代码，以便它可以处理*多个连接*，这比读取和写入一个客户端要复杂得多。根据我的经验，从单用户系统到多用户系统是一个巨大的飞跃，这就是为什么需要时间来学习如何通过反复试验来编写聊天系统。

但是，我相信执行上述操作可以帮助您避免问题，我猜这很可能是由于所谓的**阻塞**- 系统在继续之前等待输入/输出并且没有得到任何结果。

基本上，使用聊天应用程序需要考虑以下几点：

1.  你需要从 php 命令行运行你的聊天脚本，在浏览器中运行会给你带来更复杂的超时问题，以及浏览器期望网页如何工作。如果你使用 Mac OSX，你可以使用终端，如果你知道 linux，你显然可以使用 linux，如果你在 Windows 上......获取 puTTY 并连接到 linux 服务器，我相信你可以在 Windows 上运行 php 命令行，这只是我曾经尝试（*或希望*）做的事情。

2.  您需要在用户评论[http://uk.php.net/socket_select](http://uk.php.net/socket_select)`socket_select()`中使用一些简单的示例来说明如何使用它。

3.  您总是需要知道客户端处于什么状态 - 即仅在您可以阅读时读取，仅在您可以写入时写入......通常如果您可以读取或写入，那么您**必须**这样做才能保持内容工作顺利（并且不会最终冻结） - 正是由于这个原因，聊天应用程序非常棘手。

4.  客户端可能会突然断开和连接，因此您需要在读写过程中处理这个问题。

5.  每当读写时——尤其是使用 php——读写函数可能不会一次性发送或接收所有信息。类似于`fwrite()`，`fread()`您应该检查已写入多少内容（如果未完成则继续写入）并继续阅读，直到没有其他内容可供阅读。

6.  根据您的客户端，某些系统期望消息以特定的终止字符结束/终止 - 即 \n 或 \0。大多数聊天应用程序要么检测要使用哪个，要么将两者作为每个谨慎消息的一部分发送。

# c# - 如何在 Windows 8 中禁用纵向模式？

> ID：11260919
> 
> 赞同：9
> 
> 时间：2012-06-29T11:24:31.910
> 
> 标签：c#, orientation, windows-8, windows-runtime

我开发了一个不支持纵向模式的 XAML / C# Windows 8 应用程序。我已经在 Visual Studio 中打开了 Package.appxmanifest，并在“支持的旋转”下禁用了纵向和纵向翻转模式。这创建了以下旋转首选项：

```
 <InitialRotationPreference>
          <Rotation Preference="landscape" />
          <Rotation Preference="landscapeFlipped" />
        </InitialRotationPreference> 
```

但是，当我在模拟器中启动我的应用程序并旋转模拟器时，应用程序仍会旋转到纵向模式。我怎样才能防止这种情况发生？

谢谢，

阿德里安

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-29T18:12:58.130

Windows 8 中的模拟器似乎不尊重您的旋转偏好。不幸的是，在连接到运行 Windows 8 的实际平板电脑之前，无法判断这些设置是否按预期工作。

查看这篇文章以获取更多信息，直接来自 MSDN：http: [//msdn.microsoft.com/en-us/library/windows/apps/windows.graphics.display.displayproperties.autorotationpreferences](http://msdn.microsoft.com/en-us/library/windows/apps/windows.graphics.display.displayproperties.autorotationpreferences)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-12-06T20:12:17.070

以防万一有人没有注意到编译器警告，DisplayProperties 现在已经过时了。设置 AutoRotationPreferences 的新方法是，

```
DisplayInformation.AutoRotationPreferences = DisplayOrientations.Landscape; 
```

# java - 如何将组件添加到 JDialog

> ID：11260926
> 
> 赞同：4
> 
> 时间：2012-06-29T11:24:46.663
> 
> 标签：java, swing, layout-manager, jdialog

```
 d1=new JDialog();
   d1.setSize(200, 100);
   t1=new JTextField();
   t1.setBounds(10,10,40,20);
   d1.add(t1); 
```

我想在 JDialog 中添加组件，例如 TextField、Button...

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-29T11:33:48.980

1）首先创建一个Jpanel

```
JPanel pan=new JPanel();
pan.setLayout(new FlowLayout()); 
```

2) 将组件添加到该 JPanel

```
pan.add(new JLabel("label"));
pan.add(new JButton("button")); 
```

3）创建JDialog

```
JDialog jd=new JDialog(); 
```

4）将JPanel添加到JDialog

```
jd.add(pan); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T11:25:40.413

您必须确保不使用布局管理器。

```
d1.setLayout(null); 
```

默认情况下，使用 BorderLayout。使用布局管理器很棒，但真正好的，使您的窗口可调整大小等，很难理解。如果没有布局管理器，您可以在尝试时指定边界。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-29T11:27:14.173

看看这个例子和教程..
**1.** [如何制作对话框](http://docs.oracle.com/javase/tutorial/uiswing/components/dialog.html)
**2.** [动态添加组件到 JDialog](https://stackoverflow.com/questions/6988317/dynamically-add-components-to-a-jdialog)
**3.** [在 JDialog 中添加组件](https://stackoverflow.com/questions/6063064/add-components-inside-jdialog-box-in-swing-without-inner-class-which-extends-jd)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-29T12:13:12.243

您可以像添加到 JFrame 一样向 JDialog 添加组件，因为 JDialog 是 java.awt.Container 。如果要设置要添加的组件的大小，则应使用布局管理器或将布局设置为 null。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-29T12:39:33.340

我不确定你真的希望你的组件如何布局，但下面的代码片段应该可以实现我猜你正在尝试用你当前的代码做的事情。尽量使用 LayoutManager、布局约束、首选/最大/最小尺寸，并避免使用 setLocation/setSize/setBounds。

```
import java.awt.FlowLayout;

import javax.swing.BorderFactory;
import javax.swing.JDialog;
import javax.swing.JPanel;
import javax.swing.JTextField;
import javax.swing.SwingUtilities;

public class Test5 {

    protected static void initUI() {
        JDialog dialog = new JDialog();
        JPanel panel = new JPanel(new FlowLayout(FlowLayout.LEFT));
        panel.setBorder(BorderFactory.createEmptyBorder(10, 10, 0, 0));
        JTextField textfield = new JTextField(8);
        textfield.setBounds(10, 10, 40, 20);
        panel.add(textfield);
        dialog.add(panel);
        dialog.setSize(200, 100);
        dialog.setLocationRelativeTo(null);
        dialog.setVisible(true);
    }

    public static void main(String[] args) {
        SwingUtilities.invokeLater(new Runnable() {

            @Override
            public void run() {
                initUI();
            }
        });
    }

} 
```

您可能应该阅读有关[LayoutManager](http://docs.oracle.com/javase/tutorial/uiswing/layout/index.html)的信息。花点时间去了解它，了解它们是如何工作的以及存在的不同的。你不会后悔花几分钟的时间。

# javascript - 在经典 asp 中传递查询字符串参数时出错

> ID：11260929
> 
> 赞同：0
> 
> 时间：2012-06-29T11:24:57.230
> 
> 标签：javascript, asp.net, asp-classic

我正在使用经典的 asp 并且对语法不太熟悉我的父页面上有这个 JavaScript

```
function redirect(ID)
{
 document.frmMain.action = "manual.asp?ID=" + ID;
 alert('manual.asp?ID='+ID)
 document.frmMain.submit();
} 
```

但是，当我在新的 asp 页面上捕获时，相同的 ID 将变为空。

```
<%   
SQLStr = "SELECT * FROM tblUsers WHERE ID='" & Request.QueryString("ID") & "'"
set rst = DataConn.Execute(SQLStr)
Denied = 1
while not rst.eof
    Denied = 0
    rst.movenext
wend
rst.close
if Denied = 1 then  
%> 
```

有人可以帮我解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T11:43:44.717

如果您用于重定向的表单是空的，您应该更好地`window.location`用于此任务

```
function redirect(id) {
    window.location.href = "manual.asp?id=" + id;
} 
```

如果表单不为空，则必须为 id 添加一个字段并用参数填充此字段。

```
<form name="frmMain" action="manual.asp" method="get">
    <input type="text" name="paramter1" value="1" />
    <!-- hidden value for the id -->
    <input type="hidden" name="id" value="" />
</form>

function redirect(id) {
    var form = document.frmMain;
    form.id.value = id;
    form.submit();
} 
```

但是您仍然需要检查 id 参数是否有任何可能破坏您的数据库的非法字符[读我](http://diovo.com/2008/09/sanitizing-user-data-how-and-where-to-do-it/)

# video - ffmpeg 使用过滤器分割 RGB 和 Alpha 通道

> ID：11260930
> 
> 赞同：3
> 
> 时间：2012-06-29T11:25:02.217
> 
> 标签：video, ffmpeg, video-processing

我正在尝试使用 ffmpeg 将输入文件拆分为两个单独的文件：

1.  只有 R、G 和 B 通道的 MP4
2.  带有“提取”A 通道的 MP4（所谓的 Key 剪辑，参见[http://ffmpeg-users.933282.n4.nabble.com/quot-Extracting-quot-Alpha-Channel-td3700227.html](http://ffmpeg-users.933282.n4.nabble.com/quot-Extracting-quot-Alpha-Channel-td3700227.html)）

我已经成功地做到了这两点，但现在我想将它们组合成一个命令。这就是我所做的：

```
ffmpeg -r $FPS -y -i input.flv -vcodec libx264 -vpre ipod640 -acodec libfaac -s 256x256 -r $FPS -filter_complex INSERT_FILTER_HERE rgb.mp4 alpha.mp4 
```

其中 INSERT_FILTER_HERE 是：

```
format=rgba, split [rgb_in][alpha_in];
[rgb_in] fifo, lutrgb=a=minval [rgb_out];
[alpha_in] format=rgba, split [T1], fifo, lutrgb=r=maxval:g=maxval:b=maxval, [T2] overlay [out];
[T1] fifo, lutrgb=r=minval:g=minval:b=minval [T2] 
```

简而言之，我将文件分成两个流，对于第一个流，我“删除”了 alpha 通道，对于第二个流，我提取了 alpha 通道的灰度表示。当我把它通过graph2dot时，它工作正常，输出为nullsink。

但是，当我使用 -filter_complex 在 ffmpeg 中运行它时，我得到：

```
ffmpeg version N-41994-g782763e Copyright (c) 2000-2012 the FFmpeg developers
  built on Jun 28 2012 17:45:15 with gcc 4.6.3
  configuration: --enable-gpl --enable-nonfree --enable-pthreads --enable-filters --enable-libfaac --enable-libmp3lame --enable-libx264 --enable-libtheora --enable-libvpx --enable-postproc --enable-avfilter
  libavutil      51\. 63.100 / 51\. 63.100
  libavcodec     54\. 29.101 / 54\. 29.101
  libavformat    54\. 11.100 / 54\. 11.100
  libavdevice    54\.  0.100 / 54\.  0.100
  libavfilter     3\.  0.100 /  3\.  0.100
  libswscale      2\.  1.100 /  2\.  1.100
  libswresample   0\. 15.100 /  0\. 15.100
  libpostproc    52\.  0.100 / 52\.  0.100
Input #0, flv, from 'input.flv':
  Metadata:
    audiodelay      : 0
    canSeekToEnd    : true
  Duration: 00:01:10.56, start: 0.000000, bitrate: 1964 kb/s
    Stream #0:0: Video: vp6a, yuva420p, 800x950, 1536 kb/s, 25 tbr, 1k tbn, 1k tbc
    Stream #0:1: Audio: mp3, 44100 Hz, stereo, s16, 128 kb/s
[graph 0 input from stream 0:0 @ 0x2e4c6e0] w:800 h:950 pixfmt:yuva420p tb:1/30 fr:30/1 sar:0/1 sws_param:flags=2
Output pad "default" for the filter "Parsed_lutrgb_3" of type "lutrgb" not connected to any destination 
```

关于我如何让 ffmpeg 认识到它必须将 [rgb_out] 写入 rgb.mp4 并将 [out] 写入 alpha.mp3 的任何想法？

提前致谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-29T18:38:23.340

您需要使用`-map`. 从[文档中`-filter_complex`](http://ffmpeg.org/ffmpeg.html#Advanced-options)：

> 输出链接标签用 引用`-map`。未标记的输出被添加到第一个输出文件中。
> 
> 例如，在视频上叠加图像
> 
> ```
> ffmpeg -i video.mkv -i image.png -filter_complex '[0:v][1:v]overlay[out]'\
>   -map '[out]' out.mkv 
> ```

因此，在您的情况下，您需要以下内容：

```
ffmpeg ... -i input ... -filter_complex 'split [rgb_in][alpha_in]; ... [rgb_out];\
  ... [alpha_out]' -map '[rgb_out]' rgb.mp4 -map '[alpha_out]' alpha.mp4 
```

# ruby-on-rails - _error_messages 不适用于表单

> ID：11260934
> 
> 赞同：0
> 
> 时间：2012-06-29T11:25:32.827
> 
> 标签：ruby-on-rails, forms

我正在开发一个项目，用户可以创建帖子，其他人可以发送有关该主题的帖子。我的资源文件是：

```
resources :users
    resources :sessions, only: [:new, :create, :destroy]

    resources :topics , only: [ :show, :create, :destroy] do
    resources :posts, only: [:create, :new] 
```

我的topics_form.html.erb：

```
<%= form_for(@topic) do |f| %>
  <%= render 'shared/error_messages', object: f.object %>
  <div class="field">
        <%= f.text_area :title, placeholder: "yeni başlık girin..." %>
  </div>
  <%= f.submit "Gönder", class: "btn btn-large btn-primary" %>
<% end %> 
```

我的创建动作是：

```
 def create
    @topic = current_user.topics.build(params[:topic])  
    if @topic.save
        flash[:success] = "Konu oluşturuldu!"
        redirect_to root_path
    else
        render 'static_pages/home'
    end
end 
```

我的 posts_form.html.erb 是：

```
<%= form_for [@topic, @post] do |f| %>
  <%= render 'shared/error_messages', object: f.object %>
  <div class="field">
    <%= f.text_area :content, placeholder: "yorumunuzu girin..." %>
  </div>
  <%= f.submit "Gönder", class: "btn btn-large btn-primary" %>
<% end %> 
```

我的 post_controller 创建操作是：

```
def create
    @topic= Topic.find(params[:topic_id])
    @post = @topic.posts.build(params[:post])
    @post.user = current_user
    @post.topic_id = @topic.id

    if @post.save
        flash[:success] = "Yorum oluşturuldu!"
        redirect_to topic_path(@topic)
    else
        render 'static_pages/home'
    end
end 
```

这是我的 error_messages.html.erb：

```
<% if object.errors.any? %>
  <div id="error_explanation">
    <div class="alert alert-error">
      The form contains <%= pluralize(object.errors.count, "error") %>.
    </div>
    <ul>
    <% object.errors.full_messages.each do |msg| %>
      <li>* <%= msg %></li>
    <% end %>
    </ul>
  </div>
<% end %> 
```

如果我测试空帖子和空主题。我收到此错误：

```
undefined method `each' for nil:NilClass

Extracted source (around line #2):

1: 
2: <% @topics.each do |topic|%>  
3:   <li><%=link_to topic.title, topic_path(topic) %></li>  
4: 
5:  <%= will_paginate @topics %> 
```

我的 static_pages_controller.rb ：

```
 def home
        if signed_in?
        @topic = current_user.topics.build if signed_in?
        end
        @topics = Topic.paginate :page => params[:page], :per_page => 20
  end 
```

和我的 home.html.erb：

```
<% if signed_in? %>
  <div class="row">
        <%= render 'shared/user_info' %>
        <%= render 'shared/topic_form' %>       
    <ol class="topics-signedin">
    <%= render 'shared/topics' %>
   </ol> 
```

为什么没有错误不显示？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T12:38:24.497

您在“创建”操作中缺少 @topics。是的，它被设置在你的“家”中，它呈现了表单，但是在提交时，它传递给“创建”，然后它必须再次加载变量，在你的情况下，它去的时候没有设置@topics渲染“static_pages/home”。你需要..

```
...
if @post.save
  flash[:success] = "Yorum oluşturuldu!"
  redirect_to topic_path(@topic)
else
  @topics = Topic.paginate :page => params[:page], :per_page => 20
  render 'static_pages/home'
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T12:15:52.410

你从不设置`@topics`，只有`@topic`。`@topics`零也是如此。

如果出现错误，您会渲染`static_pages/home`，这需要这些。您应该重新渲染`new`or `edit`。

# android - 无法在 android ADT 16.0.0 中打开图形编辑器视图

> ID：11260937
> 
> 赞同：0
> 
> 时间：2012-06-29T11:25:35.307
> 
> 标签：android, layout, editor

浏览了许多关于我面临的图形编辑器问题的帖子。无法得到答案。这是问题

我使用的是 Android ADT 16.0.0，我可以打开图形编辑器，但看不到用户界面视图。整个应用程序在模拟器上构建并运行良好。只使用 XML 编辑器很烦人。

我通过复制 SDK、ADT 插件与成功安装分开安装了这个环境。看起来好像缺少与 Android 布局编辑器相关的内容。抛出的错误是

```
java.lang.NullPointerException
    at android.graphics.Paint_Delegate.updateFontObject(Paint_Delegate.java:1053)
    at android.graphics.Paint_Delegate.reset(Paint_Delegate.java:1039)
    at android.graphics.Paint_Delegate.<init>(Paint_Delegate.java:991)
    at android.graphics.Paint_Delegate.native_init(Paint_Delegate.java:614)
    at android.graphics.Paint.native_init(Paint.java)
    at android.graphics.Paint.<init>(Paint.java:194)
    at android.graphics.Paint.<init>(Paint.java:184)
    at android.view.ViewGroup.<init>(ViewGroup.java:278)
    at android.widget.LinearLayout.<init>(LinearLayout.java:116)
    at com.android.layoutlib.bridge.impl.RenderSessionImpl.inflate(RenderSessionImpl.java:227)
    at com.android.layoutlib.bridge.Bridge.createSession(Bridge.java:318)
    at com.android.ide.common.rendering.LayoutLibrary.createSession(LayoutLibrary.java:325)
    at com.android.ide.eclipse.adt.internal.editors.layout.gle2.RenderService.createRenderSession(RenderService.java:372)
    at com.android.ide.eclipse.adt.internal.editors.layout.gle2.GraphicalEditorPart.renderWithBridge(GraphicalEditorPart.java:1323)
    at com.android.ide.eclipse.adt.internal.editors.layout.gle2.GraphicalEditorPart.recomputeLayout(GraphicalEditorPart.java:1077)
    at com.android.ide.eclipse.adt.internal.editors.layout.gle2.GraphicalEditorPart$ConfigListener.onConfigurationChange(GraphicalEditorPart.java:497)
    at com.android.ide.eclipse.adt.internal.editors.layout.configuration.ConfigurationComposite.onDeviceConfigChange(ConfigurationComposite.java:2119)
    at com.android.ide.eclipse.adt.internal.editors.layout.configuration.ConfigurationComposite.access$7(ConfigurationComposite.java:2111)
    at com.android.ide.eclipse.adt.internal.editors.layout.configuration.ConfigurationComposite$5.widgetSelected(ConfigurationComposite.java:480)
    at org.eclipse.swt.widgets.TypedListener.handleEvent(TypedListener.java:240)
    at org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:84)
    at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:1053)
    at org.eclipse.swt.widgets.Display.runDeferredEvents(Display.java:4165)
    at org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:3754)
    at org.eclipse.ui.internal.Workbench.runEventLoop(Workbench.java:2701)
    at org.eclipse.ui.internal.Workbench.runUI(Workbench.java:2665)
    at org.eclipse.ui.internal.Workbench.access$4(Workbench.java:2499)
    at org.eclipse.ui.internal.Workbench$7.run(Workbench.java:679)
    at org.eclipse.core.databinding.observable.Realm.runWithDefault(Realm.java:332)
    at org.eclipse.ui.internal.Workbench.createAndRunWorkbench(Workbench.java:668)
    at org.eclipse.ui.PlatformUI.createAndRunWorkbench(PlatformUI.java:149)
    at org.eclipse.ui.internal.ide.application.IDEApplication.start(IDEApplication.java:123)
    at org.eclipse.equinox.internal.app.EclipseAppHandle.run(EclipseAppHandle.java:196)
    at org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.runApplication(EclipseAppLauncher.java:110)
    at org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.start(EclipseAppLauncher.java:79)
    at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:344)
    at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:179)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source)
    at org.eclipse.equinox.launcher.Main.invokeFramework(Main.java:622)
    at org.eclipse.equinox.launcher.Main.basicRun(Main.java:577)
    at org.eclipse.equinox.launcher.Main.run(Main.java:1410) 
```

乍一看，我猜布局编辑器文件丢失了。关于如何解决它的任何想法？

# c# - 检查Windows用户或组是否存在，支持域名

> ID：11260938
> 
> 赞同：2
> 
> 时间：2012-06-29T11:25:35.663
> 
> 标签：c#, c++, .net, windows, winapi

我有兴趣检查给定的用户名或组名是否存在。我需要支持 AD 控制器和多域。所以以下对我来说是有效的条目：

```
MYDOMAIN\John
John@mydomain.com
OTHERDOMAIN\Administrators 
```

因此，我要实现的功能与 MS windows 在编辑文件夹权限时实现的功能完全相同，然后键入名称并单击**“检查名称”**按钮。

是否有一个 Windows API 可以按照单个调用中的描述工作？

提前致谢

# c# - 参考错误 TFS & Nuget

> ID：11260941
> 
> 赞同：3
> 
> 时间：2012-06-29T11:25:49.177
> 
> 标签：c#, reference, tfs, nuget

```
The type 'System.Net.Http.HttpMessageHandler' is defined in an 
assembly that is not referenced. You must add a reference to assembly 'System.Net.Http, 
Version=2.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a'. 

\Global.cs 
```

试图开始工作的包是来自 aspnetwebstack 的 Nightly Builds 的 nuget 的 AspNetWebApi

TFS 参考遇到了一些麻烦，当我为当前项目制作 nuget install-package 并且所有 DLL 都是本地位置，因为它是一个网站项目，我收到这个奇怪的消息，如果我重建整个解决方案，它将运行顺利，但是当我更改需要编译错误的 CS 文件中最轻微的东西会重复它自己。

你可以让nuget只安装没有包目录和packages.config的引用吗？

想知道是否有人有解决这个问题的方法？

或者，如果您有任何关于参考 nuget 和 tfs 实践的好文章，您可以推荐。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T13:28:41.323

简短的回答，不，如果你想让 nuget 正常工作，你不能删除包目录和配置文件。Nuget 将自定义目标添加到您的项目文件中，该文件读取 packages.config 和包文件夹并复制到您的 bin 文件夹。此外，nuget 添加到项目中的 dll 引用使用指向包文件夹的提示路径。如果您删除 packages 文件夹，引用将无法解析。

例如：

```
<Reference Include="Microsoft.SqlServer.Management.Sdk.Sfc, Version=10.0.0.0, Culture=neutral, PublicKeyToken=89845dcd8080cc91, processorArchitecture=MSIL">
  <Private>True</Private>
  <HintPath>..\packages\Microsoft.SqlServer.2008R2.Smo.1.0.0\lib\net40\Microsoft.SqlServer.Management.Sdk.Sfc.dll</HintPath>
</Reference> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-05T05:34:01.883

我在我的一个项目中得到了完全相同的信息。

在 Visual Studio 2012 中，我从“程序集 > 扩展”中包含了 System.Net.Http。对话框顶部的“Targeting”语句显示“.NET Framework 4.5.1”。检查版本 2.0.0.0 的“System.Net.Http”。但是我仍然收到此错误消息。

事实证明，Visual Studio 没有将此程序集复制到本地文件夹。它可能在我的机器上某个地方抓取了其他版本之一。

以下是更改“复制本地”的方法：在解决方案资源管理器中突出显示引用“System.Net.Http”，按“F4”键转到其属性窗口。如果“复制本地”设置为“假”，单击“假”并将其更改为“真”。

这解决了我的问题。

# php - 表格中的图片

> ID：11260943
> 
> 赞同：0
> 
> 时间：2012-06-29T11:25:55.247
> 
> 标签：php, mysql, create-table

我正在使用 PHP 和 MySQL（html 和 CSS 不是什么大问题），我想收集我上传的图像（路径在 MySQL 中）并将它们放在一个表中。想象一张 5 列 6 行的表格（总共 30 张图片）。我希望最新的图片位于第一列的第一行 - 左侧和顶部 - 我希望最旧的图片位于最后一列的最后一行 - 右侧和底部 - -。

**索引.php**

```
<?php
    //Put all required/included files in here
    require_once('config.php');

    //Connection to database
    $link = mysql_connect(DB_HOST,DB_USER,DB_PASS);
    if(!$link) {
        die('Connection failed: ' . mysql_error());
    }

    //Select which database to use
    $db = mysql_select_database(DB_NAME);

    if(!$db) {
        die("Database selection failed: " . mysql_error());
    }
?> 
```

**配置文件**

```
<?php
    define('DB_HOST','host');
    define('DB_USER','user');
    define('DB_PASS','pass');
    define('DB_NAME','name');
?> 
```

现在，SQL 布局：

**布局.sql**

```
CREATE TABLE 'fotos'(
    id int not null,
    locatie_thumb text not null,
    locatie_middel text not null,
    locatie_groot text not null,
    primary key(id)
);

CREATE TABLE 'tekst'(
    id int not null auto_increment,
    titel text not null,
    bijschrift text not null,
    album text not null,
    datum DATE not null,
    primary key(id)
); 
```

表格背后的想法是我通过上传表单上传图片，在`titel, bijschrift, album, datum`那里输入值，MySQL 创建一个 ID。然后我想使用该 ID 将`tekst`and链接`fotos`到表中。

当我希望最新的图片位于左侧、顶部和最旧的图片位于右侧、底部时，如何从 MySQL 收集 30 个最新条目并将它们排列在 5 列和 6 行的表中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T11:29:46.480

你试过：

```
SELECT *
FROM fotos, tekst
WHERE fotos.id=tekst.id
ORDER BY tekst.datum DESC
LIMIT 30 
```

如果这是一对一的关系，那为什么不把它们都放在同一张表中呢？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-29T11:31:53.087

我不知道“tekst”是什么，但你可以：

*   为每张图片添加一个日期字段，由 mysql 使用 NOW() 设置
*   在mysql中，对图片进行查询，按前面的日期字段排序，限制为30个结果
*   在 php 中，使用查询结果并创建一个 HTML 表（或者更好的是一个干净的 div 结构）来保存 30 张图片。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-29T12:00:31.363

只需订购您的查询...

调用MySql的时候，造句像

```
SELECT * FROM fotos ORDER BY date 
```

或通过 ID 以防万一已订购 :)

# dojo - 更新 dijit.Tree 的 rootLabel

> ID：11260949
> 
> 赞同：1
> 
> 时间：2012-06-29T11:26:14.997
> 
> 标签：dojo, store, dijit.tree

我正在尝试使用 javascript 更新 dijit.Tree 的 model.rootLabel。我这样设置模型：

```
<div data-dojo-id="brandsModel" data-dojo-type="dijit.tree.ForestStoreModel"
     rootId="0"
     rootLabel="Brands (15)"
     data-dojo-props="store:myStore, query:{}"> 
```

为了更新树，我像这样扩展了它（此代码也适用于树中的 DND）：

```
dojo.extend(dijit.Tree, { refreshModel:function() {
  this._itemNodesMap = {};
  // Collapse root node and set model children to null, so the model
  // will fetch again from the datastore when _expandNode() is called
  this._collapseNode(this.tree.rootNode);
  this.model.root.children = null;
  // Set root NODE to unchecked so that Tree will fetch from the model again
  this.rootNode.state = "UNCHECKED";
 //Set _loadFinished to false, so a new fetch is possible
 this.model.store._loadFinished = false;
 this._expandNode(this.tree.rootNode);
}
}); 
```

从树中添加或删除项目后，我尝试更新计数器。我试过了 ：

```
tree.model.rootLabel = 'Brands (16)';
tree.model.root.label = 'Brands (16)'; 
```

使用 console.debug(tree) 调试时会显示更改，但我不知道使用什么来实际显示更改的标签。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T12:31:56.653

rootnode 不是商店中的实际项目 - 只有“_itemNodesMap”中的内容才会被刷新。您将需要设置根节点的标签节点的内部HTML。

```
tree.rowNode.set("label", "Brands ( " + tree._itemNodesMap.lenght + " )"); 
```

# scala - 如何在scala中为matrix-lib实现DSL？

> ID：11260954
> 
> 赞同：0
> 
> 时间：2012-06-29T11:26:35.633
> 
> 标签：scala, dsl

我想为我的计算机图形项目编写一个矩阵库。我想使用 scalas dsl 功能，让它看起来和感觉更自然。谁能给我一个提示，在哪里可以找到*不*使用外部库的简单教程？在我的研究中，我只发现了使用框架的教程。

**编辑**

我的问题似乎不够精确。我想改变它。我要写一个矩阵库。我知道如何编写矩阵库。我想使用 scala 的 DSL 功能。我还不知道如何在 scala 中编写 DSL。请给我一个提示，在哪里可以找到关于 scala 中 DSL 的好教程，它不使用外部库。谢谢您的意见。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-29T17:12:24.350

我会看看其他人在做什么。例如，[Scalala](https://github.com/scalala/Scalala)，它是一个矩阵库，或者[Specs2](http://specs2.org)，它具有惊人的 DSL。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T14:48:50.733

*DSLs in Action*是一个很好的来源。如果你想要更直接的东西（只是一个教程），那么简单的谷歌查询会指向你在 scala 中实现 DSL 的不同方法的小教程，或者一些有很好的 Scala DSL 的库。这里有一些：

[http://www.scala-lang.org/node/1403](http://www.scala-lang.org/node/1403) http://ofps.oreilly.com/titles/9780596155957/DomainSpecificLanguages.html [http://jcranky.com/2010/06/01/dsl-in- scala-for-date-calculation/](http://jcranky.com/2010/06/01/dsl-in-scala-for-date-calculation/) http://engineering.foursquare.com/2011/01/21/rogue-a-type-safe-scala-dsl-for-querying-mongodb/ [http://engineering.foursquare。 com/2011/08/29/slashem-a-rogue-like-type-safe-scala-dsl-for-querying-solr/](http://engineering.foursquare.com/2011/08/29/slashem-a-rogue-like-type-safe-scala-dsl-for-querying-solr/)

在定义了您的库应该如何（或外观）之后，您可以就如何实现这一目标提出更精确的问题。

# android - 如何使用数据选择器对话框在数据选择器中仅显示月份和年份

> ID：11260962
> 
> 赞同：0
> 
> 时间：2012-06-29T11:27:13.157
> 
> 标签：android

请告诉我如何使用 Datapicker 对话框在 Datapicker 中仅显示月份和年份

```
private DatePickerDialog.OnDateSetListener mDateSetListener2 =   new DatePickerDialog.OnDateSetListener() {

        public void onDateSet(DatePicker view, int year, 
                              int monthOfYear, int dayOfMonth) {
            try {
                Log.e("","myear"+mYear_1+","+"myear"+mMonth_1+","+mDay_1);
             Field f[] = mDateSetListener2.getClass().getDeclaredFields();
             for (Field field : f) {
                 if (field.getName().equals("mDatePicker")) {
                     field.setAccessible(true);
                  Object dayPicker = new Object();
                  dayPicker = field.get(mDateSetListener2);
                  ((View) dayPicker).setVisibility(View.GONE);
                 }
             }
                     } catch (SecurityException e) {
             Log.e("ERROR", e.getMessage());
             } 
             catch (IllegalArgumentException e) {
             Log.e("ERROR", e.getMessage());
             } catch (IllegalAccessException e) {
             Log.e("ERROR", e.getMessage());
             }

            }
    }; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T11:35:30.107

AFAIK 如果您想实现它，您可能必须以自定义方式进行。

[但幸运的是，这里](http://blog.codeus.net/dateslider-1-2-an-alternative-datepicker-for-android/)有很好的 DateSlider 框架

哪个应该给你以下输出。

![在此处输入图像描述](../Images/82d07f1c67933fdb2eee712414b69283.png)

代码托管在

[http://code.google.com/p/android-dateslider/](http://code.google.com/p/android-dateslider/)

他们也搬到了 Git 上，你可以在其中找到最新的代码

[https://github.com/bendemboski/DateSlider](https://github.com/bendemboski/DateSlider)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-23T14:05:54.273

```
picker = (DatePicker) findViewById(R.id.datePicker1);
try {
    Field f[] = picker.getClass().getDeclaredFields();
    for (Field field : f) {
        if (field.getName().equals("mDayPicker")) {
            field.setAccessible(true);
            Object dayPicker = new Object();
            dayPicker = field.get(picker);
            ((View) dayPicker).setVisibility(View.GONE);
        }
    }
} catch (SecurityException e) {
   Log.d("ERROR", e.getMessage());
} catch (IllegalArgumentException e) {
   Log.d("ERROR", e.getMessage());
} catch (IllegalAccessException e) {
   Log.d("ERROR", e.getMessage());
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-08-31T12:19:54.547

如果我们替换，ρяσѕρєя K 的回答可以完美地工作：

> ((ViewGroup) dp.getChildAt(1)).getChildAt(1).setVisibility(View.GONE);

经过

> ((ViewGroup)((ViewGroup)dp.getChildAt(0)).getChildAt(0)).getChildAt(0).setVisibility(View.GONE);

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-29T11:59:20.787

只有通过将自定义 DatePickerDialog 创建为：

**第 1 步：**将 DatePickerDialog 扩展为：

```
class CustomerDatePickerDialog extends DatePickerDialog {

    public CustomerDatePickerDialog(Context context,
            OnDateSetListener callBack, int year, int monthOfYear,
            int dayOfMonth) {
        super(context, callBack, year, monthOfYear, dayOfMonth);
    }

    @Override
    public void onDateChanged(DatePicker view, int year, int month, int day) {
        super.onDateChanged(view, year, month, day);
        mDialog.setTitle((month + 1) + "-" + day + "-");
    }
} 
```

**第2步：**

```
final Calendar cal = Calendar.getInstance();
        mDialog = new CustomerDatePickerDialog(getContext(), this,
            cal.get(Calendar.YEAR), cal.get(Calendar.MONTH),
            cal.get(Calendar.DAY_OF_MONTH));
        mDialog.show();

        DatePicker dp = findDatePicker((ViewGroup) mDialog.getWindow().getDecorView());
        if (dp != null) {
               //you can set setVisibility here for day,month and year here 0 for year
            ((ViewGroup) dp.getChildAt(1)).getChildAt(1).setVisibility(View.GONE);
        } 

  private DatePicker findDatePicker(ViewGroup group) {
        if (group != null) {
            for (int i = 0, j = group.getChildCount(); i < j; i++) {
                View child = group.getChildAt(i);
                if (child instanceof DatePicker) {
                    return (DatePicker) child;
                } else if (child instanceof ViewGroup) {
                    DatePicker result = findDatePicker((ViewGroup) child);
                    if (result != null)
                        return result;
                }
            }
        }
        return null;
    } 
```

# mysql - mysql：插入时增加最大字段值

> ID：11260965
> 
> 赞同：1
> 
> 时间：2012-06-29T11:27:28.270
> 
> 标签：mysql

我有一个表，其中包含一个名为“排序”的字段，其中包含排序号。当我添加一个新行时，我希望用现有的最大值 + 1 填充排序字段。我试过这个：

```
insert into highlights set sort=max(sort)+1 
```

但我收到 1111 错误“无效使用组功能”

如果我尝试使用子查询，

```
insert into highlights set sort=(select max(sort) from highlights)+1 
```

我收到一个 1093 错误，因为显然我无法对要插入的同一个表进行子查询。

有任何想法吗？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T11:36:29.270

试试这个

```
 insert into highlights set sort=(select max(h1.sort)+1 from highlights h1); 
```

# testing - 原则 2 - 功能测试

> ID：11260966
> 
> 赞同：0
> 
> 时间：2012-06-29T11:27:41.233
> 
> 标签：testing, doctrine-orm, phpunit

好的，情况就是这样。我使用 Doctrine 2 和 PHPUnit。我有一个产品列表，每个产品都有一个类别。我想测试 findByCategory() 方法，它显然应该返回特定类别的产品列表。

很简单，但我不确定如何正确测试它。在网络上的某些地方，我只看到简单的示例，例如：

```
$this->assertEquals(4, count($foundProducts)); 
```

所以它只是测试返回结果的数量，而不是实际数据。我也试过这个：

```
 foreach($allFoundProducts as $i=>$foundProduct) {
        $this->assertEquals($products[$i], $foundProduct);
    } 
```

其中 $products 是我在搜索之前保留的实体列表。但是它需要很长时间才能完成，有时甚至会崩溃（内存不足）。

请告诉我你用来进行这样的数据库测试的方法。

非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T19:38:44.093

试试这个：

```
$products = $em->getRepository('MyProject\Domain\Product')->findBy(array('category' => $category)); 
```

或这个：

```
$products = $em->getRepository('MyProject\Domain\Product')->findByCategory($category); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-28T19:28:31.700

我会测试返回结果的数量（就像在你的第一个例子中一样），然后运行结果并测试它们的类型：

```
$this->assertEquals(4, count($foundProducts));

foreach($foundProducts as $product) {
    $this->assertInstanceOf('MyProductEntity', $product);
} 
```

# java - java小程序：JProgressBar仅在完成时更新/刷新

> ID：11260977
> 
> 赞同：1
> 
> 时间：2012-06-29T11:28:40.767
> 
> 标签：java, swing, applet, jprogressbar, swingutilities

我只是试图迭代 for 循环并更新循环`JProgressBar`内部的值，启动`SwingUtilities.invokeLater`.. 但它只是在完成后更新。下面是我的简单代码：

```
import java.awt.Color;
import java.awt.Rectangle;
import javax.swing.JApplet;
import javax.swing.JButton;
import javax.swing.JPanel;
import javax.swing.JProgressBar;
import javax.swing.SwingUtilities;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;

public class ProgressBar extends JApplet {
    JProgressBar pg = null;
    JPanel panel = null;
    JButton start = null;
    int i;

    public void init() {
        pg = new JProgressBar(0, 100);
        pg.setStringPainted(true);
        this.setSize(1200, 600);
        this.setLayout(null);
        panel = new JPanel();
        panel.setLayout(null);
        panel.setBackground(Color.white);
        this.setContentPane(panel);
        this.setVisible(true);
        pg.setBounds(new Rectangle(630, 20, 150, 30));
        add(pg);

        start = new JButton("start");
        start.setBounds(new Rectangle(330, 20, 200, 30));
        start.setBackground(Color.lightGray);
        panel.add(start);

        start.addActionListener(new ActionListener() {
            public void actionPerformed(ActionEvent e) {
                pg.setValue(0);
                pg.setStringPainted(true);

                for (i = 0; i <= 100; i = i + 1) {
                    SwingUtilities.invokeLater(new Runnable() {
                        public void run() {
                            try {
                                pg.setValue(i);
                                java.lang.Thread.sleep(100);
                            } catch (Exception e) {}
                        }
                    });
                }
            }
        });
    }
} 
```

`progress bar`如何以递增方式反映更新，因为它在 for 循环完成后仅更新**100% 。**

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-29T11:40:30.250

您必须在单独的线程中处理任何计算/处理内容并在事件调度线程 (EDT) 中更新 UI：

```
 start.addActionListener ( new ActionListener ()
    {
        public void actionPerformed ( ActionEvent e )
        {
            pg.setValue ( 0 );
            pg.setStringPainted ( true );
            new Thread ( new Runnable ()
            {
                public void run ()
                {
                    for ( i = 0; i <= 100; i = i + 1 )
                    {
                        SwingUtilities.invokeLater ( new Runnable ()
                        {
                            public void run ()
                            {
                                pg.setValue ( i );
                            }
                        } );
                        try
                        {
                            java.lang.Thread.sleep ( 100 );
                        }
                        catch ( Exception e )
                        {
                            //
                        }
                    }
                }
            } ).start ();

        }
    } ); 
```

任何操作/鼠标/键和其他侦听器方法始终在 EDT 线程中执行，因此您必须将代码移动到单独的线程中。否则，您将在 EDT 线程内进行所有计算/处理（这会导致 UI 卡住）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-29T11:43:13.483

您正在阻止[EDT（事件调度线程）](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/dispatch.html)，这就是进度条无法自行更新的原因。您的 for 循环将在 EventQueue 上推送 100 个 InvocationEvent。这 100 个事件将按照您将它们放入队列的顺序发生。当您更新该值时，会在 EventQueue 上推送一个重绘事件，但该重绘事件只会在您执行完所有 InvocationEvent 后发生。

1.  永远不要将 Thread.sleep 放在 EDT 中（它会阻塞 UI 并提供糟糕的用户体验）
2.  将您的长时间运行的操作放在[SwingWorker中](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/worker.html)
3.  或者使用[Swing 计时器](http://docs.oracle.com/javase/tutorial/uiswing/misc/timer.html)来完成重复性任务

# java - Java Socket readInt EOFException

> ID：11260980
> 
> 赞同：2
> 
> 时间：2012-06-29T11:28:47.733
> 
> 标签：java, android, sockets, eof

我在我的手机（Android）和我的服务器之间做了一个简单的套接字。

手机可以连接到服务器，但我可以互相发送或读取数据。

这是我用于客户端（电话端）的代码：

```
private static void connect(String url, int port)
{
    do
    {
        try
        {
            socket = new Socket(url, port);
            input = socket.getInputStream();
            output = socket.getOutputStream();
            inputstream = new DataInputStream(input);
            outputstream = new DataOutputStream(output);
            isConnected = true;
        }
        catch (Exception e)
        {
            try
            {
                Thread.sleep(100);
            }
            catch (Exception ex) {}
        }
    }
    while (!isConnected);
}

public static String sendToServer(String json)
{       
    try
    {
        connect(Constants.SERVER_HOST, Constants.SERVER_PORT);

        if (isConnected)
        {
            Log.e("SOCKET MNGR", "[SOCKET] Sending " + json);
            outputstream.writeInt(json.getBytes().length);
            outputstream.write(json.getBytes());

            int arrLength = inputstream.readInt();
            if (arrLength > 0)
            {
                byte[] fromServer = new byte[arrLength];
                inputstream.read(fromServer, 0, fromServer.length);
                String content = new String( Base64.decode(new String(fromServer)) );
                Log.e("SOCKET MNGR", "[SOCKET] Reading " + content);
                return content;
            }
        }
    }
    catch (Exception e)
    {
        e.printStackTrace();
    }       

    return null;
} 
```

和我的服务器的一个：

```
public Client(Socket socket)
{
    try
    {
        this.socket = socket;
        this.input = this.socket.getInputStream();
        this.output = this.socket.getOutputStream();
        this.inputstream = new DataInputStream(this.input);
        this.outputstream = new DataOutputStream(this.output);
    }
    catch (Exception e) {}
}

public void run()
{
    while (true)
    {
        try
        {
            int arrLength = inputstream.readInt();
            byte[] fromClient = new byte[arrLength];
            inputstream.read(fromClient, 0, fromClient.length);
            String request = new String(fromClient);
            String read = new String( Base64.decode(request) );
            String[] data = request.split("###");

            if (data.length == 2 && data[0].equals("commit"))
            {
                CommitInterface.commit(data[1], true);
                outputstream.writeInt(0);
                outputstream.write(new byte[] {});
            }
            else if (data.length == 3 && data[0].equals("evaluate"))
            {
                EvaluateInterface.eval(data[1], data[2].equals("true") ? true : false);
                outputstream.writeInt(0);
                outputstream.write(new byte[] {});
            }
            else if (data.length == 2 && data[0].equals("publish"))
            {
                String content = PublishInterface.publish(new Vector<String>(Arrays.asList(data[1].split("|"))));
                String encoded = Base64.encode(content.getBytes());
                outputstream.writeInt(content.getBytes().length);
                outputstream.write(content.getBytes());
            }
        }
        catch (Exception e)
        {
            this.disconnect();
        }
    }
} 
```

当我`sendToServer`在手机上使用该功能时，我得到以下日志：

```
06-29 13:26:05.823: E/Kramer(1781): [SOCKET] Sending commit###{"user":"me"}
06-29 13:26:05.823: W/System.err(1781): java.io.EOFException
06-29 13:26:05.823: W/System.err(1781):     at java.io.DataInputStream.readInt(DataInputStream.java:287)
06-29 13:26:05.823: W/System.err(1781):     at com.vodemki.network.KramerCommunicator.sendToServer(ServerCommunicator.java:78)
06-29 13:26:05.823: W/System.err(1781):     at com.vodemki.activities.PhoneBookActivity$6.run(PhoneBookActivity.java:298) 
```

第 78 行是`int arrLength = inputstream.readInt();`.

知道为什么我会收到此错误吗？

谢谢。

* * *

我尝试使用 UDP，但无法从智能手机读取内容。

我的代码如下：

服务器端：

```
public void run()
{
    byte[] inData = new byte[48];
    byte[] outData = new byte[48];
    String message;
    DatagramSocket socket;

    try
    {
        socket = new DatagramSocket(this.port);
        while (true)
        {
            DatagramPacket in = new DatagramPacket(inData, inData.length);
            socket.receive(in);
            InetAddress senderIP = in.getAddress();
            int senderPort = in.getPort();
            message = new String(in.getData(), 0, in.getLength());
            System.out.println("Got "+message+" from "+senderIP+":"+senderPort);
            outData = "Pong".getBytes();
            DatagramPacket out = new DatagramPacket(outData, outData.length, senderIP, senderPort);
            socket.send(out);
        }
    }
    catch (Exception e) {}
} 
```

客户端（智能手机）：

```
public static String sendToServer(String json)
{       
    try
    {
        DatagramSocket socket = new DatagramSocket();
        InetAddress serverIP = InetAddress.getByName(Constants.SERVER_HOST);
        byte[] outData = ("Ping").getBytes();
        DatagramPacket out = new DatagramPacket(outData,outData.length, serverIP, Constants.SERVER_PORT);
        Log.e("kramer", "SENDING SOCKET");
        socket.send(out);
        Log.e("kramer", "SOCKET SENT");
        socket.close();
    }
    catch (Exception e)
    {
        e.printStackTrace();
    }       

    return null;
} 
```

智能手机成功记录了两条线路，但我的服务器上没有收到任何内容。任何的想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T14:39:41.197

问题解决了。

防火墙阻止了传入连接。我只是将端口打开为 UDP。

# git - 什么是藏匿处？

> ID：11260981
> 
> 赞同：17
> 
> 时间：2012-06-29T11:28:48.087
> 
> 标签：git, git-stash, fossil

我已经在各个地方搜索并搜索了一段时间，但没有找到一个好的答案。什么是 stash，它的用途是什么？

（困惑的来源：使用漂亮的Fuel和Fossil，点击“Stash changes”按钮，看到里面有问号的文件，不知道如何处理它们......）

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2017-02-25T14:18:14.740

# `First of all: let us understand why do we need to use stash?`

为了理解 stash 是什么，我们首先需要了解`3-stats`. Git 有一个名为的内置模型`3-states`，它是用于处理本地存储库的内部 git 结构。

[![在此处输入图像描述](../Images/7bb2b13faf5f1d5a704b85572c5eacd0.png)](https://i.stack.imgur.com/naws3.png)

的“问题”`3-states`是每个**存储库**有一个，而不是每个**分支**一个。因此，当我们切换分支时，唯一被修改的是[`HEAD`](https://stackoverflow.com/questions/34519665/how-to-move-head-back-to-a-previous-location-detached-head/34519716#34519716)指向不同提交的内容。

在 git 中，**分支**只是给定提交的别名，因此如前所述切换分支只会更改[`HEAD`](https://stackoverflow.com/questions/34519665/how-to-move-head-back-to-a-previous-location-detached-head/34519716#34519716)同时保持`working directory && stage` **不变**并保持所有修改不变。[正在使用新分支具有的所需文件更新工作目录，但它不是我们解释的一部分。]

因此，如果我们添加新文件，修改了一些其他文件，现在我们希望移动到不同的分支，我们的工作目录和阶段区域中会留下**污垢**，如下所示。

不管我们现在在哪个分支工作，我们都有一些**肮脏**的工作跟着我们。

[![在此处输入图像描述](../Images/db7857158d81971e7a68c8263124bf4f.png)](https://i.stack.imgur.com/zxV2h.png)

## `So how can we work on multiple branches?`

大多数 git 用户使用`stash`以获得在多个分支上同时工作的能力。`git stash`是完成它的基本方法，因为将我们的工作保存在一个名为**stash**`git stash`的单独区域中。

 **然后，我们可以在任何给定时间为任何给定分支检查代码。 [![在此处输入图像描述](../Images/39aa4c579a0a875553d612bbb0fe6cd5.png)](https://i.stack.imgur.com/uvGDO.jpg)

* * *

**到现在为止还挺好。**

## `Where is the problem and why not use stash in first place?`

问题是，当使用 stash 时，我们无法真正在多个分支上工作，因为每次我们希望切换分支时都必须进行 stash。

另一个问题是，我们可以将存储代码拉到错误的分支，如果我们做错了，我们必须找出哪些文件是正确的。

## `So how can we really work on multiple branches?`

Git 从 2007 年开始就有这种能力。在`contrib`文件夹下有一个名为“new-workdir”的隐藏命令，后来在版本中添加到 git 中并重`2.5`命名为`git worktree`.

# `git worktree`

`git worktree`将创建一个新的工作文件夹，允许我们同时在多个分支上工作。每个副本都将指向原始存储库，而它们`3-states`都是新的和新鲜的副本。这节省了我们使用`git stash`甚至克隆新存储库的需要，因为这些工作树共享相同的存储库，我们可以签出任何工作树上的任何分支，我们可以进行挑选或合并，所有这些都将在我们的机器上本地完成.

用法：

```
git worktree add <second path> 
```

将在您的计算机上创建另一个文件夹，允许您同时在不同的分支上工作。

这将允许您在新工作树上进行任何实验，而不会对存储库本身产生任何影响。在附图中，您可以看到有**2 个单独**的工作文件夹，但它们都使用一个存储库并共享内容。

[![在此处输入图像描述](../Images/b0597f9ed1dbfd2369137b988bfaf8a4.png)](https://i.stack.imgur.com/gXv1I.png)

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-06-29T11:58:51.800

Fossil、Git 和可能的其他版本控制系统共享存储的想法。Pro Git[有一个关于 stash 的部分](http://git-scm.com/book/en/Git-Tools-Stashing)。它部分说：

> Stashing 获取工作目录的脏状态——即修改后的跟踪文件和暂存的更改——并将其保存在未完成的更改堆栈中，您可以随时重新应用。

换句话说，这是一种在做其他事情的同时保存当前工作的方法，而不会进行“真正的”提交或影响您的存储库历史记录。**

# asp.net-mvc-3 - 使用 ViewBag 的 MVC3 中的文本框值

> ID：11260983
> 
> 赞同：-4
> 
> 时间：2012-06-29T11:28:57.530
> 
> 标签：asp.net-mvc-3, textbox, viewbag

考虑使用 Html Helper 创建的视图中的文本框字段。

```
@Html.TextBoxFor(m=>m.name, new {@value=ViewBag.x}); 
```

在这种情况下，如果在我的模型中我传递了一些值（不是 null），那么我的文本框、ViewBag.x 或我在模型对象中传递的值将是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T11:34:27.967

您**不能**覆盖`value`强类型助手的属性。如果您使用`ViewBag`. 一旦你走这条路，你将不得不遵循它：

```
@Html.TextBox("x") 
```

`x`您在控制器操作中塞入 ViewBag 的东西在哪里：

```
ViewBag.x = "foo"; 
```

强类型助手使用模型并使用作为第一个参数传递的 lambda 表达式来获取值。

因此，如果您想正确地做事，请扔掉`ViewBag`并使用视图模型和强类型助手：

```
@Htlm.TextBoxFor(model => model.X) 
```

# html - 锚定 CSS 重复背景图像

> ID：11260986
> 
> 赞同：3
> 
> 时间：2012-06-29T11:29:37.723
> 
> 标签：html, css, background-image

我有一个带有以下配置的标题横幅的网页：

```
<---Repeating Image Left--><---Banner Image---><---Repeating Image Right---> 
```

该页面设计为具有固定宽度的内容，但横幅跨越了浏览器窗口的整个宽度（因此在左侧和右侧包含重复图像的原因）。

这两个重复的图像是不同的，它们也不是可以放置在任何地方的标准背景图像。相反，左侧图像需要锚定/固定在横幅图像的左侧，然后随着浏览器窗口的展开，从该点向左重复。同样，右侧图像需要锚定/固定在横幅图像的右侧，并从该点向右重复。

对集合使用 pure`background-image:`属性`repeat-x`不起作用，因为图像将从浏览器窗口的左侧重复/平铺，而不是从横幅图像的左侧/右侧沿所需方向向外重复/平铺。

任何有助于达到预期效果的帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T12:44:22.747

您可以使用单个样式元素执行此操作，是的：

```
#banner {
  height: 50px;
  width: 50%; margin: 0; padding-right: 50%;
  background-image:url('banner.png'), url('left-bg.png'), url('right-bg.png');
  background-clip: padding-box, content-box, content-box;  
  -webkit-background-clip: padding-box, content-box, padding-box; 
  background-origin: padding-box, content-box, padding-box;
  background-position: center, right, center;
  background-repeat: no-repeat, repeat-x, repeat-x;
} 
```

该元素具有三个背景。诀窍是让不同的出现在左侧和右侧，我通过在左侧添加 50% 的填充来完成。左侧是“填充框”，右侧是“内容框”。

您可能希望将第一个背景设置为 an`<img>`以便您可以给它一个标题标签 - 如果您这样做，那么它只会出现在窗口的右侧 50% 中，因此您必须将其左对齐并`position:relative; left:-250px`使用把它放回中间。

最后，背景图像被锁定在窗口的中间，而不是横幅的边缘，但您可以通过更改图像本身来解决这个问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T11:37:57.510

你能提供一个网址来检查这个网站吗？听起来您需要尝试使用 css 属性：

```
background-position {x, y} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-06-29T11:48:18.160

```
banner
{
background-image:url('image.gif');
background-repeat:repeat-x;
vertical-align: middle;
text-align: center; /*optional*/
} 
```

我不知道这是否有效，但值得一试。

# web-services - 使用 SOAP 消息进行性能测试

> ID：11260987
> 
> 赞同：0
> 
> 时间：2012-06-29T11:29:38.003
> 
> 标签：web-services, node.js, soap, performance-testing

我必须使用 SOAP 消息完成性能测试。我不需要针对真正的 SOAP URL 端点，而是需要点击“模拟”URL 端点并返回“预先记录”的 SOAP 响应，这些响应可以保存在本地数据库中或缓存在内存中。

这个“模拟”SOAP 响应服务器需要能够每秒执行多达 1000 个事务。它还需要是可配置的，例如设置一个延迟响应匹配的 SOAP 响应等。

我一直在研究使用存储在本地 mongoDB 中的 SOAP 响应消息构建 Node.js 集群 HTTP 服务器。

我将有一台多核机器来运行这个 Mock 服务器，例如 96 核。

我需要能够询问传入的 SOAP 请求以将它们与正确的 SOAP 响应相匹配。

任何人都可以建议一个允许我从 SOAP 响应中提取数据的节点 js 模块。

或者建议一种“更好”的方式来处理整个项目？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T22:19:38.410

这对您来说可能有点迟到了，但是下次您遇到类似的挑战时，您可能想尝试[SOAP/REST Mock Service](https://sourceforge.net/p/soaprest-mocker)。这是一个轻量级的网络应用程序，允许配置一系列响应和响应延迟以及验证请求。

# objective-c - CoreData 故障和数据在我需要时未读取

> ID：11260990
> 
> 赞同：0
> 
> 时间：2012-06-29T11:29:47.463
> 
> 标签：objective-c, core-data, ios4

我需要将 CoreData 管理的对象传递给视图，所以我在 UITableViewController 类的后代中创建了一个相同类型的属性：

```
@property (strong) Event *udalostTermin; 
```

在@interface 和

```
@synthesize udalostTermin; 
```

在 @implementation 中并在调用视图的 pushViewController:animated: 之前填充此属性。

在 viewDidLoad 中，一切都还可以，打印说：

```
<Event: 0x868c160> (entity: Event; id: 0x8684220 
    <x-coredata:///Event/t22D3C10C-1BFC-40DE-918F-0E12A5473CA03> ; data: {
createDate = "2012-06-29 11:21:37 +0000";
doctor = nil;
end = "2012-06-29 11:21:37 +0000"; 
```

等等。但是当应用程序运行到 tableView:cellForRowAtIndexPath: 我需要显示数据的地方时，对象的打印显示：

```
<Event: 0x868c160> (entity: Event; id: 0x8684220 
    <x-coredata:///Event/t22D3C10C-1BFC-40DE-918F-0E12A5473CA03> ; data: <fault>) 
```

之前没有明确地对对象做任何事情，因此对象给了我错误的空数据。请问我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T14:26:31.973

从您的评论看来，答案似乎是**不要**调用`reset`您的`NSManagedObjectContext` From the documentation for `reset`: 'All the receiver's managed objects are "forgotten." ...这基本上意味着在内存中无效。

# ios - 从窗口中删除视图会在短时间内出现黑屏

> ID：11260992
> 
> 赞同：0
> 
> 时间：2012-06-29T11:30:05.030
> 
> 标签：ios, ios5

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view.
    MyAuraAppDelegate *delegate = (MyAuraAppDelegate *) [[UIApplication sharedApplication] delegate];
    // PeopleMasterViewController *peopleMasterViewControl = [[PeopleMasterViewController alloc] initWithNibName:nil bundle:nil];

    NSArray *viewsToRemove = [delegate.window subviews];
    for (InfiniTabBar *v in viewsToRemove) 
    {
        [v setHidden: YES];
    }  

} 
```

但在显示另一个视图之前，它给了我一小段时间黑屏。如何去除黑屏？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T11:54:22.753

只需删除自定义标签栏

```
NSArray *viewsToRemove = [delegate.window subviews];
for (InfiniTabBar *v in viewsToRemove) 
{
    if ([v isKindOfClass:[InfiniTabBar class]]) {
        [v setHidden: YES];
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T11:39:57.633

尝试将您的代码移入`viewWillAppear:`，以便它发生在屏幕更新时间附近。

# ios - 更改纵向和横向 iOS 方向的图像宽度和高度

> ID：11260998
> 
> 赞同：1
> 
> 时间：2012-06-29T11:30:46.707
> 
> 标签：ios, image, landscape, dimensions, portrait

我在[我的网站](http://www.designlagoon.com)上使用以下代码来减小 ipad 纵向上的 div 的大小，并且它工作成功。

```
@media only screen and (min-width: 768px) and (max-width: 959px) {
   .mosaic-block {
      width: 226px;
      height: 135px;
    }
} 
```

![iOS 肖像](../Images/ea19aed3496e85f5279c4ae7d54cae93.png)

但是，当我将方向更改为横向时，div 保持相同的值，而不是返回到 div 的默认较大尺寸。

![在此处输入图像描述](../Images/2fe8532594a7e16e329bdfeaa2e1207c.png)

如果站点直接加载到横向模式 - 它会正确显示（以较大的尺寸）。

当用户将方向从纵向切换到横向时，如何确保应用较大的 css div 尺寸？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-30T12:49:48.700

我认为您的媒体查询不正确 - ipad 的宽度/高度在旋转时不会改变，只有方向会改变。尝试将您的媒体查询更新为：

```
/* iPads (landscape) ----------- */
@media only screen 
and (min-device-width : 768px) 
and (max-device-width : 1024px) 
and (orientation : landscape) {
  .mosaic-block {
    /* default size here */
  }
}

/* iPads (portrait) ----------- */
@media only screen 
and (min-device-width : 768px) 
and (max-device-width : 1024px) 
and (orientation : portrait) {
  .mosaic-block {
    width: 226px;
    height: 135px;
  }
} 
```

参考：[CSS-Tricks 媒体查询](http://css-tricks.com/snippets/css/media-queries-for-standard-devices/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T12:31:25.713

这有助于我正确定位 iPad 肖像。事实证明，我正确地调整了 .mosaic-block 的大小，但应该调整包含的图像的大小。

我正在使用[amazium 框架](http://www.amazium.co.uk/)进行响应式设计，并使用[mosaic.js](http://buildinternet.com/2011/03/mosaic-sliding-boxes-and-captions-jquery-plugin/)进行动画翻转。这是完整的 HTML：

```
<div class="mosaic-block fade">

<a href="image.jpg" rel="shadowbox" target="_blank" class="mosaic-overlay details"
title="Title">
        <h4>A title</h4> 
        <p><span>Subheading:</span></p>
        <ul>
            <li><p>Some text</p></li>
            <li><p>Some more text</p></li>
            <li><p>Even more text</p></li>                                                              
        </ul>   
</a>
<div class="mosaic-backdrop"><img src="backdrop_image.jpg" class="max-image"/></div> 
```

Amazium 使用 .max-image 规则来改变不同分辨率下的图像大小：

```
.max-image  { width:100%; height:auto; } 
```

我的解决方案是在 ipad 肖像上为 .max-image 设置特定的图像大小：

```
@media only screen 
and (min-device-width : 768px) 
and (max-device-width : 1024px) 
and (orientation : landscape) {
.max-image {
width:286px;
height:171px;
}
} 
```

非常感谢 JunkMyFunk 先生的建议。

# javascript - 当只有 Jquery 对象可用时，如何模拟选择 e.target？

> ID：11260999
> 
> 赞同：0
> 
> 时间：2012-06-29T11:30:50.097
> 
> 标签：javascript, jquery, events, jquery-selectors, target

奇怪的...

我正在听这样的事件：

```
$(document).on('some_event', 'div:jqmData(role="page")', function(e){
   console.log( e.target )
   }) 
```

在我的控制台中，我得到了“硬编码”的 HTML，如下所示：

```
<div id="profile" class="ui-page ui-body-c ui-page-header-fixed" data-role="page" data-url="some_url" data-external-page="true" tabindex="0"> 
```

我需要从另一个我没有 e.target 可用的函数中复制此选择。相反，我有整个页面元素，它作为一个对象进行控制台：

```
[div#profile.ui-page] 
```

**问题：**
我这里漏掉了一些词...我如何选择与 e.target 相同的方式？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T11:40:04.223

听起来当你说你有一个“整个页面对象”时，你有一个包裹在 DOM 元素周围的 jQuery 对象。要访问原始 DOM 元素，您需要对 jQuery 对象（类似于数组）进行索引，例如，jQuery 对象中的第一个匹配元素是 at `[0]`。

所以：

```
var rawElement = pageObject[0]; 
```