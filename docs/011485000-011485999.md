# StackOverflow 问答 11485000-11485999

# prolog - Prolog大于/2成功

> ID：11485007
> 
> 赞同：2
> 
> 时间：2012-07-14T15:31:50.793
> 
> 标签：prolog, successor-arithmetics

我是 Prolog 的新手，我正在尝试解决这个问题：

> 定义一个谓词，该谓词`greater_than/2`采用我们在本讲座中介绍的符号（即 , ...）中的两个数字`0`作为`succ(0)`参数`succ(succ(0))`，并确定第一个数字是否大于第二个数字。例如：

```
?- greater_than( succ(succ(succ(0))), succ(0) ).
yes.
?- greater_than( succ(succ(0)), succ(succ(succ(0))) ). 
no. 
```

到目前为止，这是我的回答：

```
greater_than(X, 0).
greater_than( succ(succ(X)), succ(Y) ). 
```

但当然不能正常工作，所以我正在向任何人寻求帮助。谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-14T21:04:50.403

当您正在寻找递归解决方案时，您必须提供基本案例和递归步骤。您提供的基本案例几乎是正确的。但是它失败了，因为它会成功，例如当两个数字都为零时。只有当左侧是表单`succ(_)`并且右侧为零时，它才应该成功。

递归步骤应该从每一侧获取一个元素并应用递归。因此这应该工作：

```
greater_than(succ(_), 0).
greater_than(succ(X), succ(Y)):-
  greater_than(X, Y). 
```

# mysql - MySQL查询将一列的内容与另一列的标题进行比较

> ID：11485012
> 
> 赞同：-3
> 
> 时间：2012-07-14T15:32:56.137
> 
> 标签：mysql

我知道乍一看标题没有意义。但情况是这样的：数据库表被命名为“teams”。在其中，有一堆用于足球队位置的列（gk1、def1、def2、...、st2）。每列都是 VARCHAR 类型并包含玩家的姓名。还有一列名为“船长”。那一栏的内容（不是最幸运的解决方案）不是船长的名字，而是职位。

因此，如果 'st1' 的内容是 Zlatan Ibrahimovic 并且他是队长，那么 'captain' 的内容是字符串 'st1'，而不是字符串 'Zlatan Ibrahimovic'。

现在，我需要编写一个查询，从“teams”表中获取一行，但前提是队长是 Zlatan Ibrahimovic。请注意，此时**我不知道他是打 st1、st2 还是其他位置。**所以我只需要使用查询中的名字来检查他所扮演的位置是否设置为队长。从逻辑上讲，它看起来像：

if(Zlatan is Captain) 获取行内容

在 MySQL 中，if 条件实际上是 'where' 子句。但是有没有办法写呢？

```
$query="select * from teams where ???"; 
```

“团队”表结构为：

```
-----------------------------------------------------------------
|   gk1   |   def1  |   def2  | ... |   st2   |     captain     |
-----------------------------------------------------------------
| player1 | player2 | player3 | ... | playerN | captainPosition |
----------------------------------------------------------------- 
```

所有字段都是 VARCHAR 类型。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-14T15:37:42.420

因为`captain`列的内容是位置而不是名称，而你要根据位置来选择，这很琐碎。

```
$query="select * from teams where captain='st1'"; 
```

* * *

**修改了以下问题编辑：**

您的数据库设计不允许非常有效地完成此操作。您正在查看类似的查询

```
 SELECT * FROM teams WHERE
    (gk1='Zlatan' AND captain='gk1') OR
    (de1='Zlatan' AND captain='de1') OR
    ... 
```

该设计要求对许多功能进行此类查询：如何在不搜索每个位置的情况下找到特定球员效力的球队？[实际上你可以通过在所有位置的串联中查找名称来做到*这一点*，但它仍然不是很有效或灵活]

更好的解决方案是规范化您的数据，以便您有一个表格显示哪个玩家在哪里玩：

```
 Situation
 Team | Player | Posn | Capt
 -----+--------+------+------
    1 |     12 |    1 |    0
    1 |     11 |    2 |    1
    1 |     13 |   10 |    0 
```

...与其他表格一起，您可以识别此处引用的球队、球员和位置。需要进行一些参考检查，以确保每支球队只有一名队长，并且只扮演一名守门员，等等。

然后您可以很容易地看到 Team 1 的队长是 Player 11，他在位置 2 上比赛；或查找球员 11 担任队长的球队（如果有）。

```
SELECT Name FROM Teams
WHERE Situation.Team = Teams.id
  AND Situation.Capt = 1
  AND Situation.Player = Players.id
  AND Players.Name = 'Zlatan'; 
```

对这个想法的改进可能是

```
 Situation
 Team | Player | Posn | Capt | Playing
 -----+--------+------+------+--------
    1 |     12 |    1 |    0 |       1
    1 |     11 |    2 |    1 |       1
    1 |     13 |   10 |    0 |       0
    1 |     78 |    1 |    0 |       0 
```

...这样你就可以有两名守门员（例如）但只有他们的场上。

重新设计数据库可能需要做很多工作；但它远没有使用现有设计那么复杂或麻烦。而且你会发现如果你不需要使用低效的查询，性能会更好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-14T15:45:40.937

根据您所暴露的，您只需将两个条件放在一起并检查查询是否返回了 1 条记录。如果它没有返回任何记录，他就不是船长：

```
SELECT *
FROM Teams
WHERE name = 'Zlatan Ibrahimovic' AND position = 'st1'; 
```

# php - PHP中的iOS收据验证

> ID：11485019
> 
> 赞同：3
> 
> 时间：2012-07-14T15:34:01.907
> 
> 标签：php, iphone, objective-c, ios

这是一个痛苦的话题，在堆栈上已经讨论了很多次，但是，在我阅读的所有帖子和尝试的事情中，我无法使用 PHP 进行 IAP 验证，如果我知道原因，我会被诅咒的。

这是我在 iOS 上获取收据的方式：

```
purchaseReceipt = [[NSString alloc] initWithData:transaction.transactionReceipt encoding:NSUTF8StringEncoding]; 
```

我将它发送到我的 PHP 脚本，该脚本对其进行编码并将其发送到服务器：

```
$receipt = base64_encode($_POST["rcpt"]);
$postData = json_encode(
    array('receipt-data' => $receipt)
);

$ch = curl_init($endpoint);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
curl_setopt($ch, CURLOPT_POST, true);
curl_setopt($ch, CURLOPT_POSTFIELDS, $postData);

$response = curl_exec($ch);
$errno    = curl_errno($ch);
$errmsg   = curl_error($ch);
curl_close($ch); 
```

我遇到的问题非常莫名其妙。所有经过测试的收据都返回无效，状态为 -42352 。是的，我将它们送到适当的环境中。收据 JSON 似乎已正确编码，因为如果我在编码后对 $receipt 进行任何更改，脚本将返回错误 21002（receipt-data 属性中的数据格式错误）。所以它看起来像一张真正的坏收据，这不可能，因为它来自我在沙盒上进行的购买。

我会很感激任何帮助，因为我没有想法。

这是在沙盒上进行的示例购买中 $_POST["rcpt"] 的值：

```
{
    "signature" = "Aqi3Y/UKAYEJUqtFxjRx0DDQ1BV7W/3VtLpVq/l85SIxGXTJOF9WrlBVryQTVgWvUWY6poJVpWQjXrgoSQEjGapN4RmaBChWmHNUgyBy03HKzZ5gQupfHxvxK I3xRaoqyb0jJC4VOmTavU46LqjDfqNuMQvwdT9Y57zoIplBylVAAADVzCCA1MwggI7oAMCAQICCGUUkU3ZWAS1MA0GCSqGSIb3DQEBBQUAMH8xCzAJBgNVBAYTAlVTMRMwEQYDVQQKDApBcHBsZSBJbmMuMSYwJAYDVQQLDB1BcHBsZSBDZXJ0aWZpY2F0aW9uIEF1dGhvcml0eTEzMDEGA1UEAwwqQXBwbGUgaVR1bmVzIFN0b3JlIENlcnRpZmljYXRpb24gQXV0aG9yaXR5MB4XDTA5MDYxNTIyMDU1NloXDTE0MDYxNDIyMDU1NlowZDEjMCEGA1UEAwwaUHVyY2hhc2VSZWNlaXB0Q2VydGlmaWNhdGUxGzAZBgNVBAsMEkFwcGxlIGlUdW5lcyBTdG9yZTETMBEGA1UECgwKQXBwbGUgSW5jLjELMAkGA1UEBhMCVVMwgZ8wDQYJKoZIhvcNAQEBBQADgY0AMIGJAoGBAMrRjF2ct4IrSdiTChaI0g8pwv/cmHs8p/RwV/rt/91XKVhNl4XIBimKjQQNfgHsDs6yju  DrKJE7uKsphMddKYfFE5rGXsAdBEjBwRIxexTevx3HLEFGAt1moKx509dhxtiIdDgJv2YaVs49B0uJvNdy6SMqNNLHsDLzDS9oZHAgMBAAGjcjBwMAwGA1UdEwEB/wQCMAAwHwYDVR0jBBgwFoAUNh3o4p2C0gEYtTJrDtdDC5FYQzowDgYDVR0PAQH/BAQDAgeAMB0GA1UdDgQWBBSpg4PyGUjFPhJXCBTMzaN mV8k9TAQBgoqhkiG92NkBgUBBAIFADANBgkqhkiG9w0BAQUFAAOCAQEAEaSbPjtmN4C/IB3QEpK32RxacCDXdVXAeVReS5FaZxc t88pQP93BiAxvdW/3eTSMGY5FbeAYL3etqP5gm8wrFojX0ikyVRStQ /AQ0KEjtqB07kLs9QUe8czR8UGfdM1EumV/UgvDd4NwNYxLQMg4WTQfgkQQVy8GXZwVHgbE/UC6Y7053pGXBk51NPM3woxhd3gSRLvXj loHsStcTEqe9pBDpmG5 sk4tw GK3GMeEN5/ e1QT9np/Kl1nj aBw7C0xsy0bFnaAd1cSS6xdory/CUvM6gtKsmnOOdqTesbp0bs8sn6Wqs0C9dgcxRHuOMZ2tm8npLUm7argOSzQ==";
    "purchase-info" = "ewoJIm9yaWdpbmFsLXB1cmNoYXNlLWRhdGUtcHN0IiA9ICIyMDEyLTA3LTE0IDA2OjAyOjQ4IEFtZXJpY2EvTG9zX0FuZ2VsZXMiOwoJIm9yaWdpbmFsLXRyYW5zYWN0aW9uLWlkIiA9ICIxMDAwMDAwMDUyODIxNzk1IjsKCSJidnJzIiA9ICIxLjIuMCI7CgkidHJhbnNhY3Rpb24taWQiID0gIjEwMDAwMDAwNTI4MjE3OTUiOwoJInF1YW50aXR5IiA9ICIxIjsKCSJvcmlnaW5hbC1wdXJjaGFzZS1kYXRlLW1zIiA9ICIxMzQyMjcwOTY4Njg1IjsKCSJwcm9kdWN0LWlkIiA9ICJjb20uZHJhZ29ubG9yZHNtb2JpbGUuVDFfMzBjb2lucyI7CgkiaXRlbS1pZCIgPSAiNDUzMDEzMDUzIjsKCSJiaWQiID0gImNvbS5kcmFnb25sb3Jkc21vYmlsZS5kcmFnb25sb3JkcyI7CgkicHVyY2hhc2UtZGF0ZS1tcyIgPSAiMTM0MjI3MDk2ODY4NSI7CgkicHVyY2hhc2UtZGF0ZSIgPSAiMjAxMi0wNy0xNCAxMzowMjo0OCBFdGMvR01UIjsKCSJwdXJjaGFzZS1kYXRlLXBzdCIgPSAiMjAxMi0wNy0xNCAwNjowMjo0OCBBbWVyaWNhL0xvc19BbmdlbGVzIjsKCSJvcmlnaW5hbC1wdXJjaGFzZS1kYXRlIiA9ICIyMDEyLTA3LTE0IDEzOjAyOjQ4IEV0Yy9HTVQiOwp9";
    "environment" = "Sandbox";
    "pod" = "100";
    "signing-status" = "0";
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T21:46:02.240

您是否尝试在将收据发送到服务器之前对其进行编码？

[Base64 iOS 示例代码](https://stackoverflow.com/questions/1298998/verify-receipt-for-in-app-purchase)

+ 等字符被解释为空格字符。

# configuration - RSpec - 如何排除子目录中的规范文件？

> ID：11485023
> 
> 赞同：5
> 
> 时间：2012-07-14T15:34:43.060
> 
> 标签：configuration, rspec, directory

假设我有以下`spec`子目录：

```
lib
models
observers
workers 
```

在 spec_helper.rb 文件中，如何告诉 rspec 排除 lib 子目录中的所有规范文件？

```
Spork.prefork do

  ENV['RAILS_ENV'] ||= 'test'
  require File.expand_path("../../config/environment", __FILE__)
  require 'rspec/rails'

  Dir[Rails.root.join("spec/support/**/*.rb")].each {|f| require f}

  RSpec.configure do |config|
    config.mock_with :rspec
    config.use_transactional_fixtures = false

    config.before(:suite) do
      DatabaseCleaner.clean_with :truncation
      DatabaseCleaner.strategy = :transaction
    end

    config.before(:each) do
      DatabaseCleaner.start
    end

    config.after(:each) do
      DatabaseCleaner.clean
    end

    config.treat_symbols_as_metadata_keys_with_true_values = true
    config.filter_run :focus => true
  end

end

Spork.each_run do
  FactoryGirl.reload
end 
```

仅供参考 - 我正在使用警卫来自动重新加载测试。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T17:48:13.380

不知道如何排除，但您可以在警卫中包含一个列表，如下所示：

```
guard 'rspec', :spec_paths => ['spec/models', 'spec/workers', 'spec/observers'] do
  # ...
end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-06-26T07:21:59.023

一种解决方案是[排除过滤器](https://www.relishapp.com/rspec/rspec-core/v/2-0/docs/filtering/exclusion-filters)：

```
RSpec.configure do |c|
  # declare an exclusion filter
  c.filter_run_excluding :broken => true
end

describe "something" do
  it "does one thing" do
  end

  # tag example for exclusion by adding metadata
  it "does another thing", :broken => true do
  end
end 
```

`describe`排除标志也可以应用`context`。

此外，[这](https://www.relishapp.com/rspec/rspec-core/v/2-3/docs/filtering/run-all-when-everything-filtered)是有用的配置选项：

```
RSpec.configure do |c|
  c.run_all_when_everything_filtered = true
end 
```

因此，如果`/lib`排除其中的所有内容，您仍然可以使用手动运行规范`rspec spec/lib/`

# android - Seekbar 创建 EditTexts，然后获取条目以供进一步使用

> ID：11485026
> 
> 赞同：0
> 
> 时间：2012-07-14T15:35:02.777
> 
> 标签：android, arrays, seekbar

此代码创建一个搜索栏，并使搜索栏创建与滑块所在的一样多的 EditText 字段/删除那些太多的字段。此代码在 OnActivityCreated

```
final LinearLayout linearLayout = (LinearLayout) getActivity()
  .findViewById(R.id.npv_calcfields);
EditText editText = new EditText(getActivity());
editText.setId(i);
editText.setLayoutParams(new LayoutParams(
  LayoutParams.FILL_PARENT, LayoutParams.WRAP_CONTENT));
  SeekBar bar = (SeekBar) getActivity().findViewById(R.id.npv_seekbar);
  final TextView selection = (TextView) getActivity()
    .findViewById(R.id.npv_selected);
  bar.setOnSeekBarChangeListener(new OnSeekBarChangeListener() {
    public void onProgressChanged(SeekBar seekbar, int progress,
      boolean fromUser) {
      selection.setText("You have selected " + progress + " periods.");
      if (progress == 0) {
        String normalstring = getActivity().getResources()
          .getString(R.string.npv1);
        selection.setText(normalstring);
      }
      if (i > progress) {
        while (i > progress) {
          i--;
          EditText editText = (EditText) getActivity()
            .findViewById(i);
          linearLayout.removeView(editText);
        }
      } else {
        while (i < progress) {
          EditText editText = new EditText(getActivity());
          editText.setId(i);
          editText.setLayoutParams(new LayoutParams(
            LayoutParams.FILL_PARENT,
            LayoutParams.WRAP_CONTENT));
          linearLayout.addView(editText);
          editText.setHint("Cash Flow " + i);
          i++;
        }
      }
    }
    public void onStopTrackingTouch(SeekBar arg0) {
    }
    public void onStartTrackingTouch(SeekBar arg0) {
    }
  }); 
```

此代码在通用类区域中：

```
int i = 0;
EditText r = (EditText) getActivity().findViewById(R.id.npv_rate);
Button calc = (Button) getActivity().findViewById(R.id.npv_calc);
EditText[] DynamicField = new EditText[16]; 
```

现在我希望用户将数字输入到那些 edittext 字段中，然后我想对它们进行一些数学运算：`Entry / (Math.pow(1+r, i)`使用`i`字段的 id。因此，第一个条目应按以下方式计算：`entry/(1+r)^0`。这是我尝试过的，但它不起作用。它只是在启动时崩溃。

```
calc.setOnClickListener(new OnClickListener() {
  public void onClick(View arg0) {
    Double r1 = Double.parseDouble(r.getText().toString());
    EditText editText = (EditText) getActivity().findViewById(i);
    TextView answer = (TextView) getActivity().findViewById(R.id.npv_answer);
    double[] CashFlows;
    CashFlows = new double[i];
    double result = 0;
    CashFlows[i] = (Double.parseDouble(editText.getText()
      .toString())) / (Math.pow(1 + r1, i));
    for (double d : CashFlows) {
      result += d;
    }
    answer.setText("answer is " + result);
  }
}); 
```

我做错什么了？顺便说一句，只有最后一个代码段不起作用。如果我评论说一切都很好，我测试了它:) 只是不做任何事情 :)

好的，你可以在这里看到的错误日志的一点背景：http: [//pastebin.com/G8iX6Pkm](http://pastebin.com/G8iX6Pkm) 编辑：整个类文件可以在这里看到：http: [//pastebin.com/dxA91dst](http://pastebin.com/dxA91dst)，整个项目可以在这里找到：[https ://github.com/killerpixler/Android-Financial-Calculator.git](https://github.com/killerpixler/Android-Financial-Calculator.git)

类文件是一个片段，当有人单击 Main 活动中的列表项时，该片段会加载到 DetailsActivity 中。就像我说的错误必须在按钮侦听器中，因为它在我添加它之前就已经工作了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T10:26:16.080

这`NullPointerException`是因为您`Views`使用将`getActivity()`它们声明为类中的字段的方法进行初始化`F_NPV`。调用回调后，方法`getActivity()`方法将返回有效`Activity`引用`onAttach()`，因此您初始化视图的方式将不起作用，因为此时（`Fragment`初始化类的字段时）该方法`getActivity`将返回`null`，没有有效引用。进行初始化的正确方法是在`onActivityCreated`回调中进行：

```
EditText r;
Button calc;
//...
@Override
public void onActivityCreated(Bundle savedInstanceState) {
    super.onActivityCreated(savedInstanceState);
    r = (EditText) getActivity().findViewById(R.id.npv_rate);
    calc = (Button) getActivity().findViewById(R.id.npv_calc);
//... 
```

另外，如果可以的话，关于您的代码的一些建议：

您正在从字符串中进行一些双精度解析，检查输入可能是个好主意，这样您就不会抛出`NumberFormatException`. 例如，如果用户创建了一些`EditTexts`然后单击计算`Button`（我知道，这听起来很傻，但用户有可能会这样做（例如我做到了）），你会`NumberFormatException`在尝试解析时抛出 a空`String`。而是做一点检查：

```
public void onClick(View arg0) {
    Double r1 = Double.parseDouble((r.getText().toString())
                    .equals("") ? "0" : r.getText().toString());
    EditText editText = (EditText) getActivity().findViewById(i);
    TextView answer = (TextView) getActivity().findViewById(R.id.npv_answer);
    double[] CashFlows;
    CashFlows = new double[i];
    double result = 0;
    String tmp = editText.getText().toString();
    CashFlows[i] = (Double.parseDouble(tmp.equals("") ? "0" : tmp))
                        / (Math.pow(1 + r1, i));
    //... 
```

此外，即使您在`EditText`上面的代码中有正确的值，也会抛出一个`NullPointerException`，因为`editText`变量是`null`. 原因`while`在于您用于创建字段的循环。例如，如果用户将 移动`SeekBar`到 3，则`while`循环将运行 3 次，每次递增`i`值。所以，，，，到目前为止是正确的，但是因为你每次都会`i`增加最终结果。现在在方法中，您将查找带有 id 的，但由于布局中没有 id ，因此视图将是。`0``1``2``i``i``4``onClick``EditText``i``EditText``4``null`

另外，试着给你的类起更好的名字，你可能很清楚它们的意思，但是对于阅读你的代码的人来说，你可能会让事情变得更糟（比如 F_PNV、F_PV 等）。

该`onActivityCreated`方法的代码。这应该解决你想要做的事情（如果我明白你想要什么）：

```
@Override
public void onActivityCreated(Bundle savedInstanceState) {
    super.onActivityCreated(savedInstanceState);
    r = (EditText) getActivity().findViewById(R.id.npv_rate);
    calc = (Button) getActivity().findViewById(R.id.npv_calc);
    final LinearLayout linearLayout = (LinearLayout) getActivity()
            .findViewById(R.id.npv_calcfields);
    SeekBar bar = (SeekBar) getActivity().findViewById(R.id.npv_seekbar);
    final TextView selection = (TextView) getActivity().findViewById(
            R.id.npv_selected);
    bar.setOnSeekBarChangeListener(new OnSeekBarChangeListener() {

        public void onProgressChanged(SeekBar seekbar, int progress,
                boolean fromUser) {
            selection
                    .setText("You have selected " + progress + " periods.");
            if (progress == 0) {
                String normalstring = getActivity().getResources()
                        .getString(R.string.npv1);
                selection.setText(normalstring);
                linearLayout.removeAllViews(); // the progress is 0 so
                                                // remove all the views that
                                                // are currently present
            } else {                
                int currentChilds = linearLayout.getChildCount();
                if (currentChilds < progress) {
                    while (currentChilds != progress) {
                        EditText editText = new EditText(getActivity());                        
                        editText.setLayoutParams(new LayoutParams(
                                LayoutParams.FILL_PARENT,
                                LayoutParams.WRAP_CONTENT));
                        linearLayout.addView(editText);
                        currentChilds++;                            
                    }
                } else if (currentChilds > progress) {
                    while (currentChilds != progress) {
                        linearLayout.removeViewAt(linearLayout
                                .getChildCount() - 1);
                        currentChilds--;
                    }
                }
            }
        }

        public void onStopTrackingTouch(SeekBar arg0) {
        }

        public void onStartTrackingTouch(SeekBar arg0) {
        }
    });

    calc.setOnClickListener(new OnClickListener() {

        public void onClick(View view) {
            Double r1 = Double.parseDouble((r.getText().toString())
                    .equals("") ? "0" : r.getText().toString());
            TextView answer = (TextView) getActivity().findViewById(
                    R.id.npv_answer);
            final LinearLayout linearLayout = (LinearLayout) getActivity()
                    .findViewById(R.id.npv_calcfields);
            int size = linearLayout.getChildCount();
            double[] CashFlows = new double[size];
            double result = 0;
            for (int i = 0; i < size; i++) {
                EditText editText = (EditText) linearLayout.getChildAt(i);
                String tmp = editText.getText().toString();
                CashFlows[i] = (Double.parseDouble(tmp.equals("") ? "0"
                        : tmp)) / (Math.pow(1 + r1, i));
            }
            for (double d : CashFlows) {
                result += d;
            }
            answer.setText("answer is " + result);
        }
    });

} 
```

# yii - 如何为 Yii 自定义面包屑小部件的链接？

> ID：11485027
> 
> 赞同：2
> 
> 时间：2012-07-14T15:35:17.240
> 
> 标签：yii, breadcrumbs

如何为 Yii 自定义面包屑小部件的链接？

我可以更改属性`tagName`，但它是用于容器的。我想将每个链接的标签从 更改`a`为`li`。我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-14T15:54:24.837

好吧，您可以为默认的 CBreadcrumbs 小部件类指定没有设置/属性值，这将为您提供`<li>`. 如果您查看其[`run()`](http://www.yiiframework.com/doc/api/1.1/CBreadcrumbs#run-detail "http://www.yiiframework.com/doc/api/1.1/CBreadcrumbs#run-detail")方法，您可以确认这一点。在源代码中，您可以看到：

```
public function run(){
 // code

 foreach($this->links as $label=>$url)
 {
    if(is_string($label) || is_array($url))
        $links[]=CHtml::link($this->encodeLabel ? CHtml::encode($label) : $label, $url);
    else
        $links[]='<span>'.($this->encodeLabel ? CHtml::encode($url) : $url).'</span>';
 }
 // more code
} 
```

所以你要做的是`extend`这个类并指定你自己的`run`方法，你可以在哪里使用`<li>`或者[`CHtml::tag('li',//other options)`](http://www.yiiframework.com/doc/api/1.1/CHtml#tag-detail "http://www.yiiframework.com/doc/api/1.1/CHtml#tag-detail")代替默认的[`CHtml::link`](http://www.yiiframework.com/doc/api/1.1/CHtml#link-detail "http://www.yiiframework.com/doc/api/1.1/CHtml#link-detail").

**编辑：**

虽然我建议用一个（而不是替换它）封闭`<a>`每个链接：`<li>`

```
$links[]='<li>'.CHtml::link($this->encodeLabel ? CHtml::encode($label) : $label, $url).'</li>'; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-10T11:18:36.320

您可以使用 'activeLinkTemplate' 和 'inactiveLinkTemplate' 属性来做到这一点：

```
$this->widget('zii.widgets.CBreadcrumbs',
               array('tagName'=>'ul', 
                     'homeLink'=>'<li>'.CHtml::link('Home', array('/')).'</li>',
                     'activeLinkTemplate'=>'<li><a href="{url}">{label}</a></li>',
                     'inactiveLinkTemplate'=>'<li class="active">{label}</li>',
                     'htmlOptions'=> array('class'=>'breadcrumb'),
                     'separator'=>' / ',
                     'links'=>$this->breadcrumbs,
             )); 
```

或者你可以写 'homeLink'=>false。但在这种情况下，你必须每次都用 $this->breadcrumbs 设置 Home url。

# networking - 关于负载均衡器的问题

> ID：11485032
> 
> 赞同：1
> 
> 时间：2012-07-14T15:35:30.673
> 
> 标签：networking, load-balancing

我在工作场所使用了很多负载均衡器，我想知道是否有一个好的开源负载均衡器？

好的，我的意思是可以在企业中使用的软件，并且在普通 PC 上使用该软件是否有效？

顺便说一句，我在网上搜索了很多，找到了一些，但不确定哪个比另一个更好，我需要你的专业知识。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T16:20:00.180

HAProxy 和 nginx 是流行的开源选项：

[http://haproxy.1wt.eu/](http://haproxy.1wt.eu/)

[http://www.nginx.com/](http://www.nginx.com/)

我建议阅读每个文档以了解其功能。HAProxy 更类似于我怀疑您在工作中使用的网络负载平衡器，它完全支持基于 TCP 的任何应用程序协议。Nginx 实际上是一个 HTTP 服务器，但它可以配置为反向代理，对后端目标服务器进行负载平衡。如果您只需要对 HTTP 流量进行负载平衡（并且您不需要路由其他网络协议，如 ssh 或 SMTP），那么 nginx 可能是一个不错的选择。

# python - re 和数字的问题

> ID：11485037
> 
> 赞同：0
> 
> 时间：2012-07-14T15:36:09.207
> 
> 标签：python, regex, parsing

```
def de_punctuate(xs):
    return re.findall(r"[\w']+(?:-[\w']+)*", xs)

numbers = partial(re.search, r'[0,9]')

def no_numbers(xs):
    return filterfalse(numbers, xs)

def string2filter(xs):
    return no_numbers(de_punctuate(xs))

for d in data:
    print(d)
    print(list(string2filter(d))) 
```

输出：

```
Nordmann brukte mobilen i ett døgn i Afrika - må ut med 137.000 kroner
['Nordmann', 'brukte', 'mobilen', 'i', 'ett', 'døgn', 'i', 'Afrika', 'må', 'ut', 'med', '137', 'kroner']

400.000 japanere evakueres fra flom
['japanere', 'evakueres', 'fra', 'flom']

Utvist i 2009 - nå siktet for overfallsvoldtekt i 2011
['Utvist', 'i', 'nå', 'siktet', 'for', 'overfallsvoldtekt', 'i']

Selvmordsangrep mot afghansk bryllupsfest - Minst 22 drepte
['Selvmordsangrep', 'mot', 'afghansk', 'bryllupsfest', 'Minst', '22', 'drepte'] 
```

我很困惑为什么输出与数字不一致。不应该有。在某些情况下这是正确的，但对于其他情况，它们仍然存在。见输出 1 和 4。

有任何想法吗？

我想测试每个`word`以防出现以下错误：`this3`

我可以在第一个重新表达式中包含一个数字搜索，这样我就不必进行两次通过了吗？

答案是：

```
def stripsplit(xs):
    """ return a list, excluding numbers and punctuation (except joining hyphens) """
    return re.findall(r"[a-zA-ZåøæÅØÆ']+(?:-[a-zA-ZåøæÅØÆ']+)*", xs) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-14T15:41:44.650

要搜索数字，而不是`r'[0,9]'`您应该使用`'[0-9]'`or `'\d'`。

（`[0,9]`匹配 '0' 或 ',' 或 '9'，这不是你的意思）

**编辑：** `\w`相当于`[a-zA-Z0-9_]`. 为什么不直接使用`[a-zA-Z']`呢？

# android - 如何在 SQLite 数据库上使用游标

> ID：11485041
> 
> 赞同：3
> 
> 时间：2012-07-14T15:36:43.803
> 
> 标签：android, database, sqlite

我正在按照教程制作数据库游标，但遇到了问题；当我编写下面的代码时，我没有选择在数据库名称后添加查询：

```
public String getData(){
    db.open();
    Cursor c = db.   ;
    return none;
} 
```

`db`是我的数据库名称。我想知道是否有人知道为什么它没有给我选择。当我输入查询时，它说 DBAdapter 中不存在帽子。我必须在我的 DBAdapter 类中添加一些东西吗？如果是这样，我必须添加什么？

这是我的活动 Java：

```
package com.course.ucas;

import java.util.ArrayList;

import android.app.Activity;
import android.content.Context;
import android.database.Cursor;
import android.database.sqlite.SQLiteException;
import android.os.Bundle;
import android.widget.ArrayAdapter;
import android.widget.Toast;
import android.database.sqlite.SQLiteDatabase; 

public class DatabaseActivity extends Activity {
/** Called when the activity is first created. */
DBAdapter db;
@Override
public void onCreate(Bundle savedInstanceState) {
super.onCreate(savedInstanceState);
setContentView(R.layout.activity_main);

DBAdapter db = new DBAdapter(this);
db.open();
long id;
id = db.insertTitle(
"UNIVERSITY OF ABERDEEN","Computer Science",310,84,0,"BBB","");
id = db.insertTitle(
"UNIVERSITY OF ABERTAY DUNDEE","Computer Science",300,0,70,"CCC","N/A");
id = db.insertTitle(
"ABERYSTWYTH UNIVERSITY","Computer Science",270,79,70,"BBC","N/A");
id = db.insertTitle(
"ANGLIA RUSKIN UNIVERSITY","Computer Science",220,69,50,"CCC","N/A");
id = db.insertTitle(
"ASTON UNIVERSITY","Computer Science",330,91,80,"BBB","N/A");
id = db.insertTitle(
"BANGOR UNIVERSITY","Computer Science",260,86,0,"CCC","N/A");
id = db.insertTitle(
"UNIVERSITY OF BATH","Computer Science",440,91,100,"AAA","A*AB");
id = db.insertTitle(
"UNIVERSITY OF BEDFORDSHIRE","Computer Science",120,74,50,"CCD","N/A");
id = db.insertTitle(
"UNIVERSITY OF BIRMINGHAM","Computer Science",400,76,90,"AAB","N/A");
id = db.insertTitle(
"BIRMINGHAM CITY UNIVERSITY","Computer Science",240,68,70,"BCC","N/A");
id = db.insertTitle(
"THE UNIVERSITY OF BOLTON","Computer Science",0,78,0,"CCC","N/A");
id = db.insertTitle(
"UNIVERSITY OF BRADFORD","Computer Science",180,72,50,"CCC","N/A");
id = db.insertTitle(
"UNIVERSITY OF BRIGHTON","Computer Science",270,80,69,"BBB","N/A");
id = db.insertTitle(
"UNIVERSITY OF BRISTOL","Computer Science",480,96,95,"AAA","N/A");
id = db.insertTitle(
"THE UNIVERSITY OF BUCKINGHAM","Computer Science",0,0,0,"BBC","N/A");
id = db.insertTitle(
"BUCKINGHAMSHIRE NEW UNIVERSITY","Computer Science",150,61,55,"CCD","N/A");
id = db.insertTitle(
"UNIVERSITY OF CAMBRIDGE","Computer Science",580,95,100,"A*AA","N/A");
id = db.insertTitle(
"CANTERBURY CHRIST CHURCH UNIVERSITY","Computer Science",170,81,45,"CCC","N/A");
id = db.insertTitle(
"CARDIFF UNIVERSITY","Computer Science",360,79,82,"ABB","N/A");
id = db.insertTitle(
"CARDIFF METROPOLITAN UNIVERSITY","Computer Science",200,93,55,"BBC","N/A");
id = db.insertTitle(
"UNIVERSITY OF CENTRAL LANCASHIRE","Computer Science",240,75,74,"CCC","BBC");
id = db.insertTitle(
"UNIVERSITY OF CHESTER","Computer Science",240,86,75,"CCC","N/A");
id = db.insertTitle(
"THE CITY UNIVERSITY","Computer Science",320,65,73,"AAA","N/A");
id = db.insertTitle(
"COVENTRY UNIVERSITY","Computer Science",230,67,65,"BBC","N/A");
id = db.insertTitle(
"THE UNIVERSITY OF CUMBRIA","Computer Science",0,0,0,"CCC","N/A");
id = db.insertTitle(
"DE MONTFORT UNIVERSITY","Computer Science",230,80,58,"AAA","N/A");
id = db.insertTitle(
"UNIVERSITY OF DERBY","Computer Science",260,73,70,"BBC","N/A");
id = db.insertTitle(
"UNIVERSITY OF DUNDEE","Computer Science",336,96,85,"BBB","N/A");
id = db.insertTitle(
"DURHAM UNIVERSITY","Computer Science",440,81,100,"AAA","N/A");
id = db.insertTitle(
"UNIVERSITY OF EAST ANGLIA","Computer Science",320,89,55,"BBB","N/A");
id = db.insertTitle(
"UNIVERSITY OF EAST LONDON","Computer Science",205,74,39,"CDD","N/A");
id = db.insertTitle(
"UNIVERSITY OF EDINBURGH","Computer Science",428,90,85,"AAA","ABB");
id = db.insertTitle(
"EDINBURGH NAPIER UNIVERSITY","Computer Science",260,83,58,"CCD","N/A");
id = db.insertTitle(
"UNIVERSITY OF ESSEX","Computer Science",315,84,75,"BBB","N/A");
id = db.insertTitle(
"UNIVERSITY OF EXETER","Computer Science",0,86,95,"ABB","N/A");
id = db.insertTitle(
"UNIVERSITY OF GLAMORGAN / PRIFYSGOL MORGANNWG","Computer Science",280,69,52,"BBB","N/A");
id = db.insertTitle(
"UNIVERSITY OF GLASGOW","Computer Science",384,98,90,"ABB","N/A");
id = db.insertTitle(
"GLASGOW CALEDONIAN UNIVERSITY","Computer Science",258,80,51,"CC","N/A");
id = db.insertTitle(
"UNIVERSITY OF GLOUCESTERSHIRE","Computer Science",220,73,71,"CCC","N/A");
id = db.insertTitle(
"GLYNDWR UNIVERSITY","Computer Science",200,75,70,"CCC","N/A");
id = db.insertTitle(
"GOLDSMITHS' COLLEGE","Computer Science",220,83,70,"BBB","N/A");
id = db.insertTitle(
"UNIVERSITY OF GREENWICH","Computer Science",180,89,54,"BBC","N/A");
id = db.insertTitle(
"HERIOT-WATT UNIVERSITY","Computer Science",288,77,90,"BBB","N/A");
id = db.insertTitle(
"UNIVERSITY OF HERTFORDSHIRE","Computer Science",180,80,62,"CDD","N/A");
id = db.insertTitle(
"UNIVERSITY OF THE HIGHLANDS AND ISLANDS","Computer Science",0,0,0,"D","N/A");
id = db.insertTitle(
"UNIVERSITY OF HUDDERSFIELD","Computer Science",240,63,84,"BBB","N/A");
id = db.insertTitle(
"UNIVERSITY OF HULL","Computer Science",240,83,95,"BBC","N/A");
id = db.insertTitle(
"IMPERIAL COLLEGE, LONDON","Computer Science",510,84,98,"AAA","N/A");
id = db.insertTitle(
"KEELE UNIVERSITY","Computer Science",260,74,0,"BBB","N/A");
id = db.insertTitle(
"UNIVERSITY OF KENT","Computer Science",310,80,90,"BBB","N/A");
id = db.insertTitle(
"KING'S COLLEGE LONDON","Computer Science",370,82,90,"AAB","N/A");
id = db.insertTitle(
"KINGSTON UNIVERSITY","Computer Science",200,73,68,"BBC","N/A");
id = db.insertTitle(
"LANCASTER UNIVERSITY","Computer Science",380,81,80,"ABB","N/A");
id = db.insertTitle(
"UNIVERSITY OF LEEDS","Computer Science",370,69,90,"AAA","N/A");
id = db.insertTitle(
"LEEDS METROPOLITAN UNIVERSITY","Computer Science",180,71,57,"BBC","N/A");
id = db.insertTitle(
"UNIVERSITY OF LEICESTER","Computer Science",330,92,80,"ABB","N/A");
id = db.insertTitle(
"UNIVERSITY OF LIVERPOOL","Computer Science",360,89,80,"AAB","ABB");
id = db.insertTitle(
"LIVERPOOL HOPE UNIVERSITY","Computer Science",280,78,40,"ABB","N/A");
id = db.insertTitle(
"UNIVERSITY COLLEGE LONDON","Computer Science",430,87,90,"A*AA","N/A");
id = db.insertTitle(
"LONDON METROPOLITAN UNIVERSITY","Computer Science",140,73,55,"ABB","N/A");
id = db.insertTitle(
"LOUGHBOROUGH UNIVERSITY","Computer Science",340,88,88,"ABB","N/A");
id = db.insertTitle(
"THE UNIVERSITY OF MANCHESTER","Computer Science",400,82,83,"AAB","N/A");
id = db.insertTitle(
"THE MANCHESTER METROPOLITAN UNIVERSITY","Computer Science",220,67,66,"CCC","N/A");
id = db.insertTitle(
"MIDDLESEX UNIVERSITY","Computer Science",140,73,50,"CDD","N/A");
id = db.insertTitle(
"NEWCASTLE UNIVERSITY","Computer Science",350,88,90,"ABB","N/A");
id = db.insertTitle(
"THE UNIVERSITY OF NORTHAMPTON","Computer Science",200,75,60,"BBB","N/A");
id = db.insertTitle(
"UNIVERSITY OF NORTHUMBRIA","Computer Science",240,80,77,"BBC","N/A");
id = db.insertTitle(
"UNIVERSITY OF NOTTINGHAM","Computer Science",360,82,90,"BBB","N/A");
id = db.insertTitle(
"NOTTINGHAM TRENT UNIVERSITY","Computer Science",260,69,68,"BBC","N/A");
id = db.insertTitle(
"OXFORD UNIVERSITY","Computer Science",520,0,90,"AAA","N/A");
id = db.insertTitle(
"OXFORD BROOKES UNIVERSITY","Computer Science",260,85,85,"BBC","N/A");
id = db.insertTitle(
"UNIVERSITY OF PLYMOUTH","Computer Science",260,76,75,"BBB","N/A");
id = db.insertTitle(
"UNIVERSITY OF PORTSMOUTH","Computer Science",240,81,72,"BBC","N/A");
id = db.insertTitle(
"QUEEN'S UNIVERSITY BELFAST","Computer Science",320,84,84,"BBB","N/A");
id = db.insertTitle(
"QUEEN MARY, UNIVERSITY OF LONDON","Computer Science",300,88,65,"BBB","N/A");
id = db.insertTitle(
"UNIVERSITY OF READING","Computer Science",350,79,95,"ABB","N/A");
id = db.insertTitle(
"THE ROBERT GORDON UNIVERSITY","Computer Science",240,79,80,"CCC","N/A");
id = db.insertTitle(
"ROYAL HOLLOWAY, UNIVERSITY OF LONDON","Computer Science",320,82,0,"BBB","N/A");
id = db.insertTitle(
"UNIVERSITY OF SALFORD","Computer Science",240,89,75,"BBB","N/A");
id = db.insertTitle(
"UNIVERSITY OF SHEFFIELD","Computer Science",390,83,95,"ABB","N/A");
id = db.insertTitle(
"SHEFFIELD HALLAM UNIVERSITY","Computer Science",240,73,73,"BBC","N/A");
id = db.insertTitle(
"UNIVERSITY OF SOUTHAMPTON","Computer Science",450,92,95,"AAA","N/A");
id = db.insertTitle(
"SOUTHAMPTON SOLENT UNIVERSITY","Computer Science",240,68,85,"CDD","N/A");
id = db.insertTitle(
"STAFFORDSHIRE UNIVERSITY","Computer Science",240,70,78,"CDD","N/A");
id = db.insertTitle(
"UNIVERSITY OF ST ANDREWS","Computer Science",458,90,0,"AAB","N/A");
id = db.insertTitle(
"UNIVERSITY OF STIRLING","Computer Science",255,100,65,"BBC","N/A");
id = db.insertTitle(
"UNIVERSITY OF STRATHCLYDE","Computer Science",333,97,90,"BBC","N/A");
id = db.insertTitle(
"UNIVERSITY OF SUNDERLAND","Computer Science",225,59,70,"BBB","N/A");
id = db.insertTitle(
"UNIVERSITY OF SURREY","Computer Science",380,89,90,"AAB","N/A");
id = db.insertTitle(
"UNIVERSITY OF SUSSEX","Computer Science",360,84,85,"ABB","BBB");
id = db.insertTitle(
"SWANSEA UNIVERSITY","Computer Science",280,82,75,"ABB","N/A");
id = db.insertTitle(
"TEESSIDE UNIVERSITY","Computer Science",260,78,64,"BBC","N/A");
id = db.insertTitle(
"UNIVERSITY OF ULSTER","Computer Science",237,73,63,"BBB","N/A");
id = db.insertTitle(
"UNIVERSITY OF WALES: TRINITY SAINT DAVID","Computer Science",0,77,0,"CDD","N/A");
id = db.insertTitle(
"UNIVERSITY OF WALES, NEWPORT","Computer Science",230,81,50,"CDD","N/A");
id = db.insertTitle(
"UNIVERSITY OF WARWICK","Computer Science",480,87,100,"AAB","N/A");
id = db.insertTitle(
"UNIVERSITY OF THE WEST OF ENGLAND, BRISTOL","Computer Science",240,74,84,"BBB","N/A");
id = db.insertTitle(
"THE UNIVERSITY OF WEST LONDON","Computer Science",0,37,0,"CDD","N/A");
id = db.insertTitle(
"THE UNIVERSITY OF WESTMINSTER","Computer Science",180,54,63,"CCC","AA");
id = db.insertTitle(
"UNIVERSITY OF THE WEST OF SCOTLAND","Computer Science",238,69,52,"BBC","N/A");
id = db.insertTitle(
"UNIVERSITY OF WOLVERHAMPTON","Computer Science",150,70,61,"CCD","N/A");
id = db.insertTitle(
"UNIVERSITY OF WORCESTER","Computer Science",210,65,55,"CCC","N/A");
id = db.insertTitle(
"UNIVERSITY OF YORK","Computer Science",460,91,100,"AAA","N/A");

  db.close();
}
public String getData(){
    db.open();
    Cursor c = db.rawQuery("SELECT * FROM titles", null);
    c.moveToFirst();   
    db.close();
    return c.getString(c.getColumnIndex("UCAS"));
  }
} 
```

这是我的适配器：

```
package com.course.ucas;

import android.app.Activity;
import android.content.ContentValues;
import android.content.Context;
import android.database.Cursor;
import android.database.SQLException;
import android.database.sqlite.SQLiteDatabase;
import android.database.sqlite.SQLiteOpenHelper;
import android.util.Log;

 public class DBAdapter {
public static final String KEY_ROWID = "_id";
public static final String KEY_UNIVERSITY = "University";
public static final String KEY_COURSE = "Course";   
public static final String KEY_UCAS = "UCAS";
public static final String KEY_SATISFACTION = "Satisfaction";
public static final String KEY_EMPLOYED = "Employed";
public static final String KEY_OFFER = "Offer";
public static final String KEY_OTHER = "Other";
private static final String TAG = "DBAdapter";
private static final String DATABASE_NAME = "UCAS";
private static final String DATABASE_TABLE ="titles";
private static final int DATABASE_VERSION = 1;
private static final String DATABASE_CREATE =
"create table titles (_id integer primary key autoincrement, University text not null, Course text not null, UCAS int not null, Satisfaction int not null, Employed int not null, Offer text not null, Other text not null);";
private final Context context;
private DatabaseHelper DBHelper;
private SQLiteDatabase db;
public DBAdapter(Context ctx)
{
this.context = ctx;
DBHelper = new DatabaseHelper(context);
}
private static class DatabaseHelper extends SQLiteOpenHelper
{
DatabaseHelper(Context context)
{
super(context, DATABASE_NAME, null, DATABASE_VERSION);
}
@Override
public void onCreate(SQLiteDatabase db)
{
db.execSQL(DATABASE_CREATE);
}
@Override
public void onUpgrade(SQLiteDatabase db, int oldVersion,
int newVersion)
{
Log.w(TAG, "Upgrading database from version " + oldVersion
+ " to "
+ newVersion + ", which will destroy all old data");
db.execSQL("DROP TABLE IF EXISTS titles");
onCreate(db);
}
}
public DBAdapter open() throws SQLException
{
db = DBHelper.getWritableDatabase();
return this;
}
//---closes the database---
public void close()
{
DBHelper.close();
}
//---insert a title into the database---
public long insertTitle(String university, String other, int i, int j,int k, String   UCAS, String employed)
{
ContentValues initialValues = new ContentValues();
initialValues.put(KEY_UNIVERSITY, university);
initialValues.put(KEY_COURSE, j);
initialValues.put(KEY_UCAS , UCAS);
initialValues.put(KEY_SATISFACTION, k);
initialValues.put(KEY_EMPLOYED , employed);
initialValues.put(KEY_OFFER , i);
initialValues.put(KEY_OTHER , other);
return db.insert(DATABASE_TABLE, null, initialValues);
}
//---deletes a particular title---
public boolean deleteTitle(long rowId)
{
return db.delete(DATABASE_TABLE, KEY_ROWID +
"=" + rowId, null) > 0;
}
//---retrieves all the titles---
public Cursor getAllTitles()
{
return db.query(DATABASE_TABLE, new String[] {
KEY_ROWID,
KEY_UNIVERSITY,
KEY_COURSE,
KEY_UCAS ,
KEY_SATISFACTION,
KEY_EMPLOYED,
KEY_OFFER,
KEY_OTHER,
},
null,
null,
null,
null,
null);
}
//---retrieves a particular title---
public Cursor getTitle(long rowId) throws SQLException
{
Cursor mCursor =
db.query(true, DATABASE_TABLE, new String[] {
KEY_ROWID,
KEY_UNIVERSITY,
KEY_COURSE,
KEY_UCAS,
KEY_SATISFACTION,
KEY_EMPLOYED,
KEY_OFFER,
KEY_OTHER,
},
KEY_ROWID + "=" + rowId,
null,
null,
null,
null,
null);
if (mCursor != null) {
mCursor.moveToFirst();
}
return mCursor;
}
//---updates a title---
public boolean updateTitle(long rowID, String university, String other, int i, int j,int k, String UCAS, String employed)
{
ContentValues args = new ContentValues();
args.put(KEY_UNIVERSITY, university);
args.put(KEY_COURSE, i);
args.put(KEY_UCAS , UCAS);
args.put(KEY_SATISFACTION, j);
args.put(KEY_EMPLOYED , employed);
args.put(KEY_OFFER , k);
args.put(KEY_OTHER , other);
return db.update(DATABASE_TABLE, args,
KEY_ROWID + "=" + rowID, null) > 0;
}

public String[] columns = new String[]{ KEY_ROWID, KEY_UNIVERSITY, KEY_COURSE,  KEY_UCAS, KEY_SATISFACTION, KEY_EMPLOYED, KEY_OFFER, KEY_OTHER };
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-14T16:15:27.937

这就是您提取数据的方式。**'query'**不是您应该在这里使用的关键字，而是使用**'rawQuery'**

```
 public String getData() {
        String s;
        db.open();
        Cursor c = db.rawQuery("SELECT * FROM Table", null);
        c.moveToFirst();   
        s=c.getString(c.getColumnIndex("columnName"));
        db.close();
        return s
    } 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-14T16:24:40.880

所以你可以使用两种方法：

*   [`rawQuery()`](http://developer.android.com/reference/android/database/sqlite/SQLiteDatabase.html)方法
*   [`query()`](http://developer.android.com/reference/android/database/sqlite/SQLiteDatabase.html)方法

不同之处在于默认情况下`query()`具有针对没有的方法的保护。[`sql injections`](http://en.wikipedia.org/wiki/SQL_injection)`rawQuery()`

但是您很可能需要阅读一些教程，因此请检查[`Android SQLite Database Tutorial`](http://www.androidhive.info/2011/11/android-sqlite-database-tutorial/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-04-04T22:13:33.270

你有一个适配器。你为什么不使用。像这样。

```
public String getData(){
  db.open();
  Cursor c = db.getAllTitles();
  c.moveToFirst();   
  db.close();
  return c.getString(c.getColumnIndex("UCAS"));
} 
```

# php - 代码块没有被执行

> ID：11485048
> 
> 赞同：0
> 
> 时间：2012-07-14T15:37:10.623
> 
> 标签：php

我最近正在尝试制作一个小报表管理系统。一切都很顺利，直到我遇到了这个奇怪的问题。由于代码包含大量 html，我将只包含重要部分。

基本上这是一个登录页面。我将信息存储在 SESSION 变量中。

当用户名和通行证不匹配时，错误消息将提供给以下函数以进行进一步处理。

编辑：我项目中的每个页面都包含一个带有以下内容的 config.php

```
// Start of config.php
session_start();
error_reporting(E_ERROR);

// ********************* Database Config **********************//
$dbHost = "localhost";          // MySQL host
$dbUser = "";   // MySQL username
$dbPass = "";   // MySQL password
$dbDatabase = "";  // MySQL main database name 
```

login.php 的一部分如下所示。

```
//START OF PHP CODE//
include("config.php");

    function gotError($msg)
    {
        $_SESSION['err'] = $msg;
        header("Location: login.php");
        die();
    }

//CODE FOR EVALUATION OF DATA//

// END OF THE PHP CODE & BELOW THE HTML WILL START // 
```

并且在同一页面上，在起始php代码下方，是页面的html代码。在 html 之间，有一些 php 代码用于使用上面的数据集。

```
----------- SOME HTML CODE HERE----
         <?php

         if(isset($_SESSION['err']))
         {
         $html.= "<script type='text/javascript'>";
         $html.= '$.alert("'.$_SESSION['err'].'");';
         $html.= "</script>";
         print $html;
         }
        ?>
----------------- SOME HTML CODE HERE-------- 
```

现在出现了奇怪的行为。页面将登录数据发布到自身，如果发生错误，则在会话变量 { $_SESSION['err'] } 中设置错误，然后再次重定向到自身，如果出现 jquery 消息框$_SESSION[ 'err' ] 不为空。

上面的代码不能以原始形式工作，但是，如果我喜欢下面显示的代码，代码就可以工作。我的意思是整个代码，包括以前没有工作的条件组件。一旦我删除该特定行，条件评估就不起作用。

```
 <?php
     print($_SESSION['err']);

     if(isset($_SESSION['err']))
     {
     $html.= "<script type='text/javascript'>";
     $html.= '$.alert("'.$_SESSION['err'].'");';
     $html.= "</script>";
     print $html;
     }
    ?> 
```

有人知道吗？我正在使用 PHP 版本 5.3.8。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-15T07:53:29.147

我解决了这个问题。结果表明，将 HTML 之间的 php 脚本的位置从头更改为正文就可以了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-14T15:39:31.820

你打电话`session_start()`是为了真正启用会话吗？没有它，你只会浪费你的时间。除非您启动会话，否则 php**不会**保存您写入的任何数据`$_SESSION`，也不会加载以前保存在其他地方的任何数据。

# php - PHP 函数在本地主机上运行， 但不在我的服务器上

> ID：11485051
> 
> 赞同：0
> 
> 时间：2012-07-14T15:37:23.120
> 
> 标签：php, mysql, json, function, webserver

在 .php 页面中，我具有以下功能。在 localhost 中，JSON 响应与 NULL 不同，但是当我将页面放在服务器 (FTP) 上时，JSON 响应为 NULL。

**编码**

```
// Check for required parameters
if (isset($_POST["placetype"]) && isset($_POST["placeName"])) {
  $pt = $_POST["placetype"];
  $pn = $_POST["placeName"];
  $dir = 'Pictures/Attractions/'.$pt.'/'.$pn.'/';
  $files = scandir($dir);
  foreach($files as $ind_file) {
    $result[] = array(
      "data" => $ind_file
    );
  sendResponse(200, json_encode($result));
  return true;
}//ifisset
sendResponse(400, 'Invalid request');
return false; 
```

**注意**：相同的文件夹在本地和服务器上。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T15:49:55.103

我猜你服务器上的 PHP 安装不是最新的。`json_encode()`仅适用于 PHP 5 >= 5.2.0。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-14T15:57:16.323

看到这个

```
$files = scandir($dir); 
```

如果 $dir 中没有文件，则变量 $result 将不会创建并且不会保存任何内容，json 将返回 null。在远程服务器上，您没有文件并且 json_encode 返回 null

# c# - iPad 到 Web 服务的解决方案，下载 100 MB

> ID：11485055
> 
> 赞同：0
> 
> 时间：2012-07-14T15:37:42.637
> 
> 标签：c#, iphone, web-services

我是 Web 服务的新手，并且正在查看我们的一个项目中的一些现有代码。有一个简单的 WCF 服务被调用，示例调用如下：

```
[WebInvoke(UriTemplate = "People", Method = "GET", ResponseFormat = WebMessageFormat.Json)]
public string GetPeople() {
   Person results = DataAccess.ParsePeople();
   System.WebScrip.Serialization.JavaScriptSerializer oSerializer = oSerializer.MaxJsonLength = int.MaxValue;
   string sJSON = oSerializer.Serialize(results);
   return sJSON; 
```

以前所做的是，iPad 会要求一个包含 100 个需要获取的数据包的清单文件。它将使用 manifest.txt 并将该文件加载到数据库中的一个新表中，其中的列为

*   正在下载
*   完成了
*   包大小

它会向服务询问 Packet/1 -> Packet/100，直到所有数据包都标记为 IsCompleted 并且在 iPad 大小上读取时数据包大小正确。

这是一个“好的”和可扩展的解决方案吗？这样做的人说他也是 Web 服务的新手，只是这样做了，不知道是否有更好的解决方案。现在我们有了一个新项目并且已经有了一些东西，我想知道我们是否应该继续沿着这条路线做这样的事情，或者是否有更好的解决方案。

我们可能会遇到的一个问题是我们正在使用 FMDataBase，并且使用我们下载的数据，我们使用该信息在数据库中创建新表。我不知道 FMDataBase 如何处理将数据插入新表的调用，以及在我们下载更多数据包时更新 DownloadInformationTable。想法？谢谢！

# c++ - 从管道顺序读取 OpenEXR

> ID：11485063
> 
> 赞同：0
> 
> 时间：2012-07-14T15:38:32.403
> 
> 标签：c++, file-io, pipe, fifo, openexr

我正在尝试从一个管道读取 EXR 流，处理它们并将结果写入另一个管道。在这种情况下，它们被命名为管道，但它们也可以是标准输入和标准输出。

当管道干涸时会出现我的问题。OpenEXR 不喜欢尝试读取任何内容，并且会因以下堆栈跟踪而崩溃。

```
(gdb) run in.exr out.exr
Starting program: /Users/jon/Library/Developer/Xcode/DerivedData/compressor-abhdftqzleulxsfkpidvcazfowwo/Build/Products/Debug/compressor in.exr out.exr
Reading symbols for shared libraries +++++++++......................................................................................................... done
Reading symbols for shared libraries ............ done
Reading symbols for shared libraries . done
Reading symbols for shared libraries . done
terminate called throwing an exception
Program received signal SIGABRT, Aborted.
0x00007fff90957ce2 in __pthread_kill ()
(gdb) backtrace
#0  0x00007fff90957ce2 in __pthread_kill ()
#1  0x00007fff866f27d2 in pthread_kill ()
#2  0x00007fff866e3a7a in abort ()
#3  0x00007fff8643c7bc in abort_message ()
#4  0x00007fff86439fcf in default_terminate ()
#5  0x00007fff844d61cd in _objc_terminate ()
#6  0x00007fff8643a001 in safe_handler_caller ()
#7  0x00007fff86439fed in unexpected_defaults_to_terminate ()
#8  0x00007fff8643a040 in __cxxabiv1::__unexpected ()
#9  0x00007fff8643aefe in __cxa_call_unexpected ()
#10 0x0000000100008cfb in exr::ReadEXR (pixelBuffer=@0x7fff5fbfee00, is=@0x7fff5fbfeef8) at /Users/jon/Development/compressor/compressor/exr.cpp:47
#11 0x0000000100001c39 in main (argc=4, argv=0x7fff5fbffaa8) at /Users/jon/Development/compressor/compressor/main.cpp:79 
```

我真的希望 OpenEXR 阻塞线程，直到有更多数据可用，但是如果有一些方法可以手动检查是否有更多数据可以做，只要它有点健壮。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T11:52:50.167

这个问题的解决方案确实是扩展 Imf::Istream 并实现它以在输入管道干涸时阻塞。

对于这个特定问题，需要进行一些考虑，例如管道不可搜索并且不知道它们的位置，但是可以解决它们。

# android - AsyncQueryHandler 在 ui 线程上调用 onQueryComplete？（ 安卓 ）

> ID：11485073
> 
> 赞同：3
> 
> 时间：2012-07-14T15:40:09.690
> 
> 标签：android, multithreading, android-loadermanager, android-handler

我正在使用，它会在查询完成后`AsyncQueryHandler`调用。`onQueryComplete`

我的问题：`onQueryComplete`在 UI 线程上调用？

我知道它在后台进行查询。

在哪里`AsyncQueryHandler`实例化有关系吗？（如果在 UI 线程中实例化将意味着`onQueryComplete`将在 UI 线程上调用）。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-14T16:42:22.780

> `onQueryComplete`在 UI 线程上调用？

它在*调用*线程上被调用......所以你启动`AsyncQueryHandler`.

> 在哪里`AsyncQueryHandler`实例化有关系吗？

`AsyncQueryHandler`是`Handler`执行异步查询（或插入、更新、删除）`ContentResolver`并将结果返回给调用线程的子类。`Handler`s 允许与主 UI 线程以外的线程相关联，对`ContentResolver`. 因此，您也应该被允许`AsyncQueryHandler`从单独的线程调用。

话虽如此，这样做*可能*不是您想要的，原因如下：

1.  当您`AsyncQueryHandler`在单独的线程上实例化时，所有后续回调都将返回到该调用线程。这通常不是您想要的，因为它没有提供与主 UI 线程同步的简单方法，主 UI 线程负责创建布局和接收触摸事件。

2.  您已经在一个单独的线程上，因此`ContentResolver`对 UI 线程的调用已经是异步的。

顺便说一句，关于这些点的文档`AsyncQueryHandler`没有提到任何内容，但是您可以通过阅读[源代码](http://www.netmite.com/android/mydroid/frameworks/base/core/java/android/content/AsyncQueryHandler.java)来了解大部分内容。（其直接基类）的文档[`Handler`](http://developer.android.com/reference/android/os/Handler.html)也解释了其背后的理论。

# java - Eclipse 插件，用于精细监控编辑器更改

> ID：11485082
> 
> 赞同：3
> 
> 时间：2012-07-14T15:41:23.277
> 
> 标签：java, eclipse, plugins, eclipse-plugin

因此，我希望为 Eclipse 4.2 开发一个插件，用于监控用户对其文件所做的编辑。

这是我的第一个 Eclipse 插件，为了做好准备，我浏览了 Eclipse 插件开发备忘单 (HelloWorld)，并在 help.eclipse.org 上花了很多时间查看文档和 API。我想我知道我需要什么工具，但我不确定如何将这些工具组合在一起来做我想做的事。

*期望的结果*：有一个插件，可以随时了解添加到（Java）编辑器中的每个新字母以及任何和所有删除。这包括 Eclipse 所做的事情（自动完成变量、花括号）以及用户键入的内容。

*可能有帮助的工具*：我认为**IResourceChangeListener**会有所帮助，因为它给了我一个**IResourceChangeEvent**，以及一个可访问的**IResourceDelta**，它代表工作空间的变化。此外，由于编辑器扩展了 EditorPart，我认为将**IPropertyChangeListener**添加到相关编辑器可能也很有用。

我想我有合适的工具，但我不知道如何组装它们来做我想做的事。

**问题**：
上面列出的工具是否适合这项工作？
如何获取所有已打开或将要打开的编辑器的列表并向其添加侦听器？
有关学习如何编写 Eclipse 插件的资源的任何其他提示？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-14T15:52:52.347

是和不是。`IResourceChangedListener`一旦资源（文件）更改，就会触发。在大多数编辑器中，这对应于用户保存文件。

为了接近实时地监控输入，一种方法是`MonoReconciler`在用户空闲 0.5 秒后使用 a 来捕获缓冲区更改。这就是 JDT 的工作方式。

现在，如果您是`EditorPart`. 根据您希望监控的编辑器，您需要掌握它`IDocument`并根据需要添加侦听器。请参阅[文档](http://help.eclipse.org/indigo/index.jsp?topic=/org.eclipse.platform.doc.isv/reference/api/org/eclipse/ui/texteditor/AbstractTextEditor.html)。对于它的价值，Java 编辑器使用 IIRC `ProjectionDocument`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-17T16:37:50.570

Krumelur 的提示给了我一个很好的起点。返回的`DocumentEvent`s`IDocumentListener`足够细化，可以让我逐个字符地分析所发生的事情。

```
IEditorPart editor = ...;  
IEditorInput input = editor.getEditorInput();  
IDocument document=(((ITextEditor)editor).getDocumentProvider()).getDocument();

document.addDocumentListener(new IDocumentListener() {

        @Override
        public void documentChanged(DocumentEvent event) 
        {
            System.out.println("Change happened: " + event.toString());
        }

        @Override
        public void documentAboutToBeChanged(DocumentEvent event) {
            System.out.println("I predict that the following change will occur: "+event.toString());

        }
    };
}); 
```

至于我应该扩展什么，我扩展`org.eclipse.ui.startup`并添加了一系列监听器，直到我得到看起来像上面的代码。

我希望这可以帮助其他正在寻找我的人。

# spring - org.neo4j.graphdb.NotInTransactionException

> ID：11485090
> 
> 赞同：1
> 
> 时间：2012-07-14T15:41:52.927
> 
> 标签：spring, neo4j, spring-data-neo4j

一个星期以来我一直在努力解决这个问题，但似乎仍然找不到解决方案。我正在使用 spring-data-neo4j maven artifact 和以下导致此问题的代码行：

```
/**
 * 
 */
@Autowired
private UserRepository userRepository;

@Transactional
public void addClassDescriptor(User user, ClassDescriptor classDescriptor) {
    Project project = user.getDefaultProject();
    ManagedFieldAccessorSet<ClassDescriptor> accessorSet = (ManagedFieldAccessorSet<ClassDescriptor>) project.getClassDescriptors();
    accessorSet.add(classDescriptor);
    /*
     * Save the user object after updating the set
     */
    userRepository.save(user);
} 
```

执行该方法时，会出现以下错误

> accessorSet.add(classDescriptor);

堆栈跟踪：

```
org.neo4j.graphdb.NotInTransactionException
    at org.neo4j.kernel.impl.persistence.PersistenceManager.getResource(PersistenceManager.java:252)
    at org.neo4j.kernel.impl.persistence.PersistenceManager.nodeCreate(PersistenceManager.java:155)
    at org.neo4j.kernel.impl.core.NodeManager.createNode(NodeManager.java:270)
    at org.neo4j.kernel.EmbeddedGraphDbImpl.createNode(EmbeddedGraphDbImpl.java:317)
    at org.neo4j.kernel.EmbeddedGraphDatabase.createNode(EmbeddedGraphDatabase.java:103)
    at org.springframework.data.neo4j.support.DelegatingGraphDatabase.createNode(DelegatingGraphDatabase.java:82)
    at org.springframework.data.neo4j.support.mapping.EntityStateHandler.useOrCreateState(EntityStateHandler.java:115)
    at org.springframework.data.neo4j.support.mapping.Neo4jEntityConverterImpl.write(Neo4jEntityConverterImpl.java:145)
    at org.springframework.data.neo4j.support.mapping.Neo4jEntityPersister$CachedConverter.write(Neo4jEntityPersister.java:176)
    at org.springframework.data.neo4j.support.mapping.Neo4jEntityPersister.persist(Neo4jEntityPersister.java:238)
    at org.springframework.data.neo4j.support.mapping.Neo4jEntityPersister.persist(Neo4jEntityPersister.java:227)
    at org.springframework.data.neo4j.support.Neo4jTemplate.save(Neo4jTemplate.java:295)
    at org.springframework.data.neo4j.fieldaccess.AbstractNodeRelationshipFieldAccessor.getOrCreateState(AbstractNodeRelationshipFieldAccessor.java:97)
    at org.springframework.data.neo4j.fieldaccess.AbstractNodeRelationshipFieldAccessor.createSetOfTargetNodes(AbstractNodeRelationshipFieldAccessor.java:89)
    at org.springframework.data.neo4j.fieldaccess.OneToNRelationshipFieldAccessorFactory$OneToNRelationshipFieldAccessor.setValue(OneToNRelationshipFieldAccessorFactory.java:66)
    at org.springframework.data.neo4j.fieldaccess.ManagedFieldAccessorSet.updateValue(ManagedFieldAccessorSet.java:90)
    at org.springframework.data.neo4j.fieldaccess.ManagedFieldAccessorSet.update(ManagedFieldAccessorSet.java:78)
    at org.springframework.data.neo4j.fieldaccess.ManagedFieldAccessorSet.add(ManagedFieldAccessorSet.java:104) 
```

我的实体如下：（User.java）

```
@GraphId
private Long id;

@RelatedTo(elementClass = Project.class)
@Fetch
private Set<Project> projects; 
```

(项目.java)

```
 @GraphId
private Long id;
/**
 * 
 */
@RelatedTo(elementClass = ClassDescriptor.class)
@Fetch
private Set<ClassDescriptor> classDescriptors;

/**
 * 
 */
private boolean defaultProject; 
```

请帮忙 ！附件是依赖树。

![依赖树](../Images/b4c117ca547f004887ac30f9407d9e30.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-30T10:12:20.460

我发现在使用集合操作添加关系以及 @Transactional 注释时，您需要获取对 GraphDatabaseService 的引用并显式开始和结束事务：

```
@Autowired
private GraphDatabaseService graphDb;

@Transactional
public void addRelation() {
  Transaction tx = graphDb.beginTx();
  ...
  tx.success(); //or tx.failure();
  tx.finish();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-16T07:56:44.650

阿比，

如果它一直在发生，那么我认为您的服务不是一个合适的 bean。你怎么把你的东西连接起来？

您使用的是简单模式还是高级模式 (AspectJ)？

你发布的东西看起来很好很简单，所以我不明白为什么它不起作用......

问候，

拉斯

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-05-23T23:18:05.310

您必须在尝试中保护事务...

```
import org.neo4j.graphdb.GraphDatabaseService;
import org.neo4j.graphdb.Node;
import org.neo4j.graphdb.Transaction;

public class App {
    static Node firstNode = null;
    static GraphDatabaseService graphDb = null;
    public static void main(String[] args) {
        System.out.println("Start ...");
        graphDb = ConnectNeo4j.initDB();
        Transaction tx = graphDb.beginTx();
        try {
            firstNode = graphDb.createNode();
            firstNode.setProperty("message", "Es Geht!");
            System.out.println(firstNode.getProperty("message"));
            tx.success();
    } catch (Exception e) {
        System.err.println(e.getMessage());
    } finally {
        tx.close();
        }
    }
} 
```

# c# - 如何通过 C# 中的代码在 Windows（regedit）中编辑注册表值？

> ID：11485093
> 
> 赞同：2
> 
> 时间：2012-07-14T15:42:08.653
> 
> 标签：c#, windows, regedit

> **可能重复：**
> [寻找 C# 注册表类](https://stackoverflow.com/questions/104866/looking-for-c-sharp-registry-class)
> [在注册表位置上写入的方式](https://stackoverflow.com/questions/5927152/way-to-write-on-registry-location)

我正在尝试用 C# 编写一个程序，通过做几件事来提高 Windows 的速度（清除临时文件夹、预取文件夹......等）

但要使程序强大，我需要编辑注册表值.. 我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-14T15:45:08.213

你可能需要阅读这篇[文章](http://www.codeproject.com/Articles/3389/Read-write-and-delete-from-registry-with-C)

```
public string Read(string KeyName)
{
    // Opening the registry key
    RegistryKey rk = baseRegistryKey ;
    // Open a subKey as read-only
    RegistryKey sk1 = rk.OpenSubKey(subKey);
    // If the RegistrySubKey doesn't exist -> (null)
    if ( sk1 == null )
    {
        return null;
    }
    else
    {
        try 
        {
            // If the RegistryKey exists I get its value
            // or null is returned.
            return (string)sk1.GetValue(KeyName.ToUpper());
        }
        catch (Exception e)
        {
            // AAAAAAAAAAARGH, an error!
            ShowErrorMessage(e, "Reading registry " + KeyName.ToUpper());
            return null;
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-14T15:44:22.263

使用[Microsoft.Win32.RegistryKey](http://msdn.microsoft.com/en-us/library/microsoft.win32.registrykey.aspx)类。

# clojure - 当我创建一个新的 leiningen 项目时出现 FileNotFoundException

> ID：11485095
> 
> 赞同：3
> 
> 时间：2012-07-14T15:42:38.407
> 
> 标签：clojure, leiningen

我刚刚安装了 leiningen，并且正在关注如何开始的教程。我打了

lein new my-stuff 然后按照说明更正 project.clj 文件。然后我输入 lein repl ，它会拉起 repl 很好。下一步是输入

```
(require 'my-stuff.core) 
```

这就是我得到的地方

```
FileNotFoundException Could not locate my_stuff/core__init.class or my_stuff/core.clj on classpath: clojure.lang.RT.load (TR.java:432) 
```

我试过查看我的类路径，但一切看起来都很好。

lein 类路径

```
C:\Users\Sarah\leiningen\test;C:\Users\Sarah\leiningen\src;C:Users\Sarah\leiningen\dev-resources;C:\Useres\Sarah\leiningen\resources;C:\Users\Sarah\leiningen\target\classes;C:\Useres\Sarah\.m2\repository\org\clojure\clojure\1.4.0\clojure-1.4.0.jar 
```

任何帮助都会很棒！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T11:23:14.597

我怀疑这里的问题源于您选择的项目名称。尽管您可以创建带有连字符的 Clojure 命名空间，但相应的物理文件和目录需要将连字符替换为下划线。

由于您只是在试验，对您来说最简单的事情就是使用不同的项目名称重新开始：`lein new mystuff`例如尝试。

如果您想继续使用，请`my-stuff`尝试将`src\my-stuff`目录重命名为，如果存在则`src\my_stuff`执行相同操作。`test\my-stuff`

老实说，我有点惊讶 Leiningen 弄错了，所以这里可能还有其他东西在起作用，或者你可能只是在使用旧版本的 Leiningen。

# ajax - SCRIPT5：在 IE9 中拒绝访问同一域上的 iframe

> ID：11485096
> 
> 赞同：7
> 
> 时间：2012-07-14T15:42:45.907
> 
> 标签：ajax, gmail, internet-explorer-9, asyncfileupload

我正在尝试使用 iframe（通过 AJAX）提交带有附加文件的表单。我正在使用 rails & remotipart gem。实际上我也尝试过 jquery.form.js 库，但没有运气。当我提交表单时，我仅在 IE9 中收到“SCRIPT5：访问被拒绝”，并且当我从我的 gmail 帐户重定向到该页面时。当我访问我的网站并提交附有文件的表单时它工作正常，但当我通过 gmail 的链接访问网站时它不起作用（对于其他电子邮件它有效）。我检查了它是如何工作的 - 它创建隐藏的 iframe set form.target= iframe.name(name of iframe) & iframe.src=javascript:false; 提交表单时，它会抛出异常 =“SCRIPT5：访问被拒绝”。我尝试设置 iframe.domain = 我网站的域但没有用 - iframe = $(""); 顺便说一句，我正在向同一个域提交表单

有人解决了这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T08:36:50.427

我对jQuery一无所知，但这是一个常见的javascript错误。IE 不允许从脚本提交带有附加文件的表单。但是，如果您将表单放在单独的文件中并将其加载到 iframe 中，则 frame.form.submit() 将起作用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-09T12:11:43.697

我遇到过同样的问题。我使用的是与示例中相同的版本。该示例有效，但我没有设法使其在我的应用程序中工作。

我正在使用 Backbone，我认为它与动态创建表单有关，但不幸的是我没有时间调试确切的问题。

我搬到了[https://github.com/blueimp/jQuery-File-Upload](https://github.com/blueimp/jQuery-File-Upload)，现在它可以工作了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-10T15:14:24.397

我建议你使用最新的 JQuery(> jquery-1.8.0)。从 1.8.0 版本开始，他们解决了一些 IE9 的这个错误的 bug。

[http://blog.jquery.com/2012/08/30/jquery-1-8-1-released/](http://blog.jquery.com/2012/08/30/jquery-1-8-1-released/)

# ios - 允许 UIScrollView 及其子视图都响应触摸

> ID：11485100
> 
> 赞同：23
> 
> 时间：2012-07-14T15:43:45.610
> 
> 标签：ios, uiscrollview, uigesturerecognizer, touches

我希望我的 UIScrollView 及其子视图都接收子视图内的所有触摸事件。每个人都可以以自己的方式做出回应。

或者，如果将点击手势转发到子视图，一切都会好起来的。

很多人都在这个一般领域苦苦挣扎。以下是许多相关问题中的一些：

[UIScrollView 如何从其子视图](https://stackoverflow.com/questions/2472145/how-does-uiscrollview-steal-touches-from-its-subviews)
[中窃取触摸 如何从 UIScrollView 窃取触摸？](https://stackoverflow.com/questions/4629499/how-to-steal-touches-from-uiscrollview?rq=1)
[如何在 UIScrollView 中取消滚动](https://stackoverflow.com/questions/383306/how-to-cancel-scrolling-in-uiscrollview?rq=1)

顺便说一句，如果我在滚动视图中覆盖 hitTest:withEvent:，只要 userInteractionEnabled 为 YES，我就会看到触摸。但这并不能真正解决我的问题，因为：

1）那时，我不知道它是否是水龙头。
2) 有时我需要将 userInteractionEnabled 设置为 NO。

编辑：为了澄清，是的，我想将水龙头与平底锅区别对待。点击应该由子视图处理。平底锅可以通过滚动视图以通常的方式处理。

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2012-07-19T16:11:18.573

首先，免责声明。如果您设置`userInteractionEnabled`为`NO`on `UIScrollView`，则不会将触摸事件传递给子视图。`UIScrollView`据我所知，除了一个例外，没有办法解决这个问题：拦截`UIScrollView`. 不过，老实说，我不知道你为什么要这样做。如果你想禁用特定的 UIScrollView 功能（比如......好吧，滚动），你可以很容易地做到这一点，而无需禁用 UserInteraction。

如果我理解您的问题，您需要 UIScrollView 处理点击事件**并将**其传递给子视图吗？无论如何（无论手势是什么），我认为您正在寻找的是协议中的协议方法gestureRecognizer [:shouldRecognizeSimultaneouslyWithGestureRecognizer:](http://developer.apple.com/library/ios/documentation/UIKit/Reference/UIGestureRecognizerDelegate_Protocol/Reference/Reference.html#//apple_ref/occ/intfm/UIGestureRecognizerDelegate/gestureRecognizer:shouldRecognizeSimultaneouslyWithGestureRecognizer:)`UIGestureRecognizerDelegate`。在您的子视图中，无论您拥有什么手势识别器，都在手势识别器上设置一个委托（可能是`UIGestureReconginzer`首先设置的任何类）。覆盖上面的方法并返回`YES`. 现在，该手势将与任何其他可能“窃取”该手势的识别器一起被识别（在您的情况下，点击）。使用此方法，您甚至可以微调您的代码以仅向子视图发送某些类型的手势或仅在某些情况下发送手势。它给了你很多控制权。请务必阅读该方法，尤其是这一部分：

> 当gestureRecognizer 或otherGestureRecognizer 对手势的识别会阻止其他手势识别器识别其手势时，将调用此方法。注意返回YES保证允许同时识别；另一方面，返回 NO 并不能保证防止同时识别，因为其他手势识别器的委托可能会返回 YES。

当然，有一个警告：这只适用于手势识别器。因此，如果您尝试使用 , 等来处理触摸，您可能仍然会遇到`touchesBegan:`问题`touchesEnded`。当然，您可以使用`hitTest:`将原始触摸事件发送到子视图，但为什么呢？`UIView`当您可以将 a 附加`UIGestureRecognizer`到视图并免费获得所有这些功能时，为什么要使用 中的这些方法来处理事件？如果您需要以没有标准`UIGestureRecognizer`可以提供的方式处理触摸，请*子类* `UIGestureRecognizer`化和处理那里的触摸。这样您就可以获得 a 的所有功能`UIGestureRecognizer`以及您自己的自定义触摸处理。我真的认为 Apple 打算`UIGestureRecognizer`替换开发人员使用的大部分（如果不是全部）自定义触摸处理代码`UIView`. 它允许代码重用，并且在减轻哪些代码处理哪些触摸事件时更容易处理。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-17T15:36:31.710

我不知道这是否可以帮助你，但我有一个类似的问题，我希望滚动视图处理双击，但将单击转发到子视图。这是在a中使用的代码`CustomScrollView`

```
- (void)touchesEnded:(NSSet *)touches withEvent:(UIEvent *)event {

    UITouch* touch = [touches anyObject];
    // Coordinates
    CGPoint point = [touch locationInView:[self.subviews objectAtIndex:0]];

    // One tap, forward
    if(touch.tapCount == 1){
        // for each subview
        for(UIView* overlayView in self.subviews){
            // Forward to my subclasss only
            if([overlayView isKindOfClass:[OverlayView class]]){
                // translate coordinate
                CGPoint newPoint = [touch locationInView:overlayView];
                //NSLog(@"%@",NSStringFromCGPoint(newPoint));

                BOOL isInside = [overlayView pointInside:newPoint withEvent:event];
                //if subview is hit
                if(isInside){
                    Forwarding
                    [overlayView touchesEnded:touches withEvent:event];
                    break;
                }
            }
        }

    }
    // double tap : handle zoom
    else if(touch.tapCount == 2){

        if(self.zoomScale == self.maximumZoomScale){
            [self setZoomScale:[self minimumZoomScale] animated:YES];
        } else {
            CGRect zoomRect = [self zoomRectForScrollView:self withScale:self.maximumZoomScale withCenter:point];            

            [self zoomToRect:zoomRect animated:YES];
        }

        [self setNeedsDisplay];

    }
} 
```

当然，应该更改有效代码，但此时您应该拥有决定是否必须转发事件所需的所有信息。您可能需要在另一个方法中实现它，如 touchesMoved:withEvent:。

希望这能有所帮助。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2016-04-12T03:25:57.313

我遇到了同样的问题，但是里面有一个滚动视图`UIPageViewController`，所以它的处理方式必须略有不同。

通过将`cancelsTouchesInView`属性更改为 false 上的每个识别器，`UIScrollView`我能够接收到对`UIPageViewController`.

我通过将此代码添加到`viewDidLoad`：

```
guard let recognizers = self.pageViewController.view.subviews[0].gestureRecognizers else {
     print("No gesture recognizers on scrollview.")
     return
}

for recognizer in recognizers {
    recognizer.cancelsTouchesInView = false
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-14T16:34:12.670

如果您需要区分触摸和滚动，那么您可以测试触摸是否已移动。如果这是一个点击，那么 touchHasBeenMoved 将不会被调用，那么你可以假设这是一个触摸。

此时，您可以设置一个布尔值来指示是否发生了移动，并将该布尔值设置为其他方法中的条件。

我在路上，但如果这是你需要的，我稍后会更好地解释。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-19T01:11:47.067

实现您的目标的一种骇人听闻的方法 - 不是 100% 准确 - 是子类化 UIWindow 并覆盖 - (void)sendEvent:(UIEvent *)event;

一个简单的例子：

在 SecondResponderWindow.h 头文件中

```
//SecondResponderWindow.h

@protocol SecondResponderWindowDelegate
- (void)userTouchBegan:(id)tapPoint onView:(UIView*)aView;
- (void)userTouchMoved:(id)tapPoint onView:(UIView*)aView;
- (void)userTouchEnded:(id)tapPoint onView:(UIView*)aView;
@end

@interface SecondResponderWindow : UIWindow
@property (nonatomic, retain) UIView *viewToObserve;
@property (nonatomic, assign) id <SecondResponderWindowDelegate> controllerThatObserves;
@end 
```

在 SecondResponderWindow.m

```
//SecondResponderWindow.m

- (void)forwardTouchBegan:(id)touch onView:(UIView*)aView {
    [controllerThatObserves userTouchBegan:touch onView:aView];
}
- (void)forwardTouchMoved:(id)touch onView:(UIView*)aView {
    [controllerThatObserves userTouchMoved:touch onView:aView];
}
- (void)forwardTouchEnded:(id)touch onView:(UIView*)aView {
    [controllerThatObserves userTouchEnded:touch onView:aView];
}

- (void)sendEvent:(UIEvent *)event {
    [super sendEvent:event];

    if (viewToObserve == nil || controllerThatObserves == nil) return;

    NSSet *touches = [event allTouches];
    UITouch *touch = [touches anyObject];
    if ([touch.view isDescendantOfView:viewToObserve] == NO) return;

    CGPoint tapPoint = [touch locationInView:viewToObserve];
    NSValue *pointValue = [NSValue valueWithCGPoint:tapPoint];

    if (touch.phase == UITouchPhaseBegan)
        [self forwardTouchBegan:pointValue onView:touch.view];
    else if (touch.phase == UITouchPhaseMoved)
        [self forwardTouchMoved:pointValue onView:touch.view];
    else if (touch.phase == UITouchPhaseEnded)
        [self forwardTouchEnded:pointValue onView:touch.view];
    else if (touch.phase == UITouchPhaseCancelled)
        [self forwardTouchEnded:pointValue onView:touch.view];
} 
```

它不是 100% 符合您的预期 - 因为您的第二响应者视图不通过 -touchDidBegin: 或其他方式本地处理触摸事件，并且必须实现 SecondResponderWindowDelegate。但是，此 hack 确实允许您处理其他响应者的触摸事件。

该方法的灵感来自 MITHIN KUMAR 的[TapDetectingWindow](http://mithin.in/2009/08/26/detecting-taps-and-events-on-uiwebview-the-right-way)

# php - 带有 Flash、Silverlight 和 Applets 的基于 Web 的代理

> ID：11485106
> 
> 赞同：0
> 
> 时间：2012-07-14T15:44:45.547
> 
> 标签：php, javascript, proxy

我正在编写一个支持各种协议和东西的基于 php 的代理服务器，并且我已经达到了需要实现对 Flash、AJAX、Silverlight 和 Java 小程序的支持的水平。

从技术上讲，我知道这些浏览器插件使用浏览器的基础设施来建立连接，但我认为可能有一些创造性的解决方案可以用于此目的。

所以这是我的问题：

*   有没有办法**`Flash`**在基于 Web 的代理中实现对 的支持？
*   有没有办法**`Silverlight`**在基于 Web 的代理中实现对 的支持？
*   有没有办法**`Java applets`**在基于 Web 的代理中实现对 的支持？
*   有没有办法**`AJAX calls`**在基于 Web 的代理中实现对 的支持？

更好的是我会说：

*   有没有办法为 Web 应用程序创建一个沙盒环境，并仅通过 Web 代理捕获它的所有传出连接并代理它们？

# c# - 使用 C# 从流中读取字符串

> ID：11485111
> 
> 赞同：2
> 
> 时间：2012-07-14T15:45:37.163
> 
> 标签：c#, .net, protocols

现在我正在开发一个需要我的应用程序（C#）连接到我的世界服务器并获取信息的项目。我知道如何用 Java 但不知道如何用 C# 做到这一点。我已经开始编写一个简单的数据包侦听器等，但我只想找到一种在 C# 中执行此类操作的方法：

```
socket = new Socket();
socket.setSoTimeout(3000);
socket.setTcpNoDelay(true);
socket.setTrafficClass(18);
socket.connect(new InetSocketAddress(s1, j), 3000);
datainputstream = new DataInputStream(socket.getInputStream());
dataoutputstream = new DataOutputStream(socket.getOutputStream());
dataoutputstream.write(254);
String s4 = Packet.readString(datainputstream, 256); 
```

我不明白的唯一部分是如何读取字符串。这是方法 Packet.readString()

```
short word0 = par0DataInputStream.readShort();    
StringBuilder stringbuilder = new StringBuilder();

for (int i = 0; i < word0; i++)
{
    stringbuilder.append(par0DataInputStream.readChar());
}

return stringbuilder.toString(); 
```

我知道有一个 GetStream 方法，所以我可以使用 StreamReader 和 StreamWriter 来写入和读取字符串吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-14T15:52:33.120

看看[LibMinecraft](http://libminecraft.github.com/)为什么已经为您完成了所有繁重的工作？

使用此库，您可以连接并创建自己的服务器。

# delphi - 任何扫描代码并给出调用给定函数的函数列表的工具

> ID：11485114
> 
> 赞同：4
> 
> 时间：2012-07-14T15:45:42.403
> 
> 标签：delphi, pascal

这是我的问题，我正在整理我多年来修改的一些旧代码并删除冗余函数，

我可以用慢的方式来做，然后把它注释掉，看看编译器是否抛出错误。但我只是想知道是否有任何工具可以扫描代码并给出调用给定函数的函数列表。

我查看了 ge-experts 和 icarus，但他们只在单位和类级别上这样做，而不是在功能上。

欢迎任何建议，非常感谢，布赖恩

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-14T15:59:46.580

Delphi 的最新版本通过上下文菜单或 Ctrl-Shift-Enter 提供“搜索参考”。与简单的“在文件中搜索”相比，它的优势在于它只会找到对光标下当前函数的引用，而不是任何函数或其他具有相同名称的标识符。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-14T16:31:55.740

编译你的项目。然后，在 IDE 中，那些被访问的行（而不是死代码）将在左边距有一个蓝点：

[![在此处输入图像描述](../Images/ea4b936bc03d7f3304bc885d3cba3248.png)](https://i.stack.imgur.com/qcOaY.png)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-07-14T17:09:20.827

没有一种方法是完美的，以下一种方法的局限性在于：

*   .MAP 文件将包含链接器无法消除的功能（例如覆盖您的代码所触及的类中的方法）
*   它只会给你方法名称，但如果方法被重载，可以使用这些方法的多个版本

使用 .MAP 文件的最大优点是它们比代码编辑器中的蓝点更容易扫描。

因此，它确实回答了您的问题以提供功能列表。但这实际上可能不是您所追求的（：

使用 .MAP 文件的方法：

*   更改您的项目以包含详细的 .MAP 文件
*   重建你的项目
*   您的 .EXE 文件的目录现在将包含一个 .MAP 文件
*   扫描 .MAP 文件以查找 .EXE 中包含的函数名称

该 .MAP 文件将排除编译器和链接器消除的函数。
这些很好地表明了您拥有哪些“死”代码。

以类似的方式，您可以使用[JDBG 信息](https://stackoverflow.com/questions/6019698/access-jcl-debug-information-contained-in-executable)。这包含更多上下文，但也需要您自己编写一些工具。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-14T15:55:07.467

对于帕斯卡来说，这是微不足道的。首先列出所有函数，然后为每个函数在文本中搜索它，而不是在单词“function”之后，然后是“（”。awk 将是一个很好的工具。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-15T04:39:36.077

如果您的 Delphi 版本是 2007 年（或之前的版本？），我强烈建议您考虑使用[DGrok](http://dgrok.excastle.com/)：试一试，您会看到它的能力（演示应用程序会告诉您）。

正如作者所指出的，您仍然需要实现**符号表支持**，以便工具可以进行**重构**或**查找引用**：滚动您自己的...

如果您坚持使用 Delphi，请不要担心，请前往 Turbo87 的[PasParse](https://github.com/Turbo87/PasParse)（最初用 C# 编写的 DGrok 解析器的 Delphi 端口！*）*。

请注意，[Turbo87](https://github.com/Turbo87)已经分叉了原始*Joe White*的 Dgrok（2008 年的最新版本）（更新到 VS2010 并为 LexScanner 添加了一些文档）。

# c# - 我怎样才能抽象出日志记录细节？

> ID：11485115
> 
> 赞同：0
> 
> 时间：2012-07-14T15:45:41.710
> 
> 标签：c#, .net, windows-services, error-logging

我的代码库中有很多地方我希望在出现问题时得到通知——我想这很常见。看看下面的代码，我怎样才能重构这个方法来抽象出电子邮件/日志记录的细节？目前，这分散在大约 100 个地方，我真的需要为此做点什么！

```
public bool MethodOne() {
    string message;
    bool success = new Task().Execute();

    message = string.Format( "MethodOne was {0} successful.", 
        success ? "" : "not");

    if( !success )
        SMTP.send( to, from, message );

    System.Diagnostic.EventLog.WriteEntry( executingAssembly, message);

    return success; 
}; 
```

我目前的想法是做类似于以下的事情：

```
public class Log
{
    string to = "me@me.com",
        from = "system@me.com",
        subject = "Error occured";

    public void Write( string executingAssembly, string message, bool sendEmail )
    {
        System.Diagnostic.EventLog.WriteEntry( executingAssembly, message);

        if( sendEmail )
            SendEmail( to, from, subject, message );
    }

    private void SendEmail( to, from, subject, message )
    {
        // Details to send email.
    }
} 
```

问题：如何提高在我的应用程序中记录错误和发送通知的可维护性？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-14T15:49:43.747

考虑使用 Logging 和 Log Manager 程序，例如[NLog](http://nlog-project.org/)。然后，您可以在 nlog.config（或 application.config）文件中编写一组用于登录的业务规则，该文件指定要登录的不同位置（目标），并且您可以指定要为每个记录的内容（取决于严重性和类别） .

**取自 NLog 网站**

一些 NLog 支持的目标

*   文件 – 单个或多个文件，具有自动文件命名和存档功能
*   事件日志 - 本地或远程
*   数据库——将您的日志存储在 .NET 支持的数据库中
*   网络——使用 TCP、UDP、SOAP、MSMQ 协议
*   命令行控制台——包括消息的颜色编码
*   电子邮件 - 每当出现应用程序错误时，您都可以收到电子邮件
*   ASP.NET 跟踪

使用 NLog 的一些关键特性

*   非常容易配置，无论是通过配置文件还是以编程方式
*   来自 log4xxx 的易于使用的记录器模式
*   使用缓冲、异步日志记录、负载平衡、故障转移等的高级路由
*   跨平台支持：.NET Framework、.NET Compact Framework 和 Mono（在 Windows 和 Unix 上）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-14T17:14:43.143

我认为不成功的任务执行是特殊的（否则你会向某人发送大量电子邮件）。因此，当任务失败时抛出异常（您还可以提供有关任务失败原因的其他详细信息）。这是一些使用[NLog](http://nlog-project.org/)的代码：

```
private static Logger _logger = LogManager.GetCurrentClassLogger();

public bool MethodFoo() 
{
   try
   {
       new Task().Execute();
       _logger.Info("Task executed successfully");
       return true;           
   }
   catch(YourCustomException ex)
   {
       _logger.ErrorException("Cannot execute task", ex);
       return false;
   }
} 
```

唯一剩下的就是 NLog 配置：

```
<?xml version="1.0" encoding="utf-8" ?>
<nlog xmlns="http://www.nlog-project.org/schemas/NLog.xsd"
      xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"> 
    <targets>
        <target name="eventLog" xsi:type="EventLog" 
                log="Application" source="Your Source" machineName="."
                layout="${longdate}|${level}|${callsite:methodName=true}${message}" />
        <target name="email" xsi:type="Mail" 
                subject="Error occured"
                to="me@me.com"
                from="system@me.com"
                smtpServer="127.0.0.1"
                smtpPort="25"
                body="${longdate}|${message}" />  
    </targets> 
    <rules>
        <logger name="*" minlevel="Info" writeTo="eventLog" />
        <logger name="*" minlevel="Error" writeTo="email" />
    </rules>
</nlog> 
```

您需要两个目标 - 一个用于将信息和错误消息写入事件日志，第二个用于通过电子邮件发送错误通知。我还创建了两条规则——所有 Info 及以上级别的消息都将发送到 Event Log，但 Error 和 Fatal 消息将通过电子邮件发送。

顺便说一句，调用站点布局渲染器`${callsite:methodName=true}`方法名称将被插入到日志消息中。因此，您无需在代码中指定它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-14T15:59:34.150

Microsoft Enterprise Library 有两个非常好的块，[日志应用程序块](http://msdn.microsoft.com/en-us/library/ff664569%28v=pandp.50%29)和[异常处理应用程序块](http://msdn.microsoft.com/en-us/library/ff664698%28v=pandp.50%29)

它是一个基于策略的系统，允许您在 .config 文件中定义不同的策略。有了适当的策略和一些异常处理程序，您可以编写您的 catch 块，例如：

```
catch(Exception ex)
{
  if(HandleException("My Datalayer Policy", ex)) throw;
} 
```

可以将异常策略配置为冒泡或不冒泡事件。很不错的图书馆。

日志记录块还使用 .config 中的“策略”，称为类别。例如，如果我想记录一些消息，但也想通过电子邮件发送其他消息，我将使用两个类别和两个侦听器，一个用于记录事件，一个用于通过电子邮件发送事件的详细信息。如果未指定电子邮件类别，例如当 Sucess 为 true 时，则仅发生日志记录事件。当成功为假时，应用“电子邮件”类别并触发两个侦听器。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-14T16:01:29.650

几点说明：

你的日志类应该是一个静态类。
您应该尝试/捕获所有错误处理代码，因为错误管理应该做的最后一件事......是导致错误！
您可以使用枚举来列出主要错误类型和/或另一个用于严重性/ ...
我更喜欢将错误记录到与 App 相同的文件夹中的小文本文件中。更容易处理，客户可以通过邮件发送（我不喜欢应用程序通过邮件发送数据的想法，您应该检查您的客户/用户是否同意。）。
您可以从 Reflection 获取正在执行的程序集或其他信息。
您还可以从 StackTrace 获得其他有价值的信息（我确实在我的错误日志中编写了 Stacktrace，为我节省了很多时间）。
您还应该在应用程序级别捕获未处理的异常。请描述更多错误以获得更具体的答案。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-12-11T17:49:45.360

如果您想抽象此处其他人建议的日志记录抽象，您可以使用[Commons Logging](https://github.com/net-commons/common-logging)。是的，这是两层间接，但在某些情况下它可能有用。

您可以安装 NuGet 包，然后在您的代码中使用它，如下所示：

```
// obtain logger instance
ILog log = LogManager.GetCurrentClassLogger();

// log something
log.Info("Some Debug Log Output"); 
```

然后配置公共日志库以使用 NLog，如下所示：

```
<common>
  <logging>
    <factoryAdapter type="Common.Logging.NLog.NLogLoggerFactoryAdapter, Common.Logging.NLog20">
      <arg key="configType" value="INLINE" />
    </factoryAdapter>
  </logging>
</common> 
```

然后你可以配置NLog。@Sergey Berezovskiy 的回答就是一个例子。

关键是，[Commons Logging](https://github.com/net-commons/common-logging)库不会让您在 NLog 或 log4net 或 Logging Application Block 或其他任何东西之间进行选择。您可以将后端切换为您想要的任何内容。如果您正在编写 dll 或可能托管在各种项目类型中的东西，这可能会很有用。当然，它也可以是一个无用的额外间接层。这只是取决于你在做什么。

# ios - ViewControllers，展示和关闭正确的

> ID：11485116
> 
> 赞同：0
> 
> 时间：2012-07-14T15:45:42.933
> 
> 标签：ios, modalviewcontroller, presentmodalviewcontroller, dismiss

这个问题有点难以解释。我会尽我所能，希望能把自己说清楚。

我有 3 个视图控制器，我们称它们为“View1”、“View2”和“View3”。在他们的视图顶部，有 3 个同名按钮。每个按钮都以模态方式呈现其各自的视图。我只是通过在情节提要中按住 ctrl 将 View2 按钮拖动到 View2 控制器并将 View3 按钮拖动到 View3 控制器来完成此操作。View 1 是启动控制器，所以它的按钮没有连接到任何东西。

现在从 View1 我可以通过点击这些按钮转到 View2 和 View3。

在 View2 和 View3 中，当我点击 View1 按钮时，我关闭了模态视图控制器，返回到 View1。

为了从 View2 转到 View3，我还将 View3 按钮连接到 View3 控制器。

现在发生的情况是：如果我从 View1 转到 View 3，然后点击 View1 按钮，我会回到 View1，这是正确的。但是如果我从 View3 中点击 View2，我仍然会回到 View1，这是不正确的。

我被困在这件事上，找不到解决方案。我希望我说清楚了，有人可以提供帮助。谢谢。

编辑：添加一些图像。从左到右可以看到 View1、View2 和 View3 控制器。View1 不是根控制器，它来自另一个控制器。您看到的两段代码分别来自 View2 和 View3 控制器。

![故事板](../Images/4fe6c63c1819b1172b257a5a0e523f74.png)

![查看2代码](../Images/470171ef3d875cbda3a3a8a318e828b4.png)

![查看3代码](../Images/2f85a3e771f543d318f4f8b8f9d395a2.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-14T16:00:41.723

如果不了解您的视图层次结构，很难为您提供帮助。我可以猜到你的 1 视图控制器是你的根视图控制器，这就是你回到它的原因。

*   你的层次结构是什么？
*   您在哪里调用解雇您的 3 视图。

最后——

似乎 UISCrollView 更适合您的场景。只需创建一个 UISCrollView 并将您的视图控制器的视图添加到它。然后为每个控制器放置一个带有按钮的工具栏，并在点击按钮时以编程方式将滚动视图滑动到每个视图。

如果你需要更多的大麻，我很乐意提供帮助。

沙尼

# c++ - 无法使用 Sublime Text 2 构建 C++ 程序

> ID：11485117
> 
> 赞同：6
> 
> 时间：2012-07-14T15:45:48.887
> 
> 标签：c++, build, sublimetext, sublimetext2

我想你们中的许多人正在使用或曾经使用过 Sublime Text 2 编辑器。我有一个奇怪的错误：无法构建 C++ 程序。

**我的** `C++.sublime-build`**：**

```
{
    "cmd": ["g++", "${file}", "-o", "${file_path}/${file_base_name}"],
    "working_dir": "${file_path}",
    "file_regex": "^(..[^:]*):([0-9]+):?([0-9]+)?:? (.*)$",
    "selector": "source.c, source.c++",

    "variants":
    [
        {
            "name": "Run",
            "cmd": ["bash", "-c", "g++ '${file}' -o '${file_path}/${file_base_name}' && '${file_path}/${file_base_name}'"]
        }
    ]
} 
```

我发现当数组包含像or这样的`cmd`任何替换表达式时，构建不会开始。否则它开始。`${file}``$file`

编译器无关紧要。当我尝试过时`"cmd": ["notify-osd", "$file"]`，它没有用；但`"cmd": ["notify-osd", "sometexthere"]`它奏效了。

手工编译是正确的。

我的程序：

```
#include <iostream>

int main() {
    std::cout << "Hello World";
} 
```

我使用 Ubuntu 12.04，32 位。Sublime 编辑器版本：2.0.1。

如果这不是我可以问这个问题的地方，请告诉我什么是正确的。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-03T07:59:20.037

编辑你的 C++.sublime-build 文件......就像一个魅力。

```
{
    "cmd": ["g++", "-Wall", "-Wextra", "-pedantic", "-std=c++11",   "${file}", "-o", "${file_path}/${file_base_name}"],
    "file_regex": "^(..[^:]*):([0-9]+):?([0-9]+)?:? (.*)$",
    "working_dir": "${file_path}",
    "selector": "source.c, source.c++",

    "variants":
    [
        {
            "name": "Run",
            "cmd": ["bash", "-c", "g++ -Wall -Wextra -pedantic -std=c++11 '${file}' -o '${file_path}/${file_base_name}' && '${file_path}/${file_base_name}'"]
        }
    ]
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T09:50:12.083

我可以为这个问题提供一个解决方法：使用 makefile。Sublime Text 2 可以运行 makefile 来为你编译 c++。

通过在 Sublime 论坛 (http://www.sublimetext.com/forum/) 中提问，您更有可能得到这个问题的更好答案。即使在那里，他们也可能有兴趣知道它“如何”不起作用（即，如果在按下“构建”时根本没有发生任何事情，您可能需要指定它）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-25T21:49:02.767

我花了几个小时才让 C++ 编译在 Sublime Text 上工作，但我仍然有一些小问题（比如 Sublime Text 显然无法在外部窗口/控制台中执行程序）。

这是我的配置文件：

```
{
"cmd": ["C:\\MinGW\\bin\\mingw32-g++.exe", "-Wall", "-time", "$file", "-o", "$file_base_name"],

"file_regex": "^[ ]*File \"(...*?)\", line ([0-9]*)",

"working_dir": "${project_path:${folder}}",

"selector": "source.c",

"shell": true,

"encoding": "latin1"

} 
```

（如果编译器不起作用，请确保将编码更改为 utf8）

此外，将 MinGW 的 bin 文件夹添加到操作系统的 Path 变量中（在开始菜单中查找“环境变量”，然后查找 Path 变量）。

# java - Drools 中的非模板动态规则

> ID：11485122
> 
> 赞同：1
> 
> 时间：2012-07-14T15:47:13.763
> 
> 标签：java, dynamic, drools, rule-engine

为了简化我的用例。我有正在测量其值的温度点 t1-t4。用户可以为要触发的规则指定不同的条件和值。例如

```
t1+ ( 2* t2) LESS-THAN 100 or t3 EQUAL 5\. 
```

所以条件和比较器是动态的，比较值和测量值也是动态的。这是 Drools 或任何其他规则引擎的候选者吗？在我看来，Drools 是一个面向模板的规则引擎，所以可以做

```
rule "engine_is_hot"
  no-loop
 when
 $t1 : Temp( id =="1", $v1 : value) 
 $t2 : Temp( id =="2", $v2 : value) 
   eval ( $v1>=50 || $v1 + $v2<=100)
 then
        System.out.println( $t1.getId()+""+$t2.getId());
end 
```

因此可以动态生成规则，我的意思是，逻辑比较器、比较值和当前值是动态的。我尝试使用 PackageDescr ，它不灵活；我无法指定我想要一个 < 或 >= 逻辑比较器。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T15:49:52.440

您是否尝试过 PackageDescrBuilder API？

[https://github.com/droolsjbpm/drools/tree/master/drools-compiler/src/main/java/org/drools/lang/api](https://github.com/droolsjbpm/drools/tree/master/drools-compiler/src/main/java/org/drools/lang/api)

例子：

[https://github.com/droolsjbpm/drools/blob/master/drools-compiler/src/test/java/org/drools/lang/api/DescrBuilderTest.java#L269](https://github.com/droolsjbpm/drools/blob/master/drools-compiler/src/test/java/org/drools/lang/api/DescrBuilderTest.java#L269)

# c# - ASP.NET MVC 3.0 - 将 MultiSelectList 值发布到数据库的问题

> ID：11485123
> 
> 赞同：1
> 
> 时间：2012-07-14T15:47:21.917
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-3

我是 MVC 新手，也是编程新手（一般意义上）。

我正在苦苦思考如何根据我从填充的 MultiSelectList 中提取的值将多个数据库条目发布到我的数据库中（通过我的控制器）。

基本上，我正在尝试创建一个包含州和城市的简单模型，并让用户根据从单独的静态数据库中提取的州/城市值选择多个城市值并将其保存到他们的帐户中。

这是我的模型：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.Mvc;
using System.ComponentModel.DataAnnotations;

namespace BidFetcher.Models
{
public class SPServiceLocation
{
    public int SPServiceLocationID { get; set; }
    public int SPCompanyAccountID { get; set; }

    [Display(Name = "State")]
    public string state { get; set; }

    [Required]
    [Display(Name = "Cities (select all that apply)")]
    public string city { get; set; }

    public virtual SPCompanyAccount SPCompanyAccount { get; set; }
}
} 
```

这是我的视图数据的片段（包括我可以轻松填充的城市的多选列表）：

```
<div class="editor-label">
        @Html.LabelFor(model => model.state)
    </div>
    <div class="editor-field">
        @Html.DropDownList("state", ViewBag.state as SelectList, "Select a state...",    new { @class = "chzn-select", onchange = "CityChange()" })
        @Html.ValidationMessageFor(model => model.state)
    </div>

    <div class="editor-label">
        @Html.LabelFor(model => model.city)
    </div>

    <div class="editor-field" id="SP_SelectCity">
        @Html.ListBox("city", ViewBag.city as MultiSelectList, new { @class = "chzn-select", data_placeholder = "Select cities..." })
        @Html.ValidationMessageFor(model => model.city)
    </div>

    <p>
        <input type="submit" value="Submit" />
    </p> 
```

这是我的创建/发布控制器：

```
public ActionResult Create()
    {

        ViewBag.sessionName = HttpContext.Session["SPCompanyName"].ToString();

        var compID = HttpContext.Session["SPCompanyAccountID"].ToString();

        ViewBag.companyID = compID;

        ViewBag.state = new SelectList(simpleDB.simpleState, "simpleStateID", "simpleStateID");

        ViewBag.city = new MultiSelectList(simpleDB.simpleCity, "cityFull", "cityFull");

        return View();
    } 

    [HttpPost]
    public ActionResult Create(SPServiceLocation spservicelocation, FormCollection formValues)
    {

            if (ModelState.IsValid)
            {

                db.SPServiceLocation.Add(spservicelocation);
                db.SaveChanges();
                return RedirectToAction("Create", "SPServiceLocation");
        }

        return View(spservicelocation);
    } 
```

如您所见，我在 [HttpPost] 中遗漏了一些内容，可以让我将多个值保存到**db**数据库中，但我不确定到底遗漏了什么。我已经看到一些帖子在创建 IEnumerable 列表方面对此进行了解释，但我想我只是不确定是否需要这样做，因为我已经通过数据库调用成功填充了 MultiSelectList。

任何帮助是极大的赞赏！

**编辑：**

根据下面的答案，如果我想根据从 MultiSelectList 收集的结果创建多个新的数据库行，我需要使用 Form 集合来获取这些结果并在我的 HttpPost 中解析它们：

而且......我不知道该怎么做。我假设以下几点：

```
[HttpPost]
public ActionResult Create(SPServiceLocation spservicelocation, FormCollection formValues)
{

        if (ModelState.IsValid)
        {
            foreach (var item in x)
            {
            db.SPServiceLocation.Add(spservicelocation);
            db.SaveChanges();
            }
            return RedirectToAction("Create", "SPServiceLocation");
    }

    return View(spservicelocation);
} 
```

类似于上述内容，我根据我的多选列表创建一个集合，将其分解为多个变量，然后在我重定向之前多次遍历我的 database.SaveChanges？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-15T00:34:37.693

当用户提交创建表单和应用程序流以执行`[HttpPost] public ActionResult Create`操作时，所有表单数据都存在于`formValues`参数中。

您必须从中读取这些数据`formValues`（例如：`formValues["companyID"]`，从中构建适当的模型对象，然后更新 db.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-14T16:11:58.547

该技巧与您的 MVC 代码无关。您必须更改业务层或数据访问层 (DAL) 代码才能读取/写入 2 个不同的数据库。

前一段时间我做了同样的项目来回答一个问题。这是：[https ://stackoverflow.com/a/7667172/538387](https://stackoverflow.com/a/7667172/538387)

我检查了代码，它仍然可以工作，你可以下载它并自己检查。

# codeigniter - 合并 CodeIgniter 表单验证规则

> ID：11485125
> 
> 赞同：2
> 
> 时间：2012-07-14T15:47:49.270
> 
> 标签：codeigniter, validation, merge

我刚刚开始使用 CodeIgniter 的一个小页面，并想运行 CodeIgniter 的表单验证魔术。为此，我通过以下方式设置了一些规则`config/form_validation.php`：

```
$config = array(
    array(
        'field'   => 'name',
        'label'   => 'Name',
        'rules'   => 'trim|required|max_length[64]'
    )
); 
```

但除此之外，我还想在控制器内部设置一些特定的规则。

```
$this->form_validation->set_rules('name', 'Name', ' is_unique[table.name]'); 
```

我的问题 - 具体`set_rules()`似乎已经重置了所有先前定义的规则。

有没有办法合并两组规则？还是我错过了一种方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-15T06:20:59.677

我之前遇到过这个确切的问题 - 我想使用一组规则，但为特定控制器添加一个额外的规则。

不幸的是，您是正确的 - form_validation 将覆盖旧规则。您甚至不能从配置中调用包含旧规则的变量 - 因为它没有以可访问的格式存储。

我进行锻炼的方法是将通用配置文件中的规则定义为数组 - 并将数组加载到控制器中，然后附加一个新规则，然后将整个数组设置为规则集。

另一种选择是在配置文件中定义两个不同的规则集（即使它们可能几乎相同） - 并根据需要调用不同的规则集。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-14T16:38:12.260

最好在每个控制器的配置文件中定义命名数组，并按照 Codeginiter 用户指南中的说明使用它。

```
$config = array(
             'signup' => array(
                                array(
                                        'field' => 'username',
                                        'label' => 'Username',
                                        'rules' => 'required'
                                     ),
                                array(
                                        'field' => 'password',
                                        'label' => 'Password',
                                        'rules' => 'required'
                                     ),
                                array(
                                        'field' => 'passconf',
                                        'label' => 'PasswordConfirmation',
                                        'rules' => 'required'
                                     ),
                                array(
                                        'field' => 'email',
                                        'label' => 'Email',
                                        'rules' => 'required'
                                     )
                                ),
             'email' => array(
                                array(
                                        'field' => 'emailaddress',
                                        'label' => 'EmailAddress',
                                        'rules' => 'required|valid_email'
                                     ),
                                array(
                                        'field' => 'name',
                                        'label' => 'Name',
                                        'rules' => 'required|alpha'
                                     ),
                                array(
                                        'field' => 'title',
                                        'label' => 'Title',
                                        'rules' => 'required'
                                     ),
                                array(
                                        'field' => 'message',
                                        'label' => 'MessageBody',
                                        'rules' => 'required'
                                     )
                                )                          
           ); 
```

使用数组的名称将其称为 $this->form_validation->run('signup') 。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-14T15:54:37.023

我不能说我在 CI 方面有很多经验，但据我所知，你应该能够附加额外的规则。失败考虑尝试：

```
$config[] = array('name', 'Name', ' is_unique[erfolge.name]');
$this->form_validation->set_rules($config); 
```

或者[`array_merge`](http://php.net/array_merge)如果您不想修改标准配置，请使用。

# backbone.js - model.toJSON 不是使用 Backbone 的函数

> ID：11485126
> 
> 赞同：0
> 
> 时间：2012-07-14T15:47:55.577
> 
> 标签：backbone.js, coffeescript

这 ：

```
@model 
```

返回：

```
Object { type="conjugation", verb="ser", yo="soy", more...} 
```

但是当我尝试时：

```
@model.toJSON() 
```

我得到：

```
TypeError: this.model.toJSON is not a function 
```

我试图最终完成这一行：

```
$(@el).html(@template(@model.toJSON() )) 
```

这样我就可以使用我的模板在 Show 中渲染这个对象。

有什么建议吗？

**更新**

相信评论。我有这个作为模型，但我现在可以看到它们是如何不相关的。

```
class AiProject.Models.Verb extends Backbone.Model
  paramRoot: 'verb' 
```

我将尝试实例化这种类型的动词。

```
class AiProject.Routers.QuestionsRouter extends Backbone.Router
  initialize: (options) ->
    @verb = new AiProject.Models.Verb
    @verb = options.words 
```

然后回到我的视图：

```
class AiProject.Views.Questions.ConjugationView extends Backbone.View
  template: JST["backbone/templates/questions/conjugation"]

render: ->
  $(@el).html(@template(@model.toJSON() )) 
```

虽然仍然得到同样的错误..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-14T23:58:38.743

看起来您一开始就正确设置了模型，然后用 value 覆盖它`options.words`。

而不是这个：

```
class AiProject.Routers.QuestionsRouter extends Backbone.Router
  initialize: (options) ->
    @verb = new AiProject.Models.Verb
    @verb = options.words 
```

试试这个：

```
class AiProject.Routers.QuestionsRouter extends Backbone.Router
  initialize: (options) ->
    @verb = new AiProject.Models.Verb(options.words) 
```

这将创建您的模型并传入`options.words`以设置为模型的属性。

# ruby - 如何确定一个对象是“第一个”还是“创建”的？

> ID：11485132
> 
> 赞同：1
> 
> 时间：2012-07-14T15:48:58.073
> 
> 标签：ruby, ruby-on-rails-3

我在一个长期运行的 rake 任务中重构了一些代码。我曾经有这个代码：

```
if object = Object.find_by_name(name: "string")
else
  object = Object.create(name: "string")
  puts "#{object.name} created"
end 
```

现在我有这个代码：

```
object = Object.where(name: "string").first_or_create 
```

我认为这是一种改进。但是，我真的错过了长期运行的 rake 任务中的 puts 语句。使用 first_or_create 时，如何确定对象是“第一个”还是“已创建”？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-14T15:59:04.867

您可以使用 `object .persisted?` 或`object .new_record?`检查它。

`object .persisted?`如果对象已经在 db 中，则返回 true，

`object.new_record?`如果对象是新创建的，则返回 true。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-14T17:36:11.237

除了@xdazz 的回答之外，[ActiveRecord](http://api.rubyonrails.org/classes/ActiveRecord/Base.html)有

```
obj = Model.find_or_create_by_name("String")
obj.persisted? #=> false
obj.save
obj = Model.find_or_create_by_name("String")
obj.persisted? #=> true 
```

此方法与您正在做的事情相同。

# rpc - CPP 在 rpcgen 源文件的 %-lines 中扩展宏

> ID：11485134
> 
> 赞同：0
> 
> 时间：2012-07-14T15:49:40.847
> 
> 标签：rpc, c-preprocessor

以符号 '%' 开头的行应该在输出文件中按原样传递，但是这些行是否有一些 CPP 宏，这些宏也会被扩展：

来源（test.x）：

```
#ifdef ONE
#warning "ONE is defined"
#else
#warning "NO ONE!!!!!1111"
#endif

%
% hello, ONE
% 
```

运行 rpcgen：

```
# rpcgen test.x -DONE
test.x:2:2: warning: #warning "ONE is defined" [-Wcpp]
test.x:2:2: warning: #warning "ONE is defined" [-Wcpp]
test.x:2:2: warning: #warning "ONE is defined" [-Wcpp]
test.x:2:2: warning: #warning "ONE is defined" [-Wcpp] 
```

结果（test.h）：

```
/*
 * Please do not edit this file.
 * It was generated using rpcgen.
 */

#ifndef _TEST_H_RPCGEN
#define _TEST_H_RPCGEN

#include <rpc/rpc.h>

#ifdef __cplusplus
extern "C" {
#endif

 hello, 1

#ifdef __cplusplus
}
#endif

#endif /* !_TEST_H_RPCGEN */ 
```

所以“ONE”被“1”替换，但最好保持原样（在结果 test.h 中考虑“#ifdef ONE”）

有什么办法可以避免吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T12:21:14.070

所以，我有一个使用 CPP 包装器的解决方法：

1.  somedir/cpp <- Wrapped 取消定义有问题的宏。例如：

    #!/bin/sh

    执行 /usr/bin/cpp -U_LP64

2.  运行 rpcgen 作为 rpcgen -Y somedir

# objective-c - 如何以编程方式创建红色减号按钮？

> ID：11485137
> 
> 赞同：0
> 
> 时间：2012-07-14T15:50:10.157
> 
> 标签：objective-c, uibutton

我想知道是否可以以编程方式创建一个红色的“减号”按钮。说喜欢

```
UIButton *button = [UIButton buttonWithType:< red minus button >]; 
```

# html - 为所有屏幕分辨率设置网页

> ID：11485139
> 
> 赞同：-1
> 
> 时间：2012-07-14T15:50:32.003
> 
> 标签：html, css

我在 asp.net 中创建了一个网页。它适用于普通屏幕。当在更宽的屏幕上显示时，侧面和底部都有很多空白。我怎样才能使页面适合所有屏幕尺寸。我在之前的帖子中看到以 % 为单位设置宽度。但这行不通。谁能帮我解决这个问题？提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-14T16:14:47.920

我同意您需要更具体地尝试此 css 代码。

```
body{
width:100%;
height:100%;
} 
```

然后，您可以创建具有固定百分比宽度和高度的容器 DIV 来创建网页的某些部分，例如页眉、侧边栏、主要内容、页脚......等。

如果正确使用， % 方法是最可行的方法。发布 html/css/js 的[jsfiddle](http://jsfiddle.net/ "jsfiddle")以获得具体帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-14T16:11:18.590

您可以通过定义顶部、右侧、底部和左侧 css 属性来尝试根元素的绝对定位（从 body 标记向下一步）。像这样： `#page{ positioning: absolute; top: 0; right: 0; bottom: 0; left: 0; }` 然后将其他元素放置在该根元素内。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-14T18:12:54.517

你有几个选择：

将 html 或 body 标签设置为 100% 宽度并带有背景。然后将站点其余部分的容器设置为您想要的任何像素大小的最大宽度。这将防止您的网站变得过于冗长和凌乱，但仍能解决空白问题。像这样的东西：

```
body {
background:#HEX url(images/2000pxwideimage.png);
width:100%;
}

#wrapper {
max-width:960px;
} 
```

您可以使用 css3 媒体查询根据屏幕宽度调整网站的布局。这样做的好处是您可以适应越来越小的屏幕尺寸，同时保持布局美观，这在某些情况下可能意味着提供显着不同的 css。一个例子可能是水平导航，在较小的屏幕尺寸下，您希望成为垂直导航以便于使用。看起来像这样：

```
@media (min-width:960px) {
/* Browser window must be at least 960px wide to get these rules */
}

@media (max-width:320px) {
/* Something similar to this would work for very small screens like phones */
} 
```

# c# - 查找绑定到对象的 XAML 框架元素

> ID：11485141
> 
> 赞同：1
> 
> 时间：2012-07-14T15:50:54.280
> 
> 标签：c#, .net, wpf, silverlight, xaml

如何查找和访问绑定到 XAML 中的对象的元素？

**编辑：**假设我有一个`EmployeeViewModel`分配给`EmployeeView`'s`DataContext`和 a`EmployeeModel`在我的内部`EmployeeViewModel`，我想知道我的模型的哪些属性绑定到 View 的框架元素（控件）我还想访问绑定到我的模型属性的每个控件.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-14T16:18:22.230

您可以使用反射循环遍历属性并在每个属性上使用 FrameworkElement.GetBindingExpression 来为给定的框架元素构建其所有绑定。

[http://msdn.microsoft.com/en-us/library/system.windows.frameworkelement.getbindingexpression](http://msdn.microsoft.com/en-us/library/system.windows.frameworkelement.getbindingexpression)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-18T13:00:18.513

更新：鉴于 SaberAmani 澄清的问题是他正试图向他的模型添加验证并显示验证摘要..请参阅下面的链接。

[http://msdn.microsoft.com/en-us/magazine/ff714593.aspx](http://msdn.microsoft.com/en-us/magazine/ff714593.aspx)

[http://codeblitz.wordpress.com/2009/05/12/wpf-validation-summary-control/](http://codeblitz.wordpress.com/2009/05/12/wpf-validation-summary-control/)

[http://wpfvalidation.codeplex.com/](http://wpfvalidation.codeplex.com/)

[http://f10andf11.blogspot.co.uk/2012/02/wpf-validation-summary-control.html](http://f10andf11.blogspot.co.uk/2012/02/wpf-validation-summary-control.html)

* * *

供想要发现绑定的人参考：

您没有提及您的 XAML 是在 WPF、Silverlight、Metro 还是 Phone7 中（因此您可以做的事情可能会受到更多限制）。

似乎有几种可能的方法可以做你想做的事：

1.  反射
2.  MarkupObject / MarkupWriter
3.  类型描述符+依赖属性描述符
4.  自定义绑定标记扩展

看看这个链接。

*   [http://blog.spencen.com/2008/05/02/how-to-get-a-list-of-bindings-in-wpf.aspx](http://blog.spencen.com/2008/05/02/how-to-get-a-list-of-bindings-in-wpf.aspx)

他使用反射并建议这是执行此操作的经典方式......但也提到 MarkupWriter 作为另一种可能性。注意：反射方法不会发现可能有绑定的附加属性。

以下是一些使用 MarkupWriter 的链接...这将允许您发现附加的属性。

*   [http://www.codeproject.com/Articles/21139/An-XAML-Serializer-Preserving-Bindings](http://www.codeproject.com/Articles/21139/An-XAML-Serializer-Preserving-Bindings)

*   [http://blogs.msdn.com/b/marlat/archive/2009/05/24/getbindingexpression-a-good-way-to-iterate-over-all-dependency-properties-in-visual-tree-in- silverlight-3.aspx](http://blogs.msdn.com/b/marlat/archive/2009/05/24/getbindingexpression-a-good-way-to-iterate-over-all-dependency-properties-in-visual-tree-in-silverlight-3.aspx)

相关链接：

*   [从 WPF 窗口中检索所有数据绑定](https://stackoverflow.com/questions/3586870/retrieve-all-data-bindings-from-wpf-window)

*   获取对象的所有依赖项/附加属性的列表 [http://social.msdn.microsoft.com/Forums/en-US/wpf/thread/580234cb-e870-4af1-9a91-3e3ba118c89c](http://social.msdn.microsoft.com/Forums/en-US/wpf/thread/580234cb-e870-4af1-9a91-3e3ba118c89c)

# php - 我不明白 CakePHP 博客教程的编辑部分发生了什么

> ID：11485145
> 
> 赞同：0
> 
> 时间：2012-07-14T15:51:39.717
> 
> 标签：php, cakephp

我觉得很愚蠢，但我不明白如何在博客教程中将数据分配给视图（编辑帖子表单）。

[http://book.cakephp.org/2.0/en/tutorials-and-examples/blog/part-two.html#editing-posts](http://book.cakephp.org/2.0/en/tutorials-and-examples/blog/part-two.html#editing-posts)

```
public function edit($id = null) {
$this->Post->id = $id;
if ($this->request->is('get')) {
    $this->request->data = $this->Post->read(); 
```

所以这是将一些数据从数据库分配到`request->data`数组，对吗？但是视图如何在表单字段中获取这些数据？

PS为什么在中`null`用作默认值`edit($id = null)`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-14T16:02:02.330

您在控制器中分配给 $this->request->data 的任何内容都将在您的视图中作为 $this->data 可用。如果您使用内置于表单助手的 cakes，那么检查 $this->data 以查找与表单控件名称匹配的变量就足够聪明了。

# python - Django 可选 ImageField 不工作

> ID：11485149
> 
> 赞同：0
> 
> 时间：2012-07-14T15:51:58.227
> 
> 标签：python, django, django-models

我想在我的 django 模型中设置一个可选的图像字段。我在图像字段中设置了空白=真，空=真。输入以下代码后，我在除place_4_view 之外的所有图像字段中输入图像。单击上传按钮后，我收到错误消息。我错过了什么？

楷模

```
class Findme(models.Model):
   place_2_view=models.ImageField(upload_to="photos",blank=True,null=True)
   place_3_view=models.ImageField(upload_to="photos",blank=True,null=True)
   place_4_view=models.ImageField (upload_to="photos",blank=True,null=True,help_text='Optional.') 
```

上传时出错

```
Request Method: POST
Request URL:    http://127.0.0.1:8000/find/
Django Version: 1.4
Exception Type: MultiValueDictKeyError
Exception Value:    "Key 'place_4_view' not found in <MultiValueDict: {u'place_2_view': [<TemporaryUploadedFile: 2012-05-17-289.jpg (image/jpeg)>], u'place_3_view': [<TemporaryUploadedFile: Crimo.JPG (image/jpeg)>]}>"
Exception Location: C:\Python27\lib\site-packages\django\utils\datastructures.py in __getitem__, line 258
Python Executable:  C:\Python27\python.exe 
```

意见

```
 def findpic(request):
        extra_data_context={}
           #if there's nothing in the field do nothing.
           if request.method=="POST":
              form=FindmeForm(request.POST, request.FILES)
              if form.is_valid():
                 data=form.cleaned_data
                    newfindmes=Findme(
                        user=request.user,
                        pub_date=datetime.datetime.now(),
                        place_2_view=request.FILES['room_2_view'],
                        place_3_view=request.FILES['room_3_view'],
                        place_4_view=request.FILES['room_4_view'])
                    newfindmes.save()
              extra_data_context.update({'FindmeForm':form})
         else:
             form = FindmeForm()
             extra_data_context.update({'FindmeForm':form})
        extra_data_context.update({'Findmes':Findme.objects.filter(user=request.user)})
        return render_to_response('postme.html',extra_data_context,context_instance=RequestContext(request)) 
```

模板

```
 {% block content %}

        <form enctype="multipart/form-data"  form action="." method="POST">
       {% csrf_token %}
             <div class="post-fed">{{ FindmeForm.as_p}}</div>
             <input type="submit" value="Get It"/> 
              </form>

           {% for Findme in Findmes.object_list %}
         <tr>
         <p> {{Findme.pub_date|timesince }} ago </p> 
   <p><img src="{{Findme.thumbnail_2.url}}" width="83" height="78">
    <img src="{{Findme.thumbnail_3.url}}" width="83" height="78"> {% if Findme.thumbnail_4 %} <img src="{{Findme.thumbnail_4.url}}" width="83" height="78"/>
          {% endif %}  
        <p> Created By {{ Findme.user }}</p>
        {% endfor %}
        {% endblock %} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-14T15:57:40.467

看来您的代码在表单提交期间希望密钥位于表单中。

编辑：您的 findPic 方法正在尝试获取该字段，并且该字段为空时不存在。我建议使用 request.FILES.get 并指定一个默认值，或者测试 request.FILES 是否存在键，或者迭代键本身。基本上，您的代码需要为 request.FILES 准备好为空或不包含您尝试访问的所有字段。

See [this answer](https://stackoverflow.com/questions/5742119/django-form-with-multiple-file-fields "This Answer") for an example of using request.FILES.get and [Files Django Docs](https://docs.djangoproject.com/en/dev/ref/request-response/#django.http.HttpRequest.FILES) for other details on the request.FILES object.

# php - 值未显示在 mysql_fetch_array() 中

> ID：11485154
> 
> 赞同：0
> 
> 时间：2012-07-14T15:53:20.970
> 
> 标签：php, mysql

```
<?php
    mysql_connect("localhost", "root", "");
    mysql_select_db("audio_book");
    $selectData = "SELECT * FROM user, library, audios 
                         WHERE user.user_id = library.user_id AND library.library_id = audios.library_id";
    $result = mysql_query($selectData) or die(mysql_error());
    //print_r(mysql_fetch_array($result)); // it works fine here
    while($row = mysql_fetch_array($result));
        echo $row['user_name']."-".$row['library_name']."-".$row['filename']; 
```

正如上面给出的代码 m 试图从指定的列名中获取值，问题是它在 echo 中的那个地方没有显示任何内容，而我在使用 print_r() 时得到的结果完全符合我的要求；可能是什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-14T15:56:36.783

试试这个查询。它使用 JOIN 语句。

```
SELECT * FROM user INNER JOIN library ON user.user_id=library.user_id INNER JOIN audios ON library.library_id=audios.library_id 
```

请参阅下面的代码（注意我确实对您的 while 语句进行了更改）

```
<?php
    mysql_connect("localhost", "root", "");
    mysql_select_db("audio_book");
    $selectData = "SELECT * FROM user INNER JOIN library ON user.user_id=library.user_id INNER JOIN audios ON library.library_id=audios.library_id";
    $result = mysql_query($selectData) or die(mysql_error());
    while($row = mysql_fetch_array($result)){
        echo $row['user_name']."-".$row['library_name']."-".$row['filename'];
    } 
```

我确实建议考虑切换到 MySQLi。我已经列出了如何通过下面的 mysqli 完成此操作的示例。

程序（因为您当前正在使用程序逻辑）：

```
<?php
        $connect = mysqli_connect("localhost", "root", "password", "audio_book");
        $selectData = "SELECT * FROM user INNER JOIN library ON user.user_id=library.user_id INNER JOIN audios ON library.library_id=audios.library_id";
        $result = mysqli_query($connect,$selectData) or die(mysqli_error($connect));
        while($row = mysqli_fetch_array($result)){
            echo $row['user_name']."-".$row['library_name']."-".$row['filename'];
        } 
```

# activerecord - DelayedJob 中断验证 ActiveRecord 中的唯一约束

> ID：11485159
> 
> 赞同：3
> 
> 时间：2012-07-14T15:53:56.823
> 
> 标签：activerecord, delayed-job, race-condition

这很简单，我正在运行一个查找 Cogs 的爬虫。Cogs 可以属于一个单一的 Widget。有时它会找到一堆应该属于同一个 Widget 的 Cog。在 Cog 模型中，它运行：

```
# Find or create widget
match = Widget.where("name ILIKE (?)", name).first
match = Widget.create(name: name) unless match 
```

并行运行的延迟作业本质上是这样的：

```
- CREATE Cog, name: "cog1", (Widget, name: "Foo")
- CREATE Cog, name: "cog2", (Widget, name: "Foo")
- CREATE Cog, name: "cog3", (Widget, name: "Foo")
- CREATE Cog, name: "cog4", (Widget, name: "Foo") 
```

这是不可避免的，但我认为会由上面的匹配代码处理。我在 Widget 模型中也有这个：

```
validates :name, presence: true, uniqueness: true 
```

不幸的是，由于 4 个 DelayedJob 工作人员在 4 个内核上运行，这些作业同时运行，导致尽管进行了两项检查，仍会创建多个 Widget。创建小部件时如何防止竞争条件，以免出现重复？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-02-28T03:39:34.367

因为唯一检查和插入是分开执行的，所以存在竞争条件。您需要一个索引来强制执行唯一性约束。

文档提到了这一点：http: [//guides.rubyonrails.org/active_record_validations.html#uniqueness](http://guides.rubyonrails.org/active_record_validations.html#uniqueness)

# android - 同时具有图像和文本视图的选择器

> ID：11485160
> 
> 赞同：0
> 
> 时间：2012-07-14T15:54:06.587
> 
> 标签：android

我知道如何为 imageview 制作选择器以及如何为 textView 制作选择器，现在我有一个包含选项卡的 tabwidget，每个选项卡下面都有图像和文本视图，我的问题是如何更改图像视图的背景和颜色o 用户单击选项卡时的文本视图。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-14T16:09:28.140

您必须使用[TabHost.TabSpec.setIndicator(View view)](http://developer.android.com/reference/android/widget/TabHost.TabSpec.html#setIndicator%28android.view.View%29)来定义您自己的布局，您可以在其中设置选择器。您可以重用`tab_indicator.xml`布局，可以在`platforms/android-xx/data/res/drawable`.

摘抄：

```
mTabHost = (TabHost) findViewById(android.R.id.tabhost);

private View createTabView(CharSequence label, Drawable icon) {
    View tabIndicator = LayoutInflater.from(mContext).inflate(R.layout.tab_indicator, mTabHost.getTabWidget(), false);
    TextView tv = (TextView) tabIndicator.findViewById(R.id.title);
    tv.setText(label);
    ImageView iv = (ImageView) tabIndicator.findViewById(R.id.icon).
    iv.setDrawable(icon);
    return tabIndicator;
}

public void addTab(CharSequence label, Drawable icon) {
    View tabIndicator = createTabView(label, icon);
    TabHost.TabSpec tabSpec = mTabHost.newTabSpec(label.toString()).setIndicator(tabIndicator).setContent(...);
    mTabHost.addTab(tabSpec);
} 
```

# python - MySQL-python 不在 CGI 中执行

> ID：11485161
> 
> 赞同：1
> 
> 时间：2012-07-14T15:54:07.897
> 
> 标签：python, mysql, cgi, mysql-python

我正在使用 MySQL-python 包。我可以从命令行执行 MySQL 相关脚本，但是通过浏览器（Apache CGI）执行相同操作会产生以下错误：

```
A problem occurred in a Python script. Here is the sequence of function calls leading up to the error, in the order they occurred.  
/var/www/html/temp.py in ()  
9 
10 # Establich a connection
11 db = MySQLdb.connection(host="127.0.0.1", user="root", passwd="", db="inserv")
12 
13 # Run a MySQL query from Python and get the result set  
   db undefined, MySQLdb = <module 'MySQLdb' from 
  '/usr/lib64/python2.6/site-packages
/MySQLdb/__init__.pyc'>, MySQLdb.connection = <type '_mysql.connection'>,  
host undefined,   user undefined, passwd undefined

<class '_mysql_exceptions.OperationalError'>: 
(2003, "Can't connect to MySQL server on '127.0.0.1' (13)")
  args = (2003, "Can't connect to MySQL server on '127.0.0.1' (13)")
  message = '' 
```

在过去的几天里，我一直陷入这种情况。通过基于 php 的站点发出的 MySQL 命令可以正常执行，我也可以从命令行登录 MySQL。问题似乎只出在 Python CGI 上。

我也对 oursql 包进行了同样的尝试，似乎也有类似的问题。我该如何解决这种情况？

**编辑**
根据@Real的回答，我已经编辑了要使用的代码，`MySQLdb.connect()`但问题仍然存在，回溯以：

```
2003, "Can't connect to MySQL server on '127.0.0.1' (13)" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T16:04:20.383

您应该使用连接，而不是连接。mysqldb.connect() 返回一个连接对象，但您似乎正在调用 mysqldb.connection()。有关如何执行此操作的示例，请参阅[文档。](http://mysql-python.sourceforge.net/MySQLdb.html#mysqldb "文档")

# assembly - 推送到浮点寄存器而不是堆栈

> ID：11485169
> 
> 赞同：6
> 
> 时间：2012-07-14T15:55:22.303
> 
> 标签：assembly, cpu-registers

我有一个需要尽可能快的函数，它只使用整数运算。它在 AMD64 架构上运行，我需要做一些推送/弹出操作才能有足够的寄存器来使用。现在我想知道，x64 ABI 声明前四个浮点寄存器（XMM0、XMM1、XMM2 和 XMM3）是易失性的，不需要在函数调用中保留。

所以我想我可以通过 movq（MMX 或 SSE 指令集）而不是使用堆栈来存储我需要保存在这些寄存器的低 64 位（即 MM0、MM1、...）中的 64 位寄存器，从而节省了自己一些内存加载/存储。此外，我不需要使用 EMMS 存储 FPU 状态——这会破坏目的——因为我实际上并没有操作浮点寄存器，而只是将它们用作存储（而且无论如何，x87 单元在x64，因为它基本上被 SSE 取代）

我已经完成了修改并且它可以工作（没有崩溃，并且性能显着提高了 4%），但我想知道，这个“hack”是否真的有效，或者它会引入我可能错过的任何特定副作用（比如 FPU 状态腐败，即使我不使用它，那种东西）。在任何当前架构上，加载/存储到 FPU 寄存器总是比内存加载/存储快吗？

而且，是的，*确实*需要这种优化。公平地说，这不会严重降低代码维护成本，一行注释就足以解释这个技巧。因此，如果我可以免费获得每个字节少几个时钟而不会产生意外后果，我会很乐意接受它们 :)

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-14T16:00:50.023

EMMS 指令只需要在 MMX 操作后清除状态。SSE 指令不需要它。所以肯定不会冲突。

当然，您应该记住，不同的编译器和操作系统使用不同的调用约定，有些可能会以不同的方式处理这四个寄存器。

但是，只要牢记这一点，我认为这种方法没有问题。您正在按照 ABI 应该使用的方式使用所有寄存器。

并且假设这是用汇编编写的，则无需考虑这是否会妨碍编译器优化（深入到 ASM 并开始讨论特定寄存器的 C/C++ 函数使编译器更难优化代码）

# jquery - 应用 jQuery 后无法选中/取消选中复选框

> ID：11485175
> 
> 赞同：3
> 
> 时间：2012-07-14T15:56:38.003
> 
> 标签：jquery, html

我对 jQuery 不是很好，所以请放轻松。

我有这个脚本：

```
 $(document).ready(function() {
        $(".item").click(function() {
            if($(this).find("input").attr("checked")) {
                $(this).css("background-color", "#d1d1d1");
                $(this).find("input").removeAttr("checked");
            } else {
                $(this).css("background-color", "#03d100");
                $(this).find("input").attr("checked", "checked");
            }
        });
    }); 
```

应用于此 HTML：

```
<ul class="col-1">
    <li class="item">
        <input type="checkbox" />
        <label for="">Check Up</label>
        <span class="float-r">$19</span>
    </li>
    ...
</ul> 
```

这在很大程度上是有效的。我想要的是单击“li”，更改背景颜色，并将其中的复选框设置为“已选中”。这样做，但它不允许我实际单击复选框本身并将其更改为选中或未选中。

我认为这是我做错了脚本中的某些内容，但我对 jQuery 不够熟悉，无法知道。

[jsFiddle](http://jsfiddle.net/CMb4J/)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-14T16:08:03.810

```
$(document).ready(function() {

    $(".item").click(function() {

        var checkbox = $(this).find(":checkbox"),   // keep reference of checkbox
            checked = checkbox.is(":checked");      // check checkbox status
        if (checked) {
            $(this).css("background-color", "#d1d1d1");
        } else {
            $(this).css("background-color", "#03d100");
        }

        // change checkbox statr
        checkbox.prop("checked", !checked);

    });

    // bind click event  to checkbox
    // to trigger the click to li

    $('.item :checkbox').click(function() {
      $(this).parent('li').click();
    });

}); 
```

**[工作样本](http://jsfiddle.net/QStkd/606/)**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-14T16:03:56.903

这是因为您的事件与父容器相关联，因此当您单击复选框时，您也会单击 ，`li.item`因此它们会相互抵消。您可以使用`e.preventDefault()`复选框，但是，我刚刚在 JS Fiddle 中更新了您的类名，以获得更合适和更清晰的修复。

更新的小提琴在[这里](http://jsfiddle.net/CMb4J/1/)。

# ios - iOS 将 viewcontroller 的视图显示在任何位置的顶部

> ID：11485176
> 
> 赞同：0
> 
> 时间：2012-07-14T15:57:03.240
> 
> 标签：ios, uiviewcontroller

我有 3 个普通视图，每个视图都由一个视图控制器控制，

```
 view1---->View1controller (rootviewcontroller)
       view2---->View2controller
      view3---->View3controller 
```

然后我有一个特殊的模块

```
 View4--->View4controller 
```

发生的事情是rootviewcontroller中存在后台线程。我可以在 view1、view2 或 view3 之间。当出现某些情况时，后台线程将通过以下方式启动 View4

```
 [presentviewcontroller:View4controller] 
```

我希望 View4 上升到顶部，如果我在 view2、View3 中也没关系。但问题是要呈现的代码在 View1controller 中。因此，如果我在 view2 中并且满足特殊条件，则会从 View1controller 的后台线程中弹出 UIAlertView，向用户说明出现的特殊情况。

那么当我在 View2 中时，如何将 View4 从 View1controller 呈现给 TOP？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-14T16:03:30.680

我相信你不能那样做。您要么必须将 view4 传递给 View2 并让它呈现它，也许使用这样的东西：

```
@property UIViewController *currentView;
@synthesize currentView;
//and when trying to push view4 do the following
if (currentView!=nil) {

[currentView presentViewContoller:View4Cont];

} 
```

或使用 view1 关闭 View2 并同时呈现 View4（使用动画属性 = NO）。

还要确保从主线程执行所有特定于接口的操作。

# php - 检查用户是否喜欢页面

> ID：11485181
> 
> 赞同：0
> 
> 时间：2012-07-14T15:57:23.403
> 
> 标签：php, javascript, facebook, sdk

> **可能重复：**
> [通过 Graph API 检查用户是否喜欢页面](https://stackoverflow.com/questions/9566575/check-if-user-likes-page-via-graph-api)

我知道这可能已经被问过几次了，但是，由于我是新 Facebook SDK 的新手，我遇到了一些困难。

基本上，我想做的很简单。我有一个完整的网页，我只想在用户喜欢我的 Facebook 页面时才显示。否则，他会被要求先点赞该页面。

我想知道 Javascript 或 PHP 方法之间有什么区别，以及是否只有在用户首先授权我的 Facebook 应用程序时才能实现这一点。

我不认为获得如此简单的东西应该那么困难，所以如果有人能给我发一个易于上手、更新的指南或一些示例代码，我会很高兴。

提前谢谢大家。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-14T19:52:46.070

在 Facebook（画布/页面标签应用程序）之外，您只能通过让用户先连接到应用程序来获取用户是否喜欢您的页面的信息，然后让该应用程序请求允许阅读他的喜欢。

[https://developers.facebook.com/docs/reference/api/user/#likes](https://developers.facebook.com/docs/reference/api/user/#likes)

（但是，如果您的应用程序没有为用户提供任何其他功能，这可能有点多问——如果它不能为我提供更多使用它的好处，我不会允许任何应用程序这样做；我宁愿远离如果您希望我在看到内容之前就喜欢它，那么您的网站完全可以。）

# jquery - 需要jquery帮助

> ID：11485182
> 
> 赞同：1
> 
> 时间：2012-07-14T15:57:26.823
> 
> 标签：jquery, slidetoggle, slidedown

在一个项目上需要一点帮助。看一眼

我希望足球的红色区域在悬停时向上滑动一点，完成后向下滑动。带有足球的红色区域是 div 的背景。定位绝对和底部 0，在一个相对的 div 内，以使其保持在底部。基本上我想增加那个 div 的高度，但是代码有一些问题。我尝试过使用 slideDown 方法和 slideToggle。我可以让它向下滑动一点，但不知道如何增加它的高度。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-14T16:07:59.630

首先，你的`#contain`div 应该有`height: 67px`，而不仅仅是`67`. 然后，如果你给出`div.bottomwrapsports`a `position: absolute; bottom: 0`，你可以在鼠标悬停时使用 jQuery 为底部属性设置动画：

```
$("div.bottomwrapsports").animate({ bottom: 20 });  // move it 20px up 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-14T17:45:19.533

试试这个：

```
$("div.bottomwrapsports").on({
    'mouseenter': function() {
        $(this).animate({ bottom: 20 });
    },
    'mouseleave': function() {
        $(this).animate({ bottom: 0 });
    }
}); 
```

# blackberry - 在黑莓 xml 解析中的空节点处显示消息

> ID：11485183
> 
> 赞同：0
> 
> 时间：2012-07-14T15:57:35.290
> 
> 标签：blackberry, xml-parsing, nodes

在一个黑莓应用程序中解析一个 XML 结果，它返回表单中的节点；

```
<searches> 
<search id ='1234'>
<name> somename </name>
<address> some address </address>
<sector> some sector </sector>
<contacts> 12345, me@me.com </contacts>
<searches> 
```

当进行没有任何匹配的搜索时，结果返回空，即；

```
<name></name>
<address></address>
<sector></sector> 
<contacts></contacts> 
```

不要返回结果。它看起来就像`<searches></searches>`. 在这种情况下，当搜索结果仅返回时，如何指定对话框警报`<searches></searches>`

这是我与解析器连接的 Http 连接。

```
 try{
         HttpConnection connection = (HttpConnection)Connector.open("http://someurl.xml",Connector.READ_WRITE);
         URLEncodedPostData postData = new URLEncodedPostData(URLEncodedPostData.DEFAULT_CHARSET, false);
         postData.append("username", "someusername");
         postData.append("password", "somepassword");
         postData.append("term", word);
         connection.setRequestMethod(HttpConnection.POST);
         connection.setRequestProperty("Content-Type","application/x-www-form-urlencoded");
         connection.setRequestProperty("User-Agent","Profile/MIDP-2.0 Configuration/CLDC-1.0");
         OutputStream requestOut = connection.openOutputStream();
         requestOut.write(postData.getBytes());
         connection.getHeaderField("Content-type"); 
         DocumentBuilderFactory docBuilderFactory = DocumentBuilderFactory.newInstance();
         DocumentBuilder docBuilder = docBuilderFactory.newDocumentBuilder();
         docBuilder.isValidating();
         InputStream detailIn = connection.openInputStream();
         doc = docBuilder.parse(detailIn);
         requestOut.close();
         connection.close(); 
         NodeList list = doc.getElementsByTagName("name");
         NodeList list1 = doc.getElementsByTagName("address");
         NodeList list2 = doc.getElementsByTagName("sector");
         NodeList list3 = doc.getElementsByTagName("contacts");
         callback(list,list1,list2,list3);
         requestOut.close();
         connection.close();
     }
     catch(Exception ex){
         System.out.println(ex.toString());
     } 
```

我应该使用 if 还是 for ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T20:53:04.617

我面前没有 Eclipse 插件（所以我无法测试这段代码），但是这样的东西应该可以工作：

```
doc = docBuilder.parse(detailIn);
requestOut.close();
connection.close(); 
NodeList list = doc.getElementsByTagName("name");
NodeList list1 = doc.getElementsByTagName("address");
NodeList list2 = doc.getElementsByTagName("sector"); 
NodeList list3 = doc.getElementsByTagName("contacts");
if (list == null || list.getLength() == 0) {
    // no results, so post an alert on the UI thread
    UiApplication.getUiApplication().invokeLater(new Runnable() {
        public void run() {
            Dialog.alert("No results found!");
        }
    });
} 
```

这仅测试`name`元素是否存在，假设如果`name`缺失，其他元素（地址、部门和联系人）也会缺失。如果您的应用程序不是这样，您可以选择使`if`语句 check `list1`, `list2`, and `list3`also。

# forms - Yesod 中动态大小的字段列表

> ID：11485186
> 
> 赞同：4
> 
> 时间：2012-07-14T15:58:23.047
> 
> 标签：forms, haskell, web, yesod

在 HTML 中，可以使用非唯一名称指定多个字段，如下所示：

```
<input type="checkbox" name="breakfast" value="eggs">
<input type="checkbox" name="breakfast" value="bacon"> 
```

这样，在提交时，查询参数就会像（如果两个框都被勾选）一样传递`breakfast=eggs&breakfast=bacon`。CGI 规范声明这应该被解释为一个数组或值列表，并且这种技术对于动态大小的输入列表也很有用：

```
<input type="text" name="url">
<input type="button" value="More…"
       onclick="var s = document.createElement('input');
                s.type='text';
                s.name='url';
                this.form.appendChild(s);
                return false;"> 
```

但是，我看不到从 Yesod 中的表单获取列表值输入的方法。有没有办法做这样的事情？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-14T18:49:29.007

大多数预建字段都适用于具有单个输入的输入（multiSelectField 有一个明显的例外）。为了实现您正在寻找的东西，您可能想要创建一个自定义[Field](http://hackage.haskell.org/packages/archive/yesod-form/1.0.0.4/doc/html/Yesod-Form-Types.html#t%3aField)。请注意，该`fieldParse`函数采用`Text`值列表，特别是为了允许您的用例。

[关于表单](http://www.yesodweb.com/book/forms)的章节包括关于自定义字段的部分。

# android - 如何判断图片是横向还是纵向？

> ID：11485188
> 
> 赞同：4
> 
> 时间：2012-07-14T15:58:41.057
> 
> 标签：android, android-intent

我的画廊中有横向或纵向的图片。在画廊应用程序中正确显示。当我使用意图从图库中选择图片时，我会返回一个 URI。但是在显示图片之前，我如何知道图片是纵向还是横向？

我的应用程序使用这样的 Intent 选择图片：

```
 private OnClickListener btnChooseFromLibraryListener = new OnClickListener() {

    @Override
    public void onClick(View v) {
        Intent intent = new Intent(Intent.ACTION_GET_CONTENT);  
        intent.setType("image/*");
        startActivityForResult(intent, REQ_CODE_PICK_IMAGE);
    }
}; 
```

这是我恢复意图的方法：

```
 protected void onActivityResult(int requestCode, int resultCode, Intent imageReturnedIntent) { 
    super.onActivityResult(requestCode, resultCode, imageReturnedIntent); 

    switch(requestCode) { 
    case REQ_CODE_PICK_IMAGE:
        if(resultCode == RESULT_OK){  
            Uri selectedImage = imageReturnedIntent.getData();
            String[] filePathColumn = {MediaStore.Images.Media.DATA};

            Cursor cursor = getContentResolver().query(selectedImage, filePathColumn, null, null, null);
            cursor.moveToFirst();

            int columnIndex = cursor.getColumnIndex(filePathColumn[0]);
            String filePath = cursor.getString(columnIndex);
            cursor.close();

            SetPicture(filePath);
        }
    }
}

private void SetPicture(String filePath) {
    Bitmap bm = BitmapFactory.decodeFile(filePath);
    Log.d("TW", "Picture Path:" + filePath);
    String size = String.format("Width:%d Height:%d", bm.getWidth(), bm.getHeight());
    Log.d("TW", size);
    ivPicture.setImageBitmap(bm);
    ui.setLastPicture(filePath);        
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-14T16:18:54.567

在里面使用这个`onActivityResult()`

```
Uri selectedImage = imageReturnedIntent.getData();
                    String[] orientationColumn = {MediaStore.Images.Media.ORIENTATION};
                    Cursor cur = managedQuery(selectedImage, orientationColumn, null, null, null);
                    int orientation = -1;
                    if (cur != null && cur.moveToFirst()) {
                        orientation = cur.getInt(cur.getColumnIndex(orientationColumn[0]));
                    } 
```

并使用 Matrix 对象来旋转您的图像

```
 Matrix matrix = new Matrix();
  matrix.postRotate(orientation); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-14T16:11:43.537

内容提供者使用了一个`MediaStore.Images.Media.ORIENTATION`字段。

代码需要稍作修改，通过包含字段来告诉您图像的[方向](http://developer.android.com/reference/android/provider/MediaStore.Images.ImageColumns.html#ORIENTATION)，以度数、0、90、180、270 表示。

```
String[] filePathColumn = {
         MediaStore.Images.Media.DATA, 
         MediaStore.Images.Media.ORIENTATION
};
Cursor cursor = getContentResolver().query(selectedImage, 
                   filePathColumn, 
                   null, 
                   null, 
                   null);
cursor.moveToFirst();
int columnIndex = cursor.getColumnIndex(filePathColumn[0]);
int orientationIndex = cursor.getColumnIndex(filePathPathColumn[1]);
String filePath = cursor.getString(columnIndex);
String degreesOrientation = cursor.getString(orientationIndex);
cursor.close();
// Now degreesOrientation will tell you exactly the rotation, as in
int nDegrees = Integer.parse(degreesOrientation);
// Check nDegrees - for example: if (nDegrees == 0 || nDegrees == 180) portrait. 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-15T12:46:28.627

在上述“答案”之后，我编写了以下方法。希望这会对其他人有所帮助。

```
private int GetRotateAngle(Uri imageUri) {
    String[] columns = {MediaStore.Images.Media.DATA, MediaStore.Images.Media.ORIENTATION};
    Cursor cursor = getContentResolver().query(imageUri, columns, null, null, null);
    if (cursor == null) { return 0; }
    cursor.moveToFirst();

    int orientationColumnIndex = cursor.getColumnIndex(columns[1]);
    int orientation = cursor.getInt(orientationColumnIndex);
    cursor.close();
    return orientation;
} 
```

# java - 使用 Java 在网页上显示图像

> ID：11485190
> 
> 赞同：2
> 
> 时间：2012-07-14T15:59:01.943
> 
> 标签：java, jsp, jakarta-ee, servlets

在我的`Java EE`应用程序中，有一个上传图片的功能。上传图片时，我保存`image path`在`MySQL`数据库中。

现在我想`image path that saved when uploading the image`在我的`MySQL database table`.

我怎么能这样做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-14T16:03:19.267

这取决于。Web 服务器提供文档的路径是否在某个地方？`IMG`然后只需在标签中包含路径，根据需要进行调整。如果不是，或者图像数据本身实际上在数据库中（您对此并不完全清楚），则创建一个 servlet，它根据查询参数返回图像的内容，并使用该 servlet 的 URL（加上查询参数) 在标签的`SRC`属性中。`IMG`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-14T16:06:35.887

编写一个 servlet，从数据库中提取存储的图像并写回 servlet 输出流。
在写入输出流之前，您需要设置图像的相关 mime 类型，例如“image/jpeg”。

您需要使用所需的输入参数将图像源指向此 servlet url，以从数据库加载正确的图像。例如 ：

```
<img src="http://mydomain/servlet/imageServlet?imgid=xyz" /> 
```

BalusC 给出了一个很好的例子：[*ImageServlet serving from database*](http://balusc.blogspot.in/2007/04/imageservlet.html)

# php - PHP 如果当前时间在配置范围内

> ID：11485192
> 
> 赞同：0
> 
> 时间：2012-07-14T15:59:07.273
> 
> 标签：php, date

我正在尝试找到设置系统的最佳方法，在该系统中可以读取一系列工作日/时间并与当前时间进行比较。PHP 有一些强大的内置时间函数，但我的最大障碍是我需要通过控制文件完成此操作，我希望用户以“友好”的方式指定范围

我的第一个想法是要求用户使用这样的格式：M:T:W:Th:Fr:8:00AM/5:00PM

然后在其上使用 PHP 的日期函数将其与当前日期进行比较。这可能会尽可能好，但我希望有人对更友好的格式有想法。

谢谢！

# jquery - Fancybox - 添加打印功能

> ID：11485198
> 
> 赞同：2
> 
> 时间：2012-07-14T15:59:56.683
> 
> 标签：jquery, button, printing, fancybox

是的，我知道这里存在关于如何**将打印按钮添加到 fancybox**的问题。我在fancybox（http://oi50.tinypic.com/2wfvn7r.jpg）中添加了一个按钮，但我不知道如何添加一个将像这样实现的功能：[http ://www.thatagency.com/design -studio-blog/2010/04/add-print-ability-to-fancybox-jquery-plugin/](http://www.thatagency.com/design-studio-blog/2010/04/add-print-ability-to-fancybox-jquery-plugin/)

任何人都可以帮助并为此按钮编写功能吗？

我将不胜感激

我的代码：[http ://www.filehosting.org/file/details/360044/fancybox-print.zip](http://www.filehosting.org/file/details/360044/fancybox-print.zip)

演示/MY.htm

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-07-14T17:38:09.130

我正要投票结束你的问题，但我知道找到解决问题的方法可能有点棘手（你不会问你是否知道，对吗？），但是我同意@JamWaffles 你不应该要求人们“*为我做这件事*”，而是展示你的代码并描述你的尝试。我想最合乎逻辑的是（至少）查看找到的任何示例的源文件。

无论如何，您可以实现打印功能，[如您](http://www.thatagency.com/design-studio-blog/examples/print-fancybox/)使用`onComplete`fancybox 的 API 选项提供的示例和一些`css`打印按钮，如下所示：

设置“打印”按钮的 css 属性（将使用选择器`#fancy_print`）：

```
div#fancy_print {
  /* set proper path for your print image */
    background: url("images/print2.jpg") no-repeat scroll left top transparent;
    cursor: pointer;
    width: 58px; /* the size of your print image */
    height: 60px;
    left: -15px;
    position: absolute;
    top: -12px;
    z-index: 9999;
    display: block;
} 
```

然后是fancybox js代码：

```
$(document).ready(function() {
 $('.fancybox').fancybox({
  'onComplete': function(){ // for v2.0.6+ use : 'beforeShow' 
    var win=null;
    var content = $('#fancybox-content'); // for v2.x use : var content = $('.fancybox-inner');
    $('#fancybox-outer').append('<div id="fancy_print"></div>'); // for v2.x use : $('.fancybox-wrap').append(...
    $('#fancy_print').bind("click", function(){
      win = window.open("width=200,height=200");
      self.focus();
      win.document.open();
      win.document.write('<'+'html'+'><'+'head'+'><'+'style'+'>');
      win.document.write('body, td { font-family: Verdana; font-size: 10pt;}');
      win.document.write('<'+'/'+'style'+'><'+'/'+'head'+'><'+'body'+'>');
      win.document.write(content.html());
      win.document.write('<'+'/'+'body'+'><'+'/'+'html'+'>');
      win.document.close();
      win.print();
      win.close();
    }); // bind
  } //onComplete
 }); // fancybox
}); //  ready 
```

您可以将打印功能（`.bind()`方法）放在一个单独的函数中并调用它`onComplete`。

[演示文件](http://www.picssel.com/playground/jquery/addPrintButton_14jul12.html)

**注意**：此解决方案适用于 Fancybox v1.3.4（fancybox v2.x 需要调整代码以获得正确的选择器和 API 选项）

**编辑#1**：我评论了 fancybox v2.x 的选项和选择器

**编辑#2**（2013 年 7 月 15 日）：上面的代码适用于 fancybox 中显示的单个项目，但如果使用 fancybox 库则失败。

以下是 fancybox 2（今天的 v2.1.5）和图片库的工作代码：

```
$(document).ready(function() {
 $('.fancybox').attr("rel","gallery").fancybox({
  afterShow: function(){
    var win=null;
    var content = $('.fancybox-inner');
    $('.fancybox-wrap')
    // append print button
    .append('<div id="fancy_print"></div>')
    // use .on() in its delegated form to bind a click to the print button event for future elements
    .on("click", "#fancy_print", function(){
      win = window.open("width=200,height=200");
      self.focus();
      win.document.open();
      win.document.write('<'+'html'+'><'+'head'+'><'+'style'+'>');
      win.document.write('body, td { font-family: Verdana; font-size: 10pt;}');
      win.document.write('<'+'/'+'style'+'><'+'/'+'head'+'><'+'body'+'>');
      win.document.write(content.html());
      win.document.write('<'+'/'+'body'+'><'+'/'+'html'+'>');
      win.document.close();
      win.print();
      win.close();
    }); // on
  } //  afterShow
 }); // fancybox
}); //  ready 
```

此代码使用`.on()`其委托形式的方法将`click`事件绑定到库中未来元素的*打印*按钮。另**请注意**，现在我们正在使用`afterShow`回调来获取`index`我们要打印的图像的正确性。

**注意**：`.on()`需要 jQuery v1.7+

[请参阅http://www.picssel.com/playground/jquery/addPrintButtonV2_14jul13.html](http://www.picssel.com/playground/jquery/addPrintButtonV2_14jul13.html)上的演示

# shell - 在awk中查找变量内是否有空格

> ID：11485201
> 
> 赞同：0
> 
> 时间：2012-07-14T16:00:04.767
> 
> 标签：shell, awk, grep

我正在寻找一个命令，该命令将获得变量中是否存在空格的结果**awk**。我**不是在寻找**

```
 split(variable,array," ") 
```

然后遍历这个数组找到它..我正在寻找一种更有效的方法。谁能指导我这件事。谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T16:03:43.730

使用 awks 内置正则表达式引擎：

```
variable ~ / / 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-14T16:06:36.757

您可以使用 awk`index()` [字符串函数](http://www.staff.science.uu.nl/~oostr102/docs/nawk/nawk_92.html)来搜索目标字符串：

```
$ awk 'BEGIN{var="ga p";if(index(var," ")>0) print "Space"; else print "No space"}'
Space

$ awk 'BEGIN{var="gap";if(index(var," ")>0) print "Space"; else print "No space"}'
No space 
```

从上面的文档：

> **索引（在，查找）**
> 
> 这会在字符串 in 中搜索字符串 find 的第一次出现，并返回该字符串在 in 中出现的*位置*（以字符为单位）。如果*未*找到 find，则 index 返回 0。

# c++ - 'std::cin >> 中'operator>>' 的模棱两可的重载>>

> ID：11485202
> 
> 赞同：0
> 
> 时间：2012-07-14T16:00:23.810
> 
> 标签：c++, operator-overloading, iostream, std, cin

我正在尝试做一些事情，因此您输入文件名，然后输入要写入文件的文本，但是当我尝试编译它时，它会说：

```
files.cc: In function ‘int main()’:
files.cc:11: error: ambiguous overload for ‘operator>>’ in ‘std::cin >> filetoopen’
/usr/include/c++/4.2.1/istream:131: note: candidates are: std::basic_istream<_CharT, _Traits>& std::basic_istream<_CharT, _Traits>::operator>>(std::basic_istream<_CharT, _Traits>& (*)(std::basic_istream<_CharT, _Traits>&)) [with _CharT = char, _Traits = std::char_traits<char>] <near match>
/usr/include/c++/4.2.1/istream:135: note:                 std::basic_istream<_CharT, _Traits>& std::basic_istream<_CharT, _Traits>::operator>>(std::basic_ios<_CharT, _Traits>& (*)(std::basic_ios<_CharT, _Traits>&)) [with _CharT = char, _Traits = std::char_traits<char>] <near match>
/usr/include/c++/4.2.1/istream:142: note:                 std::basic_istream<_CharT, _Traits>& std::basic_istream<_CharT, _Traits>::operator>>(std::ios_base& (*)(std::ios_base&)) [with _CharT = char, _Traits = std::char_traits<char>] <near match>
/usr/include/c++/4.2.1/istream:250: note:                 std::basic_istream<_CharT, _Traits>& std::basic_istream<_CharT, _Traits>::operator>>(std::basic_streambuf<_CharT, _Traits>*) [with _CharT = char, _Traits = std::char_traits<char>] <near match>
files.cc:14: error: no match for ‘operator>>’ in ‘std::cout >> text’
files.cc:16: error: conversion from ‘std::fstream’ to non-scalar type ‘std::ofstream’ requested
files.cc: In function ‘char* openfile(std::fstream, char*)’:
files.cc:21: error: no matching function for call to ‘std::basic_fstream<char, std::char_traits<char> >::open()’
/usr/include/c++/4.2.1/fstream:780: note: candidates are: void std::basic_fstream<_CharT, _Traits>::open(const char*, std::_Ios_Openmode) [with _CharT = char, _Traits = std::char_traits<char>] 
```

```
#include <iostream>
#include <fstream>

using namespace std;

char* openfile(ofstream file, char* words);

int main()
{
  fstream filetoopen;
  char* text;
  cout << "Enter the name of a file to write to." << endl;
  cin >> filetoopen;
  cout << "Now write somthing to the file." << endl;
  cin >> text;
  openfile(filetoopen, text);
}

char * openfile (fstream file, char* words)
{
  file.open();
  file << words << endl;
  file.close();

  return words;
} 
```

我对 C++ 很陌生，不知道这意味着什么。另外我不确定如何让函数返回一个数组，所以我有点猜到了。任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-14T16:03:59.053

可能你写了类似的东西：

```
fstream filetoopen;
std::cin>>filetoopen; 
```

打开`fstream`用户指定的文件。这不是它的工作方式：您必须读取包含文件名的字符串，然后使用构造函数`fstream`或其`open`方法打开文件：

```
std::string fileName;
std::getline(cin, fileName);
std::fstream fileStream(fileName.c_str()); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-14T16:05:05.810

```
fstream filetoopen;
cin >> filetoopen; 
```

这是错误的，您不能从标准输入中读取*流*。*您可以将文件名*读取为字符串，然后使用该名称*打开*文件流。

# plot - 从包含由 gnuplot 生成的绘图的 PostScript 文件中提取（近似）数据

> ID：11485208
> 
> 赞同：5
> 
> 时间：2012-07-14T16:00:56.730
> 
> 标签：plot, gnuplot, postscript

假设我有一个 PostScript 文件，其中包含使用 gnuplot 生成的绘图。但是，我没有源数据，也没有用于生成绘图的 gnuplot 命令。

您知道以某种方式从图形表示（即 PostScript 文件）中提取数据的任何方法吗？这样的代码必须从像素表示中逐字“读取图形”（特别是，我有一个平滑的线/散点 XY 图），我知道结果充其量是近似的（但这仍然是非常非常可取）。

你有这方面的经验吗？感谢您的时间！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-16T07:28:56.330

PostScript 只不过是一种描述页面的编程语言。PostScript 文件是一个纯文本文件，其中包含描述由打印机或查看器解释的页面的程序。

因此，它可以修改为编程操作，尽管是以低级方式。

我将通过以下方式处理此任务。

1.  学习 PostScript。（[参考手册](https://www.google.com/search?q=postscript%20reference%20manual&ie=utf-8&oe=utf-8&aq=t&rls=org.mozilla%3aen-US%3aofficial&client=firefox-a)会派上用场。）
2.  研究 gnuplot 的输出。gnuplot 如何输出图形？这是系统的吗？等等。
3.  解析并提取所需的信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T15:01:04.493

`g3data`，[在此处](http://www.frantz.fi/software/g3data.php/)可用，看起来很有可能。它在 Linux 上运行。

# java - 我可以使用耳朵部署数据源及其对应的驱动程序吗？

> ID：11485210
> 
> 赞同：0
> 
> 时间：2012-07-14T16:01:05.540
> 
> 标签：java, jboss, glassfish, datasource, ear

我想知道我是否可以部署一个数据源（*-ds.xml），并且它需要使用ear 文件的jdbcrealm 驱动程序到glassfish 或jboss？如果是这样，是否建议或更好地手动安装它们？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-14T16:38:12.303

你可以两者都做，但我建议你不要这样做。-ds.xml 文件在大多数情况下取决于环境。例如，测试环境将具有其他密码，然后是生产系统。如果数据库类型是每个环境都相同，您可以选择在耳朵内部署库，但要考虑到多个耳朵中的多个驱动程序库会导致更大的内存占用。

# php - mysql 通过 rank_pts 设置排名

> ID：11485216
> 
> 赞同：0
> 
> 时间：2012-07-14T16:01:32.757
> 
> 标签：php, mysql

我有一个带有列的表：

```
id 名称 rank_pts
1 尼克 0 15
2 N0NE 0 12
3 非 2 0 26

```

如何按 rank_pts 设置排名？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T15:15:48.510

查看[这个答案](https://stackoverflow.com/a/13974752/1639910)，不仅可以按 rank_pts 进行排名，还可以了解如何处理两个 rank_pts 相同的情况。用 rank_pts 替换分数

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-14T16:10:05.760

你需要一个变量。

```
SET @i= 0;
UPDATE your_table SET rank = (@i:=@i+1) ORDER BY rank_pts; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-14T16:13:44.893

```
update your_table
join (SELECT @row:= 0) r
set rank = (@row := @row + 1)
order by rank_pts desc; 
```

# javascript - 填充另一个选择框时动态添加选择框

> ID：11485219
> 
> 赞同：0
> 
> 时间：2012-07-14T16:01:55.057
> 
> 标签：javascript, html

嗨，我正在处理一个表单，其中包含一个输入文本框来填充其中的爱好，这就是我想要的，每当我在该输入框中输入值时，我都需要在其中动态添加另一个空文本框如果他们在这个新的空框中输入任何值，则可以以相同的方式添加另一个值，另一个空文本框应该添加到这个的底部。使用 javascript & php 我怎么能做到这一点？我的那个选择框的代码是

```
<div class="ma_form"><label style="width:32%;text-align: left;">hobbies:</label>
        <div class="ma_edit"><input type="text" name="c2hobby" id="c2hobby" value="" placeholder="Please enter a hobby" class="snappy aad" /></div></div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-14T19:38:23.020

我不确定这是否是你想要的，但是...

像这样创建您的选择框：

```
<select id="hobbies" style="display: none;"></select> 
```

然后将以下 JavaScript 添加到文档的头部：

```
<script type="text/javascript">
    window.onload = function(){
        document.getElementById("c2hobby").onkeyup = function(){
            document.getElementById("hobbies").style.display = (this.value.length > 0) ? "block" : "none";
        };
    };
</script> 
```

# php - 包括外部代码

> ID：11485221
> 
> 赞同：0
> 
> 时间：2012-07-14T16:02:08.987
> 
> 标签：php, javascript

我有以下代码在我的页面中显示日期/时间。当我在 index.php 中编写代码时，它运行良好。当我尝试用以下方式调用它时：

```
<script type="text/javascript" src="scripts/clock.js"> 
```

不管用。

我需要改变什么吗？谢谢你。

```
var weekdaystxt=["Sun", "Mon", "Tue", "Wed", "Thu", "Fri", "Sat"]

function showLocalTime(container, servermode, offsetMinutes, displayversion){
if (!document.getElementById || !document.getElementById(container)) return
this.container=document.getElementById(container)
this.displayversion=displayversion
var servertimestring=(servermode=="server-php")? '<? print date("D, F jS Y H:i:s", time())?>' : (servermode=="server-ssi")? '<!--#config timefmt="%B %d, %Y %H:%M:%S"--><!--#echo var="DATE_LOCAL" -->' : '<%= Now() %>'
this.localtime=this.serverdate=new Date(servertimestring)
this.localtime.setTime(this.serverdate.getTime()+offsetMinutes*60*1000) //add user offset to server time
this.updateTime()
this.updateContainer()
}

showLocalTime.prototype.updateTime=function(){
var thisobj=this
this.localtime.setSeconds(this.localtime.getSeconds()+1)
setTimeout(function(){thisobj.updateTime()}, 1000) //update time every second
}

showLocalTime.prototype.updateContainer=function(){
var thisobj=this
if (this.displayversion=="long")
this.container.innerHTML='<? print date("D, F jS Y")?>'
else{
var hour=this.localtime.getHours()
var minutes=this.localtime.getMinutes()
var seconds=this.localtime.getSeconds()
var ampm=(hour>=12)? "PM" : "AM"
var dayofweek=weekdaystxt[this.localtime.getDay()]
this.container.innerHTML=formatField(hour, 1)+":"+formatField(minutes)+":"+formatField(seconds)+" (UTC +2)"
}
setTimeout(function(){thisobj.updateContainer()}, 1000) //update container every second
}

function formatField(num, isHour){
if (typeof isHour!="undefined"){ //if this is the hour field
var hour=(num>24)? num-24 : num
return (hour==0)? 24 : hour
}
return (num<=9)? "0"+num : num//if this is minute or sec field
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-14T17:09:38.373

我不是 php 专家，但我似乎因为您的 clock.js 是 javascript 文件而不是 php 文件，所以其中的 php 代码不会被解释（不确定这是否是正确的词）。

# java - “java.security.AccessControlException：访问被拒绝（“java.net.SocketPermission”“www.google.fr:80”“connect,resolve”）”

> ID：11485223
> 
> 赞同：0
> 
> 时间：2012-07-14T16:02:23.517
> 
> 标签：java, javascript, applet

使用我的 Java 小程序，我向 www.google.fr 运行 HTTP 请求，但浏览器显示：“java.security.AccessControlException: access denied (" java.net.SocketPermission "" www.google.fr:80 "" connect, resolve ")"

我签署了我的小程序：

```
keytool -genkey -alias keyName
keytool -selfcert -alias keyName
jarsigner appletName.jar keyName 
```

有时我授权小程序执行。但有时未经许可不会出现弹出窗口。

我加载小程序：

```
function loadApplet() {
    console.log('loadApplet [start]');
    $('#applet').html('<applet name="requestApplet" archive="applet.jar" code="GoogleRequest.class" height="10" width="10"></applet>');
    console.log(document.requestApplet.methodOfApplet()); // <-- Exception
    console.log('loadApplet [finish]');
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-14T16:17:01.383

你有什么JRE？我记得一些 1.6 版本（如果我没记错的话，0.22）有一个关于网络的“安全升级”，然后这种奇怪的事情开始发生。

这样做的原因是那些对您的 javascript 公开的 Applet 函数不能直接调用 JRE 的网络功能。您必须以某种方式将 Javascript 与 applet 内的网络调用分离。

我用一种“消息总线”实现了这一点。Javascript调用Applet公共函数，将“消息”放到内部总线，另一个applet读取它并进行网络调用。有效。

# php - 一页上的许多图像（html，用 php 生成），通常是图像的一部分未加载

> ID：11485224
> 
> 赞同：0
> 
> 时间：2012-07-14T16:02:37.853
> 
> 标签：php, html, image, gd, loading

我有一个很长的 html 页面，其中包含许多图像（用于打印所有属性图像），它是由 php 生成的。部分图片不经常加载，我只看到标题。当我查看源代码时 - 所有路径都是正确的！

见截图：http: [//imm.io/wtuG](http://imm.io/wtuG)

如果我重新启动页面（ctrl + R 和 Ctrl + F5） - 同样的问题出现在页面上。
我尝试使用`ini_set("max_execution_time", "5000")`- 没有帮助。

显示所有不在循环中的图像，只是`foreach()`循环中的图像不会总是加载。

你能帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T17:04:14.010

你使用了**header('Cache-Control: no-cache');** 和**冲洗（）；**?

# c# - C# 二进制编写器自定义

> ID：11485227
> 
> 赞同：4
> 
> 时间：2012-07-14T16:03:15.297
> 
> 标签：c#, c++, binary, writer

有没有办法自定义二进制编写器写入文件的方式，以便我可以从 C++ 程序中读取文件？

例如：

```
myBinaryWriter.Write(myInt);
myBinaryWriter.Write(myBool); 
```

在 C++ 中：

```
fread(&myInt, 1, sizeof(int), fileHandle);
fread(&myBool, 1, sizeof(bool), fileHandle); 
```

编辑：据我所见，如果字符串的长度足够小以适合一个字节，那么这就是它的写入方式，如果我想用 C++ 将它读回，那就不好了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T19:03:03.193

如果要保证二进制兼容性，c# 中最简单的方法可能是放弃二进制编写器，而只使用流自己编写字节。这样您就可以完全控制输出数据

另一种方法是创建一个可以使用 c++/cli 写入数据的程序集，这样您就可以从托管代码中获得与 c++ 的直接兼容性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-14T19:47:27.583

您可以选择一些选项：

*   自己一个字节一个字节地写。这可能是最糟糕的选择。它需要在双方（序列化和反序列化方面）做更多的工作。
*   使用一些跨平台的序列化器，比如 Protobuf。它具有适用于几乎所有平台的端口，包括 C# (protobuf-net) 和 C++。而且它也很容易使用并且具有非常好的性能。
*   您可以使用 Struct 并使用 Marshal.PtrToStructure 将其转换为字节数组（如果您需要其他方式，可以使用 Marshal.StructureToPtr）。互联网上有很多例子。如果您可以使用托管 CPP，则可以使用相同的对象，这样您就可以在一个地方更改结构，并且在两个地方都会更改。
*   如果您使用托管 CPP，则可以使用内置序列化程序，例如 BinaryFormatter...

# php - 在 PHP 中检测 Mac 上的 Chrome 的可靠方法？

> ID：11485230
> 
> 赞同：0
> 
> 时间：2012-07-14T16:03:27.763
> 
> 标签：php, browser-detection

正如标题所说，有没有一种可靠的方法来检测用户是否使用 PHP 在 Mac 上使用 Chrome 访问我的页面？

我有一个错误，只有在 Mac 上使用 Chrome 时才会显示，在我解决它之前，我希望有一个弹出窗口来推荐用户使用不同的浏览器。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T16:06:09.650

使用 $_SERVER['HTTP_USER_AGENT'] 来查找用户的用户代理和一个函数来检查它是否在字符串中。

```
//The following will find out whether the user is using a Mac, obviously you can change this by echoing the user agent to find out what you need to search for.
$browser = strpos($_SERVER['HTTP_USER_AGENT'], "Chrome");
$os = strpos($_SERVER['HTTP_USER_AGENT'], "Macintosh; Intel Mac OS X");

if($browser !== false && $os !== false) {
  //do stuff if on a mac with Chrome
} 
```

这适用于任何类型的 Mac OS X 软件和任何版本的 Chrome。如果您想进一步缩小结果范围，您可以使用：

```
if($_SERVER['HTTP_USER_AGENT'] == "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_7_4) AppleWebKit/536.11 (KHTML, like Gecko) Chrome/20.0.1132.57 Safari/536.11" ) {
  //do stuff here
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-14T16:07:51.160

如果您发布遇到问题的代码而不是创建一个hacky修复程序会更好。

但是，您可以使用`$_SERVER['HTTP_USER_AGENT']`来检查用户的浏览器/操作系统。

为了提供帮助，您可能会期望`Mozilla/5.0 (Macintosh; Intel Mac OS X 10_7_4) AppleWebKit/536.11 (KHTML, like Gecko) Chrome/20.0.1132.57 Safari/536.11`Chrome 上的 Mac 用户提供类似的东西。

**笔记**

用户代理并不总是设置，所以`isset`首先使用以避免出现通知。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-14T16:24:33.640

我知道您正在寻找用于查找浏览器的 PHP 解决方案，但由于您使用特定浏览器最有可能遇到的问题是客户端问题，因此无需从服务器端检测它。

所以这里有一个使用 javascript 的解决方案，如果你得到了你期望的匹配，你可以隐藏正文，或者显示一个弹出窗口，或者将它发送到你的服务器，设置一个 cookie，或者任何你认为适合“修复”你的问题的东西（尽管您应该考虑真正解决问题...）

在此处查找[来源](http://www.quirksmode.org/js/detect.html)：

```
function that_is_called_on_load() {
    if (BrowserDetect.browser == "Chrome" && BrowserDetect.OS == "Mac") {
        alert("You are using mac, sorry.");
        window.location = "mac_chrome.php";
    }
} 
```

这是一个非常“肮脏”的解决方案，它***可能***比服务器端的解决方案更准确/可靠。

# c++ - Xcode 错误 - 没有这样的文件或目录

> ID：11485233
> 
> 赞同：0
> 
> 时间：2012-07-14T16:03:36.943
> 
> 标签：c++, xcode

我正在尝试构建一个我的项目，其中包括[Carbon](http://code.google.com/p/fuzzy-lite/) C++ 应用程序中的模糊 C++ 库。但是，编译器会为我在源代码中包含的每个模糊精简版库抛出一个错误。我试图在我的目标应用程序构建信息中包含**标题搜索路径**和**库搜索路径**，但它不起作用。我已经使用双引号标记包含头文件，就像以下示例一样：

> #include “fuzzylite/test.h”

如何在我的项目中包含这样的库并让它正常工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-25T13:03:08.560

很简单，你需要清理路径：#include "fuzzylite/test.h" for ALL #include，像这样：#include "test.h"

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-18T09:39:28.850

从 3.1 版开始，您应该使用`#include fl/Headers.h`.

如果您遇到问题，我强烈建议您在[http://www.fuzzylite.com](http://www.fuzzylite.com)的论坛中报告问题，我和其他人将很乐意为您提供帮助。

# c++ - 协助 C++ 程序分析

> ID：11485237
> 
> 赞同：2
> 
> 时间：2012-07-14T16:03:49.837
> 
> 标签：c++, exception, profiling, runtime

我真的很想知道我的应用程序中不同的例程需要多少时间。我正在使用 GCC 3.4.2 和 Dev-C++ IDE 和 gprof 进行分析。这是结果文件的开头：

扁平型材：

```
Each sample counts as 0.01 seconds.
  %   cumulative   self              self     total           
 time   seconds   seconds    calls   s/call   s/call  name    
  7.48      0.89     0.89                             __gnu_cxx::__exchange_and_add(int volatile*, int)
  7.39      1.77     0.88                             _Unwind_SjLj_Register
  6.22      2.51     0.74                             _Unwind_SjLj_Unregister
  3.70      2.95     0.44  2425048     0.00     0.00  rt::wctree_node<std::vector<OPT_Inst, std::allocator<OPT_Inst> > >::get(std::string, bool&)
  3.28      3.34     0.39                             std::string::operator[](unsigned int)
  3.11      3.71     0.37                             std::basic_string<char, std::char_traits<char>, std::allocator<char> >::~basic_string()
  2.86      4.05     0.34                             std::string::_M_mutate(unsigned int, unsigned int, unsigned int)
  2.69      4.37     0.32                             __gnu_cxx::__atomic_add(int volatile*, int)
  2.61      4.68     0.31    38655     0.00     0.00  SPSBase::containerBoxFillSet(double, double, double, double) 
```

有人可以向我解释除 rt::wctree 之外的第一个（显然不是我制作的），它们来自哪里以及他们在程序中的目标是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T16:17:08.580

这两个`_Unwind`在我看来就像异常处理。

`_M_mutate`似乎表明您正在复制字符串（libstdc++ 实现的写入时复制行为的实现细节），这似乎通过配置文件中字符串析构函数的存在来强调。

我猜原子操作也来自字符串 COW 行为，因为内部缓冲区是引用计数的。

因此，您的大部分时间似乎都花在了复制`std::string`上。

**编辑**：好的，现在看看你的`rt::wctree<>::get(std::string, bool&)`. 参数是通过副本传递的。2425048 次来电，2425048 份。你为什么不在这里试试`const&`？

# python - 从 PyQt 小部件项目中设置和获取“数据”？

> ID：11485243
> 
> 赞同：6
> 
> 时间：2012-07-14T16:04:58.960
> 
> 标签：python, pyqt, pyqt4

这与其说是一个问题，不如说是一个解释的请求。我正在关注 Mark Summerfield 的“使用 Python 和 Qt 进行快速 GUI 编程”，我一定错过了一些东西，因为我无法理解以下机制来将我正在使用的真正的“instance_item”链接在一起并且充满了各种类型数据，以及一个“widget_item”，为方便起见，它在 QTreeWidget 模型中表示它。

环境：

```
widget_item.setData(0, Qt.UserRole, QVariant(long(id(instance_item)))) 
```

得到

```
widget_item.data(0, Qt.UserRole).toLongLong()[0] 
```

像这样的东西`toLongLong()`根本不像“Pythonic”，为什么我们要调用 Qt.UserRole 和 QVariant？“setData”和“data”函数是 Qt 框架的一部分，还是更通用的 Python 命令？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-20T03:03:35.230

至少有 2 个更好的解决方案。为了增加pythonicity：

1) 你不需要*太多*的数据类型打包

```
widget_item.setData(0, Qt.UserRole, QVariant(instance_item))
widget_item.data(0, Qt.UserRole).toPyObject() 
```

2) PyQt4 有一个替代 API，其中 QVariant 被取消，并且从 QVariant 的转换是透明地发生的。要启用它，您需要在任何 PyQt4 导入语句*之前添加以下行：*

```
import sip
sip.setapi('QVariant', 2) 
```

然后，您的代码如下所示：

```
widget_item.setData(0, Qt.UserRole, instance_item)
widget_item.data(0, Qt.UserRole)  # original python object 
```

请注意，还有一个选项`sip.setapi('QString', 2)`可以取消 QString，您可以改用 unicode。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-14T16:21:55.703

所有这些方法——setData()、data()、toLongLong() 都是 Qt 的一部分，最初是为了在 C++ 中使用，它们更有意义。我不太确定作者在这里试图做什么，但如果你发现自己在做一些非常不符合 Python 的事情，可能有更好的方法：

```
## The setter:
widget_item.instance_item = instance_item

## The getter:
instance_item = widget_item.instance_item 
```

当然，Qt 文档不推荐这样做，因为 C++ 中没有动态属性分配。在一些非常具体的情况下，您可能不得不处理 QVariant 和其他类似的废话（例如，当通过 QtSQL 处理数据库时），但它们非常罕见。

# wpf - 在 Xaml wpf 中使用当前日期填充 Telerik RadDatePicker

> ID：11485249
> 
> 赞同：1
> 
> 时间：2012-07-14T16:05:36.193
> 
> 标签：wpf, xaml, telerik, raddatepicker

如何使用当前日期显示 RadDatePicker 加载时的 displaydate 或 selecteddate

```
 xmlns:sys="clr-namespace:System;assembly=mscorlib"

               <telerik:RadDatePicker x:Name="datepicker1" Grid.Column="1"
                    Grid.Row="1"  Margin="0,2" 
                    IsReadOnly="False"
                    AllowDrop="True"
                    SelectedDate="{x:Static sys:DateTime.Now}" DisplayDateStart="{x:Static sys:DateTime.Now}"
                    SelectedValue="{Binding  Path=SelectedDate,Mode=OneWay}"
                    /> 
```

默认情况下，RaddatePicker 显示 1/1/0001，如何显示当前日期？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-14T17:42:32.843

我已经尝试过了，它对我很好，我有简单的 DatePicker

```
<DatePicker x:Name="datepicker1" Grid.Column="1"   
                Grid.Row="1"  Margin="0,2"                       
                AllowDrop="True"                
                SelectedDate="{x:Static sys:DateTime.Now}"  
                /> 
```

我希望这个能帮上忙

# php - PHP - MYSQLI - 准备好的语句 - 循环结果以获取总计值？

> ID：11485250
> 
> 赞同：0
> 
> 时间：2012-07-14T16:05:37.503
> 
> 标签：php, prepared-statement

我正在尝试对购物车进行编码，更具体地说，是对已添加到购物车中的商品进行总计。

我有一些代码应该将产品价格添加到“订单总额”变量中。

它检查会话变量中是否存在值，然后根据存储在 mysql 表中的结果行 id 检查这些“id”。对于会话值中的每个 id，相应的价格将添加到总价中。

如果该项目存在特价，则该价格成为价格。

但是，现在实际发生的情况是，当我将一件商品添加到购物车时。总起来没问题。当我将两件商品添加到购物车时，我只看到添加到购物车的第一件商品的总价值。

由于这是一些旧代码的转换（到准备好的语句），我假设在某个地方我错过了这个的一些关键方面......像`mysqli_data_seek`.

由于我目前对准备好的语句的了解并不多，因此我可能在循环出现的方式上犯了错误。

如果有人可以通过这个并发现我编码的问题，或者提供一些关于我如何以更好的方式完成这项任务的信息......这将非常感激！

谢谢

这是代码：

```
if (isset($_SESSION['orderItem']) && count($_SESSION['orderItem']) > 0)
{
    $ordersItem = sanitize($_SESSION['orderItem']);
    $ordersItemJoined = join($ordersItem, ',');
    if ($stmt = $link->prepare("
        SELECT i.id, i.price, s.specialPrice, s.start, s.end 
        FROM items i
        LEFT JOIN item_specials s
        ON s.id = i.id
        WHERE i.id 
        IN (?)
    "))
    {   
        $stmt->bind_param("i", $ordersItemJoined);
        $stmt->execute();
        $stmt->bind_result($itemsId, $itemsPrice, $itemsSpecialPrice, $itemsSpecialStart, $itemsSpecialEnd);

        while ($stmt->fetch())
        {
            // Apply sale price if it exists
            if ($itemsSpecialPrice > 0)
            {
                if ( ($itemsSpecialStart < date('Y-m-d H:i:s')) && ($itemsSpecialEnd > date('Y-m-d H:i:s')) )
                {
                    $itemsPrice = $itemsSpecialPrice;
                }
            }

            $itemsQuantity = sanitize($_SESSION['itemQuantity'][$itemsId]);
            foreach ($ordersItem as $itemToTotal)
            {
                if ($itemToTotal == $itemsId) 
                {
                    $cartTotal += $itemsPrice*$itemsQuantity;
                }
            }
        }
        $stmt->close();
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T17:07:46.643

把它放在这里，因为它在评论中太丑陋了。请注意值周围的引号`in()`- 这迫使它们成为一个整体字符串，而不是要再次检查的单个值。

```
mysql> create table foo (bar int);
Query OK, 0 rows affected (0.11 sec)

mysql> insert into foo (bar) values (1);
Query OK, 1 row affected (0.05 sec)

mysql> select * from foo where bar in ('1,2');
+------+
| bar  |
+------+
|    1 |
+------+
1 row in set, 1 warning (0.02 sec)

mysql> select * from foo where bar in ('2,1');
Empty set, 1 warning (0.00 sec)

mysql> 
```

所以，是的，您得到了匹配，因为该字段中的值恰好与您放入占位符的 CSV 中的第一个值相匹配。MySQL 与任何其他脚本语言在转换字符串-> 整数方面具有几乎相同的语义——从字符串开头到第一个非数字的所有数字都被视为要转换的数字，其余的被丢弃。

# android - setImageResource 的低执行优先级

> ID：11485252
> 
> 赞同：0
> 
> 时间：2012-07-14T16:05:55.833
> 
> 标签：android, handler

我有以下代码：

```
final ImageButton bgreen = (ImageButton) findViewById(R.id.imageButton1c);
bgreen.setImageResource(R.drawable.xgp);
gHandler.postDelayed(greenRunnable, delay); // this reverses the above two lines in a second 
```

但是，我发现在完成之前和之后添加的所有其他命令之前，图像更改实际上不会发生，然后它有一个空队列并正在等待 onclick 侦听器。为什么是这样？有没有更好的办法？即使我使用了处理程序/可运行组合（我相信这是一个完全不同的线程？）来延迟撤消，它最终还是按顺序发生。

我可以使用不同的方法，例如：

```
ButtonName.setImageResource(R.drawable.ImageName); 
```

那可能表现更好？

我需要将点击作为演示（即没有用户交互），这就是问题所在。即我不能简单地在 XML 中执行此操作，例如：

```
<item android:state_pressed="true"
android:drawable="@drawable/login_selected" /> <!-- pressed --> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T07:35:33.753

这似乎与使用 sleep 命令有关。巧妙地使用 Handler/Runnable 组合在这里有所帮助。

# java - 如何在 java 中打开 .txt 的应用程序（无论操作系统如何）？

> ID：11485255
> 
> 赞同：2
> 
> 时间：2012-07-14T16:06:24.883
> 
> 标签：java, text, command-line, operating-system

我应该在我的 java 应用程序上打开一个 .txt 文件，所以我已经搜索了一种方法来做到这一点，但我发现只是对操作系统的 java 调用，编写控制台命令。有没有一种方法可以独立于用户的操作系统打开 .txt 文件？请注意，我想打开一个读取 .txt 的应用程序，而不仅仅是它的内容！我想知道是否有一种方法可以调用默认应用程序来读取.txt，而无需在java的控制台上写入例如“notepad myTxt.txt”:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-14T16:28:08.457

您可以使用`Desktop.open()`

来自 Javadocs：

> *启动关联的应用程序以打开文件。*

[http://docs.oracle.com/javase/6/docs/api/java/awt/Desktop.html#open(java.io.File](http://docs.oracle.com/javase/6/docs/api/java/awt/Desktop.html#open(java.io.File) )

另一种选择（因为您提到“编辑”）也可能是`Desktop.edit()`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-14T16:11:14.700

您很可能希望使用： `FileReader`以及`BufferedReader`在 Java 支持的任何平台上工作的类。事实上，因为 Java 在虚拟机上运行，​​简单的 IO 本质上是平台的，独立于操作系统的。有关想法，请参阅[此参考](http://www.homeandlearn.co.uk/java/read_a_textfile_in_java.html)。

# c# - 当服务器和请求在本地时，侦听 SMTP 有效，但如果从远程服务器发出请求，则失败

> ID：11485259
> 
> 赞同：2
> 
> 时间：2012-07-14T16:07:20.867
> 
> 标签：c#, php, smtp

我正在做一个我自己的 SMTP 服务器的项目。这非常有效，但有一点问题。

当我在我的开发机器上运行我的 SMTP 服务器并有一个 php 脚本将电子邮件或远程登录从我的本地计算机发送到本地 smtp 服务器时，它工作正常，我的程序接收到 SMTP 消息并发送相关响应。

然后我将程序复制到服务器上并运行我的 smtp 服务器，当我从服务器远程登录到本地 smtp 服务器`telnet localhost 25`时，它可以工作。

如果我然后尝试通过同一网络上的远程 PC 连接到我的 smtp 服务器并尝试远程登录到它，我会得到`Connecting to 192.168.1.74 (this is the address of the server)...could not open connection to the host, on port 25: connect failed`，如果我运行 php 脚本`http://192.168.1.74/send-mail.php`它会失败。

在 smtp 服务器代码上，当我绑定套接字时，我尝试绑定到端口 25 上的 127.0.0.1 和 192.168.1.74，但这没有区别。

为什么这不能从与服务器建立连接的远程 PC 上工作，但在本地却可以正常工作。

感谢您的任何帮助，您可以提供。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T16:12:11.813

有几个人在这里暗中刺伤，但是：

1.  服务器是否运行了防火墙？如果是这样，您是否对端口 25 进行了适当的例外处理？

2.  远程 PC*真的*在同一个网络上（即同一个子网）吗？如果您之间有路由器，则必须适当地转发端口。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-14T20:32:04.673

发现问题出在哪里，我很笨，当我将网卡设置为静态时，我忘记添加默认网关。现在我已经完成了它现在按预期工作。

感谢大家的帮助和建议。

# wcf - 如何将一项操作更改为 ConcurrencyMode=single？

> ID：11485260
> 
> 赞同：0
> 
> 时间：2012-07-14T16:07:23.750
> 
> 标签：wcf

**这是我的服务：**

```
InstanceContextMode = InstanceContextMode.Single,
ConcurrencyMode = ConcurrencyMode.Multiple 
```

我有一种方法可以通过在服务计算机上搜索某些内容来返回 ID。此方法不能像 ConcurrencyMode.Multiple 一样。我该怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T16:14:53.227

如果我正确理解您的问题，您需要一个使用的服务，`ConcurrencyMode = ConcurrencyMode.Multiple`但您还需要一个单线程的方法。

只需在服务方法中使用锁定

```
private object getIdLock = new object();
public int GetId()
{
    lock(getIdLock)
    {
        // do your stuff in here
    }
} 
```

# c++ - 从 MSVC 项目生成 CMAKE？

> ID：11485261
> 
> 赞同：1
> 
> 时间：2012-07-14T16:07:28.593
> 
> 标签：c++, visual-c++, cmake

> **可能重复：**
> [vcxproj 到 cmake](https://stackoverflow.com/questions/6649606/vcxproj-to-cmake)

有没有办法为 MSVC 解决方案生成 CMakeLists.txt？

我正在做一个 XPlatform 项目。现在一切都在 MSVC 中，我准备在其他平台上进行测试。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-14T16:30:39.643

[不久前在cmake 邮件列表](http://www.cmake.org/pipermail/cmake/2007-June/014438.html)上进行了一些努力，但结果一无所获（我相信）。如果您要跨平台，那么创建自己的 cmakelists.txt 并通过从中创建您的 Visual Studio 解决方案来检查它的努力将是值得的，因为您将处于增加平台支持的有利位置。

我想你会有一些问题可以通过 cmake（查找包/库等）更容易处理，最好通过手动创建 cmakelists.txt 来解决。它还允许您创建源代码构建，通过您的项目分发 cmakelists.txt 以提高可读性（包括 subdir 等）。

如此简短的答案可能不是您想要的，但是如果您低头并创建基本的 cmakelists.txt，它将在您进一步研究此转换器之前完成。作为一种快捷方式（不是每个人都推荐 ;-) ）您可以使用 GLOB 快速抓取所有文件，然后使用 LIST REMOVE_ITEM 等来清除它们。这将加快 cmake 项目的创建速度并让您抢占先机。

编辑：我没有遇到上面链接的工具，但确实有自己创建它的相同结论。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-14T16:26:37.267

我自己没有尝试过，但这似乎可以完成工作：

[http://sourceforge.net/projects/vcproj2cmake/](http://sourceforge.net/projects/vcproj2cmake/)

当然，手动调整总是会得到最好的结果。

# javascript - JSON 和 javascript

> ID：11485262
> 
> 赞同：1
> 
> 时间：2012-07-14T16:07:33.103
> 
> 标签：javascript, json

你好，我在 json 中有一个看起来像这样的响应

```
{
    "el": {
        "reviewed_percentage": "0%",
        "completed": "16%",
        "untranslated_words": 8,
        "last_commiter": "zaabalonso",
        "reviewed": 0,
        "translated_entities": 1,
        "translated_words": 1,
        "last_update": "2012-07-06 13:08:10",
        "untranslated_entities": 5
    },
    "en": {
        "reviewed_percentage": "0%",
        "completed": "100%",
        "untranslated_words": 0,
        "last_commiter": "zaabalonso",
        "reviewed": 0,
        "translated_entities": 6,
        "translated_words": 9,
        "last_update": "2012-07-06 12:28:48",
        "untranslated_entities": 0
    },
    "gl_ES": {
        "reviewed_percentage": "0%",
        "completed": "33%",
        "untranslated_words": 7,
        "last_commiter": "zaabalonso",
        "reviewed": 0,
        "translated_entities": 2,
        "translated_words": 2,
        "last_update": "2012-07-06 13:06:46",
        "untranslated_entities": 4
    }
} 
```

我怎样才能像使用javascript那样转换它

```
[{
            "language"="el",
            "reviewed_percentage": "0%",
            "completed": "16%",
            "untranslated_words": 8,
            "last_commiter": "zaabalonso",
            "reviewed": 0,
            "translated_entities": 1,
            "translated_words": 1,
            "last_update": "2012-07-06 13:08:10",
            "untranslated_entities": 5},
........etc.
] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T16:12:51.437

您可以遍历 JSON 数据并使用您想要的格式创建一组新数据，例如使用下面的伪代码（假设 oldJSON 被分配为发布的 JSON 响应）

```
var newData = [];
for ( var s in oldJSON )
{
    var data = oldJSON[s];
    data.language = s;
    newData.push(data);
} 
```

# php - 访问类常量槽属性不起作用

> ID：11485270
> 
> 赞同：6
> 
> 时间：2012-07-14T16:08:00.577
> 
> 标签：php, class, constants

例子：

```
class LOL{
  const
    FOO = 1;
}

$x = new LOL;
$arr = array('x' => $x);

echo $x::FOO; // works
echo $arr['x']::FOO; // works too 
```

但是如果我让我的类实例成为一个属性，我就不能再访问这个常量了：

```
class WWW{
  protected $lol;

  public function __construct($lol){
    $this->lol= $lol;    
  }

  public function doSMth(){
    echo $this->lol::FOO; // fail. parse error.. wtf
  }
}

$w = new WWW;
$w->doSMth(); 
```

:(

我知道我可以做到`echo LOL::FOO`，但是如果类名未知怎么办？从那个位置我只能访问那个对象/属性，我真的不希望那个 WWW 类“知道”其他类及其名称。它应该只适用于给定的对象

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-02-09T14:22:26.637

您可以通过将`lol`属性分配给局部变量来更轻松地完成此操作，如下所示：

```
public function doSMth(){
    $lol = $this->lol;
    echo $lol::FOO;
} 
```

这仍然很愚蠢，但可以避免使用反射。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-14T16:14:14.447

如果类名未知，可以使用[ReflectionClass](http://php.net/reflectionclass)获取常量。请注意，您必须使用 PHP 5 或更高版本。

例子：

```
$c = new ReflectionClass($this->lol);
echo $c->getConstant('FOO'); // 1 
```

从 PHP 5.3.0 开始，您可以通过包含类名的变量访问常量：

```
$name = get_class($this->lol);
echo $name::FOO; // 1 
```

有关详细信息，请参阅[范围解析运算符 - PHP](http://php.net/manual/en/language.oop5.paamayim-nekudotayim.php)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-08-20T22:25:53.157

```
$lol = &$this->lol;
echo $lol::FOO;
..
unset($lol); 
```

# authentication - Google OAuth 2 授权 - 错误：redirect_uri_mismatch

> ID：11485271
> 
> 赞同：494
> 
> 时间：2012-07-14T16:08:02.390
> 
> 标签：authentication, oauth-2.0, google-signin

在网站[https://code.google.com/apis/console](https://code.google.com/apis/console)我已经注册了我的应用程序，为我的应用程序设置了生成的**客户端 ID：**和**客户端密码**，并尝试使用 Google 登录。不幸的是，我收到了错误消息：

```
Error: redirect_uri_mismatch
The redirect URI in the request: http://127.0.0.1:3000/auth/google_oauth2/callback did not match a registered redirect URI

scope=https://www.googleapis.com/auth/userinfo.profile https://www.googleapis.com/auth/userinfo.email
response_type=code
redirect_uri=http://127.0.0.1:3000/auth/google_oauth2/callback
access_type=offline
approval_prompt=force
client_id=generated_id 
```

此消息是什么意思，我该如何解决？我使用 gem **omniauth-google-oauth2**。

* * *

## 回答 #1

> 赞同：488
> 
> 时间：2012-07-14T16:57:15.940

重定向 URI（返回响应的地方）必须在 API 控制台中注册，错误表明您没有这样做，或者没有正确完成。

转到项目的控制台并查看 API 访问。您应该在那里看到您的`client ID`&`client secret`以及重定向 URI 列表。如果未列出所需的 URI，请单击编辑设置并将 URI 添加到列表中。

编辑：（来自下面高度评价的评论）请注意，更新 google api 控制台和当前的更改可能需要一些时间。一般只有几分钟，但有时似乎更长。

* * *

## 回答 #2

> 赞同：157
> 
> 时间：2015-12-25T11:19:43.937

就我而言，它是`www`和`non-www`URL。实际站点具有`www`URL，而Google Developer Console 中的**授权重定向 URI**`non-www`具有URL。因此，重定向 URI 不匹配。我通过`Authorized Redirect URIs`在 Google Developer Console 中更新为`www`URL 解决了这个问题。

其他常见的 URI 不匹配是：

*   `http://`在授权重定向 URI 中使用并`https://`作为实际 URL，反之亦然
*   在授权重定向 URI 中使用尾部斜杠( )`http://example.com/`而不是使用尾部斜杠 ( `http://example.com`) 作为实际 URL，反之亦然

以下是 Google Developer Console 的分步屏幕截图，以便那些难以找到开发人员控制台页面以更新重定向 URI 的人有所帮助。

> 1.  转到[https://console.developers.google.com](https://console.developers.google.com)
>     
>     
> 2.  选择您的项目

[![选择您的项目](../Images/90fcc1960b5b995d31265654b4c9e466.png)](https://i.stack.imgur.com/RJfZi.png)

> 3.  点击菜单图标

[![点击菜单图标](../Images/2685c71f8b819ea8fb068d6d6ac4262e.png)](https://i.stack.imgur.com/xPR5j.png)

> 4.  点击`API Manager`菜单

[![选择 API 管理器菜单](../Images/22752967e7ef6ccf50694c0abce91323.png)](https://i.stack.imgur.com/VQ9la.png)

> 5.  点击`Credentials`菜单。在 下`OAuth 2.0 Client IDs`，您会找到您的客户名称。就我而言，它是`Web Client 1`. 单击它，将出现一个弹出窗口，您可以在其中编辑**Authorized Javascript Origin**和**Authorized redirect URIs**。

[![选择凭证菜单](../Images/4a7abbd09cca0d1457f532197d5986c4.png)](https://i.stack.imgur.com/X6rRh.png)

**注意**：授权 URI 默认包含所有 localhost 链接，任何实时版本都需要包含完整路径，而不仅仅是域，例如[https://example.com/path/to/oauth/url](https://example.com/path/to/oauth/url)

这是关于[创建项目和客户 ID](https://developers.google.com/identity/sign-in/web/devconsole-project)的 Google 文章。

* * *

## 回答 #3

> 赞同：111
> 
> 时间：2013-09-24T19:22:28.100

如果您使用的是**Google+ javascript button**，那么您必须使用`postmessage`而不是实际的 URI。由于谷歌的文档出于某种原因没有明确说明，我几乎花了一整天的时间才弄清楚这一点。

* * *

## 回答 #4

> 赞同：85
> 
> 时间：2018-01-05T20:51:44.877

在您在客户端检索**授权代码**的任何流程中，例如**[`GoogleAuth.grantOfflineAccess()`API](https://developers.google.com/identity/sign-in/web/reference#googleauthgrantofflineaccessoptions)**，现在您想要将代码传递给您的服务器，兑换它，并存储访问和刷新令牌，那么您必须使用文字字符串`postmessage`而不是redirect_uri。

例如，在[Ruby 文档](https://developers.google.com/api-client-library/ruby/auth/web-app)中的代码片段上构建：

```
client_secrets = Google::APIClient::ClientSecrets.load('client_secrets.json')
auth_client = client_secrets.to_authorization
auth_client.update!(
  :scope => 'profile https://www.googleapis.com/auth/drive.metadata.readonly',
  :redirect_uri => 'postmessage' # <---- HERE
)

# Inject user's auth_code here:
auth_client.code = "4/lRCuOXzLMIzqrG4XU9RmWw8k1n3jvUgsI790Hk1s3FI"
tokens = auth_client.fetch_access_token!
# { "access_token"=>..., "expires_in"=>3587, "id_token"=>..., "refresh_token"=>..., "token_type"=>"Bearer"} 
```

唯一要提及的 Google 文档`postmessage`是这个[旧的 Google+ 登录文档](https://developers.google.com/+/sign-in-faq)。这是 G+ 关闭后的屏幕截图和[存档链接](https://web.archive.org/web/20150317184124/https://developers.google.com/+/sign-in-faq)，此链接可能会消失：

[![旧版 Google+ API 文档](../Images/ee389da10701068a47d447a5568e71b1.png)](https://i.stack.imgur.com/rFKLj.png)

[Offline Access 的文档页面](https://developers.google.com/identity/sign-in/web/server-side-flow)没有提及这一点是绝对不可原谅的。*#面部手掌*

* * *

## 回答 #5

> 赞同：55
> 
> 时间：2014-10-19T06:59:21.660

对于我的网络应用程序，我通过编写纠正了我的错误

```
instead of : http://localhost:11472/authorize/
type :      http://localhost/authorize/ 
```

* * *

## 回答 #6

> 赞同：37
> 
> 时间：2014-02-12T13:48:40.950

确保检查协议“http://”或“https://”，因为谷歌也检查协议。最好在列表中添加两个 URL。

* * *

## 回答 #7

> 赞同：12
> 
> 时间：2015-06-03T15:16:11.783

这似乎很奇怪和烦人，没有“一个”解决方案。对我来说[http://localhost:8000](http://localhost:8000)没有成功，但[http://localhost:8000/](http://localhost:8000/)成功了。

* * *

## 回答 #8

> 赞同：10
> 
> 时间：2019-03-06T03:46:44.970

这个答案与[这个 Mike's answer](https://stackoverflow.com/a/18990247/9814131)和[Jeff's answer](https://stackoverflow.com/a/48121098/9814131)相同，都设置`redirect_uri`在`postmessage`客户端。我想添加更多关于服务器端的信息，以及适用于此配置的特殊情况。

# 技术栈

## 后端

*   **蟒蛇 3.6**
*   **姜戈 1.11**
*   **Django REST Framework 3.9**：服务器作为 API，不渲染模板，在其他地方没有做太多。
*   [**Django REST 框架 JWT**](https://github.com/GetBlimp/django-rest-framework-jwt) 1.11
*   [**Django REST 社交认证**](https://github.com/st4lk/django-rest-social-auth)< 2.1

## 前端

*   **反应**：16.8.3，`create-react-app`版本 2.1.5
*   [**反应谷歌登录**](https://github.com/anthonyjgrove/react-google-login)：5.0.2

# “代码”流程（专门针对 Google OAuth2）

摘要： React --> 请求社交身份验证“代码”-> 请求 jwt 令牌以根据您自己的后端服务器/数据库获取“登录”状态。

1.  前端（React）使用“Google 登录按钮”`responseType="code"`来获取授权码。（它不是令牌，不是访问令牌！）
    *   谷歌登录按钮来自`react-google-login`上面提到的。
    *   单击该按钮将弹出一个弹出窗口供用户选择帐户。用户选择一个并关闭窗口后，您将从按钮的回调函数中获取代码。
2.  前端将此发送到后端服务器的 JWT 端点。
    *   POST 请求，带有**`{ "provider": "google-oauth2", "code": "your retrieved code here", "redirect_uri": "postmessage" }`**
3.  对于我的 Django 服务器，我使用 Django REST Framework JWT + Django REST Social Auth。Django 从前端接收代码，用谷歌的服务验证它（为你完成）。验证后，它将 JWT（令牌）发送回前端。前端现在可以获取令牌并将其存储在某处。
    *   **Django 中的所有 和都是`REST_SOCIAL_OAUTH_ABSOLUTE_REDIRECT_URI`不必要的`REST_SOCIAL_DOMAIN_FROM_ORIGIN``REST_SOCIAL_OAUTH_REDIRECT_URI``settings.py`**。（它们是 Django REST Social Auth 使用的常量）简而言之，**您不必在 Django 中设置与重定向 url 相关的任何内容**。在`"redirect_uri": "postmessage"`React 前端就足够了。这是有道理的，因为你必须在你身边做的社交身份验证工作都是前端的 Ajax 风格的 POST 请求，不提交任何表单，所以默认情况下实际上不会发生重定向。这就是为什么如果您使用代码 + JWT 流程，重定向 url 将变得无用，并且服务器端重定向 url 设置没有任何效果。
4.  Django REST Social Auth 处理帐户创建。这意味着它将检查 google 帐户电子邮件/姓氏，并查看它是否与数据库中的任何帐户匹配。如果没有，它会为您创建一个，使用确切的电子邮件和名字。但是，`youremailprefix717e248c5b924d60`如果您的电子邮件是`youremailprefix@example.com`. 它附加一些随机字符串以创建唯一的用户名。这是默认行为，我相信您可以自定义它并随意深入研究他们的文档。
5.  前端存储该令牌，并且当它必须对后端服务器执行 CRUD 时，尤其是创建/删除/更新，如果您在`Authorization`标头中附加令牌并向后端发送请求，Django 后端现在会将其识别为登录，即经过身份验证用户。当然，如果您的令牌过期，您必须通过发出另一个请求来刷新它。

哦，我的天哪，我已经花了 6 个多小时终于搞定了！我相信这是我第一次看到这个`postmessage`东西。任何从事`Django + DRF + JWT + Social Auth + React`组合工作的人肯定会陷入困境。我不敢相信那里的文章都没有提到这一点，除了这里的答案。但如果你使用 Django + React 堆栈，我真的希望这篇文章可以为你节省大量时间。

* * *

## 回答 #9

> 赞同：8
> 
> 时间：2013-08-21T13:57:15.683

当您在[https://code.google.com/apis/console](https://code.google.com/apis/console)注册您的应用程序并创建一个客户端 ID 时，您有机会指定一个或多个重定向 URI。auth URI 上的参数值`redirect_uri`必须与其中之一完全匹配。

* * *

## 回答 #10

> 赞同：8
> 
> 时间：2016-02-16T09:07:52.443

清单：

*   `http`还是`https`？
*   `&`还是`&amp;`？
*   尾部斜杠（`/`）或打开？
*   `(CMD/CTRL)+F`, 在凭证页面中搜索完全匹配。如果找不到，则搜索丢失的那个。
*   等到谷歌刷新它。如果您经常更换，则可能每半小时发生一次，或者它可能会留在游泳池中。就我而言，几乎是半小时生效。

* * *

## 回答 #11

> 赞同：8
> 
> 时间：2016-03-12T05:31:04.497

就我而言，我的凭证应用程序类型是“其他”。`Authorized redirect URIs`所以我在凭证页面中找不到。它似乎出现在应用程序类型：“Web 应用程序”中。但是您可以单击`Download JSON`按钮来获取`client_secret.json`文件。 [![在此处输入图像描述](../Images/723c90aea9b7f34d1322e9e0476005b7.png)](https://i.stack.imgur.com/K9Fz7.png)

打开json文件，可以找到如下参数：`"redirect_uris":["urn:ietf:wg:oauth:2.0:oob","http://localhost"]`. 我选择使用[http://localhost](http://localhost)，它对我来说很好用。

* * *

## 回答 #12

> 赞同：6
> 
> 时间：2015-07-15T16:38:02.640

2015July15 - 上周在登录时使用此脚本的登录

```
<script src="https://apis.google.com/js/platform.js" async defer></script> 
```

停止工作并开始导致错误 400`Error: redirect_uri_mismatch`

在细节部分：`redirect_uri=storagerelay://...`

我通过更改为：

```
<script src="https://apis.google.com/js/client:platform.js?onload=startApp"></script> 
```

* * *

## 回答 #13

> 赞同：6
> 
> 时间：2017-06-04T18:03:15.643

如果您使用本教程：[https](https://developers.google.com/identity/sign-in/web/server-side-flow) ://developers.google.com/identity/sign-in/web/server-side-flow那么您应该使用“postmessage”。

在 GO 中，这解决了问题：

```
confg = &oauth2.Config{
        RedirectURL:  "postmessage",
        ClientID:   ...,
        ClientSecret: ...,
        Scopes:      ...,
        Endpoint:     google.Endpoint,
} 
```

* * *

## 回答 #14

> 赞同：6
> 
> 时间：2017-07-12T07:22:14.730

`/`请注意网址末尾 的额外`http://localhost:8000`内容与`http://localhost:8000/`

* * *

## 回答 #15

> 赞同：5
> 
> 时间：2016-09-28T09:42:16.343

重定向 URL 区分大小写。

在我的情况下，我添加了两个： [http://localhost:5023/AuthCallback/IndexAsync](http://localhost:5023/AuthCallback/IndexAsync) [http://localhost:5023/authcallback/indexasync](http://localhost:5023/authcallback/indexasync)

* * *

## 回答 #16

> 赞同：5
> 
> 时间：2018-11-13T20:29:29.403

对我来说，这是因为在“授权重定向 URI”列表中，我错误地放置`https://developers.google.com/oauthplayground/`了而不是`https://developers.google.com/oauthplayground`（没有`/`放在最后）。

* * *

## 回答 #17

> 赞同：5
> 
> 时间：2021-03-30T21:59:13.953

它已经得到了彻底的回答，但最近（比如一个月前）谷歌停止接受我的 URI 并且它不起作用。我知道它以前做过的一个事实，因为有一个用户注册了它。

无论如何，问题是常规的 400：redirect_uri_mismatch 但唯一的区别是它从 https:// 更改为 http://，并且 Google 不允许您注册 http:// 重定向 URI，因为它们是生产发布状态（与本地主机相反）。

问题出在我的回调中（我使用 Passport 进行身份验证），我只做了

```
callbackURL: "/register/google/redirect" 
```

阅读文档，他们使用了完整的 URL，所以我将其更改为

```
callbackURL: "https://" + process.env.MY_URL+ "/register/google/redirect" 
```

将 https localhost 添加到我接受的 URI 中，以便我可以在本地进行测试，然后它又开始工作了。

TL;DR 使用完整的 URL，这样您就知道要重定向到哪里

* * *

## 回答 #18

> 赞同：4
> 
> 时间：2016-02-23T03:48:03.923

Rails 用户（来自[omniauth-google-oauth2](https://github.com/zquestz/omniauth-google-oauth2)文档）：

> # 修复 Rails 中 redirect_uri 的协议不匹配
> 
> 只需根据 Rails.env 在 OmniAuth 中设置 full_host。
> 
> # config/initializers/omniauth.rb
> 
> OmniAuth.config.full_host = Rails.env.production？? ' [https://domain.com](https://domain.com) ' : ' [http://localhost:3000](http://localhost:3000) '

记住：不要包含尾随的“/”

* * *

## 回答 #19

> 赞同：4
> 
> 时间：2016-11-04T14:54:38.883

以上解决方案都不适合我。下面做了

将授权的重定向网址更改为 - [https://localhost:44377/signin-google](https://localhost:44377/signin-google)

希望这可以帮助某人。

* * *

## 回答 #20

> 赞同：4
> 
> 时间：2020-07-17T16:25:22.963

我的问题是我在地址栏中有 http://localhost:3000/ 并且在 console.developers.google.com 中有[http://127.0.0.1:3000/](http://127.0.0.1:3000/)

[![在此处输入图像描述](../Images/3f3ad02aeeb2023cb4ff275ce68e7ab0.png)](https://i.stack.imgur.com/da1dy.png)

[![在此处输入图像描述](../Images/29efc12e83aba5de061ef51ae575ddbb.png)](https://i.stack.imgur.com/0z4ry.png)

* * *

## 回答 #21

> 赞同：4
> 
> 时间：2020-10-12T19:10:13.923

只需确保您输入的是 URL 而不仅仅是域。因此，而不是： **domain.com** 它应该是 **domain.com/somePathWhereYouHadleYourRedirect**

* * *

## 回答 #22

> 赞同：4
> 
> 时间：2022-02-04T06:54:47.793

1.你会看到这样的错误

[![在此处输入图像描述](../Images/b2ab553ff8a91590247003b288db95f4.png)](https://i.stack.imgur.com/8YFfB.png)

2.然后你应该点击**请求详细信息** [![在此处输入图像描述](../Images/4834fc55691edb6eb37cbb1ca4dffa87.png)](https://i.stack.imgur.com/PazSa.png)

在此之后，您必须复制该网址并将其添加到[https://console.cloud.google.com/](https://console.cloud.google.com/)

3.  转到[https://console.cloud.google.com/](https://console.cloud.google.com/)

[![在此处输入图像描述](../Images/d538b846396344bd4d238e54eaece306.png)](https://i.stack.imgur.com/gpDSI.png) [![在此处输入图像描述](../Images/a93b95380f765db4515411c59b3bb9bd.png)](https://i.stack.imgur.com/PTv3b.png)

4.  单击菜单 -> API 和服务 -> 凭证

[![在此处输入图像描述](../Images/5a19a5164446b1b2cc21203be580c0fa.png)](https://i.stack.imgur.com/KsQOF.png)

5.  您会看到这样的仪表板，单击编辑 OAuth 客户端 [![在此处输入图像描述](../Images/570b7a63debf23c16020c6524ca8f6ca.png)](https://i.stack.imgur.com/4DzYH.png)

6.  现在进入`Authorized Javascript Origins`并`Authorized redirect URLS` 添加显示错误的 url`redirect_uri_mismatch`即这里它是 [http://algorithammer.herokuapp.com](http://algorithammer.herokuapp.com)，所以我在两个地方都添加了 `Authorized Javascript Origins`它`Authorized redirect URLS`

7.  单击保存并等待 5 分钟，然后尝试再次登录

* * *

## 回答 #23

> 赞同：3
> 
> 时间：2015-10-21T11:37:58.950

任何人都在努力寻找在新控制台中设置重定向 URL 的位置：APIs & Auth -> Credentials -> OAuth 2.0 client IDs -> 单击链接以查找所有重定向 URL

* * *

## 回答 #24

> 赞同：3
> 
> 时间：2021-02-16T17:29:46.587

我的两分钱：
如果使用**Google_Client**库，请不要忘记在更新重定向 URI 后更新服务器上的 JSON 文件。

* * *

## 回答 #25

> 赞同：2
> 
> 时间：2017-12-29T00:41:32.670

我需要在 APIs & Services -> Credentials -> Create credentials -> OAuth -> Other 下创建一个新的客户端 ID

然后我下载了 client_secret.json 并将其与正在上传到我的 youtube 帐户的命令行程序一起使用。我试图使用 Web App OAuth 客户端 ID，它在浏览器中给了我重定向 URI 错误。

* * *

## 回答 #26

> 赞同：2
> 
> 时间：2018-11-18T11:57:33.867

我有前端应用程序和后端 API。

在我的后端服务器上，我通过点击 google api 进行测试并面临这个错误。在我的整个时间里，我一直在想为什么我需要付出`redirect_uri`，因为这只是后端，因为前端是有道理的。

我正在做的是`redirect_uri`从服务器提供不同的（虽然有效）（假设这只是占位符，它只需要注册到谷歌）但我创建令牌代码的前端 url 是不同的。因此，当我在服务器端测试中传递此代码时（redirect-uri 不同），我遇到了这个错误。

所以不要犯这个错误。确保您的前端`redirect_uri`与您的服务器相同，因为谷歌使用它来验证真实性。

* * *

## 回答 #27

> 赞同：2
> 
> 时间：2019-08-31T11:06:10.997

此问题的主要原因将仅来自 chrome 和 chrome 处理 WWW 和非 www 的方式不同，具体取决于您在浏览器中输入 URL 的方式，它从 google 搜索并直接显示结果，因此发送的重定向 URL 在不同的案子

[![在此处输入图像描述](../Images/59d5dda331276a8c96d0a282bf3b9361.png)](https://i.stack.imgur.com/btOP7.png)

添加所有可能的组合，您可以找到从 fiddler 发送的确切 url，弹出的 400 错误不会为您提供确切的 http 和 www 信息

* * *

## 回答 #28

> 赞同：1
> 
> 时间：2014-01-02T16:49:50.913

尝试进行以下检查：

1.  控制台和应用程序中的捆绑 ID。我更喜欢像这样“org.peredovik.${PRODUCT_NAME:rfc1034identifier}”这样设置应用程序的Bundle ID
2.  检查您是否在选项卡 Info 中添加了 URL 类型，只需在 Identifier 和 URL Schemes 中输入您的 Bundle ID，角色设置为 Editor
3.  在 cloud.google.com 的控制台“APIs & auth”->“同意屏幕”中填写有关您的应用程序的表格。“产品名称”是必填字段。

享受 ：）

* * *

## 回答 #29

> 赞同：1
> 
> 时间：2014-08-22T14:39:09.027

让我完成@Bazyl 的回答：在我收到的消息中，他们提到了 URI `"http://localhost:8080/"` （当然，这似乎是谷歌的内部配置）。我更改了那个的授权 URI `"http://localhost:8080/"`，然后消息不再出现......视频上传了...... APIS 文档非常糟糕......每次我有一些使用 google apis 的东西时，我只是感到“幸运”，但缺乏关于它的良好文档...... :( 是的，我让它工作了，但我还不明白它为什么失败，也不明白为什么它工作......只有一个在网络上确认 URI 的地方，它被复制到 client_secrets.json 中...我不明白是否有第三个地方应该写相同的 URI...我不仅找到文档，而且还找到Google 的 GUI 设计

* * *

## 回答 #30

> 赞同：1
> 
> 时间：2015-04-04T13:04:14.673

就我而言，我必须检查 Web 应用程序/已安装应用程序的客户端 ID 类型。

已安装的应用程序：[http://localhost](http://localhost) [Redirect URIs] 在这种情况下 localhost 可以正常工作

Web 应用程序：您需要有效的域名 [重定向 URI：]

* * *

## 回答 #31

> 赞同：1
> 
> 时间：2015-06-10T08:15:01.590

您需要做的是返回您的开发者控制台并转到 APIs & Auth > Consent Screen 并填写。具体来说，产品名称。

* * *

## 回答 #32

> 赞同：1
> 
> 时间：2017-04-12T12:59:43.010

我在控制台中有两个请求 URI，[http://xxxxx/client/api/spreadsheet/authredirect](http://xxxxx/client/api/spreadsheet/authredirect)和[http://localhost](http://localhost)。

我尝试了对这个问题的所有热门回答，并确认它们都不是我的问题。

我从控制台中删除了 localhost，在我的项目中更新了我的 client_secret.json，并且不匹配错误消失了。

* * *

## 回答 #33

> 赞同：1
> 
> 时间：2017-10-17T08:07:23.063

我在谷歌登录时遇到了同样的问题。

我在谷歌开发者控制台的谷歌凭据面板中正确输入了我的回调，这是我的重定向网址：

```
https://www.example.com/signin-google

https://www.example.com/signin-google/

https://www.example.com/oauth2callback

https://www.example.com/oauth2callback/ 
```

一切似乎都很好，对吧？但它仍然没有工作，直到我添加了一个更**神奇的 Url**我添加了**没有****www****的登录谷歌**URL（这是默认的谷歌回调）并解决了问题。

 ******考虑到它（取决于您的域），您可能需要也可能不需要添加有和没有 www URL**

* * *

## 回答 #34

> 赞同：1
> 
> 时间：2018-12-07T12:44:00.683

以下是 Error: redirect_uri_mismatch 问题的原因：

1.  您的谷歌项目中的重定向 URL 字段为空白。
2.  重定向网址与您的网站不匹配
3.  重要的！它仅适用于 example.com、book.com 等工作域（不适用于本地主机或 AWS LB URL）

**推荐使用域名 URL**

* * *

## 回答 #35

> 赞同：1
> 
> 时间：2018-12-24T00:19:45.823

诀窍是在创建 ID 时输入正确的重定向 url。我发现通过“编辑”创建 ID 后更新重定向 URL 并不能完成工作。对我也有用的是复制整个“供应商”文件夹并将其复制到“oauth”文件所在的同一位置（直到您成功生成令牌，然后您可以删除重复的“供应商”文件夹）。这是因为试图通过 '../vendor/autoload' 指向供应商文件夹对我不起作用。

因此，删除您现有的麻烦的客户端 OAuth ID 并尝试这种方法，它会工作。

* * *

## 回答 #36

> 赞同：1
> 
> 时间：2019-01-18T08:48:14.500

要使其在 localhost 上工作，如果用于 Web 服务器，请提供

```
Authorized JavaScript origins (Client ID for web appication)
e.g. http://localhost:4200 
```

* * *

## 回答 #37

> 赞同：1
> 
> 时间：2019-05-31T17:32:56.173

在尝试使用 Google 登录时，我在使用 Meteor 和 Ngrok 时遇到了这个问题。我将 Ngrok URL 作为重定向 URL 放在 Google Developer Console 中，然后转到 Ngrok URL 页面。问题是我在执行应用程序时没有使用 Meteor `ROOT_URL`，所以任何重定向都会转到`localhost:3000`Ngrok URL 的 insted。只需在 Meteor 的配置中添加 Ngrok URL`ROOT_URL`或通过在终端上执行应用程序之前将其导出来修复它，例如：`export ROOT_URL=https://my_ngrok_url`

* * *

## 回答 #38

> 赞同：1
> 
> 时间：2019-07-12T07:59:10.210

我在本地机器上使用端口 3000 在 Reactjs 应用程序中授权时遇到了同样的问题。
我已经添加`lvh.me`了授权域以及`http://lvh.me:3000`授权来源和授权重定向 URL，如下图所示。

**注意：您可以为已验证的域添加多个站点。即用于您的本地机器、登台或其他环境**

[![在此处输入图像描述](../Images/ef425245257f96dda6b8597a4a73c8af.png)](https://i.stack.imgur.com/0S1gp.png)

[![在此处输入图像描述](../Images/c8adb2d7de217b38f30687acafba3c00.png)](https://i.stack.imgur.com/xFOty.png)

* * *

## 回答 #39

> 赞同：1
> 
> 时间：2021-02-14T23:26:04.100

就我而言，我添加了

```
https://websitename.com/sociallogin/social/callback/?hauth.done=Google 
```

在`Authorized redirect URIs`部分中，它对我有用

* * *

## 回答 #40

> 赞同：1
> 
> 时间：2021-08-15T11:48:33.970

重要补充：我发现在**跨客户端服务器身份验证流程**`serverAuthCode`中，当您从 Web SDK收到您的信息时，您应该使用“postmessage”，`redirect_uri` **而**当您`serverAuthCode`从**Android**或**iOS** SDK 收到您的信息时，您应该使用“postmessage”。

* * *

## 回答 #41

> 赞同：1
> 
> 时间：2022-02-26T06:53:58.720

如果您使用的是护照 js，并且您在 heroku 中部署您的应用程序，您需要添加此设置代理：护照策略中的 true

```
passport.use(new GoogleStrategy(
    {
        clientID: keys.googleClientID,
        clientSecret: keys.googleClientSecret,
        callbackURL: '/auth/google/callback',
        proxy: true
    }) 
```

或查看您的授权网址

必须是 https://yourwebsite/auth/google/callback

* * *

## 回答 #42

> 赞同：0
> 
> 时间：2016-11-19T01:05:23.973

不要忘记在您的域和 ip 之后包含路径。就我而言，我忘记了：

/oauth2callback

* * *

## 回答 #43

> 赞同：-2
> 
> 时间：2016-12-14T14:20:29.610

**已更新 --> 适用于 Android 应用**

只需使用：

> [http://localhost/oauth2callback](http://localhost/oauth2callback)

如果您在没有 Web 应用程序的重定向链接的情况下处理自己的逻辑****

# c# - LINQ，Lambda 表达式跳过 n 条记录，同时平均跳过的记录

> ID：11485273
> 
> 赞同：1
> 
> 时间：2012-07-14T16:08:04.587
> 
> 标签：c#, linq, lambda

我有一个表达：

```
Records.OrderBy(o => o.TIME).Where((o, i) => i % interval == 0).ToList(); 
```

这在获取大量数据记录并将其缩减为较小的列表方面做得很好。（interval 是要跳过的记录数）。问题是，我想平均一些字段，而不仅仅是跳过它们。我不知道如何在不产生巨大循环的情况下做到这一点。值得注意的是，每条数据记录大约有 90 个字段。想法？

编辑：我希望能够准确地跳过每第 n 条记录，平均 2 个特定字段（纬度和经度（存储为十进制）），并且很可能保持其他 88 个字段不变。

编辑：我想从

```
 timelat longmany other fields
    1   2   3   field1
    2   3   4   field1
    3   4   5   field1
    4   5   6   field1
    5   6   7   field1
    6   7   8   field1
    7   8   9   field1
    8   9   10  field1
    9   10  11  field1
    10  11  12  field1
    11  12  13  field1
    12  13  14  field1 
```

到：

```
 timelat     long    other fields            
    3   3   4   field1
    6   6   7   field1
    9   9   10  field1
    12  12  13  field1 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-14T16:51:16.940

如果我理解正确，您希望将大量项目分组到较小数量的同等大小的“桶”中，其中对于每个桶，一些字段被聚合（例如平均）并且一些被跳过（即从最后一个项目中获取桶）。

考虑是否可以这样做：

```
Records
.ToBuckets(interval)
.Select(bucket => new Record {
     Time = bucket.Last().Time,
     Count = bucket.Count,
     Lat = bucket.Average(x => x.Lat), 
     Long = bucket.Average(x => x.Long),
     Other = bucket.First().Other
}
.ToList() 
```

如果这是你想要的，你需要做的就是创建 ToBuckets 方法，这是一个更简单（和通用！）的问题：

```
public static IEnumerable<IList<T>> ToBuckets<T>(this IEnumerable<T> source, int size)
{
    var bucket = new List<T>(size);
    foreach (var item in source)
    {
        bucket.Add(item);
        if (bucket.Count == size) {
           yield return bucket;
           bucket = new List<T>(size); // or you can use the same one if you're careful
    }

    if (bucket.Count > 0) yield return bucket;
} 
```

（以上是作为支持示例的扩展方法给出的，但这当然也可以是常规方法）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-14T16:13:30.110

如果您想在平均值中包含给定记录，您将不得不触及该记录。 *无论您是明确执行此操作还是Linq*是否在幕后执行此操作，都必须循环遍历所有记录。

给定的 Linq 表达式只能返回一件事。

您当前拥有的 Linq 表达式将返回过滤后的列表。

您将需要第二个 Linq 表达式（或您自己的循环）来平均所有记录，例如

```
var avg = Records.Average(r => r.FieldToAverage); 
```

我不确定你的意思

> 值得注意的是，每条数据记录大约有 90 个字段

您是否必须以某种方式对给定记录中的*字段*进行平均？如果是这样，它们是什么数据类型？是否有一些现有的方法来枚举所有这些字段？如果没有，您将需要显式访问每个字段，或使用反射来枚举（相关）字段。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-14T16:32:57.907

您应该能够将其粘贴在 Where 子句中。它会有点难看，但像这样：

[编辑：从您的编辑中，我现在了解到您想要一些不同的东西。此代码已相应编辑]。

```
decimal latSum = 0;
decimal longSum = 0;
int count = 0;

var recordList = Records
    .OrderBy(o => o.TIME)
    .Where((o, i) => {
        if (i % interval == 0)
        {
            // Modify the record in place (hope that's OK)
            o.Lat = (o.Lat + latSum) / (count + 1);
            o.Long = (o.Long + longSum) / (count + 1);
            latSum = longSum = count = 0;
            return true;
        }

        latSum += o.Lat;
        longSum += o.Long;
        count++;
        return false;
    })
    .ToList(); 
```

# linq-to-sql - 如何使用 LINQ to SQL 数据源在 GridView 中格式化 DateTime？

> ID：11485278
> 
> 赞同：0
> 
> 时间：2012-07-14T16:09:03.900
> 
> 标签：linq-to-sql, c#-4.0, gridview

我有一个带有 LinqtoSQL 数据源的 GridView。我在代码中绑定它。这是代码

```
 DataClassesDataContext dContext = new DataClassesDataContext();
            var userId = (Guid)(Membership.GetUser(Membership.GetUser().UserName, false).ProviderUserKey);
            var Query = from d in dContext.table1
                              where d.UserId == userId
                              select new { d.date, d.weight, d.height, d.BMI };

            gv.DataSource = Query;
            gv.DataBind(); 
```

d.date 是 DateTime 列我喜欢只显示日期如何格式化它？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-03-01T11:55:57.420

## aspx 页面中的代码

```
<asp:GridView ID="gridView1" runat="server" AutoGenerateColumns="false">
                <Columns>
                    <asp:BoundField DataField="Login_USER" HeaderText="Login User" />
                    <asp:BoundField DataField="Login_DATE" HeaderText="Login Date"
                        DataFormatString="{0:MM/dd/yyyy}" />
                </Columns>
            </asp:GridView> 
```

=======================================

## 代码

```
Entities db = new Entities();

var users = from user in db.Logged_user select new {user.Login_USER, user.Login_DATE };

if(users != null)
{
     gridView1.DataSource = branches.ToList();
     gridView1.DataBind();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-21T23:07:54.923

将 DateTime 转换为仅显示日期的方法之一就是这个

```
DateTime today=DateTime.Now;
string todayString=today.ToString();
string dateOnly=todayString.Split(' ')[0]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-08T12:14:04.167

```
var Query = from d in dContext.table1 
            where d.UserId == userId 
            select new { date = String.Format("{0:MM/dd/yyyy}", d.date), d.weight, d.height, d.BMI }; 
```

# jquery - 向 UI 选项卡添加 jQuery UI 显示效果

> ID：11485280
> 
> 赞同：0
> 
> 时间：2012-07-14T16:09:11.740
> 
> 标签：jquery, jquery-ui, jquery-ui-tabs, jquery-effects

摘要：实现了 JQuery 选项卡。只是想为选项卡添加效果。

HTML 代码：

```
 <div id=tabs >
    <ul>
   <li><a href="#div1"><span>Div1</span></a></li>
    <li><a href="#div2"><span>Div2</span></a></li>
    <li><a href="#div3"><span>Div3</span></a></li>
     </ul>
    <div id=div1 ></div>
    <div id=div2 ></div>
    <div id=div3 ></div>
     </div> 
```

jQuery代码：

```
 $(document).ready(function() {
  $("#tabs").tabs();
 }); 
```

这可以很好地实现选项卡 GUI 并创建选项卡式界面。我现在想实现一个效果。例如'blind'、'bounce'、'clip'、'drop'、'explode'、'fold'、'highlight'、'puff'、'pulsate'、'scale'、'shake'、'size'、'幻灯片'，'转移'。

我该怎么做？从我读过的文档中：

```
 $("#tabs").tabs(
   //here is where there should be implementation of the effect

   "#div1",{effect:'explode'}
   "#div2",{effect:'explode'}
   "#div3",{effect:'explode'}

   );
   }); 
```

这段代码对进一步的动画没有任何建设性的作用。

试过

```
$("#div1"){effect:'effectname' 'effectproperties' } 
```

但这也是无效的。

他们从确实有效的文档中提供了一个示例：

```
 $("#tabs").tabs(
   //here is where there should be implementation of the effect

 { fx: { opacity: 'toggle' } } 
  ); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-14T17:00:06.950

为了完成你想要的`explode`（假设这实际上是你想要使用的，它不是一个例子），你需要处理`$.tab() show`事件；至少据我所知，`fx`内置的子系统`$.tabs()`不允许您选择 UI 效果。

所以，或多或少像：

```
$("#tabs").tabs({
    show: function(event, ui) {
        var $target = $(ui.panel);

        $('.content:visible').effect(
            'explode',
            {},
            1500,
            function(){
                $target.fadeIn();
        });
    }
}); 
```

[http://jsfiddle.net/userdude/2TDsq/2](http://jsfiddle.net/userdude/2TDsq/2)

注意，如果您只想使用内置`fx`选项系统，您应该：

```
$("#tabs").tabs(
    {fx: {opacity: 'toggle'}}
); 
```

[http://jsfiddle.net/userdude/2TDsq/1/](http://jsfiddle.net/userdude/2TDsq/1/)

然而，这并不难，其他人正在链接到（可能很多）关于如何使用该设置的 SO 副本。

# python - OpenCV：将不规则形状轮廓的内部设置为颜色

> ID：11485282
> 
> 赞同：2
> 
> 时间：2012-07-14T16:09:14.750
> 
> 标签：python, opencv, numpy

我有一张图像，我正在使用 OpenCV 来查找该图像中的轮廓。例如：

```
contours, hierarchy = cv2.findContours(image, cv2.RETR_LIST, cv2.CHAIN_APPROX_SIMPLE) 
```

返回的每个轮廓有时都是非常不规则的形状。例如，其中一个的返回是：

```
contour = [[[34  4]]
[[35  3]]
[[36  4]]
[[36 11]]
[[35 12]]
[[34 11]]
[[34  6]]
[[33  6]]
[[32  5]]
[[33  4]]] 
```

我想将此轮廓的内部设置为特定颜色。我试过使用 cv2.BoundingRect 来获取这个轮廓的边界矩形，然后用它来设置颜色，但是，我想要一种更精确的方法来使用实际的轮廓来做到这一点。

有没有一种直接的方法可以通过 OpenCV 提供的函数或通过 NumPy 来做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-14T16:11:09.410

使用`cv2.drawContours()`带有`lineType = -1`标志的函数（[文档](http://docs.opencv.org/modules/core/doc/drawing_functions.html?highlight=drawcontours#drawcontours)）

eg : **cv2.drawContours(img,[cnt],0,color,-1)** # 用于填充特定轮廓

或者

**cv2.drawContours(img,contours,-1,color,-1)** # 一步填充所有轮廓

更多详情，请访问：[Contours -1：入门](http://opencvpython.blogspot.com/2012/06/hi-this-article-is-tutorial-which-try.html)

# c++ - 在 c++ 程序中使用变量（编译）

> ID：11485286
> 
> 赞同：0
> 
> 时间：2012-07-14T16:09:40.830
> 
> 标签：c++, variables, ipc

此类问题已在此处和其他地方多次提出，但似乎我没有任何解决方案可以工作。到目前为止，我“完成”的是一个变量可以由两个不同的应用程序使用（一个应用程序通过系统命令调用另一个应用程序），但该值不会从主应用程序传递到辅助应用程序。

代码对应于此：

```
 #ifndef avis_h
    #define avis_h

    #include "string"
    using namespace std;

    extern int fnu;

    #endif 
```

那是头文件avis_h。

主程序是这样的：

```
 #include "stdafx.h"
    ...
    #include "iostream"
    #include "avis_h.h"

    int fnu;

    int main(){fnu=3;system (app2);} 
```

其中 app2 是辅助应用程序：

```
 #include "stdafx.h"
    ...
    #include "iostream"
    #include "avis_h.h"

    int fnu;

    int main(){cout<<fnu;Sleep(10);} 
```

显示数字 0 而不是数字 3。我尝试了其他方法，但到目前为止都没有。有人可以告诉我如何将该值从主程序正确传递到辅助程序吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T16:27:13.410

应用程序有不同的地址空间，如果您希望将一些数据从一个应用程序传递到另一个应用程序，您可以在一个应用程序中写入文件并在另一个应用程序中读取文件，或者您可以使用底层操作支持的进程间通信机制之一系统。在类 Unix 系统上，这些机制是管道、fifo、消息队列和共享内存。您甚至可以使用套接字。使用系统功能有点不是很好。但是，如果您希望只使用系统函数，这对于这种简单的进程间通信是可行的，请尝试将 fnu 的值作为参数传递给 app2。

```
char buf [20];

sprintf (buf, "app2 %d", fnu);
system (buf); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-14T16:12:27.347

您不能像这样在独立应用程序之间共享变量。

您可以将其作为参数传递给`system`命令：

```
//commandLine is app2 + " " + the parameter
system (commandLine); 
```

分解：

```
std::stringstream ss; 
ss << app2; 
ss << " "; 
ss << fnu;
std::string commandLine = ss.str();
system(commandLine.c_str()); 
```

不要忘记：

```
#include <sstream>
#include <string> 
```

`argv`并通过在第二个应用程序中检索它。

或者您可以使用 IPC，但在这种特殊情况下，这太过分了。

# c++ - 如何创建跨平台窗口处理程序？

> ID：11485291
> 
> 赞同：2
> 
> 时间：2012-07-14T16:10:24.677
> 
> 标签：c++, windows, linux, macos, cross-platform

我可能没有在寻找正确的术语，但我会尝试解释我在寻找什么（可能很常见）。

在 Windows 中创建窗口通常需要经过[`WinMain()`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms633559%28v=vs.85%29.aspx)，但并非所有平台（Linux、OS X 等）都使用此函数作为程序的入口点。

虽然我知道那里有很多图书馆，但出于教育原因，我对实施更加好奇，而不是寻找第 3 方图书馆来为我处理这个问题。

我敢肯定，这个实现是巨大的，但我在更抽象的层面上很好奇，你将如何编写你的入口点以便能够在多个平台上处理窗口创建。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-14T16:22:02.833

> 我在更抽象的层面上很好奇，你将如何编写你的入口点以便能够在多个平台上处理窗口创建。

C++ 程序的入口点是`main`，也就是跨平台。之后，您将需要使用创建窗口和其他任何东西所需的特定库。不同的平台/库可以`main`为您提供一个执行初始化然后调用特定函数的函数（`WinMain`在 Windows 的情况下）

你可能想看看这个[关于](https://stackoverflow.com/questions/564576/how-can-i-write-a-windows-application-without-using-winmain)WinMain 的问题。

# php - 我的应用在 Facebook 上不可用

> ID：11485293
> 
> 赞同：-3
> 
> 时间：2012-07-14T16:10:33.637
> 
> 标签：php, facebook

[http://apps.facebook.com/marksys](http://apps.facebook.com/marksys) 我在以下 url 上看不到我的应用程序，但我可以在我的 web url 上访问。 [http://peeplilive.in/demo](http://peeplilive.in/demo)

什么原因？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-14T16:16:26.443

您正在尝试在 facebook 页面内的 iframe 中加载 facebook URL。这是不允许的。这是针对[点击劫持](http://javascript.info/tutorial/clickjacking)的预防措施。记录的错误是

> 拒绝显示文档，因为 X-Frame-Options 禁止显示。

**您应该显示一个页面，该页面有一个按钮，要求用户通过 facebook 进行连接。一旦他单击按钮，您就可以打开一个 oauth 对话框。**我在[这里](https://stackoverflow.com/questions/11484321/oauth-dialog-doesnt-work-inside-facebook-iframe)回答了一个类似的问题。

# javascript - 防止图像“模糊”下面的 onmouseover 事件？

> ID：11485296
> 
> 赞同：2
> 
> 时间：2012-07-14T16:10:56.007
> 
> 标签：javascript

对于类似“射击场”的游戏，有些图像带有一个 onMouseOver 事件，将显示一个十字准线（跟随鼠标）和一个将隐藏它的 onMouseOut 事件。

然而，当十字准线变得可见时，它覆盖了下图，激活了隐藏十字准线的 onMouseOut 事件。

这会产生非常非常难看的“闪烁”效果。

有没有办法防止十字准线图像遮挡下面的目标？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T16:28:21.637

我相信[**指针事件属性**](https://developer.mozilla.org/en/CSS/pointer-events/)正是您正在寻找的。它基本上可以防止元素成为任何类型的鼠标事件的目标，因此它下面的元素可以处理它们。父元素仍然可以对事件做出反应。

***然而***，它仅在更高版本的 Firefox、Safari 和 Chrome 中受支持，并且可能[直到 CSS4 才会出现在 CSS 规范中。](http://wiki.csswg.org/spec/css4-ui#pointer-events)对于受支持的浏览器来说，这是一个很棒的解决方案，但是如果您想在任何版本的 IE 或 Opera 中解决问题，您还需要一个替代解决方案。我觉得这里值得一提。:D

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-14T16:13:53.317

一个简单的解决方案是为显示它的十字准线创建一个 onMouseOver（我知道这是多余的，但它适用于菜单等）。

另一种解决方案是在 onMouseOut 中设置超时以隐藏十字准线。它将减少闪烁，并且十字准线将在短时间内在目标外可见。

**编辑：**
另一个是在鼠标和元素之间执行碰撞检测，将 mouseOver 更改为目标父元素中的 mouseMove：

[http://jsfiddle.net/sHecT/1/](http://jsfiddle.net/sHecT/1/)

代码很长，但它的逻辑就是我上面所说的。

请注意：`getElementsByClassName`在较旧的浏览器中不起作用，但您可以在创建它们时使用一组目标，将它们添加到一个数组（可能您已经有一个）并使用它来代替这个调用；

这一个说明了一个缓动函数来平滑定位十字准线并且光标在目标上方时隐藏

[http://jsfiddle.net/sHecT/2/](http://jsfiddle.net/sHecT/2/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-14T16:22:24.280

不是使用图像作为背景，使用图像作为十字准线，而是使用带有背景图像的 div 作为背景，然后将十字准线图像作为该 div 的子级会怎样？

我没有对此进行测试，但由于十字准线图像现在将成为背景 div 内容的一部分，我想它不会再触发鼠标移出。

# php - cpanel上的php肥皂请求

> ID：11485299
> 
> 赞同：0
> 
> 时间：2012-07-14T16:11:12.867
> 
> 标签：php, soap, cpanel

我已经开发了一个使用肥皂请求的过程。它在装有 windows xp 的本地机器上运行良好。但是当我在 cpanel 服务器上上传时，它不会正确执行。我注意到它在这条线之后停止了处理`$client->loadWSDL();`。$cleint 对象会创建得很好。如果有人知道它可能有什么问题。

提前致谢。

```
require_once('lib/nusoap.php');
require_once('config.php');

$params = "<CreateUsersRequest xmlns='http://www.abc-online.com/services/api/1.0/'>
              <Credentials>
                <EmailAddress>$emailaddress</EmailAddress>
                <Password>$password</Password>
                <CustomerID>$customerID</CustomerID>
              </Credentials>
              <Emails>
                <string>$newEmail</string>
              </Emails>
              <AutoGeneratePassword>false</AutoGeneratePassword>
              <Password>$newPassword</Password>
              <SendLoginEmail>true</SendLoginEmail>
              <PersonalComment>$comment</PersonalComment>
            </CreateUsersRequest>";
        //
        $client = new soapclient($accountURL.'/services/api/1.0/soap_server.asmx?wsdl',array('encoding'=>'UTF-8'));

    ini_set("soap.wsdl_cache_enabled", "0"); 
    //$err = $client->getError();
    //echo $err;

    $client->setUseCurl(0);
    $client->loadWSDL();
    $userCreated = $client->call('CreateUsers',$params);

    //find out if it worked
    $userCreatedStatus = $userCreated['Success']; 
```

# python - 如何在 ID3v2.2 MP3 标签中获取帧大小？

> ID：11485303
> 
> 赞同：0
> 
> 时间：2012-07-14T16:11:20.160
> 
> 标签：python, struct, id3, id3-tag, id3v2

ID3v2.3标签我已经整理好了，因为有4个字节，但是这里的帧头标签总共只有3个字节，而不是4个。这似乎意味着我不能`struct.unpack`用来获取`int`出它。

例如，我现在使用的标签是：名称标识符`TT2\x00\x00\x0c\x00Torn Within`在哪里，尺寸标识符在哪里。标签的内容是，大小为 12 个字节。 `TT2``\x00\x00\x0c``\x00Torn Within`

这也是这首歌的 ID3 标题。`'ID3\x02\x00\x00\x00\x04NP'`，您可以在其中看到未设置编码和标志。

我已经尝试过`struct.unpack('>3b', '\x00\x00\x0c')`，但这只会获取每个单独字节的值。

但在那之后，我被卡住了，因为除非我`\x00`在尺寸标签前面加上 a，否则我无法继续。我该怎么办？

*这是 ID3 标签文档[http://id3.org/id3v2-00](http://id3.org/id3v2-00)和`struct`模块文档[http://docs.python.org/library/struct.html#format-characters](http://docs.python.org/library/struct.html#format-characters)*

**编辑**发现我可以这样做：`int(binascii.hexlify('\x00\x00\x0c'), 16)`但我认为这不是一个很好的解决方案

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T20:36:27.490

只需`\x00`在解包前添加一个空字节 ( )：

```
>>> length = "\x00\x00\x0c"
>>> struct.unpack('>I', '\x00' + length)
(12,) 
```

空字节将您的长度字节填充为 4 个字节，而不会改变含义。3 个 size 字节可以容纳的最大值是 2 ^(24)等于 16777216 字节；添加填充不会以任何方式改变该限制。

# c# - Asp 控件不工作

> ID：11485305
> 
> 赞同：0
> 
> 时间：2012-07-14T16:11:41.903
> 
> 标签：c#, asp.net, .net, telerik

我正在使用 Telerik 列表视图。我刚刚添加了一个 SqlDataSource，我想在服务器端给出选择命令。但是当我想在 .cs 文件中访问它时，即使没有显示任何控件，也无法访问 SqlDataSource1。我在尝试 Label1.Text 时添加了一个标签，而不是在 .cs 文件中无法访问 label1。

```
<%@ Page Title="" Language="C#" MasterPageFile="~/PortalSite.Master" AutoEventWireup="true" CodeBehind="category.aspx.cs" Inherits="NoidaPortal.category" %>
<%@ Register TagPrefix="telerik" Namespace="Telerik.Web.UI" Assembly="Telerik.Web.UI" %>
<asp:Content ID="Content1" ContentPlaceHolderID="head" runat="server">
</asp:Content>
<asp:Content ID="Content2" ContentPlaceHolderID="ContentPlaceHolder1" runat="server">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>

<style type="text/css">
    .rdpWrap .RadInput, .rdpWrap .rdpPagerButton, .rdpWrap .rdpPagerLabel
    {
        float: left;
    }
</style>
</head>
<body>
<form id="form1" runat="server">
<asp:SqlDataSource ID="SqlDataSource2" runat="server"></asp:SqlDataSource>

<div>
    <!-- content start -->
    <telerik:RadCodeBlock ID="RadCodeBlock1" runat="server">

        <script type="text/javascript">
            function RequestStart(sender, eventArgs) {
                //disable ajax on update/insert operation to upload the image
                if ((eventArgs.get_eventTarget().indexOf("Update") > -1) || (eventArgs.get_eventTarget().indexOf("PerformInsert") > -1)) {
                    eventArgs.set_enableAjax(false);
                }
            }
        </script>

    </telerik:RadCodeBlock>
    <table>
        <tr>
            <td>
                <asp:Panel ID="ListViewPanel1" runat="server">
                    <telerik:RadListView ID="RadListView1" DataSourceID="SqlDataSource1" runat="server"
                        ItemPlaceholderID="CustomersContainer" DataKeyNames="ArchitectId" AllowPaging="True"
                        >
                        <LayoutTemplate>
                            <!-- Set the id of the wrapping container to match the CLIENT ID of the RadListView control to display the ajax loading panel
                     In case the listview is embedded in another server control, you will need to append the id of that server control -->
                            <fieldset id="FiledSet1" style="width:435px;">
                                <legend>Customers</legend>
                                <table cellpadding="0" cellspacing="0" width="100%">
                                    <tr>
                                        <td>
                                            <telerik:RadDataPager ID="RadDataPager1" runat="server" PagedControlID="RadListView1"
                                                PageSize="5" Width="435px">
                                                <Fields>
                                                    <telerik:RadDataPagerButtonField FieldType="FirstPrev" />
                                                    <telerik:RadDataPagerButtonField FieldType="Numeric" PageButtonCount="6" />
                                                    <telerik:RadDataPagerButtonField FieldType="NextLast" />
                                                    <telerik:RadDataPagerPageSizeField PageSizeText="Page size: " />

                                                </Fields>
                                            </telerik:RadDataPager>
                                        </td>
                                    </tr>
                                </table>
                                <asp:PlaceHolder ID="CustomersContainer" runat="server" />
                                <div style="clear: both" />
                                <br />
                                <br />
                                <table style="width: 100%;">
                                    <tr>
                                        <%--<td style="width: 25%;">
                                            <asp:Button ID="btnInitInsert" runat="server" Text="Insert Customer" OnClick="btnInitInsert_Click" />
                                        </td>--%>
                                        <td style="text-align:center; width: 75%;">
                                            <asp:Label ID="lblSort1" runat="server" Text="Sort by:" Style="padding-right: 5px;" />
                                            <telerik:RadComboBox ID="ddListSort" runat="server" AutoPostBack="true">
                                                <Items>
                                                    <telerik:RadComboBoxItem Text="-Select field to sort-" Value="" />
                                                    <telerik:RadComboBoxItem Text="Company name" Value="ArchitectName" />
                                                    <telerik:RadComboBoxItem Text="Sector" Value="Sector" />

                                                </Items>
                                            </telerik:RadComboBox>
                                        </td>
                                    </tr>
                                </table>
                                </div>
                            </fieldset>
                        </LayoutTemplate>
                        <ItemTemplate>
                            <!--The widths/heights of the fieldset/outer tables in the item/edit/insert templates should match to avoid wrapping or visual discrepancies
                         in the tiles layout-->
                            <fieldset style="float: left; width: 410px; height: 215px; margin-top:10PX;">
                                <legend style="font-weight:bold">
                                    <%# Eval("ArchitectName")%></legend>
                                <table cellpadding="0" cellspacing="0" style="height: 100%;" width="370px">
                                    <tr>
                                        <td>
                                            <table cellpadding="0" cellspacing="0">
                                                <tr>
                                                    <td>
                                                        <table cellpadding="0" cellspacing="0">
                                                            <tr>
                                                                <td style="font-weight:bold; width:25%">
                                                                    Address:
                                                                </td>
                                                                <td style="width:auto; width:75%;">
                                                                    <%#Eval("ArchitectAddress")%>
                                                                </td>
                                                            </tr>
                                                            <tr>
                                                                <td style="width:25%; font-weight:">
                                                                    City:
                                                                </td>
                                                                <td>
                                                                    <%# Eval("Contact1")%>
                                                                </td>
                                                            </tr>
                                                            <tr>
                                                                <td style="font-weight:bold">
                                                                    Country:
                                                                </td>
                                                                <td>
                                                                    <%# Eval("Contact2")%>
                                                                </td>
                                                            </tr>
                                                            <tr>
                                                                <td style="font-weight:bold">
                                                                    Phone:
                                                                </td>
                                                                <td>
                                                                    <%#Eval("Email_Id")%>
                                                                </td>
                                                            </tr>
                                                            <tr>
                                                                <td style="font-weight:bold">
                                                                    Website:
                                                                </td>
                                                                <td>
                                                                    <%#Eval("Website")%>
                                                                </td>
                                                            </tr>
                                                        </table>
                                                    </td>
                                                </tr>
                                            </table>
                                        </td>
                                    </tr>
                                 </table>
                            </fieldset>
                          </ItemTemplate>
                        <EmptyDataTemplate>
                            <fieldset style="width: 800px">
                                <legend>Customers</legend>No records for customers available.
                            </fieldset>
                        </EmptyDataTemplate>
                     </telerik:RadListView>
                </asp:Panel>
            </td>
        </tr>

    </table>
   <br />
    <asp:SqlDataSource ID="SqlDataSource1" runat="server" 
        ConnectionString="<%$ ConnectionStrings:dbPortalConnectionString %>" 
        SelectCommand="SELECT * FROM [Architect]" >
    </asp:SqlDataSource>

 /div>
</form>
</body>
 </html>
 </asp:Content> 
```

这是我的 aspx.cs 类

```
 using System;
 using System.Collections.Generic;
 using System.Collections;
 using System.Configuration;
 using System.Web.Security;
 using System.Linq;
 using System.Web;
 using System.Web.UI;
 using System.Web.UI.WebControls;
 using System.Web.UI.HtmlControls;
 using System.Web.UI.WebControls.WebParts;
 using System.Data;
 using System.Xml.Linq;
 using System.Data.SqlClient;
 namespace NoidaPortal
 {

      public partial class category : System.Web.UI.Page
      {
            protected void Page_Load(object sender, EventArgs e) 
            {
                 if (IsPostBack == false)
                  {
                       string s = Request.QueryString["cat"];
                        string s1 = Request.QueryString["sub"];

                       **I Just want to give here a SqlDataSource.Select command**
                   }
            }
     } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-14T17:11:37.073

您的内容占位符中有一些内容是不允许的，因为您使用的是母版。您没有在控件上获得智能感知的原因是页面无法编译。

删除这些标签：

```
<html xmlns="http://www.w3.org/1999/xhtml"> 
<head> 
<body> 
<form id="form1" runat="server"> 
```

然后尝试编译您的应用程序。修复编译器抛出的任何错误并重新编译。应用程序可编译后，您的智能感知应重新开始工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-14T16:15:12.697

可能是因为您没有提到哪个是您页面的代码隐藏。将此作为第一行添加到您的 aspx 页面

```
<%@ Page Language="C#" AutoEventWireup="true" CodeBehind="yourfile.aspx.cs" Inherits="YourProjectName.YourASPXPageName" %> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-14T19:00:18.187

是的，我在这里找到了解决方案...我必须通过右键单击 ProjectFolder 并将其转换为 webApplication 并单击“转换为 Web 应用程序”。比它的智能感知开始工作。

# java - FileInputStream 如何获取 File 的内容？

> ID：11485311
> 
> 赞同：6
> 
> 时间：2012-07-14T16:12:11.063
> 
> 标签：java, file, fileinputstream

我有一个文件`f`，我需要将其影响为`FileInputStream` `fs`：

```
File f = new File("C:/dir/foo.txt");
FileInputStream fs = (FileInputStream)f; 
```

但我得到这个错误：

```
Cannot cast from File to FileInputStream 
```

怎样才能`fs`得到内容`f`？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-07-14T16:13:51.680

诀窍是这样的：

```
FileInputStream fs = new FileInputStream(f); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-14T16:40:17.747

您可以使用这种方法：

```
 BufferedReader reader = new BufferedReader(new InputStreamReader(new BufferedInputStream(new FileInputStream(new File("text.txt")))));

    String line = null;

    while ((line = reader.readLine()) != null) {
        // do something with your read line
    } 
```

或者这个：

```
 byte[] bytes = Files.readAllBytes(Paths.get("text.txt"));
    String text = new String(bytes, StandardCharsets.UTF_8); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-14T16:33:12.957

在这里我找到了解决方案：

[http://journals.ecs.soton.ac.uk/java/tutorial/java/io/filestreams.html](http://journals.ecs.soton.ac.uk/java/tutorial/java/io/filestreams.html)

# android - 在 Android 中通过 AccountManager 请求多个 oauth2 范围

> ID：11485313
> 
> 赞同：2
> 
> 时间：2012-07-14T16:12:32.810
> 
> 标签：android, api, authentication, oauth

我处于需要为两个范围（来自我的 android 应用程序）请求访问令牌的情况，`https://www.googleapis.com/auth/userinfo.email`并且`https://www.googleapis.com/auth/userinfo.userinfo`

我想在一次调用时获得这两种权限`getAuthToken`，但无法确定要传入`authTokenType`参数的字符串。我尝试了几种合理的组合但没有积极的结果:(

有没有人解决过这个问题？是否可以？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-04T17:22:29.050

我遇到了同样的问题。Shah 几乎是对的，但他的范围字符串是错误的。它应该是

```
"oauth2:<scope_url> <scope_url>" 
```

不是

```
"oauth2:<scope_url> oauth2:<scope_url>" 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-14T16:45:49.263

如果您需要多个 OAuth 2.0 范围，请[使用空格分隔的列表](http://code.google.com/p/google-api-java-client/wiki/OAuth2#Android)。

```
oauth2:https://www.googleapis.com/auth/userinfo.email https://www.googleapis.com/auth/userinfo.userinfo 
```

您要求提供示例代码，因此请查看[Google Docs Upload Sample](https://github.com/mendhak/googledocs-upload-sample)应用程序，并在此应用程序中查看在[此示例 Android 屏幕](https://github.com/mendhak/googledocs-upload-sample/blob/master/src/com/mendhak/example/PureJavaUploadActivity.java)中完成的身份验证流程（忽略它是关于 Google Docs 的，它仍然首先授权）。您可以获取整个应用程序并在具有 Google API 的模拟器中运行它，或者在您的手机上运行它。授权工作流程从 buttonAuthorize 单击开始，Authorize() 并且您对此方法特别感兴趣：

```
private void gotAccount(Account account)
{

    Bundle options = new Bundle();

    accountManager.getAuthToken(
            account,                     // Account retrieved using getAccountsByType()
            "oauth2:https://www.googleapis.com/auth/userinfo.email oauth2:https://www.googleapis.com/auth/userinfo.userinfo",            // Auth scope
            //"writely",            // Auth scope, doesn't work :(
            options,                        // Authenticator-specific options
            this,                           // Your activity
            new OnTokenAcquired(),          // Callback called when a token is successfully acquired
            null);    // Callback called if an error occurs
} 
```

用户获取此访问请求屏幕：

![在此处输入图像描述](../Images/4cbf8f096b0548cc659666cf1003e477.png)

请注意，这是使用“本地”OAuth2 机制，而不是打开 Web 浏览器，而是使用您首次激活 Android 手机时提供的身份验证。

另请注意，用户看到的是范围的完整 URL 而不是友好名称，我[还没有](https://stackoverflow.com/questions/9654633/where-is-the-android-authorization-token-type-alias-list-for-google-apis)找到解决此问题的方法，如果您发现如果您能分享答案会很棒。

# c++ - 从 C++ 基类创建 lua 对象

> ID：11485314
> 
> 赞同：0
> 
> 时间：2012-07-14T16:12:34.540
> 
> 标签：c++, oop, lua, luabind

我已经从 C++ 导出到 lua 这样的基类：

> ```
> class IState
> {
>     public:
>         virtual ~IState() { }
> 
>         virtual void Init() = 0;
>         virtual void Update(float dSeconds) = 0;
>         virtual void Shutdown() = 0;
>         virtual string Type() const = 0;
> };
> 
> // Wraper of state base class for lua
> struct IStateWrapper : IState, luabind::wrap_base
> {
>     virtual void Init() { call<void>("Init"); }
>     virtual void Update(float dSeconds) { call<void>("Update", dSeconds); }
>     virtual void Shutdown() { call<void>("Shutdown"); }
>     virtual string Type() const { return call<string>("Type"); }
> }; 
> ```

导出代码：

> ```
>  class_<IState, IStateWrapper>("IState")
>             .def("Init", &IState::Init)
>             .def("Update", &IState::Update)
>             .def("Shutdown", &IState::Shutdown) 
> ```

下一部分：我有具有功能的 StateManager：`void StateManager::Push(IState*)`它是导出：

```
 class_<StateManager>("StateManager")
            .def("Push", &StateManager::Push) 
```

现在，我想在 Lua 中创建 IState 类型的对象并将其推送到 StateManager 中：

```
-- Create a table for storing object of IState cpp class
MainState = {}

-- Implementatio of IState::Init pure virtual function
function MainState:Init()
    print 'This is Init function'
end

function MainState:Update()
    print 'this is update'
end

function MainState:Shutdown()
    print 'This is shutdown'
end

state = StateManager
state.Push(MainState) 
```

当然，这是行不通的。如果 IState 类型的对象，我不知道该怎么说 MainState：

```
error: No matching overload found, candidates: void Push(StateManager&,IState*) 
```

* * *

**UPD**

```
 module(state, "Scene") [
        class_<StateManager>("StateManager")
            .def("Push", &StateManager::Push),

        class_<IState, IStateWrapper>("IState")
            .def("Init", &IState::Init)
            .def("Update", &IState::Update)
            .def("Shutdown", &IState::Shutdown)
    ];

    globals(state)["StateManager"] = Root::Get().GetState(); // GetState() returns pointer to obj 
```

示例后：

```
class 'MainState' (Scene.IState)
function MainState:__init()
    Scene.IState.__init(self, 'MainState')
end
...
state = StateManager
state:Push(MainState()) 
```

错误：“IState”类中没有静态“__init”

并且应该`state = StateManager`有括号？对于他们来说，没有这样的运营商是错误的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-14T17:43:20.483

你不能只是向 Luabind 扔一张桌子。如果您打算从 Luabind 定义的类派生，则必须遵循 Luabind 的规则。您必须使用从您的类派生的[Luabind 工具创建一个 Lua](http://www.rasterbar.com/products/luabind/docs.html#defining-classes-in-lua)`IState`类。看起来像这样：

```
class 'MainState' (IState) --Assuming that you registered IState in the global table and not a Luabind module.

function MainState:__init()
    IState.__init(self, 'MainState')
end

function MainState:Init()
    print 'This is Init function'
end

function MainState:Update()
    print 'this is update'
end

function MainState:Shutdown()
    print 'This is shutdown'
end

state = StateManager()
state:Push(MainState()) 
```

另外，请注意对最后两行的更改。具体来说，StateManager 是如何被*调用*的，而不是简单地设置成`state`)。另外，你如何使用`state:`而不是`state.`. 我不知道这段代码在你的例子中是如何运作的。

# javascript - .isPointInPath() 用于描边线和折线

> ID：11485316
> 
> 赞同：7
> 
> 时间：2012-07-14T16:13:05.397
> 
> 标签：javascript, html, html5-canvas

我需要一种机制来检测具有不同笔划宽度的直线、曲线和多段线的鼠标悬停事件，我已经为矩形和椭圆建立了这样的机制，所以我对画布 API 并不陌生。我会勾勒出所有绘制对象的轮廓并检测鼠标在它们上方的位置，当矩形或椭圆的笔画宽度超过 1 像素时，我会扩展路径以使其也包含边框。例如，对于线条和折线，当我的 lineWidth 为 20 像素时，我很难理解如何扩展它们。

我的问题是：如何在某些形状路径中转换直线、曲线和多段线，以便该路径可以包含它们的所有宽度？

![红色路径，黑色描边路径](../Images/8ea4d8ab7b86b06969946f70178258a7.png)

我需要创建的路径包含此图像中用黑色表示的线/曲线宽度。

----------更多信息----------

我将尝试简化问题：我们有 2 个点（在下图中以红色表示），它们形成一条具有特定公式（y = mx + n）的线，我需要确定垂直线的公式通过这两个初始点之后，需要确定“蓝色”点的位置，它们在context.lineWidth值一半的距离处，当所有点都确定后，可以创建使用 moveTo() 和 lineTo() 序列的新路径。这种方法应该适用于使用控制点的二次曲线和贝塞尔曲线。问题只存在于这些数学计算中。

![](../Images/12efd79f83a1fde34959a7619a754164.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-18T06:26:53.683

[我在这里](https://math.stackexchange.com/questions/171620/how-to-determine-the-position-of-neighbor-points/)找到了 math.stackexchange 的解决方案，这个解决方案仅适用于线条，但它适用于经过一些特定修改的曲线和折线。首先，我们需要确定通过两个初始点的线的公式：

第1步

> 我们的观点：P1(x1, y1) 和 P2(x2, y2)
> 
> 点与相邻点之间的距离：d
> 
> 一般形式：Ax + By + C = 0
> 
> 其中：A = y2 - y1；B = x1 - x2；C = x2y1 - x1y2。

之后，有必要以简写形式定义这个公式：

第2步

> 简写形式：y = mx +n
> 
> 其中：m = - A / B；n = - C / B.（当 B != 0 时）
> 
> 如果 A == 0 那么我们有公式：y = C（当我们有一条水平线时）
> 
> 如果 B == 0 那么我们有公式：x = C（当我们有一条垂直线时）

当我们有直线的斜率时，我们需要它上面的垂直线的斜率：

第 3 步

> 垂线斜率：m2 = - 1 / m
> 
> 如果 A == 0 或 B == 0 转到步骤 4

现在我们需要获取两个初始点的相邻点：

第4步

> 我会将相邻点记为 P1N1，第一个点为 P1N2，第二个点为 P2N1 和 P2N2
> 
> 对于特殊情况（水平和垂直线，当 A == 0 或 B == 0 时），我们将有：
> 
> 对于 A == 0（水平线）：
> 
> P1N1(x1, y1 - d / 2); P1N2(x1, y1 + d / 2); P2N1(x2, y2 + d / 2); P2N2(x2, y2 - d / 2)。
> 
> 对于 B == 0（垂直线）：
> 
> P1N1(x1 - d / 2, y1); P1N2(x1 + d / 2, y1); P2N1(x2 + d / 2, y2); P2N2(x2 - d / 2, y2)。
> 
> 对于其他情况（A != 0 和 B != 0）：
> 
> P1N1：
> 
> x = (d / 2) / Math.sqrt(1 + Math.pow(m2, 2)) + x1;
> 
> y = (m2 * (d / 2)) / Math.sqrt(1 + Math.pow(m2, 2)) + y1;
> 
> P1N2：
> 
> x = - (d / 2) / Math.sqrt(1 + Math.pow(m2, 2)) + x1;
> 
> y = - (m2 * (d / 2)) / Math.sqrt(1 + Math.pow(m2, 2)) + y1;
> 
> P2N1：
> 
> x = (d / 2) / Math.sqrt(1 + Math.pow(m2, 2)) + x2;
> 
> y = (m2 * (d / 2)) / Math.sqrt(1 + Math.pow(m2, 2)) + y2;
> 
> P2N2：
> 
> x = - (d / 2) / Math.sqrt(1 + Math.pow(m2, 2)) + x2;
> 
> y = - (m2 * (d / 2)) / Math.sqrt(1 + Math.pow(m2, 2)) + y2;

如果您想在应用程序中实现这些公式，您应该缓存一些结果以提高性能。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2017-10-03T15:15:27.793

您是否尝试过使用 Canvas 2D API 的 .isPointInStroke() 方法：

```
ctx.isPointInStroke(x, y);
ctx.isPointInStroke(path, x, y); 
```

看看： [https ://developer.mozilla.org/en-US/docs/Web/API/CanvasRenderingContext2D/isPointInStroke](https://developer.mozilla.org/en-US/docs/Web/API/CanvasRenderingContext2D/isPointInStroke)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-16T23:19:14.850

如果你的贝塞尔曲线是以下形式。

```
x(t) = x0 + x1*t + x2*t*t + x3*t*t*t
y(t) = y0 + y1*t + y2*t*t + y3*t*t*t 
```

然后你必须[计算](http://processingjs.nihongoresources.com/bezierinfo/)它的导数，这将给出任意点的切线。

```
x'(t) = x1 + 2*x2*t + 3*x3*t*t
y'(t) = y1 + 2*y2*t + 3*y3*t*t 
```

和任何一点的**法线**。法线是任何一点的垂直线，也是两点的支撑线。

```
(-y'(t), x'(t))
((y'(t), -(x'(t)) 
```

# c++ - 使用带有多线程的 FFMPEG 解码 h264 文件时出错？

> ID：11485319
> 
> 赞同：2
> 
> 时间：2012-07-14T16:13:13.747
> 
> 标签：c++, windows, ffmpeg, decode

我编写了用于解码许多 .flv 视频文件的代码。每个视频文件由一个单独的线程解码。当我尝试 1 个线程时，一切正常。但是当我尝试超过 2 个线程时，总是会出现错误“avcodec_open/close() 周围的线程锁定不足”。

我已经搜索过，我知道函数 avcodec_open() 和 avcodec_close() 不是线程安全的。之后，我将互斥锁放在调用两个函数的任何位置。

```
lockObj.Lock();
avcodec_open/close();
lockObj.UnLock(); 
```

但是错误“avcodec_open/close() 周围的线程锁定不足”仍然发生。

有人可以告诉我解决方案吗？

非常感谢，

同天集团

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-12T18:37:31.590

每个线程中是否`lockObj`有相同的对象？

互斥锁的目的是阻止多个线程`avcodec_open()`同时调用。其他线程在到达语句时应该停止并等待，`lockObj.Lock()`直到第一个线程调用`lockObj.UnLock()`。如果每个线程都有自己的`lockObj`.

我已经将此方法与 QMutex（来自 Qt）一起使用，所以我知道这是可能的。

# c - 释放对象的问题

> ID：11485326
> 
> 赞同：1
> 
> 时间：2012-07-14T16:13:58.637
> 
> 标签：c, malloc

我目前正在尝试学习 C++ 的 C 方面。

我尝试`malloc`为 char 数组分配一块内存，`256`然后分配给它 a`char* "Hello World!"`但是当我释放对象时出现错误。

任何人都可以向我解释错误。

```
#include <exception>
#include <stdexcept>
#include <iostream>

int main()
{
    void* charVoidPointer = malloc( sizeof(char) * 256 ) ;
    charVoidPointer = "Hello World";

    std::cout << (char *)charVoidPointer;
    free (charVoidPointer);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-14T16:22:46.550

```
void* charVoidPointer = malloc( sizeof(char) * 256 ) ; 
```

现在`charVoidPointer`（顺便说一句奇怪的名字——如果你想要字符，使用`char *`并转换从 malloc 返回的指针）指向一个 256 个字符的块。这个块是未初始化的，所以你能做的几乎唯一有效的事情就是将它们全部设置为某个值，或者复制一些东西。

```
charVoidPointer = "Hello World"; 
```

现在`charVoidPointer`指向一个*静态*分配的字符数组，并且您丢失了 malloc 返回的地址。没有办法找回它，所以这是资源泄漏。

* * *

您的代码应类似于：

```
char *charPointer = (char *)malloc(256);
strcpy(charPointer, "Hello World"); 
```

它将字符数组*复制*到您分配的块中。或者，更简洁地说，只是

```
char *charPointer = strdup("Hello World"); 
```

这将分配一个大小合适的块*并将*字符串复制进去。您仍然可以使用`free`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-14T16:23:28.843

“Hello World”由编译器静态分配。它是程序的一部分，存在于程序可寻址的某个位置；称它为地址 12。

charVoidPointer 最初指向 malloc 为您分配的某个位置；称它为地址 98。

charVoidPointer = "Hello ..." 导致 charVoidPointer 指向程序中的数据；地址 12。您丢失了之前包含在 charVoidPointer 中的地址 98。

而且你不能释放不是由 malloc 分配的内存。

为了更从字面上说明我的意思：

```
void* charVoidPointer = malloc(sizeof(char) * 256);
printf("the address of the memory allocated for us: %p\n", charVoidPointer);
charVoidPointer = "Hello World";
printf("no longer the address allocated for us; free will fail: %p\n",
       charVoidPointer); 
```

你的意思是：

```
strcpy(charVoidPointer, "Hello World"); 
```

编辑：其他类型的寻址内存示例

```
#include <stdlib.h>
#include <stdio.h>
#include <string.h>

int main()
{
  // an array of 10 int
  int *p = (int*)malloc(sizeof(int) * 10);

  // setting element 0 using memcpy (works for everything)
  int src = 2;
  memcpy(p+0, &src, sizeof(int));

  // setting element 1 using array subscripts.  correctly adjusts for
  // size of element BECAUSE p is an int*.  We would have to consider
  // the size of the underlying data if it were a void*.
  p[1] = 3;

  // again, the +1 math works because we've given the compiler 
  // information about the underlying type.  void* wouldn't have
  // the correct information and the p+1 wouldn't yield the result
  // you expect.
  printf("%d, %d\n", p[0], *(p+1));

  free (p);
} 
```

实验; 将类型从 int 更改为 long、double 或某些复杂类型。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-14T16:18:20.297

使用`strcpy(charVoidPointer, "Hello World");`，因为在您的示例中，您重新分配了指针。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-14T16:18:43.613

您将指针分配给字符串文字“Hello World”的地址，因此您 malloc 的内存块被泄漏。

你应该使用

```
strcpy(charVoidPointer, "Hello World"); 
```

而不是赋值运算符。

更好的是用来`strncpy(charVoidPointer, "Hello World", 255);`避免你分配的数组溢出。

# javascript - 引导轮播

> ID：11485327
> 
> 赞同：2
> 
> 时间：2012-07-14T16:14:11.530
> 
> 标签：javascript, jquery, twitter-bootstrap, carousel

我正在使用引导程序制作旋转木马。然而问题是我似乎无法弄清楚每次轮播进行循环时如何调用函数（我的意思是轮播的自动循环功能）。有人对此有任何想法吗？

我需要它的地方如下：除了轮播之外，我有所有图片（来自轮播）作为拇指，所以你有一个像相册的东西。然后我可以单击其中任何一个拇指，然后直接进入它。然后我让拇指“活动”（基本上是黑色边框而不是灰色边框），然后我让前一个拇指（当我点击它时处于活动状态的那个）恢复正常。但是......当旋转木马循环时（看起来非常棒），我想让活动拇指保持最新。为了做到这一点，我唯一需要做的就是能够在轮播循环的同时调用一个函数。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-16T17:38:50.200

As found in the [documentation for the Twitter Bootstrap Carousel plugin](http://getbootstrap.com/2.3.2/javascript.html#carousel), the carousel fires two events that you can listen for, `slide` and `slid`. Try listening to one of these events, and then executing the code you need in the callback.

## Example

```
$('body').on('slid', function (e) {
  //do stuff in here
}); 
```

# delphi - 如何从仅包含两个不同数字的某个数字中获取组合数？

> ID：11485329
> 
> 赞同：4
> 
> 时间：2012-07-14T16:14:26.017
> 
> 标签：delphi, numbers, combinations

例如，两位数字有 4 种组合：11、12、21、22。三位数字有 8 种组合：111、112、...222。

*   如何获得具有 4、5、... 10 位或更多位数的数字的组合数？

谢谢

PS这是指Delphi :)

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-07-14T16:18:11.607

答案是 2 ^(*N*)，其中*N*是位数。

这是一个纯粹的数学问题，涉及非常基本的组合学。很容易看出为什么 2 ^(*N*)是正确答案。实际上，有两种方法可以选择第一个数字。*对于每个这样的选择*，有两种方法可以选择第二个数字。因此，有 2×2 种方法来选择两位数。*对于每个*这样的数字，有两种方法可以添加第三个数字，用 2×2×2 的方式来构造一个三位数的数字。因此，有

```
2 × 2 × ... × 2 = 2^N 
```

构造一个*N*位数字的方法。

在 Delphi 中，您通过( )计算 2 ^(*N。*)[适用于*N* < 31 的不那么天真的方法是.]`Power(2, N)``uses Math`*`1 shl N`*

# php - 使用表单和 3 个参数重写 URL

> ID：11485330
> 
> 赞同：0
> 
> 时间：2012-07-14T16:14:31.197
> 
> 标签：php, .htaccess

我有一个表单的网页有 3 个参数，比如

> [http://www.likeforex.com/currency-converter/fxconverter.php?f=euro-eur&t=usd-us-dollar&amt=1](http://www.likeforex.com/currency-converter/fxconverter.php?f=euro-eur&t=usd-us-dollar&amt=1)

我使用 .htaccess 将页面重写为：`f_t.htm/amt`为：

> [http://www.likeforex.com/currency-converter/euro-eur_usd-us-dollar.htm/1](http://www.likeforex.com/currency-converter/euro-eur_usd-us-dollar.htm/1)

但是，我的问题是当用户更改amt（页面中间）的值时，表格被重新汇总，重新汇总的页面仍然是参数格式。如何在重写后格式中制作网址？

提交按钮有什么问题，还是其他什么？

```
the form:
<form name="e" method="get" action="fxconverter.php">
the amt parameter:
<input type="text" id="amt" name="amt" size="16" maxlength="16" value="'.$amt.'" onclick="this.focus();this.select();" />'
the submit button:
<input type="submit" value="Convert" class="bt" />
the .htaccess line: 
RewriteRule ^(.*)_([^_]+)\.htm/([^/]+)$ fxconverter.php?f=$1&t=$2&amt=$3 [NC] 
```

非常非常感谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T16:50:31.107

您不能使用表单，无论`POST/GET`并期望参数像 url 一样输出，例如`http://www.likeforex.com/currency-converter/euro-eur_usd-us-dollar.htm/1`

您需要做的是稍微更改表单并使用 javascript 构建 url，然后重定向。

```
<script>
function goForm(form){
    f = form.elements["f"].value;
    t = form.elements["t"].value;
    amt = form.elements["amt"].value;

    window.location.href = 'http://www.likeforex.com/currency-converter/'+f+'_'+t+'.htm/'+amt;
}
</script>

<form name="currencyForm" method="GET" action="">
<input id="f" name="f" value="euro-eur" type="hidden">
<input id="t" name="t" value="usd-us-dollar" type="hidden">
<input id="amt" name="amt" size="16" maxlength="16" value="1" onclick="this.focus();this.select();" type="text">
<input type="button" name="button" value="Click" onClick="goForm(this.form)">
</form> 
```

然后您可以利用 mod_rewrite。

我个人会废弃`GET`（对于花哨的网址）并使用`POST`. 搜索引擎不会查询您的表单，因此仅使用 GET 没有任何优势，因为它可能会让想要抓取您的内容以消化其工作原理的人更容易。还要记住，没有启用 javascript 的任何人都无法在我的解决方案中使用该表单。

# java - 为什么 StringBuffer 没有改变？

> ID：11485338
> 
> 赞同：1
> 
> 时间：2012-07-14T16:15:17.490
> 
> 标签：java, stringbuffer

```
public class Test1{
public static void main(String[] args){
    StringBuffer s=new StringBuffer("abcde");
    reverseString(s);
    System.out.println(s);
}
public static int reverseString(StringBuffer s){
    StringBuffer s1=new StringBuffer("");
    int length=s.length();
    for(int i=length-1;i>=0;i--){
        s1.append(s.charAt(i));

    }
    s=s1;
    return 1;
} 
```

}

我想更改StringBuffer。在方法中，s =“edcba”，但我运行类，结果是“abcde”。为什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-14T16:30:24.680

在 JAVA 中，变量总是由 val 传递，而你想要做的事情，变量需要由 ref 传递。为了做你想做的事，引用不能改变，但对象的属性可以。

```
public static int reverseString(StringBuffer s){ 
    StringBuffer s1=new StringBuffer(""); 
    int length=s.length(); 
    for(int i=length-1;i>=0;i--){ 
        s1.append(s.charAt(i)); 

    } 
    s.replace(0, length, s1.toString()); 
    return 1; 
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-14T16:17:21.700

您只需在 reverseString 函数中更改 StringBuilder s1。所以 main 中的 s StringBuilder 会是一样的。相反，您应该在完成后返回 s1。

```
public class Test1{
    public static void main(String[] args){
        StringBuffer s=new StringBuffer("abcde");
        StringBuffer s1 = reverseString(s);
        System.out.println(s1);
    }
    public static StringBuffer reverseString(StringBuffer s){
        StringBuffer s1 =new StringBuffer("");
        int length=s.length();
        for(int i=length-1;i>=0;i--){
            s1.append(s.charAt(i)); 
        }
        return s1;
    }
} 
```

# database - 如何有效存储 1M 列表并快速检索？

> ID：11485343
> 
> 赞同：2
> 
> 时间：2012-07-14T16:15:43.823
> 
> 标签：database, nosql, html-lists, storage

列表格式为：

1.  清单项目一 (I) - 详情
2.  清单二（一）
3.  清单项目三（一）——详情
4.  清单四（o）
5.  清单五（o）
6.  清单项目六（I） - 详细信息

注意：

*   顺序很重要；因此编号
*   每个项目可以是（I）命令式或（o）可选的
*   列表必须在几乎所有方面都易于编辑
*   一些列表项包括描述字段（-详细信息）
*   列表项和描述必须是可搜索的
*   每个列表可能一次被多个外部实例请求和编辑

***问题：我应该使用哪种数据库/存储模型？***

我的一些头脑风暴：PostgresSQL 表 + 目录存储

*   每个列表将在表格中作为名称/链接列出
*   列表本身将存储为 HTML/XML 标记中的单个文件
*   搜索列表正文将由 grep (?)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T22:15:18.977

将整个内容放入数据库 - 没有文件，没有 XML，没有 grep。

您的问题中没有任何内容表明您需要混合存储的原因（如大小、奇异功能或旧式接口）。无论您使用哪个数据库（几乎 - 我可以看到[nosql](/questions/tagged/nosql "显示标记为“nosql”的问题")标记，但这不是很具体），它都能很好地应对。

忘记 XML，除非您有外部需求。如果 XML 只包含一长串简单值、名称-值对或同样对数据库友好的东西，那么 XML 与数据库不匹配。

*如果您使用*数据库或 XML，请忘记 grep 。请改用该技术各自的搜索原语。

# codeigniter - Codeigniter Pagination-配置（SQL语句）

> ID：11485347
> 
> 赞同：0
> 
> 时间：2012-07-14T16:16:35.393
> 
> 标签：codeigniter, pagination

我在显示分页时遇到了一点问题。即使只有一个查询，也会出现分页。我知道缺少的是我在 *$Pagesquery*上的 sql 语句。

**这是我的控制器**

```
 //This will only display local packages
    public function displayLocalPackages($page=0,$offset=6,$search=''){

        $search = $this->input->post('search');     
        $row = $this->m_tour->getAllLocalTours($offset,$page,$search);
        $data['usersTable'] = $row->result();
        $data['pagination'] = $this->m_tour->getLocTourPages();
        $data['offset'] = $offset;
        $data['page'] = $page;
        $data['search'] = $search;
        $data['title'] = 'Local Packages';
        $this->load->view('vdisplaylocaltours',$data);

    } 
```

**这是我的模型功能**：

```
 //will get the number of local pages

    public function getLocTourPages(){
    $Pagesquery = $this->db->get('tb_package');
            $config['base_url'] = site_url('ctour/displayLocalPackages');
     $config['total_rows']= $Pagesquery->num_rows();
            $config['per_page'] = 6;
            $config['first_link'] = 'First'; 
            $config['prev_link'] = 'Previous';
            $config['next_link'] = 'Next';
            $config['last_link'] = 'Last';  
            $this->pagination->initialize($config);
    return $this->pagination->create_links();   

    }   

public function getAllLocalTours($offset,$count,$search){

        #This will only occur if $search is NOT empty
        if ($search!=''){ 
                $this->db->where("(cat_id LIKE '%1%' AND pack_name LIKE '%$search%')");
                   $this->db->where('pack_status','available');
         }

        #cat_id corresponds with the local packages 
          $this->db->where('cat_id',1);
          $this->db->where('pack_status','available');
          $this->db->order_by('pack_name', 'desc'); 
          $this->db->order_by('pack_id', 'desc'); 

         #Query on the table package
          $LocalQuery = $this->db->get('tb_package',$offset,$count);

            if($LocalQuery->num_rows > 0){
                return $LocalQuery;
            }
            else{
            return FALSE;   
        }           
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-14T17:48:44.660

呵呵，在查看我的代码时，我意识到我只需要将相同的 sql 查询放在“getLocTourPages”函数中：P

$this->db->where('cat_id',1); $this->db->where('pack_status','available');

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-14T16:47:16.157

总行数应该是

```
$config['total_rows']= $Pagesquery->num_rows()/6; //per page is given as 6 in your code 
```

# android - 钛合金加速度计测试装置是否移动

> ID：11485349
> 
> 赞同：0
> 
> 时间：2012-07-14T16:16:58.090
> 
> 标签：android, titanium, accelerometer, titanium-mobile, accelerator

作为问题标题，我想使用加速器在三个轴 x,y,z 上的变化值来测试设备是静止还是移动。我可以使用钛来获得 3 轴加速器的值：

```
 Ti.Accelerometer.addEventListenter('update',function(e))
 {
    var x=e.x;
    var y=e.y;
    var z=e.z;
    var timestamp=e.timestamp;
 } 
```

在真实设备中，这些值不断变化。我想计算两次连续更新之间的变化。但我需要一些关于如何进行计算的指示。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T17:06:28.250

如果需要，您可以使用 Ti.App.Properties 变量来存储值。代替伪代码的 c++ 样式静态变量，使用属性并在事件侦听器结束时更新它。

[http://developer.appcelerator.com/apidoc/mobile/1.8.2/Titanium.App.Properties-module](http://developer.appcelerator.com/apidoc/mobile/1.8.2/Titanium.App.Properties-module)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-14T16:23:14.877

如何`addEventListener`保留 3 个`static`变量或包含最后一个值的单个`static`结构并计算`abs()`它们与当前值的差异？

伪代码（仅处理一个变量 - 扩展为三个）：

```
int f( int x )
{
    static int old_x = -1;

    if( x != old_x )
    { 
         // movement detected and do something
         old_x = x;
    }
    else
    {
         // no movement
    }
} 
```

}

# java - Android 多屏多选项菜单，无代码重复

> ID：11485352
> 
> 赞同：1
> 
> 时间：2012-07-14T16:17:14.050
> 
> 标签：java, android, android-activity, menu, options-menu

我的 android 应用程序有几个屏幕，在每个屏幕中，我都希望有一个类似的选项菜单，但略有不同。

例如，屏幕 A 将包含项目 1、2、3、4，屏幕 B 将包含项目 1、3、4、5

正如您所看到的，它们有共同的项目，这使得为每个项目设置不同的 xml 菜单变得很愚蠢，因为我将不得不一次又一次地定义这些项目。

有没有一种聪明的方法来做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-15T17:48:22.260

您可以尝试在各种布局中使用此代码

```
<include
android:layout_width="wrap_content"
android:layout_height="wrap_content"
layout="@layout/your_layout_with_options" /> 
```

其中 your_layout_with_options 是一个包含所有选项的 xml 文件。

所以你的屏幕上总是有相同的标识符，你可以选择要显示的女巫物品和要隐藏的女巫物品。

希望这有帮助

# javascript - 如何规范化 Opera 中的调整大小事件？

> ID：11485356
> 
> 赞同：0
> 
> 时间：2012-07-14T16:17:41.807
> 
> 标签：javascript, resize, opera

Opera 中的 Resize 事件的工作方式类似于`onresizeend`( [http://help.dottoro.com/ljscshjn.php](http://help.dottoro.com/ljscshjn.php) )。如何像在其他浏览器中一样对其进行规范化？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T03:01:32.380

您的意思是它仅在您停止调整大小时触发，而不是在调整大小期间多次触发？这是一个实现细节，据我所知，没有办法订阅重复的调整大小事件或“规范化”它。如果在调整元素大小时需要更新某些内容，则必须使用超时来查询大小。

# postgresql - 是否有像“psql --quiet”这样的“pg_restore --quiet”选项？

> ID：11485358
> 
> 赞同：38
> 
> 时间：2012-07-14T16:17:46.610
> 
> 标签：postgresql, postgresql-9.1, psql, pg-restore

`psql`有一个`-q`/`--quiet`选项（环境变量`QUIET`）。 `pg_restore`没有安静的选择。有什么方法可以`pg_restore`不详细地显示它正在执行的 SQL 命令吗？

```
# e.g., here's the verbose output that I don't want to see:
$ pg_restore --cluster 8.4/mycluster mycluster.dump
---- PostgreSQL database dump
--
SET statement_timeout = 0;SET client_encoding = 'UTF8';
SET standard_conforming_strings = off;SET check_function_bodies = false;
...
--
-- Name: data_src; Type: TABLE; Schema: public; Owner: postgres; Tablespace:--
CREATE TABLE data_src (
... 
```

* * *

## 回答 #1

> 赞同：73
> 
> 时间：2012-07-15T15:25:00.657

这个问题似乎暗示`pg_restore`正在执行这些 SQL 命令，而您不想在输出中看到它们。但是输出它们只是它应该做的事情。

`pg_restore`有两种操作模式，有或没有连接到数据库。当它在没有数据库（`-d`选项）的情况下被调用时，如问题所示：

> $ pg_restore --cluster 8.4/mycluster mycluster.dump

那么它的唯一目的是以纯文本形式输出一组 SQL 命令，这些命令应该被提供给 SQL 解释器以恢复数据库。这些 SQL 命令形成了一个连贯的集合，没有任何冗长的概念，并且它们不会自行**执行**。`pg_restore`它们通常被重定向到文件中以供以后执行或通过管道输入`psql`以立即执行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-08-21T20:07:19.920

您可以将标准输出重定向到文件：

```
pg_restore --cluster 8.4/mycluster mycluster.dump > pg_restore.log 
```

或者提供 -d 选项，但你想要的是`-f`要么`-d`

```
pg_restore -f pg_restore.sql --cluster 8.4/mycluster mycluster.dump
pg_restore -d yourdatabase --cluster 8.4/mycluster mycluster.dump 
```

# php - 如何获取 magento 商店的默认结帐 url？

> ID：11485361
> 
> 赞同：5
> 
> 时间：2012-07-14T16:18:07.950
> 
> 标签：php, magento

我正在尝试让用户在 Magento 中以编程方式结帐。我可以将它们发送给，`$this->_redirect('checkout/onepage');`但如果他们有某种第三方结帐扩展程序，我将不会使用正确的。有没有办法获取网站的默认结帐 url 并重定向到那里？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-11-19T11:25:53.263

你可以试试

```
$checkout_link = Mage::helper('checkout/url')->getCheckoutUrl(); 
```

此退货结帐链接在所有条件下

*   在使用 OnePagecheckout 或 OneStepcheckout 等任何扩展程序时
*   如果使用了扩展，它只返回基本的结帐 url

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-14T20:57:11.443

默认情况下，结帐链接由类的`getCheckoutUrl()`函数返回`Mage_Checkout_Block_Onepage_Link`。如果很简单：

```
public function getCheckoutUrl()
{
    return $this->getUrl('checkout/onepage', array('_secure'=>true));
} 
```

3rd 方扩展很可能会覆盖这个类（我检查了 OneStepCheckout 1.4，它的工作原理是这样的）。

# ios - Flex 自定义皮肤不调出 IOS 软键盘

> ID：11485363
> 
> 赞同：0
> 
> 时间：2012-07-14T16:18:19.603
> 
> 标签：ios, apache-flex, textinput

当我在 Flex 4.6 上为 TextInput 创建自定义外观时，此 textInput 在激活时不会调用 iOS 软键盘。

我能做些什么来改变这一点吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T19:17:14.437

我认为您正在使用桌面应用程序的标准 TextInput 皮肤类作为自定义皮肤的基类，但对于移动应用程序，您应该使用移动皮肤：spark.skins.mobile.TextInputSkin

# ruby-on-rails - Rails3 中防止垃圾邮件的技术

> ID：11485367
> 
> 赞同：0
> 
> 时间：2012-07-14T16:18:36.577
> 
> 标签：ruby-on-rails, ruby-on-rails-3, spam-prevention

在活动记录保存其记录之前，是否有任何技术可以防止垃圾邮件发布。
我只是想放个before_filter，它判断注册的关键字是否包含在过去的参数中，并强制重定向。

是正常的方式吗？或者随着垃圾邮件关键字的增多，它会严重减慢系统速度？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T16:27:28.943

我会通过其中一个宝石使用像 Akismet 这样的服务：

[https://www.ruby-toolbox.com/categories/spam_detection](https://www.ruby-toolbox.com/categories/spam_detection)

# python - 内存错误：numpy.genfromtxt()

> ID：11485369
> 
> 赞同：3
> 
> 时间：2012-07-14T16:18:49.173
> 
> 标签：python, memory, numpy, scipy

我有一个 50,000x5,000 矩阵（浮点）文件。当用于 `x = np.genfromtxt(readFrom, dtype=float)`将文件加载到内存中时，我收到以下错误消息：

> 文件“C:\Python27\lib\site-packages\numpy\lib\npyio.py”，第 1583 行，在 genfromtxt for (i, converter) in enumerate(converters)])
> MemoryError

我想将整个文件加载到内存中，因为我正在使用 Scipy 计算每个向量之间的欧几里德距离。`dis = scipy.spatial.distance.euclidean(x[row1], x[row2])`

有什么有效的方法可以将一个巨大的矩阵文件加载到内存中。

谢谢你。

`Update:`

我设法解决了这个问题。这是我的解决方案。我不确定它是否有效或逻辑正确，但对我来说效果很好：

```
x = open(readFrom, 'r').readlines()
y = np.asarray([np.array(s.split()).astype('float32') for s in x], dtype=np.float32)
....
dis = scipy.spatial.distance.euclidean(y[row1], y[row2]) 
```

请帮助我改进我的解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T16:26:05.933

您实际上使用的是 8 字节浮点数，因为 python`float`对应于 C `double`（至少在大多数系统上）：

```
a=np.arange(10,dtype=float)
print(a.dtype)  #np.float64 
```

您应该将数据类型指定为`np.float32`. 根据您的操作系统，以及它是 32 位还是 64 位（以及您使用的是 32 位 python 还是 64 位 python），可供 numpy 使用的地址空间可能小于您的 4Gb，这也可能是一个问题.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-14T16:34:06.427

根据您的操作系统和 Python 版本，您很可能永远无法分配 1GB 数组（mgilson 的答案就在此处）。问题不是内存不足，而是*连续*内存不足。如果您使用的是 32 位机器（尤其是运行 Windows），那么添加更多内存将无济于事。迁移到 64 位架构可能会有所帮助。

使用较小的数据类型肯定会有所帮助；根据您使用的操作，16 位浮点数甚至 8 位整数可能就足够了。

如果这些都不起作用，那么您将不得不承认数据不适合内存。您必须分段处理它（在这种情况下，将数据存储为 HDF5 数组可能非常有用）。

# facebook - 我想在每个页面上显示一个 FB 评论框，但有针对该页面的自己的评论

> ID：11485371
> 
> 赞同：2
> 
> 时间：2012-07-14T16:19:05.657
> 
> 标签：facebook, plugins, comments, facebook-javascript-sdk, facebook-social-plugins

我最近为我正在制作的网站编写了自己的博客。我想使用 facebook 来处理帖子的评论，所以我集成了插件。然而，我注意到了一些奇怪的事情。如果我对一篇博文发表评论，然后转到另一篇博文，我的评论也会出现在其他博文上。我怎样才能让每个帖子都有自己的评论集？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-14T19:50:16.357

您必须为每个帖子设置不同的 data-href 属性。以下是我在 Yii 中的操作示例：

```
<div class="fb-comments" data-href="http://domain.com/post/view/<? echo $model->id; ?>" data-num-posts="4" data-width="695"></div> 
```

关键是每个帖子的 data-href 值必须是唯一的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-14T19:45:36.123

假设您使用的是 html5 评论框。

**参考：** [https ://developers.facebook.com/docs/reference/plugins/comments/](https://developers.facebook.com/docs/reference/plugins/comments/)

`data-href=""` // data href 设置盒子的 url “object id”，你需要使用带有 php、javascript 或任何你编码的语言的动态系统。

* * *

```
<div style="padding-left:5px; min-height:500px" class="fb-comments" data-href="'+newUrl+'" data-num-posts="20" data-width="380"></div> 
```

* * *

“我使用” **示例：** 以下示例适用于具有动态 url 的页面

```
example.com?id=thisid&thisarticle=article-name 
```

* * *

```
<div id="thecomments"></div>
    <script>
    function changeCommentsUrl(newUrl){
    // should refresh fb comments plugin for the "newUrl" variable
    document.getElementById('thecomments').innerHTML='';
    parser=document.getElementById('thecomments');
    parser.innerHTML='<div style="padding-left:5px; min-height:500px" class="fb-comments" data-href="'+newUrl+'" data-num-posts="20" data-width="380"></div>';
    FB.XFBML.parse(parser);
    }
    var thisurl = document.write(document.URL);
    changeCommentsUrl(thisurl);
    </script> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-08-29T11:36:36.930

您可以简单地将这种片段放在您的页脚中：

```
<script>
    $(".fb-comments").attr("data-href", window.location.href);
</script> 
```

它完成了这项工作...

# c# - 使用 Autofac WcfIntegration 时如何处理构造函数异常

> ID：11485372
> 
> 赞同：10
> 
> 时间：2012-07-14T16:19:13.910
> 
> 标签：c#, inversion-of-control, autofac

有没有办法处理 WCF 服务的构造函数抛出的异常，当该构造函数接受依赖项时， **IoC 容器（在本例中为 AutoFac）对依赖项的实例化导致异常**？

考虑具有以下构造函数的 WCF 服务：

```
public InformationService(IInformationRetriever informationRetriever)
{
    _informationRetriever = informationRetriever;
}
//... the service later makes use of the injected InformationRetriever 
```

该服务使用 AutoFac WcfIntegration 和`AutofacWebServiceHostFactory`（这恰好是一个 RESTful 服务）。

依赖项注册在服务的 global.asax.cs 中，即：

```
builder.RegisterType<InformationRetriever>()
                .As<IInformationRetriever>() 
```

现在，`InformationRetriever`实现在其构造函数中执行了一些检查，以确保一切就绪，以便能够完成其工作。当它在这个阶段发现问题时，它会抛出异常。

但是，我不希望服务的调用者收到 AutoFac 异常：

`An exception was thrown while invoking the constructor ... on type InformationRetriever`

实际上，我正在尝试测试：

**鉴于**InformationService 正在运行

**当**我调用 GetSomeInformation() 方法时

**并且**InformationRetriever 不能被实例化

**然后**我想返回一个友好的错误信息

**并**记录实际的异常

这是我的设计的问题，还是有已知的模式来克服或防止这个问题？

我四处寻找，找不到有关此类问题的任何信息。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-16T15:13:56.230

以 DI 风格编写的对象通常会经历两个独立的阶段：组合和执行。组合阶段是您连接依赖关系并执行诸如抛出参数异常之类的事情的地方。您通常希望此阶段没有有意义的行为，因为这可以让您发现系统*配置*中的错误。第二阶段，执行，是您使用第一阶段（依赖项）的输出来完成工作的地方。

将这两个阶段分开可以消除很多歧义和复杂性。例如，您不要在给割草机充气的同时修剪草坪；这导致这两种活动变得更加复杂（和危险！）

在这种情况下，`InformationRetriever`通过在其构造函数中执行有意义的工作来合并组合和执行阶段。这种混合正是导致您试图避免的问题：一个有意义的业务异常被包装在一个组合异常中。也不清楚如何处理异常，因为顶级调用者是 Autofac 而不是实际要求`InformationRetriever`工作的组件。

我建议在调用时努力进行验证`InformationRetriever`；这消除了 Autofac 异常，并允许`InformationService`在没有任何技巧的情况下处理异常情况。

这种方法的一个潜在缺点是验证将在每次调用时进行`InformationRetriever`，而不是在构造函数中进行一次。你有两个选择：1）让它每次都发生，以绝对确定工作是有效的，或者 2）跟踪你是否做过检查，如果你以前没有做过。

如果您选择 #2，您可以`InformationRetriever`通过使用装饰器将其包装在同一接口的验证版本中来保持清洁：

```
public class ValidatingInformationRetriever : IInformationRetriever
{
    private readonly IInformationRetriever _baseRetriever;
    private bool _validated;

    public ValidatingInformationRetriever(IInformationRetriever baseRetriever)
    {
        _baseRetriever = baseRetriever;
    }

    public void Foo()
    {
        if(!_validated)
        {
            Validate();

            _validated = true;
        }

        _baseRetriever.Foo();
    }

    private void Validate()
    {
        // ...
    }
} 
```

您可以使用[Autofac 的装饰器支持](http://nblumhardt.com/2011/01/decorator-support-in-autofac-2-4/)来注册它，如下所示：

```
builder
    .RegisterType<InformationRetriever>()
    .Named<IInformationRetriever>("base");

builder.RegisterDecorator<IInformationRetriever>(
    (c, inner) => new ValidatingInformationRetriever(inner),
    fromKey: "base"); 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-07-14T19:25:38.230

我不是构造函数因为错误参数以外的原因抛出异常的忠实粉丝。我可能会以不同的方式为我的类型建模。但这里有一些想法。起初我想过做这样的事情：

```
builder
    .Register(c => {
        try
        {
            return new InformationRetriever();
        }
        catch (Exception)
        {
            return new FailoverInformationRetreiver();
        }})
    .As<IInformationRetriever>(); 
```

...`FailoverInformationRetreiver`在成员访问中引发异常的地方。另一个想法可能是：

```
public InformationService(Lazy<IInformationRetriever> informationRetriever)
{
    _informationRetriever = informationRetriever;
} 
```

以及`try/catch`里面的用法`InformationService`。`InformationRetriever`如果在应用程序启动时知道可用性，您可以选择另一个选项：

```
// inside your container builder:
if (InformationRetreiver.IsAvailable())
    builder.RegisterType<InformationRetriever>()
           .As<IInformationRetriever>()

// inside InformationService, make the dependency optional
public InformationService(IInformationRetriever informationRetriever = null)
{
    _informationRetriever = informationRetriever;
} 
```

这些想法有帮助吗？

# .htaccess - .htaccess 将所有目录和子域重定向到 http://domain.com/

> ID：11485373
> 
> 赞同：0
> 
> 时间：2012-07-14T16:19:19.447
> 
> 标签：.htaccess, redirect

我已经搜索了谷歌和 stackoverflow 来解决这个问题。希望这里有人可以提供帮助。我有一个不再使用的旧网站。我希望使用 .htaccess将所有请求 301 重定向到[http://example.com/ 。](http://example.com/)这包括请求，例如：

```
- http://whatever.example.com/
- http://example.com/whatever
- http://whatever.example.com/whatever 
```

我尝试了一些我在网上找到的想法，但是它们要么不会重定向子域和目录，要么会导致无限循环。

谢谢，迈克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-15T00:19:27.817

感谢@Virendra 的帮助。

这就是我现在所拥有的，并且有效。第一个条件和规则确保请求的文件不是`/robots.txt`，然后是 301 到[http://socialenigma.com/](http://socialenigma.com/)。第二个条件和规则检查主机是`socialenigma.com`（没有任何子域），如果不是，则 301 到[http://socialenigma.com/](http://socialenigma.com/)。

```
RewriteEngine on
RewriteCond %{REQUEST_URI} !^/(robots\.txt).*$
RewriteRule . http://socialenigma\.com/ [R=301,L]
RewriteCond %{HTTP_HOST} !^socialenigma\.com$
RewriteRule (.*) http://socialenigma\.com/$1 [R=301,L] 
```

似乎这并不像它应该的那样有效。也许有人可以帮助浓缩这些规则。

# php - 注册期间的 PHP 类别选择

> ID：11485375
> 
> 赞同：0
> 
> 时间：2012-07-14T16:19:31.200
> 
> 标签：php, javascript, jquery, mysql

我在 mysql 数据库中有一个类别列表。我希望用户在注册页面选择他们想要选择的类别。你们能给我你的想法，我怎样才能实现这个目标？.

我想显示所有可用的类别，我可以将其拉入任何此类，例如下拉、选择框和简单页面等。我可以使用多项选择选项二，但我不喜欢那样。我需要一些用户可以选择类别的东西，然后如果他们错误地选择错误也可以删除它们，我还限制他们只选择 2 个类别，最后我希望类别选择将通过 id 保存在配置文件数据库中（我能做到）。

我有几个想法。

第一个想法是在右侧放置一个选择框并从数据库中获取所有类别，然后在中心添加两个按钮“添加”和“删除”，然后在它们之后添加另一个空文本区域框，其中显示用户类别，他通过单击“添加”添加”按钮。我希望你能理解我的想法。

你能帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T11:07:05.000

You can do this with following ides

First when users select categories and submit button then you want insert that categories id in category column in user table.

Second when user login then fetch only that categories which store in users category field.

i think u understand my solution.

# c# - 使用 BindingSource 将文本框链接到数据集

> ID：11485377
> 
> 赞同：2
> 
> 时间：2012-07-14T16:19:43.270
> 
> 标签：c#, winforms, visual-studio-2010, binding, sql-server-ce

这是我正在处理的表格部分：

![在此处输入图像描述](../Images/4c52394837b138dde402fd9143802f47.png)

以下代码使用 bindingSource 将 BindingNavigator 链接到数据集。我可以使用此绑定源将两个文本框连接到数据吗？

我是否只需要使用文本框的属性或者这更复杂？

即，当表单加载第一条记录的字段“工作短语”和“描述”时，将显示，当我使用导航器滚动时，这些框中的值将相应更改。

```
public partial class uxRevisionHelperForm : Form
{

    public SqlCeConnection conn = new SqlCeConnection(ConfigurationManager.ConnectionStrings["WindFormAppRevisionHelper.Properties.Settings.DefinitionsDBConnectionString"].ConnectionString);
    BindingSource definitionsBindingSource = new BindingSource();

    public uxRevisionHelperForm()
    {
        InitializeComponent();
        uxDescriptionTextBox.AutoSize = true;
        this.hookUpBindingNavigator();
    }

    public void hookUpBindingNavigator()
    {            

        SqlCeDataAdapter da = new SqlCeDataAdapter(new SqlCeCommand("Select * From tb_Definitions",conn));
        DataSet ds = new DataSet("Helper");
        ds.Tables.Add("DefinitionsTable");
        da.Fill(ds.Tables["DefinitionsTable"]);

        // Assign the BindingSource.
        this.uxBindingNavigator.BindingSource = this.definitionsBindingSource;
        this.definitionsBindingSource.DataSource = ds.Tables["DefinitionsTable"];

    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-14T17:14:58.443

尝试使用文本框的 DataBinding 集合。

像这样的东西：

```
uxDescriptionTextBox.DataBindings.Add("Text", 
                                      definitionsBindingSource,
                                      fieldInTable); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-14T17:40:27.510

已在此处添加`full source code`（突出显示您的要求） - [http://sdrv.ms/NyXHdu](http://sdrv.ms/NyXHdu)。下载>在VS2010中打开解决方案>按F5

**[更新]**

1.  双击 Form.cs 设计器并观察`productListBindingSource`. 它绑定到一个自定义对象 -`The ProductList class`

2.  `TextBoxes`然后查看&的属性`ComboBox`并观察`DataBindings > Text property`. 它们绑定到 productListBindingSource 的单个项目。见下图。

![在此处输入图像描述](../Images/dfa8a713b1c19550124ed2a96cdf28dd.png)

Courtsey - [http://www.apress.com/9781590594391/](http://www.apress.com/9781590594391/) [第 8 章]

# c++ - 根据 POS Tag 值更改同义词引理

> ID：11485379
> 
> 赞同：1
> 
> 时间：2012-07-14T16:20:11.717
> 
> 标签：c++, python, nlp, wordnet

我需要在一个句子中用它的同义词替换一个单词。为此，我对句子中的每个单词进行 POS 标记，对于我希望替换的单词，我会找到最匹配的同义词 Wordnet synset。现在，我缺少的是采用同义词引理并根据原始单词 POS Tag 值对其进行更改的能力。我想知道是否有人知道 C++ 或 Python 中的库，我可以采用引理和 POS Tag 值并根据输入的 POS Tag 更改引理...例如，句子：“大陪审团评论”

“评论”这个词被贴上了“VBD”（过去时）的标签

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T12:23:44.940

您正在寻找形态生成器。在此处查看英语工具列表：

[http://aclweb.org/aclwiki/index.php?title=Morphology_software_for_English](http://aclweb.org/aclwiki/index.php?title=Morphology_software_for_English)

我不熟悉所有工具，但对于简单的英语变形，morphg 效果很好（请注意，它是用于非商业用途）。

# java - JAVA 中的 WebService SOAP 和 WSDL 书籍

> ID：11485380
> 
> 赞同：-3
> 
> 时间：2012-07-14T16:20:12.680
> 
> 标签：java, web-services, soap

我已经搜索了使用 SOAP 和 WSDL 的 WebServices，但没有幸运地找到任何东西。当服务器和客户端都部署在同一个 Web 服务器中时，即使是我发现和测试的那些教程也能很好地工作。

我还需要完全理解 WebService 的行话。

所以请推荐一些好书。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T01:26:43.110

我认为 Oreilly Enterprise JavaBeans 3.0 这本书是我用过的最好的一本书。它是在培训课上给我的，涵盖了您提到的所有主题。

# c# - Generating manifest when assembly (.dll) is generated at runtime using CodeDom.CompilerResults

> ID：11485383
> 
> 赞同：2
> 
> 时间：2012-07-14T16:20:50.277
> 
> 标签：c#, reflection, manifest, codedom

I'm generating an assembly (*.dll) at runtime. the compilation process is performed using CodeDom, as is recommended in following post:

[Generating DLL assembly dynamically at run time](https://stackoverflow.com/questions/604501/generating-dll-assembly-dynamically-at-run-time)

My code and assembly are generated successfully, not errors. The problem comes when I'm attempting load this generated assemblies at runtime via reflection using :

```
 // load for reflection only
 var _assemblyTempLoad = Assembly.LoadFrom(assembly.FullName); 
```

Following exception is thrown:

> "Could not load file or assembly 'nameforassembly.dll' or one of its dependencies. The module was expected to contain an assembly manifest."

How to generate the manifest file or fix this issue?

I want clarify that assembly is generated at runtime, using following code:

```
CompilerResults compilerResult = codeDomProvider.CompileAssemblyFromFile(compilerParameters, Path.Combine(path, sourceCodeFile));` 
```

Thank you in advance

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-14T16:59:44.313

Have you tried the following

```
compilerParameters.CompilerOptions = string.Format("/win32manifest: {0}", manifestFilename); 
```

If you've already have the `CompilerOptions` set to some value, just concatenate the strings

```
compilerParameters.CompilerOptions += string.Format(" /win32manifest: {0}", manifestFilename); 
```

[The win32manifest parameter](http://msdn.microsoft.com/en-us/library/bb545961.aspx) tells the compiler to also generate a manifest file.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T21:13:17.463

when an assembly is created at runtime (on the fly), the assembly info or metadata is not placed into assembly automatically. The use of the [Assembly] attribute was necessary too. On this way, the last step in the process was place the /platform argument to the compiler (thanks sgmoore). I can saw this using Redgate reflector. The assembly was shown without versioning and metadata attributes. Like this:

```
streamWriter.WriteLine(string.Format("[assembly: AssemblyTitle(\"{0}\")]", yourassembly.propertyfornamespace.Replace(" ", "")));
streamWriter.WriteLine(string.Format("[assembly: AssemblyDescription(\"{0}\")]", yourassembly.propertywithdescription)); 
```

# javascript - 从多维json中获取数据

> ID：11485386
> 
> 赞同：1
> 
> 时间：2012-07-14T16:20:55.983
> 
> 标签：javascript, json, extjs, sencha-touch-2

我有这个json

```
 {
   "root":{
      "category":[
         {
            "categoryId":"1",
            "children":{
               "child":[
                  {
                     "subcategoryId":"1",
                     "children":{
                        "child":[
                           {
                              "productId":"1"
                           },
                           {
                              "productId":"2"
                           }
                        ]
                     }
                  },
                  {
                     "subcategoryId":"2",
                     "children":{
                        "child":[
                           {
                              "productId":"3"
                           },
                           {
                              "productId":"4"
                           }
                        ]
                     }
                  },
                  {
                     "subcategoryId":"3",
                     "children":{
                        "child":[
                           {
                              "productId":"5"
                           },
                           {
                              "productId":"6"
                           }
                        ]
                     }
                  }
               ]
            }
         },
         {
            "categoryId":"2",
            "children":{
               "child":[
                  {
                     "subcategoryId":"4",
                     "children":{
                        "child":[
                           {
                              "productId":"7"
                           },
                           {
                              "productId":"8"
                           }
                        ]
                     }
                  },
                  {
                     "subcategoryId":"5",
                     "children":{
                        "child":[
                           {
                              "productId":"9"
                           },
                           {
                              "productId":"10"
                           },
                           {
                              "productId":"11"
                           }
                        ]
                     }
                  }
               ]
            }
         }
      ]
   }
} 
```

这个模型

```
Ext.define('ParentMode', {
        extend: 'Ext.data.Model',
            config: {
            fields: [
            {name: 'categoryId', type: 'string'},
            {name: 'children'} // VERY IMPORTANT TO ADD THIS FIELD
            ],
            proxy: {
                type: 'ajax',
                url : 'store.php',
                reader: {
                type: 'json',
                    rootProperty: 'root.category' // this works fine
                }
            }
        }
}) 
```

我有 3 个不同的视图：第一个视图“主”，我有一个显示“categoryId”的数据视图：

```
 var myStore = Ext.create('Ext.data.Store', { 
            model: 'ParentMode',
            autoLoad:true
    }); 

var dataview = Ext.create('Ext.DataView', {
    scrollable: false,
    store: myStore,
    listeners: {
        itemtap: function(list, index, target, record){
            this.up('main').push({
                xtype: 'categories',
                title: record.get('categoryId'),
                extraRecord:record
        })
        }
    }
}); 
```

正如您在此“主”视图中看到的那样，我推送一个新视图“类别”，当点击一个项目并为其分配一个新标题时，得到“categoryId”，现在一切正常。现在在“类别”视图中，我以这种方式显示所有“子类别 ID”：

```
 var dataview = Ext.create('Ext.dataview.DataView', {
            store: myStore,
            itemTpl: '<tpl for="children.child"><div class="category-thumb">SubcategoryID: {subcategoryId}</div></tpl>',

... 
```

现在的问题是如何在 itemTap 中推送一个新视图“产品”，将标题设置为“子类别 ID”我有这个：

```
 listeners: {
        itemtap: function(list, index, target, record){
            this.up('main').push({
                   xtype: 'products',
           title: record.get('subcategoryId'),
            })
         }
    } 
```

问题是

```
title: record.get('subcategoryId'), 
```

不起作用，我想是因为它嵌套在 json 中，我想我必须做一些循环，但我不知道怎么做。

再次在“产品”中遇到同样的问题我怎样才能获得“产品ID”

# java - 如何实现具有不同返回类型的覆盖方法？

> ID：11485387
> 
> 赞同：4
> 
> 时间：2012-07-14T16:21:07.203
> 
> 标签：java, oop, abstract-class

考虑一下我在 Java 中有一个抽象类的情况；

```
public abstract class Foo
{
    public abstract int myOperation();
} 
```

现在，它的一些子类可能会像这样覆盖 myOperation；

```
class A extends Foo
{
    public int myOperation()
    {
            // Do stuff
    }
} 
```

但是，如果一个子类想要返回一些其他数据类型，例如；

```
class A extends Foo
{
    public Object myOperation()
    {
        // Do stuff
    }
} 
```

我希望方法名称相同，以保持设计完整，以便客户端不必选择调用哪个方法。除了具有单独的方法（其中一个是空实现或使用 Object 作为返回类型）之外，是否有解决方法？或者这是一个非常糟糕的面向对象设计的例子？

我听说过 C++ 中的协变返回类型，并想知道 Java 是否有其他机制。

我也可以在这里自由使用界面。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-14T16:22:10.760

你不能。既不使用继承，也不使用接口。这将是一个编译器错误，因此您根本无法运行您的程序。

您可以返回`java.lang.Object`并返回您想要的任何对象。如果您需要返回一个原语，您可以返回它的对象包装器。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-07-14T16:23:25.207

“这是面向对象设计的一个非常糟糕的例子吗？”是的。你不能这样做。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-07-14T16:24:04.503

Java 具有协变返回类型，但返回类型必须更具体，而不是更具体。如果父类中的一个方法返回`int`，那么它的所有子类型也必须这样做，否则这种方法的调用者并不真正知道它得到的是什么类型。

```
Foo foo = new A()
int i = foo.method(); 
```

如果 method() 返回任何内容，但`int`此语句不再有意义。

当你可以做的是，如果超类中的方法返回`Object`并且一个服务类返回，`Number`那么两者的子类都可以返回`Integer`

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-07-14T16:32:14.167

当您使用返回类型作为派生即协变量时，您可以有不同的数据类型。当您使用原始数据类型时，您无法更改它。

如果超类方法是任何派生数据类型，而在子类中覆盖返回类型可以是相同的派生数据类型或子类派生数据类型。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-07-14T16:26:17.430

这是不可能的，因为在抽象类中声明的方法定义了一个协定：它返回一个 int。所有实现都必须遵守该契约。如果你这样做会发生什么：

```
Foo foo = new A();
int i = foo.myOperation(); 
```

它会中断，因为 myOperation 不会返回`int`. 这就是为什么它是不允许的。

但是，允许的是以下内容：

```
public abstract class Foo {
    public abstract Object myOperation();
}

public class A extends Foo {
    @Override
    public String myOperation() {
        return "some string";
    }
} 
```

在这种情况下，合同得到尊重。该方法必须返回一个Object，它返回一个String，而String**就是**一个Object。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-07-14T16:29:31.127

你不能这样做，因为它会破坏`Foo`.

```
A a = new A();
someUtilityMethod(a);

...

void someUtilityMethod(Foo foo){
   int i = foo.myOperation();    // This would break
} 
```

这个原则被称为[Liskov 替换原则](http://en.wikipedia.org/wiki/Liskov_substitution_principle)，它是构建 OO**的**基础。

# directx - 在 Windows Metro 下使用 DirectX 绘制位图

> ID：11485389
> 
> 赞同：0
> 
> 时间：2012-07-14T16:21:20.620
> 
> 标签：directx, windows-8, microsoft-metro

我正在尝试使用 DirectX 创建并绘制位图，然后使用该位图绘制到屏幕上。我有以下测试代码，我从多个来源拼凑而成。我似乎能够毫无错误地创建位图，我尝试用红色填充它。但是，当我使用位图绘制到屏幕上时，我只会得到一个黑色矩形。谁能告诉我我可能做错了什么？请注意，这是作为 Windows 8 Metro 应用程序运行的，如果这有所不同的话。

请注意，格式化程序似乎正在删除我的尖括号，我不知道如何阻止它这样做。“device”变量属于 ID3D11Device 类，“context”变量是 ID3D11DeviceContext，d2dContext 变量是 ID2D1DeviceContext，dgixDevice 变量是 IDXGIDevice，“d2dDevice”是 ID2D1Device。

```
void PaintTestBitmap(GRectF& rect)
{
    HRESULT   hr;
    UINT      creationFlags = D3D11_CREATE_DEVICE_BGRA_SUPPORT;

    D3D_FEATURE_LEVEL featureLevels[] = 
    {
        D3D_FEATURE_LEVEL_11_1,
        D3D_FEATURE_LEVEL_11_0,
        D3D_FEATURE_LEVEL_10_1,
        D3D_FEATURE_LEVEL_10_0,
        D3D_FEATURE_LEVEL_9_3,
        D3D_FEATURE_LEVEL_9_2,
        D3D_FEATURE_LEVEL_9_1
    };

    ComPtr<ID3D11Device>        device;
    ComPtr<ID3D11DeviceContext> context;
    ComPtr<ID2D1DeviceContext>  d2dContext;

    hr    = D3D11CreateDevice(  NULL,
                                D3D_DRIVER_TYPE_HARDWARE,
                                NULL,
                                creationFlags,
                                featureLevels,
                                ARRAYSIZE(featureLevels),
                                D3D11_SDK_VERSION,
                                &device,
                                NULL,
                                &context);

    if (SUCCEEDED(hr))
    {
        ComPtr<IDXGIDevice> dxgiDevice;
        device.As(&dxgiDevice);

        // create D2D device context
        ComPtr<ID2D1Device> d2dDevice;
        hr = D2D1CreateDevice(dxgiDevice.Get(), NULL, &d2dDevice);

        if (SUCCEEDED(hr))
        {
            hr = d2dDevice->CreateDeviceContext(D2D1_DEVICE_CONTEXT_OPTIONS_NONE, &d2dContext);

            if (SUCCEEDED(hr))
            {
                ID2D1Bitmap1 *pBitmap;
                D2D1_SIZE_U  size = { rect.m_width, rect.m_height };
                D2D1_BITMAP_PROPERTIES1 properties = {{ DXGI_FORMAT_R8G8B8A8_UNORM, D2D1_ALPHA_MODE_PREMULTIPLIED }, 96, 96, D2D1_BITMAP_OPTIONS_TARGET, 0 };

                hr = d2dContext->CreateBitmap(size, (const void *) 0, 0, &properties, &pBitmap);
                if (SUCCEEDED(hr))
                {
                    d2dContext->SetTarget(pBitmap);
                    d2dContext->BeginDraw();    
                    d2dContext->Clear(D2D1::ColorF(D2D1::ColorF::Red));     // Clear the bitmap to Red
                    d2dContext->EndDraw();

                    // If I now use pBitmap to paint to the screen, I get a black rectange
                    // rather than the red one I was expecting
                }
            }
        }
    }
} 
```

请注意，我对 DirectX 和 Metro 风格的应用程序都很陌生。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-23T08:12:53.280

您可能忘记的是您没有在上下文中绘制位图。

你可以尝试的是

```
 hr = d2dContext->CreateBitmap(size, (const void *) 0, 0, &properties, &pBitmap);
            if (SUCCEEDED(hr))
            {
                ID2D1Image *pImage = nullptr;
                d2dContext->GetTarget(&image);

                d2dContext->SetTarget(pBitmap);
                d2dContext->BeginDraw();    
                d2dContext->Clear(D2D1::ColorF(D2D1::ColorF::Red));     // Clear the bitmap to Red
                d2dContext->SetTarget(pImage);
                d2dContext->DrawBitmap(pBitmap);
                d2dContext->EndDraw();

            } 
```

你所做的是存储你的渲染目标，然后绘制你的位图，最后你将你的上下文设置为正确的渲染目标，让它在上面绘制你的位图

# python - 将过滤器函数转换为 Python 代码

> ID：11485390
> 
> 赞同：1
> 
> 时间：2012-07-14T16:21:23.350
> 
> 标签：python, filter, signal-processing

我试图了解如何将过滤器（在本例中为 Notch（阻带）过滤器）转换为 Python，但我不知道如何。

```
x(n)=-2*x(n)/(-0.9*x(n) -0.9*x(n-1)) 
```

任何人都可以帮助我吗？

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-14T16:34:24.493

如果您使用的是 numpy 数组，这应该可以工作：

```
x[1:]=-2*x[1:]/(-0.9*x[1:]-0.9*x[:-1]) 
```

这会更改您的数组，但您可以轻松地将其分配给一个新数组。

```
y=-2*x[1:]/(-0.9*x[1:]-0.9*x[:-1]) 
```

请注意，对于第 0 个元素，您的算法并没有很好地定义，所以我的翻译`x[0]`保持不变。

**编辑**

要将可迭代更改为 numpy 数组：

```
import numpy as np
x=np.array(iterable)  #pretty easy :) although there could be more efficient ways depending on where "iterable" comes from. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-14T16:34:30.750

```
result = []
#prime your result, that is, add the initial values to handle indexing
lower_bound = #
upper_bound = #
for n in range(lower_bound,upper_bound):
    result.append( 2*result[n]/(-0.9*result[n] -0.9*result[n-1]) ) 
```

# javascript - 如何将图像列表放入固定 div

> ID：11485391
> 
> 赞同：0
> 
> 时间：2012-07-14T16:21:24.707
> 
> 标签：javascript, html, css, fixed

我有一个横向固定的 div（如菜单栏），我试图弄清楚如何将图像放在那里，在一个类似表格的视图（例如 3 列和 X 行）中，知道这些图像是动态的生成。

更具体地说，我将在其中放置 10 张图像。我可以把它们放在 html 中，但是 javascript 会根据各种因素（主要是用户权限）显示或不显示某些图像，所以我希望这些图像自动重新排序。

我更像是一个 JS 而不是 CSS 粉丝，所以我会将图像放置在固定位置并使用脚本来处理它们的顶部和左侧属性，但我确信有一些方法可以使用 css（不是 css3，我正在尝试做一些复古兼容性）或任何其他更简单的方式。

非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T17:12:41.657

我认为这就是你所需要的。 [http://jsfiddle.net/x6zfW/10/](http://jsfiddle.net/x6zfW/10/)

请确认。

HTML：

```
<div id="ui_myMenu">
            <div id ="ui_ui_myMenuTitle">HELLO TITLE</div>
            <img id="ui_image1" class="ui_menuIcons" src ="http://www.designworks.co.nz/uploads/images/case-studies/nz-post/post_button.jpg"/>
            <img id="ui_image2" class="ui_menuIcons" src="http://t2.ftcdn.net/jpg/00/24/77/15/400_F_24771516_GheG3ehk2o3T6mJJkFy9k2siYoMrVigc.jpg"/>
</div> 
```

CSS：

```
 #ui_myMenu{
position: fixed;
    bottom: 15%;
    width: 575px;
    height: 426px;
    left: 2%;
    top:2%;
    background:url('http://www.psdgraphics.com/wp-content/uploads/2009/02/abstract-background.jpg') left top no-repeat;
}
#ui_myMenuTitle{
    margin-left: 16%;
    margin-top: 4.8%;
    font-size: 380%;
}
.ui_menuIcons{
    float: left;
    width : 5%;
    height : 7%;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-14T16:26:11.487

听起来像[砌石](http://masonry.desandro.com/)的工作......

如果没有，请包装图标并定位它们的容器[http://jsfiddle.net/mplungjan/HAggq/](http://jsfiddle.net/mplungjan/HAggq/)

# api - OAuth2Decorator：使用开发者的令牌为用户运行 API 调用

> ID：11485392
> 
> 赞同：0
> 
> 时间：2012-07-14T16:21:40.093
> 
> 标签：api, google-app-engine, oauth-2.0, google-bigquery, google-api-python-client

对于“正常”的 oauth2 舞蹈，我可以指定用户并获得相应的令牌。这使我可以伪装成该用户（即代表他）进行 API 调用。

它还可以允许用户伪装成我来拨打电话。一个用例是 bigquery，我不必向用户授予表访问权限，我可以指定自己的首选控制级别。

使用简化的 OAuth2Decorator，我似乎没有这个选项。我这样说对吗？或者有解决办法吗？

一般来说，最佳实践是什么？使用正确的 oauth（包括 Flow、Credentials 和 Storage）？或者使用 OAuth2Decorator。

非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-16T16:20:46.983

您当然可以使用 OAuth2Decorator

这是一个例子：

主文件

```
import bqclient
import httplib2
import os

from django.utils import simplejson as json
from google.appengine.api import memcache
from google.appengine.ext import webapp
from google.appengine.ext.webapp.util import run_wsgi_app
from oauth2client.appengine import oauth2decorator_from_clientsecrets

PROJECT_ID = "xxxxxxxxxxx"
DATASET = "your_dataset"

QUERY = "select columns from dataset.table"

CLIENT_SECRETS = os.path.join(os.path.dirname(__file__),'client_secrets.json')

http = httplib2.Http(memcache)
decorator = oauth2decorator_from_clientsecrets(CLIENT_SECRETS,
                  'https://www.googleapis.com/auth/bigquery')

bq = bqclient.BigQueryClient(http, decorator)

class MainHandler(webapp.RequestHandler):
    @decorator.oauth_required
    def get(self):
     data = {'data': json.dumps(bq.Query(QUERY, PROJECT_ID))}
     template = os.path.join(os.path.dirname(__file__), 'index.html')
     self.response.out.write(render(template, data))

application = webapp.WSGIApplication([('/', MainHandler),], debug=True)

def main():
    run_wsgi_app(application)

if __name__ == '__main__':
    main() 
```

在处理 BigQuery 操作的 main.py 中导入的 bqclient.py

```
from apiclient.discovery import build

class BigQueryClient(object):
    def __init__(self, http, decorator):
        """Creates the BigQuery client connection"""
        self.service = build('bigquery', 'v2', http=http)
        self.decorator = decorator

    def Query(self, query, project, timeout_ms=10):
        query_config = {
            'query': query,
            'timeoutMs': timeout_ms
         }
         decorated = self.decorator.http()
         queryReply = (self.service.jobs()
             .query(projectId=project, body=query_config)
             .execute(decorated))
         jobReference=queryReply['jobReference']
         while(not queryReply['jobComplete']):
             queryReply = self.service.jobs().getQueryResults(
                 projectId=jobReference['projectId'],
                 jobId=jobReference['jobId'],
                 timeoutMs=timeout_ms).execute(decorated)
         return queryReply 
```

您的所有身份验证详细信息都保存在 json 文件 client_secrets.json 中

```
{
    "web": {
        "client_id": "xxxxxxxxxxxxxxx",
        "client_secret": "xxxxxxxxxxxxxxx",
        "redirect_uris": ["http://localhost:8080/oauth2callback"],
        "auth_uri": "https://accounts.google.com/o/oauth2/auth",
        "token_uri": "https://accounts.google.com/o/oauth2/token"
    }
} 
```

最后，不要忘记将这些行添加到您的 app.yaml 中：

```
- url: /oauth2callback
  script: oauth2client/appengine.py 
```

希望有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T21:01:11.363

我不确定我是否完全理解用例，但如果您正在创建一个应用程序供其他人使用，而无需他们根据自己的凭据授权访问，我建议您使用 App Engine 服务帐户。

[App Engine 服务帐户 + 预测 API 文章](https://developers.google.com/appengine/articles/prediction_service_accounts)中介绍了此类身份验证流程的示例。

另外，请参阅[这部分](https://developers.google.com/bigquery/articles/datastoretobigquery#auth)和[这部分](https://developers.google.com/bigquery/articles/datastoretobigquery#ingestcsv)的 App Engine Datastore to BigQuery 代码实验室，它也使用这种授权方法。

代码可能如下所示：

```
import httplib2

# Available in the google-api-python-client lib
from apiclient.discovery import build
from oauth2client.appengine import AppAssertionCredentials

# BigQuery Scope
SCOPE = 'https://www.googleapis.com/auth/bigquery'

# Instantiate and authorize a BigQuery API client
credentials = AppAssertionCredentials(scope=SCOPE)
http = credentials.authorize(httplib2.Http())
bigquery_service = build("bigquery", "v2", http=http)

# Make some calls to the API
jobs = bigquery_service.jobs()
result = jobs.insert(projectId='some_project_id',body='etc, etc') 
```

# python - 获取python中的所有属性XML并将其制作成字典

> ID：11485396
> 
> 赞同：6
> 
> 时间：2012-07-14T16:22:01.600
> 
> 标签：python, xml, dom

XML:

```
<main>
    <item name="item1" image="a"></item>
    <item name="item2" image="b"></item>
    <item name="item3" image="c"></item>
    <item name="item4" image="d"></item>
</main> 
```

Python：

```
xmldoc = minidom.parse('blah.xml')
itemlist = xmldoc.getElementsByTagName('item')
for item in itemlist :
    #####I want to make a dictionary of each item 
```

所以我会得到

```
{'name':'item1','image':'a'}
{'name':'item2','image':'b'}
{'name':'item3','image':'c'}
{'name':'item4','image':'d'} 
```

有谁知道如何做到这一点？有功能吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-14T16:46:48.880

以下代码将创建字典（不需要额外的库）：

```
dicts = []
for item in itemlist:
    d = {}    
    for a in item.attributes.values():
        d[a.name] = a.value
    dicts.append(d)
print dicts 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-14T17:08:24.493

我建议更喜欢较新的`xml.etree.ElementTree`标准模块而不是`xml.dom.minidom`. 尝试以下操作：

```
import xml.etree.ElementTree as ET

tree = ET.parse('test.xml')
for element in tree.getiterator('item'):
    print element.attrib 
```

它打印

```
{'image': 'a', 'name': 'item1'}
{'image': 'b', 'name': 'item2'}
{'image': 'c', 'name': 'item3'}
{'image': 'd', 'name': 'item4'} 
```

这里`.getiterator('item')`遍历树的所有元素并返回名为 的元素`item`。每个元素的`.attrib`是元素属性的字典——这正是你想要的。

实际上，元素表现为子元素列表。由于上述*属性是字典中的项目，*因此与 DOM 方法相比，ElemenTree 更适合 Python。

将以下代码添加到上述示例中：

```
print '----------------'
root = tree.getroot()
ET.dump(root)

print '----------------'
print root.tag
print root.attrib
for elem in root:
    print elem.tag, elem.attrib 
```

它打印：

```
----------------
<main>
    <item image="a" name="item1" />
    <item image="b" name="item2" />
    <item image="c" name="item3" />
    <item image="d" name="item4" />
</main>
----------------
main
{}
item {'image': 'a', 'name': 'item1'}
item {'image': 'b', 'name': 'item2'}
item {'image': 'c', 'name': 'item3'}
item {'image': 'd', 'name': 'item4'} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-14T16:45:08.300

使用[这个](http://code.activestate.com/recipes/534109-xml-to-python-data-structure/)Python 配方：

```
from xml2obj import xml2obj

data = xml2obj(s)['item']

# data content:
>>> [{image:u'a', name:u'item1'},
>>>  {image:u'b', name:u'item2'},
>>>  {image:u'c', name:u'item3'},
>>>  {image:u'd', name:u'item4'}] 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-14T16:48:11.980

在实际尝试时，它会在某个地方出错，但是如果您不想使用其他答案之一，这应该可以帮助您入门。

```
from bs4 import BeautifulSoup

xml = BeautifulSoup('''
<main>
    <item name="item1" image="a"></item>
    <item name="item2" image="b"></item>
    <item name="item3" image="c"></item>
    <item name="item4" image="d"></item>
</main>
''')

item = xml.find_all('item')

count = 0
for snippet in item:
    eval('attribute' + str(count) = {'name':item[count]['name'],
                                     'image':item[count]['image']})
    count += 1 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-14T16:53:17.980

此 Python 代码将执行您想要的任务，但输出未按照您在示例输出中指示的排序。字典可以按键访问，但没有排序。

```
from xml.etree import ElementTree
treexml = ElementTree.parse('test.xml')
for element in treexml.getiterator():
    dict_keys={}
    if element.keys():
        for name, value in element.items():
            dict_keys[name]=value
        print dict_keys 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-11-16T15:08:00.263

[已接受答案](https://stackoverflow.com/a/11485560/8951763)的列表/字典理解版本：

```
dicts = [{a.name: a.value for a in item.attributes.values()} for item in itemlist]
print dicts 
```

# java - 上传内容 JSON 给出空内容

> ID：11485399
> 
> 赞同：0
> 
> 时间：2012-07-14T16:22:10.280
> 
> 标签：java, android, json, upload, contacts

我正在获取联系人并将它们放入 JSONArray 以将它们全部上传到服务器。当我提取它们时，我正在创建一个`Log.i();`并正确显示联系人。但是当我将相同的值放在 JSON 数组上时，它说它是空的。

这是代码：

```
 public void phoneandname(Context c) {

    if (cc.isOnline(c) == true) {
        db = new Database(c);

        Cursor phones = c.getContentResolver().query(
                ContactsContract.CommonDataKinds.Phone.CONTENT_URI, null,
                null, null, null);

        JSONArray jarray = new JSONArray();
        db.open();

        while (phones.moveToNext()) {
            String name = phones
                    .getString(phones
                            .getColumnIndex(ContactsContract.CommonDataKinds.Phone.DISPLAY_NAME));
            String phoneNumber = phones
                    .getString(phones
                            .getColumnIndex(ContactsContract.CommonDataKinds.Phone.NUMBER));

            JSONObject json = new JSONObject();

            try {

                json.put("name", name);
                json.put("phone", phoneNumber);
                json.put("type", "insert");
                jarray.put(json);

            } catch (JSONException e) {
                e.printStackTrace();
            }

        }

                ArrayList<NameValuePair> nvp = new ArrayList<NameValuePair>();
    DBupload upload = new DBupload();
    DatosRegistro dr = new DatosRegistro(c);

    nvp.add(new BasicNameValuePair("content", String.valueOf(jarray)));
    nvp.add(new BasicNameValuePair("token", dr.hash_final(
            dr.token_secret(dr.mail(), "mail"), jarray.toString())));
    nvp.add(new BasicNameValuePair("id", String.valueOf(dr
            .return_id_phone())));

    JSONObject json2 = upload.UploaData(nvp,
            "http://anonyme.mariomontes.es/contacts/insert");

    try {
        if (json2.getInt("error") == 1) {

        } else {
            db.contact_table(name, phoneNumber);
        }
    } catch (JSONException e) {
        e.printStackTrace();
    }

        db.close();

        Log.i("********", jarray.toString());
        phones.close();
    }

} 
```

如你看到的。我正在显示值，然后上传到服务器。但它说它的内容（数组）是空的，我不知道。

# bamboo - 如何从构建脚本更新 Bamboo 构建号？

> ID：11485400
> 
> 赞同：0
> 
> 时间：2012-07-14T16:22:10.700
> 
> 标签：bamboo

当我从 TeamCity 运行构建脚本时，我可以输出`##teamcity[buildNumber '<new build number>']`，TeamCity 将相应地更新构建号。

我怎样才能在 Bamboo 中做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T21:43:41.090

你不能 - 至少不是以受支持的方式。即使忽略您问题的构建脚本部分，Bamboo 也不支持像 TeamCity 那样编辑构建号。

[这是功能请求](https://jira.atlassian.com/browse/BAM-10282)

如果您真的想编辑内部版本号，您可以通过一些 SQL 查询手动完成（风险自负！）。[Atlassian 论坛上的这篇文章](https://answers.atlassian.com/questions/22152/reseting-build-numbers-in-bamboo)应该可以帮助您入门。

# sql - 会员申请的自定义字段数据库设计

> ID：11485403
> 
> 赞同：2
> 
> 时间：2012-07-14T16:22:33.880
> 
> 标签：sql, database-design

我需要为需要为多个组织自定义分类的会员应用程序设计数据库

以下是数据集：

*   组织类型 1：姓名、电子邮件、入职年份、结束年份、角色、位置。

*   组织类型 2：姓名、电子邮件、入职年份、结束年份、角色、部门、子组织、位置

*   组织类型 3：姓名、邮箱、入职年份、结束年份、角色、身份证号。

为它设计数据库的最佳方法是什么？很少有字段项目是常见的，很少是特定于组织的，组织类型是有限的

### 选项1：

*   members_table - member_id、姓名、电子邮件、join_year、end_year、角色
*   members_org_type_1 - member_id，位置
*   members_org_type_2 - member_id、部门、sub_org、位置
*   members_org_type_3 - member_id, id_no

### 选项：2

*   members_table - member_id、姓名、电子邮件、join_year、end_year、角色
*   member_fields - member_id、field_type、field_value
*   field_labels - field_type，field_label

第二种类型看起来很有希望，但不知道如何使用必填字段进行连接操作 members_table 和 member_fields？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-14T17:33:41.550

这是数据库设计中的常见问题，有 3 种最常见的处理方法（如果我们计算 EAV，则为 4 种）：

1.  三个单独的表，每种类型一个。

2.  一张表 - 有很多列 - 其中一些将被允许有空值。数据库不容易处理完整性（哪些列组合将为 Null，哪些不是），通常由应用程序处理。这是@noa 的答案，它会导致代码稍微少一些，并且可能更容易提出一个工作（虽然不完美）的应用程序。

3.  一个`Member`表（这是超类型）和 3 个附加表，每个子类型一个。这允许您没有 Null，并根据组织类型强制使用哪些列。（这是您的选项 1）

您还可以`org_type`在所有表​​中添加一列。这将意味着一个额外的`UNIQUE`约束，`Member (org_type, member_ID)`并且`FOREIGN KEY`约束（来自每个子类型表）被更改为包含该`org_type`列。像这样的东西：

```
 CREATE TABLE Member
    ( MemberID 
    , Org_Type
    , Name
    , ...
    , Role
    , PRIMARY KEY (MemberID)
    , UNIQUE KEY (Org_Type, MemberID)
    , CHECK Org_Type IN (1, 2, 3)
    ) ;

    CREATE TABLE Member_Type_1
    ( MemberID 
    , Org_Type
    , Location
    , PRIMARY KEY (MemberID)
    , FOREIGN KEY (Org_Type, MemberID)
        REFERENCES Member(Org_Type, MemberID) 
    , CHECK Org_Type = 1
    ) ;

and finally there's (your option 2) EAV: 
```

4.  根据维基百科，[实体-属性-值模型是：](http://en.wikipedia.org/wiki/Entity%E2%80%93attribute%E2%80%93value_model)

> 用于描述实体的数据模型，其中可用于描述它们的属性（属性、参数）的数量可能很大，但实际应用于给定实体的数量相对较少。在数学中，这个模型被称为稀疏矩阵。EAV 也称为对象-属性-值模型、垂直数据库模型和开放模式。

在关系数据库中不使用 EAV 的原因有很多，主要是因为数据类型和引用完整性方面的问题（不能轻易实施）、即使是简单的查询也难以编写（最终会编写很多连接）和效率。请参阅 Simon Righarts 在 DBA.SE 问题上的回答：[此数据库结构有名称吗？](https://dba.stackexchange.com/questions/20759/is-there-a-name-for-this-database-structure)

不过，在某些情况下它是一个有效的选择是有原因的，正如 Aaron Bertrand 的文章所解释[的那样：EAV 到底有什么不好的地方？](https://sqlblog.org/2009/11/19/what-is-so-bad-about-eav-anyway)，尤其是当您有很多列时，甚至在您事先不知道需要哪些列时（客户定制）。如果您希望组织能够添加自定义列，那可能就是您的情况。

但是请注意，构建一个高效的 EAV 模型/应用程序并不容易。您实际上是在数据库中构建 RDBMS。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-14T16:31:31.793

如果组织类型有限且很少更改，则只需使用一张表：

*   members_table - member_id、姓名、电子邮件、join_year、end_year、角色、位置、部门、sub_org、id_no

在与组织类型无关的字段中使用空值，并在呈现信息时隐藏不适用的字段。

[我在这里](https://stackoverflow.com/a/10640129/893113)给出了类似的答案，尽管它是针对不同的数据库的。

# ajax - 通过 AJAX 从 iPad 上的文件发送数据到服务器上的 php 文件

> ID：11485404
> 
> 赞同：0
> 
> 时间：2012-07-14T16:22:37.020
> 
> 标签：ajax, ipad, url, send

我正在尝试在 iPad 上上传本地 html 文件中捕获的数据并将其保存到服务器。

我发现了这个：[Sending data to an external file via Ajax](https://stackoverflow.com/questions/5597596/sending-data-to-an-external-file-via-ajax)

据我所知，没有办法发送这样的信息： ajax.open("POST",' [http://www.misite.com/canvas/testSave.php](http://www.misite.com/canvas/testSave.php) ',true); 来自 iPad 上的 html，我是对的吗？

所以我只想知道是否有人知道这样做的技巧。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T00:51:09.720

几周后，这就是我可以实现的。

1.- 发送数据的函数（从画布生成的图像）​​：

```
function sendImageData()
    {
        var filename = $("#filename").val().trim();
   if(filename == ''){
    alert("File name is needed");
    return;
   }

        var uploadCanvas = $("#uploadCanvas");
        var canvasData = uploadCanvas[0].toDataURL("image/png");
        var debugConsole= $("#debugConsole");
        debugConsole.val(canvasData);

      $.ajax({
            type: 'POST',
            url: "http://yourremoteserver.com/canvas/save.php",
            data: {
        canvasData:canvasData,
        filename:filename
    }
        }).done(function() {
                    alert("saved: " + filename + ".png");// THIS IS NOT WORKING YET.
                }
                );
    } 
```

2.-接收和保存数据的PHP：

```
<?php
$imagen = $_POST['canvasData'];
$filename = $_POST['filename'];

if (isset($imagen)){
    $imageData=$imagen;
    $filteredData=substr($imageData, strpos($imageData, ",")+1);
    $unencodedData=base64_decode($filteredData);
    $fp = fopen( $filename.'.png', 'wb' );
    fwrite( $fp, $unencodedData);
    fclose( $fp );
}
?> 
```

如果有人可以帮助我使用该`.done`功能（请记住，html文件在ipad中，而php在服务器上）让我知道。干杯。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-14T16:26:38.127

为此，我使用[了 Plupload](http://www.plupload.com/)。它会自动在 flash、silverlight 和 html5 之间切换，因此它几乎可以在任何浏览器上运行（包括 iPad 上的 safari）。基本上，它使用一些生成的 id 将文件上传到处理脚本（它为您生成它）。然后，您可以在完成上传后轮询另一个页面以获取上传的数据。

编辑：重新阅读您的帖子我不确定这有多相关，因为它需要用户选择一个文件，而我不确定这就是您所得到的。

# ios - 在随机生成器中使用 NSMutableArray

> ID：11485410
> 
> 赞同：1
> 
> 时间：2012-07-14T16:23:32.540
> 
> 标签：ios, nsmutablearray

我正在尝试将文件的内容传递到一个数组中，然后由随机图像生成器调用该数组。我错过了一些东西（或很多东西）。有任何想法吗？

```
NSString *chords = [[NSBundle mainBundle] pathForResource:@"ChordCharts" ofType:nil];

chordCharts = [NSMutableArray arrayWithContentsOfFile:chords];

int randomimages = rand() % 4;

switch (randomimages) {

    case 0:

        chordImage.image = [UIImage imageNamed:[chordCharts objectAtIndex:0]];

        break;

    case 1:

        chordImage.image = [UIImage imageNamed:[chordCharts objectAtIndex:1]];

        break;

    case 2:

        chordImage.image = [UIImage imageNamed:[chordCharts objectAtIndex:2]];

        break;

    case 3:

        chordImage.image = [UIImage imageNamed:[chordCharts objectAtIndex:3]];

        break;

    default:

        break;

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-14T16:33:24.617

嗯，有什么问题？如果您希望文件看起来像这样

```
Name1.gif
Name2.jpg
... 
```

那么它就行不通了；数组上的“initWithContentsOf”需要一个 plist 文件：

```
<?xml version="1.0" encoding="UTF-8"?>
<plist version="1.0"><array>
   <string>Name1.gif</string>
   <string>Name2.jpg</string>
   ...
</array></plist> 
```

如果您想要文件的第一个版本，只需将文件读入字符串，然后使用 componentsSeparatedByString:@"\n" 将其拆分为行：

```
NSString* MyString=[NSString stringWithContentsOfFile:@"..."];
NSArray* chordCharts=[MyString componentsSeparatedByString:@"\n"]; 
```

您可能想要检查空行，并可能修剪这些行（以删除开头和结尾的空格）

# php - 使用 javascript 动画 div 高度调整

> ID：11485414
> 
> 赞同：0
> 
> 时间：2012-07-14T16:24:24.123
> 
> 标签：php, javascript, animation

当谈到 javascript 时，我仍然是一个新手，但我无法为 div 设置动画，当用户将光标移到图像上时，我想从底部向上滑动图像。我已经成功使用几乎相同的代码将 div 淡入和淡出视图，但由于某种原因，它不想在这种情况下工作。这是它的 html/php 方面：

```
 echo '
                <div class="still" style="clear:left">
                    <div class="thumbnail" onmouseover="show_title('.$work['position'].');" onmouseout="hide_title('.$work['position'].');">
                        <div class="still_title" id="still_title'.$work['position'].'">
                        <br>'.$work['title'].'
                        </div>
                        <a href="'.$work['vimeo'].'" rel="shadowbox"><img src="'.$work['thumbnail'].'" class="still_img"></a>
                    </div>
                    <div class="description"><p>'.$work['description'].'</p>
                    </div>
                </div>
            '; 
```

这是我在正常运行时遇到问题的javascript..

```
 var i = 0;

            function show_title(position) {
            var titledelay = setInterval(show_title_animation(position),30);}

            function show_title_animation(position) {
                still_id = "still_title" + position;
                title_position = document.getElementById(still_id);
            while (i<100) {
                i++;
                title_position.style.height = i + "px";
            }
            if (i==100) {
                alert(title_position);
                clearInterval(titledelay);
            }
            } 
```

编辑：它现在可以工作，但在完成循环后它不会重置..

```
var i = 0;

function show_title(position) {
var titledelay = setInterval(function(){ show_title_animation(position); }, 10);
}

function show_title_animation(position) {
still_id = "still_title" + position;
title_position = document.getElementById(still_id);

while (i<50) {
    i++;
    title_position.style.height = i + "px";
    break;
}
if (i==50) {
    clearInterval(titledelay);
    i=0;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T16:30:33.570

问题出在线路上

```
var titledelay = setInterval(show_title_animation(position),30); 
```

而不是传递一个带参数的函数，你应该只传递一个函数引用，比如

```
var titledelay = setInterval(show_title_animation, 30); // This would require position declared as global variable outside the scope of the function 
```

或 var titledelay = setInterval(function(){ show_title_animation(position) }, 30);

# python - 模板中的全局时间日期格式

> ID：11485416
> 
> 赞同：1
> 
> 时间：2012-07-14T16:24:30.333
> 
> 标签：python, django, django-templates, django-views, django-settings

在 Django 中，您可以定义如何显示您的时间日期变量，如下所示：

```
{{ invoice.printed|date:"D jS N 'y h:i a" }} 
```

如果我想在我的网站上使用这种日期格式，但在我的声明中声明`settings.py`为：

```
TOOLTIPS_DATE_FORMAT = "D jS N 'y h:i a" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T16:31:25.290

您可以创建一个上下文处理器，该处理器在您的所有模板中都包含此格式：

```
from django.conf import settings

def tooltips_format(request):
    return { 'TOOLTIPS_DATE_FORMAT': settings.TOOLTIPS_DATE_FORMAT } 
```

把它放在一个文件中，例如`main/context_processors.py`（或者如果你没有一个名为 Django 应用程序的不同应用程序`main`），然后在你的 Django 设置文件中添加`main.context_processors.tooltips_format`到`TEMPLATE_CONTEXT_PROCESSORS`（[docs ）。](https://docs.djangoproject.com/en/dev/ref/settings/#std%3asetting-TEMPLATE_CONTEXT_PROCESSORS)

然后，您可以在模板中编写：

```
{{ invoice.printed|date:TOOLTIPS_DATE_FORMAT }} 
```

# javascript - 如何在 JavaScript 单元测试中模拟 localStorage？

> ID：11485420
> 
> 赞同：126
> 
> 时间：2012-07-14T16:24:45.550
> 
> 标签：javascript, unit-testing, mocking, local-storage, sinon

有没有可以模拟的库`localStorage`？

我一直在使用[Sinon.JS](http://sinonjs.org/ "Sinon.JS")进行大多数其他 javascript 模拟，并且发现它真的很棒。

我的初步测试表明 localStorage 拒绝在 firefox 中分配（sadface）所以我可能需要对此进行某种破解：/

我现在的选择（如我所见）如下：

1.  创建我所有代码都使用的包装函数并模拟它们
2.  为 localStorage 创建某种（可能很复杂）状态管理（测试前的快照 localStorage，在清理恢复快照中）。
3.  `??????`

您如何看待这些方法，您认为还有其他更好的方法可以解决这个问题吗？无论哪种方式，我都会将最终制作的“库”放在 github 上，以实现开源优势。

* * *

## 回答 #1

> 赞同：149
> 
> 时间：2013-01-17T15:04:18.903

这是用 Jasmine 模拟它的简单方法：

```
let localStore;

beforeEach(() => {
  localStore = {};

  spyOn(window.localStorage, 'getItem').and.callFake((key) =>
    key in localStore ? localStore[key] : null
  );
  spyOn(window.localStorage, 'setItem').and.callFake(
    (key, value) => (localStore[key] = value + '')
  );
  spyOn(window.localStorage, 'clear').and.callFake(() => (localStore = {}));
}); 
```

如果您想在所有测试中模拟本地存储，请在测试`beforeEach()`的全局范围内声明上面显示的函数（通常的位置是*specHelper.js*脚本）。

* * *

## 回答 #2

> 赞同：57
> 
> 时间：2014-10-03T11:07:36.890

只需根据您的需要模拟全局 localStorage / sessionStorage （它们具有相同的 API）。
例如：

```
 // Storage Mock
  function storageMock() {
    let storage = {};

    return {
      setItem: function(key, value) {
        storage[key] = value || '';
      },
      getItem: function(key) {
        return key in storage ? storage[key] : null;
      },
      removeItem: function(key) {
        delete storage[key];
      },
      get length() {
        return Object.keys(storage).length;
      },
      key: function(i) {
        const keys = Object.keys(storage);
        return keys[i] || null;
      }
    };
  } 
```

然后你实际做的是这样的：

```
// mock the localStorage
window.localStorage = storageMock();
// mock the sessionStorage
window.sessionStorage = storageMock(); 
```

* * *

## 回答 #3

> 赞同：23
> 
> 时间：2013-11-22T20:04:37.507

还要考虑在对象的构造函数中注入依赖项的选项。

```
var SomeObject(storage) {
  this.storge = storage || window.localStorage;
  // ...
}

SomeObject.prototype.doSomeStorageRelatedStuff = function() {
  var myValue = this.storage.getItem('myKey');
  // ...
}

// In src
var myObj = new SomeObject();

// In test
var myObj = new SomeObject(mockStorage) 
```

根据模拟和单元测试，我喜欢避免测试存储实现。例如，在设置项目后检查存储长度是否增加等毫无意义。

由于替换真实 localStorage 对象上的方法显然是不可靠的，因此请使用“愚蠢”的 mockStorage 并根据需要存根单个方法，例如：

```
var mockStorage = {
  setItem: function() {},
  removeItem: function() {},
  key: function() {},
  getItem: function() {},
  removeItem: function() {},
  length: 0
};

// Then in test that needs to know if and how setItem was called
sinon.stub(mockStorage, 'setItem');
var myObj = new SomeObject(mockStorage);

myObj.doSomeStorageRelatedStuff();
expect(mockStorage.setItem).toHaveBeenCalledWith('myKey'); 
```

* * *

## 回答 #4

> 赞同：23
> 
> 时间：2019-01-04T01:02:19.563

当前的解决方案不适用于 Firefox。这是因为 localStorage 被 html 规范定义为不可修改。但是，您可以通过直接访问 localStorage 的原型来解决这个问题。

跨浏览器解决方案是模拟对象，`Storage.prototype`例如

而不是*spyOn(localStorage, 'setItem')*使用

```
spyOn(Storage.prototype, 'setItem')
spyOn(Storage.prototype, 'getItem') 
```

取自*bzbarsky*和 *​​teogeos*的回复[https://github.com/jasmine/jasmine/issues/299](https://github.com/jasmine/jasmine/issues/299)

* * *

## 回答 #5

> 赞同：14
> 
> 时间：2016-03-03T10:11:22.110

这就是我所做的...

```
var mock = (function() {
  var store = {};
  return {
    getItem: function(key) {
      return store[key];
    },
    setItem: function(key, value) {
      store[key] = value.toString();
    },
    clear: function() {
      store = {};
    }
  };
})();

Object.defineProperty(window, 'localStorage', { 
  value: mock,
}); 
```

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2012-07-14T18:34:55.257

> 有没有可以模拟的库`localStorage`？

我只写了一个：

```
(function () {
    var localStorage = {};
    localStorage.setItem = function (key, val) {
         this[key] = val + '';
    }
    localStorage.getItem = function (key) {
        return this[key];
    }
    Object.defineProperty(localStorage, 'length', {
        get: function () { return Object.keys(this).length - 2; }
    });

    // Your tests here

})(); 
```

> 我的初步测试表明 localStorage 拒绝在 Firefox 中分配

仅在全球范围内。使用上面的包装函数，它工作得很好。

* * *

## 回答 #7

> 赞同：5
> 
> 时间：2016-11-07T19:03:16.993

您不必将存储对象传递给使用它的每个方法。相反，您可以为任何涉及存储适配器的模块使用配置参数。

你的旧模块

```
// hard to test !
export const someFunction (x) {
  window.localStorage.setItem('foo', x)
}

// hard to test !
export const anotherFunction () {
  return window.localStorage.getItem('foo')
} 
```

具有配置“包装器”功能的新模块

```
export default function (storage) {
  return {
    someFunction (x) {
      storage.setItem('foo', x)
    }
    anotherFunction () {
      storage.getItem('foo')
    }
  }
} 
```

在测试代​​码中使用模块时

```
// import mock storage adapater
const MockStorage = require('./mock-storage')

// create a new mock storage instance
const mock = new MockStorage()

// pass mock storage instance as configuration argument to your module
const myModule = require('./my-module')(mock)

// reset before each test
beforeEach(function() {
  mock.clear()
})

// your tests
it('should set foo', function() {
  myModule.someFunction('bar')
  assert.equal(mock.getItem('foo'), 'bar')
})

it('should get foo', function() {
  mock.setItem('foo', 'bar')
  assert.equal(myModule.anotherFunction(), 'bar')
}) 
```

这个`MockStorage`类可能看起来像这样

```
export default class MockStorage {
  constructor () {
    this.storage = new Map()
  }
  setItem (key, value) {
    this.storage.set(key, value)
  }
  getItem (key) {
    return this.storage.get(key)
  }
  removeItem (key) {
    this.storage.delete(key)
  }
  clear () {
    this.constructor()
  }
} 
```

在生产代码中使用您的模块时，请传递真正的 localStorage 适配器

```
const myModule = require('./my-module')(window.localStorage) 
```

* * *

## 回答 #8

> 赞同：5
> 
> 时间：2016-02-10T15:18:18.623

如某些答案中所建议的那样覆盖`localStorage`全局`window`对象的属性在大多数 JS 引擎中都不起作用，因为它们将`localStorage`数据属性声明为不可写且不可配置。

但是我发现至少使用 PhantomJS（版本 1.9.8）的 WebKit 版本，您可以使用旧版 API来控制被访问`__defineGetter__`时会发生什么。`localStorage`如果这也适用于其他浏览器，那仍然会很有趣。

```
var tmpStorage = window.localStorage;

// replace local storage
window.__defineGetter__('localStorage', function () {
    throw new Error("localStorage not available");
    // you could also return some other object here as a mock
});

// do your tests here    

// restore old getter to actual local storage
window.__defineGetter__('localStorage',
                        function () { return tmpStorage }); 
```

这种方法的好处是您不必修改要测试的代码。

* * *

## 回答 #9

> 赞同：4
> 
> 时间：2015-03-02T14:12:36.000

这是一个使用 sinon spy 和 mock 的例子：

```
// window.localStorage.setItem
var spy = sinon.spy(window.localStorage, "setItem");

// You can use this in your assertions
spy.calledWith(aKey, aValue)

// Reset localStorage.setItem method    
spy.reset();

// window.localStorage.getItem
var stub = sinon.stub(window.localStorage, "getItem");
stub.returns(aValue);

// You can use this in your assertions
stub.calledWith(aKey)

// Reset localStorage.getItem method
stub.reset(); 
```

* * *

## 回答 #10

> 赞同：4
> 
> 时间：2020-03-13T16:08:13.313

归功于 [https://medium.com/@armno/til-mocking-localstorage-and-sessionstorage-in-angular-unit-tests-a765abdc9d87](https://medium.com/@armno/til-mocking-localstorage-and-sessionstorage-in-angular-unit-tests-a765abdc9d87) 制作一个假的本地存储，并在调用本地存储时监视它

```
 beforeAll( () => {
    let store = {};
    const mockLocalStorage = {
      getItem: (key: string): string => {
        return key in store ? store[key] : null;
      },
      setItem: (key: string, value: string) => {
        store[key] = `${value}`;
      },
      removeItem: (key: string) => {
        delete store[key];
      },
      clear: () => {
        store = {};
      }
    };

    spyOn(localStorage, 'getItem')
      .and.callFake(mockLocalStorage.getItem);
    spyOn(localStorage, 'setItem')
      .and.callFake(mockLocalStorage.setItem);
    spyOn(localStorage, 'removeItem')
      .and.callFake(mockLocalStorage.removeItem);
    spyOn(localStorage, 'clear')
      .and.callFake(mockLocalStorage.clear);
  }) 
```

在这里我们使用它

```
it('providing search value should return matched item', () => {
    localStorage.setItem('defaultLanguage', 'en-US');

    expect(...
  }); 
```

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2015-04-14T19:19:56.273

我决定重申我对 Pumbaa80 答案的评论作为单独的答案，以便更容易将其作为库重用。

我采用了 Pumbaa80 的代码，对其进行了一些改进，添加了测试并将其作为 npm 模块发布在这里： [https](https://www.npmjs.com/package/mock-local-storage) ://www.npmjs.com/package/mock-local-storage 。

这是一个源代码： [https ://github.com/letsrock-today/mock-local-storage/blob/master/src/mock-localstorage.js](https://github.com/letsrock-today/mock-local-storage/blob/master/src/mock-localstorage.js)

一些测试： [https ://github.com/letsrock-today/mock-local-storage/blob/master/test/mock-localstorage.js](https://github.com/letsrock-today/mock-local-storage/blob/master/test/mock-localstorage.js)

模块在全局对象（窗口或全局，它们中的哪一个被定义）上创建模拟 localStorage 和 sessionStorage。

在我的另一个项目的测试中，我要求它与 mocha 一样：`mocha -r mock-local-storage`使全局定义可用于所有被测代码。

基本上，代码如下所示：

```
(function (glob) {

    function createStorage() {
        let s = {},
            noopCallback = () => {},
            _itemInsertionCallback = noopCallback;

        Object.defineProperty(s, 'setItem', {
            get: () => {
                return (k, v) => {
                    k = k + '';
                    _itemInsertionCallback(s.length);
                    s[k] = v + '';
                };
            }
        });
        Object.defineProperty(s, 'getItem', {
            // ...
        });
        Object.defineProperty(s, 'removeItem', {
            // ...
        });
        Object.defineProperty(s, 'clear', {
            // ...
        });
        Object.defineProperty(s, 'length', {
            get: () => {
                return Object.keys(s).length;
            }
        });
        Object.defineProperty(s, "key", {
            // ...
        });
        Object.defineProperty(s, 'itemInsertionCallback', {
            get: () => {
                return _itemInsertionCallback;
            },
            set: v => {
                if (!v || typeof v != 'function') {
                    v = noopCallback;
                }
                _itemInsertionCallback = v;
            }
        });
        return s;
    }

    glob.localStorage = createStorage();
    glob.sessionStorage = createStorage();
}(typeof window !== 'undefined' ? window : global)); 
```

请注意，添加的所有方法都是通过`Object.defineProperty`，以便它们不会作为常规项目被迭代、访问或删除，并且不会计入长度。我还添加了一种注册回调的方法，当一个项目即将被放入对象时调用它。此回调可用于模拟测试中超出配额的错误。

* * *

## 回答 #12

> 赞同：2
> 
> 时间：2019-06-04T17:14:59.823

我发现我不需要嘲笑它。我可以通过 将实际的本地存储更改为我想要的状态`setItem`，然后只需查询值以查看它是否通过`getItem`. 它不像模拟那么强大，因为你看不到某些东西被改变了多少次，但它对我的目的有用。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2013-03-06T21:30:10.543

不幸的是，我们可以在测试场景中模拟 localStorage 对象的唯一方法是更改​​我们正在测试的代码。您必须将代码包装在一个匿名函数中（无论如何您都应该这样做）并使用“依赖注入”来传递对窗口对象的引用。就像是：

```
(function (window) {
   // Your code
}(window.mockWindow || window)); 
```

然后，在您的测试中，您可以指定：

```
window.mockWindow = { localStorage: { ... } }; 
```

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2020-12-07T15:38:09.723

**需要与存储的数据交互**
一个很短的方法

```
const store = {};
Object.defineProperty(window, 'localStorage', { 
  value: {
    getItem:(key) => store[key]},
    setItem:(key, value) => {
      store[key] = value.toString();
    },
    clear: () => {
      store = {};
    }
  },
}); 
```

**使用 Jasmine**
监视如果您只需要这些函数来使用 jasmine 监视它们，那么它会更短且更易于阅读。

```
Object.defineProperty(window, 'localStorage', { 
  value: {
    getItem:(key) => {},
    setItem:(key, value) => {},
    clear: () => {},
    ...
  },
});

const spy = spyOn(localStorage, 'getItem') 
```

现在你根本不需要商店。

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2017-12-06T15:33:29.650

这就是我喜欢这样做的方式。保持简单。

```
 let localStoreMock: any = {};

  beforeEach(() => {

    angular.mock.module('yourApp');

    angular.mock.module(function ($provide: any) {

      $provide.service('localStorageService', function () {
        this.get = (key: any) => localStoreMock[key];
        this.set = (key: any, value: any) => localStoreMock[key] = value;
      });

    });
  }); 
```

* * *

## 回答 #16

> 赞同：-1
> 
> 时间：2021-04-13T09:54:40.810

我知道 OP 专门询问了关于嘲笑的问题，但可以说它`spy`比`mock`. 如果你用它`Object.keys(localStorage)`来遍历所有可用的键呢？你可以像这样测试它：

```
const someFunction = () => {
  const localStorageKeys = Object.keys(localStorage)
  console.log('localStorageKeys', localStorageKeys)
  localStorage.removeItem('whatever')
} 
```

测试代码如下：

```
describe('someFunction', () => {
  it('should remove some item from the local storage', () => {
    const _localStorage = {
      foo: 'bar', fizz: 'buzz'
    }

    Object.setPrototypeOf(_localStorage, {
      removeItem: jest.fn()
    })

    jest.spyOn(global, 'localStorage', 'get').mockReturnValue(_localStorage)

    someFunction()

    expect(global.localStorage.removeItem).toHaveBeenCalledTimes(1)
    expect(global.localStorage.removeItem).toHaveBeenCalledWith('whatever')
  })
}) 
```

不需要模拟或构造函数。行数也相对较少。

* * *

## 回答 #17

> 赞同：-1
> 
> 时间：2021-11-02T17:02:39.717

这些答案都不是完全准确或安全使用的。这也不是，但它和我想要的一样准确，而无需弄清楚如何操作 getter 和 setter。

**打字稿**

```
const mockStorage = () => {
  for (const storage of [window.localStorage, window.sessionStorage]) {
    let store = {};

    spyOn(storage, 'getItem').and.callFake((key) =>
      key in store ? store[key] : null
    );
    spyOn(storage, 'setItem').and.callFake(
      (key, value) => (store[key] = value + '')
    );
    spyOn(storage, 'removeItem').and.callFake((key: string) => {
      delete store[key];
    });
    spyOn(storage, 'clear').and.callFake(() => (store = {}));
    spyOn(storage, 'key').and.callFake((i: number) => {
      throw new Error(`Method 'key' not implemented`);
    });
    // Storage.length is not supported
    // Property accessors are not supported
  }
}; 
```

**用法**

```
describe('Local storage', () => {
  beforeEach(() => {
    mockStorage();
  });

  it('should cache a unit in session', () => {
    LocalStorageService.cacheUnit(testUnit);
    expect(window.sessionStorage.setItem).toHaveBeenCalledTimes(1);
    expect(window.sessionStorage.getItem(StorageKeys.units)).toContain(
      testUnit.id
    );
  });
}); 
```

**注意事项**

*   使用 localStorage 你可以做到`window.localStorage['color'] = 'red'`；这将绕过模拟。
*   `window.localStorage.length`将绕过这个模拟。
*   `window.localStorage.key`抛出这个模拟，因为依赖于此的代码不能被这个模拟测试。
*   模拟正确地分离了本地和会话存储。

另请参阅：[MDN：Web 存储 API](https://developer.mozilla.org/en-US/docs/Web/API/Web_Storage_API)

# php - 使用 XML 的 PHP 应用程序中的 Crystal Reports

> ID：11485422
> 
> 赞同：1
> 
> 时间：2012-07-14T16:24:51.030
> 
> 标签：php, xml, com, crystal-reports

我有如下要求：

*   我有一个能够使用 PDO 连接到任何数据库的 PHP Web 应用程序。
*   我有一个报告生成脚本，它将为我提供 XML 格式的报告数据
*   使用 XML 中的 XSD 作为数据源，我必须定义一个 Crystal 报表 RPT 文件。
*   我必须在运行时动态调用此 RPT，在此期间 PHP 脚本将从 DB 生成 XML 文档并使用此 XML 作为我的 RPT 的输入，呈现的报告应发送到用户浏览器。

我已经用谷歌搜索使用 PHP-COM 来解决这个问题，但找不到我真正想要的东西..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T12:23:07.967

*   通过 RESTful Web 服务公开 XML/XSD 文档；Web 服务将负责查询数据库并创建 XML 文件。XSD 应该是一次性的。
*   手动创建引用 Web 服务 URL 的 RPT。
*   将报表发布为 Web 服务：[如何将 Crystal Reports 用作 Web 服务？](http://msdn.microsoft.com/en-us/library/ms225456%28v=vs.80%29.aspx)
*   使用您的 PHP 应用程序与 CRWS 交互。

# ruby-on-rails - Rails - 0：Fixnum的未定义方法“每个”

> ID：11485423
> 
> 赞同：0
> 
> 时间：2012-07-14T16:25:24.820
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我在 Ruby on Rails 中收到以下错误`undefined method 'each' for 0:Fixnum`。

这是应用程序跟踪：

```
app/controllers/videos_controller.rb:23:in `new'
app/controllers/videos_controller.rb:23:in `create' 
```

我的控制器创建和新操作：

```
 def new
    @video = Video.new
  end

  def create
    method = 'get_' + params[:video][:provider] + '_video_id'
    params[:video][:provider_video_id] = Video.send(method, params[:video][:url])
    params[:video][:thumb] = Video.get_thumb_from_youtube(params[:video][:provider_video_id])
    params[:video][:views] = params[:video][:likes] = 0    
    params[:video][:user_id] = current_user
    @video = Video.new(params[:video])
    if @video.save
      redirect_to video_path(@video), notice:'Video added successfully.'
    else
      render :new
    end
  end 
```

这是我的 view.html.haml ：

```
= form_for @video do |f|
 - if @video.errors.any?
  .error_explanation
    %h2= pluralize(@video.errors.count, "error")
    prohibited this user from being saved:

    %ul
      - @video.errors.full_messages.each do |msg|
        %li= msg
.field
  = f.label :title
  = f.text_field :title
.field
  = f.label :description
  = f.text_area :description
%br
.field
  = f.label :url, 'URL'
  = f.text_field :url
%br
.field
  Provider
  = radio_button :video, :provider, 'vimeo'
  = f.label :provider, 'Vimeo', :value => 'vimeo'
  = radio_button :video, :provider, 'youtube' 
  = f.label :provider, 'Youtube', :value => 'youtube'
%br
.field
  Category
  = collection_select(:video, :category_id, Category.all, :id, :name, :include_blank => true)
%br
.actions
  = f.submit "Add video" 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-14T18:36:02.337

从

```
params[:video][:views] = params[:video][:likes] = 0 
```

到

```
params[:video][:views] = 0 
```

我假设这`video.likes`是一个关联，而不是计数，所以它需要一个`Enumerable`. 如果是关联，rails 会尝试将您添加到模型的元素分配给`likes`模型`video`。添加它们的第一步是迭代使用`each`. 这就是错误的来源。

# ruby-on-rails - 如果 Rails 资产管道将所有的 JS 文件合二为一来加快下载速度，那不影响缓存吗？

> ID：11485426
> 
> 赞同：2
> 
> 时间：2012-07-14T16:26:06.260
> 
> 标签：ruby-on-rails, performance, asset-pipeline, assets

连接的目的是通过只下载一个文件来提高性能，但这意味着每次您更改一些自己的 javascript 时，都会重新编译整个包并进行指纹识别 - 包括像 jQuery 这样的大型库没有改变，如果它们可以单独下载，它们会被缓存，但现在每次都将重新下载 jQuery，作为统一 application.js 的一部分。

我在这里想念什么？最好的方法不是创建两个清单吗 - 一个用于您自己的文件（很小且经常更改），另一个用于库（很大且不经常更改）？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-14T17:20:43.513

我会试一试，里面有一些猜测......

首先，JQuery 由 Rails 本身提供，根据您的布局，它将来自 CDN。因此，让我们看看可能随时间变化的库。这里有哪些场景？

*   用户第一次访问该网站。他的浏览器（取决于类型）必须加载所有 Javascript 文件，然后才能显示低于该文件的内容（因此，将其移至末尾）。根据浏览器的不同，它可能一次加载 2、4、6 或 8 个资源，如果您的站点由数十个甚至数百个资源组成，那么这将减慢演示速度。
*   用户第二次访问该网站（此页面）。通常在同一天、一小时甚至一分钟。整个东西都会被缓存，只有一个请求，可以使用缓存的东西，然后很快。如果所有资源（数百个）一个接一个被加载，如果缓存有效，将有数百个请求。
*   用户第二次访问该网站，中间有一段时间（比如说 15 天）。仅更改了 1 个资源，所有其他资源都可以缓存和重用。这概率有多大？
*   用户（开发人员）在开发期间访问他的工作。不使用资产管道，不使用缓存，因为每个更改都应该立即注意到。

所以我认为，从网站的角度来看，只有场景 3 可能（有点）慢，这是最不可能的。通常，许多请求的开销比请求的大小更相关。

如果您有时间，只需尝试使用显示所有资源加载时间的工具即可。可能存在一种资源会经常更改的极端情况，因此不应包含在资产管道中，但通常情况下，每次更改都包含大量资源，将它们缓存为一位 blob 有助于避免大量请求。

以下是讨论此问题的一些参考文献：

*   Steve Souders：[高性能网站](http://queue.acm.org/detail.cfm?id=1466450)，简短而精彩的总结
*   Steve Souders：一本书中的[高性能网站](https://rads.stackoverflow.com/amzn/click/com/0596529309)
*   Steve Souders：[更快的网站](http://shop.oreilly.com/product/9780596522315.do)更高级，相同的主题
*   Cary Millsap：在服务器端更多[地考虑性能（第一部分）](http://cacm.acm.org/magazines/2010/9/98033-thinking-clearly-about-performance-part-1/fulltext)，但非常出色，尤其是开始时非常清晰。

# assembly - 以下汇编代码读取文件有什么问题？

> ID：11485430
> 
> 赞同：0
> 
> 时间：2012-07-14T16:26:22.213
> 
> 标签：assembly, dos, nasm

```
;the code read 4 bytes from file and print it on screen
bits 16

org 100h

jmp start 

filename db 'example.file',0

handle dw 0

buffer db 255

start:

    mov ah,3dh
    mov al,0
    mov dx,filename
    int 0x21
    mov handle,ax

    mov ah,3fh
    mov cx,4
    mov dx,buffer
    mov bx,handle
    int 21h

    mov dx,buffer
    add dx,ax

    mov bx,dx
    mov byte[bx],'$'

    mov dx,buffer
    mov ah,9
    int 21h
    mov ah,4ch
    int 21h 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-14T17:00:00.723

您的缓冲区似乎是一个字节。如果您真正想要的是一个 255 字节的数组，那么您应该使用（假设这是针对 NASM）：

`buffer: times 255 dup 0`

此外，如前所述，您应该在 NASM 代码中使用方括号来访问地址指向的值。只是 `mov ax,foo` 将 foo 的地址放在 ax 中，而不是存储在该地址的值。

# c# - C# 语音识别（System.Speech.Recognition）问题

> ID：11485438
> 
> 赞同：0
> 
> 时间：2012-07-14T16:27:25.953
> 
> 标签：c#, speech-recognition

几天来，我一直在使用各种测试程序进行一些语音识别，一切都很好。但是我已经尝试将它实现到我的 OpenGL 项目中，并且现在没有调用“已识别”函数。

在 Windows 语音识别的事情上（说“试着说'开始听'”的事情很多），当我说它们时会出现加载的单词，所以我假设它正在正确检测单词，这只是为了一些没有触发事件的原因。

这是我一直在使用的代码。您真正需要知道的（除了代码中显示的内容）是 AddCommands 在其他地方被调用，添加一些我一直在测试的单词，并且在加载表单时调用“Initiate” .

```
public class SpeechControls
{
    public static SpeechRecognizer sRecognizer;

    private static Dictionary<string, IVoiceControlable> controllers = new Dictionary<string, IVoiceControlable>();

    public static void Initiate()
    {
        sRecognizer = new SpeechRecognizer();
        sRecognizer.Enabled = true;

        sRecognizer.SpeechRecognized += new EventHandler<SpeechRecognizedEventArgs>(Recognized);
    }

    private static void Recognized(object obj, SpeechRecognizedEventArgs args)
    {
        controllers[args.Result.Text].TriggerCommand(args.Result.Text);
    }

    public static void AddCommands(string[] commands, IVoiceControlable control)
    {
        foreach (string str in commands)
        {
            controllers.Add(str, control);
        }

        sRecognizer.LoadGrammar(new Grammar(new GrammarBuilder(new Choices(commands))));
    }
} 
```

有谁知道为什么不会触发“已识别”？

感谢您的帮助，非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T09:02:01.697

因为 OpenGL 运行的是游戏循环而不是事件监听，所以线程完全被循环占用。要开始侦听命令，需要第二个线程。

# javascript - 幻灯片不会在加载时开始

> ID：11485440
> 
> 赞同：0
> 
> 时间：2012-07-14T16:27:59.037
> 
> 标签：javascript, slideshow, onload

我之前在一个页面上运行多个幻灯片时得到了一些帮助，我现在的问题是让幻灯片在页面上工作/开始。

HTML：

```
<p align="center"><font size="2"><b>Companies Supporting<br />R&M Research:</b><br  />         (click logo for company info)</font></p>
        <p align="center"><a href="#" target="_blank"><IMG SRC="./images/schlumberger.gif" WIDTH="180" HIGHT="200" BORDER="0" NAME="bannerad1"></a>
</p>
       <br />

            <hr noshade="noshade" size="0" color="#4c617e" />
 <br />

        <p align="center"><font size="1"><b>Thank you to the following for<br />their MARCON '12 support</b><br />(click logo for company info)</font></p>
        <p align="center"><a href="#" target="_blank"><IMG SRC="./marcon/images/arms_reliability_logo.jpg" WIDTH="180" HIGHT="200" BORDER="0"   NAME="bannerad2"></a>
       <br />

 <br />

        <p align="center"><a href="#" target="_blank"><IMG SRC="./marcon/images/arms_reliability_logo.jpg" WIDTH="180" HIGHT="200" BORDER="0"   NAME="bannerad3"></a> 
```

Javascript

```
<script type="text/javascript">

var slideShow = function(imagesArray, hrefsArray, bannerad) {

var counter = -1, timer = null;

function banner() {
    counter++;
    if (counter > imagesArray.length-1) { counter = 0; }
    bannerad.src = imagesArray[counter];
    bannerad.parentNode.href = hrefsArray[counter];
}
timer = setInterval(banner, 6000);

};

var ads1 = [
    "./images/okuma.jpg",
    "./images/schlumberger.gif",
    "./images/uesystems_logo.jpg",
    "./images/brady.jpg",
    "./images/ats.png"
    ];

var newplace1 = [
    "http://www.okuma.com/home.html",
    "http://www.slb.com/",
    "http://www.uesystems.com/",
    "http://www.bradyid.com/bradyid/cms/contentView.do/6974/Visual-Workplace.html",
    "http://www.advancedtech.com/"
    ];

var ads2 = [
    "./marcon/images/arms_reliability_logo.jpg",
    "./marcon/images/brunson_logo.jpg",
    "./marcon/images/ctc_logo.jpg",
    "./marcon/images/descase_logo.jpg"
    ];

var newplace2 = [
    "http://www.globalreliability.com/home",
    "http://www.brunson.us",
    "http://www.ctconline.com/_home.aspx",
    "http://www.des-case.com"
    ];

var ads3 = [
    "./marcon/images/arms_reliability_logo.jpg",
    "./marcon/images/brunson_logo.jpg",
    "./marcon/images/ctc_logo.jpg",
    "./marcon/images/descase_logo.jpg"
    ];

var newplace3 = [
    "http://www.globalreliability.com/home",
    "http://www.brunson.us",
    "http://www.ctconline.com/_home.aspx",
    "http://www.des-case.com"
    ];

slideShow(ads1, newplace1, document.bannerad1);
slideShow(ads2, newplace2, document.bannerad2);
slideShow(ads3, newplace3, document.bannerad3);

</script> 
```

我尝试使用：

```
<body onload="banner();"> 
```

但由于某种原因它不起作用。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T16:43:28.490

```
window.onload=function() {
  slideShow(ads1, newplace1, document.bannerad1);
  slideShow(ads2, newplace2, document.bannerad2);
  slideShow(ads3, newplace3, document.bannerad3);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-14T18:07:56.440

没有足够的声誉发表评论，所以我会把它放在答案中......

mplungjan 的答案对我来说很好用（刚刚用你的代码测试过），但是你必须删除`<body onload="banner();">`或者 JS 运行出错。

`banner()`是您的幻灯片“类”中的一个本地函数，从外部看不到。此外，它不需要被调用，`setInterval()`为你做。;)

# php - curl 调用后清空 ram

> ID：11485443
> 
> 赞同：0
> 
> 时间：2012-07-14T16:28:17.847
> 
> 标签：php, curl

我正在使用 curl 下载大文件，但我认为缓冲区没有被清空，因为 ram 里程一直在增加，直到达到 100%，这是我使用的代码。

如果我关闭并打开 curl 会有帮助吗？

```
$ch = curl_init();
curl_setopt($ch, CURLOPT_URL, $url);

while($start_range <= $end_range) {
if(($start_range + 999999) > $end_range) $range = $start_range.'-';
else $range = $start_range.'-'.($start_range + 999999);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
curl_setopt($ch, CURLOPT_REFERER, $url);

curl_setopt($ch,CURLOPT_HTTPHEADER,array("ETag: $rddash"));
curl_setopt($ch, CURLOPT_COOKIEJAR, $cookie);
curl_setopt($ch, CURLOPT_COOKIEFILE, $cookie);
curl_setopt($ch, CURLOPT_RANGE,$range);
curl_setopt($ch, CURLOPT_USERAGENT, 'Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US; rv:1.8.1.1) Gecko/20061204 Firefox/2.0.0.1');
if ($tmp = curl_exec($ch))  $start_range +=1000000;
echo $tmp;
flush();
} 
curl_close($ch); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-14T16:40:09.160

```
curl_close(), takes a Curl resource as its only parameter,   
closes the Curl session, then frees up the associated memory. 
```

# javascript - jQuery 响应式横幅自动调整图像和内容的大小以适应空间

> ID：11485445
> 
> 赞同：0
> 
> 时间：2012-07-14T16:28:59.063
> 
> 标签：javascript, jquery, css, banner, flexslider

我想创建自定义横幅或下载一个。

横幅有以下要求，

1.  我可以在此横幅中添加图像和文本。
2.  在每张幻灯片上，您可以添加多个图像和文本，例如，第一张幻灯片的侧面有两个图像和文本，然后第二张幻灯片的侧面有三个图像和文本。
3.  重要 - 如果图像是小缩略图，则文本应填充空白区域或图像周围。横幅应响应内部元素（可能是 div）。如果图像很大，则文本应位于图像下方或侧面。
4.  向左或向右滑动
5.  左右导航按钮，以及分页

示例： [http](http://www.bbc.co.uk) ://www.bbc.co.uk - 顶部的主横幅

我在网上看了一下，我尝试了以下方法：

flexslider - 非常好，满足除第 3 点之外的所有要求。但不知道如何使其响应。

轨道滑块 - 不错，但 flexslider 更容易设计样式。

注意：此横幅将不会在移动设备上使用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T02:40:29.473

似乎您没有得到任何答案，因为没有完美的解决方案。**如果**您知道一些 css ，那么更改任何提到的滑块并使其具有响应性并不难。我建议，根据你想做多少这些工作，你试一试。你可以在网上找到很好的免费教程。

我发现了这个插件，值得一试： http: [//marktyrrell.com/labs/blueberry/](http://marktyrrell.com/labs/blueberry/)

还有更多：[http ://webdesignledger.com/resources/8-responsive-jquery-slider-plugins](http://webdesignledger.com/resources/8-responsive-jquery-slider-plugins)

# php - 我在我的 CakePHP 应用程序的 webroot 目录中安装了 Wordpress，这样我的网站就有了一个博客。我有风险吗？

> ID：11485448
> 
> 赞同：-1
> 
> 时间：2012-07-14T16:29:49.037
> 
> 标签：php, wordpress, cakephp

由于文件位于 webroot 中，我担心我会暴露私人信息（也许是 db 配置的东西，我不确定，因为我没有查看过他的 wordpress 文件）。如果是这样，我该如何设置它以使人们无权访问这些文件？

非常感谢你

W

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T16:50:00.670

我不明白这与 CakePHP 有什么关系。

无论如何，无论您将 WordPress 安装在何处，保护它都是一个好主意。WordPress codex 有一个非常好的[强化 WordPress](http://codex.wordpress.org/Hardening_WordPress)的指南，您将有兴趣阅读。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-14T16:33:36.210

如何为配置文件设置正确的权限？例如，在类 UNIX 系统中，您可以为此使用 chmod 命令。

# html - 在 HTML/CSS 文档中使用 Unicode 标准符号。我使用 Javascript 吗？

> ID：11485449
> 
> 赞同：1
> 
> 时间：2012-07-14T16:30:11.487
> 
> 标签：html, css, unicode, character

我是一个巨大的新手，但我想在文档中添加一个 Unicode 字符。我已经尝试阅读所有 Unicode 字符线程，但我发现它很难理解，而且我在尝试吸收所有信息时感到头疼。

```
<doctype html>
<html>
  <head>
    <meta name="description" content="description" />
    <meta http-equiv="content-type" content="text/html;charset=UTF-8" />
    <meta name="keywords" content="keywords" />
    <title>title</title>
    <link rel="stylesheet" href="stylesheet.css" type="text/css" />
  </head>
  <body>
    <div id="idtag">
      &#x1F4D7;
    </div>
  </body>
</html>

#idtag {
  font-family: Tahoma, Helvetica, "Arial Unicode MS", sans-serif;
} 
```

我正在尝试添加[U+1F4D7](http://www.fileformat.info/info/unicode/char/1f4d7/index.htm)或类似书的任何内容，但是当我查看页面时，我只看到一个挖空的正方形。我不认为我的电脑上有这个符号。我以前使用过 Google 字体，它们只需要 Javascript？我会这样做吗？我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-14T16:36:54.787

 的问题在于它超出了经典的 BMP 范围——不确定是否有任何字体具有这些字符，但它们绝对不常见。

仅仅因为一个字符是由 Unicode 定义的，并不意味着每个字体都必须有它。即使是 BMP 中的字符（0 到 65535 之间的代码点）也不是在所有字体中都可用。

无法显示正在使用的字体中不可用的字符。向您展示字符“应该”是什么样子的 Unicode 测试页面将向您发送图像 :-)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-14T17:08:21.263

您尝试使用的“绿皮书”字符似乎是 Unicode 6 中的新表情符号之一。因此，它不包含在您用于显示的字体系列中，即使在非常大的 Arial Unicode MS 中也不包含。

在较新版本的 OSX 和 iOS 上，它通过[Apple Color Emoji](http://typographica.org/typeface-reviews/apple-color-emoji/)字体得到支持。否则我不知道有任何字体支持这个字符。我猜在日本有一些，但几乎可以肯定在 Google Webfonts 上没有。

因此，在这种情况下，Google Webfonts 不会为您提供帮助。

但如果它只是显示书籍图标，我会使用图像。例如来自[名词项目](http://thenounproject.com/noun/book)。

如果您需要它作为字体，您可以使用[Fontello](http://fontello.com/)或[Pictos Server](http://pictos.cc/server/)从选定的图标生成字体。

有关使用图标字体的更多信息，几个月前有一篇关于[CSS-Tricks的好文章。](http://css-tricks.com/html-for-icon-font-usage/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-14T19:57:17.453

您的文档原则上是正确的，除了第一行的拼写错误（应该是`<!doctype html>`，带有感叹号），并且该字符在我的 Firefox 上呈现正常。但发生这种情况是因为 Firefox 足够聪明，可以扫描我计算机上安装的字体以找到字符的字形，而我恰好安装了包含它的 Symbola 字体。IE 9 不是那么聪明，但如果我添加`Symbola`到`font-family`列表中，它甚至会显示字符。

所以这是一个字体问题，而且是一个很大的问题。您不能期望安装 Symbola（很遗憾，10,000 个用户中可能只有不到 1 个用户安装了它），而且它似乎是唯一发布的包含 U+1F4D7 的免费字体。您引用的页面有一个指向[字体支持](http://www.fileformat.info/info/unicode/char/1f4d7/fontsupport.htm)页面的链接，该页面说明了这一点。它可能不是完全最新的，但它提供了一个很好的字体支持图片。

您可能会考虑为此目的使用 Web 字体，但这听起来与仅显示一个字符有些不相称，而且由于某种原因， [Font Squirrel @font-face 生成器](http://www.fontsquirrel.com/fontface/generator)似乎无法与 Symbola 一起使用。

另请参阅：[在 HTML 中使用特殊字符的指南](http://www.cs.tut.fi/~jkorpela/html/characters.html)。

PS 字符会显示为黑色和白色，但您可以使用 CSS 为其设置颜色。参照。到 Unicode 标准中的 SO 问题[颜色？](https://stackoverflow.com/questions/9626115/color-in-the-unicode-standard)

# c - 如何在 C 中使用 LAME API？有没有简单的例子？

> ID：11485456
> 
> 赞同：1
> 
> 时间：2012-07-14T16:31:10.937
> 
> 标签：c, java-native-interface, lame

有没有关于如何在 C 中使用 LAME API 的简单示例（带有解释）？我确实设法使用了以下代码（基于[Is there any LAME c++ wraper\simplifier (working on Linux Mac and Win from pure code)?](https://stackoverflow.com/questions/2495420/is-there-any-lame-c-wraper-simplifier-working-on-linux-mac-and-win-from-pure)）：

```
FILE *pcm = fopen(input_file, "rb");
FILE *mp3 = fopen(output_file, "wb");
size_t nread;
int ret, nwrite;

// 1\. Get lame version (OPTIONAL)
printf("Using LAME v%s\n", get_lame_version());

const int PCM_SIZE = 8192;
const int MP3_SIZE = 8192;

short pcm_buffer[PCM_SIZE * 2];
unsigned char mp3_buffer[MP3_SIZE];

// 2\. Initializing
lame_t lame = lame_init();

// 3\. Do some settings (OPTIONAL)
// lame_set_in_samplerate(lame, 48000);
lame_set_VBR(lame, vbr_default);
// lame_set_VBR_quality(lame, 2);

// 4\. Initialize parameters
ret = lame_init_params(lame);
if (ret < 0) {
    printf("Error occurred during parameters initializing. Code = %d\n",
            ret);
    return 1;
}

do {
    // Read PCM_SIZE of array
    nread = fread(pcm_buffer, 2 * sizeof(short), PCM_SIZE, pcm);
    if (nread != 0) {
        // 5\. Encode
        int nsamples = nread;
        short buffer_l[nsamples];
        short buffer_r[nsamples];

        printf("nread = %d\n", nread);
        printf("pcm_buffer.length = %d\n", sizeof(pcm_buffer)/sizeof(short));

        int j = 0;
        int i = 0;
        for (i = 0; i < nsamples; i++) {
            buffer_l[i] = pcm_buffer[j++];
            buffer_r[i] = pcm_buffer[j++];

        }

        nwrite = lame_encode_buffer(lame, buffer_l, buffer_r, nread,
                mp3_buffer, MP3_SIZE);
    } else {
        // 6\. Flush and give some final frames
        nwrite = lame_encode_flush(lame, mp3_buffer, MP3_SIZE);
    }

    if (nwrite < 0) {
        printf("Error occurred during encoding. Code = %d\n", nwrite);
        return 1;
    }

    fwrite(mp3_buffer, nwrite, 1, mp3);
} while (nread != 0);

// 7\. Write INFO tag (OPTIONAL)
// lame_mp3_tags_fid(lame, mp3);

// 8\. Free internal data structures
lame_close(lame);

fclose(mp3);
fclose(pcm); 
```

但问题是，

1.  我不明白为什么要使用

    ```
    short pcm_buffer[PCM_SIZE * 2];
    fread(pcm_buffer, 2 * sizeof(short), PCM_SIZE, pcm); 
    ```

    代替

    ```
    short pcm_buffer[PCM_SIZE * 2];
    fread(pcm_buffer, sizeof(short), PCM_SIZE * 2, pcm); 
    ```

2.  如果我必须使用第一种方式，如何在 Java 中使用 get 这样的 pcm_buffer？我想使用 JNI

3.  这是获得 2 个缓冲区（左右）的正确方法吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-14T16:44:34.247

> 1）我不明白为什么要使用

`pcm_buffer`为`PCM_SIZE*2`每个`sizeof(short)`字节大的元素（通常为 2 个字节）提供空间。即`PCM_SIZE*2*sizeof(short)`字节总数。

这就是为什么`fread`要读取`PCM_SIZE`的块`2*sizeof(short)`，它会填满缓冲区中的整个`PCM_SIZE*2*sizeof(short)`字节。

# php - 从 php 生成的 HTML 表中以编程方式删除

> ID：11485463
> 
> 赞同：-1
> 
> 时间：2012-07-14T16:31:58.627
> 
> 标签：php, html, dom, html-table

我想删除从 php.ini 中的 html 表格生成的无关表格单元格。请参阅此示例中的表格末尾：http: [//leobee.com/android/push/so/stdt3.php](http://leobee.com/android/push/so/stdt3.php) **注意我尚未更新代码以在 IE 中工作，请使用壁虎浏览器。

我在 jQuery 中找到了这个示例：[http](http://www.w3schools.com/jsref/tryit.asp?filename=tryjsref_tr_deletecell) ://www.w3schools.com/jsref/tryit.asp?filename=tryjsref_tr_deletecell 。但是，在 php 中生成 colspan 单元格后，我需要删除额外的单元格。

问题：

1.  php 是否可以在处理 colspan 单元格后操纵 DOM 以删除表格单元格？如果可能的话，您能否规定解决此问题的过程或我应该研究哪些方法或库。

2.  您是否知道另一个类似于我的表格的示例，它可以编程创建按小时细分的一天的时间表，可以让事件扩展超过一个小时？

代码：

```
<?php

// events array
$events = array(
    array('Atari', 'Hall D' , '10:00 PM'),
    array('Sonic the Hedgehog', 'Panel 4' , '11:00 AM'),
    array('Bleach', 'Video 3' , '4:00 PM'),
    array('Sailor Moon ', 'Panel 4' , '6:00 PM') 
);

$events_flat = array();

foreach($events as $event)
{
    $events_flat[$event[0]] = $event[1] . $event[2];
}

// location array
$locations = array(
    'Arena', 'Hall D', 'Video 1', 'Video 2', 'Video 3',
    'Video 4', 'Video 5', 'Video 6', 'HD Theater', 'Panel 1', 
    'Panel 2', 'Panel 3', 'Panel 4', 'WorkShop 1', 'WorkShop 2',
    'WorkShop 3', 'WorkShop 4', 'Autograph 1', 'Autograph 2'
);

// event start time array
$times = array(
    '9:00 AM', '10:00 AM', '11:00 AM','12:00 PM', '1:00 PM', '2:00 PM',
    '3:00 PM', '4:00 PM', '5:00 PM', '6:00 PM', '7:00 PM',
    '8:00 PM', '9:00 PM', '10:00 PM', '11:00 PM', '12:00 AM',
    '1:00 AM', '2:00 AM'
);

$html = '<table><tr><td bgcolor="green"><table name="schedule" id="schedule" border="1" bordercolor="black"><tr><td></td>';

foreach ($times as $time)
{
    $html .= '<td width="100" height="25" bgcolor="yellow">';
    $html .= htmlspecialchars($time);
    $html .= '</td>';
}

foreach ($locations as $location)
{
    $html .= '<tr><td width="100" height="25" bgcolor="pink">';
    $html .= htmlspecialchars($location);
    $html .= '</td>';

    foreach ($times as $time)
    {

       $event = array_search($location . $time, $events_flat);

        if ($event === FALSE)
        {
            $html .= '<td width="100" height="25" bgcolor="#70DBDB">';
            $html .= ' ';

        }
        else
        {
            //http://www.w3schools.com/jsref/tryit.asp?filename=tryjsref_tr_deletecell
            //http://www.php.net/manual/en/function.array-pop.php
            //duration in hours
            // Todo detect ie and use colSpan
            $duration =3;
            $html .= '<td colspan="'.$duration.'" width="100" height="25" bgcolor="orange">';
            $html .= htmlspecialchars($event);
            //$event = array_pop($event-1);

        }

        $html .= '</td>';
      // $deletecell=document.getElementById("schedule").rows[this];
      //  $deletecell.deleteCell(-1);
    }

    $html .= ' </tr>';
}

$html .=  '</table></td></tr></table>';

echo $html;

?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T16:51:40.833

我认为您应该考虑修复您的输出，而不是故意产生错误的输出，然后再尝试纠正它。

而不是使用，您可以只使用带有递增变量`foreach`的常规循环，用于在数组的索引处获取每个变量。然后，如果您发现一个事件，您可以增加额外的持续时间，从而减少单元格。`for``i``$time``i``i``<td>`

```
else
{
    $duration = 3;
    $html .= '<td colspan="'.$duration.'" width="100" height="25" bgcolor="orange">';
    $html .= htmlspecialchars($event);
    $i += $duraton - 1 // subtract 1 since $i will be incremented after this iteration
} 
```

基本上，您在查找事件时将时间增加了 3 个时隙，而不是通常的 1 个，因为每个事件占用 3 个时隙。请注意，这可以扩展到适用于任何持续时间的事件。

作为旁注，我不知道 php，所以我的语法可能是错误的。如果是这样，请纠正我。不过，这应该足以给出总体思路。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-14T20:06:33.263

我将尝试一种不同的方法来使用“水平堆积条形图”在我的问题的链接中实现图表。

# php - 检查图像是否相同

> ID：11485464
> 
> 赞同：-3
> 
> 时间：2012-07-14T16:32:08.813
> 
> 标签：php, image, image-processing

我有一个嵌入来自 Imgur.com 的图像的网站，如果显示默认的 imgur 错误图像，我想要一个显示自定义 404 图像的代码。

我想检查它是否显示的错误图像是[http://i.imgur.com/ffffffffffff.jpg](http://i.imgur.com/ffffffffffff.jpg)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-14T17:27:53.120

您可以散列文件，然后比较它们：

```
if(md5_file($file1) === md5_file($file2)) 
{
    // the same images
} 
else 
{
    // different images
} 
```

您可以使用相对或绝对路径。

* * *

**如何检查是否显示默认错误图像？**

```
if(md5_file("http://i.imgur.com/ffffffffffff.jpg") === md5_file("http://i.imgur.com/some-other-non-existent-image.jpg"))
{
    //display your error image
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-14T18:04:31.623

只是要知道，似乎如果无法从链接中找到 imgur 图像，则该链接将始终加载带有消息的自定义图像：

```
the image you are requesting does not exist or is no longer available. 
```

因此，如果找不到图像，则会将其替换为来自 imgur 的自定义图像。

**当图像不再可用、无法加载或发生其他事情时，问题就开始了，然后您将获得典型的损坏图像，如下所示：**

![在此处输入图像描述](../Images/e6ce01c17bae08411f9b01f696937312.png)

**代码：**

好吧，为了解决这个问题，我为你做了这个例子：

*（我假设为了获取 imgur 图像，您正在从 imgur 用户下载源代码，然后恢复所有图像链接并将它们放入数组中。这就是我从那时开始的原因）*

```
<?php
/* Array with Imgur images */
$imgArray = array('http://i.imgur.com/Uqotub.jpg', 'http://i.imgur.com/kPQFgb.jpg', 
'http://i.imgur.com/7teVGb.jpg', 'http://i.imgur.com/lnCZIb.jpg', 'http://i.imgur.com/sn6Ayb.jpg');

/* Imgur custom 404 image */
$customImg = 'http://i.imgur.com/404.jpg';

/* Do a loop for your images, if a valid image was found and loaded, 
 * you will have the following array from imgData: 
 * Array ( [0] => 160 [1] => 160 [2] => 2 [3] => width="160" height="160" [bits] => 8 [channels] => 3 [mime] => image/jpeg )
 */
foreach ($imgArray as $index => $value) {

    $imgData = getimagesize($value);

    /* if $imgData is an array means that image loaded ok */
    if(is_array($imgData)) {
        echo '<img src="'.$value.'"/>';
    /* else $imgData is nothing because image is broken or not available, 
     * now you pass the custom image */
    } else {
        echo '<img src="'.$customImg.'"/>';
    }
}
?> 
```

**结果：**

![在此处输入图像描述](../Images/6636f72ddaa92395265f1d57dfbab8e2.png)

**PS。**你的问题我不清楚。因此，如果您尝试检查图像是否相同或其他内容，您可以执行 Nikola K. 在他/她的帖子中回答的问题。

希望这可以帮助 ：-）

# django - 我应该如何让 Open Graph JSON 对象传入 facepy 类

> ID：11485470
> 
> 赞同：0
> 
> 时间：2012-07-14T16:33:16.600
> 
> 标签：django, facebook, facebook-graph-api, facebook-opengraph, fandjango

我正在尝试在我的应用程序中配置 Open Graph，以便当有人单击其中的“链接”时，该应用程序应将其“发布”到他的提要/时间线/活动中。( *`I created open graph actions for these features and successfully added meta tags in the page`*)。

所以，我正在使用`fandjango`并`facepy`完成这项工作。

这就是我的代码的样子..

```
from facepy import GraphAPI

@csrf_exempt
@facebook_authorization_required(permissions=["publish_actions"])
def ViewPage (request):
    access_token = request.facebook.user.oauth_token
    profile_id = request.facebook.user.facebook_id
    path = "/%d/feed" %profile_id

    # How should I get the OpenGraph JSON obj
    og_data = ??
    graph = GraphAPI(access_token)
    graph.post(path, og_data)
    ...
    return render_to_response("view.html", context) 
```

我应该如何让打开的图形 JSON obj 将上述`graph`对象作为参数传递，以便在提要/时间线/活动中发布数据？

如果这不是方法，我该怎么做？

**编辑1：**

当我尝试

```
graph = GraphAPI(request.facebook.user.oauth_token)
graph.post("me/namespace:action")

It showed me `OAuthError` 
Error Loc: C:\Python27\lib\site-packages\facepy\graph_api.py in _parse, line 274

graph = GraphAPI(request.facebook.user.oauth_token)
graph.post("me/namespace:action", "object type")

It showed me `TypeError`
loc: same as previous 
```

**编辑2：**

而不是使用`request.facebook.user.oauth_token`，我直接使用了我[`access token`](https://developers.facebook.com/tools/access_token/)的并且代码有效..

```
graph = GraphAPI (my-hard-coded-access-token)
graph.post("me/feed", message = "working!") 
```

但是，当我尝试

```
graph.post("me/news.reads", article="working")

It showed me error. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T20:50:43.757

> 我创建了开放图形操作

`me/feed`那时你不应该使用

OpenGraph 调用如下

```
me/[app_namespace]:[action_type]?[object_type]=[OBJECT_URL] 
```

所以，要达到同样的效果，只需将路径设置为`me/[app_namespace]:[action_type]`

```
graph.post(
        path = 'me/[app_namespace]:[action_type]',
        [object_type] = '[OBJECT_URL]'
) 
```

`og_data`不是调用中的参数。所以如果你`object_type`是`recipe`那么它会是

```
graph.post(path, recipe) 
```

如果你想继续使用`me/feed`那么它应该是

```
graph.post(path, link) 
```

如[http://developers.facebook.com/docs/reference/api/user/#posts所述](http://developers.facebook.com/docs/reference/api/user/#posts)

* * *

你不能做这样的海关阅读行动，正确的电话应该是

```
graph.post(
    path = 'me/news.reads',
    article = 'http://yourobjecturl/article.html'
) 
```

请阅读文档[http://developers.facebook.com/docs/opengraph/actions/builtin/#read](http://developers.facebook.com/docs/opengraph/actions/builtin/#read)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T14:05:54.790

你得到一个，`OAuthError`因为你用一个类的实例而不是一个字符串来初始化 Graph API 客户端。

试试这个：

```
graph = GraphAPI(request.facebook.user.oauth_token.token) 
```

或者，您可以使用`graph`Fandjango`User`模型的属性来获取 Graph API 客户端的预初始化实例：

```
request.facebook.user.graph 
```

# php - 编辑列包含字符串+空格的行

> ID：11485479
> 
> 赞同：0
> 
> 时间：2012-07-14T16:34:23.350
> 
> 标签：php, mysql

我的数据库中有一些行（> 50.000），其中包含带有字符串 + '\n' 的列。我的意思是记录看起来像这样：

```
 abcd\n or \nabcd 
```

因此，有时我的应用程序无法正常工作。我的问题是：我如何用正确的值更新这些行并消除'\n'空格，除了去每一行并手动更新它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T16:39:11.183

```
update your_table set somecolumn = replace(somecolumn, '\n', '') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-14T16:37:04.493

```
update mytable SET title = TRIM(TRAILING '\n' FROM title) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-14T16:41:39.817

你试过这个吗？

```
UPDATE table SET column=REPLACE(column,'\\n','') WHERE column LIKE '%\\n' OR column LIKE '\\n%' 
```

如果您不知道新行在哪里，只需：

```
UPDATE table SET column=REPLACE(column,'\\n','') 
```

# java - Android的AsyncTask怎么没有实现Future？

> ID：11485482
> 
> 赞同：14
> 
> 时间：2012-07-14T16:34:30.047
> 
> 标签：java, android, android-asynctask, future

在 Java 中，我已经习惯使用`Futures`. 现在我正在研究 Android，它`AsyncTask`实现了几乎所有相同的方法并涵盖了相似的生命周期。但是，如果我想保持一致并在我的代码中使用 Future，我必须将 AsyncTask 包装在一个愚蠢的包装器中，因为它实际上并没有实现 Future。

他们只需要添加一个`isDone()`方法，这似乎是微不足道的，然后添加`implements Future<Result>`. （稍后添加：请参阅下面的答案，了解它的重要性）。

任何 Android 专家都知道一些很好的理由/模糊的错误，它可能导致为什么没有这样做？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2014-05-15T06:57:03.843

通过阅读它的实际代码，`AsyncTask.java`它实际上**使用**了一个`Future`任务，然后是更多。A`Future`是一个在旅途中异步执行的任务。An`AsyncTask`被安排在一个队列上，用于单个（或一组）后台线程。

An`AsyncTask`实际上比`Future`任务更“优越”。`Future`它在's 的功能之上做了花哨的调度和优化。只需查看 API 介绍级别。`Future`从 API 1.0 开始就引入了。该`AsyncTask`对象是在 API 3 中引入的。

AsyncTask 有一个 Future 任务，而不是一个 Future。

[异步任务.java](https://github.com/android/platform_frameworks_base/blob/master/core/java/android/os/AsyncTask.java)

```
/**
 * Creates a new asynchronous task. This constructor must be invoked on the UI thread.
 */
public AsyncTask() {
    mWorker = new WorkerRunnable<Params, Result>() {
        public Result call() throws Exception {
            mTaskInvoked.set(true);

            Process.setThreadPriority(Process.THREAD_PRIORITY_BACKGROUND);
            //noinspection unchecked
            return postResult(doInBackground(mParams));
        }
    };

    mFuture = new FutureTask<Result>(mWorker) {
        @Override
        protected void done() {
            try {
                postResultIfNotInvoked(get());
            } catch (InterruptedException e) {
                android.util.Log.w(LOG_TAG, e);
            } catch (ExecutionException e) {
                throw new RuntimeException("An error occured while executing doInBackground()",
                        e.getCause());
            } catch (CancellationException e) {
                postResultIfNotInvoked(null);
            }
        }
    };
} 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-07-14T16:53:58.587

我仍然对“为什么”不在未来使用 AsyncTask 的理论原因感兴趣。

但是，为了记录，我最终创建了自己的小类（如下所示）。如果你想要一个 Future，只需扩展它而不是 AsyncTask。IMO，比@Eng.Fouad 在代码中访问私有 mFuture 的想法更简洁。（但感谢这个想法，它让我稍微研究了源代码！）YMMV。

```
public abstract class FutureAsyncTask<Params, Progress, Result> extends AsyncTask<Params, Progress, Result> implements Future<Result>{

   @Override
   public boolean isDone() {
      return AsyncTask.Status.FINISHED == getStatus();
   }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-14T16:43:07.117

`AsyncTask`太简单了。它适用于可能需要几秒钟的短任务，但您不想锁定 UI 线程。如果您确实需要 a `Future`，那么您的任务可能对 a 来说太复杂`AsyncTask`了。

您可以`AsyncTask`通过调用来检查 an 的状态`getStatus()`。`Status.PENDING`这将返回一个枚举，它可以是`Status.RUNNING`或之一`Status.FINISHED`。

# java - 关于servlet的线程安全

> ID：11485486
> 
> 赞同：11
> 
> 时间：2012-07-14T16:34:59.843
> 
> 标签：java, multithreading, servlets, thread-safety

> **可能重复：**
> [servlet 是如何工作的？实例化、会话变量和多线程](https://stackoverflow.com/questions/3106452/how-do-servlets-work-instantiation-session-variables-and-multithreading)

servlet 是线程安全的吗？例如，如果我打开 5 个不同的浏览器并向容器中的一个 servlet 发送请求，它是否仍然是线程安全的，我的意思是`service()`专门的方法

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-07-14T16:47:17.180

你的问题归结为：*是从同一个对象线程安全的多个线程调用一个方法*。答案是：**这取决于**. 如果您的对象（让它成为 servlet）是无状态的或只有`final`字段，那么这是完全线程安全的。局部变量和参数是线程本地的（位于堆栈上，而不是堆上）。

此外，每个调用都会收到一个不同的and`service()`实例。然而，这里是一个不安全的 servlet 的例子：`ServletRequest``ServletResponse`

```
public class UnsafeServlet implements Servlet {

    private int counter;

    public void init(ServletConfig config) throws ServletException {
    }

    public void service(ServletRequest request, ServletResponse response)
        ++counter;
    }

    public void destroy() {
    }

} 
```

由于多个线程可以访问该`counter`变量，因此必须以某种方式对其进行保护：使用`synchronized`(`volatile`是不够的)：

```
synchronized(this) {
    ++counter;
} 
```

或[`AtomicInteger`](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/atomic/AtomicInteger.html)：

```
private AtomicInteger counter = new AtomicInteger();

//...
counter.incrementAndGet(); 
```

在这种特殊情况下`AtomicInteger`要好得多，因为它使用 CAS CPU 操作是无锁的，而`synchronized`它是互斥体。

# c# - 我如何正确放气？（.NET 和 MONO 都弄错了）

> ID：11485487
> 
> 赞同：0
> 
> 时间：2012-07-14T16:35:25.920
> 
> 标签：c#, .net, compression, deflate

我无法理解。它看起来是正确的。

窗户让我

```
21008 80373 0.2613813
80372 80372 1 
```

.NET 上的 Deflate 并不好（它不应该是 26%），但更重要的是，解压缩后的大小是 1。查看文件（它的html）它缺少最后一个`>`

ubuntu上的单声道（2.10.5）让我

```
4096 80373 0.05096239
12297 12297 1 
```

-edit- 5% 不正确。正确完成后，它的 21% - 结束编辑 - 原始的 5% 似乎是正确的。但是解压后的尺寸太小了。查看文件，它看起来像是正确的 html 数据。它只是没有解压缩它。

代码有什么问题？

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.IO;
using System.IO.Compression;
namespace DeflateTest
{
    class Program
    {
        static void Main(string[] args)
        {
            string fn1 = args.First();
            var fn2 = fn1 + ".out";
            var fn3 = fn1 + ".outorig";
            {
                using (var m = new MemoryStream())
                using (var d = new DeflateStream(m, CompressionMode.Compress, true))
                using (var f = File.OpenRead(fn1))
                {
                    var filelen = 0;
                    var b = new Byte[1024 * 4];
                    while (true)
                    {
                        var len = f.Read(b, 0, b.Length);
                        if (len <= 0)
                            break;
                        filelen += len;
                        d.Write(b, 0, len);
                    }
                    d.Flush();
                    m.Flush();
                    var m_arr = m.ToArray();
                    using (var ff = File.Create(fn2))
                    {
                        ff.Write(m_arr, 0, m_arr.Length);
                    }
                    Console.WriteLine(@"{0} {1} {2}", m_arr.Length, filelen, (float)m_arr.Length / filelen);
                }
            }
            {
                using (var f = File.OpenRead(fn2)) 
                using (var d = new DeflateStream(f, CompressionMode.Decompress, true))
                using (var m = new MemoryStream())
                {
                    var filelen = 0;
                    var b = new Byte[1024 * 4];
                    while (true)
                    {
                        var len = d.Read(b, 0, b.Length);
                        if (len <= 0)
                            break;
                        filelen += len;
                        m.Write(b, 0, len);
                    }
                    m.Flush();
                    var m_arr = m.ToArray();
                    using (var ff = File.Create(fn3)) { ff.Write(m_arr, 0, m_arr.Length); }
                    Console.WriteLine(@"{0} {1} {2}", m_arr.Length, filelen, (float)m_arr.Length / filelen);
                }
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-14T17:17:42.250

`d.Flush();`是不正确的。需要关闭放气流。`d.Close();`解决它。

# android - 如何像启动器一样启动活动？

> ID：11485488
> 
> 赞同：0
> 
> 时间：2012-07-14T16:35:38.563
> 
> 标签：android, android-intent

我有一个在 Android Manifest中声明为和的`Activity` **A。**我从启动器启动它，然后通过启动另一个活动**B**，然后按主页按钮。现在我有一个活动堆栈“ **A**，**B** ”在后台等待的任务。如果然后我再次从启动器启动活动**A**，我将返回已经运行的实例并恢复堆栈（活动**B**在前台运行）。`singleTop``android.intent.action.MAIN`**`Intent`**

 ******这很好。我想从我自己的活动**A**`Notification`启动时达到同样的效果。我尝试了不同的`Intent`标志组合，但我有一个新的活动**A**实例或相同的实例但已清除堆栈（前台没有活动**B**）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-14T17:34:42.990

首先，让我们确保当您长时间不使用该任务时系统不会杀死您的Activity B。

如果用户长时间离开一个任务，系统会清除该任务除根Activity之外的所有Activity。当用户再次返回任务时，仅恢复根活动。系统的行为方式是这样的，因为在很长一段时间后，用户可能已经放弃了他们之前所做的事情并返回到任务中开始新的事情。

您可以使用一些活动属性来修改此行为：

`alwaysRetainTaskState`：如果在任务的根活动中将此属性设置为“true”，则不会发生刚刚描述的默认行为。即使经过很长时间，该任务也会将所有活动保留在其堆栈中。因此，您需要做的是`<activity>`在您的清单文件中的标记下将其设置为 true A.

其次，你不需要`singleTop`. 从 Android 文档检查这个[数字。](http://developer.android.com/images/fundamentals/diagram_backstack_singletask_multiactivity.png)我想这就是你想要的。如果您启动一个指定`singleTask`启动模式的活动，那么如果该活动的一个实例存在于后台任务中，则整个任务将被带到前台。此时，后退堆栈现在包括来自堆栈顶部的任务中的所有活动。

所以你还需要`singleTask`在 A 和 B 的标签下添加，而不是`singleTop`. 然后，您需要从 Notification 启动活动 A，不带任何标志，但`FLAG_ACTIVITY_NEW_TASK`和`FLAG_ACTIVITY_REORDER_TO_FRONT`（可选）。

我自己没有尝试过，但我坚信它会起作用。试试看，如果没有，请告诉我。******

# java - 为什么即使有元素 LinkedBlockingQueue.take() 也会阻塞？

> ID：11485489
> 
> 赞同：2
> 
> 时间：2012-07-14T16:35:58.167
> 
> 标签：java, multithreading

我有 10 个网络爬虫，它们共享一个`LinkedBlockingQueue`.

从我在 Eclipse 中的调试视图中，我发现当我获取了几个 URL（大约 1000 个）时，`list.take()`调用需要很长时间。

这是它的工作原理：

```
private (synchronized) URL getNextPage() throws CrawlerException {
    URL url;
    try {
        System.out.println(queue.size());
        url = queue.take();
    } catch (InterruptedException e) {
        throw new CrawlerException();
    }
    return url;
} 
```

我只添加`synchronized`并用于调试目的，以查看列表在被调用`queue.size()`时是否真的被填满。`take()`是的，它是（这次运行中有 1350 个元素）。

`queue.put()`另一方面，仅当 URL 是新的时才会调用：

```
private void appendLinksToQueue(List<URL> links) throws CrawlerException {
    for (URL url : links) {
        try {
            if (!visited.contains(url) && !queue.contains(url)) {
                queue.put(url);
            }
        } catch (InterruptedException e) {
            throw new CrawlerException();
        }
    }
} 
```

但是，所有其他 Crawler 似乎也不会产生太多新 URL，因此队列不应真正阻塞。这是我们在队列中有多少个 URL（以 5 秒为间隔）：

```
Currently we have sites: 1354
Currently we have sites: 1354
Currently we have sites: 1354
Currently we have sites: 1354
Currently we have sites: 1355
Currently we have sites: 1355
Currently we have sites: 1355 
```

根据Java doc`contains()`是继承自的，`AbstractCollection`所以我猜这至少与多线程没有任何关系，因此也不能成为阻塞的原因。

重点是，从我的调试中我还可以看到其他线程似乎也被阻止在 list.take() 中。然而，它不是一个永恒的障碍。有时，爬虫可以继续运行，但它们会卡住超过一分钟。目前，我看不到他们中的任何一个正在发生。

你知道这怎么会发生吗？

# iphone - iPhone应用程序中的NSDateFormatter？

> ID：11485490
> 
> 赞同：-2
> 
> 时间：2012-07-14T16:36:24.020
> 
> 标签：iphone, ios, nsdateformatter

我以这种格式 ( `2012-07-13 09:22:22 +0000`) 接收日期。我想将此日期格式转换为`13-Jul-2012 09:22`. 而且如果日期是今天意味着我想改变`Today 09:22`和`Yesterday 09:22`。有人可以帮忙吗？

**编辑：**

我添加了一些我尝试过的代码。

```
 NSDateFormatter *dateFormatter1 = [[NSDateFormatter alloc] init];
     [dateFormatter1 setDateFormat:@"dd-mm-yyyy hh:mm"]; 
     [dateFormatter1 setFormatterBehavior:NSDateFormatterBehaviorDefault];
     [dateFormatter1 setTimeZone:[NSTimeZone timeZoneForSecondsFromGMT:0]];
     NSDate *date = [dateFormatter1 dateFromString:dateStr];// Change Date Format

     NSDateFormatter *formatter = [[NSDateFormatter alloc] init];
    [formatter setDateStyle:NSDateFormatterShortStyle];
    [formatter setTimeStyle:NSDateFormatterShortStyle];
    [formatter setDoesRelativeDateFormatting:YES];
    NSString *dateString1 = [formatter stringFromDate:date]; // Getting Today or Tomorrow
    [formatter release];
    NSLog(@"DateString1 : %@", dateString1); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T17:01:59.270

我看到的第一个问题是您提供给格式化程序的日期模式与您声称获得的日期字符串不匹配。你可能想试试这个：

```
[dateFormatter1 setDateFormat:@"yyyy-mm-dd hh:mm:ss Z"]; 
```

您在提供的代码中使用的格式有年份、月份、日期反转并且您不转换第二个。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-14T17:39:41.330

你可以试试这个：

```
 NSDate *date = [NSDate date]; // date in this format 2012-07-14 17:32:09 +0000
    NSDateFormatter *dateFormatter = [[NSDateFormatter alloc] init];
    [dateFormatter setDateFormat:@"dd-MMM-yyyy hh:mm"];
    //[dateFormatter setTimeZone:[NSTimeZone localTimeZone]];  // Optional
    NSString *dateStr = [dateFormatter stringFromDate:date]; 
```

接下来使用 NSDate 方法将您的“日期”与当前日期进行比较，例如。timeIntervalSinceReferenceDate 然后根据结果显示今天/明天。

# python - 在继承的 ctypes.Structure 类的构造函数中调用 from_buffer_copy

> ID：11485496
> 
> 赞同：3
> 
> 时间：2012-07-14T16:37:30.337
> 
> 标签：python, constructor, ctypes, init

我有以下代码：

```
class MyStruct(ctypes.Structure):
      _fields_= [('id', ctypes.uint),
                 ('perm', ctypes.uint)] 
```

定义类后，我可以直接在我的字段上从缓冲区复制数据。例如：

```
ms = MyStruct.from_buffer_copy("\xAA\xAA\xAA\xAA\x11\x11\x11\x11")
print ms.id, ms.perm 
```

一切正常，这里**id**将是*0xAAAAAAA*并且**perm**等于*0x11111111*。

现在，我尝试在实例化过程中做同样的事情，使用以下代码：

```
class MyStruct(ctypes.Structure):
      _fields_= [('id', ctypes.uint),
                 ('perm', ctypes.uint)]
      def __init__(self):
          super(MyStruct, self).__init__()
          self.from_buffer_copy("\xAA\xAA\xAA\xAA\x11\x11\x11\x11")

ms = MyStruct()
print ms.id, ms.perm 
```

但是我的代码使用以下语句引发错误：

> AttributeError：“MyStruct”对象没有属性“from_buffer_copy”

经过一番研究，我发现这`from_buffer_copy`是一种`ctypes._CData`方法。在文档中，我们可以读到`_CData`该类[是非公共类](http://docs.python.org/library/ctypes.html#ctypes._CData)。

所以这是我的问题。我想`from_buffer_copy`在构造函数中使用，但此时它看起来“不可调用”。你可以帮帮我吗 ？

提前感谢您的回复问候

PS：我不想使用这种风格，因为在我的真实代码中，我的*fields*`super(MyStruct,self).__init__(id=0x44444444,perm=0x11111111)`变量上有很多参数。

 ** * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-14T17:56:59.393

问题是 from_buffer_copy 从给定的缓冲区创建*新*的结构实例。当你在 __init__ 中使用它时，结构已经被创建，因此无法使用 from_buffer_copy （这就是为什么它只能作为类方法使用，而不是实例方法）。

一个简单的解决方案是继续使用 MyStruct.from_buffer_copy 或编写另一个工厂函数以满足您的需求。如果你坚持使用 MyStruct(buffer)，那么你可以使用 __new__ 来达到这个目的，因为它在实例创建*之前被调用：*

```
import ctypes
class MyStruct(ctypes.Structure):
    _fields_= [('id', ctypes.c_uint),('perm', ctypes.c_uint)]
    def __new__(cls, buf):
        return cls.from_buffer_copy(buf)

    def __init__(self, data):
        pass  ## data is already present in class

ms = MyStruct("\xAA\xAA\xAA\xAA\x11\x11\x11\x11")
print ms.id, ms.perm 
```*

# java - Java中Arraylist的排列和组合？

> ID：11485497
> 
> 赞同：0
> 
> 时间：2012-07-14T16:37:43.337
> 
> 标签：java

我有三个这样的 Arraylist

```
List<String> list1 = new ArrayList<String>();    
List<String> list2 = new ArrayList<String>();    
List<String> finallist = new ArrayList<String>(); 
```

list1 包含项目 "a","b" list2 包含项目 1、2、3 如何制作包含 "a1" "a2" "a3" "b1" "b2" "b3" 的决赛名单

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-14T16:45:35.700

假设列表如下所示：

```
 List<String> list1 = Arrays.asList("a", "b", "c");
    List<String> list2 = Arrays.asList("1", "2", "3"); 
```

然后：

```
 List<String> finalList = new ArrayList<String>();
    for (String letter: list1) {
        for (String number: list2) {
            finalList.add(letter + number);
        }
    }

    System.out.println(finalList); 
```

# css - 如何停止浮动 Divs 换行（缩略图）

> ID：11485501
> 
> 赞同：0
> 
> 时间：2012-07-14T16:38:21.863
> 
> 标签：css, word-wrap

我有一个网站 - 你可以在这里看到我有一个截图在这里我想停止我的 readmore 文本在图像小图像和大量文本时环绕图像

```
<div class="page-list-ext-item">

<div class="page-list-ext-image"><img width="110" height="73" class="attachment-110x110 wp-post-image" src="#"></a></div>

<h3 class="page-list-ext-title">Heading</h3><div class="page-list-ext-item-content">TEXT

<br><br>read more on: <a href="#">Title</a>

</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-14T16:47:18.693

您需要做的第一件事是重写您的标记，以便它可以验证。上述标记不会验证。浏览器总是试图修复无效的标记，但从纯 CSS 的角度来看，这种关闭标记通常是几个错误的主要原因。在您的情况下，浮动始终需要一个带有间隙的容器，例如：

```
.clear:after {
    content: '.';
    display: block;
    overflow: hidden;
    clear: both;
    height: 0;
    visibility: hidden;
} 
```

这将清除缩略图的容器，但您仍需要修复标记。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-14T16:54:39.857

您可能想要添加

```
.page-list-ext-item-content{
    overflow:hidden;
} 
```

这将起作用。

# java - 限制 JTextPane 空间使用

> ID：11485505
> 
> 赞同：2
> 
> 时间：2012-07-14T16:38:46.120
> 
> 标签：java, swing, jtextpane

我正在使用 JTextPane 记录来自网络应用程序的一些数据，并且在程序运行大约 10 多个小时后出现内存堆错误。文本继续添加到 JTextPane 中，这不断增加内存使用量。无论如何我可以让 JTextPane 像命令提示符窗口一样工作吗？随着新文本的出现，我应该摆脱旧文本吗？这是我用来写入 JTextPane 的方法。

```
volatile JTextPane textPane = new JTextPane();
public void println(String str, Color color) throws Exception
{
    str = str + "\n";
    StyledDocument doc = textPane.getStyledDocument();
    Style style = textPane.addStyle("I'm a Style", null);
    StyleConstants.setForeground(style, color);
    doc.insertString(doc.getLength(), str, style);
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-14T16:55:50.837

一旦其长度超过某个限制，您可以从 StyledDocument 的开头删除等量的数量：

```
int docLengthMaximum = 10000;
if(doc.getLength() + str.length() > docLengthMaximum) {
    doc.remove(0, str.length());
}
doc.insertString(doc.getLength(), str, style); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-14T17:10:47.453

您需要利用 Documents DocumentFilter

```
public class SizeFilter extends DocumentFilter {

    private int maxCharacters;
    public SizeFilter(int maxChars) {
        maxCharacters = maxChars;
    }

    public void insertString(FilterBypass fb, int offs, String str, AttributeSet a)
        throws BadLocationException {
        if ((fb.getDocument().getLength() + str.length()) > maxCharacters)
            int trim = maxCharacters - (fb.getDocument().getLength() + str.length()); //trim only those characters we need to
            fb.remove(0, trim);
        }
        super.insertString(fb, offs, str, a);
    }

    public void replace(FilterBypass fb, int offs, int length, String str, AttributeSet a)
        throws BadLocationException {

        if ((fb.getDocument().getLength() + str.length() - length) > maxCharacters) {
            int trim = maxCharacters - (fb.getDocument().getLength() + str.length() - length); // trim only those characters we need to
            fb.remove(0, trim);
        }
        super.replace(fb, offs, length, str, a);
    }
} 
```

基于来自[http://www.jroller.com/dpmihai/entry/documentfilter的字符限制过滤器](http://www.jroller.com/dpmihai/entry/documentfilter)

您需要将其应用于文本区域 Text 组件，因此...

```
((AbstractDocument)field.getDocument()).setDocumentFilter(...) 
```

# javascript - JavaScript 中标识函数的使用

> ID：11485508
> 
> 赞同：5
> 
> 时间：2012-07-14T16:39:27.523
> 
> 标签：javascript, function, functional-programming, identity, use-case

我在所有 JavaScript 程序中都使用了标识函数：

```
function identity(value) {
    return value;
} 
```

原因是我经常需要区分运算符返回的基本类型（ `undefined`、`null`、`boolean`和）和对象类型（`number`和） 。我觉得在这个用例中使用 indentity 函数非常简洁：`string``object``function``typeof`

```
if (new identity(value) == value); // value is of an object type
if (new identity(value) != value); // value is of a primitive type 
```

标识函数比下面的代码更小更简单：

```
function isObject(value) {
    var type = typeof value;
    return type == "object" || type == "function";
} 
```

然而，在阅读我的代码时，我的一个朋友抱怨说我的 hack 具有误导性，并且比上述替代方法计算成本更高。

我不想从我的任何程序中删除此功能，因为我相信这是一个优雅的 hack。再说一次，我不只是为自己编写程序。JavaScript 中的标识函数还有其他用例吗？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-07-14T16:44:52.500

恕我直言：

```
new identity(value) == value 
```

绝对没有任何意义，如果没有额外的评论，我将不得不考虑一段时间才能弄清楚意图是什么。另一方面：

```
isObject(value) 
```

从一开始就很明显，不管它是如何实现的。为什么你不能*在*一个名为 的函数中使用你的 hack `isObject()`？

BTW 更适合[http://codereview.stackexchange.com](http://codereview.stackexchange.com)。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-07-14T17:18:30.973

我更新了我的“ [speedtest](http://jsperf.com/use-of-the-identity-function-in-javascript) ”来测试是否返回了正确的结果……它们不是：

如果与 比较`new identity(x) == x`，则`null`视为对象。`===`虽然有效。

这些陷阱有利于`isObject(...)`解决方案。

如果您在代码中比较`=== 'object'`/ ，那么它的速度将是原始实现的两倍，比 . 快近三分之一。`'function'``isObject``new identity(x) === x`

# java - Android 拍照失败

> ID：11485517
> 
> 赞同：5
> 
> 时间：2012-07-14T16:40:54.620
> 
> 标签：java, android, eclipse, camera, android-camera

我一直在尝试为 android 制作相机应用程序，但是当我尝试拍照时，它会出错，我必须强制关闭。LogCat 是：

```
 07-14 12:41:25.195: D/dalvikvm(13549): GC_EXPLICIT freed 51K, 49% free 2694K/5187K, external 3474K/4422K, paused 26ms
    07-14 12:41:25.195: D/AndroidRuntime(13549): Shutting down VM
    07-14 12:41:25.195: W/dalvikvm(13549): threadid=1: thread exiting with uncaught exception (group=0x4001e560)
    07-14 12:41:25.226: E/AndroidRuntime(13549): FATAL EXCEPTION: main
    07-14 12:41:25.226: E/AndroidRuntime(13549): java.lang.RuntimeException: takePicture failed 
    07-14 12:41:25.226: E/AndroidRuntime(13549):    at android.hardware.Camera.native_takePicture(Native Method)
    07-14 12:41:25.226: E/AndroidRuntime(13549):    at android.hardware.Camera.takePicture(Camera.java:829) 
    07-14 12:41:25.226: E/AndroidRuntime(13549):    at android.hardware.Camera.takePicture(Camera.java:793) 
    07-14 12:41:25.226: E/AndroidRuntime(13549):    at com.mvitsor.camerax.cameraMainActivity.takepic(cameraMainActivity.java:53) 
    07-14 12:41:25.226: E/AndroidRuntime(13549):    at com.mvitsor.camerax.cameraMainActivity$5.onClick(cameraMainActivity.java:44) 
    07-14 12:41:25.226: E/AndroidRuntime(13549):    at android.view.View.performClick(View.java:2485) 
    07-14 12:41:25.226: E/AndroidRuntime(13549):    at android.view.View$PerformClick.run(View.java:9089) 
    07-14 12:41:25.226: E/AndroidRuntime(13549):    at android.os.Handler.handleCallback(Handler.java:587) 
    07-14 12:41:25.226: E/AndroidRuntime(13549):    at android.os.Handler.dispatchMessage(Handler.java:92) 
    07-14 12:41:25.226: E/AndroidRuntime(13549):    at android.os.Looper.loop(Looper.java:130) 
    07-14 12:41:25.226: E/AndroidRuntime(13549):    at android.app.ActivityThread.main(ActivityThread.java:3859) 
    07-14 12:41:25.226: E/AndroidRuntime(13549):    at java.lang.reflect.Method.invokeNative(Native Method) 
    07-14 12:41:25.226: E/AndroidRuntime(13549):    at java.lang.reflect.Method.invoke(Method.java:507) 
    07-14 12:41:25.226: E/AndroidRuntime(13549):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:840) 
    07-14 12:41:25.226: E/AndroidRuntime(13549):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:598) 
    07-14 12:41:25.226: E/AndroidRuntime(13549):    at dalvik.system.NativeStart.main(Native Method) 
```

这是代码：

```
 package com.mvitsor.camerax;

    import java.io.FileNotFoundException;
    import java.io.FileOutputStream;
    import java.io.IOException;

    import android.app.Activity;
    import android.content.pm.ActivityInfo;
    import android.graphics.PixelFormat;
    import android.hardware.Camera;
    import android.os.Bundle;
    import android.util.Log;
    import android.view.SurfaceHolder;
    import android.view.SurfaceView;
    import android.view.View;
    import android.widget.ImageButton;
    import android.widget.Toast;

    public class cameraMainActivity extends Activity {
        /** Called when the activity is first created. */
        Camera camera;
        SurfaceView preview;
        SurfaceHolder previewHolder;
        ImageButton takePic;

        @Override
        public void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);
            setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_LANDSCAPE);
            setContentView(R.layout.main_camera_layout);

            preview = (SurfaceView) findViewById(R.id.SVpreview);
            previewHolder = preview.getHolder();
            previewHolder.addCallback(surfaceCallback);
            previewHolder.setType(SurfaceHolder.SURFACE_TYPE_PUSH_BUFFERS);
            takePic = (ImageButton) findViewById(R.id.btn_take_pic);

            takePic.setOnClickListener(new View.OnClickListener() {

                @Override
                public void onClick(View v) {
                    takepic();              
                }
            });
        }

        public void takepic(){
            camera.stopPreview();
            System.gc();
            camera.takePicture(null, null, photoCallback);
            //camera.takePicture(ShutterCallback, rawCallback, photoCallback);
        }

        private Camera.Size getBestPreviewSize(int width, int height,
                Camera.Parameters parameters) {
            Camera.Size result = null;

            for (Camera.Size size : parameters.getSupportedPreviewSizes()) {
                if (size.width <= width && size.height <= height) {
                    if (result == null) {
                        result = size;
                    } else {
                        int resultArea = result.width * result.height;
                        int newArea = size.width * size.height;

                        if (newArea > resultArea) {
                            result = size;
                        }
                    }
                }
            }

            return (result);
        }

        SurfaceHolder.Callback surfaceCallback = new SurfaceHolder.Callback() {

            @Override
            public void surfaceCreated(SurfaceHolder holder) {
                camera = Camera.open();

                try {
                    camera.setPreviewDisplay(previewHolder);
                } catch (Throwable t) {
                    Toast toast = Toast.makeText(cameraMainActivity.this,
                            "Exception in setPreviewDisplay", Toast.LENGTH_LONG);
                    toast.show();
                }
            }

            @Override
            public void surfaceChanged(SurfaceHolder holder, int format, int width,
                    int height) {
                Camera.Parameters parameters = camera.getParameters();

                Camera.Size bestSize = getBestPreviewSize(width, height, parameters);
                parameters.setPreviewSize(bestSize.width, bestSize.height);

                parameters.setPictureFormat(PixelFormat.JPEG);
                camera.setParameters(parameters);
                camera.startPreview();
            }

            @Override
            public void surfaceDestroyed(SurfaceHolder holder) {
                camera.stopPreview();
                camera.release();
                camera = null;
            }

        };

        /*
        Camera.ShutterCallback ShutterCallback = new Camera.ShutterCallback() {
            public void onShutter() {
            }
        };

        PictureCallback rawCallback = new PictureCallback() {
            public void onPictureTaken(byte[] data, Camera camera) {
            }
        };
        */

        Camera.PictureCallback photoCallback = new Camera.PictureCallback() {
            public void onPictureTaken(byte[] data, Camera camera) {
                // Save the image JPEG data to the SD card
                FileOutputStream outStream = null;
                try {
                  outStream = new FileOutputStream("/sdcard/test.jpg");
                  outStream.write(data);
                  outStream.close();
                } catch (FileNotFoundException e) {
                  Log.d("CAMERA", e.getMessage());
                } catch (IOException e) {
                  Log.d("CAMERA", e.getMessage());
                }
                camera.startPreview();
                /*new SavePhotoTask().execute(data);
                camera.startPreview();*/
            }
        };
    } 
```

正如你所看到的，我已经尝试了两者`camera.takePicture(null, null, photoCallback);`，并且我还阅读了可以工作的地方，但它没有。另外，我读到一个常见的问题是拍照后忘记重新启动预览，但我正在调用它，所以我真的不知道这是怎么回事！`camera.takePicture(ShutterCallback, rawCallback, photoCallback);``System.gc();``camera.startPreview();`

我正在运行 Android 2.3.3（摩托罗拉 Razr）。（看起来很多人在 Android 2.3.3 上遇到了相机问题......）。

如果有人可以提供帮助，我将不胜感激！

Vitor Martes Sternlicht

> 我已将整个项目上传到[http://www.4shared.com/rar/meSWrQPm/CameraTest.html](http://www.4shared.com/rar/meSWrQPm/CameraTest.html)

我下载了一个显示此日志的应用程序......也许这里有一些可以提供帮助的东西：看起来问题是在创建文件目录时发生的。我该如何解决这个问题？

```
 07-15 12:43:36.578 27203 27487 W ActivityManager:   Force finishing activity com.mvitsor.camerax/.cameraMainActivity
    07-15 12:43:36.601 27203 27221 W ApplicationContext: Unable to create files directory 
```

这是完整的日志

```
 07-15 13:09:08.226 27203 27582 W ActivityManager:   Force finishing activity com.mvitsor.camerax/.cameraMainActivity
    07-15 12:43:36.601 27203 27221 W ApplicationContext: Unable to create files directory
    07-15 13:09:08.414 27203 27221 I ActivityManager: Config changed: { scale=1.0 imsi=724/10 loc=pt_BR touch=3 keys=1/1/2 nav=1/1 orien=1 layout=268435490 uiMode=17 seq=139}
    07-15 13:09:08.726 27203 27219 W ActivityManager: Activity pause timeout for HistoryRecord{40562350 com.mvitsor.camerax/.cameraMainActivity}
    07-15 13:09:09.132 27203 27219 I ActivityManager: No longer want android.process.media (pid 11091): hidden #21
    07-15 13:09:09.515 27203 27488 I WindowManager: WIN DEATH: Window{40d859a8 com.mvitsor.camerax/com.mvitsor.camerax.cameraMainActivity paused=false}
    07-15 13:09:09.515 27203 27499 I ActivityManager: Process com.mvitsor.camerax (pid 11848) has died.
    07-15 13:09:09.515 27203 27426 I WindowManager: WIN DEATH: Window{40ef8c70 SurfaceView paused=false}
    07-15 13:09:09.539 27203 27210 I MotOverlay: disable_streaming_locked
    07-15 13:09:09.539 27203 27210 I MotOverlay: Destroying overlay/fd=300/obj=4650c000
    07-15 13:09:09.539 27498 24620 D IMirrorIpc: onTransact (2)
    07-15 13:09:09.539 27498 24620 D MirrorIpc: unregisterCallback: client 0
    07-15 13:09:09.539 27498 24620 D MirrorUCMgrIpcCB: ipcInit - Client already exists
    07-15 13:09:09.539 27498 24620 D MirrorEngine: hdmiMirrorActiveOverlay/0
    07-15 13:09:09.539 27174 11890 D OverlayDisplayAdapter: hardware/ti/omap4/omap3/camera-omap4/src/OverlayDisplayAdapter.cpp:714 processHalMsg - Display thread received DISPLAY_EXIT command from Camera HAL.
    07-15 13:09:09.539 27174 11890 D OverlayDisplayAdapter: hardware/ti/omap4/omap3/camera-omap4/src/OverlayDisplayAdapter.cpp:715 processHalMsg - Stopping display thread...
    07-15 13:09:09.539 27174 11890 D OverlayDisplayAdapter: hardware/ti/omap4/omap3/camera-omap4/src/OverlayDisplayAdapter.cpp:735 processHalMsg - +Signalling display semaphore
    07-15 13:09:09.539 27174 11890 D OverlayDisplayAdapter: hardware/ti/omap4/omap3/camera-omap4/src/OverlayDisplayAdapter.cpp:740 processHalMsg - -Signalling display semaphore
    07-15 13:09:09.539 27174 27672 E CameraHal: hardware/ti/omap4/omap3/camera-omap4/src/AppCallbackNotifier.cpp:1517 stop - AppCallbackNotifier already in stopped state
    07-15 13:09:09.539 27174 11876 D CameraHal: hardware/ti/omap4/omap3/camera-omap4/src/AppCallbackNotifier.cpp:161 notificationThread - Notification Thread received message from Camera HAL
    07-15 13:09:09.539 27174 11876 D CameraHal: hardware/ti/omap4/omap3/camera-omap4/src/AppCallbackNotifier.cpp:848 processMessage - +Msg get...
    07-15 13:09:09.539 27174 11876 D CameraHal: hardware/ti/omap4/omap3/camera-omap4/src/AppCallbackNotifier.cpp:850 processMessage - -Msg get...
    07-15 13:09:09.539 27174 11876 D CameraHal: hardware/ti/omap4/omap3/camera-omap4/src/AppCallbackNotifier.cpp:869 processMessage - Received NOTIFIER_EXIT command from Camera HAL
    07-15 13:09:09.539 27174 11876 D CameraHal: hardware/ti/omap4/omap3/camera-omap4/src/AppCallbackNotifier.cpp:880 processMessage - +Signalling semaphore from CameraHAL..
    07-15 13:09:09.539 27174 11876 D CameraHal: hardware/ti/omap4/omap3/camera-omap4/src/AppCallbackNotifier.cpp:883 processMessage - -Signalling semaphore from CameraHAL..
    07-15 13:09:09.539 27174 11876 D CameraHal: hardware/ti/omap4/omap3/camera-omap4/src/AppCallbackNotifier.cpp:165 notificationThread - Notification Thread exiting.
    07-15 13:09:09.539 27174 11876 D CameraHal: hardware/ti/omap4/omap3/camera-omap4/src/AppCallbackNotifier.cpp:190 notificationThread - Notification Thread exited.
    07-15 13:09:09.539 27174 27672 D CameraHal: hardware/ti/omap4/omap3/camera-omap4/src/AppCallbackNotifier.cpp:938 ~AppCallbackNotifier - Stopping Event Provider
    07-15 13:09:09.539 27174 27672 D CameraHal: hardware/ti/omap4/omap3/camera-omap4/src/AppCallbackNotifier.cpp:946 ~AppCallbackNotifier - Stopping Frame Provider
    07-15 13:09:09.539 27174 27672 D CameraHal: hardware/ti/omap4/omap3/camera-omap4/src/BaseCameraAdapter.cpp:476 sendCommand - Set time out
    07-15 13:09:09.539 27174 27672 D OMXCameraAdapter: 
    07-15 13:09:09.539 27174 27672 D OMXCameraAdapter: 
    07-15 13:09:09.539 27174 27672 D OMXCameraAdapter: **** ~OMXCameraAdapter called() ! ****
    07-15 13:09:09.539 27174 27672 D OMXCameraAdapter: 
    07-15 13:09:09.585 27174 27672 E DOMX_RPC: Closing IPC
    07-15 13:09:09.585 27174 11875 D OMXCameraAdapter: hardware/ti/omap4/omap3/camera-omap4/src/OMXCameraAdapter/OMXCameraAdapter.cpp:9462 Handler - msg.command = -1
    07-15 13:09:09.585 27174 11875 E OMXCameraAdapter: hardware/ti/omap4/omap3/camera-omap4/src/OMXCameraAdapter/OMXCameraAdapter.cpp:9476 Handler - Exiting command handler
    07-15 13:09:09.585 27174 27672 D OMXCameraAdapter: 
    07-15 13:09:09.585 27174 27672 D OMXCameraAdapter: 
    07-15 13:09:09.585 27174 27672 D OMXCameraAdapter: **** ~OMXCameraAdapter exiting ! ****
    07-15 13:09:09.585 27174 27672 D OMXCameraAdapter: 
    07-15 13:09:09.601 27174 27672 D CameraHal: 
    07-15 13:09:09.601 27174 27672 D CameraHal: 
    07-15 13:09:09.601 27174 27672 D CameraHal: **** ~CameraHal() ****
    07-15 13:09:09.601 27174 27672 D CameraHal: 
    07-15 13:09:09.601 27174 27672 D CameraHal: 
    07-15 13:09:11.523 27203 27552 I ActivityManager: Starting: Intent { act=android.intent.action.MAIN flg=0x10500000 cmp=de.softxperience.android.nedebug/.LogcatActivity } from pid 27542 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-15T07:48:02.973

尝试添加以下权限，因为在捕获时不允许存储图像...

```
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-14T16:44:54.480

您确定您已申请拍照（并使用任何相机功能）的权限吗

```
<uses-permission android:name="android.permission.CAMERA" />
<uses-feature android:name="android.hardware.camera" />
<uses-feature android:name="android.hardware.camera.autofocus" /> 
```

# javascript - 从 Google 电子表格中将快速添加事件添加到 Google 日历

> ID：11485519
> 
> 赞同：0
> 
> 时间：2012-07-14T16:41:37.587
> 
> 标签：javascript, optimization, google-calendar-api, google-apps-script, google-sheets

我已经看了一遍，但我不知道如何从谷歌电子表格中将快速日历事件添加到谷歌日历。谷歌提供代码（Javascript）从谷歌电子表格中发送电子邮件，但除了发送电子邮件之外，我还希望能够发送快速校准事件。这是我开始使用的 Javascript，我复制并粘贴了最后一行，这是我找到的有关日历快速添加的代码。这是我第一次编码或使用 javascript。

```
 function sendEmails() {
      var sheet = SpreadsheetApp.getActiveSheet();
      var startRow = 2;  // First row of data to process
      var numRows = 2;   // Number of rows to process
      // Fetch the range of cells A2:B3
      var dataRange = sheet.getRange(startRow, 1, numRows, 2)
      // Fetch values for each row in the Range.
      var data = dataRange.getValues();
      for (i in data) {
        var row = data[i];
        var emailAddress = row[0];  // First column
        var message = row[1];       // Second column
        var subject = "CRM Update";
        MailApp.sendEmail(emailAddress, subject, message);
        CalendarApp.getDefaultCalendar().createEventFromDescription();
      }
    } 
```

我也找到了这段代码，但它可能是一种差异语言？

```
 function createQuickAddEvent ($client, $quickAddText) {
      $gdataCal = new Zend_Gdata_Calendar($client);
      $event = $gdataCal->newEventEntry();
      $event->content = $gdataCal->newContent($quickAddText);
      $event->quickAdd = $gdataCal->newQuickAdd('true');
      $newEvent = $gdataCal->insertEvent($event);
    } 
```

任何建议都会很有用，或者将我引导到可能包含我正在寻找的此代码的页面。谢谢你的时间。迈克尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-15T18:32:56.107

您应该使用 GAS（Google Apps 脚本 - [https://developers.google.com/apps-script/](https://developers.google.com/apps-script/)），您可以将其嵌入到电子表格中。它类似于带有附加功能的 JavaScript。上面的第一个示例是 GAS（第二个示例是 php，它是具有 Google API 客户端库的语言之一 - [https://developers.google.com/discovery/libraries](https://developers.google.com/discovery/libraries)）

该脚本可以附加到一个菜单项，您可以将其添加到电子表格中，或者作为电子表格更改的触发器，甚至构建一个专用的 UI 来添加事件。

查看使用 GAS 添加日历事件的文档：[https ://developers.google.com/apps-script/class_calendar#createEvent](https://developers.google.com/apps-script/class_calendar#createEvent)

# xml - AS3 中的 XML 到对象

> ID：11485521
> 
> 赞同：0
> 
> 时间：2012-07-14T16:41:39.973
> 
> 标签：xml, actionscript-3, object

我正在尝试将此 XML 文件转换为 AS3 中的对象。

```
<?xml version="1.0" encoding="utf-8"?>
<mimeTypes>
    <mimeType>
        <ext>.ico</ext>
        <type>image/x-icon</type>
    </mimeType>
    <mimeType>
        <ext>.txt</ext>
        <type>text/plain</type>
    </mimeType>
    <mimeType>
        <ext>.html</ext>
        <type>text/html</type>
    </mimeType>
</mimeTypes> 
```

问题是我正在尝试使 ext = 类型。例如;

```
mimeTypes[".ico"] = "image/x-icon";
mimeTypes[".txt"] = "text/plain";
mimeTypes[".html"] = "text/html"; 
```

无论如何我可以做到这一点吗？

这是我现在的代码：

```
var mimeXML = new XML(e.target.data);
var len:uint = mimeXML.mimeType.length();
mimeT[mimeXML.mimeType.child("ext")] = mimeXML.mimeType.child("type");
for(var id:String in mimeT) {
    var value:Object = mimeT[id];
    trace(id + " = " + value);
} 
```

但是，它输出：

```
<ext>.ico</ext>
<ext>.txt</ext>
<ext>.html</ext> = <type>image/x-icon</type>
<type>text/plain</type>
<type>text/html</type> 
```

任何帮助将不胜感激，谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T16:51:59.947

mimeTypes[String(myXMLNode)] = myXMLNode;

在你的情况下：

```
var xml:XML = 
<mimeTypes>
    <mimeType>
        <ext>ico</ext>
        <type>image/x-icon</type>
    </mimeType>
    <mimeType>
        <ext>txt</ext>
        <type>text/plain</type>
    </mimeType>
    <mimeType>
        <ext>html</ext>
        <type>text/html</type>
    </mimeType>
</mimeTypes>

var myObject:Object = new Object;
for(var i:int = 0; i < xml.mimeType.length(); i++)
{
    var type:Object = new Object;
    type[String(xml.mimeType[i].ext)] = xml.mimeType[i].type;
    myObject[String(xml.mimeType[i].ext)] = type;
    trace(type[String(xml.mimeType[i].ext)]);
} 
```

但是您必须从 ext 节点中删除点。它不会与它一起工作......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-14T16:45:55.707

您是否考虑过使用 e4x 来获取 XML？这将返回一个易于遍历和操作的对象结构。

# php - 从最近上传的 KML 文件初始化 Google Maps API

> ID：11485522
> 
> 赞同：1
> 
> 时间：2012-07-14T16:41:42.690
> 
> 标签：php, html, google-maps-api-3, kml

所以我正在制作一个简单的网站，其初始功能如下：

用户将 KML 文件上传到网站。使用此 KML 文件初始化 Google Maps API，以便显示地图及其最近的移动。

现在这听起来很简单，但我在基础知识方面遇到了一些麻烦。这或多或少是我第一次涉足 Web 开发，所以我正在尝试学习 HTML、CSS、AJAX、PHP、Google Maps API V3，当然还有 KML 文件格式。

要使用 KML 文件初始化 Google Maps API，必须首先设置一些基本信息，例如：

```
function initialize() {
  var myLatlng = new google.maps.LatLng(40.65, -73.95);
  var myOptions = {
    zoom: 12,
    center: myLatlng,
    mapTypeId: google.maps.MapTypeId.ROADMAP
  }; 
```

这里要看的重要一点是地图的中心位置。

除此之外，还必须指定要使用的 KML 文件：

```
var nyLayer = new google.maps.KmlLayer(
      'http://www.searcharoo.net/SearchKml/newyork.kml',
      {  suppressInfoWindows: true,
         map: map}); 
```

这些当然只是示例，而不是我将使用的数据。

现在我的问题就是这样。这些值似乎是预先确定的和静态的。要初始化 Google Maps API，需要事先知道这些值。但就我而言，在用户上传 KML 文件之前，这些值是未知的。

到目前为止，我有一个简单的 PHP 脚本来处理文件上传。我不知道如何将控制权传递给包含 Google 地图设置的 JavaScript，或者如何编写此代码，以便使用仅在文件上传后才知道的值来初始化地图。

总而言之，我要实现的是：

用户浏览到 KML 文件。用户按下“上传”按钮。文件被上传，然后立即用于初始化显示他们移动的地图。

我可能写得太多了，但我认为写得太多总比写得不够好。提前感谢您的建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T12:43:57.990

鉴于您发布的代码片段，KmlLayer 应该居中并缩放以显示 kml 文件的内容。如果没有这样做，请提供足够的信息来重现问题（kml 文件和显示它的 html/js 文件）。

编辑：你写道：

> 我需要我的 php 文件上传脚本来保存 KML 文件的名称，然后我需要以某种方式提取有关地图应该居中位置的信息，

除非您不喜欢 center 的默认行为并缩放地图以显示 kml 的所有内容，否则您不需要这样做

> 然后使用我刚刚提取的信息调用 Google Maps API（我认为是 JavaScript）。这一切都需要通过按一下上传按钮来完成。

是的。

编辑2：

> 好的，但是怎么做？我不知道该怎么办。这是我第一次尝试 Web 开发。我不是要求有人为我编写代码，而是关于如何执行此操作的指针

第 1 步：[文档中的此示例](https://google-developers.appspot.com/maps/documentation/javascript/examples/layer-kml)显示如何显示 kml 文件，将“http://gmaps-samples.googlecode.com/svn/trunk/ggeoxml/cta.kml”的引用替换为对 kml 文件的引用你想显示。

第 2 步：更改您的 php 以生成在单击按钮时加载和显示所需的 html 和 javascript。其工作原理取决于您希望在页面上的哪个位置显示它，以及您是否希望它成为单击按钮时显示的隐藏 div、新窗口或其他内容。

# c++ - 在 C++ 中的多个 Dll 之间共享变量

> ID：11485523
> 
> 赞同：0
> 
> 时间：2012-07-14T16:41:50.003
> 
> 标签：c++, dll, dllimport, dllexport, data-sharing

我需要在 2 个 C++ Dll 之间共享一个变量（1000 秒）。我该怎么做？

`MyVariables.Dll`包含：

```
int a = 0; 
```

`ModifyMyVariables.Dll`包含：

```
extern int a;    
a++; 
// do more stuff with a; 
```

我应该在以下文件中写什么？

```
myvariables.h
myvariables.cpp
ModifyMyVariables.h
ModifyMyVariables.cpp 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T19:59:45.897

您可以使用几种基本机制在图像（EXE、DLL...）之间共享数据（使用 extern 不能共享数据 - 它只指示链接器而不是加载器！）

1.  使用导入/导出符号（使用标准导入地址表/导出表）
2.  使用包含您的数据的[静态部分](http://msdn.microsoft.com/en-us/library/sf9b18xk.aspx)
3.  使用包含您的数据的[动态部分](http://msdn.microsoft.com/en-us/library/windows/desktop/aa366537%28v=vs.85%29.aspx)

在你的情况下，我会使用这些部分。这工作得很好。当然，在从双方访问（写入）这些数据时，您必须注意同步。

# java - JSP如何创建目录？

> ID：11485524
> 
> 赞同：1
> 
> 时间：2012-07-14T16:41:54.210
> 
> 标签：java, jsp, web

我使用 EclipseEE IDE 编写 JSP。现在有一个关于制作目录的问题。[问题] 我在JavaBean中写了创建一个目录的函数，我使用的是相对路径。但是该目录始终是在EclipseEE软件的目录下，而不是我的意图所在的位置。[代码]

```
String userDirString="./User/";
File userDir=new File(userDirString);    
if(userDir.mkdir()){
      ..........
}else{
      ..........
} 
```

我真的很想让程序在WebContent目录下创建目录，但是它不起作用，

我也尝试用其他方法来实现这个功能-----用JSP而不是javabean编写。但它也不起作用。

那我现在该怎么办？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-14T16:47:05.980

您不应该使用相对于应用程序/应用程序容器/等的相对文件路径。

此外，该`WebContent`目录是*项目*目录，而不是 Web 应用程序目录。

您应该写入一个绝对的、可配置的目录。

写入Web 应用程序*的*目录也不一定是个好主意，因为 (1) 重新部署应用程序时可能会删除该目录，以及 (2) 如果您将应用程序部署为战争文件。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-14T16:46:42.500

JSP 上的以下代码将为您提供 webroot 的路径

```
String pathToWebRoot = application.getRealPath("/"); 
```

最好不要在jsp上写java代码

# php - Kannel - 在特定时间发送短信

> ID：11485525
> 
> 赞同：1
> 
> 时间：2012-07-14T16:42:00.160
> 
> 标签：php, kannel

我安装了 kannel，工作起来就像一个魅力。它接收发送的 SMS，将数据放入 MySQL 数据库并回复。问题是，我需要让 kannel 在我指定的时间（例如 1 小时或其他时间）之后发送短信。因此，例如，您发送一条短信，您会立即收到回复，然后，一个小时后，您会收到另一条短信。这可以通过更改我的 PHP 脚本来发送/接收来完成吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T17:12:58.510

您应该在服务器中使用**CronJob**。

# java - 默认情况下可以将字符串数组附加到 ListView 吗？

> ID：11485526
> 
> 赞同：0
> 
> 时间：2012-07-14T16:42:01.267
> 
> 标签：java, android, listview, arrays

如果我在我的 strings.xml 文件中定义了一个字符串数组。

```
<string-array name="items">
    <item >item 1</item>
    <item >item 2</item>
    <item >item 3</item>
</string-array> 
```

我可以使用引用将其直接插入我的 ListView 吗？

```
<ListView
    android:id="@+id/itemsListView"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    - reference to items here >
</ListView> 
```

还是只能在代码中使用适配器？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-14T16:49:29.077

用于`android:entries`元素并引用您的`<string-array>`

并创建`(res->value->array.xml)`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-14T16:49:38.727

来自官方文档：

![在此处输入图像描述](../Images/831738ce86db585a5f5ba3fa40075c31.png)

所以使用`android:entries`你的 ListView 元素上的属性，指向一个`<string-array>`资源[把你的数组放在`res/values/arrays.xml`]

但是，如果您必须自定义您的项目（使用 ImageView、复选框...），您必须使用光标适配器或数组适配器以编程方式进行。

适配器是数据源和 ui 组件之间的接口，每次您必须填充列表视图、网格视图、图库、微调器等时，您必须使用适配器

# chef-infra - 在 Vagrantfile 中使用 Chef-Solo 配置 Apache2

> ID：11485529
> 
> 赞同：2
> 
> 时间：2012-07-14T16:42:25.550
> 
> 标签：chef-infra, vagrant

过去，我在使用 Vagrant 部署“本地”开发实例时曾尝试过几次失败的尝试，但从未能够花时间完全绕过学习曲线。`DocumentRoot`我再次尝试，虽然我可以加载Opscode食谱（apache2），但它不能开箱即用，因为`/vagrant`.

我明白了，这并不意外，但我不知道如何将所有这些放在一起，而且 Vagrant 文档没有详细说明，这是可以理解的。另一方面，Opscode[食谱自述文件提供了如此多的细节，以至于我的菜鸟无法理解它。](https://github.com/opscode-cookbooks/apache2)

这是我现在拥有的超级简单的片段：

```
config.vm.provision :chef_solo do |chef|
  chef.cookbooks_path = "cookbooks"
  chef.add_recipe "apache2"

  # You may also specify custom JSON attributes:
  # chef.json = { :mysql_password => "foo" }
end 
```

那里没有多少，我知道。在某种程度上，我知道该`chef.json`组件会发挥我想要做的事情，但我不知道如何。有人可以提供——或指出我如何`DocumentRoot`为正在安装的 Apache2 实例配置的以 Vagrant 为中心的示例吗？我希望一旦我有一个例子，我就会知道如何拼凑我需要的所有其他东西。

另外，只是出于好奇，我为什么要调用`chef.add_recipe`加载 Apache2*食谱*？还是我误解了语法？

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T00:41:37.840

我没有仔细查看 apache2 食谱，但我相信该食谱附带的默认站点模板指向 /var/www 鉴于此，我认为您有 2 个选项。1) 使用 apache2 cookbook 附带的站点资源来创建一个新站点。2) 通过 vagrant 将你的 web 根目录挂载到 /var/www。哪种方法有点取决于您的目标。如果你只是想测试你的网站，我推荐 2。为了做到这一点，你需要在你的 vagrant 配置中添加这样的东西：

```
config.vm.share_folder "web", "/var/www", "~/src/www" 
```

其中第一个参数是共享的任意 id，第二个是目标目录（在这种情况下是 /var/www，因为这是 apache 配置中指向的内容），第三个是您正在共享的本地路径.

NB Virtualbox 对符号链接不是很好，所以如果你的共享中有符号链接，你需要添加这个：

```
config.vm.customize ["setextradata", :id, "VBoxInternal2/SharedFoldersEnableSymlinksCreate/graph", "1"] 
```

这将使符号链接能够工作。

如果您有兴趣学习 Chef，那么您可以采用方法 #1。这将需要创建您自己的说明书并编写一个模板，该模板可以结合 apache 站点定义生成适当的配置文件。如果这是您的目标，那么我可以扩展此答案，为您提供有关如何实现此目标的详细信息。

HTH。

# llvm - PHI 指令究竟做了什么以及如何在 LLVM 中使用它

> ID：11485531
> 
> 赞同：99
> 
> 时间：2012-07-14T16:42:28.953
> 
> 标签：llvm, llvm-ir

LLVM 有[phi](http://llvm.org/docs/LangRef.html#i_phi)指令，解释很奇怪：

> *'phi' 指令用于实现 SSA 图中表示函数的 φ 节点。*

通常它用于实现分支。如果我理解正确，则需要进行依赖性分析，在某些情况下，它可以帮助避免不必要的加载。但是，仍然很难理解它到底做了什么。

万花筒[示例](https://llvm.org/docs/tutorial/MyFirstLanguageFrontend/LangImpl05.html#llvm-ir-for-if-then-else)很好地解释了它的`if`案例。但是，如何实现`&&`和之类的逻辑操作还不是很清楚`||`。[如果我在在线 llvm](http://llvm.org/demo/index.cgi)编译器中键入以下内容：

```
void main1(bool r, bool y) {
    bool l = y || r;
} 
```

最后几行完全让我感到困惑：

```
; <label>:10                                      ; preds = %7, %0
%11 = phi i1 [ true, %0 ], [ %9, %7 ]
%12 = zext i1 %11 to i8 
```

看起来 phi 节点产生了可以使用的结果。而且我的印象是 phi 节点只是定义了来自哪些路径值。

有人可以解释什么是 Phi 节点，以及如何使用它来实现`||`吗？

* * *

## 回答 #1

> 赞同：90
> 
> 时间：2012-07-14T17:41:59.570

phi 节点是用于根据当前块的前身选择值的指令（[在此处](http://llvm.org/doxygen/classllvm_1_1PHINode.html)查看完整的层次结构 - 它也用作值，它是它继承的类之一）。

由于 LLVM 代码的 SSA（静态单一分配）样式的结构，Phi 节点是必需的 - 例如，以下 C++ 函数

```
void m(bool r, bool y){
    bool l = y || r ;
} 
```

被翻译成以下 IR：（通过创建`clang -c -emit-llvm file.c -o out.bc`- 然后通过查看`llvm-dis`）

```
define void @_Z1mbb(i1 zeroext %r, i1 zeroext %y) nounwind {
entry:
  %r.addr = alloca i8, align 1
  %y.addr = alloca i8, align 1
  %l = alloca i8, align 1
  %frombool = zext i1 %r to i8
  store i8 %frombool, i8* %r.addr, align 1
  %frombool1 = zext i1 %y to i8
  store i8 %frombool1, i8* %y.addr, align 1
  %0 = load i8* %y.addr, align 1
  %tobool = trunc i8 %0 to i1
  br i1 %tobool, label %lor.end, label %lor.rhs

lor.rhs:                                          ; preds = %entry
  %1 = load i8* %r.addr, align 1
  %tobool2 = trunc i8 %1 to i1
  br label %lor.end

lor.end:                                          ; preds = %lor.rhs, %entry
  %2 = phi i1 [ true, %entry ], [ %tobool2, %lor.rhs ]
  %frombool3 = zext i1 %2 to i8
  store i8 %frombool3, i8* %l, align 1
  ret void
} 
```

那么这里会发生什么？与 C++ 代码中的变量`bool l`可以是 0 或 1 不同，在 LLVM IR 中它必须定义**一次**。所以我们检查是否`%tobool`为真，然后跳转到`lor.end`or `lor.rhs`。

在`lor.end`我们终于有了 || 的值 操作员。如果我们是从入口处到达的——那就是真的。否则，它等于 - 的值，`%tobool2`这正是我们从以下 IR 行得到的：

```
%2 = phi i1 [ true, %entry ], [ %tobool2, %lor.rhs ] 
```

* * *

## 回答 #2

> 赞同：35
> 
> 时间：2012-07-14T21:40:47.923

您根本不需要使用 phi 。只需创建一堆临时变量。LLVM 优化通道将负责优化临时变量，并将自动使用 phi 节点。

例如，如果你想这样做：

```
x = 4;
if (something) x = x + 2;
print(x); 
```

您可以为此使用 phi 节点（在伪代码中）：

1.  将 4 分配给 x1
2.  if (!something) 分支到 4
3.  通过加 2 从 x1 计算 x2
4.  从 x1 和 x2 分配 x3 phi
5.  用 x3 调用 print

但是你可以不用 phi 节点（在伪代码中）：

1.  在名为 x 的堆栈上分配局部变量
2.  加载到 temp x1 值 4
3.  将 x1 存储到 x
4.  if (!something) 分支到 8
5.  将 x 加载到温度 x2
6.  将 x2 和 4 添加到温度 x3
7.  将 x3 存储到 x
8.  将 x 加载到温度 x4
9.  用 x4 调用打印

通过使用 llvm 运行优化通道，第二个代码将针对第一个代码进行优化。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2022-01-29T02:17:46.233

现有的答案很好。但是，我想让它更简单、更短。

```
block3:
    %result = phi i32 [%a, %block1], [%b, %block2] 
```

这意味着如果前一个块是`block1`，选择值`a`。如果前一个块是`block2`，选择 value `b`。

为什么我们要这样写？这是为了防止`result`在两个不同的块中分配，例如`if`块和`else`块。因为，我们不想违反 SSA 原则。SSA 帮助编译器应用各种优化，它是中间代码的事实标准。有关详细信息，请参阅[此参考](https://mapping-high-level-constructs-to-llvm-ir.readthedocs.io/en/latest/control-structures/ssa-phi.html)。

# mysql - 找不到适合 jdbc mysql 的驱动程序？

> ID：11485532
> 
> 赞同：6
> 
> 时间：2012-07-14T16:42:45.937
> 
> 标签：mysql, eclipse, tomcat, jdbc

我正在尝试编写一个程序以在 eclipse 中连接到 MySQL 数据库，但我收到错误*"java.sql.SQLException: No proper driver found"*。

java代码是：

```
import java.sql.*;

public class FirstExample {

//static final String S_JDBC_DRIVER = "com.mysql.jdbc.Driver";  
static final String S_DB_URL = "jdbc:mysql://localhost:3306/emp";
static final String S_USER = "root";
static final String S_PASS = "root";

public static void main(String[] args) {

    try {

        System.out.println("Connecting to database...");
        //Class.forName(S_JDBC_DRIVER);
        Connection connection = DriverManager.getConnection(S_DB_URL,
                S_USER, S_PASS);

        System.out.println("Creating statement...");
        Statement statement = connection.createStatement();
        String sql = "SELECT * FROM Employee";
        ResultSet resultSet = statement.executeQuery(sql);

        while (resultSet.next()) {

            int iId = resultSet.getInt("id");
            int iAge = resultSet.getInt("age");
            String sFirst = resultSet.getString("fname");
            String sLast = resultSet.getString("lname");

            System.out.print("ID: " + iId);
            System.out.print("\tAge: " + iAge);
            System.out.print("\tFirst: " + sFirst);
            System.out.println("\tLast: " + sLast);
        }

        resultSet.close();
        statement.close();
        connection.close();
    } catch (SQLException se) {

        for (Throwable t : se) {
            t.printStackTrace();
        }
    } 
    System.out.println("Goodbye!");
} 
```

}

控制台选项卡中的输出是：

```
Connecting to database...
java.sql.SQLException: No suitable driver found for jdbc:mysql://localhost:3306/emp
at java.sql.DriverManager.getConnection(Unknown Source)
at java.sql.DriverManager.getConnection(Unknown Source)
at FirstExample.main(FirstExample.java:21)
Goodbye! 
```

我使用了 MySQL 连接器/J。解压到 MySQL 安装目录，jar 文件添加到 CLASSPATH。

另请参阅此图像。有一个 ！标记在项目根目录。[image01](https://docs.google.com/file/d/0B-mhigcuV7cUMnMwN3FuSy0xck0/edit)

当我包含 2 个注释语句时，我得到如下图所示的错误：[image02 ：](https://docs.google.com/file/d/0B-mhigcuV7cUNF9ud21iRnNMTEk/edit)

```
static final String S_JDBC_DRIVER = "com.mysql.jdbc.Driver";
Class.forName(S_JDBC_DRIVER); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-06-01T21:31:25.387

我有同样的问题。我通过添加解决了它：

```
Class.forName("com.mysql.jdbc.Driver"); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-14T16:59:28.523

对于除了最琐碎的应用程序之外的所有应用程序，都**不会**`CLASSPATH`使用环境变量。通常，这些库包含在jar 清单的条目中，或者包含在 java 命令行的选项中。**`Class-Path``-cp`**

 **在这种情况下，您需要将 MySQL JDBC 驱动程序添加到 Eclipse 项目的构建路径中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-16T13:49:52.520

`java -cp`你可以像pwd这样放置路径`/mysql-connector-java-5.1.22-bin.jar:. <classname>`。

确保您在 mysql 驱动程序所在的同一目录中。

希望有帮助。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-07-29T13:00:24.120

在获得连接之前加载 Driver 类。

使用此代码：

```
Class.forName("com.mysql.jdbc.Driver");
con = DriverManager.getConnection("jdbc:mysql://localhost:3306/test_db", "user", "passw"); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-15T07:41:48.480

或者，您也可以通过在 eclipse 中选择项目，将安装的 jar 文件添加到 eclipse 项目中，右键单击它并转到属性，选择 Java 构建路径>>选择库选项卡>>添加外部 jar 文件并浏览为大多数 ubuntu 用户安装了 mysql-connector-java.jar 文件或任何 mysql java 连接器文件到 /usr/share/java/ 目录中。单击确定并重建您的项目。祝你好运

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-03-25T01:23:05.957

我遇到了和你一样的问题，但是我处理如下：我将名为mysql-connector-java-5.1.23-bin.jar的jar复制到\Apache Software Foundation\Tomcat 6.0\lib中，然后重新启动tomcat。希望有帮助**

# php - 以相反的方式显示来自数据库的消息

> ID：11485539
> 
> 赞同：0
> 
> 时间：2012-07-14T16:43:37.163
> 
> 标签：php, mysql, messages, limits

我正在尝试使它像这样显示消息

*旧留言

早消息

较新的消息

最新消息*

我尝试了几种不同的方法。通过放

```
 SELECT * FROM place_chat WHERE whereto = '".mysql_real_escape_string($where)."' ORDER BY     id DESC LIMIT 7" 
```

^ 但这只是在顶部显示最新消息的结果，所以我尝试了这个。

```
 SELECT * FROM place_chat WHERE whereto = '".mysql_real_escape_string($where)."' ORDER BY     id ASC LIMIT 7" 
```

^ 但后来我发布了它只会显示最旧的消息，而不是调整它的显示方式并确保并对其进行测试。它只显示最旧的消息。

有人可以解释一下这样做的方法吗？我一直在尝试这样做一段时间。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-14T16:49:43.403

您需要先获取最新的 7 条记录，*然后*对其重新排序：

```
SELECT *
FROM
(
    SELECT *
    FROM place_chat 
    WHERE whereto = mysql_real_escape_string($where)
    ORDER BY id DESC
    LIMIT 7
) newest_place_chat
ORDER BY id ASC 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-14T16:50:41.963

由于您设置了标签“php”，我假设您从 php 脚本中查询数据库，该脚本还将查询结果转换为输出，在这种情况下很可能是 html 表。

您可以简单地调转您在 php.ini 中遍历结果数组的顺序。这样您就不必更改查询中的任何内容。

# c# - 将 WAV 文件上传到 Windows Phone 7 的 Skydrive

> ID：11485540
> 
> 赞同：0
> 
> 时间：2012-07-14T16:43:37.907
> 
> 标签：c#, windows-phone-7

我最近为 wp7 创建了一个录音机。但是用户开始反馈说没有办法上传录制的文件skydrive。我搜索并获得了很多示例，但它们仅包含文本文件和照片[示例链接](http://www.silverlightshow.net/items/SkyDrive-usage-through-Live-SDK-on-Windows-Phone.aspx)。我不知道如何将**.wav 文件**上传到 skydrive。有人可以为此提供一些样品吗？在此先感谢您的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-14T16:51:43.150

文本文件、照片等没有区别。它们都只是一堆字节，它们的解释不同。在上面发布的链接中，有以下代码片段：

```
private void btnSave_Click(object sender, EventArgs e)
{
    string fileName = this.fileName.Text.Trim();
    byte[] byteArray = Encoding.Unicode.GetBytes(this.fileContent.Text.Trim());
    MemoryStream fileStream = new MemoryStream(byteArray);

    LiveConnectClient uploadClient = new LiveConnectClient(App.Current.LiveSession);
    uploadClient.UploadCompleted += new EventHandler<LiveOperationCompletedEventArgs>(uploadClient_UploadCompleted);
    uploadClient.UploadAsync("me/skydrive", fileName, fileStream );
} 
```

前三行涉及将字符串转换为可以上传的字节流。为了上传一个 wav 文件，你只需要改变这三行来准备一个包含你的 wav 数据的流。

如果您的 wav 文件保存在隔离存储中，您可以使用[IsolatedStorageFile.OpenFile](http://msdn.microsoft.com/en-us/library/cc190070)来获取正确的流。

# c++ - C++ 按值返回

> ID：11485542
> 
> 赞同：2
> 
> 时间：2012-07-14T16:44:32.203
> 
> 标签：c++, function, copy-constructor

从下面的代码中，我期望 CA 类会调用以下代码

1.  构造函数创建要由函数返回的临时对象`foo`
2.  `a`复制构造函数创建要传递给主变量的变量
3.  另一个复制构造函数，它将`a`根据函数返回的值创建变量。

为什么不是这样？我得到的结果只是

```
A 
```

在我期待的时候

```
ABB 
```

所以只有构造函数被调用。编译器是在幕后优化某些东西还是我错过了一些 C++ 概念？

```
class CA{
public:
   CA(){ std::cout << "A"; }
   CA( const CA& ){ std::cout << "B"; }
   CA& operator=(const CA& ){ std::cout << "C";return *this; }
};

CA foo(){
      return CA();
}

int main(){
 CA a = foo();    
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-14T16:45:59.703

> 编译器是在幕后优化某些东西还是我错过了一些 C++ 概念？

发现！这称为复制省略。在谷歌上查找 RVO 和 NRVO。您还应该查找三规则。

复制省略是编译器允许执行的唯一影响可观察行为的优化。出于这个原因，您不应该在复制构造函数中放置重要的逻辑。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-14T16:52:46.060

C++ 中至少有两种“类型”的优化。

*   第一类是语言规范明确引入的特定优化。

*   第二种是编译器在“as-if”规则下所做的所有那些疯狂和不可预测的优化（即，只要程序的可观察行为保持不变，编译器就可以做任何事情）。

（有人可能会说只有第二种优化才是*真正*的优化。）

您在这里看到的是第一种优化。在执行多步复制操作时，语言规范总是明确允许编译器消除中间临时副本。

此外，C++03 和更高版本的语言规范更进一步：它们明确允许编译器执行“命名返回值优化”（NRVO），这实际上消除了命名（非临时）对象。

两者都减少了程序中的复制操作次数。

C++ 中的这种复制消除优化是允许的，即使它们改变了程序的可观察行为，即第一种优化有时会违反对第二种的限制。在您的情况下，即使您将 I/O 操作插入到复制构造函数中，仍然允许编译器消除对该构造函数的调用。

您发布的代码不需要 NRVO。一个好的 C++98 编译器应该能够产生你观察到的结果。如果您想查看您的编译器在这种情况下是否执行 NRVO，您可能想试试这个

```
CA foo(){
  Ca ca;
  return ca;
} 
```

# yii - Yii，createUrl 没有按预期工作

> ID：11485552
> 
> 赞同：2
> 
> 时间：2012-07-14T16:45:52.170
> 
> 标签：yii, yii-routing

我正在执行以下操作：

```
 <li><a href='<? Yii::app()->controller->createUrl('sources'); ?>'>sources</a></li> 
```

但是，'sources' 没有附加到路径中，而是代码只是将路径返回到当前控制器。

谁能建议我为什么会这样？代码在一个模块中。

我的网址规则如下：

```
'rules'=>array(
 '<controller:\w+>/<id:\d+>'=>'<controller>/view',
 '<controller:\w+>/<action:\w+>/<id:\d+>'=>'<controller>/<action>',
 '<controller:\w+>/<action:\w+>'=>'<controller>/<action>',
               ), 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-15T13:37:13.040

你应该尝试两件事

要获取绝对 URL，而不是相对于当前控制器或操作，请添加前导“斜杠”，例如：

```
 Yii::app()->createUrl('/sources/view'); 
```

你还应该确保你没有做一些愚蠢的事情，比如忘记使用**echo** :) 有时会发生在我身上......

```
 <li><a href='<? echo Yii::app()->controller->createUrl('sources'); ?>'>sources</a></li> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-14T17:21:02.763

首先，您为什么还要尝试从视图访问控制器？这是毫无意义的，它违背了所有的模式。

此外，您可以使用[`Yii::app()->createUrl()`](https://github.com/yiisoft/yii/blob/master/framework/base/CApplication.php#L515). 此外，您可能会从阅读有关如何使用此功能的文档中受益。

该值`'sources'`不适合任何路由模式..尝试以下操作：

*   `Yii::app()->createUrl('sources/view');`
*   `Yii::app()->createUrl('sources/foobar');`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-05-26T09:08:50.953

你忘记了回声：

```
 <a href="<?php 
      echo Yii::app()->createUrl("[/][CONTROLLER][/]ACTION", array("view"=>"VIEW")); 
    ?>">Link name</a> 
```

# haskell - 在“yesod devel”期间构建失败

> ID：11485555
> 
> 赞同：2
> 
> 时间：2012-07-14T16:46:25.650
> 
> 标签：haskell, cabal, yesod

我正在关注[Yesod 快速入门指南](http://www.yesodweb.com/page/quickstart)`cabal install`，但在执行和`yesod devel`有关`persistent-sqlite`模块时遇到错误。我已经安装了 ghc-7.4.1 和 haskell-platform-2012.2.0.0。

$阴谋安装：

> 加载包persistent-sqlite-0.9.0.2 ...链接... ghc：/home/roberto/.cabal/lib/persistent-sqlite-0.9.0.2/ghc-7.4.1/HSpersistent-sqlite-0.9.0.2。 o： **未知符号`__warn_memset_zero_len'**
> 
> **ghc：无法加载包“persistent-sqlite-0.9.0.2”**
> 
> cabal：错误：某些软件包无法安装：mate-0.0.0 在构建阶段失败。例外是：ExitFailure 1

$ yesod 开发：

> ghc：/home/roberto/.cabal/lib/persistent-sqlite-0.9.0.2/ghc-7.4.1/HSpersistent-sqlite-0.9.0.2.o：未知符号“__warn_memset_zero_len”
> 
> ghc：无法加载包“persistent-sqlite-0.9.0.2”构建失败，暂停...

$ ghc-pkg 列表：

```
persistent-sqlite-0.9.0.2
yesod-platform-1.0.5 
```

$ cabal install persistent-sqlite --reinstall

> 在函数“memset”中，
> 
> ```
> inlined from ‘exprDup’ at cbits/sqlite3.c:68471:0: 
> ```
> 
> /usr/include/bits/string3.h:82:0：警告：调用带有属性警告声明的“__warn_memset_zero_len”：memset 与恒定零长度参数一起使用；这可能是由于转置参数

`__warn_memset_zero_len();`如果我在 中注释掉那条线`/usr/include/bits/string3.h:82`，一切都会好起来的。有没有合适的解决方案，比如告诉 ghc 不要停止编译警告？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T21:51:43.997

运行时出现未知符号错误`yesod devel`通常是由于未能在应用程序的 cabal 文件中包含模块导致`exposed-modules`的。`other-modules`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-23T14:06:56.353

一些可能有帮助的评论：

长度为零的[memset](http://www.kernel.org/doc/man-pages/online/pages/man3/memset.3.html "memset 手册页")错误不容忽视。

未知符号错误可能表示底层 sqlite 库版本太旧。

*   考虑更新 sqlite，或者在优化问题的情况下检查 gcc 版本是否太旧。

*   [cabal-dev](http://hackage.haskell.org/package/cabal-dev "阴谋集团开发")没有使用 cabal，而是为您的项目提供了一个 sanboxed 库数据库。

*   与其单独安装库，不如将它们全部列在 .cabal 项目文件中，指定版本依赖项。（yesod-platform 和 persistent-sqlite 有共同的依赖关系）

干杯!

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-12-27T09:25:42.623

我在#ghc-dev 上的 FreeNode irc 上问了同样的问题，并被告知此错误是由于使用 GHCi 预编译的 Template Haskell 机制中的一些问题而发生的。这恰好在尝试预编译 SQLite 库时发生。

我还被告知，这应该通过即将发布的新版本 GHC 修复：v7.8.x（但仍需要一些时间才能将其作为新 Haskell 平台的一部分）。

我很惊讶这个问题存在了这么长时间。

# java - 在 Java 中获取 jpeg 图像的原始数据的简单快捷方式？

> ID：11485561
> 
> 赞同：0
> 
> 时间：2012-07-14T16:46:59.203
> 
> 标签：java, image

我正在使用[这个手机应用程序](https://play.google.com/store/apps/details?id=com.pas.webcam&feature=nav_result#?t=W251bGwsMSwxLDMsImNvbS5wYXMud2ViY2FtIl0)作为我在 PC 上编写的应用程序的眼睛。网络摄像头应用程序允许我下载 jpeg 格式的即时照片。我需要对这些镜头进行图像处理，为了做到这一点，我想掌握原始数据数组——即描述图像的像素矩阵。如何才能做到这一点？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-14T16:55:00.180

最简单的方法是做

`ImageIO.read(new File("Image.jpeg"))`

得到`BufferedImage`. 使用`BufferedImage`您可以使用`getRGB(int x, int y)`或`getRGB(int startX, int startY, int w, int h, int[] rgbArray, int offset, int scansize)`获得更好的性能。此外，`getRaster()`这是一个选项，我发现它是最快的（尽管需要付出更多的努力）。

对于设置像素，`setRGB`存在类似的方法。

编辑： `ImageIO`是`javax.​imageio.​ImageIO`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-14T16:54:28.033

可能最好的起点是阅读有关图像格式规范的几句话。这些应该解释如何以不同的格式存储数据。有了这些知识，如果您真的愿意，您可以自己编写一个解析器。

但请先想想：jpeg 不仅仅是像素的光栅矩阵，例如位图图像。

您很可能最终会使用图像处理库，而不是自己处理原始数据。这种方法更方便，更不容易出错。

# c++ - 如果我不使用 Code::Blocks 但 cygwin 进行编译，c++ 比较 std::string 将不起作用

> ID：11485568
> 
> 赞同：1
> 
> 时间：2012-07-14T16:47:35.180
> 
> 标签：c++, g++, cygwin, compare, stdstring

我正在编写一个应该读取 OFF 文件的类，但我遇到了以下问题：

如果我在 Code::Blocks 环境中编译它，一切正常。如果要加载的文件的第一行不是“OFF”，它将跳转到第二个 if 语句并退出程序...

但是，如果我在 cygwin 中使用 g++ 进行编译，则无论文件中实际写入什么，程序都会跳转到第二个 if 语句。有什么建议么？

```
#include <stdlib.h>
#include <iostream>
#include <fstream>
#include <sstream>
#include <string>

polyeder offManager::readOFF(std::string filename)
{
    //Open File
    std::ifstream file(filename.c_str());

// If file couldn't be opened
if( !file.is_open() )
{
    std::cerr << "ERROR: Konnte Datei \""
    << filename << "\" nicht oeffnen!"
    << std::endl;
    exit (2);
}

// Test if the file really is an OFF File
std::string line;
std::string off ("OFF");
getline( file, line );
if ( line.compare(off) != 0 )
{
    std::cerr << "ERROR: Datei \""
    << filename << "\" ist nicht im OFF Format!"
    << std::endl;
    file.close();
    exit (2);
}
...
} 
```

如果我在 cygwin 中输入 g++ -v 我会得到以下信息： Blablabla Thread-Modell: posix gcc-Version 4.5.3 (GCC)

Code::Blocks 使用这个版本： 线程模型：win32 gcc version 4.4.1 (TDM-2 mingw32)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-14T17:09:53.720

您打开的文件可能是 DOS 文本格式，所以它的行以 结尾`\r\n`，而不仅仅是`\n`.

[Cygwin FAQ 有一个关于这个问题](http://cygwin.com/faq/faq-nochunks.html#faq.api.cr-lf)的条目。我将您的代码复制到一个简单的`main`驱动程序中，并以两种方式编译它。一、常规方式：

```
$ g++ s.cc
$ ./a.exe test
ERROR: Datei "test" ist nicht im OFF Format! 
```

然后，使用建议的修复（以文本翻译模式打开，以二进制模式写入）：

```
$ g++ s.cc /usr/lib/automode.o 
$ ./a.exe test 
```

# algorithm - HSL 转换是否准确？

> ID：11485569
> 
> 赞同：3
> 
> 时间：2012-07-14T16:47:42.070
> 
> 标签：algorithm, colors, rgb, hsl

我还没有找到可以转换`rgb(0, 96, 255)`为 HSL 并返回的算法/实现，而最终值不会略有不同（`rgb(0, 98, 255)`）。这意味着每个人的算法都被破坏了（包括 Wolfram|Alpha）——或者 HSL 不能代表每种 RGB 颜色。

哪个是对的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T01:21:33.853

n.m. is correct—"HSL can represent every RGB color, but HSL rounded to nearest integer cannot."

What I ended up doing with the color class I was writing was to internally store the color as unrounded HSL. Then the getter methods for RGB and HSL just rounded them when called. This enabled doing things like changing hue and saturation, even on RGB colors, without getting an inaccurate conversion.

There's still no way to accurately convert rounded RGB and rounded HSL, so the solution is to simply never convert rounded RGB to/from rounded HSL.

# php - 通过下拉 MYSQL 将值插入数据库。“您的 SQL 语法错误；”

> ID：11485574
> 
> 赞同：0
> 
> 时间：2012-07-14T16:48:18.800
> 
> 标签：php, mysql

我在将下拉框中的值插入 MYSQL 数据库时遇到问题。

我想我已经把它缩小到 .sql 文件中的一个问题。我已经坐了几个小时试图弄清楚这一点，但我是这一切的初学者，可能会遗漏一些非常小的东西。

`mysql_error()`显示：

您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 1 行的 '', '', '', '')' 附近使用正确的语法

SQL 文件：

```
-- phpMyAdmin SQL Dump
-- version 3.3.9
-- http://www.phpmyadmin.net
--
-- Host: localhost
-- Generation Time: Jun 27, 2012 at 10:06 PM
-- Server version: 5.5.8
-- PHP Version: 5.3.5

SET SQL_MODE="NO_AUTO_VALUE_ON_ZERO";

/*!40101 SET @OLD_CHARACTER_SET_CLIENT=@@CHARACTER_SET_CLIENT */;
/*!40101 SET @OLD_CHARACTER_SET_RESULTS=@@CHARACTER_SET_RESULTS */;
/*!40101 SET @OLD_COLLATION_CONNECTION=@@COLLATION_CONNECTION */;
/*!40101 SET NAMES utf8 */;

--
-- Database: `chilli`
--
DROP DATABASE IF EXISTS `chilli`;
CREATE DATABASE `chilli` DEFAULT CHARACTER SET latin1 COLLATE latin1_swedish_ci;
USE `chilli`;

-- --------------------------------------------------------

--
-- Table structure for table `survey`
--

DROP TABLE IF EXISTS `survey`;
CREATE TABLE IF NOT EXISTS `survey` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `username` varchar(50) NOT NULL,
  `videos` varchar(50) NOT NULL,
  `scoville` varchar(50) NOT NULL,
  `extract` varchar(50) NOT NULL,
  `onions` varchar(50) NOT NULL,
  `retail` varchar(50) NOT NULL,
  PRIMARY KEY (`id`)
) ENGINE=InnoDB  DEFAULT CHARSET=latin1 AUTO_INCREMENT=2 ;

--
-- Dumping data for table `survey`
--

INSERT INTO `survey` (`id`, `username`, `videos`, `scoville`, `extract`, `onions`, `retail`) VALUES
(1, 'sean', 'Yes', '0-200,000 SHU', 'Yes', 'No', 'No');

-- --------------------------------------------------------

--

-- Table structure for table `orders`

--

DROP TABLE IF EXISTS `orders`;

CREATE TABLE IF NOT EXISTS `orders` (

  `id` int(11) NOT NULL AUTO_INCREMENT,
  `address` varchar(50) NOT NULL,

  `mild` varchar(50) NOT NULL,

  `medium` varchar(50) NOT NULL,

  `hot` varchar(50) NOT NULL,

  `v_hot` varchar(50) NOT NULL,

  PRIMARY KEY (`id`)

) ENGINE=InnoDB  DEFAULT CHARSET=latin1 AUTO_INCREMENT=2 ;

--

-- Dumping data for table `orders`

--

INSERT INTO `orders` (`id`, `address`, `mild`, `medium`, `hot`, `v_hot`) VALUES

(1, 'Fairman Place', 'Ancho', 'Chipotle', 'Shabu Shabu', 'Infinity Chilli'); 
```

PHP代码：

```
<?php require_once('Connections/localhost.php'); ?>

<?php

$add = $_POST['address'];
$mild = $_POST['mild'];
$medi = $_POST['medium'];
$hot = $_POST['hot'];
$v_hot = $_POST['v_hot'];

mysql_select_db($database_localhost,$localhost);

$q2 = "INSERT INTO orders VALUES (NULL, '$add', $mild', '$medi', '$hot', '$v_hot')";
$r2 = mysql_query($q2,$localhost);

if (mysql_affected_rows($localhost) == 1) {
    echo '<script type="text/javascript" language="javascript">
    alert("Your order has been placed! Thank You.");
    history.back();</script>';
    }

    else {
        //query failure
    echo mysql_error();
    echo '<script type="text/javascript" language="javascript">
    alert("The order could not be completed due to a system error");
    history.back();</script>';  
    }

mysql_close($localhost);

?> 
```

**请注意**

正如您从 sql 文件中看到的那样，有两个表（调查和订单）。第一个表（调查）工作正常，PHP 代码几乎相同。它将记录添加到表中没有问题。但我似乎无法向第二个表（订单）添加值。

从我在这个网站上看到其他人的代码来看，我的代码可能看起来有点不正统，所以请随意提及任何整理代码的技巧。

从我所看到的情况来看，这个主题已经被讨论过几次，但我似乎仍然无法通过模仿给出的答案找到解决方案。

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-14T16:50:30.560

您在查询中缺少单引号：

```
$q2 = "INSERT INTO orders VALUES (NULL, '$add', $mild', '$medi', '$hot', '$v_hot')";
                                               ^
                                               Right here 
```

# java - 处理Android中的内存问题

> ID：11485575
> 
> 赞同：-1
> 
> 时间：2012-07-14T16:48:33.583
> 
> 标签：java, android, memory, memory-leaks, bitmap

嗨，除了一个问题外，我已经创建了一款几乎可以发布的游戏。一旦用户玩了一段时间，应用程序就会变得非常缓慢。我认为这是因为内存使用，但我不确定。大家觉得记忆力是这样的吗？

第二个问题是如何判断我是否仍在引用位图。我尽力为所有位图调用回收，但不确定我是否错过了任何位图。我如何确定他们是否仍在使用内存？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T17:48:50.833

如果您还没有，请查看此视频[Google I/O 2011：Android 应用程序的内存管理。](http://www.google.com/events/io/2011/sessions/memory-management-for-android-apps.html)很有用。

# jquery - jQuery将图像渐变渐变为0

> ID：11485577
> 
> 赞同：3
> 
> 时间：2012-07-14T16:49:04.350
> 
> 标签：jquery, gradient, fade

是否可以使用 jQuery 将图像从顶部的 100% 淡化到底部的 0%。

这个想法是在其高度上创建图像的逐渐淡入淡出。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T08:48:39.063

如果您不想在背景中使用透明 png，那么您可以使用[此处提供的 jQuery 方式](http://www.bennadel.com/blog/1014-Creating-Transparent-Gradients-With-jQuery.htm)

我希望这个能帮上忙！

# java - 如何使用谷歌 API 从谷歌图像中保存图像？

> ID：11485578
> 
> 赞同：2
> 
> 时间：2012-07-14T16:49:04.077
> 
> 标签：java, image, google-image-search

我正在尝试在 Google 图像中搜索一些不同的图像，并使用 java Google API 保存每个查询的第一个结果。

我设法在 Google 中搜索并获取包含搜索结果的 json 对象。该对象包含包含图像的网站，而不是图像地址

代码：

```
URL url = new URL("https://ajax.googleapis.com/ajax/services/search/images?" +
                    "v=1.0&q="+properties.getProperty(Integer.toString(i))+"&userip=IP");
            URLConnection connection = url.openConnection();
            connection.addRequestProperty("Referer", "images.google.com");

        String line;
        StringBuilder builder = new StringBuilder();
        BufferedReader reader = new BufferedReader(new InputStreamReader(connection.getInputStream()));
        while((line = reader.readLine()) != null) {
        builder.append(line);
        }

        JSONObject json = new JSONObject(builder.toString()) 
```

如果我有图像链接，我也知道如何保存图像。

我的问题是如何获取第一个（或第二个或其他）图像正确地址而不是网址（例如 www.yadayadayada.com/image.png）

10倍

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-14T18:04:13.070

JSON 接口在[JSON Developer's Guide](https://developers.google.com/image-search/v1/jsondevguide)中有描述。特别是，[JSON 参考](https://developers.google.com/image-search/v1/jsondevguide#json_reference)部分概述了响应格式和保证字段。您可以使用`url`属性值。

[给定 URL，您可以使用ImageIO](http://docs.oracle.com/javase/6/docs/api/javax/imageio/ImageIO.html)读取图像并将其写入磁盘。这是相关[教程](http://docs.oracle.com/javase/tutorial/2d/images/index.html)。

如果不需要图像处理和演示，那么您可以使用[HttpURLConnection](http://docs.oracle.com/javase/6/docs/api/java/net/HttpURLConnection.html)来简单地下载文件。

编辑：示例

下面是一个基于问题中包含的代码的简单示例。它执行搜索并显示第一张图像。

```
import java.awt.image.BufferedImage;
import java.io.BufferedReader;
import java.io.InputStreamReader;
import java.net.URL;
import java.net.URLConnection;

import javax.imageio.ImageIO;
import javax.swing.ImageIcon;
import javax.swing.JOptionPane;

public class TestImage {

    public static void main(String[] args) {
        try{
            URL url = new URL("https://ajax.googleapis.com/ajax/services/search/images?v=1.0&q=Godfather");
            URLConnection connection = url.openConnection();

            String line;
            StringBuilder builder = new StringBuilder();
            BufferedReader reader = new BufferedReader(new InputStreamReader(connection.getInputStream()));
            while((line = reader.readLine()) != null) {
                builder.append(line);
            }

            JSONObject json = new JSONObject(builder.toString());
            String imageUrl = json.getJSONObject("responseData").getJSONArray("results").getJSONObject(0).getString("url");

            BufferedImage image = ImageIO.read(new URL(imageUrl));
            JOptionPane.showMessageDialog(null, "", "", JOptionPane.INFORMATION_MESSAGE, new ImageIcon(image));
        } catch(Exception e){
            JOptionPane.showMessageDialog(null, e.getMessage(), "Failure", JOptionPane.ERROR_MESSAGE);
            e.printStackTrace();
        }
    }
} 
```

# assembly - 来自 FS (MASM) 的 LODS

> ID：11485583
> 
> 赞同：2
> 
> 时间：2012-07-14T16:49:39.440
> 
> 标签：assembly, x86, masm, opcodes

我希望使用 LODS 操作码将双字节从 FS 加载到 eax。与 LODS 一起使用的默认段是 DS，我希望用 FS 覆盖它。如何使用 MASM 操作码来做到这一点？

```
00000000 (02) 6a30                     PUSH 0×30
00000002 (01) 5e                       POP ESI
00000003 (02) 64ad                     LODS EAX, [FS:ESI] 
```

来自这里[http://www.ragestorm.net/blogs/?p=369](http://www.ragestorm.net/blogs/?p=369)

非常感谢，迈克尔·恩斯特勒

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-14T17:04:01.510

1）以后，如果可能的话，请记得发布代码片段。它总是有帮助的:)

2) 16 位实模式 LODS* 指令*始终*假定 DS、ES 和 AX。你无法改变这一点。

3) 如果你想使用 FS，你可能还需要 "ASSUME NOTHING" 指令。例如：

```
ASSUME FS:NOTHING
MOV EAX, FS:[0]
ASSUME FS:ERROR 
```

'希望有帮助.. PSM

PS：如果你只是想学习汇编，我强烈建议你尝试 32 位保护模式。如果您有兴趣，这是一个很好的资源：

*   [从头开始编程，乔纳森·巴特利特](http://savannah.nongnu.org/projects/pgubook/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-14T17:20:59.990

好的，我找到了答案。

```
lods dword ptr fs:[esi] 
```

# opa - Opa：如何从数据库中删除对象？

> ID：11485589
> 
> 赞同：2
> 
> 时间：2012-07-14T16:50:22.310
> 
> 标签：opa

我想删除数据库集中的一个对象。

最好带有路径表达式和条件。就像是 `delete /wiki/page[content=""]`

如果这是不可能的，还有*其他*方法可以删除对象吗？（除了`shift`and `pop`，它只适用于数据库列表）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-14T18:11:17.133

在参考路径上使用`Db.remove`（您的路径以 @ 开头）：

```
 Db.remove(@/wiki/page[content=""]) 
```

这是一个例子：[https ://github.com/tsloughter/OpaDo/blob/master/src/todo.opa#L34](https://github.com/tsloughter/OpaDo/blob/master/src/todo.opa#L34)

# python - generator.throw() 有什么用？

> ID：11485591
> 
> 赞同：63
> 
> 时间：2012-07-14T16:50:30.307
> 
> 标签：python, generator, throw

[PEP 342（Coroutines via Enhanced Generators）](http://www.python.org/dev/peps/pep-0342/)向生成器对象添加了一个`throw()`方法，它允许调用者在生成器*内部*引发异常（就好像它被`yield`表达式抛出一样）。

我想知道这个功能的用例是什么。

* * *

## 回答 #1

> 赞同：72
> 
> 时间：2012-07-14T20:13:07.103

假设我使用生成器来处理向数据库添加信息；我使用它来存储网络接收到的信息，并且通过使用生成器，我可以在我实际接收到数据时有效地执行此操作，并在其他情况下执行其他操作。

所以，我的生成器首先打开一个数据库连接，每次你给它发送一些东西，它都会添加一行：

```
def add_to_database(connection_string):
    db = mydatabaselibrary.connect(connection_string)
    cursor = db.cursor()
    while True:
        row = yield
        cursor.execute('INSERT INTO mytable VALUES(?, ?, ?)', row) 
```

这一切都很好。每次`.send()`我的数据都会插入一行。

但是如果我的数据库是事务性的呢？何时将数据提交到数据库时，如何向此生成器发出信号？何时中止交易？此外，它保持与数据库的开放连接，也许我有时希望它关闭该连接以回收资源。

这就是`.throw()`方法的用武之地；我可以在该方法中`.throw()`引发异常以指示某些情况：

```
def add_to_database(connection_string):
    db = mydatabaselibrary.connect(connection_string)
    cursor = db.cursor()
    try:
        while True:
            try:
                row = yield
                cursor.execute('INSERT INTO mytable VALUES(?, ?, ?)', row)
            except CommitException:
                cursor.execute('COMMIT')
            except AbortException:
                cursor.execute('ABORT')
    finally:
        cursor.execute('ABORT')
        db.close() 
```

生成器上的`.close()`方法基本上做同样的事情；它使用`GeneratorExit`异常结合`.throw()`来关闭正在运行的生成器。

*所有这些都是协程*如何工作的重要基础。协程本质上是生成器，加上一些额外的语法可以使编写协程更容易和更清晰。但在引擎盖下，它们仍然建立在相同的屈服和发送之上。当您并行运行多个协程时，如果其中一个协程失败，您需要一种方法来干净地退出这些协程，仅举一个例子。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-07-17T18:47:27.947

在我看来，`throw()`由于许多原因，该方法很有用。

1.  对称性：没有充分的理由只在调用者中处理异常情况而不在生成器函数中处理。（假设从数据库读取值的生成器返回一个错误值，并假设只有调用者知道该值是错误的。使用该`throw()`方法，调用者可以向生成器发出信号，告知存在必须纠正的异常情况。 ) 如果生成器可以引发异常，被调用者拦截，反过来也应该是可能的。

2.  灵活性：一个生成器函数可能有多个`yield`语句，调用者可能不知道生成器的内部状态。通过抛出异常，可以将生成器*重置*为已知状态，或者实现更复杂的流控制，单独使用`next()`,会更加麻烦。`send()``close()`

重置内部状态的示例：

```
def gen():
    try:
        yield 10
        print("State1")
        yield 20
        print("State2")
        yield 30
        print("State3")

   except:
        #Reset back to State1!
        yield gen()

g = gen()
print(next(g))
print(next(g))
g = g.throw(ValueError) #state of g has been reset
print(next(g))

>>10
>>State1
>>20
>>10 
```

询问用例可能会产生误导：对于每个用例，您都可以在不需要`throw()`方法的情况下生成一个反例，并且讨论将永远持续下去......

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2014-12-06T19:45:49.697

一个用例是在发生异常时在堆栈跟踪中包含有关生成器内部状态的信息——否则调用者将看不到这些信息。

例如，假设我们有一个如下所示的生成器，其中我们想要的内部状态是生成器的当前索引号：

```
def gen_items():
    for i, item in enumerate(["", "foo", "", "foo", "bad"]):
        if not item:
            continue
        try:
            yield item
        except Exception:
            raise Exception("error during index: %d" % i) 
```

以下代码不足以触发额外的异常处理：

```
# Stack trace includes only: "ValueError: bad value"
for item in gen_items():
    if item == "bad":
        raise ValueError("bad value") 
```

但是，以下代码确实提供了内部状态：

```
# Stack trace also includes: "Exception: error during index: 4"
gen = item_generator()
for item in gen:
    if item == "bad":
        gen.throw(ValueError, "bad value") 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2019-10-19T18:39:00.487

这个“答案”更像是一个琐事。

我们可以（ab）使用生成器`throw()`在 lambda 中引发异常，否则它不支持该`raise`语句。

```
foo = lambda: (_ for _ in ()).throw(Exception('foobar')) 
```

引自[https://stackoverflow.com/a/8294654/728675](https://stackoverflow.com/a/8294654/728675)

# android - 更改edittext边框颜色

> ID：11485595
> 
> 赞同：10
> 
> 时间：2012-07-14T16:50:52.963
> 
> 标签：android

我想知道如何将 android 中 EditText 视图的边框颜色更改为其他颜色...

这是我的编辑文本视图：

```
<EditText
    android:
    android:id="@+id/codeEditText"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_alignParentLeft="true"
    android:layout_below="@+id/btnEqual"
    android:layout_marginTop="20dp"
    android:ems="10"
    android:gravity="top|left"
    android:inputType="textMultiLine|textNoSuggestions"
    android:scrollbars="vertical"
    android:singleLine="false" > 
```

预先感谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-10-16T12:50:00.567

有一个很棒的小部件生成器可以为您完成所有工作，它对我来说非常有用。

你只需要选择你的颜色和你想要的小部件（例如EditText）然后你会在drawable目录中得到一个xml文件，你应该把这个xml设置为你的小部件的背景和你的完成！

[http://android-holo-colors.com/](http://android-holo-colors.com/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-14T17:04:39.237

您必须重写 onDraw 函数才能做到这一点。而且您将能够在一行中完成。这是幻灯片 66上[此演示文稿](https://speakerdeck.com/u/cyrilmottier/p/optimizing-android-ui-pro-tips-for-creating-smooth-and-responsive-apps)的一个很好的示例。

# php - 在两个 php 标签之间拆分 IF/ELSE 语句，给出 Parse 错误：语法错误，意外 $end

> ID：11485599
> 
> 赞同：2
> 
> 时间：2012-07-14T16:51:32.190
> 
> 标签：php, session, include, if-statement

我已经建立了一个 PHP 登录系统，它在加载每个页面之前启动会话并检查用户是否已登录。

在我的受保护页面上，我在顶部有一个包含启动会话和是否加载页面的 if 语句。然后在底部我有另一个包含，它是重定向回登录页面的 else 语句。这在页面直接时工作正常，但是当从其他地方包含时我得到这个错误：解析错误：语法错误，意外 $end

这是代码

包括1：

```
<?php

session_start();

if ($_SESSION['username'])
{
?> 
```

*这是在会话存在时加载的受保护内容*

包括2：

```
<?php
}
else
header ("location: index.php");

?> 
```

我认为这可能是由于将语句上的花括号分成两个 PHP 标记造成的，我这样做的原因是如果 if 语句为真则加载整个页面，而不是将其留在 PHP 中并回显每一行HTML 分开。

我该如何解决这个问题？还是有更好的方法来拆分 IF/ELSE 语句。

谢谢丹尼

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T17:32:38.943

当前无法在文件之间打开和关闭大括号。如果您尝试这样做，将导致“意外的 $end”语法错误。

我不确定您到底在拍摄什么，但根据您的评论，您应该执行以下操作。

您应该有 1 个文件，您可以随意命名，但我只是将其命名为“allProtectedContent.php”

您说将有多个文件需要保护（我假设您的意思是：如果会话存在，则需要执行多个 php 文件）。因此，在 allProtectedContent.php 中，您可以包含要执行/输出的所有文件文件。

然后在你的主文件中你应该简单地拥有这个：

```
<?php
if(isset($_SESSION['username']))
{
    include 'allProtectedContent.php';
}
else
{
    header('Location: index.php');
}
?> 
```

因此，如果设置了 $_SESSION 中的用户名键，那么您放入 allProtectedContent.php 的任何内容都只会被执行/输出。

allProtectedContent.php 示例：

```
<?php
// verify session
// echo some stuff
// include more files
// execute some functions
// run any php code you want
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-14T17:13:38.137

仔细检查您的 HTML 并查找`?>`您想要的`/>`.

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-07-14T16:58:55.187

您可以尝试使用冒号表示法，而不是使用花括号，如下所示。

```
<?php

session_start();

if ($_SESSION['username']):
?>

...

<?php else: header("location: index.php"); endif; 
```

# objective-c - 如何判断屏幕是否仍被触摸？

> ID：11485600
> 
> 赞同：0
> 
> 时间：2012-07-14T16:51:36.993
> 
> 标签：objective-c, ios, cocoa-touch, uiview

我有 UIView touched event handler that perfomsSelector withDelay....但是当用户不触摸屏幕时，touchEnded 事件当然应该触发。我这样做是因为我希望在用户在此 UIView 中放置并离开手指几秒钟后开始操作。

我希望当用户在选择器方法开始之前（延迟过去之前）将手指从屏幕上移开时，首先不运行选择器，然后不运行 touchEnded 方法。

我可以开始添加标志，但这对我来说看起来效率不高。

有没有另一种方法可以做到这一点。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T16:57:55.233

最好的解决方案可能是使用 UILongPressGestureRecognizer 而不是自己跟踪触摸。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-14T17:05:17.520

@rob answer 是一个更好的解决方案，但如果您出于任何原因无法使用它。试试这个：

在接触结束呼叫 cancelPreviousPerformRequestsWithTarget。这将取消您之前的通话。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-14T17:08:02.183

如果您不想使用手势识别器，则需要一个 BOOL（长按）和对 cancelPreviousPerformRequestsWithTarget:self 的调用。如果设置了“longpressed”，您将签入 touchesEnded。

# iphone - 从使用 AVAssetWriter 创建的视频生成缩略图

> ID：11485608
> 
> 赞同：5
> 
> 时间：2012-07-14T16:52:20.567
> 
> 标签：iphone, ios, video, avfoundation, avassetwriter

我正在使用`AVAssetWriter`和`captureOutput`回调录制视频+音频。问题是在大约 5% 的情况下，我无法从第二个零生成缩略图（如果我尝试在视频中走得更远，那么就没有问题）。我得到的错误是：

> 错误域=AVFoundationErrorDomain 代码=-11832“无法打开”UserInfo=0x4b31b0 {NSLocalizedFailureReason=此媒体无法使用。，NSUnderlyingError=0x4effb0“操作无法完成。（OSStatus 错误-12431。）”，NSLocalizedDescription=无法打开}

这是我正在使用的代码：

```
AVURLAsset *asset=[[AVURLAsset alloc] initWithURL:url options:nil];
AVAssetImageGenerator *generator = [[AVAssetImageGenerator alloc] initWithAsset:asset];
generator.appliesPreferredTrackTransform=TRUE;
[asset release];
CMTime thumbTime = CMTimeMakeWithSeconds(0,30);

AVAssetImageGeneratorCompletionHandler handler = ^(CMTime requestedTime, CGImageRef im, CMTime actualTime, AVAssetImageGeneratorResult result, NSError *error)
{
    if (result != AVAssetImageGeneratorSucceeded)
    {
        [self NSLogPrint:[NSString stringWithFormat:@"couldn't generate thumbnail, error:%@", error]];
    }

    UIImage *thumbImg=[[UIImage imageWithCGImage:im] retain];   

    [image setImage:thumbImg];
    [thumbImg release];

    [generator release];
};

CGSize maxSize = CGSizeMake(177, 100);
generator.maximumSize = maxSize;
[generator generateCGImagesAsynchronouslyForTimes:[NSArray arrayWithObject:[NSValue valueWithCMTime:thumbTime]] completionHandler:handler]; 
```

这是我设置视频**AVAssetWriterInput**的方式：

```
- (BOOL) setupAssetWriterVideoInput:(CMFormatDescriptionRef)currentFormatDescription 
{
    float bitsPerPixel;
    CMVideoDimensions dimensions = CMVideoFormatDescriptionGetDimensions(currentFormatDescription);
    int numPixels = dimensions.width * dimensions.height;
    int bitsPerSecond;

    // Assume that lower-than-SD resolutions are intended for streaming, and use a lower bitrate
    if ( numPixels < (640 * 480) )
        bitsPerPixel = 4.05; // This bitrate matches the quality produced by AVCaptureSessionPresetMedium or Low.
    else
        bitsPerPixel = 11.04; // This bitrate matches the quality produced by AVCaptureSessionPresetHigh.

    bitsPerSecond = numPixels * bitsPerPixel;

    NSDictionary *videoCompressionSettings = [NSDictionary dictionaryWithObjectsAndKeys:
                                              AVVideoCodecH264, AVVideoCodecKey,
                                              [NSNumber numberWithInteger:dimensions.width], AVVideoWidthKey,
                                              [NSNumber numberWithInteger:dimensions.height], AVVideoHeightKey,
                                              [NSDictionary dictionaryWithObjectsAndKeys:
                                               [NSNumber numberWithInteger:bitsPerSecond], AVVideoAverageBitRateKey,
                                               [NSNumber numberWithInteger:30], AVVideoMaxKeyFrameIntervalKey,
                                               nil], AVVideoCompressionPropertiesKey,
                                              nil];
    if ([_videoWriter canApplyOutputSettings:videoCompressionSettings forMediaType:AVMediaTypeVideo]) 
    {
        self._videoWriterInput = [[AVAssetWriterInput alloc] initWithMediaType:AVMediaTypeVideo outputSettings:videoCompressionSettings];
        self._videoWriterInput.expectsMediaDataInRealTime = YES;
        self._videoWriterInput.transform = [self returnOrientation];
        if ([_videoWriter canAddInput:self._videoWriterInput])
            [_videoWriter addInput:self._videoWriterInput];
        else
        {
            NSLog(@"Couldn't add asset writer video input.");
            return NO;
        }
    }
    else
    {
        NSLog(@"Couldn't apply video output settings.");
        return NO;
    }

    return YES;
} 
```

我知道该错误意味着当时没有图像，但是为什么会发生这种情况？

我还使用 AVCaptureMovieFileOutput 测试了录制，并且总是生成缩略图。此外，如果我将视频导出到相机胶卷，则照片中的预览也不可用。

PS：我也在某处读到这可能与关键帧间隔有关，但我不确定如何。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T21:32:13.677

我解决了我的问题。我在 iOS 4.2.1 上运行，并决定升级到 iOS 5.1.1，问题消失了。

# python - 导入ijson模块python时出错

> ID：11485610
> 
> 赞同：1
> 
> 时间：2012-07-14T16:52:47.403
> 
> 标签：python, json, yajl

我需要将一些大（2 Gb+）文件解析成 python。我已经尝试使用 json 模块，但我得到一个内存错误，因为它的方法都一次加载文件。然后我继续安装 ijson，它可能实现了一种基于迭代器的文件解析方式。但是，当我运行时：

导入 ijson

我得到异常：未找到 YAJL 共享对象。

有没有人发现类似的问题？任何帮助将不胜感激

问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T11:12:45.577

这很简单，那是因为你还没有安装 YAJL C 库！ijson 是 YAJL 的包装器，没有它是行不通的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-01-28T15:47:33.787

我通过 Anaconda 安装了它，然后它突然开始工作了。

1.  打开 Anaconda 提示（win search anaconda）
2.  运行命令： conda install ijson

# knockout.js - Chrome 在尝试刷新 Knockout View Model 时抛出未捕获错误：NOT_FOUND_ERR: DOM Exception 8 错误

> ID：11485611
> 
> 赞同：2
> 
> 时间：2012-07-14T16:52:50.387
> 
> 标签：knockout.js

我正在执行一个返回购物车的 jquery ajax 调用和

```
function LoadCart(callback) {
  $.ajax({
    .....removed....

    success: function(cart) {
       callback(cart);
    }
  })
} 
```

我有一个函数可以设置视图模型并让 Knockout 应用绑定..

```
function SetupViewModel(cart) {
  cartViewModel = new CartViewModel(cart);
  ko.applyBindings(cartViewModel);
} 
```

这在页面加载时工作得很好。

但是当他们从购物车中删除一个项目时..

```
var CartViewModel = function(data) {

  .....removed....
  self.deleteCartLine = function(cart) {
    $.ajax({
      ...removed
      success: function(response) {
         $.jGrowl(response.Message, jGrowlOptions)
         loadCart(SetupViewModel);
      }   
    }
  }
} 
```

我尝试加载购物车并再次设置 CartViewModel。这是我收到 **NOT_FOUND_ERR DOM Exception 8**错误的时候。

这是因为我试图从 viewModel 本身执行刷新（即 LoadCart 需要在存在 CartViewModel 之后调用？

**注意**我知道 Knockout 提供了动态更新，人们会想知道为什么您需要再次检索购物车。但是我不想在两个地方（视图模型和服务器端）都执行服务器端计算 - 所以再次抓住购物车并更新视图模型会更容易。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T16:19:21.517

对于 DOM 错误问题，我怀疑您在 HTML 中错误地设置了绑定，或者由于替换视图模型而遇到冲突。

不要替换您的视图模型。只需更新它。Knockout 真正设计用于更新您的数据，而不是替换它。

# javascript - location.reload 与缓存

> ID：11485612
> 
> 赞同：5
> 
> 时间：2012-07-14T16:52:50.867
> 
> 标签：javascript, caching, reload

*如果您对此问题有更好的标题，请随时进行编辑。*

在很长一段时间里，我总是习惯于`location.reload()`重新加载页面——这是最合乎逻辑的事情，对吧？

但我最近注意到它并不像我最初想象的那样等同于 F5，而是更多的 Ctrl+F5。所有图像和其他链接文件都是从服务器重新请求的，而我只想重新加载页面。

我发现我可以使用`location.replace(location.href)`，这似乎达到了我想要的效果：重新加载页面但从缓存中检索链接文件。

这是理想的吗？还有比这更好的方法吗？我是否忽略了这种方法可能存在的任何陷阱？

（注意：我已经对链接文件（例如脚本）进行了缓存清除管理，方法是将 附加`filemtime`为查询字符串）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-17T03:35:41.330

在回答我自己的问题时，有一个巨大的陷阱：当位置包含哈希时，浏览器将跳转到该哈希而不是重新加载页面。

我实现的解决方案如下：

```
reload = (function() {
    var m = location.search.match(/[?&]__hash=([^&]+)/);
    if( m) location.hash = unescape(m[1]);
    return function() {
            var h = location.hash;
            if( h == "") {
                    location.replace(location.href);
            }
            else {
                    var s = location.search;
                    s = s.replace(/[?&]__hash=[^&]+/,'');
                    s += (s == "" ? "?" : "&")+"__hash="+escape(h);
                    location.replace(location.pathname+s);
            }
    };
})(); 
```

假设服务器端没有使用`$_GET['__hash']`，这可以安全地使用。

# paypal - Paypal 小额支付设置

> ID：11485615
> 
> 赞同：2
> 
> 时间：2012-07-14T16:53:21.090
> 
> 标签：paypal, settings

有人在贝宝设置页面上遇到过这条漂亮的线路吗？

您尚未创建任何用于进行不需要运费的小额购买（少于 100 捷克克朗）的设置。

我真的找不到如何在贝宝上设置小额支付的解决方案。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T20:26:49.843

你有两个选择。

1) 您可以在此处在您的帐户中启用它：

[https://www.paypal.com/webapps/mpp/digital-goods](https://www.paypal.com/webapps/mpp/digital-goods)

**警告**一旦您启用它，它将以 5% + 0.05 美元的费率影响**所有**进入您帐户的付款

2）您可以使用数字商品结账：（根据价格自行调整费用，以每件商品为基础）

[https://cms.paypal.com/us/cgi-bin/?cmd=_render-content&content_ID=developer/e_howto_api_IntroducingExpressCheckoutDG](https://cms.paypal.com/us/cgi-bin/?cmd=_render-content&content_ID=developer/e_howto_api_IntroducingExpressCheckoutDG)

**2015 年更新** 营销页面一直在变化，因此很难让这些链接保持最新。基本上做一个谷歌搜索，`PayPal MicroPayments`前几个点击将有如何启用的说明。

这个过程不会经常改变：

```
Log in to your PayPal account.
Click Profile at the top of the page.
Click My settings.
Click Update in the My checkout settings.
Select the payment preference you wish to use.
Click Update settings.
Click Yes to update your settings. 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-04-06T16:18:06.397

自 2017 年 1 月 1 日起，您似乎**不再被允许启用小额支付**

如果您过去确实启用了小额支付，**它将保持活动状态**。

[https://developer.paypal.com/docs/classic/products/digital-goods/](https://developer.paypal.com/docs/classic/products/digital-goods/)

```
Note: Express Checkout Digital Goods is no longer available for new integrations. 
This feature remains available for merchant accounts that already have Express Checkout Digital Goods enabled. 
```

# javascript - 如何根据字符串检查ajax响应

> ID：11485618
> 
> 赞同：0
> 
> 时间：2012-07-14T16:53:52.493
> 
> 标签：javascript, ajax, responsetext

我有一个非常简单的 ajax 调用，但是在尝试根据字符串检查返回的文本时遇到问题：

```
// in my php file
echo 'mystring';

// in my javascript
if((request.readyState == 4) && (request.status == 200)){
  if(request.responseText == "mystring"){
    // stuff
  }else{
    //other stuff
  }
} 
```

当我尝试打印 request.responseText 时，它会打印预期的字符串“mystring”。但是当我尝试检查它时，它不会评估为真（“其他东西”被执行）。有任何想法吗？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-14T16:56:32.133

尝试`request.responseText.trim() === "mystring"`

# php - 从根检查文件是否存在

> ID：11485621
> 
> 赞同：6
> 
> 时间：2012-07-14T16:54:14.443
> 
> 标签：php, file-exists, document-root

我尝试了以下代码来检查根目录中文件的存在。

```
if($res['profile_picture']!="" && file_exists("images/".$res['users_id']."/thumnails/".$res['profile_picture'])){
    $photo_p="images/".$res['users_id']."/thumnails/".$res['profile_picture'];
} 
```

它仅适用于根目录而不是子目录。

我不确定函数 file_exist 是否同时检查绝对路径和相对路径，所以我尝试添加 ROOT 和`$_SERVER['DOCUMENT_ROOT']`. 但它仍然没有成功。

有什么帮助吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-14T17:01:16.217

为了代码可移植性，我建议您始终在函数中使用绝对路径`file_exists()`，否则当在不同目录中包含多个文件和/或在 CLI 模式下运行时，您可能会头晕目眩。

`ROOT`您的代码中可能未定义常量。此外，`$_SERVER['DOCUMENT_ROOT']`在某些情况下不能依赖，即当您使用`vhost_alias`apache 模块时。

一般来说，

```
file_exists("{$_SERVER['DOCUMENT_ROOT']}/images/{$res['users_id']}/thumnails/{$res['profile_picture']}") 
```

应该为你工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-14T17:02:19.713

函数 file_exists() 准确地检查你给它的路径。那里没有花哨的魔法。

给它一个绝对路径，它会检查那个路径。给它一个相对路径，它将从当前工作目录中检查。您可能想考虑一下您的工作目录实际上是什么。

# nginx - nginx忽略带有连字符的位置

> ID：11485628
> 
> 赞同：10
> 
> 时间：2012-07-14T16:55:21.973
> 
> 标签：nginx

我在使用 nginx“位置”指令和正则表达式时遇到问题。

我想让一个位置与以“/user-profile”开头的 url 匹配。

问题是 nginx 不匹配，但是如果我更改配置并尝试使用 userprofile（即没有连字符），它就像一个魅力。

我认为存在与正则表达式相关的问题，但无法解决。

我目前的配置是：

```
location ^~ /user-profile {
    proxy_pass http://remotesites;
} 
```

我也尝试过：

```
location ^~ /user\-profile {
    proxy_pass http://remotesites;
} 
```

我很感激你能给我的任何帮助。

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2018-08-15T23:19:22.777

尝试

```
location ^~ "/user-profile" {
proxy_pass http://remotesites;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-12-27T08:14:00.400

One thing to remember if your location is not working as expected in Nginx, as I just spent ages finding out:

```
location /fred-plus {
   root /var/me
} 
```

/fred will be APPENDED to become ... /var/me/fred-plus

but ...

```
location /fred-plus {
    alias /var/me
} 
```

/fred-plus will REPLACED to become ... /var/me

Just spent a fair while sorting this out after coming from Apache land.

I've included the hyphen as it was the red herring that was not the problem in my case.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-07-27T12:35:07.037

我想你正在寻找的是

```
location ~ ^/user-profile {
    proxy_pass http://remotesites;
} 
```

# php - 我无法将从 $_GET[] 接收的值分配给变量

> ID：11485630
> 
> 赞同：1
> 
> 时间：2012-07-14T16:55:23.210
> 
> 标签：php

我正在尝试使用 选择 id 并将其`$_GET[]`分配给一个变量，但是它不起作用。当我尝试`$_GET[]`直接回显它工作正常时，ID 显示在页面上，但是当我将它分配给一个变量并尝试回显它时，它不会工作。例如这不起作用：

```
$sel_hotel = $_GET[];
echo $sel_hotel; 
```

代码看起来很好，没有任何问题，但它只是不将该值传递给变量我相信我的 php.ini 文件可能有问题，但我不确定。我正在使用 PHP 版本 5.4.3。请帮忙 。非常感谢你

```
<?php 
if(isset($_GET['hotl'])){
 $sel_hotel = $_GET['hotl']; 
 $sel_hotel ="";
 echo   $sel_hotel;
}elseif(isset($_GET['room'])){
 $sel_room = $_GET['room'];
 $sel_room ="";
 echo $sel_room;
}else{
$sel_hotel ="";
$sel_room ="";
}
echo  $sel_hotel;

?>
<?php require_once("includes/header.php");?>
<?php require_once("includes/function.php");?>
<?php //require_once("TheDatabase.php")?>
<?php $connection = mysql_connect("localhost","root","root");
       if(!$connection){
       die("Database Connection Failed :". mysql_error());
       }else{                               
              $db_select = mysql_select_db("travelnstay", $connection);
              if(!$db_select){
              die("Database Selection Failed:". mysql_error());
              }
        }
?>
<div class="Calign">
<div class="mar">
<div>
<p>Menu</p>
<?php
               $hotel_set = select_all_hotels(); 
                 while($hotel = mysql_fetch_array($hotel_set)){
                     echo "<p class=\"mar\"><a href=\"admincontent.php?hotl=" . 

urlencode($hotel["hotel_id"]).

                     "\">{$hotel["hotel_name"]}</a></span></p>";
                     $room_set = room_by_id($hotel["hotel_id"]);
                     echo "<ul>";
                     while($room= mysql_fetch_array($room_set)){
                     echo "<li><a href=\"admincontent.php?room=". urlencode($room["room_id"]).
                     "\">{$room["room_type"]}</a></li>";                  
                     echo"</ul>";
                     }  
                }

     echo "<p> Its is suppose to be here".$sel_hotel."</p>"; 
     echo "<p>". $sel_room. "</p>";

  ?>

</div><!--end of the mar-->
</div><!--end of the Calign-->
</body>

</html> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-14T16:57:46.510

每次从 中设置变量时`$_GET`，您都会在...之后删除它们

尝试：

```
<?php 
  $sel_hotel = "";
  $sel_room  = "";

  if(isset($_GET['hotl']))
  {
    $sel_hotel = $_GET['hotl']; 
    echo $sel_hotel;
  }
  elseif(isset($_GET['room']))
  {
    $sel_room = $_GET['room'];
    echo $sel_room;
  }

  echo $sel_hotel;
?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-14T16:58:31.160

在两种情况下检索 $_GET 值后，您都重置了变量 - 它们是空的，因为您正在清空它们。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-14T17:02:49.240

问题是一旦设置了变量，就会将它们清除为空字符串。第二行是问题：

```
$sel_hotel = $_GET['hotl']; 
$sel_hotel =""; 
```

你试图用这个实现什么逻辑流程？如果您需要确保它们在运行时为空，我建议您删除这些行或将它们移动到脚本的顶部。

# ios - 用户拥有 iCloud 帐户来存储 iOS 应用程序的文件

> ID：11485631
> 
> 赞同：0
> 
> 时间：2012-07-14T16:55:28.603
> 
> 标签：ios, icloud

在我的一个应用程序中，我必须让用户加载他们自己的文件，我认为 iCloud 是建议的机制，但它可能会产生内存和 IP（知识产权）问题。为了解决这个问题，如果用户可以从他们自己的 iCloud 帐户下载他们在我的应用程序中的文件是不可能的。据我所知，到目前为止，iCloud 访问受到限制，方法是在构建时将其配置为帐户，同时执行授权。有人可以对这种情况提出一些想法吗？

# html - HREF 正在生成奇怪的链接

> ID：11485635
> 
> 赞同：1
> 
> 时间：2012-07-14T16:56:02.723
> 
> 标签：html, href

[我在http://olderwomensnetwork.org/advocacy](http://olderwomensnetwork.org/advocacy)页面上定义了一个名称标签：

```
<a name="note"></a> 
```

然后我像这样引用它（在同一页面上）：

```
<a href="http://olderwomensnetwork.org/advocacy#note">go to Note</a> 
```

它报告了一个未找到的错误 [http://olderwomensnetwork.org/http:/olderwomensnetwork.org/advocacy#note](http://olderwomensnetwork.org/http:/olderwomensnetwork.org/advocacy#note) 我做错了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-14T17:00:30.230

如果您注意到收到的错误消息，它是`http://olderwomensnetwork.org/http:/olderwomensnetwork.org/advocacy#note`

> ```
>  ^ 
> ```

您在链接中错过了一个`/`。这使浏览器认为它是一个相对 URL，因此是 404。

**良好实践：**当您使用`note`锚点在页面内进行导航时，请将 URL 指定为 `<a href="#note"..></a>`. 不必指定整个 URL。

[W3C 参考](http://www.w3.org/TR/html4/struct/links.html#h-12.1)

[文档中的链接](http://cti.itc.virginia.edu/~bcr/Labs/links.html)

# python - python：在动态字典中添加/附加动态键：值对

> ID：11485636
> 
> 赞同：2
> 
> 时间：2012-07-14T16:56:02.790
> 
> 标签：python, dynamic, dictionary, append, key

我想创建一个存储数学函数名称、输入（单个数字）和结果的字典。

结构应该类似于`cache = {procedure: {input:result}}`

```
i.e.

cache = {'factorial': {4:24, 10:3628800, 20:2432902008176640000},
         'square': {2:4, 5:25, 10:100}
         'sum': {3:6, 5:10, 7:14}}

def factorial(n):
    #print "Running factorial"
    result = 1
    for i in range(2, n + 1):
        result = result * i
    return result

def square(n):
    result = n ^ 2
    return result

def sum(n):
    result = n * 2
    return result 
```

我不希望预先创建缓存字典，因为它可能不知道它将为哪些数学函数存储值。然后我想创建一个名为 cached_execution 的函数，该函数将首先检查缓存是否已为输入调用该函数，如果是，则返回存储为 input:result 对的值的内容。

如果不是，则计算操作，将其存储在缓存中并返回值。如果该函数存在于缓存中，则应在其下创建另一个键/值对。如果没有，则为函数名称创建一个新条目，并将输入/结果的键/值存储在其下。

cached_execution 的结构很简单，但我不知道如何附加到字典。似乎 append 不是字典结构允许的方法。我尝试了各种事情但没有成功。

感谢帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-14T17:27:57.067

您可能还想看看[Memoize](http://wiki.python.org/moin/PythonDecoratorLibrary#Memoize)。有许多可能的实现，其中 3 个在 Python.org wiki 上。即使您编写自己的版本，了解其他人如何解决问题也会很有帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-14T17:09:54.487

```
import pprint

class MathFunctions(object)

    def __init__(self):
        self.cache = {}

    def print_cache(self):
        pprint.pprint(self.cache)

    def factorial(self, n):
        #print "Running factorial"
        result = 1
        for i in range(2, n + 1):
            result = result * i
        return result

    def square(self, n):
        result = n ^ 2
        return result

    def sum(self,n):
        result = n * 2
        return result

    def unknown(self,*args, **kwargs):
        return "UNKNOWN"

if __name__ == "__main__":

    m = MathFunctions()

    functions_to_run = [ 'sum', 'square', 'etc' ]
    input_values     = [ 1, 3.3, 9 ]

    for function in functions_to_run:
        for input in input_values:
            result = m.cache.get(function,{}).get(input,None)

            if None == result:
                if None == m.cache.get(function,None):
                    m.cache[function] = {}
                m.cache[function][input] = getattr(m,function,m.unknown)(input) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-14T17:32:37.780

这是一个基于类的方法：

```
def factorial(x):
    result = 1
    for i in range(2, x+1):
        result *= i
    return result

def square(x):
    return x**2

class CachedMath:
    def __init__(self):
        """create a cached result of function return values so that
        if the same function is called with the same argument more
        than once, the operation is not repeated

        """
        self.cache = {}

    def execute(self, func, number):
        if func not in self.cache:
            #if the function has never been used before
            #create a spot in the cache for it
            self.cache[func] = {}

        if number in self.cache[func]:
            #if this operation has been done before
            #return the cached result
            return self.cache[func][number]
        else:
            #otherwise perform the operation and store the result in cache
            result = func(number)
            self.cache[func][number] = result
            return result

ops = CachedMath()
print ops.execute(factorial, 10)
print ops.execute(factorial, 10)
print ops.execute(square, 9) 
```

只需使用 execute 方法，您就可以为新功能添加新的缓存。

如果您不想使用课程，那么这似乎也对我有用：

```
def factorial(x):
    result = 1
    for i in range(2, x+1):
        result *= i
    return result

cache = {}
cache[factorial] = {2: 2, 4: 24, 10:362880}
def do_math(func, number):
    if number in cache[func]:
        return cache[func][number]
    else:
        result = func(number)
        cache[func][number] = result
        return result

print do_math(factorial, 10)
print do_math(factorial, 5) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-14T17:21:16.043

看一下这个！！！

```
cache={}

def factorial(n):
    result=1
    for i in range(2, n+1):
        result+=1
    return result

def square(n):
    return n^2

def sum(n):
    return n*2

def cached_execution(function,n):
    if function in cache.keys():    
        if n in cache[function].keys():
            return cache[function][n]
        else:
            if function=='factorial':
                cache['factorial'][n]=factorial(n)
                return cache['factorial'][n] 
            elif function=='square':
                cache['square'][n]=square(n)
                return cache['square'][n]
            elif function=='sum':
                cache['sum'][n]=sum(n)
                return cache['sum'][n]
    else:
        cache[function]={}
        if function=='factorial':
            cache['factorial']={}
            cache['factorial'][n]=factorial(n)
            return cache['factorial'][n] 
        elif function=='square':
            cache['square']={}
            cache['square'][n]=square(n)
            return cache['square'][n]
        elif function=='sum':
            cache['sum']={}
            cache['sum'][n]=sum(n)
            return cache['sum'][n]
        else:
            cache[function]={}      
            cache[function][n]="Define_function"
            return cache[function][n]

cached_execution('sum',8)
cached_execution('square',7)
cached_execution('sum',5)
cached_execution('factorial',10)
cached_execution('log',10)
print cache 
```

它给出的输出为：`{'factorial': {10: 10}, 'sum': {8: 16, 5: 10}, 'square': {7: 5}, 'log': {10: 'Define_function'}`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-14T17:49:36.367

这是您想要做的简单装饰器版本。

```
def cached_execution(cache):
    def cached_exec_decorator(func):
        def check_cache(x):
            try:
                result = cache[func.__name__][x]
            except KeyError:
                result = func(x)
                if func.__name__ not in cache:
                    cache[func.__name__] = {x : result}
                else:
                    cache[func.__name__][x] = result
            return result
        return check_cache
    return cached_exec_decorator 
```

示例用法：

```
cache = dict()

# decorator for caching the function call
# you have to pass it a dict to cache in
@cached_execution(cache)
def square(x):
    print "Square is being evaluated!"
    return n ** 2

print square(5) # "Square is being evaluated!\n25" - square(5) isn't cached
print square(5) # "25" - square(5) is cached
print cache # {'square': {5: 25}} 
```

这个方法在语义上比你最初描述的方法和我写这篇文章时发布的其他一些答案要好一些——它隐藏了缓存机制，所以你可以只调用`square(x)`而不是记住调用`cached_execution(square, x)`。

您也可以将其作为可调用的类装饰器来存储自己的缓存，而不是需要提供对外部缓存字典的引用。我认为这是@Peter Rowell 链接的 memoize 代码片段所使用的方法——直到现在我才知道那个页面或名称。

# python - 为什么单元测试的断言方法比原始断言慢？

> ID：11485640
> 
> 赞同：1
> 
> 时间：2012-07-14T16:56:25.483
> 
> 标签：python, unit-testing

unittest 带有许多断言方法。我对使用内置 Python`assert`和比较运算符与内置的简单 unittest 断言进行了 timeit 测试。

```
#!/usr/bin/python
import timeit

s = """\
import unittest
class TestRepomanManExtFunctions(unittest.TestCase):
    def test1(self):
        someObj = object()
        newObj = someObj
        self.assertEqual(someObj, newObj)

    def test2(self):
        str1 = '11111111111111111111111111111111111111'
        str2 = '33333333333333333333333333333333333333'
        self.assertNotEqual(str1, str2)

if __name__ == '__main__':
    unittest.main()

"""
t = timeit.Timer(stmt=s)
print "%.2f usec/pass" % (1000000 * t.timeit(number=100000)/100000)

s2 = """\
import unittest
class TestRepomanManExtFunctions(unittest.TestCase):
    def test1(self):
        someObj = object()
        newObj = someObj
        assert someObj == newObj

    def test2(self):
        str1 = '11111111111111111111111111111111111111'
        str2 = '33333333333333333333333333333333333333'
        assert str1 != str2

if __name__ == '__main__':
    unittest.main()

"""

t = timeit.Timer(stmt=s2)
print "%.2f usec/pass" % (1000000 * t.timeit(number=100000)/100000) 
```

结果是

```
yeukhon@yeukhon-P5E-VM-DO:/tests$ python t.py
1203.46 usec/pass
873.06 usec/pass
yeukhon@yeukhon-P5E-VM-DO:tests$ vim t.py
yeukhon@yeukhon-P5E-VM-DO:tests$ python t.py
1300.33 usec/pass
956.35 usec/pass
yeukhon@yeukhon-P5E-VM-DO:tests$ python t.py
1208.82 usec/pass
865.18 usec/pass 
```

使用 unittest 的内置断言方法的一个优点是它告诉用户实际比较的是什么。我实际测试的一个例子：

```
======================================================================
FAIL: test_000_write_to_file_directory_not_exist (__main__.TestRepomanManExtFunctions)
Test writing content to a new file whose parent directory
----------------------------------------------------------------------
Traceback (most recent call last):
  File "/usr/local/lib/python2.7/dist-packages/mock.py", line 1224, in patched
    return func(*args, **keywargs)
  File "test_ext.py", line 71, in test_000_write_to_file_directory_not_exist
    self.assertNotEqual(mk_exists.call_args_list, exists_call_list)
AssertionError: [call('/tmp/test/fake/')] == [call('/tmp/test/fake/')] 
```

这里使用简单`assert X = Y`

```
======================================================================
FAIL: test_000_write_to_file_directory_not_exist (__main__.TestRepomanManExtFunctions)
Test writing content to a new file whose parent directory
----------------------------------------------------------------------
Traceback (most recent call last):
  File "/usr/local/lib/python2.7/dist-packages/mock.py", line 1224, in patched
    return func(*args, **keywargs)
  File "test_ext.py", line 72, in test_000_write_to_file_directory_not_exist
    assert exists_call_list != mk_exists.call_args_list
AssertionError 
```

除了这个优势，我们还可以利用内置的`self.assert_*(...)`.

为什么原始速度更快？我知道访问属性和检查类通常比较慢。但是我也想知道是怎么回事？我希望这是一个有效的问题。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T19:52:58.810

与内联执行的 assert 关键字相比，assert* 函数可能较慢，因为调用它（将参数推送到堆栈、调用、从堆栈中弹出返回地址等）存在开销。如您所提到的，assert* 函数还有一些其他不错的属性，例如打印预期值和实际值。

您是出于好奇还是这是一个实际问题？看到断言速度成为瓶颈的任何情况，我都会感到惊讶。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-14T20:27:53.387

在对您使用的单元测试库提供的断言进行单元测试时，会收集有关您的测试的更多信息。他们收集测试是成功还是失败、导致错误的原因、捕获抛出的任何异常以及测试的任何输出。然后将这个数据集合处理成您需要的任何输出，无论是标准输出还是 xml 文件。这一切都只需要时间并且需要大量的函数开销才能完成，其中单个断言或多或少是内联的，并显示错误以及文件和行号。

两人在幕后有着天壤之别。

# javascript - 在片场初始化函数的优雅方式

> ID：11485643
> 
> 赞同：1
> 
> 时间：2012-07-14T16:57:08.590
> 
> 标签：javascript, jquery, each

我有函数 foo 将 jquery 包装的节点作为参数。有没有更优雅的方式在节点集上运行这个函数？

我这样做的方式：

```
$('.for-foo').each(function () {
    foo($(this));
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-14T17:07:28.247

你可以把它做成一个插件：

```
$.fn.foo = function(){
  return this.each(function(){
    // do something to each element "this"
  });
}; 
```

用法：

```
$('.for-foo').foo(); 
```

这也将使它可以与其他 jQuery 函数链接。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-14T17:00:24.517

您可以将选择传递给函数，如下所示：

```
foo($(".for-foo")); 
```

您的`foo`函数将如下所示：

```
function foo(selection) {
    selection.each(function() {
        // do stuff with each current node
    });
} 
```

`foo`更混乱，但至少打电话更干净。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-14T17:05:50.833

你`foo()`的目的不明确，答案可能会有所不同。一个典型的例子可以是：

```
function foo($el) {
    $el.css('color', function(i) {
        return ['black', 'green', 'yellow', 'blue', 'red'][i];
    });
}
foo( $('.for-foo') ); 
```

**[工作样本](http://jsfiddle.net/QStkd/607/)**

# android - 无法在 Eclipse Indigo 上安装 Eclipse ADT 插件

> ID：11485650
> 
> 赞同：1
> 
> 时间：2012-07-14T16:58:27.187
> 
> 标签：android, eclipse

我正在尝试为 Android 开发安装 Eclipse 插件。

脚步 ：

“帮助”->“安装新软件”添加“http://dl.google.com/eclipse/plugin/3.7”，然后选中“Google Plugin for Eclipse”进行安装。安装移动到 40%，我每次都收到这个错误。

收集要安装的项目时发生错误会话上下文是：（profile=PlatformProfile，phase=org.eclipse.equinox.internal.p2.engine.phases.Collect，operand=，action=）。无法在[http://dl.google.com/eclipse/plugin/core/3.7/plugins/com.google.appengine.eclipse.core_3.0.1.v201206290132-rel-r37.jar](http://dl.google.com/eclipse/plugin/core/3.7/plugins/com.google.appengine.eclipse.core_3.0.1.v201206290132-rel-r37.jar)读取存储库。连接重置

需要帮助来安装适用于 Android 开发的 Eclipse 的 ADT 插件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T22:04:20.523

如果您使用的是 Windows，请在以管理员身份执行 Eclipse 后尝试安装 ADT

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-15T07:46:20.367

解决了这个问题。对于任何遇到此类错误的人。

解决步骤：

1：从网站 developer.android.com 下载 Eclipse ADT Plugin zip 文件

2：解压压缩包。

3：将 plugins 文件夹的内容复制到 /usr/lib/eclipse/plugins （在 Linux 和 /Applications/eclipse/plugins 在 Mac 上）

内容是：

```
com.android.ide.eclipse.adt_20.0.0.v201206242043-391819.jar
com.android.ide.eclipse.base_20.0.0.v201206242043-391819.jar
com.android.ide.eclipse.ddms_20.0.0.v201206242043-391819.jar
com.android.ide.eclipse.gldebugger_20.0.0.v201206242043-391819.jar
com.android.ide.eclipse.hierarchyviewer_20.0.0.v201206242043-391819.jar
com.android.ide.eclipse.ndk_20.0.0.v201206242043-391819.jar
com.android.ide.eclipse.traceview_20.0.0.v201206242043-391819.jar
overlay.com.android.ide.eclipse.adt.overlay_20.0.0.v201206242043-391819.jar 
```

4：现在重新启动 Eclipse，转到“安装新软件”添加链接“http://dl-ssl.google.com/eclipse/plugins”然后按照 android 开发人员网站上的说明进行安装。

# flash - Flash Professional 可以自动化吗？

> ID：11485659
> 
> 赞同：0
> 
> 时间：2012-07-14T16:59:41.463
> 
> 标签：flash, scripting, automation

我想做的是编写一些 Flash**创作**任务的脚本。程序绘图工具（例如“Deco”工具）表明这是可能的，因为它们以编程方式生成然后可以编辑的内容。例如，假设我想快速创建 90 个以某种方式排列的 TextField，并用一个特定的字母填充它们。这在 ActionScript 中很容易做到——但仅用于生成在运行时显示的对象。也就是说，它们是由 Flash 播放器创建和显示的。我想在创作时创建这些对象，就像 MS Office 文档中的 VBA 代码可以自动创建文档本身一样，或者许多应用程序（如 GIMP）可以使用 Python 脚本自动化。

另一种方法是从代码生成和保存 swc、swf 或 fla 文件。例如，我可以使用 ActionScript 在运行时生成一些 TextField，然后将它们保存到一个文件中，然后我可以在 Flash Professional 中加载该文件并提取和分解创建的对象。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T17:23:46.220

您可以通过[JSFL 实现自动化。](http://help.adobe.com/en_US/flash/cs/extend/WS5b3ccc516d4fbf351e63e3d118a9024f3f-7fe8.html)

# php - php to echo firstname if authenticated

> ID：11485661
> 
> 赞同：1
> 
> 时间：2012-07-14T16:59:44.490
> 
> 标签：php, mysql

I have written a PHP script that I use for authentication with e-mail and password since e-mail is identified as unique.

I want to echo "true" as well as echo :: fname (First Name). how can I write it? Following is my PHP code.

```
include "db_config.php";

$email = $_POST['email'];
$password = $_POST['password'];

$sql = "select fname,e_mail,password from user where e_mail = '$email' and pwd = '$password'  ";

$result = mysql_query($sql);

if (mysql_num_rows($result) > 0){
    echo "true";
}
else{
    echo "Login Failed";
} 
```

If you can suggest me some better way to write this code, please let me know.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-14T17:06:06.507

Consider the comments about mysql_* and mysql_real_escape_string, but after you get your result, you echo it like this, [adapted from the manual](http://php.net/manual/en/function.mysql-query.php):

```
$result = mysql_query($sql);
if (!$result) {
    echo "Could not successfully run query ($sql) from DB: " . mysql_error();
    exit;
}

if (mysql_num_rows($result) == 0) {
    echo "No rows found, nothing to print so am exiting";
    exit;
}

$row = mysql_fetch_assoc($result); 
echo "true" . $row['fname']; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-14T17:12:11.900

```
if (mysql_num_rows($result) > 0)
{
    echo mysql_result($result, 0);
} 
```

-- or --

The code from [Sankalp's](https://stackoverflow.com/a/11485762/1494505) or [GDP's](https://stackoverflow.com/a/11485710/1494505) answers. (mysql_fetch_array)
[`mysql_result`](http://php.net/manual/en/function.mysql-result.php) is not good if you want to display many results, it's good for just a few of them.

* * *

BTW, I'd like to point you to some omissions in your code:

*   you should check if every `$_POST` or `$_GET` variables are set by using [`isset`](http://php.net/manual/en/function.isset.php) or [`empty`](http://php.net/manual/en/function.empty.php).

*   your code is so insecure! You should escape every variable before using it in a query. Use [`mysql_real_escape_string()`](http://php.net/manual/en/function.mysql-real-escape-string.php) for that. I also suggest you to use [`strip_tags()`](http://www.php.net/manual/en/function.strip-tags.php) along with escaping.

**Example of checking if variables are set**:

*Using [`isset()`](http://php.net/manual/en/function.isset.php)*:

```
if(isset($_POST['email'])) $email = $_POST['email'];
if(isset($_POST['password'])) $password = $_POST['password']; 
```

*Using [`empty()`](http://php.net/manual/en/function.empty.php)*:

```
if(!empty($_POST['email'])) $email = $_POST['email'];
if(!empty($_POST['password'])) $password = $_POST['password']; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-14T17:12:54.503

```
$row = mysql_fetch_array($result, MYSQL_NUM)
echo $row[0];   //fname
echo $row[1];   //email 
```

or you can use MYSQL_ASSOC to get a named array and access values as

```
echo $row['fname']; 
```

# prolog - Prolog中不相等且不统一

> ID：11485662
> 
> 赞同：11
> 
> 时间：2012-07-14T16:59:55.110
> 
> 标签：prolog

Prolog 中的 A \= B 和 not(A==B) 有什么区别？

我找到了这个[http://www.learnprolognow.org/lpnpage.php?pagetype=html&pageid=lpn-htmlse5](http://www.learnprolognow.org/lpnpage.php?pagetype=html&pageid=lpn-htmlse5) 和这个 wiki 页面 [http://en.wikibooks.org/wiki/Prolog/Built-in_predicates](http://en.wikibooks.org/wiki/Prolog/Built-in_predicates) 但它没有帮助我，因为没有澄清差异，也没有 \= 的简短含义。

谢谢。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-07-14T17:18:21.563

`A \= B`相当于`not (A = B)`

所以让我们先比较一下`=/2`；`==/2`来自 swi-prolog 手册：

> ?Term1 = ?Term2
> 将 Term1 与 Term2 统一起来。如果统一成功则为真
> 
> @Term1 == @Term2
> 如果 Term1 等价于 Term2，则为真。

请注意，`=/2`尝试统一条款，如果成功，则`==/2`在执行检查时为真：

```
?- X = 1.
X = 1.
(implicit true.) 
```

尽管

```
?- X == 1.
false. 
```

并且：

```
?- X = Y.
X = Y.

?- X == Y.
false. 
```

现在，`not/1`将反转结果并在`=/2`或`==/2`为假时为真。
因为`==/2`没有什么复杂的；如果这些条款现在是等价的，它将返回 false，否则返回 true。
因为`=/2`你应该记住，所有的统一都是暂时的：

```
?- \+ (\+ X = 1), print(X).
_G399
true. 
```

（`_G399`表示`X`未实例化）

# android - 如何在android中杀死第3方进程

> ID：11485672
> 
> 赞同：0
> 
> 时间：2012-07-14T17:00:54.427
> 
> 标签：android, google-maps, android-intent, android-mapview, android-maps

我的应用程序将启动第 3 方地图活动并设置地点。一旦用户从地图活动中按下，它将返回到以前的活动。

一旦我退出应用程序，地图活动和其他进程将继续运行。我想关闭它们。我应该怎么做？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T17:31:22.990

尝试使用 FLAG_ACTIVITY_NO_HISTORY 启动外部活动

进程与 Activity 不同，如果一个进程（甚至是您自己的）在不使用时仍然存在，您不必担心，因为 Android 会在适当的时候将其处理掉。

您永远不应该尝试杀死外部进程（无论如何您都不能），并且您想要杀死或结束自己的进程的情况很少见（主要用于测试以确保您可以恢复）。

# javascript - 使用 jquery 的多个 textarea 值

> ID：11485674
> 
> 赞同：0
> 
> 时间：2012-07-14T17:01:00.930
> 
> 标签：javascript, jquery, html

我正在尝试使用 jQuery 从 html 中获取数组的值，然后将其传递给 PHP 脚本。我尝试了许多在此站点上找到的变体，但没有一个成功。

这就是我到目前为止所拥有的。（我使用 jQuery 根据所需数量生成文本区域，最多 10 个）。

```
<form>
<input type='text' value='Title', name='title' id='title' /><br>
<h2 class="achievements" id="subheading">Required Amount</h2><br><br><br>
<select id="selection">
<option value='0'>0</option>
<option value='1'>1</option>
<option value='2'>2</option>
<option value='3'>3</option>
<option value='4'>4</option>
<option value='5'>5</option>
<option value='6'>6</option>
<option value='7'>7</option>
<option value='8'>8</option>
<option value='9'>9</option>
<option value='10'>10</option>
</select>
<div class="achievements" id="board"></div>
</form>
</div>
<script type="text/javascript">
jQuery(document).ready(function($) {
$('#selection').change(function() {
    var required = parseInt($(this).val());
    var i = 0;
    var str1 = "<h2 id=\"subheading\">Requirements</h2><br><br><br>";

    for( i = 0; i < required; i++) {
                str1 += "<br><br><label></label><textarea name='requirement["+ i +"]' class=\"requirements\" rows='2' cols='40'></textarea>";
            }
    str1 += "<br><input type='button' class='button' onclick=\"button('achievements/create_achievement');\" value='Add Achievement'/>";
    $('#board').html(str1); 
});
return false;
});
</script> 
```

抓取数据的 jQuery 脚本是：

```
function button(uri) {
var url = "http://www.blahblah.com/" + uri;
    var requirements = [];
    /**
      * solution below found on SO does not work as thought
      */
    /////////////////////////////////////////////////////////////////////////
    requirements = $('textarea[name^="requirement\\[\\]"]').map(function() {
    return $(this).val();
    }).get();
    //////////////////////////////////////////////////////////////////////// 
    $.ajax({
    url: url,
    data: {id:requirements},
    type: "POST",
    success: function(data) {
        $('#main-board').html(data);
    }
    });
return false;
} 
```

我的问题是，当使用 alert(requirements) 检查数据数组时，什么也没找到。我认为这是因为没有使用我使用的 jQuery 语句正确解析来自 html 的数据。任何帮助都会很棒。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-14T17:12:08.403

您的 textareas 选择器错误，因为 textarea 的名称在括号中有小数点；另请参阅[jquery 选择器页面`^=`](http://api.jquery.com/attribute-starts-with-selector/)：

> 描述：选择具有指定属性的元素，其值**恰好**以给定字符串开头。

代替

```
$('textarea[name^="requirement\\[\\]"]') 
```

和

```
$('textarea[name^="requirement\\["]') 
```

你不必再改变了。

另请参阅[此示例](http://jsfiddle.net/ZxLqv/1/)。

# java - JSONArray 空内容 Java & Android

> ID：11485677
> 
> 赞同：1
> 
> 时间：2012-07-14T17:02:12.100
> 
> 标签：java, android, arrays, json, object

有可能在 ArrayList 中不可能放置大内容，然后如果你这样做，它会给你 null？

我正在插入一个带有 32 个 JSONObject 的 JSONArray，每个 JSONObject 都有姓名和电话联系方式。

```
ArrayList<NameValuePair> nvp = new ArrayList<NameValuePair>();
nvp.add(new BasicNameValuePair("something", content));

public void phoneandname(Context c) {

    if (cc.isOnline(c) == true) {
        db = new Database(c);

        Cursor phones = c.getContentResolver().query(
                ContactsContract.CommonDataKinds.Phone.CONTENT_URI, null,
                null, null, null);

        JSONArray jarray = new JSONArray();
        db.open();

        while (phones.moveToNext()) {
            String name = phones
                    .getString(phones
                            .getColumnIndex(ContactsContract.CommonDataKinds.Phone.DISPLAY_NAME));
            String phoneNumber = phones
                    .getString(phones
                            .getColumnIndex(ContactsContract.CommonDataKinds.Phone.NUMBER));

            db.contact_table(name, phoneNumber);

            JSONObject json = new JSONObject();

            try {

                json.put("name", name);
                json.put("phone", phoneNumber);
                jarray.put(json);

            } catch (JSONException e) {
                e.printStackTrace();
            }

        }

        upload(jarray, context);

        db.close();

        Log.i("********", jarray.toString()); IT SHOWS MY ARRAY AND THEN BEFORE UPLOAD IT TO THE SERVER BY POST IT'S NULL...
        phones.close();
    }

}

public void upload(Object jobject, Context c) {

    ArrayList<NameValuePair> nvp = new ArrayList<NameValuePair>();
    DBupload upload = new DBupload();
    DatosRegistro dr = new DatosRegistro(c);

    nvp.add(new BasicNameValuePair("content", jobject.toString()));
    nvp.add(new BasicNameValuePair("token", dr.hash_final(
            dr.token_secret(dr.mail(), "mail"), jobject.toString())));
    nvp.add(new BasicNameValuePair("id", String.valueOf(dr
            .return_id_phone())));

    JSONObject json2 = upload.UploaData(nvp,
            "http://anonyme.mariomontes.es/contacts/insert");

    try {
        if (json2.getInt("error") == 1) {

        } else {
            db.contact_table(name, phoneNumber);
        }
    } catch (JSONException e) {
        e.printStackTrace();
    }
} 
```

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-14T17:16:57.237

```
ArrayList<NameValuePair> nvp = new ArraList<BasicNameValuePair>(); 
BasicNameValuePair tmp = new BasicNameValuePair("something", content);
nvp.add(tmp); 
```

你有一个`ArrayList`。`NameValuePair`所以你需要在`NameValuePair`里面放一个对象`ArrayList`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-14T17:18:18.133

据我所知，唯一的限制是内存。

我有一些巨大的 JSONArray 实例，里面有更大的对象。

我不确定您的代码示例与什么相关。

我通常会做这样的事情：

```
JSONArray ja = new JSONArray();

//multiples of these
JSONObject jo = new JSONObject();
jo.put("name","Marc");
jo.put("phone","1234567890");

ja.put(jo); 
```

**更新**

好的，我明白你现在的意思了......完全不同的问题。

所以问题更像是你这样称呼：

`nvp.add(new BasicNameValuePair("content", jobject.toString()));`

但是您将 JSONArray 作为对象传递...您需要将其转换回 JSONArray

`nvp.add(new BasicNameValuePair("content",((JSONArray)jobject).toString()));`

更好的是将字符串传递给您的上传函数而不是作为对象

# ruby-on-rails - Rails HABTM 协会

> ID：11485681
> 
> 赞同：0
> 
> 时间：2012-07-14T17:02:24.923
> 
> 标签：ruby-on-rails, associations, has-and-belongs-to-many, self-reference, squeel

我有自我参考`habtm`关联。

```
class Label < AR::B
   has_and_belongs_to_many :a_label, :class_name => "Label",
            :join_table => "a_labels",
            :foreign_key => "label_id",
            :association_foreign_key => "a_label_id",
            :uniq => true
end 
```

但是当我创建查询（使用`squeel`）时：

```
Label.select{:title}.where do
        id.in(Label.select{:a_label_id}.joins(:a_labels).where{
            labels.title.in(list)
          }) 
```

架构：

```
 labels:
 id | title | description | created_at

 a_labels
 label_id | a_label_id 
```

我收到错误：

```
ActiveRecord::ConfigurationError:
   Association named 'a_labels' was not found; perhaps you misspelled it? 
```

我哪里弄错了？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T17:49:03.580

看起来您只需要在您的关联名称中添加一个“s”。而不是“a_label”，改为“a_labels”。

```
class Label < AR::B
  has_and_belongs_to_many :a_labels, ...
    ...
end 
```

# java - Spring Web服务动态wsdl不为模式元素生成消息

> ID：11485685
> 
> 赞同：3
> 
> 时间：2012-07-14T17:03:29.813
> 
> 标签：java, spring, soap, spring-mvc, wsdl

我有以下架构：

```
<?xml version="1.0" encoding="UTF-8"?>
<xs:schema xmlns:xs="http://www.w3.org/2001/XMLSchema" 
xmlns:m="http://ws.mypackage.com" 
xmlns:xmime="http://www.w3.org/2005/05/xmlmime" elementFormDefault="qualified"
targetNamespace="http://ws.mypackage.com" 
attributeFormDefault="unqualified"> 

    <xs:element name="downloadMessageRequestSaaj">
        <xs:complexType/>
    </xs:element>

    <xs:element name="downloadMessageRequest">
        <xs:complexType/>
    </xs:element>   

    <xs:element name="downloadMessageResponseSaaj" type="m:downloadResponseSaajType" />

    <xs:complexType name="downloadResponseSaajType">
            <xs:sequence>
                <xs:element name="requestName" type="xs:string"/>
                <xs:element name="payLoad">
                    <xs:complexType>
                        <xs:sequence>
                            <xs:element name="messagePayLoad" type="xs:base64Binary" xmime:expectedContentTypes="multipart/related"/>
                        </xs:sequence>
                    </xs:complexType>
                </xs:element>
            </xs:sequence>
     </xs:complexType>

    <xs:element name="downloadMessageResponse" type="m:downloadResponseType" />

    <xs:complexType name="downloadResponseType">
            <xs:sequence>
                <xs:element name="requestName" type="xs:string"/>
                <xs:element name="payLoad">
                    <xs:complexType>
                        <xs:sequence>
                            <xs:element name="messagePayLoad" type="xs:base64Binary" xmime:expectedContentTypes="multipart/related"/>
                        </xs:sequence>
                    </xs:complexType>
                </xs:element>
            </xs:sequence>
     </xs:complexType>

     <xs:element name="localDTMRequest">
        <xs:complexType/>
    </xs:element>

    <xs:element name="localDTMResponse">
        <xs:complexType>        
            <xs:sequence>
                <xs:element name="localDTM" type="xs:dateTime"/>
            </xs:sequence>          
        </xs:complexType>
    </xs:element>    

</xs:schema> 
```

并配置 Spring 自动生成 WSDL 文件，如下所示：

```
<ws:dynamic-wsdl id="serviceDefinition" portTypeName="myService"
        locationUri="http://localhost:8080/springWsTest/webservice">
        <ws:xsd location="/WEB-INF/schemas/schema.xsd" />
    </ws:dynamic-wsdl> 
```

生成的 WSDL 文件缺少用于 downloadMessageRequestSaaj 和 downloadMessageResponseSaaj 的“消息”。这是为什么？

这是生成的wsdl文件..

```
<?xml version="1.0" encoding="UTF-8"?><wsdl:definitions xmlns:wsdl="http://schemas.xmlsoap.org/wsdl/" xmlns:sch="http://ws.mypackage.com" xmlns:soap="http://schemas.xmlsoap.org/wsdl/soap/" xmlns:tns="http://ws.mypackage.com" targetNamespace="http://ws.mypackage.com">
  <wsdl:types>
    <xs:schema xmlns:m="http://ws.mypackage.com" xmlns:xmime="http://www.w3.org/2005/05/xmlmime" xmlns:xs="http://www.w3.org/2001/XMLSchema" attributeFormDefault="unqualified" elementFormDefault="qualified" targetNamespace="http://ws.mypackage.com">   

    <xs:element name="downloadMessageRequestSaaj">
        <xs:complexType/>
    </xs:element>

    <xs:element name="downloadMessageRequest">
        <xs:complexType/>
    </xs:element>   

    <xs:element name="downloadMessageResponseSaaj" type="m:downloadResponseSaajType"/>

    <xs:complexType name="downloadResponseSaajType">
            <xs:sequence>
                <xs:element name="requestName" type="xs:string"/>
                <xs:element name="payLoad">
                    <xs:complexType>
                        <xs:sequence>
                            <xs:element name="messagePayLoad" type="xs:base64Binary" xmime:expectedContentTypes="multipart/related"/>
                        </xs:sequence>
                    </xs:complexType>
                </xs:element>
            </xs:sequence>
     </xs:complexType>

    <xs:element name="downloadMessageResponse" type="m:downloadResponseType"/>

    <xs:complexType name="downloadResponseType">
            <xs:sequence>
                <xs:element name="requestName" type="xs:string"/>
                <xs:element name="payLoad">
                    <xs:complexType>
                        <xs:sequence>
                            <xs:element name="messagePayLoad" type="xs:base64Binary" xmime:expectedContentTypes="multipart/related"/>
                        </xs:sequence>
                    </xs:complexType>
                </xs:element>
            </xs:sequence>
     </xs:complexType>

     <xs:element name="localDTMRequest">
        <xs:complexType/>
    </xs:element>

    <xs:element name="localDTMResponse">
        <xs:complexType>        
            <xs:sequence>
                <xs:element name="localDTM" type="xs:dateTime"/>
            </xs:sequence>          
        </xs:complexType>
    </xs:element>    

</xs:schema>
  </wsdl:types>
  <wsdl:message name="localDTMRequest">
    <wsdl:part element="tns:localDTMRequest" name="localDTMRequest">
    </wsdl:part>
  </wsdl:message>
  <wsdl:message name="localDTMResponse">
    <wsdl:part element="tns:localDTMResponse" name="localDTMResponse">
    </wsdl:part>
  </wsdl:message>
  <wsdl:message name="downloadMessageRequest">
    <wsdl:part element="tns:downloadMessageRequest" name="downloadMessageRequest">
    </wsdl:part>
  </wsdl:message>
  <wsdl:message name="downloadMessageResponse">
    <wsdl:part element="tns:downloadMessageResponse" name="downloadMessageResponse">
    </wsdl:part>
  </wsdl:message>
  <wsdl:portType name="myService">
    <wsdl:operation name="localDTM">
      <wsdl:input message="tns:localDTMRequest" name="localDTMRequest">
    </wsdl:input>
      <wsdl:output message="tns:localDTMResponse" name="localDTMResponse">
    </wsdl:output>
    </wsdl:operation>
    <wsdl:operation name="downloadMessage">
      <wsdl:input message="tns:downloadMessageRequest" name="downloadMessageRequest">
    </wsdl:input>
      <wsdl:output message="tns:downloadMessageResponse" name="downloadMessageResponse">
    </wsdl:output>
    </wsdl:operation>
  </wsdl:portType>
  <wsdl:binding name="myServiceSoap11" type="tns:myService">
    <soap:binding style="document" transport="http://schemas.xmlsoap.org/soap/http"/>
    <wsdl:operation name="localDTM">
      <soap:operation soapAction=""/>
      <wsdl:input name="localDTMRequest">
        <soap:body use="literal"/>
      </wsdl:input>
      <wsdl:output name="localDTMResponse">
        <soap:body use="literal"/>
      </wsdl:output>
    </wsdl:operation>
    <wsdl:operation name="downloadMessage">
      <soap:operation soapAction=""/>
      <wsdl:input name="downloadMessageRequest">
        <soap:body use="literal"/>
      </wsdl:input>
      <wsdl:output name="downloadMessageResponse">
        <soap:body use="literal"/>
      </wsdl:output>
    </wsdl:operation>
  </wsdl:binding>
  <wsdl:service name="myServiceService">
    <wsdl:port binding="tns:myServiceSoap11" name="myServiceSoap11">
      <soap:address location="http://localhost:8080/springWsTest/webservice"/>
    </wsdl:port>
  </wsdl:service>
</wsdl:definitions> 
```

我已经浏览了模式文件一百万次，但看不到生成的消息和未生成的消息之间有任何区别。你能明白为什么他们不是吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-07-14T17:13:48.400

是因为名字。Spring 使用消息被调用`SomethingRequest`和响应的约定`SomethingResponse`。

# php - 我看不到 php 包含页面

> ID：11485689
> 
> 赞同：0
> 
> 时间：2012-07-14T17:03:59.397
> 
> 标签：php, wampserver

我在 index.html 中有一个包含的 php 页面。

```
<?php include "inc/header.php";?> 
```

Dreamveawer cs5 配置为通过 wamp 服务器查看。
在 f12 上，我看不到这个包含的文件（仅查看 index.html，没有包含）
如果我打开 header.php 本身 - f12 - 效果很好。
请问可能是什么原因。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-14T17:05:41.907

`index.html`是一个 HTML 文件，所以 PHP 不会被解析。`index.php`改为命名文件。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-14T17:07:00.587

很可能找不到该文件。我怀疑如果您更改`include`为`require`，您将看到相关的错误消息。您需要更改您尝试包含的路径，或更改您的 include_path 变量：

```
set_include_path("/path/to/your/lib/" . DIRECTORY_SEPERATOR . get_include_path()); 
```

**编辑**正如评论者在其他地方指出的那样，这仅适用于通过 PHP 解释您的主文件*的情况。*

# c# - 如何根据选择的单选按钮选择不同的数据库行

> ID：11485692
> 
> 赞同：0
> 
> 时间：2012-07-14T17:04:03.800
> 
> 标签：c#, asp.net, visual-studio

我目前正在做一个银行项目，我可以选择我想查看的交易历史月份（例如：当前月份，当前月份 n 过去 1 个月）现在，我只能设法检索我使用网格视图的所有交易历史记录。我可以知道如何根据选择的单选按钮查看不同时期的交易吗？我目前正在使用 asp.net n C#

```
 myConnection.ConnectionString = strConnectionString;
    SqlCommand cmd = new SqlCommand("SELECT thDate, thType, thAmountIn, thAmountOut from [Transaction]", myConnection);

    myConnection.Open();

    SqlDataReader reader1 = cmd.ExecuteReader();

    GridView1.DataSource = reader1;
    GridView1.DataBind(); 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-07-15T12:33:45.743

对于您的 SQL 命令，您可以尝试：

```
SqlCommand cmd = new SqlCommand("SELECT thDate, thType, thAmountIn, thAmountOut from [Transaction] where thDate=" + RadioButtonList1.Text + ", myConnection); 
```

Where`RadioButtonList1`替换为您的 RadioButtonList 的名称。这应该将所选单选按钮的值放入 SQL 语句中。

# oracle - 使用 Java 导入带有插入语句和 clob 数据类型的 Oracle 表转储

> ID：11485695
> 
> 赞同：1
> 
> 时间：2012-07-14T17:04:35.380
> 
> 标签：oracle, jdbc, prepared-statement, dump, clob

我有一个包含插入语句的 Oracle 表转储。一些表包含 clob 数据字段。如果我尝试使用 SQL Developer 恢复转储，则会收到错误“ORA-01704: string literal too long”

现在我尝试使用 Java 使用 JDBC 恢复转储。问题是我已经有了完整的 PreparedStatement，所以我无法将列的数据类型从字符串更改为 clob。

下面列出了该应用程序：

```
// strBufLine contains already the fully composed insert statement from the dump file
PreparedStatement pstmt = connection.prepareStatement("BEGIN " + strBufLine.toString() + " END;");
pstmt.executeUpdate();
pstmt.close(); 
```

知道如何解决这个问题（使用另一个程序来恢复转储，其他转储技术或如何将数据类型更改为 clob）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-14T17:39:41.327

如果字符串文字对于 SQL Developer 来说太长，那么对于 JDBC 来说也会太长，因为它是在服务器端解析的。

我建议您将文件转换为 CSV 或固定长度文件。这应该不会太难，因为它是单个表的转储。所以每一行都会有类似的结构。甚至可以在带有搜索/替换的文本编辑器中执行此操作。

然后，您可以使用 SQL Developer 导入它（在所需表的上下文菜单中*导入数据... ）。*

# jquery - 多选器不会在 jQuery 中同时执行动画

> ID：11485697
> 
> 赞同：-1
> 
> 时间：2012-07-14T17:04:48.503
> 
> 标签：jquery, delay, simultaneous

当我跑步时

```
$("[id^=menuItem]").fadeOut(1000); 
```

淡出是同时对所有组件进行的。但是，无聊的是我执行了一个 for 循环对元素做其他事情，完成后我希望同时淡出所有元素

```
var i;
for(i = 1; i <= 6; i++)
    $("div#item" + i).delay(i * 1000).fadeIn(1500);
$("[id^=item]").fadeOut(400); 
```

出于某种原因，淡出从第二个元素之前的第一个元素开始，在第三个元素之前开始，等等。它确实创造了一个非常酷的效果，但这不是我需要在我的项目中实现的。

为什么会发生？？

我怀疑答案将是，一旦每个组件完成初始淡入，最终淡出就会开始。在这种情况下，我的问题将被重新表述为如何将多选淡出的执行延迟到某个特定的东西已完成（即最后一项已淡入）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T23:38:04.733

这可能与不同组件在不同时间为下一步做好准备这一事实有关。也许我应该在淡入后使用回调函数。当然，这将执行一大堆回调，因此需要使用 $.when/.then 语法。

# .net - 方法放在哪里？

> ID：11485704
> 
> 赞同：3
> 
> 时间：2012-07-14T17:05:46.427
> 
> 标签：.net, methods

我有带有加载、保存、更新数据的方法的数据对象。然后我有对象可以对这些数据进行更复杂的操作，为此，它们需要来自数据对象的详细数据。

所以我开始向数据对象添加方法来回答操作对象需要知道的特定问题。操作对象仅具有与操作或某些功能严格相关的方法，而数据对象的信息由它详细说明。操纵对象询问并且被操纵对象响应。我一开始就是这么想象的。然后我意识到它们也可以是操作对象的方法或扩展方法。

我觉得数据对象开始有太多与特定功能相关的方法，而且还会有更多。由于这些特征主要由操作对象管理，它们可以在它们之间移动和分布。问题是这些方法中的一些被不同的操纵对象使用，并且操纵对象有足够多的与操纵特别相关的方法。因此，另一种选择是将它们实现为静态扩展方法，并将它们放置在执行此类工作的命名空间中（因此它们仅在工作区域可见，但可以在需要时被其他对象调用）。

问题是在哪里放置以下方法：

*   提供从数据对象信息（公共信息）阐述的信息，无需任何操作
*   是针对特定功能的一个或几个其他对象的特定用途（主要是操作，也有查询和呈现）
*   （有些使用辅助业务对象，有些只依赖于数据对象，不需要其他任何东西）

他们应该属于：

*   数据对象
*   操纵对象
*   到业务命名空间中的静态助手类？

我想答案在很大程度上取决于我们正在讨论的方法、应用程序的设计等。所以我理解具体的建议可能很难给出，但我会很感激任何帮助我做出决定的提示和其他情况。

简而言之：

**为了选择将方法放在哪里，我应该问自己什么标准或什么问题？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-14T20:21:35.010

以我个人的经验，为每个对象（或类）放置一个单一的职责/功能/特性等效果非常好。

这就是我建议您的原因：为您需要处理的每种类型的数据对象创建 1 个类。示例：DataObjectA、DataObjectB 为您需要对这些数据对象执行的每个操作创建 1 个类（或者可能为每个对操作 x 数据对象类型创建一个类，具体取决于它们的相似程度）。示例：DataObjectLoader、DataObjectASaver、DataObjectAUpdater，也许还有 DataObjectALoader 和 DataObjectBLoader。为该数据的每个更复杂的操作创建 1 个类：示例：DataObjectAComplexThing

如果详细说明的数据需要完成复杂的事情，对我来说具有“意义”，并且这是您在领域中识别的问题，并且您可以轻松命名，您也应该为此创建一个类：示例：ObtainDataRequiredForComplexThing

DataObject 应该只回答“定义”该对象到底是什么所需的基本查询......所有额外的东西都应该在 ObtainDataRequiredForComplexThing 或 DataObjectAComplexThing 类型的类上。

我决定把东西放在哪里的标准是...... Thins 应该只有方法、字段等。这些都是绝对必要的......任何你可以拿走的东西，你应该把它拿走并放在其他地方（在另一个班级，或任何[当然是合理的]）。如果您可以使用单个类或多个类来解决问题，并且这些较小的类中的每一个都有自己的“意义”，并且您可以识别领域中的问题，并且可以给它们一个合适的名称...您应该使用多个较小的类...组合对象（或类）比拆分它们要容易得多。所以只要你有机会，你几乎总是把它们分成更小的构建块......

大多数人说你应该为领域中的每个名词创建对象（或类），并为领域中的每个动词创建方法......根据我的经验，为每个名词创建对象，为每个动词创建对象是一个更好的主意到。示例： new SomeVerbThatRepresentsDoingSoething(aDataObject).ExecuteThisVerb(); //实现做那个动词

# email - 在 IIS 上设置 SmarterMail 作为子域

> ID：11485708
> 
> 赞同：1
> 
> 时间：2012-07-14T17:05:59.500
> 
> 标签：email, subdomain, vps

我很惊讶没有更多关于此的信息。我认为这是一个相当普遍的问题。

我的情况：我有一个 vps，我在 (http://honeybadgertech.com/) 上设置了一个网站，我还想添加电子邮件。最好在子域上，例如 mail.honeybadgertech.com。我已经完成了[smartermail](http://www.smartertools.com/smartermail/mail-server-software.aspx)的基本安装，但找不到有关如何将其配置为在 IIS 上作为子域运行的说明。我过去建立了许多网站，但我根本没有使用电子邮件的经验。谁能帮我详细介绍在子域上设置更智能的邮件？或者从godaddy注册一个单独的邮件域来运行电子邮件会更容易吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T05:04:01.117

好的，这就是我能够跑步的方式。

1.  [安装下载](http://www.smartertools.com/smartermail/mail-server-software.aspx)
2.  [在 IIS 中设置子域](http://portal.smartertools.com/KB/a2352/set-up-smartermail-as-an-iis-site-iis-70.aspx)
3.  为 sub.yourdomain.com 添加 A 或 CNAME 记录
4.  为 yourdomain.com 添加 MX 记录
5.  添加反向 DNS 记录（如果可能）

希望这对某人有帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-11-29T13:51:36.647

您可以在 IIS 中进行以下更改以访问 mail.domain.com。

1.  开始 >> 管理工具 >> IIS。
2.  选择 SmarterMail 网站。
3.  单击绑定。添加与端口 80 的新绑定。（默认情况下 Smartermail 在 9998 端口上运行）
4.  在主机标头值框中，添加 mail.domain.com。
5.  单击确定。

现在，您可以在浏览器中通过[http://mail.domain.com](http://mail.domain.com)访问 SmarterMail 。

# iphone - 表视图细胞图像视网膜问题

> ID：11485713
> 
> 赞同：1
> 
> 时间：2012-07-14T17:07:09.140
> 
> 标签：iphone, objective-c, ios

我有一个表格视图，它显示带有项目图像的自定义单元格。我允许用户从那里的库中选择一张照片，该照片将显示在单元格上。图像保存在文档目录中。

我对如何处理视网膜与非视网膜显示器感到困惑。

假设我的图像是 70 x 70 像素，我是否还应该为视网膜显示器保留 140 x 140 像素的版本。处理这种情况的适当方法是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-14T17:17:26.533

是的，您应该有一个 70x70 像素的文件和一个 140x140 像素的文件。如果您将普通图像命名为“CellImage.png”，则应将视网膜命名为“CellImage@2x.png”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-14T19:52:56.460

如果您允许用户从他们的库中选择图像，我假设您在将图像放入 Documents 目录之前调整其大小。

如果您确定图像不会在不同设备之间共享（如在 iCloud 中），那么您可以简单地以正确的比例保存图像并忘记它。即为当前设备适当地缩放图像。

您可以将图像保存为 140x140，并通过 UIImageView 的大小限制正确缩放演示文稿。

我不知道 imageWithContentsOfFile 的工作方式是否与 imageNamed 方法相同，但是在调用 imageNamed 方法时，您没有指定文件的扩展名，而只是指定了裸文件名，并且该方法会尝试选择正确的文件而无需指定装饰即 Image.png Image@2x.png Image~iphone.png Image@2x~iphone.png

# c++ - 编译使用 Opencv 的 cpp 文件

> ID：11485717
> 
> 赞同：3
> 
> 时间：2012-07-14T17:07:48.020
> 
> 标签：c++, opencv

所以我有一个使用 OpenCV 的 .cpp 文件。我在链接库时遇到了一些问题，但我认为我的 Makefile 现在“更好”了。

生成文件：

```
CC=g++
#CC=gcc

# compile flags
CFLAGS=-g -Wall

# OpenCV Related
prefix=/usr/local/opencv

OCVFLAGS=-I${prefix}/include/opencv -I${prefix}/include
OCVLIBS=-L${prefix}/lib -lopencv_core -lopencv_highgui -lopencv_imgproc -lopencv_ml -lopencv_video -lopencv_features2d -lopencv_flann -lopencv_objdetect -lopencv_calib3d

PROGRAM=extractDescriptorsToFile

OBJECTS=$(PROGRAM).o

program: $(OBJECTS)
    $(CC) $(OBJECTS) -o $(PROGRAM) $(OCVLIBS) -arch i386 

$(PROGRAM).o: $(PROGRAM).cpp
    $(CC) -c $(CFLAGS) $(OCVFLAGS) $(PROGRAM).cpp 

clean:
    rm -f *o
    rm -f $(PROGRAM)
    rm -f *~ 
```

但是，当我“制作”时，会生成 .o 文件，但出现此错误：

```
ld: warning: ignoring file extractDescriptorsToFile.o, file was built for unsupported file format which is not the architecture being linked (i386)
Undefined symbols for architecture i386:
  "_main", referenced from:
      start in crt1.10.6.o
ld: symbol(s) not found for architecture i386
collect2: ld returned 1 exit status
make: *** [program] Error 1 
```

这是一篇类似的帖子“[预编译头文件和在 OSX 上编译通用对象](https://stackoverflow.com/questions/1757509/precompiled-headers-and-compiling-universal-objects-on-osx)”，但我认为这不是我的问题？

任何帮助，将不胜感激...？

我认为这个错误有时是由于没有 main() 但我的文件有......

删除“-arch i386”给我留下了：

```
Undefined symbols for architecture x86_64:
  "cv::operator<<(cv::FileStorage&, std::basic_string<char, std::char_traits<char>, std::allocator<char> > const&)", referenced from:
      cv::operator<<(cv::FileStorage&, char const*)in extractDescriptorsToFile.o
      extract(std::basic_string<char, std::char_traits<char>, std::allocator<char> >, std::basic_string<char, std::char_traits<char>, std::allocator<char> >, int, char**, cv::FileStorage&, std::basic_string<char, std::char_traits<char>, std::allocator<char> >)in extractDescriptorsToFile.o
      _main in extractDescriptorsToFile.o
  "cv::Ptr<CvFileStorage>::delete_obj()", referenced from:
      cv::Ptr<CvFileStorage>::release()      in extractDescriptorsToFile.o
  "cv::fastFree(void*)", referenced from:
      cv::Ptr<CvFileStorage>::release()      in extractDescriptorsToFile.o
      cv::Ptr<cv::FeatureDetector>::release()      in extractDescriptorsToFile.o
      cv::Ptr<cv::DescriptorExtractor>::release()      in extractDescriptorsToFile.o
      cv::Mat::~Mat() in extractDescriptorsToFile.o
  "cv::fastMalloc(unsigned long)", referenced from:
      cv::Ptr<cv::FeatureDetector>::Ptr(cv::FeatureDetector*)in extractDescriptorsToFile.o
  "cv::Mat::deallocate()", referenced from:
      cv::Mat::release()    in extractDescriptorsToFile.o
  "cv::Mat::copySize(cv::Mat const&)", referenced from:
      cv::Mat::operator=(cv::Mat const&)in extractDescriptorsToFile.o
  "cv::Exception::Exception(int, std::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, std::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, std::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, int)", referenced from:
      cv::FileStorage& cv::operator<< <cv::Mat>(cv::FileStorage&, cv::Mat const&)in extractDescriptorsToFile.o
  "cv::error(cv::Exception const&)", referenced from:
      cv::FileStorage& cv::operator<< <cv::Mat>(cv::FileStorage&, cv::Mat const&)in extractDescriptorsToFile.o
  "cv::Exception::~Exception()", referenced from:
      cv::FileStorage& cv::operator<< <cv::Mat>(cv::FileStorage&, cv::Mat const&)in extractDescriptorsToFile.o
  "cv::write(cv::FileStorage&, std::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, cv::Mat const&)", referenced from:
      cv::FileStorage& cv::operator<< <cv::Mat>(cv::FileStorage&, cv::Mat const&)in extractDescriptorsToFile.o
  "cv::_OutputArray::_OutputArray(cv::Mat&)", referenced from:
      resizeImage(cv::Mat const&, int)in extractDescriptorsToFile.o
  "cv::_InputArray::_InputArray(cv::Mat const&)", referenced from:
      resizeImage(cv::Mat const&, int)in extractDescriptorsToFile.o
  "cv::resize(cv::_InputArray const&, cv::_OutputArray const&, cv::Size_<int>, double, double, int)", referenced from:
      resizeImage(cv::Mat const&, int)in extractDescriptorsToFile.o
  "cv::OrbFeatureDetector::OrbFeatureDetector(unsigned long, cv::ORB::CommonParams)", referenced from:
      extract(std::basic_string<char, std::char_traits<char>, std::allocator<char> >, std::basic_string<char, std::char_traits<char>, std::allocator<char> >, int, char**, cv::FileStorage&, std::basic_string<char, std::char_traits<char>, std::allocator<char> >)in extractDescriptorsToFile.o
  "cv::FeatureDetector::create(std::basic_string<char, std::char_traits<char>, std::allocator<char> > const&)", referenced from:
      extract(std::basic_string<char, std::char_traits<char>, std::allocator<char> >, std::basic_string<char, std::char_traits<char>, std::allocator<char> >, int, char**, cv::FileStorage&, std::basic_string<char, std::char_traits<char>, std::allocator<char> >)in extractDescriptorsToFile.o
  "cv::DescriptorExtractor::create(std::basic_string<char, std::char_traits<char>, std::allocator<char> > const&)", referenced from:
      extract(std::basic_string<char, std::char_traits<char>, std::allocator<char> >, std::basic_string<char, std::char_traits<char>, std::allocator<char> >, int, char**, cv::FileStorage&, std::basic_string<char, std::char_traits<char>, std::allocator<char> >)in extractDescriptorsToFile.o
  "cv::imread(std::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, int)", referenced from:
      extract(std::basic_string<char, std::char_traits<char>, std::allocator<char> >, std::basic_string<char, std::char_traits<char>, std::allocator<char> >, int, char**, cv::FileStorage&, std::basic_string<char, std::char_traits<char>, std::allocator<char> >)in extractDescriptorsToFile.o
  "cv::FeatureDetector::detect(cv::Mat const&, std::vector<cv::KeyPoint, std::allocator<cv::KeyPoint> >&, cv::Mat const&) const", referenced from:
      extract(std::basic_string<char, std::char_traits<char>, std::allocator<char> >, std::basic_string<char, std::char_traits<char>, std::allocator<char> >, int, char**, cv::FileStorage&, std::basic_string<char, std::char_traits<char>, std::allocator<char> >)in extractDescriptorsToFile.o
  "cv::DescriptorExtractor::compute(cv::Mat const&, std::vector<cv::KeyPoint, std::allocator<cv::KeyPoint> >&, cv::Mat&) const", referenced from:
      extract(std::basic_string<char, std::char_traits<char>, std::allocator<char> >, std::basic_string<char, std::char_traits<char>, std::allocator<char> >, int, char**, cv::FileStorage&, std::basic_string<char, std::char_traits<char>, std::allocator<char> >)in extractDescriptorsToFile.o
  "cv::write(cv::FileStorage&, std::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, std::vector<cv::KeyPoint, std::allocator<cv::KeyPoint> > const&)", referenced from:
      extract(std::basic_string<char, std::char_traits<char>, std::allocator<char> >, std::basic_string<char, std::char_traits<char>, std::allocator<char> >, int, char**, cv::FileStorage&, std::basic_string<char, std::char_traits<char>, std::allocator<char> >)in extractDescriptorsToFile.o
  "cv::FileStorage::FileStorage()", referenced from:
      _main in extractDescriptorsToFile.o
  "cv::FileStorage::FileStorage(std::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, int, std::basic_string<char, std::char_traits<char>, std::allocator<char> > const&)", referenced from:
      _main in extractDescriptorsToFile.o
  "cv::FileStorage::~FileStorage()", referenced from:
      _main in extractDescriptorsToFile.o
  "cv::FileStorage::isOpened() const", referenced from:
      _main in extractDescriptorsToFile.o
  "cv::FileStorage::release()", referenced from:
      _main in extractDescriptorsToFile.o
ld: symbol(s) not found for architecture x86_64
collect2: ld returned 1 exit status
make: *** [program] Error 1 
```

这就是我将 -arch i386 添加到`program`和时得到的结果`$(PROGRAM).o`：

```
Undefined symbols for architecture i386:
  "_gzputs", referenced from:
      icvPuts(CvFileStorage*, char const*)in libopencv_core.a(persistence.o)
  "_gzgets", referenced from:
      icvGets(CvFileStorage*, char*, int)in libopencv_core.a(persistence.o)
  "_gzeof", referenced from:
      icvEof(CvFileStorage*)      in libopencv_core.a(persistence.o)
  "_gzclose", referenced from:
      _cvReleaseFileStorage in libopencv_core.a(persistence.o)
      _cvOpenFileStorage in libopencv_core.a(persistence.o)
  "_gzopen", referenced from:
      _cvOpenFileStorage in libopencv_core.a(persistence.o)
  "_gzrewind", referenced from:
      _cvOpenFileStorage in libopencv_core.a(persistence.o)
  "cv::Mat::convertTo(cv::Mat&, int, double, double) const", referenced from:
      cv::imencode(std::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, cv::Mat const&, std::vector<unsigned char, std::allocator<unsigned char> >&, std::vector<int, std::allocator<int> > const&)in libopencv_highgui.a(loadsave.o)
      cv::imwrite_(std::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, cv::Mat const&, std::vector<int, std::allocator<int> > const&, bool)in libopencv_highgui.a(loadsave.o)
  "cv::flip(cv::Mat const&, cv::Mat&, int)", referenced from:
      _cvEncodeImage in libopencv_highgui.a(loadsave.o)
      cv::imwrite_(std::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, cv::Mat const&, std::vector<int, std::allocator<int> > const&, bool)in libopencv_highgui.a(loadsave.o)
  "_jpeg_destroy_decompress", referenced from:
      cv::JpegDecoder::close()     in libopencv_highgui.a(grfmt_jpeg.o)
      cv::JpegDecoder::readData(cv::Mat&)     in libopencv_highgui.a(grfmt_jpeg.o)
      cv::JpegDecoder::readHeader()      in libopencv_highgui.a(grfmt_jpeg.o)
      cv::JpegDecoder::~JpegDecoder()in libopencv_highgui.a(grfmt_jpeg.o)
      cv::JpegDecoder::~JpegDecoder()in libopencv_highgui.a(grfmt_jpeg.o)
      cv::JpegDecoder::~JpegDecoder()in libopencv_highgui.a(grfmt_jpeg.o)
  "_jpeg_CreateCompress", referenced from:
      cv::JpegEncoder::write(cv::Mat const&, std::vector<int, std::allocator<int> > const&)in libopencv_highgui.a(grfmt_jpeg.o)
  "_jpeg_std_error", referenced from:
      cv::JpegEncoder::write(cv::Mat const&, std::vector<int, std::allocator<int> > const&)in libopencv_highgui.a(grfmt_jpeg.o)
      cv::JpegDecoder::readHeader()      in libopencv_highgui.a(grfmt_jpeg.o)
  "_jpeg_destroy_compress", referenced from:
      cv::JpegEncoder::write(cv::Mat const&, std::vector<int, std::allocator<int> > const&)in libopencv_highgui.a(grfmt_jpeg.o)
  "_jpeg_set_defaults", referenced from:
      cv::JpegEncoder::write(cv::Mat const&, std::vector<int, std::allocator<int> > const&)in libopencv_highgui.a(grfmt_jpeg.o)
  "_jpeg_set_quality", referenced from:
      cv::JpegEncoder::write(cv::Mat const&, std::vector<int, std::allocator<int> > const&)in libopencv_highgui.a(grfmt_jpeg.o)
  "_jpeg_start_compress", referenced from:
      cv::JpegEncoder::write(cv::Mat const&, std::vector<int, std::allocator<int> > const&)in libopencv_highgui.a(grfmt_jpeg.o)
  "_jpeg_write_scanlines", referenced from:
      cv::JpegEncoder::write(cv::Mat const&, std::vector<int, std::allocator<int> > const&)in libopencv_highgui.a(grfmt_jpeg.o)
  "_jpeg_finish_compress", referenced from:
      cv::JpegEncoder::write(cv::Mat const&, std::vector<int, std::allocator<int> > const&)in libopencv_highgui.a(grfmt_jpeg.o)
  "_jpeg_stdio_dest", referenced from:
      cv::JpegEncoder::write(cv::Mat const&, std::vector<int, std::allocator<int> > const&)in libopencv_highgui.a(grfmt_jpeg.o)
  "_jpeg_start_decompress", referenced from:
      cv::JpegDecoder::readData(cv::Mat&)     in libopencv_highgui.a(grfmt_jpeg.o)
  "_jpeg_read_scanlines", referenced from:
      cv::JpegDecoder::readData(cv::Mat&)     in libopencv_highgui.a(grfmt_jpeg.o)
  "_jpeg_finish_decompress", referenced from:
      cv::JpegDecoder::readData(cv::Mat&)     in libopencv_highgui.a(grfmt_jpeg.o)
  "_jpeg_alloc_huff_table", referenced from:
      cv::JpegDecoder::readData(cv::Mat&)     in libopencv_highgui.a(grfmt_jpeg.o)
  "_jpeg_CreateDecompress", referenced from:
      cv::JpegDecoder::readHeader()      in libopencv_highgui.a(grfmt_jpeg.o)
  "_jpeg_read_header", referenced from:
      cv::JpegDecoder::readHeader()      in libopencv_highgui.a(grfmt_jpeg.o)
  "_jpeg_stdio_src", referenced from:
      cv::JpegDecoder::readHeader()      in libopencv_highgui.a(grfmt_jpeg.o)
  "_jpeg_resync_to_restart", referenced from:
      cv::jpeg_buffer_src(jpeg_decompress_struct*, cv::JpegSource*)       in libopencv_highgui.a(grfmt_jpeg.o)
      cv::JpegDecoder::readHeader()      in libopencv_highgui.a(grfmt_jpeg.o)
  "_jas_init", referenced from:
      __static_initialization_and_destruction_0(int, int)in libopencv_highgui.a(grfmt_jpeg2000.o)
  "_jas_cleanup", referenced from:
      ___tcf_0 in libopencv_highgui.a(grfmt_jpeg2000.o)
  "_jas_matrix_create", referenced from:
      cv::Jpeg2KEncoder::writeComponent16u(void*, cv::Mat const&)in libopencv_highgui.a(grfmt_jpeg2000.o)
      cv::Jpeg2KEncoder::writeComponent8u(void*, cv::Mat const&)in libopencv_highgui.a(grfmt_jpeg2000.o)
      cv::Jpeg2KDecoder::readData(cv::Mat&)     in libopencv_highgui.a(grfmt_jpeg2000.o)
  "_jas_image_writecmpt", referenced from:
      cv::Jpeg2KEncoder::writeComponent16u(void*, cv::Mat const&)in libopencv_highgui.a(grfmt_jpeg2000.o)
      cv::Jpeg2KEncoder::writeComponent8u(void*, cv::Mat const&)in libopencv_highgui.a(grfmt_jpeg2000.o)
  "_jas_matrix_destroy", referenced from:
      cv::Jpeg2KEncoder::writeComponent16u(void*, cv::Mat const&)in libopencv_highgui.a(grfmt_jpeg2000.o)
      cv::Jpeg2KEncoder::writeComponent8u(void*, cv::Mat const&)in libopencv_highgui.a(grfmt_jpeg2000.o)
      cv::Jpeg2KDecoder::readData(cv::Mat&)     in libopencv_highgui.a(grfmt_jpeg2000.o)
  "_jas_stream_close", referenced from:
      cv::Jpeg2KDecoder::close()     in libopencv_highgui.a(grfmt_jpeg2000.o)
      cv::Jpeg2KEncoder::write(cv::Mat const&, std::vector<int, std::allocator<int> > const&)in libopencv_highgui.a(grfmt_jpeg2000.o)
      cv::Jpeg2KDecoder::readData(cv::Mat&)     in libopencv_highgui.a(grfmt_jpeg2000.o)
      cv::Jpeg2KDecoder::readHeader()      in libopencv_highgui.a(grfmt_jpeg2000.o)
  "_jas_image_destroy", referenced from:
      cv::Jpeg2KDecoder::close()     in libopencv_highgui.a(grfmt_jpeg2000.o)
      cv::Jpeg2KEncoder::write(cv::Mat const&, std::vector<int, std::allocator<int> > const&)in libopencv_highgui.a(grfmt_jpeg2000.o)
      cv::Jpeg2KDecoder::readData(cv::Mat&)     in libopencv_highgui.a(grfmt_jpeg2000.o)
      cv::Jpeg2KDecoder::readHeader()      in libopencv_highgui.a(grfmt_jpeg2000.o)
  "_jas_image_create", referenced from:
      cv::Jpeg2KEncoder::write(cv::Mat const&, std::vector<int, std::allocator<int> > const&)in libopencv_highgui.a(grfmt_jpeg2000.o)
  "_jas_stream_fopen", referenced from:
      cv::Jpeg2KEncoder::write(cv::Mat const&, std::vector<int, std::allocator<int> > const&)in libopencv_highgui.a(grfmt_jpeg2000.o)
      cv::Jpeg2KDecoder::readHeader()      in libopencv_highgui.a(grfmt_jpeg2000.o)
  "_jas_image_strtofmt", referenced from:
      cv::Jpeg2KEncoder::write(cv::Mat const&, std::vector<int, std::allocator<int> > const&)in libopencv_highgui.a(grfmt_jpeg2000.o)
  "_jas_image_encode", referenced from:
      cv::Jpeg2KEncoder::write(cv::Mat const&, std::vector<int, std::allocator<int> > const&)in libopencv_highgui.a(grfmt_jpeg2000.o)
  "_jas_image_getcmptbytype", referenced from:
      cv::Jpeg2KDecoder::readData(cv::Mat&)     in libopencv_highgui.a(grfmt_jpeg2000.o)
  "_jas_cmprof_createfromclrspc", referenced from:
      cv::Jpeg2KDecoder::readData(cv::Mat&)     in libopencv_highgui.a(grfmt_jpeg2000.o)
  "_jas_image_chclrspc", referenced from:
      cv::Jpeg2KDecoder::readData(cv::Mat&)     in libopencv_highgui.a(grfmt_jpeg2000.o)
  "_jas_cmprof_destroy", referenced from:
      cv::Jpeg2KDecoder::readData(cv::Mat&)     in libopencv_highgui.a(grfmt_jpeg2000.o)
  "_jas_image_readcmpt", referenced from:
      cv::Jpeg2KDecoder::readData(cv::Mat&)     in libopencv_highgui.a(grfmt_jpeg2000.o)
  "_jas_image_decode", referenced from:
      cv::Jpeg2KDecoder::readHeader()      in libopencv_highgui.a(grfmt_jpeg2000.o)
  "_png_destroy_read_struct", referenced from:
      cv::PngDecoder::close()     in libopencv_highgui.a(grfmt_png.o)
      cv::PngDecoder::readData(cv::Mat&)     in libopencv_highgui.a(grfmt_png.o)
      cv::PngDecoder::readHeader()      in libopencv_highgui.a(grfmt_png.o)
      cv::PngDecoder::~PngDecoder()in libopencv_highgui.a(grfmt_png.o)
      cv::PngDecoder::~PngDecoder()in libopencv_highgui.a(grfmt_png.o)
      cv::PngDecoder::~PngDecoder()in libopencv_highgui.a(grfmt_png.o)
  "_png_create_write_struct", referenced from:
      cv::PngEncoder::write(cv::Mat const&, std::vector<int, std::allocator<int> > const&)in libopencv_highgui.a(grfmt_png.o)
  "_png_create_info_struct", referenced from:
      cv::PngEncoder::write(cv::Mat const&, std::vector<int, std::allocator<int> > const&)in libopencv_highgui.a(grfmt_png.o)
      cv::PngDecoder::readHeader()      in libopencv_highgui.a(grfmt_png.o)
  "_png_destroy_write_struct", referenced from:
      cv::PngEncoder::write(cv::Mat const&, std::vector<int, std::allocator<int> > const&)in libopencv_highgui.a(grfmt_png.o)
  "_png_set_write_fn", referenced from:
      cv::PngEncoder::write(cv::Mat const&, std::vector<int, std::allocator<int> > const&)in libopencv_highgui.a(grfmt_png.o)
  "_png_set_filter", referenced from:
      cv::PngEncoder::write(cv::Mat const&, std::vector<int, std::allocator<int> > const&)in libopencv_highgui.a(grfmt_png.o)
  "_png_set_compression_level", referenced from:
      cv::PngEncoder::write(cv::Mat const&, std::vector<int, std::allocator<int> > const&)in libopencv_highgui.a(grfmt_png.o)
  "_png_set_compression_strategy", referenced from:
      cv::PngEncoder::write(cv::Mat const&, std::vector<int, std::allocator<int> > const&)in libopencv_highgui.a(grfmt_png.o)
  "_png_set_IHDR", referenced from:
      cv::PngEncoder::write(cv::Mat const&, std::vector<int, std::allocator<int> > const&)in libopencv_highgui.a(grfmt_png.o)
  "_png_write_info", referenced from:
      cv::PngEncoder::write(cv::Mat const&, std::vector<int, std::allocator<int> > const&)in libopencv_highgui.a(grfmt_png.o)
  "_png_set_bgr", referenced from:
      cv::PngEncoder::write(cv::Mat const&, std::vector<int, std::allocator<int> > const&)in libopencv_highgui.a(grfmt_png.o)
      cv::PngDecoder::readData(cv::Mat&)     in libopencv_highgui.a(grfmt_png.o)
  "_png_write_image", referenced from:
      cv::PngEncoder::write(cv::Mat const&, std::vector<int, std::allocator<int> > const&)in libopencv_highgui.a(grfmt_png.o)
  "_png_write_end", referenced from:
      cv::PngEncoder::write(cv::Mat const&, std::vector<int, std::allocator<int> > const&)in libopencv_highgui.a(grfmt_png.o)
  "_png_set_compression_mem_level", referenced from:
      cv::PngEncoder::write(cv::Mat const&, std::vector<int, std::allocator<int> > const&)in libopencv_highgui.a(grfmt_png.o)
  "_png_init_io", referenced from:
      cv::PngEncoder::write(cv::Mat const&, std::vector<int, std::allocator<int> > const&)in libopencv_highgui.a(grfmt_png.o)
      cv::PngDecoder::readHeader()      in libopencv_highgui.a(grfmt_png.o)
  "_png_set_swap", referenced from:
      cv::PngEncoder::write(cv::Mat const&, std::vector<int, std::allocator<int> > const&)in libopencv_highgui.a(grfmt_png.o)
      cv::PngDecoder::readData(cv::Mat&)     in libopencv_highgui.a(grfmt_png.o)
  "_png_set_strip_alpha", referenced from:
      cv::PngDecoder::readData(cv::Mat&)     in libopencv_highgui.a(grfmt_png.o)
  "_png_read_update_info", referenced from:
      cv::PngDecoder::readData(cv::Mat&)     in libopencv_highgui.a(grfmt_png.o)
  "_png_read_image", referenced from:
      cv::PngDecoder::readData(cv::Mat&)     in libopencv_highgui.a(grfmt_png.o)
  "_png_read_end", referenced from:
      cv::PngDecoder::readData(cv::Mat&)     in libopencv_highgui.a(grfmt_png.o)
  "_png_set_rgb_to_gray", referenced from:
      cv::PngDecoder::readData(cv::Mat&)     in libopencv_highgui.a(grfmt_png.o)
  "_png_set_gray_to_rgb", referenced from:
      cv::PngDecoder::readData(cv::Mat&)     in libopencv_highgui.a(grfmt_png.o)
  "_png_set_expand_gray_1_2_4_to_8", referenced from:
      cv::PngDecoder::readData(cv::Mat&)     in libopencv_highgui.a(grfmt_png.o)
  "_png_set_palette_to_rgb", referenced from:
      cv::PngDecoder::readData(cv::Mat&)     in libopencv_highgui.a(grfmt_png.o)
  "_png_set_strip_16", referenced from:
      cv::PngDecoder::readData(cv::Mat&)     in libopencv_highgui.a(grfmt_png.o)
  "_png_create_read_struct", referenced from:
      cv::PngDecoder::readHeader()      in libopencv_highgui.a(grfmt_png.o)
  "_png_set_read_fn", referenced from:
      cv::PngDecoder::readHeader()      in libopencv_highgui.a(grfmt_png.o)
  "_png_read_info", referenced from:
      cv::PngDecoder::readHeader()      in libopencv_highgui.a(grfmt_png.o)
  "_png_get_IHDR", referenced from:
      cv::PngDecoder::readHeader()      in libopencv_highgui.a(grfmt_png.o)
  "_png_error", referenced from:
      cv::PngDecoder::readDataFromBuf(void*, unsigned char*, unsigned long)in libopencv_highgui.a(grfmt_png.o)
  "_TIFFClose", referenced from:
      cv::TiffDecoder::close()     in libopencv_highgui.a(grfmt_tiff.o)
      cv::TiffDecoder::readData(cv::Mat&)     in libopencv_highgui.a(grfmt_tiff.o)
      cv::TiffDecoder::readHeader()      in libopencv_highgui.a(grfmt_tiff.o)
      cv::TiffDecoder::~TiffDecoder()in libopencv_highgui.a(grfmt_tiff.o)
      cv::TiffDecoder::~TiffDecoder()in libopencv_highgui.a(grfmt_tiff.o)
      cv::TiffDecoder::~TiffDecoder()in libopencv_highgui.a(grfmt_tiff.o)
  "_TIFFIsTiled", referenced from:
      cv::TiffDecoder::readData(cv::Mat&)     in libopencv_highgui.a(grfmt_tiff.o)
  "_TIFFGetField", referenced from:
      cv::TiffDecoder::readData(cv::Mat&)     in libopencv_highgui.a(grfmt_tiff.o)
      cv::TiffDecoder::readHeader()      in libopencv_highgui.a(grfmt_tiff.o)
  "_TIFFReadEncodedStrip", referenced from:
      cv::TiffDecoder::readData(cv::Mat&)     in libopencv_highgui.a(grfmt_tiff.o)
  "_TIFFReadRGBAStrip", referenced from:
      cv::TiffDecoder::readData(cv::Mat&)     in libopencv_highgui.a(grfmt_tiff.o)
  "_TIFFReadEncodedTile", referenced from:
      cv::TiffDecoder::readData(cv::Mat&)     in libopencv_highgui.a(grfmt_tiff.o)
  "_TIFFReadRGBATile", referenced from:
      cv::TiffDecoder::readData(cv::Mat&)     in libopencv_highgui.a(grfmt_tiff.o)
  "_TIFFOpen", referenced from:
      cv::TiffDecoder::readHeader()      in libopencv_highgui.a(grfmt_tiff.o)
  "_TIFFRGBAImageOK", referenced from:
      cv::TiffDecoder::readHeader()      in libopencv_highgui.a(grfmt_tiff.o)
  "_TIFFSetErrorHandler", referenced from:
      cv::TiffDecoder::TiffDecoder()in libopencv_highgui.a(grfmt_tiff.o)
      cv::TiffDecoder::TiffDecoder()in libopencv_highgui.a(grfmt_tiff.o)
  "_TIFFSetWarningHandler", referenced from:
      cv::TiffDecoder::TiffDecoder()in libopencv_highgui.a(grfmt_tiff.o)
      cv::TiffDecoder::TiffDecoder()in libopencv_highgui.a(grfmt_tiff.o)
ld: symbol(s) not found for architecture i386
collect2: ld returned 1 exit status
make: *** [program] Error 1 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-14T17:18:10.203

如果从第 19 行删除显式架构规范（“-arch i386”）会发生什么？我想这可能会有所帮助。

**编辑**

Well it seems to me that you have a 64-bit OS, and 32-bit OpenCV libraries.

# javascript - 页面加载后的第一个锚定链接需要点击两次

> ID：11485722
> 
> 赞同：1
> 
> 时间：2012-07-14T17:08:13.117
> 
> 标签：javascript, jquery, jquery-animate, scrollto

我正在设计的页面底部有一个固定位置栏，用于参考，它从页面加载开始，高度为零，但可以通过单击直接位于其顶部的 div 来展开。同样，各个引用是内容块中链接的锚点，我正在使用 scrollTo 和 localScroll jQuery 插件进行导航 - 如果在展开引用栏时单击锚定链接，它将 localScroll 到它，如果栏缩小，它会滚动到它，然后调用展开动画。处理所有这些的脚本的第一部分效果很好 - 单击定位的 div 时参考栏打开就好了 - 但是页面加载后单击的第一个锚定链接，无论参考栏是关闭还是打开，都需要单击两次，没有之一，做任何事。这是脚本：

```
$(document).ready(function() {
    $("#reftag").css('bottom', '0px');
    $("#refblock").css('height','opx');
    $("refblock").scrollTo($("#refblock h4"),0);

    $("#reftag").click(
        function(){
            var offset = $("#refblock").offset();
            if(($(document).scrollTop()+$(window).height() - offset.top) > 100)
            {
                $("#reftag").animate({bottom: "0px"}, {queue:false, duration: 1700, easing: 'easeOutBounce'})
                $("#refblock").animate({height:"0px"},{queue:false, duration: 1700, easing: 'easeOutBounce'})
                $("#refblock").scrollTo($("#refblock h4"),0);
            }
            else
            {
                $("#reftag").animate({bottom: "200px"}, {queue:false, duration: 1700, easing: 'easeOutBounce'})
                $("#refblock").animate({height:"200px"},{queue:false, duration: 1700, easing: 'easeOutBounce'})
            }
            return false;
        });

    $("a.ref").click(
        function () {           
            var offset = $("#refblock").offset();
            if(($(document).scrollTop()+$(window).height() - offset.top) > 100)
            {
                $('#textblock').localScroll({target:'#refblock'});
            }
        else{
            $('#textblock').localScroll({target:'#refblock',onAfter:function(){
                $("#reftag").animate({bottom: "200px"}, {queue:false, duration: 1700, easing: 'easeOutBounce'})
                $("#refblock").animate({height:"200px"}, {queue:false, duration: 1700, easing: 'easeOutBounce'})
            }});    
            }
                return false;
        });
    }); 
```

这是 refblock 的 CSS（以防它具有任何值）：

```
#refblock{
    width: 100%;
    height: 0px;
    position: fixed;
    bottom: 0px;
    padding: 3px 20px 3px 0px;
    background: rgb(194,1,92);
    margin-left: 0%;
    margin-right: auto;
    text-align:center;
    z-index: 100;
    overflow: auto;
} 
```

有任何想法吗？是剧本的问题，还是别的什么？我会在网站上线时发布一个链接，如果还有其他对答案有用的东西，请告诉我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-14T17:09:53.413

尽量防止点击`a.ref`链接触发的默认操作：

```
$("a.ref").click(function (e) {
   e.preventDefault(); 
} 
```

# ios - NSRegularExpression 内存猪

> ID：11485725
> 
> 赞同：3
> 
> 时间：2012-07-14T17:08:34.513
> 
> 标签：ios, regex, memory-leaks, nsregularexpression

我一直在尝试降低我的应用程序的内存使用量，在分析后发现 NSRegularExpression 是一个相当大的内存占用。

我的一个 fistMatchInString 调用（第一个？）分配了 1 MB 的内存，它永远不会被释放。并且对 firstMatchInString 的每次调用都会泄漏一个“NSConcreteValue”（无论是什么）。

您是否遇到过同样的行为，您知道如何解决吗？你知道 NSRegularExpression 的好替代品吗？

在你问之前：我所有的正则表达式模式都很小并且是静态创建的。所有要匹配的字符串也都很小。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T17:24:19.500

是的，正则表达式是昂贵的操作。

从 NSPredicate 编程指南中说：“正则表达式匹配尤其是一项昂贵的操作”，并且“因此，您应该在正则表达式之前执行简单的测试”。

[我让您阅读谓词编程指南](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/Predicates/Articles/pUsing.html)的性能部分。我不知道谓词是否适用于您的案例，但您甚至可以从性能部分中提取一些有价值的信息（位于“使用谓词”一章中）

编辑 ：

查看此[链接](http://samsoff.es/posts/how-to-drastically-improve-your-app-with-an-afternoon-and-instruments)的正则表达式部分，他使用的是静态 NSRegularExpression 而不是每次都分配它。

从这篇[文章](https://stackoverflow.com/questions/996536/regex-in-python)中，即使它是关于 python 的，“+”似乎更贪婪，所以在你的正则表达式中可能会有一些改进，在表达式本身，一些最佳实践可以实现。

# c# - 限制用户输入某些语言。

> ID：11485726
> 
> 赞同：1
> 
> 时间：2012-07-14T17:08:49.407
> 
> 标签：c#, asp.net

我正在创建一个包含用户评论区的网站。例如留言簿或产品评论。我想限制用户在评论区发布不恰当的语言。例如：粗俗。

如果用户输入任何粗俗的内容，字符将被替换为 * 。*示例 - 从愚蠢到 s * * * * **。

我一直在研究相关网站，但没有结果。对此的建议或教程将不胜感激。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-07-14T19:17:51.673

没有办法完全阻止“坏语言”的使用，但您可以尝试通过创建一个每行都包含一个坏词的文本文件来阻止它。然后将文件中的单词列表加载到`List<String>`程序中的 a 中。您可以通过执行以下操作来做到这一点：

```
// The list of swear words
List<string> swearWords = new List<string>();

private void GetSwearWords()
{
    // Get the path to the file that has the swear words list
    string path = <File Path>;

    // Open the text file
    TextReader reader = new StreamReader(path);

    // Loop through each line in the file.
    string line = "";
    while ((line = reader.ReadLine()) != null)
    {
       // Lower cases word and removes whitespaces
       string word = line.Trim().ToLower();

       // Adds the word to the list
       swearWords.Add(word);
    }
} 
```

然后，要确定字符串是否包含这些坏词之一，请执行以下操作：

```
private bool HasSwearWord(string text)
{
    // Splits words, removes whitespace and any punctuation
    string[] wordArray = Regex.Split(text, @"\W+");

    // Check if any word in the string is a swear word
    foreach (string word in wordArray)
    {
        if (swearWords.Contains(word.ToLower()))
        {
            return true;
        }
    }
    return false;
} 
```

# iphone - 全局通知横幅（如 GameKit 横幅）

> ID：11485728
> 
> 赞同：1
> 
> 时间：2012-07-14T17:09:10.843
> 
> 标签：iphone, objective-c, ios

我创建了一个下拉横幅系统，例如 GameKits（例如，当您获得成就时）。

我可以使用下面的代码轻松地在一个视图中显示横幅。但是，我所有的服务器代码都存储在一个单例类中，并且希望在其中发生某些事情时通知用户（无论他们在哪个视图控制器中）。我该怎么做呢？

```
[self displayBannerWithTitle: @"title here"]; 
```

提前致谢

# java - 无法连接到数据库

> ID：11485731
> 
> 赞同：0
> 
> 时间：2012-07-14T17:09:42.287
> 
> 标签：java, database, jakarta-ee

```
public class Db_try1 {

public static void main(String[] args)
{
String driver="oracle.jdbc.OracleDriver";
    String url="jdbc:oracle:thin:@localhost:1521:xe";
    String user="admin";
    String pass="admin";
    String sql="";
    Connection conn=null;
    try 
    {
        Class.forName(driver);
        System.out.println("Connecting to database Student.....");
        conn=DriverManager.getConnection(url,user,pass);

        Statement stmt = conn.createStatement();
        sql="select * from student";
        ResultSet rs= stmt.executeQuery(sql);
        System.out.println("Reading the data and printing...");
        while(rs.next())
        {
            System.out.println(rs.getInt("id"));
            System.out.println(rs.getString(1));
            System.out.println(rs.getString("mobile"));
        }
         rs.close();          stmt.close();          conn.close();
    }
    catch (Exception e)
    {
        // TODO Auto-generated catch block
                System.out.println("Error found");
        e.printStackTrace();

    }

}

} 
```

我正在使用 oracle 10g，当我在 netbeans 中单击 test connectin 时，我可以连接到数据库。但是当我运行这段代码时，我得到了异常 classnotfoundexception ..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-14T17:12:42.180

您需要添加`oracle.jdbc.OracleDriver`到您的类路径中，[将适当版本的 jar 添加](http://www.findjar.com/class/oracle/jdbc/OracleDriver.html)到应用程序的类路径中

# javascript - 如何获取动态添加的图像的宽度和高度？

> ID：11485738
> 
> 赞同：2
> 
> 时间：2012-07-14T17:10:05.300
> 
> 标签：javascript, jquery

我在获取一些动态添加的 img 标签的实际宽度和高度时遇到问题。这是我的代码：

```
var imgcont = $("<img src='' /> ");
imgcont.css("display","none").appendTo("body");`

$("div#lightbox ul").on("click","li", function(){
                    var source = $(this).children("img").attr("src");
                    console.log(imgcont.attr("src",source).width());
                })` 
```

如果我第一次单击，我会得到正确的宽度和高度值，但如果我第二次单击，我会得到前一个单击元素的值。为了获得正确的值，我必须再次单击同一元素。

如何在第一次单击时获得正确的 img 宽度和高度值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T17:14:15.397

您必须等到图像加载完毕才能访问其尺寸。

捕捉图像的`onload`事件来处理它。

```
imgcont.on('load', function() {
    console.alert(this.width);
}); 
```

`this.width`如果要获取图像的实际宽度属性，而*不是*其屏幕尺寸，请注意使用。它们可能不一样。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-14T17:15:45.573

```
$("div#lightbox ul").on("click", "li", function() {
    var source = $(this).children("img").attr("src");
    imgcont.attr("src", source).load(function() {  // after load finish
                                                   // get width

        console.log( this.width ); // according to @Alnitak comment
    });
}) 
```

# mysql - 选择所有字段（但一个）而不是使用 asterix (*) 将运行时间减少 10 倍

> ID：11485741
> 
> 赞同：4
> 
> 时间：2012-07-14T17:10:13.773
> 
> 标签：mysql, sql

> **可能重复：**
> [Sql 通配符：性能开销？](https://stackoverflow.com/questions/1867946/sql-wildcard-performance-overhead)

研究我的应用程序性能，我意识到查询：

```
SELECT * FROM (`static_cache`) WHERE `combined_name` =  'base' 
```

运行大约需要 0.0052 秒。当然，它可能不会很多，但是其中一些查询很快就会增加一些加载时间。进行实验时，我尝试仅选择查询中实际需要的字段（逻辑优化），从而产生查询：

```
SELECT `combined_name`, `timestamp`, `type`, `checksum` FROM (`static_cache`) 
       WHERE `combined_name` =  'base' 
```

但是，此查询只需 0.0005 秒即可运行。这快了**10 倍**，而我**没有选择的唯一字段是 id-column**。预计速度会提高，但不会提高 10 倍。是的，我反复测试过。

**这个查询的变化怎么可能会减少这么多的运行时间呢？**

# java - 在同步http请求中使用非阻塞io的优点

> ID：11485742
> 
> 赞同：2
> 
> 时间：2012-07-14T17:10:15.847
> 
> 标签：java, nio, apache-httpclient-4.x

当使用 http 客户端库向服务发出同步请求时，线程会被阻塞，直到返回数据。那么在同步http请求中使用非阻塞io有什么好处吗？

用例：使用 Spring MVC 开发的 Web 应用程序。对于某些请求，会对 REST 服务进行同步调用。使用使用 NIO 调用服务的 HttpClient 库是否有利？[Jetty HttpClient](http://docs.codehaus.org/display/JETTY/Jetty+HTTP+Client)使用非阻塞 IO。我不清楚 HttpComponents 的[HttpClient](http://hc.apache.org/httpcomponents-client-ga/index.html)是否支持 NIO。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-14T17:29:42.057

假设您实现了某种服务于多个客户端的服务。您需要通过 I/O 操作（文件访问、网络通信等）实现一定程度的并行性。否则，单个客户端可以阻止其他客户端。您现在有两个选择：

1.  您可以生成多个线程，每个线程都使用阻塞 I/O 操作。

2.  您使用单个线程（或很少）并使用非阻塞 I/O 操作。

使用非阻塞 I/O 实现解决方案通常要困难得多，因为您必须自己管理每个客户端的上下文。当您为每个客户端使用专用线程时，上下文自然是给定的（线程上下文 = 客户端上下文）。

如果您有大量慢速客户端，则非阻塞 I/O 值得额外的实现工作，因为您可以使用少量线程来处理它们。如果您为每个客户端使用一个线程，他们主要会坐在那里等待并且仍然会使用大量内存。

如果你不是在实现一个服务而是一个简单的应用程序，那么非阻塞 I/O 肯定不值得。

**更新**：如果我正确理解用例，您有一个 Web 应用程序，它不仅为 Web 客户端提供网页，还需要执行 REST 请求来为 Web 客户端提供服务。因此，如果您有大量并发客户端（几千个或更多）并且 REST 请求需要很长时间（几秒钟），那么非阻塞 I/O 可能是有意义的。但是您的 Web 服务器将需要支持*异步操作*，以便您可以将线程返回给服务器，直到 REST 请求完成。Servlert 3.0 规范引入了异步操作。因此，您需要一个最新的 Web 服务器，例如 Tomcat 7。

# php - 为什么这个 PHP mysql_query 没有从我的数据库中获取正确的信息？

> ID：11485743
> 
> 赞同：1
> 
> 时间：2012-07-14T17:10:15.147
> 
> 标签：php, mysql, database, arguments

我对此比较陌生，如果我在错误的地方发帖，请见谅。我的数据库中有一个表，其中包含 4 项内容 - id、输入时间以及用户和消息（对于基本的聊天室样式）。我正在尝试使用 PHP 页面调用这些。但是当我在地址栏中输入参数时，我的页面只是返回空白。我正在尝试调用它，以便仅显示用户列中具有特定用户的行。我的代码如下 - 任何人都可以看到我做错了什么吗？该文件的 URL 是[http://freedom-apps.co.uk/chat/messages.php](http://freedom-apps.co.uk/chat/messages.php)。您会看到大量条目 - 在开始时，有 umumu m。U代表用户输入，m是消息。所以我尝试了： [http://freedom-apps.co.uk/chat/messages.php?user=u](http://freedom-apps.co.uk/chat/messages.php?user=u) 返回错误。有任何想法吗？我的代码是：

```
<?php
header( 'Content-type: text/xml' );
mysql_connect('localhost:/var/lib/mysql/mysql.sock', 
              'freedom_ASAPPS', '********');
mysql_select_db( 'freedom_chat_alpha' );
if ( $_REQUEST['user'] ) {
    $user = mysql_escape_string($_REQUEST['user']);
    $result = mysql_query('SELECT * FROM chatitems WHERE user = '$user' 
              ORDER BY added LIMIT 50');
} else {
    $result = mysql_query('SELECT * FROM chatitems ORDER BY added LIMIT 50');    
}
?>
<chat>
<?php
while ($row = mysql_fetch_assoc($result)) {
?>
<message added="<?php echo( $row['added'] ) ?>" 
    id="<?php echo( $row['id'] ) ?>">
    <user><?php echo( htmlentities( $row['user'] ) ) ?></user>
    <text><?php echo( htmlentities( $row['message'] ) ) ?></text>
</message>
<?php
}
var_dump($result);
mysql_free_result($result);
?>
</chat> 
```

我认为第 6 行和第 7 行有问题，或者我用参数调用 php 页面的方式（见上文）。我指的是我用来学习这些东西的书，但仍然无法弄清楚（Learning PHP, MySQL, and JavaScript: A Step-by-Step Guide to Creating Dynamic Websites）。

谢谢，山姆

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-14T17:13:19.010

```
$result = mysql_query('SELECT * FROM chatitems WHERE user = '$user' ORDER BY added LIMIT 50'); 
```

这是一个语法错误 - 您缺少字符串连接运算符：

```
$result = mysql_query('SELECT * FROM chatitems WHERE user = ' . $user . ' ORDER BY added LIMIT 50');
                                                            ^^^------^^^^--- here 
```

或者，使用双引号字符串：

```
$result = mysql_query("SELECT * FROM chatitems WHERE user = '$user' ORDER BY added LIMIT 50"); 
```

得到一个空白页表明您在 php.ini 中关闭了 display_errors。您应该在调试/开发时打开它。你只是在射击自己的脚，隐藏了本来可以告诉你问题所在的信息。

# assembly - 汇编中的两条指令有什么区别？

> ID：11485745
> 
> 赞同：0
> 
> 时间：2012-07-14T17:10:38.330
> 
> 标签：assembly, x86

假设我在寄存器 ax 中有一个 2 字节大小的缓冲区和一些值（不是地址），现在我写

```
mov buffer,ax

mov [buffer],ax 
```

这些疑问对我来说很常见，因为我是组装新手。请给我推荐一些不错的文字，这样我就可以消除我对内存寻址的疑虑。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-14T18:15:49.360

没有区别！

编译器应该将两条指令编译成相同的操作码。方括号内的数字`[]`被认为是内存地址。

因为被`buffer`声明为单词 ptr ，所以不需要再次声明。

# api - 简单链接错误

> ID：11485749
> 
> 赞同：0
> 
> 时间：2012-07-14T17:10:57.737
> 
> 标签：api, linkedin

我已经在我的服务器上放置了简单的linkedin类并添加了我的api密钥等，但是当我调用演示页面时，我收到以下错误：

解析错误：语法错误，第 259 行 /home/mycv/public_html/dev/linkedin_3.2.0.class.php 中的意外 T_FUNCTION

这是行周围区域的代码：259

```
 if(is_array($http_code_required)) {
      array_walk($http_code_required, function($value, $key) {
    if(!is_int($value)) {
            throw new LinkedInException('LinkedIn->checkResponse():   $http_code_required must be an integer or an array of integer values');
        } 
```

第 259 行：似乎是指以 array walk 开头的第二行。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T06:43:57.540

匿名函数[仅在 PHP 5.3.0 中可用](http://php.net/manual/en/functions.anonymous.php)。上面的第 259 行使用了一个匿名函数，因此如果您的版本早于支持，这将解释错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-22T19:21:40.313

只需将匿名函数作为命名函数并在`checkResponse`函数中调用它：

```
function **innerfunction**($value, $key) {
    if(!is_int($value)) {
        throw new LinkedInException('LinkedIn->checkResponse(): $http_code_required must be an integer or an array of integer values');
    }
}

private function checkResponse($http_code_required, $response) {
    // check passed data
    if(is_array($http_code_required)) {
        array_walk($http_code_required, **innerfunction**($value, $key));
    }
} 
```

# prolog - 我如何提供 Prolog 向我提问的问题

> ID：11485750
> 
> 赞同：3
> 
> 时间：2012-07-14T17:10:59.423
> 
> 标签：prolog

假设我们有这样的 prolog 知识库：

```
guilty(X) :-
    commits(X,Y),
    crime(Y).
crime(murder).
crime(theft) 
```

当我问这个问题时：

```
?- guilty(john) 
```

我希望 Prolog 问我这样的问题：

```
is commits(john, murder) ? 
```

然后我回答**不**

```
is commits(john, theft) ? 
```

如果我回答**是**，Prolog 说

```
**yes** 
```

我怎么能做这样的事情？

谢谢..

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-15T19:20:23.607

你需要一个修改过的证明引擎，当遇到未知的事实时向用户查询。

做一些通用性可能是一项有趣的任务，Google for metainterpreter Prolog，如果您对这个论点感兴趣，第一个链接为您提供了 Markus Triska 的有价值的页面[A Couple of Meta-interpreters in Prolog](http://web.student.tuwien.ac.at/~e0225855/acomip/acomip.html)，您可以在其中了解更多信息。

对于您的问题，就足够了

```
commits(Person, Crime) :-
    crime(Crime),
    format('is ~w ?', [commits(Person, Crime)]),
    read(yes). 
```

测试：

```
?- guilty(john).
is commits(john,murder) ?no.
is commits(john,theft) ?yes.
true. 
```

请注意， read/1 需要一个点来终止输入。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T00:04:25.870

您需要一个“交互式外壳”来供您的小推理者使用。构建一个并不困难，但超出了 stackoverflow 问题的范围。本教程在第 2 或第 3 课中构建一个，并且通常会回答这个问题。它称您的用户回答“工作存储”之类的事实。

[http://www.amzi.com/ExpertSystemsInProlog/](http://www.amzi.com/ExpertSystemsInProlog/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-14T20:07:30.927

Prolog 从左到右“执行”事情。尝试：

```
guilty(X) :-
    crime(Y),
    commits(X,Y).
crime(murder).
crime(theft) 
```

那么有罪（X）取决于提交（X，谋杀）和/或提交（X，盗窃）

# html - https 页面上的哪些 URL 需要是 https？

> ID：11485752
> 
> 赞同：7
> 
> 时间：2012-07-14T17:11:22.930
> 
> 标签：html, ssl, https, ssl-certificate

我进行了搜索，但在这里找不到我的问题的答案。我感到困惑的是`https`页面上的 URL 需要是什么`https`，而不是`http`.

我正在制作我的网站必须访问的一系列页面`https`。页面顶部是一个菜单。`http`我不小心使用, 而不是将样式表包含到页面中`https`，并且我尝试过的所有浏览器都给了我关于不安全内容的警告。但是，我可以将菜单链接留在页面顶部，`http`没有问题。

那么，我是否正确地说正在*加载*到页面上的内容（例如样式表和图像）需要包含`https`在链接中，但是普通的旧`href`链接可以包含`http`在其中？

谢谢你的建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-14T17:16:05.860

是的，用于创建页面本身的所有链接（HTML、CSS、JavaScript、图像）都需要通过`https`. 这意味着该域的所有 URL 都需要通过`https`.

链接到其他网站就可以`http`了。您可能想检查是否也可以访问这些链接`https`，因为这样用户也将使用安全连接来访问这些网站。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-14T17:16:36.123

通常，您的安全页面（例如*购买*页面、*信用卡*等处理页面）设置为`https`或有时设置为所有页面，例如*银行或其他金融机构*的网站，甚至*登录*页面。

您可以通过使用所谓的**协议相对 URLS**将其留给浏览器进行解密`http`或部分，您只需不指定其中任何一个或仍然浏览器将能够弄清楚它。一个例子：`https`**`http``https`**

 **```
//example.com
//google.com 
```

假设您的域是`foo.com`，您将指定所有 URL，例如：

```
//foo.com/page1.html
//foo.com/otherpage 
```

因此，您只需将`http`or`https`部分留在您的 URL 中。

要了解有关协议相对 URL 的更多信息，请参阅：

*   [http://paulirish.com/2010/the-protocol-relative-url/](http://paulirish.com/2010/the-protocol-relative-url/)**

# python - 从 Python httplib 到 Erlang httpc

> ID：11485756
> 
> 赞同：1
> 
> 时间：2012-07-14T17:12:00.497
> 
> 标签：python, erlang, httplib

我想从 Python 中的这段代码切换到 Erlang：

Python：

```
import httplib

body="<xml>...</xml>"
headers = { \
"Accept" :  "text/*" , \
"User-Agent" : "Mozilla/4.0 (compatible; MSIE 6.0; Windows NT 5.1)" , \
"Host" : "something.com" , \
"Content-Length" : str( len( body ) ) , \
"Connection" : "Keep-Alive" , \
"Cache-Control" : "no-cache" , \
}
server="something.com"
url="/s.srf"

conn = httplib.HTTPSConnection(server,443)
conn.request("POST", url, body, headers) 
```

-> 我试过这个 Erlang：

```
Headers=[
        {"Accept","text/*"},
        {"User-Agent","Mozilla/4.0 (compatible; MSIE 6.0; Windows NT 5.1)"},
        {"Host","something.com"},
        {"Content-Length",string:len(Body)},
        {"Connection","Keep-Alive"},
        {"Cache-Control","no-cache"}
        ].
httpc:request(post,{Server,Headers,[],Body},[],[]). 
```

但我不知道我可以把网址“/s.srf”放在哪里，有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-14T17:46:43.590

[`request()`元组](http://www.erlang.org/doc/man/httpc.html#id80257)中的第一个元素应该是整个 URL，而不仅仅是服务器：

```
Url = "http://" ++ Server ++ "/s.srf",
httpc:request(post,{Url,Headers,[],Body},[],[]). 
```

您还在 Erlang 代码中使用整数设置 Content-Length 值。根据相同的文档，所有值都应为字符串类型：

```
{"Content-Length", integer_to_list(string:len(Body))} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-14T17:47:11.093

你应该把它包括在`Server`，例如

```
Server = "http://something.com/s.srf" 
```

鉴于此，您可能需要更改变量名称。（并且不要忘记包含协议！）。

**来源：[httpc 文档](http://www.erlang.org/doc/man/httpc.html#request-5)**

# c# - 获取json数据后Jquery点击事件未触发

> ID：11485759
> 
> 赞同：1
> 
> 时间：2012-07-14T17:12:35.450
> 
> 标签：c#, jquery, .net, asp.net-mvc-3

我正在使用 jQuery 开发 Asp.Net MVC3 应用程序。在特定页面上，邀请用户输入电话号码以搜索公司。因此，单击“搜索”按钮时，我使用 json 得到了一个结果（_Result 部分视图）。

另一方面，如果结果在多个页面上，当用户单击“下一步”按钮时，什么也没有发生。知道如果在单击“搜索”按钮之前单击“下一步”按钮，则会触发单击事件。

Next 按钮位于 _Result 局部视图中。

这是我的代码 HTML / Razor ：

```
<div>
<div>
    <span>Téléphone ?</span>
    <input id="idTxTel" type="text" name="txTelephone"/>

    <input id="idBnSearch" type="submit" value="Chercher" name="bnSearch"/>
</div>

@Html.Partial("_Result", Model)
</div> 
```

在 _Result 局部视图中

```
<div>
    <span>Page N sur M</span>
     <input id="bnPreviousPage" type="submit" value="Précédant" name="bnPrevious"/>
     <input id="bnNextPage" type="submit" value="Suivant" name="bnNext"/>
</div> 
```

这是我的 JS 代码：

```
<script type="text/javascript">
$(document).ready(function () 
{
    $("#idBnSearch").click(function () 
    {
        var telValue = $("#idTxTel").val();
        var methodUrl = '@Url.Content("~/Search/GetReverseResult/")';

        doReverseSearch(telValue, 0, methodUrl);
    });

    $("#bnNextPage").click(function (e) 
    {
        alert("Next cmd");
    });
});
    </script> 
```

我在另一个 JS 文件中的“doReverseSearch”方法

```
function doReverseSearch(telValue, pageIdx, methodUrl) 
{

    $.ajax(
        {
            url: methodUrl,
            type: 'post',
            data: JSON.stringify({ Telephone: telValue, pageIndex: pageIdx }),
            datatype: 'json',
            contentType: 'application/json; charset=utf-8',
            success: function (data) {
                $('#result').replaceWith(data);
            },
            error: function (request, status, err) {
                alert(status);
                alert(err);
            }
        });
} 
```

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-14T18:01:53.663

问题是您在文档准备好时订阅了click 事件，但是在您的 ajax 成功时，您替换了原来`#bnNextPage`的 DOM 部分。`#bnNextPage`因此，您的点击订阅现在是记录器活动的，只有在您尚未搜索时才有效。

要使其正常工作，您需要在 ajax 成功中重新订阅 click 事件：

```
success: function (data) {
                $('#result').replaceWith(data);
                $("#bnNextPage").click(function (e) 
                {
                     alert("Next cmd");
                });
         }, 
```

或者更好的解决方案：JQuery 使用[live](http://api.jquery.com/live/)方法提供“持久”订阅。如果您修改原始点击代码：

```
$("#bnNextPage").click(function (e) { alert("Next cmd"); }); 
```

到

```
$("#bnNextPage").live("click", function (e) { alert("Next cmd"); }); 
```

它可以在不修改您的`success`回调的情况下工作。

请注意，作为 JQuery 1.7，该`live`方法已被弃用，您应该改用[on](http://api.jquery.com/on/)方法。在您的情况下，订阅如下所示`on`：

```
$(document).on("click", "#bnNextPage", function (e) { alert("Next cmd"); }); 
```

# magento - 将 Magento 从服务器移动到 SuPHP 服务器

> ID：11485767
> 
> 赞同：0
> 
> 时间：2012-07-14T17:13:27.597
> 
> 标签：magento, suphp

我有一个不错的 Magento 服务器，需要移动到其他服务器主机

将 Magento 从 Php 5.2.17 服务器移动到 SuPHP 服务器

我所有的文件权限在新服务器上都是伪造的，没有任何作用。我需要更改什么，或者将 Magento 移动到 SuPHP 服务器的正确方法是什么（来自非 SuPHP）

方法 1 -> 当前流程：

**旧服务器**

1.  删除会话/缓存/等
2.  tar gz all + SQL 转储

**新服务器（SuPHP）**

1.  解压 gz + 上传 SQL
2.  在 local.xml 中更新 SQL 服务器
3.  更新数据库中的 core_config

方法 2 -> 想法

1.  重新安装+上传旧数据库
2.  仅复制某些文件夹（但后来我不知道如何复制扩展名等）

**我应该/可以改变什么来使 Magento SUPHP 工作？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-14T18:23:58.643

SuPHP 文件权限要求将目录设置为 755，将文件设置为 644，并将文件的所有权设置为 SuPHP 期望的用户和组。

通常在 SuPHP 下，用户和组所有者具有相同的名称，将 $user 替换为您分配的帐户名称。以下是在 Magento 的根目录中执行的。

```
chown -R $user.$user *

find . -type f -exec chmod 644 {} \;
find . -type d -exec chmod 755 {} \;
chmod 550 pear
chmod 550 mage #for magento 1.5+ 
```

在旧系统上进行 tar 文件和数据库备份之前，请帮自己一个忙，进入 Magento Admin 并禁用所有缓存并确保关闭编译器。

这将使您免于在新服务器上遇到某些问题，直到您更改了 baseURL 设置并正确设置了文件/目录权限。在您启动并正常运行 Magento 之后，启用 Magento 缓存**。**确保一切都在运行，刷新缓存，然后（如果您之前使用过）重新编译并且仅在重新编译之后，然后启用编译器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T17:30:36.053

添加我的经验日志。感谢 Fiasco Labs。

主要步骤

**在旧服务器上**

1.  重要的！在管理员中禁用缓存，删除，清除任何缓存（也来自缩放，APC 等扩展）
2.  遵循以下指南（在 tar.gz 中创建站点备份）
3.  通过提示或通过 directadmin 或其他方式执行 SQL 转储

**在新服务器上**

1.  将 tar 放在公共 html 中并提取（也可以通过 directadmin filemgr 完成）
2.  上传 SQL
3.  更新 local.xml 中的设置
4.  更新数据库中 core_config 中的 url
5.  设置 chmod app/etc/local.xml 600（不写入停止日志中的错误消息）

* * *

```
# GOTO MAGENTO ROOT PUBLIC_HTML
mkdir ../backup
cp -rf * ../backup
cd ../backup

# VERIFY THAT YOU ARE IN DIRECTORY BACKUP
# REMOVE ALL CACHE RELATED FILES IN HET BACKUP FOLDER
rm -rf var/cache/* var/session/* var/zoom/* var/minifycache/* downloader/pearlib/cache/* downloader/pearlib/download/* downloader/pearlib/download/* downloader/pearlib/pear.ini var/cache/* var/backups/* var/report/* var/log/* var/locks/*

# SET FILE RIGHTS CORRECTLY FOR SUPHP
find . -type f -exec chmod 644 {} \;
find . -type d -exec chmod 755 {} \;
chmod 550 lib/pear
chmod 550 mage

# MAKE DIRS READABLE
chmod -R 777 var media
chmod 777 media var/cache/ var/session/ var/zoom/ var/minifycache/ downloader/pearlib/cache/ downloader/pearlib/download/ downloader/pearlib/download/ downloader/pearlib/ var/cache/ var/backups/ var/report/ var/log/ var/locks/

# TAR AND GZ
tar -czpf backup_mage.tar.gz . 
```

# jquery - 用跨度将单词包裹在段落中，保持嵌套链接正常运行

> ID：11485773
> 
> 赞同：3
> 
> 时间：2012-07-14T17:14:54.053
> 
> 标签：jquery, split, html

在保持任何嵌套链接正常运行的同时，我如何将段落中的每个单词都用一个 span 包裹起来？[从这里](https://stackoverflow.com/a/10442959/1525810)使用下面的代码我很接近，但是在空格上分割会在`a`和`href`结果之间插入一个跨度，结果如下：

```
<p><span><a< span> <span>href="#"&gt;this</span></a<></span></p> 
```

这显然会使链接无法使用。

```
$('p').each(function() {

var text = $(this).html().split(/\s+/),//split on space
    len = text.length,
    result = []; 

for( var i = 0; i < len; i++ ) {
    result[i] = '<span>' + text[i] + '</span>';
}
$(this).html(result.join(' '));
}); 
```

Jsfiddle [here](http://jsfiddle.net/psflannery/JRF2z/27/)也许更好地说明了我的观点。谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-14T17:56:04.353

问题是您不想*在*`"<span>"`其他标签中随机插入标签。生成的 html 如下：将成为一个问题，你是否曾经得到一个。*`<img <span>src="blahblah"</span>>`*

 *您可以使用正则表达式来匹配 HTML 中的标签，并且只将`<span>`标签添加到其他所有内容。可能并不完美，但类似于：

```
$('p').each(function() {

    var tagRE = /([^<]*)(<(?:\"[^\"]*\"|'[^']*'|[^>'\"]*)*>)([^<]*)/g,
        match,
        result = [],
        i = 0;

    while(match = tagRE.exec($(this).html())) {
        var text1 = match[1].split(/\s+/),
            len1 = text1.length;

        var text2 = match[3].split(/\s+/),
            len2 = text2.length;

        for(var tIdx = 0; tIdx < len1; tIdx++ )
            result[i++] = '<span>' + text1[tIdx] + '</span>';           

        result[i++] = match[2];

        for(var tIdx = 0; tIdx < len2; tIdx++ )
            result[i++] = '<span>' + text2[tIdx] + '</span>';          
    }

    $(this).html(result.join(' '));

}); 
```

[http://jsfiddle.net/5wabK/](http://jsfiddle.net/5wabK/)

这可能有点低效，但我不得不在开始和结束时使用一个组，以便捕获第一个标签之前和最后一个标签之后的所有内容。*

# c++ - 关于 swap() 操作的异常安全——这有什么问题？

> ID：11485776
> 
> 赞同：10
> 
> 时间：2012-07-14T17:15:32.320
> 
> 标签：c++, exception, exception-handling, exception-safety

我一直在阅读该`swap()`操作，例如：

```
template<class T>
void swap (T &a, T &b)
{
  T temp (a);
  a = b;
  b = temp;
} 
```

当我们处理异常安全时是有问题的。

它有什么问题？此外，我们该如何解决呢？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-07-14T17:23:55.993

在一般实现中，假设`T`can的任何操作`throw`，您都无法提供强异常保证，这意味着在异常事件发生时将状态完全保留在操作之前的状态。即使每个操作都`T`提供了强大的异常保证：

```
template<class T>
void swap (T &a, T &b)
{
  T temp (a);          // [1]
  a = b;               // [2]
  b = temp;            // [3]
} 
```

如果 [1] 抛出，输入保持不变，这很好。如果 [2] 抛出，并假设强异常保证，这些值仍然保持不变，这很好。但是如果是 [3] 抛出的，`a`已经被修改了，这意味着异常向上传播后，调用者将处于一个既不是原始状态也不是最终状态的状态。

* * *

*编辑：此外，我们如何解决它？*

没有通用的解决方案。但在大多数情况下，您可以`swap`为您的类型提供异常安全操作。考虑 a ，它通过使用三个指针 ( , , )`vector<T>`在内部管理它的状态。上面的一般可以抛出（分配失败，内部的构造函数可能会抛出......），但提供无抛出实现是微不足道的：`begin``end``capacity``swap``T``swap`

```
template <typename T>
class vector {
   T *b,*e,*c;
public:
   void swap( vector<T>& rhs ) {
      using std::swap;
      swap( b, rhs.b );
      swap( e, rhs.e );
      swap( c, rhs.c );
   }
//...
};
template <typename T>
void swap( vector<T>& lhs, vector<T>& rhs ) {
   lhs.swap(rhs);
} 
```

因为指针的复制不能抛出，所以`swap`上面提供了不抛出保证，如果你总是`swap`按照上面的模式实现（`using std::swap;`后面跟着不合格的调用`swap`），ADL 将把它作为比`std::swap`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-14T17:37:01.943

丹尼尔当然是对的。

但是你不应该忘记，当涉及到异常安全时，交换主要被认为是解决方案的一部分（“复制和交换成语”），而不是问题。剩下的问题是，如果你采用这个习惯用法，你必须确保 swap 可能调用的复制构造函数不会抛出异常，原因 Daniel 解释过。

请参阅：[什么是复制和交换习语？](https://stackoverflow.com/questions/3279543/what-is-the-copy-and-swap-idiom)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-14T21:54:11.300

异常的来源已经说明

`unsigned byte*`但是您可以通过将参数强制转换为并逐字节交换来避免异常，`sizeof(T)`注意这不会调用对象上的任何构造函数或析构函数，这可能会在进行一些自引用时违反某些先决条件（当`a`指向`b`交换之后`a`将指向`a`)

这就是 D 标准库中的交换如何执行此操作（在检查自引用之后）

# javascript - 删除评论而不刷新页面

> ID：11485780
> 
> 赞同：0
> 
> 时间：2012-07-14T17:16:12.260
> 
> 标签：javascript, php, ajax

想知道如何改进此代码以在删除评论时启用不刷新页面。如果您在页面的一半处删除评论并且它会恢复到顶部，这会很烦人。

AJAX

```
 function delete_(pid){
    $.ajax({
       type: "POST",
       url: "../include/post.delete.php",
       data: "pid="+pid,
       success: function(){
       }
     });
    }

DELETEPOST
    echo'<div class="userinfo"><div id="divider">';

            if($streamitem_data['streamitem_type_id'] == 1||$streamitem_data['streamitem_type_id'] == 3){
                echo "";
                }else{
                echo "";
                }

                $poster_name = _user_core::getuser($streamitem_data['streamitem_creator']);
                $target_name = _user_core::getuser($streamitem_data['streamitem_target']);

            if($streamitem_data['streamitem_type_id'] == 1||$streamitem_data['streamitem_type_id'] == 3){
            if(!($streamitem_data['streamitem_type_id']==1)) {

                echo "<a href='/profile.php?username=".$poster_name['username']."'><img class='stream_profileimage' style='border:none;padding:0px;display:inline;' border=\"0\" src=\"imgs/cropped".$streamitem_data['streamitem_creator'].".jpg\" onerror='this.src=\"img/no_profile_img.jpeg\"' width=\"40\" height=\"40\" ></a>";

echo "<a href='/profile.php?username=".$target_name['username']."'><img class='stream_profileimage' style='border:none;padding:0px;display:inline;' border=\"0\" src=\"imgs/cropped".$streamitem_data['streamitem_target'].".jpg\" onerror='this.src=\"img/no_profile_img.jpeg\"' width=\"40\" height=\"40\" ></a>";
            }
                if(!($streamitem_data['streamitem_type_id']==3)) {
                echo "<a href='/profile.php?username=".$poster_name['username']."'><img class='stream_profileimage' style='border:none;padding:0px;display:inline;' border=\"0\" src=\"imgs/cropped".$streamitem_data['streamitem_target'].".jpg\" onerror='this.src=\"img/no_profile_img.jpeg\"' width=\"40\" height=\"40\" ></a>";

                }
                    $cont = stripslashes($streamitem_data['streamitem_content']);

                    if(!($streamitem_data['streamitem_type_id']==1)){
                    //$cont = htmlentities($cont);
                    $cont = ereg_replace("[[:alpha:]]+://[^<>[:space:]]+[[:alnum:]/]","<a class='user_link' href=\"\\0\">\\0</a>", $cont);

                    }

                    if($streamitem_data['streamitem_creator']==$streamitem_data['streamitem_target']){
                        echo "<a href='/profile.php?username=".$poster_name['id']."'>" . $poster_name['fullusersname']."</a><span class='subtleLink'> said </span>";
                    }else{
                        echo "<a href='profile.php?username=".$poster_name['username']."'>" .$poster_name['fullusersname']."</a>  
                        <span class='subtleLink'>wrote on </span>
                              <a href='profile.php?username=".$poster_name['username']."'>" .$target_name['fullusersname']." 's</a> stream";
                    }
                    echo "<br/><a href='#' class='subtleLink' style='font-weight:normal;'>".Agotime($streamitem_data['streamitem_timestamp'])."</a></div><hr><div style='padding-left:10px;padding-right:10px;'>";

                    if($streamitem_data['streamitem_type_id']==1){
                    $cont = nl2br($cont);
                    echo "<span class='subtleLink'>".$cont."</span>";
                    }else{

                        if($streamitem_data['streamitem_creator']==$streamitem_data['streamitem_target']){
                        $cont = nl2br($cont);
                            echo "<div>".$cont."</div>";
                        }else{
                        $cont = nl2br($cont);
                        echo "<div>'".$cont."</div>";

                        }

                    }

        echo "</div><div class='post_contextoptions'>";
    if($streamitem_data['streamitem_creator']==$_SESSION['id']){
        echo "<div class='stream_option' id='delete_option'><form style='display:inline;' id='delete_".$streamitem_data['streamitem_id']."'  action='include/post.delete.php' method='POST' target='ifr2'><input type='hidden' name='pid' value='".$streamitem_data['streamitem_id']."'><a style='cursor:pointer;position:relative;top:-70px;float:right;padding-right:5px;' onClick='document.forms[\"delete_".$streamitem_data['streamitem_id']."\"].submit();refreshstream();'>X</a></div>"; 
```

}

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-14T17:36:44.283

您需要调用`.remove()`刚刚删除的评论元素。您将需要弄清楚如何识别它。有一种方法：

```
function delete_(pid){
    $.ajax({
       type: "POST",
       url: "../include/post.delete.php",
       data: "pid="+pid,
       success: function(){
           // However you can identify the comment's div, and delete it by calling .remove()
           // This is if it has a unique id
           $("#comment-"+pid).remove();
       }
     });
} 
```

否则，如果您使用过，`<a href="javascript:delete_(pid);">`您可以添加一个参数，例如`<a href="javascript:delete_(pid, this);">`. 这样你就可以通过`$(the_element_you_passed_to_the_function).parents("div.the-comment-div-parent").remove()`例如元素。

`$("a").click(function {});`否则，如果您使用此方法，您可以在内部实现此功能。由你决定。

# jquery - 在 MVC3 中使用模式弹出窗口上传文件

> ID：11485781
> 
> 赞同：0
> 
> 时间：2012-07-14T17:16:18.507
> 
> 标签：jquery, asp.net-mvc-3

我正在尝试使用 MVC3 中的模式弹出窗口来实现文件上传。上传文件时，控制器接收 null 而不是文件名。这个功能可以在 MVC3 中实现吗？
jQuery如下，

控制器代码：

"

```
[HttpPost]
        public ActionResult Upload(HttpPostedFileBase file)
        {

            var fileName = "";
            var path = "";
            string file1 = "";
            if (ModelState.IsValid)
            {
                if (file.ContentLength > 0)
                {
                    fileName = Path.GetFileName(file.FileName);
                    path = Path.Combine(Server.MapPath("~/Content/"), fileName);
                    file.SaveAs(path);
                }
            }
            return RedirectToAction("Create","Manager",new{file1=fileName});
        } 
```

" "

```
 var linkObj;
    $(function () {
        $(".editLink").button();

        $('#updateDialog').dialog({
            autoOpen: false,
            width: 400,
            resizable: false,
            modal: true,
            buttons: {
                "Update": function () {
                    $("#update-message").html(''); //make sure there is nothing on the message before we continue                         
                    $("#updateCarForm").submit();
                },
                "Cancel": function () {
                    $(this).dialog("close");
                }
            }
        });

        $(".editLink").click(function () {
            //change the title of the dialgo
            linkObj = $(this);
            var dialogDiv = $('#updateDialog');
            var viewUrl = linkObj.attr('href');
            $.get(viewUrl, function (data) {
                dialogDiv.html(data);
                //validation
                var $form = $("#updateCarForm");
                // Unbind existing validation
                $form.unbind();
                $form.data("validator", null);
                // Check document for changes
                $.validator.unobtrusive.parse(document);
                // Re add validation with changes
                $form.validate($form.data("unobtrusiveValidation").options);
                //open dialog
                dialogDiv.dialog('open');
            });
            return false;
        });

    });

    function updateSuccess() {
        if ($("#update-message").html() == "True") {
            //we update the table's info
            var parent = linkObj.closest("tr");
            parent.find(".carName").html($("#Name").val());
            parent.find(".carDescription").html($("#Description").val());
            //now we can close the dialog
            $('#updateDialog').dialog('close');
            //twitter type notification
            $('#commonMessage').html("Update Complete");
            $('#commonMessage').delay(400).slideDown(400).delay(3000).slideUp(400);
        }
        else {
            $("#update-message").show();
        }
    }

</script> 
```

"

脚本加载文件。

"

```
<% using (Ajax.BeginForm("Upload", "Manager", null,
        new AjaxOptions
        {
            UpdateTargetId = "update-message",
            InsertionMode = InsertionMode.Replace,
            HttpMethod = "POST",
            OnSuccess = "updateSuccess"
        }, new { @id = "updateCarForm" }))

    { %> 
    <div class="editor-field" id="error invisible"></div>
    <fieldset>
      <div>
        <input type="file" name="file" id="file"/>

      </div>
         <div>   
           <input type="submit"  value="Save" />
         </div>
    </fieldset>
<% } %> 
```

"

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-16T14:17:07.647

不幸的是 Ajax.BeginForm 不能上传文件。您将不得不使用 IFrame 或类似工具来“伪造”它。尝试签出

[http://www.webtoolkit.info/ajax-file-upload.html](http://www.webtoolkit.info/ajax-file-upload.html)

例如。

干杯菲尔

# android - 从 URL 裁剪图像

> ID：11485797
> 
> 赞同：1
> 
> 时间：2012-07-14T17:18:19.173
> 
> 标签：android, android-intent

我有以下内容：

图片所在位置的很长的 URL（在互联网上）

```
String imageAddress = data.getExtras().get("imageHTTP").toString(); 
```

返回很好，并且有一个以 .jpg 结尾的图像

下一部分是我遇到问题的地方。基本上我有一个接受 Uri 的作物意图，但以下不起作用：

```
Uri imageUri = Uri.parse(imageAddress);
Intent intent = new Intent(this, com.android.camera.CropImage.class);
intent.setData(uri);
intent.putExtra("return-data", true);
startActivityForResult(intent, CROP); 
```

有任何想法吗？

以下错误代码：

```
got exception decoding bitmap 
java.lang.NullPointerException
at com.android.camera.Util.makeInputStream(Util.java:337) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-15T15:30:32.810

我想通了。更容易将其保存到 sdcard 临时然后裁剪，然后删除临时的。之后我通过下载的裁剪库运行它（不知道从哪里下载它，但有一些）。

```
File file = null;

            try {
                URL myImageURL = new URL(imagePath);
                HttpURLConnection connection = (HttpURLConnection)myImageURL.openConnection();
                connection.setDoInput(true);
                connection.connect();
                InputStream input = connection.getInputStream();

                // Get the bitmap
                Bitmap myBitmap = BitmapFactory.decodeStream(input);

                // Save the bitmap to the file
                String path = Environment.getExternalStorageDirectory().toString() + "/polygonattraction/app/";
                OutputStream fOut = null;
                file = new File(path, "temp.png");
                fOut = new FileOutputStream(file);

                myBitmap.compress(Bitmap.CompressFormat.PNG, 85, fOut);
                fOut.flush();
                fOut.close();
            }
            catch (IOException e) {}

            Log.w("tttt", "got bitmap");

            Uri uri = Uri.fromFile(file); 
```

# objective-c - 图像与图像或密钥数据库的比较

> ID：11485800
> 
> 赞同：4
> 
> 时间：2012-07-14T17:18:41.793
> 
> 标签：objective-c, macos, image-processing, opencv, image-recognition

我今天大部分时间都在尝试找到某种功能来为已知图像生成密钥，以便稍后进行比较以确定图像是什么。我尝试使用 SIFT 和 SURF 描述符，它们都太慢（并且已获得商业用途专利）。我最近的尝试是使用以下方法创建 dct 哈希：

```
 int mm_dct_imagehash(const char* file, float sigma, uint64_t *hash){

    if (!file)  return -1;
    if (!hash) return -2;

    *hash = 0;

    IplImage *img = cvLoadImage(file, CV_LOAD_IMAGE_GRAYSCALE);
    if (!img) return -3;

    cvSmooth(img, img, CV_GAUSSIAN, 7, 7, sigma, sigma);

    IplImage *img_resized = cvCreateImage(cvSize(32,32), img->depth, img->nChannels);
    if (!img_resized) return -4;

    cvResize(img, img_resized, CV_INTER_CUBIC);

    IplImage *img_prime = cvCreateImage(cvSize(32,32), IPL_DEPTH_32F, img->nChannels);
    if (!img_prime) return -5;

    cvConvertScale(img_resized, img_prime,1, 0);

    IplImage *dct_img = cvCreateImage(cvSize(32,32), IPL_DEPTH_32F, img->nChannels);
    if (!dct_img) return -6;

    cvDCT(img_prime, dct_img, CV_DXT_FORWARD);

    cvSetImageROI(dct_img, cvRect(1,1,8,8));

    double minval, maxval;
    cvMinMaxLoc(dct_img, &minval, &maxval, NULL, NULL, NULL);

    double medval = (maxval + minval)/2;

    int i,j;
    for (i=1;i<=8;i++){
        const float *row = (const float*)(dct_img->imageData + i*dct_img->widthStep);
        for (j=1;j<=8;j++){
            if (row[j] > medval){
                (*hash) |= 1;
            }
            (*hash) <<= 1;
        }
    }

    cvReleaseImage(&img);
    cvReleaseImage(&img_resized);
    cvReleaseImage(&img_prime);
    cvReleaseImage(&dct_img);

    return 0;
} 
```

这确实产生了我正在寻找的那种类型的东西，但是当我尝试将它与已知哈希的数据库进行比较时，我的误报与我的正数一样多。所以，我又回来了，我想我可能会问专家。

你们中的任何人都知道/有一个功能可以为我提供某种标识符/校验和，用于提供的图像，在相似的图像中保持相似，因此它可以用于通过与数据库的比较来快速识别图像？简而言之，图像最匹配的校验和类别是什么？

我不是在寻找理论、概念、论文或想法，而是在寻找实际可行的解决方案。我不会再花一天时间在死胡同里挖掘，感谢任何花时间整理一些代码的人。

* * *

**通过更多研究，我知道 autoit 开发人员设计了 pixelchecksum 以使用“Adler-32”算法。我想下一步是找到 ac 实现并让它处理像素数据。欢迎任何建议！**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-15T02:30:15.960

谷歌搜索“微软图像哈希”在我所知道的关于该主题的两篇最佳论文中排名靠前。两者都提供了实用的解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-15T20:09:27.903

简短的回答是，没有针对您的问题的开箱即用的解决方案。此外，Adler-32 算法不会解决您的问题。

不幸的是，使用图像签名（或相关概念）通过视觉相似性比较图像是一个非常活跃和开放的研究课题。例如，您说您的测试中有很多误报。但是，什么是正确或不正确的结果是主观的，取决于您的应用程序。

在我看来，解决您的问题的唯一方法是为您的问题找到一个足够的图像描述符，然后使用它来比较图像。请注意，比较从图像中提取的描述符并非易事。

# regex - 在记事本++中使用正则表达式从字符串中提取单词

> ID：11485801
> 
> 赞同：0
> 
> 时间：2012-07-14T17:18:54.533
> 
> 标签：regex, string

`('Hassiotis, Sophia(SH1)')`我有一个字符串，即

我只想要 SH1。

正则表达式应该是什么？

谢谢你。

我正在使用记事本++

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-14T18:21:27.787

从你的问题来看`SH1`就足够了;-)，但我怀疑你不想有更灵活的东西。

```
\('.*\((.*)\)'\) 
```

可能是一个解决方案。我猜它需要更新的 Notepad++。匹配的字符串可以`\1`在替换字符串中引用。

# servlets - 关于部署时servlet中的错误

> ID：11485805
> 
> 赞同：-1
> 
> 时间：2012-07-14T17:19:38.373
> 
> 标签：servlets

我开发了一个简单的servlet，如下所示..通过在eclipse中选择dynamci项目在eclipse中......

小服务程序是..

```
package com.demo;

import java.io.IOException;
import java.io.PrintWriter;

import javax.servlet.ServletException;
import javax.servlet.annotation.WebServlet;
import javax.servlet.http.HttpServlet;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;

    public class Myservlet2 extends HttpServlet {
        private static final long serialVersionUID = 1L;

        protected void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {

            System.out.println("Servlet 2 of App2 invoked...");
             response.setContentType("text/html");
             PrintWriter out=response.getWriter();
             out.println("This output is generated by servlet2 of app2");
             out.close();

        }
    } 
```

而 web.xml 是......

```
 <servlet>
<servlet-name>Myservlet2</servlet-name>
<servlet-class>com.demo.Myservlet2</servlet-class>
</servlet>
<servlet-mapping>
<servlet-name>Myservlet2</servlet-name>
<url-pattern>/servlet2</url-pattern>
</servlet-mapping> 
```

通过eclipse将它部署到tomcat上后，出现以下错误。

```
java.lang.ClassNotFoundException: com.demo.Myservlet2
    at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1711)
    at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1556)
    at org.apache.catalina.core.DefaultInstanceManager.loadClass(DefaultInstanceManager.java:525)
    at org.apache.catalina.core.DefaultInstanceManager.loadClassMaybePrivileged(DefaultInstanceManager.java:507)
    at org.apache.catalina.core.DefaultInstanceManager.newInstance(DefaultInstanceManager.java:124)
    at org.apache.catalina.core.StandardWrapper.loadServlet(StandardWrapper.java:1136)
    at org.apache.catalina.core.StandardWrapper.allocate(StandardWrapper.java:857)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:136)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:169)
    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:168)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:98)
    at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:927)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
    at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:999)
    at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:565)
    at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:309)
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(Unknown Source)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)
    at java.lang.Thread.run(Unknown Source) 
```

请如何纠正。在此先感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-14T18:58:50.840

检查该类`com.demo.MyServlet2`是否存在于`WEB-INF/classes`或位于位于的库 jar 中`WEB-INF/lib`

# google-maps-api-3 - 来自 Google Maps Polygon getPath() 的 LatLng

> ID：11485806
> 
> 赞同：15
> 
> 时间：2012-07-14T17:19:45.677
> 
> 标签：google-maps-api-3

根据[Google Maps JavaScript API v3 文档](https://developers.google.com/maps/documentation/javascript/reference#Polygon)，`google.maps.Polygon`类的`getPath()`函数返回一个`MVCArray`. 在一个简单的例子中，Polygon 的路径可以是一个数组，它在传递给 google.maps.Polygon 类的函数时被`LatLngs`转换为类型。`MVCArray``setPath()`

上述案例是我目前正在处理的。当我调用我的 Polygon 对象时，我传入一个数组`LatLngs`，并返回（我假设是）一个。我的问题是：如何将其转换回多边形形状的单个数组？是否有一些我缺少的内置 Google Maps API v3 方式？我觉得必须有某种明显的内置转换功能或 API 中的某些东西让我望而却步。`MVCObject``getPath()``MVCObject``LatLngs`

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-07-14T17:45:56.183

当您调用`Polygon.getPath()`[^(api-doc)](https://developers.google.com/maps/documentation/javascript/reference#Polygon)时，返回的是一个`MVCArray`[^(api-doc)](https://developers.google.com/maps/documentation/javascript/reference#MVCArray)实例，这些`LatLng`实例代表`Polygon`. `MVCAarray`您可以通过两种方式直接获取成员：

1.  Call `MVCAarray.getArray`，它将返回`Array`包含`LatLng`成员的底层 JavaScript。
2.  使用`MVCArray.getAt( index )`，它将返回`MVCArray`（`LatLng`在本例中为 a ）中该索引处的任何内容。这为您提供了一种设置 JavaScript`for`循环以遍历数组成员的方法。

`MVCArray`您还可以通过使用该`forEach(callback:function(*, number))`函数间接与 的成员一起工作。在这种情况下，您必须传递一个接受两个参数的回调函数：

1.  的实际成员元素`MVCArray`。
2.  该元素所在的数组索引。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2019-07-07T11:34:03.477

```
 var polygonBounds = polygon.getPath();
    var bounds = [];
    for (var i = 0; i < polygonBounds.length; i++) {
          var point = {
            lat: polygonBounds.getAt(i).lat(),
            lng: polygonBounds.getAt(i).lng()
          };
          bounds.push(point);
     } 
```

# ember.js - 带有路由器错误的 Emberjs 最新版本：没有方法“finishPartial”

> ID：11485807
> 
> 赞同：1
> 
> 时间：2012-07-14T17:19:46.353
> 
> 标签：ember.js

[我刚刚从这个 jsfiddle](http://jsfiddle.net/C7LrM/59/)更新到 EmberJS 的版本。

控制器/视图：

```
App = Em.Application.create();

// Instantiated and wired up for you in App.initialize()
App.ApplicationController = Em.Controller.extend();
App.ApplicationView = Em.View.extend({
  templateName: 'application'
});
App.NavbarController = Em.Controller.extend();
App.NavbarView = Em.View.extend({
  templateName: 'navbar'
});
// Your stuff
App.HomeController = Em.Controller.extend({});
App.HomeView = Em.View.extend({
  templateName: 'home'
});

App.ProfileController = Em.Controller.extend({});
App.ProfileView = Em.View.extend({
  templateName: 'profile'
});

// Nested views in the profile
App.PostsController = Em.Controller.extend({});
App.PostsView = Em.View.extend({
  templateName: 'posts'
});

App.PhotosController = Em.Controller.extend({});
App.PhotosView = Em.View.extend({
  templateName: 'photos'
}); 
```

我一直在使用新的路由器，但出现了一些奇怪的行为，并希望更新可以解决它，不幸的是我现在收到以下警告和错误：

```
WARNING: Computed properties will soon be cacheable by default. To enable this in your app, set ENV.CP_DEFAULT_CACHEABLE = true. vendor.js:54720
Uncaught TypeError: Object function () { return initMixin(this, arguments); } has no method 'finishPartial' vendor.js:42905 
```

有人知道这里可能会发生什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-16T07:22:48.070

以您的 jsfiddle 作为起点，我唯一的错误是使用 Em.State 而不是 Em.Route 来定义路由器。

使用最新版本的 ember，您必须使用 Em.Route。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T17:21:56.663

该错误表明您的代码在您应该对函数的结果进行操作时尝试调用函数的方法。例如`myFunction.finishPartial();`，而不是`myFunction().finishParital();`

Em.Mixin 的快速谷歌让我提出了这个疯狂的猜测：

`Em.Mixin.create().finishPartial(this)`

# javascript - 如何去除javascript数组中字符串的一部分

> ID：11485808
> 
> 赞同：0
> 
> 时间：2012-07-14T17:19:47.833
> 
> 标签：javascript

我有几个与此类似的数组：

```
exampleArray=new array(
"A01 - Blah Blah Blah",
"A01A - Blah Blah Blah Blah") 
```

我正在使用这些数组来填充表单中的选项，并且我需要删除第一个空格之后的所有内容（即“ - Blah Blah Blah”）以获取给定选项的值。当前正在使用以下代码生成选项和值：

```
for(i=0; i<optionStepTwo.length; i++) {
    elementStepTwo.options[elementStepTwo.options.length] = 
            new Option(optionStepTwo[i], optionStepTwo[i]);
}; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T17:22:36.053

您可以在“”（空格）之后进行[拆分，例如：](http://www.w3schools.com/jsref/jsref_split.asp)

```
var desiredOption = optionStepTwo[i].split(" ")[0] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-14T17:23:09.167

要在第一个空格处截断字符串：

```
var myStringBeforeFirstSpace = myString.split(" ")[0]; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-14T17:24:46.520

如果您尝试仅在第一个空格处拆分。

```
var string = 'A01A - Blah Blah Blah Blah';
var firstSpace = string.indexOf(' ');
alert(string.substr(0, firstSpace));​​​​​​​​​​​​​​​​​​​​​​​​​ 
```

**[工作示例](http://jsfiddle.net/g6csw/)**

# c# - 涉及大批量插入的长时间过程

> ID：11485809
> 
> 赞同：0
> 
> 时间：2012-07-14T17:20:01.130
> 
> 标签：c#, mysql, c#-4.0, mysql-5.0

我有一个需要很多时间的过程，我正在寻找减少它的方法。过程是这样的：

*   系统管理员向文本框写入 10-20 行（每行 1-3 个字）
*   删除所有空的和只有空白的行
*   系统将每一行与 3000 个不同的后缀相乘（我的后缀是指额外的 1-2 个单词）
*   检查重复行并将其删除
*   检查非法字符并在此过程中与数据库重复 - 如果发现任何 - 删除该行。
*   对于每一行：
    *   Select a line id (for parent id) - 这是一个查询，例如：select parentid from table where name='son'
    *   插入带有父 id 的行

正如我所看到的，每行插入花费的时间最长，但父 ID 是必要的（它是新行之一）。除其他外，该表具有 id、name 和 parent id。代码是用c#编写的，与mysql一起工作。

对于解决方案，我认为唯一的可能是将代码转换为完整的 mysql 存储过程，但我不确定它会有多大帮助。

# visual-studio-2012 - “SqlStudio 配置文件包”包未正确加载

> ID：11485821
> 
> 赞同：10
> 
> 时间：2012-07-14T17:21:27.957
> 
> 标签：visual-studio-2012, sql-server-2012

当我启动 VS 2012 RC 时，我收到以下加载错误消息：

```
The 'SqlStudio Profile Package' package did not load correctly.

The problem may have been caused by a configuration change or by the installation
of another extension. You can get more information by examining the file 
'C:\Users\User\AppData\Roaming\Microsoft\VisualStudio\11.0\ActivityLog.xml'. 
```

我还安装了 SQL Server 2012 RTM。

我能做些什么来摆脱这个警告？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-07-14T17:21:27.957

1.  打开控制面板
2.  开放程序和功能
3.  找到所有名为“Microsoft SQL Server 2012 Data-Tier App Framework”的项目
    注意：可能有多达 4 个此类实例都具有上述名称
4.  右键单击它们中的每一个并选择修复

那应该可以解决这个问题。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-07-15T08:14:53.583

Janaka 解决方案对我有用。但是，如果您不想丢失 VS 配置，请仅删除文件：

```
 Microsoft.VisualStudio.Default.cache 
```

从文件夹

```
 %UserProfile%\AppData\Local\Microsoft\VisualStudio\11.0\ComponentModelCache 
```

希望能帮助到你。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-07-12T09:53:29.727

删除以下文件夹。

C:\Users\UName\AppData\Roaming\Microsoft\VisualStudio\10.0 C:\Users\UName\AppData\Local\Microsoft\VisualStudio\10.0

看到[这个](http://social.msdn.microsoft.com/Forums/vstudio/en-US/6d35e3d3-81ca-48d0-b4a1-e16dbc2ebc37/vs2010-crashes-on-startup-after-install-of-sp1)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-01-09T01:10:16.143

事实证明（在我的情况下），Data Tools 安装程序有一个错误，您最终会得到一个充满以下内容的注册表：

Microsoft Visual Studio 11.0Common7

...路径，应该是什么时候：

Microsoft Visual Studio 11.0\Common7

修复所有值和键可以解决问题（对我而言）。

（ps：这个线程中没有其他解决方案对我有用）

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-11-23T23:59:14.470

只需重新安装[SQL Server Data Tools](https://msdn.microsoft.com/en-us/library/mt204009.aspx) (SSDT)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-01-10T15:20:42.820

我必须以管理员身份运行 VS 才能解决此问题。

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2014-08-25T20:12:20.533

问题：“SqlStudio 配置文件包”包未正确加载。经验证的解决方案：删除 Microsoft.VisualStudio.Default.Cache 可解决上述问题。有效！

# java - java web应用程序和web服务之间的线程间通信

> ID：11485827
> 
> 赞同：1
> 
> 时间：2012-07-14T17:23:17.863
> 
> 标签：java, multithreading, web-services, jax-ws

[我在java应用程序和jax-ws Web服务之间的线程间通信](https://stackoverflow.com/questions/11478524/inter-thread-communication-between-java-application-and-jax-ws-web-service)中发布的原始问题改变了一些前提（我也在简化问题以使其更易于理解（并因此得到回答）......希望版主没问题.)

Web 服务线程 (THREAD-1) 将请求放在套接字上并进入睡眠状态等待响应。另一个侦听器线程 (THREAD-2)（作为单独的 Web 应用程序运行，一旦收到响应）必须将 THREAD-1 从睡眠中唤醒。

我该怎么做（以推送通知的方式）？

他们都可以访问数据库表。THREAD-1 可以在进入睡眠状态之前将其唯一的 id 放入表中。THREAD-2，一旦它收到响应并确定它属于 THREAD-1，它就会更新数据库表中的相应行。现在 THREAD-1 可以对数据库表进行轮询（定期）以检查响应是否已到达。

但我希望以推送通知的方式进行。当响应到达时应该立即通知 THREAD-1，而不必每隔几秒轮询一次。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-14T19:22:17.030

如果您的后端请求快速完成并且您没有大量的客户端请求需要处理，您可以让 Web 服务通过它刚刚打开的同一个套接字等待响应。它可以阻止等待读取响应。

但是，如果您可以访问 Servlet 3.0（例如 Tomcat 7），则可以使用[异步 HTTP 请求](http://www.javaworld.com/javaworld/jw-02-2009/jw-02-servlet3.html)。它允许您将处理 Web 服务客户端的线程释放回池中，而无需响应客户端的请求。当响应消息从后端服务到达时，从 servlet 容器中获取适当的 Web 服务客户端请求并将最终响应发送回 Web 服务客户端。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-14T18:27:56.113

好吧，正如评论所暗示的那样：最好不要自己尝试实现这一点。但是，基本上您可以使用带有 wait()/notify() 的标准 Java 线程同步

*   Thread-1 组对 Thread-2 的远程调用以及唯一的 call-ID。
*   Thread-1 现在`wait()`在同步对象上（而不是`sleep()`）
*   Thread-2 完成工作并返回结果，它调用 JVM 中的一些远程回调方法 Thread-1 驻留在其中 - call-ID 与结果一起传递
*   Thread-1 端的回调方法通过 call-ID 使结果可用，并通过以下方式唤醒所有等待的线程`notifyAll()`
*   线程包括。Thread-1 检查他们的结果是否到达，如果是，他们继续工作，如果没有，则`wait()`再次。

Thread-1 端的伪代码：

```
HashMap<String, Object> results;

// Called by Thread-1 to access Thread-2
public void doIt() {
    String callId = "aUniqueCallId";
    Object result = null;
    remoteCallToThread2(callId);
    synchronized(results) {
        while((result = results.remove(callId)) == null) {
            results.wait();
        }
    }
    doSomethingWith(result);
}

// Called remotely by Thread-2 when result is available
public void callback(String callId, Object result) {    
    synchronized(results) {
        results.put(callId, result);
        results.notifyAll();
    } 
} 
```

当然这只是基本思路，不能这样用，这里要考虑的东西很多。

# php - 扩展类和静态值

> ID：11485829
> 
> 赞同：1
> 
> 时间：2012-07-14T17:23:28.393
> 
> 标签：php, inheritance, static

我试图了解 PHP 如何使用扩展类中的静态方法管理内存和变量。我有三个类，一个名为 Model、User1、User2。因此：

```
class Model {
    static public $structure;
    static public $name;
    static function get_structure() {
        return self::$structure = file_get_contents(self::$name.'.json');
    }
}
class User1 extends Model {

}
class User2 extends Model {

}
User1::$name = 'User1';
User2::$name = 'User2';
echo User1::get_structure();
echo User2::get_structure(); 
```

如果我运行 User1::get_structure(); 由于某种原因，它没有相应地填充结果，它似乎正在获取 User2 的值（最后声明的 $name 值）。

我假设声明 User2 和扩展 Model 为我的 $name 属性创建了一个完全独立的范围。所以 User1 和 User2 被声明为与 Model 具有相同结构的单独类。然后我可以在不同的范围内为它们静态定义值。

然而，我现在对此提出质疑。如果我扩展并调用相同的 $name 变量，它们是否都指向 Model 类？或者当我用 new User1(); 声明每个类时，它是否只创建一个单独的范围？和新用户2（）；？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T17:50:25.563

你得到这个行为，因为你正在访问同一个变量

```
class X
{
    public static $data = null;
}

class Foo extends X{};
class Bar extends X{};

Foo::$data = 'lorem ipsum';
echo Bar::$data;
// :: output :: lorem ipsum; 
```

您的`$name`变量与类保持联系`Model`，即使在继承的类中也是如此。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-14T18:12:24.783

是的，所有扩展**Model**的类都将指向同一个 $name 变量。将静态变量视为“全局”变量。

也许这个例子会澄清你：

```
class Model 
{
    static public $name;
}

class User1 extends Model 
{
    public function setName( $name )
    {
        parent::$name = $name;
    }

    public function getName()
    {
        return parent::$name;
    }
}

class User2 extends Model 
{
    public function setName( $name )
    {
        parent::$name = $name;
    }

    public function getName()
    {
        return parent::$name;
    }
}

$user1 = new User1();
$user1->setName("User1");

$user2 = new User2();
$user1->setName("User2");

echo $user1->getName();
echo $user2->getName();

// Output : User2User2 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-14T17:57:33.143

您可以使用以下方法解决它：

```
<?php
class Model {
    static public $structure;
    static public $name;
    static function get_structure() {
        $class = get_called_class();
        return $class::$structure = file_get_contents($class::$name.'.json');
    }
}
class User1 extends Model {
    static public $structure;
    static public $name;
}
class User2 extends Model {
    static public $structure;
    static public $name;
}
User1::$name = 'User1';
User2::$name = 'User2';
echo User1::get_structure();
echo User2::get_structure(); 
```

...但是，您可能会问自己这个设计是否合适。例如 atm 看起来它们应该是具有单独值和实例方法的实例，但这可能是因为精简示例。

# javascript - div的大小不会自动扩展jquery

> ID：11485833
> 
> 赞同：0
> 
> 时间：2012-07-14T17:23:47.263
> 
> 标签：javascript, jquery

我有 div和`draggable`功能。这个 div`resizable``editable (contenteditable=true)`

其中包含一些文本，用户可以对其进行编辑。我的问题是，当用户在 div 中写入文本时，div 的大小

不会自动展开。我设置了它`height:auto`，但这也不起作用。我应该怎么做，而

输入文本div的大小也会增加？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T17:26:50.577

如果您在谈论 jQueryUI 的可调整大小的插件，那么这就是您的问题。它在元素上设置显式高度，覆盖您的`height: auto`.

# html - 纯 CSS 星级评分小部件在点击 Firefox 时集中在顶部

> ID：11485834
> 
> 赞同：2
> 
> 时间：2012-07-14T17:23:55.927
> 
> 标签：html, firefox, css

我已经[使用纯 CSS](http://lea.verou.me/2011/08/accessible-star-rating-widget-with-pure-css/)教程遵循了这个 Star rating 小部件，即使它在 Chrome 和 Firefox 中都能正常工作。在 Firefox 中单击星号时，页面会一直滚动到顶部。就好像您正在单击带有 href='#' 的数据。

关于如何防止这种情况的任何想法？这是**HTML**：

```
<fieldset class="rating">
    <legend>Please rate:</legend>
    <input type="radio" id="star5" name="rating" value="5" /><label for="star5" title="Rocks!">5 stars</label>
    <input type="radio" id="star4" name="rating" value="4" /><label for="star4" title="Pretty good">4 stars</label>
    <input type="radio" id="star3" name="rating" value="3" /><label for="star3" title="Meh">3 stars</label>
    <input type="radio" id="star2" name="rating" value="2" /><label for="star2" title="Kinda bad">2 stars</label>
    <input type="radio" id="star1" name="rating" value="1" /><label for="star1" title="Sucks big time">1 star</label>
</fieldset> 
```

这是**CSS**：

```
.rating {
    float:left;
}

/* :not(:checked) is a filter, so that browsers that don’t support :checked don’t
   follow these rules. Every browser that supports :checked also supports :not(), so
   it doesn’t make the test unnecessarily selective */
.rating:not(:checked) > input {
    position:absolute;
    top:-9999px;
    clip:rect(0,0,0,0);
}

.rating:not(:checked) > label {
    float:right;
    width:1em;
    padding:0 .1em;
    overflow:hidden;
    white-space:nowrap;
    cursor:pointer;
    font-size:200%;
    line-height:1.2;
    color:#ddd;
    text-shadow:1px 1px #bbb, 2px 2px #666, .1em .1em .2em rgba(0,0,0,.5);
}

.rating:not(:checked) > label:before {
    content: '★ ';
}

.rating > input:checked ~ label {
    color: #f70;
    text-shadow:1px 1px #c60, 2px 2px #940, .1em .1em .2em rgba(0,0,0,.5);
}

.rating:not(:checked) > label:hover,
.rating:not(:checked) > label:hover ~ label {
    color: gold;
    text-shadow:1px 1px goldenrod, 2px 2px #B57340, .1em .1em .2em rgba(0,0,0,.5);
}

.rating > input:checked + label:hover,
.rating > input:checked + label:hover ~ label,
.rating > input:checked ~ label:hover,
.rating > input:checked ~ label:hover ~ label,
.rating > label:hover ~ input:checked ~ label {
    color: #ea0;
    text-shadow:1px 1px goldenrod, 2px 2px #B57340, .1em .1em .2em rgba(0,0,0,.5);
}

.rating > label:active {
    position:relative;
    top:2px;
    left:2px;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-14T17:38:15.043

输入类型单选字段将绝对移动到顶部 -9999px。单击时，输入字段将被更改，Firefox 会尝试滚动到它们。而不是移动尝试隐藏它们：

代替

```
.rating:not(:checked) > input {
    position:absolute;
    top:-9999px;
    clip:rect(0,0,0,0);
} 
```

和

```
.rating:not(:checked) > input {
    display: none;
} 
```

# javascript - 如何找到一组相对于旋转的坐标？

> ID：11485839
> 
> 赞同：0
> 
> 时间：2012-07-14T17:24:27.817
> 
> 标签：javascript, canvas

如何找到相对于已旋转点的位置？这个想法是，我在某个位置旋转一个实体，并且需要能够找到相对于该实体旋转的位置，以便相对于其旋转在实体上方 10 个单位与*直接*在上方10 个单位不同实体。希望这张图能让你明白我的意思：

![在此处输入图像描述](../Images/8b1c7e90434056551a557cb99df1742d.png)

注意：我在`<canvas>`标签中使用纯 Javascript 执行此操作。

另请注意：我刚刚完成代数，并且只做了一点三角学和一些几何学，所以请让你的解释相对清楚。sin、cos 和 tangent 才刚刚开始有意义，前几天我不得不自己查找弧度的概念，以便使用`<canvas>`' 的旋转函数（感谢维基百科！）。

另请注意：我曾尝试自己查找此内容（Google，SO，其他地方），但不知道正确的条款，我找不到任何东西。我敢肯定这一定很简单，但对我来说也可能是希腊语。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T17:45:27.090

如果您要查找的只是一个点，该点与一个角度的点为`d`单位，其中该角度相对于该点作为其原点，沿顺时针方向，从正 y 轴，该点由下式给出`(x,y)``θ``(x + d*cos(π/2-θ), y + d*sin(π/2-θ))`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-14T17:44:35.440

如果你知道如何旋转正方形，你就会知道如何旋转矢量。你用做什么`square (25,25)`，用 做什么`vector(25,15)`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-14T17:45:57.737

你可以用向量和矩阵来做。假设25,10的方向是你的立方体的前向向量。所以你可以将旋转矩阵应用到这个向量上，也就是将这个向量乘以旋转矩阵，旋转量为你需要的学位。这将返回你的相对位置。希望很清楚。我不是 JavaScript 专家。但我相信你可以使用一些向量数学 API。您必须执行以下步骤：

在旋转之前计算从立方体位置到所需偏移量的向量。

计算一些旋转的旋转矩阵。

将该向量乘以旋转矩阵得到新的旋转向量。

我找到[了这个](http://sylvester.jcoglan.com/api/matrix.html) JavaScript Vector math lib。看看 Matrix 对象。它有一个向量乘法的方法。

# c# - 如何使用 WPF 创建六边形菜单？

> ID：11485843
> 
> 赞同：1
> 
> 时间：2012-07-14T17:24:50.370
> 
> 标签：c#, wpf, panel

请我需要在 wpf 中创建六边形菜单作为面板，但我不知道如何将面板创建为六边形注意我需要创建它而不是绘制它。谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-14T18:06:34.763

尝试这样的事情：

```
<Window x:Class="HexagonMenu.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="MainWindow" Height="350" Width="525">

    <Window.Resources>
        <Style x:Key="ButtonFocusVisual">
            <Setter Property="Control.Template">
                <Setter.Value>
                    <ControlTemplate>
                        <Border>
                            <Rectangle 
                                Margin="2"
                                StrokeThickness="1"
                                Stroke="#60000000"
                                StrokeDashArray="1 2"/>
                        </Border>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <LinearGradientBrush x:Key="NormalBrush" StartPoint="0,0" EndPoint="0,1">
            <GradientBrush.GradientStops>
                <GradientStopCollection>
                    <GradientStop Color="#FFF" Offset="0.0"/>
                    <GradientStop Color="#CCC" Offset="1.0"/>
                </GradientStopCollection>
            </GradientBrush.GradientStops>
        </LinearGradientBrush>

        <LinearGradientBrush x:Key="HorizontalNormalBrush" StartPoint="0,0" EndPoint="1,0">
            <GradientBrush.GradientStops>
                <GradientStopCollection>
                    <GradientStop Color="#FFF" Offset="0.0"/>
                    <GradientStop Color="#CCC" Offset="1.0"/>
                </GradientStopCollection>
            </GradientBrush.GradientStops>
        </LinearGradientBrush>

        <LinearGradientBrush x:Key="LightBrush" StartPoint="0,0" EndPoint="0,1">
            <GradientBrush.GradientStops>
                <GradientStopCollection>
                    <GradientStop Color="#FFF" Offset="0.0"/>
                    <GradientStop Color="#EEE" Offset="1.0"/>
                </GradientStopCollection>
            </GradientBrush.GradientStops>
        </LinearGradientBrush>

        <LinearGradientBrush x:Key="HorizontalLightBrush" StartPoint="0,0" EndPoint="1,0">
            <GradientBrush.GradientStops>
                <GradientStopCollection>
                    <GradientStop Color="#FFF" Offset="0.0"/>
                    <GradientStop Color="#EEE" Offset="1.0"/>
                </GradientStopCollection>
            </GradientBrush.GradientStops>
        </LinearGradientBrush>

        <LinearGradientBrush x:Key="DarkBrush" StartPoint="0,0" EndPoint="0,1">
            <GradientBrush.GradientStops>
                <GradientStopCollection>
                    <GradientStop Color="#FFF" Offset="0.0"/>
                    <GradientStop Color="#AAA" Offset="1.0"/>
                </GradientStopCollection>
            </GradientBrush.GradientStops>
        </LinearGradientBrush>

        <LinearGradientBrush x:Key="PressedBrush" StartPoint="0,0" EndPoint="0,1">
            <GradientBrush.GradientStops>
                <GradientStopCollection>
                    <GradientStop Color="#BBB" Offset="0.0"/>
                    <GradientStop Color="#EEE" Offset="0.1"/>
                    <GradientStop Color="#EEE" Offset="0.9"/>
                    <GradientStop Color="#FFF" Offset="1.0"/>
                </GradientStopCollection>
            </GradientBrush.GradientStops>
        </LinearGradientBrush>

        <SolidColorBrush x:Key="DisabledForegroundBrush" Color="#888" />

        <SolidColorBrush x:Key="DisabledBackgroundBrush" Color="#EEE" />

        <SolidColorBrush x:Key="WindowBackgroundBrush" Color="#FFF" />

        <SolidColorBrush x:Key="SelectedBackgroundBrush" Color="#DDD" />

        <Style TargetType="Button">
            <Setter Property="SnapsToDevicePixels" Value="true"/>
            <Setter Property="OverridesDefaultStyle" Value="true"/>
            <Setter Property="FocusVisualStyle" Value="{StaticResource ButtonFocusVisual}"/>
            <Setter Property="Height" Value="50"/>
            <Setter Property="Width" Value="50"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Grid>
                            <Path x:Name="Hexagon" Stroke="Black" Stretch="Fill" Fill="{StaticResource NormalBrush}" 
                                  HorizontalAlignment="Stretch" VerticalAlignment="Stretch" 
                                  Width="{TemplateBinding Width}" Height="{TemplateBinding Height}"                                  
                                  Data="M8.660254,0 L17.320508,5 17.320508,15 8.660254,20 0,15 0,5 8.660254,0 z"/>
                            <TextBlock Text="{Binding Path=Content, RelativeSource={RelativeSource Mode=TemplatedParent}}" HorizontalAlignment="Center" VerticalAlignment="Center"/>
                        </Grid>

                        <ControlTemplate.Triggers>                            
                            <Trigger Property="IsMouseOver" Value="true">
                                <Setter TargetName="Hexagon" Property="Fill" Value="{StaticResource DarkBrush}" />
                            </Trigger>
                            <Trigger Property="IsPressed" Value="true">
                                <Setter TargetName="Hexagon" Property="Fill" Value="{StaticResource PressedBrush}" />                                
                            </Trigger>
                            <Trigger Property="IsEnabled" Value="false">
                                <Setter TargetName="Hexagon" Property="Fill" Value="{StaticResource DisabledBackgroundBrush}" />                                
                                <Setter Property="Foreground" Value="{StaticResource DisabledForegroundBrush}"/>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

    </Window.Resources>

    <DockPanel>
        <WrapPanel x:Name="MyHexagonMenu" DockPanel.Dock="Top">
            <Button Content="File" />
            <Button Content="Edit" />
            <Button Content="About" /> 
            <Button Content="Exit" />             
        </WrapPanel>

    </DockPanel>
</Window> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-09-28T19:14:21.507

如果你只想要一个多边形`Path`，你可以使用：

```
<Path Width="64" Height="64" Stretch="Uniform" Fill="Blue"
      Data="M8.660254,0 L17.320508,5 17.320508,15 8.660254,20 0,15 0,5 8.660254,0 Z" /> 
```

在我的机器上看起来像这样：

[![在此处输入图像描述](../Images/1e0708790de68001f680e5774bbd4965.png)](https://i.stack.imgur.com/vixke.png)

根据需要调整`Width`和`Height`。请注意，生成的形状*不是*正方形，但`Stretch="Uniform"`会导致形状调整大小，使其适合您指定的任何尺寸。

# android - 动画 属性 android:repeatMode 将不接受 int

> ID：11485845
> 
> 赞同：1
> 
> 时间：2012-07-14T17:25:19.940
> 
> 标签：android, xml, animation

根据[文档](https://developer.android.com/reference/android/view/animation/Animation.html#attr_android%3arepeatMode)，我会将 1 或 2 作为值，但是，在尝试启动我的应用程序时，我收到错误：

```
Error: Integer types not allowed (at 'repeatMode' with value '1'). 
```

我的动画 XML 是：

```
<?xml version="1.0" encoding="utf-8"?>
<set xmlns:android="http://schemas.android.com/apk/res/android"
    android:repeatCount="0"
    android:repeatMode="1" >

    <alpha
        android:duration="1000"
        android:fromAlpha="0.0"
        android:toAlpha="1.0" >
    </alpha>
    <alpha
        android:duration="500"
        android:fromAlpha="1.0"
        android:toAlpha="0.0" >
    </alpha>

</set> 
```

我到底错过了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T16:24:32.627

如果您从 XML 设置此值，则必须将“restart”或“reverse”的枚举值放在那里。

此外，动画不会像您认为的那样一个接一个地运行，因为您的动画 XML。如果您希望其他动画在第一个动画之后开始，请同时设置“startOffset”属性（如 android:startOffset="1000"）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-29T12:17:27.947

您使用 android:repeatMode="1" 代替 android:repeatMode="reverse"。

# android - Android 上的 Youtube API OAuth 2.0

> ID：11485847
> 
> 赞同：1
> 
> 时间：2012-07-14T17:26:04.920
> 
> 标签：android, youtube-api

我正在尝试使用 OAuth2.0 在 youtube API 上进行身份验证（就像可以在[文档](https://developers.google.com/accounts/docs/OAuth2ForDevices?hl=pt-PT)中看到的那样）但由于某种原因我无法获得它......

这是我的连接代码：

```
 URL url = new URL("https://accounts.google.com/o/oauth2/device/code");
        URLConnection conn = url.openConnection();

        conn.setDoOutput(true);
        conn.setRequestProperty("Host", "accounts.google.com");
        conn.setRequestProperty("Content-Type", "application/x-www-form-urlencoded");
        OutputStreamWriter wr = new OutputStreamWriter(conn.getOutputStream());
        wr.write("client_id=999999999999999.apps.googleusercontent.com&scope=https://gdata.youtube.com");
        wr.flush();

        // Get the response
        StringBuilder sb = new StringBuilder();
        InputStreamReader is = new InputStreamReader(conn.getInputStream());
        BufferedReader rd = new BufferedReader(is);
        String line = "";
        while ((line = rd.readLine()) != null) {
            sb.append(line);
        }
        wr.close();
        rd.close();
        line = sb.toString(); 
```

这是我得到的错误：

```
 07-14 18:03:32.320: W/System.err(7902): java.net.UnknownHostException: Unable to resolve host "accounts.google.com": No address associated with hostname
        07-14 18:03:32.330: W/System.err(7902):     at java.net.InetAddress.lookupHostByName(InetAddress.java:400)
        07-14 18:03:32.335: W/System.err(7902):     at java.net.InetAddress.getAllByNameImpl(InetAddress.java:242)
        07-14 18:03:32.335: W/System.err(7902):     at java.net.InetAddress.getAllByName(InetAddress.java:220)
        07-14 18:03:32.335: W/System.err(7902):     at libcore.net.http.HttpConnection.<init>(HttpConnection.java:71)
        07-14 18:03:32.335: W/System.err(7902):     at libcore.net.http.HttpConnection.<init>(HttpConnection.java:50)
        07-14 18:03:32.335: W/System.err(7902):     at libcore.net.http.HttpConnection$Address.connect(HttpConnection.java:351)
        07-14 18:03:32.340: W/System.err(7902):     at libcore.net.http.HttpConnectionPool.get(HttpConnectionPool.java:86)
        07-14 18:03:32.340: W/System.err(7902):     at libcore.net.http.HttpConnection.connect(HttpConnection.java:128)
        07-14 18:03:32.340: W/System.err(7902):     at libcore.net.http.HttpEngine.openSocketConnection(HttpEngine.java:308)
        07-14 18:03:32.340: W/System.err(7902):     at libcore.net.http.HttpsURLConnectionImpl$HttpsEngine.makeSslConnection(HttpsURLConnectionImpl.java:460)
        07-14 18:03:32.340: W/System.err(7902):     at libcore.net.http.HttpsURLConnectionImpl$HttpsEngine.connect(HttpsURLConnectionImpl.java:441)
        07-14 18:03:32.345: W/System.err(7902):     at libcore.net.http.HttpEngine.sendSocketRequest(HttpEngine.java:282)
        07-14 18:03:32.345: W/System.err(7902):     at libcore.net.http.HttpEngine.sendRequest(HttpEngine.java:232)
        07-14 18:03:32.345: W/System.err(7902):     at libcore.net.http.HttpURLConnectionImpl.connect(HttpURLConnectionImpl.java:80)
        07-14 18:03:32.350: W/System.err(7902):     at libcore.net.http.HttpURLConnectionImpl.getOutputStream(HttpURLConnectionImpl.java:188)
        07-14 18:03:32.350: W/System.err(7902):     at libcore.net.http.HttpsURLConnectionImpl.getOutputStream(HttpsURLConnectionImpl.java:280)
        07-14 18:03:32.350: W/System.err(7902):     at pt.dporem.your.subscriptions.sychronization.OAuth.doInBackground(OAuth.java:58)
        07-14 18:03:32.355: W/System.err(7902):     at pt.dporem.your.subscriptions.sychronization.OAuth.doInBackground(OAuth.java:1)
        07-14 18:03:32.355: W/System.err(7902):     at android.os.AsyncTask$2.call(AsyncTask.java:264)
        07-14 18:03:32.355: W/System.err(7902):     at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:305)
        07-14 18:03:32.355: W/System.err(7902):     at java.util.concurrent.FutureTask.run(FutureTask.java:137)
        07-14 18:03:32.360: W/System.err(7902):     at android.os.AsyncTask$SerialExecutor$1.run(AsyncTask.java:208)
        07-14 18:03:32.360: W/System.err(7902):     at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1076)
        07-14 18:03:32.360: W/System.err(7902):     at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:569)
        07-14 18:03:32.360: W/System.err(7902):     at java.lang.Thread.run(Thread.java:856) 
```

我究竟做错了什么？谢谢你的帮助。

# asp.net-mvc-3 - 公共站点的 ASP.NET MVC 3 App + CMS 有哪些方法

> ID：11485849
> 
> 赞同：0
> 
> 时间：2012-07-14T17:26:33.633
> 
> 标签：asp.net-mvc-3, content-management-system

我们正在 MVC 3 中开发一个非常雄心勃勃的 Web 应用程序。一开始我们考虑在 MVC 的一个区域中制作公共网站（商业和教育内容）。

由于维护该公共网站将涉及编译和更新整个网络应用程序，我想知道您是否可以建议将 CMS 集成到我们的网络应用程序的方法。

公共网站应显示来自 Web 应用程序的一些内容，例如：

*   用户注册
*   公共档案目录
*   图表中的一些统计数据

我想在 CMS 中我可以在 iFrames 中加载这些部分或通过 ajax 加载一些视图......但这不是最相关的。

**你有做这种整合的经验吗？**

**你用什么工具？** 我找到了“果园”、Umbraco……而且可能是 DotNetNuke

**优点和缺点？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-14T17:56:28.137

我们将果园用于此类事情，并且最近为商业培训平台构建了一个高度扩展的版本。

它的扩展相当简单，如果你想以 MVC3 + CMS 作为基础，这是一个很好的起点。

果园最糟糕的事情是缺乏文件，但那是一年多以前的事了。它现在看起来更丰富了，你可以在这里用问题和答案来填补一些空白——如果你卡住了，只要问问你自己，因为它是一个相当活跃的话题。

我最后一次使用 umbraco 是在他们迁移到 mvc 之前，所以无法对此发表评论。没有理由去别处寻找，因为果园对我们来说是成功的。

# c# - 在 Windows 中检测 Ctrl + 左键单击

> ID：11485856
> 
> 赞同：0
> 
> 时间：2012-07-14T17:27:41.483
> 
> 标签：c#, global-hotkey

我希望我的程序在我按下控制键+左键时弹出（就像巴比伦一样）。我知道如何注册全局热键，但我不知道如何组合鼠标点击。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T17:46:02.860

CodeProject上有一篇关于全局键钩*和*全局鼠标钩的很棒的文章

> 此类允许您点击键盘和鼠标和/或检测它们的活动，即使应用程序在后台运行或根本没有任何用户界面。此类使用 KeyEventArgs 和 MouseEventArgs 引发常见的 .NET 事件，因此您可以轻松检索所需的任何信息。

[http://www.codeproject.com/Articles/7294/Processing-Global-Mouse-and-Keyboard-Hooks-in-C](http://www.codeproject.com/Articles/7294/Processing-Global-Mouse-and-Keyboard-Hooks-in-C)

使用该实现或其中的想法，您的程序可以知道在任何应用程序中何时发生左键单击，以及当时 Control 键的状态。

请记住，其他一些应用程序定义了 Ctrl-Left-Click 的行为。覆盖该行为可能会给用户带来混乱的体验。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-14T18:52:38.673

您可以使用 windows 挂钩，它可用于挂钩表单外的键盘和鼠标事件。该网站解释了如何设置 Windows 挂钩：http: [//support.microsoft.com/kb/318804](http://support.microsoft.com/kb/318804)

# regex - 从字符串中提取特定字符串（正则表达式？）

> ID：11485860
> 
> 赞同：0
> 
> 时间：2012-07-14T17:27:56.767
> 
> 标签：regex

我正在为一个项目编写一种指令字符串解析器，以便用户可以编写“指令”来做事。

所以一些例子“说明”

```
ADD 5 TO 3
FLY TO MOON
GOTO 10 AND MOVE 50 PIXELS 
```

我将这些分配给字符串数组

```
var Instructions = ["ADD * TO *","FLY TO *", "GOTO * AND MOVE * PIXELS"]; 
```

如果我有一些：

```
var input = // String 
```

该字符串可能类似于`ADD 5 to 8`或`FLY TO EARTH`

是否有一个匹配的正则表达式搜索可以用来帮助我找到匹配的指令？例如

```
var numInstructions = Instructions.length;
for (var j = 0; j < numInstructions; j++)
{
     var checkingInstruction = Instructions[j];
     // Some check here with regexp to check if there is a match between checkingInstruction and input
     // Something like... 
     var matches = input.match(checkingInstruction);
     // ideally matches[0] would be the value at the first *, matches[1] would be the value of second *, and checkingInstruction is the instruction that passed
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T17:52:23.330

你可以做这样的事情。

```
//setup
var instruction_patterns = [/ADD (\w+) TO (\w+)/, /FLY TO (\w+)/],
    input = "ADD 4 TO 3",
    matches;

//see if any instructions match and capture details
for (var i=0, len=instruction_patterns.length; i<len; i++)
    if (matches = input.match(instruction_patterns[i]))
        break;

//report back
if (matches)
    alert(
        '- instruction:\n'+matches[0]+'\n\n'+
        '- tokens:\n'+matches.slice(1).join('\n')
    ); 
```

请注意，模式存储为 REGEXP 文字。另请注意，尽管原始代码中有注释，但`matches[0]`始终是整个匹配项，因此这不能是第一个标记 (4)。那将在`matches[1]`.

我在模式中假设标记可以是任何字母数字 ( `\w`)，不一定是数字。根据需要进行调整。

最后，为了不区分大小写，只需`i`在每个模式 ( ) 后添加标志`/pattern/i`。

# android - android - 如何使布局不模糊手势？

> ID：11485864
> 
> 赞同：0
> 
> 时间：2012-07-14T17:28:33.133
> 
> 标签：android

想象一下，你有一个很大的线性布局，我们称它为**originalLayout**，并为其设置了一个gestureDetector。然后你也膨胀一个 ReLayNewsItem 布局并将它放入 originalLayout。

```
LayoutInflater inflater = (LayoutInflater)this.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
RelativeLayout ReLayNewsItem = (RelativeLayout) inflater.inflate(R.layout.newsitem, null); 
...
originalLayout.addView(ReLayNewsItem); 
```

现在，gestureDetector 仅适用于 originalLayout 的空白空间，并且在我有 ReLayNewsItem 的地方不起作用。

**使 ReLayNewsItem 不模糊手势的最佳方法是什么？**

*PS 我不能在 ReLayNewsItem 上设置相同的手势检测器。*

ReLayNewsItem.setClickable(false); - 不工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T17:40:00.940

每当. `ReLayNewsItem`_ `mGesture.onTouchEvent(ReLayNewsItem_event)`_`layout.dispatchTouchEvent(ReLayNewsItem_event)`

在这里阅读`Event Handler`点：http: [//developer.android.com/guide/topics/ui/ui-events.html](http://developer.android.com/guide/topics/ui/ui-events.html)

# jquery-ui - Juice UI Selectable 不会触发选定事件

> ID：11485867
> 
> 赞同：0
> 
> 时间：2012-07-14T17:29:08.280
> 
> 标签：jquery-ui, juice-ui

嗨，我在我的项目中使用 JuiceUI，但我遇到了 Juice 可选控件的问题。在列表中进行选择时，它似乎不会触发 selected 事件。我用谷歌搜索并在某处读到并非所有事件都会触发事件的回发。但即使这样似乎也不起作用。我在页面上有一个按钮可以触发回发，但它仍然不会触发所选事件。

```
 <style>
                #feedback {font-size: 1.4em;}
                #lstActionList .ui-selecting {background: #FECA40;}
                #lstActionList .ui-selected {background: #F39814; color: white;}
                #lstActionList {list-style-type: none; margin: 0; padding: 0; width: 100%;}
                #lstActionList li { margin: 6px; padding: 0.4em; font-size: 1em; height: 18px;}
            </style>
            <ol id="lstActionList" runat="server" clientidmode="Static">
                <li class="ui-widget-content">Stock Requisition</li>
                <li class="ui-widget-content">Non-Stock Requisition</li>
                <li class="ui-widget-content">Service Requisition</li>
            </ol>
            <juice:Selectable ID="ActionListSelector" runat="server" 
                    TargetControlID="lstActionList" onselected="ActionListSelector_Selected" /> 
```

我的 ActionListSelector_Selected 方法中有一个断点，但它永远不会到达它。

我希望我错过了一些简单的东西？为什么选择的事件不触发？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T16:30:08.853

没有名为“onselected”的服务器事件。但是，有一个名为“Selected”的事件。请在此处浏览文档 - [http://juiceui.com/controls/selectable](http://juiceui.com/controls/selectable)

# jquery - 在一个元素上使用 jQuery fadeIn/fadeOut 会打乱它的定位

> ID：11485868
> 
> 赞同：0
> 
> 时间：2012-07-14T17:29:10.543
> 
> 标签：jquery, css, animation

我有一个根据某些条件显示或隐藏的元素。我使用 jQuery fadeIn() 和 fadeOut() 动画来隐藏或显示元素。

我的问题是该元素的位置在淡出/淡入序列之后突然改变。但是我在计算的样式规则中找不到任何区别。既不是元素本身，也不是嵌入的 div 标签。序列后有什么变化？

我做了一个简短的测试用例：http: [//jsfiddle.net/2QVX8/14/](http://jsfiddle.net/2QVX8/14/)

注意表格下方的三角形指向下方，它居中。当您单击“切换”按钮两次时，将运行淡出/淡入序列。之后，元素不再居中，而是位于最左边。

下面是测试用例的代码：

HTML：

```
<button id='toggle'>Toggle</button>
<p/>
<div>
      <table id="list">
        <tbody>
            <tr><td>1-1</td><td>1-2</td></tr>
            <tr><td>2-1</td><td>2-2</td></tr>
            <tr><td>3-1</td><td>3-2</td></tr>
        </tbody>
      </table>
      <div id="footer">
          <span>&#9662;</span>
      </div>
</div>
​ 
```

CSS：

```
table{
  width: 100%;
  border: 1px solid black;   
}
table tr td{
  text-align: center;  
}
#footer{
  position: absolute;
} 
```

​JS/jQuery：

```
$('#toggle').bind('click',function(){
    if ($('#footer span').is(':visible'))
       $('#footer span').fadeOut('fast');   
  else $('#footer span').fadeIn('fast');   
}) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T17:40:19.987

你应该使用：

```
#footer span{
     position: relative;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-14T17:42:02.300

我不太明白为什么，但是没有坐标的绝对位置会使其不稳定。试试这个：http: [//jsfiddle.net/tovic/2QVX8/15/](http://jsfiddle.net/tovic/2QVX8/15/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-14T17:31:14.270

试试这个：http: [//jsfiddle.net/2QVX8/18/](http://jsfiddle.net/2QVX8/18/)

HTML：

```
<button id='toggle'>Toggle</button>
<p>
<div>
      <table id="list">
        <tbody>
            <tr><td>1-1</td><td>1-2</tr></tr>
            <tr><td>2-1</td><td>2-2</tr></tr>
            <tr><td>3-1</td><td>3-2</tr></tr>
        </tbody>
      </table>
      <div id="footer">
          <div class="arrow">&#9662;</div>
      </div>
</div> 
```

CSS：

```
table{
  width: 100%;
  border: 1px solid black;   
}
table tr td{
  text-align: center;  
}

#footer{
  display: block;
  width: 100%;
  height: 1em;
  text-align: center;
  padding: 3px;
} 
```

查询：

```
$('#toggle').bind('click',function(){
    if ($('#footer .arrow').is(':visible'))
       $('#footer .arrow').fadeOut('fast');   
  else $('#footer .arrow').fadeIn('fast');   
}) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-14T17:51:20.030

好的，这可能是最简单的解决方案：

我删除了页脚的绝对 css 定位规则：

```
position:absolute; 
```

查看[fdler](http://jsfiddle.net/2QVX8/20/)，除了该更改之外未更改：

# ruby-on-rails - 运行 'rake assets:precompile' 会产生错误：'`@application.css' is not allowed as an instance variable name'

> ID：11485873
> 
> 赞同：4
> 
> 时间：2012-07-14T17:30:15.680
> 
> 标签：ruby-on-rails, ruby, asset-pipeline

我正在开发一个 Rails 3.2 应用程序，并且我正在尝试测试预编译我的资产，以便将我的应用程序投入生产。该应用程序在开发中运行良好，但是当我运行时：

```
bundle exec rake assets:precompile 
```

我收到以下错误：

```
rake aborted!
`@application.css' is not allowed as an instance variable name 
```

我搜索了我的代码，没有引用 application.css，当然除了那个名称的文件（以及偶尔的评论）。

我也尝试过`config.assets.compile = true`在生产模式下设置，但同样失败（应用服务器启动正常，但在 production.log 中没有错误，我只看到请求，Rails 呈现响应，但没有完成） .

谢谢你的帮助。

这是我运行时的完整跟踪`bundle exec rake assets:precompile`：

```
$ bundle exec rake assets:precompile --trace
** Invoke assets:precompile (first_time)
** Execute assets:precompile
/Users/alb64/.rbenv/versions/1.9.2-p320/bin/ruby /Users/alb64/.rbenv/versions/1.9.2-p320/bin/rake assets:precompile:all RAILS_ENV=production RAILS_GROUPS=assets --trace
** Invoke assets:precompile:all (first_time)
** Execute assets:precompile:all
** Invoke assets:precompile:primary (first_time)
** Invoke assets:environment (first_time)
** Execute assets:environment
** Invoke environment (first_time)
** Execute environment
rake aborted!
`@application.css' is not allowed as an instance variable name
/Users/alb64/.rbenv/versions/1.9.2-p320/lib/ruby/1.9.1/psych/visitors/to_ruby.rb:244:in `instance_variable_set'
/Users/alb64/.rbenv/versions/1.9.2-p320/lib/ruby/1.9.1/psych/visitors/to_ruby.rb:244:in `block in init_with'
/Users/alb64/.rbenv/versions/1.9.2-p320/lib/ruby/1.9.1/psych/visitors/to_ruby.rb:244:in `each'
/Users/alb64/.rbenv/versions/1.9.2-p320/lib/ruby/1.9.1/psych/visitors/to_ruby.rb:244:in `init_with'
/Users/alb64/.rbenv/versions/1.9.2-p320/lib/ruby/1.9.1/psych/visitors/to_ruby.rb:229:in `revive'
/Users/alb64/.rbenv/versions/1.9.2-p320/lib/ruby/1.9.1/psych/visitors/to_ruby.rb:183:in `visit_Psych_Nodes_Mapping'
/Users/alb64/.rbenv/versions/1.9.2-p320/lib/ruby/1.9.1/psych/visitors/visitor.rb:7:in `accept'
/Users/alb64/.rbenv/versions/1.9.2-p320/lib/ruby/1.9.1/psych/visitors/to_ruby.rb:16:in `accept'
/Users/alb64/.rbenv/versions/1.9.2-p320/lib/ruby/1.9.1/psych/nodes/node.rb:25:in `to_ruby'
/Users/alb64/.rbenv/versions/1.9.2-p320/lib/ruby/1.9.1/psych.rb:107:in `load'
/Users/alb64/.rbenv/versions/1.9.2-p320/lib/ruby/1.9.1/psych.rb:205:in `load_file'
/Users/alb64/.rbenv/versions/1.9.2-p320/lib/ruby/gems/1.9.1/gems/actionpack-3.2.0/lib/sprockets/railtie.rb:42:in `block in <class:Railtie>'
/Users/alb64/.rbenv/versions/1.9.2-p320/lib/ruby/gems/1.9.1/gems/railties-3.2.0/lib/rails/initializable.rb:30:in `instance_exec'
/Users/alb64/.rbenv/versions/1.9.2-p320/lib/ruby/gems/1.9.1/gems/railties-3.2.0/lib/rails/initializable.rb:30:in `run'
/Users/alb64/.rbenv/versions/1.9.2-p320/lib/ruby/gems/1.9.1/gems/railties-3.2.0/lib/rails/initializable.rb:55:in `block in run_initializers'
/Users/alb64/.rbenv/versions/1.9.2-p320/lib/ruby/gems/1.9.1/gems/railties-3.2.0/lib/rails/initializable.rb:54:in `each'
/Users/alb64/.rbenv/versions/1.9.2-p320/lib/ruby/gems/1.9.1/gems/railties-3.2.0/lib/rails/initializable.rb:54:in `run_initializers'
/Users/alb64/.rbenv/versions/1.9.2-p320/lib/ruby/gems/1.9.1/gems/railties-3.2.0/lib/rails/application.rb:136:in `initialize!'
/Users/alb64/.rbenv/versions/1.9.2-p320/lib/ruby/gems/1.9.1/gems/railties-3.2.0/lib/rails/railtie/configurable.rb:30:in `method_missing'
/Users/alb64/code/stc/reservations/config/environment.rb:6:in `<top (required)>'
/Users/alb64/.rbenv/versions/1.9.2-p320/lib/ruby/gems/1.9.1/gems/activesupport-3.2.0/lib/active_support/dependencies.rb:251:in `require'
/Users/alb64/.rbenv/versions/1.9.2-p320/lib/ruby/gems/1.9.1/gems/activesupport-3.2.0/lib/active_support/dependencies.rb:251:in `block in require'
/Users/alb64/.rbenv/versions/1.9.2-p320/lib/ruby/gems/1.9.1/gems/activesupport-3.2.0/lib/active_support/dependencies.rb:236:in `load_dependency'
/Users/alb64/.rbenv/versions/1.9.2-p320/lib/ruby/gems/1.9.1/gems/activesupport-3.2.0/lib/active_support/dependencies.rb:251:in `require'
/Users/alb64/.rbenv/versions/1.9.2-p320/lib/ruby/gems/1.9.1/gems/railties-3.2.0/lib/rails/application.rb:103:in `require_environment!'
/Users/alb64/.rbenv/versions/1.9.2-p320/lib/ruby/gems/1.9.1/gems/railties-3.2.0/lib/rails/application.rb:292:in `block (2 levels) in initialize_tasks'
/Users/alb64/.rbenv/versions/1.9.2-p320/lib/ruby/gems/1.9.1/gems/rake-0.9.2.2/lib/rake/task.rb:205:in `call'
/Users/alb64/.rbenv/versions/1.9.2-p320/lib/ruby/gems/1.9.1/gems/rake-0.9.2.2/lib/rake/task.rb:205:in `block in execute'
/Users/alb64/.rbenv/versions/1.9.2-p320/lib/ruby/gems/1.9.1/gems/rake-0.9.2.2/lib/rake/task.rb:200:in `each'
/Users/alb64/.rbenv/versions/1.9.2-p320/lib/ruby/gems/1.9.1/gems/rake-0.9.2.2/lib/rake/task.rb:200:in `execute'
/Users/alb64/.rbenv/versions/1.9.2-p320/lib/ruby/gems/1.9.1/gems/rake-0.9.2.2/lib/rake/task.rb:158:in `block in invoke_with_call_chain'
/Users/alb64/.rbenv/versions/1.9.2-p320/lib/ruby/1.9.1/monitor.rb:201:in `mon_synchronize'
/Users/alb64/.rbenv/versions/1.9.2-p320/lib/ruby/gems/1.9.1/gems/rake-0.9.2.2/lib/rake/task.rb:151:in `invoke_with_call_chain'
/Users/alb64/.rbenv/versions/1.9.2-p320/lib/ruby/gems/1.9.1/gems/rake-0.9.2.2/lib/rake/task.rb:144:in `invoke'
/Users/alb64/.rbenv/versions/1.9.2-p320/lib/ruby/gems/1.9.1/gems/actionpack-3.2.0/lib/sprockets/assets.rake:89:in `block (2 levels) in <top (required)>'
/Users/alb64/.rbenv/versions/1.9.2-p320/lib/ruby/gems/1.9.1/gems/rake-0.9.2.2/lib/rake/task.rb:205:in `call'
/Users/alb64/.rbenv/versions/1.9.2-p320/lib/ruby/gems/1.9.1/gems/rake-0.9.2.2/lib/rake/task.rb:205:in `block in execute'
/Users/alb64/.rbenv/versions/1.9.2-p320/lib/ruby/gems/1.9.1/gems/rake-0.9.2.2/lib/rake/task.rb:200:in `each'
/Users/alb64/.rbenv/versions/1.9.2-p320/lib/ruby/gems/1.9.1/gems/rake-0.9.2.2/lib/rake/task.rb:200:in `execute'
/Users/alb64/.rbenv/versions/1.9.2-p320/lib/ruby/gems/1.9.1/gems/rake-0.9.2.2/lib/rake/task.rb:158:in `block in invoke_with_call_chain'
/Users/alb64/.rbenv/versions/1.9.2-p320/lib/ruby/1.9.1/monitor.rb:201:in `mon_synchronize'
/Users/alb64/.rbenv/versions/1.9.2-p320/lib/ruby/gems/1.9.1/gems/rake-0.9.2.2/lib/rake/task.rb:151:in `invoke_with_call_chain'
/Users/alb64/.rbenv/versions/1.9.2-p320/lib/ruby/gems/1.9.1/gems/rake-0.9.2.2/lib/rake/task.rb:176:in `block in invoke_prerequisites'
/Users/alb64/.rbenv/versions/1.9.2-p320/lib/ruby/gems/1.9.1/gems/rake-0.9.2.2/lib/rake/task.rb:174:in `each'
/Users/alb64/.rbenv/versions/1.9.2-p320/lib/ruby/gems/1.9.1/gems/rake-0.9.2.2/lib/rake/task.rb:174:in `invoke_prerequisites'
/Users/alb64/.rbenv/versions/1.9.2-p320/lib/ruby/gems/1.9.1/gems/rake-0.9.2.2/lib/rake/task.rb:157:in `block in invoke_with_call_chain'
/Users/alb64/.rbenv/versions/1.9.2-p320/lib/ruby/1.9.1/monitor.rb:201:in `mon_synchronize'
/Users/alb64/.rbenv/versions/1.9.2-p320/lib/ruby/gems/1.9.1/gems/rake-0.9.2.2/lib/rake/task.rb:151:in `invoke_with_call_chain'
/Users/alb64/.rbenv/versions/1.9.2-p320/lib/ruby/gems/1.9.1/gems/rake-0.9.2.2/lib/rake/task.rb:144:in `invoke'
/Users/alb64/.rbenv/versions/1.9.2-p320/lib/ruby/gems/1.9.1/gems/actionpack-3.2.0/lib/sprockets/assets.rake:56:in `block (3 levels) in <top (required)>'
/Users/alb64/.rbenv/versions/1.9.2-p320/lib/ruby/gems/1.9.1/gems/rake-0.9.2.2/lib/rake/task.rb:205:in `call'
/Users/alb64/.rbenv/versions/1.9.2-p320/lib/ruby/gems/1.9.1/gems/rake-0.9.2.2/lib/rake/task.rb:205:in `block in execute'
/Users/alb64/.rbenv/versions/1.9.2-p320/lib/ruby/gems/1.9.1/gems/rake-0.9.2.2/lib/rake/task.rb:200:in `each'
/Users/alb64/.rbenv/versions/1.9.2-p320/lib/ruby/gems/1.9.1/gems/rake-0.9.2.2/lib/rake/task.rb:200:in `execute'
/Users/alb64/.rbenv/versions/1.9.2-p320/lib/ruby/gems/1.9.1/gems/rake-0.9.2.2/lib/rake/task.rb:158:in `block in invoke_with_call_chain'
/Users/alb64/.rbenv/versions/1.9.2-p320/lib/ruby/1.9.1/monitor.rb:201:in `mon_synchronize'
/Users/alb64/.rbenv/versions/1.9.2-p320/lib/ruby/gems/1.9.1/gems/rake-0.9.2.2/lib/rake/task.rb:151:in `invoke_with_call_chain'
/Users/alb64/.rbenv/versions/1.9.2-p320/lib/ruby/gems/1.9.1/gems/rake-0.9.2.2/lib/rake/task.rb:144:in `invoke'
/Users/alb64/.rbenv/versions/1.9.2-p320/lib/ruby/gems/1.9.1/gems/rake-0.9.2.2/lib/rake/application.rb:116:in `invoke_task'
/Users/alb64/.rbenv/versions/1.9.2-p320/lib/ruby/gems/1.9.1/gems/rake-0.9.2.2/lib/rake/application.rb:94:in `block (2 levels) in top_level'
/Users/alb64/.rbenv/versions/1.9.2-p320/lib/ruby/gems/1.9.1/gems/rake-0.9.2.2/lib/rake/application.rb:94:in `each'
/Users/alb64/.rbenv/versions/1.9.2-p320/lib/ruby/gems/1.9.1/gems/rake-0.9.2.2/lib/rake/application.rb:94:in `block in top_level'
/Users/alb64/.rbenv/versions/1.9.2-p320/lib/ruby/gems/1.9.1/gems/rake-0.9.2.2/lib/rake/application.rb:133:in `standard_exception_handling'
/Users/alb64/.rbenv/versions/1.9.2-p320/lib/ruby/gems/1.9.1/gems/rake-0.9.2.2/lib/rake/application.rb:88:in `top_level'
/Users/alb64/.rbenv/versions/1.9.2-p320/lib/ruby/gems/1.9.1/gems/rake-0.9.2.2/lib/rake/application.rb:66:in `block in run'
/Users/alb64/.rbenv/versions/1.9.2-p320/lib/ruby/gems/1.9.1/gems/rake-0.9.2.2/lib/rake/application.rb:133:in `standard_exception_handling'
/Users/alb64/.rbenv/versions/1.9.2-p320/lib/ruby/gems/1.9.1/gems/rake-0.9.2.2/lib/rake/application.rb:63:in `run'
/Users/alb64/.rbenv/versions/1.9.2-p320/lib/ruby/gems/1.9.1/gems/rake-0.9.2.2/bin/rake:33:in `<top (required)>'
/Users/alb64/.rbenv/versions/1.9.2-p320/bin/rake:23:in `load'
/Users/alb64/.rbenv/versions/1.9.2-p320/bin/rake:23:in `<main>'
Tasks: TOP => environment
rake aborted!
Command failed with status (1): [/Users/alb64/.rbenv/versions/1.9.2-p320/bi...]
/Users/alb64/.rbenv/versions/1.9.2-p320/lib/ruby/gems/1.9.1/gems/rake-0.9.2.2/lib/rake/file_utils.rb:53:in `block in create_shell_runner'
/Users/alb64/.rbenv/versions/1.9.2-p320/lib/ruby/gems/1.9.1/gems/rake-0.9.2.2/lib/rake/file_utils.rb:45:in `call'
/Users/alb64/.rbenv/versions/1.9.2-p320/lib/ruby/gems/1.9.1/gems/rake-0.9.2.2/lib/rake/file_utils.rb:45:in `sh'
/Users/alb64/.rbenv/versions/1.9.2-p320/lib/ruby/gems/1.9.1/gems/rake-0.9.2.2/lib/rake/file_utils_ext.rb:39:in `sh'
/Users/alb64/.rbenv/versions/1.9.2-p320/lib/ruby/gems/1.9.1/gems/rake-0.9.2.2/lib/rake/file_utils.rb:80:in `ruby'
/Users/alb64/.rbenv/versions/1.9.2-p320/lib/ruby/gems/1.9.1/gems/rake-0.9.2.2/lib/rake/file_utils_ext.rb:39:in `ruby'
/Users/alb64/.rbenv/versions/1.9.2-p320/lib/ruby/gems/1.9.1/gems/actionpack-3.2.0/lib/sprockets/assets.rake:9:in `ruby_rake_task'
/Users/alb64/.rbenv/versions/1.9.2-p320/lib/ruby/gems/1.9.1/gems/actionpack-3.2.0/lib/sprockets/assets.rake:17:in `invoke_or_reboot_rake_task'
/Users/alb64/.rbenv/versions/1.9.2-p320/lib/ruby/gems/1.9.1/gems/actionpack-3.2.0/lib/sprockets/assets.rake:25:in `block (2 levels) in <top (required)>'
/Users/alb64/.rbenv/versions/1.9.2-p320/lib/ruby/gems/1.9.1/gems/rake-0.9.2.2/lib/rake/task.rb:205:in `call'
/Users/alb64/.rbenv/versions/1.9.2-p320/lib/ruby/gems/1.9.1/gems/rake-0.9.2.2/lib/rake/task.rb:205:in `block in execute'
/Users/alb64/.rbenv/versions/1.9.2-p320/lib/ruby/gems/1.9.1/gems/rake-0.9.2.2/lib/rake/task.rb:200:in `each'
/Users/alb64/.rbenv/versions/1.9.2-p320/lib/ruby/gems/1.9.1/gems/rake-0.9.2.2/lib/rake/task.rb:200:in `execute'
/Users/alb64/.rbenv/versions/1.9.2-p320/lib/ruby/gems/1.9.1/gems/rake-0.9.2.2/lib/rake/task.rb:158:in `block in invoke_with_call_chain'
/Users/alb64/.rbenv/versions/1.9.2-p320/lib/ruby/1.9.1/monitor.rb:201:in `mon_synchronize'
/Users/alb64/.rbenv/versions/1.9.2-p320/lib/ruby/gems/1.9.1/gems/rake-0.9.2.2/lib/rake/task.rb:151:in `invoke_with_call_chain'
/Users/alb64/.rbenv/versions/1.9.2-p320/lib/ruby/gems/1.9.1/gems/rake-0.9.2.2/lib/rake/task.rb:144:in `invoke'
/Users/alb64/.rbenv/versions/1.9.2-p320/lib/ruby/gems/1.9.1/gems/rake-0.9.2.2/lib/rake/application.rb:116:in `invoke_task'
/Users/alb64/.rbenv/versions/1.9.2-p320/lib/ruby/gems/1.9.1/gems/rake-0.9.2.2/lib/rake/application.rb:94:in `block (2 levels) in top_level'
/Users/alb64/.rbenv/versions/1.9.2-p320/lib/ruby/gems/1.9.1/gems/rake-0.9.2.2/lib/rake/application.rb:94:in `each'
/Users/alb64/.rbenv/versions/1.9.2-p320/lib/ruby/gems/1.9.1/gems/rake-0.9.2.2/lib/rake/application.rb:94:in `block in top_level'
/Users/alb64/.rbenv/versions/1.9.2-p320/lib/ruby/gems/1.9.1/gems/rake-0.9.2.2/lib/rake/application.rb:133:in `standard_exception_handling'
/Users/alb64/.rbenv/versions/1.9.2-p320/lib/ruby/gems/1.9.1/gems/rake-0.9.2.2/lib/rake/application.rb:88:in `top_level'
/Users/alb64/.rbenv/versions/1.9.2-p320/lib/ruby/gems/1.9.1/gems/rake-0.9.2.2/lib/rake/application.rb:66:in `block in run'
/Users/alb64/.rbenv/versions/1.9.2-p320/lib/ruby/gems/1.9.1/gems/rake-0.9.2.2/lib/rake/application.rb:133:in `standard_exception_handling'
/Users/alb64/.rbenv/versions/1.9.2-p320/lib/ruby/gems/1.9.1/gems/rake-0.9.2.2/lib/rake/application.rb:63:in `run'
/Users/alb64/.rbenv/versions/1.9.2-p320/lib/ruby/gems/1.9.1/gems/rake-0.9.2.2/bin/rake:33:in `<top (required)>'
/Users/alb64/.rbenv/versions/1.9.2-p320/bin/rake:23:in `load'
/Users/alb64/.rbenv/versions/1.9.2-p320/bin/rake:23:in `<main>'
Tasks: TOP => assets:precompile 
```

**编辑：**

这是 config/environment.rb：

```
# Load the rails application
require File.expand_path('../application', __FILE__)
require 'rails_extensions'

# Initialize the rails application
Reservations::Application.initialize! 
```

这是 config/environments/production.rb：

Reservations::Application.configure do # 此处指定的设置将优先于 config/application.rb 中的设置

```
 # The production environment is meant for finished, "live" apps.
  # Code is not reloaded between requests
  config.cache_classes = true

  # Full error reports are disabled and caching is turned on
  config.consider_all_requests_local       = false
  config.action_controller.perform_caching = true

  # Specifies the header that your server uses for sending files
  config.action_dispatch.x_sendfile_header = "X-Sendfile"

  # For nginx:
  # config.action_dispatch.x_sendfile_header = 'X-Accel-Redirect'

  # If you have no front-end server that supports something like X-Sendfile,
  # just comment this out and Rails will serve the files

  # See everything in the log (default is :info)
  # config.log_level = :debug

  # Use a different logger for distributed setups
  # config.logger = SyslogLogger.new

  # Use a different cache store in production
  # config.cache_store = :mem_cache_store

  # Disable Rails's static asset server
  # In production, Apache or nginx will already do this
  config.serve_static_assets = false

  # Enable serving of images, stylesheets, and javascripts from an asset server
  # config.action_controller.asset_host = "http://assets.example.com"

  # Disable delivery errors, bad email addresses will be ignored
  # config.action_mailer.raise_delivery_errors = false

  # Enable threaded mode
  # config.threadsafe!

  # Enable locale fallbacks for I18n (makes lookups for any locale fall back to
  # the I18n.default_locale when a translation can not be found)
  config.i18n.fallbacks = true

  # Send deprecation notices to registered listeners
  config.active_support.deprecation = :notify

  # Compress JavaScripts and CSS
  config.assets.compress = true

  # Choose the compressors to use
  config.assets.js_compressor  = :uglifier
  config.assets.css_compressor = :yui

  # Don't fallback to assets pipeline if a precompiled asset is missed
  config.assets.compile = false

  # Generate digests for assets URLs.
  config.assets.digest = true

  # Defaults to Rails.root.join("public/assets")
  # config.assets.manifest = YOUR_PATH

  # Precompile additional assets (application.js, application.css, and all non-JS/CSS are already added)
  # config.assets.precompile += %w( search.js )
end 
```

**编辑#2：**所以我已将 config.assets.digest 更改为 false，现在`rake assets:precompile`运行良好，但是当我启动服务器（nginx + 乘客 phusion）时，我得到了相同的错误和相同的跟踪： ``@application.css' is not allowed as an instance variable name`

**编辑＃3：**好的，我已经进一步缩小了范围。它肯定与 public/assets/manifest.yml 中的条目有关。我通过删除清单 (application.css) 中的第一个条目来测试这一点，并且错误更改以反映*新*的第一个条目*application.js*。仍然是同样的错误，只是使用了一个新的“实例变量”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T08:10:40.157

这可能不是您的 application.css 文件的错。问题出在 psych 上，可能是因为它导致加载 public/assets/manifest.yml 时出现问题，在 braid 提交上看到这个类似的错误，并有一个可能的解决方案：

[https://github.com/evilchelu/braid/commit/f08fac25570a1a56de8d6282f637d0604ef5e210](https://github.com/evilchelu/braid/commit/f08fac25570a1a56de8d6282f637d0604ef5e210)

尝试删除心理，或者如果这不可能，则在那里寻找问题。查看堆栈跟踪的这一部分：

```
 psych.rb:205:in `load_file' 
```

如果您想保留它，您应该能够找到一个可以解决此问题的 psych 补丁。

# android - 尽管插入 USB 并打开 USB 调试，Android 设备仍显示脱机

> ID：11485878
> 
> 赞同：15
> 
> 时间：2012-07-14T17:31:28.397
> 
> 标签：android, android-emulator

我正在尝试在三星 Galaxy Ace 上运行我的 Android 应用程序。尽管插入了 USB 并启用了调试，当我尝试运行应用程序时，Eclipse 会打印出一条消息说

```
[2012-07-14 22:56:19 - Cricket] Android Launch!
[2012-07-14 22:56:19 - Cricket] adb is running normally.
[2012-07-14 22:56:19 - Cricket] Performing nikhil.android.cricket.MainActivity activity launch
[2012-07-14 22:56:19 - Cricket] No active compatible AVD's or devices found. Relaunch this configuration                     after connecting a device or starting an AVD. 
```

我想补充一点，我一直在尝试很多，但无能为力。我尝试杀死 adb 并重新启动它。同样的错误。此外，当我连接我朋友的三星 Galaxy Note 时，我可以立即运行它。但它不能在我的三星 Galaxy Ace 上运行。我会很感激我能得到的任何帮助。

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-07-14T18:03:39.997

转到 Eclipse IDE 中的 DDMS。

![](../Images/3be86d2b0c25323869bedd9d06a2a51d.png)

有一个菜单：展开该菜单并选择*Reset adb*选项。

![](../Images/edc2cef2942d043dbb7087d67047b1ba.png)

等待几秒钟，它将重置您选择的 ADB 设备。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-12-29T10:37:25.153

只需重新启动手机，它将解决您的问题。不需要 adb restart 是必需的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-15T12:25:27.090

首次在 Windows 7 上安装 Android USB 驱动程序：

1.  将 Android 设备连接到计算机的 USB 端口。
2.  从桌面或 Windows 资源管理器中右键单击计算机，然后选择管理。
3.  在左侧窗格中选择设备。
4.  在右侧窗格中找到并展开其他设备。
5.  右键单击设备名称（例如 Nexus S）并选择更新驱动程序软件。这将启动硬件更新向导。
6.  选择浏览我的计算机以查找驱动程序软件，然后单击下一步。
7.  单击浏览并找到 USB 驱动程序文件夹。（Google USB 驱动程序位于 \extras\google\usb_driver。）
8.  单击下一步安装驱动程序。或者，要使用新驱动程序升级 Windows 7 上现有的 Android USB 驱动程序：

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-14T19:28:07.113

我在三星 Google Nexus 上也遇到了同样的问题。我使用 Mac 并按照以下步骤解决了我的问题

如果您在 Eclipse 上开发，请跳过第 2 步

1：在手机上启用USB调试。
对于低于 3.2 的版本，请转到设置->应用程序->
4.0 版及更高版本的开发，它在设置->
4.2 的开发中隐藏。转到设置->关于手机并点击内部版本号 7 次（将显示您现在是开发人员的消息）

2：在您的清单文件中添加 android:debuggable="true" 到应用程序元素

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-11-17T00:48:11.130

您可能需要更改活动的*USB 计算机连接*设置。我在运行基于 Android 4.3 的 Beanstalk 自定义 rom 时遇到了同样的问题。它是通过从默认*媒体设备 (MTP)*切换到*大容量存储*来解决的。然后该设备被 eclipse 自动识别。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2014-03-14T10:55:49.207

视窗：

`Start Menu button`>*类型：* cmd

**问题**，设备离线：

`adb devices`

> `List of devices attached`
> `07952b41`**离线**

1.  `adb kill-server`
2.  `adb start-server` *（等几秒……）*
3.  `adb devices`

> `List of devices attached`
> `07952b41`**设备**

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2014-05-29T02:34:24.177

我使用三星 Galaxy 5 (4.4.2) 尝试了此列表中的所有内容，但均无济于事。我最终让它工作的唯一方法是选择“撤销 USB 调试授权”选项，这导致我的手机提示我授权我的计算机使用它进行调试——然后它才显示为“在线”。

安装具有增强的 USB 调试安全性的较新的 google/samsung 驱动程序似乎不会自行触发授权提示。似乎您需要通过撤销所有以前的授权来帮助它，即使是在新手机上也是如此。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2014-06-05T20:51:31.427

我的新更新到 Kitkat GT-N7100 时遇到了这个问题。我尝试了一切

*   取消隐藏的开发者菜单并启用 USB 调试
*   重置亚行
*   安装最新的 USB 设备驱动程序
*   安装最新的 KIES

没有工作。

设备在 ddms 中总是处于离线状态。

如果您尝试了所有这些但仍然没有用，那么试试这个：

[http://www.droidextra.org/2013/12/24/solved-fix-adb-devices-offline-100-working.html](http://www.droidextra.org/2013/12/24/solved-fix-adb-devices-offline-100-working.html)

它对我有用。

阿基夫，

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2013-01-28T05:53:22.507

如果**您的三星移动驱动程序未成功安装**，那么也可能会出现此问题

所以从以下链接下载驱动程序并将其安装在您的 PC[链接中](http://forum.xda-developers.com/showthread.php?t=961956)

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2013-02-22T10:08:12.867

在 AndroidManifest.xml 中，查看您的 minSdkVersion 和 targetSdkVersion 是否与您的设备匹配。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2013-02-26T07:13:21.683

Eclipse 可能没有问题。尝试运行 adb shell 并查看它是否连接到您的设备。如果没有，这可能表明存在许多问题：USB 端口（尝试不同的端口和/或拔下其他外围设备）、操作系统（尝试重新启动）、USB 电缆（尝试不同的端口）、或手机（尝试重新启动它或尝试不同的手机）。

Eclipse 只是链条中的最后一个环节。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2013-05-13T19:12:49.387

我的 HTC 手机也有同样的问题，在我使用 android google play services for maps v2 之前，它与其他应用程序配合得很好。您可以在下面找到有关如何安装示例的链接。

[http://nlabs.wordpress.com/2012/12/13/the_maps_sample_from_google_play_services/](http://nlabs.wordpress.com/2012/12/13/the_maps_sample_from_google_play_services/)

我尝试了在这个线程中提出的建议，但没有任何进展。

然后我发现我的错误是我没有覆盖下面的默认设置，而是添加了我的条目。所以我做了正确的，但仍然得到同样的错误。

```
<meta-data
    android:name="com.google.android.maps.v2.API_KEY"
    android:value="inter your code" /> 
```

然后我运行调试模式。有效。到达 HTC 后，系统提示我安装“Google Play 服务”，这是预期的并且可以安装。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2013-07-17T09:07:22.793

只需做一件事将您的 minsdkVersion 更改为 8，在您的清单文件中它肯定可以工作....

```
> android:minSdkVersion="8" 
```

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2013-09-19T09:50:46.007

您需要“重置亚行”。之后，您的设备可能会询问

> 允许USB调试？

在那个屏幕上，检查

> 始终允许从此计算机

将来可能会为您解决该设备和计算机的问题。查看更多信息：[https ://stackoverflow.com/a/16224992/143808](https://stackoverflow.com/a/16224992/143808)

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2013-12-28T05:45:00.610

1.  首先从他们各自的网站下载适用于您的 android 手机的 USB 驱动程序。*对于三星手机，您可以使用[此链接](http://forum.xda-developers.com/showthread.php?t=961956)。*
2.  点击重置abd。
3.  重启你的手机。

当我遇到同样的问题时，这对我有用。

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2014-09-23T17:45:14.627

使用最新的 adb 有帮助，谢谢 Akif。使用 kill-server 然后使用最新的 adb 启动服务器。它还将解决其他一些问题。

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2015-02-04T13:50:57.597

打开`Window Task Manager`和`close adb.exe`。解决我的问题。并**重置 USB 调试**。

* * *

## 回答 #18

> 赞同：-3
> 
> 时间：2014-03-20T06:54:24.397

没有必要做这一切。

只需将您的电脑恢复到更早的时间。它在控制面板、系统和安全上。

# python - Python 编译器是否可以优化一些整数运算？

> ID：11485879
> 
> 赞同：4
> 
> 时间：2012-07-14T17:31:28.823
> 
> 标签：python, compiler-construction

受[这个](https://stackoverflow.com/questions/11476190/why-0-6-is-6-false)关于 Python 缓存小整数的问题的启发。

Python 编译器是否可以在编译时将 (0 - 6) 替换为 -6？下面的代码表明它没有。如果不可能，为什么不呢？我不认为`0`, `-`, or的含义`6`在运行时会有所不同。

如果这是可能的，为什么 CPython 不这样做呢？

```
# test_integers.py
def test_integers():
    print "-6 is -6 ?", -6 is -6 # True
    print "(0 - 6) is -6 ?", (0 - 6) is -6 # False

# import_test_integers.py
import test_integers
test_integers.test_integers() 
```

如果这非常依赖于实现，我的 Python 详细信息：

```
Python 2.6.5 (r265:79063, Apr 16 2010, 13:09:56) 
[GCC 4.4.3] on linux2 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-14T17:41:39.370

首先，您不应该使用`is`比较整数值来检测优化。正如您链接的问题中所解释的那样，这与任何事情无关。如果您想知道对您的函数执行了哪些优化，请使用[dis](http://docs.python.org/library/dis.html)模块，它产生（在 2.7.2 中，在修复您的`-1`错字之后）：

```
>>> import dis
>>> 
>>> def test_integers():
...     print "-6 is -6 ?", -6 is -6 # True
...     print "(0-6) is -6 ?", (0 - 6) is -6 # False
... 
>>> dis.dis(test_integers)
  2           0 LOAD_CONST               1 ('-6 is -6 ?')
              3 PRINT_ITEM          
              4 LOAD_CONST               2 (-6)
              7 LOAD_CONST               2 (-6)
             10 COMPARE_OP               8 (is)
             13 PRINT_ITEM          
             14 PRINT_NEWLINE       

  3          15 LOAD_CONST               3 ('(0-6) is -6 ?')
             18 PRINT_ITEM          
             19 LOAD_CONST               6 (-6)
             22 LOAD_CONST               2 (-6)
             25 COMPARE_OP               8 (is)
             28 PRINT_ITEM          
             29 PRINT_NEWLINE       
             30 LOAD_CONST               0 (None)
             33 RETURN_VALUE 
```

你会看到减法实际上*已经被*优化掉了。你也可以看到其他一些：

```
>>> def f():
...     x = 1+2
...     x = 2-3
...     x = 3*4
...     x = 4/5
...     x = 5**6
... 
>>> dis.dis(f)
  2           0 LOAD_CONST               7 (3)
              3 STORE_FAST               0 (x)

  3           6 LOAD_CONST               8 (-1)
              9 STORE_FAST               0 (x)

  4          12 LOAD_CONST               9 (12)
             15 STORE_FAST               0 (x)

  5          18 LOAD_CONST               4 (4)
             21 LOAD_CONST               5 (5)
             24 BINARY_DIVIDE       
             25 STORE_FAST               0 (x)

  6          28 LOAD_CONST              10 (15625)
             31 STORE_FAST               0 (x)
             34 LOAD_CONST               0 (None)
             37 RETURN_VALUE 
```

# node.js - ExpressJS 节点 HTTPS 服务器上的 Heroku 错误 H13

> ID：11485880
> 
> 赞同：2
> 
> 时间：2012-07-14T17:31:45.713
> 
> 标签：node.js, ssl, heroku, https, express

我正在尝试在我的 Node.js 服务器（Expressjs 框架）上实现 HTTPS。我有我的签名证书和密钥，以及用于测试/开发的自签名证书/密钥：

```
if(process.env.NODE_ENV == 'production'){
  var app = module.exports = express.createServer({
    key: fs.readFileSync('./ssl/nopass_server.key'),
    cert: fs.readFileSync('./ssl/server.crt')
  });
} else {
  var app = module.exports = express.createServer({
    key: fs.readFileSync('./ssl/self_signed/nopass_server.key'),
    cert: fs.readFileSync('./ssl/self_signed/server.crt')
  });
} 
```

我还在 Heroku 上设置了 SSL 端点。一切正常`localhost`，端点似乎工作正常，但是当我在生产环境（在 Heroku 上）运行应用程序时，我收到 H13 应用程序错误。有趣的是（或不是），如果我告诉 express 创建一个 HTTP 服务器：`var app = module.exports = express.createServer()`它可以工作，但是 Chrome 会抱怨`the page at https://mydomain.com ran insecure content from http://mydomain.com`.

我可以不/不应该为生产快速创建 HTTPS 服务器吗？如果我应该，我需要什么额外的东西才能让它在 Heroku 上工作（例如，我相信它可以设置正确的端口`var port = process.env.PORT`）？如果没有，如果它没有运行 https 服务器，我如何提供“安全”内容，这样浏览器就不会抱怨？

我正在使用以下内容来处理任何非 https 请求：

```
app.get('*',function(req,res,next){
  if(req.headers['x-forwarded-proto'] != 'https'){
    res.redirect('https://mydomain.com'+req.url);
  } else next();
}); 
```

这目前位于我其余路线的上方，这可能是问题/应该在其他地方吗？

一般来说，我对 https 的经验非常有限，所以我可能遗漏了一些明显的东西。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-14T22:50:07.897

SSL 终止发生在 Heroku 的负载均衡器上；它们向您的应用发送纯（非 SSL）流量，因此您的应用应创建非 HTTPS 服务器。至于`the page at https://mydomain.com ran insecure content from http://mydomain.com`，请确保所有图像/脚本/等。您使用的页面也通过`https`协议提供。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-24T08:40:03.247

您可以使用`app.enable('trust proxy')`, then`req.secure`也可以在 Heroku 上使用。

# zend-framework - Zend Framework 一条路线工作一条路线不

> ID：11485882
> 
> 赞同：0
> 
> 时间：2012-07-14T17:31:53.877
> 
> 标签：zend-framework, routing, zend-route

我为我的 ZF 应用程序设置了 2 条类似的路线，其中一条有效，另一条无效。这个显示数据库中的项目供用户查看，效果很好：

在我的引导程序中路由：

```
//Static item profile
    $route = new Zend_Controller_Router_Route('item/:item_id',
                                                array('controller'=> 'item',
                                                'action'=> 'index'));
    $router->addRoute('item', $route); 
```

我在项目控制器的索引操作中获取项目 ID 的位置：

```
$id = $this->getRequest()->getParam('item_id'); 
```

我在后端设置了这个，以允许管理员编辑项目数据：

```
//Management back end
    $route = new Zend_Controller_Router_Route('manage/edititem/:item_id',
                                                array('controller'=> 'manage',
                                                'action'=> 'edititem'));
    $router->addRoute('manage', $route); 
```

这就是我在管理控制器的 edititem 操作中获得 id 的地方：

```
$item_id = $this->getRequest()->getParam('item_id'); 
```

出于某种原因，如果我导航到 /manage/edititem/:item_id，此项目中的 item_id 总是为空，但如果我转到 /manage/edititem/item_id/:item_id，它工作得非常好。如果我尝试使用自定义路由，为什么路由不起作用？它没有被更早的路线捕获，因为它仍在执行 edititem 操作中的代码，我没有遗漏它上面的任何分号，我复制并粘贴了它，所以我怀疑这是一个错字。我的路线可能有什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-12T13:40:54.093

自从发布这个问题以来，我已经重写了几条路线，但我相信问题出在我在这里设置的名称上。

```
$router->addRoute('manage', $route); 
```

当时我不知道这个限制，但是对于 zend 路由器，每个名称都必须是唯一的，我相信当时我有 2 条名为 manage 的路由。我的大多数路线仍然是相同的，但它们现在有更多描述性的名称，我不再遇到这个问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-14T19:08:13.510

海梅，

您的代码看起来正确...我刚刚在我的本地实例上对其进行了测试，并且重新路由适用于

```
$route = new Zend_Controller_Router_Route('manage/edititem/:item_id',array('controller'=> 'manage','action'=> 'edititem')); 
```

这使我认为问题出在其他地方。我要尝试的第一件事是禁用引导程序中的所有其他路由，看看那里是否真的没有冲突。

另一个要尝试的方法是使用与 item_id 不同的字段名称。如果有超过 1 个具有相同字段名称的路由需要传递给控制器​​，那么路由器管理器可能会不知何故感到困惑。

# android - 如何在 viewflipper 中的布局之间滑动？

> ID：11485885
> 
> 赞同：0
> 
> 时间：2012-07-14T17:32:11.790
> 
> 标签：android, viewflipper

我在 viewflipper 的第一个布局中有几个按钮，我想知道如何在按钮上滑动并切换到 viewflipper 中的第二个布局。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-14T18:22:19.913

要在 ViewFlipper 中的布局之间滑动，请使用以下方法

[显示上一个（）](http://developer.android.com/reference/android/widget/ViewAnimator.html#showPrevious%28%29)

[显示下一个（）](http://developer.android.com/reference/android/widget/ViewAnimator.html#showNext%28%29)

或者

[开始翻转（）](http://developer.android.com/reference/android/widget/ViewFlipper.html#startFlipping%28%29)

前两个方法派生自父类[ViewAnimator](http://developer.android.com/reference/android/widget/ViewAnimator.html)

示例请参考以下链接：

[http://dj-android.blogspot.in/2012/03/view-flipper-example-android.html](http://dj-android.blogspot.in/2012/03/view-flipper-example-android.html)

当然，在您的情况下，您应该在按钮的 onClick 方法中触发 showPrevious/showNext/startFlipping

# python - 生成 python 函数来包装 REST API

> ID：11485889
> 
> 赞同：3
> 
> 时间：2012-07-14T17:32:52.780
> 
> 标签：python, rest

我有一个 REST API，比如：

```
http://localhost/api/v1/foo1
http://localhost/api/v1/foo2
http://localhost/api/v1/foo3 
```

我想要一个看起来像的python客户端

```
api({some kinda init code})

result1 = api.get_foo1(params)
result2 = api.post_foo2(params)
result2 = api.post_foo2(params) 
```

我真的很懒，我想知道是否有一些现有的 python 包可以为我生成这样的 API。

我已经在 SO 中进行了一些搜索，到目前为止我发现的最佳方法是使用 python-requests 包，并编写我自己的包装器来美化它。有什么更容易的吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-14T17:46:51.657

您可以尝试在 Google Code 上使用[python-rest-client](http://code.google.com/p/python-rest-client/wiki/Using_Connection)，您可以在其中进行如下所示的调用：

```
conn.request_get("/search", args={'q':'Test'}, headers={'Accept':'text/json'}) 
```

但是您可以很快看到，您仍然需要创建某种包装器来实现示例调用的简单性。

请记住，使用 REST，您无法预知服务调用将返回什么，因此您无法为 REST 提供一刀切的 API。最终，您需要将您的 http 调用包装成方便您需要的东西。

我建议您自己执行此操作 - 这将帮助您进行维护，因为您不会在客户端和 API 本身之间引入抽象层。

# qt - Qt - 有没有办法在 UI 上“实时”查看 QImage？

> ID：11485891
> 
> 赞同：1
> 
> 时间：2012-07-14T17:33:18.020
> 
> 标签：qt, user-interface, qimage

我正在学习Qt，遇到了一个我想不通的问题，所以想请教高手！

我正在开发一个应用程序，我希望有一个 QImage 对象（使用格式 QImage::Format_RGB888），并且能够使用 setPixel() 方法操作单个像素并使用 QImageWriter 保存图像......到目前为止，超好的。这一切都有效。

我展示这个 Qimage 的方式是 QMainWIdow 包含一个 QGraphicsView 对象，我创建了一个 QGraphicsScene，并在我的 MainWindow graphicsView 上设置了那个场景。

问题是我希望能够在 UI 上“实时”显示这个 QImage，这样用户就可以看到像素在被操纵时发生变化。目前，每次我想看到新的变化时，我都必须从图像中重新生成一个 QGraphicsPixmapItem，并将 addPixmap() 重新添加到场景中。

有没有办法实时查看 QImage，以便立即看到所做的更改？我是否使用了错误的对象来保存和/或显示我的图像？

我附上了一个简单的例子（只是 mainwindow.cpp 部分......其他文件只是默认的东西）。这个 UI 只有一个按钮（用于触发 QImage 更改），以及在屏幕上显示 QImage 的位置。

我搜索了互联网，但没有遇到任何似乎相关的帖子。如果有人有任何建议，我将不胜感激！谢谢，

-埃里克

```
QGraphicsScene *scene = NULL;
QGraphicsItem *line = NULL;
QImage *image = NULL;
QGraphicsPixmapItem *item = NULL;

MainWindow::MainWindow(QWidget *parent) :
    QMainWindow(parent),
    ui(new Ui::MainWindow)
{
    ui->setupUi(this);

    scene = new QGraphicsScene();
    image = new QImage(60, 60, QImage::Format_RGB888 );

    image->fill(Qt::cyan);

    ui->retranslateUi(this);
    ui->graphicsView->setScene(scene);
    ui->graphicsView->show();

    line = (QGraphicsItem*) scene->addLine( QLine( 20, 40, 300, 100 ),
                    QPen(Qt::red, 6, Qt::DashLine, Qt::FlatCap));
    scene->setBackgroundBrush(QBrush(Qt::green, Qt::SolidPattern));
    scene->addEllipse(40, 80, 300, 240,
                        QPen(Qt::blue, 10, Qt::DashDotDotLine, Qt::RoundCap));

    item = new QGraphicsPixmapItem(QPixmap::fromImage(*image));
    scene->addPixmap(item->pixmap());

    // Connect the pushbutton to the buttonPressed method, below.
    connect(    ui->pushButton, SIGNAL(pressed()),
                this, SLOT( buttonPressed() ) );
}

// Slot connected to the button being pressed.
// Manipulate some pixels, and show the results.
void MainWindow::buttonPressed()
{
    printf("Now in buttonPressed...\n");
    int x, y;
    int offset = qrand();
    QRgb px;

    px = qRgb(20+offset, 10-offset, 30+offset);

    for (x=0; x< 60; x++)
        for(y=0; y< 60; y++)
        {
            image->setPixel(x, y, px );
        }
    // I'd like to NOT have to re-convert the image every time.
    item = new QGraphicsPixmapItem(QPixmap::fromImage(*image));
    scene->addPixmap(item->pixmap());
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-14T17:39:10.550

您可以通过使用 Qpixmap::fromImage 在适当位置创建像素图来直接在 QLabel 上绘制

或者，您可以通过从 QWidget 派生并重载绘制事件来制作 onw 图像显示小部件

```
void DisplayWidget::paintEvent(QPaintEvent*)
{

  QPainter p(this);
  p.drawImage(m_image); // you can also specfy a src and dest rect to zoom
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T10:56:56.410

我认为更好的方法是让 Qgraphicsitem 从 QGraphicsItem 派生为您的 Image 并在 Mainwindow 的构造函数中添加一次。

```
scene->addItem(Myimageitem); 
```

因此，通过这种方式，您无需在每次迭代后都执行此操作，并且每当调用更新时，您的图像都会自动更新。

# python - 为什么这个 Python 代码在 Ubuntu 上会出现段错误，但在 Windows 上却没有？

> ID：11485892
> 
> 赞同：0
> 
> 时间：2012-07-14T17:33:31.600
> 
> 标签：python, windows, ubuntu, segmentation-fault, pygame

我为我的个人 Python 项目写了一个简单的（我认为是这样的）星空动画。就在游戏进入“可玩”阶段的时候，我决定进行另一个项目；使用 Windows/Ubuntu 双引导进行实验。虽然 Windows/Ubuntu 实验的细节是一个真正的翻页，但相关问题更多的是“为什么这段代码在 Windows XP 上运行良好，但在 Ubuntu 12.04 上导致各种崩溃”？

此代码是使用 Pygame 1.9 为 Python 2.7 编写的。

```
import pygame, random, sys
from pygame import *

pygame.init()

width = 400
height = 400
BLACK = (0, 0, 0)
WHITE = (255, 255, 255)

DISPLAYSURF = pygame.display.set_mode((width, height))

stars = 50
starfield = []

for i in range(stars):
    x = random.randrange(0, width)
    y = random.randrange(0, height)
    starfield.append([x, y])

clock = pygame.time.Clock()
FPS = 60

while True:
    for event in pygame.event.get():
        if event.type == QUIT:
           pygame.quit()
           sys.exit()

DISPLAYSURF.fill(BLACK)

starCounter = 0
for star in starfield:
    starCounter += 1
    x, y = star
    starDraw = pygame.PixelArray(DISPLAYSURF)
    starDraw[x][y] = WHITE
    del starDraw

            #fake parallax scrolling effect
    star[1] += 1
    if starCounter % 3 == 1:
        star[1] += 1

    if starCounter % 5 == 1:
        star[1] += 1

    if star[1] > height:
        star[0] = random.randrange(0, width)
        star[1] = 0 
```

最终我通过用 surface.set_at() 替换 PixelArray 废话解决了这个问题，并删除了所有与实例化 PixelArray 对象相关的代码。但这不仅仅是（Pygame 降落伞品种的）段错误，我会收到各种奇怪的错误消息；关于 gcclibrary、关于 malloc() 等的一些东西。请记住，我之前没有使用任何 IDLE 或类似的东西；我总是从命令行和/或终端运行一切。

我以前遇到的那种错误不一定与我有关；事实上，Windows 只会让他们沉默，而 Ubuntu 则非常乐意指出并嘲笑他们。显然，这一定是 PEBKAC 的结果，但是 Windows 到底为什么要对我隐瞒这些信息呢？在这个论点的另一面；在 Ubuntu 下编码会原谅另一种坏习惯吗？如果 Windows 使某些类型的段错误保持沉默，那么 Ubuntu 是否会捕获一组不同的错误，我是否真的需要注意每个主要操作系统可能决定捕获或不捕获的所有不同的愚蠢错误？我只在这方面工作了大约一年，所以有很多信息我只是曝光不足并且不知道。

我的意思是，我想如果你想告诉我旧代码的错误，以防我觉得创建 PixelArray 对象是我将来需要做的事情，我也不介意。:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T23:21:08.983

您提供的代码可以在我的机器（Ubuntu 11.10、Python 2.7.2）上正常工作而不会崩溃。如果我注释掉该`while True`块以便以后的代码（`PixelArray`等）运行，它也可以工作。由于没有显示循环或其他任何东西，除了短暂弹出一个黑色窗口外，什么都没有显示，但没有任何类型的例外。

Windows 下的 Python 不会隐藏段错误等，Ubuntu 设置有问题。我怀疑这是三件事之一：

1.  Ubuntu 机器上的 Python 安装已损坏。
2.  pygame（或相关库）的安装已损坏。
3.  一些已编译的代码已从 Windows 复制过来，并在 Ubuntu 下运行时导致问题（不太可能，因为我希望它拒绝完全运行而不是开始运行然后引发问题，但我只是把它扔在那里如果）。

如果您编辑您的问题以包含错误的完整追溯，那么有人可能能够找出问题所在。

# jquery - DIV 位置不正确

> ID：11485893
> 
> 赞同：0
> 
> 时间：2012-07-14T17:33:40.010
> 
> 标签：jquery, css, html, position

我有以下 HTML 代码：

```
<div style="width: 960px; margin: 0; padding: 0;">
  <table border=1 cellPadding=0 cellSpacing=0 width=960>
    <tr>
       <td width=720 height=300>
         <div id="slider1">
            <ul id="slider1Content">
               <li class="slider1Image">
                 <a href=""><img src="theImages/1.jpg" alt="1" /></a>
                 <span class="left"><strong>Title text 1</strong><br />Content text...</span>
               </li>
               <li class="slider1Image">
                 <a href=""><img src="theImages/2.jpg" alt="2" /></a>
                 <span class="left"><strong>Title text 2</strong><br />Content text...Content text...Content text...Content text...Content text...Content text...Content text...Content text...Content text...Content text...Content text...</span>
               </li>
               <li class="slider1Image">
                 <img src="theImages/3.jpg" alt="3" />
                 <span class="left"><strong>Title text 2</strong><br />Content text...</span>
               </li>
               <li class="slider1Image">
                 <img src="theImages/4.jpg" alt="4" />
                 <span class="left"><strong>Title text 2</strong><br />Content text...</span>
              </li>
              <li class="slider1Image">
                 <img src="theImages/5.jpg" alt="5" />
                 <span class="left"><strong>Title text 2</strong><br />Content text...</span>
              </li>
              <div class="clear slider1Image"></div>
           </ul>
        </div>
      </td>
      <td width=240>fghfhg</td>
    </tr>
  </table>
</div> 
```

以及以下 CSS：

```
#slider1 {
    width: 720px; /* important to be same as image width */
    height: 300px; /* important to be same as image height */
    position: relative; /* important */
    overflow: hidden; /* important */
}

#slider1Content {
    width: 720px; /* important to be same as image width or wider */
    position: absolute;
    top: 0;
    margin-left: 0;
}
.slider1Image {
    float: left;
    position: relative;
    display: none;
}

.slider1Image span {
    position: absolute;
    font: 10px/15px Verdana, Arial, Helvetica, sans-serif;
    padding: 10px 13px;
    width: 694px;
    background-color: #FFFFFF;
    filter: alpha(opacity=90);
    -moz-opacity: 0.9;
    -khtml-opacity: 0.9;
    opacity: 0.7;
    color: #000000;
    display: none;
}
.clear {
    clear: both;
}
.slider1Image span strong {
    font-size: 14px;
}
.top {
    top: 0;
    left: 0;
}
.bottom {
    bottom: 0;
    left: 0;
}
.left {
    top: 0;
    left: 0;
    width: 125px !important;
    height: 280px;
}
.right {
    right: 0;
    bottom: 0;
    width: 90px !important;
    height: 290px;
}
ul { list-style-type: none;} 
```

我有两个问题：

1.  图像带有缩进而不是从盒子的开头开始。
2.  鼠标悬停菜单位于图像下方。

[这是一张图片](http://imageshack.us/photo/my-images/442/errorib.jpg)

我该如何解决这些错误？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-14T17:41:53.580

将 z-index 设置为下拉菜单。

[http://www.w3.org/wiki/CSS/Properties/z-index](http://www.w3.org/wiki/CSS/Properties/z-index)

# c# - ViewModel 在 MVVM Light 中未收到消息

> ID：11485897
> 
> 赞同：3
> 
> 时间：2012-07-14T17:34:28.513
> 
> 标签：c#, .net, windows-phone-7, mvvm, mvvm-light

我有两个 ViewModel：MainViewModel 和 QuestionViewModel。我在 ViewModelLocator 中注册它们。

```
SimpleIoc.Default.Register<MainViewModel>();
SimpleIoc.Default.Register<QuestionViewModel>(); 
```

在 MainViewModel 上，我有一个带有问题的 ListBox。单击时我执行此命令

```
NavigationService.NavigateTo(new Uri("/Pages/QuestionPage.xaml", UriKind.Relative));
Messenger.Default.Send<Question, QuestionViewModel>(q); 
```

QuestionPage 的 DataContext 设置为 QuestionViewModel。在 QuestionViewModel 我注册消息：

```
Messenger.Default.Register<Question>(this, q =>
{
    MessageBox.Show("!");
}); 
```

但此功能仅在 QuestionViewModel 的第二次打开时起作用，因为 QuestionViewModel 实例仅在第一次打开时创建。我的问题是：我需要在何时何地在 MVVM Light 中创建 QuestionViewModel 实例？我不想在启动时创建所有页面。

现在，我在构造函数 ViewModelLocator 中创建实例：

```
public ViewModelLocator()
{
    ServiceLocator.Current.GetInstance<QuestionViewModel>();
} 
```

这是好习惯吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-09T16:36:47.713

你是对的，这不是在`ViewModelLocator`构造函数中创建所有视图模型的好习惯。您遇到问题的原因`QuestionViewModel`是在您发送消息后创建的。您可以尝试创建一个服务，该服务将共享当前`Question`对象并将该服务注入到`MainViewModel`and`QuestionViewModel`中。

```
public interface IQuestionService
{
    Question CurrentQuestion {get; set;}
}

public class QuestionService : IQuestionService
{
    public Question CurrentQuestion {get; set;}
} 
```

然后只`Click`保存`MainViewModel`当前问题：

```
_questionService.CurrentQuestion = q; 
```

并用在你的`QuestionViewModel`

只需确保将相同的 IQuestionService 实例注入到视图模型中即可。

另一种变体是在 URL 中传递简单的导航参数，如下所示：

```
NavigationService.NavigateTo(new Uri("/Pages/QuestionPage.xaml?questionid=" + q.Id, UriKind.Relative)); 
```

或者，您可以尝试实现自己的支持传递参数的 NavigationService，但这更复杂。

# android - 在服务之间传递数据 (android)

> ID：11485902
> 
> 赞同：0
> 
> 时间：2012-07-14T17:35:37.367
> 
> 标签：android, eclipse, service, bundle

服务 A 将一些信息保存在字符串数组“information[]”中。当服务 A 完成时，它应该启动服务 B，并且服务 B 应该接收到字符串数组。如何才能做到这一点？我尝试在捆绑包中发送它，但似乎无法像通常在活动之间那样获取数据。

编辑：

这是我的代码：

服务 A，onDestroy

```
Intent is2 = new Intent(this, GatherInformationService.class);
is2.putExtra("information", info);
startService(is2); 
```

服务 B onCreate

```
Bundle b = new Bundle();
coords = b.getStringArray("information"); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-14T18:51:14.603

我看不到您的字符串数组应该如何存在于`Bundle`您创建的新对象中。似乎你应该把你的逻辑放到`onStartCommand`这样的方法中：

```
@Override
public int onStartCommand(Intent intent, int flags, int startId) {
    String[] info = intent.getStringArrayExtra("information");
} 
```

有关详细信息，请参阅开发人员指南[部分](http://developer.android.com/guide/components/services.html#StartingAService)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-14T17:54:37.257

您可以使用`intent.putExtra`方法：

在服务 A 中：

```
Intent intent = new Intent( this, YourTargetService.class );
intent.putExtra("YourExtraName", information ); 
```

在服务 B onCreate 中：

```
String[] received = getIntnet().getStringArrayExtra("YourExtraName"); 
```

那应该做的工作

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-14T17:47:07.527

一个面向对象的技巧。您可以使您的数组静态，您可以在 onCreate 方法上访问该数组，也可以在另一个服务中访问该数组，例如 ClassName.array = Service1.array

谢谢

# meteor - “栅栏已经激活——添加写入为时已晚”

> ID：11485904
> 
> 赞同：4
> 
> 时间：2012-07-14T17:35:46.307
> 
> 标签：meteor

以下错误信息是什么意思？

> 栅栏已经激活——添加写入为时已晚

以下是如何获取它的示例：

**环境**：

*   [Mac OS X](http://en.wikipedia.org/wiki/Mac_OS_X)狮子
*   流星 0.3.8

**项目创建**：

```
meteor create test
cd test
meteor add coffeescript http
mv test.js test.coffee
meteor 
```

**测试咖啡**：

```
Records = new Meteor.Collection("records")

if Meteor.is_client
    Meteor.startup ->
        Meteor.call "test"

if Meteor.is_server
    Meteor.methods
        test: ->
            Meteor.http.get "http://www.meteor.com", ->
                Records.insert some:"data" 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-16T19:04:56.057

一旦方法完成执行，您就不能添加额外的写入。要延迟完成这些方法，您可以使用 Futures。像这样的东西：

```
Meteor.methods({
  foo: function() {
    var futures = _.map(urls, function(url) {
      var future = new Future();
      var onComplete = future.resolver();

      Meteor.http.get(url, function(error, result) {
        // do whatever you need

        onComplete();
      });

      return future;
    });

    Future.wait(futures);
  }
}); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-21T01:50:32.557

方法必须在返回之前完成所有写入。

在这个例子中，最简单的方法是简单地省略回调，并使用 Meteor.http.get 的返回值：

```
if Meteor.is_server
    Meteor.methods
       test: ->
          data = Meteor.http.get "http://www.meteor.com"
          Records.insert some:"data" 
```

在幕后，这就像 avital 所说的那样使用 Futures。如果您想并行执行多个回调或其他复杂的事情，您可以使用 Futures api。但是，如果您只是发出一个请求，或者您的请求已经是按顺序排列的，则使用同步版本的`Meteor.http.get`作品更容易键入。

# php - Yii在模态中被调用时缺少操作验证码

> ID：11485905
> 
> 赞同：0
> 
> 时间：2012-07-14T17:36:05.353
> 
> 标签：php, yii, captcha

所以我有 Yii-user 和 Yii-bootstrap。当用户单击主页上的某些内容时，我想使用模式对话框加载注册表单。我已在所有控制器的操作中加载了该类。

```
 $this->beginWidget('bootstrap.widgets.BootModal', array('id'=>'logonDialog')); ?>
   <div class="modal-header">
    <a class="close" data-dismiss="modal">&times;</a>
    <h3>Inscription ou Connexion</h3></div>
    <div class="modal-body">
      <div class="row">
         <div class="span6"><?php
          $lmodel=new UserLogin;
          $this->renderPartial('application.modules.user.views.user.login',array('model'=>$lmodel,));
         ?></div>
         <div class="span6">
         <?
          $rmodel = new RegistrationForm;
          $rprofile=new Profile;
          $this->renderPartial('application.modules.user.views.user.registration',array('model'=>$rmodel,'profile'=>$rprofile));
         ?>
         </div>
      </div>
  </div>
 <div class="modal-footer"></div>
<?php $this->endWidget(); 
```

登录表单工作正常，但唯一的问题是注册表单上没有验证码，并且我在日志中收到错误消息：

```
2012/07/14 12:37:28 [warning] [application] Failed to set unsafe attribute "verifyCode" of "RegistrationForm".
in /home/something/protected/modules/user/controllers/RegistrationController.php (29)
in /home/something/public_html/test.php (15)
2012/07/14 12:37:32 [warning] [application] Failed to set unsafe attribute "verifyCode" of "RegistrationForm".
in /home/something/protected/modules/user/controllers/RegistrationController.php (29)
in /home/something/public_html/test.php (15)
2012/07/14 12:37:38 [warning] [application] Failed to set unsafe attribute "verifyCode" of "RegistrationForm".
in /home/something/protected/modules/user/controllers/RegistrationController.php (29)
in /home/something/public_html/test.php (15)
2012/07/14 12:37:41 [warning] [application] Failed to set unsafe attribute "verifyCode" of "RegistrationForm".
in /home/something/protected/modules/user/controllers/RegistrationController.php (29)
in /home/something/public_html/test.php (15)
2012/07/14 12:37:42 [warning] [application] Failed to set unsafe attribute "verifyCode" of "RegistrationForm".
in /home/something/protected/modules/user/controllers/RegistrationController.php (29)
in /home/something/public_html/test.php (15)
2012/07/14 12:37:48 [warning] [application] Failed to set unsafe attribute "verifyCode" of "RegistrationForm".
in /home/something/protected/modules/user/controllers/RegistrationController.php (29)
in /home/something/public_html/test.php (15)
2012/07/14 12:38:01 [warning] [application] Failed to set unsafe attribute "verifyCode" of "RegistrationForm".
in /home/something/protected/modules/user/controllers/RegistrationController.php (29)
in /home/something/public_html/test.php (15)
2012/07/14 12:38:04 [warning] [application] Failed to set unsafe attribute "verifyCode" of "RegistrationForm".
in /home/something/protected/modules/user/controllers/RegistrationController.php (29)
in /home/something/public_html/test.php (15)
2012/07/14 12:38:13 [warning] [application] Failed to set unsafe attribute "verifyCode" of "RegistrationForm".
in /home/something/protected/modules/user/controllers/RegistrationController.php (29)
in /home/something/public_html/test.php (15)
2012/07/14 12:38:14 [warning] [application] Failed to set unsafe attribute "verifyCode" of "RegistrationForm".
in /home/something/protected/modules/user/controllers/RegistrationController.php (29)
in /home/something/public_html/test.php (15)
2012/07/14 12:38:14 [warning] [application] Failed to set unsafe attribute "verifyCode" of "RegistrationForm".
in /home/something/protected/modules/user/controllers/RegistrationController.php (37)
in /home/something/public_html/test.php (15)
2012/07/14 12:44:56 [error] [exception.CHttpException.404] exception 'CHttpException' with message 'Le système ne peut trouver l'action « captcha » demandée.' in /home/something/yii/framework/web/CController.php:484
Stack trace:
#0 /home/something/yii/framework/web/CController.php(271): CController->missingAction('captcha')
#1 /home/something/yii/framework/web/CWebApplication.php(276): CController->run('captcha')
#2 /home/something/yii/framework/web/CWebApplication.php(135): CWebApplication->runController('user/login/capt...')
#3 /home/something/yii/framework/base/CApplication.php(162): CWebAp 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-15T07:10:32.347

您需要为同一模型上的多个表单使用不同的场景。阅读[yii 场景](http://www.yiiframework.com/wiki/266/understanding-scenarios/)。

您还需要[了解安全验证规则](http://www.yiiframework.com/wiki/161/understanding-safe-validation-rules/)。

# javascript - 在jsp页面中获取javascript数组变量

> ID：11485910
> 
> 赞同：-1
> 
> 时间：2012-07-14T17:36:38.770
> 
> 标签：javascript, jsp

我通过将参数作为数组变量传递来调用 jsp 页面

```
var textval1=new Array(),questions1=new Array(),txt1=new Array(); 
```

我使用 javascript 代码像这样调用 jsp 页面。

```
var jspcall = ("new1.jsp?graph="+txt1+"&text="+textval1+"&ques="+questions1);
document.getElementById('frames').src=jspcall; 
```

jsp 页面在 iframe 中加载，其 id 为框架。

我在jsp页面中检索这个元素。

```
String[] graph = request.getParameter("graph");
String[] answer1 = request.getParameter("text");
String[] ques = request.getParameter("ques"); 
```

但这向我显示了一个错误，任何人都可以帮助它检索数组值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T17:47:41.687

```
String[] graph = request.getParameterValues("graph"); 
String[] answer1 = request.getParameterValues("text");
String[] ques = request.getParameterValues("ques"); 
```

# c - Lua 5.2 C API 和要求

> ID：11485911
> 
> 赞同：6
> 
> 时间：2012-07-14T17:36:40.383
> 
> 标签：c, lua, yaml

# 问题

我想从一个 C 程序调用一个 Lua 脚本，它`require()`是一个`lyaml`模块，用于 LibYAML 的 Lua 绑定。

我从源代码编译了 Lua 5.2，并破解了模块以使其与 Lua 5.2 一起使用。它可以在[github](https://github.com/crohn/yaml)上找到。

下面是 Lua 脚本，它适用于 Lua 5.1 和 5.2：

```
-- foo.lua
require('lyaml')

function hello ()
  res = lyaml.load("a: 4\n")
  return res.a
end

-- then calling hello() it works like a charm
print( hello() ) -> 4 
```

## 问题

`hello()`我编写了一个应该从脚本调用的 C 程序，遵循[《Lua 编程》第 25 章和](http://www.lua.org/pil/25.html)Lua [5.2 参考手册](http://www.lua.org/manual/5.2/manual.html)。

C程序如下：

```
/* foo.c */
#include <lua.h>
#include <lualib.h>
#include <lauxlib.h>

int main(void)
{
  double z;

  lua_State *L = luaL_newstate();
  luaL_openlibs(L);

  if (luaL_dofile(L, "foo.lua"))
    luaL_error(L, "error running script: %s", lua_tostring(L, -1));

  lua_getglobal(L, "hello");

  if (lua_pcall(L, 0, 1, 0) != 0)
    luaL_error(L, "error calling hello: %s", lua_tostring(L, -1));

  if (!lua_isnumber(L, -1))
    luaL_error(L, "result must be number");        

  z = lua_tonumber(L, -1);
  lua_pop(L, 1);

  lua_close(L);
  return 0;
} 
```

我编译发行：

```
gcc -Wall -o foo foo.c -ldl -lm -llua 
```

然后在运行时`foo`，我在运行时收到以下错误：

```
PANIC: unprotected error in call tu Lua API (
    error running script: error loading module 'lyaml' from file '/path/to/lyaml.so':
       /path/to/lyaml.so: undefined symbol: lua_gettop)
Aborted 
```

所以我尝试`lyaml`从 C 程序加载，在调用后添加以下行`luaL_openlibs()`：

```
luaL_requiref(L, "lyaml", luaopen_package, 1); 
```

重新编译后错误变为：

```
PANIC: unprotected error in call tu Lua API (
    error running script: 
       hello.lua:4: attempt to index global 'lyaml' (a nil value))
Aborted 
```

所以我想没有`lyaml`符号，`require()`调用以某种方式失败。

通过阅读`luaL_requiref()`文档，我认为`modname`将其调用设置`glb`标志设置为 true：

```
void luaL_requiref (lua_State *L, const char *modname, 
                    lua_CFunction openf, int glb); 
```

> `openf`使用字符串`modname`作为参数调用函数并将调用结果设置在 中`package.loaded[modname]`，就好像该函数已通过 调用一样`require`。
> 
> 如果 glb 为真，也将结果存储到 global`modname`中。
> 在堆栈上留下该结果的副本。

我试图`require()`在 Lua 脚本中注释调用，结果是一样的。

## 问题

我做错什么了？我忘记做某事了吗？

* * *

### 编辑

我破解了模块更新已弃用（已删除）的功能/类型及其替代品，如下所示：

```
lua_strlen() -> luaL_len()
luaL_reg     -> luaL_Reg
luaL_getn()  -> luaL_len() 
```

然而 Lua 脚本使用`lyaml`工作所以我认为问题不是我的 hack。

我尝试`lyaml`使用 Lua 5.1 的原始模块。结果是一样的，所以我确定问题不是我的黑客。

### 更新

添加以下行，正如 Doug Currie 在他的回答中所建议的那样，C 程序与 Lua 5.1 完美配合。不过，我在 5.2 中仍然遇到同样的错误。

```
lyaml = require('lyaml') 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-14T19:36:16.437

`foo.lua`所写的将仅在 Lua 5.1.x 中运行——您的 hacked`lyaml.c`不会设置全局`lyaml`，在 Lua 5.2 中也不需要。我怀疑当您运行第一个测试“就像魅力一样”时，您的 PATH 没有 Lua 5.2，或者您`lyaml`在加载之前手动设置`foo.lua`。

`foo.lua`应该从

```
lyaml = require('lyaml') 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-15T16:22:22.053

我解决了...所有问题的根源是`luaL_requiref()`.

阅读[此主题](http://lua-users.org/lists/lua-l/2012-07/msg00100.html)后，我受到了后续的启发：

> 在 Lua 5.2 中，库不再创建全局变量；他们只是归还图书馆桌子。
> 
> `luaL_openlibs`调用`luaL_requiref`而不是调用`luaopen_*`，并`luaL_requiref`设置相应的全局变量。

所以需要调用`luaL_requiref()`来加载模块并设置`lyaml`全局。

正如我尝试使用的问题中所述

```
luaL_requiref(L, "lyaml", luaopen_package, 1); 
```

但这是完全错误的，因为`luaopen_package()`是 Lua 标准`package`模块的加载器功能......我不得不改用：

```
luaL_requiref(L, "lyaml", luaopen_lyaml, 1); 
```

并编译

```
gcc -L/path/to/5.2 -Wall -o foo foo.c -ldl -lm -llua -l:lyaml.so.1 
```

获取对`luaopen_lyaml()`.

* * *

在 Lua 5.1 中，正如 Doug Currie 所说，发布就足够了

```
lyaml = require('lyaml') 
```

in `hello.lua`，不调用`luaL_requiref()`C 程序。

# vim - Vim 在插入模式下重新映射 ctrl

> ID：11485913
> 
> 赞同：2
> 
> 时间：2012-07-14T17:36:54.787
> 
> 标签：vim

来自 Emacs，我真的很想念一个快速到达终点的方法。
我知道`Ctrl`+但老实说更喜欢在*插入模式下*`O`使用单个命令到达行尾。

 *有没有办法在*插入模式*`Ctrl`下将+映射`e`到*Normal 模式*+ ？`A`

 ** * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-14T22:32:24.863

在映射中不保留插入模式的替代解决方案：

```
:inoremap <C-E> <End>
:inoremap <C-A> <Home> 
```

[`CTRL-E`](http://vimdoc.sourceforge.net/htmldoc/insert.html#i_CTRL-E)不过，通过重新映射和来检查你失去了什么[`CTRL-A`](http://vimdoc.sourceforge.net/htmldoc/insert.html#i_CTRL-A)！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-14T17:38:44.250

这应该可以解决问题：

```
:imap <silent> <C-e> <ESC>A 
```

`imap`代表插入模式，`<C-e>`是`Ctrl`+ `e`，`Esc`+`a`是要执行的动作。

您可以将其添加到您的`vimrc`，而无需`:`.**

# jquery - 从javascript上传/流式传输大型base64字符串到Mvc的正确方法是什么？

> ID：11485916
> 
> 赞同：4
> 
> 时间：2012-07-14T17:37:01.927
> 
> 标签：jquery, asp.net-mvc-3

我想从 javascript 客户端向我们的 Mvc 服务器发送一个大的 base64 字符串（多兆字节）。目前我们正在使用 Ajax 并像这样发送字符串：

```
Upload = function (aUrl, aFormData, aOnProgress, aOnSuccess, aOnTimeout, aOnError) {
   var settings = {
      url: aUrl,
      type: "POST",
      contentType: "application/json; charset=utf-8",
      data: JSON.stringify(aFormData), // { aData: longBase64String }
      success: function (resultObject, textStatus) {
         if (textStatus == "success" && aOnSuccess) aOnSuccess(resultObject);
      },
      error: function (jqXHR, textStatus, errorThrown) {
         if (textStatus == "timeout" && aOnTimeout) aOnTimeout();
         else if (textStatus == "error" && aOnError) aOnError();
      }
   };

   settings.xhr = function () {
      var req = new XMLHttpRequest(); // Create xml http request.
      if (req) req.addEventListener('progress', aOnProgress, false); // Upload progress.
      return req;
   }

   return $.ajax(settings);
} 
```

aFormData 只是采用一个 Json 对象，其中包含 base64 字符串：`{ aData: myString }`。

在 Mvc 方面，我们为控制器提供了以下代码：

```
[Authorize, RequireHttp, HttpPost]
public ActionResult SetImage(String aData) {
   // Do something with the data.
   return Json("We got it.");
} 
```

现在 - 就将数据发送到服务器而言，这似乎在我们的 localhost 测试环境中工作。我担心这可能不是以一种很好的异步和缓冲方式“流式传输”，而是可能会阻止所有内容，直到它被发送，并且我没有看到对客户端的“真正”影响，因为它正在运行本地主机。我只是不知道这里发生了什么。

我希望客户端能够继续使用 Web 应用程序，而不会出现任何阻塞。我的内容类型应该不同，还是我在 Mvc 端的参数？我希望这将被分块发送。

即使我的方法是正确的，有人可以告诉我幕后发生的事情吗？我一直在看到一些使用带有“multipart”的内容类型的帖子？那是什么，我应该在这里使用它吗？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T20:26:37.660

只要使用 jQuery 异步发送请求（这是默认设置），它就不会阻塞客户端。

关于“多部分”问题，这很可能是指表单内容类型“多部分/表单数据”

> 内容类型“multipart/form-data”应用于提交包含文件、非 ASCII 数据和二进制数据的表单。

来源：[http ://www.w3.org/TR/html401/interact/forms.html#h-17.13.4](http://www.w3.org/TR/html401/interact/forms.html#h-17.13.4)

由于您发送的是 base64 内容，它既不是文件，也不是“非 ASCII 数据”或二进制文件，您应该没问题。

# iphone - 我希望在各种表格视图中使用相同的 UITableView 样式 - 我该怎么做？

> ID：11485920
> 
> 赞同：0
> 
> 时间：2012-07-14T17:37:52.873
> 
> 标签：iphone, objective-c, ios, uitableview, customization

例如，我有一个设置菜单，它通向其他菜单，并且都具有相同的样式。表格视图单元格自定义是这样完成的：

```
-(UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {
    static NSString *CellIdentifier = @"Cell";
    UITableViewCell *cell = (UITableViewCell *)[self dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil) {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault
                                      reuseIdentifier:CellIdentifier];

        cell.contentView.backgroundColor = [UIColor clearColor];
        cell.textLabel.backgroundColor = [UIColor clearColor];
    }

    BOOL isFirstRowInSection = NO;

    if (indexPath.row == 0) isFirstRowInSection = YES;

    BOOL isLastRowInSection = NO;

    int numberOfRowsInSection = [tableView.dataSource tableView:self numberOfRowsInSection:indexPath.section];

    if (indexPath.section == 0 && indexPath.row == numberOfRowsInSection - 1) {
        isLastRowInSection = YES;
    }

    UIImageView *imageView = [[UIImageView alloc] initWithFrame:cell.bounds];
    imageView.image = cellBackgroundImage(cell.bounds.size, isFirstRowInSection, isLastRowInSection);

    cell.backgroundView = imageView;

    //cell.textLabel.text = @"This is a cell";

    return cell;
} 
```

我希望这个类被主设置菜单和所有子菜单使用，但是虽然我希望他们提供自己的数据，比如每个单元格的文本是什么，但我希望它从这里获取单元格样式方法。

我怎样才能做到这一点？目前的想法是将部分数据源协议复制到我自己的委托中，以便他们可以响应。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T19:21:37.677

您可以创建 UITableViewCell 的特定子类并在单元格本身中实现您的视觉特征。

如果您在 InterfaceBuilder 中创建一个子类和一个 nib 文件，您可以拥有一个类似于

```
+ (NSString *)cellIdentifier {
    return NSStringFromClass([self class]);
}

+ (id)cellForTableView:(UITableView *)tableView {
    NSString *cellID = [self cellIdentifier];
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:cellID];
    if (cell == nil) {
        NSArray *nibObjects = [[self nib] instantiateWithOwner:nil options:nil];
        NSAssert2(([nibObjects count] > 0) && 
                  [[nibObjects objectAtIndex:0] isKindOfClass:[self class]],
                  @"Nib '%@' does not appear to contain a valid %@", 
                  [self nibName], NSStringFromClass([self class]));
        cell = [nibObjects objectAtIndex:0];
    }
    return cell;    
} 
```

因此，如果您已经定义了一个类（例如 MyTableViewCell）并在 IB 中构建接口，则确保将 FileOwner 设为 MyTableViewCell 的一个对象，并拥有各种子类特定视觉对象的 IBOutlets，而 Bob 是您的叔叔。

然后在你的 tableViewController 的 cellForRowAtIndexPath 方法中，你使用类似的东西

```
MyTableViewCell *cell = [MyTableViewCell cellForTableView:tableView]; 
```

通过这种方式，大部分可视化表示逻辑都保存在 Interface Builder 代码中。如果您正在制作一个通用应用程序，则必须创建两个 nib 文件，但这并不太难。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-14T17:55:02.310

实现这一点的一种方法是让你的“其他菜单”——这个 tableview“进入”的菜单——调用这个 tableview 的`- tableView:cellForRowAtIndexPath:`方法。看起来像这样：

ChildTableViewController.m：

```
-(UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {
    // Somehow, you'll need to give this child VC a pointer to the
    // "root" tableview – I'll pretend that pointer is "rootTableView"
    return [rootTableView tableView:tableView cellForRowAtIndexPath:indexPath];
} 
```

您必须确保您对从该方法返回的内容很了解，因为现在不仅有一个 tableview，而且许多都在使用该方法来获取他们的单元格。您可以通过检查`UITableView`要求单元格的内容来做到这一点：

```
-(UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {
    static NSString *CellIdentifier = @"Cell";
    UITableViewCell *cell = (UITableViewCell *)[self dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil) {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault
                                      reuseIdentifier:CellIdentifier];

        cell.contentView.backgroundColor = [UIColor clearColor];
        cell.textLabel.backgroundColor = [UIColor clearColor];
    }

    BOOL isFirstRowInSection = NO;

    if (indexPath.row == 0) isFirstRowInSection = YES;

    BOOL isLastRowInSection = NO;

    int numberOfRowsInSection = [tableView.dataSource tableView:self numberOfRowsInSection:indexPath.section];

    if (indexPath.section == 0 && indexPath.row == numberOfRowsInSection - 1) {
        isLastRowInSection = YES;
    }

    UIImageView *imageView = [[UIImageView alloc] initWithFrame:cell.bounds];
    imageView.image = cellBackgroundImage(cell.bounds.size, isFirstRowInSection, isLastRowInSection);

    cell.backgroundView = imageView;

    //cell.textLabel.text = @"This is a cell";

    // Now, all your cells have the same formatting; do your custom 
    // data grabbing or whatever you need to do for the different
    // tableviews
    if (tableview == [self view]) {
        return cell;
    } else if (tableview = [self childTableView1]) {
        // Do the setup you'd want for your first child tableview
        return cell;
    } else if (tableview = [self childTableView2]) {
        // Do the setup you'd want for your second child tableview
        return cell;
    }   // More if statements as needed

    return cell;
} 
```

不过，简单地将代码从您显示的`- tableView:cellForRowAtIndexPath:`方法复制并粘贴到每个“子”表视图的方法中可能会更简洁。它不会太长，而且设置起来也不会那么令人头疼。

# android - notifyDataSetChanged 和 PagerTitleStrip

> ID：11485921
> 
> 赞同：1
> 
> 时间：2012-07-14T17:37:59.690
> 
> 标签：android, adapter, android-viewpager

我使用 FragmentAdapter 用 PagerTitleStrip 填充 Viewpager（在适配器中使用 getTitle() ）。

一切正常（至少现在），除了一件事，当我更新其中一个片段的标题并在适配器中调用 notifyDataSetChanged 时，PagerTitleStrip 中的标题会更改，但保存它的 textview 的大小不会更改，例如：

![例如的第一张图片](../Images/8b91e5fc17ddf63c8b029b35f3fb1b05.png)

然后我点击文件夹后更新

![第二张图片例如](../Images/5fbdbdafde313b73ce0effefb9e1acc4.png)

如您所见，通知标题不完整，因为 textview 的大小仍为 sdcard0。

当我滑动到另一个片段（向左或向右）时，一旦开始滑动，文本视图的大小就会更新。

有谁知道我可以在标题更改的同时更新它吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-15T15:03:28.710

I found a workaround to update the textview size. I call pagerStrip.setTextSpacing(pagerStrip.getTextSpacing()); to set the text space at the same value.

it's not perfect but its working!

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-17T01:19:15.547

我遇到了完全相同的问题。

编辑：这是解决方案，这很容易......

```
ViewPager mViewPager;
PagerTitleStrip pagerTitleStrip;

mViewPager = (ViewPager) findViewById(R.id.pager);
mViewPager.setAdapter(mSectionsPagerAdapter);

pagerTitleStrip = (PagerTitleStrip) findViewById(R.id.pager_title_strip);

mViewPager.getAdapter().notifyDataSetChanged();
pagerTitleStrip.setTextSpacing(pagerTitleStrip.getTextSpacing()); 
```

# gridview - 使用 iTextSharp 的 gridview 到 PDF 转换器中的西里尔字符不显示

> ID：11485926
> 
> 赞同：0
> 
> 时间：2012-07-14T17:38:32.530
> 
> 标签：gridview, pdf-generation, itextsharp

我喜欢使用 iTextSharp.dll 将 GridView 转换为 PDF。但是我的 GridView 中有西里尔字符，它们没有出现在 pdf 文档中。这是我正在使用的代码

```
 Response.Clear(); //this clears the Response of any headers or previous output
        Response.Buffer = true; //ma
        Response.ContentType = "application/pdf";
        iTextSharp.text.pdf.BaseFont arial = iTextSharp.text.pdf.BaseFont.CreateFont(@"C:\Windows\Fonts\arial.ttf", "Identity-H", iTextSharp.text.pdf.BaseFont.EMBEDDED);
        Response.AddHeader("content-disposition", "attachment;filename=Pregled.pdf");

        Response.Cache.SetCacheability(HttpCacheability.NoCache);

        StringWriter sw = new StringWriter();

        HtmlTextWriter hw = new HtmlTextWriter(sw);

        gvTekovenKorisnik.RenderControl(hw);

        StringReader sr = new StringReader(sw.ToString());

        Document pdfDoc = new Document(PageSize.A4, 10f, 10f, 10f, 0f);

        HTMLWorker htmlparser = new HTMLWorker(pdfDoc);

        PdfWriter.GetInstance(pdfDoc, Response.OutputStream);

        pdfDoc.Open();

        htmlparser.Parse(sr);

        pdfDoc.Close();

        Response.Write(pdfDoc);

        Response.End(); 
```

我读到我必须更改 baseFont 但我不知道在更改后将它放在代码中的位置。有人可以帮助我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T08:42:34.383

我提出以下变体

```
protected void btnGridViewToPdf_Click(object sender, EventArgs e)
    {
        GridViewToPdf();
    }
        private void GridViewToPdf()
        {
            Response.ContentType = "application/pdf";
            Response.AddHeader("content-disposition", "attachment;filename=Reestr.pdf");
            //подключаепм шрифт
            String FONT_LOCATION = Server.MapPath("~/fonts/arial.ttf");
            BaseFont baseFont = BaseFont.CreateFont(FONT_LOCATION, BaseFont.IDENTITY_H, BaseFont.NOT_EMBEDDED);
            iTextSharp.text.Font font = new iTextSharp.text.Font(baseFont, iTextSharp.text.Font.DEFAULTSIZE, iTextSharp.text.Font.NORMAL);
            //подключили
            //создаем PDF документ
            Document pdfDoc = new Document(PageSize.A4, 10f, 10f, 10f, 0f);
            PdfWriter.GetInstance(pdfDoc, Response.OutputStream);  
            pdfDoc.Open();
            //Создадим таблицу 
            PdfPTable table = new PdfPTable(2);
            //Создадим заголовок
            table.AddCell(new PdfPCell(new Paragraph("\nРеестр закупок\n\n", font)) { Colspan = 2, HorizontalAlignment=1 });
            //столбцы шириной в пропорции - 1/15 и 14/15
            float[] widths = new float[] { 1f, 14f };
            table.SetWidths(widths);
            //оставлять зазор до и после таблицы
            table.SpacingBefore = 10f;
            table.SpacingAfter = 10f;
            PdfPCell cell = new PdfPCell(new Phrase());
            cell.Padding = 5;
            cell.Colspan = 3;
            foreach (GridViewRow row in GridView1.Rows)
            {
                if (row.RowType == DataControlRowType.DataRow)
                {
                    Label _lblN = row.FindControl("lblN") as Label;
                    String lblN = _lblN.Text.ToString();
                    Label _lblnameOrder = row.FindControl("lblnameOrder") as Label;
                    String lblnameOrder = _lblnameOrder.Text.ToString();
                    Label _lblsummaOrder = row.FindControl("lblsummaOrder") as Label;
                    String lblsummaOrder = _lblsummaOrder.Text.ToString();

                    ///
                    PdfPCell cell1 = new PdfPCell(new Phrase(lblN, font)) { HorizontalAlignment = 1, VerticalAlignment= 1 };
                    table.AddCell(cell1);
                    ///

                    //table.AddCell(new PdfPCell(new Paragraph(lblN, font)) { HorizontalAlignment = 1 });

                    table.AddCell(new PdfPCell(new Paragraph("Наименование закупки: \n" + lblnameOrder + "\nСумма: \n" + lblsummaOrder, font)));
                }
            }
            pdfDoc.Add(table);
            pdfDoc.Close();
            Response.End();

        } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-14T19:37:56.420

我以这种方式更改了我的代码，所以我得到了解决方案

```
public  string arialFile = AppDomain.CurrentDomain.BaseDirectory + "arial.ttf";

iTextSharp.text.pdf.BaseFont arial = iTextSharp.text.pdf.BaseFont.CreateFont(arialFile, "Identity-H", iTextSharp.text.pdf.BaseFont.EMBEDDED);
iTextSharp.text.Font f = new iTextSharp.text.Font(arial, 12);
//Create a table
PdfPTable table = new PdfPTable(colCount);           
table.HorizontalAlignment = 0;

//create an array to store column widths
int[] colWidths = new int[gvTekovenKorisnik.Columns.Count];

PdfPCell cell;
string cellText;
//create the header row
for (int colIndex = 0; colIndex < colCount; colIndex++)
{
    //set the column width
    //colWidths[colIndex] = (int)gv.Columns[colIndex].ItemStyle.Width.Value;

    //fetch the header text
    cellText = Server.HtmlDecode(gv.HeaderRow.Cells[colIndex].Text);

    cell = new PdfPCell(new Phrase(cellText,f));

    //set the background color for the header cell
    cell.BackgroundColor = new BaseColor(System.Drawing.ColorTranslator.FromHtml("#75B082"));

    //add the cell to the table. we dont need to create a row and add cells to the row
    //since we set the column count of the table to 4, it will automatically create row for
    //every 4 cells
    table.AddCell(cell);
}

//export rows from GridView to table
for (int rowIndex = 0; rowIndex < gv.Rows.Count; rowIndex++)
{
    if (gvTekovenKorisnik.Rows[rowIndex].RowType == DataControlRowType.DataRow)
    {
        for (int j = 0; j < colCount; j++)
        {
            //fetch the column value of the current row
            cellText = Server.HtmlDecode(gvTekovenKorisnik.Rows[rowIndex].Cells[j].Text);

            //create a new cell with column value
            cell = new PdfPCell(new Phrase(cellText));

            //Set Color of Alternating row

            //add the cell to the table
            table.AddCell(cell);
        }
    }
}

//Create the PDF Document
Document pdfDoc = new Document(PageSize.A4, 10f, 10f, 10f, 0f);

PdfWriter.GetInstance(pdfDoc, Response.OutputStream);

//open the stream
pdfDoc.Open();

//add the table to the document
pdfDoc.Add(table);

//close the document stream
pdfDoc.Close();

Response.ContentType = "application/pdf";
Response.AddHeader("content-disposition", "attachment;" + "filename=Pregled.pdf");
Response.Cache.SetCacheability(HttpCacheability.NoCache);
Response.Write(pdfDoc);
Response.End(); 
```

}

其中 colCount 是在 RowDataBound 方法处理中分配的变量。我在我的项目中从 C:\Windows\Fonts 复制了 arial.ttf 字体。

# iphone - 在 iPhone 上启动图像很好，在 iPad 上裁剪

> ID：11485927
> 
> 赞同：1
> 
> 时间：2012-07-14T17:38:36.900
> 
> 标签：iphone, xcode, ios5, crop, launch

我有一个 iPhone 应用程序，在 Xcode 的目标摘要屏幕中的图像中有一个 320x480 的启动图像。当我在 iPhone 上启动应用程序时 - 看起来不错（sim + 实际设备）。然而，当我在我的 iPad（sim + 实际设备）上以标准尺寸或 2 倍缩放运行它时，启动图像被裁剪......即，图像的右侧 80 左右像素不在屏幕上。

如果有帮助，应用程序的设备类型设置为 iPhone。

任何关于正在发生的事情/如何解决的想法将不胜感激。谢谢托尼。

# php - 下载由 PHP 中的多个文件组成的 Zip 文件

> ID：11485931
> 
> 赞同：2
> 
> 时间：2012-07-14T17:39:15.263
> 
> 标签：php, html, zip

我有一些 pdf 文件...我只想将它们作为一个集合下载，而不是一个一个地下载。为此，我正在尝试压缩所有 pdf 文件并下载。但我不知道为什么在我的代码中更改 ZipArchive 文件名时，它说已损坏和损坏。我的代码如下： -

```
 function zipFilesAndDownload($file_names,$archive_file_name,$file_path)
{
    $zip = new ZipArchive();
    //create the file and throw the error if unsuccessful
    if ($zip->open($archive_file_name, ZIPARCHIVE::CREATE | ZIPARCHIVE::OVERWRITE )!==TRUE) {
        exit("cannot open <$archive_file_name>\n");
    }
    //add each files of $file_name array to archive
    foreach($file_names as $files)
    {
        $zip->addFile($file_path.$files,$files);

    }
    $zip->close();
    //then send the headers to foce download the zip file
    header("Content-type: application/zip"); 
    header("Content-Disposition: attachment; filename=$archive_file_name"); 
    header("Pragma: no-cache"); 
    header("Expires: 0"); 
    readfile("$archive_file_name"); 
    exit;
}

if($button=="Save as pdf")
{
$file_names = array();
foreach($a as $key=>$as)
{
 $file_names[] = $key.'.pdf';
}
}
$archive_file_name='zipped.zip';
$file_path='/resume/';
zipFilesAndDownload($file_names,$archive_file_name,$file_path);

?> 
```

有人可以帮帮我吗？提前致谢。

它工作正常，但我仍然面临 2 个问题，1。如果我将archive_file_name 的名称更改为上面给出的名称以外的名称，我会收到Archive 已损坏的错误消息。我不知道为什么会这样 2.如果我有一个 zip 文件，比如说 2 个 pdf，然后我再次下载一个只有 1 个 pdf 的 zip，这与以前的不一样。但是当我下载 1 个 pdf 的 zip 时，我得到了 3 个 pdf ......我不知道为什么......请帮帮我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T18:51:39.750

我测试了你的`zipFilesAndDownload`功能，它运行良好。`<?php`因此，首先您应该检查您的脚本，是否在开始标记之前没有发送任何字符或空格。

如果您的脚本在 CMS 中运行，您还应该清除所有输出缓冲区：（`while (@ob_end_clean());`如果 gzip 标头已发送，则还要再次打开 gz 压缩`ob_start('ob_gzhandler');`）

您还可以检查是否正确设置了 $file_path 并且所有文件都存在，例如：

```
$file_path='resume/';
if (!file_exists($file_path) || !is_dir($file_path)) {
    die("Invalid directory $file_path in ".getcwd());
}
// you can test the existence of your problematic files:
foreach ($file_names as $file) {
    if (!file_exists($file_path.$file)) {
        echo "$file not found.";
    } else {
        echo "$file is ok.";
    }
}
exit;
// end of test
zipFilesAndDownload($file_names,$archive_file_name,$file_path); 
```

在 Windows 中，UTF-16/UTF-8/国际字符编码也存在问题，请参见此处：[PHP检测文件系统编码](https://stackoverflow.com/questions/2522722/php-detecting-filesystem-encoding)，[如何在 PHP 中使用文件系统函数，使用 UTF-8 字符串？](https://stackoverflow.com/questions/1525830/how-do-i-use-filesystem-functions-in-php-using-utf-8-strings).

# thumbnails - Wordpress：发布缩略图/发布图片附件

> ID：11485940
> 
> 赞同：0
> 
> 时间：2012-07-14T17:40:47.317
> 
> 标签：thumbnails

我想在存档页面中的帖子旁边显示缩略图，但是如果帖子有特色图片，它只会显示缩略图。

是否可以将帖子的附加图像制作为缩略图并在存档页面中显示？

目前，如果设置为特色，我正在使用以下代码显示缩略图。

```
<?php if ( has_post_thumbnail()) : ?>
   <a href="<?php the_permalink(); ?>" title="<?php the_title_attribute(); ?>" >
   <?php the_post_thumbnail(thumbnail, array('class' => 'alignleft')); ?>
   </a>
<?php endif; ?> 
```

这是网站[http://n1bar.com/category/blog](http://n1bar.com/category/blog)如您所见，第一篇文章附有图片，但未在存档页面中显示为缩略图。

任何帮助表示赞赏

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-14T17:55:02.390

以下代码可以为您提供帖子中的所有图片附件。把它放在大的while循环中。如果您只想显示 1 个图像，您可以修改下面的代码，因为如果有超过 1 个图像附件，我不确定您要显示哪个图像。

```
 <div class="allthumbs cf">
    <?php

        $args = array(
            'post_type' => 'attachment',
            'numberposts' => -1,
            'post_status' => null,
            'post_parent' => $post->ID,
            'order' => 'ASC',

        );

        $attachments = get_posts( $args );
        if ( $attachments ) {
            foreach ( $attachments as $attachment ) {
                $full_img_url = wp_get_attachment_image_src( $attachment->ID, 'full' );
                echo '<div class="imageWrapper zoom-able"><a href="' . $full_img_url[0] .'">' 
                    .wp_get_attachment_image( $attachment->ID, 'medium' ) . "</a></div>";
            }
        }       
    ?>
    </div> 
```

# php - PEAR 邮件，使用网络表单获取 $to

> ID：11485941
> 
> 赞同：1
> 
> 时间：2012-07-14T17:40:47.163
> 
> 标签：php, email, pear

我正在尝试将网页从常规 PHP 邮件切换到 PEAR 邮件。在此页面上，我希望将电子邮件发送给正在将其电子邮件输入 Web 表单的收件人。我正在尝试将 $to 设置为等于 $pickeremail，根据下面的代码，但是，唉，然后 PEAR 尝试将电子邮件发送到“$pickeremail”，而不是发送到用户在 Web 表单中实际输入的电子邮件.

```
$con = mysql_connect("localhost","BLAHBLAH","BLAHBLAH");

mysql_select_db("schoolh_SHS", $con);

if (!$con)
{
  die('Could not connect: ' . mysql_error());
}

$sql      = "UPDATE Donations SET `PICKER_NAME`='$_POST[pickername]',`PICKER_EMAIL`='$_POST[pickeremail]',`PICKER_PHONE`='$_POST[pickerphone]',`STATUS`='CLAIMED' WHERE DONATIONID = $_POST[id]";
$q        = "SELECT * FROM Donations WHERE DONATIONID = $_POST[id]";
$result   = mysql_query($q);
$Donation = mysql_fetch_array($result);

$orgname     = mysql_result($result,$i,"orgname");
$address     = mysql_result($result,$i,"address");
$city        = mysql_result($result,$i,"city");
$state       = mysql_result($result,$i,"state");
$pickeremail = mysql_result($result,$i,"picker_email");

if (!mysql_query($sql,$con))
{
  die('Error: ' . mysql_error());
}

function send_email($recipients, $from, $subject, $body)
{
  require_once "Mail.php";
  require_once "Mail/mime.php";

  $to         = '$pickeremail';
  $cc         = 'whynoceros@gmail.com';
  $recipients = $to.", ".$cc;
  $subject    = 'Pickup Confirmation';
  $from       = 'blah';
  $host       = 'blah';
  $username   = 'donations';
  $password   = 'blahblah';

  $headers = array (
    'From'    => $from,
    'To'      => $to,
    'Subject' => $subject
  );

  $mime = new Mail_mime();
  $mime->setHTMLBody($body);

  $body = $mime->get();
  $headers = $mime->headers($headers);

  $smtp = Mail::factory('smtp', array(
    'host'     => $host, 
    'auth'     => true,
    'username' => $username, 
    'password' => $password
  ));
  $mail = $smtp->send($recipients, $headers, $body);

  if (PEAR::isError($mail))
  {
    //return false;
    echo ($mail->getMessage());
  } 
  else 
  {
    return true; 
  }
} 
```

根据下面的建议，我添加了一个 var_dump，结果是：

> array(6) { ["MIME-Version"]=> string(3) "1.0" ["Content-Type"]=> string(29) "text/html; charset=ISO-8859-1" ["内容-Transfer-Encoding"]=> string(16) "quoted-printable" ["From"]=> string(33) "donations@schoolhousesupplies.org" ["To"]=> string(0) "" [" Subject"]=> string(19) "Pickup Confirmation" } 添加收件人失败：@localhost [SMTP：从服务器收到的响应代码无效（代码：501，响应：5.5.4 无效地址）]NULL

我注意到在标题数组中我有'To' => $to，我将其更改为'To' => $recipients。我还更改了行： $pickeremail = mysql_result($result,$i,"picker_email"); 收件人：$pickeremail=$_POST['pickeremail']; 现在，我得到了这个 var_dump: array(6) { ["MIME-Version"]=> string(3) "1.0" ["Content-Type"]=> string(29) "text/html; charset= ISO-8859-1" ["Content-Transfer-Encoding"]=> string(16) "quoted-printable" ["From"]=> string(33) "donations@schoolhousesupplies.org" ["To"]= > string(20) "whynoceros@gmail.com" ["Subject"]=> string(19) "Pickup Confirmation" } 添加收件人失败：@localhost [SMTP：从服务器收到的响应代码无效（代码：501，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-14T17:49:07.557

你在这里错了：

```
$to         = '$pickeremail'; 
```

因为在使用简单引号的时候，里面的 php 变量是不会被解释的。将此行替换为：

```
$to = $pickeremail; 
```

**编辑：**

看转储：

> ["到"]=> 字符串(0) ""

您将一个空字符串放入`$to`. 因此，`picker_email`您的数据库中的字段似乎为空。你应该检查一下。

# html - HTML 整洁。请不要添加结束标签

> ID：11485942
> 
> 赞同：4
> 
> 时间：2012-07-14T17:40:54.517
> 
> 标签：html, tidy, htmltidy

我有三个文件。

```
header.php
index.php
footer.php 
```

头文件包含 from `<html>`to`<div id='content'>` 索引文件包含页面内容 页脚文件包含`</div>`to`</html>` 它们一起包含一个普通的 PHP 的 HTML 文件

当我使用 Tidy HTML 来整理我的 php 文件的 HTML 时，它会出错。当我整理 header.php 时，它会在我的名为 content 的 div 中添加结束标签，但它不应该这样做。div 继续通过 index.php 并在 footer.php 中关闭以指定文件的内容。

是否可以让 HTML Tidy 忽略缺少的结束标签？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T12:23:12.217

可以这样解决：

```
<html>
<head>
  <?php include "head.php" ?>
</head>
<body>
  <?php include "header.php" ?>
  <?php include "index.php" ?>
  <?php include "footer.php" ?>
</body>
</html> 
```

并且文件 index.php、head.php、header.php 和 footer.php 现在应该有开始和结束标记。该程序这样做是因为它认为您错过了封闭标签。我看到了 Tidy HTML，它会自动放置关闭标签。

* * *

资料来源：我以这种方式做网站的经验

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-29T17:02:49.570

听起来您需要`hide-endtags: yes`在[配置](http://tidy.sourceforge.net/docs/quickref.html#hide-endtags)中：

```
Type: Boolean
Default: no
Example: y/n, yes/no, t/f, true/false, 1/0 
```

> 此选项指定 Tidy 在生成漂亮的打印标记时是否应省略可选的结束标记。如果要输出到 XML，则忽略此选项。

根据[此处链接](https://stackoverflow.com/questions/3008593/html-include-or-exclude-optional-closing-tags)的规范，`html`开始`body`标签也是可选的，我的 Tidy 也删除了这些，这应该没问题。`cfg`文件：

```
hide-endtags: yes // Don't add optional end tags. Also hides optional start tags like HTML and BODY.
tidy-mark: no  // Don't add generator meta tag. 
```

但是，它仍然关闭`div`。[此处建议的](https://stackoverflow.com/a/8456612/819417)[此替代方法](http://prettydiff.com/?m=beautify&html) 按预期工作。

# c# - 集合类型的依赖属性——摆脱不了单例

> ID：11485949
> 
> 赞同：0
> 
> 时间：2012-07-14T17:42:19.030
> 
> 标签：c#, wpf, data-binding, dependency-properties

晚上好！

我有一个继承自 WPF 扩展工具包的 richTextBox 的类，我向其中添加了 ObservableCollection 类型的依赖属性和正确的包装器。我想使用这个属性来存储我添加到 FlowDocument 的 InlineUIContainers 的文本，并将它们数据绑定到 ObservableCollection 变量。

我的问题是这个richTextBox 的所有实例都将它们的数据存储在同一个地方（单例）。

我尝试使用 List，在构造函数中初始化属性（如下面的代码示例） - 也使用 SetValue。我已将 FrameworkMetadataProperty 默认值设置为 null，但仍然没有运气（在这种情况下，它实际上在尝试添加项目时给了我“对象未初始化”错误）。

我已经没有想法了。在过去的两个小时里，我一直在用谷歌搜索它，但我仍然无法弄清楚为什么这些实例没有独立存储这些值。

任何帮助是极大的赞赏。

```
public class RichTextBoxWithDataBoundableTokens : Xceed.Wpf.Toolkit.RichTextBox
{ 
    public static readonly DependencyProperty TokensContentsProperty = DependencyProperty.Register("TokensContents", typeof(ObservableCollection<object>), typeof(RichTextBox), new FrameworkPropertyMetadata(new ObservableCollection<object>()));
    public ObservableCollection<object> TokensContents { get { return (ObservableCollection<object>)GetValue(TokensContentsProperty); } set { SetValue(TokensContentsProperty, (ObservableCollection<object>)value); } }

    public RichTextBoxWithDataBoundableTokens()
        : base()
    {
        TokensContents = new ObservableCollection<object>();
    }
} 
```

这就是我使用控件的方式：

```
 RichTextBoxWithDataBoundableTokens test = new RichTextBoxWithDataBoundableTokens()
    test.TokensContents.Add("some object"); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-14T17:47:58.550

您好在注册方法中设置 typeOf(RichTextBoxWithDataBoundableTokens) 而不是 typeOf(RichTextBox) 。我希望这将有所帮助。

# ruby - save_and_open_page 没有打开新的浏览器

> ID：11485951
> 
> 赞同：2
> 
> 时间：2012-07-14T17:42:39.127
> 
> 标签：ruby, cucumber

我刚刚建立了一个新项目。当我`save_and_open_page`在我的黄瓜步骤中使用它时，它不会打开浏览器。我忘记了什么？有什么我忘了包括的宝石吗？我错过了任何配置吗？

# c# - 如何根据我的辅音数组拆分文本并放入数组中？

> ID：11485953
> 
> 赞同：-1
> 
> 时间：2012-07-14T17:43:29.803
> 
> 标签：c#, arrays

这是我的数组：

```
{
   string[] consonants = new string[9];

        consonants[0] = "ඌ";
        consonants[1] = "උ";
        consonants[2] = "මෟ";
        consonants[3] = "මෑ";
        consonants[4] = "මැ";
        consonants[5] = "මූ";
        consonants[6] = "මු";
        consonants[7] = "මෛ";
        consonants[8] = "මේ";

        string line = textBox1.Text.ToString();
        line = line.Replace('\t', ' ');
        line = line.Replace('\n', ' ');
        line = line.Replace('\r', ' ');
} 
```

我想根据这个数组分割文本，例如：如果文本框有“මෑ”文本，我想将它与数组匹配，并且它与数组匹配的单词然后将它放入另一个数组中，该文本原样。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-14T17:53:18.427

只需快速代码

```
List<string> parts = new List<string>();
foreach(string separator in consonants)
{
    parts.Add(line.Split(separator));
}
parts = parts.Distinct().ToList(); 
```

我很快就写到这里了。它可能有错误。核实。

零件是收集分开的零件的集合。最后，我们从零件清单中删除所有重复的内容。

顺便提一句。对于辅音，如果你想使用一个字母的字符串，你应该使用“char”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-14T18:26:00.973

我不明白你为什么需要它。试试其他人提供的代码。仅添加参考：

```
using System.Text.RegularExpressions; 
```

而不是：

```
parts.Add(line.Split(separator)); 
```

利用：

```
parts.Add(Regex.Split(line,separator)); 
```

# asp.net - SOLID 原则或无 SOLID

> ID：11485954
> 
> 赞同：5
> 
> 时间：2012-07-14T17:43:37.313
> 
> 标签：asp.net, vb.net, solid-principles, design-principles

我正在继续开发 ASP.NET 应用程序（基于 Web 表单），其中以前的开发人员没有遵循良好的面向对象设计原则，即 SOLID（[http://www.remondo.net/solid-principles-csharp-interface-隔离/](http://www.remondo.net/solid-principles-csharp-interface-segregation/)）。我读过这样的帖子：[长期持有的、不正确的编程假设](https://stackoverflow.com/questions/888224/long-held-incorrect-programming-assumptions/889625#889625)。

问题是很多类的内聚性低并且耦合度很高，而且很多类没有单一的职责（它们有很多）。我的具体问题是：我应该开始遵循 SOLID 原则，还是继续通过 tweeking 开发并在课程中添加更多内容？过去我一直尝试遵循 SOLID 之类的原则，但我所说的应用程序非常庞大和复杂。我是唯一从事这个项目的开发人员。

目前完全重写是不可能的，但有朝一日是可能的。

**更新 15/07/2012** 到目前为止，我发现 SOLID 是一种设计原则，而 GRASP 是一种设计模式，这可能更适合 MVC 而不是页面控制器类型的应用程序。根据此链接，模拟对象也可能更适合 MVC：[http](http://www.asp.net/mvc/tutorials/older-versions/overview/asp-net-mvc-overview) ://www.asp.net/mvc/tutorials/older-versions/overview/asp-net-mvc-overview 。根据迄今为止的响应，遵循 SOLID 原则始终是一种很好的做法。然而，到目前为止的答案并不推荐基于表单的应用程序的设计模式。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-14T18:09:04.677

尝试一点一点地重构。

如果您正在开发一个模块，请尝试在此处和那里添加一些接口；-) 随时进行。您编写的任何新代码都应该是可靠的。尝试尽可能多地封装旧代码，把旧的废话放在门面后面。您现在不必重写它，也许永远不会。只要您可以将旧代码封装在外观后面并为外观编写单元测试，您应该会感觉好多了。

示例：假设您有一组实现某些功能的类，即。发票处理。现在我想这些类在很多地方都有使用，并且有很多重复。计算总发票金额的代码被复制到显示它的每个页面上。在这种情况下，我要做的是创建一个 Invoice 服务，该服务将公开获取发票、添加新行、计算总金额等的方法。您可以将您拥有的代码放入此服务中而无需进行太多重构，您将保持相同的数据库模式等等。但从现在开始，您的页面将只与`IInvoiceService`界面，你可以很好地模拟它。这有点“在地毯下扫尘”，但至少你可以阻止垃圾进一步传播。下次您需要在发票模块中做一些事情（修复错误，实现新功能）时，您可以稍微清理一下现有代码。随着时间的推移，地毯下的灰尘量越来越少。你只需要坚持你的枪，并确保服务界面保持良好和干净。

您可能需要进行更多系统范围的更改，例如引入 DI 框架，但请尽量减少更改。通常，当您开始走远时，您很容易发现自己重写了所有内容，而您不希望这样做。

做些小改动，经常提交。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-14T19:42:38.743

这就像在问“嗯，我刚从别人那里买了一套公寓，但到处都是脏东西。我应该把它清理干净还是让它保持原样？”

答案很明显。你说应用程序很复杂。如果它只是因为糟糕的架构而变得复杂 - 你有机会让它更容易理解。由于业务问题的性质，它很复杂，糟糕的架构只会让情况变得更糟。

SOLID 是非常重要的原则。还要注意 GRASP 指南，我猜你这样做是因为你提到了低耦合和高内聚，这些属于 GRASP 而不是 SOLID。

最明显的方法是重构，朝着正确的方向一步一步地进行。解耦类，定义它们的职责，使它们更具凝聚力，引入接口和针对它们的代码。这些比 SOLID 的开闭原则或 Liskov 替换原则重要得多。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-14T20:19:21.923

我的建议是选择一个功能并开始对其进行单元测试并引入一个模拟库，例如 Moq 或 FakeItEasy。

我完全理解这是给你的代码。但是通过单元测试，您将了解哪些代码适合单一职责或必须是服务或必须移动到存储库中。

您已经打算实现 DI，但也使用 AutoMapper 之类的东西可以节省大量时间并使代码更小更清晰

当我像你的情况一样被移交时，我所做的就是阅读鲍勃叔叔的书[http://www.amazon.co.uk/Working-Effectively-Legacy-Robert-Martin/dp/0131177052](http://www.amazon.co.uk/Working-Effectively-Legacy-Robert-Martin/dp/0131177052)它给了你一些好处想法

**更新您的评论：** 前 3 个月后的应用程序有更少的错误，并且更容易和更快地实施新的更改。最好的部分是现在我们拥有了领域知识。阻止导致错误的遗留和新更改的一件好事是 Anit-Corruption 层请阅读此链接[http://domaindrivendesign.org/library/peng_hu_2007_2](http://domaindrivendesign.org/library/peng_hu_2007_2)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-07-29T23:29:57.793

我曾在一家拥有良好单元测试代码覆盖率（超过 3000 次测试）的商店工作，其编写鼓励我们的代码通常遵循 SOLID 原则。

我还在一家代码覆盖率为 0%（大约 0.5m 行代码）的商店工作过，它丝毫没有采用 SOLID。

我们无法重构任何 50 万行代码（出于 SOLID 或任何其他原因），因为我们没有测试覆盖率。因此，随着时间的推移，代码变得越来越难以维护。

在我的第一份工作中我们不需要重构，因为代码已经是 SOLID，但我们可以轻松地重构并使用良好的单元测试代码覆盖率来确保没有回归。

这就像魔术：对于那些相信不需要证据的人来说；对于那些不相信任何证据都不够的人。

让我们这样说吧：你想在某个地方工作，代码非常难以理解，维护起来很糟糕，开发人员因为代码太差而离开，错误猖獗，或者你更喜欢相反的地方？后者的代码，无论是否 SOLID，但恕我直言，带有单元测试的 SOLID 从长远来看将使实现这一目标变得更加容易。

# c# - 如何将对象数组传递为 jQuery Ajax 可以理解的格式？

> ID：11485956
> 
> 赞同：2
> 
> 时间：2012-07-14T17:44:01.183
> 
> 标签：c#, jquery, asp.net, ajax

我有一个具有以下功能的 asmx Web 服务：

```
 [WebMethod]
    public List<Tag> GetTags()
    {
        List<Tag> TagList = new List<Tag>();

        DataTable dt = Helpers.Tags.GetTags();

        foreach (DataRow dr in dt.Rows)
        {
            Tag t = new Tag();
            t.TagName = dr["Tag"].ToString();
            t.TagDescription = dr["Description"].ToString();
            TagList.Add(t);
        }

        return TagList;
    } 
```

这是标签类：

```
 public class Tag
    {
        public string TagName { get; set; }
        public string TagDescription { get; set; }
    } 
```

GetTags() 方法返回标签对象的对象列表。

我在 jQuery 中有一个 AutoComplete 函数，它接受以下格式的数组：

```
 var availableTagsCustom = [
        {
            tagName: 'Ruby',
            tagDescription: 'Ruby is an open-source dynamic...'
        },
        {
            tagName: 'Scala',
            tagDescription: 'Scala is a general purpose programming language...'
        },
        {
            tagName: 'Scheme',
            tagDescription: 'Scheme is a functional programming language....'
        }
    ]; 
```

如何将收到的“标签对象的对象列表”翻译或转换成这种格式？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-14T18:23:32.403

首先，您需要`[System.Web.Script.Services.ScriptService]`在服务类级别设置属性才能获得`Json`结果。

其次，您需要申请`[ScriptMethod(UseHttpGet = true, ResponseFormat = ResponseFormat.Json)]`方法。

```
[WebMethod]
[ScriptMethod(UseHttpGet = true, ResponseFormat = ResponseFormat.Json)]
public List<Tag> GetTags()
{
    List<Tag> TagList = new List<Tag>();

    DataTable dt = Helpers.Tags.GetTags();

    foreach (DataRow dr in dt.Rows)
    {
        Tag t = new Tag();
        t.TagName = dr["Tag"].ToString();
        t.TagDescription = dr["Description"].ToString();
        TagList.Add(t);
    }

    return TagList;
} 
```

请求中的第三组`Content-type: application/json`。

> 这篇文章也可能对[“使用 jquery 使用 aspnet json web-services”有所帮助](http://encosia.com/using-jquery-to-consume-aspnet-json-web-services/)

# mysql - mysql数据库表id复用

> ID：11485958
> 
> 赞同：2
> 
> 时间：2012-07-14T17:44:20.100
> 
> 标签：mysql, database, primary-key, auto-increment

在我的一个项目中，日志系统的当前实现使用 mysql 表。发布给客户的应用程序每天都会将一些日志信息写入表中。我们的服务器上有一个脚本可以自动删除所有超过 60 天的日志。问题是主 ID 不断增长，并且在未来的某个时间，它会超出限制。id 当前设置为 int auto_increment。那么这个问题的最佳解决方案是什么。我不是数据库专家，非常感谢您的帮助。我试图在 Stack Overflow 上搜索，但找不到我的案例的答案。

我应该将int更改为bigint吗？如何在不中断数据库正常运行的情况下做到这一点？我想避免任何停机时间。但即使使用 bigint，id 也会有一天达到限制。看来我只是在拖延问题。有没有好的解决方案？我可以配置数据库，以便它可以重新使用脚本删除旧数据后可用的 ID？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T17:49:21.113

尽量不要删除表，而是在 60 天后归档内容，即从主表中删除并插入到归档表中。对于第二个问题，如果 PK 的值正在增加，请尝试使用“bigint”类型

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-14T18:12:55.767

我认为 4294967295（对于 unsigned int）行的日志数据就足够了，除非您的应用程序仍处于必须生成应用程序操作日志的过早部署阶段。否则，请尝试改进您的实用程序脚本，以便它可以重建表并重新启动索引。当然，它会多花几秒钟，但我认为它足够值得。无论如何，最好的（理想的）数据库驱动应用程序会产生较小的数据（包括日志），但仍能以良好的完整性提供完整的数据集。

# c - FreeBSD 数据结构与通信

> ID：11485960
> 
> 赞同：1
> 
> 时间：2012-07-14T17:45:01.433
> 
> 标签：c, data-structures, kernel, freebsd

我在做一个freeBSD项目，要求是写四个系统调用：

```
1\. set_containerid(int idnum, pid_t pid)
      //set given pid's container ID to idnum
      //child process should inherit parent's containerID
2.create_container(int perms, char *name)
      //perm = 0 means allowing other processes to read/write this container
3.destroy_container(char *name)
4\. write_container(char *name, char *message, int len)
5.read_container(char *name, char *message, int len) 
```

所以，我知道我需要一个链表来保存我自己的数据结构

```
Container{
  char* name;
  char* buf;
} 
```

我想知道我将这个链接列表放在哪里，以便每个进程都可以访问它？

顺便说一句，允许更改系统文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T17:10:24.550

这些真的是系统调用吗？我需要更多信息才能给你一个全面的答案，但是......

我会考虑将它们实现为 /usr/local/lib 和 /usr/local/include 中的用户库，而不是尝试将它们放入内核中。

至少可以说调试内核模块很棘手。添加新的系统调用意味着分叉操作系统，因为 FreeBSD 内核团队可能决定自己添加额外的调用，他们会覆盖你的。

假设它们确实需要是系统调用，那么编写它的最简单方法是编写容器设备驱动程序 - 这样，它可以作为内核可加载模块完成，并且不会干扰系统调用编号/命名方案。设备驱动程序会显示一个字符 dev 条目（例如 /dev/container），然后您可以生成一个库来将 writer_container 函数接口到设备上的 write(2)。同样，可以使用设备上的 ioctl(2) 来完成创建、设置和销毁。

无论哪种方式，您最终都会在 /usr/local 中得到一个 .h 和一个 .a，以提供所需的接口。顺便说一句，你为什么要大写 Container？

# visual-studio-lightswitch - 有没有办法根据下拉菜单在 Lightswitch 中创建搜索屏幕

> ID：11485962
> 
> 赞同：1
> 
> 时间：2012-07-14T17:45:21.420
> 
> 标签：visual-studio-lightswitch

我想在搜索屏幕上的搜索框所在的位置放置一个下拉列表，并使每个条目与不同的查询相关联。这是用于我的业务中使用的数据库，我们目前有太多屏幕，例如：

*   所有设备
*   新设备
*   可用设备
*   出售设备
*   未付费设备
*   未付佣金

我正在使用 2012 RC 的 Lightswitch V2

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-16T17:43:46.347

首先单击添加数据项并添加一个字符串类型的本地属性。为了讨论起见，调用它`SearchType`。在“`SearchType`选择列表”的“属性”窗口中。使用您在上面列出的值（即所有设备、新设备等）填充选择列表。将它拖到控件树上，它将成为一个 AutoCompleteBox。

右键单击我要调用的`Equipment`表，然后单击添加查询。给它起一个名字，比如`EquipmentSearch`. 设置类似于 Yann 链接的第 2 步中所见的查询：

![在此处输入图像描述](../Images/5b74e0a22e0fb3ac677efc8141abf436.png)

添加参数但不添加过滤器。而不是`TownId`让我们调用它`SearchParam`并将其设为 String 类型。

返回屏幕设计器，使用添加数据项将`EquipmentSearch`查询添加到屏幕。将其拖到树上，使其成为网格视图。

单击`EquipmentSeach`左侧列表以使其展开。然后单击`SearchParam`并在其属性窗口中，单击参数绑定下方的框并选择`SearchType`。

`EquipmentSearch`再次在查询设计器中打开。在查询设计器的右上角，单击 Write Code 旁边的箭头并选择`EqupimentSearch_PreprocessQuery`。

现在添加类似于以下的代码：

VB.NET

```
 Private Sub EquipmentSearch_PreprocessQuery(SearchParam As System.Nullable(Of String), ByRef query As System.Linq.IQueryable(Of LightSwitchApplication.Equipment))
        Select Case SearchParam
            Case "New Equipment"
                query = From es In query
                        Where es.EquipStatus = "New"
                        Select es
            Case "Available Equipment"
                query = From es In query
                        Where es.EquipStatus = "Available"
                        Select es
            Case "Sold Equipment"
                query = From es In query
                        Where es.EquipStatus = "Sold"
                        Select es
            Case "Unpaid Equipment"
                query = From es In query
                        Where es.EquipStatus = "Unpaid"
                        Select es
            Case "Unpaid Commission"
                query = From es In query
                        Where es.EquipCommission = "Unpaid"
                        Select es
        End Select
    End Sub 
```

C＃

```
private void EquipmentSearch_PreprocessQuery(System.Nullable[] SearchParam, void Of, void String) {
    ((System.Linq.IQueryable[])(query));
    Of;
    LightSwitchApplication.Equipment;

    switch (SearchParam) {
        case "New Equipment":
            query = From es In query
                    Where es.EquipStatus = "New"
                    Select es
            break;
        case "Available Equipment":
            query = From es In query
                    Where es.EquipStatus = "Available"
                    Select es
            break;
        case "Sold Equipment":
            query = From es In query
                    Where es.EquipStatus = "Sold"
                    Select es
            break;
        case "Unpaid Equipment":
            query = From es In query
                    Where es.EquipStatus = "Unpaid"
                    Select es
            break;
        case "Unpaid Commission":
            query = From es In query
                    Where es.EquipCommission = "Unpaid"
                    Select es
            break;
    } 
```

让“所有设备”和所有其他设备都失败。如果它失败，那么网格视图将显示整个表的完整的、未过滤的视图，这是我假设您在“所有设备”的情况下想要的。在其他情况下，使用 LINQ 自定义返回的结果。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-16T03:21:24.433

您可以将多个数据网格放在同一个屏幕上，方法是向屏幕添加屏幕查询属性，然后将它们从设计器的左侧拖到屏幕控制树上。

你问的是这个吗？

编辑：

“*让每个条目与不同的查询相关联*”让我相信您希望在一个屏幕上显示多个实体。

这有帮助吗？[创建 ComboBox 过滤的搜索屏幕](http://dotnettim.wordpress.com/2011/03/20/lightswitch-creating-a-combobox-filtered-search-screen/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-08-28T14:55:31.760

您还可以在 Lightswitch 中执行的操作是在分配给查询的屏幕中定义一个额外的属性，该属性由屏幕上显示的属性决定。

在查询编辑器中，像往常一样将属性分配给表中的字段。

现在使用用于显示的其他属性，选择 Property_Changed 事件，并使用使用的 switch case（如在 embedded.kyle 的示例中）根据它们的选择分配查询中使用的属性。然后，您可以在屏幕的创建事件中分配默认值。

这将代码保留在预处理查询之外和屏幕代码中。这可能是一种偏好，但我喜欢只在需要时使用预处理查询，例如交叉引用未由单独的表绑定的表来处理它。

# c++ - 在 Linux 中使用 MYSQL.h 编译 C++ 程序

> ID：11485964
> 
> 赞同：2
> 
> 时间：2012-07-14T17:45:32.583
> 
> 标签：c++, mysql, compiler-errors, redhat

我正在按照[这里](http://www.cyberciti.biz/tips/linux-unix-connect-mysql-c-api-program.html)的示例进行操作，并且我的代码是相同的。

当我按照他的解释在控制台中键入 mysql_config --libs 和 mysql_config --cflags 时，我得到的输出与他显示的相同。然而，当我尝试使用编译时

> g++ -o 输出文件 $(mysql_config --cflags) test.cpp $(mysql_config --libs)

我得到错误：

> test.cpp:3:25: error: mysql.h: No such file or directory
> test.cpp: In functionâint main()â:
> test.cpp:6: error:âMYSQLâ is not declared in this scope
> test.cpp: 6：错误：âconnâ 未在此范围内声明
> test.cpp：7：错误：âMYSQL_RESâ 未在此范围内声明
> test.cpp：7：错误：âresâ 未在此范围内声明
> test.cpp：8：错误：“MYSQL_ROW”未在此范围内声明
> test.cpp:8: error: expected `;' 在“row”
> test.cpp:13 之前：错误：“mysql_init”未在此范围内声明
> test.cpp:17：错误：“mysql_real_connect”未在此范围内声明
> test.cpp:18：错误：“mysql_error”未在此范围内声明
> test.cpp:19：错误：“exit”未在此范围内声明
> test.cpp:22：错误：“mysql_query”未在此范围内声明
> test.cpp:23：错误：“mysql_error”未在此范围内声明
> test.cpp:24 ：错误：“exit”未在此范围内声明
> test.cpp:27：错误：“mysql_use_result”未在此范围内声明
> test.cpp:31：错误：“row”未在此范围内声明
> test.cpp:31：错误：“mysql_fetch_row”已未在此范围内声明
> test.cpp:35：错误：“mysql_free_result”未在此范围内声明
> test.cpp:36：错误：“mysql_close”未在此范围内声明

当我尝试“whereis mysql”时，它会显示 /usr/bin/mysql、/usr/lib/mysql 和 /usr/share/mysql，但我不确定 mysql.h 的确切位置。我正在处理的服务器管理员说他安装了 MySQL，我确实可以使用 phpMyAdmin 创建/操作表。

另外，请给我有关此特定问题的建议。我知道 MySQL 的 C++ 包装器，但我现在尝试只使用 C API。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-14T18:00:48.817

这里的代码编译得很好（我只需要为 exit() 包含 stdlib.h）。MySQL 标头应该在 /usr/include/mysql 中，并且由于“mysql_config --cflags”的输出相同，因此您可能缺少/损坏了包。

尝试重新安装他在文章开头列出的包，或检查标头在您的发行版中的哪个包。我正在使用 Ubuntu，这里带有标头的包是 libmysqlclient15-dev。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-14T17:50:35.750

该文件应该在 /usr/include/mysql 下的某个地方。你可以尝试使用类似的东西来搜索它`find /usr -name mysql.h`

# ruby-on-rails - Best way to show image previews before upload in rails & carrierwave

> ID：11485967
> 
> 赞同：14
> 
> 时间：2012-07-14T17:46:01.797
> 
> 标签：ruby-on-rails, image, upload, carrierwave, preview

I've been using rails for past few days and wanted to know what is best way to show image previews before upload in rails & carrierwave.

I came across a few options like using plupload or jquery file upload or using uploadify.

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-04-22T22:55:01.937

If you only need image preview in a form before upload, you (as me) will see that JQuery Upload plugin is just too much complex and not so easy to run properly (I was able to see the preview, but then I couldn't upload the picture).

[http://saravani.wordpress.com/2012/03/14/preview-of-an-image-before-it-is-uploaded/](http://saravani.wordpress.com/2012/03/14/preview-of-an-image-before-it-is-uploaded/)

It's simple and fast to code.

I put the code here just in case the source dies:

Script:

```
 <!-- Assume jQuery is loaded -->
    <script>
      function readURL(input) {
        if (input.files && input.files[0]) {
          var reader = new FileReader();

          reader.onload = function (e) {
            $('#img_prev')
              .attr('src', e.target.result)
              .width(150)
              .height(200);
          };

          reader.readAsDataURL(input.files[0]);
        }
      }
    </script> 
```

In the HTML:

```
 <!--[if IE]>
      <script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    </head>
    <body>
      <input type='file' onchange="readURL(this);" />
      <img id="img_prev" src="#" alt="your image" />
    </body> 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-20T18:23:20.083

You can use the plugin [jQuery File Upload](http://blueimp.github.com/jQuery-File-Upload/) which it's a full solution, but if you need something less robust, you can also try using [FileReader](https://developer.mozilla.org/en-US/docs/DOM/FileReader) directly, like [this](http://html5demos.com/dnd-upload), so you can customize the functionality to whatever you need.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-21T17:31:08.267

According to the documents `image_cache` is showing what you are uploading.

```
<%= f.hidden_field :image_cache %> 
```

# android - 如何异步加载资产？

> ID：11485973
> 
> 赞同：0
> 
> 时间：2012-07-14T17:47:04.647
> 
> 标签：android, asynchronous

我正在创建一个 2d 游戏，我正在使用一个带有静态纹理元素的类来从任何地方访问它们。现在我想异步加载我的资产，因为我想显示一个带有加载屏幕的进度条。我该如何执行这个?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T18:00:25.603

看看 AsyncTask。

事实上，Google 发表了一篇文章，几乎完全符合您的要求：在后台加载图像并在加载图像时显示进度条。不同的是，虽然您的代码将从应用程序资源加载内容，但谷歌文章中的代码会从网络加载图像。但是，它应该为您指明正确的方向。

请参阅[https://sites.google.com/site/androidhowto/how-to-1/create-a-custom-progress-bar-using-asynctask上的文章](https://sites.google.com/site/androidhowto/how-to-1/create-a-custom-progress-bar-using-asynctask)

请注意，该文章中的代码不能很好地处理屏幕旋转。问题是，默认情况下，当屏幕旋转时，原来的会被破坏并创建新的。如果您的 AsyncTask 保留对原始对象的任何引用（例如，指向进度条对象的引用），那么它就会变得悬空。但是，由于您的应用程序是一个游戏，我假设它的方向是固定的，所以您可能不必担心它。

# php - 纯 PHP 解决方案：没有 exec()/system() 的 PDF 到纯文本

> ID：11485975
> 
> 赞同：2
> 
> 时间：2012-07-14T17:47:08.900
> 
> 标签：php, parsing, pdf

我正在尝试使用纯 PHP 将 PDF 文件解析为纯文本（字符串），因为我无法访问我正在处理的服务器拒绝的 exec 或 system 或其他函数。

我在网上找到的功能无法解析那些PDF文件。

这是我从 echo file_get_contents("file.pdf"); 中得到的。

```
%PDF-1.4 5 0 obj << /Type /XObject /Subtype /Image /Filter /DCTDecode /Length 6536 /Width 200 /Height 125 /BitsPerComponent 8 /ColorSpace /DeviceRGB >> stream ÿØÿàJFIFÿÛC  %# , #&')*)-0-(0%()(ÿÛC   (((( 
```

然后是所有内容。所以这是一个 PDF 1.4 5 0。

这是我用于 PDF 1.2-1.3 的功能（不适用于这些文件）：

```
function decomprimiPDF($pdfdata) {
if (strlen ($pdfdata) < 1000 && file_exists ($pdfdata)) 
    $pdfdata = file_get_contents ($pdfdata);
$result = ''; 
if (preg_match_all ('/<<[^>]*FlateDecode[^>]*>>\s*stream(.+)endstream/Uis', $pdfdata, $m)) 
    foreach ($m[1] as $chunk) {
        $chunk = gzuncompress(ltrim ($chunk)); 
        $a = preg_match_all ('/\[([^\]]+)\]/', $chunk, $m2) ? $m2[1] : array ($chunk); 
        foreach ($a as $subchunk) {
            if (preg_match_all ('/\(([^\)]+)\)/', $subchunk, $m3)) {
                $result .= (join ('', $m3[1]) . '*');
            }
        }
} 
```

这里的任何人都可以帮助我使用 PHP 中的函数（我重复一遍，我尝试了几乎所有已经在线的函数，还有一些类，但它们不适用于我正在谈论的 PDF 文件）。

谢谢你的支持 ;）

# shell - /user/bin/awk：awk 中的参数列表太长

> ID：11485982
> 
> 赞同：-2
> 
> 时间：2012-07-14T17:48:46.307
> 
> 标签：shell, awk, grep

> **可能重复：**
> [为什么我在传递引用的参数时得到“/bin/sh：参数列表太长”？](https://stackoverflow.com/questions/11475221/why-do-i-get-bin-sh-argument-list-too-long-when-passing-quoted-arguments)

我在 shell 脚本中使用 awk 脚本，并且我正在处理多个文件，并且每次我从 awk 获取输出，在 shell 中处理它并将处理过的东西再次反馈到 awk 脚本中。

但这里的问题是，每次正在处理的数据都是巨大的大约 30000 行，我将其存储在一个变量中，并使用该`-v`选项传递给 awk。

所以我收到一个错误

> `/usr/bin/awk: Argument list too long`

如何解决这个问题的任何补救措施..我是否清楚这个问题

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-14T17:51:31.647

您试图将太多参数传递给`awk`. 你不应该`-v`用来传递任意大量的数据；而是通过管道将其馈送到`awk`的标准输入。

（如果没有看到您的代码片段，我无法向您展示示例代码，因为我不完全了解您当前如何处理数据。）

# jquery - 字符 jquery 计数

> ID：11485987
> 
> 赞同：-2
> 
> 时间：2012-07-14T17:49:33.987
> 
> 标签：jquery, validation

我可以使用哪个好的（小且易于使用）jquery 插件来控制 textarea 中的字符数量？

输入完一个字符后，如果超过了最大数量，则应删除该字符。

我不应该被允许输入最多一定数量的字符（参数），与 Internet Explorer 6.0 兼容并且在您复制和粘贴文本时工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T17:58:16.943

你根本不需要任何javascript。只需给输入一个 maxlength="somenumber"。即使它是一个文本区域。在这里查看我的 jsfiddle [http://jsfiddle.net/XKxHq/](http://jsfiddle.net/XKxHq/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-14T18:07:13.727

好吧，我同意使用该`maxlength`属性。但是如果你也想使用 textarea，你需要使用插件。
（据我所知 maxlength 不适用于 textarea。）

考虑使用[jQuery 验证器](http://docs.jquery.com/Plugins/Validation)（[此处为另一个站点](http://bassistance.de/jquery-plugins/jquery-plugin-validation/)）：

```
$(function() {

$("#yourform").validate({
    rules: {
        theinputname: "therule"
    },
    messages: {
        theinputname: "iferror"
    }
});

}); 
```

# iphone - UIAlertView 不关闭

> ID：11485990
> 
> 赞同：2
> 
> 时间：2012-07-14T17:49:38.270
> 
> 标签：iphone, ios, alertview

我在按钮单击或（IBAction）中使用以下内容

```
- (IBAction)HistoryBtn:(id)sender {
   self startReport];
   dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^{
        //============================   
          so some long processing code         
        //============================            
        [self stopReport];
   });
} 
```

在哪里

```
-(void) startReport
{
    alert = [[UIAlertView alloc] initWithTitle:@"Generating PDF" message:@" " delegate:self cancelButtonTitle:nil otherButtonTitles:nil];
    UIActivityIndicatorView *progress= [[UIActivityIndicatorView alloc] initWithFrame:CGRectMake(125, 50, 30, 30)];
    progress.activityIndicatorViewStyle = UIActivityIndicatorViewStyleWhiteLarge;
    [alert addSubview:progress];
    [alert setDelegate:self];
    [progress startAnimating];

    [alert show];
}

-(void) stopReport
{
    NSLog(@"  Stop Called  ");
    [self.alert dismissWithClickedButtonIndex:0 animated:NO];
    self.alert = nil;

    NSLog(@"  Stop Called  ");
} 
```

问题是 AlertView 弹出窗口，我可以看到按钮工作，然后调用 StopReport 但 AlertView 停留在那里 我怎样才能让 AlertView 消失

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-14T17:53:44.107

您必须仅在主线程上使用 UI。

```
 - (IBAction)HistoryBtn:(id)sender {
   self startReport];
   dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^{
        //============================   
          so some long processing code         
        //============================      
        dispatch_async(dispatch_get_main_queue(), ^{
            [self stopReport];
        });
   });
} 
```

# sql-server-ce - 到 SQL Server Compact 4.0 的编程连接

> ID：11485991
> 
> 赞同：0
> 
> 时间：2012-07-14T17:50:01.647
> 
> 标签：sql-server-ce, visual-web-developer

我已经安装了 Visual Web Developer 2010 Express 和 SQL Server Compact 4.0，我正在尝试以编程方式连接到数据库。无论我用作连接字符串，但似乎主要抛出数据库不存在的错误。

我从数据库资源管理器获得的连接字符串是：

```
Data Source="C:\Documents and Settings\Amos\My Documents\Visual Studio 2010\Projects\MyFaceWebsite\MyFaceWebsite\MyFaceDB.sdf" 
```

如果我添加详细信息视图，则连接`web.config`为：

```
<add name="ConnectionString" 
     connectionString="Data Source=&quot;C:\Documents and Settings\Amos\My Documents\Visual Studio 2010\Projects\MyFaceWebsite\MyFaceWebsite\MyFaceDB.sdf&quot;"
     providerName="System.Data.SqlServerCe.4.0" /> 
```

有谁知道如何以编程方式设置此连接？

提前谢谢了

# jquery - 如何使用 jQuery 使页面在屏幕上居中？

> ID：11485992
> 
> 赞同：2
> 
> 时间：2012-07-14T17:50:06.230
> 
> 标签：jquery

我使用这个代码：

```
jQuery("#page").css({"left":+'"'+(jQuery(window).innerWidth()-1083)/2+'px"'}); 
```

我没有收到任何错误，但页面没有居中。

我尝试了各种版本，没有任何帮助。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T17:57:33.403

您不需要将值放在额外的引号中，替换为：

```
jQuery("#page").css({"left": (jQuery(window).innerWidth()-1083)/2+'px'}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-14T17:56:45.320

那个`+`牌子在那里做什么？尝试这个：

```
$("#page").css("left", ($(window).innerWidth() - 1083) / 2); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-14T18:01:31.450

不要用 jQuery 来做。用 CSS 做：

```
 #page{
    left:50%;
    margin-left: 541.5px;
 } 
```

(1083/2)=541.5

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-14T18:04:07.050

您已经定位了`#page`包装器不需要的绝对值，您可以相对定位并使用 auto margin 。

```
#page {
   position: relative:
   margin: 0 auto;
} 
```

# performance - 处理 1TB 文件哪个更快：单台机器还是 5 台联网机器？

> ID：11485994
> 
> 赞同：1
> 
> 时间：2012-07-14T17:50:33.207
> 
> 标签：performance, distributed-computing

> 处理 1TB 文件哪个更快：单台机器还是 5 台联网机器？（“处理”是指在该 1TB 文件中查找出现次数最多的单个 UTF-16 字符）。数据传输速率为 1Gbit/sec，整个 1TB 文件驻留在 1 台计算机中，每台计算机都有一个四核 CPU。

下面是我尝试使用 longs 数组（数组大小为 2^16）来跟踪字符数的问题。这应该适合单台机器的内存，因为 2^16 x 2^3（长的大小）= 2^19 = 0.5MB。任何帮助（链接、评论、建议）将不胜感激。我使用了 Jeff Dean 引用的延迟时间，并尽我所能使用我所知道的最佳近似值。最后的答案是：

**单机**：5.8 小时（由于从磁盘读取速度慢）
**5 台联网机器**：7.64 小时（由于从磁盘和网络读取）

```
1) Single Machine
 a) Time to Read File from Disk --> 5.8 hrs
   -If it takes 20ms to read 1MB seq from disk, 
    then to read 1TB from disk takes: 
    20ms/1MB x 1024MB/GB x 1024GB/TB = 20,972 secs 
    = 350 mins = 5.8 hrs 

 b) Time needed to fill array w/complete count data 
    --> 0 sec since it is computed while doing step 1a
    -At 0.5 MB, the count array fits into L2 cache. 
     Since L2 cache takes only 7 ns to access, 
     the CPU can read & write to the count array 
     while waiting for the disk read. 
     Time: 0 sec since it is computed while doing step 1a

 c) Iterate thru entire array to find max count --> 0.00625ms
   -Since it takes 0.0125ms to read & write 1MB from 
    L2 cache and array size is 0.5MB, then the time 
    to iterate through the array is: 
    0.0125ms/MB x 0.5MB = 0.00625ms  

 d) Total Time 
    Total=a+b+c=~5.8 hrs (due to slowness of reading from disk)

2) 5 Networked Machines   
   a) Time to transfr 1TB over 1Gbit/s --> 6.48 hrs
      1TB x 1024GB/TB x 8bits/B x 1s/Gbit 
      = 8,192s = 137m = 2.3hr
      But since the original machine keeps a fifth of the data, it
      only needs to send (4/5)ths of data, so the time required is: 
      2.3 hr x 4/5 = 1.84 hrs
      *But to send the data, the data needs to be read, which
       is (4/5)(answer 1a) = (4/5)(5.8 hrs) = 4.64 hrs
       So total time = 1.84hrs + 4.64 hrs = 6.48 hrs

   b) Time to fill array w/count data from original machine --> 1.16 hrs
      -The original machine (that had the 1TB file) still needs to
       read the remainder of the data in order to fill the array with
       count data. So this requires (1/5)(answer 1a)=1.16 hrs.  
       The CPU time to read & write to the array is negligible, as 
       shown in 1b.      

   c) Time to fill other machine's array w/counts --> not counted   
      -As the file is being transferred, the count array can be 
       computed. This time is not counted. 

   d) Time required to receive 4 arrays --> (2^-6)s
      -Each count array is 0.5MB
       0.5MB x 4 arrays x 8bits/B x 1s/Gbit 
       = 2^20B/2 x 2^2 x 2^3 bits/B x 1s/2^30bits 
       = 2^25/2^31s = (2^-6)s 

   d) Time to merge arrays  
      --> 0 sec(since it can be merge while receiving)

   e) Total time 
      Total=a+b+c+d+e =~ a+b =~ 6.48 hrs + 1.16 hrs = 7.64 hrs 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T20:39:14.210

这不是答案，而只是更长的评论。您错误地计算了频率阵列的大小。1 TiB 文件包含 550 个 Gsym，因为没有说明它们的预期频率，所以您需要一个至少 64 位整数（即 8 个字节/元素）的计数数组。这个频率数组的总大小将是`2^16 * 8 = 2^19`字节或只有 512 KiB，而不是您计算错误的 4 GiB。通过 1 Gbps 链路发送此数据仅需 ≈4.3 毫秒（如果您使用 TCP/IP over Ethernet 且 MTU 为 1500 字节/更少的巨型帧，但它们不受广泛支持/），则协议标头大约需要 3%。此数组大小也完全适合 CPU 缓存。

您严重高估了处理数据和提取频率所需的时间，并且您还忽略了它可以与磁盘读取重叠的事实。事实上，更新驻留在 CPU 缓存中的频率数组非常快，计算时间可以忽略不计，因为大部分时间都会与慢速磁盘读取重叠。但是您低估了读取数据所需的时间。即使使用多核 CPU，您仍然只有一条通往硬盘驱动器的路径，因此您仍然需要完整的 5.8 小时来读取单个机箱中的数据。

事实上，这是一种数据处理的示例，它既不能从并行网络处理中受益，也不能从拥有多个 CPU 内核中受益。这就是为什么超级计算机和其他快速网络处理系统使用分布式并行文件存储，可以提供许多 GB/s 的聚合读/写速度。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-17T02:20:23.757

如果你的源机器是 5 的一部分，你只需要发送 0.8tb。

**将数据发送到其他机器甚至可能没有意义**。考虑一下：

为了让源机器发送数据，它必须首先命中磁盘，以便在通过网络发送数据之前将数据读入主存。如果数据已经在主内存中并且没有被处理，那么你就是在浪费这个机会。

因此，假设加载到 CPU 缓存比从磁盘加载到内存或通过网络传输数据**要**便宜得多（这是真的，除非您正在处理外来硬件），那么您最好只在源计算机上执行此操作，并且拆分任务的唯一地方是如果“文件”是以分布式方式创建/填充的。

所以你应该只计算一个 1Tb 文件的磁盘读取时间，L1/L2 缓存和 CPU 操作的开销很小。缓存访问模式是最佳的，因为它是顺序的，因此您只对每条数据缓存一次未命中。

这里的要点是磁盘是主要的瓶颈，它掩盖了其他一切。

# python - Python函数不返回变量

> ID：11485999
> 
> 赞同：0
> 
> 时间：2012-07-14T17:51:06.700
> 
> 标签：python

我正在做一个 python 练习并编写我的第一个函数，我必须在其中返回一个值......但是没有返回该值。我正在使用 Python 3.2.3 通过 OS X 上的终端运行 .py 文件。最后一行应该与第四行不同，但它们的输出是一样的。但是，如果我在函数本身中打印 textMessage ，它会打印得很好。我错过了什么？

```
def caesarEncipher(textMessage, shift):
    listOfChars = list(textMessage)
    length = len(listOfChars)
    count = 0
    while length != count:
        listOfChars[count] = chr(ord(listOfChars[count])+shift)
        count = count + 1
    textMessage = ''.join(listOfChars)
    return (textMessage)

print ("Please enter your message to cipher:")
textMessage = raw_input()
print ("Please enter the value you wish to shift your message by:") 
shift = int(input())
print "Your original message was:"
print textMessage
caesarEncipher(textMessage, shift)
print "Your message adjusted by a shift of", shift, "is:"
print textMessage 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-14T17:52:43.463

您需要***保存***函数返回的值`caesarEncipher()`。

所以*代替这个*：

```
caesarEncipher(textMessage, shift) 
```

*有：*

```
textMessage = caesarEncipher(textMessage, shift) 
```

现在该方法*正在*返回一个值，但它没有被保存，因此无法在您的后续`print`语句中显示。一旦将函数的返回值分配给变量（在这种情况下`textMessage`），您就可以使用它。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-14T17:52:38.960

确实如此。您必须将其捕获到变量中。

```
textMessage = caesarEncipher(textMessage, shift) 
```

无论如何，凯撒不会这样加密它。如果您`shift`将字母的值设为`Z`正数，则您已经超出了字母表并返回了一些其他字符。

您可以使用此方法（仅适用于小写字符）：

```
import string

def caesarEncipher(textMessage, shift):
    src_chars = string.lowercase
    dst_chars = string.lowercase[shift:] + string.lowercase[:shift]
    return textMessage.translate(string.maketrans(src_chars, dst_chars)) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-14T17:52:53.307

你返回值。但你什么也不做。调用函数时需要存储返回值：

```
textMessage = caesatEncipher(textMessage, shift) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-14T17:53:13.220

您永远不会存储`ceaserEncipher`. 要存储该值，请执行以下操作：

```
new_text_message=ceasarEncipher(textMessage,shift) 
```