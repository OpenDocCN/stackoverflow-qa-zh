# StackOverflow 问答 11489000-11489999

# algorithm - 关于 Perlin Noise 算法中的衰减值是什么意思？

> ID：11489000
> 
> 赞同：1
> 
> 时间：2012-07-15T02:47:21.373
> 
> 标签：algorithm, perlin-noise

总的来说，我刚刚开始了解 Perlin Noise，但我读过的许多关于地形生成的网站都提到了衰减值。

在 3D（基于立方体的地形）中，使用 3D Perlin Noise 函数的结果作为密度测试似乎很典型，如果它大于 0 是陆地，小于或等于 0 是空气。然后在进行密度测试之前将函数的结果简单地偏移当前的 y 值以获得平滑的半平坦地形。

我不明白的是关于衰减值的含义。

有人可以解释一下这个意义上的衰减值是指什么，甚至可以使用代码示例吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-15T08:43:42.023

衰减用于确定八度音阶的权重。您可以使用显式权重，这使您可以自定义更广泛的结果。或者，您可以使用带有衰减值的隐式权重。这会将权重设置为指数函数。

例如，如果您的衰减值为 0.5，则八度音阶的权重如下（未归一化）

```
Octave 1: 1 = falloff ^ 0
Octave 2: 1 * 0.5 = 0.5 = falloff ^ 1
Octave 3: 0.5 * 0.5 = 0.25 = falloff ^ 2
Octave 4: 0.25 * 0.5 = 0.125 = falloff ^ 3 
```

总体结果计算如下

```
Sum [i] ( (value of octave i) * (weight i) ) 
```

通常需要进行归一化，以便权重总和为 1。

# c++ - 为什么在 C 中可以在函数调用中使用可变数组长度，但在 C++ 中却不行？

> ID：11489002
> 
> 赞同：3
> 
> 时间：2012-07-15T02:47:26.367
> 
> 标签：c++, arrays, variables, parameters, size

我想将函数内部的平面 1D 数组视为 3D 数组。我知道我可以使用宏来翻译这样的坐标：

```
#define f3d(x,y,z,nx,ny) ( (z)*(nx)*(ny) + (y)*(nx) + (x)) 
```

但是我的老师告诉我有一种方法可以简单地将它们转换为函数调用。因此，以下测试程序与编译器调用完美配合：`gcc -std=c99 -o test.exe main.c`

主.c：

```
#include <stdlib.h>
#include <stdio.h>
static void init(int n, double a[n][n][n]){  
  for(int i=0; i<n; i++)
    for(int j=0; j<n; j++)
      for(int k=0; k<n; k++)
        a[i][j][k] = i;
}

int main(int argc, char **argv){
  int n = 5;
  double *a = malloc(n*n*n*sizeof(*a));
  init(n, (double (*)[n][n])a);
  for(int i=0; i<n*n*n; i++)printf("%lf ",a[i]);    
  return 0;
} 
```

但是现在我必须使用 C++ 并且无法编译它： `g++ -o test.exe main.c` 编译器说`error: array bound is not an integer constant` 我可以想象为什么编译器与可变数组长度作斗争，但为什么它在 C 中工作？

有人可以告诉我为什么吗？

有没有解决这个问题的方法？

提前致谢！

更新：非常感谢您的回答，但现在我很困惑。我使用 g++ (SUSE Linux) 4.4.1 [gcc-4_4-branch revision 150839]，它应该能够支持 VLA。为什么它不编译并抛出“错误：数组绑定不是整数常量”？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-15T02:54:33.427

来自海湾合作委员会：

> [http://gcc.gnu.org/onlinedocs/gcc/Variable-Length.html](http://gcc.gnu.org/onlinedocs/gcc/Variable-Length.html)
> 
> ISO C99 允许可变长度自动数组，作为扩展，GCC 在 C90 模式和 C++ 中接受它们。这些数组的声明与任何其他自动数组一样，但其长度不是常量表达式。存储在声明时分配，并在退出大括号级别时释放。...
> 
> 您还可以使用可变长度数组作为函数的参数：
> 
> ```
>  struct entry
>  tester (int len, char data[len][len])
>  {
>    /* ... */
>  } 
> ```

# ssas-2012 - 解析字符串 [Time].[Year] 时，未在多维数据集中找到维度“[Time]”

> ID：11489004
> 
> 赞同：4
> 
> 时间：2012-07-15T02:48:10.600
> 
> 标签：ssas-2012

[Time].[Year] 属性的 defaultMember 属性设置为

```
 tail(FILTER( [Date].[Year].members, 
        not  ISEMPTY( [Date].currentmember )), 1).item(0) 
```

当我尝试浏览多维数据集时，出现错误：

DefaultMember(Date,Year) (1,14) 解析字符串 [Time].[Year] 时，未在多维数据集中找到维度 '[Time]'

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T18:58:50.360

考虑到您显示的表达式具有 Date 维度而不是 Time 维度，这是一条奇怪的消息。如果情况确实如此，这就是我要找出问题所在。在文件系统中找到解决方案文件夹，打开项目文件夹，然后打开bin文件夹。您应该有一个带有 ASDATABASE 文件扩展名的文件。如果看不到文件扩展名，但看到类型列，请打开具有 Analysis Services 数据库部署内容类型的列。使用记事本或您喜欢的文本或 XML 编辑器打开它。在文件中搜索 [Time].[Year]，然后通过节点向后查找它属于哪个维度的属性。然后您可以进入 SSDT 并解决问题。

# android - 将内容分配给片段中的选项卡 - Android

> ID：11489012
> 
> 赞同：0
> 
> 时间：2012-07-15T02:50:45.857
> 
> 标签：android, tabs, android-fragments, android-viewpager

刚刚在 Eclipse 的最新 ADT 版本中创建了一个新项目，发现它会设置某些环境让您开始工作。我选择 Tabs + Swipe。

它有这个代码我有疑问：

```
 public static class DummyFragment extends Fragment {
    public DummyFragment () {
    }

    public static final String ARG_SECTION_NUMBER = "section_number";

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container,
            Bundle savedInstanceState) {
        TextView textView = new TextView(getActivity());
        textView.setGravity(Gravity.CENTER);
        Bundle args = getArguments();
        textView.setText(Integer.toString(args.getInt(ARG_SECTION_NUMBER)));
        return textView;
    }
} 
```

两个选项卡都引用同一个片段。它所做的只是切换 TextView 上带有标签位置编号（1、2 或 3）的内容。

1.  首先是更高级的问题：我想要选项卡切换到的两个不同的片段。在示例代码中，它指向同一个片段。这种变化发生在哪里？我可以看到简短的代码示例吗？

2.  更简单的问题：我有两个预定义的 XML 布局，我想用它来设置每个选项卡（或片段）。我在实际的片段中这样做吗？如果是这样，在哪里？setContentView 似乎在 onCreateView 方法中不起作用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-15T03:25:04.680

1.  不太确定这个问题到底在问什么，但如果我理解正确的话`TabHost`（或者你用来管理`Fragment`标签的任何东西）正在实例化多个实例，`DummyFragment`然后在单击标签时将每个实例附加到屏幕上。这一切都在幕后完成......您需要担心的是实现`Fragment`并告诉它`TabHost`何时应该被实例化/显示。

2.  `Fragment`s没有`setContentView`方法。您应该`Fragment`从 xml 中扩充您的布局`onCreateView`。例如，

    ```
    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
        return inflater.inflate(R.layout.fragment_layout, container, false);
    } 
    ```

# javascript - 如何让 jquery 用数字循环

> ID：11489019
> 
> 赞同：-3
> 
> 时间：2012-07-15T02:53:54.963
> 
> 标签：javascript, jquery

我正在尝试为我的变量分配一个数字，即颜色交换 1、颜色交换 2、颜色交换 3

我有以下

```
var i = 1-36;

    // Get current image src
    var curSrc = $('#colorswap'[i]).attr('src'); 
```

它似乎没有达到预期的效果：colorswap1，colorswap2

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-15T02:55:39.650

您的变量声明正在执行代数减法，并将导致`-35`. 你需要某种循环。然后，使用`+`运算符将​​索引与字符串连接起来。因为其中一件事是字符串，所以它将连接而不是“添加”。

以下是您可以执行的操作的示例：

```
for (var i = 1; i <= 36; i++) {
    var curSrc = $('#colorswap' + i).attr('src');
    // now do stuff with curSrc here
} 
```

# python - 如何通过 Celery 发送 HTML 电子邮件？它不断发送文本/纯文本

> ID：11489021
> 
> 赞同：5
> 
> 时间：2012-07-15T02:54:17.117
> 
> 标签：python, django, redis, celery, django-celery

我设置了一个系统 Django/Celery/Redis。我使用 EmailMultiAlternatives 发送我的 HTML 和文本电子邮件。

当我在请求过程中发送电子邮件时，电子邮件以 HTML 格式发送。一切运行良好，它围绕着一个功能。这是代码：

```
def send_email(email, email_context={}, subject_template='', body_text_template='',
    body_html_template='', from_email=settings.DEFAULT_FROM_EMAIL):

    # render content
    subject = render_to_string([subject_template], context).replace('\n', ' ')
    body_text = render_to_string([body_text_template], context)
    body_html = render_to_string([body_html_template], context)

    # send email
    email = EmailMultiAlternatives(subject, body_text, from_email, [email])
    email.attach_alternative(body_html, 'text/html')
    email.send() 
```

但是，当我尝试将其作为 Celery 任务运行时，如下所示，它只是作为“文本/纯文本”发送。可能是什么问题呢？或者我可以做些什么来了解更多信息？非常感谢任何提示或解决方案。

```
@task(name='tasks.email_features', ignore_result=True)
def email_features(user):
    email.send_email(user.email,
        email_context={'user': user},
        subject_template='emails/features_subject.txt',
        body_text_template='emails/features_body.txt',
        body_html_template='emails/features_body.html') 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-15T06:31:55.600

Celery 不影响任务的执行结果。更改任务后您是否重新启动了celeryd？celery 重新加载 Python 代码很重要。

当您使用`EmailMultiAlternatives`and`email.attach_alternative(body_html, 'text/html')`时，电子邮件是在 和 中发送的，`Content-Type: multipart/alternative;`并且`text/html`是另一种选择，它取决于邮件收据在呈现期间选择邮件的内容类型。那么查看程序和 celery 程序之间的收据是否相同？

您可以直接输出发送邮件，通过`python -m smtpd -n -c DebuggingServer localhost:25`查找实际邮件。我已经在我的带有 redis 支持的 Celery 的 mac 上进行了测试，从[官方文档](https://docs.djangoproject.com/en/dev/topics/email/?from=olddocs/#sending-alternative-content-types)中获取的示例的输出与预期的相同。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-09-13T06:19:14.673

```
 from django.core import mail
    from django.template.loader import render_to_string
    from django.utils.html import strip_tags

    class SendEmail(Task):
        name="send_email"

        def run(self,email):
            subject = 'Daily News Letter'
            html_message = render_to_string('letter.html', {'context': 'values'})
            plain_message = strip_tags(html_message)
            from_email = env('EMAIL_HOST_USER') 
            mail.send_mail(subject, plain_message, from_email, [email], html_message=html_message)
            return None

send_email = celery_app.register_task(SendEmail()) 
```

# delphi - 当我对 SMS PDU（GSM 7 位）用户数据进行编码/解码时，是否需要先添加 UDH？

> ID：11489025
> 
> 赞同：8
> 
> 时间：2012-07-15T02:54:43.083
> 
> 标签：delphi, sms, concatenation, gsm, pdu

**虽然当 UDH不**存在时我可以成功地对 SMS 消息的用户数据部分进行编码和解码，但是当 UDH**存在**时（在这种情况下，对于串联的 SMS）我会遇到麻烦。

当我对用户数据进行解码或编码时，是否需要先将 UDH 添加到文本中？

本文提供了一个编码例程示例，该示例使用填充位（我仍然不完全理解）补偿 UDH，但它没有给出传递给例程的数据示例，因此我没有明确的用例（我在网站上找不到解码样本）：http: [//mobiletidings.com/2009/07/06/how-to-pack-gsm7-into-septets/](http://mobiletidings.com/2009/07/06/how-to-pack-gsm7-into-septets/)。

到目前为止，如果我在解码之前将 UDH 预先添加到用户数据中，我已经能够得到一些结果，但我怀疑这只是一个巧合。

例如（使用来自[https://en.wikipedia.org/wiki/Concatenated_SMS](https://en.wikipedia.org/wiki/Concatenated_SMS)的值）：

```
UDH := '050003000302';
ENCODED_USER_DATA_PART := 'D06536FB0DBABFE56C32'; // with padding, evidently
DecodedUserData := Decode7Bit(UDH + ENCODED_USER_DATA_PART);
Writeln(DecodedUserData); 
```

输出：“ß@ø¿Æ @hello world”

```
EncodedUserData := Encode7Bit(DecodedUserData);
DecodedUserData := Decode7Bit(EncodedEncodedUserData);
Writeln(DecodedUserData); 
```

相同的输出：“ß@ø¿Æ @hello world”

**如果没有**预先设置 UDH，我会得到垃圾：

```
DecodedUserData := Decode7Bit(ENCODED_USER_DATA_PART);
Writeln(DecodedUserData); 
```

输出：“PKYY§An§eYI”

处理这个的正确方法是什么？

在对用户数据进行编码时，我是否应该在文本中包含 UDH？

我应该在解码后去掉垃圾字符，还是我（正如我怀疑的那样）完全不符合这个假设？

虽然这里的解码算法似乎在没有 UDH 的情况下工作，但它似乎没有考虑任何 UDH 信息： [寻找 GSM 7bit encode/decode algorithm](https://stackoverflow.com/questions/5297733/looking-for-gsm-7bit-encode-decode-algorithm)。

如果有人能让我正确地继续前进，我将永远感激不尽。任何清晰的示例/代码示例将不胜感激。;-)

我还将提供一个包含算法的小型示例应用程序，如果有人认为它有助于解决这个谜题。

**编辑1：**

我正在使用 Delphi XE2 Update 4 Hotfix 1

**编辑2：**

感谢@whosrdaddy 的帮助，我能够成功地让我的编码/解码例程工作。

作为旁注，我很好奇为什么当 UDH 没有用它编码时用户数据需要在 7 位边界上，但是@whosrdaddy 引用的 ETSI 规范段落中的最后一句话回答说：

> *如果使用 7 位数据并且 TP-UD-Header 没有在 septet 边界上结束，则在最后一个 Information Element Data 八位字节之后插入填充位，以便整个 TP-UD 标头有整数个 septets。**这是为了确保 SM 本身在八位字节边界上开始，以便较早的相位移动将能够显示 SM 本身，尽管可能无法理解 TP-UD 字段中的 TP-UD Header***

我的代码部分基于以下资源中的示例：

[寻找 GSM 7bit 编码/解码算法](https://stackoverflow.com/questions/5297733/looking-for-gsm-7bit-encode-decode-algorithm)

[https://en.wikipedia.org/wiki/Concatenated_SMS](https://en.wikipedia.org/wiki/Concatenated_SMS)

[http://mobiletidings.com/2009/02/18/combining-sms-messages/](http://mobiletidings.com/2009/02/18/combining-sms-messages/)

[http://mobiletidings.com/2009/07/06/how-to-pack-gsm7-into-septets/](http://mobiletidings.com/2009/07/06/how-to-pack-gsm7-into-septets/)

[http://mobileforensics.files.wordpress.com/2007/06/understanding_sms.pdf](http://mobileforensics.files.wordpress.com/2007/06/understanding_sms.pdf)

[http://www.dreamfabric.com/sms/](http://www.dreamfabric.com/sms/)

[http://www.mediaburst.co.uk/blog/concatenated-sms/](http://www.mediaburst.co.uk/blog/concatenated-sms/)

这是其他在 SMS 编码/解码方面遇到问题的人的代码。我确信它可以被简化/优化（欢迎评论），但我已经成功地使用了几种不同的排列和 UDH 标头长度对其进行了测试。我希望它有所帮助。

```
unit SmsUtils;

interface

uses Windows, Classes, Math;

function Encode7Bit(const AText: string; AUdhLen: Byte;
  out ATextLen: Byte): string;

function Decode7Bit(const APduData: string; AUdhLen: Integer): string;

implementation

var
  g7BitToAsciiTable: array [0 .. 127] of Byte;
  gAsciiTo7BitTable: array [0 .. 255] of Byte;

procedure InitializeTables;
var
  AsciiValue: Integer;
  i: Integer;
begin
  // create 7-bit to ascii table
  g7BitToAsciiTable[0] := 64; // @
  g7BitToAsciiTable[1] := 163;
  g7BitToAsciiTable[2] := 36;
  g7BitToAsciiTable[3] := 165;
  g7BitToAsciiTable[4] := 232;
  g7BitToAsciiTable[5] := 223;
  g7BitToAsciiTable[6] := 249;
  g7BitToAsciiTable[7] := 236;
  g7BitToAsciiTable[8] := 242;
  g7BitToAsciiTable[9] := 199;
  g7BitToAsciiTable[10] := 10;
  g7BitToAsciiTable[11] := 216;
  g7BitToAsciiTable[12] := 248;
  g7BitToAsciiTable[13] := 13;
  g7BitToAsciiTable[14] := 197;
  g7BitToAsciiTable[15] := 229;
  g7BitToAsciiTable[16] := 0;
  g7BitToAsciiTable[17] := 95;
  g7BitToAsciiTable[18] := 0;
  g7BitToAsciiTable[19] := 0;
  g7BitToAsciiTable[20] := 0;
  g7BitToAsciiTable[21] := 0;
  g7BitToAsciiTable[22] := 0;
  g7BitToAsciiTable[23] := 0;
  g7BitToAsciiTable[24] := 0;
  g7BitToAsciiTable[25] := 0;
  g7BitToAsciiTable[26] := 0;
  g7BitToAsciiTable[27] := 0;
  g7BitToAsciiTable[28] := 198;
  g7BitToAsciiTable[29] := 230;
  g7BitToAsciiTable[30] := 223;
  g7BitToAsciiTable[31] := 201;
  g7BitToAsciiTable[32] := 32;
  g7BitToAsciiTable[33] := 33;
  g7BitToAsciiTable[34] := 34;
  g7BitToAsciiTable[35] := 35;
  g7BitToAsciiTable[36] := 164;
  g7BitToAsciiTable[37] := 37;
  g7BitToAsciiTable[38] := 38;
  g7BitToAsciiTable[39] := 39;
  g7BitToAsciiTable[40] := 40;
  g7BitToAsciiTable[41] := 41;
  g7BitToAsciiTable[42] := 42;
  g7BitToAsciiTable[43] := 43;
  g7BitToAsciiTable[44] := 44;
  g7BitToAsciiTable[45] := 45;
  g7BitToAsciiTable[46] := 46;
  g7BitToAsciiTable[47] := 47;
  g7BitToAsciiTable[48] := 48;
  g7BitToAsciiTable[49] := 49;
  g7BitToAsciiTable[50] := 50;
  g7BitToAsciiTable[51] := 51;
  g7BitToAsciiTable[52] := 52;
  g7BitToAsciiTable[53] := 53;
  g7BitToAsciiTable[54] := 54;
  g7BitToAsciiTable[55] := 55;
  g7BitToAsciiTable[56] := 56;
  g7BitToAsciiTable[57] := 57;
  g7BitToAsciiTable[58] := 58;
  g7BitToAsciiTable[59] := 59;
  g7BitToAsciiTable[60] := 60;
  g7BitToAsciiTable[61] := 61;
  g7BitToAsciiTable[62] := 62;
  g7BitToAsciiTable[63] := 63;
  g7BitToAsciiTable[64] := 161;
  g7BitToAsciiTable[65] := 65;
  g7BitToAsciiTable[66] := 66;
  g7BitToAsciiTable[67] := 67;
  g7BitToAsciiTable[68] := 68;
  g7BitToAsciiTable[69] := 69;
  g7BitToAsciiTable[70] := 70;
  g7BitToAsciiTable[71] := 71;
  g7BitToAsciiTable[72] := 72;
  g7BitToAsciiTable[73] := 73;
  g7BitToAsciiTable[74] := 74;
  g7BitToAsciiTable[75] := 75;
  g7BitToAsciiTable[76] := 76;
  g7BitToAsciiTable[77] := 77;
  g7BitToAsciiTable[78] := 78;
  g7BitToAsciiTable[79] := 79;
  g7BitToAsciiTable[80] := 80;
  g7BitToAsciiTable[81] := 81;
  g7BitToAsciiTable[82] := 82;
  g7BitToAsciiTable[83] := 83;
  g7BitToAsciiTable[84] := 84;
  g7BitToAsciiTable[85] := 85;
  g7BitToAsciiTable[86] := 86;
  g7BitToAsciiTable[87] := 87;
  g7BitToAsciiTable[88] := 88;
  g7BitToAsciiTable[89] := 89;
  g7BitToAsciiTable[90] := 90;
  g7BitToAsciiTable[91] := 196;
  g7BitToAsciiTable[92] := 204;
  g7BitToAsciiTable[93] := 209;
  g7BitToAsciiTable[94] := 220;
  g7BitToAsciiTable[95] := 167;
  g7BitToAsciiTable[96] := 191;
  g7BitToAsciiTable[97] := 97;
  g7BitToAsciiTable[98] := 98;
  g7BitToAsciiTable[99] := 99;
  g7BitToAsciiTable[100] := 100;
  g7BitToAsciiTable[101] := 101;
  g7BitToAsciiTable[102] := 102;
  g7BitToAsciiTable[103] := 103;
  g7BitToAsciiTable[104] := 104;
  g7BitToAsciiTable[105] := 105;
  g7BitToAsciiTable[106] := 106;
  g7BitToAsciiTable[107] := 107;
  g7BitToAsciiTable[108] := 108;
  g7BitToAsciiTable[109] := 109;
  g7BitToAsciiTable[110] := 110;
  g7BitToAsciiTable[111] := 111;
  g7BitToAsciiTable[112] := 112;
  g7BitToAsciiTable[113] := 113;
  g7BitToAsciiTable[114] := 114;
  g7BitToAsciiTable[115] := 115;
  g7BitToAsciiTable[116] := 116;
  g7BitToAsciiTable[117] := 117;
  g7BitToAsciiTable[118] := 118;
  g7BitToAsciiTable[119] := 119;
  g7BitToAsciiTable[120] := 120;
  g7BitToAsciiTable[121] := 121;
  g7BitToAsciiTable[122] := 122;
  g7BitToAsciiTable[123] := 228;
  g7BitToAsciiTable[124] := 246;
  g7BitToAsciiTable[125] := 241;
  g7BitToAsciiTable[126] := 252;
  g7BitToAsciiTable[127] := 224;

  // create ascii to 7-bit table
  ZeroMemory(@gAsciiTo7BitTable, SizeOf(gAsciiTo7BitTable));
  for i := 0 to High(g7BitToAsciiTable) do
  begin
    AsciiValue := g7BitToAsciiTable[i];
    gAsciiTo7BitTable[AsciiValue] := i;
  end;
end;

function ConvertAsciiTo7Bit(const AText: string; AUdhLen: Byte): AnsiString;
const
  ESC = #27;
  ESCAPED_ASCII_CODES = [#94, #123, #125, #92, #91, #126, #93, #124, #164];
var
  Septet: Byte;
  Ch: AnsiChar;
  i: Integer;
begin
  for i := 1 to Length(AText) do
  begin
    Ch := AnsiChar(AText[i]);
    if not(Ch in ESCAPED_ASCII_CODES) then
      Septet := gAsciiTo7BitTable[Byte(Ch)]
    else
    begin
      Result := Result + ESC;
      case (Ch) of
        #12: Septet := 10;
        #94: Septet := 20;
        #123: Septet := 40;
        #125: Septet := 41;
        #92: Septet := 47;
        #91: Septet := 60;
        #126: Septet := 61;
        #93: Septet := 62;
        #124: Septet := 64;
        #164: Septet := 101;
      else Septet := 0;
      end;
    end;
    Result := Result + AnsiChar(Septet);
  end;
end;

function Convert7BitToAscii(const AText: AnsiString): string;
const
  ESC = #27;
var
  TextLen: Integer;
  Ch: Char;
  i: Integer;
begin
  Result := '';
  TextLen := Length(AText);
  i := 1;
  while (i <= TextLen) do
  begin
    Ch := Char(AText[i]);
    if (Ch <> ESC) then
      Result := Result + Char(g7BitToAsciiTable[Ord(Ch)])
    else
    begin
      Inc(i); // skip ESC
      if (i <= TextLen) then
      begin
        Ch := Char(AText[i]);
        case (Ch) of
          #10: Ch := #12;
          #20: Ch := #94;
          #40: Ch := #123;
          #41: Ch := #125;
          #47: Ch := #92;
          #60: Ch := #91;
          #61: Ch := #126;
          #62: Ch := #93;
          #64: Ch := #124;
          #101: Ch := #164;
        end;
        Result := Result + Ch;
      end;
    end;
    Inc(i);
  end;
end;

function StrToHex(const AText: AnsiString): AnsiString; overload;
var
  TextLen: Integer;
begin
  // set the text buffer size
  TextLen := Length(AText);
  // set the length of the result to double the string length
  SetLength(Result, TextLen * 2);
  // convert the string to hex
  BinToHex(PAnsiChar(AText), PAnsiChar(Result), TextLen);
end;

function StrToHex(const AText: string): string; overload;
begin
  Result := string(StrToHex(AnsiString(AText)));
end;

function HexToStr(const AText: AnsiString): AnsiString; overload;
var
  ResultLen: Integer;
begin
  // set the length of the result to half the Text length
  ResultLen := Length(AText) div 2;
  SetLength(Result, ResultLen);
  // convert the hex back into a string
  if (HexToBin(PAnsiChar(AText), PAnsiChar(Result), ResultLen) <> ResultLen) then
    Result := 'Error Converting Hex To String: ' + AText;
end;

function HexToStr(const AText: string): string; overload;
begin
  Result := string(HexToStr(AnsiString(AText)));
end;

function Encode7Bit(const AText: string; AUdhLen: Byte;
  out ATextLen: Byte): string;
// AText: Ascii text
// AUdhLen: Length of UDH including UDH Len byte (e.g. '050003CC0101' = 6 bytes)
// ATextLen: returns length of text that was encoded.  This can be different
// than Length(AText) due to escape characters
// Returns text as encoded PDU hex string
var
  Text7Bit: AnsiString;
  Pdu: AnsiString;
  PduIdx: Integer;
  PduLen: Byte;
  PaddingBits: Byte;
  BitsToMove: Byte;
  Septet: Byte;
  Octet: Byte;
  PrevOctet: Byte;
  ShiftedOctet: Byte;
  i: Integer;
begin
  Result := '';
  Text7Bit := ConvertAsciiTo7Bit(AText, AUdhLen);
  ATextLen := Length(Text7Bit);
  BitsToMove := 0;
  // determine how many padding bits needed based on the UDH
  if (AUdhLen > 0) then
    PaddingBits := 7 - ((AUdhLen * 8) mod 7)
  else
    PaddingBits := 0;
  // calculate the number of bytes needed to store the 7-bit text
  // along with any padding bits that are required
  PduLen := Ceil(((ATextLen * 7) + PaddingBits) / 8);
  // reserve space for the PDU bytes
  Pdu := AnsiString(StringOfChar(#0, PduLen));
  PduIdx := 1;
  for i := 1 to ATextLen do
  begin
    if (BitsToMove = 7) then
      BitsToMove := 0
    else
    begin
      // convert the current character to a septet (7-bits) and make room for
      // the bits from the next one
      Septet := (Byte(Text7Bit[i]) shr BitsToMove);
      if (i = ATextLen) then
        Octet := Septet
      else
      begin
        // convert the next character to a septet and copy the bits from it
        // to the octet (PDU byte)
        Octet := Septet or
          Byte((Byte(Text7Bit[i + 1]) shl Byte(7 - BitsToMove)));
      end;
      Byte(Pdu[PduIdx]) := Octet;
      Inc(PduIdx);
      Inc(BitsToMove);
    end;
  end;
  // The following code pads the pdu on the *right* by shifting it to the *left*
  // by <PaddingBits>. It does this by using the same bit storage convention as
  // the 7-bit compression routine above, by taking the most significant
  // <PaddingBits> from each PDU byte and moving them to the least significant
  // bits of the next PDU byte. If there is no room in the last PDU byte for the
  // high bits of the previous byte that were removed, then those bits are
  // placed into an additional byte reserved for this purpose.
  // Note: <PduLen> has already been set to account for the reserved byte if
  // it is required.
  if (PaddingBits > 0) then
  begin
    SetLength(Result, (PduLen * 2));
    PrevOctet := 0;
    for PduIdx := 1 to PduLen do
    begin
      Octet := Byte(Pdu[PduIdx]);
      if (PduIdx = 1) then
        ShiftedOctet := Byte(Octet shl PaddingBits)
      else
        ShiftedOctet := Byte(Octet shl PaddingBits) or
          Byte(PrevOctet shr (8 - PaddingBits));
      Byte(Pdu[PduIdx]) := ShiftedOctet;
      PrevOctet := Octet;
    end;
  end;
  Result := string(StrToHex(Pdu));
end;

function Decode7Bit(const APduData: string; AUdhLen: Integer): string;
// APduData: Hex string representation of PDU data
// AUdhLen: Length of UDH including UDH Len (e.g. '050003CC0101' = 6 bytes)
// Returns decoded Ascii text
var
  Pdu: AnsiString;
  NumSeptets: Byte;
  Septets: AnsiString;
  PduIdx: Integer;
  PduLen: Integer;
  by: Byte;
  currBy: Byte;
  left: Byte;
  mask: Byte;
  nextBy: Byte;
  Octet: Byte;
  NextOctet: Byte;
  PaddingBits: Byte;
  ShiftedOctet: Byte;
  i: Integer;
begin
  Result := '';
  PaddingBits := 0;
  // convert hex string to bytes
  Pdu := AnsiString(HexToStr(APduData));
  PduLen := Length(Pdu);
  // The following code removes padding at the end of the PDU by shifting it
  // *right* by <PaddingBits>. It does this by taking the least significant
  // <PaddingBits> from the following PDU byte and moving them to the most
  // significant the current PDU byte.
  if (AUdhLen > 0) then
  begin
    PaddingBits := 7 - ((AUdhLen * 8) mod 7);
    for PduIdx := 1 to PduLen do
    begin
      Octet := Byte(Pdu[PduIdx]);
      if (PduIdx = PduLen) then
        ShiftedOctet := Byte(Octet shr PaddingBits)
      else
      begin
        NextOctet := Byte(Pdu[PduIdx + 1]);
        ShiftedOctet := Byte(Octet shr PaddingBits) or
          Byte(NextOctet shl (8 - PaddingBits));
      end;
      Byte(Pdu[PduIdx]) := ShiftedOctet;
    end;
  end;
  // decode
  // number of septets in PDU after excluding the padding bits
  NumSeptets := ((PduLen * 8) - PaddingBits) div 7;
  Septets := AnsiString(StringOfChar(#0, NumSeptets));
  left := 7;
  mask := $7F;
  nextBy := 0;
  PduIdx := 1;
  for i := 1 to NumSeptets do
  begin
    if mask = 0 then
    begin
      Septets[i] := AnsiChar(nextBy);
      left := 7;
      mask := $7F;
      nextBy := 0;
    end
    else
    begin
      if (PduIdx > PduLen) then
        Break;
      by := Byte(Pdu[PduIdx]);
      Inc(PduIdx);
      currBy := ((by AND mask) SHL (7 - left)) OR nextBy;
      nextBy := (by AND (NOT mask)) SHR left;
      Septets[i] := AnsiChar(currBy);
      mask := mask SHR 1;
      left := left - 1;
    end;
  end; // for
  // remove last character if unused
  // this is kind of a hack, but frankly I don't know how else to compensate
  // for it.
  if (Septets[NumSeptets] = #0) then
    SetLength(Septets, NumSeptets - 1);
  // convert 7-bit alphabet to ascii
  Result := Convert7BitToAscii(Septets);
end;

initialization
  InitializeTables;
end. 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-15T08:36:04.623

不，您在编码时不包括 UDH 部分，但是如果您阅读了第 57 页的[GSM 第 2 阶段规范](http://www.etsi.org/deliver/etsi_gts/03/0340/05.03.00_60/gsmts_0340v050300p.pdf)，他们提到了这个事实：“如果使用 7 位数据并且 TP-UD-Header 没有在 septet 上完成边界然后填充位被插入到最后一个信息元素数据八位字节之后，以便整个 TP-UD 报头有整数个七位字节”。当您包含 UDH 部分时，情况并非如此，因此您需要做的就是计算偏移量（= 填充位数）

计算偏移量，此代码假定 UDHPart 是 AnsiString：

```
Len := Length(UDHPart) shr 1;
Offset := 7 - ((Len * 8) mod 7);  // fill bits 
```

现在在对 7 位数据进行编码时，您可以正常进行，但最后，您将数据偏移位向左移动，此代码在变量结果（ansistring）中包含编码数据：

```
 // fill bits
 if Offset > 0 then
  begin
   v := Result;
   Len := Length(v);
   BytesRemain := ceil(((Len * 7)+Offset) / 8);       
   Result := StringOfChar(#0, BytesRemain);
   for InPos := 1 to BytesRemain do
    begin
     if InPos = 1 then
      Byte(Result[InPos]) := Byte(v[InPos]) shl offset
     else
      Byte(Result[InPos]) := (Byte(v[InPos]) shl offset) or (Byte(v[InPos-1]) shr (8 - offset));
    end;
  end; 
```

解码实际上是一回事，您首先在解码之前将 7 位数据偏移位向右移动...

我希望这会让你走上正确的轨道......

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-12-24T04:31:55.147

在您的情况下，数据是 D06536FB0DBABFE56C32

获取第一个字符是 D0 => h（前 7 位，第 8 位不使用）

其余为 6536FB0DBABFE56C32

在斌

(01100101)0011011011111011000011011011101010111111111001010110110000110010

从右向左移动。=> 每个右 7 位是一个字符！

001100100110110011100101101111111011101000001101111 1101100 110110(0 1100101)

我向左移动 7。你可以从上面得到字符串。但我这样做是为了方便展示：D

(1100101)(1101100)(1101100)(1101111)(0100000)(1110111)(1101111)(1110010)(1101100)(1100100)00

字符串是“hello world”

结合第一个字符你得到“你好世界”

# algorithm - 计算二进制字符串

> ID：11489027
> 
> 赞同：1
> 
> 时间：2012-07-15T02:55:09.057
> 
> 标签：algorithm

这是参考[这个](http://www.spoj.pl/problems/STRCOUNT/)问题。我们需要计算 f(n , k)，它是长度为 n 的二进制字符串的数量，其中最长的子串的长度为 k。我在提出递归时遇到了麻烦。

第 i 个数字是 0 的情况，我想我可以处理。具体来说，当我认为第 i 个数字是 1 时，我无法将解决方案扩展到子问题 f(i-1 , j) 。我如何将两者拼接在一起？

对不起，如果我有点不清楚。任何指针都会有很大帮助。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T04:29:25.160

如果您扩展状态空间，我认为您可以使用动态编程的变体来构建表格。假设您计算 f(n,k,e) 定义为长度为 n 的不同二进制字符串的数量，其中最长为 1s 的子串最多为 k 并且以 e 连续 1s 结尾。如果您已经计算了与给定 n 关联的 k 和 e 的所有可能值的 f(n,k,e)，那么，因为您将这些值除以 e，您可以计算 f(n+1,k,e ) 对于 k 和 e 的所有可能值 - 当你用 0 或 1 扩展一个 n 长字符串时，它会发生什么取决于它现在以多少个 1 结尾，你知道这是因为 e。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-15T05:53:20.840

设 s 为长度为*k*的模式的起始索引。那么 s 在：1 到 nk。

对于每个 s，我们将 Sting S 分成三个字符串：

```
PRE(s,k,n) = S[1:s-1] 
POST(s,k,n)=S[s+k-1:n] 
ONE(s,k,n) which has all 1s from S[s] to S[s+k-1] 
```

PRE 和 POST 的最长子串 1 应该小于 k。

让

```
x = s-1 
y = n-(s+k)-1 
```

让 NS(p,k) 是您可以拥有大于等于 k ​​的最长子串的方式总数。

```
NS(p,k) = sum{f(p,k), f(p,k+1),... f(p,p)} 
```

终止条件：

```
NS(p,k) = 1 if p==k, 0 if k>p
f(n,k) = 1 if n==k, 0, if k > n. 
```

对于长度为 n 的字符串，1s 的最长子串的大小小于 k = 2^n - NS(n,k) 的排列数。

```
f(n,k) = Sum over all s=1 to n-k 
         {2^x - NS(x,k)}*{2^y - NS(y,k)} 
```

即其中最长子串小于大小k的每个前子串和后子串的排列数的乘积。

所以我们有一个重复的子问题，以及一大堆可以 DPed 的重用

**稍后补充：** 根据下面的评论，我想我们真的不需要进入 NS。我们可以将 S(p,k) 定义为

```
S(p,k) = sum{f(p,1), f(p,2),... f(p,k-1)} 
```

和

```
f(n,k) = Sum over all s=1 to n-k 
         S(x,k)*S(y,k) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-07-17T19:22:18.850

我知道这是一个相当古老的问题，如果有人想要我可以澄清我的小答案..

这是我的代码

```
#include<bits/stdc++.h>
using namespace std;
long long DP[64][64];
int main()
{
    ios::sync_with_stdio(0);
    cin.tie(0);
    int i,j,k;
    DP[1][0]=1;
    DP[1][1]=1;
    DP[0][0]=1;
    cout<<"1 1\n";
    for(i=2;i<=63;i++,cout<<"\n")
        {
            DP[i][0]=1;
            DP[i][i]=1;
            cout<<"1 ";
            for(j=1;j<i;j++)
            {
                for(k=0;k<=j;k++)
                    DP[i][j]+=DP[i-k-1][j]+DP[i-j-1][k];
                DP[i][j]-=DP[i-j-1][j];
                cout<<DP[i][j]<<" ";
            }
            cout<<"1 ";
        }
    return 0;
} 
```

DP[i][j] 表示 F(i,j) 。

**过渡/复发（很难想象）：**

考虑 F(i,j)：

1）我可以将 k 1s 放在右边，并使用 0 即 String + 0 + k times '1' 将它们分开。F(ik-1,j) 注意：k=0 表示我只在右边保留 0！

2）我错过了右侧 j+1 位置填充 0 和 j '1' 的方式，并且所有左侧都没有形成任何长度为 j 的连续字符串！F(ij-1,k) （注意我使用 k 来表示两者只是因为我在我的代码中这样做了，你也可以定义其他变量！）

# iphone - 我有一个我需要访问的按钮所在的单元格...我如何访问它？

> ID：11489031
> 
> 赞同：0
> 
> 时间：2012-07-15T02:56:15.720
> 
> 标签：iphone, ios, xcode

> **可能重复：**
> [如何访问访问功能中的多个按钮？](https://stackoverflow.com/questions/11488765/how-to-access-multiple-buttons-in-access-function)

我在 TabelView 的同一单元格中有两个不同的按钮（每行有 10 行，每行有 2 个按钮）都设置为 20% 的不透明度。一个称为“button1”，另一个称为“button2”。单击“button1”时，我运行“button1clicked”操作。在“button1clicked”中，我将 button1 的不透明度设置为 50%。我需要将 button2 的不透明度设置为 100%。

所以我需要以某种方式能够在与 button1 相同的单元格中获得对 button2 的引用。我可以通过以下方式获得对单元格的引用

> UITableViewCell *clickedCell = (UITableViewCell *)[sender superview];

我该如何使用这个或任何其他方式，以便我可以通过类似的方式设置“button2”的不透明度

> [“以某种方式引用 button2” setAlpha:.5];

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T03:01:12.847

您的问题是您似乎通过使代码过于复杂而违反了 MVC。在 UITableViewCell 子类中，创建这些按钮属性（如果它们还没有），并在同一个 Table Cell 类中实现设置其不透明度的操作，无需其他任何东西。如果您需要与其他对象交互，请将它们设置为单元格的代表。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-15T03:58:50.490

我喜欢子类解决方案，但另一个传统解决方案是为`tag`添加到单元格的两个按钮设置属性，然后您可以稍后通过`viewWithTag`方法检索它们。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-15T03:23:15.903

我宁愿创建一个 UIView 的子类作为表格视图单元格的内容视图。然后你可以处理 UIView 内部的不透明度变化。

# android - 如何让 Android Amazon Web Services (AWS) SDK 与 AWS 模拟（例如 FakeS3）一起工作

> ID：11489034
> 
> 赞同：2
> 
> 时间：2012-07-15T02:56:45.113
> 
> 标签：android, amazon-s3, amazon-web-services, cloud

我想在转移到真正的 Amazon S3 服务器之前使用本地 AWS 模拟包（例如 FakeS3）测试我的 Android 应用程序。

您需要在 AWS 开发工具包 (aws-android-sdk) 包中更改/配置哪些内容才能使其与 FakeS3 一起使用？

有没有人已经这样做并让它工作了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T04:13:35.040

就像`FakeS3`简单地模拟 S3 服务一样，您应该能够创建一个 S3 客户端并在客户端上设置端点以使用运行 FakeS3 的服务器。您可以在此处参考客户端文档：

[来源链接](http://docs.amazonwebservices.com/AWSAndroidSDK/latest/javadoc/com/amazonaws/services/s3/AmazonS3.html#setEndpoint%28java.lang.String%29)

# jquery - 使用 jquery 添加和删除属性

> ID：11489037
> 
> 赞同：51
> 
> 时间：2012-07-15T02:57:35.313
> 
> 标签：jquery, attributes

这是我的按钮：

```
<button id="add">Add</button>
<button id="remove">Remove</button> 
```

这是我的 JavaScript 代码：

```
<script type="text/javascript">
    $(document).ready(function(){   
        /*** Add attribute ***/
        $("#add").click(function(){
            $("#page_navigation1").attr("id","page_navigation1");
        });     
        /*** Remove attribute ***/
        $("#remove").click(function(){
            $("#page_navigation1").removeAttr("id");
        });     
    });
</script> 
```

这是我的html代码：

```
<div id="page_navigation1">next</div> 
```

我的问题是，当我单击“删除”按钮时，一切都很好，ID 将被删除，但是在单击“删除”按钮后，当我单击“添加”按钮时，代码不起作用并且没有任何反应！

我需要使用此代码添加和删除 ID，但我只能删除 ID，我无法添加 ID。我需要一些帮助，还有一件事，

当按钮处于活动状态时，如何为按钮添加 CSS 样式？像这样，当我单击删除按钮时，我想将按钮背景更改为红色。当按钮处于活动状态时，我需要添加 css 类以添加和删除！我不知道怎么做！

* * *

## 回答 #1

> 赞同：85
> 
> 时间：2012-07-15T03:00:34.213

这是因为您已经删除了`id`查找元素的方式。这行代码试图添加`id="page_navigation1"`到具有`id`named的元素`page_navigation1`，但它不存在（因为您删除了该属性）：

```
$("#page_navigation1").attr("id","page_navigation1"); 
```

**演示：** [[[[![jsFiddle](../Images/827f57786617d886d70c0bce0ccca6b6.png)](http://jsfiddle.net/ThinkingStiff/7w5Xv/)]]]

如果要添加和删除使您的`<div>`红色使用的类：

```
$( '#page_navigation1' ).addClass( 'red-class' ); 
```

和：

```
$( '#page_navigation1' ).removeClass( 'red-class' ); 
```

在哪里`red-class`：

```
.red-class {
    background-color: red;
} 
```

* * *

## 回答 #2

> 赞同：29
> 
> 时间：2012-07-15T03:00:59.707

删除 ID“page_navigation”后，该元素不再*具有*ID，因此当您再次尝试访问它时将无法找到该元素。

解决方案是缓存对元素的引用：

```
$(document).ready(function(){
    // This reference remains available to the following functions
    // even when the ID is removed.
    var page_navigation = $("#page_navigation1");

    $("#add").click(function(){
        page_navigation.attr("id","page_navigation1");
    });     

    $("#remove").click(function(){
        page_navigation.removeAttr("id");
    });     
}); 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2014-06-05T17:06:47.477

首先你添加一个类然后删除 id

```
<script type="text/javascript">
$(document).ready(function(){   
 $("#page_navigation1").addClass("page_navigation");        

 $("#add").click(function(){
        $(".page_navigation").attr("id","page_navigation1");
    });     
    $("#remove").click(function(){
        $(".page_navigation").removeAttr("id");
    });     
  });
</script> 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-07-15T03:01:32.453

如果你想这样做，你需要先将它保存在一个变量中。所以你不需要每次都使用 id 来查询这个元素。

```
var el = $("#page_navigation1");

$("#add").click(function(){
  el.attr("id","page_navigation1");
});     

$("#remove").click(function(){
  el.removeAttr("id");
}); 
```

# shell - 找到域名并替换它 - Shell Script

> ID：11489041
> 
> 赞同：2
> 
> 时间：2012-07-15T02:59:05.430
> 
> 标签：shell

我已将网站移至另一个子域，并且某些硬编码链接导致问题。

原始网站

```
<pre>
www.example.com
</pre> 
```

新网站

```
<pre>
subdomain.example.com
</pre> 
```

文件中的一些 php 代码位于 www 目录中，其中包含 www.example.com。如何在 *.php 页面中找到“www.example.com”并将其替换为“subdomain.example.com”。递归目录中也有，所以我想更改它们。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-15T03:42:20.067

您可以通过命令行轻松地做到这一点

```
find /path/to/files -name '*.php' | xargs sed -i -e s/www.example.com/subdomain.example.com/g 
```

您可以通过发送额外的参数来调整文件集，`find`您可以通过调整给定的表达式来进行更复杂的替换`sed`（例如，确保匹配的模式是一个完整的单词）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-15T03:30:55.637

这个 Python 脚本*应该*可以解决问题[http://pastebin.com/fn8kDmHz](http://pastebin.com/fn8kDmHz)

# networking - 以编程方式更改 DSL 连接的 IP 地址

> ID：11489044
> 
> 赞同：-1
> 
> 时间：2012-07-15T02:59:58.557
> 
> 标签：networking

我正在为我的公司做一个项目。我正在使用 DSL 连接。每次重新启动路由器时，我的 IP 地址都会更改。是否有更快的方式以编程方式从我的 ISP 请求新 IP？我已经看到 RDSL 服务可以在几秒钟内更改 IP，但我正在寻找一种比 RDSL 更“合法”的方式来做到这一点。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-15T13:04:03.177

Does your router have firmware you can browse to? There may be a link to reboot your router (or even release/renew your IP lease) there. You can set up a cron job to call cURL to access that URL every so often. You might also have to authenticate in order to do that, but cURL should handle that.

If you're on a system that does not have cURL or cron, you may have equivalents, but they're pretty simple programs and you should be able to find them for any popular OS.

# mysql - 为什么这个额外的 WHERE 子句没有返回我所期望的？

> ID：11489045
> 
> 赞同：0
> 
> 时间：2012-07-15T03:00:09.723
> 
> 标签：mysql, group-by, inner-join

我有 2 个数据库表，一个是一个仅包含未来日期的日历，另一个是具有数量、日期和产品 ID 的库存分配。

大局是我需要一个表格，其中显示日期列表，其中任何库存分配数量在每个日期旁边分组为单个总数。

这是仅包含 7 月日期的日历：

```
CREATE TABLE `calendar` (
    `datefield` date DEFAULT NULL
) ENGINE=InnoDB DEFAULT CHARSET=utf8; 

LOCK TABLES `calendar` WRITE; 

INSERT INTO `calendar` (`datefield`) VALUES 
('2012-07-01'),('2012-07-02'),('2012-07-03'),('2012-07-04'),('2012-07-05'),
('2012-07-06'),('2012-07-07'),('2012-07-08'),('2012-07-09'),('2012-07-10'),
('2012-07-11'),('2012-07-12'),('2012-07-13'),('2012-07-14'),('2012-07-15'),
('2012-07-16'),('2012-07-17'),('2012-07-18'),('2012-07-19'),('2012-07-20'), 
('2012-07-21'),('2012-07-22'),('2012-07-23'),('2012-07-24'),('2012-07-25'),
('2012-07-26'),('2012-07-27'),('2012-07-28'),('2012-07-29'),('2012-07-30'),
('2012-07-31'); 

UNLOCK TABLES; 
```

这是库存分配表：

```
CREATE TABLE `stock_allocation` ( 
    `ID` int(11) NOT NULL AUTO_INCREMENT, 
    `product_ID` int(11) NOT NULL,
    `date` date NOT NULL,
    `quantity` int(11) NOT NULL,
    PRIMARY KEY (`ID`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8; 

LOCK TABLES `stock_allocation` WRITE; 

INSERT INTO `stock_allocation` (`ID`, `product_ID`, `date`, `quantity`) VALUES
(1,3,'2012-07-30',50),
(2,3,'2012-07-26',40),
(3,3,'2012-07-26',100), 
(4,3,'2012-07-02',200),
(5,3,'2012-07-01',134); 

UNLOCK TABLES; 
```

我运行的最接近我需要的查询是：

```
SELECT 
    calendar.datefield AS date_allocation,
    IFNULL(SUM(stock_allocation.quantity),0) AS total_allocation 
FROM 
    stock_allocation 
RIGHT JOIN 
    calendar ON DATE(stock_allocation.date) = calendar.datefield 
WHERE 
    calendar.datefield >= '2012-12-01' AND 
    calendar.datefield <='2012-12-31' 
GROUP BY 
    date_allocation 
```

所以这给出了这样的东西，这几乎是我需要的：

```
 +-----------------+------------------+
    | date_allocation | total_allocation |
    +-----------------+------------------+
    | 2012-07-01      |              134 |
    | 2012-07-02      |              200 |
    | 2012-07-03      |                0 |
    | 2012-07-04      |                0 |
    | 2012-07-05      |                0 |
    | 2012-07-06      |                0 |
    | 2012-07-07      |                0 |
     etc etc
    | 2012-07-22      |                0 |
    | 2012-07-23      |                0 |
    | 2012-07-24      |                0 |
    | 2012-07-25      |                0 |
    | 2012-07-26      |              140 |
    | 2012-07-27      |                0 |
    | 2012-07-28      |                0 |
    | 2012-07-29      |                0 |
    | 2012-07-30      |               50 |
    | 2012-07-31      |                0 |
    +-----------------+------------------+ 
```

但我想添加这个最后的 WHERE 子句来进行查询：

```
SELECT 
    calendar.datefield AS date_allocation,
    IFNULL(SUM(stock_allocation.quantity),0) AS total_allocation 
FROM 
    stock_allocation 
RIGHT JOIN 
    calendar ON DATE(stock_allocation.date) = calendar.datefield 
WHERE 
    calendar.datefield >= '2012-07-01' AND 
    calendar.datefield <='2012-07-31' AND 
    stock_allocation.product_ID = '3' 
GROUP BY 
    date_allocation 
```

但是这个输出返回：

```
 +-----------------+------------------+
    | date_allocation | total_allocation |
    +-----------------+------------------+
    | 2012-07-26      |              140 |
    | 2012-07-30      |               50 |
    +-----------------+------------------+ 
```

我希望您能理解我的需要 - 鉴于包含的示例日期，我希望这两个查询返回基本相同的内容，因为示例 stock_allocation 数据的 productID 始终为 3。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T03:17:24.763

正如其他人所说，您将希望将过滤条件更改为基于`product_id`字段而不是`ID`字段。

但是，如果您仍然希望在仅对 where 行执行求和时显示所有日历日期，则`product_id = 3`可以将 添加`AND product_id = 3`到`LEFT JOIN`子句而不是`WHERE`子句。这样，没有连接的日历行`product_id = 3`仍然保留在最终结果集中，而不是被过滤掉（WHERE 子句会这样做）：

```
SELECT 
    a.datefield AS date_allocation,
    IFNULL(SUM(b.quantity),0) AS total_allocation 
FROM
    calendar a
LEFT JOIN
    stock_allocation b 
    ON a.datefield = b.date AND
       b.product_id = 3
WHERE 
    a.datefield BETWEEN '2012-07-01' AND '2012-07-31'
GROUP BY 
    a.datefield 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-15T03:44:58.630

您的查询不返回行的原因是 WHERE 子句正在从日历中删除所有那些从 stock_allocation 中没有匹配行的行。那个 WHERE 子句打败了 OUTER JOIN，使它像 INNER JOIN 一样工作。

您希望在`ON`子句中使用谓词，而不是`WHERE`子句。

这将为您提供所有日历日期以及您想要的所有零。

像这样：

```
SELECT 
    calendar.datefield AS date_allocation,
    IFNULL(SUM(stock_allocation.quantity),0) AS total_allocation 
FROM 
    stock_allocation 
RIGHT JOIN 
    calendar 
ON 
    stock_allocation.date = calendar.datefield 
    AND stock_allocation.product_ID = '3' 
WHERE 
    calendar.datefield >= '2012-07-01' AND 
    calendar.datefield <='2012-07-31' AND 
GROUP BY 
    date_allocation 
```

注意：您不需要在列周围使用 DATE() 函数，该`stock_allocation.date`列的数据类型已经是 DATE。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-15T03:06:09.367

更改`AND stock_allocation.ID`为`AND stock_allocation.product_ID`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-15T03:09:32.397

不应该是`stock_allocation.product_ID = '3'`代替`stock_allocation.ID = '3'`。stock_allocation.ID 将始终是唯一的，您将只有 1 个值为“3”的条目

# java - java日历比较不正确

> ID：11489046
> 
> 赞同：-1
> 
> 时间：2012-07-15T03:00:14.727
> 
> 标签：java, calendar, comparison

我正在比较 java 中的 2 个日历对象。这是我设置它们的方式

```
Calendar calendar1 = Calendar.getInstance();
calendar1.set(2012, 6, 17, 13, 0); 
```

我从表列“2012-07-17 13:00:00”中获取以下值并将其设置为 Date Java 对象，然后我使用此 Date 对象设置第二个 Calander 对象。

```
Calendar calendar2 = Calendar.getInstance();
calendar2.setTime(/*Above date object who value is '2012-07-17 13:00:00'*/); 
```

现在，当我比较时，我希望这是真的，因为两个 Calender 对象是相同的

```
calendar2.compareTo(calendar1) >= 0 
```

但相反，我看到这正在成为现实

```
calendar2.compareTo(calendar1) < 0 
```

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T03:54:03.753

下面将让您了解正在发生的事情（假设您正在解析字符串以生成日期对象`calendar1`）：

```
Calendar calendar1 = Calendar.getInstance();
calendar1.set(2012, 6, 17, 13, 0);
System.out.println(calendar1.getTime());
Date date = new SimpleDateFormat("yyyy-MM-dd HH:mm:ss").parse("2012-07-17 13:00:00");
System.out.println(date);
Calendar calendar2 = Calendar.getInstance();
calendar2.setTime(date);
System.out.println(calendar2.compareTo(calendar1));
calendar1.set(Calendar.SECOND, 0); //setting second to 0
calendar1.set(Calendar.MILLISECOND, 0); //setting millisecond to 0
System.out.println(calendar2.compareTo(calendar1)); 
```

**试运行结果：**

```
2012 年 7 月 17 日星期二 13:00:47 CDT
2012 年 7 月 17 日星期二 13:00:00 CDT
-1
0

```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-15T04:07:07.897

在@Bhesh Gurung 的建议下，我使用了以下内容

calendar1.set(Calendar.MILLISECOND, 0); calendar1.set(Calendar.SECOND, 0);

calendar2.set(Calendar.MILLISECOND, 0); calendar2.set(Calendar.SECOND, 0);

它奏效了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-04-23T05:38:32.270

# javascript - 如何使文本字段中的文本光标从几 px 开始？

> ID：11489049
> 
> 赞同：8
> 
> 时间：2012-07-15T03:00:56.307
> 
> 标签：javascript, css, resize, textfield, text-cursor

我想要一个文本字段，它的光标从左侧开始几个 px（比如可能是 4）。我知道如果您使用填充来调整文本字段的大小可以做到这一点，但我想知道是否有任何方法可以不使用填充来调整文本框的大小，而是使用高度和宽度 CSS。

一个想法或输入将不胜感激。

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-07-15T03:03:11.130

使用[`text-indent`](https://developer.mozilla.org/en/CSS/text-indent)属性：

```
input {
  text-indent:20px;
} 
```

您还可以使用固定宽度的填充。这将保持宽度固定，`100px`但仍会进行填充。

```
input {
  padding-left: 10px;
  width: 100px;
} 
```

# c - C中的浮点数

> ID：11489052
> 
> 赞同：1
> 
> 时间：2012-07-15T03:01:25.277
> 
> 标签：c, floating-point, floating-point-conversion

我正在使用以下代码将用户输入的任何数字除以 1 时最多输出 5 个十进制字符，我必须使用`(float)`.

谁能告诉我如何在不进行类型转换或使用浮点常量的情况下做到这一点？

```
int main() {
    int n;
    scanf("%d",&n);
    printf("%.5 ", 1/(float)n);
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-15T03:10:18.877

您可以[使用仅使用整数的这段代码](http://ideone.com/QYXRT)：

```
 printf(n==1?"1.00000":"0.%05d ", 100000/n); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-15T03:09:44.863

从字面上看你的问题，你可以这样做：

```
int main() {
    float n;
    scanf("%f",&n);
    printf("%.5f", 1/n);
    return 0;
} 
```

在这段代码中，没有浮点文字，也没有强制转换`(float)`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-22T00:39:44.287

从技术上讲，应该这样做：

`printf("%.5f ", 1/pow(n,1));`

# sql - SQLite ORDER BY 字符串包含以 0 开头的数字

> ID：11489055
> 
> 赞同：38
> 
> 时间：2012-07-15T03:01:51.490
> 
> 标签：sql, string, sqlite, sql-order-by, numeric

如标题所述：

我有一个选择查询，我试图“排序”一个包含数字的字段，问题是这个数字实际上是从 0 开始的字符串，所以“排序依据”正在这样做......

```
...
10
11
12
01
02
03
... 
```

有什么想法吗？

编辑：如果我这样做：“... ORDER BY (field+1)”我可以解决这个问题，因为字符串在内部被转换为整数。这是一种像 C 的 atoi 一样“正式”转换它的方法吗？

* * *

## 回答 #1

> 赞同：73
> 
> 时间：2012-07-15T03:12:50.630

您可以使用`CAST` [http://www.sqlite.org/lang_expr.html#castexpr](http://www.sqlite.org/lang_expr.html#castexpr)将表达式转换为整数。

```
sqlite> CREATE TABLE T (value VARCHAR(2));
sqlite> INSERT INTO T (value) VALUES ('10');
sqlite> INSERT INTO T (value) VALUES ('11');
sqlite> INSERT INTO T (value) VALUES ('12');    
sqlite> INSERT INTO T (value) VALUES ('01');
sqlite> INSERT INTO T (value) VALUES ('02');
sqlite> INSERT INTO T (value) VALUES ('03');
sqlite> SELECT * FROM T ORDER BY CAST(value AS INTEGER);
01
02
03
10
11
12
sqlite> 
```

> 如果我这样做： "...ORDER BY (field+1)" 我可以解决这个问题，因为字符串在内部被转换为整数。是一种像 C 的 atoi 一样“正式”转换它的方法吗？

嗯，这很有趣，虽然我不知道有多少`DBMS`支持这样的操作，所以我不推荐它，以防万一你需要使用不支持它的不同系统，更不用说你正在添加一个额外的操作，这可能会影响性能，尽管您也这样做`ORDER BY (field + 0)`我要调查性能

取自 sqlite3 文档：

> **CAST 表达式用于将值转换为不同的存储类，其方式与将列关联**应用于值时发生的转换类似。CAST 表达式的应用与列亲和性的应用不同，因为使用 CAST 表达式，即使存储类转换是有损且不可逆的，它也是强制转换的。
> 
> 4.0 运算符
> 所有数学运算符（+、-、*、/、%、<<、>>、& 和 |）在执行之前将两个操作数转换为 NUMERIC 存储类。即使演员表有损且不可逆转，演员表也会进行。数学运算符上的 NULL 操作数产生 NULL 结果。数学运算符上的操作数不以任何方式显示为数字且不为 NULL，将转换为 0 或 0.0。

我是古玩，所以我运行了一些基准测试：

```
>>> setup = """
... import sqlite3
... import timeit
... 
... conn = sqlite3.connect(':memory:')
... c = conn.cursor()
... c.execute('CREATE TABLE T (value int)')
... for index in range(4000000, 0, -1):
...     _ = c.execute('INSERT INTO T (value) VALUES (%i)' % index)
... conn.commit()
... """
>>> 
>>> cast_conv = "result = c.execute('SELECT * FROM T ORDER BY CAST(value AS INTEGER)')"
>>> cast_affinity = "result = c.execute('SELECT * FROM T ORDER BY (value + 0)')"
>>> timeit.Timer(cast_conv, setup).timeit(number = 1)
18.145697116851807
>>> timeit.Timer(cast_affinity, setup).timeit(number = 1)
18.259973049163818
>>> 
```

我们可以看到它有点慢，虽然不是很多，但很有趣。

* * *

## 回答 #2

> 赞同：33
> 
> 时间：2012-07-15T03:12:21.013

你可以使用`CAST`：

```
ORDER BY CAST(columnname AS INTEGER) 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-01-12T16:15:34.623

在带有光标加载器的 ListView 中！

```
String projection= some string column;
String selection= need to select;

String sort="CAST ("+ YOUR_COLUMN_NAME + " AS INTEGER)";

CursorLoader(getActivity(), Table.CONTENT_URI, projection, selection, selectionArgs, sort); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-10-30T20:50:32.700

感谢[Skinnynerd](https://stackoverflow.com/a/11489095/8313609)。在 Kotlin 中，CAST 的工作方式如下：CAST 解决了 9 优先于 10 或 22 优先于 206 的问题。

定义全局变量以便稍后根据需要进行更改，然后将其插入查询中：

```
var SortOrder:String?=null 
```

更改订单使用：

对于后代：

```
 SortOrder = "CAST(MyNumber AS INTEGER)" + " DESC" 
```

（从最高到最低）

对于上升：

```
 SortOrder =  "CAST(MyNumber AS INTEGER)" + " ASC" 
```

（从最低到最高）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-10-09T11:54:35.160

在 SQL SERVER 中使用按列值数字格式排序的 CONVERT CAST 函数

SELECT * FROM Table_Name ORDER BY CAST(COLUMNNAME AS INT);

# git - 在 cloud9 上，如何将一个配置推送到 nodester，另一个推送到 github

> ID：11489065
> 
> 赞同：0
> 
> 时间：2012-07-15T03:03:35.153
> 
> 标签：git, github, cloud9-ide, nodester

好的，所以想通过 c9 开始一个小 oss 项目。我想发布一个配置（nodester 私有，包含例如 mongolab 凭据）。我宁愿在转到 github 的示例配置中没有这些信息......其他人如何处理这个？

另外，这可以在免费的 c9 帐户上实现吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T05:20:11.713

我想建议你阅读这篇[文章](https://github.com/nodester/nodester/wiki/How-to-deploy-to-Nodester-from-Cloud9-IDE)，它告诉你如何从 c9 部署。此外，您可以通过我们的[API Explorer](http://nodester.com/api#explorer)或 curl 添加环境变量：

`curl -X PUT -u "testuser:123" -d "appname=a&key=color&value=blue" http://api.nodester.com/env`

所以例如你想要 MONGO_URL，你可以这样做：

（这是一个单行命令）

`$ curl -XPUT -u "username:password" -d "appname=myappname&key=MONGO_URL&value=http://link.to/mongo/db" http://api.nodester.com/env`

然后在您的应用程序中：

`var mongo = require('mongodriver');`

`var db = mongo.connect(MONGO_URL);`

希望这有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T19:51:45.187

在 cloud9 中，我建议使用命令行参数（在运行面板中）来设置敏感的配置数据。除非您授予某人写入权限，否则这些对外界是不可见的。

您可以根据环境变量的存在`C9_PROJECT`来确定您在 Cloud9 中。

# .net - 使用 IoC 容器时在哪里注册组件？

> ID：11489068
> 
> 赞同：0
> 
> 时间：2012-07-15T03:05:08.260
> 
> 标签：.net, dependency-injection, inversion-of-control, autofac

我正在尝试起床并使用 Autofac，但无法弄清楚一些事情。假设我有一个包含几个项目的 [winforms] 解决方案：MyProject.GUI、MyProject.Model、MyProject.DataAccess。放置所有 builder.Register 代码的推荐位置在哪里？假设我没有使用 XML（这可能是一个错误，如果是，请纠正我）它需要了解所有程序集，以便引用每个程序集中的服务和组件。我应该把它全部放在启动项目 MyPProject.GUI 中吗？这会起作用，但现在这个项目将“了解”所有其他项目。也许这并不像我乍一看那样糟糕。也许我在想这个。

我会很感激任何想法。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T03:24:07.393

您可以使用[模块](http://code.google.com/p/autofac/wiki/StructuringWithModules)功能将模块放置在每个项目中，每个模块都可以在该项目中注册依赖项。然后您可以在启动项目中注册这些模块。

启动项目将引用所有其他项目，但不需要了解这些项目的内部情况。

# javascript - javascript null比较在chrome和firefox上不同

> ID：11489069
> 
> 赞同：0
> 
> 时间：2012-07-15T03:05:27.407
> 
> 标签：javascript, session-storage

我有以下代码：

```
var a=sessionStorage.getItem("Token");  
alert(a==null); 
```

返回值是`null`（如果我`alert(a)`显示`null`）。问题是`alert(a==null)`在 Firefox 上显示为 TRUE，在 safari 和 chrome 上显示为 FALSE。什么？我已经尝试`a===null`过相同的结果以及！a。

我做错了什么或我不知道什么？

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-15T05:47:26.350

您在评论中说：*“我将 Token 设置为* `sessionStorage.setItem("Token",null);`”

我认为问题在于您应该使用会话存储来存储字符串。当您传递`null`给`setItem()`它时，它会将其转换为 string `"null"`。然后，当您检索它时，`getItem()`您会得到这个字符串`"null"`，它当然不等于实际`null`值。

你可以在这里看到这种行为：http: [//jsfiddle.net/CWVww/1/](http://jsfiddle.net/CWVww/1/)

如果要删除以前设置的项目，请执行以下操作：

```
sessionStorage.removeItem("Token"); 
```

...*然后*调用 to`.getItem("Token")`将返回`null`.

我不知道为什么 Firefox 的行为不同。来自[会话存储的 MDN 页面](https://developer.mozilla.org/en/DOM/Storage)：*“请记住，您存储在此页面中描述的任何存储中的所有内容在存储之前都会使用其 .toString 方法转换为字符串。”*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-15T03:16:45.320

您的代码与我完美配合（在 Chrome 上测试）。但是，我建议您使用`!`运算符并检查当前值的类型：

```
var a = sessionStorage.getItem("Token");
if(!a && typeof a!=='string'){        //a doesn't exist
    //Do something
}else{        //a does exist
    //Do something
} 
```

运算符`!`将返回`true`when `a`is`null`或`undefined`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-15T03:15:45.067

你可以试试`String(a) == "null"`。但是，如果`Token`项目的值设置为`"null"`（字符串`"null"`），则代码将无法按预期工作，因此我们必须添加另一个条件：

```
var a = sessionStorage.getItem("Token");
if(String(a)==="null" && typeof a!=="string"){        //a doesn't exist
    //Do something
}else{        //a does exist
    //Do something
} 
```

这样，当 is 的“字符串化”值且 var 的类型不是时，条件`a`将返回`"null"`true`a``string`

# c# - 如何使用回车键将数据从文本框传输到标签

> ID：11489070
> 
> 赞同：1
> 
> 时间：2012-07-15T03:05:28.133
> 
> 标签：c#, textbox, label

我对一个小项目有一个快速而简单的问题，我自己在 C# 中开始使用 Visual Studio 2010 的 Windows 窗体程序。我似乎找不到正确的代码来传输用户的输入数据使用一种方法进入一个文本框，在该方法中他们按下回车键，它会自动在同一表单上的该标签中输入一条消息。

例如在以下代码中（已根据提供的建议进行了编辑）：

```
 namespace MovieFinders2
    {
        public partial class Form1 : Form
        {
            public Form1()
            {
                InitializeComponent();
            }

            private void label1_Click(object sender, EventArgs e)
            {
                //Named "Enter a Year"
            }

            private void textBox1_TextChanged(object sender, EventArgs e)
            {

            }

            void textBox1_KeyDown(object sender, KeyEventArgs e)
            {
                if (e.KeyCode == Keys.Enter || e.KeyCode == Keys.Return)
                {
                    label2.Text = textBox1.Text;
                    label2.Text = "Movies released before " + textBox1.Text;
                }
            } 

            private void listBox1_SelectedIndexChanged(object sender, EventArgs e)
            {

            }

            private void label2_Click(object sender, EventArgs e)
            {
                label2.Text = textBox1.Text;
                label2.Text = "Movies released before " + textBox1.Text;
            }

            private void listBox2_SelectedIndexChanged(object sender, EventArgs e)
            {

            }

            private void label3_Click(object sender, EventArgs e)
            {
                label3.Text = textBox1.Text;
                label3.Text = "Movies released in or after " + textBox1.Text;
            }
        }
    }

            private void label3_Click(object sender, EventArgs e)
            {
                label3.Text = textBox1.Text;
                label3.Text = "Movies released in or after " + textBox1.Text;
            }
        }
    } 
```

我知道这个计划还处于早期阶段，但我正试图一步一步地迈出这一步，这是我在这一点上遇到的路障；所以任何和所有的帮助都将不胜感激。现在当我在标签上单击鼠标时，它会在该标签中显示消息。当用户按下回车键时，我需要它出现在标签中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T03:30:47.293

试试这个：

```
void textBox1_KeyDown(object sender, KeyEventArgs e) {
    if (e.KeyCode == Keys.Enter || e.KeyCode == Keys.Return) {
        label2.Text = textBox1.Text;
        label2.Text = "Movies released before " + textBox1.Text;
    }
} 
```

TextBox.KeyDown 事件

# .net - 匹配 2 个表 - 然后插入或修改到新表

> ID：11489071
> 
> 赞同：0
> 
> 时间：2012-07-15T03:05:54.593
> 
> 标签：.net, sql-server-2008, comparison

我试图在两个表中找到匹配项。首先我将比较电话号码，然后是姓氏等。我将在新表中插入匹配项。

我的问题首先是如果我直接在 SQLServer 或我的 .net 程序中执行它会更快更好吗？

如果 SQL 更好，我需要一些帮助；

我想检查匹配表中是否存在该记录，如果存在，则只应修改此记录以指定存在其他匹配项。

我可以为每种类型的匹配做一个单独的插入和修改查询。我只是想知道是否有更好的方法。

我尝试了合并，它可以插入，但是在修改时它给了我一个错误，请参见下文。

```
MERGE Matches AS M
USING (SELECT DOE.REG, sl.id FROM DOE INNER JOIN SL ON DOE.TEL = sl.phone) AS DOE
On M.doeid = DOE.reg
WHEN MATCHED THEN 
UPDATE SET m.Phonematch = 1, datemodified = getdate()
WHEN NOT MATCHED THEN
INSERT(DoeID, SatmarID, PhoneMatch , Verified, DateCreated)
VALUES(DOE.REG, id, 1, (SELECT ID FROM MatchStatus where Status = 'Not Verified'), GETDATE()); 
```

错误：

```
Msg 8672, Level 16, State 1, Line 1
The MERGE statement attempted to UPDATE or DELETE the same row more than once. This happens when a target row matches more than one source row. A MERGE statement cannot UPDATE/DELETE the same row of the target table multiple times. Refine the ON clause to ensure a target row matches at most one source row, or use the GROUP BY clause to group the source rows. 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-15T06:57:47.560

您正在寻找**[合并](http://msdn.microsoft.com/en-us/library/bb522522%28v=sql.105%29.aspx)**

我将用一个例子来解释它

示例**DDL**

```
CREATE TABLE Employee
(
   EmployeeID INTEGER PRIMARY KEY,
   EmployeeName VARCHAR(15)
)

CREATE TABLE EmployeeSalary
(
    EmployeeID INTEGER ,
    EmployeeSalary INTEGER
) 
```

* * *

## 员工 DML 示例

```
INSERT INTO Employee
VALUES(1,'SMITH')
INSERT INTO Employee
VALUES(2,'ALLEN')
INSERT INTO Employee
VALUES(3,'JONES')
INSERT INTO Employee
VALUES(4,'MARTIN')
INSERT INTO Employee
VALUES(5,'JAMES') 
```

## EmployeeDetails 的示例 DML

```
INSERT INTO EmployeeSalary
VALUES(1,23000)
INSERT INTO EmployeeSalary
VALUES(2,25500)
INSERT INTO EmployeeSalary
VALUES(3,20000) 
```

* * *

## 合并查询

```
MERGE EmployeeSalary AS stm
USING (SELECT EmployeeID,EmployeeName FROM Employee) AS sd
ON stm.EmployeeID = sd.EmployeeID
WHEN MATCHED THEN UPDATE SET stm.EmployeeSalary = stm.EmployeeSalary + 12
WHEN NOT MATCHED THEN
INSERT(EmployeeID,EmployeeSalary)
VALUES(sd.EmployeeID,25000); 
```

* * *

**参考**

**[第一参考](http://msdn.microsoft.com/en-us/library/bb522522%28v=sql.105%29.aspx)**

**[第二参考](http://blog.sqlauthority.com/2008/08/28/sql-server-2008-introduction-to-merge-statement-one-statement-for-insert-update-delete/)**

**[第三参考](http://www.codeproject.com/Articles/37172/Merge-Statement-in-SQL-Server-2008)**

**[第四参考](http://weblogs.sqlteam.com/peterl/archive/2007/09/20/Example-of-MERGE-in-SQL-Server-2008.aspx)**

# java - Java 快速排序返回部分排序的列表

> ID：11489073
> 
> 赞同：-2
> 
> 时间：2012-07-15T03:06:04.700
> 
> 标签：java, sorting, quicksort

我的程序（一个使用字母频率来解密事物的解密器）有两个 ArrayList，用于跟踪字母频率。我将这些 ArrayList 配对，以便一个（输入中的字符列表）始终链接到另一个（输入中的频率列表），以便索引 i 处的字符始终对应于索引 i 处的频率在另一个。我使用快速排序算法按降序排序。这是快速排序和交换方法的代码：

```
private static void quickSort(int low, int high){

    int i = low;
    int j = high;
    long middle = freqInCiphertext.get((low+high)/2);

    while (i < j) {
        while (freqInCiphertext.get(i) > middle) {
            i++;
        } //End while
        while (freqInCiphertext.get(j) < middle) {
            j--;
        }//End while
        if (j >= i) {
            swap(i, j);
            i++;
            j--;
        } // End if
    } // End while

    if (low<j) {
        quickSort(low, j);
    } else if (i<high) {
        quickSort(i, high);
    } //end if
}//End quickSort

private static void swap(int i, int j) {
int tempInt = freqInCiphertext.get(i);
String tempString = charsInCiphertext.get(i);

freqInCiphertext.set(i, freqInCiphertext.get(j));
charsInCiphertext.set(i, charsInCiphertext.get(j));

freqInCiphertext.set(j, tempInt);
charsInCiphertext.set(j, tempString);
}// End swap 
```

但是，当我运行我的代码时，它会返回部分排序的数组列表，如下所示：

```
[ , e, t, a, o, n, i, h, r, d, l, u, s, m, z, q, x, j, v, k, p, f, w, c, b, y, g]
[64031, 25856, 19326, 17571, 16398, 14349, 14200, 12784, 11617, 9930, 8391, 5820, 12934, 5636, 173, 178, 312, 356, 1929, 2175, 3186, 4310, 5479, 4666, 3491, 4673, 5100] 
```

任何人都可以看到算法中的任何错误吗？我已经尝试了几种不同的方法（比如 >= 而不是 > 等），但没有运气。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-15T03:47:04.540

由于 j 可以 > 低于 low 并且 i 可以同时 < high，因此您不想执行“else if (i < high)”。如果这样的话，那应该是单独的：

```
if (low<j) {
    quickSort(low, j);
}

if (i<high) {
    quickSort(i, high);
} 
```

# java - 原生库如何成为 APK 文件的一部分

> ID：11489077
> 
> 赞同：2
> 
> 时间：2012-07-15T03:06:56.037
> 
> 标签：java, android, native, libraries

APK文件由Dalvik可执行文件、Resources和Native Libraries组成。Dalvik机器码是如何包含这些native library之类的抽象代码的？只有当它们是 DLL 或 LIB 等机器代码中的库时才会这样做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T03:18:28.667

本机库以 .so 文件（特别是 Linux 上典型的 ELF 动态库）的形式交付，包含在 APK（即 zip 文件）容器中。

在安装过程中，适合设备架构的库（假设 APK 中有一个匹配的库）会自动从 apk 容器复制到应用程序的私有目录中，动态链接器可以在运行时使用该目录。

# ruby - form_tag 不在 Rails 3.2 中呈现

> ID：11489078
> 
> 赞同：2
> 
> 时间：2012-07-15T03:07:02.093
> 
> 标签：ruby, ruby-on-rails-3

我正在关注[http://www.noupe.com/ajax/create-a-simple-twitter-app.html](http://www.noupe.com/ajax/create-a-simple-twitter-app.html)上的教程 我使用的是 ruby​​ 版本 1.9.3p194 ，rails 版本 3.2

当我创建视图文件 index.html.erb ，并将内容作为

```
<b><%= render :partial => "message_form" %></b> 
<%= render :partial => @posts %> 
```

然后以 partial , _message_form.html.erb 的形式

```
 In partial _message_form
<% form_tag(:controller => "posts", :action => "create", :method=>"post") do %>  
  <%= label_tag(:message, "What are you doing?") %><br/>  
  <%= text_area_tag(:message, nil, :size => "44x6") %><br/>   
  <%= submit_tag("Update") %>  
<% end %> 
```

并加载 index.html.erb ，我只看到消息 "In partial _message_form" 。表单标签根本不呈现。

需要帮忙。很乐意提供任何额外的所需信息

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-15T03:10:54.253

据我记得你需要这个：`<%= form_tag...`

**更新**：有一个回退到以前的行为（没有`=`），但它似乎在 Rails 3.2.6 中不存在

# objective-c - 关于 Objective-C 中 NSLog 的形成

> ID：11489081
> 
> 赞同：0
> 
> 时间：2012-07-15T03:08:28.213
> 
> 标签：objective-c, xcode4

```
const char *string ="Hi there,this is a C string";
NSData *data=[NSData dataWithBytes:string 
                            length:strlen(string)+1];
NSLog(@"data is %@",data);
NSLog(@"%lu byte string is '%s'",[data length],[data bytes]); 
```

这可以成功暗示。如果最后一句话是：

```
NSLog(@"%d byte string is '%s'",[data length],[data bytes]); 
```

它会警告转换指定类型'int'但参数输入'NSUInteger'（又名'usigned long'）

为什么`%d`不能？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-15T03:10:30.153

NSUInteger 基本上是一个无符号长整数，因此请改用 %lu。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-15T03:56:51.197

%d 表示“int”。NSUInteger 不是 'int'，所以 %d 不起作用。您必须将格式说明符与类型匹配。如果您指定了错误的类型，您的程序可能会崩溃或更可能会打印垃圾。

# design-patterns - 耦合对象层次结构和操作

> ID：11489089
> 
> 赞同：2
> 
> 时间：2012-07-15T03:10:26.953
> 
> 标签：design-patterns

作为解析器库的一部分，我有以下对象层次结构：

```
             解析入口
                 |
                 |
                / \
               / \
              / \
NumericParseEntry StringParseEntry

```

ETC。，

这些对象基本上保存数据。然后，我有一组操作，例如评估（评估一个值是否通过解析条目标准）、generateSQL（根据解析条目标准生成 SQL 条件）。

由于单一职责原则，我不想将这些函数添加到特定的解析条目类中，并且希望维护单独的层次结构，为解析条目层次结构实现这些函数。这允许我为多个解析条目重用某个实现。

我想知道如何将操作与对象结合起来，以便在浏览执行某些操作的解析条目的解析表时，我应该能够获得适当的操作对象。

我能想到的一种粗略的方法是有一个工厂类，它维护解析条目类型与其对应的求值器/SQL 生成器之间的映射。另一种方法是将求值器/sql 生成器作为解析条目的数据成员嵌入，并在 getter 中返回它们。

对此即兴创作的任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-15T11:07:43.407

这对我来说听起来像是[访客模式](http://en.wikipedia.org/wiki/Visitor_pattern)。您将拥有`EvaluatorVisitor`和`SQLGenerationVisitor`which 将对 s 进行*访问*操作`ParseEntry`。`ParseEntry`是一个包含一个操作的*元素*，该操作将扩展。`accept(Visitor)``NumericParseEntry``StringParseEntry`

因为您使用的是访问者模式，所以单一责任原则是免费的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-15T04:54:51.080

普通数据对象不是非常面向对象的。我认为操作（评估/生成SQL）确实是`ParseEntry`对象的责任。如果您想重用评估器实现，您仍然可以编写一个`Evaluator`in`ParseEntry`并委托给它，例如：

```
public class NumericParseEntry extends ParseEntry {
  private Evaluator evaluator = ...;
  private SQLGenerator sqlGenerator = ...;

  public bool evaluate(Object value) {
    return evaluator.evaluate(this, value);
  }

  public String generateSQL() {
    return sqlGenerator.generateSQL(this);
  }
} 
```

单一职责原则说改变一个类应该只有一个原因——如果你的改变确实与一个特定的相关`ParseEntry`，那么改变类就没有错。

* * *

此外，您可以考虑使用继承并完全摆脱单独的`Evaluator`/`Generator`类。例如：

```
public class NumericParseEntry extends ParseEntry {
  // put common logic for numeric entries here
}

public class IntegerParseEntry extends NumericParseEntry {
  // put specialized code for handling integers
}

public class FloatParseEntry extends NumericParseEntry {
  // put specialized code for handling floating-point
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-15T05:19:13.550

我已经成功地使用这种模式[实现复杂案例分析](http://blogs.southworks.net/dgeffner/2011/09/26/implementing-complex-case-analysis/)来实现与您尝试做的类似的事情......您将能够以一种优雅的方式创建取决于类型或您选择的任何条件的代码，而无需修改“数据”层次结构。

# php - 提取 Instagram 照片并上传到我的域？

> ID：11489094
> 
> 赞同：0
> 
> 时间：2012-07-15T03:12:01.807
> 
> 标签：php, instagram

我想要一个 cronjob 或类似的运行脚本来将我的 instagram 照片拉到我域上的文件夹中。有没有人做过这样的事情？像 Instaport 之类的东西，但它是否在我的网站上实现了自动化？

我在 instagram 上登录开发区并查看了一些选项，但在查看 API 时迷路了。我对 API 做的不多。

任何想法或帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T20:46:37.053

这是我曾经使用过的一个快速而肮脏的解决方案：

使用 API 从 Instagram 获取所有照片：您可以​​使用一些 php 类，例如：[http ://www.9lessons.info/2012/05/login-with-instagram-php.html](http://www.9lessons.info/2012/05/login-with-instagram-php.html)

获取所有图片的 URL

制作一个脚本，将它们存储在服务器上的文件夹中。你可以使用这样的东西

```
$path_parts = pathinfo($url); // Return info about the URL
$image = ($path_parts['basename']); // Save file name in a variable
mkdir("folderName/", 0700); // Create the folder
copy($url,"folderName/".$image); // Copy files to folder 
```

希望这可以帮助！

# opengl - OpenGL：glDrawElements 不绘制

> ID：11489096
> 
> 赞同：5
> 
> 时间：2012-07-15T03:12:39.547
> 
> 标签：opengl

我正在尝试 Vertex Arrays 的东西，但由于某种原因 glDrawElements 命令没有为我绘制任何东西。我可以在两者之间使用 glBegin/glEnd 和 glDrawElements 进行绘制，但 glDrawElements 不起作用。这是一个代码片段：

这些数组在构造函数中设置：

```
double points[100];
GLint indices[50];

for (int i=0; i < 50; i++){
    points[2*i] = radius * cos(i*2*PI/50);
    points[2*i + 1] = radius * sin(i*2*PI/50);
    indices[i] = i;
} 
```

仅使用带有 glArrayElement 的点数组的工作代码：

```
void GLCircle::draw()
{
    glEnableClientState(GL_VERTEX_ARRAY);
    glVertexPointer(2, GL_DOUBLE, 0, points);

    glBegin(GL_POLYGON);
    for (int i=0; i < 50; i++){
        glArrayElement(i);
    }
    glEnd();
} 
```

同样有效的代码，使用点数组，通过索引数组访问的特定索引：

```
void GLCircle::draw()
{
    glEnableClientState(GL_VERTEX_ARRAY);
    glVertexPointer(2, GL_DOUBLE, 0, points);

    glBegin(GL_POLYGON);
    for (int i=0; i < 50; i++){
        glArrayElement(indices[i]);
    }
    glEnd();
} 
```

非工作代码，尝试使用 glDrawElements：

```
void GLCircle::draw()
{
    glEnableClientState(GL_VERTEX_ARRAY);
    glVertexPointer(2, GL_DOUBLE, 0, points);

    glDrawElements(GL_POLYGON, 4, GL_INT, indices);
} 
```

有什么建议吗？在这一点上我并不完全有必要使用它，但令人不安的是它不起作用......

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-15T03:18:47.697

的第二个参数`glDrawElements`是`count`，所以不应该`4`是索引的数量（`50`）？

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-15T04:20:01.347

参数为

```
glDrawElements() 
```

如下面所述.. ：

第一个 [ **mode** ] 参数是要渲染什么样的图元。

第二个 [ **count** ] 参数应该是要渲染的元素数。IE。*顶*点数

 *第三个 [ **type** ] 参数应该是**第四个**参数中值的类型.. 只能是

```
 GL_UNSIGNED_BYTE or GL_UNSIGNED_SHORT or GL_UNSIGNED_INT 
```

第 4 个 [ **indices** ] 参数是指向索引存储位置的指针。

*[你可以在这里](http://www.opengl.org/sdk/docs/man/xhtml/glDrawElements.xml)阅读更多关于这个..*

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-04-09T09:05:16.443

我刚刚遇到了同样的问题。

尝试`GL_UNSIGNED_INT`

```
glDrawElements(GL_POLYGON, 4, GL_UNSIGNED_INT, indices); 
```*

# xcode - 应用失败代码签名验证日志解读

> ID：11489097
> 
> 赞同：1
> 
> 时间：2012-07-15T03:12:40.810
> 
> 标签：xcode, signature, codesign

我花了过去几个小时试图解决这个问题，但我没有得到任何结果。至少我有错误的详细报告，但我不确定如何解释它。

```
Validate "/Users/brillig/Library/Developer/Xcode/DerivedData/Troll_Calendar-aiiisgrydufzgqacxoigzflbhwzv/Build/Products/Release-iphoneos/Troll Calendar.app"
    cd "/Users/brillig/Desktop/Source Code/Troll Calendar"
    setenv PATH "/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/usr/bin:/Applications/Xcode.app/Contents/Developer/usr/bin:/usr/bin:/bin:/usr/sbin:/sbin"
    setenv PRODUCT_TYPE com.apple.product-type.application
    /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/usr/bin/Validation "/Users/brillig/Library/Developer/Xcode/DerivedData/Troll_Calendar-aiiisgrydufzgqacxoigzflbhwzv/Build/Products/Release-iphoneos/Troll Calendar.app"

warning: Icon specified in the Info.plist not found under the top level app wrapper:  (-19007)
Unable to validate your application. - (null)

warning: Application failed codesign verification.  The signature was invalid, contains disallowed entitlements, or it was not signed with an iPhone Distribution Certificate. (-19011)
Executable=/Users/brillig/Library/Developer/Xcode/DerivedData/Troll_Calendar-aiiisgrydufzgqacxoigzflbhwzv/Build/Products/Release-iphoneos/Troll Calendar.app/Troll Calendar
codesign_wrapper-4.1: using Apple CA for profile evaluation
/Users/brillig/Library/Developer/Xcode/DerivedData/Troll_Calendar-aiiisgrydufzgqacxoigzflbhwzv/Build/Products/Release-iphoneos/Troll Calendar.app: valid on disk
/Users/brillig/Library/Developer/Xcode/DerivedData/Troll_Calendar-aiiisgrydufzgqacxoigzflbhwzv/Build/Products/Release-iphoneos/Troll Calendar.app: satisfies its Designated Requirement
test-requirement: code failed to satisfy specified code requirement(s)
codesign_wrapper-4.1: failed to execute codesign(1)
 - (null) 
```

我会在等待回复时处理图标问题。当我为开发构建它时，该应用程序在我的 iPad 上运行良好。我以为我做了所有我需要做的事情才能将它发送到应用商店，但我无法克服这一点。如果在某处需要完成所有事情的清单，那就太好了，但似乎这样的事情不存在。

PS OK 也许我有一些进展。我从自动配置文件匹配更改为手动设置配置文件，但没有收到指示不匹配的错误。

```
Provisioning profile 'Troll Calendar App Store' specifies the Application Identifier 'com.domain.foo.bar' which doesn't match the current setting 'com.domain.Foo-Bar'. 
```

那么这两个值是从哪里来的呢？我想我只需要更改其中一个以匹配另一个。哪一个更容易修改？我认为在需要输入这些值时，我的印象是名称并不重要，因此我没有特别注意确保一致性。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T04:04:28.267

尝试创建一个新的分发证书。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-15T16:17:34.450

我通过选择 Target、Info 解决了管理器中的问题，并更改了包标识符名称以匹配保留的标识符。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-20T07:09:09.050

我有同样的错误。我的问题是我在项目设置中进行了代码签名。我发现产品 TARGET 有相同的设置。

在那里，我为我的分发配置设置了 iPhone 分发证书。

# c++ - 赋值逻辑运算的结果

> ID：11489100
> 
> 赞同：-1
> 
> 时间：2012-07-15T03:14:26.530
> 
> 标签：c++, variable-assignment

```
int  a = 5;
if(a = 5)
{
    cout<<"111111"<<endl;
}
if(a = 0)
{
    cout<<"22222"<<endl;
} 
```

结果是

111111 按任意键继续

根据一些评论，赋值成功，结果为真。</p>

"a = 0" 和 a = 1" 应该分配成功。但结果只是第一次执行....

为什么 ？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-15T03:25:40.140

一些评论？这似乎很狡猾，在这种情况下是不正确的。

`operator=`on s的结果`int`是已经赋值的值。在这种情况下，`a = 5`结果为 0。因为评估为您看到“111111”，但因为评估为您没有看到“22222”。`5``a = 0``5``true``0``false`

至于为什么赋值导致值被赋值，以多个赋值的情况为例：

```
a = b = 5; 
```

这与以下内容相同：

```
a = (b = 5); 
```

因此，要使其按预期工作，`(b = 5)`必须返回 5。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-15T04:10:43.883

is的结果和`a=5`is`5`的结果，所以你的程序是这样的：`a=0``0`

```
int a = 5;
if(5)
{
    cout<<"111111"<<endl;
}
if(0)
{
    cout<<"22222"<<endl;
} 
```

由于 if 语句需要一个布尔值，因此隐式`5`转换为`true`和`0`转换为。`false`所以你的程序现在是这样的：

```
int a = 5;
if(true)
{
    cout<<"111111"<<endl;
}
if(false)
{
    cout<<"22222"<<endl;
} 
```

所以它只会打印“111111”。

> “**根据一些评论，赋值成功，结果为真**”赋值的结果是左边表达式的结果。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-15T03:41:02.813

> "a = 0" 和 a = 1" 应该分配成功。但结果只是第一次执行....

没有。`0`是假的，你还不如写”

```
if(0) { /* some code which will never execute */ } 
```

该`if`语句计算括号之间的*表达式*的结果，这意味着在检查条件之前必须完全计算表达式本身。

# iphone - UISearchBar 和 tableHeaderView

> ID：11489102
> 
> 赞同：0
> 
> 时间：2012-07-15T03:14:34.337
> 
> 标签：iphone, ipad, uitableview, uisearchbar

我的 tableView 目前在 tableHeaderView 中显示了一个随机图像横幅。如何将 SearchBar 和 Search Display 添加到表中的 tableHeaderView？我试图将搜索栏和搜索显示从情节提要拖到 tableView，但它没有显示搜索栏。我想在表格顶部（随机图像横幅上方）添加一个 searchBar。有什么线索吗？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T04:00:36.540

使 UIView 包含您的 searchBar 和随机图像横幅，视图顶部的 searchBar 和底部的随机图像横幅。然后将视图设置为tableHeaderView。

# c - 再次通过引用传递

> ID：11489103
> 
> 赞同：-4
> 
> 时间：2012-07-15T03:14:47.790
> 
> 标签：c, pass-by-reference

我制作了这段代码来创建一个单词词典。每个单词只能存在一个；如果是，则相应的计数器增加。如果单词在字典中，`strcmp()`则调用该方法并交换指针。

我的问题是，当我的函数被调用时，它使用`strcmp()`，但每次我这样做时， `*wordArr`都没有被修改过。因此，每次代码运行时，它都会与自动 < 任何单词的 "" 进行比较。

有人能指出我正确的方向吗？

```
void placeWord(struct wordNode *words,char *tempW)
{
   int value;

    if(uniqueWordCount==0)  //HEAD
    {
       words = createNewWord(tempW);
    }   

    else ///SEARCHING AND AMMEND
    {
      while(1)
        {   
            value = strcmp(words->word,tempW);
            if(value<0)
            {
                words =createNewWord(tempW);
                (words-1)->next= words;
                words->prev = (words-1);
                break;
            }
            else if(value==0)
            {
                (words->howmany)++;
                wordCount++;
                break;
            }
         words=words->next;
            if(words->next!=NULL)
                break;
        }
    }
}
.
.
.
.
}

int main(){
.
.
.  struct wordNode *wordArr =(struct wordNode* )malloc(size * sizeof(struct wordNode));

   placeWord(wordArr,tempW);
.
.
.
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-15T03:51:25.740

我相信最大的问题是你在 placeWord() 中对单词的分配。严格来说，所有参数在 C 中都是按值传递的。要模拟按引用传递，您需要在函数中传递对变量的引用并取消对它的引用。（也就是说，传入 &wordArr 并将你的 words 参数的类型更改为 struct wordNode **。）然后你可以将当前单词存储在一个变量中：

```
void placeWord(struct wordNode **words, char *tempWord) {
    struct wordNode *currWordNode = *words;

} 
```

要实际更改列表头部的值，您必须这样做：

```
newHeadNode->next = *words;  // If there was a previous head node.
*words = newHeadNode; 
```

另请注意，如果您不修改链表的头部，则必须跟踪前一个节点并将 prevNode->next 设置为您要插入的 wordNode。简单地分配给您用来跟踪列表中当前元素的变量是行不通的。

# json - json 到数据类 Flash Builder

> ID：11489106
> 
> 赞同：0
> 
> 时间：2012-07-15T03:15:11.473
> 
> 标签：json, actionscript-3, apache-flex, flash-builder, flex4.6

我需要使用 HTTP Get 访问数据库，并且 URL 中有下划线和以 $ 符号开头的参数：

“https://mydataservice/__query&$format=json”

我尝试了所有方法，但 Flash builder 一直在 url= 行中给我一个错误

所以我现在改用 URLRequest，我必须自己做所有的 json。在 Android 中，我可以创建对要从 json 字符串中检索的元素的类引用。如何在 Flash Builder 4.6 移动版中执行此操作？json 字符串有 20 列，但我只需要两列。

这是我走了多远，我的下一个问题是如何将它绑定到列表。

```
package dataclass
{
     [Bindable]
     public class DataTable extends Object
     {
          public function DataTable()
          {
              super();
          }

          public  var d:String;{
                public var result:Array;{

                       public var Name:String = new String();

                       public var Phone:String = new String();
                 }
          }
     }
} 

  protected function downloadFile():void {
            var request:URLRequest = new URLRequest ("https://mydataservice/__query&$format=json");
            var loader:URLLoader = new URLLoader();
            loader.dataFormat = URLLoaderDataFormat.TEXT;
            loader.load(request);
            loader.addEventListener(Event.COMPLETE, oncomplete);

        }

        protected function oncomplete(e:Event):void{ 
            var loader2:URLLoader = e.target as URLLoader; 
            try {
                if (loader2 != null){ 
                    var jsonParsed : Object = JSON.parse(loader2.data);
                    var dataTable:DataTable = new DataTable;            

                } 
                else{ 
                    trace("an error has occured!"); 
                } 
            }
            finally{

            }

        } 
```

谢谢，金

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-15T17:46:53.050

要打印所有对象属性：

```
var jsonParsed : Object = JSON.parse(loader2.data);
for (var key:String in jsonParsed) {
    trace(key + ': ' + jsonParsed[key]);
} 
```

# c++ - 加速 C++ 以找到最长的回文

> ID：11489107
> 
> 赞同：0
> 
> 时间：2012-07-15T03:15:15.953
> 
> 标签：c++, stdvector, stdlist

我正在练习 Koeing 加速 C++，并想验证我的答案。由于网上没有可用的解决方案，我想在这里发布并请专家对我的解决方案的看法。我不确定人们是否会喜欢我把它贴在这里。如果没有，请告诉我，我以后不会这样做。还要提一下，这不是家庭作业，纯粹是我希望将我的 C++ 技能提升到一个新的水平。

问题：**编写一个程序来查找字典中的所有回文。接下来，找到最长的回文。**

**到目前为止我所做的**-> 我已经定义了测试回文的函数，还将所有单词存储在一个列表中。我在下面发布了我的代码。

**我被困在哪里：** 我需要建议，我选择使用列表数据结构而不是向量是否好？其次，我被困在如何显示最长的单词。我可以显示最长的长度但不能显示最长的单词。

我在下面的尝试

```
 bool palindromeTest( const std::string& input )
{
   typedef std::string::size_type strSize;
    strSize i = 0;
    strSize j = input.size() - 1  ;
    while( i < input.size() )
    {
        if ( input[i] != input[j])
        {
            return false;
        }
        i++;
        j--;
    }

    return true;
}

int main()
{

    // stores all words in a list or vector
    std::list< string> listDict;
    std::string readWord;
    std::ifstream readFile( "/Users/apple/palidndrome-ch5-10/dict.txt" );
    if( ! readFile )
    {
        std::cout <<" failed to open file" << std::endl;
        return 0;
    }
    while( readFile >> readWord )
    {
        listDict.push_back( readWord );
    }

     std::string::size_type maxLen = 0 ;
     std::string longestWord = " "; // to store longest palindrome

     // print all the palindrome words and also which is longest palindrome.

    for( std::list<std::string>::const_iterator it = listDict.begin(); it != listDict.end(); ++it )
    {

        if( palindromeTest( *it )  )
        {
            std::cout <<" the word -> " << *it << " is palindrome" << std::endl;
            // find max len of palindrome;
            maxLen = max( maxLen, it->size() );
            longestWord = *it ;// need to change code here ?? no idea how

        }

    }

    std::cout <<" the maximum len is = " << maxLen << std::endl;
    std::cout << " the word with maximum length is  " << longestWord ; // something is wrong here

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T03:19:50.577

向量和列表在这里同样有效，尽管向量更有效。

您可以通过更改找到最长的单词

```
maxLen = max( maxLen, it->size() );
            longestWord = *it ;// need to change code here ?? no idea how 
```

到

```
if (it->size() >= longestWord.size()) {longestWord = *it;} 
```

（您实际上不需要跟踪 maxlen，因为您可以调用longestWord.size()。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-15T04:22:17.333

首先是回文测试。您正在检查字符串中的每个字符两次，这是不需要的。虽然在这种特殊情况下这无关紧要，因为它只是将该特定操作的时间加倍，但对于一些类似的操作，它会改变语义（考虑`reverse`-- 在概念上与回文测试非常相似）。为了改进检查，您可以使用循环计数器 from `0`to`input.size()/2`或使用两个指针/迭代器并运行直到它们在中间相遇。另请注意，迭代到`input.size()/2`将留下一个从未测试过奇数大小字符串的字符，但这很好。

当需要顺序容器时，您应该始终默认为`std::vector<>`，而不是`std::list<>`. 要手动查找最大值，您应该将调用更改`max`为进行测试，以检查此元素是否大于前一个最大值，然后更新 max 的值和字符串的位置（或字符串本身）。在这种特殊情况下，如果重复次数很高，您也可以考虑不使用顺序容器，而是使用关联容器 ( `std::set<std::string>`) 来避免重复。但最好不要将单词完全存储在内存中。

您应该学习使用迭代器，以及标准库中的迭代器标头。例如，阅读循环可以转换为：

```
std::vector<std::string> words;
std::copy( std::istream_iterator<std::string>( readFile ),
           std::istream_iterator<std::string>(),
           std::back_inserter( words ); 
```

回文检查可以调用`std::equal`算法：

```
bool isPalindrome( std::string const & str ) {
   return std::equal( str.begin(), str.begin()+str.size()/2,
                      str.rbegin() );
} 
```

通过提供适当的函子，也可以使用算法来找到最长的回文：

std::vector::const_iterator max = std::max_element( words.begin(), words.end(), []( std::string const & lhs, std::string const & rhs ) { return lhs.size () < rhs.size(); });

（使用 C++11 中的 lambda，在 C++03 中，您需要创建一个执行相同比较的函子，这需要更多样板代码，但不应该更复杂）

正如 Antimony 指出的那样，如果您只需要这个结果，则不需要将所有单词都保存在内存中，在这种情况下，您可以只测试读取的每个单词，并且仅当它是最长的回文时才存储它直到现在。这不是很容易用标准算法实现的，而且只滚动你自己的循环会更简单。

虽然出于学习目的，您可能想要遵循这本书（针对 C++03），但 C++11 中的一个简单解决方案可能是：

```
std::string longestPalindrome( std::istream& stream ) {
   std::string longest;
   std::for_each( std::istream_iterator<std::string>(stream),
                  std::istream_iterator<std::string>(),
                  [&longest]( std::string const & word ) {
                      // if is longest palindrome so far
                      if (std::equal( word.begin(),
                                      word.begin()+word.size()/2,
                                      word.rbegin() 
                          && word.size() > longest.size())) 
                      {
                         longest = word;
                      }
                  });
   return longest;
}
int main() {
   std::ifstream readFile( "/Users/apple/palidndrome-ch5-10/dict.txt" );
   if ( !readFile ) {
      std::cerr << "failed to open file\n";      // [*]
      exit(1);
   }
   std::string longest = longestPalindrome( readFile );
   std::cout << "The longest palindrome is: '" << longest << "'\n";
} 
```

[*]：注意，除非你真的*需要*它，否则最好只输出 "\n" 而不是`std::endl`. 两者之间的区别在于，它`std::endl`还会*刷新*流（强制写入），这会无缘无故地影响性能。至于什么时候需要*flush*，基本上是需要保证*现在*输出的时候，比如查询用户的时候：

```
std::cout << "Enter a number: " << std::flush; // Ensure that the user gets the message
                                               // before we lock waiting for an answer:
std::cin >> number; 
```

即使在这种情况下，转储“\n”也比转储“\n”更清楚（如果您需要换行符）而`std::flush`不是`std::endl`（不太清楚刷新是故意的，因为有太多代码`std::endl`无休止地使用......

# cluster-analysis - 在线数据聚类的一个实例

> ID：11489109
> 
> 赞同：0
> 
> 时间：2012-07-15T03:15:44.593
> 
> 标签：cluster-analysis

我需要从输入的整数数组中导出整数簇，以使簇内的变化最小化。（数组中的整数或数据值对应城市间行驶的16辆汽车的油耗，最后我会根据数据值的聚类，从这16辆汽车中推导出4个聚类。）

> 约束：元素的数量总是16，没有。簇的数量为 4，簇的大小为 4。

我打算做的一种简单方法是对输入数组进行排序，然后将它们分成 4 组，如下所示。我认为我也可以使用 k-means 聚类。

但是，我卡住的地方如下：数组中的数据随时间变化。基本上，我需要每 1 秒监视一次阵列并重新组合/重新集群它们，以便最大限度地减少集群内的变化。此外，我需要满足上述约束。为此，我得到的一个想法是根据它们的平均值和变化选择两组，并在组之间移动数据值以最小化组内的变化。但是，我不知道如何选择要在组之间移动的数据值以及如何选择这些组。我无法每秒对数组进行排序，因为我无法承受每秒的 NlogN。如果您指导我提出一个简单的解决方案，那就太好了。

```
sorted `input array: (12 14 16 16 18 19 20 21 24 26 27 29 29 30 31 32)`

cluster-1: (12  14 16 16)
cluster-2: (18 19 20 21)
cluster-3: (24 26 27 29)
cluster-4:  (29 30 31 32) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-16T05:59:43.070

首先让我指出，对*少量*对象进行排序*非常*快。特别是当它们之前已经排序时，“邪恶”冒泡排序或插入排序通常是线性的。考虑一下顺序可能在多少地方发生了变化！当数据适合 CPU 的一级缓存时，所有经典的复杂性讨论并不真正适用。

您是否知道大多数 QuickSort 实现回退到*小*数组的插入排序？因为它对小型阵列做得相当好，而且开销很小。

所有的复杂性讨论都只针对*非常大*的数据集。事实上，它们仅适用于无限大小的数据。在达到无穷大之前，复杂度更高的简单算法可能仍然表现更好。对于 n < 10，二次插入排序通常优于 O(n log n) 排序。

但是，k-means 对您帮助不大。

1.  您的数据是一维的。*甚至*不要费心去看多维方法，它们的性能会比适当的一维方法差（可以利用数据可以排序）
2.  如果您想要保证运行时间，那么可能有很多迭代的 k-means 是完全不受控制的。
3.  您不能轻松地将诸如 4-cars 规则之类的*约束添加到 k-means*

我相信您的任务的解决方案（因为数据是一维的并且您添加的约束）是：

```
Sort the integers
Divide the sorted list into k even-sized groups 
```

# c - GSL 与数字食谱。处理矩阵的最佳方法

> ID：11489111
> 
> 赞同：2
> 
> 时间：2012-07-15T03:16:38.710
> 
> 标签：c, gsl

在 GSL 中，实`n * m`矩阵`M`在内部表示为大小为 的数组`n*m`。要访问 的 (i,j) 元素`M`，内部 GSL 必须访问`(i-1) * n + j - 1`数组的位置，这涉及整数乘法和加法。

在 C 的数值配方中，他们推荐了声明一个指针数组的替代方法`n`，每个指针都指向一个`m`数字数组。然后访问 (i,j) 元素，一个 puts `M[i-1][j-1]`。他们声称这更有效，因为它避免了整数乘法。缺点是必须分别初始化每个指针。

我想知道，每种方法的优点/缺点是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-15T04:14:12.823

在 C 中：

```
#define n 2
#define m 3

int M[n*m]; 
```

是相同的

```
int M[n][m]; 
```

在 C 矩阵中，据说以行优先顺序存储

[http://en.wikipedia.org/wiki/Row-major_order](http://en.wikipedia.org/wiki/Row-major_order)

在 C 中，

```
M[1][2] 
```

是相同的

```
*(M + 1*m + 2) // if M is define as M[n][m] 
```

您可以将 M 定义为由 n 个指针组成的数组，但您仍然必须将数据放在某处，而最好的位置可能是 2D 数组。我会建议：

```
int M[n][m];

int* Mrows[n] = {M[0], M[1]}; 
```

然后，您可以对行进行直接偏移以到达您想要的行。然后：

```
Mrows[1][2] 
```

是相同的

```
*((*(Mrows + 1)) + 2) 
```

它为程序员做更多的工作，如果你想走得很快，可能才值得。在这种情况下，您可能需要研究更多优化，例如特定的机器指令。此外，根据您的算法，您可以只使用 + 操作（例如，如果您正在迭代矩阵）

# r - 在 R / GGPLOT2 中绘制百分比指示

> ID：11489116
> 
> 赞同：6
> 
> 时间：2012-07-15T03:17:21.710
> 
> 标签：r, ggplot2, line, quantile, horizontal-line

我有一个两列数据框的基本图（x =“期间”和 y =“范围”）。

![在此处输入图像描述](../Images/9285adbacfd98580eaaaba833c2d90eb.png)

```
library (ggplot2)
qplot (Periods, Range, data=twocoltest, color=Periods, size = 3,) + geom_jitter(position=position_jitter(width=0.2)) 
```

我试图在每个时期添加一条水平线，低于该时期所有观察值的 90%。（它不必是一条水平线，每个周期的任何视觉指示就足够了）。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-15T04:00:06.157

好的，我已经阅读了 ggplot 帮助，现在开始：

```
# example data 
twocoltest <- data.frame(Periods=rep(1:3,each=3),Range=1:9)

library(ggplot2)
c <- qplot (Periods, Range, data=twocoltest, color=Periods, size = 3,) + geom_jitter(position=position_jitter(width=0.2))
q90 <- function(x) {quantile(x,probs=0.9)}

c + stat_summary(fun.y=q90, colour="red", geom="crossbar", size = 1, ymin=0, ymax=0) 
```

![在此处输入图像描述](../Images/f0bcd9cef6e32360d710c0301beb34bc.png)

# algorithm - 与寻找概率相关的算法

> ID：11489125
> 
> 赞同：-3
> 
> 时间：2012-07-15T03:18:42.740
> 
> 标签：algorithm, probability, probability-theory

这不是作业，这是我在编程比赛中遇到的一个问题，但找不到解决方案。

Byteland 王国包含 N 个城市，编号为 1..N。对于每个城市 i，国王都会为该城市分配一些资金用于其年度维护。分配的数量是在 ai（该城市所需的最小数量）和 bi（可以分配给该城市的最大数量）之间随机选择的。请注意，分配给城市的金额不必是整数。今年征收的税款总额为 C。

王国今年发亏的概率是多少

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T06:08:56.853

我认为[这](http://pastebin.com/hV78V7dL)是正确的说法：

Byteland 王国包含 N 个城市，编号为 1..N。对于每个城市 i，国王都会为该城市分配一些资金用于其年度维护。分配的数量是在 ai（该城市所需的最小数量）和 bi（可以分配给该城市的最大数量）之间随机选择的。请注意，分配给城市的金额不必是整数。今年征收的税款总额为 C。

王国今年发亏的概率有多大？换句话说，分配给所有城市的总金额超过税收总额的概率是多少？

所有赋值的总和是 x_0 + ... + x_i + ... + x_n 如果 U(a,b) 是 a 和 b 之间的统一数 所有赋值的总和 U(0, b_0 - a_0) + a_0 + ... + U(0, b_i - a_i) + a_i + ... + U(0, b_n - a_n) + a_n 等于 a_0 + ... + a_i + ... + a_n + U(0 , b_0 - a_0) + ... + U(0, b_i - a_i) + ... + U(0, b_n - a_n) 所有值都是已知的。添加均匀分布的公式也是已知的（[检查here](http://mathworld.wolfram.com/UniformSumDistribution.html)）：但在编程问题中，您不需要使用解析解，而是实现一些能给你足够好的数字的东西......你应该使用 montecarlo 或类似的东西来模拟概率......你也可以使用 U(0, k) = k * U(0, 1) 的事实。计算和的不同值的概率，然后将它们与 C 进行比较。

# asp.net - [HttpPost] 期间模型值为空

> ID：11489126
> 
> 赞同：0
> 
> 时间：2012-07-15T03:18:45.333
> 
> 标签：asp.net

我的代码有一些问题，希望有人能帮帮我。这是我正在使用的片段：

```
[Authorize]
        public ActionResult EventResults(int id)
        {
            List<Event> CompetitionEvents = Event.getEventsByCompetitionId(id);
            ViewBag.CompetitionEvents = CompetitionEvents;
            List<Person> Competitors = Competition.getCompetitorsByCompetitionID(id);
            ViewBag.Competitors = Competitors;
            List<Results> Results = Competition.getCompetitorResultsPairings(CompetitionEvents, Competitors);
            ViewBag.Results = Results;
            ViewBag.OrganizerEmail = Competition.getCompetitionById(id).OrganizerEmail;
            return View();
        }
@model BINC.Models.Results
@using BINC.Models;
@{
    var eventList = ViewBag.CompetitionEvents as List<Event>;
    var competitorList = ViewBag.Competitors as List<Person>;
    var resultList = ViewBag.Results as List<Results>;
}
<h2></h2>
<p>Results:</p>
    @using (Html.BeginForm())
       {
            foreach (var evt in eventList)
            {
                <fieldset>
                    <legend>@evt.activity.Name</legend>
                   <p>Event Description:  @evt.activity.Description</p>
                   @foreach (var competitor in competitorList)
                   {
                       foreach (var result in resultList)
                       {
                           if (result.EventID == evt.id && result.CompetitorEmail == competitor.Email)
                           {
                               <p>Competitor:  @competitor.FirstName @competitor.LastName</p>
                               <p>Score:  @result.Score</p>
                               if (ViewBag.OrganizerEmail.Equals(@User.Identity.Name))
                               {
                                    @Html.LabelFor(model => model.Score, "New Score   ");
                                    @Html.TextBoxFor(model => model.Score, new { maxlength = 10, style = "width:125px" })
                                    <input type="submit" name="submitButton" value="Update" />
                               }
                           }
                       }
                   }
                </fieldset>
            }
       }
[HttpPost]
        public ActionResult EventResults(Results res)
        {
           //stuff
        } 
```

我的问题只是在我的结果对象上设置了分数。例如，当我将值“15”放入文本框中并单击“更新”时，我将 Result 模型对象传递给 httppost 方法，该方法除了我刚刚设置的“分数”字段之外的所有内容都设置为 null进入。

我是否过于复杂了？有没有更简单的方法？

我尝试添加

```
@Html.HiddenFor(model => model.EventID);
@Html.HiddenFor(model => model.CompetitorEmail); 
```

但这似乎没有任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-15T09:30:33.427

您有多个提交按钮，这可能是问题所在，这也不是好的做法

```
<input type="submit" name="submitButton" value="Update" /> 
```

在表单末尾只保留一个提交按钮

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-15T12:39:51.843

基本上——确保将模型传递给视图——并使用 Html 助手（即 TextBoxFor() 和 HiddenFor）

我不认为提交按钮有问题——但可能有帮助的一件事是将模型实际传递给视图。您正在使用 ViewBag 来传递您的数据。将模型传递给 View，您的 Html Helpers 应该生成正确的表单名称，以便模型绑定起作用。

# php - Doctrine2：删除与额外数据的关系

> ID：11489131
> 
> 赞同：0
> 
> 时间：2012-07-15T03:19:14.243
> 
> 标签：php, doctrine-orm, relationship

我有两个具有多对多关系的表。我需要为这种关系添加一些额外的字段，所以我创建了一个新实体，它与两个表中的每一个都具有 ManyToOne 关系。我遇到的问题是删除关系实体。我不想删除两个表中的任何一个中的条目，我只想删除关系。我为设置相关实体​​所做的工作在此处进行了详细描述：

[Doctrine2：使用参考表中的额外列处理多对多的最佳方法](https://stackoverflow.com/questions/3542243/doctrine2-best-way-to-handle-many-to-many-with-extra-columns-in-reference-table)

为了删除关系，我尝试从其他两个表条目中删除相关元素，然后在相关实体中将这些表的引用设置为 null。这似乎不起作用；Doctrine 尝试执行查询以更新相关表中的条目并将两个外键设置为空。如果对它的所有引用都已删除，我希望它会删除相关表中的条目。

让我知道您是否想查看我的实体，或者这是否足够有意义。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-15T18:02:50.227

实际上，删除充当“连接表”的实体就可以了。什么都不应该级联。

所以假设你有这样的关系

```
User <- UserGroup -> Group 
```

您只需要删除`UserGroup`实体。

如果你删除`User`or `Group`，并且你已经正确设置了[级联持久化操作](http://docs.doctrine-project.org/projects/doctrine-orm/en/latest/reference/working-with-associations.html#transitive-persistence-cascade-operations)，也`UserGroup`将继续。您还可以使用`orphanRemoval`来避免`UserGroup`分配给不同的`User`或`Group`元素。

# php - 从 PHP 中的文本文件中随机拉出多行

> ID：11489133
> 
> 赞同：0
> 
> 时间：2012-07-15T03:19:45.100
> 
> 标签：php, text-files

所以目前我有一个名为“flatfile.txt”的文本文件，它大约有五十行，所有网站；例如[http://facebook.com](http://facebook.com)或类似的东西。我想要发生的是让 PHP 打开文本文件，拉出一行，然后再做一次，大约 30 次。

```
<?php
$one = $url;
$httprefix = array("http://", "https://");
$trunclink1 = str_replace($httprefix, '', $one);
?>
<div class="view link">
   <img src="http://immediatenet.com/t/l?Size=1024x768&amp;URL=<? echo $one;?>" height="200px" width="300px" />
   <div class="mask">
        <h2><? echo $trunclink1;?></h2>
        <p><? echo $description; ?></p>
        <a href="#" class="info">Read Comments</a>
   </div>
</div> 
```

所以 $url 是 PHP 从文本文件中取出的输出，所以当我到达 $2 时，我希望 $url 给出另一个随机行，也许[http://twitter.com](http://twitter.com) 我对 PHP 很陌生，所以我可能有一些新手错误，但任何帮助都会很棒。我认为这是一个需要的 foreach 循环，但不确定。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-15T04:37:47.643

```
<?php
foreach (array_rand(file('flatfile.txt'), 30) as $line) {
    echo $line;
} 
```

# ruby-on-rails - Rails3 助手和动态内容

> ID：11489135
> 
> 赞同：1
> 
> 时间：2012-07-15T03:20:09.187
> 
> 标签：ruby-on-rails, ruby, passenger, webrick, last.fm

我一直在努力使用 youpy 的“lastfm”gem 从 last.fm 中提取动态数据。获取数据效果很好；但是，rails 似乎不喜欢动态部分。现在，我已将代码添加到 helper 文件夹中名为“HomeHelper”（在创建 rails 应用程序期间生成）的帮助程序模块中：

```
module HomeHelper

@@lastfm = Lastfm.new(key, secret)
@@wesRecent = @@lastfm.user.get_recent_tracks(:user => 'weskey5644')    

def _album_art_helper

    trackHash = @@wesRecent[0]
    medAlbumArt = trackHash["image"][3]

    if medAlbumArt["content"] == nil
        html = "<img src=\"/images/noArt.png\"  height=\"auto\" width=\"150\" />"
    else
        html = "<img src=#{medAlbumArt["content"]} height=\"auto\" width=\"150\" />"
    end

    html.html_safe

end

def _recent_tracks_helper

    lfartist1 = @@wesRecent[0]["artist"]["content"]
    lftrack1 = @@wesRecent[0]["name"]
    lfartist1 = @@wesRecent[1]["artist"]["content"]
    lftrack1 = @@wesRecent[1]["name"]

    htmltrack = "<div class=\"lastfm_recent_tracks\">
                <div class=\"lastfm_artist\"><p>#{lfartist1 = @@wesRecent[0]["artist"]["content"]}</p></div>
                <div class=\"lastfm_trackname\"><p>#{lftrack1 = @@wesRecent[0]["name"]}</p></div>
                <div class=\"lastfm_artist\"><p>#{lfartist2 = @@wesRecent[1]["artist"]["content"]}</p></div>
                <div class=\"lastfm_trackname\"><p>#{lftrack2 = @@wesRecent[1]["name"]}</p></div>
            </div>
    "       

    htmltrack.html_safe
end
end 
```

我为每个创建了一个部分并将它们添加到我的索引页面：

```
<div class="album_art"><%= render "album_art" %></div>
<div id="nowplayingcontain"><%= render "recent_tracks" %></div> 
```

太好了，这得到了我需要的数据并像我想要的那样显示在页面上；但是，根据last.fm，似乎当歌曲更改时，除非我重新启动服务器，否则它不会出现在我的网站上。

我已经使用 Phusion Gassenger 和 WEBrick 对此进行了测试，似乎两者都可以。我曾认为这可能是这个特定页面的缓存问题，所以我尝试了一些缓存黑客来使页面过期并重新加载。这没有帮助。

然后我得出结论，将此代码粘贴在帮助文件中可能不是最佳解决方案。我不知道助手处理动态内容的能力如何；像这样。如果有人对此有任何见解，太棒了！谢谢大家！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T03:38:17.163

您的问题不在于您正在使用帮助程序，而在于您正在使用类变量：

```
module HomeHelper
    @@lastfm = Lastfm.new(key, secret)
    @@wesRecent = @@lastfm.user.get_recent_tracks(:user => 'weskey5644') 
```

在第一次读取模块时初始化。特别是，`@@wesRecent`将被初始化一次，然后它将保持不变，直到您重新启动服务器或碰巧获得新的服务器进程。您应该可以`get_recent_tracks`在需要时拨打电话：

```
def _album_art_helper
    trackHash = @@lastfm.user.get_recent_tracks(:user => 'weskey5644').first
    #... 
```

请注意，这意味着您的两个助手不一定会使用相同的曲目列表。

您可能还想添加一些“每分钟最多只刷新一次曲目”的逻辑。

# facebook - 通过 Nodejs 的 TLS Socket 连接

> ID：11489137
> 
> 赞同：5
> 
> 时间：2012-07-15T03:20:21.747
> 
> 标签：facebook, sockets, node.js

我正在尝试通过 Nodejs 建立与 chat.facebook.com 端口：5222 的 TLS 套接字连接。我使用以下代码：

```
 var a=require('tls');
 var b=a.connect(5222,'chat.facebook.com',function(){console.log("connected");});
 b.on('error',function(error){console.log(error);}) 
```

但它没有连接，而是给出了一个错误：

```
 [Error: 140089045411648:error:140770FC:SSL routines:SSL23_GET_SERVER_HELLO:unknown    protocol:../deps/openssl/openssl/ssl/s23_clnt.c:683:] 
```

我尝试了与 encrypted.google.com:443 的类似连接，并且控制台很容易触发 "connected" 。

有人可以指导我我错过了什么或可以做些什么来克服这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T21:38:16.543

带有 tls 的 xmpp 使用“STARTTLS”，一种从明文到加密的协议升级。有关详细信息，请参阅[http://xmpp.org/rfcs/rfc6120.html#tls](http://xmpp.org/rfcs/rfc6120.html#tls)。

（这意味着你必须先发送一些未加密的xml东西，然后等待另一端确认你选择升级到TLS）

# facebook-graph-api - Facebook真的禁用了user_mobile_phone权限吗？

> ID：11489140
> 
> 赞同：2
> 
> 时间：2012-07-15T03:21:27.100
> 
> 标签：facebook-graph-api

我找到了这个链接：

[http://developers.facebook.com/blog/post/2011/01/14/platform-updates--new-user-object-fields--edge-remove-event-and-more/](http://developers.facebook.com/blog/post/2011/01/14/platform-updates--new-user-object-fields--edge-remove-event-and-more/)

但它是从 2011 年 1 月 14 日开始的，也许 facebook 再次启用了它。

有人知道吗？以及是否有办法获取用户手机。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T04:11:42.003

[Facebook 删除了这些权限](http://developers.facebook.com/blog/post/447/)——以及对这些字段的访问权限——并且尚未决定再次将它们提供给应用程序。所以，不，你不能访问这些数据。

# php - 如何阻止谷歌抓取不存在的页面

> ID：11489141
> 
> 赞同：0
> 
> 时间：2012-07-15T03:21:50.640
> 
> 标签：php, .htaccess, web-crawler

当我在开发我的网站时。我在一个地方打错了，例如，我所有的页面都是 dir1/dir2/page.htm/par1-par2，但我的错字是 dir1/dir2/page/par1-par2（注意：没有 .htm）。

它只生产了 1 天，但 Google 一直在抓取这些链接。如何阻止谷歌这样做？

顺便说一句，那不是一页，而是数百或数千页。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-15T03:35:18.677

尝试使用 robots.txt 拒绝访问此页面（网址）

[http://www.robotstxt.org/robotstxt.html](http://www.robotstxt.org/robotstxt.html)

[http://support.google.com/webmasters/bin/answer.py?hl=en&answer=156449](http://support.google.com/webmasters/bin/answer.py?hl=en&answer=156449)

在此处测试 robots.txt：[http ://www.frobee.com/robots-txt-check/](http://www.frobee.com/robots-txt-check/)

```
patterns must begin with / because robots.txt patterns always match absolute URLs. 
* matches zero or more of any character. 
$ at the end of a pattern matches the end of the URL; elsewhere $ matches itself. 
* at the end of a pattern is redundant, because robots.txt patterns always match any URL which begins with the pattern. 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-15T03:45:40.843

如果该页面存在（可能是因为您使用 mod_rewrite）并且未找到呈现自定义页面但未发送 http 410 Gone 标头`header("HTTP/1.0 410 Gone");`，那么 google 将不知道它已被删除并对其进行索引。

您需要添加正确的标题或删除页面或不呈现您自己的 404，因此它会访问您的服务器 404，然后谷歌将从索引中删除该页面，并且该页面的删除不会在一夜之间发生：

您也可以将 url 添加到 robots.txt 文件中，这也不能保证从索引中删除该页面，您可以按照其他人所说的那样联系谷歌，但不能保证得到响应或删除。

```
User-agent: *
Disallow: /dir1/dir2/page/par1-par2 
```

祝你好运。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-07-15T03:30:08.410

谷歌有一个表格，你可以要求它从索引中删除一个页面。

查看此链接中的信息：

[http://support.google.com/webmasters/bin/answer.py?hl=en&answer=164734](http://support.google.com/webmasters/bin/answer.py?hl=en&answer=164734)

# php - PHP Parse 错误：语法错误，意外的 T_VARIABLE

> ID：11489142
> 
> 赞同：0
> 
> 时间：2012-07-15T03:22:35.000
> 
> 标签：php

试图让这段代码工作，但我一直遇到错误。我对 PHP 相当陌生，并且正在做一个个人学习项目。预先感谢您的任何帮助！

如果我删除以下代码，它将运行良好。带有 ** 的代码是引发错误的代码。

[2012 年 7 月 15 日 03:10:01 UTC] PHP 解析错误：语法错误，第 22 行 x.php 中的意外 T_VARIABLE

```
var $salt = 'fortesting';
var $userpw = 'testing';
**var $saltpw = $salt . $userpw;**
var $tpw = hash('sha512', $saltpw, false); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-15T03:26:23.500

似乎这是属性类声明的一部分。

好吧，您只能为属性指定常量值。所以你不能在那里连接字符串。

可能的解决方案是`saltpw`在类的构造函数中初始化 runtinme 中的属性，例如：

```
public function __construct()
{
    $this->saltpw = $this->salt . $this->userpw;
} 
```

PS：`var`已过时，您应该使用`private`,`protected`或`public`代替

# objective-c - 使用 NSCoding 在 Objective C 中保存嵌套对象和 NSArray

> ID：11489151
> 
> 赞同：0
> 
> 时间：2012-07-15T03:24:14.687
> 
> 标签：objective-c, nsarray, nscoding

我正在尝试保存一个具有 NSMutableArray 嵌套对象的对象。我想使用 NSCoding 协议将文件保存在文档目录下。我需要编码每个对象（包括嵌套对象）还是只编码超类本身？现在我只对超类的对象进行编码。

为了更好地说明我的对象层次结构是什么样的：

```
Main Object
  -NSString
  -int
  -NSMutableArray
    -int
    -double
    -char 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-15T04:11:27.563

是的。未在子类中实现 NSCoding 协议会引发异常

```
*** Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: '-[Set encodeWithCoder:]: unrecognized selector sent to instance 0x6891470' 
```

“Set”是嵌套在我试图保存的主类中的子类。

# ruby-on-rails - 一段时间后 LocomotiveCMS 主题文件 404

> ID：11489158
> 
> 赞同：0
> 
> 时间：2012-07-15T03:25:46.713
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3.1, heroku, locomotivecms

我在 Heroku 上托管 Locomotive CMS，过了一会儿我上传的主题文件将是空白的。我收到 404 响应，并且管理后端中的实际文件是空白的。

以前有人遇到过这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T22:55:24.717

Heroku 有一个只读文件系统。上传的文件可能会暂时存储，但会定期清理。听起来这可能正在发生。

确保您已将 Locomotive 配置为使用您的 Amazon S3 凭证，如本页所述： http: [//doc.locomotivecms.com/installation/heroku](http://doc.locomotivecms.com/installation/heroku)

# cocos2d-iphone - CCSprite 没有使用相同的纹理 ID

> ID：11489165
> 
> 赞同：1
> 
> 时间：2012-07-15T03:26:23.093
> 
> 标签：cocos2d-iphone, textures, ccsprite

我创建了两个相同的CCSpriteBatchNode，分别添加不同的CCLayer。

```
CCSpriteBatchNode *mNode =      [param objectForKey:@"BatchNode"];

if (self =[super initWithTexture:mNode.texture rect:rect ])

{

    CCAnimation *walkAnim = [CCAnimation animationWithFrames:[[allFrameCache objectAtIndex:0] objectAtIndex:0] delay:frequencyFloat];
    CCAction* walkAction = [CCRepeatForever actionWithAction:[CCAnimate actionWithAnimation:walkAnim restoreOriginalFrame:NO]];
    [self runAction:walkAction];

} 
```

但它显示：2012-07-15 11:18:27.389 SanGuo_[21379:707] ***由于未捕获的异常“NSInternalInconsistencyException”而终止应用程序，原因：“CCSprite 未使用相同的纹理 ID”

我是新手，研究了半天，很郁闷，谁能帮帮我？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-15T08:42:47.307

> CCSprite 没有使用相同的纹理 ID

您只能将精灵添加到使用与精灵批处理节点相同的纹理的精灵批处理节点。这是您尝试将精灵添加到具有与批处理节点不同纹理的批处理节点时遇到的错误。

解决方案：确保精灵使用与批处理节点相同的纹理。

# python - 如何在python中对列表中的数字求和？

> ID：11489172
> 
> 赞同：2
> 
> 时间：2012-07-15T03:27:49.627
> 
> 标签：python, python-3.x

两天学习 python :) 现在我试图解决[Project Euler 问题 #2](http://projecteuler.net/problem=2) ，我需要帮助。

更具体地说，我需要知道如何添加添加到空列表中的数字。我尝试了“总和”，但似乎没有按照教程网站的建议工作。我正在使用python 3。到目前为止，这是我的代码：

```
a = 0
b = 1
n = a+b
while (n < 20):
   a, b = b, a + b
   n = a+b
   if n%2 == 0:
       mylist = []
       mylist.append(n)
       print(sum(mylist)) 
```

这输出：

```
2
8 
```

现在我该如何添加它们？谢谢 ：）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-15T03:29:21.143

您做得对（列表的总和），主要问题在于以下语句：

```
mylist = [] 
```

`while`在循环之前移动它。`mylist` *否则，您每次*通过循环都会创建一个新的 empy 。

此外，您可能希望在完成循环*后打印列表的总和。*

IE，

```
...
mylist = []
while (n < 20):
   a, b = b, a + b
   n = a+b
   if n%2 == 0:
       mylist.append(n)

print(sum(mylist)) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-15T03:30:14.800

在向其附加数字之前，您正在创建一个新的空列表，因此您将永远只有一个元素列表。在开始之前创建一次空的 mylist。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-15T04:40:54.420

由于您似乎已经解决了列表问题，因此我建议您使用列表的替代方法。

尝试以下使用整数对象而不是列表的解决方案：

```
f = 0
n = 1
r = 0

s = 0

while (n < 4000000):
    r = f + n
    f = n
    n = r
    if n % 2 == 0:
        s += n

print(s) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-15T03:35:31.077

正如@Ned 和@Levon 指出的那样。

```
a = 0
b = 1
n = a+b
mylist = []
while (n < 20):
   a, b = b, a + b
   n = a+b
   if n%2 == 0:
       mylist.append(n)
print(sum(mylist)) 
```

# android - Android ndk 问题 socket 和 std 问题

> ID：11489176
> 
> 赞同：0
> 
> 时间：2012-07-15T03:28:57.280
> 
> 标签：android, c++, std, min, android-ndk

我正在尝试为 NDK 编译我的套接字库，但出现以下两个错误：

```
error: 'close' was not declared in this scope 
```

和

```
error: 'min' is not a member of 'std' 
```

我已按照[此处](https://stackoverflow.com/questions/7339229/android-std-and-stl-support)概述的步骤修复后者无济于事，我不确定第一个。我已经导入了以下库：

```
#include <sys/socket.h>
#include <sys/types.h>
#include <netinet/in.h>
#include <arpa/inet.h>
#include <netinet/tcp.h>
#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#include <sys/ioctl.h> 
```

谁能帮我？我正在慢慢失去理智。我修复的每个构建错误似乎都会出现更多错误。我非常接近让这个工作......

另外，我已经阅读了相关的 ndk 文档。我已经尝试将 gnustl_shared 和 stlport_shared 作为我的 Application.mk 文件中的 APP_STL: 值。

仅供参考，您可以在[此处获取源代码](https://github.com/nterry/39DLL-4-Linux)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-15T03:42:59.537

[`std::min`](http://en.cppreference.com/w/cpp/algorithm/min)需要`#include <algorithm>`. [`close`](http://pubs.opengroup.org/onlinepubs/000095399/functions/close.html)需要`#include <unistd.h>`.

当您收到这样的错误时，请检查该函数的文档并查看它需要哪些头文件。

# c# - 打开预先存在的表格

> ID：11489181
> 
> 赞同：0
> 
> 时间：2012-07-15T03:30:03.527
> 
> 标签：c#, forms

我有一个主表格。单击主窗体上的按钮后，我希望打开另一个预先存在的窗体。我已经对其进行了安排，因此在最初运行程序时*不会打开预先存在的表单。*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-15T03:31:07.977

```
Form2 newForm = new Form2();
newForm.Show(); 
```

# linux - 在 ubuntu 上使用人机界面驱动程序

> ID：11489184
> 
> 赞同：0
> 
> 时间：2012-07-15T03:30:33.137
> 
> 标签：linux, beagleboard

我在运行 ubuntu 12.04 的小猎犬板上使用[tmp006evm 。](http://www.ti.com/tool/tmp006evm)根据我在这里发布的问题[http://e2e.ti.com/support/other_analog/temperature_sensors/f/243/p/199962/712785.aspx#712785](http://e2e.ti.com/support/other_analog/temperature_sensors/f/243/p/199962/712785.aspx#712785)，他们不为linux机器提供官方支持。什么会是让 tmp006evm 在我的小猎犬板上工作的最简单方法吗？我认为它是libusb。如果我错了，有人可以纠正我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-15T03:54:44.393

现在您知道它是一个 HID 设备，并且由于它使用的是 National Instruments 的原始 USB 驱动程序，您可以轻松地使用 libusb 访问它，以防您有该板的协议文档。可能正在使用 USB 中断，因此即使没有协议规范也可能很容易。看看[这个](http://lascar-usb-termometer.googlecode.com/svn/trunk/usb_termometer.c)。前段时间我将它用于EL-USB-RT。但是，我不知道任何用于 libusb 和 HID 设备的开箱即用 GUI。

# php - PHP 方法链和字符串

> ID：11489191
> 
> 赞同：1
> 
> 时间：2012-07-15T03:31:19.813
> 
> 标签：php, method-chaining

这是我在方法链接时发现的一个有趣的怪癖，我很难绕过它。我确定有解决方案或其他方式。这很难解释，但我会尽力而为。

例子：

您拥有三个属于类的函数，以及如下 2 个受保护的属性。

```
class Chain {

  protected $_str  = '';
  protected $_part = 0;

  public function __toString() {
    return implode(' ', $this->_str);
  }

  public function AAA () {
    $this->_str[$this->_part] = 'AAA';
    $this->_part++;
    return $this;
  }

  public function BBB () {
    $this->_str[$this->_part] = 'BBB';
    $this->_part++;
    return $this;
  }

  public function wrap ($str) {
    $part = $this->_part - 1;
    $this->_str[$part] = "({$str})";
    return $this;
  }

} 
```

现在，当链接这些方法，特别是使用 wrap 方法时，先前链中的字符串会无意中附加。例子：

```
$chain = new Chain();
$chain->AAA()->BBB()->wrap($chain->AAA());
echo $chain; 
```

您期望字符串的样子是`AAA BBB (AAA)`.

但是，实际返回的是`AAA BBB (AAA BBB AAA)`.

Why is it that `wrap()` takes all the previous methods called within the chain instead of only the method that's actually wrapped by it? What is the best way around this assuming there is one?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-15T03:41:20.470

`$chain->AAA()->BBB()` is doing the first two 'AAA' and 'BBB' - obvious.
Then the `$chain->AAA()` which comes inside `wrap($chain->AAA())` does the 3rd 'AAA'.
and last, the `wrap` method takes all the three and wraps them with `()` and concatenated to the first 'AAA' and 'BBB' using this line: `$this->_str[$part] = "({$str})";`
which resolves to: `AAA BBB (AAA BBB AAA).`

**UPDATE:**
I believe that what you're trying to do, is to avoid the side-effect of returning `this` from methods `AAA()` and `BBB()` - will be achieved with the following changes:

```
<?php
class Chain {

  protected $_str  = '';
  protected $_part = 0;

  public function __toString() {
    return implode(' ', $this->_str);
  }

  public function AAA () {
    $this->_str[$this->_part] = 'AAA';
    $this->_part++;
    return "AAA";
  }

  public function BBB () {
    $this->_str[$this->_part] = 'BBB';
    $this->_part++;
    return "BBB";
  }

  public function wrap ($str) {
    $part = $this->_part - 1;
    $this->_str[$part] = "({$str})";
    return $str;
  }

}

$chain = new Chain();
$chain->AAA();
$chain->BBB();
$chain->wrap($chain->AAA());
echo $chain->__toString();

?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-15T03:43:09.397

I'd call it kind of a 'race condition'. It seems PHP first interprets the `$chain->AAA()->BBB()`.

Then `$chain->_part` is 2 and `$chain->_str` is 'AAA BBB'.

Then, to be able to call wrap, the argument, so `$chain->AAA()` is run.

Then `$chain->_part` is 3 and `$chain->_str` is 'AAA BBB AAA'.

Finally wrap is called, warpping up the 'AAA BBB AAA'. I would seperate the wrap()-call and reset `$chain->_part` back to zero in between.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-15T03:50:17.923

The calling queue is:

```
1\. $chain->AAA() //this is first method not in wrap() method, you have now AAA
2\. $chain->BBB() //then next method, you have now AAA BBB
3\. $chain->AAA() //again AAA() method inside wrap method, so you have AAA BBB AAA 
```

inside the `wrap()` you are putting chain(which is AAA BBB AAA after 3rd step) string in () so you have AAA BBB AAA string at the end of `_part` array.

# android - Android 服务 - 仅在应用未运行时

> ID：11489195
> 
> 赞同：1
> 
> 时间：2012-07-15T03:33:06.837
> 
> 标签：android

我有一个用户在设备之间玩的游戏应用程序。我添加了一个服务，它会间歇性地检查远程玩家是否进行了移动，然后通知本地用户现在轮到他或她了。我在游戏的主要活动中使用此代码根据用户对“间歇性”的偏好启动服务

## 游戏

```
if (Settings.AlarmInterval != 0) {
            Calendar calendar = Calendar.getInstance();
            calendar.setTimeInMillis(System.currentTimeMillis());
            calendar.add(Calendar.MINUTE, (int)(      Settings.AlarmInterval/1000/60));

            Intent myIntent = new Intent(mCtx, WakeCheck.class);

            pendingIntent = PendingIntent.getService(mCtx, 0, myIntent, 0);

            AlarmManager alarmManager = (AlarmManager)mCtx.getSystemService(mCtx.ALARM_SERVICE);
            alarmManager.cancel(pendingIntent); // cancel any previous alarms
            alarmManager.setRepeating(AlarmManager.RTC_WAKEUP,  calendar.getTimeInMillis(), Settings.AlarmInterval, pendingIntent);
        } 
```

这工作得很好。然而，即使本地用户当前正在玩游戏，该服务也会唤醒并检查是否已经下过棋。我希望仅在当前未玩游戏时通知用户。

如何在我的 WakeCheck 服务中检测到游戏正在运行且无需检查远程播放？

## 服务

公共类 WakeCheck 扩展服务 {

```
 private triDbAdapter mDbHelper;
           private static final int CHALLENGE = -2;

@Override
public void onCreate() {
// TODO Auto-generated method stub
//Toast.makeText(this, "MyAlarmService.onCreate()", Toast.LENGTH_LONG).show();
}

@Override
public IBinder onBind(Intent intent) {
// TODO Auto-generated method stub
//Toast.makeText(this, "MyAlarmService.onBind()", Toast.LENGTH_LONG).show();
return null;
}

@Override
public void onDestroy() {
// TODO Auto-generated method stub
super.onDestroy();
mDbHelper.close();
//Toast.makeText(this, "MyAlarmService.onDestroy()", Toast.LENGTH_LONG).show();
}

@Override
public void onStart(Intent intent, int startId) {
    super.onStart(intent, startId);

    Cursor c;
    triDbAdapter mDbHelper = new triDbAdapter(this.getApplicationContext());
    mDbHelper.open();
    ServerCommunication sComm = new ServerCommunication(this.getApplicationContext());
    c = mDbHelper.fetchAllGames();
    Log.d("WAKE","Checking Game Status");

            <snip>
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-15T03:53:40.103

今年有人在 Google I/O 上提出了这个想法……当您的游戏活动进入前台时（例如 onResume()），您将 SharedPreferences 中的布尔值设置为 true 以指示用户正在玩游戏。WakeCheck 将读取此值，如果为真，则无需检查远程播放。当游戏活动进入后台时（例如，onPause()），它将值设置为 false 以与 WakeCheck 通信，它需要检查远程播放。

# actionscript-3 - AS3：TextField 似乎有一个不可见的背景填充？

> ID：11489196
> 
> 赞同：1
> 
> 时间：2012-07-15T03:33:24.783
> 
> 标签：actionscript-3, sprite, textfield

让我们开始吧。

我创建了一个 Sprite“父亲”，添加了另一个 Sprite“孩子”作为它的孩子，并使用“孩子”Sprite 的图形属性绘制了一个填充矩形。然后，我添加另一个 TextField 实例作为“父亲”Sprite 的子对象，并将其文本设置为“Payphone”，以使文本显示在填充的矩形上。

最后我添加了一个事件监听器，监听 MouseEvent.MOUSE_OVER，它跟踪“HIT！”，当我在填充矩形的边缘移动鼠标时，它跟踪“HIT！”；但是当我在填充矩形的中心移动鼠标时，它不会跟踪任何东西。并提到我的鼠标在 TextField 的边界框中，TextField 是否有不可见的背景填充？可以去掉吗？如何？

谢谢！:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-15T04:26:25.397

不幸的是， a`TextField`的命中区域始终是它的边界框，即使您将它的`background`属性设置为`false`。但是，您仍然可以禁用 TextField 拦截父对象的鼠标事件，将其`mouseEnabled`属性设置为`false`. 您还可以通过将父对象的`mouseChildren`属性设置为 来使父对象接收其所有子对象的鼠标事件`false`。

但是，这两种解决方案都会禁用文本字段上的所有鼠标事件，因此如果出于某种原因需要这样做，您将不得不寻找更复杂的解决方案。

# .net - 有没有办法在 .NET 程序集中设置 IsPreRelease？

> ID：11489197
> 
> 赞同：13
> 
> 时间：2012-07-15T03:33:46.997
> 
> 标签：.net, .net-assembly

该类有[一个](http://msdn.microsoft.com/en-us/library/system.diagnostics.fileversioninfo.isprerelease.aspx)[`FileVersionInfo`属性](http://msdn.microsoft.com/en-us/library/system.diagnostics.fileversioninfo.aspx)。[`IsPreRelease`](http://msdn.microsoft.com/en-us/library/system.diagnostics.fileversioninfo.isprerelease.aspx)

有什么方法可以通过 AssemblyInfo 或我的 .NET 程序集项目中的其他内容来让该属性在生成的 .dll 文件中返回 true ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-07-14T15:14:46.620

如果您在项目/解决方案中特别需要它，那么经典路径是创建资源脚本 (.rc) 文件。这是一种朴素、邋遢的格式，但可行。缺点是您需要先获得所有正确的设置，然后再手动维护它们。

如果您可以在构建后手动单击，最简单的路径是使用[ResEdit](http://www.resedit.net/ "水库编辑")（或等效），并将 VS_FF_PRERELEASE 添加到 FileFlags 字段中。

请注意，FileFlagsMask 字段应该已经具有预发布标志或与其他一批标志一起 - 这是必要的，但还不够。

此外，您可以使用 resedit 非常简单地生成一个起始 .rc 文件：

```
resedit -convert my.dll my.rc 
```

如果您需要自动构建过程，那么很可能有一个实用程序可以在命令行上进行有针对性的修改，然后您可以将其作为构建后的步骤添加到构建 .有问题的dll。

祝你好运！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-22T08:01:03.617

我会尝试使用[resourcelib](https://github.com/dblock/resourcelib)。这是一个用于读写资源的库，包括`Version (RT_VERSION)`.

**更新**

我不确定你是否真的看过源代码。但是在其中有`resourcelib`一个名为[VS_FIXEDFILEINFO](https://msdn.microsoft.com/en-us/library/windows/desktop/ms646997(v=vs.85).aspx)的类。在您可以阅读的文档中，这是 flag 的值。`FixedFileInfo.cs``IsPreRelease``dwFileFlags`

# objective-c - 检查复杂 JSON 响应中的空键

> ID：11489201
> 
> 赞同：0
> 
> 时间：2012-07-15T03:35:11.547
> 
> 标签：objective-c, ios, xcode, json

我无法检查我的一把钥匙是否为空。

以下是我正在使用的解析 JSON 响应：

**案例 1（键 'tags' 不为空）**

```
{
height = 480;
pid = "a@bsioihf93u420934";
tags =     (
            {
        attributes =             {
            mood =                 {
                confidence = 42;
                value = happy;
            };
            smiling =                 {
                confidence = 52;
                value = false;
            };
        };
        center =             {
            x = "49.86";
            y = "60.52";
        };
        confirmed = 0;
        width = "50.28";
    }
);
url = "http://abc/efg/hijk/lmnop.jpg";
width = 360;
} 
```

有时响应如下所示：

**案例 2（键“标签”为空）**

```
{
height = 480;
pid = "a@bsioihf93u420934";
tags =     (
);
url = "http://abc/efg/hijk/lmnop.jpg";
width = 360;
} 
```

当我在案例 2 中检查 'tags' 是否为空时，它返回 false ：

```
if ([photo objectForKey:@"tags"] == nil) 
```

`[photo objectForKey:@"tags"]`检查日志中的实际值返回：

```
(
) 
```

我还能如何检查“标签”是否为空？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-15T04:07:30.420

尝试：

```
if ([[photo objectForKey:@"tags"] count] == 0) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-15T04:07:33.637

您究竟如何解析和存储 JSON 文本？看起来您可能正在将其存储到 NSArray/NSDictionary（可能）中？稍微澄清一下它是如何被解析的以及存储它的数据结构会有所帮助。

假设您将它存储在 NSArray/NSDictionary 中，那么您当前检查“标签”是否为空的方式有什么问题/不起作用？

如果

```
if ([photo objectForKey:@"tags"] == nil) 
```

在第一种情况下返回false，在第二种情况下返回true，这意味着在第二种情况下，键“tags”的数据结构中没有值，这意味着“tags”字段为空。

这实际上似乎是最好和最实用的检查方法。

# ruby-on-rails - Rails：接收相对日期作为字符串。如何在日期算术中使用它？

> ID：11489205
> 
> 赞同：0
> 
> 时间：2012-07-15T03:35:31.533
> 
> 标签：ruby-on-rails

我正在编写一个接受命令行参数的 rails 脚本。一个参数是相对日期 - 即 3.months.ago

此选项作为字符串传递给我的脚本。如何使用该字符串作为相对日期？我的直觉是施放它，但不确定是什么...

例如：

```
>> Event.count(:all, :conditions => ["created_at > ?", 3.months.ago])
=> 18883
>>
>> user_date = "3.months.ago"
>> Event.count(:all, :conditions => ["created_at > ?", user_date])
ActiveRecord::StatementInvalid: PGError: ERROR:  invalid input syntax for type timestamp: "3.months.ago" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T03:51:26.983

你最好使用像[Chronic](http://chronic.rubyforge.org/)这样可以处理结构的 gem，至少在英语中，比如“明天”或“三周后”。主要的警告是它似乎假定“本地时间”，这在 Web 应用程序中几乎没有意义，因此您可能需要进行额外的黑客攻击（至少时区计算）以使事情以与您的用户匹配的方式工作期望。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-15T04:20:02.603

只需评估它以获得一个 Time 实例：

```
[1] pry(main)> eval('3.months.ago').class
=> ActiveSupport::TimeWithZone
[2] pry(main)> eval('3.months.ago')
=> Sun, 15 Apr 2012 00:20:25 EDT -04:00
[3] pry(main)> Event.where("created_at > ?", eval('3.months.ago')).to_sql
=> "SELECT `events`.* FROM `events`  WHERE (created_at > '2012-04-15 00:22:46')" 
```

当然，您不希望`eval`用户直接输入任何内容。但这是处理您构建的相对日期的合理方法。

# ios - 动画 UIButton 文本颜色

> ID：11489206
> 
> 赞同：12
> 
> 时间：2012-07-15T03:36:05.090
> 
> 标签：ios, animation, uibutton

有没有办法为 UIButton 的 textColor 属性设置动画？我找到了一些 UILabel 文本颜色动画的解决方案，但还没有看到 UIButton 的任何解决方案。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2016-01-22T13:17:07.240

使用带视图的过渡

```
[UIView transitionWithView:backButton
                          duration:0.5f
                           options:UIViewAnimationOptionTransitionCrossDissolve
                        animations:^{
                            [backButton setTitleColor:[_peacock lighten:d.primary] forState:UIControlStateNormal];
                        }
                        completion:^(BOOL finished){
                        }]; 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-15T04:22:44.663

NSTimer 作为动画工具绝对不是好东西，通常也不应该在需要精度（帧速率）的情况下用于计时。这篇[博](http://corecocoa.wordpress.com/2011/10/04/animatable-text-color-of-uilabel/)文完美地体现了我对如何处理不可动画 UILabel 属性的立场，这些属性应该通过 CA 而不是 NSTimer 发送到渲染服务器。您可以使用或包装 CATextLayer 并`foregroundColor`在标准动画块中为其属性设置动画，而不是 UILabel。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-04-30T13:54:07.600

[这在这里](https://stackoverflow.com/questions/13231947/animate-uibuttons-title-change)得到了很好的回答。它基本上使用这个方便的家伙：

```
[UIView transitionWithView:duration:options:animations:^()completion:^()]; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-15T03:43:30.987

显然你需要使用

```
[UIButton setTitleColor:[UIColor colorWithRed:0.5 green:0.5 blue:0.5 alpha:1.0] forState:UIControlStateNormal]; 
```

至于实际上让它随着时间的推移动画和改变颜色，您需要创建一个 NSTimer 实例并使用 @selector 参数将其指向要运行的特定方法。每次计时器运行时，它都会触发该方法，然后更改 UIButton 的颜色。

```
 [NSTimer scheduledTimerWithTimeInterval:2.0f
         target:self
     selector:@selector(updateCounter:)
     userInfo:nil
     repeats:YES]; 
```

另请查看： [http ://servin.com/iphone/iPhone-Timers-and-Animated-Views.html](http://servin.com/iphone/iPhone-Timers-and-Animated-Views.html)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-09-04T16:57:13.243

您可以使用两个放置在同一位置的不同颜色的按钮（或标签等）：

```
button1 = UIButton(frame: frame)
button2 = UIButton(frame: frame) // same frame

button1.setTitleColor(UIColor.redColor(), forState: .Normal) // red
button2.setTitleColor(UIColor.blueColor(), forState: .Normal) // blue 
```

之后，您可以通过 button2 的过渡动画达到颜色动画：

```
UIView.animateKeyframesWithDuration(
    1.0, delay: 0, options: [.Autoreverse, .Repeat],
    animations: {
        UIView.addKeyframeWithRelativeStartTime(0.0, relativeDuration: 0.5, animations: {
            self.button2.alpha = 1.0
        })

        UIView.addKeyframeWithRelativeStartTime(0.5, relativeDuration: 0.5, animations: {
            self.button2.alpha = 0.0
        })
    }, completion: nil) 
```

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2012-07-15T03:48:14.883

这不是真正的动画，但它会工作。

使用您想要为颜色设置动画的任何频率创建一个计时器。

让该计时器在`changeColorOnButton`每次触发时调用一个方法。

```
[NSTimer scheduledTimerWithTimeInterval:1.0f target:self selector:@selector(changeColorOnButton:) userInfo:nil repeats:YES]; 
```

创建一个颜色数组，`colorsArray`（或者提前安排颜色，或者将一堆颜色添加到数组中并将它们打乱以随机化。创建一个 int, `intForColorInArray`.

在 changeColorOnButton 方法中，执行以下操作：

```
- (void) changeColorOnButton:(UIButton *) button {

     UIColor *nextColor = [colorsArray objectAtIndex:intForColorArray];
     [button.titleLabel.setTextColor:nextColor];
     intForColorArray = (intForColorArray +1) % [colorsArray count];
} 
```

# mysql - 另一个组中的 SQL 变量组

> ID：11489214
> 
> 赞同：1
> 
> 时间：2012-07-15T03:38:12.610
> 
> 标签：mysql, sql, dataset, sas

我正在寻找一种方法来匹配更大的其他结果列表中的一组结果，并计算匹配的数量。例如：

我有一组结果

```
Result 1
sub1
sub2
sub3

Result 2
sub1
sub2
sub3 
```

我需要找出上述任何一组结果在下面更大的结果数据集中出现了多少次。

```
Result 1
sub1
sub2
sub3

Result 2
sub1
sub3
sub4

Result 2
sub1
sub2
sub3

Result 2
sub1
sub2
sub3
sub4 
```

在上面的示例中，第一组的结果 1 将匹配第二组中的第一个结果，结果 2 将匹配第二组中的最后 2 个结果，因为它们包含第一组的所有子结果。因此，结果 1 将显示频率计数为 1，而结果 2 将显示频率计数为 2。

我对 SQL 比较陌生，但想找到解决上述问题的方法。

昨天的样本数据：

```
Group    Ad   Date
A        1    7/14
A        2    7/14
A        3    7/14
B        1    7/14
B        2    7/14
B        3    7/14
B        4    7/14
C        1    7/14
D        1    7/14
D        3    7/14
D        4    7/14 
```

我需要找出过去一周 A 组广告 1-3 投放了多少次，但假设周一 A 组只投放了广告 1 和 3。我不希望返回此结果。星期二 A 组投放了广告 1、2、3、4。我想知道这个结果，星期三 A 组投放了广告 1、2、3，这又是我想知道的。

```
Group    Ad   Date
A        1    7/09
A        3    7/09
A        1    7/10
A        2    7/10
A        3    7/10
A        4    7/10
A        1    7/14
A        2    7/14
A        3    7/14 
```

所以，给出这个例子，我希望看到这个：

```
Group    Ad   Date
A        1    7/10
A        2    7/10
A        3    7/10
A        1    7/14
A        2    7/14
A        3    7/14 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-15T10:40:33.427

这有点混乱，但这是我能够想出的：

```
SELECT a.*, b.*
FROM 
(
    SELECT 'A' AS grp, 1 AS ad UNION ALL
    SELECT 'A', 2 UNION ALL
    SELECT 'A', 3
) a 
CROSS JOIN
(
    SELECT DISTINCT date
    FROM tbl
    WHERE date >= CURDATE() - INTERVAL 1 WEEK
) b
LEFT JOIN tbl c ON a.grp = c.grp
               AND a.ad = c.ad
               AND b.date = c.date
INNER JOIN
(
    SELECT a.date
    FROM 
    (
        SELECT 'A' AS grp, 1 AS ad UNION ALL
        SELECT 'A', 2 UNION ALL
        SELECT 'A', 3
    ) a 
    CROSS JOIN
    (
        SELECT DISTINCT date
        FROM tbl
        WHERE date >= CURDATE() - INTERVAL 1 WEEK
    ) b
    LEFT JOIN tbl c ON a.grp = c.grp
                   AND a.ad = c.ad
                   AND b.date = c.date
    GROUP BY a.date
    HAVING COUNT(1) = COUNT(c.grp)
) d ON b.date = d.date 
```

我有点太累了，无法写解释，但也许明天我醒来时，我会继续我的答案。

现在，您可以查看**[SQLFiddle 示例](http://sqlfiddle.com/#!2/de529/11/1)**。请注意，我插入的值比您的示例数据中的值多四个，以展示当一组每天出现多次时查询是如何工作的。

^ 您可以在第二个执行的查询中看到，您还可以通过过滤集合每天出现的频率`HAVING COUNT(1) >= 2`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-15T17:53:16.240

在 SAS SQL 中：

```
 proc sql;
    CREATE TABLE tbl (
      grp CHAR(1),
      ad INT,
      date DATE
    );

    INSERT INTO tbl 
    values('A', 1, '09jul2012'd) 
    values('A', 3, '09jul2012'd) 
    values('A', 1, '10jul2012'd) 
    values('A', 2, '10jul2012'd)
    values('A', 3, '10jul2012'd) 
    values('A', 4, '10jul2012'd) 
    values('A', 1, '14jul2012'd) 
    values('A', 2, '14jul2012'd) 
    values('A', 3, '14jul2012'd) 
    values('A', 1, '14jul2012'd) 
    values('A', 2, '14jul2012'd) 
    values('A', 3, '14jul2012'd) 
    ;
    quit;

    proc sql noprint; /* the set and upper date I'm interested in */
    CREATE TABLE my_set (
      grp CHAR(1),
      ad INT,
      date DATE
    );

    INSERT INTO my_set (grp, ad)
    VALUES ('A', 1)
    VALUES ('A', 2)
    VALUES ('A', 3)
    ;
    update my_set set date=today()-1;
    select count(*) into :my_set_size from my_set
    ;
    quit;

    proc sql;
    create table potential_dates as
     select t.date, s.grp, s.ad, count(*) as ad_occurrence
    from my_set s
     inner join tbl t 
        on s.grp = t.grp and s.ad = t.ad and s.date >= t.date
     group by t.date, s.grp, s.ad
    ;
    quit;

    proc sql;
        create table result as
            select a.* from potential_dates a
             inner join (select date from potential_dates
                        group by date
                        having count(*) = &my_set_size ) d
            on a.date = d.date
    ;
    quit;

 date     grp        ad  ad_occurrence
 10JUL12  A           1              1
 10JUL12  A           2              1
 10JUL12  A           3              1
 14JUL12  A           1              2
 14JUL12  A           2              2
 14JUL12  A           3              2 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-15T22:30:22.980

也许你可以排序和转置：

```
proc sort data=mydata1;
  by group date;
run;

proc transpose data=mydata1 out=mydata2;
  by group date;
  var ad;
run;

data mydata3;
  set mydata2;
  if not missing(col1,col2,col3);
run; 
```

每个日期您将有一行。如果需要，您可以将其合并回原始数据：

```
data mydata4;
  merge mydata1 mydata3;
  by group date;
run; 
```

# mysql - *Hot Alter* MySQL 引擎使用主/从方法

> ID：11489215
> 
> 赞同：0
> 
> 时间：2012-07-15T03:38:12.923
> 
> 标签：mysql, sql, database

我有一个大约 19 GB 的 MySQL 数据库，里面有大约 30 个表。最大的表约为 16 GB，有 3,800,000 行。此 MySQL 实例在 128 GB SSD 驱动器上运行。

MySQL 版本是 5.5。所有 30 个表格都是 MyISAM 格式。我正在考虑将它们完全更改为 InnoDB。另一方面，我不想遭受任何数据库停机时间的困扰。

我从 Facebook 的工程师那里听说过这个很棒的 PHP 脚本。它被称为[**Online Schema Change**](https://www.facebook.com/notes/mysql-at-facebook/online-schema-change-for-mysql/430801045932)。它使用主/从方法来实现所需的**热更改**效果。

现在我正在认真考虑在我的（唯一的）SSD 驱动器中设置主/从结构并运行 Facebook 脚本来执行**热更改引擎**任务。

但是，在其文档中，它几乎只讨论了最典型的场景，即在 InnoDB 表中添加列。而在我的情况下，我的场景完全不同，它将 30 个表的引擎从 MyISAM 更改为 InnoDB。

我的问题是，这种 Facebook 方法是否适用于我的情况？如果没有，还有其他选择吗？谢谢。

# jquery - 为什么验证不会阻止提交第二个输入字段的表单？

> ID：11489217
> 
> 赞同：0
> 
> 时间：2012-07-15T03:38:35.637
> 
> 标签：jquery, validation

我有一个表单，当提交时在页面的不同部分生成输出。所有客户端。我想在尝试生成输出之前验证表单：

```
<html>
<head>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
    <script type="text/javascript" src="http://jzaefferer.github.com/jquery-validation/jquery.validate.js"></script>
</head>
<body>
    <script language="javascript">
        $(document).ready(function() {
            $( "#processForm" ).validate({
                submitHandler: function(form) {
                    $( "#output" ).empty().append( $("#numberOne").val() );
                }
            });
        });
    </script>
    <form id="processForm">
        <p><input type="text" id="numberOne" value="37" class="required number"/></p>
        <p><input type="text" id="numberTwo" value="63" class="required number"/></p>
        <!--<p><input type="submit" value="Submit"/></p>-->
        <p><button type="submit">Submit</button></p>
    </form>
    <div id="output"></div>
</body>
</html> 
```

验证`numberOne`工作正常并阻止我的代码被执行，但`numberTwo`它似乎`submitHandler`仍然允许运行。重现步骤：

1.  打开，按提交，在提交按钮下方打印通知 37
2.  在第一个字段中输入“asdf”，按提交按钮，通知 37 仍然在提交按钮下方
3.  在第一个字段中输入“5”，在第二个字段中输入“asdf”，然后按提交按钮。“5”将显示在“提交”按钮下方，即使表单整体无效。

错误消息确实出现了，但在按下“提交”时会被清除。我错过了什么？

我尝试了`input`和`button`标签。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-15T04:42:20.670

尝试在输入上使用名称属性。通常，如果您正在处理或发送数据，则需要添加名称属性。因此，您的输入将如下所示：

```
<input type="text" id="numberOne" name="numberOne" value="37" class="required number"/>
<input type="text" id="numberTwo" name="numberTwo" value="63" class="required number"/> 
```

我创建了一个小提琴，因此您可以确认这是您正在寻找的功能。

[http://jsfiddle.net/tokersey/FyjWs/](http://jsfiddle.net/tokersey/FyjWs/)

# c - Codeblocks IDE C 编程 - 没有库？

> ID：11489218
> 
> 赞同：1
> 
> 时间：2012-07-15T03:39:09.723
> 
> 标签：c, api, dll, codeblocks

我正在尝试在 CodeBlocks IDE（在 Windows 上）中创建一个 C 程序，而我需要的是 library 。当我尝试构建和运行时，这一行错误：

```
#include <sys/times.h> 
```

我该怎么办？那是一个Unix库吗？我可以下载它并以某种方式将其添加到我的 CodeBlocks 环境中吗？我的意思是，已经在那里了。

感谢您的任何帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-15T03:46:46.127

从Code::Blocks的`Settings`> `Compiler and Debugger`>中删除 -ansi 编译标志。`Compiler Options`如果这没有帮助，`<sys/times.h>`则在 Windows 下不可用。

**编辑**：`sys/times.h`是[POSIX](http://en.wikipedia.org/wiki/C_POSIX_library)库的一部分。POSIX 标头在 MinGW 下不可用，需要 Cygwin。[time.h](http://www.csse.uwa.edu.au/programming/ansic-library.html)是标准的 ANSI 标头。如果你想继续`sys/times.h`在兼容 POSIX 的系统上使用，你可以做些什么来确保可移植性是

```
#ifdef __WIN32__
# include <time.h>
#else
# include <sys/times.h>
#endif 
```

参考：[time.h](http://www.cplusplus.com/reference/clibrary/ctime/)

# objective-c - MagicalRecord saveInBackgroundWithBlock 提取返回故障对象

> ID：11489222
> 
> 赞同：4
> 
> 时间：2012-07-15T03:40:04.767
> 
> 标签：objective-c, ios, core-data, nsmanagedobjectcontext, magicalrecord

我目前正在开发一个严重依赖 CoreData 并不断保存信息的 iOS 应用程序。

在 MagicalRecord 的帮助下，我使用 saveInBackgroundWithBlock 函数设置了后台保存。

我遇到的问题是，即使我将 NSFetchRequest 设置为“setReturnsObjectsAsFaults：NO”，在此块中获取的任何内容都始终返回错误对象。

我通过使用“MR_defaultContext”从主线程获取运行了相同的测试，这些对象也作为故障返回。

不让这些对象作为故障对象返回的**唯一方法是使用“MR_rootSavingContext”从存储中获取对象。**

奇怪的是，我设置了“setReturnsObjectsAsFaults：NO”并且对象仍然作为故障对象返回。

我需要它们无故障的原因是我确切地知道需要更新哪些数据，并且在每个对象上触发故障都会对性能造成巨大影响，而批处理这些故障会更快。

关于我如何设置获取请求的一些示例代码如下所示：

```
 [MagicalRecord saveInBackgroundWithBlock:^(NSManagedObjectContext *localContext) {

        UserData *newUser = [UserData MR_findFirstByAttribute:@"index" withValue:[NSNumber numberWithInteger:currentUserIndex] inContext:localContext];

        NSFetchRequest *documentsRequest = [DocumentData MR_requestAllWhere:@"user" isEqualTo:newUser inContext:localContext];

        [documentsRequest setReturnsObjectsAsFaults:NO];

        NSArray *fetchedDocuments = [localContext executeFetchRequest:documentsRequest error:nil];

// Fetched data is manipulated here, but the above fetchedDocuments are all faulted, and as a result really slow to update here

}     completion:^{

        NSLog(@"Finished saving documents");

    }
     ]; 
```

**更新：**

[这是概述问题的示例项目的链接。](https://www.dropbox.com/s/79flcgkdang1y7u/CoreDataProblems.zip)

# php - 如何在 jquery ajax 调用后渲染 smarty

> ID：11489223
> 
> 赞同：0
> 
> 时间：2012-07-15T03:40:26.900
> 
> 标签：php, jquery, ajax, smarty

我正在使用 openinviter 从 gmail 中检索联系人，效果很好。但是，当我使用 jquery 和 ajax 调用来提交检索联系人的表单时 smarty 不会呈现。似乎 smarty 只呈现我不想做的页面重新加载。所以，我的问题是如何在 jquery ajax 调用之后进行 smarty 渲染？

jquery ajax 调用

```
$(document).ready(function(){
 $('input[name="Submit"]').click(function() { 
 var query = $('#frmContact').serialize();
  $.ajax({type: "POST",url: "google_friends.php",data: query,cache: false,success:function (html) $('#errid').html('<span style="font-size:12px; font-family:Arial, Helvetica, sans-serif; color:#FF0000;">'+html+'</span>').show();}});        
    return false;});});
</script>

    <div>
    <!--- Smarty code that needs to render after jquery ajax call -->
    {if count($contacts) == 0 }
     <span id="errid" >{$msg}</span>
       <p>
     <!-- Form that is used by jquery ajax -->

    <form class="Form StaticForm" id="frmContact" action="" name="frmContact" method="post">
    <input type="hidden" name="provider_box" value="gmail" />
                <ul>
                    <li>
                       <input type="text" name="email_box" value="email" onBlur="if      (this.value=='') this.value='email';" onFocus="if(this.value=='email') this.value='';" />
                    </li>
                    <li>
                       <input type="password" name="password_box" value="password" onBlur="if(this.value=='') this.value='password';" onFocus="if(this.value=='password') this.value='';"  />
                    </li>

                    <li class="noBorderTop"><input class="Button WhiteButton Button18 trueB" type="button" value="Submit" name="Submit" />
                        <label>
                            &nbsp;</label>
                    </li>
                </ul>
                </form>       
    </p>
         <!-- smarty code that needs to render after ajax call -->
         {else}
         <span id="errid" ></span>
          <p>
         <form class="Form StaticForm2" action="" name="invtfrm" method="post">
               <ul>
                    <li style="float:left;margin-left:120px;">                          
                    <input type="checkbox" name="checkall" onClick="return doCheckAll();" style="vertical-align:0" />&nbsp;Select All

                    </li>
                    <li style="float:left;"><div class="box-dividerCenter1 gradient"></div></li>  
             <!-- smarty code that needs to render after ajax call -->   
             {foreach from=$contacts key=fkey item=fval}

                <li style="float:left;margin-left:120px;">                          
                    <input type="checkbox" name="email[]" value="{$fkey}"  style="vertical-align:0"/>&nbsp; 
            <!-- smarty code that needs to render after ajax call -->
                {$fval}&nbsp;&nbsp;&nbsp;&nbsp;{$fkey}

                    </li>   
                       <li style="float:left;"><div class="box-dividerCenter1 gradient"></div></li>     
           {/foreach}
            <li class="noBorderTop"><a class="Button WhiteButton Button18" href="#" id="sbmtbtn" ><strong>Invite</strong><span></span></a></li>
    {/if}
    </ul>
    </form> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-15T11:47:42.763

您的假设存在逻辑错误。

Smarty*仅*在页面实际加载（或重新加载）时使用，而*不是*在响应使用 jQuery（或其他 js 框架）的 ajax 请求时使用。基本上，该变量`$contacts`只会在页面加载时被检查，而*不是*因为您的 javascript 代码中的一些响应事件。

使用 ajax 技术的主要原因之一实际上是避免重新加载页面。

两种更好的方法：

1.  使用您的 javascript 更改您的 html 容器的内容。.ajaxComplete()的[jquery 手册部分](http://api.jquery.com/ajaxComplete/)有一些关于如何执行此操作的示例。只需声明一些空的 div 容器并用您想要的数据填充它们。
2.  您还可以通过 ajax ( [`fetch()`-method](http://www.smarty.net/docs/en/api.fetch.tpl) ) 获取整个 smarty-template 并返回它。这样，您将在程序逻辑和布局之间实现更好的分离。

# php - getJSON并发覆盖变量？

> ID：11489230
> 
> 赞同：0
> 
> 时间：2012-07-15T03:41:58.583
> 
> 标签：php, jquery, concurrency, getjson

我的javascript页面遇到了很多麻烦。

基本上，我有一个从 php 页面获取数据的 html/javascript 页面。我多次这样做，将它们推入数组，然后显示数组。

这是代码的概要

```
 var spawnedNewspaper = [];
    var articlesToSpawn = null;

    $("#generate").click(function() {
        spawnNewspaper();
    });

    function spawnNewspaper(){

        if(itemsToSpawn==null){
            articlesToSpawn = 4;
            spawnedNewspaper = [];
        }

        if(itemsToSpawn > spawnedNewspaper.length)
            spawnAnItem();

        if(itemsToSpawn == spawnedNewspaper.length){
            itemsToSpawn = null;
            // ... display the results
        }
    }

    function spawnAnItem(nationalDexID, level, generateRandomBerry, generateRandomTMItem, generateRandomItem, knowsRandomTM, imageURL){
        $.getJSON("...url.../spawner_json.php?jsoncallback=?" , 
            {
                dataitename: data
            }
            , spawnAnArticlePart2
        );    
    }

    function  spawnAnArticlePart2(data){
        //returning from spawnAnItem callback
        p = ArticleObject(data.heading, data.date, data.author)

        spawnedNewspaper.push(p);
        spawnNewspaper();
    }

    function ArticleObject(heading, date, author){
        this.heading = heading;
        this.date = date;
        this.author = author;
        return this;
    } 
```

因此，完成后，它会以正确的文章数量显示我的数组，但是当我知道它每次都生成独特的东西时，每篇文章都是完全相同的。

我的想法是存在并发问题并且事情被覆盖（我使用了 push() 所以这很奇怪），或者我的 ArticleObject 有问题。

有想法该怎么解决这个吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T04:06:56.443

更改此行：

```
p = ArticleObject(data.heading, data.date, data.author) 
```

要使用`new`运算符：

```
p = new ArticleObject(data.heading, data.date, data.author) 
```

然后在你的`ArticleObject()`函数中你不需要说`return this;`，因为`this`当函数被调用时会自动返回`new`。

发生的情况是，当您使用`new`JavaScript 调用该函数时，会创建一个新对象，该对象继承自`ArticleObject.prototype`该函数并在该函数内`this`指向该新实例。当您在没有`new`JavaScript 的情况下调用该函数时，它会设置`this`为，`window`因此每次您的函数运行时它只会更新`window`.

有关使用的更多信息，`new`请阅读[MDN 对此的评论](https://developer.mozilla.org/en/JavaScript/Reference/Operators/new)。

# ios - 如何使用参数执行选择器？

> ID：11489232
> 
> 赞同：1
> 
> 时间：2012-07-15T03:42:33.403
> 
> 标签：ios, objective-c, xcode, selector

您如何使用参数执行选择器？这是我的代码：

```
SEL methods=NSSelectorFromString([arrayWithMethods objectAtIndex:i]);
[self performSelector:methods withObject:self afterDelay:MAN_SPEED*i]; 
```

如果我的选择器方法有一个参数，我该如何指定它？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-15T03:54:44.007

零参数选择器的字符串如下所示：

```
arrayWithMethods = [NSArray arrayWithObjects:@"myMethod", ... nil] 
```

如果它有一个参数，请通过在方法名称后添加一个冒号来指定：

```
arrayWithMethods = [NSArray arrayWithObjects:@"myMethod:", ... nil] 
```

现在您的 myMethod 将通过“self”（因为这就是您作为“with 对象”传递的内容。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-15T03:44:11.637

如果它只有一个参数，您可以将其与参数一起传递`withObject:`

如果它有超过 1 个参数，您将需要一个包装器对象来使用相同的参数传递它。

# c# - 在调试 mvc3 视图时获取当前生成的 html

> ID：11489234
> 
> 赞同：3
> 
> 时间：2012-07-15T03:42:48.423
> 
> 标签：c#, asp.net-mvc-3, debugging, razor, visual-studio-debugging

在逐步生成视图时。有没有办法查看到那时已经生成的 HTML？我试过查看本地变量列表，但找不到它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-20T03:58:37.013

您可以查看 ViewContext.Writer。尝试添加...

```
((System.Web.Mvc.WebViewPage)(this)).ViewContext.Writer 
```

到您的监视窗口。

# android - OpenGL ES 2.0 纹理显示为黑色

> ID：11489238
> 
> 赞同：0
> 
> 时间：2012-07-15T03:43:25.480
> 
> 标签：android, opengl-es, opengl-es-2.0, textures

我在 SO 上看到了一些这样的问题，但到目前为止没有任何帮助。我制作了 GLTriangle 和 GLRectangle 类。我可以用颜色画出这两个形状没问题。我正在尝试在其中实现纹理，但无法使其正常工作（和调试）。

我将尝试发布我目前所拥有的相关代码，如果您需要查看更多内容，请告诉我。

编辑：好的，所以在用 texcoord 处理程序修复错误之后，我仍然得到一个黑色方块。glGetError 唯一一次报告任何内容是在调用 GLES20.glEnable(GLES20.GL_TEXTURE_2D); 之后。

GLRectangle相关代码：

```
@Override
public void onSurfaceCreated() {
    ByteBuffer vertexByteBuffer = ByteBuffer.allocateDirect(vertices.length * 4);
    vertexByteBuffer.order(ByteOrder.nativeOrder());
    vertexBuffer = vertexByteBuffer.asFloatBuffer();
    vertexBuffer.put(vertices);
    vertexBuffer.position(0);

    vertexShader = loadShader(GLES20.GL_VERTEX_SHADER, vertexShaderCode);
    fragmentShader = loadShader(GLES20.GL_FRAGMENT_SHADER, fragmentShaderCode);

    mProgram = createAndLinkProgram(VertexShaderHandle(), FragmentShaderHandle(), new String[] { "uMVPMatrix", "vPosition", "a_TexCoordinate" });
    muMVPMatrixHandle = GLES20.glGetUniformLocation(mProgram, "uMVPMatrix");
    maPositionHandle = GLES20.glGetAttribLocation(mProgram, "vPosition");
    loadTexture(context, imageId);
    ByteBuffer ibb = ByteBuffer.allocateDirect(indices.length * 2);
ibb.order(ByteOrder.nativeOrder());
indexBuffer = ibb.asShortBuffer();
indexBuffer.put(indices);
indexBuffer.position(0);

ByteBuffer tbb = ByteBuffer.allocateDirect(texCoords.length * 4);
tbb.order(ByteOrder.nativeOrder());
textureCoordBuffer = tbb.asFloatBuffer();
textureCoordBuffer.put(texCoords).position(0);
} 
```

在 onDrawFrame 中：

```
GLES20.glUseProgram(mProgram);
GLES20.glVertexAttribPointer(maPositionHandle, 3, GLES20.GL_FLOAT, false, 12, vertexBuffer);
GLES20.glEnableVertexAttribArray(maPositionHandle);
Matrix.multiplyMM(mMVPMatrix, 0, projMatrix, 0, mvMatrix, 0);
GLES20.glUniformMatrix4fv(muMVPMatrixHandle, 1, false, mMVPMatrix, 0);
mTextureUniformHandle = GLES20.glGetUniformLocation(mProgram, "u_Texture");
        mTextureCoordinateHandle = GLES20.glGetAttribLocation(mProgram, "a_TexCoordinate");

GLES20.glActiveTexture(GLES20.GL_TEXTURE0);
GLES20.glBindTexture(GLES20.GL_TEXTURE_2D, mTextureDataHandle);
GLES20.glUniform1i(mTextureUniformHandle, 0);
GLES20.glDrawElements(GLES20.GL_TRIANGLES, indices.length, GLES20.GL_UNSIGNED_SHORT, indexBuffer); 
```

我知道，或者至少我相当确定正在加载位图，因为我在加载它时返回了 int 句柄（如果 int 为 0，它将导致运行时错误）。

我猜它与纹理坐标有关。

这是我的 tex 坐标：

```
texCoords = new float[] { 
    0, 0,
    0, 1,
    1, 1,
    1, 0
}; 
```

以防万一它与纹理加载器有关，这里是：

```
int[] textureHandle  = new int[1];

            GLES20.glGenTextures(1, textureHandle, 0);

            if (textureHandle[0] != 0) {
                final BitmapFactory.Options options = new BitmapFactory.Options();
                options.inScaled = false;

                final Bitmap bitmap = BitmapFactory.decodeResource(view.getContext().getResources(), resourceId, options);

                GLES20.glBindTexture(GLES20.GL_TEXTURE_2D, textureHandle[0]);                   

                GLES20.glTexParameteri(GLES20.GL_TEXTURE_2D, GLES20.GL_TEXTURE_MIN_FILTER, GLES20.GL_NEAREST);
                GLES20.glTexParameteri(GLES20.GL_TEXTURE_2D, GLES20.GL_TEXTURE_MAG_FILTER, GLES20.GL_LINEAR);

                GLUtils.texImage2D(GLES20.GL_TEXTURE_2D, 0, bitmap, 0);

                bitmap.recycle();

            }

            if (textureHandle[0] == 0) {
                throw new RuntimeException("Unable to load texture!");
            }
            mTextureDataHandle = textureHandle[0]; 
```

编辑：忘记添加我的着色器，我现在只是通过代码设置字符串：

```
setVertexShader( 
                "uniform mat4 uMVPMatrix;   \n" +
                "uniform mat4 MVMatrix;     \n" +
                "attribute vec4 vPosition;  \n" +
                "attribute vec2 a_TexCoordinate;    \n" +                   
                "varying vec2 v_TexCoordinate;  \n" +

                "void main() {      \n" +

                "v_TexCoordinate = a_TexCoordinate; \n" +
                "gl_Position = uMVPMatrix * vPosition;  \n" +
                "}  \n");                   

        setFragmentShader("precision mediump float;  \n" +
                "uniform sampler2D u_Texture;   \n" +                   
                "varying vec2 v_TexCoordinate;  \n" +
                "void main() {              \n" +
                "gl_FragColor = texture2D(u_Texture, v_TexCoordinate); \n" +
                "}                         \n"); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-15T05:30:11.887

```
mTextureCoordinateHandle = GLES20.glGetUniformLocation(mProgram, "u_Texture");
mTextureUniformHandle = GLES20.glGetAttribLocation(mProgram, "a_TexCoordinate");

GLES20.glActiveTexture(GLES20.GL_TEXTURE0);
GLES20.glBindTexture(GLES20.GL_TEXTURE_2D, mTextureDataHandle); 
```

这都是落后的。您正在获取 texcoord 位置并将其设置为制服，并获取制服位置并将其设置为 texcoord。另外，您甚至没有对 texcoord 属性做任何事情。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T18:24:26.593

您可能不会首先获得图像数据。检查您正在使用 png/jpeg 文件填充纹理的代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-09-27T17:30:10.740

用于激活透明度添加

```
onSurfaceCreated(GL10 unused, EGLConfig config)
    {
...        // Set alpha blend on
        GLES20.glEnable(GLES20.GL_BLEND);
        GLES20.glBlendFunc(GLES20.GL_ONE, GLES20.GL_ONE_MINUS_SRC_ALPHA);
... 
```

# c# - 'new' 正在创建一个空数组，而不是一个空值类数组

> ID：11489242
> 
> 赞同：0
> 
> 时间：2012-07-15T03:44:37.830
> 
> 标签：c#, arrays, class, struct, null

我有一堂课

```
namespace MyClassNameSpace {
   public struct a {
       public float Time;
       public float High;
   }
   public class SoC {
       public string Name;
       public a[] Stock =new a[9];
   } 
```

}

在 Form1 中，我创建了一个 SoC 数组：

```
public static SoC[] b = new SoC[5];
private void Form1_KeyUp(object sender, KeyEventArgs e) {
    b[1].Name = "ABC"
} 
```

问题是这`b`是一个空数组，而不是一个`empty`（归零）SoC 数组......我该如何改变它？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-15T03:47:00.250

*您正在创建一个引用（类）*类型的引用变量数组。该声明，

```
public static SoC[] b = new SoC[5]; 
```

创建**5 个**初始值为 null 的引用变量。

这样您就可以创建对象：

```
for(int i=0;i<b.Length;i++) {
    b[i]=new SoC();
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-15T03:51:52.227

为数组分配空间实际上并不创建对象。您需要循环并调用每个项目的构造函数。

# emacs - 无法在区域模式下的 emacs shell 命令中运行 ruby

> ID：11489245
> 
> 赞同：3
> 
> 时间：2012-07-15T03:45:01.340
> 
> 标签：emacs, rbenv

我曾经`M-|`在 emacs 上以区域模式进入 shell 命令，然后只需键入

```
ruby -e "puts 'ok'" 
```

并失败了。

错误说 ~/.rbenv/shims/ruby: line4: exec: rbenv: not found。

我使用 rbenv 来设置 ruby​​。

我已将以下内容添加到我的 emacs 初始化文件中，但仍然无法正常工作。

```
(push "~/.rbenv/shims" exec-path)
(push "~/.rbenv/bin" exec-path)
(push "~/.rbenv/libexec" exec-path) 
```

有什么帮助吗？谢谢。

~/.rbenv/shims/ruby 的第 4 行是

```
exec rbenv exec "${0##*/}" "$@" 
```

并且命令“which rbenv”返回

```
/home/ry/.rbenv/bin/rbenv 
```

并且命令“ll `which rbenv`”返回

```
lrwxrwxrwx 1 ry ry 16  2月 29 00:26 /home/ry/.rbenv/bin/rbenv -> ../libexec/rbenv* 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T07:53:31.790

它看起来像您的`PATH`并且`exec-path`配置不正确。我编写了一个 Emacs 包来将 Emacs 与 rbenv 集成。这应该添加缺少的配置：http: [//blog.senny.ch/blog/2013/02/11/use-the-right-ruby-with-emacs-and-rbenv/](http://blog.senny.ch/blog/2013/02/11/use-the-right-ruby-with-emacs-and-rbenv/)

# jquery - Jquery 在不在函数中时可以工作吗？

> ID：11489248
> 
> 赞同：1
> 
> 时间：2012-07-15T03:46:29.507
> 
> 标签：jquery

我现在有点困惑，如果我把这个 jquery 放在我的网页上，一切正常。

```
<script>
    $.get("/Recipe/SearchResult/", function (response) {
        $("#SearchResults").html(response);
    }); 
</script> 
```

但是，我试图让这个在按钮上运行。所以我把它放在这样的函数中：

```
<script>    
    function Search() {
        $.get("/Recipe/SearchResult/", function (response) {
            $("#SearchResults").html(response);
        });
    };     
</script> 
```

使用萤火虫，如果我在函数 Search{} { 上打断，当我点击按钮时，它会在该行打断。但是，如果我跨过去，它似乎不会运行 jquery。它只是转到下一行的函数末尾，没有任何反应。

编辑：这是有按钮的行：

```
<button onclick="Search"  type="submit" class="btn btn-success"><i class="icon-search"></i> Search</button> 
```

有没有人有任何想法？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-15T04:11:36.473

这是因为您的按钮类型是提交，所以在单击按钮后，表单将返回并重新加载页面。尝试将其更改为 type="button"

```
<button onclick="Search"  type="button" class="btn btn-success"><i class="icon-search"></i> Search</button> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-15T03:57:46.690

试试这个：

```
$('.btn-success').click(function(e){
   e.preventDefault();
   $.get("/Recipe/SearchResult/", function(response) {
      $("#SearchResults").html(response);
   });   
}) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-15T03:58:03.610

在您的调试器中，您必须在 line 上放置一个断点`$("#SearchResults").html(response);`。您不能直接单步执行它，因为稍后会在 ajax 请求完成时调用回调函数。ajax 调用的异步特性意味着您不能只是按顺序单步执行它。

即使回调函数看起来是顺序的，它也不是顺序执行的。该`Search()`函数完成，然后稍后调用回调。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-15T04:00:07.947

首先你的内联`onclick`属性：

```
onclick="Search" 
```

...没有调用该`Search`函数。你必须放括号：

```
onclick="Search()" 
```

> *“使用萤火虫，如果我在函数 Search{} { 上打断，当我点击按钮时，它会在该行打断。但是，如果我跨过，它似乎不会运行 jquery。它只是转到下一行的函数结束，没有任何反应。”*

该`$.get()`函数发出一个*异步*Ajax 请求，因此您提供的回调函数不应立即运行，一旦 Ajax 响应发生，它将由 jQuery 稍后调用。在此之前，无论 Ajax 响应返回多快，函数的其余部分都`Search()`将完成（尽管在您的情况下，函数中没有进一步的语句）。这很正常。尝试在该回调函数中放置一个断点，和/或`console.log()`在其中使用一条语句。

# php - PHP：捕获致命错误（在非对象上调用成员函数）

> ID：11489255
> 
> 赞同：15
> 
> 时间：2012-07-15T03:48:07.077
> 
> 标签：php, error-handling

有时，我的脚本无法读取服务器的输出，并出现以下错误：

`PHP Fatal error: Call to a member function somefun() on a non-object`

这不是我无法解决的问题，但这会导致我的脚本崩溃。有没有办法可以创建一个在发生此特定错误时运行的函数？我认为进行 try-catch 或类似操作并不实用，因为我必须找到调用成员函数的每个实例并测试该对象是否存在（几千个）。

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2013-03-19T17:03:43.900

## 在 PHP 7 中

是的，捕获一个“错误”可抛出，请参阅[http://php.net/manual/en/language.errors.php7.php](http://php.net/manual/en/language.errors.php7.php)

演示：[https ://3v4l.org/Be26l](https://3v4l.org/Be26l)

```
<?php

$x = "not an object";

try {
 $x->foo();
} catch (\Throwable $t) {
 echo "caught";
} 
```

## 在 PHP 5 中

> 有没有办法可以创建一个在发生此特定错误时运行的函数？

是的，您可以使用“ [register_shutdown_function](http://php.net/manual/en/function.register-shutdown-function.php) ”让 PHP 在遇到此错误后终止之前调用函数。

> PHP：捕获致命错误（在非对象上调用成员函数）

如果这就是“catch”的意思，则无法从该错误中恢复，因为 PHP 已将“调用非对象上的成员函数”定义为“致命”错误。请参阅[PHP turn "Call to a member function on a non-object" into exception](https://stackoverflow.com/questions/15502559)了解为什么会这样。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-15T04:01:15.597

您可能正在寻找[http://www.php.net/manual/en/function.set-error-handler.php](http://www.php.net/manual/en/function.set-error-handler.php)。您必须编写自己的错误处理程序并检查错误代码是否要显示错误。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-07-15T03:59:44.817

尝试使用[function_exists](http://id.php.net/manual/en/function.function-exists.php)来检查函数是否存在：

```
if (function_exists("somefun")) {
   ...
} 
```

或使用[method_exists](http://id.php.net/manual/en/function.method-exists.php)来验证类方法。

# c++ - std::tm 或 std::gmtime 的限制是什么？

> ID：11489260
> 
> 赞同：3
> 
> 时间：2012-07-15T03:49:11.280
> 
> 标签：c++

`std::gmtime`当我尽可能地通过它时，对我来说失败了`std::time_t`。请参阅以下测试：

```
std::cout   << "sizeof(std::time_t): " << sizeof(std::time_t) << '\n'
            << "sizeof(long long): " << sizeof(long long) << '\n'
            << "sizeof(unsigned int): " << sizeof(unsigned int) << "\n\n";

auto testgmtime = [](std::time_t time)
{
    std::tm* ptm = std::gmtime(&time);
    std::cout << (ptm ? "succeeded\n" : "failed\n");
};

testgmtime(std::numeric_limits<std::time_t>::max());
testgmtime(std::numeric_limits<long long>::max());
testgmtime(std::numeric_limits<long long>::max()-1);
testgmtime(static_cast<std::time_t>(std::numeric_limits<unsigned int>::max())*2);
testgmtime(std::numeric_limits<int>::max()); 
```

**输出：**

```
sizeof(std::time_t): 8
sizeof(long long): 8
sizeof(unsigned int): 4

failed
failed
failed
succeeded
succeeded 
```

我正在使用VS2012。是否有我没有看到的标准限制或者这个 VS 很糟糕？我可以使用什么替代*方案*？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-15T08:35:17.747

VS2012 并不糟糕。算一算。

如果`time_t`是 64 位整数，则其中的最大秒数是 2 ^(64) -1（如果是无符号整数）或 2 ^(63) -1（如果是有符号整数）。

粗略地说，2 ^(63)秒对应于 2 ^(63) /(60*60*24*365) ≈ 2.9*10 ^(11)年。

`time_t`'s`tm_year`是一个 32 位`int`的 ，其最大值为 2 ^(31) -1 ≈ 2.1*10 ⁹。

显然，您不能将 ~2.9*10 ^(11)存储在 32 位有符号整数中。当你`gmtime()`要求它时，它理所当然地失败了。

您可以修改我`gmtime()`在[此答案](https://stackoverflow.com/a/11197532/968261)中的实现以处理非常大的值。您需要解决溢出问题`SecondsSinceEpoch + 11644473600ULL`并将一些`ints`和更改`uints`为`uint64s`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-15T07:16:57.400

C++ 只说`gmtime`可能会失败。指定`gmtime`大输入行为的标准是[POSIX](http://pubs.opengroup.org/onlinepubs/9699919799/functions/gmtime.html)：

> 如果检测到错误，gmtime() 将返回一个空指针并设置 errno 以指示错误。
> 
> 错误
> 
> 如果出现以下情况，gmtime() 和 gmtime_r() 函数将失败：
> 
> [EOVERFLOW] 结果无法表示。

它没有直接说明限制是什么，尽管它确实说如果自 Epoch 以来的秒数为负数，则它们与实际时间的关系是[undefined](http://pubs.opengroup.org/onlinepubs/9699919799/basedefs/V1_chap04.html#tag_04_15)。

作为替代方案，请尝试提升

```
auto testgmtime = [](std::time_t time)
{
    std::cout << boost::posix_time::from_time_t(time) << '\n';
}; 
```

（尽管在我的 linux 设置中，from_time_t() 似乎比 gmtime 更早达到了上限）

# sql - 使用 SQL Server 2008 自动生成文本文件

> ID：11489263
> 
> 赞同：3
> 
> 时间：2012-07-15T03:49:32.757
> 
> 标签：sql, sql-server, sql-server-2008, sql-server-2005, sql-server-2008-r2

我想在 SQL Server 2008 中执行存储过程并将数据存储在文本文件中。如何执行此操作以及如何使用 SQL Server 2008 中的数据**自动生成文本文件？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T04:46:33.983

其中一种方法是使用 BCP（批量复制程序）来执行此操作。您需要启用 xp_cmdshell 才能使其正常工作。

您也可以使用 SSIS 导入/导出向导来实现这一点。

```
EXEC master..xp_cmdshell 'BCP "exec dbname.schemaname.procname" queryout "C:\outputfile.txt" -T -c -t,' 
```

看看这些：

1.  [BCP](http://msdn.microsoft.com/en-us/library/ms162802.aspx)
2.  [SSIS](http://decipherinfosys.wordpress.com/2008/07/23/ssis-exporting-data-to-a-text-file-using-a-package/)

# wpf - 带条件的多重绑定

> ID：11489279
> 
> 赞同：0
> 
> 时间：2012-07-15T03:52:47.527
> 
> 标签：wpf, binding, multibinding

我有一个`TextBlock`in`WPF`并将 text 属性绑定`TextBlock`到多依赖属性。我想有条件地绑定这些依赖属性。换句话说，我想每次将一些依赖属性绑定到`TextBlock`对象的文本属性。我能怎么做？

**编辑1：**

我`TextBlock`的在下面。我通过调查绑定依赖属性的值来计算这个文本块的文本属性。并希望通过更改每个绑定依赖属性来刷新文本块的文本。一些绑定依赖属性可能是空值，我不想将此依赖属性绑定到我的文本属性。当我调试我的应用程序并且依赖属性为空时，Visual Studio 在输出窗口中引发警告。

```
<TextBlock>
            <TextBlock.Text>
                <MultiBinding Converter="{StaticResource OCDFLinkTextConverter}">
                    <Binding Path="TbOCDFLink" RelativeSource="{RelativeSource AncestorType=ocdfcontrol:OCDFLink}"/>
                    <Binding Path="TbOCDFLink.FromOCDFObjectItem.OCDFObject.XPosition" RelativeSource="{RelativeSource AncestorType=ocdfcontrol:OCDFLink}"/>
                    <Binding Path="TbOCDFLink.FromOCDFObjectItem.OCDFObject.YPosition" RelativeSource="{RelativeSource AncestorType=ocdfcontrol:OCDFLink}"/>
                    <Binding Path="TbOCDFLink.ToOCDFObjectItem.OCDFObject.XPosition" RelativeSource="{RelativeSource AncestorType=ocdfcontrol:OCDFLink}"/>
                    <Binding Path="TbOCDFLink.ToOCDFObjectItem.OCDFObject.YPosition" RelativeSource="{RelativeSource AncestorType=ocdfcontrol:OCDFLink}"/>
                    <Binding Path="TbOCDFLink.FromOCDFObjectItem.OCDFObject.ParentOCDFObject.XPosition" RelativeSource="{RelativeSource AncestorType=ocdfcontrol:OCDFLink}"/>
                    <Binding Path="TbOCDFLink.FromOCDFObjectItem.OCDFObject.ParentOCDFObject.YPosition" RelativeSource="{RelativeSource AncestorType=ocdfcontrol:OCDFLink}"/>
                    <Binding Path="TbOCDFLink.ToOCDFObjectItem.OCDFObject.ParentOCDFObject.XPosition" RelativeSource="{RelativeSource AncestorType=ocdfcontrol:OCDFLink}"/>
                    <Binding Path="TbOCDFLink.ToOCDFObjectItem.OCDFObject.ParentOCDFObject.YPosition" RelativeSource="{RelativeSource AncestorType=ocdfcontrol:OCDFLink}"/>
                    <Binding Path="TbOCDFLink.TbOCDFLinkGroup.FromOCDFObjectItem" RelativeSource="{RelativeSource AncestorType=ocdfcontrol:OCDFLink}"/>
                    <Binding Path="TbOCDFLink.TbOCDFLinkGroup.ToOCDFObjectItem" RelativeSource="{RelativeSource AncestorType=ocdfcontrol:OCDFLink}"/>
                </MultiBinding>
            </TextBlock.Text>
        </TextBlock> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T04:35:49.893

嗨，在你的转换器中试试这个

```
public object Convert(object[] values, Type targetType, object parameter, System.Globalization.CultureInfo culture)
 {
     string result="";
     if (values != null)
     {
         foreach (var val in values)
         {
             if (val == null)
                 continue;
             else
                 result = result + val;

         }
     }
     return result;
 } 
```

我希望您的所有绑定都有效。我希望这会有所帮助。

# java - java中的条码生成

> ID：11489280
> 
> 赞同：5
> 
> 时间：2012-07-15T03:52:57.033
> 
> 标签：java, swing, barcode

我正在制作一个生成条形码的应用程序，但它没有给我条形码：应用程序返回我提供的文本。我的代码是：

```
Code39 code39=new Code39();
String outputStr=code39.encode("12345678", 1);
String humanTextStr=code39.getHumanText();
jLabel1.setText(outputStr);
jLabel1.setFont(new java.awt.Font("CCode39_S3",java.awt.Font.PLAIN,24)); 
```

请问谁能告诉我为什么会这样？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-05T06:04:23.347

您的应用程序正在返回一个文本，因为您告诉它获取文本而不是条形码。

试试下面的代码：

```
a=jTextField24.getText();      
Code39 barcode=new Code39();      
barcode.setData(a);      
ImageIcon icon = new ImageIcon(barcode.drawBarcode());          
jLabel34.setIcon(icon); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-15T03:57:27.820

尝试使用开源库在 java 中生成条形码。例如，[iText](http://www.lowagie.com/iText/) 或[http://barbecue.sourceforge.net/](http://barbecue.sourceforge.net/)

请参阅此链接以及[Java 中的条码图像生成器](https://stackoverflow.com/questions/1700597/barcode-image-generator-in-java/1700616#1700616)

希望能帮助到你。

# php - PHP MongoDB $存在不工作

> ID：11489297
> 
> 赞同：5
> 
> 时间：2012-07-15T03:58:13.840
> 
> 标签：php, mongodb, exslt

```
$collection->update(array("_id"=>new MongoId($uid), "phonenumber"=> $exist => array(FALSE),$set("phone"=>"1223444")); 
```

我想知道为什么我的 $exist 查询不能与 PHP 和 Mongodb 一起使用，如果有人能指出我正确的方向，这将是有帮助的。

好的，在集合数据库中没有名为 phonenumber 的行，如果没有 phonenumber 我希望它插入一个，但如果有 phonenumber 不做任何事情。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-15T04:22:46.500

您有几个语法问题。

1.  您在第二级缺少数组
2.  您的运算符需要在它们周围加上单引号 ( `$exist`)

这是一个清理后的示例：

```
$collection->update(
    array( "_id"=> new MongoId($uid), 
           array("phonenumber"=> array('$exists' => false))
         ),
    array( '$set' => array("phone"=>"1223444") )
); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-12-20T16:54:55.360

这应该是：

```
$collection->update(
    array( 
        "_id"         => new MongoId($uid), 
        "phonenumber" => array('$exists' => false)
    ),
    array( '$set' => array("phone"=>"1223444") )
); 
```

响应盖茨副总裁的阵列级别太多

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-15T04:46:46.160

尝试这样做不等于运算符

```
$collection->update(
    array( "_id"=> new MongoId($uid)),
    array( '$set' => array("phone"=>"1223444") )
); 
```

# php - 列以记录尝试插入已存在的行的次数

> ID：11489298
> 
> 赞同：0
> 
> 时间：2012-07-15T03:58:30.923
> 
> 标签：php, mysql, sql, count, primary-key

我正在尝试创建一个列并使其计算用户进行的插入尝试次数。

一个例子会让事情变得更清楚：

```
+-------+----------------------------------+--------------+
| text  |            md5                   | insert_times | 
+-------+----------------------------------+---------+----+
| 123   | 202cb962ac59075b964b07152d234b70 |     834      |  
| abc   | 900150983cd24fb0d6963f7d28e17f72 |     923      |      
+-------+----------------------------------+--------------+ 
```

哪里`text`是主键。
每当用户尝试插入`123`（因为已经存在而使用`INSERT IGNORE`不获取错误消息）时，将增加，跟踪在表中插入已经存在的文本的尝试次数。`123``insert_times``1`

关于如何制作的任何想法？
我无法制作触发器，因为我的数据库主机（godaddy）不允许触发器。
如果无法做到`mysql`，我可以在 的帮助下完成`php`吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-15T04:12:39.203

要在单个简单查询中执行此操作，只需使用[`ON DUPLICATE KEY UPDATE`](http://dev.mysql.com/doc/refman/5.0/en/insert-on-duplicate.html)MySQL 中的函数。有了这个，您只需执行 INSERT，然后在“重复”行中更新需要更新的内容。例如：

```
INSERT INTO tbl (text, md5, insert_times) VALUES ('abc', {MD5}, 0}
ON DUPLICATE KEY UPDATE insert_times+1; 
```

但是，我个人更喜欢 PHP 方法，因为在我的大多数查询中，事情通常不像简单的更新那么简单：

```
$res = mysql_query(sprintf("SELECT text FROM tbl WHERE text = '%s'", $text));
if (mysql_num_rows($res) != 0)
{
    mysql_query(sprintf("UPDATE tbl SET insert_times+1 WHERE text = '%s'", $text);
}
else
}
    mysql_query(sprintf("INSERT INTO tbl SET text = '%d', md5 = '%s'", $text, $hash);
} 
```

如果需要，此方法也为触发其他事件/功能留出了更多空间。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-15T04:07:24.133

检查该记录是否已存在于该特定键的表中，如果是，则将 insert_times 值更新为`insert_times+1`；，否则创建新记录。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-15T04:07:47.817

您可以在脚本中放置一些逻辑，在尝试插入之前检查该行是否存在。如果它不存在，请执行 INSERT 查询。如果是，则增加 insert_times 字段。

您还可以保留一个没有唯一性约束的单独 insert_attempts 表。对于每次插入行的尝试，您将执行两个查询：一个是您现在正在执行的查询，一个是针对 insert_attempts 的查询。insert_attempts 可以插入一个新行，然后对具有相关 ID 的行进行 COUNT() 操作，或者它可以只检查与该 ID 关联的数字并更新它。

# streaming - 为什么 FLAC Streaming over HTTP 是通过 Ogg 封装而不是本机完成的？

> ID：11489300
> 
> 赞同：6
> 
> 时间：2012-07-15T03:59:31.467
> 
> 标签：streaming, ogg, flac

当前所有的 FLAC 流实现（例如 Edcast 和 Icecast）似乎都在流时使用 Ogg 作为 FLAC 的容器。

1.  这是什么原因？
2.  *不*使用 Ogg 而是流式传输“本机”FLAC 流有什么缺点？

我已经做了一些通过 HTTP 流式传输 FLAC 的测试，它似乎在 VLC 中工作得很好。FLAC 似乎以[这样一种方式构建，即帧可以独立站立](http://flac.sourceforge.net/format.html)，使其能够抵抗流损坏和/或丢帧。鉴于此，我不太明白为什么在 Ogg 中包装 FLAC 是必要的。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-20T21:28:20.263

[FLAC-to-Ogg 映射页面](http://flac.sourceforge.net/ogg_mapping.html)对为什么在许多情况下需要使用 Ogg 封装而不是流式传输原生 FLAC 有相当详尽的解释：

> 原始的 FLAC 格式包括一个**非常薄的传输系统**……称为“本机 FLAC”。...它非常轻量级，**不支持更复杂的传输机制**，例如多个逻辑流，...
> 
> 原生 FLAC 传输不是标准编解码器设计方式中的传输“层”，因为它不能与有效负载完全分离。...
> 
> 这**在尝试将 FLAC 封装在其他真正的传输层中时会出现问题**......
> 
> 另一种方法是**将本地 FLAC 帧视为 Ogg 数据包**并接受传输冗余。事实证明，这算不上什么惩罚；... 冗余仅占百分之几。
> 
> [重点补充]

有关更多信息，请参阅完整页面，但结果是，虽然可用于流式传输，但原生 FLAC 并不适合更复杂的设置，而且 Ogg 封装的成本非常低。如果原生 FLAC 可以很好地满足您的特定需求，您可以继续使用它，但 Ogg 最终会给您更多的灵活性。

# migration - 使用文件描述符的 qemu 实时迁移

> ID：11489307
> 
> 赞同：1
> 
> 时间：2012-07-15T04:00:07.633
> 
> 标签：migration, qemu, kvm

我正在尝试在 qemu 中进行实时迁移。据我所知，有 4 种方法可以进行实时迁移

1.  使用 tcp 连接
2.  使用执行
3.  使用过程
4.  使用 fd

尽管此处给出了 tcp 和 exec 的实时迁移语法[http://www.linux-kvm.org/page/Migration](http://www.linux-kvm.org/page/Migration)，但我无法使用 fd （文件描述符）选项找到实时迁移语法。有人可以告诉如何将 fd 参数传递给 qemu 吗？

# ios - 使用 UIManagedDocument 预加载核心数据数据库

> ID：11489308
> 
> 赞同：1
> 
> 时间：2012-07-15T04:00:11.783
> 
> 标签：ios, core-data, preload, uidocument, nspersistentstore

嗨支持专家...我正在编写我的第一个 iPad 应用程序，并且有一个可以解析 XML 文件以`UIManagedDocument`在应用程序启动时创建核心数据数据库的工作测试版副本。但是，这需要很长时间，我想在离线后完成，并将初始数据直接包含到我的应用程序包中。毋庸置疑，我正在尝试让它发挥作用。

我首先遵循了命令行实用程序方法，请参见[此处](http://www.raywenderlich.com/12170/core-data-tutorial-how-to-preloadimport-existing-data-updated)这一直有效，直到我导入 .sqlite 文件并尝试编辑该`persistentStoreCoordinator`方法-我使用的是 a ，因此在我`UIManagedDocument`的方法中没有方法-[此页面](https://developer.apple.com/library/ios/#documentation/Cocoa/Conceptual/CoreData/Articles/cdUsingMOM.html)引用“在某些情况下，您不必编写任何代码来加载模型。如果您在 Mac OS X 上使用基于文档的应用程序，它会为您管理查找和加载应用程序模型的任务。”`persistenStoreCoordinator``AppDelegate``NSPersistentDocument`

然后，我尝试根据[这个 StackOverFlow 问题](https://stackoverflow.com/questions/8683892/pre-load-core-data-database-in-ios-5-with-uimanageddocument)`UIManagedDocument`从模拟器中的应用程序的工作版本中复制它， 这似乎有效，只是它是空的，因此我的表也是。这正是[这里](https://stackoverflow.com/questions/9355369/preloaded-core-data-database-in-ios5-with-uimanageddocument)提出的问题，但对该问题的回答让我重新开始修改我没有的方法。`persistentStore``NSPersistentStoreCoordinator`

我在我的代码中添加了一个测试`NSFetchRequest`，我将我的应用程序包中的文件复制`UIManagedDocument`到了文档目录中 - 所以我知道`UIManagedDocument`我的应用程序包中的我是空的。我尝试从 finder 拖放并使用终端进行处理 - persistentStore 文件似乎已正确移动并且大小为 106 KB，但我的应用程序中仍然有一个空数据库。

关于如何让它工作的任何建议？

我是否需要`configurePersistenStoreCoordinatorForURL:ofType:modleConfiguration:StoreOptions:error:`按照`UIManagedDocument`类参考使用 - 如果需要，我该怎么做？

我是否需要将一些核心数据方法添加到我的 AppDelegate 中，以便我可以修改我的`persistenStoreCoordinator`方法 - 如果需要，此方法还需要做什么？

`persistentStore` `UIManagedDocument`我是更好地使用我的命令行实用程序创建的或似乎使用的 .sqlite 数据库吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-15T07:30:00.247

您可以通过以下方式访问持久存储协调器`parentContext`：

```
document.managedObjectContext.parentContext.persistentStoreCoordinator 
```

或者，如果您只是意味着在构建核心数据堆栈时您无权访问构建持久存储的方法，那么看起来这是为此目的而设计的钩子，（正如您所提到的）：

> 覆盖`configurePersistentStoreCoordinatorForURL:ofType:modelConfiguration:storeOptions:error:`以自定义持久存储的加载或创建。

但是文档中对该方法的讨论并没有很好地解释要做什么。也许您可以覆盖它并查看堆栈中已创建和尚未创建的对象，可能有一个已初始化的协调器附加到父上下文供您配置。类似名称的方法的文档`NSPersistentDocument`是这样的，所以也许`UIManagedDocument`也是。？

# c - 连接（）错误：不允许操作

> ID：11489313
> 
> 赞同：2
> 
> 时间：2012-07-15T04:01:26.920
> 
> 标签：c, linux, sockets, network-programming

我正在研究 UNIX 网络编程中的示例，并且我已将“daytimeclientcli.c”改编成这里特定于 linux 的代码（这些示例使用 BSD）。[我已经在此处](http://tf.nist.gov/tf-cgi/servers.cgi)针对时间服务器运行了该程序。无论我得到`connect error: Operation not permitted`哪个服务器，调用connect() 的返回值。我已经四处搜索，但找不到与此相关的任何内容。任何帮助是极大的赞赏。

```
#include <stdio.h>
#include <string.h>
#include <netinet/in.h>
#include <arpa/inet.h>
#include <errno.h>

#define BUFFER 80
int main(int argc, char **argv) {
  int sockfd;
  int n;
  char buf[BUFFER+1];
  struct sockaddr_in servaddr;
  /* need a pointer to socketaddr for call to connect() */
  struct sockaddr* ptr;

  if ( (sockfd = socket(AF_INET, SOCK_STREAM, 0)) < 0) {
    fprintf(stderr, "socket error\n");
    return 2;
  }

  memset(&servaddr, 0, sizeof(servaddr));
  servaddr.sin_family = AF_INET;
  servaddr.sin_port = htons(13);

  if (inet_pton(AF_INET, argv[1], &servaddr) <= 0) {
    fprintf(stderr, "inet_pton error for %s\n", argv[1]);
    return 3;
  }

  ptr = (struct sockaddr*) &servaddr;
  if (err = connect(sockfd, ptr, sizeof(servaddr)) < 0) {
    fprintf(stderr, "connect error: %s\n", strerror(err));
    return 4;
  }

  /* read from socket */
  while ( (n = read(sockfd, buf, BUFFER)) > 0);

  if (n < 0) {
    fprintf(stderr, "read error: %d\n", n);
    return 5;
  } else {
    /* null-terminate the buffer */
    buf[n] = 0;
    printf("%s\n", buf);
 }

  if (n < 0) {
    fprintf(stderr, "read error");
    return 5;
  }

  return 0;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-15T04:36:57.410

connect() 调用失败，因为 servaddr 未正确初始化。在对inet_pton() 的调用中，尝试将“&serv_addr”更改为“&serv_addr.sin_addr”。

# ip - 子网，我可以使用主机 ID 为零吗？

> ID：11489315
> 
> 赞同：-1
> 
> 时间：2012-07-15T04:02:18.963
> 
> 标签：ip, subnet

我很困惑我们可以使用主机ID为零的IP地址吗？

例如下面的子网示例：

地址：192.168.18.23网络
掩码：255.255.248.0

主机/网络：2046

* * *

主机最小值：192.168.16.1
主机最大值：192.168.23.254

由于min host id是192.168.16.1，所以会增加到192.168.16.255，然后ip 192.168.17.0 <----可以这样用吗？

谢谢

[http://jodies.de/ipcalc?host=192.168.18.23&mask1=21&mask2=](http://jodies.de/ipcalc?host=192.168.18.23&mask1=21&mask2=)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-15T04:34:20.847

是的。

```
 (192.168) . 0001 0001 . 0000 0000 = 192.168\. 17\.  0
not (255.255) . 1111 1000 . 0000 0000 = 255.255.248\.  0
    ---------------------------------------------------
    (000.000) . 0000 0001 . 0000 0000 =   0\.  0\.  1\.  0 
```

所以实际上，您的真实主机 ID 是 .1.0 = 0000 0001 0000 0000 = 256

# hadoop - Hadoop 上的外部 /jar 文件存储在哪里？

> ID：11489316
> 
> 赞同：0
> 
> 时间：2012-07-15T04:02:25.657
> 
> 标签：hadoop, mapreduce, hdfs

假设我写了一个 WordCount 示例，然后在 eclipse 项目中包含一个外部 jar 文件，例如 MyJar.jar。现在，如果我将整个 WordCount 项目导出为 word.jar 文件，然后键入

```
$> hadoop jar word.jar WordCount input output 
```

我知道作业执行并且 word.jar 将有一个包含 MyJar.jar 文件的 lib 目录。现在，当作业运行调用这个 jar 文件的方法时，这个 jar 文件 MyJar 文件将存储在 HDFS 的哪个位置？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-15T13:38:52.977

bin/hadoop 脚本实际上将您的 work.jar 文件解压缩到本地文件系统上的 tmp 文件夹中。

Job 客户端处理 HDFS 中作业文件夹的创建，您的原始 jar、所有 lib jar 和其他作业文件（例如 job.xml、分布式缓存文件等）都上传到该文件夹​​。

当您的作业在集群节点上运行时，这些文件将被复制回该节点的本地文件系统上的 tmp 作业目录。出于效率原因，文件只复制一次，而不是针对在该节点上运行的每个映射任务。

# jquery - jQuery对话框文本问题

> ID：11489317
> 
> 赞同：1
> 
> 时间：2012-07-15T04:02:31.070
> 
> 标签：jquery, jquery-ui

我的页面上存在以下 jQuery 对话框：

```
<div id="dialog-confirm" title="Empty the recycle bin?">
    <p>
    <span class="ui-icon ui-icon-alert" style="float:left; margin:0 7px 20px 0;"></span>
    These items will be permanently deleted and cannot be recovered. Are you sure?
    </p>

</div> 
```

在 jQuery UI 演示页面中没有出现文本，但在我的网站上显示了文本。

我什么都没改变。还有人经历过这个吗？

[jQuery 链接](http://jqueryui.com/demos/dialog/#modal-confirmation)

例如我看到这个文本： `These items will be permanently deleted and cannot be recovered. Are you sure?`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T04:21:03.013

`div`调用时`.dialog`隐藏。`autoOpen: false`通过DOM 就绪事件中的选项调用它，并`.dialog('open')`在您想要显示它时调用它。

```
$("#dialog-confirm").dialog({ 
    autoOpen: false,
    modal: true,
    //your buttons and other defined options
}); 
```

[**小提琴**](http://jsfiddle.net/WHvHF/2/)

当然，请确保您已正确包含 jQuery 库、jQuery UI 和 CSS 文件：

```
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.21/jquery-ui.min.js"></script>
<link rel="stylesheet" type="text/css" href="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8/themes/ui-darkness/jquery-ui.css" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-15T04:12:59.640

**工作演示** [http://jsfiddle.net/Qd5Xe/3/](http://jsfiddle.net/Qd5Xe/3/)

请注意，您缺少我认为 Jq-UI 和 Css 的脚本源，请参见此处

希望对事业有所帮助

**脚本**

```
<link rel="stylesheet" href="http://jqueryui.com/demos//css/base.css" type="text/css" media="all" />
<link rel="stylesheet" href="http://code.jquery.com/ui/1.8.21/themes/base/jquery-ui.css" type="text/css" media="all" />
<link rel="stylesheet" href="http://static.jquery.com/ui/css/demo-docs-theme/ui.theme.css" type="text/css" media="all" />
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js" type="text/javascript"></script>
<script src="http://code.jquery.com/ui/1.8.21/jquery-ui.min.js" type="text/javascript"></script> 
```

**代码**

```
 $(function() {
        // a workaround for a flaw in the demo system (http://dev.jqueryui.com/ticket/4375), ignore!
        $( "#dialog:ui-dialog" ).dialog( "destroy" );

        $( "#dialog-confirm" ).dialog({
            resizable: false,
            height:140,
            modal: true,
            buttons: {
                "Delete all items": function() {
                    $( this ).dialog( "close" );
                },
                Cancel: function() {
                    $( this ).dialog( "close" );
                }
            }
        });
    });​ 
```

# android - 在RelativeLayout之上绘制动态定位的图像 - android

> ID：11489319
> 
> 赞同：0
> 
> 时间：2012-07-15T04:03:14.213
> 
> 标签：android, image, draw

我正在尝试在具有其他元素的 RelativeLayout 顶部的动态位置绘制图像。我尝试创建一个扩展 View 的类并将此视图添加到 RelativeLayout 但图像只是屏幕上显示的东西。RelativeLayout 中的其他元素不可见。

这是视图类

```
@Override
protected void onDraw (Canvas canvas) {

    super.onDraw(canvas);
    Bitmap myBitmap = BitmapFactory.decodeResource(getResources(),    R.drawable.ic_launcher);
    canvas.drawColor(Color.BLACK);
    canvas.drawBitmap(myBitmap, 50,50, null);   
} 
```

这是在 Activity 的 onCreate

```
 mainLayout = (RelativeLayout)findViewById(R.id.main_tutorial_layout);
    mainLayout.addView( new DrawAnimationTutotial(getApplicationContext()));
    mainLayout.invalidate(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T04:32:55.690

为什么不使用 ImageView？

```
mainLayout = (RelativeLayout) findViewById(R.id.main_tutorial_layout);
ImageView image = new ImageView(this);
image.setImageDrawable(getResources().getDrawable(R.drawable.ic_launcher));

RelativeLayout.LayoutParams layoutParams = new RelativeLayout.LayoutParams(50, 50);
layoutParams.leftMargin = xValue; 
layoutParams.topMargin = yValue;
image.setLayoutParams(layoutParams);
mainLayout.addView(image); 
```

# node.js - 为什么此查询返回数据库对象？

> ID：11489321
> 
> 赞同：0
> 
> 时间：2012-07-15T04:03:41.250
> 
> 标签：node.js, mongodb, heroku, mongohq

```
mongo.connect(mongostr, {}, function(error, db){ 
    var mycoll = db.collection("newuser"); 
    mycoll.find({'userID':12345}, 
                {'userID':true}, 
                function(err, value) {
                    console.log(value);
                }); 
}); 
```

我已经向 mongoDB 添加了一个测试集合，我知道它就在那里。我知道确切的查询返回我想要的事实（我自己在 mongoHQ 面板中测试过）。mongo 对象工作正常。不幸的是，[文档没有示例](http://mongodb.github.com/node-mongodb-native/markdown-docs/queries.html#making-queries-with-find)，所以我看不出我做错了什么。

当查询运行时，我得到 db 对象的控制台转储：

```
 { db:     { databaseName: 'appxxxxxxx',
      serverConfig: 
       { host: 'staff.mongohq.com',
         port: 10096,
         options: {},
         internalMaster: true,
         connected: true,
         poolSize: 1,
         ssl: false,
         slaveOk: undefined, 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T05:01:08.700

db.collection 是一个异步调用。您正在以同步方式访问它。

```
var mycoll = db.collection("newuser"); 
```

试试这个：

```
mongo.connect(mongostr, {}, function(error, db){ 
    var mycoll = db.collection("newuser", function(err,collection){
             collection.find({'userID':12345}, 
                {'userID':true}, 
                function(err, value) {
                    console.log(value);
                }); 
    });
}); 
```

# java - 强制 .java 到 .class 编译

> ID：11489324
> 
> 赞同：0
> 
> 时间：2012-07-15T04:04:00.757
> 
> 标签：java, class, module, compilation, minecraft

我对 java 编译器的理解遇到了一些问题。

如果您了解 Minecraft，您可能知道游戏中有许多 mods，它们是注入原始 .jar 的修改类的片段，替换旧的（原始）.class，问题是如果您想使用 2 个不同的替换相同 .class 的 mod，这有点不可能，除非您将它们的代码混合并做一些版本。

好吧，我得到了 2 个使用相同 .class 的模块并反编译了两个类（反编译成功），分析、修改并创建了一个同时适用于两个模块的 .java 文件。我现在的问题是我必须将这个 .java 重新编译成一个 .class 文件，这样我才能注入到 minecraft .jar 中，但是每次我尝试编译它时，我都会遇到很多错误，比如`class, interface, or enum expected`那些`selection does not contain main type`错误是预料之中的，因为代码中提到了很多外部类，实际上并没有包含 main 类型。

我想知道你们中是否有人知道将 .java 转换为 .class 二进制文件，而忽略我之前提到的所有错误，或者您对我该怎么做有任何其他建议它。

PS：这段代码不是一个完整的程序，这就是我得到这些错误的原因，它在.jar中会很好地工作，请不要回答单独编译这个文件是没有意义的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T04:46:15.707

> 我想知道你们中是否有人知道将 .java 转换为 .class 二进制文件而忽略所有错误...

这不可能。如果其中有错误，您不能“强制”编译 Java 源代码，听起来这就是问题所在。

*   Java 反编译器生成无效 Java 源代码的输出并不罕见。

*   如果您在“分析、修改、创建”中犯了错误，您的源代码可能无效……尤其是在您似乎没有 Java 编程经验的情况下。

* * *

如果您发布**实际**的源代码片段和**实际**的编译错误，我们可能会提供帮助。

* * *

**跟进**

> 我有java编程经验，只是我使用Eclipse为我编译东西，所以我从不通过命令行使用javac。

那不是问题。如果您尝试使用 Eclipse 编译此代码，您会遇到同样的问题。

> 如果无法重新编译出现错误的类，我可以使用一些解压缩反编译的程序在 .jar 中编辑一个类，显示代码以便我可以再次编辑和打包它吗？

理论上，是的。在实践中，您需要对字节码以及编译代码的工作方式有很好的理解才能实现这一点。特别是，如果你弄错了，你可能会在类加载时遇到神秘的异常。

输入类被混淆的事实部分解释了为什么反编译器难以生成可编译代码。

# python - 打印精确右对齐的浮点数

> ID：11489326
> 
> 赞同：24
> 
> 时间：2012-07-15T04:04:26.117
> 
> 标签：python, string, printing, floating-point

我对使用 python 编程有点陌生，所以请放轻松。我正在尝试调用字符串属性 rjust 并指定浮点的精度。这是代码和示例输出（注意 0.00 不向右对齐）：

```
print '%s: %s %s \tchange: %.2f' % (Instance1.symbol.ljust(5), 
    Instance1.name.ljust(50), Instance1.buyprices.rjust(10), Instance1.val) 
```

输出：

```
AXP  : American Express Company                          55.38  change: -1.15  
AXR  : Amrep Corp.                                       6.540  change: 0.00 
```

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-07-15T04:06:57.363

`%`这显示了一个示例，说明如何使用旧的格式化方法使用两个小数点格式化您的输出：

```
v1 = 55.39
v2 = -1.15
v3 = 6.54
v4 = 0.00

print '%8.2f   %8.2f' % (v1, v2)
print '%8.2f   %8.2f' % (v3, v4) 
```

相应的输出：

```
 55.39      -1.15
    6.54       0.00 
```

或者，您可以使用“新的和改进的” [.format()](http://docs.python.org/library/string.html#format-string-syntax)函数，该函数将存在一段时间，值得了解。以下将生成与上述相同的输出：

```
print '{:8.2f}  {:8.2f}'.format(v1, v2)
print '{:8.2f}  {:8.2f}'.format(v3, v4) 
```

两组格式化指令都为您的数字分配 8 个空格，将其格式化为小数点后 2 位的浮点数。您必须调整这些值以满足您的需求。

我认为使用这种方法来格式化您的输出会更容易，因为它`.format()`可以让您对输出进行*大量*控制（包括对齐、填充、精度）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-15T04:13:04.617

没关系，我当然在发布我的问题后就想出了这个......

```
changed to this:
    def change_value(self, sym, buy, sell):
        self.sym = sym
        temp = float(buy) - float(sell)
        self.val = "%.2f" % temp

and then called str(Instance1.val).rjust(10) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2022-02-03T12:24:31.843

Python[格式规范迷你语言](https://docs.python.org/3/library/string.html#formatspec)

```
print(f'{symbol:<5}: {name:<44} {buyprices:>10.2f}  change: {val:>5.2f}') 
```

输出：

```
AXP  : American Express Company                          55.38  change: -1.15
AXR  : Amrep Corp.                                        6.54  change:  0.00 
```

这个怎么运作：

```
<44 (left justified, 44 places)
>5.2f (right justified, 5 places, 2 decimal places) 
```

# eclipse - Eclipse 在工作台加载后立即关闭

> ID：11489328
> 
> 赞同：4
> 
> 时间：2012-07-15T04:04:35.273
> 
> 标签：eclipse, windows-7, helios

我有这个问题好几个星期了，eclipse 从启动画面开始，加载插件，工作台等，UI 立即打开和关闭。我已经尝试了所有可能的方法，.metadata 中没有生成日志文件。问题从 Helios 开始，然后我安装了 Juno，但还是一样。我曾尝试再次安装 JDK 1.6 、 1.7 ，但效果不佳。

我所尝试的一切：

1) eclipse.ini、perm 大小、-vm 参数中所有可能的更改 2) 带有 -clean 和 -clonsoleLog -debug 选项的控制台，没有错误，问题仍然存在 3) 系统恢复到 Helios 正常工作的前一个日期

请帮我。沙尚克

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2016-02-25T11:49:08.500

java更新后，eclipse将无法启动，因为默认jdk位置已更改。将以下行添加到 eclipse.ini 文件立即解决了我的问题：

```
-vm
C:\Program Files (x86)\Java\jdk1.7.0_75\bin\javaw.exe 
```

我在 vmargs 之前添加了这些行。它看起来如下所示：

```
...
--launcher.defaultAction
openFile
-vm
C:\Program Files (x86)\Java\jdk1.7.0_75\bin\javaw.exe
-vmargs
-Dosgi.requiredJavaVersion=1.5
-Dhelp.lucene.tokenizer=standard
-Xms40m
-Xmx512m 
```

有关 eclipse.ini 的更多信息，请访问此站点[http://wiki.eclipse.org/Eclipse.ini#-vm_value:_Windows_Example](http://wiki.eclipse.org/Eclipse.ini#-vm_value:_Windows_Example)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-16T07:54:30.037

终于让它再次工作......我在 C:\Users\PC\AppData\Local\Eclipse 找到了一个 eclipse 文件夹，将它与 Temp 文件夹中的临时文件一起删除，神奇地它已经开始工作了。呼..谢谢你的回复。

Ecipse 现在开始了，但是 UI 完全损坏了……最重要的是，每次我必须启动 Eclipse 时，我都必须删除该文件夹。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-03-10T11:06:25.073

我也陷入了同样的境地。我通过删除工作区中的文件夹元数据来管理它，它对我来说很好用

然后按照[链接](https://stackoverflow.com/a/11983265/1315392)导入所有项目

# python - 通过全局 python 导入本地模块

> ID：11489330
> 
> 赞同：6
> 
> 时间：2012-07-15T04:05:41.047
> 
> 标签：python, import, python-2.7

我有 2 个 python 文件。一个是尝试导入第二个。我的问题是第二个被命名为 math.py。我不能重命名它。当我尝试调用位于 math.py 中的函数时，我不能，因为我最终得到了全局数学模块。我将如何导入我的本地文件而不是全局文件。我正在使用 Python 2.7，这（大致）是我的导入语句：

```
cstr = "math"
command = __import__(cstr) 
```

后来我尝试：

```
command.in_math_py_not_global() 
```

**编辑：**一个更完整的例子：

```
def parse(self,string):
    clist = string.split(" ")
    cstr= clist[0]
    args = clist[1:len(clist)]
    rvals = []
    try:
        command = __import__(cstr)
        try:
            rvals.extend(command.main(args))
        except:
            print sys.exc_info()
    except ImportError:
        print "Command not valid" 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-15T04:37:02.903

Python 进程有一个加载模块的命名空间。如果您（或*任何其他模块*）出于某种原因已经加载了标准`math`模块，那么尝试再次加载它`import`或`__import__()`将简单地返回对已加载模块的引用。您应该能够使用`print id(math)`和比较来验证这一点`print id(command)`。

尽管您已声明无法更改 的名称`math.py`，但我建议您可以。您正在从用户那里获取要加载的模块的名称。`__import__()`您可以在实际使用该函数添加前缀之前对其进行修改。例如：

```
command = __import__("cmd_" + cstr) 
```

然后，重命名`math.py`为`cmd_math.py`，您将避免此冲突。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-15T08:24:09.493

您可以使用相对导入：

```
from . import math 
```

[http://docs.python.org/tutorial/modules.html#intra-package-references](http://docs.python.org/tutorial/modules.html#intra-package-references)

# php - Simplepie RSS 提要到 MySQL 数据库服务器

> ID：11489338
> 
> 赞同：4
> 
> 时间：2012-07-15T04:07:10.513
> 
> 标签：php, mysql, simplepie

我目前正在使用[Simplepie](http://www.simplepie.org/)拉入我的 RSS 提要，如下面的配置所示。我想将其`$url`移至我的数据库，因为我的网站加载速度太慢。我将每个 url 作为网站名称的键值对。我想保持这种关联，因为我使用例如“abc”将图像从我用来为每个提要设置样式的目录中拉出，如下面的`foreach`循环所示。

我的问题是，由于我不清楚数组和表如何协同工作，我将如何重写此脚本以以相同的方式与数据库一起工作？

我还应该提到，我已经在 MySQL 中创建了一个表，其中包含行“id”、“name”和“url”。任何澄清都会有所帮助。

```
<?php
require_once('php/autoloader.php');
$feed = new SimplePie();
// Create a new instance of SimplePie
// Load the feeds
$urls = array(
  'http://abcfamily.go.com/service/feed?id=774372' => 'abc',
  'http://www.insideaolvideo.com/rss.xml' => 'aolvideo',
  'http://feeds.bbci.co.uk/news/world/rss.xml' => 'bbcwn',
  'http://www.bing.com' => 'bing',
  'http://www.bravotv.com' => 'bravo',
  'http://www.cartoonnetwork.com' => 'cartoonnetwork',
  'http://feeds.cbsnews.com/CBSNewsMain?format=xml' => 'cbsnews',
  'http://www.clicker.com/' => 'clicker',
  'http://feeds.feedburner.com/cnet/NnTv?tag=contentBody.1' => 'cnet',
  'http://www.comedycentral.com/' => 'comedycentral',
  'http://www.crackle.com/' => 'crackle',
  'http://www.cwtv.com/feed/episodes/xml' => 'cw',
  'http://disney.go.com/disneyxd/' => 'disneyxd',
  'http://www.engadget.com/rss.xml' => 'engadget',
  'http://syndication.eonline.com/syndication/feeds/rssfeeds/video/index.xml' => 'eonline',
  'http://sports.espn.go.com/espn/rss/news' => 'espn',
  'http://facebook.com' => 'facebook',
  'http://flickr.com/espn/rss/news' => 'flickr',
  'http://www.fxnetworks.com//home/tonight_rss.php' => 'fxnetworks',
  'http://www.hgtv.com/' => 'hgtv',
  'http://www.history.com/this-day-in-history/rss' => 'history',
  'http://rss.hulu.com/HuluRecentlyAddedVideos?format=xml' => 'hulu',
  'http://rss.imdb.com/daily/born/' => 'imdb',
  'http://www.metacafe.com/' => 'metacafe',
  'http://feeds.feedburner.com/Monkeyseecom-NewestVideos?format=xml' => 'monkeysee',
  'http://pheedo.msnbc.msn.com/id/18424824/device/rss/' => 'msnbc',
  'http://www.nationalgeographic.com/' => 'nationalgeographic',
  'http://dvd.netflix.com/NewReleasesRSS' => 'netflix',
  'http://feeds.nytimes.com/nyt/rss/HomePage' => 'newyorktimes',
  'http://www.nick.com/' => 'nickelodeon',
  'http://www.nickjr.com/' => 'nickjr',
  'http://www.pandora.com/' => 'pandora',
  'http://www.pbskids.com/' => 'pbskids',
  'http://www.photobucket.com/' => 'photobucket',
  'http://feeds.reuters.com/Reuters/worldNews' => 'reuters',
  'http://www.revision3.com/' => 'revision3',
  'http://www.tbs.com/' => 'tbs',
  'http://www.theverge.com/rss/index.xml' => 'theverge',
  'http://www.tntdrama.com/' => 'tnt',
  'http://www.tvland.com/' => 'tvland',
  'http://www.vimeo.com/' => 'vimeo',
  'http://www.vudu.com/' => 'vudu',
  'http://feeds.wired.com/wired/index?format=xml' => 'wired',
  'http://www.xfinitytv.com/' => 'xfinitytv',
  'http://www.youtube.com/topic/4qRk91tndwg/most-popular#feed' => 'youtube',
);
$feed->set_feed_url(array_keys($urls));
$feed->enable_cache(true);
$feed->set_cache_location('cache');
$feed->set_cache_duration(1800); // Set the cache time
$feed->set_item_limit(1);
$success = $feed->init(); // Initialize SimplePie
$feed->handle_content_type(); // Take care of the character encoding
?>
<?php require_once("inc/connection.php"); ?>
<?php require_once("inc/functions.php"); ?>
<?php include("inc/header.php"); ?>
<?php
// Sort it
$feed_items = array();
// $feed_items is an array
$items = $feed->get_items();
//$items is everything that $items = $feed->get_items(); produces
$urls = array_unique($urls);
// $url = is an empty $
foreach ($urls as $url => $image) {
  $unset = array();
  $feed_items[$url] = array();
  foreach ($items as $i => $item) {
    if ($item->get_feed()->feed_url == $url) {
      $feed_items[$url][] = $item;
      $unset[] = $i;
    }
  }
  foreach ($unset as $i) {
    unset($items[$i]);
  }
}
foreach ($feed_items as $feed_url => $items) {
  if (empty($items)) { ?>
  <div class="item element" data-symbol="<?php echo $urls[$feed_url] ?>" name="<?php echo $urls[$feed_url] ?>">
  <div class="minimise"><img src="images/boreds/<?php echo $urls[$feed_url] ?>.png"/>
  <div class="minimise2">
    <a href="<?php echo $feed_url; ?>"><h2>Visit <?php echo $urls[$feed_url] ?> now!</h2></a>
  </div></div>
  <div class="maximise">
    <a href="<?php echo $feed_url; ?>"><h2>Visit <?php echo $urls[$feed_url] ?> now!</h2></a>
  </div></div>

  <?
    continue;
  }
  $first_item = $items[0];
  $feed = $first_item->get_feed();
  ?>

  <?php

$feedCount = 0;
foreach ($items as $item) {
  $feedCount++;
  ?>
<div class="item element" " data-symbol="<?php echo $urls[$feed_url] ?>" name="<?php echo $urls[$feed_url] ?>">
<div class="minimise"><strong id="amount"><?php echo ''.$feedCount; ?></strong>
  <img src="images/boreds/<?php echo $urls[$feed_url] ?>.png"/>
  <div class="minimise2"><a href="<?php echo $item->get_permalink(); ?>">
  <h2><?php echo $item->get_title(); ?></h2></a>
</div></div>
<div class="maximise"><a href="<?php echo $item->get_permalink(); ?>">
   <h2><?php echo $item->get_title(); ?></h2></a><br><p><?php echo $item->get_description(); ?></p>
</div></div>
<?php
  }
}
?>
<?php require("inc/footer2.php"); ?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-03-10T12:24:24.033

我在一些项目中使用 SimplePie，这就是我为减少页面加载时间所做的：我缓存结果。

流程大约是这样的：

1.  我将获取提要并生成 HTML 的 PHP 代码放在一个地方。这个脚本基本上和你的一样。假设我将该脚本重命名为`feed-fetcher.php`
2.  在这个脚本中，我添加了一个功能，可以将生成的 HTML 保存到`index.html`同一个文件夹中。实际上，在我想要访问提要项目内容以便于（或将来）阅读的根文件夹中。
3.  我设置了一个`cron`工作，每 20 分钟左右获取一次提要。
4.  当我想读取获取的内容时，我会转到缓存内容的 URL，该 URL 存储在上述`.html`文件中。因此，我的页面加载速度非常快，因为我不需要等待获取和处理我想要检查的每个提要。

此解决方案不需要任何数据库。但当然，您仍然可以使用数据库将提取的 HTML 格式的内容存储为`string`. 或任何其他适合您需要的类型。

这是你想要的？

# python - 如何在不同的文件中设置全局变量

> ID：11489339
> 
> 赞同：0
> 
> 时间：2012-07-15T04:07:18.967
> 
> 标签：python

> **可能重复：**
> [来自不同文件 Python 的全局变量](https://stackoverflow.com/questions/3400525/global-variable-from-a-different-file-python)

可以在不同的文件中设置变量吗？

所以我有两个不同的文件有点像这样..

## 测试1.py

```
import test2
st = 'a'
def main():
  mis = input('puts: ')
  print tes2.set(mis)
main() 
```

## 测试2.py

```
def set(object):
  pics = ['''
  %s
  1st
  '''%st,
  '''
  %s
  2nd
  ''']
  return pics[object] 
```

我执行 tes1.py 并发出错误：

```
NameError: global name 'st' is not defined 
```

感谢您的回复

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T04:19:16.273

是的，但你真的不想这样做。我会`st`作为参数传递给`set()`. 但是，以下（错误）设置有效：

## 库文件

```
var = "woo" 
```

## 执行文件

```
import lib
print lib.var 
```

（请注意，仅导入`lib.py`到`exec.py`不允许我使用来自`exec.py`in`lib.py`的变量，只能反过来。想想这如何适用于您的情况。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-15T04:21:41.750

一些提示：

*   `main()`将您的函数包装在一个`if __name__ == '__main__'`块中。它可以防止导入的模块执行导入时不应运行的代码。我通常完全放弃，只在块`main()`中编写所有主要代码。`if`
*   `object`是内置类型。不要命名事物`object`。另外`set`，因为那也是一种类型。
*   不鼓励使用全局变量，因为*总*有一种方法可以将全局变量变成参数（除非你的全局变量是常量，这很好）。

这是我的做法：

**测试1.py**：

```
import test2

if __name__ == '__main__':
  st = 'a'
  mis = input('puts: ')

  print tes2.rename_me_set(st, mis) 
```

**测试2.py**：

```
def rename_me_set(st, obj):
  pics = ['''
  %s
  1st
  ''' % st,
  '''
  %s
  2nd
  ''']

  return pics[obj] 
```

# php - Symfony2 论坛集成？

> ID：11489346
> 
> 赞同：3
> 
> 时间：2012-07-15T04:08:29.000
> 
> 标签：php, symfony, forum

我有一个功能正常的 Symfony2 网站，通过 FOSUserBundle 提供身份验证和用户。

将论坛与现有用户表集成并保留当前注册、登录和帐户信息工作流程的最佳和最简单的方法是什么？

编辑：

是的，一个论坛，如phpBB3，谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-03-08T10:15:56.520

看一下这个：

[http://vanillaforums.org](http://vanillaforums.org)

[https://github.com/vanilla/vanilla](https://github.com/vanilla/vanilla) - 在 Github 上（我用过 2.1 分支）

[https://github.com/tgalopin/TgaForumBundle](https://github.com/tgalopin/TgaForumBundle) - 用于将 Vanilla 集成到 Symfony2 的捆绑包

# html - Firefox 中的 td 高度无法更改

> ID：11489349
> 
> 赞同：1
> 
> 时间：2012-07-15T04:08:44.407
> 
> 标签：html, css, firefox, iframe, html-table

问题是 td 高度被拉伸，如下图所示：

![](../Images/d616b1209d04805a6319dc58bf3d4558.png)

我尝试了以下方法：

1.  将 td 高度设置为 1px 并允许内容拉伸它。

2.  添加样式并将高度设置为 1 px

3.  在 td 内的内容上添加 div 标签并设置 div 标签高度和溢出隐藏

4.  将 td 样式设置为隐藏溢出

5.  为 td 设置样式`display: block`

6.  将垂直对齐设置为顶部

我认为问题可能是 iframe 设置为根据 iframe 中的内容自动调整大小。

这里似乎没有一个对页面有帮助[http://soldbybillcox.com/listings.html](http://soldbybillcox.com/listings.html)

我很清楚应该用 div 制作网站，而使用表格已经过时了！

任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T05:55:45.317

我知道你以前也问过这个问题，但没有人在那里给出答案。不过，我在那里回答了关于使用 div 进行布局的问题。

无论如何，我正在尝试找出解决它的最佳方法。这是你需要的吗？尝试在Firefox中打开

[http://jsfiddle.net/CLMLV/](http://jsfiddle.net/CLMLV/)

# php - PHP：创建字母 二维数组中的部分

> ID：11489352
> 
> 赞同：1
> 
> 时间：2012-07-15T04:09:01.650
> 
> 标签：php, arrays, drop-down-menu, sorting, optgroup

根据 PDO 的`fetchAll()`方法，我有一个来自数据库的二维城市数组，用于生成带有选项的下拉列表，如下所示：

```
foreach($option as $city) {
    echo '<option value="'. $city['city_id'] . '">' . $city['city_name'] . '</option>';
} 
```

这一切都很好，但是它返回了一个相当长的来自整个州/省的城市列表，因此为了使选择更友好一些，我想`<optgroup>`根据它们的起始字母动态添加分类“部分”。结果已经按名称排序，因此该部分已处理。

我尝试使用`preg_grep()`and`preg_match()`将数组拆分为更小的数组，然后为每个数组回显一个 optgroup，但这不太奏效......在显示*所有*城市后， **optgroup B**被推到列表的底部.

 *```
$citiesA = preg_grep('/^A.*/', $option);
$citiesB = preg_grep('/^B.*/', $option);

    echo '<optgroup label="A">';
    foreach($citiesA as $a) {
        echo '<option value="'. $a['city_id'] . '">' . $a['city_name'] . '</option>';
    }
    echo ' </optgroup>';

    echo '<optgroup label="B">';
    foreach($citiesB as $b) {
        echo '<option value="'. $b['city_id'] . '">' . $b['city_name'] . '</option>';
    }
    echo ' </optgroup>'; 
```

非常感谢有关如何实现这一点的任何建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-15T04:21:49.300

怎么样

```
$startl=""; // current Starting letter
foreach($option as $o)
{
    if (($c=substr($o['city_name'], 0, 1)) != $startl) // if starting letter changed
    {
        if ($startl) echo '</optgroup>';
        echo '<optgroup label="'. $c .'">'; // create new group
        $startl=$c;
    }
    echo '<option value="'. $o['city_id'] . '">' . $o['city_name'] . '</option>';
}
echo '</optgroup>'; // end the last group 
```*

# sql-server-2008 - 如何在 SQL Server 2008 中进行左对齐数据？

> ID：11489355
> 
> 赞同：0
> 
> 时间：2012-07-15T04:10:54.570
> 
> 标签：sql-server-2008, sql-server-2005, sql-server-2008-r2

我想通过执行一个过程来生成一个带有数据的文本文件。但是在生成文本文件时，下一个或上一个列值不应输入其他列值。请参阅下面的 EX 了解更多详细信息。

## 例子

我们在一个表中有 2 列类型`Varchar(5)`。我想用这些数据生成一个文件。因此，每列将允许 5 个字符。

**案例 1：**如果第一列有 5 个字符的数据（例如：'qwert'），我们将获取数据，第二列的值将在此旁边。没问题。它工作正常。

**案例 2：**如果第一列有 3 个字符的数据（例如：'asd'），我们会得到这个，但第二列值不应该进入文本文件中第一列值的第四位。如果第一列的数据 < 5 个字符，它应该打印并且它应该打印剩余的空白。

注意：文本文件中不需要分隔符。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T04:18:00.027

如果我很了解您的需求，即每次打印第一列 5 个字符，您可以简单地使用它

```
SELECT LEFT(col1 + "     ", 5) AS col1, col2
FROM your_table 
```

# php - 如果函数没有被触发，尽管结果变量中有正确的值

> ID：11489356
> 
> 赞同：0
> 
> 时间：2012-07-15T04:11:18.977
> 
> 标签：php, jquery, post, if-statement, subscription

所以我正在写这个订阅页面..当用户点击提交时，它应该将电子邮件发送到数据库..我使用 jQuery 的 post 方法，所以在提交时应该返回 send 的结果，如果这是真的，按钮应该消失并且应该会出现一条已发送的消息，但是当我使用 console.log 打印结果值它说成功但 if 语句将转到 else 子句并打印错误消息时，这不会发生。

```
$.post("send_email.php", $("#contact_form").serialize(),function(result){
    console.log(result);
    //and after the ajax request ends we check       the text returned
    if(result == "sent"){

        //if the mail is sent remove the submit paragraph
        $('#button').remove();
        //and show the mail success div with fadeIn
        $('#mail_success').fadeIn(500);
    }else{
        console.log('going to failure clause');
        //show the mail failed div
        $('#mail_fail').fadeIn(500);
        //reenable the submit button by removing attribute disabled and change the text back to Send The Message
        $('#send_message').removeAttr('disabled').attr('value', 'Submit');
    }
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-15T04:15:35.727

> 当我使用 console.log 打印结果值时，它说成功

所以，这不是：

```
 if(result == "sent"){ 
```

需要是这样的：

```
 if(result == "success"){ 
```

?

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-15T04:56:38.277

我的猜测是您的 PHP 响应包含登录时不明显的空格`result`。如果由于某种原因无法在 PHP 代码中修复，那么您可以更新您的 JS if 条件以忽略空格，如下所示：

```
if (result.replace(/\s/g,"") === "sent") { 
```

# scala - 序列理解的类型是什么

> ID：11489362
> 
> 赞同：3
> 
> 时间：2012-07-15T04:11:48.530
> 
> 标签：scala, for-comprehension

我刚刚开始学习 Scala。

[当我在http://www.scala-lang.org/node/111](http://www.scala-lang.org/node/111)中玩一个示例时，我发现类型有问题。

```
object Main extends App {
  def even(from: Int, to: Int): Vector[Int] =
    for (i <- from until to if i % 2 == 0) yield i

  Console.println(even(0, 20).getClass())
} 
```

这不会编译并出现以下错误。

```
<console>:9: error: type mismatch;
 found   : scala.collection.immutable.IndexedSeq[Int]
 required: Vector[Int]
           for (i <- from until to if i % 2 == 0) yield i
                  ^ 
```

但是，如果没有返回值的类型说明，它可以工作并且类是 Vector。

```
object Main extends App {
  def even(from: Int, to: Int) =
    for (i <- from until to if i % 2 == 0) yield i

  Console.println(even(0, 20).getClass()) // => class scala.collection.immutable.Vector
} 
```

这似乎是矛盾的。让我知道编译类型错误的原因是什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-15T04:58:41.370

路易吉的回答是正确的，但可能需要更多解释。运行时类型确实是`Vector[Int]`，但编译器不知道这一点。for 表达式等价于

```
from.until(to).filter(_%2==0) 
```

So it creates a Range and then calls the filter method on it. As you can see in the API documentation, the filter method of `Range` is declared as returning an `IndexedSeq`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-15T04:53:43.260

您将类与类型混淆了。for 表达式产生的值的类型是`IndexedSeq[Int]`，它恰好由 Vector 实例实现。您在签名中指定返回*类型*必须是`Vector[Int]`，但 for 表达式没有提供这样的保证。

编辑添加：您会在网站上的示例中注意到，他们使用该`List.range`方法在 for 表达式中生成生成器，这就是他们获得返回类型的方式`List[Int]`。如果您使用该`Vector.range`方法（而不是`until`产生 a的方法`Range`），那么您将过滤 a`Vector`并且编译器会将其推断为返回类型。

如果您想查看表达式或函数的类型，REPL 会在您定义或评估它时告诉您：

```
scala> def even(from: Int, to: Int) =
     |   for (i <- from until to if i % 2 == 0) yield i
even: (from: Int, to: Int)scala.collection.immutable.IndexedSeq[Int]
                       // ^ here! 
```

# vim - 如何在 Vim 中正确启用 Mathematica 的语法高亮显示？

> ID：11489363
> 
> 赞同：3
> 
> 时间：2012-07-09T19:57:05.870
> 
> 标签：vim, syntax-highlighting

如何在 Vim 中正确启用 Mathematica 的语法高亮显示？我也希望在使用 Vim 打开 .m 文件时自动打开它。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-15T04:33:03.377

把[它](https://github.com/vim-scripts/Mathematica-Syntax-File)放在你的`~/.vim/syntax`文件夹中，然后放

```
au BufRead,BufNewFile *.m setl ft=mma 
```

在你的 ~/.vimrc 中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-15T04:33:01.987

有一个语法文件，您需要安装它。

[http://vim.sourceforge.net/scripts/script.php?script_id=1273](http://vim.sourceforge.net/scripts/script.php?script_id=1273)

**安装细节**

> 安装说明也在文件中。
> 
> 基本上：
> 
> *   将 mma.vim 放入 $HOME/.vim/syntax/ (%HOME%\vimfiles\syntax\ for Windows)
>     
>     
> *   打开一个 Mathematica 文件**

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-15T09:49:07.160

您可以分两步安装自定义语法文件：

### 创建`~/.vim/syntax/mma.vim`：

```
# create directory(if not exist)
mkdir ~/.vim/syntax
cd ~/.vim/syntax

# download syntax file
wget https://github.com/vim-scripts/Mathematica-Syntax-File/raw/master/syntax/mma.vim 
```

### 创建`~/.vim/filetype.vim`：

```
" my filetype file
if exists("did_load_filetypes")
  finish
endif
augroup filetypedetect
  au! BufRead,BufNewFile *.m,*.nb       setfiletype mma
augroup END 
```

* * *

注意：在 Windows 中，更改`~/.vim`为`C:\program files\vim\vimfiles`

# certificate - 证书 KeyUsage 和 Cipher 加密模式

> ID：11489378
> 
> 赞同：0
> 
> 时间：2012-07-15T04:16:05.353
> 
> 标签：certificate, encryption

我正在尝试使用 cxf 和 sprint 加密传出的 SOAP 标头。由于我对 spring 的配置，我最终为我的客户使用了 outInterceptor：

'

```
 <bean id="encryptOutInterceptor" class="org.apache.cxf.ws.security.wss4j.WSS4JOutInterceptor">

  <constructor-arg>
     <map>
        <entry key="action" value="UsernameToken Timestamp Encrypt" />
        <entry key="passwordCallbackRef" value-ref="passwordCallback" />
        <entry key="user" value="mykey" />
        <entry key="encryptionPropFile" value="keystore.properties" />

     </map>
  </constructor-arg>
  </bean> 
```

`

因此它最终调用

```
`org.apache.ws.security.message.WSSecEncryptedKey.prepareInternal()` 
```

方法，我通过调试器逐步了解其源代码：

```
try {
        **cipher.init(Cipher.ENCRYPT_MODE, remoteCert);**
    } catch (InvalidKeyException e) {
        throw new WSSecurityException(
            WSSecurityException.FAILED_ENCRYPTION, null, null, e
        );
    } 
```

那时它会抛出：**“无效的密钥使用”**异常。

我最终编写了一个测试 java 类，我在其中手动读取证书，然后尝试使用**Cipher.ENCRYPT_MODE**参数初始化 Cipher，我最终得到了相同的异常。这里是特定的片段：

```
 InputStream inStream = new FileInputStream("our_cert.cer");
        CertificateFactory cf = CertificateFactory.getInstance("X.509");
        X509Certificate cert =(X509Certificate)cf.generateCertificate(inStream);
        inStream.close();

        // Read the public key from certificate file
        RSAPublicKey pubkey = (RSAPublicKey) cert.getPublicKey();
        cipher.init(Cipher. ENCRYPT_MODE, certif);  // it breaks at this point 
```

我将最后一行替换为

```
cipher.init(Cipher. PRIVATE_KEY, certif); 
```

它通过了。

不过，我认为这不是正确的密钥用法，而且我认为**ENCRYPT_MODE**也应该起作用。

通过查看证书密钥使用部分，我注意到它的密钥使用定义为：

```
ObjectId: 2.5.29.15 Criticality=true
KeyUsage [
  DigitalSignature
  Key_Encipherment
] 
```

并且其中没有其他关键部分。

从它的行为方式看来，**Cipher.init(..)**仅适用于**DigitalSignature**（即**Cipher. PRIVATE_KEY**），但不适用于 **Key_Encipherment**（即**Cipher. ENCRYPT_MODE**）。

所以我的问题是，是否有可能没有为该证书正确定义**KeyUsage 。**我不是密码学专家，但我正在阅读的一些留言板建议如果 keyUsage 很关键，它可能还需要使用 **DATA_ENCIPHERMENT** ...</p>

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-11T15:00:09.660

最近碰到这个。如果创建正确，您可以使用公钥证书进行加密。证书应具有密钥使用对象 ID (ObjectId: 2.5.29.15 Criticality=true)，设置为“b0”(10110000)，基本上启用了数据加密位。否则，您将遇到错误的密钥使用错误。任何 CA 颁发的证书都会将 Key Usage 关键性变为 true。自签名证书（如在开发/沙盒环境中）不会将该临界值设置为 true，因此这些证书将起作用，当然前提是您已设置为信任它们。我尝试使用来自服务器的公钥证书并且正在努力解决这个错误。然后我们的 IT 部门拿回了用于数据加密的正确公钥证书，它开始为我工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-15T05:53:12.697

仔细研究[源代码](http://www.docjar.com/html/api/javax/crypto/Cipher.java.html)，有两种情况会引发该异常，一种是从未发生过的错误，另一种是检查相关证书是否支持相关操作。

```
if (critSet != null && !critSet.isEmpty()
    && critSet.contains(KEY_USAGE_EXTENSION_OID)) {
  boolean[] keyUsageInfo = cert.getKeyUsage();
  // keyUsageInfo[2] is for keyEncipherment;
  // keyUsageInfo[3] is for dataEncipherment.
  if ((keyUsageInfo != null) &&
      (((opmode == Cipher.ENCRYPT_MODE) &&
      (keyUsageInfo.length > 3) &&
      (keyUsageInfo[3] == false)) ||
      ((opmode == Cipher.WRAP_MODE) &&
      (keyUsageInfo.length > 2) &&
      (keyUsageInfo[2] == false)))) {
      throw new InvalidKeyException("Wrong key usage");
    }
} 
```

这表明您使用的证书对加密无效。也许您尝试使用公钥证书进行加密？

看起来代码没有检查像 PRIVATE_KEY 这样总是无效的 opmode，只是像 ENCRYPT_MODE 这样有时无效的 opmode，这可能就是你的测试代码很好的原因。

# iphone - prepareForSegue 没有按预期工作

> ID：11489385
> 
> 赞同：1
> 
> 时间：2012-07-15T04:17:59.287
> 
> 标签：iphone, ios

我已经设置了一个视图，用户可以在其中选择一张照片，然后将其用作他们的个人资料图片。一旦他们选择了图像，就应该更新 UIImageView。我使用 prepareForSegue 方法将信息传递给包含图像视图的视图控制器。但是，当我向前传递一些东西时，图像永远不会更新。这是我的代码：

```
 -(void)prepareForSegue(UIStoryboardSegue *)segue sender:(id)sender{
    if ([[segue identifier] isEqualToString:@"UploadSuccessSegue"]) {  
       UploadSuccessViewController *usv = (UploadSuccessViewController *)  
       [segue destinationViewController];  
       usv.bookView.image = self.uploadedImage.image;
    }
  } 
```

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-15T05:13:37.630

是的，GTSouza 一针见血。所以你想创建一个属性来保存你的`UIImage`引用`UploadSuccessViewController.h`，例如：

```
@property (nonatomic, strong) IUImage *bookImage; 
```

然后您的 prepareForSegue 可以填充它：

```
-(void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender
{
    if ([[segue identifier] isEqualToString:@"UploadSuccessSegue"]) {  
        UploadSuccessViewController *usv = [segue destinationViewController];  
        usv.bookImage = self.uploadedImage.image;
    }
} 
```

然后`UploadSuccessViewController` `viewDidLoad`可以使用它：

```
self.bookView.image = self.bookImage; 
```

# c - 是否必须写 int main(int argc, char *argv[])，不能使用其他名称代替 argc 和 *argv[]？

> ID：11489387
> 
> 赞同：5
> 
> 时间：2012-07-15T04:18:07.693
> 
> 标签：c, visual-c++, command-line-arguments

我在这里遇到了一些真正的麻烦，在项目选项本身（在“配置属性”->“调试”中）向 Visual Studio 提供命令行参数。

我在“ ”不起作用`int main(int argc)`之后写了这个“” 。`int main(int main_i)`在项目的 MS Visual Studio 属性页的命令行参数中，我不确定我应该写什么。我只想传递一个整数来指定文件是要读取还是写入，因此只是一个 int argc。我不需要 char `*argv[]`。我在命令行参数文本框中尝试了一些值，但它在执行时没有到达 exe 文件，它显示了我根本没有输入的内容。

您能否提供一个简单的示例来说明我需要在 MSVS C++ 属性页的命令行参数空间中输入的内容？我根本找不到任何关于如何将命令行参数提供给 MSVS 的示例。

我也不明白为什么即使我只修改了命令行参数值，我也需要重建整个项目？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-15T04:20:48.390

如果您希望您的程序理解单个整数命令行参数，您仍然必须使用`argc`and `argv`。这样的事情应该这样做：

```
int main(int argc, char *argv[]) {

    if (argc < 2) {
        fprintf(stderr, "Need a command line argument.\n");
        exit(1);
    }

    int arg = atoi(argv[1]);
    // now you have an integer
    // do whatever with it...
} 
```

C 标准要求`main`函数具有特定的参数集。允许的组合之一是`(int, char *[])`. 您可以随意*命名*参数，但它们几乎总是被称为`argc`and `argv`。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-15T04:20:42.323

这些*名称*只是一个公认的约定，您可以使用任何您想要的名称（尽管它可能会引起一些人的注意），但是，我只看到了按指定顺序使用*这两个参数的代码。*

在 ANSI 之前的日子里，可以简单地拥有`int main()`，现在仍然是 .. 但这些日子`argc` `argv`通常是提供的。

您不能只提供参数之一。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-07-15T04:29:10.590

变量名称仅供编译器使用。它们将被转换为二进制映像中的地址。您最多可以为 main 传递 3 个参数。

这是我尝试过的 -

```
int main(int i, char* a[], char* e[]) 
```

如您所见，这些名称不是普通名称。第一个参数是命令行参数的数量，第二个是实际的参数数组，第三个是环境变量数组。

事实上，main 可以接受任意数量的参数，但其余的，在第三个之后将是无效的。这仍然会编译 -

```
int main(int i, char* a[], char* e[], char* j[]) 
```

只是为了好玩，你甚至可以这样做——

```
int main(int i, float a, float b, float c, float d, float e) 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-07-15T07:55:00.710

即使是简单`main`的也是允许的，您仍然可以访问这些参数。

```
int main()
{
    int nArgCount = __argc;
    char** pArgs= __argv;

    printf("Argument Count: %d\n", nArgCount-1);
    printf("Arguments:");

    for(int nIndex = 1; nIndex<nArgCount; ++nIndex)
        printf("%s, ", pArgs[nIndex]);
} 
```

您还可以使用`GetCommandLine`函数访问命令行。没有/使用`main`' 参数的重要方面是您仍然**可以在任何函数中访问命令行参数**。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-15T05:38:10.213

就像其他人提到的那样，这只是一个方便的问题，Kernighan 和 Ritchie 在第一个 C 版本中使用了这些论点，它一直沿用这种方式。

您可以自由使用任何东西。

这是一个简单的例子：

```
#include <iostream>

int main(int arglen, char *args[])
{
        std::cout << "Running: " << *args << std::endl;
    while (--arglen > 0)
        std::cout << *++args << std::endl;
    return 0;
} 
```

我使用 Visual C++ 2010 Express。如果这样做，您可以按 Alt+F7 调出项目属性，转到配置属性 > 调试并在`Command Arguments`.

就是这样。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-07-15T08:12:26.267

`char *argv[]`如果要读取命令行参数的值，则必须使用。否则你可以放弃它。

如果您只想用一个整数来区分两件事，那么您有一种方法可以做到这一点。只需为一件事传递命令行参数，不要为另一件事传递任何参数。现在你不需要`char *argv[]`. 现在您只为一件事传递命令行参数，然后值为`argc`is `2`，即可执行文件的名称 + 命令行参数。

如果你不传递命令行参数，那么它的值只有`1`，即可执行文件的名称。

# c++ - OpenSceneGraph - 绘制 3D 墙

> ID：11489391
> 
> 赞同：1
> 
> 时间：2012-07-15T04:18:43.060
> 
> 标签：c++, 3d, openscenegraph

我有下面的代码。我从教程中得到了这个想法，但我的代码在运行时没有显示任何内容。目标是在 3d 中绘制墙。我的猜测是我的分数可能会偏离，但我不确定如何最好地选择分数，以及如何缩放。

```
void BuildWall(osg::Group* root)
{

    osg::Geode* WallGeode = new osg::Geode();
    osg::Geometry* WallGeometry = new osg::Geometry();

    WallGeode->addDrawable(WallGeometry);
    //add the Node to the root Node
    root->addChild(WallGeode);
    //specify vertices
    osg::Vec3Array* WallVertices = new osg::Vec3Array;
    WallVertices->push_back( osg::Vec3(0, 0, 0) ); // front left
    WallVertices->push_back( osg::Vec3(10, 0, 0) ); // front right
    WallVertices->push_back( osg::Vec3(10,10, 0) ); // back right
    WallVertices->push_back( osg::Vec3(0,10, 0) ); // back left 
    WallGeometry->setVertexArray( WallVertices );

    //specify the kind of geometry we want to draw here
    osg::DrawElementsUInt* WallBase = new osg::DrawElementsUInt(osg::PrimitiveSet::QUADS, 0);
    //specify the order we want to draw the base of our geometry
    WallBase->push_back(3);
    WallBase->push_back(2);
    WallBase->push_back(1);
    WallBase->push_back(0);
    WallGeometry->addPrimitiveSet(WallBase);

    //Declare and load an array of Vec4 elements to store colors.
    osg::Vec4Array* colors = new osg::Vec4Array;
    colors->push_back(osg::Vec4(1.0f, 0.0f, 0.0f, 1.0f) ); //index 0 red
    colors->push_back(osg::Vec4(0.0f, 1.0f, 0.0f, 1.0f) ); //index 1 green
    colors->push_back(osg::Vec4(0.0f, 0.0f, 1.0f, 1.0f) ); //index 2 blue
    colors->push_back(osg::Vec4(1.0f, 1.0f, 1.0f, 1.0f) ); //index 3 white
    //colors->push_back(osg::Vec4(1.0f, 0.0f, 0.0f, 1.0f) ); //index 4 red

    WallGeometry->setColorArray(colors);
    WallGeometry->setColorBinding(osg::Geometry::BIND_PER_VERTEX);

    // Declare and initialize a transform node.
    osg::PositionAttitudeTransform* WallTwoXForm = new osg::PositionAttitudeTransform();

    // Use the 'addChild' method of the osg::Group class to
    // add the transform as a child of the root node and the
    // pyramid node as a child of the transform.
    root->addChild(WallTwoXForm);
    WallTwoXForm->addChild(WallGeode);
    float scale=root->getBound().radius();
    WallTwoXForm->setScale(osg::Vec3d(scale,scale,scale));

    // Declare and initialize a Vec3 instance to change the
    // position of the tank model in the scene
    osg::Vec3 WallTwoPosition(15,0,0);

    WallTwoXForm->setPosition(WallTwoPosition );

} 
```

# javascript - 使用多个 .js 文件时出现 JsLint4Java“未定义”警告

> ID：11489393
> 
> 赞同：1
> 
> 时间：2012-07-15T04:19:24.163
> 
> 标签：javascript, eclipse, jslint, jslint4java

当使用多个 .js 文件时，例如，如果我有一个包含单元测试的单独 .js 文件，我开始看到很多警告（我正在使用 Eclipse 插件），如下所示，其中 .js 文件正在引用来自另一个的元素：

```
'<variable name>' is not defined 
```

我可以通过为正在使用但不在物理 .js 文件中的任何变量包含以下内容来满足警告并且不会破坏我的代码：

```
var myVariableReference = myVariableFromOtherFile || {}; 
```

当然，缺点是我必须在我的单元测试文件中不断重复上述代码。例如，当我使用单元测试框架时，我必须继续为我在框架中使用的函数添加内联变量“引用”，例如：

```
var assertEquals = assertEquals || {}; 
var TestCase = TestCase || {}; 
```

有没有办法在 Eclipse 中进行配置，以便 JsLint4Java 将文件作为一个整体进行扫描？或者设置“忽略”规则会很好，这样我就可以避免前面描述的重复变量。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T01:55:18.530

您是否尝试过使用[undef](http://docs.jslint4java.googlecode.com/git-history/61074d43b0a52f9d842d754f445aad4f58bf3284/1.3.1/ant.html)选项？您也可以尝试使用`predef`标签来定义 lint 应该使用的任何全局变量，但以下情况除外：

```
<target name = "lint">
    <echo message = "Running source files through JSLint..."></echo>
    <jslint options = "newcap,vars,browser">
        <formatter type = "plain" />
        <predef>app,$,other-variables-that-are-global-go-here</predef>
        <fileset dir = "${js}" includes = "**/*.js" />
    </jslint>
</target> 
```

# android - 在 Android 上记录传出的 SMS 消息

> ID：11489394
> 
> 赞同：0
> 
> 时间：2012-07-15T04:19:36.693
> 
> 标签：android

> **可能重复：**
> [收听传出的短信或已发送的邮箱](https://stackoverflow.com/questions/5808577/listen-to-outgoing-sms-or-sent-box)

是否可以在 Android 中拦截传出的 SMS 消息。我知道接收 SMS 并直接发送它很简单，但是否可以检测、拦截或记录传出消息（例如，来自默认消息应用程序或来自另一个可能恶意的应用程序）？我只需要一条带有传出号码和消息的简单日志消息；我不需要修改消息。

用于此的既是合法的（监视正在发送 SMS 的应用程序）和阴暗的（监视传出消息）。我要前者而不是后者:)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-15T06:18:26.050

```
For **monitoring sms** state in/out you have **create class** like this 
and **start service** for **monitoring**

public class SMSMonitor 
{
    private ServiceController mainActivity;
   private ContentResolver contentResolver = null;
   private Handler smshandler = null;
   private ContentObserver smsObserver = null;
   public String smsNumber enter code here= "";
   public static boolean thCountStatus = false;
   public static int thIncreCount = 0;
   public boolean monitorStatus = false;
   String code;
//   Feedmanager fm = null;
   static public String activationCode;
   int smsCount = 0;

   public SMSMonitor(final ServiceController mainActivity, final Context mainContext) {
      this.mainActivity = mainActivity;
      contentResolver = mainActivity.getContentResolver();
      smshandler = new SMSHandler();
      smsObserver = new SMSObserver(smshandler);
   }

   public void startSMSMonitoring() {
      try {
         monitorStatus = false;
         if (!monitorStatus) {
            contentResolver.registerContentObserver(Uri
                  .parse("content://sms"), true, smsObserver);
         }
      } catch (Exception e) {
         Log.d("test","SMSMonitor :: startSMSMonitoring Exception == "+ e.getMessage());
      }
   }

   public void stopSMSMonitoring() {
      try {
         monitorStatus = false;
         if (!monitorStatus) {
            contentResolver.unregisterContentObserver(smsObserver);
         }
      } catch (Exception e) {
         Log.e("test","SMSMonitor :: stopSMSMonitoring Exception == "+ e.getMessage());
      }
   }

   class SMSHandler extends Handler {
      public void handleMessage(final Message msg) {
      }
   }

   class SMSObserver extends ContentObserver {
      private Handler sms_handle = null;
      public SMSObserver(final Handler smshandle) {
         super(smshandle);
         sms_handle = smshandle;
      }

      public void onChange(final boolean bSelfChange) {
         super.onChange(bSelfChange);
         Thread thread = new Thread() {
            public void run() {
               try {
                  monitorStatus = true;

                  // Send message to Activity
                  Message msg = new Message();
                  sms_handle.sendMessage(msg);
                  Uri uriSMSURI = Uri.parse("content://sms");
                  Cursor cur = mainActivity.getContentResolver().query(
                        uriSMSURI, null, null, null, "_id");

                  if (cur.getCount() != smsCount) {
                     smsCount = cur.getCount();

                     if (cur != null && cur.getCount() > 0) {
                        cur.moveToLast();
                        for (int i = 0; i < cur.getColumnCount(); i++) 
                        {
                           //Log("KidSafe","SMSMonitor :: incoming Column Name : " +
                              //cur.getColumnName(i));
                              //cur.getString(i));
                        }

                        smsNumber = cur.getString(cur.getColumnIndex("address"));
                        if (smsNumber == null || smsNumber.length() <= 0)
                        {
                           smsNumber = "Unknown";

                        }

                        int type = Integer.parseInt(cur.getString(cur.getColumnIndex("type")));
                        String message = cur.getString(cur.getColumnIndex("body"));
                        Log.d("test","SMSMonitor :: SMS type == " + type);
                        Log.d("test","SMSMonitor :: Message Txt == " + message);
                        Log.d("test","SMSMonitor :: Phone Number == " + smsNumber);

                        cur.close();

                        if (type == 1) {
                           onSMSReceive(message, smsNumber);
                        } else {
                           onSMSSend(message, smsNumber);
                        }
                     }
                  }
                  /*if (cur.getCount() < smsCount) {
                     Log("KidSafe","SMS Count last:: " + smsCount);
                     Log("KidSafe","SMS cur Count last:: " + cur.getCount());
                     smsCount = cur.getCount();
                     Log("KidSafe","SMS Count last:: " + smsCount);
                  }*/
               } catch (Exception e) {
//                  Log("KidSafe","SMSMonitor :: onChange Exception == "+ e.getMessage());
               }
            }
         };
         thread.start();
      }

      private void onSMSReceive(final String message, final String number) {
         synchronized (this) {
             Log.d("test", "In OnSmsReceive");
            Log.d("test", "Message"+message);
                               Log.d("Sample", "Number"+number);
         }
      }

      private void onSMSSend(final String message, final String number) {
         synchronized (this) {
             Log.d("test", "In OnSmsSend");
            Log.d("test", "Message"+message);
                               Log.d("Sample", "Number"+number);
         }
      }
   }
}

//for starting monitor create a service like below
public class ServiceController extends Service
{
   private Activity mainActivity;
   SMSMonitor sms;

   @Override
   public IBinder onBind(Intent intent) {

      return null;
   }

   public void onCreate() 
   {
      super.onCreate();

      /**** Start Listen to Outgoing SMS ****/
      Log.d("test","###### ServiceController :: CallSMS Monitor method ######");
      sms = new SMSMonitor(this , mainActivity);
      sms.startSMSMonitoring();
   }

   @Override
     public void onDestroy() {
        super.onDestroy();

        /**** Stop Listen to Outgoing SMS ****/
        Log.d("test","###### ServiceController :: StopSMS Monitor method ######");
        sms.stopSMSMonitoring();
    }
} 
```

# javascript - 使用正则表达式中的变量与 $ 和 ^ 匹配字符串

> ID：11489396
> 
> 赞同：1
> 
> 时间：2012-07-15T04:19:48.313
> 
> 标签：javascript, regex

这可能是一个非常容易回答的问题，但我还没有弄清楚正确的方法是什么。

我需要通过正则表达式匹配文本，使用`^ and $`仅匹配以该字符串开头和结尾的元素。但是，我需要能够使用变量来做到这一点：

```
var name // some variable
var re = new RegExp(name,"g"); 
```

所以我想匹配完全（从头到尾）包含我的变量的每个字符串`name`，但我不想匹配在某个地方包含我的变量的字符串`name`。

我该怎么做？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-15T04:23:23.910

```
var strtomatch = "something";
var name = '^something$';
var re = new RegExp(name,"gi");
document.write(strtomatch.match(re)); 
```

`i`用于忽略大小写。这仅匹配单词“something”，不会匹配其他东西。

如果您想在句子中间匹配它，您应该在代码中使用以下内容

```
var name = ' something '; 
```

或者，使用单词边界，

```
var name = '\\bsomething\\b'; 
```

**[工作示例](http://jsfiddle.net/mc6PX/1/)**

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-15T04:33:40.347

如果您说要匹配字符串`something`的开头*或*结尾，请执行以下操作：

```
/^something|something$/ 
```

使用您的变量：

```
new RegExp("^" + name + "|" + name + "$"); 
```

编辑：对于您更新的问题，您希望`name`变量是匹配的整个字符串，因此：

```
new RegExp("^" + name + "$"); // note: the "g" flag from your question
                              // is not needed if matching the whole string 
```

但这毫无意义，除非`name`它本身包含正则表达式，因为尽管您可以说：

```
var strToTest = "something",
    name = "something",
    re = new RegExp("^" + name + "$");

if (re.test(strToTest)) {
   // do something
} 
```

你也可以说：

```
if (strToTest === name) {
   // do something
} 
```

**编辑2：**好的，从您的评论来看，您似乎是在说正则表达式应该匹配“某事”作为离散词出现在您的测试字符串中的任何位置，所以：

```
"something else"           // should match
"somethingelse"            // should not match
"This is something else"   // should match
"This is notsomethingelse" // should not match
"This is something"        // should match
"This is something."       // should match? 
```

如果这是正确的，那么：

```
re = new RegExp("\\b" + name + "\\b"); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-15T04:31:41.477

你应该使用`/\bsomething\b/`. `\b`是匹配单词边界。

```
"A sentence using something".match(/\bsomething\b/g); 
```

# ruby-on-rails-3 - OmniAuth 提供什么机制来确保安全登录？

> ID：11489397
> 
> 赞同：5
> 
> 时间：2012-07-15T04:19:57.113
> 
> 标签：ruby-on-rails-3, authentication, omniauth

使用omniauth 登录策略，未登录的用户被重定向到身份提供者。身份提供者将确保用户已登录，然后将用户重定向到回调 url，允许用户使用身份提供者的身份验证登录到第三方站点。Facebook 在此处的图表中解释了此工作流程：

[https://developers.facebook.com/docs/user_registration/flows/](https://developers.facebook.com/docs/user_registration/flows/)

如何确保恶意用户不会欺骗此回调，以便他可以访问身份验证用户的第三方帐户？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2015-01-02T19:13:50.563

与 Facebook 一样，Google 实现了 OAuth2.0 协议来确认身份。我将带您了解 OAuth2.0 流程的安全性、OmniAuth 如何管理它，并向您展示如何深入了解它的实际运行情况。

## 由 OmniAuth 管理的 OAuth2.0 流程

> 身份提供者将确保用户登录，然后将用户重定向到回调 url，允许用户使用身份提供者的身份验证登录到第三方站点。

让我扩展一下：身份提供者将用户重定向到您在向该特定身份提供者（即 Facebook、Google 等）注册应用程序时提供的应用程序回调 URL。由于用户已被重定向，他们会向您的应用程序发送一个包含授权码的请求（由您的身份提供者在成功登录时提供）。

> 如何确保恶意用户不会欺骗此回调，以便他可以访问身份验证用户的第三方帐户？

这就是魔法发生的地方。我们的应用程序从用户那里获取此授权码，将其与我们在注册应用程序时收到的密码相结合，并与身份提供者交换这些密码以获得全能的访问码。具体来说，以下是确保此回调未被欺骗所采取的步骤：

1.  整个过程通过SSL（即HTTPS）进行管理。这使得拦截这些代码中的任何一个都非常困难。
2.  您的身份提供者通过在成功登录时提供授权代码并在从您的应用程序接收到该代码时验证此代码来验证用户的身份。
3.  您的身份提供者通过验证您的应用程序的密码来确保您的应用程序的身份。

因此，拦截/解密代码将非常困难，并且如果您尝试使用伪造的授权代码来欺骗重定向，当您的服务器尝试使用您的身份验证提供者验证此代码时，您的登录请求将被拒绝。

## 看到它在行动

OmniAuth 在幕后管理这个过程的大部分。但是，以下代码应该可以让您看到它的实际效果：

```
# Add the following gem to your Gemfile
gem 'httplog', group: :development 
```

我们将使用 httplog gem。这实际上会将请求日志转储到我们的 log/development.log 文件中。我们需要初始化：

```
# Create a new file: config/initializers/httplog.rb
HttpLog.options[:logger] = Rails.logger if Rails.env.development? 
```

现在在终端中为您的应用程序启动一个新的 Rails 服务器：

```
bundle install
rails s 
```

在新选项卡中，跟踪您的开发日志：

```
tail -f log/development.log 
```

继续并打开浏览器并使用您选择的身份提供者登录您的应用程序。打开跟踪您的开发日志的终端窗口，在用户 ( `Started GET "/auth/google_oauth2/callback?state=1`) 的回调请求之后，您应该看到如下内容：

```
[httplog] Connecting: accounts.google.com:443
[httplog] Sending: POST http://accounts.google.com:443/o/oauth2/token
[httplog] Data: client_id=123412341234-1234h1234h1234h1234h.apps.googleusercontent.com&client_secret=12341234123412341234&code=123412341234123412341234&grant_type=authorization_code&redirect_uri=https%3A%2F%2Fyourapp.domain.com%2Fauth%2Fgoogle_oauth2%2Fcallback
....
[httplog] Response:
{
  "access_token" : "123412341234123412341234",
  "token_type" : "Bearer",
  "expires_in" : 3599,
  ...
} 
```

这是您的服务器验证授权代码并验证访问令牌。接下来，OmniAuth 使用这个令牌来获取一些用户信息。再往下，您还应该看到：

```
[httplog] Connecting: www.googleapis.com:443
[httplog] Sending: GET http://www.googleapis.com:443/plus/v1/people/me/openIdConnect
[httplog] Status: 200
[httplog] Response:
{
  "kind": "plus#personOpenIdConnect",
  "gender": "male",
  "sub": "1234123412341234",
  "name": "Matt",
  "given_name": "Matt",
  ...  
} 
```

这表示 OmniAuth 使用访问令牌获取您请求的信息。

很长的解释，但我希望它有所帮助。在推送到生产环境之前，请务必禁用或删除 httplog gem！

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-15T04:33:13.530

不要成为“那个人”，但没有什么是完全安全的。话虽如此，OmniAuth 是一种维护良好且被大量使用的机制，适用于许多不同的身份验证策略。至于安全性，您需要确保将 openssl 与 jruby 一起使用，可以在此处查看：[https](https://github.com/mkdynamic/omniauth-facebook) ://github.com/mkdynamic/omniauth-facebook under `Supported Rubies`。除非您计划广泛使用您的应用程序，否则这应该是您需要的所有安全性。

# jquery - jQuery在字符串中添加数字

> ID：11489407
> 
> 赞同：2
> 
> 时间：2012-07-15T04:21:49.970
> 
> 标签：jquery, arrays, each

我的锚文本看起来像“1 个回复和 30 个提及”或“3 个回复和 1 个提及”（显然有不同的数字）。我正在尝试使用 jQuery 用添加的数字替换该锚文本。

```
$(document).ready(function() {
$('header div.comments-link a').each(function(index) {
    var myreaction = $(this).text().split(" ");
    $(this).text(myreaction[0]+myreaction[3]);
});
}); 
```

因此，对于第一个示例，它将是 1+30，因此文本替换将是 31。对于第二个示例，它将是 3+1，因此文本替换将是 4。

但是，它似乎并没有替换实际的文本，并且似乎没有正确地执行拆分数组。当它沿着页面向下移动时，它有时会抓取“1”，但有时会抓取“回复”。

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-15T04:25:42.750

我会尝试一个正则表达式并将数字字符串解析为实际整数：

```
var myreaction = $(this).text().match(/(\d+) Repl(?:y|ies) and (\d+) Mention(?:s?)/);
$(this).text(parseInt(myreaction[1], 10) + parseInt(myreaction[2], 10)); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-15T04:27:54.143

**工作演示** [http://jsfiddle.net/BxUXX/1/](http://jsfiddle.net/BxUXX/1/)

用于添加 2 使用`parseInt`

希望能帮助到你

**代码**

```
var str = "1 Reply and 30 Mentions";

$(document).ready(function() {
   // $('header div.comments-link a').each(function(index) {
        var myreaction = str.split(" ");
        alert(parseInt(myreaction[0]) + parseInt(myreaction[3]));
   // });
});​ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-15T04:49:02.203

尝试这个：

```
$(document).ready(function() {
  $('header div.comments-link a').each(function(index) {
    var s = $(this).text().replace(/\D/g, "").split("")
    $(this).text(parseInt(s[0], 10) + parseInt(s[1], 10));
  });
}); 
```

# mysql - 将表 InnoDb 更改为 MYIASM - .MYD 和 .MYI 未找到

> ID：11489413
> 
> 赞同：0
> 
> 时间：2012-07-15T04:23:15.910
> 
> 标签：mysql, innodb

我使用 alter 命令将我的一张表的引擎从 InnoDB 更改为 MyIASM，phpmyadmin 显示当前引擎是 MyIASM。但是在相应的 DB 目录中的 /var/lib/mysql 中，仅找到该表的 .frm 文件 .MYD 和 .MYI 丢失。我怀疑引擎没有改变。请建议必须做什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-15T07:58:03.173

要验证表是否确实已更改问题：

```
SHOW CREATE TABLE your_schema.your_table \G 
```

寻找`ENGINE=...`零件。还有其他方法可以做到这一点，但这个很好。这个查询的结果是可靠的并且呈现了事实。

接下来，让我们验证位置。由于您可以找到该`.FRM`文件，因此您很可能在正确的位置，但是让我们：

```
SELECT @@datadir; 
```

看看那里。

最后，MyISAM 表可以为数据和索引[指定](http://dev.mysql.com/doc/refman/5.1/en/create-table.html)`DATA DIRECTORY`一个不同的位置，称为and `INDEX DIRECTORY`，并在 的结果中看到`SHOW CREATE TABLE`。我看不出为什么要设置这些，但是……值得一看。

只是猜测发生了什么：这是一张大桌子吗？也许只是花了一些时间`ALTER`，而您甚至在重建桌子时也在寻找？

# python - wxpython 还是 pygame？

> ID：11489415
> 
> 赞同：0
> 
> 时间：2012-07-15T04:23:34.340
> 
> 标签：python, wxpython, pygame

我正在尝试为足球队和教练制作一个虚拟剧本应用程序。我一直在试图决定我应该使用 wxpython 和 pygame 还是只使用 wxpython。我希望它只是 X 和 O 的类型。无论如何我可以只使用 wxpython 为 X 和 O 进行拖放，我也可以在 wxpython 中画线吗？提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-15T04:33:29.477

两者使用库都很简单有趣。我个人推荐 pygame，因为我有一些经验并且很喜欢它。它是一个基于 SDL 的成熟 2D 游戏 api，而 wxpython 更适合于对话框、gui 和控件，或者更确切地说是软件编程。我说使用 pygame，请务必彻底阅读和参考[文档](http://www.pygame.org/docs/)，这里有一些很好的[教程](http://thenewboston.org/list.php?cat=20)可以帮助您入门。

是的，您可以在 wxpython 中画线，但用于游戏目的有点困难。

# ruby-on-rails - Rails renders HTML when JSON is requested when there is an error

> ID：11489416
> 
> 赞同：1
> 
> 时间：2012-07-15T04:23:40.127
> 
> 标签：ruby-on-rails, ruby-on-rails-3

I'm using Rails as a JSON-only API server but whenever there is an exception in the a controller, say attempting to delete a record with an ID of 1 when it doesn't exist, Rails doesn't respond with JSON it responds with HTML, either a trace if in development or a generic 'something went wrong' page in production.

Right now I'm wrapping everything in a rescue and spitting out a JSON response manually...

```
class AmazonAccountsController < ApplicationController

  respond_to :json, :xml

  def destroy
    # Handle bad API calls.
    begin
      @account = AmazonAccount.find(params[:id])
      @account.destroy
      # unrelated code...
    rescue
      render :json => {:errors => {:bad => "ID doesn't exist."}}.to_json
    end
  end

end 
```

but this doesn't seem like the ideal way to handle this.

This is in Rails 3.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T05:09:14.637

You're looking for [`rescue_from`](http://guides.rubyonrails.org/action_controller_overview.html#rescue_from):

> If you want to do something a bit more elaborate when catching errors, you can use `rescue_from`, which handles exceptions of a certain type (or multiple types) in an entire controller and its subclasses.
> 
> When an exception occurs which is caught by a `rescue_from` directive, the exception object is passed to the handler. The handler can be a method or a `Proc` object passed to the `:with` option. You can also use a block directly instead of an explicit `Proc` object.

So you could do something like this:

```
class ApplicationController < ActionController::Base
    rescue_from your_list_of_exceptions..., :with => :some_exception_handler
private
    def some_exception_handler
        render :json => { :error => 'some error message of some sort' }, :status => :unprocessable_entity # or whatever status makes sense.
    end
end 
```

The [API documentation on `rescue_from`](http://api.rubyonrails.org/classes/ActiveSupport/Rescuable/ClassMethods.html#method-i-rescue_from) is worth a look as well.

# php - 自定义分类页面的 php 错误 — WordPress

> ID：11489420
> 
> 赞同：0
> 
> 时间：2012-07-15T04:26:22.597
> 
> 标签：php, wordpress, taxonomy

我已经在 WordPress 中成功创建了一个自定义分类法，并创建了一个页面，其中列出了指定分类法下的所有帖子，文件名为`taxonomy.php`. 它可以工作，但有些 php 没有打印任何文本。该页面似乎在打开错误报告的情况下产生了一些 php 错误：

```
Notice: Undefined variable: term_name in WEBSITE_ROOT/themes/starkers/taxonomy.php on line 24 
```

变量是`$term_name`。这是我`taxonomy.php`页面中的代码。我跟着[这个教程](http://net.tutsplus.com/tutorials/wordpress/introducing-wordpress-3-custom-taxonomies/comment-page-1/#comments)。我以为我很好地遵循了教程。

```
<?php

get_header(); ?>

<?php $term = get_term_by( 'slug', get_query_var( 'term' ), get_query_var( 'taxonomy' ) ); ?>

            <h1><?php
                printf( __( 'Posts classified under: %s', 'starkers' ), '<span>' . $term_name . '</span>' );

            ?></h1>

            <?php
                $category_description = category_description();
                if ( ! empty( $category_description ) )
                    echo '' . $category_description . '';

            get_template_part( 'loop', 'category' );
            ?>

<?php get_footer(); ?> 
```

基本上，它不会在“帖子分类下”之后打印分类名称：

我试着摆弄代码，但没有运气。如果有帮助，这是我用于`functions.php`注册分类的代码：

```
add_action( 'init', 'build_taxonomies', 0 );

function build_taxonomies() {
register_taxonomy(
    'quotees',
    'post',
    array(
        'hierarchical' => false,
        'label' => 'quotees',
        'query_var' => true,
        'public' => true,
        'rewrite' => true
    )
);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-15T05:01:17.160

如果你看评论，显然`$term_name`应该是`$term->name`。其实大部分`$term_blahs`应该是`$term->blah`。

# javascript - 用于在 HTML 中搜索字符串并返回 True 的 Javascript 条件

> ID：11489422
> 
> 赞同：0
> 
> 时间：2012-07-15T04:26:49.443
> 
> 标签：javascript

我正在使用一个名为 Optimizely 的登陆页面 A/B 测试工具。其中一种定位方法是通过访问者所在的 URL + 自定义 Javascript 条件。有一个框，我可以在其中输入 Javascript 条件。我需要条件来搜索 HTML 中的“checkout”一词，如果找到则评估为 true。任何帮助将非常感激。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-15T04:36:55.527

我使用了这篇文章中的 treewalker 代码： [getElementsByTagName() 等效于 textNodes](https://stackoverflow.com/questions/2579666/getelementsbytagname-equivalent-for-textnodes)

```
function checkoutIsPresent() {
  var result = [];
  var root = document.body;

  var node = root.childNodes[0];
  while (node != null) {
    if (node.nodeType == 3) { /* Fixed a bug here. Thanks @theazureshadow */
      result.push(node.nodeValue);
    }

    if (node.hasChildNodes()) {
      node = node.firstChild;
    }
    else {
      while (node.nextSibling == null && node != root) {
        node = node.parentNode;
      }
      node = node.nextSibling;
    }
  }

  if (!result) return false;
  for (var i = 0, len = result.length; i < len; i++) {
    if (result[i].indexOf('checkout') > -1) {
      return true;
    }
  }
  return false;
} 
```

如果可以这样调用：

```
if(checkoutIsPresent()){
    // do something
} 
```

# javascript - Ruby On Rails：如何将 javascript 变量传递给参数哈希？

> ID：11489424
> 
> 赞同：0
> 
> 时间：2012-07-15T04:27:35.177
> 
> 标签：javascript, jquery, ruby-on-rails

我有一个在表单中创建的 javascript 数组变量，`action => new`但我似乎无法找到一种方法将此变量作为字段与其他表单字段输入一起返回给控制器。如何将此数组设置为表单中的隐藏字段。有没有办法将数组传递回参数散列到控制器？

```
$(document).ready(function() {

    arr = new Array();

        $(document).on('change', 'select[id ^="package"]', function() {
            var arr = $('select[id ^="package"]').map(function(){
                return this.value
            })          
        });

}); 
```

我有这个 javascript 数组，我想提交`:packages`设置为 javascript 变量的表单`arr`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T07:21:31.123

如果您已经有一个隐藏字段，您可以在 JavaScript 中执行此操作：

```
$('#MODELNAME_packages').val(arr); 
```

# vim - 如何从（并复制到）系统的剪贴板进行 vim 粘贴？

> ID：11489428
> 
> 赞同：932
> 
> 时间：2012-07-15T04:28:19.017
> 
> 标签：vim, editor, clipboard

与其他编辑器不同，vim 将复制的文本存储在自己的剪贴板中。因此，我很难从网页中复制一些文本并将其粘贴到当前的工作文件中。碰巧我必须打开 gedit 或手动输入。

我可以在系统的剪贴板上进行 vim 粘贴吗？

* * *

## 回答 #1

> 赞同：1025
> 
> 时间：2012-07-15T04:31:17.700

请注意，如果**返回 0 ，则从系统剪贴板复制/粘贴****将不起作用`:echo has('clipboard')`**。在这种情况下，vim 没有与该`+clipboard`功能一起编译，您必须安装不同的版本或重新编译它。一些 linux 发行版默认提供最小的 vim 安装，但如果你**安装`vim-gtk`or`vim-gtk3`包**，你仍然可以获得额外的功能。

和寄存器用于系统的剪贴板 ( `"*`) 。根据您的系统，他们可能会做不同的事情。例如，在 OSX 或 Windows 等不使用 X11 的系统上，该寄存器用于读取和写入系统剪贴板。在 X11 系统上，两个寄存器都可以使用。有关更多详细信息，请参阅，但基本上类似于 X11 的选择（通常复制您使用鼠标选择的内容并使用鼠标中键粘贴），并且类似于 X11 的选择（正确的剪贴板）。`"+``:help registers``"*``:help x11-selection``"*``_PRIMARY_``"+``_CLIPBOARD_`

如果这一切都超出了您的想象，请尝试使用`"*yy`或`"+yy`将一行复制到系统的剪贴板。假设您有适当的编译选项，一个或另一个应该可以工作。

您可能希望将其重新映射为对您更方便的东西。例如，您可以输入`vnoremap <C-c> "*y`您的`~/.vimrc`，以便您可以直观地选择并按`Ctrl`+`c`拉到系统的剪贴板。

您可能还想查看 中`'clipboard'`描述的选项`:help cb`。在这种情况下，您可以`:set clipboard=unnamed`或`:set clipboard=unnamedplus`使所有拉/删除操作自动复制到系统剪贴板。在某些情况下，当您在剪贴板中存储其他内容时，这可能会带来不便，因为它会覆盖它。

要粘贴，您可以使用`"+p`或`"*p`（同样，取决于您的系统和/或所需的选择），或者您可以将它们映射到其他东西。我明确地键入它们，但我经常发现自己处于插入模式。如果您处于插入模式，您仍然可以使用`<C-r><C-p>*`或以适当的缩进方式粘贴它们`<C-r><C-p>+`。见`:help i_CTRL-R_CTRL-P`。

还值得一提的是 vim 的`paste`选项 ( `:help paste`)。这将 vim 置于一种特殊的**“粘贴模式”**，禁用其他几个选项，允许您使用终端仿真器或多路复用器熟悉的粘贴快捷方式轻松粘贴到 vim。（只需键入`:set paste`以启用它，粘贴您的内容，然后键入`:set nopaste`以禁用它。）或者，您可以使用该`pastetoggle`选项设置切换模式的键码 ( `:help pastetoggle`)。

我建议使用寄存器而不是这些选项，但如果它们仍然太吓人，这可能是一个方便的解决方法，同时你正在完善你的 vim 印章。

有关`:help clipboard`更多详细信息，请参阅。

* * *

## 回答 #2

> 赞同：249
> 
> 时间：2012-07-15T15:46:02.397

您可以通过 gnome-terminal 的粘贴快捷方式粘贴到 vim 中。将文件置于插入模式并使用

`Ctrl`+ `Shift`+ `v`。

记得提前

```
 :set paste 
```

以避免弄乱缩进。

* * *

## 回答 #3

> 赞同：93
> 
> 时间：2018-04-20T03:35:41.750

我相信这个问题应该得到一个更客观、更形象的答案：

**进入粘贴模式**

*   `ESC`
*   ：设置粘贴
*   按`i`
*   `SHIFT`+ `Insert`（在剪贴板上复制文本）

**离开粘贴模式**

*   `ESC`
*   :set nopaste
*   按`i`

您粘贴了文本，您可以再次输入。

* * *

## 回答 #4

> 赞同：47
> 
> 时间：2013-05-16T08:50:18.547

对于我来说，该配置适用于复制和粘贴

```
" copy and paste
vmap <C-c> "+yi
vmap <C-x> "+c
vmap <C-v> c<ESC>"+p
imap <C-v> <ESC>"+pa 
```

* * *

## 回答 #5

> 赞同：46
> 
> 时间：2012-07-15T04:38:20.693

### Linux

在我的 Linux 系统上，`+`和`*`寄存器映射到 X11 选择，可以用鼠标中键粘贴。使用`:set clipboard=unnamed`和`:set clipboard=unnamedplus`时，寄存器映射到剪贴板，可以用 CTRL-V 粘贴。

细节似乎在某种程度上取决于配置和系统，因此您的里程肯定会有所不同。不过，它绝对应该让你指向正确的方向。

### 也可以看看

[http://vim.wikia.com/wiki/Accessing_the_system_clipboard](http://vim.wikia.com/wiki/Accessing_the_system_clipboard)

* * *

## 回答 #6

> 赞同：42
> 
> 时间：2013-05-15T21:02:46.647

这将是您在 vimrc 中为此目的所需的行：

```
set clipboard+=unnamed  " use the clipboards of vim and win
set paste               " Paste from a windows or from vim
set go+=a               " Visual selection automatically copied to the clipboard 
```

* * *

## 回答 #7

> 赞同：24
> 
> 时间：2013-07-21T08:55:55.133

***剪贴板***

有一个特殊的寄存器用于存储这个选择，它是 "* 寄存器。除非关于所选择的文本的信息即将改变（例如用鼠标左键单击某处），或者当另一个应用程序想要改变时，否则这里没有任何内容粘贴选定的文本。然后将文本放入“* 寄存器。例如，要剪切一条线并使其成为当前选择/将其放在剪贴板上：

```
 "*dd 
```

类似地，当您想从另一个应用程序中粘贴选择时，例如，通过单击鼠标中键，首先将选择放入 "* 寄存器，然后像任何其他寄存器一样'放置'。例如，将选择放入（剪贴板的内容）：

```
 "*p 
```

***寄存器* *E354***

```
> There are nine types of registers:                      
> 1\. The unnamed register ""
> 2\. 10 numbered registers "0 to "9
> 3\. The small delete register "-
> 4\. 26 named registers "a to "z or "A to "Z
> 5\. four read-only registers ":, "., "% and "#
> 6\. the expression register "=
> 7\. The selection and drop registers "*, "+ and "~ 
> 8\. The black hole register "_
> 9\. Last search pattern register "/ 
```

**从剪贴板粘贴**

```
1\. Clipboard: Copy
2\. Vim insertmode, middle mouse key 
```

**检查终端中的 X11 剪贴板支持**

当您喜欢在终端中运行 Vim 时，您需要查找使用剪贴板支持编译的 Vim 版本。检查 X11 剪贴板支持，从控制台输入：

```
% vim --version 
```

如果您看到“+xterm_clipboard”，您就可以开始了。

[http://vim.wikia.com/wiki/Accessing_the_system_clipboard](http://vim.wikia.com/wiki/Accessing_the_system_clipboard)

> X 服务器维护三个选项，称为：
> 
> 小学、中学和剪贴板
> 
> PRIMARY 选择通常用于通过鼠标中键实现复制和粘贴。SECONDARY 和 CLIPBOARD 选项很少被应用程序使用。

[http://linux.die.net/man/1/xsel](http://linux.die.net/man/1/xsel)

* * *

## 回答 #8

> 赞同：13
> 
> 时间：2014-01-06T23:55:57.690

没有 +clipboard 所以我想出了这个使用 xsel 的替代解决方案：

添加到你的 ~/.vimrc:

`vnoremap <C-C> :w !xsel -b<CR><CR>`

* * *

## 回答 #9

> 赞同：13
> 
> 时间：2014-08-22T18:36:48.350

我尝试了上面的建议，但没有一个在我的环境中起作用。（通过 ssh 克隆 Windows PuTTY）

一些额外的谷歌搜索出现了： [https ://unix.stackexchange.com/questions/110684/copy-paste-into-sshd-vim-from-local-windows-clipboard](https://unix.stackexchange.com/questions/110684/copy-paste-into-sshd-vim-from-local-windows-clipboard)

其中一条评论建议使用`SHIFT+INSERT`which 将我的桌面剪贴板粘贴到 Vim 的缓冲区中。`Ctrl-C`已经在努力从 Vim 复制到桌面的剪贴板。

* * *

## 回答 #10

> 赞同：9
> 
> 时间：2019-09-12T11:15:27.710

**复制到操作系统剪贴板**

在可视模式下选择文本，按`"*y`

**从操作系统剪贴板粘贴**

按`"*p`

* * *

## 回答 #11

> 赞同：7
> 
> 时间：2013-12-08T00:01:34.890

给 Vim 安装不支持`*`和`+`寄存器的人的快速说明。无需下载新的 Vim 安装即可从剪贴板粘贴。这是另一种方法：

1.  安装`parcellite`（内存占用少的剪贴板管理器）；

2.  在您的`.vimrc`文件中，添加以下内容：

    ```
    command Clip r !parcellite -c 
    ```

3.  重启vim。

现在，当您`:Clip`作为`ex`命令输入时，剪贴板的内容将被粘贴到光标处。您还可以将新命令映射到功能键，以便能够一键完成此操作。

* * *

## 回答 #12

> 赞同：7
> 
> 时间：2017-07-06T09:04:39.583

最简单的解决方案，也适用于不同的 Linux 机器`ssh`：

1.  检查 vim 是否支持 X-11 剪贴板: `vim --version | grep clipboard`. 如果它报告回来`-clipboard`，`-xterm_clipboard`你应该安装`vim-gtk`或者`vim-gnome`（在arch linux上的gvim）

2.  将以下行添加到您的`.vimrc`:

> ```
> set clipboard=unnamedplus
> set paste 
> ```

3.  如果您通过 ssh 在另一台机器上登录，请使用选项 -Y：`ssh -Y machine`

现在，复制和粘贴应该在单个机器上完全按照预期工作，并且只使用`y`for yank 和`p`for paste 跨不同机器。注意`.vimrc`在您要使用此功能的所有机器上进行修改。

* * *

## 回答 #13

> 赞同：6
> 
> 时间：2018-03-02T13:58:03.190

如果您先使用鼠标，请执行

```
 :set paste 
```

然后`right click mouse`，缓冲区中的内容将被粘贴

* * *

## 回答 #14

> 赞同：5
> 
> 时间：2016-03-14T12:02:37.807

这对我有用：`Ctrl`++`Shift``V`

* * *

## 回答 #15

> 赞同：5
> 
> 时间：2019-07-25T12:57:26.300

`vim`我在`iTerm2`作为主要开发环境运行的 2017 年中期 Macbook Pro 上遇到了这个问题。

正如其他答案所暗示的那样，我运行`vim --version`并注意到它返回`-clipboard`，这意味着`vim`我的机器附带的版本尚未使用剪贴板选项进行编译。

for的`homebrew`包`vim`似乎可以使用该`clipboard`选项进行编译，因此对我的修复是：

1.  跑`brew install vim`
2.  添加`set clipboard+=unnamed`到我的`~/.vimrc`文件
3.  关闭并重新打开`iTerm2`

* * *

## 回答 #16

> 赞同：4
> 
> 时间：2014-05-25T14:10:47.983

继康纳的回答之后，这很棒，但`C-R C-p +` 在`C-R C-p *`插入模式下有点不方便。同上`"*p`和`"+p`来自命令模式。

一位 VIM 大师建议以下内容映射`C-v`到做什么`C-r C-p +`。

> 你只能有 `:inoremap <C-v> <C-o>"+p`插入模式
> 
> 如果您真的想覆盖逐块视觉模式（他不推荐，因为视觉模式很好），您可以 `map <C-v> "+p`

* * *

## 回答 #17

> 赞同：4
> 
> 时间：2019-07-17T23:40:14.100

在 Linux 或 Mac 上使用 Vim 8+，您现在可以简单地使用操作系统的本机粘贴（`ctrl+shift+V`在 Linux 上，`cmd+V`在 Mac 上）。不要按`i`插入模式。

它将粘贴操作系统剪贴板的内容，保留空格和制表符而不添加自动缩进。它相当于旧的`:set paste`, `i`, `ctrl+shift+V`, `esc`,`:set nopaste`方法。

您甚至不再需要安装`+clipboard`或`+xterm_clipboard`vim 功能。此功能称为“括号粘贴”。有关更多详细信息，请参阅[将文本粘贴到 vim 时关闭自动缩进](https://stackoverflow.com/questions/2514445/turning-off-auto-indent-when-pasting-text-into-vim/56781763#56781763)

* * *

## 回答 #18

> 赞同：3
> 
> 时间：2016-08-16T08:00:27.843

如果您在 MAC OSX 中使用 vim，不幸的是它带有较旧的版本，并且不符合剪贴板选项。幸运的是，自制软件可以轻松解决这个问题。

**安装vim：**

`brew install vim --with-lua --with-override-system-vim`

**安装vim的gui版本：**

`brew install macvim --with-lua --with-override-system-vim`

重启终端生效。

将以下行附加到`~/.vimrc`
`set clipboard=unnamed`

现在您可以在 vim 中复制该行`yy`并将其粘贴到系统范围内。

* * *

## 回答 #19

> 赞同：3
> 
> 时间：2020-09-01T19:55:35.033

如果你有它，试着从你的 vimrc 中删除它： set mouse=a

它与粘贴功能相混淆。

* * *

## 回答 #20

> 赞同：3
> 
> 时间：2021-04-28T10:10:29.157

### 在 Linux (Ubuntu 20.04) 中对我有用的东西

*   复制到系统剪贴板：

    1.  在可视模式下选择要复制的内容。
    2.  类型`"+y`
    3.  按`Enter`
*   粘贴一些表单系统的剪贴板：

    1.  在 vim 中移动到要粘贴复制文本的位置。
    2.  只需键入
        *   `"+P`在光标之前粘贴或
        *   `"+p`在光标后粘贴。

*要了解更多它是如何工作*的：[从/到其他程序复制和粘贴到/从 Vim！](https://youtu.be/E_rbfQqrm7g)

* * *

## 回答 #21

> 赞同：2
> 
> 时间：2013-11-20T20:26:38.880

除了设置之外，如果您在 Mac OS X 10.9 上的 Terminal.app 上使用 vim `:set clipboard=unnamed`，您应该使用`mvim -v`可以使用的。`brew install macvim`默认 vim 不支持剪贴板选项。

* * *

## 回答 #22

> 赞同：2
> 
> 时间：2016-12-21T00:00:03.020

如果您想更改 vimrc 等，其他解决方案也很好......但是我想要一种简单的方法来***从***vim复制***到***我的系统键盘。这就是我想出的。

*   使用可视模式选择要复制的文本`v`
*   按`:`（会自动展开显示`:'<,'>`）
*   键入`y *` **或** `y +`（取决于您的系统）将所选文本拉到系统剪贴板

* * *

## 回答 #23

> 赞同：2
> 
> 时间：2019-05-02T12:04:02.070

由于*vim 8*右键单击​​默认启用可视模式。这可以防止“正常”复制和粘贴（将其称为“设计缺陷” [https://github.com/vim/vim/issues/1326](https://github.com/vim/vim/issues/1326)）。通过执行以下操作修复它：

`echo "set mouse-=a" >> ~/.vimrc`.

退出并重新启动 vim。

* * *

## 回答 #24

> 赞同：1
> 
> 时间：2015-06-15T00:50:34.217

可能还值得一提的是，在使用 Vim 的 OSX 上，您可以用鼠标选择文本，Cmd-C 复制到 OSX 系统剪贴板，复制的文本将在 Vim 之外的剪贴板中可用。

换句话说，OSX 将其视为普通窗口，这就是备受诟病的 Apple“命令”按钮派上用场的地方。

B-30

* * *

## 回答 #25

> 赞同：1
> 
> 时间：2015-07-09T02:30:31.637

有两种简单的方法可以做到这一点。使您的文件处于插入模式，然后 1）按鼠标中的按钮（滚轮），或 2）Ctrl + Shift + V

* * *

## 回答 #26

> 赞同：1
> 
> 时间：2016-07-23T21:48:21.930

基于@lis2 的回答，我使用了一个更简单的配置，不会在最后强制插入模式：

```
" Copy and paste
if has('clipboard') && !has('gui_running')
  vnoremap <C-c> "+y
  vnoremap <C-x> "+d
  vnoremap <C-v> "+p
  inoremap <C-v> <C-r><C-o>+
endif 
```

请注意，所有这些都会覆盖默认的 Vim 映射：

*   [`v_CTRL-C`](https://vimhelp.appspot.com/visual.txt.html#v_CTRL-C)：停止视觉模式
*   [`v_CTRL-X`](https://vimhelp.appspot.com/change.txt.html#v_CTRL-X): 从数字中减去 [count]
*   [`v_CTRL-V`](https://vimhelp.appspot.com/visual.txt.html#v_CTRL-V): 块状视觉模式
*   [`i_CTRL-V`](https://vimhelp.appspot.com/insert.txt.html#i_CTRL-V)：按字面意思插入下一个非数字，也映射到`i_CTRL-Q`

作为一种替代方法，可以使用“yank”、“delete”和“put”Vim 动词：和分别启发`<C-y>`的`<C-d>`键`<C-p>`。这些只会覆盖一个默认映射：

*   [`i_CTRL-P`](http://vimhelp.appspot.com/insert.txt.html#i_CTRL-P)：向后搜索关键字以完成

* * *

## 回答 #27

> 赞同：1
> 
> 时间：2017-02-25T05:59:25.893

您真正需要的是[EasyClip](https://github.com/svermeulen/vim-easyclip)。它会做到这一点，还有更多……

* * *

## 回答 #28

> 赞同：1
> 
> 时间：2020-09-05T16:35:17.523

进入vim窗口后，按`I`进入插入模式。然后将光标移动到所需位置并同时按`Ctrl`+`Insert`按钮从剪贴板粘贴。

* * *

## 回答 #29

> 赞同：1
> 
> 时间：2022-02-08T02:05:14.690

这些组合键适用于任何操作系统。

使用鼠标选择目标文本，并参考键序列进行复制、剪切和粘贴。

*   复制：`Ctrl`+`Del`
*   粘贴：`Shift`+`Insert`

*   切：`Shift`+`Del`
*   粘贴：`Shift`+`Insert`

* * *

## 回答 #30

> 赞同：0
> 
> 时间：2015-01-20T21:24:45.303

当我使用未与 Gnome 集成的 Debian vim 时（vim --version | grep clip # 显示不支持剪贴板），我可以在按住 Shift 键并用鼠标选择文本后复制到剪贴板，就像使用任何其他诅咒程序。正如我从@Conner 的评论中得出的那样，当它感应到我的 Shift 按下时，它是终端（在我的例子中是 gnome-terminal）关闭它的鼠标事件报告。我猜基于 curses 的程序可以在向终端发送某个 Escape 序列后接收鼠标事件。

* * *

## 回答 #31

> 赞同：0
> 
> 时间：2015-05-06T09:30:17.317

如果您在 Windows 上并且想要使用粘贴系统剪贴板的内容，请`p`键入此命令。

```
:set clipboard = unnamed 
```

这解决了我的问题。

* * *

## 回答 #32

> 赞同：0
> 
> 时间：2015-08-23T18:50:41.557

对于某些国际键盘，您可能需要按`"`+`Space`才能获得`"`.

因此，在这种情况下，您将不得不按下`"``Space``+``y`或`"``Space``*``y`复制。

和`"``Space``+``p`或`"` `Space``*``p`粘贴。

* * *

## 回答 #33

> 赞同：0
> 
> 时间：2019-12-04T12:22:15.943

我使用了 NM Pennypacker 的答案，并通过自制软件为 2011 年初的 MacBook Pro 安装了 vim：

```
brew install vim 
```

现在我还可以使用 "* 寄存器在 vim 中复制和粘贴文本。我什至不必更改 ~/.vimrc 文件或 $PATH 中的某些内容。Homebrew 在 /usr/local/bin 中添加了符号链接，例如vim -> ../Cellar/vim/8.1.2350/bin/vim。

以前可行的替代方法是在 vim 中复制一些文本行，方法是用鼠标标记它并在 mac 上使用复制和粘贴 (cmd + c, cmd + v)。此选项仅在您要复制和粘贴的文本大小小于 vim 的窗口大小时才有效。如果你想通过标记整个窗口或使用 cmd + a 来复制 vim 中的所有文本，这将复制控制台的其他部分，在启动 vim 之前编写，这很烦人。

所以，我很高兴找到了使用剪贴板寄存器的新方法。

# android - AsyncTaskLoader 第三个任务消失

> ID：11489437
> 
> 赞同：0
> 
> 时间：2012-07-15T04:30:37.743
> 
> 标签：android, android-loadermanager, asynctaskloader, android-loader

我正在尝试实现一个列表/详细信息工作流程，其中点击列表项会导致详细信息部分加载与新选择的行相关的数据。我正在尝试使用 an`AsyncTaskLoader`来完成此操作。我遇到了一个问题，如果我连续足够快地点击三个列表项，实际上只会发生两个负载，而第三个会丢失。

我编写了一个示例活动来演示这种行为。当点击按钮三次时，该`loadInBackground()`方法只会被调用两次。我在某个地方错过了一个电话吗？

```
public final class LoaderActivity extends Activity implements LoaderManager.LoaderCallbacks<Integer> {

    private Button button;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.loader);

        button = (Button) findViewById(R.id.load_button);

        getLoaderManager().initLoader(0, null, this);
    }

    public void onButtonClick(View source) {
        Loader<Integer> loader = getLoaderManager().getLoader(0);
        if (loader != null) {
            loader.forceLoad();
        }
    }

    @Override
    public Loader<Integer> onCreateLoader(int id, Bundle args) {
        return new IntLoader(this);
    }

    @Override
    public void onLoadFinished(Loader<Integer> listLoader, Integer data) {
        button.setText(String.valueOf(data));
    }

    @Override
    public void onLoaderReset(Loader<Integer> listLoader) {

    }

    private static final class IntLoader extends AsyncTaskLoader<Integer> {

        private static final AtomicInteger counter = new AtomicInteger(0);

        IntLoader(Context context) {
            super(context);
        }

        @Override
        public Integer loadInBackground() {
            int result = counter.getAndIncrement();

            // Simulate a potentially expensive web call
            try {
                Thread.sleep(5000);
            } catch (InterruptedException e) {

            }

            return result;
        }

        @Override
        protected void onStopLoading() {
            cancelLoad();
        }

        @Override
        protected void onReset() {
            onStopLoading();
        }

        @Override
        public void deliverResult(Integer data) {
            if (isStarted()) {
                super.deliverResult(data);
            }
        }

    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T03:27:18.033

在方法中调用`restartLoader(0, null, this)`而不是似乎已经解决了这个问题。随着我对s 的更多了解，这听起来像是更合适的调用方法，因为我当时想丢弃任何旧结果。`getLoader(0)``onButtonClick()``Loader`

# c++ - 为什么两个图像对于相同的方法表现不同？

> ID：11489438
> 
> 赞同：1
> 
> 时间：2012-07-15T04:30:40.520
> 
> 标签：c++, image

[我使用这篇文章http://msdn.microsoft.com/en-us/library/bb384843.aspx](http://msdn.microsoft.com/en-us/library/bb384843.aspx)在 Visual Studio 2010 中创建了 win32 应用程序 。之后，我向这个项目添加了一个 cpp 文件，粘贴了我从图形教程中获得的代码片段。此代码如下所示。

要编译此解决方案，我必须在项目属性中将字符集更改为使用多字节字符集。

之后，我在项目文件夹中插入了一张名为 truck.bmp 的图片。

当我使用这张照片时

![在此处输入图像描述](../Images/ce4a00dbf46c986452e4e3e92062d2ae.png)

它给出了这个错误信息

> 未加载位图 - 确保项目文件夹中存在文件“truck.bmp”，因为根据程序，hbitmap 为空。

但是当我使用这张照片时

![在此处输入图像描述](../Images/a17281ae6cb39bea1287755c057ea355.png)

它正确加载。程序使用 LoadImage 函数加载图像。

我不明白为什么这两张图片对于相同的功能表现不同。有人可以解释原因。抱歉我的问题中的大图

```
/* to demonstrate loading and displaying of bitmaps */
  #include < windows.h >
  LRESULT CALLBACK WindowProc(HWND hWnd, UINT uMsgId, WPARAM wParam,
                        LPARAM lParam);

  int WINAPI WinMain(HINSTANCE hInstance, HINSTANCE hPrevInstance,
               LPSTR lpCmdLine, int nCmdShow)
{
static char name[]="Bitmap Display";

HWND hWnd;
MSG msg;
WNDCLASS wndClass;
wndClass.style=0;
wndClass.lpfnWndProc=WindowProc;
wndClass.cbClsExtra=0;
wndClass.cbWndExtra=0;
wndClass.hbrBackground=(HBRUSH)GetStockObject(GRAY_BRUSH);
wndClass.hIcon=LoadIcon(NULL, IDI_APPLICATION);
wndClass.hCursor=LoadCursor(NULL, IDC_ARROW);
wndClass.hInstance=hInstance;
wndClass.lpszMenuName=NULL;
wndClass.lpszClassName=name;

if(RegisterClass(&wndClass) == 0)
{
   MessageBox(0, "The Window is not registered", "Message", MB_OK);
   return 0;
}

    hWnd=CreateWindow(name, name, WS_OVERLAPPEDWINDOW, CW_USEDEFAULT, CW_USEDEFAULT,         CW_USEDEFAULT,  CW_USEDEFAULT, NULL, NULL, hInstance, NULL);

if(hWnd==0)
{
   return 0;
}

ShowWindow(hWnd, nCmdShow);
UpdateWindow(hWnd);

while(GetMessage(&msg, NULL, 0, 0))
{
   TranslateMessage(&msg);
   DispatchMessage(&msg);
 }
 msg.wParam;
  }

   LRESULT CALLBACK WindowProc(HWND hWnd, UINT uMsgId, WPARAM wParam, LPARAM lParam)
 {
HBITMAP hbitmap;
BITMAP bitmap;
HDC hdc, hmemdc;

switch(uMsgId)
{
case WM_PAINT:
 PAINTSTRUCT paintStruct;
 hdc= BeginPaint(hWnd, &paintStruct);

 /* loading the bitmap from a BMP file (ensure the file is present under the    project folder) */
 hbitmap= (HBITMAP)LoadImage(NULL, "truck.bmp",IMAGE_BITMAP, 0,0, LR_LOADFROMFILE    );

 if(hbitmap == NULL)
 {
    MessageBox(NULL, "Bitmap not loaded- Ensure the file 'truck.bmp' is present in the project folder","Error",MB_OK);
 }

 hmemdc= CreateCompatibleDC(hdc);
 SelectObject(hmemdc, hbitmap);
 GetObject(hbitmap, sizeof(BITMAP), &bitmap);

 /* displaying the bitmap at certain x,y position on the window client area */
 BitBlt(hdc, 0, 0, bitmap.bmWidth,bitmap.bmHeight, hmemdc,0,0, SRCCOPY);

 /* displaying the bitmap with scaled dimensions at certain x,y position on the window client area */
 StretchBlt(hdc, bitmap.bmWidth+5, 0, bitmap.bmWidth*2,bitmap.bmHeight*2,  hmemdc,0,0, bitmap.bmWidth,bitmap.bmHeight,SRCCOPY);

 DeleteDC(hmemdc);
 DeleteObject(hbitmap);
 EndPaint(hWnd, &paintStruct);
 return 0;

case WM_DESTROY:
 PostQuitMessage(0);
 return 0;
default:
 return DefWindowProc(hWnd, uMsgId, wParam, lParam);
}
  } 
```

# php - Mysql HEX函数解码多字节utf8

> ID：11489444
> 
> 赞同：2
> 
> 时间：2012-07-15T04:31:55.470
> 
> 标签：php, mysql, utf-8, character-encoding, mysqli

MySQL 使用函数 HEX() 将字符序列转换为十六进制表示。唯一的问题是它假设每个字符都是两个字节。这在大多数情况下都很好，但使用 utf-8 有时字符跨越超过 2 个字节。

例如。0xEFBFBD 是用于表示编码错误的三字节字符。当我在 utf8 编码表中一个接一个地在 DB 中有两个这样的字符时（总共 6 个字节），我尝试从表中选择十六进制（col1）...，结果为 0xC3AFC2BFC2BD 而不是 0xEFBFBD。如果我使用 php 中的查询选择它，然后在 php 中转换为十六进制，它会以正确的格式出现。

最好的功能是 MySql，它可以解码正确的多字节 UTF8。我很惊讶它似乎不存在，并且想知道其他人是否也发现了这种情况以及可能的解决方法。

我在 MySql 中找到的最接近答案的是： http: [//forums.mysql.com/read.php?103,375304,375660](http://forums.mysql.com/read.php?103,375304,375660)

但这个建议并没有真正帮助。如果没有人想到任何想法，我稍后会发布一个测试用例。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-15T11:33:21.590

该`HEX`函数返回实际存储的字节；请记住，MySQL 很乐意存储混合的字符编码。如果您为每个字符获取两个字节，则您的值必须用[`ucs2`or`utf16`](http://dev.mysql.com/doc/refman/5.5/en/charset-unicode-sets.html)编码。要检查编码，您可以使用该[`CHARSET`功能](http://dev.mysql.com/doc/refman/5.5/en/information-functions.html#function_charset)。

在这种特殊情况下，该列似乎包含以 UTF-16 编码的 쎯슿슽 (U+C3AF U+C2BF U+C2BD)。一定有其他问题让你相信 �� (U+FFFD U+FFFD) 是存储值。也许您的 PHP 程序正在使用`ucs2`或`utf16`作为连接字符集，然后将获得的文本视为 UTF-8？

* * *

**更新**：要获得字符串的 UTF-8 编码的十六进制表示——任何字符串，任何编码*）——，请使用`HEX(CONVERT(string USING utf8))`. 例如：

```
set @unknown = char(0xFFFD using ucs2);        -- stored bytes: \xFF \xFD
select hex(convert(@unknown using utf8));      -- output: EFBFBD 
```

*) 除了没有编码转换的二进制字符串

# r - 结合r中的两个图

> ID：11489447
> 
> 赞同：15
> 
> 时间：2012-07-15T04:33:00.317
> 
> 标签：r, matrix, plot, heatmap

这是我打算合并的两个图：

首先是热图图的半矩阵。.........................................

```
# plot 1 , heatmap plot
set.seed (123)
 myd <- data.frame ( matrix(sample (c(1, 0, -1), 500, replace = "T"), 50))

mmat <-  cor(myd)
diag(mmat) <- NA
mmat[upper.tri (mmat)] <- NA
heatmap (mmat, keep.dendro = F, Rowv = NA, Colv = NA) 
```

![在此处输入图像描述](../Images/5bbb9b5135c08914fc16a5d48e1638bb.png)

我需要抑制 x 和 y 列中的名称并将它们放在对角线中。

第二个图，请注意第一个图中的名称/标签对应于第二个图中的名称（x1 到 X10）：

```
 vard <- data.frame ( position = c(1, 10, 15, 18, 20, 23, 24, 30, 35, 40), 
          Names =paste ("X", 1:10, sep = ""))
    plot(vard$position, vard$position - vard$position,
                type = "n", axes = FALSE, xlab = "", ylab = NULL, yaxt = "n")
    polygon(c(0, max(vard$position + 0.08 * max(vard$position)),
                max(vard$position) + 0.08 * max(vard$position),
                0), 0.2 * c(-0.3, -0.3, 0.3, 0.3), col = "green4")
    segments(vard$position, -0.3, vard$position,                0.3)
    text(vard$position, 0.7, vard$position,
                    srt = 90)
    text(vard$position, -0.7, vard$Names) 
```

![在此处输入图像描述](../Images/766651c48015f653dd7dcc1f7566b8d0.png)

我打算旋转第一个图，以便 X1 到 X10 应该对应于第二个图中的相同，并且第二个图中的标签与第一个图之间存在连接。输出如下所示：

![在此处输入图像描述](../Images/ce7397a9ff2ab52dbc1f4aa5ff8f69a9.png) 我怎样才能做到这一点 ？

**编辑**：基于关于 add = TRUE ....的评论我正在尝试将多边形添加到热图图中，如下所示。但我找不到坐标..以这种方式绘制策略并稍后翻转实际数字......非常感谢......

![在此处输入图像描述](../Images/75a62a326b48a2561e5d803cc88613f5.png)

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-07-18T03:44:56.840

这是一个完全基于**网格**的解决方案。唯一真正涉及的部分是函数`convertToColors()`；它采用一个数字矩阵（可能包括 NA）并将其转换为 sRGB 颜色字符串（例如`"#FFFFFF`），以表示红色到白色的颜色`heat.colors()`。红色对应矩阵中的最小值，白色对应最大值，`NA`s是透明的。

除此之外，我认为代码在显示有多少**网格**函数并不比低级**基本**图形函数更复杂、更一致和更灵活方面做得很好。

```
library(grid)

## Data: heatmap
set.seed (123)
myd <- data.frame ( matrix(sample (c(1, 0, -1), 500, replace = "T"), 50))
mmat <-  cor(myd)
diag(mmat) <- NA
mmat[upper.tri (mmat)] <- NA
## Data: Positions
vard <- c(1, 10, 15, 18, 20, 23, 24, 30, 35, 40)

## Construct a function to convert a numeric matrix to a matrix of color names.
## The lowest value in the matrix maps to red, the highest to white,
## and the NAs to "transparent".
convertToColors <- function(mat) {
    # Produce 'normalized' version of matrix, with values ranging from 0 to 1
    rng <- range(mat, na.rm = TRUE)
    m <- (mat - rng[1])/diff(rng)
    # Convert to a matrix of sRGB color strings
    m2 <- m; class(m2) <- "character"
    m2[!is.na(m2)] <- rgb(colorRamp(heat.colors(10))(m[!is.na(m)]), max = 255)
    m2[is.na(m2)] <- "transparent"
    return(m2)
}

## Initialize plot and prepare two viewports
grid.newpage()
heatmapViewport <- viewport(height=1/sqrt(2), width=1/sqrt(2), angle = -135) 
annotationViewport <- viewport(y = 0.7, height = 0.4)

## Plot heat map
pushViewport(heatmapViewport)
    grid.raster(t(convertToColors(mmat)), interpolate = FALSE)
upViewport()

## Precompute x-locations of text and segment elements
n <- nrow(mmat)
v_x <- vard/max(vard)
X_x <- seq(0, 1, len=n)

## Plot the annotated green bar and line segments
pushViewport(annotationViewport)
    ## Green rectangle
    grid.polygon(x = c(0,0,1,1,0), y = c(.45,.55,.55,.45,.45),
                 gp = gpar(fill = "green4"))
    pushViewport(viewport(width = (n-1)/n))
        ## Segments and text marking vard values
        grid.segments(x0 = v_x, x1 = v_x, y0 = 0.3, y1 = 0.7)
        grid.text(label = vard, x = v_x, y = 0.75, rot = 90)
        ## Text marking heatmap column names (X1-X10)
        grid.text(paste0("X", seq_along(X_x)), x = X_x, y=0.05,
                  gp = gpar(fontface="bold"))
        ## Angled lines
        grid.segments(x0 = v_x, x1 = X_x, y0 = 0.29, y1 = 0.09)
    upViewport()
upViewport() 
```

![在此处输入图像描述](../Images/89c1376cca3ebaeff0d2e0fa6d1fb588.png)

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-07-15T22:58:59.677

This isn't really a full answer, but there are some ideas in it that might help you construct one...

Compared to the **base** graphical system, the **grid** system (on which both `ggplot2` and `lattice` are based) has **much** better support for arranging multiple graphical elements in a compound plot. It uses 'viewports' to specify locations in a plot; viewports of any height, width and degree of rotation can be 'pushed' to any location within an existing plot. Then, once pushed, they can be plotted into and, finally, stepped up from so that another plot can be placed elsewhere in the main plotting area.

If this were my project, I'd probably work towards a fully **grid**-based solution (making liberal use of higher-level `lattice` or `ggplot2` plots). The `gridBase` package, however, does provide some support for combining **base** and **grid** graphics, and I've used that in the example below.

(For more details on what I've done in the following, see the `grid.pdf`, `viewports.pdf`, and `rotated.pdf` vignettes located in `file.path(.Library, "grid", "doc")`, as well as the vignette that is opened by typing `vignette("gridBase", package="gridBase")`).

```
## Load required packages
library(lattice); library(grid); library(gridBase)

## Construct example dataset
set.seed (123)
myd <- data.frame ( matrix(sample (c(1, 0, -1), 500, replace = "T"), 50))
mmat <-  cor(myd)
diag(mmat) <- NA
mmat[upper.tri (mmat)] <- NA

## Reformat data for input to `lattice::levelplot()`
grid <- data.frame(expand.grid(x = rownames(mmat), y = colnames(mmat)), 
                   z = as.vector(mmat))

## Open a plotting device    
plot.new()     

## Push viewport that will contain the levelplot; plot it; up viewport.
pushViewport(viewport(y = 0.6, height = 0.8, width = 0.8, angle=135))
    lp <- levelplot(z~y*x, grid, colorkey=FALSE, 
                    col.regions=heat.colors(100), aspect=1,
                    scales = list(draw=FALSE), xlab="", ylab="", 
                    par.settings=list(axis.line=list(col="white")))
    plot(lp, newpage=FALSE)
upViewport()

## Push viewport that will contain the green bar; plot it; up viewport.
pushViewport(viewport(y = 0.7, height=0.2))
    # Use the gridBase::gridOMI to determine the location within the plot.
    # occupied by the current viewport, then set that location via par() call
    par(omi = gridOMI(), new=TRUE, mar = c(0,0,0,0))
    plot(0:1, 0:1,type = "n", axes = FALSE, xlab = "", ylab = "", yaxt = "n")
    polygon(x=c(0,0,1,1,0), y = c(.4,.6,.6,.4,.4), col = "green4")
upViewport() 
```

![在此处输入图像描述](../Images/91e9347e4decbe095685fef659de21f9.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-06-02T04:51:01.820

我在这行代码中遇到了错误：

```
myd <- data.frame ( matrix(sample (c(1, 0, -1), 500, replace = "T"), 50)) 
```

通过将“T”替换为`TRUE`（无引号）解决

# wpf - 如何访问 wpf datagrid 列标题模板中的元素？

> ID：11489449
> 
> 赞同：2
> 
> 时间：2012-07-15T04:33:02.100
> 
> 标签：wpf, datatemplate, wpfdatagrid

如何通过代码访问 wpf datagrid 列标题模板中的元素？

有一个解决方案，但我无法让它工作。

[http://social.msdn.microsoft.com/Forums/en/wpf/thread/3237cb62-3a6a-4663-9f1e-7894cb24c674](http://social.msdn.microsoft.com/Forums/en/wpf/thread/3237cb62-3a6a-4663-9f1e-7894cb24c674)

其实我不知道是什么

> Control.name 属性

和

> 标题

在上面的答案中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-22T10:06:57.990

对于仍然有这个问题的人。

你有这个模板：

```
<DataTemplate x:Key="DataGridColumnHeaderTemplate">
    <StackPanel>
        <DockPanel x:Name="DockPanelFilter"></DockPanel>
        <StackPanel Orientation="Horizontal">
            <TextBlock Text="{Binding}"></TextBlock>
            <Image x:Name="ImageLock" Source="Resources/lock.png" Width="14" Height="14" Margin="2,0,0,0"></Image>
        </StackPanel>    
    </StackPanel>
</DataTemplate> 
```

并且您想要访问 ImageLock 图像。你可以使用：

```
Public Shared BooAfterItemsPresenter As Boolean = False
Public Shared ColumnName As String = String.Empty
Public Shared Function FindVisualChildByName(Of T As DependencyObject)(parent As DependencyObject, name As String, columnNameI As String) As T
    Dim ColumnNameInput As String = columnNameI
    For i As Integer = 0 To VisualTreeHelper.GetChildrenCount(parent) - 1
        Dim child = VisualTreeHelper.GetChild(parent, i)
        Dim controlName As String = TryCast(child.GetValue(Control.NameProperty), String)
        If TypeName(child) = "DataGridCellsPanel" Then
            BooAfterItemsPresenter = True
        End If
        If BooAfterItemsPresenter = True AndAlso TypeName(child) = "DataGridColumnHeader" Then
            Dim DGColHeader = CType(child, DataGridColumnHeader)
            If DGColHeader.Content IsNot Nothing Then
                ColumnName = DGColHeader.Content.ToString
            Else
                ColumnName = ""
            End If
        End If
        If controlName = name AndAlso ColumnName = ColumnNameInput Then
            Return TryCast(child, T)
        Else
            Dim result As T = FindVisualChildByName(Of T)(child, name, ColumnNameInput)
            If result IsNot Nothing Then
                Return result
            End If
        End If
    Next
    Return Nothing
End Function 
```

然后当您使用此功能时：

```
Public Sub hideImageLock ()
        Dim ImageLock = FindVisualChildByName(Of Image)(dataGrid, "ImageLock", "NEU2")
        ImageLock.Visibility = Windows.Visibility.Collapsed
End Sub 
```

我希望它可以帮助一些人！

[wpf](/questions/tagged/wpf "显示标记为“wpf”的问题") [vb](/questions/tagged/vb "显示标记为“vb”的问题")

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-15T04:48:02.597

Name 属性是您赋予该控件的名称。

在 xaml 中，您可以通过 x:Name 或简单地通过该控件的 Name 属性来指定它，如下所示。这意味着您正在创建一个名为 TextBox1 的 TextBox 类的对象。

```
<TextBox x:Name="TextBox1"/>
<TextBox Name="TextBox2"/> 
```

在它后面的代码中是对象的名称

```
TextBox TextBox1 = new TextBox(); 
```

同样，Header 是 DataGridColumn 的属性。

我希望这将有所帮助。

# javascript - 使用 Javascript 检测类的 onclick

> ID：11489458
> 
> 赞同：1
> 
> 时间：2012-07-15T04:35:27.963
> 
> 标签：javascript

我正在向某些元素动态添加一个类。而且我需要获取添加的类所在的单击元素的innerHTML。任何人都可以知道如何通过引用类来获取 innerhtml 吗？

请注意，我不想使用像 jQuery 这样的任何 Javascript 库。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-15T05:15:11.060

试试这个：

```
document.body.onclick = function(e) {
    var clickedEl = window.event ? event.srcElement : e.target;
    while (clickedEl != null) {
        if (clickedEl.className
            && (" " + clickedEl.className + " ").indexOf(" yourclass ") != -1) {
            // do something, e.g.,
            alert("Element with class was clicked");
            return;
        }
        clickedEl = clickedEl.parentNode;
    }
}​ 
```

演示：http: [//jsfiddle.net/3qChA/](http://jsfiddle.net/3qChA/)

当单击具有类“yourclass”的任何元素或单击具有“yourclass”的元素的任何后代元素时，这将执行“某些操作”（在我的示例中显示警报）。显然，您可以根据需要用变量替换硬编码的“yourclass”。

# ruby - Ruby子类命名空间与父类

> ID：11489459
> 
> 赞同：5
> 
> 时间：2012-07-15T04:35:42.783
> 
> 标签：ruby, inheritance, namespaces

使用类而不是模块进行命名空间是否有效和/或可接受？也许这只是一个意见问题，但我认为有人可能有这方面的经验，可以明确地说这是否是一种公认​​的做法。

以以下类为例：

```
class Parent
end

class Parent::Child1 < Parent
end

class Parent::Child2 < Parent
end 
```

我知道上面的代码有效，但是使用类而不是命名空间的模块似乎很奇怪。我想将父类名称添加到子类的原因是因为我计划拥有很多子类并希望避免名称冲突。例如：

```
class Priority
end

class Priority::Low < Priority
end

class Temperature
end

class Temperature::Low < Priority
end 
```

替代方法是不使用命名空间，只使用父名称作为子类名称的一部分：

```
class PriorityLow < Priority
end 
```

Ruby 中有没有命名空间的最佳实践？

**更新：**

@sawa 在下面询问了一些示例。这是我构建的一个名为[classy_enum](https://github.com/beerlington/classy_enum)的 Gem，它允许用户定义作为 Enum 类型成员的类。查看[示例用法部分](https://github.com/beerlington/classy_enum#example-usage)以了解更多背景信息。我正在清理代码库，我突然想到我建议的命名方案可以改进。因此`PriorityLow`，您可以使用`Priority::Low`（或任何最有意义的，但我倾向于后者）而不是 using

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-15T04:51:47.410

我没有明确的答案，但似乎值得注意的是 Ruby`Class`类是 的子类`Module`，这对我来说意味着 Class 是 Module 的一种类型，这表明做你想做的事可能是合理的。我当然看不出有任何理由避免它，尽管我很好奇是否有人提出任何潜在的缺点。

# clojure - Clojure 子数组

> ID：11489461
> 
> 赞同：1
> 
> 时间：2012-07-15T04:36:06.697
> 
> 标签：clojure

我正在尝试学习 Clojure 和函数式编程，为此我正在尝试解决 Codingbat 中的[练习](http://codingbat.com/)。当我必须从另一个子数组中找到一个子数组 [1 2 3] 时，我被卡住了。从页面：

> 给定一个整数数组，如果 .. 1, 2, 3, .. 出现在数组中的某个位置，则返回 True。

我喜欢的不是答案本身，而是我如何解决的想法。好吧，这几乎等于答案，但任何想法都可以。

谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-15T04:55:18.533

结合[`some`](http://clojure.github.com/clojure/clojure.core-api.html#clojure.core/some)和[`partition`](http://clojure.github.com/clojure/clojure.core-api.html#clojure.core/partition)：

```
(some #{[1 2 3]} (partition 3 1 some-collection)) 
```

请注意，上面的内容不会返回布尔结果（但它仍然可以用作条件中的测试）。如果你真的想要一个布尔结果，你可以使用[`boolean`](http://clojure.github.com/clojure/clojure.core-api.html#clojure.core/boolean)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-15T04:56:06.853

把它从“数组中的项目”考虑到接受序列和返回序列的函数。这使匹配的任务变得复杂，并决定您匹配的内容是否能解决您的问题。（我相当确定 decomplect 仅在 Clojure 字典中）

一般来说：

*   从输入数据中创建一个包含您要查找的内容的序列： `autotestbed.core> (partition 3 1 (range 10))
    ((0 1 2) (1 2 3) (2 3 4) (3 4 5) (4 5 6) (5 6 7) (6 7 8) (7 8 9))`
*   然后从该序列中提取符合您标准的部分：
    `(filter your-predicate-here (partition ...)`
*   然后决定是否找到了您的答案：（有些是真的？....）

在更大的示例中，有些人会选择将其划分为几个函数，然后组合它们。

* * *

解决您最初的问题：（对于谷歌从问题标题中带来的人）

该`subvec`函数以 order-1 时间返回子向量

```
user>(subvec (vec (range 1000)) 10 20)
[10 11 12 13 14 15 16 17 18 19] 
```

# sql - 不断变化（休眠）的数据模型，如何避免服务器关闭

> ID：11489462
> 
> 赞同：0
> 
> 时间：2012-07-15T04:36:26.947
> 
> 标签：sql, hibernate, tomcat

我正在构建一个使用 hibernate 和 mysql 和 tomcat 的 web 应用程序。随着产品的发展，我不断被要求提供新功能，这通常意味着需要更改数据模型。

我现在正在做的是将数据库的所有关键数据导出到一个平面文件中。关闭数据库和服务器，重新配置数据库以匹配新的休眠映射和 mysql 表和列，以编程方式导入保存的数据以适应新的数据模型，然后重新启动服务器。

还有什么推荐的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-15T07:45:32.237

您可以使用[dbdeploy](http://code.google.com/p/dbdeploy/wiki/GettingStarted)或类似的增量数据库工具来允许您在升级之间添加增量。

他们为您跟踪数据库的版本，并在您开发时为您所做的每个模型更改添加一个新的 Delta。当您升级生产服务器时，您对它运行 dbdeploy 并确定数据库处于什么状态，然后只应用必要的升级。

这意味着您永远不必导出和重新导入数据 - 您只需将更新应用到现有数据模型 - 这将大大加快您的部署时间，但仍然会出现一些中断。

建议您在升级前转储数据库 - 因为如果出现问题，您可以快速回滚。

**编辑**

我找到了关于 EngineYard 如何使用迁移实现零停机时间的[链接](http://www.engineyard.com/blog/2011/zero-downtime-deploys-with-migrations/)——他们使用 Ruby，但方法类似于我在此处概述的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T17:19:12.967

如果您对零停机时间部署感兴趣，那么有很多方法可以解决这个问题。我发现[这篇](http://watchitlater.com/blog/2011/08/zero-downtime-deployments/)博客文章概述了实现这一目标的不同策略。

基本要点是您在单独的时间对主要应用程序进行数据库升级，并确保数据库具有可为空的列，并且代码可以调整以使列神秘地出现或消失。

作者为不同的技术提供了一些策略——但随后承认用 hibernate 来做这件事有点繁琐：

> Hibernate – 让它运行起来可能有点麻烦，尤其是在删除列的情况下。您通常会为持久类创建通用接口，并使用多个版本的实现类。在初始化 SessionFactory 之前，您可以通过使用模式或结果集元数据来决定将哪组类连接到 Hibernate。Java 中的其他持久性技术存在更糟糕的问题，尤其是许多喜欢在启动时检测类的字节码的 JPA 风格。

这是一篇很棒且有趣的文章，我建议您全部阅读。

（Facebook 和 Yahoo 不使用 Hibernate！）

从用户的角度来看，为了呈现零停机时间，它通常涉及使用受负载均衡器保护的应用程序集群 - 因此您可以将每个应用程序从策略中取出并升级它，而无需用户在重新启动时尝试访问它。你必须考虑会话粘性、数据源一致性和各种其他的东西——但主要的是它不是魔法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-15T07:19:52.200

没有别的推荐了。如果这种方式对你有用，那很好。您还可以使用 alter 语句来使您的数据库模式演变。如果由于大量数据而无法再从平面文件导出和导入数据，请使用临时表来迁移数据等。但有时，必须以某种方式迁移数据。

# actionscript-3 - 有没有办法找到在给定时间作用在身体上的所有单独的力（如 b2Vec2）？

> ID：11489463
> 
> 赞同：0
> 
> 时间：2012-07-15T04:36:43.373
> 
> 标签：actionscript-3, flash, box2d, physics-engine

我是 Box2D 的新手（和一般的 actionscript），我正在为物理学生制作一种教学工具。我试图能够显示在给定时刻作用于身体的力（作为矢量）。有没有一种方法可以找到作用在物体上的单独矢量（例如摩擦力、法向力、重力等）并让它们可以使用？任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-15T09:25:41.347

这不是一个简单的方法，不。有一个 PostSolve 函数，它可以让您获得施加到两个物体上的脉冲，以便在它们重叠时将它们分开，这有一个法线和切线（我猜是摩擦）分量。从这些你可以想出一些接近你正在谈论的东西。

如果您要使用它进行教学，需要考虑的是，为了保持图书馆的效率，许多角落都被削减了，例如。摩擦不准确，正常情况并不总是可以预期的。你可能会觉得这很有趣：[http ://www.iforce2d.net/b2dtut/collision-anatomy](http://www.iforce2d.net/b2dtut/collision-anatomy)

# ruby-on-rails - 设计 - 将用户重定向到上次查看的页面

> ID：11489466
> 
> 赞同：0
> 
> 时间：2012-07-15T04:36:56.413
> 
> 标签：ruby-on-rails, redirect, login, devise

我正在设计一个门户，用户可以在其中回答一系列问题。考虑有 10 个问题，用户尝试 5 个问题并退出门户。他在第二天重新登录。然后他应该从第 6 个问题继续。

*[我在这里](https://stackoverflow.com/questions/2532141/how-to-go-to-the-same-page-after-login-in-php)*发现了类似的问题。但是如何通过设计在rails中实现呢？

（由于每个用户最后查看的页面不同，我是否需要将每个用户的信息存储在数据库中？还是仍然可以通过会话/cookies 实现？）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-15T07:52:41.033

设计维基对此有一个页面。你可以在[这里阅读](https://github.com/plataformatec/devise/wiki/How-To%3a-redirect-to-a-specific-page-on-successful-sign-in)阅读。

您基本上需要定义一个名为的方法`after_sign_in_path_for`，该方法重定向到您想要的任何页面。

至于存储最后一个完成的问题，您可以将其存储在 cookie 中。我建议将其存储在 db 和 cookie 中的某个位置。如果可能，从 cookie 中读取，如果不存在，请点击 db。

# wpf - 获取WPF上下文菜单以通过win32子窗口打开？

> ID：11489469
> 
> 赞同：2
> 
> 时间：2012-07-15T04:37:24.603
> 
> 标签：wpf, interop, contextmenu

我有一个使用在本机 win32 中编程的 Direct2D 的子窗口（或控件，如果你愿意的话）。我将该窗口嵌入到 WPF ui 中。一切都很好，使用 MSDN [Hosting a Win32 Control in WPF](http://msdn.microsoft.com/en-us/library/ms752055.aspx) - 当然还有一些调整。

我的 WPF 应用程序有一个上下文菜单，它应该出现在应用程序的任何地方，但当然它在 win32 子窗口上不起作用，因为消息被发送到它的 WndProc 并且不被 WPF 处理。

我尝试覆盖[HwndHost::WndProc](http://msdn.microsoft.com/en-us/library/system.windows.interop.hwndhost.wndproc.aspx)并成功捕获右键单击，但无法打开“Window.ContextMenu”，因为此时我无法访问 MainWindow 对象。

我什至尝试过一些疯狂的事情，比如通过导入 win32 方法来生成新的 windows 消息，并尝试“欺骗”WPF 以在 win32 子窗口上给我一个上下文菜单：

```
if (msg == WM_RBUTTONUP)
{
    IntPtr parent = GetParent(hwndHandle);
    PostMessage(parent, (int)0x0205, (IntPtr)0x0002, lParam);

     handled = true;
} 
```

任何朝着正确方向的推动将不胜感激！！

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-15T17:38:53.547

您可以尝试在您的 win32 窗口顶部放置一个透明的 Wpf 窗口，这将允许您控制 wpf 中的所有鼠标事件、显示菜单等。同时，您可以传递任何您希望 Win32 代码看到的鼠标事件通过将 WM_LBUTTONDOWN 消息等欺骗到 win32 中。

# git - 如何别名 git checkout && git stash apply

> ID：11489471
> 
> 赞同：4
> 
> 时间：2012-07-15T04:37:54.090
> 
> 标签：git, git-commit, git-stash

所以我有两个分支 master 和 formtest

我有一个 [别名] “git switch”，它可以让我存储任何正在进行的工作并检查另一个分支。

“混帐开关”

```
switch = !git stash && git checkout 
```

现在我想创建一个 [别名]

“git 切换”

```
switchback = ??? 
```

运行时我想让它说

切换到这个分支“formtest”

然后运行 ​​stash apply

在我第一次运行“git switch”之前解开最后一个 WIP 并返回东西

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-07-27T12:58:31.780

切换回之前工作的分支

```
git checkout - && git stash apply 
```

这`-`将类似于`-`在`cd -`例如切换回您使用的最后一个分支（位置）中。

* * *

**但是**请注意，`checkout`如果您碰巧`checkout`在其间的另一个分支上，这将是错误的分支。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-10-17T21:43:42.793

```
git checkout $(git log --format=%B -n 1 stash@{0} | grep -oP '(?<=^WIP on )[^(:][^:]*' || git rev-parse stash@{0}^) 
```

这将解析包含它所在的分支名称的最新存储提交消息。如果没有分支（分离的 HEAD），它将检查存储的父提交。

# visual-studio-2010 - 什么是 Windows Server 2003/2008 中的网络服务（与 Oracle 相关）

> ID：11489472
> 
> 赞同：0
> 
> 时间：2012-07-15T04:38:09.213
> 
> 标签：visual-studio-2010, iis, oracle10g

我的 Visual Basic 程序无法连接到 Oracle。为了解决这个问题，我一直在网上寻找答案。我在 StackOverflow 中遇到了一个答案，我相信它可以解决我的问题。链接地址是：

[本地 IIS 上的 Oracle ORA-12154 错误，但 Visual Studio 开发服务器上没有](https://stackoverflow.com/questions/7176252/oracle-ora-12154-error-on-local-iis-but-not-with-visual-studio-development-serv)

好心回答这个问题的人是 Rick Schott。他的回答只是一行注释：“确保网络服务可以访问您的 TNS 目录或更改您的应用程序池以像您一样运行。”

我的问题是：“ Rick 在他的回答中推荐的*Network Service是什么意思？”* 我该如何去寻找它？谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-15T05:14:33.227

要回答您的问题，网络服务是 IIS 中的内置用户帐户，您可以将其视为您的应用程序运行的帐户。您的 IIS 托管应用程序可以作为网络服务、为您的应用程序创建的自定义帐户（例如：“IIS APPOOL\yourapplication”），甚至是实际用户的帐户运行。

根据我上面的评论，我不知道这是否有助于解决您的特定问题，因为我对您的问题没有太多详细信息。

# google-app-engine - Datanucleus 无法加载增强类 (GAE)

> ID：11489477
> 
> 赞同：2
> 
> 时间：2012-07-15T04:40:31.163
> 
> 标签：google-app-engine, datanucleus

我已经与 DN/GAE 问题斗争了 2 天。我使用升级到 DN v2、GWT SDK 2.4.0、Eclipse (Indigo) 的 GAE SDK 1.7.0。

1.  我在我的服务类上运行增强器：21:24:19,468 DEBUG [DataNucleus.Enhancer] - 增强类“bookit.shared.Service”开始...... 21:24:19,468 INFO [DataNucleus.Enhancer] - 类“bookit .shared.Service”已经得到增强。21:24:19,468 调试 [DataNucleus.Enhancer] - 类“bookit.shared.Service”的增强已完成

2.  在 ../WAR/WEB-INF/classes/bookit/shared/Service.class 下的任何地方都没有 bookit.shared.Service.class 的其他副本。确实是增强OK（非增强大小为7KB，增强-12KB）。

3.  我启动我的 GWT 应用程序，在服务器端我不断收到：org.datanucleus.exceptions.NucleusFatalUserException：没有 bookit.shared.Service 的元数据。也许你需要在这个类上运行增强器？在 org.datanucleus.api.jdo.NucleusJDOHelper.getJDOExceptionForNucleusException（NucleusJDOHelper.java:498）

4.  我打开了 DN 调试模式 (log4j.category.DataNucleus=DEBUG, A1)，但是除了上面的消息之外，我没有看到任何有用的信息。

**问题：为什么 DN 在运行时没有看到类（bookit.shared.Service）被增强 - 它确实加载它并且实际上它被增强（我通过调试器偷看），但它认为它在查询编译时没有增强步骤，因为元数据似乎没有被加载（我的类使用 JDO 注释标记为 DN 目的，而不是元文件）。**

（org.datanucleus.exceptions.NucleusFatalUserException：bookit.shared.Service 没有元数据。也许您需要在此类上运行增强器？在 com.google.appengine.datanucleus.query.DatastoreQuery.compile(DatastoreQuery.java:205 ))

# google-fusion-tables - 呼吁融合表用户的简单示例，例如。鼠标悬停

> ID：11489480
> 
> 赞同：0
> 
> 时间：2012-07-15T04:40:59.113
> 
> 标签：google-fusion-tables

代表所有热爱地图的融合表狂热者，可以改编一个好的剧本，但不是程序员——记者和历史学家以及所有其他像我一样的用户......

刚刚收到来自 Rebecca（FUSION TABLES 的 GOOGLE 代表）的群组消息，宣布现在可以“在 Fusion Table 地图图层上启用鼠标悬停事件”。

她提供了这个链接作为演示： http: [//gmaps-samples.googlecode.com/svn/trunk/fusiontables/mouseover-jsonp.html](http://gmaps-samples.googlecode.com/svn/trunk/fusiontables/mouseover-jsonp.html)

我的问题：为什么这些例子必须如此复杂？这张特殊的桌子上除了厨房水槽以外的所有东西 - 桌子上有超过三打列，有 177 个条目 - 脚本包括一个将南极洲排除在翻转效果之外的片段。（这是内部笑话吗？）

为什么不使用具有最少列数的简单融合表，使用最简单、最干净的脚本版本来使效果起作用？还是具有不同方法的示例的 2-3 个版本？

我来到 Stackoverflow 是因为 Google 会向我们提供支持。如果我错了，而且它不是一个包容性的论坛，也不是一个适合编程技能专业水平以下的人的地方，那就这么说吧。

我，我有一张带多边形的地图。我想包括鼠标悬停效果，它会在翻转时改变多边形和边框的外观。简单的。忘记南极洲。

如果这需要融合表中的特殊列，则应该在某处提及。

为咆哮道歉。我花了很多时间试图解开示例并插入我自己的表格。不应该这么难。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-15T12:16:54.240

工具提示的另一个选项是这个库：

[http://gmaps-utility-gis.googlecode.com/svn/trunk/fusiontips/](http://gmaps-utility-gis.googlecode.com/svn/trunk/fusiontips/)

[http://gmaps-utility-gis.googlecode.com/svn/trunk/fusiontips/docs/reference.html](http://gmaps-utility-gis.googlecode.com/svn/trunk/fusiontips/docs/reference.html)

# python - python补丁：如何申请

> ID：11489481
> 
> 赞同：1
> 
> 时间：2012-07-15T04:41:24.757
> 
> 标签：python, patch, ubuntu-12.04

我正在使用 Ubuntu 12.04 LTS；预装了 python 2.7.3。
python 2.7 发行版中的一个错误已在其存储库中修复。
变更集 76420:ab9d6c4907e7 2.7
如何在我的 PC 上应用此补丁？

谢谢，

维内

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T04:50:52.163

除非您正在运行从`cvs`服务器提取的自定义编译版本的 Python（我很确定您不是），否则最好的做法是等到 Ubuntu 打包程序提供正式版本。此外，由于此错误是在 2012 年 4 月 19 日发现的，并且尚未捆绑到 Python 2.7 的 tarball 中，因此它不是严重错误。

简而言之，要么从存储库编译 Python（不推荐），要么自己修补 Python 库文件（它们只是 Python 文件，但我不会编辑它们），或者只是忍受这个并不真正的神秘错误影响任何人。

我不会担心的。如果它很关键，那么 Python 2.7.4 将与此补丁一起发布。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-15T04:46:32.930

您可以使用以下命令的 mercurial 等效项：

1.  svn日志
2.  svn 差异
3.  修补

前两个命令的“hg”等效项将识别所有已更改的文件及其中的更改。最后一个命令将应用补丁。

使用 man 命令获取有关命令的详细使用信息。

# linux - 修改内核调度程序，为特定程序提供更长的时间片

> ID：11489485
> 
> 赞同：-1
> 
> 时间：2012-07-15T04:43:35.727
> 
> 标签：linux, multithreading, linux-kernel, scheduled-tasks, ipc

我正在为 Ubuntu 发行版编写一个程序，我希望在运行时有更大的时间片。我知道弄乱时间片可能会减慢我的计算机响应速度，但我希望我的计算机运行专门的服务/进程。理想情况下，当父进程被销毁时，调度程序将恢复正常。我将如何做到这一点？谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-23T18:06:03.457

nice 不会对新版本的 Linux 中的时间片产生任何显着影响（在旧版本中，降低优先级实际上会减少时间片，这与批处理所需的正好相反）。

您可以使用“schedtool -B PID”（可能需要安装）将一个或多个 PID 的调度策略设置为 BATCH 模式，这会从默认值增加它们的时间片，但也会降低它们相对于其他 pid 的优先级。根据 man 条目，对于对缓存持久性敏感的 CPU 密集型作业，这可以将性能提高多达 300%。

但是我发现没有办法直接更改系统使用的默认时间片。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-15T05:05:11.673

您想使用**nice(1)**和类似的工具来设置进程优先级 - 可能是实时调度，但我不知道它在 linux 中的实现情况如何。

正值（最高 20）意味着降低任务的优先级（从而减少时间片），而负值（低至 -19）使过程更重要。

根据用例，I/O 优先级也有**ionice 。**

# php - php include 输出两个双引号

> ID：11489488
> 
> 赞同：2
> 
> 时间：2012-07-15T04:43:51.527
> 
> 标签：php, include

我使用 php include 来检索我的站点模板及其工作，但它在输出之前显示了两个双引号。

```
<!DOCTYPE html>
<html>
<head>
</head>
<body>
<?php
require_once 'common.php';
require_once 'load.php';
?>
</body>
</html> 
```

通用.php。（如果我只包含 common.php 会产生相同的结果，所以我不会在此处粘贴我的 load.php）

```
<?php
if (!defined('ABSPATH'))
    define('ABSPATH', dirname(__FILE__) . '/');

/** Sets up global vars and included files. */
define('INC', 'includes/');
define('FUNCS', 'functions/');
define('CLS', 'classes/');
define('MODS', 'modules/');
#paths

#Initialing
// include require files to set initial
require_once(ABSPATH . 'configs.php');
function openDB() {
    global $dbCon;

    require_once(ABSPATH . CLS . '/class-db.php' );

    if (isset($dbCon))
        return;

    $dbCon = new db(DB_USER, DB_PASSWORD, DB_NAME, DB_HOST);
}
openDB();
?> 
```

即使 common.php 为空，引号仍然存在：/

和输出：

```
<!DOCTYPE html>
<html>
<head>
<body>
" <!-- this double quote should not be here -->
" <!-- this double quote should not be here -->
<div>hello world!</div>
</body>
</html> 
```

所以我在每一页都有一个空白区域。包含文件是否发送任何这样的标题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-15T07:25:13.090

我认为您在包含的文件之一中的标记之前或之后有一些非 ascii 字符`<?php`（不需要 common.php 和 load.php 也可能是 configs.php 或 class-db.php），这在您的编辑器中看不到但可见在浏览器中。您可以使用 HEX 编辑器检查您的文件以进行检查，或使用“ob_get_clean”来查找这些符号出现的确切位置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-06T17:56:20.570

添加

`<div style='clear:both;'></div>`

前

```
<?php
require_once 'common.php';
require_once 'load.php';
?> 
```

> 它仍会显示，但不会影响您的布局

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-20T22:38:51.997

尤金是对的。
我遇到了同样的问题，在谷歌搜索时来到了这个线程，但没有正确理解它。

然后用不同的关键字搜索了一点，比如“php包括添加空格和换行符”，找到了另一个线程，之后我理解了这个线程的含义。

这也不是一个 php 问题，它主要发生在我们在不同的编辑器之间复制和粘贴代码时，并且由于文档类型在 utf-8 和 ansi 等之间发生了变化，因此以某种方式添加了额外的不可见十六进制数据。

这是使它更正确的网址，在页面末尾找到了解决方案 -
[php-require-include-adds-line-break-to-html](http://board.phpbuilder.com/showthread.php?10365446-php-require-include-adds-line-break-to-html)

希望它有所帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-07-20T10:15:36.817

在notepad++中打开“common.php / load.php”，将编码改为“encod in UTF-8 without BOM”

# android - 在不使用 WebView 的情况下在 Android 中点击 URL 的最佳方法是什么？

> ID：11489492
> 
> 赞同：-1
> 
> 时间：2012-07-15T04:45:31.350
> 
> 标签：android, http

> **可能重复：**
> [使用 android 发出 HTTP 请求](https://stackoverflow.com/questions/3505930/make-an-http-request-with-android)

所以我想做的是在不打开浏览器的情况下点击一个 URL。URL 基本上是我与我正在玩的一些硬件交互的方式（即，通过点击这个 URL，它将触发硬件中的某些东西）。

例如，我只希望我的 Android 应用程序中的一个按钮在不打开 Android 浏览器的情况下点击“localhost:8080/test”。我唯一想知道的是我的 HTTP 请求是成功还是失败。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-15T04:51:18.780

我会检查来自 http 请求的响应代码以检查成功或失败。

# javascript - 与 Chrome 的内容安全政策配合使用的 Javascript 模板引擎

> ID：11489495
> 
> 赞同：13
> 
> 时间：2012-07-15T04:46:18.023
> 
> 标签：javascript, backbone.js, google-chrome-extension, content-security-policy, jaml

Chrome API 的 Manifest 版本 2 删除了执行 unsafe-eval 的功能。这意味着使用 eval 函数或通常从文本动态创建函数。

似乎大多数（如果不是全部）Javascript 模板引擎都这样做。我正在使用 Jaml，但我尝试了其他几个，如主干.js（它真的使用 underscore.js 的模板引擎），但没有运气。

[对 Chromium 项目的评论](http://code.google.com/p/chromium/issues/detail?id=107538#c35)似乎表明，有很多库受此影响。

我认为 Angular.js 有一个 CSP 安全模式，但是 Angular.js 对于我们需要的来说实在是太大了。我们只需要一个相当基本的模板引擎，不需要模型或控制器等。有谁知道那里有任何与 CSP 兼容的模板引擎吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-18T23:20:10.660

此问题的最佳解决方案是在部署扩展之前预编译模板。[handlebarsjs](http://handlebarsjs.com/)和[eco](https://github.com/sstephenson/eco/)都提供预编译功能。我实际上写了一篇更深入的[博客文章。](http://matthewrobertson.org/blog/2012/07/10/javascript-templates-and-chromes-content-security-policy/)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-12-12T13:15:38.393

对于中型和大型模板，您绝对应该使用 Mathew 推荐的预编译。对于极小的模板，我们使用这个：

```
var template = function(message, data) {
  if (typeof data === 'undefined') {
    return _.partial(template, message);
  } else {
    return message.replace(/\{\{([^}]+)}}/g, function(s, match) {
      var result = data;
      _.each(match.trim().split('.'), function(propertyName) {
        result = result[propertyName]
      });
      return _.escape(result);
    });
  }
};

var data = {
  foo: 'Hello',
  bar: { baz: 'world!' }
};

// print on-the-fly
template('{{foo}}, {{bar.baz}}' args); // -> 'Hello, world!'

// prepare template to invoke later
var pt = template('{{foo}}, {{bar.baz}}');
pt(args); // -> 'Hello, world!' 
```

此实现不使用 eval，但需要下划线。

# ruby-on-rails - Rails 3 复杂的验证设计

> ID：11489499
> 
> 赞同：0
> 
> 时间：2012-07-15T04:46:41.980
> 
> 标签：ruby-on-rails, validation, associations

我有一个`Contribution`和`Reward`模型。一份贡献`belongs_to`一份回报。我希望贡献是有效的，只有它的数量大于它的奖励`minimum_contribution`。

所以我有

```
Class Contribution < ActiveRecord::Base
  attr_accessible :reward_id, :reward
  belongs_to :reward

  validates_presence_of :amount
  validates_numericality_of :amount, greater_than: 0
  validates_presence_of :reward

  validates_each :amount, unless: SOMECONDITION do |contribution, attr, amount|
    reward = contribution.reward
    contribution.errors.add(attr,
                            "Contribution must be at least #{reward.minimum_contribution}") unless amount > reward.minimum_contribution
  end
end 
```

我的问题是什么是合适的`SOMECONDITION`。在运行此验证之前，我需要确保

1.  贡献的有效定义（甚至是数字）。否则比较 in`unless value > reward.minimum_contribution`会出错，因为你不能与 nil 比较
2.  贡献的奖励被定义
3.  贡献的奖励的 minimum_contribution 已定义且为数字

我应该在 lambda 中做这一切`SOMECONDITION`吗？有这么多守卫来进行一次验证，这让人感觉有些不对劲。我是否正确设计了这个？在我的验证中抛出异常是否正确的设计，例如，实际上是什么`unless amount > contribution.reward.minimum_contribution`时候？（显然，我总是希望数量是数字，但我不确定我在验证中应该有多偏执/我到底可以信任什么）`amount``nil`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T05:23:10.793

您可以替换`validates_each :amount`为：

```
...
validate :validate_mininum_amount

def validate_mininum_amount
  errors.add :amount, "some error message" if amount.to_i < reward.min_contribution
end
... 
```

注意：添加`.to_i`可确保金额`0`为`nil`. 或者，您可以为 nil 添加特定检查。在方法中添加您需要的任何其他检查`validate_mininum_amount`。

# c++ - 与 Bison 上的团体打交道

> ID：11489501
> 
> 赞同：-1
> 
> 时间：2012-07-15T04:46:52.773
> 
> 标签：c++, bison, flex-lexer

我正在尝试使用 flex 和 bison 编写解析器，但我对它的工作原理感到困惑。我正在尝试采用以下方式格式化的文本文件：

```
Version Header Version 1.00 <--- File always starts with a header
Key                     : Value <--- Each section includes these but these after the version header are in the "Root" section
==Section Name <--- A section
$Key                    : Value <--- These are properties
Key                     : Value <--- Same thing as in the "Root" section 
```

样本格式：

```
NasuTek Licensing Version 1.00
Vendor                  : NASUTEKENTERPRISES
Notice                  : NasuTek Enterprises
License Group           : NasuTek Asheila
License Name            : NasuTek Asheila
Vendor Notice           : NasuTek Asheila Internal Build License
Serial                  : ASHEL-87267-4987-3737-37821:32742
Start Date              : Wed July 04 00:00:00 2012
End Date                : Sat July 20 00:00:00 2013
Trial                   : Yes
Count                   : 0
Components              : EXPORT
Host                    : Any

==Software Configuration
$Signed Section         : Yes
Export Configuration    : {
    Supports Export to XML        : Yes
    Supports Export to Text       : Yes
}

==Signature
vpUsQJ+Qo4OS+RQg0vuLW0mXjAj/o6v[trunicated] 
```

当我对分组感到困惑时，我该如何做到这一点。我可以让它看到密钥对很简单，但我不知道如何处理使用 == 和 {} 对的拆分？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-15T20:25:48.903

好吧，每当试图决定如何设计一个基于 flex/bison 的解析器时，第一个问题是在 flex 中应该做什么，在 bison 中应该做什么？

Flex 可以使用任意正则表达式，甚至使用状态来允许在不同上下文中使用不同的 RE，但通常它只能识别孤立的事物——太多的上下文（比几个启动状态容易提供的更多）或任何东西递归在 flex 中很难/不可能

另一方面，Bison 可以轻松处理递归，并且可以很容易地将不同上下文中的标记关联起来，但规则只是简单的标记序列，没有正则表达式并且有限（1 个标记）lookahed。

所以在你的情况下，你需要看看那些难以识别的东西。出现的第一件事是`:`- 您使用此字符将键与值和值分开。它可以出现在键中吗？如果不是，那么您可能只想`:`专门处理一行中的第一个（在 flex 中以开始状态轻松完成；在野牛中有点困难，因为它需要通过描述所有可以包含冒号的值）

“难以识别”中的下一个是间距——键和值中有空格，其他地方也有其他可能应该忽略的空格。您可以在 flex 中轻松管理这些。但是，您没有描述输入文件中可能出现的任何类型的注释。如果有注释，您通常希望在 flex 中识别（并忽略）它们，将它们视为被忽略的空间。

最后还有可能出现在文件中的所有其他字符，但在您的示例中没有描述。这些包括所有其他标点符号——它们在键或值中是否合法？`$`and被描述为只出现在一行的`==`开头——如果它们在其他地方（在行开头的空格之后或在键或值之内/之后？）

当给出这样一个模糊、不完整的例子时，我的倾向是说其他任何事情都是非法的，应该给出一个关于出了什么问题的体面的错误信息。所以我最终会得到一个看起来像这样的柔性扫描仪：

```
{KVchar}    [-A-Za-z0-9.+/]      /* legal characters in a key or value */
{WS}        [ \t\r]              /* whitespace -- ignored but allowed in a key or value */

%s COLON                         /* seen a colon on the current line */
%%

":"        { BEGIN(COLON); return ':'; }
\n         { BEGIN(INITIAL); return '\n'; }
<INITIAL>({KVchar}+({WS}+{KVchar}+)*)           {
             yylval.key = strdup(yytext);
             return KEY; }
<COLON>({KVchar}+((:|{WS})+{KVchar}+)*)           {
             /* values may contain colons, but can't start or end with them */
             yylval.key = strdup(yytext);
             return VALUE; }
[${}]      { return *yytext; }
"=="       { return EQEQ; }
{WS}+      ; /* ignore */
.          { fprintf(stderr, "Spurious character '%c' in input\n"); } 
```

野牛文件看起来像：

```
%union {
    char *key; /* or value */
}
%token<key>  KEY VALUE
%token       EQEQ
%%

input: header kvpairs sections ;

header: KEY
;

kvpairs: kvpairs kvpair
       | /* empty */
;

kvpair: key ':' value '\n'
      | '\n'
;

key: KEY
   | '$' KEY
;

value: VALUE
     | '{' '\n' kvpairs '}' '\n'
;

sections: sections section | /*empty*/ ;

section: EQEQ KEY '\n' kvpairs ; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-15T17:09:21.140

好吧，你的语法不是那么简单。但是，我所做的是在词法分析器中定义一个标记以将其`\n==`视为节开始符号（我称之为`EQEQ`）。所以，语法规则看起来像：

```
section_line:
      EQEQ section_name NEWLINE
    ; 
```

标记化规则如下所示：

```
"\n=="           { BEGIN(SEC); return EQEQ; } 
```

我使用了一个开始条件，以便能够将单词视为`Signature`关键字，如果它就在`EQEQ`, 和另一个开始条件之后，以便签名部分将签名数据作为单个文本 blob 拉入：

```
<SEC>"Signature" { BEGIN(SIG); return SIGNATURE; }
<SIG>{text}      { return (BEGIN(INITIAL), TEXT); } 
```

分组规则最容易在单个规则中定义。这是我用于属性键值对的语法：

```
section_property:
      key COLON value NEWLINE
    | key COLON value_block NEWLINE
    ; 
```

然后这是我用来定义 a 的规则`value_block`：

```
value_block:
      LBRACE NEWLINE sub_properties RBRACE
    ; 
```

而且， a`sub_property`看起来就像 a `section_property`。

每当遇到新部分时，您的解析代码应该记住后续值对属于哪个部分。同样，在解析子属性块时，应保存封闭的属性键，以便可以适当地分配子属性。

一件事可能会让您`yacc`像解析器一样绊倒您的是它的自下而上的性质。当识别规则的叶元素时，将值保存在叶规则中，并在封闭规则中引用保存的值。例如，这条规则：

```
words:
      WORD { words_add($1); free($1); }
    | WORD { words_add($1); free($1); } words
    ; 
```

将连续单词保存到表示单词序列的保存缓冲区中。然后，在封闭规则中，该保存缓冲区被再次保存：

```
key:
      words { words_save_as_key(); }
    ; 
```

基本上`words_save_as_key`复制保存的单词缓冲区，然后将该缓冲区重置为将要保存的不同序列（可能是表示关联值的序列）。

# python - Django 包含标记语法错误

> ID：11489504
> 
> 赞同：1
> 
> 时间：2012-07-15T04:47:38.203
> 
> 标签：python, django, templates, object, tags

尝试按照[Django 包含标记文档](https://docs.djangoproject.com/en/dev/howto/custom-template-tags/#inclusion-tags)创建自定义模板标记，但在第 6 行收到模板语法错误：`def types(Information)`.

```
from django import template

register = template.Library()

@register.inclusion_tag('edit.html')
def types(Information)
    informations = Information.objects.all()
    return {'informations': informations} 
```

该`templatetag.py`文件在`/templatetags`目录中。

信息模型：

```
class Information(models.Model):
    name = models.CharField(max_length=20)
    models = models.ManyToManyField('Model') 
```

模板（edit.html）：

```
{% load templatetag %}
<ul>
   {% for information in informations %}
      <li> {{ information }} </li>
   {% endfor %}
</ul> 
```

我是否误解了如何创建包含标签和对象？感谢您的任何建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T04:50:01.493

好吧，毫不奇怪，您有语法错误。函数定义，就像任何在 Python 中开始一个块的东西一样，需要在末尾有一个冒号：

```
def types(information): 
```

另请注意，由于某种原因，您已命名您的参数`Information`，这将隐藏类信息 - 您作为实际参数传递的任何对象都将用作`objects.all()`查询的基础，这不太可能起作用。

# sharepoint - 如何允许用户动态设置 Web 部件的大小和高度

> ID：11489507
> 
> 赞同：0
> 
> 时间：2012-07-15T04:48:03.280
> 
> 标签：sharepoint

如何允许用户动态设置 Web 部件的大小和高度？我的要求是用户可以动态设置 webpart 的高度和重量。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T07:23:11.103

您必须创建两个可以为每个用户存储值的新属性。以下是 sharepoint 论坛的讨论链接，可能会有所帮助：[http ://social.technet.microsoft.com/Forums/en-US/sharepoint2010setup/thread/313aa8be-8795-4c3d-99b3-25dfc22aca27/](http://social.technet.microsoft.com/Forums/en-US/sharepoint2010setup/thread/313aa8be-8795-4c3d-99b3-25dfc22aca27/)

这是与屏幕相同的一个：[https ://sharepoint.stackexchange.com/questions/34232/custom-webpart-to-set-and-get-property-per-user-personalizationscope-user](https://sharepoint.stackexchange.com/questions/34232/custom-webpart-to-set-and-get-property-per-user-personalizationscope-user)

# php - 带有书签的ajax jquery与PHP的麻烦

> ID：11489509
> 
> 赞同：1
> 
> 时间：2012-07-15T04:48:42.990
> 
> 标签：php, jquery, ajax, localhost, bookmarklet

我有一个书签设置。我在整个页面都有警报来检查我的代码，并且由于某种原因我的 ajax 无法正常工作。它在本地主机上运行良好，但是当我在外部站点上测试时，它失败了

```
$.ajax({
    url: "http://127.0.0.1/sites.php",
    type:"POST",
    data: "site_url="+urlValue  
}).error(function(){
    alert("error");
}).done(function(data){
   alert("inside ajax");
   //some coding

}); 
```

此脚本适用于 localhost，但不适用于外部站点。这是为什么？是因为 url 是 localhost 吗？但是我已经在外部站点上测试了其他一些本地主机脚本并且它可以工作。例如，我插入了带有 localhost URL 的 CSS 脚本`http://127.0.0.1/css/sample.css`并将其放置到外部站点中，并且 CSS 样式可以正常工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-15T05:17:34.327

这违反了[同源政策](http://en.wikipedia.org/wiki/Same_origin_policy)

阅读[CORS](http://en.wikipedia.org/wiki/Cross-origin_resource_sharing) [http://www.w3.org/TR/cors/，http://en.wikipedia.org/wiki/Cross-origin_resource_sharing](http://www.w3.org/TR/cors/) _

在发送任何输出之前在 sites.php 的开头添加这个

```
<?php
header('Access-Control-Allow-Origin: *');
?> 
```

用于`*`指定任何网站，因为它是一个 bookmarlet。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-15T04:59:22.597

当您说“外部”网址时，您指的是不是运行此页面的网站？如果是这样，我最初的想法是您遇到了 ajax 调用的安全限制。

见：[http ://en.wikipedia.org/wiki/Same_origin_policy](http://en.wikipedia.org/wiki/Same_origin_policy)

如果您尝试对远程服务器进行 ajax 调用，它将在没有错误的情况下执行，但响应将完全空白。浏览器不允许您使用响应做任何事情。我似乎记得因为成功或错误事件都不会触发而感到沮丧，因为jQuery*没有什么*可以做出决定的。

您需要将sites.php 放在同一个站点上，或者创建一个本地php 页面来获取远程文件。如果您这样做，那么您的 ajax 调用可以从您的 php 脚本本地检索远程文件。

下面是一些我们用来通过 UltraCart 代理 ajax 调用的代码：（我们不是 php 商店，所以我希望能**提供**一些关于如何改进它的建议。）我们将它安装在本地机器上，并使用它来代理我们的 ajax来电。

```
<?php

$server_get_url = "https://www.myremoteserver.com/somepage.php"; 
$post_data = file_get_contents('php://input');

foreach($_SERVER as $i=>$val) {  
    if (strpos($i, 'HTTP_') === 0) {  
        $name = str_replace(array('HTTP_', '_'), array('', '-'), $i);  
        $header[$name] = $val;  
    }  
}

$header[] = "Content-Length: ". strlen($post_data);

$ch = curl_init( $server_get_url ); 
curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
curl_setopt($ch, CURLOPT_TIMEOUT, 100);
curl_setopt($ch, CURLOPT_HTTPHEADER, $header);
curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, FALSE);

if ( strlen($post_data)>0 ){
    curl_setopt($ch, CURLOPT_POSTFIELDS, $post_data);
}

$response = curl_exec($ch);     

if (curl_errno($ch)) {
    print curl_error($ch);
} else {
    curl_close($ch);
// our page returns back json ... you may need to adjust this.
    header('Content-type: application/json');
    print $response;
}
?> 
```

# c# - 在字典中存储实体框架对象

> ID：11489516
> 
> 赞同：0
> 
> 时间：2012-07-15T04:50:01.867
> 
> 标签：c#, entity-framework, dictionary

我似乎无法将“实体”加载到字典中。尝试向字典中添加任何内容时，我得到一个“**未设置对象实例的对象引用” 。**任何帮助是极大的赞赏。

```
private TranslationEntities _db = new TranslationEntities();

private Dictionary<int, Language> _data;

private void LoadData()
        {
             var languages = _db.Languages.Include("Region").OrderBy(e => e.Region.Name).ThenBy(e => e.Name);

             foreach (Language item in languages)
              {
                   _data.Add(item.Id, item);   //// ERRORS HERE ////
              }
        } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-15T04:51:55.767

`dictionary`在调用任何函数之前初始化你的。

```
private void LoadData()
{
    _data = new Dictionary<int, Language>();
    var languages = _db.Languages.Include("Region").OrderBy(e => e.Region.Name).ThenBy(e => e.Name);

    foreach (Language item in languages)
    {
        _data.Add(item.Id, item);   //// ERRORS HERE ////
    }
} 
```

这里我在方法内部进行了初始化。您也可以考虑在您的类中初始化字典，`constructor`具体取决于您的场景/代码。

# objective-c - 设置实例方法的返回值

> ID：11489518
> 
> 赞同：-2
> 
> 时间：2012-07-15T04:50:25.470
> 
> 标签：objective-c, methods, return, instance

我知道 Instance 方法在执行完成后可以返回一个值，但我不知道如何设置和获取该值，我知道如何设置参数但如何设置 Method 本身的返回类型？

所以，这是 Instance 方法的实现：

```
-(int) returnInteger: (id) anString: (int) anNumber{ 
```

设置它的参数我做：

```
 [self returnInteger: (id) returnNSString: (int) 100]; 
```

但是我如何设置“returnInteger 本身”的值我想知道如何在它的实现中以及当我调用它时（当它执行时）设置 i。

还有 - 另一个问题

如果我在方法中将它的第一个参数设置为 100，当我调用它时我想向它添加 100，我该怎么做？我试过这个 - 但没有奏效

```
[self returnInteger: (id) returnNSString: (int) + 100]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-15T05:16:15.490

我仍然不确定你在问什么，但这里有一个可能有用的例子。

```
@interface Juniper : NSObject
// Return type int, first parameter type NSString * and named s,
// second parameter type int and named i. Method's name is
// addNumberInString:toInt:
- (int)addIntInString: (NSString *)s toInt: (int)i;
@end

@implementation Juniper

- (int)addIntInString: (NSString *)s toInt: (int)i
{
    // Extract int from argument named s
    int intFromString = [s intValue];
    // Add that int to argument named i and end 
    // method, returning the result of addition
    return intFromString + i;
}

@end

int main(int argc, const char * argv[])
{

    @autoreleasepool {

        Juniper * j = [[Juniper alloc] init];
        // Execute the method, store the return value
        int result = [j addIntInString:@"100" toInt:15];
        // Display the return value so we know it worked.
        NSLog(@"%d", result);

    }
    return 0;
} 
```

# forms - 访问表单更新多个字段

> ID：11489522
> 
> 赞同：1
> 
> 时间：2012-07-15T04:51:17.267
> 
> 标签：forms, ms-access, field

我正在使用一个表单来使用 ms access 2002 更新我的表，当我退出一个字段时，我想访问以将数据复制到另一个字段。例如，在输入 address1 后，我希望将数据复制到字段 address2。当大多数记录在两个字段中具有相同的地址时，可以节省时间。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-15T09:24:56.683

如果记录是新的，我建议您运行您的代码，并询问是否不是。重命名表单上的控件通常是一个好主意，以确保您引用的是控件，而不是字段，因为默认情况下，MS Access 将字段的名称分配给控件。

```
Private Sub MyTextbox_AfterUpdate()
    If Me.NewRecord Then
        Me.OtherTextbox = Me.MyTextbox
    Else
        If MsgBox("Copy this?", vbYesNo) = vbYes Then
            Me.OtherTextbox = Me.MyTextbox
        End If
    End If
End Sub 
```

# eclipse - 创建第谷产品错误：缺少需求

> ID：11489527
> 
> 赞同：0
> 
> 时间：2012-07-15T04:52:15.673
> 
> 标签：eclipse, rcp, tycho

我是第谷的新手。我正在尝试使用 Tycho 创建产品，但每次运行它时，都会遇到以下错误：

```
Cannot resolve project dependencies:
[ERROR]   Software being installed: RCPplugin.RCPplugin 0.0.1.qualifier
[ERROR]   Missing requirement: RCPplugin.RCPplugin 0.0.1.qualifier requires  'org.eclipse.rcp.feature.group [3.7.2.dist-8R9GFpOFUdy-521934]' but it could not be found
[ERROR] 
[ERROR] Internal error: java.lang.RuntimeException: "No solution found because the problem is unsatisfiable.": ["Unable to satisfy dependency from RCPplugin.RCPplugin 0.0.1.qualifier to org.eclipse.rcp.feature.group [3.7.2.dist-8R9GFpOFUdy-521934].", "No solution found because the problem is unsatisfiable."] -> [Help 1]
org.apache.maven.InternalErrorException: Internal error: java.lang.RuntimeException: "No solution found because the problem is unsatisfiable.": ["Unable to satisfy dependency from RCPplugin.RCPplugin 0.0.1.qualifier to org.eclipse.rcp.feature.group [3.7.2.dist-8R9GFpOFUdy-521934].", "No solution found because the problem is unsatisfiable."]
    at org.apache.maven.DefaultMaven.execute(DefaultMaven.java:168)
    at org.apache.maven.cli.MavenCli.execute(MavenCli.java:537)
    at org.apache.maven.cli.MavenCli.doMain(MavenCli.java:196)
    at org.apache.maven.cli.MavenCli.main(MavenCli.java:141)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:616)
    at org.codehaus.plexus.classworlds.launcher.Launcher.launchEnhanced(Launcher.java:290)
    at org.codehaus.plexus.classworlds.launcher.Launcher.launch(Launcher.java:230)
    at org.codehaus.plexus.classworlds.launcher.Launcher.mainWithExitCode(Launcher.java:409)
    at org.codehaus.plexus.classworlds.launcher.Launcher.main(Launcher.java:352)
Caused by: java.lang.RuntimeException: "No solution found because the problem is unsatisfiable.": ["Unable to satisfy dependency from RCPplugin.RCPplugin 0.0.1.qualifier to org.eclipse.rcp.feature.group [3.7.2.dist-8R9GFpOFUdy-521934].", "No solution found because the problem is unsatisfiable."]
    at org.eclipse.tycho.p2.impl.resolver.AbstractResolutionStrategy.newResolutionException(AbstractResolutionStrategy.java:79)
    at org.eclipse.tycho.p2.impl.resolver.ProjectorResolutionStrategy.resolve(ProjectorResolutionStrategy.java:83)
    at org.eclipse.tycho.p2.impl.resolver.P2ResolverImpl.resolveProject(P2ResolverImpl.java:118)
    at org.eclipse.tycho.p2.impl.resolver.P2ResolverImpl.resolveProject(P2ResolverImpl.java:76)
    at org.eclipse.tycho.p2.resolver.P2TargetPlatformResolver.doResolvePlatform(P2TargetPlatformResolver.java:445)
    at org.eclipse.tycho.p2.resolver.P2TargetPlatformResolver.resolveDependencies(P2TargetPlatformResolver.java:422)
    at org.eclipse.tycho.core.resolver.DefaultTychoDependencyResolver.resolveProject(DefaultTychoDependencyResolver.java:98)
    at org.eclipse.tycho.core.maven.TychoMavenLifecycleParticipant.afterProjectsRead(TychoMavenLifecycleParticipant.java:61)
    at org.apache.maven.DefaultMaven.doExecute(DefaultMaven.java:274)
    at org.apache.maven.DefaultMaven.execute(DefaultMaven.java:156)
    ... 11 more 
```

有人可以帮帮我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-16T10:28:50.907

你有没有告诉第谷去哪里寻找依赖？与 Maven 不同，Tycho 没有用于查找依赖项的默认存储库。您需要明确配置此搜索范围 - 所谓的目标平台 - 例如使用

```
<repository>
  <id>eclipse-indigo</id>
  <layout>p2</layout>
  <url>http://download.eclipse.org/releases/indigo</url>
</repository> 
```

可以[在文档](http://wiki.eclipse.org/Tycho/Reference_Card)中找到更多配置目标平台的选项。

# python - python随机模块种子方法

> ID：11489528
> 
> 赞同：2
> 
> 时间：2012-07-15T04:52:16.773
> 
> 标签：python, random

有人可以在下面的示例中从模块 random 解释方法种子的作用吗？提前致谢。

```
random.seed(42) #same connections each time for easier debugging 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-15T04:55:55.427

随机函数是伪随机的，不是真正的随机。它从种子值产生看似随机的值，通常种子值由系统时钟或其他更有意义的变化值设置，但如果随机函数由相同的静态值（在这种情况下为 42）设置种子，则random 函数的输出在每次程序执行时都将完全相同，因此是可预测的，这对于调试代码很有好处。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-15T04:57:21.323

任何基于软件的随机数生成器都不是真正随机的，除非它从硬件源中提取随机数据。

播种随机数生成器 (RNG) 会为其提供初始值。RNG 对这个值做了一些魔法并产生一个新的值，它被再次输入（通常），然后产生另一个值。这种情况一遍又一遍地发生，以创建大量看起来非常随机的数字。真正的 RNG 并不那么简单，但你明白了。

由于 RNG 实际上并不是随机的（它实际上是一个 PRNG，其中 P 代表伪），因此两次输入相同的种子值将为您每次提供相同的随机数流。这仅对调试有用，因为您知道“随机”数字是什么。

# android - Android 源代码仓库同步问题

> ID：11489531
> 
> 赞同：0
> 
> 时间：2012-07-15T04:53:31.243
> 
> 标签：android, git, repository

我正在使用 ubuntu 11.10。我正在做 android 源代码下载过程...我试图获取 4.0.1 版本的源...但是 repo 同步操作一直运行大约 8 小时并且它仍在继续，另一个问题是像 samsung/tuna 这样的 repo / 501% 已下载 任何人都可以告诉我下载过程的最大小时数是多少？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-15T07:12:29.147

我花了大约 12 个小时才以 2 MBps 的速度下载它，大约有 16 GB 的代码库。

# php - 调用“exit”后如何执行剩余的php代码？

> ID：11489534
> 
> 赞同：5
> 
> 时间：2012-07-15T04:55:08.833
> 
> 标签：php, xmlhttprequest

客户端如何向服务器发送请求只是为了触发执行，服务器立即发送响应然后执行请求的代码？与此类似：

```
echo 'the execution is starting';
exit;
execution_function(); // <--- is it possible to this function being executed after exit 
```

我希望响应是即时的，以便客户端可以在服务器执行请求时执行其他操作。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-15T05:10:52.373

您可以使用[register_shutdown_function()](http://www.php.net/register_shutdown_function)设置一个回调函数，该函数将在 PHP 退出时执行。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2019-08-28T22:36:02.070

您可以在 exit() 、 die() 之后使用 register_shutdown_function() ，甚至可以使用此函数将致命错误注册到错误注册日志中。非常方便

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-15T05:17:14.430

我不认为这是可以做到的。

通常我所做的是将 exec() 调用到另一个 PHP 文件中的另一个外部脚本，命令末尾带有“> /dev/null &”，然后是 exit()。

这样调用 exec() 的脚本在被调用脚本运行时不会运行。

* * *

## 回答 #4

> 赞同：-4
> 
> 时间：2012-07-15T05:01:25.753

这是不可能的，原因是当您调用 exit 函数时，PHP 会停止处理之后的任何内容。如果脚本检测到错误，它的正常用法是停止运行，因为它达到成功条件操作的可能性为零。

如果您希望您的脚本继续运行并做一些事情，请将您希望它做的事情放在退出函数之前。

# c# - ADO.net 中的 SQL 事件日志记录

> ID：11489537
> 
> 赞同：0
> 
> 时间：2012-07-15T04:55:20.557
> 
> 标签：c#, asp.net, sql, logging, ado.net

我们想记录 sql 事件及其工作，但问题是它总是`sa`以用户身份表示。而我希望这是个性化的。

**无论如何，在 ADO.Net 中我可以传递自定义显示名称，以便 sql 的日志记录显示用户在我的数据库中正在做什么？**

我知道这个问题看起来很奇怪，但这就是我的要求。任何意见都受到高度赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T05:14:05.963

不要以 SA 身份登录！这是一个真正的大安全问题，正在等待发生。创建其他 SQL 用户，并在连接字符串中使用它们。这将让您控制个人资料中显示的用户，并为您增加相当多的安全性。

注意：您也可以根据您的 Windows 凭据登录，这在某些生产环境中甚至更安全，但您现在可能不想担心它。

# sync - unity3d如何同步？

> ID：11489540
> 
> 赞同：0
> 
> 时间：2012-07-15T04:55:49.623
> 
> 标签：sync, unity3d

我了解到在 Unity3d 中没有明确的同步锁定 (http://answers.unity3d.com/questions/284228/how-to-synchronize-in-unity.html#answer-284522) 但在我的游戏中我需要这样做这个。

两个代理（飞行员 A 和飞行员 B）都需要修改飞机的速度。伪代码是：

```
if (speed < threshold)
   speed += 1 
```

如果没有锁，并且当前速度：speed=threshold-1。当飞行员 A 检查并看到速度 < 阈值时，他会增加它。当他这样做时，飞行员 B 检查，他也看到速度 < 阈值，他再次增加它。所以速度可能会变得疯狂，增加两次并最终> =阈值。飞机会坠毁。

我知道这只是一个简单的同步示例，令 Unity 不支持这一点感到惊讶。解决方法是什么？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T03:17:43.600

请参阅： [http ://answers.unity3d.com/questions/146372/are-update-and-fixedupdate-call-in-different-thr.html](http://answers.unity3d.com/questions/146372/are-update-and-fixedupdate-called-in-different-thr.html)

您担心不存在的线程并发。Unity3D Update() 调用不是多线程的。您包含的链接说 Unity3D 不保证脚本顺序，这是真的。但这意味着 Unity 不能保证 A 是否在 B 之前。2 脚本不能同时更新相同的值。

# networking - 为什么我的 Arduino 不返回它的 ping？

> ID：11489541
> 
> 赞同：1
> 
> 时间：2012-07-15T04:55:50.697
> 
> 标签：networking, arduino

我正在使用[SerialIP](http://arduino.cc/playground/Code/SerialIP)库并试图为我的 Arduino 建立一个 SLIP 连接。现在，当我尝试 ping 时，RX LED 亮起，证明它确实收到了数据包，但 TX 引脚从未亮起，数据包也没有返回。

我正在使用示例服务器程序。它确实设法到达了主循环（已经用一些数字写入进行了测试），所以我唯一能看到代码有问题的是 IP 地址定义：

```
// Set the IP address we'll be using.  Make sure this doesn't conflict with
// any IP addresses or subnets on your LAN or you won't be able to connect to
// either the Arduino or your LAN...
IP_ADDR myIP = {192,168,5,2};
IP_ADDR subnet = {255,255,255,0}; 
```

我正在通过 Ubuntu 执行此操作，当我运行时`route`，我得到了这一行：

```
Destination     Gateway         Genmask         Flags Metric Ref    Use Iface
...             ...             ...             ...   ...    ...    ...
192.168.5.2     *               255.255.255.255 UH    0      0        0 sl0 
```

我想也许我必须将子网更改为 {255,255,255,255}，但它仍然有相同的结果：没有 TX 的点亮 RX。

现在我不知道为什么这不起作用。为什么是解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T17:47:49.263

我对 Arduino 和以太网了解不多，但在我看来，您必须对 Arduino 进行编程才能发回 ping。我认为硬件不会自动响应 ping。发布一些代码，或者如果您遵循教程，请发布链接。

祝你好运。

# php - 如何使用 mysql 和 php 匹配数据？

> ID：11489544
> 
> 赞同：0
> 
> 时间：2012-07-15T04:56:08.637
> 
> 标签：php, mysql

**需要一些帮助** 我在数据库中有 5 个表，这里是 mysql 代码：

```
CREATE TABLE IF NOT EXISTS `candidate` (
  `CID` int(4) NOT NULL AUTO_INCREMENT,
  `title` varchar(5) NOT NULL,
  `fname` varchar(30) NOT NULL,
  `lname` varchar(30) NOT NULL,
  `dob` date NOT NULL,
  `email` varchar(50) NOT NULL,
  `address` varchar(255) NOT NULL,
  `city` varchar(50) NOT NULL,
  `postcode` varchar(10) NOT NULL,
  `phone_num` varchar(11) NOT NULL,
  `username` varchar(40) NOT NULL,
  `password` varchar(40) NOT NULL,
  `regdate` datetime NOT NULL,
  `acc_type` enum('c','s') NOT NULL DEFAULT 'c',
  `emailactivate` enum('0','1') NOT NULL DEFAULT '0',
  `cv_name` varchar(60) NOT NULL,
  `cv` blob NOT NULL,
  PRIMARY KEY (`CID`)
) ENGINE=InnoDB  DEFAULT CHARSET=latin1 COMMENT='// this is the table for the candidates' AUTO_INCREMENT=175 ;

-- --------------------------------------------------------

--
-- Table structure for table `candidate_skill`
--

CREATE TABLE IF NOT EXISTS `candidate_skill` (
  `CSID` int(4) NOT NULL AUTO_INCREMENT,
  `CID` int(4) NOT NULL,
  `S_CODE` int(4) NOT NULL,
  PRIMARY KEY (`CSID`),
  KEY `CID` (`CID`),
  KEY `S_CODE` (`S_CODE`)
) ENGINE=InnoDB  DEFAULT CHARSET=latin1 COMMENT='//match candidate and skill' AUTO_INCREMENT=102 ;

-- --------------------------------------------------------

--
-- Table structure for table `job`
--

CREATE TABLE IF NOT EXISTS `job` (
  `JID` int(4) NOT NULL AUTO_INCREMENT,
  `job_title` varchar(40) NOT NULL,
  `job_desc` varchar(255) NOT NULL,
  `start_date` date NOT NULL,
  `end_date` date NOT NULL,
  PRIMARY KEY (`JID`)
) ENGINE=InnoDB  DEFAULT CHARSET=latin1 COMMENT='// this is the table for the job vacancies' AUTO_INCREMENT=10 ;

-- --------------------------------------------------------

--
-- Table structure for table `skill`
--

CREATE TABLE IF NOT EXISTS `skill` (
  `S_CODE` int(4) NOT NULL AUTO_INCREMENT COMMENT '// this is the skill primary key',
  `skill_name` varchar(40) NOT NULL,
  `skill_desc` varchar(255) NOT NULL,
  PRIMARY KEY (`S_CODE`)
) ENGINE=InnoDB  DEFAULT CHARSET=latin1 AUTO_INCREMENT=11 ;

-- --------------------------------------------------------

--
-- Table structure for table `skill_job`
--

CREATE TABLE IF NOT EXISTS `skill_job` (
  `SJID` int(4) NOT NULL AUTO_INCREMENT,
  `JID` int(4) NOT NULL,
  `S_CODE` int(4) NOT NULL,
  PRIMARY KEY (`SJID`),
  KEY `S_CODE` (`S_CODE`),
  KEY `JID` (`JID`)
) ENGINE=InnoDB  DEFAULT CHARSET=latin1 AUTO_INCREMENT=94 ; 
```

这是给我带来问题的查询：

```
$query = ("SELECT * FROM candidate, candidate_skill, job, skill, skill_job WHERE candidate_skill.S_CODE=skill_job.S_CODE AND skill.S_CODE=candidate_skill.S_CODE AND candidate.CID=candidate_skill.CID AND job.JID = skill_job.JID");

$result = mysql_query ($query);
$candidate_id ='';      
$canskill ='';
        while ($result = mysql_fetch_array ($res)){
            $candidate_id .= $r['CID'];
            $canskill .= $r ['S_CODE'];

            }
        }

        }
    echo $candidate_id; 
```

我正在尝试使用他们的技能来匹配候选人和工作，并且我已经成功了，但是我让候选人与工作相匹配，即使他们只有一项技能并且该工作具有例如三项技能。有人可以指出我正确的方向吗，因为我已经搜索、测试和重新编码了好几天，但我无法解决这个问题

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-15T05:38:18.870

你正在做一个简单的加入，所以任何只有列出的技能之一的候选人都将被匹配。您需要实际计算匹配所需技能的数量，并使用它过滤查询结果。

如果不重新调整您的整个查询，它将类似于：

```
SELECT ..., COUNT(skill_job.id) AS cnt
FROM ....
WHERE ...
HAVING (cnt = 3) 
```

这仅限于具备 3 项所需技能的候选人。如果你想要“至少 2”或类似的类型，那么它会是

```
HAVING (cnt >= 2) 
```

其他变体也是如此。

# php - PHP字符串比较使用'=='

> ID：11489549
> 
> 赞同：5
> 
> 时间：2012-07-15T04:57:59.717
> 
> 标签：php, comparison

我使用'=='对字符串进行了一些测试。我知道比较字符串 '==' 不是办法，但是我想解决一个奇怪的行为。

我正在关注此页面中的 PHP 文档：[http](http://www.php.net/manual/en/language.operators.comparison.php) ://www.php.net/manual/en/language.operators.comparison.php 。这是我做的测试

```
<?php 
   var_dump( "100" == "1e2" ); //outputs boolean true
   var_dump( (int) "100" ); //int 100
   var_dump( (int) "1e2" ); //int 1
?> 
```

文档说，当我们将字符串与数字进行比较时，PHP 首先将字符串转换为数字，但是当我将 '100' 和 '1e2' 转换为数字时，它们并不相等。比较应该输出布尔值 false。

为什么会出现这种奇怪的行为？谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-15T05:00:58.280

并非所有数字都是整数。`1e2`是一个浮点数（恰好可以表示为整数，但不能*直接*转换为整数）。尝试转换为`float`s 而不是`int`s：

```
<?php 
   var_dump( "100" == "1e2" ); // bool(true)
   var_dump( (float) "100" );  // float(100)
   var_dump( (float) "1e2" );  // float(100)
?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-15T05:07:45.900

[Type Juggling](http://php.net/manual/en/language.types.type-juggling.php)不等于[Type Casting](http://www.php.net/manual/en/language.types.type-juggling.php#language.types.typecasting)

从 Type Juggling 页面

> 如果任一操作数是浮点数，则这两个操作数都被计算为浮点数，结果将是浮点数。否则，操作数将被解释为整数，结果也将是整数。

# spring - 简单的spring mvc应用程序时找不到页面

> ID：11489551
> 
> 赞同：0
> 
> 时间：2012-07-15T04:58:12.493
> 
> 标签：spring, jsp, servlets, spring-mvc

您好尝试使用 spring 2.6 版本开发简单的 spring mvc 应用程序。

这是我的 web.xml 文件内容。

```
<?xml version="1.0" encoding="UTF-8"?>

<web-app version="2.4"
         xmlns="http://java.sun.com/xml/ns/j2ee"
         xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xsi:schemaLocation="http://java.sun.com/xml/ns/j2ee 
         http://java.sun.com/xml/ns/j2ee/web-app_2_4.xsd" >

  <servlet>
    <servlet-name>springtutorial</servlet-name>
    <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
    <load-on-startup>1</load-on-startup>
  </servlet>

  <servlet-mapping>
    <servlet-name>springtutorial</servlet-name>
    <url-pattern>*.htm</url-pattern>
  </servlet-mapping>

  <welcome-file-list>
    <welcome-file>
      index.jsp
    </welcome-file>
  </welcome-file-list>

</web-app> 
```

这是我的应用程序 servlet 配置文件“springtutorial-servlet.xml”

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xsi:schemaLocation="http://www.springframework.org/schema/beans
       http://www.springframework.org/schema/beans/spring-beans-2.5.xsd">

    <bean id="helloController" class="com.net.technicalkeeda.controller.HelloController" />

    <bean id="urlMapping" class="org.springframework.web.servlet.handler.SimpleUrlHandlerMapping">
        <property name="mappings">
            <props>
                <prop key="hello.htm">helloController</prop>
            </props>
        </property>
    </bean>

</beans> 
```

lib文件夹下的jar

```
j2ee.jar
jstl.jar
spring.jar
spring-webmvc.jar 
```

这是我的控制器文件

包 com.net.technicalkeeda.controller；

```
import java.io.IOException;

import javax.servlet.ServletException;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;

import org.springframework.web.servlet.ModelAndView;
import org.springframework.web.servlet.mvc.Controller;

public class HelloController implements Controller {

    public ModelAndView handleRequest(HttpServletRequest request,
            HttpServletResponse response) throws ServletException, IOException {

        System.out.println("I am here");

        return new ModelAndView("hello.jsp");
    }

} 
```

在tomcat中部署项目后无法通过URL访问

[http://domainname.com/springtutorial/hello.htm](http://domainname.com/springtutorial/hello.htm)

你能建议我有什么问题吗

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-15T10:41:08.153

看起来您错过了添加 ViewResolver 之一。有许多 ViewResolver 可用，这是您可以使用的其中之一。

```
<bean id="jspViewResolver"
    class="org.springframework.web.servlet.view.InternalResourceViewResolver">
    <property name="viewClass"
        value="org.springframework.web.servlet.view.JstlView" />
    <property name="prefix" value="/WEB-INF/jsp/" />
    <property name="suffix" value=".jsp" />
</bean> 
```

只需指定

```
return new ModelAndView("hello") 
```

或者

```
ModelAndView mav=new ModelAndView();
mav.setViewName("hello");
return mav 
```

# c# - 如何将枚举标志与字典键进行比较？

> ID：11489556
> 
> 赞同：3
> 
> 时间：2012-07-15T05:00:56.203
> 
> 标签：c#, dictionary, enums

我有这个枚举标志：

```
[Flags()]
public enum Levels
{
    Beginner, Medium, Advanced, Master
} 
```

我有一个名为 Bank 的属性，它是 a`Dictionary<Levels, ...>`并且 Levels 是您可以选择的可能选项

让我们假设我的第一个`KeyValuePair`包含以下内容`Key = Levels.Beginner | Levels.Medium | Levels. Advanced`。因此，如果我输入字典`Levels.Medium`，这个想法会返回最后一个对象，因为 Medium 是一个可能的值。

```
public Worksheet LoadWorksheet(Levels level)
{
    Worksheet worksheet = new Worksheet(this.Bank[level].Value, this.Bank[level].Key);
    return worksheet;
} 
```

但不幸的是，当我这样做时，会抛出一个错误，指出密钥不存在。我该怎么做才能匹配密钥？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-15T05:12:00.447

首先，我应该指出，如果：

```
Levels keyA = Levels.Beginner | Levels.Medium | Levels. Advanced;
Levels keyB = Levels.Medium; 
```

然后：

```
Debug.Assert(keyA.GetHashCode() != keyB.GetHashCode());
Debug.Assert(keyA != keyB); 
```

在字典中查找值时，字典首先使用键的哈希值来确定正确的桶，然后使用相等比较来识别桶中的正确键。

如果哈希值不相等，则不会找到密钥。如果键值不相等，则找不到该值。

`Levels.Medium`您可以通过使用以下 LINQ 表达式查看密钥中是否存在位模式来获取所有包含密钥的条目：

```
var mediumEntries = Bank.Where(entry => 0 != ((int)entry.Key & (int)Levels.Medium)); 
```

或者，正如@Ria 指出的那样，在.Net 4 中，您可以使用 HasFlags 成员：

```
var mediumEntries = Bank.Where(entry => entry.Key.HasFlag(Levels.Medium)); 
```

在另一个答案（@dasblinkenlight，@Ria）中提出了一个很好的观点，即您的枚举值需要具有非重叠位模式才能使其工作：

```
[Flags()]        
public enum Levels        
{        
    Beginner = 0x01, 
    Medium = 0x02, 
    Advanced = 0x04, 
    Master = 0x08
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-15T05:10:57.933

以 2 的幂定义枚举常数，即 1、2、4、8 等。这意味着组合枚举常量中的各个标志不重叠：

```
[Flags]
public enum Levels
{
    Beginner = 1, 
    Medium = 2,
    Advanced = 4, 
    Master = 8
} 
```

并且您必须将 Dictionary Key 定义为 Integer: `Dictionary<int, ...>`。并`int`在添加到字典时转换为：

```
Bank.Add((int) (Levels.Medium|Levels.Master), ...); 
```

然后将 Key 与枚举标志进行比较：

```
if ((this.Bank[level].Key & Levels.Advanced) == Levels.Advanced)
{
     // Do something
} 
```

如果使用 .NET4，请使用`HasFlag`

```
if ( this.Bank[level].Key.HasFlag(Levels.Advanced) )
{
     // Do something
} 
```

* * *

**注意**：

`Dictionary.Key`必须是唯一的。else`ArgumentException`在尝试添加重复键时抛出。因此不建议对`Dictionary.Key`. 尝试在其他地方存储一些。

# java - 我无法让我的线程或循环正常运行

> ID：11489562
> 
> 赞同：-1
> 
> 时间：2012-07-15T05:01:35.690
> 
> 标签：java, android, sdk, timepicker

所以我整天都在做这个项目，因为我正在尝试了解 timePicker 并在 java 和 android sdk 中处理时间。所以现在我有以下设置：

```
package com.dicamillo.alarm;

import java.util.Calendar;

import android.app.Activity;
import android.media.MediaPlayer;
import android.os.Bundle;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.DigitalClock;
import android.widget.TextView;
import android.widget.TimePicker;

public class AlarmlockActivity extends Activity implements OnClickListener {
    /** Called when the activity is first created. */
    TimePicker tp;
    Button set;
    int hour;
    int minuet;
    DigitalClock dc;
    Calendar calendar = Calendar.getInstance();
    TextView complete;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        tp = (TimePicker) findViewById(R.id.tpAlarmTime);
        set = (Button) findViewById(R.id.bSet);
        dc = (DigitalClock) findViewById(R.id.digitalClock1);
        hour = calendar.get(Calendar.HOUR);
        minuet = calendar.get(Calendar.MINUTE);
        complete = (TextView) findViewById(R.id.tvTest);
        set.setOnClickListener(this);

    }

public void onClick(View v) {
        // TODO Auto-generated method stub
        switch (v.getId()) {
        case R.id.bSet:

            Thread alarmstart = new Thread() {
                public void run() {
                    while (tp.getCurrentHour().intValue() != hour
                            && tp.getCurrentMinute().intValue() != minuet) {
                        tp.getCurrentHour().intValue();
                        tp.getCurrentMinute().intValue();
                        if (tp.getCurrentHour().intValue() == hour
                                && tp.getCurrentMinute().intValue() == minuet) {
                            MediaPlayer mp = MediaPlayer.create(
                                    AlarmlockActivity.this, R.raw.alarm);
                            mp.start();
                            complete.setText("COmpleted!");

                        }
                    }
                }
            };
            alarmstart.start();
            break;
        }
    } 
```

and when the selected time reaches the current time nothing happens like it should supposed to. 我在线程中遗漏了什么吗？或者我这样做完全错误。任何帮助工作都很棒。我知道我今天一直在寻求很多帮助，但我只想学习。=)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-15T05:50:53.467

我注意到您的代码中有几个错误。

1）不需要单独的线程。

2）不需要while循环，因为如果设置的小时和分钟不等于当前时间，您将在那里进入无限循环。

3）您根本没有使用 DigitalClock。为什么变量在那里？

4）即使你进入while循环，你在调用

```
tp.getCurrentHour().intValue();
tp.getCurrentMinute().intValue(); 
```

它们没有分配给任何变量，因此它们没有任何用途。

5）你在 if 子句中的条件永远不会得到满足，因为如果满足，你就不会在 while 循环中。

6) 无需开关盒，因为您只有一个按钮。

7）最后，您的 onClick 方法中唯一需要的是：

```
tp.clearFocus();// allows reading the value set if entered by keyboard

if (tp.getCurrentHour().intValue() == hour && tp.getCurrentMinute().intValue() == minuet) {
         MediaPlayer mp = MediaPlayer.create(AlarmlockActivity.this, R.raw.alarm);
         mp.start();
         complete.setText("COmpleted!"); 
```

}

我希望您在启动应用程序时也知道小时和分钟，因为如果您不知道启动应用程序的时间，那么您将很难尝试匹配时间选择器中的时间。

**编辑：** `hour = calendar.get(Calendar.HOUR);`将以 12 小时格式返回您的时间。如果您的 TimePicker 设置为 24 小时格式，那么当您在 PM 时间启动应用程序时，它将无法工作。您应该改用日历的[HOUR_OF_DAY](http://developer.android.com/reference/java/util/Calendar.html#HOUR_OF_DAY)字段。

您还可以将小时和分钟变量打印到 textView 以确保它们的值或使用调试器将它们与您从 TimePicker 的 getCurrentXXX() 方法获得的值进行比较，因为您希望在 TimePicker 中与它们匹配。

# opencv - OpenCV 2.4.2 FaceRecognizer std::bad_alloc 异常

> ID：11489563
> 
> 赞同：0
> 
> 时间：2012-07-15T05:01:55.490
> 
> 标签：opencv

我正在学习 OpenCV 2.4.2 中的 FaceRecognizer 功能并编写了一些代码进行测试。但是，我在此代码上遇到错误：

```
int num_components = 10;
double threshold = 10.0;
Ptr<FaceRecognizer> model = createEigenFaceRecognizer(num_components, threshold); 
```

带有此错误消息：

```
First-chance exception at 0x75719617 in Cs.exe: Microsoft C++ exception: std::bad_alloc at memory location 0x001af2e4.. 
```

我尝试了几种方法，但无法真正弄清楚导致分配错误的问题是什么。大家对这个错误有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T10:26:16.160

我认为问题可能出在其他地方，在带有 OpenCV 2.4.2 的 mac 上，如果我这样做，我就没有这样的问题：

```
#include <opencv2/core/core.hpp>
#include <opencv2/contrib/contrib.hpp>

int main(){
  using namespace cv;
  Ptr<FaceRecognizer> model = createEigenFaceRecognizer(10, 10.0);
  return 0;
} 
```

你确定你没有包含类似`#include <cv.h>`or的东西`#include <highgui.h>`吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-15T07:11:34.040

请提供更多详细信息，否则将很难重现该错误。如果您自己编译，您的问题应该包含您的 OpenCV 版本或 SVN 版本、您的操作系统、它是否是 32/64 位以及您正在使用的数据。如果您不使用文档随附的示例，则应附上相关的代码片段（如果可能）。

# android - 服务可以接收包吗？添加的意图

> ID：11489564
> 
> 赞同：3
> 
> 时间：2012-07-15T05:01:55.503
> 
> 标签：android, android-intent, android-service

我想在添加新包时显示通知。我找到了清单文件需要的代码！我不知道如何在我的服务中捕捉广播。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-15T05:20:07.700

您可以注册一个接收器来接收包安装`PACKAGE_INSTALL`和`PACKAGE_ADDED`卸载事件，然后`Service( i.e IntentService)`从`onReceive`广播接收器开始，以便在添加新包时显示通知。

在 Manifest.xml 中：

```
<receiver android:name=".PackageReceiver">
        <intent-filter>
            <action android:name="android.intent.action.PACKAGE_INSTALL" />
            <action android:name="android.intent.action.PACKAGE_ADDED" />
            <data android:scheme="package"/>
        </intent-filter>
    </receiver> 
```

在 PackageReceiver 中：

```
public class PackageReceiver extends BroadcastReceiver {

   @Override
   public void onReceive(Context context, Intent intent) {
       if (intent.getAction().equals(Intent.PACKAGE_INSTALL)) {
             //START YOUR SERVICE HERE
        } 
    }

} 
```

或者您也可以在您的服务中动态注册接收器

```
br = new BroadcastReceiver() {

        @Override
        public void onReceive(Context context, Intent intent) {
            // TODO Auto-generated method stub
            //SHOW notification here or Start Notification Service
        }
    };
    IntentFilter intentFilter = new IntentFilter();
    intentFilter.addAction(Intent.ACTION_PACKAGE_ADDED);
    intentFilter.addAction(Intent.ACTION_PACKAGE_INSTALL);
    intentFilter.addDataScheme("package");
    registerReceiver(br, intentFilter); 
```

# spring - Spring JUnit：java.lang.NoSuchFieldError：NULL

> ID：11489567
> 
> 赞同：4
> 
> 时间：2012-07-15T05:02:41.893
> 
> 标签：spring, junit4

我对 Maven 非常陌生。当我执行时，`mvn clean install`我在执行期间的所有测试类中都出现以下错误。在浏览了SO上的一些帖子并通过Google搜索后，都提到了JUnit版本问题。我交叉检查了我所有的 pom 文件，它们的 junit 版本是 4.8.2。但是，我仍然不断收到此错误。

```
<testcase time="0.002" classname="com.service.ServiceImpl" name="initializationError0">
<error message="NULL" type="java.lang.NoSuchFieldError">java.lang.NoSuchFieldError: NULL
    at org.junit.runners.ParentRunner.&lt;init&gt;(ParentRunner.java:48)
    at org.junit.runners.BlockJUnit4ClassRunner.&lt;init&gt;(BlockJUnit4ClassRunner.java:58)
    at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.&lt;init&gt;(SpringJUnit4ClassRunner.java:104)
    at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
    at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:39)
    at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:27)
    at java.lang.reflect.Constructor.newInstance(Constructor.java:513)
    at org.junit.internal.requests.ClassRequest.buildRunner(ClassRequest.java:33)
    at org.junit.internal.requests.ClassRequest.getRunner(ClassRequest.java:28)
    at org.apache.maven.surefire.junit4.JUnit4TestSet.execute(JUnit4TestSet.java:51)
    at org.apache.maven.surefire.suite.AbstractDirectoryTestSuite.executeTestSet(AbstractDirectoryTestSuite.java:120)
    at org.apache.maven.surefire.suite.AbstractDirectoryTestSuite.execute(AbstractDirectoryTestSuite.java:103)
    at org.apache.maven.surefire.Surefire.run(Surefire.java:169)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.apache.maven.surefire.booter.SurefireBooter.runSuitesInProcess(SurefireBooter.java:350)
    at org.apache.maven.surefire.booter.SurefireBooter.main(SurefireBooter.java:1021)
</error>
</testcase> 
```

我运行`mvn dependency:tree`并搜索了所有 junit 实例。他们都显示4.8.2。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-20T17:48:06.473

这是 jmock-junit4 的问题。通过放置以下内容将其删除（导入jmock-junit时不包括junit）-

```
<dependency>
    <groupId>org.jmock</groupId>
    <artifactId>jmock-junit4</artifactId>
    <version>2.5.1</version>
    <exclusions>
        <exclusion>
            <groupId>junit</groupId>
            <artifactId>junit-dep</artifactId>
        </exclusion>
    </exclusions>
</dependency> 
```

# core-graphics - 从 UIView 子类创建 CGImage

> ID：11489568
> 
> 赞同：0
> 
> 时间：2012-07-15T05:03:22.773
> 
> 标签：core-graphics, cgcontext, cgimage

如何从 UIView 子类创建 CGImage？

我应该使用 renderInContext:UIGraphicsGetCurrentContext() 从包含绘图（通过 drawRect 方法的核心图形）的视图（UIView 的子类）创建 CG 图像吗？

我有一个视图 myView，我正在其中进行一些绘图。我想用我创建的绘图做一些其他的核心图形操作——比如用导入的照片混合模式等，所以我需要从我假设的 myView 中获取一个 CGimage。找不到 CGImage 属性（我的第一个猜测）。四处寻找我找到了下面的解决方案，但是我的子类“没有声明选择器renderInContext”，所以我得到了一个错误。

```
UIGraphicsBeginImageContext(myView.bounds.size);
[myView renderInContext:UIGraphicsGetCurrentContext()];
UIImage *image = UIGraphicsGetImageFromCurrentImageContext();
UIGraphicsEndImageContext();

CGImageRef cgImage = image.CGImage; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T05:13:32.190

`-renderInContext:`是一种方法`CALayer`，不是`UIView`。

改为这样做：

```
[myView.layer renderInContext:UIGraphicsGetCurrentContext()]; 
```

您还需要导入以下标题`CALayer`：

```
 #import <QuartzCore/QuartzCore.h> 
```

并将您的应用程序与`QuartzCore`框架链接。

# android - 在 Android 中使用自定义适配器禁用和更改单个列表视图项的样式

> ID：11489573
> 
> 赞同：0
> 
> 时间：2012-07-15T05:04:58.853
> 
> 标签：android, listview, custom-adapter

我有一个列表视图，它由数据库中的信息填充，使用自定义适配器来处理各个视图。我想要做的是禁用该列表视图中的某些项目（它是一个基本的进度系统，即用户完成模块 1，然后模块 2 被解锁）。

我已经看到这里和那里提到覆盖我的适配器类中的**areAllItemsEnabled()**和**isEnabled()**方法。我遇到的问题是，**areAllItemsEnabled()**似乎没问题，但**isEnabled()**方法基本上启用/禁用整个列表视图，而不是单个项目。任何帮助表示赞赏，在此先感谢。

适配器类：

```
public class ModuleAdapter extends ArrayAdapter<Module> {

Context context;
int layoutResourceId;
Module data[];

public ModuleAdapter(Context context, int layoutResourceId,
        Module data[]) {
    super(context, layoutResourceId, data);
    this.layoutResourceId = layoutResourceId;
    this.context = context;
    this.data = data;
}

@Override
public View getView(int position, View convertView, ViewGroup parent) {
    View row = convertView;
    ModuleHolder holder = null;

    if(row == null)
    {
        LayoutInflater inflater = ((Activity)context).getLayoutInflater();
        row = inflater.inflate(layoutResourceId, parent, false);

        holder = new ModuleHolder();
        holder.modJapTitle = (TextView)row.findViewById(R.id.moduleJapTitle);
        holder.modEngTitle = (TextView)row.findViewById(R.id.moduleEngTitle);
        holder.modComp = (TextView)row.findViewById(R.id.moduleCompletion);
        holder.modRating = (RatingBar)row.findViewById(R.id.moduleScore);

        row.setTag(holder);
    }
    else
    {
        holder = (ModuleHolder)row.getTag();
    }

    Module module = data[position];
    holder.modJapTitle.setText(module.moduleJapaneseTitle);
    holder.modEngTitle.setText(module.moduleEnglishTitle);
    holder.modComp.setText(module.moduleCompletionRate);
    holder.modRating.setRating(module.moduleRating);

    return row;
}

static class ModuleHolder
{
    TextView modEngTitle;
    TextView modJapTitle;
    TextView modComp;
    RatingBar modRating;
}

@Override
public boolean areAllItemsEnabled() {
    return false;
}

@Override
public boolean isEnabled(int position) {
    return false;
} 
```

}

活动实施：

```
ModuleAdapter moduleData = new ModuleAdapter(this, R.layout.module_box_item, module_data);
    moduleData.areAllItemsEnabled();
    moduleData.isEnabled(0);
    ListView listView1 = (ListView)findViewById(R.id.moduleListContainer);
    listView1.setClickable(true);
    listView1.setAdapter(moduleData);
    listView1.setCacheColorHint(Color.TRANSPARENT);
    listView1.setOnItemClickListener(new android.widget.AdapterView.OnItemClickListener() {
        public void onItemClick(AdapterView<?> parent, View view, int position, long id) {
            int temp = position + 1;
            Intent i = new Intent(Story.this, SkitSelect.class);
            i.putExtra("moduleToGet", temp);
            startActivity(i);
        }
    }); 
```

单个项目的视图描述：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
style="@style/moduleBox"
android:id="@+id/moduleBoxSingle"
android:focusableInTouchMode="false"
android:clickable="false"
android:focusable="false" >

<TextView
    android:id="@+id/moduleJapTitle"
    style="@style/moduleTitleJap" />
<TextView
    android:id="@+id/moduleCompletion"
    android:layout_above="@+id/moduleSepartor"
    style="@style/moduleCompletion" />
<View
    android:id="@+id/moduleSepartor"
    android:layout_below="@+id/moduleJapTitle"
    style="@style/moduleSeperator" />
<TextView
    android:id="@+id/moduleEngTitle"
    android:layout_below="@+id/moduleSepartor"
    style="@style/moduleTitleEng" />
<RatingBar
    android:id="@+id/moduleScore"
    android:layout_below="@+id/moduleSepartor"
    style="@style/moduleRating"
    android:layout_alignParentRight="true" />

</RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T16:24:36.573

Ok I figured this out. The method was as simple as this:

```
public boolean isEnabled(int position) {

    if (position == 2) {
        return false
    }

    return true;  
} 
```

This has to be set in the custom adapter. Not called from the implementation in the activity. This was the problem since I was trying to do something like mycustomadapter.isEnabled(2) which is incorrect.

Hope this helps someone else.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-15T06:38:20.387

```
but the isEnabled() method basically enables/disables the entire listview, not the individual item. 
```

它将给出当前行的状态。

```
 public boolean isEnabled(int position) {
    return super.isEnabled(position);
}; 
```

但你想做什么？您是否通过此启用/禁用

```
(adapter.getView(position, convertView, parent)).setEnabled(false); 
```

# jsf - 使用 JSF 对 List 中的项目进行排序

> ID：11489574
> 
> 赞同：0
> 
> 时间：2012-07-15T05:05:05.643
> 
> 标签：jsf, sorting

我有一个非常简单的 jsf 应用程序。我想对 List.xhtml 中的行进行排序。我知道这些行来自#{friendsController.items}。如何以特定方式对这些项目进行排序？我不想按特定列对它们进行排序，我想“手动”对它们进行排序。我正在制定一套规则。这意味着我想将“X”行放在第一位，然后将“Y”排在第二位......提前感谢所有帮助。

PD：对不起我的英语，这是我的第二语言。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-15T06:20:26.333

实际上，对于这个问题没有内置的 JSF 解决方案（RichFaces 和 PrimeFaces 中有拖放组件，但这些对您的情况不起作用）。作为最后一个资源，有一个 jQuery 插件来处理这个问题和一个很好的教程（有一个很好的例子）：

*   [表格拖放 JQuery 插件](http://www.isocra.com/2008/02/table-drag-and-drop-jquery-plugin/)

编辑（基于评论）：

对于您的情况，您只需要在用项目填充列表后对列表进行排序。此案例的代码示例：

```
@ManagedBean
@ViewScoped
public class MyBean {
    //attributes...
    private List<Element> myList;

    public MyBean() {
        myList = getMyListValues(); //just to get the idea
        Comparator<Element> comparator = new Comparator<Element>() {
            @Override
            public int compare(Element e1, Element e2) {
                //A basic logic for a comparator, assuming there is an Id attribute
                //in Element class. Also, make sure to test for null values (just in case...)
                return (e1.getId() > e2.getId()) ? 1 : (e1.getId() < e2.getId()) -1 : 0;
            }
        };
        Collections.sort(myList, comparator);
    }

    //getters and setters for the attributes...
} 
```

对列表进行排序后，您可以通过使用显示它，`<h:dataTable>`它将被排序。

注意：不要在`getMyList()`方法中对列表进行排序，记住 JSF 框架对 getter 和 setter 进行 1 次或多次调用，因此这些方法内部不应包含繁重的逻辑。

# wpf - 如何访问数据网格 ColumnHeaderStyle 内的控制？

> ID：11489576
> 
> 赞同：0
> 
> 时间：2012-07-15T05:05:44.753
> 
> 标签：wpf, styles, wpfdatagrid

如何访问数据网格 ColumnHeaderStyle 内的控制？

在此示例中：

```
 <Style x:Key="DataGridColumnHeaderStyle1" TargetType="{x:Type DataGridColumnHeader}">
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="{x:Type DataGridColumnHeader}">
                    <Grid Name="grdPeresenter" VerticalAlignment="Center" HorizontalAlignment="Stretch">
                       <TextBox x:Name="txtSearch" Grid.Row="1" BorderThickness="2"  PreviewMouseLeftButtonUp="grid1_PreviewMouseLeftButtonUp"  HorizontalAlignment="Stretch" TextChanged="TextBox_TextChanged" >
                           </TextBox>
                    </Grid>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style> 
```

和

```
 <DataGrid x:Name="grd" ItemsSource="{Binding Source={StaticResource theSource}}" AutoGenerateColumns="False"  
              ColumnHeaderStyle="{DynamicResource DataGridColumnHeaderStyle1}"  PreviewKeyDown="grd_PreviewKeyDown"
              SelectedIndex="{Binding SelectedIndex}"
              SelectedItem="{Binding SelectedItem}"
              behavior:MouseDoubleClick.Command="{Binding MouseDoubleClickCommand}" 
              GridLinesVisibility="Vertical">
    </DataGrid> 
```

例如，我想访问 datagrid 第一列的 textSearch。这可能吗？如何？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T06:46:06.567

根据[这个答案](https://stackoverflow.com/questions/974598/find-all-controls-in-wpf-window-by-type)：

```
 var res = FindVisualChildren<TextBox>(grd).Where(t => t.Name == "txtSearch"); 
```

在这里你可以找到所有“txtSearch”标题文本框。

我相信它可以得到更直接的方式，但在那之前..

# php - 将字符串与数组匹配的正则表达式

> ID：11489577
> 
> 赞同：2
> 
> 时间：2012-07-15T05:05:59.770
> 
> 标签：php, regex

我正在尝试形成一个正则表达式，它将匹配一个“看起来”像数组的字符串。

*   必须以`[`,`{`或`(`
*   必须以`]`, `}`, 或`)`
*   开始和结束是否使用相同的括号无关紧要（例如`(....}`很好）
*   项目以逗号分隔
*   所有空白类型都被忽略
*   必须接受空数组

我最初想出的是

```
'/\s*[\[|\{|\(]\s*\w+\s*[,\s*\w+]*\s*[\]|\}|\)]\s*/' 
```

不幸的是，这不接受空数组。所以我尝试了另一个

```
'/\s*[\[|\{|\(][\s*\w+\s*]?[,\s*\w+]*\s*[\]|\}|\)]\s*/'` 
```

这个允许空数组，但也允许在左括号后以逗号开头的数组（例如`[, item, item]`）。

我目前正在做的是使用两个不同的正则表达式并检查一个或另一个匹配。另一个正则表达式类似于我在这里提到的第一个，但只允许在打开和关闭标记之间出现零个或多个空白字符。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-15T05:34:53.067

为了清楚起见，我在下面使用了空格和换行符。应该删除它们或使用忽略它们的正则表达式选项。我发现以这种方式开发正则表达式更容易。

```
[\[\{\(]
    \s*
    (
    |
        \w+\s*
        (,\s*\w+\s*)*
    )
[\]\}\)] 
```

这尚未经过测试，但我希望它非常接近。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-15T05:26:17.670

尝试将空数组视为特殊情况，或者使用您已经拥有的填充数组正则表达式。类似（未经测试）：

```
'(?:[\({[]\s*[\)}\]]|/\s*[\[|\{|\(]\s*\w+\s*[,\s*\w+]*\s*[\]|\}|\)]\s*)/' 
```

# iphone - 如何检查互联网连接类型 ios

> ID：11489579
> 
> 赞同：2
> 
> 时间：2012-07-15T05:06:21.197
> 
> 标签：iphone, ios, wifi

> **可能重复：**
> [如何使用可达性类来检测有效的互联网连接？](https://stackoverflow.com/questions/5195012/how-to-use-reachability-class-to-detect-valid-internet-connection)
> [iphone检测3g或wifi](https://stackoverflow.com/questions/7938650/iphone-detect-3g-or-wifi)

有没有办法以编程方式确定用户的 iOS 设备是通过蜂窝 (3G/ [EDGE](https://en.wikipedia.org/wiki/Enhanced_Data_Rates_for_GSM_Evolution) ) 还是使用 Wi-Fi 连接连接到互联网？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-15T05:12:59.147

您可以使用[可达性库](https://github.com/tonymillion/Reachability/)。

# android - 按下主页按钮时的 Android 平板电脑和手机活动行为

> ID：11489580
> 
> 赞同：0
> 
> 时间：2012-07-15T05:06:35.100
> 
> 标签：android, android-activity

我的手机版本 2.2 和平板电脑版本 4.0.3 上安装了我的锦标赛制作器应用程序。

当我从手机启动应用程序并开始一项活动时，当我按下主页按钮然后再次启动它（这就是我想要的）时，它不会被破坏和重新创建。

当我在平板电脑上做同样的事情时，活动似乎被破坏并重新创建，弄乱了括号的顺序以及谁赢了或没有

我试图覆盖这两种方法

```
public void onSaveInstanceState(Bundle savedInstanceState) 

public void onRestoreInstanceState(Bundle savedInstanceState) 
```

控制发生的事情并希望恢复它之前的状态，但首先我想知道是否有可能阻止破坏和重建阶段的发生。

这类似于通过放入`android:configChanges="orientation|keyboardHidden"`Activity 的清单来防止在屏幕方向发生变化时重新启动 Activity。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-15T05:59:52.120

一旦活动进入后台，系统可以随时[销毁它](http://developer.android.com/guide/components/activities.html#Lifecycle)。覆盖 onSaveIntanceState()/onRestoreInstanceState() 是正确的做法。您还需要处理一个简单的按下后退按钮的情况：您的活动也将被破坏。

话虽如此，但奇怪的是，一旦您按下 Home 按钮，您的活动就会被破坏。可能是您在 4.0.3 设备上的“设置”->“开发人员选项”中选中了“不保留活动”选项？

# java - 如何获取 JPanel 的子图像？

> ID：11489581
> 
> 赞同：2
> 
> 时间：2012-07-15T05:07:04.803
> 
> 标签：java, graphics, jpanel, bufferedimage

BufferedImage 有一个返回 Image 的 getSubimage(x, y, width, height) 方法。我在 JPanel 上绘制图形，如何使用 JPanel 执行类似于 BufferedImage 方法的操作？

例如（如果它是正确的）：

```
BufferedImage bi = jPanel.getSubimage(x, y, width, height); 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-15T05:21:04.263

您可以将任何摆动组件渲染到缓冲图像。

由于您只需要一个子图像，我想这将是一个 2 步过程，1）将您的 JPanel 渲染为 BufferedImage，2）获取该子图像。

```
BufferedImage bi = new BufferedImage(jPanel.getWidth(), jPanel.getHeight(), BufferedImage.TYPE_INT_RGB);
Graphics2D g2 = (Graphics2D)bi.getGraphics();
panel.printAll(g); //I assume you wanted child elements too... otherwise just use paint(g)
BufferedImage result= bi.getSubimage(...); 
```

注意：这仅在所有组件都初始化、定位等并显示后才有效。

# cuda - 了解并行 Nsight OutOfRangeLoad 异常

> ID：11489582
> 
> 赞同：0
> 
> 时间：2012-07-15T05:07:09.733
> 
> 标签：cuda, gpu, nvidia, nsight

我刚刚使用 Enable memory checker 选项运行 Nisght 2.2 并收到以下错误：

`CUcontext blockIdx WarpIndex PC Active Mask Exception Exception Details`

`0x02af1c10 (0,0,0) 0 0x0001cc70 0x00000004 OutOfRangeLoad MemorySpace=Global Size=4`

此外，输出如下：

GPU状态：

## 地址 大小 类型 Mem Block Thread blockIdx threadIdx PC Source

05500e20 4 adr ld g 0 2 {0,0,0} {2,0,0} 000170 无可用来源

# 访问违规摘要：

Nsight Debug Memory Checker 检测到 1 个访问冲突。错误 = 加载时访问冲突（全局内存） blockIdx = {0,0,0} threadIdx = {2,0,0} 地址 = 0x05500e20 accessSize = 4

# Nsight 调试

CUDA 内存检查器检测到 1 个线程导致访问冲突：启动参数 CUcontext = 026f1c10 CUstream = 03460f58 CUmodule = 047e7538 CUfunction = 047c26b0 FunctionName = _Z19findHowManyBeforeWiPcPiS0_S0_S0_S_S0_S0_ii gridDim = {1,1,1} blockDim = {128,1}S ：参数（原始）：0x05500400 0x05500800 0x05500c00 0x05500000 0x05501200 0x05500600 0x05500a00 0x05500e00 0x00000004 0x00000005 GPU 状态：

## **地址 大小 类型 Mem Block Thread blockIdx threadIdx PC Source**

05500e20 4 adr ld g 0 2 {0,0,0} {2,0,0} 000170 无可用来源

但是，我无法理解任何这些信息，除了线程 2 的函数 HowManyBeforeWi 中发生错误这一事实。无论如何，是否可以找到发生错误的确切行，因为这看起来非常模糊。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T03:49:42.657

调试器在引发访问冲突的行中断。或者，您可以使用“反汇编”窗格将问题发生的位置与程序计数器 (PC) 关联起来。

# java - Java中如何读写串行通信？

> ID：11489588
> 
> 赞同：0
> 
> 时间：2012-07-15T05:09:03.827
> 
> 标签：java, serial-port, arduino, rxtx

我正在使用这个[Java 程序](http://www.arduino.cc/playground/Interfacing/Java)与 Arduino 板进行通信。但是，我在向 Arduino 读取和写入串行数据时遇到问题。

目前它看起来像这样：

```
public synchronized void serialEvent(SerialPortEvent oEvent) {
    if (oEvent.getEventType() == SerialPortEvent.DATA_AVAILABLE) {
        try {
            int available = input.available();
            byte chunk[] = new byte[available];
            input.read(chunk, 0, available);

            String display = new String(chunk);
            System.out.print(display);  

            if(display.equals("Request"))  // Having problems with this line. not entering the loop even though I received the String "Request"
            {
                String reply = "Reply";
                byte reply_byte[] = new byte[reply.length()];
                reply_byte = reply.getBytes("UTF-16LE");
                output.write(reply_byte);
            }

        } catch (Exception e) {
            System.err.println(e.toString());
        }
    } 
```

我正在将输入作为字符串读取，然后将字符串回复转换为 byte[] 并回复。但是，这似乎不起作用。有人能告诉我一个更好的方法吗？也许没有将 byte[] 转换为 String 并尝试解释它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T05:13:17.333

考虑在`trim()`字符串上。您可能有额外的空格（或换行符）。

此外，您应该检查方法的返回值，`read()`因为如果存在 EOF，它将返回读取的实际字节（或 -1）。我的意思是，如果您`available()`在它之前打过电话，它可能会正常工作，但检查这些东西只是一个好习惯。

# asp.net - 来自 Linq 的 asp.net ListView 以显示 NavigationLinks

> ID：11489591
> 
> 赞同：0
> 
> 时间：2012-07-15T05:10:44.610
> 
> 标签：asp.net, linq, listview, hyperlink

当用户登录时，我想向他们展示他们当前记录（请求）的列表。我的 asp.net 是这样的——

```
 <asp:ListView ID="MySavedRequestsListView" runat="server" GroupItemCount="5">
            <LayoutTemplate>
                <table runat="server" id="table1">
                    <tr runat="server" id="groupPlaceholder">
                    </tr>
                </table>
            </LayoutTemplate>
            <GroupTemplate>
                <tr runat="server" id="tableRow">
                    <td runat="server" id="itemPlaceholder" />
                </tr>
            </GroupTemplate>
            <ItemTemplate>
                <tr id="TrUserRequest" runat="server">
                    <td id="TdTitle" runat="server">
                        <asp:Label ID="TitleLabel" runat="server" Text='<%#Eval("title") %>'
                    </td>
                </tr>
            </ItemTemplate>
        </asp:ListView> 
```

后面的代码是：

```
 var UserRequests =  (from r in context.course_requests
                                where r.requestor_userid == access.username
                                orderby r.course_title
                                select new { r.request_id, 
                                            r.title}).ToList();
            MySavedRequestsListView.DataSource = UserRequests;
            MySavedRequestsListView.DataBind(); 
```

我看到了一个不错的课程标题列表，但我想要的是让这些标题导航到另一个页面，使用 request_id 作为参数。如何将 HyperLink 类合并到其中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-15T05:43:24.203

您可以使用超链接

```
<asp:HyperLink NavigateUrl="http://www.site.com/page.aspx?id=<%#Eval("request_id") %>" Text="<%#Eval("title") %>"  runat="server" /> 
```

或一个简单的`<a>`标签

```
<a href="http://www.site.com/page.aspx?id=<%#Eval("request_id") %>"> <%#Eval("title") %> </a> 
```

# jpanel - 延迟向jpanel添加多个形状

> ID：11489592
> 
> 赞同：1
> 
> 时间：2012-07-15T05:10:47.917
> 
> 标签：jpanel, delay, shapes

我想在延迟后一次将正方形添加到 jpanel 上。在我尝试使用 setBackgound() 更改背景颜色之前，我的程序运行良好。它没有改变。我发现我必须在我的 paintComponent 方法中调用 super.paintComponent(gr)。但是当我这样做并调用 repaint() 时，只显示当前方块。以前的方块消失了。我知道这是因为 repaint 每次都显示一个全新的面板但是为什么当我不调用 super.paintComponent() 时它会起作用。这是代码的简化版本：

```
import java.awt.*;
import javax.swing.*;

public class Squares extends JFrame{
    aPanel ap = new aPanel();   
    SlowDown sd = new SlowDown(); //slows down program by given number of milliseconds 

    public Squares(){
        super("COLOURED SQUARES");
        setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        add(ap);
        ap.setPreferredSize(new Dimension(300, 300));
        pack();
        setVisible(true);
        addSquares();
   }

    private void addSquares(){
        sd.slowDown(500);
        ap.changeSquare( 100 , 100 , 255 , 0 , 0);
        ap.repaint();

        sd.slowDown(500);
        ap.changeSquare( 200 , 200 , 0 , 0 , 255);
        ap.repaint();     
   }

    public static void main(String[] arguments) {
        Squares sq  = new Squares();
    }

class aPanel extends JPanel{

    private int x = 0;
    private int y = 0;
    private int r = 0;
    private int g = 0;
    private int b = 0;  

    public void paintComponent(Graphics gr) {
        //super.paintComponent(gr);
        Color theColor = new Color (r, g, b);
        gr.setColor(theColor);
        gr.fillRect(x,y,30,30); 
    }
    void changeSquare(int i , int j, int rd , int gr , int bl){
        x = i;
        y = j;
        r = rd;
        g = gr;
        b = bl;
    }
}

class SlowDown{
    void slowDown(long delay){
         long t = System.currentTimeMillis();
         long startTime = t;
         while(t < startTime + delay){
             t = System.currentTimeMillis();            
         }
  }
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-15T05:26:42.927

因此，您可以做很多事情来改进代码。首先，如果您想绘制多个矩形并“记住”这些矩形，那么您需要存储过去绘制的矩形。否则会发生什么，您基本上每次都在先前绘制的矩形上进行绘制。所以我建议将每个矩形存储在某种列表中。然后在绘画上，您可以遍历列表并绘制每个矩形。

其次，延迟可以通过 Thread.sleep() 调用来完成。也许这将是一个例子：

```
class APanel extends JPanel{

  List<Shape> rects;  
  private int r = 0;
  private int g = 0;
  private int b = 0; 

  public APanel(){
         rects = new ArrayList<Shape>();
  }

public void paintComponent(Graphics gr) {
    super.paintComponent(gr);
    Color theColor = new Color (r, g, b);
    gr.setColor(theColor);
    for(Shape s: rects){
       ((Graphics2D)gr).fill(s);
    }        
}

void changeSquare(int i , int j, int rd , int gr , int bl){
    rects.add(new Rectangle2D.Double(i, j, 30, 30));        
    //we have to deal with colors
}
} 
```

现在，上面的示例将允许您不断地将新矩形添加到列表中，并且每次都绘制所有矩形。如果您需要用不同的颜色绘制每个矩形，那么您可能必须创建自己的矩形类来存储在列表中。至于延迟，您可以这样做：

```
 class SlowDown{
    void slowDown(long delay){          
       Thread.sleep(delay);
  }
 } 
```

这应该暂停延迟毫秒。

# matlab - 如何复制 MATLAB 图形并将其粘贴到 Word 文档中？

> ID：11489595
> 
> 赞同：3
> 
> 时间：2012-07-15T05:11:58.153
> 
> 标签：matlab, ms-word, copy-paste, matlab-figure, export-to-word

我在 MATLAB 中打开了一些 MATLAB 图形。我想将它们复制到word文档而不导出并将它们转换为.png或.jpg等。有没有简单明了的方法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-15T05:38:35.013

转到`edit`，选择`copy figure`，然后`Ctrl+v`进入单词。它适用于 Windows，但不适用于 Linux。不确定Mac。

请参阅[此处](http://www.mathworks.com/help/techdoc/ref/hgexport.html)了解更多信息。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-15T13:16:25.527

发出[命令](http://www.mathworks.com/help/techdoc/ref/print.html#f30-443220)：

```
print -dmeta 
```

它将当前图形复制到系统剪贴板（仅限 Microsoft Windows）。现在打开 MS Word，只需点击`Ctrl+V`将图形粘贴到文档中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-15T05:37:31.700

一种方法是使用屏幕捕获快捷方式。

例如，在 Mac OS X 上，如果按住 Control、Shift、Command (cloverleaf) 和“4”（是的，数字 4）键，鼠标指针将变成十字准线，可用于在图形周围绘制一个矩形你想复制的。这会将该区域的图片放在剪贴板上，然后可以使用粘贴将其转储到另一个程序（例如 Word）中。

# python - 用于创建工具架面板的 Blender 脚本没有给出任何结果

> ID：11489597
> 
> 赞同：4
> 
> 时间：2012-07-15T05:12:21.010
> 
> 标签：python, python-3.x, blender, blender-2.61

我找到[了本](http://vimeo.com/18520495)教程，并一直在尝试在工具架中创建自己的面板，但我的面板不起作用，没有明显的原因。

我正在使用 Blender 2.63，并且我还在 Blender 2.58 和 2.56 中尝试了完全相同的脚本，两者都具有完全相同的结果。没有什么。

我通过脚本的次数超过了我的数，我没有看到任何拼写错误或不正确的单词，但它仍然没有任何作用。更糟糕的是我没有收到任何错误消息。

当我在文本编辑器中单击“运行脚本”按钮时，我得到的唯一消息是我已经运行了脚本。在工具架中，它以与添加多维数据集相同的方式显示在底部，只是使用多维数据集，您可以获得一些选项，例如多维数据集的位置/比例等。它还在信息窗口中显示为：

```
bpy.ops.text.run_script() 
```

这就是我的代码的样子：

```
import bpy

class customToolshelfPanel(bpy.types.Panel):
    bl_space_type = "VIEW_3D"
    bl_region_type = "TOOLS"
    bl_context = "objectmode"
    bl_label = "Custom Toolshelf Panel"

    def draw(self, context):
        layout = self.layout
        col = layout.column(align=True)

        col.label(text="Add:")
        col.operator("mesh.primitive_plane_add", icon="MESH_PLANE")
        col.operator("mesh.primitive_cube_add", icon="MESH_CUBE") 
```

任何帮助都将不胜感激，因为如果出现问题，Blender 根本不知道。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-15T05:19:03.073

您需要注册课程..将其添加到脚本的底部

```
bpy.utils.register_class(customToolshelfPanel) 
```

并确保在关闭搅拌机后删除脚本，您还需要取消注册它

```
bpy.utils.unregister_class(customToolshelfPanel) 
```

您可能还想在运行脚本后按 T 几次以更新界面。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-15T05:19:03.497

我还没有使用 2.5/2.6 的新 API（很遗憾），但是文档*从来都不*是一个不好的地方： http: [//www.blender.org/documentation/blender_python_api_2_57_release/bpy.types.Panel.html](http://www.blender.org/documentation/blender_python_api_2_57_release/bpy.types.Panel.html)

示例代码：

```
import bpy

class HelloWorldPanel(bpy.types.Panel):
    bl_idname = "OBJECT_PT_hello_world"
    bl_label = "Hello World"
    bl_space_type = 'PROPERTIES'
    bl_region_type = 'WINDOW'
    bl_context = "object"

    def draw(self, context):
        self.layout.label(text="Hello World")

bpy.utils.register_class(HelloWorldPanel) 
```

您是否尝试过将此行添加到末尾？

```
bpy.utils.register_class(customToolshelfPanel) 
```

创建类是一回事，但您还需要在 UI 中注册它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-15T05:19:11.187

您定义了一个类，但从未实例化它。如果你想让你的脚本做任何事情，你需要对那个类做一些事情。但是，尚不清楚那会是什么。看起来您的班级并没有真正做任何事情。它似乎是某种“面板”，可以添加到更大的界面中。

您应该查看文档以找到您正在尝试做的事情的示例。大概您需要创建的不仅仅是一个面板。

# java - setWallpaper(bitmap) 不设置全屏壁纸？

> ID：11489599
> 
> 赞同：1
> 
> 时间：2012-07-15T05:12:44.103
> 
> 标签：java, android, android-intent

所以我正在尝试创建一个应用程序，用户可以在其中按一个按钮用手机的相机拍摄图像，然后按另一个按钮将该图像设置为手机的壁纸。

我以此开始了相机意图：（这是在 onClick 方法中）

```
Intent i;

i = new Intent(android.provider.MediaStore.ACTION_IMAGE_CAPTURE);
            startActivityForResult(i, cameraResults); 
```

然后我实现了这个方法来接收来自相机的图像：

```
protected void onActivityResult(int requestCode, int resultCode, Intent data) {
    // TODO Auto-generated method stub
    super.onActivityResult(requestCode, resultCode, data);
    if(resultCode == RESULT_OK){
        Bundle extras = data.getExtras();
        bmp = (Bitmap) extras.get("data");
        imageView.setImageBitmap(bmp);
    }
} 
```

然后，在将壁纸设置为 bmp 的按钮的 onClick 方法中，我使用了：

```
getApplicationContext().setWallpaper(bmp); 
```

当我运行这个应用程序时，一切似乎都很完美！拍照后，我将 imageView 设置为图片，然后当我按下按钮将图像设置为我的墙纸时，我的墙纸发生了变化。

**但是，问题是来自相机的图像没有正确设置为墙纸。由于某种原因，图片尺寸减小，因此只有壁纸的中间是该图像。大部分屏幕是黑色的。由于某种原因，图像被缩小了。我希望图片是全屏的，但是现在，它被最小化了，而且背景是黑色的。**

有谁知道这是为什么？我正在关注一个教程视频，教程中的人让它完美地工作（图像设置为全屏壁纸）。

感谢所有帮助，非常感谢！

其他人知道我可以如何缩放它以便我将壁纸设置为全屏？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T16:36:16.970

您提取的位图是图像的缩略图。试试 这个关于使用原生相机应用和图像缩放的[Android 官方教程。](http://developer.android.com/training/camera/photobasics.html)

# c - 如何在单个窗口中显示 gtk 中的文本和按钮？

> ID：11489607
> 
> 赞同：0
> 
> 时间：2012-07-15T05:14:12.950
> 
> 标签：c, user-interface, gtk, gnome

我想在我的窗口和“下一步”按钮上显示文本，但是当我运行代码时它给了我错误。

使用下一个按钮，我想移动到下一个显示其他内容的窗口。有人也可以告诉我如何做到这一点。

```
(try:1914): Gtk-WARNING **: Attempting to add a widget with type GtkVBox to a GtkWindow, but as a GtkBin subclass a GtkWindow can only contain one widget at a time; it already contains a widget of type GtkLabel 
```

我的代码是：

```
#include <gtk/gtk.h>

int main (int argc, char *argv[])
{

        GtkWidget *window;
        GtkWidget *next;

        GtkWidget *label;
        GtkWidget *vbox;
        GtkWidget *hbox;
        GtkWidget *halign;
        GtkWidget *valign;

        gtk_init (&argc, &argv);

        window = gtk_window_new (GTK_WINDOW_TOPLEVEL);
        gtk_window_set_title(GTK_WINDOW(window), "Center");//title position
        gtk_window_set_default_size(GTK_WINDOW(window),600,500);//size
        gtk_window_set_position(GTK_WINDOW(window), GTK_WIN_POS_CENTER);//position
        label = gtk_label_new("Cold was my soul\n\
                        Untold was the pain\n\
                        I faced when you left me\n\
                        A rose in the rain....\n\
                        So I swore to the razor\n\
                        That never, enchained\n\
                        Would your dark nails of faith\n\
                        Be pushed through my veins again\n\
                        \n\
                        Bared on your tomb\n\
                        I'm a prayer for your loneliness\n\
                        And would you ever soon\n\
                        Come above onto me?\n\
                        For once upon a time\n\
                        On the binds of your lowliness\n\
                        I could always find the slot for your sacred key ");

 gtk_label_set_justify(GTK_LABEL(label), GTK_JUSTIFY_CENTER);
        gtk_container_add(GTK_CONTAINER(window), label);
        vbox = gtk_vbox_new(FALSE, 5);

        valign = gtk_alignment_new(0, 1, 0, 0);
        gtk_container_add(GTK_CONTAINER(vbox), valign);
        gtk_container_add(GTK_CONTAINER(window), vbox);

        hbox = gtk_hbox_new(TRUE, 3);

        next = gtk_button_new_with_label("Next");
        gtk_widget_set_size_request(next, 70, 30);
        gtk_container_add(GTK_CONTAINER(hbox), next);
        //      close = gtk_button_new_with_label("Close");
        //      gtk_container_add(GTK_CONTAINER(hbox), close);

        halign = gtk_alignment_new(1, 0, 0, 0);
        gtk_container_add(GTK_CONTAINER(halign), hbox);

        gtk_box_pack_start(GTK_BOX(vbox), halign, FALSE, FALSE, 0);
        g_signal_connect(G_OBJECT(next), "clicked",
                        G_CALLBACK(gtk_main_quit), G_OBJECT(window));

        gtk_widget_show_all(window);

        g_signal_connect_swapped(G_OBJECT(window), "destroy", G_CALLBACK(gtk_main_quit), NULL);

        gtk_main ();

        return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T09:17:21.613

消息很清楚：A`GtkWindow`只能包含一个子小部件，但您已经用标签填充了它。要实现您想要的，您必须将`vbox`（能够包含多个小部件）添加到窗口，然后`label`添加到`vbox`.

# python - 将 psycopg2 安装到 virtualenv 时出现 Gcc 错误（Lubuntu 12.04，python 2.7）

> ID：11489609
> 
> 赞同：2
> 
> 时间：2012-07-15T05:15:07.163
> 
> 标签：python, postgresql, virtualenv

我正在尝试使用 pip 将 psycopg2 安装到 virtualenv 中，但似乎存在某种我无法理解的 gcc 错误。我已经按照其他一些问题的建议安装了 python-dev 和 libpq-dev 。

```
pip install psycopg2
Downloading/unpacking psycopg2
  Running setup.py egg_info for package psycopg2

    no previously-included directories found matching 'doc/src/_build'
Installing collected packages: psycopg2
  Running setup.py install for psycopg2
    building 'psycopg2._psycopg' extension
    gcc -pthread -fno-strict-aliasing -DNDEBUG -g -fwrapv -O2 -Wall -Wstrict-prototypes -fPIC -DPSYCOPG_DEFAULT_PYDATETIME=1 -DPSYCOPG_VERSION="2.4.5 (dt dec pq3 ext)" -DPG_VERSION_HEX=0x090104 -DPSYCOPG_EXTENSIONS=1 -DPSYCOPG_NEW_BOOLEAN=1 -DHAVE_PQFREEMEM=1 -I/usr/include/python2.7 -I. -I/usr/include/postgresql -I/usr/include/postgresql/9.1/server -c psycopg/psycopgmodule.c -o build/temp.linux-i686-2.7/psycopg/psycopgmodule.o -Wdeclaration-after-statement
    gcc: error trying to exec 'as': execvp: No such file or directory
    error: command 'gcc' failed with exit status 1
    Complete output from command /home/mdang/Dropbox/WebDev/ideas/venv/bin/python -c "import setuptools;__file__='/home/mdang/Dropbox/WebDev/ideas/venv/build/psycopg2/setup.py';exec(compile(open(__file__).read().replace('\r\n', '\n'), __file__, 'exec'))" install --single-version-externally-managed --record /tmp/pip-SBgH20-record/install-record.txt --install-headers /home/mdang/Dropbox/WebDev/ideas/venv/include/site/python2.7:
    running install

running build

running build_py

running build_ext

building 'psycopg2._psycopg' extension

gcc -pthread -fno-strict-aliasing -DNDEBUG -g -fwrapv -O2 -Wall -Wstrict-prototypes -fPIC -DPSYCOPG_DEFAULT_PYDATETIME=1 -DPSYCOPG_VERSION="2.4.5 (dt dec pq3 ext)" -DPG_VERSION_HEX=0x090104 -DPSYCOPG_EXTENSIONS=1 -DPSYCOPG_NEW_BOOLEAN=1 -DHAVE_PQFREEMEM=1 -I/usr/include/python2.7 -I. -I/usr/include/postgresql -I/usr/include/postgresql/9.1/server -c psycopg/psycopgmodule.c -o build/temp.linux-i686-2.7/psycopg/psycopgmodule.o -Wdeclaration-after-statement

gcc: error trying to exec 'as': execvp: No such file or directory

error: command 'gcc' failed with exit status 1

----------------------------------------
Command /home/mdang/Dropbox/WebDev/ideas/venv/bin/python -c "import setuptools;__file__='/home/mdang/Dropbox/WebDev/ideas/venv/build/psycopg2/setup.py';exec(compile(open(__file__).read().replace('\r\n', '\n'), __file__, 'exec'))" install --single-version-externally-managed --record /tmp/pip-SBgH20-record/install-record.txt --install-headers /home/mdang/Dropbox/WebDev/ideas/venv/include/site/python2.7 failed with error code 1 in /home/mdang/Dropbox/WebDev/ideas/venv/build/psycopg2
Storing complete log in /home/mdang/.pip/pip.log 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T04:39:23.010

编辑您的 sources.list 文件（通常在 中找到）并为每个相应的行`etc/apt/sources.list`添加一个。`deb-src``deb`

> deb [http://in.archive.ubuntu.com/ubuntu/](http://in.archive.ubuntu.com/ubuntu/)精确主要受限
> 
> deb-src [http://in.archive.ubuntu.com/ubuntu/](http://in.archive.ubuntu.com/ubuntu/)精确主受限**#添加这一行**
> 
> deb [http://in.archive.ubuntu.com/ubuntu/precision-updates](http://in.archive.ubuntu.com/ubuntu/)主要受限
> 
> deb-src [http://in.archive.ubuntu.com/ubuntu/precision-updates](http://in.archive.ubuntu.com/ubuntu/) main restricted **#添加这一行**

两者的区别：

*   `deb`：这些存储库包含二进制文件或预编译包。大多数用户都需要这些存储库。
*   `deb-src`：这些存储库包含软件包的源代码。对开发人员有用。

现在尝试：

```
sudo apt-get update
sudo apt-get build-dep psycopg2  # The name has changed to `psycopg2` from `python-psycopg2` 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-15T06:10:36.530

You need to install two things:

1.  `sudo apt-get install build-essential`
2.  `sudo apt-get build-dep python-psycopg2`

The first installs the necessary build tools you need, and the second installs the dependencies you need to compile psycopg2 inside a virtualenv.

# php - 使用 require() 路径文件的更好方法

> ID：11489613
> 
> 赞同：0
> 
> 时间：2012-07-15T05:16:27.840
> 
> 标签：php, include, require-once

```
require( dirname(dirname(dirname(dirname(dirname(dirname(dirname( __FILE__ ))))))).'/wp-load.php' ); 
```

这是我目前使用的代码。代码位于名为 config.php 的文件中

这是结构：

wordpress\wp-content\themes\\plugins\shortcodes-ultimate\lib\config.php

我需要到达 "wordpress/wp-load.php" 。

get_bloginfo() 在 config.php 中不起作用如何以更简单的方式包含它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T05:23:00.910

在脚本早期的某个位置添加完整路径到`wordpress`您的包含路径，然后我们为您的所有包含添加“短”版本：

```
set_include_path("/path/to/wordpress" . DIRECTORY_SEPERATOR . get_include_path());
...
require("wp-load.php"); 
```

请注意，您还应该检查路径，看看它是否符合您的预期。wordpress 目录已经在您的路径中的某个位置并且问题出在前导的可能性很小（即`/`请记住，*路径*与`"/wp-load.php"`*`"wp-load.php"`*

 *另请注意，“/path/to/wordpress”也可以是相对的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-15T05:26:20.817

有什么问题

```
require("../../../../../../wp-load.php"); 
```

?

而且，您真的是要让您的插件位于主题中吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-09-29T14:10:51.800

我做了一些事情来获得`../`找到 wp-load.php 所需的 ' 数量（至少如果您的代码在 wp-content 中）：

```
$current = preg_split('/\//', preg_split('/wp-content/', getcwd())[1]);
$line = '';
foreach($current as $dots) {
    $line .='../';
}
require($line.'wp-load.php'); 
```*

# php - 来自父类的数据数组未到达 View

> ID：11489617
> 
> 赞同：0
> 
> 时间：2012-07-15T05:17:11.890
> 
> 标签：php, codeigniter

我的视图期望某些变量由调用它们的控制器定义。因此，我创建了自己的控制器来扩展。反过来，这个控制器扩展了`CI_Controller`.

```
class MainController extends CI_Controller{

static protected $data_bundle;

/**
All classes that will extend MainController should have their own constructors
calling the constructor of MainController.
*/
public function __construct(){
    parent::__construct();
    $data_bundle["title"] = "";
    $data_bundle["content"] = "";
    $data_bundle["stylesheets"] = array();
    $data_bundle["scripts"] = array();
    $data_bundle["echo_content"] = true;
}

} 
```

因此，例如，我可以为普通页面定义一个控制器，如下所示

```
class PlainPage extends MainController{
    public function __construct(){
        parent::__construct()
    }

    public function page(){
        parent::$data_bundle["title"] = "Plain Page"
        parent::$data_bundle["content"] = "The quick brown fox jumps over the lazy dog."
        $this->load->view("mainview", parent::$data_bundle);
    }
} 
```

然后，在 中`mainview.php`，我有以下代码：

```
<?php
        foreach($stylesheets as $style){
            echo '<link rel="stylesheet" type="text/css" href="css/$style" />"';
        }
    ?>

    <?php
        foreach($scripts as $script){
            echo '<script type="text/javascript" src="scripts/$script"></script>"';
        }
    ?> 
```

但我收到以下错误：

```
Message: Undefined variable: {stylesheets|scripts}
Message: Invalid argument supplied for foreach() 
```

不是说当`parent::__construct()`被调用时，`$data_bundle`数组应该已经初始化了吗？为什么 CI/PHP 抱怨我有未定义的变量？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T05:52:07.443

初始化静态属性时，您错过`self`了父类构造函数。

```
public function __construct(){
    parent::__construct();
    self::$data_bundle["title"] = "";
    self::$data_bundle["content"] = "";
    self::$data_bundle["stylesheets"] = array();
    self::$data_bundle["scripts"] = array();
    self::$data_bundle["echo_content"] = true;
} 
```

但是在这种情况下你不需要使用静态属性，控制器应该只有一个实例，所以一个实例属性就足够了。

```
class MainController extends CI_Controller{

protected $data_bundle = array();

/**
All classes that will extend MainController should have their own constructors
calling the constructor of MainController.
*/
public function __construct(){
    parent::__construct();
    $this->data_bundle["title"] = "";
    $this->data_bundle["content"] = "";
    $this->data_bundle["stylesheets"] = array();
    $this->data_bundle["scripts"] = array();
    $this->data_bundle["echo_content"] = true;
}

}

class PlainPage extends MainController{
    public function __construct(){
        parent::__construct()
    }

    public function page(){
        $this->data_bundle["title"] = "Plain Page"
        $this->data_bundle["content"] = "The quick brown fox jumps over the lazy dog."
        $this->load->view("mainview", $this->data_bundle);
    }
} 
```

# c# - 如何确定子控件何时关闭

> ID：11489623
> 
> 赞同：0
> 
> 时间：2012-07-15T05:18:05.970
> 
> 标签：c#, events, custom-controls

我正在编写一个程序，其中每个页面都是一个自定义控件。我遇到的问题是我无法让父控件确定子控件何时关闭。这是调用子控件的代码：

```
 public void DisplayPanel(Control c)
    {
        Cursor = Cursors.WaitCursor;
        c.Dock = DockStyle.Fill;
        c.Show();
        c.ControlRemoved += new ControlEventHandler(OnChildClose);
        this.Controls.Add(c);

        c.BringToFront();
        Cursor = Cursors.Default;
    } 
```

这是事件处理程序：

```
 public void OnChildClose(object sender, EventArgs e)
    {
        MessageBox.Show("Child closed");
        ... rest of code to redraw listview... 
    } 
```

在子控件上，这就是我退出它的方式：

```
 this.Parent.Controls.Remove(this); 
```

一切正常，但问题是一旦子控件完成，我需要做一些事情，比如重绘一个列表视图，但上面的事件不会触发。有没有其他方法可以做到这一点？还是我需要以另一种方式继续下去？

当前发生的情况是，例如，我使用子控件将某些内容添加到数据库中，然后退出子控件。子控件消失，父控件留在屏幕上，但父控件没有任何更新。我需要退出父控件并返回查看添加到数据库中

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-15T05:32:02.390

在子控件中定义`event`：

```
public delegate void RemovedEventHandler(object sender, EventArgs e);

class ChildControl
{
    ...

    public event RemovedEventHandler Removed;

    protected virtual void OnRemoved(EventArgs e)
    {
        if (Removed != null)
            Removed(this, e);
    }

    public void Remove(object value) 
    {
       // Before remove from parent call event 
       OnRemoved(EventArgs.Empty);
       //Here remove from parent
       ...
    }
} 
```

它在父控件中的用法：

```
 ChildControl control = ...
  control.Removed += new EventHandler(ChildRemoved);

  // This will be called whenever the Child Removed:
  private void ChildRemoved(object sender, EventArgs e) 
  {
     ChildControl childControlThatRemoved = (ChildControl) sender;
     Console.WriteLine("This is called when the Child Removed.");
  } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-15T05:20:30.170

我很确定通过从父列表中删除孩子，您还会断开所有事件处理程序，因此您不会收到孩子正在关闭的通知（它可能在您从父母列表中删除后被*关闭*） .

您可以尝试根本不将其从父列表中删除，仅`Dispose`此而已。或者，由于孩子知道应该刷新父母，让客户端向父母发送一条消息，要求父母刷新自己。这样你就不会依赖任何隐含的东西，并且确切地知道发生了什么。

# python - 阅读库方法定义

> ID：11489624
> 
> 赞同：1
> 
> 时间：2012-07-15T05:18:42.577
> 
> 标签：python

如果我想查看一个方法的作用，例如模块 random 中的方法 gauss，我将如何使用 Python 解释器来做呢？例如，在我在 Python 解释器的控制台中键入 import random 之后，我可以做些什么来找出模块 random 中方法 gauss 的实际代码，而无需查看实际文件。提前致谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-15T05:23:45.297

尝试：

```
import inspect
inspect.getsource(random.gauss) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-15T05:22:43.300

如果您使用的是[IPython](http://ipython.org/)，您可以这样做：

```
>>> random.gauss?? 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-15T05:24:16.880

虽然它在默认的 python shell 中不可用，但这是[`ipython`](http://ipython.org/ipython-doc/stable/interactive/tutorial.html).

```
In [4]: %psource random.gauss
    def gauss(self, mu, sigma):
        """Gaussian distribution.

        mu is the mean, and sigma is the standard deviation.  This is
        slightly faster than the normalvariate() function.

        Not thread-safe without a lock around calls.

        """

        # When x and y are two variables from [0, 1), uniformly
        # distributed, then
        #
        #    cos(2*pi*x)*sqrt(-2*log(1-y))
        #    sin(2*pi*x)*sqrt(-2*log(1-y))
        #
        # are two *independent* variables with normal distribution
        # (mu = 0, sigma = 1).
        # (Lambert Meertens)
        # (corrected version; bug discovered by Mike Miller, fixed by LM)

        # Multithreading note: When two threads call this function
        # simultaneously, it is possible that they will receive the
        # same return value.  The window is very small though.  To
        # avoid this, you have to use a lock around all calls.  (I
        # didn't want to slow this down in the serial case by using a
        # lock here.)

        random = self.random
        z = self.gauss_next
        self.gauss_next = None
        if z is None:
            x2pi = random() * TWOPI
            g2rad = _sqrt(-2.0 * _log(1.0 - random()))
            z = _cos(x2pi) * g2rad
            self.gauss_next = _sin(x2pi) * g2rad

        return mu + z*sigma 
```

这与`random.gauss??`@icktoofay 建议的打字相同

# php - 更新多行返回相同的值，而不是分别更新它

> ID：11489635
> 
> 赞同：0
> 
> 时间：2012-07-15T05:20:11.127
> 
> 标签：php, rows

```
table: test1
----------
|id |name|
----------
|46 |BOB |
----------

table: test2
------------------------
|id  |name_id |job     |
------------------------
|133 |46      |NOJOB   |
------------------------
|134 |46      |NOJOB   |
------------------------
|135 |46      |NOJOB   |
------------------------ 
```

您好，我有一个问题，分别基于“test2.name_id”更新“test2.job”上的多行，这是由 mysql_insert_id(); INSERT 查询中的“test1.id”函数和我的表结构产生的多于。

我的表单将取决于我在“test2”表中有多少记录，条件为“WHERE name_id = '”.$_GET['id'].“'”，并且我指定了“localhost/rfps/ ztransposto.php?id=46" 在浏览器 url 地址中，表单将显示为上面 test2 表中的内容。

问题是当我尝试更改和更新第一行和第二行时，它不会更新任何内容，因为它只会在我更改最后一行的值并更新其他两行的第一行和第二行时更新相同的值。下面是源代码：

1-更新表单页面

```
<?php require_once('Connections/rfps.php'); ?>
<?php
//initialize the session
if (!isset($_SESSION)) {
  session_start();
 }
?>

<html>
<head>
</head>
<body>

<?php

$sql = "SELECT * FROM test2 WHERE name_id = '".$_GET['id']."'";

$result = mysql_query($sql) or die($sql."<br/><br/>".mysql_error());

$i = 0;

echo '<table width="50%">';
echo '<tr>';
echo '<td>ID</td>';
echo '<td>Name ID</td>';
echo '<td>Job</td>';
echo '</tr>';

echo "<form name='form_update' method='post' action='ztranspostop.php'>\n";
while ($job = mysql_fetch_array($result)) {
echo '<tr>';
echo "<td>{$job['id']}<input type='hidden' name='id[$i]' value='{$job['id']}' /></td>";
echo "<td>{$job['name_id']}<input type='hidden' name='name_id[$i]' value='{$job['name_id']}' /></td>";
echo "<td><input type='text' size='40' name='job[$i]' value='{$job['job']}' /></td>";
echo '</tr>';
++$i;
}
echo '<tr>';
echo "<td><input type='submit' value='submit' /></td>";
echo '</tr>';
echo "</form>";
echo '</table>';

?>
</body>
</html> 
```

2-更新查询页面

```
<?php require_once('Connections/rfps.php'); ?>
<?php
//initialize the session
if (!isset($_SESSION)) {
  session_start();
}

$size = count($_POST['job']);

$i = 0;
while ($i < $size) {
    $job= $_POST['job'][$i];
    $name_id = $_POST['name_id'][$i];

    $query = "UPDATE test2 SET job = '$job' WHERE name_id = '$name_id'";
    mysql_query($query) or die ("Error in query: $query");
    echo "$job<br /><br /><em>Updated!</em><br /><br />";
    ++$i;
}
?> 
```

谁能指出我弄错了代码的哪一部分？提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-15T05:39:45.220

我认为您缺少表单中 test2.id 字段与在更新查询中使用它之间的连接。事实上，如果你包含了，你可能不需要这个`WHERE name_id =`子句`WHERE id =`。这样就完成了表单中的一行（该页面上 $i 的值）与正在更新的特定作业行（后续页面上的 $i 值）之间的关联。否则，您只会根据它们共同的属性（name_id）进行更新:-)

```
$i = 0;
while ($i < $size) {
    $job= $_POST['job'][$i];
    $job_id = intval($_POST['id'][$i]);

    $query = "UPDATE test2 SET job = '$job' WHERE id = '$job_id'";
    mysql_query($query) or die ("Error in query: $query");
    echo "$job<br /><br /><em>Updated!</em><br /><br />";
    ++$i;
}
?> 
```

# c# - 出现在 SIP 键盘上设置垂直偏移

> ID：11489641
> 
> 赞同：1
> 
> 时间：2012-07-15T05:22:03.877
> 
> 标签：c#, silverlight, windows-phone-7, xaml, expression-blend

我的 windows phone 7 应用程序中有一些页面，其中包含许多文本框。正如我们所知，windows phone 7 的默认行为是，当我们将焦点放在任何文本框上时，SIP 键盘会出现并向上滑动整个页面，并且在失去焦点时它会恢复到正常状态。我想在我的应用程序中限制这个东西。正如我在谷歌上搜索并找到的解决方案，我们将所有控件放入`scrollviewer`并`textbox`设置滚动查看器垂直偏移到该文本框位置的焦点。

1.  现在我很困惑如何告诉滚动查看器我的垂直偏移控件的位置。

2.  假设如果我可以设置那个东西，我需要为我的文本框`on GotFocus`和`On LostFocus`. 有没有其他方法可以通过交互行为和触发器来调用这个东西。

更新...

```
<Grid x:Name="LayoutRoot" Background="Transparent">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>

        <!--TitlePanel contains the name of the application and page title-->
        <StackPanel x:Name="TitlePanel" Grid.Row="0" Margin="12,17,0,28">
            <TextBlock x:Name="ApplicationTitle" Text="MY APPLICATION" Style="{StaticResource PhoneTextNormalStyle}"/>
            <TextBlock x:Name="PageTitle" Text="page name" Margin="9,-7,0,0" Style="{StaticResource PhoneTextTitle1Style}"/>
        </StackPanel>

        <!--ContentPanel - place additional content here-->
        <Grid x:Name="ContentPanel" Grid.Row="1" Margin="12,0,12,0">
            <Grid.RowDefinitions>
                <RowDefinition Height="480" />
                <RowDefinition Height="*" />
            </Grid.RowDefinitions>
            <ScrollViewer x:Name="sc">
                <StackPanel>
                    <Grid x:Name="Grid1" Grid.Row="0">
            <Grid.RowDefinitions>
                <RowDefinition Height="80" />
                <RowDefinition Height="80" />
                <RowDefinition Height="80" />
                <RowDefinition Height="80" />
                <RowDefinition Height="80" />
                <RowDefinition Height="80" />
            </Grid.RowDefinitions>
                    <TextBox Width="460" AcceptsReturn="True" Grid.Row="0" x:Name="txtbox1"/>
                    <TextBox Width="460" AcceptsReturn="True" Grid.Row="1" x:Name="txtbox2"/>
                    <TextBox Width="460" AcceptsReturn="True" Grid.Row="2" x:Name="txtbox3"/>
                    <TextBox Width="460" AcceptsReturn="True" Grid.Row="3" x:Name="txtbox4"/>
                    <TextBox Width="460" AcceptsReturn="True" Grid.Row="4" x:Name="txtbox5"/>
                    <TextBox Width="460" AcceptsReturn="True" Grid.Row="5" x:Name="txtbox6" GotFocus="txtbox6_GotFocus"/>
            </Grid>
                </StackPanel>
            </ScrollViewer>
            <Grid x:Name="Grid2" Grid.Row="1">
                <Grid.RowDefinitions>
                    <RowDefinition Height="80" />
                </Grid.RowDefinitions>
                <Button x:Name="btnTest" Width="250" Content="Test" Grid.Row="0" />
            </Grid>
        </Grid>
    </Grid> 
```

和 CS C# ....

```
void ScrollToFocused(ScrollViewer scrollviewer)
{
    FrameworkElement focusedElement = FocusManager.GetFocusedElement() as FrameworkElement;
    // verify focused control is a child of the ScrollViewer 
    if (scrollviewer != null && focusedElement != null && IsVisualChild(scrollviewer, focusedElement))
    {
        GeneralTransform focusedVisualTransform = focusedElement.TransformToVisual(scrollviewer);
        Rect rectangle = focusedVisualTransform.TransformBounds(new Rect(new Point(focusedElement.Margin.Left, focusedElement.Margin.Top), focusedElement.RenderSize));
        double newOffset = scrollviewer.VerticalOffset + (rectangle.Bottom - scrollviewer.ViewportHeight);
        scrollviewer.ScrollToVerticalOffset(newOffset);
    }
}

bool IsVisualChild(DependencyObject element, DependencyObject searchChildElement)
{
    if (element == searchChildElement)
        return true;
    // recursively process nested children in the visual tree 
    int children = VisualTreeHelper.GetChildrenCount(element);
    for (int i = 0; i < children; i++)
    {
        DependencyObject child = VisualTreeHelper.GetChild(element, i);
        if (IsVisualChild(child, searchChildElement))
            return true;
    }
    return false;
}

private void txtbox6_GotFocus(object sender, RoutedEventArgs e)
{
    txtbox6.Focus();
    ScrollToFocused(sc);
} 
```

但同样的结果......非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-27T11:04:55.573

这是因为您的网格高度有限。

通过 Height="600" 更改为您的网格提供一些高度。可能是 600 或超过 600。这取决于您的页面。试试这个。我可以使用此解决方案解决我的问题

# html - 在右上角显示 p html 标签

> ID：11489645
> 
> 赞同：0
> 
> 时间：2012-07-15T05:22:34.770
> 
> 标签：html, css

我正在尝试在右上角显示带有 count-names 类的 ap 标签。我不想使用`margin-top: -20px`. 有没有其他合适的方法把它放在我想显示的地方？

这是我的代码[代码](http://jsfiddle.net/yRNTy/1/)

html代码

```
<p>First name: <input id="name" /></p>
<p>First name capitalized: <strong>NAME</strong></p>
<p class="count-names">1</p>​ 
```

CSS代码

```
.count-names {
    float: right;
    top: 0;
}​ 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-15T05:24:53.490

你去：

[http://jsfiddle.net/yRNTy/2/](http://jsfiddle.net/yRNTy/2/)

html：

```
<p>First name: <input id="name" /></p>
        <p>First name capitalized: <strong>NAME</strong></p>
<p class="count-names">1</p> 
```

CSS：

```
.count-names {
    position:absolute;
    top: 0;
    right:0;
    padding:3px;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-15T05:28:00.380

使用此代码：

**HTML：**

```
<p>First name: <input id="name" /></p>
<p>First name capitalized: <strong>NAME</strong></p>
<p class="count-names">1</p> 
```

**CSS：**

```
.count-names {
    position: absolute;
    top: 0;
    right: 0;
} 
```

`position: absolute`意味着将元素定位到文档的绝对位置，独立于任何其他元素。

`top`并且`right`非常不言自明，它们设置了文档的顶部和右侧位置。

参考：[位置-MDN](https://developer.mozilla.org/en/CSS/position)。

[看一个例子](http://jsfiddle.net/yRNTy/5/)。

这是我在示例中使用的实际 CSS（只是为了让它看起来不错）：

```
.count-names {
    position: absolute;
    top: 0;
    right: 0;
    background: #eee;
    margin: 10px;
    padding: 10px;
    border-radius: 5px;
    -moz-border-radius: 5px;
    -webkit-border-radius: 5px;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-15T05:25:01.583

将您的`p`标签放在其余代码之前，如下所示：

[http://jsfiddle.net/yRNTy/3](http://jsfiddle.net/yRNTy/3)

# wordpress - Wordpress W3C 总缓存 - 在行操作中隐藏“从页面缓存中清除”

> ID：11489649
> 
> 赞同：0
> 
> 时间：2012-07-15T05:23:19.387
> 
> 标签：wordpress

我想找到一种方法来最好地隐藏或删除“从页面缓存中清除”选项，一旦我将鼠标悬停在特定的帖子/页面等上，该选项就会出现在我的行​​操作中。有人知道解决这个问题的方法吗？

据我所知，代码是在 TotalCacheAdmin.php 文件中生成的：

```
/**
 * post_row_actions filter
 *
 * @param array $actions
 * @param object $post
 * @return array
 */
function post_row_actions($actions, $post) {
    $actions = array_merge($actions, array(
        'pgcache_purge' => sprintf('<a href="%s">Purge from Page Cache</a>', wp_nonce_url(sprintf('admin.php?page=w3tc_general&w3tc_pgcache_purge_post&post_id=%d', $post->ID), 'w3tc'))
    ));

    return $actions;
} 
```

一些建议将不胜感激 - 非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T06:09:12.147

通过添加 display:none 选项解决了这个问题 - 这可以解决问题

# php - 在随机编辑的文件中提取字符串

> ID：11489658
> 
> 赞同：0
> 
> 时间：2012-07-15T05:25:01.210
> 
> 标签：php, file-io

因此，假设我有一个文本文件，其中包含有关客户端的一些信息。

```
Name=RichardBaxton
Age=21
Nicks=ReconRoverRick
Company=MorganIndustries 
```

显然有更好的方法来存储有关人员的信息，但是为了这种情况，我会说我是一个顽固的白痴，想要这样。

我要做的是提取“ReconRoverRick”部分，并将其放入一个字符串中（比如说，`$nick`）。但是，由于文件总是在变化，而且总是随机变化，我不知道如何做到这一点。该`Nicks=ReconRoverRick`部分可能会更改为`Nicks=KingBax`或其他内容。

我能得到一些帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T01:26:52.683

看起来您正在解析的文件与 ini 文件的格式非常相似。

您可以尝试使用 php 的内置函数`parse_ini_file`（[链接](http://php.net/manual/en/function.parse-ini-file.php)）

例子：

```
$ini_array = parse_ini_file('path/to/your/file.txt');
echo $ini_array['Nicks']; // will output ReconRoverRick/KingBax 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-15T05:30:32.533

`if (preg_match("/^Nicks=(.+)$/", "Nicks=ReckonRoverRick", $matches)) { print $matches[1]; }`

而不是`"Nicks=ReckonRoverRick"`使用`file_get_contents("filename.txt")`where filename.txt 是包含此信息的文本文件的名称。

# excel - scripting.dictionary 无法识别数字

> ID：11489659
> 
> 赞同：2
> 
> 时间：2012-07-15T05:25:05.783
> 
> 标签：excel, scripting.dictionary, vba

得到这个代码：

```
Dim a, i As Long
With Range("K1", Range("K" & Rows.Count).End(xlUp))
    a = .Value
End With
With CreateObject("Scripting.Dictionary")
    .CompareMode = vbTextCompare
    .Add "test", 1
    For i = 1 To UBound(a, 1)
        If .exists(a(i, 1)) Then
            Cells(i, 14).Value = 1
        Else
            Cells(i, 14).Value = 0
        End If
    Next
End With 
```

当“测试”一词在 K 列中的任何位置时，它完全会在第 14 列中给我一个“1”。

如果我将 ".Add "test", 1" 行更改为 ".Add "21", 1" 它只返回 "0" 尽管我在 K 列中有 "21"。

网上说 .key 值可以是任何值（文本、数字等）。由于列 K 仅包含数字（1 到 25），我需要脚本来标记其中 1 个数字的出现，我真的想使用“scripting.dictionary”，因为它是最快的方法。

我做错了什么或者“scripting.dictionary”不只支持数字。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T08:31:56.540

解决了。需要将行更改为：

```
.Add 21, 1 
```

所以`21`没有引号。

# css - CSS 3 媒体查询 - 支持什么分辨率

> ID：11489667
> 
> 赞同：0
> 
> 时间：2012-07-15T05:29:08.383
> 
> 标签：css, media-queries, screen-resolution

对于 CSS 3 媒体查询，对于我们应该设计的*分辨率*有什么建议吗？

目前，我正在分开：

1.  可见区域大于等于 1140px
2.  可见区域大于等于960px
3.  960px以下的可见区域

欢迎任何与此相关的文章的链接。不过，最终，我正在寻找推荐解决方案的列表。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-15T22:06:55.000

一个非常好的推荐分辨率列表，

[标准设备的媒体查询](http://css-tricks.com/snippets/css/media-queries-for-standard-devices/)

如果您的目标是特定设备，

[媒体查询片段](http://nmsdvid.com/snippets/)

希望这可以帮助 ：）

# algorithm - CLRS - 随机搜索 - 如何计算预期的选择数量？

> ID：11489668
> 
> 赞同：1
> 
> 时间：2012-07-15T05:29:34.857
> 
> 标签：algorithm, probability

这是 CLRS 问题。问题来自第三版 CLRS 书：5-2-b。

随机搜索是一种算法，您必须随机选择一个元素并将其与搜索的元素进行比较。如果相等，我们需要停止。现在，假设您恰好有一个索引为 i 的元素，使得 A[i]=x（x 是数组中的搜索元素）。在找到 x 之前，我们必须选择 A 的预期索引数是多少？此外，当我们有超过 1 个等于 x 的索引值时，我们如何找到预期的索引数量？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T22:56:09.393

我们可以定义一个随机变量 X = 在选择目标元素之前的迭代次数。如果您将术语概括为“迭代”被称为“试验”而“选择目标元素”被称为“成功”，那么您有 X = 成功前的试验次数。

这个随机变量有一个众所周知的分布。它是给定成功概率参数 p的[几何分布。](http://en.wikipedia.org/wiki/Geometric_distribution)几何分布的期望值为 E(X) = 1/p。

要将几何分布应用于问题，必须确定成功概率 p。对于只有一个索引包含目标值的情况，p = 1/n 其中 n 是搜索到的集合的大小。所以在这种情况下，E(X) = n。

对于任意数量的索引映射到目标值的一般情况，p = m / n 其中 m 是映射到目标值的索引的数量。所以在这种情况下，E(X) = n / m。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-15T05:29:34.857

假设在我们找到元素 x 之前有 k 次失败。所以 Pr{k 失败}=k/(n-1)。现在 E(X)=对于 k=1 到 n 的 Pr{k 失败} 的总和。因此，E(X)=n(n+1)/2(n-1)。

# c# - 防止 Thread.CurrentPrincipal 跨应用程序域传播

> ID：11489673
> 
> 赞同：4
> 
> 时间：2012-07-15T05:30:33.223
> 
> 标签：c#, .net, clr

如果可以阻止当前线程的 IPrincipal 在应用程序域边界上传播，有人会这样做吗？我无法控制分配给线程的 IPrincipal，但我可以控制创建应用程序域。

（我想这样做的原因是为了防止在主体对象类型的程序集在其他域中不可用时发生序列化错误。）

编辑：`ExecutionContext.SuppressFlow`看起来很有希望，但似乎没有实现目标。以下打印“MyIdentity”：

```
static void Main ()
{
    ExecutionContext.SuppressFlow ();
    Thread.CurrentPrincipal = new GenericPrincipal (new GenericIdentity ("MyIdentity"), "Role".Split ());
    AppDomain.CreateDomain ("New domain").DoCallBack (Isolated);
}

static void Isolated ()
{
    Console.WriteLine ("Current principal: " + Thread.CurrentPrincipal.Identity.Name);  // MyIdentity
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-15T15:53:08.850

您没有运行异步方法，目标函数由同一线程在辅助 appdomain 中执行。所以校长不变。这有效：

```
 var flow = ExecutionContext.SuppressFlow();
        Thread.CurrentPrincipal = new GenericPrincipal(new GenericIdentity("MyIdentity"), "Role".Split());
        ThreadPool.QueueUserWorkItem((x) => {
            AppDomain.CreateDomain("New domain").DoCallBack(Isolated);
        });
        flow.Undo(); 
```

或者，如果您只想使用特定上下文运行同一个线程，那么您可以使用 ExecutionContext.Run()：

```
 var copy = ExecutionContext.Capture();
        Thread.CurrentPrincipal = new GenericPrincipal(new GenericIdentity("MyIdentity"), "Role".Split());
        ExecutionContext.Run(copy, new ContextCallback((x) => {
            AppDomain.CreateDomain("New domain").DoCallBack(Isolated);
        }), null); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-15T05:58:01.537

这似乎可以满足您的要求：

[System.Threading.ExecutionContext](http://msdn.microsoft.com/en-us/library/system.threading.executioncontext.aspx)

具体来说，看一下 SuppressFlow 方法。

克里斯

# django - 在 django 内联表单集中隐藏数据

> ID：11489674
> 
> 赞同：2
> 
> 时间：2012-07-15T05:30:43.863
> 
> 标签：django, django-forms, inline-formset

我正在调查使用 django 应用程序的内联表单集来填充一对多关系。我终于得到了一个内联表单集，我注意到它以一个表单显示所有数据。这对我的一位用户来说很棒。但是，我有另一个用例，不允许用户查看任何现有数据。用户可以添加新数据，但不允许查看任何现有记录。

是否可以使用内联表单集来执行此操作？您可以让内联表单集隐藏所有现有数据，而不是显示 1 对多关系中的所有内容吗？如果是这样，如何？有什么例子吗？

# android - 有谁知道如何使用摇命令导航页面

> ID：11489677
> 
> 赞同：-2
> 
> 时间：2012-07-15T05:31:15.593
> 
> 标签：android, shake

我想使用摇动命令导航页面，但它出现错误，所以我在代码中遗漏了什么。我不明白什么是加速度计。这是我的代码。

public class ACTIVITY extends Activity { /** 首次创建活动时调用。*/

```
 @Override
        public void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);
            setContentView(R.layout.main);

            SensorManager mSensorManager;

            ShakeEvent mSensorListener;

            mSensorListener = new ShakeEvent();
            mSensorManager = (SensorManager) getSystemService(Context.SENSOR_SERVICE);
            mSensorManager.registerListener(mSensorListener,
                mSensorManager.getDefaultSensor(Sensor.TYPE_ACCELEROMETER),
                SensorManager.SENSOR_DELAY_UI);

            mSensorListener.setOnShakeListener(new ShakeEvent.OnShakeListener() {

              public void onShake() {
                  Intent i = new Intent(shake.this, NEWACTIVITY.class);
                  startActivity(i);
              }
            });
        }} 
```

感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-15T06:08:04.983

You said that your activity is called "ACTIVITY". But in your onShake method you create an Intent with first argument "shake.this". That doesn't make any sense, because your OnShakeListener is **not nested** in a class called "shake" (and furthermore that first argument must be a Context object!). You need to write the following instead:

```
 public void onShake() {
              Intent i = new Intent(ACTIVITY.this, NEWACTIVITY.class);
              startActivity(i);
          } 
```

# delphi - 使用delphi列出字符串网格中目录中的所有文件

> ID：11489680
> 
> 赞同：1
> 
> 时间：2012-07-15T05:31:57.123
> 
> 标签：delphi, tstringgrid, filelist

我正在使用 Delphi 7，我想在字符串网格中列出给定目录中的所有文件（每行一个文件，全部在 1 列中）。我已经搜索了大约一个小时，但找不到任何有关如何执行此操作的示例，因此您可以提供任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-15T05:57:59.683

这将使用指定文件夹中的所有文件填充`TStrings`后代（例如 、`TStringList`等`TMemo.Lihes`）：

```
function  GetFiles(const StartDir: String; const List: TStrings): Boolean;
var
  SRec: TSearchRec;
  Res: Integer;
begin
  if not Assigned(List) then
  begin
    Result := False;
    Exit;
  end;
  Res := FindFirst(StartDir + '*.*', faAnyfile, SRec );
  if Res = 0 then
  try
    while res = 0 do
    begin
      if (SRec.Attr and faDirectory <> faDirectory) then
        // If you want filename only, remove "StartDir +" 
        // from next line
        List.Add( StartDir + SRec.Name );
      Res := FindNext(SRec);
    end;
  finally
    FindClose(SRec)
  end;
  Result := (List.Count > 0);
end; 
```

像这样使用它来填充您的`TStringGrid`（`Grid`在下面的代码中 - 我添加了代码以根据最长文件名的长度自动调整列的大小）：

```
var
  SL: TStringList;
  i: Integer;
  MaxWidth, CurrWidth: Integer;
const
  Padding = 10;
begin
  SL := TStringList.Create;
  try
    if GetFiles('C:\Temp\', SL) then
    begin
      MaxWidth := Grid.ColWidths[0];
      for i := 0 to SL.Count - 1 do
      begin
        CurrWidth := Grid.Canvas.TextWidth(SL[i]);
        if CurrWidth > MaxWidth then
          MaxWidth := CurrWidth;
        // Populates first column in stringgrid.
        Grid.RowCount := Grid.RowCount + 1;
        Grid.Cells[0, Grid.RowCount - 1] := SL[i];
      end;
      Grid.ColWidths[0] := MaxWidth + Padding;
    end;
  finally
    SL.Free;
  end;
end; 
```

请注意，此代码要求路径在文件夹名称后包含尾部反斜杠；您可以轻松修改它以在需要时自动添加它，或者接受文件夹名称和文件掩码以仅包含某些文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-15T05:36:45.440

1.  使用[SysUtil.FindFirst/FindNext/FindClose](http://www.delphibasics.co.uk/RTL.asp?Name=FindFirst)获取文件

2.  只需将字符串插入所需的行/列。根据需要增加“RowCount”：

    *   [添加行](http://www.tek-tips.com/viewthread.cfm?qid=1171477)

    *   [插入/删除行](http://delphi.cjcsoft.net/viewthread.php?tid=42751)

    *   [Lazarus String Grids 参考（很好的信息，但与 Delphi 有显着差异）](http://wiki.lazarus.freepascal.org/index.php/Grids_Reference_Page#property_Rows.5Bindex%3a_Integer.5D%3a_TStrings_read_GetRows_write_SetRows.3B)

# java - 套接字编程（java中）是否适用于广域网

> ID：11489681
> 
> 赞同：-8
> 
> 时间：2012-07-15T05:31:57.703
> 
> 标签：java

我们可以使用 java 中的套接字类通过广域网进行通信吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-15T05:33:54.390

是的，您通常可以使用 Java 进行任何其他语言的套接字编程。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-15T06:34:34.190

您可以在 Java 或任何其他语言中使用 LAN、VLAN、MAN、W​​AN 上的套接字。

# iphone - 将数据从详细视图发送到表单

> ID：11489683
> 
> 赞同：0
> 
> 时间：2012-07-15T05:32:04.920
> 
> 标签：iphone, ios, xcode, forms, uitableview

本周我的母亲（她是一名美容师）问我是否可以为她创建一个 iPhone 应用程序。几年前我尝试过使用 Xcode，但没有什么比这更糟糕的了。我说我会试一试，因为我是她的爱子，哈哈。我对所有这一切都是一个完全的菜鸟，但到目前为止，我已经能够解决问题，直到现在我遇到了问题（感谢谷歌）。基本上，我正在尝试创建一个表单，允许用户填写并将通过我的网站提交的预约请求发送到使用 mail() 函数的 php 文件，然后发送到我母亲的电子邮件。到现在为止还挺好。

[屏幕截图](https://i.stack.imgur.com/Xy5XN.png)

如果我填写名字、姓氏、电子邮件和联系电话，他们都可以发送。我的问题是找到一种将所需治疗的名称与其他信息一起发送的方法。由于他们可以选择很多治疗方法，我希望用户能够单击治疗单元并从 TableView 中选择所需的治疗方法。老实说，我什至不知道从哪里开始。我会附上我的项目，以防有人想看看，如果有人能解决这个问题（这对你们来说可能是一个死胡同），我将非常感激。我不介意您是否通过我的 php 文件测试电子邮件功能。但是，电子邮件仍然会来找我。不幸的是，我不能借出我的服务器详细信息。

我还没有真正看过的另一个问题是选择日期和时间，就像在选择闹钟时在 Apple 时钟应用程序中一样，但这是我以后可以解决的问题。

继承人的项目。 [http://theomnicraft.com/delta.zip](http://theomnicraft.com/delta.zip)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-15T06:30:38.813

您想使用 UIPickerViewer 来选择治疗，并使用 UIDatePicker 来选择日期/时间。

您只需要为它们实现一些基本方法，用一些值初始化对象，然后在选择单元格时保存选择。

参考（日期选择器）：http: [//developer.apple.com/library/mac/#samplecode/DatePicker/Listings/ReadMe_txt.html](http://developer.apple.com/library/mac/#samplecode/DatePicker/Listings/ReadMe_txt.html)

参考（选择器查看器）： [http](http://www.techotopia.com/index.php/An_iOS_4_iPhone_UIPickerView_Example_(Xcode_4) ://www.techotopia.com/index.php/An_iOS_4_iPhone_UIPickerView_Example_(Xcode_4 )

如果您已经做到了这一步，您可能可以按照您在 Google 或 Youtube 上找到的一些教程进行操作，并能够实现这一点。

要在 tableview 中实现这一点，您需要对 tableview 的 cellForRowAtIndexPath 方法进行一些小的更改。您需要检查您何时处于表格的第二部分并显示第一个单元格，以使输入字段链接到 PickerViewer 而不是标准文本输入字段，以及第二个单元格的日期选择器（基于您的截屏）。

这个例子应该有帮助：http: [//developer.apple.com/library/ios/#samplecode/DateCell/Introduction/Intro.html](http://developer.apple.com/library/ios/#samplecode/DateCell/Introduction/Intro.html)

# iphone - 应用程序不断崩溃 - JSON

> ID：11489684
> 
> 赞同：0
> 
> 时间：2012-07-15T05:32:11.723
> 
> 标签：iphone, objective-c, xcode, json, ipad

我正在尝试使用 JSON 解析来自 yahoo Finance 的数据。由于某种原因，该应用程序不断崩溃。似乎最后一行代码导致了崩溃。当我注释掉该行时，不会发生崩溃。这是我到目前为止所拥有的......有什么想法吗？

```
#define kBgQueue dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0) //1
#define kLatestKivaLoansURL [NSURL URLWithString:     @"http://query.yahooapis.com/v1/public/yql?    q=select%20*%20from%20yahoo.finance.quotes%20where%20symbol%20in%20(%22AAPL%22)%0A%09%09&env    =http%3A%2F%2Fdatatables.org%2Falltables.env&format=json"] //2

#import "JsonViewController.h"

@implementation JsonViewController

- (void)viewDidLoad
{
[super viewDidLoad];

dispatch_async(kBgQueue, ^{
    NSData* data = [NSData dataWithContentsOfURL: 
                    kLatestKivaLoansURL];
    [self performSelectorOnMainThread:@selector(fetchedData:) 
                           withObject:data waitUntilDone:YES];
});
}

- (void)fetchedData:(NSData *)responseData {
//parse out the json data
NSError* error;
NSDictionary* json = [NSJSONSerialization 
                      JSONObjectWithData:responseData //1

                      options:kNilOptions 
                      error:&error];

NSArray* latestLoans = [json objectForKey:@"query"]; //2

NSLog(@"query: %@", latestLoans); //3

NSDictionary* loan = [latestLoans objectAtIndex:0]; /////// Where crash happens //////
}
@end 
```

这是控制台中的错误消息

> [__NSCFDictionary objectAtIndex:]：无法识别的选择器发送到实例 0x6a65420 2012-07-15 01:18:29.492 Json[1730:f803] ***由于未捕获的异常“NSInvalidArgumentException”而终止应用程序，原因：“-[__NSCFDictionary objectAtIndex:]：无法识别选择器发送到实例 0x6a65420'

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-15T05:51:35.733

您正在尝试发送`objectAtIndex:`到 NSDictionary。当你在做

```
NSArray* latestLoans = [json objectForKey:@"query"]; //2 
```

返回一个 'NSDictionary'而`[json objectForKey:@"query"]`不是`NSArray`. 你可以通过这样做看到这一点

```
NSLOG(@"CLASS is %@ ",[latestLoans Class]); 
```

"NSArray* latestLoans = [json objectForKey:@"query"];"之后 陈述。在解析之前仔细检查您的 JSON 字符串。当您将要解析的 json 放入时，您将得到更详细的答案。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-15T05:54:36.223

这是因为您的 JSON 正在解码为 NSDictionary 而不是 NSArray。如果我正确地看到了 yahoo 响应，您可能想要获取`objectForKey:@"results"`然后再获取`objectForKey:@"quote"`：

```
NSDictionary *resultQuery = [json objectForKey:@"query"];
NSDictionary *results = [resultQuery objectForKey:@"results"];
NSDictionary *quote = [resultQuery objectForkey@"quote"]; 
```

**这就是您发布的 url 上的 JSON 的结构：**

```
{"query": {
     "count":1,
     "created":"2012-07-15T05:48:29Z",
     "lang":"en-US",
     "results":{
         "quote":{
               "symbol":"AAPL","Ask":"605.00"
                 }
               }
           }
} 
```

当然，您将希望将其扩展为适当的验证步骤，但关键是要知道返回的 JSON 内部实际包含什么（我查看了您的 URI，并且任何地方都没有数组）。

# wcf - 在 Windows Phone 7 中使用 WCF Web 服务时出现 InvalidOperationException

> ID：11489688
> 
> 赞同：1
> 
> 时间：2012-07-15T05:33:21.520
> 
> 标签：wcf, windows-phone-7, invalidoperationexception

我创建了一个简单的 WCF Web 服务（按照本教程：http: [//blogs.msdn.com/b/ericwhite/archive/2010/05/11/getting-started-building-a-wcf-web-service.aspx](http://blogs.msdn.com/b/ericwhite/archive/2010/05/11/getting-started-building-a-wcf-web-service.aspx)） , 因为我不想使用默认命名空间，所以我在[http://www.ilovesharepoint.com/2008/07/kill-tempuri-in-所示的 ServiceContract、DataContract、ServiceBehavior 和 web.config 中定义了自己的命名空间wcf-services.html](http://www.ilovesharepoint.com/2008/07/kill-tempuri-in-wcf-services.html)

当我使用此 WCF Web 服务时，我在声明中不断收到 InvlidOperationException：在 ServiceModel 客户端配置部分中找不到引用合同“ABCWcfService.IABCWcfService”的默认端点元素。这可能是因为没有为您的应用程序找到配置文件，或者因为在客户端元素中找不到与此合同匹配的端点元素。

我找到原因是由于我在 web.config 文件中为自定义命名空间所做的端点更改。只要我包含端点，它就会在我的客户端代码中出现此异常。

```
<?xml version="1.0" encoding="UTF-8"?>
<configuration>
  <system.web>
    <compilation debug="true" targetFramework="4.0" />
  </system.web>
  <system.serviceModel>
    <services>
      <service behaviorConfiguration="ABCWcfService.ABCWcfServiceBehavior" name="ABCWcfService.SkycityWcfService">
        <endpoint bindingNamespace="http://www.ABC.com/ABCWcfService" address="" binding="wsHttpBinding" contract="ABCWcfService.IABCWcfService">
          <identity>
            <dns value="localhost" />
          </identity>
        </endpoint>
      </service>      
    </services>
    <behaviors>
      <serviceBehaviors>
        <behavior name="ABCWcfService.ABCWcfServiceBehavior">
          <!-- To avoid disclosing metadata information, set the value below to false and remove the metadata endpoint above before deployment -->
          <serviceMetadata httpGetEnabled="true" />
          <!-- To receive exception details in faults for debugging purposes, set the value below to true.  Set to false before deployment to avoid disclosing exception information -->
          <serviceDebug includeExceptionDetailInFaults="false" />
        </behavior>
      </serviceBehaviors>
    </behaviors>
  </system.serviceModel>
</configuration> 
```

在客户端代码中，很简单：

```
ABCWcfServiceClient abcWcfServiceClient = new ABCWcfServiceClient();
abcWcfServiceClient.GetWhatsOnDataAsync();
abcWcfServiceClient.GetWhatsOnDataCompleted += new EventHandler<GetDataCompletedEventArgs>(ABCWcfServiceClient_GetWDataCompleted); 
```

每次进入第一行时，我都会遇到此异常。

如果我禁用 web.config 文件中的端点部分，那很好。

谁能告诉我为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T15:05:11.267

Windows Phone 不支持 wsHttpBinding。改用 basicHttpBinding ...

见[http://blog.rsuter.com/?p=281](http://blog.rsuter.com/?p=281)

# jquery - 302 响应后无法将 window.location.href 设置为哈希

> ID：11489693
> 
> 赞同：1
> 
> 时间：2012-07-15T05:34:55.930
> 
> 标签：jquery, hashchange

我试图在页面加载时为 AJAX 控制的 Django webapp 设置 URL 片段，类似于页面重定向。

预期的行为是：如果用户加载`myapp.com`，我将片段更改为`myapp.com/#/default/path`，这会触发内容更改。

当前使用 jQuery 的实现如下：

```
if (!window.location.hash) {
    window.location.href = (window.location.pathname === "/")
        ? $("html").data("default-hash")
        : hashify(window.location.pathname);
} else {
    $(window).trigger('hashchange');
} 
```

在这种情况下，默认片段作为 data-* 属性包含在 中`<html>`，并且`hashify()`是一个附加`/#`到字符串的函数。我希望能够简单地从服务器返回 302 重定向，然后将路径名转换为哈希，如下所示：

```
if (!window.location.hash) {
    window.location.href = hashify(window.location.pathname);
} else {
    $(window).trigger('hashchange');
} 
```

在当前的实现中，url 根据预期的行为发生变化。但是当我尝试第二种方法（使用重定向）时，URI 最终变为`myapp.com/default/path/#/default/path`.

以前有没有人遇到过这个问题，或者知道问题可能是什么？

谢谢！

# r - 聚类分析（层次化）如何知道组信息？

> ID：11489696
> 
> 赞同：2
> 
> 时间：2012-07-15T05:35:42.440
> 
> 标签：r, cluster-analysis, hierarchical-clustering

我在聚类分析（分层聚类）中遇到了关于**组的问题。**例如，这是**Iris 数据集**的完整链接的树状图。

![在此处输入图像描述](../Images/960e9d2a790643782c5ecf2debef3d01.png)

我使用后

```
> table(cutree(hc, 3), iris$Species) 
```

这是**输出**：

```
 setosa versicolor virginica
1     50          0         0
2      0         23        49
3      0         27         1 
```

我在一个统计网站上读到，数据中的对象 1 始终属于组/集群 1。从上面的输出中，我们知道***setosa***在**组 1**中。然后，我将如何了解其他两个物种。他们如何属于第 2 组或第 3 组。它是如何发生的。也许我需要知道一个计算？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-15T10:54:04.963

我猜您正在使用它来创建目前似乎不存在的图像。

```
> lmbjck <- cutree(hclust(dist(iris[1:4], "euclidean")), 3)
> table(lmbjck, iris$Species)

lmbjck setosa versicolor virginica
     1     50          0         0
     2      0         23        49
     3      0         27         1 
```

Dist 是根据对具有相同列名和行名的三种不同物种的植物的测量结果创建的。

```
> iris.dist <- dist(iris[1:4], "euclidean")
> identical(rownames(iris.dist), colnames(iris.dist))
[1] TRUE 
```

该对象被传递给 hclust，它构造一棵树并将其切成三块。对象`iris.order`保存绘制树状图的顺序。保留原始顺序，根据此顺序绘制树。

```
> iris.hclust <- hclust(iris.dist)
> iris.cutree <- cutree(iris.hclust, 3)
> iris.order <- iris.hclust$order 
```

这是证据。我已经将原始`Species`名称、有序物种名称放在一起，因为它们可以在树状图中看到，订单号和来自 cutree 函数的组。

```
> data.frame(original = iris$Species, ordered = iris$Species[iris.order],
             order.num = iris.order, cutree = iris.cutree)

      original    ordered order.num cutree
1       setosa  virginica       108      1
2       setosa  virginica       131      1
3       setosa  virginica       103      1
4       setosa  virginica       126      1
5       setosa  virginica       130      1
6       setosa  virginica       119      1
    ...
103  virginica     setosa        31      2
104  virginica     setosa        26      2
105  virginica     setosa        10      2
106  virginica     setosa        35      2
107  virginica     setosa        13      3
108  virginica     setosa         2      2
    ... 
```

让我们看看输出。如果你看第一行，下面`order.num`是数字 108。这意味着这个项目（树状图左侧的第一个项目）来自第 108 行。向下浏览到第 108 行，你可以看到原来`Species`的确实是`virginica`. Cutree 将此分配给 group `1`。让我们看看第 3 行。在下面`order.num`你可以看到这个项目来自第 103 行。再次，如果你向下查看第 103 行中的原始物种，它是 (still) `virginica`。我将让您检查其他（随机）行并说服自己保留开始构建表的顺序。因此，表格应该是正确的。

# java - java使用外部jar

> ID：11489697
> 
> 赞同：0
> 
> 时间：2012-07-15T05:35:53.723
> 
> 标签：java, servlets

我尝试了一个 java 程序，它需要一个 jar 文件位于 unix 服务器的另一个路径中。我希望在我需要程序时使用这个 jar，因为我使用一个 serverlet 来调用这个程序。当我编译包括像 java -cp .;*.jar myProgram 这样的 jar 的程序时，它可以工作。但是当我从 servlet 调用下面的函数时，jar 没有被包含在内，所以会出错。请指教。当我从包含 jar 的 eclipse 项目中尝试时，它是一样的。

```
void doBless(int i,String Envs) {
    String url = "jdbc:sybase:Tds:ramu-sys:5000/".concat(Envs);
    connection b=new connection();
    System.out.println(url);
    String queryString;
    String temp;
    try {
      Class.forName("com.sybase.jdbcx.SybDriver");
    }
    catch( Exception e ) {
      System.out.println("Failed to load sybase driver.");
      return;
    }

    try {

      ResultSet myResultSet =null;

          Connection con = DriverManager.getConnection(url, "sa", "");
      Statement select = con.createStatement();

      temp="insert into Persons (P_Id,FirstName,LastName,Address,City) values (" +i+",'" + blessArray.get(i)+ "','"+ blessArray.get(i)+ "','"+ blessArray.get(i)+ "','"+ blessArray.get(i)+ "')";
      System.out.println(temp);

       select.executeQuery(temp); 

       select.close();
       con.close();

    }
    catch( Exception e ) {
      e.printStackTrace();
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-15T06:25:21.737

我认为对一些与环境相关的概念存在误解，这也是您出现此类错误的原因。

当您运行“常规”java 程序时，如您使用“java -cp”所述，您自己明确定义哪些 jar 应位于类路径中。当您运行 servlet 时，情况并非如此。Servlet 不能直接由 java 运行（如果需要，它们没有方法'main'）。

相反，它们被设计为在另一个基于 Java 的应用程序（称为容器）中运行。在部署方面，您将您的 servlet 编译成一个类文件，将其放入特殊目录并运行您的容器。

容器应用程序读取目录中的文件，识别 servlet 并创建它的实例。换句话说，它为您管理 servlet。现在，为了在运行时识别类，容器使用它们的自定义类加载器，因此您必须部署服务器依赖的 jar，这些类加载器会正确地从这些 jar 中加载类。

上面建议的工具，如 maven 或 ant - 只需处理构建应用程序的过程，并可以将 jar 放在正确的位置，但 IMO 你仍然应该了解每个组件/工具的去向和职责。

好的，那么，这些罐子应该存放在哪些地方。这样的地方不止一个，你应该明白把罐子放在每个地方会有什么后果。最简单的解决方案是将您的 servlet 包装在 WAR 文件中（或者甚至将其保留为预定义布局中的目录）。WAR（Web 应用程序存档）是一个文件/目录，其中包含所有 servlet 和 jar。由于所有 Web 容器都应该了解 WAR 的布局，因此您可以将 JAR 放在 WAR 文件内的 WEB-INF/lib 文件夹中。我相信你应该选择这个选项。

另一种选择是将 jar 放在容器本身所需的 jar 所在的目录中。这是不太可取的，但有时需要。

我希望这能让事情更清楚:) 祝你好运！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-15T06:27:59.583

Use a build tool and make sure the jar is included in the WEB-INF/lib. Or put it on the classpath of your servlet container (most usually the lib folder of the servlet container).

# xamarin.ios - 带有 Xcode 和 Monotouch 的设计器中的图像

> ID：11489702
> 
> 赞同：3
> 
> 时间：2012-07-15T05:37:09.387
> 
> 标签：xamarin.ios

有没有办法让我为 MonoTouch 项目的 Xcode XIB 设计器中的对象选择和使用图像？

这比我现在做的方式要快。

目前，我将我想要的图像添加到 MonoDevelop 中的图像文件夹中。然后我在 Xcode 中打开 XIB 并添加我的新控件。我为它创建了一个 Outlet。我回到 MonoDevelop 并添加如下代码：

imgLogo.Image = UIImage.FromFile("Images/logo_sm.png");

出于某种原因，我无法在 Xcode 设计器中选择我的 MonoDevelop 图像。图像下拉选择器始终为空。

无论如何，我可以节省时间并在设计师中这样做吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-15T16:26:58.413

Xcode 仅允许将根级目录中的图像用于 xibs（即使它允许您选择根目录之外的图像，它们只是在应用程序运行时不起作用）。作为临时解决方案，我们停止在根目录之外制作 MonoDevelop 导出图像。

几周前，我完成了对“资源”文件夹的支持，你可以使用它来包含你的图像和其他东西，它将专门同步到 Xcode 并放置在 Xcode 项目的根目录中（以及最终构建的应用程序) 以便您可以在 Xcode UI 设计器中使用它们。

MonoDevelop 的下一个主要版本将具有此功能。

# ruby - 为什么此示例将方法视为变量或常量？

> ID：11489705
> 
> 赞同：0
> 
> 时间：2012-07-15T05:37:56.343
> 
> 标签：ruby, variables, methods, constants

我一直在查看一些 ruby​​ 代码，并注意到有些人将方法视为变量或常量。

```
class Test

   def welcome_message
      "Hello World"
   end

   def greet_user
      p welcome_message
   end
end 
```

然后你可能会编写一个继承自这个 Test 类的新类，但是改变它的行为方式。

```
class New_Test < Test

   # changing the welcome message
   def welcome_message
      "Greetings"
   end
end 
```

什么时候做这样的事情合适？它似乎允许您编写更灵活的代码，因为我可以在返回值之前执行更复杂的计算，但是我无法想出一种方法来证明编写像上面两个 Test 类这样的代码是合理的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T06:12:44.457

### 为什么有效

在 Ruby 中，每个方法都返回一个值。在您给定的示例中，`p welcome_message`您要求 Ruby 打印 #welcome_message 的返回值的字符串表示形式。（从技术上讲，它正在将*object.inspect*写入标准输出，但在这里它等同于同一件事。）

如果“Hello World”是字符串以外的其他对象，结果仍然是相似的。例如，如果 #welcome_method 返回一个 Fixnum 而不是一个字符串，它*看起来*仍然是在打印一个字符串。

### 返回值

您可以将消息存储在类或实例变量中，或者在对象上使用 getter 或 setter 方法。但是，有时直接在表达式中使用返回值比使用变量进行中间存储更方便。

而不是像这样存储然后取消引用一个变量：

```
def welcome_message
  @message = "Hello World"
end

def greet_user
  p @message
end

welcome_message # store the variable
greet_user      # dereference then print the variable 
```

您可以直接使用#welcome_message 的返回值。

在像原始问题中那样的人为示例中，这不太重要，但它可以在更大的应用程序中节省时间、精力或内存。即使不是，中间变量也可能是错误或程序员错误的来源，而且直接使用这些值通常在语义上*更清晰。*

虽然这不适用于您的有限示例，但使用对象的公共接口来请求信息也是一种更好的做法。在这种情况下，返回值的方法是必不可少的。

Ruby 不是一种正交语言。通常有不止一种有效的方法来做某事。最后，它是关于您试图在代码中表达的语义。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-15T05:41:37.093

方法是方法，而不是变量或常量。

```
 def greet_user
      p welcome_message
   end 
```

与以下相同，因为`()`可以省略。

```
 def greet_user
      p welcome_message()
   end 
```

* * *

```
 def welcome_message
      "Greetings"
   end 
```

与以下相同，因为`return`可以省略。

```
 def welcome_message
      return "Greetings"
   end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-15T06:18:57.430

当你想要一个类实例的公共常量值时，你会怎么做？你可以这样做...

```
def initialize
  @welcome_message = "Greetings"
end
attr_reader :welcome_message 
```

但这声明了一个实例变量，这似乎不合适，因为它的值永远不会改变，并且对于所有实例都是相同的。

```
WELCOME_MESSAGE = "Greetings"
def welcome_message
  self.class::WELCOME_MESSAGE
end 
```

这似乎更合适......但它不是有点傻吗？我们声明了一个常量，但它实际上只会用于`welcome_message`. 不需要其他任何东西来使用丑陋的`self.class::WELCOME_MESSAGE`. 为什么不直接砍掉中间人？因此：

```
def welcome_message
  "Greetings"
end 
```

# python - Python：从格林威治标准时间 1970.01.01 午夜到格林威治标准时间任意时间的秒数？

> ID：11489706
> 
> 赞同：1
> 
> 时间：2012-07-15T05:38:06.010
> 
> 标签：python

在这方面遇到了困难，尝试了所有这些不同的日期功能，但不知道如何确定地做到这一点。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-15T06:09:57.633

您可以使用`calendar.timegm`获取自纪元以来的秒数。时间元组是必需的参数，`time.strptime`可用于生成该元组。

这是一个简单的例子：

```
import calendar
import time

# Time in GMT
x = 'Sat Jul 14 22:05:54 2012'
y = time.strptime(x)
z = calendar.timegm(y)
print z # 1342303554 - the number of seconds since epoch 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-15T06:10:06.210

[Unix 时间戳](http://en.wikipedia.org/wiki/Unix_time)的定义是 GMT （或者更确切地说是[UTC](http://en.wikipedia.org/wiki/Coordinated_Universal_Time)）格式。您可以使用 pythons [datetime](http://docs.python.org/library/datetime.html)模块并使用[utcfromtimestamp](http://docs.python.org/library/datetime.html#datetime.datetime.utcfromtimestamp)构造函数创建一个时区为“None”的 datetime 对象：

```
>>> print datetime.datetime.utcfromtimestamp(300)
1970-01-01 00:05:00 
```

如果您使用[fromtimestamp](http://docs.python.org/library/datetime.html#datetime.datetime.fromtimestamp)构造函数，您将获得一个针对您的环境时区*调整*的日期时间对象（在我的情况下为 UTC+1）：

```
>>> print datetime.datetime.fromtimestamp(300)
1970-01-01 01:05:00 
```

# c++ - Protocol Buffers vs Thrift：用哪个更快构建服务器/客户端？

> ID：11489709
> 
> 赞同：4
> 
> 时间：2012-07-15T05:38:33.517
> 
> 标签：c++, network-programming, boost-asio, protocol-buffers, thrift

所以我们想用 C++ 构建一个服务器/客户端系统，我不清楚谷歌协议缓冲区或节俭是否会让我们更快地得到一个工作原型。我们希望使用 TCP 套接字作为通信层，用于通过本地子网（而不是通过广泛的 Internet）进行通信。它将在 Linux/OS X/Windows 上运行。

我们主要需要在每个方向上传递简单的异步消息，但将来我们可能需要 RPC 样式的响应。我们的大多数消息都很小，但有些消息将具有大约 100k-500k 的大负载（如果我们必须在 IDL 中调用它们，那将只是一个伴随消息的大不透明缓冲区）。

我知道我们想要它们都提供的消息描述符/编组/解组，但我不清楚最快构建工作服务器/客户端所需的其他部分。

我是否正确收集了 thrift 为 TCP/IP 套接字通信提供实现以发送和接收消息，而协议缓冲区只处理编组层并且对套接字一无所知？

如果确实如此，那么使用 Protocol Buffers，您必须在其上编写一个迷你协议，以将一些页眉和/或页脚包裹在消息周围，以识别一个停止的位置和下一个开始的位置通过套接字（如果某些东西比预期的长/短，那么重新同步的更困难的问题）。是否有提供这些层的开源软件包（最好使用`boost::asio`）？

# ios - iOS 将 RTP VoIP 呼叫转移到后台

> ID：11489711
> 
> 赞同：0
> 
> 时间：2012-07-15T05:38:34.987
> 
> 标签：ios, audio-streaming, voip, rtp

我需要一些关于设计决策的帮助。我目前正在构建一个需要 VoIP 功能的 iOS 应用程序，但我有一些问题。

1.  我了解 iOS 只能在后台保持 TCP 连接。如果我在通话期间打开了 RTP 连接，当用户进入后台时，该通话是否会丢失？如果是这样，Skype 和其他人如何做到这一点？

2.  如果我必须简单地通过 TCP 流式传输音频以保持对话在后台进行，是否有人建议在通话期间抖动缓冲区为空的情况下如何保持音频同步？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T15:54:51.110

**对（1）的回答：**

iOS VoIP 应用程序可能会在后台保留一个 TCP 套接字，通常是您的 SIP 套接字，以允许传入呼叫 (INVITE)。

当您的应用程序有一个活动呼叫并进入后台时，**它没有任何限制**，您可以保留任意数量的套接字。

[这是另一个线程的更详细的答案](https://stackoverflow.com/questions/8746599/setkeepalivetimeout-ios-behavior-exceeded-15-wakes-in-300-sec/9698212#9698212)

关于 SIP 堆栈实现，您可能需要检查[开源 PJSip 堆栈](http://www.pjsip.org/)

# php - SimpleXML，xpath 不返回任何内容

> ID：11489712
> 
> 赞同：0
> 
> 时间：2012-07-15T05:38:38.183
> 
> 标签：php, xpath, simplexml

尝试使用 PHP 做两件事

1) 使用 xpath() 运行一个 xpath 查询，挑选出所有产品标签。这应该返回一个代表每个产品标签的 SimpleXMLElements 数组。

2) 再次使用 xpath() 从每个 Product 标签中选择 ProductCode 和 ProductName 并获取它们的内容。

我的 XML 是

```
<All_Products>
<Product>
<ProductCode>9978H</ProductCode>
<ProductName>abc with Buckle in aBlack</ProductName>
<ProductURL>http://abc.com/abc with Buckle in aBlack-p/9978H.htm<ProductURL>
<StockStatus>2</StockStatus>
</Product>
<Product>
<ProductCode>99s</ProductCode>
<ProductName>abc with Buckle in aBlack</ProductName>
<ProductURL>http://abc.com/abc with Buckle in aBlack-p/9978H.htm</ProductURL>
<StockStatus>2</StockStatus>
</Product>
</All_Products> 
```

我的 PHP 代码如下所示，但它没有返回任何产品标签、产品代码等，我的代码有什么问题

```
$xml = simplexml_load_file('http://www.abc.com/xml.php');

if ($xml === false) {
    echo 'Error while parsing the document';
    exit;
}

$dom_sxe = dom_import_simplexml($xml);
if (!$dom_sxe) {
    echo 'Error while converting XML';
    exit;
}

$result = $xml->xpath('/All_Products/Product');

while(list( , $node) = each($result)) {
    echo '/a/b/c: ',$node,"\n";
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-15T07:03:30.120

首先，您的 XML 无效 - “ProductURL”标签未关闭。其次 "$node" 将是一个对象，所以你不能那样打印它。

# xslt - 使用 XSLT 添加属性，然后使用该新属性进行排序

> ID：11489713
> 
> 赞同：1
> 
> 时间：2012-07-15T05:38:48.820
> 
> 标签：xslt, sorting

我熟悉 XSLT 的基础知识，但我遇到了一个我似乎无法弄清楚的奇怪情况。对于这么长时间，我深表歉意，但我非常感谢您能提供的任何帮助。

我正在对由我无法控制的软件产品生成的 XML 进行转换。该产品导出的数据如下所示：

```
<header>
   <data>
   </data>
</header>
<transaction>
    <B1_PG1 ts='1139977698718.75'><data></data></B1_PG1>
    <B1_PG2 ts='1139977698718.76'><data></data></B1_PG2>
    <B2_PG1 ts='1139977698718.77'><data></data></B2_PG1>
    <B2_PG2 ts='1139977698718.78'><data></data></B2_PG2>
    <B2_PG1 ts='1139977698718.79'><data></data></B2_PG1>
    <B2_PG2 ts='1139977698718.80'><data></data></B2_PG2>
    <B3_PG1 ts='1139977698718.81'><data></data></B3_PG1>
</transaction> 
```

软件产品按照接收数据的顺序导出数据页面。我需要获取这些页面并按自定义顺序对它们进行排序，以便处理到另一个系统中。因此，我创建了一个看起来像这样的查找文档来定义我的自定义排序顺序：

(PageSequences.xml)

```
<pages>
    <page id="B2_PG1" sequence="1000" />
    <page id="B2_PG2" sequence="1010" />
    <page id="B3_PG1" sequence="2000" />
    <page id="B1_PG1" sequence="3000" />
    <page id="B1_PG2" sequence="3010" />
</pages> 
```

然后，我根据元素名称查找该序列，将其与时间戳连接，并使用以下 XSLT 将属性注入元素：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform"> 
    <xsl:output omit-xml-declaration="yes" indent="yes"/> 
    <xsl:strip-space elements="*"/> 
    <xsl:variable name='page-seqs' select='document("PageSequences.xml")/pages/page'/>

    <xsl:template match="node()|@*"> 
        <xsl:copy> 
            <xsl:apply-templates select="@*|node()">
            </xsl:apply-templates>
        </xsl:copy> 
    </xsl:template> 

    <xsl:template match="transaction">
        <transaction>

            <xsl:for-each select="child::node()">
                <xsl:variable name='localname' select='local-name()'/>
                <xsl:copy>
                    <xsl:attribute name="sequence">
                        <xsl:value-of select='$page-seqs[@id=$localname]/@sequence'/>-<xsl:value-of select='@ts'/>
                    </xsl:attribute>
                    <xsl:apply-templates select="@*|node()">
                        <xsl:sort select="@sequence" />
                    </xsl:apply-templates>
                </xsl:copy> 
            </xsl:for-each>
        </transaction>
        </xsl:template> 

</xsl:stylesheet> 
```

我遇到的问题是标签似乎不起作用。我期望以下内容：

```
<transaction>
    <B2_PG1 ts='1139977698718.77' sequence='1000-1139977698718.77'><data></data></B2_PG1>
    <B2_PG1 ts='1139977698718.79' sequence='1000-1139977698718.79'><data></data></B2_PG1>
    <B2_PG2 ts='1139977698718.78' sequence='1010-1139977698718.78'><data></data></B2_PG2>
    <B2_PG2 ts='1139977698718.80' sequence='1010-1139977698718.80'><data></data></B2_PG2>
    <B3_PG1 ts='1139977698718.81' sequence='2000-1139977698718.81'><data></data></B3_PG1>
    <B1_PG1 ts='1139977698718.75' sequence='3000-1139977698718.75'><data></data></B1_PG1>
    <B1_PG2 ts='1139977698718.76' sequence='3010-1139977698718.76'><data></data></B1_PG2>
</transaction> 
```

但我得到：

```
<transaction>
    <B1_PG1 ts='1139977698718.75' sequence='3000-1139977698718.75'><data></data></B1_PG1>
    <B1_PG2 ts='1139977698718.76' sequence='3010-1139977698718.76'><data></data></B1_PG2>
    <B2_PG1 ts='1139977698718.77' sequence='1000-1139977698718.77'><data></data></B2_PG1>
    <B2_PG2 ts='1139977698718.78' sequence='1010-1139977698718.78'><data></data></B2_PG2>
    <B2_PG1 ts='1139977698718.79' sequence='1000-1139977698718.79'><data></data></B2_PG1>
    <B2_PG2 ts='1139977698718.80' sequence='1010-1139977698718.80'><data></data></B2_PG2>
    <B3_PG1 ts='1139977698718.81' sequence='2000-1139977698718.81'><data></data></B3_PG1>
</transaction> 
```

此外，如果您认为我以错误的方式处理此问题，请告诉我。我试图避免使用 java/c#/perl/etc... 以尽可能保持转换的可移植性。出于性能原因，我还想避免执行两次转换。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T08:18:48.397

您创建的属性存在于您放置在结果树上的新构造元素上，但它不存在于您正在排序的源树中的元素上。

另一个问题是您不是对事务元素的子元素进行排序，而是对它的孙元素进行排序。

我怀疑你想要的是这样的：

```
 <xsl:for-each select="child::node()">
              <xsl:sort select="concat($page-seqs[@id=local-name(current())]/@sequence, '-', @ts)"/>
                <xsl:variable name='localname' select='local-name()'/>
                <xsl:copy>
                    <xsl:attribute name="sequence">
                        <xsl:value-of select='$page-seqs[@id=$localname]/@sequence'/>-<xsl:value-of select='@ts'/>
                    </xsl:attribute>
                    <xsl:apply-templates select="@*|node()"/>
                </xsl:copy> 
            </xsl:for-each> 
```

避免重复计算的唯一方法（一次在 xsl:sort 中，一次生成输出属性）是执行两次传递，一次添加属性，下一次对其进行排序。这样做的方式在 XSLT 1.0 和 2.0 之间有所不同，而且您没有说您使用的是哪个。两遍方法非常可行，但在您的情况下，我怀疑重复计算的单遍更有效（尽管您必须同时测量两者才能找出答案）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-15T08:14:44.557

您遇到的问题在此代码块中

```
<xsl:copy> 
   <xsl:attribute name="sequence"> 
      <xsl:value-of select='$page-seqs[@id=$localname]/@sequence'/>-<xsl:value-of select='@ts'/> 
   </xsl:attribute> 
   <xsl:apply-templates select="@*|node()"> 
      <xsl:sort select="@sequence" /> 
   </xsl:apply-templates> 
</xsl:copy> 
```

特别是应用模板。首先，在这个阶段你已经复制并输出了“B-PG”元素，所有的应用模板正在处理它的子节点。其次，排序仅适用于输入文档，而不适用于您添加到输出文档的任何额外属性。

然后，您可以做的是将复制事务子节点的结果放入变量中，然后使用排序迭代该变量。这将是同一个 XSLT 文档中的“两次转换”。但是，在这种情况下，没有必要。您可以简单地匹配所有事务子节点，并指定在排序中查找序列号

```
<xsl:sort select="$page-seqs[@id=local-name(current())]/@sequence" /> 
```

这是完整的 XSLT

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
   <xsl:output omit-xml-declaration="yes" indent="yes"/>
   <xsl:strip-space elements="*"/>

   <xsl:variable name="page-seqs" select="document('C:\lookup.xml')/pages/page"/>

   <xsl:template match="node()|@*">
      <xsl:copy>
         <xsl:apply-templates select="@*|node()"/>
      </xsl:copy>
   </xsl:template>

   <xsl:template match="transaction">
      <transaction>
         <xsl:apply-templates select="child::node()">
            <xsl:sort select="$page-seqs[@id=local-name(current())]/@sequence"/>
         </xsl:apply-templates>
      </transaction>
   </xsl:template>
</xsl:stylesheet> 
```

当应用于您的示例文档时（减去**标题**元素，因为当前 XML 示例格式不正确），输出以下内容

```
<transaction>
   <B2_PG1 ts="1139977698718.77">
      <data/>
   </B2_PG1>
   <B2_PG1 ts="1139977698718.79">
      <data/>
   </B2_PG1>
   <B2_PG2 ts="1139977698718.78">
      <data/>
   </B2_PG2>
   <B2_PG2 ts="1139977698718.80">
      <data/>
   </B2_PG2>
   <B3_PG1 ts="1139977698718.81">
      <data/>
   </B3_PG1>
   <B1_PG1 ts="1139977698718.75">
      <data/>
   </B1_PG1>
   <B1_PG2 ts="1139977698718.76">
      <data/>
   </B1_PG2>
</transaction> 
```

请注意，最好使用应用模板而不是 for-each，这就是我在这里所做的。

# sql - SQLSTATE[HY093]：无效的参数号：绑定变量的数量与标记的数量不匹配

> ID：11489714
> 
> 赞同：1
> 
> 时间：2012-07-15T05:39:10.273
> 
> 标签：sql, pdo

我的代码产生错误：

```
SQLSTATE[HY093]: Invalid parameter number: number of bound variables does not match number of tokens 
```

但是我数了一下，没有丢失冒号，所有绑定参数都在那里......是什么导致了这个错误？

参考下面的代码：

```
try{
    $pdo->beginTransaction();

    $insert1 = $pdo->prepare("INSERT INTO spo (spo_prefix,datecreated,destinationID,vendorID,grade,flute,qty,wdat,ldat,scoreline,due,remark,isowarrant,area_m,area_ft,supplyIDs,qty_waste,expectedPrice) VALUES (:spoprefix,:nowdate,:location,:selvid,:cgrade,:cflute,:vendorqty,:wdat,:ldat,:scoreline,:duedate,:vendorremark,:iso,:squarem,:squareft,:siid,:wasteqty,:thisprice)");

    $resultB = $pdo->prepare("SELECT vendorname FROM vendorDefinition WHERE id=:svid LIMIT 1");
    $resultC = $pdo->prepare("SELECT destinationName FROM shipDestination WHERE id=:locationselect LIMIT 1");

    $insert1->execute(array(":spoprefix"=>$_POST['SPOprefix'],
                            ":nowdate"=>$nowdate,
                            ":location"=>$_POST['locationselect'],
                            ":selvid"=>$_POST['selectedVID'],
                            ":cgrade"=>$_POST['const_grade'],
                            ":cflute"=>$_POST['const_flute'],
                            ":vendorqty"=>$_POST['vendorqty'],
                            ":wdat"=>$wdat,
                            ":ldat"=>$ldat,
                            ":scoreline"=>$scoreline,
                            ":duedate"=>$duedate,
                            ":vendorremark"=>$_POST['vendorremark'],
                            ":iso"=>"",
                            ":squarem"=>$_POST['squaremeter'],
                            ":squareft"=>$_POST['squarefeet'],
                            ":siid",$_POST['const_siid'],
                            ":wasteqty"=>$_POST['wasteqty'],
                            ":thisprice"=>$_POST['thisprice']));

    $resultB->execute(array(":svid"=>$_POST['selectedVID']));
    $resultC->execute(array(":locationselect"=>$_POST['locationselect']));

    $pdo->commit();

 }catch(PDOException $e){
    $pdo->rollBack();
    die("<h1>ERROR" . $e);
 } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-15T06:16:42.987

问题在这里：

```
":siid",$_POST['const_siid'],
       ^--- should be "=>", not "," 
```

# javascript - 如何在类中使用 innerHTML

> ID：11489716
> 
> 赞同：3
> 
> 时间：2012-07-15T05:39:40.650
> 
> 标签：javascript

我想使用带有类的 innerHTML 作为参考。我发现了很多以 id 作为参考的例子。有没有人知道如何在不使用 id 名称的情况下获取元素的 innerHTML。

请注意，我不想在这里使用任何 JavaScript 库，例如 jquery。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-15T05:47:15.810

您可以尝试[Document.querySelector](https://developer.mozilla.org/en/DOM/Document.querySelector)（如果您只想要第一个元素）或[Document.querySelectorAll](https://developer.mozilla.org/en/DOM/document.querySelectorAll)（如果您想获取所有元素）。

```
var el = document.querySelector(".myclass"); 
var html = el.innerHtml; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-15T05:44:06.463

这一切都与您如何获取元素引用有关。这是您可以如何处理课程的方法。

```
var items = document.getElementsByClassName("my-class"),
    i, len;

// loop through all elements having class name ".my-class"
for (i = 0, len = items.length; i < len; i++) {
    items[i].innerHTML = "...";
} 
```

当然，较旧的浏览器不支持 document.getElementsByClassName()，因此您可以使用 jQuery/YUI 或某些库，因为它可以处理较旧的浏览器。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-15T05:46:53.953

您可以使用 document.getElementsByClassName，但这在 IE9 之前不起作用。[从谷歌代码项目](http://code.google.com/p/getelementsbyclassname/source/browse/trunk/getElementsByClassName.js)中使用这个方法，我在这里复制粘贴

```
/*
  Developed by Robert Nyman, http://www.robertnyman.com
  Code/licensing: http://code.google.com/p/getelementsbyclassname/
*/  
var getElementsByClassName = function (className, tag, elm){
  if (document.getElementsByClassName) {
    getElementsByClassName = function (className, tag, elm) {
      elm = elm || document;
      var elements = elm.getElementsByClassName(className),
        nodeName = (tag)? new RegExp("\\b" + tag + "\\b", "i") : null,
        returnElements = [],
        current;
      for(var i=0, il=elements.length; i<il; i+=1){
        current = elements[i];
        if(!nodeName || nodeName.test(current.nodeName)) {
          returnElements.push(current);
        }
      }
      return returnElements;
    };
  }
  else if (document.evaluate) {
    getElementsByClassName = function (className, tag, elm) {
      tag = tag || "*";
      elm = elm || document;
      var classes = className.split(" "),
        classesToCheck = "",
        xhtmlNamespace = "http://www.w3.org/1999/xhtml",
        namespaceResolver = (document.documentElement.namespaceURI === xhtmlNamespace)? xhtmlNamespace : null,
        returnElements = [],
        elements,
        node;
      for(var j=0, jl=classes.length; j<jl; j+=1){
        classesToCheck += "[contains(concat(' ', @class, ' '), ' " + classes[j] + " ')]";
      }
      try  {
        elements = document.evaluate(".//" + tag + classesToCheck, elm, namespaceResolver, 0, null);
      }
      catch (e) {
        elements = document.evaluate(".//" + tag + classesToCheck, elm, null, 0, null);
      }
      while ((node = elements.iterateNext())) {
        returnElements.push(node);
      }
      return returnElements;
    };
  }
  else {
    getElementsByClassName = function (className, tag, elm) {
      tag = tag || "*";
      elm = elm || document;
      var classes = className.split(" "),
        classesToCheck = [],
        elements = (tag === "*" && elm.all)? elm.all : elm.getElementsByTagName(tag),
        current,
        returnElements = [],
        match;
      for(var k=0, kl=classes.length; k<kl; k+=1){
        classesToCheck.push(new RegExp("(^|\\s)" + classes[k] + "(\\s|$)"));
      }
      for(var l=0, ll=elements.length; l<ll; l+=1){
        current = elements[l];
        match = false;
        for(var m=0, ml=classesToCheck.length; m<ml; m+=1){
          match = classesToCheck[m].test(current.className);
          if (!match) {
            break;
          }
        }
        if (match) {
          returnElements.push(current);
        }
      }
      return returnElements;
    };
  }
  return getElementsByClassName(className, tag, elm);
}; 
```

[用法](http://robertnyman.com/2008/05/27/the-ultimate-getelementsbyclassname-anno-2008/)：

使用“信息链接”类获取文档中的所有元素。

```
getElementsByClassName("info-links"); 
```

使用“col”类获取名为“container”的元素中的所有 div 元素。

```
getElementsByClassName("col", "div", document.getElementById("container")); 
```

使用“click-me”和“sure-thang”类获取文档中的所有元素。

```
getElementsByClassName("click-me sure-thang"); 
```

**编辑：这是一个例子**

首先，您的 Javascript 函数：

```
 function ProcessThese()
{
    nodes = getElementsByClassName('hello');
    alert(nodes[0].innerHTML);
    alert(nodes[0].value);  // <-- This gets you what the user typed in
} 
```

一些示例 HTML：

```
<br />

<textarea class="hello">222</textarea>

<br />

<input type="button" onclick="ProcessThese();" value="Click me" /> 
```

单击页面上的按钮，它应该获取值。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-15T05:50:23.370

使用 id 的原因是因为 ID 是唯一的：类名不是。在您的问题文本中，您询问如何获取“元素”的 innerHTML，但这可能是不正确的。与可能是单个元素或 null 的 id 不同，您可以有 15 个具有相同类名的元素（并且可能这样做）。

即使您通过 document.getElementsByClassName 或 jQuery 按类名获取元素，您也必须知道您想要哪个（第一个、第 15 个等）来挑选单个元素。这就是为什么您会通过 id 看到所有示例。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-15T05:48:49.690

您可以使用现在大多数浏览器原生支持的 getElementsByClassName。

见[http://www.quirksmode.org/blog/archives/2008/05/getelementsbycl.html](http://www.quirksmode.org/blog/archives/2008/05/getelementsbycl.html)

# asp.net - 无法在IE中显示页面；由 ASP.net 制作

> ID：11489718
> 
> 赞同：0
> 
> 时间：2012-07-15T05:39:44.983
> 
> 标签：asp.net, xml, xslt

我做了一个Asp.net项目，当Default.aspx文件在Windows中通过Internet Explorer打开时报错。如下：

```
The XML page cannot be displayed 
Cannot view XML input using XSL style sheet. Please correct the error and then click the Refresh button, or try again later. 

A name was started with an invalid character. Error processing resource 'file:///G:/My Programming/Asp/My Project (90)/Defa...

<%@ Page Language="C#" AutoEventWireup="true" CodeFile="Default.aspx.cs" Inherits="_Default" %>
-^ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T06:15:25.603

The root cause of this problem is here:

```
file:///G:/My Progr..... 
```

The problem is that the browser is looking directly at the source code file on the network.

In order for ASP programs to work, they have to be run by a web server; by accessing it directly on the `G:` drive, you're bypassing the web server, so the program isn't actually being run at all.

What you're seeing is the result of the browser trying to interpret the program source code as if it were XML. It isn't XML because it contains program code, so the browser is complaining about that.

To fix this, you need to access it via a `http://` address, not a `file:///` address.

The HTTP address must obviously be valid, which means you need to have a web server running. You haven't given us any detail about whether you have this or not, but that's what you need.

Hope that helps point you in the right direction.

# mysql - 有什么方法可以让这些 SQL 查询更快？

> ID：11489719
> 
> 赞同：2
> 
> 时间：2012-07-15T05:40:01.867
> 
> 标签：mysql, sql, database, database-performance

我有一个 MySQL 数据库和一个大约 128,000 行的表（据我了解，这非常小）。我还有一个连接到它的应用程序，它被设置为进行分页。我的 SQL 查询如下所示：

```
SELECT * FROM Documents WHERE PortfolioId = ? LIMIT ?,?
SELECT * FROM Documents WHERE PortfolioId = ? ORDER BY Date DESC LIMIT ?,? 
```

我的问题是双重的。首先，无论使用哪个查询，第一个“LIMIT”数字越高，查询返回越慢，最终进入不可接受的延迟。例如，如果我去 phpmyadmin 并执行：

```
SELECT * FROM Documents WHERE PortfolioId = 1 LIMIT 0,20 
```

查询需要 0.001 秒。但是，当我执行此操作时：

```
SELECT * FROM Documents WHERE PortfolioId = 1 LIMIT 120000,20 
```

查询需要 14.8 秒。

我的第二个问题是，我按日期排序的第二个查询（也在表中被索引）使相应的查询花费了很多很多的时间（第一个示例为 0.1 秒， 第二个示例为*2 分 23 秒*）。

有没有更好的方法来执行这些查询，所以它们更快？据我了解，开发人员经常在具有数百万行的表上实现分页，但是这样做会导致后面的页面加载需要很长时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T05:43:06.400

随着您进入结果集“更远”，LIMIT 总是会变慢。本质上，它与获取前 X 行并丢弃它们并没有太大区别，因为您只对 X+1 -> X+10 感兴趣。唯一的区别是通过网络发送未处理的行不会浪费时间 - MySQL 仍然必须构建整个结果集，对其进行排序，然后向下滚动到任何 LIMIT 偏移点。你的偏移量越深，MySQL 要做的工作就越多，然后基本上就扔掉了。

# php - 从mysql查询中的表中获取前3名评论员

> ID：11489721
> 
> 赞同：-1
> 
> 时间：2012-07-15T05:41:39.380
> 
> 标签：php, mysql, sql, group-by

我有 3 张桌子

```
comments(id,question_id, user_Id) // here the user_id is of the user who has asked the question
questions(id,q_desc, user_id)
users(id, name, rank) 
```

用户可以提出问题并且可以对问题发表评论。

我需要一份报告，我想在其中显示最多 3 个排名靠前的用户的每个问题，他们对此发表了评论，**但提出问题的用户不应该出现在该特定问题的报告中，但他也有有权评论他的问题。**

已编辑:::

```
Select * from comments inner join users(comments.user_id=u.id) group by question_id order by user.rank desc 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-15T07:11:46.957

它很乱，但它有效：

```
SELECT 
    a.question_id, a.user_id, a.name, a.rank
FROM
(
    SELECT a.*, b.name, b.rank
    FROM
    (
        SELECT DISTINCT b.question_id, b.user_id
        FROM questions a
        INNER JOIN comments b ON a.id = b.question_id AND a.user_id <> b.user_id
    ) a
    INNER JOIN users b ON a.user_id = b.id
) a
INNER JOIN
(
    SELECT a.question_id, b.rank
    FROM
    (
        SELECT DISTINCT b.question_id, b.user_id
        FROM questions a
        INNER JOIN comments b ON a.id = b.question_id AND a.user_id <> b.user_id
    ) a
    INNER JOIN users b ON a.user_id = b.id
) b ON a.question_id = b.question_id AND a.rank <= b.rank
GROUP BY 
    a.question_id, a.user_id, a.name, a.rank
HAVING 
    COUNT(1) <= 3
ORDER BY 
    a.question_id, a.rank DESC 
```

**编辑**：这会产生相同的结果并且更简洁：

```
SELECT a.*
FROM
(
   SELECT DISTINCT a.question_id, a.user_id, b.name, b.rank
   FROM comments a
   INNER JOIN users b ON a.user_id = b.id
) a
INNER JOIN 
    questions b ON a.question_id = b.id AND a.user_id <> b.user_id
INNER JOIN
(
   SELECT DISTINCT a.question_id, a.user_id, b.rank
   FROM comments a
   INNER JOIN users b ON a.user_id = b.id
) c ON b.id = c.question_id AND a.rank <= c.rank
GROUP BY 
    a.question_id, a.user_id, a.name, a.rank
HAVING 
    COUNT(1) <= 3
ORDER BY 
    a.question_id, a.rank DESC; 
```

这些解决方案还考虑了在同一问题中发布了多个评论的用户。

在[SQLFiddle上查看这两种解决方案的实际应用](http://sqlfiddle.com/#!2/4c091/27/1)

# qt - 进程关闭时获取指示 - QT

> ID：11489723
> 
> 赞同：0
> 
> 时间：2012-07-15T05:42:17.090
> 
> 标签：qt, process

我正在用 QT 编写桌面应用程序。在我的应用程序中，我正在按班级打开另一个应用程序

```
QProcess *myProcess;
myProcess->start(path + argStr); 
```

我想知道进程是否关闭（也许有人手动）所以我开始一个新线程

```
void processExitDetector::run()
 {
       connect(myProcess,SIGNAL(finished(int)),this, SLOT (stop()));
 }

void processExitDetector::stop()
 {

 } 
```

但是如果在函数 stop() 中有断点。我永远不会停在那里，即使我要停止这个过程。我在做什么？进程停止时获得指示的最佳方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T05:53:53.153

我认为您可能对 SIGNAL/SLOT 的概念有点倒退。您无需等待线程中的 QProcess 退出即可建立连接。它是信号与插槽的连接，它应该告诉您何时完成。

[您对QProcess.finished()](http://qt-project.org/doc/qt-4.8/qprocess.html#finished)有正确的想法，但无需单独启动线程来阻止`waitForFinished`。基本上你所做的连接是没有意义的。

1.  创建流程
2.  连接信号
3.  启动流程

```
QProcess *myProcess;  
connect(myProcess, SIGNAL(finished(int)), this, SLOT(processFinished()));  
myProcess->start(path + argStr); 
```

`processFinished()`只是您定义的 SLOT（或使用内置 SLOT），以便在您的流程完成时收到通知。

# sqlite - SQLite 当前日期和过去几年的当前日期

> ID：11489725
> 
> 赞同：0
> 
> 时间：2012-07-15T05:42:59.900
> 
> 标签：sqlite, titanium

我正在尝试从 SQLite 数据库中选择数据，其中所有内容都在一个日期发布，无论其发布年份如何。例如：数据库中列出的每年 7 月 15 日。

到目前为止，这是我的代码。

`SELECT Date, Content FROM MYDATABASE WHERE Date = date('now')`

如何才能使当前日期的所有先前条目也包括在内？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-15T10:42:27.820

您可以使用以下功能比较您获得的月日部分`strftime(...)`：

```
SELECT Date, Content 
FROM MYDATABASE 
WHERE strftime('%m%d', Date) = strftime('%m%d', date('now')) 
```

有关日期时间函数的更多信息，请参阅文档： [http ://www.sqlite.org/lang_datefunc.html](http://www.sqlite.org/lang_datefunc.html)

请注意，要使日期和时间功能正常工作，您的日期必须以下列格式之一存储（如上面链接的文档中所述）：

```
YYYY-MM-DD
YYYY-MM-DD HH:MM
YYYY-MM-DD HH:MM:SS
YYYY-MM-DD HH:MM:SS.SSS
YYYY-MM-DDTHH:MM
YYYY-MM-DDTHH:MM:SS
YYYY-MM-DDTHH:MM:SS.SSS
HH:MM
HH:MM:SS
HH:MM:SS.SSS
now
DDDDDDDDDD 
```

# java - 我们如何通过java驱动查询嵌入文档？

> ID：11489728
> 
> 赞同：2
> 
> 时间：2012-07-15T05:43:11.930
> 
> 标签：java, mongodb, document

我想通过来自 mongodb.from 一个简单文档的 java 查询访问嵌入式文档，这很容易，但是我们如何从嵌入式文档访问？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-15T12:24:08.967

如果我理解正确，您可以在下面找到您的问题的答案。

假设您有以下嵌套文档。

```
{ "key1" : "value1",
  "key2" : {
             "key21" : "value21",
             "key22" : "value22"
           }
} 
```

如果您要对嵌套文档进行查询，则可以使用以下 java 代码访问嵌入对象。

```
DBCollection coll = db.getCollection("collectionName");
BasicDBObject query = new BasicDBObject();
query.put("key2.key21", new BasicDBObject("$eq", "value21"));
DBCursor cur = coll.find(query); 
```

如果您的意思是从文档中提取嵌入的文档，那么您可以使用[Map/Reduce](http://www.mongodb.org/display/DOCS/MapReduce)或[Aggregation 框架。](http://www.mongodb.org/display/DOCS/Aggregation)

伊恩丹尼尔仍然添加了代码以插入您要求的嵌套文档。您还可以访问[此](http://www.mkyong.com/mongodb/java-mongodb-insert-a-document/)页面以查看一些详细示例。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-16T04:52:53.650

下面的 Java 代码将插入表单的文档`{ID:23 {Name:{"FirstName": "Ahmad", "SecondName":"Khan"}}`

```
Mongo mongo = new Mongo();
DB db = mongo.getDB("test");
DBCollection people = db.getCollection("people");

BasicDBObject name = new BasicDBObject();
name.put("FirstName", "Ahmad");
name.put("LastName", "Khan");

BasicDBObject person = new BasicDBObject();
person.put("ID", 23);
person.put("Name", name);

people.insert(person); 
```

# javascript - Javascript 中的 addEventListener 自动触发点击事件

> ID：11489734
> 
> 赞同：1
> 
> 时间：2012-07-15T05:44:44.953
> 
> 标签：javascript, javascript-events

我想做一个简单的javascript倒计时程序。出于某种原因，倒计时触发无需我单击开始链接。

```
<!DOCTYPE HTML>
<html>
    <head>
        <title id = "titleElement">My Top Ten Movies</title>

    </head>

    <body>

        <p>Countdown Suren's favorite ten movies
            <a href="" id = "start"> Start </a>
        </p>

        <table>

            <thead>
                <tr>
                    <td>Number</td>
                    <td>Movie</td>
                </tr>   
            </thead>

            <tbody id = "movieList">

            </tbody>

        </table>

    <script src="js/practice.js"></script>  
    </body>
</html> 
```

和我的 JavaScript 文件...

```
//get the start element
var start = document.getElementById("start");

//register listener
start.addEventListener('click', startCountDown(), false);

function startCountDown()
{
    //alert("Here!");
    //creat the list of 10 movies
    var myTenMovies = ["Breaveheart", "Mars Attacks", "Startship Troopers", "Jurassic Park", "Terminator 2",
                        "Austion Powers: Gold Member", "Fifth Element", "Bram Stocker's Dracula",
                        "Shashank Redemption", "LOTR: Return Of The King"];

    //get the location in the DOM to add each movie
    var tableLocation = document.getElementById("movieList");

    //create a timer function
    var countdown = setInterval(insertNextMovie, 750);

    //keep track of the index
    var index = 0;
    var movieRankIndex = 10;
    //alert("1");

    //function to add to DOM
    function insertNextMovie()
    {
        //alert("Here3!");
        //create a text nodes
        var movie = document.createTextNode(myTenMovies[index]);
        var rank = document.createTextNode(movieRankIndex);

        //create <td> element
        var rankData = document.createElement("td");
        var movieTitle = document.createElement("td");
        var row = document.createElement("tr");

        //add text to td
        rankData.appendChild(rank);
        movieTitle.appendChild(movie);

        //fill the row with data
        row.appendChild(rankData);
        row.appendChild(movieTitle);

        if(movieRankIndex == 1)
        {
            row.setAttribute("bgcolor", "yellow");
            //row.setAttribute("align", "right");
        }
        //add td to DOM table
        tableLocation.appendChild(row);

        //append index
        index++;
        movieRankIndex--;

        if(index == 10)
        {
            clearInterval(countdown);
        }

    }

    //alert("2");
} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-15T05:47:56.773

那是因为`startCountDown()`调用了函数`startCountDown`。删除括号，它会工作。

# ajax - Rails 和 ajax - 将值传递给局部视图

> ID：11489735
> 
> 赞同：0
> 
> 时间：2012-07-15T05:45:07.243
> 
> 标签：ajax, ruby-on-rails-3

导轨 3.2.3

我需要通过单击使用 AJAX 的链接为表插入许多行。它工作完美，但有一个问题。当我将值传递`@paged_photo` 给部分时，它在那里为空。但是它绝对不是空的，它包含一个数据。

**#home/index.html.erb**

```
<table   id="photos_table">
  <%= render :partial => 'test_partial'  %>
</table>
  <%= link_to "More photos",  {:controller => "home", :action => "test_method" }, :remote => true %> 
```

**#home/_test_partial.html.erb** ; **#每行有 3 个 td** **#@paged_photos 出于某种原因在这里为空**

```
<tr>
<td>
   <%= link_to :controller => 'photos', :action => 'show', :id=>@paged_photos[0].id do %>
       <%=image_tag(@paged_photos[0].source)%>
   <%end%>
</td>
<td>
   <%= link_to :controller => 'photos', :action => 'show', :id=>@paged_photos[1].source do %>
       <%=image_tag(@paged_photos[1].source)%>
   <%end%>
</td>
<td>
   <%= link_to :controller => 'photos', :action => 'show', :id=>@paged_photos[2].id do %>
       <%=image_tag(@paged_photos[2].source)%>
   <%end%>
</td>
</tr> 
```

**#home/test_method.js.erb**

```
$('#photos_table').append('# <%=j render :partial => 'test_partial'%>'); 
```

**控制器**

```
 def test_method
        @paged_photos = get_photos        
        respond_to() do |format|
          format.js
        end
     end 
```

如何将值传递给 partial 以在表格中插入一行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T07:26:33.290

您可以尝试在您的 中使用以下内容`home/test_method.js.erb`吗？

```
$('#photos_table').append('<%=j render :partial => 'test_partial', :paged_photos => @paged_photos %>'); 
```

在此之后，访问`paged_photos`.`home/_test_partial.html.erb`

如果可行，您将不得不`home/index.html.erb`像这样修改您的

```
<%= render :partial => 'test_partial', :paged_photos => @paged_photos %> 
```

PS：我没看懂`#`before `<%=j`in的用法`home/test_method.js.erb`。这只是一个错字还是故意的？

# php - 如何使用 jQuery 计算目录中的文件？

> ID：11489738
> 
> 赞同：1
> 
> 时间：2012-07-15T05:47:06.667
> 
> 标签：php, javascript, jquery

我想计算文件夹中的文件数并返回该数字以在 .js 文件中设置变量。

本质上，我在一个文件夹中有 X 个图像。当用户单击右箭头时，我将现有的 8 张图像替换为下一组 8 张图像，依此类推。我目前手动将变量（现在为 38）输入到页面中，因为文件夹中有 38 个缩略图。

该代码运行良好，但我讨厌每次添加文件时更改数字的想法。我想让它把变量设置为文件夹中图像的确切数量。

这可能使用 JavaScript 或 jQuery 吗？我需要编写一个 PHP 文件来为我返回这个变量吗？任何信息都会很棒！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-15T05:53:37.213

这是 PHP 更适合的任务，将 Javascript 保留在客户端。编写一个非常简单的 PHP 脚本来统计文件夹中的文件

```
echo iterator_count(new DirectoryIterator('/home/path/dir')); 
```

并从您的 JQuery 脚本中调用它。

```
$.get('numberoffiles.php', function(data) {
  alert(data);
}); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-15T06:27:31.800

如果您必须使用客户端并且文件已编号，请预加载文件并在出现错误时设置编号

```
...
Img = new Image();
Img.onerror=function() {
  maxImages=cnt-1;
}
Img.src = "image_"+cnt+".jpg"; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-15T06:29:38.257

简单的方法：

```
<?php
    $dir = "images";
    $file_count = count(glob("{$dir}/*.*"));
?>
<html>
<head>
<title>Welcome</title>
</head>
<script type="text/javascript" src="http://code.jquery.com/jquery-1.7.2.min.js"></script>
<script type="text/javascript">
$(document).ready(function(){ 

    var dir = <?php echo $dir ?>;
    var file_count = <?php echo $file_count ?>;

    $('#msg').html('File count in folder ' + dir + ' is ' + file_count);
});
</script>
<body>
<div id="msg"></div>
</body>
</html> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-15T06:12:40.437

我会这样做

```
echo count(glob("{$_GET['dir']}/*.*")); 
```

# jquery - 页面加载时如何在文档标题上显示“正在加载...”？

> ID：11489747
> 
> 赞同：0
> 
> 时间：2012-07-15T05:49:08.283
> 
> 标签：jquery, document, title

我正在寻找一个用文档标题替换“正在加载...”的 jquery 代码，当页面加载时它只是删除并且默认标题回来了。哈哈，我知道这听起来有点疯狂，但就像每个人都说的那样，“总有办法”。谢谢您的帮助！:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-15T05:58:55.990

这是我会尝试的：

```
$(document).ready(function() {
  var old_title = document.title;
  document.title = 'loading...';

  $(window).load(function() {
    document.title = old_title;
  });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-15T05:58:15.717

除非您已经在使用它，否则您可能不需要 jQuery。

默认情况下，将文档的标题设置为“正在加载...”（假设），当文档准备好时，将标题替换为您想要的任何内容。

```
window.onload = function() {
    document.title = "Blah!";
}); 
```

# security - Symfony 标记化 URL 不起作用

> ID：11489749
> 
> 赞同：0
> 
> 时间：2012-07-15T05:49:47.353
> 
> 标签：security, url, symfony1, routing, token

通过查看 Symfony 文档，我找到了一种方法来保护带有“令牌”字段的表单。我正在尝试实现它并且表单会生成一个令牌，但它不会在 URL 中将它传递给“showSuccess.php”页面，因此它现在显示我的 _admin.php 部分。

我认为这与路由有关，但我的路由与他们相同，但仍然无法正常工作。

```
car:
  class: sfDoctrineRouteCollection
  options: { model: car, column: token }
  requirements: { token: \w+ }

car_show:
  url: /car/:iditem.:sf_format
  class: sfDoctrineRoute
  options: { model: car, type: object }
  param: { module: car, action: show, sf_format: html }
  requirements: { iditem: \d+, sf_method: get } 
```

现在表单本身需要 URL 中的 token 字段，但是当我提交表单时，它应该将“tokenized URL”传递给成功页面，以便显示部分，但 URL 默认为“iditem”字段的“令牌”字段，所以我的部分不呈现。

我发现如果我将第二条路由的名称更改为其他名称（或删除它），那么标记化的 URL 就可以工作。但是，常规 URL 不会。

这是我需要在类文件中更改的内容吗？

这是我的参考。 [Symfony 文档](http://www.symfony-project.org/jobeet/1_4/Doctrine/en/10)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-15T06:27:46.260

我真的想通了。第一组路线的“sfDoctrineCollection”正在创建“car_show”路线，所以我放在那里的路线覆盖了它。我所做的只是将第二条路线的名称更改为不同的名称，并且它起作用了。

```
car:
  class: sfDoctrineRouteCollection
  options: { model: car, column: token }
  requirements: { token: \w+ }

car_show_id:
  url: /car/:iditem.:sf_format
  class: sfDoctrineRoute
  options: { model: car, type: object }
  param: { module: car, action: show, sf_format: html }
  requirements: { iditem: \d+, sf_method: get } 
```

我只需要更新所有链接中对旧路线的所有引用。

# mysql - 从数据库中检索单个值

> ID：11489753
> 
> 赞同：0
> 
> 时间：2012-07-15T05:50:35.617
> 
> 标签：mysql, zend-framework, zend-db

我尝试从 MySQL 数据库中检索单个值，并且正在使用 Zend Framework。这是`application.ini`我用来存储数据库信息的一部分。

```
[production]
resources.db.adapter = PDO_MYSQL
resources.db.params.host = localhost
resources.db.params.username = root
resources.db.params.password = 
resources.db.params.dbname = accounts_db
resources.db.isDefaultTableAdapter = true 
```

这是`Bootstrap.php`：

```
class Bootstrap extends Zend_Application_Bootstrap_Bootstrap
{
    protected function _initDbRegister()
    {
        $db = $this->bootstrap('Db')->getResource('Db');
        $config = new Zend_Config((array('database'=>array('params'=>$db))));
        Zend_Registry::set('config',$config);
    }
} 
```

这是我用来从数据库中检索数据的代码。

```
class User
{
    public function authenticate()
    {
         $success = false;
         $this->encrypt();//use to hash the provided password
         try{
             $conf = Zend_Registry::get('config');
             $db = Zend_Db::factory($conf->database);
             $select = $db->select()
                          ->from('user','COUNT(*)')
                          ->where('userName = ?',$this->userName)
                          ->where('password = ?',$this->password);
            $stmt = $select->query();
            $result = $stmt->fetchColumn(0);
            if($result == 1){
                $success = true;
                return $success;
            }

        } catch (Exception $e) {
            $e->getMessage();
            return $success;
        }
    }
} 
```

**注意：**`mysql_connect()`我之前使用and 对此进行了测试`mysql_query()`。然后它工作得很好。如果查询成功，它会显示主页，否则它会重定向到欢迎页面。然后我只更改了`User`类，现在它在尝试登录时只显示一个空白页面。为什么是这样？

# c# - LINQ 按匹配字符位置排序

> ID：11489760
> 
> 赞同：3
> 
> 时间：2012-07-15T05:52:18.070
> 
> 标签：c#, linq, list

我正在实施“搜索”自动完成功能。我想返回一个按用户提交的字符顺序排序的结果列表，其中排序结果顶部的项目是字符串中第一个到 n 个字符中的字符的项目。

有没有一种优雅的方法可以使用 LINQ 做到这一点？

例如，假设当用户键入“un”时，从数据库中返回以下项目。

*   美国德克萨斯州
*   美国佛罗里达州
*   美国纽约
*   美国

我想返回排序结果显示如下：

1.  美国
2.  美国德克萨斯州
3.  美国佛罗里达州
4.  美国纽约

请注意，“un”上方的每个字符串都位于位置 1-2、7-8、10-11 和 11-12。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-15T19:21:05.600

一般来说，@HugoRune 的答案会起作用，但有两个问题有点低效。

1.  使用`ToLower()`导致所有字符串首先转换为小写，即使第一个字符的比较表明它们不匹配。

2.  我们进行了两次基本相同的比较。一次`Contains()`和一次`IndexOf()`。所以我们遍历字符串两次。

以下代码的效率至少是原来的两倍：

```
 IEnumerable<string> stateNames= [your source here];
        string searchString="un";

        var result = 
            stateNames
                .Select(state=> new {Name=state, Index = state.IndexOf(searchString, StringComparison.CurrentCultureIgnoreCase)})
                .Where(tuple=>tuple.Index>=0)
                .OrderBy(tuple=>tuple.Index)
                .Select(tuple=>tuple.Name); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-15T10:15:33.743

您可以使用 IndexOf 获取子字符串的位置，并且可以在 OrderBy 子句中使用该索引

（以下假设您有一个带有“名称”列的数据库表“States”）

```
var result = dc.States
             .Where(s=>s.Name.ToLower().Contains("un"))
             .OrderBy(s=>s.Name.ToLower().IndexOf("un")); 
```

或者一个简单的缓存解决方案，如果你不想每次都访问数据库：

```
// call this once during initialisation
List<States> cachedStates = 
    dc.States.ToList();

...

// call this every time
var result = cachedStates
             .Where(s=>s.Name.ToLower().Contains("un"))
             .OrderBy(s=>s.Name.ToLower().IndexOf("un")); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-15T06:22:17.213

我对实现自动完成功能的建议是在应用程序加载和缓存时按名称升序排列所有国家名称及其 id。现在，无论何时用户键入它都应该使用此缓存结果集进行匹配，使用 linq 查询。获得更好性能的另一个调整是在您的情况下使用最少字符，例如 2，然后只进行 linq 查询

采用这种方式的原因：您只需访问数据库一次即可获取所有国家/地区名称，而不是每个字符的键位。请注意，并非每天都会更改国家/地区，因此您的缓存只能在应用程序重新启动时过期。

希望这可以帮助

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-15T19:28:14.070

使用`CompareTo`方法如下：

`SomeContext.ACollection.Where(...).OrderBy(x=> searchTerm.CompareTo(x) > 0)`

CompareTo 方法返回一个整数，表示比较字符串将按字符顺序排序的位置。

# javascript - 自己的工具提示高图

> ID：11489765
> 
> 赞同：1
> 
> 时间：2012-07-15T05:53:39.390
> 
> 标签：javascript, jquery, jquery-plugins, tooltip, highcharts

我有一个数组。var myArray = ['a', 'b', 'c', 'd', 'e', 'f', 'g', 'h', 'i'];

**我想用我的数组更改默认工具提示。其中 bar 中第一个工具提示的值是“a”，第二个是“b”，一直到“i”。**

像这张照片： ![在此处输入图像描述](../Images/6f4db0dbe6ccca3fb4babe0cefe8c814.png)

我该怎么做？

这是我的代码

```
<script type="text/javascript">
$(function () {
    var chart;
    $(document).ready(function() {
        chart = new Highcharts.Chart({
            chart: {
                renderTo: 'container',
                type: 'column'
            },
            title: {
                text: 'Monthly Average Rainfall'
            },
            subtitle: {
                text: 'Source: WorldClimate.com'
            },
            xAxis: {
                categories: [
                    'Jan',
                    'Feb',
                    'Mar'
                ]
            },
            yAxis: {
                min: 0,
                title: {
                    text: 'Rainfall (mm)'
                }
            },
            legend: {
                layout: 'vertical',
                backgroundColor: '#FFFFFF',
                align: 'left',
                verticalAlign: 'top',
                x: 100,
                y: 70,
                floating: true,
                shadow: true
            },
            tooltip: {
                formatter: function() {
                    var myArray = ['a', 'b', 'c', 'd', 'e', 'f', 'g', 'h', 'i'];
                    var i =0;
                    i++;
                    return ''+myArray[i] ;

                }
            },
            plotOptions: {
                column: {
                    pointPadding: 0.2,
                    borderWidth: 0
                }
            },
                series: [{
                name: 'Tokyo',
                data: [49.9, 71.5, 106.4]

            }, {
                name: 'New York',
                data: [83.6, 78.8, 98.5]

            }, {
                name: 'London',
                data: [48.9, 38.8, 39.3]

            }, {
                name: 'Berlin',
                data: [42.4, 33.2, 34.5]

            }]
        });
    });

});
        </script> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-15T13:55:33.090

首先，这显然不是那么聪明：

```
var i =0;
i++; 
```

正如您在调试时看到的那样，您可以访问密钥（以及更多）。我会这样制作一个关联数组：

```
var myTooltips = { "Jan": A, "Feb": B, "Mar": C } // Etc

// Other code
(function($){ // encapsulate jQuery
var chart; 
```

和

```
formatter: function() {
    return myTooltips[ this.key ];
} 
```

# php - MySQL where 字母数字列的条件

> ID：11489770
> 
> 赞同：0
> 
> 时间：2012-07-15T05:54:35.287
> 
> 标签：php, mysql

我的员工表有一个工作级别列，其中包含 1A、1B、1C、2A、2B 和 2C 等值。员工等级为 2C > 2B > 2A > 1C > 1B > 1A。

现在，如果我编写这样的查询：

```
SELECT *
FROM employee
WHERE work_level >= 1C 
```

它会返回仅包含工作级别 1C、2A、2B、2C 的行吗？

如果没有，那我该怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T05:56:38.017

是的，它将返回所需的行，但请记住在 where 子句中添加一个逗号：

```
SELECT * FROM employee WHERE work_level >= '1C' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-15T17:55:15.163

尝试这样的事情：

假设您有一些`work_level`s 和 input 定义如下：

```
set @work_level1 = '25C';  
set @input_work_level1 = '1C';  

set @work_level2 = '2C';  
set @input_work_level2 = '15C';  

set @work_level3 = '2A';  
set @input_work_level3 = '1C';  

set @work_level4 = '2C';  
set @input_work_level4 = '15B'; 
```

运行以下查询：

```
select   
 ( cast( left(@work_level1, length(@work_level1)-1) as unsigned )
   >=
   cast( left(@input_work_level1, length(@input_work_level1)-1) as unsigned )
 )
 and
 right(@work_level1, 1) <= right(@input_work_level1, 1)
 as '''25C'' >= ''1C''',

 ( cast( left(@work_level2, length(@work_level2)-1) as unsigned )
   >=
   cast( left(@input_work_level2, length(@input_work_level2)-1) as unsigned )
 )
 and
 right(@work_level2, 1) <= right(@input_work_level2, 1)
 as '''2C'' >= ''15C''',

 ( cast( left(@work_level3, length(@work_level3)-1) as unsigned )
   >=
   cast( left(@input_work_level3, length(@input_work_level3)-1) as unsigned )
 )
 and
 right(@work_level3, 1) <= right(@input_work_level3, 1)
 as '''2A'' >= ''1C''',

 ( cast( left(@work_level4, length(@work_level4)-1) as unsigned )
   >=
   cast( left(@input_work_level4, length(@input_work_level4)-1) as unsigned )
 )
 and
 right(@work_level4, 1) <= right(@input_work_level4, 1)
 as '''2C'' >= ''15B'''
; 
```

会导致：

```
+---------------+---------------+--------------+---------------+
| '25C' >= '1C' | '2C' >= '15C' | '2A' >= '1C' | '2C' >= '15B' |
+---------------+---------------+--------------+---------------+
|             1 |             0 |            1 |             0 |
+---------------+---------------+--------------+---------------+ 
```

# objective-c - UIImage 混合模式问题

> ID：11489772
> 
> 赞同：0
> 
> 时间：2012-07-15T05:54:44.480
> 
> 标签：objective-c, ios, xcode, uiimage, blend

我正在尝试叠加 2 张图像。底部图像从图像库加载到一个 alpha 设置为 1.0 的 UIImageView 对象。此图像中的所有像素的 alpha 值也为 1.0。我在上下文中创建的第二个图像。此图像的 alpha 值因像素而异。在上下文中创建第二个图像后，我将其绘制到显示在第一个 UIImageView 顶部的第二个 UIImageView。这第二个 UIImageView 也有一个设置为 1.0 的 alpha。两个 UIImageView 都将背景属性设置为清除。

我正在尝试使用滑块在运行时更改第二张图像中像素的单个 alpha 值，但是，我无法让第二张图像的 RGB 值与第一张图像正确混合。我不想基于亮度、黑暗等进行混合。似乎我想要 kCGBlendModeCopy，但这似乎仍然基于亮度或其他一些参数进行混合。

为了帮助可视化问题：想象我的底部 UIImageView 是一个人的照片。我的顶部 UIImageView 由 2 个实心分隔的圆圈组成；1 个红色和 1 个绿色。使用滑块，如果我将红色像素的 alpha 值从 0.0 更改为 1.0 并返回，那么红色圆圈应该淡入为纯红色，并平滑地淡出。

我可以通过将 RGB 数据数组值设置为等于 alpha 值并将 alpha 值设置为 1.0 来验证我的 alpha 值是否正常工作。这显示了一个黑色圆圈逐渐变白并返回。

这是我用来创建覆盖在第一个图像上的第二个图像的代码。

```
//image <-- is the name of the second UIImageView that's passed to this method
//rgbaDataNew <-- is the name of my pixel data array for the second image

CGContextRef context;
CGImageRef imageRef;    
CGColorSpaceRef colorSpace = CGColorSpaceCreateDeviceRGB();

context = CGBitmapContextCreate(rgbaDataNew, width, height, 8, 4 * width, colorSpace, kCGImageAlphaPremultipliedLast | kCGBitmapByteOrder32Big); 
imageRef = CGBitmapContextCreateImage (context);
UIImage * topImage = [UIImage imageWithCGImage:imageRef];

CGContextSetBlendMode(context, kCGBlendModeCopy);
CGContextDrawImage(context, CGRectMake(0, 0, width, height), [topImage CGImage]);

image.image = [UIImage imageWithCGImage:CGBitmapContextCreateImage (context)];

CGColorSpaceRelease(colorSpace);    
CGContextRelease(context);  
CGImageRelease(imageRef); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-15T14:53:44.420

我会以稍微不同的方式来解决这个问题，但它会涉及到少量的 Quartz 工作。

创建一个 UIView 子类并添加第一个 imageView 作为属性，以及一些其他值来定义你想要对覆盖做什么。

在子类的drawRect中，首先使用UIImageView的-(void)drawInRect:(CGRect)rect方法绘制图像。

然后，您可以使用石英在图像上绘制您想要的对象（使用视图的属性为您提供框架、颜色、不透明度等。您可以使用 Quartz 轻松找到示例代码。

或者，如果你真的想使用第二个 imageView，那么你可以在绘制底部视图之后，使用第二个视图的 - (void)drawInRect:(CGRect)rect blendMode:(CGBlendMode)blendMode alpha:(CGFloat)alpha 方法来覆盖它。

无论哪种情况，您都使用 UIView 子类。

# jquery - Ajax 和 Google 地图在 Django 中不起作用

> ID：11489777
> 
> 赞同：0
> 
> 时间：2012-07-15T05:56:12.527
> 
> 标签：jquery, django, google-maps, google-maps-api-3

我正在使用 django-easy-maps 在我的页面上显示地图，并且我在侧边栏上有一些链接，当用户单击该链接时，我想用链接中的地址刷新地图。

我的 donate.html 的 django 模板是这个

```
{% block optionalcode %}
<script>
$(document).ready(function() {
$('.link').click(function() {
var n = $(this).attr("name");
n=n.replace(/\s/g,'+');
$('#results').html('&nbsp;').load('/donate/?n=' + n);
});
});
</script>

{% endblock %}

{% block contenttitle %}{% endblock %}

{% block content %}     
<div class="container-fluid">
<div class="row-fluid">
<div class="span8">

<div class="hero-unit" style="padding:10px 10px 10px 10px">

<div id="results">
<b> <pre class="prettyprint
linenums"> {{addr}} </pre> </b>
{% load easy_maps_tags %}
{% easy_map addr 725 400 %}     
</div>

</div>
</div>

{% endblock %} 

{% block sidebar %} 
<div class="span4">
    <div class="hero-unit" style="padding:10px 10px 10px 10px">

        <div class="accordion" id="accordion2">

       <div class="accordion-group">
              <div class="accordion-heading">
                <a class="accordion-toggle" data-toggle="collapse" data-parent="#accordion2" href="#collapseOne">
                  North Delhi
                </a>
              </div>
              <div style="height: 0px;" id="collapseOne" class="accordion-body collapse">
                <div class="accordion-inner">
                  <ol>
                  <li><a class='link' href="#" name="Some name1">Some link1</a> </li>
                  <li><a class='link' href="#" name="Some name2">Some link2</a> </li>

                  </ol>
                </div>
              </div>
            </div>

</div>
{% endblock %} 
```

我的视图代码在这里：

```
from django.shortcuts import render_to_response
from django.template import RequestContext
from django.http import HttpResponse

def ajax_req(request):
    if request.is_ajax():
        n = request.GET.get('n')
        return render_to_response('donate_res.html', {'addr': n},context_instance=RequestContext(request))

    else :
        return render_to_response('donate.html', {'addr': "Some Address"},context_instance=RequestContext(request)) 
```

donate_res.html 只是替换#results div 代码的一小部分。

```
<b> <pre class="prettyprint linenums"> {{addr}} </pre> </b> 
  {% load easy_maps_tags %} 
  {% easy_map addr 725 400 using "easy_maps/map.html"%} 
```

问题是当我单击链接时，数据被发送回我知道的页面，因为我可以看到地址但未显示地图。快速查看 Firefox 中的 Web Developer 控制台会出现此错误。

```
A call to document.write() from an asynchronously-loaded external script was ignored. @ http://127.0.0.1:8000/donate/ 
```

请告诉我我做错了什么或解决此错误的解决方法...我是 Django 新手。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T22:34:39.117

看看[这个问题](https://stackoverflow.com/questions/7811985/warning-a-call-to-document-write-from-an-asynchronously-loaded-external-scrip)。它应该回答为什么它不起作用。

另外，我个人不同意你这样做的方式。每次单击链接时都会重新创建和重新加载地图，这不仅效率低下，而且从长远来看，您可能会遇到问题，受限于您可以从 Google 加载地图的最大次数。

我建议您创建自己的 javascript 来加载地图和地址，或者查看 django-easy-maps 生成的代码，看看是否可以重新创建容器并重新下载地图 javascript 来设置地图的中心或标记应位于的点。

如果您可以粘贴 django-easy-maps 生成的代码，我可以提供更多帮助`{% easy_map addr 725 400 using "easy_maps/map.html"%}`

# castle-windsor - Castle Windsor WithService 使用情况

> ID：11489778
> 
> 赞同：2
> 
> 时间：2012-07-15T05:56:27.540
> 
> 标签：castle-windsor

我不明白**WithService**集群的含义。

这条线有什么作用？我需要吗？

```
container.Register(FromAssembly...Where...WithService...); 
```

我找到[了这个文件](http://stw.castleproject.org/Windsor.Registering-components-by-conventions.ashx)。它提到了WithService和WithServiceBase，但没有提到函数的基本含义。

# asp.net - 在使用动态数据集显示的数据表中看不到编辑选项

> ID：11489779
> 
> 赞同：0
> 
> 时间：2012-07-15T05:56:28.060
> 
> 标签：asp.net, asp.net-mvc, asp.net-mvc-2

我创建了一个 asp.net 动态数据 linq to sql 网站。创建项目后，使用 linq to SQL 类添加一张表。

运行项目时，表中的数据可见，但看不到编辑按钮。可以在 list.aspx 的代码中看到编辑按钮，但在运行时只看到表格内容而没有编辑选项。在代码中，我看到 Global.asax 中提到的所有选项

```
routes.Add(New DynamicDataRoute("{table}/{action}.aspx") With {
    .Constraints = New RouteValueDictionary(New With {.Action = "List|Details|Edit|Insert"}),
    .Model = DefaultModel}) 
```

你知道我们是否必须做任何事情来使编辑选项可用？

这是完整的文件

```
<%@ Application Language="VB" %>
<%@ Import Namespace="System.ComponentModel.DataAnnotations" %>
<%@ Import Namespace="System.Web.Routing" %>
<%@ Import Namespace="System.Web.DynamicData" %>

<script RunAt="server">
Private Shared s_defaultModel As New MetaModel
Public Shared ReadOnly Property DefaultModel() As MetaModel
    Get
        Return s_defaultModel
    End Get
End Property

Public Shared Sub RegisterRoutes(ByVal routes As RouteCollection)
    '                     IMPORTANT: DATA MODEL REGISTRATION 
    ' Uncomment this line to register a LINQ to SQL model for ASP.NET Dynamic Data.
    ' Set ScaffoldAllTables = true only if you are sure that you want all tables in the
    ' data model to support a scaffold (i.e. templates) view. To control scaffolding for
    ' individual tables, create a partial class for the table and apply the
    ' <ScaffoldTable(true)> attribute to the partial class.
    ' Note: Make sure that you change "YourDataContextType" to the name of the data context
    ' class in your application.
     DefaultModel.RegisterContext(GetType(aimmdsDataContext), New ContextConfiguration() With {.ScaffoldAllTables = True})

    ' The following statement supports separate-page mode, where the List, Detail, Insert, and 
    ' Update tasks are performed by using separate pages. To enable this mode, uncomment the following 
    ' route definition, and comment out the route definitions in the combined-page mode section that follows.
    routes.Add(New DynamicDataRoute("{table}/{action}.aspx") With {
        .Constraints = New RouteValueDictionary(New With {.Action = "List|Details|Edit|Insert"}),
        .Model = DefaultModel})

    ' The following statements support combined-page mode, where the List, Detail, Insert, and
    ' Update tasks are performed by using the same page. To enable this mode, uncomment the
    ' following routes and comment out the route definition in the separate-page mode section above.
    'routes.Add(New DynamicDataRoute("{table}/ListDetails.aspx") With {
    '    .Action = PageAction.List,
    '    .ViewName = "ListDetails",
    '    .Model = DefaultModel})

    'routes.Add(New DynamicDataRoute("{table}/ListDetails.aspx") With {
    '    .Action = PageAction.Details,
    '    .ViewName = "ListDetails",
    '    .Model = DefaultModel})
End Sub

Private Sub Application_Start(ByVal sender As Object, ByVal e As EventArgs)
    RegisterRoutes(RouteTable.Routes)
End Sub

</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T06:03:18.690

您的路线应包含“编辑”值

```
 routes.Add(new DynamicDataRoute("{table}/{action}.aspx")
        {
            Constraints = new RouteValueDictionary(new { action = "List|Details|Edit|Insert" }),
            Model = DefaultModel
        }); 
```

你的表有编辑权限吗？bcz 动态数据使用所有数据库检查、权限

# java - Android根据listview位置更改另一个活动中的图像？

> ID：11489787
> 
> 赞同：0
> 
> 时间：2012-07-15T05:58:09.987
> 
> 标签：java, android, eclipse, listview, imageview

我有一个包含 100 个左右项目的列表视图，每个项目在单击时都会打开另一个具有按钮和图像视图的活动。计划是为列表视图中的每个位置提供不同的图片。

所以，我想知道当用户单击列表视图中的项目以使其他活动中的图像视图更改其图像时，你有什么办法吗？（来自可绘制文件夹）

例如，

```
(if position == 1) {

     otheractivity imageview src = "pic 1;

}

(if position == 2) {

      otheractivity imageview src = "pic 2;

} 
```

我真的不想做100个不同的活动。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T06:40:05.120

```
Rather using if else condition make array of drawable which will be easy to use like

int[] myImageList = new int[]{R.drawable.thingOne, R.drawable.thingTwo};

and on list item click send the intent like

@Override
    public void onItemClick(AdapterView<?> arg0, View arg1, int position,
            long id) {
        // TODO Auto-generated method stub

        // game_count
            Intent b = new Intent(Configure_Game_List.this, UpdateGame.class);
        b.putExtra("Name", myImageList.get [position]);
        b.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
        finish();
        startActivity(b);

    } 

and recieve it as

int imageID = getIntent().getIntExtra("Name", 1);

and set the image 
as

myImageView.setImageResource(imageID ); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-15T06:04:37.020

在 Intent 中传递 id。在您的 List Activity 的 onItemClick 侦听器中有以下内容：

```
startActivity(new Intent(this, DisplayImageActivity.class).putExtra("imageId", clickedImageId)); //clickedImageId should be R.drawable.my_pic_20 or something 
```

然后在其他 Activity 的 onCreate 中将其拉出并设置：

```
onCreate {
  final int imageId = getIntent().getExtra("imageId");
  imageView.setImageResource(imageId);
  ...
} 
```

这是另一篇关于传递额外内容的 SO 帖子：[如何从 Android 上的意图中获取额外数据？](https://stackoverflow.com/questions/4233873/how-to-get-extra-data-from-intent-in-android)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-15T06:11:34.793

You can send position of selected row in ListView to another Activity using `intent.putExtra` as:

```
@Override
public void onItemClick(AdapterView<?> arg0, View arg1, int arg2,
    long arg3) {
    // TODO Auto-generated method stub
Intent intent = new Intent();  
intent.setClass(ListActivityw.this,SecondActivity.class);
intent.putExtra("position",Integer.toString(arg2));  
ListActivityw.this.startActivity(intent); 
}
}); 
```

In Second Activity:

```
//obtain  Intent Object send  from SenderActivity
  Intent intent = this.getIntent();
  /* Obtain String from Intent  */
  if(intent !=null)
  {
     String position  = intent.getExtras().getString("position");
    (if position == "1") {
       imageview src = "pic 1;
     }
     ///your code here
  }
  else
  {
    // DO SOMETHING HERE
  } 
```

# jquery - jQuery hide + CSS 鼠标悬停问题

> ID：11489789
> 
> 赞同：1
> 
> 时间：2012-07-15T05:58:33.490
> 
> 标签：jquery, css, hover, refresh, mouse

有没有其他人注意到，当您将 CSS:hover 效果应用于元素时，隐藏该元素并保持鼠标完全静止，悬停效果仍然存在，直到鼠标移动？

我进行了搜索，但似乎找不到任何其他类似的线程。我知道这可能很容易，但我找不到解决方案，这将导致我最终陷入混乱。

要明白我的意思，看看这个小提琴：http: [//jsfiddle.net/NsMKN/](http://jsfiddle.net/NsMKN/)和

1.  点击黑框展开
2.  将光标移到原始黑度之外，例如红色 X 所在的位置
3.  单击以隐藏并保持鼠标光标完全静止
4.  注意黑盒子还是红色的？？？

当光标移动时， :hover 没有按应有的方式应用，但是有一种方法可以做到这一点，而无需移动鼠标，也不必自己使用 jQuery 应用悬停效果（将其留给 CSS）？

**更新：**我已将 Starx 标记为答案，因为它似乎是 IE 的东西。谢谢你们的帮助。

![太棒了](../Images/f3204f06e523f4166219347253e61b23.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-15T06:18:43.247

让我拆分你的代码。

```
<div class="tester">
    <div class="content">
        apple, banana, carrot, lettuce, celery, beetroot
    </div>
</div> 
```

在这里，div`.content`在`.tester`里面，在一般情况下，它相对于里面的内容进行了自我包装。

```
.tester:hover
{
   background-color:red; 
} 
```

您的 CSS 也适用于相同的包装 div 即`.tester`。所以，当鼠标移到这部分时，它的背景颜色会改变。

```
$('.tester').click(function () {
    $(this).children('.content').toggle();
}); 
```

现在，当您切换内部元素以使其可见时。遗嘱的尺寸`.tester`会根据内部元素而变化。尽管它在您的情况下是固定的，但 DOM 还必须考虑其子级。试着用这个[fiddle](http://jsfiddle.net/NsMKN/3/)做同样的事情。

![显示问题的示例](../Images/a95605f008396c85e92a751d2815dfcc.png)

由于这个原因**，鼠标仍然**会在 div 上`.tester`。所以，样式`.tester:hover`仍然会被应用。

现在，当您切换时`.content`，包装器 div`.tester`将保留以前的状态，直到发生进一步的事件。

像 IE 这样的浏览器似乎*在下一个事件发生*之前不会更新其 DOM 属性。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-15T06:10:04.123

这个问题对我来说没有发生。但是，你可以试试这个：http: [//jsfiddle.net/NsMKN/1/](http://jsfiddle.net/NsMKN/1/)

```
.tester
{
   width:100px;
   min-height:100px;
   background-color:Black;
} 
```

# java - Android：surfaceView 在 onCreate() 中不能 getHolder()，必须在 onResume() 中

> ID：11489792
> 
> 赞同：0
> 
> 时间：2012-07-15T05:59:14.577
> 
> 标签：java, android, layout, surfaceview, surfaceholder

在我的活动中，我有一些观点和一个`surfaceView`.

这是我的第一个代码`onCreate()`

```
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    upBtn = (Button) findViewById(R.id.upBtn);
    // and more widget here
    surface = (SurfaceView) findViewById(R.id.surfaceView);     
    this.holder = surface.getHolder(); // NullPointerException
    setContentView(R.layout.view); 
```

如果我通过取`surfaceView`并更改上面`getHolder()`的代码`onResume()`（我已经尝试了很多次得到这个结果），没有错误：

```
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    upBtn = (Button) findViewById(R.id.upBtn);
    // and more widget here
    // surface = (SurfaceView) findViewById(R.id.surfaceView); //cancel     
    // this.holder = surface.getHolder(); // cancel
    setContentView(R.layout.view); 
```

* * *

```
public void onResume() {
    surface = (SurfaceView) findViewById(R.id.surfaceView);     
    this.holder = surface.getHolder(); // No Error now 
```

请为我解释。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-15T06:30:26.000

因为你需要打电话

```
setContentView(R.layout.layoutXML); 
```

在你打电话之前`findViewById(R.id.viewID)`。这就是为什么您的 findview by id 返回 nul，并且您在调用 surfaceView.getHolder 时可能会收到 nullPointerException

建议的解决方案是，创建一个 layout.xml 文件，该文件应在任何布局中包含 surfaceView。

在您的 Activity 的 oncreate 调用中 `setContentView(R.layout.layoutXML);`，之后您可以通过 findViewByID 检索表面视图并使用它做任何您想做的事情。

# node.js - 无法让 SSL 在 Node.js 应用程序中工作

> ID：11489796
> 
> 赞同：1
> 
> 时间：2012-07-15T06:00:52.300
> 
> 标签：node.js, ssl

已编辑

我试图让 SSL 在应用程序上运行，但我无法让它运行。我在解决问题时遇到问题。

我创建了一个基本的应用程序来测试它：

```
var https = require('https');
var fs = require('fs');

var options = {
  key: fs.readFileSync('./ssl/server_key.pem'),
  cert: fs.readFileSync('./ssl/server_crt.pem'),
  passphrase: 'mypassphrase',
  ca: fs.readFileSync('./ssl/cacert.pem'),
  requestCert: true,
  rejectUnauthorized: false
};

https.createServer(options, function (req, res) {
  console.log('req.client.authorized: %s', req.client.authorized);
  if (req.client.authorized) {
    res.writeHead(200);
    res.end("hello world\n");
  }
  else {
    res.writeHead(404);
    res.end("Not authorised\n");
  }

}).listen(3000);
console.log('Server started...'); 
```

[我已经使用OpenSSL 上的 Ubuntu 文档](https://help.ubuntu.com/community/OpenSSL)创建了证书。我使用的过程是：

1.  创建证书颁发机构根证书和密钥

    > 导出 OPENSSL_CONF=~/myCA/caconfig.cnf
    > 
    > openssl req -x509 -newkey rsa:2048 -out cacert.pem -outform PEM -days 1825

    生成：CA公共证书'cacert.pem'；和 CA 私钥“cakey.pem”

2.  创建自签名服务器证书

    > 导出 OPENSSL_CONF=~/myCA/exampleserver.cnf
    > 
    > openssl req -newkey rsa:1024 -keyout tempkey.pem -keyform PEM -out tempreq.pem -outform PEM
    > 
    > mv tempkey.pem server_key.pem
    > 
    > 导出 OPENSSL_CONF=~/myCA/caconfig.cnf
    > 
    > openssl ca -in tempreq.pem -out server_crt.pem

    生成：服务器应用程序证书文件'server_crt.pem'；和服务器应用程序密钥文件“server_key.pem”。

3.  从服务器的根 CA X.509 证书创建 PKCS#12 证书以供客户端使用

    > openssl req -x509 -nodes -days 365 -newkey rsa:1024 -keyout mycert.pem -out mycert.pem
    > 
    > openssl pkcs12 -export -out mycert.pfx -in mycert.pem -name "MySite 证书"

    这会产生文件“mycert.pfx”。

4.  将文件复制到应用程序的 ssl 目录

    我将文件“cacert.pem”、“server_key.pem”和“server_crt.pem”复制到应用程序的 ssl 目录。

5.  通过 Firefox 的内置证书管理器将文件“mycert.pfx”导入 Firefox（我将其导入标记为“您的证书”的选项卡）。

6.  `https://ssl:3000`在 Firefox 中输入 URL ( )

    此时我收到来自 Firefox 的“用户识别请求”，我从中选择我的证书。然后我收到来自 Firefox 的错误消息：

    “... Secure Connection Failed 连接到 ssl:3000 期间发生错误。对等方的证书具有无效签名。（错误代码：sec_error_bad_signature）...”

我尝试使用 进行故障排除`curl -v -s -k -E mycert.pem:somepassword https://ssl:3000`，并收到以下输出：

> *   即将 connect() 到 ssl 端口 3000 (#0)
> *   正在尝试 XXX.XXX.XXX.XXX... 已连接
> *   成功设置证书验证位置：
> *   CAfile：无 CApath：/etc/ssl/certs
> *   SSLv3、TLS握手、客户端问候（一）：
> *   SSLv3、TLS 握手、Server hello (2)：
> *   SSLv3、TLS 握手、CERT (11)：
> *   SSLv3、TLS 握手、请求 CERT (13)：
> *   SSLv3，TLS 握手，服务器完成 (14)：
> *   SSLv3、TLS 握手、CERT (11)：
> *   SSLv3、TLS 握手、客户端密钥交换（16）：
> *   SSLv3、TLS 握手、CERT 验证（15）：
> *   SSLv3，TLS更改密码，客户端问候（1）：
> *   SSLv3，TLS 握手，已完成 (20)：
> *   SSLv3，TLS更改密码，客户端问候（1）：
> *   SSLv3，TLS 握手，已完成 (20)：
> *   使用 AES256-SHA 的 SSL 连接
> *   服务器证书：
> *   主题：CN=ssl；ST=北京；C=CN; 电子邮件地址=root@localhost；O=孟加拉公司；OU=卧室
> *   开始日期：格林威治标准时间 2012-07-17 05:11:49
> *   到期日期：格林威治标准时间 2017 年 7 月 16 日 05:11:49
> *   subjectAltName：ssl 匹配
> *   发行人：CN=ssl；ST=北京；C=CN; 电子邮件地址=root@localhost；O=孟加拉公司；OU=卧室
> *   SSL 证书验证结果：自签名证书 (18)，仍然继续。GET / HTTP/1.1 用户代理：curl/7.22.0 (i686-pc-linux-gnu) libcurl/7.22.0 OpenSSL/1.0.1 zlib/1.2.3.4 libidn/1.23 librtmp/2.3 主机：ssl:3000 接受：*/*
> 
> HTTP/1.1 404 未找到
> 
> 日期：2012 年 7 月 17 日星期二 05:22:04 GMT
> 
> 连接：保持活动
> 
> 传输编码：分块
> 
> 未授权
> 
> *   与主机 ssl 的连接 #0 保持不变
> *   关闭连接 #0
> *   SSLv3、TLS 警报、客户端问候 (1)：

如果我然后运行，`netstat`我会得到这个输出：

> 活跃的互联网连接（无服务器）
> 
> Proto Recv-Q Send-Q 本地地址 外部地址 状态
> 
> tcp 0 0 ssl:55719 ssl:3000 TIME_WAIT

我无法弄清楚我做错了什么。如果有人能指出我正确的方向，我将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T05:10:31.920

我最近在 node.js 中实现了一个支持 SSL 的简单代理服务器。也许这可以帮助您调试解决方案。您可以在我的 Github 项目中找到生成自签名证书的代码和简短说明：[https](https://github.com/alienhard/malinger) ://github.com/alienhard/malinger 。

# java - 无法在 java 中对列表使用 remove() 方法

> ID：11489797
> 
> 赞同：1
> 
> 时间：2012-07-15T06:01:05.210
> 
> 标签：java, algorithm

我试图编写一个简单的问题，如下所示：

> 本周将有你整个部门的重要会议。你清楚地记得你的老板告诉过你这件事。您唯一忘记的是会议将在一周中的哪一天举行。
> 
> 你问了你的六位同事关于这次会议的事。他们谁都不知道它会在哪一天发生，但他们每个人都记得有一天它不会发生。他们记得的日子是不同的。对于像你这样聪明的程序员来说，这足以确定会议的日期。

现在我为它创建了两个数组，一个包含所有工作日，一个包含所有不会举行会议的日子，然后从中创建两个列表。

```
public static void main(String[] args) {
    String[] notOnThisDay={"Sunday", "Monday", "Tuesday", "Wednesday",   "Thursday", "Friday"};
    String[] weekdays={"Sunday", "Monday", "Tuesday", "Wednesday", "Thursday", "Friday", "Saturday"};

    List<String> list1=Arrays.asList(weekdays);
    List<String> list2=Arrays.asList(notOnThisDay);
    Iterator<String> iter=list1.iterator();

    while(iter.hasNext()) {
        if(list2.contains(iter.next())) {
            iter.remove();
        }
    }

    for(String x:list1) {
        System.out.println(x);
    }
} 
```

我的策略是遍历工作日列表，如果我发现列表中也存在任何一天`notonThisDay`，则将其删除。因此，我只剩下要举行会议的那一天了，但该方法似乎有问题`iter.remove()`。

请指出错误。如果我的算法很好，请给我建议。如果有更好的算法，我接受建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-15T06:05:09.997

集合有一个完美的 removeAll() 方法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-15T06:17:33.880

asList 返回的列表非常有限，根本不支持remove。制作链表并将所有项目添加到 em，并阅读关于删除中间迭代的文档。或使用其他解决方案之一。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-15T06:18:17.623

你的问题是`Arrays.asList()`返回一个固定大小的列表。您最好使用已知类型列表的构造函数之一，例如`new ArrayList( ... )`or `new LinkedList( ... )`。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-15T06:13:36.243

请注意，如果您有 6 个不同的日子不在，那么最终列表不可能 > 1，因为我不认为任何人很快就会在一周内增加更多天数。因此，您可以停止查找不在`notOnthisDay`列表中的星期几。因此，使用一组`Set`它不在的星期几并快速查找：

```
Set notDays = new HashSet(notOnThisDay);
String dayOfMtg = null;
for(String day : weekdays) {
   if(notDays.contains(day) {
      //Store response
      dayOfMtg = day;
      //Stop searching, you've found it.
      break;
   }
}
System.out.println("Meeting is on: "+dayOfMtg); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-15T06:19:49.180

用于`LinkedList`正在修改的列表。

```
List<String> list1=new LinkedList<String>(Arrays.asList(weekdays)); 
```

它会起作用的。 **Iterator.remove() 是一个可选操作**，并非每个 Iterator 或其基础集合都支持。

> 从基础集合中移除迭代器返回的最后一个元素（可选操作）。每次调用 next 时，此方法只能调用一次。如果在迭代过程中以除调用此方法之外的任何方式修改了基础集合，则迭代器的行为是未指定的。
> 
> 抛出： UnsupportedOperationException - 如果此迭代器不支持删除操作。IllegalStateException - 如果还没有调用下一个方法，或者在最后一次调用下一个方法之后已经调用了 remove 方法。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-15T06:06:58.503

一般来说，你必须小心地从你正在迭代的集合中删除东西。也许您可以找到避免这种情况的方法？

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-07-15T06:35:29.603

`Arrays.asList`创建一个不可修改的列表。从[Javadoc](http://docs.oracle.com/javase/6/docs/api/java/util/ArrayList.html)：返回由指定数组支持的固定大小的列表。你不能添加它；你不能从中删除。您不能在结构上修改列表。

将其包装在一个可修改的列表中，如下所示：

```
someList.addAll(Arrays.asList(newArray)); 
```

这会产生一些额外的垃圾，但您可以对其进行变异。

您的代码现在应该如下所示。

```
public static void main(String[] args) 
{
    String[] notOnThisDay={"Sunday", "Monday", "Tuesday", "Wednesday",   "Thursday", "Friday"};
    String[] weekdays={"Sunday", "Monday", "Tuesday", "Wednesday", "Thursday", "Friday", "Saturday"};

    //List<String> list1=Arrays.asList(weekdays);
    //List<String> list2=Arrays.asList(notOnThisDay);

    List<String> list1=new ArrayList<String>();
    List<String> list2=new ArrayList<String>();
    list1.addAll(Arrays.asList(weekdays));
    list2.addAll(Arrays.asList(notOnThisDay));

    Iterator<String> iter=list1.iterator();
    //ListIterator<String> iter = list1.listIterator();  Better to use

    while(iter.hasNext()) {
        if(list2.contains(iter.next())) {
            iter.remove();
        }
    }

    for(String x:list1) {
        System.out.println(x);
    }
} 
```

# c# - 无法使用对象在组合框中设置 SelectedValue

> ID：11489801
> 
> 赞同：1
> 
> 时间：2012-07-15T06:01:27.297
> 
> 标签：c#, winforms

我有以下代码：

```
public partial class ModificarAlimento : Form
{
    private Alimento alim;
    private Dictionary<string, Nutriente> nutrientes;

    public ModificarAlimento(Alimento a, Dictionary<string, Nutriente> nut)
    {
        InitializeComponent();
        this.nutrientes = nut;
        alim = a;

        int i = 0;
        foreach (KeyValuePair<string, CantidadNutrientes> x in alim.Nutrientes) 
        {
            ComboBox n = new ComboBox();
            n.DropDownStyle = ComboBoxStyle.DropDownList;
            n.Location = new Point(12, 25 * (i + 1) + 80);
            n.DataSource = new BindingSource(nutrientes, null);
            n.DisplayMember = "Key";
            n.ValueMember = "Value";
            TextBox cNuts = new TextBox();
            cNuts.Location = new Point(150, 25 * (i + 1) + 80);
            cNuts.Size = new Size(50, cNuts.Size.Height);
            cNuts.Text = x.Value.Cantidad.ToString();
            this.Controls.Add(n);
            this.Controls.Add(cNuts);
            i++;
            n.SelectedValue = x.Value.Nutriente;
        }
    }

    private void ModificarAlimento_Load(object sender, EventArgs e)
    {

    }
} 
```

现在。问题在这里：

```
n.SelectedValue = x.Value.Nutriente; 
```

每个`Alimento`(Food) 都有一个字典集`CantidadNutrientes`，它存储一个双精度值和一个`Nutriente`(Nutrient)，它又存储一个名称。所以，打电话

```
x.Value.Nutriente 
```

将检索存储在 x 中的 CantidadNutrientes 中的 Nutriente。

为什么这不起作用？任何帮助表示赞赏。

**编辑：**我也在尝试这个

```
n.SelectedIndex = n.FindStringExact(x.Key);
//and
n.SelectedValue = n.FindStringExact(x.Value.Nutriente.Nombre); 
```

但是由于某些奇怪的原因，它在我调试时可以工作，但是如果我不逐行检查，它根本就不起作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-15T06:23:03.003

您必须使用[`ComboBox.Text`](http://msdn.microsoft.com/en-us/library/system.windows.forms.combobox.text.aspx)或[`ComboBox.SelectedIndex`](http://msdn.microsoft.com/en-us/library/system.windows.forms.combobox.selectedindex.aspx)：

```
combox.SelectedIndex = combox.FindStringExact("yourItem"); 
```

或者

```
combox.Text = "yourIetmText"; 
```

**注意：**

[`ComboBox.FindStringExact Method`](http://msdn.microsoft.com/en-us/library/system.windows.forms.combobox.findstringexact.aspx)可以帮助您找到与指定字符串完全匹配的项目索引。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-15T07:13:44.317

试着放

```
n.CreateControl(); 
```

在 this.Controls.Add() 之前，然后放

```
n.SelectedItem = 
  n.Items
   .Cast<KeyValuePair<string, Nutriente>>()
   .SingleOrDefault(o => o.Key == x.Key); 
```

调用 this.Controls.Add() 之后

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-15T06:30:21.910

请改用 comboBox1.SelectedText 来设置项目并在组合中显示为已编辑的文本

# jquery - html_data 显示预先检查的 jstree

> ID：11489803
> 
> 赞同：2
> 
> 时间：2012-07-15T06:01:39.447
> 
> 标签：jquery, asp.net-mvc-3, jstree

我正在尝试使用 jstree 复选框显示菜​​单。我已经关注了这个链接[http://www.mattfrear.com/2011/12/17/jstree-revisited/](http://www.mattfrear.com/2011/12/17/jstree-revisited/)但我已经对其进行了调整以从数据库中获取数据以动态显示菜单。

当如上所述使用 json_data 时，我已经能够在启动时预先检查特定节点。但是当我从控制器传递模型并使用 html_data 时，我可以看到带有复选框的树，但它没有被预先检查。我不能使用 html_data 来预检查节点吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-18T08:28:31.197

北京,

您可以尝试使您的 html 格式如下

> ```
> <div id="tree">
>     <ul>
>         <li >
>             <a href="#">Node 1</a>
>             <ul>
>                 <li>
>                     <a href="#">Node 1.1</a>
>                 </li>
>                 <li>
>                     <a href="#">Node 1.2</a>
>                     <ul>
>                         <li class="jstree-checked">
>                             <a href="#">Node 1.2.1</a>
>                         </li>
>                     </ul>
>                 </li>
>             </ul>
>         </li>
>         <li class="jstree-checked">
>             <a href="#">Node 2</a>
>         </li>
>     </ul>
> </div> 
> ```

这里的问题是您需要添加

> `<li class="jstree-checked">`

到需要选择onload的节点。由于您是从服务器分派标记，因此您可以检查它并在适用的情况下添加类。

——阿文德。

# objective-c - DrawRect 文本对齐中的 NSString

> ID：11489804
> 
> 赞同：2
> 
> 时间：2012-07-15T06:02:00.790
> 
> 标签：objective-c, xcode, macos, cocoa

我正在使用 DrawRect 方法绘制一些文本，但不知道如何将这些文本向右对齐。

我知道在界面生成器中您可以指定对齐方式，所以我知道这是可能的，但我似乎无法弄清楚我自己。

在这一点上的任何帮助都非常有帮助。

非常感谢！

```
 NSDictionary *attributes = [NSDictionary dictionaryWithObjectsAndKeys:[NSFont fontWithName:@"AvenirNext-UltraLight" size:12], NSFontAttributeName, [NSColor redColor], NSForegroundColorAttributeName, nil];
    NSAttributedString * newEmail = [[NSAttributedString alloc] initWithString:[NSString stringWithFormat:@"%d", newUnreadEmail] attributes:attributes];
    [newEmail drawAtPoint:NSMakePoint(140, 600)]; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-15T06:44:31.253

您需要进行数学运算来计算正确对齐的正确点。用于`[newEmail size]`计算属性字符串的宽度，从您希望在其中绘制它的矩形的宽度中减去它，然后将差值添加到您传递给`drawAtPoint:`方法的点的左坐标。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-15T11:11:12.067

如果您使用的是`NSString`类，您的生活会更轻松，因为您可以使用以下方法来使用类的`UIStringDrawing`扩展`NSString`（您不需要做任何额外的事情来使用这些方法`NSString`）：

```
- (CGSize)sizeWithFont:(UIFont *)font;
- (CGSize)sizeWithFont:(UIFont *)font forWidth:(CGFloat)width lineBreakMode:(UILineBreakMode)lineBreakMode;
- (CGSize)sizeWithFont:(UIFont *)font constrainedToSize:(CGSize)size;
- (CGSize)sizeWithFont:(UIFont *)font constrainedToSize:(CGSize)size lineBreakMode:(UILineBreakMode)lineBreakMode; 
```

`UIFont`它们为您提供所选和的当前字符串的确切大小`UILineBreakMode`，并且使用该大小您可以计算屏幕上的位置以始终将字符串的右边缘对齐在同一位置。

# facebook - 如何强制 Facebook Linter 在启用 cookie 的情况下重新抓取页面？

> ID：11489805
> 
> 赞同：1
> 
> 时间：2012-07-15T06:02:01.757
> 
> 标签：facebook, facebook-like, session-cookies, facebook-likebox, http-redirect

我最近在使用 Facebook Like 按钮时遇到了很多问题。具体来说，当用户单击“赞”按钮时，不会出现评论对话框，而是显示“无法访问页面”的错误链接。

当 Facebook Linter 抓取这样的页面时，它会得到一个 302，它将 linter 重定向到`jsessionid=xxx`附加的 URL。我假设 Facebook 正确处理 302，并决定将 Tomcat 配置为存储`jsessionid`为 cookie。这是一个例子：[http ://galecsy.com:88/lrm/ms/oid/75009](http://galecsy.com:88/lrm/ms/oid/75009)

我还假设 Facebook Linter 可以处理 cookie，因为这里有一个`cookies:true`参数：http `FB.init()`: [//developers.facebook.com/docs/reference/javascript/](http://developers.facebook.com/docs/reference/javascript/)

`jsessionid`但是，当 linter遵循 302 重定向时，它似乎没有保留cookie。那么，有没有办法强制 linter 尊重 cookie？`cookies:true`如果不是， JS SDK 上的这个参数是干什么用的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-15T12:59:42.070

> JS SDK 上的这个 cookies:true 参数是干什么用的？

它使 SDK 将有关登录状态的信息存储在 cookie 中，以便在下一个请求时可以在服务器端轻松访问（由 PHP SDK 提供）。

> 那么，有没有办法强制 linter 尊重 cookie？

我不这么认为。

您应该让您的应用程序在不需要 cookie 的情况下运行。

# sql - SQL 中的错误百分比

> ID：11489806
> 
> 赞同：1
> 
> 时间：2012-07-15T06:02:20.223
> 
> 标签：sql, aggregate-functions

下面的表格包含每个 ID 的实际计数和错误计数。

```
USER_ID    |    Actual_Count    |   Error_Count
-----------+--------------------+---------------------
1345653         5                     4
534140349       5                     0
682527813       4                     0
687612723       3                     0
704318001       5                     4 
```

所以如果你看上面的场景，对于这个`1345653`ID Out of `5`，它有`4`错误，与`704318001`ID相同，`5`它有`4`错误。`Error_Count`和所有其他 ID一样，他们没有任何错误`Zero`。如何计算 SQL 中的总错误百分比？是否可以计算总误差百分比？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-15T06:07:10.047

您可以简单地将各个计数相加和相除：

```
SELECT 100 * sum(Error_Count) / sum(Actual_Count) FROM MyTable; 
```

这不适用于所有数据库，因为有些数据库（例如 SQL Server）会进行整数除法。以下确实有效：

```
SELECT 100 * sum(Error_Count*1.0) / sum(Actual_Count) FROM MyTable; 
```

# iphone - 带有插值质量的 UIImage 错误

> ID：11489810
> 
> 赞同：0
> 
> 时间：2012-07-15T06:04:01.953
> 
> 标签：iphone, xcode, uiimage

我正在尝试控制图像。以下几行有效：

```
UIImage *image = [UIImage imageNamed:@"Cloud-Small.png"]; 
```

但是，我扩展它并尝试强制大小：

```
UIImage *image = [[UIImage imageNamed:@"Cloud-Small.png"] _imageScaledToSize:CGSizeMake(30.0f, 32.0f) interpolationQuality:1]; 
```

我得到一个

> “UIIImage”没有可见的@interface 声明选择器“interpolationQuality”

有任何想法吗？这条线位于一个`cellForRowAtIndexPath:`方法中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-15T09:12:01.347

问题是该`_imageScaledToSize:interpolationQuality:`方法在 iOS 中不再可用。您可能发现它在网上搜索代码，并找到了一个非常旧的帖子。我刚刚通过[使用 class-dump 转储 UIKit 框架检查了](http://www.codethecode.com/projects/class-dump/)**UIKit/UIImage.h**标头，并且在iOS 5.0中没有命名私有方法。`_imageScaledToSize:interpolationQuality:``UIImage`

我敢打赌，用于缩放图像的 iOS**公共**API 足以满足您的需求，因此我建议您使用其中之一。这取决于您使用此图像的目的。是在一个`UIImageView`吗？

无论如何，请参阅[此答案以了解您尝试扩展的方式的几种替代方法](https://stackoverflow.com/a/2658801/119114)，这将不再起作用。

**PS**这是尽可能避免使用私有 API 的原因之一。即使您的应用程序不适用于 App Store，您也不必担心 Apple 的批准。API 是私有的，意味着它可以而且经常会在未来的 iOS 版本中被更改或删除。

# c - 从递归函数中提前退出时返回什么？

> ID：11489811
> 
> 赞同：2
> 
> 时间：2012-07-15T06:04:15.703
> 
> 标签：c, recursion

我有一个家庭作业，我需要计算两个字符串之间的编辑距离。我得到了初始功能，但我在这部分遇到了麻烦

> 现在将截止添加到编辑距离中。这不应该改变产生的结果，但会大大加快性能。

这是我的原始功能：

```
static unsigned int compute_edit_distance(const char *const a,
                                      const char *const b)
{
    if (strcmp(a, b) == 0) return 0;
    if (a[0] == '\0') return strlen(b);
    if (b[0] == '\0') return strlen(a);

    unsigned int remove_from_a =
        compute_edit_distance(a + 1, b) + 1;
    unsigned int remove_from_b =
        compute_edit_distance(a, b + 1) + 1;

    unsigned int remove_from_both =
        compute_edit_distance(a + 1, b + 1);
    if (tolower(a[0]) != tolower(b[0])) ++remove_from_both;

    return get_min(get_min(remove_from_a, remove_from_b),
               remove_from_both);
} 
```

我已经尝试了一些东西，但它们都不起作用。我最近的变化是这个

```
if (depth == MAX_EDIT_DISTANCE_DEPTH)
{
    size_t a_length = strlen(a);
    size_t b_length = strlen(b);
    size_t max_length = (a_length > b_length) ? a_length : b_length;
    return MAX_EDIT_DISTANCE_DEPTH + max_length;
} 
```

带有新的函数签名

```
static unsigned int compute_edit_distance(const char *const a,
                                      const char *const b, unsigned int depth) 
```

但这也不起作用。

我可以得到有关如何正确执行此操作的提示吗？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-15T07:05:55.797

最简单的方法是将“剩余深度”作为参数传入。也就是说，第一个调用通过了截止深度，所有递归调用都通过了一个较小的数字，这取决于所做的编辑类型。

基本思想是，在您的第一个解决方案中，深度是在递归探索分支后计算的。也就是说，所有呼叫都在分支中进行，然后在返回分支的路上将号码相加。

您仍然可以这样做来计算深度，但为了防止分支走得太远，您需要传入您已经在调用中使用的编辑预算的总和，或者等效的编辑预算遗迹。

您需要一些技巧来从失败的分支传回一个号码，以确保该号码将被拒绝。例如返回一个你知道会太大的数字，然后检查最后的结果。例如，返回 MAX_DEPTH + 1，或类似的。

# mysql - 此查询是否在 MySQL 中使用索引？

> ID：11489815
> 
> 赞同：1
> 
> 时间：2012-07-15T06:05:21.613
> 
> 标签：mysql, database, indexing

我不确定此查询是否使用索引。我该怎么说？

```
mysql> EXPLAIN SELECT au.* FROM users au WHERE au.id IN(SELECT fa.from_user_id FROM approvals fa INNER JOIN personas pp ON fa.persona_id = pp.id WHERE fa.to_user_id=1 AND pp.is_foundation=1 GROUP BY fa.from_user_id) ORDER BY id DESC LIMIT 0, 9999999999;
+----+--------------------+-------+--------+-----------------------+------------+---------+--------------------+------+----------------------------------------------+
| id | select_type        | table | type   | possible_keys         | key        | key_len | ref                | rows | Extra                                        |
+----+--------------------+-------+--------+-----------------------+------------+---------+--------------------+------+----------------------------------------------+
|  1 | PRIMARY            | au    | index  | NULL                  | PRIMARY    | 4       | NULL               | 2272 | Using where                                  |
|  2 | DEPENDENT SUBQUERY | fa    | ref    | to_user_id,persona_id | to_user_id | 4       | const              |  396 | Using where; Using temporary; Using filesort |
|  2 | DEPENDENT SUBQUERY | pp    | eq_ref | PRIMARY               | PRIMARY    | 4       | kjdb.fa.persona_id |    1 | Using where                                  |
+----+--------------------+-------+--------+-----------------------+------------+---------+--------------------+------+----------------------------------------------+
3 rows in set (0.00 sec) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-15T06:14:39.770

The `key` column in the output indicates the index that MySQL is using.

So yes, the query uses indexes.

You can read a lot more about the output of `EXPLAIN` in the MySQL documentation for the version of MySQL you are running. For example, if you're running MySQL 5.1, read [http://dev.mysql.com/doc/refman/5.1/en/explain-output.html](http://dev.mysql.com/doc/refman/5.1/en/explain-output.html).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-15T06:29:02.110

我会很快的。是的，用于连接，但不用于过滤记录。请查看额外字段。它应该在*使用 where*时“使用索引”，这确实更慢。

请考虑修改查询以避免子查询。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-15T06:32:11.820

由@Trott 回答。

尽管我认为您非常有能力并且能够制定和尝试替代查询，但是 MySQL 的一个奇怪事实（很容易被监督）：MySQL 长期以来声称 EXISTS 可以比 IN SELECT 更好地优化，作为当时寻求的元素在子查询内。

那将是最简单的形式：

```
EXPLAIN
  SELECT au.*
  FROM users au
  WHERE EXISTS
    (SELECT fa.from_user_id FROM approvals fa
    INNER JOIN personas pp ON fa.persona_id = pp.id
    WHERE fa.from_user_id = au.id
      AND fa.to_user_id=1 AND pp.is_foundation=1
    GROUP BY fa.from_user_id)
  ORDER BY id DESC
  LIMIT 0, 9999999999; 
```

# f# - F#狼山羊白菜

> ID：11489816
> 
> 赞同：1
> 
> 时间：2012-07-15T06:05:24.060
> 
> 标签：f#, river-crossing-puzzle

所以首先我很抱歉问[这个问题](https://stackoverflow.com/questions/11473756/getting-started-with-basic-transportation-problems-like-wolf-cabbage-goat-with)。但是“逃离 Zurg”文章对我帮助很大，我可以编写自己的解决方案来解决 Wolf Goat Cabbage Problem。我在下面放置我的代码。我要你告诉我

1.  如果我的代码是按照 F# 和函数式编程的真正精神编写的
2.  这是解决问题的最佳和良好的解决方案

    ```
    open System

    (* 
      The type direction determines which direction the human is present.
      Left means that Human is present on the left side of the bank.
      Right means human is present on the right side of the bank.
    *)
    type Direction =
      | Left
      | Right

    (*
      Master list of animals
    *)
    let Animals = ["Wolf"; "Goat"; "Cabbage"]

    let DeadlyCombinations = [["Wolf"; "Goat"];["Goat"; "Cabbage"];]

    let isMoveDeadly list1 list2 =
      List.exists (fun n -> n = list1) list2

    let rec MoveRight animals =
      match animals with
        | [] -> []
        | head::tail -> 
          if (isMoveDeadly tail DeadlyCombinations) then
            MoveRight tail @ [head]
          else
            Console.WriteLine("Going to move " + head)
            tail

    let ListDiff list1 list2 = List.filter (fun n -> List.forall (fun x -> x <> n) list1) list2

    let MoveLeft animals = 
      let RightList = ListDiff animals Animals 
      let ShouldTakeAnimal = isMoveDeadly RightList DeadlyCombinations
      if (ShouldTakeAnimal) then
        let x = List.head RightList
        Console.WriteLine("Going to move " + x + " back")
        [x]
      else
        Console.WriteLine("Farmer goes back alone")
        []

    let rec Solve direction animals =
        match animals with 
        | [] -> Console.WriteLine("Solved")
        | _ ->
            match direction with
            | Left -> Solve Right (MoveRight animals) 
            | Right -> Solve Left (animals @ (MoveLeft animals))

    [<EntryPoint>]
    let main args =
        Solve Left Animals
        0 
    ```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-15T11:24:18.220

代码看起来很实用。我会做一些改变。首先，我会使用*集合*来表示动作，还有一些小建议......

**表示。**您使用列表表示致命组合，因此`["Goat"; "Wolf"]`与`["Wolf"; "Goat"]`您的算法以其他顺序生成移动不同，它不会将其检测为致命移动。您应该尝试找到不会发生这种情况的表示，因此我会更改表示以使用集合：

```
let DeadlyCombinations = [set ["Wolf"; "Goat"]; set ["Goat"; "Cabbage"];] 
```

在`isMoveDeadly`函数中，您可以使用以下方法将移动转换为集合（但最好将代码更改为在任何地方使用集合）：

```
let move = set list1 
```

**不必要的概括。**除此之外，该函数`isMoveDeadly`始终`DeadlyMoves`作为第二个参数，所以我不会将它作为参数传递（这是不需要的概括），我会写：

```
let isMoveDeadly list = 
  let move = set list
  DeadlyCombinations |> List.exists (fun n -> n = move) 
```

**效率提示。**在`MoveRight`函数中，您使用的`list @ [element]`模式非常低效。这意味着您需要复制整个`list`以将元素附加到末尾。使用（较少复制）将元素添加到前面`element::list`然后反转列表更有效。如果您将致命动作表示为一组，我想您甚至不需要反转列表，所以我会写：

```
let rec MoveRight animals = 
  match animals with 
    | [] -> [] 
    | head::tail ->  
      if (isMoveDeadly tail) then 
        head :: (MoveRight tail)
      else 
        Console.WriteLine("Going to move " + head) 
        tail 
```

**代表（再次）。**您实现了自己的`ListDiff`函数来找出给定列表中没有的动物。这表明使用集合（而不是列表）确实是一种更好的表示形式。如果您切换到集合，则可以改用内置函数`Set.difference`。

# javafx-2 - 如何检测 JavaFX 2 中的用户空闲状态？

> ID：11489817
> 
> 赞同：2
> 
> 时间：2012-07-15T06:05:35.733
> 
> 标签：javafx-2

我有 JavaFX 应用程序，我想检测自上次操作（鼠标单击、按钮按下等）以来经过了一段时间。有没有办法注册一些全局动作监听器，或者我需要监听我所有控件的动作？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-15T06:24:33.370

似乎我找到了解决方案 - 在舞台上注册事件过滤器（scalafx 语法）：

```
stage.delegate.addEventFilter[javafx.event.Event](
  javafx.event.EventType.ROOT,
  new javafx.event.EventHandler[javafx.event.Event] {
    def handle(e: javafx.event.Event) = {
      StageDirector ! "event"
    }
  }
) 
```

# python - 如何在 Tesseract 和 OpenCV 之间进行选择？

> ID：11489824
> 
> 赞同：96
> 
> 时间：2012-07-15T06:07:22.877
> 
> 标签：python, opencv, computer-vision, ocr, tesseract

我最近遇到了[Tesseract](http://code.google.com/p/tesseract-ocr/)和[OpenCV](http://opencv.willowgarage.com/wiki/)。看起来 Tesseract 是一个成熟的 OCR 引擎，OpenCV 可以用作创建 OCR 应用程序/服务的框架。

我尝试在我的一些图像上使用 Tesseract，它的准确性似乎不错。后来，我偶然发现了一个非常简单的使用 OpenCV 使用 Python 执行 OCR的[教程，印象深刻。](https://stackoverflow.com/questions/9413216/simple-digit-recognition-ocr-in-opencv-python)几分钟后，我完成了系统的训练，它的准确性很好。但是，当然，采用这种方法意味着我需要使用大型训练集来广泛训练我的系统。

我的具体问题如下：

*   如何在 Tesseract 和使用 OpenCV 构建自定义 OCR 应用程序之间进行选择？
*   有可用于不同语言的 Tesseract 的训练数据集。OpenCV 是否有类似的东西，所以我不必从头开始实现 OCR？
*   哪个更适合想要成为商业应用程序？

有什么建议么？

* * *

## 回答 #1

> 赞同：81
> 
> 时间：2012-07-15T06:12:48.053

*   Tesseract 是一个 OCR 引擎。它由 Google 使用、开发和资助，专门用于从图像中读取文本、执行基本文档分割和对特定图像输入（单个单词、行、段落、页面、有限字典等）进行操作。

*   另一方面，OpenCV 是一个计算机视觉库，其中包含可让您执行某些特征提取和数据分类的功能。您可以创建一个简单的字母分割器和分类器来执行基本的 OCR，但它不是一个很好的 OCR 引擎（我之前在 Python 中从头开始制作了一个。对于偏离训练数据的输入确实不准确）。

如果您想基本了解 OCR 的难度，请尝试 OpenCV。Tesseract 用于*真正的*OCR。

* * *

## 回答 #2

> 赞同：66
> 
> 时间：2012-07-15T06:21:17.323

我是您提到的那个数字识别教程的作者，**我想说，这无法替代 tesseract。**

Tesseract 是一个非常好的 OCR 引擎，可能是最好的 OpenSource OCR 引擎。

您提到的教程只是一个尝试，以了解 OCR 的最简单工作。

因此，如果您正在寻找 OCR 应用程序，我建议您使用 OpenCV 对图像进行预处理，然后应用 tesseract 引擎。

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2014-11-13T01:50:15.160

两者可以互补。如果您阅读有关 OpenCV 的论文： [https ://github.com/tesseract-ocr/docs/blob/master/tesseracticdar2007.pdf](https://github.com/tesseract-ocr/docs/blob/master/tesseracticdar2007.pdf)

它强调“由于 HP 拥有独立开发的页面布局分析技术并用于产品中，（因此未开源）Tesseract 从来不需要自己的页面布局分析。因此，Tesseract 假设它的输入是一个二进制图像定义了可选的多边形文本区域。”

这种类型的任务可以由 OpenCV 执行，并将生成的图像移交给 Tesseract。您可以在 Git 存储库中找到此类代码的示例：[https](https://github.com/Itseez/opencv_contrib/tree/master/modules/text/samples) ://github.com/Itseez/opencv_contrib/tree/master/modules/text/samples 该示例使用 Tesseract API 进行图像到文本的转换。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2017-09-26T03:25:50.710

OpenCV 是一个用于[CV](https://en.wikipedia.org/wiki/Computer_vision)的库，通常用于分析和处理图像。Tesseract 是一个[OCR](https://en.wikipedia.org/wiki/Optical_character_recognition)库，它是 CV 的一个专门子集，专门用于从图像中提取文本。

来自[OpenCV.org](http://opencv.org/about.html)

> .....用于检测和识别人脸、识别对象、对视频中的人类行为进行分类、跟踪摄像机运动、跟踪移动对象、提取对象的 3D 模型、从立体摄像机生成 3D 点云、将图像拼接在一起以产生高整个场景的分辨率图像，从图像数据库中查找相似图像，从使用闪光灯拍摄的图像中去除红眼，跟随眼球运动，识别风景并建立标记以将其与增强现实叠加等

来自[Tesseract Github](https://github.com/tesseract-ocr/tesseract/wiki)：

> .....可以直接使用，或者（对于程序员）使用 API 从图像中提取打字、手写或打印的文本。它支持多种语言。

# asp.net - Ajaxtool 工具包 Tab Control 选项卡边界外的内容控件

> ID：11489825
> 
> 赞同：1
> 
> 时间：2012-07-15T06:08:02.400
> 
> 标签：asp.net

查看第一个选项卡，CARBS 的内容很好地位于选项卡边界内，但对于 ISG，内容似乎位于一个小矩形下方，该矩形似乎是第二个选项卡的选项卡边界。

我究竟做错了什么？在我看来，好像我做了第二个选项卡，与 ISG 用户控件位于第二个 TabPanel 内的第一个选项卡相同，就像 Carbs 用户控件位于第一个选项卡面板内一样......

请注意，我删除了图片中显示的 3 个选项卡的代码，以简化示例。

内容 ![在此处输入图像描述](../Images/12fe430bd495e09a3cc2e8727f9873da.png)

```
<%@ Page Title="Revenue Adjustment Ratios" Language="C#" MasterPageFile="~/Site.Master"
    AutoEventWireup="true" CodeBehind="VerifyRevenueRatio.aspx.cs" Inherits="MLR_Datamart.VerifyRevenueRatio" %>

<%@ Register Assembly="AjaxControlToolkit" Namespace="AjaxControlToolkit" TagPrefix="ajaxtoolkit" %>
<%@ Register Src="Controls/Ratios_Carbs.ascx" TagName="Ratios_Carbs" TagPrefix="uc1" %>
<%@ Register Src="Controls/Ratios_ISG.ascx" TagName="Ratios_ISG" TagPrefix="uc2" %>
<asp:Content ID="Content1" ContentPlaceHolderID="HeadContent" runat="server">
    <style type="text/css">

    </style>
    <link href="Styles/Common.css" rel="stylesheet" type="text/css" />
</asp:Content>
<asp:Content ID="Content2" ContentPlaceHolderID="MainContent" runat="server">
    <asp:ScriptManager ID="ScriptManager1" runat="server" AsyncPostBackTimeout="9999999">
    </asp:ScriptManager>
    <ajaxtoolkit:TabContainer ID="tabDataEntry" runat="server" ViewStateMode="Enabled"
        Width="1230px" ActiveTabIndex="1">
        <ajaxtoolkit:TabPanel ID="tabCarbs" runat="server" HeaderText="CARBS">
            <HeaderTemplate>
                CARBS</HeaderTemplate>
            <ContentTemplate>
                <uc1:Ratios_Carbs ID="Ratios_Carbs1" runat="server" />
            </ContentTemplate>
        </ajaxtoolkit:TabPanel>
        <ajaxtoolkit:TabPanel ID="tabISG" runat="server" HeaderText="ISG">
            <HeaderTemplate>
                ISG</HeaderTemplate>
            <ContentTemplate>
                <uc2:Ratios_ISG ID="Ratios_ISG1" runat="server" />
            </ContentTemplate>
        </ajaxtoolkit:TabPanel>
    </ajaxtoolkit:TabContainer>
</asp:Content> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-15T07:03:09.813

可能其中一个用户控件的 HTML 格式不正确，请检查控件 uc2:Ratios_ISG 及其后代中的 HTML，并查看所有 HTML 是否正确关闭。观察标签格式良好的一种方法是使用 Visual Studio 重新格式化标记，您可以快速查看缩进是否正确。

您也可以暂时将用户控件标记为 Visible="false"，然后在用户控件后添加几行空行，然后查看相同的视觉问题是否仍然存在。如果是这样，您可以确定用户控件是罪魁祸首。

# appcelerator - Titanium appcelerator 是解释型应用程序吗？

> ID：11489826
> 
> 赞同：0
> 
> 时间：2012-07-15T06:08:03.010
> 
> 标签：appcelerator

appcelerator 应用程序是在运行时解释的吗？它在移动设备上有翻译吗？

请分享任何信息链接。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T03:39:57.173

是的，JavaScript 代码是在运行时解释的。这就是为什么它依赖于 Rhino/V8 for Android，例如。

在[CODESTRONG 2011的一次](http://www.appcelerator.com/showcase/videos/codestrong2011/)[谈话](http://player.vimeo.com/video/30391192?title=0&byline=0&portrait=0&color=9a0707&autoplay=1)中也提到了这一点。

您可以随时阅读有关[Appcelerator 工作原理的更多信息](https://stackoverflow.com/questions/2444001/how-does-appcelerator-titanium-mobile-work/2471774#2471774)

# c# - Fetching data from SQL Server 2005 using c#

> ID：11489829
> 
> 赞同：0
> 
> 时间：2012-07-15T06:08:12.353
> 
> 标签：c#, tsql, sql-server-2005

I would like to retrieve a particular column from a table when the values from two other columns are equal. My code is as follows. The four columns are `id,destination,source,price`.

I want to display the price when the destination and source are equal.

Could you please help me?

```
private void button1_Click(object sender, EventArgs e)
{

        SqlConnection con = new SqlConnection("Data source=.;initial catalog=loki;integrated security=true");
        con.Open();
        SqlDataAdapter da = new SqlDataAdapter();

        DataTable dt = new DataTable();
        da.SelectCommand = new SqlCommand("select  price from metro where source='" + textBox1.Text + "' and destination='" + textBox2.Text + "'", con);
        da.Fill(dt);
        for(int i=0;i<dt.Rows.Count;i++)
        {
            textBox3.Text = dt.Rows[0][3].Count.ToString();
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-15T06:55:45.383

我觉得你在这之后......

```
 private void button1_Click(object sender, EventArgs e)
    {
        using (SqlConnection con = new SqlConnection("Data source=.;initial catalog=loki;integrated security=true"))
        {
            string query = "select  price from metro where source= @Source and destination = @Destination";

            using (SqlCommand cmd = new SqlCommand(query, con))
            {
                cmd.Parameters.AddWithValue("@Source", textBox1.Text);
                cmd.Parameters.AddWithValue("@Destination", textBox2.Text);

                con.Open();
                object o  = cmd.ExecuteScalar();
                if(o != null && o != DBNull.Value)
                {
                   string price = (string) o; //please cast the return type as required
                   textBox3.Text = price;
                }
                con.Close();
            }
        }
    } 
```

# php - How to make this tree generation faster(doctrine2+extension)?

> ID：11489830
> 
> 赞同：0
> 
> 时间：2012-07-15T06:08:52.443
> 
> 标签：php, mysql, symfony, tree, doctrine-orm

I am using DoctrineExtensions for managing a nested tree(nested tree behavior). I have to import 10-20K records from a csv file and store them in the database.

I created a service for this task which makes a bunch of new categories(tree nodes), sets the parents of these categories and persists them and in the end I call EntityManager#flush method to save the created categories into the database.

According to my logic, the process should go like this:

1.  The extension calculates the data needed for each node(right, left, level etc.)
2.  Doctrine makes a query in which it inserts all the data, similarly to this:

    ```
    INSERT INTO table (field1, field2, parent_id, root, left, ...) VALUES
    (fields of 1st record),
    (fields of 2st record),
    ... 
    ```

However, Doctrine inserts each record separately, additionally root, left and right values get updated during the flush causing a huge amount of update queries to be needed.

For inserting 70 categories, I needed ~250 queries, when I wanted to add 500 categories, the program terminated due to memory shortage.

How could I optimize the process? Of course I could write it from scratch, but I'd really love to use this superb extension.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T15:08:24.880

我的解决方案是使用物化路径树而不是嵌套树。我知道，这不是这个问题的真正解决方案，但是它可以有效地工作。如果您有更好的解决方案，请发布，我可能会接受它作为解决方案。

# wpf - 自定义 WPF 功能区

> ID：11489838
> 
> 赞同：1
> 
> 时间：2012-07-15T06:10:08.177
> 
> 标签：wpf, customization, ribbon, ribboncontrolslibrary

我想自定义普通的 WPF 功能区布局。如下图我想去掉ribbon控件的命令区。

![在此处输入图像描述](../Images/026124a5b880d4d7c2495382d3b12e4f.png)

请提出任何方法来实现这一点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-15T06:34:14.097

我从这个[链接得到了解决方案](https://stackoverflow.com/questions/6265392/wpf-ribbon-hide-quick-access-toolbar)

```
 void ribbon_Loaded(object sender, RoutedEventArgs e)
    {
        Grid child = VisualTreeHelper.GetChild((DependencyObject)sender, 0) as Grid;
        if (child != null)
        {
            child.RowDefinitions[0].Height = new GridLength(0);
        }
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-11-20T13:18:23.443

如果要移动快速访问工具栏间距，可以将主窗口更改为[`RibbonWindow`](https://docs.microsoft.com/en-us/dotnet/api/system.windows.controls.ribbon.ribbonwindow?view=netframework-4.7.2). 这会将快速访问工具栏移动到顶部标题栏。如果没有项目，它将被隐藏。

XAML：

```
<ribbon1:RibbonWindow x:Class="Example.MainWindow"
   xmlns:ribbon1="clr-namespace:System.Windows.Controls.Ribbon;
      assembly=System.Windows.Controls.Ribbon"
   ... 
```

代码隐藏：

```
namespace Example
{
   public partial class MainWindow : RibbonWindow
   {
      ... 
```

# html - problems in setting bg image according to screen resolution

> ID：11489839
> 
> 赞同：0
> 
> 时间：2012-07-15T06:10:09.523
> 
> 标签：html, css, image, resolution

I'm currently developing a website. I'm using an `img` in HTML file with dimensions 1466x530\. It works fine on laptop (1366x768) but it is kind of zoomed in desktop (1024x768). Also the pages that were perfect in laptop resolution are zoomed in desktop. Could you help me please.

```
.center-shadow {background:url(../images1/center-shadow.png) center top no-repeat; } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T12:34:36.547

是的，它发生了，因为 1480x530 是 1024 分辨率的更大图像，因此它看起来是缩放的，对于您以像素为单位设置大小的字体也是如此，它在不同的屏幕上往往看起来不同的大小。

如果您想在所有屏幕上以相同的比例显示您的网站，您必须使用媒体查询或设置它在所有屏幕上看起来最好的方式。

谢谢马诺吉索尼

# jsfiddle - 是我还是jsfiddle在这里搞砸了？

> ID：11489840
> 
> 赞同：0
> 
> 时间：2012-07-15T06:10:26.320
> 
> 标签：jsfiddle

[这个小提琴](http://jsfiddle.net/mplungjan/Mzf7P/)

翻译成[这个页面](http://jsfiddle.net/mplungjan/Mzf7P/show/)

这给了我一个看起来像这样的脚本：

```
<script type="text/javascript">//<sels.length="";i=""++) {
  if="" (sels=""[i=""].name="".indexOf=""("-Car=""") != -1="") {
    IDs="".push=""(sels=""[i=""].name="".split=""("-")[0=""]);
  }
}
form="".onsubmit="function()" {
  var="" atLeastOne="false,id,error="",fieldToFocus;"
  for="" (var="" i="0;i<IDs.length;i++)" {
    id="IDs[i];"
    var="" sel1="this.elements[id+"-Car"];"
    var="" sel2="this.elements[id+"-AgeGroup"];" 
```

我在我的 iPad 上编辑，所以我很难看出问题出在哪里。

我知道这是一个本地化的问题，所以如果它离题了，请道歉

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T08:49:11.900

对我来说，它看起来像这样，所以一切都很好：

```
<script type='text/javascript'>//<![CDATA[ 

    window.onload=function() {
      var IDs = [],
      form = document.getElementById("form1"),
      sels = form.getElementsByTagName("select"); 
```

# latex - 没有 \(.....\) 的 MathJax 渲染

> ID：11489843
> 
> 赞同：0
> 
> 时间：2012-07-15T06:10:42.377
> 
> 标签：latex, mathjax

我想知道我是否可以使用 MathJax 来呈现 LaTeX 符号，而无需在 LaTeX 符号周围封装 \(....\) 。例如 \frac{2}{3} 而不是 \(\frac{2}{3}\) 如果是这样，我该如何设置它？

非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T00:16:59.860

MathJax 需要某种方式来明确界定页面上的数学。如果你不使用`\(...\)`，那么你必须使用其他东西。您可以[将 MathJax 配置](http://docs.mathjax.org/en/latest/configuration.html)为使用您想要的任何字符串，但必须有一些东西。例如，您如何期望 MathJax 将其识别`x+1`为数学，或者只是变量`a`？需要有一些分隔符。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T16:34:29.070

`$`我喜欢用一对as in来围绕 tex 代码`$\frac{2}{3}$`进行内联数学。

# sql - Can part of a composite primary key be used as part of a composite primary key on another table?

> ID：11489844
> 
> 赞同：1
> 
> 时间：2012-07-15T06:11:05.837
> 
> 标签：sql, many-to-many

I am trying to figure out how to create this relationship. It is for employees that participate in an incentive program. They can participate multiple years and also be doing the same job. So it is a many to many relationship. I also need to be able to get the records by the year. So is this the best way? Is is even possible?

**Employee Table:**

```
EmpID PK
Year PK 
```

**Job Table:**

```
JobID PK
Year  PK 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T08:09:49.687

对于多对多关系，标准方法是创建一个单独的表（mysql 语法）：

```
CREATE TABLE employee_job
( empl_id integer not null,
  job_id integer not null,
  foreign key (empl_id) references employee(empl_id),
  foreign key (job_id) references job(job_id)
) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-15T09:04:06.290

如果你只是想存储哪个员工在哪一年参加了什么工作，可以有一个更简单的设计：

```
Employee        
--------
EmpID PK

Job
--------
JobID PK

Year (optional)
--------
Year  PK

Participation        
-------------
EmpID PK, FK1
JobID PK, FK2
Year PK, FK3  (the FK3 is optional) 
```

* * *

如果您还想在单独的表中存储哪些工作在哪一年有效/可用，哪些员工在哪一年受雇（例如，如果您的员工受雇了几年但没有参与任何工作，或者如果您的工作是可用但没有人在其中工作），您可以使用您建议的更复杂的设计：

```
Employee        
--------
EmpID PK

Job
--------
JobID PK

Year
--------
Year  PK

Employment
----------
EmpID PK, FK 
Year PK, FK

JobActivity
-----------
JobID PK, FK 
Year PK, FK

Participation        
-------------
EmpID PK, FK1
JobID PK, FK2
Year PK, FK1, FK2 
```

FK1 将参考`Employment(EmpID, Year)`，FK2 将参考`JobActivity(JobID, Year)`

# java - How to return index of Object array used by JOptionPane for use in a switch statement?

> ID：11489845
> 
> 赞同：1
> 
> 时间：2012-07-15T06:11:15.707
> 
> 标签：java, arrays, joptionpane

I am experimenting with variations on the dialog box tutorial on Oracle. I felt that the number of options I offered resulted in too many buttons so I converted from OptionDialog to InputDialog and used an Object array. Now, however, my switch statement (in replyMessage) doesn't work because of the change in data type. How do I get the index in the Object array corresponding to the user's selection?

```
Object answer;        
    int ansInt;//the user'a answer stored as an int

    Object[] options = {"Yes, please",
            "No, thanks",
            "No eggs, no ham!",
            "Something else",
            "Nothing really"
        };//end options
    answer = JOptionPane.showInputDialog(null, "Would you like some green eggs to go with that ham?",
        "A Silly Question",
        JOptionPane.QUESTION_MESSAGE,
        null,
        options,
        options[2]);

    ansInt = ;//supposed to be the index of user's seleection   

    replyMessage(ansInt); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-15T06:32:26.130

`showInputDialog`将返回用户输入的字符串，它是`options`数组中的字符串之一。知道选择了哪个索引的最短方法是在`options`数组上循环并找到相等性：

```
for(i = 0; i < options.length; i++) {
  if(options[i].equals(answer) {
    ansInt = i;
    break;
  }
} 
```

另一种可能性是有一个键/值映射：

```
Map<String, Integer> optionsMap = new HashMap<String, Integer>();
options = optionsMap.keySet().toArray();
... Call the dialog ...
ansInt = optionsMap.get(answer); 
```

如果选项数量较少，则第一个选项很好。如果您有很多选择，则第二种解决方案的性能会好很多。为了获得更好的性能，您可以缓存`optionsMap`and`options`数组。

# bash - Run cron job using emacsclient but if no server currently open run with emacs --batch mode

> ID：11489846
> 
> 赞同：2
> 
> 时间：2012-07-15T06:11:18.757
> 
> 标签：bash, emacs, crontab, org-mode, emacs24

Due to emacs interlocking files I want to run org-mobile command via cron but using the emacsclient:

```
emacsclient -nw --eval "(org-mobile-pull)" --eval "(org-mobile-push)" 
```

but if there is no emacs server running I want the command to run using emacs batch mode:

```
emacs --batch --eval "(org-mobile-pull)" --eval "(org-mobile-push)" 
```

I'm not sure how to accomplish this so curious if anyone has any ideas.

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-15T06:58:55.837

我很好奇你最终想要完成什么？为什么不总是启动一个新的 Emacs 进程呢？额外的开销将是几分之一秒

在我 2 岁的 MBP 上：

> % time emacs --batch --eval nil emacs --batch --eval nil 0.03s user 0.01s system 87% cpu 0.054 total

沿着当前路径，您可以检查退出代码`emacsclient` 以决定是否应该批量运行

```
if emacsclient --eval nil >/dev/null 2>&1; then echo "run client"; else echo "run emacs"; fi 
```

编辑：我看到你想编写一个脚本来回答锁盗问题。查看我对这个[问题](https://stackoverflow.com/questions/9608715/how-to-make-emacs-lock-buffer-fail-when-it-cannot-lock-a-file/9620663#9620663)的回答`ask-user-about-lock`以解决这个问题。

编辑：所以想法是重新定义`ask-user-about-lock`返回 t。请参阅文档：

> ask-user-about-lock 是 `userlock.el' 中自动加载的 Lisp 函数。
> 
> （询问用户关于锁定文件对手）
> 
> 询问用户当他想编辑 FILE 但它被 OPPONENT 锁定时该怎么办。这个函数可以选择做三件事： do (signal 'file-locked (list FILE OPPONENT)) 避免编辑文件 return t （抓住文件的锁） return nil （编辑文件，即使它是锁定）。您可以重新定义此功能，以您喜欢的任何方式在这三个选项中进行选择。
> 
> [背部]

脚本示例（记得 chmod）

```
#!/usr/bin/env emacs --script

(defun ask-user-about-lock (file opponent)
  t)

(org-mobile-pull)
(org-mobile-push) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-15T06:53:16.273

如果服务器未运行，`emacsclient`则返回错误代码。如果您确定要正常退出的代码`eval`，`emacsclient`那么以下应该可以工作：

```
emacsclient -nw --eval "(org-mobile-pull)" --eval "(org-mobile-push)" 2>/dev/null || emacs --batch --eval "(org-mobile-pull)" --eval "(org-mobile-push)" 
```

但是请注意，这种简单的方法会丢弃您可能感兴趣的潜在错误消息（但仅在`emacsclient`运行的情况下）。

# c++ - 使用 boost::regex 编译简单代码

> ID：11489849
> 
> 赞同：1
> 
> 时间：2012-07-15T06:11:54.770
> 
> 标签：c++, boost, boost-regex

我在编译以下代码时遇到问题：

```
#include <iostream>
#include <string>
#include <boost/regex.hpp>

using namespace std;

int main()
{
  string s;
  boost::regex re("^{(APPLE|ORANGE),(\\d*)}$");
  boost::cmatch matches;

  while(true)
  {
    cout << "String: ";
    cin >> s;
    if(boost::regex_match(s.c_str(), matches, re))
    {
      for(int i=1; i<matches.size(); i++)
      {
        string match(matches[i].first, matches[i].second);
        cout << "match[" << i << "]:  " << matches[i] << endl;
      }

    }
    else
    {
      cout << "no match" << endl;
    }
  }
  return 0;

} 
```

我使用以下行用 g++ 编译：

```
g++ regexp_test.cpp -o regexp_test.o 
```

也试过：

```
g++ -lboost_regex regexp_test.cpp -o regexp_test.o 
```

但我收到了这个很长的错误：

> /tmp/ccyEpQIk.o: 在函数`bool boost::regex_match<char const*, std::allocator<boost::sub_match<char const*> >, char, boost::regex_traits<char, boost::cpp_regex_traits<char> > >(char const*, char const*, boost::match_results<char const*, std::allocator<boost::sub_match<char const*> > >&, boost::basic_regex<char, boost::regex_traits<char, boost::cpp_regex_traits<char> > > const&, boost::regex_constants::_match_flags)': regexp_test.cpp:(.text._ZN5boost11regex_matchIPKcSaINS_9sub_matchIS2_EEEcNS_12regex_traitsIcNS_16cpp_regex_traitsIcEEEEEEbT_SA_RNS_13match_resultsISA_T0_EERKNS_11basic_regexIT1_T2_EENS_15regex_constants12_match_flagsE[bool boost::regex_match<char const*, std::allocator<boost::sub_match<char const*> >, char, boost::regex_traits<char, boost::cpp_regex_traits<char> > >(char const*, char const*, boost::match_results<char const*, std::allocator<boost::sub_match<char const*> > >&, boost::basic_regex<char, boost::regex_traits<char, boost::cpp_regex_traits<char> > > const&, boost::regex_constants::_match_flags)]+0x4c): undefined reference to`boost::re_detail::perl_matcher >, boost::regex_traits > >::match()' /tmp/ccyEpQIk.o: 在函数`boost::basic_regex<char, boost::regex_traits<char, boost::cpp_regex_traits<char> > >::assign(char const*, char const*, unsigned int)': regexp_test.cpp:(.text._ZN5boost11basic_regexIcNS_12regex_traitsIcNS_16cpp_regex_traitsIcEEEEE6assignEPKcS7_j[boost::basic_regex<char, boost::regex_traits<char, boost::cpp_regex_traits<char> > >::assign(char const*, char const*, unsigned int)]+0x22): undefined reference to`boost::basic_regex >::do_assign(char const*, char const*, unsigned int)' /tmp/ccyEpQIk.o: 在函数`boost::re_detail::perl_matcher<char const*, std::allocator<boost::sub_match<char const*> >, boost::regex_traits<char, boost::cpp_regex_traits<char> > >::perl_matcher(char const*, char const*, boost::match_results<char const*, std::allocator<boost::sub_match<char const*> > >&, boost::basic_regex<char, boost::regex_traits<char, boost::cpp_regex_traits<char> > > const&, boost::regex_constants::_match_flags, char const*)': regexp_test.cpp:(.text._ZN5boost9re_detail12perl_matcherIPKcSaINS_9sub_matchIS3_EEENS_12regex_traitsIcNS_16cpp_regex_traitsIcEEEEEC2ES3_S3_RNS_13match_resultsIS3_S6_EERKNS_11basic_regexIcSA_EENS_15regex_constants12_match_flagsES3_[_ZN5boost9re_detail12perl_matcherIPKcSaINS_9sub_matchIS3_EEENS_12regex_traitsIcNS_16cpp_regex_traitsIcEEEEEC5ES3_S3_RNS_13match_resultsIS3_S6_EERKNS_11basic_regexIcSA_EENS_15regex_constants12_match_flagsES3_]+0xb3): undefined reference to`boost::re_detail::perl_matcher >, boost::regex_traits >::construct_init(boost::basic_regex > > const&, boost:: regex_constants::_match_flags)' collect2: ld 返回 1 退出状态

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-15T06:17:18.873

也许你没有 boost 二进制文件，代码在这里用`-lboost_regex`. 此外，大括号用于重复模式。例如 \d{3} 表示三位数，因此您可能需要将正则表达式更改为：

`boost::regex re("^(APPLE|ORANGE),(\\d*)$");`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-05-24T09:57:51.890

下载 boost 库，然后只有 -lboost_regex 可以工作

如果您使用的是 ubuntu，那么在终端中输入它会安装所有的 boost 库。

```
'sudo apt-get install libboost-all-dev' 
```

并按照 perreal 所说的进行更改。

# java - How to show all the content of Jtable in netbeans

> ID：11489850
> 
> 赞同：0
> 
> 时间：2012-07-15T06:12:05.003
> 
> 标签：java, swing, netbeans, jtable

Using netbeans I was able to show the content of my database using Jtable, but the problem is that when I run the file I got the Jtable but not all of the content of the indivdual record appear entirely. Because some columns has a paragraph entry not a few words

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-15T09:30:49.870

您必须能够知道 jtable 使用的行数和文本高度。从那里您可以设置行高（全局用于表或单个行）。

然后，您需要一个能够显示多行内容的表格单元格渲染器。

根据您的要求，您可能会更好地显示单元格的单行摘要并允许工具提示显示完整内容（取决于 te 内容的大小）或带有不可编辑文本组件的弹出窗口

**更新**

对不起，我的简短评论，我在我的 iPad 上。

您有两种选择，具体取决于您的 UI 所处的状态。您可以从 JTables 图形上下文中获取对 FontMatrics 的引用。这仅在 JTable 已实现（在屏幕上呈现）时才有效

```
FontMetrics fm = myTable.getFontMetrcis(myTable.getFont());
int height = fm.getHeight(); 
```

当然，此示例假定您使用与 JTable 相同的字体。如果没有，您需要提供正确的字体。

或者，如果 UI 尚未实现，您将需要构建兼容的图像并从中提取字体指标。这有点复杂，因为它开始处理图形配置和设备......

```
BufferedImage img = GraphicsEnvironment.getLocalGraphicsEnvironment().getDefaultScreenDevice().getDefaultConfiguration().createCompatibleImage(1, 1, Transparency.TRANSLUCENT);

Graphics2D g2d = img.createGraphics();
FontMetrics fm = g2d.getFontMetrics(font);
int height = fm.getHeight();
g2d.dispose(); 
```

一旦你有了字体的高度，你应该能够计算文本的高度，假设文本被分成几行（或者你可以自己拆分这些行）。现在，如果不是这种情况（或者您想提供自己的文字/换行），这将变得越来越复杂。

您可以在此处查看[http://docs.oracle.com/javase/tutorial/2d/text/drawmulstring.html](http://docs.oracle.com/javase/tutorial/2d/text/drawmulstring.html)以了解如何使用 graphics2D 呈现文本以获取提示（您可以使用它根据需要将文本分成组）

您可能还想查看[http://www.jroller.com/santhosh/entry/multiline_in_table_cell_editing1](http://www.jroller.com/santhosh/entry/multiline_in_table_cell_editing1)，它显示了多行编辑器的好主意。

# jquery - Cant prevent a link click with jquery

> ID：11489857
> 
> 赞同：1
> 
> 时间：2012-07-15T06:13:54.377
> 
> 标签：jquery

I have got this html:

```
<a href="http://www.google.com"  data-ref="su1c2cess" class="Wifewriting" id="target_site_to_visit">
    <span data-app-id="63" class="btn" id="visit_site" style="right:22px; top:65px; padding:5px;z-index: -99999;">VISIT SITE</span>
</a> 
```

**UPDATE** And this is my jQuery:

```
 $(document).ready(function(){
         $('body').on('click','#target_site_to_visit',function(event){
           var appName=$('#target_site_to_visit').attr('class');
           var referrer=$('#target_site_to_visit').attr('data-ref');
          $.post('db/update_site_viewed.php',{ name:appName, ref:referrer }, function(data){

      throw new Error("AppName: "+appName);

      },'html').error(function(data){

      throw new Error("Error: "+data.responseText);
      });
    // document.location.href=$('#target_site_to_visit').attr('href');
return false;
  });

}); 
```

The `event.preventDefault();` does nothing in stopping the link from being triggered.. why?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-15T06:25:50.777

从[jQuery.on](http://api.jquery.com/on/)文档中，我会确保您的函数返回 false。

> 从事件处理程序返回 false 将自动调用 event.stopPropagation() 和 event.preventDefault()。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-15T06:51:32.337

只要您的控制台和有效标记中没有错误，`return false`就会阻止事件的默认操作并防止它冒泡您所知道的 DOM。

```
$(document).ready(function(){
    $('body').on('click','#target_site_to_visit',function(event){
        var appName=$('#target_site_to_visit').attr('class');
        var referrer=$('#target_site_to_visit').attr('data-ref');
        $.post('db/update_site_viewed.php',{ name:appName, ref:referrer }, function(data){
            throw new Error("AppName: "+appName);
        }, 'html').error(function(data){
            throw new Error("Error: "+data.responseText);
        });
        return false;
    });
}); 
```

要使用获取的数据，请使用[`$.post`](http://api.jquery.com/jQuery.post/)返回获取数据的回调函数中的第一个参数：

```
$.post('db/update_site_viewed.php',{ name:appName, ref:referrer }, function(data){
        console.log(data); //<-- fetched html will be displayed in the console
}, html); 
```

在回调函数内部，您可以使用[`.html()`](http://api.jquery.com/html/)，[`.append()`](http://api.jquery.com/append/)以及类似的方法将数据添加到 DOM，以及能够将其作为字符串进行操作，通过将`data`jQuery 对象包装在内部来获取它的子元素`$(data)`，以及，做基本上你想要的一切。

[参考](http://api.jquery.com/jQuery.post/)

# java - Handling horizontal scroll

> ID：11489858
> 
> 赞同：0
> 
> 时间：2012-07-15T06:14:16.713
> 
> 标签：java, android, scroll

In a `ScrollView`, I want to implement horizontal scrolling. To do so, I listen to the `MotionEvents` sent when fingers touch the screen or move onto it. It works pretty well, except when I unwillingly combine a vertical move with the horizontal one. I noticed that the vertical move interrupts the string of `ACTION_MOVE` by placing an `ACTION_CANCEL` event. And after it, no more `ACTION_MOVE` events are generated.

How can I do to prevent those vertical moves from cancelling the emission of `ACTION_MOVE` events?

Thanks in advance for the time you will spend trying to help me.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T06:28:38.277

您希望垂直内的子视图`Scrollview`调用这行代码：

```
getParent().requestDisallowInterceptTouchEvent(true); 
```

查看此 SO 帖子以获取更多信息：[如果孩子返回 false，则让父视图假设 MotionEvents](https://stackoverflow.com/questions/7324490/let-parent-view-assume-motionevents-if-child-returns-false)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-15T06:27:32.743

你为什么不直接使用[Horizo​​ntalScrollView](http://developer.android.com/reference/android/widget/HorizontalScrollView.html) 这就是这些东西的目的。

# maven - What are Maven plugin extractors?

> ID：11489860
> 
> 赞同：2
> 
> 时间：2012-07-15T06:14:50.673
> 
> 标签：maven, maven-plugin, extractor

In the configuration of a maven plugin's build, where you are specifying configuration for the "maven-plugin-plugin" there is something called an extractor. I also see it when building the plugin (`Applying extractor for language: java`).

In [this page](http://maven.apache.org/plugin-tools/) it specifies many different extractors, but doesn't give a very clear explanation of what they are?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T09:21:13.320

在这个意义上的提取器负责提取插件的描述，如参数、注入器等，这些描述由[javadoc 定义的东西](http://maven.apache.org/plugin-tools/maven-plugin-tools-java/index.html)或[注释](http://maven.apache.org/plugin-tools/maven-plugin-tools-annotations/index.html)或[类似 ant 的插件](http://maven.apache.org/plugin-tools/maven-plugin-tools-model/plugin-metadata.html)：

```
@parameter
@goal 
```

它们目前存在于 Java 和 BeanShell 中。

# objective-c - iCloud sync keychain

> ID：11489864
> 
> 赞同：10
> 
> 时间：2012-07-15T06:16:59.303
> 
> 标签：objective-c, ios, cocoa-touch, icloud

In my app, I want to be able to sync a configuration that gets created by the user. I wanted to use iCloud to sync that configuration so that it is always the same on all devices. But, I use the keychain to store the password.

Is there a way to also sync keychain data?

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-10-27T18:41:34.763

iCloud 钥匙串是 iOS 7.0.3 和 OS X Mavericks 10.9 中的一项新功能。`kSecAttrSynchronizable`使用 SecItem API 添加钥匙串项时指定属性。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2015-09-16T10:43:00.503

这些是我为钥匙串制作的实用方法。kSecAttrSynchronizable 是 iCloud 同步工作的原因。希望他们有所帮助。

*   钥匙串查询。
*   除去项目
*   删除项目
*   保存项目
*   加载项目

    ```
    + (NSMutableDictionary *)getKeychainQuery:(NSString *)service {
        return [NSMutableDictionary dictionaryWithObjectsAndKeys:
                (__bridge id)kSecClassGenericPassword, (__bridge id)kSecClass,
                service, (__bridge id)kSecAttrService,
                service, (__bridge id)kSecAttrAccount,
                service, (__bridge id)kSecAttrSynchronizable,
                (__bridge id)kSecAttrAccessibleAfterFirstUnlock, (__bridge id)kSecAttrAccessible,
                nil];
    }

    + (void)save:(NSString *)service data:(id)data {
        NSMutableDictionary *keychainQuery = [self getKeychainQuery:service];
        SecItemDelete((__bridge CFDictionaryRef)keychainQuery);
        [keychainQuery setObject:[NSKeyedArchiver archivedDataWithRootObject:data] forKey:(__bridge id)kSecValueData];
        SecItemAdd((__bridge CFDictionaryRef)keychainQuery, NULL);
    }

    + (void)remove:(NSString *)service {
         NSMutableDictionary *keychainQuery = [self getKeychainQuery:service];
         SecItemDelete((__bridge CFDictionaryRef)keychainQuery);
    }

    +(NSString *)keychainItem:(NSString *)service{
        id data = [self load:service];

        if([data isKindOfClass:[NSString class]]){
            return data;
        }
        return @"";
    }

    + (id)load:(NSString *)service {
        id ret = nil;
        NSMutableDictionary *keychainQuery = [self getKeychainQuery:service];
        [keychainQuery setObject:(id)kCFBooleanTrue forKey:(__bridge id)kSecReturnData];
        [keychainQuery setObject:(__bridge id)kSecMatchLimitOne forKey:(__bridge id)kSecMatchLimit];
        CFDataRef keyData = NULL;
        if (SecItemCopyMatching((__bridge CFDictionaryRef)keychainQuery, (CFTypeRef *)&keyData) == noErr) {
            @try {
                ret = [NSKeyedUnarchiver unarchiveObjectWithData:(__bridge NSData *)keyData];
            }
            @catch (NSException *e) {
                NSLog(@"Unarchive of %@ failed: %@", service, e);
             }
            @finally {}
        }
        if (keyData) CFRelease(keyData);
        return ret;
    } 
    ```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-15T11:44:24.933

不，钥匙串同步不是 iCloud 的一部分。它是 dot mac 同步的一部分，但不再可用。

可能会有关于这是否是一个好主意的反馈（自动将密码从一台设备移动到另一台设备），特别是在多人共享一个 iCloud 帐户的情况下（可能，但现在不能保证）。

如果您认为将密码存储在设备的钥匙串上（因此要求用户在每台设备上至少输入一次），那么您将需要提供自己的加密和安全性并将数据直接存储在 iCloud 中，例如在密钥库。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-11-10T02:29:39.500

想做同样的事情，还没有尝试过，但这看起来很有帮助：[https ://github.com/iosengineer/BMCredentials](https://github.com/iosengineer/BMCredentials)

# objective-c - Is it possible to know an array (or arrays) which adding an object?

> ID：11489865
> 
> 赞同：0
> 
> 时间：2012-07-15T06:17:02.050
> 
> 标签：objective-c

Follow is some code for example.

```
 NSArray *test1 = [[NSArray alloc] initWithObjects:@"TEST", nil];
    [someArray addObject:test1];
:
:
too many code lines.
:
:
At some place
   NSArray *addingArray = [test1 whoisAddingOrContainingMe(?)]; 
```

I want to know a pointer of someArray as method of test1 instance.

Is there a method like this?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-15T11:16:01.677

不，您不能“反向查找”您所在的容器。

从设计的角度来看，这会有些困难，因为从概念上讲，在“数组”、任何其他容器或任何其他不被视为容器的对象中引用自己没有区别。因此，您必须通过传递一个额外的“所有者”参数来记录每个“保留”，并且由于保留和释放可以在截然不同的地方完成，您还需要传递“所有者”指针，以便最终的“释放” " 可以指适当的保留。或者，简而言之：这将是一个巨大的混乱:-)

如前所述，如果您知道哪些数组实际上可以包含您——这对您的应用程序来说应该更容易——您可以检查它们。或者，您可以向对象添加一个列表以记录它们被添加的位置，可能通过“addTo:”和“removeFrom:”等方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-15T06:27:08.373

我认为你想要 NSArray 的`-containsObject:`方法。

# asp.net - 主页未在浏览器中打开

> ID：11489867
> 
> 赞同：0
> 
> 时间：2012-07-15T06:17:21.647
> 
> 标签：asp.net, xml

在asp.net中创建Default.aspx；
并在windows中打开文件夹。
右键单击 Default.aspx，然后单击 OpenWidth，然后单击 Internet Explorer。
打开时。view:

"
XML 页面无法显示 无法使用 XSL 样式表查看 XML 输入。请更正错误，然后单击“刷新”按钮，或稍后重试。

* * *

名称以无效字符开头。错误处理资源 'file:///G:/My Programming/Asp/My Project (90)/Defa...

<%@ Page Language="C#" AutoEventWireup="true" CodeFile="Default.aspx.cs" Inherits="_Default" %> -^
"

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-15T07:13:00.113

.aspx 页面是 ASP.NET 服务器端页面，这意味着它们在服务器上呈现并将结果返回给 webbrowser

因此，您不能通过目录路径调用它们，您需要将它们托管在网络服务器上，然后通过 Wepath 调用它们，例如 localhost/test.aspx

请阅读演练，它将提供有关 ASPX 所需一切的信息[http://msdn.microsoft.com/en-us/library/1y1404zt(v=vs.90).aspx](http://msdn.microsoft.com/en-us/library/1y1404zt(v=vs.90).aspx)

# javascript - 关于将预样式类添加到动态创建的元素或在其中添加样式的意见然后

> ID：11489870
> 
> 赞同：0
> 
> 时间：2012-07-15T06:18:13.140
> 
> 标签：javascript, css, web-applications, dynamic, styling

在我们的 Web 应用程序中，有很多效果飞来飞去。我们正在切换到动态创建尽可能多的元素，请阅读：当需要时，尽可能。

我对我喜欢在元素上使用的这种技术感到好奇，即在样式表中创建一个具有 css 样式的类，然后当使用 js 创建元素时，我只是将类添加到元素中以赋予其样式css 文件。

这真的是最好的方法还是在 javascript (element.style = *) 中给出样式会更好？

请注意，在我们的案例中，内存非常重要，因此无论使用更少的内存和渲染负载都会更好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T06:24:00.687

这取决于具体情况。如果您有一个元素的设置样式，您只需打开和关闭它，那么添加/删除一个类就是要走的路。但是，如果您一直在更改样式（即在动画中），那么修改样式会更好。在内存方面，添加/删除类可能会更节省内存。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-15T06:24:21.017

将其放在单独的样式表中通常被认为是可维护性、内容与逻辑分离等所有好东西的最佳实践。

但是您特别提到对您非常重要的内存使用和渲染时间可能是另一回事。

您可以使用大多数现代浏览器中内置的 Web 开发人员工具（例如，Chrome 开发人员工具）来尝试内存和渲染时间的方法和配置文件。在 Chrome 开发工具中，选择时间轴，点击底部的记录按钮，加载您的页面，在页面上做一些与您相关的事情，停止记录，并检查内存使用情况和加载时间。

如果您关心的是动画，您可能需要安装 Chrome Canary，它在 Timelines 下有第三个选项（除了 Timelines 和 Memory），类似于 Frames。

# xml - 在c#中获取xml节点值和偏移量

> ID：11489878
> 
> 赞同：0
> 
> 时间：2012-07-15T06:19:15.280
> 
> 标签：xml, parsing, offset

我解析了一个可能包含 xml 表定义的通用字符串。我应该解析表格并获取与字符串开头相关的值的偏移量。例如：

```
This is general string to be analyzed.
<table>
   <row>
     <cell>John</cell>
     <cell>Jenifer</cell>
   <row>
 <table>
 More free text to analyze. 
```

我应该得到值：John 和 Jenifer，并从字符串的开头得到它们的偏移量。John 偏移量为 53，Jenifer 偏移量为 70（或多或少）。另外我应该得到`<table>`标签的偏移量（示例中为 39）。

可以使用 XElement 解析 xml，但它没有关于偏移量的信息。使用提供偏移信息的正则表达式很难解析这样的结构，它可能只包含：`<table/>` 有没有人知道如何做到这一点？

提前致谢...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-15T08:30:15.653

请使用**[StAX](http://en.wikipedia.org/wiki/StAX) Parser**获取任何元素的偏移量。

# linq - 如何迭代由 LINQ 生成的动态 IQueryable 类？

> ID：11489883
> 
> 赞同：1
> 
> 时间：2012-07-15T06:20:50.660
> 
> 标签：linq, select, dynamic-data, iqueryable

我有一个这样的查询：

```
var xx = tt.Select("new(t as Id)"); 
```

在哪个`Select`子句来自`System.Linq.Dynamic`。

结果`xx`是一个动态类，我需要像这样迭代它的项目：

```
foreach(var item in xx) {
    // do some thing with item.Id
} 
```

什么是最好的方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-14T01:47:30.453

尝试下一个代码示例：

```
using System.Linq.Dynamic;

var xx = tt.Select("new(t as Id)"); 

foreach(dynamic item in xx) { 
    // do some thing with item.Id 
} 
```

# ruby-on-rails - 设计 gem 和用户模型

> ID：11489887
> 
> 赞同：1
> 
> 时间：2012-07-15T06:21:43.577
> 
> 标签：ruby-on-rails, devise

设计的示例和教程说我在用户模型中有这样的东西：

```
attr_accessible :name, :password, :password_confirmation, :remember_me 
```

所以我对此有两个问题。

1.  为什么我应该使“名称”和“密码”可访问？我希望他们受到保护，设计是否让我改变这一点？

2.  用户模型中的“password_confirmation”和“remember_me”等字段到底是做什么的？现在我可以写类似的东西`User.find(1).password_confirmation`，它可以工作，但完全没有意义。

如何处理？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T07:15:32.703

您需要可以访问所有这四个字段才能创建登录和注册表单。您不必担心数据库中的密码字段，它们只是虚拟属性。您可以在模式中确认的数据库中的实际字段实际上是 encrypted_pa​​ssword 和 salt。它实际上是一个功能强大、经过验证且安全的系统。你应该专注于在你的应用程序的其余部分进行创新，让 devise 为你完成它的工作，它做得很好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T07:58:19.803

我想我找到了答案。

1.  设计使用批量分配，您对此无能为力。有一个关于此的 Github 问题：[https](https://github.com/plataformatec/devise/pull/718) ://github.com/plataformatec/devise/pull/718 。我正在研究如何改变 Devise 以避免它依赖于批量分配。我很高兴知道你的意见。

2.  只要 Devise 剥夺了你定义我们的 attr-accessible 列表的权利，你可以做两件事：

    一种。您可以`attr_readonly`与 一起使用`attr_accessible`。它将为设计打开大门，但不会为您的其他表单打开大门，请阅读[Make attributes mass assignable only during creation](https://stackoverflow.com/questions/7376659/make-attributes-mass-assignable-only-during-creation)

    湾。`def mass_assignment_authorizer`允许您定义动态属性可访问列表，请阅读[http://railscasts.com/episodes/237-dynamic-attr-accessible?view=asciicast](http://railscasts.com/episodes/237-dynamic-attr-accessible?view=asciicast)。恕我直言，这种方式对于这类问题来说太过分了。

# android - Android MusicServices 中的 MediaPlay 在调用时崩溃 。暂停（）

> ID：11489889
> 
> 赞同：0
> 
> 时间：2012-07-15T06:22:10.020
> 
> 标签：android, service, android-intent, media-player

在我们的应用程序中，我们有一个 MusicService。目前，它在播放音乐和停止音乐方面工作得非常好，但那是从启动和停止服务开始。我们在其他方法中调用它，但`mp.pause()`除非它被空检查器包围，否则它会崩溃。但是当它检查空值时它根本不起作用。我们之前已经完成了所有这些工作，但我们开始重新格式化这样做的方式，因为`Android 4.0 (ICS)`即使我们停止音乐，音乐也会继续随机播放，但无论如何这不是重点。

```
public class MusicService extends Service {
    public static MediaPlayer mp;

    @Override
    public IBinder onBind(final Intent arg0) {
        return null;
    }

    @Override
    public void onCreate() {
        super.onCreate();
        mp = MediaPlayer.create(this, R.raw.title_music);
        mp.setLooping(true);
        mp.setVolume(200, 200);
    }

    @Override
    public int onStartCommand(final Intent intent, final int flags, final int startId) {
        mp.start();
        return 1;
    }

    @Override
    public void onStart(final Intent intent, final int startId) {

    }

    public IBinder onUnBind(final Intent arg0) {
        return null;
    }

    public static void onStop() {
        mp.stop();
        mp.release();
    }

    public static void onPause() {
        if (mp!=null) {
            mp.pause();
        }
    }

    public static void onResume() {
        if (mp!=null) {
            mp.start();
        }
    }

    @Override
    public void onDestroy() {
          mp.stop();
          mp.release();
          super.onDestroy();
    }

    @Override
    public void onLowMemory() {
        mp.stop();
        mp.release();
    }

} 
```

我们正在使用它在另一个活动中启动服务：

```
intent = new Intent(this, MusicService.class);
    startService(intent); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-28T17:27:06.783

如果没有日志，我不能 100% 肯定地说这是问题所在，但似乎在 mp 处于无效状态时正在调用 pause 方法。我建议你改变你的 onPause 方法，让它看起来像这样。

```
public static void onPause() {
    if (mp!=null) {
        if (mp.isPlaying())
            mp.pause();
    }
} 
```

这将检查它是否真的在播放，并且适用于它所处的任何状态，除了错误状态。至少根据文档。

# ruby-on-rails - json-1.7.3 的 Ruby 包安装错误

> ID：11489891
> 
> 赞同：3
> 
> 时间：2012-07-15T06:22:30.703
> 
> 标签：ruby-on-rails, rubygems

安装 ruby​​ gems 时出现以下错误。我正在使用 Ubuntu

```
Installing json (1.7.3) with native extensions
Gem::Installer::ExtensionBuildError: ERROR: Failed to build gem native extension.

        /usr/bin/ruby1.9.1 extconf.rb
/usr/lib/ruby/1.9.1/rubygems/custom_require.rb:36:in `require': cannot load such file -- mkmf (LoadError)
        from /usr/lib/ruby/1.9.1/rubygems/custom_require.rb:36:in `require'
        from extconf.rb:1:in `<main>'

Gem files will remain installed in /var/lib/gems/1.9.1/gems/json-1.7.3 for inspection.
Results logged to /var/lib/gems/1.9.1/gems/json-1.7.3/ext/json/ext/parser/gem_make.out
An error occured while installing json (1.7.3), and Bundler cannot continue.
Make sure that `gem install json -v '1.7.3'` succeeds before bundling. 
```

我刚刚看到这个链接，不知道如何处理 ubuntu 上的 devkit*.exe 文件。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-15T06:37:58.147

[如此 stackoverflow question](https://stackoverflow.com/questions/7645918/require-no-such-file-to-load-mkmf-loaderror)中所述，您缺少 ruby​​-dev 或 ruby​​-1.9-dev 包。首先安装开发包文件，然后尝试安装 gem。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T04:16:53.167

我遇到了同样的问题，这些修复都没有奏效。

这是有效的。似乎 Ubuntu 的 .bashrc 在顶部附近有这一行：

```
# If not running interactively, stop here.
[ -z "$PS1" ] && return 
```

正如评论所暗示的那样，这到此为止。Capistrano 以非交互方式执行命令，因此当它运行 .bashrc 时，文件的其余部分永远不会被获取。

我的 RVM 线在此下方，因此没有正确设置环境以供 capistrano 捆绑。

这些行应该**高于**上一行：

```
[[ -s "/usr/local/rvm/scripts/rvm" ]] && source "/usr/local/rvm/scripts/rvm" 
```

希望这可以帮助某人。

# php - 表单在php中验证之前提交

> ID：11489892
> 
> 赞同：0
> 
> 时间：2012-07-15T06:22:40.050
> 
> 标签：php, javascript

我有一个我想提交的表单，所以当我点击提交时，它会转到 selectorpage.php 并找到所选的函数类型，例如登录，它进一步调用控制器来执行函数。我遇到的问题是js中有一个名为validateForm（）的函数，只要我单击提交按钮，它就会转到selectorPage.php。我想停止表单提交，通过js进行验证，然后从那里提交表单，我使用了onsubmit = return false; 在表单标签中，但它只是阻止了进一步做任何事情的形式。而且我也不知道如何将表单重定向到 selectorPage 如果它以某种方式在 js 中工作。所以有人想告诉我如何从 js 提交表单，然后将该页面重定向到 selectorPage.php。谢谢

```
<form method="post" action="selector.php?type=login" id="login" id="loginForm">
      <div class="row">
           <div class="offset1 span1">            
                <div class="lbel">
                     <label class="control-label" for "loginName">
                          Username/Email
                     </label>
                </div>
                <div class="lbl_inpuCnt">
                      <input type="text" class="input-xlarge" id="loginName"
                             name="loginName" maxlength="50"/>
                </div>
                <div id="usernameError">&nbsp;</div>
                <div class="lbel">
                      <label class="control-label" for="loginPassword">
                             Password
                      </label>
                </div>
                <div class="controls">
                       <input type="password" class="input-xlarge" 
                               id="loginPassword" name="loginPassword" 
                                maxlength="50"/>
                </div>
                <div id="passwordError">&nbsp;</div><br/>
            </div>
       </div>
       <div style="margin-left: 55px;">
           <input class="btn" style="width: 80px;" type="reset" 
                    name="reset" value="Reset"/>
           <input class="btn" style="width: 80px;" type="submit" 
                    name="submit" value="Login" onclick="validateForm();"/>
       </div>
 </form> 
```

这是根据上面代码的javascript

```
function validateForm(){
    form = document.forms['loginForm'];
    if(document.getElementById('loginName').value == "")
        document.getElementById('usernameError').innerHTML = 'Invalid username or email';
    else{
        document.getElementById('usernameError').innerHTML = "&nbsp";      
    form.submit();
    }
} //suppose it for the email validation only for the time being 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-15T06:29:43.900

你可以试试

```
<form ... onsubmit="return validateForm();" 
```

在`validateForm()`功能使用

```
return true / false 
```

取决于是否发现错误。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-15T09:17:58.867

这是使用内联事件处理的规范方式 - 进一步了解如何使其不引人注目。表单标签上也只有一个 id，也永远不要`submit`在表单中调用任何东西，它是一个保留字，并且会阻止通过脚本提交（这是你试图做的）

```
<form id="loginform" ... onsubmit="return validate(this)">

<div style="margin-left: 55px;">
  <input class="btn" style="width: 80px;" type="reset" name="reset" value="Reset" onclick="clearFields()"/>
  <input class="btn" style="width: 80px;" type="submit"  value="Login" />
</div>
</form> 
```

这是javascript

```
function validateForm(form){ // passing form object
  document.getElementById('usernameError').innerHTML = ""; // reset

  if (form.loginName.value == "") {
    document.getElementById('usernameError').innerHTML = "Invalid username";
    return false;
  }
  return true;// allow submission
} 
```

* * *

选择

```
<form id="loginform" ..... No event handler here ...> 
```

脚本：

```
window.onload=function() {
  document.getElementById("loginform").onsubmit=function() {
    document.getElementById('usernameError').innerHTML = ""; // reset

    if (this.loginName.value == "") { // notice the "this"
      document.getElementById('usernameError').innerHTML = "Invalid username";
      return false;
    }
    return true;// allow submission
  }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-15T06:33:35.877

我自己过去也遇到过类似的问题。

当您单击表单的“登录”按钮时，您将触发两个单独的事件 - 调用“validateForm();” javascript函数，并提交表单本身。这里的问题是，提交表单涉及浏览器将出站请求发送回表单目标，据我所知，一旦触发请求事件，就无法使用 javascript 来终止它。

使用 'onsubmit=return false;' 很可能正在做它应该做的事情 - 退出当前的 javascript 范围（并因此阻止与该特定事件相关联的进一步 javascript 执行）。然而，不幸的是，表单本身的提交虽然可以通过 javascript 触发和控制，但实际上并没有由 javascript 处理，也不是 javascript 函数本身。

根据我的经验，我发现最好的解决方案是使用“按钮”类型输入而不是“提交”类型输入——“提交”和“按钮”都显示为按钮，但“按钮”实际上没有任何默认的固有关联事件操作（因此，当您单击它时实际上并没有做任何事情） - 这意味着，通过事件处理程序（例如'onclick'，就像你所做的那样） ，您可以完全控制用户单击“按钮”时发生的情况。

你没有包括你的 'validateForm();' javascript函数在这里，所以我不知道它包含什么，但是，如果它还没有这样做，我会包含通过该javascript函数提交表单的代码，一旦验证成功（或返回如果验证失败，则会出现某种人类可读的错误） - 结合使用“按​​钮”而不是“提交”应该可以解决您的问题。

希望这可以帮助。:)

编辑：在做出初步答复后不久就想到了这一点。一些浏览器会在通过提交输入类型提交表单之前处理事件处理程序，例如“onclick”；但是，我发现某些较旧的浏览器目前不这样做（因此是我上面帖子的上下文）。对于新的浏览器来说，在表单提交之前处理事件处理程序的结果，如果验证失败，应该可以完全防止第二个事件（表单提交）发生；但是，并非所有浏览器都支持这些结果，我发现有些浏览器会继续提交表单，而不管这些结果如何。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-15T07:55:09.600

好吧，谢谢大家，所以最后我通过你的想法找到了解决方案，这就是我所做的，而不是把 return formvalidate(); 功能我把它放在提交 onclick 事件中，它像魅力一样运行......谢谢

```
<div style="margin-left: 55px;">
                    <input class="btn" style="width: 80px;" type="reset" name="reset" value="Reset" onclick="clearFields()"/>
                    <input class="btn" style="width: 80px;" type="submit" name="submit" value="Login" onclick="return validateForm();"/>
                </div> 
```

这是javascript

```
function validateForm(){
    var form = document.forms['loginForm'];
    if(document.getElementById('loginName').value == "")
        document.getElementById('usernameError').innerHTML = 'Invalid username or email';
    else{
        form.submit();
    }
    return false;
} 
```

# python - 如何让 python zookeeper api 工作？

> ID：11489893
> 
> 赞同：2
> 
> 时间：2012-07-15T06:22:56.103
> 
> 标签：python, apache-zookeeper

我正在尝试让 zookeeper 以独立模式工作以进行 python api 测试，并且遇到了 python api 问题。

1）这是我在 ubuntu 11.04 上的安装方式

```
sudo apt-get install zookeeper
sudo easy_install zc-zookeeper-static
from source install python zc.zk
http://pypi.python.org/packages/source/z/zc.zk/zc.zk-0.9.1.tar.gz 
```

2）这是我启动zookeeper的方式：

```
sudo /usr/share/zookeeper/bin/zkCli.sh -server 127.0.0.1:2181
Connecting to 127.0.0.1:2181
Welcome to ZooKeeper!
JLine support is enabled
[zk: 127.0.0.1:2181(CONNECTING) 0] 
```

3）这是我尝试和使用文档中的python api的方法。

```
import zc.zk
zk = zc.zk.ZooKeeper('localhost:2181')
zk.register_server('/fooservice/providers', ('192.168.0.42', 8080)) 
```

4）这是我得到的python错误。

```
No handlers could be found for logger "ZooKeeper"
Traceback (most recent call last):
  File "/home/ubuntu/workspace/rtbopsConfig/zookeeper/test.py", line 2, in <module>
    zk = zc.zk.ZooKeeper('localhost:2181')
  File "/usr/local/lib/python2.7/dist-packages/zc.zk-0.9.1-py2.7.egg/zc/zk/__init__.py", line 211, in __init__
    raise FailedConnect(connection_string)
zc.zk.FailedConnect: localhost:2181 
```

5）这是日志文件：

```
2012-07-15 14:23:51,666 - INFO  [main-SendThread(localhost:2181):ClientCnxn$SendThread@1000] - Opening socket connection to server localhost/127.0.0.1:2181
2012-07-15 14:23:51,667 - WARN  [main-SendThread(localhost:2181):ClientCnxn$SendThread@1120] - Session 0x0 for server null, unexpected error, closing socket connection and attempting reconnect
java.net.ConnectException: Connection refused
        at sun.nio.ch.SocketChannelImpl.checkConnect(Native Method)
        at sun.nio.ch.SocketChannelImpl.finishConnect(SocketChannelImpl.java:592)
        at org.apache.zookeeper.ClientCnxn$SendThread.run(ClientCnxn.java:1078)
2012-07-15 14:23:53,076 - INFO  [main-SendThread(localhost:2181):ClientCnxn$SendThread@1000] - Opening socket connection to server localhost/127.0.0.1:2181
2012-07-15 14:23:53,077 - INFO  [main-SendThread(localhost:2181):ClientCnxn$SendThread@908] - Socket connection established to localhost/127.0.0.1:2181, initiating session
2012-07-15 14:23:53,165 - INFO  [main-SendThread(localhost:2181):ClientCnxn$SendThread@1114] - Unable to reconnect to ZooKeeper service, session 0x0 has expired, closing socket connection 
```

所以......我是动物园管理员的新手。我想使用 python api 以独立模式启动并运行。阿洛斯，似乎有很多 python zookeeper api。哪一个是最常用的？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-15T07:18:55.613

你在你的 ubuntu 上使用 IPv6 吗？将 localhost 替换为 127.0.0.1，与 zkCli.sh 命令中使用的相同。您可以运行`sudo netstat -lnp|grep 2181`检查 zookeeper 监听的地址。

# c - 链表 - C - 分段错误

> ID：11489896
> 
> 赞同：2
> 
> 时间：2012-07-15T06:23:42.190
> 
> 标签：c, data-structures, linked-list

我试图弄清楚为什么我的程序在调用 ll_print 时会崩溃。[[这是一个非常简单直接的问题，我不确定要真正添加什么来填补解释空白]]

```
 struct ll{
          struct ll* next;
          int n;
        } ll;

   void ll_print(struct ll *l){
      while (l) {
        printf("%d ", l->n);
        l=l->next;
      }
    }

    void ll_fill(struct ll *l, int n){
      struct ll *temp= NULL;
       while (n>0){
        l= (struct ll*)malloc(sizeof(struct ll));
        l->n=n;
        l->next= temp;
        temp=l;
        n--;
      }
     }

    int main(void){
      int i=0;
      struct ll *l;                                                                                                                                          
      ll_fill(l, 10);
      ll_print(l);  /** causing a segmntation fault **/                                                                                                                                                                 
    } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-15T06:29:10.387

发生这种情况是因为`l`指针从未初始化。似乎您希望`ll_fill`初始化它，但您错了 - 它是按值传递的（通过复制读取），并且您`l`在`ll_fill`函数中分配的任何内容都不会为`l`声明的内部分配值`main`。要实现您想要的，请通过`l`指针传递（您将拥有指向指针的指针）。`ll_fill`或者，将其设为and do的返回值`l = ll_fill(l, 10);`。另外，给自己找一个调试器——它会对你有很大帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-15T08:15:50.270

由于您在函数内为指针 l 分配内存，因此您需要传递指针的地址而不是传递指针变量。虽然指针`l`是在函数内部初始化的`ll_fill`，但是当它从函数中出来时作用域就会消失，并且`ll_print(l)`由于找不到指针的地址而引发段错误`l`。

*解决方案 ：*

1.  如果要在函数内部进行初始化，则传递指针的地址。

2.  如果指针由多个共享，则在两个函数的公共范围内声明总是好的（即在 内初始化`main()`）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-15T06:29:28.640

`l`您没有在`main()`函数中填充指向局部变量的指针。相反，您`l`在`ll_fill()`函数中填充参数。考虑`ll_fill`返回被分配的指针的值。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-15T06:33:24.463

当你打电话时`ll_fill(l, 10);`——问问自己， 的价值是`l`什么？当然你在被调用的函数中创建了一个新对象——但是你怎么`main()`知道这个新对象呢？它仍然指向最初（随机）分配给您的局部变量的**未初始化**`l`内存。

尝试将 a`NULL`作为初始值分配给您的`l`：

```
struct ll *l = NULL; 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-15T06:45:28.273

您只是对按值调用的概念感到困惑。您正在将指针按值传递给函数 ll-fill。但是 ll-fill 会制作自己的副本，无论它会做什么更改，它都不会对 main 函数的指针产生任何影响。因此，当您将其传递给 ll_print() 时，由于它没有初始化，因此打印该值只会给您带来分段错误。
使用调试器它会在这种情况下帮助你。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-07-15T10:43:48.393

更改您的 ll_fill 函数定义并按如下方式调用：

```
void ll_fill(struct ll **l, int n){
  struct ll *temp= NULL;
  while (n>0){
    *l= (struct ll*)malloc(sizeof(struct ll));
    (*l)->n=n;
    (*l)->next= temp;
    temp=(*l);
    n--;
  }
}

int main(void){
  int i=0;
  struct ll *l;                                                                 
  ll_fill(&l, 10);
  ll_print(l);  /** now no segmntation fault :) **/                             
} 
```

# c# - 在 DataGridView 中自动构建编号

> ID：11489902
> 
> 赞同：2
> 
> 时间：2012-07-15T06:25:12.753
> 
> 标签：c#, winforms, datagridview

我有一个 DataGridView 并将其绑定到数据库。

我在 DataGridView 中使用以下代码自动创建行号：

```
dgv.Rows[e.RowIndex].Cells[0].Value = e.RowIndex +1; 
```

但结果不行。请帮我建立这个号码。

更新：结果：

```
1      ssss      mmmm
2      tttt      tttt
       rrrrr     rrrr
       tttttt    tttt
.... 
```

所以最后两行没有显示数字。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-15T12:48:48.983

该`RowsAdded`事件对此不起作用 - 尝试向您的事件处理程序添加一些调试输出，您将看到该事件是针对一组行而不是针对单行触发的，这就是为什么您只填写前两个值的原因。

一个更好的地方是在`DataBindingComplete`和`DefaultValuesNeeded`事件中。

`DataBindingComplete`将在第一次加载时填写所有值，然后`DefaultValuesNeeded`填写每个新行。

数据绑定完成：

```
void dataGridView1_DataBindingComplete(object sender, DataGridViewBindingCompleteEventArgs e)
{
    foreach (DataGridViewRow r in dataGridView1.Rows)
    {
        r.Cells["AutoGenColumn"].Value = r.Index + 1;
    }
} 
```

需要的默认值：

```
void dataGridView1_DefaultValuesNeeded(object sender, DataGridViewRowEventArgs e)
{
    dataGridView1.Rows[e.Row.Index].Cells["AutoGenColumn"].Value = e.Row.Index + 1;
} 
```

* * *

这个要求似乎有点不寻常——你没有解释为什么需要这个数字，但你可能想看看将行添加到你的基础数据集中（例如，很容易用 DataTable 做）或者把它放到Subek 建议的行标题。

* * *

最后要注意的一件事 - 这种自动生成的列通常最好在`CellValidating`事件中完成，例如，当你和你对其他两列求和的列时。这在这里行不通，因为您的专栏不是基于其他专栏，但值得一提的是作为一般方式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-15T09:56:10.323

您可以在标题单元格中显示..

```
DataGridView gridView = sender as DataGridView;

    if (null != gridView)
    {
        foreach (DataGridViewRow r in gridView.Rows)
        {
            gridView.Rows[r.Index].HeaderCell.Value = (r.Index + 1).ToString();
        }
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-02-29T06:13:02.523

我相信这是最简单的，对我来说 100% 有效

```
<asp:TemplateField HeaderText="Sl. No.">
   <ItemTemplate>
       <%# Container.DataItemIndex + 1 %>
   </ItemTemplate>
</asp:TemplateField> 
```

[![在此处输入图像描述](../Images/951a76ed15f83237397e3b7dc5735277.png)](https://i.stack.imgur.com/INe9a.png)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-04-17T01:33:31.983

这将起作用。

```
public Form1()
{
    ... ...
    gridView.RowStateChanged += GridView_RowStateChanged;
}

private void GridView_RowStateChanged(object sender, DataGridViewRowStateChangedEventArgs e)
{
    (sender as DataGridView).Rows[e.Row.Index].Cells[0].Value = e.Row.Index + 1;
} 
```

[![在此处输入图像描述](../Images/0106dd1d9eb544d262aa9d4e3bdc5244.png)](https://i.stack.imgur.com/ZCHXZ.png)

我一开始就尝试过`RowsAdded`事件，但是对于新添加的行它不能正常工作。

# c++ - 在 Mac OSX 终端中编译 C++ 程序需要很长时间

> ID：11489909
> 
> 赞同：0
> 
> 时间：2012-07-15T06:27:30.793
> 
> 标签：c++, macos, g++, osx-lion

每次我在新 MBP 上的终端中运行 g++ 时，编译琐碎的程序大约需要 2 秒。而当我 ssh 进入我学校的网络时，它们几乎可以立即编译。与我的旧 Macbook 相同。为什么这个拥有全新的操作系统和强大的处理能力，需要永远编译。

这可能是因为当我从 Apple 网站下载 g++ 时我的编译器存储在哪里？或者，如果这是不可能的，是否还有其他原因会发生这种情况？如果是这样，我该如何解决？我用谷歌搜索并没有发现任何东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T06:37:12.550

不，编译不需要 2 到 5 秒。尤其是在 MBP 上，除非它可能已经 10 岁了。我有 Air（OS X 10.7.4，LLVM G++ 4.2，1.8 GHz Intel Core i7），大约需要半秒钟：

```
$ uname -a
Darwin air 11.4.0 Darwin Kernel Version 11.4.0: Mon Apr  9 19:32:15 PDT 2012; root:xnu-1699.26.8~1/RELEASE_X86_64 x86_64 
$ echo 'int main() { return 0; }' > ./test.cpp
$ time g++ -o test ./test.cpp 

real    0m0.561s
user    0m0.021s
sys 0m0.411s 
```

您要么不正确地测量时间，要么有其他东西让你搞砸了很多时间，在这种情况下，你必须查看系统中发生了什么（即使用分析器）。

# c# - 如何分离对象函数的结果？

> ID：11489914
> 
> 赞同：1
> 
> 时间：2012-07-15T06:28:01.983
> 
> 标签：c#, linq, anonymous-types

我在函数中有一个 LINQ 查询，如下面的代码：

```
public object RetrieveFday(DateTime _dt)
    {
 var fp = from f in RSC.tbl_FoodPlan join food in RSC.tbl_Food
                              on f.FoodID equals food.FoodID
                              where f.Day == _dt
                              select new 
                              {
                                 FoodName= food.Name,
                                 Fholiday= f.HoliDay
                              };

            return fp;
   } 
```

现在我在其他地方调用此函数，我想获取结果并将它们分开以在不同的标签中显示每一个，当调用函数并获取结果时我无法读取它们的属性：

```
var test = RetrieveFday(dt); 
```

如何将结果中的属性读入测试？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-15T06:38:43.797

[匿名类型](http://msdn.microsoft.com/en-us/library/bb397696.aspx)并不打算用作返回类型，因此只需创建一个新类来保存您的投影数据：

```
public class FoodNameAndHoliday
{
    public string FoodName { get; set; }
    public string Fholiday { get; set; }
} 
```

并修改您的`RetrieveFday`函数以在以下位置使用您的类`select`：

```
public IEnumerable<FoodNameAndHoliday> RetrieveFday(DateTime _dt)
{
     var fp = from f in RSC.tbl_FoodPlan join food in RSC.tbl_Food
                          on f.FoodID equals food.FoodID
                          where f.Day == _dt
                          select new FoodNameAndHoliday
                          {
                             FoodName= food.Name,
                             Fholiday= f.HoliDay
                          };
      return fp;
} 
```

然后您可以使用您的功能，例如：

```
var test = RetrieveFday(dt);
foreach(var item in test)
{
    DoSomethingWith(item.FoodName);
    DoSomethingWith(item.Fholiday);
} 
```

# javascript - 隐藏一个 div 并显示另一个 div 代替它的功能不适用于弹出

> ID：11489915
> 
> 赞同：1
> 
> 时间：2012-07-15T06:28:05.213
> 
> 标签：javascript, jquery, html, css

我的项目文件可以在这里下载：[https](https://rapidshare.com/files/1601614875/projectFiles.zip) ://rapidshare.com/files/1601614875/projectFiles.zip [如果需要：“只有2mb]

我有一个网页和网页内的弹出窗口。在弹出窗口中有两个图像和一个 div 内的标题，我希望 div 在悬停时隐藏并显示另一个 div，其中相同的图像更大和一个段落。对于主网页中的相同内容，我具有完全相同的功能，并且它运行良好，但在弹出窗口中它根本不起作用。

我的 HTML 代码：

```
<div class="thumb-list" id="popup-thumb-list">
   <div class="actor">
      <div class="small-thumb-holder">
         <a href="" class="actor_thumb"><img src="images/actor-01.jpg" width="65" height="50" /></a>
         <h3>Lucas Allen</h3>as FIRST MATE KARL-CAPTAIN CARRIBEAN
      </div>
      <div class="big-thumb-holder" id="big-thumb-holder">
         <a href="" class="big-thumb"><img src="images/029 Derek_Jeremiah_Reid-ID29597.jpg" width="150" /></a>
         <p>Derek Jeremiah Reid as Home Buyer<br>Click to see profile.</p>
      </div>
   </div>
   <div class="actor">
      <div class="small-thumb-holder">
         <a href="" class="actor_thumb"><img src="images/actor-02.jpg" width="65" height="50" /></a>
         <h3>Lucas Allen</h3>as FIRST MATE KARL-CAPTAIN CARRIBEAN
      </div>
      <div class="big-thumb-holder" id="big-thumb-holder">
         <a href="" class="big-thumb"><img src="images/030Rachel_O_meara-ID15405.jpg" width="150" /></a>
         <p>Rachel O'Meara as Agent<br>Click to see profile.</p>
       </div>
   </div>
</div> 
```

Javascript代码：

```
$('.small-thumb-holder').mouseover(function(){
   $(this).parent(".actor").css({width:150},100);
   $(this).hide();
   $(this).next('.big-thumb-holder').show();
});
$('.big-thumb-holder').mouseout(function(){
   $(this).parent(".actor").css({width:80},100);
   $(this).hide();
   $('.small-thumb-holder').show();
}) 
```

**我的尝试不起作用：**

```
<div class="small-thumb-holder" onmouseover="(function(){
        $(this).parent(".actor").css({width:150},100);
        $(this).hide();
        $(this).next('.big-thumb-holder').show();
    };">
    <a href="" class="actor_thumb">
        <img src="images/actor-01.jpg" width="65" height="50" />
    </a>
    <h3>Lucas Allen</h3>
    as FIRST MATE KARL-CAPTAIN CARRIBEAN
</div>
<div class="big-thumb-holder" onmouseout="(function(){
        $(this).parent(".actor").css({width:80},100);
        $(this).hide();
        $('.small-thumb-holder').show();
    }"> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-15T07:43:15.627

您需要在加载弹出窗口后执行 jQuery 代码，以便将 mouseover 和 mouseout 事件绑定到 div。为此，您可以将 jQuery 行包装在一个函数中，并在加载弹出窗口后调用 if。

# javascript - 仅在第一次单击时触发 Ajax

> ID：11489916
> 
> 赞同：3
> 
> 时间：2012-07-15T06:28:12.133
> 
> 标签：javascript, jquery

我只想在第一次点击时调用 ajax 来保存带宽，因为数据很大。下面是我的代码

```
$('.id-list').click(function() {
$.ajax({
    type: "POST",
    url: "timesheet.php?action=idlist",
    async: false,
    success: function(rdata) {
             $('.id-list').removeClass('id-list') //remove the class
    }
})      
}) 
```

检查元素`class="id-list"`已被删除，但是当我再次单击它时，它会再次触发我不想发生的 ajax 调用。

有什么方法可以实现吗？谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-15T06:32:34.957

**或者**

API `.one`：[http ://api.jquery.com/one/](http://api.jquery.com/one/)

将处理程序附加到元素的事件。每个元素最多执行一次处理程序。

```
 $('.id-list').one('click', function() {
    $.ajax({
    type: "POST",
    url: "timesheet.php?action=idlist",
    async: false,
    success: function(rdata) {
             $('.id-list').removeClass('id-list') //remove the class
    }
})      
}) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-15T06:33:59.090

[http://api.jquery.com/one/](http://api.jquery.com/one/)

**描述：**将处理程序附加到元素的事件。每个元素最多执行一次处理程序。

```
$('.id-list').one("click",function() {
  $.ajax({
    type: "POST",
    url: "timesheet.php?action=idlist",
    async: false,
    success: function(rdata) {
             $('.id-list').removeClass('id-list') //remove the class
    }
  })      
}) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-15T06:33:01.327

[http://api.jquery.com/live/](http://api.jquery.com/live/)

```
$('.id-list').live("click", function(){
$.ajax({
    type: "POST",
    url: "timesheet.php?action=idlist",
    async: false,
    success: function(rdata) {
         $('.id-list').removeClass('id-list') //remove the class
    }
})
}); 
```

# visual-studio-2010 - MSBuild - 自定义程序集版本格式

> ID：11489917
> 
> 赞同：3
> 
> 时间：2012-07-15T06:28:18.110
> 
> 标签：visual-studio-2010, msbuild, versioning

使用 MSBuild 构建程序集版本时，有什么方法可以使用自定义格式吗？

例如，我们尝试使用像“0.16.10r2.10717”这样的版本，但我们得到了这个错误：

`error emitting 'system.reflection.assemblyversionattribute' -- The version specified '0.16.10r2.10717' is invalid.`

我在网上搜索，但似乎没有人要求解决这个问题。可能吗？

我们使用 Microsoft Visual Studio 2010 和 FinalBuilder 7 来构建我们的项目。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-07-15T07:02:07.290

[AssemblyVersion](http://msdn.microsoft.com/en-us/library/system.reflection.assemblyversionattribute%28v=vs.100%29.aspx)和[AssemblyFileVersion](http://msdn.microsoft.com/en-us/library/system.reflection.assemblyfileversionattribute%28v=vs.100%29.aspx)都必须由最多四个整数组成，以句点分隔，每个整数都不大于 65534 ( `UInt16.MaxValue-1`)。以下任何一项都是有效的（C# 语法）：

```
[assembly: AssemblyVersion("1.2.3.4")]

// Let the compiler generate the build and/or revision numbers
[assembly: AssemblyVersion("1.2.3.*")]
[assembly: AssemblyVersion("1.2.*")] 
```

还有另一个属性[AssemblyInformationalVersion](http://msdn.microsoft.com/en-us/library/system.reflection.assemblyinformationalversionattribute%28v=vs.100%29.aspx)接受字符串作为版本；当您想要使用更复杂的字符串时（尤其是在包含来自 DVCS 的提交 ID 时），可以使用它。

```
// Use complex version number
[assembly: AssemblyInformationalVersion("0.16.10r2.10717")]

// Include Git commit ID
[assembly: AssemblyInformationalVersion("1.2b1-g39d1c0f")] 
```

简而言之，[这些属性之间的区别](http://msdn.microsoft.com/en-us/library/51ket42z.aspx)是：

*   **AssemblyVersion**：用作程序集的 CLR 版本。当程序集具有强名称时，这是对其进行验证的版本。

*   **AssemblyFileVersion**：这是 Win32 文件版本资源，显示在 Windows 资源管理器的程序集属性中。

*   **AssemblyInformationalVersion**：可在运行时通过`Application.ProductVersion`属性访问。它也用于`Application.UserAppDataDirectory`路径中。

# codeigniter - Codeigniter 通过搜索计算日、周、月、年

> ID：11489918
> 
> 赞同：0
> 
> 时间：2012-07-15T06:28:20.133
> 
> 标签：codeigniter, date

我正在开发一个工作网站，客户想要以下内容。在作业提交时，用户将能够设置实际作业开始的日期，并且在搜索中有以下作业开始选项可供选择：

```
<option value="">Today</option>
<option value="">Tomorrow</option>
<option value="">In a week</option>
<option value="">In a month</option> 
```

我在这部分有点迷失了，我从来没有做过这样的事情。现在我不想让任何人为我写这个，只要给我一个建议或提示，如果它的逻辑，如果可能的话。

我真正得到的是，我应该为选项提供什么值，以及如何获得实际结果（如果有）。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-15T07:01:36.540

这些值只需要是您在处理请求时能够识别的值。如果您愿意，它们可以是“今天”、“明天”、“下周”和“下个月”。

然后在处理请求时，取今天的日期并添加：

*   什么都没有（今天）
*   一天（明天）
*   7天（一周内）
*   一个月（一个月内）

查看[`DateTime::add`](http://www.php.net/manual/en/datetime.add.php)日期算术部分。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T03:38:23.820

我只想添加一件事。替换 Option 标签的 value 属性。例如今天

然后通过服务器处理请求。这是非常好的实现逻辑，而且相当容易。

# node.js - 如何从 node.js REPL 启动 vi 或 emacs 等编辑器？

> ID：11489921
> 
> 赞同：2
> 
> 时间：2012-07-15T06:28:52.297
> 
> 标签：node.js, editor, read-eval-print-loop

我想从 node.js REPL 启动像 vi 或 emacs 这样的编辑器。

到目前为止，我已经尝试了两种方法：

1.  节点插件

    这是我的`editor.cc`样子：

    ```
    const char *tempFile = "TEMP_FILE"; // File to be opened with the editor

    Handle<Value> launchEditor (const Arguments& args) {
        const char *editor = "vi";
        Local<String> buffer;

        pid_t pid = fork();
        if (pid == 0) {
            execlp(editor, editor, tempFile, NULL);

            // Exit with "command-not-found" if above fails.
            exit(127);
        } else {
            waitpid(pid, 0, 0);
            char *fileContent = readTempFile(); // Simple file IO code to read file.
            buffer = String::New(fileContent);
            free(fileContent);
        }
        return buffer;
    }

    // MAKE IT A NODE MODULE

    void Init(Handle<Object> target) {
        target->Set(String::NewSymbol("editor"), FunctionTemplate::New(launchEditor)->GetFunction());
    }

    NODE_MODULE(editor, Init) 
    ```

    这在我有节点 v0.6.12（用 编译`node-waf`）时有效，但是当我将节点更新到 v0.8.1 时，此代码停止工作（用 编译`node-gyp`）。编辑器根本没有出现，文件内容被读取并返回（使用 emacs）或编辑器作为后台进程运行（使用 vi）！有什么我需要改变它才能与 0.8.1 一起工作吗？

    即使编辑器作为后台进程启动，我可以将它从代码本身带到前台吗？

2.  Child_process 模块

    ```
    spawn = require('child_process').spawn;
    editor = spawn('emacs', ['TEMP_FILE']); 
    ```

    但这不能正常工作。使用 emacs，它会显示错误 `input is not a tty`，而 vi 会给出一个奇怪的界面。

有人可以为上述任何解决方案提供帮助，或建议其他一些可行的解决方案吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T02:52:47.747

大约一周前我偶然发现了一个，你应该试一试：[node-editor](https://github.com/substack/node-editor)

# assembly - 我应该从英特尔网站上的手册列表中选择哪一本？

> ID：11489924
> 
> 赞同：1
> 
> 时间：2012-07-15T06:29:25.603
> 
> 标签：assembly, intel

[http://www.intel.com/content/www/us/en/processors/architectures-software-developer-manuals.html](http://www.intel.com/content/www/us/en/processors/architectures-software-developer-manuals.html)

上面的链接包含英特尔提供的汇编语言编程手册列表。我正在学习 x86 汇编。我应该选择其中哪一个作为指令集的参考。

请帮我选一个正确的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-15T06:35:23.037

英特尔网站上的文档可能*过于*详细，无法用于学习目的。参考文档是为已经熟悉该材料的读者设计的，但只需要不时查找一些内容。对于不熟悉该材料的人来说，这将是完全无法理解的（选择您需要的音量将是您最少的问题）。

我会从谷歌搜索[x86 教程](https://www.google.com/search?q=x86+tutorial)开始，然后从中挑选一些东西。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-15T06:40:00.480

第一本合并的[英特尔® 64 和 IA-32 架构软件开发人员手册合并卷：1、2A、2B、2C、3A、3B 和 3C](http://download.intel.com/products/processor/manual/325462.pdf)。它包含您需要知道的大部分内容。

您只能选择第 2 卷，但这将是一个过于参考的参考。第 1 卷很好地介绍了一些东西，您实际上可以阅读它。第 3 卷将详细解答与系统相关的问题。

我推荐整个事情，因为你可以在那里找到所有的细节。有错别字和遗漏，在不同的章节中仔细检查相同的内容将帮助你弄清楚到底是什么意思。

# java - 如何使用 JAX-RS 返回实际的 html 文件

> ID：11489929
> 
> 赞同：17
> 
> 时间：2012-07-15T06:30:14.840
> 
> 标签：java, html, rest, jakarta-ee, jax-rs

到目前为止，我正在通过以下方式返回 html 我的主页：

```
@GET
@Produces({MediaType.TEXT_HTML})
public String viewHome()
{
   return "<html>...</html>";
} 
```

我想要做的是返回 home.html 本身，而不是复制其内容并返回字符串。

我该怎么做呢？谢谢 ：）

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-07-15T07:01:02.200

`java.io.InputStream`你可以只返回一个or的实例`java.io.Reader`——JAX-RS 会做正确的事情。

```
@GET
@Produces({MediaType.TEXT_HTML})
public InputStream viewHome()
{
   File f = getFileFromSomewhere();
   return new FileInputStream(f);
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-15T06:40:56.690

1.  使用读取文件`getResourceAsStream`
2.  写回返回的字符串。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-07-20T12:42:18.930

这是我使用 JAX-RS 提供网页的首选方式。网页的资源（html、css、图像、js 等）放置在 中`main/java/resources`，应该将它们部署在中`WEB-INF/classes`（可能需要一些配置，具体取决于您如何设置项目）。注入`ServletContext`您的服务并使用它来查找文件并将其作为`InputStream`. 我在下面提供了一个完整的示例以供参考。

```
@Path("/home")
public class HomeService {
    @Context
    ServletContext servletContext;

    @Path("/{path: .+}")
    @GET
    public InputStream getFile(@PathParam("path") String path) {
        try {
            String base = servletContext.getRealPath("/WEB-INF/classes/files");
            File f = new File(String.format("%s/%s", base, path));
            return new FileInputStream(f);
        } catch (FileNotFoundException e) {
            // log the error?
            return null;
        }
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-03-19T15:49:46.583

您可以使用构建在[RestEasy](https://code.google.com/p/htmleasy/wiki/Installation) 之上的 HtmlEasy，它是 Jax-RS 的一个非常好的实现。

# mysql - 待微调的查询

> ID：11489930
> 
> 赞同：1
> 
> 时间：2012-07-15T06:30:16.783
> 
> 标签：mysql, sql, performance

这是我在 SO 中的第一个问题

我使用的查询是 ::

```
SELECT   column1, column2, COUNT(*) 
FROM     myTable 
GROUP BY DATE(logged_date) 
HAVING   COUNT(*)>10 
```

**Mytable 包含 200 万条记录，logged_date 列的类型为 datetime。**

上面的查询需要大约 15 秒才能执行。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-15T07:02:10.377

欢迎。最好还提供表模式。不过，我会做一些猜测：

logging_date 是一个 TIMESTAMP 列或一个 DATATIME ——是这样吗？这就是在该列上执行 DATE() 的原因。

如果这是您希望优化的查询，您最好的选择是添加*另一*列，即`logged_date_day`（第一个名称已经令人困惑，第二个名称也一样:)）

这意味着同时支持两者（但我的下一个猜测是你只有`INSERT`它一个，不会再次更新——所以这不是太多的努力）。

然后，您必须索引新列，并`GROUP BY`对该列执行。

附言

从技术上讲，`SELECT column1 FROM some_table GROUP BY another_column`这不是一个有效的查询。**当您的sql_mode**不包含[ONLY_FULL_GROUP_BY](http://dev.mysql.com/doc/refman/5.1/en/server-sql-mode.html#sqlmode_only_full_group_by)时，MySQL 允许它。我建议你调查一下。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-15T07:45:05.033

我也担心在logged_date上分组但显示column1和2，这可能不会给你预期的结果，所以最好在所有cols上分组或在column1和2周围使用max或min之类的函数

不过，您可能会考虑这样的事情：

确保 group by 中的所有内容都被键入：

```
alter table myTable add key (logged_date (10), column1,column2); 
```

更改查询：

```
SELECT   left(logged_date,10) as ldate , column1, column2, COUNT(*) 
FROM     myTable 
GROUP BY ldate,column1,column2 
HAVING   COUNT(*)>10 
```

# php - 通过 url id 验证 youtube 视频

> ID：11489934
> 
> 赞同：3
> 
> 时间：2012-07-15T06:30:33.193
> 
> 标签：php, validation, youtube

我正在使用 php 和 yt API 来确定视频是否存在。我已经实现了两个功能，两个帮助我解决这个问题。问题在于，`isYoutubeVideo`当视频有效或无效时，该函数返回空值。我检查了它的参数，但我仍然不确定为什么给我空值。我的`isYoutubeVideo`功能设置错误/缺少什么/需要更改吗？

```
 function isYoutubeVideo($formatted_url) {
            $isValid = false;
            if (isValidURL($formatted_url)) {
                $idLength = 11;
                $idStarts = strpos($formatted_url, "?v=");
                if ($idStarts === FALSE) {
                    $idStarts = strpos($formatted_url, "&v=");
                }
                if ($idStarts !== FALSE) {
                    //there is a videoID present, now validate it
                    $v = substr($formatted_url, $idStarts, $idLength);
                    $headers = get_headers('http://gdata.youtube.com/feeds/api/videos/' . $videoID);
                    //did the request return a http code of 2xx?
                    if (!strpos($headers[0], '200')) {
                        $isValid = true;
                    }
                }
            }
            return $isValid; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T07:24:14.187

为什么你的前两个 echo 语句也不回显`<span id="resultval">`？

使用当前的标记和 jQuery 代码，这就是 jQuery`#special`填充`null`.

您需要将 PHP 代码更改为：

```
echo('<div id="special"><span id="resultval">The YouTube video does not exist.</span></div>');

echo('<div id="special"><span id="resultval">that is a valid youtube video</span></div>'); 
```

虽然，我不明白你为什么使用这种迂回的方式来填充`#special`. 您可以从`<p>`内部开始`<div id="#special">`，然后使用选择器`$("#special > p")`

祝你好运！

# ruby - 在ruby中调用具有root权限的函数？

> ID：11489937
> 
> 赞同：1
> 
> 时间：2012-07-15T06:30:44.883
> 
> 标签：ruby, linux, unix, permissions, root

我知道在 shell 脚本中我可以这样做：

```
#!/bin/sh

foo() {
    rm -rf /
}

foo # fail
sudo foo # succeed 
```

为了在 ruby​​ 中实现这一点，我现在使用一个单独的脚本文件来存储那些需要 root 权限的操作，然后在主脚本中调用`system(['sudo', 'ruby', 'sudo_operations.rb', 'do_rm_rf_root'])`.

如果我可以直接调用该函数而不将其分离出来，那就更好了。例如，我想知道这样的事情：

```
def sudo(&method_needs_root_privilege)
    # ...
end 
```

然后我可以像这样使用它：

```
sudo do
    puts ENV['UID'] # print 0
    system('rm -rf /') # successfully executed
end 
```

是否有任何宝石可以帮助或实现这一点的任何想法？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-15T08:19:20.337

不，UID/GID 只存在于进程级别；函数不能作为与进程的其余部分不同的用户（例如，root）运行。

虽然进程可以更改其 uid（使用`set*id`系统调用系列），但进程必须已经以 root 身份运行才能这样做。

# opencv - 使用 OpenCV + OpenSLAM 创建语义地图？

> ID：11489939
> 
> 赞同：3
> 
> 时间：2012-07-15T06:31:17.397
> 
> 标签：opencv, mapping, surf, object-recognition, ros

我目前正在开展一个项目，该项目旨在识别室内家庭类型环境中的对象，并在地图上粗略地表示这些对象的位置。希望这一切都可以使用单个 Kinect 相机完成。

到目前为止，我已经设法使用 OpenCV 的 SURF 库实现了一个基本的对象识别系统。我遵循并使用了与“OpenCV 2 Computer Vision Application Programming Cookbook”中描述的类似的技术。

我现在慢慢将重点转移到这个项目的映射部分。我研究了 RGBDSLAM 作为一种创建 3D 地图并表示找到的任何对象的方法。但是，我似乎无法找到一种方法来做到这一点。我已经在[http://answers.ros.org/question/37595/create-semantic-maps-using-rgbdslam-octomaps/](http://answers.ros.org/question/37595/create-semantic-maps-using-rgbdslam-octomaps/)上提出了一个关于此的问题，但到目前为止还没有运气。

我还简要研究了 GMapping 和 MonoSLAM，但我发现很难评估这些是否合适，因为我才刚刚开始学习 SLAM。

所以，任何关于这些 SLAM 技术的建议都将不胜感激！

我也对我所说的替代方案持开放态度。如果您知道任何其他创建环境语义图的方法，请随时分享！

干杯。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-28T22:38:14.023

我使用了 AJ Davison 的 MonoSLAm 方法，它只适用于桌面或小房间等小型环境（使用鱼眼镜头）。尝试使用 PTAMM（由 Robert Castle 博士编写），它更加健壮，并且源代码免费供学术使用。

# android - 将日历图像应用到图像按钮

> ID：11489940
> 
> 赞同：0
> 
> 时间：2012-07-15T06:31:39.620
> 
> 标签：android, imagebutton

我想在 Android 中将日历图标显示为按钮。我创建了一个图像按钮，

```
ImageButton DtPk = new ImageButton(this); 
```

我知道该图像将设置为，

```
Drawable d = Drawable.createFromPath("@drawable/calendar");
DtPk.setBackgroundDrawable(d); 
```

但是我在我的项目中在哪里存储图像？如何。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-15T06:35:54.207

创建项目后，您应该会看到一个名为“res”的文件夹，其中包含几个不同的可绘制文件夹。将图像放在一个名为 drawable-mdpi 的内部。然后简单地执行以下操作：

```
DtPk.setImageResource(R.drawable.calendar); 
```

这是另一个 SO 帖子，解释了有关可绘制文件夹的更多信息：[res 文件夹中的可绘制文件夹？](https://stackoverflow.com/questions/2533410/drawable-folders-in-res-folder)

并阅读本文档中称为**位图文件**的部分：http : [//developer.android.com/guide/topics/resources/drawable-resource.html](http://developer.android.com/guide/topics/resources/drawable-resource.html)

# objective-c - 使用表格视图的困难

> ID：11489944
> 
> 赞同：0
> 
> 时间：2012-07-15T06:32:17.327
> 
> 标签：objective-c, xcode, cocoa-touch, uitableview

我创建了一个小表格视图（无滚动）并希望用户选择一个选项。要知道选择了哪个选项，我`int`在视图控制器的头文件中定义了一个类型并将其公开为属性。我定义了方法：

```
- (void)tableView:(UITableView *)tableView
didSelectRowAtIndexPath:(NSIndexPath *)indexPath {
       //some code here/
       int optionSelected = indexPath.row;
} 
```

现在我想`int optionSelected`在其他视图控制器中使用它，但它不起作用。此外，它在我上面定义的函数中出现错误，说“未使用的变量'optionSelected'”。请告诉我哪里可能出错了。谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-15T06:43:03.387

您在`optionSelected`上面的代码中重新声明为局部变量。这意味着您没有将它分配给您的实例变量，因此以后使用它的任何尝试都将不起作用。`int`从行的开头删除。这将删除警告，如果其他一切正常，您可以访问班级其他地方的选定行索引。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-15T06:40:48.427

在您的代码中，`int optionSelected`定义一个具有本地范围的新整数 - 这意味着它仅在该方法内有效。

`int`如果您已将调用`optionSelected`作为属性公开，请使用`self.optionSelected = indexPath.row`or设置它`[self setOptionSelected:indexPath.row]`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-15T06:51:02.837

首先，请注意，optionSelected 将保存被选中的表格的行，而不是选中的值。其次，您创建了 optionSelected 作为当前类的实例变量，因此任何其他类都无法直接访问它。要将该值传递给下一个视图，请将 optionSelected 作为实例变量添加到下一个视图的标题中，就像您在当前视图中所做的那样。然后在配置下一个视图时将值传递给下一个视图，然后推送它：

```
// 1) create next view 2) configure next view 3) push next view
UIViewController *nextViewController= [[UIViewController alloc] initWithNibName:@"nextViewController" bundle:nil];

nextViewController.optionSelected = optionSelected;

[self.navigationController pushViewController:_tabBarController animated:YES]; 
```

# json - JSON 内容类型之间的区别

> ID：11489949
> 
> 赞同：7
> 
> 时间：2012-07-15T06:32:42.107
> 
> 标签：json, content-type

我知道存在一个问题[*正确*](https://stackoverflow.com/q/477816/1416970)[的JSON 内容类型？](https://stackoverflow.com/q/477816/1416970)*但我很困惑什么时候应该使用哪种内容类型。*

 *因此问题是：各种 JSON 内容类型之间有什么区别，什么时候应该更喜欢使用哪一种？

根据 stackoverflow 上类似问题的答案，application/json 是正确的 JSON 内容类型，但我在想为什么仍然使用 JSON 内容类型，这是什么原因？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-15T06:36:59.647

您应该始终使用`application/json`. 如果您将 JSON 发送给其他人，那么他们做错了。

话虽如此，如果你真的需要与做错事的人交流，显然你必须遵守他们的规则——不管是什么规则。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-17T22:59:59.873

@Rndm，很高兴您再次提出该问题。它使我自己回顾并重申了这一点。谢谢你。

不要再打死马了。但是对于应该使用什么作为 JSON MIME 类型，网络上似乎几乎没有共识。

该**规范清楚地列出了 JSON 的一种 MIME 媒体类型** *，它是*“ **application/json** ”（参见[https://www.rfc-editor.org/rfc/rfc4627，“6](https://www.rfc-editor.org/rfc/rfc4627) . IANA 注意事项”部分。

但是，似乎在**很多情况下浏览器会期待其他类型**，这很不幸（请参阅“我自己刚刚与 IE8 进行了长时间的斗争，我发现如果你将 json 作为 text/plain 加载到 iframe 中",[使用 MIME 类型 application/json 可能会导致什么问题？](https://stackoverflow.com/questions/4792291/what-problems-may-using-the-mime-type-application-json-cause)，Norgg 11 月 27 日 16:20)。*

# jquery - 砌体普通的不工作

> ID：11489950
> 
> 赞同：1
> 
> 时间：2012-07-15T06:32:50.180
> 
> 标签：jquery, jquery-masonry

我正在滚动我自己的无 DB 照片库（[住在这里](http://custom.element17.com)），并且想使用 Masonry 来布置没有大量空白区域的缩略图（尽管这更像是我网站上的“灰色空间”）。

我相信我正在正确实施它：

```
var $container=$('#main');
        $container.imagesLoaded(function(){
            $container.masonry({
                itemSelector : '.box',
                columnWidth: 200
            });
        }); 
```

也许一个问题是我正在使用另一段代码来圆化缩略图的边缘：

```
$("img.rounded_corners").each(function() {
            $(this).wrap('<div class="box rounded_corners" />');
            var imgSrc = $(this).attr("src");
            var imgHeight = $(this).height();
            var imgWidth = $(this).width();
            $(this).parent()
                .css("background-image", "url(" + imgSrc + ")")
                .css("background-repeat","no-repeat")
                .css("background-color","#fff")
                .css("height", imgHeight + "px")
                .css("width", imgWidth + "px");
            $(this).remove();
        }); 
```

这基本上用 div 替换了图像，我在其中添加了适当的“box”类。

尽管如此，无论我做什么，页面上的布局都保持不变。怎么了？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-15T16:20:15.647

现在明白了......我不知道我以前怎么没见过这个

这不是 masonry / jQuery 版本的错误

`.box`在将图像加载到文档中之前，将所有图像包装在 div 中的脚本正在运行。因此，没有选择任何内容，并且当砌体脚本运行时，没有带有`box`类的元素。

所以，将最后一个脚本移动到正文的末尾

```
<script type="text/javascript">
            Shadowbox.init();
            $("img.rounded_corners").each(function() {
                $(this).wrap('<div class="box rounded_corners" />');
                var imgSrc = $(this).attr("src");
                var imgHeight = $(this).height();
                var imgWidth = $(this).width();
                $(this).parent()
                    .css("background-image", "url(" + imgSrc + ")")
                    .css("background-repeat","no-repeat")
                    .css("background-color","#fff")
                    .css("height", imgHeight + "px")
                    .css("width", imgWidth + "px");
                $(this).remove();
            });
            var $container=$('#main');
            $container.imagesLoaded(function(){
                $container.masonry({
                    itemSelector : '.box',
                    columnWidth: 200
                });
            });
            </script>
</body> <!-- just above the end of the body. In fact, this is said to be a good practice: leave the external js files in the head, and inline js at the end --> 
```

# content-management-system - 带有 Word 导入或粘贴功能的 CMS

> ID：11489951
> 
> 赞同：0
> 
> 时间：2012-07-15T06:32:53.023
> 
> 标签：content-management-system, ms-word

我正在做一个项目，我们正在收集一堆使用 MS Word 编写的文档并将它们放到网上。目前，它们以 PDF 文档的形式发布，以保持格式不变。

我们正在评估内容管理系统 (CMS)，但是，内容发布者有点不愿意使用 WYSYWIG 编辑器中内置的 CMS。我可以理解为什么，它们远不如 Word！

一些 CMS 具有不错的“从 Word 粘贴”功能，但我发现也可以处理图像的是这个[Wordpress pluging](http://www.nonprofitcms.org/2011/03/paste-from-word-to-wordpress-including-images/)。

我的问题是 - 是否有任何内容管理系统在构建时考虑了 Word 集成？可以尽可能轻松地将 Word 文档发布为 HTML。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-15T07:01:07.673

到目前为止，从我所看到的情况来看，Microsoft Sharepoint 与 MS Office 的集成度最好。我认为他们中的大多数使用 Sharepoint 作为 Intranet 门户，但它也可以作为面向公众的网站托管。但与其他 CMS 相比，它可能有点贵。但除了内容管理之外，它还有很多功能。

[分享点演示](http://www.wssdemo.com/default.aspx)

[面向公众的 Sharepoint 网站](http://www.topsharepoint.com/fortune-500-companies-using-sharepoint)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-12-06T15:35:46.010

[ahmednuaman/gdrive-cms-php](https://github.com/ahmednuaman/gdrive-cms-php)使用 Google Drive 作为伪后端来存储和编辑页面（文档）。

自托管 PHP 和 MySQL CMS 请求文本/HTML 导出以显示为网页。

它还简化了身份验证和组权限（如果编辑者已经是 Google/Drive 用户）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-12-06T15:32:49.273

Microsoft Word 确实将文档发布为 HTML。

```
File > Save As > Web Page (Filtered) 
```

[Office.com - 将文档另存为网页](http://office.microsoft.com/en-us/word-help/save-a-document-as-a-webpage-HA102840141.aspx)

# php - 在线编辑后阿拉伯语字体显示为问号

> ID：11489960
> 
> 赞同：1
> 
> 时间：2012-07-15T06:34:15.863
> 
> 标签：php, mysql, utf-8, phpmyadmin, arabic

我使用 PHP 5.3、MySQL 5 和 PHPMyAdmin 3.4 创建了一个阿拉伯语网站。

在每一页上，我都使用“utf-8”字符集。我在每一页上都包含以下行：

[http://jsfiddle.net/Hh7mk/](http://jsfiddle.net/Hh7mk/)

该网站离线工作正常（在本地服务器（localhost）上）。即使在我编辑并将新的阿拉伯语著作插入数据库之后。

问题是网站何时在线。所有阿拉伯字体都显示正确，但在我在线编辑或插入新的阿拉伯文字到数据库后，新的文字显示为问号。

我的设置（在线）：

*   PHPMyAdmin MySQL 连接排序规则：utf8_general_ci。

*   PHPMyAdmin MySQL 字符集：UTF-8 Unicode (utf8)。

*   数据库和表排序规则：utf8_general_ci。

在连接文件中，我包含了 mysqli 查询 SET NAMES 'utf8' 和 SET CHARACTER SET utf8。

我还尝试将排序规则更改为“cp1256_general_ci”，并将页面字符集更改为“windows-1256”，但字体仍显示为问号。

为什么我在线插入/编辑阿拉伯字体后显示为问号？如何解决这个问题？

先感谢您

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-15T06:41:37.730

您是否尝试过使用**[mysql_set_charset](http://php.net/manual/en/function.mysql-set-charset.php)**

```
mysql_set_charset("utf8"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-29T08:41:38.570

ASCII ? 标记的代码是 63，它是所有阿拉伯字符的第一个字节（每个字符有两个字节）。让你的琴弦转向？意味着只有字符的第一个字节被存储/检索。这表明某处是您的存储/检索过程，您遇到了只有 ASCII 字符可以通过的瓶颈。我的赌注是 MySQL。最好的方法是使用本地服务器的代码（本地 PhpMyAdmin 应该这样做）连接到生产服务器的 MySQL。如果问题仍然存在，则表明它是 MySQL 的配置（考虑到您本地的 PhpMyAdmin 与您的本地 MySQL 一起工作的事实）。我只能为您提供有关如何调查问题的想法。您需要自己找到问题本身。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-29T06:48:14.380

似乎你做的一切都是正确的。但是你在插入数据之前做了这一切吗？尝试清理数据库并从头开始插入

# python - python ftp 服务器显示“150 文件状态正常。即将打开数据连接。” 什么都不做

> ID：11489962
> 
> 赞同：4
> 
> 时间：2012-07-15T06:34:35.990
> 
> 标签：python, sockets, ftp, socketserver, python-sockets

我正在尝试使用 pyftpdlib 模块在 python 中运行 ftp 服务器。出现的问题是它显示“150 文件状态正常。即将打开数据连接”。然后永远保持这种状态，直到服务器超时。

我通过 cmd 登录，使用 ftp 命令。

PL帮助。

这是服务器代码：

```
import os
import sqlite3
from pyftpdlib import ftpserver

def main():

    authorizer = ftpserver.DummyAuthorizer()

    ftp_auth_table="H:\\ftp_auth_table1.db"
    connection=sqlite3.connect(ftp_auth_table,isolation_level=None)
    cursor=connection.cursor()
    cursor.execute('''SELECT * FROM ftp_auth_table1''')
    entry=cursor.fetchall()
    # change os.gtcwd() with ftp_actv_dir
    for x in entry:
        authorizer.add_user(x[1], x[2], "H:/MS EVERYTHING", perm='elradfmwM')

    # Instantiate FTP handler class
    handler = ftpserver.FTPHandler
    handler.authorizer = authorizer

    handler.banner = "pyftpdlib %s based ftpd ready." %ftpserver.__ver__

    address = ('127.0.0.1', 21)
    ftpd = ftpserver.FTPServer(address, handler)

    ftpd.max_cons = 256
    ftpd.max_cons_per_ip = 5

    # start ftp server
    ftpd.serve_forever()

if __name__ == '__main__':
    main() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T15:42:20.213

我绝对有信心地预测，您会发现问题出在“MS EVERYTHING”之间的空间。

# mysql - SQL - 修改或删除触发器

> ID：11489967
> 
> 赞同：2
> 
> 时间：2012-07-15T06:36:00.510
> 
> 标签：mysql, sql, triggers

我创建了触发器，当我执行 SHOW TRIGGERS 时我可以看到它们。如何修改或删除它们？

我使用 MySQL

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T09:57:29.880

```
create or replace trigger <trigger_name> 
```

使用上面的语句你可以修改触发器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-15T06:41:16.923

您无法更改触发器，而您必须删除它然后创建新触发器。删除语法是

```
DROP TRIGGER trigger_name 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-15T06:38:32.383

删除触发器：

```
drop trigger trigger_name 
```

修改触发器：

```
drop trigger trigger_name
create trigger trigger_name ... 
```

目前没有`alter trigger`。所以如果你想修改它，你必须删除并重新创建一个触发器。

[触发器语法](http://dev.mysql.com/doc/refman/5.0/en/create-trigger.html)

# android - 单击后按钮不起作用

> ID：11489971
> 
> 赞同：4
> 
> 时间：2012-07-15T06:36:21.310
> 
> 标签：android

我有一个奇怪的问题。当我运行应用程序并单击按钮（btn_eng 或 btn_pl）时，我看到登录 logcat（“擦除对话框”或“擦除对话框 PL”），但是下次当我单击它时它不会显示并且按钮不会执行其 onClick 操作. 我试图制作按钮来改变语言。在我的应用程序中，我有一个包含数据表单资源（字符串数组）的对话框，当我更改语言时，我想要擦除对话框并使用足够的数据创建新的对话框。

```
 //public static Activity act; -> before onCreate(..)
    this.act = this;

    Button btn_eng = (Button) findViewById(R.id.btnEN);
    btn_eng.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View v) {
            Log.d("XXX", "Erase dialog");
            act.removeDialog(1);
            Locale locale = new Locale("en");
            Locale.setDefault(locale);
            Configuration config =   act.getBaseContext().getResources().getConfiguration();
            config.locale = locale;
            act.getBaseContext().getResources().updateConfiguration(config, getBaseContext().getResources().getDisplayMetrics());
            act.setContentView(R.layout.main);

        }
    });

    Button btn_pl = (Button) findViewById(R.id.btnPL);
    btn_pl.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View v) {
            Log.d("XXX", "Erase dialog PL");
            act.removeDialog(1);
            Locale locale = new Locale("pl");
            Locale.setDefault(locale);
            Configuration config =   act.getBaseContext().getResources().getConfiguration();
            config.locale = locale;
            act.getBaseContext().getResources().updateConfiguration(config, getBaseContext().getResources().getDisplayMetrics());

            act.setContentView(R.layout.main);
        }
    }); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-15T06:42:36.127

这是因为您正在重置 onClick 中的内容视图。调用`setContentView`不会导致运行 -**这**`onCreate`就是（我猜）您将`onClick`侦听器链接到按钮的地方。但是，它**确实**会导致显示布局的全新实例。你需要找到一种新的方式来刷新你的屏幕，而不是用你的新数据替换你的屏幕。最好的方法是`ViewGroup`为您的活动获取包装并调用[View#invalidate();](http://developer.android.com/reference/android/view/View.html#invalidate%28%29)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T12:05:30.043

尝试删除每个 Onclicklistener 中的 setcontentView() 调用，并尝试在下面放置代码并进行测试

```
Button btn_eng = (Button) findViewById(R.id.btnEN);
btn_eng.setOnClickListener(new View.OnClickListener() {

    @Override
    public void onClick(View v) {
        Log.d("XXX", "Erase dialog");
        act.removeDialog(1);
        if(v.getId()==R.id.btnEN){
        Locale locale = new Locale("en");
        Locale.setDefault(locale);
        Configuration config =   act.getBaseContext().getResources().getConfiguration();
        config.locale = locale;
        act.getBaseContext().getResources().updateConfiguration(config, getBaseContext().getResources().getDisplayMetrics());

   }
    }
 });

Button btn_pl = (Button) findViewById(R.id.btnPL);
btn_pl.setOnClickListener(new View.OnClickListener() {

    @Override
    public void onClick(View v) {
        Log.d("XXX", "Erase dialog PL");
        act.removeDialog(1);
     if(v.getId()==R.id.btnPL){
        Locale locale = new Locale("pl");
        Locale.setDefault(locale);
        Configuration config =   act.getBaseContext().getResources().getConfiguration();
        config.locale = locale;
        act.getBaseContext().getResources().updateConfiguration(config, getBaseContext().getResources().getDisplayMetrics());

    }
   }); 
```

请分享结果并接受它，如果它在你的端工作，因为它在我的端运行良好

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-15T06:49:50.200

`setContentView(R.layout.main);`不允许多次调用，如果要更改屏幕内容，您应该在 Layout/.xml 文件中包含*Layouts/Views/ViewGroups*并更新它们，而不是再次调用 setContentView。

# python - 报告实验室和 Jython？

> ID：11489975
> 
> 赞同：2
> 
> 时间：2012-07-15T06:37:26.113
> 
> 标签：python, jython, reportlab

我正在尝试让**reportlab**在**Jython** (2.5.2) 下运行，但无法安装：

```
$ easy_install reportlab

Searching for reportlab>=2.4
Reading http://pypi.python.org/simple/reportlab/
Reading http://www.reportlab.com/
Best match: reportlab 2.5
Downloading http://pypi.python.org/packages/source/r/reportlab/reportlab-2.5.tar.gz#md5=cdf8b87a6cf1501de1b0a8d341a217d3
Processing reportlab-2.5.tar.gz
Running reportlab-2.5/setup.py -q bdist_egg --dist-dir /var/folders/04/nrrmlfvx05l43fj6rljc2z400000gq/T/easy_install-x2cwzJ/reportlab-2.5/egg-dist-tmp-D_S74b
################################################
#Attempting install of _rl_accel, sgmlop & pyHnj
#extensions from '/private/var/folders/04/nrrmlfvx05l43fj6rljc2z400000gq/T/easy_install-x2cwzJ/reportlab-2.5/src/rl_addons/rl_accel'
################################################
################################################
#Attempting install of _renderPM
#extensions from '/private/var/folders/04/nrrmlfvx05l43fj6rljc2z400000gq/T/easy_install-x2cwzJ/reportlab-2.5/src/rl_addons/renderPM'
# installing without freetype no ttf, sorry!
# You need to install a static library version of the freetype2 software
# If you need truetype support in renderPM
# You may need to edit setup.cfg (win32)
# or edit this file to access the library if it is installed
################################################
Downloading standard T1 font curves
Finished download of standard T1 font curves
error: Setup script exited with error: Compiling extensions is not supported on Jython 
```

`setup.py`尝试安装**renderPM**扩展时似乎会发生该错误。有没有办法在没有 renderPM 扩展的情况下安装 reportlab？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-16T01:16:10.167

我通过这样做来安装它（它甚至似乎可以工作）：

```
curl -O http://pypi.python.org/packages/source/r/reportlab/reportlab-2.5.tar.gz
tar zxf reportlab-2.5.tar.gz
cd reportlab*
rm -rf src/rl_addons
jython setup.py install 
```

基本上，这删除了本机扩展，设置似乎并不介意（尽管它会打印警告）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-15T17:05:34.670

Jython 不能使用任何需要 c 扩展的模块。

从[reportlab 先决条件页面](http://www.reportlab.com/software/installation/)

> 下载并安装相关版本的 Python Imaging Library

哎哟，[PIL](http://www.pythonware.com/products/pil/)是 jython 的表演终结者。

你的选择是

1.  使用其中一种 java pdf 解决方案，例如[iText](http://itextpdf.com/)
2.  使用任何 python 模板语言创建[XLS-FO](http://en.wikipedia.org/wiki/XSL_Formatting_Objects)，然后使用[Apache-FOP](http://xmlgraphics.apache.org/fop/)转换为 pdf

我在后者方面取得了很好的成功，因为无论您将来使用哪种语言，您学习的 XML 将始终是您的有效选择。

# ruby-on-rails - 调用 API 并将哈希数组成功返回到 rails 命令行的 Ruby gem（方法）在从控制器调用到浏览器时返回 nil

> ID：11489977
> 
> 赞同：0
> 
> 时间：2012-07-15T06:37:56.573
> 
> 标签：ruby-on-rails, ruby, model-view-controller, controller, params

更新：在第一个响应之后，我在代码中添加了一些放置，实际上，所有请求的数据都从命令行内的 gem 返回。这不是红宝石问题。这是一个轨道问题。Rails 采用了一个非常好的哈希并将其称为 nil。无情地，无论我做什么，rails 都将其称为 nil。

基本上，我在 gem 中有一个方法，它在使用 bin 文件从 irb 运行时成功运行，但是当我从 rails 控制器运行相同的方法时（我的 gem mgmt 技能非常好，不是 Gemfile 或任何问题)，该方法返回 nil。这也不是 params[] 问题，因为当我在控件中手动填写这些参数时，方法调用也返回 nil（最低代码片段）

所以：

这是 rails 控制器（simple_search 方法返回 nil）

```
def show
  obj = SimpleSearch.new
  @responses = obj.broad_search(params[:query], params[:type])
end 
```

这是我的自定义 gem 中的 broad_search 方法（我已经完成了所有正确的“rake build”、gem 版本控制、sudo gem install pkg/....、rails Gemfile 和 bundle install 的东西相信我）

```
def broad_search(query, type)
  response = HTTParty.get("#{SEARCH_URL}/search?query=#{query}&type=#{type}")
  # the below parsed_response is going to be an array of hashes if successful
  p_response = JSON.parse(response.body)
  p_response.map {|r| Results.new(r)}
end 
```

运行 API 响应的类

```
class Results
  attr_accessor :identification, :picture, :address, :name, :type

  def initialize(input)
    @identification = input['id']
    @address = input['url']
    @picture = input['pic']
    @name = input['name']
    @type = input['type']
  end
end 
```

bin 文件，它完全能够运行该方法，因此稍后解析（使用）哈希 --- 在 rails 中，我将使用这些内容将哈希保存到数据库中，以开始生成哈希信息的存档

```
$LOAD_PATH.unshift(File.expand_path("../lib", File.dirname(__FILE__)))

require 'simple_search'
require 'highline/import'

class UI
  def initialize
    @search = Search.new
  end
  def broad_search_from_terminal
    type = ask("What type? Choose 'User', 'Startup', 'MarketTag' or 'LocationTag'")
    query = ask("OK. Assuming you chose one of the four types, what is your search keyword?")
    @search.broad_search(query, type)
  end
end 
```

我会显示填写参数的rails视图文件，但这也返回nil（通过inspect方法等输出）

```
def show
  obj = SimpleSearch.new
  @responses = obj.broad_search("mark", "User")
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-15T14:11:54.720

我会`broad_search`以这种方式修改方法：

```
def broad_search(query, type)
  url = "#{SEARCH_URL}/search?query=#{query}&type=#{type}"
  response = HTTParty.get(url)

  puts url
  puts response.body      

  # the below parsed_response is going to be an array of hashes if successful
  p_response = JSON.parse(response.body)
  p_response.map {|r| Results.new(r)}
end 
```

看看每种情况有什么不同。

# linux - 执行 if...then...fi 时出现 Cygwin 错误 - Bash 脚本

> ID：11489982
> 
> 赞同：4
> 
> 时间：2012-07-15T06:38:35.053
> 
> 标签：linux, bash, shell, if-statement, cygwin

我刚开始 bash shell 编程。我已经在我的 Windows 7 计算机上安装了 Cygwin。[我开始使用本教程](http://nixcraft.com/attachments/shell-scripting/203d1299108767-pdf-download-linux-shell-scripting-tutorial-v2-0-lsst2_0_r12.zip)编写脚本。我的脚本需要一个参数传递给它，如果不是，它应该显示一条错误消息。这是直接来自教程的代码，与我的代码中的代码相同：

```
[ $# -eq 0 ] && { echo "usage: someArgument";  exit 1; } 
```

当我执行以下操作时：

```
sh ./myscript.sh 
```

它给了我这个错误：

```
-bash: /home/Me/myscript.sh: line 5: syntax error: unexpected end of file 
```

“文件意外结束”表示我在某处错过了`fi`or`done`等​​。

我仔细检查了我的代码，但*一无所获*。另外，当我注释掉该行时，脚本工作得非常好。

我尝试使用`if...then...fi`：

```
if [ $# -eq 0 ]
then
    echo "usage: someArgument"
    exit 1;
fi 
```

但无济于事！

请帮助，它一直难倒我。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-15T07:58:49.463

可能您`\r`在脚本中有或其他一些不可见的符号。请添加`set -x`到脚本的开头以打开调试并再次运行脚本。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-15T08:30:35.883

抱歉，添麻烦了。我对伊戈尔提到的隐形符号做了一些研究。你必须`dos2unix`在 Cygwin 中运行，它为我解决了这个问题。Dos 类型的文件有`\r\n`代替`\n`和其他一些让 Cygwin 感到困惑的东西。

这：

```
$ dos2unix ./myscript.sh
$ sh ./myscript.sh 
```

工作正常。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-15T14:07:02.227

作为替代方案，您可以使用`bash`参数扩展来测试未设置的变量。没有位置参数，`$1`将被取消设置：

```
: ${1?"usage: someArgument"} 
```

该`:`命令是一个空操作，用作扩展其参数的钩子，即`$1`. 如果`$1`未设置，则 the 后面的单词`?`将进行一些扩展并打印为标准错误，之后将退出非交互式 shell。

（这不是解决您的 DOS 行尾问题的方法，而只是另一种强制设置变量的方法。）

# android - AsyncTaskLoader with Dialogs，可行吗？

> ID：11489987
> 
> 赞同：0
> 
> 时间：2012-07-15T06:39:37.833
> 
> 标签：android, android-asynctask, android-loadermanager, asynctaskloader, android-loader

我开始了一个新应用程序，我想使用最新的 android 模式和指南，其中之一是使用 Loaders (AsyncTaskLoader) 而不是 AsyncTasks，我正在尝试查看 Loaders 是否应该真正取代你所有的 AsyncTasks “任务“ IE

假设您要基于 REST 调用构建应用程序，其中一个调用负责登录用户。因此，当您单击提交（在片段按钮上）时，会出现一个对话框，直到响应返回，如果我是正确的，除非您使用处理程序，否则 AsyncTaskLoader onLoadFinished 不会让您关闭对话框，并且很好地使用它，使解决方案看起来有点老套，因为你需要显示错误对话框，比如用户名或密码错误时，你可能会收到一堆对处理程序的调用。

我使用 AsyncTask 快速完成了此操作，一切正常，现在我将所有代码移至 AsyncTaskLoader答案。

我很感激你花时间。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-15T06:56:51.107

> 我正在尝试查看 Loaders 是否应该真正替换您所有的 AsyncTasks “任务”。

A`Loader`执行数据的异步加载，监控其数据的来源，并在其数据内容发生变化时提供新的结果。An`AsyncTaskLoader`是`Loader`使用 an`AsyncTask`将`Loader`' 操作卸载到单独线程的 a。An`AsyncTask`基本上是 Android 版本的 a `Thread`；它抽象出繁琐的多线程细节，并提供了一些方便的回调方法。

在您的情况下，登录用户是一次性的，可能是昂贵的`REST`请求......它与加载/监控数据源无关。您应该改用 an `AsyncTask`。

# android - 如何在一定次数后停止计时器

> ID：11489988
> 
> 赞同：8
> 
> 时间：2012-07-15T06:39:52.497
> 
> 标签：android, timer, timertask

尝试使用 a`Timer`运行 4 次，每次间隔 10 秒。

我试过用循环停止它，但它一直在崩溃。尝试过使用`schedule()`三个参数，但我不知道在哪里实现一个计数器变量。有任何想法吗？

```
final Handler handler = new Handler(); 
Timer timer2 = new Timer(); 

TimerTask testing = new TimerTask() {
    public void run() { 
        handler.post(new Runnable() {
            public void run() {
                Toast.makeText(MainActivity.this, "test",
                    Toast.LENGTH_SHORT).show();

            }
        });
    }
}; 

int DELAY = 10000;
for (int i = 0; i != 2 ;i++) {
    timer2.schedule(testing, DELAY);
    timer2.cancel();
    timer2.purge();
} 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-07-15T07:04:08.537

```
private final static int DELAY = 10000;
private final Handler handler = new Handler();
private final Timer timer = new Timer();
private final TimerTask task = new TimerTask() {
    private int counter = 0;
    public void run() {
        handler.post(new Runnable() {
            public void run() {
                Toast.makeText(MainActivity.this, "test", Toast.LENGTH_SHORT).show();
            }
        });
        if(++counter == 4) {
            timer.cancel();
        }
    }
};

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    timer.schedule(task, DELAY, DELAY);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-15T06:50:27.003

为什么不使用一个`AsyncTask`并且只使用它 Thread.sleep(10000) 和`publishProgress`in a while 循环？这是它的样子：

```
new AsyncTask<Void, Void, Void>() {

        @Override
        protected Void doInBackground(Void... params) {

            int i = 0;
            while(i < 4) {
                Thread.sleep(10000);
                //Publish because onProgressUpdate runs on the UIThread
                publishProgress();
                i++;
            }

            // TODO Auto-generated method stub
            return null;
        }
        @Override
        protected void onProgressUpdate(Void... values) {
            super.onProgressUpdate(values);
            //This is run on the UIThread and will actually Toast... Or update a View if you need it to!
            Toast.makeText(MainActivity.this, "test", Toast.LENGTH_SHORT).show();
        }

    }.execute(); 
```

另外作为旁注，对于长期重复性任务，请考虑使用`AlarmManager`...

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-15T06:59:34.917

```
for(int i = 0 ;i<4 ; i++){
    Runnable  runnableforadd ;
    Handler handlerforadd ;
    handlerforadd = new Handler();
    runnableforadd  = new Runnable() {
        @Override
        public void run() {
          //Your Code Here
            handlerforadd.postDelayed(runnableforadd, 10000);                         } 
    };
    handlerforadd.postDelayed(runnableforadd, i);

} 
```

# extjs4 - Sencha Architect 2 - how to edit code

> ID：11489992
> 
> 赞同：3
> 
> 时间：2012-07-15T06:40:45.807
> 
> 标签：extjs4, extjs4.1, sencha-architect

I am using `Sencha Architect 2`. I need to know how i could edit the code using the IDE. i clicked on the `code` tab but the code is in `readonly` format. How can i edit this code ?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T05:05:19.370

sencha architect code cannot be manually edited if you wish to do so then go to the metadata folder where you saved the project and over there you can manually edit the files then come back and save in architect which will overwrite the existing files

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T18:22:54.057

There are 2 set's of code in SA. The code that's generated for you and the code that you add. To add you need to drop in event handlers (basic event bindings), functions, controller references, etc ...

In the code view there is a drop down with all of the items that contain code. Some of them may be editable depending on what type of class your looking at (view, controller, store, model).

I imagine your looking at the generated class (not directly editable). You add things to it by dropping behaviors [http://cl.ly/0A0J1v1Q2O3C17233w10](http://cl.ly/0A0J1v1Q2O3C17233w10)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-06T11:07:33.387

Building on what Phil has said Sencha Architect only allows you to edit configs... If you are looking to edit properties in views you additionally need to create overrides and in the override you can modify the property like this

```
config: {property-name: { 
    //whatever you want to change}} 
```

# jquery-ui - 我可以使用 YUI 创建网站主题吗？

> ID：11489995
> 
> 赞同：1
> 
> 时间：2012-07-15T06:41:11.270
> 
> 标签：jquery-ui, themes, yui

嗨，我想知道为网站创建流畅、简单、有吸引力、轻量级主题的最简单方法是什么？所以我在选择许多 css、js 框架时感到困惑。任何人都可以告诉我哪个更好，最适合创建主题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-15T06:47:16.663

这取决于许多因素，例如您要创建的主题类型。如果主题只是要处理 UI 控件，然后结帐

[http://jqueryui.com/](http://jqueryui.com/)上的jquery ui，因为它为您提供了出色的主题。

既然您提到了 CSS，您还应该检查

蓝图 CSS 框架

因为它带有多种样式，您可以轻松添加。

您还可以下载一些与移动设备兼容的 HTML 5 轻量级主题，然后您可以自定义它们的内容。

[http://creativecan.com/2012/05/html5-and-css3-templates/](http://creativecan.com/2012/05/html5-and-css3-templates/)

也检查一下。