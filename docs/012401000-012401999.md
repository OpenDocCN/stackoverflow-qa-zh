# StackOverflow 问答 12401000-12401999

# sql - 查询转换——Sql转Hql

> ID：12401003
> 
> 赞同：0
> 
> 时间：2012-09-13T06:58:33.313
> 
> 标签：sql, hibernate, hql

我有这个查询，我需要在 hql 中转换它，但我有点困惑，不知道如何在 hql 的“where”子句中编写条件。

```
SELECT
    message 
FROM
    p_message 
WHERE
    message_id=(
        SELECT
            a.scene 
        FROM
            p_config a 
        INNER JOIN
            p_rec_type b 
                ON a.email_id=b.email_id 
                AND rec_type=2 
        WHERE
            a.email_type=1
    ) 
```

这个 sql 查询的 hql 等价物是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T11:58:11.047

请在 HQL 查询下方找到：假设 p_message 和 p_config 是域对象名称，而其他是映射到列的属性。

```
 String hqlQuery =" SELECT message  FROM     p_message  pm WHERE pm.message_id in (SELECT a.scene FROM p_config a INNER JOIN  p_rec_type b  ON a.email_id=b.email_id AND rec_type =:rectype          WHERE a.email_type=:emailTYpe)"; 
    query = session.createQuery(hqlQuery);
    query.setParameter("rectype", 2);
    query.setParameter("emailTYpe", 1); 
```

# visual-studio-2010 - 构建 OpenCV sln 文件的问题

> ID：12401005
> 
> 赞同：2
> 
> 时间：2012-09-13T06:58:40.753
> 
> 标签：visual-studio-2010, opencv

在 Cmake 中生成 OpenCV.sln 文件后，我目前无法构建它们。我目前正在使用 Windows 7 64 位操作系统和 VS 2010 Express。此外，我使用的 OpenCV 版本是 2.4.2 打开 OpenCV.sln 文件后，它会通知我“此版本的应用程序不支持解决方案文件夹”。

按 F5 按钮构建 .sln 文件只会产生 8 个成功构建，而其他构建则标记为失败。有没有办法解决这个问题？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T18:54:44.773

在最新的 CMake 中有一个“使用解决方案文件夹”选项。因此，在生成之前，请转到启用-> 解决方案文件夹并取消选中它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-23T18:49:49.813

**问题**

解决方案文件夹仅在 Visual Studio 的非快速版本中受支持。当我第一次尝试安装我的时，我遇到了同样的问题。

资料来源：[http ://social.msdn.microsoft.com/Forums/en/Vsexpressvc/thread/2a8e62c8-e14f-4027-8704-7d943c99303e](http://social.msdn.microsoft.com/Forums/en/Vsexpressvc/thread/2a8e62c8-e14f-4027-8704-7d943c99303e)

* * *

**解决方案**

我使用[本教程](http://opensourcecollection.blogspot.com/2011/04/how-to-setup-opencv-22-in-codeblocks.html)让 OpenCV 正常工作。

它不是最新版本，但运行得非常好。

# c# - 关于 Java 和 C# 中的访问说明符的混淆

> ID：12401015
> 
> 赞同：5
> 
> 时间：2012-09-13T06:59:33.607
> 
> 标签：c#, java, keyword, access-specifier

我在比较 Java 和 C# 中的访问修饰符。我想`protected internal`在 Java 中找到 C# 的替代方案。但我注意到`protected`修饰符在两种语言（[C#](http://msdn.microsoft.com/en-us/library/ba0a1yw2)和[Java](http://docs.oracle.com/javase/tutorial/java/javaOO/accesscontrol.html)）中是不同的。`protected`在 Java 中等同于`protected internal`C#，因为该成员也可以在同一个包中访问。

我有两个问题

*   为什么他们在 Java 和 C# 中为相同的修饰符创建了不同的含义？
*   我如何在 Java 中拥有`protected`C#（*访问仅限于包含类或从包含类派生的类型。 ）？*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T07:06:32.300

> 为什么他们在 Java 和 C# 中为相同的修饰符创建了不同的含义？

必须在简单性和精确指定不同访问权限的能力之间做出选择。Java 的创建者和（后来）C# 的创建者做出了不同的选择。

> 如何在 Java 中保护 C#（访问仅限于包含类或从包含类派生的类型。）？

你不能。Java 在这一点上更受限制。

但是您可能应该限制`protected`关键字的使用，因为这两种使用都意味着破坏一般封装原则。这种用法有时很有用，因为过于严格的语言可能意味着太多无用的代码，但请注意不要制作过于束缚且难以更改和维护的东西。授予对内部字段或方法的访问权限以覆盖类通常意味着您有一个沉重的层次结构和过多的实现耦合（为了可维护性，更喜欢组合而不是层次结构）。

请注意，在没有任何访问控制修饰符的情况下声明的变量或方法可用于同一包中的任何其他类。在我看来，这比允许任何包的子类访问更明智。

[这是完整的网格](http://docs.oracle.com/javase/tutorial/java/javaOO/accesscontrol.html)：

![在此处输入图像描述](../Images/6aa6c3cebfc06972366f1cfcc83b3f7c.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-12T13:46:46.183

在 Java API 文档中，Sun.com 不提供关键字访问说明符。试试这个例子

```
D:\>javac Demo.java
Demo.java:1: error: **modifier** private not allowed here
private class Test
        ^
1 error 
```

# android - 如何在我的 Android 应用程序中连接内部 SQLite 数据库？

> ID：12401017
> 
> 赞同：-1
> 
> 时间：2012-09-13T06:59:38.503
> 
> 标签：android, sqlite

我需要使用 Eclipse 在我的 Android 应用程序中使用内部 SQLite 数据库。我尝试了很多方法，但我无法获得解决方案。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T07:04:36.337

试试这是解决方案：

```
private static String DB_PATH = "/data/data/your.package/databases/";
    private static String DB_NAME = "namedatabase.sqlite";
    private SQLiteDatabase db;
    private final Context context;

    public DataBaseWorker(Context ctx) {
        super(ctx, DB_NAME, null, 1);
        context = ctx;
    }

    public void createDataBase() throws IOException {
        boolean dbExist = checkDataBase();
        if (!dbExist) {
            File wallpaperDirectory = new File(
                    "/data/data/your.package/databases/");
            wallpaperDirectory.mkdirs();
            try {
                copyDataBase();
            } catch (Exception e) {
                Log.v("CREATEDATABASE", "not copy DB");
            } finally {
                this.close();
            }
        }
    }

    public boolean checkDataBase() {
        SQLiteDatabase checkDB = null;
        try {
            String Path = DB_PATH + DB_NAME;

            checkDB = SQLiteDatabase.openDatabase(Path, null,
                    SQLiteDatabase.OPEN_READONLY);

        } catch (SQLiteException e) {
            Log.v("CHECKDB", "not check DB");
        }

        if (checkDB != null)
            checkDB.close();

        return checkDB != null ? true : false;
    }

    private void copyDataBase() throws IOException {
        InputStream input = context.getAssets().open(DB_NAME);
        String outFileName = DB_PATH + DB_NAME;
        OutputStream output = new FileOutputStream(outFileName);

        byte[] buffer = new byte[1024];
        int length;
        while ((length = input.read(buffer)) > 0) {
            output.write(buffer, 0, length);
        }
        input.close();
        output.close();
    }

    public void openDataBase() throws SQLException {
        String Path = DB_PATH + DB_NAME;        
        db = SQLiteDatabase.openDatabase(Path, null,
                SQLiteDatabase.OPEN_READWRITE);
    }

    public void close() {
        if (db != null)
            db.close();
        super.close();
    }

    public void exec(String query) {
        db.execSQL(query);
        db.close();
    } 
```

# jquery - 如何将助手添加到fancybox

> ID：12401018
> 
> 赞同：0
> 
> 时间：2012-09-13T06:59:45.777
> 
> 标签：jquery, fancybox, fancybox-2

好的，我正在使用类似的东西

```
 $.fancybox(  $("#savesofrm") ); 
```

打开一个包含一些基本（文本区域等）表单元素的 div。有用。

我想传递更多选项，例如`helpers`in。不知道如何。想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T07:16:11.400

你可以做

```
$.fancybox($("#savesofrm"),{
 // add options here
 helpers: {
   title  : { type : "inside" },
   thumbs : {
     width: 50,
     height: 50
   }
 }
}); 
```

# python - 使用python仅复制和重命名最新文件

> ID：12401019
> 
> 赞同：-2
> 
> 时间：2012-09-13T06:59:48.457
> 
> 标签：python, batch-rename

我想复制一些文件并重命名它们

其中第一个元素：`src/`是目录，`357`是ID，`1329844313`是时间戳，`.jpg`是文件扩展名。

现在我想要列表如下：（目标目录）+（SALT）+'_'+（ID）+（扩展名）因为我的盐是：'423l4kj2342'我的预期结果将是：

```
    目标/423l4kj2342_357.jpg

```

我的重命名功能符合预期。

```
src/picture-357-1329844313.jpg  dest/423l4kj2342_357.jpg
src/picture-57-1329844816.png   dest/423l4kj2342_57.png
src/picture-358-1329844317.jpg  dest/423l4kj2342_358.jpg
src/picture-57-1329844814.jpg   dest/423l4kj2342_57.jpg
src/picture-358-1329844313.jpg  dest/423l4kj2342_358.jpg
src/picture-358-1329844325.jpg  dest/423l4kj2342_358.jpg 
```

但是，具有相同 ID 的文件被覆盖。我只想要存在相同 ID 的最新文件。

现在我的问题是，我怎样才能得到以下结果？复制仅包含最新时间戳的相同 ID 文件？

```
src/picture-357-1329844313.jpg  dest/423l4kj2342_357.jpg
src/picture-57-1329844816.png   dest/423l4kj2342_57.png
src/picture-358-1329844325.jpg  dest/423l4kj2342_358.jpg 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T07:16:56.367

按 ID 和时间戳按字典顺序降序对文件列表进行排序，然后对于每个 ID 只处理第一个。

类似于以下内容：

```
def cmp_file(a, b):
  id_a, timestamp_a = re.findall(r'\d+', a)
  id_b, timestamp_b = re.findall(r'\d+', b)
  return 2*cmp(id_a, id_b) + cmp(timestamp_a, timestamp_b)

filelist.sort(cmp=cmp_file, reverse=True)

last_id = None
for file in filelist:
  id, timestamp = re.findall(r'\d+',file)
  if not last_id == id:
    process_file(file)
    last_id = id 
```

或者，将您的文件名放在时间戳和文件名元组列表的 ID 索引字典中。然后为每个 dict 条目找到具有最大时间戳的条目并处理该文件：

```
index = dict()
for file in filelist:
  id, timestamp = re.findall(r'\d+',file)
  if not id in index:
    index[id] = list()
  index[id].append((timestamp, file))
for id, files in index.iteritems():
  process_file(files.max(key=lambda a: a[0])[1]) 
```

# php - 无法使用 swift mailer 发送电子邮件

> ID：12401020
> 
> 赞同：0
> 
> 时间：2012-09-13T06:59:48.433
> 
> 标签：php, swiftmailer

我是 php 新手。我试图使用以下代码发送邮件。我的参考文件是[这个](http://swiftmailer.org/docs/plugins.html#)。我认为这与我的结果部分有关。有人能帮忙吗？我的错误如下

```
Warning: Invalid argument supplied for foreach() in /home/mysite/public_html/sendmail.php on line 50

Warning: Invalid argument supplied for foreach() in /home/mysite/public_html/sendmail.php on line 70 
```

**我的完整代码如下请指导我**

```
require_once 'lib/swift_required.php';
include('database.php');
// Create the Transport
$transport = Swift_SmtpTransport::newInstance('smtp.mydomain.com', 25)
    ->setUsername('me@mydomain.com')
    ->setPassword('mypassword');

$transport = Swift_MailTransport::newInstance();
// Create the Mailer using your created Transport
$mailer = Swift_Mailer::newInstance($transport);

// Send the message
//$result = $mailer->send($message);

//database connection part
$con = mysql_connect("localhost","username","password");
if (!$con) {
    die('Could not connect: ' . mysql_error());
}
mysql_select_db("mydb", $con);

$sql = "SELECT email,name FROM email_test";     
$result = mysql_query($sql);

//tested the results, works fine 
while($row = mysql_fetch_array($result)) {
    echo "--".$row['email']."---";
}

//using result to get enail and user name
$replacements = array();
foreach ($result as $user) {
    $replacements[$user['email']] = array(
        '{email}'=>$user['email'],
        '{name}'=>$user['name']
    );
}

$decorator = new Swift_Plugins_DecoratorPlugin($replacements);
$mailer->registerPlugin($decorator);

$message = Swift_Message::newInstance()
    ->setSubject('Important notice for {name}')
    ->setBody("Hello {name}, we have reset your password");

foreach ($result as $user) {
    $message->addTo($user['email']);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T07:21:30.033

1.  如评论：`$result`是一个`mysql_resource`，而不是一个数组。您需要`fetch_row`在该资源上运行才能真正获取详细信息。评论中提到（您可以将代码更新为现在的代码吗？）

2.  当您第二次运行结果时，您需要“重置”结果集以从顶部开始。你可以通过`mysql_data_seek($result, 0)`说回到顶部来做到这一点。

# java - 可变关键字：我在两个线程之间使用的变量是否同步？

> ID：12401021
> 
> 赞同：1
> 
> 时间：2012-09-13T07:00:03.723
> 
> 标签：java, multithreading, synchronization, volatile

我有一个类似下面的代码，其中一个对象在两个线程（主线程和监视器线程）之间共享。我是否必须全局声明 MyObject 并`volatile`确保将其推送到内存？否则，`if`如果 MyObject 仅由线程本地访问并且未声明为 volatile，则该语句可以打印“Not null”，对吗？

```
public static void main(String[] args) {
    MyObject obj = MyObjectFactory.createObject();
    new Monitor(obj).start();
    Thread.sleep(500); 
    if(obj == null) 
        System.out.println("Null");
    else
        System.out.println("Not null");
}

public void doSomethingWithObject(MyObject obj) {
    obj = null;
}

private class Monitor extends Thread {
   public Monitor(MyObject obj) {
       this.obj=obj;
   } 
   public void run() {
       doSomethingWithObject(obj);
   }
} 
```

注意：代码示例可能无法编译，因为我是在 Stackoverflow 上自己编写的。将其视为伪代码和真实代码的混合。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T07:06:01.903

该实例是共享的，但对它的引用不是。例子：

```
 String a = "hello";
 String b = a;

 b = null; // doesn't affect a 
```

`a`并且`b`是对同一实例的引用；更改一个引用对该实例或对同一实例的任何其他引用没有影响。

因此，如果您想在线程之间共享状态，则必须*在* `MyObject`其中创建一个字段`volatile`：

```
class MyObject { public volatile int shared; }

public void doSomethingWithObject(MyObject obj) {
    obj.shared = 1; // main() can see this
} 
```

~~请注意，这`volatile`仅适用于某些类型（引用和除 之外的所有原语`long`）。~~由于这很容易出错，因此您应该查看`java.util.concurrent.atomic`.

**[编辑]**我上面说的不正确。相反，对于 Java 5 和更好的版本，使用`volatile`with可以正常工作。`long`这是确保这种类型的原子读/写的唯一方法。请参阅此问题以获取参考：[使用 volatile long 有什么意义吗？](https://stackoverflow.com/questions/3038203/is-there-any-point-in-using-a-volatile-long)

[感谢 Affe](https://stackoverflow.com/users/331052/affe)指出这一点。谢谢。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T07:05:40.690

如果您希望您的对象以原子方式通过读取-更新-写入方案，请`volatile`不要削减它。您必须使用同步。

波动性将确保变量不会被缓存在当前线程中，但它不会保护变量免于同时更新，变量可能会出现意外情况。

IBM 的[developerWorks](http://www.ibm.com/developerworks/)有一篇关于这个主题[的有用文章](http://www.ibm.com/developerworks/java/library/j-jtp06197/index.html)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-13T07:06:07.820

您的示例仅包含一个线程，`Monitor`它是在 中创建和运行的`main()`。

“让它变得易失以确保它会被推送到内存中？” - 相反，当您将变量声明为[volatile](http://www.javamex.com/tutorials/synchronization_volatile.shtml)时- 它确保它不会被“推送”（缓存）到线程本地内存，因为可能有其他线程会更改变量的值。

为了确保打印变量的正确值，您应该同步方法`doSomethingWithObject`（将方法的签名更改为）：

```
public synchronized void doSomethingWithObject(MyObject obj) 
```

或围绕以下内容创建同步块：

```
obj = null; 
```

和

```
this.obj=obj; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-13T07:06:57.043

您宁愿必须在对象上进行同步，以确保`null`在 if 检查之前将其设置为。将其设置为 volatile 仅意味着更改将立即被其他线程“看到”，但很可能会在`doSomethingWithObject`调用之前执行 if 检查。

# java - 不使用 Google Api 的 Java Unicode 音译？

> ID：12401023
> 
> 赞同：0
> 
> 时间：2012-09-13T07:00:18.840
> 
> 标签：java, unicode, unicode-string, transliteration

有没有从英文 unicode 到古吉拉特语 unicode 的解决方案？假设 a = \u0061 的 unicode 那么它将翻译 અ = u0095

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T03:08:58.473

# android - 如何抑制 USB 权限对话框？

> ID：12401027
> 
> 赞同：3
> 
> 时间：2012-09-13T07:00:50.120
> 
> 标签：android, permissions, dialog, usb

我正在开发一个与 USB 设备通信的应用程序。当我第一次连接 USB 设备并运行应用程序时，它会询问 USB 权限。

我想禁止该对话框，这样它就不会再提示用户了。我知道它根据我迄今为止发现的结果要求用户许可，但是我想知道是否可以禁止该对话框。

用户是否可以通过任何方式在安装时分配权限并且不会获得该 USB 权限对话框？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-10T13:23:39.247

我对此一无所知，但答案是它可以使用 USB_DEVICE_ATTACHED 上的意图过滤器来完成 - 请参阅[USB 设备访问弹出抑制？](https://stackoverflow.com/questions/12388914/usb-device-access-pop-up-supression)解决方案，包括一个方便的演示应用程序。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-13T16:54:21.743

我认为答案是不可能的。

到目前为止，我还没有找到抑制这种情况的方法。我认为这主要是因为权限被授予特定设备，当然该设备在安装时不太可能是已知的。

您实际上需要的是一个全面的“任何 USB 设备”许可，到目前为止我当然还没有找到这样的东西。

# sql - 如何将存储过程分配给在另一个存储过程中声明的参数

> ID：12401032
> 
> 赞同：0
> 
> 时间：2012-09-13T07:01:02.543
> 
> 标签：sql, sql-server-2008, stored-procedures

我已经存储`proc1` `sp_DateFromRange`了哪个返回日期。我有另一个存储`proc2`，它返回带有其他数据的表..`storedproc2`有日期参数`@datefrom`和`@dateto`.

现在，我需要分配`storedproc1`给`@datefrom``storedproc2`

是否可以分配

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T07:08:27.370

不，这不可能如你所愿。

这是关于如何在存储过程之间共享数据的有趣文章

[如何在存储过程之间共享数据](http://www.sommarskog.se/share_data.html)

在我看来，最简单的方法是使用**输出参数**或**临时表**。有关更多信息，请查看链接。这是使用输出参数的简单方法。

```
DECLARE @datefrom smalldatetime

Exec storedproc1 @datefrom OUTPUT 

Exec storedproc2 @datefrom 
```

这是另一个使用临时表从存储过程中获取结果集的简单示例

```
DECLARE @datefrom smalldatetime

CREATE TABLE #tmp (dateFrom smalldatetime)

INSERT #tmp
EXEC storedproc1

SELECT TOP 1 @datefrom = dateFrom FROM #tmp 

Exec storedproc2 @datefrom 
```

您还可以使用**共享临时表**。您将在我提供的文章中找到实现。

祝你好运！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T07:12:02.763

参数`@datefrom`必须是输出参数`sp_DateFromRange`：

```
create procedure DateFromRange(
  @datefrom datetime = null output
)
as begin
--body
end 
```

你可以试试：

```
declare @date datetime

exec sp_DateFromRange @date out

exec storedproc2 @datefrom = @date ,  @dateto = @value
or
exec storedproc2 @date,  @value 
```

编辑：

**使用结果集**

```
declare @date datetime

exec @date = sp_DateFromRange

exec storedproc2 @datefrom = @date ,  @dateto = @value
or
exec storedproc2 @date,  @value 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-13T07:12:48.990

您可以使用`insert ... exec`捕获存储过程的输出集。您插入的表的定义必须与存储过程的输出完全匹配。

例如：

```
if object_id('proc1') is not null
    drop procedure proc1
if object_id('proc2') is not null
    drop procedure proc2
go
create procedure proc1
as
select getdate() as col1
go
create procedure proc2
    @col2 datetime
as
print 'Col2 = ' + cast(@col2 as varchar(24))
go
declare @sp_result table (col1 datetime)

insert  @sp_result
exec    proc1

declare @col1 datetime
select  @col1 = col1
from    @sp_result

exec proc2 @col1 
```

这打印：

```
(1 row(s) affected)
Col2 = Sep 13 2012  9:11AM 
```

# java - JSP 表达式语言和动态属性名称

> ID：12401034
> 
> 赞同：7
> 
> 时间：2012-09-13T07:01:04.900
> 
> 标签：java, jsp, jstl, el

我正在尝试做一些看起来应该相对简单并且遇到一些障碍的事情。

假设我有一个产品列表，我在 name 下作为请求属性公开`products`。还假设每个产品都有一个`id`字段，并且我还设置了一堆请求属性，以 的形式`selectedProduct_<product-id>`指示选择了哪些。

我知道有更好的方法来表示此信息，例如将所有选定的 id 放入 a`Map`并对其进行检查，但让我们假设无论出于何种原因我都无法使用该方法。

所以我想做的是`products`仅在`selectedProduct_...`为当前产品设置属性时迭代并发出一些标记。就像是：

```
<c:forEach var="product" items="${products}">
    <c:if test="${! empty selectedProduct_${product.id}}">
        <div class="productId">${product.id}</div>
    </c:if>
</c:forEach> 
```

但这当然行不通，因为它会在`${! empty selectedProduct_${product.id}}`.

如果我将产品 ID 硬编码到表达式中，将会起作用，例如：

`${! empty selectedProduct_17}`

...假设“17”是有效的产品 ID。显然这不切实际，但希望它说明了我正在努力实现的目标。基本上我需要：

1.  确定循环中每次迭代使用的正确`selectedProduct_...`值`forEach`。这样做很简单`<c:set var="key" value="selectedProduct_${product.id}"/>`，除了我不确定如何获取`key`并使用它来获取具有该名称的请求属性的值（没有作弊和在`<% %>`块内运行文字 Java 代码）。
2.  获取我在 #1 中确定的名称的请求属性的值。这似乎是棘手的部分。

这可能使用纯 JSP/JSTL 吗？我知道我可以在其中运行一些 Java 代码`<% %>`来解决这个问题，但这似乎是非常糟糕的形式。肯定存在更优雅的解决方案吗？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-09-13T08:16:12.277

您可以使用[隐式对象](http://docs.oracle.com/javaee/1.4/tutorial/doc/JSPIntro7.html)：

> 有些对象允许访问使用范围对象中描述的各种范围变量。
> 
> *   pageScope：将页面范围的变量名称映射到它们的值
> *   requestScope：将请求范围的变量名称映射到它们的值
> *   sessionScope：将会话范围的变量名称映射到它们的值
> *   applicationScope：将应用程序范围的变量名称映射到它们的值
> 
> 当表达式按名称引用这些对象之一时，将返回适当的对象而不是相应的属性。例如，${pageContext} 返回 PageContext 对象，即使存在包含其他值的现有 pageContext 属性。

因此，例如：

```
<c:set var="selectedProductAttrName" value="selectedProduct_${product.id}"/>
${requestScope[selectedProductAttrName]} 
```

# php - 在 PHP 中合并多个 PNG 的最有效方法

> ID：12401040
> 
> 赞同：0
> 
> 时间：2012-09-13T07:01:40.240
> 
> 标签：php, performance, image, merge, png

我运行一个网站，该网站需要定期遍历一堆具有透明度的 PNG 并将它们合并在一起。有时这可能是一个漫长的过程，所以我想知道最有效的方法是什么。我正在使用 GD，因为我听说 ImageMagick 并不是真的更快..

```
$firstTime = true;  // need to know if it's the first time through the loop
$img = null;        // placeholder for each iterative image
$base = null;       // will become the final merged image
$width = 0;
$height = 0;

while( $src = getNextImageName() ){
    $imageHandle = imagecreatefrompng($src);
    imageAlphaBlending($imageHandle, true);
    imageSaveAlpha($imageHandle, true);

    if( $firstTime ){
        $w = imagesx( $img );       // first time in we need to
        $h = imagesy( $img );       // save the width & height off
        $firstTime = false;
        $base = $img;               // copy the first image to be the 'base'
    } else {
        // if it's not the first time, copy the current image on top of base
        // and then delete the current image from memory
        imagecopy($base, $img, 0, 0, 0, 0, $w, $h);
        imagedestroy($img);
    }
}

// final cleanup
imagepng($base);
imagedestroy($base); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T07:29:46.737

您绝对应该尝试一下 ImageMagick。它很容易实现，只需使用`exec('composite 1.png 2.png');`. 它有据可查，不受 PHP 内存限制的限制，性能还可以。

此外，ImageMagick 非常适合作为 bash 脚本或其他终端功能的独立工具，这意味着您所学的内容在 PHP 之外也很有用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T07:38:48.877

根据[基准](http://sven.webiny.com/php-gd-vs-imagemagick-benchmark/)，ImageMagick 比 GD 更快。这至少是一个开始。

我不知道您是否也可以将 PHP 的优先级提高到高于正常/高？

# c# - 大数据在内存中的表示

> ID：12401042
> 
> 赞同：7
> 
> 时间：2012-09-13T07:01:50.923
> 
> 标签：c#

目前，我正在开展一个项目，我需要将 GB 的数据带到客户端机器上以执行某些任务，并且该任务需要整个数据，因为它对数据进行一些分析并有助于决策过程。

所以问题是，在不影响客户端机器和应用程序性能的情况下，将大量数据管理到内存中的最佳实践和合适方法是什么。

注意：在应用程序加载时，我们可以花时间将数据从数据库带到客户端机器，这在我们的案例中是完全可以接受的。但是一旦数据在启动时加载到应用程序中，性能就非常重要。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-09-13T07:21:44.560

如果没有问题陈述，即您当前面临什么问题，这有点难以回答，但以下只是*一些想法*，基于我们最近在类似情况下的一些经验。然而，要改变这种类型的模型需要做很多工作——所以这也取决于你可以投入多少来尝试“修复”它，我不能保证“你的问题”与“我们的问题”是一样的问题”，如果你明白我的意思。因此，如果以下方法对您不起作用，请不要生气！

* * *

将这么多数据加载到内存中总是会产生一些影响，但是，我想我明白你在做什么......

当天真地加载这么多数据时，您将拥有许多（数百万？）对象和类似或更多数量的引用。你显然会想要使用 x64，所以引用会加起来——但就*性能*而言，最大的问题将是垃圾收集。您有很多**无法收集**的对象，但是 GC 会知道您正在使用大量内存，并且*无论如何*都会定期尝试。这是我在[这里更详细地查看](http://marcgravell.blogspot.co.uk/2011/10/assault-by-gc.html)的内容，但下图显示了影响 - 特别是，那些“尖峰”都是 GC 杀死性能：

![http://marcgravell.blogspot.co.uk/2011/10/assault-by-gc.html](../Images/c6bcbad18802258b238999154fcefc39.png)

对于这种情况（大量数据加载，从未释放），我们切换到*使用 structs*，即将数据加载到：

```
struct Foo {
    private readonly int id;
    private readonly double value;
    public Foo(int id, double value) {
        this.id = id;
        this.value = value;
    }
    public int Id {get{return id;}}
    public double Value {get{return value;}}
} 
```

并将它们直接存储*在数组*（不是列表）中：

```
Foo[] foos = ... 
```

这样做的意义在于，因为其中一些结构非常大，我们不希望它们在堆栈上多次复制自己，但是使用数组你可以这样做：

```
private void SomeMethod(ref Foo foo) {
     if(foo.Value == ...) {blah blah blah}
}
// call ^^^
int index = 17;
SomeMethod(ref foos[index]); 
```

请注意，我们*直接*传递了对象——它从未被复制；`foo.Value`实际上是直接查看数组*内部。*当您需要对象之间的关系时，棘手的部分就开始了。您不能在此处存储*引用*，因为它是 a `struct`，并且您不能*存储*它。但是，您*可以*做的是存储*索引*（到数组中）。例如：

```
struct Customer {
      ... more not shown
      public int FooIndex { get { return fooIndex; } }
} 
```

不如 方便`customer.Foo`，但以下效果很好：

```
Foo foo = foos[customer.FooIndex];
// or, when passing to a method, SomeMethod(ref foos[customer.FooIndex]); 
```

关键点：

*   我们现在使用“引用”的一半大小（an`int`是 4 个字节；x64 上的引用是 8 个字节）
*   我们在内存中没有几百万个对象头
*   我们没有巨大的对象图供 GC 查看；只有少数数组可以让 GC*快速*查看
*   但是使用起来不太方便，加载时需要一些初始处理

补充说明：

*   弦乐是杀手；如果你有数百万个字符串，那就有问题了；至少，如果您有重复的字符串，请确保您进行一些自定义实习（不是`string.Intern`，那会很糟糕）以确保每个重复值只有一个实例，而不是 800,000 个具有相同内容的字符串
*   如果您有有限长度的重复数据，而不是子列表/数组，您可以考虑使用`fixed`数组；这需要`unsafe`代码，但避免了另外无数的对象和引用

* * *

作为一个额外的脚注，对于这么多的数据，您应该非常认真地考虑您的序列化协议，即您如何通过网络发送数据。我强烈建议远离`XmlSerializer`,`DataContractSerializer`或`BinaryFormatter`. 如果您需要有关此主题的指示，请告诉我。

# windows - 在 Windows 8 商店应用程序中调用 GetFileAsync 时调试器总是中断（metro 风格）

> ID：12401043
> 
> 赞同：2
> 
> 时间：2012-09-13T07:01:53.150
> 
> 标签：windows, microsoft-metro

这个问题让我困惑了几天，当代码运行到

```
await ApplicationData.Current.LocalFolder.GetFileAsync(udFileName); 
```

该应用程序总是跳转到

```
UnhandledException += (sender, e) =>
        {
            if (global::System.Diagnostics.Debugger.IsAttached) global::System.Diagnostics.Debugger.Break();
        }; 
```

异常e是：</p>

```
{Windows.UI.Xaml.UnhandledExceptionEventArgs}
Exception   {"Object reference not set to an instance of an object."}   
System.Exception {System.NullReferenceException}
Message "System.NullReferenceException....... 
```

以下是我调用的函数：

```
public async void RestoreUserDefaults()
    {
        string udFileName = "userdefaults.udef";
        bool bExist = true;
        {
            try
            {
                await ApplicationData.Current.LocalFolder.GetFileAsync(udFileName);
            }
            catch (FileNotFoundException)
            {
                bExist = false;
            }
        }
    } 
```

我已将文件类型添加到 package.appxmanifest。

任何人都可以帮助我，非常感谢......

# iphone - 应用无法在 iOS 6 上部署的应用现在可以提交吗？

> ID：12401044
> 
> 赞同：0
> 
> 时间：2012-09-13T07:02:01.483
> 
> 标签：iphone, app-store, submission

我的应用程序已准备好向消费者提供最新的 iOS 版本。现在 iOS 6 应用程序已被接受，我是否必须让我的应用程序可部署在 iOS 6 上？或者我可以指定应用程序仅在 iOS 5.1.1 上运行并且仍然提交吗？这样做会导致拒绝说需要支持 iOS 6 吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T10:29:50.047

1.  您只能指定最低 iOS 版本，而不是最高版本。
2.  只需提交它，如果你不想花一些时间让它 iOS 6 屏幕感知

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-13T10:36:39.853

您可以提交使用 Xcode 4.4.1 编译的应用程序，它们将在 iOS 6 上运行，但以信箱模式运行。它将被接受。

但我建议将它采用到 iOS 6。我只花了 2 个小时就升级了我的一个 iOS 6 应用程序。这解释了过程：[在 xcode 中开发全屏 4 英寸应用程序](https://stackoverflow.com/questions/12402803/developing-fullscreen-4inch-app-in-xcode/12402922#12402922)

# silverlight-4.0 - Silverlight 替代 AlternatingRowsDefaultCellStyle

> ID：12401047
> 
> 赞同：1
> 
> 时间：2012-09-13T07:02:14.717
> 
> 标签：silverlight-4.0, datagrid

我正在尝试设置 DataGrid 的备用行的单元格模板，类似于“AlternatingRowBackground”，但不仅仅是用于背景颜色。

DataGridView 的“AlternatingRowsDefaultCellStyle”是否有替代方案？

我可以在我自己的继承 DataGrid 的类中以编程方式执行此操作（使用 LoadingRow 事件）。问题是我需要知道行的索引以确定要使用的样式。我似乎找不到获取行索引的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T07:21:12.127

发现 LoadingRow 事件中有一个 GetIndex 方法，因此我可以使用它来确定分配行的样式。

```
this.LoadingRow += (s,e) =>
{
    if(e.Row.GetIndex() % 2 == 1)
        e.Row.Style = //alternate Style
}; 
```

# php - 正则表达式非捕获组不起作用

> ID：12401048
> 
> 赞同：1
> 
> 时间：2012-09-13T07:02:15.240
> 
> 标签：php, regex

数据：

> 今天 13/9 : Aristides, Aristeides, Aristeidis, Kornelios, Kornilios, Kornelia (来源: www.namedays.gr)

正则表达式模式：

```
/(?:today \d{1,2}\/\d{1,2}\s\:\s)([\w[:blank:],]+)(?:\s\(source\s\:\swww\.namedays\.gr\))/ 
```

结果：

```
Array
(
    [0] => today 13/9 : Aristides, Aristeides, Aristeidis, Kornelios, Kornilios, Kornelia (source : www.namedays.gr)
    [1] => Aristides, Aristeides, Aristeidis, Kornelios, Kornilios, Kornelia
) 
```

我的问题是，为什么我的模式不只返回名称 -> Array[1] 以及为什么在我的结果 Array[0] 中也包含非捕获组？

我想不明白。我只期待数组 [1]。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-13T07:04:24.620

第`0`th 个捕获组始终包含整个匹配的文本。第一个捕获组始终是`$1`（或命名的）。

如果这是一个问题，你总是`unset()`可以的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T07:06:39.713

一切都是正确的。第 0 组始终是整场比赛，不分组，第 1 组是第一个捕获组结果。

例如，参见[preg_match](http://php.net/manual/en/function.preg-match.php)文档，

> 如果提供了匹配项，则将其填充为搜索结果。$matches[0] 将包含与完整模式匹配的文本，$matches[1] 将包含与第一个捕获的带括号的子模式匹配的文本，依此类推。

# php - 在我的网站上显示最近提交的文章/图片

> ID：12401052
> 
> 赞同：0
> 
> 时间：2012-09-13T07:02:28.393
> 
> 标签：php, javascript, html, web

我正在尝试让用户向我的页面提交激励性作品或图片，以显示在主页和后续页面（即 domain.com/page/2）上，按最近排序，每个页面显示 15 个.

我还希望能够从每个给定的图像/片段创建一个单独的页面，以便用户可以对其发表评论，从主页上文章的链接进入单独的页面，自动生成并附加到每个页面15 件。类似于[http://icanhas.cheezburger.com/](http://icanhas.cheezburger.com/)具有各自的图像页面。

我应该采取什么样的方法来达到这个结果？我看过一个简单的模板，带有评论，用户提交的部分将被应用于创建单独的页面，但我不确定主页（和后续页面）上的最新内容，并且是一个 php模板是正确的想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T07:05:56.150

将有关文件的数据与插入时间的日期时间列一起存储在数据库中，这将很容易让您查询上周/天/小时/分钟等的数据。

请注意，不要将实际*文件*存储在数据库中，只存储其上的元信息，例如提交的用户、ID、标签等。

然后使用这样的查询（mysql格式）：

```
select id, fileName from yourTable where dateColumn>date_sub(now(), interval 1 day) 
```

这将返回 DateColumn 更新到从现在起不到 24 小时的任何图像。

有了这些可用的数据，您可以创建一个脚本，该脚本使用一段代码向用户显示其中的任何一个。您可以使用分页将结果拆分到不同的页面 - 或者您可以删除`dateColumn>date_sub()`并简单地按 DateTime 排序，以便您的一个脚本可以将查看者从最新图像一直带到数据库中的最终图像。

编辑：要将结果拆分为一组，假设您正在使用以下查询：

```
select
    col1,
    col2
from
    yourTable
order by
    dateColumn desc; 
```

该查询将返回 ENTIRE 表，但如果您只想要最新的 10 条记录，则可以在其中使用 limit 子句：

```
select
    col1,
    col2
from
    yourTable
order by
    dateColumn desc
limit 0,10; 
```

限制的语法是（限制：[要跳过的行数]，[要返回的行数]）。所以在下一页使用：

```
limit 10,10 
```

然后带来接下来的 10 条记录，依此类推。

# c# - c# 字符串替换关键字

> ID：12401055
> 
> 赞同：1
> 
> 时间：2012-09-13T07:02:38.773
> 
> 标签：c#, regex

我有一个长字符串，如下所示。当它找到一些关键字时，我想替换一些字符`(.abc_ or .ABC_)`。当系统逐行读取时，如果找到关键字，则将替换前面的单词变成`"john"`

```
insert into material.abc_Inventory; Delete * from table A; ....   
insert into job.ABC_Inventory; Show select .....; .... 
```

变成

```
insert into john.ABC_Inventory; Delete * from table A;    
insert into john.ABC_Inventory; Show select .....; 
```

下面是我的代码。

```
string output = string.Empty;
using (StringReader reader = new StringReader(content))
{
    string line;
    while ((line = reader.ReadLine()) != null)
    {
        if (line.Contains(".ABC_"))
            line.Replace(" word in front of the keyword" + line.Substring(line.IndexOf(".ABC_")), " john" + line.Substring(line.IndexOf(".ABC_")));
            output += whole line of edited code; 

        else if (line.Contains(".abc_"))
            line.Replace(" word in front of the keyword" + line.Substring(line.IndexOf(".abc_")), " john" + line.Substring(line.IndexOf(".abc_")));
            output += whole line of edited code; 

        else
            output += line.ToString();
    }
} 
```

我无法在关键字前面获得材料或工作一词。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-13T07:18:39.580

```
content =  Regex.Replace(content, @"\s\w+\.(abc|ABC)_", " john.$1_"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T07:14:34.553

```
var list = line.Split(new[] {".abc_", ".ABC_"}, 
                              StringSplitOptions.RemoveEmptyEntries);
if (list.Count() > 1)
{
    string toReplace = list.First().Split(' ').Last();
    string output = line.Replace(toReplace, "john");
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-13T07:13:30.720

使用 String.Format 而不是这个：

```
var stringBuffer = new StringBuffer();
...
line = "insert into {0}.ABC_Inventory; Show select ..."
stringBuffer.AppendFormat(line, arg1, arg2, arg3);
... 
```

# c++ - 在构造函数中创建对象

> ID：12401057
> 
> 赞同：2
> 
> 时间：2012-09-13T07:02:44.197
> 
> 标签：c++, unit-testing, constructor, factory

我以某种方式读到在构造函数中创建对象是不好的风格......但是，我忘记了为什么它被认为是不好的风格（尤其是在使用依赖注入时）。

下面是在构造函数中作为伪代码创建对象的示例：

```
Myclass
{
    Myclass(MyMemberFactory& fac)
    {
        for(Some criteria)
            push_back(fac.createMyMemberType());
    }

    vector<MyMemberType*> getMyMember();
    {
        return myMember_;
    }
    ...

private:
    vector<MyMemberType*> myMember_;
} 
```

因此，您可以毫无问题地使用单元测试，因为您可以模拟 MyMemberFactory。如果我要在单独的初始化方法中移动 for 循环，则需要检查双重初始化，如果初始化已经完成，所有 getter 都需要首先检查。这里的代码，通过使用单独的初始化：

```
Myclass
{
    Myclass() : isInitialized_(false)
    {

    }

    void initialize(MyMemberFactory& fac);
    {
        if(isInitialized_)
            throw "Error: Double-Init is not permitted.";

        for(Some criteria)
            push_back(fac.createMyMemberType());

        isInitialized_ =true;
    }

    vector<MyMemberType*> getMyMember();
    {
        if(isInitialized_)
            throw "Initialize first!";

        return myMember_;
    }
    ...

private:
    vector<MyMemberType*> myMember_;
    bool isInitialized_;
} 
```

所以知道任何原因，为什么我应该使用第二种方法而不是第一种方法？或者，也许我只是脑子有问题，而第一种方法完全没问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-13T07:05:57.117

如果构造函数抛出异常，析构函数将不会被调用，因此您将失去所有手动分配的内存。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-13T07:06:39.803

第一种方法实际上很好。*并不是在构造函数中创建对象有问题，而是在构造*函数中这样做是有问题的。所以

```
Myclass()
{
    MyMemberFactory fac;
    for(Some criteria)
        push_back(fac.createMyMemberType());
} 
```

会有问题，因为客户不能再使用不同的工厂（例如用于测试）。

# javascript - 如何使用平滑（导航栏）正确编程 jQuery 动画

> ID：12401061
> 
> 赞同：3
> 
> 时间：2012-09-13T07:02:49.113
> 
> 标签：javascript, jquery, navigation, smoothing

我有一个向下滑动的导航栏，非常简单，完成后，一条像素大小的小线穿过它以分隔子页面。

当您将鼠标快速悬停在它上面时，它往往会保持可见。正如您从过滤器和停止功能中看到的那样，我不希望发生任何令人不安的事情——如果所有这些事情都非常顺利，那就太好了。

有什么方法可以让它顺利工作，不管用户有多迟钝以及它是超级响应的？

```
$(".menu").hover(function() {
    $(".children").filter(':hidden').slideDown(300, function() {
        $(".menu-line").stop(true, false).animate({ width: "903px" });
    });
}, function() {
    $(".menu-line").stop(true, false).animate({ width: "0px" }, function() {
        $(".children").slideUp(300);
    });
}); 
```

工作示例：http: [//jsfiddle.net/varFS/](http://jsfiddle.net/varFS/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T07:48:15.127

Titanium，您必须使用超时来隐藏菜单以获得所需的结果：

```
$(".children").css("padding-top", "21px").hide();
$(".menu").hover(function() {
    $(".children").filter(':hidden').slideDown(300, function() {
        $(".menu-line").stop(true, false).animate({
            width: "400px"
        });
    });
}, function() {
    setTimeout(function() {
        if (!$(".menu, .menu ul, .menu ul li").is(':focus')) {
            $(".children").css("padding-top", "21px").hide();
        }
        $(".menu-line").stop(true, false).animate({
            width: "0px"
        }, function() {
            $(".children").slideUp(300);
        });
    }, 400);
});​ 
```

[工作示例](http://jsfiddle.net/BS9Cy/)

# iphone - 在 iPhone 应用程序上处理严重问题的方法

> ID：12401063
> 
> 赞同：0
> 
> 时间：2012-09-13T07:03:04.923
> 
> 标签：iphone, error-handling, notifications

假设您正在做一些对应用程序在启动时的可用性至关重要的事情（例如复制 SQLite DB 或设置 CoreData），并且出现了不会导致崩溃但您不希望用户继续的错误。你能做什么？

目前`abort()`，我的应用程序已经`NSAssert(false,...)`调用以确保应用程序不会继续，显然是在记录错误之后。但不知何故，我认为它不会在应用商店上与苹果一起得分。

有人知道在这种情况下我能做什么吗？例如，我知道如果没有连接，您可以将您的应用程序置于“离线”模式，但可以说数据库无法正确设置（为了争论）。没有“离线”，因此用户无法继续。用户需要退出应用程序并重试或报告问题。你不同意，还是我错过了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T08:51:54.953

我刚刚决定创建一个视图，上面有一条消息，向用户解释发生了严重错误，并解释了解决它的一些步骤。它会阻止用户使用该应用程序，直到它被解决。因此，如果数据库丢失或模型架构与数据库架构不匹配，它将显示该视图。这是我采取的一种方法。如果有人有不同的方式，我想听听。

# iphone - [NSMutableData data] 和 [[NSMutableData alloc]init] 的区别

> ID：12401069
> 
> 赞同：0
> 
> 时间：2012-09-13T07:03:35.267
> 
> 标签：iphone, ios

我在我的应用程序中进行 JSON 解析，当我使用**responseData = [NSMutableData data];** 它在 [responseData setLength:0] 上崩溃；

```
- (void)connection:(NSURLConnection *)connection didReceiveResponse:(NSURLResponse *)response {

   [responseData setLength:0];   // CRASH HERE

} 
```

当我使用**responseData=[[NSMutableData alloc]init];** 我的程序运行良好。我已经在 .h 文件中创建了属性

```
@property (strong, nonatomic) NSMutableData* responseData; 
```

并在 .m 文件中合成

```
@synthesize responseData; 
```

**问题：****[NSMutableData data]**和**[[NSMutableData alloc]init]**有什么区别？

 **谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-13T07:09:10.723

`[NSMutableData data]`返回一个自动释放的对象，而`[[NSMutableData alloc] init]`返回一个保留的对象。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-13T07:30:39.067

`[NSMutableData data]`返回一个`autorelease`对象，即它将被添加到自动释放池中，并在帧结束时对该对象调用释放，如果引用计数变为 0，它将从内存中清除。

`[[NSMutableData alloc] init]`返回一个引用计数为 1 的对象，在这里您需要在`release`完成后通过调用显式将其从内存中删除。

因此，您的问题的解决方案是：

```
// 1\. retain explicitly
responseData = [[NSMutableData data] retain];

// 2\. or else define
@property (retain, nonatomic) 
```

第二个选项将保留对象。因此，即使`release`在`autorelease`池中调用它也不会被刷新为保留（引用计数不会为零）

当您使用`self.responseData`时，它的引用计数增加 1，因此即使您分配`autorelease`对象，由于声明的属性，它也会保留：

```
self.responseData = [NSMutableData data]; 
```**

# callback - jQuery：如何将参数传递给事件监听器的回调？

> ID：12401078
> 
> 赞同：4
> 
> 时间：2012-09-13T07:04:22.960
> 
> 标签：callback, jquery

```
function myClass(myobject){
      var myclass = {};

      myclass.registerEvent = function(){
          $('#'+myobject.id).live('someEventThatTriggersRightAway', runMe);
      };

      runMe = function(){
            $('#'+myobject.id).die('someEventThatTriggersRightAway', runMe);
            console.log("Hello "+myobject.name);
      };

      return myclass;
}

var instance1 = new myClass({id:'button1',name:'MATO'});
var instance2 = new myClass({id:'button2',name:'YAMA'}); 
```

当我运行这段代码时

```
instance1.registerEvent(); 
```

结果是

```
Hello YAMA 
```

就好像第一个实例已被第二个实例覆盖。如果我可以在事件的回调中传递“myobject”，我可以解决这个问题，但我不知道该怎么做。如果它有参数，我也不能杀死它。我怎样才能做到这一点？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T07:13:07.360

您错过了`var`from `runMe`，因此`runMe`泄漏到全局执行上下文中。因此，每次调用时，对in`myClass`的引用都会发生变化。`myobject``runMe`

```
var runMe = function(){
    $('#'+myobject.id).die('someEventThatTriggersRightAway', runMe);
    console.log("Hello "+myobject.name);
}; 
```

这是一个[工作示例](http://jsfiddle.net/SAEP7/)。

* * *

旁注：您是否知道 jQuery`.live()`和`.die()`方法已被弃用？您应该使用`.on()`(jQuery 1.7+) 或`.delegate()`代替。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T07:24:42.530

下面的答案纯粹是理论上的，因为`.live()`和`.die()`已被弃用，因此*不应再使用*。要使您的代码保持最新，请将下面给出的`.live()`/`.die()`调用替换为以下内容：

```
// for .live()
$(document).on('click', '#'+myobject.id, myobject, runMe);

// for .die()
$(document).off('click', '#'+e.data.id, runMe); 
```

在这里，您可以并且应该用`document`按钮的最近的静态父元素替换。[**新代码演示**](http://jsfiddle.net/damz7/1/)

* * *

根据[文档](http://api.jquery.com/live/)，数据是该`.live()`方法的可选第二个参数，您可以通过[事件对象](http://api.jquery.com/event.data/)访问它。使用如下：

```
function myClass(myobject){
      var myclass = {};

      myclass.registerEvent = function(){
          $('#'+myobject.id).live('click', myobject, runMe);
      };

      var runMe = function(e){
          $('#'+e.data.id).die('click', runMe);
          console.log("Hello "+e.data.name);
      };

      return myclass;
}

var instance1 = new myClass({id:'button1',name:'MATO'});
var instance2 = new myClass({id:'button2',name:'YAMA'});

instance1.registerEvent();
instance2.registerEvent(); 
```

[**旧代码工作演示**](http://jsfiddle.net/damz7/)

# javascript - 访问函数外的变量

> ID：12401081
> 
> 赞同：0
> 
> 时间：2012-09-13T07:04:47.990
> 
> 标签：javascript, global-variables, scope

我有一个带有函数的javascript代码：

```
function convertTime()
function loadZive() 
```

假设我有以下代码：

```
function convertTime(){
    alert(exampleVariable);
    };
function loadZive(){
    var exampleVariable = 3;
    convertTime();
    }; 
```

看来我的`convertTime()`功能无法访问`exampleVariable`。有什么解决方法吗？

这是完整的代码：

```
function convertTime(publishedDate){
    alert(publishedDate);
    var date = publishedDate;
    var publishedDay = date.toLocaleDateString();
    var publishedHour = date.getHours();            //nemozno pouzit toLocaleTimeString (cielovy format ma byt bez sekund)
    if (publishedHour < 10){
        publishedHour = "0" + publishedHour;
    };
    var publishedMinute = date.getMinutes();        //nacitanie hodin a minut
    if (publishedMinute < 10){
        publishedMinute = "0" + publishedMinute;
    };
    var publishedTime = publishedHour +":"+ publishedMinute;    //ich nasledne spojenie do casoveho formatu HH:MM
    var publishedDateConverted = publishedDay +", "+ publishedTime;
};
function loadZive(publishedDateConverted){
google.load("feeds", "1");  
    function initialize() {
        var feed = new google.feeds.Feed("http://www.zive.sk/rss/sc-47/default.aspx");
        feed.setNumEntries(window.localStorage.getItem("entriesNumber"));
        feed.load(function(result) {
            if (!result.error) {
                var feedlist = document.getElementById("feedZive");
                for (var i = 0; i < result.feed.entries.length; i++) {
                    var li = document.createElement("li");
                    var entry = result.feed.entries[i];
                    var A = document.createElement("A");
                    var descriptionSettings = window.localStorage.getItem("descriptionSettings");
                    if (descriptionSettings=="true"){
                        var h3 = document.createElement("h3");
                        var p = document.createElement("p");
                        var pDate = document.createElement("p");
                        pDate.setAttribute("class","ui-li-aside");
                        var publishedDate = new Date(entry.publishedDate);
                        convertTime();
                        pDate.appendChild(document.createTextNode(publishedDateConverted));
                        h3.appendChild(document.createTextNode(entry.title));
                        p.appendChild(document.createTextNode(entry.content));
                        A.setAttribute("href",entry.link);
                        A.appendChild(h3);
                        A.appendChild(p);
                        A.appendChild(pDate);
                        }
                    else{
                        A.setAttribute("href",entry.link);
                        A.appendChild(document.createTextNode(entry.title));
                    };
                    li.appendChild(A);
                    feedlist.appendChild(li);
                }
                $("#feedZive").listview("refresh");
            }
        });
    }
    google.setOnLoadCallback(initialize);   
}; 
```

警报结果未定义。 **PS**：`exampleVariable`不是用户定义的；它是从提要加载的，所以我不能在`convertTime()`函数之前定义它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-13T07:08:29.730

正如 Danny 所说，或者您也可以通过这种方式传递变量：

```
function convertTime(exampleVariable){
    alert(exampleVariable);
};
function loadZive(){
    var exampleVariable = 3;
    convertTime(exampleVariable);
}; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T07:07:27.783

`var`从中删除`loadZive()`，这会使变量`loadZive()`仅本地化。

或者，`exampleVariable`作为参数传递给`convertTime()`.

# java - Cipher.WRAP_MODE 与 Cipher.ENCRYPT_MODE

> ID：12401087
> 
> 赞同：4
> 
> 时间：2012-09-13T07:05:00.927
> 
> 标签：java, aes, encryption

使用 Cipher.ENCRYPT_MODE 加密密钥以使用 Cipher.WRAP_MODE 进行传输是否有任何区别/好处/缺点？

我的理解是我仍然需要第二个可能更少的密钥来包装/加密和解包/解密密钥如果我使用 CBC 模式......我还需要为两者提供唯一的 IV.. ..

那么 WRAP 和 UNWRAP 的区别/要点是什么？

顺便说一句..我正在使用 AES 加密

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-13T12:19:20.683

检查这个：[http](http://flylib.com/books/en/1.274.1.29/1/) : //flylib.com/books/en/1.274.1.29/1/ 它解释了 Cipher.WRAP_MODE 和 Cipher.UNWRAP_MODE 的作用以及它与你自己做的不同之处。

# php - 将 FB 图形 API 返回的 Unicode 转换为英文

> ID：12401093
> 
> 赞同：1
> 
> 时间：2012-09-13T07:05:14.523
> 
> 标签：php, ios, facebook-graph-api

我在用户名的 FB Graph 请求中收到 unicode 字符。如何在 iOS 应用程序中将其转换为英文？PHP中也有类似的东西吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T07:29:37.953

最好的答案是用他的语言显示他的名字。

我想到的最好的转换是使用`json_decode()`：

```
$name = '\u9648\u73ab\u7af9';
echo json_decode('"'.$name.'"');
// ouputs: 陈玫竹 
```

我建议`json_decode()`是因为它`\uxxxx`直接支持语法和其他 unicode 或`utf-8`字符。

# android - ANDROID 偏好活动未设置默认值

> ID：12401098
> 
> 赞同：0
> 
> 时间：2012-09-13T07:05:44.800
> 
> 标签：android, android-preferences

我有一个偏好活动，并注意到列表偏好在更改时不会设置默认值。
偏好具有这些基本动力

*   如果复选框 = 未选中 --> 列出首选项条目值 = x
*   如果复选框 = 勾选 --> 列出首选项条目值 = z

当应用程序首次运行时设置默认值，但是当我勾选复选框时，之后没有值适用。

代码：

```
public class QuickPrefsActivity extends PreferenceActivity {

    @Override
    public void onCreate(Bundle savedInstanceState) { 
        super.onCreate(savedInstanceState);

        addPreferencesFromResource(R.xml.preferences);

        View title =(View)getWindow().findViewById(android.R.id.title);
        FrameLayout titlebar=(FrameLayout)title.getParent();

        TextView txt = (TextView)titlebar.getChildAt(0);
        txt.setGravity(Gravity.CENTER);

        CheckBoxPreference chckbox = (CheckBoxPreference)
                                 findPreference("french");
        if (chckbox.isChecked()) {
                ListPreference newsPref = (ListPreference)
                                 findPreference("news_feed");
                newsPref.setEntryValues(getResources().
                                  getStringArray(R.array.newsfeedfr));
                newsPref.setDefaultValue(1);
        } else {
                ListPreference news2Pref = (ListPreference)
                                  findPreference("news_feed");
                news2Pref.setEntryValues(getResources().
                                  getStringArray(R.array.newsfeed));
                news2Pref.setDefaultValue(1);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T07:29:59.387

方法`setDefaultValue()`将对象作为参数，而不是值数组中的索引。所以，你应该像这样重写你的代码：

```
String[] values = getResources().getStringArray(R.array.newsfeed)
news2Pref.setEntryValues(values);
news2Pref.setDefaultValue(values[0]); 
```

此外，您可能还应该设置条目标题：

```
news2Pref.setEntries(your_titles_array_here); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T07:31:41.103

您需要添加**onPreferenceChangeListener**如下所示...

```
final CheckBoxPreference checkboxPref = (CheckBoxPreference) getPreferenceManager().findPreference("french");

checkboxPref.setOnPreferenceChangeListener(new Preference.OnPreferenceChangeListener() {            
    public boolean onPreferenceChange(Preference preference, Object newValue) {
        if(newValue.toString().equals("true") {
          // add your code here if checkbox is checked.
        }
        else {
          // add your code here if checkbox is not checked.
        }      
        return true;
    }
}); 
```

# xml - 如何防止 xsd 生成的类被命名为“NewDataSet”？

> ID：12401099
> 
> 赞同：2
> 
> 时间：2012-09-13T07:05:47.413
> 
> 标签：xml, c#-4.0, ado.net, dataset

我正在创建一个类库，其中包含从客户端 xml 文件生成的多个数据集。

我将示例 xml 文件拖入 VStudio 并创建 .xsd 文件，将它们添加到项目中并将工具设置为 MSDataSetGenerator，然后（在收到第一个构建错误后）发现所有生成的类都称为 NewDataSet。我通过在 xsd 文件的属性对话框中设置工具命名空间来避免构建错误。但是使用多个数据集的应用程序代码变得丑陋，因为您不能使用“使用”而不会使“NewDataSet”变得模棱两可。此外，类名“NewDataSet”并不是很有用。

有没有办法覆盖/影响生成的类的命名？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-16T14:49:11.487

我已经看到了这个并像这样解决它：

将此添加到您的架构标记中...“ `xmlns:msdata="urn:schemas-microsoft-com:xml-msdata`”

例如，xsd 的前两行可能如下所示：

```
<?xml version="1.0" encoding="utf-8" ?>
<xs:schema xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:msdata="urn:schemas-microsoft-com:xml-msdata"> 
```

您的 xsd 可能将所有内容包装在一个元素中，其名称就是您想要的类名......所以这样做：

```
<xs:element name="YOUR_CLASSNAME" msdata:IsDataSet="true"> 
```

这大致就是我为使其工作所做的工作。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2017-05-09T13:12:32.853

您可以通过设置元素的`id`属性来更改生成类的名称。`schema`

[![在此处输入图像描述](../Images/92ab537fd240cfed3f572d30ec664075.png)](https://i.stack.imgur.com/fnOhl.png)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-12-05T20:02:08.360

VS 2019

更安全的变体是通过 VS 更改生成的类名。打开相应的 XSD 文件并更改方案的属性`Name`（默认为 NewDataSet）。您也可以通过通用文本编辑器进行更改，但您必须在文件中找到所有条目“NewDataSet”（它不止一个）。

# c++ - 覆盖 CURL 内部标头

> ID：12401103
> 
> 赞同：0
> 
> 时间：2012-09-13T07:06:00.683
> 
> 标签：c++, libcurl

目前，我正在使用 C++ 中的 libcurl 开发 HTTP 代理。

```
curl_easy_setopt(curl, CURLOPT_HTTPHEADER, headers); 
```

以上是我自定义 HTTP 请求标头的代码。headers 参数是 curl_slist 指针变量。我已经使用 curl_slist_append() 方法附加了所有必要的头部信息，如 Accept、Keep Alive、Referer 等。然而，当我使用wireshark观察网络流量时，我发现CURL并没有使用我自定义的headers，而是使用了“Accept: * / *\r\n”。

有谁知道如何禁用 CURL 的内部标头？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T07:16:44.990

尝试 CURLOPT_ENCODING，不了解 C++ 但在 PHP 中：

> “Accept-Encoding:”标头的内容。这使得能够对响应进行解码。支持的编码是“identity”、“deflate”和“gzip”。如果设置了空字符串“”，则会发送包含所有支持的编码类型的标头。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T08:22:48.883

CURLOPT_HTTPHEADER 是添加、删除或替换内部使用的标头的方法。如果您对此有疑问，请向我们展示一个重复该问题的完整程序，我们可能会提供帮助。

# android - 如何以编程方式检查热点是否启用或禁用？

> ID：12401108
> 
> 赞同：9
> 
> 时间：2012-09-13T07:06:16.647
> 
> 标签：android

> **可能重复：**
> [如何检测 WiFi 网络共享状态](https://stackoverflow.com/questions/9065592/how-to-detect-wifi-tethering-state)

我需要通过我的应用程序检查热点是否在我的设备上？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-01-18T18:32:15.893

代码： **Java**

```
Method method = wifiManager.getClass().getDeclaredMethod("getWifiApState");
method.setAccessible(true);
int actualState = (Integer) method.invoke(wifiManager, (Object[]) null); 
```

代码： **科特林**

```
 fun getHotspotState(): String {
    val wifiManager =
        applicationContext.getSystemService(Context.WIFI_SERVICE) as WifiManager
    val method: Method = wifiManager.javaClass.getMethod(
        "getWifiApState"
    )
    method.isAccessible = true
    val invoke = method.invoke(wifiManager)
    println(invoke)
    return invoke.toString();
} 
```

实际状态应该是：

```
public static int AP_STATE_DISABLING = 10;
public static int AP_STATE_DISABLED = 11;
public static int AP_STATE_ENABLING = 12;
public static int AP_STATE_ENABLED = 13;
public static int AP_STATE_FAILED = 14; 
```

[WifiManger 源代码](https://github.com/android/platform_frameworks_base/blob/master/wifi/java/android/net/wifi/WifiManager.java#L197)

希望这可能对您有所帮助！

# java - 在数据库中插入记录时出错

> ID：12401109
> 
> 赞同：1
> 
> 时间：2012-09-13T07:06:19.923
> 
> 标签：java, spring, sybase

有时在生产中我们会遇到这个问题，我试图搜索这个问题的原因，但还没有好运。

`com.sybase.jdbc3.jdbc.SybSQLException: The parameter of type 61 did not have a valid value.`

当我们手动运行查询时，它工作正常，给出了以下错误。所以我认为查询很好。

```
 SQL state [ZZZZZ]; error code [3814]; The parameter of type 61 did not have a valid value.
    ; nested exception is com.sybase.jdbc3.jdbc.SybSQLException: The parameter of type 61 did not have a valid value.
    at org.springframework.jdbc.support.AbstractFallbackSQLExceptionTranslator.translate(AbstractFallbackSQLExceptionTranslator.java:83)
    at org.springframework.jdbc.support.AbstractFallbackSQLExceptionTranslator.translate(AbstractFallbackSQLExceptionTranslator.java:80)
    at org.springframework.jdbc.support.AbstractFallbackSQLExceptionTranslator.translate(AbstractFallbackSQLExceptionTranslator.java:80)
    at org.springframework.jdbc.core.JdbcTemplate.execute(JdbcTemplate.java:602)
    at org.springframework.jdbc.core.JdbcTemplate.update(JdbcTemplate.java:811)
    at org.springframework.jdbc.core.JdbcTemplate.update(JdbcTemplate.java:833)
    at org.springframework.jdbc.object.SqlUpdate.updateByNamedParam(SqlUpdate.java:248)
    at com.cachestore.sql.PTMSSqlUpdate.updateByNamedParam(PTMSSqlUpdate.java:35)
    at com.cachestore.PTMSCacheStore.store(PTMSCacheStore.java:277)
    ... 6 more
    Caused by: com.sybase.jdbc3.jdbc.SybSQLException: The parameter of type 61 did not have a valid value.
    at com.sybase.jdbc3.tds.Tds.a(Unknown Source)
    at com.sybase.jdbc3.tds.Tds.nextResult(Unknown Source)
    at com.sybase.jdbc3.jdbc.ResultGetter.nextResult(Unknown Source)
    at com.sybase.jdbc3.jdbc.SybStatement.nextResult(Unknown Source)
    at com.sybase.jdbc3.jdbc.SybStatement.nextResult(Unknown Source)
    at com.sybase.jdbc3.jdbc.SybStatement.updateLoop(Unknown Source)
    at com.sybase.jdbc3.jdbc.SybStatement.executeUpdate(Unknown Source)
    at com.sybase.jdbc3.jdbc.SybPreparedStatement.executeUpdate(Unknown Source)
    at org.apache.commons.dbcp.DelegatingPreparedStatement.executeUpdate(DelegatingPreparedStatement.java:105)
    at org.apache.commons.dbcp.DelegatingPreparedStatement.executeUpdate(DelegatingPreparedStatement.java:105)
    at org.apache.commons.dbcp.DelegatingPreparedStatement.executeUpdate(DelegatingPreparedStatement.java:105)
    at org.springframework.jdbc.core.JdbcTemplate$2.doInPreparedStatement(JdbcTemplate.java:817)
    at org.springframework.jdbc.core.JdbcTemplate$2.doInPreparedStatement(JdbcTemplate.java:1)
    at org.springframework.jdbc.core.JdbcTemplate.execute(JdbcTemplate.java:586)
    ... 11 more 
```

你们能帮我找出错误的可能原因吗`The parameter of type 61 did not have a valid value.`，该字段是`char(2)`我怀疑的类型。

它很少发生，所以我们无法重现它。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T07:18:02.593

这是一条 Sybase 错误消息。

> 解释：由于无效或非法请求，命令失败。检查语法、语义和权限。采取消息指示的任何纠正措施。

看看[文档](http://infocenter.sybase.com/help/index.jsp?topic=/com.sybase.39996_1250/html/svrtsg/svrtsg317.htm)

尝试捕获异常并在 catch 语句中打印带有值的参数列表，这将使您能够在它发生时检查值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T07:19:10.550

不幸的是，您没有向我们展示您的代码和数据库架构。但我认为这个例外非常明显。它说 2 种类型：java 类型和 DB 类型不兼容。

据我了解，您正在尝试插入`char`或可能`char[]`插入 DB 类型的列`varchar`或类似的东西。再次检查。可能您必须在将 char 数组插入 DB 之前将其转换为字符串。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-12-25T16:12:10.203

Sybase 类型 61 是`TDS_DATETIME`（0x3D = 61 十进制）。这种类型在 中描述`TDS 5.0 Reference Pages` `Datatype Summary`。
这意味着服务器不喜欢由于大小，内容或`TDS`数据包中参数之前的参数错误而导致的值。

# android - 从 Android 应用程序检查 HDMI 显示状态？

> ID：12401110
> 
> 赞同：2
> 
> 时间：2012-09-13T07:06:28.403
> 
> 标签：android, hdmi

我需要编写一个 Android 服务来检测外部 HDMI 监视器何时脱机（或重新联机）。该服务的目的是在公共电视屏幕（由 Android 驱动）之一出现故障时通知员工。问题 - 据我所知 - [Android 没有 HDMI API 的概念](https://stackoverflow.com/questions/8644665/how-to-check-the-hdmi-device-connection-status-in-android)（尽管一些制造商有自己的实现）。

使用的盒子是[安卓2.3高清1080P网络电视盒WIFI媒体播放器HDTV MP3/WMA](http://www.ebay.com/itm/New-Google-Android-2-3-HD-1080P-Internet-TV-Box-WIFI-Media-Player-HDTV-MP3-WMA-/150848795384?pt=UK_Sound_Vision_Other&hash=item231f49f2f8#ht_5725wt_928)。我最好的选择是使用[Power](http://developer.android.com/reference/android/os/PowerManager.html#isScreenOn%28%29)或[DisplayMetrics](http://developer.android.com/reference/android/util/DisplayMetrics.html) API-s 来确定当前屏幕是否为 HDMI。

这可以在Android 2.3上完成吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-14T15:02:08.613

仅从 Android 3.0 开始，常见的 sysfs 位置包含在您可以检查 HDMI 是打开还是关闭的源中 - /sys/devices/virtual/switch/hdmi/state 。在此之前（如在 Android 2.3 中）供应商使用自定义方法。尝试检查您的模型是否具有驱动程序写入此信息的某些 sysfs 位置，或者检查是否有与您可以收听的 HDMI 切换相关的粘性广播。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-03-05T04:58:35.927

您可以从位置 /sys/class/display/dispaly0.hdmi/connect 获取 hdmi 状态。它给出了正确的 Hdmi 连接和断开状态。

# jquery - 如果自定义 jQuery 验证方法通过，如何返回 false？

> ID：12401113
> 
> 赞同：0
> 
> 时间：2012-09-13T07:06:32.643
> 
> 标签：jquery, ruby-on-rails, json, jquery-validate

我创建了自己的验证，使用 json - 如果用户电子邮件不是唯一的，则操作发送响应。这是行动：

```
def checkemail
 respond_to do |format|
  format.jsonr do
    if User.where(email: params[:email]).exists? 
      render :json => {
            :status  => :false,
            }.to_json
    else
      render :json => {
            :status  => :true,
            }.to_json
     end
    end
  end
end 
```

第二种变体（**不知道怎么用**）

```
 def checkemail
   render :nothing
    if User.where(email: params[:email]).exists? 
      return false
    else
      true
    end
  end 
```

**我想编写一个自定义的 jQuery 验证方法，这里是代码**：

```
 $.validator.addMethod("uniqueness", function(value) {
    $.getJSON('http://127.0.0.1:3000/checkemail.jsonr', { email: $('#email').val() }, function(data)  {
       return data.status
    });
}, 'Your email is not unique');
 .....
 "user[email]":{         //here is no error in name
    uniqueness: true
        }, 
```

**也试过**

它不断地告诉我电子邮件不是唯一的。

我想，我经常在我的自定义验证方法中发送 true 。

**我的错误在哪里？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T07:23:26.793

`true`如果表单值有效，则该方法应返回。您的方法返回整个 JSON 对象，而不仅仅是`data->status`. `true`由于如果找到电子邮件，您的 checkemail 函数会返回，因此您的方法应该返回`!data->status`以反转它。最后，当电子邮件唯一时，您的 checkemail 函数不会返回任何对象；你需要一个`else`子句来 return `:status => false`。

代替自定义方法，使用内置的远程验证：

```
"user[email]" {
  remote: {
    url: "http://127.0.0.1:3000/checkemail.jsonr",
    type: "get",
    data: {
      email: function() { return $("#email").val(); }
    }
  }
} 
```

我认为这应该是 Ruby-on-Rails 脚本（注意：我以前从未做过 RoR，我只是基于我通过谷歌搜索找到的示例，所以我可能没有完全正确地理解语法）：

```
def checkemail
 respond_to do |format|
  format.json do
    if User.where(email: params[:email]).exists? 
      render :json => false
    else
      render :json => true
    end
  end
end 
```

# java - 如何根据用户的随机字母选择将“Bob”更改为“Tot”？

> ID：12401114
> 
> 赞同：-3
> 
> 时间：2012-09-13T07:06:34.903
> 
> 标签：java

> **可能重复：**
> [如果用户输入随机字母，如何更改给定字符串中的所有字母？](https://stackoverflow.com/questions/12400466/if-user-inputs-random-letter-how-do-i-change-all-of-that-letter-in-a-given-stri)

用户可以输入一个最喜欢的短语：Bob 喜欢建造建筑物。用户，你想替换什么字母：b 用户，你想用什么字母替换 b：t 变异短语是：Tot like tuilding tuidlings。

这就是我想要做的。它必须与任何字母或任何短语一起使用。我们的提示是字符包装是最简单的，但可以使用字符串方法来完成。请有人帮助我。我在这一行上进行了 4 个多小时，我完成了整个项目的其余部分，不知道如何做最后一步。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T07:10:12.953

怎么样：

```
String oldPhrase = "Bob likes building buildings";
String oldChar = "b";
String newChar = "t";
String newPhrase = oldPhrase.replaceAll(oldChar.toLowerCase(), newChar.toLowerCase()).replaceAll(oldChar.toUpperCase(), newChar.toUpperCase()); 
```

# jsf-2 - JSF 2 FacesConverter 不适用于复合组件

> ID：12401119
> 
> 赞同：1
> 
> 时间：2012-09-13T07:06:43.867
> 
> 标签：jsf-2, converter, composite-component

我有一个简单的复合组件，它必须渲染 h:selectManyListbox 和与之关联的 h:messages。问题在于使用面孔转换器类。它似乎无法使用它（仅在组件代码中使用时）。

复合组件代码：

```
<?xml version="1.0" encoding="UTF-8"?>
<html xmlns="http://www.w3.org/1999/xhtml"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:composite="http://java.sun.com/jsf/composite">

<!-- INTERFACE -->
<composite:interface>
    <composite:attribute name="description" required="true" />
    <composite:attribute name="fieldValue" required="true" />
    <composite:attribute name="idc" required="true" />
    <composite:attribute name="size" required="true" />
</composite:interface>

<!-- IMPLEMENTATION -->
<composite:implementation>
    <tr>
        <td nowrap="nowrap">
           <h:outputText value="#{cc.attrs.description}" />
        </td>
        <td>
           <h:selectManyListbox 
                id="#{cc.attrs.idc}" 
                size="#{cc.attrs.size}"
                value="#{cc.attrs.fieldValue}">                 
            <composite:insertChildren />
           </h:selectManyListbox>
        </td>
        <td>
           <h:message for="#{cc.attrs.idc}" />
        </td>
    </tr>
</composite:implementation>
</html> 
```

当我在 sample.xhtml 页面上使用它时（如下所示），我得到“验证错误：值无效”。......

但是当我在同一页面上输入如下代码时：

```
<tr>
    <td><h:outputText value="Plugins" /></td>
    <td>
         <h:selectManyListbox 
            id="plugins"
            value="#{bean.currentPlugins}" 
                   size="6">
        <f:selectItems value="#{bean.availablePlugins}" />
        </h:selectManyListbox>
    </td>
    <td><h:message for="plugins" /></td>
</tr> 
```

一切顺利。

托管 bean 'bean' 类是

```
@ManagedBean
@SessionScoped
public class Bean extends GenericManagedBean
        implements Serializable {
   ElementClass[] currentPlugins;

    // getter & setter for currentPlugins
    // ...

   public List<ElementClass> getAvailablePlugins() {
       // ..  some code
       return list;
   }
} 
```

和 ElementClass 是

```
public class ElementClass extends GenericEntity implements Serializable {

    private static final long serialVersionUID = 9159873495276902436L;

    @Id
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    @Basic(optional = false)
    @Column(name = "ID")
    private Integer id;

    // other fields
    // ...

    // getters & setters
    // ...

    @Override
    public int hashCode() {
        int hash = 0;
        hash += (id != null ? id.hashCode() : 0);
        return hash;
    }

    @Override
    public boolean equals(Object object) {

        if (!(object instanceof ElementClass)) {
            return false;
        }
        ElementClass other = (ElementClass) object;
        if ((this.id == null && other.id != null)
                || (this.id != null && !this.id.equals(other.id))) {
            return false;
        }
        return true;
    }
} 
```

对于 ElementClass 我有转换器类

```
@FacesConverter(forClass = ElementClass.class)
public class ElementClassConverter implements Converter {

    @Override
    public Object getAsObject(FacesContext fc, UIComponent uiComponent,
            String elemId) {

        if (!StringUtils.isEmpty(elemId)) {
            // this code gets ElementClass object entity from database
            ApplicationBean applicationBean = JSFHelper
                    .findBean("applicationBean");
            return applicationBean.getService()
                    .findElementClassById(
                            Integer.parseInt(elemId));
        } else {
            return null;
        }
    }

    @Override
    public String getAsString(FacesContext fc, UIComponent uiComponent,
            Object elem) {
        return elem != null ? ((ElementClass ) elem).getId()
                .toString() : "";
    }
} 
```

和标准问题：我做错了什么？我认为这是我缺乏知识而不是 jsf 实现错误。我使用 JBoss 7.1.1 AS 和所有东西，它捆绑了什么 + RichFaces 4。

# jquery - MVC 3 使用 jQuery 选择和取消选择复选框

> ID：12401120
> 
> 赞同：0
> 
> 时间：2012-09-13T07:06:44.700
> 
> 标签：jquery, asp.net-mvc-3

我有一个视图，它显示一些带有复选框的图像，允许用户决定是否保存每个图像。我隐藏了复选框，而是在图像顶部使用复选标记或 X 来表示它是否被选中。这一切都很好。但是，复选框的值不会改变 - 它始终保持未选中状态。

这是我在视图中的代码：

```
<div class="imgCheckBoxes">
    <label for="MyImages_Cover" class="imgCheckBox">
        <img src="http://example.com/image.jpg" alt="cover" />
    </label>
    @Html.CheckBoxFor(m => m.MyImages.Cover, new { @class = "check-box hideChkBx chkForImg" })
</div> 
```

呈现以下 HTML：

```
<div class="imgCheckBoxes">
    <label for="MyImages_Cover" class="imgCheckBox">
        <img src="http://example.com/image.jpg" alt="cover" />
    </label>
    <input class="check-box hideChkBx chkForImg" id="MyImages_Cover"
        name="MyImages.Cover" type="checkbox" value="true" />
    <input name="MyImages.Cover" type="hidden" value="false" />
 </div> 
```

我的 jQuery 代码如下（删除了一些处理定位等的代码）：

```
var closeBtn = '../Content/img/close.png';
var okBtn = '../Content/img/ok.png';

$(document).ready(function (e) {
    if ($('.imgCheckBox').html() != null && $('.imgCheckBox').html() != '') {
        initializeOkCloseImg();
    }
    $('.chkForImg').change(function (e) {
        initializeOkCloseImg();
    });
});

function initializeOkCloseImg() {
    var chkImg = '';
    $('.chkForImg').each(function (index, element) {
        chkImg = closeBtn;

        if ($(this).is(':checked')) {
            chkImg = okBtn;
        }
    });
} 
```

在切换表示已选中/未选中的图像方面，一切都正常工作，但是当表单发布时，复选框始终为 false。我在这里想念什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T07:15:36.667

在您的 post 方法中，您是否返回带有更新值的模型（在本例中为 checkboxfor 的值**MyImages.Cover**）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T19:42:40.027

好吧，我终于找到了问题所在。问题实际上不在于 jQuery，而在于我的视图模型。显然这不起作用，因为我在我的视图模型（MyImages.Cover）中使用了一个模型。出于某种原因，这使一切变得异常。当我在视图模型中使用标准布尔时，一切正常。我不知道为什么会这样，但这有点糟糕，因为我需要在几个页面上重用这个逻辑并且在每个视图模型中定义单独的属性似乎很乏味和不必要。希望有更简单的方法！

# c# - 为什么我得到“对象引用未设置为对象的实例”

> ID：12401126
> 
> 赞同：-4
> 
> 时间：2012-09-13T07:07:03.263
> 
> 标签：c#, .net

> **可能重复：**
> [.NET 中的 NullReferenceException 是什么？](https://stackoverflow.com/questions/4660142/what-is-a-nullreferenceexception-in-net)

> 你调用的对象是空的。

```
protected void Page_Load(object sender, EventArgs e)
{
   int Role = Convert.ToInt32(Request.QueryString["Role"].ToString());
   try
   {
       if (Role != 3)
       {
           gv_ViewApplicants.Visible = true;
           gv_ViewApplicants_SelectedIndexChanged(this, new EventArgs());
       }
       else
       {
           gv_ViewApplicants.Visible = false;
       }
    }
    catch (NullReferenceException e1)
    { 

    }

 } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T07:24:08.503

尝试

```
int Role = Convert.ToInt32(Request.QueryString["Role"] != null ?
                           Request.QueryString["Role"].ToString() : 
                           "0"); 
```

代替

```
int Role = Convert.ToInt32(Request.QueryString["Role"].ToString()); 
```

如果未传递查询字符串，则需要检查 null。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T07:33:14.003

第一件事

int Role = Convert.ToInt32(Request.QueryString["Role"].ToString());

该语句在 try 之外，因此如果它在 QueryString 为 null 时崩溃，或者即使 Convert.ToInt32 方法抛出异常，catch 块也不会被执行。

你可以试试这段代码

```
 int number;
  bool result = Int32.TryParse(Request.QueryString["Role"], out number);
  if (result)
  {
    // your implemntation       
  }
  else
  {        
    // your implemntation   
  } 
```

如果您仍然收到此错误，您甚至可以使用 Convert.ToString(Request.QueryString["Role"])。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-13T07:13:27.383

代码试图访问设置为 null 的引用类型变量的成员。

请使源`Request.QueryString["Role"]`不为空。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-13T07:14:20.097

你不**应该**抓住`NullReferenceException`。

但是，问题似乎出在第一行：（`try`块外的唯一一行）

```
int Role = Convert.ToInt32(Request.QueryString["Role"].ToString()); 
```

要么`Request`为空，要么`QueryString["Role"]`正在返回`null`。

共享堆栈跟踪以获得更清晰的答案。

# ms-access-2010 - 访问 - 基于主表选择创建/更新表

> ID：12401129
> 
> 赞同：0
> 
> 时间：2012-09-13T07:07:19.657
> 
> 标签：ms-access-2010

我在 MS Access 中有以下数据库结构：

*   产品 - 包含 ID（主键）、产品组（从“产品组”查找）、零售商（从“零售商”查找）、品牌（从“品牌”查找）、名称、评论、乘数、单位（从“单位”查找')、价格和使用情况（从“使用情况”查找）

[下表只有'ID'和'Product'、'Retailer'等]

*   产品组
*   零售商
*   牌
*   单位
*   用法

现在，每个产品都可以在一个或多个地方使用（由“Usage”定义），因此“Products”表中的“Usage”列允许多种选择。

每个产品都有自己的乘数，在“产品”表的“乘数”列中定义。

现在到实际问题：

我想为“使用”表中的每条记录创建一个新表。在这些表中，我想要一个选择包含在该组中的产品列表（由“产品”表中的“使用”列定义 - 观察多项选择）。在这个新表中，我希望能够输入特定于使用特定产品的位置的乘数。

回顾一下：我希望能够制作一个产品列表，其中每个产品都有自己的乘数和基于产品使用位置的辅助乘数。为了方便访问，我还希望有表格，我可以在其中检查特定地点使用的产品。

我希望你能对我想要达到的目标有所了解。

提前感谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T06:41:39.860

我想我设法解决了这个难题......

我回到绘图板并重建数据库如下：

```
Table: ProductBrand - (ID), BrandName
Table: ProductGroup - (ID), Name
Table: Supplier - (ID), Supplier_Name
Table: Units - (ID), Unit_Name
Table: UsageArea: (ID), UsageAreaName
Table: Products: (ID), ProductGroup.Name, Supplier.Name, ProductBrand.Name, Product_Name, Product_Comments, Product_BasisForCalculation, Product_Price, Units.Name, UsageArea.Name

Table: Multipliers - (Product.Name), (UsageArea.Name), Mulipliers.Multiplier 
```

括号内的列名是主键（注意“乘数”有一个由两列组成的主键）。

为了获取我需要的信息，我对每个使用区域进行了查询。这会查询该特定产品的供应商、品牌、名称、评论、计算基础、价格、单位和使用区域特定乘数。

如果有人有改进的想法，我会全神贯注:)

# javascript - 如何在不影响其他元素的情况下扩展 DIV

> ID：12401138
> 
> 赞同：7
> 
> 时间：2012-09-13T07:08:01.143
> 
> 标签：javascript, jquery, css

我想知道如何在不影响页面中其他元素布局的情况下扩展“div”。具体来说，我想实现与此类似的效果 - [http://www.ikea.com/us/en/catalog/categories/departments/kitchen/kitchen_int_lighting/](http://www.ikea.com/us/en/catalog/categories/departments/kitchen/kitchen_int_lighting/)。如果您将鼠标悬停在任何产品上，您会看到该框展开显示更多信息；但是，下面的产品图片等其他元素不受扩展的影响。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-13T07:26:08.077

使用绝对位置。
相反，您也可以通过在 div 上编写 onhover 事件并在该位置添加一个具有更高 z-index 的附加 div 来实现相同的效果。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T07:16:47.873

添加`position:absolute;`到您的 div 的样式。这样它就不会干扰其他元素但仍然会重叠它们，并且您可以为它们指定任何宽度和高度。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-13T07:10:21.523

使用绝对定位，然后你可以扩大/缩小 div，它不会影响它周围的任何其他元素。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-13T07:10:59.487

绝对定位您的 div 并确保 z-index 位于顶层。它可以只使用 CSS 来完成，但使用 js 也可能更容易。

# c# - 如何在word 2003文档开头插入空白页

> ID：12401140
> 
> 赞同：3
> 
> 时间：2012-09-13T07:08:08.503
> 
> 标签：c#, ms-word, office-interop

事实上，我可以在 Word 2003 文档的开头插入一个新的空白页和一些文本。

但是问题是新的空白页面将从下一页获取格式或样式。

例如：

带有项目符号的原始文档：

> 1.  一个
> 2.  b
> 3.  C
> 4.  d

使用下面的 C# 代码编辑后：

> 1.  世界你好
>     
>     -----
>     
>     
> 2.  一个
> 3.  b
> 4.  C
> 5.  d

我想插入一个没有任何样式或格式的新空白页。

我怎样才能在 C# 中做到这一点？

这是我要尝试插入带有一些文本的空白页的现有代码：

```
var app = new Application();
app.Visible = false;
app.DisplayAlerts = WdAlertLevel.wdAlertsNone;

var doc = app.Documents.Open(@"C:\test.doc");
object what = WdGoToItem.wdGoToLine;
object which = WdGoToDirection.wdGoToFirst;

app.Selection.GoTo(ref gotoPage, ref gotoNext, ref gotoCount, ref gotoName);

//Insert a blank page  
app.Selection.InsertNewPage();

object start = 0;
object end = 0;

var range = doc.Range(ref start, ref end);
range.Font.Size = 10;
range.Text = "Hello\n World";

doc.Save();
doc.Close();
app.Quit(); 
```

非常感谢。

如果您能建议如何插入带有换行符的文本，我也将不胜感激，因为“\n”不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T03:26:59.607

我通过合并两个文件来克服这个问题，一个是空白文件，一个是原始文件。

这是解决此问题的有用文章。

[如何：在 C# 中合并多个 Microsoft Word 文档](http://devpinoy.org/blogs/keithrull/archive/2007/05/23/how-to-merge-multiple-microsoft-word-documents-in-c.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T09:55:14.923

我不确定这是否适用于 Word 2003。我已经为 Word 2010 尝试过这个。想法是重置段落的样式。考虑到您的代码：

```
//Insert a blank 
app.Selection.InsertNewPage();
Word.Paragraph par = doc.Paragraphs[1];

par.Reset(); 
```

看看[这个](http://www.zimbio.com/Microsoft+Word/articles/0NVq6Gtp43u/C+Set+Indentation+Adding+Bullets+Word+Paragraphs)页面。希望这会对您有所帮助。

考虑换行，我建议尝试`'\r'`或`'\r\n'`符号。或者正如 Pat 建议的那样，您可以尝试*Environment.NewLine*。在 Word 2010 中，您的代码也可以正常工作，我的意思是`\n`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-07T13:30:58.947

尝试通过插入符号“\f\r”来插入分页符。然后将`Style`第一段的设置为“正常”。

例如：

```
 Range docRange = doc.Range();
 docRange.Text = docRange.Text.Insert(0, "\f\r");
 docRange.Paragraphs.First.set_Style(WdBuiltinStyle.wdStyleNormal); 
```

# android - 单击第一个 ContextMenu 的项目时打开另一个 ContextMenu

> ID：12401143
> 
> 赞同：1
> 
> 时间：2012-09-13T07:08:17.780
> 
> 标签：android, contextmenu

```
registerForContextMenu(validate_button);
@Override
    public void onCreateContextMenu(ContextMenu menu, View v,
            ContextMenu.ContextMenuInfo menuInfo) {

        menu.add("It's right");
        menu.add("It's wrong");
    }

    @Override
    public boolean onContextItemSelected(android.view.MenuItem item) {
        //i want to show another Context Menu to select next answer
        return true;
    } 
```

`ContextMenu`当我单击第一个项目时如何显示另一个`ContextMenu`？

它类似于提问者，您可以从`ContextMenu`项目中选择答案，具体取决于`ContextMenu`必须填充的下一个项目

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-13T08:03:11.293

> 当我单击第一个 ContextMenu 的项目时如何显示另一个 ContextMenu？

我不知道你想要多深`ContextMenu`，但是对于两个级别，你可以有一个布尔标志，在两种情况之间进行选择，这将从`onContextItemSelected`：

```
boolean flag = true;

@Override
public void onCreateContextMenu(ContextMenu menu, View v,
        ContextMenu.ContextMenuInfo menuInfo) {
    if (flag) {
       menu.add("It's right");
       menu.add("It's wrong");
    } else {
       // the second menu
       menu.add("Ha Ha");
    }
} 
```

然后在`onContexItemSelected`回调中简单地更新标志并发布一个 Runnable 以`ContextMenu`再次显示：

```
@Override
public boolean onContextItemSelected(MenuItem item) {
       if (item.getItemId() == theIdOfItemFromSecondContextMenu) {
        // do stuff
        return true;
    }
    // if you pass at this level, then you need to show the second ContextMenu
    flag = false;
    theView.post(new Runnable() {

        @Override
        public void run() {
            theView.showContextMenu();
        }
    });
    return true;
} 
```

无论如何，我建议不要使用此类代码，只需使用自定义`Dialog`（或 a`DialogFragment`为用户循环使用后堆栈）。

# struts2 - 在struts2中上传图片

> ID：12401159
> 
> 赞同：0
> 
> 时间：2012-09-13T07:09:25.277
> 
> 标签：struts2, multipartform-data

在 Struts2 中上传图像时出现问题。

我正在尝试将图像从 jsp 页面上传到 struts2 中的动作类

我的代码成功运行，但执行到 System.out.println("2") 并且图像未复制到指定位置。

请帮我解决这个问题

我的动作类如下：

```
import java.io.File;
import java.util.List;
import javax.servlet.http.HttpServletRequest;
import org.apache.struts2.ServletActionContext;
import org.apache.tomcat.util.http.fileupload.FileItem;
import org.apache.tomcat.util.http.fileupload.disk.DiskFileItemFactory;
import org.apache.tomcat.util.http.fileupload.servlet.ServletFileUpload;
import com.opensymphony.xwork2.ActionSupport;

public class upload extends ActionSupport  {

public String execute()throws Exception
{
    try{

    HttpServletRequest request = ServletActionContext.getRequest();

    System.out.println("1");
    List<FileItem> items = new ServletFileUpload(new DiskFileItemFactory()).parseRequest(request);

    System.out.println("2");
    for (FileItem item : items)
    {
        System.out.println("3");
            if (!item.isFormField()){
            String fieldname = item.getFieldName();
            System.out.println(fieldname);

            System.out.println("4");
            File file = new File("F:/www/test/Rohit/workspace_Rohit/uploadWithStruts2/WebContent/uploadimage","hi.jpg");        
            item.write(file);
         }
    }

    }
    catch (Exception e) {
    System.out.println(e);
    }

    return SUCCESS;
    }

} 
```

我的jsp页面是：

```
<form action="test.action" method="post" enctype="multipart/form-data">
                <input type="file" name="image">
                <input type="submit" value="upload"/>
</form> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T10:52:21.380

```
// For upload Image in Struts2

// Jsp Page is: 

<s:form method="post" action="test.action" enctype="multipart/form-data">
<s:file name="imageFile" label="User Image" />
<s:submit value="submit"></s:submit>

//Struts.xml

<struts>
 <package name="default" extends="struts-default">
<action name="test" class="Test">
        <result name="success">welcome.jsp</result>
    </action>
  </package>
</struts>

//Test.java

import java.io.File;
import java.text.DateFormat;
import java.text.SimpleDateFormat;
import java.util.Date;
import java.util.StringTokenizer;

import com.opensymphony.xwork2.ActionSupport;
import org.apache.commons.io.FileUtils;
public class test extends ActionSupport{

private static final long serialVersionUID = 1L;

private File imageFile;

public File getImageFile() {
    return imageFile;
}

public void setImageFile(File imageFile) {
    this.imageFile = imageFile;
}

public String execute()throws Exception
{
    try{

        //code for image random name
        // start from here to 

         DateFormat format = new SimpleDateFormat("yyyy/MM/dd HH:mm:ss");
         Date date = new Date();
         String dt = format.format(date);

         String name = "";
         StringTokenizer str = new StringTokenizer(dt);
         while (str.hasMoreElements())
         {
             String nm=(String) str.nextElement();
             name+=nm;
         }

         String name1="";
         StringTokenizer strg = new StringTokenizer(name,"/");
                 while (strg.hasMoreElements())
                 {
                     String nam=(String) strg.nextElement();
                     name1+=nam;
                 }

         String imgname="";   
         StringTokenizer strge = new StringTokenizer(name1,":");
                 while (strge.hasMoreElements())
                 {
                     String na=(String) strge.nextElement();
                     imgname+=na;   
                 }

    //code for copy image to specific path

    String sourceFilePath=imageFile.getAbsolutePath();
    //System.out.println(sourceFilePath);
    File sourceFile=new File(sourceFilePath);   
    File destnationFile=new File("E:/Jaydip_Baldha/workspace_new/Struts2Upload/WebContent/upload_image/"+imgname+".jpg");
    FileUtils.copyFile(sourceFile, destnationFile);
    }
    catch(Exception e)
    {
        e.printStackTrace();
    }
    return SUCCESS; 
} 
```

}

# github - Github - 分叉一个私有存储库

> ID：12401161
> 
> 赞同：2
> 
> 时间：2012-09-13T07:09:32.087
> 
> 标签：github

我有权访问私人存储库。如果我分叉私有存储库，原始存储库的所有者或原始存储库的管理员对我的分叉存储库有什么访问权限？如果我分叉一个公共存储库，这些规则将如何变化？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-13T07:37:13.903

当分叉一个私有仓库时，所有的合作者都会被自动复制，这意味着所有者将拥有你的分叉的推送权限。您可以稍后从存储库设置页面中删除协作者。

分叉公共存储库时，协作者不会被复制，因此您将是唯一拥有推送权限的人。

# android - 您如何使用蓝牙开发 Android 应用程序？

> ID：12401168
> 
> 赞同：3
> 
> 时间：2012-09-13T07:09:44.700
> 
> 标签：android, eclipse, android-emulator, bluetooth, avd

您如何有效地开发、调试和测试基于蓝牙的 Android 应用程序。

我一直在谷歌搜索并搜索堆栈溢出来寻找这个问题的答案，但我没有得到明确的答案。

我了解模拟器不支持蓝牙。我还知道各种解释函数、类等的指南，而且我知道人们提到过使用 Virtualbox 可以设置蓝牙模拟器。我什至遇到了一些像 BT-Sim 这样的旧项目，它们似乎是一种创建假 BT 信号的方法（尽管如果我的 android 模拟器不支持 BT，它并没有太大帮助）

但是没有关于如何实现这一点的可靠指南。它就像一些需要缝合在一起的零散拼图和平。这让我想知道应用程序开发人员如何可靠地制作支持 BT 的应用程序？

是否有任何指南可以剖析如何执行此过程？我想要完成的步骤是：

1.  在Virtualbox上创建一个可以模拟蓝牙的自定义模拟器？
2.  让 AVD 管理器与这个模拟器对话，这样我编译的 Android 代码就可以使用它了
3.  运行蓝牙模拟器以通过计算机中的端口发送 BT 信号

（不过，我真的不知道如何做这三个中的任何一个！）

我的总体目标如下：

*   创建一个从蓝牙发射器收集数据的应用程序
*   但首先，在我的电脑上创建一个模拟器，它可以与我的安卓模拟器对话，就好像它是真实的一样

老实说，我确实觉得谷歌的人不允许在他们的 AVD 上进行蓝牙仿真很奇怪。我理解不允许真正的电话通话，但我不明白蓝牙是如何被这样滥用的。

无论如何，在设置蓝牙方面的任何帮助将不胜感激，并希望能帮助许多其他人！

注意：我使用带有 AVD 的标准 Eclipse + Android SDK 设置来进行我的 Android 开发。计划使用 API 10。但是，如果我需要使用不同的设置，我很好。只要它附带一步一步的指南！那肯定很不错。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-08-20T20:37:17.187

老问题，但仍然没有答案。如果您有物理设备，那似乎是最简单的方法。如果像我一样，您没有设备，仍然可以使用蓝牙和安卓进行开发。下载一个[android x86](http://www.android-x86.org/) iso，将其加载到具有桥接网络设置的virtualbox中并安装它。插入蓝牙加密狗并从“usb”菜单中选择设备，或者您可以在虚拟机的设置页面中设置设备过滤器。现在只需使用 adb 并连接到它，您可以通过转到控制台 (alt+f1) 并键入 netcfg 或 ifconfig eth0 来找到 IP。您可能还需要在 android 控制台上输入 adbd - 我会，但我没有看到很多人提到它，所以似乎并不总是需要它。

它仍然适用于 eclipse，并且比模拟器快得多。即使我不做蓝牙开发，我也使用虚拟机而不是模拟器。

# powershell - powershell 不可见的可执行文件

> ID：12401169
> 
> 赞同：0
> 
> 时间：2012-09-13T07:09:49.187
> 
> 标签：powershell

我创建了一个 powershell 脚本来检查可执行文件是否正在运行。如果它什么都不做，如果它没有运行，运行可执行文件。我这样做是因为该应用程序无法作为服务运行。

```
jcon.ps1

$Prog = "C:\Program Files (x86)\JCON\Edifact\edifact.exe"
if (! (ps | ? {$_.path -eq $prog})) {& $prog} 
```

当我通过 Windows 资源管理器运行该脚本时，该脚本有效 - 右键单击​​ jcon.ps1，然后单击使用 powershell 运行。

但是，当我通过计划任务运行脚本时出现问题。

```
<?xml version="1.0" encoding="UTF-16"?>
<Task version="1.2" xmlns="http://schemas.microsoft.com/windows/2004/02/mit/task">
  <RegistrationInfo>
    <Date>2012-09-06T10:35:07.1546685</Date>
    <Author>BDPNT\jcon</Author>
  </RegistrationInfo>
  <Triggers>
    <BootTrigger>
      <Repetition>
        <Interval>PT10M</Interval>
        <StopAtDurationEnd>false</StopAtDurationEnd>
      </Repetition>
      <Enabled>true</Enabled>
    </BootTrigger>
  </Triggers>
  <Principals>
    <Principal id="Author">
      <UserId>BDPNT\jcon</UserId>
      <LogonType>S4U</LogonType>
      <RunLevel>HighestAvailable</RunLevel>
    </Principal>
  </Principals>
  <Settings>
    <MultipleInstancesPolicy>IgnoreNew</MultipleInstancesPolicy>
    <DisallowStartIfOnBatteries>true</DisallowStartIfOnBatteries>
    <StopIfGoingOnBatteries>true</StopIfGoingOnBatteries>
    <AllowHardTerminate>true</AllowHardTerminate>
    <StartWhenAvailable>false</StartWhenAvailable>
    <RunOnlyIfNetworkAvailable>false</RunOnlyIfNetworkAvailable>
    <IdleSettings>
      <StopOnIdleEnd>true</StopOnIdleEnd>
      <RestartOnIdle>false</RestartOnIdle>
    </IdleSettings>
    <AllowStartOnDemand>true</AllowStartOnDemand>
    <Enabled>false</Enabled>
    <Hidden>false</Hidden>
    <RunOnlyIfIdle>false</RunOnlyIfIdle>
    <WakeToRun>false</WakeToRun>
    <ExecutionTimeLimit>P3D</ExecutionTimeLimit>
   <Priority>7</Priority>
  </Settings>
  <Actions Context="Author">
    <Exec>
       <Command>"C:\Windows\SysWOW64\WindowsPowerShell\v1.0\powershell.exe"</Command>
      <Arguments>-executionpolicy unrestricted -file "d:\script\jcon.ps1"</Arguments>
    </Exec>
  </Actions>
</Task> 
```

如果我在“edifact.exe”未运行时运行此代码，我会看到可执行文件已启动，但我看不到 GUI。用户还报告应用程序无法正常运行。但是可执行文件正在运行但对我不可见 - 没有 GUI。可执行文件虽然作为进程运行。我可以在任务管理器中看到。

该任务以本地管理员身份运行。关于为什么当我通过计划任务调用应用程序时 GUI 不可见的任何想法？

```
 <Command>"C:\Windows\SysWOW64\WindowsPowerShell\v1.0\powershell.exe"</Command>
      <Arguments>-executionpolicy unrestricted -file "d:\script\jcon.ps1"</Arguments> 
```

我已经尝试了 -windowstyle 最大化参数，但问题仍然存在。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T14:36:29.277

我有一些弹出交互式窗口的 powershell 计划任务。在任务计划程序 UI 中，设置为“仅在用户登录时运行”。在 XML 中，您需要更改此设置：

```
<LogonType>S4U</LogonType> 
```

到

```
<LogonType>InteractiveToken</LogonType> 
```

# php - 确保日期/时间在全球范围内正确 PHP 5.3/MySQL

> ID：12401170
> 
> 赞同：1
> 
> 时间：2012-09-13T07:09:51.950
> 
> 标签：php, mysql

在过去的两天里，我一直在阅读这篇文章，最终还是像开始时一样困惑。我知道这个问题之前已经被问过很多次，但我似乎无处可去。

问题是似乎有各种各样的建议和不同的建议在整个网络上给出，包括在 Stackoverflow 上。

所以，我希望有人能一劳永逸地纠正我。

鉴于我可以完全控制服务器和代码，确保当用户执行特定操作时正确的日期/时间存储在数据库中并且来自其他时区的任何用户也得到正确的最佳方法是什么返回的时间，相对于他们的时区。

即法国的用户 A 发表评论，他在查看该评论时看到返回的正确时间。美国的用户 B 查看用户 A 的评论，并看到发布时间已更正到他的时区。

我需要知道将日期/时间存储在 mysql 中的最佳方法，以及检索此日期并为世界上任何给定客户端正确显示它的最佳方法。

我正在使用 PHP 5.3 和 mySQL 5.5。

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T07:14:50.873

您可以将日期存储为 UTC：

```
$utctime = gmdate('Y-m-d H:i', date('U')); // get timestamp and convert it to UTC 
```

并用他的偏移量显示给用户，你可以问他他有哪个时区，或者你可以尝试使用 AJAX 或基于他的 IP 来获取它。

假设他的时区是 +7 小时：

```
$usertime = date('Y-m-d H:i', strtotime($utctime)+(7*60*60)); 
```

您可以存储为时间戳：`$utctime = gmdate('U', date('U'));`

# javascript - 在three.js中检测圆柱面

> ID：12401171
> 
> 赞同：4
> 
> 时间：2012-09-13T07:09:55.370
> 
> 标签：javascript, html5-canvas, three.js

我创建了一个带有纹理和网格圆柱体的场景以及一个带有三个.js 的线和顶点的网格。通过向左或向右拖动鼠标，圆柱体具有旋转效果。

```
<!DOCTYPE html>
<html lang="en">
    <head>
        <title>3d Model using HTML5 and three.js</title>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0">
        <style>
            body {
                font-family: Monospace;
                background-color: #f0f0f0;
                margin: 0px;
                overflow: hidden;
            }
        </style>
    </head>
    <body>

        <script src="three.min.js" type="text/javascript"></script>
        <script src="Stats.js" type="text/javascript"></script>
        <script src="Detector.js" type="text/javascript"></script>

        <script>
            if ( ! Detector.webgl ) Detector.addGetWebGLMessage();

            var container, stats;

            var camera, scene, renderer, light, projector;
            var particleMaterial;
            var cylinder, line, geometry, geometry1;

            var targetRotation = 0;
            var targetRotationOnMouseDown = 0;

            var mouseX = 0;
            var mouseXOnMouseDown = 0;

            var windowHalfX = window.innerWidth / 2;
            var windowHalfY = window.innerHeight / 2;

            var objects = [];

            var radious = 1600, theta = 45, onMouseDownTheta = 45, phi = 60, onMouseDownPhi = 60, isShiftDown = false;
            init();                     
            animate();

            function init() {

                container = document.createElement( 'div' );
                document.body.appendChild( container );

                var info = document.createElement( 'div' );
                info.style.position = 'absolute';
                info.style.top = '10px';
                info.style.width = '100%';
                info.style.textAlign = 'center';
                info.innerHTML = 'Drag to spin the cylinder<br/>Objective: By spining left, cylinder should go into the surface and by spining right it should come out.';
                container.appendChild( info );

                // camera

                camera = new THREE.PerspectiveCamera( 70, window.innerWidth / window.innerHeight, 1, 10000 );
                camera.position.y = 200;                
                camera.position.z = 800;

                // scene

                scene = new THREE.Scene();

                // light

                scene.add( new THREE.AmbientLight( 0x404040 ) );
                light = new THREE.DirectionalLight( 0xffffff );
                light.position.set( 0, 1, 0 );
                scene.add( light );

                // texture              

                var materials = [];

                for ( var i = 0; i < 6; i ++ ) {

                    materials.push( new THREE.MeshBasicMaterial( { color: Math.random() * 0xffffff } ) );

                }//alert(materials.length);

                // Grid

                geometry = new THREE.Geometry();
                geometry.vertices.push( new THREE.Vector3( - 500, 0, 0 ) );
                geometry.vertices.push( new THREE.Vector3( 500, 0, 0 ) );

                for ( var i = 0; i <= 20; i ++ ) {

                    line = new THREE.Line( geometry, new THREE.LineBasicMaterial( { color: 0x000000, opacity: 0.2 } ) );
                    line.position.z = ( i * 50 ) - 500;
                    scene.add( line );

                    line = new THREE.Line( geometry, new THREE.LineBasicMaterial( { color: 0x000000, opacity: 0.2 } ) );
                    line.position.x = ( i * 50 ) - 500;
                    line.rotation.y = 90 * Math.PI / 180;
                    scene.add( line );
                }

                // cylinder                                         
                geometry1 = new THREE.CylinderGeometry(100, 100, 300, 16, 4, false);

                cylinder = new THREE.Mesh(geometry1 ,new THREE.MeshLambertMaterial( { color: 0x2D303D, wireframe: true, shading: THREE.FlatShading } ));
                //cylinder.position.x = 100;
                cylinder.position.y = -50;
                //cylinder.overdraw = true;
                scene.add(cylinder);
                alert(geometry1.faces.length);
                objects.push(cylinder);

                // projector
                projector = new THREE.Projector();

                // renderer

                renderer = new THREE.CanvasRenderer();
                renderer.setSize( window.innerWidth, window.innerHeight );
                container.appendChild( renderer.domElement );               

                // stats

                stats = new Stats();
                stats.domElement.style.position = 'absolute';
                stats.domElement.style.top = '0px';
                container.appendChild( stats.domElement );

                document.addEventListener( 'mousedown', onDocumentMouseDown, false );
                document.addEventListener( 'touchstart', onDocumentTouchStart, false );
                document.addEventListener( 'touchmove', onDocumentTouchMove, false );               

                window.addEventListener( 'resize', onWindowResize, false );

            }

            function onWindowResize() {

                camera.left = window.innerWidth / - 2;
                camera.right = window.innerWidth / 2;
                camera.top = window.innerHeight / 2;
                camera.bottom = window.innerHeight / - 2;
                camera.aspect = window.innerWidth / window.innerHeight;
                //camera.updateProjectionMatrix();

                renderer.setSize( window.innerWidth, window.innerHeight );

            }

            function onDocumentMouseDown( event ) {         

                event.preventDefault();

                document.addEventListener( 'mousemove', onDocumentMouseMove, false );
                document.addEventListener( 'mouseup', onDocumentMouseUp, false );
                document.addEventListener( 'mouseout', onDocumentMouseOut, false );

                mouseXOnMouseDown = event.clientX - windowHalfX;
                targetRotationOnMouseDown = targetRotation;

            }

            function onDocumentMouseMove( event ) {

                mouseX = event.clientX - windowHalfX;

                targetRotation = targetRotationOnMouseDown + ( mouseX - mouseXOnMouseDown ) * 0.02;

            }

            function onDocumentMouseUp( event ) {

                document.removeEventListener( 'mousemove', onDocumentMouseMove, false );
                document.removeEventListener( 'mouseup', onDocumentMouseUp, false );
                document.removeEventListener( 'mouseout', onDocumentMouseOut, false );

            }

            function onDocumentMouseOut( event ) {

                document.removeEventListener( 'mousemove', onDocumentMouseMove, false );
                document.removeEventListener( 'mouseup', onDocumentMouseUp, false );
                document.removeEventListener( 'mouseout', onDocumentMouseOut, false );

            }

            function onDocumentTouchStart( event ) {

                if ( event.touches.length === 1 ) {

                    event.preventDefault();

                    mouseXOnMouseDown = event.touches[ 0 ].pageX - windowHalfX;
                    targetRotationOnMouseDown = targetRotation;

                }

            }

            function onDocumentTouchMove( event ) {
                if ( event.touches.length === 1 ) {
                    event.preventDefault();
                    mouseX = event.touches[ 0 ].pageX - windowHalfX;
                    targetRotation = targetRotationOnMouseDown + ( mouseX - mouseXOnMouseDown ) * 0.05;
                }
            }

            function animate() {
                requestAnimationFrame( animate );
                render();
                stats.update();

            }

            function render() {             
                cylinder.rotation.y += ( targetRotation - cylinder.rotation.y ) * 0.05;
                renderer.render( scene, camera );               
            }           

        </script>

    </body>
</html> 
```

如何通过单击圆柱面来知道选择了圆柱体的哪个面？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-13T07:30:45.723

你必须从你的视点向立方体发射一条虚拟射线。然后，您可以从相交对象中读出 face 或 faceIndex。

```
function onDocumentMouseDown( event ) {

            event.preventDefault();

            // position of mouse + screen calc
            var vector = new THREE.Vector3( ( event.clientX / window.innerWidth ) * 2 - 1, - ( event.clientY / window.innerHeight ) * 2 + 1, 0.5 );
            projector.unprojectVector( vector, camera );

            // create a ray from the camera thru the vector
            var ray = new THREE.Ray( camera.position, vector.subSelf( camera.position ).normalize() );

            // array of intersecting object (front to back)
            var intersects = ray.intersectObjects( objects );

            // are we hitting something?
            if ( intersects.length > 0 ) {

                // first intersection should be the object (Mesh,...)
                console.log(intersects[0].object);

                // gimme face as THREE.Face3/4 object
                console.log(intersects[0].face);

                // tell me face index (int)
                console.log(intersects[0].faceIndex);

                // lets change color of the intersected object for fun
                intersects[ 0 ].object.material.color.setHex( Math.random() * 0xffffff );

        }
} 
```

另请查看`canvas_interactive_cubes`示例

# scroll - Qt-如何从 QListWidget 中绘制文本

> ID：12401172
> 
> 赞同：0
> 
> 时间：2012-09-13T07:09:58.813
> 
> 标签：scroll, qwidget, qt4.7, qlistwidget

我正在学习用 QListWidget 做点​​什么。我有一个**QListWidget、QTextEdit、2 个 QPushButtons**（添加和删除按钮）和**一个用于在其中绘制文本的 QWidget**。当我*在 QTextEdit 中输入文本并单击添加按钮时，文本必须添加到 QListWidget 中*。从那个 QListWidget 中，*我选择任何项目并单击 Remove Button，该项目必须从 QListWidget 中删除*。***然后我想在 QWidget 中绘制这个 QListWidget 项目，这个绘制的项目必须从右向左滚动。***我怎样才能做到这一点？请帮我...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T11:45:19.103

```
//In the constructor
WidgetString = "";

On_add_button_Clicked() //SLOT
{
 listwidget->addItem(lineedit->text());

}

On_Remove_Button_clicked() //SLOT
{
 listWidget->takeItem(listWidget->currentIndex());
 //You may have to delete the the item taken in order to put that change into effect.
 //Trigger paintevent
}

on_listWidget_currentTextChanged(QString currentText) //SLOT
{
 WidgetString = currentText;
}

paintevent()
{
 QPainter painter(Your_Qwidget);
 painter.drawText ( int xPos, int YPos, WidgetString )
 update();
} 
```

对于滚动条，您可能需要增加要绘制的文本大小。

# google-app-engine - 接管谷歌应用引擎中的计费

> ID：12401178
> 
> 赞同：0
> 
> 时间：2012-09-13T07:10:25.167
> 
> 标签：google-app-engine, billing, android-pay

我的用户 A 在 google appengine 中创建了一个应用程序。我希望我的用户 B 接管账单。然后，我授予用户 B 访问该项目的权限并从他的帐户付款，但现在他无法更改计费设置。当用户 B 点击“接管计费”链接但得到：

“您没有足够的权限来更改帐单。无法保存您的预算设置。如需帮助，请联系支持人员。”

客户支持的链接只是告诉我只支持高级帐户:-(

关于如何让其他用户接管计费的任何建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T09:20:16.973

好吧，我的账单设置看起来很糟糕，用户 B 可以在不成为账单管理员的情况下进行付款。

当我将用户 B 从开发人员更改为管理员时，它得到了解决。然后“接管计费”按钮开始按预期工作，没有任何错误。

感谢彼得提供的信息。

# c++ - C ++按块读取文本文件

> ID：12401183
> 
> 赞同：3
> 
> 时间：2012-09-13T07:11:02.950
> 
> 标签：c++, text-files, ifstream

我真的没有在 google 找到满意的答案，而且 C++ 中的 I/O 有点棘手。如果可能的话，我想将文本文件逐块读取到向量中。唉，我不知道怎么做。我什至不确定我的无限循环是否会在所有可能性中被打破，因为 I/O 很棘手。所以，我能弄清楚的最好方法是：

```
char buffer[1025]; //let's say read by 1024 char block
buffer[1024] = '\0';
std::fstream fin("index.xml");
if (!fin) {
    std::cerr << "Unable to open file";        
} else {
    while (true) {          
        fin.read(buffer, 1024);
        std::cout << buffer;
        if (fin.eof())
            break;
    }

} 
```

请注意第二行的“\0”。这不奇怪吗？我可以做得更好吗？我可以将数据读入向量而不是字符数组吗？直接读入vector合适吗？

感谢您的回答。

PS。分块阅读确实有意义。这段代码很短，但我将它存储在循环缓冲区中。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-13T07:20:01.733

您应该可以执行以下操作

```
 vector<char> buffer (1024,0);      // create vector of 1024 chars with value 0   
 fin.read(&buffer[0], buffer.size()); 
```

保证向量中的元素是连续存储的，所以这应该有效 - 但您应该确保向量永远不会为空。我最近在这里问了一个类似的问题 - 从标准中查看具体细节的答案[我可以使用 std::vector 来调用采用数组/指针参数的函数吗？](https://stackoverflow.com/questions/12058838/can-i-call-functions-that-take-an-array-pointer-argument-using-a-stdvector-ins)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T07:20:55.587

```
std::ifstream fin("index.xml");
std::stringstream buffer;
buffer << fin.rdbuf();
std::string result = buffer.str(); 
```

正是你需要的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-02T07:28:24.847

最近，我遇到了同样的问题。我使用 read 和 gcount 函数来解决它。它运作良好。这是代码。

```
vector<string> ReadFileByBlocks(const char* filename)
{
    vector<string> vecstr;

    ifstream fin(filename, ios_base::in);
    if (fin.is_open())
    {
        char* buffer = new char[1024];
        while (fin.read(buffer, 1024))
        {
            string s(buffer);
            vecstr.push_back(s);
        }

       // if the bytes of the block are less than 1024,
       // use fin.gcount() calculate the number, put the va
       // into var s
       string s(buffer, fin.gcount());
       vecstr.push_back(s);

       delete[] buffer;
       fin.close();
   }
   else
   {
        cerr << "Cannot open file:" << filename << endl;
   }

   return vecstr;
} 
```

# php - SQL 中始终返回 NULL 值

> ID：12401184
> 
> 赞同：0
> 
> 时间：2012-09-13T07:11:07.460
> 
> 标签：php, sql

我有以下 SQL 函数，并且我在 mysqli_stmt_bind_result 中删除了 $row。

```
//get the user number per month
public function chartwaitinguservsproduct(){
    $stmt = mysqli_prepare($this->connection, 
            "select 
                (Select COUNT(*)  from reusematching.waitinglist_product) as COUNTP,
                (Select COUNT(*)  from reusematching.waitinglist_user) as COUNTU;
                ");     
    $this->throwExceptionOnError();

    mysqli_stmt_execute($stmt);
    $this->throwExceptionOnError();

    mysqli_stmt_fetch($stmt);
    mysqli_stmt_bind_result($stmt, $row->COUNTP, $row->COUNTU);

    mysqli_stmt_free_result($stmt);
    mysqli_close($this->connection);

    return $rows;

} 
```

但无论我如何更改数据库，$rows 始终为 NULL。为什么？因为 fetch 语句？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-13T07:13:21.707

你为什么`$row`在一个地方使用（绑定）并返回`$rows`？

你不认为这可能是个坏主意，除非你的 PHP 解释器*比*我见过的要先进得多，并且能够自动关联单数和复数变量名 :-)

而且，从记忆中，我认为您可能应该在尝试从中获取变量*之前绑定变量。*同样，如果您的 PHP 足够先进，我想它可以进行某种形式的时间操纵，但我不会赌钱。

* * *

抱歉，这是澳大利亚的幽默，但如果您检查[fetch page](http://php.net/manual/en/mysqli-stmt.fetch.php)，它会非常清楚地说明：

> 请注意，在调用 mysqli_stmt_fetch() 之前，应用程序必须绑定所有列。

我现在假设这个`row/rows`问题只是你的问题中的一个错字。如果不是，那么这也需要修复。

# php - YII php 框架 localhost 有效，但 127.0.0.1 无效

> ID：12401187
> 
> 赞同：3
> 
> 时间：2012-09-13T07:11:24.237
> 
> 标签：php, mysql, yii

我正在关注一本书“使用 Yii 进行敏捷 Web 应用程序开发”，并且正在通过应用程序组件建立与 Yii 应用程序的数据库连接。

我按照书上的说明说mysql db主机是127.0.0.1。我进行了测试，但无法连接。

然后我将主机更改为“localhost”并且它可以工作。

有谁知道为什么会这样？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T08:12:22.187

检查此位置的文件名主机

```
C:\WINDOWS\system32\drivers\etc 
```

查看host文件中localhost的默认值，如果不是默认应该是`127.0.0.1`，改成`127.0.0.1`. 现在尝试在任何 Web 浏览器上使用 127.0.0.1 访问您的 wamp 服务器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-12-10T08:36:44.987

请参考这个问题：[Mysql localhost != 127.0.0.1?](https://stackoverflow.com/questions/19712307/mysql-localhost-127-0-0-1)

时使用socket `localhost`，时使用tcp/ip `127.0.0.1`。

# iphone - 在 iphone 应用程序中制作 ipa 文件时未显示配置文件

> ID：12401188
> 
> 赞同：0
> 
> 时间：2012-09-13T07:11:25.627
> 
> 标签：iphone, profiling, ios-provisioning

当我们归档应用程序同时要求代码签名身份时，我正在 xocde 中制作 ipad 文件，它没有显示我在构建设置中设置的配置。在构建设置中，它出现在列表中，但现在在归档应用程序时

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T09:36:34.327

签入钥匙串访问您的临时配置文件是否有效。打开钥匙串并转到类别并选择证书，如果出现证书则验证

# android - android中的滚动列表视图颜色变化

> ID：12401189
> 
> 赞同：0
> 
> 时间：2012-09-13T07:11:26.047
> 
> 标签：android, listview, colors, scroll

`ListView`滚动时 's 颜色有问题。当我滚动 ListView 时，默认情况下我在分隔线中得到橙色。滚动 ListView 时如何更改分隔线的颜色？谁能帮我？...

我的代码是：

```
<ListView
    android:id="@android:id/list"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:divider="@android:color/transparent"
    android:cacheColorHint="@android:color/transparent"
    android:dividerHeight="5dp"
    android:layout_marginTop="5dp"    >
</ListView> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T07:12:34.360

将此添加到您的 xml 列表视图布局

```
android:listSelector="@android:color/transparent" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-06-03T07:27:05.730

```
<ListView
    android:id="@+id/list"
    android:layout_width="fill_parent" 
    android:layout_height="fill_parent"
    android:drawSelectorOnTop="false"
    android:choiceMode="singleChoice"
    android:background="#4a006f"
    android:cacheColorHint="#00000000" /> 
```

您必须在以下位置声明此标签`ListView`：`android:cacheColorHint="#00000000"`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-17T20:32:26.410

您应该设置 CacheColorHint

使用此方法：

setCacheColorHint(Color.ONE_OF_YOUR_COLORS)。您无需更改列表项的背景颜色。您也可以在 xml 布局中执行此操作。

# tabs - 处理 Tab 键的富编辑器

> ID：12401190
> 
> 赞同：0
> 
> 时间：2012-09-13T07:11:35.980
> 
> 标签：tabs, editor, key, wysiwyg, wysiwym

有没有真正处理选项卡输入键的网络编辑器？通过实际句柄，我的意思是它不会插入 4 个空格，或者只是忽略它。

我需要它在其中键入源代码，因此 tab 键必须表现良好。我还需要添加基本功能，例如粗体和斜体。我已经尝试过所有大的（TinyMCE、CKEditor、YUI Rich Editor 等），但它们似乎都不能正确处理选项卡。我认为这是浏览器问题...

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T07:14:08.693

[http://writecodeonline.com/php/](http://writecodeonline.com/php/)是不是...

在您自己的网站上实施也很容易。如果您需要输入源代码，那真是太好了。

我也以类似的方式使用了他使用的设置，以便能够在我的 cms 系统中编辑 php 内容。

# ruby - EventMachine 可以识别所有线程都已完成吗？

> ID：12401200
> 
> 赞同：0
> 
> 时间：2012-09-13T07:12:32.790
> 
> 标签：ruby, asynchronous, eventmachine

我是 EM 新手，编写了两个代码来比较同步和异步 IO。我正在使用 Ruby 1.8.7。

同步 IO 的示例是：

```
def pause_then_print(str)
  sleep 2
  puts str
end

5.times { |i| pause_then_print(i) }

puts "Done" 
```

这按预期工作，需要 10 多秒才能终止。

另一方面，异步 IO 的示例是：

```
require 'rubygems'
require 'eventmachine'

def pause_then_print(str)
  Thread.new do
    EM.run do
      sleep 2
      puts str
    end
  end
end

EventMachine.run do
  EM.add_timer(2.5) do
    puts "Done"
    EM.stop_event_loop
  end
  EM.defer(proc do
    5.times { |i| pause_then_print(i) }
  end)
end 
```

5 个数字在 2.x 秒内显示。

现在我明确编写了 EM 事件循环在 2.5 秒后停止的代码。但我想要的是程序在打印出 5 个数字后立即终止。为此，我认为`EventMachine`应该认识到所有 5 个线程都已完成，然后停止事件循环。

我怎样才能做到这一点？另外，请更正异步 IO 示例，如果它可以更自然和更具表现力。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T05:02:20.103

关于你的异步代码的一些事情。EM.defer 安排代码在线程上执行。然后，您将创建更多线程。当您可以在创建循环中使用 EM.defer 时，这样做没有多大意义。这有一个额外的好处，即 EM 将从其内部线程池中为线程提供服务，这应该会更快一些，因为没有线程创建开销。（请注意，我相信 EM 线程池中有 20 个线程，因此您希望保持在该数字以下）。像下面这样的东西应该可以工作（虽然我还没有测试过）

```
require 'rubygems'
require 'eventmachine'

def pause_then_print(str)
  sleep 2
  puts str
end

EventMachine.run do
  EM.add_timer(2.5) do
    puts "Done"
    EM.stop_event_loop
  end
  5.times do |i|
    EM.defer { pause_then_print(i) }
  end
end 
```

在检测工作何时完成方面，您可以`EM.defer`在其操作完成时执行回调。因此，您可以在其中添加一些代码来添加回调 when`i == 4`或类似的东西。请参阅 EM 文档了解如何添加回调：[EM.defer](https://github.com/eventmachine/eventmachine/blob/master/lib/eventmachine.rb#L972)

# oracle - 哪里可以下载 oracle 7.3.4 的 JDBC 驱动程序

> ID：12401201
> 
> 赞同：0
> 
> 时间：2012-09-13T07:12:32.767
> 
> 标签：oracle, jdbc

我从客户那里得到了一个带有 Oracle 7.3.4 的 Solaris VM。ORACLE_HOME 下没有jar 文件。我在整个 linux 文件系统中找到了所有 *.jar，但没有找到 Oracle 的 JDBC 驱动程序。

Oracle 官方网站不提供适用于 oracle 7.3.4 的 JDBC 驱动程序。你知道我在哪里可以下载吗？

# ruby - 在 ruby 脚本中实现记录器

> ID：12401204
> 
> 赞同：1
> 
> 时间：2012-09-13T07:12:41.780
> 
> 标签：ruby

这是我用来记录我的状态的 ruby​​ 脚本。

```
require 'logger'

log = Logger.new( 'log.txt', 'daily' )

log.debug "Once the log becomes at least one"
log.debug "day old, it will be renamed and a"
log.debug "new log.txt file will be created." 
```

现在我想制作一个新的 ruby​​ 文件，我想在其中包含 logger 它可以是这样的

```
module Logging

  def logger
    Logging.logger
  end

  def self.logger
    @logger ||= Logger.new(STDOUT)
  end

end 
```

但我无法理解这一点，所以任何人都可以解释一下。

我的要求就像有很多 ruby​​ 脚本文件我想在模块中放置一个记录器并将其包含在每个文件中，而不是在日志文件中写入日志，它可能会警告它可能是信息或其他任何内容。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T07:21:19.443

我可以从你的问题中收集到的是代码的工作原理......你只是对它的作用感到困惑......如果这是正确的，那么解释一下，当你`inculde Logging`在你的任何类中从类方法中的任何地方调用`logger.log("This is a log message")`它时将该消息记录到启动脚本的控制台。

这是否回答你的问题？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T07:23:46.327

更好的选择是：

```
module Logging

def logger
@logger ||= Logger.new(STDOUT)
end

end 
```

并像这样使用它

```
class MyLoggingClient
include Logging

#Now you have access to the method `logger` and the instance variable `@logger`.

end 
```

# git - Git - 新结帐

> ID：12401205
> 
> 赞同：1
> 
> 时间：2012-09-13T07:12:42.883
> 
> 标签：git, github

这可能是一个非常简单的问题，但我对 Git 完全陌生，所以......

1.  我已经对我的主分支进行了拉动。
2.  另一个人对 master 分支做了很多更改。
3.  我想放弃所有更改，所以我在本地删除了项目（刚刚从 Windows 资源管理器中删除），然后运行 ​​git pull myremote master。

我现在明白为什么这不起作用了。结果是只从主分支中提取了更改的文件。如果我现在运行 git status 我会将所有其他文件视为已删除文件。不好！！

所以，我想做的是获得主分支的干净副本或签出（或称为），就好像这是我第一次从主分支中提取项目一样。重置本地 Git 存储库还是什么？

我该如何进行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T07:16:34.067

尝试这样做以忽略您的更改：

```
git checkout . 
```

和/或：

```
git reset HEAD --hard 
```

然后从主人那里拉

编辑：

此外，如果您执行 a`git status`并看到文件已被删除，您可以执行 a`git add -u`来暂存这些删除并提交它们以确认。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T12:00:02.707

要将本地树（您可以实际编辑的文件）重置为服务器（远程）上主服务器的确切状态，您可以执行以下操作（假设服务器的远程名称是 origin）：

```
git reset origin/master --hard 
git clean -fd 
```

第一个命令会将当前签出的本地分支的 HEAD（第一行`git status`is : `On branch $current_branch`）重置为服务器主服务器的状态（这意味着 $current_branch 和 origin/master 的 git log 将完全相同）。第二个命令将删除可能遗留的无关文件。

我会推荐使用

```
git checkout -b wip 
```

之前创建一个名为 wip 的分支，以防您想保留一些直接在本地主机上完成的本地未推送提交。然后，您可以根据需要合并 wip 或挑选一些提交。

建议的命令

```
git reset HEAD --hard 
```

会将本地树重置为本地分支的头部提交记录的状态，但本地分支的历史仍可能与远程分支的历史不同。它将清除您在本地所做的任何修改，并且不会丢失您尚未推送的任何提交。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-13T11:46:17.040

我最终创建了一个新文件夹，浏览到该文件夹​​并在该文件夹中运行“git init”。然后我在这个文件夹中创建了一个指向我的项目的新遥控器，然后我使用“git pull myremote master”拉出项目。然后我删除了导致我的问题的以前的文件夹。这很简单:-)。

# css - 如何仅在鼠标光标位于菜单后才激活 CSS 菜单栏。

> ID：12401208
> 
> 赞同：0
> 
> 时间：2012-09-13T07:12:50.703
> 
> 标签：css

```
<div id='cssmenu'>
 <ul>
    <li class='active '><a href='index.html'><span>Home</span></a></li>

   <li><a href='#'><span>About</span></a></li>
      <li class='has-sub '><a href='#'><span>Contact Us</span></a>
      <ul>
         <li><a href='#'><span>Contact 1</span></a></li>
         <li><a href='#'><span>Contact 2</span></a></li>
      </ul>
   </li>
</ul>
</div> 
```

我希望它保持不活动状态，`"HOME"`就像我没有用光标触摸它一样。`"ABOUT"``"CONTACT US"`

我希望它们中的每一个都被激活并在我的光标完全位于菜单上后变为蓝色。

请帮助:)
谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T07:22:35.647

`<a>`标签有三个选择器：

```
a:link    {}
a:visited {}
a:active  {} 
```

您可以使它们都具有相同的样式，并在悬停时`a:hover`使它们具有不同的样式。[在 w3schools 上](http://www.w3schools.com/cssref/tryit.asp?filename=trycss_sel_link_more1)尝试示例。

> 选择**`:link`**器用于选择未访问的链接。选择**`:visited`**器用于选择访问的链接。**`active`**当你点击它时，它会变成一个链接。当**`:hover`**您将鼠标悬停在元素上时，选择器用于选择元素。它不仅用于`<a>`标签。

看看[jsfiddle](http://jsfiddle.net/fvYzV/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T07:25:44.300

您需要使用的每个类

```
a {
   //any styles
     color:gray;
  }
a:hover
  {
   //any styles
     color:blue;
  }
a:visited
  {
   //any styles
  } 
```

**例如：**

活跃一个{

```
 } 
```

活跃 a:hover { } 活跃 a:visited { }

# html - CSS 跳跃焦点

> ID：12401218
> 
> 赞同：2
> 
> 时间：2012-09-13T07:13:32.017
> 
> 标签：html, css

我对他们关注的链接有疑问。

该网站在这里：[www.bikramyoga.cz](http://www.bikramyoga.cz)

麻烦的链接在这个 HTML 片段中：

```
<ul id="sub">
    <li id="mail">
        <a href="posta.htm" title="chci zasílat novinky">chci zasílat novinky</a>
    </li>
    <li id="fb_icon">
        <a href="http://www.facebook.com/BikramYogaPrague?sk=wall" target="_blank">to se mi líbí</a>
    </li>
</ul> 
```

当我第一次创建该站点时，链接运行良好，但现在没有那么多了。我的 CSS 搞砸了有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T08:25:00.270

如果您显示`<a>`as `block`，而不是`inline-block`它似乎可以按您的意愿工作。

```
#mail a{display:block}
#fb_icon a{display:block} 
```

# android - 为 webview 设置自定义字体时字体样式不起作用

> ID：12401219
> 
> 赞同：5
> 
> 时间：2012-09-13T07:13:33.473
> 
> 标签：android

主.java：

```
Main instanceMain = this;
    String Dataz = FN.getHtmlData(instanceMain,"BMitra",20,(getResources().getString(R.string.matn2)));
    btne.loadDataWithBaseURL("file:///android_asset/", Dataz, "text/html", "utf-8", null); 
```

FN.java：

```
public static String getHtmlData(Context context,String fontname,Integer fontsize, String data){
    String head = "<head><style type=\"text/css\">@font-face {font-family: 'MYFNT';src: url('"+fontname+".ttf');} body {text-align:justify;font-family: 'MYFNT';color: Black;}</style></head>";
    String htmlData= "<html>"+head+"<body dir=\"rtl\">"+data+"</body></html>" ;
    return htmlData;
 } 
```

字符串.xml：

```
<string name="matn2">
    <![CDATA[
    <html><body><b>سلام</b> non bold text . <b>english bold</b></body></html>
    ]]>
</string> 
```

但**粗体**标签不起作用，输出为：سلام 英文粗体。非粗体文本

顺便说一句，我发现[了一些报告问题](http://code.google.com/p/android/issues/detail?can=1&q=SharedPreferences&colspec=ID%20Type%20Version%20Security%20Status%20Owner%20Summary&id=30520)

* * *

用另一种方式 ：

主.java：

```
Main instanceMain = this;
    String Dataz = FN.getHtmlData(instanceMain,getResources().getString(R.string.matn2)));
    btne.loadDataWithBaseURL("file:///android_asset/", Dataz, "text/html", "utf-8", null); 
```

FN.java：

```
public static String getHtmlData(Context paramContext, String paramString)
  {
    return "<!DOCTYPE HTML><html lang=\"fa-ir\" dir=\"rtl\"><head>" + "<link rel=\"stylesheet\" type=\"text/css\" href=\"justified_textview.css\" />" + "</head>" + "    <body>" + paramString + "</body></html>";
  } 
```

justified_textview.css（在 assest 文件夹中）：

```
/*@font-face {
font-family:"MyFont";
src:url('file:///android_asset/BMITRA.TTF');
}

@font-face {
font-family:"MyFont";
src:url('file:///android_asset/BMITRABD.TTF');
font-weight: bold;
}*/

@font-face {
font-family: 'Conv_BMITRA';
src: url('file:///android_asset/BMITRA.ttf');
font-weight: normal;
font-style: normal;
}

@font-face {
font-family: 'Conv_BMITRA';
src: url('file:///android_asset/BMITRABD.ttf');
font-weight: bold;
font-style: normal;
}

body {
font-family:'Conv_BMITRA';
text-align:justify;
line-height: 20pt;  
color: Black;      
} 
```

和 matn2(strings.xml) ：

```
<string name="matn">
    <![CDATA[
    م ولادت توی وب با سی اس اس
    normal text
    <b>ولایت بولد م bold text</b>
    ]]>
    </string> 
```

现在它适用于 android 2.3.3 或 2.3.5 但**不适**用于 android 4.0.x

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-22T09:41:32.737

这是不可能的，因为 Webview 而不是 Android OS 的进步，被打破了。如果您为 Webview 设置自定义字体，不幸的是，在某些设备和 Android 操作系统中它可以工作，而在其他一些设备中则不能。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-19T23:10:16.400

我在显示的一个非常大的页面上遇到了同样的问题。尝试将带有 webview 的活动设置为`android:hardwareAccelerated="false"`清单中。

# batch-file - 另一个函数的参数

> ID：12401220
> 
> 赞同：0
> 
> 时间：2012-09-13T07:13:34.637
> 
> 标签：batch-file

我尝试以下代码，但是当我添加粗体行时它失败了

```
:Is_Error_file_empty
for /f "tokens=1,3" %%x in (%TMPLog%) do (
    if "%%x"=="ERROR" SET err=TRUE(
    **call :a %1**
)

:a
if %1 neq "c" (
    echo echo ERROR: you had an error with copying files,please see in error.log for details.
) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T09:26:53.140

语法完全有一些问题括号不平衡并且放置在错误的位置。
也许您想使用`%1`in`call :a %1`但我看不出它来自哪里。
也许您想使用第二个令牌？ `EXIT/b`应该放在代码块之后，否则下面的代码也会被执行。

该代码可以作为进一步测试的基础。

```
:Is_Error_file_empty
for /f "tokens=1,3" %%x in (%TMPLog%) do (
    if "%%x"=="ERROR" (
        SET err=TRUE
        call :errorInfo %%y
    )
)
exit /b

:errorInfo
if "%1" neq "c" (
    echo echo ERROR: you had an error with copying files,please see in error.log for details.
)
exit /b 
```

# zend-framework2 - 在 Zend Framework 2.0 中哪里可以找到 Date 类？

> ID：12401221
> 
> 赞同：9
> 
> 时间：2012-09-13T07:13:40.393
> 
> 标签：zend-framework2

我已经从 Skeleton-Application 启动了我的 ZF2 应用程序。我想要我的一个控制器中的 Date 类的实例。我试图在...下搜索 Date.php 类

> 图书馆\Zend\

但找不到。ZF2 根本没有 Date.php 还是我需要从其他地方放置它？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-09-13T07:21:44.343

Zend_Date 已被删除以支持 PHP 5.3 DateTime API [http://es.php.net/manual/en/book.datetime.php](http://es.php.net/manual/en/book.datetime.php)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-15T17:49:19.570

不要忘记像基类一样在 Zend Framework 2中调用[DateTime() 。](http://es.php.net/manual/en/book.datetime.php)
喜欢：

```
$date = new \DateTime($str); 
```

where`$str`是您从中创建日期对象的字符串。

# datatable - Datagrid没有绑定图像

> ID：12401222
> 
> 赞同：0
> 
> 时间：2012-09-13T07:13:43.347
> 
> 标签：datatable

我需要在数据网格中显示一个图像，但它的显示如下

System.windows.controls.Image System.windows.controls.Image

我正在添加类型为图像的列的数据表，并且该行通过读取字节 [] 并转换为图像然后分配给数据表来构建。

```
//Creating the column type

 if (header.ColumnDescription == "ActiveStatus")
    {
      dc = new DataColumn(header.ColumnDescription, typeof(Image));
      dt.Columns.Add(dc);
   }
//Filling the data column
foreach (DataColumn col in dt.Columns)
    {                        
      dr[col] = GetRowItem(device, col.Caption);
    }
dt.Rows.Add(dr);

//Logic for getting the image
 Image img=new Image();
 BitmapImage logo = new BitmapImage();
 logo.BeginInit();
 logo.UriSource = new Uri("pack://application:,,,/Resources/Images/cloud_logon_radio_btn_green.png"); 
  logo.EndInit();
  img.Source = logo 
```

问题是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-26T08:40:33.650

使用 dataGrid 的 AutoGeneratingColumn 事件来设置图像。

在 xaml 中定义数据模板

```
 <DataTemplate x:Key="ActivaStatusColumnTemplate">
            <Image DataContext="{Binding}"   >
                <Image.Style>
                    <Style TargetType="{x:Type Image}">
                        <Setter Property="Source" Value="red.png" />
                        <Style.Triggers>
                            <DataTrigger Value="On" Binding="{Binding}">
                                <Setter Property="Source" Value="green.png"/>
                            </DataTrigger>
                        </Style.Triggers>
                    </Style>
                </Image.Style>
            </Image>
        </DataTemplate> 
```

//后面的代码

```
private void dgView_AutoGeneratingColumn(object sender, DataGridAutoGeneratingColumnEventArgs e)
        {
            if (e.Column.Header.ToString() == "ActiveStatus")
            {
                // Create a new template column.
                MyDataGridTemplateColumn templateColumn = new MyDataGridTemplateColumn();
                templateColumn.CellTemplate = (DataTemplate)Resources["ActivaStatusColumnTemplate"];
                templateColumn.ColumnName = e.PropertyName; // so it knows from which column to get binding data
                e.Column = templateColumn;
                e.Column.Header = "ActiveStatus";
            }

        } 
```

//定义覆盖DataGridTemplateColumn的类

```
 /// <summary>
        /// Custom class derieved fromt the DataGridTemplateColumn to set the property name.
        /// </summary>
        public class MyDataGridTemplateColumn : DataGridTemplateColumn
        {
            public string ColumnName
            {
                get;
                set;
            }

            protected override System.Windows.FrameworkElement GenerateElement(DataGridCell cell, object dataItem)
            {
                // The DataGridTemplateColumn uses ContentPresenter with your DataTemplate.
                ContentPresenter cp = (ContentPresenter)base.GenerateElement(cell, dataItem);
                // Reset the Binding to the specific column. The default binding is to the DataRowView.
                BindingOperations.SetBinding(cp, ContentPresenter.ContentProperty, new Binding(this.ColumnName));
                return cp;
            }
        } 
```

参考 [http://social.msdn.microsoft.com/Forums/en/wpf/thread/8b2e94b7-3c44-4642-8acc-851de5285062](http://social.msdn.microsoft.com/Forums/en/wpf/thread/8b2e94b7-3c44-4642-8acc-851de5285062)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T07:24:34.063

如果要在浏览器中显示图像，则必须生成一个 url 。您不能直接从二进制显示图像。

您可以尝试使用处理程序文件 (.ashx) 将代码从您的 page_load 放入该文件和您的处理程序代码中，例如

```
public void ProcessRequest (HttpContext context) {
    //Get the picture id by url
        //Query here
        byte[] picture = queryoutput;
        Response.ContentType = "images/jpeg";
        Response.BinaryWrite(picture);
    }

    public bool IsReusable {
    get {
        return false;
    }
    } 
```

# c# - 返回字符串的最佳方法

> ID：12401225
> 
> 赞同：1
> 
> 时间：2012-09-13T07:14:02.433
> 
> 标签：c#, properties

我可能会因此而得到负面评价，但仍然从专家那里得到一些评论或建议对我来说是更多的知识，所以这是我的问题。

在这里我返回一个字符串

```
public static string mystring()
{ 
    return "test";
} 
```

有没有最好的方法来返回字符串或者我返回的缺点是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-13T07:21:08.147

```
private const string _myString = "MyString";
public string GetMyString()
{
    return _myString;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-13T07:20:47.570

这个字符串会改变它的来源吗？如果您确定它将始终是硬编码的，请使用常量。

```
 const string mystring = "test"; 
```

如果它可能从你班上的其他地方获得它的价值。属性会更好

```
 public string MyString
{
    get {return "test";}
} 
```

仅当此值将来需要一些复杂的逻辑时才使用该函数。比如从用户输入的数据库中获取等等。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-13T07:18:21.047

声明一个常量并从方法中返回它。

如果您从多个方法返回相同的值，则在一个位置更新值将比在每个方法中更新更容易。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-13T07:21:00.473

从技术上讲，没有问题。

但是，最好遵守约定并使用常量。
我确信没有必要解释遵守约定和标准的必要性！

编辑：如果您觉得有一天可能需要在返回字符串之前使用一些内部逻辑，那么也许使用一种方法是正确的。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-13T07:15:31.800

我看不出它有什么问题。我会这样做。

第二种方法是使用属性：

```
public static string mystring {
   get { return "test"; }
} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-09-13T07:21:55.617

您可以定义一个常量`myString`，而不是 mystring 函数。因此，每当您想使用此字符串时，只需调用该常量即可。

```
public const string myString = "test"; 
```

# gwt - GWT 和 JSNI。$doc.getElementById 返回 null

> ID：12401231
> 
> 赞同：0
> 
> 时间：2012-09-13T07:14:25.677
> 
> 标签：gwt, applet, jsni

我正在尝试调用*文档*Javascript 的方法来恢复小程序（id：DesglosaApplet）。在我实现**onModuleLoad**的类（主类）中，我放了：

```
 public native void visualize(String city) {
       var applet = $doc.getElementById("DesglosaApplet");
       if (applet != null) {
          applet.visualizeTowers(city);
          alert("NOT NULL");
       }
       else 
          alert("NULL");
    } 
```

它有效，小程序不为空。但是，如果我**在另一个类**（主类调用的第二类）中感到羞耻，**它就不起作用**：我已经尝试过`$wnd.$doc`，......总是空的。我不会忘记在课堂上添加：`$wnd.$($doc)``$doc.applets["DesglosaApplet"]``var applet`

```
 HTML applet = new HTML();
    applet.setHTML("<applet code=\"org.jdesktop.applet.util.JNLPAppletLauncher\"" +
    "codebase=\"./\"" + "id=\"DesglosaApplet\"" +   ...  ); 
```

我正在使用 GWT 和 JSNI。我想在另一个类中调用一个小程序方法，而不是实现 EntryPoint 接口，

```
var applet = doc.getElementById("IdApplet"); 
```

**是否可以使用“$doc”。在实现入口点接口之外的类中？**

# android - 动态地在android中选定的listview项目的末尾添加按钮？

> ID：12401234
> 
> 赞同：0
> 
> 时间：2012-09-13T07:14:30.127
> 
> 标签：android, android-layout, android-listview

我有一个列表视图，其中我的列表包含文本视图，这意味着我有一个文本列表，用户可以在其中选择文本，阅读它并在该文本的末尾设置边注，并在那里创建一个按钮。因此，当用户下次阅读该文本时，按钮/按钮就在那里，当单击该按钮时，会打开一个弹出窗口，他可以在其中看到他的边注。现在的问题是他可以在最后创建多个边注。在这种情况下，我必须在所选文本视图的末尾动态创建一个或多个按钮。所以请帮助我，我无法动态创建多个按钮。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T09:59:51.710

有几种方法可以做到这一点。

1) 在列表项元素的 xml 文件中创建按钮（用户需要的最大值），并将其可见性设置为不可见或消失。当用户选择它时，您可以将可见性设置为可见。可见性可以动态设置。

2) 另一种方法是以编程方式添加按钮。列表视图会出于性能目的重用视图。这可以解释为什么您在按钮移动位置时遇到问题。在这种情况下，每次在列表适配器的 getView 方法中创建视图时，您已经确定了列表项的 id 并添加和删除按钮。

*   请记住检查您的 getView 方法的条件并设置可见性或添加/删除按钮。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-09-10T08:17:45.453

```
 lv.setOnItemClickListener(new AdapterView.OnItemClickListener() {
        public void onItemClick(AdapterView<?> list, View v, int pos, long id) {
            System.out.println("I clicked row item");
            button1= (Button)v.findViewById(R.id.button1);
            button1.setVisibility(button1.isShown() ? View.GONE : View.VISIBLE);} 
```

# postgresql - 试图在 PostgreSQL 中创建聚合函数

> ID：12401237
> 
> 赞同：3
> 
> 时间：2012-09-13T07:14:41.270
> 
> 标签：postgresql, aggregate-functions, plpgsql

我正在尝试在 PostgreSQL 中创建新的聚合函数来代替`sum()`函数

[我从这里](http://www.postgresql.org/docs/current/interactive/xaggr.html)的手册开始了我的旅程。

因为我想创建一个函数，它接受一个双精度值数组，对它们求和，然后做一些额外的计算，我首先创建了最终函数：

```
takes double precision as input and gives double precision as output    
DECLARE
      v double precision;
BEGIN
      IF tax > 256 THEN
            v := 256;
      ELSE
            v := tax;
      END IF;
      RETURN v*0.21/0.79;
END; 
```

然后我想创建一个聚合函数，它接受一个双精度值数组，并为我之前的函数处理一个单一的双精度值。

```
CREATE AGGREGATE aggregate_ee_income_tax (float8[]) (
  sfunc = array_agg
 ,stype = float8
 ,initcond = '{}'
 ,finalfunc = eeincometax); 
```

当我运行该命令时，我得到的是：

> 错误：函数array_agg（双精度，双精度[]）不存在

我有点卡在这里，因为手册将[array_agg()](http://www.postgresql.org/docs/current/interactive/functions-aggregate.html)列为现有函数。我究竟做错了什么？

另外，当我运行时：

```
\da
                     List of aggregate functions
 Schema | Name | Result data type | Argument data types | Description 
--------+------+------------------+---------------------+-------------
(0 rows) 
```

我的安装根本没有聚合函数？还是只列出用户定义的函数？

基本上我想了解的是：

1）我可以使用现有函数来总结我的数组值吗？

2) 我怎样才能知道函数的输入和输出数据类型？Docs 声称可以`array_agg()`接受任何类型的输入。

3）我自己的聚合函数有什么问题？

### 编辑 1

为了提供更多信息和更清晰地了解我正在努力实现的目标：

我对几个表有一个巨大的查询，如下所示：

```
SELECT sum(tax) ... from (SUBQUERY) as foo group by id 
```

我想用我自己的聚合函数替换那个 sum 函数，这样我就不必在后端进行额外的计算——因为它们都可以在数据库级别完成。

### 编辑 2

接受蚂蚁的回答。由于最终解决方案来自评论，因此我将其发布在这里以供参考：

```
CREATE AGGREGATE aggregate_ee_income_tax (float8)
(
 sfunc = float8pl
,stype = float8
,initcond = '0.0'
,finalfunc = eeincometax
); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-13T08:31:50.977

数组 agg 是聚合函数而不是常规函数，因此不能用作新聚合的状态转换函数。您要做的是创建一个聚合函数，该函数具有与 array_agg 相同的状态转换函数和自定义最终函数。

不幸的是，array_agg 的状态转换函数是根据内部数据类型定义的，因此不能重用。幸运的是，核心中有一个现有功能已经可以满足您的需求。

```
CREATE AGGREGATE aggregate_ee_income_tax (float8)(
    sfunc = array_append,
    stype = float8[],
    initcond = '{}',
    finalfunc = eeincometax); 
```

另请注意，您的类型混淆了，您可能希望将一组浮点数聚合到一个数组，而不是将一组数组聚合到一个浮点数。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-14T19:37:23.690

除了@Ants 出色的建议：

1.）您的最终功能可以简化为：

```
CREATE FUNCTION eeincometax(float8)
  RETURNS float8 LANGUAGE SQL AS
$func$
SELECT (least($1, 256) * 21) / 79
$func$; 
```

2.) 好像你在处理金钱？在这种情况下，我强烈建议使用类型[`numeric`](http://www.postgresql.org/docs/current/interactive/datatype-numeric.html)（首选）或[`money`](http://www.postgresql.org/docs/current/interactive/datatype-money.html)用于该目的。浮点运算通常不够精确。

3.) 聚合的初始条件可以简单地为`0`：

```
CREATE AGGREGATE aggregate_ee_income_tax(float8)
(
  sfunc     = float8pl
 ,stype     = float8
 ,initcond  = 0
 ,finalfunc = eeincometax
); 
```

4.）在您的情况下`(least(sum(tax), 256) * 21) / 79`可能比您的自定义聚合更快。PostgreSQL 提供的聚合函数是用 C 语言编写的，并针对性能进行了优化。我会用它来代替。

# c# - 将 jquery json 传递到 asp.net httphandler

> ID：12401239
> 
> 赞同：12
> 
> 时间：2012-09-13T07:15:02.940
> 
> 标签：c#, jquery, asp.net, json, httphandler

只是不要明白我做错了什么......我一直在寻找几十个类似的问题，但仍然有误解......当我从 JS 调用 CallHandler 函数时，我总是收到“请求失败”警报。请帮我。

JS/jQuery：

```
function CallHandler() {
    $.ajax({
        url: "DemoHandler.ashx",
        contentType: "application/json; charset=utf-8",
        type: 'POST',
        dataType: "json",
        data: [{"id": "10000", "name": "bill"},{"id": "10005", "name": "paul"}],
        success: OnComplete,
        error: OnFail
    });
    return false;
}

function OnComplete(result) {
    alert(result);
}
function OnFail(result) {
    alert('Request Failed');
} 
```

asp.net c# 后面的代码：

```
public void ProcessRequest(HttpContext context)
{
  JavaScriptSerializer jsonSerializer = new JavaScriptSerializer();
  string jsonString = HttpContext.Current.Request.Form["json"];

  List<Employee> emplList = new List<Employee>();
  emplList = jsonSerializer.Deserialize<List<Employee>>(jsonString);

  string resp = "";
  foreach (Employee emp in emplList){
  resp += emp.name + " \\ ";
  }
  context.Response.Write(resp);
}

public class Employee
{
  public string id { get; set; }
  public string name { get; set; }
} 
```

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-09-13T07:19:44.407

尝试

```
data: JSON.stringify([{id: "10000", name: "bill"},{id: "10005", name: "paul"}]) 
```

**编辑**我从属性名称中删除了引号

此外，JSON 字符串需要以[其他方式读取](https://stackoverflow.com/questions/3466163/help-reading-json-from-httpcontext-inputstream)

```
string jsonString = String.Empty;

HttpContext.Current.Request.InputStream.Position = 0;
using (StreamReader inputStream = new StreamReader(HttpContext.Current.Request.InputStream))
{
     jsonString = inputStream.ReadToEnd();
} 
```

一个可行的解决方案

```
public void ProcessRequest(HttpContext context)
{
    var jsonSerializer = new JavaScriptSerializer();
    var jsonString = String.Empty;

    context.Request.InputStream.Position = 0;
    using (var inputStream = new StreamReader(context.Request.InputStream))
    {
        jsonString = inputStream.ReadToEnd();
    }

    var emplList = jsonSerializer.Deserialize<List<Employee>>(jsonString);
    var resp = String.Empty;

    foreach (var emp in emplList)
    {
        resp += emp.name + " \\ ";
    }

    context.Response.ContentType = "application/json";
    context.Response.ContentEncoding = Encoding.UTF8;
    context.Response.Write(jsonSerializer.Serialize(resp));
}

public class Employee
{
    public string id { get; set; }
    public string name { get; set; }
}

public bool IsReusable
{
    get
    {
        return false;
    }
} 
```

# linux - 运行 Virtual Box 的 Linux 低配置映像

> ID：12401242
> 
> 赞同：-1
> 
> 时间：2012-09-13T07:15:05.450
> 
> 标签：linux

我想要一个可以使用低资源（RAM 和 CPU）并且能够运行的 Linux 映像：

```
1\. Virtual Box  
2\. A browser 
```

实际上我的系统没有足够的内存在 Virtual Box 中运行 Windows Server，所以我需要那个解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T15:20:53.787

我认为[Suse Studio](http://susestudio.com)在需要自定义 Linux 映像时很好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T11:38:40.353

我建议您根据需要配置内核。默认情况下，Linux 附带了许多服务/资源。这会占用大部分内存和 CPU 时间。

编译 Linux 内核请参考[http://www.cyberciti.biz/tips/compiling-linux-kernel-26.html](http://www.cyberciti.biz/tips/compiling-linux-kernel-26.html)

如果您希望减小文件系统大小，请参考[http://tldp.org/HOWTO/Bootdisk-HOWTO/buildroot.html](http://tldp.org/HOWTO/Bootdisk-HOWTO/buildroot.html)

# php - Jquery UI datepicker - 比较 3 个日期

> ID：12401248
> 
> 赞同：-1
> 
> 时间：2012-09-13T07:15:43.927
> 
> 标签：php, jquery, jquery-ui, datepicker

我想使用 jquery ui 日期选择器比较 3 个日期。

我有以下日期字段：

*   查询日期
*   从日期开始旅行
*   迄今为止的旅行

以下规则适用：

*   `Date of Enquiry`必须是第一次约会
*   `Travel from date`必须在之后`Date of Enquiry`
*   `Travel to date`必须在之后`Travel from date`

我有以下脚本：

```
$(function() {
    $("#inputField").datepicker({
        //defaultDate: "-1w-4d",
        changeMonth: true,
        changeYear: true,
        dateFormat: 'dd-mm-yy',
        yearRange: "-90:+90",
        onSelect: function(selectedDate) {
            $("#inputField1").datepicker("option", "minDate", selectedDate);
        }
    });

    $("#inputField1").datepicker({
        //defaultDate: "+1w",
        changeMonth: true,
        changeYear: true,
        dateFormat: 'dd-mm-yy',
        yearRange: "-90:+90"

    });

    $("#inputField2").datepicker({
        //defaultDate: "+1w",
        changeMonth: true,
        changeYear: true,
        dateFormat: 'dd-mm-yy',
        yearRange: "-90:+90",
        onSelect: function(selectedDate) {
            $("#inputField1").datepicker("option", "minDate", selectedDate);
        }
    });
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T07:48:34.520

您可以创建自定义日期比较函数并在日期选择器的[onSelect](http://jqueryui.com/demos/datepicker/#event-onSelect)事件中使用。这不是确切的答案，而是一种可能的解决方案，

```
....
onSelect: function( selectedDate , inst ) {
   var isValid =  validateTime( selectedDate, inst, this);
   if( isValid ) {
       $( "#inputField1" ).datepicker( "option", "minDate", selectedDate );
   }
   else {
       //show some appropriate error
   }
}
//where validateTime is custom function returning true or false 
```

和自定义日期比较功能：

```
function validateTime( dateText, pickerInstance, picker) {
   //dateText         - selected date as text
   //pickerInstance   - a reference to the datepicker instance
   //picker           - the datepicker to be validated

   //get the date to check using getDate, like
   var field2DateVal = $("#inputField2").datepicker("getDate");
   //and compare it with other datepicker values
   //return true or false accordingly
} 
```

我希望这种方式有效

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T08:04:00.637

> *   查询日期必须是最早的日期
> *   旅行开始日期必须在查询日期之后
> *   Travel to date 必须在 Travel from date 之后

为了让您朝着正确的方向开始，我将开始研究所需的业务逻辑并在此基础上设计一个解决方案。

在从`onSelect`每个日期选择器中自动设置任何其他日期值之前，我可能会先将类似于下面的验证分开，然后从那里开始：

```
var $enquiryDate = $("#inputField"); // Must be before travel from and before travel to date
var $TravelFromDate = $("#inputField2"); // Must be after enquiry date but before travel to date
var $TravelToDate = $("#inputField2"); // Must be after travel from and after enquiry datedate

function isEnquiryDateValid(dateValue){
     // Must be before travel from and before travel to date

     // Compare date values and return true or false...
}

function isTravelFromDateValid(dateValue){
    // Must be after enquiry date but before travel to date

    // Compare date values and return true or false...
}

function isTravelToDateValid(dateValue){
    // Must be after travel from and after enquiry datedate

    // Compare date values and return true or false...
} 
```

如果您想将基于值的更改应用于类似于以下内容的更改，则可以更改此设置：

```
function processSelectedEnquiryDate(dateValue){
     // Must be before travel from and before travel to date

    // Compare dates and set individual dates to specific defaults
    // or
    // show a validation error below the control....
}

function processSelectedTravelFromDate(dateValue){
    // Must be after enquiry date but before travel to date

    // Compare dates and set individual dates to specific defaults
    // or
    // show a validation error below the control....
}

function processSelectedTravelToDate(dateValue){
    // Must be after travel from and after enquiry datedate

    // Compare dates and set individual dates to specific defaults
    // or
    // show a validation error below the control....

    // or simply show a validation error below the control....
} 
```

根据选定的值在每个控件上设置默认值比验证每个选定的值并在控件下方显示验证错误更复杂，即：`The tavel to date cannot be less than the travel from date`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-13T08:01:09.020

你可以使用喜欢

```
<label for="enquiry">Enquiry</label>
<input type="text" id="enquiry" name="enquiry"/>
<label for="from">From</label>
<input type="text" id="from" name="from" disabled/>
<label for="to">to</label>
<input type="text" id="to" name="to" disabled/> 
```

## ​JavaScript 代码：

```
$(function() {
    $("#enquiry").datepicker({
        defaultDate: "+0d",
        changeMonth: true,
        numberOfMonths: 2,
        onSelect: function(selectedDate) {
            $("#from").datepicker("option", "minDate", selectedDate);
            $("#from").removeAttr("disabled");
        }
    });
    $("#from").datepicker({
        defaultDate: "+1w",
        changeMonth: true,
        numberOfMonths: 2,
        onSelect: function(selectedDate) {
            $("#to").datepicker("option", "minDate", selectedDate);
            $("#to").removeAttr("disabled");
        }
    });
    $("#to").datepicker({
        defaultDate: "+2w",
        changeMonth: true,
        numberOfMonths: 2,
        onSelect: function(selectedDate) {
            $("#from").datepicker("option", "maxDate", selectedDate);
        }
    });
});​ 
```

**[工作演示](http://jsfiddle.net/23t4e/3)**

# android - 手机应用程序中的短信注册：whatsapp

> ID：12401255
> 
> 赞同：20
> 
> 时间：2012-09-13T07:16:23.127
> 
> 标签：android, ios, authentication, sms, sms-gateway

我想知道这些短信注册机制是如何工作的。我在互联网上搜索，但问题是有太多的短信提供商想要销售在线短信服务，所以我找不到任何东西......

问题：这是如何工作的：设置您的手机号码，并向您发送一条带有 otp 的短信。将此密码输入应用程序。

后面是什么？他们有短信网关或类似的东西吗？要花多少钱？

谢谢

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-09-13T11:03:09.617

这是一个基于 Nexmo 构建的[简单电话号码验证服务（免责声明，我为 Nexmo 做一些开发人员宣传）。](https://github.com/Nexmo/Verify)我认为这基本上就是您要查找的内容，目标是验证一个数字是否确实属于用户（也可以用于第二因素身份验证）。

移动应用程序的基本集成（专门针对此示例代码，但通用流程）：

*   发送要验证的电话号码，接收唯一的哈希。
*   验证系统向用户发送一个唯一代码。
*   一旦用户将该代码传递给您的应用程序，原始哈希和代码就会发送到验证系统进行验证。

您可以删除托管部分，只需在应用程序中执行这些步骤（生成代码、通过 SMS API 发送、检查用户输入的代码）。但是，此时需要考虑一些事项：

*   SMS API 的凭据被编译到您的分布式应用程序中。这是你想冒险的事情吗？
*   代码从设备通过网络发送；虽然 SSL 将停止随意观察代码，但想要伪造注册的人很可能会从 HTTP 请求中捕获代码。

这两个问题都可以通过将验证系统放在移动应用程序之外来解决。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2015-02-19T17:34:58.927

我知道这篇文章太旧了，但这是为将来访问此页面的人准备的：

用户“Harsh Shah”所说的是错误的..

您不应该在设备本身上生成随机数！这损害了整个验证，

1.  您向用户询问电话号码，然后将其发送到服务器。
2.  作为对该请求的响应，您生成一个随机数并将用户编号保存在 db 上的用户记录中，并使用该随机数发送 SMS，请求的响应应该是 SENT-OK，NOT-SENT。
3.  设备获取 SMS 并将其发送回服务器以与现有的 db 记录进行比较。

数据交换：

1.  电话发送（'012345567'）-> 服务器响应（'SENT-OK'）；在后台：服务器：[生成号码，以短信形式发送，为用户 01234567 保存在数据库中，例如：123123]

[手机读取短信，例如'123123']

2.  电话发送('01234567','123123')->服务器响应('AUTH-OK');

在后台：服务器：[检查数据库记录用户01234567，将步骤1中生成的随机数与用户发送的数字进行比较）。

如果您在用户手机中生成号码，任何脚本小子都可以通过从内存/存储中提取此号码（很容易做到）并欺骗包含它的短信（也很容易做到）来破解您的身份验证......您可能认为这是一种罕见的情况，但这是安全性中的一个主要漏洞，如果您按照“Harsh Shah”所说的方式进行操作，您可以将自己验证为任何现有用户并从他们那里窃取数据......

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-09-13T09:28:38.787

基本原理是：

1.  在设备上的应用程序中生成随机代码。询问用户他的手机号码。
2.  将此代码和手机号码发送到您在服务器上运行的应用程序。
3.  调用短信网关 API 将代码作为消息发送到指定的手机号码。

有许多 SMS 网关提供商。你可以在谷歌上搜索。他们中的大多数还提供了在各种编程语言中使用其 API 的教程。费用主要基于每条消息，通常以短信数量的套餐形式购买。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-08-02T05:50:56.747

本文介绍了如何将短信验证集成到您的 android 应用程序中，就像 whats 应用程序一样。

[Android 添加短信验证，如 WhatsApp – 第 1 部分](http://www.androidhive.info/2015/08/android-adding-sms-verification-like-whatsapp-part-1/)

[Android 像 WhatsApp 一样添加短信验证 – 第 2 部分](http://www.androidhive.info/2015/08/android-adding-sms-verification-like-whatsapp-part-2/)

[![在此处输入图像描述](../Images/9ebf3d33b9ed79a94429679d4e7640ed.png)](https://i.stack.imgur.com/yHi8i.png)

基本上以下步骤涉及验证手机号码

1.  第一个用户手机号码将被发送到我们的服务器，在那里将创建新的用户行。

2.  我们的服务器向 SMS 网关请求带有验证码的手机号码的短信。

3.  SMS网关向用户设备发送带有验证码的SMS。

4.  验证码将再次发送回我们的服务器进行验证。我们的服务器对其进行验证并激活用户。

# mysql - 查询 'photos' 表，同时查询 'bookmarks' 表，以便知道带书签的照片

> ID：12401261
> 
> 赞同：0
> 
> 时间：2012-09-13T07:16:44.843
> 
> 标签：mysql, sql, database

如何查询名为 photos 的表中的所有记录，**并**知道当前用户使用单个查询已将哪些结果照片添加为书签？

这是我的表：

```
--
-- Table structure for table `photos`
--

CREATE TABLE IF NOT EXISTS `photos` (
  `id` int(11) NOT NULL auto_increment,
  `author` bigint(20) NOT NULL COMMENT 'The user''s Facebook ID.',
  `filename` varchar(255) NOT NULL,
  `thumbnail` varchar(255) NOT NULL,
  `post_date` timestamp NOT NULL default CURRENT_TIMESTAMP,
  `description` varchar(140) NOT NULL,
  `finalist` tinyint(4) NOT NULL DEFAULT '0',
  CONSTRAINT user_must_exist FOREIGN KEY (author)
    REFERENCES users(facebook_id)
    ON DELETE CASCADE,
  PRIMARY KEY  (`id`)
) ENGINE=InnoDB DEFAULT CHARSET=latin1 AUTO_INCREMENT=1 ;

-- --------------------------------------------------------

--
-- Table structure for table `bookmarks`
--

CREATE TABLE IF NOT EXISTS `bookmarks` (
  `facebook_id` bigint(20) NOT NULL COMMENT 'The author''s Facebook ID.',
  `photo_id` int(11) NOT NULL,
  CONSTRAINT photo_should_exist FOREIGN KEY (photo_id)
    REFERENCES photos(id)
    ON DELETE CASCADE,
  CONSTRAINT user_should_exist FOREIGN KEY (facebook_id)
    REFERENCES users(facebook_id)
    ON DELETE CASCADE,
  UNIQUE KEY `no_duplicates` (`facebook_id`,`photo_id`)
) ENGINE=InnoDB DEFAULT CHARSET=latin1 COMMENT='The user''s favourite photos.'; 
```

我想这个查询看起来像下面这样：

```
SELECT 
    photos.*, 
    bookmarks.photo_id AS bookmark 
FROM photos
LEFT JOIN bookmarks 
    ON bookmarks.photo_id = photos.id 
    AND photos.author = 123456789 
```

但是这不起作用，我收到以下 MySQL 错误：

```
Unknown column 'photos.id' in 'on clause' 
```

在 Barmar 指出的一个小错字修复之后，keyur 的代码对我有用。

```
SELECT photos . * , bookmarks.photo_id AS bookmark
FROM photos
LEFT JOIN bookmarks ON photos.id = bookmarks.photo_id
AND bookmarks.facebook_id = 123456789 
```

谢谢你。

编辑错字。

编辑第二个错字。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T07:43:41.510

[这是SQL Fiddle](http://sqlfiddle.com/#!2/753da/3)上的示例工作代码。正如评论中指出的那样，`bookmarks.id`您的桌子上没有列，`bookmarks`并且`photo.id`确实存在于`photos`桌子上。再次检查您收到的错误，似乎有些不正确。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T07:46:35.893

你的查询应该是这样的。

```
SELECT 
    photos.*, 
    bookmarks.id AS bookmark 
FROM photos
LEFT JOIN bookmarks 
    ON photos.id = bookmarks.photo_id 
    AND bookmarks.facebook_id = 123456789 
```

根据您的表结构`photos.facebook_id`不存在；它在书签表中

# html - 居中页脚菜单

> ID：12401264
> 
> 赞同：0
> 
> 时间：2012-09-13T07:16:50.883
> 
> 标签：html, css

这是一些编码[http://jsfiddle.net/joelupet/9NKzU/](http://jsfiddle.net/joelupet/9NKzU/)的预览。

我想看到我的菜单居中。此外，如果有其他方法，例如将 id$class 添加到 UL 元素结构。

该怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T16:23:53.893

有很多方法可以做到这一点！这是我推荐的。

将您的 CSS 更改为以下内容：

```
#footer_menu {
    text-align: center;
    border: 2px solid black;
    background-color:red;
}

#footer_menu ul{
    width:auto;
    overflow:hidden;    
    display: inline-block;
} 
```

检查[this fiddle](http://jsfiddle.net/crowjonah/dwpmd/)以获得示例实现。

# jsf - 使用 JSF2.0 和 Prime Faces 设置项目

> ID：12401267
> 
> 赞同：0
> 
> 时间：2012-09-13T07:16:56.377
> 
> 标签：jsf, primefaces

我正在尝试使用主要面孔库设置 JSF 项目当我运行此设置时，它显示以下错误

```
org.apache.jasper.JasperException: javax.servlet.ServletException: null source
org.apache.jasper.servlet.JspServletWrapper.handleJspException(JspServletWrapper.java:54
org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:417)
org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:320)
org.apache.jasper.servlet.JspServlet.service(JspServlet.java:266)
javax.servlet.http.HttpServlet.service(HttpServlet.java:803) 
```

我无法找出背后的原因。
以下是通过设置

以下是我包含在 web-inf/lib 中的库
1\. jsf-api-2.0.3.jar
2\. jsf-impl-2.0.3.jar
3\. jstl-1.0.2.jar
4\. primefaces-3.4.jar

以下是 web.xml 文件中的条目

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app version="2.5" xmlns="http://java.sun.com/xml/ns/javaee"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd">

    <context-param>
        <param-name>javax.faces.STATE_SAVING_METHOD</param-name>
        <param-value>server</param-value>
    </context-param> 

    <context-param>
        <param-name>javax.faces.DEFAULT_SUFFIX</param-name>
        <param-value>.xhtml</param-value>
    </context-param>

    <context-param>
        <param-name>primefaces.skin</param-name>
        <param-value>none</param-value>
    </context-param>

    <servlet>
        <servlet-name>Faces Servlet</servlet-name>
        <servlet-class>javax.faces.webapp.FacesServlet</servlet-class>
        <load-on-startup>1</load-on-startup>
    </servlet>

    <servlet-mapping>
        <servlet-name>Faces Servlet</servlet-name>
        <url-pattern>*.jsf</url-pattern>
    </servlet-mapping>

    <welcome-file-list> 
        <welcome-file>index.jsp</welcome-file>
     </welcome-file-list>

    <listener>
        <listener-class>
            com.nsf.ecap.web.base.ECapStartUpServlet
        </listener-class>
    </listener>

</web-app> 
```

登录.xhtml

```
<h:body>   

 <CENTER>  

     <h:panel header="Login Form">    
     <h:Form>  
         <h:PanelGrid columns="2" cellpadding="2">  
         <h:outputLabel value="UserName" for="#{loginBBean.userInfo.username}"> </h:outputLabel>
         <h:inputText value="#{loginBBean.userInfo.username}" label="UserName">   </h:inputText>  
         <h:outputLabel value="Password" for="#{loginBBean.userInfo.password}"></h:outputLabel>  
         <h:inputSecret value="#{loginBBean.userInfo.password}"></h:inputSecret>  
         <h:commandButton value="Login" type="submit" action="#{loginBBean.doLogin}"></h:commandButton>   

        </h:PanelGrid>  

    <h:messages>
    </h:messages>

    </h:Form>
    </h:panel>
</CENTER>  
</h:body>  
</html> 
```

索引.jsp

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
  <head>
    <base href="<%=basePath%>">

    <title>My JSP 'index.jsp' starting page</title>    
    <meta http-equiv="pragma" content="no-cache">
    <meta http-equiv="cache-control" content="no-cache">
    <meta http-equiv="expires" content="0">      
    <meta http-equiv="keywords" content="keyword1,keyword2,keyword3">
    <meta http-equiv="description" content="This is my page">
    <!--
    <link rel="stylesheet" type="text/css" href="styles.css">
    -->
  </head>

  <body>        
    <jsp:forward page="jsp/login/login.jsf"/>      
  </body>
</html> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-13T11:34:50.463

“我的 JSP 'index.jsp' 起始页”？请阻止/忽略/丢弃您正在阅读的教程。[它只会让您完全困惑并教您不良做法](http://balusc.blogspot.com/2008/06/what-is-it-with-roseindia.html)。

* * *

至于您的图书馆列表：

> 以下是我包含在 web-inf/lib 中的库
> 
> 1.  jsf-api-2.0.3.jar
> 2.  jsf-impl-2.0.3.jar
> 3.  jstl-1.0.2.jar
> 4.  primefaces-3.4.jar

首先，JSTL版本不对。它应该至少是 JSTL 1.1 或者最好是 1.2。否则，EL（表达式语言，那些`${}`/ `#{}`）将无法工作。删除 jstl-1.0.2.jar 并将[jstl-1.2.jar](http://download.java.net/maven/1/jstl/jars/jstl-1.2.jar)放置到位。

此外，它看起来还不错。令我惊讶的是，您拥有超过 2 年的 JSF API/impl 版本，而您拥有相当新的（不到 2 周）PrimeFaces 版本。我会将这些 JSF API/impl 版本对齐为[最新可用](http://javaserverfaces.java.net/)的. 它目前已经是[2.1.13](https://maven.java.net/content/repositories/releases/org/glassfish/javax.faces/2.1.13/javax.faces-2.1.13.jar)（注意：它现在只包含一个 JAR 文件 javax.faces.jar 而不是两个 JAR 文件）。

* * *

至于你的`web.xml`：

```
<web-app version="2.5" xmlns="http://java.sun.com/xml/ns/javaee"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd"> 
```

这被宣布符合 Servlet 2.5 规范，该规范已经超过 6 年了。你确定你正在运行这样一个过时的容器吗？鉴于 JSF 和 JSTL 库的存在，我假设您使用的是 Tomcat。当前的 Tomcat 版本 7.x 已经存在 2 年多了，并且与 Servlet 3.0 兼容。您应该声明您`web.xml`匹配目标容器的最高支持版本。

```
<web-app version="3.0" xmlns="http://java.sun.com/xml/ns/javaee"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd"> 
```

此外，这些`javax.faces.STATE_SAVING_METHOD`和`javax.faces.DEFAULT_SUFFIX`条目已经代表**默认**值。只需摆脱它们以最大程度地减少噪音。

* * *

至于你的`login.xhtml`：

```
<h:Form>  
     <h:PanelGrid columns="2" cellpadding="2"> 
```

标签名称区分大小写。和`<h:Form>`根本`<h:PanelGrid>`不存在。它是`<h:form>`和`<h:panelGrid>`。

```
<CENTER> 
```

虽然不是立即成为问题，但这个 HTML 元素自 1998 年以来已被**弃用**，取而代之的是 CSS。此外，以大写风格而不是`<center>`90 年代以前的 HTML 风格非常典型的形式看到它，并不会给我留下您正在阅读最新和正确的书籍/教程来学习 Web 开发的印象。您应该确保您的学习资源是最新的。

* * *

至于你的`index.jsp`：这完全没用。完全删除它。只需更改您`web.xml`的

```
<servlet-mapping>
    <servlet-name>Faces Servlet</servlet-name>
    <url-pattern>*.jsf</url-pattern>
</servlet-mapping>

<welcome-file-list> 
    <welcome-file>index.jsp</welcome-file>
</welcome-file-list> 
```

至

```
<servlet-mapping>
    <servlet-name>Faces Servlet</servlet-name>
    <url-pattern>*.xhtml</url-pattern>
</servlet-mapping>

<welcome-file-list> 
    <welcome-file>login.xhtml</welcome-file>
</welcome-file-list> 
```

当您在网络浏览器中访问时，这种方式`login.xhtml`将显示为“主页” 。`/`请注意，您不应该也不再需要`*.jsf`URL 模式。

* * *

### 也可以看看：

*   [我们的 JSF wiki 页面](https://stackoverflow.com/tags/jsf/info)- 在底部您可以找到不错的 JSF 2.0 资源

# c# - 仅通过使用验证控件更改 C# 中日期的默认值？

> ID：12401273
> 
> 赞同：0
> 
> 时间：2012-09-13T07:17:26.950
> 
> 标签：c#, validation, date

基本上，这是我输入出生日期的代码。

```
<asp:TextBox Width="208px" ID="txtDOB" runat="server"></asp:TextBox>
<asp:RequiredFieldValidator ID="reqDOB" runat="server" ControlToValidate="txtDOB" ErrorMessage="Cannot be blank" Display="Dynamic"></asp:RequiredFieldValidator>
<asp:CompareValidator ErrorMessage="(MM/DD/YYYY)" Display="Dynamic" ID="valcDate" ControlToValidate="txtDOB" Operator="DataTypeCheck" Type="Date" runat="server"> </asp:CompareValidator>
<asp:RangeValidator ID="valrDate" runat="server" ControlToValidate="txtDOB" MinimumValue="01/01/1800" MaximumValue="01/01/2100" Type="Date" text="Invalid Date" Display="Dynamic"/> </asp:RangeValidator> 
```

所以现在我想覆盖从`mm-dd-yyyy`to的基本格式`dd-mm-yyyy`。有什么基本的方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T07:24:22.783

在 c# 中，您可以像这样自定义格式：-

```
DateTime.Now.ToString("dd/MM/yyyy"))); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T08:08:04.173

我相信验证器控件具有文化意识，因此最简单的解决方案是设置适当的文化（例如 en-GB）。一个简单的方法是：

```
<system.web>
    ...
    <globalization culture="en-GB" />
    ...
<system.web> 
```

当然，您的错误信息也需要适应所选的文化。例如，您可能希望将错误消息设置为：

```
"(" + Thread.CurrentThread.CurrentCulture.DateTimeFormat.ShortDatePattern.ToUpper() + ")" 
```

# asp.net - 使用 HTTPWebRequest 获取 SSRS 报告：错误 401

> ID：12401274
> 
> 赞同：0
> 
> 时间：2012-09-13T07:17:28.763
> 
> 标签：asp.net, reporting-services, httpwebrequest, httpwebresponse, http-status-code-401

各位开发者您好，

我目前的任务是制作批量报告导出器。我的想法是我必须为每组参数创建一个循环，并使用 HTTPWebRequest 和 Response 拉取报告，并将每个参数保存到文件中。

我曾尝试在 Google 上使用公开可用图片的 URL，它可以 100% 工作。但我的问题是，当我尝试从我的报表服务器获取报表时，我得到了 401 Unauthorized 异常。

这是我的代码：

```
Dim ReportServerURL As String = System.Configuration.ConfigurationManager.AppSettings.Get("reportServerURL")
'Get the needed credentials for opening a connection to the report server.
Dim ReportServerUN As String = System.Configuration.ConfigurationManager.AppSettings.Get("reportServerUN")
Dim ReportServerPW As String = System.Configuration.ConfigurationManager.AppSettings.Get("reportServerPW")
Dim ReportServerDomain As String = System.Configuration.ConfigurationManager.AppSettings.Get("reportServerDomain")
'Get the path to where the reports must be saved.
Dim BTIReportFolderPath As String = Server.MapPath(System.Configuration.ConfigurationManager.AppSettings.Get("bulkReportingFilePath"))
'Create a http request or connecting to the report server.
Dim ReportHTTPRequest As HttpWebRequest = Nothing
'Create a http response to catch the data stream returned from the http request.
Dim ReportHTTPResponse As HttpWebResponse = Nothing
'Create a stream to read the binary data from the http reponse.
Dim ReportStream As Stream = Nothing
Dim ReportFileStream As FileStream = Nothing
'Create an array of bytes to get the binary data from the stream.
Dim ReportBytes As Byte()
Dim ReportBuffer As Integer = 1024
Dim ReportBytesRead As Integer = 0
'Create a webrequest to get the report with all the report parameters included.
ReportHTTPRequest = WebRequest.Create(ReportServerURL & "&UserID=" & UserID & "&InstrumentID=" & InstrumentID & "&AssessmentID=" & AssessmentID & "&OverViewChartURL=" & reportGraphURL & BTIGraphGenerator.SaveBTIGraph(FactorGraph, reportGraphImagePath) & "&NeuroticismChartURL=" & reportGraphURL & BTIGraphGenerator.SaveBTIGraph(NeuroticismGraph, reportGraphImagePath) & "&ExtraversionChartURL=" & reportGraphURL & BTIGraphGenerator.SaveBTIGraph(ExtraversionGraph, reportGraphImagePath) & "&ConscientiousnessChartURL=" & reportGraphURL & BTIGraphGenerator.SaveBTIGraph(ConscientiousnessGraph, reportGraphImagePath) & "&ExperienceChartURL=" & reportGraphURL & BTIGraphGenerator.SaveBTIGraph(ExperienceGraph, reportGraphImagePath) & "&AgreeablenessChartURL=" & reportGraphURL & BTIGraphGenerator.SaveBTIGraph(AgreeablenessGraph, reportGraphImagePath))
'Dim ReportServerCredentials As New CredentialCache()
'ReportServerCredentials.Add(New Uri(ReportServerURL), "Basic", New NetworkCredential(ReportServerUN, ReportServerPW))
'ReportHTTPRequest.PreAuthenticate = True
'ReportHTTPRequest.Credentials = New NetworkCredential(ReportServerUN, ReportServerPW)
'Get the response from the request.
Dim credentials As String = Convert.ToBase64String(ASCIIEncoding.ASCII.GetBytes(ReportServerUN & ":" & ReportServerPW))
ReportHTTPRequest.Headers.Add("Authorization", "Basic" & credentials)
'ReportHTTPRequest.Credentials = New NetworkCredential(ReportServerUN, ReportServerPW, ReportServerDomain)
'Get the response from the request.
Try
    ReportHTTPResponse = ReportHTTPRequest.GetResponse()
    Catch ex As Exception
    ReportHTTPResponse = ReportHTTPRequest.GetResponse()
End Try

'Read the binary stream from the http response.
ReportStream = ReportHTTPResponse.GetResponseStream()
ReportBytes = New Byte(ReportBuffer) {}
ReportBytesRead = ReportStream.Read(ReportBytes, 0, ReportBuffer)
ReportFileStream = New FileStream(NewBTIReportFolder.FullName & "ASiame" & Guid.NewGuid.ToString() & ".pdf", FileMode.Create)
Do While ReportStream.CanRead And ReportBytesRead > 0
    ReportFileStream.Write(ReportBytes, 0, ReportBytesRead)
    ReportBytesRead = ReportStream.Read(ReportBytes, 0, ReportBuffer)
Loop

ReportHTTPResponse.Close()
ReportStream.Close()
ReportFileStream.Close() 
```

注释掉的所有位都是我尝试传递凭据的所有方法。

我是服务器上的管理员，但我仍然无法通过身份验证。

在此先感谢您的帮助:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-05-14T09:16:53.073

我找到了答案。我一直在尝试： ReportHTTPRequest.Credentials = CredentailCache.DefaultCredentials() 而不是： ReportHTTPRequest.Credentials = CredentailCache.DefaultNetworkCredentials()

在第二个问题上，我发现使用本地 IP 而不是 URL 效果很好。我猜想使用 URL 会尝试从服务器外部路由请求，然后再返回服务器。使用本地 IP 将请求保持在内部并神奇地工作。

# javascript - JQM 表单错误弹出框

> ID：12401279
> 
> 赞同：0
> 
> 时间：2012-09-13T07:18:10.757
> 
> 标签：javascript, jquery-mobile

我正在为学校制作 JQM 中的 CRUD。我的 CRUD 工作正常。我有一些提交之前需要的表单字段，并且我`class="required"`在标签上有。因此，如果未填写这些字段，则表示这些字段是必需的。

我希望它们显示在弹出框中。我已经使用 JavaScript 来实现这一点，但是我的表单页脚一直显示为弹出框后面的超链接。

它看起来相当愚蠢，我不知道如何让它停止。我会尝试在这里发布一些代码以获得一些帮助。

这是我用来调用错误页面的隐藏错误链接：

```
<a href="#apartmentFormErrors" id="apartmenterrorslink" data-rel="dialog" data-transition="pop">Open Errors</a> 
```

这是我的错误页面：

```
<div data-role="dialog" id="apartmentFormErrors">
    <div data-role="header" data-position="fixed">
        <h1>Missing Fields</h1>
    </div>

    <div data-role="content">
        <p>Test</p>
    </div>
</div> 
```

最后，这是我为使其工作而编写的 JavaScript：

```
$(document).on('pageinit', function(){

    var myForm = $('#apartmentForm');
    var apartmenterrorslink = $('#apartmenterrorslink');

    myForm.validate({
        invalidHandler: function(form, validator) {
            apartmenterrorslink.click();
        },
        submitHandler: function() {
            var data = myForm.serializeArray();
            storeData();
        }
    });

    //any other code needed for addItem page goes here

}); 
```

这是我正在谈论的图片

![链接出现在弹出窗口后面](../Images/2f8af8a51a2027cd1ae6b56000ef82ea.png)

# jquery - 我可以在 Jquery 中对两个或多个不同表之间的行进行排序吗？

> ID：12401280
> 
> 赞同：0
> 
> 时间：2012-09-13T07:18:13.293
> 
> 标签：jquery, sorting

> **可能重复：**
> [使用 tablesorter 对多个表进行排序](https://stackoverflow.com/questions/8143623/sorting-multiple-tables-with-tablesorter)

我有五个动态生成的表，每个表都有一行，我想对这些表进行排序。由于某种原因，我不想将这些行组合为一个表。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T07:37:32.563

试试这个**[jquery.tablesorter.min.js](http://tablesorter.com/docs/)**

# asp.net-mvc-3 - 使用与主视图不同的表的局部视图

> ID：12401281
> 
> 赞同：0
> 
> 时间：2012-09-13T07:18:14.500
> 
> 标签：asp.net-mvc-3, razor, partial-views

我正在尝试将下拉列表添加到我的酒店视图 - index.cshtml。此视图的酒店控制器获取 Hotel 对象：

```
private HotelEntities db = new HotelEntities();

   public ViewResult Index()
    {
        var hotels = db.Hotels.Include("Address");
        return View(hotels.ToList());
    } 
```

我想在此视图中显示酒店列表。但在显示此列表之前，我希望用户能够搜索他们想要查看哪个国家的酒店。下拉列表是我数据库中的国家/地区列表。我的实体模型中有一个对象 - HotelEntities。我在共享文件夹中创建了一个部分国家视图，其中包含下拉列表和一个获取国家列表的国家控制器：

```
 public class CountryController : Controller
   {
    private HotelEntities db = new HotelEntities();
    //
    // GET: /Country/

    public ActionResult Index()
    {
        var country = db.Countries.ToList();
        return View(country.ToList());
    }

} 
```

在部分视图中，我有：

```
@model IEnumerable <MvcApp20Aug.Models.Country>

           @foreach (var item in Model)
           {
             @Html.DropDownListFor(model => item.CountryId, new SelectList(item.CountryIso, item.CountryName));

           } 
```

最后我将部分视图添加到我的酒店 index.cshtml 中：

```
@model IEnumerable<MvcHotelApp.Models.Hotel>

@{
    ViewBag.Title = "Index";
}

<h2>Index </h2> 
@{Html.RenderPartial("Country");}
<p> 
```

我收到错误消息：传入字典的模型项的类型为“System.Collections.Generic.List`1[MvcHotelApp.Models.Hotel]”，但此字典需要“MvcHotelApp.Models.Country”类型的模型项.

所以我不明白如何在我的部分视图中使用不同的表到我的主视图。任何人都可以解释为什么不以及我应该如何处理这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T07:24:05.563

称它为

```
 @{Html.RenderAction("Index","Country");} 
```

`country`并像这样改变你的局部视图，

```
 @model IEnumerable <MvcApp20Aug.Models.Country>
         @Html.DropDownListFor("CountryId", new SelectList(Model.CountryIso, Model.CountryName)); 
```

# android - 在文件管理器android中打开文件

> ID：12401284
> 
> 赞同：-1
> 
> 时间：2012-09-13T07:18:23.933
> 
> 标签：android, android-intent, uri

我看到很多类似的问题，但没有人帮助我！

所以，我想获取可用文件管理器的列表，当用户选择时，在这个文件管理器中打开文件夹，其中有必要的文件。文件可以是任何扩展名。

我尝试这样：

```
s=Uri.fromFile(File object);

...

Intent intent = new Intent();
intent.addCategory(Intent.CATEGORY_OPENABLE);
intent.setType("file/*");
intent.setAction(Intent.ACTION_GET_CONTENT);  
intent.setData(s);
context.startActivity(intent); 
```

..但这会抛出ActivityNotFoundException。

请帮我。谢谢！

我`StartActivity`从调用`DialogInterface.OnClickListener`，我有函数，创建对话框并返回。还有一点，当我不这样做时`setData`，程序正在工作并向用户提供文件管理器列表，但它是打开的根目录，而不是文件目录。

```
private  Dialog createAlertDialog( final Context context,   final Uri s) {
        Dialog dialog = new Dialog(context);
        Builder builder = new AlertDialog.Builder(context);

        DialogInterface.OnClickListener onClickListener = new DialogInterface.OnClickListener() {
            public void onClick(DialogInterface dialogArg, int which) {

                Intent intent = new Intent();
                intent.addCategory(Intent.CATEGORY_OPENABLE);
                intent.setType("file/*");
                intent.setAction(Intent.ACTION_GET_CONTENT);  
                intent.setData(s);
                context.startActivity(intent);
            }
        };
        DialogInterface.OnClickListener onCloseDialog = new DialogInterface.OnClickListener() {
            public void onClick(DialogInterface dialogArg, int which) {

                }
        };

        dialog = builder.setPositiveButton(MyApp.getCustomAppContext().getString(R.string.ok), onClickListener)
                        .setNegativeButton(MyApp.getCustomAppContext().getString(R.string.cancel), onCloseDialog)
                        .setMessage(MyApp.getCustomAppContext().getString(R.string.open_explorer))
                        .create();
        return dialog;
    } 
```

在日志中我有这个：

```
09-13 11:06:47.226: ERROR/AndroidRuntime(14534): android.content.ActivityNotFoundException: No Activity found to 
 handle Intent { act=android.intent.action.GET_CONTENT cat=[android.intent.category.OPENABLE] 
  dat=file:///toptoptop/Noize%20MC%20Bring-Bring-Bring.mp4 }
09-13 11:06:47.226: ERROR/AndroidRuntime(14534):     at android.app.Instrumentation.checkStartActivityResult
(Instrumentation.java:1409)
09-13 11:06:47.226: ERROR/AndroidRuntime(14534):     at android.app.Instrumentation.execStartActivity
(Instrumentation.java:1379)
09-13 11:06:47.226: ERROR/AndroidRuntime(14534):     at android.app.Activity.startActivityForResult
(Activity.java:2827)
09-13 11:06:47.226: ERROR/AndroidRuntime(14534):     at android.app.Activity.startActivity(Activity.java:2933)
09-13 11:06:47.226: ERROR/AndroidRuntime(14534):     at com.serbinvitaly.copyeraser.ResultsActivity$4.onClick
(ResultsActivity.java:171)
09-13 11:06:47.226: ERROR/AndroidRuntime(14534):     at com.android.internal.app.AlertController$ButtonHandler.handleMessage(AlertController.java:159)
09-13 11:06:47.226: ERROR/AndroidRuntime(14534):     at android.os.Handler.dispatchMessage(Handler.java:99)
09-13 11:06:47.226: ERROR/AndroidRuntime(14534):     at android.os.Looper.loop(Looper.java:123)
09-13 11:06:47.226: ERROR/AndroidRuntime(14534):     at android.app.ActivityThread.main(ActivityThread.java:3687)
09-13 11:06:47.226: ERROR/AndroidRuntime(14534):     at java.lang.reflect.Method.invokeNative(Native Method)
09-13 11:06:47.226: ERROR/AndroidRuntime(14534):     at java.lang.reflect.Method.invoke(Method.java:507)
09-13 11:06:47.226: ERROR/AndroidRuntime(14534):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:842)
09-13 11:06:47.226: ERROR/AndroidRuntime(14534):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:600)
09-13 11:06:47.226: ERROR/AndroidRuntime(14534):     at dalvik.system.NativeStart.main(Native Method)
09-13 11:06:47.226: WARN/ActivityManager(7260):   Force finishing activity com.serbinvitaly.copyeraser/.ResultsActivity
09-13 11:06:47.230: ERROR/(7260): Dumpstate > /data/log/dumpstate_app_error 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T08:52:20.220

案例很简单——Android 看不到任何活动来根据您的意图标准处理您的请求。不管你喜不喜欢 :) 如果你确定你的设备上安装了一些东西可以打开你的文件（并且该应用程序会为其他人打开），你可以尝试安装[Intent Intercept](https://play.google.com/store/apps/details?id=uk.co.ashtonbrsc.android.intentintercept)应用程序，看看他们的意图与你的意图相比有效不是。

`try/catch`在尝试调用外部活动时，您应该始终使用。不要假设有任何或允许您调用它。所以应该是：

```
try {
  startActivity(intent);
} catch( Exception e ) {
   // show toask to the user
   e.printStackTrace();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T07:35:12.433

尝试删除 context.startActivity(intent) 并更改 this.startActivity(intent)。或者请给我更多的源代码。和日志。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-08-14T04:41:08.123

我在使用这条线时遇到了同样的问题：

```
intent.addCategory(Intent.CATEGORY_OPENABLE); 
```

删除该行，一切都会再次正常。

# hibernate - Grails Hql查询一对多关联

> ID：12401288
> 
> 赞同：2
> 
> 时间：2012-09-13T07:18:48.583
> 
> 标签：hibernate, grails, groovy, hql, grails-orm

我有一个培训领域课程

```
 class Training {

     String type
     Date createdOn
     Date modifiedOn

    static belongsTo = [course: Course]
    static hasMany = [attachments: Attachment]
  } 
```

我有课程领域课程

```
 class Course {

          String name

          static hasMany = [trainings: Training, tracks: Track]
          static belongsTo = Track
   } 
```

和跟踪域类

```
 class Track {
        String name 
    } 
```

现在我有一个过滤器（这是 gsp 页面，它将 id 作为参数发送到控件），它根据课程和跟踪选择培训

现在说 params.courseId = 1 和 3

所以我写了查询

```
 def query = "FROM Training AS t WHERE  t.course.id IN (1,3)"
   trainingList = Training.findAll(query) 
```

这是正确的 ii 得到所需的输出。

现在，当我说我有跟踪 ID 时，params.trackId = 1,2

```
 def query = "FROM Training AS t WHERE  t.course.tracks.id IN (1,2)"
    trainingList = Training.findAll(query) 
```

这不起作用..如何在上述关联中编写正确的查询。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-13T14:54:34.137

不同之处在于您正在查询一对多关联，即“多”方面。

假设 HQL：

```
def query = "FROM Training AS t WHERE exists " +
  "(from t.course.tracks AS tr where tr.id IN (1,2))" 
```

或标准：

```
def trainings = Training.withCriteria {
   course {
     tracks {
       in('id', [1, 2])
     }
  }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-19T10:28:16.900

我没有进行更深入的研究，但是这个查询给出的结果与您首先编写的查询相同

```
def trainingList = Training.findAll ("from Training as trnin "+
"join trnin.course.id as trinincr"+
"join trinincr.tracks.id"+
" where trnin.course.id in (1,3)") 
```

# .net - 为什么它无法解析对该数据库项目中主数据库对象的引用？

> ID：12401290
> 
> 赞同：1
> 
> 时间：2012-09-13T07:18:55.077
> 
> 标签：.net, sql, sql-server, visual-studio, database-project

我有一个数据库项目，其中有一个存储过程 spBarFoo。

当我尝试部署该项目时，即使我引用了我正在处理的数据库中的一个表，我也会收到如下警告：

警告 xx SQL04151：过程：[dbo].[spBarFoo]*对对象* **[Foo].[dbo].[Bar] 有一个未解析的引用。** D:...\Schema Objects\Schemas\dbo\Programmability\Stored Procedures\spBarFoo.proc.sql

警告 xx SQL04151：过程：[dbo].[spBarFoo] 对对象**[Foo].[dbo].[Bar].[Id]** D:...\Schema Objects\Schemas\dbo\Programmability\Stored的引用未解析程序\spBarFoo.proc.sql

警告 xx SQL04151：过程：[dbo].[spBarFoo] 对对象**[Foo].[dbo].[Bar].[Name]** D:...\Schema Objects\Schemas\dbo\Programmability\Stored的引用未解析程序\spBarFoo.proc.sql

警告 xx SQL04151：过程：[dbo].[spBarFoo] 对对象**[Foo].[dbo].[Bar].[Surname]** D:...\Schema Objects\Schemas\dbo\Programmability\Stored的引用未解析程序\spBarFoo.proc.sql

这是来自存储过程的引用：

```
CREATE PROCEDURE [spBarFoo] @birthDate datetimeoffset
AS

-- Some stuff

INSERT INTO Foo..[Bar](
           [Id]
          ,[Name]
          ,[Surname]

-- Rest of the sp 
```

**问题**：如何让 Visual Studio 解决对 Foo..[Bar] 的引用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T09:12:57.247

尝试从过程中删除显式数据库名称。即，而`INSERT INTO Foo..[Bar](`不仅仅是使用`INSERT INTO [Bar](`.

# android - 如何在android中获取名称或id图像

> ID：12401291
> 
> 赞同：0
> 
> 时间：2012-09-13T07:18:55.497
> 
> 标签：android

我想知道如何获得名称图像。我使用 setImageResource(R.drawable.id)。我怎样才能得到这句话：代码中的“R.drawable.id”？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-13T07:22:53.797

如果您的意思是您所指的图像的名称，请使用它。

```
String resName = getResourceNameFromClassByID(R.drawable.class, R.drawable.id); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T07:22:43.077

`R`指的是`R.java`文件`gen`夹下的文件..
![在此处输入图像描述](../Images/03a1acf6cf09e19ffb08a98aa1ef9725.png)
每次添加资源时，都会在此文件中自动创建一个id，因此R应该解析为您的包名。R

# http - 如何在resin4.0中将https://请求重定向到http://

> ID：12401292
> 
> 赞同：0
> 
> 时间：2012-09-13T07:18:55.540
> 
> 标签：http, https, openssl, web.xml, resin

事实上，我得到了将 http 重定向到 https 的方法，因为我在 web.xml 中添加了一个过滤器。如，

```
<security-constraint>
    <web-resource-collection>
        <web-resource-name>SSL</web-resource-name>
        <url-pattern>/xxx/*</url-pattern>
    </web-resource-collection>
    <user-data-constraint>
        <transport-guarantee>CONFIDENTIAL</transport-guarantee>
    </user-data-constraint>
</security-constraint> 
```

在这种情况下，我可以使 URL 像`/xxx/*`在 https 模式下被请求。还有一些其他的 url `/yyy/*`，比如必须在 http 模式下请求，那么我该怎么做呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-29T03:40:33.380

在resin-web.xml 中，您可以使用Resin rewrite 标签重定向到不同的URL 并检查IfSecure 等条件。

例如，您的 WEB-INF/resin-web.xml 可能看起来像

```
<web-app xmlns="http://caucho.com/ns/resin"
         xmlns:resin="urn:java:com.caucho.resin">

  <resin:Redirect regexp="^/xxx/" target="https://myhost.com/xxx/">
    <resin:IfSecure value="false"/>
  </resin:Redirect>

  <resin:Redirect regexp="^/yyy/" target="http://myhost.com/yyy/">
    <resin:IfSecure value="true"/>
  </resin:Redirect>

</web-app> 
```

/xxx 上的第一个匹配项，并检查它是否是 SSL 连接。如果不是 SSL 连接，它将重定向到主机的 https。否则忽略该规则。

第二个匹配您的 /yyy，并检查它是否是 SSL 连接。如果是 SSL 连接，它会重定向到您主机的 http。否则忽略该规则。

# java - 以编程方式将现有项目导入 Eclipse

> ID：12401297
> 
> 赞同：13
> 
> 时间：2012-09-13T07:19:13.917
> 
> 标签：java, eclipse, import, eclipse-plugin

我正在尝试以编程方式将项目导入 Eclipse。我不想使用 UI 模式。

以下是我用于导入项目的代码：

```
IProjectDescription description = ResourcesPlugin.getWorkspace().loadProjectDescription(  new Path("PROJECT_PATH/.project"));
IProject project = ResourcesPlugin.getWorkspace().getRoot().getProject(description.getName());
project.create(description, null);
project.open(null); 
```

我只得到项目文件夹以及`.location file`文件`.markers.snap`和`.syncinfo.snap`文件，但我没有得到源文件夹等。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-09-14T18:44:34.087

利用`org.eclipse.ui.wizards.datatransfer.ImportOperation`

尝试这样的事情：

```
IOverwriteQuery overwriteQuery = new IOverwriteQuery() {
        public String queryOverwrite(String file) { return ALL; }
};

String baseDir = // location of files to import
ImportOperation importOperation = new ImportOperation(project.getFullPath(),
        new File(baseDir), FileSystemStructureProvider.INSTANCE, overwriteQuery);
importOperation.setCreateContainerStructure(false);
importOperation.run(new NullProgressMonitor()); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-02-25T14:36:51.023

你可能错过了一行

```
description.setLocation(new Path("/absolute/path/to/project/folder")); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-13T08:14:18.737

您的代码似乎很好。您无法获取源文件夹到底是什么意思？您是否尝试过刷新项目？

`project.refreshLocal(IResource.DEPTH_INFINITE, new NullProgressMonitor());`

# c# - 异步 tcp 服务器内存不断增长，并且有时在 endreceive 上出现 10054 错误

> ID：12401298
> 
> 赞同：1
> 
> 时间：2012-09-13T07:19:17.353
> 
> 标签：c#, asynchronous, tcp

除了内存使用量以惊人的速度增加之外，我还在最终接收和 pgm 停止时收到“现有连接已被远程主机 10054 关闭”。请帮忙
谢谢

我有一个 TCP 套接字服务器，它工作正常。但是工作内存从 10 MB 增长到 250 MB。

我监视了任何 closed_wait 套接字的嵌套，但没有找到任何？

任何人都可以帮助我。它必须处理许多没有内存泄漏的连接。

StartListen 的代码

```
void StartListen(object sender, System.EventArgs e)
{
    try
    {
        string portStr = textBoxPort.Text;
        int port = System.Convert.ToInt32(portStr);
        // Create the listening socket...
        m_mainSocket = new Socket(AddressFamily.InterNetwork,
            SocketType.Stream,
            ProtocolType.Tcp);
        IPEndPoint ipLocal = new IPEndPoint(IPAddress.Any, port);

        m_mainSocket.Bind(ipLocal);

        m_mainSocket.Listen(100);

        m_mainSocket.BeginAccept(new AsyncCallback(OnClientConnect),null);

        UpdateControls(true);
    }
    catch (SocketException se)
    {
        writer.WriteToLog("In StartListen " + se.Message);
    }
}

public void OnClientConnect(IAsyncResult asyn)
{
    try
    {
        Socket m_mainSocket = (Socket)asyn.AsyncState;

        Socket workerSocket = m_mainSocket.EndAccept(asyn);
        Interlocked.Increment(ref m_clientCount);

        m_workerSocketList.Add(workerSocket);

        WaitForData(workerSocket, m_clientCount);

        m_mainSocket.BeginAccept(new AsyncCallback(OnClientConnect), null);
    }
    catch (ObjectDisposedException)
    {
        System.Diagnostics.Debugger.Log(0, "1", "\n OnClientConnection: Socket has been closed\n");
    }
    catch (Exception se)
    {
        writer.WriteToLog(DateTime.Now.ToString() + " OnClientConnect " + se.Message);
    }
}

public void OnDataReceived(IAsyncResult asyn)
{
    // Logger.Log("In OnDataReceived");
    SocketPacket socketData = (SocketPacket)asyn.AsyncState;
    bool socketClosed = false;

    try
    {
        // Complete the BeginReceive() asynchronous call by EndReceive() method
        // which will return the number of characters written to the stream 
        // by the client
        int iRx = socketData.m_currentSocket.EndReceive(asyn);
        char[] chars = new char[iRx + 1];
        // Extract the characters as a buffer
        System.Text.Decoder d = System.Text.Encoding.UTF8.GetDecoder();
        int charLen = d.GetChars(socketData.dataBuffer,
            0, iRx, chars, 0);

        System.String szData = new System.String(chars);
            szData= szData.TrimEnd('\0');

             if (!SocketExtensions.IsConnected(socketData.m_currentSocket)) {

            socketData.m_currentSocket.Shutdown(SocketShutdown.Both);
            socketData.m_currentSocket.Close();
                              return;
               } 

        else
        {

            WaitForData(socketData.m_currentSocket, socketData.m_clientNumber);
        }
    }
    catch (ObjectDisposedException)
    {
        System.Diagnostics.Debugger.Log(0, "1", "\nOnDataReceived: Socket has been closed\n");
    }
    catch (SocketException se)
    {
        if (se.ErrorCode == 10054) // Error code for Connection reset by peer
        {
            string msg = "Client " + socketData.m_clientNumber + " Disconnected" + "\n";

            // Remove the reference to the worker socket of the closed client
            // so that this object will get garbage collected
            m_workerSocketList[socketData.m_clientNumber - 1] = null;
            UpdateClientListControl();
        }
        else
        {
            MessageBox.Show(se.Message);
           // Logger.Log(se.Message);
            writer.WriteToLog("OnDataReceived " + se.Message);

        }
    }
    catch (Exception ex)
    {
       // Logger.Log(ex.Message);
        writer.WriteToLog("OnDataReceived " + ex.Message);
    }
}
static class SocketExtensions
{
    public static bool IsConnected(this Socket socket)
    {
        try
        { 
            return !(socket.Poll(1, SelectMode.SelectRead) && socket.Available == 0);
        }
        catch (SocketException) { return false; }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T07:37:02.060

.NET 应用程序的内存占用增长到一定大小是没有问题的，只要它不*继续*增长。根据工作负载，您的 TCP 服务器每次接受新客户端并发送/接收数据时都会分配许多对象。即使不再使用它们，这些对象也会在内存中停留一段时间，直到 GC 释放它们。这并不意味着存在内存泄漏。

如果内存使用量增长得如此之快以至于您遇到了系统内存问题，请确保您在处理客户端请求时不会以某种方式保留一些创建的对象。

# javascript - 正则表达式允许无限精度

> ID：12401302
> 
> 赞同：0
> 
> 时间：2012-09-13T07:19:32.583
> 
> 标签：javascript, .net, regex, scripting

以下正则表达式只允许直到 2 个精度

```
/^\d+(\.\d{1,2})?$/, 
```

但它应该允许任何精度..如何更改此正则表达式以允许任何精度值？

喜欢 12.212121212121212121212...

现在只需要两个精度... 1223232323.23

我试过这个不起作用..

```
/^\d+(\.\d{1,All})?$/, 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T07:20:33.987

`/^\d+(\.\d{1,})?$/`

或者：

`/^\d+(\.\d+)?$/`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-13T07:28:23.553

这应该是这样的：

```
/^\d+(\.\d+)?$/ 
```

# c++ - 从纯 c 代码调用 c++ activex dll

> ID：12401306
> 
> 赞同：1
> 
> 时间：2012-09-13T07:19:47.620
> 
> 标签：c++, c, winapi, activex, mingw

我有一个 c++ active x dll，它是从 Visual Studio 2005 构建的，我需要从必须在 mingw32 编译器中编译的“c”代码中调用它。

是否可以从 c 调用 c++ active x dll，或者我必须将 dll 从 activex 转换为 win32。

请给我你的建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T07:46:03.690

ActiveX 是 COM，而 COM 本质上是一个 C API（因为它是 Win API 的一部分，而 Win API 本身就是一个 C API）所以这是可能的。但是它需要对 COM 有很好的理解。可以在这里找到一个很好的起点：http: [//www.codeproject.com/Articles/13601/COM-in-plain-C](http://www.codeproject.com/Articles/13601/COM-in-plain-C)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T07:45:08.423

Active-X 与 COM 相同/建立在 COM 上（我不会详细介绍）。由于 COM 的目的是允许跨语言组件，那么是的，您可以从 C 调用 COM 对象。

但是，我不确定它有多容易，因为您不会有任何简单的向导来导入和创建包装类或其他工具支持。

这是一个详细介绍一些细节[的博客。](http://blog.devork.be/2009/12/calling-com-methods-in-c.html)也许值得一瞧。

# selenium - 我是否需要从 webdriver 支持的 selenium 更新到 webdriver？

> ID：12401310
> 
> 赞同：0
> 
> 时间：2012-09-13T07:19:59.457
> 
> 标签：selenium, webdriver, selenium-webdriver, xpath

我使用 Webdriver 支持的 selenium 创建了我的测试。因此，我使用 selenium 会话变量来单击（）、类型（）、选择等。网页元素和我的测试工作正常。

大多数时候，我使用 xpath 来定位元素。

我是否需要完全更新到 selenium Webdriver？

请任何人提供建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T11:04:45.777

现在你已经解决了你的问题，答案是如果可以的话，你应该使用 WebDriver。

WebDriverBackedSelenium 仅允许您将旧的 v1 API 与 WebDriver API 一起使用。

我无法评论它是否会在某个时候被删除（因为我不是 Selenium 提交者），但你应该尽可能转移到 WebDriver。

如果有您想使用的方法，请将它们移植过来。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T10:10:17.803

好吧，据我了解您的问题，对于我的项目，我使用 Maven 构建管理器。因此，我将 selenium 依赖项添加到 POM.xml 文件中，maven 会自动建议导入项目所需的所有实际数据（存储库索引更新）。在您的 POM.xml 项目文件中添加此类依赖项：

```
• <dependency> <groupId>org.seleniumhq.
selenium</groupId> <artifactId>selenium-
java</artifactId> <version>2.24.1</version>
</dependency> 
```

这样我就可以使我的硒驱动程序保持最新状态。如果版本更新，您只需在 pom xml 中更改版本即可） Maven 依赖屏幕![屏幕](../Images/0dfced6af88185f818d932bea0908c87.png)

# android - android，如何在edittext中绘制虚线

> ID：12401311
> 
> 赞同：4
> 
> 时间：2012-09-13T07:19:58.993
> 
> 标签：android, android-edittext, draw, ondraw, dotted-line

我参考了这个链接：[How do I make a dotted/dashed line in Android?](https://stackoverflow.com/questions/6103713/how-do-i-make-a-dotted-dashed-line-in-android) , 并使用`DashPathEffect`. 但这对我不起作用？为什么？我的代码：

```
public class NoteEditText extends EditText {
    private Paint mPaint;

    public NoteEditText(Context context) {
        super(context);
    }

    public NoteEditText(Context context, AttributeSet attrs) {
        super(context, attrs);
        mPaint = new Paint();
        mPaint.setStrokeWidth(1);
        mPaint.setStyle(Paint.Style.FILL_AND_STROKE);
        mPaint.setColor(Color.DKGRAY);
        PathEffect effects = new DashPathEffect(new float[]{5,5,5,5},1);  
        mPaint.setPathEffect(effects);
    }

    @Override
    public void onDraw(Canvas canvas) {
        super.onDraw(canvas);

        int height = this.getHeight();
        int lineHeight = this.getLineHeight();
        int lineNum = height / lineHeight;
        L.l("line count: " + lineNum);
        for (int i = 0; i < lineNum; i++) {
            int y = (i + 1) * lineHeight;
            canvas.drawLine(0, y, this.getWidth() - 1, y, mPaint);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2014-06-28T13:38:18.193

The method setPathEffect is not supported by hardware acceleration. By default it is turned on (I think since Android 4.0)

[http://developer.android.com/guide/topics/graphics/hardware-accel.html#unsupported](http://developer.android.com/guide/topics/graphics/hardware-accel.html#unsupported)

You can turn off hardware acceleration inside the constructor with following code snippet:

> setLayerType(View.LAYER_TYPE_SOFTWARE, null);

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-15T14:27:21.170

```
new float[]{5,5,5,5} 
```

尝试

```
new float[]{5,10,15,20} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-13T07:57:07.090

这应该有效。

> EditText editText=(EditText) v.findViewById(android.R.id.text1);
> 
> editText.setPaintFlags(editText.getPaintFlags() | Paint.STRIKE_THRU_TEXT_FLAG);

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-11-21T08:30:29.457

我认为您不应该使用“for 循环”来绘制 line.set setStrokeWidth($diameter) 可能有用。我已经写了一个支持这个功能的简单视图，详细[在这里](https://stackoverflow.com/a/20115534/1251276)

# android - Android Emulator：从 backstack 中删除以 startActivityForResult 启动的 Activity

> ID：12401317
> 
> 赞同：0
> 
> 时间：2012-09-13T07:20:54.450
> 
> 标签：android, android-intent, android-activity

在我的应用程序中，我想应用注销功能。为此，我为注销放置了一个菜单项。如果按下注销。我调用了 LoginActivity。

```
Intent login=new Intent(getApplicationContext(),LoginActivity.class);
      login.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
                  startActivity(login); 
```

但问题是，在我的应用程序中，我将很多活动称为 StartActivityForResult()。所有这些活动仍在后台。如何从 backstack 中删除所有这些活动（StartActivityForResult）。

**当我在我的安卓设备中运行时，我没有遇到这个问题。但是在我的模拟器中运行时我遇到了这个问题**

谢谢，斯里达尔。

# oracle11g - Oracle - 合并行

> ID：12401324
> 
> 赞同：0
> 
> 时间：2012-09-13T07:21:20.233
> 
> 标签：oracle11g

我需要将多个表中的 2 行合并为 oracle 11g 中的单行 2 行应替换为单行，新行的列值应为两行的总和

现存的

```
Id No   Region  Value1  Value 2 Value 3

1           A       5       2       3
2           B       2       4       1
3           C       2       2       2
4           D       1       1       1 
```

新变化

```
Id No   Region  Value1  Value 2 Value 3
1           x       7       6       4
2           C       2       2       2
3           D       1       1       1 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-29T09:38:16.077

假设你有这张桌子：

```
Id No   Region  Value1  Value 2 Value 3

1           A       5       2       3
2           B       2       4       1 
```

如果在一列或多列中具有相同的值，您可以合并 2 行。

如果您坚持合并这 2 行（如您的示例），则查询应如下所示：

```
SELECT '1' as Id_no, 'x' as region, sum(value1), sum(value2), sum(value3) from table_name 
```

# google-bigquery - Google BigQuery 的内部错误

> ID：12401325
> 
> 赞同：1
> 
> 时间：2012-09-13T07:21:22.563
> 
> 标签：google-bigquery

我无法使用 Google Big Query 执行查询。我可以执行其他操作（例如；列出我的数据集）。我通过 Oauth2 获得授权。

我正在使用的 POST 正文是（作为 JSON）：

```
{
  "kind" => "bigquery#queryRequest",
  "query" => "SELECT day,sum(clicks) as clicks FROM [dc.test_data] where group by day   order by day desc LIMIT 10;",
  "defaultDataset" => {
  "datasetId" => "dc"
} 
```

我回来了：

```
{
  "error": {
    "errors": [
      {
        "domain": "global",
        "reason": "internalError",
        "message": "Unexpected. Please try again."
      }
    ],
    "code": 503,
    "message": "Unexpected. Please try again."
  }
} 
```

更改查询似乎没有任何区别。我仍然得到错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T14:53:32.240

您的默认数据集缺少 projectId。这不应该是必需的——我们应该重新使用查询中的项目 id，但是现在一致性检查过于热心并试图强制所有引用都是完全指定的。我已经提交了一个内部错误，它几乎肯定会在我们下周发布的版本中得到修复。

同时，您可以删除默认数据集部分（因为它看起来像在查询中指定了您的数据集）或将 projectId 添加到默认数据集。

# java - @RunAs 用于 @WebService EJB

> ID：12401329
> 
> 赞同：3
> 
> 时间：2012-09-13T07:21:42.013
> 
> 标签：java, web-services, security, ejb

我有一个匿名的 WebService EJB - webservice 调用工作正常。

现在我希望 WebService 作为特定的 SecurityRole 运行。

在 Web 服务中，我有以下注释：

```
@Stateless
@WebService
@DeclareRoles({ "LoggedUser" })
@SecurityDomain("my-jboss-real")
@RunAs("LoggedUser")
public class MyWebService { ... 
```

现在我想从一个 Webservice 方法访问一个`@EJB`with`@RolesAllowed({"LoggedUser"})`我得到：

```
ERROR [org.jboss.aspects.tx.TxPolicy] javax.ejb.EJBTransactionRolledbackException: javax.ejb.EJBAccessException.message: 'Caller unauthorized'
WARN  [org.jboss.ejb3.stateless.StatelessBeanContext] EJBTHREE-1337: do not get WebServiceContext property from stateless bean context, it should already have been injected
ERROR [org.jboss.ws.core.jaxws.SOAPFaultHelperJAXWS] SOAP request exception
javax.ejb.EJBTransactionRolledbackException: javax.ejb.EJBAccessException.message: 'Caller unauthorized'
        at org.jboss.ejb3.tx.Ejb3TxPolicy.handleInCallerTx(Ejb3TxPolicy.java:115) 
```

我在 JBoss 5.1GA 上运行

这是正确使用`@RunAs`还是有其他方法可以做到这一点。

**编辑**

添加：

```
@Resource
private WebServiceContext wsCtx;
@Resource
private EJBContext ejbCtx;

myWebServiceMethod(){
     ...
     System.out.println("EJBCtx: " + ejbCtx.getCallerPrincipal());
     System.out.println("EJBCtx: " + ejbCtx.isCallerInRole("LoggedUser"));
     System.out.println("WebContext: " + wsCtx.getUserPrincipal());
     System.out.println("WebContext: " + wsCtx.isUserInRole("LoggedUser"));
     ... 
```

这输出：

```
EJBCtx: anonymous
EJBCtx: false
WebContext: anonymous
WebContext: false 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-22T19:28:30.213

JBoss AS 5 尤其是 6 在安全上下文和 @RunAs 方面非常有问题，除了最基本的用例。

AS 7 中已经修复了大量这些错误。您可以尝试在那里设置一个测试用例，看看是否遇到了同样的问题。

请意识到 @RunAs 不适用于在应用注释的 bean 中运行的代码。相反，它仅适用于从该 bean 调用的 bean。您可以将其视为“出站/出站”角色。

更麻烦的是，Java EE 有一个严重的遗漏，那就是无法同时定义一个 RunAs*身份*。当您为“未经身份验证”的身份定义 RunAs 角色时，某些服务器反应不佳。JBoss 具有用于 RunAs 标识的专有注释。如果这能让您更进一步，您可能想尝试一下。

# authentication - 关于 Azure SQL 上的用户身份验证

> ID：12401332
> 
> 赞同：1
> 
> 时间：2012-09-13T07:21:44.920
> 
> 标签：authentication, azure, azure-storage, azure-worker-roles

我想在 Azure sql 上存储用户名、密码和他/她可访问的容器。这是最佳实践还是要遵循的最佳实践。

我需要实现的是可能在 blob 存储中创建简单的用户存储，然后在用户 id 和默认容器之间创建映射，并且访问权限将仅限于此。作为提供者执行此操作，因此可以随时更改实现。

还为管理员用户提供了一个配置，该用户可以查看每个存储帐户的所有容器。

注意：这是 Azure 辅助角色。

需要你的投入。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T20:15:49.350

您是否考虑过使用 Windows Azure 访问控制服务？它提供身份验证，并使您不必重新发明轮子。在 SQL Server 中构建身份验证系统有很多活动部分，它可能不是系统的战略部分。

另外，看看使用 ASP.NET 授权，如果 ACS 不能满足您的需求，它应该为您提供管道。

# android - 禁用菜单一段时间android

> ID：12401343
> 
> 赞同：0
> 
> 时间：2012-09-13T07:22:12.530
> 
> 标签：android, menu

我的问题是这样的：

我可以在一定时间内禁用菜单按钮吗？我的意思是从 ym 应用程序设置，例如，在接下来的 10 分钟内，如果我按下菜单，即使我在其他应用程序中也不会发生任何事情。按下该时间后，将检索菜单功能。

我的应用程序当然会在后台运行并检查时间，但我不知道是否可以“禁用”该按钮。我不是在问如何实现时间，而是在问如何禁用菜单按钮。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T07:37:21.337

它是如何工作的？

菜单事件在 Android 框架内处理。框架使用*KEYCODE_MENU*。换句话说，事件不会被分派，也永远不会到达您的应用程序层。这意味着，您**不能**覆盖此功能。

在构建新平台时，您可以自己更改框架。在[PhoneWindowManager](http://androidxref.com/4.1.1/xref/frameworks/base/policy/src/com/android/internal/policy/impl/PhoneWindowManager.java)内部（默认`KeyEvents`的处理方式是这样的`KEYCODE_HOME`），您可以添加逻辑来处理`KEYCODE_MENU`方法内部`interceptKeyBeforeDispatching(..)`。

# database - Vb6 到 C# 的迁移：规范化旧访问数据库

> ID：12401344
> 
> 赞同：2
> 
> 时间：2012-09-13T07:22:14.027
> 
> 标签：database, ms-access, normalization

我现有的应用程序是基于 Visual Basic6 和 Visual Studio C++ 的应用程序，用于自动机器，例如使用机器人的拾取和放置机器。它在 MS Access 中有一个旧数据库，其中只有 14 个表。但有些表有 90 多个字段，而其他表大多是独立的和分开的。作为将 vb6 迁移到 C# 的一部分，我得到了一项任务来有效地规范化 Access DB。

这是我第一次，我试图在网上阅读它。有很多关于标准化以及是否有必要的信息。看完后，我对如何进行有些困惑

--> 由于我的数据库主要涉及选择操作，最好不要过度规范数据库，但我有一些表有很多字段。MS 访问中的最大字段为 255。

有人能告诉我在对数据库进行有效重组之前我需要了解或检查哪些因素吗？如果有人可以为规范化方法的任何实际示例提供良好的资源，那将非常有帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T07:33:39.290

数据库规范化是一个复杂的主题，有许多不同的工具和方法可用于实现您的目标。正如您在问题中指出的那样，需要记住许多微妙的问题，包括不要过度规范化，因为它可能会对性能产生影响。虽然一些自动化工具可以在简单的情况下为您提供帮助，但它们的输出通常还有很多不足之处。

我的建议是花一些时间来更熟悉关系数据库这个主题——实际上有数百本关于这个主题的好书（可能还有数千本很好的网络资源）。没有什么可以替代深入挖掘并真正理解材料。

但是为了快速浏览一下范式（这是任何规范化的基础）， Microsoft[的数据库规范化基础知识描述](http://support.microsoft.com/kb/283878?wa=wsignin1.0)是一个很好的介绍，可以帮助您了解您想要实现的目标。

# linux - 如何将 libc.a 链接到 arm-linux 中的共享库中使用 arm-none-linux-gnueabi-gcc

> ID：12401347
> 
> 赞同：5
> 
> 时间：2012-09-13T07:22:33.387
> 
> 标签：linux, linker, arm, shared-libraries, libc

在一个项目中，我的同事创建了一个静态库，例如 liba.a，它与 app 链接。

在 liba.a 中，他将 libc malloc() 覆盖为他的所有者版本。

我创建了一个共享库 libs.so，它也与应用程序链接。

问题是当我的 libs.so 与应用程序链接时，我的 libs.so 中使用的 malloc() 将是 liba.a 中的那个，而不是标准 libc.so 中的那个，这会导致问题。

然后，我想将 libc.a 静态链接到我的 libs.so，我对 gcc 使用了 -static -shared -fPIC 标志。

但我总是得到 arm-2012.03/bin/../lib/gcc/arm-none-linux-gnueabi/4.6.3/../../../../arm-none-linux-gnueabi/bin /ld: arm-2012.03/bin/../arm-none-linux-gnueabi/libc/usr/lib/libc.a(dl-tsd.o)(.text+0x14): R_ARM_TLS_LE32 在共享对象中不允许重定位.

有人知道吗？

谢谢转发。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T08:34:38.807

你不能，因为共享库中的代码必须编译，`-fPIC`而静态库中的代码不是。如果你设法做到了，生成的可执行文件最终将与 libc 多次链接，无论如何这将非常脆弱，并且可能迟早会崩溃，所以无论如何你都不应该这样做。所以：

**不要**。动态库必须动态链接系统库，任何链接到任何动态库的可执行文件也必须动态链接系统库。

我还想提醒您，将 GNU libc 与非 GPL 应用程序静态链接是非法的，因为 LGPL 只排除动态链接的代码。这是为了允许在不重新编译源可能不可用的可执行文件的情况下修复库的错误。在 Linux 中，在不重新编译依赖的可执行文件的情况下升级带有错误修复版本的共享库是很常见的；libc 开发人员知道如何做到这一点。

# jakarta-ee - Struts 2 请求映射

> ID：12401350
> 
> 赞同：1
> 
> 时间：2012-09-13T07:22:46.837
> 
> 标签：jakarta-ee, struts2

我是struts的新手，正在学习它。我的问题是 struts 如何将请求参数与动作实例变量映射。例如，我有一个使用用户名和密码的登录表单。现在它向 LoginAction 发送请求。此操作类如何在用户名实例变量中获取用户名，在密码变量中获取密码。在 servlet 中，我们使用`request.getParameter()`方法并将值分配给特定的变量。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T07:39:20.037

在我们使用的 struts2 中`Interceptor`，在这种情况下 struts2 将使用`param`拦截器为您设置参数，您只需配置您的拦截器堆栈（或者您只需使用默认堆栈）。这里是[Interceptor](http://struts.apache.org/2.x/docs/interceptors.html)的链接，如果你对 struts2 很陌生，就使用默认配置来感受一下。

例子：

```
<s:form action="my-action">
  <s:textfield name="myField"/>
  <s:submit/>
</s:form> 
```

和

动作类：

```
public class MyActionClass extends ActionSupport{
  private String myField; // getter and setter
  public String execute() throws Exception{
    return "success";
  }
} 
```

配置：

```
<package name="default" extends="struts-default">
  <action name="my-action" class="MyActionClass">
    <result>success.jsp</result>
  </action>
</package> 
```

在这种情况下`myField`将由拦截器自动设置。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T07:36:39.110

Struts 会为您映射参数。这就是为什么使用框架可以节省您的时间和精力的部分原因，因为您不必手动从`request`.

Struts 通过调用自动将请求参数映射`username`到`username`您的操作类的成员`setUsername`。

另请参阅[struts 教程](http://struts.apache.org/2.3.4.1/docs/processing-forms.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-13T07:36:59.067

Struts2 使用一组[拦截器](http://struts.apache.org/2.x/docs/interceptors.html)为您完成繁重的工作，这意味着在您的 Action 方法执行时，您将获得所有需要的数据来处理。

为了将数据从 JSP 传输到动作类 Struts2 使用拦截器名称[parameters-interceptor](http://struts.apache.org/2.3.4/docs/parameters-interceptor.html)，您只需在动作类中创建与 JSP 字段名称相同的属性，S2 将转换数据并填充字段你。

因此，如果您的 JSP 有两个名称为 say 的字段，`userName`那么`password`您需要在动作类中使用 getter 和 setter 定义这些字段，例如

```
public class MyAction extends ActionSupport{
  private String userName;
  private String password
  //getter ans setter

 public String execute() throws Exception{
  // do what yoou want
 }

} 
```

# javascript - jQuery.noConflict() 与其他库

> ID：12401353
> 
> 赞同：1
> 
> 时间：2012-09-13T07:22:58.490
> 
> 标签：javascript, jquery

我正在使用我的 Jquery 应用程序和其他 javascript 库。当我用谷歌搜索时，我知道 Jquery.noConflict() 是避免与其他库冲突的解决方案。出于测试目的，我在 html 的 head 部分中添加了如下所示的脚本，该脚本运行良好。

```
<script type="text/javascript" src="includes/myJqueryScript.js"></script>
<script type="text/javascript">
    jQuery.noConflict();
</script>

<script type="text/javascript" src="js/jquery-1.2.6.js"></script>
<script type="text/javascript" src="js/mootools-core-1.4.5-full-compat.js"></script>
<script type="text/javascript" src="js/mootools-core-1.4.5-full-nocompat.js"></script>
<script type="text/javascript" src="js/prototype-1.5.js"></script>
<script type="text/javascript" src="js/prototype-1.7.1.0.js"></script> 
```

但在某些情况下，它可能位于其他库的底部，如下所示，这是相互矛盾的。

```
<script type="text/javascript" src="js/jquery-1.2.6.js"></script>
<script type="text/javascript" src="js/mootools-core-1.4.5-full-compat.js"></script>
<script type="text/javascript" src="js/mootools-core-1.4.5-full-nocompat.js"></script>
<script type="text/javascript" src="js/prototype-1.5.js"></script>
<script type="text/javascript" src="js/prototype-1.7.1.0.js"></script>

<script type="text/javascript" src="includes/myJqueryScript.js"></script>
<script type="text/javascript">
    jQuery.noConflict();
</script> 
```

这意味着我的脚本将在调用其他库之前或之后出现。这个问题有什么好的解决办法。如果这不是 Jquery.noConflict() 的语法，请纠正我。

提前致谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-13T07:27:29.807

我通常只是将我所有的 jquery 代码包装在这个：

```
(function($){
  //use jquery $() here
})(jQuery); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T09:29:04.403

经过一番谷歌搜索后，我找到了一个方便的解决方案

[使用多个版本的 jQuery](http://blog.nemikor.com/2009/10/03/using-multiple-versions-of-jquery/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-13T08:37:46.300

如果`myJqueryScript.js`包含您自己的 jQuery 代码，那么您必须`noConflict`在此之前调用，就像`var jQuery = $.noConflict();`现在您必须使用您创建的这个`jQuery`变量一样。但是应该`jquery-1.2.6.js`在您的案例中包含 jquery 之后调用它。但是您也有`prototype and mootools`哪个也使用 $所以你必须得到一个`Dollar safe mode`mootools [http://mootools.net/blog/2009/06/22/the-dollar-safe-mode/](http://mootools.net/blog/2009/06/22/the-dollar-safe-mode/)

# jquery - 如何使用jquery删除textarea中的值

> ID：12401355
> 
> 赞同：1
> 
> 时间：2012-09-13T07:22:58.680
> 
> 标签：jquery, html

嗨，我的 div 表中有一行，如下所示：

```
<div class="tbody plb" id="impemail">
    <div class="tbc1" style="border-right:none;">
        <input class="tblinput sname pvar" type="text">
        <input type="hidden" class="ppre" value="">
    </div>
    <div class="thc2" style=" width: 75%; border-left:1px dotted #CFCFCF;">
        <textarea class="tblinput semails txtInputta pvar" style="font-size:13px;"></textarea>
        <input type="hidden" class="ppre" value="">
        <div class="errmsg emailerr"></div>
    </div>
    <div class="hideRow" style="width:20px;float:right;padding:15px 0px 0px 0px;">
        <img src="../../../images/redcross.png" alt="" />
    </div>
</div> 
```

当我使用jQuery函数单击类“hideRow”时，我尝试编写删除该行的函数，如下所示，这里我想在hideRow函数运行时清除输入和textarea字段，以便在刷新页面后值不应该在行中。我试过的jQuery函数如下：

```
 $(function () {
     // Delete row from PTC grid 
     $('.hideRow').live("click", function () {
         $(this).parents('.plb').hide("slow", function () {
             $(this).parents('.tblinput sname pvar').val('');
             $(this).parents('.tblinput semails txtInputta pvar').val('');
         });
     })
 }); 
```

任何人请告诉我如何清除这两个字段，以便在页面重新加载后这些值不应该存在。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-13T07:24:46.087

更改您的选择器，如下所示：

```
$(this).parents('.tblinput.sname.pvar').val('');
$(this).parents('.tblinput.semails.txtInputta.pvar').val(''); 
```

对于一个元素的多个`class`es，您需要`class`使用不带任何空格的方式连接这些名称`dot(.)`，以便在它们之间创建一个选择器，如上所示。

* * *

## 你的选择器在做什么

您的选择器`.tblinput sname pvar`是***[`descendant selector`](http://api.jquery.com/descendant-selector/)***格式。这意味着它在一个内部搜索 和`pvar`第二`sname`个搜索相同。`sname``tblinput`

* * *

***相关参考：***

*   ***[jQuery 选择器](http://api.jquery.com/category/selectors/)***

* * *

## 根据评论

```
$(function () {
     // Delete row from PTC grid 
     $('.hideRow').live("click", function () {
         $(this).closest('.plb').hide("slow", function () {
           $(this).find('.tblinput.sname.pvar, .tblinput.semails.txtInputta.pvar').val('');
         });
     })
 }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T07:40:57.707

您的主要问题是，在 for 的回调中`.hide()`， 的值是`this`指被隐藏的元素；正确的遍历技术`.find()`如`$(this).find('.tblinput.sname.pvar').val('');`.

**Javascript**

```
 $(function () {
     // Delete row from PTC grid

     // .live() is deprecated, port to .on()
     $('.hideRow').live("click", function () {

         //use .closest() instead of .parents() - less traversing
         $(this).closest('.plb').hide("slow", function () {

             // search down, not up - and no space between class selectors
             $(this).find('.tblinput.sname.pvar').val('');
             $(this).find('.tblinput.semails.txtInputta.pvar').val('');
         });
     })
 }); 
```

# php - 为什么要在长轮询中使用 session_write_close？

> ID：12401358
> 
> 赞同：8
> 
> 时间：2012-09-13T07:23:08.550
> 
> 标签：php, session, long-polling

我正在阅读一篇关于[Nolithius](http://www.nolithius.com/game-development/comet-long-polling-with-php-and-jquery)的长投票的文章。在**PHP sleeps across the entire session**部分下，写到`session_write_close`应该调用该函数以防止整个会话陷入死锁。这里的死锁到底是什么意思？这是否意味着如果没有此功能，在客户端打开的同一域中的任何其他页面将无法从其他脚本（如此脚本）接收 AJAX 数据，直到该脚本完成执行并返回结果？为什么会发生这种情况？在这里如何`session_write_close`提供帮助？在他收到来自该请求的数据后，下次他从该域请求页面时，不会使用它从客户端删除所有个性化吗？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-09-13T07:30:22.737

这是我的理解：

当使用基于文件的会话时，每个请求都会从字面上锁定文件，直到请求结束。

这意味着下一个请求（也使用会话数据）必须等待锁被释放。

这用于避免会话数据损坏。

使用`session_write_close()`将清理（但不会丢失任何会话数据）并提前释放文件上的锁定，从而允许其他请求继续。

这是一种很好的做法，尤其是如果您的脚本可能会经常休眠。

# sql - 获取不同年份中按日/月的最早日期

> ID：12401359
> 
> 赞同：1
> 
> 时间：2012-09-13T07:23:11.563
> 
> 标签：sql, oracle, function, date, monthcalendar

我有一个日期列表：

活动日期

```
- 06/04/1998
- 12/08/1980
- 29/11/2010
- 16/06/2002
- 20/10/2007
- 10/07/2000 
```

我想按天/月获得这些年来最早的事件日期。所以最早的是 06/04/1998，如果我想获得最新的活动日期，它是 29/11/2010。我如何为此编写语法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T07:29:44.837

```
SELECT MAX(date), MIN(date), YEAR(date) year, MONTH(date) month
FROM table
GROUP BY YEAR(date), MONTH(date) 
```

注意：这是伪代码 - 您需要在 oracle 中查找正确的函数来从日期中提取年份和月份。

您还将受益于以下功能索引：`YEAR(date), MONTH(date), date`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-13T08:26:01.830

```
SELECT EXTRACT( MONTH FROM date_column),
       EXTRACT( DAY   FROM date_column),
       EXTRACT( YEAR  FROM date_column),
       date_column
  FROM table
 ORDER BY 1, 2, 3 
```

并选择第一条记录

```
SELECT *
  FROM (SELECT EXTRACT( MONTH FROM date_column),
               EXTRACT( DAY   FROM date_column),
               EXTRACT( YEAR  FROM date_column),
               date_column
          FROM table
         ORDER BY 1, 2, 3)
 WHERE rownum <= 1 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-13T08:25:36.987

假设我了解您确实想要任何一年中按日/月计算的最早日期，那么[分析函数](http://docs.oracle.com/cd/E11882_01/server.112/e26088/functions004.htm)可以做到这一点：

```
select dt from (
    select dt,
        dense_rank() over (partition by 1 order by to_char(dt, 'MMDD'),
            to_char(dt, 'YYYY')) rn
    from t
)
where rn = 1;

DT
----------
06/04/1998 
```

`select`这里的内部[`dense_rank()`](http://docs.oracle.com/cd/E11882_01/server.112/e26088/functions052.htm)用于根据我指定的顺序为每个日期分配排名 - 还有其他方法可以做到这一点，但将日/月转换为字符串似乎可行，如果你包括了打破平局的年份在一年多的时间里有同一天/同一个月（在这种情况下，你会想要最早的一年）。就其本身而言，添加了一些额外的日期，看起来像这样：

```
alter session set nls_date_format = 'DD/MM/YYYY';
with t as (
    select to_date('06/04/1998') as dt from dual
    union all select to_date('12/08/1980') from dual
    union all select to_date('29/11/2010') from dual
    union all select to_date('16/06/2002') from dual
    union all select to_date('20/10/2007') from dual
    union all select to_date('10/07/2000') from dual
    union all select to_date('10/07/1999') from dual
    union all select to_date('06/04/1999') from dual
)
select dt,
    dense_rank() over (partition by 1 order by to_char(dt, 'MMDD'),
        to_char(dt, 'YYYY')) rn
from t;

DT         RN
---------- ----------
06/04/1998      1
06/04/1999      2
16/06/2002      3
10/07/1999      4
10/07/2000      5
12/08/1980      6
20/10/2007      7
29/11/2010      8

8 rows selected. 
```

外部选择只选择`dt`具有 rank 的值`rn = 1`。

如果您想查找最新的，请将`order by`子句更改为包含`desc`，以便它们以相反的顺序排序。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-13T07:30:16.973

以下怎么样：

从...中选择日期，其中 rownum = 1 按月（日期）* 100 + 日（日期）顺序排列

从...中选择日期，其中 rownum = 1 order by month(date) * 100 + day(date) asc

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-13T07:30:40.900

如果该列表已经在表中。

只需选择 Max(fieldName) 或 Min(fieldName)

# c - 循环展开（按位运算）

> ID：12401362
> 
> 赞同：6
> 
> 时间：2012-09-13T07:23:21.733
> 
> 标签：c, linux-kernel, bit-manipulation, loop-unrolling

我正在编写一个 Linux 内核驱动程序（*用于 ARM*），并且在一个 irq 处理程序中我需要检查中断位。

```
bit
 0/16  End point 0 In/Out interrupt
       (very likely, while In is more likely)
 1/17  End point 1 In/Out interrupt
 ...
15/31  End point 15 In/Out interrupt 
```

请注意，一次可以设置多个位。

所以这是代码：

```
int i;
u32 intr = read_interrupt_register();

/* ep0 IN */
if(likely(intr & (1 << 0))){
    handle_ep0_in();
}

/* ep0 OUT */
if(likely(intr & (1 << 16))){
    handle_ep0_out();
}

for(i=1;i<16;++i){
    if(unlikely(intr & (1 << i))){
        handle_ep_in(i);
    }
    if(unlikely(intr & (1 << (i + 16)))){
        handle_ep_out(i);
    }
} 
```

`(1 << 0)`并且`(1 << 16)`会在编译时计算，但是`(1 << i)`不会`(1 << (i + 16))`。循环中也会有积分比较和加法。

因为它是一个 irq 处理程序，所以应该在最短的时间内完成工作。这让我想我是否需要对其进行一些优化。

## 可能的方法？

**1.**拆分循环，好像没什么区别...

```
/* ep0 IN */
if(likely(intr & (1 << 0))){
    handle_ep0_in();
}

/* ep0 OUT */
if(likely(intr & (1 << 16))){
    handle_ep0_out();
}

for(i=1;i<16;++i){
    if(unlikely(intr & (1 << i))){
        handle_ep_in(i);
    }
}
for(i=17;i<32;++i){
    if(unlikely(intr & (1 << i))){
        handle_ep_out(i - 16);
    }
} 
```

**2.**移位`intr`而不是要比较的值？

```
/* ep0 IN */
if(likely(intr & (1 << 0))){
    handle_ep0_in();
}

/* ep0 OUT */
if(likely(intr & (1 << 16))){
    handle_ep0_out();
}

for(i=1;i<16;++i){
    intr >>= 1;
    if(unlikely(intr & 1)){
        handle_ep_in(i);
    }
}
intr >>= 1;
for(i=1;i<16;++i){
    intr >>= 1;
    if(unlikely(intr & 1)){
        handle_ep_out(i);
    }
} 
```

**3.**完全展开循环（未显示）。这会使代码有点混乱。

**4.**还有其他更好的方法吗？

**5.**还是编译器实际上会生成最优化的方式？

* * *

编辑：我正在寻找一种方法来告诉 gcc 编译器展开该特定循环，但根据我的搜索似乎不可能......

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-13T07:43:30.720

如果我们可以假设 intr 中设置的位数很少（通常在中断掩码中就是这种情况），我们可以稍微优化一下并编写一个循环，每个位只执行一次：

```
void handle (int intr)
{
  while (intr)
  {
    // find index of lowest bit set in intr:
    int bit_id = __builtin_ffs(intr)-1;

    // call handler:
    if (bit_id > 16)
      handle_ep_out (bit_id-16);
    else
      handle_ep_in (bit_id);

    // clear that bit
    // (I think there was a bit-hack out there to simplify this step even further)
    intr -= (1<<bit_id);
  }
} 
```

在大多数 ARM 架构上，__builtin_ffs 将编译为 CLZ 指令和一些围绕它的算术。除了 ARM7 和更早的内核之外，它应该对任何东西都这样做。

另外：在嵌入式设备上编写中断处理程序时，函数的大小也会对性能产生影响，因为指令必须加载到代码缓存中。精益代码通常执行得更快。如果您将内存访问保存到不太可能在缓存中的内存，那么一点开销是可以的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T07:30:48.933

我自己可能会选择选项 5。代码的可读性，让 gcc 的疯狂优化级别`-O3`尽其所能。

我见过在那个级别生成的代码，我什至无法理解。

C 中的任何手工优化（除了可能展开和使用常量而不是运行时位移，一个 la 选项 3）不太可能超过编译器本身可以做的事情。

我想你会发现展开可能没有你想象的那么混乱：

```
if (  likely(intr & 0x00000001)) handle_ep0_in();
if (  likely(intr & 0x00010000)) handle_ep0_out();

if (unlikely(intr & 0x00000002)) handle_ep_in(1);
if (unlikely(intr & 0x00020000)) handle_ep_out(1);

:

if (unlikely(intr & 0x00008000)) handle_ep_in(15);
if (unlikely(intr & 0x80000000)) handle_ep_out(15); 
```

实际上，您可以使用宏使其变得*不那么*混乱（未经测试，但您应该了解总体思路）：

```
// Since mask is a constant, "mask << 32" should be too.

# define chkintr (mask, num) \
    if (unlikely(intr & (mask      ))) handle_ep_in  (num); \
    if (unlikely(intr & (mask << 32))) handle_ep_out (num);

// Special case for high probability bit.

if (likely(intr & 0x00000001UL)) handle_ep0_in();
if (likely(intr & 0x00010000UL)) handle_ep0_out();

chkintr (0x0002UL,  1);  chkintr (0x0004UL,  2);  chkintr (0x0008UL,  3);
chkintr (0x0010UL,  4);  chkintr (0x0020UL,  5);  chkintr (0x0040UL,  6);
chkintr (0x0080UL,  7);  chkintr (0x0100UL,  8);  chkintr (0x0200UL,  9);
chkintr (0x0400UL, 10);  chkintr (0x0800UL, 11);  chkintr (0x1000UL, 12);
chkintr (0x2000UL, 13);  chkintr (0x4000UL, 14);  chkintr (0x8000UL, 15); 
```

唯一的进步是手工编码汇编语言，而且 gcc*仍然*很有可能超越你:-)

# apache-flex - 如何访问 AdvancedDataGrid 组合框值

> ID：12401368
> 
> 赞同：0
> 
> 时间：2012-09-13T07:23:51.657
> 
> 标签：apache-flex, combobox, advanceddatagrid

我尝试访问 AdvancedDataGrid - AdvancedDataGridColumn 的值？它的 ComboBox 和我使用此代码访问：

```
'"+ myGrid_olculer.dataProvider[k].data + "' 
```

那么结果是：

```
INSERT INTO [INN_T_OPTSIPARIS]  ( GAIN) values (' [object Object]'  ) 
```

对于组合框，我使用这个：

```
<mx:AdvancedDataGridColumn headerText="GAIN"    dataField="GAIN"    editable="true"   rendererIsEditor="true" editorDataField="data">
<mx:itemRenderer>
<mx:Component>
<mx:ComboBox creationComplete="GAIN_init()">
<mx:Script>
<![CDATA[
private var _data:Object;
[Bindable]
override public function set data(o:Object):void {
_data = o;
if(Number(o.GAIN) <= 0) {
  this.selectedIndex = 0;}
else {this.selectedIndex = Number(o.GAIN);}
}
override public function get data():Object {return _data;}
private function GAIN_init():void {
                                            this.dataProvider = ["Evet", "Hayır"];
                                            this.addEventListener(MouseEvent.CLICK, update);}
private function update(event:MouseEvent):void {if(this.selectedIndex == 0) _data.GAIN = "-1";                                                 else _data.GAIN = this.selectedIndex.toString();}
]]>
</mx:Script>
</mx:ComboBox>
</mx:Component>
</mx:itemRenderer>
</mx:AdvancedDataGridColumn> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T06:02:17.443

将 chnage 事件放在组合框上并将新的选定值设置为

data.GAIN=combox.selectedLabel

现在您可以访问的最新值

data.GAIN 或 dataprovider Oject.root tag[rowindex].GAIN

# ios - 如何在 iPhone 中以编程方式获取 IMSI 号码

> ID：12401369
> 
> 赞同：2
> 
> 时间：2012-09-13T07:23:57.033
> 
> 标签：ios, iphone, phone-number, imei

我正在尝试通过编程获取 iPhone 中的 IMSI 号码。谁能告诉我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2019-01-16T02:22:44.960

很惊讶这个问题仍然没有答案。没有办法在 iOS 上获取 IMSI。由于安全原因，Apple 不允许这样做。

而且IMSI不同于IMEI。IMSI 是 SIM 卡的标识符，IMEI 是手机的标识符。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T08:00:37.753

供您参考..您可以使用私有框架获取 IMEI -[请参阅此问题](https://stackoverflow.com/questions/823181/how-to-get-imei-on-iphone)，但您的应用可能会被应用商店拒绝。

如果您想获得一些设备标识符以在您的应用程序中使用，您必须使用 UIDevice 类中定义的 uniqueIdentifier 属性——它正是为了这个目的而存在的。

```
NSString* uniqueID = [UIDevice currentDevice].uniqueIdentifier; 
```

唯一设备标识符是由各种硬件标识符（例如设备的序列号）组成的哈希值。它保证对每台设备都是唯一的，但不能公开绑定到用户帐户。例如，您可以使用它在中央服务器中存储游戏的高分或控制对注册产品的访问。唯一设备标识符有时通过其缩写 UDID 来表示。

# windows-phone-7 - 如何为列表框中的选定项目添加复选标记

> ID：12401371
> 
> 赞同：0
> 
> 时间：2012-09-13T07:24:04.570
> 
> 标签：windows-phone-7

我是 Windows Phone 7 的新手，我有一个疑问：如何在动态创建的列表框中为所选项目添加复选标记。如果用户单击列表框中的另一个项目，复选标记将其位置移动到所选项目。怎么做？我的代码如下所示： XAML 代码：

```
<ListBox Height="669" HorizontalAlignment="Left" Name="listBox1" VerticalAlignment="Top" Width="479" Margin="1,-3.5,0,0" SelectionChanged="listBox1_SelectionChanged" Background="White">
            <ListBox.ItemTemplate>
                <DataTemplate >
                    <Border BorderThickness="0,0,0,1.2" BorderBrush="Black" Width="480" >
                    <StackPanel Background="White" Name="stackpanel1" Width="480" Orientation="Horizontal">
                        <TextBlock Text="{Binding name}"  Height="62" Width="390" FontSize="40" FontFamily="Arial" Foreground="Black" TextAlignment="Left" VerticalAlignment="Center" />
                    </StackPanel>
                    </Border>
                </DataTemplate>
            </ListBox.ItemTemplate>
        </ListBox> 
```

CS代码：

```
 public class list
    {
        public string name { get; set; }

    }

foreach (string s in array)
                {
                    list obj = new list();
                    obj.name = s;
                    listBox1.Items.Add(obj);
                } 
```

请用一些代码指导我。谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-13T08:11:16.983

一个纯粹基于 XAML 的解决方案是这样的：

您的特定于应用程序的代码将是这样的：

```
<ListBox ItemsSource="{Binding}">
    <ListBox.ItemTemplate>
        <DataTemplate>
            <TextBlock Text="{Binding}"/>
        </DataTemplate>
    </ListBox.ItemTemplate>
</ListBox> 
```

并且您的列表框的样式将采用 XAML 术语（复制粘贴并将下面的“someIcon.png”更改为您要使用的图标的名称）：

```
<phone:PhoneApplicationPage.Resources>
    <Style TargetType="ListBoxItem">
        <Setter Property="Background" Value="Transparent"/>
        <Setter Property="BorderThickness" Value="0"/>
        <Setter Property="BorderBrush" Value="Transparent"/>
        <Setter Property="Padding" Value="0"/>
        <Setter Property="HorizontalContentAlignment" Value="Left"/>
        <Setter Property="VerticalContentAlignment" Value="Top"/>
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="ListBoxItem">
                    <Border x:Name="LayoutRoot" BorderBrush="{TemplateBinding BorderBrush}" BorderThickness="{TemplateBinding BorderThickness}" Background="{TemplateBinding Background}" HorizontalAlignment="{TemplateBinding HorizontalAlignment}" VerticalAlignment="{TemplateBinding VerticalAlignment}">
                        <VisualStateManager.VisualStateGroups>
                            <VisualStateGroup x:Name="CommonStates">
                                <VisualState x:Name="Normal"/>
                                <VisualState x:Name="MouseOver"/>
                                <VisualState x:Name="Disabled">
                                    <Storyboard>
                                        <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="Background" Storyboard.TargetName="LayoutRoot">
                                            <DiscreteObjectKeyFrame KeyTime="0" Value="{StaticResource TransparentBrush}"/>
                                        </ObjectAnimationUsingKeyFrames>
                                        <DoubleAnimation Duration="0" To=".5" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="ContentContainer"/>
                                    </Storyboard>
                                </VisualState>
                            </VisualStateGroup>
                            <VisualStateGroup x:Name="SelectionStates">
                                <VisualState x:Name="Unselected"/>
                                <VisualState x:Name="Selected">
                                    <Storyboard>
                                        <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="Foreground" Storyboard.TargetName="ContentContainer">
                                            <DiscreteObjectKeyFrame KeyTime="0" Value="Green"/>
                                        </ObjectAnimationUsingKeyFrames>
                                        <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="(UIElement.Visibility)" Storyboard.TargetName="SelectionIcon">
                                            <DiscreteObjectKeyFrame KeyTime="0">
                                                <DiscreteObjectKeyFrame.Value>
                                                    <Visibility>Visible</Visibility>
                                                </DiscreteObjectKeyFrame.Value>
                                            </DiscreteObjectKeyFrame>
                                        </ObjectAnimationUsingKeyFrames>
                                    </Storyboard>
                                </VisualState>
                            </VisualStateGroup>
                        </VisualStateManager.VisualStateGroups>
                    <StackPanel Orientation="Horizontal">
                        <Border Width="80" Height="80">
                            <Image Name="SelectionIcon" Source="someIcon.png" Visibility="Collapsed"/>
                        </Border>
                        <ContentControl x:Name="ContentContainer" ContentTemplate="{TemplateBinding ContentTemplate}" Content="{TemplateBinding Content}" Foreground="{TemplateBinding Foreground}" HorizontalContentAlignment="{TemplateBinding HorizontalContentAlignment}" Margin="{TemplateBinding Padding}" VerticalContentAlignment="{TemplateBinding VerticalContentAlignment}"/>
                    </StackPanel>
                    </Border>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>
</phone:PhoneApplicationPage.Resources> 
```

*更新1：*

添加一张图片来说明我对下面构建操作的评论。

![在此处输入图像描述](../Images/cc7d3e86cd392638a4f5c669522f80d0.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T07:46:07.487

为您的数据模板创建用户控件。在您的用户控件中添加一个检查图像或荧光笔，并在用户点击相应项目时切换其可见性。这也是我所做的。我希望它有所帮助。

如下所示：

`User control`

```
 <Border BorderThickness="0,0,0,1.2" BorderBrush="Black" Width="480" >
                <StackPanel Background="White" Name="stackpanel1" Width="480" Orientation="Horizontal">
                    <Image x:Name="checkImg" Source="check" Visibility="Collapsed">
                    <TextBlock Text="{Binding name}"  Height="62" Width="390" FontSize="40" FontFamily="Arial" Foreground="Black" TextAlignment="Left" VerticalAlignment="Center" />
                </StackPanel>
                </Border> 
```

现在`listbox`：

```
 <ListBox Height="669" HorizontalAlignment="Left" Name="listBox1" VerticalAlignment="Top" Width="479" Margin="1,-3.5,0,0" SelectionChanged="listBox1_SelectionChanged" Background="White">
        <ListBox.ItemTemplate>
            <DataTemplate >
                <user:control></user:control>
            </DataTemplate>
        </ListBox.ItemTemplate>
    </ListBox> 
```

在您的`selectionchaged`事件中，将项目提取为`ListBoxItem`并切换其可见性。

存储所选项目的旧项目，当您选择另一个项目时，将旧项目的可见性设置为假，新项目设置为真。

# android - 每当打开应用程序时强制关闭？

> ID：12401374
> 
> 赞同：-1
> 
> 时间：2012-09-13T07:24:08.410
> 
> 标签：android, forceclose

应用程序从过去 2-3 小时开始后台运行，并且无论何时从后台打开应用程序。它显示`NullPointerException`错误。

在我的应用程序中，我使用了一些类变量来存储数据。2-3 小时后应用程序没有得到任何数据。这就是它显示强制关闭错误的原因。

谁能告诉，如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T07:27:55.473

您可以使用异常处理机制。像这样。将易受攻击的代码放在 try 块中，如果它无法获取任何数据`NullPointerException`，`catch block`那么您可以通知用户出了什么问题。

```
try
{
   //yourcode
}catch(NullPointerException e1)
{
   //Catch block
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T07:31:36.147

据我所知，对于应用程序在后台运行的时间，系统可以根据需要释放内存（包括您的变量）。您可以验证变量是否为空，如果是，请再次赋值。

像这样，在你使用变量的内容之前：

```
if (config == null)
  loadConfig(); 
```

# c# - 交替两种形式一段时间

> ID：12401378
> 
> 赞同：1
> 
> 时间：2012-09-13T07:24:27.803
> 
> 标签：c#, winforms, visual-studio-2010, c++-cli

假设我有两种形式`Form1`和`Form2`. 我需要显示`Form1`一段时间（比如 5 分钟），然后隐藏它并再显示`Form2`5 分钟，然后隐藏`Form2`然后显示`Form1`，依此类推......

如何在 C++/CLI 或 C# 中做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T07:27:05.350

使用[Timer 控件](http://msdn.microsoft.com/en-us/library/system.timers.timer%28v=vs.71%29.aspx)。它使您能够设置执行间隔，在本例中为 5 分钟。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T08:04:57.317

在我的脑海中，我可能会做这样的事情（提供 C# 示例）

```
 using System;
  using System.Timers;
  using System.Windows.Forms;

  public class SwitchForms : IDisposable
  {
    private Form Form1 { get; set; }

    private Form Form2 { get; set; }

    private System.Timers.Timer VisibilityTimer { get; set; }

    public SwitchForms(Form form1, Form form2, double hideMinutes)
    {
        Form1 = form1;
        Form2 = form2;

        VisibilityTimer = new System.Timers.Timer(hideMinutes * 60.0 * 1000.0);
        VisibilityTimer.Elapsed += VisibilityTimer_Elapsed;
        VisibilityTimer.Enabled = true;

        //Could also consider subscribing to the close events of both forms here to disable the Timer

        Form1.Invoke(new MethodInvoker(() => Form1.Show()));
        Form2.Invoke(new MethodInvoker(() => Form2.Hide()));

    }

    private void VisibilityTimer_Elapsed(object source, ElapsedEventArgs e)
    {
      if(Form1 == null || Form2 == null)
      {
        VisibilityTimer.Enabled = false;
        return;
      }

      if (Form1.IsDisposed || Form2.IsDisposed)
      {
        VisibilityTimer.Enabled = false;
        Form1 = null;
        Form2 = null;
      }
      else
      {
        Form1.Invoke(new MethodInvoker(() => { if(Form1.Visible) { Form1.Hide(); } else {Form1.Show();} }));
        Form2.Invoke(new MethodInvoker(() => { if (Form2.Visible) { Form2.Hide(); } else { Form2.Show(); } }));
      }
    }

    public void Dispose()
    {
      VisibilityTimer.Enabled = false;
      VisibilityTimer.Dispose();
    }

  }

} 
```

在使用中，当你创建Form1和Form2时，你可以在Form1/Form2的其中一个字段中持有对this的引用，当你关闭Form1/Form2时，只需dispose即可。

例如：

```
 public partial class Form1 : Form
  {
    private Form OtherForm { get; set; }

    private SwitchForms FormSwitcher { get; set; }

    public Form1()
    {
      InitializeComponent();

    }

    private void Form1_Load(object sender, EventArgs e)
    {
      OtherForm = new Form();
      OtherForm.Text = "Other Form";
      OtherForm.Show();
      OtherForm.Closed += OtherForm_Closed;
      FormSwitcher = new SwitchForms(this, OtherForm, 5.0);
    }

    void OtherForm_Closed(object sender, EventArgs e)
    {
      Show();
      //Application.Exit(); //Could also consider closing the app if the other window is closed
    }

  } 
```

有几点需要注意：

1.  **Form.Invoke**的使用 由于计时器本质上是在单独的线程中运行，因此使用表单的 Invoke 方法很重要，否则您将获得跨线程异常。

2.  **潜在** 的竞争条件 如果时间间隔非常小，则经过的事件可能会触发多次。尽管从用户体验的角度来看这将是一件愚蠢的事情，但关键问题是如果在 Form2 关闭后快速连续调用 Timer_Elapsed 事件 - 可能会获得空引用异常。如果应用程序在调用 Timer_Elapsed 事件时关闭，则可能会发生同样的情况 - 最好的办法是处理 SwitchForms 类（或添加一个 Stop 方法），以便您可以在应用程序关闭之前摆脱计时器。

例如，我还可以将 SwitchForms 放在我的启动类中，尽管我必须格外小心，然后检查 Form1 和 Form2 是否已经被处理等等。

为简单起见，您还可以将 SwitchForms 的代码嵌入到 Form1 或 Form2 中。您还需要考虑如果 Form1 或 Form2 独立关闭会发生什么，否则定时事件将引发异常。

在我的示例中，如果 Form2 关闭，我只是重新显示 Form1，如果 Form1 关闭，则应用程序退出。

# iphone - Google AdMob 未在 iphone sdk 中显示广告

> ID：12401380
> 
> 赞同：0
> 
> 时间：2012-09-13T07:24:34.103
> 
> 标签：iphone, ios, admob

我用过这段代码。

```
- (void)viewDidLoad {
[super viewDidLoad];

CGPoint origin = CGPointMake(0,0);

 self.adBanner = [[[GADBannerView alloc] initWithAdSize:kGADAdSizeBanner
                                              origin:origin]
                autorelease];

NSLog(@"%lf %lf ",self.adBanner.center.x, self.adBanner.center.y);

self.adBanner.adUnitID = kSampleAdUnitID;
self.adBanner.delegate = self;
[self.adBanner setRootViewController:self];
[self.view addSubview:self.adBanner];
[self.adBanner loadRequest:[self createRequest]];
}
- (GADRequest *)createRequest {
GADRequest *request = [GADRequest request];

// Make the request for a test ad.
request.testing = YES;

return request;
}

#pragma mark GADBannerViewDelegate impl

// We've received an ad successfully.
- (void)adViewDidReceiveAd:(GADBannerView *)adView {
 NSLog(@"Received ad successfully");
}

- (void)adView:(GADBannerView *)view
didFailToReceiveAdWithError:(GADRequestError *)error {
NSLog(@"Failed to receive ad with error: %@", [error localizedFailureReason]);
} 
```

这段代码没有给出任何错误。也没有运行/显示广告。该怎么办？我在代码中犯了任何错误吗？我也设置了 adUnitID。我没有得到我的错误。请任何人都可以帮助我吗？先感谢您。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T07:56:13.823

你可以试试这个

```
 // Initialize the banner at the bottom of the screen.
CGPoint origin = CGPointMake(0.0,
                             self.view.frame.size.height -
                             CGSizeFromGADAdSize(kGADAdSizeBanner).height);

// Use predefined GADAdSize constants to define the GADBannerView.
self.adBanner = [[[GADBannerView alloc] initWithAdSize:kGADAdSizeBanner
                                                origin:origin]
                 autorelease];
self.adBanner.frame=CGRectMake(0, 0, 320,50); 
```

# tcl - 在已删除表上调用 tcl_findhashentry

> ID：12401385
> 
> 赞同：8
> 
> 时间：2012-09-13T07:24:43.393
> 
> 标签：tcl

我有一个 tcl 脚本，它实际上是一个安装脚本，当我运行它时，它似乎工作正常，直到出现此错误为止：

```
在已删除表上调用 Tcl_FindHashEntry

此应用程序已请求运行时以不寻常的方式终止它。
请联系应用程序的支持团队以获取更多信息。

```

我做了一些谷歌研究，但没有发现任何有用的东西。

# magento - Magento如何仅在一个类别中显示缺货，而为所有其他类别隐藏它们？

> ID：12401389
> 
> 赞同：1
> 
> 时间：2012-09-13T07:25:00.843
> 
> 标签：magento

我试图显示特定类别中产品**的缺货**状态，同时完全隐藏所有其他类别的状态。

目前，我已禁用从库存中显示库存状态。因此，任何缺货的商品都会自动隐藏。

现在状态：

1.  所有库存变为 0 的产品都将自动隐藏。
2.  当产品在库存中时，它仍然不**显示**其状态。
3.  所有产品都是**可配置**产品。

我想要的是：

1.  已创建新类别并向其中添加产品。此类别仅添加**简单产品**
2.  即使库存为 0，我也想继续展示此产品
3.  我想将状态显示为**缺货**
4.  我希望该产品**不能**添加到购物车中。（这应该自动成为可能，因为产品将缺货。

可能的前进方向：

如我所见，我应该启用从库存中显示库存状态。通过这样做，库存变为 0 后产品仍然可见....**但这**将涵盖**所有类别**..我只希望对 1 个类别执行此操作???

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T08:48:24.673

试试这个解决方案。这可能会给你更好的主意。

```
<?php
if ($cat_id = '12')
{
    $collections = Mage::getModel('catalog/product')
    ->getCollection()
    ->joinField(
        'qty',
        'cataloginventory/stock_item',
        'qty',
        'product_id=entity_id',
        '{{table}}.stock_id=1',
        'left'
    )
    ->addAttributeToFilter('qty', array('eq' => 0));

    foreach ($collections as $collection) {
    echo $collection->getData()->getName();
    }
}
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T10:58:34.547

一种简单的方法是使用 Magento 为每个类别定制布局的能力。

1）设置商店以展示产品，即使缺货

2）创建一个新主题，它将覆盖您正在使用的基础 - 它只需要包含目录/产品/list.phtml的副本

3) 修改原主题的 list.phtml 只显示项目：

```
<?php foreach ($_productCollection as $_product): ?>
    <?php if( ! $_product->isInStock()) continue ?>
... 
```

现在您将有两个主题，您正在使用的基本主题，然后是一个新的覆盖主题，其中只有一个文件。

现在将新主题应用于您希望显示缺货商品的类别，默认情况下，原始主题的列表视图将跳过缺货产品。

使用块覆盖可以做得更好，我很乐意解释 - 但这是我能想到的最简单的解决方案:-)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-04T22:08:54.143

这是基于安德鲁的回答。但是， isInStock() 似乎总是返回 true。所以我用 isSaleable() 替换它，如下所示：

```
<?php foreach ($_productCollection as $_product): ?>
   <?php if( ! $_product->isSaleable()) continue ?>
... 
```

但是，答案并不是最好的，因为您仍会将产品计入显示的项目总数中。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-01-12T17:17:50.553

如果猫等于给定数字，我已经修改了 list.phtml 以生成查询。使用查询构建网格/列表

```
<?php
$_layer = Mage::getSingleton('catalog/layer');
$_category = $_layer->getCurrentCategory();
$_currentCategoryId= $_category->getId();
if($_currentCategoryId == 11):
?>
<div class="category-products">
    <?php  $stockCollection = Mage::getModel('cataloginventory/stock_item')->getCollection()
        ->addFieldToFilter('is_in_stock', 0);

    $productIds = array();

    foreach ($stockCollection as $item) {
        $productIds[] = $item->getOrigData('product_id');
    }
    $categoryId = 11;
    $category = Mage::getModel('catalog/category')->load($categoryId);
    $productCollection = Mage::getModel('catalog/product')->getCollection()
        ->addIdFilter($productIds)
        ->addCategoryFilter($category)
        ->addAttributeToSelect('*')
        ->addAttributeToSort('created_at', 'desc');

    $products = array();?>

 <div class="category-products">
    <?php echo $this->getToolbarHtml() ?>
    <?php // List mode ?>
    <?php if($this->getMode()!='grid'): ?>
    <?php $_iterator = 0; ?>
    <ol class="products-list" id="products-list">
    <?php foreach ($productCollection as $_product): ?>
        <li class="item<?php if( ++$_iterator == sizeof($productCollection) ): ?> last<?php endif; ?>">
            <?php // Product Image ?>
            <p class="product-image">
                <a href="<?php echo $this->getUrl('ajax/product/quickview/id/' . $_product->getId()) ?>" rel="nofollow" title="<?php echo $this->htmlEscape($_product->getName()) ?>" class="ajax"><?php echo $this->__('Quick view') ?></a>
                <a href="<?php echo $_product->getProductUrl() ?>" title="<?php echo $this->stripTags($this->getImageLabel($_product, 'small_image'), null, true) ?>" class="product-image"><img src="<?php echo $this->helper('catalog/image')->init($_product, 'small_image')->resize(135); ?>" width="135" height="135" alt="<?php echo $this->stripTags($this->getImageLabel($_product, 'small_image'), null, true) ?>" /></a>                
            </p>
            <?php // Product description ?>
            <div class="product-shop">
                <div class="f-fix">
                    <?php $_productNameStripped = $this->stripTags($_product->getName(), null, true); ?>
                    <h2 class="product-name"><a href="<?php echo $_product->getProductUrl() ?>" title="<?php echo $_productNameStripped; ?>"><?php echo $_helper->productAttribute($_product, $_product->getName() , 'name'); ?></a></h2>
                    <?php if($_product->getRatingSummary()): ?>
                    <?php echo $this->getReviewsSummaryHtml($_product) ?>
                    <?php endif; ?>
                    <?php echo $this->getPriceHtml($_product, true) ?>
                    <?php if($_product->isSaleable()): ?>
                        <p><button type="button" title="<?php echo $this->__('Add to Cart') ?>" class="button btn-cart" onclick="setLocation('<?php echo $this->getAddToCartUrl($_product) ?>')"><span><span><?php echo $this->__('Add to Cart') ?></span></span></button></p>
                    <?php else: ?>
                        <p class="availability out-of-stock"><span><?php echo $this->__('Out of stock') ?></span></p>
                    <?php endif; ?>
                    <div class="clear"></div>
                    <div class="desc std">
                        <?php echo $_helper->productAttribute($_product, $_product->getShortDescription(), 'short_description') ?>
                        <a href="<?php echo $_product->getProductUrl() ?>" title="<?php echo $_productNameStripped ?>" class="link-learn"><?php echo $this->__('Learn More') ?></a>
                    </div>
                    <ul class="add-to-links">
                        <?php if ($this->helper('wishlist')->isAllow()) : ?>
                            <li><a href="<?php echo $this->helper('wishlist')->getAddUrl($_product) ?>" class="link-wishlist"><?php echo $this->__('Add to Wishlist') ?></a></li>
                        <?php endif; ?>
                        <?php if($_compareUrl=$this->getAddToCompareUrl($_product)): ?>
                            <li><span class="separator">|</span> <a href="<?php echo $_compareUrl ?>" class="link-compare"><?php echo $this->__('Add to Compare') ?></a></li>
                        <?php endif; ?>
                    </ul>
                </div>
            </div>
        </li>
    <?php endforeach; ?>
    </ol>
    <script type="text/javascript">decorateList('products-list', 'none-recursive')</script>

    <?php else: ?>

    <?php // Grid Mode ?>

    <?php $_collectionSize = $productCollection->count() ?>
    <?php $_columnCount = $this->getColumnCount(); ?>
    <?php $i=0; foreach ($productCollection as $_product): ?>
        <?php if ($i++%$_columnCount==0): ?>
        <ul class="products-grid">
        <?php endif ?>
            <li class="item<?php if(($i-1)%$_columnCount==0): ?> first<?php elseif($i%$_columnCount==0): ?> last<?php endif; ?>">
                <p class="product-image">
                    <a href="<?php echo $this->getUrl('ajax/product/quickview/id/' . $_product->getId()) ?>" rel="nofollow" title="<?php echo $this->htmlEscape($_product->getName()) ?>" class="ajax"><?php echo $this->__('Quick view') ?></a>
                    <a href="<?php echo $_product->getProductUrl() ?>" title="<?php echo $this->stripTags($this->getImageLabel($_product, 'small_image'), null, true) ?>" class="product-image">
                            <img src="<?php echo $this->helper('catalog/image')->init($_product, 'small_image')->resize(135); ?>" width="135" height="135" alt="<?php echo $this->stripTags($this->getImageLabel($_product, 'small_image'), null, true) ?>" />
                    </a>
                </p>
                <h2 class="product-name"><a href="<?php echo $_product->getProductUrl() ?>" title="<?php echo $this->stripTags($_product->getName(), null, true) ?>"><?php echo $_helper->productAttribute($_product, $_product->getName(), 'name') ?></a></h2>
                <?php if($_product->getRatingSummary()): ?>
                <?php echo $this->getReviewsSummaryHtml($_product, 'short') ?>
                <?php endif; ?>
                <?php echo $this->getPriceHtml($_product, true) ?>
                <div class="actions">
                    <?php if($_product->isSaleable()): ?>
                        <button type="button" title="<?php echo $this->__('Add to Cart') ?>" class="button btn-cart" onclick="setLocation('<?php echo $this->getAddToCartUrl($_product) ?>')"><span><span><?php echo $this->__('Add to Cart') ?></span></span></button>
                    <?php else: ?>
                        <p class="availability out-of-stock"><span><?php echo $this->__('Out of stock') ?></span></p>
                    <?php endif; ?>
                    <ul class="add-to-links">
                        <?php if ($this->helper('wishlist')->isAllow()) : ?>
                            <li><a href="<?php echo $this->helper('wishlist')->getAddUrl($_product) ?>" class="link-wishlist"><?php echo $this->__('Add to Wishlist') ?></a></li>
                        <?php endif; ?>
                        <?php if($_compareUrl=$this->getAddToCompareUrl($_product)): ?>
                            <li><span class="separator">|</span> <a href="<?php echo $_compareUrl ?>" class="link-compare"><?php echo $this->__('Add to Compare') ?></a></li>
                        <?php endif; ?>
                    </ul>
                </div>
            </li>
        <?php if ($i%$_columnCount==0 || $i==$_collectionSize): ?>
        </ul>
        <?php endif ?>
        <?php endforeach ?>
        <script type="text/javascript">decorateGeneric($$('ul.products-grid'), ['odd','even','first','last'])</script>
    <?php endif; ?>

    <div class="toolbar-bottom">
        <?php echo $this->getToolbarHtml() ?>
    </div>
</div>

<?php elseif(!$_productCollection->count()):
?>
<p class="note-msg"><?php echo $this->__('There are no products matching the selection.') ?></p>

<?php else: ?>
<div class="category-products">
    <?php echo $this->getToolbarHtml() ?> 
```

# typo3 - 通过页面祖先设置正文类

> ID：12401393
> 
> 赞同：0
> 
> 时间：2012-09-13T07:25:56.117
> 
> 标签：typo3, typoscript

我知道如何使用当前页面动态设置正文类`uid`：

```
page.bodyTagCObject = HTML
page.bodyTagCObject.value.field = uid
page.bodyTagCObject.value.wrap = <body id="uid|"> 
```

但是如何使用页面顶级祖先的 id 设置正文类？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T08:08:10.757

检查这个：

```
page.bodyTagCObject = HTML
page.bodyTagCObject.value.dataWrap = <body id="uid{leveluid:0}"> 
```

您可以在此处阅读有关获取此类数据的方法：http: [//typo3.org/documentation/document-library/core-documentation/doc_core_tsref/4.7.0/view/2/2/](http://typo3.org/documentation/document-library/core-documentation/doc_core_tsref/4.7.0/view/2/2/)

查找文本“getText”

# asp.net-mvc - 如何上传较大的文件？

> ID：12401400
> 
> 赞同：0
> 
> 时间：2012-09-13T07:26:31.543
> 
> 标签：asp.net-mvc

我正在尝试上传一个 6.38 mb 的文件，但我做了研究，你只能上传 4 mb。

有人告诉我去更改**maxRequestLength****web.config 文件中的部分。**

 **但我不能好**或我的 web.configs 中的**maxRequestLength**。**

 **有人可以告诉我在哪里可以使用 MVC 找到它们，或者如何让更大的文件上传。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T07:32:20.460

您是否按照下面的说明寻找 httpRuntime 键？
[http://weblogs.asp.net/jgalloway/archive/2008/01/08/large-file-uploads-in-asp-net.aspx](http://weblogs.asp.net/jgalloway/archive/2008/01/08/large-file-uploads-in-asp-net.aspx)
AFAIK 如果您的配置文件中**不**存在密钥，您可以自己添加。
如果您增加允许的上传大小，您可能也必须调整超时值。

PS 4MB 或 6MB**不是**大型上传 - 我在**平均**上传以 GB 为单位测量的网站上工作，即 5-10GB**不是**最大的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T07:32:36.270

它在 web.config 文件的配置部分，如果你没有 httpRuntime 元素然后添加它，它看起来如下所示：

```
<configuration>
  <system.web>
    <httpRuntime 
      ...
      maxRequestLength = 'number'
      ... />
  </system.web>
</configuration> 
```

有关详细信息，请参阅此[MSDN](http://msdn.microsoft.com/en-us/library/e1f13641%28v=vs.100%29.aspx)文章****

# ruby-on-rails-3 - 如何在黄瓜功能中点击邮件中的激活链接？

> ID：12401402
> 
> 赞同：1
> 
> 时间：2012-09-13T07:26:59.793
> 
> 标签：ruby-on-rails-3, cucumber

在注册用户收到包含激活链接的确认邮件后，我拥有与往常一样的常用功能。单击该链接后，用户被确认，然后只有他可以登录到相应的系统。那么，如何获取邮件以及如何使用黄瓜功能单击该激活链接？请建议。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-13T07:46:04.050

试试这个 [电子邮件规范](https://github.com/bmabey/email-spec)

您可以使用定义的步骤

```
When I follow "activate" in the email 
```

这是已定义步骤[的](https://github.com/bmabey/email-spec/blob/master/lib/generators/email_spec/steps/templates/email_steps.rb)列表。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T07:30:35.863

我建议只测试生成链接的代码。因此，在您的步骤定义中，只需转到`activation_url(@user)`用于生成链接的或任何内容。与邮件交互有点痛苦，如果你只测试发送的邮件，然后单独测试生成 url 的代码，你的测试会更干净。

**编辑例如**

```
Given /^I have been sent an activation email$/ do
  @user = FactoryGirl.create(:unactived_user)
end

When /^I click on the activation link$/ do
  visit(activation_url(@user)
end

Then /^I should see a success message$/ do
  page.has_content('Success!')
end 
```

这是假设您使用的是 FactoryGirl 和 Capybara，并且您的 Factory.rb 文件中已经有一个“unactived_user”设置。

# javascript - 谷歌地图固定位置叠加

> ID：12401405
> 
> 赞同：4
> 
> 时间：2012-09-13T07:27:14.313
> 
> 标签：javascript, maps

我正在开发一个严重依赖谷歌地图的网络应用程序。我收到的设计在地图上覆盖了一些渐晕，我似乎找不到解决方案来实现这一点，同时又不从 Google Maps 容器元素中窃取事件。

我用谷歌搜索了一下，但还没有找到可靠的解决方案。我发现的建议在我的测试中失败了：

*   使用 OverlayView 不会将其设置为固定到容器，而是会随地图平移。
*   我尝试将其添加为自定义控件，但这似乎是从地图中窃取事件并使用户无法平移。

我什至尝试将我的元素注入谷歌地图创建的一堆元素中，但没有骰子。

有什么方法可以实现这一点而不会太老套吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T08:16:42.370

我找到了一个可以在现代浏览器中使用[`pointer-events`](https://developer.mozilla.org/en-US/docs/CSS/pointer-events)CSS 属性的解决方案。将此设置`none`为覆盖在地图上的 div 会导致 JavaScript 指针事件忽略我的覆盖并直接通过它传递到地图。我所做的是严格意义上的美学特征，所以我不会因缺乏 IE 支持而烦恼。

# c++ - 局部变量栈

> ID：12401408
> 
> 赞同：3
> 
> 时间：2012-09-13T07:27:27.063
> 
> 标签：c++, c, visual-studio-2010, pointers

```
void Test2()
{   
    int c=8;
    int b=7;
    int d=9;
    int *a; 

    a = &b;
    a+=sizeof(int); //I supposed that *a should points on variable d after this 

    cout << "b\t" << &b << "\t" << b << endl;
    cout << "a\t" << a  << "\t" << *a << endl;
    cout << "c\t" << &c  << "\t" << c << endl;
    cout << "d\t" << &d  << "\t" << d << endl;
} 
```

我认为***a**应该指向变量**d**，因为**b**和**d**（如我所想）位于局部变量堆栈附近。但是 *a 指向另一个地址，所以***a** != **d** 我的问题是为什么会这样？它是 Visual Studio 2010 的功能还是其他什么？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-13T07:28:55.507

不，这是 C++ 的一个特性，称为*未定义行为*。您不能在您拥有的数组（或数组边界上的一个位置）之外进行指针算术。

你可以让它工作，`a += 1`因为`a`它已经是 a `int*`，所以`+= 1`让它指向下一个整数。`a+=sizeof(int)`将其`sizeof(int)`向右移动整数。

```
 +------+------+------+------+------+
 |      |      |      |      |      |      
 +------+------+------+------+------+
    ^      ^                    ^
    |      |                    |
    a     a+1               a+sizeof(int) (assuming sizeof(int) == 4) 
```

同样，从技术上讲，它是未定义的。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-09-13T07:31:43.793

好吧，对于初学者来说，我认为指针算术不像你认为的那样工作。您不需要这样做`sizeof(int)`，因为指针已经是指向 的指针`int`，所以编译器知道`a++`需要提前 4 个字节。

其次，不，您不能指向局部变量，因为您不知道编译器将它们放在内存中的什么位置、它们的生命周期，甚至根本不知道它们是否在内存中。编译器会将许多局部变量优化到 CPU 寄存器中。

编辑：是的，根据有效的评论，我应该澄清你可以使用指向局部变量的指针，编译器会做正确的事情，但你不能对它们使用指针算术，因为它们可能会被完全优化掉。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-13T07:28:51.527

您不能假设所有变量都按照您想要的方式对齐，并且您不能以这种方式使用指针算术。安全使用它的唯一方法是在您的数组范围内使用它。此外，`a+=sizeof(int)`不会将其移动到指向下一个整数，而是将其移动`sizeof(int)`整数。

您在这里依赖 UB，因此您不能期望任何特定的结果。实际上，您甚至可能会遇到段错误。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-13T07:31:22.200

不，它不是 Visual Studio 2010 的功能。指针的算术运算显示未定义的行为。

通常，仅在指向数组元素时使用增量/减量

# objective-c - 在 Opengl 中实现非 2 次幂纹理

> ID：12401410
> 
> 赞同：0
> 
> 时间：2012-09-13T07:27:37.583
> 
> 标签：objective-c, ios, opengl-es

我想将图像绘制为纹理。我的问题是图像大小不是 2 的幂。我怎样才能画出这个图像。请给我建议。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-13T07:39:31.747

您可以将非 2 次幂图像嵌入到 2 次幂图像文件中，并使用顶点上的纹理坐标来指定图像的哪一部分将用作纹理。[阅读有关纹理](http://www.gamedev.net/page/resources/_/technical/opengl/opengl-texture-mapping-an-introduction-r947)的本教程以了解更多信息。

您可以使用更多“子图像”填充图像文件中的剩余空间（如果它们适合），用作进一步的纹理以避免浪费空间。

# javascript - 如何将输入（type = text）从html表单传递给javascript函数

> ID：12401411
> 
> 赞同：0
> 
> 时间：2012-09-13T07:27:39.560
> 
> 标签：javascript, html

我想将从文本字段中获取的 udid 传递给函数 getusername。

```
<tr>
     <td> Enter Udid : </td>
     <td> <input name="udid" id="udid" type="text" value="{{udid}}" size="50"></td>
</tr>

<td> 
     <input type="button" value="Get User Name(udid)" onclick="getUserName(udid);"> 
</td> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-13T07:29:08.250

这应该有效：

```
onclick="getUserName(document.getElementById('udid').value);" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T07:33:31.107

试试这个代码：

在您的 html 中：

```
<input type="button" value="Get User Name(udid)" onclick="getUserName(document.getElementById('udid'));"> 
```

函数javascript：

```
function getUserName(id){
    alert(id.value);
} 
```

看这个演示：[JSFIDDLE](http://jsfiddle.net/KYjjK/)

# vba - 为什么在我的宏中出现此错误对象“_workbook”的方法表失败？

> ID：12401420
> 
> 赞同：-1
> 
> 时间：2012-09-13T07:28:30.170
> 
> 标签：vba, excel

我开始为 excel 2007 学习 VBA。任何人都可以帮助解释为什么在执行时会发生此错误：

代码是

```
Public Sub LastVariable_Check()
    'Check if Last Variable is of latest month sales

    'lastvariable  = lv

    lv = wkbOut.Sheets("Sheet1").Range("B1",Range("B1").End(xlToRight)).End(xlToRight).Text
    If "0" & Mid(lv, InStr(lv, "Month/") + 6, 1) = strmth _
    And Mid(lv, InStr(lv, "Month/") + 8, 4) = strYear Then
        Set wkbRaw = Workbooks.Open(strInputQCPath & "Errorlog.xlsx")

        wkbRaw.Sheets("Sheet1").Range("A1").Offset(i, 2).Value = "Correct"
        wkbRaw.SaveAs Filename:=strInputQCPath & "Errorlog.xlsx"
        wkbRaw.Close
    Else
        Set wkbRaw = Workbooks.Open(strInputQCPath & "Errorlog.xlsx")

        wkbRaw.Sheets("Sheet1").Range("A1").Offset(i, 2).Value = "Incorrect"
        wkbRaw.SaveAs Filename:=strInputQCPath & "Errorlog.xlsx"
        wkbRaw.Close
    End If 
End Sub 
```

请帮忙
谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T10:59:49.010

我已将此 LastVariable_Check 称为此工作簿 wkbOut 的范围之外。只需在我将 wkbOut 保存为不同工作表名称的代码之前剪切粘贴并调用它，它就可以工作。

# java - 对象数组未转换为泛型类型

> ID：12401421
> 
> 赞同：2
> 
> 时间：2012-09-13T07:28:31.790
> 
> 标签：java, generics, casting

我打算使用链表创建一个简单的 Dictionary ADT。我的 getKeys() 方法没有什么问题，这是我的代码：

```
@Override
public K[] getKeys() 
{
    if(head==null)
    return null;
    else
    {
        Vector<K> v = new Vector();
        ListNode<K,V> temp= head;
        while(temp!=null)
        {
            v.add(temp.key);
            temp=temp.next;
        }
        //K keys[] = new O[v.size()];

        return (K[])v.toArray();//run time error
    }
} 
```

我有以下错误：

```
Exception in thread "main" java.lang.ClassCastException: [Ljava.lang.Object; cannot be cast to [Ljava.lang.Comparable;
    at Dictionary.ListDictionary.getKeys(ListDictionary.java:17)
    at Dictionary.DictionaryDriver.test(DictionaryDriver.java:83)
    at Dictionary.DictionaryDriver.main(DictionaryDriver.java:107)
Java Result: 1 
```

这是我要实现的接口：

```
public interface DictionaryInterface <K extends Comparable<K>, V>
{
    public void insert(K key, V value);
    public V getValue(K str);
    public void remove(K key);
    public K[] getKeys();   
} 
```

我知道我们无法创建泛型数组，但我从来没有遇到过将泛型类型转换为类型的问题。`Object`它与泛型类型`K`扩展有关`Comparable`吗？我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-13T07:32:55.640

尝试类似：

```
return (K[])v.toArray(new Comparable[v.size()]); 
```

然而，作为旁注，混合泛型和数组并不是最好的主意。

* * *

要安全地执行此操作（并且能够接受 以外的类型`Comparable`），您需要获取类型引用，因此您的构造函数可能如下所示：

```
public Dictionary(Class<K> keyType) {
    this.keyType = keyType;
} 
```

稍后，在实例化该数组时，调用：

```
return (K[]) v.toArray( Array.newInstance(keyType, v.size()) ); 
```

# asp.net - 在@using Moj.Tg.Gen.UI.Common 中保存使用；

> ID：12401422
> 
> 赞同：0
> 
> 时间：2012-09-13T07:28:40.970
> 
> 标签：asp.net, asp.net-mvc, web-config

我创建了静态方法来帮助我使用 js 文件（从他那里得到这个想法：[https](https://stackoverflow.com/a/912989/289246) ://stackoverflow.com/a/912989/289246 ）。

```
@using Moj.Tg.Gen.UI.Common;
@section scripts {
    @JSHelper.JSBlock("/Scripts/plugins/jquery.validate.js", "Scripts/plugins/jquery.validate.min.js")
    @JSHelper.JSBlock("/Scripts/plugins/jquery.form.wizard.js", "Scripts/plugins/jquery.form.wizard.min.js")
    @JSHelper.JSBlock("/Scripts/Pledges/create.js")
} 
```

我希望它能够在不写`@using Moj.Tg.Gen.UI.Common;`我使用它的每个地方的情况下工作。这可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T08:29:11.430

在我添加的 Views 文件夹的 Web.config 中：

```
<system.web.webPages.razor>
    <host factoryType="System.Web.Mvc.MvcWebRazorHostFactory, System.Web.Mvc, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" />
    <pages pageBaseType="System.Web.Mvc.WebViewPage">
      <namespaces>
        ....
        ....
        <add namespace="Moj.Tg.Gen.UI.Common" /> //<-- Added this!
      </namespaces>
    </pages>
  </system.web.webPages.razor> 
```

# asp.net-mvc-3 - 添加jqgrid后如何在插入的行上选择和定位？

> ID：12401423
> 
> 赞同：2
> 
> 时间：2012-09-13T07:28:49.450
> 
> 标签：asp.net-mvc-3, jqgrid

我有一个运行良好的 jqgrid。但是，我想在添加后选择并将自己定位在插入的行上。我希望对插入的行进行正确排序并放置在 jqgrid 中。

现在我只设法选择插入的行，但它没有在网格中正确排序。插入的行显示在我当前所在的任何页面的顶部。

这是我的代码示例，其中包含在 jqgrid 中插入新行的 create 函数。

```
$(document).ready(function () {
        $('#jqgProducts').jqGrid({
            //url from wich data should be requested
            url: '@Url.Action("DynamicGridData")',

            //type of data
            datatype: 'json',
            mytype: 'POST',
            //url access method type
            //jsonReader:{repeatitems : false, id: "cSfPT"},
            //columns names
            colNames: ['Šifra pošte', 'Naziv pošte', 'Napomena'],
            //columns model
            colModel: [
                        { name: 'cSfPT', index: 'cSfPT', align: 'left', width: '100px', key: true, editable: true, search: true

                         },

                        { name: 'cNzPt', index: 'cNzPt', align: 'left', width: '200px', editable: true, edittype: 'text',
                             },

                        { name: 'cNapomena', index: 'cNapomena', align: 'left', width: '400px', 

                         editrules: { required: false} }
                      ],
            //pager for grid
            pager: '#jqgpProducts',
            //number of rows per page
            rowNum: 10,
            //initial sorting column
            sortname: 'cSfPT',
            //initial sorting direction
            sortorder: 'asc',
            //we want to display total records count
            viewrecords: true,
            //grid height
            height: '300px',
            width : 1000,
            rownumbers: true,
            //scroll: true,
            cellEdit:true,
            cellurl: 'Edit',

            loadComplete: function () {
                if (idToSelect) {
                $(this).jqGrid('setSelection', idToSelect);
                //$("#" + $.jgrid.jqID(idToSelect)).effect("highlight", {}, 3000);
                idToSelect = undefined;
                }
            }

 $('#jqgProducts').jqGrid('navGrid', '#jqgpProducts',
            { add: true,
              del: true,
              edit:true, 
              search: true

               },

{width: '450', url: '@Url.Action("Create")', closeAfterAdd: true, 

            closeAfterEdit: true,

            reloadAfterSubmit: false,

            afterSubmit: function (response) {
                return [true, '', response.responseText];
            },

            addedrow: "last", // add new row at the end of grid

             afterComplete: function (response, postdata) {

                var gridId = this.gbox.substr(6);

                $('#' + gridId).jqGrid('setSelection', postdata.id);
             },

            afterSubmit: function (response) {

            idToSelect = response.responseText;
            return [true, '', response.responseText];
            }

       };
      );
    }); 
```

我将不胜感激任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T11:24:20.980

客户端可以设置：

```
sortname: 'yourSortingColum'
sortorder: 'asc' || sortorder:'desc' 
```

# c - 与 LPC1788 微控制器一起使用的好的 RTOS 是什么？

> ID：12401426
> 
> 赞同：4
> 
> 时间：2012-09-13T07:29:03.113
> 
> 标签：c, microcontroller, rtos, lpc, threadx

我试图找到一个免费/便宜的 RTOS，其他人发现它与 NXP LPC1788 微控制器配合得很好。我原本打算使用 FreeRTOS，但它似乎不支持那个特定的处理器；最接近的支持内核是 LPC1768。ThreadX 可与 LPC1788 配合使用，但它的许可证将花费数千英镑。建议？

编辑 1：我忘了提，我正在使用 IAR Embedded Workbench。

编辑2：我想我还应该指出我对嵌入式编程相当陌生，更不用说使用RTOS了。FreeRTOS 和 ThreadX 看起来都非常相似，并且都有相当直观的 API。另一个 RTOS 的 API 与这些类型的 API 匹配得越多，我想就越好。

编辑 3：我一直在研究一种称为 embOS 的 RTOS。它看起来很专业，API 看起来不错，它们支持相当数量的处理器/IDE 组合（包括我的），而且我已经有了一个运行良好的示例项目。它不是免费的，它的许可证大约需要 2500 欧元，但这仍然比 threadX 许可证便宜 3 倍左右。感谢您的建议，我无法选择可接受的答案，我感到很遗憾。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-13T18:00:47.473

> 我最初计划使用 FreeRTOS，但它似乎不支持该特定处理器

实际上，FreeRTOS 支持*所有*带有 GCC、IAR 和 Keil 的 Cortex-M3 和 Cortex-M4 处理器。仅仅因为它没有特定的预配置演示项目并不意味着它不受支持。

FreeRTOS 不依赖 Cortex-M 内核之外的任何东西，因为定时器生成和中断控制器是内核本身的一部分。

您可以从 FreeRTOS 发行版中获取现有的官方 LPCxx IAR 演示项目，并通过为芯片设置正确的链接描述文件简单地重新定位它。任何使用 IO 的演示任务在您的特定硬件（用于 LED 输出的端口等）上可能不同，都可以修改为适合您的 IO 端口分配，或者只是删除。

例如，`Atollic`有 55`FreeRTOS`个项目在 55 个不同的硬件平台上运行，所有这些项目实际上都使用相同的 C 源文件——只是启动文件和链接器脚本不同。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-15T08:11:41.110

我专门评估了 Cortex-M3 上的 FreeRTOS、embOS 和 Keil RTX。在三个 FreeRTOS 中，上下文切换时间肯定是最慢的，而 RTX 是最快的，但范围是 5us 到 15us，所以除了最难的实时应用程序之外，可能对所有应用程序都不重要（但在我的情况下它有所不同）。

RTX 当然是 Keil 特定的，并且您使用的是 IAR，它的 API 不如 embOS 复杂，当时它在 CM3 上有一些错误并且不完全支持 NVIC 中断优先级方案。我相信这些问题都解决了。在 API 和架构方面，FreeRTOS 可能是三者中最非传统的，它广泛使用了 embOS 和 VxWorks 以及类似的“传统”RTOS 系统，我对它并不完全满意。

embOS 与 IAR 及其调试器配合得很好，具有一定程度的 RTOS 感知调试，这是有用的。许可是针对每个开发人员/每个处理器/每个工具链的，但在其他方面是免费的，并且可以在使用相同架构和工具链的许多项目中使用。Segger 的支持非常好，文档也是如此，我建议对于具有足够数量和利润的商业产品来说，这是非常值得的。

您还可以考虑 eCos - 这是一个更全面的解决方案，提供对 USB、网络、文件系统等以及调度和 IPC 的支持。[LPC1766](http://ecos.sourceware.org/ecos/boards/lpc1766stk.html)有一个端口，可能相对容易移植。但是，您很可能必须使用 GNU 工具链进行开发，这可能会影响您对现有工具（例如 JTAG 调试器）的使用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-13T07:59:43.057

我知道 Keil mVision IDE 具有适用于 NXP 芯片的 RTOS，它在 24xx 100% 上工作。但是这个 RTOS 不是开源的，只有 IDE 拥有者才能使用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-06-16T06:56:37.583

Linux，它的 uClinux 形式，在 LPC1788 上运行得很好。看看这个视频，例如：

[http://www.youtube.com/watch?v=VTemb8P1doI](http://www.youtube.com/watch?v=VTemb8P1doI)

正如上面评论中提到的，LPC1788 的内部 SRAM 不足以运行 Linux，但是 LPC1788 提供了一个 SDRAM 接口，可以添加外部 RAM。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-10-13T18:22:14.473

Unison RTOS 提供与 Linux 相同的 POSIX 调用，包括一整套 I/O 调用，您会发现这些调用在诸如 freertos 之类的东西中缺失。该商业模式对 DIY 和基于商业产品的版税免费。开始使用串行 I/O 和文件系统时，它往往只是竞争对手价格 999 美元的一小部分。www.rowebots.com 了解详情。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-13T07:54:39.983

您可以尝试使用任何 linux 内核编译获取 RTAI。可能需要一些工作，但应该可行（并且免费）

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-01-10T10:54:48.070

如果您愿意，我正在使用 RTOS，您可以在 github 上找到

[http://www.github.com/geppo12/YasminOS](http://www.github.com/geppo12/YasminOS)

（路径区分大小写）

是一个简单的调度器我要尽快介绍任务优先级。我创建 YasminOS 是因为其他操作系统太复杂或太昂贵 实际上我正在开发 YasminOS，只有一个愿景：简单

有许多应用程序不需要极其强大的操作系统，而只需要简单的调度程序。实际上它在 Spansion FM3 架构或 NXP lpc800 上进行了测试（是的，也适用于 cortex m0）在不久的将来我将在 nxp 4088 上测试它......

# iphone - gmail联系人获取iphone的源代码

> ID：12401427
> 
> 赞同：0
> 
> 时间：2012-09-13T07:29:05.003
> 
> 标签：iphone

我正在开发一个 iPhone 应用程序，我必须在其中获取 Gmail 联系人列表以发送添加朋友的请求。我没有得到很好的教程来实现 Google API。如果有人完成了你可以发布代码。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T11:06:58.237

为objective-c使用GData；

```
http://code.google.com/p/gdata-objectivec-client/wiki/GDataObjCIntroduction 
```

您需要从 svn 签出并使用此项目并集成到您的项目中。

愿这有助于很多。

# java - 不要在 Dozer 中将空条目从一个列表映射到另一个列表

> ID：12401431
> 
> 赞同：1
> 
> 时间：2012-09-13T07:29:21.107
> 
> 标签：java, list, mapping, dozer

假设我有以下类结构？

```
class A{
List<B> listB;
//getter and setter
}
class B{
String s;
//getter and setter
}
//objectOfA has listB = [null,objectOfB,null]
A a2 = dozermapper.map(objectOfA,A.class); 
```

我想要 a2 只包含 listB=[objectOfB] 。不是列表的空元素。

如何在推土机中做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T08:25:36.000

你可以写一个简单的转换器，像这样（使用新的转换器 api，你也可以使用旧的）：

```
public class Converter extends DozerConverter<List<B>, List<B>> {
  public Converter() {
    super(List.class, List.class);
  }

  public List<B> convertTo(List<B> source, List<B> destination) {
    List<B> result = new ArrayList<B>();
    for (B item : source) {
      if (item != null) {
          result.add(item); //or item copy, or whatever you want
      }
    }
    return result;
  }
} 
```

然后将其附加到您的映射中，如下所示：

```
<mapping>
  <class-a>yourpackage.A</class-a>
  <class-b>yourpackage.A</class-b>    
  <field custom-converter="yourpackage.Converter">
      <a>listB</a>
      <b>listB</b>
  </field>
</mapping> 
```

# authorization - Google Calendar API Authorization 一直询问

> ID：12401435
> 
> 赞同：1
> 
> 时间：2012-09-13T07:29:40.247
> 
> 标签：authorization, google-calendar-api

我的问题很简单，我正在使用带有 php 脚本的 Google Calendar API。

我的脚本正在运行，但我无法使用 cron 运行它，因为我需要一直授权我的应用程序。

有什么办法可以做我想做的事吗？

这是我的代码：

```
<?php
require_once 'google/Google_Client.php';
require_once 'google/contrib/Google_CalendarService.php';
session_start();

$client = new Google_Client();
$client->setApplicationName("Google Calendar PHP Starter Application");
$client->setClientId([MY APP ID]);
$client->setClientSecret([MY SECRET TOKEN]);
$client->setRedirectUri([MY REDIRECT URI]);
$client->setDeveloperKey([MY DEV KEY]);
$cal = new Google_CalendarService($client);
if (isset($_GET['logout'])) {
  unset($_SESSION['token']);
}

/*
** Request token from API
*/
if (isset($_GET['code'])) {
  $client->authenticate($_GET['code']);
  $_SESSION['token'] = $client->getAccessToken();
  header('Location: http://' . $_SERVER['HTTP_HOST'] . $_SERVER['PHP_SELF']);
}

if (isset($_SESSION['token'])) {
  $client->setAccessToken($_SESSION['token']);
}

if ($client->getAccessToken()) {

  // MY CODE GOES HERE

  } else {

  $authUrl = $client->createAuthUrl();
  print "<a class='login' href='$authUrl'>Connect Me!</a>";
}

?> 
```

谢谢 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T19:15:19.647

不知道你是否有这个问题的答案，但我曾经遇到过同样的问题。Google Api 返回一个 Oauth 访问令牌。此令牌无限期地持续，但在您的代码中，您将其存储在 $_SESSION 变量中，该变量具有将保留的时间跨度。尝试使用`$token = $client->getAccessToken();`以将访问令牌放入变量中，然后以其他形式存储令牌，例如数据库。然后在检查是否`$_SESSION['token']`已设置时，如果未设置，您可以查询您的数据库以检索令牌并使用`$client->setAccessToken($queryResult);` API 负责其余的工作，只要您拥有该访问令牌。

# windows - 操作系统 Windows 和 Linux 中 TCP 窗口大小的默认值

> ID：12401436
> 
> 赞同：0
> 
> 时间：2012-09-13T07:29:42.007
> 
> 标签：windows, linux, networking

Windows 9x/NT、Windows Me/2000/XP Server 2003 和 Linux (Mandriva) 中 TCP- 窗口的默认大小是多少？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T07:46:48.000

此信息来自 2006 年，但是：

```
Windows: 8192 bytes
FreeBSD: send=32k, receive=56k
Linux: send=16k, receive=43689 bytes (!)
Solaris: 52k 
```

资料来源：*Java 中的基础网络，*由你自己引用 Bishop 等人的论文，*网络协议的严格规范和一致性测试技术，应用于 TCP/IP、UDP 和套接字，剑桥大学计算机实验室和 NICTA，堪培拉，2005 年。*

Windows 的价值总是太低，人们希望从那以后它已经被提高了。

```
OS/2 32-bit: 48k (from memory, but it's been a long time) 
```

# c# - 命名空间中不存在 LayoutAwarePage VS2012 错误？

> ID：12401440
> 
> 赞同：22
> 
> 时间：2012-09-13T07:29:52.540
> 
> 标签：c#, microsoft-metro, visual-studio-2012

我正在尝试让搜索合同在我的 Win 8 应用程序上运行，但是在将搜索合同添加到我的项目后，我收到以下命名空间错误：

```
LayoutAwarePage does not exist in namespace App1.Common. 
```

我在 xaml 中有正确的命名空间声明：

```
xmlns:common="using:App1.Common" 
```

并且 LayoutAwarePage 位于正确的命名空间 App1.Common

重新启动 VS2012 或进行删除和重建没有帮助。要复制此问题，请尝试以下操作：

1）创建新的空白地铁应用

2) 添加对 Visual C++ 运行时的引用

3）向项目添加搜索合同（单击是自动添加其他内容，如 LayoutAwarePage 等）

4) 重建并打开 SearchResultsPage1.xaml

如果您按照上述步骤操作，您应该会看到错误，并注意 SearchResultsPage1 不会显示在设计器中。

仅当您添加对 Visual C++ 运行时的引用时，才会出现此问题。如果没有此参考，添加搜索合同可以正常工作！

有任何想法吗？我在这里想念什么？您可以使用上述步骤复制问题吗？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-09-24T15:21:20.393

我刚刚遇到了同样的问题。

关闭 VS 并删除相关的 SUO 文件（在解决方案的文件夹中，可能被隐藏）就像一个魅力。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-10-30T17:06:44.440

您必须添加对 WinRTXamlToolkit 的引用：来自 VS2012 Express

1.  右键单击“参考”项；
2.  选择“管理 NuGet 包...”；
3.  在新窗口左侧的菜单中选择“在线”，然后选择“Windows & Packages”；
4.  搜索名为“WinRTXamlToolkit”的库，选择它然后单击“安装”按钮。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-04-20T11:14:05.543

如果打开，请关闭 VS 中的所有选项卡。

然后点击 Build-> clean solution

下一步单击构建->重建解决方案

现在打开 xaml 文件。

希望它会起作用

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2014-05-24T21:01:35.437

对我来说，这个恼人的错误是通过简单地从 Debug Any CPU 更改为 x86 来解决的，即使设计师打开它，它也会重新焕发生机。然后当你完成后，你可以关闭并改回任何 CPU 并构建就好了。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-02T18:55:01.740

我刚刚卸载了项目并在 VS'2012 中重新加载它并开始工作。不需要删除任何东西。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-02-18T14:37:37.297

关闭所有 xaml 文件并重建项目。如果您在 cs 文件中有错误，请先修复它们。对我来说，添加`public static MainPage Current;`到主页很容易。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-09-29T03:08:50.210

我删除了对 Bing Maps SDK 的引用，并将平台目标设置回任何 CPU，它为我解决了问题。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2012-12-18T20:39:47.903

我遇到了这个烦人的问题，这可能与使用 SQLite for Windows RT 插件（v3.7.15）有关，并且随机出现“设计视图对 x64 和 ARM 目标平台不可用”错误。

无论如何，对我来说，一旦我**将项目和解决方案的目标平台更改为 x86，**现在一切正常，包括布局感知功能。

因此，右键单击解决方案资源管理器中的项目和解决方案，单击属性，然后选择 x86 架构。

没有“任何 CPU”作为目标确实让我有点紧张，所以如果有人知道如何使用 SQLite 和布局感知页面进行这项工作，请加入。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2017-07-21T13:11:29.083

在编译 UWP 应用程序时，我得到了一长串类似的错误。然而，隐藏在其中的是几个真正的编译错误。当我修复真正的错误时，丢失的参考资料也消失了。

因此，首先修复任何其他编译错误，然后查看这些“在命名空间中丢失”错误是否消失。

编辑：我的同事在 VS 2017 中也有这个错误。通过 Build 菜单清理解决方案不起作用。右键单击解决方案资源管理器中的项目并清理每个项目，然后重新构建，工作正常。

EDIT2：又遇到了这个问题。22“在命名空间中丢失”错误。
我从 ViewModel 中删除了一个按钮处理程序，但忘记从 XAML 代码中删除该按钮。当我修复这个真正的错误时，22 个“名称空间中丢失”错误也消失了。

* * *

## 回答 #10

> 赞同：-1
> 
> 时间：2018-11-20T17:59:42.807

在 Xaml 中添加新的基本页面时，我在 Visual Studio 2012 中也遇到了同样的问题。我只是运行我的应用程序并自动删除了错误。

# postgresql - Postgresql 9.1 中 array_agg 的限制

> ID：12401446
> 
> 赞同：6
> 
> 时间：2012-09-13T07:30:15.847
> 
> 标签：postgresql, aggregate-functions, postgresql-9.1

使用 array_agg 或 array_string 时，数组在一定大小以上返回空。

`SELECT array_agg(x.id) FROM (SELECT id FROM table LIMIT 500) x`- 这有效并返回一个数组。

但是这个查询：`SELECT array_agg(x.id) FROM (SELECT id FROM table LIMIT 667) x` 不起作用。它返回一个空数组。

我很确定这不会达到数组的限制大小。任何想法为什么会发生这种情况？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-10T17:37:09.343

这里的问题不是 Postgresql，而是我使用的客户端。 `pgAdmin III`不显示超过一定大小的数组内容。大约 4.5k。使用时`psql`不会遇到同样的问题。

的 UI`pgAdmin`有一个设置[“每列最大字符数”](http://www.pgadmin.org/docs/dev/options-tab4.html)的选项，在我的情况下它设置为 256，这没有什么意义。但是您将看起来为空的数组复制并粘贴到记事本中，您会发现所有数据都在那里。

# javascript - Jquery 模板 if xx && if yy

> ID：12401448
> 
> 赞同：1
> 
> 时间：2012-09-13T07:30:19.767
> 
> 标签：javascript, jquery, jquery-templates

有没有

```
{{if something && if something_else}}lalala{{/if}} 
```

在 Jquery 模板中？我无法让它工作。

这有效：

```
{{if something}}{{if something_else}}lalala{{/if}}{{/if}} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T07:33:05.007

```
{{if something && something}}lalala{{/if}} 
```

这应该工作

# asp.net-mvc-3 - 使用 MVC3 的 KendoUI 从数据库获取数据到组合框

> ID：12401450
> 
> 赞同：0
> 
> 时间：2012-09-13T07:30:22.990
> 
> 标签：asp.net-mvc-3, visual-studio-2010, c#-4.0, kendo-ui

我将 MVC3 与 KendoUI 一起使用。

我可以通过手动将值传递给组合框来检索数据，并且可以在执行时看到组合框中的值。

这是通过手动传递值

```
 $("#input").kendoComboBox({
                dataTextField: "text",
                dataValueField: "value",
                dataSource: [
                        { text: "Cotton", value: "1" },
                        { text: "Polyester", value: "2" },
                        { text: "Cotton/Polyester", value: "3" },
                        { text: "Rib Knit", value: "4" }
                    ],
                filter: "contains",
                suggest: true,
                index: 3
            }); 
```

现在我需要从 SQL Server 2008 中检索数据。

说我的表名是 Products

* * *

产品名称 <-- 这是我的列名称，后跟其中的值。abc def ghi

我怎样才能做到这一点 ？

我对这个 KendoUI 和 MVC 都很陌生。

请帮忙

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T19:31:20.107

哟，伙计，

组合框的客户端配置应该与这个非常相似。 [http://demos.kendoui.c​​om/web/combobox/remotedatasource.html](http://demos.kendoui.com/web/combobox/remotedatasource.html)

例如

```
<script>
  jQuery("#products").kendoComboBox({
    "dataSource": {
        "transport": {
            "read": {
                "url": "/razor/web/Home/GetProducts",
                "data": function() {
                    return kendo.ui.ComboBox.requestData("#products");
                }
            }
        },
        "serverFiltering": true,
        "filter": [],
        "schema": {
            "errors": "Errors"
        }
    },
    "dataTextField": "ProductName",
    "dataValueField": "ProductID",
    "filter": "contains"
});​
</script> 
```

使用 sever 方法中的此类配置，您需要创建一个返回 JsonResult 的操作方法，最重要的部分是集合中的每个对象都应包含名称为**ProductName**和**ProductID**的属性，这些属性代表用于 Combo 的名称和 id。

```
public JsonResult GetProducts(string text)
    {
        var northwind = new NorthwindDataContext();

        var products = northwind.Products.Select(product => new ProductViewModel
        {
            ProductID = product.ProductID,
            ProductName = product.ProductName,
            UnitPrice = product.UnitPrice ?? 0,
            UnitsInStock = product.UnitsInStock ?? 0,
            UnitsOnOrder = product.UnitsOnOrder ?? 0,
            Discontinued = product.Discontinued
        });

        if (!string.IsNullOrEmpty(text))
        {
            products = products.Where(p => p.ProductName.Contains(text));
        }

        return Json(products, JsonRequestBehavior.AllowGet);
    } 
```

# php - 异常“无效的单元格坐标 V”

> ID：12401459
> 
> 赞同：1
> 
> 时间：2012-09-13T07:30:44.720
> 
> 标签：php, phpexcel

我正在尝试读取 Excel2007 模板，对其进行编辑并将其保存到新的 Excel2007 文件中。

该模板由 7 个工作表组成，每个工作表有 50 列和 2000 行，它的重量为 2.6Mb 空。

当我尝试保存文件时，即使我对模板什么都不做，我总是会遇到这个异常：

```
Invalid cell coordinate V 
```

我知道在模板的某个地方，一个公式正在寻找一个带有其列的单元格，但没有指定行。我找不到任何这样的公式。

我注意到如果我指定

```
$PHPExcel->disconnectWorksheets(); 
```

在保存之前，不会抛出异常，但保存的文件已损坏。

- - 编辑 - -

我忘了提到我的模板有很多组合框。那是什么可能导致这个错误？

# node.js - 如何快速搭建大规模分析服务器？

> ID：12401460
> 
> 赞同：1
> 
> 时间：2012-09-13T07:30:43.983
> 
> 标签：node.js, nosql, analytics, amazon-dynamodb

我需要快速且便宜地构建一个大规模（七位数及以上）的分析服务器。

Piwik 将是一个简单的选择，但就我目前所收集的信息而言，Piwik 很难扩展，并且可能需要相当庞大的服务器来处理负载。

我的第二个想法是创建快速而肮脏的 Node.js 服务器，它将所有内容推送到 Amazon DynamoDB，这样人们就可以从第一天开始收集数据，然后再构建 UI。这将很快创建和扩展（垂直和水平）。但是，我想知道 DynamoDB 是否是此类用途的正确选择？（收集数据，生成报告）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T13:47:56.597

我正在专业地使用 DynamoDB，不会将它用于您的应用程序。

DynamoDB 确实有很多限制。其中，您可以只有一个，也可以`hash_key`选择一个`range_key`。

`hash_key`您可以对在给定用途下分组的项目进行一些“分析”，`query`但实际上并没有什么花哨的。对于复杂的查询，您将不得不使用`scan`缓慢且昂贵的 EMR，并且由于节流而具有一些缺点。

尽管如此，NoSQL 似乎是一个不错的选择，至少在应用程序的原型设计阶段是这样。但是，我会推荐 MongoDB。你可以索引任何列，做复杂的查询，不用担心数据限制。分片和复制并不难设置。

MongoDB 拥有强大的生态系统和社区，而 DynamoDB 还没有，因为它更年轻。MongoDB 还提供托管服务，可让您像使用 DynamoDB 一样快速引导应用程序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T01:16:52.983

Piwik 每月可扩展到数百万个页面和数以万计的跟踪网站。查看他们的文档：[http://piwik.org/docs/optimize/](http://piwik.org/docs/optimize/)和： http: [//piwik.org/blog/2012/07/piwik-high-scale-performance-report-as-of-july-2012/](http://piwik.org/blog/2012/07/piwik-high-scale-performance-report-as-of-july-2012/)

# c - 结构的动态阵列

> ID：12401463
> 
> 赞同：0
> 
> 时间：2012-09-13T07:30:57.173
> 
> 标签：c, arrays, struct, malloc, realloc

关于我在网络上找到的一段代码，我有几个问题，该代码位于[http://www.c.happycodings.com/Data_Structures/code9.html](http://www.c.happycodings.com/Data_Structures/code9.html)。

1.  为什么 strarray 被定义为`**`？
2.  我们是否必须先是`malloc()`数组，然后`malloc()`是它的每个元素？

    `strarray = (struct node **)realloc(strarray, (count + 1) * sizeof(struct node *));`

    `strarray[count] = (struct node *)malloc(sizeof(struct node));`

3.  如何完全释放（）这个数组？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T07:41:14.400

1.  `strarray`是指向指针数组的指针，每个指针都指向一个节点结构。这是对象数组的基本表示。对于基本类型，您只能使用 one `*`，因为它是指向基本类型数组的指针。您也可以对结构执行此操作，这取决于您要对数组做什么。

2.  是的，是的，你知道。

3.  首先遍历数组，释放每个成员，然后释放数组。释放的线索：释放你分配的所有东西。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T07:46:06.153

1.  `strarray`是类型`struct node **`，因为它是一个动态分配的数组`struct node *`- 即。一个指针数组，其中每个元素指向一个`struct node`.

2.  不，根据您要实现的目标，您可以简单地分配一块内存来保存 X `struct node`，并将该指针分配给 a `struct node *`。编写该代码的人为*指针数组*分配内存，这就是为什么他们随后调用`malloc`为每个人分配内存`struct node`。

    他们使用动态指针数组的可能性`struct node`，而不是简单地分配单个连续块，`struct node`这可能与减少调用时复制整个数组的成本（如果需要）有关`realloc`。

3.  为了释放内存，你做相反的事情。释放数组中的每个元素，然后释放整个数组。

# html - 右浮动链接变高

> ID：12401466
> 
> 赞同：0
> 
> 时间：2012-09-13T07:31:10.040
> 
> 标签：html, css, css-float

我遇到了一个链接问题，当它向右浮动时，它的高度比不向右浮动的链接要高。这是生成它的最少代码：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
    <title></title>
    <style>
        body {font: normal 12px/1.6 Arial; }
        .btn {background-color: Red; color:#000; padding: 5px 15px 5px 15px; }
    </style>
</head>
<body>
    <div>
        <a class="btn" href="#">Nice link</a>
        <a class="btn" style="float: right;" href="#">Bad link</a>
    </div>
</body>
</html> 
```

![这就是结果。 这](../Images/4b9290bde5fd81ff9c0214c4aa4b11e0.png)

如果我从身体样式中删除“Arial”，它看起来还不错。但我当然需要字体样式。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T07:35:14.850

填充仅适用于块元素，我猜由于浮动，坏链接就像一个块，将 display:block 添加到 .btn 并将好的链接浮动到左侧

[http://jsfiddle.net/4Qs5J/](http://jsfiddle.net/4Qs5J/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T07:37:25.323

浮动元素有效地将它们更改为块级元素（如果之前没有），因此填充不会应用于普通锚，但会应用于浮动锚。

您可以添加`display: inline-block;`到未浮动的锚点或浮动左侧。内联块将其内联属性保留为锚点，但它允许应用尺寸、填充和边距。IE 7 之后使用 inline 块。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-13T07:48:12.760

首先你需要说明身高才能和彼此一样高

向左飘浮;

请记住，高度也是通过填充设置的

不管怎样，看起来你在做菜单，那怎么办？

```
<ul>
<li style="float:left;"></li>
<li style="float:left;"></li>
</ul> 
```

然后你有一个容器到你的 2 个对象

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-13T07:48:47.237

我以自己的方式做了同样的代码希望它可以帮助

//css

```
 <style>
        body { font-family:Arial, Helvetica, sans-serif; font-size:14px; }
        .container { height:40px;}
        .container a{ color:#FFF; padding:10px; padding:7px; }
        .btn {background-color: Red; color:#000;   }
    </style> 
```

//HTML

```
 <div class="container">
        <a class="btn" href="#" style="float: left;">Nice link</a>
        <a class="btn" style="float: right;" href="#">Bad link</a>
    </div> 
```

# hadoop - Hadoop和Nosql之间的区别

> ID：12401468
> 
> 赞同：16
> 
> 时间：2012-09-13T07:31:24.800
> 
> 标签：hadoop, nosql

我想知道hadoop和nosql的基本区别

*   Hadoop需要什么？
*   NoSQL 需要什么？
*   两者都一样吗？

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2012-09-13T07:42:57.357

[Hadoop](http://hadoop.apache.org/)指的是一个软件包生态系统，包括 MapReduce、HDFS 和大量其他软件包，以支持数据在 HDFS（Hadoop 分布式文件系统）中的导入和导出。当有人说“我有一个 Hadoop 集群”时，他们通常指的是一个机器集群，它们都在这个通用生态系统中运行，具有一个大型分布式文件系统来支持大规模计算。

NoSQL 指的是非关系或至少是非 SQL 数据库解决方案，例如[HBase](http://hbase.apache.org/)（也是 Hadoop 生态系统的一部分）、[Cassandra](http://cassandra.apache.org/)、[MongoDB](http://mongodb.org/)、[Riak](http://basho.com/products/riak-overview/)、[CouchDB](http://couchdb.apache.org/)等。

Hadoop——计算框架

NoSQL - 不只是 - SQL 数据库

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-09-13T07:41:30.593

根据维基百科：

[Hadoop](http://en.wikipedia.org/wiki/Hadoop)：

> Apache Hadoop 是一个开源软件框架，支持数据密集型分布式应用程序，在 Apache v2 许可下获得许可。[1](http://www.oracle.com/technetwork/articles/bigdata/nosql-hadoop-1654158.html)它使应用程序能够与数千台计算独立的计算机和 PB 级数据一起工作。

[无SQL](http://en.wikipedia.org/wiki/NoSQL)：

> 在计算中，NoSQL（通常被解释为“不仅仅是 SQL” [1](http://www.oracle.com/technetwork/articles/bigdata/nosql-hadoop-1654158.html)）是一类广泛的数据库管理系统，它不遵守广泛使用的关系数据库管理系统模型；也就是说，NoSQL 数据库主要不是建立在表上的，因此通常不使用 SQL 进行数据操作。

它们不是一回事，而是与数据相关。Hadoop 是一个完整的框架（可以与[Oracle NoSQL 等](http://www.oracle.com/technetwork/articles/bigdata/nosql-hadoop-1654158.html)NoSQL DBMS 一起使用）。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-09-13T07:36:41.333

我认为你的问题导致了错误的方向。

hadoop 是一个名为 hdfs 的分布式文件系统的名称，它可以使用 map reduce 范式进行大规模计算。由于 yarn 还可以使用具有更多任务（如storm、hive 等）的hadoop 集群。

nosql是指不被sql查询的数据库，不一定使用表等。

您可能想查看[hadoop](http://en.wikipedia.org/wiki/Hadoop)和[noSQL](http://en.wikipedia.org/wiki/NoSQL)的 wiki 页面，以进一步了解两者之间的差异

# .htaccess - 如何自动访问受 htpasswd 保护的页面

> ID：12401469
> 
> 赞同：9
> 
> 时间：2012-09-13T07:31:33.677
> 
> 标签：.htaccess, iframe, .htpasswd

我有一个带有 htaccess 和 htpasswd 的受密码保护的目录。

htaccess 看起来像这样

```
AuthUserFile /usr/local/you/safedir/.htpasswd
AuthGroupFile /dev/null
AuthName EnterPassword
AuthType Basic

require user myusername 
```

htpasswd 看起来像这样

```
myusername:password887 
```

这个受密码保护的目录名为 www.mydomainname.com/mystuff

现在，我想在我的根目录中的 index.php 中通过 iframe 访问这个页面（以 www.mydomain.com/mustuff/index.html 作为 src），但我不想让用户全部填写用户名和密码时间，只是让他们不要进入 src 所在的文件夹。

有没有脚本可以自动填写用户名和密码，而不让“用户”一直写用户名和密码？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-09-13T16:12:50.657

您可以在链接本身中使用用户名和密码 src 框架：

```
http://myusername:password887@www.mydomainname.com/mystuff 
```

但是这种方式违背了密码保护目录的目的，因为任何人都可以查看页面源并知道用户名/密码，并且并非所有浏览器都支持这种类型的 URL。

您可以这样做，以便在尝试访问`/mystuff`目录时检查引用者，如果它来自嵌入 iframe 的位置，则允许访问而不提示输入密码。但是引用者很容易被欺骗。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-04T16:09:01.043

不，不可能，因为 htpasswd 是针对这个用例的

# php - MySQL - mysql_fetch_assoc() 没有给出一列

> ID：12401475
> 
> 赞同：0
> 
> 时间：2012-09-13T07:31:55.767
> 
> 标签：php, mysql

我的列类型是`SMALLINT`，名称是`user_level`。这是我正在使用的代码：

```
<?php
mysql_connect("localhost", "root", "*********");
mysql_select_db("3591_other");
$result = mysql_query("SELECT * FROM rivase_f_users WHERE user_name = '$email' AND    user_pass=sha1('$passwd')");
if (!$result) {
    echo mysql_error();
}
//snip
else if (mysql_fetch_assoc($result)) {
    $row=mysql_fetch_assoc($result);
    $_SESSION['username']=$email;
    if ($row['user_level']==1) {$_SESSION['usertype']='leader';}
    header("Location: index.php");
    die();
}
?> 
```

`$row['user_level']`看起来是`null`，但 phpmyadmin 说是`1`。我尝试通过评论标题位置行来回应它，它什么也没说。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T07:34:31.233

试试这个，

```
else if ($row = mysql_fetch_assoc($result)) {
    $_SESSION['username']=$email;
    if ($row['user_level']==1) {$_SESSION['usertype']='leader';}
    header("Location: index.php");
    die();
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-13T07:35:02.937

我不清楚您要完成的工作，但您放弃了第一个结果：

```
else if (mysql_fetch_assoc($result)) {
    //   ^^^^^^^^^^^^^^^^^ Read and discard
    $row=mysql_fetch_assoc($result);
    //   ^^^^^^^^^^^^^^^^^ Read next row 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-13T07:41:05.020

您遇到了一个逻辑`if-else`错误。

`mysql_fetch_assoc()`在测试条件中第一次调用的输出结果后，您正在读取 next 的值`else`，但您想从第一个返回的结果中读取值。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-13T07:48:49.153

根据您的代码试试这个

```
<?php
mysql_connect("localhost", "root", "*********");
mysql_select_db("3591_other");
$result = mysql_query("SELECT * FROM rivase_f_users WHERE user_name = '$email' AND    user_pass=sha1('$passwd')");
if (!$result) {
    echo mysql_error();
}
//snip
else if ($row=mysql_fetch_assoc($result)) {
    $_SESSION['username']=$email;
    if ($row['user_level']==1) {$_SESSION['usertype']='leader';}
    header("Location: index.php");
    die();
}
?> 
```

我已经更改了 else if 检查以在进行比较时保存该行。

# jquery - WordPress 主页 ID

> ID：12401477
> 
> 赞同：0
> 
> 时间：2012-09-13T07:32:04.767
> 
> 标签：jquery, wordpress

我想指出一个只适用于主页的功能，问题是我找不到主页的 ID。我怎么知道它有哪个ID？

id“家”不起作用...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T07:33:58.050

在您的编辑器中，当您编辑页面时，请检查 URL。它看起来像这样：

[http://www.domain.co.uk/wp-admin/post.php?post=154&action=edit](http://www.domain.co.uk/wp-admin/post.php?post=154&action=edit)

你的 ?post={ID IS HERE} 在哪里

在这个例子中，我的主页（或我正在编辑的当前页面）是 154。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T07:43:20.420

无需查找主页的 id。使用条件标签[是 home](http://codex.wordpress.org/Function_Reference/is_home)

```
<?php
if ( is_home() ) {
    // This is a homepage - write your function here.
} else {
    // This is not a homepage
}
?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-13T07:47:56.760

您需要先创建主页模板，请参见此处[http://wsmithdesign.wordpress.com/2011/01/19/creating-a-custom-wordpress-home-page-template/](http://wsmithdesign.wordpress.com/2011/01/19/creating-a-custom-wordpress-home-page-template/) 然后您可以在主页模板中创建任何功能.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-13T11:50:43.130

请在 function.php 文件中试试这个：

1.  如果您正在使用基于 javascript 的函数：

    ```
            add_action('wp_head', 'functionForHomePage');
            函数函数主页（）{

                 如果（is_home（））{
                    //函数体
                  }
            }

    ```

如果上面的代码不起作用，请尝试：

```
<pre>
                    add_action('wp_head', 'functionForHomePage');
        function functionForHomePage(){  
             if(is_front_page()){
                //function body
              }
        }
</pre> 
```

1.  如果您正在使用 php 函数：

    ```
            add_action('wp', 'functionForHomePage');
            函数函数主页（）{  
                 如果（is_home（））{
                    //函数体
                  }
            }

    ```

如果上面的代码不起作用，请尝试：

```
<pre>
    add_action('wp', 'functionForHomePage');
    function functionForHomePage(){  
             if(is_front_page()){
                //function body
              }
        }

</pre> 
```

实际上我不知道你是如何设置你的 wordpress 网站的，所以我在这里发布你提到的可用信息。

希望这对你有帮助。祝一切顺利 ;）

# algorithm - A-Star算法（重构路径）

> ID：12401481
> 
> 赞同：0
> 
> 时间：2012-09-13T07:32:31.617
> 
> 标签：algorithm, a-star

我已经设法实现了 a* 并且我得到了正确的路径。

问题是我如何重建从头到尾的路径，因为每个节点（从头到尾）都有一个父链接，但不是第一个，所以我的角色不知道先去哪里。

我正在做的是返回封闭列表并从索引 0 开始到 x 直到我到达末尾。这通常效果很好，但我知道必须有另一种方法。

* * *

另外，检查相邻节点的最佳方法是什么？

我已经让每个节点创建一个矩形并查看它是否相交，这就是我知道它们连接的方式。我还对玩家使用这种技术来了解何时到达节点。

谢谢！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T07:54:50.540

你有你的目标节点（一旦找到，你可以简单地缓存它）。

沿着树向上（使用该`parent`字段）直到找到一个没有它的节点，这个节点就是你的根。您通过链接找到的路径是相反顺序的最短路径。

我曾经解决过一个[类似的问题](https://stackoverflow.com/questions/9590299/how-can-i-find-the-actual-path-found-by-bfs)，关于 BFS 而不是 A*

**编辑**：将堆栈反转回原始堆栈的一种简单方法是在从目标到源时将节点放入堆栈中，当您找到源时 - 开始将元素弹出堆栈。

# php - Yii CGridView 批量编辑/更新？

> ID：12401483
> 
> 赞同：1
> 
> 时间：2012-09-13T07:32:33.953
> 
> 标签：php, yii

我想在 Yii CGridView 中编辑/更新多行。说，每一行都有一个复选框和一个编辑/更新按钮，我选择多行并通过单击编辑/更新按钮打开所有选定的行进行编辑和更新。

Yii CGridView 可以做到这一点吗？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T18:44:20.123

使用. `selectableRows`_`CGridView`

根据[CGridView 的 Yii 文档](http://www.yiiframework.com/doc/api/1.1/CGridView#selectableRows-detail)

> 公共整数 $selectableRows;
> 
> 可以选择的表体行数。如果为 0，则表示无法选择行。如果为 1，则只能选择一行。如果为 2 或任何其他数字，则表示可以选择多行。选定的行将有一个名为“selected”的 CSS 类。

您可以使用`$.fn.yiiGridView.getSelection(containerID)`检索选定行的键值。

在 gridview 的顶部或底部添加更多按钮，用于编辑、删除或您需要采取的任何操作，并传递上面检索到的键值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-24T14:24:58.537

如果你想在线编辑行，你可以使用我搞砸的扩展 phaActiveColumn 来支持多行（如果需要，整个表）。

编辑：好吧，当用户单击单元格时，扩展程序基本上会创建一个输入字段来替换网格单元格。该字段将包含单元格的初始值，然后一旦用户按下回车，它就会向控制器发送一个 ajax 调用，要求保存该字段的值，这将是用户的输入。

我的补充是为行中的每个单元格创建一个这样的字段，并将用户输入存储在 javascript 对象中，然后通过对控制器的一次 ajax 调用一次性发送所有内容。支持多行更新（创建足够数量的 javascript 对象）。

如果有人对此有任何兴趣，那就是。

[phaEditColumn2](http://www.simplebills.gr/attachments/public/phaEditColumn2.php.txt)

[phaAbsActiveColumn2](http://www.simplebills.gr/attachments/public/phaAbsActiveColumn2.php.txt)

# c++ - 为 wp7 构建了一个可以在 wp8 和 w8 上运行的游戏？

> ID：12401487
> 
> 赞同：0
> 
> 时间：2012-09-13T07:32:45.173
> 
> 标签：c++, windows-phone-7, xna, windows-8, windows-phone-7.1

我正计划为 windows phone 7.5 构建一个游戏，并且想知道我使用了哪些技术，以便在 windows phone 8 发布时我可以轻松地将我的游戏转换为 windows phone 8 和 windows 8 UI 游戏。我可以构建一个 C++ 原生应用程序吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T08:27:13.613

C++ 不适用于 Windows Phone 7.5。您仅限于托管 .Net (C# VB.Net)。对于游戏，您可以使用纯 Silverlight 或 XNA。如果您希望这款游戏轻松进入 Windows 8 和 Windows Phone 8，您可以使用任一平台。如果使用 Silverlight，请坚持使用基本的 Silverlight 控件，不要使用任何 Toolkit 控件。如果您已经了解 Silverlight，这是一个绝佳的选择。

如果你想学习一些新东西，我推荐使用 XNA。XNA 不适用于直接的 Windows [Phone] 8 应用程序，但有一些工具可以让您的应用程序在 Windows [Phone] 8 上编译和运行。下面是[Channel9](http://channel9.msdn.com/coding4fun/blog/XNA-and-a-Windows-8-Store-game-MonoGame)的一篇文章，讨论了这些工具。

我也可以说我的一个朋友在不到两个小时的时间内就在 Windows 8 上运行了一个复杂的 XNA 游戏。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T13:10:17.457

您只能在 XNA 中编写 Windows Phone 7 游戏。但是，如果您想将其移植到 Windows Phone 8 和 Windows 8，您可以使用[MonoGame](http://monogame.codeplex.com/)。请注意，这也将使您能够将游戏移植到各种平台。由于还没有 SDK，MonoGame 不支持 Windows Phone 8，但它支持 Windows 8。

也可以使用 XNA 和 Unity，这将为您提供更多的可移植性和非常好的工具链。但这目前纯粹是实验性的。

如果您想以 WP7 为目标，请选择 XNA 并稍后移植。XNA 游戏将在 WP8 上运行，但您不能以 WP8 为目标，这意味着您将无法使用某些 WP8 特定功能，例如应用程序购买。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-13T07:39:24.820

`you can write an app using XNA that will run on Windows Phone 8 because Windows Phone 7.X apps will be able to run on Windows Phone 8\. But you cannot write a Windows Phone 8-specific app using XNA`我从[这里](http://www.zdnet.com/xna-support-for-windows-phone-8-is-it-there-or-isnt-it-7000001971/)引用。一切顺利 ：）

# mysql - 用户不能使用他的最后五个密码

> ID：12401489
> 
> 赞同：0
> 
> 时间：2012-09-13T07:32:47.947
> 
> 标签：mysql

我想要一个用户管理系统。我允许用户更改他们的密码，但我应该有限制。例如，新密码不是最近使用的五个密码中的任何一个。

我应该如何维护最近五个密码的列表？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-13T07:38:01.233

我已经在上面发表了评论。但只是为了回答你的问题。您应该创建一个包含,的`old_passwords`表。`user_id``old_password``creation_date`

将首次创建密码的日期存储在主表中。更改密码时，将旧密码和原始日期复制到`creation_date`表`old_passwords`中。然后更新密码，并在主用户表中将日期设置为现在。

您还应该在`user_id, creation_date`.

删除：

```
DELETE FROM old_password
WHERE user_id = ## AND creation_date NOT IN
  (SELECT creation_date
   FROM old_password
   WHERE user_id = ##
   ORDER BY creation_date DESC
   LIMIT 5) 
```

（顺便说一句，您应该测试此代码。）当有人更新密码时，您运行此查询。

# ajax - 在不使用 Ajax 请求的情况下使用 ExtJS 4.1 将文件下载为 CSV 的替代方法？

> ID：12401490
> 
> 赞同：2
> 
> 时间：2012-09-13T07:32:48.303
> 
> 标签：ajax, iframe, extjs, download, extjs4.1

我需要使用 servlet 作为 CSV 文件下载数据。我通过单击 ExtJS 4.1 的导航树通过 Ajax 请求将参数传递给 servlet。有没有其他方法可以将参数传递给 servlet，因为 ajax 无法强制要下载的打开/保存对话框？我必须通过单击导航树本身的子项来传递参数。有人可以帮我吗？

我搜索了解决方案，发现隐藏的 Iframe。我不知道如何将其适应我的？

提前非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T10:49:17.640

使用在命名空间中定义的助手。完成后不要忘记将其删除。

```
helper.util.HiddenForm = function(url,fields){
    if (!Ext.isArray(fields))
        return;
    var body = Ext.getBody(),
        frame = body.createChild({
            tag:'iframe',
            cls:'x-hidden',
            id:'hiddenform-iframe',
            name:'iframe'
        }),
        form = body.createChild({
            tag:'form',
            cls:'x-hidden',
            id:'hiddenform-form',
            action: url,
            target:'iframe'
        });

    Ext.each(fields, function(el,i){
        if (!Ext.isArray(el))
            return false;
        form.createChild({
            tag:'input',
            type:'text',
            cls:'x-hidden',
            id: 'hiddenform-' + el[0],
            name: el[0],
            value: el[1]
        });
    });

    form.dom.submit();

    return frame;
} 
```

像这样使用它

```
helper.util.HiddenForm('my/realtive/path', [["fieldname","fieldValue"]]); 
```

如果服务器回答下载，则会弹出保存窗口。

# php - Flash ActionScript 老虎机 PHP

> ID：12401491
> 
> 赞同：0
> 
> 时间：2012-09-13T07:32:52.300
> 
> 标签：php, actionscript-3, flash

我已经创建了 2 台老虎机，第一个完全没有 flash：第二个几乎完成，使用 php 进行所有赔率和计算，支付等，flash 在这个版本中只是可视的，而不是仅仅显示哪些图标和动画在哪条支付线上的脚本到目前为止，它是一个 15 线视频插槽……我的问题是？

将老虎机以 php 作为后端更好，还是使用 actionSCript 很好...我找不到太多关于这方面的信息，但基本上我想知道我是否在 php 上浪费时间，担心 flash 时的安全性安全的？我不确定我应该继续使用哪个。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-13T07:39:42.370

如果它是关于真钱的，你不能依赖闪存来保证安全。需要服务器端检查 :) 内存破解闪存、发送伪造数据（如果发送任何内容）、代理用您自己的等覆盖 swf 是微不足道的。

# java - Ksoap2 无法在 Android 2.2 上序列化异常（使用用户定义的对象）

> ID：12401494
> 
> 赞同：5
> 
> 时间：2012-09-13T07:32:58.827
> 
> 标签：java, android, runtime-error, android-ksoap2, user-defined-types

我知道有很多关于这个问题的帖子。但是它们是在 Android 3.0 或更高版本上构建的（使用 AsyncTask）。我找不到我的解决方案。从 Web 服务获取信息时出现问题。这是我的代码：

```
package com.example.marport;

import java.io.IOException;
import java.util.ArrayList;
import java.util.Date;
import java.util.Iterator;
import java.util.List;
import java.util.Vector;

import org.ksoap2.SoapEnvelope;
import org.ksoap2.SoapFault;
import org.ksoap2.serialization.SoapObject;
import org.ksoap2.serialization.SoapSerializationEnvelope;
import org.ksoap2.transport.HttpTransportSE;
import org.xmlpull.v1.XmlPullParserException;

import android.app.Activity;
import android.os.Bundle;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.DatePicker;
import android.widget.EditText;
import android.widget.TextView;

public class Ithalatfaturalama extends Activity implements OnClickListener {

    EditText KonteynerNo;
    DatePicker DatePicker;
    Button Sorgula;
    TextView TextResult;
    List<String> toBeSentList;
    Iterator<String> it;
    Date toBeSentDate;
    SoapObject request;
    SoapSerializationEnvelope envelope;
    HttpTransportSE aps;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);
        setContentView(R.layout.ithalatfaturalama);
        defineVars();
        Sorgula.setOnClickListener(this);
    }

    private void defineVars() {
        KonteynerNo = (EditText)findViewById(R.id.etKonteynerBill);
        DatePicker = (DatePicker)findViewById(R.id.datePicker1);
        Sorgula = (Button)findViewById(R.id.bSorgulaBill);
        TextResult = (TextView)findViewById(R.id.tvResultBill);
        toBeSentList = new ArrayList<String>();
        request = new SoapObject(WSDefinition.NAMESPACE,WSDefinition.REPORTS);
        toBeSentDate = new Date();
        envelope = new SoapSerializationEnvelope(SoapEnvelope.VER11);
    }

    @Override
    public void onClick(View v) {
        String containerInfo = KonteynerNo.getText().toString();
        toBeSentList.add(containerInfo);
        it = toBeSentList.iterator();
        String temp = (String) it.next();
        request.addProperty("ids",temp);

        int Day = DatePicker.getDayOfMonth();
        int Month = DatePicker.getMonth();
        int Year = DatePicker.getYear();

        toBeSentDate.setYear(Year);
        toBeSentDate.setMonth(Month);
        toBeSentDate.setDate(Day);

        request.addProperty("date",toBeSentDate);
        envelope.dotNet = false;
        envelope.setOutputSoapObject(request);

        try {
            aps = new HttpTransportSE(WSDefinition.URL);
            aps.call(WSDefinition.REPORTS_ACTION, envelope);
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (XmlPullParserException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }

        try {
            @SuppressWarnings("unchecked")
            Vector<SoapObject> result = (Vector<SoapObject>) envelope.getResponse();
            Vector<MarportAgentReport> responseList = new Vector<MarportAgentReport>();

            for (SoapObject obj : result) {

                MarportAgentReport tmp = new MarportAgentReport(obj);
                responseList.add(tmp);
            }

            String resultStr = "";
            for (int i = 0 ; i < responseList.size();i++){
                MarportAgentReport tmp = responseList.get(i);
                resultStr += (i+1) +".Category = "+tmp.getCategory()+"\n";
                resultStr += (i+1) +".Container = "+tmp.getContainer()+"\n";
                resultStr += (i+1) +".InShip= "+tmp.getInShip()+"\n";
                resultStr += (i+1) +".IsoCode = "+tmp.getIsoCode()+"\n";
                resultStr += (i+1) +".Line = "+tmp.getLine()+"\n";
                resultStr += (i+1) +".Muhur = "+tmp.getMuhur()+"\n";
                resultStr += (i+1) +".OutShip = "+tmp.getOutShip()+"\n";
                resultStr += (i+1) +".Position = "+tmp.getPosition()+"\n";
                resultStr += (i+1) +".Service = "+tmp.getService()+"\n";
                resultStr += (i+1) +".Status = "+tmp.getStatus()+"\n";
                resultStr += (i+1) +".Terminal = "+tmp.getTerminal()+"\n";
            }
            TextResult.setText(resultStr);

        } catch (SoapFault e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } 
    }
} 
```

这是我的对象：

```
package com.example.marport;

import java.io.Serializable;
import java.util.Date;
import java.util.Hashtable;

import org.ksoap2.serialization.KvmSerializable;
import org.ksoap2.serialization.PropertyInfo;
import org.ksoap2.serialization.SoapObject;

/**
 * The persistent class for the CONTENT database table.
 * 
 */
public class MarportAgentReport implements KvmSerializable {

    private static final long serialVersionUID = 1L;
    private String container;
    private String isoCode;
    private String category;
    private String status;
    private String line;
    private String service;
    private Date serviceDate;
    private String terminal;
    private String inShip;
    private String outShip;
    private String muhur;
    private String position;

    public MarportAgentReport() {
    }

    public MarportAgentReport(SoapObject obj)
    {
        obj.getPropertyCount();
        obj.getProperty(0);

        this.setCategory(obj);
        this.setInShip(obj);
        this.setContainer(obj);
        this.setIsoCode(obj);
        this.setLine(obj);
        this.setMuhur(obj);
        this.setOutShip(obj);
        this.setPosition(obj);
        this.setService(obj);
        this.setStatus(obj);
        this.setTerminal(obj);
    }

    public String getContainer() {
        return container;
    }

    public void setContainer(SoapObject obj) {
        try {
            this.container = obj.getPropertyAsString("container");
        } catch (Exception e) {
            this.container = "";
        }
    }

    public String getIsoCode() {
        return isoCode;
    }

    public void setIsoCode(SoapObject obj) {
        try {
            this.isoCode = obj.getPropertyAsString("isoCode");
        } catch (Exception e) {
            this.isoCode = "";
        }
    }

    public String getCategory() {
        return category;
    }

    public void setCategory(SoapObject obj) {
        try {
            this.category = obj.getPropertyAsString("category");
        } catch (Exception e) {
            this.category = "";
        }
    }

    public String getStatus() {
        return status;
    }

    public void setStatus(SoapObject obj) {
        try {
            this.status = obj.getPropertyAsString("status");
        } catch (Exception e) {
            this.status = "";
        }
    }

    public String getLine() {
        return line;
    }

    public void setLine(SoapObject obj) {
        try {
            this.line = obj.getPropertyAsString("line");
        } catch (Exception e) {
            this.line = "";
        }
    }

    public String getService() {
        return service;
    }

    public void setService(SoapObject obj) {
        try {
            this.service = obj.getPropertyAsString("service");
        } catch (Exception e) {
            this.service = "";
        }
    }

    public Date getServiceDate() {
        return serviceDate;
    }

    public void setServiceDate(Date serviceDate) {
        this.serviceDate = serviceDate;
    }

    public String getTerminal() {
        return terminal;
    }

    public void setTerminal(SoapObject obj) {
        try {
            this.terminal = obj.getPropertyAsString("terminal");
        } catch (Exception e) {
            this.terminal = "";
        }
    }

    public String getInShip() {
        return inShip;
    }

    public void setInShip(SoapObject obj) {
        try {
            this.inShip = obj.getPropertyAsString("inShip");
        } catch (Exception e) {
            this.inShip = "";
        }
    }

    public String getOutShip() {
        return outShip;
    }

    public void setOutShip(SoapObject obj) {
        try {
            this.outShip = obj.getPropertyAsString("outShip");
        } catch (Exception e) {
            this.outShip = "";
        }
    }

    public String getMuhur() {
        return muhur;
    }

    public void setMuhur(SoapObject obj) {
        try {
            this.muhur = obj.getPropertyAsString("muhur");
        } catch (Exception e) {
            this.muhur = "";
        }
    }

    public String getPosition() {
        return position;
    }

    public void setPosition(SoapObject obj) {
        try {
            this.position = obj.getPropertyAsString("position");
        } catch (Exception e) {
            this.position = "";
        }
    }

    @Override
    public Object getProperty(int arg0) {
        // TODO Auto-generated method stub
        return null;
    }

    @Override
    public int getPropertyCount() {
        // TODO Auto-generated method stub
        return 0;
    }

    @Override
    public void getPropertyInfo(int arg0, Hashtable arg1, PropertyInfo arg2) {
        // TODO Auto-generated method stub

    }

    @Override
    public void setProperty(int arg0, Object arg1) {
        // TODO Auto-generated method stub

    }

} 
```

和日志：

```
09-13 07:13:30.484: E/AndroidRuntime(251): FATAL EXCEPTION: main
09-13 07:13:30.484: E/AndroidRuntime(251): java.lang.RuntimeException: Cannot serialize: Fri Sep 13 07:12:31 GMT+00:00 3912
09-13 07:13:30.484: E/AndroidRuntime(251):  at org.ksoap2.serialization.SoapSerializationEnvelope.writeElement(SoapSerializationEnvelope.java:687)
09-13 07:13:30.484: E/AndroidRuntime(251):  at org.ksoap2.serialization.SoapSerializationEnvelope.writeProperty(SoapSerializationEnvelope.java:671)
09-13 07:13:30.484: E/AndroidRuntime(251):  at org.ksoap2.serialization.SoapSerializationEnvelope.writeObjectBody(SoapSerializationEnvelope.java:640)
09-13 07:13:30.484: E/AndroidRuntime(251):  at org.ksoap2.serialization.SoapSerializationEnvelope.writeObjectBody(SoapSerializationEnvelope.java:624)
09-13 07:13:30.484: E/AndroidRuntime(251):  at org.ksoap2.serialization.SoapSerializationEnvelope.writeElement(SoapSerializationEnvelope.java:681)
09-13 07:13:30.484: E/AndroidRuntime(251):  at org.ksoap2.serialization.SoapSerializationEnvelope.writeBody(SoapSerializationEnvelope.java:597)
09-13 07:13:30.484: E/AndroidRuntime(251):  at org.ksoap2.SoapEnvelope.write(SoapEnvelope.java:192)
09-13 07:13:30.484: E/AndroidRuntime(251):  at org.ksoap2.transport.Transport.createRequestData(Transport.java:107)
09-13 07:13:30.484: E/AndroidRuntime(251):  at org.ksoap2.transport.HttpTransportSE.call(HttpTransportSE.java:119)
09-13 07:13:30.484: E/AndroidRuntime(251):  at org.ksoap2.transport.HttpTransportSE.call(HttpTransportSE.java:95)
09-13 07:13:30.484: E/AndroidRuntime(251):  at com.example.marport.Ithalatfaturalama.onClick(Ithalatfaturalama.java:81)
09-13 07:13:30.484: E/AndroidRuntime(251):  at android.view.View.performClick(View.java:2408)
09-13 07:13:30.484: E/AndroidRuntime(251):  at android.view.View$PerformClick.run(View.java:8816)
09-13 07:13:30.484: E/AndroidRuntime(251):  at android.os.Handler.handleCallback(Handler.java:587)
09-13 07:13:30.484: E/AndroidRuntime(251):  at android.os.Handler.dispatchMessage(Handler.java:92)
09-13 07:13:30.484: E/AndroidRuntime(251):  at android.os.Looper.loop(Looper.java:123)
09-13 07:13:30.484: E/AndroidRuntime(251):  at android.app.ActivityThread.main(ActivityThread.java:4627)
09-13 07:13:30.484: E/AndroidRuntime(251):  at java.lang.reflect.Method.invokeNative(Native Method)
09-13 07:13:30.484: E/AndroidRuntime(251):  at java.lang.reflect.Method.invoke(Method.java:521)
09-13 07:13:30.484: E/AndroidRuntime(251):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
09-13 07:13:30.484: E/AndroidRuntime(251):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
09-13 07:13:30.484: E/AndroidRuntime(251):  at dalvik.system.NativeStart.main(Native Method) 
```

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T12:51:33.743

你需要写

```
string temp= sorgula.getText().toString(); 
```

在 try 块中从字符串中获取数据。同样，您需要提及您在服务器端调用的所有字段。

它帮助了我。希望它也能帮助你。:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-27T19:33:24.597

好吧，关于您的对象**MarportAgentReport 实现了 KvmSerializable**，首先您需要实现 KvmSerializable 的覆盖方法，然后运行您的代码，您可能会得到一个新的答案！！！！你可以关注这篇文章：[http ://www.sgoliver.net/blog/?p=2594](http://www.sgoliver.net/blog/?p=2594)

祝你好运 ！！！

# java - Java 集排序

> ID：12401499
> 
> 赞同：1
> 
> 时间：2012-09-13T07:33:39.500
> 
> 标签：java, collections, hashmap, set

我们都知道迭代排序的[集合](http://docs.oracle.com/javase/6/docs/api/java/util/Set.html)（除了他们的这种实现）`doesn't guarantee`。所以我试图用下面的示例代码来确保这一点。

```
public static void main(String[] args) throws InterruptedException {
    Map<String,String> lMap=new HashMap<String, String>();
    lMap.put("A", "A");
    lMap.put("B", "B");
    lMap.put("C", "C");
    lMap.put("D", "D");
    lMap.put("E", "E");
    lMap.put("F", "F");
    lMap.put("G", "G");
    lMap.put("H", "H");
    lMap.put("I", "I");
    lMap.put("J", "J");
    lMap.put("K", "K");
    lMap.put("L", "L");
    for(int i=0;i<10000;i++){

        Thread.sleep(100);
        Set<Entry<String, String>> entrYset=lMap.entrySet();
        for(Map.Entry<String, String> e:entrYset){
            System.out.println(e.getKey()+" , "+e.getValue());
        }
                  System.out.println("******************************************************");
    }
} 
```

上面的代码我执行了很多次，发现是按顺序打印记录。

我的问题是如果 java 声称[HashMap](http://docs.oracle.com/javase/6/docs/api/java/util/HashMap.html)是无序的，那么为什么这些记录是按顺序打印的。如果有人可以举例说明，那就太好了。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-13T07:40:09.157

每次的顺序都是相同的，因为字符串的哈希码不会改变，并且您以相同的顺序插入。Hashmap 是确定性的，因此如果您创建相同的 hashmap 并以相同的顺序插入内容，您将始终获得一致的顺序。

Hashmap 不保证此排序将保持**一致**。如果您插入更多项目，则排序可能会随着哈希表的重建而完全改变。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-13T07:38:57.513

当您向地图添加新元素时，通常会发生重新排序。如果地图被调整大小，顺序可能会改变。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-13T07:41:04.783

这是因为字符串哈希码

```
public int hashCode() {
    int h = hash;
    if (h == 0 && count > 0) {
        int off = offset;
        char val[] = value;
        int len = count;

        for (int i = 0; i < len; i++) {
            h = 31*h + val[off++];
        }
        hash = h;
    }
    return h;
} 
```

对于一个字母字符串，它将是 h = 31*0+字符的数值，因此所有哈希码都是 1) 低 2) 与字母的顺序相同。因此，它们很可能会按此顺序退回。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-13T07:40:34.363

你不正确。如果您查看[Javadoc](http://docs.oracle.com/javase/7/docs/api/java/util/HashMap.html)，它会说

```
This class makes no guarantees as to the order of the map; 
In particular, it does not guarantee that the order will remain constant over time 
```

请注意，该文档说在 HashMap 中不能保证关于维护插入顺序的具体保证*。*在大多数情况下，这与内部调整 HashMap 的大小有关。

尝试通过使用[HashMap(int initialCapacity, float loadFactor)](http://docs.oracle.com/javase/7/docs/api/java/util/HashMap.html#HashMap%28int,%20float%29)的构造函数来复制内部调整大小来使用*initialCapacity*和*loadFactor 。*我想你可以看出区别。哦，当我执行您的代码时，我的顺序与您作为问题的一部分发布的顺序完全不同。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-13T07:42:50.810

[哈希表](http://en.wikipedia.org/wiki/Hash_table)使用哈希函数将值放入集合中。因此它的顺序可能会根据哈希值而改变。因此，您将相同的值添加到具有相同哈希函数的哈希表中。这就是为什么你会在你的集合中看到一个订单。尝试更改值或插入值的顺序。它可能会改变结果的顺序。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-13T07:50:47.370

您将“不保证”与“保证不会”混淆。

当然 HashMap 可以有一些内部排序。

文档声称的唯一一件事是您不应该依赖 HashMap 中的项目顺序，如果您这样做（基于与您类似的实验结果） - 好吧，您已被警告。

# .net - 如何知道一列是否在mysql中自动递增

> ID：12401500
> 
> 赞同：0
> 
> 时间：2012-09-13T07:33:48.020
> 
> 标签：.net, ado.net, mysql-connector, information-schema

我想根据数据库中的表生成插入sql语句，所以写了一些代码来做到这一点，DataProvider是MySQL Connector/Net。

```
MysqlConnection conn = new MysqlConnection("...");
DataTable dt = conn.GetSchema("Tables");

//foreach table

DataTable dt = conn.GetSchema("Columns",column_res);

//generate prepared statement sql by the columns. 
```

当表中有 auto_increment 列时，代码无法工作，我必须手动编辑它。有谁知道如何知道一列是 auto_increment 吗？所以我可以自动获取所有需要的sql。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-16T01:35:57.350

对于 MySql 连接器/网络，步骤的 dt 中有一个“EXTRA”列。

```
DataTable dt = conn.GetSchema("Columns",column_res); 
```

如果该列是 auto_increment，则 dt.Rows[i]["EXTRA"] 的值为“自动增量”。

# facebook - 如何使用 Facebook 图形 api 获取新闻提要？

> ID：12401504
> 
> 赞同：5
> 
> 时间：2012-09-13T07:34:03.530
> 
> 标签：facebook, facebook-graph-api, feed

我想使用 Facebook graph api 获取我的新闻提要（就像 facebook 主页上显示的一样）

> [https://graph.facebook.com/me/home](https://graph.facebook.com/me/home)

但是，[facebook api文档](https://developers.facebook.com/docs/reference/api/)说

```
this is an outdated view, does not reflect the News Feed on facebook.com: 
```

还有其他方法吗？

提前致谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-07-06T21:39:10.943

就在这里

```
https://graph.facebook.com/[YOUR_ID]/home 
```

请注意，您几乎可以通过**最近的**顺序获得您在新闻提要中看到的所有内容，而不是按照**热门故事**顺序，这是您在访问自己的新闻提要时获得的默认视图。

另外需要注意的是，您不会在结果中获得提升的故事。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-09-16T04:51:36.110

对于所有想知道这是否仍然有效的人：

> graph.facebook.com/[YOUR_ID]/home

*为此，您需要 read_stream 权限。但是您不会获得此许可，因为它已被弃用。*

不幸的是，根据更改日志（搜索 read_stream） ，端点[https://graph.facebook.com/[YOUR_ID]/home](https://graph.facebook.com/[YOUR_ID]/home)和权限已被[弃用，并且自 2.4 版以来不再起作用。](https://developers.facebook.com/docs/apps/changelog)

**目前没有其他方法可以阅读新闻提要。只能获取用户的帖子。**

请参阅此内容以供参考：[Get Home feed 需要 read_stream 已弃用？](https://stackoverflow.com/questions/32309355/get-home-feed-requires-read-stream-which-is-deprecated)

# php - jquery tokeninput 插件上的错误有“TypeError：术语未定义”

> ID：12401507
> 
> 赞同：0
> 
> 时间：2012-09-13T07:34:26.527
> 
> 标签：php, javascript, jquery

```
<input type="text" id="demo-input-prevent-duplicates" name="targ_country" />
 <script type="text/javascript">
    $(document).ready(function() {
        var host = window.location.protocol+"//"+window.location.hostname;
        jQuery("#demo-input-prevent-duplicates").tokenInput(host+"/forms/campaign_location.php?action=country", {
        preventDuplicates: true,
        theme: "facebook",
        crossDomain: true
    });
    });
</script> 
```

**/forms/campaign_location.php 文件**

```
<?php
if( isset( $_GET['action'] ) && isset( $_GET['q'] ) ) {

    $search = $db->clean( $_GET['q'] );
    $query = sprintf("SELECT CountryId, Country from countries WHERE Country LIKE '%%%s%%' ORDER BY Country DESC LIMIT 10", mysql_real_escape_string($_GET["q"]));
    $result = array();
    $rs = mysql_query($query) or die( mysql_error() );

    while( $row = mysql_fetch_object( $rs ) ) {
        $result[] = $row;
    }

    # JSON-encode the response
    $json_response = json_encode($result);

    if($_GET["callback"]) {
        $json_response = $_GET["callback"] . "(" . $json_response . ")";
    }       
    echo $json_response;
}
?> 
```

这是我得到的错误： ![在此处输入图像描述](../Images/9f54ead6c02e9af47d41a272368bc7cb.png) 这是第 783 行的代码： ![在此处输入图像描述](../Images/6d5bbd774c83b30c7c011da08e122727.png) 这里的问题似乎是什么？我只是按照 tokeninput 的 src 文件夹中的所有说明进行操作。我什至下载了他们在这个网站上的最新版本：[https](https://github.com/loopj/jquery-tokeninput) ://github.com/loopj/jquery-tokeninput 。

您的帮助将不胜感激和奖励！

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-13T08:02:49.407

将以下选项添加到 tokenInput 调用：

```
propertyToSearch: "Country" 
```

# android - 从 Android 应用程序中的谷歌地图获取最近的公交车站

> ID：12401510
> 
> 赞同：1
> 
> 时间：2012-09-13T07:34:27.813
> 
> 标签：android, google-maps, location, google-places-api

我正在开发一个 Android 应用程序，我需要在其中实现以下目标。

1.  获取设备的当前位置（坐标） - 完成
2.  在给定半径内以设备位置为中心搜索最近的公交车站并列出它们。

我需要第二件事的帮助。有什么方法可以从 Android 应用程序中的 Google Map 获取最近的公交车站？我可以使用 Google Places API 来实现吗？（官方页面说它仍然是实验性的）。如果是，如何？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T16:33:56.887

[我可以通过参考Davy 的技术博客文章和](http://ddewaele.blogspot.in/2011/05/introducing-google-places-api.html)[Github](https://github.com/ddewaele/GooglePlacesApi)中提供的代码示例来成功实现这些

谢谢你的帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-16T21:29:33.760

对您的坐标进行反向地理编码：

[https://developers.google.com/maps/documentation/geocoding/#ReverseGeocoding](https://developers.google.com/maps/documentation/geocoding/#ReverseGeocoding)

然后做这样的搜索：

[https://maps.google.com/maps?q=the_address_obtain_with_reverse_geocoding&output=json](https://maps.google.com/maps?q=transit)附近的中转站

# tcxgrid - cxgrid 多行列

> ID：12401512
> 
> 赞同：1
> 
> 时间：2012-09-13T07:34:41.237
> 
> 标签：tcxgrid

如何在cxgrid中输出一个“多行列”（不知道术语是否正确）？输出应该是这样的：

```
Header 1         Header 3           Header 5

Header 2         Header 4           Header 6

----

Data 1.1         Data 1.3           Data 1.5

Data 1.2         Data 1.4           Data 1.6

Data 2.1         Data 2.3           Data 2.5

Data 2.2         Data 2.4           Data 2.6 
```

等等...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T14:03:38.600

是的，有可能做到这一点。使用`TcxDBBandedTableView`您可以将列放置在多行中。为了完成这个删除它的默认表视图并添加 TcxDBBandedTableView，然后将其绑定到数据源并通过自己测试来更改列位置（通过拖动它）。

# c# - 全局鼠标钩子突然没有被调用

> ID：12401513
> 
> 赞同：2
> 
> 时间：2012-09-13T07:34:41.737
> 
> 标签：c#, mouse, hook

我的应用程序中有一个全局鼠标钩子，但一段时间后（在某些计算机上）鼠标钩子程序（MouseHookProc）突然停止被调用，我不知道为什么，我已经搜索了原因，似乎它有一些东西与win7的LowLevelHooksTimeout有关

```
[DllImport("user32.dll", CharSet = CharSet.Auto, SetLastError = true)]
internal static extern IntPtr SetWindowsHookEx(int idHook, HookProc lpfn, IntPtr hMod, uint dwThreadId);

private void AddMouseHook()
{
    MouseHookProcedure = new User32.HookProc(MouseHookProc);
    hMouseHook = SetWindowsHookEx(WH_MOUSE_LL, MouseHookProcedure, (IntPtr)null, 0);
} 
```

修复似乎是在新线程中添加鼠标钩子，但如果我这样做，那么鼠标钩子不会从一开始就被调用，我可以验证 SetWindowsHookEx 确实返回值 > 0 所以钩子被正确添加，但是再次，如果它是从另一个线程添加的，那么“MouseHookProc”甚至不会被调用一次，如果从主线程启动那么没问题，但会在一段时间后消失（主要是在一些繁重的处理之后我的鼠标会倾向于冻结然后在那之后“ MouseHookProc" 将不再被调用

```
ThreadStart ts = new ThreadStart(AddMouseHook);
Thread th = new Thread(ts);
th.Start(); 
```

# asp.net - 局部视图中的部分

> ID：12401521
> 
> 赞同：0
> 
> 时间：2012-09-13T07:35:21.327
> 
> 标签：asp.net, asp.net-mvc

我有一个布局 _Layout.cshtml，最后我有：

```
 ...
        ...
        @RenderSection("mySection", required: false)
    </body>
</html> 
```

在我的观点结束时，我有：

```
@section mySection {
    ...
    ...
} 
```

我的观点是使用部分观点。当我尝试将内容添加到 mySection 部分时 - 什么也没发生。在我的部分观点中：

```
@section mySection {
   ....
   .... 
} 
```

部分视图中的部分内容未呈现。PartialViews 中是否允许使用部分？如果不是，为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T11:33:00.797

今天正好遇到了这个问题，但正如@AliRıza Adıyahşi 引用@Darin Dimitrov 所言，它无法从局部视图访问布局视图的部分。在我的情况下，解决方案是简单地将脚本放在布局页面上。

根据我的经验，我发现拥有一个缩小的 JS 文件比拥有内联脚本更容易。甚至可以有单独的文件以使开发更容易，然后在部署时将它们与 minify 一起批处理。

# android - 使用 getApplicationContext() 时出错

> ID：12401522
> 
> 赞同：2
> 
> 时间：2012-09-13T07:35:39.653
> 
> 标签：android, google-cloud-messaging

我有这个错误：

> 无法从 ContextWrapper 类型对非静态方法 getApplicationContext() 进行静态引用

请找到有错误 registerInGCMService(Context context) 的方法

班级：

```
package com.example.elarabygroup;

import com.google.android.gcm.GCMBaseIntentService;
import com.google.android.gcm.GCMRegistrar;

import android.content.Context;
import android.content.Intent;
import android.os.PowerManager;
import android.provider.Settings.Secure;
import android.util.Log;

public class GCMIntenetService extends GCMBaseIntentService {
    private static final String GCM_SENDER_ID = "1111111111";

    public GCMIntenetService() {
        super();
    }

    @Override
    protected void onRegistered(Context context, String registrationId) {
        Log.i(TAG, "Device registered: regId = " + registrationId);
        GCMRegistrar.setRegisteredOnServer(context, true);
    }

    @Override
    protected void onUnregistered(Context context, String registrationId) {
        Log.i(TAG, "Device unregistered");
        if (GCMRegistrar.isRegisteredOnServer(context)) {
            String regId = "";
            Log.i(TAG, "unregistering device (regId = " + regId + ")");
            GCMRegistrar.setRegisteredOnServer(context, false);
        } else {
            // This callback results from the call to unregister made on
            // ServerUtilities when the registration to the server failed.
            Log.i(TAG, "Ignoring unregister callback");
        }
    }

    @Override
    protected void onError(Context context, String errorId) {
        // push error processing
    }

    @Override
    protected void onMessage(Context arg0, Intent arg1) {
        Log.i(TAG, "Received message");
        Log.i(TAG, "EXTRAS" + arg1.getExtras());
        // String message = getString(R.string.gcm_message);
        generateNotification(arg0,
                arg1.getStringExtra("Please download our new updates"));
        // notifies user about message

    }

    private void generateNotification(Context arg0, String stringExtra) {
        // TODO Auto-generated method stub

    }

    public static void registerInGCMService(Context context) {

        GCM_SENDER_ID = Secure.getString(context.getApplicationContext().getContentResolver(),
                Secure.ANDROID_ID);

        if (!checkIsGCMServiceAvailable(context)) {
            return;
        }
        final String regId = GCMRegistrar.getRegistrationId(context);
        if (regId.equals("")) {
            try {
                GCMRegistrar.register(context, GCM_SENDER_ID);
            } catch (Exception ex) {
            }
        } else {
            // Already registered
        }

    }

    public static boolean checkIsGCMServiceAvailable(Context context) {
        try {
            GCMRegistrar.checkDevice(context);
            GCMRegistrar.checkManifest(context);
            return true;
        } catch (Throwable th) {
            return false;
        }
    }

} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-13T07:37:06.493

您可能的意思是：

```
context.getApplicationContext() 
```

代替

```
getApplicationContext() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T07:40:48.223

或者你可以这样尝试 -

```
GCM_SENDER_ID = Secure.getString(context.getContentResolver(),
            Secure.ANDROID_ID); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-03T11:05:14.817

当我们在**静态方法中使用****“getConTentResolver()”**时，有时会出现此错误，例如：

 **```
 public static void Mthd()
 {
   Cursor cursor =getContentResolver().query(uri, null, null, null, null);
   //ur next code
  } 
```

所以，在这种情况下它会报错，因此我们必须使函数**非静态**。**

# javascript - 为什么 javascript:void(0) 在 Firefox 中不起作用

> ID：12401524
> 
> 赞同：0
> 
> 时间：2012-09-13T07:35:45.103
> 
> 标签：javascript, firefox, anchor

为什么这个简单的链接示例在 Firefox 中不起作用？它在 IE 和 Chrome 中运行。 我正在使用 Windows
[XP.js 小提琴示例。](http://jsfiddle.net/u6bKr/)
我的 Firefox 版本是 16.0。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-13T07:38:22.657

您的小提琴示例不应该在任何浏览器中工作，因为您已经`getItems()`在`onload`处理程序中定义了作为 jsfiddle 默认值（如左侧设置）的方法，这反过来意味着它不在内联`onclick="getItems()"`属性的范围内。

如果你通过选择`no wrap (head)`而不是修复它，它可以在 FF 中工作`onLoad`，从而使你的函数全局化：http: [//jsfiddle.net/u6bKr/1/](http://jsfiddle.net/u6bKr/1/)

（请注意，这与 无关`href="javascript:void(0);"`）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-13T07:55:20.463

我的研究`getItems()`表明在某些情况下这个函数被定义为*原生函数*。我不知道为什么。为避免此麻烦，请尝试重命名函数`getItems`。

[http://jsfiddle.net/u6bKr/3/](http://jsfiddle.net/u6bKr/3/)

**更新：**

`window.`正如 Boris Zbarsky 在评论中指出的那样，在添加之前`getItems()`（例如）也可以避免这种麻烦`window.getItems()`。

# sql - SQL Server 2012 存储过程错误消息 102

> ID：12401525
> 
> 赞同：-5
> 
> 时间：2012-09-13T07:35:51.547
> 
> 标签：sql, stored-procedures, sql-server-2012

我使用 SQL Server Management Studio 2012。当我尝试创建存储过程并执行它时，它每次都返回错误。我真的不知道出了什么问题。

例如：

```
use AdventureWorks2012
CREATE PROCEDURE test () SELECT * FROM [Sales].[SalesPerson] 
```

错误是：

> *消息 102，级别 15，状态 1，过程测试，第 1 行
> ')' 附近的语法不正确。*

即使我只是写`CREATE PROCEDURE TEST`

它会返回错误吗？我究竟做错了什么 ？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-13T07:41:29.450

试试这个代码：

```
CREATE PROCEDURE test 
as        
begin               
  SELECT * FROM [Sales].[SalesPerson]
end
go 
```

`()`如果您的过程不需要参数，则必须删除，并添加`as`可选`begin-end`（它更有用）。

如果您想在将来为您的过程添加参数：

```
CREATE PROCEDURE test 
(
  @param1 int
)
as        
begin               
  SELECT * FROM [Sales].[SalesPerson]
  where id = @param1
end
go 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-13T07:39:54.727

`AS`创建过程时应该有关键字

```
use AdventureWorks2012
GO

CREATE PROCEDURE test 
AS
SELECT * FROM [Sales].[SalesPerson]
GO 
```

此外，`BEGIN and END`如果您有多个查询，您可以添加。

# backbone.js - Backbone.js + 全局事件调度器 + require.js：怎么做？

> ID：12401530
> 
> 赞同：16
> 
> 时间：2012-09-13T07:36:06.880
> 
> 标签：backbone.js, requirejs, eventaggregator

我有许多主干模型，按集合组织并连接到它们相应的视图和/或视图集合。其中一些不属于同一集合的模型需要触发另一个模型（可能不止一个）感兴趣的事件。

[我认为，推荐的处理方法是这里](http://lostechies.com/derickbailey/2012/04/03/revisiting-the-backbone-event-aggregator-lessons-learned/)和其他地方描述的“全局事件调度程序/聚合器” 。

但是，我也碰巧在使用 require.js，这似乎违背了将调度程序/聚合器附加到应用程序的命名空间对象的想法——或者我在这里错了吗？

所以我的问题是：使用 require.js 如何让多个不同的主干模型触发将由另一个模型处理的事件？

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-09-13T11:42:00.543

与@Andreas 提出的类似解决方案，但没有 Backbone.Marionette（尽管如此受到很大启发，[请参阅问题中链接的文章](http://lostechies.com/derickbailey/2012/04/03/revisiting-the-backbone-event-aggregator-lessons-learned/)）。

您所要做的就是定义一个模块，该模块创建一个事件侦听器的单例，并在您想要触发事件或侦听此事件的模块中要求该对象。

假设您有*app/channel.js*定义您的频道

```
define(['backbone', 'underscore'], function (Backbone, _) {
    var channel = _.extend({}, Backbone.Events); 
    return channel;
}); 
```

然后，您可以通过以下方式将其用作*侦听器*

```
require(['app/channel'], function (channel) {
    channel.on('app.event', function () {
        console.log('app.event');
    });
}); 
```

您可以通过以下方式触发此频道上的事件

```
require(['app/channel'], function (channel) {
    channel.trigger('app.event');
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T09:59:38.167

我们使用 Marionettes `app.vent`（它是我们应用程序的全局事件发送器）和 require js，它工作得非常好。

**应用程序**

```
define(, function(){
  return new Backbone.Marionette.Application();
}) 
```

**型号1**

```
define(['app'], function(app){
  return Backbone.Marionette.Model.extend({
    initialize: function(){
      this.bindTo('app.vent', 'create:model2', this.toSomething, this);
    }
  })
}) 
```

**模型2**

```
define(['app'], function(app){
  return Backbone.Marionette.Model.extend({
    initialize: function(){
      app.vent.trigger('create:model2', this);
    }
  })
}) 
```

# javascript - Windows Gadget 使用 Javascript 从 Excel 中读取特定信息

> ID：12401534
> 
> 赞同：1
> 
> 时间：2012-09-13T07:36:15.440
> 
> 标签：javascript, windows-desktop-gadgets

您好我正在尝试编写一个从 Excelsheet 中读取信息的 Windows 小工具。Excelsheet 在 A2:A366 列中包含全年的日期，格式化后的列是 B1:Q1 员工的姓名。

该小工具用于显示当前日期和标记为缺席的人。对于一个人缺席的每一天，该单元格都标有 X。

我不是 Javascript 程序员。并且需要帮助。我想我已经有了基本的设置，我希望你能帮助我找到我的缺失。

解释：

使用 getToday 函数，我试图从 PC 获取日期并将其格式化为我想在 A 列中查找的字符串，该列设置为数组。相同的功能是为了给我返回它应该在其中查找 X 的正确行。如果它找到一个 X，它应该返回列的名称，即员工的姓名。

```
 function getToday (){
    var today;
    var currentDate = new Date()
    var day = currentDate.getDate()
    var month = currentDate.getMonth() + 1
    var year = currentDate.getFullYear()
    today = d.toString (day + "." + month + "." + year);

    } 
    function refreshData(){
        oExcel = new ActiveXObject('Excel.Application');
        oWkBooks = oExcel.Workbooks.Open("C:\\Program Files\\Windows Sidebar\\Gadgets\\ExcelGadget.Gadget\\test.xlsx");
        oExcelSheet = oWkBooks.Worksheets();
        oExcelSheet.Activate();
        oExcel.ActiveWorkbook.RefreshAll();
        oExcel.ActiveWorkbook.SaveAs("C:\\Program Files\\Windows Sidebar\\Gadgets\\ExcelGadget.Gadget\\test.xlsx");
        oWkBooks.Close();
        location.reload();
    }

    function fetchData() {
    function fetchData() {

    $('#msg').html("Loading...");

        $('#msg').show();

        var oExcel;
        var oExcelSheet;
        var oWkBooks;
        var cols;
        oExcel = new ActiveXObject('Excel.Application');
        oWkBooks = oExcel.Workbooks.Open("C:\\Program Files\\Windows Sidebar\\Gadgets\\ExcelGadget.Gadget\\test.xlsx");

    }

    function findToday(stringArray){
            for (var j=0; j<stringArray.length; j++) {
            if (stringArray[j].match (var today) return cell;
            return -1;
    }

    function returnAbwesentheit() {

        var name = name.arr;
        for (i=2;i<x.length;i==23) {
        if ("cell"=="x") {
        document.write (Name(cell));
        else 
        return null;

        }

    } 
```

：：更新：：

我灵光一现。我想我让这对自己来说很困难。也许我可以让excel来查找日期和缺席的人。然后我只会在 Windows Gadget 中使用 Javascript 生成结果。

# python - 根据另一个文件中的值过滤一个文件

> ID：12401535
> 
> 赞同：0
> 
> 时间：2012-09-13T07:36:19.037
> 
> 标签：python, file, text, filter

Python初学者，我已经熟悉阅读文件并进行基本操作。但是现在我想根据另一个文件过滤一个文件。我想过滤 file1 以删除 file2 的第 3 列中得分低于 100000 的任何行。我有一个主数据文件（file1）：

```
7   303 0.207756232686981
16  23  0.208562019758507
6   57  0.208727272727273
7   80  0.209065354884048
11  124 0.209500609013398 
```

我想制作一个与此相同的新数据文件，但根据第二个文件（file2）中的信息删除分数低于 100000 的任何行：

```
chr7    303 292526
chr16   23  169805
chr6    57  62822
chr11   124 320564
chr7    80  300291 
```

两个文件的前两列包含确定该行是否在两个文件中引用相同大小写的信息。然而，第二个文件在每个数字之前添加了“chr”（这个“chr”可以忽略）。第一个文件中的所有行都存在于第二个文件中，但第二个文件中的某些行不在第一个文件中，可以忽略。

所以看看上面的例子：

```
6   57  0.208727272727273 
```

将从新输出中删除，因为它在文件 2 的第 3 列中的值低于 100,000，而第一个文件中的所有其他行将包括在内，因为您的值超过 100000。对于输出文件维护与文件 1 相同的行顺序。

任何帮助将不胜感激。我通常使用的python结构

```
for line in inputfile:
        line = line.rstrip() 
        fields = line.split("\t") 
```

所以建立这个结构的答案会特别好。

如果问题不清楚，请告诉我。

到目前为止的解决方案：

```
#!/usr/bin/env python

f2 = open( '/mnt/genotyping/CT/GreatApes/HKA/callability/callable_sites_per_region_500Kb.txt', 'r')
d2 = {}
print f2
for line in f2:
    line = line.rstrip()
    fields = line.split("\t")
    key = (fields[0].replace('chr', ''), fields[1])
    d2[key] = int(fields[2])

f1 = open( '/mnt/genotyping/CT/GreatApes/HKA/Barcelona_approach/500kb/cov_5/Homo-Gorilla/R_plots/Gorilla_genome_dist_cov5.txt', 'r')
for line in f1:
    line = line.rstrip()
    fields = line.split("\t")
    if 'region' not in line:
        key = (fields[0], fields[1])
        if d2[key] >= 100000:
            print line 
```

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T07:53:33.133

我使用字符串而不是文件，但原理保持不变。1st，用file2的键创建一个dict：

```
>>> f2 = """chr7\t303\t292526
chr16\t23\t169805
chr6\t57\t62822
chr11\t124\t320564
chr7\t80\t300291"""
>>> d2 = {}
>>> for line in f2.split('\n'):
    line = line.rstrip()
    fields = line.split("\t")
    key = (fields[0].replace('chr', ''), fields[1])
    d2[key] = int(fields[2])

>>> d2
{('7', '303'): 292526, ('7', '80'): 300291, ('16', '23'): 169805, ('6', '57'): 62822, ('11', '124'): 320564} 
```

然后只打印 file1 检查值的行`d2`：

```
>>> f1 = """7\t303\t0.207756232686981
16\t23\t0.208562019758507
6\t57\t0.208727272727273
7\t80\t0.209065354884048
11\t124\t0.209500609013398"""
>>> for line in f1.split('\n'):
    line = line.rstrip()
    fields = line.split("\t")
    key = (fields[0], fields[1])
    if d2[key] >= 100000:
        print line

7   303 0.207756232686981
16  23  0.208562019758507
7   80  0.209065354884048
11  124 0.209500609013398
>>> 
```

# weblogic - 在 WebLogic Server 10.3.5.0 中使用 ANT 脚本的 weblogic.appc 命令失败

> ID：12401537
> 
> 赞同：1
> 
> 时间：2012-09-13T07:36:25.990
> 
> 标签：weblogic, weblogic-10.x

我正在将应用程序从 weblogic 8.1 迁移到 weblogic 10.3.5 版本。通过ant脚本构建应用程序时；我收到以下错误：-

weblogic.appc.run：

```
[java] Usage: java weblogic.appc [options] <ear, jar, war or rar file or directory> 
[java] 
[java] where options include: 
[java] -help Print the standard usage message. 
[java] -version Print version information. 
[java] -output <file> Specifies an alternate output archive or 
[java] directory. If not set, output will be 
[java] placed in the source archive or directory. 
[java] -plan <file> Specifies an optional deployment plan. 
[java] -forceGeneration Force generation of EJB and JSP classes. 
[java] Without this flag the classes may not be 
[java] regenerated if it is determined to be 
[java] unnecessary. 
[java] -quiet Turns off output except for errors 
[java] -lineNumbers Add JSP line numbers to generated class 
[java] files to aid in debugging. 
[java] -library <file> Comma-separated list of libraries. Each 
[java] library may optionally set its name and 
[java] versions, if not already set in its 
[java] manifest, using the following syntax: <file> 
[java] [@name=<string>@libspecver=<version> 
[java] @libimplver=<version|string>] 
[java] -librarydir <dir> Registers all files in specified directory 
[java] as libraries. 
[java] -writeInferredDescriptors Write out the descriptors with inferred 
[java] information including annotations. 
[java] -manifest <file> Include manifest information from specified 
[java] manifest file. 
[java] -clientJarOutputDir <dir> Specifies a directory to put generated 
[java] client jars. 
[java] Exception in thread "main" java.lang.NoClassDefFoundError: weblogic/j2ee/J2EELogger 
[java] -keepgenerated Keep the generated .java files. 
[java] -verbose Compile with verbose output. 
[java] -classpath <path> Classpath to use. 
[java] -source <source> Source version. 
[java] -target <target> Target version. 
[java] -advanced Print advanced usage options. 
[java] 
[java] at weblogic.application.compiler.Appc.runBody(Appc.java:205) 
[java] at weblogic.utils.compiler.Tool.run(Tool.java:158) 
[java] at weblogic.utils.compiler.Tool.run(Tool.java:115) 
[java] at weblogic.application.compiler.Appc.main(Appc.java:262) 
[java] at weblogic.appc.main(appc.java:14) 
[java] Caused by: java.lang.ClassNotFoundException: weblogic.j2ee.J2EELogger 
[java] at java.net.URLClassLoader$1.run(URLClassLoader.java:202) 
[java] at java.security.AccessController.doPrivileged(Native Method) 
[java] at java.net.URLClassLoader.findClass(URLClassLoader.java:190) 
[java] at java.lang.ClassLoader.loadClass(ClassLoader.java:307) 
[java] at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:301) 
[java] at java.lang.ClassLoader.loadClass(ClassLoader.java:248) 
[java] ... 5 more 
```

下面是我正在运行的 ANT 脚本。

```
<java classname="weblogic.appc" failonerror="true" fork="true" maxmemory="512m"> 
  <arg value="-disableHotCodeGen"/>
  <arg line="-verbose"/>
  <arg line="${weblogic.arg.line.compiler}"/>
  <arg line="-compilerclass com.sun.tools.javac.Main"/>
  <arg line="${weblogic.appc.options}"/>
  <arg value="${compile.dir}/${ejb.domain}-ejbc.jar"/>
  <arg value="${project.dir}/src/java"/>
  <arg value="${compile.dir}/ejb/${ejb.domain}"/>
  <classpath>
    <path refid="weblogic.classpath"/>
    <path refid="project.classpath"/>
    <fileset dir="${java.home}/../lib" includes="tools.jar"/>
  </classpath>
</java> 
```

即使我找不到 java.lang.NoClassDefFoundError: weblogic/j2ee/J2EELogger 。哪个罐子支持这个？我也正确设置了 PATH 和 CLASSPATH。

如果我需要更多信息，请告诉我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T12:11:41.220

简而言之，确保你有`/wlserver_10.3/server/lib/weblogic.jar`你的`weblogic.classpath`变量。

未加载的类来自`/modules/com.oracle.core.weblogic.msgcat_1.1.0.0.jar`. 这应该通过 MANIFEST.MF 文件导入`/wlserver_10.3/server/lib/weblogic.jar`。假设您的 weblogic.jar 中应该加载`weblogic.classpath`该类。`weblogic.j2ee.J2EELogger`

`weblogic.jar`加载`/modules/features/weblogic.server.modules_10.3.5.0.jar`，然后通过它自己的 MANIFEST.MF 加载`/modules/com.oracle.core.weblogic.msgcat_1.1.0.0.jar`。

您的 ant 配置中还有多个`<arg line="">`标签。您将需要修改这些。

```
<arg line="-disableHotCodeGen -verbose -compilerclass com.sun.tools.javac.Main ${weblogic.appc.options} ${compile.dir}/${ejb.domain}-ejbc.jar ${project.dir}/src/java ${compile.dir}/ejb/${ejb.domain}"> 
```

下面的另一个示例是我当前如何在我的 ant 构建中执行 appc。

```
<target name="appc" depends="compile,jar">
  <java classname="weblogic.appc" fork="yes" jvm="${bea.java.home}/bin/java" maxmemory="1G" failonerror="true">
    <arg line="${archive.jarfile} -J-Xmx1g"/>
    <classpath>
      <pathelement path="${container.cp};${server.additional.classpath}"/>
      <pathelement path="${archive.jarfile}"/>
    </classpath>
  </java>
</target> 
```

此外，使用开关运行 ant`-v`以查看正在发出的命令，它应该有助于找到您的问题。

# tridion - Tridion 结构组本地化权限问题

> ID：12401541
> 
> 赞同：2
> 
> 时间：2012-09-13T07:36:35.390
> 
> 标签：tridion, tridion-2011

我正在使用 SDL Tridion 2011，需要取消用户对结构组进行本地化的权限，这样他就不会通过本地化结构组的名称对其进行任何更改。但是，即使在删除权限和权限并将结构组设置为“只读”之后，用户仍然可以通过右键单击结构组并转到属性来本地化结构组。如果有任何解决方案，请提供帮助。

另外，有什么方法可以限制用户取消发布或更新页面？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-27T07:56:17.643

结构组的权限控制您可以对其包含的内容执行的操作。改为删除父结构组中的本地化权限。

为防止取消发布，您可以执行以下任一操作：

1.  删除`Read`权限。
2.  转到相关出版物属性中的“安全”选项卡，并删除`Publish to Content Distributor`
3.  转到相关目标类型的安全选项卡，并删除`Use Target Type`权限

要防止他们更新页面，请删除写入权限，但请注意，编辑页面允许他们修改页面组成，并且如果此人有权修改相关组件，则控制此权限不会阻止内容更改。

如果这些都不够，那么您将需要使用事件系统或工作流实现自定义解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T08:31:13.130

检查结构组的属性并转到安全选项卡。检查哪些用户/组具有本地化权限，然后查看您的用户是否是这些组的成员。组可以是其他组的成员，因此您可能需要递归检查以查找允许此功能的位置。

还要确保用户不是管理员。

为了防止用户取消发布页面，您需要确保他们在发布级别没有“发布到内容分发者”权限。如果他们需要能够发布页面，但不能取消发布，您将需要通过编写事件系统来解决这个问题。

为了防止他们更新页面，您需要考虑包含结构组的写入权限。

# ios - Tapku 日历 - 希望在用户选择日期时弹出视图

> ID：12401545
> 
> 赞同：1
> 
> 时间：2012-09-13T07:36:45.580
> 
> 标签：ios, xcode, calendar, tapku

我在我的项目中使用 Tapku 日历。我已经准备好并标记了所有日期。我面临的唯一问题是，我希望在用户选择其中一个预定义日期时出现一个弹出窗口。我如何在“if 语句”中解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T18:47:30.140

如果不知道如何存储标记的日期，很难对您的问题给出具体答案。Tapku Calendar 默认为一个“dataArray”，它保存需要在其上显示标记的日期的布尔值（以 NSNumbers 的形式）。传递此数组以在日历上创建标记。您可以对 if 语句使用相同类型的逻辑。

然后你会有类似的东西：

```
-(void)calendarMonthView:(TKCalendarMonthView*)monthView didSelectDate:(NSDate*)date{

    if([[dataArray objectAtIndex:date.dateinformation.day - 1]boolValue])
        {
            //Pop view code
        }

 } 
```

dataArray 存储当前显示的月份中每一天的布尔值。由于天数从 1 开始到 28-31，由于数组从 0 开始，我们必须减去 1。您可以这样做的另一种方法是检查 dataDictionary 中是否有任何对象作为 didSelectDate。

我没有尝试过这个特定的代码，但它可以给你一些想法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-06T11:01:23.083

为此，您可以将标记的日期保存在数组中，并采用以下方法：

```
- (void)calendarMonthView:(TKCalendarMonthView *)monthView didSelectDate:(NSDate *)d {
NSLog(@"selected Date IS - %@",d);
} 
```

您可以将日期“d”与所选日期匹配，如果日期相同，则可以显示警报或执行所需的任何操作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-15T17:56:23.813

我假设您使用的是月视图`TKCalendarMonthTableViewController`而不是日视图。每次用户点击月视图网格中的磁贴时，`calendarMonthView:didSelectDate`都会调用该方法。你需要在那里实现你的逻辑。

```
- (void) calendarMonthView:(TKCalendarMonthView*)monthView didSelectDate:(NSDate*)date{
    // if your predefined date = passed date, show your popup (UIAlertView?)
} 
```

# java - 货币值字符串以逗号分隔

> ID：12401547
> 
> 赞同：6
> 
> 时间：2012-09-13T07:36:55.853
> 
> 标签：java, string-split

我有一个字符串，其中包含格式化的货币值`45,890.00`，如`45,890.00,12,345.00,23,765.34,56,908.50`..

我想提取和处理所有货币值，但无法找出正确的正则表达式，这就是我尝试过的

```
public static void main(String[] args) {
    String currencyValues = "45,890.00,12,345.00,23,765.34,56,908.50";
    String regEx = "\\.[0-9]{2}[,]";
    String[] results = currencyValues.split(regEx);
    //System.out.println(Arrays.toString(results));
    for(String res : results) {
        System.out.println(res);
    }
} 
```

这个的输出是：

```
45,890 //removing the decimals as the reg ex is exclusive
12,345
23,765
56,908.50 
```

有人可以帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-13T07:43:58.900

你需要一个正则表达式 "look behind" `(?<=regex)`，它匹配，但确实消耗：

```
String regEx = "(?<=\\.[0-9]{2}),"; 
```

这是您的测试用例现在工作：

```
public static void main(String[] args) {
    String currencyValues = "45,890.00,12,345.00,23,765.34,56,908.50";
    String regEx = "(?<=\\.[0-9]{2}),"; // Using the regex with the look-behind
    String[] results = currencyValues.split(regEx);
    for (String res : results) {
        System.out.println(res);
    }
} 
```

输出：

```
45,890.00
12,345.00
23,765.34
56,908.50 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-13T07:50:21.847

您还可以使用不同的正则表达式来匹配您正在搜索的模式（那么分隔符是什么并不重要）：

```
 String currencyValues = "45,890.00,12,345.00,23,765.34,56,908.50,55.00,345,432.00";
 Pattern pattern = Pattern.compile("(\\d{1,3},)?\\d{1,3}\\.\\d{2}");
 Matcher m = pattern.matcher(currencyValues);
 while (m.find()) {
    System.out.println(m.group());
 } 
```

印刷

```
45,890.00
12,345.00
23,765.34
56,908.50
55.00
345,432.00 
```

正则表达式的解释：

*   `\\d`匹配一个数字
*   `\\d{1,3}`匹配 1-3 位数字
*   `(\\d{1,3},)?`可选地匹配 1-3 位数字，后跟逗号。
*   `\\.`匹配一个点
*   `\\d{2}`匹配 2 位数字。

但是，我还要说，用逗号作为分隔符可能不是最好的设计，并且可能会导致混淆。

编辑：

正如@tobias_k 指出的那样：`\\d{1,3}(,\\d{3})*\\.\\d{2}`将是一个更好的正则表达式，因为它会正确匹配：

*   1,000,000,000.00

并且它不会错误地匹配：

*   1,00.00

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-09-24T11:17:10.730

在上述所有解决方案中，如果字符串中的所有值都是带逗号的十进制值，则需要注意。如果货币值字符串如下所示：

字符串 str = "1,123.67aed,34,234.000usd,1234euro";

这里并不是所有的值都是小数。应该有一种方法来确定货币是十进制还是整数。

# c# - 在 C# 中的特定位置获取面板

> ID：12401548
> 
> 赞同：1
> 
> 时间：2012-09-13T07:36:58.053
> 
> 标签：c#, winforms

例如，我得到了 25 个像网格一样形成的面板（5 行，5 列），如果我单击其中一个我想获得例如上面的面板。起初我将面板命名为它们的位置，例如 PanelX1Y1，PanelX1Y2 ...然后我从名称中取出坐标并创建新坐标...在我获得新名称后，我使用 foreach 循环遍历所有物品并获得具有正确名称的物品。

我已经用winforms的位置试过了，所以我拿了点击的一个addet的位置，例如25像素，遍历表单中的所有项目，并通过它们的位置检查它们。

但我不想遍历所有项目......如果我知道它的名字，我怎么能得到这个项目来遍历所有项目并检查它们的名字..

我可以用这个吗：this.Controls["name"];

好的，我的网格：p11 p12 p13 p21 p22 p23 p31 p32 p33

如果我点击 p31，我想在 p31 和 p21 处更改一些东西，所以我需要对象 p21

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T07:57:02.637

要直接回答您的问题，您可以使用类的`Find()`方法`ControlCollection`。例如：

```
myForm.Controls.Find("panelX1Y2") 
```

要提出更好的方法，请不要将字符串用于这样的事情。这是hackish和草率。

**相反，在二维数组中初始化您的面板并使用数组索引来找到正确的面板。**

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-13T07:45:57.650

你不能用字典吗？请记住，如果这对您很重要，则不会订购字典。

```
 Dictionary<string, Panel> dcPanels = new Dictionary<string, Panel>();
 dcPanels.Add("GridA", new Panel());
 Panel p = dcPanels["GridA"]; 
```

# sqlite - 在 sqlite3 中打开数据库并查看表？

> ID：12401550
> 
> 赞同：9
> 
> 时间：2012-09-13T07:36:59.083
> 
> 标签：sqlite

第一次使用 sqlite3 用户，正在运行 windows，并且很难上手。我在与我的 sqlite3.exe 应用程序相同的文件夹中有一个数据库，我想将它导入到 sqlite3 中，以便查看它的表。

该数据库称为 slash09.db。我尝试了 .read slash09.db 并且发生了一些事情，但返回了一堆垃圾字符。我应该尝试打开/导入哪些命令并查看其表？

另外，如果您知道学习 sqlite3 的良好在线参考资料，我想阅读它。出于某种原因，谷歌并没有为我找到太多东西。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-09-13T07:56:10.533

`.read FILENAME`会`Execute SQL in FILENAME`。

如果要打开`slash09.db`sqlite3 数据库，只需运行：

```
sqlite3 slash09.db 
```

有关 sqlite3 控制台中不同命令的更多详细信息，请尝试`.help`. 例如，您可以运行`.tables`枚举数据库中的表。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-13T07:45:32.923

如果任何工具都可以，Firefox 有一个非常好的插件，称为[SQLite Manager](https://addons.mozilla.org/en-US/firefox/addon/sqlite-manager/)，它对于检查查询和修改任意 sqlite dbs（不是特别与 firefox 相关）非常有用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-11-09T02:10:59.110

sqlitebrowser 是一个不错的 gui，我同时使用 cl 和 sqlitebrowser。

# javascript - 如何使用modalDialog显示可以在所有浏览器中工作的弹出窗口

> ID：12401558
> 
> 赞同：0
> 
> 时间：2012-09-13T07:37:21.827
> 
> 标签：javascript, jquery

我只是尝试在 Chome 中创建弹出窗口，但它的父窗口在弹出窗口仍然打开时被激活。我的代码是打击

```
<script language="javascript" type="text/javascript">
    function showModalWindow() {
 window.showModalDialog('URL, "Sample.jpg", "resizable: yes");
    }
</script>

how to make this code browser specific. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T07:41:00.497

您可以在调用 jQuery dialog() 时将 modal:true 添加到选项中

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T08:11:52.057

window.showModalDialog 是标准规范的一部分，目前已在 HTML5 中使用。所以它在chrome中被忽略了。使用具有遮罩和许多其他功能的 jQuery 对话框。通过此[链接](http://jqueryui.com/demos/dialog/)获取参考。

# android - Android 设备加密 - 它什么时候开始发挥作用？

> ID：12401559
> 
> 赞同：0
> 
> 时间：2012-09-13T07:37:23.043
> 
> 标签：android, encryption

我的设备没有外部 SD 卡。当我在我的设备上执行“加密设备”时，我知道这会加密内部 SD 卡中的数据。每次打开设备时，都会要求我输入密码来解密数据。

我的问题是——

如何测试数据是否实际加密？当我将我的设备（数据加密）连接到 PC 并尝试打开图像文件时，我可以做到。这是否意味着数据在设备开启时被解密？数据是否仅在设备关闭时加密？当设备被锁定时，无论设备是否加密，我都无法查看文件。

此设备加密究竟何时有帮助？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T07:43:31.933

重置手机，不要输入密码并尝试获取数据。

# java - Java：两个线程，互相中断

> ID：12401562
> 
> 赞同：-1
> 
> 时间：2012-09-13T07:37:26.863
> 
> 标签：java, multithreading, interrupt

我想用两个**不同**的线程编写代码。第一个做某事，第二个等待特定的时间。首先结束的线程应该中断另一个线程。我现在的问题是，我首先初始化的线程无法访问/中断第二个线程，它总是给出“找不到符号”-错误。如果我在代码中交换线程的位置，它是相同的，只是相反。是否有可能使两个线程都“全局”并且可由另一个线程访问？请给出编码示例，如果可能的话，将 public void main、void run() 等放在哪里，所以我只需要添加代码本身。谢谢

代码示例：

```
 public class FTPUpload extends Thread {

      public static void main (String args[]) {
        _//some code_
        final Thread thread1 = new Thread(){;
          public void run() {
    _//code of thread1_
}  

final Thread thread2 = new Thread(){;
  public void run() {
   _//code of thread2_ 

}

thread1.start();
thread2.start();

       }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T07:41:14.423

*因为您的问题（目前？）有点模糊，我的回答可能没有那么有帮助。但...*

尝试`Thread`先声明对象，然后再使用它们。所以每个人可能都知道对方。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T08:00:39.223

在 2 个线程之间进行通信的典型解决方案是使用条件变量。Thread1 可以在条件变量上阻塞，然后当 Thread2 完成了它需要做的事情并想要告诉 Thread1 去时，它通过条件变量向 Thread1 发出信号，从而释放它的阻塞。两个线程必须使用相同的条件变量进行初始化。[这](https://stackoverflow.com/q/1643141/1158895)是一个例子。

如果您希望两个线程都等到另一个线程被初始化，这可以使用屏障同步（在 Java 中称为 CyclicBarrier）来执行。如果 Thread1 首先遇到屏障同步，它将阻塞，直到另一个线程遇到屏障同步。一旦两者都达到了屏障同步，那么它们将继续处理。[这](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/CyclicBarrier.html)是一个例子。

条件变量和屏障同步都是线程安全的，因此您不必担心是否需要同步它们。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-13T07:44:37.750

您可以创建一个 bool 静态变量，它们都可以访问，一旦其中一个完成将其设置为 true，您必须在每个线程的作业期间检查此变量，无论是在不同的位置，还是在循环中有循环例如。

或者，您可以在第一个完成的线程的某处写入一个虚拟文件，并继续检查两个线程中是否存在文件。主要思想是拥有一个双方都可以访问的共享资源。

阅读这个问题非常有用：[线程之间是否共享静态变量？](https://stackoverflow.com/questions/4934913/are-static-variables-shared-between-threads)

我的想法可能无法达到某些答案，但有文件的那个应该确实有效。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-13T08:07:47.147

一般原则是在两个线程之外创建锁和条件。第一个线程获取锁并在完成时发出条件信号。第二个线程获取锁并等待条件（如果需要超时）。我非常担心您依赖 Thread.interrupt() 这是一个糟糕的计划。

```
final Lock lock = new ReentrantLock();
final Condition done = lock.newCondition();
...
// in thread 1 when finished
lock.lock();
try {
  done.signalAll();
} finally {
  lock.unlock();
}
...
// in thread 2 for waiting
lock.lock();
try {
  done.await(30,TimeUnit.SECONDS); // wait for the done or give up waiting after 30s
} finally {
  lock.unlock();
} 
```

使用锁将确保两个线程看到共享对象的一致视图，而 Thread.interrupt() 并不能保证您已经通过了边界

一种改进是使用 CountDownLatch

```
final CountDownLatch latch = new CountDownLatch(1);
...
// in thread 1
latch.countDown();
...
// in thread 2
latch.await(30,TimeUnit.SECONDS) 
```

这会抽象出锁。

其他人有效地建议对文件系统上的文件进行自旋锁扫描。这种方法可能会导致线程饥饿，或者如果不是比基于锁或闩锁的解决方案更慢的性能......虽然对于一个 jvm 中的进程间而不是线程间，基于文件是可以的

如果你认为你知道线程，我推荐《Java 并发实践》这本书去书店，打开这本书并尝试预测第 33 页的程序会做什么......读完那页之后你最终会买这本书

# tapestry - Tapestry - 从不同供应商处订购商品的最佳方法是什么

> ID：12401566
> 
> 赞同：1
> 
> 时间：2012-09-13T07:38:02.637
> 
> 标签：tapestry

在我的申请中，我将不得不处理从不同供应商处订购药品的问题。我有包含药物的供应商类。这些药物可以由药剂师用户订购。如果我有很多供应商，从这些供应商那里订购药品的最佳方式是什么？

我在想有一个具有如下模型属性的选择组件： model="literal:supplierID=supplierName, 2=Borko, 3=Richard" ，然后添加区域组件以使用 ajax 更改网格中的药物列表 - 当用户从选择组件更改所选项目。

订购的第二个版本是列出所有供应商并在每个供应商旁边设置复选框以选择多个供应商。当用户选中一个复选框时，然后在 t:zone 组件中显示来自该供应商的所有药品，包括来自已检查供应商的药品。

如果您对如何解决此问题有任何建议，请告诉我。

谢谢，博尔科·久罗维奇。

# iphone - Facebook SDK 3.0 会话

> ID：12401571
> 
> 赞同：1
> 
> 时间：2012-09-13T07:38:34.010
> 
> 标签：iphone, ios, facebook

我尝试切换到新的 Facebook SDK 3.0 但我对 FBSession 主要目标有一些问题：用户必须登录一次。然后用户可以在他的墙上发布一些东西但是，会话到期日期不能超过 60 天。我不想打扰用户再次登录。我只需要扩展 FBSession。

在旧的 FB SDK 2.0 中是函数 - (void)extendAccessTokenIfNeeded;

但是如何在 SDK 3.0 中扩展 FBSession 呢？

提前谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T02:31:52.580

In the old SDK you would have to extend the access token yourself. The 3.1 (and 3.0) extends it for you in the background whenever it needs to and usually alongside a request you make.

# ruby-on-rails - 使用 Rails、devise 和 MongoDB 制作多用户联系人管理器

> ID：12401578
> 
> 赞同：0
> 
> 时间：2012-09-13T07:38:58.057
> 
> 标签：ruby-on-rails, content-management-system, devise, mongoid

我正在开发支持**多用户的简单****联系人管理器**。我正在使用 with 、和with 。**`Rails``Device``MongoDB``MongoID`**

 **使用设计，我很容易将基本的登录功能附加到设计中，并用于`embedded_in`将联系人模型附加到用户模型。

但是，我无法制作**显示用户联系人列表的****用户仪表板页面**（和 RESTful API 端点）。我应该让每个用户的联系人列表对每个用户都是私有的。

 ****编辑**：我遵循[RailsApp 教程](http://railsapps.github.com/tutorial-rails-mongoid-devise.html)，这就是我到目前为止所做的。我有显示每个用户列表的索引页面，以及用于添加联系人数据的详细视图。

问题是，当用户注册时，每个用户都可以看到每个人的联系方式。我想限制每个用户只能看到他们的联系人列表。

还有一件事，我想为每个用户统一 API 端点，例如：

`http://domain.tld/contact.json`用于登录用户的联系人。

![指数](../Images/bbf8d9af16b879e15f71317d8d475792.png)

![用户页面](../Images/9477dca2345b9369b9d6966a9e09b694.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T07:49:26.843

设计会给你这个助手`current_user`。因此，您可以在控制器中执行此操作。

```
# dashboard_controller.rb
before_filter :authenticate_user!

def index
  @contacts = current_user.contacts
end 
```

那么在你看来

```
# dashboard/index.html.erb
<% @contacts.each do |contact| %>
<p>
  <strong><%= contact.name %></strong> <br />
  Phone: <%= contact.phone %>
  Mobile: <%= contact.mobile %>
  Email: <%= contact.email %>
</p>
<% end %> 
```

这就是你所追求的吗？****

# objective-c - 如何模糊 UIImage 不包括特定点。

> ID：12401584
> 
> 赞同：0
> 
> 时间：2012-09-13T07:39:27.567
> 
> 标签：objective-c, ios, cocoa-touch, instagram, gpuimage

在 GPUImageGaussianSelectiveBlurFilter 中如何设置非图像模糊点？我尝试设置点 excludeCirclePoint 但一切都变得模糊。我想实现触摸手势并且触摸点保持良好，而其他图像变得模糊。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T07:39:02.567

您必须将图像的左上角和右下角分配`CGPoint`给过滤器的`excludeCirclePoint`属性。`CGPointMake(0, 0)``CGPointMake(1, 1)`

就像是：

```
GPUImageGaussianSelectiveBlurFilter *filter = [[GPUImageGaussianSelectiveBlurFilter alloc] init];
filter.excludeCirclePoint = CGPointMake(0.5, 0.5); // center 
```

# search - Solr 查询不返回预期值

> ID：12401587
> 
> 赞同：1
> 
> 时间：2012-09-13T07:39:42.603
> 
> 标签：search, solr

我们有一个简单的 solr 配置，就像这样[https://gist.github.com/118d17e93267123f4870](https://gist.github.com/118d17e93267123f4870)

据此，我正在用 id索引标题**“朗达伯恩的秘密”或“圣经中的吸引力法则” 。**

然后我去 Solr 分析工具看看它是如何在这个字段中被索引的。因此，如果具有给定值的字段类型返回类似的内容，则索引分析；

```
secret rhonda byrne law attraction bible 
```

只是为了确保，我正在查询该标题的 id 字段以查看它是否存在。积极的。

但是当我用分析工具结果查询这个索引时，我没有得到任何结果。我的查询是这样的；

```
select?qf=title_stm&q="Secret+Rhonda+Byrne+Law+Attraction+Bible"&fl=id,title&defType=dismax 
```

正如评论中给出的，该查询的调试输出在这里； [https://gist.github.com/9b88fd6b5f043c90d539](https://gist.github.com/9b88fd6b5f043c90d539)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T13:43:54.900

问题在于： -

```
<filter class="solr.StopFilterFactory"
        ignoreCase="true"
        words="stopwords.txt"
        enablePositionIncrements="true"
        /> 
```

每当遇到停用词时，enablePositionIncrements 都会增加位置。因此，当您进行精确的短语匹配时，这将不匹配，因为索引标题的位置不相邻。

[在这里](http://lucidworks.lucidimagination.com/display/lweug/Suppressing+Stop+Word+Indexing)阅读更多内容。

您应该禁用位置增量才能进行短语匹配。

```
<filter class="solr.StopFilterFactory"
        ignoreCase="true"
        words="stopwords.txt"
        enablePositionIncrements="false"
        /> 
```

# xamarin.ios - 你可以在 monotouch 中使用 assembly.load 吗？

> ID：12401588
> 
> 赞同：3
> 
> 时间：2012-09-13T07:39:45.100
> 
> 标签：xamarin.ios

我目前正在尝试在单点触控应用程序中动态加载插件程序集。

为此，我在我的应用程序项目中引用插件 dll，将 limker 设置为“仅 sdk”，然后`Assembly.Load(filename)`在需要插件时尝试在我的应用程序中调用。

这与我之前在 monodroid 中成功使用的方法相同。但是目前，这在单点触控中失败并出现 FileLoadException。

这种方法在单点触控中可行吗？您需要包含一个特殊的文件路径吗？还是aot环境不支持这个？

* * *

注意：显然还有其他方法可以达到类似的效果 - 而且我确实有一个备用计划......但这是我的首选路线（如果我能做到的话）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-13T12:28:19.307

代码如：

```
var a = Assembly.Load ("mscorlib.dll");
Assert.NotNull (a); 
```

适用于模拟器和设备。但是，for 的参数[`Load`](http://msdn.microsoft.com/en-us/library/ky3942xh.aspx)不是`assemblyString`文件**名**（即使抛出的异常让您认为它是）。

存在许多其他重载（for `Load`）和其他方法（例如`LoadFrom`），但它们可能并非都在 MonoTouch 中工作（因为可能缺少一些运行时支持）。

**笔记**

处理`mscorlib.dll`是特殊的（并且在比其他组合更多的情况下工作，即快捷方式）。然而，基于反射的方法似乎在更多情况下按预期工作，例如：

```
string filename = System.IO.Path.GetFileName (GetType ().Assembly.Location);
Assembly assembly = Assembly.ReflectionOnlyLoadFrom (filename); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T08:05:37.147

MonoTouch 不支持 Assembly.Load（或任何其他动态加载代码的方式）。

这是 iOS 的限制——所有可执行代码都必须在应用程序中（并且必须是本机代码，这就是我们使用 AOT 在编译时生成本机代码的原因）。

# css - 字体在 Firefox 上不起作用。在别人身上效果很好

> ID：12401593
> 
> 赞同：4
> 
> 时间：2012-09-13T07:40:00.437
> 
> 标签：css, firefox, webfonts

我有一个项目使用 font-face 一段时间没有问题。今天我检查了字体不能在 firefox v14 和 v15 上工作，可证明也不能在 v12+ 上工作，就像这个线程中的情况一样：http: [//css-tricks.com/forums/discussion/17337/font-face-problem- with-firefox-v-12/p1](http://css-tricks.com/forums/discussion/17337/font-face-problem-with-firefox-v-12/p1) 我的问题和上一个线程完全一样。

总结一下。我正在使用字体来加载这样的网络字体：

```
@font-face {
    font-family: 'TradeGothicLTStdCnBold';
    src: url('/jovenestalentos/fonts/tradegothicltstd-bdcn20-webfont.eot');
    src: url('/jovenestalentos/fonts/tradegothicltstd-bdcn20-webfont.eot?#iefix') format('embedded-opentype'),
         url('/jovenestalentos/fonts/tradegothicltstd-bdcn20-webfont.woff') format('woff'),
         url('/jovenestalentos/fonts/tradegothicltstd-bdcn20-webfont.ttf') format('truetype'),
         url('/jovenestalentos/fonts/tradegothicltstd-bdcn20-webfont.svg#TradeGothicLTStdCnBold') format('svg');
    font-weight: normal;
    font-style: normal; 
```

进而

```
#bea .bea {
    font-family: 'TradeGothicLTStdCnBold';
    font-size: 14px;
} 
```

根据萤火虫正确加载字体。它适用于 safari、chrome、IE 和**一些 firefox**。我已经尝试了 6 个 firefoxs (v13-15)，它在其中一些中有效，而在另一些中无效。我无法确定任何原因。

我还查找了 firefox 配置值 gfx.font_rendering.cleartype.always_use_for_content；而且我注意到在我测试的所有Firefox中都设置为false，即使是那些正常工作的。

现场示例： [http ://comoquierascolacao.com/jovenestalentos/](http://comoquierascolacao.com/jovenestalentos/)

它应该是什么样子： http: [//postimage.org/image/n2r9fxdsv/](http://postimage.org/image/n2r9fxdsv/)![它应该是什么样子](../Images/58fc3a693ee86b2ad62ae69702b5cf58.png)

总结一下： - 路线有效。- 路由在同一个域中，没有跨域问题。- 它在某些 Firefox 中确实有效，而在其他 Firefox 中则无效（我没有理由弄清楚）。- 它之前在我自己的 Firefox 中确实有效，可能在 v12 之前。

谢谢大家，任何帮助将不胜感激，因为这让我发疯。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-13T07:57:34.257

嗯，我的错。毕竟这是一个跨域问题。`www.domain...`即使在访问`http://domain...` 将所有人重定向到 www.domain时加载的字体也应该可以解决问题，我认为从现在开始将是一个好习惯。另一种解决方案是使用相对路径加载字体。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-15T11:10:55.993

我对 FF 没有正确显示字体有同样的问题。以下是可能遇到此问题的人的解决方法：

尝试在块的末尾声明“eot”字体。像：

```
@font-face {
font-family: 'TradeGothicLTStdCnBold';
src: url('/jovenestalentos/fonts/tradegothicltstd-bdcn20-webfont.woff') format('woff'),
     url('/jovenestalentos/fonts/tradegothicltstd-bdcn20-webfont.ttf') format('truetype'),
     url('/jovenestalentos/fonts/tradegothicltstd-bdcn20-webfont.svg#TradeGothicLTStdCnBold') format('svg');
src: url('/jovenestalentos/fonts/tradegothicltstd-bdcn20-webfont.eot');
src: url('/jovenestalentos/fonts/tradegothicltstd-bdcn20-webfont.eot?#iefix') format('embedded-opentype');
font-weight: normal;
font-style: normal; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-13T07:42:55.580

JavaScript 控制台（Herramientas-> Desarrollador web-> Consola de errores）显示几个错误：

```
Fecha y hora: 13/09/2012 9:41:37
Advertencia: downloadable font: no supported format found (font-family: "TradeGothicLTStdCnBold" style:normal weight:normal stretch:normal src index:4)
source: (end of source list)
Archivo de origen: http://www.comoquierascolacao.com/jovenestalentos//style/style.css?v=1
Línea: 0
Código fuente:
@font-face {   font-family: "TradeGothicLTStdCnBold";   font-style: normal;   font-weight: normal;   src: url("/jovenestalentos/fonts/tradegothicltstd-bdcn20-webfont.eot?#iefix") format("embedded-opentype"), url("/jovenestalentos/fonts/tradegothicltstd-bdcn20-webfont.woff") format("woff"), url("/jovenestalentos/fonts/tradegothicltstd-bdcn20-webfont.ttf") format("truetype"), url("/jovenestalentos/fonts/tradegothicltstd-bdcn20-webfont.svg#TradeGothicLTStdCnBold") format("svg"); } 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-08-15T12:49:47.463

我的解决方案：在带有 www 的域上。一切正常，但没有 www。FF问题出现了。所以我使用重定向到www。在 .httaccess 中：

```
RewriteEngine on
RewriteCond %{HTTP_HOST} ^example\.com$ [NC]
RewriteRule ^(.*)$ http://www.example.com/$1 [R=301,L] 
```

它有效！谢谢韩诺

# .net - 使用 vb.net 从字符串中删除特殊字符和字母以及空格

> ID：12401597
> 
> 赞同：0
> 
> 时间：2012-09-13T07:40:12.370
> 
> 标签：.net, regex, vb.net-2010

> **可能重复：**
> [从字符串中拆分特殊字符和字母](https://stackoverflow.com/questions/12402830/split-special-character-and-alphabets-from-a-string)

我有一个字符串。我想从 taht 字符串中删除所有特殊字符、字母和空格。但我无法得到它。

```
my code
-------
  Dim str1 As String = "!@!@#!$@#$#123456habAB^*^&(*)(_)()*("
    Dim str2 As String = Regex.Replace(str1, "[\[\]\\\^\$\.\|\?\*\+\(\)\{\}%,;><!@#&\-\+]", "")

    MsgBox(str2)

am getting the result like
--------------------------
123456habAB_

expected result
---------------
123456 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-13T07:48:07.667

尝试在你的正则表达式中使用 \D，匹配任何不是数字的东西。

# c# - 文本框失焦时显示文本框文本突出显示

> ID：12401601
> 
> 赞同：2
> 
> 时间：2012-09-13T07:40:39.857
> 
> 标签：c#, wpf, textbox, focus

我有一个文本框，里面有一些文本。当文本框失去焦点时，如何防止文本框隐藏选定的文本突出显示？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-13T07:56:12.963

放

```
textBox1.IsInactiveSelectionHighlightEnabled = true; 
```

（显然这是 Fx 4.5 中的新功能）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T08:03:26.910

您可以从 TextBox 类扩展，并使用 SelectionChanged 事件。

大多数时候，更改控件的默认行为是一个坏主意。用户可能会将其视为意外行为，这很糟糕。在您的情况下，如果您设法创建这样的文本框，则用户可以同时在多个文本框中选择文本，因为选择不会隐藏。

告诉我，您希望所选文本保持突出显示的原因是什么？因为也许还有另一种方式。

**编辑**： .NET 4.5 显然支持这样的功能：`IsInactiveSelectionHighlightEnabled`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-13T07:57:23.493

您可以在 On Focus 和 Leaving Focus 事件处理程序上使用下面的代码：-

```
textbox.SelectionStart = 0;
textbox.SelectionLength = textbox.Text.Length; 
```

# wpf - 在其 DataTemplate 中绑定控件的属性

> ID：12401602
> 
> 赞同：1
> 
> 时间：2012-09-13T07:40:40.313
> 
> 标签：wpf, listview, binding, datatemplate

我有一个自定义控件，我在其中修改了 ListView。我有一个 DataTemplate ，它将每个项目显示为宽度为 128 的图标及其下方的标签。

```
<DataTemplate x:Key="AeroIconTemplate">
    <Grid VerticalAlignment="Top" Margin="0">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition/>
        </Grid.RowDefinitions>
        <Image Grid.Row="0" Source="{Binding Image}" Width="128"
               MaxHeight="128" Margin="0"/>
        <TextBlock Grid.Row="1" Text="{Binding Title}" Foreground="Black"
                   TextWrapping="WrapWithOverflow" Margin="0" 
                   TextTrimming="CharacterEllipsis" Width="128" MaxHeight="60" />
    </Grid>
</DataTemplate> 
```

现在，我向 ListView 本身添加了一个名为 IconSize 的属性。这需要一个介于 16 和 256 之间的整数。

我想将`Width`, `MaxHeight`of the`Image`和 the`Width`绑定`TextBlock`到这个属性。因此，无论何时更改 IconSize 属性，都会调整模板的大小。如您所见，我目前正在将一些东西绑定到**数据对象**（图像源和标签文本），但在这种情况下，我想绑定到 ListView**控件**。

我该怎么做呢？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-13T08:30:00.257

你可以使用`RelativeSource`：

```
... Width="{Binding IconSize,RelativeSource={RelativeSource AncestorType=ListView}}" ... 
```

请务必定义正确的类型，因为 WPF`ListView`没有属性`IconSize`。您可能需要定义您的类。

# alfresco - Alfresco 共享基于文件夹的权限

> ID：12401603
> 
> 赞同：0
> 
> 时间：2012-09-13T07:40:45.333
> 
> 标签：alfresco, alfresco-share

我有以下场景：在 Alfresco Share 中，我需要设置不同的文件夹访问权限。例如，用户 A 可能具有对文件夹 1 的“贡献者”访问权限，但只有对文件夹 2 的“消费者”访问权限，而用户 B 需要对两者都具有“贡献者”访问权限。这个场景如何在 Alfresco 角色/组模型中实现？我知道我们可以在 Share 中设置文件夹级别的权限，但只能基于角色...

谢谢你的帮助 ：）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-13T09:07:41.060

诀窍是，如果您在查看站点时使用管理权限，您将只能看到站点角色。但是，如果您单击页面顶部的“存储库”链接，然后通过“站点”文件夹导航到您的站点，您将能够管理权限并将单个用户和组设置为具有您想要的角色他们有。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-13T08:54:31.263

您是否尝试在文件夹详细信息页面中对单个文件夹使用管理**文件**夹操作**权限****？**在那里，您可以设置单个用户对该文件夹的任何权限。

 ***** * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-10T14:18:38.030

Jeff 和 Swemon 都是对的，这行得通。

我还注意到，您需要清除/取消选中“继承权限”才能执行每个用户的权限。您需要这样做并不是很明显 - 我对界面感到困惑一三秒钟。您将在文件夹操作 > 文件夹详细信息 > 管理权限上找到该按钮。****

# gwt - RequestFactory 接收数据

> ID：12401605
> 
> 赞同：0
> 
> 时间：2012-09-13T07:40:50.323
> 
> 标签：gwt, requestfactory

我正在尝试使用 GWT RF 取回数据，但我遇到了一些麻烦。这是我的工厂、代理和实体。

server.domain 包下的实体：

```
public class Job implements Serializable {
private int id;
private String announcer;
private String applied;
private String date;
private String description;
private String email;
private String title;
private int version;
static SessionFactory factory;
static ServiceRegistry serviceRegistry;
public Job() {
    try {
        Configuration configuration = new Configuration();
        configuration.configure();
        serviceRegistry = new ServiceRegistryBuilder().applySettings(
        configuration.getProperties()).buildServiceRegistry();
        factory = configuration.buildSessionFactory(serviceRegistry);
    }catch (Throwable ex) {
        System.err.println("Failed to create sessionFactory object." + ex);
        throw new ExceptionInInitializerError(ex);
    }
}
//Setters&Getters
public void persist() {
        Session session = factory.openSession();
        Transaction tx = null;
        try {
            tx = session.beginTransaction();
            Job job = this;
            session.save(job);
            tx.commit();
        } catch (HibernateException e) {
            if (tx != null)
                tx.rollback();
            e.printStackTrace();
        } finally {
            session.close();
        }
    }
public static List<Job> findAllJobs() {
        Session session = factory.openSession();
        Transaction tx = null;
        List<Job> list = null;
        try {
            tx = session.beginTransaction();
            Query query = session.createQuery("select * from Job");
            list = query.list();
        } catch (HibernateException e) {
            if (tx != null)
                tx.rollback();
            e.printStackTrace();
        } finally {
            session.close();
        }
        return list;
    } 
```

JobRequest 类文件包含：

```
Request<List<JobProxy>> findAllJobs(); 
```

和入口模块：

```
final EventBus eventBus = new SimpleEventBus();
JobRequestFactory requestFactory = GWT.create(JobRequestFactory.class);
requestFactory.initialize(eventBus);
JobRequest request = requestFactory.jobRequest();
JobProxy newJob = request.create(JobProxy.class);
requestFactory.jobRequest().findAllJobs().to(new Receiver<List<JobProxy>>(){
public void onSuccess(List<JobProxy> jobs)
{
    System.out.println("SIZE:"+jobs.size());
}
}).fire(); 
```

最后我的错误是：

```
com.google.web.bindery.requestfactory.server.ServiceLayerDecorator die
SEVERE: No RequestContext for operation Lk3VEjMsjGdUyVzlgtz$ggTrjMA= 
```

我不明白为什么会这样……

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T12:32:31.770

这通常意味着[ValidationTool](http://code.google.com/p/google-web-toolkit/wiki/RequestFactoryInterfaceValidation) （或注释处理器）没有与最新版本一起运行`JobRequestFactory`your签名（例如接受参数）。`JobRequest``JobRequestFactory``JobRequest``findAllJobs`

# sql - 创建范围分区表

> ID：12401607
> 
> 赞同：0
> 
> 时间：2012-09-13T07:40:55.773
> 
> 标签：sql, plsql

我必须创建一个范围分区表（TMP_OA_RANGE）。首先，我从 DB 中的表中选择最小和最大 action_objid。这是查询：

```
select /*+ parallel(a) */ min(action_objid) from TMP_OA a;
select /*+ parallel(a) */ max(action_objid) from TMP_OA a; 
```

然后我需要创建具有 10 个分区的范围分区表，范围将上述结果分为十个分区：

```
partition 1=min(action_objid) +  1* (max(action_objid) /10)
partition 2=min(action_objid) +  2* (max(action_objid) /10)  -partition 1
....
partition 10=min(action_objid) +  10* (max(action_objid) /10) - all nine partitions 
```

有没有办法使用sql来做到这一点？

# java - 查询Java中的泛型

> ID：12401610
> 
> 赞同：2
> 
> 时间：2012-09-13T07:41:03.137
> 
> 标签：java, generics

我有一个只读方法，应该能够采取

```
1\. Map<Date, List<X>> 
```

或者

```
2\. Map<Date, List<Y>> 
```

作为参数。

在这里，我有以下两个选项来定义该方法。

```
A. private <T> List<Date> myMethod(Map<Date, List<T>> map)
B. private List<Date> myMethod(Map<Date, List<?>> map) 
```

两者都适合我，哪一个更可取？

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-13T07:43:16.813

第一个使您可以在需要时访问`T`类型（例如，如果您需要将某些内容强制转换为类型`T`或类似的内容）。对于后者，您只需声明您根本不在乎`List`包含什么类型的元素。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-13T07:55:11.377

来自[JLS](http://docs.oracle.com/javase/specs/jls/se7/html/jls-4.html#jls-4.5.1)

```
<T> boolean addAll(Collection<T> c) 
```

> 此版本足够灵活，但请注意类型参数在签名中仅使用一次。这反映了一个事实，即类型参数没有用于表达参数类型、返回类型和/或抛出类型之间的任何类型的相互依赖关系。**在没有这种相互依赖的情况下，泛型方法被认为是不好的风格，通配符是首选。**

# android - 使用 SherlockFragment 和 SherlockTabs 时如何填充列表

> ID：12401613
> 
> 赞同：2
> 
> 时间：2012-09-13T07:41:06.990
> 
> 标签：android, android-fragments, actionbarsherlock

我已经使用这个函数创建了我的标签：

```
public class MyTaber extends SherlockFragmentActivity implements ActionBar.TabListener, ViewPager.OnPageChangeListener{

TabHost mTabHost;
private Tab1MyFirstTab frgTabMyFirstTab;
private Tab2Recipes frgTabRecipes;
private Tab3Products frgTabProducts;
private Tab4FAQ frgTabFAQ;
private Tab5Settings frgTabSettings;

private ViewPager mViewPager;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.myview);
    mViewPager = (ViewPager) findViewById(R.id.pager);
    mViewPager.setAdapter(new MainPagerAdapter(
            getSupportFragmentManager()));
    mViewPager.setOnPageChangeListener(this);
    mViewPager.setPageMarginDrawable(R.drawable.border);
    mViewPager.setPageMargin(16);
    final ActionBar actionBar = getSupportActionBar();
    getSupportActionBar().setDisplayShowHomeEnabled(false);
    getSupportActionBar().setDisplayShowTitleEnabled(false);
    actionBar.setNavigationMode(ActionBar.NAVIGATION_MODE_TABS);
    actionBar.addTab(actionBar.newTab().setText(R.string.tab_myfirsttab_title)
            .setTabListener(this).setIcon(R.drawable.ic_tab1_inactive));
    actionBar.addTab(actionBar.newTab().setText(R.string.tab_recipes_title)
            .setTabListener(this).setIcon(R.drawable.ic_tab2_inactive));
    actionBar.addTab(actionBar.newTab().setText(R.string.tab_products_title)
            .setTabListener(this).setIcon(R.drawable.ic_tab3_inactive));
    actionBar.addTab(actionBar.newTab().setText(R.string.tab_faq_title)
            .setTabListener(this).setIcon(R.drawable.ic_tab4_inactive));
    actionBar.addTab(actionBar.newTab()
            .setText(R.string.tab_settings_title).setTabListener(this).setIcon(R.drawable.ic_tab5_inactive));
}

private class MainPagerAdapter extends FragmentPagerAdapter {
    public MainPagerAdapter(FragmentManager fm) {
        super(fm);
    }

    @Override
    public Fragment getItem(int position) {
        switch (position) {
        case 0:
            return (frgTabMyFirstTab = new Tab1MyFirstTab());

        case 1:
            return (frgTabRecipes = new Tab2Recipes());

        case 2:
            return (frgTabProducts = new Tab3Products());

        case 3:
            return (frgTabFAQ = new Tab4FAQ());

        case 4:
            return (frgTabSettings = new Tab5Settings());

        }
        return null;
    } 
```

每个选项卡都使用 SherlockFragment 以类似的方式创建：

```
public class Tab3Products extends SherlockFragment{

@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container,
        Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    View view = inflater.inflate(R.layout.tab3products, container, false);

    /*
    ListView list = (ListView) view.findViewById(R.id.lvMySpecialList);
    ArrayAdapter<String> adapter = new ArrayAdapter<String>(getActivity(), android.R.layout.simple_list_item_1, mySpecialKeys);
    list.setAdapter(adapter);
    */
    return view;

} 
```

问题是。

1.  我的第一个选项卡需要有 2 个部分，上部应该是带有 2 个幻灯片的滑块，下部应该是带有 3 个项目的列表。如何在片段中膨胀列表。我尝试使用 ArrayAdapter（正如您在注释代码中看到的那样），并从 StringArray 获取字符串，但这会使我的应用程序因所有 android.View.coreographer 问题而崩溃。

2.  当我点击第一个列表项时，整个 Tab1 需要将布局更改为类似的半图像/半列表，但它需要是不同的片段或活动。

    1.  因为 2\. - 我应该使用 SherlockFragment（像我一样）还是 SherlockFragmentActivity 作为我的片段？

因此，如果现在有人可以提供帮助，因为标准列表和填充它们不起作用，显然我缺少一些知识片段如何工作以及如何在同一选项卡中启动不同的片段/活动。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-08T09:10:54.830

您无法在片段中添加片段，因为您无法在活动中添加活动。你的方法很好。一个管理 Fragments 的 fFragmentActivity 就可以了

如果您想在 FragmentActivity 中更改片段，则需要**添加/替换**它们示例：

```
AlbumGridFragment fragment = new AlbumGridFragment();
                getActivity().getSupportFragmentManager().beginTransaction().setCustomAnimations(R.animator.anim_back_right, R.animator.anim_back_left, R.animator.anim_left, R.animator.anim_right)
                .replace(R.id.album_fragment, fragment).addToBackStack(MainFragmentActivity.ALBUM_GRID_TAG).commit(); 
```

这将用专辑列表替换片段，用一个专辑中的图像网格替换片段，并带有动画。（你可以用“添加”做同样的事情，它将片段**堆叠**在另一个之上）

希望能帮助到你

# c++ - 在运行时将元素插入向量 C++。引发运行时错误

> ID：12401618
> 
> 赞同：0
> 
> 时间：2012-09-13T07:41:15.300
> 
> 标签：c++, string, vector, iterator

我想在运行时将一些元素插入到向量中。我来啦。

目的是打印`"Hello Hi I am Rasmi"`

```
int main()
{
vector<string>vect;
vect.push_back("Hello");
vect.push_back("Hi");
vect.push_back("Rasmi");
for(vect<string>::iterator it = vect.begin(); it != vect.end(); ++it)
{
 if(*it == "Rasmi") // If it encounters "Rasmi"
    { it--;
         vect.insert(vect.begin()+2, "I am");
    }
   cout << *it;
}
} 
```

但它抛出运行时错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T07:42:34.547

```
vect.insert(vect.begin()+2, "I am");
 }
cout << *it; 
```

在您改变拥有的容器后，迭代器将失效 - 即您不能`it`在您之后使用`insert`或`push_back`......

添加元素后，向量可能需要自动调整大小和重新分配，如果发生这种情况，迭代器将不再有效。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-13T07:48:49.803

虽然我真的不知道你为什么需要做这样的事情，但有一个安全的解决方法。您可以存储迭代器的当前索引，将新元素插入向量中，然后重新分配迭代器以引用潜在的新内存地址。我在这里包含了这样做的代码。

```
if(*it == "Rasmi") // If it encounters "Rasmi"
{
    it--;
    int index = it - vect.begin (); // store index of where we are
    vect.insert(vect.begin()+2, "I am");
    it = vect.begin () + index; // vect.begin () now refers to "new" begin
    // we set it to be equal to where we would want it to be
}
cout << *it; 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-09-13T08:56:24.830

只要 std::vector::insert() 的重载之一具有签名[迭代器插入（迭代器位置，const T& x）](http://www.cplusplus.com/reference/stl/vector/insert/)，您就可以重写代码如下

```
for(vect<string>::iterator it = vect.begin(); it != vect.end();)
{

    if(*it == "Rasmi") // If it encounters "Rasmi"
    { 
        it = vect.insert(it, "I am");          
        cout << *it; 
        ++it;
    }
    cout << *it;

    ++it;
} 
```

# actionscript-3 - 动态添加超链接到弹性列表组件

> ID：12401625
> 
> 赞同：1
> 
> 时间：2012-09-13T07:41:41.740
> 
> 标签：actionscript-3, apache-flex, flex3

如何动态地将超链接添加到列表组件？

目前我正在使用`list.dataprovider.addItem()`将项目添加到我的列表中，但我似乎无法弄清楚如何将这些项目转换为超链接。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T17:04:30.037

为组件创建一个自定义`itemRenderer`，该`List`组件具有适当的鼠标单击回调，用于将用户导航到适当的位置。像[这样](http://help.adobe.com/en_US/flex/using/WS03d33b8076db57b9-23c04461124bbeca597-8000.html)的东西。[这](https://blogs.adobe.com/flexdoc/2011/05/adding-links-to-mx-and-spark-datagrids-using-inline-item-renderers.html)是第二个示例，具有类似的链接功能。

# oracle - Microsoft Service Broker 类似于 Oracle 中的排队系统？

> ID：12401628
> 
> 赞同：1
> 
> 时间：2012-09-13T07:42:01.663
> 
> 标签：oracle, sql-server-2008-r2, service-broker

我们在“SQL Server 2008R2”中实现并使用了Service Broker。现在我们计划将 SQL 数据库迁移到 Oracle。
**那么甲骨文有像 MSServiceBroker 这样的排队系统吗？**

# c# - 使用人脸检测将人脸图像裁剪为特定比例的算法

> ID：12401629
> 
> 赞同：1
> 
> 时间：2012-09-13T07:42:05.250
> 
> 标签：c#, .net, emgucv

我有很多上半身/脸部图片，我正在尝试创建一个类似于此的页面： [http ://www.mediatechsummit.com/ehome/index.php?eventid=45432&tabid=76964&](http://www.mediatechsummit.com/ehome/index.php?eventid=45432&tabid=76964&)

问题是我的照片大小和类型各不相同，有些是脸，有些是上半身。我想编写一个算法，使用我实现的人脸检测 - EMGU CV 库将图片缩放/裁剪到特定比例（1/1.3）。

它需要“智能”，从检测到的面部获取正方形，并决定如何将其保持在中心，同时不丢失图片中的重要部分（耳朵、前额）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T07:51:13.857

基于中心矩形裁剪你可以假设这个

```
main_x = ...
main_y = ....
width = ...
height = ..... 
```

那么你可以使用一个平面比率来扩展矩形或固定值，例如：

```
custom_x = main_x - width 
custom_width = width * 3 
custom_height = custom_width * 1.3333333
custom_y = main_y - height 
```

它喜欢 3x3 盒子来扩展 9x9 盒子

# c# - 使用 ASP.Net 标记的 Eval 格式化（仅限）

> ID：12401639
> 
> 赞同：1
> 
> 时间：2012-09-13T07:42:53.490
> 
> 标签：c#, asp.net, .net

我有一个中继器。中继器中的一项是标签。此标签应显示 TaxRate 值。我可以使用以下标记来做到这一点。

```
<asp:Label ID="lblTaxRate" runat="server" Text = '  <%# Eval("TaxRate")  %>'></asp:Label> 
```

现在，我需要`$`在税率值之前添加一个符号。我们如何仅使用 ASP.Net 标记来做到这一点？

注意：预计不会使用 javascritpt 的解决方案。

注意：我不能用任何其他控件替换标签或摆脱标签

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-13T07:44:23.573

尝试：

```
<%# DataBinder.Eval(Container.DataItem, "TaxRate", "{0:c}") %> 
```

（从[这里](http://msdn.microsoft.com/en-us/library/2d76z3ck.aspx)）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-13T07:46:18.820

这应该这样做：

```
<asp:Label ID="lblTaxRate" runat="server" Text = '  <%# Eval("TaxRate", "${0}") %>'></asp:Label> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2019-11-28T00:40:55.653

这有效，并考虑了货币的文化差异

```
'<%# Eval("TaxRate","{0:C2}") %>' 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-10T17:14:57.693

感谢@nunespascal 的回答。

```
<asp:Label ID="lblTaxRate" runat="server" Text = '<%# String.IsNullOrEmpty(Convert.ToString(Eval("TaxRate"))) == true ? "" : Eval("TaxRate", "${0}")%>  ' > </asp:Label> 
```

**改进**

```
<%# String.Format("{0:C}", Eval("Amount") ) %> 
```

或者

```
<%# ((double)Eval("Amount")).ToString("C") %> 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2020-12-09T16:57:12.553

许多年后，在处理一些遗留代码时，我遇到了类似的问题。Eval 格式的重载也可用于任何自定义字符串。

在我的场景中：

```
//Displayed regardless there is a value to evaluate or not.
<%#Eval("ContractLength") + " Years" %>

//Displayed only when there is a value to evaluate.
<%#Eval("ContractLength","{0} Years") %> 
```

在您的情况下：

```
//Displayed regardless there is a value to evaluate or not.
<%#"$" + Eval("TaxRate") %>

//Displayed only when there is a value to evaluate.
<%#Eval("TaxRate","${0}") %> 
```

# c# - 如何在 ASP.Net 中访问从 iframe 发送的参数？

> ID：12401651
> 
> 赞同：-1
> 
> 时间：2012-09-13T07:43:32.913
> 
> 标签：c#, asp.net

我正在开发一个 Web 应用程序项目`ASP.Net`，我有两个单独的页面：在第一页`Default.aspx`中，我使用`iframe`来调用第二页`Test.aspx`。`src`我在 的属性中传递了两个参数`iframe`。

```
<iframe src="Test.aspx?Param1=<%=var1%>&Param2=<%=var2%>" 
scrolling=\"no\" width="100" height="275px" frameborder="0"></iframe> 
```

问题是如何访问`Param`1 或`Param2`在`Test.aspx`页面中。
提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T07:49:07.673

它们应该作为 Test.aspx 中请求的属性在表单中可用，`Param1`并且`Param2`必须[`QueryString`](http://msdn.microsoft.com/en-us/library/ms524784%28v=vs.90%29.aspx)已经`Request.QueryString["Param1"]`作为父级 Default.aspx 存在`var1`并且`var2`在父级 Default.aspx 中

# jquery - Fancybox - 如何通过手动调用使用 fancybox 打开画廊中的特定图像

> ID：12401659
> 
> 赞同：2
> 
> 时间：2012-09-13T07:44:25.397
> 
> 标签：jquery, fancybox

[如何通过手动调用 html 中的画廊而不是通过 jquery 选项打开fancybox？](https://stackoverflow.com/questions/10835849/how-do-i-open-fancybox-via-manual-call-for-a-gallery-in-the-html-not-via-the-jqu)

这回答了手动打开画廊的问题。

但是，如果我想在图库中打开特定图像怎么办？它可以是图库列表中的任何图像。有没有办法做到这一点？

我试过这个

```
$("#launcher").on("click", function(){
 $(".fancybox.default").eq(0).trigger("click");
}); 
```

我在其中为要显示的图像添加了一个附加类“默认”。

但是当我运行它时，它会显示该图像但没有画廊的下一个/上一个按钮。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T08:00:09.593

您必须模拟单击要聚焦的元素。

JQuery 允许您使用`.click`函数 ( [link](http://api.jquery.com/click/) ) 执行此操作。

我举了一个例子，让它专注于组的元素。第一种方法使用相同的选择器，fancybox 用于创建组

```
<script>
    $(document).ready(function(){
        //get the group of your fancy elements
        var fancygroup = $("a[rel=example_group]");

        // get the element you want to focus (e.g the first element)
        var fancyelem = $(fancygroup.get(1));

        // simulate a click
        fancyelem.click();
    });
</script> 
```

或者，您可以为要关注的元素分配一个 ID 并模拟点击它

```
<p>
    Image gallery (ps, try using mouse scroll wheel)<br />

    <a rel="example_group" href="./example/9_b.jpg" title="Lorem ipsum dolor sit amet"><img alt="" src="./example/9_s.jpg" /></a>

    <a rel="example_group" href="./example/10_b.jpg" title=""><img alt="" src="./example/10_s.jpg" /></a>

    <a id="initthis" rel="example_group" href="./example/11_b.jpg" title=""><img alt="" src="./example/11_s.jpg" /></a>

    <a rel="example_group" href="./example/12_b.jpg" title=""><img class="last" alt="" src="./example/12_s.jpg" /></a>
</p> 
```

（分配给第三个元素的id

然后直接选择元素：

```
<script>
    $(document).ready(function(){   
        $('#initthis').click();
    });
</script> 
```

BR，斯特凡

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T08:40:28.537

$("#ID").click(function () { $("a[rel=gallerimages]").fancybox({ }).trigger('click'); });

# drupal - 如何在 drupal 7 中为博客创建年度列表

> ID：12401660
> 
> 赞同：0
> 
> 时间：2012-09-13T07:44:34.117
> 
> 标签：drupal, drupal-7

我是drupal的新手。

我如何创建像这样的超链接的年度列表：

2012 2011 2009 2008

任何一年内发布的博客文章，然后将它们链接到一个页面以显示该年内博客文章的预告列表

我安装了视图模块并使用了一年的上下文过滤器。我想使用 PHP 代码从 templates.php 文件中的视图中获取结果集并将结果传递给我的模板。

然后我需要建立一些 url 别名来显示特定的模板。例如。site_url/blog/2012 应该显示我的模板。

请注意：我已经有一个 site_url/blog 的模板作为博客登陆页面模板

请告诉我这是否可行以及如何做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T15:06:43.623

默认情况下，分类模块为与术语关联的所有节点创建一个预告列表。因此，如果您创建博客年份词汇表并使用术语参考字段将其附加到博客节点类型，分类法将自动为具有“2012”术语的所有节点以及具有“2011”的所有节点创建分页显示术语等。您可以使用[pathauto](http://drupal.org/project/pathauto)模块为这些设置自定义路径结构，无论如何您都应该使用它。

然后，您需要做的就是创建一个链接到每个术语的块。[分类块](http://drupal.org/project/taxonomy_block)模块将执行此操作。或者您可以创建一个视图以在一个块中输出这些分类链接。

如果您要使用视图，则根本不需要使用分类法。每个节点至少存储两个日期字段，即创建日期和更新日期。您可以在视图中轻松访问它。创建预告片显示视图并添加`Content: Created Year`上下文过滤器。不幸的是，我现在不知道在 Drupal 7 视图中显示年份的好解决方案，所以我可能会为此编写一个模块。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T18:28:46.710

您可以使用同时提供日历模块的[DATE](http://drupal.org/project/date)模块和视图，您可以做任何您想做的事情。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-03-04T13:30:18.450

您可以使用 Views 完成所有操作，无需分类。我不确定是否仅在先前的答案之后才引入此功能。

看一下 Drupal 的“归档”视图，该视图随视图一起提供，但已禁用。*启用*它并彻底检查它。您应该能够根据该示例对其进行排序。

这就是我所做的：

您需要两个视图来显示您的所有帖子。一个 PAGE 视图和一个 BLOCK 视图。确保它们在同一页面上并排显示。

在 PAGE 视图中，在 CONTENT: CREATED YEAR 上创建一个上下文过滤器。这本身就足以过滤您在 URL 中给出的年份的帖子

在 BLOCK 视图中，在 CONTENT: CREATED YEAR 上创建一个上下文过滤器。然后，您可以选择：

```
When the filter value is NOT available:

• Display all results for the specified field
• Provide default value
• Hide view
X Display a summary 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-13T08:12:54.623

为此，您可以使用 Drupal 的内置分类模块。通过转到 转到分类页面`admin->structure->taxonomy`。

在那里，您可以创建一个名为 Year 的新词汇表，您可以在其中输入任意多或少的年份。

然后在您的博客文章内容类型中创建一个名为 year 的新字段，并通过选择术语参考作为类型并按照那里的说明将其链接到词汇表。

如果您愿意，您可以构建一个自动将新年添加到词汇表中的模块，但这是一个完全不同的问题。

然后只显示该年份的帖子，您可以构建一个视图。安装 Views 模块并`structure->views`添加一个新视图以显示博客文章类型的内容。然后，您可以在高级选项卡中设置**上下文过滤器**以显示带有年份标记的过滤器。然后您可以公开过滤器，以便用户可以更改年份并且您应该进行设置。

**注意：**视图需要是一个页面而不是一个块才能工作。

# java - 拆分后为两个变量赋值

> ID：12401662
> 
> 赞同：4
> 
> 时间：2012-09-13T07:44:51.560
> 
> 标签：java, split

我的全名（例如：Robert King）在数据库中用空格分隔。我想将全名拆分为 FIRSTNAME 和 LASTNAME 并将其分配给两个变量。如何在 JAVA 中实现这一点？我知道这很简单，但发现拆分后很难分配给两个变量。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-13T07:49:06.760

您只能分配给 java 中的单个变量，因此您需要两个步骤：

```
String fullname = "Robert King";
String[] names = fullname.split(" ", 1); // "1" means stop splitting after one space
String firstName = names[0];
String lastName = names[1]; 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-09-13T07:51:44.797

这是一个教学示例：

```
/* String to split. */
String str = "Robert King";
String delimiter = " ";

String[] temp = str.split(delimiter);   
String name = temp[0];   
String surname = temp[1]; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-13T07:47:30.520

您可以执行以下操作。

```
String firstName = fullName.split(" ")[0];
String lastName = fullName.split(" ")[1]; 
```

希望这对您有所帮助。干杯。

# ios - iOS：如何在情节提要中的横向和纵向视图之间切换？

> ID：12401667
> 
> 赞同：0
> 
> 时间：2012-09-13T07:45:00.453
> 
> 标签：ios, storyboard, landscape, uiinterfaceorientation, portrait

在我的通用应用程序中，我一开始就有一个主细节。在 iPad 上，它仅显示为拆分视图，当我更改界面方向时，自动调整大小可以正常工作。但在 iPhone 上，这在我的详细视图中还不够好。所以我想为我的 DetailViewController 提供两个不同的视图，它们应该具有完全相同的功能，但我无法真正让它正常工作。我尝试使用两个视图控制器，但这并没有真正完成这项工作。顺便说一句，我正在使用故事板。

我想我已经通过向我的 DetailViewController 添加两个视图找到了解决方案。然后我只需检查当前方向并像这样设置最近的视图：

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath {

    Video *currentVideo = [[self.xmlParser videos] objectAtIndex:indexPath.row];

    if ([[UIDevice currentDevice] userInterfaceIdiom] == UIUserInterfaceIdiomPad)
        [self.detailViewController setDetailItem:currentVideo];
    else {

        if (!self.detailViewController) {

            DetailViewController *nextController = [self.storyboard instantiateViewControllerWithIdentifier:@"Detail"];
            if ([UIDevice currentDevice].orientation == UIDeviceOrientationPortrait)
                [nextController setView:nextController.portraitView];
            else
                [nextController setView:nextController.landscapeView];
            [nextController setDetailItem:currentVideo];
            [self.navigationController pushViewController:nextController animated:YES];
        }        
    }
} 
```

这就像它应该的那样工作，但现在我面临另一个问题。这两个视图包含完全相同的插座，但我只能将其中任何一个的插座连接到我的 DetailViewController 类。因此，在其中一个方向上，我无法正确查看我的内容，或者我必须将所有内容编码两次，这正是我想要避免的事情。

有什么想法可以解决这个问题吗？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T08:54:17.963

您可以尝试将容器视图中的两个视图添加到情节提要中的视图控制器。尺寸一个是肖像，另一个是风景。将所需的所有控件添加到所需的任何视图。当方向改变时 - 隐藏一个并显示另一个。

# iphone - NSString 撇号字符

> ID：12401674
> 
> 赞同：0
> 
> 时间：2012-09-13T07:45:39.000
> 
> 标签：iphone, ios, nsstring

我有一个关于 NSString 中撇号字符的问题。

我正在从某个 Web 服务接收 json 对象，并且撇号字符在那里表示为“”。

我应该手动将此字符替换为撇号，还是可能以某种方式更改字符串的编码并使 NSString 显示为 '?

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T09:52:19.950

你试过这个吗？只是尝试过滤你的字符串然后记录它。

```
yourString = [yourString stringByReplacingOccurrencesOfString:@"'''" withString:@""]; 
```

# perl - 如何在 html 树中向上移动一个节点并提取链接？

> ID：12401684
> 
> 赞同：7
> 
> 时间：2012-09-13T07:46:21.550
> 
> 标签：perl, html-parsing

我知道我的问题标题不是那么描述性，但让我在这里解释一下。

我正在尝试使用 HTML::TreeBuilder解析给定的[html 文档。](http://sprunge.us/RKJF)现在在这个 html 文档中`5,1,ABC,DEF`的值将根据用户提供的值进行验证，如果验证成功，我必须提取`href`链接。

所以，我的代码是：

```
my @tag = $tree->look_down( _tag => 'tr', class => qr{\bepeven\scompleted\b} );
for (@tag) {

    query_element($_);
}

sub query_element {

    my @td_tag = $_[0]->look_down( _tag => 'td' );

    my $num1 = shift @td_tag; #Get the first td tag
    my $num2 = shift @td_tag; # Get the second td tag

    #Making sure first/second td tag has numeric value
    $num1 = $1 if $num1->as_text =~ m!(\d+)! or die "no match found";
    $num2 = $1 if $num2->as_text =~ m!(\d+)! or die "no match found";

    #Validating that above value's match the user provided value 5 and 1.
    if ( $num1 eq '5' && $num2 eq '1' ) { 
        say "hurray..!!";

        #Iterating over rest of the td tag to make sure we get the right link from it.
        for (@td_tag) {

            #Check if contains ABC and than procede to fetch the download href link.
            if ($_->look_down(_tag  => 'td', class => qr{[c]}, sub {
                        $_[0]->as_text eq 'ABC';} )
            )   
            {   
                my $text = $_->as_text;
                say "Current node text is: ", $text; #outputs ABC

                #Now from here how do I get the link I want to extract.
            }
        }
    }
} 
```

现在，我的方法是首先从中提取值`td tags`并将其与用户指定的值进行匹配，如果它是成功的，而不是寻找另一个用户指定的值，或者`ABC or DEF`在我的情况下，`ABC`如果它匹配**则只**提取链接。

现在，标签 containsig`ABC or DEF`没有固定位置，但它们将位于包含`5 and 1`值的标签下方。所以，我曾经`$_[0]->as_text eq 'ABC';`检查标签`ABC`现在包含在我的树中我目前在`text node`ABC 从这里如何提取链接 href i，e 如何向上移动对象树并提取值。

PS：我会在这里尝试 xpath，但 html 元素的位置不是那么明确和结构化。

**编辑：**

所以，我尝试`$_->tag()`并返回`td`，但如果我在 td 标签上，那么为什么以下代码不起作用：

```
my $link_obj = $_->look_down(_tag => 'a') # It should look for `a` tag.
say $link_obj->as_text; 
```

但它给出了以下错误：

```
Can't call method "as_text" on an undefined value. 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-18T02:27:01.803

我希望以下内容（使用我自己的 Marpa::R2::HTML）对您有所帮助。请注意，HTML::TreeBuilder 答案只能找到一个答案。下面的代码找到了两个，我认为这是意图。

```
#!perl

use Marpa::R2::HTML qw(html);

use 5.010;
use strict;
use warnings;

my $answer = html(
    ( \join q{}, <DATA> ),
    {   td => sub { return Marpa::R2::HTML::contents() },
        a  => sub {
            my $href = Marpa::R2::HTML::attributes()->{href};
            return undef if not defined $href;
            return [ link => $href ];
        },
        'td.c' => sub {
            my @values = @{ Marpa::R2::HTML::values() };
            if ( ref $values[0] eq 'ARRAY' ) { return $values[0] }
            return [ test => 'OK' ] if Marpa::R2::HTML::contents eq 'ABC';
            return [ test => 'OK' ] if Marpa::R2::HTML::contents eq 'DEF';
            return [ test => '' ];
        },
        tr => sub {
            my @cells = @{ Marpa::R2::HTML::values() };
            return undef if shift @cells != 5;
            return undef if shift @cells != 1;
            my $ok = 0;
            my $link;
            for my $cell (@cells) {
                my ( $type, $value ) = @{$cell};
                $ok = 1 if $type eq 'test' and $value eq 'OK';
                $link = $value if $type eq 'link';
            }
            return $link if $ok;
            return undef;
        },
        ':TOP' => sub { return Marpa::R2::HTML::values(); }
    }
);

die "No parse" if not defined $answer;
say join "\n", @{$answer};

__DATA__
<table>
    <tbody>

        <tr class="epeven completed">
            <td>5</td>
            <td>1</td>
            <td class="c">ABC</td>
            <td class="c">satus</td>
            <td class="c"><a href="/path/link">Download</a></td>
        </tr>
        <tr class="epeven completed">
            <td>5</td>
            <td>1</td>
            <td class="c">status</td>
            <td class="c">DEF</td>
            <td class="c"><a href="/path2/link">Download</a></td>
        </tr>

    </table> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-13T17:50:30.920

我不确定我是否了解您要做什么，但是沿着这些思路？使用look_down来描述你想要什么，没有必要尝试在树周围导航；那将是脆弱的。

```
use strict;
use warnings;
use HTML::TreeBuilder 5 -weak;
use 5.014;

my $tree = HTML::TreeBuilder->new_from_content(<DATA>);

for my $e ($tree->look_down( _tag => 'a',
                             sub { my $e = $_[0];
                                   my $tr = $e->parent->parent; ### Could also use ->lineage to search up through the 
                                                                ### containing elements
                                   return unless $tr->attr('_tag') eq 'tr' and $tr->attr('class') eq 'epeven completed';
                                   return (     $tr->look_down( _tag => 'td', sub { $_[0]->as_text eq '1'; })
                                            and $tr->look_down( _tag => 'td', sub { $_[0]->as_text eq '5'; })
                                            and $tr->look_down( _tag => 'td', class => 'c', sub { $_[0]->as_text eq 'ABC'; })
                                          );
                                 }
                           )
          ) {
    say $e->attr('href');
}

__DATA__

<table>
    <tbody>

        <tr class="epeven completed">
            <td>5</td>
            <td>1</td>
            <td class="c">ABC</td>
            <td class="c">satus</td>
            <td class="c"><a href="/path/link">Download</a></td>
        </tr>
        <tr class="epeven completed">
            <td>5</td>
            <td>1</td>
            <td class="c">status</td>
            <td class="c">DEF</td>
            <td class="c"><a href="/path2/link">Download</a></td>
        </tr>

    </table> 
```

输出：

```
/path/link 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-13T17:51:57.370

如果您可以放弃 HTML::TreeBuilder，您可能会解析如下内容：

```
for my $r ($content =~ m{<tr class="epeven completed">(.*?)</tr>}gs) {
    my ($n1, $n2) = $r =~ m{<td>(\d+)</td>\s*<td>(\d+)</td>}g;
    next if $n1 != 5 || $n2 != 1;
    next if $r !~ m{<td class="c">ABC</td>}g;
    my ($link) = $r =~ m{<a href="(.*?)">Download</a>}g;
    say $link;
} 
```

# php - sql中的varchar和int语法

> ID：12401690
> 
> 赞同：0
> 
> 时间：2012-09-13T07:46:55.750
> 
> 标签：php, mysql

```
CREATE TRIGGER leave_trigger
 AFTER INSERT ON leaveapplication
 FOR EACH ROW
 IF employeemaster.empcode='".$empcode."' THEN
 UPDATE employeemaster SET '".$leave_type=$leave_type."'-$numberofleave //I am facing problem here
 END IF; 
```

请帮我在语法上更正它 GIVEN `$leave_type`is`varchar`和`$numberofleave`is `integer`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T07:59:56.837

您需要将字段名称保存在不同的变量中

```
UPDATE employeemaster SET '".$fieldName."=".$leave_type."'-$numberofleave 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T07:49:21.327

我对你正在尝试做的事情有点困惑。您是否尝试创建一个将自动执行以下查询的触发器？

```
UPDATE 
    employeemaster 
        SET leave_type=leave_type-".$numberofleave." 
        where empcode='".$empcode."' 
```

然后我想你想这样写触发器：

```
CREATE TRIGGER leave_trigger
    AFTER INSERT ON leaveapplication
    FOR EACH ROW
        UPDATE employeemaster SET leave_type=leave_type-NEW.numberofleave where empCode=NEW.empCode
    END; 
```

在触发器中，您不想使用 PHP 中的任何具有细节的变量。您想将数据插入到一个表 (leaveApplication) 中，然后让触发器使用该表中的数据来更新*employeemaster*。如果您对触发器中的数据进行硬编码，您将需要为*employeemaster*中的每一行数据创建一个触发器，否则触发器将无法按预期工作。

# c# - HttpWebRequest 动态网址

> ID：12401695
> 
> 赞同：0
> 
> 时间：2012-09-13T07:47:24.067
> 
> 标签：c#, .net

我正在使用 2 个 Web 服务器进行开发，1 个发布服务器，另一个用于调试。他们没有相同的网址。

我想制作一个 HttpWebRequest ，它可以在两台机器上运行，具体取决于代码所在的服务器。我的 VS2010 项目不是 Web 应用程序，所以我无权访问 http 上下文。

```
 HttpWebRequest request = (HttpWebRequest)WebRequest.Create(rootofwebserver + "/webservices/someservice.asmx/someoperation"); 
```

这就是我要的。

这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T08:00:31.170

使用[AppSettings](http://msdn.microsoft.com/en-us/library/aa903313%28v=vs.71%29.aspx)元素设置您的网址：

```
<appSettings>
   <add key="WebRequestUrl" value="..." />
</appSettings> 
```

然后在您的代码中，您可以执行以下操作：

```
string webRequestUrl = ConfigurationManager.AppSettings["WebRequestUrl"]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T08:29:41.413

您可以创建 .txt 文件并存储您的网址并在需要时再次阅读。这是我认为的一种简单方法。

# direct3d - HLSL 中的括号导致光衰减功能无法正常工作？

> ID：12401698
> 
> 赞同：2
> 
> 时间：2012-09-13T07:47:38.453
> 
> 标签：direct3d, point, hlsl, parentheses, light

我的像素着色器中有一个漫反射+镜面反射方程，除了这个问题外，它工作得很好：

当我改变这个：浮动衰减= 1.0f / d * d;

为此：浮动衰减 = 1.0f / ( d*d );

我的模型不再发光，而是我的环境强度的颜色。我觉得这非常奇怪。我想要括号的原因是我可以使用不同的衰减函数，例如 ( 1 + 0.045*d + 0.0075*d*d )。

这是我的整个像素着色器：

```
void ps( in v2p input, out float4 final_color : SV_TARGET )
{
    float3 ambient_intensity = float3( 0.3f, 0.3f, 0.3f );
    float3 diffuse_color = float3( 0.8f, 0.8f, 0.8f);
    float3 specular_color = float3( 1.0f, 1.0f , 1.0f );

    float3 tmp_light;
    tmp_light.x = light_vector.x;
    tmp_light.y = light_vector.y;
    tmp_light.z = light_vector.z;

    float3 norm_light = normalize( tmp_light );

    float3 tmp_pos;
    tmp_pos.x = input.pos.x;
    tmp_pos.y =  input.pos.y;
    tmp_pos.z = input.pos.z;

    float3 tmp_norm;
    tmp_norm.x = input.norm.x;
    tmp_norm.y = input.norm.y;
    tmp_norm.z = input.norm.z;

    float3 tmp_cam = float3( 0.0f, 0.0f, -20.0f ); // todo: make this stuff work right in cbuffer

    // light intensity
    float d = distance( tmp_light, tmp_pos );

    float attenuation = 1.0f / d*d;
    float3 pointlight = attenuation*light_color;

    // diffuse lighting 
    float diffuse = max( dot( tmp_norm, norm_light) , 0.0f );
    float3 diffuse_final = diffuse_color*ambient_intensity + diffuse_color*pointlight*diffuse;

    // specular lighting
    float3 reflect_vect = 2*dot( tmp_norm, norm_light )*tmp_norm - norm_light;
    float ref_max = max( dot( reflect_vect, normalize(tmp_cam) ), 0.0f );
    float spec_exponent = pow ( ref_max, 1.0f );

    float3 spec_final;
    if( dot( tmp_norm, norm_light ) <= 0 )
    {
        spec_final = float3( 0.0f, 0.0f, 0.0f );
    }
    if( dot( tmp_norm, norm_light ) > 0 )
    {
        spec_final = specular_color*pointlight*spec_exponent;
    }

    final_color = float4(  diffuse_final + spec_final, 1.0f );
} 
```

不带括号：http: [//i48.tinypic.com/357rmnq.png](http://i48.tinypic.com/357rmnq.png)

带括号：http: [//i45.tinypic.com/70jscy.png](http://i45.tinypic.com/70jscy.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-16T15:46:25.490

这条线`float attenuation = 1.0f / d*d;`等于`float attenuation = 1.0f;`，这就是为什么你得到没有衰减的阴影对象。

假设您的对象放置在原点附近并且与其到相机的距离相比较小，则使用`float attenuation = 1.0f / (d*d);`. 那是因为`d`is around`20.0`和 the `attenuation`is `1.0 / 400.0 = 0.0025`。所以模型上唯一的可见光是环境光。事实上，这是正确的——点光源的衰减非常高，因此对物体几乎没有影响。试试其他一些衰减函数，例如`1.0f / (0.003*d*d)`，你会看到不同的。

# c# - WPF 命名空间混淆

> ID：12401700
> 
> 赞同：1
> 
> 时间：2012-09-13T07:47:46.903
> 
> 标签：c#, wpf, xaml, namespaces

我有两个需要从 WPF 窗口访问的 clrnamespace，它们的名称有冲突

```
xmlns:ns1="clr-namespace:Namespace1.Namespace2.Namespace3.Namespace4;assembly="
xmlns:ns2="clr-namespace:Namespace2;assembly=Namespace2" 
```

当我去使用 Namespace2 中的任何东西时，例如

```
<Canvas>
  <ns2:MyControl ... />
</Canvas> 
```

我收到以下编译错误

```
The type or namespace name 'MyControl' does not exist in the namespace 'Namespace1.Namespace2' (are you missing an assembly reference?) 
```

我知道命名空间的命名不是很好，但是改变前者需要远离系统其他地方使用的结构，而改变后者需要改变系统的其他部分。

有没有人对如何解决这个问题有任何建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T09:32:15.620

如果您找不到使用“xmlns:”的解决方案，那么您可以考虑使用`XmlnsDefinition`将多个 clrnamespace 映射到由 URI 标识的 XML 命名空间，然后使用该 URI 来引用 clr 命名空间集。

在每个包含要分组的 CLR 类型的程序`XmlnsDefinition`集中放入一个。`AssemblyInfo.cs`

```
[XmlnsDefinition("http://www.mycompany.com/appname", "Namespace1.Namespace2.Namespace3.Namespace4")]

[XmlnsDefinition("http://www.mycompany.com/appname", "Namespace2")] 
```

*   [http://www.global-webnet.net/blogengine/post/2010/06/20/WPF-assembly-XmlnsDefinition-identify-types-for-XAML-usage.aspx](http://www.global-webnet.net/blogengine/post/2010/06/20/WPF-assembly-XmlnsDefinition-identify-types-for-XAML-usage.aspx)

然后在您的 XAML 中，您可以执行以下操作：

```
xmlns:ns="http://www.mycompany.com/appname" 
```

然后它应该允许您使用公共前缀访问类型。

* * *

另一方面，也许您忘记在项目中添加对 Namespace2 DLL 的引用？

如果以上都不起作用，您能否再描述一下您的项目结构，例如，您能否显示 MyControl 代码...它所在的位置...并显示代码的命名空间语句。

# android - 如何在android的表格布局中动态添加复选框

> ID：12401703
> 
> 赞同：0
> 
> 时间：2012-09-13T07:47:57.060
> 
> 标签：android, android-checkbox

我的 xml 文件中有一个滚动视图，其中有许多布局。该表格布局中还有一个表格布局，我想动态添加一些复选框。我不知道如何在 xml 文件中的预定义布局中添加动态检查请帮助我。提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T06:34:47.600

试试这个代码

```
TableLayout Table = (TableLayout) findViewById(R.id.features);
CheckBox Box= new CheckBox(this);

        Table .addView(Box); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T15:06:11.300

要将动态创建的复选框添加到您的布局中，您可以执行以下操作

```
 TableLayout l = (TableLayout) findViewById(ID_OF_YOUR_LAYOUT);
    CheckBox box = new CheckBox(this);
    box.setChecked(true);
    box.setOnCheckedChangeListener(new OnCheckedChangeListener(){

        public void onCheckedChanged(CompoundButton arg0, boolean arg1) {
            //what happens when the it's unchecked or checked       
        }
    });

    l.addView(box); 
```

这会将复选框放在您的布局上的某个位置（您拥有哪种布局并不重要，因为它们都继承自具有方法 addView 的视图类）。如果您想指定复选框的外观和位置，您可以使用

```
 RelativeLayout.LayoutParams layout = 
            new RelativeLayout.LayoutParams(LayoutParams.WRAP_CONTENT, 200);
    l.addView(box,layout); 
```

如果您使用的是LinearLayout，您将使用LinearLayout.LayoutParams 而不是RelativeLayout.LayoutParams。

如果您弄乱了不同的布局属性，您可以使用 LayoutParams 模拟您在 xml 中所做的任何事情。

# node.js - Heroku 调度程序

> ID：12401704
> 
> 赞同：0
> 
> 时间：2012-09-13T07:48:01.813
> 
> 标签：node.js, heroku

根据我对 Heroku 的了解，您可以运行后台进程（工作人员）和运行代码片段的计划任务。我有一个工作进程来轮询一些社交网络并检查新内容（它比一个简单的任务更复杂，所以我认为我不能使用调度程序？）。一旦执行，它就会关闭。有没有办法安排我的工作进程，以便它经常运行？我可以将代码添加到工作进程中，以便在代码完成后立即重新执行代码，但我认为这会增加文件运行的时间，因此计入我的测功时间？任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T12:33:51.643

如果您对每 10 分钟、每小时或每天执行一次，您当然可以使用调度程序插件。除了您使用的任何 web dyno 时间之外，计划的任务开始他们自己的流程。

如果您需要比调度程序允许的更频繁，您需要运行一个更频繁地执行您的代码的工作程序。

# css - Web 字体：某些字符在 Windows 上被垂直挤压

> ID：12401716
> 
> 赞同：0
> 
> 时间：2012-09-13T07:48:40.643
> 
> 标签：css, windows, font-face

我在项目中使用的网络字体遇到了一个非常奇怪的问题。最初我认为这是一个仅限 IE 的错误（出现在 Windows Vista、Windows 7 的 IE 9 中）。我很高兴恢复为 IE 的系统字体，但现在它出现在 Chrome 中我真的很想找到问题的根源。截图如下：

![字体面临窗口错误](../Images/861e2caf9af16c2bf0b06ff16babb964.png)

编辑：字体是[Aktiv Grotesk Light ，使用](https://www.daltonmaag.com/buyonline/fonts/aktivgrotesk)[Font Squirrel Generator](http://www.fontsquirrel.com/fontface/generator)转换为网络字体。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T09:01:25.643

这是字体实现中的问题，或者是 Windows 中的字体渲染中的问题，具体取决于您采取哪一方。其他问题中已经描述了类似的问题，请参见例如[css google fonts cyrillic - some letters are cut off](https://stackoverflow.com/questions/12246024/css-google-fonts-cyrillic-some-letters-are-cut-off/)。

实际的解决方案可能是查看字体在不同尺寸下是否效果更好（1px 可以产生很大的不同），如果这没有帮助，则寻找另一种字体。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T07:58:14.127

OS X 的字体渲染比 Windows 更好。OS X 使用`Subpixel rendering`女巫会有所作为。

你在使用@fontface 吗？尝试使用 cufón，一般来说，使用 cufón 比在 windows 上使用 @fontface 更好地呈现字体。

# java - 根据子位置隐藏子元素在可扩展列表视图中

> ID：12401717
> 
> 赞同：0
> 
> 时间：2012-09-13T07:48:46.093
> 
> 标签：java, android

我需要根据 ExpandableListView 中的 groupPosition 和 childPosition 隐藏某些组的某些子项。但是在多次扩展组时（特别是当扩展组不在焦点时），我得到的 childPosition 的值与以前不同。所以不同的行被隐藏了。知道我如何每次都抓住合适的孩子吗？

现在我设置了一个高度为 0dp 的不同布局，因为如果我将 Visibility 设置为 View.GONE，它会将行显示为空白。

```
if (convertView == null) {

            if (((m_Budget.budget_planTypeid.equals("budget_single")) || (m_Budget.budget_planTypeid.equals("budget_double")) // hide
                                                                                                                                // pets
                    || (m_Budget.budget_planTypeid.equals("budget_singlefamily")) || (m_Budget.budget_planTypeid.equals("budget_doublefamily"))) && (groupPosition == 4)
                    && (childPosition == 5)) {
                convertView = inflater.inflate(R.layout.blankrow, parent, false);
            } else if (((m_Budget.budget_planTypeid.equals("budget_single")) || (m_Budget.budget_planTypeid.equals("budget_double")) // hide
                                                                                                                                        // child
                                                                                                                                        // care
                    || (m_Budget.budget_planTypeid.equals("budget_singlepet")) || (m_Budget.budget_planTypeid.equals("budget_doublepet"))) && (groupPosition == 3)
                    && (childPosition == 6)) {
                **convertView = inflater.inflate(R.layout.blankrow, parent, false);**
            } else {
                convertView = inflater.inflate(R.layout.budget_list_rowitem, parent, false);
            } 
```

粗体是空白行的布局。否则我设置一个通常的布局

# android - 复选框问题：项目选择和 SQLite 数据库 - ANDROID

> ID：12401721
> 
> 赞同：0
> 
> 时间：2012-09-13T07:48:49.850
> 
> 标签：android, listview, checkbox, insert, sqlite

我遇到复选框问题。那么两个问题。

1.  当我选中复选框中的项目时，其他项目也被选中。
2.  我无法将名称（在检查后）捕获到 SQLiteDatabase 表中。

我的应用程序有一个联系人姓名列表视图（从 android 内置联系人列表中检索）和复选框。另外，用户可以多选列表中的名称。
我在一节课中有两节课
1\. `public class ContactsList`
2.`public class MyCustomAdapter`

这是我的代码：ContactsList.java -更新了**我的代码**

公共类 ContactsList 扩展 ListActivity { static ArrayList friendsList = new ArrayList();

```
ListView list;
private ContactsList[] friends;
private ArrayAdapter<ContactsList> listAdapter;

final Context context = this;

Cursor cursor;

String[] buddiesList = 
    {"Kanak Priya",
    "Joanne Liew",
    "Michelle Lam",
    "Teo Kin Hua",
    "Melissa Haiting",
    "David Yeo",
    "Natasha Akhbar",
    "Gillian Gan",
    "Sonia",
    "Ms Long",
    "Joan Tang",
    "Stephanie",
    "Nur Ashiqin"
    };

BuddyDBAdapter buddyDB = new BuddyDBAdapter(this);

/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) 
{
    super.onCreate(savedInstanceState);
    //setListAdapter(new MyCustomAdapter(ContactsList.this, R.layout.contacts_list, buddiesList));
    setContentView(R.layout.contacts_list);

    setListAdapter(new ArrayAdapter<String>(this, R.layout.contacts_list, buddiesList));

    ListView list = (ListView) findViewById(android.R.id.list);
    //ListView list = getListView();
    list.setOnItemClickListener(new AdapterView.OnItemClickListener()
    {

        @Override
        public void onItemClick(AdapterView<?> parent, View view, int position,
                long id)
        {
            ContactsList friends = listAdapter.getItem(position);
            friends.**toggleChecked**();
            ContactsListViewHolder viewHolder = (ContactsListViewHolder) view.getTag();
            viewHolder.**getCheckBox**().setChecked(friends.**isChecked**());

            Cursor cursor = null;

               cursor = (Cursor) parent.getItemAtPosition(position);
               Intent intent = new Intent(ContactsList.this, Create_Events.class);
               intent.putExtra("name", cursor.getString(cursor.getColumnIndex(buddyDB.KEY_NAME)));
               startActivity(intent);

        }

    });

    ContactsList[] arrContacts = friendsList.toArray(new ContactsList[0]);

    Uri allContacts = Uri.parse("content://contacts/people");

    Cursor c = managedQuery(allContacts, null, null, null, null);

    String[] columns = new String[] {ContactsContract.Contacts.DISPLAY_NAME};
    int[] views = new int[]  {R.id.contactName};

    startManagingCursor(c);

    SimpleCursorAdapter friendsAdapter = new SimpleCursorAdapter(this, R.layout.contacts_list, c, columns, views);
    this.setListAdapter(friendsAdapter);
}

private static class ContactsName
{
    private String name = "";
    private boolean checked = false;

    public ContactsName(String name)
    {
        this.name = name;
    }

    public String getName()
    {
        return name;
    }

    public boolean isChecked()
    {
        return checked;
    }

    public void setChecked(boolean checked)
    {
        this.checked = checked;
    }

    public String toString()
    {
        return name;
    }

    public void toggleChecked()
    {
        checked = !checked;
    }
}

private static class ContactsListViewHolder
{
    private CheckBox nameCheck;
    private TextView contactName;

    public ContactsListViewHolder(TextView contactName, CheckBox nameCheck)
    {
        this.nameCheck = nameCheck;
        this.contactName = contactName;
    }

    public CheckBox getNameCheck()
    {
        return nameCheck;
    }

    public TextView getContactName()
    {
        return contactName;
    }
}

private static class ContactsCustomAdapter extends ArrayAdapter<ContactsList>
{
    private LayoutInflater inflater;

    public ContactsCustomAdapter(Context context, List<ContactsList> friendsList)
    {
        **super(context, R.layout.contacts_list, R.id.contactName,  R.id.contactCheckbox, friendsList);**
        inflater = LayoutInflater.from(context);
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent)
    {
        ContactsList friends = (ContactsList) this.getItem(position);

        CheckBox nameCheck;
        TextView contactName;

        if(convertView == null)
        {
            convertView = inflater.inflate(R.layout.contacts_list, null);

            contactName = (TextView) convertView.findViewById(R.id.contactName);
            nameCheck = (CheckBox) convertView.findViewById(R.id.contactCheckbox);

            convertView.setTag(new ContactsListViewHolder(contactName, nameCheck));

            nameCheck.setOnClickListener(new View.OnClickListener()
                {

                    @Override
                    public void onClick(View v)
                    {
                        CheckBox cb = (CheckBox) v;
                        ContactsList friends = (ContactsList) cb.getTag();
                        friends.**setChecked**(cb.isChecked());

                        if(cb.isChecked())
                        {
                            friendsList.add(friends.**name**);
                        }
                        else
                        {
                            friendsList.remove(friends.**name**);
                        }
                    }   
                });
        }
        else
        {
            ContactsListViewHolder viewHolder = (ContactsListViewHolder) convertView.getTag();
            nameCheck = viewHolder.**getCheckBox**();
            contactName = viewHolder.**getTexView**();
        }
    }
}

@Override
public void onListItemClick(ListView l, View v, int position, long id)
{
    buddyDB.open();
    long name_id;
    super.onListItemClick(l, v, position, id);

    Cursor cursor = null;

       cursor = (Cursor) l.getItemAtPosition(position);
       Intent intent = new Intent(ContactsList.this, Create_Events.class);
       intent.putExtra("name", cursor.getString(cursor.getColumnIndex(buddyDB.KEY_NAME)));
       startActivity(intent);

    ListView list = getListView();
    list.setChoiceMode(2);
    list.setTextFilterEnabled(true);

    l.setItemChecked(position, l.isItemChecked(position));

    Cursor c = ((SimpleCursorAdapter)l.getAdapter()).getCursor();
    c.moveToPosition(position);

    TextView contactName = (TextView) v.findViewById(R.id.contactName);
    String NameValue = contactName.getText().toString();        
    name_id = buddyDB.insertNames(NameValue);

    Toast.makeText(getBaseContext(),
            "Selected: " + buddiesList[position], Toast.LENGTH_SHORT).show();       
    buddyDB.close();

} 
```

}

**注意**
我加粗的代码意味着这些是我遇到的错误。它要求为`isChecked(), toggleChecked(), setChecked() and getCheckBox()`.

要求为其创建字段类型或常量类型，`name`但我已经创建了它

```
private static class ContactsName
    {
        private String name = ""; 
```

我不确定我在哪里编码错误。我需要能够将名称插入数据库表中，并且我想确保当我检查一个名称时，不应该检查其他名称。任何人都可以帮助我吗？
谢谢！=)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T08:20:23.080

这里以行星名称为例，只需将字符串更改为联系人姓名：

```
public class PlanetsActivity extends Activity {
static ArrayList<String> FavList = new ArrayList<String>();

  private ListView mainListView ;
  private Planet[] planets ;
  private ArrayAdapter<Planet> listAdapter ;

  /** Called when the activity is first created. */
  @Override
  public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main2);

    // Find the ListView resource. 
    mainListView = (ListView) findViewById( R.id.mainListView );

// When item is tapped, toggle checked properties of CheckBox and Planet.
    mainListView.setOnItemClickListener(new AdapterView.OnItemClickListener() {
  @Override
  public void onItemClick( AdapterView<?> parent, View item, 
                           int position, long id) {
    Planet planet = listAdapter.getItem( position );
    planet.toggleChecked();
    PlanetViewHolder viewHolder = (PlanetViewHolder) item.getTag();
    viewHolder.getCheckBox().setChecked( planet.isChecked() );
  }
});

    // Create and populate planets.
planets = (Planet[]) getLastNonConfigurationInstance() ;
if ( planets == null ) {
  planets = new Planet[] { 
      new Planet("Mercury"), new Planet("Venus"), new Planet("Earth"), 
      new Planet("Mars"), new Planet("Jupiter"), new Planet("Saturn"), 
      new Planet("Uranus"), new Planet("Neptune"), new Planet("Ceres"),
      new Planet("Pluto"), new Planet("Haumea"), new Planet("Makemake"),
      new Planet("Eris")
      };  
    }
ArrayList<Planet> planetList = new ArrayList<Planet>();
planetList.addAll( Arrays.asList(planets) );

// Set our custom array adapter as the ListView's adapter.
listAdapter = new PlanetArrayAdapter(this, planetList);
mainListView.setAdapter( listAdapter );      
  }

  /** Holds planet data. */
  private static class Planet {
  private String name = "" ;
  private boolean checked = false ;
  public Planet( String name ) {
  this.name = name ;
}
public String getName() {
  return name;
}
public boolean isChecked() {
  return checked;
}
public void setChecked(boolean checked) {
  this.checked = checked;
}
public String toString() {
  return name ; 
}
public void toggleChecked() {
  checked = !checked ;
    }
  }

  /** Holds child views for one row. */
  private static class PlanetViewHolder {
private CheckBox checkBox ;
private TextView textView ;
public PlanetViewHolder( TextView textView, CheckBox checkBox ) {
  this.checkBox = checkBox ;
  this.textView = textView ;
}
public CheckBox getCheckBox() {
  return checkBox;
}
public TextView getTextView() {
  return textView;
}    
  }

  /** Custom adapter for displaying an array of Planet objects. */
  private static class PlanetArrayAdapter extends ArrayAdapter<Planet> {

    private LayoutInflater inflater;

    public PlanetArrayAdapter( Context context, List<Planet> planetList ) {
      super( context, R.layout.simplerow, R.id.rowTextView, planetList );
      // Cache the LayoutInflate to avoid asking for a new one each time.
      inflater = LayoutInflater.from(context) ;
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {
      // Planet to display
      Planet planet = (Planet) this.getItem( position ); 

      // The child views in each row.
      CheckBox checkBox ; 
      TextView textView ; 

      // Create a new row view
      if ( convertView == null ) {
       convertView = inflater.inflate(R.layout.simplerow, null);

      // Find the child views.
      textView = (TextView) convertView.findViewById( R.id.rowTextView );
      checkBox = (CheckBox) convertView.findViewById( R.id.CheckBox01 );

    // Optimization: Tag the row with it's child views, so we don't have to 
    // call findViewById() later when we reuse the row.
    convertView.setTag( new PlanetViewHolder(textView,checkBox) );

    // If CheckBox is toggled, update the planet it is tagged with.
    checkBox.setOnClickListener( new View.OnClickListener() {
      public void onClick(View v) {
        CheckBox cb = (CheckBox) v ;
        Planet planet = (Planet) cb.getTag();
        planet.setChecked( cb.isChecked() );

        if (cb.isChecked()){
            FavList.add(planet.name);
        }
        else{
            FavList.remove(planet.name);
        }
      }
    });        
  }
  // Reuse existing row view
  else {
    // Because we use a ViewHolder, we avoid having to call findViewById().
    PlanetViewHolder viewHolder = (PlanetViewHolder) convertView.getTag();
    checkBox = viewHolder.getCheckBox() ;
    textView = viewHolder.getTextView() ;
  }

  // Tag the CheckBox with the Planet it is displaying, so that we can
  // access the planet in onClick() when the CheckBox is toggled.
  checkBox.setTag( planet ); 

  // Display planet data
  checkBox.setChecked( planet.isChecked() );
  textView.setText( planet.getName() );      

  return convertView;
}

  }

  public Object onRetainNonConfigurationInstance() {
    return planets ;
  }

  public void comments (View view) {
  Intent myintent = new Intent (getApplicationContext(), DB.class);
  myintent.putExtra("name", FavList);
  startActivity(myintent);
  }
} 
```

DB.class 看起来像：

```
public class DB extends ListActivity {

private final String SAMPLE_DB_NAME = "myFriendsDb";
private final String SAMPLE_TABLE_NAME = "friend";

/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    ArrayList<String> NumList = getIntent().getStringArrayListExtra("name");
    ArrayList<String> results = new ArrayList<String>();
    SQLiteDatabase sampleDB = null;

    try {
        sampleDB =  this.openOrCreateDatabase(SAMPLE_DB_NAME, MODE_PRIVATE, null);

        sampleDB.execSQL("CREATE TABLE IF NOT EXISTS " +
                SAMPLE_TABLE_NAME +
                " (FirstName VARCHAR);");

        for(String str: NumList){
            sampleDB.execSQL("INSERT INTO " +
                        SAMPLE_TABLE_NAME +
                        " ( FirstName ) Values ('"+str+"');");
            }

        Cursor c = sampleDB.rawQuery("SELECT FirstName FROM " +
                SAMPLE_TABLE_NAME +
                " where FirstName > 10 LIMIT 5", null);

        if (c != null ) {
            if  (c.moveToFirst()) {
                do {
                    String firstName = c.getString(c.getColumnIndex("FirstName"));
                    results.add("" + firstName);
                }while (c.moveToNext());
            } 
        }

        this.setListAdapter(new ArrayAdapter<String>(this, android.R.layout.simple_list_item_1,results));

    } catch (SQLiteException se ) {
        Log.e(getClass().getSimpleName(), "Could not create or Open the database");
    } finally {
        if (sampleDB != null) 
            sampleDB.execSQL("DELETE FROM " + SAMPLE_TABLE_NAME);
            sampleDB.close();
    }
}
} 
```

# git - 拒绝拉取本地不存在的分支

> ID：12401722
> 
> 赞同：1
> 
> 时间：2012-09-13T07:48:54.903
> 
> 标签：git

每当我想拉、推、变基或获取时，都会出现问题。

这是我这样做时得到的分支列表`git branch -l`：

```
*develop
rel/9.8.x
rel/9.9.x 
```

现在，以前我有一个名为的分支`origin/rel/9.7.7`，我通过这样做删除了它，`git branch -D origin/rel/9.7.7`但它仍然存在于远程 -

现在，当我尝试执行 pull、push、rebase 或 fetch 时，我会收到以下消息：

```
 ! [rejected]        rel/9.7.7 -> origin/rel/9.7.7  (non-fast-forward) 
```

我检查了我的 git 配置，其中没有任何关于 9.7.7 的说明（但有一些关于其他分支的信息）。

我能做些什么？我在哪里可以看？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T07:53:39.593

您是否删除了远程和本地的分支？

```
git push origin :rel/9.7.7 
```

# grails - 如何从 Grails 中的控制器类中保存外键？

> ID：12401723
> 
> 赞同：1
> 
> 时间：2012-09-13T07:48:54.563
> 
> 标签：grails, groovy, one-to-many, foreign-key-relationship

我是 Groovy nd Grails 的新手。我不知道如何将外键保存到子表中。我有两个名为 Person 和 Telephone 的域类。我试图保存但它不起作用。请帮助我。

Person.groovy

```
class Person {

    String name
        String password        
    static constraints = {
        name(blank:false)
                password(blank:false)
    }
    static hasMany = [telephone:Telephone]
    @Override
    public String toString() {
        // TODO Auto-generated method stub
    name
    }
} 
```

电话.groovy

```
class Telephone {

    String number
    Person person
    static constraints = {
        number(blank:false)
        person()
    }
    static belongsTo = [person:Person]
    @Override
    public String toString() {
        // TODO Auto-generated method stub
    number
    }
} 
```

存储在会话变量中的登录人员 ID。

```
session.setAttribute("user_id") 
```

然后我试图保存号码。

TelephoneController.groovy

```
class TelephoneController {

     def index() {
        redirect(action:'create')
         }
    def create(){

    }
def save(){
        def number=new Telephone(params)
        int user_id=Integer.parseInt(session.getAttribute("user_id").toString())
                params.person=user_id       
        if(!number.hasErrors() && number.save()){
            println "save"
            flash.toUser="Person Details [${number.number}] has been added."
            redirect(view:'create')
        }
    }
} 
```

但它不起作用。请帮助我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T11:02:10.553

我同意第一个答案。您使代码过于复杂。如果你只想为一个人存储许多电话号码，这样的事情就足够了：

```
class Person {

    String name
    String password

    static hasMany = [phoneNumbers:String]

    static constrains = ...
} 
```

基本上，您不需要另一个域类来仅存储 Person 的数字列表。然后在控制器中，您需要：

```
 def save() {
        int user_id = session['user_id'] // no need to parse, Groovy will handle
        def user = Person.get(user_id) // you need to fetch the Person from database (the same applies when using additional Telephone)
        user.phoneNumbers << params.newNumber // the << operator acts here like add(String) method
        user.save()
    } 
```

如果决定使用另一个电话类，它看起来像：

```
 def save() {
        int user_id = session['user_id']
        def user = Person.get(user_id)
        def number = new Telephone(params)
        number.person = user // important to create relation
        number.save() // pay attention here, that in previous example the Person was saved, but now the Telephone is
    } 
```

此外，当使用静态 belongsTo = [person:Person] 时，您不需要在 Telephone 类中声明 Person 字段。无论如何都会创建该属性。

最后一个提示，在创建域类之后，尝试运行命令 grails generate-all Person（如果仍然使用 grails generate-all Telephone）。这将为您的域类“搭建”默认控制器和视图，您可以将它们用作示例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T09:14:53.687

您的代码看起来有点过于复杂，我相信，您的目标应该更容易实现，尝试查看 Grails 文档，它描述了您正在使用的一对多关系：http: [//grails.org/doc /latest/guide/GORM.html#oneToMany](http://grails.org/doc/latest/guide/GORM.html#oneToMany)

# ios - Core Data 从 B.cObjects 为 nil 的 A 对象中获取 B 对象

> ID：12401735
> 
> 赞同：1
> 
> 时间：2012-09-13T07:49:41.537
> 
> 标签：ios, core-data

我有一个核心数据对象 A。

对象 A 包含对象 B 的数组`A.bObjects`。对象 B 包含与 C 类似的对象数组`B.cObjects`。

如何从对象 A 中获取所有对象 B，其中`B.cObjects`nil 是什么？

我可以像这样解决这个问题：

```
NSMutableArray *array = [[NSMutableArray alloc] init];
for(B *b in A.bObjects)
{
    if([b.cObjects count] == 0)
        [array addObject:b];
} 
```

但是我认为如果我有很多对象 B 会占用很多资源。而且我不喜欢我的解决方法。:)

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T08:54:17.670

我相信你可以使用，如果你只想要来自特定 A 的所有 B 具有空的 cObjects。

```
NSPredicate* predicate = [NSPredicate predicateWithString:@"cObjects.@count == 0"];
NSArray* emptyCObjects = [A.bObjects filteredArrayUsingPredicate:predicate]; 
```

如果您希望所有 As 中的所有 B 都具有空 cObject，请将其与 NSFetchRequest 结合使用。

不是 100% 确定哪个会更有效，但如果我冒险猜测，我会说使用谓词和 KVC，因为我相信 Apple 已经在后台进行了一些优化。而且它的代码行更少

# javascript - 图片库

> ID：12401742
> 
> 赞同：1
> 
> 时间：2012-09-13T07:50:30.883
> 
> 标签：javascript, jquery, css

我创建了一个图片库。

当我单击下一个和上一个按钮时，我将其设置为上下

当我单击上一个和下一个时，我需要它并排出现。

这是演示

[http://jsfiddle.net/T657N/16/](http://jsfiddle.net/T657N/16/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T08:07:14.797

只需将`top`参数更改`left`为脚本内部。

[**演示在这里**](http://jsfiddle.net/libinvbabu/T657N/18/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T08:05:57.127

您只需更改 JavaScript 的 SwapFirstLast() 函数：

代替

```
 $(this).animate({ 'top' : direction + $(this).height() + 'px' }, 'slow', function() { //animate the img above/under the gallery (assuming all pictures are equal height)
  $(this).css('z-index', newZindex) //set new z-index
    .animate({ 'top' : '0' }, 'slow', function() { //animate the image back to its original position
      inAnimation = false; //reset the flag
    });
}); 
```

和

```
 $(this).animate({ 'left' : direction + $(this).height() + 'px' }, 'slow', function() { //animate the img above/under the gallery (assuming all pictures are equal height)
  $(this).css('z-index', newZindex) //set new z-index
    .animate({ 'left' : '0' }, 'slow', function() { //animate the image back to its original position
      inAnimation = false; //reset the flag
    });
}); 
```

所以最后你的功能将是：

```
function swapFirstLast(isFirst) {
if(inAnimation) return false; //if already swapping pictures just return
else inAnimation = true; //set the flag that we process a image

var processZindex, direction, newZindex, inDeCrease; //change for previous or next image

if(isFirst) { processZindex = z; direction = '-'; newZindex = 1; inDeCrease = 1; } //set variables for "next" action
else { processZindex = 1; direction = ''; newZindex = z; inDeCrease = -1; } //set variables for "previous" action

$('#pictures img').each(function() { //process each image
  if($(this).css('z-index') == processZindex) { //if its the image we need to process
    $(this).animate({ 'left' : direction + $(this).height() + 'px' }, 'slow', function() { //animate the img above/under the gallery (assuming all pictures are equal height)
      $(this).css('z-index', newZindex) //set new z-index
        .animate({ 'left' : '0' }, 'slow', function() { //animate the image back to its original position
          inAnimation = false; //reset the flag
        });
    });
  } else { //not the image we need to process, only in/de-crease z-index
    $(this).animate({ 'top' : '0' }, 'slow', function() { //make sure to wait swapping the z-index when image is above/under the gallery
      $(this).css('z-index', parseInt($(this).css('z-index')) + inDeCrease); //in/de-crease the z-index by one
    });
  }
});

return false; //don't follow the clicked link 
```

}

希望它会帮助你。

# php - 如何通过 $.post 请求使用 php 设置 cookie

> ID：12401746
> 
> 赞同：0
> 
> 时间：2012-09-13T07:50:49.390
> 
> 标签：php, ajax, cookies, browser, .post

我正在尝试在 $.post 请求中设置 cookie。

我的问题是我想在浏览器关闭时删除 cookie，所以我试试这个：

```
$.post("cookie.php",{name:name,surname:surname,usn:usn,psw:psw},function(msg){
   ...
}); 
```

cookie.php：

```
setcookie("code",$name,"/"); 
```

// 我没有添加过期时间，因为我在网上看到这样 cookie 将在浏览器关闭时被删除。

如果我不添加`/`参数（我读）我的 cookie 不会应用于每个路径..

但以这种方式我检索到这个：

```
Warning:  setcookie() expects parameter 3 to be long, string given in .... 
```

我该如何解决？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T07:52:57.750

根据手册： http: [//php.net/manual/en/function.setcookie.php](http://php.net/manual/en/function.setcookie.php)

> 如果设置为 0 或省略，cookie 将在会话结束时（浏览器关闭时）过期。

```
setcookie("code",$name, 0, "/"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T07:55:45.587

实际问题是您试图在没有传递参数 3 的情况下传递参数 4，因此编译器无法理解您的意思。

像这样设置参数3：

```
setcookie("code",$name, 0, "/"); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-09-13T07:54:52.267

你可以使用 jquery cookie 插件

[https://github.com/carhartl/jquery-cookie](https://github.com/carhartl/jquery-cookie)

使用。

```
$.cookie('the_cookie', 'the_value'); 
```

# android - ListView 的 OnItemClick 不起作用

> ID：12401748
> 
> 赞同：1
> 
> 时间：2012-09-13T07:51:03.360
> 
> 标签：android, android-listview, onitemclicklistener

我做了一个列表视图。使用[本](http://www.framentos.com/en/android-tutorial/2012/07/16/listview-in-android-using-custom-listadapter-and-viewcache/)教程链接它工作正常。但问题是当我尝试在其活动类中添加 onitemclick 侦听器时，单击操作不起作用。我只想显示一个 toast 消息。这里是 onItemClickListener 的代码

```
listViewCity.setOnItemClickListener(new OnItemClickListener() {
                @Override
                public void onItemClick(AdapterView<?> a, View v, int position, long id) { 

                    String item = ((TextView)v).getText().toString();

                    Toast.makeText(getApplicationContext(), item, Toast.LENGTH_LONG).show();

            }  
        }); 
```

为什么它不起作用任何人都可以告诉我？？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T09:25:26.530

***如果您遇到异常或强制关闭，您应该提到它。***

首先，您的 OnItemClickListener 是错误的，因为传递给您的 OnClickListener 的 View 不是 TextView，因此您不能只将其转换为 TextView。

您可以使用以下方法修复它：

```
listViewCity.setOnItemClickListener(new OnItemClickListener() {
    @Override
    public void onItemClick(AdapterView<?> a, View v, int position, long id) { 
        String item = ((TextView)v.findViewById(R.id.cityName)).getText().toString();
            Toast.makeText(getApplicationContext(), item, Toast.LENGTH_LONG).show();

    }  
}); 
```

* * *

试试我刚刚做的，它应该可以工作。如果它不起作用，您可能需要`android:autoLink="web"`从 xml 文件中删除该行。

* * *

该属性`android:autoLink="web"`使您的 View 的 TextView 可点击。正如我在评论中提到的，如果您的任何子视图是可点击的，您的 OnItemClickListener 将不会收到事件，因为它将被孩子们使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T08:08:59.043

**用这个**

由于您使用的是 customadapter，因此您必须在 customadapter 类中执行此操作以处理列表视图的 onclicks ...

```
convertView.setClickable(true);
    convertView.setOnClickListener(new OnClickListener() {

                    @Override
                    public void onClick(View paramView)
                    {
                      //if you want you can use the "position" value to get the desired row items.
                    }
                    }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-13T09:09:51.303

尝试这个...

```
listViewCity.setOnItemClickListener(new OnItemClickListener() {
                @Override
                public void onItemClick(AdapterView<?> a, View v, int position, long id) { 
                     String item = listViewCity.getItemAtPosition(position).toString();

                    Toast.makeText(getApplicationContext(), item, Toast.LENGTH_LONG).show();

            }  
        }); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-20T12:29:24.817

我遇到了同样的问题，并通过将需要单击的每个视图设置为可单击然后添加侦听器来解决它。我将以下方法放在自定义适配器中（在 getView 方法中）。像这样的东西：

```
public void setViewsClickable(int position) {
        myView.button.setClickable(true);
        myView.radioButton.setClickable(true);
        myView.button.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {
                // what this button should do
            }
        });

        myView.radioButton.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {
                // what clicking this radio button should do
            }
        });

    } 
```

# c# - 如果在测试时 System.Web.UI.Util 出现异常，如何对我的 HtmlHelper 扩展方法进行单元测试？

> ID：12401749
> 
> 赞同：4
> 
> 时间：2012-09-13T07:51:09.140
> 
> 标签：c#, asp.net-mvc-3, unit-testing, moq, html-helper

嗯......问题更复杂，然后问题标题说。首先，我有一个HtmlHelper的扩展方法，它根据当前路由参数生成带参数的html链接。也就是说，如果我在 page 上`.../page?param1=val1&param2=val2`，例如当我调用我的方法`ActionQuryLink`来生成链接时，`@Html.ActionQuryLink("link text", "action", new { param3 = "value3" })`我将获得一个指向`<a href=".../page?param1=val1&param2=val2&param3=value3">link text</a>`. 好吧，扩展类本身是：

```
public static class ActionLinkHelper
    {
        public static MvcHtmlString ActionQueryLink(this HtmlHelper htmlHelper, string linkText, string action)
        {
            return (ActionQueryLink(htmlHelper, linkText, action, null, null));
        }
        public static MvcHtmlString ActionQueryLink(this HtmlHelper htmlHelper, string linkText, string action, object routeValues)
        {

            /*line 16*/return (ActionQueryLink(htmlHelper, linkText, action, routeValues, null));
        }

        public static MvcHtmlString ActionQueryLink(this HtmlHelper htmlHelper, string linkText, string action, object routeValues, IDictionary<string, object> htmlAttributes)
        {
            var queryString = htmlHelper.ViewContext.HttpContext.Request.QueryString;

            var newRoute = routeValues == null
                ? htmlHelper.ViewContext.RouteData.Values
                : new RouteValueDictionary(routeValues);

            foreach(string key in queryString.Keys)
            {
                if(!newRoute.ContainsKey(key))
                    newRoute.Add(key, queryString[key]);
            }
            /*line 32*/string generatedLink = HtmlHelper.GenerateLink(
                htmlHelper.ViewContext.RequestContext,
                htmlHelper.RouteCollection,
                linkText,
                null,
                action,
                null,
                newRoute,
                htmlAttributes);

            return new MvcHtmlString(generatedLink);
        }
    } 
```

**主要问题是测试这个扩展方法**

我的单元测试看起来像：

```
[TestClass]
    public class ActionLinkHeplerTests
    {
        #region ActionQueryLink
        [TestMethod]
        public void ActionLinkHeplerShouldGenerateCorrectActionLink()
        {
            var mockHttpContext = new Mock<HttpContextBase>();
            mockHttpContext.Setup(c => c.Request.QueryString).Returns(new NameValueCollection { { "param1", "value1" } });
            mockHttpContext.Setup(c => c.Request.AppRelativeCurrentExecutionFilePath).Returns("~/");
            mockHttpContext.Setup(c => c.Request.ApplicationPath).Returns("~/");
            mockHttpContext.Setup(c => c.Request.CurrentExecutionFilePath).Returns("~/");

            var mockProductRepository = new Mock<IProductRepository>();
            mockProductRepository.Setup(p => p.GetCategory(It.IsAny<string>())).Returns(new Category());
            var mockSettings = new Mock<ISettings>();
            var categoryController = new CategoryController(mockProductRepository.Object, mockSettings.Object);

            var mockViewDataContainer = new Mock<IViewDataContainer>();
            mockViewDataContainer.Setup(e => e.ViewData).Returns(new ViewDataDictionary { { "action", "action" } });

            var viewContext = new ViewContext
                                  {
                                      HttpContext = categoryController.HttpContext,
                                      RequestContext = new RequestContext
                                                           {
                                                               HttpContext = mockHttpContext.Object,
                                                               RouteData = new RouteData()
                                                           }
                                  };

            var mockRouteHandler = new Mock<IRouteHandler>();
            var helper = new HtmlHelper(viewContext, mockViewDataContainer.Object, new RouteCollection { { "action", new Route("controller/action", mockRouteHandler.Object) } });

            var expected = new MvcHtmlString("");
            /*line 51*/var actual = helper.ActionQueryLink("link text", "action", new {view = "list"});

            Assert.AreEqual(expected, actual);
        }
        #endregion
    } 
```

我得到这样的例外：

```
Test method TestSite.UnitTests.Helpers.ActionLinkHeplerTests.ActionLinkHeplerShouldGenerateCorrectActionLink threw exception: 
System.NullReferenceException: Object reference not set to an instance of an object. 
```

和堆栈跟踪：

```
at System.Web.UI.Util.GetUrlWithApplicationPath(HttpContextBase context, String url)
   at System.Web.Routing.RouteCollection.NormalizeVirtualPath(RequestContext requestContext, String virtualPath)
   at System.Web.Routing.RouteCollection.GetVirtualPath(RequestContext requestContext, RouteValueDictionary values)
   at System.Web.Mvc.RouteCollectionExtensions.GetVirtualPathForArea(RouteCollection routes, RequestContext requestContext, String name, RouteValueDictionary values, ref Boolean usingAreas)
   at System.Web.Mvc.UrlHelper.GenerateUrl(String routeName, String actionName, String controllerName, RouteValueDictionary routeValues, RouteCollection routeCollection, RequestContext requestContext, Boolean includeImplicitMvcValues)
   at System.Web.Mvc.UrlHelper.GenerateUrl(String routeName, String actionName, String controllerName, String protocol, String hostName, String fragment, RouteValueDictionary routeValues, RouteCollection routeCollection, RequestContext requestContext, Boolean includeImplicitMvcValues)
   at System.Web.Mvc.HtmlHelper.GenerateLinkInternal(RequestContext requestContext, RouteCollection routeCollection, String linkText, String routeName, String actionName, String controllerName, String protocol, String hostName, String fragment, RouteValueDictionary routeValues, IDictionary`2 htmlAttributes, Boolean includeImplicitMvcValues)
   at System.Web.Mvc.HtmlHelper.GenerateLink(RequestContext requestContext, RouteCollection routeCollection, String linkText, String routeName, String actionName, String controllerName, String protocol, String hostName, String fragment, RouteValueDictionary routeValues, IDictionary`2 htmlAttributes)
   at System.Web.Mvc.HtmlHelper.GenerateLink(RequestContext requestContext, RouteCollection routeCollection, String linkText, String routeName, String actionName, String controllerName, RouteValueDictionary routeValues, IDictionary`2 htmlAttributes)
   at Core.Helpers.ActionLinkHelper.ActionQueryLink(HtmlHelper htmlHelper, String linkText, String action, Object routeValues, IDictionary`2 htmlAttributes) in ActionLinkHelper.cs: line 32
   at Core.Helpers.ActionLinkHelper.ActionQueryLink(HtmlHelper htmlHelper, String linkText, String action, Object routeValues) in ActionLinkHelper.cs: line 16
   at TestSite.UnitTests.Helpers.ActionLinkHeplerTests.ActionLinkHeplerShouldGenerateCorrectActionLink() in ActionLinkHeplerTests.cs: line 51 
```

**好吧，我真的很抱歉这样一批代码。** 但我正在处理这个问题大约 3 天。如您所见，即使不是在某些 MVC 库中而是在`System.Web.UI.Util`. 即使我可以找到`System.Web.UI.Util`源并将其作为另一个项目添加到我的解决方案中，我也不能强制 MVC 框架使用这个项目而不是`System.Web.UI.Util`来自全球组装现金。老实说，在我的解决方案中将 MVC 从 GAC 替换为 MVC 的源项目甚至非常困难，因为它非常复杂，有很多依赖项，当我尝试这样做时，我遇到了很多错误，其中大部分是已经使用来自全局程序集现金的 MVC 程序集的外部库。同样最重要的是，我的辅助方法在我的项目中运行良好，它仅在测试时调用异常。所以我的建议是 helper 的测试条件不完整或者可能是错误的。总结，*我的问题是如何使用 Moq 模拟我的 html 助手扩展方法的正确条件，或者，也许还有其他问题？*

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-19T03:03:21.567

事实证明，要测试依赖于路由信息的助手，需要模拟以下方法`RequestContext.HttpContext`：

*   `RequestContext.HttpContext.Request.ApplicationPath`- 应该返回类似于根路径的东西（即`@"/"`）
*   `RequestContext.HttpContext.Response.ApplyAppPathModifier`- 可以简单地返回其输入参数：

样本：

```
request.Setup(r => r.ApplicationPath).Returns(@"/");
response.Setup(r => r.ApplyAppPathModifier(It.IsAny<string>()))
                .Returns((string s) => s); 
```

# php - 用于匹配单引号、双引号和无引号的正则表达式

> ID：12401757
> 
> 赞同：1
> 
> 时间：2012-09-13T07:51:46.613
> 
> 标签：php, regex, preg-replace

我使用`preg_replace`必须从 中清除所有`rel`和`target`属性`$body`并用其他值替换它们的函数。这里是：

```
 $patterns = array();
    $patterns[] = '/<a(.*) rel="([^"]*)"(.*)>/';
    $patterns[] = '/<a(.*) target="([^"]*)"(.*)>/';
    $patterns[] = '/<a(.*)>/';

    $replacements = array();
    $replacements[] = '<a$1$3>';
    $replacements[] = '<a$1$3>';
    $replacements[] = '<a rel="nofollow" target="_blank"$1>';

    $body = preg_replace($patterns,$replacements,$body); 
```

问题是它不匹配单引号和无引号。另外，如果有任何更好的方法来清除链接中的`rel`和`target`属性并与其他人一起设置它们，请告知。

谢谢

编辑`$body`：：

```
 $body = '<a href="TEST">Link1</a>
      <a href="TEST" rel=\'lqlqlq\'>Link2</a>
      <a href="TEST" target="_blank" rel="lqlqlq">Link3</a>
              <a href="TEST" target=_blank rel=lqlqlq>Link4</a>'; 
```

而且由于文本，工作链接的所有其他选项都是用户定义的，可能有些用户会作弊。我的目标 -无论用户输入什么，所有链接`$body`都必须具有定义`rel`和属性。`target`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T08:08:17.737

如果您不想同时匹配其他任何东西，我建议您不要并保留系统资源。

```
$patterns[] = "/rel=[\"\']?([\w]+)[\"\']?/";
$patterns[] = "/target=[\"\']?([_a-zA-Z]+)[\"\']?/" 
```

我在 REGEX 方面不是最好的，但据我所知，这会为您节省一些时间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-02T14:58:41.483

此表达式将处理 3 个选项：

1.  没有引号
2.  双引号
3.  单引号

> '/href=["\']?([^"\'>]+)["\']?/'

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-13T07:55:24.557

它很可能与它们匹配，但由于`<a(.*)>`无论前两个模式做什么都将始终匹配，因此您不会从前两个模式中获得任何结果。

这可以做你正在寻找的东西：

```
$patterns = array();
$patterns[] = '/<a(.*) rel=[\'"]?\S+[\'"]? (.*)>/';
$patterns[] = '/<a(.*) target=[\'"]?\S+[\'"]? (.*)>/';

$replacements = array();
$replacements[] = '<a$1$3>';
$replacements[] = '<a$1$3>';

$body = preg_replace($patterns,$replacements,$body); 
```

干杯。

# java - 对单个 jTextfields 进行多次验证，并在验证后移至下一个文本字段

> ID：12401760
> 
> 赞同：-3
> 
> 时间：2012-09-13T07:52:02.740
> 
> 标签：java, swing

我正在开发一个学生管理应用程序，它是 Swing 中的一个窗口应用程序，并且在一个框架中我必须验证多个字段。

对于每个字段，我必须验证该字段是否为空白，输入的数据也是特定格式，例如只允许使用字符等。

如果可能，请帮助并展示示例。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T08:02:25.520

*   [JTextField](http://docs.oracle.com/javase/tutorial/uiswing/components/textfield.html)基本上有三种方式

    1.  让我们验证为用户操作，使用`JButton`它

    2.  使用`DocumentListener`和/（或与）`DocumentFilter`

    3.  使用`InputVerifier`，`InputMask`

*   或将`InputVerifier`, `InputMask`,`Formatter`用于[JFormattedTextField](http://docs.oracle.com/javase/tutorial/uiswing/components/formattedtextfield.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T15:02:28.180

您应该使用 JFrame 或 JDialog 来显示屏幕。1\. 使用 JTextField 作为输入值。2、实现ActionListener接口，使用actionPerformed(ActionEvent e)方法进行查空。

# glassfish - spnego 身份验证后的 glassfish ldap 授权

> ID：12401761
> 
> 赞同：1
> 
> 时间：2012-09-13T07:52:15.450
> 
> 标签：glassfish, ldap, java-ee-6, spnego, jaspic

我们使用 Apache mod_proxy_http 和 SPNEGO 成功实现了 SSO。在我的 Java EE 6 Web 应用程序中，我使用 request.getRemoteUser() 获得了经过身份验证的用户。

现在什么是授权的最佳方式。我们的目标是通过 LDAP 在我们的 Microsoft AD 中检查用户的特定角色成员身份。使用 glassfish 3.1.2 实现这一目标的最佳方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T13:26:03.193

这取决于您的用例。如果您只想知道 AD 中的角色，您可以在 LDAP 上进行手动搜索。

例子：

```
import javax.naming.*;
import javax.naming.directory.*;

public class test {

    public String ldapUri = "ldap://localhost";
    public String usersContainer = "cn=users,dc=example,dc=com"; // base DN for search
    public String username = "user";
    public String password = "pass";

    public static void main(String args[]){

    Hashtable env = new Hashtable();
    env.put(Context.INITIAL_CONTEXT_FACTORY, "com.sun.jndi.ldap.LdapCtxFactory");
    env.put(Context.PROVIDER_URL, ldapUri);
    env.put( Context.SECURITY_PRINCIPAL, username );
    env.put( Context.SECURITY_CREDENTIALS, password );
    env.put(Context.REFERRAL, "follow");

    try {
        DirContext ctx = new InitialDirContext(env);
        SearchControls ctls = new SearchControls();

        String name = "your_username"; // full DN name
        NamingEnumeration answer = ctx.search(usersContainer, "(member=" + name + ")",ctls );    

        while(answer.hasMore()) {
                SearchResult rslt = (SearchResult)answer.next();
                Attributes attrs = rslt.getAttributes();
                System.out.println(attrs.get("cn"));
            }

        ctx.close();

    } catch (NamingException e) {
        e.printStackTrace();
    }    
    }
 } 
```

请注意，用户名必须是用户的完整 DN，例如 `CN=user1,CN=users,DC=company,DC=com`

如果你想在你的应用程序中使用这些组来分配角色，事情就有点棘手了。要实现这一点，您可能需要自定义[ServerAuthModule](http://docs.oracle.com/cd/E19798-01/821-1752/gizdx/index.html)（[此处](http://docs.oracle.com/cd/E19798-01/821-1752/gizdx/index.html)为示例），或者您必须修改 SPNEGO 部分以根据来自 AD/LDAP 的数据分配角色。

# sql-server - Delphi TAdoDataset TFloatField 逗号错误

> ID：12401763
> 
> 赞同：1
> 
> 时间：2012-09-13T07:52:19.943
> 
> 标签：sql-server, delphi, sql-server-2008-r2, delphi-2007

我的平台 Delphi 2007 和 SQL Server 2008 R2 当我发布我的`TAdoDataset`时，我在 Sql profiler 中收到此代码：

```
exec sp_executesql N'UPDATE "MYDBNAME"."dbo"."HESAPISL" SET "ADET"=@P1,"FIYAT"=@P2,"TARIFEID"=@P3,"KRMTUTAR"=@P4,"SGTUTAR"=@P5,"OZELTUTAR"=@P6,"HSTKATKITUTAR"=@P7,"KRMINDORAN"=@P8,"KRMINDTUTAR"=@P9,"OZELINDORAN"=@P10,"OZELINDTUTAR"=@P11,"SGINDORAN"=@P12,"HIKUTUICIADET"=@P13,"HSTKDVORAN"=@P14,"KRMKDVORAN"=@P15,"SGKDVORAN"=@P16,"EKMASRAFTUTAR"=@P17,"HSTPAKETDURUMUID"=@P18,"KRMPAKETDURUMUID"=@P19,"SGPAKETDURUMUID"=@P20,"HSTPAKETEDAHIL"=@P21,"KRMPAKETEDAHIL"=@P22,"SGPAKETEDAHIL"=@P23,"ESKIITEMID"=@P24,"ESKIADET"=@P25,"ESKIHIKUTUICIADET"=@P26,"HSTFYTTUTAR"=@P27,"HKMATRAH"=@P28,"MLYTTUTAR"=@P29,"BAZFYTBIRIM"=@P30 
WHERE "ADET"=@P31 AND "FIYAT"=@P32 AND "TARIFEID"=@P33 AND "KRMTUTAR"=@P34 AND "SGTUTAR"=@P35 AND "OZELTUTAR"=@P36 AND "HSTKATKITUTAR"=@P37 AND "KRMINDORAN"=@P38 AND "KRMINDTUTAR"=@P39 AND "OZELINDORAN"=@P40 AND "OZELINDTUTAR"=@P41 AND "SGINDORAN"=@P42 AND "HIKUTUICIADET"=@P43 AND "HSTKDVORAN"=@P44 AND "KRMKDVORAN"=@P45 AND "SGKDVORAN"=@P46 AND "EKMASRAFTUTAR"=@P47 AND "HSTPAKETDURUMUID"=@P48 AND "KRMPAKETDURUMUID"=@P49 AND "SGPAKETDURUMUID"=@P50 AND "HSTPAKETEDAHIL"=@P51 AND "KRMPAKETEDAHIL"=@P52 AND "SGPAKETEDAHIL"=@P53 AND "ESKIITEMID" IS NULL AND "ESKIADET" IS NULL AND "ESKIHIKUTUICIADET" IS NULL AND "HSTFYTTUTAR"=@P54 AND "HKMATRAH"=@P55 AND "MLYTTUTAR"=@P56 AND "BAZFYTBIRIM"=@P57 AND "HESAPISLID"=@P58 AND "HESAPISLID" IS NULL',N'@P1 float,@P2 float,@P3 int,@P4 float,@P5 float,@P6 float,@P7 float,@P8 float,@P9 float,@P10 float,@P11 float,@P12 float,@P13 numeric(9,2),@P14 numeric(5,2),@P15 numeric(5,2),@P16 numeric(5,2),@P17 float,@P18 int,@P19 int,@P20 int,@P21 bit,@P22 bit,@P23 bit,@P24 int,@P25 float,@P26 numeric(8,2),@P27 float,@P28 float,@P29 float,@P30 numeric(19,4),@P31 float,@P32 float,@P33 int,@P34 float,@P35 float,@P36 float,@P37 float,@P38 float,@P39 float,@P40 float,@P41 float,@P42 float,@P43 numeric(9,2),@P44 numeric(5,2),@P45 numeric(5,2),@P46 numeric(5,2),@P47 float,@P48 int,@P49 int,@P50 int,@P51 bit,@P52 bit,@P53 bit,@P54 float,@P55 float,@P56 float,@P57 numeric(19,4),@P58 int',4,0,078299999999999995,4,0,0,0,31319999999999998,0,0,0,0,0,0,30.00,8.00,8.00,8.00,0,00013333333333337416,0,0,0,0,0,0,7516,6,30.00,0,31333333333333335,0,0,0,6,0,078299999999999995,4,0,0,0,4698,0,0,0,0,0,0,30.00,8.00,8.00,0,0,00020000000000003348,0,0,0,0,0,0,0,47000000000000003,0,0,2.3500,53791 
```

* * *

例子：

`HSTKDVORAN = 8.00`（这没问题！没问题）

但

`FIYAT = 0,078299999999999995`（这导致异常/问题）

浮点字段值以逗号分隔。

当我运行此代码（在 SQL Management Studio 中）时，出现错误：

```
Msg 8144, Level 16, State 2, Line 0
Procedure or function has too many arguments specified. 
```

我该如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T09:11:50.357

如果 FIYAT = 0,078299999999999995 则程序还有一个值（0 和 078299999999999995） FIYAT 必须为 0.078299999999999995

您可以使用 TAdoDataSet 或 TAdoCommand 设置属性 CommandType: cmdStoredProc 并从属性 Commandtext 中选择存储过程。从属性参数中，您可以看到存储过程的所有参数。

```
<TADODataSet>.Parameters.ParamByName('@FIYAT').Value:=0.078299999999999995;
<TADODataSet>.Parameters.ParamByName('@FIYAT').Value:='0,078299999999999995';  --> not ok 
```

值是变体。你必须指定你的论点

如果使用 TAdoDataset 链接表 MYDBNAME.dbo.HESAPISL

```
property CommandType: cmdText
property CommandText: 'select HSTKDVORAN, FIYAT from MYDBNAME.dbo.HESAPISL';

<TAdoDataset>.FieldByName('FIYAT').AsFloat:= 0.078299999999999995; 
```

评论中的代码

```
 tHILACMALZ1ADET.Value := tHILACMALZADET.AsFloat; 
 tHILACMALZ1HIKUTUICIADET.Value := FDM.tITEMKUTUICIADET.AsFloat; 
 tHILACMALZ1.Post; 
```

在某一方面的变化

```
 tHILACMALZ1ADET.AsFloat:= tHILACMALZADET.AsFloat; 
 tHILACMALZ1HIKUTUICIADET.AsFloat:= FDM.tITEMKUTUICIADET.AsFloat; 
 tHILACMALZ1.Post; 
```

# git - 使用 GIT for Windows 获取 OpenCV2.4.2

> ID：12401765
> 
> 赞同：5
> 
> 时间：2012-09-13T07:52:47.077
> 
> 标签：git, opencv, tags, git-checkout

我想获取 Windows 的**OpenCV2.4.2**源文件，以便自己生成库。我运行命令

```
git clone git://code.opencv.org/opencv.git 
```

这实际上得到了我不想要的 2.4.9 存储库。有一个 GIT 选项

`git reset --hard <commit code>`

那应该回到所需的提交。问题是我发现提交太多了，我不知道哪个是 2.4.2 版本！

*   **如何从 GIT 下载 2.4.2 版本？**

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-13T10:43:09.437

只需使用以下命令查找标签：

```
git tag 
```

寻找 OpenCV 2.4.2 或任何你想要的，然后用你的选择结帐：

```
git checkout 2.4.2 
```

在你的情况下。

* * *

如果你想拉最新的 2.4 分支，那么你可以这样做：

```
git clone -b 2.4 --single-branch https://github.com/Itseez/opencv.git Opencv-2.4 
```

# android - 在Android中导入一个类并实现一个功能

> ID：12401766
> 
> 赞同：1
> 
> 时间：2012-09-13T07:52:55.937
> 
> 标签：android, class, import

我正在创建一个 App 首选项类，我可以在其中放入我在应用程序范围内使用的功能，例如检查互联网连接功能。我想要做的是将类导入到我的活动中，然后在创建时运行它的功能。有谁知道如何做到这一点？

这是我到目前为止所拥有的

```
import android.app.Activity;
import android.os.Bundle;
import co.myapp.AppPreferences;

public class Loading extends Activity {
    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.lo_loading);
        AppPreferences.class.checkInternet()
    }
} 
```

这是我的 AppPreferences.java

```
public class AppPreferences {

public void checkInternet(){

    Log.v("Pref", "checking internet");

}   

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-13T08:00:50.263

`checkInternet()`是非静态的，你需要`AppPreferences`在你的活动中的一个实例，并在这个实例上使用该方法：

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.lo_loading);
    AppPreferences appPrefs = new AppPreferences()
    appPrefs.checkInternet()
} 
```

另一种解决方案是制作`checkInternet()` `static`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T08:10:34.690

您必须实例化 Apppreference 类型的对象才能访问其方法（除非它们是静态的）

# jquery - 检查是否选中复选框并在跨度中显示文本

> ID：12401768
> 
> 赞同：1
> 
> 时间：2012-09-13T07:52:59.130
> 
> 标签：jquery

我有一个脚本，一旦单击按钮，它就会在下面的范围内显示指定的文本。如何使用它来检查是否选中了复选框并相应地显示文本？
我尝试了很多不同的方法都无济于事。 [http://jsfiddle.net/jamesil/w5bdX/](http://jsfiddle.net/jamesil/w5bdX/) 正确方向的一点将不胜感激！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-13T07:57:28.360

你想念`)`之后`if ($('#checkbox-1').is(":checked"))`

[工作演示](http://jsfiddle.net/w5bdX/1/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-13T07:57:20.480

只是一个小错误，您缺少 if 语句上的右括号。

你有：

```
if ($('#checkbox-1').is(":checked") 
```

应该

```
if ($('#checkbox-1').is(":checked")) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-13T07:59:53.747

```
 $("#myCheckbox").click(function(e){
    if(this.is(":checked")){
         //do something
    } else {
        //do something
    }
} 
```

# c# - 除了命名约定外，我没有发现这种方法有任何问题，是吗？

> ID：12401772
> 
> 赞同：-3
> 
> 时间：2012-09-13T07:53:08.733
> 
> 标签：c#

我试图在下面的代码中找到异常，但除了错误的命名约定之外我找不到任何东西。

```
public static Response DoIt(ADUser user)
{
    string search = "(cn=" + user.name.Trim() + ")";
    // More code lines
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-13T07:54:54.740

它不返回`Response`类型对象，除此之外它很好。`"(cn="`如果您在多个地方使用它，则可以将双引号 ( ) 中的字符串替换为常量。如果您担心字符串在一行中的连接，那没关系。但是，如果您需要在循环中连接字符串`search`或需要大量连接的东西，那么您可以考虑使用[StringBuilder](http://msdn.microsoft.com/en-us/library/2839d5h5%28v=vs.71%29.aspx)来构建您的字符串。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-13T07:56:51.740

没有错，但您可以使用以下命令使其更具可读性[`string.Format`](http://msdn.microsoft.com/en-us/library/system.string.format.aspx)：

```
string search = string.Format("(cn={0})", user.name.Trim()); 
```

# python - 如何在打开的ERP中将打印的大小更改为一半？

> ID：12401773
> 
> 赞同：0
> 
> 时间：2012-09-13T07:53:09.027
> 
> 标签：python, openerp, rml

您好，我是 Open ERP 的新手。我的任务是将打印尺寸缩小一半。为此，我正在 account_print_invoice.rml 中进行更改

```
 **<template pageSize="(595.0, 842.0)" title="Invoices" author="OpenERP S.A.(sales@openerp.com)" allowSplitting="20">** 
```

我正在将模板的高度设置为 421 的一半。页面被视为一半，但页面的其他内容没有出现。

请帮助我如何动态地执行相同的操作或更改 rml 文件？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T08:14:36.037

请同时更改框架的高度和宽度。框架看起来像

```
<frame id="first" x1="1.3cm" y1="6.5cm" height="19.0cm" width="19.0cm"/> 
```

或者

```
<frame id="first" x1="62.0" y1="57.0" width="723" height="481"/> 
```

# soap - 带参数的 Powershell SOAP 请求

> ID：12401776
> 
> 赞同：0
> 
> 时间：2012-09-13T07:53:14.077
> 
> 标签：soap, powershell, msdn

我需要一个powershell脚本来调用soap服务，我目前遇到的问题是soap服务方法有一个参数，我确信当方法没有参数时我可以让powershell脚本工作，但只要他们是我收到错误的参数。

IE

```
+ $res = $req.GetResponse <<<< ()
    + CategoryInfo          : NotSpecified: (:) [], MethodInvocationException
    + FullyQualifiedErrorId : DotNetMethodException 
```

有效的肥皂请求（powershell，所以我在适当的地方使用了双引号）：

```
<soap:Envelope xmlns:xsi=""http://www.w3.org/2001/XMLSchema-instance"" xmlns:xsd=""http://www.w3.org/2001/XMLSchema"" xmlns:soap=""http://schemas.xmlsoap.org/soap/envelope/"">
        <soap:Body>
          <CheckStockLevels/>
       </soap:Body>
</soap:Envelope>" 
```

不起作用的肥皂请求（powershell，所以我在适当的地方使用了双引号）：

```
<soap:Envelope xmlns:xsi=""http://www.w3.org/2001/XMLSchema-instance"" xmlns:xsd=""http://www.w3.org/2001/XMLSchema"" xmlns:soap=""http://schemas.xmlsoap.org/soap/envelope/"">
        <soap:Body>
          <CheckStockLevels>
             <configurationName>123</configurationName>
          </CheckStockLevels>
       </soap:Body>
    </soap:Envelope>" 
```

有谁知道我应该如何为不起作用的肥皂请求格式化 XML？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T10:02:27.193

这行得通吗？

```
$soap = [xml]@'
<soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/">
 <soap:Body>
  <CheckStockLevels>
    <configurationName>123</configurationName>
  </CheckStockLevels>
 </soap:Body>
</soap:Envelope>" 
'@ 
```

# eclipse - Eclipse-Classic 或 Flex Builder 4.6 中的 Java EE 功能

> ID：12401777
> 
> 赞同：0
> 
> 时间：2012-09-13T07:53:15.160
> 
> 标签：eclipse, eclipse-plugin, flexbuilder

有一个仅在 FB4.6 中编译的 Flex 库。我尝试使用 FB4.6 Eclipse 插件，但它不能在 Eclipse 3.6.x 或 3.7 中编译。

所以我在 FB4.6 中安装了 Java EE 插件（不完全确定）。但它没有在 FB4.6 中提供确切的 Java EE 功能（它的行为不像 Eclipse-Java EE）。例如，我无法安装 JSP 编辑器。

有没有办法将 FB4.6 升级到 Java EE？

或者

Eclipse-Classic 到 Eclipse-Java EE？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T23:05:15.517

您应该能够下载 Java EE，然后将 Flash Builder 插件安装到其中。您确定您下载的不是 64 位版本的 Java EE？Flash Builder 插件仅支持 32 位。可以把插件安装到3.6、3.7的普通版吗？

# symfony - 在大多数情况下，如何计算查询中的行数，它们应该为 0 - Doctrine2

> ID：12401781
> 
> 赞同：1
> 
> 时间：2012-09-13T07:53:29.917
> 
> 标签：symfony, doctrine-orm

我有一个带有电子邮件的注册表单，它应该是唯一的。我想做的是，如果有人填写了一封已经为另一个用户注册的电子邮件，这个人会看到一条由我写的消息，而不是类似

```
SQLSTATE[23000]: Integrity constraint violation: 1062 Duplicate entry 'admin@domain.com' for key 'UNIQ_1483A5E9E7927C74' 
```

我在存储库类中试过这个：

```
public function getSameFriends ($email)
    {
        $q = $this->createQueryBuilder('f');

        $q->select('f')
          ->where('f.email = :email')      
          ->setParameter('email', $email);

        return $q->getQuery()->getSingleScalarResult();
    } 
```

然后在控制器中：

```
$em = $this->getDoctrine()->getEntityManager();
        $count = $em->getRepository('EMMyFriendsBundle:Friend')
                                    ->getSameFriends($friend->getEmail());
        if($count != 0)
        {
            $this->get('session')->setFlash('notice', 'There already is a friend with this email!');
            return $this->redirect($this->generateUrl('home_display'));
        } 
```

但我得到一个例外

```
No result was found for query although at least one row was expected.
500 Internal Server Error - NoResultException 
```

我不需要查询的结果，只需要知道结果是 1 还是 0。你知道怎么做吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-13T08:01:05.210

你可以做：

```
return count($q->getQuery()->getResult()); 
```

顺便说一句，你看过'uniqueEntity'验证约束吗？它提供了开箱即用所需的功能：

[http://symfony.com/doc/current/reference/constraints/UniqueEntity.html](http://symfony.com/doc/current/reference/constraints/UniqueEntity.html)

# c# - WININET.InternetConnect 在 Windows 8 中失败

> ID：12401787
> 
> 赞同：2
> 
> 时间：2012-09-13T07:54:02.000
> 
> 标签：c#, winapi, windows-8, wininet

此代码在 Win7 上运行良好，但`0x2f8c`在 Windows 8（发布预览版）中因未知错误而失败。知道为什么吗？请注意，我检查了代码，编译并运行了它，但我很确定我得到了所有依赖项。win32 声明：

```
 [DllImport("wininet.dll", CharSet = CharSet.Auto, SetLastError = true)]
        extern public static IntPtr InternetConnect(
            [In] IntPtr hInternet,
            [In] string serverName,
            [In] int serverPort,
            [In] string userName,
            [In] string password,
            [In] int dwService,
            [In] int dwFlags,
            [In] IntPtr dwContext); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T10:42:53.370

所以`ERROR_INTERNET_NOT_INITIALIZED`我会进一步研究你`InternetOpen`对这个问题的呼吁。

# jquery - jQuery ajax 调用未设置变量的值

> ID：12401789
> 
> 赞同：0
> 
> 时间：2012-09-13T07:54:05.543
> 
> 标签：jquery, ajax, variables

我有这个对 ajax 的 jquery 调用，

```
function findTaxForProcess(argPrc, argPrcAmount, argPrcDiscount) {
            if (argPrc == '') { return 0; };
            var _valToReturn;

            if ($('#hdnTaxBefore').val() == "true") {
                // if tax is calculated before discount
                $.ajax({
                    url: '/AutoComplete.asmx/FindProcessTax',
                    type: 'POST',
                    timeout: 5000,
                    datatype: 'xml',
                    cache: false,
                    data: 'argProcess=' + argPrc + '&argAmt=' + argPrcAmount,
                    success: function (response) {
                        _valToReturn = $(response).find('double').text();
                        alert(_valToReturn);
                    }
                });
            }

            else {
                // the tax is calculated after discount
                $.ajax({
                    url: '/AutoComplete.asmx/FindProcessTaxAter',
                    type: 'POST',
                    timeout: 5000,
                    datatype: 'xml',
                    cache: false,
                    data: 'argProcess=' + argPrc + '&argAmt=' + argPrcAmount + '&argDiscount=' + argPrcDiscount,
                    success: function (response) {
                        _valToReturn = $(response).find('double').text();
                        alert(_valToReturn);
                    }
                });
            }
            alert('came here ' + _valToReturn);
            return _valToReturn;
        }; 
```

问题是第一个警报显示`2.873`（在其他情况下，它显示`2.178`），但问题是第二个警报，第二个警报显示，`came here undefined`??? FTW？黑客出了什么问题？我已经搞砸了2天，但什么也没有！

为什么`_valToReturn`在第二次警报时未定义的值？并首先定义？有什么帮助吗？

**编辑：** *警报在第一个警报**之后**`came here _valToReturn`执行。所以，正如（几乎！）所有回答者都说，如果它在之前出现，它将是未定义的，我知道，但正如我所说，它是在之前而不是之后执行**的**。*

 ***** * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T07:57:17.217

Ajax 是一个异步请求。到成功事件执行时，警报“来到这里未定义”将已执行。并且到那时该变量还没有被初始化。

更新：在回答您仔细观察的问题时，我相信匿名函数将 valToReturn 视为局部变量。因此，如果您愿意，这些变量位于不同的“堆栈”上。

看到这个： [Javascript匿名函数不更新全局变量](https://stackoverflow.com/questions/6153666/javascript-anonymous-function-not-updating-global-variable)

或者

[在ajax回调函数之外使用变量](https://stackoverflow.com/questions/4307819/using-variable-outside-of-ajax-callback-function)

和你的类似。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T07:57:40.890

尝试初始化 `_valToReturn`值以摆脱 undefined

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-13T08:04:47.827

如果第二个警报先出现，即如果 undefined 先出现，然后值出现，那么这是因为 ajax 的异步调用。为了克服这个问题，您可以使 ajax 调用同步。

如果第二个警报出现在第一个警报之后，则可能是变量值的问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-13T08:08:59.587

您可以尝试使用 console.log 来查找哪个先执行，在我看来，“来到这里”的警报应该首先执行，去看看 firebug 或 chrome 控制台****

# android - 风格外观不起作用

> ID：12401790
> 
> 赞同：0
> 
> 时间：2012-09-13T07:54:18.557
> 
> 标签：android

我正在处理一种进度屏幕，但我在外观方面遇到了麻烦。

这是我的代码：

```
 LinearLayout progressLayout = new LinearLayout(this);
    progressLayout.setOrientation(LinearLayout.VERTICAL);
    progressLayout.setGravity(Gravity.CENTER);

    LayoutParams layoutParams = new LayoutParams(
            android.view.ViewGroup.LayoutParams.FILL_PARENT,
            android.view.ViewGroup.LayoutParams.FILL_PARENT);

    progressLayout.setLayoutParams(layoutParams);

    LayoutParams titelParams = new LayoutParams(android.view.ViewGroup.LayoutParams.WRAP_CONTENT, android.view.ViewGroup.LayoutParams.WRAP_CONTENT);
    titelParams.setMargins(0, 0, 0, pixelsToDIP(15));

    TextView t = new TextView(this);
    t.setText("Zorgdossier wordt geladen");
    t.setTextAppearance(this, android.R.attr.textAppearanceLarge);
    t.setLayoutParams(titelParams);

    ProgressBar circle = new ProgressBar(this);
    circle.setScrollBarStyle(android.R.attr.progressBarStyleLarge);
    circle.setLayoutParams(new LayoutParams(android.view.ViewGroup.LayoutParams.WRAP_CONTENT, android.view.ViewGroup.LayoutParams.WRAP_CONTENT));

    progressLayout.addView(t);
    progressLayout.addView(circle);

    this.setContentView(progressLayout);

}

private int pixelsToDIP(int pixel) {
    float pixels = TypedValue.applyDimension(TypedValue.COMPLEX_UNIT_DIP,
            pixel, this.getResources().getDisplayMetrics());

    return (int) pixels;
} 
```

我将进度和文本视图的样式设置为大，但它们显示得非常小。
有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T08:06:41.260

您使用了错误的功能。

实际上，您在构造函数中设置了样式。

```
ProgressBar circle = new ProgressBar(this, null, 
                               android.R.attr.progressBarStyleLarge); 
```

# c++ - 控制台文件读取

> ID：12401791
> 
> 赞同：-2
> 
> 时间：2012-09-13T07:54:23.757
> 
> 标签：c++, dev-c++, file-read

我正在制作字典，必须从各种类型的各种文件夹中读取各种文件！我找到了在控制台目录中显示文件夹的代码！但是我不明白如何阅读这些文件夹中的 txt 文件！并在控制台上显示文件名！请帮我解决这个问题！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T08:04:45.393

这是读取文本文件的方法

```
std::string line;

std::ifstream file ("myfile.txt");
if (file.is_open())
{
    while (getline(file,line))
    {
        std::cout << line << std::endl;
    }
    file.close();
}
else
{
    std::cout << "Unable to open file" << std::endl << std::endl;
} 
```

# sql - 复杂的 SQL 排序和分组

> ID：12401792
> 
> 赞同：0
> 
> 时间：2012-09-13T07:54:26.213
> 
> 标签：sql, sorting, grouping

我在对每日时间记录中的数据进行分组和排序以自动生成报告时遇到问题。表结构`DTR`如下：

```
记录日期 记录时间 员工姓名 记录类型
2012 年 9 月 13 日 17:00:00 SALITA，LYNYRD ANTONIO 注销
9/13/2012 8:05:00 SALITA, LYNYRD ANTONIO 登录
2012 年 9 月 12 日 17:05:00 SALITA，LYNYRD ANTONIO 注销
9/12/2012 8:05:00 SALITA, LYNYRD ANTONIO 登录
2012 年 7 月 10 日 17:00:00 加西亚，阿尔文登出
2012 年 7 月 10 日 17:00:00 奥雷诺，莉亚登出
2012 年 7 月 10 日 17:00:00 SALITA，LYNYRD ANTONIO 注销
2012 年 7 月 10 日 17:00:00 坎西诺，保罗登出
2012 年 7 月 10 日 17:00:00 BELO，RIO 注销
2012 年 7 月 10 日 17:00:00 MAG-ISA，美贝尔登出
2012 年 7 月 10 日 17:00:00 TARINE, KAREN 登出
2012 年 7 月 10 日 17:00:00 REYES，ANDREA 注销
2012 年 7 月 10 日 17:00:00 纳瓦罗，克里斯蒂娜登出
7/10/2012 10:30:00 MAG-ISA, MAYBELLE 登录
7/10/2012 8:00:00 SALITA, LYNYRD ANTONIO 登录
2012 年 7 月 10 日 8:00:00 卡西诺，保罗登录
2012 年 7 月 10 日 8:00:00 BELO，RIO 登录
2012 年 7 月 10 日 7:40:00 奥雷诺，莉亚登录
2012 年 7 月 10 日 7:30:00 加西亚，阿尔文登录
2012 年 7 月 10 日 7:25:00 TARINE, KAREN 登录
2012 年 7 月 10 日 7:10:00 纳瓦罗，克里斯蒂娜 登录
2012 年 7 月 10 日 7:10:00 REYES，ANDREA 登录

```

我希望将其作为查询处理，输出如下：

```
登录日期 员工姓名 登录 注销
2012 年 9 月 13 日萨利塔，林尼德安东尼奥 8:05:00 17:00:00
2012 年 9 月 12 日萨利塔，林尼德安东尼奥 8:05:00 17:05:00
2012 年 7 月 10 日加西亚，阿尔文 7:30:00 17:00:00
2012 年 7 月 10 日奥雷诺，莉亚 7:40:00 17:00:00
2012 年 7 月 10 日萨利塔，林尼德安东尼奥 8:00:00 17:00:00
2012 年 7 月 10 日卡西诺，保罗 8:00:00 17:00:00
2012 年 7 月 10 日 BELO，里约热内卢 8:00:00 17:00:00
2012 年 7 月 10 日 MAG-ISA，美宝莲 10:30:00 17:00:00
2012 年 7 月 10 日 塔林，凯伦 7:25:00 17:00:00
2012 年 7 月 10 日 雷耶斯，安德烈亚 7:10:00 17:00:00
7/10/2012 纳瓦罗，克里斯蒂娜 7:10:00 17:00:00

```

我如何实现这一目标？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T08:22:36.777

这就是你想要得到的：

```
SELECT DATE_FORMAT(LogDate, '%d/%c/%Y') AS LogDate, EmployeeName,
   (GROUP_Concat(CASE LogType WHEN 'LOGIN' THEN LogTime END)) AS LOGIN,
   (GROUP_Concat(CASE LogType WHEN 'LOGOUT' THEN LogTime END)) AS LOGOUT
FROM myTable
GROUP BY LogDate, EmployeeName
ORDER BY LogDate desc; 
```

# [*看到这个 SQLFiddle*](http://sqlfiddle.com/#!2/b71c9/10)

查询说明：

使用`CASE`语句将行转换为列（for `Login`and `Logout`）

```
SELECT DATE_FORMAT(LogDate, '%d/%c/%Y') AS LogDate, EmployeeName,
   (CASE LogType WHEN 'LOGIN' THEN LogTime END) AS LOGIN,
   (CASE LogType WHEN 'LOGOUT' THEN LogTime END) AS LOGOUT
FROM myTable
GROUP BY LogDate, EmployeeName, LogTime
ORDER BY LogDate desc; 
```

但这会让你喜欢[这个 SQLFiddle。](http://sqlfiddle.com/#!2/b71c9/15)

所以你需要使用`GROUP_CONCAT`(MySQL) 来加入`LogTime`和`NULL`删除`LogTime`from`GROUP BY`子句。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T08:05:44.563

```
Select  Log Date,   Employee Name,       LOGIN       LOGOUT 
    case(Log Type)
    when 'LOGIN' then Log Time AS LOGIN
    Else 
    Log Time AS LOGOUT
    End
From
YOUR_TABLE
order by Log Date desc 
```

# sql - 如何在 PostgreSQL 中按距离现在（）（未来优先）排序

> ID：12401793
> 
> 赞同：4
> 
> 时间：2012-09-13T07:54:31.307
> 
> 标签：sql, postgresql

我有一个`date`字段显示为从今天开始的天数。因此`2055-01-01`和`1950-01-01`将分别显示为正数和负数。现在我希望对这些进行排序，以便非负数按升序排列，然后负数按降序排列。例如：

```
0
1
2
3
4
-1
-2
-3 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-13T08:15:09.333

以下也将起作用：

```
 ORDER BY expiry < CURRENT_DATE, abs(expiry - CURRENT_DATE) 
```

但是，此表单不会使用索引来按所需顺序生成行。如果您的查询会从中受益（从表中选择大部分行或使用限制），那么您需要使用联合：

```
SELECT ... WHERE ... AND expiry >= CURRENT_DATE ORDER BY expiry
    UNION ALL
SELECT ... WHERE ... AND expiry < CURRENT_DATE ORDER BY expiry DESC 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-13T08:26:07.460

```
select * from @t
order by 
case when i >= 0 then 0 else 1 end,
case when i >= 0 then i else abs(i) end 
```

如果你用 'i' 代替你的 diff 计算，用 @t 代替你的表，这应该可以

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-13T07:55:20.387

我已经用这个 order by 子句解决了它：

```
ORDER BY CASE expiry >= CURRENT_DATE
         WHEN true THEN expiry
         ELSE CURRENT_DATE + (CURRENT_DATE - expiry) + interval '1000 years'
         END 
```

由于日期在今天的几年内，因此将负日期推到未来是安全的。然后他们与当前日期的距离被反转。

它有效，但更优雅的解决方案会很好。

# java - java .net和javascript之间正则表达式的区别？

> ID：12401794
> 
> 赞同：6
> 
> 时间：2012-09-13T07:54:35.883
> 
> 标签：java, javascript, .net, regex

我正在开发一个多平台系统。我们想使用正则表达式来测试某种格式的字符串。正则表达式将在数据库中编写一次，并由 3 个不同的平台使用。那么您知道正则表达式的编写方式是否存在差异？如果是，是完全不同还是只有几件事不同？

这是一个例子：

```
[a-fA-F0-9]{8}-[a-fA-F0-9]{4}-[a-fA-F0-9]{4}-[a-fA-F0-9]{4}-[a-fA-F0-9]{12} 
```

问候

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-13T08:00:02.450

简单的正则表达式模式适用于不同的实现，但是对于更复杂的匹配[存在差异。](http://en.wikipedia.org/wiki/Regex#Syntax)然而，常见的变体数量有限，即 POSIX 和 Perl 正则表达式。因此，您可以在 DB 中为它们设置两列，这在大多数情况下已经足够了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T08:24:51.033

C# 和 JavaScript 正则表达式之间几乎没有显着差异。

1.  IE 6 和 IE 7 不支持前瞻。
2.  JavaScript 支持的元字符列表非常少。
3.  命名组也不适用于 JavaScript。

很少有有用的链接。1 [、Java和C#正则表达式是否兼容？](https://stackoverflow.com/questions/538579/are-java-and-c-sharp-regular-expressions-compatible)- 检查第一个答案。

2.  [http://www.regular-expressions.info/refflavors.html](http://www.regular-expressions.info/refflavors.html) - 这里给出了很多不同之处。

3.  [Java 和 .NET 正则表达式](https://stackoverflow.com/questions/3785061/java-and-net-regular-expressions)- Java 和 .NET 正则表达式。

4.  这个写得很好的博客也可能会有所帮助 - [http://www.codinghorror.com/blog/2004/08/java-vs-net-regex-performance.html](http://www.codinghorror.com/blog/2004/08/java-vs-net-regex-performance.html)

我强烈推荐[RegexBuddy](http://www.regexbuddy.com/)，它了解不同编程语言的风格，并且可以很容易地看到差异，尤其是对于复杂模式。

# javascript - 分组标题列大小

> ID：12401805
> 
> 赞同：4
> 
> 时间：2012-09-13T07:55:24.463
> 
> 标签：javascript, extjs, extjs4

我有一个分组的标题网格。网格定义可以在 fiddle [here](http://jsfiddle.net/7sZge/)中找到。

结果看起来像这样。

![在此处输入图像描述](../Images/8ccc273a1c904605a6ad072c99bb3238.png)

我希望所有列的空间相等，包括分组标题内的列。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-13T12:21:14.677

Ext JS 目前不支持这种行为。我有这个完全相同的问题。这并不是一个真正的错误，因为源代码明确指出你不能这样做，但它似乎是网格的最大缺点之一（紧邻锁定列）。

我的解决方案是覆盖 4.1.0 中的[Ext.grid.ColumnLayout#completeLayout](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.grid.ColumnLayout-method-completeLayout)方法。这是确定子项（列）宽度的地方。您基本上要做的是获取网格可用的总宽度（可通过提供的布局/上下文对象获得）并在所有叶列上手动转换 flex->width 。然后，对于每组列，您可以对计算的宽度求和并设置父宽度。在`completeLayout`方法中执行此操作意味着它会在每个布局期间自动运行，因此您不必费心观看调整大小事件等。

有了一个好的调试器和相当多的耐心，你就可以解决这个问题。我想发布一个代码示例，但我的解决方案大约有 100 行，是我工作代码的一部分。不过，我仍然可以指出一些警告：

1.  如果您只需要支持 2 级标头，则不必费心使整个方法递归 3 级以上。雅尼。

2.  注意隐藏的列。我相信存在一个错误，即隐藏组标题没有在子列上设置隐藏属性。我最常见的问题之一是显示一列会以奇怪的方式改变一切。

3.  注意未密封的组。我通过密封每一列来解决这个问题，但如果能够自由移动列是您要求的一部分，那么您可能需要采取额外的步骤。

虽然老实说，最好的解决方案是在 Sencha 论坛上将此作为功能请求提交，并询问他们为什么 Ext JS 库中仍然不存在如此重要的功能。

**编辑：**将源代码发布到[Sencha 支持论坛](http://www.sencha.com/forum/showthread.php?242430-Grouped-Header-Column-size)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-02-20T18:51:47.487

如果您想像其他列一样使用子列，例如您有 2 个具有**固定**宽度的列，并且分组列的行为应该像具有 flex（**自动宽度**）的列，您需要编写一个自己的函数来执行此调整大小.

### 只有两行：[sencha example](https://fiddle.sencha.com/#fiddle/iju)

**说明：**您需要向`resize`网格添加事件侦听器并在函数内部调整子列的大小

> 网格监听器：

```
listeners: {
    resize: function(grid) {
        // you need to add and itemId for the sub columns parent
        var subCols = grid.getView().getHeaderCt().child('#sub-cols');
        // 200 = sum of the fixed width of columns
        subCols.setWidth(grid.getWidth() - 200);
    }
} 
```

> 网格列：

```
{
    text: 'sub columns',
    itemId: 'sub-cols',
    columns: [{
        text: 'Email',
        dataIndex: 'email',
        flex: 1
     }, {
        text: 'Phone',
        dataIndex: 'phone',
        flex: 1
     }]
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-09-13T11:16:23.930

您尝试将分组列 flex 设置为小 4 倍（注释为 0.25 值），但实际上不应该大 4 倍吗？

[Extjs 弹性](http://docs.sencha.com/ext-js/4-0/#!/example/layout-browser/layout-browser.html)

# javascript - 在javascript中制作数组时遇到问题

> ID：12401807
> 
> 赞同：2
> 
> 时间：2012-09-13T07:55:27.103
> 
> 标签：javascript, jquery

我在用javascript制作数组时遇到了麻烦。首先我是这样做的

```
for(var i=1; i <= rowCount-1; i++)
    {  
        product[i-1] = [{
            'product_id' : $('#product_id' + i).val(),
            'name' : $('#item' + i).val(),
            'model' : $('#model' + i).val(),
            'reward' : $('#reward' +i).val(),
            'subtract' : $('#subtract' + i).val(),
            'minimum' : $('#minimum' + i).val(),
            'shipping' : $('#shipping' + i).val(),
            'tax_class_id' : $('#tax_class_id' + i).val(),
            'weight' : $('#weight' + i).val(),
            'quantity' : $('table.order-table tbody tr td.quantity input[name=\'quantity'+ i +'\']').val(),
            'price' : $('table.order-table tbody tr[id=\''+ i +'\']').find('td.price').html(),
            'total' : $('table.order-table tbody tr td.quantity input[name=\'quantity'+ i +'\']').parent().parent().find('td.total').html()
        }];
    } 
```

在 ajax 帖子中将它作为参数传递后，我可以看到它作为

```
product[0][0][minimum]  
product[0][0][model]    326
product[0][0][name] apple mac power
product[0][0][price]    100.0000
product[0][0][product_id]   50
product[0][0][quantity] 5
product[0][0][reward]   0
product[0][0][shipping] 1
product[0][0][subtract] 1
product[0][0][tax_class_i...    0
product[0][0][total]    500
product[0][0][weight]   0.00000000
product[1][0][minimum]  
product[1][0][model]    326
product[1][0][name] apple mac power
product[1][0][price]    100.0000
product[1][0][product_id]   50
product[1][0][quantity] 7
product[1][0][reward]   0
product[1][0][shipping] 1
product[1][0][subtract] 1
product[1][0][tax_class_i...    0
product[1][0][total]    700 
```

但我想要这样的东西

```
product[0][name] = "apple mac power" 
```

所以我把我的代码改成了这个

```
for(var i=1; i <= rowCount-1; i++)
{  
    product = [{
        'product_id' : $('#product_id' + i).val(),
        'name' : $('#item' + i).val(),
        'model' : $('#model' + i).val(),
        'reward' : $('#reward' +i).val(),
        'subtract' : $('#subtract' + i).val(),
        'minimum' : $('#minimum' + i).val(),
        'shipping' : $('#shipping' + i).val(),
        'tax_class_id' : $('#tax_class_id' + i).val(),
        'weight' : $('#weight' + i).val(),
        'quantity' : $('table.order-table tbody tr td.quantity input[name=\'quantity'+ i +'\']').val(),
        'price' : $('table.order-table tbody tr[id=\''+ i +'\']').find('td.price').html(),
        'total' : $('table.order-table tbody tr td.quantity input[name=\'quantity'+ i +'\']').parent().parent().find('td.total').html()
    }];
} 
```

因此，在这样做之后，无论我有多少 rowCount，它都只显示 1 行的数组

```
product[0][minimum]  
product[0][model]    326
product[0][name] apple mac power
product[0][price]    100.0000
product[0][product_id]   50
product[0][quantity] 7
product[0][reward]   0
product[0][shipping] 1
product[0][subtract] 1
product[0][tax_class_i...    0
product[0][total]    700 
```

谁能帮我。？

提前致谢..

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-13T08:00:40.763

您正在创建一个数组数组。取出第二个数组，如下所示：

```
for(var i=1; i <= rowCount-1; i++)
{  
    product[i-1] = {        // Removed array open
        'product_id' : $('#product_id' + i).val(),
        'name' : $('#item' + i).val(),
        'model' : $('#model' + i).val(),
        'reward' : $('#reward' +i).val(),
        'subtract' : $('#subtract' + i).val(),
        'minimum' : $('#minimum' + i).val(),
        'shipping' : $('#shipping' + i).val(),
        'tax_class_id' : $('#tax_class_id' + i).val(),
        'weight' : $('#weight' + i).val(),
        'quantity' : $('table.order-table tbody tr td.quantity input[name=\'quantity'+ i +'\']').val(),
        'price' : $('table.order-table tbody tr[id=\''+ i +'\']').find('td.price').html(),
        'total' : $('table.order-table tbody tr td.quantity input[name=\'quantity'+ i +'\']').parent().parent().find('td.total').html()
    };       // Removed array close
} 
```

在 JavaScript 中，[ ] 创建一个数组，因此 [ {object} ] 创建一个单元格数组。

还要记住 product[0]["name"] 与 product[0].name 相同——在 JavaScript 中，属性也可以用于索引语法。product 是你的数组，数组中的每个单元格都是一个对象，它具有包括名称在内的属性。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-13T07:58:28.313

在您的第一个版本中，您将一个数组分配给数组，因此它显示为二维数组。在您的第二个版本中，您始终将您的产品变量分配给新值，因此它仅包含一个产品信息。因此，您可以通过删除 [ 和 ] 来更新您的第一个版本

```
for(var i=1; i <= rowCount-1; i++)
{
    product[i-1] = {
        'product_id' : $('#product_id' + i).val(),
        'name' : $('#item' + i).val(),
        'model' : $('#model' + i).val(),
        'reward' : $('#reward' +i).val(),
        'subtract' : $('#subtract' + i).val(),
        'minimum' : $('#minimum' + i).val(),
        'shipping' : $('#shipping' + i).val(),
        'tax_class_id' : $('#tax_class_id' + i).val(),
        'weight' : $('#weight' + i).val(),
        'quantity' : $('table.order-table tbody tr td.quantity input[name=\'quantity'+ i +'\']').val(),
        'price' : $('table.order-table tbody tr[id=\''+ i +'\']').find('td.price').html(),
        'total' : $('table.order-table tbody tr td.quantity input[name=\'quantity'+ i +'\']').parent().parent().find('td.total').html()
    };
} 
```

或者您可以将第二个版本修改为

```
for(var i=1; i <= rowCount-1; i++)
{  
    product.push({
        'product_id' : $('#product_id' + i).val(),
        'name' : $('#item' + i).val(),
        'model' : $('#model' + i).val(),
        'reward' : $('#reward' +i).val(),
        'subtract' : $('#subtract' + i).val(),
        'minimum' : $('#minimum' + i).val(),
        'shipping' : $('#shipping' + i).val(),
        'tax_class_id' : $('#tax_class_id' + i).val(),
        'weight' : $('#weight' + i).val(),
        'quantity' : $('table.order-table tbody tr td.quantity input[name=\'quantity'+ i +'\']').val(),
        'price' : $('table.order-table tbody tr[id=\''+ i +'\']').find('td.price').html(),
        'total' : $('table.order-table tbody tr td.quantity input[name=\'quantity'+ i +'\']').parent().parent().find('td.total').html()
    });
} 
```

希望它会有所帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-13T08:07:14.723

```
product[0]['name'] = "apple mac power" 
```

或者

```
product[0].name = "apple mac power" 
```

代替

```
product[0][name] = "apple mac power" 
```

你的第一种方法很好，但是你添加一个带有哈希的数组只删除 [] 周围

```
product[i-1] = {
        'product_id' : $('#product_id' + i).val(),
        'name' : $('#item' + i).val(),
        'model' : $('#model' + i).val(),
        'reward' : $('#reward' +i).val(),
        'subtract' : $('#subtract' + i).val(),
        'minimum' : $('#minimum' + i).val(),
        'shipping' : $('#shipping' + i).val(),
        'tax_class_id' : $('#tax_class_id' + i).val(),
        'weight' : $('#weight' + i).val(),
        'quantity' : $('table.order-table tbody tr td.quantity input[name=\'quantity'+ i +'\']').val(),
        'price' : $('table.order-table tbody tr[id=\''+ i +'\']').find('td.price').html(),
        'total' : $('table.order-table tbody tr td.quantity input[name=\'quantity'+ i +'\']').parent().parent().find('td.total').html()
    }; 
```

代替

```
product[i-1] = [{
        'product_id' : $('#product_id' + i).val(),
        'name' : $('#item' + i).val(),
        'model' : $('#model' + i).val(),
        'reward' : $('#reward' +i).val(),
        'subtract' : $('#subtract' + i).val(),
        'minimum' : $('#minimum' + i).val(),
        'shipping' : $('#shipping' + i).val(),
        'tax_class_id' : $('#tax_class_id' + i).val(),
        'weight' : $('#weight' + i).val(),
        'quantity' : $('table.order-table tbody tr td.quantity input[name=\'quantity'+ i +'\']').val(),
        'price' : $('table.order-table tbody tr[id=\''+ i +'\']').find('td.price').html(),
        'total' : $('table.order-table tbody tr td.quantity input[name=\'quantity'+ i +'\']').parent().parent().find('td.total').html()
    }]; 
```

# php - 为什么我的 php 中的值不会填充到选择选项中

> ID：12401812
> 
> 赞同：1
> 
> 时间：2012-09-13T07:55:35.057
> 
> 标签：php, json, jquery

调用函数的代码：

```
<select id="selectWarrior_1" name="warrior_1"  onclick="return selectWarriors()">
                    <option  selected="selected">----Select----</option>
                </select> 
```

函数代码：

```
function selectWarriors() {
        $.ajax({
            url: "display_warriors.php",
            datatype:"json",
            success: function(data) {
                var toAppend = '';
                if(typeof data === "object"){
                    for(var i=0;i<data.length;i++){
                        var warrior = data[i];
                        toAppend += '<option>'+data[i]['warrior_name']+'</option>';
                    }
                    $("#selectWarrior_1 select").append(toAppend);
                }
            }
        });
        return false;
    } 
```

我的php代码：

```
 <?php
header("Content-Type: application/json");

include 'functions/class.php';

$db = new DB();

$result = $db->getWarriors();

$warriors = array();

foreach($result as $names){
    $warriors[] = $names;
}
echo json_encode($warriors);
?> 
```

我怎样才能解决这个问题？为什么它没有填充我的选择选项我检查了我的 json 并且它有值。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T08:25:31.667

原谅间距，但我实际上只是使用 jquery 而不会混淆函数之间的传递（如果您异步重新填充内容，稍后可能会导致问题）。

```
$(function(){
  $('#selectWarrior_1').bind('click',function(){
        if ( $(this).data('warriors-loaded') ) { return; }
        var self = $(this);
        $.ajax({
            url: "display_warriors.php",
            datatype:"json",
            success: function(data) {
              if (! typeof data == 'object') return false;
              $.each(data, function(i,e) {
                self.append( $('<option>' + e['warrior_name'] + '</option>') );
              }
              self.data('warriors-loaded',true);
            }
        });
  });
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T08:03:13.477

出色地

输入类型 select 没有 onclick 事件。请改用 onChange 或 onFocus 事件。您也不想在调用函数时使用 return 。在您的场景中，使用`return`. 还要注意您使用的选择器。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-13T08:03:16.613

您的选择器不正确

改变`$("#selectWarrior_1 select")`

至`$("#selectWarrior_1")`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-13T07:59:25.887

您需要将`data`其视为 json 对象：

```
function selectWarriors() {
    $.getJSON('display_warriors.php', function(data) {
        var toAppend = '';
        $.each(data, function(key, val) {
            toAppend += '<option>'+val+'<\/option>';
        });
        $("#selectWarrior_1").append(toAppend);
    });
} 
```

# struts2 - 在 Struts2 应用程序中动态添加语言环境

> ID：12401816
> 
> 赞同：0
> 
> 时间：2012-09-13T07:55:58.333
> 
> 标签：struts2, locale

我正在做一个项目，我需要做一个模块，管理员可以随时添加语言环境。该项目是用 Struts2、Spring 和 Hibernate 制作的。

那么，可以通过在 Web 应用程序中上传我自己的语言环境文件而不重新部署它来完成吗？以及如何重写这些文件的默认路径？请问有什么想法吗？总的来说，最好的主意是什么？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-03T19:15:54.810

所以我找到了一个解决方案，将语言环境字符串写入数据库本身并重写逻辑。我认为这是最好的解决方案，这样我甚至可以从管理控制台中的页面即时修改字符串。

# c++ - 一个简单的 C++ 委托实现，但它“欺骗”了标准。意见？

> ID：12401817
> 
> 赞同：0
> 
> 时间：2012-09-13T07:56:04.200
> 
> 标签：c++, delegates

我在这里发布了实现和简短的测试/演示：http: [//ideone.com/CNJDi](http://ideone.com/CNJDi)

我想出了一种 C++ Delegates 方法，它与我所看到的其他东西完全不同。我要解决的具体问题是有一个统一的函数指针解决方案，其中给定的实例可能是 a) 成员 fn ptr+object ptr 或 b) 非成员 fn ptr。一旦你初始化了委托并将它交给其他代码，他就可以动态地调用它，甚至不知道它来自什么类型的对象（通常成员函数指针只能通过静态引用它来自的类来调用。嘘！）。这在理论上很容易实现，但是 C++ 使得实现这样的事情变得更加困难。所以我扭曲了语言以使其工作。

我的实现的主要缺点是，由于成员函数指针的无效转换/调用，它在技术上不“符合标准”（至少，我有 95% 的把握该标准在这里没有保护我……）。但它*确实*适用于我测试过的编译器（包括 Visual Studio 2012）。我还认为，如果编译器以直接的方式实现成员函数，那么它显然会“倾向于工作”。

我查看了其他一些实现，但对我来说，它们似乎使用起来非常复杂和笨拙。有些甚至依赖构建工具来生成存根函数来调用成员函数，而我的只依赖于宏和模板。我认为缺乏适当的委托是 C++ 的一个主要缺点，但我发现我“不那么讨厌这种解决方法”。现在我需要决定我是否真的想使用它，或者我是否只是因为我想到它而喜欢它。

以下是你如何使用它：

A. 声明委托类型

```
typedef DELEGATE(float, ARGS(int, int)) Delegate1; 
```

此宏自动声明静态和成员函数指针类型，因此您不必键入两次签名。它扩展到`Delegate<float (*)(int, int), float (Null::*)(int, int)>`. 编译器根据委托实例的初始化方式来使用其中合适的任何一个，以便稍后执行调用。编译器使用它来静态验证编码器调用提供的参数。ARGS 宏是与返回类型分开的纯语法糖：DELEGATE(float, int, int) 是相同的。

B. 初始化：

```
Delegate1 d = Delegate1(test1); // static function
Delegate1 e = Delegate1((Delegate1::MemberType)&TestClass::test2, &obj); // member 
```

这些静态函数和成员函数现在存储为相同的类型！obj 必须是指向 TestClass 实例的有效指针，并且 TestClass::test2 最好返回一个浮点数并将 (int, int) 作为参数，如上所述。这是主要的使用陷阱，编译器无法捕捉到这里的错误。

C. Invoke：（`INVOKE(d, ARGS(5, 6))` 在本例中返回一个浮点数）尽管看起来如此，但这个参数列表实际上与任何 C++ 函数调用一样类型安全！它使用上面提供的上述 float (*)(int, int) 签名来验证参数！它可以支持任意数量的参数，它只需要匹配签名。如果您从编译器添加太多/太少的参数、使用错误的参数类型等，您会得到友好的编译器错误。同样，ARGS 是语法糖，`INVOKE(d, 5, 6)`是一样的。

但是如果在不认可的编译器中使用 INVOKE，它可能会使程序崩溃:(

我有几个问题：

1.  谁能找到我发布的实现示例无法正常工作的任何好的编译器？
2.  我希望这要么完全有效，要么编译器/程序在第一次使用时就失败了。但是有没有可能它似乎工作了一段时间然后随机崩溃？
3.  在您看来，这看起来很容易/干净吗？还是您发现其他实现更简单？哪个？你能想出一个好方法来以某种方式改善我的语法/可用性吗？
4.  你会使用它吗？还是我应该硬着头皮使用更安全但更复杂的替代解决方案？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T08:13:55.330

为什么不直接使用 C++11 / Boost 中可用的 std::bind？成员函数、函数指针、lambda 函数、仿函数和任何其他可调用对象都可以与它一起使用。我个人更喜欢不惜一切代价避免使用预处理器和宏；它会使调试变得一团糟。Scott Meyers（Effective C++、More Effective C++ 和 Effective STL 的作者）也不鼓励使用预处理器。

绑定参考：[http ://en.cppreference.com/w/cpp/utility/functional/bind](http://en.cppreference.com/w/cpp/utility/functional/bind)

我还考虑使用 std::function 来封装各种类型，但是 bind 可以干净地处理几乎所有事情。[http://en.cppreference.com/w/cpp/utility/functional/function](http://en.cppreference.com/w/cpp/utility/functional/function)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T08:26:02.943

> 谁能找到我发布的实现示例无法正常工作的任何好的编译器？

在我看来，如果代码首先不符合标准，这无关紧要。如果您必须以一种奇怪的方式查看语言规则，那么您的代码*可能*不符合标准。

符合标准的代码很重要，因为虽然编译器的实现细节可能会发生变化，但生成的二进制文件的观察行为却不会。与标准合规性问题相比，不符合标准的代码无法正常工作的错误更有可能得到修复。

> 我希望这要么完全有效，要么编译器/程序在第一次使用时就失败了。但是有没有可能它似乎工作了一段时间然后随机崩溃？

如果您的代码调用未定义的行为，那么让它工作得很好，然后在最坏的时间发生灾难性的失败是标准允许的可能性。

> 在您看来，这看起来很容易/干净吗？还是您发现其他实现更简单？哪个？你能想出一个好方法来以某种方式改善我的语法/可用性吗？

老实说，我认为这是一团糟。要使用您的委托，我必须使用三个不同的宏，一个显然不是可选的单独的 typedef 和一个 C 样式的强制转换。坦率地说，使用和查看是痛苦的。

> 你会使用它吗？还是我应该硬着头皮使用更安全但更复杂的替代解决方案？

同样，老实说，我只会使用`std::function`和朋友（或者[`boost::function`](http://www.boost.org/doc/libs/1_51_0/doc/html/function.html)如果您没有可用的 C++11 编译器）。即使你发现`std::function`更复杂，它肯定更干净、更标准、更强大。

# android - 无法从函数 serviceAdded 中的 ServiceEvent 获取 txtrecords（来自 JmDNS）

> ID：12401822
> 
> 赞同：1
> 
> 时间：2012-09-13T07:56:43.097
> 
> 标签：android, jmdns

`ServiceEvent`我无法从函数中获取 txtrecord `serviceAdded`（来自 JmDNS）。

`ServiceEvent`但我可以从函数中获取 txtrecord`serviceResolved`

仅在`serviceResolved`启动时执行 1 次，并不包含所有服务。

`serviceAdded`每次捕获新服务时都会执行。但是当尝试访问 txtrecord 时，我在 txtrecord 中什么也没找到，我只找到了服务名称。

每次我捕获一项新服务时，是否有一种解决方案可以获取所有 txtRecord ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T09:40:31.267

与方法事件关联的服务信息`serviceAdded`不包括解析信息。要获得完整的解析信息，我们需要调用 JmDNS.getServiceInfo(String, String, long)

```
public void serviceAdded(ServiceEvent event) {
                   ServiceInfo inf = event.getDNS().getServiceInfo(event.getType(), event.getName());
               } 
```

参考：http: [//jmdns.sourceforge.net/apidocs/javax/jmdns/ServiceListener.html](http://jmdns.sourceforge.net/apidocs/javax/jmdns/ServiceListener.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T14:14:28.063

也可以通过

```
 public void serviceAdded(ServiceEvent event) {
                event.getDNS().requestServiceInfo(event.getType(), event.getName(), true);
 } 
```

这将请求服务解决方案。

# c++ - C ++ Netbeans连接到MySQL给出错误

> ID：12401832
> 
> 赞同：0
> 
> 时间：2012-09-13T07:57:18.080
> 
> 标签：c++, mysql

我正在尝试在连接到 MySQL 服务器的 netbeans（和 win 7）上创建一个 C++ 程序。我正在使用从 MySQL 获得的库

```
#include <cppconn/driver.h>
#include <mysql_driver.h>
#include <mysql_connection.h>

int SQLConnection(){

sql::mysql::MySQL_Driver *driver;
sql::Connection *con;

driver = sql::mysql::get_mysql_driver_instance();
con = driver->connect("tcp://127.0.0.1:3306", "user", "password");
delete con;
} 
```

但我不断收到这个错误。

```
"/usr/bin/make" -f nbproject/Makefile-Debug.mk QMAKE= SUBPROJECTS= .build-conf
make[1]: Entering directory `/cygdrive/c/Users/Renier.SOFTWARESOL/Documents /NetBeansProjects/TestOne'
"/usr/bin/make"  -f nbproject/Makefile-Debug.mk dist/Debug/Cygwin_4.x-Windows/testone.exe
make[2]: Entering directory `/cygdrive/c/Users/Renier.SOFTWARESOL/Documents/NetBeansProjects/TestOne'
mkdir -p build/Debug/Cygwin_4.x-Windows
rm -f build/Debug/Cygwin_4.x-Windows/MySQLConnect.o.d
g++    -c -g -I../../../../../MySQL/Connector\ C++\ 1.1.0/include -MMD -MP -MF build/Debug/Cygwin_4.x-Windows/MySQLConnect.o.d -o build/Debug/Cygwin_4.x-Windows/MySQLConnect.o MySQLConnect.cpp
mkdir -p dist/Debug/Cygwin_4.x-Windows
g++     -o dist/Debug/Cygwin_4.x-Windows/testone build/Debug/Cygwin_4.x-Windows/ISP.o  build/Debug/Cygwin_4.x-Windows/WorkDone.o  build/Debug/Cygwin_4.x-Windows/Individual.o  build/Debug/Cygwin_4.x-Windows/Domain.o  build/Debug/Cygwin_4.x-Windows/main.o  build/Debug/Cygwin_4.x-Windows/Employee.o  build/Debug/Cygwin_4.x-Windows/Device.o  build/Debug/Cygwin_4.x-Windows/Computer.o  build/Debug/Cygwin_4.x-Windows/ThreeG.o  build/Debug/Cygwin_4.x-Windows/Line.o  build/Debug/Cygwin_4.x-Windows/Software.o  build/Debug/Cygwin_4.x-Windows/MySQLConnect.o  build/Debug/Cygwin_4.x-Windows/Site.o  build/Debug/Cygwin_4.x-Windows/LogMethod.o  build/Debug/Cygwin_4.x-Windows/Request.o  build/Debug/Cygwin_4.x-Windows/Network.o  build/Debug/Cygwin_4.x-Windows/Email.o  build/Debug/Cygwin_4.x-Windows/runner.o  build/Debug/Cygwin_4.x-Windows/MAC.o  build/Debug/Cygwin_4.x-Windows/Router.o  build/Debug/Cygwin_4.x-Windows/Company.o  build/Debug/Cygwin_4.x-Windows/Status.o  build/Debug/Cygwin_4.x-Windows/ThreeGModem.o -L../../../../../MySQL/Connector\ C++\ 1.1.0/lib -L../../../../../MySQL/MySQL\ Server\ 5.5/lib -lmysql -lmysqlcppconn-static 
nbproject/Makefile-Debug.mk:83: recipe for target `dist/Debug/Cygwin_4.x-Windows/testone.exe' failed
make[2]: Leaving directory `/cygdrive/c/Users/Renier.SOFTWARESOL/Documents/NetBeansProjects/TestOne'
nbproject/Makefile-Debug.mk:80: recipe for target `.build-conf' failed
make[1]: Leaving directory `/cygdrive/c/Users/Renier.SOFTWARESOL/Documents/NetBeansProjects/TestOne'
nbproject/Makefile-impl.mk:39: recipe for target `.build-impl' failed
build/Debug/Cygwin_4.x-Windows/MySQLConnect.o: In function `get_mysql_driver_instance':
/cygdrive/c/Users/Renier.SOFTWARESOL/Documents/NetBeansProjects/TestOne/../../../../../MySQL/Connector C++ 1.1.0/include/mysql_driver.h:87: undefined reference to `sql::mysql::get_driver_instance()'
collect2: ld returned 1 exit status
make[2]: *** [dist/Debug/Cygwin_4.x-Windows/testone.exe] Error 1
make[1]: *** [.build-conf] Error 2
make: *** [.build-impl] Error 2

BUILD FAILED (exit value 2, total time: 12s) 
```

有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T10:29:12.247

您可以尝试对此进行原始编译吗？放入链接器 mysqlcppconn.lib ！

```
#include "mysql_connection.h"
#include "mysql_driver.h"
#include <cppconn/driver.h>
#include <cppconn/exception.h>
#include <cppconn/resultset.h>
#include <cppconn/statement.h>

int main(){

sql::Driver *driver;
sql::Connection *con;
sql::Statement *stmt;
sql::ResultSet *res;
sql::Statement *pstmt;

try{
driver = get_driver_instance();
con = driver->connect("localhost", "root", "root");
con->setSchema("test");
stmt = conn->createStatement();

/*blah blah yada yada*/

}catch(sql::SQLException &e){
    std::cout<<e.what();
} 
```

# javascript - Recaptcha 在 IE7 和 8 中不起作用

> ID：12401837
> 
> 赞同：0
> 
> 时间：2012-09-13T07:57:29.250
> 
> 标签：javascript, ajax, recaptcha

我正在使用 Google Recaptcha Ajax API，它在 FF 和 Chrome 中运行良好，但我在 IE 7 和 8 中得到的结果非常令人失望。我通过此链接遵循指南[https://developers.google.com/recaptcha/docs/display #AJAX](https://developers.google.com/recaptcha/docs/display#AJAX)

我**在第 103 行附近的某处出现 IE Unknown runtime error 错误**。我在 IE 中使用开发人员工具来调试错误。好吧，我浏览了网络，但仍然找不到好的解决方案。希望这里的任何人都可以帮助我。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T08:19:55.060

你能试试这2个链接吗

*   [http://drupal.org/node/1112080](http://drupal.org/node/1112080)
*   [http://eventespresso.com/forums/2012/03/re-captcha-not-working-in-ie/](http://eventespresso.com/forums/2012/03/re-captcha-not-working-in-ie/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-08T22:32:06.870

您的 ReCaptcha 目标是`<p>`偶然呈现的吗？

recaptcha ajax 在呈现的元素中创建 div 和表格，并且由于 HTML 规则（至少根据 IE），这些是无效的构造，所以他们吐了。

# clickonce - ClickOnce 详细 - PCI 合规性日志记录

> ID：12401841
> 
> 赞同：0
> 
> 时间：2012-09-13T07:57:36.163
> 
> 标签：clickonce, pci-dss, pci-compliance

是否认为[详细 ClickOnce 日志记录](http://msdn.microsoft.com/en-us/library/dd996997.aspx)符合[PCI DSS 2.0](https://www.pcisecuritystandards.org/documents/Prioritized_Approach_V2.0.pdf)要求 10.2.7，至少就其内容（要求 10.3）而言？

> (10.2) 对所有系统组件实施自动审计跟踪以重建以下事件： (10.2.7) 系统级对象的创建和删除

这种日志记录的分析样本将特别有用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T11:45:44.363

它不是。

在咨询了一家 QSA 公司后，我们发现详细 ClickOnce 日志记录无法满足此要求的关键原因在于它没有列出所有更改的程序集，而只列出了主要的可执行文件。

即使我们想将整个 ClickOnce 应用程序解释为在 ClickOnce 部署期间更新的系统级对象，也存在其他缺失的信息。

一个示例详细日志[在这里](http://goldmailrobin.blob.core.windows.net/robindotnet/ClickOnceLog_Verbose_Install.txt)。

# android - 通过 SyncAdapter 添加和更新邮政地址

> ID：12401843
> 
> 赞同：1
> 
> 时间：2012-09-13T07:57:55.757
> 
> 标签：android, android-syncadapter, street-address

到目前为止，我一直遵循 Android Sdk 提供的 Sample Syncadapter 示例，并且能够添加电话号码和姓名等联系人详细信息，但找不到任何有关如何通过同步适配器添加和更新邮政地址的示例。请在这方面帮助我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T05:14:07.337

立即添加此邮政地址检查，

```
 // inserUri = name add uri 
    Uri addUri = Uri.withAppendedPath(insertUri, People.ContactMethods.CONTENT_DIRECTORY);
    ContentValues cv = new ContentValues();
    cv.put(People.ContactMethods.KIND,Contacts.KIND_POSTAL/Contacts.KIND_EMAIL);
    cv.put(People.ContactMethods.DATA, mEditText.getText().toString().trim());
    cv.put(People.ContactMethods.TYPE,  People.ContactMethods.TYPE_*);
    Uri updateUri = getContentResolver().insert(addUri, cv); 
```

并更新以检查此代码，

```
String selectProjectionAddress = ContactsContract.Data.CONTACT_ID + "=? AND " + 
        ContactsContract.Data.MIMETYPE + "='"  +
        ContactsContract.CommonDataKinds.StructuredPostal.CONTENT_ITEM_TYPE + "'" + " AND " + 
        ContactsContract.CommonDataKinds.StructuredPostal.TYPE + "=?";

if (editTextAddress.getText().toString().trim().length() > 0 ) {

     String[] args = new String[] { "yourContactsID", 
             String.valueOf(ContactsContract.CommonDataKinds.StructuredPostal.TYPE_HOME) };

     ops.add(ContentProviderOperation.newUpdate(ContactsContract.Data.CONTENT_URI)             
                        .withSelection(selectProjectionAddress, args)             
                        .withValue(ContactsContract.CommonDataKinds.StructuredPostal.DATA, 
                                editTextAddress.getText().toString().trim())             
                        .build());

} 
```

# c# - 如何根据 USB 端口位置连接到智能卡读卡器？

> ID：12401845
> 
> 赞同：5
> 
> 时间：2012-09-13T07:58:07.533
> 
> 标签：c#, smartcard-reader, winscard

我目前正在对多个智能卡读卡器识别进行一些研究和测试，以确定哪个读卡器连接到哪个 USB 端口。

假设我将 Reader A 插入 USB 端口 1。通过调用 SCardListReaders 函数，我检索到以下友好名称：

> *   ACS ACR1281 1S 双读卡器 PICC 0

然后我将另一个阅读器（阅读器 B）插入 USB 端口 2。现在我有 2 个阅读器连接到同一台 PC。调用 SCardListReaders 会给我：

> *   ACS ACR1281 1S 双读卡器 PICC 0
> *   ACS ACR1281 1S 双读卡器 PICC 1

我知道这些名称是[如何生成的（PCSC 智能卡读卡器的“友好名称”是如何构造的？](https://stackoverflow.com/questions/10813041/how-are-pcsc-smart-card-reader-friendly-names-constructedhttp://)）并且我知道以不同的顺序插入读卡器（先插入读卡器 B，然后插入读卡器 A）会改变 SCARD_ATTR_DEVICE_UNIT影响友好名称。

基于上述场景，**如何确保 PC 始终自动连接 USB 端口 1 中的 PICC 读卡器，无论其友好名称如何？**

任何帮助都感激不尽。谢谢你。

# c# - c# 存储用于网页的字符串的最佳位置

> ID：12401849
> 
> 赞同：3
> 
> 时间：2012-09-13T07:58:27.660
> 
> 标签：c#, .net, webforms

我正在创建我的第一个 .net 网站。

很多页面在页面中都有代码增强字符串，像这样：

```
string.Format("{0} Reviews", _store.Name); 
```

虽然这本身并不笨拙，但有些页面有很多很长的字符串，并且使代码页很麻烦。

我知道您可以使用资源文件来存储字符串，但这没有考虑到字符串中的编程插入。

有没有人有任何技巧可以更好地处理这个问题？

更新

哇，感谢您的提示任何丰富的反应家伙。我会看一下它们，看看哪个最适合。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-13T08:00:28.860

使用应用程序设置或为您要提供的不同文化和语言创建资源文件。

*   [MSDN - ASP.NET 全球化和本地化](http://msdn.microsoft.com/en-us/library/c6zyy3s9%28v=vs.100%29.aspx)
*   [Codeproject - ASP.NET 2.0 中本地化的简单介绍](http://www.codeproject.com/Articles/15991/An-Easy-Introduction-to-Localization-in-ASP-NET-2)
*   [MSDN - 演练：通过 ASP.NET 使用资源进行本地化](http://msdn.microsoft.com/en-us/library/fw69ke6f%28v=vs.80%29.aspx)
*   [Codeproject - 在 ASP.NET 2.0 中揭开全球化和本地化的神秘面纱](http://www.codeproject.com/Articles/15313/Globalization-and-localization-demystified-in-ASP)
*   [Scott Hanselman - ASP.NET MVC 3、JavaScript 和 jQuery 中的全球化、国际化和本地化 - 第 1 部分](http://www.hanselman.com/blog/GlobalizationInternationalizationAndLocalizationInASPNETMVC3JavaScriptAndJQueryPart1.aspx)
*   [MSDN - 在 C# 中使用设置](http://msdn.microsoft.com/en-us/library/aa730869%28v=vs.80%29.aspx)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-13T08:01:44.287

我只想存储

```
"{0} Reviews" 
```

在资源文件中并给它一个合理的名称，例如ReviewsWithStoreNameParam

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-13T08:01:14.553

您可以使用资源文件并添加编程插入。

例如，您可以放入`"{0} Reviews"`资源文件。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-13T08:04:17.643

我动态地使用资源：

```
string.Format(GetGlobalResourceObject("MyResources", "Label_Reviews").ToString(), _store.Name); 
```

在 MyResources.resx 中：

```
Label_Reviews --> "{0} Reviews" 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-13T08:01:12.790

这里有两种方法：-

> 1).您可以在配置文件中构建冗长的字符串。
> 
> 2).您可以将预先确定的文本字符串存储在 XML 文件中。

希望这是有用的。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-13T08:05:06.613

我出于这种目的使用配置文件。即使应用程序正在运行，您也可以轻松地修改它们。

```
<appSettings>
   <add key="1" value="TestString" />
</appSettings> 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-09-13T08:09:14.397

您*可以*将程序插入存储在资源文件中的字符串中。

只需像这样存储字符串：

```
Name             | Value
-----------------+-------------------
reviews          | {0} Reviews 
```

并像这样调用它（假设您的资源文件被命名为 default `Resource1.resx`）

```
string.Format(Resource1.reviews, _store.Name); 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-09-13T08:14:59.780

在 aspx.cs 文件中，（服务器端）使用 public 创建字符串

```
public string reviews; 
```

完成逻辑后，设置值：

```
reviews = string.Format("{0} Reviews", _store.Name); 
```

所以，你的 var 是公开的，你可以在你的 aspx 文件中使用字符串评论

```
<%= reviews %> 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-09-13T09:11:43.810

使用 Global.asax 文件

在 Global.asax 中声明静态 HashTable，如下所示：

```
public static Hashtable LabelResource = null; 
```

您可以从数据库或 XML 文件或 Application_OnStart 或 Session_Start 的简单文本文件加载此哈希表

您可以在您的应用程序中（在您的 aspx 页面中）使用此变量，例如：

```
Global.LabelResource["ReviewString1"].ToString() 
```

# asp.net - 是否可以在 RDLC 报告的文本框中设置背景颜色？

> ID：12401851
> 
> 赞同：3
> 
> 时间：2012-09-13T07:59:06.277
> 
> 标签：asp.net, report, rdlc

我需要在生成的 word 文档中的部分文本上突出显示黄色。突出显示的词是为了在报告生成后由用户更改。在我看来，这是很常见的用例。更改字体颜色不是一个好的选择，因为它在打印的文档上不清晰可见。

在 Visual Studio RDLC disainer 背景颜色按钮在文本框内和占位符上被禁用。我尝试将背景属性手动添加到 RDLC 中 TextRun 的样式部分。这行不通。我发现的唯一选择是将文本分成单独的文本框并在整个文本框上设置背景。但这对开发人员来说是一个非常不方便的选择。对最终用户来说更不方便，因为文本是在单独的表格中生成的，这使得更改变得非常困难。

有没有办法或解决方法来做到这一点？

# android - Android - 服务 - Android 如何在内部创建服务？

> ID：12401855
> 
> 赞同：0
> 
> 时间：2012-09-13T07:59:27.190
> 
> 标签：android, service, process

我想更多地了解 Android 的行为，我想知道 Android 将如何创建服务。

我知道如何创建服务...从服务类扩展等等...

但有趣的是如何创建服务（在代码中）或如何将活动绑定到服务（方法：bindService(..)）？

有谁知道程序吗？通过android的源代码战斗没有成功：/

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T12:22:00.193

此代码正在我的应用程序中运行

```
import java.io.IOException;
import android.app.Service;
import android.content.Intent;
import android.media.AudioManager;
import android.media.MediaPlayer;
import android.os.IBinder;
import android.util.Log;
import android.widget.Toast;

public class MusicService extends Service {

    private static final String TAG = "MyService";
    public static MediaPlayer mediaplayer;
    String musicfile="http://radio.radioamerica.org:8000/ra.mp3";

    @Override
    public IBinder onBind(Intent intent) {
        Log.i(" ibinder ", "");
        return null;
    }

    @Override
    public void onCreate() {
    mediaplayer = new MediaPlayer();
        mediaplayer.setAudioStreamType(AudioManager.STREAM_MUSIC);
    }

    @Override
    public void onDestroy() {
        mediaplayer.stop();
    }

    @Override
    public void onStart(Intent intent, int startid) {

        Log.d(TAG, "onStart");
        if (intent.getExtras().getString("paths") == null) {
            Log.i("Intent Null", "Null");
        } else {
            Log.i("Intent Not Null", "Not Null");
            musicfile = intent.getExtras().getString("paths");
            Log.i("musicfile", "" + musicfile);
            try {
                mediaplayer.reset();
                mediaplayer.setDataSource(musicfile);
                mediaplayer.prepare();
                mediaplayer.start();
            } catch (IllegalArgumentException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            } catch (IllegalStateException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            } catch (IOException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
        }
    }
} 
```

还有吗？

# api - salesforce api 支持所有销售云版本？

> ID：12401859
> 
> 赞同：0
> 
> 时间：2012-09-13T07:59:47.663
> 
> 标签：api, salesforce

salesforce api 支持所有销售云版本（Contact Manager、Group、Professional、Enterprise、Unlimited）？如果支持，请给出参考网址。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T12:36:01.407

要使用 API，您的组织必须是以下 3 个版本之一。请注意，默认情况下启用此功能：

1.  企业版
2.  无限版
3.  开发者版

API 包不适用于以下版本：

1.  个人版
2.  团体版
3.  专业版*

    *经过认证的合作伙伴应用程序（例如 Excel 连接器的 PE 版本）在完成安全审查后将获得 API 令牌。此 API 令牌有时称为“客户端 ID”。允许使用经过认证的合作伙伴应用程序的 API 令牌标识的 API 请求与 Professional Edition 组织一起操作。有关合作伙伴认证的更多信息，请访问：http://wiki.apexdevnet.com/index.php/Certification_FAQ。

详细[限制](https://na14.salesforce.com/help/doc/en/integrate_api_rate_limiting.htm)

# opengl - 体积渲染中的块 LOD 选择

> ID：12401865
> 
> 赞同：0
> 
> 时间：2012-09-13T08:00:03.187
> 
> 标签：opengl, graphics, 3d, rendering, visualization

我现在想实现平面分块多分辨率体绘制。众所周知，我们应该首先将体数据分成2^n*2^n*2^n个大小相等的块。然后我们决定每个子块的**LOD（细节级别）**。最后我们将这些块使用不同的分辨率存储到压缩纹理中。

现在我的问题是：

(1)我读过一篇论文《Multi-resolution texture rendering for medical data》，我知道块的维度必须是2的幂。但是如果体数据不是2的幂，例如512*512*225 ,我应该如何划分体积数据？

(2)如何计算每个块的LOD？有人可以向我推荐一些典型且有用的算法吗？

以下是论文《Multi-resolution texture rendering for medical data》中的算法：块的每一层细节可以用下面的公式来量化：

![在此处输入图像描述](../Images/c75d2a58f42179aaa41d883e7db90cee.png)

avgi 表示某个父块的第 i 个子块中 2^3(max_l) 标量值的平均值。max_l 是父块的最高细节层次。l 表示正在分析当前的细节层次(?? ??我不是很明白）。Sj 表示标量值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T09:27:25.387

> 但是如果体积数据不是 2 的幂，例如 512*512*225，我应该如何划分体积数据？

用零对称地填充二维的非幂，以达到 2 长度的幂。

在不知道每个参数和变量的含义的情况下，LOD 公式有点混乱。但如果我必须做出有根据的猜测，我会说它将 LoD 与块的屏幕尺寸相关联，以通过 Nyquist 限制来限制 LoD 分辨率。

# silverlight - 在silverlight中将对象转换为字节数组

> ID：12401866
> 
> 赞同：0
> 
> 时间：2012-09-13T08:00:03.077
> 
> 标签：silverlight, silverlight-5.0

```
 private byte[] ObjectToByteArray(Object obj)
    {
        if (obj == null)
            return null;
        BinaryFormatter bf = new BinaryFormatter();
        MemoryStream ms = new MemoryStream();
        bf.Serialize(ms, obj);
        return ms.ToArray();
    }

    private Object ByteArrayToObject(byte[] arrBytes)
    {
        MemoryStream memStream = new MemoryStream();
        BinaryFormatter binForm = new BinaryFormatter();
        memStream.Write(arrBytes, 0, arrBytes.Length);
        memStream.Seek(0, SeekOrigin.Begin);
        Object obj = (Object)binForm.Deserialize(memStream);
        return obj;
    } 
```

我不能在 silverligth 中执行该过程，没有定义“BinaryFormatter”类。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T08:11:01.607

Silverlight 没有 BinaryFormatter 或 SoapFormatter 这样的类，但您可以使用 Silverlight 中支持的[DataContractJsonSerializer](http://msdn.microsoft.com/en-us/library/system.runtime.serialization.json.datacontractjsonserializer%28v=vs.95%29.aspx)。

# android - 将线性布局转换为图像时出现异常

> ID：12401868
> 
> 赞同：0
> 
> 时间：2012-09-13T08:00:15.897
> 
> 标签：android

我想将线性布局转换为图像。我为此目的使用以下代码，但我得到了 nullpointerexception。请告诉我如何解决这个问题。这是代码：

```
public class AndroidWebImage extends Activity {

ImageView bmImage; 
LinearLayout view;
  /** Called when the activity is first created. */
  @Override
  public void onCreate(Bundle savedInstanceState) {
      super.onCreate(savedInstanceState);
      setContentView(R.layout.main);

      view = (LinearLayout)findViewById(R.id.screen);
      bmImage = (ImageView)findViewById(R.id.image);

      view.setDrawingCacheEnabled(true);
      // this is the important code :)  
      // Without it the view will have a dimension of 0,0 and the bitmap will be null          

      view.measure(MeasureSpec.makeMeasureSpec(0, MeasureSpec.UNSPECIFIED), 
            MeasureSpec.makeMeasureSpec(0, MeasureSpec.UNSPECIFIED));

      view.layout(0, 0, view.getMeasuredWidth(), view.getMeasuredHeight()); 

      view.buildDrawingCache(true);
      Bitmap b = Bitmap.createBitmap(view.getDrawingCache());
      view.setDrawingCacheEnabled(false); // clear drawing cache

      bmImage.setImageBitmap(b);   

};
} 
```

我在这一行遇到异常：

```
 Bitmap b = Bitmap.createBitmap(view.getDrawingCache()); 
```

这是错误日志：

```
09-13 12:19:26.061: W/dalvikvm(551): threadid=3: thread exiting with uncaught exception (group=0x4001b188)
09-13 12:19:26.112: E/AndroidRuntime(551): Uncaught handler: thread main exiting due to uncaught exception
09-13 12:19:26.593: E/AndroidRuntime(551): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.velosys.interview_preparation/com.velosys.interview_preparation.activities.Certificate}: java.lang.NullPointerException
09-13 12:19:26.593: E/AndroidRuntime(551):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2496)
09-13 12:19:26.593: E/AndroidRuntime(551):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2512)
09-13 12:19:26.593: E/AndroidRuntime(551):  at android.app.ActivityThread.access$2200(ActivityThread.java:119)
09-13 12:19:26.593: E/AndroidRuntime(551):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1863)
09-13 12:19:26.593: E/AndroidRuntime(551):  at android.os.Handler.dispatchMessage(Handler.java:99)
09-13 12:19:26.593: E/AndroidRuntime(551):  at android.os.Looper.loop(Looper.java:123)
09-13 12:19:26.593: E/AndroidRuntime(551):  at android.app.ActivityThread.main(ActivityThread.java:4363)
09-13 12:19:26.593: E/AndroidRuntime(551):  at java.lang.reflect.Method.invokeNative(Native Method)
09-13 12:19:26.593: E/AndroidRuntime(551):  at java.lang.reflect.Method.invoke(Method.java:521)
09-13 12:19:26.593: E/AndroidRuntime(551):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:860)
09-13 12:19:26.593: E/AndroidRuntime(551):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:618)
09-13 12:19:26.593: E/AndroidRuntime(551):  at dalvik.system.NativeStart.main(Native Method)
09-13 12:19:26.593: E/AndroidRuntime(551): Caused by: java.lang.NullPointerException
09-13 12:19:26.593: E/AndroidRuntime(551):  at android.graphics.Bitmap.createBitmap(Bitmap.java:358)
09-13 12:19:26.593: E/AndroidRuntime(551):  at com.velosys.interview_preparation.activities.Certificate.onCreate(Certificate.java:76)
09-13 12:19:26.593: E/AndroidRuntime(551):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
09-13 12:19:26.593: E/AndroidRuntime(551):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2459)
09-13 12:19:26.593: E/AndroidRuntime(551):  ... 11 more
09-13 12:19:26.661: I/dalvikvm(551): threadid=7: reacting to signal 3
09-13 12:19:26.661: E/dalvikvm(551): Unable to open stack trace file '/data/anr/traces.txt': Permission denied 
```

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T09:01:08.340

您不能在 onCreate 中执行此操作。布局尚未显示。您可以稍后在 Activity 的生命周期中执行此操作，例如 onWindowFocusChanged 或使用我更喜欢的 ViewTreeObserver，因为它更符合 OOP。

[http://developer.android.com/reference/android/view/ViewTreeObserver.OnGlobalLayoutListener.html](http://developer.android.com/reference/android/view/ViewTreeObserver.OnGlobalLayoutListener.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T08:21:41.233

奇怪的是，绘图缓存似乎为 getDrawingCache() 返回了 null。

也许您可以在不使用缓存的情况下尝试这种方法。

```
Bitmap bitmap = Bitmap.createBitmap( view.getLayoutParams().width, view.getLayoutParams().height, Bitmap.Config.ARGB_8888);                
Canvas canvas = new Canvas(bitmap);
view.layout(0, 0, view.getLayoutParams().width, view.getLayoutParams().height);
view.draw(canvas); 
```

# sql-server - 从给定日期算起过去 7 天的用户数

> ID：12401869
> 
> 赞同：0
> 
> 时间：2012-09-13T08:00:16.837
> 
> 标签：sql-server, dateadd

我有一个表格，我必须在其中更新该特定日期的用户数量以及从给定日期起过去 7 天内的用户数量。样本数据看起来像

```
Date    UserCountToday  UserCount7days
20120911    907575  
20120910    953629  
20120909    1366180 
20120908    1388916 
20120907    1009425 
20120906    918638  
20120905    956770  
20120904    1018152 
20120903    1306341 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T08:52:42.110

尝试这个：

```
 with cte as 
        (select *,ROW_NUMBER() over(order by [Date]) as row_num
        from t_users)
 select [Date],UserCountToday, (select SUM(UserCountToday) 
 from   cte c1 where c.row_num>=c1.row_num 
 and    abs(c.row_num-c1.row_num)<7)  as UserCount7days 
 from   cte c 
```

**结果**

```
Date    UserCountToday  UserCount7days
20120903    1306341 1306341
20120904    1018152 2324493
20120905    956770  3281263
20120906    918638  4199901
20120907    1009425 5209326
20120908    1388916 6598242
20120909    1366180 7964422
20120910    953629  7611710
20120911    907575  7501133 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T08:34:01.610

```
;WITH CTE as (select row_number() over (order by date) as rn,Date,UserCountToday,UserCount7days from tbl5)

,CTERec as (
select rn,Date,UserCountToday ,UserCountToday  as UserCount7days from CTE where rn=1
union all
select c.rn,c.Date,c.UserCountToday ,c.UserCountToday+c1.UserCount7days  as UserCount7days from CTERec c1 inner join CTE c
on c.rn=c1.rn+1 
)

select Date,UserCountToday,CASE WHEN rn<=7 then UserCount7days else (UserCount7days-(select UserCount7days from CTERec where rn=c.rn-7)) end asUserCount7days  from CTERec c 
```

# propagation - 一个简单的标准信念传播

> ID：12401870
> 
> 赞同：0
> 
> 时间：2012-09-13T08:00:19.437
> 
> 标签：propagation, belief-propagation

我读了张的论文[**Expert Finding in A Social Network**](http://keg.cs.tsinghua.edu.cn/jietang/publications/Zhang-et-al-Expert-Finding.pdf)，公式（1）是一种基于传播的方法，类似于标准的信念传播。是否有代码示例或工具可以做到这一点？传播调度程序似乎需要并行实现。任何指导将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T08:17:11.427

您可能想查看[LibDai](http://www.libdai.org)（开源，基于 C++ 和 MatLab），它提供了一些推理算法，包括信念传播的一些变体。

# android - 如何实现带圆角的表格？

> ID：12401871
> 
> 赞同：3
> 
> 时间：2012-09-13T08:00:27.507
> 
> 标签：android, user-interface, border

这就是我要的：

![在此处输入图像描述](../Images/eaed0adb79d5ac78d61e486105f4e3f7.png)

这就是我所做的：

![在此处输入图像描述](../Images/f52010d05e47f4da3d91afb1223e7309.png)

不同之处在于线条和边框之间有一些空格，因为我用于`padding=10dp`外边框：

```
<shape xmlns:android="http://schemas.android.com/apk/res/android">
    <solid android:color="#FFFFFF"/>
    <stroke android:width="2dp" android:color="#808080"/>
    <corners
            android:radius="10dp"/>
    <padding
            android:left="10dp"
            android:top="10dp"
            android:right="10dp"
            android:bottom="10dp"/>
</shape> 
```

我这样做对吗？我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-13T08:18:53.780

这是您想要的 xml 文件。

从您的 xml 文件中删除 Padding 并将填充放在每个小部件中。这里 test.xml 是没有填充属性的背景 xml 文件。

```
 <?xml version="1.0" encoding="utf-8"?>
    <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content" 
        android:orientation="vertical"
        android:layout_gravity="center_horizontal"
        android:background="@drawable/test"
        android:layout_margin="10dp">

        <TextView
            android:id="@+id/textView"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content" 
            android:text="Sample TextView"
            android:padding="10dp"/>

        <View 
            android:layout_width="fill_parent"
            android:layout_height="2dp"
            android:background="#000000" />

        <TextView
            android:id="@+id/textView"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content" 
            android:text="Sample TextView"
            android:padding="10dp"/>

        </LinearLayout> 
```

**编辑**test.xml 文件

```
<shape xmlns:android="http://schemas.android.com/apk/res/android">
    <solid android:color="#FFFFFF"/>
    <stroke android:width="2dp" android:color="#808080"/>
    <corners
            android:radius="10dp"/>

</shape> 
```

![在此处输入图像描述](../Images/ee2c1a22623c698c0b9b970d77ba4672.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T08:08:29.877

移除填充物。将元素放入每个框中，并为每个框添加填充。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-13T08:15:08.683

**解决方案1：** //删除形状的填充

**解决方案2：** //保持填充不变

并为您的视图设置边距，即您正在绘制的那条线作为水平线

```
android:marginLeft="-10dp"
android:marginRight="-10dp" 
```

//对于最上面的

```
android:marginTop="-10dp" 
```

# c# - 使用 sql trigger 或 LINQ to Entity 创建 xml 文件

> ID：12401873
> 
> 赞同：0
> 
> 时间：2012-09-13T08:00:27.863
> 
> 标签：c#, asp.net, xml, sql-server-2008, linq-to-entities

我想在用户插入更新或删除任何记录时跟踪数据库。我可以通过创建 sql 触发器来跟踪数据库。我实际上想将这些记录更改存储在 xml 文件中，然后 sql 触发器会将 xml 文件保存到数据库

有可能做到吗？或者使用其他方式？例如：LINQ to Entity

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T08:39:16.517

也许你应该先搜索这个。您可以使用`FOR XML`或`xp_cmdshell`。这个[链接](https://stackoverflow.com/questions/1803911/generating-xml-file-from-sql-server-2008)就像你想做的那样。

谢谢。

# c# - C# 中的细粒度内存分析

> ID：12401876
> 
> 赞同：2
> 
> 时间：2012-09-13T08:00:37.113
> 
> 标签：c#, memory, memory-management, profiling, automated-tests

我正在为我将在明年开发的应用程序构建一个小型模拟/分析工具。概要分析工具将在我的构建服务器中使用，以便随着开发的进行它可以生成我的应用程序性能的一些指标。

我以前有使用内存分析器的经验，但据我所知，现有产品不适合我的需求，其中：

*   我可以分析各个方法和数据结构的内存分配
*   我可以在构建过程中调用探查器，即：
*   *   通过命令行或在 .NET 中直接编程。

我怎样才能做到这一点？理想情况下，我会有类似 Process 类的东西，尽管更细粒度。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T12:11:14.863

在玩弄了 Redgate 的 Profiler API 并查看了 CLR Profiler 源代码之后，我得出的结论是，也许最简单的解决方案就是简单地进行一些 UI 自动化。

使用 AutoHotKey，我可以在我的应用程序上启动 CLRProfiler，找到正确的分配并将我需要的统计信息转储到文本文件中。

# spring-mvc - Spring MVC 3 - 日期输入自动更正

> ID：12401883
> 
> 赞同：1
> 
> 时间：2012-09-13T08:00:44.600
> 
> 标签：spring-mvc

搜索了一段时间后，我正在寻求帮助。

在 Spring MVC 3 项目中，我对日期“自动更正”有点麻烦：让我们解释一下：-我有一个带有蒙面输入 (dd/MM/yyyy) 的视图来填充我模型中的 Date 属性. - 我的文件绑定了一个 simpleDateFormatter（在 @InitBinder 中定义）

一切正常，直到我输入错误的日期（即 2012 年 8 月 32 日）。如果我的视图提交的数据如此错误，Spring 会将其更正为 01/09/2012，因此我的字段不会拒绝让我感到困惑的值。

我不能提供我的代码，因为我不允许。

如果我不是很清楚，请说出来，我会尽量更准确。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T06:05:34.620

好的对不起这个无用的话题：在描述日期格式化程序并绑定到字段的 InitBinder 中。如果我对每个 SimpleDateFormatter 设置了 setLenenient(true)，我的问题就解决了

# c# - 如何在 C# Web 应用程序的网格中更改选定行的颜色？

> ID：12401887
> 
> 赞同：2
> 
> 时间：2012-09-13T08:00:57.540
> 
> 标签：c#, asp.net, background-color

![在此处输入图像描述](../Images/dea51c017c56130a6c8b6979c9bc5264.png)我想更改网格中选定的特定行的颜色。我的网络应用程序怎么可能？请给我建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T08:25:33.770

您必须在代码隐藏的每一行中添加一些 javascript。处理 onmouseover 事件并更改背景颜色： [根据条件更改 GridView 行颜色](https://stackoverflow.com/questions/5048762/change-gridview-row-color-based-on-condition-in-c-sharp)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T08:27:56.367

将 onclick javascript 函数附加到每个复选框，如果选中该复选框，则为该行分配一些 css 类，这将突出显示整行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-13T08:31:44.353

在您的 GridView 中，添加 SelectedRowStyle 属性并使用 BackColor 属性设置所选行的颜色。

因此，您的 GridView 将如下所示：

```
<asp:GridView ID="GridTest" runat="server" DataSourceID=... >
   <Columns>
   ...
   </Columns>
   <SelectedRowStyle BackColor="#E2DED6"/>
</asp:GridView> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-13T08:32:54.010

如果这是`GridView`我们在这里讨论的控件，那么您可以使用`<SelectedRowStyle>`

```
<asp:GridView id="GridView1" runat="Server">

    <Columns></Columns>

    <SelectedRowStyle CssClass="selectedRowStyle" BackColor="LightCyan"
        ForeColor="DarkBlue"
        Font-Bold="true" />

</asp:GridView> 
```

相应地进行样式设置。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-13T08:53:09.837

试试这个

```
 <style type="text/css">
    .row-highlight
    {
        background-color: Yellow;
    }
    .row-select
    {
        background-color: red;
    }
</style>

<asp:GridView ID="GridView1" runat="server">

</asp:GridView>
<script type="text/javascript">
    $(function () {
        var tr = $('#<%= GridView1.ClientID %>').find('tr');

        tr.hover(
             function () {  // mouseover
                 $(this).addClass('row-highlight');
             },
             function () {  // mouseout
                 $(this).removeClass('row-highlight');
             }
        );
        tr.click(function() {
            $(this).addClass('row-select');
        });
    });

</script> 
```

# .htaccess - .htaccess 在子域上不起作用

> ID：12401895
> 
> 赞同：0
> 
> 时间：2012-09-13T08:01:21.997
> 
> 标签：.htaccess, mod-rewrite, subdomain

我写了一个小 .htaccess 文档，将 url 从 127.0.0.1/index.php?page=dashboard 重写为 127.0.0.1/dashboard。这在我的本地主机上运行良好，但是当我将它放在域名的子域上时，它停止工作。这是我的.htaccess：

```
RewriteEngine On
RewriteBase /

RewriteRule ^$ login.php [NC]
RewriteRule ^login/?$ login.php [NC]
RewriteRule ^logout/?$ logout.php [NC] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T13:23:09.123

好的，我解决了这个问题。主机似乎在 Linu 上运行，因此区分大小写。我的 Apache 服务器不是，所以这就是问题所在。感谢所有艰难的帮助！

# c# - C# 将 .xlsx 转换为 .xls

> ID：12401899
> 
> 赞同：2
> 
> 时间：2012-09-13T08:02:01.670
> 
> 标签：c#, .net, excel

我使用 ClosedXML.dll 创建 Excel 文件，但是 ClosedXML 将 excel 文件保存为 .xlsx，而我客户的 PC 仅运行 Office 2003，因此他们无法打开 .xlsx 文件，我该如何将 .xlsx 转换为 .xls？

任何建议将不胜感激。谢谢大家。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-13T08:03:31.700

如果可能，请让您的客户安装[Microsoft Office 兼容包](http://www.microsoft.com/en-us/download/details.aspx?id=3)，这将使他们能够在 Office 2003 中打开 Office 2007 格式的文档。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-13T08:04:58.173

[从http://www.microsoft.com/downloads](http://www.microsoft.com/downloads)下载 MS Office 兼容包。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-13T08:08:02.933

您可以使用[Excel c#](http://www.gemboxsoftware.com/spreadsheet/overview)将[XLSX 转换为 XLS](http://www.gemboxsoftware.com/support/articles/convert-xls-xlsx-ods-csv-html-net)

使用这样的代码：

```
// Create new XLSX file.
var xlsxFile = new ExcelFile();

// Load data from XLSX file.
xlsxFile.LoadXlsx(fileName + ".xls", XlsxOptions.PreserveMakeCopy);

// Save XLSX file to XLS file.
xlsxFile.SaveXls(fileName + ".xls"); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-04-22T20:21:44.643

您可以尝试 NET Office ( [http://netoffice.codeplex.com/](http://netoffice.codeplex.com/) )，它将 xls 转换为 xlsx，因此您可以将 closedXML 与文件一起使用

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-13T08:20:40.357

尝试使用[ExcelDataReader](http://exceldatareader.codeplex.com/)和[ExcelPlusPlus](http://epplus.codeplex.com/)。它们是开源的并且很好

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-13T09:30:35.437

就在几天前，我发布了一个关于此的问题。

**注意**这是一个`vba`解决方案。

这将遍历一个文件夹，依次打开每个工作簿并将它们保存为 .xls 格式。只需将标记为 C:xxx 的路径更改为 .xlsx 文件的位置。它避免了要求最终用户做一些事情来打开你的产品，根据我的经验，如果你有很多用户，你会有些无能或不愿意安装兼容包。

```
Option Explicit
Sub Convert_to972003()
    Dim orgwb As Workbook
    Dim mypath As String, strfilename As String
    Dim nname As String

    '--> Error Handling
    On Error GoTo WhatHappened

    '--> Disable Alerts
    With Application
        .DisplayAlerts = False
        .ScreenUpdating = False
    End With

    '--> Specify location of workbooks
    mypath = "C:\xxx"
    strfilename = Dir(mypath & "\*.xlsx", vbNormal)

    '--> Check the specified folder contains files
    If Len(strfilename) = 0 Then Exit Sub

    '--> Start Loop, end when last file reached
    Do Until strfilename = ""

    '--> Open a workbook
        Set orgwb = Application.Workbooks.Open _
        (mypath & "\" & strfilename)

        '--> Create new Filename, Save in new File Format and Close
        nname = Replace(strfilename, ".xlsx", ".xls")
        orgwb.SaveAs mypath & "\" & nname, FileFormat:=xlExcel8
        orgwb.Close
        strfilename = Dir()
    Loop

    '--> Enable Alerts
    With Application
        .DisplayAlerts = True
        .ScreenUpdating = True
    End With

Exit Sub

WhatHappened: MsgBox Err.Description

End Sub 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-12-01T12:30:50.697

使用 .XlFileFormat.xlExcel7 格式化 excel 95 文件。

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2012-09-13T08:06:51.740

从[ClosedXML.dll 的常见问题解答](http://closedxml.codeplex.com/wikipage?title=Does%20it%20support%20Excel%202003%20and%20prior%20formats%20%28.xls%29?&referringTitle=Documentation)：

> 它是否支持 Excel 2003 和以前的格式 (.xls)？没有。ClosedXML 仅支持 Excel 2007/2010 格式 (.xlsx)。
> 
> 最后由 MDeLeon 于 2011 年 5 月 16 日下午 7:45 编辑，版本 1
> 
> sec_goat 7 月 19 日下午 5:54 我不知道这是否是正确的地方，但这是我用于 xls 文件的解决方法。我在 Interop.Excel 中打开它们并将它们保存为较新的文件类型。这不是最优雅的，但它至少让人们知道他们可以做什么。

```
public void Convert(String filesFolder)
{
  files = Directory.GetFiles(filesFolder);

  var app = new Microsoft.Office.Interop.Excel.Application();
  var wb = app.Workbooks.Open(file);
  wb.SaveAs(Filename: file + "x", FileFormat: Microsoft.Office.Interop.Excel.XlFileFormat.xlOpenXMLWorkbook);
  wb.Close();
  app.Quit();
} 
```

希望这可以帮助 ;）

# objective-c - Restkit on Xcode 4.5 GM does not work on iOS 6 device - file was built for archive which is not the architecture being linked

> ID：12401903
> 
> 赞同：6
> 
> 时间：2012-09-13T08:02:16.960
> 
> 标签：objective-c, ios, xcode, restkit

I have been using Xcode 4.4.1 and Restkit has been working perfectly on Simulator and Device. Since I upgraded to Xcode 4.5 yesterday, Restkit works fine on the Simulator, but when I try to run on my iOS 6 device, I get compile errors;

```
d: warning: ignoring file /Developer/Xcode/DerivedData/App-Name/Build/Products/Debug-iphoneos/libRestKit.a, file was built for archive which is not the architecture being linked (armv7s): /Developer/Xcode/DerivedData/App-Name/Build/Products/Debug-iphoneos/libRestKit.a
Undefined symbols for architecture armv7s:

  "_OBJC_CLASS_$_RKObjectManager", referenced from:
      objc-class-ref in AppDelegate.o 
```

What does this mean and how do I fix this issue? Help is appreciated.

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-13T13:52:22.993

I have pushed a branch to the RestKit Github repository that should address the build issues with the iOS 6 SDK. I was not able to duplicate the build errors in my project (I am diverged from the master branch significantly), but believe the fix is accurate.

Could someone experiencing the issue please switch to the `bugfix/930-arm7s-compatibility` branch and advise if the fix is good on Github? There is a Github issue tracking this at: [https://github.com/RestKit/RestKit/issues/930](https://github.com/RestKit/RestKit/issues/930)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-13T08:06:14.037

You might need to **recompile** the RestKit Framework using **iOS6 SDK** and then add the libRestKit.a framework into your project.

**EDIT:**

Its been fixed. You should make the changes to your project files from [here](https://github.com/RestKit/RestKit/issues/930)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-01-12T14:23:52.107

I had same problem

this thread solved my problem [https://stackoverflow.com/a/12537677/2183952](https://stackoverflow.com/a/12537677/2183952) and most importantly make sure "Build Active Architecture Only" is set to "No" in the build settings of both the "Restkit" project and your own project.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-13T08:08:14.117

Restkit is compiled for armv6/armv7, so it can not work on armv7s, many the third Lib would meet the same question.

# listview - Jquerymobile 列出缩略图格式

> ID：12401906
> 
> 赞同：0
> 
> 时间：2012-09-13T08:02:33.667
> 
> 标签：listview, jquery-mobile

我正在使用 jquerymobile 创建带有缩略图的列表。它看起来像这样：

```
<ul>
   <li>
      <h3>Heading</h3>
      <p>Long thumbnail which I want to be divided into 2 lines and not just simply cut with ... ending</p>
   </li>
</ul> 
```

如果我在浏览器中查看它，一切都很好，但是当我将它加载到移动设备（当然屏幕更小）时，我的缩略图会被剪切。所以它看起来不像这个长缩略图...... 但我想显示整个缩略图并将其分成两行或多行。有没有办法做到这一点？

我里面也有这段代码

*   ：

    ```
    <p class="ui-li-aside"> Date or some text</p> 
    ```

    它在右侧显示日期

    *   . 同样，在网络浏览器上它看起来很棒，但在移动设备上它只是简单地削减了我，所以它看起来像 Headi.... 那么有没有办法将 ui-li-a 放在 li 的底部，这样它就会被组织成这样

    ```
    HEADING 3
    Thumbnail first line (probably divided into two lines)
    Thumbnail Second line (if first line is not enough)
                                                           ul-li-aside(actual date) 
    ```

    现在它看起来像这样（在我的手机上）：

    ```
    HEADI....       ul-li-aside(actual date)
    Thumbnail firs.... 
    ```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T09:02:39.923

您可以尝试`style="white-space: normal;"`在标签中包含要显示整个文本的位置。

所以你会有：

```
<ul>
    <li>
        <h3 style="white-space: normal;">Heading</h3>
        <p style="white-space: normal;">Long thumbnail which I want to be divided into 2 lines and not just simply cut with ... ending</p>
    </li>
</ul> 
```

**PS：**要包含`white-space: normal`，请使用`style`标签中的属性，而不是`class`，因为它可能不起作用，因为`class`jQuery Mobile 经常覆盖。

希望这可以帮助。让我知道这是否适合您。

# python - 如何从 Jenkins 工作推送到 Git 分支？

> ID：12401907
> 
> 赞同：1
> 
> 时间：2012-09-13T08:02:42.713
> 
> 标签：python, git, jenkins, branch, push

我有 Jenkins 工作，它在其配置中调用 Python 脚本。脚本创建几个文件并执行`git add path/to/new/files`，`git commit -m "foobar"`然后`git push -u origin my_branch`. 如果我在本地调用该脚本，则会添加所需的文件并将其推送到该分支。当 Jenkins 作业调用该脚本时，`git push`返回错误。

```
error: src refspec my_branch does not match any.
error: failed to push some refs to 'git@example.com:my_project.git' 
```

知道为什么吗？之后我需要能够`git pull`创建文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T08:23:05.037

告诉 Git 特定的 URL 会有所帮助。

`git push -u git@example.com:my_project.git HEAD:my_branch`

# asp.net - Visual Studio 2012 Ultimate 和 mvc 3 中的 jquery

> ID：12401908
> 
> 赞同：1
> 
> 时间：2012-09-13T06:24:43.210
> 
> 标签：asp.net

我需要问一些事情，但我被困住了：这是我的控制器代码：

```
 public ActionResult FastRegister(FormCollection collection)
    {
        UserModel db = new UserModel(0);
        string str = "";
        //Boolean 
        //Common.IsAlphaNumeric_Dot_Underscore()? er
        errorInsert err = new errorInsert();
        try
        {
            db.set_value(0, Common.HtmlFormUrlEncode(collection["user_name"]), Common.HtmlFormUrlEncode(collection["user_pass"]), "", "", Common.HtmlFormUrlEncode(collection["user_email"]), "", DateTime.Now, "", Common.RandomString(false), 0);
            db.Insert();
            err.duplicate = false;
            err.error = "success register";
            return Json(err, JsonRequestBehavior.AllowGet);

        }
        catch (Exception exception)
        {

            if (exception.Message.Contains("unique") == true && exception.Message.Contains("duplicate") == true)
            {
                err.duplicate = true;
                err.error = "username or email already taken";
            }
            else
            {
                err.duplicate = false;
                err.error = exception.Message;
            }
            return Json(err, JsonRequestBehavior.AllowGet);
        }
    }
}
class errorInsert
{
    public Boolean duplicate;
    public string error;
    public errorInsert()
    {

    }

} 
```

这是我的jQuery代码：

```
 <script type="text/javascript">
    $(document).ready(function(){
        function ajax_send_url(user_name, user_pass, user_email)
        {
            $.ajax({
                type: 'POST',
                url: 'http://localhost/smile/User/FastRegister',
                data: 'user_name='+user_name+'&user_pass='+user_pass+'&user_email='+user_email,
                //contentType: 'application/json; charset=utf-8',
                success: function(e)
                {
                    //var x=jQuery.parseJSON(e);
                    $("#loading").html(e.error);
                }
                , dataType:"json"
                , beforeSend:function (e){$("#loading").html('<img src="loading.gif" width="50px">');}

            });
        }
        $("#register").click
        (
            function()
            {
                var user_name = $("#user_name").val();
                var user_pass = $("#user_pass").val();
                var user_email = $("#user_email").val();
                ajax_send_url(user_name,user_pass,user_email );
            }
        );
    }); 
```

我有我的萤火虫 200 OK Http 但当我检查时没有响应。请有人弄清楚并帮助我。谢谢...

# android - 当前编写 Google Tasks 或 Drive 应用程序的步骤是什么？

> ID：12401910
> 
> 赞同：2
> 
> 时间：2012-09-13T08:02:50.297
> 
> 标签：android, oauth-2.0, google-drive-api

在浏览了很多页面（大部分是矛盾的）之后，我无法编写一个简单的 Android 应用程序，它可以通过 OAuth2 连接到 Google：

我从这个页面开始：

[https://developers.google.com/google-apps/tasks/oauth-and-tasks-on-android#account](https://developers.google.com/google-apps/tasks/oauth-and-tasks-on-android#account)

我确实下载了当前的库，并且不得不体验许多已弃用或缺失的功能：

*   GoogleAccountManager 已弃用
*   在当前库中找不到 HttpTransport、AndroidHttp、AccessProtectedResource、GoogleAccessProtectedResource、JacksonFactory
*   通过开发者控制台生成 CLIENT_ID 有效
*   秘密的生成不适用于移动应用，但需要

最新的描述是什么？最新的演示是什么？

以防万一 - 这是我到目前为止所做的。processTokenReceived 中的所有方法都不是库的一部分：

```
public class ActivityMain extends Activity implements DialogInterface.OnClickListener {

    private static final String AUTH_TOKEN_TYPE = "oauth2:https://www.googleapis.com/auth/drive";
    private static final String CLIENT_ID = "xxxxxxxxxxxx.apps.googleusercontent.com";

    private AccountManager accountManager;
    private Account[] accounts;
    private String authName;
    private String authToken;

    @Override
    public void onClick(final DialogInterface dialogInterface, final int item) {

        processAccountSelected(accounts[item]);
    }

    @Override
    public void onCreate(final Bundle bundle) {
        super.onCreate(bundle);

        setContentView(R.layout.activitymain);

        accountManager = AccountManager.get(this);
        accounts = accountManager.getAccountsByType("com.google");

        if (accounts == null || accounts.length == 0) {
            // TODO
        } else if (accounts.length == 1) {
            processAccountSelected(accounts[0]);
        } else if (accounts.length > 1) {
            showDialog(MyConstants.DIALOG_ACCOUNTCHOSER);
        }
    }

    @Override
    protected Dialog onCreateDialog(final int id) {
        switch (id) {
            case MyConstants.DIALOG_ACCOUNTCHOSER:
                AlertDialog.Builder alertDialogBuilder = new AlertDialog.Builder(this);

                String[] names = new String[accounts.length];

                for (int i = 0; i < accounts.length; i++) {
                    names[i] = accounts[i].name;
                }

                alertDialogBuilder.setItems(names, this);
                alertDialogBuilder.setTitle("Select a Google account");
                return alertDialogBuilder.create();
        }

        return null;
    }

    private void processAccountSelected(final Account account) {
        if (account != null) {
            authName = account.name.toString();
            if (!Tools.isEmpty(authName)) {
                Toast.makeText(this, authName, Toast.LENGTH_LONG).show();

                accountManager.getAuthToken(account, AUTH_TOKEN_TYPE, null, this,
                        new AccountManagerCallback<Bundle>() {

                            public void run(final AccountManagerFuture<Bundle> future) {
                                try {
                                    authToken = future.getResult().getString(
                                            AccountManager.KEY_AUTHTOKEN);
                                    processTokenReceived();
                                } catch (OperationCanceledException exception) {
                                    // TODO
                                } catch (Exception exception) {
                                    Log.d(this.getClass().getName(), exception.getMessage());
                                }
                            }
                        }, null);
            }
        }
    }

    private void processTokenReceived() {
        if (!Tools.isEmpty(authToken)) {
            HttpTransport transport = AndroidHttp.newCompatibleTransport();
            AccessProtectedResource accessProtectedResource = new GoogleAccessProtectedResource(
                    accessToken);
            Tasks service = new Tasks(transport, accessProtectedResource, new JacksonFactory());
            service.accessKey = CLIENT_ID;
            service.setApplicationName("Google-DriveSample/1.0");
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T09:00:37.137

[与google-api-services 库](https://code.google.com/p/google-api-java-client/wiki/APIs)`AccountManager`结合使用的最新示例是[更新后的 Tasks API 示例](http://code.google.com/p/google-api-java-client/source/browse/tasks-android-sample/src/main/java/com/google/api/services/samples/tasks/android/TasksSample.java?repo=samples)。例如刚刚移动到[另一个包](http://javadoc.google-api-java-client.googlecode.com/hg/1.11.0-beta/index.html?com/google/api/client/googleapis/extensions/android2/auth/GoogleAccountManager.html)。[`GoogleAccountManager`](http://javadoc.google-api-java-client.googlecode.com/hg/1.11.0-beta/index.html?com/google/api/client/googleapis/extensions/android/accounts/GoogleAccountManager.html)

如果您没有使用像 Maven 这样的构建管理器来为您解决缺失的依赖项，那么您当然必须手动包含[google-api-java-client 库](https://code.google.com/p/google-api-java-client/downloads/list)`HttpTransport`，这些库提供.

使用`AccountManager`API 控制台中提供的简单 API 访问密钥就足够了。[仅当Google Play 服务](https://developers.google.com/android/google-play-services/)可用时，带有证书指纹的部分才相关。

# algorithm - 如何从每个排序列表中选择一个数字，以使最小值和最大值之间的差异尽可能小？

> ID：12401915
> 
> 赞同：-2
> 
> 时间：2012-09-13T08:03:14.130
> 
> 标签：algorithm

考虑有数字按递增顺序排列的 k 列表。从每个列表中选择一个数字，以使输出列表中的最大数字和最小数字之间的差最小：

```
list 1-1,3,5,9,10
list 2-2,4,6,8
list 3-7,11,12,13 
```

输出应该是 5,6,7。

5 从 list-l 中选择，6 从 list-2 中选择，7 从 list-3 中选择

由于该列表中最高和最低数字之间的差异是 2，即 7-5，因此考虑存在 k 列表。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T08:14:01.493

我可以解决这个问题`O(N*LogK)`，这`N`是 k 个列表中的数字总数。

1、为每个列表维护一个指针，从0开始。

2、以当前指针为你选择的数字，更新答案。

3、选择编号最小的那一项，加一（只要没有到达该列表的末尾），如果可能，返回第2步，否则终止。

在第 2 步和第 3 步中，使用堆来维持最小数量和最大数量，从而减少从`O(K)`到的时间`O(LogK)`。

# .net - 使用 AssemblyInstaller 安装后找不到服务

> ID：12401918
> 
> 赞同：1
> 
> 时间：2012-09-13T08:03:21.900
> 
> 标签：.net, service, installation, servicecontroller

**语境**

Windows 2008 64 位。
我安装了一个充当安装程序的 .NET 服务。

**背景**

我正在使用此代码（来源：Marc Gravell）来安装服务：

```
using (var inst = new AssemblyInstaller(typeof(MyNamespace.Program).Assembly, new string[] { })) {
    IDictionary state = new Hashtable();
    inst.UseNewContext = true;
    try {
    if (uninstall) {
        inst.Uninstall(state);
    } else {
        inst.Install(state);
        inst.Commit(state);
    }
    } catch {
    try {
        inst.Rollback(state);
    } catch { }
    throw;
    }
} 
```

**问题**

一切正常，没有例外，但在那之后，我尝试运行以下代码来启动刚刚安装的服务：

```
using (var sc = new ServiceController("the service's name"))
{
    sc.Start();
    sc.WaitForStatus(ServiceControllerStatus.Running, TimeSpan.FromSeconds(20));
} 
```

我得到一个例外：

```
System.InvalidOperationException：在计算机“。”上找不到服务 [服务名称在此处]。---> System.ComponentModel.Win32Exception: 指定的服务不作为已安装的服务存在
   --- 内部异常堆栈跟踪结束 ---
   在 System.ServiceProcess.ServiceController.GenerateNames()
   在 System.ServiceProcess.ServiceController.get_ServiceName()
   在 System.ServiceProcess.ServiceController.Start（字符串 [] 参数）
   在 System.ServiceProcess.ServiceController.Start()
   在...（我的代码详细信息）

```

我不明白为什么，因为：

1.  `ServiceInstaller`服务的名称与（在`ServiceName`属性中）中的名称完全相同
2.  代码在不同的服务中执行，该服务在 *本地系统*帐户下运行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-10-02T06:43:02.600

可能是服务卡在等待状态，还没有完成注册，所以无法识别为已安装服务。
当您设置`UseNewContext`属性时 - 安装日志文件（“{Assembly name}.InstallLog”）是否包含任何有意义的信息？
另外，要检查这是否是权限问题，您是否可以尝试使用验证服务存在

```
sc query <ServiceName> 
```

从管理命令窗口？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-07-15T19:50:11.263

有一个安装日志可能会有所帮助。`YouServiceName.InstallLog`在服务的文件夹中查找文件。

为服务添加安装程序就足够了（对我来说）。你应该：

*   在设计器中打开 Service.cs 文件，
*   右键单击它，然后
*   选择菜单选项“添加安装程序”。

它不会立即安装...您需要先创建安装程序类。

作为参考，另请参阅[此问题](https://stackoverflow.com/questions/7922105/install-windows-service-created-in-visual-studio)。

# uml - 显示应用程序和文件之间关系的 UML 方式

> ID：12401921
> 
> 赞同：1
> 
> 时间：2012-09-13T08:03:36.007
> 
> 标签：uml, structure, diagram

我有一堆用于生成特定数据文件的应用程序。这些应用程序经常使用来自另一个应用程序的输出作为它们的输入。总的来说，它非常复杂，我想创建某种概述，显示应用程序如何相互交互以及哪些文件用作输入/输出。

作为一个例子，这里是一个虚构的非 UML 图，它显示了我正在搜索的演示文稿类型：

![虚构图表](../Images/df5afb947106d91f7785e01ffcfc9980.png)

我想知道是否有 UML 图类型来实现这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T08:24:31.540

不，没有公认的标准 UML 模型来表示此类数据。然而，虽然 UML 有一套严格的规则，但这并不意味着你不应该改变它们！唯一的例外是如果您使用 UML 来生成代码，这里不是这种情况。

我建议查看[UML 结构图](http://en.wikipedia.org/wiki/Unified_Modeling_Language#Structure_diagrams)以查看您是否需要任何套件。但是，话虽如此，您提供的图表非常清晰且整洁，所以我倾向于使用它！

（不要仅仅因为你认为它让你看起来很聪明就使用 UML！）

# jquery - 使用没有Phonegap的HTML5打开iOS相机

> ID：12401922
> 
> 赞同：1
> 
> 时间：2012-09-13T08:03:42.010
> 
> 标签：jquery, html

我正在使用 html5 代码并尝试使用`<input type="file">`. 它在 Android 上运行良好，但在 iOS 上却不行。

如何使用 HTML5（没有 Phonegap）从 iOS 平台访问相机？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-27T15:05:20.507

你可以试试这个：

```
<input type="file" capture="camera" accept="image/*" id="cameraInput"> 
```

但它**必须是 iOS 6+**才能工作。

可以在这里找到一个例子：

[在没有 PhoneGap 的情况下捕获相机/图片数据](http://www.raymondcamden.com/index.cfm/2013/5/20/Capturing-camerapicture-data-without-PhoneGap)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T08:10:35.297

抱歉，iOS 目前不支持此功能。一些网络应用程序使用的替代方案是通过电子邮件发送附加文件（Basecamp 这样做），还有一个应用程序可以让他们使用名为[Picup](http://picupapp.com/)的应用程序，您可以建议用户使用您的应用程序来使用文件上传字段。

# gwt - GWT Datagrid：将小部件插入列

> ID：12401923
> 
> 赞同：0
> 
> 时间：2012-09-13T08:03:49.703
> 
> 标签：gwt, datagrid, gwt-celltable

我正在尝试在 datagrid 列中插入一个文本框。我知道我可以选择 TextCell 或 EditTextCell，但出于某种原因，我选择了 TextBox。

我采用以下方法

```
Cell<String> cell = new AbstractCell<String>()
    {

        @Override
        public void render( com.google.gwt.cell.client.Cell.Context context, String value, SafeHtmlBuilder sb )
        {
            FlowPanel fp = new FlowPanel();
            TextBox tb = new TextBox();
            tb.setText( value );
            fp.add( tb );
            sb.appendEscaped( fp.getElement().getString() );
        }
    };
    // Address.
    Column<ContactInfo, String> addressColumn = new Column<ContactInfo, String>( cell )
    {
        @Override
        public String getValue( ContactInfo object )
        {
            return object.getAddress();
        }
    }; 
```

我在这里遇到的问题是我在 UI 而不是文本框中得到以下内容

```
<div><input class="gwt-TextBox" type="text"></div> 
```

但是当我更换

```
sb.appendEscaped( fp.getElement().getString() ); 
```

和

```
sb.appendHtmlConstant( fp.getElement().getInnerHTML() ); 
```

我正在获取文本框，但该值未填充。

谁能解释这种行为。如何填充该值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T13:43:04.697

不要创建 FlowPanel 和 TextBox 小部件。反而：

```
sb.appendHtmlConstant("<input class=\"gwt-TextBox\" type=\"text\" value=\"" + myValue + "\"></input>"); 
```

其中 myValue 是您希望在文本框中看到的内容。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-10-24T22:54:06.383

你为什么不使用 TextInputCell [http://www.gwtproject.org/javadoc/latest/com/google/gwt/cell/client/TextInputCell.html](http://www.gwtproject.org/javadoc/latest/com/google/gwt/cell/client/TextInputCell.html)？

# objective-c - 将 MoMu + stk 添加到我的 cocos2d 项目会导致解析问题

> ID：12401928
> 
> 赞同：0
> 
> 时间：2012-09-13T08:04:18.237
> 
> 标签：objective-c, cocos2d-iphone, objective-c++

我正在尝试遵循教程[http://arivibes.com/realtime-audio-on-ios-tutorial-making-a-mandolin/](http://arivibes.com/realtime-audio-on-ios-tutorial-making-a-mandolin/)当我简单地将以下内容添加到我的 .h 中时：

```
#import <AudioToolbox/AudioToolbox.h>
#include "Stk.h"
#include "Mandolin.h" 
```

以下是我的.mm：

```
#import "mo_audio.h" 
```

我得到“Parse Issue Expected unqualified-id”和“Parse Issue Expected ')'”。错误来自 Stk.h 中的以下行：

```
const StkFloat TWO_PI = 2 * PI; 
```

...

我还应该提到，我添加这些导入/包含的 .h 和 .mm 文件不是本教程显示的 AppDelegate 或 ViewController，而是我游戏的主要 CCLayer 类。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T19:22:53.077

Aha.. The problem was that I was including both the MoMu API and Stk.. MoMu's mo_def.h also defined TWO_PI, so I modified Stk.h to:

```
#ifndef TWO_PI
const StkFloat TWO_PI = 2 * PI;
#endif 
```

And that solved the problem.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T08:36:36.343

我怀疑您的 Stk 发行版存在问题，因为在 Stk.h 中我可以阅读：

```
const StkFloat PI           = 3.14159265358979;
const StkFloat TWO_PI       = 2 * PI; 
```

一切都应该没问题。你可以检查你那里有什么。

作为一种解决方法，请尝试将其更改`PI`为：

```
M_PI 
```

或添加：

```
#define PI M_PI 
```

in some of your header files. But this would not explain what is happening.

# java - 在 java 中使用 LDAPS 从 Active Directory 中获取用户

> ID：12401930
> 
> 赞同：0
> 
> 时间：2012-09-13T08:04:21.883
> 
> 标签：java, ldap

如何在 Java 中使用**LDAPS从 Active Directory 中获取用户。**AD 服务器在我们的客户端。我可以使用 LDAP 协议进行获取，但是对于 LDAPS，我需要客户端提供哪些附加信息？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T06:47:56.923

如果您有 AD 模块，则可以使用带有 -LDAP Filter 子句的 Get-AD 用户。您不需要将查询限制为用户的子句。您只需签入您的 AD 模块即可获取它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-14T08:12:46.937

我们提供了一个[使用 JNDI 连接到 LDAPS](https://ldapwiki.com/wiki/Using%20LDAPS%20With%20JNDI)的示例。

我们还有一些关于[将 LDAP 与 AD 结合使用的](http://ldapwiki.willeke.com/wiki/LDAP%20and%20Active%20Directory)一般信息。-吉姆

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-13T08:29:52.690

该代码与从 LDAP 检索对象非常相似。
您需要记住 LDAPS 的端口通常不是 389
（但这是容易的部分）并处理证书问题，如以下[博客](https://blogs.oracle.com/marginNotes/entry/basic_ssl_ldap_access_with)所述。

# asp.net - 将 TemplateField 的可见性绑定到 BoundField 的内容

> ID：12401935
> 
> 赞同：4
> 
> 时间：2012-09-13T08:04:55.740
> 
> 标签：asp.net, data-binding, gridview, webforms

TemplateField 的“Visible”-Tag 中的（伪代码）表达式是我想要实现的，有什么想法吗？我真的很想以声明方式进行。没有 OnRowCreated 事件处理，Cells[x]，...

```
 <asp:GridView ID="GridViewTest" runat="server" AutoGenerateColumns="false">
                <Columns>
                    <asp:BoundField DataField="MyProperty" HeaderText="My Property" />
                    <asp:TemplateField Visible="<%# MyProperty == 'VisibleString' %>">
                        <ItemTemplate>
                            <asp:ImageButton ID="ImageButton1" runat="server" AlternateText="" ImageUrl="" OnClick="ImageButton1_Click" />
                        </ItemTemplate>
                    </asp:TemplateField>
                </Columns>
            </asp:GridView> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-13T08:35:27.703

无法对 TemplateField 列本身执行此操作，因为它不支持 DataBinding。我必须在 ImageButton 内完成。现在它完美地工作：

```
<asp:ImageButton Visible='<%# Eval("MyProperty") == "VisibleString" %>' [...] /> 
```

# java - 扫描仪的 Java java.util.regex.MatchResult 计数器问题

> ID：12401936
> 
> 赞同：1
> 
> 时间：2012-09-13T08:04:56.830
> 
> 标签：java, java.util.scanner

我正在使用 java.util.Scanner 从一个大字符串中扫描所有出现的给定正则表达式。

```
Scanner sc = new Scanner(body);
sc.useDelimiter("");
String match = "";
while(match!=null)
{
    match = sc.findWithinHorizon(pattern, 0);
    if(match==null)break;
    MatchResult mr = sc.match();
    System.out.println("Match string: "+mr.group());
    System.out.println("Match string using indexes: "+body.substring(mr.start(),mr.end());
} 
```

奇怪的是，经过一定次数的扫描，group() 方法返回正确的出现，而 start() 和 end() 方法返回错误的索引，就像扫描从文件开头重新开始一样。正则表达式是多行的（我使用此正则表达式来发现行更改“\r\n|[\n\r\u2028\u2029\u0085]”）。

你有什么提示吗？它是否与“horizo​​n”参数有关（我已经尝试过该值的不同组合）？

有关更多详细信息，它似乎与文件的尺寸有关（超过 1000 个字符），大约 1000 后计数器从 0 重新启动（例如，1003:1020 之后的第一个错误索引出现变为 3:120）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-13T08:09:29.007

`Scanner`使用带有`1024`字符的内部缓冲区。改用`Pattern`：

```
Matcher matcher = Pattern.compile(...).matcher(body);
while(matcher.find()) {
    int start = matcher.start();
} 
```

# wpf - 如何检索存储在 wpf 列表中的数组的名称

> ID：12401940
> 
> 赞同：0
> 
> 时间：2012-09-13T08:04:57.610
> 
> 标签：wpf

在我的一份申请中，我宣布了一份清单

```
public List<double[]> pane1 = new List<double[]>(); 
```

// 下面的代码是在这个列表中添加一些双精度数组

```
pane1.Add(imp);

pane1.Add(normal);

pane1.Add(useless); 
```

// 下面的代码是从这个列表中检索值

```
 foreach (double[] pan in pane1)
            {
                int diffx = ds.data.Length - pan.Length;
                int pointx = ptx - diffx;

                if (pointx < 0)
                    pointx = 0;

                double tip = pan[pointx];
                tt = tt.Append("\n");
                //tt = tt.Append(pan.ToString());
                tt = tt.Append("\t");
                tt = tt.Append(Math.Round(tip, 2));

            } 
```

***问题：我可以成功检索这些数组的数据，但我也想检索数组的名称，可以吗？***

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T08:12:06.123

你所要求的是不可能的。您似乎正在寻找的“名称”不是“数组的名称”；它只是恰好指向数组的变量的名称。

一次可能有多个变量指向同一个数组。举个例子，你会期望你在代码中注释掉的那一行写出来`pan`吗？毕竟，那是指向当前数组*的*变量名。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T08:35:25.143

编译程序时，源代码中的变量名称会丢失，因此您永远不能这样做。您可以做的是使用 a[`Dictionary`](http://msdn.microsoft.com/en-us/library/xfhwa508.aspx)而不是 a `List`：

```
public Dictionary<string, double[]> pane1 = new Dictionary<string, double[]>();

pane1["imp"] = imp;
pane1["normal"] = normal;
pane1["useless"] = useless; 
```

然后，您可以在`pane1.Values`不关注键（名称）的情况下迭代获取数组，或者迭代`pane1`获取名称/数组对，或者按名称提取数组

```
var imp = pane1["imp"]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-13T08:39:26.107

你指的是这样的事情吗？

```
using System;
using System.Collections.Generic;
using System.Linq.Expressions;
using System.Reflection;

namespace ConsoleApplication1
{
    class Program
    {
        static void Main(string[] args)
        {
            List<double[]> pane1 = new List<double[]>();
            Check(() => pane1);
        }

        static void Check<T>(Expression<Func<T>> expr)
        {
            var body = ((MemberExpression)expr.Body);
            Console.WriteLine("Name is: {0}", body.Member.Name);
        }
    }
} 
```

这将产生以下输出：

> 变量名是：pane1

# ubuntu - 无法在 Ubuntu 12.04 上安装 NetBeans

> ID：12401941
> 
> 赞同：1
> 
> 时间：2012-09-13T08:05:04.443
> 
> 标签：ubuntu, installation, netbeans-7

我是一个新的 Ubuntu 用户，实际上是 Unix/Linux 的新手。我最近在笔记本电脑上安装了 Ubuntu 12.04。我需要在 Ubuntu 上安装 NetBeans 7.2。我已经使用[此](http://www.liberiangeek.net/2012/04/install-oracle-java-jdk-7-in-ubuntu-12-04-precise-pangolin/)链接中的命令安装了 JDK。JDK 安装在**/usr/lib/jvm/jdk1.7.0**中。

现在，当我使用命令**sudo sh ~/Downloads/netbeans-7.2-ml-linux.sh**时，它会搜索 JVM 但找不到它。我收到一条消息说**安装 NetBeans 需要 JDK 6** .......

我使用该命令为**JAVA_HOME**设置环境变量，`sudo gedit /etc/environment`并将这一行添加到在**gedit** -中打开的文件中`JAVA_HOME = "/usr/lib/jvm/jdk1.7.0"`。然后我重新启动了笔记本电脑。我仍然无法安装 NetBeans，因为安装程序找不到 JDK。

Using`echo $PATH`会回显**PATH**环境变量的值，但 using会回显`echo $JAVA_HOME`一个空行。

我应该怎么做才能安装 NetBeans？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T16:39:31.140

请遵循以下程序：

[http://connectwww.com/how-to-install-netbeans-ide-on-ubuntu-12-04/2286/](http://connectwww.com/how-to-install-netbeans-ide-on-ubuntu-12-04/2286/)

# c++ - 在 Mac OS X 10.8 上编译和使用 boost 1.51.0

> ID：12401951
> 
> 赞同：2
> 
> 时间：2012-09-13T08:05:44.897
> 
> 标签：c++, macos, boost, c++11, libc++

所以我花了过去 20 个小时试图让 boost 在 OS X 10.8 下工作，我终于让它编译没有错误，但是当我尝试编译一个使用 Boost.test 的测试用例时，我又回来了在一个受伤的世界。我应该提一下，我自己编译 boost 而不是使用可用的二进制文件的原因是因为我想使用 c++11 和 libc++。

当我编译 boost 时，我这样调用 b2：

```
./b2 toolset=clang cxxflags="-std=c++11 -stdlib=libc++" linkflags="-std=c++11 -stdlib=libc++" link=static 
```

它编译所有文件。然后我有这段代码

```
#define BOOST_TEST_DYN_LINK
#define BOOST_TEST_MODULE Addition
#include <boost/test/unit_test.hpp>

int addition(int i, int j)
{
    return i + j;
}

BOOST_AUTO_TEST_CASE(universeInOrder)
{
    BOOST_CHECK(addition(2, 2) == 4);
} 
```

我尝试用它编译

```
clang++ -std=c++11 -stdlib=libc++ -g -Wall -v -I/Users/cb/Downloads/boost_1_51_0 tests/arithmetic.cpp -o tests/arithmetic /Users/cb/Downloads/boost_1_51_0/stage/lib/libboost_unit_test_framework.a` 
```

它惨遭失败，给了我这个错误：

```
"/usr/bin/ld" -demangle -dynamic -arch x86_64 -macosx_version_min 10.8.0 -o tests/arithmetic /var/folders/pg/4wcxn1j12c3188vqrv0x4w9r0000gn/T/arithmetic-UFmO1B.o     /Users/cb/Downloads/boost_1_51_0/stage/lib/libboost_unit_test_framework.a -lc++ -lSystem     /usr/bin/../lib/clang/4.0/lib/darwin/libclang_rt.osx.a
Undefined symbols for architecture x86_64:
  "boost::unit_test::unit_test_main(bool (*)(), int, char**)", referenced from:
      _main in arithmetic-UFmO1B.o
ld: symbol(s) not found for architecture x86_64
clang: error: linker command failed with exit code 1 (use -v to see invocation) 
```

起初，我认为这是因为 boost 不是针对 64 位编译的，所以我尝试告诉 b2 专门这样做，但这没有任何区别，而且我还认为它在 OS X 上默认编译为 64 位。

关于它为什么失败以及我如何让它工作的任何想法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-13T08:18:01.853

它看起来像测试的错误编译。你要求

> ```
> #define BOOST_TEST_DYN_LINK 
> ```

但比你链接的 boost.test 的静态版本

> ```
> /Users/cb/Downloads/boost_1_51_0/stage/lib/libboost_unit_test_framework.a 
> ```

和 IIRC 这个库的静态版本和动态版本之间存在差异。因此，要么链接库的动态版本（带有`.so`扩展名的库），要么删除该定义。

# node.js - 如何从 URL 或 Shell 调用 nodejs 事件

> ID：12401954
> 
> 赞同：0
> 
> 时间：2012-09-13T08:05:56.797
> 
> 标签：node.js, shell, socket.io

我正在使用带有 nodejs 的 socket.io。所以我想从 URL 向所有客户端广播..

例如：

我的 nodejs 服务器：www.domain.com:7979

```
var io = require('socket.io').listen(7979);

io.sockets.on('connection', function (socket) {

  socket.on('addRow', function (data) {
    console.log(data);
io.sockets.emit('newRow', data);
});

}); 
```

这是我的客户代码：

客户端.php

```
$(function(){

    var socket = io.connect('http://www.semtr.com:7979');
    socket.emit('addRow',{taskId:<?php echo $id ?>});
    //socket.disconnect();

});
</script> 
```

当我调用我的 client.php vith 控制台时，我的 javascript 函数没有运行..

我想用这样的url调用nodejs函数。

```
http://www.domain.com:7979/addRow 
```

或者

用 shell 调用这个 javascript 函数

```
socket.emit('addRow',{taskId:<?php echo $id ?>}); 
```

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T09:38:52.940

如果您在服务器上发出，则必须在客户端收听结果，反之亦然：

服务器：

```
io.sockets.on('connection', function (socket) {
  socket.emit('news', { hello: 'world' });
}); 
```

客户：

```
socket.on('news', function (data) {
  console.log(data);
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T15:01:14.413

就像帕特里克说的那样，您应该在客户端有一个听众。还有一件事，你在服务器上得到什么了吗？它收到数据了吗？您没有指定未运行的部分。请记住，如果您的服务器正在侦听与您的 socket.io 模块相同的端口，您可以只使用 io.connect() 进行连接，也可能不匹配，请更具体。

`$(函数(){

```
var socket = io.connect();
socket.emit('addRow',{taskId:<?php echo $id ?>});
//socket.disconnect();

socket.on('newRow', function (data) {
    //do something with server's message
    console.log(data);
}); 
```

});`

# c# - 如何将 VerticalAlignment 设置为范围的底部？

> ID：12401955
> 
> 赞同：4
> 
> 时间：2012-09-13T08:06:04.673
> 
> 标签：c#, excel

```
using Microsoft.Office.Interop.Excel;
Range rng = worksheet.UsedRange; 
```

// 我找到了下面的代码，但我没有找到 ExcelAlignemt 和 excel 的引用我错过了一些需要这个引用的东西

```
rng.VerticalAlignment = ExcelAlignment.xlButtom; //or Excel.XlHAlign.xlHAlignLeft 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-13T08:19:30.450

xlHAlignCenter 位于 Excel 命名空间中：

```
worksheet.get_Range("A1", "A1").Style.HorizontalAlignment = Microsoft.Office.Interop.Excel.XlHAlign.xlHAlignCenter; 
```

现在，使用您的代码：

```
rng.Style.VerticalAlignment = Microsoft.Office.Interop.Excel.XlHAlign.xlHAlignLeft; 
```

# hibernate - 涉及@ManyToOne 关系的休眠查询

> ID：12401957
> 
> 赞同：0
> 
> 时间：2012-09-13T08:06:11.697
> 
> 标签：hibernate

我有一个类声明为

```
@Entity
@Table(name = "word", schema = "public")
public class Word implements java.io.Serializable {
    ...
    private ContentLanguage contentLanguage;
    ...
    @ManyToOne(fetch = FetchType.EAGER)
    @JoinColumn(name = "content_language_id", nullable = false)
    public ContentLanguageT getContentLanguage() {
        return this.contentLanguage;
    }

    public void setContentLanguage(ContentLanguage contentLanguage) {
        this.contentLanguage = contentLanguage;
    }
  ... 
```

ContentLanguage 被声明为

```
 @Entity
    @Table(name = "content_language", schema = "public")
    public class ContentLanguage implements java.io.Serializable {

        private int id;
        private String value;
 .... 
```

我的操作需要查询 ContentLanguage 字段具有 id = 1 的所有单词. 有什么想法，因为我不想去开始使用 SQL 或 HQL 来完成一项相对简单的任务？

```
 public String execute() 
    {       
        //DetachedCriteria criteria1 = DetachedCriteria.forClass(ContentLanguageT.class);
        //criteria1.add(Restrictions.eq("id",1));
        DetachedCriteria criteria = DetachedCriteria.forClass(WordT.class);
        //criteria.add( criteria1 );
        criteria.add(Restrictions.eq("contentLanguageT", Integer.valueOf( contentLangID )));        
        allWords = wordDao.findByCriteria( criteria, 0, 50);        
        return SUCCESS;
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T08:18:10.277

`Word.contentLanguage`是类型`ContentLanguage`。所以你不能将它与整数进行比较。您只能将其与 ContentLanguage 进行比较。所以，要么你做

```
criteria.add(Restrictions.eq("contentLanguage.id", contentLanguageId)); 
```

或者你做

```
criteria.add(Restrictions.eq("contentLanguage", 
                             session.load(ContentLanguage.class, contentLanguageId))); 
```

对于这样简单的静态查询，我真的更喜欢 HQL。以下内容不是更具可读性和直观性吗？

```
select w from Word w 
where w.contentLanguage.id = :contentLanguageId 
```

# c# - 如何在 Win Forms 应用程序中为 PictureBox 设置动画？

> ID：12401960
> 
> 赞同：0
> 
> 时间：2012-09-13T08:06:26.237
> 
> 标签：c#, winforms, animation, picturebox

我有一个带有包含图像的 PictureBox 控件的 Windows 窗体应用程序。我想将 PictureBox 控件缓慢移动到右侧。这是我的代码：

```
 Point currentPoint = pictureBox_Logo.Location; 
        for (int i = 0; i < 25; i++)
        {
            pictureBox_Logo.Location = new Point(pictureBox_Logo.Location.X + 1, pictureBox_Logo.Location.Y);
            Thread.Sleep(30);
        } 
```

这里的问题是，当代码执行而不是看到图片移动时，我看到一个白色的图片移动并且移动停止，直到图片出现。

我错过了什么，我能做些什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T08:23:12.133

代码：

```
public partial class Form1 : Form
{
    void timer_Tick(object sender, EventArgs e)
    {
        int x = pictureBox1.Location.X;
        int y = pictureBox1.Location.Y;

    pictureBox1.Location = new Point(x+25, y);

    if (x > this.Width)
        timer1.Stop();
}

public Form1()
{
    InitializeComponent();

    timer1.Interval = 10;
    timer1.Tick += new EventHandler(timer_Tick);
}

private void button1_Click(object sender, EventArgs e)
{
    pictureBox1.Show();
    timer1.Start();
 } 
```

}

原始线程在这里[Move images in C#](https://stackoverflow.com/questions/4833864/move-images-in-c-sharp)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T08:27:45.283

我的代码写得很好，但我做错的是把代码放在一个事件中：

```
private void Form1_Shown(object sender, EventArgs e); 
```

但是当我将我的代码放在一个按钮中时，它可以正常工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-13T08:21:50.293

尝试在 Thread.Sleep(30) 之后使用 pictureBox_Logo.Refresh(); 或者寻找标准的定时器控件。

# python - 如何在 django 模型中为任务建模状态

> ID：12401962
> 
> 赞同：0
> 
> 时间：2012-09-13T08:06:31.147
> 
> 标签：python, django, model, status

在我的`django`应用程序中，`Task`可以有`PENDING or FINISHED` `status`。在 django 模型中对此进行建模的最佳方法是什么？

```
class Task(models.Model):
    taskname = models.CharFiled(...)
    taskdate = models.DateTimeField()
    status = models.CharFiled(...) 
```

这是正确的方法吗？理想情况下，我想为用户提供一个`dropdown list`他可以从中选择状态的选项。有人可以建议我如何对此进行建模吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T08:30:45.707

它可以是任何类型的字段，例如`Char`或`Int`但您可以为其提供选项列表，该列表将在 html 表单中显示为下拉列表。

参考[模型字段选择](https://docs.djangoproject.com/en/dev/ref/models/fields/#choices)

```
YEAR_IN_SCHOOL_CHOICES = (
    ('FR', 'Freshman'),
    ('SO', 'Sophomore'),
    ('JR', 'Junior'),
    ('SR', 'Senior'),
)
class Student(models.Model):
    year_in_school = models.CharField(max_length=2,
                                  choices=YEAR_IN_SCHOOL_CHOICES, default='FR') 
```

# javascript - 这个运算符 ~= 在 jquery 中是什么意思？

> ID：12401964
> 
> 赞同：6
> 
> 时间：2012-09-13T08:06:49.640
> 
> 标签：javascript, jquery

我在`$("a[rel~='single']")`某处看到了这个。`~=`jquery中的运算符是什么？

有谁知道这方面的文档在哪里？

提前致谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-13T08:09:00.820

> 当属性选择器中的等号前面有波浪号 (~) 时，这意味着如果列出的值是给定属性的任何一个空格分隔值，则选择器将匹配。因此，第一个规则的选择器 *[class~="urgent"] 将匹配以下任何元素：

```
<p class="very urgent really">
<table class="urgent">
<ul class="not urgent">
<pre class="not terribly urgent but still worth knowing"> 
```

来源： http: [//meyerweb.com/eric/articles/webrev/200008b.html](http://meyerweb.com/eric/articles/webrev/200008b.html)

* * *

波浪号选择器的 jQuery 文档可以在这里找到：

[http://api.jquery.com/attribute-contains-word-selector/](http://api.jquery.com/attribute-contains-word-selector/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-13T08:08:38.380

[属性包含单词选择器 [name~="value"]](http://api.jquery.com/attribute-contains-word-selector/)

此选择器将测试字符串与属性值中的每个单词匹配，其中“单词”定义为由空格分隔的字符串。如果测试字符串完全等于任何单词，则选择器匹配。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-13T08:10:57.593

它是一个“属性包含单词”选择器。这意味着 $("a[rel~='single']") 将选择 rel 属性中包含“single”单词的每个标签。

[http://api.jquery.com/attribute-contains-word-selector/](http://api.jquery.com/attribute-contains-word-selector/)

干杯；）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-13T08:08:52.897

选择具有指定属性的元素，其值包含给定单词，由空格分隔。见:: [http://api.jquery.com/attribute-contains-word-selector/](http://api.jquery.com/attribute-contains-word-selector/)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-13T08:16:35.597

属于属性。jQuery 自定义属性选择器。 **属性包含单词选择器**

[http://api.jquery.com/attribute-contains-word-selector/](http://api.jquery.com/attribute-contains-word-selector/)

# android - 触摸android后关闭视图

> ID：12401968
> 
> 赞同：1
> 
> 时间：2012-09-13T08:06:58.907
> 
> 标签：android, ontouchlistener

我有一个 Activty，它在按下信息按钮后显示。现在我想在用户触摸屏幕时关闭/销毁活动，以便用户可以再次回到主活动，而无需按下设备的后退按钮。代码看起来如何。

我试过这个，但它没有效果：

```
if(onTouchEvent(null)){
        finish();
} 
```

谢谢。

* * *

编辑：

这是我的全部代码：

```
public class InfoDialog extends Activity{
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.info_dialog); } 
```

我使用这个类只是为了在 Theme.Dialog 的 android 样式中显示有关应用程序的简短信息但是，我想添加一个功能，以在按下触摸屏时销毁/关闭此活动，这样就没有需要按返回键。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T08:16:21.540

您应该像这样覆盖 onTouch(View v, MotionEvent event) ：

```
onTouch(View v, MotionEvent event){
   switch (event.getAction()) {
      case MotionEvent.ACTION_DOWN:
         finish();
   }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T09:05:05.577

试试这个...

```
LinearLayout mainLayout = (LinearLayout) findViewById(R.id.mainLayoutId);

mainLayout.setOnTouchListener(new OnTouchListener() {

            public boolean onTouch(View v, MotionEvent event) {
                int eid = event.getAction();
                switch (eid) {
                case MotionEvent.ACTION_DOWN:
                    finish();
                    break;
                }
                return true;
            }
        }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-13T08:18:46.217

为显示您的信息的视图提供一个 ID。然后在该视图上设置一个 onTouch 侦听器，如果使用活动则完成活动，或者如果使用可见性则使其不可见。

```
main = (RelativeLayout) findViewById(R.id.main);
main.setOnTouchListener(new View.OnTouchListener() {
            public boolean onTouch(View v, MotionEvent event) {
                        case MotionEvent.ACTION_DOWN:
                finish();
            }
        } 
```

或者

```
info = (RelativeLayout) findViewById(R.id.info);

info = (RelativeLayout) findViewById(R.id.info);
info.setOnTouchListener(new View.OnTouchListener() {
            public boolean onTouch(View v, MotionEvent event) {
                         case MotionEvent.ACTION_DOWN:
                info.setVisibilty(View.GONE);
            }
        } 
```

# algorithm - 在网页中查找“文章”的算法？

> ID：12401973
> 
> 赞同：1
> 
> 时间：2012-09-13T08:07:26.330
> 
> 标签：algorithm, html-content-extraction

一些浏览器插件，例如[可读性](http://readability.com/mobile/download)，可以从网页中提取“文章”。有谁知道如何做到这一点？真正的文章和广告或评论有什么区别？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T19:16:51.693

好吧，这取决于您要如何定义“真实文章”...

考虑到 HTML5，网页是由语义标签构成的。页面不再需要使用`<div>`完全没有语义意义的元素来构建。在 HTML5中，您可以使用`<section>`,`<article>`等`<header>` [。](http://www.w3schools.com/html5/html5_new_elements.asp)这些元素可以让应用程序很好地了解网页的主要内容是什么（例如 print`<article>`和 skip `<nav>`......）

当然，目前还没有多少页面使用这些标签。此外，标签可能会被滥用并失去其意义。在那种情况下，我会坚持一些统计数据，例如选择 HTML 文档中最大的元素。此外，如果您必须抓取网页，您可以使用一些模式匹配算法的修改，例如 DIPRE。

# jsf - 动态 Primefaces：tabView 不更新

> ID：12401975
> 
> 赞同：3
> 
> 时间：2012-09-13T08:07:41.107
> 
> 标签：jsf, primefaces

我正在使用 Primefaces 3.4（也尝试过 3.3）和 Mojarra 2.1.7。但是我在更新 ap:tabView 中的动态选项卡时遇到了问题。

我有 2 个按钮，应该添加一个额外的选项卡。第一个按钮在 p:tabView 之外。单击此按钮时，将调用支持 bean，更新 p:tabView，并显示新选项卡。但是当我单击第二个按钮时，它位于该 tabView 的选项卡内，会调用支持 bean，但 tabView 没有更新。

这种缺乏更新仅发生在动态选项卡中。当我将给定的示例修改为只有一个选项卡并显示一个在单击按钮时发生变化的值时，两个按钮都会更新 tabView，并显示新的值。所以这是一个只发生在动态选项卡中的问题。

这是我的代码。

```
 <f:view contentType="text/html">
        <h:form>
            <p:commandButton value="press me" action="#{idTestBean.addTab}" update=":ApplicationTab"/>
        </h:form>

        <p:tabView id="ApplicationTab" cache="false" dynamic="false"  var="tab" value="#{idTestBean.tabList}">
            <p:tab title="tab" closable="false" >
                <p:panel>
                    <h:form>
                        <p:commandButton value="press me" action="#{idTestBean.addTab}" update=":ApplicationTab"/>
                    </h:form>

                    #{idTestBean.count}
                </p:panel>

            </p:tab>
        </p:tabView>
    </f:view> 
```

不同的选项卡包含需要单独提交的单独表格。因此我有不止一种形式的方法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-13T11:30:46.153

好吧，这必须解决问题：

```
<f:view contentType="text/html">
    <h:form>
        <p:commandButton value="press me" action="#{idTestBean.addTab}" update="@form"/>

    <p:tabView id="ApplicationTab" cache="false" dynamic="false"  var="tab" value="#{idTestBean.tabList}">
        <p:tab title="tab" closable="false" >
            <p:panel>

                    <p:commandButton value="press me" action="#{idTestBean.addTab}" update="@form"/>

                #{idTestBean.count}
            </p:panel>

        </p:tab>
    </p:tabView>
    </h:form>
</f:view> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-11-22T08:03:52.757

今天我也遇到了同样的问题，我有一个动态选项卡视图，在选项卡内部，有一些面板需要在选项卡更改时更新，所以我所做的是，我在事件 TabChange 上添加了 p:ajax，并在更新属性，我添加了表单id和tabviewId，如下所示：

```
:formID:tabViewID 
```

它终于奏效了。只是让你知道。

# grails - Grails 资源：将多个模块捆绑到单个文件中

> ID：12401982
> 
> 赞同：1
> 
> 时间：2012-09-13T08:07:58.640
> 
> 标签：grails, resources, grails-2.0

我有 module ，`A`这取决于`B`and 。当我使用模块Grails Resources 插件生成 2 个 js/css 文件（一个来自 module ，一个来自 module ）。如何获取单个 css/js 文件？我可以对所有模块使用相同的值，但是模块会被破坏`A_and_B``A``B``A_and_B``A``B``defaultBundle``A``B`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T08:44:03.223

类`CommonResources`包含具有公共资源的闭包 + util 方法

```
class CommonResources {
static a = {
    resource url:'js/a.js'
    resource url:'css/a.css'
} as Closure

static b = {
    resource url: 'js/b.js'
    resource url: 'css/b.css'
}

static loadResourcesOn(resources, object) {
    resources.delegate = object
    resources.call(object)
}
} 
```

我们的资源使用以下结构配置

```
modules = {
a {
    CommonResources.loadResourcesOn(CommonResources.a, delegate)
    CommonResources.loadResourcesOn(CommonResources.b, delegate)
}

b {
    CommonResources.loadResourcesOn(CommonResources.b, delegate)
}
} 
```

# excel - Excel VBA - 单元格更改，列中的日期戳

> ID：12401988
> 
> 赞同：0
> 
> 时间：2012-09-13T08:08:19.077
> 
> 标签：excel, vba

我想创建两个日期戳，一个代表 OK，一个代表 NOT OK。这些值填写在 A 列中，分别是`'x' for OK`和`'NOK' for NOT OK`。

当 A 列填写“x”时，第 49 列中的值应该是填写“x”时的日期戳。

当在列中填写“NOK”时，第 52 列中的值应该是填写“NOK”时的日期戳。

此外，如果从 A 列中删除“x”或“NOK”，则日期戳也应该消失。这就是我所拥有的。

```
Private Sub Worksheet_Change(ByVal Target As Range)
    '49 = ok
    '52 = NOK

    Dim KeyCells As Range

    ' The variable KeyCells contains the cells that will
    ' cause an alert when they are changed.
    Set LastRow = Range("A" & Rows.Count).End(xlUp).Row
    Set KeyCells = Range("A1:" & LastRow)

    If Application.Intersect(KeyCells, Range(Target.Address)) Like "*x*" Then
        Cells(Row, 49).Value = Format(DateTime.Now, "yyyy-MM-dd hh:mm:ss")
    End If

    If Application.Intersect(KeyCells, Range(Target.Address)) Like "*NOK*" Then
        Cells(Row, 52).Value = Format(DateTime.Now, "yyyy-MM-dd hh:mm:ss")
    End If

End Sub 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-13T08:34:03.210

在这里，试试这个：

```
Private Sub Worksheet_Change(ByVal Target As Range)
    '49 = ok '52 = NOK
    Application.EnableEvents = False

    With Target
    'check if change happend in column A
    If .Column = 1 Then
      'check if changed value is X
      If .Value Like "*x*" Then
          'add datestamp if it is
          Cells(.Row, 49).Value = Format(DateTime.Now, "yyyy-MM-dd hh:mm:ss")
      Else
          'clear datestamp if not
          Cells(.Row, 49).Value = ""
      End If

      If .Value Like "*NOK*" Then
          Cells(.Row, 52).Value = Format(DateTime.Now, "yyyy-MM-dd hh:mm:ss")
      Else
          Cells(.Row, 52).Value = ""
      End If
    End If
    End With
    Application.EnableEvents = True
End Sub 
```

# c# - 如何在 ac# 程序中使用 C dll

> ID：12401989
> 
> 赞同：0
> 
> 时间：2012-09-13T08:08:20.373
> 
> 标签：c#, c, dll

我有一个 .c 和一个 .h 文件被修改为在 cpp 应用程序中使用，实际上它们有

```
#ifdef __cplusplus
       extern "C"{
#endif 
```

前辈线。我想知道是否以及如何使用 ac# 程序中定义的函数。也许我必须为那段代码创建一个 dll？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T08:13:10.987

这是取自[MSDN](http://msdn.microsoft.com/en-us/library/aa288468%28v=VS.71%29.aspx)的一个简单示例：

```
using System;
using System.Runtime.InteropServices;

class PlatformInvokeTest
{
    [DllImport("msvcrt.dll")]
    public static extern int puts(string c);
    [DllImport("msvcrt.dll")]
    internal static extern int _flushall();

    public static void Main() 
    {
        puts("Test");
        _flushall();
    }
} 
```

这**假设**您愿意将现有代码编译成 .DLL

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T10:33:03.297

你们似乎不明白 - 他没有 dll，他有 c++ 源文件：

你有两个选择

1.  将 c++ 代码转换为 C# 并将其直接合并到您的应用程序中

2.  使用 c++ 编译器从源文件创建 dll 并使用 PInvoke 访问它

至于您是否需要修改 c++ 代码以创建 dll 或使其可从 C# 访问，如果不发布完整代码，我们将无法知道。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-13T08:24:14.833

这是 MSDN 博客上的一个明显示例。您可以使用 IntPtr 加载 DLL 路径。

[http://blogs.msdn.com/b/jonathanswift/archive/2006/10/03/dynamically-calling-an-unmanaged-dll-from-.net-_2800_c_23002900_.aspx](http://blogs.msdn.com/b/jonathanswift/archive/2006/10/03/dynamically-calling-an-unmanaged-dll-from-.net-_2800_c_23002900_.aspx)

# python - 使用正则表达式检查模算术条件

> ID：12401990
> 
> 赞同：0
> 
> 时间：2012-09-13T08:08:24.553
> 
> 标签：python, regex

我正在编写一个脚本来解析文本文件（准确地说是 csv），我想根据每行内容从文件中选择行。有许多字符串条件要检查，所以我推测 regexp 是要走的路，但我还需要根据模算术中的条件检查一行开头的一个数字，到目前为止它是`n%4==k`and `n%2==k`。然而，似乎只有临时解决方案。`n%2==k`很简单，但要检查`n%4==2`我必须设计这样的东西：

```
r'((^\d*[24680]|^)[26]|^\d*[13579][048])[\s;,].*' # more (unrelated) conditions follow 
```

我的问题是：

1.  有没有办法简化上面的正则表达式？它有什么明显的问题吗？
2.  如果我想将脚本推广到其他模条件（例如`n%3==k`或`n%7==k`），是否有一种可行的方法来使用正则表达式，或者我最好从字符串中提取一个数字并编写额外的代码来检查这些条件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T08:43:45.127

这似乎更准确`n%4==2`（参考：[http](http://en.wikipedia.org/wiki/Divisibility_rule) ://en.wikipedia.org/wiki/Divisibility_rule ）

```
r = r'^[26]$|^\d*[02468][26]$|^\d*[13579][048]$'

# test
for i in xrange(1, 1000):
    m = re.match(r, str(i))
    if i % 4 == 2:
        assert m, [i, i % 4]
    else:
        assert not m, i 
```

有关可被 3`n%3==0`整除[的正则表达式过滤器编号](https://stackoverflow.com/questions/10992279/python-regex-filter-numbers-divisible-by-3)。我不知道任何通用的解决方案`mod n`，无论如何这将是一个有趣但纯粹的理论练习。在现实生活中，只需使用整数。

# h2 - H2数据库多连接

> ID：12401991
> 
> 赞同：18
> 
> 时间：2012-09-13T08:08:25.767
> 
> 标签：h2

我有以下问题：两个不同系统上的应用程序的两个实例应该共享一个小型数据库。主要问题是两个系统只能通过网络文件夹交换数据。我没有可能在某处设置数据库服务器。

是否可以在网络文件夹上放置一个 H2 数据库并让两个实例都连接到数据库（也可以同时连接）？

如果我禁用文件锁定，我可以使用嵌入式模式将两个实例连接到数据库，对吗？这些实例可以在数据库上执行 READ 或 INSERT 操作。使用多个并发嵌入式连接是否有数据损坏的风险？

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2014-11-25T14:27:52.320

我有同样的问题，我在文档中找到了解决方案。可以在以下位置找到；[http://h2database.com/html/features.html#auto_mixed_mode](http://h2database.com/html/features.html#auto_mixed_mode)

> 多个进程可以访问同一个数据库，而无需手动启动服务器。为此，请将 ;AUTO_SERVER=TRUE 附加到数据库 URL。无论数据库是否已打开，您都可以使用相同的数据库 URL。此功能不适用于内存数据库。

```
// Application 1:
DriverManager.getConnection("jdbc:h2:/data/test;AUTO_SERVER=TRUE");

// Application 2:
DriverManager.getConnection("jdbc:h2:/data/test;AUTO_SERVER=TRUE"); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-13T08:23:20.583

[来自 H2 文档](http://www.h2database.com/html/features.html#database_file_locking)：

> 也可以不锁定文件打开数据库；在这种情况下，由应用程序来保护数据库文件。否则将导致数据库损坏。

我认为如果您的应用程序始终使用相同的配置（网络文件夹上的共享文件数据库），您需要创建一个管理并发的应用程序层

# iphone - 如何在 iPhone 中设置 Tabbar 集成？

> ID：12401993
> 
> 赞同：0
> 
> 时间：2012-09-13T08:08:32.100
> 
> 标签：iphone, ios, title, tabbar

我正在开发一个 iPhone 应用程序，使用 UITabBar 来开发它。标签栏中只有第二个标签栏标题可见，但第一个标签栏标题不显示在标签栏中，如何解决这个问题？请帮助我，在此先感谢。

以下是供您参考的源代码。

```
NSMutableArray *items = [[NSMutableArray alloc]init];
tab =[[UITabBar alloc]initWithFrame:CGRectMake(0, 300, 320, 44)];

[self.tabBarItem initWithTitle:@"sample1" image:nil tag:111];
[items addObject:self.tabBarItem];

[self.tabBarItem initWithTitle:@"sample2" image:nil tag:101];
[items addObject:self.tabBarItem];

[tab setItems:items animated:YES]; 
[self.view addSubview:tab]; 
```

![在此处输入图像描述](../Images/eb6bff8d92a31ddd37a1dc536cd7c789.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T06:44:46.597

不要导航视图控制器，因为这样包含 TabBar 的控制器将被弹出。

当我们使用 UITabBar 时，我们不会以这种方式使用导航。

只需 addSubView 具有此类框架的新控制器，以便您的 TabBar 始终可见。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T13:44:00.687

实际上，您正在使用相同的 tabBarItem 实例，也就是说，您只获得了第二个按钮。这样做，如果这对您有帮助，请接受答案。

```
UITabBar *tabBar = [[UITabBar alloc]initWithFrame:CGRectMake(0, 725, 768, 49)];
    NSMutableArray *items = [[NSMutableArray alloc]init];
    UITabBarItem *item1 = [[UITabBarItem alloc]initWithTitle:@"first" image:nil tag:1];
    UITabBarItem *item2 = [[UITabBarItem alloc]initWithTitle:@"second" image:nil tag:2];
    UITabBarItem *item3 = [[UITabBarItem alloc]initWithTitle:@"third" image:nil tag:3];
    UITabBarItem *item4 = [[UITabBarItem alloc]initWithTitle:@"fourth" image:nil tag:4];

    [items addObject:item1];
    [items addObject:item2];
    [items addObject:item3];
    [items addObject:item4];

    [tabBar setItems:items];
    [self.view addSubview:tabBar]; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-13T09:36:40.813

您必须在 UITabBar 中添加该 tabbarItem。

```
 NSArray *items = [[NSArray alloc]init];
    [items addObject:self.tabBarItem]; //add all your tabBarItems in an array
    [tab setItems:items animated:YES]; //then set all your tabBarItems in UITabBar like this 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-13T08:30:35.033

这不是您以编程方式创建和添加 TabBar 的方式。您宁愿使用其他方法：[https ://stackoverflow.com/a/3844365/655221](https://stackoverflow.com/a/3844365/655221)

祝你好运。

# javascript - 让 Grunt 为不同的设置生成 index.html

> ID：12401998
> 
> 赞同：209
> 
> 时间：2012-09-13T08:08:55.367
> 
> 标签：javascript, build, build-automation, gruntjs

我正在尝试使用 Grunt 作为我的 webapp 的构建工具。

我想至少有两个设置：

**I. 开发设置**- 从单独的文件加载脚本，不连接，

所以我的 index.html 看起来像：

```
<!DOCTYPE html>
<html>
    <head>
        <script src="js/module1.js" />
        <script src="js/module2.js" />
        <script src="js/module3.js" />
        ...
    </head>
    <body></body>
</html> 
```

**二、生产设置**- 将我的脚本压缩并连接到一个文件中，

相应地使用 index.html：

```
<!DOCTYPE html>
<html>
    <head>
        <script src="js/MyApp-all.min.js" />
    </head>
    <body></body>
</html> 
```

问题是，*我怎样才能让 grunt 使这些 index.html 取决于我运行时的`grunt dev`配置`grunt prod`？*

或者，也许我正在朝错误的方向挖掘，并且总是更容易生成`MyApp-all.min.js`，但将我的所有脚本（连接）或从单独文件异步加载这些脚本的加载器脚本放入其中？

你们是怎么做到的，伙计们？

* * *

## 回答 #1

> 赞同：161
> 
> 时间：2013-02-20T00:40:40.650

我最近发现了这些与 Grunt`v0.4.0`兼容的任务：

*   [咕噜预处理](https://github.com/onehealth/grunt-preprocess/)

    > 围绕预处理 npm 模块的 Grunt 任务。

*   [咕噜声](https://github.com/onehealth/grunt-env/)

    > Grunt 任务为未来的任务自动化环境配置。

以下是我的片段`Gruntfile.js`。

环境设置：

```
env : {

    options : {

        /* Shared Options Hash */
        //globalOption : 'foo'

    },

    dev: {

        NODE_ENV : 'DEVELOPMENT'

    },

    prod : {

        NODE_ENV : 'PRODUCTION'

    }

}, 
```

预处理：

```
preprocess : {

    dev : {

        src : './src/tmpl/index.html',
        dest : './dev/index.html'

    },

    prod : {

        src : './src/tmpl/index.html',
        dest : '../<%= pkg.version %>/<%= now %>/<%= ver %>/index.html',
        options : {

            context : {
                name : '<%= pkg.name %>',
                version : '<%= pkg.version %>',
                now : '<%= now %>',
                ver : '<%= ver %>'
            }

        }

    }

} 
```

任务：

```
grunt.registerTask('default', ['jshint']);

grunt.registerTask('dev', ['jshint', 'env:dev', 'clean:dev', 'preprocess:dev']);

grunt.registerTask('prod', ['jshint', 'env:prod', 'clean:prod', 'uglify:prod', 'cssmin:prod', 'copy:prod', 'preprocess:prod']); 
```

并在`/src/tmpl/index.html`模板文件中（例如）：

```
<!-- @if NODE_ENV == 'DEVELOPMENT' -->

    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.js"></script>
    <script src="../src/js/foo1.js"></script>
    <script src="../src/js/foo2.js"></script>
    <script src="../src/js/jquery.blah.js"></script>
    <script src="../src/js/jquery.billy.js"></script>
    <script src="../src/js/jquery.jenkins.js"></script>

<!-- @endif -->

<!-- @if NODE_ENV == 'PRODUCTION' -->

    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>

    <script src="http://cdn.foo.com/<!-- @echo name -->/<!-- @echo version -->/<!-- @echo now -->/<!-- @echo ver -->/js/<!-- @echo name -->.min.js"></script>

<!-- @endif --> 
```

我确定我的设置与大多数人不同，上述设置的有用性将取决于您的情况。对我来说，虽然它是一段很棒的代码，但 Yeoman [grunt-usemin](https://github.com/yeoman/grunt-usemin)比我个人需要的更强大。

**注意：**我今天*刚刚*发现了上面列出的任务，所以我可能缺少一个功能和/或我的过程可能会改变。现在，我喜欢[grunt-preprocess](https://github.com/onehealth/grunt-preprocess/)和[grunt-env所提供的简单性](https://github.com/onehealth/grunt-env/)**和**功能。:)

* * *

### 2014 年 1 月更新：

受到反对票的推动...

当我发布这个答案时，Grunt 没有多少选择`0.4.x`可以提供满足我需求的解决方案。现在，几个月后，我想有更多的选择*可能*比我在这里发布的更好。**虽然我个人仍然在我的构建中使用并喜欢使用这种技术**，但我要求未来的读者花时间阅读给出的其他答案并研究所有选项。**如果您找到更好的解决方案，请在此处发布您的答案。**

### 2014 年 2 月更新：

我不确定它是否会对任何人有任何帮助，但我已经[在 GitHub 上创建了这个演示存储库，](https://github.com/mhulse/grunt-html-boiler)它使用我上面概述的技术显示了一个完整的（和更复杂的设置）。

* * *

## 回答 #2

> 赞同：35
> 
> 时间：2012-09-14T12:51:32.913

我想出了我自己的解决方案。还没有完善，但我想我会朝那个方向前进。

从本质上讲，我正在使用[grunt.template.process()](https://github.com/cowboy/grunt/blob/master/docs/api_template.md)从模板生成我`index.html`的模板，该模板分析当前配置并生成我的原始源文件列表或带有缩小代码的单个文件的链接。下面的示例适用于 js 文件，但同样的方法可以扩展到 css 和任何其他可能的文本文件。

**`grunt.js`：**

```
/*global module:false*/
module.exports = function(grunt) {
    var   // js files
        jsFiles = [
              'src/module1.js',
              'src/module2.js',
              'src/module3.js',
              'src/awesome.js'
            ];

    // Import custom tasks (see index task below)
    grunt.loadTasks( "build/tasks" );

    // Project configuration.
    grunt.initConfig({
      pkg: '<json:package.json>',
      meta: {
        banner: '/*! <%= pkg.name %> - v<%= pkg.version %> - ' +
          '<%= grunt.template.today("yyyy-mm-dd") %> */'
      },

      jsFiles: jsFiles,

      // file name for concatenated js
      concatJsFile: '<%= pkg.name %>-all.js',

      // file name for concatenated & minified js
      concatJsMinFile: '<%= pkg.name %>-all.min.js',

      concat: {
        dist: {
            src: ['<banner:meta.banner>'].concat(jsFiles),
            dest: 'dist/<%= concatJsFile %>'
        }
      },
      min: {
        dist: {
        src: ['<banner:meta.banner>', '<config:concat.dist.dest>'],
        dest: 'dist/<%= concatJsMinFile %>'
        }
      },
      lint: {
        files: ['grunt.js'].concat(jsFiles)
      },
      // options for index.html builder task
      index: {
        src: 'index.tmpl',  // source template file
        dest: 'index.html'  // destination file (usually index.html)
      }
    });

    // Development setup
    grunt.registerTask('dev', 'Development build', function() {
        // set some global flags that all tasks can access
        grunt.config('isDebug', true);
        grunt.config('isConcat', false);
        grunt.config('isMin', false);

        // run tasks
        grunt.task.run('lint index');
    });

    // Production setup
    grunt.registerTask('prod', 'Production build', function() {
        // set some global flags that all tasks can access
        grunt.config('isDebug', false);
        grunt.config('isConcat', true);
        grunt.config('isMin', true);

        // run tasks
        grunt.task.run('lint concat min index');
    });

    // Default task
    grunt.registerTask('default', 'dev');
}; 
```

**`index.js (the index task)`：**

```
module.exports = function( grunt ) {
    grunt.registerTask( "index", "Generate index.html depending on configuration", function() {
        var conf = grunt.config('index'),
            tmpl = grunt.file.read(conf.src);

        grunt.file.write(conf.dest, grunt.template.process(tmpl));

        grunt.log.writeln('Generated \'' + conf.dest + '\' from \'' + conf.src + '\'');
    });
} 
```

最后，**`index.tmpl`**带有生成逻辑：

```
<doctype html>
<head>
<%
    var jsFiles = grunt.config('jsFiles'),
        isConcat = grunt.config('isConcat');

    if(isConcat) {
        print('<script type="text/javascript" src="' + grunt.config('concat.dist.dest') + '"></script>\n');
    } else {
        for(var i = 0, len = jsFiles.length; i < len; i++) {
            print('<script type="text/javascript" src="' + jsFiles[i] + '"></script>\n');
        }
    }
%>
</head>
<html>
</html> 
```

* * *

**UPD。**发现基于 grunt 的[Yeoman内置了](http://yeoman.io/)[usemin](https://github.com/yeoman/yeoman/blob/0.9.6/cli/tasks/usemin.js)任务，与 Yeoman 的构建系统集成。它根据 index.html 开发版本中的信息以及其他环境设置生成 index.html 的生产版本。有点复杂但看起来很有趣。

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2014-01-31T19:41:16.153

我不喜欢这里的解决方案（包括[我之前给出](https://stackoverflow.com/a/18319872/61624)的解决方案），原因如下：

*   [投票率最高](https://stackoverflow.com/a/14970339/61624)的问题是，您必须在添加/重命名/删除 JS 文件时手动同步脚本标签列表。
*   [接受答案](https://stackoverflow.com/a/12424966/61624)的问题是您的 JS 文件列表不能有模式匹配。这意味着您必须在 Gruntfile 中手动更新它。

我已经想出了如何解决这两个问题。我已经设置了我的 grunt 任务，以便每次添加或删除文件时，都会自动生成脚本标签以反映这一点。这样，当您添加/删除/重命名 JS 文件时，**您无需修改​​ html 文件或 grunt文件。**

总结一下它是如何工作的，我有一个带有脚本标签变量的 html 模板。我使用[https://github.com/alanshaw/grunt-include-replace](https://github.com/alanshaw/grunt-include-replace)来填充该变量。在开发模式下，该变量来自我所有 JS 文件的通配模式。当添加或删除 JS 文件时，watch 任务会重新计算此值。

现在，要在 dev 或 prod 模式下获得不同的结果，您只需使用不同的值填充该变量。这是一些代码：

```
var jsSrcFileArray = [
    'src/main/scripts/app/js/Constants.js',
    'src/main/scripts/app/js/Random.js',
    'src/main/scripts/app/js/Vector.js',
    'src/main/scripts/app/js/scripts.js',
    'src/main/scripts/app/js/StatsData.js',
    'src/main/scripts/app/js/Dialog.js',
    'src/main/scripts/app/**/*.js',
    '!src/main/scripts/app/js/AuditingReport.js'
];

var jsScriptTags = function (srcPattern, destPath) {
    if (srcPattern === undefined) {
        throw new Error("srcPattern undefined");
    }
    if (destPath === undefined) {
        throw new Error("destPath undefined");
    }
    return grunt.util._.reduce(
        grunt.file.expandMapping(srcPattern, destPath, {
            filter: 'isFile',
            flatten: true,
            expand: true,
            cwd: '.'
        }),
        function (sum, file) {
            return sum + '\n<script src="' + file.dest + '" type="text/javascript"></script>';
        },
        ''
    );
};

...

grunt.initConfig({

    includereplace: {
        dev: {
            options: {
                globals: {
                    scriptsTags: '<%= jsScriptTags(jsSrcFileArray, "../../main/scripts/app/js")%>'
                }
            },
            src: [
                'src/**/html-template.html'
            ],
            dest: 'src/main/generated/',
            flatten: true,
            cwd: '.',
            expand: true
        },
        prod: {
            options: {
                globals: {
                    scriptsTags: '<script src="app.min.js" type="text/javascript"></script>'
                }
            },
            src: [
                'src/**/html-template.html'
            ],
            dest: 'src/main/generatedprod/',
            flatten: true,
            cwd: '.',
            expand: true
        }

...

    jsScriptTags: jsScriptTags 
```

`jsSrcFileArray`是典型的 grunt 文件通配模式。 `jsScriptTags`接受并将它们与两侧的标签 `jsSrcFileArray`连接在一起。是我想要在每个文件上的前缀。 `script``destPath`

这是 HTML 的样子：

```
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8"/>
    <title>Example</title>

</head>

<body>    
@@scriptsTags
</body>
</html> 
```

现在，正如您在配置中看到的那样，`script`当它在`prod`模式下运行时，我将该变量的值生成为硬编码标签。在开发模式下，此变量将扩展为如下值：

```
<script src="../../main/scripts/app/js/Constants.js" type="text/javascript"></script>
<script src="../../main/scripts/app/js/Random.js" type="text/javascript"></script>
<script src="../../main/scripts/app/js/Vector.js" type="text/javascript"></script>
<script src="../../main/scripts/app/js/StatsData.js" type="text/javascript"></script>
<script src="../../main/scripts/app/js/Dialog.js" type="text/javascript"></script> 
```

如果您有任何问题，请告诉我。

PS：对于我想在每个客户端 JS 应用程序中做的事情，这是一个疯狂的代码量。我希望有人可以把它变成一个可重用的插件。也许有一天我会。

* * *

## 回答 #4

> 赞同：14
> 
> 时间：2012-10-01T20:27:51.863

我一直在问自己同样的问题，我认为这个 grunt 插件可以配置为你想要的：[https](https://npmjs.org/package/grunt-targethtml) ://npmjs.org/package/grunt-targethtml 。它实现了依赖于 grunt 目标的条件 html 标签。

* * *

## 回答 #5

> 赞同：8
> 
> 时间：2014-01-08T22:59:59.773

我一直在寻找一个更简单、直接的解决方案，所以我结合了这个问题的答案：

[如何在 gruntfile.js 中放置 if else 块](https://stackoverflow.com/questions/19010621/how-to-place-if-else-block-in-gruntfile-js)

并想出了以下简单的步骤：

1.  保留列出的索引文件的两个版本，并将它们命名为 index-development.html 和 index-prodoction.html。
2.  在您的 index.html 文件的 Gruntfile.js 的 concat/copy 块中使用以下逻辑：

    ```
    concat: {
        index: {
            src : [ (function() {
                if (grunt.option('Release')) {
                  return 'views/index-production.html';
                } else {
                  return 'views/index-development.html';
                }
              }()) ],
           dest: '<%= distdir %>/index.html',
           ...
        },
        ...
    }, 
    ```

3.  运行 'grunt --Release' 选择 index-production.html 文件并去掉标志以获得开发版本。

没有要添加或配置的新插件，也没有新的 grunt 任务。

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2013-08-19T17:43:34.830

这个名为[scriptlinker](https://npmjs.org/package/grunt-scriptlinker)的任务看起来像是在开发模式下添加脚本的一种简单方法。您可以先运行一个 concat 任务，然后在 prod 模式下将其指向您的连接文件。

* * *

## 回答 #7

> 赞同：5
> 
> 时间：2013-12-21T15:54:55.200

[grunt-dom-munger](https://github.com/cgross/grunt-dom-munger)使用 CSS 选择器读取和操作 HTML。前任。从您的 html 中读取标签。删除节点、添加节点等。

您可以使用 grunt-dom-munger 读取由 index.html 链接的所有 JS 文件，将它们丑化，然后再次使用 grunt-dom-munger 修改 index.html 以仅链接缩小的 JS

* * *

## 回答 #8

> 赞同：5
> 
> 时间：2015-04-07T18:50:34.420

我找到了一个叫 grunt-dev-prod-switch 的 grunt 插件。它所做的只是根据您传递给 grunt 的 --env 选项注释掉它寻找的某些块（尽管它限制您只能进行开发、生产和测试）。

一旦按照[此处](https://www.npmjs.com/package/grunt-dev-prod-switch)的说明进行设置，您就可以运行例如：

`grunt serve --env=dev`, 它所做的只是注释掉被包裹的块

```
 <!-- env:test/prod -->
    your code here
    <!-- env:test/prod:end --> 
```

它会取消注释掉被包裹的块

```
 <!-- env:dev -->
    your code here
    <!-- env:dev:end --> 
```

它也适用于 javascript，我用它来设置正确的 IP 地址以连接到我的后端 API。块只是更改为

```
 /* env:dev */
    your code here
    /* env:dev:end */ 
```

在你的情况下，它会像这样简单：

```
<!DOCTYPE html>
<html>
    <head>
        <!-- env:dev -->
        <script src="js/module1.js" />
        <script src="js/module2.js" />
        <script src="js/module3.js" />
        ...
        <!-- env:dev:end -->
        <!-- env:prod -->
        <script src="js/MyApp-all.min.js" />
        ...
        <!-- env:prod:end -->
    </head>
    <body></body>
</html> 
```

* * *

## 回答 #9

> 赞同：4
> 
> 时间：2013-12-13T21:12:12.913

grunt-bake 是一个很棒的 grunt 脚本，在这里可以很好地工作。我在我的 JQM 自动构建脚本中使用它。

[https://github.com/imaginethepoet/autojqmphonegap](https://github.com/imaginethepoet/autojqmphonegap)

看看我的 grunt.coffee 文件：

```
bake:
    resources: 
      files: "index.html":"resources/custom/components/base.html" 
```

这会查看 base.html 中的所有文件并将它们吸入以创建 index.html，这对于多页应用程序 (phonegap) 非常有效。这使得开发更容易，因为所有开发人员都没有在一个长的单页应用程序上工作（防止大量冲突签入）。相反，您可以拆分页面并处理较小的代码块，然后使用 watch 命令编译到整个页面。

Bake 从 base.html 读取模板并在 watch 上注入组件 html 页面。

```
<!DOCTYPE html> 
```

jQuery 移动演示

app.initialize();

```
<body>
    <!--(bake /resources/custom/components/page1.html)-->
    <!--(bake /resources/custom/components/page2.html)-->
    <!--(bake /resources/custom/components/page3.html)-->
</body> 
```

您可以更进一步，在您的页面中为“菜单”“弹出窗口”等添加注入，这样您就可以真正将页面分解为更小的可管理组件。

* * *

## 回答 #10

> 赞同：4
> 
> 时间：2014-06-09T19:57:08.027

结合使用wiredep [https://github.com/taptapship/wiredep](https://github.com/taptapship/wiredep)和usemin [https://github.com/yeoman/grunt-usemin](https://github.com/yeoman/grunt-usemin)来让grunt 处理这些任务。Wiredep 将一次将您的依赖项添加一个脚本文件，而 usemin 会将它们全部连接到一个文件中以用于生产。这可以通过一些 html 注释来完成。例如，当我运行时，我的 bower 包会自动包含并添加到 html 中`bower install && grunt bowerInstall`：

```
<!-- build:js /scripts/vendor.js -->
<!-- bower:js -->
<!-- endbower -->
<!-- endbuild --> 
```

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2015-06-30T10:27:43.310

这个答案不适合菜鸟！

使用 Jade 模板......将变量传递给 Jade 模板是一个沼泽标准用例

我正在使用 grunt (grunt-contrib-jade) 但您不必使用 grunt。只需使用标准的 npm Jade 模块。

如果使用 grunt，那么您的 gruntfile 会像 ...

```
jade: {
    options: {
      // TODO - Define options here
    },
    dev: {
      options: {
        data: {
          pageTitle: '<%= grunt.file.name %>',
          homePage: '/app',
          liveReloadServer: liveReloadServer,
          cssGruntClassesForHtmlHead: 'grunt-' + '<%= grunt.task.current.target %>'
        },
        pretty: true
      },
      files: [
        {
          expand: true,
          cwd: "src/app",
          src: ["index.jade", "404.jade"],
          dest: "lib/app",
          ext: ".html"
        },
        {
          expand: true,
          flatten: true,
          cwd: "src/app",
          src: ["directives/partials/*.jade"],
          dest: "lib/app/directives/partials",
          ext: ".html"
        }
      ]
    }
  }, 
```

我们现在可以在 Jade 模板中轻松访问 grunt 传递的数据。

与 Modernizr 使用的方法非常相似，我根据传递的变量的值在 HTML 标签上设置了一个 CSS 类，并且可以根据 CSS 类是否存在从那里使用 JavaScript 逻辑。

如果使用 Angular，这非常好，因为您可以根据类是否存在来执行 ng-if 以在页面中包含元素。

例如，如果类存在，我可能会包含一个脚本......

（例如，我可能在 dev 中包含实时重新加载脚本，但在生产中不包含）

```
<script ng-if="controller.isClassPresent()" src="//localhost:35729/livereload.js"></script> 
```

* * *

## 回答 #12

> 赞同：2
> 
> 时间：2017-02-20T19:39:02.607

考虑[processhtml](https://github.com/dciccale/grunt-processhtml)。它允许为构建定义多个“目标”。注释用于有条件地在 HTML 中包含或排除材料：

```
<!-- build:js:production js/app.js -->
...
<!-- /build --> 
```

变成

```
<script src="js/app.js"></script> 
```

它甚至声称可以做这样的漂亮事情（请参阅[自述文件](https://github.com/dciccale/grunt-processhtml/blob/master/README.md)）：

```
<!-- build:[class]:dist production -->
<html class="debug_mode">
<!-- /build -->

<!-- class is changed to 'production' only when the 'dist' build is executed -->
<html class="production"> 
```

# fluentvalidation - 流畅的验证 - 将两个验证器组合到一个自定义验证器中

> ID：12401999
> 
> 赞同：0
> 
> 时间：2012-09-13T08:08:55.630
> 
> 标签：fluentvalidation

我有以下验证器类：

```
public class FranchiseInfoValidator : AbstractValidator<FranchiseInfo>
    {
        public FranchiseInfoValidator()
        {
            RuleFor(franchiseInfo => franchiseInfo.FolderName).NotEmpty().Matches("^[a-zA-Z0-9_.:-]+$").WithMessage("Invalid characters");
            RuleFor(franchiseInfo => franchiseInfo.ExeIconName).NotEmpty().Matches("^[a-zA-Z0-9_.:-]+$").WithMessage("Invalid characters");
            RuleFor(franchiseInfo => franchiseInfo.FullName).NotEmpty().Matches("^[a-zA-Z0-9_.:-]+$").WithMessage("Invalid characters");
            RuleFor(franchiseInfo => franchiseInfo.ShortName).NotEmpty().Matches("^[a-zA-Z0-9_.:-]+$").WithMessage("Invalid characters");        
    } 
```

`NotEmpty()`和`Matches("^[a-zA-Z0-9_.:-]+$").WithMessage("Invalid characters")`带有自定义消息的验证器对于所有属性都是相同的。是否可以将它们分组到一个自定义验证器中，然后编写如下内容：

```
RuleFor(franchiseInfo => franchiseInfo.FolderName).SetValidator(new CustomValidator()); 
```

我已经做了一些自定义验证器，但在这种情况下没有。这可能吗？我在文档中没有找到这样的例子。此外，我想知道这是否可以通用，所以如果我有另一个具有属性的验证器类来应用相同的自定义验证器？谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-19T16:22:30.823

是的，它应该与类似的东西一起使用

```
public class MyCustomValidator : PropertyValidator
    {

        public MyCustomValidator()
            : base("Property {PropertyName} has invalid characters.")
        {
        }

        protected override bool IsValid(PropertyValidatorContext context)
        {
            var element = context.PropertyValue  as string;
            return !string.IsNullOrEmpty(element) && Regex.IsMatch(element, "^[a-zA-Z0-9_.:-]+$");
        }
    } 
```

用法：使用您的代码，或创建您自己的扩展

```
public static class MyValidatorExtensions {
   public static IRuleBuilderOptions<T, string> CheckIfNullAndMatches<T>(this IRuleBuilder<T, string> ruleBuilder) {
      return ruleBuilder.SetValidator(new MyCustomValidator<TElement>());
   }
} 
```

那么用法将是

```
RuleFor(franchiseInfo => franchiseInfo.FolderName).CheckIfNullAndMatches(); 
```

如果您需要更通用的验证器，您还可以将正则表达式作为参数...

文档[在这里](https://fluentvalidation.net/custom-validators)