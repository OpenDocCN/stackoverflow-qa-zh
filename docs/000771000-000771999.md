# StackOverflow 问答 000771000-000771999

# c++ - C++ 中的“for”循环与 Qt 的“foreach”

> ID：771008
> 
> 赞同：56
> 
> 时间：2009-04-21T04:12:58.620
> 
> 标签：c++, performance, qt, foreach, for-loop

哪个更好（或更快），是 C++`for`循环还是`foreach`Qt 提供的运算符？例如，以下条件

```
QList<QString> listofstrings; 
```

哪个更好？

```
foreach(QString str, listofstrings)
{
    //code
} 
```

或者

```
int count = listofstrings.count();
QString str = QString();
for(int i=0;i<count;i++)
{
    str = listofstrings.at(i);
    //Code
} 
```

* * *

## 回答 #1

> 赞同：152
> 
> 时间：2009-04-21T04:19:41.613

在大多数情况下，这真的无关紧要。

StackOverflow 上关于这种方法或那种方法是否更快的大量问题掩盖了这样一个事实，即在绝大多数情况下，代码大部分时间都在等待用户做某事。

如果您*真的*很担心，请自行分析并根据您的发现采取行动。

但我认为您很可能会发现，只有在最密集的数据处理繁重的工作中，这个问题才有意义。差异很可能只有几秒钟，即使那样，也只有在处理大量元素时。

让您的代码*首先*工作。然后让它*快速*工作（并且只有当你发现实际的性能问题时）。

在您完成功能并可以正确配置之前花在优化上的时间主要是浪费时间。

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2009-04-21T16:07:52.800

首先，我只想说我同意 Pax，并且速度可能不会进入它。foreach 基于可读性赢得了胜利，这在 98% 的情况下就足够了。

但是当然 Qt 的人已经研究过了，实际上做了一些分析： [http ://blog.qt.io/blog/2009/01/23/iterating-efficiently/](http://blog.qt.io/blog/2009/01/23/iterating-efficiently/)

从中吸取的主要教训是：在只读循环中使用 const 引用，因为它避免了临时实例的创建。它还使循环的目的更加明确，无论您使用哪种循环方法。

* * *

## 回答 #3

> 赞同：19
> 
> 时间：2009-04-21T17:27:54.590

**真的没关系**。奇怪的是，如果你的程序很慢，这不是问题。但是，应该注意的是，您并没有进行完全平等的比较。Qt`foreach`与此更相似（此示例将使用`QList<QString>`）：

```
for(QList<QString>::iterator it = Con.begin(); it != Con.end(); ++it) {
    QString &str = *it;
    // your code here
} 
```

宏能够通过使用一些编译器扩展（如 GCC's `__typeof__`）来获得传递的容器类型来做到这一点。还可以想象 boost`BOOST_FOREACH`在概念上非常相似。

您的示例不公平的原因是您的非 Qt 版本增加了额外的工作。

您正在索引而不是真正迭代。如果您使用的是具有非连续分配的类型（我怀疑这可能是这种情况`QList<>`），那么索引将更加昂贵，因为代码必须计算第 n 个项目的“位置”。

话虽如此。**还是**没关系。如果存在的话，这两段代码之间的时间差异将可以忽略不计。不要浪费时间担心它。写下你觉得更清晰易懂的。

**编辑：**作为奖励，目前我强烈支持 C++11 版本的容器迭代，它干净、简洁、简单：

```
for(QString &s : Con) {
    // you code here
} 
```

* * *

## 回答 #4

> 赞同：17
> 
> 时间：2017-08-16T11:17:13.323

由于**Qt 5.7**已弃用该`foreach`宏，Qt 鼓励您改用 C++11 `for`。
[http://doc.qt.io/qt-5/qtglobal.html#foreach](http://doc.qt.io/qt-5/qtglobal.html#foreach)

（有关此处差异的更多详细信息：[https](https://www.kdab.com/goodbye-q_foreach/) ://www.kdab.com/goodbye-q_foreach/ ）

* * *

## 回答 #5

> 赞同：13
> 
> 时间：2009-04-25T14:13:37.100

我不想回答哪个更快的问题，但我确实想说哪个更好。

Qt 的 foreach 最大的问题是它在迭代之前需要一个容器的副本。您可以说“这无关紧要，因为 Qt 类已被引用”，但因为使用了副本，您实际上根本不会更改原始容器。

总之，Qt 的 foreach 只能用于只读循环，因此应该避免使用。Qt 很乐意让您编写一个 foreach 循环，您认为该循环会更新/修改您的容器，但最终所有更改都会被丢弃。

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2009-04-21T16:53:14.953

首先，我完全同意“没关系”的回答。选择最干净的解决方案，并在它成为问题时进行优化。

但另一种看待它的方式是，最快的解决方案通常是最准确地描述您的意图的解决方案。在这种情况下，QT 的 foreach 表示您希望对容器中的每个元素应用一些操作。

一个普通的 for 循环说你想要一个 counter `i`。你想在这个值 i 上重复加一，只要它小于容器中元素的数量，你就想执行一些动作。

换句话说，普通的 for 循环过度指定了问题。它增加了许多实际上并不是您正在尝试做的事情的一部分。你不*关心*循环计数器。但是一旦你写了一个 for 循环，它就必须在那里。

另一方面，QT 人没有做出任何可能影响性能的额外承诺。他们只是保证遍历容器并对每个容器应用一个动作。

换句话说，通常最干净、最优雅的解决方案也是最快的。

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2009-04-21T04:21:28.100

恕我直言，Qt 中的 foreach 对 for 循环有更清晰的语法，因此在这个意义上它更好。性能方面，我怀疑里面有什么东西。

您可以考虑改用[BOOST_FOREACH](http://www.boost.org/doc/libs/1_35_0/doc/html/foreach.html)，因为它是一个经过深思熟虑的 for 循环，而且它是可移植的（并且可能有一天会进入 C++ 并且也是未来的证明）。

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2010-07-25T09:52:15.190

可以在[http://richelbilderbeek.nl/CppExerciseAddOneAnswer.htm找到一个基准及其结果](http://richelbilderbeek.nl/CppExerciseAddOneAnswer.htm)

恕我直言（以及这里的许多其他人）它（即速度）并不重要。

但请随意得出自己的结论。

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2009-04-21T04:26:10.833

对于小型集合，它应该很重要，并且 foreach 往往更清晰。

但是，对于较大的集合，for 将在某个时候开始击败 foreach。（假设 'at()' 运算符是有效的。

如果这真的很重要（我假设它是因为你在问），那么最好的办法就是衡量它。分析器应该可以解决问题，或者您可以使用一些工具构建测试版本。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2009-04-21T04:50:07.483

我希望 foreach 在某些情况下名义上的工作速度更快，而在其他情况下则大致相同，除非项目是实际数组，在这种情况下性能差异可以忽略不计。

如果它是在枚举数之上实现的，它*可能*比直接索引更有效，具体取决于实现。它不太可能降低效率。例如，如果有人将平衡树公开为既可索引又可枚举，那么 foreach 会更快。这是因为每个索引都必须独立找到引用的项目，而枚举器具有当前节点的上下文，以便更有效地导航到下一个实体。

如果你有一个实际的数组，那么它取决于语言和类的实现，foreach 是否会比 for 更快。

如果索引是文字内存偏移量（例如 C++），那么 for 应该稍微快一些，因为您避免了函数调用。如果索引就像调用一样是间接的，那么它应该是相同的。

说了这么多……我发现在这里很难找到一个概括的案例。这是您应该寻找的最后一种优化，即使您的应用程序中存在性能问题。如果你有一个性能问题可以通过改变你的迭代方式来解决，那么你就没有真正的性能问题。你有一个BUG，因为有人写了一个非常糟糕的迭代器，或者一个非常糟糕的索引器。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2009-04-21T15:09:01.333

您可能会查看 STL 的[for_each](http://www.cplusplus.com/reference/algorithm/for_each/)函数。我不知道它是否会比您提供的两个选项更快，但它比 Qt foreach 更标准化，并且避免了您在使用常规 for 循环时可能遇到的一些问题（即越界索引和困难将循环转换为不同的数据结构）。

# unit-testing - 自动化单元测试与自动化集成测试的优缺点是什么？

> ID：771011
> 
> 赞同：28
> 
> 时间：2009-04-21T04:15:27.880
> 
> 标签：unit-testing, automated-tests, integration-testing

最近，我们一直在向现有的 Java 应用程序添加自动化测试。

**我们有什么**

这些测试中的大多数是集成测试，它可能涵盖一系列调用，例如：-

1.  HTTP 发布到 servlet
2.  servlet 验证请求并调用业务层
3.  业务层通过休眠等做了很多事情并更新了一些数据库表
4.  servlet 生成一些 XML，通过 XSLT 运行它以生成响应 HTML。

然后，我们验证 servlet 以正确的 XML 响应，并且数据库（我们的开发 Oracle 实例）中存在正确的行。然后删除这些行。

我们还有一些较小的单元测试来检查单个方法调用。

这些测试都作为我们夜间（或临时）构建的一部分运行。

**问题**

这看起来不错，因为我们正在检查系统的边界：一端是 servlet 请求/响应，另一端是数据库。如果这些工作，那么我们可以自由地重构或弄乱中间的任何东西，并对被测 servlet 继续工作有一定的信心。

这种方法可能会遇到什么问题？

我看不出在单个类上添加更多单元测试会有什么帮助。这不会使重构变得更加困难，因为我们更有可能需要丢弃并重新编写测试？

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2009-04-21T04:23:19.373

单元测试更紧密地定位故障。集成级测试更贴近用户需求，因此可以更好地预测交付成功。除非构建和维护，否则它们都不是很好，但如果使用得当，它们都非常有价值。

* * *

（更多的...）

单元测试的问题是，没有任何集成级别测试可以像一组好的单元测试那样对所有代码进行测试。是的，这可能意味着您必须对测试进行一些重构，但总的来说，您的测试不应过多地依赖于内部结构。因此，例如，假设您有一个函数来获得 2 的幂。你描述它（作为一个正式的方法人，我声称你指定它）

```
long pow2(int p); // returns 2^p for 0 <= p <= 30 
```

您的测试和您的规范看起来基本相同（这是一种伪 xUnit 用于说明）：

```
assertEqual(1073741824,pow2(30);
assertEqual(1, pow2(0));
assertException(domainError, pow2(-1));
assertException(domainError, pow2(31)); 
```

现在您的实现可以是一个带有多个的 for 循环，您可以稍后再将其更改为一个班次。

如果您更改实现，例如，它返回 16 位（请记住，`sizeof(long)`仅保证不小于`sizeof(short)`），那么此测试将很快失败。集成级别的测试可能会失败，但不一定，而且在`pow2(28)`.

关键是他们确实测试了不同的情况。如果您可以构建足够详细的集成测试和广泛的集成测试，那么您可能能够获得相同水平的覆盖率和细粒度测试，但这可能很难做到，而且指数级的状态空间爆炸会打败您。通过使用单元测试对状态空间进行分区，您需要的测试数量比指数增长要少得多。

* * *

## 回答 #2

> 赞同：29
> 
> 时间：2009-05-04T20:02:29.417

您在问两种不同事物的利弊（骑马与骑摩托车的利弊是什么？）

当然，两者都是“自动测试”（~riding），但这并不意味着它们是替代品（你不会骑马数百英里，也不会在封闭车辆的泥泞中骑摩托车地方）

* * *

**单元测试**测试代码的最小单元，通常是一个方法。每个单元测试都与它正在测试的方法密切相关，如果它写得很好，它（几乎）只与它相关。

它们非常适合指导新代码的*设计和现有代码的**重构*。在系统准备好进行集成测试之前，它们很适合发现问题。请注意，我写了*指南*，所有的测试驱动开发都是关于这个词的。

进行手动单元测试没有任何意义。

重构呢？这似乎是您主要关心的问题？如果你只是重构一个方法的实现（内容），而不是它的存在或“外部行为”，那么单元测试仍然是有效的并且非常有用（在你尝试之前你无法想象有多大用处）。

如果您正在更积极地重构，改变方法的存在或行为，那么是的，您需要为每个新方法编写一个新的单元测试，并可能丢弃旧的。但是编写单元测试，特别是如果你在代码本身之前编写它，将有助于阐明设计（即方法应该做什么，不应该做什么**）****，**而不会被实现细节（即方法应该**如何**做它需要做的事情）。

* * *

**自动化集成测试**测试代码的最大单元，通常是整个应用程序。

它们非常适合测试您不想手动测试的*用例。*但是您也可以进行手动集成测试，它们同样有效（只是不太方便）。

* * *

今天开始一个新项目，没有单元测试没有任何意义，但我想说，对于像你这样的现有项目，为你已经拥有的所有东西编写它们并没有多大意义，而且它正在工作。

在你的情况下，我宁愿使用“中间立场”的方法写作：

1.  较小的集成测试，仅测试您要重构的部分。如果您要重构整个事情，那么您可以使用您当前的集成测试，但是如果您只是重构 - 比如说 - XML 生成，那么要求数据库的存在没有任何意义，所以我会写一个简单而小型的 XML 集成测试。
2.  一堆你要写的新代码的单元测试。正如我在上面已经写过的，一旦你“弄乱了中间的任何东西”，单元测试就会准备好，确保你的“乱七八糟”在某个地方。

实际上，您的集成测试只会确保您的“混乱”不起作用（因为一开始它不会起作用，对吗？）但它不会给您任何线索

*   为什么它不工作
*   如果您对“混乱”的调试确实在修复某些问题
*   如果您对“混乱”的调试正在破坏其他东西

如果整个更改成功，集成测试只会在最后给出确认（答案将很长一段时间都是“否”）。在重构过程中，集成测试不会给您任何帮助，这会使重构变得更加困难并且可能令人沮丧。您需要为此进行单元测试。

* * *

## 回答 #3

> 赞同：20
> 
> 时间：2009-04-21T12:07:16.873

我同意 Charlie 关于更多与用户操作和整个系统的正确性相对应的集成级测试。我确实认为单元测试比仅仅更紧密地定位失败更有价值。单元测试为集成测试提供了两个主要价值：

1) 编写单元测试与测试一样是一种设计行为。如果你练习测试驱动开发/行为驱动开发，那么编写单元测试的行为可以帮助你准确地设计你的代码应该做什么。它可以帮助您编写更高质量的代码（因为松散耦合有助于测试），它可以帮助您编写足够的代码以使您的测试通过（因为您的测试实际上是您的规范）。

2) 单元测试的第二个价值是，如果它们编写得当，它们会非常非常快。如果我对您项目中的一个类进行更改，我可以运行所有相应的测试来查看我是否破坏了任何东西吗？我怎么知道要运行哪些测试？他们需要多长时间？我可以保证它会比写得很好的单元测试更长。您最多应该能够在几分钟内运行所有单元测试。

* * *

## 回答 #4

> 赞同：16
> 
> 时间：2009-05-04T13:22:36.303

仅举几个亲身经历的例子：

**单元测试：**

*   (+) 使测试接近相关代码
*   (+) 相对容易测试所有代码路径
*   (+) 很容易看出是否有人无意中改变了方法的行为
*   (-) UI 组件比非 GUI 更难编写

**集成测试：**

*   (+) 在项目中拥有具体细节固然很好，但是集成测试可以确保它们彼此匹配
*   (-) 更难定位错误源
*   (-) 更难测试所有（甚至所有关键）代码路径

*理想情况下，两者都是必要的。*

**例子：**

*   单元测试：确保输入索引 >= 0 并且 < 数组长度。越界时会发生什么？方法应该抛出异常还是返回null？

*   集成测试：当输入负库存值时，用户会看到什么？

第二个影响 UI 和后端。双方都可以完美地工作，你仍然可能得到错误的答案，因为两者之间的错误条件没有明确定义。

我们发现关于单元测试的最好的部分是它使开发人员从代码->测试->思考到思考->测试->代码。如果开发人员必须先编写测试，[s] 他往往会更多地考虑预先可能出现的问题。

要回答您的最后一个问题，由于单元测试与代码如此接近并迫使开发人员提前思考更多，在实践中我们发现我们不倾向于重构代码，因此更少的代码被移动- 所以不断地折腾和编写新的测试似乎不是问题。

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2009-05-02T11:54:27.907

这个问题肯定有哲学部分，但也指向务实的考虑。

测试驱动设计用作成为更好的开发人员的手段有其优点，但这不是必需的。许多优秀的程序员从未编写过单元测试。进行单元测试的最佳理由是它们在重构时赋予您的力量，尤其是当许多人同时更改源代码时。在签入时发现错误也可以为项目节省大量时间（考虑迁移到 CI 模型并基于签入而不是每晚构建）。因此，如果您在编写它测试的代码之前或之后编写单元测试，那么您在那一刻就可以确定您编写的新代码。单元测试可以确保以后该代码可能发生的事情 - 这可能很重要。单元测试可以在进行 QA 之前阻止错误，从而加快您的项目。

如果正确完成，集成测试会强调堆栈中元素之间的接口。以我的经验，集成是项目中最不可预测的部分。让各个部分发挥作用往往并不难，但将所有内容放在一起可能非常困难，因为在此步骤中可能会出现各种错误。在许多情况下，项目延迟是因为集成中发生的事情。在此步骤中遇到的一些错误是在接口中发现的，这些接口已被一侧所做的某些更改破坏，而这些更改未传达给另一侧。集成错误的另一个来源是在 dev 中发现但在应用程序进入 QA 时被遗忘的配置。集成测试可以帮助显着减少这两种类型。

可以对每种测试类型的重要性进行辩论，但对您来说最重要的是将任何一种类型应用于您的特定情况。有问题的应用程序是由一小群人还是由许多不同的群体开发的？您是否有一个存储库来存储所有内容，或者每个应用程序的特定组件都有多个存储库？如果您有后者，那么您将面临不同组件的不同版本的相互兼容性的挑战。

每种测试类型都旨在暴露开发阶段不同集成级别的问题，以节省时间。单元测试推动了许多开发人员在一个存储库上操作的输出的集成。集成测试（名字不好）推动了堆栈中组件的集成——组件通常由不同的团队编写。集成测试暴露的问题类别通常更耗时修复。

所以务实地说，它真的归结为你在自己的组织/流程中最需要速度的地方。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2009-05-04T15:19:45.087

单元测试和集成测试的区别在于运行测试所需的部件数量。

单元测试（理论上）需要非常（或不需要）其他部分来运行。集成测试（理论上）需要运行很多（或所有）其他部分。

集成测试测试行为和基础设施。单元测试通常只测试行为。

因此，单元测试适用于测试某些东西，集成测试适用于其他东西。

那么，为什么要进行单元测试呢？

例如，在集成测试时很难测试边界条件。示例：后端函数需要一个正整数或 0，前端不允许输入负整数，当您将负整数传递给后端函数时，如何确保其行为正确？也许正确的行为是抛出异常。这在集成测试中很难做到。

因此，为此，您需要一个（函数的）单元测试。

此外，单元测试有助于消除集成测试期间发现的问题。在上面的示例中，单个 HTTP 调用有很多故障点：

来自 HTTP 客户端的调用 servlet 验证 从 servlet 到业务层的调用 业务层验证 数据库读取（休眠）业务层的数据转换 数据库写入（休眠）数据转换 -> XML XSLT 转换-> HTML HTML 的传输 -> 客户端

为了使您的集成测试正常工作，您需要所有这些过程才能正常工作。对于 servlet 验证的单元测试，您只需要一个。servlet 验证（可以独立于其他所有内容）。一层中的问题变得更容易追踪。

您需要单元测试和集成测试。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2009-04-29T06:27:31.460

单元测试在类中执行方法来验证正确的输入/输出，而无需在应用程序的更大上下文中测试类。您可以使用模拟来模拟依赖类——您正在将类作为独立实体进行黑盒测试。单元测试应该可以从开发人员工作站运行，而无需任何外部服务或软件要求。

集成测试将包括您的应用程序和第三方软件的其他组件（例如，您的 Oracle 开发数据库或 Web 应用程序的 Selenium 测试）。这些测试可能仍然非常快并且作为持续构建的一部分运行，但是因为它们注入了额外的依赖项，所以它们也有注入新错误的风险，这些错误会导致您的代码出现问题*，*但不是*由*您的代码引起的。最好，集成测试也是您注入真实/记录数据并断言应用程序堆栈作为一个整体在给定这些输入的情况下按预期运行的地方。

问题归结为您要查找什么样的错误以及您希望以多快的速度找到它们。单元测试有助于减少“简单”错误的数量，而集成测试可以帮助您找出架构和集成问题，希望能模拟墨菲定律对整个应用程序的影响。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2009-05-04T15:34:45.487

Joel Spolsky 写了一篇关于单元测试的非常有趣的文章（这是 Joel 和其他人之间的对话）。

主要思想是单元测试是非常好的事情，但前提是你以“有限”的数量使用它们。Joel 不建议在 100% 的代码都在测试用例下时达到状态。

单元测试的问题在于，当您想要更改应用程序的架构时，您必须更改所有相应的单元测试。而且它会花费很多时间（甚至可能比重构本身还要多）。在所有这些工作之后，只有少数测试会失败。

因此，只为确实会造成一些麻烦的代码编写测试。

我如何使用单元测试：我不喜欢 TDD，所以我首先编写代码，然后测试它（使用控制台或浏览器），以确保此代码能够正常工作。只有在那之后，我才添加“棘手”的测试——其中 50% 的测试在第一次测试后失败。

它有效，并且不需要太多时间。

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2009-05-04T22:31:21.523

我们的项目中有 4 种不同类型的测试：

1.  必要时使用模拟进行单元测试
2.  行为类似于单元测试的数据库测试，但之后会触及数据库并进行清理
3.  我们的逻辑通过 REST 公开，因此我们有执行 HTTP 的测试
4.  使用实际使用 IE 实例并检查主要功能的 WatiN 进行 Webapp 测试

我喜欢单元测试。它们运行得非常快（比 #4 测试快 100-1000 倍）。它们是类型安全的，因此重构非常容易（使用良好的 IDE）。

主要问题是需要做多少工作才能正确完成它们。您必须模拟所有内容：数据库访问、网络访问、其他组件。你必须装饰不可修改的类，得到无数几乎无用的类。您必须使用 DI，这样您的组件就不会紧密耦合，因此不可测试（请注意，使用 DI 实际上并不是一个缺点：）

我喜欢测试#2。他们确实使用数据库并且会报告数据库错误、违反约束和无效列。我认为我们可以使用它进行有价值的测试。

＃3，尤其是＃4更有问题。它们需要构建服务器上的一些生产环境子集。您必须构建、部署并让应用程序运行。你每次都必须有一个干净的数据库。但最终，它得到了回报。Watin 测试需要不断的工作，但您也需要不断的测试。我们在每次提交时运行测试，当我们破坏某些东西时很容易看到。

所以，回到你的问题。单元测试很快（这非常重要，构建时间应该少于 10 分钟）并且很容易重构。如果您的设计发生变化，这比重写整个事情要容易得多。如果您使用具有良好*查找用法*命令的漂亮编辑器（例如 IDEA 或 VS.NET + Resharper），您总能找到正在测试您的代码的位置。

通过 REST/HTTP 测试，您可以很好地验证您的系统是否确实有效。但是测试运行速度很慢，因此很难在这个级别进行完整的验证。我假设您的方法接受多个参数或可能的 XML 输入。要检查 XML 中的每个节点或每个参数，需要进行数十或数百次调用。你可以通过单元测试来做到这一点，但你不能通过 REST 调用来做到这一点，因为每个调用都可能需要一秒钟的时间。

我们的单元测试比#3 测试更频繁地检查特殊的边界条件。他们（#3）检查主要功能是否正常工作，仅此而已。这对我们来说似乎工作得很好。

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2009-05-05T17:03:20.977

正如许多人所提到的，集成测试会告诉你系统是否工作，单元测试会告诉你哪里不工作。严格从测试的角度来看，这两种测试是相辅相成的。

> 我看不出在单个类上添加更多单元测试会有什么帮助。这不会使重构变得更加困难，因为我们更有可能需要丢弃并重新编写测试？

不会。它将使重构变得更容易和更好，并且更清楚地看到哪些重构是适当和相关的。这就是为什么我们说 TDD 是关于设计的，而不是关于测试的。对于我来说，为一种方法编写一个测试并弄清楚如何表达该方法的结果应该是什么，以便根据被测类的其他方法提出一个非常简单的实现，这是很常见的。该实现经常会进入被测类。更简单、更可靠的实现、更清晰的边界、更小的方法：TDD - 单元测试，特别是 - 引导你朝这个方向发展，而集成测试则不然。它们都很重要，也都很有用，但它们的用途不同。

Yes, you may find yourself modifying and deleting unit tests on occasion to accommodate refactorings; that's fine, but it's not hard. And having those unit tests - and going through the experience of writing them - gives you better insight into your code, and better design.

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2009-05-04T20:49:35.420

您可能也对[这个问题和相关答案](https://stackoverflow.com/questions/176267/why-should-i-both-unit-test-and-web-test-instead-of-just-web-test/558324#558324)感兴趣。在那里你可以找到我对这里已经给出的答案的补充。

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2009-05-04T21:46:38.497

尽管您描述的设置听起来不错，但单元测试也提供了一些重要的东西。单元测试提供了精细级别的粒度。通过松散耦合和依赖注入，您几乎可以测试每个重要案例。您可以确定这些单元是坚固的；您可以使用在集成测试期间不一定会出现的大量输入或有趣的事情来仔细检查各个方法。

例如，如果您想确定性地查看一个类将如何处理需要复杂设置的某种故障（例如，从服务器检索某些内容时出现网络异常），您可以轻松编写自己的测试双网络连接类，注入它并告诉它随时抛出异常。然后，您可以确保被测类优雅地处理异常并在有效状态下继续运行。

# c++ - 来自随机数生成器包装器 (C++) 的令人费解的内联行为

> ID：771012
> 
> 赞同：1
> 
> 时间：2009-04-21T04:15:28.737
> 
> 标签：c++, c, random, inline

我有一个 Mersenne twister 随机数生成器的简单包装器。目的是将生成器返回的数字（在 0 和 1 之间）缩放到参数定义的限制（开始和结束）之间。

所以我的功能是

```
inline float xlRandomFloat(float begin, float end) {return (begin+((end-begin)*genrand_real2()));} 
```

我不相信 genrand_real2() 函数的实现很重要，但如果我错了，可以在[这里找到](http://www.math.sci.hiroshima-u.ac.jp/~m-mat/MT/MT2002/CODES/mt19937ar.c)

问题是函数不返回翻译结果。缩放 (乘以 (begin-end) 似乎工作正常，但似乎没有返回 begin 的添加。

因此，如果我调用 xlRandomFloat(5,10) - 我会得到 0 到 5 之间的值。

如果我使用 GDB 进行调试，并使用打印功能，那么它会显示正确的结果。所以我试着把事情分成几行，看看会发生什么

```
inline float xlRandomFloat(float begin, float end) {
    float ret;
    ret=(((end-begin)*genrand_real2()));
    ret+=begin;
    return ret;}; 
```

调试时，它直接从第一行跳转到 genrand_real2() 函数并完全跳过其他所有内容。这真的很令人困惑，所以我认为这可能与内联有关。我将文件从这个 .hpp 文件移动到 .cpp 并删除了 inline 关键字，一切正常。

但是为什么会出现这种行为，我该如何内联这个函数呢？此外，我不确定这是否相关，但通常当我对源代码进行更改时，我的 Make 编译会说没有什么可做的。这是不寻常的，因为通常我希望 make 能够了解源代码的变化并相应地进行重建。

有任何想法吗。

谢谢

曾娜

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-21T04:21:19.207

您的代码非常好，您的编译方式一定有问题。确保您的 Makefile 具有正确的依赖关系：源文件需要依赖于它们包含的头文件。跟踪这些依赖项很少手动完成，通常只针对非常小的项目——它们通常由诸如`makedepend`.

要查看内联是否导致问题，只需使用`-O0`GCC 的 (dash capital-oh zero) 选项禁用所有优化。还要确保使用`-g`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-21T04:41:10.970

好的，这里有几件事在起作用。

首先，在调试时，您描述了我认为或多或少预期的行为，因为当您内联函数时，没有生成的代码与函数的 fromt 问题相匹配。所以，第一个声明是

```
ret=(((end-begin)*genrand_real2())); 
```

第一步是调用`genrand_real2()`. 如果`genrand_real2(`)*也是*内联的，那么您将在其中的第一个语句处结束，而无需停下来喘口气。

其次，确保你真的在运行你认为的代码。尝试从一个干净的目录中制作——一些 C++ 编译器会制作预编译的片段，它们会保留这些片段以加快编译速度。确保您的内联定义已从头文件中完全删除或注释掉。米

Thrd，使用内联创建一个非常简单的程序，并确保它的行为符合您的预期。

# recursion - 如何改进这段代码？

> ID：771013
> 
> 赞同：3
> 
> 时间：2009-04-21T04:15:35.477
> 
> 标签：recursion, scheme, sicp

我对 SICP[练习 1.11](http://mitpress.mit.edu/sicp/full-text/book/book-Z-H-11.html#%_sec_1.2.2)的解决方案是：

```
(define (f n)
  (if (< n 3)
   n
   (+ (f (- n 1)) (* 2 (f (- n 2))) (* 3 (f (- n 3))))
   )) 
```

正如预期的那样，（f 100）之类的评估需要很长时间。我想知道是否有办法改进这段代码（不考虑递归），和/或利用多核盒子。我正在使用'mit-scheme'。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-04-21T04:24:23.630

该练习告诉您编写两个函数，一个`f`“通过递归过程”进行计算，另一个`f`“通过迭代过程”进行计算。你做了递归的。由于此函数与您链接到的部分示例中给出的函数非常相似，因此`fib`您应该能够通过查看函数的递归和迭代示例来弄清楚这一点`fib`：

```
; Recursive
(define (fib n)
  (cond ((= n 0) 0)
        ((= n 1) 1)
        (else (+ (fib (- n 1))
                 (fib (- n 2))))))

; Iterative
(define (fib n)
  (fib-iter 1 0 n))

(define (fib-iter a b count)
  (if (= count 0)
      b
      (fib-iter (+ a b) a (- count 1)))) 
```

在这种情况下，您将定义一个`f-iter`函数，该函数将采用`a`、`b`、 和`c`参数以及`count`参数。

这是`f-iter`功能。注意与 的相似性`fib-iter`：

```
(define (f-iter a b c count)
  (if (= count 0)
      c
      (f-iter (+ a (* 2 b) (* 3 c)) a b (- count 1)))) 
```

并且通过一些尝试和错误，我发现`a`,`b`和`c`应该分别初始化为`2`, `1`, 和`0`，这也遵循`fib`函数初始化的模式`a`和和。所以看起来像这样：`b``1``0``f`

```
(define (f n)
  (f-iter 2 1 0 n)) 
```

注意：`f-iter`仍然是一个递归**函数**，但由于 Scheme 的工作方式，它作为一个迭代**过程**运行并在`O(n)`时间和`O(1)`空间中运行，这与您的代码不同，它不仅是一个递归函数，而且是一个递归过程。我相信这就是练习 1.1 的作者所寻找的。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-04-21T04:22:34.930

我不确定如何最好地在 Scheme 中对其进行编码，但是提高此类速度的常用技术是使用[memoization](http://en.wikipedia.org/wiki/Memoization)。简而言之，这个想法是缓存 f(p) 的结果（可能是每个看到的 p，或者可能是最后 n 个值），以便下次调用 f(p) 时，返回保存的结果，而不是重新计算。通常，缓存是从元组（表示输入参数）到返回类型的映射。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-04-21T04:46:23.297

好吧，如果您问我，请像数学家一样思考。我看不懂方案，但是如果您正在编写斐波那契函数，而不是递归地定义它，解决递归并用封闭形式定义它。例如，对于斐波那契数列，可以在[此处](http://en.wikipedia.org/wiki/Fibonacci_number#Closed_form_expression)找到封闭形式。那会快得多。

编辑：哎呀，没有看到你说放弃摆脱递归。在这种情况下，您的选择会更加有限。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-04-21T04:24:12.820

有关使用函数式编程开发快速斐波那契函数的好教程，请参阅[这篇文章。](http://fare.tunes.org/files/fun/fibonacci.lisp)它使用Common LISP，在某些方面与Scheme略有不同，但您应该可以使用它。您的实现相当于`bogo-fig`文件顶部附近的函数。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-04-22T08:47:12.943

换一种方式：

要获得尾递归，递归调用必须是过程所做的最后一件事。

您的递归调用嵌入在 * 和 + 表达式中，因此它们不是尾调用（因为 * 和 +在递归调用*之后进行评估。）*

Jeremy Ruten 的版本`f-iter`是尾递归而不是迭代（即它看起来像一个递归过程，但与迭代等效物一样有效。）

但是，您可以使迭代显式：

```
(define (f n)
  (let iter
    ((a 2) (b 1) (c 0) (count n))
    (if (<= count 0)
      c
      (iter (+ a (* 2 b) (* 3 c)) a b (- count 1))))) 
```

或者

```
(define (f n)
  (do
    ((a 2 (+ a (* 2 b) (* 3 c)))
     (b 1 a)
     (c 0 b)
     (count n (- count 1)))
    ((<= count 0) c))) 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2011-11-14T21:03:27.910

该特定练习可以通过使用尾递归来解决 - 而不是等待每个递归调用返回（就像您提供的直接解决方案中的情况一样），您可以将答案累积在一个参数中，这样递归的行为就其消耗的空间而言，它与迭代完全相同。例如：

```
(define (f n)
  (define (iter a b c count)
    (if (zero? count)
        c
        (iter (+ a (* 2 b) (* 3 c))
              a
              b
              (- count 1))))
  (if (< n 3)
      n
      (iter 2 1 0 n))) 
```

# php - 使用 PHP 的正则表达式样式 Whois 查找

> ID：771015
> 
> 赞同：1
> 
> 时间：2009-04-21T04:18:26.623
> 
> 标签：php, whois

我最近发现自己在工作中需要创建一个模式匹配的域名搜索。（即，mydomain* 应该匹配 mydomain1、mydomainanotherone 等。）我的平台是基于 Linux（CentOS 5）的 Apache 2 和 PHP。我还安装了 Pear whois 库（除非必须，否则不想使用 exec("whois ~~") 样式）。经过一番搜索后，我发现了一些其他网站，它们提供基于模式的域名搜索，但是，从我可用的开源工具来看，似乎没有一个明显的候选人可以胜任这项工作。

任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-29T16:53:55.497

大多数 whois 服务器会限制您每天或每小时的请求数。因此，除非您可以访问不受限制的 whois 提供商，否则按需执行此操作将很棘手。一个都想不出来

# ajax - OpenId 是否支持 Ajax 登录？

> ID：771029
> 
> 赞同：3
> 
> 时间：2009-04-21T04:24:25.173
> 
> 标签：ajax, login, openid

我计划在我的项目中使用 OpenId，如果我可以通过 Ajax 向 openId 提供者验证用户身份，那就太棒了。我不确定天气有可能吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-04-21T04:26:58.680

看看这个页面 --> [http://openid-demo.appspot.com/](http://openid-demo.appspot.com/)

# jquery - Adobe Air 中的 JSONP 回调

> ID：771034
> 
> 赞同：1
> 
> 时间：2009-04-21T04:27:48.537
> 
> 标签：jquery, air

我无法找到一种从 adobe air 中的 url 取回一些数据的方法。似乎空中存在安全限制，因此无法进行正常回调。所以像：

```
 $.getJSON( requestURL, 
               function(json)
            {
                $('#response').append("working");
            }
          ); 
```

不执行回调。有没有办法解决这个问题？[我确实在http://css.dzone.com/news/jsonp-request-adobe-air](http://css.dzone.com/news/jsonp-request-adobe-air)找到了一些提及这一点和一个可能的解决方案，但这似乎对我不起作用。我可以在普通浏览器中很好地运行代码，但在空中它无法调用 dataFilter 或 sucess 方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-22T01:57:23.070

我想通了，所以我会发布一个答案。感谢 spaz 开源 Twitter 客户端，我从中提取了一些内容。

```
var xhr = $.ajax({ complete: function (xhr, rstr)
    {
        result = xhr.responseText;
        cleanresult = result.substr(result.indexOf('(') + 1, result.lastIndexOf(')') - result.indexOf('(') - 1);
        object1 = JSON.parse(cleanresult);
    },
    error: function (xhr, rstr) { },
    success: function (data) {},
    beforeSend: function(xhr) {},
    processData: true,
    url: requestURL,   
    type: "GET"}
); 
```

这只是返回一个字符串，所以我使用[json2 库](https://github.com/douglascrockford/JSON-js/blob/master/json2.js)将其解析为一个对象，这似乎有效。似乎可以跨域和一切工作。

# php - PHP 相当于 send 和 getattr？

> ID：771036
> 
> 赞同：6
> 
> 时间：2009-04-21T04:29:23.337
> 
> 标签：php, oop, reflection, equivalent, getattr

如果 Ruby 受邀参加派对并带来：

```
foobarobject.send('foomethod') 
```

.. 和 Python 被邀请参加同一个聚会并带来：

```
getattr(foobarobject, 'foomethod')() 
```

.. PHP 必须为聚会带来什么？

**额外的问题：**如果 Ruby 和 Python 嫉妒 PHP 的派对青睐，他们会在 PHP 的文档中搜索哪些英文术语以便在 PHP 背后谈论它？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2009-04-21T04:30:55.953

PHP带来了这个：

```
$foobarobject->{"foomethod"}(); 
```

……还有可乐和薯条。

**编辑**：

尽管上面的术语是[`variable variables`](http://www.php.net/language.variables.variable)在手册中没有专门谈论对对象执行此操作。但是，您可以通过以下方式实现相同的目的[`call_user_func`](http://www.php.net/call_user_func)：

```
call_user_func(array($foobarobject, "foomethod")); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-04-21T05:57:02.767

使用变量来保存方法名称。与 Paolo 的第一个示例几乎相同，但除非您知道，否则可能不那么明显。

```
$method = "foomethod";
$foobarobject->$method(); 
```

您还获得了[反射类](http://php.net/manual/en/language.oop5.reflection.php#language.oop5.reflection.reflectionmethod)。

```
$method = new ReflectionMethod('Foobar', 'foomethod');
$method->invoke(null); 
```

# asp.net - ASP.NET 网格视图编辑

> ID：771038
> 
> 赞同：0
> 
> 时间：2009-04-21T04:30:06.767
> 
> 标签：asp.net, gridview

如何从 RowCommand 事件设置 GridView 的 EditIndex 属性？

干杯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-21T04:39:18.010

您可以使用此代码设置 EditIndex 属性：

```
protected void gridView_RowCommand(object sender, GridViewCommandArgs e)
{
   gridView.EditIndex = gridView.SelectedIndex;
} 
```

# visual-studio - 可以让 Visual Studio 调试 WinDBG 等子进程吗？

> ID：771039
> 
> 赞同：37
> 
> 时间：2009-04-21T04:30:29.387
> 
> 标签：visual-studio, debugging, child-process

这类似于[这个问题](https://stackoverflow.com/questions/448154/automatically-attach-vs2005-debugger-to-a-child-processes)，但我想稍微充实一下。（我是新来的，如果我应该对上一个问题做一个“颠簸”的回答，请告诉我。）

在 WinDBG 中，我可以使用`.childdbg 1`命令告诉它在生成子进程时中断，或者我可以使用`-o`命令行选项启动它。这在某些情况下非常有用，所以令人惊讶的是（据我所知）Visual Studio 不支持它。似乎应该很容易清除`DEBUG_PROCESS_ONLY_THIS_PROCESS`CreateProcess() 上的标志，并且 VS 已经支持调试多个进程。

那么，我是否缺少 Visual Studio 中的某些选项来启用此功能？如果没有，他们为什么选择不支持它有技术上的理由吗？

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2015-05-22T22:01:04.660

现在有一个强大的工具可以让你附加到子进程： [介绍子进程调试电源工具](https://marketplace.visualstudio.com/items?itemName=vsdbgplat.MicrosoftChildProcessDebuggingPowerTool)

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2009-04-21T08:03:49.890

不可能（AFAIK，任何其他人......）但你有几个解决方法：

1.  [使用这个宏](http://web.archive.org/web/20150603120222/http://code.google.com/p/chromium/wiki/WindowsVisualStudioMacros#Automatically_grab_chromium_child_processes)，它来自需要处理大量子进程调试的 Chrome 团队。
2.  将您的子进程放在[图像执行选项](http://blogs.msdn.com/greggm/archive/2005/02/21/377663.aspx)上，以便它们在调试器中自动打开。然后选择 Visual Studio 的当前活动实例。

# sql-server - 如何绕过 Sum(First(...)) not allowed 限制是 SSRS2005

> ID：771040
> 
> 赞同：5
> 
> 时间：2009-04-21T04:30:33.710
> 
> 标签：sql-server, reporting-services, reportingservices-2005

我遇到的问题是 SQL Server Reporting Services 不喜欢 Sum(First()) 表示法。它只允许 Sum() 或 First()。

 **我正在创建对帐报告**的上下文。**IE。我们在一个时期开始时有什么袜子，订购了什么以及我们在结束时有什么库存。**

**数据集返回类似

```
类型、产品、客户、起始库存 (SAS)、订购数量、结束库存 (SAE)
出口,1,1,100,5,90
出口,1,2,100,5,90
国内,2,1,200,10,150
国内,2,2,200,20,150
国内,2,3,200,30,150

```

我按类型分组，然后按产品分组并列出购买该产品的客户。我想显示 SAS、Ordered Qty 和 SAE 的总数，但如果我对 SAS 或 SAE 进行求和，则产品 1 和 2 的值分别为 200 和 600，而产品 1 和 2 应该分别为 100 和 200。

我以为我可以做一个 Sum(First()) 但 SSRS 抱怨我不能在聚合中包含聚合。

理想情况下，SSRS 需要一个 Sum(Distinct())

**到目前为止的解决方案**
1\. 不要将“开始时的库存”和“结束时的库存”显示为总数的一部分。
2\. 直接在报表中写一些代码来进行计算。试过这个 - 没有像我预期的那样工作。3\. 编写程序集进行计算。（这个没试过）

**编辑 - 问题澄清**
问题源于这实际上是两个报告合并为一个（如我所见）。一份生产报告和一份销售报告。
该报告试图解决这些标准

*   我们卖给的市场（出口，国内）
*   我们有多少库存，
*   生产了多少，
*   卖了多少钱，
*   我们把它卖给了谁，
*   我们还剩下多少。

复杂的因素是我们把它卖给了谁。没有它，它会相对容易。但包括它意味着其他顶线数据（开始时的库存和结束时的库存）与销售的东西无关，除了特定的产品。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-04-21T10:29:18.917

我遇到了类似的问题，最终在查询中使用 ROW_NUMBER 为行值提供整数，然后使用 SUM(IIF(myRowNumber = 1, myValue, 0))。

当我开始工作并提供更多数据时，我会对其进行编辑，但我认为这可能足以让您入门。我也很好奇阿道夫的解决方案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-21T06:48:21.163

呸! 我的钉子呢？！

您是否考虑过为此在 SQL 中使用窗口/排名函数？

这使您可以在不丢失细节的情况下聚合数据

例如，想象一下对于一系列值，您希望返回最小值和最大值，但您也希望返回初始数据（没有数据摘要）。

```
Group Value Min Max
A      3    2    9
A      7    2    9
A      9    2    9
A      2    2    9
B      5    5    7
B      7    5    7
C etc.. 
```

语法看起来很奇怪，但它只是

```
AggregateFunctionYouWant  OVER (WhatYouWantItGroupedBy, WhatYouWantItOrderedBy) as AggVal 
```

[开窗](http://msdn.microsoft.com/en-us/library/ms189461.aspx)

[排行](http://msdn.microsoft.com/en-us/library/ms189798.aspx)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-27T03:27:29.477

你的数据集有点奇怪，但我想我明白你要去哪里。

尝试按以下顺序返回数据集：类型、产品、SAS、SAE、客户、订购数量

我要做的是创建一个带有表格控件的报告。我会将类型、产品和客户设置为三个单独的组。我会将 sas 和 sae 数据放在与产品相同的组中，并将数量放在客户组中。这应该类似于我相信你想要的。你的 sas 和 sae 应该在 first()

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-04-21T06:21:07.313

写一个子查询。

> 理想情况下，SSRS 需要一个 Sum(Distinct())

重新编写查询以正确执行此操作。

我怀疑您的问题是您编写的查询会得到错误的结果，或者您的表设计不佳。在不了解您正在尝试做什么的情况下，我无法告诉您如何解决它，但它有一种不好的“气味”。

# wpf - 以编程方式更改控件的位置

> ID：771046
> 
> 赞同：1
> 
> 时间：2009-04-21T04:31:41.023
> 
> 标签：wpf

我有一个这样的 xaml 代码

```
<Grid>
    <Grid.ColumnDefinitions>
        <ColumnDefinition Width="100"/>
        <ColumnDefinition Width="100"/>
    </Grid.ColumnDefinitions>
    <Grid.RowDefinitions>
        <RowDefinition Height="100"/>
        <RowDefinition Height="100"/>
    </Grid.RowDefinitions>
    <Label Content="Test" Grid.Column="1" Grid.Row="1" Height="100" Width="100" FontSize="20" Name="label"/>
    <Button Content="Change" Grid.Column="0" Grid.Row="0" Click="Button_Click"  />
</Grid> 
```

单击按钮时如何更改标签的位置。即，更改标签的行和列。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-06-28T21:09:55.687

除了阿南德的回答，你也可以这样做：

```
Grid.SetColumn(label, 0);
Grid.SetRow(label, 0); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-21T06:27:12.320

像这样使用网格控件 ColumnProperty 和 RowProperty：

```
label.SetValue(Grid.ColumnProperty, 0);
label.SetValue(Grid.RowProperty,0); 
```

# sql-server - 在 SSMS 的工具栏中添加“选择前 1000 个”命令

> ID：771048
> 
> 赞同：1
> 
> 时间：2009-04-21T04:33:46.463
> 
> 标签：sql-server, ssms, sql-server-2008

这些天我经常使用 SQL Server Management Studio (2008)。如果它在工具栏中有一个“选择前 1000 个”命令（或快捷键），它会让我的生活变得更轻松。有什么办法我可以做到。我尝试查看自定义对话框，但在那里找不到该命令。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-08-05T07:40:01.780

步骤如下：

*   导航到工具、选项、环境、键盘
*   选择未使用的查询快捷方式之一
*   在显示“存储过程”的地方输入：

> 选择前 1000 * from

*   您必须打开一个新的查询窗口才能使快捷方式更改生效
*   选择表名时按快捷键

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-21T10:24:13.623

工具、选项、查询执行、常规、SET ROWCOUNT。默认为零 = 无限制。

SET ROWCOUNT 是特定于所有查询的环境。SELECT TOP 是每个查询。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-21T05:38:58.397

SQUirreL 是一个跨平台的 SQL 客户端/数据库浏览器，为此有一个复选框（默认为“前 100 名”）。

# java - Java中的UTF-8到EBCDIC

> ID：771054
> 
> 赞同：16
> 
> 时间：2009-04-21T04:36:00.607
> 
> 标签：java, unicode, utf-8, ebcdic

我们的要求是将 EBCDIC 文本发送到大型机。我们有一些汉字，因此是 UTF8 格式。那么，有没有办法将 UTF-8 字符转换为 EBCDIC？

谢谢，拉杰莫汉

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2009-04-21T06:49:06.013

假设您的目标系统是 IBM 大型机或中型机，它完全支持其 JVM 中内置的所有 EBCDIC 编码，即名为 CPxxxx 的编码，对应于 IBM CCSID（CP 代表代码页）。您需要在主机端进行翻译，因为客户端没有必要的编码支持。

由于 Unicode 是 DBCS 和更高版本，并且支持每个已知字符，因此您可能会针对多个 EBCDIC 编码；所以你可能会以某种方式配置这些编码。尝试让您的客户端仅使用 Unicode（UTF-8、UTF-16 等），并在数据到达主机和/或离开主机系统时完成翻译。

除了需要在主机端进行翻译外，其机制与任何 Java 翻译相同；例如 new String(bytes,encoding) 和 String.getBytes(encoding)，以及各种 NIO 和 writer 类。真的没有什么神奇之处——这与在 ISO 8859-x 和 Unicode 或任何其他 SBCS（或有限的 DBCS）之间进行转换没有什么不同。

例如：

```
byte[] ebcdta="Hello World".getBytes("CP037");  // get bytes for EBCDIC codepage 37 
```

[您可以在IBM 的文档网站](http://publib.boulder.ibm.com/infocenter/systems/index.jsp?topic=/rzaha/charenc.htm)上找到更多信息。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2009-08-17T07:11:54.273

您始终可以使用 IBM Toolbox for Java ( [JTOpen](http://jt400.sourceforge.net/) )，特别`com.ibm.as400.access.AS400Text`是 jt400.jar 中的类。

它是这样的：

```
int codePageNumber = 420;
String codePage = "CP420";
String sourceUtfText = "أحمد يوسف صالح";

AS400Text converter = new AS400Text(sourceUtfText.length(), codePageNumber);
byte[] bytesData = converter.toBytes(sourceUtfText);
String resultedEbcdicText = new String(bytesData, codePage); 
```

我使用了编码**CP420的代码页****420**及其对应的 java 表示，该代码页用于阿拉伯文本，因此，您应该为中文文本选择合适的代码页。

 *** * *

## 回答 #3

> 赞同：6
> 
> 时间：2009-04-21T07:23:32.547

EBCDIC 有许多 8 位代码页。VM 支持它们中的许多。看一下`Charset.availableCharsets().keySet()`，EBCDIC 页面被命名`IBM...`（有别名`cp500`，`IBM500`如您所见`Charset.forName("IBM500").aliases()`）。

有两个问题：

1.  如果您在 EBCDIC 的不同代码页中包含字符，这将无济于事
2.  我不确定这些字符集是否在 Windows 外的任何 vm 中可用。

首先，看看[这种方法](http://www.unicode.org/reports/tr16/)。其次，尝试所需的目标运行时 ;-)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-04-21T14:27:39.950

对于中端 AS/400（这些天是 IBM i），最好的选择是使用 IBM Java Toolkit (jt400.jar)，它透明地完成所有这些事情（可能略有暗示）。

请注意，在 Java 中，字符是 16 位值，而不是 UTF-8（即编码）。

# c# - 如何在 C# 中暂停按钮事件？

> ID：771059
> 
> 赞同：0
> 
> 时间：2009-04-21T04:39:28.150
> 
> 标签：c#, multithreading, events, suspend

在我的应用程序中，我想暂停一个按钮事件一段时间，以便我可以触发另一个事件，之后第一个按钮事件将恢复。在 c# 中，我不知道如何使用线程异步执行它。请帮忙。提前致谢..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-21T04:54:38.613

如果您想触发第二个事件并等待它完成后再继续，那么为什么不从第一个事件处理程序中*同步触发它呢？*那会简单得多。

### 编辑：

如果您希望一个按钮触发另一个按钮的事件处理程序中的代码，我建议您将它移出一个单独的函数，然后调用它。换句话说，这样做：

```
private void button1_Click(object sender, EventArgs e)
{
    DoButtonStuff();
}

private void button2_Click(object sender, EventArgs e)
{
    DoButtonStuff();
}

private void DoButtonStuff()
{
    // code that was originally in button2_Click()
} 
```

如果按钮执行完全相同的操作，您甚至可以为它们分配完全相同的处理程序。

但是，如果您真的必须以编程方式“单击”按钮，那么最简单的方法可能是：

```
button2.PerformClick(); 
```

这将引发一个`Click`事件。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-04-21T05:03:22.133

这听起来像是您的应用程序中的一个设计问题，而您正在从错误的角度解决它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-21T12:10:03.060

你能和后台工作人员做点什么吗

```
background worker bw = new background worker

button1

while bw.inprogress
{

//kill time

}
bw.(dosomething)

button2
{
while bw.inprogress
{
//killtime

}
bw.run(dosomething)
} 
```

# c# - 关闭表单的事件

> ID：771061
> 
> 赞同：1
> 
> 时间：2009-04-21T04:39:47.713
> 
> 标签：c#, forms, event-handling

在 C# 中模拟局域网信使时，我创建了一个线程，用于监听来自局域网上远程主机的广播通知。为了收听广播消息，我调用了 sleep 函数并再次重新启动线程的执行。问题在于，当我关闭表单时，该线程继续运行。关闭表单时是否调用了任何事件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-06-05T21:08:28.057

如果您在侦听器线程上将 .IsBackground 属性设置为 true，那么当您关闭应用程序时它将关闭。

在表单实际关闭之前调用 Form.Closing，之后调用 Form.Close - 您也可以使用其中任何一个来终止线程。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-21T04:57:57.777

您的线程应该等待来自主（表单）线程的信号，而不是 sleep 函数（超时等于您的 sleep 方法的休眠时间）。

处理关闭事件时：

1.  主线程应该设置这个信号并调用`Thread.Join`
2.  另一个线程应该退出循环并完成它的工作
3.  然后主线程继续其关闭表单的工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-21T04:52:34.687

[Form.Closed](http://msdn.microsoft.com/en-us/library/system.windows.forms.form.closed.aspx)怎么样？

# c# - 异步编程的决定因素

> ID：771068
> 
> 赞同：0
> 
> 时间：2009-04-21T04:44:08.967
> 
> 标签：c#, .net, asynchronous

什么可能是异步使用这些方法的决定因素。

我能理解的一个因素是**独立**和并行执行，以节省时间并使用可用资源。

其他因素可能是什么？？？

非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-21T04:51:35.407

在用户界面中提供响应和反馈，以使用户满意并购买更多软件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-21T04:47:40.080

提供反馈并允许取消通话 - 您可以随时优雅地取消通话。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-21T04:48:41.527

慢速输入，异步执行允许您在等待输入完成时进行处理（也允许您响应用户事件）。大多数网络功能都可以通过这种方式实现（通过回调等）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-04-21T06:35:38.463

*   允许用户在执行期间执行其他任务（或取消）
*   允许软件在执行期间执行其他任务
    *   例如。在等待网络或文件系统时使用处理器时间
    *   与需要立即响应的外部进程或设备的通信不会超时。（例如网络响应、外部设备）

最好不要将两个不同的耗时任务同步绑定在一起，例如。网络通信和数据库访问。

另一方面，如果一切都是异步的，软件不会变得更快。它只允许在等待其他人的同时使用资源。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-04-30T23:58:24.047

允许 UI 在长时间运行的进程中保持响应是一大优势。一旦他们在应用程序标题栏中看到可怕的“无响应”，一些用户往往会结束任务。我宁愿显示一个进度条来分散用户的注意力:)。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-05-01T00:07:56.177

需要记住的一件事是，一旦你跨过了异步编程的障碍，你就可以同时做*两*件事以上。

换句话说，从同步编程到异步编程可能会让人望而生畏。然而，一旦你在那里，你可以异步触发*许多*事情并提高程序的效率。

# security - 安全、黑客等方面的好资源？

> ID：771069
> 
> 赞同：9
> 
> 时间：2009-04-21T04:44:35.377
> 
> 标签：security

我有兴趣了解黑客如何发现和利用漏洞。特别是关于 windows hacking 和 web hacking 即我对 linux/unix 的东西不感兴趣。

是否有任何好的网站提供专门关于如何使用代码示例和使用的工具查找、利用和阻止漏洞的技术文章。

我可以快速搜索并且有很多网站，但我正在寻找质量更高的东西，面向具有编程和网络背景的观众。

即使是一本好书，但前提是它是特定于 Windows/Web 的

非常感谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-04-21T12:50:22.230

[Smashing the Stack for Fun and Profit](http://insecure.org/stf/smashstack.html)是 Phrack 关于编写缓冲区溢出漏洞的经典文章。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-04-21T12:46:55.077

Web 开发人员的一个很好的起点是[开放 Web 应用程序安全项目 (OWASP)](http://www.owasp.org/index.php/Main_Page)。他们有很多关于 Web 应用程序安全主题的资源，还有一些关于一般应用程序安全的资源。你可以以[书本的形式](http://stores.lulu.com/owasp)获得那方面的一些智慧。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-09-11T17:46:13.450

For web hacking I recommend reading the book [The Web Application Hacker's Handbook: Discovering and Exploiting Security Flaws](https://rads.stackoverflow.com/amzn/click/com/0470170778) (very good book with lots of examples. It also shows you the tools which will get you started).

Also for web hacking I recommend completing and understanding all the challenges you can solve by downloading the WebGoat

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-04-21T12:32:13.053

我喜欢[Web 安全测试手册](https://rads.stackoverflow.com/amzn/click/com/0596514832)。那里有一些非Windows的东西。重点是测试和使用工具来发现问题。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-04-21T05:33:55.803

我强烈推荐：

[黑客：剥削的艺术](http://www.amazon.co.uk/Hacking-Art-Exploitation-Jon-Erickson/dp/1593271441/ref=sr_1_1?ie=UTF8&s=books&qid=1240291829&sr=8-1)

[灰帽黑客，第二版：道德黑客手册](http://www.amazon.co.uk/Gray-Hat-Hacking-Second-Handbook/dp/0071495681/ref=sr_1_2?ie=UTF8&s=books&qid=1240291829&sr=8-2)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-04-21T04:50:02.353

首先尝试 Simpson Garfinkel[关于网络安全的书](https://rads.stackoverflow.com/amzn/click/com/0596000456)。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2009-04-21T16:20:31.210

订阅[关于安全的 Schneier](http://www.schneier.com/blog/)。这是一个很棒的安全博客。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2011-02-15T10:41:41.337

我认为您需要加入一些黑客社​​区，该社区将提供许多任务，您必须自己找到漏洞利用......明白，如果你学会了黑客，你就必须破解一些东西...... ... www.enigmagroup.org 将是一个有用的... www.securitytube.net 从这里您可以获取几乎所有与安全相关的问题的视频...

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2009-04-21T05:10:44.847

[请参阅http://sectools.org/](http://sectools.org/)上的前 100 个网络安全工具列表。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2009-04-21T05:28:38.017

不要误会我的意思，但如果你真的想了解安全知识，Linux 确实是你要走的路。在那里，您将真正学到基础知识，即在任何地方都很重要的东西（加密、ASM、编程、协议等）。但是，在 Linux 上，您将能够阅读真正的代码并使用/找到真​​正的漏洞利用（当然，发送错误修复）。您还将找到更多文档和一个非常好的社区。

我知道我对 Linux 有偏见，你可能会认为我完全错过了你的问题。但是，我认识我的朋友，他们问我同样的问题，我告诉他们我刚刚告诉你的内容。

一旦你了解了基础，你就可以很容易地找到你想要的文档（阅读 RFC、学习新语言、架构、工具、源代码等）。这比在不了解原因的情况下知道执行漏洞利用的过程要好得多它存在。

最后一件事，最好的黑客不会通过猜测来发现漏洞。他们对底层结构有完美的理解，并且发现了一些错误。然后，一些人利用它，另一些人发送补丁来修复它——这不是争论它的正确地方——然而，他们都是这个领域的专家。

# build - 开发人员应该在沙盒中工作吗？

> ID：771074
> 
> 赞同：3
> 
> 时间：2009-04-21T04:47:38.083
> 
> 标签：build, private

如果开发人员在签入源代码控制之前在其开发环境中执行单元测试，是否应该共享该环境（包括测试失败）？

所有构建都应该公开吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-04-21T04:54:51.013

我认为将开发人员构建公开是不切实际的。您不希望遇到的每个构建失败（单元测试失败）都打扰您的团队成员。

您总是在为某些问题创建解决方案的过程中，并且很可能第一次就无法正确解决，因此单元测试失败会经常发生。特别是如果您采用测试驱动的方法来开发代码：首先编写单元测试并实现功能，这样它就不会再失败了。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-04-21T13:51:40.973

我认为在沙盒中工作是个好主意。它救了我几次。我通常会使用一些不同的虚拟机来进行开发，如果我把它搞砸了，我不必等待我的机器被重建。

我认为不应该公开来自简单开发人员构建的所有测试结果。我并不担心通过公开他们所有的失败来伤害某人的感情，但我担心他们提供的信息没有用。

研究某种类型的系统会很有趣，在这种系统中，开发人员在签入时需要提交通过的测试结果，但我认为即使这样也会推动事情。它可能会产生损害生产力的不利影响。开发人员已经有足够多的非编码工作要做了。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-05-03T19:24:22.060

孩子们应该在沙盒中玩耍；），软件开发人员应该在他们自己的 PC 上玩耍，并在他们觉得代码达到一定质量水平时提交他们的代码。当每个人都定期提交和更新经过测试的小段代码时，我的经验是不会出现严重的问题，只有建设性的反馈，有时有人会大喊大叫。最后将软件发布给公众/客户是另一回事。这需要大量测试、编写发布说明、更新手册、营销等。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-04-21T04:59:32.767

是的，如果可能，开发人员应该在沙箱中工作。默认情况下，任何构建都不应该全部公开。TDD 将导致测试和代码的多次失败和改进。公开共享构建可能很麻烦，但如果其他开发人员足够关心去看看，他们当然应该能够看到某人在做什么。当被要求这样做时，它们应该被公开。如果您要求证明他们测试了某些东西，那么在他们签入代码后运行他们的单元测试应该足以证明。

为开发人员提供环境、工具和自由测试更改的自由将提高软件的稳定性和质量。测试理论和故障排除通常需要小的增量构建。如果沙箱价格昂贵，则应要求他们预留时间来使用它。为每个开发人员提供一个私有沙箱可能会导致他们的代码长时间分支。你问这个的动机是什么？如果开发人员试图隐藏某些东西，那么就要找到该问题的根本原因。如果您想控制成本，请考虑预订模式。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-04-21T05:37:08.400

你从中看到了什么好处？特别是，这意味着每个人都会收到有关每个开发人员每次 picayune 测试失败的电子邮件。

这只会分散大家的注意力。

避免仅仅因为有可能就去做某事的诱惑；让您的需求驱动您的流程。不要仅仅因为可以就创建新流程。

# php - PHP 和 HTTP 标头换行符：用来表示什么字符？

> ID：771077
> 
> 赞同：1
> 
> 时间：2009-04-21T04:48:45.630
> 
> 标签：php, curl, header, line-breaks

我正在遍历一系列 CURL 返回的 http 标头的每一行，试图检测一个结束和下一个开始的时间。我知道 http 标头以空行结尾，但是在 php 中用什么字符来表示这个换行符？我试过了，`\n`但它似乎不起作用。我当然可能做错了什么。

什么字符用于表示用于终止标题的换行符？

这是我现有的代码：

```
$redirect = '';
$regs = '';
foreach ($curl_response as $line)
{   
    if ($line != "\n")
    {   # line is not a linebreak, so we're still processing a header block

        if (preg_match("(HTTP/[0-9]\.[0-9] [0-9]{3} .*)",$line))
        {   # line is the status code
            # highlight the outputted line
            $output .= "<b style='background: yellow;'>$line</b>";
        }

        elseif (preg_match("/^Location: (.*)$/m",$line,$regs)) 
        {   # the line is a location header, so grab the location being redirected to
            # highlight the outputted line
            $output .= "<b style='background: purple; color: white;'>$line</b>";
            $redirect = $regs[1];
        }

        else 
        {   # some other header, record to output
            $output .= $line;
        }

    }

    else 
    {   # we've reached a line break, so we're getting to a new block of redirects
        $output .= "\nreached line break\n";
        if ($redirect != '')
        {   # if we recorded a redirect above, append it to output
            $output .= "\n\nRedirecting to $redirect\n\n";
            $redirect = '';
        }

    }   

}

echo $output; 
```

**已解决**- 原来这`\r`是我应该匹配的。很奇怪。不确定这是否每个站点都会更改，或者是否是 curl 中设置的内容。到目前为止，它`\r`在我尝试过的所有网站上。

**编辑2**：Doh。我认为这是因为为了将标题放入一系列行中，我在`\n`. 所以也许`\r\n`现在只是`\r`...

```
$c = explode("\n",$content); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-04-21T04:56:23.773

您还需要检查“\r\n”和“\r”，因为它们也是有效的终止空行。

> 当采用规范形式时，“文本”类型的媒体子类型使用 CRLF 作为文本换行符。HTTP 放宽了这一要求，并允许传输具有纯 CR 或 LF 的文本媒体，当它对整个实体主体一致完成时，它代表一个换行符。HTTP 应用程序必须接受 CRLF、裸 CR 和裸 LF 作为通过 HTTP 接收的文本媒体中的换行符的代表。

-- [HTTP/1.1: 协议参数 - 3.7.1 规范化和文本默认值](http://www.w3.org/Protocols/rfc2616/rfc2616-sec3.html#sec3.7.1)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-04-21T05:12:14.780

标题以双换行符结束，中间没有空格（即空行）。换行符可以是“\n”、“\r\n”或只是“\r”。尽管后者并不常见，但仍然需要考虑。

也许您可以使用正则表达式找到标题的结尾，例如

```
list($headers) = preg_split('/(\r\n?|\n)(\r\n?|\n)/', $httpresponse); 
```

# eclipse - JFace：使用 ColumnViewerToolTipSupport 可调整大小的工具提示

> ID：771078
> 
> 赞同：4
> 
> 时间：2009-04-21T04:49:49.840
> 
> 标签：eclipse, swt, tooltip, jface

当您将鼠标悬停在任何 Java 元素上时，谁能告诉我如何使用`org.eclipse.jface.viewers.ColumnViewerToolTipSupport`创建类似于 Eclipse IDE 中显示的工具提示？也就是说，我希望工具提示可以调整大小，除了鼠标悬停之外，我还想挂一个 F2 键以按需显示工具提示。

我已经设法将我自己的自定义控件添加到工具提示（a `TableViewer`）中，但是我看不到任何方法/方法可以将工具提示设置为可调整大小并且仅在用户单击某个键（例如 esc 键）时消失。这甚至可能`ColumnViewerToolTipSupport`吗？

我在[http://dev.eclipse.org/viewcvs/index.cgi/org.eclipse.jface.snippets/Eclipse%20JFace%20Snippets/org/eclipse/jface/snippets/viewers/Snippet037FancyCustomTooltips使用了一个示例作为我的参考.java?view=标记](http://dev.eclipse.org/viewcvs/index.cgi/org.eclipse.jface.snippets/Eclipse%20JFace%20Snippets/org/eclipse/jface/snippets/viewers/Snippet037FancyCustomTooltips.java?view=markup)

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2011-07-11T23:51:14.087

当您将鼠标指针悬停在 Java 元素上时，Eclipse 中出现的窗口不是工具提示，而是[InformationControl](http://www.subshell.com/en/subshell/blog/jface-tooltips-via-information-controls100.html)。有关更多信息，请参阅[org.eclipse.jface.text.AbstractInformationControlManager.install(Control)](http://www.javadocexamples.com/java_source/org/eclipse/jface/text/AbstractInformationControlManager.java.html)。我认为它不会立即与表格单元格一起使用，因此您可能必须将一些[ColumnViewerToolTipSupport](http://help.eclipse.org/luna/index.jsp?topic=%2Forg.eclipse.platform.doc.isv%2Freference%2Fapi%2Forg%2Feclipse%2Fjface%2Fviewers%2FColumnViewerToolTipSupport.html)技术与它结合起来。

干杯，马克斯

# c# - Excel日期字段转换问题

> ID：771083
> 
> 赞同：4
> 
> 时间：2009-04-21T04:51:33.970
> 
> 标签：c#, excel

我目前有一个 Excel 表，其中一列是日期格式。

当我打开电子表格时，我看到的是 12/29/09 之类的东西，而程序看到的是 40176。

我发现这是我将列更改为一般文本时出现的值。

我的问题是**如何读取值 12/29/09**而不是 40176 或者如何将 40176 更改为有效日期？

*我的程序在 c# 中必须在 c# 中读入*

* * *

如果有帮助，这是我的连接的示例代码。

```
Microsoft.Office.Interop.Excel.Application excelApp = new Microsoft.Office.Interop.Excel.Application();
string myPath = @"C:\Test.xls";
excelApp.Workbooks.Open(myPath, 0, true, 5, "", "", true, Microsoft.Office.Interop.Excel.XlPlatform.xlWindows, "t", false, false, 0, true, 1, 0);

 Microsoft.Office.Interop.Excel.Sheets sheets = excelApp.Worksheets;
 Microsoft.Office.Interop.Excel.Worksheet worksheet = (Microsoft.Office.Interop.Excel.Worksheet)sheets.get_Item(1);
 excelApp.Visible = true;

 if(((Microsoft.Office.Interop.Excel.Range)excelApp.Cells[r, 1]).Value2 != null)
     DateString = ((Microsoft.Office.Interop.Excel.Range)excelApp.Cells[r, 1]).Value2.ToString(); 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2009-04-21T04:54:34.400

您可以使用[DateTime.FromOADate()](http://msdn.microsoft.com/en-us/library/system.datetime.fromoadate.aspx)将双精度转换为 DateTime 值。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-04-24T16:28:58.470

正如 Reed Copsey 所说，该`DateTime.FromOADate()`方法会将值转换为`DateTime`. 但是，如果您希望将 12/29/09 作为字符串，并且不想进一步操作它，则可以`cell.Text`改用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-01-30T19:36:51.473

使用excel`TEXT(val,format)`函数。

例子：

在单元格 A2 中输入`=today()`，如果您输入单元格 A2，您将得到一个类似 40189 的数字

如果您输入`=TEXT(today(),"mm/dd/yyyy")`，您将获得格式化为文本的今天日期，它看起来像`"01/30/2012"`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-09-12T09:18:40.000

您可以使用**文本**功能。

**句法**

```
Text(Value,FormatText) 
```

**例子**

1）我把 40176 放在一个 excel A2 中 2）然后我在下面的公式中引用它

```
 =TEXT(A2,"mm/dd/yy") 
```

在 A3 上

然后值是 2009 年 12 月 29 日。就像你问的那样

**警告：**

如果你放单引号而不是双引号，它可能不起作用

# html - 我知道 HTML；我现在应该学习什么网络编程语言？

> ID：771087
> 
> 赞同：2
> 
> 时间：2009-04-21T04:53:38.880
> 
> 标签：html, editor

到目前为止，我已经通过在 Publisher 97 中编码和使用 W3-Schools 自学了 HTML。我已经学习了少量的 CSS 和 PHP。

*学习HTML后我应该学习什么？*

什么是我要做的最好的编辑器？（Windows，Linux）

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-04-21T04:55:17.253

学习 CSS 和 JavaScript（使用框架）。我会从[jQuery](http://jquery.com/)开始。

我使用 Visual Studio。您可以下载[免费快递版](http://www.microsoft.com/express/vwd/)。此外，[Aptana](http://aptana.com/)是一个很好的 IDE。其他类似 Windows 的 Textmate 克隆：[E - TextEditor](http://www.e-texteditor.com/)

如果您正在寻找像记事本一样简单但具有一些语法突出显示的东西，请查看[Notepad++](http://notepad-plus.sourceforge.net/uk/site.htm)

一定要获得[Firebug](https://addons.mozilla.org/en-US/firefox/addon/1843)，这是用于调试 HTML/CSS/JavaScript 的 FireFox 插件。

祝你好运！

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2009-04-21T05:01:36.943

首先，在您提到的所有语言（HTML、CSS 和 PHP）中，只有 PHP 是一种编程语言。其他的是标记语言（好吧，CSS 是一种样式表语言）。

如果您已经使用了一点 PHP 并且喜欢它，为什么不尝试学习更多 PHP？

*   您需要的所有软件都是免费的
*   关于它的信息量惊人，因为有很多人在使用它
*   文档很好
*   对初学者来说很容易上手
*   您获得的任何网络托管帐户都可能支持它
*   它非常适合开箱即用的 Web 应用程序（嗯，与我猜的 Perl/Python/Ruby 之类的东西相比）

您不必完全致力于任何一种语言；如果您发现将来想从 PHP 分支出来，您可以。但是 PHP 编程方面也有很多工作。

至于编辑器，请选择舒适的东西。不要为使用哪个编辑器而苦恼很长时间。如果您不知道，并且想要一些免费的东西，也许只需选择 Notepad++ 并完成它。它很好，免费，不需要太多设置。在您真正习惯编码之前，不要过多担心选择您的编辑器，因为只有这样您才能更好地了解您在编辑器中真正需要什么。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-04-21T04:55:37.953

学习 JavaScript。

在 Windows 记事本中是你最好的朋友（如果你想要干净的代码）。

如果您想要语法高亮，请尝试使用 Notepad++。根据我的经验，我会说永远不要使用为您生成 HTML 的编辑器。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-04-21T05:32:13.950

我觉得编辑的问题没有得到完全解决。许多与此相关的答案都非常以 Windows 为中心，因此请允许我从更广泛的背景角度讨论文本编辑器。我承认我的偏见：我使用 OS X，我喜欢 Linux，我使用 vim，有时我喜欢 emacs。我不太喜欢 IDE，也不喜欢使用闭源软件，尽管我承认我从来没有深入研究过我使用的源代码。不过，我总有一天会的。我发誓。

*   Linux 的权威文本编辑器是**vim**和**emacs**，这两者都经常在命令行中使用，但两者都有相当出色的图形版本。我个人是一个 vim 人，但是我的 GUI 适合我的本地环境（OS X），我真的很喜欢 emacs（嗯，Aquamacs），尤其是对于 Perl。我个人发现 vim 更易于使用，无论是作为命令行编辑器还是作为 IDE，但我从来没有将 emacs 用作命令行编辑器的感觉。作为奖励，emacs 和 vim 都适用于 Windows，并且在基于 Unix 的平台上几乎无处不在。两者都具有大多数主要语言的语法突出显示，并且是完全可扩展的，因此您可以找到许多语言的语法定义，甚至可以相当快地编写自己的语法定义。建议你两个都看一点，找到你最喜欢的一个，好好学习。Emacs 在 GNU GPL 下是开源的，
*   **很多人会称赞Eclipse**的优点**用于编程的 IDE，尤其是在 Java 中。Eclipse 是一个成熟的 IDE，不像 vim 和 emacs，它们的开销很小，并且允许您像编写大型应用程序一样轻松地编写一个快速的 shell 脚本，有些人觉得这对他们的工作有点麻烦，但它非常适合其他人。这取决于你跌倒在哪里。在 Web 开发中，您可以选择任何一种方式。作为 Unix 传统，我更喜欢精简的文本编辑器而不是大型 IDE，但一些来自 Windows 背景的人更喜欢 IDE 的功能。Eclipse 为 Java 以及许多其他流行语言和/或语法与 Java 非常相似的语言提供了良好的语法高亮显示。期望良好的 C 和 C++ 突出显示，以及可能良好的 Perl 和 PHP 突出显示。Eclipse 在许可下是开源的，其版权条款比 GPL 更弱，并且更加“商业友好”**
***   **Notepad++**是一款出色的 Windows 文本编辑器。当我不得不在 Windows 上做少量工作时，我真的很喜欢使用它，它让我花在 Windows 机器上的时间几乎很愉快（我完全承认我的偏见）。它与整个 Windows 的“感觉”配合得很好，几乎与 OS X 程序一起工作一样，它支持*很多*语言（尽管我只能证明 Perl 的质量）。唯一（在我看来，最大的可能）缺点是它仅适用于 Windows。从理论上讲，您可以使用 Wine 在 Linux 上运行它，但我不能说 Wine 是此类问题的最佳解决方案（尽管如果它适合您，那就去吧）。Notepad++ 在 GNU GPL 下是开源的。*   许多人喜欢**Visual Studio**。我对 Visual Studio 最大的不满是它是闭源的，但我没有亲自尝试过，因为我几乎从不使用 Windows，所以我既不能赞美它的优点，也不能谴责它的缺点。我确信这是一个很棒的 IDE，我只是不喜欢 IDE，也不喜欢闭源软件。有些人认为它是 Windows 上最好的编辑器，所以我不能完全不提它。我能说的就是问问别人。**

 **这变得越来越大，所以我要继续发布这个。这绝不是可用于 Windows 和 Linux 的文本编辑器的明确列表，只是我所知道的一些更流行的编辑器的概要。如果有人注意到我忘记了任何重要的内容，请发表评论，我可能会添加它。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-04-21T05:40:33.213

姜戈！试一试 :) 您将学习一个非常酷的 Web 框架，以及作为副作用的 Python 编程语言（恕我直言，这是一种每个人都应该学习的语言）。我建议你开始一个小的网络项目。你将学习/练习 html、css、django（和 python）。:)

对于 IDE，我想这是更多的个人选择。当我在 python 中破解时，我在 Linux 上使用 Vim。但是，我开始非常喜欢 Eclipse.. 它是一个多平台（Windows、Linux、..）/多/语言（Scheme、Java、Python、C++、..）。此外，它还有许多非常有用的插件。

玩 django 玩得开心 :D

（当然，Ruby 也很酷，但我还是更喜欢 django :D）

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-04-21T05:45:50.377

请不要忘记学习 Web 应用程序设计的原则。诸如与数据库耦合、身份验证、跨站点脚本等安全原则之类的事情。

如果您决定使用 Ruby，您可能还想评估一些 Web 编程框架，例如[Zend Framework](http://framework.zend.com)（如果您想用 PHP 编程）或 Ruby on Rails。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-04-21T05:48:47.733

首先学习 PHP，因为使用它创建动态站点会很有趣，一旦你开始尝试一些 javascript，然后进入 Ajax，这应该涵盖了今天制作动态站点的基本知识。

此外，如果你有时间，你可以学习使用框架，无论是 CSS 框架（Blueprint、960 等）、PHP 框架（CakePHP、CodeIgniter 等）和 Ajax 框架（Mootools、YUI、Ext 等）。

当然它会加速你的发展。

除此之外，如果你有桌面编程经验，你可以选择 ASP.NET，最重要的是算法和你如何解决问题，编程语言只是你大脑的一些工具。

一个建议，先尝试学习一件事，然后再学习另一件事，一次学习多种编程语言会让你头疼:D（除非你很快就采用了新语言）。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-04-21T06:30:56.290

Javascript imo 是 Web 开发的未来。
浏览器变得越来越有能力运行复杂而冗长的代码。最终用户真的很喜欢这样一个事实，即您不必等待查看网页，即使您必须等待，您仍然不必重新加载整个页面。
对我来说，AJAX 是要走的路，彗星是未来。
我推荐[dojo](http://www.dojotoolkit.org)，目前它是[大多数浏览器上最快的 javascript 框架](http://alex.dojotoolkit.org/2009/03/dojo-13-is-out/)。您甚至可以使用 JSON-RPC 或支持它的 java 服务器在服务器端运行 javascript。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2009-04-21T06:37:50.627

我将从安装 WAMP（Windows Apache MySQL PHP）开始，然后自学 PHP 和一些基本的 SQL。在学习 PHP 时，您会发现您可以轻松构建 HTML，并且还可以使用 Javascript（客户端脚本）补充您的脚本以获得额外的功能，例如。ajax，以及用于设计部分的 CSS。

[你会注意到我在这里注意到的所有缩写在w3schools](http://www.w3schools.com)都有自己的部分。我认为与许多其他语言相比，它们的学习曲线更容易/更容易，并且是一个很好的语言基础。

WAMP 或 LAMP（如果您使用 Linux）很容易作为捆绑包安装（只需 google 即可），并且我建议使用例如[NetBeans](http://www.netbeans.org)或[Eclipse](http://www.eclipse.org)作为 IDE 。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2009-04-21T06:48:23.957

正如这里很多人所说：

继续学习更多关于 php 的知识。

好的编辑器是 Notepad++ (winodws) aptana (windows, linux)。

一个基本的开箱即用（至少在 Windows 上开箱即用）网络服务器，包括 mysql 服务器（最后使用 php 的数据库）是 xampp aka lampp（用于 linux）。

我提到的所有产品都有很好的文档，可以干净安装。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2009-04-21T22:37:48.370

这里有很多 PHP 的爱 - 有一个替代方案是一个非常好的替代方案。查看 C#。使用免费的 Visual Studio Express IDE，您可以使用任何 Windows 计算机对 asp.net 网站进行编程。生成的站点也可以在 Linux Web 服务器上运行，因为它们支持 .NET 运行时（又名 XSP）的单声道实现。PHP 很酷，但其中一些功能仍然让人想起旧的 Web 开发方法。

我还听说 Ruby on Rails 非常适合初学者。Java/JSP 也是一个很好的学习框架。

当我第一次学习时，我为自己做的是下载每个框架，购买一本关于每个框架的书，然后通过这本书学习每个产品的基础知识。然后，我能够自己决定应该学习什么。我最终选择了 ASP.NET。此外，您还需要学习 MySql、MS SQL Server、Oracle 等数据库技术……祝您好运。

PS - 在我看来，最好的编辑器（IDE）在 Visual Studio 系列中。我也使用记事本++。但同样 - 它还取决于您正在谈论的平台/语言。对于Ruby，我不确定，也许是eclipse。对于 Java，它可以是 Netbeans 或 Eclipse。对于任何 Microsoft 相关技术，绝对是 Visual Studio。全方位的功能和生产力助推器是 Visual Studio IMO。

# asp.net - 将数据传递给 asp.net 中的用户组件

> ID：771096
> 
> 赞同：0
> 
> 时间：2009-04-21T04:56:00.963
> 
> 标签：asp.net, controls, viewstate

这里是 .net 2.0，而不是 MVC，我对 asp 表单很讨厌。

我有一个带有用户控件的页面。当我单击页面中的某些内容时，我想根据页面中的参数加载用户控件。

我做不到。

在我的页面的 FaultTree_Clicked 中，我得到了值，然后：

*   我尝试在子用户控件上公开一个属性来设置我在 FaultTree_Clicked 中设置的值，但它被遗忘了。

*   我尝试将其保存到 Session["mykey"]，并在控件的 Page_init 中加载 Session["mykey"] ......该值为空白。

*   我尝试将其保存到 ViewState["mykey"]，并在控件的 Page_init 中加载 ViewState["mykey"] ......该值为空白。

编辑：更具体的信息：

这是页面（MyFault）的简化版本：

```
<form id="form" runat="server">
 <div id="faulttree">
   <asp:TreeView ID="FaultTree" ......>
 </div>
 <uc1:_DefectDetail ID="DefectDetail" runat="server" Visible="true" EnableViewState="true" />
</form> 
```

在“FaultTree_SelectedNodeChanged()”后面的页面代码上有一个方法。

当该方法被命中时，我想加载/显示 DefectDetail 控件。DefectControl 需要一个故障ID，它来自树，我在 SelectedNodeChanged 方法中成功获得了它。我无法将 faultid 放入缺陷控制中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-21T05:01:58.173

这与 ASP.NET 页面生命周期有关。当 click 事件触发时，控件的 init 事件已经发生。

为了更好地帮助您，请提供更详细的说明，说明什么是 FaultTree 控件，期望的结果是什么以及一些示例代码。

**更新：**

除了公共属性，您可以简单地在控件中创建一个公共方法来执行所需的操作并从`FaultTree_SelectedNodeChangeEvent`.

示例（对于名为 Refresh 的公共方法）：

```
_DefectDetail.Refresh(object data); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-21T05:08:52.400

基本上你必须使用 EventHandlers....

```
 1\. Add a event handler to your user control (I had a search bar UscSearchCriteriaBar1)      

        public event EventHandler CriteriaChanged;

        +

        private void InternalOnCriteriaChanged()
        {
        OnCriteriaChanged();
        }
        +
        protected virtual void OnCriteriaChanged()
        {
        // If there are registered clients raise event
        if (CriteriaChanged != null)
        CriteriaChanged(this, EventArgs.Empty);
        }
        +
        Example
        public int EmployeeID
        {
        get
        {
        f (Session["EmployeeID"] != null)
        {
        ViewState["EmployeeID"] = Convert.ToInt32(Session["EmployeeID"]);
        }
        if (ViewState["EmployeeID"] == null)
        ViewState["EmployeeID"] = 0;
        return int.Parse(ViewState["EmployeeID"].ToString());
        }
        set
        {
        ctlEmployee.SelectedValue = value.ToString();
        ViewState["EmployeeID"] = value;
        Session["EmployeeID"] = value;
        }
        }

        In your page or other control

        override protected void OnInit(EventArgs e)
        {
        InitializeComponent();
        UscSearchCriteriaBar1.CriteriaChanged += new EventHandler(this.CriteriaChanged);    
        base.OnInit(e);
        }

        private void CriteriaChanged(object sender, EventArgs e)
        {
        try
        {
RefreshData();
        }
        catch (Exception ex)
        {
        ExceptionManager.Publish(ex);
        }
        }

    You can get UscSearchCriteriaBar1.EmployeeID 
```

这段代码应该给你一些想法......为 1.1 完成的应该适用于 2。

# c - 更改 const 指针的值

> ID：771100
> 
> 赞同：5
> 
> 时间：2009-04-21T04:58:02.910
> 
> 标签：c, pointers, constants

我有以下代码：

```
void TestFunc(const void * const Var1, const float Var2)
{
  *(浮点数*)Var1 = Var2;
}

```

看起来我正在更改 const 指针指向的 const 对象的值（感谢Sharptooth），这是不允许的。事实上，我试过的编译器都没有发出警告。这怎么可能？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2009-04-21T05:06:51.033

正如其他人所提到的，就表达式而言，演员表删除了目的地的“恒定性”。当您使用强制转换时，编译器会根据强制转换处理表达式 - 只要强制转换本身有效（并且 C 风格的强制转换几乎是大锤子）。这就是您没有收到错误或警告的原因。你本质上是在告诉编译器，“保持安静，我知道我在做什么，这就是你应该如何对待事情的方式”。事实上，强制转换可能是程序员让编译器停止发出警告的#1 方式。

您的赋值表达式可能是也可能不是未定义的行为。**如果**实际指向的对象不是 const ，则允许丢弃const。

但是，如果指向的对象是 const，那么您有未定义的行为。

```
void TestFunc(const void * const Var1, const float Var2)
{
  *(float*)Var1 = Var2;
}

int
main(void)
{
    float x = 1.0;
    const float y = 2.0;

    TestFunc( &x, -1.0);    // well defined (if not particularly great style)
    TestFunc( &y, -2.0);    // undefined behavior

    return 0;
} 
```

你踏入危险的水域...

一般来说（我确信有例外），C/C++ 中支持强制转换以便表达式处理对象的真实情况，这是定义良好的行为。

这种特殊行为在标准中主要由通过删除 const 限定符的强制转换（或其他东西）修改 const 对象的语句覆盖，这是未定义的。推论是对非常量对象做同样的事情并不是未定义的。C++ 标准中给出的一个例子清楚地说明了这一点。

C90 6.5.3 - 类型限定符 (C99 6.7.3)：

> 如果尝试通过使用具有非 const 限定类型的左值来修改使用 const 限定类型定义的对象，则行为未定义。

C++ 7.1.5.1 cv 限定符

> 指向 cv 限定类型的指针或引用不需要实际指向或引用 cv 限定对象，但它被视为好像确实如此；即使引用的对象是非常量对象并且可以通过其他访问路径进行修改，也不能使用 const 限定的访问路径来修改对象。[注意：类型系统支持 cv 限定符，因此如果不进行强制转换（5.2.11），它们就不能被颠覆。]
> 
> 除了可以修改任何声明为 mutable (7.1.1) 的类成员外，任何在 const 对象的生命周期 (3.8) 期间修改它的尝试都会导致未定义的行为。
> 
> ...
> 
> [例子：
> 
> ...
> 
> ```
> int i = 2;            //not cv-qualified
> const int* cip;       //pointer to const int
> cip = &i;             //OK: cv-qualified access path to unqualified
> *cip = 4;             //ill-formed: attempt to modify through ptr to const
> 
> int* ip;
> ip = const_cast<int*>(cip);   //cast needed to convert const int*to int*
> *ip = 4;                      //defined: *ip points to i, a non-const object
> 
> const int* ciq = new const int (3);   //initialized as required
> int* iq = const_cast<int*>(ciq);      //cast required
> *iq = 4;                              //undefined: modifies a const object 
> ```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-04-21T05:00:11.017

您更改指针指向的对象，而不是指针值。

C 风格的强制转换类似于 const_cast 并从指针中删除*const*修饰符。编译器现在没有什么可抱怨的了。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-21T05:00:02.593

演员表是合法的，但行为是未定义的。

# visual-c++ - 如何将控件移动到 MFC 窗体的中间？

> ID：771109
> 
> 赞同：1
> 
> 时间：2009-04-21T05:04:45.047
> 
> 标签：visual-c++, mfc

如何在 VC++ 6.0 MFC 项目中将控件移动到窗体的中间？

假设我添加了一个 EditBox(m_editcontrol)，如何将这个控件移动到窗体的中间？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-04-21T05:12:01.800

```
CRect rectParent;
m_editcontrol.GetParent()->GetClientRect(rectParent);
CRect rectControl;
m_editcontrol.GetWindowRect(rectControl);
m_editcontrol.MoveWindow((rectParent.Width()-rectControl.Width())/2, (rectParent.Height()-rectControl.Height())/2, rectControl.Width(), rectControl.Height()); 
```

控件的位置在父窗口的客户区内，所以首先我们需要获取父窗口的宽度和高度。然后，我们得到控件的宽度和高度。父窗口的中间是宽度和高度的差除以2。MoveWindow 用于将窗口移动到所需位置。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-04-21T05:14:12.747

在 VC6 资源编辑器中，您可以选择控件并按 Ctrl+F9 进行垂直居中，按 Ctrl+Shift+F9 进行水平居中。

以编程方式，您可以使用 MoveWindow Win32 API 将控件放置在您想要的任何位置。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-10-14T10:26:05.573

```
CRect rectParent;
m_pParentWnd->GetClientRect(rectParent);
m_pParentWnd->ClientToScreen(rectParent);
CRect rectControl;
GetWindowRect(rectControl);
MoveWindow(rectParent.left + (rectParent.Width()-rectControl.Width())/2, rectParent.top + (rectParent.Height()-rectControl.Height())/2,
    rectControl.Width(), rectControl.Height()); 
```

# c - 我应该怎么做才能在 C 中修改我的 fork() 以使其运行良好？

> ID：771115
> 
> 赞同：0
> 
> 时间：2009-04-21T05:07:14.120
> 
> 标签：c, fork, signals, kill

我不明白为什么我的代码不起作用。

这是我的代码。我不知道为什么我得到一个错误段。有人可以向我解释原因吗？

```
#include <iostream>
#include <string>
#include <sys/types.h>
#include <unistd.h>

int id_process;

void manager_signal () {
    kill (id_process, SIGKILL);
    kill (getppid(),SIGKILL);
}

int main () {
    id_process = fork ();
    if (id_process==-1) {
        perror("ERROR to create the fork");
    } else {
        if ( id_process != 0 ) {
            printf("Father´s ID is %d \n", getpid());   
            alarm(5);
            (void) signal (SIGALRM, manager_signal);
            sleep (20);
            printf ("Running to where the father can be\n");
            alarm (0);          
        } else {
            printf ("CHildren´s ID is %d \n", getpid ());
            for (;;) {
                printf ( "Children RUN FOREVER ^^");
                sleep (2);
            }
        }
    }
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-21T05:12:47.400

您的问题有点难以理解，因为您并没有真正解释错误是什么，但我确实有一个问题，我确信这将是相关的。

为什么“父亲”进程杀死了它的孩子和它的*父母*？它不应该杀死它的孩子和自己（`id_process`而`getpid()`不是`getppid()`哪个是父PID）吗？

这似乎是问题所在。当我在 Cygwin 下运行它时，它会杀死我的外壳（真烦人）。如果我将其更改为`kill (getpid(),SIGKILL);`，它会在五秒钟后正常终止，并显示以下输出：

```
$ vi qq.cpp ; g++ -o qq qq.cpp ; ./qq.exe
Fathers ID is 6016
Childrens ID is 4512
Children RUN FOREVER ^^
Children RUN FOREVER ^^
Children RUN FOREVER ^^
Children RUN FOREVER ^^
Children RUN FOREVER ^^
Killed 
```

这是与程序修改如下：

```
#include <iostream>
#include <string>
#include <sys/types.h>
#include <unistd.h>

int id_process;

void manager_signal (int x) {
    kill (id_process, SIGKILL);
    kill (getpid(),SIGKILL);
}

int main () {
    id_process = fork ();
    if (id_process==-1) {
        perror("ERROR to create the fork");
    } else {
        if ( id_process != 0 ) {
            printf("Fathers ID is %d\n", getpid());
            alarm(5);
            (void) signal (SIGALRM, manager_signal);
            sleep (20);
            printf ("Running to where the father can be\n");
            alarm (0);
        } else {
            printf ("Childrens ID is %d\n", getpid ());
            for (;;) {
                printf ( "Children RUN FOREVER ^^\n");
                sleep (1);
            }
        }
    }
    return 0;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2010-02-09T07:32:44.870

我不认为

```
 kill (id_process, SIGKILL); 
```

也是必需的。您将在下一条指令中杀死相同的进程。

# sql - 如何将 mm/dd/yyyy 更改为所需格式

> ID：771121
> 
> 赞同：1
> 
> 时间：2009-04-21T05:11:36.480
> 
> 标签：sql, sql-server, sql-server-2005, tsql, datetime

我的日期格式为 mm/dd/yy。例如：4/1/2009 表示 2009 年 4 月 1 日。我想在 sql 中获取格式为 2009 年 4 月 1 日。有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-04-21T05:16:01.370

使用转换功能。

[http://msdn.microsoft.com/en-us/library/ms187928.aspx](http://msdn.microsoft.com/en-us/library/ms187928.aspx)

看起来格式 107 是您想要的格式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-21T13:14:07.507

```
declare @d datetime
select @d = '20090401'

select convert(varchar(50),@d,107) 
```

will give you this

Apr 01, 2009

If you want 1 instead of 01 do this

```
declare @d datetime
select @d = '20090401'

select replace(convert(varchar(50),@d,107),' 0',' ') 
```

Apr 1, 2009

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-21T06:01:06.080

这应该做你想要的。

```
DECLARE @date datetime
SET @date = getdate()
SELECT datename(day,@date) + ' ' + left(datename(month,@date),3) + ' ' + datename(year,@date) 
```

# ruby-on-rails - 如何使用 link_to 链接到不同的控制器和模型？

> ID：771128
> 
> 赞同：0
> 
> 时间：2009-04-21T05:15:13.993
> 
> 标签：ruby-on-rails

我目前有以下 for 循环。这是在' `view/vendor/show.html`'。

我设置了一个' `vendor :has_many :reviews`'，这是for循环：

```
<% for review in @vendor.reviews %>

    <%= review.user_id %>
    <%= review.summary %><br />

    <%= link_to 'More', @review%>

    <hr class="left span-5" />

<% end %> 
```

对于`link_to`我希望它链接到 URL：reviews/:review_id

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-21T16:01:28.773

你的代码现在不起作用，

```
link_to 'More', @review 
```

您只想查看（不带@）@review 未在代码中的任何位置定义。

假设您的路线设置正确，

```
link_to 'More', review 
```

应该足够了。当然，Brian 的代码做同样的事情（同样，虽然没有 @）。如果您直接使用对象（使用多态路由）或使用 brian 的对象，Rails 可以自动找出正确的路径：

```
link_to 'More', review_path(review) 
```

与 review_path(review.id) 相同 Rails 自动获取被引用对象的 id

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-21T05:31:58.337

```
<%= link_to "More", review_path(@review) %> 
```

# c# - 从不同的线程操作线程

> ID：771134
> 
> 赞同：2
> 
> 时间：2009-04-21T05:16:58.357
> 
> 标签：c#, multithreading

在 c# 的程序中，除了主线程之外，我还有 2 个线程。当用户关闭表单时，我想从主线程终止其中一个线程。我该怎么做呢？如果可能，请向我提供代码。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-04-21T05:25:09.647

到目前为止，请*不要*按照其他答案的建议使用，除非您希望您的程序处于未知状态（有关更多信息，请参阅[Ian Griffiths](http://www.interact-sw.co.uk/iangblog/2004/11/12/cancellation)和[Chris Sells](http://www.ondotnet.com/pub/a/dotnet/2003/02/18/threadabort.html)的文章）。如果关闭表单实际上应该杀死应用程序，你*可能*没问题 - 但在这种情况下，我建议只使用后台线程，当所有前台线程终止时，它会自动死亡。`Thread.Abort`

 *来自 Joe Duffy 的[“Windows 中的并发编程”](https://rads.stackoverflow.com/amzn/click/com/032143482X)：

> 在两种情况下线程中止总是安全的：
> 
> *   线程中止的主要目的是在 CLR AppDomain 卸载期间拆除线程。[...]
> *   同步线程中止是安全的，前提是调用者希望从方法中抛出异常。[...]
> 
> 线程中止的所有其他用途充其量是值得怀疑的。[...] 虽然线程中止在理论上比其他线程终止机制更安全，但它们仍然可能在不合时宜的时间发生，如果不小心使用会导致不稳定和损坏。

（同步线程中止是指线程自身中止，而不是被另一个线程中止。）

对于*正常*关闭（不冒进入奇怪状态的风险），使用从表单中定期设置并从其他线程检查的标志 - 考虑内存模型（例如，使标志易失或在每次测试时使用锁定或设置它）。有关示例，请参阅我[关于该主题](http://pobox.com/~skeet/csharp/threads/shutdown.shtml)的文章。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-04-21T05:37:47.073

从其他线程中杀死线程几乎*总是*一个坏主意。正确的做法是通知线程终止，然后等待它。

这是因为线程应该尽可能地对自己的资源完全负责，这包括它们的生命周期。

It doesn't need to be complicated, a simple variable which can be set by any thread and is read by another thread periodically will do (this isn't really in any language but you should get the idea if you know C):

```
int exitThread1 = false;
static void Thread1 (void) {
    while (!exitThread1) {
        // do stuff
    }
}
static void mummyProc (void) {
    int tid1 = startThread (Thread1);
    // dum de dum de dum ...
    exitThread1 = true;
    joinThread (tid1);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-21T05:21:36.333

如果你想杀死一个你自己开始的线程，我建议你持有一个对它的引用，比如一个私有字段。当应用程序（或线程）完成时，您可以简单地调用`Thread.Abort()`该线程。

例如：

```
private Thread _myWorker;

void doSomething()
{
    _myWorker = new Thread(...);
    _myWorker.Start();
}

void killWorker()
{
    _myWorker.Abort()
} 
```

您应该注意，然后您调用`Abort()`线程它将引发 ThreadAbortException，您应该在工作代码中捕获并处理清理等。有关更多详细信息，请参阅[Thread.Abort](http://msdn.microsoft.com/en-us/library/ty8d3wta.aspx)

此外，当您的应用程序关闭其主线程（消息循环，也称为 Application.Run）时，子线程也将被关闭。

# programming-languages - 您会将 COBOL 程序移植到哪种语言，为什么？

> ID：771136
> 
> 赞同：4
> 
> 时间：2009-04-21T05:18:14.907
> 
> 标签：programming-languages, porting, cobol

在选择一种语言来移植 COBOL 程序时，您会选择哪种语言，为什么？我不是在寻找答案“因为我熟悉 X 语言”。

我正在寻找一种能够很好地映射到 COBOL 设计的语言的功能。

**更新：**这些程序将运行到实用程序、数据处理、屏幕等。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-04-21T05:26:50.687

我会将它们移植到……嗯……COBOL。对，就是那样。COBOL。

对不起，无法抗拒。

说真的，目前有适用于当前平台的 COBOL 编译器，除非我们更多地了解为什么必须移植代码，否则*我们*可能无法提供帮助。

它运行的平台是否已过时？管理层是否只是在推动更“现代”的解决方案？您是否必须将东西从 System z 转移到 Windows（啊！）？

COBOL（以其最纯粹的形式，而不是 OO-COBOL 垃圾）主要是一种简单的过程语言（尽管有 ReportWriter），因此可以很好地翻译成任何其他过程语言：

*   C。
*   没有类的 C++
*   Java，虽然你不能避免类，除非你有一个大的单身汉。
*   Pascal（将一种“死”语言换成另一种）。
*   甚至 Python、Perl 等也可以工作。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-04-21T05:23:12.663

好吧，您应该考虑 COBOL 程序通常会得到什么输入。

COBOL 旨在处理大量固定宽度的格式化文本作为输入，以几乎相同的方式输出。对我来说，这听起来更像是一个 ETL 过程。

所以我不会将 COBOL 程序简单地移植到另一种语言；我会将它移植到合适的 ETL 技术，例如 SQL Server 集成服务 (SSIS) 或至少它的前身 DTS - SQL 数据转换服务。SSIS 暗示使用 VB.NET（至少在 SQL Server 2005 中），但这应该不是问题。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2018-05-12T20:51:57.417

第一个必须是为什么必须移植COBOL？COBOL 是一种功能强大的历史悠久的语言，与任何其他语言相比，它很可能在生产中仍然有更多的代码行来运行工资单、会计等。

最不痛苦的端口是 Synergy DBL。这是 DIBOL（面向数字业务的语言）的高度可移植的 VM 样式更新。

[http://www.synergex.com/synergy-dbl/](http://www.synergex.com/synergy-dbl/)

DIBOL 使用了 BASIC、FORTRAN 和 COBOL 中所有好的部分，而忽略了大部分不好的部分。

如果您按照上面的链接，您会看到他们有 GUI、.NET 和其他增强工具。只要确定您将在其上运行的任何目标操作系统都有一个 VM。

大量使用 CICS、TCAM、IDMS 等的 IBM 大型机 COBOL 将成为其他任何东西的一个非常艰难的端口。

如果没有屏幕处理包，OpenVMS COBOL 使用 DECForms 甚至可能是 FMS 将是一个艰难的端口。来自这些商店的非常旧的 COBOL 将大量使用操作系统提供的系统服务和运行时库例程，这些例程在大多数其他平台上都不可用。您还必须阅读逻辑并弄清楚如何在您的目标上实现一些足够接近的东西。

对于大多数大型机和中型 COBOL，您会发现您不只是在移植 COBOL。将有大量旧 COBOL 使用的系统服务。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-04-21T06:20:15.847

我对 COBOL 了解不多，但我不认为当前的语言是它的直接超集（因此，将 COBOL 直接映射到该语言并不容易）。我看到几个问题：

1.  对十进制算术的内置支持——这排除了任何没有运算符重载的现代语言。

2.  更好地支持结构化记录 - 可以使用 C 中的 struct/union 组合，但我认为它有时会使标识符变得很长（至少对于我见过的程序）。

3.  Goto 语句 - 没有它，在重写程序时必须完全分析程序的逻辑。

可能还有其他不容易映射的特征。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-04-06T22:08:15.460

*   我不得不说你不应该移植 COBOL。
    *   如果您的意思是*rewrite*，那么是的，选择一种语言。我建议重写一个 web 界面，java 或 .Net。
    *   如果代码需要*像*现在一样运行，任何“移植”转换只会造成伤害。
*   如果由于某种原因必须更改平台，您可以在另一个平台上使用 COBOL。
*   根据我的经验，最有效的方法是尝试将组件或服务彼此分离，或者单独转换小块，或者只用首选语言编写新代码，让 COBOL 在后端运行。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-04-21T05:26:12.063

我个人会根据程序的预期设计而不是当前的实现来执行此决定。但是，如果您想要一个直接的 line-for-line 端口，我可能会说 c/c++。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2009-04-21T05:28:12.603

也许您可以考虑将一些代码转换到像 .Net 这样的现代框架，而不是立即研究一种新语言——您可能会发现这是一个很好的中间解决方案，直到您准备好全力以赴。

有一些适用于 .NET 的 Cobol 编译器，例如 Fujitsu 的[NetCOBOL](http://www.netcobol.com/products/windows/netcobol.html)。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2009-04-21T05:37:52.470

我曾经参与将一些 COBOL 的东西移植到 C（1989 年左右）。有问题的 COBOL 是用于监控防盗警报、火灾警报等的代码。这种程序适合更实时的环境. 每分钟轮询这些数以万计的客户现场设备如此之多，等等。寻找“以一种与 COBOL 设计良好映射的语言的特性”忽略了这样一个事实，即有很多 COBOL 程序忽略了 COBOL 的设计。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2009-04-21T19:38:14.213

我会保留 COBOL 核心，但会在边缘扩展。

[Microfocus](http://www.microfocus.com/)提供了一个名为 Enterprise Server 的工具，它允许 COBOL 与 Web 服务进行交互。

如果您有一个 COBOL 程序 A 和另一个 COBOL 程序 B 并且 A 通过接口部分调用 B，则该工具允许您将 B 的接口部分公开为 Web 服务。

对于程序 A，然后生成客户端代理，A 现在可以通过 Web 服务调用 B。

当然，因为 B 现在有一个 Web 服务，任何其他类型的程序（命令行、Windows 应用程序、Java、ASP 等）现在也可以调用它。

此外，他们还有一个名为 COBOL.NET 的产品，它在 Visual Studio 中运行并将 COBOL 转换为 MSIL。这意味着您可以链接任何 .NET 组件。

因此，方法是保留 COBOL 核心，但通过 Web 服务进行接口，并使用任何符合 CLR 的语言（C#、VB 等）进行新的开发。

# .net - 如何使用自定义配置xml文件？

> ID：771137
> 
> 赞同：1
> 
> 时间：2009-04-21T05:18:17.730
> 
> 标签：.net, structuremap

我将使用 StructureMap 作为 DI 的一种方式。我将使用 xml 作为我的 DI 配置。我有两个问题。

第一个是如何使用自定义的xml文件名而不是StructureMap.Config？例如，在我的控制台应用程序中，如果我想使用 myDIStructure.config 文件，我应该在 main() 中使用什么类和方法：

```
private static void main(string[] args) {
    //? OjbectFactory.UserConfigurationFile = "myDIStructure.config";
    Program program = ObjectFactory.GetInstance<Program>();
    ...
} 
```

第二个问题是我如何在配置文件中定义具有类类型的通用接口。例如，我有以下接口和类：

```
public interface ProcessData<T> {
   void ReadData(T data);
   void ProcessData(T data);
   void SaveData(T data);
}
...
public class Data1 {....}  // this class will be used for ProcessData<T>
....
public class MyProcessData : ProcessData<Data1> {....} // implementation class 
```

然后在我的控制台应用程序中，我想将 PlugInFamily 用于 ProcessData 接口类型，将 Plugin 用于 MyProcessData。不确定这在 StructionMap 中是否可行以及如何实现？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-21T07:09:42.000

首先 - 我越来越认为 xml 配置选项现在主要是为了向后兼容。主要的 StructureMap 代码现在使用基于代码的注册表方法。

重新使用自定义文件；我还没有尝试过，但`StructureMapConfiguration.IncludeConfigurationFromFile(...)`看起来很有希望。

重新泛型...确实，这是 xml 的复杂性之一；-p

编辑：根据[用户组](http://groups.google.com/group/structuremap-users)中的[这篇文章](http://groups.google.com/group/structuremap-users/browse_thread/thread/53a1b2c9dd98d5cc/30a556621252573c?lnk=gst&q=generics+xml#30a556621252573c)，看起来反引号*可能*会起作用：

 *```
<DefaultInstance 
  PluginType="MyDemo.IRepository`1, MyDemo" 
  PluggedType="MyDemo.UserRepository , MyDemo" /> 
```

# html - 如何设计在 Windows 中正确呈现的 html 页面，同时留在 Linux 中？

> ID：771139
> 
> 赞同：0
> 
> 时间：2009-04-21T05:21:30.920
> 
> 标签：html, css, django, xhtml, django-templates

我通常更喜欢 linux 进行编程（我在 Ubuntu 上用 django 编程）。但我经常需要设计在 Windows 和 Linux 中正确呈现的 html 页面？

我目前如何做上述是

1.  在linux中设计（修复）html页面

2.  重新启动到 windows 检查设计是否正确。如果不重启到linux重复步骤1，步骤2

我觉得上面的过程很乏味。有没有更简单的方法来做到这一点？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2009-04-21T05:25:40.020

你可以使用虚拟机来托管你的 Windows 安装，如果你有一个 Windows 许可证（我猜你是因为你重新启动到 Windows 而做到的），并且 RAM 来保存 XP 的虚拟化实例或你使用的任何 Windows去测试。

使用 VMWare 或 VirtualBox，您可以设置一个共享文件夹，以便虚拟实例和 Linux 可以查看同一个文件以在本地测试网站。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-04-21T05:30:26.967

有一个很棒的免费服务，称为[BrowserShots](http://browsershots.org/)，您可以提供一个链接，该链接将在多个浏览器和操作系统中截取网站的屏幕截图。它支持 Linux、Windows、OS X 和 BSD 操作系统，以及大量的主要和次要浏览器（包括每个版本的多个版本）。

还有[IEs4Linux](http://www.tatanka.com.br/ies4linux/page/Main_Page)将使用 Wine 在 Linux 中安装 Internet Explorer。不过，这个解决方案并不完美，因为渲染并不准确，而且除了 flash 之外，安装（并开始工作）任何插件都可能很困难。此外，IE 7 和 8 还没有得到官方支持。

其他选项：

*   对于具有多个开发人员的环境，请创建一台服务器，其中安装了多个具有不同版本的虚拟化 Windows。开发人员可以使用远程桌面来测试本地网络上的站点。
*   如果您手边有第二台机器，请在其上安装 windows 和 kvm 开关以在此系统上进行测试。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-21T05:26:15.713

网站是否正确显示与操作系统的关系不大。它主要取决于网络浏览器及其引擎。

在 Linux 上以 FF 3.0 呈现的网页看起来与在 Windows 机器上完全相同。

如果您的浏览器默认不支持 Linux，一些建议：

*   使用虚拟机（如 VirtualBox）
*   在 Wine 中安装所需的浏览器
*   您可以使用在线渲染器，例如：http: [//ipinfo.info/netrenderer/](http://ipinfo.info/netrenderer/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-04-21T15:24:17.040

只是为了补充人们对虚拟机的看法，您需要知道如何使您的 django 测试服务器可供他们使用。为此，我使用：

> python manage.py runserver 192.168.1.xx:80

其中 xx 是您的本地 IP 地址。然后，您可以在创建站点时从运行在 Linux 主机上的虚拟机和本地网络上的其他计算机上浏览该站点。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-04-21T06:18:07.617

在 Linux 下使用尽可能多的浏览器平台进行测试：Firefox、Opera、Konqueror。如果您的页面在这些浏览器中工作，请使用 BrowserShots 或 Wine 在 IE 中进行测试。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-04-21T07:10:24.917

正如这里许多人的建议：

我建议使用虚拟机，如果您手头有一台服务器，甚至更好的多台服务器，您可以尝试安装 vmware 服务器 2.0 版，以便您和其他人可以使用同一台（虚拟）机器进行测试。

同样，大多数免费浏览器在不同的操作系统上看起来都一样，但请记住，某些操作系统缺少您可能想要的字体，这将产生巨大的差异。

考虑到这一点，我建议去虚拟化一个好的和免费的 selution vmware 服务器

# c# - 我在哪里可以找到使用 `List 的实际/实时场景 `?

> ID：771143
> 
> 赞同：0
> 
> 时间：2009-04-21T05:23:36.967
> 
> 标签：c#

我在哪里可以找到实际/实时的使用场景`List<T>`？
我想知道我们可以在哪里以及如何实施`List<T>`.

任何代码示例或任何链接都可以。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-04-21T05:29:18.857

[List<T> 上的 MSDN 页面](http://msdn.microsoft.com/en-us/library/6sh2ey19.aspx)怎么样？那里有一个解释和一个例子。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-04-21T05:42:29.653

听起来您需要对服务的性能需求进行建模，以查看 List 或任何数据结构是否可以工作。您每秒需要数百万个项目吗？数十亿？毫秒？确保您可以按照您的规格交付，或重新编写规格！

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-04-21T05:43:38.807

我从未为类似实时的系统编写过软件，我怀疑 .NET 是否适合它。你永远不知道垃圾收集器什么时候会触发，在它把执行返回给你的程序之前暂停你的程序一段未知的时间，就像什么都没发生一样。

您能否告诉我们更多有关数据类型以及您希望对列表执行的操作类型的信息？List 最慢的部分可能是当您添加更多最初创建它的项目时发生的底层数组的调整大小。如果您可以计算该信息，则可以使用接受整数作为初始大小的构造函数来解决这个问题。此外，请远离某些方法，例如插入/删除，它们并没有听起来那么快。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-04-21T05:34:26.207

简单地说，只要你想要一个列表（数字列表、人员列表、任何列表），你只需使用列表、列表、列表。也许我错过了您的问题的重点..您问如何实施 List？或者如何使用列表实现代码？我想这更像是第二个选择。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-04-21T05:42:26.470

在“实时”系统中，您可能希望确保创建的列表足够大，以便在首次创建列表时保存您打算放入其中的所有数据（使用传递容量的构造函数）。

您还需要避免以下操作（可能更多），因为它们相对昂贵（即它们可能看起来 O(1)，但不是）：

*   插入（int，T）
*   移除(T)
*   RemoveAt(int)

列表上还有其他 O(N) 操作，但您可以通过查看该方法的作用来猜测其中的大多数操作。

也就是说，了解它是否适​​合您的性能要求的唯一方法是对其进行测试。为自己准备一个好的测试工具，并敲击它以确保它符合您的需求。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-04-21T05:46:04.353

1.  确定 List<> 的替代品
2.  测量 List<> 的性能与**您的特定情况**的替代方案相比。您的问题的一般答案可能不准确。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2009-04-21T05:50:29.117

什么样的实时是实时的？因为如果你想做 REAL 实时，.Net 和 Windows 都不是你的朋友。

这并不简单： [http ://www.eurotech-inc.com/info/white-papers/Managed_Code_for_Real_Time.pdf](http://www.eurotech-inc.com/info/white-papers/Managed_Code_for_Real_Time.pdf)

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2009-04-21T06:03:43.360

对于性能关键系统，我同意这`List<T>`可能不适合这项工作，因为它在实现方面有点臃肿。当然它很容易使用，但它有很多警告。

要真正了解它的性能：

*   创建一个为您的应用程序执行一些典型操作的程序，然后使用`List<T>`.
*   研究`List<T>`使用 RedGates 反射器的内部工作原理，真正找到瓶颈并为其找到替代实现。例如，一个意外的减速点是访问该`Count()`方法，因为它遍历列表的所有内容。
*   您的发现应该足以实现接口的“涡轮增压”实现`IList<T>`，您可以在系统上使用该接口并获得合理的性能改进。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2009-04-22T07:34:42.807

我认为您宁愿寻找 List 与 C# 中其他数据结构的一些比较。如果您过滤掉您的问题，那就太好了。

# java - 如何在 Java 中调用 dll？

> ID：771145
> 
> 赞同：2
> 
> 时间：2009-04-21T05:24:54.857
> 
> 标签：java

如何在 Java 程序中调用 DLL？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-04-21T05:32:57.553

规范的答案是 JNI。不过，这有点痛苦。其他选项：

*   [痛饮](http://www.swig.org/)
*   [JNA](https://github.com/twall/jna/)
*   [NativeCall](http://johannburkard.de/software/nativecall/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-04-21T05:27:56.253

```
System.load("C:\\Windows\\System32\\yourdllname.dll"); 
```

如果这就是你的 dll 路径

# templates - D 模板：对类型列表进行排序

> ID：771146
> 
> 赞同：4
> 
> 时间：2009-04-21T05:25:08.850
> 
> 标签：templates, sorting, d

假设您有如下类型：

```
struct Value(int v_)
{
  static const v = v_:
} 
```

假设接口如下所示，您将如何对这些类型的列表进行排序：

```
alias Sorted!(Value!(4), Value!(2), Value!(1), Value!(3)) SortedValues; 
```

如果可以提供更好的解决方案，您可以使用 D 2.x 功能，但请说明您是否这样做。

我会在一天左右发布我的解决方案。:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-04-21T05:56:04.753

使用 D 1.0，进行快速排序！

[http://paste.dprogramming.com/dplgp5ic](http://paste.dprogramming.com/dplgp5ic)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-21T06:02:09.090

顺便说一句，除非您有其他理由这样做，否则无需将值包装在结构中，因为元组也可以很好地处理值。

```
alias Sorted!(4, 2, 1, 3) SortedValues; 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2009-04-22T11:22:19.357

这是我的解决方案。注意与FepingCreature 一样酷，但可能更容易理解；它通过递归地将第一种类型插入到列表的其余部分（在对其进行排序之后）来工作。

```
module sort;

/*
 * Tango users substitute "tango.core.Tuple" for "std.typetuple" and "Tuple"
 * for "TypeTuple".
 */

import std.typetuple;

struct Val(string v_)
{
    static const v = v_;
}

template Sorted_impl(T)
{
    alias TypeTuple!(T) Sorted_impl;
}

template Sorted_impl(T, U, V...){

    static if( T.v < U.v )
        alias TypeTuple!(T, U, V) Sorted_impl;

    else
        alias TypeTuple!(U, Sorted_impl!(T, V)) Sorted_impl;
}

template Sorted(T)
{
    alias TypeTuple!(T) Sorted;
}

template Sorted(T, U...)
{
    alias Sorted_impl!(T, Sorted_impl!(U)) Sorted;
}

pragma(msg, Sorted!(Val!("a")).stringof);

pragma(msg, Sorted!(Val!("b"), Val!("a")).stringof);

pragma(msg, Sorted!(
    Val!("d"), Val!("a"), Val!("b"), Val!("c")
).stringof);

static assert( false, "nothing to compile here, move along..." ); 
```

# html - FF 和 IE 中的 HTML 边框差异

> ID：771148
> 
> 赞同：3
> 
> 时间：2009-04-21T05:25:16.667
> 
> 标签：html, css, cross-browser, browser

我在识别我的 html 代码的问题时遇到了一些麻烦。我创建了一个表，它在 Internet Explorer 上是这样的（这是我正在寻找的结果）：

![IE](https://i260.photobucket.com/albums/ii17/rawpinions/01-3.png)

但它在 Firefox 上是这样出现的：

![火狐](https://i260.photobucket.com/albums/ii17/rawpinions/02-3.png)

...我不知道如何解决这个问题。请帮忙，谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-04-21T05:36:16.470

尝试添加`border-collapse: collapse;`到您的表格样式中。[文档在这里](http://www.w3schools.com/Css/pr_tab_border-collapse.asp)。

如果这不能解决它：虽然图像有帮助，但更有用的是您用来获取结果的 HTML/CSS。这样我们就可以看到问题可能会更好。

# fiddler - ipv4.fiddler，它是如何工作的？

> ID：771150
> 
> 赞同：14
> 
> 时间：2009-04-21T05:25:52.640
> 
> 标签：fiddler, ipv4

当您使用 URL ipv4.fiddler 时，我很好奇 fiddler 是如何捕获流量的。ipv4 是解析本地的特殊域，fiddler 只是向 http.sys 注册以代理调用吗？

任何见解都会很棒。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2009-05-09T04:02:29.347

简单：Fiddler 是一个代理，它可以看到几乎（*）所有的请求。当它看到绑定到“ipv4.fiddler”的请求时，它只是将其更改为 127.0.0.1。

(*) Fiddler 需要这个的唯一原因是一些 HTTP 堆栈被硬编码以绕过“localhost”地址的代理。通过使用魔术字符串“ipv4.fiddler”，您可以规避该硬编码限制。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-05-08T09:31:05.053

只需转到运行 Fiddler 的 192.168.0.100 之类的 IP。您将有一个下载证书的页面

# pdf - Informatica 中的 PDF 数据源

> ID：771154
> 
> 赞同：1
> 
> 时间：2009-04-21T05:27:29.390
> 
> 标签：pdf, informatica-powercenter

Informatica 如何处理 PDF 等非结构化数据源？如果表格报告存储为 PDF，我们可以从 PDF 中将其读取为表格数据（如 .NET 中的数据表）吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-21T06:48:18.480

**Informatica PowerCenter 非结构化数据选项**

*   [PDF 数据表](http://www.informatica.com/INFA_Resources/ds_unstructured_data_6668.pdf)
*   [网站](http://www.informatica.com/us/products/enterprise-data-integration/powercenter/options/unstructured-data-option/)

有趣的是，我曾经为发明底层技术的初创公司工作，直到被 Informatica 收购。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T01:37:59.090

您必须使用处理非结构化数据的 Informatica B2B 数据交换产品。该产品提供了处理各种非结构化数据的功能，不仅包括 PDF，还包括 Word、Excel、Star Office、AFP、PostScript、PCL 和 HTML。您必须使用 Informatica B2B 数据转换。

这是供您参考的快速链接。

[http://www.informatica.com/us/products/b2b-data-exchange/b2b-data-transformation/](http://www.informatica.com/us/products/b2b-data-exchange/b2b-data-transformation/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-21T06:44:03.047

PDF 实际上在内部是非常结构化的。PDF 规范的最新版本可能会提供一种方法来保存数据以供外部处理，但 PDF 文档的主要目标是描述要打印的文档，因此各种环境和设备都可以打印文档，结果如下：尽可能相似。

除了打印文本和行以形成表格的位置之外，是否提供了任何额外数据，这在很大程度上取决于 PDF 的创建者。

# c++ - 错误“预期”是什么意思？在obj''之前是什么意思？

> ID：771174
> 
> 赞同：1
> 
> 时间：2009-04-21T05:38:46.260
> 
> 标签：c++

我正在使用自己的头文件用 C++ 编写程序。

主文件

```
#include<iostream>
#include"operation.h"

using namespace std;
main()
{
  int a;
  cout <<"Enter the value a";
  cin>>a;

  //class name add
  //obj is object of add
  add obj;
  obj.fun(a);
} 
```

操作.h

```
class add
{

  void  fun(int b)
  {
    int c,d=10;
    c=d+b;
    cout<<"d="<<d;
  }
} 
```

当我在 Linux 中使用 G++ 编译时，它显示以下错误：

```
->expected ";" before obj
->obj not declared in this scope 
```

我该如何解决这个问题？为什么会这样？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-04-21T05:46:32.577

您需要`public:`在类添加的顶部添加。类成员的默认设置是私有的。

此外，您在类定义的末尾缺少一个分号。C++ 要求类定义以结束大括号后的分号结尾（您实际上可以在此时声明一个变量）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-04-21T05:51:41.267

我看不到错误的真正原因，但你真的应该插入包含警卫并且缺少 ; 在类定义之后：

```
// operation.h
#ifndef OPERATION_H
#define OPERATION_H
class add {
public:
   void fun( int b ) {
      int c = 0; // always initialize, just in case
      int d = 10;
      c = d+b;
      std::cout << "d=" << d;
   }
};
#endif 
```

编辑： main() 返回类型不存在。您应该在此时添加一个“int”。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-06-12T16:00:31.813

你是如何初始化课程的？请注意，以下是在 C++ 中实例化新“添加”对象的正确方法：

```
add a(params); 
```

这*不*等于以下内容：

```
add(params) a; 
```

细微的差别，绝对不同于其他一些语言的做法。可以想象产生“预期的;” 错误。

顺便说一句，我同意上述评论者的观点，即类应该大写而不是函数。这是一个可以提高可读性的约定，您会在其他 OO 语言中看到它重复出现。OTOH，这假定可读代码是您的目标。恕我直言，是否使用 CamelCase 或下划线命名更为主观，因此更具争议性。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-04-21T06:10:03.767

如上所述，第一个“错误”是类括号后缺少分号；其次是私有访问冲突（将此方法设为公开），

我的建议（保持你的头文件“干净”）将你的类方法的定义放入`*.cpp`文件中，让你的头文件只包含声明（你将避免不必要地包含 iostream 头文件。）

所以`*.hpp`文件应该只包含：

```
class add {
public:
   void fun( int b );
}; 
```

和`*.cpp`

```
void add::fun( int b)
{
  //here goes implementation
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-04-21T05:49:39.010

在我看来，这不是您遇到的唯一问题：

```
$ g++ -c /tmp/ttt.cpp
In file included from /tmp/ttt.cpp:2:
/tmp/operation.h: In member function ‘void add::fun(int)’:
/tmp/operation.h:8: error: ‘cout’ was not declared in this scope
/tmp/ttt.cpp: At global scope:
/tmp/ttt.cpp:4: error: expected unqualified-id before ‘using’
/tmp/ttt.cpp: In function ‘int main()’:
/tmp/ttt.cpp:8: error: ‘cout’ was not declared in this scope
/tmp/ttt.cpp:9: error: ‘cin’ was not declared in this scope
/tmp/operation.h:4: error: ‘void add::fun(int)’ is private
/tmp/ttt.cpp:14: error: within this context 
```

确保首先解决头文件中的所有错误。

# testing - 黑莓 - 在设备上测试应用程序？

> ID：771176
> 
> 赞同：3
> 
> 时间：2009-04-21T05:39:27.617
> 
> 标签：testing, blackberry

我有一个一直在模拟器上测试的黑莓应用程序。现在我想在进入签名过程之前在设备上测试应用程序。

是否可以在不签名的情况下在模拟器和设备上测试相同的 cod 文件？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-04-21T14:00:31.047

如果您使用任何“签名”API，则需要先对应用程序进行签名，然后才能在商业硬件上运行。

一旦您支付了 API 签名密钥的费用，对应用程序进行签名以在设备上进行测试就没有真正的缺点。我经常每天这样做几次，因为某些功能实际上只能在设备上进行全面测试。虽然理论上可以使用签名密钥的次数有限制，但 RIM 似乎设置了计数器，使限制为 2^32-1

签名的 API 在 Blackberry API 文档中用一个挂锁图标标识，该图标超链接到下面包含的文本注释。有许多。[AESCryptoToken](http://www.blackberry.com/developers/docs/4.1api/index.html)就是一个例子。方法文档将包含以下注释：

> 已签名：此元素只能由已签名的客户端访问。如果您打算使用此元素，请联系 RIM 以建立必要的协议，以便您签署 COD 文件。仅在设备上使用时需要签名，在 JDE 下进行开发无需签署 COD。

您可能还会遇到需要单独签名密钥的 Certicom Cryptography API。我无法找到已签名 API 的详尽列表。

# .net - 没有数据可用时如何避免 Socket.EndReceive() 阻塞

> ID：771182
> 
> 赞同：0
> 
> 时间：2009-04-21T05:44:10.787
> 
> 标签：.net, sockets, blocking

我正在使用.NET 中的套接字对异步 IO 使用 BeginReceive() 和 EndReceive() 方法。客户端发送连续的数据包，调用 EndReceive() 返回读取的字节数。

问题是客户端正在发送数据包，但数据长度为零。它通过分析 WireShark 中的流量发现了这一点。当数据长度为零时，EndReceive() 调用将阻塞在那里。

有没有一种方法可以识别零长度数据而不实际阻塞 EndReceive()？

此外，ReceiveTimeout 属性似乎不适用于 Async 方法。

示例源代码：

```
// This method runs on a separate thread
private void ProcessRequest()
{
   BeginReceive(OnClientReceive);

   // Do some work here in a loop
}

// Callback method
private void OnClientReceive(IAsyncResult result)
{
   int receivedCount = socket.EndReceive(result); // this one blocks

   // Do some work here

   // Again start listening for data
   BeginReceive(OnClientReceive);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-11-26T19:54:59.770

我会检查`socket.Available`

1.  `if socket.Available > 0`处理回调“OnClientReceive”中的所有代码
2.  `if socket.Available = 0`只有部分“//在这里做一些工作”应该被处理
3.  放一些锁以避免冲突

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-21T06:49:25.857

.NET 中的套接字将数据包作为连续的数据流来处理，而不是逐个数据包。这就是为什么`EndReceive`会阻塞直到数据可用，或者直到连接结束。

如果你想逐包捕获接收到的数据，我认为你需要使用类似[WinPcap](http://www.winpcap.org)库的东西

# cocoa - Cocoa / Objective-C Array 越界问题

> ID：771185
> 
> 赞同：0
> 
> 时间：2009-04-21T05:46:26.320
> 
> 标签：cocoa

我正在玩我编写的一些 Cocoa 应用程序，其中我将 Person 类的对象添加到 NSMutableArray。当我尝试访问超出数组限制的对象时，我得到的只是控制台上的“超出范围”消息。

事实上，我预计会发生更糟的事情。我预计应用程序会崩溃！但事实并非如此。

我不确定这是好事还是坏事，但我想知道应用程序内部会发生什么以防止它崩溃。我一直有这样的想法，我正在访问内存中不存在的对象。通常这会杀死每个应用程序。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-04-21T06:01:56.097

在您的情况下，实际上不允许您直接访问坏内存，因为您是通过 NSArray 对象进行交互的。相反，发生的事情是你给对象一个错误的索引，它通过抛出异常来通知你。

默认情况下，在 NSApplication 应用程序的主线程上发生的异常不会导致应用程序终止。相反，他们记录错误并中止当前的运行循环周期，然后开始下一个周期。

有关如何在调试阶段处理这些异常的更多信息，请查看[此文档](http://developer.apple.com/documentation/Cocoa/Conceptual/Exceptions/Tasks/ControllingAppResponse.html#//apple_ref/doc/uid/20000473)。它描述了在处理应用程序级异常时可以使用的各种技术和响应。

此外，读取和写入坏内存并不总是导致应用程序崩溃，这就是为什么这类错误很难追踪的原因。相反，您可能只是破坏了其他对象，并且直到应用程序周期的后期才知道您已经这样做了。这里要记住的重要一点是 NSApplication 将压制主线程上发生的大多数异常，因此您必须特别注意这一点。

# java - 我如何在Java中做定时器？

> ID：771189
> 
> 赞同：0
> 
> 时间：2009-04-21T05:49:09.107
> 
> 标签：java, timer

我正在用 Java 实现[x-modem 协议](http://en.wikipedia.org/wiki/XMODEM)。如果在我接收数据包时超时，那么我必须发送[否定确认](http://en.wikipedia.org/wiki/NAK)。我必须启动一个计时器，当时间到时，我会向发件人发送一条消息，要求从一开始就进行文件传输。

但是我不知道如何在 Java 中做计时器；我可以看一些示例代码吗？谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-21T10:34:25.800

查看 java.util.concurrent 包，特别是[ScheduledThreadPoolExecutor](http://java.sun.com/javase/6/docs/api/java/util/concurrent/ScheduledThreadPoolExecutor.html "java.util.concurrent.ScheduledThreadPoolExecutor")类。

java.util.Timer 的问题在于它安排一个后台线程来处理定时任务，如果任务本身需要一段时间才能运行，您的任务可能会排队（有关详细信息，请参阅[此处](http://java.sun.com/j2se/1.5.0/docs/api/java/util/Timer.html "java.util.Timer")）

这些都没有提供任何实时保证。

这[本书](http://www.amazon.co.uk/Java-Concurrency-Practice-Brian-Goetz/dp/0321349601)非常擅长解释 java.util.concurrent 包的用法

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-21T06:17:23.390

这是我理解您的问题的一些示例代码：

```
final Timer t = new Timer();
t.schedule(new TimerTask() {
        /**
         * {@inheritDoc}
         */
        @Override
        public void run() {
            // Do what you want
        }
    }, delay);

 if (gotResponse) t.cancel(); 
```

在`delay`Timer 执行它的任务之前你想要等待的毫秒数是多少。

# berkeley-db - BDB 文件是否可从一种系统架构移植到另一种系统架构

> ID：771194
> 
> 赞同：0
> 
> 时间：2009-04-21T05:52:46.943
> 
> 标签：berkeley-db

我的 googlefu 今晚缺少，我找不到答案。

我在 amd64/emt64 系统上创建的数据库可以在 x86 系统上使用吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-21T06:03:13.283

根据[常见问题解答](http://www.oracle.com/technology/products/berkeley-db/faq/db_faq.html#16)：

> **Berkeley DB 数据库是否可在具有不同整数大小和不同字节顺序的体系结构之间移植？**
> 
> 是的。具体来说，数据库可以在 32 位和 64 位机器之间移动，也可以在小端和大端机器之间移动。有关详细信息，请参阅 Berkeley DB 参考指南的“选择字节顺序”部分。

# sql - 当我想使用数据库约束但只标记为已删除而不是删除时该怎么办？

> ID：771197
> 
> 赞同：7
> 
> 时间：2009-04-21T05:55:49.480
> 
> 标签：sql, sql-server-2005, tsql, constraints

我正在一个项目中工作，其中数据库项目没有被删除，而只是被标记为已删除。像这样的东西：

```
id   name     deleted
---  -------  --------
1    Thingy1  0
2    Thingy2  0
3    Thingy3  0 
```

我希望能够在`name`列上定义类似 UNIQUE 约束的东西。看起来很容易，对吧？

让我们想象一个场景，其中“Thingy3”被删除，并创建了一个新的（可能是几年后）。我们得到：

```
id   name     deleted
---  -------  --------
1    Thingy1  0
2    Thingy2  0
3    Thingy3  1
...
100  Thingy3  0 
```

从用户的角度来看，他删除了一个项目并创建了一个新项目。就像删除文件并创建新文件一样。所以对他来说很明显，新项目与旧项目相关的任何数据无关且不附加。

这已经处理好了，因为数据库只关心`id`，并且由于新项目`id`的 100 而不是 3，所以它们完全不同。

当我想阻止用户创建*另一个*“Thingy3”项目时，我的困难就出现了。如果我有一个 UNIQUE 约束，它只查看未标记的项目`deleted`，那么我会解决一个问题。

（当然，然后我必须处理当有人撤消删除时会发生什么......）

那么，我该如何定义这种约束呢？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2009-04-21T06:48:55.263

您可以在删除记录时将 id 值添加到名称的末尾，因此当有人删除 id 3 时，名称变为 Thingy3_3，然后当他们删除 id 100 时，名称变为 Thingy3_100。这将允许您在名称和已删除字段上创建唯一的复合索引，但是您必须在显示名称列时过滤它并从名称末尾删除 id。

也许更好的解决方案是将您的已删除列替换为 DATETIME 类型的 deleted_at 列。然后，您可以维护 name 和 deleted at 的唯一索引，未删除的记录在 deleted_at 字段中具有空值。这将防止在活动状态下创建多个名称，但允许您多次删除相同的名称。

您显然需要在取消删除记录时进行测试，以确保在允许取消删除之前没有同名的行和空的 deleted_at 字段。

您实际上可以通过使用 INSTEAD-OF 触发器进行删除来在数据库中实现所有这些逻辑。此触发器不会删除记录，而是会在您删除记录时更新 deleted_at 列。

下面的示例代码演示了这一点

```
CREATE TABLE swtest (  
    id          INT IDENTITY,  
    name        NVARCHAR(20),  
    deleted_at  DATETIME  
)  
GO  
CREATE TRIGGER tr_swtest_delete ON swtest  
INSTEAD OF DELETE  
AS  
BEGIN  
    UPDATE swtest SET deleted_at = getDate()  
    WHERE id IN (SELECT deleted.id FROM deleted)
    AND deleted_at IS NULL      -- Required to prevent duplicates when deleting already deleted records  
END  
GO  

CREATE UNIQUE INDEX ix_swtest1 ON swtest(name, deleted_at)  

INSERT INTO swtest (name) VALUES ('Thingy1')  
INSERT INTO swtest (name) VALUES ('Thingy2')  
DELETE FROM swtest WHERE id = SCOPE_IDENTITY()  
INSERT INTO swtest (name) VALUES ('Thingy2')  
DELETE FROM swtest WHERE id = SCOPE_IDENTITY()  
INSERT INTO swtest (name) VALUES ('Thingy2')  

SELECT * FROM swtest  
DROP TABLE swtest 
```

从此查询中选择返回以下内容

```
id 名称 deleted_at
1 事物1 NULL
2东西2 2009-04-21 08:55:38.180
3东西2 2009-04-21 08:55:38.307
4 事物2 NULL

```

因此，在您的代码中，您可以使用普通删除来删除记录，并让触发器处理细节。唯一可能的问题（我可以看到）是删除已删除的记录可能会导致重复的行，因此触发器中的条件是不更新已删除行上的 deleted_at 字段。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-04-21T08:09:30.377

可能值得考虑使用“回收站”表。与其将旧记录与标志一起保存在同一个表中，不如将它们移动到具有自己约束的自己的表中。例如，在活动表中，您确实对名称有唯一约束，但在回收站表中，您没有。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-04-21T06:52:22.213

复合唯一约束的问题是不可能有多个同名的记录被删除。这意味着一旦您删除第三条记录，系统就会中断。我不建议在名称上附加内容，因为理论上可能会出现重复的情况。此外，这样做基本上是在破坏数据库中的数据，并向数据本身添加神秘的业务逻辑。

在数据库范围内，唯一可能的解决方案是添加一个触发器来检查插入/更新的数据是否有效。也可以将检查放在数据库之外的代码中。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-04-21T06:05:43.903

例如，您可以在已删除的名称中添加非法字符 (*)。但是您仍然无法取消删除已删除的项目。所以可能更好的主意是禁止双重名称，即使它们被删除。

您可以在一段时间后清除已删除的记录（或将它们移动到单独的表中）。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-04-21T06:12:08.147

对于一个名为 [Test] 的简单表，其列 ID(int)、Filter(nvarchar)、Deleted(bit)

```
ALTER TABLE [dbo].[Test] ADD 
    CONSTRAINT [DF_Test_Deleted] DEFAULT (0) FOR [Deleted],
    CONSTRAINT [IX_Test] UNIQUE  NONCLUSTERED 
    (
        [filter],
        [Deleted]
    )  ON [PRIMARY] 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-04-21T06:12:39.393

在唯一名称后添加随机哈希。很容易逆转的东西。可能用下划线或其他字符分隔。

评论后编辑：您可以简单地添加下划线和当前时间戳。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2009-04-21T08:22:05.900

而不是删除的列使用 end_date 列。当用户删除记录时，在 end_date 列中添加当前日期。end_date 列为 NULL 的任何记录都是您当前的记录。在两个列 name 和 end_date 上定义唯一约束。由于此限制，您永远不会遇到有效记录名称重复的情况。任何时候用户想要取消删除一条记录，您都需要将 end_date 列设置为 null，如果这违反了唯一约束，那么您向用户显示消息用户已经存在相同的名称。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2009-04-21T13:06:56.883

您需要的约束类型是表级`CHECK`约束，即由子查询组成的 CHECK 约束，该子查询`NOT EXISTS`对表进行测试（或等效），例如

```
CREATE TABLE Test 
(
   ID INTEGER NOT NULL UNIQUE, 
   name VARCHAR(30) NOT NULL, 
   deleted INTEGER NOT NULL, 
   CHECK (deleted IN (0, 1))
);

ALTER TABLE Test ADD
   CONSTRAINT test1__unique_non_deleted
      CHECK 
      (
         NOT EXISTS 
         (
            SELECT T1.name
              FROM Test AS T1
             WHERE T1.deleted = 0
             GROUP
                BY T1.Name
            HAVING COUNT(*) > 1
         )
      );

INSERT INTO Test (ID, name, deleted) VALUES (1, 'Thingy1', 0)
;
INSERT INTO Test (ID, name, deleted) VALUES (2, 'Thingy2', 0)
;
INSERT INTO Test (ID, name, deleted) VALUES (3, 'Thingy3', 1)
;
INSERT INTO Test (ID, name, deleted) VALUES (4, 'Thingy3', 1)
;
INSERT INTO Test (ID, name, deleted) VALUES (5, 'Thingy3', 0)
;
INSERT INTO Test (ID, name, deleted) VALUES (6, 'Thingy3', 0)
; 
```

最后一个`INSERT`(ID = 6) 将导致约束咬住并且`INSERT`将失败。量子点

...哦，差点忘了提：SQL Server 还不支持`CHECK`包含子查询的约束（我在 ACE/JET 上测试了上述内容）。虽然您*可以*使用`FUNCTION`我读过的，但由于 SQL Server 逐行测试限制，这是不安全的（请参阅[David Portas 的博客](http://blogs.conchango.com/davidportas/archive/2007/02/19/Trouble-with-CHECK-Constraints.aspx)）。在 SQL Server 支持这个完整的 SQL-92 功能之前，我首选的解决方法是在触发器中使用相同的逻辑。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2009-04-21T06:01:43.600

不确定 SQLServer2005，但您可以定义复合约束/索引

```
CREATE UNIQUE INDEX [MyINDEX] ON [TABLENAME] ([NAME] , [DELETED]) 
```

正如 SteveWeet 所指出的，这只允许您删除/创建两次。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2009-04-21T06:09:12.117

在（名称，已删除）上创建唯一约束。但是，这意味着每个名称只能删除一个。

明显的解决方法*适用*于 ANSI-92 但不适用于 MS SQLServer：[https ://connect.microsoft.com/SQLServer/feedback/ViewFeedback.aspx?FeedbackID=299229](https://connect.microsoft.com/SQLServer/feedback/ViewFeedback.aspx?FeedbackID=299229)

# .net - 托管代码是在 C++ 中使用 SMO 的唯一方法吗？

> ID：771203
> 
> 赞同：1
> 
> 时间：2009-04-21T05:58:49.830
> 
> 标签：.net, c++, sql-server, managed-code

我必须在 C++ 中使用 SQLSERVER SMO。托管代码是在 C++ 中使用 SQLSERVER SMO 的唯一方法吗？

我尝试了很多方法..但我发现使用托管代码是唯一的选择。还有其他方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-04-21T06:20:23.057

从技术上讲，您可以[将 .NET 程序集公开](http://msdn.microsoft.com/en-us/library/zsfww439.aspx)给标准 COM 基础结构，但这需要更改源代码（请参阅[此](http://msdn.microsoft.com/en-us/library/d4w8x20h.aspx)）。您可以尝试围绕标准 SMO 对象创建一个支持 COM 的包装器，然后将它们用作 C++ 中的常规 COM 类。

# vim - VIM 中的逐行选择

> ID：771204
> 
> 赞同：3
> 
> 时间：2009-04-21T05:59:02.700
> 
> 标签：vim

如何在 VIM 中选择所有不包含单词“hello”的行？我需要将其拉出然后保存到文件中。我该怎么做？我正在寻找类似的东西：

> :v/!(你好) > 文件

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2009-04-21T12:02:28.537

```
:g!/hello/ yank A 
```

这些行现在存储在寄存器 a 中，要粘贴它们，请执行“ap

编辑：可以缩写为

```
:g!/hello/y A 
```

对于那些对这对 vim 意味着什么感兴趣的人：

:g = 全局搜索
！= 否定
/hello/ 之后的布尔测试 = 匹配“hello”的正则表达式
y = 在每个匹配的行上执行的命令，在本例中为“yank”
A = 将参数注册到“yank”命令。在这种情况下，寄存器“a”但以大写形式表示附加到寄存器而不是替换。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2009-04-21T06:11:18.117

如果你`grep`的系统上有，你可以使用这个命令：

```
:!grep -v hello % > file 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2009-04-21T07:06:23.053

我通常用一些变化来做到这一点

```
:g/hello/d 
```

即删除所有包含“hello”的内容，然后选择、拉动或任何需要做的事情，最后恢复回击你。我发现这比构建命令行管道更省心。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2009-04-21T14:00:07.320

到目前为止我没有看到提到的另一种方法是重定向。

所以对于你的情况，这将是

```
:redir > file
:g!/hello/
:redir END 
```

也可以看看

```
:help redir
:help verbosefile 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2009-04-21T14:00:36.100

fgm的答案几乎就在那里

:v 将选择不匹配的行

因此，以下内容会将不包含“hello”的行附加到名为 eee 的文件中，并在需要时创建它。

```
:v/hello/ . w!>>eee 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-04-21T07:18:17.893

选择并写入一个新文件：

```
:g/hello/ . w!>> file 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2009-08-04T06:54:33.870

非常直截了当；

```
:v/hello/ |redir >> file 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-04-21T08:56:36.970

Vim 命令后

```
:let @a='' | g!/hello/normal "Ayy 
```

您将在寄存器“a”中拥有所有没有“hello”的行。您可以使用“ap 普通命令”粘贴其值，或者将此值放入系统剪贴板

```
:let @*=@a 
```

然后您可以在 Windows 上使用“Ctrl+V”或在 Mac Os 上使用“Cmd+V”或在 Linux 上使用“鼠标中键”粘贴文本。

**魔法简述：**

**@a**是绑定到存储在 'a' 寄存器中的值的 Vim 变量。
**"ap** , **"bp** , **"cp** , .. 是 Vim 正常模式下用于从特定寄存器中传递值的组合键。
**@***是绑定到系统剪贴板的 Vim 变量。
**let @* = @a** put值从寄存器“a”到系统剪贴板。

将此添加到您的 .vimrc 或使用插件目录创建文件。

```
function s:copy_unmathced_lines(pattern)
   let result_lines = []

   for line in getline(1, '$')
      if line !~ a:pattern
         call add(result_lines, line)
      endif
   endfor

   let @* = join(result_lines, "\n")
endfunction

command -nargs=1 CopyUnmatchedLines call s:copy_unmathced_lines(<q-args>) 
```

用例很简单：

```
CopyUnmatchedLines hello 
```

然后只需在任何编辑器中使用粘贴命令。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2009-07-30T00:59:29.477

**Blixtor 片段的一个实际示例：**使用“:verbosefile”丢失的电子邮件朋友。

一、打开手册“:e /tmp/new_file”和“:h verbosefile”，然后我们复制-cat blixtor的提示：

```
:redir > /tmp/verbosefile_instructions
:g/verbosefile/
:redir END 
```

二、确认您遵循有关电子邮件长度的标准规则，并提供标准问候语：

```
:match ErrorMsg /\%>73v.\+/
:so /bin/greetings.vim 
```

三、用 Mutt 发送文件。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2009-07-30T01:13:26.280

**关于视觉选择和复制的示例：**假设您要分离一个部分：

1.  视觉选择它并按“：”

2.  然后使用命令：

    :'<,'> ！> ../new_file_in_a_subdirectory

**错误：**颜色将被复制到文件中，实际上并没有应对而是剪切和粘贴。

# c# - 连接 USB 设备时如何接收通知？

> ID：771205
> 
> 赞同：5
> 
> 时间：2009-04-21T05:59:55.337
> 
> 标签：c#, usb, device

我正在编写一个程序来监视特定设备。该设备*可能会*或*可能不会*始终连接，并且在连接时可以连接到多个不同端口中的任何一个；我希望我的程序能够优雅地处理这个问题。

有没有办法在连接特定 USB 设备时接收通知，并从那里确定它连接到哪个端口？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-22T07:30:28.730

要获取任何硬件设备已更改的信息，您可以将以下代码添加到主窗体：

```
/// <summary>
/// Windows Messages
/// Defined in winuser.h from Windows SDK v6.1
/// Documentation pulled from MSDN.
/// For more look at: http://www.pinvoke.net/default.aspx/Enums/WindowsMessages.html
/// </summary>
public enum WM : uint
{
    /// <summary>
    /// Notifies an application of a change to the hardware configuration of a device or the computer.
    /// </summary>
    DEVICECHANGE = 0x0219,
}

protected override void WndProc(ref Message m)
{
    switch ((WM)m.Msg)
    {
        case WM.DEVICECHANGE:
            //ToDo: put your code here.
            break;
    }
    base.WndProc(ref m);
} 
```

# java - 如何在 Java 中将帧速率限制在 60 fps？

> ID：771206
> 
> 赞同：17
> 
> 时间：2009-04-21T06:00:36.690
> 
> 标签：java, cpu, frame-rate

我正在编写一个简单的游戏，我想将我的帧速率限制在 60 fps 而不让循环吃掉我的 cpu。我该怎么做？

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2009-04-21T06:05:28.100

您可以阅读[游戏循环文章](https://dewitters.com/dewitters-gameloop/)。在尝试实现任何东西之前，首先了解游戏循环的不同方法非常重要。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-01-20T03:42:58.270

我接受了@cherouvim 发布的[游戏循环文章](http://www.koonsolo.com/news/dewitters-gameloop/)，我采用了“最佳”策略并尝试为 java Runnable 重写它，似乎对我有用

```
double interpolation = 0;
final int TICKS_PER_SECOND = 25;
final int SKIP_TICKS = 1000 / TICKS_PER_SECOND;
final int MAX_FRAMESKIP = 5;

@Override
public void run() {
    double next_game_tick = System.currentTimeMillis();
    int loops;

    while (true) {
        loops = 0;
        while (System.currentTimeMillis() > next_game_tick
                && loops < MAX_FRAMESKIP) {

            update_game();

            next_game_tick += SKIP_TICKS;
            loops++;
        }

        interpolation = (System.currentTimeMillis() + SKIP_TICKS - next_game_tick
                / (double) SKIP_TICKS);
        display_game(interpolation);
    }
} 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2009-04-21T06:59:58.187

简单的答案是将 java.util.Timer 设置为每 17 毫秒触发一次，并在计时器事件中完成您的工作。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2009-04-21T07:20:18.327

以下是我在 C++ 中的做法……我相信你可以适应它。

```
void capFrameRate(double fps) {
    static double start = 0, diff, wait;
    wait = 1 / fps;
    diff = glfwGetTime() - start;
    if (diff < wait) {
        glfwSleep(wait - diff);
    }
    start = glfwGetTime();
} 
```

`capFrameRate(60)`每个循环只需调用一次。它会休眠，因此不会浪费宝贵的周期。`glfwGetTime()`返回程序启动后的时间（以秒为单位）...我相信您可以在 Java 中的某个地方找到等价物。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2013-09-07T03:37:38.870

这是使用 Swing 并在不使用 Timer 的情况下获得相当准确的 FPS 的提示。

首先不要在事件调度线程中运行游戏循环，它应该在自己的线程中运行，做艰苦的工作，而不是妨碍 UI。

显示游戏的 Swing 组件应该绘制自己覆盖此方法：

```
@Override
public void paintComponent(Graphics g){
   // draw stuff
} 
```

问题是游戏循环不知道事件调度程序线程何时真正开始执行绘制动作，因为在游戏循环中我们只调用了 component.repaint() ，它只请求稍后可能发生的绘制。

使用等待/通知，您可以让重绘方法等到请求的绘制发生，然后继续。

[这是来自https://github.com/davidmoten/game-exploration](https://github.com/davidmoten/game-exploration)的完整工作代码，它使用上述方法在 JFrame 上简单地移动字符串：

```
import java.awt.BorderLayout;
import java.awt.Component;
import java.awt.Graphics;
import java.awt.Image;

import javax.swing.JFrame;
import javax.swing.JPanel;

/**
 * Self contained demo swing game for stackoverflow frame rate question.
 * 
 * @author dave
 * 
 */
public class MyGame {

    private static final long REFRESH_INTERVAL_MS = 17;
    private final Object redrawLock = new Object();
    private Component component;
    private volatile boolean keepGoing = true;
    private Image imageBuffer;

    public void start(Component component) {
        this.component = component;
        imageBuffer = component.createImage(component.getWidth(),
                component.getHeight());
        Thread thread = new Thread(new Runnable() {
            @Override
            public void run() {
                runGameLoop();
            }
        });
        thread.start();
    }

    public void stop() {
        keepGoing = false;
    }

    private void runGameLoop() {
        // update the game repeatedly
        while (keepGoing) {
            long durationMs = redraw();
            try {
                Thread.sleep(Math.max(0, REFRESH_INTERVAL_MS - durationMs));
            } catch (InterruptedException e) {
            }
        }
    }

    private long redraw() {

        long t = System.currentTimeMillis();

        // At this point perform changes to the model that the component will
        // redraw

        updateModel();

        // draw the model state to a buffered image which will get
        // painted by component.paint().
        drawModelToImageBuffer();

        // asynchronously signals the paint to happen in the awt event
        // dispatcher thread
        component.repaint();

        // use a lock here that is only released once the paintComponent
        // has happened so that we know exactly when the paint was completed and
        // thus know how long to pause till the next redraw.
        waitForPaint();

        // return time taken to do redraw in ms
        return System.currentTimeMillis() - t;
    }

    private void updateModel() {
        // do stuff here to the model based on time
    }

    private void drawModelToImageBuffer() {
        drawModel(imageBuffer.getGraphics());
    }

    private int x = 50;
    private int y = 50;

    private void drawModel(Graphics g) {
        g.setColor(component.getBackground());
        g.fillRect(0, 0, component.getWidth(), component.getHeight());
        g.setColor(component.getForeground());
        g.drawString("Hi", x++, y++);
    }

    private void waitForPaint() {
        try {
            synchronized (redrawLock) {
                redrawLock.wait();
            }
        } catch (InterruptedException e) {
        }
    }

    private void resume() {
        synchronized (redrawLock) {
            redrawLock.notify();
        }
    }

    public void paint(Graphics g) {
        // paint the buffered image to the graphics
        g.drawImage(imageBuffer, 0, 0, component);

        // resume the game loop
        resume();
    }

    public static class MyComponent extends JPanel {

        private final MyGame game;

        public MyComponent(MyGame game) {
            this.game = game;
        }

        @Override
        protected void paintComponent(Graphics g) {
            game.paint(g);
        }
    }

    public static void main(String[] args) {
        java.awt.EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                MyGame game = new MyGame();
                MyComponent component = new MyComponent(game);

                JFrame frame = new JFrame();
                // put the component in a frame

                frame.setTitle("Demo");
                frame.setSize(800, 600);

                frame.setLayout(new BorderLayout());
                frame.getContentPane().add(component, BorderLayout.CENTER);
                frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                frame.setVisible(true);

                game.start(component);
            }
        });
    }

} 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2015-03-25T13:04:18.903

这里已经有很多很好的信息，但我想分享我在这些解决方案中遇到的一个问题，以及解决方案。如果尽管有所有这些解决方案，您的游戏/窗口似乎跳过（尤其是在 X11 下），请尝试`Toolkit.getDefaultToolkit().sync()`每帧调用一次。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2011-04-19T03:37:39.487

计时器对于控制 Java 中的 FPS 不准确。我已经找到了二手货。您将需要实现自己的计时器或进行有限制的实时 FPS。但不要使用 Timer，因为它不是 100% 准确的，因此无法正确执行任务。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-11-04T01:36:36.450

在 java 中，您可以`System.currentTimeMillis()`获取以毫秒为单位的时间，而不是`glfwGetTime()`.

`Thread.sleep(time in milliseconds)`让线程等待以防您不知道，并且它必须在一个`try`块内。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2009-11-04T01:46:11.827

我所做的只是继续循环，并跟踪我上次制作动画的时间。如果已经至少 17 毫秒，则通过动画序列。

这样我可以检查任何用户输入，并根据需要打开/关闭音符。

但是，这是在一个帮助教孩子音乐的程序中，我的应用程序占用了电脑，因为它是全屏的，所以它不能很好地与其他人一起玩。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2010-08-31T07:06:11.550

如果您使用 Java Swing 实现 60 fps 的最简单方法是像这样设置 javax.swing.Timer，这是制作游戏的常用方法：

```
public static int DELAY = 1000/60;

Timer timer = new Timer(DELAY,new ActionListener() {
    public void actionPerformed(ActionEvent event) 
    {
      updateModel();
      repaintScreen();
    }
}); 
```

在您的代码中的某处，您必须将此计时器设置为重复并启动它：

```
timer.setRepeats(true);
timer.start(); 
```

每秒有 1000 毫秒，通过将其除以您的 fps (60) 并设置具有此延迟的计时器（1000/60 = 16 毫秒向下舍入），您将获得一个固定的帧速率。我说“有点”，因为这在很大程度上取决于您在上面的 updateModel() 和 repaintScreen() 调用中所做的事情。

要获得更可预测的结果，请尝试在计时器中对两个调用进行计时，并确保它们在 16 毫秒内完成以保持 60 fps。通过内存的智能预分配、对象重用和其他事情，您还可以减少垃圾收集器的影响。但这是另一个问题。

# jquery - 在 jQuery 环境中创建 XML 文档

> ID：771207
> 
> 赞同：1
> 
> 时间：2009-04-21T06:00:49.733
> 
> 标签：jquery, xml, creation

参考了 JQuery 文档，他们在其中提到了这段代码。

```
var xmlDocument = [create xml document];
 $.ajax({
 url: "page.php",
 processData: false,
 data: xmlDocument,
 success: handleResponse
 }); 
```

但我试图在 Adob​​e AIR 环境中发出相同的请求，但它给出了解析错误。

有没有使用 jQuery 创建 xml 文档的特定方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-21T08:17:34.617

谢谢你们

[我在这个](http://plugins.jquery.com/project/createXMLDocument)位置有一个插件

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-21T06:10:55.730

为了让服务器获取数据，你需要说

```
data: "varname=" + xmlDocument, 
```

否则数据在传输的另一端没有变量名。

# javascript - DOM 动态更新为新的 HTML 内容时的 HTML 解析错误

> ID：771211
> 
> 赞同：3
> 
> 时间：2009-04-21T06:01:48.530
> 
> 标签：javascript, dhtml

我最近开始升级我的网站以通过 AJAX 发送和接收请求/响应。我正在使用原型库。

我现有的 HTML 代码包含某些未关闭的标签`img`。`input`

当我尝试`div`使用 innerHTML 属性使用此类 HTML 代码更新元素的内容（例如 ）时，会出现解析错误，例如“垃圾代码”或“格式不正确”等。

不使用AJAX，即不动态更新DOM，即使上面的html非标准编码，页面也能正常运行。

**问题：**

有什么方法可以使用动态更新并且仍然避免遇到解析错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-04-21T06:22:55.233

是的，如果您确保您的页面符合标准，您可以使用动态更新。JS 库在设计时就考虑到了这一点，它们在不符合标准的页面上插入数据时会遇到问题。您可以通过简单地关闭标签来解决问题。

# html - IE6/IE7 + 圆角...额外不需要的填充

> ID：771224
> 
> 赞同：0
> 
> 时间：2009-04-21T06:09:40.693
> 
> 标签：html, css, internet-explorer, rounded-corners

基本上来说，FF3和IE8都是这样渲染的，这就是我想要的：

[![火狐渲染](https://i.stack.imgur.com/TuFJ6.jpg)](https://i.stack.imgur.com/TuFJ6.jpg)

但是，IE7 和 IE8 将其呈现为：

[![IE 渲染](https://i.stack.imgur.com/cDjVA.jpg)](https://i.stack.imgur.com/cDjVA.jpg)

我将此解决方案用于没有图像的圆角：

[http://www.editsite.net/blog/rounded_corners.html](http://www.editsite.net/blog/rounded_corners.html)

最后，这是我的代码和 CSS（动态生成，很抱歉没有正确的制表符）：

[HTML](http://www.yousendit.com/download/dVlxU2VrdGpCSnAzZUE9PQ) [CSS](http://www.yousendit.com/download/dVlxU2VrdGpTRTVMWEE9PQ)

先感谢您！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-21T06:20:00.903

在您链接到圆角 js 文件的网站上，有许多评论抱怨该脚本在 Internet Explorer 中不起作用。由于您已经包含了 jquery，我可以推荐一个名为“corners”的 jQuery 插件，它似乎可以在 ie 中使用。

[http://plugins.jquery.com/project/corners](http://plugins.jquery.com/project/corners)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-04-21T06:22:17.653

只需使用`corner-radius`CSS 属性，如果有人使用的是旧浏览器，那么他们就不会遇到任何问题。这是一个更好且可扩展的解决方案，而不是使用不必要的 JavaScript 来破坏您的页面，从而产生数百个多余的 div - 这简直是愚蠢的！

# coldfusion - 如何测试以查看 ColdFusion 结构中是否存在变量？

> ID：771226
> 
> 赞同：9
> 
> 时间：2009-04-21T06:10:12.300
> 
> 标签：coldfusion

我想测试：

```
<cfif Exists(MyStruct["mittens"])>
</cfif> 
```

如果 MyStruct 中不存在“mittens”键，它会返回什么？0，还是“”？

应该用什么替换 Exists 函数？

**更新**

我试过，

```
<cfif IsDefined(MyStruct.mittens)> 
```

这也会引发错误

> 元素手套在 MyStruct 中未定义。

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2009-04-21T07:07:42.613

要测试密钥是否存在，我建议：

```
<cfif StructKeyExists(MyStruct, "mittens")>

<!--- or --->

<cfset key = "mittens">
<cfif StructKeyExists(MyStruct, key)> 
```

这在幕后调用了`containsKey()`ColdFusion 结构所基于的 java.util.map 的方法。这可以说是找出密钥是否存在的最快方法。

替代方案是：

```
<cfif IsDefined("MyStruct.mittens")>

<!--- or --->

<cfset key = "mittens">
<cfif IsDefined("MyStruct.#key#")> 
```

这在幕后调用`Eval()`传递的字符串（或者我相信）并告诉您结果是否是变量引用。相比之下，这比`StructKeyExists()`. 从好的方面来说：您可以在一次调用中测试嵌套结构中的子键：

```
<cfif IsDefined("MyStruct.with.some.deeply.nested.key")> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-04-21T06:14:32.773

[在这里](http://mkruger.cfwebtools.com/index.cfm?mode=alias&alias=isdefined%20vs%20structkeyexists)找到了答案

它是 StructKeyExists

# java - 如何使用 Java 中的 Postgres JDBC 驱动程序获取导致 SQLException 的 sql 语句？

> ID：771237
> 
> 赞同：5
> 
> 时间：2009-04-21T06:12:28.347
> 
> 标签：java, exception, postgresql, jdbc, exception-handling

### 背景

在我当前的项目中——一个没有 GUI 前端的服务器产品，我正在尝试编写更好的错误处理支持。当前错误会输出到日志中，并且通常不会被用户读取。

我们使用 PostgreSQL 作为我们的数据库后端，并通过数据库池使用直接 JDBC 调用和 DAO 来访问它。大多数与数据库相关的异常都包装在一个通用`DatabaseException`类中，该类实现`RuntimeException`并尝试从传递的异常中提取调试和状态信息。在我们的特殊情况下，它将访问底层 PostgreSQL 数据库驱动程序 - `PSQLException`. 到目前为止，这种方法在获取有关导致数据库错误的原因的更详细信息方面效果很好，下面描述了一个明显的例外。

此外，由于我们有非常具体的性能和遗留支持要求，我们有很多自定义的 SQL***魔法***，这使得跟踪堆栈跟踪需要更多时间，但并非不可能或困难。

### 问题描述

我注意到，当我们因为错误的 SQL 语句而得到 a 时`SQLException`，驱动程序的实现不会返回导致错误的 SQL 语句。经过一番搜索，我发现有一种方法可以在启动时将 PostgreSQL 驱动程序置于调试模式，并让它显示有关其内部查询的属性。然而，我们不希望在生产环境中以调试模式运行驱动程序（老实说，我还没有弄清楚如何让它进入怪异模式！）。

### 问题

以前有没有其他人处理过同样的问题并找到了解决方案？如果没有，是否有一些 OOP 模式用于在执行之前存储查询信息，然后将该信息分配给引发的异常？还是大多数开发人员只是觉得他们不需要完整的查询来解决数据库问题？老实说，我*不需要*它，因为我有完整的堆栈跟踪并且我可以查找调用查询，但它肯定会加快我的调试速度，因为它是我在错误日志中看到的第一件事。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-04-21T06:44:20.737

当出现 SQLException 时，我曾经在我的客户异常对象中添加 SQL 查询。在我在日志文件中记录异常详细信息的代码中，我也曾经记录过 SQL。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-21T06:24:44.997

我假设当您调用执行查询时，您拥有该语句，并且您收到异常，所以此时您拥有两者。看来您可以在那里进行分析。

但是，也许您正在进一步了解情况。所以，你可以做的是在你自己的自定义异常子类 DatabaseException 上，添加一个带有 getter 和 setter 的 triggeringSQLStatement 成员，然后在你尝试执行语句的地方，从 PostgreSQL 捕获原始异常，创建一个新的DatabaseException，将triggeringSQLStatement设置为你刚刚执行的语句，并在DatabaseException上调用initCause()将PostgreSQL捕获的异常设置为你的异常原因；然后抛出你的 DatabaseException 和捕获它的调用代码将有一个对象打印出一个非常体面的堆栈跟踪所发生的事情，并提供对导致问题的 SQL 语句的访问。有关此方法的更多信息，您可能需要研究 Java 异常链接。

如果代码中没有任何地方可以访问导致问题的 SQL 语句和引发的异常，我会很好奇为什么，以及这是如何可能的。我建议你重新设计你的代码，这样你就有了这样的位置。

**编辑：**由于您希望首先在日志中查看 SQL 语句，因此您可能还可以覆盖 DatabaseException 的 toString() 方法（或其他适当的方法；我不确定打印出异常时会调用什么）打印出包含的 SQL 语句，假设您按照我上面的描述包含了它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-21T08:40:28.663

我认为最简单的方法是使用第三方产品，如 p6spy。它位于您的 jdbc 驱动程序和数据库之间，并报告正在运行的确切查询。它很容易按需运行，因为它是作为另一个 JDBC 驱动程序实现的，它将委托给您的实际 JDBC 驱动程序。非常强大的工具，我无法想象没有它。

[http://www.p6spy.com/](http://www.p6spy.com/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-04-21T06:16:04.970

stacktrace 可以将您指向导致问题的 DAO 方法，不是吗？

注释后编辑：如果您的 SQL 查询很复杂并且是从代码的前面部分动态生成的，那么您可以在执行这些语句之前记录（级别 TRACE 或 DEBUG）这些语句。在日志记录配置中，您只能为 DAO 启用日志。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-04-21T07:01:17.763

为什么不在所有 JDBC 调用 (log4j) 周围添加一个文件记录器？

每当您进行 SQL 调用时，您都会记录 SQL 以及执行所需的时间。简单的东西。

我们对外部系统的任何调用都执行此操作，例如 SOAP 调用、RMI、Corba 等。它几乎每天都被证明是无价的，如果它影响性能.. 我没有注意到！

如果您有安全问题，即不希望它进入客户端机器上的日志文件，您可以使用 SocketAppender 并将其发送到远程机器以进行集中日志记录。这不会完全安全，但会阻止随意的窥探者。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-04-21T14:38:06.807

监视您正在执行的查询的另一个解决方案是[pgFouine](http://pgfouine.projects.postgresql.org/)，它分析和报告 Postgres 生成的日志

# batch-file - 64位Vista中批量文件查询注册表

> ID：771240
> 
> 赞同：0
> 
> 时间：2009-04-21T06:13:44.007
> 
> 标签：batch-file, scripting, 64-bit, registry

大家好，我又来了 :) 我写的批处理文件有问题。它在 32 位上运行良好，但显然它在 64 位系统上不起作用，我不知道为什么，因为我无法访问 64 位系统。

这是适用于 Vista 32 位系统的代码

```
 @echo off
Set Reg.Key=HKLM\SOFTWARE\Malwarebytes' Anti-Malware
  Set Reg.Val=InstallPath
  For /F "Tokens=2*" %%A In (
   'Reg Query "%Reg.Key%" /v "%Reg.Val%" ^| Find /I "%Reg.Val%"'
  ) Do Call Set MBAMPATH=%%B 
```

有人可以重写它以在 64 位上工作吗？

总是感谢:)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-04-21T08:12:14.440

x86 和 x64 版本的 Windows 上的批处理文件没有区别。您遇到的问题是由于 WoW64 和透明的注册表重定向，请参阅[此处](http://support.microsoft.com/kb/896459)了解更多详细信息。

`HKLM\SOFTWARE\Wow6432Node`是 64 位安装的 Windows 上 32 位软件的正确注册表项，并且此代码适用于我的机器：

```
Set Reg.Key=HKEY_LOCAL_MACHINE\SOFTWARE\Wow6432Node\Malwarebytes' Anti-Malware
Set Reg.Val=InstallPath
For /F "Tokens=2*" %%A In (
    'Reg Query "%Reg.Key%" /v "%Reg.Val%" ^| Find /I "%Reg.Val%"' )
Do Call Set MBAMPATH=%%B
echo %mbampath% 
```

您的另一篇文章包含一个基于 %processor_architecture% 环境变量的条件分支。问题在于（至少在我的机器上）`%processor_architecture%`不是.`"AMD64"``"x64"`

为什么不只查询两个可能的注册表项，而不是基于架构进行分支？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-21T06:26:14.837

首先，我不知道 64 位 Windows 上的批处理文件与 32 位相比有什么不同。

您可以尝试`echo off`从头开始删除以查看哪一行产生了哪个错误消息（假设您看到任何错误消息）。

但是，可能与您在`for`循环中使用的撇号发生冲突。您可以尝试将其更改为

```
for /f "usebackq tokens=2*" %%A in (`Reg Query "%Reg.Key%" /v "%Reg.Val%" ^| Find /I "%Reg.Val%"`) Do Call Set MBAMPATH=%%B 
```

当我们在做的时候。你为什么在`call` `set`那儿？这不是必需的，因此您也可以将其删除：

```
... do set MBAMPATH=%%B 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-06-11T16:36:02.043

我有一个类似的问题，我需要知道 Notepad++ 安装目录。如果它在 x64 操作系统上，那么我需要查看 HKLM\SOFTWARE\Wow6432Node\Notepad++ reg 键。我不寻找处理器拱门的原因是您可以将 32 位操作系统放在支持 64 位的机器上。这是我想出的代码，似乎为我找到了正确的路径：

:: 找出 x86 或 x64 操作系统 - 需要不同的 reg 键来查询安装目录 IF EXIST "%PROGRAMFILES(X86)%" goto X64 ELSE goto X86

:X64 FOR /F "tokens=2* delims=" %%A IN ('REG QUERY "HKLM\SOFTWARE\Wow6432Node\Notepad++" ')DO SET NPPPath="%%B\plugins\APIs" echo NPPPath 是 % NPPPath% SET BITNESS="SixtyFour" 转到 CopyAPIFile

:X86 FOR /F "tokens=2* delims= " %%A IN ('REG QUERY "HKLM\SOFTWARE\Notepad++" ')DO SET NPPPath="%%B\plugins\APIs" :: echo NPPPath 是 % NPPPath% SET BITNESS="ThirtyTwo" 转到 CopyAPIFile

# php - WAMP：如何在浏览器中显示警告消息？

> ID：771241
> 
> 赞同：7
> 
> 时间：2009-04-21T06:14:03.087
> 
> 标签：php, wamp

我在我的机器上安装了 WAMP，我正在开发一个 PHP 网站。谁能告诉我要更改哪些设置才能在浏览器中显示所有错误/警告消息？

提前致谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-04-21T06:58:18.503

您需要同时设置[error_reporting](http://au.php.net/manual/en/errorfunc.configuration.php#ini.error-reporting)和[display_errors](http://au.php.net/manual/en/errorfunc.configuration.php#ini.display-errors)。这些可以在 php.ini、Apache（如果您使用 PHP 作为 Apache 模块）或在运行时设置，但如果您在运行时设置，则不会影响某些类型的错误，例如作为解析错误。

对于可移植性 - 也就是说，如果你想在应用程序中设置它 - 尝试在 .htaccess 中设置它们：

```
# note: PHP constants such as E_ALL can't be used when setting it in Apache
php_value error_reporting 2147483647

php_flag display_errors on 
```

或者，您可以在 httpd.conf 中设置这些

**display_errors**确保所有报告的错误都实际输出到浏览器（在实时服务器上，通常将它们记录到文件中）。 **error_reporting**指定应该记录/显示哪些类型的错误。

对于实时服务器，最好不要公开显示错误（但您可能仍想记录它们）。无论哪种方式，将 error_reporting 设置为更具包容性的值仍然是个好主意（根据 PHP 文档，2147483647 是现在和未来可能最具包容性的值），因为忽略错误通常是个坏主意。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-04-21T06:37:11.703

首先单击任务面板中的 wamp 图标。然后单击“PHP”文件夹，然后单击“PHP 设置”文件夹。确保“暴露 PHP”和“显示错误”都被选中。您还可以设置其他错误设置，例如“跟踪错误”和“显示启动错误”。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-21T06:35:15.750

找到您的 php.ini 文件，在阅读评论时向下滚动。有一个用于启用/禁用错误输出的全局设置。相应地改变它。重新启动您的 Apache。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-03-21T21:28:09.127

我总是使用这段代码：

```
ini_set('display_errors', 1);
ini_set('display_startup_errors', 1);
error_reporting(E_ALL); 
```

如果您使用 OOP PHP 编写代码，则创建新方法**showError()**并在您需要的每个文件中调用它。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-04-21T06:40:32.820

打开您的`php.ini`并搜索选项**`error_reporting`**。

将其更改为**`E_ALL & ~E_NOTICE`**.

这将显示所有错误和警告，但没有通知。

就我个人而言，我总是`E_ALL`在我的开发机器上使用，因为这些通知通常是潜在代码问题的迹象。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-04-22T07:53:33.773

如果有人正在使用 CodeIgniter，则将此代码传递给控制器​​的构造函数。这将解决您的问题。

```
ini_set('display_errors', 1);
ini_set('display_startup_errors', 1);
error_reporting(E_ALL); 
```

# python - (Python) socket.gaierror: [Errno 11001] getaddrinfo 失败

> ID：771247
> 
> 赞同：3
> 
> 时间：2009-04-21T06:18:24.697
> 
> 标签：python, sockets

我不确定这段代码有什么问题，我不断收到 socket.gaierror 错误；\。

```
import sys
import socket
import random

filename = "whoiservers.txt"

server_name = random.choice(list(open(filename)))

print "connecting to %s..." % server_name

s = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
s.connect((server_name, 43))
s.send(sys.argv[1] + "\r\n")
response = ''
while True:
    d = s.recv(4096)
    response += d
    if d == '':
        break
s.close()
print
print response

    s.connect((server_name, 43))
  File "<string>", line 1, in connect
socket.gaierror: [Errno 11001] getaddrinfo failed 
```

### 更新：

添加后`server_name = random.choice(list(open(filename)))[:-1]`我不再得到那个 socket.gaierror 但我得到：

> socket.error: [Errno 10060] 连接尝试失败，因为连接方在一段时间后没有正确响应，或者连接失败，因为连接的主机没有响应

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-04-21T06:41:13.333

我认为问题是`server_name`.

如果您的文件格式`whoiservers.txt`是每行一个主机名，那么您需要在主机名末尾删除换行符，然后再将其传递给`s.connect()`

因此，例如，将打开的行更改为：

```
server_name = random.choice(list(open(filename)))[:-1] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-21T18:49:49.137

也许您和这些阻止请求的服务器之间有防火墙？您发布的最后一个错误导致人们相信它根本无法连接到服务器......

# sql-server - 单个记录的大小？SQL

> ID：771248
> 
> 赞同：16
> 
> 时间：2009-04-21T06:19:22.230
> 
> 标签：sql-server, sql-server-2005

我有一个场景，每个用户都被分配了 2 MB 的数据库空间。现在我必须显示其分配空间的百分比使用情况，为此我需要知道表中单个记录的大小。

我曾尝试使用 sp_spaceused ，甚至编写了一个使用 datalength 的自定义过程 .. 但它们的结果显示出巨大的差异。

有什么办法可以解决这个问题。

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2009-04-21T13:08:03.060

Run [DBCC SHOWCONTIG](http://msdn.microsoft.com/en-us/library/ms175008.aspx) with your table name

```
dbcc showcontig ('TableName') with tableresults 
```

then look at max min and average record size

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2009-05-11T21:02:45.640

以下查询将通过查看数据库对象分配的页面数来告诉您数据使用的@SpaceAllotted 百分比。

不值得尝试在行级别测量使用情况，因为 SQL Server 在范围级别分配所有空间。每个区段由 8 个 8KB 数据页组成。因此，如果您的数据库只有一行，并且该行有 4 个字节的数据，则仍需要分配整个范围来保存这 4 个字节（或者将使用具有未分配页面的现有范围。这称为混合范围）。

```
DECLARE @SpaceAllotted      FLOAT
-- 2MB converted to kilobytes...
SET     @SpaceAllotted = 2048

SELECT 
    -- Allocation is done on the extent-level.
    -- Each extent contains eight 8KB data pages.
    ((1 / (@SpaceAllotted)) * CEILING(CAST(SUM([ips].[page_count]) AS FLOAT) / 8) * 64) * 100 AS PercentageUsed
FROM
    [sys].[dm_db_index_physical_stats](DB_ID(), NULL, NULL, NULL, NULL) ips
    -- This will allow us to retrieve the page count of all tables in the
    -- current database, regardless of whether or not they have clustered
    -- indexes and/or non-clustered indexes.
INNER JOIN
    [sys].[indexes] i
    ON
        [ips].[object_id] = [i].[object_id]
    AND [ips].[index_id] = [i].[index_id] 
```

由于我们确实有混合范围的可能性，并且没有*好的*方法（有一些方法，但它们不会很漂亮）来确定哪些页面分配到什么范围，这不是 100% 准确的。此外，extent 甚至可能有空闲页面（被保留，因此仍占用磁盘空间），所以一般来说，这个估计值总是很低。但是，如果不编写任何东西来在页面级别检查数据库，这可能是您将获得的最好结果。

啊，是的，看看其他答案，这是另一种选择。这基本上会查看页面中数据文件的所有当前大小，并确定它们已消耗的空间百分比。现在，这里也有一些警告......

*   如果没有为数据库指定最大大小（自动增长已启用且不受限制），则不会执行此操作，因为*max_size*将返回为**-1**。
*   同样，我们无法准确确定实际数据使用了多少空间。在这里，我们正在查看文件系统上实际使用了多少空间。
*   我们不是在查看日志文件空间。是的，这仍然会消耗磁盘空间。

希望其中之一可以解决您的问题。

```
SELECT 
    ((1 / CAST(SUM([df].[max_size]) AS FLOAT)) * CAST(SUM([df].[size]) AS FLOAT)) * 100 AS PercentUsed
FROM 
    [sys].dm_io_virtual_file_stats(DB_ID(), NULL)   vfs
INNER JOIN 
    [sys].[database_files]  df
    ON 
        [vfs].[file_id] = [df].[file_id]
WHERE 
    [df].[type] = 0 
```

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2012-09-26T17:11:13.440

由于 showcontig 将被弃用，您还可以使用：

```
SELECT * FROM sys.dm_db_index_physical_stats
(DB_ID(N'DatabaseName'), OBJECT_ID(N'TableName'), NULL, NULL , 'DETAILED') 
```

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2009-04-21T07:05:13.087

您可以使用相当复杂的公式计算一行（行数）的大小。[在线](http://msdn.microsoft.com/en-us/library/ms189124.aspx)看书(ms-help://MS.SQLCC.v9/MS.SQLSVR.v9.en/udb9/html/81fd5ec9-ce0f-4c2c-8ba0-6c483cea6c75.htm)。

简而言之：

对于固定长度的数据类型，取列数并根据其数据类型确定每列的大小。

计算用于任何可空列的空间然后计算行空间：

Row_Size = Fixed_Data_Size + Variable_Data_Size + Null_Bitmap + 4

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-04-21T06:25:25.353

数据保存在磁盘上为数据库命名的目录中。这包括所有内容，包括您未测量的内容（指数等）。测量那个。

# c# - C# Convert.ToDateTIme 函数是否将日期读取为“dd/mm/yyyy”或“mm/dd/yyyy”？

> ID：771249
> 
> 赞同：7
> 
> 时间：2009-04-21T06:19:52.730
> 
> 标签：c#, .net, sql-server-2005, datetime

C# Convert.ToDateTIme 函数是否将日期读取为“dd/mm/yyyy”或“mm/dd/yyyy”？

我在本地机器上有相同的应用程序，我上传到我的远程共享服务器。它在我的本地机器上运行良好，读取“dd/mm/yyyy”，但在我的远程机器上，它似乎将日期读取为“mm/dd/yyyy”。我在两者上都有相同的文化设置“en-GB”。

我发现这种日期转换非常难以预测。任何人都可以推荐一种从 SQL Server 2005 数据库中读取日期字符串的文化证明方式吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-04-21T06:27:55.627

好吧，听上去……服务器上的一项设置已关闭。

我会用细齿梳检查“区域和语言”选项，并确保某些东西没有被覆盖，但如果失败了。

您可以尝试明确设置文化信息

```
 string x = "21/01/2009";

        CultureInfo ci = new CultureInfo("en-GB");

        Convert.ToDateTime(x, ci); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-04-21T06:23:34.000

为什么不简单地使用 datetime 数据类型？然后，从您的 sql 数据阅读器中，使用： reader.GetDateTime(int column)

另一种选择：如果您必须以字符串形式传递日期，请使用 ISO 格式：yyyy-MM-dd

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-04-21T06:23:36.683

您的日期实际上是如何存储在 SQL Server 中的？如果它们存储为，`datetime`那么您应该能够将它们作为 DateTime 值读取，而无需使用 Convert.ToDateTime()。你能告诉我们查询和/或 C# 代码吗？

**编辑**

你在问题的最后提到了 SQL Server，这让我很失望！您是否考虑过使用 DateTimePicker 而不是 TextBox？ASP.NET 有日期选择器控件，对吧？然后它可以为你做解析。

# mysql - 复制Mysql数据库的数据库结构

> ID：771253
> 
> 赞同：3
> 
> 时间：2009-04-21T06:20:34.663
> 
> 标签：mysql, database-design

我正在使用 MySql 5.1 数据库。

我创建了一个项目数据库。（模板数据库）

并且想要从应用程序创建相同数据库的副本，每次用户创建一个新项目。

如何复制和创建相同结构的新数据库？

这样做的命令是什么？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2009-04-21T07:09:57.617

如果您只想将表结构等从一个数据库复制到另一个数据库，您可以使用这个 bash 行：

```
mysqldump -u user -ppass -d olddb | mysql -u user -ppass -Dnewdb 
```

新数据库必须已经存在。mysqldump 命令中的 -d 标志防止复制数据。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-21T06:22:39.540

使用 -d 选项转储数据库。

要创建新副本，请执行“create database new-database-name; use new-data-base-name;”，然后将转储文件作为 sql 脚本运行。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-23T22:33:18.743

查看 SHOW CREATE TABLE 命令： [https](https://dev.mysql.com/doc/refman/5.0/en/show-create-table.html) ://dev.mysql.com/doc/refman/5.0/en/show-create-table.html 它将返回用于创建给定表的创建命令。

# svn - 更改 Word 文件时如何最小化源代码控制增量？

> ID：771254
> 
> 赞同：2
> 
> 时间：2009-04-21T06:20:59.543
> 
> 标签：svn, version-control, ms-word

在源代码控制/Subversion 中使用 Word 文件时，我可以做些什么或考虑做些什么，以尽量减少存储库中更改的大小？

**背景**

对于一个项目，我们有一个 Word 文档，其中包含我们的功能规范以及源代码控制 (Subversion) 中原型的屏幕截图。Word 文件本身约为 2.5 MB。

最近我更改了大约十个部分的标题并更新了目录。然后我将它检查到 Subversion (svn) -*只有*描述的更改。

签入后，我检查了 svn-repository 中的 diff 文件的大小，惊讶地发现它略大于 1 MB。我曾希望它会“小”，比如小于 100 kB。

* * *

编辑：目前该文件是 Word 2003 格式（doc），但我使用 Word 2007，所以如果这会减小存储库增量的大小，我可以更改为 Word 2007 格式（docx）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-21T06:30:30.723

这是以某种编码格式（HTML、Tex、wiki 语法）编写文档并将其转换为其他格式（Word、HTML 网页、Windows 帮助文件、手册页、PDF）的原因之一

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-21T21:22:18.830

另请参阅[我可以使用 Subversion 可靠地合并两个 Microsoft Word 文档吗？](https://stackoverflow.com/questions/90202/can-i-merge-two-microsoft-word-documents-reliably-with-subversion/688327#688327)

您可以使用 Word（另存为 .. XML 文档）将 docx 文档保存为“平面 OPC”XML 格式，但您可能需要先漂亮地打印 XML，因为它都在一行上。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-21T06:24:33.827

首先尝试禁用[快速保存](http://support.microsoft.com/kb/197978/EN-US/)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-04-21T10:00:46.257

正如有人已经指出的那样，如果使用某种 XDelta 存储二进制文件，它不能保证“补丁”会比文件本身小……有时补丁几乎和文件本身一样大。

尝试更改 Photoshop 图片上的 RGB 值并运行 XDelta...补丁将几乎与文件本身一样大。

但是，恕我直言，你不应该担心这一点。大多数现代 SCM（GIT，Plastic SCM，...）都会压缩您的文件，因此存储不会成为一个大问题......虽然我想我们永远不会购买这句话“不要担心磁盘空间，因为它是现在便宜” :-P

# iphone - 简单分配不适用于 UIImage* / imageNamed

> ID：771257
> 
> 赞同：0
> 
> 时间：2009-04-21T06:22:07.153
> 
> 标签：iphone, cocoa-touch

```
UIImage* test = [UIImage imageNamed:@"test.png"];
self.image_in_controller = test; 
```

稍后在使用 image_in_controller 的代码中，我得到 EXC_BAD_ACCESS。

我在分配时设置了一个断点。变量 test 设置得很好。分配给 selfimage_in_controller 后，test 仍然可以，但 image_in_controller 指向 0x0（不是 nil）。

如果我在模拟器中运行相同的代码，它工作正常（self.image_in_controller 有一个有效的点地址）。

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-04-21T06:29:35.997

该财产是否`image_in_controller`为保留财产？如果没有，您将必须通过`retain`消息明确获取图像的所有权。所以其中之一：

```
@property(retain) UIImage* image_in_controller; 
```

或者

```
self.image_in_controller = [test retain]; 
```

应该存在。EXC_BAD_ACCESS 通常是由使用已销毁的对象引起的。另外，测试以确保测试实际上不是零。你可以用一个断言来做到这一点：

```
NSParameterAssert(test); 
```

就在分配测试之后。如果 UIImage 出于某种原因在设备上未返回有效对象，它将通知您。

最后，0x0 是 的内存地址`nil`，因此您经常会在调试器中看到它，并且可以（出于所有意图和目的）将其视为与 nil、Nil、NULL 和 0 相同。

# sql - 验证列是否具有空值

> ID：771265
> 
> 赞同：2
> 
> 时间：2009-04-21T06:24:16.557
> 
> 标签：sql, sql-server, performance, oracle, null

哪个 SQL 可以更快地验证特定列是否具有空值，为什么？

1) SELECT * FROM TABLE1 WHERE COL1 为空

执行此查询，然后检查您是否能够读取任何记录。如果是，则有空值。

2) 从表 1 中选择 COUNT(COL1)，其中 COL1 为空

读取返回的计数以确定是否有任何空记录

使用 Oracle10g 和 SQLServer2005。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-04-21T12:57:05.193

Count(columnName) 永远不会计算 NULL 值，当您指定列名时 count 会跳过 NULLS，并且在使用 * 时会计算 NULLS

运行这个

```
CREATE TABLE testnulls (ID INT)
INSERT INTO testnulls VALUES (1)
INSERT INTO testnulls VALUES (2)
INSERT INTO testnulls VALUES (null)

SELECT count(*) FROM testnulls WHERE ID IS NULL --1

SELECT count(ID) FROM testnulls WHERE ID IS NULL --0 
```

我会改用存在，因为它是一个布尔运算，并且会在第一次出现 NULL 时停止

```
IF EXISTS (SELECT 1 FROM testnulls WHERE ID IS NULL)
PRINT 'YES'
ELSE
PRINT 'NO' 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-04-21T06:44:07.303

基于 kquinn 的答案，在甲骨文中将是

```
SELECT COL1 FROM TABLE1 WHERE COL1 IS NULL AND ROWNUM = 1; 
```

> 这样，DBMS 只需在给您答案之前读取一行；

然而，这种说法具有误导性。它必须读取所有行，直到找到缺少列值的行。然后它可以停止并返回该行。

如果没有这样的行，它将读取整个表。

> 因此有可能使用 COL1 上的索引来满足查询，从而使查询速度更快。

仅指定 COL1 不会产生太大影响，至少在 Oracle 上，其中（常规 B-Tree）索引不能用于查找 NULL 值。

如果您有兴趣稍后识别行，您可能希望选择更多列（例如主键值）。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2009-04-21T06:27:31.197

我不了解 Oracle，但对于 SQL Server，这个选项可能是最快的：

```
SELECT TOP 1 COL1 FROM TABLE1 WHERE COL1 IS NULL; 
```

这样，DBMS 只需在给您答案之前读取一行；其他选项必须读取*所有*非空行。而且我已经指定`COL1`而不是`*`，因此可以使用索引满足查询`COL1`，从而使查询速度更快。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-01-17T21:58:57.260

# 多个解决方案（列包含一些 NULL | 列全部为 NULL * 测试单列 | 使用表格结果测试多列）

如果您需要测试多个列，可以使用以下内容：

```
Column_1 Column_2 Column_3
-------- -------- --------
1        2        NULL
1        NULL     NULL
5        6        NULL 
```

**首先**，测试 NULL 并计算它们：

```
select 
    sum(case when Column_1 is null then 1 else 0 end) as Column_1, 
    sum(case when Column_2 is null then 1 else 0 end) as Column_2, 
    sum(case when Column_3 is null then 1 else 0 end) as Column_3,
from TestTable 
```

产生 NULL 计数：

```
Column_1  Column_2  Column_3
0         1         3 
```

如果结果为 0，则没有 NULL。

**其次**，让我们计算非空值：

```
select 
    sum(case when Column_1 is null then 0 else 1 end) as Column_1, 
    sum(case when Column_2 is null then 0 else 1 end) as Column_2, 
    sum(case when Column_3 is null then 0 else 1 end) as Column_3,
from TestTable 
```

...但是因为我们在这里计算非 NULL，所以可以简化为：

```
select 
    count(Column_1) as Column_1, 
    count(Column_2) as Column_2, 
    count(Column_3) as Column_3,
from TestTable 
```

任何一个都会产生：

```
Column_1  Column_2  Column_3
3         2         0 
```

如果结果为 0，则该列完全由 NULL 组成。

**最后**，如果您只需要检查特定列，那么 TOP 1 会更快，因为它应该在第一次点击时停止。然后，您可以选择使用 count(*) 来给出布尔样式的结果：

```
select count(*) from (select top 1 'There is at least one NULL' AS note from TestTable where Column_3 is NULL) a 
```

0 = 没有 NULL，1 = 至少有一个 NULL

```
select count(*) from (select top 1 'There is at least one non-NULL' AS note from TestTable where Column_3 is not NULL) a 
```

0 = 它们都是 NULL，1 = 至少有一个非 NULL

我希望这有帮助。

# c# - 如何解释这个 C# 堆栈跟踪？零行错误

> ID：771272
> 
> 赞同：1
> 
> 时间：2009-04-21T06:26:08.080
> 
> 标签：c#, asp.net, exception, stack-trace

我在日志中的堆栈顶部收到“对象引用未设置为对象的实例”错误（C# ASP.NET 应用程序）：

```
@Web.UI.UserBrochurePage.Page_Load(Object,EventArgs)+25 Line: 0  
@System.Web.Util.CalliHelper.EventArgFunctionCaller(IntPtr,Object,Object,EventArgs)+0 Line: 0  
@System.Web.Util.CalliEventHandlerDelegateProxy.Callback(Object,EventArgs)+26 Line: 0  
@System.Web.UI.Control.OnLoad(EventArgs)+38 Line: 0 
@System.Web.UI.Control.LoadRecursive()+35 Line: 0
@System.Web.UI.Page.ProcessRequestMain(Boolean,Boolean)+1160 Line: 0 
```

我不明白的事情：

1.  每个错误都在零行
2.  最有趣的错误（在我的代码中最上面的错误）后面有一个“+25”。我从来不明白这些是什么意思，尽管我认为它们是在线上的字符偏移量......如果是这样的话，它就不会指向任何有意义的东西（参数声明的中间）。

这是一个处于发布模式的生产系统，但我通常仍然可以从堆栈跟踪对象中获取行号。在这种情况下，不幸的是，该错误不会在我们的调试系统上重现，所以我只能尽力而为。

任何意见，将不胜感激。

谢谢，汤姆

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-04-21T06:38:48.177

我认为您在堆栈跟踪中的每个调用都会看到“第 0 行”，因为您的代码是在发布模式而不是调试模式下编译的。在调试模式下，您的代码将被编译为包含一个调试符号文件 (.pdb)。当此文件可用时，您的异常堆栈跟踪将准确表示行号。

在任何情况下，只有 Page_Load 的行号很重要，因为其余的是框架程序集的内部调用。

每个堆栈跟踪条目之后的 +xx 数字显然是“[本地代码的字节偏移量](https://stackoverflow.com/questions/305244)”。我承认，最初在我看来，这是执行时间，以滴答或毫秒为单位。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-04-21T06:35:59.430

有关了解偏移量的信息，请参阅[此问题。](https://stackoverflow.com/questions/305244)我怀疑您真的应该只在其中构建带有调试信息的生产二进制文件 - 这比检查 IL 来确定偏移量意味着哪一行要容易得多。

# vb.net - 如果在 VB .NET 中，则为一行

> ID：771273
> 
> 赞同：87
> 
> 时间：2009-04-21T06:26:10.233
> 
> 标签：vb.net, conditional-operator

是否可以在 VB .NET 中执行一行 if 语句？如果是这样，怎么做？

* * *

## 回答 #1

> 赞同：129
> 
> 时间：2009-04-21T06:54:30.133

使用 IF()。

它是一个短路三元运算符。

```
Dim Result = IF(expression,<true return>,<false return>) 
```

也可以看看：

*   [IIF 变为 If，并且是一个真正的三元运算符](http://www.panopticoncentral.net/2007/05/08/iif-becomes-if-and-a-true-ternary-operator/)

*   [VB.NET 中有条件三元运算符吗？](https://stackoverflow.com/questions/576431/is-there-a-conditional-ternary-operator-in-vb-net)

*   [Orcas 引入了 IF 运算符 - 一种新的和改进的 IIF](http://blogs.msdn.com/vbteam/archive/2008/03/11/if-operator-a-new-and-improved-iif-sophia-salim.aspx)

*   [VB.NET 中的三元运算符](http://blog.dmbcllc.com/2007/11/29/the-ternary-operator-in-vbnet/)

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2009-04-21T06:29:04.843

其实很简单。。

```
If CONDITION Then ..INSERT CODE HERE.. 
```

* * *

## 回答 #3

> 赞同：19
> 
> 时间：2016-01-28T14:50:35.433

**单线**

句法：

```
If (condition) Then (do this) 
```

例子：

```
If flag = true Then i = 1 
```

**多个 ElseIf**

句法：

```
If (condition) Then : (do this)
ElseIf (condition2) Then : (do this)
Else : (do this)
End If 
```

或者

```
If (condition) Then : (do this) : ElseIf (condition2) Then : (do this) : Else : (do this) : End If 
```

**多重操作**

句法：

```
If (condition) Then : (do this) : (and this) : End If 
```

* * *

## 回答 #4

> 赞同：17
> 
> 时间：2009-07-28T04:54:57.463

冒着让最纯粹的人和 c# 程序员感到畏缩的风险，您可以在 VB 中的单行 if 语句中使用多个语句和 else。在此示例中，y 最终为 3 而不是 7。

```
i = 1
If i = 1 Then x = 3 : y = 3 Else x = 7 : y = 7 
```

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2009-04-21T06:30:45.450

或者

```
IIf(CONDITION, TRUE_ACTION, FALSE_ACTION) 
```

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2009-04-21T06:28:38.840

只需添加`Then`：

```
If A = 1 Then A = 2 
```

或者：

```
If A = 1 Then _
    A = 2 
```

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2016-05-05T16:11:54.273

## **一行“如果语句”**

比你想象的要容易，注意到没有人投入我所拥有的东西，所以我会投入我的 2 美分。

在我的测试中，你不需要`continuation? semi-colon`，你可以不用，也可以不用`End If`.

`<C#> = Condition.`

`<R#> = True Return.`

`<E> = Else Return.`

**单一条件**

```
If <C1> Then <R1> Else <E> 
```

**多个条件**

```
If <C1> Then <R1> Else If <C2> Then <R2> Else <E> 
```

**无限的？条件**

```
If <C1> Then <R1> Else If <C2> Then <R2> If <C3> Then <R3> If <C4> Then <R4> Else...
' Just keep adding "If <C> Then <R> Else" to get more 
```

*-不确定如何格式化以使其更具可读性，所以如果有人可以提供编辑，请做-*

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2016-09-05T10:33:18.390

```
If (X1= 1) Then : Val1= "Yes" : Else : Val1= "Not" : End If 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2009-04-21T06:31:01.593

您也可以使用 IIf 函数：

```
CheckIt = IIf(TestMe > 1000, "Large", "Small") 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2014-01-07T12:12:09.933

它在 VB.NET 代码中易于使用

**基本语法 IIF（表达式为布尔值，真部分为对象，假部分为对象）作为对象**

1.  使用与三元相同的 IIF
2.  将 myVariable 调暗为 string=""
3.  myVariable = IIf（条件，真，假）

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2019-04-04T06:36:26.903

```
If (condition, condition_is_true, condition_is_false) 
```

在更长的版本中看起来像这样：

```
If (condition_is_true) Then 

Else (condition_is_false)

End If 
```

# wpf - 在 WPF 中调整控件的大小

> ID：771275
> 
> 赞同：4
> 
> 时间：2009-04-21T06:26:20.983
> 
> 标签：wpf, controls, resize

我的 wpf 表单中有一组用户控件，并希望让用户能够调整它们的大小。每当用户单击控件时，应出现总共 8 个边界矩形，然后通过拖动其中任何一个，用户必须能够调整控件的大小。请帮助我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-21T06:57:54.323

你想要的是建立一个调整大小的装饰器。如果你谷歌它，你会发现！ [http://dvuyka.spaces.live.com/blog/cns!305B02907E9BE19A!144.entry](http://dvuyka.spaces.live.com/blog/cns!305B02907E9BE19A!144.entry) 不知道这是否是最好的样本，但无论如何这是一个好的开始！/西蒙

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-06-04T02:14:59.197

我制作[了一个库](https://gitlab.com/rr789/wpf-resize-adorner)，可以将调整大小的夹点应用于任何控件。

[![在此处输入图像描述](https://i.stack.imgur.com/UBk4O.png)](https://i.stack.imgur.com/UBk4O.png)

主页有一个快速的 gif 视频显示它在行动中。

很简单，只需调用一行代码。

```
//Set max resize to 200px max height, 300px max width.
new CResizeAdorner(button1, 200, 300); 
```

# data-binding - 如何调整绑定到列表的 DataGrid 列的大小 ，不是数据集？

> ID：771289
> 
> 赞同：0
> 
> 时间：2009-04-21T06:30:56.900
> 
> 标签：data-binding, windows-mobile, compact-framework

我正在尝试在基于 Compact Framework 3.5 Window Mobile Professional 6 SDK 的项目中使用控件，通过将 绑定到这样的实例`System.Windows.Forms.DataGrid`来显示类型对象的一些属性：`Something``DataGrid``List<SomethingWrapper>`

```
public class SomethingWrapper {
   private Something data;
   public SomethingWrapper(Something data) { this.data = data; }
   public string Column1 { get { /* string from this.data */ } }
   public string Column2 { get { /* string from this.data */ } }
}

public class SomethingList : List<SomethingWrapper> {
   public SomethingList(IEnumerable<Something> items) {
      foreach (var item in items) Add(new SomethingWrapper(item));
      Sort((a, b) => a.Column2.CompareTo(b.Column2);
   }
}

/* ... */

IEnumerable<Something> dataToShow = /* assume this is filled correctly */
SomethingDataGrid.DataSource = new SomethingList(dataToShow); 
```

这似乎工作正常：正确的数据显示在网格中，两列称为`Column1`并`Column2`在第二列上排序。我希望这是该数据的只读视图，所以一切都很好。

*但是，我想设置列宽，但似乎无法让它工作......*

已尝试明显：创建`TableStyle`，为每列创建文本框列样式实例，将其添加到`TableStyle`并设置`SomethingDataGrid.TableStyle`为生成的表格样式。（这是来自记忆，或者我也会显示我正在使用的确切代码。如果需要，我可以在今天晚些时候将其添加到问题中。）

然而什么都没有改变。我怀疑这与`MappingName`对象有关`TableStyle`；昨天晚上我能找到的所有示例似乎都是用于将 a数据绑定`DataSet`到. 否则，表格样式将无法达到您的预期，这是我看到的行为。`DataGrid``MappingName``DataSet`

问题：我是否在正确的地方寻找问题的解决方案，如果是，`TableStyle.MappingName`在绑定到 a`List<T>`以显示`T`...的属性时我需要设置什么？

（尝试检查可能的重复项，但无法找到完全匹配的内容。如果我发现那里错了，请纠正我。）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-21T07:23:04.090

啊，毕竟看起来不够好：[发现重复问题](https://stackoverflow.com/questions/420386/how-do-you-get-the-proper-mapping-name-from-a-binding-source-bound-to-a-listt-or)。将尝试从绑定源派生`BindingList<T>`和/或使用绑定源，以便我可以开始调用`BindingSource.GetListName(null)`以获取`MappingName`. 希望这会有所帮助。如果没有，我会回来的...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-22T19:43:58.670

您可以通过创建 DataGridTableStyle

这是我使用的扩展方法：

```
public static void SetColumnStyles<T>(this DataGrid ctrl, T data, params ColumnStyle[] column) where T: class 
    {
        var ts = new DataGridTableStyle();
        ts.MappingName = data.GetType().Name;

        foreach (var style in column)
        {
            ts.GridColumnStyles.AddColumn(style.Header, style.Column, style.Width);
        }

        ctrl.TableStyles.Clear();
        ctrl.TableStyles.Add(ts);
    } 
```

然后我这样称呼它：

```
 var newList = queriableData.ToList();
    ProductEdit.DataSource = newList;
    ProductEdit.SetColumnStyles(newList, new[]
                                      {
                                          new ColumnStyle("Name", 200),
                                          new ColumnStyle("Manufacturer", 100),
                                          new ColumnStyle("Size", 20)
                                      }); 
```

其中 newList 是对象的通用列表。

# multithreading - 如何在类中创建线程？

> ID：771298
> 
> 赞同：2
> 
> 时间：2009-04-21T06:35:46.730
> 
> 标签：multithreading, oop, programming-languages

当我们用OO语言编程时，有没有可以用来创建线程的模板？

如何为 OO 语言设计线程包？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-04-21T06:39:42.103

### 支持

C++0x 将支持[标准库](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2007/n2320.html)中的线程。

截至目前，每个平台都有自己的线程实现方式（[Windows](http://www.boost.org/doc/libs/1_38_0/doc/html/thread.html)、[POSIX](http://www.yolinux.com/TUTORIALS/LinuxTutorialPosixThreads.html)），但您可以使用诸如[boost::thread](http://www.boost.org/doc/libs/1_38_0/doc/html/thread.html)之类的东西，而不必担心特定于平台的东西。

在 Java 中，有一个[Thread 类](http://www.javaworld.com/javaworld/jw-04-1996/jw-04-threads.html)。

### 方法

一般来说，要将一个类放入另一个线程，您将在将该类传递给线程的同时创建一个线程。然后线程将调用该类中的一个函数。这是一些伪 C++ 代码：

```
main()
{
    Object myObject;

    thread = CreateThread(threadFunction, myObject);

    thread.join(); // wait for thread
}

threadFunction(Object theObject)
{
    theObject.doSomething();
} 
```

通过在 C++ 中使用 boost（或 C++0x 线程），这一切都得到了简化，Java 中的 Thread 类会为您处理这些。

### 相关信息

线程应用程序中的一个大问题是线程的同步。这包括[竞争条件](http://en.wikipedia.org/wiki/Race_condition)和[死锁](http://en.wikipedia.org/wiki/Deadlock)等问题，仅举几例。

存在方法/对象来帮助解决这些问题，例如[互斥体](http://en.wikipedia.org/wiki/Mutual_exclusion)。一个互斥锁可以被一个线程锁定，任何其他试图锁定该互斥锁的线程都将被阻塞，直到原始线程释放该互斥锁。

[信号量](http://en.wikipedia.org/wiki/Semaphore_(programming))是一种广义互斥体。

Eric 的帖子中概述了其他有用的概念。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-04-21T06:38:22.607

每个框架都有自己处理线程的方式。我建议您在 java 文档中查找 java 线程类，然后查看 C++ 标准头文件以获取线程详细信息。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-21T06:40:41.290

每种编程语言都有处理线程的特定方法。

[C++ 很大程度上依赖于 Boost](http://www.boost.org/doc/libs/1_38_0/doc/html/thread.html)，所以你可能想检查一下

[爪哇](http://java.sun.com/docs/books/tutorial/essential/concurrency/)

基本上你学到的关于并发的一切都应该适用于你使用的任何操作系统或语言。大约有4个问题你必须学会​​避免

*   死锁
*   活锁
*   比赛条件
*   饥饿

这与您的问题没有直接关系，但这些是您应该在学习给定语言的特定语法的同时学习的主题。Java 当然很容易，而 C++ 可能有点棘手，你的选择

还有许多用于同步线程的“众所周知的方法”，例如

*   活动
*   锁具
*   监视器
*   互斥体
*   信号
*   屏障
*   ...

这个列表一直在继续，但基本上是在帮助“对象”或变量来帮助你解决提到的 4 个问题

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-04-21T06:42:16.730

在 C/C++ 中，线程通常使用函数来实现。（“启动一个新线程并在其中运行此函数，函数结束时销毁该线程。”）

线程框架通常允许将参数传递给函数。使用线程执行 OO 的一种方法是将对象指针（“this”）作为函数参数传递，然后调用对象上的特定方法。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-04-21T06:45:39.577

如果您使用的是 MFC，则 MFC 提供了一些框架助手 API 来处理多线程。看看这篇文章：[使用 C++ 和 MFC 进行多线程](http://msdn.microsoft.com/en-us/library/975t8ks0(VS.71).aspx)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-04-21T06:49:02.940

在 Java 中，您可以使用 Thread 类或 Executor 接口，您可以向其发送可运行对象。查看[java.util.concurrent 包](http://java.sun.com/j2se/1.5.0/docs/api/java/util/concurrent/package-summary.html)。以及 Java 教程的[并发轨迹。](http://java.sun.com/docs/books/tutorial/essential/concurrency/index.html)祝你好运。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-04-21T07:23:27.553

OOP 和多线程编程的主要区别在于，您希望新线程具有对象的（非静态）方法作为其启动函数。

现在有一些编程模型：实现“可运行”接口是最常用的接口。您的类实现了一个标准的“Runnable”接口，该接口具有一个启动方法，该方法通常是一个称为“run”的虚拟方法。您将启动代码放在该虚拟方法中，当您需要生成一个线程时，您创建一个线程对象（通常称为 Thread），然后将实现“Runnable”接口的类的对象传递给它。然后你调用那个“Thread”对象的“start”方法，这将注意你在你的类中编写的启动代码将在一个新线程中运行。在此示例中，“可运行”和“线程” 由所选线程库或您选择的编程语言的标准库/框架提供。另请注意，这两个类的名称可能会有所不同。

在多线程编程方面，C++ 和 Java 有很大的不同：C++ 不支持多线程，而 Java 则内置了对多线程的支持。

因此，对于 C++，您将需要使用专门的线程库，例如 Pthreads ( [http://en.wikipedia.org/wiki/POSIX_Threads](http://en.wikipedia.org/wiki/POSIX_Threads) ) 或更通用的库，例如已经支持线程的 Boost、ACE、POCO。最不推荐的方式是直接调用操作系统的多线程相关服务。

对于 Java，无论您使用什么版本，您都已经内置了对多线程编程的支持。

# sharepoint - Reporting Services 与 SharePoint 的连接

> ID：771306
> 
> 赞同：1
> 
> 时间：2009-04-21T06:40:26.860
> 
> 标签：sharepoint, reporting-services, sharepoint-2007, reportingservices-2005

我需要为来自 SharePoint 列表的数据创建关于 SQL Server Reporting Services 2005 (SSRS) 的报告，

我正在寻找方法来做到这一点，我发现，

1.  连接到 SharePoint Web 服务输出 XML，这里的问题是它有时工作，有时不工作，而且我无法在不同列表之间进行内部连接，可能它在那里，但我认为这样做会很麻烦（如果有简单的方法请告诉我）
2.  在 MS Access 2007 中创建链接到共享点列表的链接表，然后从 SSRS 2005 连接到 MS ACCESS 链接表：这将起作用，但我有点害怕中间有 ACCESS 我总是想避免使用访问
3.  连接到 sharepoints 后端数据库中提供的视图（所有列表都有一个视图，所有列表项都有另一个视图）：这里的列名将很难创建查询，clounm 名称就像 (float1,float2,... ,date1,date2,date3,....) ，我也不确定让 SSRS 直接与 sharepoints 后端数据库视图对话是否是件好事

你能告诉我这些方法中哪一种最好（或者如果有更好的方法请告诉我）

我有点喜欢第三种方式，但不确定我是否应该使用它

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-04-21T15:18:39.050

我在我们的wiki上总结了这个问题，但并不完整。

[http://wiki.threewill.com/display/enterprise/Reporting+on+List+Data+in+SharePoint](http://wiki.threewill.com/display/enterprise/Reporting+on+List+Data+in+SharePoint)。

请注意，我们已经试用了 CorasWorks DIT，它看起来是一种很有前途的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-10T02:08:06.583

查看 SharePoint 列表关联管理器，SLAM。

允许您实时完成您想要做的事情，它是免费的并且得到很好的支持。

[http://slam.codeplex.com](http://slam.codeplex.com)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-30T18:03:58.317

我们每晚都将所有数据导出到 SQL 数据库（由于性能原因，我们还开始将项目从 Sharepoint 中移出）。然后我们使用标准的 Reporting Services 来创建报告......

*   (+) 报告不会影响 Sharepoint 中日常活动的绩效
*   (-) 数据是“一天”的数据

# c# - 更改禁用组合框的前景色

> ID：771307
> 
> 赞同：8
> 
> 时间：2009-04-21T06:40:32.023
> 
> 标签：c#, .net, winforms, combobox, colors

我需要禁用组合框中的黑色前景色。是否可以？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-04-21T18:56:44.203

我过去搜索过有关这方面的信息，据我所知，最好的解决方案是将组合框的**DrawMode更改为***OwnerDrawFixed*或*OwnerDrawVariable ，然后在组合的***DrawItem**事件中编写自己的绘图代码盒子。

我发现这篇[文章](http://www.codeproject.com/KB/combobox/disabledcombodisplay.aspx)更详细地介绍了它。希望能帮助到你。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-04-21T19:32:59.140

我过去用于文本框的“hack”是启用控件，但捕获“OnFocus”事件并立即将焦点设置到表单上的其他对象，最好是标签，因为它不显示为被选中。我认为这也适用于组合框。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2009-04-21T06:47:33.537

不确定您的应用是 Winforms 还是 WPF。下面给出的代码适用于 WPF 应用程序。

```
 combo1.Items.Add("Item 1");
    combo1.Items.Add("Item 2");
    combo1.SelectedIndex = 0;
    combo1.Foreground = Brushes.Black; 
```

在我的 XAML 中，我添加了一个组合框并将其 IsEnabled 属性设置为“false”，然后在后面的代码中我使用了上面给出的代码并且它确实有效。

高温高压

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2009-04-21T06:47:12.117

你需要做的就是说

```
combobox1.ForeColor = Color.FromName("Black"); 
```

控件是否被禁用都没有关系，它应该改变前景色。

* * *

## 回答 #5

> 赞同：-3
> 
> 时间：2009-04-21T07:14:27.527

comboBox1.BackColor=颜色.黑色；

# python - Python中的GStrings

> ID：771312
> 
> 赞同：2
> 
> 时间：2009-04-21T06:41:27.373
> 
> 标签：python, gstring

Groovy 有一个 GStrings 的概念。我可以这样写代码：

```
def greeting = 'Hello World'
println """This is my first program ${greeting}""" 
```

我可以从字符串中访问变量的值。

我怎样才能在 Python 中做到这一点？

- 谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-04-21T07:00:49.307

在 Python 中，您必须明确传递可能变量的字典，您不能从字符串中访问任意“外部”变量。但是，您可以使用`locals()`返回包含本地范围内所有变量的字典的函数。

对于实际的替换，有很多方法可以做到（多么不合常理！）：

```
greeting = "Hello World"

# Use this in versions prior to 2.6:
print("My first programm; %(greeting)s" % locals())

# Since Python 2.6, the recommended example is:
print("My first program; {greeting}".format(**locals()))

# Works in 2.x and 3.x:
from string import Template
print(Template("My first programm; $greeting").substitute(locals())) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-04-21T06:45:23.963

```
d = {'greeting': 'Hello World'}
print "This is my first program %(greeting)s" % d 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-21T06:47:02.790

你不能完全...

我认为您真正能得到的最接近的是使用标准的基于 % 的替换，例如：

```
greeting = "Hello World"
print "This is my first program %s" % greeting 
```

话虽如此，从 Python 2.6 开始，有一些花哨的新类可以以不同的方式做到这一点：查看[2.6 的字符串文档](http://docs.python.org/library/string.html)，特别是从第 8.1.2 节开始以了解更多信息。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-04-21T06:51:06.103

如果您尝试做模板，您可能想研究一下 Cheetah。它可以让你做你所说的，相同的语法和所有。

[http://www.cheetahtemplate.org/](http://www.cheetahtemplate.org/)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-04-21T06:51:11.500

在 Python 2.6+ 中，您可以执行以下操作：

```
"My name is {0}".format('Fred') 
```

查看[PEP 3101](http://www.python.org/dev/peps/pep-3101/)。

# security - 使用 pgp 加密两次有什么好处吗？

> ID：771315
> 
> 赞同：8
> 
> 时间：2009-04-21T06:43:06.747
> 
> 标签：security, encryption, pgp

我是从“更安全”的角度问的。我可以想象一个场景，其中包含解密场景所需的两个必需的私钥，这可能会使它成为一个有吸引力的模型。我相信除了必须妥协两个不同的私钥之外，它不会增加任何额外的安全性。我认为，如果它比加密一百万次更安全，那将是保护信息的最佳方式。

**几年后更新：正如 Rasmus Faber 指出的那样，添加了 3DES 加密以延长广泛采用的 DES 加密的寿命。使用相同的密钥加密两次会遭受[中间相遇攻击](https://en.wikipedia.org/wiki/Meet-in-the-middle_attack)，而第三次加密实际上提供了更高的安全性**

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2009-04-21T06:52:40.140

我知道*如果您使用不同的密钥*，它会更安全。但不要相信我的话。我不是加密分析师。我什至不在电视上播放。

我*理解*它更安全的原因是您正在使用额外的信息进行编码（多个密钥和未知数量的密钥（除非您发布有两个的事实））。

使用相同密钥的双重加密使许多代码更容易破解。我听说过一些代码，但我*知道*ROT13 是这样的 :-)

我认为 Kerberos 使用的安全方案比简单的双重加密更好。

他们实际上有一个主密钥，其唯一目的是加密会话密钥，这就是主密钥的*全部*用途。会话密钥是用来加密真实流量的，它的生命周期是有限的。这有两个优点。

*   邪恶的家伙没有时间破解会话密钥，因为当他们设法破解时，这些会话密钥已不再使用。
*   那些邪恶的家伙没有机会破解主密钥，因为它很少使用（他们需要大量的加密数据包来破解密钥）。

但是，正如我所说的，要对它持保留态度。我不为国家安全局工作。但是我不得不告诉你，即使我确实为 NSA 工作过。哦，不，你不会那么容易让我崩溃的，我的美人。

*半有用的片段：* Kerberos（或 Cerberus，取决于你的血统）是神话中的三头狗，它守卫着地狱之门，是为该安全协议精心挑选的吉祥物。同一条狗在哈利波特世界中被称为蓬松（我曾经有一个女朋友，他的大型德国牧羊犬被称为糖，一种类似的名字错误的野兽）。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2009-04-21T07:02:22.050

它更安全，但不多。与物理锁的类比非常好。通过在门上放置两把相同类型的物理锁，您可以确保一个可以在 5 分钟内撬开一把锁的小偷现在需要花费 10 分钟。但是你买一把贵一倍的锁可能会好得多，小偷根本不会撬。

在密码学中，它的工作方式大致相同：在一般情况下，您不能确保加密两次会使破解加密的难度增加两倍以上。因此，如果 NSA 通常可以在五分钟内解密您的消息，使用双重加密，他们需要十分钟。将密钥的长度加倍可能会更好，这可能使他们需要 100 年才能破解加密。

在少数情况下，重复加密是有意义的——但您需要使用特定算法进行数学运算来证明这一点。例如，Triple-DES 基本上是用三个不同的密钥重复 DES 三次（除了你加密-解密-加密，而不是只加密三次）。但这也表明它的工作原理是多么不直观，因为虽然 Triple-DES将加密次数增加了*三倍*，但它的有效密钥长度只有 DES 算法的*两倍。*

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2010-03-14T16:49:09.213

使用多个密钥加密比使用单个密钥加密更安全，这是常识。

> 我的投票是它没有增加任何额外的安全性

不。

> 除了必须妥协两个不同的私钥。

是的，但是你看，如果你用两个密码加密某些东西，每个都使用不同的密钥，并且发现其中一个密码很弱并且可以被破解，那么第二个密码也必须很弱，攻击者才能恢复任何东西。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2010-03-14T21:49:08.730

双重加密不会增加安全性。

使用 PGP 有两种模式：非对称（公钥，使用私钥解密）和对称（使用密码）。无论哪种模式，消息都使用会话密钥加密，该密钥通常是随机生成的 128 位数字。然后使用密码或公钥对会话密钥进行加密。

有两种方法可以解密消息。一种是会话密钥是否可以被解密。这将是对密码短语的暴力攻击，或者是拥有您的私钥的对手。第二种方式是算法上的弱点。

如果对手可以获得您的私钥，那么如果您有两个私钥，对手将同时获得这两个私钥。

如果对手可以暴力破解您的密码或用击键记录器捕获它，那么对手几乎肯定可以同时获得它们。

如果存在算法弱点，那么它可以被利用两次。

因此，尽管双重加密似乎有所帮助，但实际上它无助于抵御任何现实威胁。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2010-05-03T02:47:12.137

与大多数事情一样，答案是“视情况而定”。在这种情况下，这取决于加密方案是如何实现的。

**一般来说，使用不同密钥的双重加密确实提高了安全性，但由于[中间相遇攻击](http://en.wikipedia.org/wiki/Meet-in-the-middle_attack)**，它并不能提高安全性。

基本上，攻击者不必破坏第一个密钥和第二个密钥的所有可能组合（平方安全）。他们可以依次破解每个密钥（双重安全）。这可以在打破单个密钥的两倍时间内完成。

然而，正如其他人所指出的那样，将所需时间加倍并不是一个显着的改进。10分钟能破1个，20分钟能破2个，还是完全有可能的。您真正想要的是将安全性提高几个数量级，而不是花费 10 分钟，而是花费 1000 年。这是通过选择更好的加密方法来完成的，而不是两次执行相同的加密方法。

维基百科文章很好地解释了它。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2010-06-25T08:08:18.147

使用蛮力破解加密，他们知道他们得到密钥的唯一方法是他们解密的文档是有意义的。当文档被双重加密时，即使您拥有正确的密钥，它仍然看起来像垃圾 - 因此您不知道您拥有正确的密钥。

这太明显了还是我错过了什么？

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2011-08-24T16:54:59.623

视情况而定。

对于那些比较差的人，比如“门上的锁”，在你写东西之前要三思而后行。该示例与加密的现实相去甚远。我的好多了=）

当你包裹东西时，你可以用两种不同的东西包裹它，它从外面变得更加安全......真的。想象一下，为了拿到包裹好的三明治，而不是打开包裹，您切割包裹材料。双重包装现在没有意义了，你明白了吗？？？

* * *

## 回答 #8

> 赞同：-4
> 
> 时间：2010-03-14T01:07:41.353

WinRAR 非常安全。有一个案例是政府无法查看一个人从加拿大携带的笔记本电脑上的文件。他使用WinRAR。他们试图让他给他们密码，他拿了第五个。上诉了2年，法院最后说他不必说话（在这个过程中每个法院都这么说）。我不敢相信有人会认为他不能拿下第五名。他们上诉失败后，政府撤销了此案，因为他们还没有破解文件。

# process - 单个或多个过程，什么标准决定它？

> ID：771316
> 
> 赞同：2
> 
> 时间：2009-04-21T06:43:10.787
> 
> 标签：process

在使用 linux 作为应用程序的嵌入式系统中；在哪种情况下，您会将应用程序分为两个/三个进程。我的主要疑问是；是否需要将单个应用程序组件划分为多个进程，然后运行多个进程来实现所需的应用程序功能。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-21T06:52:40.467

根据经验，我倾向于隔离可能有问题的代码片段。例如，如果您依赖的传感器附带您不信任的 3rd 方库，则将其设置为单独的进程将使您的应用程序更加健壮和容错，因为您将（希望）能够仅重新启动部分其中。

同样出于集成目的，它可能更容易。假设您的流程 A 运行良好，那么您可以轻松地插入流程 B，而不是向流程 A 添加新部件。现在看起来可能不是一个很大的优势，但这在很大程度上取决于您的项目。

然而，它确实会带来一些开销，因为处理同步和消息传递可能会更加复杂并且会增加设计。

但是，您不必这样做。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-28T19:51:17.467

您并没有过多地说明导致您提出问题的情况，所以我只能猜测您对哪种答案感兴趣。

Linux 自古以来就提供多线程功能，因此无需多个进程即可完成并发编程。

很少有将应用程序的组成部分划分为进程的功能原因。

我的建议是编写一个单进程应用程序。如果出现需求，即：一个问题只能通过在单独的进程中管理运行时资源来解决，您仍然可以承担解决进程间通信和资源共享的繁重工作，而不必对业务逻辑进行太多更改。

# asp.net-mvc - ASP.NET MVC - 缓存表单

> ID：771336
> 
> 赞同：0
> 
> 时间：2009-04-21T06:48:30.163
> 
> 标签：asp.net-mvc, forms, outputcache

更多的是出于好奇。您认为缓存表单页面是一种好习惯吗？

我有一个表单，它有一个下拉框，该框是从相当大的 SQL 调用中填充的，并且加载时间太长（来自我的共享托管站点）。这是一个简单的表单，提交时只是将一些数据保存到数据库中。

我想我会使用 OutputCache 过滤器缓存页面，但想知道这样做是否有任何缺点？

只有登录的用户才能访问表单。缓存和访问表单的不同用户会有任何问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-21T07:27:47.073

我只会缓存调用中的数据库结果。表单是否有任何类型的验证？保存当前值？

# php - Python + PHP + Lighttpd？

> ID：771341
> 
> 赞同：3
> 
> 时间：2009-04-21T06:49:38.960
> 
> 标签：php, python, lighttpd, configure

我已经设置了一些网络服务器，但我不确定它们在内部是如何工作的。我正在为自己设置一个新环境，我有兴趣配置我的 lighttpd 服务器以支持 PHP 和 Python。这可能吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-04-21T06:55:45.530

是的，这是可能的。[在这里](http://sam.bluwiki.com/blog/2008/04/django-python-phpoptional-lighttpd-on.php)您可以找到示例配置。

```
fastcgi.server = (
".php" => ((
"bin-path" => "/usr/bin/php5-cgi",
"socket" => "/tmp/php.socket"
)),
"django.fcgi" => (
"main" => (
"host" => "127.0.0.1",
"port" => 9090, #set the port numbers to what-eva you want
),
),
"admin.fcgi" => (
"admin" => (
"host" => "127.0.0.1",
"port" => 9091,
)
)
) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-21T08:01:35.637

您还可以通过启用 mod_cgi 并设置它来启用 Lighty 以使用 .pl、.py 和 .php 作为“cgi”。默认配置位于 Lighty 网站上。但是，这会带来运行独立 cgi 进程的好处和问题。如果您只是遇到交通不便的情况，那么性能应该不是问题。

# java - Java 中的互斥量和信号量是什么？主要区别是什么？

> ID：771347
> 
> 赞同：117
> 
> 时间：2009-04-21T06:51:57.817
> 
> 标签：java, multithreading, concurrency, mutex, semaphore

Java 中的互斥量和信号量是什么？主要区别是什么？

* * *

## 回答 #1

> 赞同：146
> 
> 时间：2009-04-22T08:52:51.013

不幸的是，每个人都忽略了信号量和互斥量之间最重要的区别。“**所有权**”的概念。

信号量没有所有权的概念，这意味着任何线程都可以释放信号量（这本身可能会导致许多问题，但有助于“死亡检测”）。而互斥体确实具有所有权的概念（即您只能释放已获得的互斥体）。
所有权对于并发系统的安全编程非常重要。我总是建议使用互斥锁而不是信号量（但会影响性能）。

互斥体还可以支持优先级继承（这有助于解决优先级反转问题）和递归（消除一种死锁）。

还应该指出，存在“二进制”信号量和“计数/通用”信号量。Java 的信号量是一个计数信号量，因此允许使用大于一的值对其进行初始化（而正如所指出的，互斥量只能在概念上计数为一）。其他帖子中已经指出了这一点的用处。

总而言之，除非您有多个资源要管理，否则我总是建议使用互斥锁而不是信号量。

* * *

## 回答 #2

> 赞同：118
> 
> 时间：2009-04-21T06:58:24.120

信号量可以计数，而互斥量只能计数到 1。

假设您正在运行一个接受客户端连接的线程。该线程可以同时处理 10 个客户端。然后每个新客户端设置信号量，直到达到 10。当信号量有 10 个标志时，您的线程将不会接受新连接

互斥锁通常用于保护东西。假设您的 10 个客户端可以访问系统的多个部分。然后，您可以使用互斥锁保护系统的一部分，因此当 1 个客户端连接到该子系统时，其他任何人都不应访问。您也可以为此目的使用信号量。互斥体是[“互斥信号量”](http://www.javaworld.com/javaworld/jw-10-1998/jw-10-toolbox.html)。

* * *

## 回答 #3

> 赞同：41
> 
> 时间：2009-04-21T06:59:44.600

互斥基本上是互斥的。一次只能有一个线程获取资源。当一个线程获取资源时，在拥有该资源的线程释放之前，不允许其他线程获取该资源。所有等待获取资源的线程都会被阻塞。

信号量用于控制执行的线程数。将有固定的资源集。每次线程拥有资源时，资源计数都会减少。当信号量计数达到 0 时，则不允许其他线程获取资源。线程被阻塞，直到拥有资源的其他线程释放。

简而言之，主要区别在于*一次允许多少个线程获取资源？*

*   互斥体——它的一个。
*   信号量——它的 DEFINED_COUNT，（与信号量数量一样多）

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2009-04-21T06:57:53.573

互斥锁用于对资源的串行访问，而信号量则将对资源的访问限制为设定的数量。您可以将互斥锁视为访问计数为 1 的信号量。无论您将信号量计数设置为多少，线程都可以在资源被阻塞之前访问该资源。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2009-04-21T06:56:47.587

信号量是一种计数同步机制，互斥量不是。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2009-04-21T15:08:16.203

互斥锁通常被称为二进制信号量。虽然可以使用任何非零计数创建信号量，但互斥锁在概念上是一个上限计数为 1 的信号量。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2012-05-08T15:50:17.063

这个问题有相关的答案和官方Java指南的链接：Java[中有互斥体吗？](https://stackoverflow.com/questions/5291041/is-there-a-mutex-in-java)

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2017-07-03T13:54:07.743

[信号量](https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/Semaphore.html)：

> 计数信号量。从概念上讲，信号量维护一组许可。如有必要，每个人都会`acquire()`阻止，直到获得许可，然后再接受。每个都`release()`添加一个许可证，可能会释放一个阻塞的收购方。但是，没有使用实际的许可对象；Semaphore 只是对可用数量进行计数并采取相应措施。

*信号量通常用于限制可以访问某些（物理或逻辑）资源的线程数*

Java 没有内置的 Mutex API。但它可以实现为二进制信号量。

> 初始化为 1 的信号量，并且使用时最多只有一个可用的许可，可以用作互斥锁。这通常被称为二进制信号量，因为它只有两种状态：一个许可可用，或零个许可可用。

当以这种方式使用时，二进制信号量具有属性（与许多 Lock 实现不同），*“锁”可以由所有者以外的线程释放（因为信号量没有所有权的概念）*。这在一些专门的上下文中很有用，例如死锁恢复。

所以信号量和互斥量之间的[主要区别：](https://docs.oracle.com/cd/E19683-01/806-6867/sync-27385/index.html)

1.  信号量限制通过许可访问资源的线程数。互斥锁只允许一个线程访问资源。

2.  没有线程拥有信号量。线程可以通过调用`acquire()`和`release()`方法更新许可数量。互斥锁只能由持有锁的线程解锁。

3.  当互斥体与条件变量一起使用时，有一个隐含的括号——很清楚*程序的哪一部分被保护了*。信号量不一定是这种情况，它可能被称为*并发编程的*首选——它功能强大但太容易以非结构化、不确定的方式使用。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-12-07T19:08:37.377

你比较的无以伦比，技术上没有区别的信号量和互斥量没有意义。互斥锁只是一个重要的名称，就像您应用程序逻辑中的任何名称一样，它意味着您将信号量初始化为“1”，它通常用于保护资源或受保护的变量以确保互斥。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2017-02-28T16:32:52.167

互斥量是二进制信号量。它必须用 1 初始化，以便满足先到先服务原则。这将我们带到了每个互斥体的另一个特殊属性：*执行**down**的那个，一定是执行**up***的那个。因此，我们在某些资源上获得了互斥。

现在您可以看到互斥锁是一般信号量的一个特例。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2017-07-02T21:01:13.507

同步**信号量的对象**实现一个经典的红绿灯。红绿灯控制对计数器共享资源的访问。如果计数器大于零，则授予访问权限；如果为零，则拒绝访问。计数器计算允许访问共享资源的权限。然后，要访问资源，线程必须从红绿灯处获得许可。通常，要使用红绿灯，想要访问共享资源的线程会尝试获取许可。如果红绿灯计数大于零，则线程获得许可，并且红绿灯计数递减。否则线程将被锁定，直到它获得许可。当线程不再需要访问共享资源时，它会释放权限，从而增加红绿灯计数。如果有另一个线程在等待许可，它当时获得了许可证。Java 的 Semaphore 类实现了这种机制。

Semaphore 有两个构建器：

```
Semaphore(int num)
Semaphore(int num, boolean come) 
```

**num**指定许可的初始计数。然后 num 指定在给定时间可以访问共享资源的线程数。如果 num 为 1，它可以一次访问一个线程的资源。通过设置**come** as true，您可以保证您正在等待的线程按照它们请求的顺序被授予权限。

# svn - 将数据从 VSS 迁移到 SVN

> ID：771354
> 
> 赞同：4
> 
> 时间：2009-04-21T06:54:50.290
> 
> 标签：svn, migration, cvs, visual-sourcesafe

如何将我的数据从 VSS 迁移到 SubVersion？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-04-21T06:58:30.093

这取决于您是否要随身携带 VSS 元数据。

如果是，请查看Tigris 上的[PowerAdmin](http://www.poweradmin.com/sourcecode/vssmigrate.aspx)或[Vss2SVN](http://vss2svn.tigris.org/)

如果没有，只需搜索您机器上的代码文件夹以删除所有*.scc*和*.vss* 文件，然后以标准方式将该代码转储到您的 SVN 存储库中。

编辑：看起来底格里斯的 Vss2SVN 开发已经停了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-23T22:56:12.727

Codeplex 上有一个更好的迁移工具，称为（想象中的）[VSS2SVN](http://vss2svn.codeplex.com/)。它工作得很好，并保留了您的历史记录。

# windows-mobile - Windows Mobile 同步错误

> ID：771357
> 
> 赞同：5
> 
> 时间：2009-04-21T06:55:49.693
> 
> 标签：windows-mobile, synchronization, sql-server-ce

我是 Windows Mobile 开发的新手，并且一直在研究在 PDA 运行的 WM6 和 SQL Server 2005 数据库之间同步数据的方法。经过一番研究，我决定使用 Windows 同步服务。

我首先查看示例：SyncServicesForDevicesSample

我下载并安装了自述文件中列出的所有必备软件，包括：

*   Visual Studio 2008 专业版 SP1
*   SQL Server Compact 3.5 服务包 1 (SP1)
*   ADO.NET 1.0（设备）的同步服务

当我加载示例时，我注意到“GBADeviceClient”项目中的 System.Data.SqlServerCe.dll 引用丢失，因此我将其链接到 C:\Program Files\Microsoft SQL Server Compact Edition\v3.5\ 中的版本3.5.5386.0 的设备。

当我运行项目时，我收到以下错误消息：

> 找不到文件或程序集名称“System.Data.SqlServerCe, Version=3.5.1.0, Culture=neutral, PublicKeyToken=3BE235DF1C8D2AD3”或其依赖项之一。

当我查看模拟器（删除程序）时，我安装了以下软件：

*   ADO.NET 1.0 的同步服务
*   Microsoft .Net CF 3.5 EN-String R...
*   SQLServerCompact 3.5 工具 EN
*   SQLServerCompact 3.5 副本
*   SQLServerCompact 3.5 核心微软
*   .NET CF 3.5

所以在 PDA 上调用了错误的文件版本……我如何引用“正确”版本？

或者，是否有一种更简单的方法可以从 SQL Server 2005 数据库同步数据子集（大约 10 个表，其中大多数只是查找列表）？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2010-01-12T10:28:25.703

再次检查您是否安装了适用于 Windows Mobile 的 SQL Server Compact 3.5 SP1（[在此处下载](http://www.microsoft.com/downloads/details.aspx?FamilyID=FCE9ABBF-F807-45D6-A457-AB5615001C8F&displaylang=en)）。我的 dll 版本为 3.5.5692.0

安装 SP1 后，您最好从模拟器中卸载以前的版本并再次部署您的应用程序以安装最新版本。

# xml - 孟加拉？XSLT 去规范化/透视/展平 xml 文件？

> ID：771369
> 
> 赞同：2
> 
> 时间：2009-04-21T07:00:09.357
> 
> 标签：xml, xslt

给定一个具有以下结构的输入 xml 文件：

```
<root>
  <record row="1" col="1" val="1" />
  <record row="1" col="2" val="2" />
  <record row="1" col="3" val="3" />
  <record row="1" col="n" val="4" />
  <record row="2" col="1" val="5" />
  <record row="2" col="3" val="6" />
  <record row="2" col="n" val="7" />
  <record row="n" col="2" val="8" />
  <record row="n" col="3" val="9" />
  <record row="n" col="n" val="10" />
</root> 
```

如何使用 XSLT 输出以下结构？

```
<root>
  <row id="1">
    <col id="1">1</col>
    <col id="2">2</col>
    <col id="3">3</col>
    <col id="n">4</col>
  </row>
  <row id="2">
    <col id="1">5</col>
    <col id="2"></col>
    <col id="3">6</col>
    <col id="n">7</col>
  </row>
  <row id="n">
    <col id="1"></col>
    <col id="2">8</col>
    <col id="3">9</col>
    <col id="n">10</col>
  </row>
</root> 
```

[注意即使输入中没有相关元素，如何输出所有列]

编辑：我可能通过在我的示例中使用数字和字母引起了混淆。我正在寻找的解决方案需要处理非数字的行和列属性。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-04-21T07:23:56.773

这个问题的答案显示了解决问题的可能方法：

[xslt：如何使用 xslt 创建具有多列和多行的表？](https://stackoverflow.com/questions/768665/xslt-how-could-i-use-xslt-to-create-a-table-with-multiple-columns-and-rows/768909#768909)

* * *

编辑：以下是结合了链接问题中所见技术的解决方案。

我假设：

*   你的`@row`和`@col`属性是递增的数字，定义了记录在表中的位置，它们不能真正包含字符串`"n"`。因此，它们在整个文档中并不是唯一的，这使得它们不适合作为 HTML`@id`属性。`@title`我用输出中的属性替换了它们。
*   没有隐含的空行（`@row`连续性的间隙不会产生空行），只有隐含的空单元格。
*   每一个组合都是独一无二的`@row`。`@col`

这个 XSLT 1.0 转换：

```
<xsl:stylesheet 
  version="1.0"
  xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
>

  <!-- prepare some keys for later use -->
  <xsl:key name="kRecordsByRow" match="record" use="@row" />
  <xsl:key name="kRecordsByPos" match="record" use="concat(@row, ',', @col)" />

  <!-- find out the highest @col number -->
  <xsl:variable name="vMaxCol">
    <xsl:for-each select="/root/record">
      <xsl:sort select="@col" data-type="number" order="descending" />
      <xsl:if test="position() = 1">
        <xsl:value-of select="@col" />
      </xsl:if>
    </xsl:for-each>
  </xsl:variable>

  <!-- select the <record>s that are the first in their rows -->
  <xsl:variable name="vRows" select="
    /root/record[
      generate-id()
      =
      generate-id(key('kRecordsByRow', @row)[1])
    ]
  " />  

  <!-- output basic table structure -->
  <xsl:template match="/root">
    <table>
      <xsl:for-each select="$vRows">
        <xsl:sort select="@row" data-type="number" />
        <tr title="{@row}">
          <xsl:call-template name="td" />
        </tr>
      </xsl:for-each>
    </table>
  </xsl:template>

  <!-- output the right number of <td>s in each row, empty or not -->
  <xsl:template name="td">
    <xsl:param name="col" select="1" />

    <td title="{$col}">
      <xsl:value-of select="key('kRecordsByPos', concat(@row, ',', $col))/@val" />
    </td>

    <xsl:if test="$col &lt; $vMaxCol">
      <xsl:call-template name="td">
        <xsl:with-param name="col" select="$col + 1" />
      </xsl:call-template>
    </xsl:if>
  </xsl:template>

</xsl:stylesheet> 
```

…当应用于此（稍作修改）输入时：

```
<root>
  <record row="1" col="1" val="1" />
  <record row="1" col="2" val="2" />
  <record row="1" col="3" val="3" />
  <record row="1" col="4" val="4" />
  <record row="2" col="1" val="5" />
  <record row="2" col="3" val="6" />
  <record row="2" col="4" val="7" />
  <record row="3" col="2" val="8" />
  <record row="3" col="3" val="9" />
  <record row="3" col="4" val="10" />
</root> 
```

…产生：

```
<table>
  <tr title="1">
    <td title="1">1</td>
    <td title="2">2</td>
    <td title="3">3</td>
    <td title="4">4</td>
  </tr>
  <tr title="2">
    <td title="1">5</td>
    <td title="2"></td>
    <td title="3">6</td>
    <td title="4">7</td>
  </tr>
  <tr title="3">
    <td title="1"></td>
    <td title="2">8</td>
    <td title="3">9</td>
    <td title="4">10</td>
  </tr>
</table> 
```

*   Muenchian分组用于选择每个组的前`<record>`s`@row`
*   an`<xsl:key>`用于通过位置确定记录
*   递归用于生成一致的 s 集，与指定位置处`<td>`a 的实际存在无关`<record>`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-04-21T14:07:27.363

**XSLT 2.0 解决方案**

**这种转变**：

```
<xsl:stylesheet version="2.0"
    xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
    xmlns:xs="http://www.w3.org/2001/XMLSchema"
    exclude-result-prefixes="xs"
    >

    <xsl:output omit-xml-declaration="yes" indent="yes"/>

    <xsl:variable name="vDoc" as="document-node()"
     select="/"/>

    <xsl:key name="kColsByRow" match="@col" 
         use="../@row"/>

    <xsl:key name="kRecByRowCol" match="record" 
         use="concat(@row,'+',@col)"/>

    <xsl:template match="/*">
      <root>
        <xsl:for-each-group select="*/@row" 
             group-by=".">
          <xsl:sort select="current-grouping-key()"
               data-type="number"/>

           <xsl:variable name="vRow" 
                select="current-grouping-key()"/>  

           <row idd="{$vRow}">

              <xsl:for-each select=
               "1 to max(key('kColsByRow',$vRow)/xs:integer(.))">

                <col idd="{.}">
                  <xsl:value-of select=
                  "key('kRecByRowCol',
                        concat($vRow,'+',.),
                        $vDoc
                       )
                       /
                        @col
                "
                  />
                </col>
              </xsl:for-each>
           </row>    
        </xsl:for-each-group>
      </root>
    </xsl:template>
</xsl:stylesheet> 
```

**应用于此 XML 文档时**：

```
<root>
    <record row="1" col="1" val="1" />
    <record row="1" col="2" val="2" />
    <record row="1" col="3" val="3" />
    <record row="1" col="10" val="4" />
    <record row="2" col="1" val="5" />
    <record row="2" col="3" val="6" />
    <record row="2" col="10" val="7" />
    <record row="10" col="2" val="8" />
    <record row="10" col="3" val="9" />
    <record row="10" col="10" val="10" />
</root> 
```

**产生想要的结果**：

```
<root>
   <row idd="1">
      <col idd="1">1</col>
      <col idd="2">2</col>
      <col idd="3">3</col>
      <col idd="4"/>
      <col idd="5"/>
      <col idd="6"/>
      <col idd="7"/>
      <col idd="8"/>
      <col idd="9"/>
      <col idd="10">10</col>
   </row>
   <row idd="2">
      <col idd="1">1</col>
      <col idd="2"/>
      <col idd="3">3</col>
      <col idd="4"/>
      <col idd="5"/>
      <col idd="6"/>
      <col idd="7"/>
      <col idd="8"/>
      <col idd="9"/>
      <col idd="10">10</col>
   </row>
   <row idd="10">
      <col idd="1"/>
      <col idd="2">2</col>
      <col idd="3">3</col>
      <col idd="4"/>
      <col idd="5"/>
      <col idd="6"/>
      <col idd="7"/>
      <col idd="8"/>
      <col idd="9"/>
      <col idd="10">10</col>
   </row>
</root> 
```

# java - 有没有办法在 java 中获取 WordprocessingML 剪贴板内容？

> ID：771373
> 
> 赞同：1
> 
> 时间：2009-04-21T07:01:32.893
> 
> 标签：java, clipboard, wordml

我有一个客户管理它将 WordprocessingML 内容粘贴到我们的应用程序中。据我所知，这是从 Word 2000 直接复制和粘贴到我们的 Java 应用程序。我尝试了每个 Word 和 Java 版本的组合，但我无法重现这种行为 - 特别是因为我们的应用程序过滤了 HTML 和 text/plain。

我很确定旧版 Office 有自己的剪贴板并且只导出格式，这些格式应该可供其他程序使用。我知道的每个办公版本（可能除了 2007 年）都导出 HTML、RTF 和纯文本。

有没有办法将 WordprocesingML 内容放入剪贴板，并可能让 Java 混合数据风格

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-21T07:35:15.497

[Apache POI](http://poi.apache.org/)是用于访问 Microsoft 格式文件的 Java API。[HWPF](http://poi.apache.org/hwpf/index.html)是读写 MS Word 文件的一部分。[Apache TIKA](http://lucene.apache.org/tika/)是一个工具包，用于使用现有的解析器库从各种文档中检测和提取元数据和结构化文本内容。它还为 MS Word 文档提供了一些支持。我建议你看看它们是否适合你的用例。

# iphone - ABPeoplePickerNavigationController

> ID：771374
> 
> 赞同：0
> 
> 时间：2009-04-21T07:02:08.557
> 
> 标签：iphone, cocoa-touch

这可能是一个非常基本的问题，但是当我`ABPeoplePickerNavigationController`通过运行使我的实例（addBookViewer）可见时，

```
[self presentModalViewController:addBookViewer animated:YES] 
```

联系人视图弹出，但被显示屏最顶部的栏（显示 AT&T 信号强度、时钟和电池电量的栏）截断。有没有办法以编程方式更改 addBookViewer 使其不会被静态状态栏截断？

谢谢，戴夫

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-04-21T08:17:02.167

它看起来像[`ABPeoplePickerNavigationController`](http://developer.apple.com/iphone/library/documentation/AddressBookUI/Reference/ABPeoplePickerNavigationController_Class/Reference/Reference.html)继承自[`UIViewController`](http://developer.apple.com/iphone/library/documentation/UIKit/Reference/UIViewController_Class/Reference/Reference.html#//apple_ref/doc/uid/TP40006926-CH3-SW2). 也许您可以在呈现之前尝试编辑视图的框架：

```
addBookViewer.view.frame = CGRectMake(0, 20, [[UIScreen mainScreen] bounds].size.width, [[UIScreen mainScreen] bounds].size.height - 20); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2011-05-27T21:49:26.783

我怀疑这是因为您正在调用的视图控制器`presentModalViewController:animated:`有一个也被覆盖的框架，但您没有注意到，可能有足够的头部空间，请确保您的 nib 文件中有状态栏，以便它布局正确。

# asp.net - 与 web.config 有关的错误

> ID：771375
> 
> 赞同：0
> 
> 时间：2009-04-21T07:02:16.807
> 
> 标签：asp.net, vb.net

以下是执行时出现的错误。

## “/”应用程序中的服务器错误。

配置错误描述：处理服务此请求所需的配置文件期间发生错误。请查看下面的具体错误详细信息并适当地修改您的配置文件。

解析器错误消息：在应用程序级别之外使用注册为 allowDefinition='MachineToApplication' 的部分是错误的。此错误可能是由未在 IIS 中配置为应用程序的虚拟目录引起的。

源错误：

```
Line 22:     <customErrors mode="RemoteOnly"/>
Line 23:    
Line 24:     <authentication mode="Forms">
Line 25:       <forms loginUrl="Default.aspx" protection="Validation" timeout="300" />
Line 26:     </authentication> 
```

源文件：D:\slnAllForKids\slnAllForKids\Allforkids\allforkids\web.config 行：24

以下是我的 web.config

```
<?xml version="1.0"?><configuration>
  <configSections>
    <sectionGroup name="system.web.extensions" type="System.Web.Configuration.SystemWebExtensionsSectionGroup, System.Web.Extensions, Version=1.0.61025.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35">
      <sectionGroup name="scripting" type="System.Web.Configuration.ScriptingSectionGroup, System.Web.Extensions, Version=1.0.61025.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35">
          <section name="scriptResourceHandler" type="System.Web.Configuration.ScriptingScriptResourceHandlerSection, System.Web.Extensions, Version=1.0.61025.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35" requirePermission="false" allowDefinition="MachineToApplication"/>
        <sectionGroup name="webServices" type="System.Web.Configuration.ScriptingWebServicesSectionGroup, System.Web.Extensions, Version=1.0.61025.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35">
          <section name="jsonSerialization" type="System.Web.Configuration.ScriptingJsonSerializationSection, System.Web.Extensions, Version=1.0.61025.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35" requirePermission="false" allowDefinition="Everywhere"/>
          <section name="profileService" type="System.Web.Configuration.ScriptingProfileServiceSection, System.Web.Extensions, Version=1.0.61025.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35" requirePermission="false" allowDefinition="MachineToApplication"/>
          <section name="authenticationService" type="System.Web.Configuration.ScriptingAuthenticationServiceSection, System.Web.Extensions, Version=1.0.61025.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35" requirePermission="false" allowDefinition="MachineToApplication"/>
        </sectionGroup>
      </sectionGroup>
    </sectionGroup>
  </configSections>
  <connectionStrings>
    <add name="AllForKidsConnectionString" connectionString="Data Source=GRAPHIX\SQLEXPRESS;Initial Catalog=AllForKidsData;Integrated Security=True" providerName="System.Data.SqlClient"/>
  </connectionStrings>
  <system.web>

    <customErrors mode="RemoteOnly"/>

    <authentication mode="Forms">
      <forms loginUrl="Default.aspx" protection="Validation" timeout="300"/>
    </authentication>
    <authorization>
      <allow users="*"/>
    </authorization>

        <compilation  debug="false">
            <assemblies>
        <add assembly="System.Web.Extensions, Version=1.0.61025.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35"/>
                <add assembly="System.Design, Version=2.0.0.0, Culture=neutral, PublicKeyToken=B03F5F7F11D50A3A"/>
                <add assembly="System.Windows.Forms, Version=2.0.0.0, Culture=neutral, PublicKeyToken=B77A5C561934E089"/></assemblies></compilation></system.web>
  <system.web>
    <pages styleSheetTheme="Kids1">
      <controls>
        <add tagPrefix="asp" namespace="System.Web.UI" assembly="System.Web.Extensions, Version=1.0.61025.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35"/>
      </controls>
    </pages>
    <!--
          Set compilation debug="true" to insert debugging
          symbols into the compiled page. Because this
          affects performance, set this value to true only
          during development.
    -->

    <httpHandlers>
      <remove verb="*" path="*.asmx"/>
      <add verb="*" path="*.asmx" validate="false" type="System.Web.Script.Services.ScriptHandlerFactory, System.Web.Extensions, Version=1.0.61025.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35"/>
      <add verb="*" path="*_AppService.axd" validate="false" type="System.Web.Script.Services.ScriptHandlerFactory, System.Web.Extensions, Version=1.0.61025.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35"/>
      <add verb="GET,HEAD" path="ScriptResource.axd" type="System.Web.Handlers.ScriptResourceHandler, System.Web.Extensions, Version=1.0.61025.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35" validate="false"/>
    </httpHandlers>

    <httpModules>
      <add name="ScriptModule" type="System.Web.Handlers.ScriptModule, System.Web.Extensions, Version=1.0.61025.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35"/>
    </httpModules>
  </system.web>

  <system.webServer>
    <validation validateIntegratedModeConfiguration="false"/>
    <modules>
      <add name="ScriptModule" preCondition="integratedMode" type="System.Web.Handlers.ScriptModule, System.Web.Extensions, Version=1.0.61025.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35"/>
    </modules>
    <handlers>
      <remove name="WebServiceHandlerFactory-Integrated"/>
      <add name="ScriptHandlerFactory" verb="*" path="*.asmx" preCondition="integratedMode" type="System.Web.Script.Services.ScriptHandlerFactory, System.Web.Extensions, Version=1.0.61025.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35"/>
      <add name="ScriptHandlerFactoryAppServices" verb="*" path="*_AppService.axd" preCondition="integratedMode" type="System.Web.Script.Services.ScriptHandlerFactory, System.Web.Extensions, Version=1.0.61025.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35"/>
      <add name="ScriptResource" preCondition="integratedMode" verb="GET,HEAD" path="ScriptResource.axd" type="System.Web.Handlers.ScriptResourceHandler, System.Web.Extensions, Version=1.0.61025.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35"/>
    </handlers>
  </system.webServer>
</configuration> 
```

我必须做些什么来纠正这个错误

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-04-21T07:07:58.527

这与您在 IIS 中的应用程序设置有关

您需要将虚拟目录标记为应用程序。

对于 IIS 6，

*   右键单击包含您的应用程序的虚拟目录，
*   去属性
*   转到虚拟目录选项卡
*   应用程序设置部分
*   单击“创建”默认应用程序

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-21T07:06:44.300

您是否在 IIS 中为您的站点创建了虚拟应用程序？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-21T08:08:32.000

我认为线索在错误消息中：

“此错误可能是由于虚拟目录未配置为 IIS 中的应用程序造成的。”

您需要将虚拟目录配置为 IIS 中的应用程序。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-16T23:14:20.010

我知道这已经很老了，但只是为了给一个提示，以防有人遇到类似的问题。出乎意料的是，更新后（使用手动 ftp 进行服务器更新而不是 webdeploy）我的应用程序遇到了这个错误。我正在开发一个 MVC Web 应用程序。几个小时后，我意识到我错误地将主 Web.config 文件放在了 views 文件夹中。用正确的视图文件夹配置文件替换它解决了这个问题。

# browser - 如何在所有浏览器中显示垂直文本（旋转 90 度）？

> ID：771378
> 
> 赞同：1
> 
> 时间：2009-04-21T07:03:22.127
> 
> 标签：browser, cross-browser, text-rotation

如何在所有浏览器中显示垂直文本（旋转 90 度）？

[![替代文字](https://i.stack.imgur.com/hKLRd.png)](https://i.stack.imgur.com/hKLRd.png)
[（来源：[sun.com](http://blogs.sun.com/oootnt/resource/sbres_1164126054_0__.png)）]

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-04-21T09:29:25.207

该问题与服务器端语言无关。如果垂直渲染的文本不再是文本而是图像时没有问题，请选择[tharkun 提供的解决方案](https://stackoverflow.com/questions/771378/php-how-to-display-vertical-text-90-degree-rotated-in-all-browsers/771400#771400)。否则，有办法在表示层中做到这一点。

首先，（目前）有一个仅限 IE 的解决方案，它是[CSS3 标准的一部分](http://www.css3.com/css-writing-mode/)。你可以[现场查看](http://tlt.its.psu.edu/suggestions/international/web/tips/verticaltest.html)。

```
p {
    writing-mode: tb-rl;
} 
```

[CSS3 文本模块](http://www.w3.org/International/articles/css3-text/Overview.en.php)还为文本方向指定了一些[属性](http://www.w3.org/TR/2003/CR-css3-text-20030514/#glyph-orientation-vertical)。

[其他人用 SVG](http://bytes.com/topic/javascript/answers/721811-solution-display-text-rotated-90-vertically-firefox-css)来做。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-04-21T07:11:13.947

我认为您不能使用 PHP/HTML/CSS 旋转文本。但是您可以使用[GD](http://us3.php.net/manual/en/ref.image.php)创建包含垂直文本的图像。

例子：

```
header ("Content-type: image/png"); 

// imagecreate (x width, y width)
$img_handle = @imagecreatetruecolor (15, 220) or die ("Cannot Create image"); 

// ImageColorAllocate (image, red, green, blue)
$back_color = ImageColorAllocate ($img_handle, 0, 0, 0); 
$txt_color = ImageColorAllocate ($img_handle, 255, 255, 255); 
ImageStringUp ($img_handle, 2, 1, 215, $_GET['text'], $txt_color); 
ImagePng ($img_handle); 
ImageDestroy($img_handle); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2010-06-15T05:43:15.077

```
function verticletext($string)
    {
       $tlen = strlen($string);
       for($i=0;$i<$tlen;$i++)
       {
            $vtext .= substr($string,$i,1)."<br />";   
       }
       return $vtext;
    } 
```

你去那里没有回声

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2011-10-18T15:22:29.803

如果表头行太长，我使用下面的函数。它非常有用，因为它易于使用、速度快，而且您不必计算文本的高度和宽度。那些 CSS 噱头是行不通的。

```
#######################################################
# convert text to image and embed it to html
# uses /tmp as a cache to make it faster
# usage: print imagetext("Hello my friend");
# Created by Ville Jungman, GPL-licenced, donated by www.varuste.net

function imagetext($text,$size = 10,$color = array(253,128,46)){
  $dir = "/tmp/tekstit";
  $filename = "$dir/" . base64_encode($text);
  if(!file_exists($filename)){
     $font = "/usr/share/fonts/truetype/freefont/FreeSans.ttf";
     $box = imagettfbbox($size,90,$font,$text);
     $w = -$box[4] - 1;
     $h = -$box[3];
     $im = imagecreatetruecolor($w,$h);
     $white = imagecolorallocate($im,$color[1],$color[2],$color[3]);
     $black = imagecolorallocate($im, 0x00, 0x00, 0x00);
     imagecolortransparent($im,$white);
     imagefilledrectangle($im, 0, 0, $size, 99, $white);
     imagettftext($im,$size,90,$size,$h,$black,$font,$text);
     @mkdir($dir);
     imagepng($im,$filename);
     imagedestroy($im);
  }
  $data = base64_encode(file_get_contents($filename));
  return "<img src='data:image/png;base64,$data'>"; 
```

}

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2010-07-07T10:19:00.217

其他浏览器也可以进行文本旋转。

CSS：

```
/*Safari*/
-webkit-transform: rotate(-90deg);

/*Firefox*/
-moz-transform: rotate(-90deg);

/*Opera*/
-o-transform: rotate(-90deg);

/*IE*/
writing-mode: tb-rl;
filter: flipV flipH; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-04-21T07:07:28.323

[这个线程](http://www.ozoneasylum.com/11093)建议您可以将文本写入图像，然后旋转图像。

IE 似乎可以，但其他浏览器则不行，所以它可能是 IE6 的小胜利之一 =)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-05-31T09:30:17.603

使用 raphaeljs 它也适用于 IE 6

[http://raphaeljs.com/text-rotation.html](http://raphaeljs.com/text-rotation.html)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-04-21T07:09:50.957

[imagettftext](http://us3.php.net/imagettftext)应该做的伎俩。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2009-04-21T07:11:22.450

据我所知，使用 CSS 获取垂直文本是不可能的，这意味着旋转后的文本必须在图像中。使用 PHP 的`libgd`接口生成输出图像文件非常简单。

但是请注意，这意味着使用一个脚本来生成图像，而另一个脚本来生成周围的网页。您通常不能（内联数据：尽管有 URI）让一个脚本生成多个页面组件。

* * *

## 回答 #10

> 赞同：-3
> 
> 时间：2010-06-14T10:23:08.120

```
 function verticletext($string)
    {
       $tlen = strlen($string);
       for($i=0;$i<$tlen;$i++)
       {
            echo substr($string,$i,1)."<br />";   
       }
    } 
```

# c++ - 如何限制数据库刷新到磁盘？

> ID：771380
> 
> 赞同：6
> 
> 时间：2009-04-21T07:05:06.020
> 
> 标签：c++, sqlite

我在我的 arm9 嵌入式 linux 平台中使用 sqlite 数据库。我想减少对磁盘数据库的写入，因为我的磁盘是闪存，它需要最少的写入周期。所以我尝试将 SQLITE_DEFAULT_CACHE_SIZE 增加为 5000。我的目标是将数据写入缓存，当缓存填满时，自动刷新到磁盘。但是通过增加 SQLITE_DEFAULT_CACHE_SIZE，我无法确认这是否有效。我没有看到操作有任何变化！我的方法正确吗？有人可以给我一些建议吗？谢谢阿尼什

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-04-26T12:03:22.037

SQLite 是 ACID 数据库，每次提交时都会刷新，或者每次插入/删除/更新都没有被事务包装。使用事务进行分组操作或关闭 ACIDity 并设置 PRAGMA synchronous=OFF。

“PRAGMA synchronous = OFF”并且 SQLite 根本不会刷新数据（实际上将其留给 OS 缓存）

SQLITE_DEFAULT_CACHE_SIZE 仅用于缓存大小。缓存仅用于读取数据。

还有另一种选择 - 您可以实现自己的 VFS 层并在您自己的缓冲区满之前完全阻止页面保存。[http://www.sqlite.org/c3ref/vfs.html](http://www.sqlite.org/c3ref/vfs.html)

但我确信 sync=off （或者更好地使用事务）将完成这项工作（同时很有可能在电源故障或同步 = off 硬重置的情况下损坏您的数据库）。

另一个提示是将 JOURNAL 放在内存中或完全关闭它。再次 - 它关闭了酸度，但这也消除了一些磁盘接触。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-04-21T07:27:04.377

最新的[SQLite 具有备份热数据库的功能，](http://www.sqlite.org/c3ref/backup_finish.html)它仍处于试验阶段，但我的建议是使用内存数据库，并在您认为合适时将其与磁盘数据库合并。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-21T09:34:38.003

好的，尼尔。如果“SQLite 正在使用一种直写缓存”，那么在缓存溢出时，它会尝试将数据刷新到某个临时文件或磁盘文件。这就是我尝试通过的同一点增加缓存大小，从而获得对刷新率的控制。但它没有发生。请回复。

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2009-04-21T07:31:03.197

您拥有 SQLite 的源代码 - 为什么不简单地使用它来记录您感兴趣的信息。

# c# - 有人可以解释这个 C# 结构：base.Executed += (s, e) =>

> ID：771385
> 
> 赞同：3
> 
> 时间：2009-04-21T07:06:39.043
> 
> 标签：c#, mvvm

我正在研究[Josh Smith 的 CommandSink 示例](http://www.codeproject.com/KB/WPF/VMCommanding.aspx)，`base.Executed += (s, e) =>...`结构让我很困惑，有人能帮我弄清楚吗？

**我的理解：**

*   base.CanExecute 是继承类 CommandBinding 上的事件
*   += 正在向该事件添加委托
*   委托是遵循该行的匿名函数

**我不明白的是：**

*   (s,e) 是该函数的签名吗？
*   变量 s 在哪里使用？

**这是上下文中的代码：**

```
public class CommandSinkBinding : CommandBinding
    {
        #region CommandSink [instance property]

        ICommandSink _commandSink;

        public ICommandSink CommandSink
        {
            get { return _commandSink; }
            set
            {
                if (value == null)
                    throw new ArgumentNullException("Cannot set CommandSink to null.");

                if (_commandSink != null)
                    throw new InvalidOperationException("Cannot set CommandSink more than once.");

                _commandSink = value;

                base.CanExecute += (s, e) =>
                    {
                        bool handled;
                        e.CanExecute = _commandSink.CanExecuteCommand(e.Command, e.Parameter, out handled);
                        e.Handled = handled;
                    };

                base.Executed += (s, e) =>
                    {
                        bool handled;
                        _commandSink.ExecuteCommand(e.Command, e.Parameter, out handled);
                        e.Handled = handled;
                    };
            }
        } 
        ... 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2009-04-21T07:13:49.167

`(s, e)`是事件处理程序的方法参数签名（在这种情况下是定义的匿名方法）

思考`(object Sender, EventArgs e)`

该`s`参数只是没有在方法的其余部分中使用，这很好。它必须在那里以匹配预期的签名

```
base.CanExecute += (s, e) =>
                    {
                        bool handled;
                        e.CanExecute = _commandSink.CanExecuteCommand(e.Command, e.Parameter, out handled);
                        e.Handled = handled;
                    }; 
```

相当于做

```
base.CanExecute += new EventHandler(myMethod_CanExecute);

///....
protected void myMethod_CanExecute(object sender, EventArgs e)
{
    bool handled;
    e.CanExecute = _commandSink.CanExecuteCommand(e.Command, e.Parameter, out handled);
    e.Handled = handled;
}; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-21T07:15:59.007

是的，(s, e) 是签名。该函数必须具有事件定义的签名（CommandBinding.CanExecute：http: [//msdn.microsoft.com/en-us/library/system.windows.input.commandbinding.canexecute.aspx](http://msdn.microsoft.com/en-us/library/system.windows.input.commandbinding.canexecute.aspx)）。

在此特定示例中，未使用变量 s。该事件遵循与 .NET 中的大多数其他事件相同的设计模式。第一个参数通常包含对引发事件的实例的引用，第二个参数包含 EventArgs 类（或更专业的继承 EventArgs 的类）。在这种情况下，第二个参数将是 CanExecuteRoutedEventArgs 类型的实例（除非我误解了任何信息）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-21T07:18:07.113

(s, e) 是一种签名——但它的解释取决于 C# 编译器的推断。C#编译器知道Executed的类型是ExecutedRoutedEventHandler，相当于`void delegate(object, ExecutedRoutedEventArgs)`. 它查看 lambda 表达式`(s, e) => { ... }`并确定 s 必须是 object 类型，e 必须是 ExecutedRoutedEventArgs 类型，整个表达式是从 (object, ExecutedRoutedEventArgs) 到 void 的函数。

正如其他人所指出的，s 存在是因为如果它不存在，匿名函数将不符合 ExecutedRoutedEventHandler 所需的签名。一些语言有一个特殊的符号来表示“这个参数必须在这里出于正式的技术原因，但我对此不感兴趣。” C# 没有，所以它必须命名参数，即使它没有被使用。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-04-21T07:23:18.473

```
base.CanExecute += (s, e) =>
                {
                    bool handled;
                    e.CanExecute = _commandSink.CanExecuteCommand(e.Command, e.Parameter, out handled);
                    e.Handled = handled;
                }; 
```

您在这里看到的是 C# 3 中的 Lambda。

在 C# 2 中，这将是：-

```
 base.CanExecute += delegate(object s, EventArgs e)
                {
                    bool handled;
                    e.CanExecute = _commandSink.CanExecuteCommand(e.Command, e.Parameter, out handled);
                    e.Handled = handled;
                }; 
```

C# 3 允许这种 (s, e) 收缩，因为它能够从右侧暗示类型（它可以看到 CanExecute 采用委托类型以及它的参数是什么类型）。

=> 表示要执行的函数，简单的单行表达式通常不需要大括号。

# .net - 在 .NET 中将任意字符串序列化为 XML

> ID：771388
> 
> 赞同：2
> 
> 时间：2009-04-21T07:07:37.920
> 
> 标签：.net, xml-serialization

将任意字符串（到 XML 属性或 XML 节点）序列化为 XML 流以使 XML 保持有效（特殊字符、换行符等必须以某种方式编码）的最佳方法是什么。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-04-21T07:19:30.307

我会简单地使用 DOM（例如`XmlDocument`or `XDocument`），或者对于大文件，`XmlWriter`：

```
 XDocument xdoc = new XDocument(new XElement("xml", "a < b & c"));
        Console.WriteLine(xdoc.ToString());

        XmlDocument xmldoc = new XmlDocument();
        XmlElement root = xmldoc.CreateElement("xml");
        xmldoc.AppendChild(root).InnerText = "a < b & c";
        Console.WriteLine(xmldoc.OuterXml);

        StringBuilder sb = new StringBuilder();
        XmlWriterSettings settings = new XmlWriterSettings();
        settings.OmitXmlDeclaration = true;
        using (XmlWriter xw = XmlWriter.Create(sb, settings))
        {
            xw.WriteElementString("xml", "a < b & c");
        }
        Console.WriteLine(sb); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-21T08:14:18.960

这不正是 CDATA 在 XML 中的用途吗？您需要注意的是您的数据不包含`"]]>"`，或者您使用历史悠久的 C 技术以某种方式逃避它们：

```
Encoding:
    '\' becomes '\\'
    ']' becomes '\]'
Decoding:
    '\]' becomes ']'
    '\\' becomes '\' 
```

# xml - XML 文档中只允许有一个顶级元素

> ID：771397
> 
> 赞同：0
> 
> 时间：2009-04-21T07:10:45.417
> 
> 标签：xml, vb.net

以下是在 xml 文件中插入新节点的代码。

```
Dim fleStream As New FileStream("C:\mailing.xml", FileMode.Append, FileAccess.Write,FileShare.ReadWrite)
Dim stmWriter As New StreamWriter(fleStream)
Dim writer As New XmlTextWriter(stmWriter)
Dim currNode As XmlNode
Dim doc As New XmlDocument

doc.LoadXml(("<XMLFile>" + " <EMail></EMail>" + "</XMLFile>"))
'doc.Load("C:\mailing.xml") '
Dim docFrag As XmlDocumentFragment = doc.CreateDocumentFragment()
docFrag.InnerXml = "<From><Address>" + txtFrom.Text + " </Address></From>"
currNode = doc.DocumentElement.FirstChild.AppendChild(docFrag)
currNode.InsertAfter(docFrag, currNode.LastChild)

docFrag.InnerXml = "<Receipient> <To>" + txtTo.Text + " </To></Receipient>"
currNode = doc.DocumentElement.FirstChild.FirstChild.AppendChild(docFrag)
currNode.InsertAfter(docFrag, currNode.LastChild)

docFrag.InnerXml = "<Subject>" + txtSubject.Text + "</Subject>"
currNode = doc.DocumentElement.FirstChild.AppendChild(docFrag)
currNode.InsertAfter(docFrag, currNode.LastChild)

docFrag.InnerXml = "<Body>" + txtBody.Text + "</Body>"
currNode = doc.DocumentElement.FirstChild.AppendChild(docFrag)
currNode.InsertAfter(docFrag, currNode.LastChild)

doc.Save(writer)
'doc.Save("C:\xmlmailfile.xml") '
writer.Flush()
stmWriter.Flush()
stmWriter.Close() 
```

通过执行此操作，我无法在 IE 中查看结果，错误消息为“无法显示 XML 页面

## 无法使用 XSL 样式表查看 XML 输入。

XML 文档中只允许有一个顶级元素。处理资源 'file:///C:/mailing.xml' 时出错。2号线，位置...

asdasd@qwe.com

当我打开 xml 文件输入数据时，谁能帮我解决 pblm。在我的代码中要进行哪些修改？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-04-21T07:20:44.347

嗯，这很正常。XML 文档必须有一个不重复的根元素。您已经在[这里](https://stackoverflow.com/questions/767126/how-to-append-new-node-to-existing-node-in-xml)和最初[在这里](https://stackoverflow.com/questions/763177/concerned-with-writing-xml/)问过相关问题。Jon Skeet 已经非常简洁地向你解释了这一点。

如果在理解上有问题，您应该考虑阅读 XML 或做一些研究，而不是重复问同一个问题，因为大多数人不会意识到您已经收到了该问题的出色答案。

如果你继续做你已经做过的事情，你不应该期待不同的结果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-21T07:14:44.533

在记事本中打开它并查看输出是什么，然后从那里查看错误的真正含义，如果您需要更多帮助，请在此处发布。

# python - 监控一个 tcp 端口

> ID：771399
> 
> 赞同：3
> 
> 时间：2009-04-21T07:11:13.917
> 
> 标签：python, tcp, monitoring, port

为了好玩，我一直在尝试用 python 编写负载均衡器，并试图找出最好的（正确的？）方法来测试端口是否可用并且远程主机是否仍然存在。

我发现，一旦连接，就很难判断远程主机何时关闭。我已经打开了保持活动状态，但是即使在设置了各种 TCP_KEEPALIVE 之后，它也无法在一分钟内识别出故障连接（我意识到轮询的频率超过一分钟可能有点过分了，但可以说我想这样做）选择最低。

当我使用非阻塞套接字时，我注意到 recv() 从活动套接字读取时会返回错误（“资源暂时不可用”），但从死套接字读取时会返回“”（发送和接收为 0字节，这可能是原因？）。不过，这似乎是一种奇怪的测试它是否已连接的方法，并且*在*发送一些数据之后无法判断连接是否死亡。

除了每次检查都连接/断开连接之外，我还能做些什么吗？我可以手动发送 tcp keepalive，还是可以建立一个较低级别的连接，让我在不发送远程服务器可能处理的真实数据的情况下测试连接？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-21T07:20:07.373

我建议不要让您的（单个）测试套接字保持连接 - 每次需要轮询时都建立一个新连接。我见过的每个负载均衡器/服务器可用性系统都使用这种方法而不是持久连接。

如果远程服务器在合理的时间内（例如 10 秒）没有响应，则将其标记为“关闭”。使用计时器和信号而不是函数响应代码来处理该超时。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-21T15:33:33.630

“很难判断远程主机何时关闭”

正确的。这是 TCP 的一个特性。TCP 的重点是在端口之间建立持久的连接。理论上，应用程序可以通过 TCP 断开并重新连接到端口（套接字库对此没有提供很多支持，但它是 TCP 协议的一部分）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-21T07:16:34.200

ping 就是为此目的而发明的

您也可以将格式错误的 TCP 数据包发送到您的目的地。例如，在 TCP 标头中有一个用于确认传输结束的标志，即 FIN 消息。如果您发送带有 ACK 和 FIN 的消息，远程主机应该会抱怨返回数据包，您将能够评估往返时间。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-04-21T07:24:03.963

理论上可以向keepalive数据包发送垃圾邮件。但是要将其设置为非常低的间隔，您可能需要深入挖掘原始套接字。此外，如果它来得太快，您的主机可能会忽略它。

检查主机是否在 TCP 连接中处于活动状态的最佳方法是发送数据，然后等待 ACK 数据包。如果 ACK 包到达，SEND 函数将返回非零值。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-02-11T11:43:34.260

您可以将[Bash 伪设备文件](http://www.tldp.org/LDP/abs/html/devref1.html)用于具有特定 I/O 端口的 TCP/UDP 连接，例如：

```
printf "" > /dev/tcp/example.com/80 && echo Works 
```

这将打开连接，但不会发送任何内容。您可以通过以下方式对其进行测试：

```
nc -vl 1234 &
printf "" > /dev/tcp/localhost/1234 
```

对于简单的监控，使用带有上述命令的 cron 或使用`watch`：

```
watch bash -c 'echo > /dev/tcp/localhost/1234 && echo Works || echo FAIL' 
```

但是，建议使用专门为此设计的特定工具，例如 Monit、Nagios 等。

### 监控

这是使用 Monit ( `monit`) 的示例规则：

```
# Verify host.
check host example with address example.com
  if failed
    port 80
    protocol http
  then alert 
```

# php - 让这个 php 查询也显示一个 html 链接

> ID：771402
> 
> 赞同：0
> 
> 时间：2009-04-21T07:11:23.587
> 
> 标签：php, html, href

可以修改此代码片段以显示 html 编码吗？

```
<?php $_option = $this->getOption() ?>
<?php echo  $this->htmlEscape($_option->getTitle()) ?> 
```

它显示了一个标题，但在那个标题中我有一个href：

```
<a href="http://link" target="otherwindow">link</a> 
```

而不是显示为链接，它只是向我显示代码。我希望它是一个可点击的链接。

可能的？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-04-21T07:14:57.370

是的，只需删除 $this->htmlEscape() 并保留 $_option->getTitle()

转义功能只是提供无法使用（或注入）html命令或javascript的功能。

# multithreading - 如何为 OO 语言设计线程包？

> ID：771426
> 
> 赞同：0
> 
> 时间：2009-04-21T07:21:01.957
> 
> 标签：multithreading, oop, programming-languages

在 OO 类中设计线程包似乎比在函数式编程中更难。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-21T07:25:38.313

你有一个具体的问题吗？您在这里提出了一个非常相似的[问题](https://stackoverflow.com/questions/771298/how-to-create-a-thread-in-a-class)，我将其称为重复问题。您可以查看该线程中的设计和答案，以给您一个想法。

但在您提出具体问题之前，我们无法为您提供帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-21T07:27:22.863

线程是一个困难的概念。但是 OO 语言非常适合实现这些。

定义一个线程类，它在自己的线程中运行。创建一个子类并覆盖所需的方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-21T07:28:12.067

相反，面向对象语言的线程库数不胜数。您认为哪种特定语言在这方面有困难？

# c# - 使用 C# 编写 VirtualBox 脚本

> ID：771429
> 
> 赞同：3
> 
> 时间：2009-04-21T07:21:31.130
> 
> 标签：c#, virtualbox

哪里是找到 VirtualBox 的 C# 示例的最佳位置？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-21T07:26:43.660

VirtualBox SDK 附带 Java、Python、Perl 示例。由于 WSDL 文件也在那里，因此编写 C# 示例应该不是什么大问题。

# java - Java中的逃逸分析

> ID：771430
> 
> 赞同：39
> 
> 时间：2009-04-21T07:21:31.800
> 
> 标签：java, stack, allocation, escape-analysis

据我所知，JVM 使用逃逸分析来进行一些性能[优化](http://www.ibm.com/developerworks/java/library/j-jtp10185/)，例如锁粗化和锁省略。如果 JVM 有可能决定任何特定对象可以使用转义分析在堆栈上分配，我很感兴趣。

一些[资源](http://www.ibm.com/developerworks/java/library/j-jtp09275.html)让我认为我是对的。有没有真正做到这一点的JVM？

* * *

## 回答 #1

> 赞同：95
> 
> 时间：2009-07-31T11:23:47.717

使用这个版本的 java -XX:+DoEscapeAnalysis 可以大大减少 gc 活动和 14 倍的执行速度。

```
$ java -version
java version "1.6.0_14"
Java(TM) SE Runtime Environment (build 1.6.0_14-b08)
    Java HotSpot(TM) Client VM (build 14.0-b16, mixed mode, sharing)

$ uname -a
Linux xxx 2.6.18-4-686 #1 SMP Mon Mar 26 17:17:36 UTC 2007 i686 GNU/Linux 
```

没有逃逸分析，

```
$ java -server -verbose:gc EscapeAnalysis|cat -n
     1  start
     2  [GC 896K->102K(5056K), 0.0053480 secs]
     3  [GC 998K->102K(5056K), 0.0012930 secs]
     4  [GC 998K->102K(5056K), 0.0006930 secs]
   --snip--
   174  [GC 998K->102K(5056K), 0.0001960 secs]
   175  [GC 998K->102K(5056K), 0.0002150 secs]
   176  10000000 
```

通过逃逸分析，

```
$ java -server -verbose:gc -XX:+DoEscapeAnalysis EscapeAnalysis
start
[GC 896K->102K(5056K), 0.0055600 secs]
10000000 
```

执行时间通过逃逸分析显着减少。为此，循环更改为 10e9 次迭代，

```
public static void main(String [] args){
    System.out.println("start");
    for(int i = 0; i < 1000*1000*1000; ++i){
        Foo foo = new Foo();
    }
    System.out.println(Foo.counter);
} 
```

没有逃逸分析，

```
$ time java -server EscapeAnalysis
start
1000000000

real    0m27.386s
user    0m24.950s
sys     0m1.076s 
```

通过逃逸分析，

```
$ time java -server -XX:+DoEscapeAnalysis EscapeAnalysis
start
1000000000

real    0m2.018s
user    0m2.004s
sys     0m0.012s 
```

因此，使用逃逸分析的示例运行速度比非逃逸分析运行快 14 倍。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-04-21T08:48:59.563

我认为它不会逃避堆栈分配的分析。例子：

```
public class EscapeAnalysis {

    private static class Foo {
        private int x;
        private static int counter;

        public Foo() {
            x = (++counter);
        }
    }
    public static void main(String[] args) {
        System.out.println("start");
        for (int i = 0; i < 10000000; ++i) {
            Foo foo = new Foo();
        }

        System.out.println(Foo.counter);
    }
} 
```

与`-server -verbose:gc -XX+DoEscapeAnalysis`：

```
开始
[GC 3072K->285K(32640K), 0.0065187 秒]
[GC 3357K->285K(35712K), 0.0053043 秒]
[GC 6429K->301K(35712K)，0.0030797 秒]
[GC 6445K->285K(41856K), 0.0033648 秒]
[GC 12573K->285K(41856K), 0.0050432 秒]
[GC 12573K->301K(53952K)，0.0043682 秒]
[GC 24877K->277K(53952K), 0.0031890 秒]
[GC 24853K->277K(78528K), 0.0005293 秒]
[GC 49365K->277K(78592K), 0.0006699 秒]
10000000

```

据称[JDK 7 支持堆栈分配](http://blog.juma.me.uk/2008/12/17/objects-with-no-allocation-overhead/)。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-12-02T16:42:35.107

越狱分析真的很不错，但它不是一个完整的无监狱卡。如果您在对象内部有一个动态大小的集合，则转义分析将不会从堆切换到堆栈。例如：

```
public class toEscape {
   public long l;
   public List<Long> longList = new ArrayList<Long>();
} 
```

即使这个对象是在一个方法中创建的并且绝对不会从句法的角度转义，编译器也不会将其标记为转义。我怀疑是因为从纯句法的角度来看，longList 的大小并没有真正的限制，它可能会破坏你的堆栈。因此，我相信它需要通过这个案例。我在 longList 为空的情况下对此进行了实验，但它仍然在一个简单的微基准测试中引起了集合。﻿</p>

# c# - 将派生类传递给采用抽象类型的 Web 服务方法

> ID：771439
> 
> 赞同：2
> 
> 时间：2009-04-21T07:24:56.630
> 
> 标签：c#, web-services, abstract-class

我有一个奇怪的问题正在困扰我。

我在一个项目中定义了以下类：

```
public abstract class AbstractUnitModel {

      public void executeRemoteModel(){}

}

//this class also implements a seperate interface, but I dont think that is the issue
public class BlastFurnaceUnitModel : AbstractUnitModel, IUnitModel {} 
```

现在，如果我尝试这样的事情，它会按预期工作：

```
class Class1
{

    public void method1() {

        BlastFurnaceUnitModel b = new BlastFurnaceUnitModel();
        method2(b);
    }

    public void method2(AbstractUnitModel a) {}

 } 
```

现在我有另一个公开 Web 方法的项目。此方法采用 AbstractUnitModel 并远程执行它，然后将结果发送回客户端。所以在服务器上我有这个：

```
 [WebMethod]
 public AbstractUnitModel remotelyExecuteUnitModel(UnitModelWrapperInterface.AbstractUnitModel unitModel)
        {

           unitModel.executeRemoteModel();
           return unitModel;

         } 
```

在客户端我有这个：

```
 public void remoteExecution() {

                var unitModelWebService = new UnitModelRemoteServer.RemoteModelExecutionWebService();
                unitModelWebService.remotelyExecuteUnitModelCompleted += new UnitModelRemoteServer.remotelyExecuteUnitModelCompletedEventHandler(remoteExecutionCompleted);
                unitModelWebService.remotelyExecuteUnitModelAsync(this.remoteBF);
            } 
```

但是我的项目无法编译，并且出现以下错误： *错误 109 'CalibrationClient.UnitModelRemoteServer.RemoteModelExecutionWebService.remotelyExecuteUnitModelAsync(CalibrationClient.UnitModelRemoteServer.AbstractUnitModel)' 的最佳重载方法匹配有一些无效参数*

*错误 110 参数“1”：无法从“UnitModelWrapperInterface.BlastFurnaceUnitModel”转换为“CalibrationClient.UnitModelRemoteServer.AbstractUnitModel”*

我不知道为什么会这样。我在服务器项目中有对定义 AbstractUnitModel 的命名空间的引用。唯一让我觉得有点好笑的是，它使用的是“CalibrationClient”命名空间中的 AbstractUnitModel，而不是 UnitModelWrapperInterface。似乎当 VS 在客户端为 Web 服务生成代理时，它会创建 AbstractUnitModel 的部分抽象实现。这是我问题的根源吗？如果是这样，我该如何解决它？

编辑解决方案：正如所指出的，客户端需要了解可以通过网络发送的所有类。我最终通过删除生成的代理类并引用公共库来解决这个问题。在这种情况下不理想但足够好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-21T07:44:52.820

发生这种情况是因为 WSDL 工具创建了代理类（打开服务代码文件，您将看到它们），这些代理类用于在对象来自服务时进行实例化。

如果你想避免这种情况，最好使用 WCF。这也处理了多态返回的对象，因为 web 服务也不能处理多态（所以 remoteExecuteUnitModel 方法的返回类型总是 AbstractUnitModel。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-21T07:28:05.513

您可以尝试`[XmlInclude]`：

```
[XmlInclude(typeof(BlastFurnaceUnitModel))]
public abstract class AbstractUnitModel {...} 
```

值得一试，至少...

（编辑）或在方法级别：

```
[WebMethod(), XmlInclude(typeof(BlastFurnaceUnitModel))]
public AbstractUnitModel remotelyExecuteUnitModel(...) {...} 
```

（不太确定第二个）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-21T09:09:13.070

WebService 中公开的类是在服务引用内的不同命名空间中创建的。

我通常会创建一个类似的方法

```
WebServiceReferenceNS.AbstractUnitModel ToWebServiceModel(AbstractUnitModel unitModel)
{
} 
```

为 WebService 准备类。但我想看看是否有更优雅的解决方案。

# delphi - 从 Windows 控制台启动一个 gui 程序，然后使其“分离”自身

> ID：771451
> 
> 赞同：1
> 
> 时间：2009-04-21T07:29:53.327
> 
> 标签：delphi, batch-file, console

我正在尝试修改旧版 Delphi 5 应用程序，以便可以从它的图标/通过资源管理器或从控制台（命令行）启动它。当它从控制台启动时，我希望程序将自己与控制台进程分离，以便控制台可以继续执行其他指令，而无需等待我的程序终止。

我想在“批处理”文件中使用它，这样我可能就有；

```
@echo 关闭
rem 第 1 步 - 在这里做一些事情
雷姆
rem 第 2 步 - 启动我的应用程序
c:\我的文件夹\我的应用程序
雷姆
rem 第 3 步 - 在这里做更多的事情

```

并且控制台进程在步骤 2 中启动我的应用程序后直接进入步骤 3。

我确信我在很多年前就做过这个，但我对我到底做了什么感到困惑。我不想为我的主要 Windows 应用程序编写一个小型控制台应用程序“启动器”——我 95% 确信在“普通”Delphi GUI 应用程序中可以做到这一点。

我想我可以使用 vbscript 或 powershell 或其他东西来使用某种“nowait”参数“执行”我的程序，但客户端熟悉批处理文件，我真的不想通过建议他更改他的脚本或安装额外的东西 - 无论如何我都在对可执行文件进行更改，如果也为他勾选这个框会很棒。

任何人？:-)

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2009-04-21T07:32:46.563

我认为该`START`命令是您要查找的命令。它与控制台分开启动一个进程，它是其中的一部分，`cmd.exe`因此不需要额外的软件。

但我认为 GUI 应用程序还是这样做了。也许 Delphi 与 MSVC 不同。

打开控制台并输入`"start /?"`.

正如`itowlson`评论中所述，GUI 应用程序通常会自行分离。这是实际的`cmd.exe`shell 在做诡计，如果它是从 cmd 文件运行的，它会等待它完成。

因此`"notepad"`，从提示将在后台启动它，但`"notepad"`在 cmd 文件中将等待。在 cmd 文件中，您需要使用：

```
start notepad.exe 
```

或任何您的应用程序被调用（可能不是记事本）。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-04-21T07:35:05.467

尝试：*start "" c:\myfolder\myapp*（带空引号）

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-23T10:49:27.977

我认为微软已经在 Windows Power Shell 中解决了这个问题。在命令提示符下，即使您使用“开始”，您也无法真正将您的进程与 cmd 分离。如果你关闭cmd，你会突然死掉。但在 Windows Power Shell 中，您可以默认将程序或命令从 Power Shell 中分离出来。因此，如果您更喜欢使用 Windows Power Shell 而不是命令提示符，只需执行以下操作：

```
PS: X:\> <your command> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-01-18T17:06:22.577

这是我找到的一种方法。它工作得非常干净，不会留下任何额外的*cmd*窗口（建议使用*start c:\myfolder\myapp* **不起作用**：

```
cmd /c dir && c:\myfolder\myapp 
```

引用 CMD 帮助：

```
/C      Carries out the command specified by string and then terminates

Note that multiple commands separated by the command separator '&&'
are accepted for string if surrounded by quotes. 
```

Apparently it notices that the *dir* command terminates and exits, even though your app was launched on the same command. Chalk it up to one of Windows vagaries.

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2018-01-09T00:18:42.013

u should use the cd command example

cd/

cd myfolder

start myapp

exit

# c++ - 将地图值复制到 STL 中的向量

> ID：771453
> 
> 赞同：95
> 
> 时间：2009-04-21T07:30:42.763
> 
> 标签：c++, stl, containers

目前正在通过有效的 STL 工作。第 5 项建议使用范围成员函数通常比使用它们的单元素对应物更可取。我目前希望将地图中的所有值（即 - 我不需要键）复制到向量中。

最干净的方法是什么？

* * *

## 回答 #1

> 赞同：71
> 
> 时间：2009-04-21T07:42:50.300

您可能可以[`std::transform`](http://en.cppreference.com/w/cpp/algorithm/transform)用于此目的。不过，我可能更喜欢 Neils 版本，具体取决于更具可读性。

* * *

[xtofl](https://stackoverflow.com/users/6610/xtofl)的示例（见评论）：

```
#include <map>
#include <vector>
#include <algorithm>
#include <iostream>

template< typename tPair >
struct second_t {
    typename tPair::second_type operator()( const tPair& p ) const { return p.second; }
};

template< typename tMap > 
second_t< typename tMap::value_type > second( const tMap& m ) { return second_t< typename tMap::value_type >(); }

int main() {
    std::map<int,bool> m;
    m[0]=true;
    m[1]=false;
    //...
    std::vector<bool> v;
    std::transform( m.begin(), m.end(), std::back_inserter( v ), second(m) );
    std::transform( m.begin(), m.end(), std::ostream_iterator<bool>( std::cout, ";" ), second(m) );
} 
```

非常通用，如果你觉得有用，记得给他点赞。

* * *

## 回答 #2

> 赞同：64
> 
> 时间：2009-04-21T07:37:00.157

您不能在这里轻松地使用范围，因为您从映射中获得的迭代器指的是 std::pair，您将用于插入向量中的迭代器指的是存储在向量中的类型的对象，即（如果您要丢弃密钥）不是一对。

我真的不认为它比显而易见的更干净：

```
#include <map>
#include <vector>
#include <string>
using namespace std;

int main() {
    typedef map <string, int> MapType;
    MapType m;  
    vector <int> v;

    // populate map somehow

    for( MapType::iterator it = m.begin(); it != m.end(); ++it ) {
        v.push_back( it->second );
    }
} 
```

如果我要多次使用它，我可能会将其重写为模板函数。就像是：

```
template <typename M, typename V> 
void MapToVec( const  M & m, V & v ) {
    for( typename M::const_iterator it = m.begin(); it != m.end(); ++it ) {
        v.push_back( it->second );
    }
} 
```

* * *

## 回答 #3

> 赞同：37
> 
> 时间：2015-12-29T22:04:53.307

在 C++11 中，我们有了花哨的新`for`循环：

```
for (const auto &s : schemas)
   names.push_back(s.second); 
```

哪里`schemas`是一个`std::map`，`names`是一个`std::vector`。

`names`这将使用映射 ( ) 中的值填充数组 ( `schemas`)；更改`s.second`为`s.first`获取键数组。

* * *

## 回答 #4

> 赞同：32
> 
> 时间：2016-09-23T07:52:05.933

```
#include <algorithm> // std::transform
#include <iterator>  // std::back_inserter
std::transform( 
    your_map.begin(), 
    your_map.end(),
    std::back_inserter(your_values_vector),
    [](auto &kv){ return kv.second;} 
); 
```

抱歉，我没有添加任何解释 - 我认为代码非常简单，不需要任何解释。所以：

```
transform( beginInputRange, endInputRange, outputIterator, unaryOperation) 
```

此函数调用范围 ( - )`unaryOperation`中的每个项目。operation 的值存储在.`inputIterator``beginInputRange``endInputRange``outputIterator`

如果我们想通过整个地图进行操作 - 我们使用 map.begin() 和 map.end() 作为我们的输入范围。我们想将我们的地图值存储到向量中 - 所以我们必须在我们的向量上使用 back_inserter: `back_inserter(your_values_vector)`。back_inserter 是特殊的 outputIterator，它在给定（作为参数）集合的末尾推送新元素。最后一个参数是 unaryOperation - 它只需要一个参数 - inputIterator 的值。所以我们可以使用 lambda: `[](auto &kv) { [...] }`，其中 &kv 只是对映射项对的引用。因此，如果我们只想返回地图项的值，我们可以简单地返回 kv.second：

```
[](auto &kv) { return kv.second; } 
```

我认为这可以解释任何疑问。

* * *

## 回答 #5

> 赞同：24
> 
> 时间：2010-04-09T14:42:18.177

如果您使用的是[boost 库](http://www.boost.org)，则可以使用 boost::bind 访问该对的第二个值，如下所示：

```
#include <string>
#include <map>
#include <vector>
#include <algorithm>
#include <boost/bind.hpp>

int main()
{
   typedef std::map<std::string, int> MapT;
   typedef std::vector<int> VecT;
   MapT map;
   VecT vec;

   map["one"] = 1;
   map["two"] = 2;
   map["three"] = 3;
   map["four"] = 4;
   map["five"] = 5;

   std::transform( map.begin(), map.end(),
                   std::back_inserter(vec),
                   boost::bind(&MapT::value_type::second,_1) );
} 
```

此解决方案基于 Michael Goldshteyn 在[boost 邮件列表中](http://lists.boost.org/Archives/boost/2006/01/99760.php)的帖子。

* * *

## 回答 #6

> 赞同：20
> 
> 时间：2009-04-21T13:04:42.617

使用 lambdas 可以执行以下操作：

```
{
   std::map<std::string,int> m;
   std::vector<int> v;
   v.reserve(m.size());
   std::for_each(m.begin(),m.end(),
                 [&v](const std::map<std::string,int>::value_type& p) 
                 { v.push_back(p.second); });
} 
```

* * *

## 回答 #7

> 赞同：9
> 
> 时间：2009-04-21T08:37:23.583

这就是我要做的。
此外，我会使用模板函数来简化 select2nd 的构建。

```
#include <map>
#include <vector>
#include <algorithm>
#include <memory>
#include <string>

/*
 * A class to extract the second part of a pair
 */   
template<typename T>
struct select2nd
{
    typename T::second_type operator()(T const& value) const
    {return value.second;}
};

/*
 * A utility template function to make the use of select2nd easy.
 * Pass a map and it automatically creates a select2nd that utilizes the
 * value type. This works nicely as the template functions can deduce the
 * template parameters based on the function parameters. 
 */
template<typename T>
select2nd<typename T::value_type> make_select2nd(T const& m)
{
    return select2nd<typename T::value_type>();
}

int main()
{
    std::map<int,std::string>   m;
    std::vector<std::string>    v;

    /*
     * Please note: You must use std::back_inserter()
     *              As transform assumes the second range is as large as the first.
     *              Alternatively you could pre-populate the vector.
     *
     * Use make_select2nd() to make the function look nice.
     * Alternatively you could use:
     *    select2nd<std::map<int,std::string>::value_type>()
     */   
    std::transform(m.begin(),m.end(),
                   std::back_inserter(v),
                   make_select2nd(m)
                  );
} 
```

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2009-04-21T07:49:43.653

一种方法是使用仿函数：

```
 template <class T1, class T2>
    class CopyMapToVec
    {
    public: 
        CopyMapToVec(std::vector<T2>& aVec): mVec(aVec){}

        bool operator () (const std::pair<T1,T2>& mapVal) const
        {
            mVec.push_back(mapVal.second);
            return true;
        }
    private:
        std::vector<T2>& mVec;
    };

int main()
{
    std::map<std::string, int> myMap;
    myMap["test1"] = 1;
    myMap["test2"] = 2;

    std::vector<int>  myVector;

    //reserve the memory for vector
    myVector.reserve(myMap.size());
    //create the functor
    CopyMapToVec<std::string, int> aConverter(myVector);

    //call the functor
    std::for_each(myMap.begin(), myMap.end(), aConverter);
} 
```

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2010-05-03T12:37:23.840

我认为应该是

```
std::transform( map.begin(), map.end(), 
                   std::back_inserter(vec), 
                   boost::bind(&MapT::value_type::first,_1) ); 
```

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2015-12-18T19:33:26.183

为什么不：

```
template<typename K, typename V>
std::vector<V> MapValuesAsVector(const std::map<K, V>& map)
{
   std::vector<V> vec;
   vec.reserve(map.size());
   std::for_each(std::begin(map), std::end(map),
        [&vec] (const std::map<K, V>::value_type& entry) 
        {
            vec.push_back(entry.second);
        });
    return vec;
} 
```

用法：

自动 vec = MapValuesAsVector(anymap);

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2019-02-01T02:32:50.193

我们应该使用 STL 算法中的变换函数，变换函数的最后一个参数可以是函数对象、函数指针或 lambda 函数，将映射项转换为向量项。此案例映射具有类型对的项目，需要将其转换为具有 int 类型向量的项目。这是我使用 lambda 函数的解决方案：

```
#include <algorithm> // for std::transform
#include <iterator>  // for back_inserted

// Map of pair <int, string> need to convert to vector of string
std::map<int, std::string> mapExp = { {1, "first"}, {2, "second"}, {3, "third"}, {4,"fourth"} };

// vector of string to store the value type of map
std::vector<std::string> vValue;

// Convert function
std::transform(mapExp.begin(), mapExp.end(), std::back_inserter(vValue),
       [](const std::pair<int, string> &mapItem)
       {
         return mapItem.second;
       }); 
```

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2021-04-15T13:19:26.330

其他答案提到[std::transform](https://en.cppreference.com/w/cpp/algorithm/transform)，从语义上讲这是正确的选择。但实际上[std::accumulate](https://en.cppreference.com/w/cpp/algorithm/accumulate)可能更适合这项任务，因为：

*   它允许将**const**添加到结果向量中；
*   它只是看起来更好，真正的功能风格。

示例（使用 C++17 语法）：

```
#include <numeric> // for std::accumulate. Note that it's not in <algorithm> where std::transform is located, thanks to Anton Krug for pointing this out

auto map = std::map<int,bool>{};
map[0]=true;
map[1]=false;

const auto mapValues = std::accumulate(map.begin(), map.end(), std::vector<bool>(map.size()), [](auto& vector, const auto& mapEntry) {
    vector.push_back(mapEntry.second);
    return vector;
}); 
```

* * *

## 回答 #13

> 赞同：-3
> 
> 时间：2018-08-28T15:30:49.290

很惊讶没有人提到[最明显的解决方案](http://www.techiedelight.com/convert-map-vector-key-value-pairs-cpp/)，使用 std::vector 构造函数。

```
template<typename K, typename V>
std::vector<std::pair<K,V>> mapToVector(const std::unordered_map<K,V> &map)
{
    return std::vector<std::pair<K,V>>(map.begin(), map.end());
} 
```

# c++ - 这个 C++ 堆栈分配器的改进？

> ID：771458
> 
> 赞同：7
> 
> 时间：2009-04-21T07:33:22.943
> 
> 标签：c++, memory, memory-management

对我的基于堆栈的分配器有什么建议吗？（除了建议使用具有私有/公共成员的类）

```
struct Heap
{
    void* heap_start;
    void* heap_end;
    size_t max_end;

    Heap(size_t size)
    {
        heap_start = malloc(size);
        heap_end = heap_start;
        max_end = size + (size_t) heap_start;
    }

    ~Heap()
    {
        ::free(heap_start);
    }

    void* allocate(size_t bytes)
    {

        size_t new_end = ((size_t) heap_end) + bytes;

        if( new_end > max_end )
            throw std::bad_alloc();

        void* output = heap_end;
        heap_end = (void*) new_end;
        return output;
    }

} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-04-21T07:56:34.260

```
size_t new_end = ((size_t) heap_end) + bytes; 
```

**不好**，永远不要做那样的事情，你假设 sizeof(size_t)==sizeof(void*)，如果`bytes==(size_t)(-1)`这不起作用会发生什么

**此外，**您需要确保返回的指针是对齐的。否则你会有问题。因此，根据您的平台，您需要确保字节是 4 或 8 的倍数。

```
class {...
char *max_end,*head_end,*heap_start;
};

...
max_end=heap_start+size;
...
bytes=align_to_platform_specific_value(bytes);
if(max_end-heap_end >= bytes) {
   void* output = (void*)heap_end;
   heap_end+=bytes;
   return output;
}
throw std::bad_alloc(); 
```

建议？不要重新发明轮子。有很多很好的游泳池图书馆。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-04-21T08:09:44.243

您已经实现了一个基于堆栈的分配器。你不能不留空隙就解放出来。通常，池是指具有固定大小插槽的连续内存块，它们是双重链接的，以允许恒定时间添加和删除。

[这是](https://raw.githubusercontent.com/justinhj/astar-algorithm-cpp/master/cpp/fsa.h)您可以用作指南的一个。它与您的路线相同，但包括分配节点上的基本迭代器，并使用模板来识别类型。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-04-21T07:39:45.050

两个明显的问题：

1/ 你没有`deallocate()`.

2/ A`deallocate()`将很难用你当前的策略编写，除非你总是以与分配完全相反的顺序去分配。您需要满足客户想要在您使用的部分中间释放内存的情况。

当然，如果您确实以相反的顺序解除分配，则（2）不是问题。如果你根本不释放内存，（1）也不是问题。

这取决于你想让它做什么。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-04-21T07:40:54.843

您的堆不允许释放。你将如何将它用于在 C++中用*new分配的对象？*

# sql-server - 我怎样才能找到为什么一些经典的 asp 页面随机需要很长时间才能执行？

> ID：771459
> 
> 赞同：3
> 
> 时间：2009-04-21T07:33:26.280
> 
> 标签：sql-server, performance, asp-classic, iis-6, freeze

我正在开发一个相当大的经典 asp / SQL Server 应用程序。几个月前推出了一个新版本，其中包含许多新功能，我一定有一个非常讨厌的错误：一些非常基本的页面随机需要很长时间才能执行。

一些线索：

*   它不是数据库：当我运行查询分析器时，它没有检测到任何长时间运行的查询
*   当我启动 IIS 诊断工具时，reqviewer 显示请求处于“处理中”状态
*   这可能发生在任何页面上
*   我不能轻易复制它，它完全是随机的。
*   有一个“很长一段时间”的想法：今天早上我有一个页面需要超过 5 分钟才能执行，通常应该在 100 毫秒内返回给客户端。
*   该应用程序可以处理相当大的文件上传和下载（最大 2 GB）。这也通过使用 SoftArtisan FileUp 的经典 asp 脚本进行处理。不要认为它会导致问题，我们已经上传了很长一段时间了。
*   我在两个单独的服务器上遇到了问题（在两个不同的位置，具有不同的数据集）。一个是使用良好的 SQL Server 2000 运行应用程序，另一个运行 SQL Server 2005。在这两种情况下，Web 服务器都是 IIS 6。

知道问题是什么或如何解决这类问题吗？

谢谢。

塞巴斯蒂安

* * *

编辑 ：

问题来自内存碎片。一些asp页面用于从服务器下载文件。文件大小可以从几 kb 到超过 2 gb。这些大小的变化会导致内存碎片。asp 页面也可能需要相当长的时间来执行（用户下载页面的时间减去 IIS 级别缓存中的内容），这对于应该快速执行的服务器页面来说并不是真正的标准。

这就是我为改善事情所做的：

*   将所有下载逻辑放在一个单独的 asp 页面中，并关闭会话
*   这使我可以将该 asp 页面放在可以经常回收的特定池中（现在下载不会再干扰应用程序的其余部分）
*   开启 LFH（Low Fragmention Heap），在 Windows 2003 上默认不开启，以减少内存碎片

LFH 的参考资料：

*   [http://msdn.microsoft.com/en-us/library/aa366750(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/aa366750(v=vs.85).aspx)
*   [http://blogs.msdn.com/b/friis/archive/2008/10/14/fragmentation-m-moire-sous-iis-6.aspx](http://blogs.msdn.com/b/friis/archive/2008/10/14/fragmentation-m-moire-sous-iis-6.aspx)（那里有一个 dll 可以用来打开 LFH，但这篇文章是法语的。你现在必须学习我们美丽的语言！）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2011-02-03T23:46:53.733

我在我从事的经典 ASP + ajax 应用程序上注意到了同样的事情。使用计时器，我将页面加载时间设置为 153 毫秒，但在萤火虫瀑布图中它随机显示为 3.5 秒。Timer 输出在响应中，瀑布图声称它是 Firefox 等待来自服务器的响应。因为瀑布图也显示了响应，所以我可以将瀑布图与计时器进行比较，并且“每隔一段时间”存在巨大差异

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-21T07:42:09.600

你能确定这是所有页面的问题还是页面的公共子集的问题？

如果一个子集检查这些页面的共同点，例如它们都使用特定的 COM dll，而其他页面则没有。

此问题会影响多个客户端还是仅影响少数几个？

IOW 是否存在特定浏览器操作系统版本的问题。

这是公网还是内网？

你能从你拥有的客户那里重现这个问题吗？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-30T15:00:30.377

SQL Server 上是否有可能进行一些全文搜索查询？

因为如果是这样，并且如果 SQL Server 无法访问 Internet，则在尝试检查证书时可能会每隔几个小时左右导致 45 秒的延迟（尽管这不适用于 SQL Server 2000）。

有关我所指内容的详细说明，[请阅读此](http://support.microsoft.com/default.aspx/kb/915850 "在没有 Internet 访问权限的服务器上运行的 SQL Server 2005 实例中运行全文查询时，您可能会遇到 45 秒的延迟")。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-04-30T15:06:25.043

您的 Web 服务器上是否正在运行其他应用程序？如果是这样，您的问题是否与他们中的任何一个在同一个应用程序池中？如果是这样，请尝试为它创建一个专用的应用程序池。也许其他应用程序之一出现问题并对您的应用程序产生不利影响。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2011-02-04T14:35:45.590

需要注意的一件事是，如果您在 IIS 中打开了服务器端调试，则 Web 服务器将以单线程模式运行。

因此，如果您尝试加载页面，而其他人同时点击了该 url，您将排在他们后面。页面加载似乎需要很长时间，但这仅仅是因为服务器在单个文件行中分发页面请求，有时您不在行的前面。

您可能已将其打开以进行调试，而忘记将其关闭以进行生产。

# java - Java保存功能不起作用

> ID：771464
> 
> 赞同：0
> 
> 时间：2009-04-21T07:37:31.327
> 
> 标签：java, dialog, save, ioexception

嘿，我有这段代码应该保存一个`java.util.Vector`自定义可序列化类：

```
if(filename.equals("")){
    javax.swing.JFileChooser fc = new javax.swing.JFileChooser();
    if(fc.showSaveDialog(this) == javax.swing.JFileChooser.APPROVE_OPTION){
        filename = fc.getSelectedFile().toString();
    }
}
try{
    java.io.FileOutputStream fos = new java.io.FileOutputStream(filename);
    java.io.ByteArrayOutputStream baos = new java.io.ByteArrayOutputStream();
    java.io.ObjectOutputStream oos = new java.io.ObjectOutputStream(baos);
    oos.writeObject((Object)tl.entities);
    baos.writeTo(fos);
    oos.close();
    fos.close();
    baos.close();
}catch(java.io.FileNotFoundException e){
    javax.swing.JOptionPane.showMessageDialog(this, "FileNotFoundException: Could not save file: "+e.getCause()+" ("+e.getMessage()+")", "Error", javax.swing.JOptionPane.ERROR_MESSAGE);
}catch(java.io.IOException e){
    javax.swing.JOptionPane.showMessageDialog(this, "IOException: Could not save file: "+e.getCause()+" ("+e.getMessage()+")", "Error", javax.swing.JOptionPane.ERROR_MESSAGE);
} 
```

但是在保存时，它显示一个定义的对话框错误说：`IOException: Could not save file: null (com.sun.java.swing.plaf.windows.WindowsFileChooserUI)`并且`NullPointerException`在命令行中有一个`javax.swing.plaf.basic.BasicListUI.convertModelToRow(BasicListUI.java:1251)`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-04-21T07:42:05.480

也许您可以更好地检查文件名：

```
if (filename == null || "".equals(filename)){
    javax.swing.JFileChooser fc = new javax.swing.JFileChooser();
    if(fc.showSaveDialog(this) == javax.swing.JFileChooser.APPROVE_OPTION){
        filename = fc.getSelectedFile().toString();
    }
    if (filename == null || "".equals(filename)) {
        // Display a message or anything else
        return;
    }
}
try {
 ...
 } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-21T07:49:16.290

我不知道到底是什么问题，因为您的异常消息不是那么清楚。但我对您的代码有 2 条评论：

1.  文件名（或文件）的 Null-Check 是可以的（如[romaintaz](https://stackoverflow.com/questions/771464/java-save-function-doesnt-work/771475#771475)所建议的）
2.  为什么将文件更改为其文件名？保留文件对象并将其传递给流。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-21T08:22:47.177

您的代码中有一些错误。

*   您有条件地设置文件名。如果你不设置它，你仍然尝试使用它。
*   你关闭一个 ByteArrayOutputStream （这是没用的，见 api）
*   您将文件对象转换回文件名，同时可以使用文件对象写入流

我建议这样编码：

```
while(file == null) { // force a file to be choosen
    javax.swing.JFileChooser fc = new javax.swing.JFileChooser();
    if(fc.showSaveDialog(this) == javax.swing.JFileChooser.APPROVE_OPTION) {
            file = fc.getSelectedFile()
    }
    else {
        javax.swing.JOptionPane.showMessageDialog(this, "No file selected", "Error", javax.swing.JOptionPane.ERROR_MESSAGE);
    }
}

try{
        java.io.FileOutputStream fos = new java.io.FileOutputStream(file);
        java.io.ByteArrayOutputStream baos = new java.io.ByteArrayOutputStream();
        java.io.ObjectOutputStream oos = new java.io.ObjectOutputStream(baos);

        oos.writeObject((Object)tl.entities);
        baos.writeTo(fos);
        oos.close();
        fos.close();

}catch(java.io.FileNotFoundException e){
        javax.swing.JOptionPane.showMessageDialog(this, "FileNotFoundException: Could not save file: "+e.getCause()+" ("+e.getMessage()+")", "Error", javax.swing.JOptionPane.ERROR_MESSAGE);
}catch(java.io.IOException e){
        javax.swing.JOptionPane.showMessageDialog(this, "IOException: Could not save file: "+e.getCause()+" ("+e.getMessage()+")", "Error", javax.swing.JOptionPane.ERROR_MESSAGE);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-04-21T08:32:24.360

您的问题很难诊断，因为您没有显示您正在捕获的异常的堆栈跟踪。

为什么要将某些内容序列化为`ByteArrayOutputStream`仅将字节数组写入文件？您是否出于某种原因需要浪费内存？

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-04-21T15:53:59.683

我发现了错误，保存对话框脚本本身运行良好，但向量中的类有一个导致错误的空指针。

但是感谢所有回复，我可以使用其中的一些:)

# sql-server - 无法将参数值从 TimeSpan 转换为 DateTime

> ID：771465
> 
> 赞同：2
> 
> 时间：2009-04-21T07:37:49.813
> 
> 标签：sql-server, ado.net, datetime

我正在使用 SQL Server 2008。

首先，我给出`SqlDbType.Time`了`System.TimeSpan`插入和更新的参数类型。

我工作成功。

现在我改为`DbType.Time`而不是`SqlDbType.Time`. 这给了我错误消息“无法将参数值从 TimeSpan 转换为 DateTime”，它没有调用“程序”

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-04-21T08:08:36.680

这是当前版本的 ADO.Net 中已[确认的错误](https://connect.microsoft.com/VisualStudio/feedback/ViewFeedback.aspx?FeedbackID=381934)。直到，下一个版本，您需要使用 SqlDbType.Time。

# algorithm - 将一个值映射到另一个值并返回

> ID：771466
> 
> 赞同：0
> 
> 时间：2009-04-21T07:37:50.827
> 
> 标签：algorithm, security, mapping, obfuscation, anonymity

想象一个值，比如“1234”。我想将该值映射到另一个值，例如“abcd”。约束：

1.  目标值的长度等于起始值
2.  映射应该是唯一的。例如 1234 应该只映射到 abcd 和 viseversa
3.  映射过程应该（非常）难以猜测。例如乘以 2 确实计数
4.  映射应该是可逆的
5.  起始值是一个整数
6.  目标值可以是任何类型

这应该是一个基本算法，最终我会用 Ruby 编写它，但这里无关紧要。

我是按照以下思路思考的：

```
SECRET = 1234
def to(int)
  SECRET + int * 2
end

def fro(int)
  (int - SECRET)  / 2
end 
```

显然，这违反了约束 1 和 3。

最终目标是匿名化我数据库中的记录。我可能想多了。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-04-21T08:03:22.217

首先，我宁愿认为您的目标过于雄心勃勃：为什么要限制 6？

其次，从技术上讲，您需要的是整数域的[双射](http://en.wikipedia.org/wiki/Bijection)。

第三，您的约束 3 违反了[Kerkoff 的原则](http://en.wikipedia.org/wiki/Kerckhoffs%27_principle)。最好使用由密钥管理的众所周知的算法，即使您知道大量整数的结果，也很难推导出密钥。

第四，你匿名反对什么？如果您正在处理个人信息，您将如何防止基于与其他数据的关系而显示 Xyzzy 实际上是 John Doe 的统计分析？有一些关于对抗此类攻击媒介的研究（谷歌例如' [k-anonymization](http://www.google.com/search?q=k-anonymization) '）。

第五，使用现有的密码学原语，而不是试图发明自己的密码学原语。存在经过充分测试的加密算法（例如[密码块链接](http://www.globalsecuritymag.com/How-can-I-securely-encrypt-short,20081103,5854)模式中的 AES）——所有现代平台都很好地支持 AES，大概 Ruby 也是如此。然而，加密仍然没有给记录带来任何强烈的匿名性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-21T08:09:04.900

可能值得您提供更多关于您想要实现的目标的详细信息。大概您担心某个邪恶的人会获取您的数据，但是这个邪恶的人是否也同样有可能访问访问您的数据库的代码？是什么阻止他们通过检查您的代码来学习算法？

如果您真的想对数据进行匿名化，那么这通常是一种方式（名称被删除，信用卡值被删除等）。如果您尝试加密数据库的内容，那么许多数据库引擎都提供了经过良好测试的机制来执行此操作。例如：

[MSSQL 中处理加密数据的最佳实践](https://stackoverflow.com/questions/535175/best-practices-for-dealing-with-encrypted-data-in-mssql)

[数据库加密](https://stackoverflow.com/questions/281618/database-encryption)

使用产品的加密机制总是比使用自己的加密机制更好。

# iis - 可以在 url 中隐藏 .dll 扩展名

> ID：771468
> 
> 赞同：2
> 
> 时间：2009-04-21T07:38:02.587
> 
> 标签：iis, isapi

我正在寻找一种技巧来隐藏 url 中 isapi dll 的 .dll 扩展名。我不知道这是否可能。但我更愿意隐藏它。

示例 www.mysite.com/test/myapp.dll/testfunction

将是 www.mysite.com/test/myapp/testfunction

非常感谢你

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-07-09T15:04:07.903

您可以将页面上的链接更改为 ww.mysite.com/test/myapp/testfunction 并将以下配置与[ISAPI_Rewrite 3](http://www.helicontech.com/isapi_rewrite/)一起使用：

重写基础/

RewriteRule ^test/myapp/testfunction$ /test/myapp.dll/testfunction [NC,L]

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-21T07:47:53.097

您可以编写 ISAPI 过滤器并根据需要更改 URI。当然，有现成的[商业](http://www.isapirewrite.com/docs/)和[免费](http://www.motobit.com/help/url-replacer-rewriter/iis-mod-rewrite.asp)的

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-21T07:47:31.113

这个[链接](http://forums.iis.net/t/1150963.aspx)可能有用

编辑：上面的链接实际上令人困惑，因为我认为它不能解决手头的问题。

这两个链接 这[一个](http://msmvps.com/blogs/omar/archive/2007/04/29/serve-extensionless-url-from-asp-net-without-using-isapi-module-or-iis-6-wildcard-mapping.aspx)需要一些编码，这个[需要](http://www.microsoft.com/technet/prodtechnol/WindowsServer2003/Library/IIS/5c5ae5e0-f4f9-44b0-a743-f4c3a5ff68ec.mspx?mfr=true)一些 IIS 设置

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-07-15T00:53:21.330

在[IIRF](http://iirf.codeplex.com)（IIS5/6/7 的免费 URL 重写器）中，您可以执行以下操作：

```
RewriteRule  ^/test/([^/]+)/([^/]+)$  /test/$1.dll/$2   [I,L] 
```

此规则对 DLL 名称和函数进行通配符匹配。

还有更多的可能性。

# sql - 在 Access 中使用自动编号 - INSERT 语句

> ID：771485
> 
> 赞同：6
> 
> 时间：2009-04-21T07:43:56.270
> 
> 标签：sql, ms-access, insert, ado, autonumber

我在运行将`INSERT`自动编号作为 PK 字段的语句时遇到问题。我有一个自动递增`long`作为主键，然后是 4 个类型的字段`double`；然而 Access（使用 ADO）似乎需要五个值用于插入语句。

```
INSERT INTO [MY_TABLE] VALUES (1.0, 2.0, 3.0, 4.0);
>> Error: Number of query values and destinations fields are not the same.

INSERT INTO [MY_TABLE] VALUE (1, 1.0, 2.0, 3.0, 4.0);
>> Success!! 
```

如何使用自动编号来实际自动编号？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2009-04-21T07:47:55.093

如果您不想为表中存在的所有列提供值，则必须指定要插入的列。（这是合乎逻辑的，否则访问或任何其他数据库应该如何知道您为哪些列提供了值）？

所以，你需要做的是：

```
INSERT INTO MyTable ( Column2, Column3, Column4) VALUES ( 1, 2, 3 ) 
```

此外，请确保省略主键列（即自动编号字段）。然后，Access 会自行将其设置为下一个值。

然后，您可以通过执行以下命令来检索新插入记录的主键值

```
SELECT @@identity FROM MyTable 
```

陈述。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-21T07:48:56.227

在查询中提及列名，因为您只提供 4 个值，而该表中有 5 个列。数据库需要知道您提供的值是针对哪一列。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-23T05:07:22.747

不过我的理解是，如果您使用的是 SQL Server 或类似的，并且有添加额外记录的触发器，@@IDENTITY 可能是其他额外记录的触发器。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-02-14T14:13:19.420

只需将自动编号保留在插入查询之外。它会自行填充。

ProjectID前有一个ID字段

```
INSERT INTO ProjectRiskAssessment 
( ProjectID
, RiskClass
, RiskElement
, RiskAttribute
, RiskQuestion
, RiskScale
, RiskStatus
, RiskSeverity
, RiskProbability
, RiskResponse )
SELECT 
 1 AS Expr2
, PullRiskAssessmentQuestions.RiskClass
, PullRiskAssessmentQuestions.RiskElement
, PullRiskAssessmentQuestions.RiskAttribute
, PullRiskAssessmentQuestions.RiskQuestion
, '0' AS Expr3
, 'Open' AS Expr4
, '1' AS Expr5
, '1' AS Expr6
, ' ' AS Expr7
FROM PullRiskAssessmentQuestions; 
```

# c# - 使用 DataContext.ExecuteQuery 时，LINQ to SQL 可以填充非 ColumnAttribute 标记的属性吗？

> ID：771491
> 
> 赞同：7
> 
> 时间：2009-04-21T07:45:58.420
> 
> 标签：c#, linq-to-sql

鉴于此表：

```
CREATE TABLE [Comments]
(
  [Id] [int] IDENTITY(1, 1) NOT NULL, 
  [Text] [nvarchar](600) NOT NULL
) 
```

使用这个模型类：

```
[Table(Name="Comments")]
public class Comment
{
    [Column(AutoSync = AutoSync.OnInsert, DbType = "Int NOT NULL IDENTITY", IsPrimaryKey = true, IsDbGenerated = true)]
    public int Id { get; set; }

    [Column(DbType = "NVarChar(600) NOT NULL", CanBeNull = false)]
    public string Text { get; set; }

    public string ArbitraryText { get; set; }
} 
```

`ArbitraryText`使用该`ExecuteQuery`方法时，DataContext 是否可以填充属性：

```
var comments = db.ExecuteQuery<Comment>("select Id, [Text], 'hello' [ArbitraryText] from Comments"); 
```

似乎实体映射算法忽略了任何未标记的属性`ColumnAttribute`，但是还有另一种方法吗？

我宁愿不必自己进行映射，但这看起来是我唯一的选择。

* * *

编辑：令人讨厌的是 DataContext.ExecuteQuery 函数将从查询中填充[POCO](http://en.wikipedia.org/wiki/Plain_Old_CLR_Object)对象：

```
public class PlainOldCSharpObject
{
    public int Id { get; set; }
    public string Text { get; set; }
    public string ArbitraryText { get; set; }
}
...
// DataContext correctly fills these objects
var pocos = db.ExecuteQuery<PlainOldCSharpObject>("select Id, [Text]... 
```

所以我目前的解决方案是在我的 LINQ 映射对象上有一个内部类，它保存我的聚合查询返回的额外数据。这是次优的，因为某些属性是重复的（例如，Id 和 Text）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-21T08:17:09.250

据我所知不是。您可能会做一些蹩脚的事情来结合来自 UDF 的数据，也许 - 但除此之外，它还希望能够映射列。

（UDF 只返回任意文本和注释 ID）

```
var qry = from row in db.SomeUdfQuery(someArgs)
          join comment in db.Comments
          on row.Id equals comment.Id
          select new {Comment = comment, row.ArbitraryText};

var comments = new List<Comment>();
foreach(var record in qry) {
    record.Comment.ArbitraryText = record.ArbitraryText;
    comments.Add(record.Comment);
}
return comments; 
```

或者 - 如果您需要将这种方法用于许多不同的事情，我写了[一些变体`ExecuteQuery`](http://groups.google.co.uk/group/microsoft.public.dotnet.languages.csharp/browse_thread/thread/3cf9db4c62e68f7c/9ec9066ca3f897dc)可能会很有用......但就个人而言，我可能会先尝试回避这个问题。

# c++ - C++ 样式约定：类声明中的参数名称

> ID：771492
> 
> 赞同：5
> 
> 时间：2009-04-21T07:46:06.360
> 
> 标签：c++, coding-style, parameters, naming-conventions

我是一个相当新的 C++ 程序员，我想听听支持和反对在类声明中命名参数的论点。

* * *

这是一个例子：

*学生.h*

```
#ifndef STUDENT_H_
#define STUDENT_H_

#include <string>

using namespace std;

class Student
{
    private:
        string name;
        unsigned int age;
        float height, GPA;

    public:
        Student(string, unsigned int, float, float);

        void setAge(unsigned int);
};

#endif /*STUDENT_H_*/ 
```

对比

```
#ifndef STUDENT_H_
#define STUDENT_H_

#include <string>

class Student
{
    private:
        string name;
        unsigned int age;
        float height, GPA;

    public:
        Student(string name, unsigned int age, float height, float GPA);

        void setAge(unsigned int age);
};

#endif /*STUDENT_H_*/ 
```

*学生.cpp*

```
#include "Student.h"

Student::Student(   string name,
            unsigned int age,
            float height,
            float GPA) :

            name(name),
            age(age),
            height(height),
            GPA(GPA) {}

void Student::setAge(unsigned int age) { this -> age = age; } 
```

* * *

我不能决定。一方面，我觉得在声明（*.h*）和定义（*.cpp*）中命名变量是多余的。特别是因为您必须担心更新两个地方的名称以使它们匹配。另一方面，如果没有名称，仅通过查看声明来确定参数对应的变量通常会令人困惑。

所以你的想法是什么？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2009-04-21T07:51:00.607

最好在声明中使用参数名称，并使用好的参数名称。这样，它们就可以用作功能文档。否则，您将不得不在标题中编写额外的注释，并且使用好的参数/变量名称总是比使用注释更好。

例外：当一个函数由于外部原因必须具有某个签名，但参数并未实际使用时。在这种情况下，您也不应该在实现中命名它们。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-04-21T07:49:56.397

将名称放在两个地方，清晰是您在两个地方维护签名的任务所获得的奖励。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-04-21T07:53:24.313

智能感知/自动完成/开发环境中的任何类似内容通常只会看到声明，并且只会将其显示为自动完成。因此，如果您不在声明中声明名称，用户将不会在自动完成中看到它们，除非他们去阅读源代码。这也许是可以忍受的，但不是很方便。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-04-21T07:51:28.640

即使是多余的，我发现最好在两个地方都有参数名称。这通常是因为更改参数名称通常会产生语义后果。在标题中缺少它有助于搞砸文档（我倾向于在其中放置大部分注释，即 API 规范），在实现中缺少它有助于我忘记为什么该特定参数具有如此奇怪的名称。

我放弃参数名称的唯一一次是当我必须实现第三方库回调并且我没有使用其中一个参数时。即使那样我也会这样做：

```
 my_callback(int idx, Context* /*ctx*/)  { ... 
```

这样我就知道签名了。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-04-21T08:09:16.867

如果您曾经将代码发布为带有关联 .h 文件的库，您的用户将永远不会看到定义，只会看到声明，这会给您自己增加额外的文档负担。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-04-21T08:11:11.137

> 一方面，我觉得在声明（.h）和定义（.cpp）中都给变量命名是多余的。特别是因为您必须担心更新两个地方的名称以使它们匹配。

您不需要名称*从字面上*匹配。指定接口的头文件有点像不完美的合同（不完美是因为它不包含前置条件和后置条件，除非你在注释中写下来）和“调用者指南”。在 99% 的情况下，类的调用者会想知道参数*是什么。*至少让他知道发生了什么事。因此，您必须选择一个对调用者有意义的参数名称。这不需要与 cpp 中的名称相同。然而这并不重要，因为我习惯于首先将函数签名从 .h 复制/粘贴到 .cpp 。对我来说，用 C++ 编程意味着这个手册部分。

> 另一方面，如果没有名称，仅通过查看声明来确定参数对应的变量通常会令人困惑。

这就是好手。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2010-10-15T17:30:05.777

我想这取决于您的变量类型的描述性。如果您的方法签名包含用于多种目的的类型，那么它很有用：

```
double calculateTax(int, string); 
```

如果类型是描述性的，那么包括名称是多余的。

```
Money calculateTax(Order, State); 
```

我不想在两个文件中维护名称。

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2009-04-21T07:52:37.640

是的，不需要在 .h 文件中命名参数。头文件应该代表一个接口，因此它不需要包含不需要的细节。

高温高压

# c# - 获取当前系统设置的分数分隔符

> ID：771493
> 
> 赞同：0
> 
> 时间：2009-04-21T07:46:33.457
> 
> 标签：c#, .net, localization, string-formatting

在我的应用程序中，我将 xml（字符串）中的值解析为双精度值。xml 中的值恰好将点作为分数分隔符，而系统采用当前系统设置并且可以具有不同的分隔符（例如，开发系统采用逗号）。

有没有办法告诉 double.TryParse() 点是分数分隔符？
我应该用系统的分数分隔符手动替换点吗？如果是这样，我怎么得到这个？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-21T07:49:38.490

在这种情况下，您应该使用 XmlConvert 类及其成员将 XML 文件中存在的值转换为常规变量。:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-21T07:49:36.507

传入：`CultureInfo.InvariantCulture`_`double.TryParse`

```
double value;
bool success = double.TryParse(text, NumberStyles.Float,
                               CultureInfo.InvariantCulture,
                               out value); 
```

（对于真正标准的 XML 格式，Frederik 建议使用[XmlConvert](http://msdn.microsoft.com/en-us/library/system.xml.xmlconvert.aspx)是最好的主意。）

# iphone - UIWebView 的 cookie 存储在哪里？

> ID：771498
> 
> 赞同：96
> 
> 时间：2009-04-21T07:49:03.950
> 
> 标签：iphone, cookies

我正在用 cookie 构建一个 iPhone 应用程序。在 Safari 设置中删除 cookie 不会删除它们。它们存储在哪里？是否可以从另一个 UIWebView 读取它们？

谢谢！

* * *

## 回答 #1

> 赞同：171
> 
> 时间：2009-04-21T08:08:17.820

`[NSHTTPCookieStorage sharedHTTPCookieStorage]`您的应用程序在容器中有自己的“cookie jar” 。

以下是您可以快速查看应用程序 cookie jar 中的 cookie 的方法：

```
NSHTTPCookie *cookie;
NSHTTPCookieStorage *cookieJar = [NSHTTPCookieStorage sharedHTTPCookieStorage];
for (cookie in [cookieJar cookies]) {
   NSLog(@"%@", cookie);
} 
```

有几种方法可用于过滤和操作。查看访问 cookie 的 NSHTTPCookieStorage 文档，以及[访问](http://developer.apple.com/DOCUMENTATION/Cocoa/Reference/Foundation/Classes/NSHTTPCookieStorage_Class/Reference/Reference.html)单个 cookie 属性的[NSHTTPCookie文档。](http://developer.apple.com/DOCUMENTATION/Cocoa/Reference/Foundation/Classes/NSHTTPCookie_Class/Reference/Reference.html)

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2011-06-01T16:19:30.123

感谢亚历克斯的指点！除此之外，我将放入我使用 Alex 的示例创建的“cookie dumper”。也许这会帮助别人。

```
- (void) dumpCookies:(NSString *)msgOrNil {
NSMutableString *cookieDescs    = [[[NSMutableString alloc] init] autorelease];
NSHTTPCookie *cookie;
NSHTTPCookieStorage *cookieJar = [NSHTTPCookieStorage sharedHTTPCookieStorage];
for (cookie in [cookieJar cookies]) {
    [cookieDescs appendString:[self cookieDescription:cookie]];
}
NSLog(@"------ [Cookie Dump: %@] ---------\n%@", msgOrNil, cookieDescs);
NSLog(@"----------------------------------");
}

- (NSString *) cookieDescription:(NSHTTPCookie *)cookie {

NSMutableString *cDesc      = [[[NSMutableString alloc] init] autorelease];
[cDesc appendString:@"[NSHTTPCookie]\n"];
[cDesc appendFormat:@"  name            = %@\n",            [[cookie name] stringByReplacingPercentEscapesUsingEncoding:NSUTF8StringEncoding]];
[cDesc appendFormat:@"  value           = %@\n",            [[cookie value] stringByReplacingPercentEscapesUsingEncoding:NSUTF8StringEncoding]];
[cDesc appendFormat:@"  domain          = %@\n",            [cookie domain]];
[cDesc appendFormat:@"  path            = %@\n",            [cookie path]];
[cDesc appendFormat:@"  expiresDate     = %@\n",            [cookie expiresDate]];
[cDesc appendFormat:@"  sessionOnly     = %d\n",            [cookie isSessionOnly]];
[cDesc appendFormat:@"  secure          = %d\n",            [cookie isSecure]];
[cDesc appendFormat:@"  comment         = %@\n",            [cookie comment]];
[cDesc appendFormat:@"  commentURL      = %@\n",            [cookie commentURL]];
[cDesc appendFormat:@"  version         = %d\n",            [cookie version]];

//  [cDesc appendFormat:@"  portList        = %@\n",            [cookie portList]];
//  [cDesc appendFormat:@"  properties      = %@\n",            [cookie properties]];

return cDesc;
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-10-04T20:27:56.073

亚历克斯有一个很好的想法，将其归入一个类别。这是我最终使用的：

NSHTTPCookieStorage+Info.h

```
#import <Foundation/Foundation.h>

@interface NSHTTPCookieStorage (Info)

+ (NSDictionary*) describeCookies;
+ (NSDictionary *) describeCookie:(NSHTTPCookie *)cookie;

@end 
```

NSHTTPCookieStorage.m

```
@implementation NSHTTPCookieStorage (Info)

+ (NSDictionary*) describeCookies {
    NSMutableDictionary *descriptions = [NSMutableDictionary new];

    [[[NSHTTPCookieStorage sharedHTTPCookieStorage] cookies] enumerateObjectsUsingBlock:^(NSHTTPCookie* obj, NSUInteger idx, BOOL *stop) {
        [descriptions setObject:[[self class] describeCookie:obj] forKey:[[obj name] stringByReplacingPercentEscapesUsingEncoding:NSUTF8StringEncoding]];
    }];

    NSLog(@"Cookies:\n\n%@", descriptions);
    return descriptions;
}

+ (NSDictionary *) describeCookie:(NSHTTPCookie *)cookie {
    return @{@"value" : [[cookie value] stringByReplacingPercentEscapesUsingEncoding:NSUTF8StringEncoding],
         @"domain" : [cookie domain] ? [cookie domain]  : @"n/a",
         @"path" : [cookie path] ? [cookie path] : @"n/a",
         @"expiresDate" : [cookie expiresDate] ? [cookie expiresDate] : @"n/a",
         @"sessionOnly" : [cookie isSessionOnly] ? @1 : @0,
         @"secure" : [cookie isSecure] ? @1 : @0,
         @"comment" : [cookie comment] ? [cookie comment] : @"n/a",
         @"commentURL" : [cookie commentURL] ? [cookie commentURL] : @"n/a",
         @"version" : @([cookie version]) };

}

@end 
```

使输出更“JSON-y”...

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-09-19T07:41:35.740

在`sandbox:Library->Cookies->Cookies.binarycookies` 但是你不能`.binarycookie`直接打开s，你可以运行一个脚本：

1.  下载并安装 Python

2.  下载[BinaryCookieReader.py](http://securitylearn.net/wp-content/uploads/tools/iOS/BinaryCookieReader.py)

3.  在终端上运行“Python BinaryCookieReader.py”

[![在此处输入图像描述](https://i.stack.imgur.com/VEX4n.png)](https://i.stack.imgur.com/VEX4n.png)

如您所见，输出日志包含详细的 cookie 描述

# iphone - 无法在设备上运行代码

> ID：771499
> 
> 赞同：3
> 
> 时间：2009-04-21T07:49:10.207
> 
> 标签：iphone, code-signing

我有一些我开发的源代码，后来提供给了另一个团队。他们使用他们的证书和配置文件对其进行了签名。

现在我拿回了代码，并在项目属性中为代码签名身份设置了适当的值（使用我的证书和配置文件）。但是当我在设备上运行应用程序时，我收到一个错误，显示其他团队的证书并提示配置文件不存在。

我不知道它在哪里被引用。

有人可以帮忙吗。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-04-21T17:28:23.433

检查目标属性，而不仅仅是项目，因为它可以在那里被覆盖。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-04-23T23:49:35.407

类似的事情刚刚发生在我身上，在我的情况下，“目标”设置仍然设置为以前的开发人员证书，而我的“项目”设置设置为我的新证书。Xcode 报告：

“代码签名错误：身份‘iPhone Developer:’与登录钥匙串中的任何有效证书/私钥对不匹配”

引导的答案对我有用 - 有用于签名的“目标”设置覆盖了“项目”设置，这就是为什么你可能需要重新创建整个项目，如果你只更改了“项目”设置。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2010-03-28T04:08:05.250

将 Active SDK 从 iphone 设备更改为 Iphone 模拟器。这将让您在您的 iphone 模拟器上测试您的代码。如果您计划在您的设备上运行您的应用程序，您需要一个证书。（也许你得到的代码是为设备签名的）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-04-21T08:00:47.277

在菜单下`Project > Edit Project Settings...`单击`Configurations`并选择`All Configurations`。然后向下滚动到`Code Signing`（或在搜索字段中键入）以验证您的配置信息，并`Code Signing Identity`根据需要进行更改。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-04-21T13:34:46.927

连接您的 iPhone，打开管理器，您首先需要删除其他团队的个人资料，然后强制添加您的个人资料（通过拖放或单击 + 按钮）

完成后，从项目信息窗口更改您的代码签名设置，您应该没问题。我遇到了同样的问题，不得不做以上来解决它

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2010-03-31T00:26:15.947

解决人

[http://developer.apple.com/iphone/library/qa/qa2008/qa1618.html](http://developer.apple.com/iphone/library/qa/qa2008/qa1618.html)

# c++ - C++0x 的哪些特性将保持不变（如果有的话）？

> ID：771520
> 
> 赞同：1
> 
> 时间：2009-04-21T07:57:02.277
> 
> 标签：c++, c++11, language-lawyer, language-features

C++0x 中是否有任何已知的特性？就像，也许，标准库中的线程？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-04-21T08:26:34.390

其实没有。在标准发布之前的任何时候，ISO 都可以更改它，因为它受制于投票过程的变幻莫测。

实际上，目前草案中的任何主要功能都将保留（尽管可以进行调整）。他们已经表示他们将错过 2009 年的交付，而且 ISO 与任何国家一样在政治上是一头野兽，所以他们不想错过另一个。

因此，虽然您不会看到元组或线程或其他主要库更改被删除，但可能会有细微的变化，不会对标准的交付产生重大影响（希望供应商及时实施）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-04-21T08:02:05.697

*   新的字符串文字
*   `auto`类型扣除
*   模板类型定义
*   R 值参考

仅举几例和大部分 TR1。

查看[C++0x Wikipedia](http://en.wikipedia.org/wiki/C%2B%2B0x#)文章 - 但最好与您的编译器供应商联系以了解***您可以使用什么***。

# c# - 反射有多慢

> ID：771524
> 
> 赞同：76
> 
> 时间：2009-04-21T08:00:29.087
> 
> 标签：c#, performance, reflection, assemblies

我最近创建了一个接口层来区分 DataAccessProvider 和我们的业务逻辑层。使用这种方法，我们可以随时通过更改 Web/App.Config 中的值来更改对 DataAccessProvider 的选择。（如果需要可以提供更多细节）。

无论如何，要做到这一点，我们使用反射来完成我们可以工作的 DataProvider 类。

```
/// <summary>
/// The constructor will create a new provider with the use of reflection.
/// If the assembly could not be loaded an AssemblyNotFoundException will be thrown.
/// </summary>
public DataAccessProviderFactory()
{
    string providerName = ConfigurationManager.AppSettings["DataProvider"];
    string providerFactoryName = ConfigurationManager.AppSettings["DataProviderFactory"];
    try
    {
        activeProvider = Assembly.Load(providerName);
        activeDataProviderFactory = (IDataProviderFactory)activeProvider.CreateInstance(providerFactoryName);
    }
    catch
    {
        throw new AssemblyNotFoundException();
    }
} 
```

但现在我想知道反射有多慢？

* * *

## 回答 #1

> 赞同：86
> 
> 时间：2009-04-21T08:03:25.180

在大多数情况下：足够快。例如，如果您使用它来创建 DAL 包装器对象，则通过反射创建对象所花费的时间与连接到网络所需的时间相比将是**微不足道的。**所以优化这将是浪费时间。

如果你在一个紧密的循环中使用反射，有一些技巧可以改进它：

*   泛型（使用包装器`where T : new()`和`MakeGenericType`）
*   `Delegate.CreateDelegate`（对于类型化委托；不适用于构造函数）
*   `Reflection.Emit`- 铁杆
*   `Expression`（类似`Delegate.CreateDelegate`，但更灵活，适用于构造函数）

但就您的目的而言，`CreateInstance`完全没问题。坚持下去，让事情变得简单。

* * *

编辑：虽然关于相对性能的观点仍然存在，虽然最重要的事情“衡量它”仍然存在，但我应该澄清上述一些内容。有时……这**确实**很重要。先测量。但是，如果你觉得它*太慢*了，你可能想看看[FastMember](http://nuget.org/packages/FastMember)之类的东西，它`Reflection.Emit`在后台安静地处理所有代码，为你提供一个很好的简单 API；例如：

```
var accessor = TypeAccessor.Create(type);
List<object> results = new List<object>();
foreach(var row in rows) {
    object obj = accessor.CreateNew();
    foreach(var col in cols) {
        accessor[obj, col.Name] = col.Value;
    }
    results.Add(obj);
} 
```

这很简单，但会非常快。在我提到的具体示例中，我提到了一个 DAL 包装器——如果你经常这样做，请考虑类似[dapper](http://nuget.org/packages/dapper)之类的东西，它再次`Reflection.Emit`在后台执行所有代码，为你提供最快但易于使用的 API：

```
int id = 12345;
var orders = connection.Query<Order>(
    "select top 10 * from Orders where CustomerId = @id order by Id desc",
    new { id }).ToList(); 
```

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2009-04-21T08:37:42.227

与非反射代码相比，它的速度较慢。重要的不是它是否缓慢，而是它是否**缓慢**。例如，如果您在 Web 环境中使用反射来实例化对象，而预期的并发性可能会上升到 10K，那么它会很慢。

无论如何，最好不要提前担心性能。如果事情变得很慢，如果你设计得正确，你总是可以加快速度，这样你期望将来可能需要优化的部分就会被本地化。

如果您需要加快速度，可以查看这篇著名的文章：

[动态的……但速度很快：三只猴子、一只狼和 DynamicMethod 和 ILGenerator 类的故事](http://www.codeproject.com/Articles/19513/Dynamic-But-Fast-The-Tale-of-Three-Monkeys-A-Wolf)

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2009-04-21T08:06:49.977

以下是一些可能有帮助的链接：

*   [这家伙做了一些测试并提供了一些指标](https://web.archive.org/web/20201019153235/http://www.manuelabadia.com/blog/PermaLink,guid,772c7152-b00e-4334-b677-bfbdcd8e6b5d.aspx)。这篇文章是 2006 年的，所以我做了一个[Gist 的代码来测试反射性能](https://gist.github.com/rubensteins/0f1cdace9207effb5ec28787644bb38e)。结果是相似的（尽管现在显然要快得多）。

    ```
     Constructor
     Time elapsed (ms): 15 which is 151588 ticks for 1000000 calls.

     Constructor using reflection
     Time elapsed (ms): 38 which is 381821 ticks for 1000000 calls.

     Method call
     Time elapsed (ms): 5 which is 57002 ticks for 1000000 calls.

     Method call using reflection
     Time elapsed (ms): 252 which is 2529507 ticks for 1000000 calls.

     Setting properties
     Time elapsed (ms): 294 which is 2949458 ticks for 1000000 calls.

     Setting properties using reflection
     Time elapsed (ms): 1490 which is 14908530 ticks for 1000000 calls. 
    ```

*   [MSDN 文章“避开常见的性能陷阱以打造快速的应用程序”](http://msdn.microsoft.com/nl-nl/magazine/cc163759(en-us).aspx)

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2016-02-02T22:59:18.253

我想我会做一个快速测试来证明反射与没有反射相比有多慢。

**有反射**

*   通过迭代每个属性并匹配来实例化 58 个对象
*   总时间：**52254 纳秒**

    ```
    while (reader.Read()) {
        string[] columns = reader.CurrentRecord;
        CdsRawPayfileEntry toAdd = new CdsRawPayfileEntry();
        IEnumerable<PropertyInfo> rawPayFileAttributes = typeof(CdsRawPayfileEntry).GetProperties().Where(prop => Attribute.IsDefined(prop, typeof(CustomIndexAttribute)));
        foreach (var property in rawPayFileAttributes) {
            int propertyIndex = ((CustomIndexAttribute)property.GetCustomAttribute(typeof(CustomIndexAttribute))).Index;
            if (propertyIndex < columns.Length)
                property.SetValue(toReturn, columns[propertyIndex]);
            else
                break;
        }
    } 
    ```

**没有反射**

*   通过创建一个新对象来实例化 58 个对象
*   总时间：**868 纳秒**

    ```
     while (reader2.Read()) {
            string[] columns = reader2.CurrentRecord;
            CdsRawPayfileEntry toAdd = new CdsRawPayfileEntry() {
                ColumnZero = columns[0],
                ColumnOne = columns[1],
                ColumnTwo = columns[2],
                ColumnThree = columns[3],
                ColumnFour = columns[4],
                ColumnFive = columns[5],
                ColumnSix = columns[6],
                ColumnSeven = columns[7],
                ColumnEight = columns[8],
                ColumnNine = columns[9],
                ColumnTen = columns[10],
                ColumnEleven = columns[11],
                ColumnTwelve = columns[12],
                ColumnThirteen = columns[13],
                ColumnFourteen = columns[14],
                ColumnFifteen = columns[15],
                ColumnSixteen = columns[16],
                ColumnSeventeen = columns[17]
            };
        } 
    ```

尽管这并不完全公平，因为反射还必须在通过反射创建新对象的基础上检索每个属性的特定属性 58*18 次，但它至少提供了一些视角。

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2009-04-21T08:36:58.500

反射并没有那么慢。通过反射调用方法比普通方法慢大约 3 倍。如果您只执行一次或在非关键情况下执行此操作，那没问题。如果您在时间紧迫的方法中使用它 10'000 次，我会考虑更改实现。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2009-04-21T08:19:42.253

除了遵循其他答案中给出的链接并确保您没有编写“病态糟糕”的代码之外，对我来说，最好的答案是自己测试它。

只有您知道瓶颈在哪里，您的反射代码将被用户使用多少次，反射代码是否会处于紧密循环中等。您知道您的业务案例，有多少用户将访问您的站点，性能要求是什么。

但是，鉴于您在此处显示的代码片段，我的猜测是反射的开销不会成为一个大问题。

VS.NET Web 测试和性能测试功能应该使测量此代码的性能变得非常简单。

如果你不使用反射，你的代码会是什么样子？它会有什么限制？如果您删除反射代码，您可能无法忍受自己发现的限制。可能值得尝试在没有反射的情况下设计此代码，以查看它是否可能或替代方案是否可取。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-04-24T20:42:43.633

在我开始玩 IoC 之前，我一直在做类似的事情。我会使用 Spring 对象定义来指定数据提供者 - SQL、XML 或 Mocks！

# database - 如何连接到服务器上的数据库以获得 Asp.Net 成员资格？

> ID：771525
> 
> 赞同：1
> 
> 时间：2009-04-21T08:00:32.050
> 
> 标签：database, asp.net-membership, connection-string

我刚刚使用“生成脚本”将我的 ASPNETDB.mdf 上传到服务器。问题是，我不知道如何为我的会员资格连接到它。（例如登录控件） ConnectionString 在哪里？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-21T21:33:44.763

更新 Web 配置中的数据源标签

```
Provider=Microsoft.ACE.OLEDB.12.0;Data Source=<<PATH Goes Here>>;Persist Security Info=False; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-21T08:06:09.807

连接字符串位于 web.config 文件中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-21T21:29:59.233

修改应用程序的 web.config 文件以重新定义 LocalSqlServer 连接字符串以指向数据库。

```
<connectionStrings>
  <remove name="LocalSqlServer"/>
  <add name="LocalSqlServer"
       connectionString="server=.;database=aspnetdb;
       integrated security=sspi;"/>   
</connectionStrings> 
```

如果您的成员资格提供程序未指向“LocalSqlServer”，那么您也可以在 web.config 中对其进行修改。

```
<membership>
  <providers>
    <remove name="AspNetSqlMembershipProvider"/>
    <add name="AspNetSqlMembershipProvider"
      type="System.Web.Security.SqlMembershipProvider, ..."
      connectionStringName="LocalSqlServer"
      enablePasswordRetrieval="false"
      enablePasswordReset="true"
      requiresQuestionAndAnswer="true"
      applicationName="/"
      requiresUniqueEmail="false"
      passwordFormat="Hashed"
      maxInvalidPasswordAttempts="5"
      minRequiredPasswordLength="7"
      minRequiredNonalphanumericCharacters="1"
      passwordAttemptWindow="10"
      passwordStrengthRegularExpression=""
    />
  </providers>
</membership> 
```

# c# - 如何将 WCF 用户名 clientCredentialType 传递给其他服务？

> ID：771535
> 
> 赞同：1
> 
> 时间：2009-04-21T08:03:52.573
> 
> 标签：c#, wcf, web-services, security

我在同一主机上的 IIS6 中托管了多个 WCF 服务（不应影响此问题），出于性能/维护和其他原因，我希望使用 Facade Service 将多个请求合并为 1 个请求，所有这些都通过特殊的服务合同 /具有为多个操作调用其他服务的操作的服务。

我正在使用带有消息安全性和用户名客户端凭据类型的 WSHTTP（可能在不久的将来会是 BasicHttp）。

我希望 Facade Service 使用来自客户端的凭据。这意味着对后端服务的调用将获得凭据，就好像客户端会直接调用它一样。

例如：客户端使用用户名“A”和密码“B”调用 FacadeService.CompositeOperation。现在 FacadeService.CompositeOperation 需要调用 BackEndService.BackendOperation，将 Credentials.UserName.UserName 设置为“A”，将 Credentials.UserName.Password 设置为“B”，就像客户端调用此操作时所做的一样。我无法在 WCF 中提取此信息（应该是，因为它是敏感信息），但我没有找到一种方法来获取这些信息的“令牌”并将其转发给后端服务（我不需要在 FacadeService 中知道这些信息，只是将它们传递过来）。

在 FacadeService 中，与在 BackEndService 中一样，身份验证是通过 ASP.NET 提供程序进行的，授权是从 PrimaryIdentity 获取 UserName 的自定义基于角色的授权，因此 BackEndService 上的 PrimaryIdentity 应该设置为客户端发送的内容。

我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-04-22T12:58:00.830

I read your post yesterday but wasn't sure of an answer, but seeing as you've had no replies i thought i'd add something and maybe provide some food for thought.

*   Firstly, would making the additonal service calls be overly intensive on resources? If not, there is an argument for code clarity, to seperate them out so in the future developers will know exactly what's happening rather than 1 service call performing multiple operations.

*   Are you not able to make calls to other services from your server side code from within the method you're hitting? As once, you're server side, the security context should hold the identity of the user that you're after so calls to other services would use the same identity.

*   Finally, I was wondering whether WCF Impersonation ([MSDN LINK](http://msdn.microsoft.com/en-us/library/ms730088.aspx)) might be something you can use on the server to achieve what you're after. I've not used it myself so can't advise as much as i'd like.

Hope that's of some help - good luck!

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2010-03-16T11:48:36.473

一旦我尝试将密码与用户名一起存储在 PrimaryIdentity 中。为了实现这一点，我们需要做的是提供一个新的 UserNameSecurityTokenAuthenticator，它将对 UserName 和 Password 进行身份验证，然后可以存储在 Identity 中，然后它将 Identity 存储在 WCF 的 SecurityContext 中。

要做的步骤

课程

1.) 测试服务主机：服务主机

2.) UserNamePasswordSecurityTokenManager : ServiceCredentialsSecurityTokenManager

3.) TestUserNameSecurityTokenAuthenticator : UserNameSecurityTokenAuthenticator

4.）我的身份：IIdentity

5.) MyAuthorizatoinPolicy : IAuthorizationPolicy

1.) 创建新的 ServiceHost 类 TestServiceHost

2.) 在 TestServiceHost 中重写 OnOpening 并提供一个新的类 UserNamePasswordServiceCredentials

```
protected override void OnOpening()
{
    base.OnOpening();
    this.Description.Behaviors.Add(new UserNamePasswordServiceCredentials());
} 
```

3.) 然后在 UserNamePasswordServiceCredentials 中，提供新的 UserNamePasswordSecurityTokenManager

```
public override SecurityTokenManager CreateSecurityTokenManager()
{
    return new UserNamePasswordSecurityTokenManager(this);
} 
```

4.) 然后在 UserNamePasswordSecurityTokenManager 中提供新的 TestUserNameSecurityTokenAuthenticator

```
public override SecurityTokenAuthenticator CreateSecurityTokenAuthenticator(SecurityTokenRequirement tokenRequirement, out SecurityTokenResolver outOfBandTokenResolver)
        {
            if (tokenRequirement.TokenType == SecurityTokenTypes.UserName)
            {
                outOfBandTokenResolver = null;
                return new TestUserNameSecurityTokenAuthenticator();
            }
            return base.CreateSecurityTokenAuthenticator(tokenRequirement, out outOfBandTokenResolver);
        } 
```

5.) 然后在 TestUserNameSecurityTokenAuthenticator 内部，您可以验证用户名和密码，并可以创建自己的身份。在此函数中，您将返回要评估的 IAuthorization 策略列表。我创建了自己的授权策略并将我的新身份传递给它，以便在上下文中设置身份。

```
protected override System.Collections.ObjectModel.ReadOnlyCollection<System.IdentityModel.Policy.IAuthorizationPolicy> ValidateUserNamePasswordCore(string userName, string password)
        {           
            ClaimSet claimSet = new DefaultClaimSet(ClaimSet.System, new Claim(ClaimTypes.Name, userName, Rights.PossessProperty));
            List<IIdentity> identities = new List<IIdentity>(1);
            identities.Add(new MyIdentity(userName,password));
            List<IAuthorizationPolicy> policies = new List<IAuthorizationPolicy>(1);
            policies.Add(new MyAuthorizationPolicy(ClaimSet.System, identities));
            return policies.AsReadOnly();
        }

public class MyAuthorizationPolicy : IAuthorizationPolicy
    {
        String id = Guid.NewGuid().ToString();
        ClaimSet issuer;
        private IList<IIdentity> identities;
        #region IAuthorizationPolicy Members

        public MyAuthorizationPolicy(ClaimSet issuer, IList<IIdentity> identities)
        {
            if (issuer == null)
                throw new ArgumentNullException("issuer");
            this.issuer = issuer;
            this.identities = identities;

        }

        public bool Evaluate(EvaluationContext evaluationContext, ref object state)
        {
            if (this.identities != null)
            {
                object value;
                IList<IIdentity> contextIdentities;
                if (!evaluationContext.Properties.TryGetValue("Identities", out value))
                {
                    contextIdentities = new List<IIdentity>(this.identities.Count);
                    evaluationContext.Properties.Add("Identities", contextIdentities);
                }
                else
                {
                    contextIdentities = value as IList<IIdentity>;
                }
                foreach (IIdentity identity in this.identities)
                {
                    contextIdentities.Add(identity);
                }
            }
            return true;
        }

        public ClaimSet Issuer
        {
            get { return this.issuer; }
        }

        #endregion

        #region IAuthorizationComponent Members

        public string Id
        {
            get { return this.id; }
        }

        #endregion
    } 
```

因此，此示例显示了如何在 WCF 中覆盖安全性：

现在在你的问题中：

1.) 实施此技术并以您的身份设置用户名和密码。现在，当您调用子服务时，请从中获取身份提取用户名和密码并传递给子服务。

2.) 验证用户名和密码并为其生成一个令牌（应该为此创建一个新的令牌服务）。将此令牌与用户名一起保存在您的身份中，并将这两个传递给您的子服务。现在要使这种方法起作用，子服务必须验证您新生成的令牌，您应该有一个令牌服务，它可以通过验证用户名和密码来创建令牌，并且还可以验证令牌和用户名。

我个人会选择方法 2，但它会引入新的开销。

# java - 为什么 SerialEvent.RI 不起作用？

> ID：771538
> 
> 赞同：1
> 
> 时间：2009-04-21T08:05:40.587
> 
> 标签：java, events, modem, rxtx, usbserial

我有两台计算机运行此代码：

```
import java.io.*;
import java.util.*;
import gnu.io.*;

public class Deb implements SerialPortEventListener, Runnable{

    public static final int TIMEOUTSECONDS = 30;
    public static final int BAUD = 9600;

    static String telefono;
    static Boolean llamar = false;

    CommPortIdentifier cpiModem = null;
    SerialPort modem;

    BufferedReader is;
    PrintStream os;

    Thread hiloMarcado;

    int nConnects = 0;

    boolean flag = false;
    String line;

    public static void main(String argv[]) throws PortInUseException, UnsupportedCommOperationException, IOException, InterruptedException, TooManyListenersException {

        if (argv.length>0) {
            telefono = argv[0];
            llamar = true;
        }
        new Deb();      
    }

    public Deb() throws PortInUseException, UnsupportedCommOperationException, IOException, InterruptedException, TooManyListenersException{        

        Enumeration pList = CommPortIdentifier.getPortIdentifiers();
        while (pList.hasMoreElements()) {

            CommPortIdentifier cpi = (CommPortIdentifier)pList.nextElement();

            if (cpi.getPortType()==CommPortIdentifier.PORT_SERIAL) {

                SerialPort puertoSerie = (SerialPort) cpi.open("DEB", TIMEOUTSECONDS * 1000);
                puertoSerie.setSerialPortParams(BAUD, SerialPort.DATABITS_8, SerialPort.STOPBITS_1, SerialPort.PARITY_NONE);
                puertoSerie.setFlowControlMode(SerialPort.FLOWCONTROL_RTSCTS_IN & SerialPort.FLOWCONTROL_RTSCTS_OUT);

                BufferedReader is = new BufferedReader(new InputStreamReader(puertoSerie.getInputStream()));
                PrintStream os = new PrintStream(puertoSerie.getOutputStream(), true);

                os.println("AT");
                Thread.sleep(TIMEOUTSECONDS * 50);
                if (!is.ready()) {
                    System.out.println("No hay un modem en " + cpi.getName());
                } else {
                    System.out.println("Hay un modem en " + cpi.getName());
                    cpiModem = cpi;
                }           
                puertoSerie.close();
            }           
        }

        modem = (SerialPort) cpiModem.open("DEBita", TIMEOUTSECONDS * 1000);
        modem.setSerialPortParams(BAUD, SerialPort.DATABITS_8, SerialPort.STOPBITS_1, SerialPort.PARITY_NONE);
        modem.setFlowControlMode(SerialPort.FLOWCONTROL_RTSCTS_IN & SerialPort.FLOWCONTROL_RTSCTS_OUT);

        is = new BufferedReader(new InputStreamReader(modem.getInputStream()));
        os = new PrintStream(modem.getOutputStream(), true);        

        modem.addEventListener(this);

        modem.notifyOnDataAvailable(true);
        modem.notifyOnCarrierDetect(true);
        modem.notifyOnBreakInterrupt(true);
        modem.notifyOnCTS(true);
        modem.notifyOnDSR(true);
        modem.notifyOnFramingError(true);
        modem.notifyOnOutputEmpty(true);
        modem.notifyOnOverrunError(true);
        modem.notifyOnParityError(true);
        modem.notifyOnRingIndicator(true);

        /*System.out.println(is.read());*/  

        if (llamar) {           
            hiloMarcado = new Thread(this);
            hiloMarcado.start();
        }

    }

    public void serialEvent(SerialPortEvent event) {
        switch (event.getEventType()) {
        case SerialPortEvent.OE:
        case SerialPortEvent.FE:
        case SerialPortEvent.PE:
        case SerialPortEvent.DSR:
            System.out.println("Data Set Ready.");
            break;
        case SerialPortEvent.OUTPUT_BUFFER_EMPTY:
            System.out.println("Ignored event");
            break;

        case SerialPortEvent.BI:
            System.out.println("Break Interrupt");
            break;

        case SerialPortEvent.CTS:
            System.out.println("Clear to send");
            break;

        case SerialPortEvent.RI:
            System.out.println("Pick up the receiver.");
            if( event.getNewValue() ) 
            {
                System.out.println("Ring Indicator On");
            }
            else 
            {
                System.out.println("Ring Indicator Off");
            }
            break;

        case SerialPortEvent.CD:
            if (event.getNewValue()) {
                System.out.println("Connected");
                nConnects = nConnects + 1;          
            } else {
                System.out.println("Disconnected");
            }
            break;

        case SerialPortEvent.DATA_AVAILABLE:    
            handleData();
            break;
        }
    }

    public void run() {
        while (true) {
            if (nConnects == 0) {
                try {
                    if (!modem.isCD()) {                        
                        System.err.println("Estamos llamando  ...");
                        os.println("ATDT" + telefono);
                    }
                    Thread.sleep(TIMEOUTSECONDS * 2000);

                } catch (Exception ex) {
                    System.err.println("Failed to write message");
                }
            }
        }
    }

    public void handleData() {
        try {
            int avail = modem.getInputStream().available();
            byte[] response = new byte[avail];
            StringBuffer strbuf = new StringBuffer();
            modem.getInputStream().read(response, 0, avail);

             if (!flag) {
                 modem.getInputStream().read(response, 0, avail);
                 for (int i = 0; i < avail; i++) {
                     Thread.sleep(5);
                     os.write((char) response[i]);
                     System.out.print((char) response[i]);
                 }
             }
        } catch (IOException ie1) {
            System.out.println("File " + ie1);
        } catch (InterruptedException in) {
            System.out.println("Interrupt " + in);
        }

    }

} 
```

这不是最终版本，我只是看看它是如何工作的。问题是，当我使用此代码拨打电话号码时，例如我的手机，它可以工作，但反过来就不行；也就是说，从我的号码呼叫并将程序作为听众。我也试过两台电脑，他们都没有接到另一端的电话。难道我做错了什么？我将不胜感激任何帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-20T06:37:13.363

AT 兼容的调制解调器应通过数据线发送“RING”以通知您传入的振铃事件。也许你可以听听？

# macos - 在 Mac OS X 桌面上选择一个区域

> ID：771542
> 
> 赞同：0
> 
> 时间：2009-04-21T08:06:48.557
> 
> 标签：macos, screen-grab

如果您在 Mac OS X 中按 cmd+shift+4，您可以选择屏幕上显示相应坐标的区域。我需要在我的一个应用程序中实现这样的功能，但不知道该怎么做。有人可以给我一些建议吗？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-21T08:55:21.980

此代码片段将返回一个 CGImageRef，其中包含给定矩形在桌面上显示的所有内容。它需要 ApplicationServices 框架。屏幕坐标被翻转，原点在屏幕的左上角。在这种情况下，图像 ref 将由调用者拥有，并且需要`CGImageRelease`在调用者完成后释放。

```
#import <ApplicationServices/ApplicationServices.h>

CGImageRef createScreenCapture(CGRect rect) {
  CGImageRef image = CGWindowCreateImage(
                       rect,
                       kCGWindowListOptionOnScreenOnly,
                       0,
                       kCGWindowImageDefault);
  return image;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-21T19:58:57.067

通常这是通过覆盖整个桌面空间的半透明覆盖窗口来完成的。

Apple 有一些[较旧的示例代码](http://developer.apple.com/samplecode/FunkyOverlayWindow/)，应该可以让您开始。

# jquery - MVC 中 JQuery 和 ASP.NET AJAX 的区别

> ID：771557
> 
> 赞同：2
> 
> 时间：2009-04-21T08:12:11.180
> 
> 标签：jquery, asp.net-mvc, asp.net-ajax

查看新的 ASP.NET MVC 框架，它带有用于 ASP.NET AJAX 和 JQuery 的 javascript 文件。

有人能解释一下 ASP.NET AJAX 给了我什么，而 JQuery 没有吗？

我需要同时使用两者吗？你能给我一些我会/不需要同时使用的例子吗？

我在很多非 ASP.NET 项目（PHP 和原型网站）上使用过 JQuery，并且非常愉快地使用了 JQuery Ajax，但我不确定什么最适合 ASP.NET。

谢谢你的时间嗅探器

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-21T08:24:52.210

我最近一直在编写没有 Microsoft AJAX 的 ASP.NET MVC 页面。结论？你需要做更多的连接才能让它工作，特别是服务器端通信（提示：使用 JSON.NET，而不是内置的东西），但它更短且更具可读性。我不会再使用 Microsoft AJAX。

ASP.NET AJAX 为您提供：

1.  一堆提供 AJAX 功能的 ASP.NET 控件。这些用起来很痛苦，写起来更痛苦。jQuery 扩展更加简洁，但是对于 ASP.NET 程序员来说学习曲线更加陡峭。
2.  自动生成执行 AJAX 调用的类的能力。这真的很酷，但你可以没有它。
3.  命名空间和事件模型，如果您编写 jQuery 样式，则不需要它。
4.  对页面进行部分渲染的能力。仅当您不使用 MVC 时才有用，即使在那时也很少建议使用。

结论：使用jQuery，去掉Microsoft AJAX。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-22T13:57:27.753

那么意见分歧（！），但感谢您的反馈。

有关信息，我发现这个线程更清楚地回答了我的问题。

[ASP.NET MVC 中的 jQuery 与 MicrosoftAjax](https://stackoverflow.com/questions/492770/jquery-vs-microsoftajax-in-asp-net-mvc)

我想我将只使用 jQuery 来获得舒适性、更易于阅读的代码、小文件大小等，看看我是怎么做的。

再次感谢嗅探器

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-11-30T09:26:21.653

Asp.Net AJAX 是为 Asp.Net WebForms 而设计的，而不是 MVC。它被设计用来做许多 jQuery 已经做过的事情。在 MS 同意将 jQuery 与 Asp.Net MVC 捆绑是一个好主意之前，他们只有 Asp.Net AJAX。

Asp.Net AJAX 尝试在客户端浏览器中复制服务器端环境的一部分——您可以使用类似 MS 的 JS 命名空间看到这一点。当一切都基于回发模型时，它是为 WebForms 设计的。

MVC 范式试图通过诚实地说明 HTTP 的工作原理来解耦和简化 Web 开发的各个方面。Asp.Net AJAX 并不真正适合这个领域，因为它与 WebForms 设计得非常紧密。以同样的方式，你可以~~黑客~~让 WebForms 控件在 MVC 中工作（因为它仍然构建在 ASP.NET 核心上）你也可以让 Asp.Net AJAX 在 MVC 中工作 - 但真正的重点是：

jQuery 和 MVC（根据设计和定义）是相互适用的。

（希望我的回答不是太主观：D）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-11-30T09:06:10.273

我使用 JQuery 检索 Json 数据，使用 Microsoft AJAX 发布表单。你可以用 JQuery 做这两个，但我真的不喜欢自己序列化表单。归根结底，Microsoft AJAX 相当不错 - 如果您需要自己编写更少的 JavaScript 代码，那么您需要维护的代码就更少了。

所以回答你的问题 - Microsoft AJAX 并没有真正添加 JQuery 没有的任何东西。它只是允许您使用帮助程序，这些帮助程序被翻译成几乎与您可以使用 JQuery 编写的 JavaScript 代码相同的 JavaScript 代码。就像我说的 - 你自己编写的 JavaScript 代码越少，你需要维护的代码就越少。

没有真实的例子说明你应该或不应该使用其中一个或另一个 - 这归结为个人喜好 IMO。

# django - 如何在 Django 表单的多个列中组织复选框

> ID：771559
> 
> 赞同：1
> 
> 时间：2009-04-21T08:12:18.560
> 
> 标签：django, django-forms

我是 Django 和一般网络开发的新手，所以请耐心等待一个非常愚蠢的问题:)

我有一个从模型生成的表单，在这个表单中我有大约 20 个复选框。现在它们排列在一长列中，从 UI 的角度来看它看起来不是很好。我希望将此列拆分为多个列，但仍然可以从模型中自动生成此表单。你会建议我做什么？

在生成的 HTML 中，单个复选框如下所示：

```
<li><label for="id_boxes_0"><input type="checkbox" name="boxes" value="1" id="id_boxes_0" /> some name</label></li> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-21T15:46:06.720

您不需要更改 Python 代码中的任何内容，但您需要在模板中布局表单，而不是使用 {{ form.as_ul }}。您可以遍历表单以获取字段。对于最简单的可能方法，如下所示可以将 20 个字段放在两列中，每列 10 个：

```
{% for field in form %}
  {% ifequal forloop.counter 11 %}</ul><ul>{% endifequal %}
  <li>{{ field }}</li>
{% endfor %} 
```

就我个人而言，我从不在实际代码中使用 as_* 辅助方法，就我而言，它们仅对粗略的原型设计有用。

# .net - 如何以编程方式配置 WCF 已知类型？

> ID：771560
> 
> 赞同：53
> 
> 时间：2009-04-21T08:12:41.287
> 
> 标签：.net, wcf, wcf-configuration, known-types

我的客户端/服务器应用程序使用 WCF 进行通信，这非常棒。然而，当前架构的一个缺点是我必须对某些传输类型使用已知类型配置。我使用的是内部 Pub/Sub 机制，这个要求是不可避免的。

问题是很容易忘记添加已知类型，如果你这样做了，WCF 会默默地失败，几乎没有关于出错的线索。

在我的应用程序中，我知道要发送的类型集。我想以编程方式执行配置，而不是通过`App.config`当前包含以下内容的文件以声明方式执行配置：

```
<system.runtime.serialization>
  <dataContractSerializer>
    <declaredTypes>
      <add type="MyProject.MyParent, MyProjectAssembly">
        <knownType type="MyProject.MyChild1, MyProjectAssembly"/>
        <knownType type="MyProject.MyChild2, MyProjectAssembly"/>
        <knownType type="MyProject.MyChild3, MyProjectAssembly"/>
        <knownType type="MyProject.MyChild4, MyProjectAssembly"/>
        <knownType type="MyProject.MyChild5, MyProjectAssembly"/>
      </add>
    </declaredTypes>
  </dataContractSerializer>
</system.runtime.serialization> 
```

相反，我想做这样的事情：

```
foreach (Type type in _transmittedTypes)
{
    // How would I write this method?
    AddKnownType(typeof(MyParent), type);
} 
```

有人可以解释一下我该怎么做吗？

**编辑**请理解，我试图在运行时动态设置已知类型，而不是在配置中以声明方式或在源代码中使用属性。

这基本上是关于 WCF API 的问题，而不是样式问题。

**编辑 2** [这个 MSDN 页面](http://msdn.microsoft.com/en-us/library/ms730167.aspx)页面状态：

> 您还可以将类型添加到通过 DataContractSerializer 的 KnownTypes 属性访问的 ReadOnlyCollection。

不幸的是，这就是它所说的全部，并且鉴于 KnownTypes 是一个只读属性，并且该属性的值是 a ，它并没有多大意义`ReadOnlyCollection`。

* * *

## 回答 #1

> 赞同：71
> 
> 时间：2009-04-21T08:25:07.997

添加[`[ServiceKnownType]`](http://msdn.microsoft.com/en-us/library/system.servicemodel.serviceknowntypeattribute.aspx)到您的`[ServiceContract]`界面：

```
[ServiceKnownType("GetKnownTypes", typeof(KnownTypesProvider))] 
```

然后创建一个名为`KnownTypesProvider`：

```
internal static class KnownTypesProvider
{
    public static IEnumerable<Type> GetKnownTypes(ICustomAttributeProvider provider)
    {
         // collect and pass back the list of known types
    }
} 
```

然后你可以传回你需要的任何类型。

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2010-01-20T19:57:55.553

还有另外两种方法可以解决您的问题：

一、使用 KnownTypeAttribute(string)：

```
[DataContract]
[KnownType("GetKnownTypes")]
public abstract class MyParent
{
    static IEnumerable<Type> GetKnownTypes()
    {
        return new Type[] { typeof(MyChild1), typeof(MyChild2), typeof(MyChild3) };
    }
} 
```

二、使用构造函数 DataContractSerializer

```
[AttributeUsage(AttributeTargets.Method | AttributeTargets.Class | 
                AttributeTargets.Interface)]
public class MyHierarchyKnownTypeAttribute : Attribute, IOperationBehavior, IServiceBehavior, IContractBehavior
{
    private void IOperationBehavior.AddBindingParameters(
            OperationDescription description, 
            BindingParameterCollection parameters)
    {
    }

    void IOperationBehavior.ApplyClientBehavior(
            OperationDescription description, 
            ClientOperation proxy)
    {
        ReplaceDataContractSerializerOperationBehavior(description);
    }

    private void IOperationBehavior.ApplyDispatchBehavior(
            OperationDescription description, 
            DispatchOperation dispatch)
    {
        ReplaceDataContractSerializerOperationBehavior(description);
    }

    private void IOperationBehavior.Validate(OperationDescription description)
    {
    }

    private void IServiceBehavior.AddBindingParameters(
          ServiceDescription serviceDescription,
          ServiceHostBase serviceHostBase,
          System.Collections.ObjectModel.Collection<ServiceEndpoint> endpoints,
          BindingParameterCollection bindingParameters)
    {
        ReplaceDataContractSerializerOperationBehavior(serviceDescription);
    }

    private void IServiceBehavior.ApplyDispatchBehavior(
            ServiceDescription serviceDescription, 
            ServiceHostBase serviceHostBase)
    {
        ReplaceDataContractSerializerOperationBehavior(serviceDescription);
    }

    private void IServiceBehavior.Validate(ServiceDescription serviceDescription,
            ServiceHostBase serviceHostBase)
    {
    }

    private void IContractBehavior.AddBindingParameters(
            ContractDescription contractDescription,
            ServiceEndpoint endpoint, 
            BindingParameterCollection bindingParameters)
    {
    }

    private void IContractBehavior.ApplyClientBehavior(
            ContractDescription contractDescription,
            ServiceEndpoint endpoint, ClientRuntime clientRuntime)
    {
        ReplaceDataContractSerializerOperationBehavior(contractDescription);
    }

    private void IContractBehavior.ApplyDispatchBehavior(
            ContractDescription contractDescription,
            ServiceEndpoint endpoint, DispatchRuntime dispatchRuntime)
    {
        ReplaceDataContractSerializerOperationBehavior(contractDescription);
    }

    private void IContractBehavior.Validate(ContractDescription contractDescription,
            ServiceEndpoint endpoint)
    {
    }    

    private static void ReplaceDataContractSerializerOperationBehavior(
            ServiceDescription description)
    {
        foreach (var endpoint in description.Endpoints)
        {
            ReplaceDataContractSerializerOperationBehavior(endpoint);
        }
    }

    private static void ReplaceDataContractSerializerOperationBehavior(
            ContractDescription description)
    {
        foreach (var operation in description.Operations)
        {
            ReplaceDataContractSerializerOperationBehavior(operation);
        }
    }

    private static void ReplaceDataContractSerializerOperationBehavior(
            ServiceEndpoint endpoint)
    {
        // ignore mex
        if (endpoint.Contract.ContractType == typeof(IMetadataExchange))
        {
            return;
        }
        ReplaceDataContractSerializerOperationBehavior(endpoint.Contract);
    }

    private static void ReplaceDataContractSerializerOperationBehavior(
            OperationDescription description)
    {
        var behavior = 
         description.Behaviors.Find<DataContractSerializerOperationBehavior>();
        if (behavior != null)
        {
            description.Behaviors.Remove(behavior);
            description.Behaviors.Add(
                new ShapeDataContractSerializerOperationBehavior(description));
        }
    }

    public class ShapeDataContractSerializerOperationBehavior 
            : DataContractSerializerOperationBehavior
    {
        public ShapeDataContractSerializerOperationBehavior(
                OperationDescription description)
            : base(description) { }

        public override XmlObjectSerializer CreateSerializer(Type type, 
                string name, string ns, IList<Type> knownTypes)
        {
            var shapeKnownTypes = 
                new List<Type> { typeof(Circle), typeof(Square) };
            return new DataContractSerializer(type, name, ns, shapeKnownTypes);
        }

        public override XmlObjectSerializer CreateSerializer(Type type, 
                XmlDictionaryString name, XmlDictionaryString ns, 
                IList<Type> knownTypes)
        {
            //All magic here!
            var knownTypes = 
                new List<Type> { typeof(MyChild1), typeof(MyChild2), typeof(MyChild3) };
            return new DataContractSerializer(type, name, ns, knownTypes);
        }
    }
}

[ServiceContract()]
[MyHierarchyKnownTypeAttribute]
public interface IService {...} 
```

注意：您必须在双方都使用此属性：客户端和服务端！

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2011-01-28T15:52:37.930

我需要这样做以允许继承正常工作。我不想维护派生类型的列表。

```
 [KnownType("GetKnownTypes")]
 public abstract class BaseOperationResponse
 {

    public static Type[] GetKnownTypes()
    {
        Type thisType = System.Reflection.MethodBase.GetCurrentMethod().DeclaringType;
        return thisType.Assembly.GetTypes().Where(t => t.IsSubclassOf(thisType)).ToArray();
    } 
```

我知道函数的第一行是多余的，但这只是意味着我可以将它粘贴到任何基类中而无需修改。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2010-12-17T00:22:43.013

网页.Config

```
<applicationSettings>
<HostProcess.Properties.Settings>
<setting name="KnowTypes" serializeAs="Xml">
<value>
 <ArrayOfString xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xmlns:xsd="http://www.w3.org/2001/XMLSchema">
   <string>a.AOrder,a</string>
   <string>b.BOrder,b</string>
   <string>c.COrder,c</string>
 </ArrayOfString>
</value>
</setting>
</HostProcess.Properties.Settings> 
```

```
static class Helper
{
    public static IEnumerable<Type> GetKnownTypes(ICustomAttributeProvider provider)
    {
        System.Collections.Generic.List<System.Type> knownTypes =
        new System.Collections.Generic.List<System.Type>();
        // Add any types to include here.
        Properties.Settings.Default.KnowTypes.Cast<string>().ToList().ForEach(type =>
            {
                knownTypes.Add(Type.GetType(type));
            });

        return knownTypes;
    }
}

[ServiceContract]
[ServiceKnownType("GetKnownTypes", typeof(Helper))]
public interface IOrderProcessor
{
    [OperationContract]
    string ProcessOrder(Order order);
} 
```

* * *

Order 是抽象基类

* * *

```
[DataContract]
public abstract class Order
{
    public Order()
    {
        OrderDate = DateTime.Now;
    }
    [DataMember]
    public string OrderID { get; set; }
    [DataMember]
    public DateTime OrderDate { get; set; }
    [DataMember]
    public string FirstName { get; set; }
    [DataMember]
    public string LastName { get; set; }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-11-04T15:08:42.157

有点矫枉过正，但有效并且是一种未来的证明

```
var knownTypes =
    AppDomain.CurrentDomain
    .GetAssemblies()
    .Where(a =>
    {
        var companyAttribute = a.GetCustomAttribute<AssemblyCompanyAttribute>();
        if (companyAttribute == null) return false;
        return companyAttribute.Company.ToLower().Contains("[YOUR COMPANY NAME]");
    })
    .SelectMany(a => a.GetTypes()).Where(t => t.IsSerializable && !t.IsGenericTypeDefinition);

var serializer = new DataContractSerializer(type, knownTypes); 
```

# c# - 如何在目录中创建子目录

> ID：771564
> 
> 赞同：3
> 
> 时间：2009-04-21T08:14:10.693
> 
> 标签：c#, directory

换句话说，我有一个临时文件夹，用于存储我提取的文件。如何在该临时文件夹中创建一个文件夹，以便在该临时文件夹内的该文件夹中提取或解压缩所有文件？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-04-21T08:20:24.797

简单的

```
Directory.CreateDirectory(Path.Combine("<Your temp folder>", "<DirectoryName>")); 
```

确保您具有适当的权限授予 aspnet 工作进程以创建文件夹。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-04-21T13:19:29.740

```
string tempFolderAbsolutePath = @"C:\Temp";
string subFolderRelativePath = @"SubTemp1";

DirectoryInfo tempFolder = new DirectoryInfo( tempFolderAbsolutePath );
DirectoryInfo subFolder = tempFolder.CreateSubdirectory( subFolderRelativePath );

string tempFileName = String.Concat( Guid.NewGuid().ToString(), @".tmp" );
string textData = @"Temp text data";

using (StreamWriter streamWriter = File.CreateText( Path.Combine( subFolder.FullName, tempFileName ) ))
{
        streamWriter.Write( textData );
        streamWriter.Flush();
        streamWriter.Close();
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-21T08:20:26.013

[`System.IO.Directory.CreateDirectory()`](http://msdn.microsoft.com/en-us/library/system.io.directory.createdirectory(VS.71).aspx)就是你要找的。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-05-14T15:44:10.600

只需使用这个：

```
System.IO.Directory.CreateDirectory(String.Format(@"{0}/{1}", PathToParent, SubDirectoryName) 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-04-29T10:11:14.743

# **前端**

```
 <form id="form1" runat="server">
            <asp:Button ID="Button1" runat="server" Text="Create New Directory" onclick="createButton_Click" />            
            <br /><br />
            <asp:Label ID="Label1" runat="server" Text=""></asp:Label><br />
            <asp:Label ID="Label2" runat="server" Text=""></asp:Label>
        </form> 
```

# **代码隐藏**

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.UI;
using System.Web.UI.WebControls;
using System.Data;
using System.Configuration;
using System.IO;

namespace RakeshDadamatti
{
    public partial class CreateDirectory : System.Web.UI.Page
    {
        String newDirectory;
        String subDirectory;
        protected void Page_Load(object sender, EventArgs e)
        {
        }
        private void CreatenewDirectory(string newDirectory)
        {
            try
            {
                if (!Directory.Exists(newDirectory))
                {
                    Directory.CreateDirectory(newDirectory);
                    Label1.Text = "Directory Has Been Created.";
                }
                else
                {
                    Label1.Text = "Directory Exists.";
                }

                if (!Directory.Exists(subDirectory))
                {
                    Directory.CreateDirectory(subDirectory);
                    Label2.Text = "Sub Directory Has Been Created.";
                }
                else
                {
                    Label2.Text = "Sub Directory Exists.";
                }
            }
            catch (IOException _err)
            {
                Response.Write(_err.Message);
            }
        }
        protected void createButton_Click(object sender, EventArgs e)
        {
            newDirectory = Server.MapPath("Directory Name Here");
            subDirectory = Server.MapPath(@"" + "~/" + newDirectory + "/" + "Sub Directory Name Here");
            CreatenewDirectory(newDirectory);
        }
    }
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-10-25T12:33:43.643

`System.IO.Directory.CreateDirectory()`在指定路径中创建所有目录和子目录，除非它们已经存在。

`string address = Directory.CreateDirectory(newDirectory).CreateSubdirectory("SubDir").FullName;`

# sql-server - 可以将 .net dll 作为 UNSAFE 加载到 SQL Server 中吗？

> ID：771565
> 
> 赞同：1
> 
> 时间：2009-04-21T08:14:15.340
> 
> 标签：sql-server, sql-server-2005, clr, sqlclr

在创建 SQL Server CLR 存储过程时，我注意到我无法像往常一样引用 .net 框架中的任何内容。经过一番阅读，我意识到需要先将程序集加载到数据库中。

因此，我加载了我需要的那些，但由于 P/Invoke 不得不使用 UNSAFE 权限集。我现在可以在我的存储过程代码中引用它们并且一切正常。

但是，当我真的不知道他们在做什么时，我有点担心必须将它们设置为 UNSAFE。所以我的问题是：

可以将 .net 框架加载为 UNSAFE 而不完全按照它在做什么？这样做会如何损害 sql server 的安全性/健壮性/可扩展性（正如微软警告的那样）？

非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-21T10:18:15.433

它可以更改注册表、重新启动服务、重新启动服务器等。没有什么太重要了 ;-) 一个简单[的图表，其中包含不同之处](http://www.devx.com/codemag/Article/31193/0/page/6)

也请参阅此问题（虽然没有答案）[SQL Server 2008: How crash-safe is a CLR Stored Procedure that load unmanaged libraries](https://stackoverflow.com/questions/752357/sql-server-2008-how-crash-safe-is-a-clr-stored-procedure-that-loads-unmanaged-li)

当然，您在做什么需要不安全的访问权限？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-18T17:10:35.053

这个问题专门针对加载不在[Supported .NET Framework Libraries](http://msdn.microsoft.com/en-us/library/ms403279.aspx)集中的 .Net Framework 程序集，因此我将重点关注 Microsoft 提供的 DLL 而不是任何随机 DLL 的上下文。

“支持”列表中的程序集和不在列表中的程序集之间的区别归结为支持的程序集“已经过测试，以确保它们符合与 SQL Server 交互的可靠性和安全标准”（如上面链接的“支持的库”页面）。主要问题是“可靠性”而不是“安全性”。支持列表中的程序集已经过验证，其行为*与预期*一致，没有任何错误或奇怪的副作用。该功能已经过测试，可以使用各种语言和排序规则等。

一些不在支持列表中的 .Net Framework 程序集可以加载`PERMISSION_SET`为`SAFE`. 但是，这并不能保证所需的行为。并且有些可以加载为`UNSAFE`不一定说明会有问题。

作为不保证行为的示例：我已加载`System.Drawing`以进行一些简单的图像处理。当图像直接通过`byte[]`/`VARBINARY(MAX)`提供时以及由文件路径提供并从磁盘读取时，我测试了操作。一切都按预期工作。我把它发给了德国的某个人，他的 Windows 和 SQL Server 都设置为“德语”作为语言。直接提供图像时，他能够得到预期的结果。但是当他提供文件路径时它不起作用。

对于不希望的行为，SQL Server 将显示程序集无法加载的原因`SAFE`或`EXTERNAL_ACCESS`当您尝试加载时。例如：

```
CREATE ASSEMBLY [System.Drawing]
AUTHORIZATION [dbo]
FROM 'C:\Windows\Microsoft.NET\Framework\v4.0.30319\System.Drawing.dll'
WITH PERMISSION_SET = SAFE; 
```

结果是：

> 警告：Microsoft .NET Framework 程序集 'system.drawing，version=4.0.0.0，culture=neutral，publickeytoken=b03f5f7f11d50a3a，processorarchitecture=msil。' 您注册的内容未在 SQL Server 托管环境中进行全面测试，因此不受支持。将来，如果您升级或维修此程序集或 .NET Framework，您的 CLR 集成例程可能会停止工作。有关详细信息，请参阅 SQL Server 联机丛书。
> 
> 消息 6218，级别 16，状态 2，第 1 行为
> 程序集“System.Drawing”创建程序集失败，因为程序集“System.Drawing”验证失败。检查引用的程序集是否是最新的并且受信任（对于 external_access 或不安全）以在数据库中执行。如果有任何 CLR 验证程序错误消息将跟随此消息
> 
> [ : System.Drawing.BufferedGraphicsContext::bFillColorTable][mdToken=0x600013c][offset 0x00000053][found address of Byte] 堆栈上的预期数字类型。
> 
> [ : System.Drawing.BufferedGraphicsContext::bFillColorTable][mdToken=0x600013c][offset 0x00000043][found Native Int][expected address of Byte] 堆栈上的意外类型。
> 
> [ : System.Drawing.BufferedGraphicsContext::bFillColorTable][mdToken=0x600013c][offset 0x00000027][found Native Int][expected address of Byte] 堆栈上的意外类型。
> 
> [ : System.Drawing.Icon::ToBitmap][mdToken=0x6000349][offset 0x00000084][found unmanaged pointer][expected unmanaged pointer] 堆栈上的意外类型。
> 
> [ : System.Drawing.Icon::ToBitmap][mdToken=0x6000349][offset 0x000000E4] 非托管指针不是可验证的类型。
> 
> [ : System.Drawing.Icon::GetShort][mdToken=0x6000356][offset 0x00000002] 非托管指针不是可验证的类型。
> ...

如果您不打算使用任何这些方法或类型，那么您可能不会遇到任何问题。没有办法将“安全”的东西与“不安全”的物品分开。

另一个关联内疚的例子，但甚至更远，是：

```
CREATE ASSEMBLY [System.Web]
AUTHORIZATION [dbo]
FROM 'C:\Windows\Microsoft.NET\Framework\v4.0.30319\System.Web.dll'
WITH PERMISSION_SET = SAFE; 
```

结果是：

> 警告：Microsoft .NET Framework 程序集 'system.web，version=4.0.0.0，culture=neutral，publickeytoken=b03f5f7f11d50a3a，processorarchitecture=x86。' 您注册的内容未在 SQL Server 托管环境中进行全面测试，因此不受支持。将来，如果您升级或维修此程序集或 .NET Framework，您的 CLR 集成例程可能会停止工作。有关详细信息，请参阅 SQL Server 联机丛书。
> 
> 警告：Microsoft .NET Framework 程序集 'microsoft.build.framework，version=4.0.0.0，culture=neutral，publickeytoken=b03f5f7f11d50a3a，processorarchitecture=msil。' 您注册的内容未在 SQL Server 托管环境中进行全面测试，因此不受支持。将来，如果您升级或维修此程序集或 .NET Framework，您的 CLR 集成例程可能会停止工作。有关详细信息，请参阅 SQL Server 联机丛书。
> 
> 警告：Microsoft .NET Framework 程序集 'system.xaml，version=4.0.0.0，culture=neutral，publickeytoken=b77a5c561934e089，processorarchitecture=msil。' 您注册的内容未在 SQL Server 托管环境中进行全面测试，因此不受支持。将来，如果您升级或维修此程序集或 .NET Framework，您的 CLR 集成例程可能会停止工作。有关详细信息，请参阅 SQL Server 联机丛书。
> 
> 消息 6212，级别 16，状态 1，第 1 行
> CREATE ASSEMBLY 失败，因为安全程序集“System.Xaml”中类型“System.Windows.Markup.ValueSerializer”的方法“TypeDescriptorRefreshed”正在存储到静态字段。在安全程序集中不允许存储到静态字段。

如您所见，`System.Web`实际上，它本身就很好`SAFE`，但它具有依赖程序集并且正在自动加载。第一个依赖程序集`microsoft.build.framework`也没有问题（至少不能验证，尽管有可能不允许`SAFE`是否存在但只能在运行时捕获）。但是第二个依赖程序集确实有一个可以在加载程序集时验证的问题：它“存储到静态字段”。这是一个可靠性问题而不是安全性问题，因为类被实例化一次（嗯，每个应用程序域，意味着：每个数据库，每个所有者）并在 SPID 之间共享以供使用（这就是为什么在 SQLCLR 中只能访问静态方法的原因） . 因此，静态类级变量在技术上是在会话（即 SPID）之间共享信息，这很容易导致意外行为。但同时，如果您只想使用`HtmlString.ToHtmlString()`，那么您可能没有使用`System.Xaml`. 那么为什么它不只是加载`System.Web`as`SAFE`和`System.Xaml`as`UNSAFE`呢？可能是因为代码在`SAFE`程序集不允许调用程序集中的代码`UNSAFE`（至少在 SQLCLR 中不允许）。

**结论**
那么加载`UNSAFE`.Net Framework 程序集可以吗？这真的应该归结为测试。大量的测试（不仅仅是你的开发箱上的一个线程，而是*真正的*测试）。如果一切都按预期运行，那么你应该没问题。但是，如果某些行为与预期不符，那么它*不是*可以报告给 Microsoft 的错误，因为它已被声明为不受支持。

* * *

**编辑：**
这里是这个问题的更正式的答案，其中列出了*可能*出现问题的几种情况：[SQL Server CLR-hosted environment 中未经测试的 .NET Framework 程序集的支持策略](http://support.microsoft.com/kb/922672/en-us)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T10:47:56.040

当您在托管许多公共网站的服务器上使用 SQL 数据库引擎时，您作为服务器管理员（或 DBA 或任何负责人）一无所知，您应该限制他们的访问，这很重要！此外，如果您在受限区域拥有 DBA，在某些大公司中数据最重要的地方，这也是最重要的事情。

在我看来，你应该给你的应用程序提供它需要看到的东西，仅此而已。例如，如果您不需要查看注册表，为什么要授予对程序集的无限制访问权限？您不知道如果有人将您的应用程序的代码注入并劫持到数据库中（也可以不受限制地访问！）会有多危险。

希望能帮助到你

# c# - 如果它是只读的，可以在 C# 中使用公共变量吗？

> ID：771567
> 
> 赞同：18
> 
> 时间：2009-04-21T08:14:46.120
> 
> 标签：c#, properties

C#语法糖制作属性的方式之间是否存在一些内部差异：

```
public string FirstName { get; set; } 
```

并像这样制作公共变量：

```
public string LastName; 
```

我认为第一种方式是首选，而第二种方式应该避免。但是，我经常看到这种类型的只读属性被使用，它是上面第二种类型的一种形式：

```
public readonly string InternalCode; 
```

这是创建只读属性的最佳实践方法吗？

```
using System;

namespace TestProps
{
    class Program
    {
        static void Main(string[] args)
        {
            Customer customer = new Customer();
            customer.FirstName = "Jim";
            customer.LastName = "Smith";
            customer.Show();
        }
    }

    class Customer
    {
        public string FirstName { get; set; } //prefered
        public string LastName; //avoid
        public readonly string InternalCode; //???

        public Customer()
        {
            InternalCode = "234729834723984";
        }

        public void Show()
        {
            Console.WriteLine("{0}, {1} ({2})", LastName, FirstName, InternalCode);
            Console.ReadLine();
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2009-04-21T08:37:48.140

因为他（还）没有回答，也没有其他人引用这个：Jon Skeet 有一篇关于这个主题的精彩文章，他*深入修改了他的书 C#*（感谢 Jon）：

> [**为什么属性很重要**](http://csharpindepth.com/Articles/Chapter8/PropertiesMatter.aspx)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-04-21T08:21:29.443

使用属性提供了一个更能抵抗未来变化的接口。假设在未来的某个时间，决定为内部代码添加前缀。

使用公共只读变量会暴露您的内部结构，并且您将很难将前缀添加到您使用类的内部变量的每一行。

使用属性，您只需编写以下内容

```
public string InternalCode { 
    get { return _prefix + _internalCode; } 
} 
```

你就完成了！

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-04-21T08:31:50.353

在我看来，公开公共字段是可以的（特别是如果它们是只读或常量）。话虽如此，我想说的是，在您展示的示例中，我可能会使用属性，因为它们会给您带来 2 个优势（相对于字段）：1）更好的封装，并且可以让您在未来和 2）如果您正在执行数据绑定，那么您确实需要这些属性。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-04-21T08:20:40.910

是的。可以有一个公共的只读变量（只是它们可以在定义或构造函数时初始化）。

例如 Decimal.MaxValue

如果支持值发生变化（除了它的初始化值），拥有公共只读属性是好的。

例如 Environment.TickCount

我认为 Environment.NewLine 将是一个公共的只读变量。好吧，它是一个公共属性（仅限获取），原因可能是为了保持跨平台的兼容性。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-01-15T12:41:09.817

简短回答：public **const**可以，public readonly 不一定，public get without set 不一定。没有分配就无法更改的对象可以。引用类型很危险，因为您仍然可以更改它们的值，即使您不能更改引用本身。

readonly 关键字的问题在于它并不意味着您所理解的逻辑上只读/不可变。这意味着更像“只能在构造函数中分配”。引用不能更改，但它的值可以。不幸的是，c# 没有提供“真正的”只读关键字。另请参阅[https://blogs.msdn.microsoft.com/ericlippert/2007/11/13/immutability-in-c-part-one-kinds-of-immutability/](https://blogs.msdn.microsoft.com/ericlippert/2007/11/13/immutability-in-c-part-one-kinds-of-immutability/)

属性不能有只读关键字（[https://titombo.wordpress.com/2012/11/11/using-the-c-modifiers/](https://titombo.wordpress.com/2012/11/11/using-the-c-modifiers/)）。正如其他人指出的那样，您可以使用属性并且只定义 get 而没有 set，尽管您不能在构造函数中设置该属性。使用私有集，您可以在类中的任意位置设置属性，*而**不仅仅是*在构造函数中。readonly 字段会更具限制性。

# eclipse - GEF - 如何在 Composite 中打开编辑器？

> ID：771568
> 
> 赞同：1
> 
> 时间：2009-04-21T08:14:52.530
> 
> 标签：eclipse, bpel, eclipse-gef

我的名字是 Oleg，我正在编写高级功能 - BPEL 文件的可视化比较。我想在“比较”窗格（左和右）中使用常规编辑器作为第一步，我只想打开两个编辑器（每个文件一个）稍后我可以稍微“破解”它们，使新部分变为绿色，删除部分红色等...

所以我的问题听起来很简单，我有： - Composite - 描述 .bpel 文件的资源 我必须在这个 Composite 中打开这个资源的默认编辑器。

我将不胜感激任何提示或建议！

我尝试了什么：

我花了几天时间试图更深入地了解 GEF，但毕竟我没有为我的简单问题找到任何简单的解决方案。

来自另一个项目的人使用：

*   `org.eclipse.gmf.runtime.notation.Diagram`
*   `org.eclipse.gmf.runtime.diagram.ui.parts.DiagramGraphicalViewer`
*   `diagramGraphicalViewer.setContents(diagram)`

但我的编辑器是基于 GEF，而不是基于 GMF。

据我了解，我不能只打开复合编辑器，我必须使用很多“额外”的东西——EditorManager、Workbrenchs、一些网站等等。

毕竟我写了一些简单的代码，但它不起作用。可能我以绝对错误的方式写了它，但让我引用它只是为了弄清楚我真正需要什么。

```
File file2open = new File(new Path("/p1/name2.bpel"), (Workspace) BPELPlugin.getPlugin().getWorkspace()) { };
BPELMultipageEditorPart editorPart = new BPELMultipageEditorPart();
FileEditorInput editorInput = new FileEditorInput(file2open);
EditorDescriptor editorDescriptor = null;
try {
   editorDescriptor = (EditorDescriptor)IDE.getEditorDescriptor(file2open);
} catch (PartInitException e) {
   e.printStackTrace();
}
WorkbenchPage workbrenchpage = (WorkbenchPage)   PlatformUI.getWorkbench().getActiveWorkbenchWindow().getActivePage();
EditorSite editorSite = new EditorSite(new EditorReference(workbrenchpage.getEditorManager(), editorInput, editorDescriptor), editorPart, workbrenchpage, editorDescriptor);
try {
 editorPart.init(editorSite, editorInput);
} catch (PartInitException e) {
 e.printStackTrace();
}
editorPart.createPartControl(mycomposite); 
```

**upd：**终于我实现了我想要的，但不确定其他人是否感兴趣:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-21T19:11:59.767

不，没有在 GEF 查看器中打开编辑器的好方法。请记住： 1.“编辑器”是Eclipse 平台的概念。即它不仅仅是一个小部件，而是一个完整的基础设施。正如你所说 - 你需要 IEditorSite 等等。2\. GEF 的数据是“轻量级的”。你整个 GraphicalViewer 是一个单一的 SWT 小部件，并在其上绘制图形 - 它们没有支持它们的操作系统小部件。

因此，如果您确实需要在 GEF 查看器中嵌套编辑器，则必须将 SWT 组合放在查看器的顶部并管理其位置。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-01-12T09:35:33.637

result of my work [http://www.picamatic.com/view/3436443_bpelcompare/](http://www.picamatic.com/view/3436443_bpelcompare/) source code: [http://dl.dropbox.com/u/49126809/org.eclipse.emf.compare.ui.gef.zip](http://dl.dropbox.com/u/49126809/org.eclipse.emf.compare.ui.gef.zip)

# algorithm - 对图表进行排序以使尽可能多的箭头指向前方

> ID：771570
> 
> 赞同：0
> 
> 时间：2009-04-21T08:15:56.460
> 
> 标签：algorithm, sorting, graph, directed-graph

我需要对有向图的节点进行排序，以使向后流动的箭头数量（与排序顺序相反）最小。

我可以想到算法（例如，不断交换节点，直到没有交换可以改善事情）但我不确定它们运行的​​速度或它们是否达到最佳解决方案。

这个问题的名称和复杂性是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-21T08:18:11.760

可以使用[拓扑排序来按深度顺序对节点进行排序。](http://en.wikipedia.org/wiki/Topological_sorting) 但是，这仅适用于不包含循环的图。您的问题听起来像是图中有循环。一种选择是找到循环（有关执行此操作的方法，请参见[Tortoise and Hare 算法](http://en.wikipedia.org/wiki/Cycle_detection)）并打破循环，记录你打破它的位置。然后对节点进行排序并重新链接。

如果您出于可视化目的这样做，则有一个名为[GraphViz](http://www.graphviz.org/)的图形渲染库，它的功能与您所描述的非常相似，然后布置节点。它易于集成和使用，并将呈现到屏幕或各种不同的输出格式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-07-22T08:23:20.413

经过一番思考，我意识到问题可以分为两部分：

1.  确定图的最大无环子图（[NP-hard](http://www.google.nl/search?q=maximum+acyclic+subgraph)）
2.  对其进行拓扑排序（这要[容易得多](http://en.wikipedia.org/wiki/Topological_sorting)）

# javascript - 将一个表的内容复制到另一个表中

> ID：771571
> 
> 赞同：3
> 
> 时间：2009-04-21T08:16:06.740
> 
> 标签：javascript, html, internet-explorer-8

在我当前的应用程序中，我需要将一个表的内容复制到另一个表中......通过设置 innerHTML 它在 FF 中完美运行......但在 IE8 中没有......这是我用来在 FF 中复制的代码：

```
getID("tableA").innerHTML = getID("tableB").innerHTML;
// getID is a custom function i wrote to provide a shorter version of document.getElementById(); 
```

TableA 为空（仅存在 tbody 标记）。TableB 看起来像这样：

```
 table
  tbody
    tr
      td "Content" /td
      td "Content" /td
    /tr
  /tbody
/table 

```

我已经尝试过使用 nodeValue.. 或 appendData... 或 outerHTML.. 但没有任何效果...

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-04-21T08:42:12.963

Internet Explorer 不允许您使用innerHTML 编辑表格的内部——要么全有，要么全无。

由于您尝试使用 innerHTML 来复制信息，因此完整的副本应该是安全的（即没有任何可能重复的 id 属性），在这种情况下我会这样做：

```
var source = document.getElementById('tableA');
var destination = document.getElementById('tableB');
var copy = source.cloneNode(true);
copy.setAttribute('id', 'tableB');
destination.parentNode.replaceChild(copy, destination); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-21T08:45:53.033

得知 IE 8 并没有解决这个问题，我有点惊讶。天哪，谈论拖你的脚。这是 Internet Explorer 的 innerHTML 实现中的故意遗漏——您不能在表格中设置 innerHTML。该功能的创建者提供[了解释和解决方法](http://www.ericvasilik.com/2006/07/code-karma.html)。基本上，您可以获得一个实际的 tbody 节点并使用 replaceChild() 将原始表的 tbody 转换为该节点。

# asp.net - 定期，使用 jquery 部分更新 aspx 页面

> ID：771576
> 
> 赞同：0
> 
> 时间：2009-04-21T08:17:23.493
> 
> 标签：asp.net, jquery

我只想使用 jquery 来更新每 60 分钟从数据库中定期读取帐户信息的方法。当我只刷新页面的那部分时，我不想刷新或加载整个 aspx 页面。有没有办法完成这个任务？

先感谢您

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-04-21T08:19:00.260

jQuery 提供了广泛的[Ajax](http://docs.jquery.com/Ajax)支持。

如果要发出 GET 请求，可以使用 $.get 方法。如果要更新 DOM 元素，可以使用 $.load 方法。通用的 $.ajax 方法提供了更大的灵活性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-21T08:22:40.983

使用 javascript 计时器和 jquery 的 ajax 函数以一定的时间间隔定期查询您的 .aspx 页面或脚本文件。

# asp.net - ASP.NET MVC 创建强类型视图的问题

> ID：771579
> 
> 赞同：1
> 
> 时间：2009-04-21T08:18:06.953
> 
> 标签：asp.net, asp.net-mvc

我现在正在学习 ASP.MVC。我在创建强类型视图时遇到了一些问题。我将实体数据模型添加到模型中，然后尝试基于我创建的实体数据模型添加强类型视图。但我在“添加视图”对话框的“查看数据类”中看不到任何类。

我想念什么了吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-21T09:41:23.087

在添加视图之前构建您的项目。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-21T08:50:43.553

我这样做的步骤是；

在解决方案下的新项目中创建实体数据模型。

使用模型浏览器将一些对象添加到 EDM。

在我的 MVC 项目的 Models 文件夹中创建一个模型类，然后添加一些从实体数据模型中获取对象的方法。不要忘记从您的 MVC 项目中引用您的 EDM 项目。

在我的控制器中创建一个新的 ActionResult（或查看结果），让它从模型文件夹模型中调用它的对象。然后右键单击并创建视图...

您应该在视图数据类下拉列表中看到您的实体数据模型和模型文件夹对象。对我来说，使用模型文件夹的原因是我可以在延迟加载对象时非常清楚，例如，从父订单中订购商品。

# asp.net-mvc - 有没有办法在客户端浏览器中显示图像而不将其上传到服务器？

> ID：771581
> 
> 赞同：1
> 
> 时间：2009-04-21T08:18:37.810
> 
> 标签：asp.net-mvc

我正在 ASP.NET MVC 中编写一个简单的“书”创建页面。用户可以通过填写标题、年份等并选择封面图像来创建书籍。当用户按下“创建”按钮时，表单将图像和数据发送到名为“创建”的控制器操作，然后我将图像保存到磁盘并将数据保存到数据库。

但是我想在用户通过文件对话框选择图像时显示图像。据我所知，我必须将图像上传到服务器然后显示在客户端浏览器中。但是如果用户在上传图像后取消“创建”操作，图像将保留在服务器的磁盘中。那么我该如何处理这些临时图像或者有没有办法在客户端浏览器中显示图像而不上传到服务器？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-21T08:24:50.993

由于安全原因，如果不将图像上传到服务器，您将无法向用户显示图像。显示来自文件系统的图像被认为存在安全风险。

编辑：要删除未使用的图像，您可以创建一个线程来运行一个清理例程，该例程将定期从上传目录中删除它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-21T15:07:44.847

是的，使用 Silverlight，例如：

在 Page.xaml 中：

```
<StackPanel x:Name="LayoutRoot" Background="White">
    <Button x:Name="btn1" Content="Select image file">
    <Image x:Name="img1">
</StackPanel> 
```

在 Page.xaml.cs 中：

```
public partial class Page : UserControl
{
    public Page()
    {
        InitializeComponent();
        this.Loaded += new RoutedEventHandler(Page_Loaded);
    }

    void Page_Loaded(object sender, RoutedEventArgs e)
    {
        btn1.Click += new RoutedEventHandler(btn1_Click);
    }

    void btn1_Click(object sender, RoutedEventArgs e)
    {
        OpenFileDialog ofd = new OpenFileDialog();
        if (ofd.ShowDialog() == true)
        {
            Stream s = ofd.File.OpenRead();
            BitmapImage bi = new BitmapImage();
            bi.SetSource(s);
            img1.Source = bi;
            s.Close();
        }
    }
} 
```

[在这里](http://www.insidercoding.com/post/2008/08/17/Reading-Local-Files-in-Silverlight.aspx)阅读更多。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-06-10T09:48:23.517

是的，您可以使用 javascript

Javascript：

```
function showThumbnail(files){
  for(var i=0;i<files.length;i++){
    var file = files[i]
    var imageType = /image.*/
    if(!file.type.match(imageType)){
      console.log("Not an Image");
      continue;
    }

    var image = document.createElement("img");
    var thumbnail = document.getElementById("thumbnail");
    image.file = file;
    thumbnail.appendChild(image)

    var reader = new FileReader()
    reader.onload = (function(aImg){
      return function(e){
        aImg.src = e.target.result;
      };
    }(image))
    var ret = reader.readAsDataURL(file);
    var canvas = document.createElement("canvas");
    ctx = canvas.getContext("2d");
    image.onload= function(){
      ctx.drawImage(image,100,100)
    }
  }
}

var fileInput = document.getElementById("upload-image");
fileInput.addEventListener("change",function(e){
  var files = this.files
  showThumbnail(files)
},false) 
```

HTML：

```
<input type="file" id="upload-image" multiple="multiple"></input>
<div id="thumbnail"></div> 
```

您只需要输入字段和 div 即可显示缩略图，并且在更改输入字段时将调用 showThumbnail 函数，该函数将在“缩略图”div 中附加 img。

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2009-04-21T08:23:51.963

你可以用简单的javascript来做到这一点......

将选定的图像路径分配给以**file://**为前缀的图像标签，它会按照您希望的方式工作

# c - 是否有可用的 JSR 257（“非接触式通信 API”）C API？

> ID：771586
> 
> 赞同：1
> 
> 时间：2009-04-21T08:20:11.473
> 
> 标签：c, api, jsr257

我正在尝试实现[JSR 257](http://jcp.org/en/jsr/detail?id=257)（“非接触式通信 API”）API，并且需要使用 C 编程语言。我想知道是否有人知道可用的类似 C API，因此可以用作基础。这样做的最佳方法是什么？我正在考虑继续并开始设计/实现一个，但如果存在类似的东西，我不想重新发明。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-04-22T08:32:31.263

JSR 257 似乎是关于各种形式的“短距离”通信，无线。给出的技术示例包括[RFID](http://en.wikipedia.org/wiki/Radio-frequency_identification)、[近场通信](http://en.wikipedia.org/wiki/Near_Field_Communication)和[条形码](http://en.wikipedia.org/wiki/Barcode)。

*   [此页面](http://www.rfidguardian.org/index.php/General_RFID_Links#Open-Source_Projects)列出了各种开源 RFID 实现。
*   近场通信是一个相当新的领域，我无法找到任何现有的 API 进行快速搜索。我的建议是查看制造支持它的 IC 的硬件供应商，然后从那里进行搜索。这样的供应商之一似乎是[NXP](http://www.nxp.com/#/pip/pip=[pfp=50326]|pp=[t=pfp,i=50326])。
*   [Zebra Crossing](http://code.google.com/p/zxing/)是一个用于解释条形码的 Java 库。它不是您要求的 C，但无论如何它可能是有趣的。主页上讨论了（到目前为止只有部分）C++ 端口，这些可能也很有趣。

# testing - 您使用哪些浏览器设置进行测试？

> ID：771591
> 
> 赞同：0
> 
> 时间：2009-04-21T08:21:32.063
> 
> 标签：testing, web-applications, browser

您是否在多个浏览器设置下测试您的应用程序？您是否使用测试工具来告诉您为什么您的网站可能存在问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-21T08:25:18.700

Firefox 有非常有用[的 WebDeveloper 插件](http://chrispederick.com/work/web-developer/)。允许您动态禁用/启用浏览器的各种功能。您可以检查您的应用在禁用 cookie 或 800x600 等情况下如何工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-21T08:33:49.520

除了测试各种分辨率之外，我还使用不同的 DPI 进行了测试，我发现办公室在其工作站上使用 120dpi 很常见，这尤其会破坏 IE 中的站点。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-21T09:06:04.810

色盲的颜色使用：http: [//vischeck.com/](http://vischeck.com/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-04-21T08:33:20.927

我们使用了几个不同的机器映像，其中安装了 IE6/IE7/IE8 FF2/FF3 Chrome、Opera 和 Safari。

对于开发人员来说，大多数都安装了 IE7 和 Firefox。[Firefox Web Developer 插件](https://addons.mozilla.org/en-US/firefox/addon/60)非常方便。与[FireBug](http://getfirebug.com/)、[Y-Slow](http://developer.yahoo.com/yslow/)和[HTTPFox 一样](https://addons.mozilla.org/en-US/firefox/addon/6647)。

我们会将大多数网站定位到 1024*768，然后进行测试以查看它们是否正常@

```
1280*1024
1280*768 
1920*1080
1920*1200 
```

对于简单的 UI 交互，我们过去使用[Selenium](http://seleniumhq.org/)进行自动化/宏观测试

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-04-21T08:49:57.720

我通常使用对浏览器截图中的浏览器兼容性至关重要的设计来测试页面。自己试试：[browsershots.org](http://browsershots.org/)

# .net - 为什么 SQL Server 没有预装 .net Framework for CLR 集成？

> ID：771592
> 
> 赞同：0
> 
> 时间：2009-04-21T08:21:56.727
> 
> 标签：.net, sql-server, sql-server-2005, clr

例如，如果我想引用 .net 框架中的某些内容以在我的 CLR 存储过程中使用，我必须首先将其加载到 Sql 服务器数据库中。

为什么没有预装？是性能相关还是安全问题或其他什么？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-21T09:10:12.493

默认情况下它是关闭的，因为它增加了攻击面，并且在可能的地方不需要。许多其他 SQL Server 的东西也必须专门启用。

[默认情况下可以关闭一些相当基本的东西：KB 914277 for "remote access"](http://support.microsoft.com/kb/914277)

其次，许多商店都不允许使用它，这导致我厚颜无耻地回答：“因为开发人员可能会使用它”。在关系引擎中使用 CLR 有好处：自定义数据类型、自定义聚合等，但它会被滥用，因为对于许多人来说，编写 c# 而不是 T-SQL 更容易。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-21T12:53:26.543

SQL Server 2000 的一切都打开了，在 slammer 蠕虫 Microsoft 吸取教训之后，在 SQL Server 2005 及更高版本中，所有启用的东西（如 xp_cmdshell、openrowset 等）都默认关闭以减少攻击面。由于同样的原因，CLR 也被关闭。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-21T08:26:17.263

我想这是出于安全原因，因为默认情况下不安装它会减少任何黑客可用的攻击面。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-04-21T08:26:49.617

可能是因为它是一个没有被太多使用的可选功能。然而。

# openid - 如何成为 OpenID 消费者？

> ID：771594
> 
> 赞同：4
> 
> 时间：2009-04-21T08:22:06.320
> 
> 标签：openid

有人知道或有任何文件可用于构建使用 OpenID 的网站吗？例如，当用户访问我的站点时，我接受一个 OpenID，然后我会将他们重定向到 OpenID 提供者，然后当他们通过身份验证时，他们将被重定向回来。

我只想知道是否有任何步骤或标准 URL 可以使用？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-04-21T08:26:46.857

这确实是谷歌的问题。[这](http://www.plaxo.com/api/openid_recipe)是关于如何在现有网站上实现 OpenID 支持的看似合理的解释。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-21T08:27:30.393

[Open-id 选择器](http://code.google.com/p/openid-selector/)
和 if .net
[DotNetOpenID](http://code.google.com/p/dotnetopenid/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-21T18:21:11.137

[rpxnow.com](http://rpxnow.com)将提供一种通过 SaaS 服务接受 openid 的快捷方式。

# sql - movind 内容和配置数据库后无法访问 WSS 3.0 站点

> ID：771601
> 
> 赞同：1
> 
> 时间：2009-04-21T08:24:53.817
> 
> 标签：sql, sql-server, sharepoint, wss, msde

问题：
在 MS SQL Server 上安装新的 SQL 实例后，无法访问内部站点

描述：
我在 W2K3 服务器上安装了 WSS 3.0。最初，Backupexec (bkupexec) 只有一个 MS SQL (MSDE) 实例。后来，我们安装了 WSS 3.0，而不是安装新的 SQL 实例，而是安装在同一个实例 (bkupexec) 上。因此，在某个时候，Backupexec 中的所有 DB 和 WSS 中的所有 DB 都在同一个 SQL 实例中。

在我们注意到这一点之后，我们想将这两个拆分为两个单独的实例：bcupexec 和 sharepoint。首先，我已经对 backupexec 实例中的所有数据库进行了备份。然后，我安装了新的 SQL 实例并将其命名为 Sharepoint，并尝试将所有 WSS 数据库恢复到新的 SQL 实例中。完成后，我检查 IIS 中的引用，以便 Content 和 Config 指向新实例。但从那以后就再也没有去了。

我可以从 IIS 和浏览器中访问管理站点。我无法访问任何内部 WSS 站点。它要求进行身份验证。我使用的只是 Windows 身份验证。帐户在 AD 中。

由于我是 WSS 的新手，因此我将非常感谢所有建议和可能的修复。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-21T16:42:51.890

如果您更改了网站集的内容数据库的位置，则需要使用 SharePoint Central Admin 分离并重新附加它们。

导航到*应用程序管理*并切换到您关注的应用程序。单击标题*SharePoint Web 应用程序管理下的“***内容数据库**” 。从这里您可以单击“删除内容数据库”并单击“确定”。

 *这不会从 SQL 中删除物理数据库，它只会断开数据库与该 Web 应用程序的关联。然后，您可以从管理内容数据库屏幕中*添加内容数据库*，并键入您希望与应用程序关联的数据库的名称。

如果权限问题仍然存在，请确保为应用程序启用匿名访问，并从 SQL 和 SharePoint 中为数据库启用适当的服务帐户权限。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-21T15:26:50.823

不确定这会有所帮助，但试试看...

1.  在中央管理中，确保您检查网站集管理员的网站集，并确保您使用的是该用户。
2.  在 IIS 管理器中，检查以确保用户有权访问 IIS 网站。

# .net - 未触发 WebControl 的触发方法

> ID：771605
> 
> 赞同：0
> 
> 时间：2009-04-21T08:26:08.247
> 
> 标签：.net, asp.net, page-lifecycle, lifecycle

这是我的场景：
我有一个带有占位符的页面。该页面向该占位符添加了不同类型的控件（我们不想显示一些数据 - 通过查询字符串或回发获取 id，因为我们还有一棵树）。
添加的控件或多或少都包含一个文本框（显示元素的名称）、复选框（显示元素的活动状态）和一个保存按钮，该按钮会触发此 web 控件中的方法。

现在我的问题非常明显：因为我正在动态添加控件（并且对于每个条件：！回发和回发），所以添加的控件中的保存方法不会触发 - 无论我做什么......

我只是愚蠢地得到了这个把戏:)

一些幕后信息（工作流程）：

```
protected void Page_Load(object sender, EventArgs e)
{
    if (!this.Page.IsPostBack)
    {
        this.SelectedElement = SomeMagicMethod();
    }
}

protected void NodeSelected(object sender, TreeViewNodeEventArgs e)
{
    this.SelectedElement = SomeOtherMagicMethod();
}

protected override void OnLoadComplete(EventArgs e)
{
    // we have to take this life-cycle!
    if (this.SelectedElement!= null)
    {
        this.DisplayElement();
    }
}

private void DisplayElement()
{
    var UC = this.LoadControl(UCPath) as DataTypeUC;
    if (UC == null)
    {
        return;
    }

    UC.ID = EditCampaignFolderUCID;
    UC.SetData(this.SelectedElement);
    UC.DataBind();
    this.phContent.Controls.Add(UC);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-04-21T08:34:18.427

在动态添加控件时，您还必须每次都连接保存按钮的事件（也就是说，如果保存按钮是动态生成的）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-05T07:51:16.450

诀窍是：恢复 oninit 中的所有内容，并按照视图状态在最后一个请求中保存的顺序...棘手棘手

# c# - c#：在自定义控件中旋转文本

> ID：771617
> 
> 赞同：0
> 
> 时间：2009-04-21T08:30:45.147
> 
> 标签：c#, math, graphics, rotation, custom-controls

我正在尝试在标签中旋转一些文本。我有一个自定义标签，它允许我控制文本呈现过程。

```
protected override void OnPaint ( PaintEventArgs pe )
{
    Graphics g = pe.Graphics;
    g.RotateTransform( angle );

    g.drawString( text );

    g.ResetTransform();
} 
```

我遇到的问题是旋转似乎发生在控件的原点周围，即坐标（0,0）。有没有一种方法可以让文本围绕控件的中心而不是 oragin 旋转？

我知道函数“g.RotateTransform()”，因此一种可能的解决方案是旋转文本，然后将其翻译到控件的中心。如果这是管理工作的唯一方法，是否有一种通用的方式可以计算转换以确保文本位于控件的中心？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-21T08:36:38.127

围绕任意点的旋转通常是将该点平移到原点，然后再进行旋转和平移。问题可能是确定旋转后文本的尺寸以将其相应地移回。

# .net - Git在Windows中更改'.git'文件夹名称

> ID：771620
> 
> 赞同：2
> 
> 时间：2009-04-21T08:32:01.367
> 
> 标签：.net, visual-studio, git

默认情况下 git init 创建一个名为 '.git' 的文件夹。在最近的 Visual Studio 工具（2005 及更高版本）中，这可以正常工作。但是 Visual Studio 2003（和 ... VB6 也可能）在此文件夹名称上崩溃。理想情况下，我想将每个存储库更改为“git”而不是“.git”。这可能吗？

我知道之前有人问过这个问题（[重新定位 .git 文件夹](https://stackoverflow.com/questions/672655/relocating-the-git-folder)）……但那是在 linux 环境中。我在工作中使用 windows*叹息*。

希望有一个简单的解决方案.. 否则我只需要翼翼地解决它：o 但我宁愿使用性感的 git。

编辑：

如何在 Windows 上设置 GIT_DIR 变量？我用谷歌搜索了它，但没有多大意义。

编辑2：

环境变量不会为该机器上的*所有存储库设置它吗？*如果是这样，我将不得不进入每个存储库并手动移动文件夹......此外，我尝试将其设置为“git”，当我打开 git gui 应用程序时，它告诉我“不能使用有趣的 .git 存储库 git”。当我使用 git 控制台时，它可以工作......但老实说，这远非一个好的解决方案。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-04-21T08:45:50.133

GIT_DIR 变量允许您为存储库指定另一个位置。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-04-27T22:44:38.570

至少在 Linux 上，git 有一个名为`--git-dir`. 每当您运行 git 时，请使用该`--git-dir`选项。这也应该存在于 Windows 版本中，所以你可以这样做

```
 git --git-dir=git_directory status 
```

也许你可以把它放在一个批处理文件或其他东西中，让你的生活更轻松。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-04-21T12:21:52.920

您应该能够使用[此知识库指南](http://support.microsoft.com/kb/310519)设置 GIT_DIR 环境变量。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-04-27T22:49:15.860

我想最简单的方法是在项目根目录中没有任何 .sln 文件。

这里的项目有大约 50 个 .sln 文件。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-04-27T23:07:26.363

在存储库根目录下创建至少一级的所有项目。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2011-12-28T10:59:45.667

正如迈克尔已经建议的那样

采用

```
--git-dir=dirname 
```

这适用于 Windows 和 Linux

该命令必须在指定目录之后。

```
git --git-dir=.git1234 status 
```

这行不通

```
git status --git-dir=.git1234 
```

git 也不会像 .git 一样忽略 .git1234 ，所以请确保将新的目录名称添加到 .gitignore 文件中

# c# - 除了简单的强制转换之外，C#“as”关键字还有更多吗？

> ID：771629
> 
> 赞同：11
> 
> 时间：2009-04-21T08:34:26.510
> 
> 标签：c#, casting

我正在研究[Josh Smith 的 CommandSink 代码](http://www.codeproject.com/KB/WPF/VMCommanding.aspx)，显然不了解 C# 中的“as”关键字。

我不明白他为什么写这行：

```
IsValid = _fe != null || _fce != null; 
```

因为他只需要写：

```
IsValid = depObj != null; 
```

因为永远不会出现 _fe 为 null 而 _fce 不为 null 的情况，反之亦然，对吧？还是我错过了有关“as”如何转换变量的信息？

```
class CommonElement
{
    readonly FrameworkElement _fe;
    readonly FrameworkContentElement _fce;

    public readonly bool IsValid;

    public CommonElement(DependencyObject depObj)
    {
        _fe = depObj as FrameworkElement;
        _fce = depObj as FrameworkContentElement;

        IsValid = _fe != null || _fce != null;
    }
    ... 
```

# 回答：

答案是 Marc 在他的评论中所说的“**这就是“as”的全部意义——它*不会*抛出异常——它只是报告 null**。

这是证明：

```
using System;

namespace TestAs234
{
    class Program
    {
        static void Main(string[] args)
        {
            Customer customer = new Customer();
            Employee employee = new Employee();

            Person.Test(customer);
            Person.Test(employee);
            Console.ReadLine();
        }

    }

    class Person
    {
        public static void Test(object obj)
        {
            Person person = obj as Customer;

            if (person == null)
            {
                Console.WriteLine("person is null");
            }
            else
            {
                Console.WriteLine("person is of type {0}", obj.GetType());
            }
        }
    }

    class Customer : Person
    {
        public string FirstName { get; set; }
        public string LastName { get; set; }
    }

    class Employee : Person
    {
        public string FirstName { get; set; }
        public string LastName { get; set; }
    }

} 
```

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2009-04-21T08:37:42.413

`as`如果操作数兼容，将返回您请求的类型的对象。如果不是，它将返回`null`。如果您使用`as`并且转换可能会失败，则需要检查以确保引用有效。

例如，如果 depObj 的类型为`String`，则它不会是`null`，但它也无法转换为所请求的类型中的任何一种，并且这两个变量都将变为`null`。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-04-21T08:40:49.257

和“cast, if it is”一样，相当于：

`(X is TYPE) ? (TYPE) X : null`

但是，它比`is`+更有效`cast`。

depObj 可以实现任何一个接口，也可以不实现，或者两者都实现。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2009-04-21T08:39:52.283

```
IsValid = _fe != null || _fce != null; 
```

和

```
IsValid = depObj != null; 
```

不是相同的测试，因为如果 depObj 不是 FrameworkElement 或 FrameworkContentElement 类型但不为 null，则第二个测试将返回 true，而第一个将返回 false。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-04-21T08:40:40.830

如果`depObj`既不是 a 也不是`FrameworkElement`a`FrameworkContentElement`怎么办？我不知道完整的场景（即可能是什么类型），但这似乎是一个合理的防御策略。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2009-04-21T08:41:46.693

首先，`as`关键字包括`is`支票。

```
if( o is A)
   a = (A) o; 
```

是相同的

```
a = o as A; 
```

其次，`as`不会像强制转换那样转换 Type，即使定义了从 Type `A`to的转换运算符`B`。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-04-21T08:40:02.377

如果它`DependencyObject depObj`实际上是一个 `FrameworkOtherTypeOfElement`

那么`depObj`就不会为空

但是尝试的`as`Casts 都将评估为 null 并且`_fe`&`_fce`都将为 null

`as`相当于做

```
if(I Can Cast This Object)
   //Then cast it
else
   //Return null 
```

# javascript - 如何避免在 Ext.form.ComboBox 中显示加载文本？

> ID：771630
> 
> 赞同：2
> 
> 时间：2009-04-21T08:36:01.217
> 
> 标签：javascript, combobox, extjs

我以与此示例非常相似的方式使用 Ext.form.ComboBox：http: [//extjs.com/deploy/dev/examples/form/forum-search.html](http://extjs.com/deploy/dev/examples/form/forum-search.html)

让我烦恼的是，当 ajax 调用正在进行时，它显示加载文本，我看不到以前的任何结果。

例如我输入'test' -> 它显示结果 -> 我添加'e'（搜索字符串是'teste'） -> 结果消失并显示加载文本，所以一秒钟我看不到任何结果并考虑它是否不是我要找的...

我怎样才能将其更改为在“加载”时不说任何内容...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-25T12:15:09.757

解决方案是覆盖 Ext.form.ComboBox 的 'onBeforeLoad' 方法：

```
 Ext.override(Ext.form.ComboBox, 
    { onBeforeLoad: 
        function() {this.selectedIndex = -1;}
    }); 
```

请注意，这会覆盖类方法，因此所有 ComboBox 实例都不会显示 LoadingText。如果您只想覆盖一个实例 - 请使用插件（以非常相似的方式）。

如果您愿意，您还可以查看 Ext.LoadingMask 以将适当的加载掩码设置到旁边的元素。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-21T08:39:58.367

如果您不向用户显示加载消息，用户将如何知道发生了什么？用户会注意到它已经加载了结果，因此可能会等待查看结果，但如果没有显示任何内容，那么用户将不知道它是否带来了新数据。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2011-12-20T09:27:13.363

您可以监控组合框的展开事件并将选择器加载设置为 false。

```
 // in the controller
    init: function() {
      this.control({
        "form combobox[id=fieldId]": {
          expand: function(combobox) {
            combobox.getPicker().setLoading(false);
          }
        }
      });
    } 
```

# .net - 如何为现有的 c 项目创建 VS 解决方案，以便 VS 自动选择新文件？

> ID：771632
> 
> 赞同：0
> 
> 时间：2009-04-21T08:36:47.143
> 
> 标签：.net, c, visual-studio-2008, c89

我想将嵌入式应用程序移植到 x86 以创建模拟器。我们决定尝试 VS2008，但我不知道如何制作 vs 来理解我们现有的目录结构：

*   拱/
    *   arch/hcs08 -- HAL 实现
    *   arch/include -- HAL 的公共接口
    *   arch/x86 --*这里应该是仿真层*
*   操作系统/
    *   os/src -- 操作系统层的源代码
    *   os/include -- 操作系统的公共接口
*   应用程序/ -- 嵌入式应用程序
    *   应用程序/app1/src -- app1
    *   应用程序/应用程序2/src——应用程序2

我想要3个项目：

*   arch & os - 库项目，包含 os/ *、 arch/include/*和 arch/x86/*中的所有内容
*   app1 - 控制台应用程序项目，包含 apps/app1/* 中的所有内容
*   app2 - 控制台应用程序项目，包含 apps/app1/* 中的所有内容

我已经通过手动一一导入文件创建了上述结构，但显然 vs 不会自动选择新文件并且我的项目是平面的（没有文件夹）

操作系统和应用程序层正在不断发展，所以添加新文件真的很烦人。

有什么方法可以让 VS 自动选择所有新文件并保持目录结构？

我知道我可以在 Eclipse CDT 中轻松完成上述操作，但正如我所说，我们想尝试 VS2008。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-21T09:55:43.070

Piotr，您必须从解决方案资源管理器中选择“显示所有文件”选项。它将向您显示项目目录结构中的所有文件。项目中未包含的文件（在 VS 外部修改、复制等）应显示为淡白色对象。要做的就是通过单击所选项目的上下文菜单上的菜单选项将它们包含到项目中。此选项还递归地添加整个目录结构。当然，您也可以排除项目中不需要的文件。

Visual Studio 使用 XML 文件来处理每个解决方案和项目内容，因此其行为与 AFAIK 包含整个文件系统目录的 Eclipse 略有不同。如果您希望将文件合并到项目中，则必须根据需要进行操作或将其直接复制到解决方案资源管理器。当然，如果您想使用 SVN，最好选择 VS 插件，它可以完成工作而不会打扰您。（即 AnkhSVN - 开源和免费）。

您还可以开发自己的“看门狗”插件来刷新内容；）

最好的问候，J。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-21T08:46:06.497

VS2008，off-course可以有项目的目录结构。但是您需要手动创建它。为此，请右键单击您的项目，然后您将找到“添加文件夹”菜单。您可以创建与您的项目相同的文件夹集。

自动文件添加：我没听说过这个。可能是不可能的。除非您在项目中添加太多文件，否则手动添加文件在 VS 中并不难。

# c# - 如何将两个日期之间的差异显示为 00Y 00M

> ID：771642
> 
> 赞同：1
> 
> 时间：2009-04-21T08:39:49.773
> 
> 标签：c#, datetime

给定 C# 中的两个 DateTimes，我如何显示年和月的差异？

我可以对来自简单减法的时间跨度进行基本算术运算，但这不会考虑月份、闰年等的不同长度。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-21T08:54:07.740

因为基础表示是从公元 1 年 1 月 1 日午夜 12:00 开始以 100 纳秒的刻度测量的，因此减法将非常正确地处理闰年等：

```
DateTime date1 = ...
DateTime date2 = ...

// date2 must be after date1

TimeSpan difference = date2.Subtract(date1);
DateTime age=new DateTime(tsAge.Ticks); 

int years = age.Years - 1;
int months = age.Month - 1;

Console.WriteLine("{0}Y, {1}M", years, months); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-21T12:34:13.733

FWIW 这就是我最终得到的

```
 DateTime servicelength = new DateTime(DateTime.Now.Subtract(employee.StartDate).Ticks);
        LengthOfService.Text = String.Format("{0}Y {1}M", servicelength.Year - 1, servicelength.Month - 1); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-21T08:47:30.970

你可以试试这个：

```
DateTime date1 = new DateTime(1954, 7, 30);
DateTime today = DateTime.Now;

TimeSpan span = today - date1;
DateTime age = DateTime.MinValue + span;

int years = age.Year - 1;
int months = age.Month - 1;
int days = age.Day - 1;

Console.WriteLine("years: {0}, months: {1}, days: {2}", years, months, days); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-04-21T08:56:02.587

不同月份的长度？应该用哪个月？时间跨度不限于一年中的某一年或某月。您只能计算两个日期之间的天数：

```
Timspan span = date2 - date1;

Console.Writeline("Days between date1 and date2: {0}", span.Days); 
```

从 DateTime.MinValue 开始计算，只需将 0001 年作为开始，并从 1 月开始计算月份。我认为这没有实际用途。

**编辑：**

有了另一个想法。您可以计算自 date1 以来的月份：

```
// primitive, inelegant, but should work if date1 < date2
int years = date2.Year - date1.Year;
int month = date2.Month - date1.Month;
if (month < 0) 
{
  years -= 1;
  month += 12;
}
Console.Writeline("{0}Y {1}M", years, month); 
```

这里的问题是你只是忽略了这些日子。毕竟这不是一个好的解决方案。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-07-19T10:21:16.273

鉴于本例中为 UTC DateTime（您也可以为“现在”定义任何不同的日期）

```
DateTime now = DateTime.UtcNow;
DateTime birthdate = new DateTime (1976,11,12);
DateTime age = now.AddYears(-birthdate.Year).AddMonths(-birthdate.Month).AddDays(-birthdate.Day); 
```

如果在生日中定义，您可以继续使用小时、分钟、秒等

现在你可以从年龄中提取年月日

```
int years = age.Year
int month = age.Month 
```

等等

# c# - 如果链接中有冒号，则单击超链接不起作用。我该如何解决这个问题

> ID：771650
> 
> 赞同：0
> 
> 时间：2009-04-21T08:41:08.973
> 
> 标签：c#, asp.net

在我的应用程序中，用户可以发布消息、标题和正文。然后，用户单击标题的超链接以阅读该消息来访问该消息。但是，如果用户输入冒号，则超链接不可点击。我正在寻找解决这个问题的最快、最简单的方法

超链接位于 GridView 中，因此问题可能与超链接中的冒号有关，当在 gridview 中不可点击时

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-04-21T08:47:35.387

我认为您需要使用[URL 编码](http://www.blooberry.com/indexdot/html/topics/urlencoding.htm)[`HttpServerUtility.UrlPathEncode`](http://msdn.microsoft.com/en-us/library/system.web.httpserverutility.urlpathencode.aspx)

**编辑**：我不确定我是否正确理解冒号是在 URL 中还是在单击的超链接文本中？

# c# - 有没有一种快速的方法来格式化 XmlDocument 以在 C# 中显示？

> ID：771652
> 
> 赞同：5
> 
> 时间：2009-04-21T08:41:33.840
> 
> 标签：c#, asp.net, xml

我想输出我的 InnerXml 属性以显示在网页中。我想看到各种标签的缩进。是否有捷径可寻？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2009-04-21T09:33:48.457

这是我前段时间为了做到这一点而组织的一个小课程。

它假定您正在使用字符串格式的 XML。

```
public static class FormatXML
{
    public static string FormatXMLString(string sUnformattedXML)
    {
        XmlDocument xd = new XmlDocument();
        xd.LoadXml(sUnformattedXML);
        StringBuilder sb = new StringBuilder();
        StringWriter sw = new StringWriter(sb);
        XmlTextWriter xtw = null;
        try
        {
            xtw = new XmlTextWriter(sw);
            xtw.Formatting = Formatting.Indented;
            xd.WriteTo(xtw);
        }
        finally
        {
            if(xtw!=null)
                xtw.Close();
        }
        return sb.ToString();
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-21T08:48:12.420

您应该能够使用代码格式化程序执行此操作。您必须首先将 xml 编码到页面中。

Google 有[一个很好的美化](http://code.google.com/p/google-code-prettify/)器，它能够可视化 XML 以及几种编程语言。

基本上，将您的 XML 放入这样的 pre 标记中：

```
<pre class="prettyprint"> 
    &lt;link href="prettify.css" type="text/css" rel="stylesheet" /&gt;
    &lt;script type="text/javascript" src="prettify.js">&lt;/script&gt;
</pre> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-21T08:51:31.273

使用[XML Web Server 控件](http://msdn.microsoft.com/en-us/library/0dfkwww1(VS.80,loband).aspx)在网页上显示 xml 文档的内容。

编辑：您应该将整个 XmlDocument 传递给 XML Web 服务器控件的 Document 属性以显示它。您不需要使用 InnerXml 属性。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-04-21T09:28:50.607

查看适用于 ASP.NET 的免费[Actipro CodeHighlighter](http://www.actiprosoftware.com/Products/DotNet/ASPNET/CodeHighlighter/Default.aspx) - 它可以巧妙地显示 XML 和其他格式。

还是您对实际格式化 XML 更感兴趣？然后看一下 XmlTextWriter - 您可以指定诸如格式（是否缩进）和缩进级别之类的内容，然后将您的 XML 写出到例如 MemoryStream 并从那里读回一个字符串以供显示。

马克

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-04-21T09:32:31.800

使用设置了 XmlWriterSettings 的 XmlTextWriter，以便启用缩进。如果要将生成的字符串写入屏幕，可以使用 StringWriter 作为“临时存储”。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-04-21T09:18:24.703

如果识别是您唯一的担忧，并且如果您有能力启动 xternall 进程，则可以使用[HTML Tidy](http://www.w3.org/People/Raggett/tidy/)控制台工具 (~100K) 处理 xml 文件。

代码是：

```
tidy --input-xml y --output-xhtml y --indent "1" $(FilePath) 
```

然后，您可以在摆脱特殊字符后在网页上显示识别的字符串。

创建产生这种输出的递归函数也很容易 - 只需从根开始迭代节点并进入子节点的下一个递归步骤，将标识作为参数传递给每个新的递归调用。

# ruby-on-rails - 当引用者不可用时，在 Ruby on Rails 中正确执行 redirect_to :back

> ID：771656
> 
> 赞同：96
> 
> 时间：2009-04-21T08:42:41.480
> 
> 标签：ruby-on-rails, ruby, http

我遇到了问题`redirect_to :back`。是的，它是推荐人。

我经常遇到异常

> (ActionController::RedirectBackError) "没有在请求中设置 HTTP_REFERER，因此无法成功调用 redirect_to :back。如果这是一个测试，请确保指定 request.env[\"HTTP_REFERER\"]。"

我意识到这是由于推荐人不可用的结果。有没有一种方法，例如，可以在每次访问时设置一个会话变量并访问最后一个页面，并且当 HTTP_REFERER 不可用时，利用此会话变量重定向到？

* * *

## 回答 #1

> 赞同：148
> 
> 时间：2009-04-21T09:08:36.117

您不太可能*有*会话并且*没有*推荐人。

 *未设置推荐人的情况并不少见，我通常会挽救这种期望：

```
def some_method
  redirect_to :back
rescue ActionController::RedirectBackError
  redirect_to root_path
end 
```

如果您经常这样做（我认为这是一个坏主意），您可以将其包装在 Maran 建议的其他方法中。

顺便说一句，我认为这是一个坏主意，因为这会使用户流模棱两可。只有在登录的情况下，这是明智的。

**更新**：正如一些人指出的那样，这[不再适用](https://github.com/rails/rails/pull/22506)于 Rails 5。相反，使用`redirect_back`，此方法还支持后备。然后代码变为：

```
def some_method
  redirect_back fallback_location: root_path
end 
```

* * *

## 回答 #2

> 赞同：39
> 
> 时间：2011-01-22T15:41:11.423

这是我的小 redirect_to_back 方法：

```
 def redirect_to_back(default = root_url)
    if request.env["HTTP_REFERER"].present? and request.env["HTTP_REFERER"] != request.env["REQUEST_URI"]
      redirect_to :back
    else
      redirect_to default
    end
  end 
```

如果 http_refferrer 为空，您可以传递一个可选的 url 去其他地方。

* * *

## 回答 #3

> 赞同：38
> 
> 时间：2009-04-21T08:45:40.443

```
def store_location
  session[:return_to] = request.request_uri
end

def redirect_back_or_default(default)
  redirect_to(session[:return_to] || default)
  session[:return_to] = nil
end 
```

试试看！（感谢[Authlogic](http://github.com/binarylogic/authlogic/tree/master)插件）

* * *

## 回答 #4

> 赞同：33
> 
> 时间：2016-03-22T00:52:06.003

**核心功能**

`redirect_back`是 Rails 5+ 的核心功能，它在`ActionController::Redirecting`已包含在`ApplicationController::Base`.

> 弃用警告：`redirect_to :back`已弃用，将从 Rails 5.1 中删除。如果请求没有 HTTP 引用者信息，请使用`redirect_back(fallback_location: fallback_location)`where表示要使用的位置。`fallback_location`

编辑：[来源](https://github.com/rails/rails/blob/v5.0.0.beta2/actionpack/lib/action_controller/metal/redirecting.rb#L108)

* * *

## 回答 #5

> 赞同：21
> 
> 时间：2012-08-21T23:17:57.380

也许已经晚了，但我想分享我的方法，它也保留了选项：

```
 def redirect_back_or_default(default = root_path, *options)
    tag_options = {}
    options.first.each { |k,v| tag_options[k] = v } unless options.empty?
    redirect_to (request.referer.present? ? :back : default), tag_options
  end 
```

你可以像这样使用它：

```
redirect_back_or_default(some_path, :notice => 'Hello from redirect', :status => 301) 
```

* * *

## 回答 #6

> 赞同：15
> 
> 时间：2015-08-10T09:35:19.133

更新：Rails 5 添加了 redirect_back 方法（[https://github.com/rails/rails/pull/22506/](https://github.com/rails/rails/pull/22506/)），最好使用：

```
redirect_back fallback_location: answer_path(answer), flash: { error: I18n.t('m.errors')} 
```

对于低于 5.0 的 rails 仍然可以使用下面的旧方法：

类似于@troex 的答案，将其添加到您的应用程序控制器

```
def redirect_back_or_default(default = root_path, options = {})
  redirect_to (request.referer.present? ? :back : default), options
end 
```

然后在你的控制器中使用它

```
redirect_back_or_default answer_path(answer), flash: { error: I18n.t('m.errors')} 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2021-06-07T18:42:41.713

## redirect_back_or_to (Rails 7+)

Rails 7 提供了一种新的惯用方式来重定向回或回退位置。

直接引用官方 Rails API 文档：

```
redirect_back_or_to(fallback_location, allow_other_host: true, **args) 
```

> 如果可能，将浏览器重定向到发出请求的页面（引用者），否则重定向到提供的默认回退位置。

> 从请求的 HTTP Referer (sic) 标头中提取引荐来源网址信息。这是一个可选的标头，它在请求中的存在取决于浏览器安全设置和用户偏好。如果请求缺少此标头，则将使用 fallback_location。

```
redirect_back_or_to({ action: "show", id: 5 })
redirect_back_or_to @post
redirect_back_or_to "http://www.rubyonrails.org"
redirect_back_or_to "/images/screenshot.jpg"
redirect_back_or_to posts_url
redirect_back_or_to proc { edit_post_url(@post) }
redirect_back_or_to '/', allow_other_host: false 
```

值得一提
的是，Rails 5的方式`redirect_back(fallback_location: '/things/stuff')`
与新引入的方式完全相同`redirect_back_or_to('/things/stuff')`。

**资料来源：**

*   [拉取请求](https://github.com/rails/rails/pull/40671)。
*   `redirect_back_or_to` [官方文档](https://edgeapi.rubyonrails.org/classes/ActionController/Redirecting.html#method-i-redirect_back_or_to)。
*   `redirect_back` [官方文档](https://edgeapi.rubyonrails.org/classes/ActionController/Redirecting.html#method-i-redirect_back)。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2016-06-16T05:57:05.643

最近，我遇到了同样的问题，我必须重定向`:back`或特定页面。经过很多解决方案后，我终于发现这个很简单，似乎可以解决问题：

```
 if request.env["HTTP_REFERER"].present?
    redirect_to :back
else
    redirect_to 'specific/page'
end 
```

如果您想使用`session`详细信息，请在代码的 else 部分执行。

# php - PHP 中的押韵

> ID：771658
> 
> 赞同：3
> 
> 时间：2009-04-21T08:43:30.637
> 
> 标签：php, nlp

我很难找到一种方法来检测**两个单词在英语中是否具有相同的押韵**。它不必是相同的音节结尾，而是更接近**语音相似**的东西。

我不敢相信在 2009 年，唯一的办法就是使用那些老式的押韵词典。你知道任何资源（在 PHP 中会是一个加号）来帮助我完成这个痛苦的任务吗？

谢谢你。

你的提示都非常有帮助。我会花一些时间来调查它。无论如何，关于 DoubleMetaPhone 的更多信息可以[在适当的 PHP 代码](http://swoodbridge.com/DoubleMetaPhone/)中找到（另一个是扩展）。[Php.net中](http://es2.php.net/metaphone)有关于 MethaPhone 功能和 doublemetaphone 的有趣信息。

他们特别提醒双变音与变音相比有多慢（大约慢 100 倍）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-04-21T09:01:03.170

请参阅[来自 U. Michigan 的 Bradley Buda 的 CS 项目摘要](http://www.bradleybuda.com/rhymes/595-final-report.pdf)，它使用 Levenshtein 距离作为原子来查找押韵的英语单词。我相信结合 Levenshtein 和 soundex 应该会产生更好的结果。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-04-21T09:01:19.097

Soundex 不会帮助您。Soundex 关注单词的开头，而不是结尾。一般来说，它认为你很难找到任何工具来做到这一点。即使对语言学家来说，词根比词尾更有趣。

通常，您要做的是将单词分成音节并比较它们的最后一个音节。如果您可以将其划分为音素，颠倒它们的顺序并在颠倒的单词上进行比较，那就更好了。[您可能会尝试比较变音位键](http://pecl.php.net/package/doublemetaphone)
的最后一部分。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-21T08:52:50.677

除了提到的[soundex()](http://de.php.net/manual/en/function.soundex.php)函数 ramonzoellner 之外，还有另一个名为[levenshtein()](http://de.php.net/manual/en/function.levenshtein.php)的函数，它计算两个单词之间的[levenshtein 距离](http://en.wikipedia.org/wiki/Levenshtein_distance)。这可能会进一步帮助您。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-04-21T13:51:41.270

似乎你需要找到一个包含发音的数据库，可能还有重音/重音：最后一个音节相似的多音节词，但不同音节的重音并不完全押韵，至少在能够在诗歌中使用它们的意义上；例如“诗歌”和“下摆”。其他答案（levenshtein & soundex）应该有助于找到候选人，但他们不会确认：

*   艰难的
*   咳嗽
*   面团
*   通过
*   树枝

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2009-04-21T08:47:08.350

你试过 soundex() 函数吗？如果单词听起来相似，它至少应该给你一些指示。

# struts - ActionError 和 AcionMessage 有什么区别？

> ID：771659
> 
> 赞同：0
> 
> 时间：2009-04-21T08:43:41.947
> 
> 标签：struts

ActionError 和 AcionMessage 有什么区别？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-04-21T08:47:54.603

如果 ActionError 对象不为空，则将用户转发到输入页面。使用 ActionMessage 时，不会进行这种区分——用户总是被正常转发。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-21T08:57:22.100

**ActionError**由 Strut 的内置异常处理程序使用。当引发异常时，会创建一个 ActionError 对象并将其存储在请求或会话范围中，以便转发到的页面可以访问它。

**ActionMessage**通常用于将一组消息从一个动作返回到一个 JSP

# java - Java: Why doesn't binary OR work as expected (see code below)?

> ID：771663
> 
> 赞同：1
> 
> 时间：2009-04-21T08:45:45.110
> 
> 标签：java, binary

I don't understand the output from the following code:

```
public static void main(String[] args) {
    int i1, i2, i3, i4;
    byte b;
    i1 = 128;
    b = (byte) i1;
    i2 = (int) b;
    i3 = 0 | b;
    i4 = 1 << 7;
    System.out.format("i1: %d   b: %d   i2: %d   i3: %d   i4: %d\n", i1, b, i2, i3, i4);
} 
```

Output:

```
i1: 128   b: -128   i2: -128   i3: -128   i4: 128 
```

Because `byte` is an 8-bit [two's-complement](http://en.wikipedia.org/wiki/Twos_complement) signed integer, the binary representations with a 1 in the most significant bit are interpreted as negative values, which is why `b` becomes `-128`, which I'm totally fine with. I also understand that it's probably a good idea to keep the interpretation consistent when casting, as with `i2`. But shouldn't `i3` and `i4` have identical bit patterns and therefore map to identical `int` values?

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-04-21T08:53:08.727

In this line:

```
i3 = 0 | b; 
```

The "b" variable is automatically promoted to `int` type with sign extension because of the `|` operator, so becomes `(int)-128`, i.e. `0xffffff80`.

When "or"ed with zero, its still the same value, namely -128

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-04-21T08:48:30.610

No, `i4` is not a byte value, it's an `int`. That means that its sign bit is bit 31, not bit 7.

**UPDATE**: `i3` is an `int` too, but it is initialized by extending a `byte`, so it keeps the sign from the `byte` value.

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2009-04-21T08:53:37.803

Sign extension is what is making `i2` and `i3` negative.

In the expression `(0 | b)`, `b` is promoted to an int, and sign extension occurs as part of this promotion.

That's not happening in the expression assigned to `i4`. The constants `1` and `7` are already ints so there's no sign extension involved.

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-04-21T09:02:18.923

`i2 = (int) b;`

`i3 = 0 | b;`

the i3 statement is equivalent to:

`i3 = 0 | ((int) b) = 0 | i2` so naturally it is going to have the same value as i2

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-04-21T08:51:00.447

In

```
i3 = 0 | b; 
```

I'm guessing the 0 | b part is evaluated as a byte, and the results are then cast to an int, while in

```
i4 = 1 << 7; 
```

the 1 << 7 part is already an int.

**The above guess has been pointed out in the comments to be wrong!**

The correct version is: In the top expression, the b is already cast to an int with sign extension before the OR operation.

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-04-21T08:58:12.117

That's simple. `i3 = 0 | b;` gets evaluated like `byte`, then it is converted to `int`. Whereas `i4 = 1 << 7;` will evaluate value as `int` and assign it to `int`. So in the first case we get `10000000b` cast to `int` from `byte`, which will give us `-128`. And in the second we just assign this value to `int` without cast, which gives us `128`.

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2009-04-21T09:12:18.057

If you want to get the unsigned value of the bit pattern in a byte:

```
b & 0xff 
```

See also [this old answer](https://stackoverflow.com/questions/397867/port-of-random-generator-from-c-to-java/397997#397997).

# c# - 从任务管理器禁用exe

> ID：771673
> 
> 赞同：-10
> 
> 时间：2009-04-21T08:47:50.750
> 
> 标签：c#

如何隐藏我的可执行文件，使其在运行时不会出现在任务管理器中？有很多同名的 EXE 运行，我想避免混淆用户。

**更新**

好的。告诉我，我怎样才能在任务管理器中禁止 EXE 被其他人杀死？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-04-21T08:58:51.520

如果你真的需要这样做，你基本上需要使用rootkit。请参阅 Hoglund & Butler 的书“Rootkit：颠覆 Windows 内核”。但是您将在每一步都与操作系统和反恶意软件供应商作斗争。

另请参阅 Raymond Chen 关于“军备竞赛”的反复讨论，了解为什么 Windows 不支持这一点 - 基本上，如果您被允许从任务管理器中删除自己，那么用户将需要另一个显示隐藏进程的实用程序，然后您就是想要一种方法将自己从该实用程序中删除，等等。

如果你真的必须这样做，顺便说一句，你将需要使用 C 或汇编程序，而不是 C#。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-04-21T08:55:07.037

谷歌术语“rootkit”。基本上，这被认为是非常邪恶的，通常仅用于邪恶目的，因此这是一种不好的做法，因为现代防病毒软件可能会将您的软件标记为恶意软件。

[http://en.wikipedia.org/wiki/Rootkit](http://en.wikipedia.org/wiki/Rootkit)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-01-24T09:07:53.743

回答您更新的问题。确保您的进程在`System`帐户或类似帐户下运行，并确保用户`Admin`在 pc 上没有权限。然后他们将无权终止该进程。

# java - 创建 Log4j 记录器的开销是多少

> ID：771675
> 
> 赞同：12
> 
> 时间：2009-04-21T08:47:58.833
> 
> 标签：java, log4j

我的应用程序中有一些网络服务，我想根据网络服务名称将它们记录到不同的文件中。为此，我正在创建记录器

```
myLogger = Logger.getLogger(logKey); 
```

我想知道是否应该缓存这些记录器以避免为每次调用创建它们，或者我可以忽略开销。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2009-04-21T08:49:40.047

log4j 已经使用默认的日志存储库 ( `Hierarchy`) 缓存了记录器。换句话说，它只是一个哈希表查找。

但是，根据我的经验，您*倾向于*使记录器成为静态的，因此无论如何它只会在每个类中被调用一次。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2009-04-21T09:04:26.220

此方法 Logger.getLogger(logKey) 在记录器缓存中查找具有在 logKey 中传递的名称的记录器。如果它不存在，它会创建一个。第一次调用记录器名称，将创建一个记录器，但稍后调用将从缓存中获取它，因此您无需在代码中处理它。

# c# - 如何在 asp.net gridview 中排列列？

> ID：771688
> 
> 赞同：1
> 
> 时间：2009-04-21T08:51:36.017
> 
> 标签：c#, .net, asp.net, gridview

如何在 asp.net gridview 中排列列？我想更改 4 列的位置。例如：

第 1 列 | 第 2 列 | 第 3 列 | 第 4 列 |

改变顺序（）

第 2 列 | 第 1 列 | 第 3 列 | 第 4 列 |

改变顺序（）

第 4 列 | 第 2 列 | 第 3 列 | 第 1 列 |

* * *

我想在 Gridview 中移动列。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-04-21T08:57:15.940

我不知道这是否适合您，但 Telerik RadGrid 支持这一点。有关详细信息，请参阅此[在线演示](http://demos.telerik.com/aspnet-ajax/grid/examples/client/resizing/defaultcs.aspx)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-21T09:04:28.917

2个选项从我的头顶：

1.  关闭 AutoGenerateColumns 并自己添加列，将它们映射到数据集中您想要的内容，并按照您想要的顺序。

2.  更改您的 SQL 查询以按您想要的顺序返回列。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-19T11:06:09.060

您可以先删除列，然后在删除索引处插入一个新列。如

```
var columnToMove = myGridView.Columns[1];
myGridView.Columns.RemoveAt(1);
myGridView.Columns.Insert(0, columnToMove); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-06-23T07:43:24.043

简单的方法：

1.  转到 aspx 页面。

2.  点击gridview的智能标签（>）。

3.  编辑列

4.  在“选定字段”中排列列顺序

希望它有效..

# windows - 如何为自己的文件扩展名设置图标

> ID：771689
> 
> 赞同：9
> 
> 时间：2009-04-21T08:51:58.777
> 
> 标签：windows, icons, file-association

我用“ftype”和“assoc”在windows中注册我的文件扩展名，这行得通。现在我的默认图标看起来很糟糕，我该如何更改这个图标？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-04-21T09:19:57.757

`HKEY_CLASSES_ROOT\.[extension]`默认键包含一个`REG_SZ`字符串，即下一个键的名称：

`HKEY_CLASSES_ROOT\[that_string]\DefaultIcon`默认键（“@”）包含以下内容： `[path_to_icon_file],[zero_based_index]`

例子：

```
 HKEY_CLASSES_ROOT\.txt
     @="MyTextFile"
 HKEY_CLASSES_ROOT\MyTextFile\DefaultIcon
     @="C:\WINDOWS\explorer.exe,2" 
```

这样，所有 .txt 文件都将使用 Explorer 可执行文件中的**第三个**图标。

# c# - 为什么我尝试在 Oracle 中保存图片时出现 ORA-00936 错误？

> ID：771695
> 
> 赞同：0
> 
> 时间：2009-04-21T08:54:45.087
> 
> 标签：c#, oracle

我会尝试将图片插入 Oracle 数据库 - 但它不起作用

（Sql server 中的相同代码工作出色）

```
string sampleImage = PicNativ;
BinaryReader sampleBR = null;
FileStream sampleFS = null;
OracleConnection sampleConnection = null;
OracleCommand sampleCommand = null;
FileInfo sampleFI = null;
byte[] sampleArr = null;
try
{
    if (EDIT_M == 1) 
        Oracle = "update Sex set Name = '" + txtC.Text.Trim() + 
            "',pic = @p_pic  where ID like '" + txtC4.Text.Trim() + "'";
    else
        Oracle = "insert into Sex (Id,Code,Name,pic) values "+
            "(Sex_Code.nextval,'" + txtA.Text.Trim() + "','" + 
            txtC.Text.Trim() + "', @p_pic )";
    sampleFI = new FileInfo(sampleImage);
    sampleFS = new FileStream(sampleImage, FileMode.Open, FileAccess.Read);
    sampleBR = new BinaryReader(sampleFS);
    sampleArr = sampleBR.ReadBytes((int)sampleFI.Length);
    using (sampleConnection = new OracleConnection(Conect))
    {
        sampleConnection.Open();
        using (sampleCommand = new OracleCommand())
        {
            sampleCommand.Connection = sampleConnection;
            sampleCommand.CommandText = Oracle;
            sampleCommand.Parameters.
                Add("@p_pic", OracleDbType.Blob ).Value = sampleArr;
            sampleCommand.ExecuteNonQuery();
        }
    }
}
finally
{
    sampleBR.Close();
    sampleFS.Close();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T01:15:48.603

As you know, [ORA-00936](http://www.techonthenet.com/oracle/errors/ora00936.php) is a missing expression error. In your question code, you are using a bind variable in your SQL statement. In Oracle, [placeholder variable starts with a colon](http://docs.oracle.com/cd/B10500_01/appdev.920/a96584/oci05bnd.htm). So where you have `@p_pic` the correct format is `:@p_pic`.

Using the ampersand in your named parameter is a Microsoft SQL Server.

# c# - 动态绑定树视图并获取选定节点

> ID：771702
> 
> 赞同：1
> 
> 时间：2009-04-21T08:56:44.397
> 
> 标签：c#, asp.net

我试图动态地（即通过代码）将目录绑定到asp.net Treeview 控件，一旦数据被绑定并显示给用户，我想获得一个节点列表来选择。

我已经让复选框的绑定和显示工作正常，但是当我查询 Treeview1.CheckedNodes 时它总是返回 0。如果我不动态绑定而是手动创建节点，那么它能够获取选定的节点。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-21T09:26:03.623

我的猜测是......因为您在每次页面加载时都从头开始动态构建整个内容，所以您会丢失选择。

您需要以某种方式存储有关在回发之前检查哪些复选框的信息（在 Viewstate 或 Session 中或取决于您的需要的任何内容），然后在重建它后将这些选择重新应用到您的树（在页面加载或预加载时存储它在视图状态中）。

# ide - 在 BlackBerry 上进行开发的最佳 IDE 是什么？

> ID：771705
> 
> 赞同：6
> 
> 时间：2009-04-21T08:57:20.510
> 
> 标签：ide, blackberry

我知道黑莓有一个定制的 IDE，但如果我没记错的话，它是一个相当低于标准的 IDE。有谁知道该设备是否有不同的IDE？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2009-04-22T16:07:25.880

对于“原生”黑莓应用程序开发（即 Java 应用程序开发），基本上有 4 个选项：

1.  [RIM 的 JDE](http://na.blackberry.com/eng/developers/javaappdev/javadevenv.jsp) - 几乎是一个糟糕的编辑器，但却是最稳定、功能最全（从 BlackBerry 角度来看）的解决方案。
2.  [RIM 的 Eclipse 的 JDE 插件](http://na.blackberry.com/eng/developers/javaappdev/javaeclipseplug.jsp)- 您可以获得 Eclipse 环境的所有优点，但存在很多问题。
3.  [带有 Mobility Pack 的 Netbeans](http://www.netbeans.org/kb/55/blackberry.html) - 我已经有一段时间没有真正看到有人使用它了，但是几年前有一些开发人员发誓要使用它
4.  自定义 Eclipse/JDE 环境 - 使用[ant 脚本](http://bb-ant-tools.sourceforge.net/)和 [RIM 的 JDWP 调试器接口](http://na.blackberry.com/eng/developers/javaappdev/javadevenv.jsp)（该页面上的组件包部分）。这曾经是在 JDE 插件之前为 BlackBerry 开发 Eclipse 的唯一方法

选项 3 和 4 我已经很长时间没有看到使用了，不确定它们是否仍然可行 - 尽管我不明白为什么 #4 不会。

我使用#4 很长一段时间，直到 RIM 推出他们的插件。虽然它仍然存在[很多问题，但](http://www.thinkingblackberry.com/archives/204)对我来说，使用 Eclipse 之类的东西所带来的生产力收益超过了它们。

因此，无论是 1 还是 2，但需要注意的是，您应该为整个团队选择一个或另一个，因为它们实际上彼此不兼容（项目结构的差异以及它们如何处理资源）。您可以轻松地从 1 移动到 2，但实际上并非如此。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-21T14:06:24.900

RIM 提供的IDE 称为JDE。确实，对于许多人来说，这款产品还有很多不足之处。RIM 也支持使用 Eclipse 和 Microsoft 开发环境，因此您可以选择。就个人而言，我使用 JDE。不要将此解释为推荐，我并不是说它是最好的，只是我使用的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-22T15:03:43.147

除了 RIM 的 JDE，我知道的唯一其他选择是 RIM 的[JDE Eclipse 插件](http://na.blackberry.com/eng/developers/javaappdev/javaeclipseplug.jsp)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-04-23T10:23:37.243

.NET 插件的功能非常有限，它无法让您访问内部类。

我一直在使用JDE插件，并没有遇到太多困难。

# linq - Linq to Objects - 在列表中搜索的位置

> ID：771709
> 
> 赞同：3
> 
> 时间：2009-04-21T08:58:28.353
> 
> 标签：linq

Linq to Objects - 在列表中搜索的位置

```
 internal class ProdQtyByWarehouse
    {
        public int id { get; set; }
        public List<ProdWarehouseQty> ProdWarehouseQtys { get; set; }
    }

    internal class ProdWarehouseQty
    {
        public int id { get; set; }
        public string PName { get; set; }
    }

    protected void Page_Load(object sender, EventArgs e)
    {
        var list1 = new List<ProdWarehouseQty>
                        {
                            new ProdWarehouseQty
                                {
                                    id = 3,
                                    PName = "list1PN1"
                                },
                            new ProdWarehouseQty
                                {
                                    id = 4,
                                    PName = "list1PN2"
                                }

                        };
        var list2 = new List<ProdWarehouseQty>
                        {
                            new ProdWarehouseQty
                                {
                                    id = 5,
                                    PName = "list2PN1"
                                },
                            new ProdWarehouseQty
                                {
                                    id = 6,
                                    PName = "list2PN2"
                                }

                        };
        var prodQtyByWarehouses = new List<ProdQtyByWarehouse>
                                      {
                                          new ProdQtyByWarehouse {id = 1, ProdWarehouseQtys = list1},
                                          new ProdQtyByWarehouse {id = 1, ProdWarehouseQtys = list2}

                                      };
        List<int> integers = new List<int>{2,3,4,6};

        List<ProdQtyByWarehouse> list =
            (from c in prodQtyByWarehouses
             where c.ProdWarehouseQtys.Contains(new ProdWarehouseQty {id = 3})
             select c).ToList(); // no object is returned
    } 
```

我怎样才能实现：

```
List<ProdQtyByWarehouse> list =
            (from c in prodQtyByWarehouses
             where c.ProdWarehouseQtys.Contains(new ProdWarehouseQty {id in integers})
             select c).ToList(); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-04-21T09:14:22.047

```
List<ProdQtyByWarehouse> list =
    (
        from c in prodQtyByWarehouses
        where c.ProdWarehouseQtys.Exists(x => integers.Contains(x.id))
        select c
    ).ToList(); 
```

# php - Zend From Decorators 不使用 ZendX_JQuery_Form

> ID：771713
> 
> 赞同：0
> 
> 时间：2009-04-21T09:00:36.663
> 
> 标签：php, jquery, zend-framework, zend-form

我正在使用两个装饰器 - 获取表格格式对齐 - 获取日期选择器（ZendX_JQuery_Form_Element_DatePicker）

两者都单独工作，但不是同时工作

错误：

```
Warning: Exception caught by form: Cannot render jQuery form element without at least one decorator implementing the 'ZendX_JQuery_Form_Decorator_UiWidgetElementMarker' interface. Default decorator for this marker interface is the 'ZendX_JQuery_Form_Decorator_UiWidgetElement'. Hint: The ViewHelper decorator does not render jQuery elements correctly. 
```

我的获取表单功能：

```
$form = new Form_Job();
$form->setDecorators(Decorator::$formDecorators);
$form->setElementDecorators(Decorator::$elementDecorators);
$form->getElement('submit')->setDecorators(Decorator::$buttonDecorators); 
```

表单类 Form_Job()

```
class Form_Job extends ZendX_JQuery_Form {
   public function init() {
        $element = new ZendX_JQuery_Form_Element_DatePicker('date_from');
        $element->setLabel('Campaign Period From :');
        $element->setRequired(true);
        $element->setAttrib('size', '10');
        $element->setJQueryParam('dateFormat', 'yy-mm-dd');

        $this->addElement($element);
   }
} 
```

我从[http://framework.zend.com/manual/en/zend.form.decorators.html得到了帮助](http://framework.zend.com/manual/en/zend.form.decorators.html)

> jQuery 装饰器：当心 UiWidgetElements 的标记接口
> 
> 默认情况下，所有 jQuery 表单元素都使用 ZendX_JQuery_Form_Decorator_UiWidgetElement 装饰器来渲染带有特定视图助手的 jQuery 元素。这个装饰器与用于 Zend_Form 中大多数默认表单元素的 ViewHelper 装饰器有本质的不同。为了确保 jQuery 表单元素的渲染工作正常，至少一个装饰器必须实现 ZendX_JQuery_Form_Decorator_UiWidgetElementMarker 接口，这是默认装饰器所做的。如果未找到标记接口，则会引发异常。如果您想为 jQuery 表单元素特定的渲染实现自己的装饰器，请使用标记接口。

但我需要代码来实现这个，请建议

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-23T03:57:17.687

得到我的答案：-

我用了

```
public static $formJQueryElements = array(
        array('UiWidgetElement', array('tag' => '')), // it necessary to include for jquery elements
        array('Errors'),
        array('Description', array('tag' => 'span')),
        array('HtmlTag', array('tag' => 'td')),
        array('Label', array('tag' => 'td', 'class' =>'element')),
        array(array('row' => 'HtmlTag'), array('tag' => 'tr')),
);
$form->getElement('jq_date')->setDecorators(Decorator::$formJQueryElements); 
```

这适用于表格对齐，适用于 jquery 元素！！！！！！

# mono - 为 CentOS 5.2 创建 Mono 二进制安装包

> ID：771717
> 
> 赞同：1
> 
> 时间：2009-04-21T09:01:46.473
> 
> 标签：mono, centos

我是 Linux 新手，但必须将 asp.net 应用程序移植到 Linux 平台。(CentOS 5.2)

我下载了单声道源文件并在我的开发盒上手动构建它们，因为 CentOS 5.2 没有可用的二进制包（几乎与 RedHat 相同），该应用程序在开发盒上运行良好。

下一步是设置安装了最少库的生产服务器。我的问题是......如何将 Mono 二进制文件制作成安装包，这样我就不需要在生产服务器中下载和构建它们。（我的开发箱与生产箱的配置相同）

我试图将所有与单声道相关的文件复制到服务器中，但没有运气......我可能错过了一些文件或一些设置......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-05T00:03:25.607

您仍然可以[在此处获得二进制 RPM](http://origin-download.mono-project.com/archive/2.10.2/download/RHEL_5/)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2010-01-11T07:08:14.367

编辑：

最近，Mono 宣布支持 RHEL/CentOS。你可以从他们[这里](http://ftp.novell.com/pub/mono/download-stable/RHEL_5/)得到包裹。

# sql-server - 如何计算列中相同数据的数量

> ID：771719
> 
> 赞同：1
> 
> 时间：2009-04-21T09:01:53.307
> 
> 标签：sql-server

我有一张桌子：

```
Id  Catg
1   cat01
2   cat01
3   cat01
1   cat02
2   cat02 
```

现在我想检测 catg01 和 catg02 的出现次数，就像在这个例子中，catg01 是 3 次，catg02 是 2 次，我想通过 LINQ/简单的数据库查询来计算。请注意：不能使用 Where 子句和硬编码 Catg01/catg 02，因为可以有 n 个类别。是否可以检测到？如果是，请帮忙。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-04-21T09:04:38.107

```
SELECT Catg, COUNT(*)
FROM myTable GROUP BY Catg 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-04-21T09:04:27.607

```
Select Catg, Count(*) From TableName Group By CatG 
```

对于 LINQ 版本。想象一个班级

```
 class Table
    {
        public int ID { get; set; }
        public string CatG { get; set; }
    } 
```

然后，如果您有该类的列表，则可以按如下方式查询它

```
List<Table> y = new List<Table>();

y.Add(new Table() { ID = 1, CatG = "a" });
y.Add(new Table() { ID = 2, CatG = "a" });
y.Add(new Table() { ID = 3, CatG = "a" });
y.Add(new Table() { ID = 4, CatG = "b" });
y.Add(new Table() { ID = 5, CatG = "b" });

var query = y.GroupBy(table => table.CatG);

// Iterate over each IGrouping in the collection.
foreach (var item in query)
{
    Console.WriteLine("CatG: {0} Number of Items: {1}", item.Key, item.Count());
} 
```

# javascript - IE 不允许动态创建的 DOM 'a' 元素上的 onClick 事件

> ID：771721
> 
> 赞同：7
> 
> 时间：2009-04-21T09:03:04.053
> 
> 标签：javascript, css, internet-explorer, firefox, events

我在使用 Internet Explorer 时遇到问题。我有一个链接可以复制表单上的文件上传元素。重复的代码还会将超链接附加到重复的上传元素，该元素应该删除重复的元素，只需删除此链接即可。

问题是这段代码在 Firefox 中运行良好，但在 IE 中根本无法运行。忘记代码是如何写出来的——我附加到元素的 onClick 事件根本不会触发！

我正在函数中创建这样的删除链接元素：

```
var a = document.createElement('a');
a.setAttribute('href', "javascript:void(0);");
a.setAttribute('class', 'delete');
a.setAttribute('onClick', 'removeThisElement(idOfParentContainer, this)');

container.appendChild(a); 
```

这在 Firefox 中运行良好，但在 IE 中根本不会触发。我使用 IE 检查器检查了 dom，并且链接已很好地呈现，但是附加到它的类尚未呈现或应用，即使它已物理附加到 html 上的链接，也没有触发事件。出于某种原因，无论我在其中放入什么代码，即使它是警报，onClick 事件甚至都不会触发。我在这里错过了什么吗？:(

* * *

很好，通过使用 AddEvent 附加事件解决了问题的第一部分，但是为什么不是 css 渲染我的意思是附加到元素的类由于某些奇怪的原因根本没有渲染:(

* * *

确实是个好建议 - 我正在重写我的代码以避免 setAttribute 函数，而是将所有这些 DOM 操作移植到 jquery。感谢您的帮助

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-04-21T09:16:53.303

~~事件处理程序不是 DOM 属性，该属性仅存在于标记中 - 我不确定为什么 FF 可以这样做。我现在要去研究，因为我想知道。~~

更新：似乎对事件处理程序是否是 DOM 有效属性感到复杂。在我看来这是 MS 的错，因为它们在内部不将它们视为属性，而 HTML 规范表明它们非常重要。这样做的直接后果是许多事情！IE 会认为属性不能在 IE 中使用 setAttribute 设置，包括事件处理程序绑定，重要的是还有**样式、类和名称**。显然 IE8 解决了这个问题，但我还没有安装，所以我无法检查。

同时，对于事件绑定，请改用[addEventListener/attachEvent](http://www.quirksmode.org/js/events_advanced.html)对，或者（不太优选，因为它是直接分配）将 a.onclick 直接设置为您的目标方法（或者更可能是您的方法的闭包）。

要修复未正确应用的样式，请使用`element.style = foo;`or (better) `element.className = bar`.

**本质上问题是setAttribute。避免使用它。**

[以供参考...](http://webbugtrack.blogspot.com/2007/08/bug-242-setattribute-doesnt-always-work.html)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-04-21T09:29:30.963

正如 annakata 所说，您应该使用 addEventListener/attachEvent。但是，如果您不想直接设置 onclick，您可以使用：

```
 a.onclick = function() { removeThisElement(idOfParentContainer, this); }; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-06-07T06:36:52.903

只需这样做

```
var element = document.createElement("input");
element.class = "className";
element.style.display = "none";
element.style.position = "absolute";
element.id = "someid";
element.type = "file";
element.onchange = function(){
                   // do onchange functions here
                   }
// do the following that removes all browser dependecies
$(document.body).append(element);
$("#someid").click(); //click the button programatically using its id
$(element).remove(); // remove the element 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-04-21T10:48:48.213

实际上，出于跨浏览器的目的，最好使用 Jquery。

```
$('#exampleCA').createAppend("a", { href: '#', style: "background-color: red;", onclick: 'alert (1);' }, "aaabbb"); 
```

这将创建带有文本 aaabbb、href = "#"、红色背景和单击警报事件的标签。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-04-21T20:04:24.493

如果您正在寻找可重用的 X 浏览器解决方案，以下功能适用于 IE、FF 和 Opera：

```
 function addEvent( obj, type, fn ) {
    if ( obj.attachEvent ) {
      obj['e'+type+fn] = fn;
      obj[type+fn] = function(){obj['e'+type+fn]( window.event );}
      obj.attachEvent( 'on'+type, obj[type+fn] );
    } else
      obj.addEventListener( type, fn, false );
  } 
```

# c# - .Net Release 构建工作比 Debug 慢

> ID：771727
> 
> 赞同：5
> 
> 时间：2009-04-21T09:04:54.907
> 
> 标签：c#, .net, xml-serialization

在过去的几天里，我正在经历一件最奇怪的事情。我发现我的 Release 版本实际上比 Debug 版本执行得**慢。**

**1.问题**

我终于在我的 Windows Forms exe 中从我的入口点（主要）剥离了所有东西，只留下了这个：

```
 [STAThread]
 static void Main(params string[] args)
 {
     Stopwatch sw = Stopwatch.StartNew();
     System.Xml.Serialization.XmlSerializer xmlS =
         new System.Xml.Serialization.XmlSerializer(typeof(TestClass));
     sw.Stop();
     MessageBox.Show(sw.Elapsed.ToString());
 } 
```

所以我实际上不再实例化任何表单，只是测试。`TestClass`是一个只有三个公共属性的小类`int`，没有别的。我的主要 .exe（Windows 窗体）大约为 1Mb，如果这有什么不同的话。

**2\. 结果**

在调试模式下，我的经过时间约为 200 毫秒，而在发布模式下则需要约 1.2 秒。

**3\. 附加信息**

奇怪的是，当我尝试在该解决方案中将其他项目设置为启动项目时，因为在这种情况下它工作得很快（与上面的代码完全相同）。

**4\. 快速破解**

为了尽快修复这个错误，我在我的解决方案中创建了一个新的 .exe 启动项目，它通过引用我的第一个入口项目来实例化并运行主应用程序表单。在这种情况下，它再次运行得很快，我的入口 exe 现在只有 24kb 大，只包含一个静态 Main 方法。

有没有人遇到过类似的行为？如果我在其他地方偶然发现了这个，通过查看上面的代码，我可能会假设某处有一个静态初始化程序，在一个单独的线程中做大量的工作（但这里不是这种情况，我没有那个东西），而且仅在发布版本中运行？

**[编辑]**更多信息：我知道 XmlSerializer 在运行时生成 IL 代码，但我的实际问题是为什么它在这种情况下比在其他情况下工作得慢。当我只对实际的序列化进行基准测试时，Release 的速度会慢 3 倍（但前提是我从最初的项目中运行它）。

**[更新]**现在最奇怪的部分是：经过几个修改/重建步骤后，我的新入口项目开始表现得像第一个 - 启动缓慢，加载缓慢。我更改了项目名称和 GUID 并重建了它，它再次快速运行。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-04-21T09:13:18.677

我认为这可能是因为 XmlSerializer 在启动时在发布模式下执行 NGEN-ish 工作，而不是在调试模式下。参见例如

[http://blogs.msdn.com/billwert/archive/2008/02/23/use-of-sgen-exe-to-avoid-common-xmlserializer-performance-pitfalls.aspx](http://blogs.msdn.com/billwert/archive/2008/02/23/use-of-sgen-exe-to-avoid-common-xmlserializer-performance-pitfalls.aspx)

了解一些细节。

# version-control - 从命令行更改更改集的属性

> ID：771733
> 
> 赞同：1
> 
> 时间：2009-04-21T09:07:22.810
> 
> 标签：version-control, aegis

我尝试使用`aegis -change_attributes`来更改我当前更改集的brief_description，但它没有用。

```
aegis -change_attributes description="test" 
```

我应该怎么做才能完成这项工作？

编辑：我正在寻找的命令是

```
aegis -change_attributes brief_description="$DESC"; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2010-03-16T11:28:07.770

由于没有给出答案（很长一段时间），我添加了我在评论中给出的解决方案，作为分析器：

如果要设置广泛的描述，上述命令是正确的。如果只想设置简要描述“aegis -change_attributes brief_description="$DESC"" 必须使用

# iphone - 在计时器结束时播放短声音？

> ID：771734
> 
> 赞同：1
> 
> 时间：2009-04-21T09:07:32.250
> 
> 标签：iphone, objective-c

在我的应用程序中，我有一个倒计时的计时器，当它停止时会显示图像并播放声音。

声音是这样加载的：

NSString *path = [[NSBundle mainBundle] pathForResource:@"scream" ofType:@"wav"]; AudioServicesCreateSystemSoundID((CFURLRef)[NSURL fileURLWithPath:path], &soundID);

在计时器结束时像这样玩：

AudioServicesPlaySystemSound(soundID);

我的问题是声音没有按时播放。即使声音实例在图像之前被调用，图像也会出现在声音之前。这仅在第一次播放声音时发生。声音在 viewDidLoad 方法中加载。

有没有更好的方法，或者我做错了什么？

谢谢...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-21T16:05:39.077

扬声器通电时声音可能会延迟（对于第一个声音）。如果是这样，也许您可​​以通过早点播放不同的、不明显的声音来解决它，以便在您请求“真实”声音时扬声器准备就绪。

# iphone - 如何获取类和运行时信息？

> ID：771735
> 
> 赞同：6
> 
> 时间：2009-04-21T09:07:54.680
> 
> 标签：iphone, objective-c, cocoa-touch, xcode, debugging

出于调试目的，我想在控制台中显示尽可能多的类信息，以及可能的运行时信息（类/函数在哪个线程中运行等）。

有没有一种简单的方法可以使用函数、变量甚至（外部）框架来做到这一点？

PS：我正在使用 Cocoa Touch。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-04-21T18:18:07.307

在一个类中，如果你重载`-(NSString *)description`方法，你可以很容易地记录类信息`NSLog(@"%@", some_object);`

这是一个虚构的例子：

```
-(NSString *)description
{
    return [NSString stringWithFormat:@"%@, %@, %d", 
                                      [super description], 
                                      class.object_ivar, 
                                      class.int_ivar];
} 
```

您可以使用标准 C 宏来获取名称、文件、行号等内容...使用 NSThread 类来获取有关正在调用该方法的线程的信息。

我在推特上发布了这个。 [http://twitter.com/kailoa/status/1349928820](http://twitter.com/kailoa/status/1349928820) 如果您对更多此类花絮感兴趣，请随时关注我。我试着定期把它们放上去。

```
#define METHOD_LOG (NSLog(@"%@ %s\n%@", NSStringFromSelector(_cmd), __FILE__, self)) 
```

# python - 从 AIR 应用程序调用 python 脚本？

> ID：771738
> 
> 赞同：1
> 
> 时间：2009-04-21T09:09:18.860
> 
> 标签：python, flex3, air

我们如何使用 AIR 1.5 调用 python 脚本？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-21T09:12:14.483

您不能从 AIR 应用程序中直接调用系统命令或运行可执行文件（python 解释器）。如果可以分享您到底想做什么，也许我们可以提出替代方案。

如果从 AIR 中运行可执行文件真的很重要（这两个真的很重要），请查看 CommandProxy 演示。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-21T09:14:42.903

例如通过 AMF： http: [//pyamf.org/](http://pyamf.org/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2010-10-09T04:54:56.387

Air 2.0 有一个本地进程 API。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2009-04-21T09:38:38.163

假设，Adobe Alchemy 技术可能允许您将 Python 解释器移植到 Flash。

尽管我严重怀疑这是您要使用的方法。根据任务，应该有更简单的解决方案。

# oracle - ADO.NET，在没有事先提交或回滚的情况下关闭 OracleConnection：它会泄漏吗？

> ID：771739
> 
> 赞同：3
> 
> 时间：2009-04-21T09:09:36.003
> 
> 标签：oracle, ado.net, transactions, oracleclient

假设我正在执行以下操作：

```
using (OracleConnection conn = new OracleConnection(connStr))
{
    OracleTransaction trans = conn.BeginTransaction();
    OracleCommand command = new OracleCommand(cmdTxt, conn, trans);
    // this statement is executed in a transaction context:
    command.ExecuteNonQuery();
}
// the using statement will dispose and thus close the connection.
// a rollback is done implicitly 
```

虽然我没有执行`transaction.Rollback()`，但我的测试表明回滚是隐式完成的。

我的问题是：这段代码会泄漏连接还是其他什么？

Edit1：我是`System.Data.OracleClient`命名空间。

Edit2：这是一个人为的示例代码。更现实的情况是在 using 语句中发生异常并且该`Commit()`语句尚未执行时。

Edit3：从答案我认为这是有利的：

```
using (OracleConnection conn = new OracleConnection(connStr))
using (OracleTransaction trans = conn.BeginTransaction())
using (OracleCommand command = new OracleCommand(cmdTxt, conn, trans))
{
    command.ExecuteNonQuery();
    trans.Commit();
} 
```

应该干净地处理任何东西并弄清楚发生了什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-21T09:18:15.030

它不会泄漏。using 子句保证 OracleConnection 将被释放，无论命令是成功完成还是因异常而失败，它都会带上事务。

但是由于 OracleTransaction 是 IDisposable，因此在事务周围放置 using 子句可能也是一种很好的形式，例如

```
using (OracleTransaction trans = conn.BeginTransaction())
{
  // ...
  trans.Commit();
} 
```

这将使代码的读者更清楚地知道正在清理事务；特别是，如果后续增强在同一连接上执行多个事务，则可能变得很重要。

此外，根据下面 John 的评论，您应该在 OracleCommand 周围放置一条 using 语句，以便及时清理它。

# .net - 加快 ASP.NET 中的构建时间

> ID：771743
> 
> 赞同：11
> 
> 时间：2009-04-21T09:11:54.080
> 
> 标签：.net, asp.net, visual-studio-2008, msbuild, build-process

我目前参与了一个 ASP.NET 项目，解决方案中有大约 40 个项目。我们在克隆的 Virtual PC 环境中进行所有开发，因此所有开发人员都有相同的设置。这一切都很好，管理依赖关系很容易，但是构建解决方案非常慢。Virtual PC 只能使用一个 CPU，所以我实际上只使用了一半的计算机资源。

从构建到完整的页面加载需要整整 3 分钟。随着项目的增长，情况每天都在变得更糟。修复简单的事情开始需要很长时间，就个人而言，我一直在等待，因为在计算机编译时我无法真正工作。

有什么方法可以将我的构建分布在多台计算机上以加快构建过程？

SSD 会显着改善我的构建时间吗？

还有其他加快构建速度的方法吗？

**注意**：我曾尝试使用*ngen*预编译静态依赖项，但后来得知 ASP.NET 不支持*ngen*。我使用 Visual Studio 2008，虚拟环境中没有防病毒软件。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-11-25T20:32:24.290

通过执行以下操作，您可以大大减少等待使用 ASP.NET 构建的时间：

*   使用新的“optimizeCompilations”标志。它会告诉 .NET 不要仅仅因为您更改了一个项目/dll 而重建整个项目。如果您有 40 个项目并且您不使用它，那么每次您在一个项目中更改一个简单方法时，.NET 都会尝试编译所有其他项目和 dll。使用新标志（加上热修复程序的安装），您将在开发过程中看到整体性能大幅提升。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-11-25T21:51:01.017

下面是另一个加快 ASP.NET 构建时间的技巧：

*   如果您有足够的内存，请创建一个 RamDisk 并将您的 ASP.NET 临时文件指向这个基于 ram 的磁盘。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-04-21T09:22:13.743

是否每次都需要重建所有 40 个项目。

您可以配置在解决方案配置设置中构建的内容。

即，如果您的更改仅在您的 WebUI 项目中，而其他 39 个项目未更改，您可以创建一个构建配置，其中仅重新构建您的 Web 应用程序。

*   查看配置下拉菜单
*   点击“配置管理器”
*   在“活动解决方案配置”下拉菜单中单击“新建”
*   创建从调试配置复制的新配置
*   在您的新配置中，取消选中所有项目构建，但您已更改的项目除外

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-04-21T09:38:31.333

Scott Gu 有一篇非常有用的帖子：

[提示/技巧：使用 VS 2005 优化 ASP.NET 2.0 Web 项目构建性能](http://weblogs.asp.net/scottgu/archive/2006/09/22/Tip_2F00_Trick_3A00_-Optimizing-ASP.NET-2.0-Web-Project-Build-Performance-with-VS-2005.aspx)

Scott 也有另一篇关于此硬盘速度的文章，这也对 Visual Studio 的一般性能产生了影响：

[提示/技巧：硬盘驱动器速度和 Visual Studio 性能](http://weblogs.asp.net/scottgu/archive/2007/11/01/tip-trick-hard-drive-speed-and-visual-studio-performance.aspx)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-04-21T10:26:23.197

不要在您的解决方案中放置这么多项目。仅当代码在不同进程或不同机器上运行时才创建新项目。在大多数情况下，创建这么多项目是没有用的。项目数量是 msbuild 中最显着的减速。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-08-23T05:29:03.780

What we did at our company is to use file reference, so only the changed projects need to be built, and at any given time there is no more than 10 projects in my solution, mostly 2~3 gets built.

We also build our trunk for each check-in, and have batch file for developers to pull the most recent dlls.

Of course, this doesn't stop the painful assembly reference error from happening, but they become more of a nuisance than problem after a while.

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2009-04-21T09:35:25.770

您没有提及您的 Visual Studio 版本，但如果是 2005 年，您可能需要考虑升级到 2008 年。在我的情况下，这减少了大型（30 多个项目）解决方案的构建时间。

另一种选择是预先构建许多不再更改的库并引用已编译的 dll 而不是项目。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2009-04-21T09:37:31.647

我们也有类似的情况，我发现我们的虚拟机受到严重限制，因此虽然它们都运行在单个 CPU 上，但不允许它们充分利用该 CPU。我设法让 3 个虚拟机在一个物理机上运行，​​以使它们的运行速度提高 100%。

* * *

我还会考虑尝试减少您的项目数量。我们的主要解决方案有 40 个项目，我一直在慢慢整合这些项目，并确保新开发项目尽可能适合现有项目。造成这种情况的主要罪魁祸首是 Web 服务，每个服务最初都是在单独的项目中创建的。我现在将所有新的 web 服务添加到一个项目中，并慢慢地移动其他的。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2009-04-21T10:11:05.623

您还可以考虑切换到使用多个处理器的 VMware Workstation。我目前正在使用具有两个双处理器 VM 的设置，并且所有四个都被使用。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2009-04-21T09:42:15.003

您是否尝试过调整虚拟 PC？

[http://www.windowsnetworking.com/articles_tutorials/Tuning-Virtual-PC-Performance.html](http://www.windowsnetworking.com/articles_tutorials/Tuning-Virtual-PC-Performance.html)

旧文章，但要点仍然正确。

在类似的情况下，我发现为 VPC 磁盘映像配备一个单独的硬盘可以显着提高性能，尤其是在消除一些限制时。

也许问题不在于 Visual Studio，而只是编译是资源密集型的。

# nhibernate - Fluent NHibernate 对数千个对象执行单行选择以链接到父对象

> ID：771747
> 
> 赞同：3
> 
> 时间：2009-04-21T09:12:44.873
> 
> 标签：nhibernate, fluent-nhibernate

以下是我的问题域的简化。我们有一系列**交易**，每个交易日都会在**估值中记录。**

我们过滤用于特定日期的**估价**列表，但要针对每个**估价行填充****交易，NHibernate 会在估价表中对****交易**表中的大约 50k 行触发单行选择。我怎样才能改变这一点，以便 NHibernate 在交易表上进行一次选择？

 ****```
CREATE TABLE Trades
(   TradeId         INT
,   InstrumentType  VARCHAR(20)
,   TradeDate       DATETIME

,   PRIMARY KEY
(   TradeId )   )

CREATE TABLE Valuations
(   TradeId         INT
,   ValueDate       DATETIME
,   PresentValue    NUMERIC(12,4)

,   PRIMARY KEY
(   TradeId
,   ValueDate   )   ) 
```

.

```
class Trade
{
    public int TradeId;
    public string InstrumentType;
    public DateTime TradeDate;
}

class Valuation
{
    public int TradeId;
    public DateTime ValueDate;
    public double PresentValue;
    public Trade Trade;
} 
```

.

```
class ValuationMap : ClassMap<Valuation>
{
    public ValuationMap()
    {
        WithTable("Valuations");
        UseCompositeId()
            .WithKeyProperty(x => x.ValueDate)
            .WithKeyProperty(x => x.TradeId);

        Map(x => x.PresentValue);

        References(x => x.Trade, "TradeId")
            .LazyLoad()
            .Cascade.None()
            .NotFound.Ignore()
            .FetchType.Join();
    }
}

class TradeMap : ClassMap<Trade>
{
    public TradeMap()
    {
        WithTable("Trades");

        Id( x => x.TradeId );

        Map(x => x.InstrumentType);
        Map(x => x.TradeDate);
        Map(x => x.Valuations);
    }
} 
```

.

```
public List<Valuation> GetValuations(DateTime valueDate)
{
    return (from p in _nhibernateSession.Linq<Valuation>()
            where p.ValueDate == valueDate
            select p).ToList();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-21T20:35:56.867

您还应该查看批量获取。这是从[Nhib 手册](http://209.85.229.132/search?q=cache:D5O72SIzQSIJ:www.hibernate.org/hib_docs/nhibernate/html/performance.html+nhibernate+batching&cd=2&hl=en&ct=clnk&gl=uk)中引用的-实际上是谷歌的缓存，因为该站点似乎因维护 atm 而关闭：

> 假设您在运行时有以下情况：您在一个 ISession 中加载了 25 个 Cat 实例，每个 Cat 都有一个对其所有者的引用，即一个 Person。Person 类使用代理lazy="true" 进行映射。如果您现在遍历所有猫并获取每个猫的所有者，NHibernate 将默认执行 25 条 SELECT 语句，以检索代理的所有者。您可以通过在 Person 的映射中指定批量大小来调整此行为：

```
<class name="Person" lazy="true" batch-size="10">...</class> 
```

> NHibernate 现在将只执行三个查询，模式为 10、10、5。您可以看到批量获取是一个盲目的猜测，就性能优化而言，它取决于特定 ISession 中的单元化代理的数量。

# c# - 一个好的内容格式库的建议

> ID：771755
> 
> 赞同：0
> 
> 时间：2009-04-21T09:16:33.380
> 
> 标签：c#, open-source, formatting

我正在尝试在我的网站中实现内容格式化功能 - 也就是说，我想让我的用户输入例如 [b]bold[/b] 或（如 SO）* * bold * * 并以**bold**结尾。我还希望支持标题、链接、图像等。

我在这方面工作得越多，我就越觉得自己在重新发明轮子。如果可能的话，我想找到一个我可以使用或至少“借用”的开源库。所以我的问题是：
**你推荐什么内容格式化库？为什么？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-21T09:22:06.240

Stack Overflow 使用[Markdown](http://daringfireball.net/projects/markdown/)，有许多可用的开源格式库。

# windows - Cygwin 和 MinGW 有什么区别？

> ID：771756
> 
> 赞同：724
> 
> 时间：2009-04-21T09:16:37.470
> 
> 标签：windows, cygwin, mingw

我想让我的 C++ 项目跨平台，我正在考虑使用 Cygwin/MinGW。但是它们之间有什么区别？

另一个问题是我是否能够在没有 Cygwin/MinGW 的系统上运行二进制文件？

* * *

## 回答 #1

> 赞同：706
> 
> 时间：2009-04-27T03:15:41.377

**作为简化，它是这样的：**

*   在 Cygwin 中编译一些东西，你正在*为 Cygwin*编译它。

*   在 MinGW 中编译一些东西，你正在*为 Windows*编译它。

**关于 Cygwin**

Cygwin 是一个兼容层，通过模拟基于 Unix 的操作系统提供的许多基本接口，例如管道、Unix 样式的文件和目录访问等，可以轻松地将简单的基于 Unix 的应用程序移植到 Windows。由[POSIX](https://en.wikipedia.org/wiki/POSIX)标准记录。如果您有使用这些接口的现有源代码，您可以在进行很少甚至没有更改后编译它以与 Cygwin 一起使用，从而大大简化了移植简单的基于 IO 的 Unix 代码以在 Windows 上使用的过程。

当您分发您的软件时，接收者需要将它与 Cygwin 运行时环境（由文件提供`cygwin1.dll`）一起运行。您可以将其与您的软件一起分发，但您的软件必须遵守其开源许可证。即使只是将您的软件与其链接，但单独分发 dll，仍然可以对您的代码施加许可证限制。

**关于明威**

MinGW 旨在简单地成为 GNU 的 Windows 开发工具的一个端口。它不尝试模拟或提供与 Unix 的全面兼容性，而是提供可在 Windows 中本地使用的 GNU Compiler Collection、GNU Binutils 和 GNU Debugger 版本。它还包括允许在代码中使用 Windows 原生 API 的头文件。

因此，您的应用程序需要使用 Windows API 专门针对 Windows 进行编程，如果创建它以依赖于在标准 Unix 环境中运行并使用 Unix 特定功能，这可能意味着重大改变。默认情况下，在 MinGW 的 GCC 中编译的代码将编译为本地 Windows X86 目标，包括 .exe 和 .dll 文件，尽管您也可以使用正确的设置进行交叉编译，因为您基本上使用的是 GNU 编译器工具套件。

[MinGW 是在 Windows 上使用Microsoft Visual C++](https://en.wikipedia.org/wiki/Visual_C%2B%2B)编译器及其相关链接/制作工具的免费开源替代方案。在某些情况下，可以使用 MinGW 编译旨在使用 Microsoft Visual C++ 编译的内容，而无需进行太多修改。

尽管 MingW 包含一些头文件和接口代码，允许您的代码与 Windows API 交互，但与常规标准库一样，这不会对您创建的软件施加许可限制。

**其他注意事项**

对于任何重要的软件应用程序，例如使用图形界面、多媒体或访问系统上的设备的应用程序，您离开了 Cygwin 可以为您做的事情的界限，需要进一步的工作来使您的代码跨平台。但是，可以通过使用跨平台工具包或框架来简化此任务，这些工具包或框架允许编码一次并为任何平台成功编译您的代码。如果您从一开始就使用这样的框架，您不仅可以减少移植到另一个平台时的麻烦，而且您可以在所有平台上使用相同的图形小部件——窗口、菜单和控件——如果你正在编写一个GUI 应用程序，并让它们对用户来说是原生的。

例如，开源[Qt 框架](https://en.wikipedia.org/wiki/Qt_(framework))是一个流行且全面的跨平台开发框架，允许构建跨操作系统（包括 Windows）工作的图形应用程序。还有其他这样的框架。除了大型框架之外，还有数千个更专业的软件库，它们支持多个平台，让您不必担心为不同平台编写不同的代码。

当您从一开始就开发跨平台软件时，通常没有任何理由使用 Cygwin。在 Windows 上编译时，您通常的目标是使您的代码能够使用 MingW 或 Microsoft Visual C/C++ 进行编译，或两者兼而有之。在 Linux/*nix 上编译时，您通常会直接使用 GNU 编译器和工具对其进行编译。

* * *

## 回答 #2

> 赞同：329
> 
> 时间：2009-04-21T09:21:20.657

Cygwin 试图在 Windows 上创建一个完整的 UNIX/POSIX 环境。为此，它使用各种 DLL。尽管 GPLv3+ 涵盖了这些 DLL，但它们的许可证包含[一个例外](http://cygwin.com/licensing.html)，该例外不会强制派生作品被 GPLv3+ 涵盖。MinGW 是一个 C/C++ 编译器套件，它允许您在不依赖此类 DLL 的情况下创建 Windows 可执行文件 - 您只需要正常的 MSVC 运行时，它们是任何正常的 Microsoft Windows 安装的一部分。

您还可以获得一个类似 UNIX/POSIX 的小型环境，使用名为[MSYS](http://www.mingw.org/wiki/msys)的 MinGW 编译。它不具备 Cygwin 的所有功能，但非常适合想要使用 MinGW 的程序员。

* * *

## 回答 #3

> 赞同：145
> 
> 时间：2009-04-27T06:28:41.163

为了添加其他答案，Cygwin 附带了 MinGW 库和头文件，您可以通过使用 -mno-cygwin 标志和 gcc 来编译而不链接到 cygwin1.dll。我非常喜欢使用普通的 MinGW 和 MSYS。

* * *

## 回答 #4

> 赞同：63
> 
> 时间：2009-04-21T09:21:12.573

[维基百科在这里](http://en.wikipedia.org/wiki/Mingw#Comparison_with_Cygwin)做了一个比较。

来自 Cygwin 的[网站](http://www.cygwin.com/)：

> *   Cygwin 是一个类似 Linux 的 Windows 环境。它由两部分组成： 一个 DLL (cygwin1.dll)，它充当 Linux API 仿真层，提供大量 Linux API 功能。
> *   一组提供 Linux 外观的工具。

来自 Mingw 的[网站](http://www.mingw.org/wiki/MinGW)：

> MinGW（“Minimalistic GNU for Windows”）是一组可免费使用和可免费分发的 Windows 特定头文件和导入库，并结合 GNU 工具集，允许生成不依赖任何第 3 方 C 运行时 DLL 的本机 Windows 程序

* * *

## 回答 #5

> 赞同：49
> 
> 时间：2009-04-21T09:20:21.657

Cygwin 使用 DLL、cygwin.dll（或者可能是一组 DLL）在 Windows 上提供类似 POSIX 的运行时。

MinGW 编译为本机 Win32 应用程序。

如果您使用 Cygwin 构建某些东西，那么您安装它的任何系统也都需要 Cygwin DLL。MinGW 应用程序不需要任何特殊的运行时。

* * *

## 回答 #6

> 赞同：45
> 
> 时间：2011-04-01T00:06:02.757

阅读这些已回答的问题以了解 Cygwin 和 MinGW 之间的区别。

* * *

问题#1：我想创建一个应用程序，我编写一次源代码、编译一次并在任何平台（例如Windows、Linux 和Mac OS X ......）上运行它。

> 答案 #1：用 JAVA 编写源代码。一次编译源代码并在任何地方运行它。

* * *

问题#2：我想创建一个我编写一次源代码的应用程序，但是我为任何平台（例如Windows、Linux 和Mac OS X ...）单独编译源代码是没有问题的。

> 答案 #2：用 C 或 C++ 编写源代码。仅使用标准头文件。为任何平台使用合适的编译器（例如，适用于 Windows 的 Visual Studio、适用于 Linux 的 GCC 和适用于 Mac 的 XCode）。请注意，您不应使用任何高级编程功能在所有平台上成功编译源代码。如果您不使用 C 或 C++ 标准类或函数，则您的源代码无法在其他平台上编译。

* * *

问题#3：在回答问题#2 时，很难为每个平台使用不同的编译器，是否有任何跨平台编译器？

> 答案 #3：是的，使用 GCC 编译器。它是一个跨平台编译器。要在 Windows 中编译您的源代码，请使用**MinGW**，它为 Windows 提供 GCC 编译器并将您的源代码编译为本地 Windows 程序。不要使用任何高级编程功能（如 Windows API）在所有平台上成功编译您的源代码。如果您使用 Windows API 函数，您的源代码不会在其他平台上编译。

* * *

问题 #4：C 或 C++ 标准头文件不提供任何高级编程功能，如多线程。我能做些什么？

> 答案 #4：您应该使用 POSIX（便携式操作系统接口 [for UNIX]）标准。它提供了许多高级编程功能和工具。许多操作系统完全或部分兼容 POSIX（如 Mac OS X、Solaris、BSD/OS 和...）。一些操作系统虽然没有被官方认证为兼容 POSIX，但在很大程度上符合（如 Linux、FreeBSD、OpenSolaris 和...）。**Cygwin**为 Microsoft Windows 提供了一个很大程度上符合 POSIX 标准的开发和运行时环境。

* * *

因此：

## 要在 Windows 中使用 GCC 跨平台编译器，请使用 MinGW。

## 要在 Windows 中使用 POSIX 标准高级编程功能和工具，请使用 Cygwin。

* * *

## 回答 #7

> 赞同：39
> 
> 时间：2016-07-06T18:48:08.627

从移植 C 程序的角度来看，理解这一点的一个好方法是举一个例子：

```
#include <sys/stat.h>
#include <stdlib.h>

int main(void)
{
   struct stat stbuf;
   stat("c:foo.txt", &stbuf);
   system("command");
   printf("Hello, World\n");
   return 0;
} 
```

如果我们`stat`改为`_stat`，我们可以用 Microsoft Visual C 编译这个程序。我们也可以用 MinGW 和 Cygwin 编译这个程序。

在 Microsoft Visual C 下，该程序将链接到一个 MSVC 可再发行运行时库：`mxvcrtnn.dll`，其中`nn`是某个版本后缀。要发布这个程序，我们必须包含那个 DLL。该 DLL 提供`_stat`,`system`和`printf`. （我们还可以选择静态链接运行时。）

在 MinGW 下，该程序将链接到`msvcrt.dll`，这是一个内部的、未记录的、未版本化的库，它是 Windows 的一部分，并且禁止应用程序使用。该库本质上是来自 MS Visual C 的可再发行运行时库的一个分支，供 Windows 本身使用。

在这两种情况下，程序都会有类似的行为：

*   该`stat`函数将返回非常有限的信息——例如，没有有用的权限或 inode 编号。
*   `c:file.txt`根据与 drive 关联的当前工作目录解析路径`c:`。
*   `system`用于`cmd.exe /c`运行外部命令。

我们也可以在 Cygwin 下编译程序。与 MS Visual C 使用的可再发行运行时类似，Cygwin 程序将链接到 Cygwin 的运行时库：`cygwin1.dll`（Cygwin 正确）和`cyggcc_s-1.dll`（GCC 运行时支持）。由于 Cygwin 现在在 LGPL 下，我们可以与我们的程序一起打包，即使它不是与 GPL 兼容的自由软件，并发布程序。

在 Cygwin 下，库函数的行为会有所不同：

*   该`stat`函数具有丰富的功能，在大多数字段中返回有意义的值。
*   该路径`c:file.txt`根本不被理解为包含驱动器号引用，因为`c:`后面没有斜杠。冒号被认为是名称的一部分，并以某种方式被破坏了。Cygwin 中没有针对卷或驱动器的相对路径的概念，没有“当前记录的驱动器”概念，也没有每个驱动器的当前工作目录。
*   该`system`函数尝试使用`/bin/sh -c`解释器。`/`Cygwin 将根据可执行文件的位置解析路径，并期望`sh.exe`程序与可执行文件位于同一位置。

Cygwin 和 MinGW 都允许您使用 Win32 函数。如果你想打电话`MessageBox`或`CreateProcess`，你可以这样做。`gcc -mwindows`您还可以在 MinGW 和 Cygwin 下使用 轻松构建不需要控制台窗口的程序。

Cygwin 不是严格意义上的 POSIX。除了提供对 Windows API 的访问之外，它还提供了自己的一些 Microsoft C 函数的实现（在`msvcrt.dll`可重新分发的`msvcrtnn.dll`运行时中找到的东西）。这方面的一个例子是`spawn*`函数族，如`spawnvp`. 这些是在 Cygwin 上代替`fork`and使用的好主意，因为它们更好地映射到没有.`exec``fork`

因此：

*   Cygwin 程序与 MS Visual C 程序一样“原生”，因为它需要库的伴奏。Windows 上的编程语言实现有望提供自己的运行时，甚至 C 语言实现。Windows 上没有供公众使用的“libc”。

*   MinGW 不需要第三方 DLL 的事实实际上是一个劣势；它依赖于 Visual C 运行时的未记录的、Windows 内部的分支。**MinGW 这样做是因为 GPL 系统库异常适用于`msvcrt.dll`，这意味着 GPL ed 程序可以使用 MinGW 编译和重新分发。**

*   由于与 POSIX 相比，它对 POSIX 的支持更广泛、更深入`msvcrt.dll`，因此 Cygwin 是迄今为止移植 POSIX 程序的优越环境。由于它现在属于 LGPL，它允许重新分发具有各种许可证（开源或闭源）的应用程序。 **Cygwin 甚至包含 VT100 仿真和`termios`，可与 Microsoft 控制台一起使用！使用 VT100 代码设置原始模式`tcsetattr`并使用 VT100 代码控制光标的 POSIX 应用程序将在`cmd.exe`窗口中正常工作。就最终用户而言，它是一个本机控制台应用程序，通过 Win32 调用来控制控制台。**

然而：

*   作为一个原生的 Windows 开发工具，Cygwin 有一些怪癖，比如路径处理对 Windows 来说是陌生的，对一些硬编码路径的依赖`/bin/sh`等问题。这些差异使 Cygwin 程序“非本地”。如果程序将路径作为参数或从对话框输入，Windows 用户希望该路径与其他 Windows 程序中的工作方式相同。如果它不能那样工作，那就有问题了。

**Plug：**在 LGPL 发布后不久，我启动了[Cygnal](http://www.kylheku.com/cygnal)（Cygwin 本地应用程序库）项目，以提供旨在解决这些问题的 Cygwin DLL 的分支。程序可以在 Cygwin 下开发，然后用 Cygnal 版本部署，`cygwin1.dll`无需重新编译。随着这个库的改进，它将逐渐消除对 MinGW 的需求。

当 Cygnal 解决了路径处理问题时，将有可能开发一个单独的可执行文件，该可执行文件在作为 Windows 应用程序与 Cygnal 一起发布时与 Windows 路径一起使用，并且在安装在 Cygwin 下时与 Cygwin 路径无缝`/usr/bin`协作。在 Cygwin 下，可执行文件将透明地使用`/cygdrive/c/Users/bob`. 在与 Cygnal 版本链接的本机部署中`cygwin1.dll`，该路径将毫无意义，但它会理解`c:foo.txt`.

* * *

## 回答 #8

> 赞同：31
> 
> 时间：2019-04-19T05:54:27.620

其他答案已经达到目标。我只想添加一个插图以便快速了解。

[![在此处输入图像描述](https://i.stack.imgur.com/RFhqo.png)](https://i.stack.imgur.com/RFhqo.png)

* * *

## 回答 #9

> 赞同：27
> 
> 时间：2013-10-05T15:29:45.020

**[维基百科说](https://en.wikipedia.org/wiki/MinGW#Comparison_with_Cygwin)：**

> `MinGW`从 1.3.3 版分叉而来`Cygwin`。尽管两者`Cygwin` 和`MinGW`都可以用于将`UNIX`软件移植到`Windows`，但它们有不同的方法：`Cygwin`旨在提供一个完整`POSIX layer` 的，提供对存在于`Linux`、`UNIX`和`BSD`变体上的多个系统调用和库的模拟。`POSIX layer` 运行在 之上，`Windows`在必要时牺牲性能以实现兼容性。因此，这种方法要求 `Windows`用 编写的程序`Cygwin`在必须与程序一起分发的 copyleft 兼容库之上运行，以及程序的`source code`. `MinGW`旨在通过直接提供本机功能和性能`Windows API calls`。不同于 `Cygwin`,`MinGW`不需要兼容层`DLL`，因此程序不需要与`source code`.
> 
> 因为`MinGW`是依赖`Windows API calls`，它不能提供一个完整的`POSIX API`；它无法编译一些`UNIX applications`可以用`Cygwin`. 具体来说，这适用于需要`POSIX`类似 的功能 的应用程序`fork()`，`mmap()`或者`ioctl()`那些期望在 `POSIX environment`. 使用`cross-platform library`本身已被移植到的应用程序`MinGW`，例如`SDL`, `wxWidgets`,`Qt`或`GTK+`, 通常会像 `MinGW`在`Cygwin`.
> 
> `MinGW`两者的结合`MSYS`提供了一个小型、独立的环境，可以将其加载到可移动媒体上，而无需在注册表或计算机上的文件中留下条目。`Cygwin`Portable 提供了类似的功能。通过提供更多功能，`Cygwin` 安装和维护变得更加复杂。
> 
> 也可以`cross-compile Windows applications`与 `MinGW-GCC under POSIX systems`. 这意味着开发人员无需安装 Windows`MSYS`即可编译`Windows`无需`Cygwin`.

* * *

## 回答 #10

> 赞同：15
> 
> 时间：2009-04-27T02:15:57.497

不要忽视**AT&T 的[U/Win](https://github.com/att/uwin)**软件，它旨在帮助您在 Windows 上编译 Unix 应用程序（最新版本 - 2012-08-06；使用 Eclipse Public License，版本 1.0）。

像 Cygwin 一样，它们必须与库竞争。在他们的情况下`POSIX.DLL`。[AT&T 的家伙是了不起的工程师（为您带来 ksh 和dot](http://graphviz.org)的同一组），他们的东西值得一试。

* * *

## 回答 #11

> 赞同：11
> 
> 时间：2009-04-21T09:19:27.837

Cygwin 模拟整个 POSIX 环境，而 MinGW 是仅用于编译的最小工具集（编译本机 Win 应用程序。）因此，如果您想让您的项目跨平台，两者之间的选择是显而易见的，MinGW。

尽管您可能会考虑在 Windows 上使用 VS，在 Linux/Unices 上使用 GCC。大多数开源项目都是这样做的（例如 Firefox 或 Python）。

* * *

## 回答 #12

> 赞同：11
> 
> 时间：2015-09-18T12:32:16.763

要在非自由/专有/闭源应用程序中使用 Cygwin，您需要花费数万美元从 Red Hat购买“[许可证”；](http://www.redhat.com/services/custom/cygwin/)这以相当高的成本使[标准许可条款无效。](https://cygwin.com/licensing.html)谷歌“cygwin license cost”并查看前几个结果。

对于 mingw，不会产生这样的成本，并且许可证（PD、BSD、MIT）非常宽松。您最多*可能*需要在您的应用程序中提供许可证详细信息，例如使用 mingw64-tdm 时所需的 winpthreads 许可证。

**编辑感谢 Izzy Helianthus：**商业许可证不再可用或不再需要，因为在 Cygwin 的 winsup 子目录中找到的 API 库[现在](https://www.redhat.com/en/about/blog/cygwin-library-now-available-under-gnu-lesser-general-public-license)在 LGPL 下分发，而不是完整的 GPL。

* * *

## 回答 #13

> 赞同：9
> 
> 时间：2009-04-21T09:23:24.537

请注意，实用程序行为可能在两者之间真正有所不同。

例如，Cygwin tar 可以分叉——因为 DLL 支持 fork()——而 mingw 版本不能。这是尝试从源代码编译 mysql 时出现的问题。

* * *

## 回答 #14

> 赞同：7
> 
> 时间：2014-03-06T04:19:18.250

Cygwin 旨在为 Windows 提供或多或少完整的 POSIX 环境，包括旨在提供成熟的类 Linux 平台的广泛工具集。相比之下，MinGW 和 MSYS 提供了一个轻量级、极简的类似 POSIX 的层，只有更重要的类似`gcc`和`bash`可用的工具。由于 MinGW 更简约的方法，它不提供 Cygwin 提供的 POSIX API 覆盖程度，因此无法构建某些可以在 Cygwin 上编译的程序。

就两者生成的代码而言，Cygwin 工具链依赖于动态链接到大型运行时库，`cygwin1.dll`而 MinGW 工具链将代码编译为二进制文件，动态链接到 Windows 原生 C 库`msvcrt.dll`以及静态链接到`glibc`. 因此，Cygwin 可执行文件更紧凑，但需要单独的可再发行 DLL，而 MinGW 二进制文件可以独立发布，但往往更大。

基于 Cygwin 的程序需要单独的 DLL 才能运行这一事实也导致了许可限制。Cygwin 运行时库在 GPLv3 下获得许可，对于具有 OSI 兼容许可证的应用程序有一个链接例外，因此希望围绕 Cygwin 构建闭源应用程序的开发人员必须从 Red Hat 获得商业许可证。另一方面，MinGW 代码可以在开源和闭源应用程序中使用，因为标头和库是许可许可的。

* * *

## 回答 #15

> 赞同：3
> 
> 时间：2009-04-21T09:21:41.870

[Cygwin](http://en.wikipedia.org/wiki/Cygwin)是用于 Microsoft Windows 的类 Unix 环境和命令行界面。

[Mingw](http://en.wikipedia.org/wiki/Mingw)是 GNU 编译器集合 (GCC) 到 Microsoft Windows 的本机软件端口，以及一组可免费分发的导入库和用于 Windows API 的头文件。MinGW 允许开发人员创建本地 Microsoft Windows 应用程序。

`mingw`您可以在没有环境的情况下运行生成的二进制文件`cygwin`，前提是所有必要的库 (DLL) 都存在。

* * *

## 回答 #16

> 赞同：3
> 
> 时间：2014-02-27T23:37:48.470

`Cygwin`使用兼容层，`MinGW`而是原生的。这是主要区别之一。

* * *

## 回答 #17

> 赞同：3
> 
> 时间：2020-10-01T17:14:56.680

```
 MinGW (or MinGW-w64)               Cygwin
   --------------------               ------

   Your program written        Your program written
  for Unix and GNU/Linux      for Unix and GNU/Linux

             |                           |
             |                           |
             V                           V

    Heavy modifications       Almost no modifications

             |                           |
             |                           |
             V                           V

        Compilation                 Compilation 
```

```
Program compiled with Cygwin ---> Compatibility layer ---> Windows API

Program compiled with MinGW (or MingGW-w64) -------------> Windows API 
```

# javascript - ASP.NET MVC 从类库中共享 JavaScript 文件

> ID：771768
> 
> 赞同：3
> 
> 时间：2009-04-21T09:20:10.127
> 
> 标签：javascript, asp.net-mvc

我正在构建两个 ASP.NET MVC 站点。我希望能够在两个站点之间共享一定数量的内容。我创建了一个类库，并且能够分享我需要的大部分内容。但是我真的很想知道如何共享图像和 JavaScript 文件等内容，因此我不必在两个网站之间复制它们。

如果有人对此有任何好的想法，我将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-25T06:32:06.290

如果您有一个通用程序集，您可以考虑将您的内容嵌入为 Web 资源。更多关于网络资源的信息可以在[这里](http://support.microsoft.com/kb/910442)找到。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-04-21T09:42:05.457

您可以将 CDN（内容交付网络）用于共享文件。

```
<script src="http://shared.yourdomain/stuff.js" type="text/javascript"></script> 
```

这与 SO 使用的技巧相同，它对加载时间也有好处，因为浏览器每个域只会打开 2 个连接。使用 CDN 意味着您可以为每个使用的 CDN 添加另外 2 个连接。这可以包括您自己网站上的子域。因此，您可以拥有 js.yourdomain 和 img.yourdomain 并且它们都被视为不同。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-21T09:31:39.163

对于 javascript，您可以直接将 url 作为 JavaScript 的 src。例如

```
<script src="some_url_path_/global.js" type="text/javascript"></script> 
```

要共享课程，我建议使用 Web 服务，而不是允许访问课程文件源。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-04-21T09:53:23.573

Javascript 文件和图像可以托管在一个共同的位置——对于标准的 javascript 文件（jquery 库等），正如 Kieron 指出的那样，使用 CDN 是一个好主意——在那里你会得到很多好处。

对于其他内容文件，您可以将它们放在两个站点都可以访问的公共 url 上 - 例如，两个站点位于不同的 url 上：

```
http://site1.somedomain.com/default.aspx
http://site2.somedomain.com/default.aspx 
```

他们都可以使用来自共同位置的内容，例如：

```
http://commoncontent.somedomain.com/images/bigimage1.jpg
http://commoncontent.somedomain.com/scripts/customjavascript1.js 
```

当然，同样的事情也适用于虚拟目录而不是 fqdn。

# c# - 方括号之间的文字含义

> ID：771772
> 
> 赞同：13
> 
> 时间：2009-04-21T09:20:41.983
> 
> 标签：c#, attributes

`[]`例如，我见过很多使用 . 的 C# 程序，`[STAThread]`然后代码如下。另一个经典的例子是`[DLLImport]`.

我知道什么`STAThread`意思，但我的问题是方括号的意义是什么，基本上它们告诉编译器什么？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2009-04-21T09:21:45.070

这是一个属性。属性是一种元数据形式，您可以将其附加到各种代码元素：类、方法、程序集等。

某些属性对 C# 编译器具有特殊意义，例如`[Serializable]`可能告诉编译器发出一些可以序列化类实例的代码（我说“可能”，因为我不知道 C# 编译器的内部工作原理）。

您还可以创建自己的属性（通过继承`System.Attribute`）。使用反射，您可以在运行时从属性中提取信息。

一个简单的例子是创建一个属性来指定在显示对象的属性时在 HTML 表单中使用哪种类型的输入字段。

一些链接：

*   [书籍属性章节](http://oreilly.com/catalog/progcsharp/chapter/ch18.html)
*   [属性概述 (MSDN)](http://msdn.microsoft.com/en-us/library/xtwkdas5.aspx)
*   [https://stackoverflow.com/search?q=C%23+attributes](https://stackoverflow.com/search?q=C%23+attributes)
*   [http://www.google.com/search?q=C%23+attributes](http://www.google.com/search?q=C%23+attributes)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-04-21T09:23:20.853

这些是[属性](http://msdn.microsoft.com/en-us/library/z0w1kczw.aspx)。

属性有很多用途 -`[Obsolete]`将方法标记为过时，编译器会警告您。其他人喜欢`[DebuggerNonUserCode]`什么都不告诉编译器，让调试器知道标记方法中的代码是自动生成的。

您还可以创建自己的属性并使用它们来标记任何类型的元数据。例如，您的 Customer 对象可能有一个属性`[MarketingInformation("Customer is rich! Milk him good!")].`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-21T09:23:44.970

有关 .Net 中属性的信息，请参见此处：

[http://msdn.microsoft.com/en-us/library/5x6cd29c.aspx](http://msdn.microsoft.com/en-us/library/5x6cd29c.aspx)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-04-21T09:24:46.950

它们是属性，将元数据添加到它们正在装饰的任何内容中。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-04-21T09:27:48.330

这些被称为代码属性。属性用于标记具有通常用于指定执行期间行为的属性的代码。它们通常用于标记方法、属性和参数。在执行代码期间，将执行称为“反射”的操作来检查代码。反射告诉编译器观察并遵守您指定的任何指令作为编码器标记属性对代码。

A good example would be the [Serializable] attribute. This attribute when marked above a class indicates to the compiler that it can be serialized for the purposes of persisting the class instance or for transmitting across a medium such as SOAP web services.

See the following article: [link text](http://www.devarticles.com/c/a/ASP.NET/Demonstrating-Attributes-and-Reflection-in-.NET/1/)

# c# - 优化列表 .Sort（比较器）

> ID：771779
> 
> 赞同：3
> 
> 时间：2009-04-21T09:22:29.310
> 
> 标签：c#, generics, sorting, collections

我有一个存储丢失整数的列表。我不喜欢默认的 List.Sort() 工作，因为我希望列表按实际 int 的大小排序。到目前为止，我有这个：

哦，整数存储在字符串中，例如“1234”。这是我无法改变的。

```
public class IntComparer : IComparer<string>
{
    public int Compare(string x, string y)
    {
        if (x == null)
        {
            if (y == null)
            {
                // If x is null and y is null, they're
                // equal. 
                return 0;
            }
            else
            {
                // If x is null and y is not null, y
                // is greater. 
                return -1;
            }
        }
        else
        {
            // If x is not null...
            //
            if (y == null)
            // ...and y is null, x is greater.
            {
                return 1;
            }
            else
            {
                // ...and y is not null, compare the 
                // lengths of the two strings.
                //
                int xInt = Convert.ToInt32(x);
                int yInt = Convert.ToInt32(y);

                if (x > y)
                {
                    // If the strings are not of equal length,
                    // the longer string is greater.
                    //
                    return 1;
                }
                else if (xInt == yInt)
                {
                    return 0;
                }
                else
                {
                    // If the strings are of equal length,
                    // sort them with ordinary string comparison.

        //
                return -1;
            }
        }
    }
} 
```

但据我所知，这是冒泡排序，对吗？我应该实施什么？快速排序？另外，我可能需要帮助来编写它。

哦，我的列表包含不到 2000 个以字符串形式存储数字的元素

另外，我这样称呼我的 IComparer：

```
IntComparer intSort = New IntComparer();
List<T>.Sort(intSort); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-04-21T09:35:22.040

假设您想按存储为字符串的整数值进行排序，您可以简单地执行以下操作：

```
numbers.Sort((x,y) => Int32.Parse(x).CompareTo(Int32.Parse(y))); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-04-21T09:28:00.717

您应该知道，比较器和排序算法不会相互确定。所以这个比较器可以与冒泡排序以及快速排序、堆排序或任何其他排序算法一起使用。根据 MSDN，List.Sort 的内置排序算法是快速排序。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-21T09:31:21.723

所以你有一个表示整数的字符串列表作为输入，你想要一个排序的整数列表作为输出？

您似乎在这里做了很多工作来获得您想要的结果 - 您可以利用一些 Linq 来获得如下结果：

使用系统；

```
using System.Collections.Generic;
using System.Linq;

namespace ConsoleApplication6
{
    internal class Program
    {
        private static void Main(string[] args)
        {
            var unsortedListOfStringsAsInts = new List<string> {"1234", "2345", "7", "9"};
            var sortedListOfInts = unsortedListOfStringsAsInts.Select(x => int.Parse(x)).OrderBy(x => x).ToList();

            foreach (var i in sortedListOfInts)
                Console.WriteLine(i);
        }
    }
} 
```

而且我不会担心使用 2000 个项目手动优化您的排序算法 - 这并不是真正需要排序的项目，除非这是您的应用程序正在做的“全部”。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-04-21T09:38:11.660

不，用于对列表进行排序的算法是 QuickSort，所以你不能轻易地改进它。

[`List<T>.Sort`方法](http://msdn.microsoft.com/en-us/library/b0zbh7b6.aspx)

> 此方法使用`Array.Sort`，它使用 QuickSort 算法。

我完成了比较器：

```
public class IntComparer : IComparer<string> {

    private static int ParseInt32(string text) {
        long value = 0;
        foreach (char c in text) {
                if (c >= '0' && c <= '9') {
                value = value * 10 + c - '0';
            } else {
                throw new FormatException();
            }
        }
        if (value > int.MaxValue) throw new OverflowException();
        return (int)value;
    }

    public int Compare(string x, string y) {
        if (x == null) {
            if (y == null) {
                // If x is null and y is null, they're
                // equal. 
                return 0;
            } else {
                // If x is null and y is not null, y
                // is greater. 
                return -1;
            }
        } else {
            // If x is not null...
            //
            if (y == null) {
                // ...and y is null, x is greater.
                return 1;
            } else {
                // ...and y is not null, compare the 
                // lengths of the two strings.
                //
                if (x.Length != y.Length) {
                    // If the strings are not of equal length,
                    // the longer string is greater.
                    return x.Length - y.Length;
                } else {
                    // compare numerically
                    int xInt = ParseInt32(x);
                    int yInt = ParseInt32(y);
                    return xInt - yInt;
                }
            }
        }
    }

} 
```

编辑：
我添加了一个更快的整数解析器。由于比较器不处理负值，解析器也不处理，这允许进一步优化。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-04-21T10:24:33.170

我认为您应该首先将`string`s 转换为临时列表，`int`因为此处的其他代码（到目前为止）会一遍又一遍地转换字符串，以进行每次比较。`null`（如果保留s 很重要，您也可以使用可为空的整数）。之后，您对列表进行排序，并在必要时转换回字符串。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-04-21T09:54:31.713

只要您使用的是 .net 3.5 项目（Linq），这里就是一个简单的示例

```
using System.Linq;
using System.Collections.Generic;

List<string> unorderedList = List<string>();
list.Add("3");
list.Add("5");
list.Add("2");
list.Add("10");
list.Add("-6");
list.Add("7");

List<string> orderedList = list.OrderBy(x => int.Parse(x)).ToList(); 
```

# visual-studio-2008 - 如何在 Visual Studio 2008 工作区之间共享宏？

> ID：771780
> 
> 赞同：1
> 
> 时间：2009-04-21T09:22:48.267
> 
> 标签：visual-studio-2008, macros

一种新手 VS 问题：我不确定它是否在 VS 中称为工作区，但是当我在 PC 上以其他用户身份登录时，我注意到 VS 在另一个“工作区”中的行为（参见 Eclipse）

例如，自定义代码片段是单独管理的，而且我在一个用户帐户下编写的宏在另一个工作区下不可用。因此问题是，我可以从另一个用户帐户（工作区）导入宏吗？

或者更好的是，我可以选择具有不同用户帐户的相同“工作区”或环境吗？

更新：搜索了一下后，我刚刚复制了文件：

```
C:\Documents and Settings\__ACCOUNT1__\My Documents\
Visual Studio 2008\Projects\VSMacros80\MyMacros\MyMacros.vsmacros 
```

到

```
C:\Documents and Settings\ __ACCOUNT2__\My Documents\
Visual Studio 2008\Projects\VSMacros80\MyMacros\MyMacros.vsmacros 
```

现在对我来说效果很好，但是在正常情况下这当然不是解决方案，因为我覆盖了代码并且它现在被复制了！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-07-29T15:39:13.470

我没有理想的解决方案，但我所做的是抓取该 vsmacros 文件并将其移动到文件系统上的其他位置（例如 c:\VsMacros）。然后在 Visual Studio 中，通过宏资源管理器，通过右键单击现有的 MyMacros 宏项目来卸载它。卸载后，右键单击“宏”并加载宏项目并加载 c:\VsMacros\MyMacros.vsmacros。您可以在两个“工作区”中执行此操作，然后两者都将引用同一个文件。

您还可以将其添加到源代码控制中，以便随着时间的推移进行版本控制并在多台机器上使用。不幸的是，它是二进制的，所以至少 Tortoise SVN 的差异工具对于查看增量更改没有多大帮助。

这仍然不理想，但应该有所帮助。

# .net - 可重用组件、数据库连接和不同环境

> ID：771786
> 
> 赞同：0
> 
> 时间：2009-04-21T09:24:55.250
> 
> 标签：.net, configuration, connection-string

我想知道在.net 中设置可重用组件/库时什么被认为是最佳实践。我有一个 web 服务，它利用一个包含一些数据库连接的库来与数据库交互。我想知道在指定连接字符串时应该如何设置我的库。

在部署到 dev/uat/prod 环境时，我需要能够更改可重用组件连接到的数据库。此外，一定需要能够跟踪谁在进行数据库调用——我可能想看看谁是可重用组件的用户，所以如果 web 服务 A 和 B 都在使用它，我可能希望 ws_A_usr 在连接字符串，同样适用于 B。

我看到了一些可以做到这一点的方法，但是我正在重构一些遗留的所有三个实现都被使用。

我应该从配置中读取连接字符串（MyLib.Properties.Settings.Default.abcConnectionString）

我应该接受连接字符串作为我的 api 中的参数吗？

我应该接受 IDbConnection 作为我的 api 中的参数吗？

还有其他更合适的方法来做到这一点 - 最好的方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-21T09:32:22.283

我会说图书馆应该独立于它的用户（在这种情况下是网络服务）。在这方面，对配置文件的依赖并不是那么好。

您确实需要 Web 服务的 web.config 中的连接字符串，但您希望在某个时候通过参数将其传递给库。这将允许您在非 Web 项目中使用相同的库。此外，它还允许您实现不同的方法来获取连接字符串（也许来自 web 服务调用）。

HTH。乔纳森

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-21T11:26:15.300

在我看来，这取决于连接与组件的绑定程度。如果连接到一个仅由组件使用的数据库，那么强制组件的用户了解有关这些连接的任何信息是没有意义的。在这种情况下，将连接字符串保存在配置文件（app.config 或 web.config）中是可行的。事实上，将连接字符串保留在组件内部可能就足够了，但在配置文件中公开数据库服务器名称。

如果组件使用与组件用户相同的数据库，则允许将连接作为组件的属性传入。如果未设置属性，组件可以选择是否默认为内置连接字符串，或者如果未设置属性则抛出异常。

* * *

如果您不介意将整个连接字符串暴露给消费者，则允许整个字符串存在于 app.config 或 web.config 中。特别是，使用 .NET 2.0 应用程序设置功能 (Properties\settings.settings)。这将导致默认值被编译到程序集中，但是当组件被使用时，这些默认值将被写入 app.config 文件。它们可以从那里进行编辑。

如果要限制可以更改的连接字符串的部分，则将这些部分编译到程序集中。公开您允许更改的部分的各个属性。特别是，公开数据库服务器名称、应用程序名称、用户名、密码等。这些属性将设置连接字符串的相应部分。如果您还不知道，请参阅[SqlConnectionStringBuilder 类。](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlconnectionstringbuilder.aspx)

# asp.net-mvc - 如何创建功能类似于 Webforms Wizards 的 MVC“向导”？

> ID：771788
> 
> 赞同：3
> 
> 时间：2009-04-21T09:26:23.593
> 
> 标签：asp.net-mvc

我想在 ASP.NET MVC 中创建一个向导，类似于 ASP.NET webforms 中的向导控件功能。

做这个的最好方式是什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-04-21T14:39:28.567

对于 ASP.NET MVC，我建议使用 javascript/jquery 在网页中创建向导；就像是

```
<script type="text/javascript">
    $().ready(InitializeWizard);
    function InitializeWizard() {
        $(".step").hide();
        $("#step1").show();
    }
    function Step1OK() {
        $("#step1").hide();
        $("#step2").show();
    }
    function Step2OK() {
        $("#step2").hide();
        $("#stepComplete").show();
    }
</script>

<div id="step1" class="step">
    Step 1
    <input type="button" onclick="Step1OK();" value="OK" />
</div>
<div id="step2" class="step">
    Step 2
    <input type="button" onclick="Step2OK();" value="OK" />
</div>
<div id="stepComplete" class="step">
    Complete
</div> 
```

注意！请记住，在文档的顶部，加载 jquery，例如通过引用 google 链接：

```
<script src="http://www.google.com/jsapi"></script>
<script>
    google.load("jquery", "1.3.2");
</script> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-04-21T12:54:39.113

在 ASP.NET MVC 中使用向导控件没有简单的方法。因为 ASP.NET MVC 不是 Web 表单，所以你应该停止思考**webformy**并开始思考**MVC 方式**。更好的做法是利用 jQuery 和局部视图（局部视图）来提供良好的用户体验，引导用户完成一些预定义的步骤。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-04-21T20:11:03.357

ASP.NET MVC 本身是一种无状态设计模式，这意味着请求之间没有任何形式的状态。如果您想保持某种状态，则必须使用某种持久性机制，例如 cookie、查询字符串 (blah?page=2)、会话，甚至可能在数据库中。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2011-01-02T02:58:02.787

试试[这个](http://afana.me/post/create-wizard-in-aspnet-mvc-3.aspx)。

它使用 jQuery 并包含一个示例项目。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2011-09-12T15:53:01.883

您可以使用 NuGet 上提供的简单组件 MVCWizard.Wizard。WizardController 允许您使用局部视图创建向导。还有一个 AutoWizardController 可以在单个视图中呈现整个向导。所有这些组件都与会话一起操作以存储模型状态。

# c# - 创建 Outlook 插件的不同方法

> ID：771789
> 
> 赞同：0
> 
> 时间：2009-04-21T09:26:34.090
> 
> 标签：c#, outlook, vsto, add

创建 VSTO Outlook AddIn 时有一些限制，这有点烦人。例如，如果由于单击邮件链接而启动 Outlook，由于安全原因，不会加载任何插件。

有没有办法覆盖这种行为？也许是不使用 VSTO 创建插件的另一种方法？如果我没记错的话，有一些方法可以通过使用一些不同的技术来创建插件，然后是 VSTO，但是哪一种以及有什么区别？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-11-19T00:12:12.080

错误的。Mailto 链接在操作系统范围内使用不同的调用 Outlook 的方法。Mailto 通过操作系统调用直接调用 MAPI 子系统，然后触发 Outlook（因为它将是默认的 MAPI 客户端）。

当您在 Outlook 中使用“新建”按钮时，您正在使用 Outlook OM 代码并且插件已经加载。

这里的关键区别很简单 - Outlook 已经加载。您仍然可以使用 VSTO 来针对这种情况，您只需要确保在启动时加载。如果您仅在消息（“添加”活动检查器）时添加 VSTO 组件，那么对于这种情况来说为时已晚。您确定您的插件设置为在启动时加载吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-05T14:52:33.257

有一些更老、更痛苦的方法来创建插件，但我不相信它们会解决你的问题。我看到并使用的解决方案是检测是否可以获得ActiveExplorer，如果没有，告诉用户正常启动程序。

可以在 Codeplex 上的 Outlook 附件提醒源的源代码中看到执行此操作的示例。

[http://www.codeplex.com/OAR/Release/ProjectReleases.aspx?ReleaseId=22094](http://www.codeplex.com/OAR/Release/ProjectReleases.aspx?ReleaseId=22094)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-08-17T18:34:19.433

宏是另一种方式...

Codeplex 的上述内容使用 VSTO。

正如凯文提到的，我们需要弄清楚为什么插件没有加载......在上面的插件中，每次都会创建一个菜单；一个活跃的资源管理器......

# drupal - 将多个参数从面板传递到视图 ( Drupal)

> ID：771798
> 
> 赞同：3
> 
> 时间：2009-04-21T09:29:48.747
> 
> 标签：drupal

任何人都知道如何将面板中的多个参数传递到 Drupal 6 中的视图中？

**编辑：我知道如何将[一个参数](http://itscommonsensestupid.blogspot.com/2009/04/passing-arguments-from-panel-to-views.html)从面板传递到视图，但不知道多个参数。**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-19T02:39:40.143

在面板参数字段中，用“/”分隔它们

类似 arg1/arg2/arg3

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-21T21:30:53.343

主要是将您的视图保存为面板窗格。[这里](http://itscommonsensestupid.blogspot.com/2009/04/passing-arguments-from-panel-to-views.html)有很好的说明

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2011-07-09T11:57:12.197

在您的教程中，您使用`site.ru/%`路径作为面板，因此这意味着您使用变量`%`作为参数。如果你写`site.ru/%1/%2,`你可以使用两个参数的变量`%1`和`%2`.

# sql-server-2005 - 与 SQL Server Management Studio 同步数据

> ID：771800
> 
> 赞同：1
> 
> 时间：2009-04-21T09:30:16.623
> 
> 标签：sql-server-2005, ssms

我正要购买 redgate.com 的比较包时，我意识到像这样的任务似乎不太可能在 Management Studio 中执行。

我有一个开发数据库，​​我有一个实时数据库。我开发我的应用程序，添加存储过程，更正数据结构中的小问题，并可能添加一些新表。现在我希望将更改添加到实时服务器。由于我不太可能 100% 跟踪我的所有更改，我当然希望它只是自己改变我所做的更改。

有谁知道 Management Studio 中此任务的最佳实践是什么？我的意思是，这一定是我们在大型项目中都面临的一项任务。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-21T09:36:37.797

如果你用管理工作室来做这一切，这一切都仅限于你自己的头脑。您必须跟踪所有更改等。我发现 Redgates SQL Compare 8 和 SQL Data Compare 7 可以解决问题。多亏了 Redgate，我最近在几分钟内将生产数据库的结构转移到了完全不同的地方。

我之前曾尝试使用 Management Studio，但它在复杂任务中表现不佳。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-21T09:39:55.917

您确实应该将数据库模式与源代码一起保存在版本控制中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-21T09:40:24.587

它不在 IDE 中有什么问题？它有自己的界面。

这个工具可以节省我一天的时间。不仅因为我不必记住所有内容，而且如果我错过了什么，我也不必修复生产服务器。我可以在多个系统上工作，并将更新推送到每个系统上，时间是我在 Management Studio 中所需时间的十分之一。

这个工具是迄今为止我用于 sql server 的最好的 3rd 方工具。真是天赐良机。一个便宜的。

只是没有箭头指向错误的方向;-)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-04-21T10:49:11.177

好的，我刚买了 Redgate :)

我以前使用过它，所以我只能同意它是最先进的，我只是惊讶地意识到 Management Studio 没有任何与此相对应的东西。

感谢您的精彩回答！Stackoverflow 真的很适合问这些问题。

# properties - 无法同等设置为真/假的已编辑属性

> ID：771801
> 
> 赞同：2
> 
> 时间：2009-04-21T09:30:25.330
> 
> 标签：properties

很难解释我的问题，所以如果不是很清楚，请让我休息一下。

我有十个可以在视图中编辑的属性。它们中的大多数是布尔值。这些属性配置了一个测试环境（就像可以配置一个属性来显示解决方案一样）。

现在，问题是如果其他属性设置为 false，则某些属性无法设置为 true。什么都不会出错，但它只是没用。就像一个属性被配置为不显示正确的按钮，而另一个属性被配置为显示解决方案。在我们的系统中，如果您无法点击正确的按钮，则永远不会显示解决方案。

这种问题有名字吗？这样的属性有名字吗（就像有不可变的属性一样）？是否有实施这样一个故事的最佳实践？我们可以在视图中对其进行硬编码，但我宁愿拥有一个通用系统。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-21T11:04:25.667

您要查找的词是*正交*性。这些设置*不是*正交的，因为它们不能独立变化。

至于如何处理显示这些属性，完全通用的方法（你的问题可能不保证这种通用性的编码成本）是给每个控件一个引用其他控件的表达式，如果完整的表达式求值为真（或假），控件在视图中被禁用。

更容易编写代码的是公开`isDisabled()`方法的控件，您可以根据需要覆盖该方法。这是一个简短的 Java 示例，它利用 Java 匿名类来完成繁重的工作。它假设已经有一个`Control`类，有一个`booleanValue()`将其转换为布尔值的 getter，并且由于`AutoDisabledControl`is-a Control，它可以用作 Control 的替代品：

```
 public class AutoDisabledControl extends Control {
    public isDisabled() { return false ; }
  }

  ..... usage ....
  // control1 is never disabled
  final Control1 = new AutoDisabledControl() ;
  // Control2 is disabled if control1 is false
  final Control2 = new  AutoDisabledControl() {
    public isDisabled() { return control1.booleanValue() == false; }
  };
  // conntrol 3 is enabled only if control1 and control2 are true
  final Control1 = new  AutoDisabledControl() {
    public isDisabled() { return ! (
                        control1.booleanValue()
                        && control2.booleanValue()) ; 
  }; 
```

自然，在 View 的显示中，它会检查每个控件的`isDisabled()`，并禁用返回 true 的控件；当控件的值改变时，视图会重新显示。我假设某种 MVC 模式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-21T09:46:08.083

您可以使用 int 或 long 来存储相关属性，并在设置属性以正确清除无效设置时使用位掩码。这个 int 或 long 可以是标记枚举的形式。

```
[Flags]private enum BitValues
{
  Bit1 = 1 << 0, //Inclusive
  Bit2 = 1 << 1, //Exclusive to bit 3 and 4
  Bit3 = 1 << 2, //Exclusive to bit 2 and 4
  Bit4 = 1 << 3, //Exclusive to bit 2 and 3
  ExclusiveBits = Bit2 | Bit3 | Bit4 //All exclusive bits
}

private BitValues enValues;

public bool Bit1
{
  get { return (enValues & BitValues.Bit1) == BitValues.Bit1; }
  set
  {
    //Clear the bit
    enValues = (enValues ^ BitValues.Bit1) & enValues;

    //Set the bit
    enValues = enValues | BitValues.Bit1;
  }
}

public bool Bit2
{
  get { return (enValues & BitValues.Bit2) == BitValues.Bit2; }
  set
  {
    //Clear exclusive bits
    enValues = (enValues ^ BitValues.ExclusiveBits) & enValues;

    //Set bit
    enValues = enValues | BitValues.Bit2;
  }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-21T09:52:08.430

您可能错误地建模了您的解决方案。

尝试以不同的方式思考——也许你可以消除一些可以从其他参数中推断出来的参数，或者你可以使用枚举将几个参数组合成一个。

调查参数的值空间以找出答案。

# c# - C# Process 对象无法打开 PDF

> ID：771802
> 
> 赞同：0
> 
> 时间：2009-04-21T09:30:34.067
> 
> 标签：c#, pdf

我正在动态创建一个 PDF 文件。创建后我想打开pdf文件。为此，我正在使用以下代码：

```
 System.Diagnostics.Process p = new System.Diagnostics.Process();
    p = new System.Diagnostics.Process();

    p.StartInfo.FileName = CreatePDF(); // method that creats my pdf and returns the full path

    try
    {
        if (!p.Start())
            Controller.Error = "Opening acrobat failed..";
    }
    catch(Exception ex)
    {
        Controller.Error = "Create PDF::" + ex.Message;
    } 
```

执行此代码时，什么也没有发生，我没有得到任何错误。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-21T09:41:46.427

ASP.NET？我要做的是获取内存流并将其写入响应流，如下所示：

```
Response.ContentType = "application/pdf"; 
Response.AddHeader("content-disposition", string.Format("attachment; filename={0}", file.FileName)); 
Response.BinaryWrite(file.FileBytes); 
Response.Flush(); 
Response.End(); 
```

对于 windows 窗体，我会考虑使用 Foxit Reader。我有一篇关于直接从 foxit 打印的[博客文章。](http://blog.zoolutions.se/post/2009/01/27/Printing-PDFe28099s-programmatically-from-C.aspx)你可以类似地打开。

**编辑：**要创建附件，请添加对 System.Net.Mail 的引用并执行以下操作：

```
var stream = GetTheFileAsStream();
var attachment = new Attachment(stream); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-04-21T09:42:16.720

**更新：**

由于这是一个 ASP.NET 应用程序，因此此代码将不起作用。它无法与托管 ASP.NET 的服务器的桌面交互。

如果目的是为从浏览器访问的用户显示 PDF，那么代码就完全不同了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-21T10:02:56.890

我不清楚这是 ASP.NET 应用程序还是 Winforms。如果Winforms然后...

```
using (Process p = new Process())
{
    p.StartInfo.RedirectStandardOutput = false;
    p.StartInfo.FileName = @"C:\foo.pdf";
    p.StartInfo.UseShellExecute = true;
    p.Start();
    p.WaitForExit();             
} 
```

...会正常工作。

如果这是 ASP.NET MVC，那么您应该查看 FileResult 类型和 Controller 的 File 方法...

```
public ActionResult GetFile()
{
    return File("foo.pdf", "application/pdf");
} 
```

...因为这正是它的用途。

# wcf - 如何从自定义位置（即 .NET 中的数据库）读取 app.config

> ID：771814
> 
> 赞同：4
> 
> 时间：2009-04-21T09:33:59.360
> 
> 标签：wcf, configuration, location

我正在尝试覆盖自定义 ServiceHost 中的 ApplyConfiguration 方法，以从数据库而不是 app.config 读取配置。理想情况下，我希望能够做这样的事情：

配置配置 = GetConfigFromMyDatabase(...);

ServiceModelSectionGroup serviceModel = ServiceModelSectionGroup.GetSectionGroup(config);

有没有办法在不编写临时 app.config 文件的情况下做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-04-21T16:22:55.820

如何使用：

```
System.Configuration.ConfigurationManager.OpenExeConfiguration(string exePath) 
```

这应该让你打开一个任意的 app.config 文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-12T16:13:23.107

如果您正在编写自定义 ServiceHost，则不需要单独的 AppDomain。

ServiceHost 有一个可以覆盖的 ApplyConfiguration 方法。你可以从任何你喜欢的地方加载配置。

[有关概述该技术的相关文章，请参见此处](http://blogs.msdn.com/dotnetinterop/archive/2008/09/22/custom-service-config-file-for-a-wcf-service-hosted-in-iis.aspx)。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2009-04-22T11:42:34.257

尽管您不想编写临时配置文件，但最好的方法是将您的服务托管在单独的 AppDomain 中。

在创建 AppDomain 之前，从数据库中获取配置并将其写入文件系统，然后在创建 AppDomain 时将其指向从数据库中检索到的临时配置文件作为配置源。

当然，数据库中的配置要么必须是完整的 app.config 文件，要么您必须将其与某种模板配置文件合并，该文件中包含任何其他非 serviceModel 配置位以供您的其余部分使用应用程序。

以这种方式实现它是一个非常巧妙的解决方案，并且效果很好（以前使用过）。

# python - 子进程中的“shell”参数在 Windows 上是什么意思？

> ID：771816
> 
> 赞同：1
> 
> 时间：2009-04-21T09:35:09.203
> 
> 标签：python, subprocess

子进程模块的文档声明“如果*shell*为 True，则将通过 shell 执行指定的命令”。在 Windows 操作系统上，这在实践中意味着什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-04-21T09:39:22.687

这意味着该命令将使用`COMSPEC`环境变量中指定的程序执行。通常`cmd.exe`.

确切地说，子进程调用windows api函数，作为参数[`CreateProcess`](http://msdn.microsoft.com/en-us/library/ms682425.aspx)传递。`"cmd.exe /c " + args``lpCommandLine`

如果 shell==False，`lpCommandLine`CreateProcess 的参数就是`args`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-21T14:04:08.057

当你执行一个外部进程时，你想要的命令可能看起来像“foo arg1 arg2 arg3”。如果“foo”是一个可执行文件，那就是执行并给出参数的内容。

但是，通常情况下，“foo”实际上是某种脚本，或者可能是 shell 内置的命令，而不是磁盘上的实际可执行文件。在这种情况下，系统不能直接执行“foo”，因为严格来说，这类事情是不可执行的。他们需要某种“外壳”来执行它们。在 *nix 系统上，这个 shell 通常（但不一定）是 /bin/sh。在 Windows 上，它通常是 cmd.exe（或存储在 COMSPEC 环境变量中的任何内容）。

这个参数允许你定义你希望使用什么 shell 来执行你的命令，对于相对罕见的情况，当你不想要默认值时。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-21T09:43:28.527

在[using-the-subprocess-module](http://docs.python.org/library/subprocess.html#using-the-subprocess-module)中，有一个明确的段落：

> 可执行参数指定要执行的程序。很少需要它：通常，要执行的程序由 args 参数定义。如果 shell=True，可执行参数指定使用哪个 shell。在 Unix 上，默认的 shell 是 /bin/sh。**在 Windows 上，默认 shell 由 COMSPEC 环境变量指定。**

*Windows 示例*- 没有 shell将无法识别shell ( `cmd.exe`) 命令：`date -t`

```
>>> p=subprocess.Popen(["date", "/t"], stdout=subprocess.PIPE)
Traceback (most recent call last):
  File "<interactive input>", line 1, in <module>
  File "C:\Python26\lib\subprocess.py", line 595, in __init__
    errread, errwrite)
  File "C:\Python26\lib\subprocess.py", line 804, in _execute_child
    startupinfo)
WindowsError: [Error 2] The system cannot find the file specified
>>> 
```

使用外壳，一切都很好：

```
>>> p=subprocess.Popen(["date", "/t"], shell=True, stdout=subprocess.PIPE)
>>> p.communicate()
('Wed 04/22/2009 \r\n', None)
>>> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-04-21T13:51:24.407

除了其他答案中所说的之外，如果您想在该文件类型的默认查看器中打开文件，这在实践中很有用。例如，如果您想打开 HTML 或 PDF 文件，但不知道将运行它的系统上安装了哪个浏览器或查看器，或者无法保证可执行文件的路径，您可以简单地传递文件名作为 args 字段的唯一参数，然后设置 shell=True。这将使 Windows 使用与该文件类型关联的任何程序。需要注意的是，如果文件路径有空格，则需要用两个 ".

例如。

```
path = "C:\\Documents and Settings\\Bob\\Desktop\\New Folder\\README.txt"
subprocess.call('""' + path + '""', shell = True) 
```

# c# - System.OutOfMemoryException：内存不足 (GDI)

> ID：771819
> 
> 赞同：3
> 
> 时间：2009-04-21T09:35:35.223
> 
> 标签：c#, winforms

在 windows vista 高级版上安装我的程序后，我收到以下异常。

必须显示的视图包含以下控件：2 个文本框、3 个标签、一个按钮和链接按钮。

```
System.OutOfMemoryException: Out of memory.
   at System.Drawing.Graphics.FromHdcInternal(IntPtr hdc)
   at System.Windows.Forms.PaintEventArgs.get_Graphics()
   at System.Windows.Forms.Control.PaintException(PaintEventArgs e)
   at System.Windows.Forms.Control.PaintWithErrorHandling(PaintEventArgs e, Int16 layer, Boolean disposeEventArgs)
   at System.Windows.Forms.Control.OnPrint(PaintEventArgs e)
   at System.Windows.Forms.Control.WmPrintClient(Message& m)
   at System.Windows.Forms.Control.WndProc(Message& m)
   at System.Windows.Forms.ScrollableControl.WndProc(Message& m)
   at System.Windows.Forms.ContainerControl.WndProc(Message& m)
   at System.Windows.Forms.Form.WndProc(Message& m)
   at System.Windows.Forms.Control.ControlNativeWindow.OnMessage(Message& m)
   at System.Windows.Forms.Control.ControlNativeWindow.WndProc(Message& m)
   at System.Windows.Forms.NativeWindow.Callback(IntPtr hWnd, Int32 msg, IntPtr wparam, IntPtr lparam) 
```

有人有同样的问题吗？如何解决？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2010-07-05T05:45:34.463

这不一定是OOM错误，GDI有一个习惯，就是每次抛出异常都会抛出Out Of Memory。

引用微软“GDI+ 喜欢在与内存无关的情况下返回 OutOfMemoryExceptions”。一个令人讨厌的小“特质”

详情见[这里](http://connect.microsoft.com/VisualStudio/feedback/details/96831/gdi-out-of-memory-bug)_

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-04-21T09:51:07.400

您的应用程序是否使用了您自己编写的任何自定义控件或控件？你能用一个非常简单的形式重现这个问题吗？

这个...

[http://social.msdn.microsoft.com/Forums/en-US/csharpgeneral/thread/4bc34266-edf9-430c-ad5a-c6e29392eb2d](http://social.msdn.microsoft.com/Forums/en-US/csharpgeneral/thread/4bc34266-edf9-430c-ad5a-c6e29392eb2d)

... 和这个...

[http://social.expression.microsoft.com/Forums/zh-CN/netfxbcl/thread/7c4d2e73-6e73-4f10-a614-13fd76b2f419](http://social.expression.microsoft.com/Forums/zh-CN/netfxbcl/thread/7c4d2e73-6e73-4f10-a614-13fd76b2f419)

...似乎是一个类似的问题。然而，他们通常谈论无法处理对象的自定义控件（因此，泄漏 GDI 句柄）。

您是否有可能在您的应用程序的其他地方泄漏句柄？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-21T15:32:52.493

您多久显示一次此表单？这可能是窗口句柄（或缺少）的句柄问题。

我从事的项目包含带有数百个控件的对话框，并且存在内存/句柄问题，因为对话框在使用后没有被释放。

为了解决这个问题，他们最初在表单第一次显示时为表单上的每个控件存储句柄，并在之后每次重用它们。

在我看来，一旦完成就销毁不需要的东西会更容易和更简单。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-04-21T09:54:35.660

您是否可能仅在 Vista 机器上检测到这一点，因为可用内存比 Windows XP 机器上的要少？如果机器的规格大致相同，那么我猜 Vista 机器的可用内存会更少，因此会更快地突出内存泄漏问题。

另一种可能性是你试图渲染太多，因为调用堆栈状态有一个可滚动的控件，你是否有可能渲染一堆实际上不可见的东西？

# c - ld找不到c文件

> ID：771820
> 
> 赞同：0
> 
> 时间：2009-04-21T09:35:35.443
> 
> 标签：c, assembly, linker, ld

我有一个汇编文件和 ac 文件编译为 .o 文件（start.o 和 main.o），并试图将它们与 ld 链接。我正在使用这个命令：

```
ld -T link.ld -o kernel.bin start.o main.o 
```

其中 link.ld 是一个链接器脚本，但是当我运行它时，我得到了这个错误：

```
start.o:start.o:(.text+0x2d): undefined reference to `_main' 
```

在汇编文件中，我用这个函数调用 c 文件：

```
stublet:
extern _main
call _main

jmp $ 
```

任何人都可以看到有什么问题吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-04-21T09:47:56.253

一些编译器（比如 Linux 的 GCC）默认不添加`_`到 C 库导出中。尝试`nm main.o`查看实际的参考名称。它可能是`main`而不是`_main`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-21T09:50:37.323

一些链接器对目标文件或库出现在命令行上的顺序很敏感——尝试交换两个目标文件的顺序。

我还应该指出，C 标准不保证 main() 是一个函数——事实上，C 程序明确禁止调用 main。

# java - 将小整数类型转换为更宽的整数类型时，依靠 &ing 和掩码来删除符号是否安全？

> ID：771823
> 
> 赞同：2
> 
> 时间：2009-04-21T09:36:12.710
> 
> 标签：java, casting, binary

我有代码在 Java 中存储 0..255 范围内的值，`byte`以节省大型数据集合的空间（10^9 记录分布在几百个数组中）。

如果没有额外的恢复措施，较大的值将被解释为负数（因为 Java 整数类型使用[二进制补码](http://en.wikipedia.org/wiki/Twos_complement)表示）。

在回答相关问题时，我从[starblue](https://stackoverflow.com/users/49246/starblue)那里得到了[这个有用的提示](https://stackoverflow.com/questions/771663/java-why-doesnt-binary-or-work-as-expected-see-code-below/771746#771746)，我想知道这种技术是否可以安全地依赖：

```
int iOriginal = 128, iRestore;
byte bStore = (byte) iOriginal; // reading this value directly would yield -128
iRestore = 0xff & bStore; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-04-21T09:46:09.987

是的，它是安全的，确实是将字节转换为（有效）无符号整数的最有效方法。

操作的`byte`一半`and`将符号扩展为`int`，即第 7 位中的任何内容都将扩展为第 8-31 位。

屏蔽底部的八位（即`& 0xff`）然后给你一个`int`从 8 到 31 的每一位都为零的值，因此必须在 0 ... 255 的范围内。

[请参阅我在此处](https://stackoverflow.com/questions/755715/is-this-statement-correct-in-java/755890#755890)给出的相关答案。

# c# - C# 调用在以下方法或属性之间不明确：'System.Math.Round(double, int)' 和 'System.Math.Round(decimal, int)

> ID：771825
> 
> 赞同：46
> 
> 时间：2009-04-21T09:36:42.850
> 
> 标签：c#, ambiguity

由于以下错误，我的代码无法编译：

以下方法或属性之间的调用不明确：'System.Math.Round(double, int)' 和 'System.Math.Round(decimal, int)

我的代码是

```
Math.Round(new FileInfo(strFilePath).Length / 1024, 1) 
```

我怎样才能解决这个问题？

谢谢

* * *

## 回答 #1

> 赞同：52
> 
> 时间：2009-04-21T09:38:37.510

```
Math.Round(new FileInfo(strFilePath).Length / 1024d, 1) 
```

* * *

## 回答 #2

> 赞同：39
> 
> 时间：2009-04-21T09:38:08.307

问题是您进行整数除法（也导致 an `int`）并且 a`int`可以隐式转换为`double`and `decimal`。因此，您需要确保表达式产生其中之一；`double`可能是你想要的。

```
Math.Round(new FileInfo(strFilePath).Length / 1024.0, 1) 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2009-04-21T09:39:10.083

```
Math.Round((double) (new FileInfo(strFilePath).Length / 1024), 1) 
```

# java - 打印 Jpanel 数据时出现问题

> ID：771831
> 
> 赞同：1
> 
> 时间：2009-04-21T09:38:22.563
> 
> 标签：java, swing, printing

我正在开发一个摇摆应用程序我有一个 Jpanel，我在使用**“卡片打印机”**打印这个 JPanel 数据时遇到了严重的问题。当我使用纸彩色打印机时，这工作正常，但当我使用卡片打印机时，它什么也没打印。我已经使用一些图像测试了打印机，当我直接打印任何图像时它打印正常，但使用我的应用程序时出现问题，卡片打印机在纸质打印机打印正常时没有接收任何数据。任何人都遇到过这个问题或任何人请帮助我。这是我的代码：

```
 private void printCard(){

    PrinterJob printjob = PrinterJob.getPrinterJob();
    printjob.setJobName(" CUSTOMER CARD ");

    printjob.setPrintable (new Printable() {      
         public int print(Graphics pg, PageFormat pf, int pageNum){                  

             pf.setOrientation(PageFormat.LANDSCAPE);

             if (pageNum > 0){
                return Printable.NO_SUCH_PAGE;
             }

             Graphics2D g2 = (Graphics2D) pg;
             g2.translate(pf.getImageableX(), pf.getImageableY());
             g2.translate( 0f, 0f );
             jLayeredPane2.paint(g2);

             return Printable.PAGE_EXISTS;
         }
    });

    if (printjob.printDialog() == false)
       return;

    try {
       printjob.print();
    }
    catch (PrinterException ex) {
       System.out.println("NO PAGE FOUND."+ex);
    }
 } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-09-10T20:28:48.447

我遇到了一些不喜欢 Java 打印工作方式的打印机的问题，这似乎与打印机如何支持基于矢量的打印有很大关系。请尝试光栅打印。将您的 JLayeredPane 渲染为 300dpi 的 BufferedImage 并打印 BufferedImage。

# wpf - 当页面的数据上下文用于其他绑定时，如何绑定到 WPF 依赖属性？

> ID：771833
> 
> 赞同：19
> 
> 时间：2009-04-21T09:38:31.987
> 
> 标签：wpf, data-binding, dependency-properties

当页面的数据上下文用于其他绑定时，如何绑定到 WPF 依赖属性？（简单问题）

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2009-04-21T17:38:19.837

需要设置元素的数据上下文。

XAML：

```
<Window x:Class="WpfDependencyPropertyTest.Window1" x:Name="mywindow">
   <StackPanel>
      <Label Content="{Binding Path=Test, ElementName=mywindow}" />
   </StackPanel>
</Window> 
```

C＃：

```
public static readonly DependencyProperty TestProperty =
        DependencyProperty.Register("Test",
                                    typeof(string),
                                    typeof(Window1),
                                    new FrameworkPropertyMetadata("Test"));
public string Test
{
   get { return (string)this.GetValue(Window1.TestProperty); }
   set { this.SetValue(Window1.TestProperty, value); }
} 
```

另请参阅此相关问题：

[WPF 依赖属性](https://stackoverflow.com/questions/317973/wpf-dependencyproperties)

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2009-04-21T09:47:19.687

在 XAML 中：

```
Something="{Binding SomethingElse, ElementName=SomeElement}" 
```

在代码中：

```
BindingOperations.SetBinding(obj, SomeClass.SomethingProperty, new Binding {
  Path = new PropertyPath(SomeElementType.SomethingElseProperty),  /* the UI property */
  Source = SomeElement /* the UI object */
}); 
```

尽管通常您会以相反的方式执行此操作，并将 UI 属性绑定到自定义依赖项属性。

# c# - 我如何构建可以在 C#.net 中执行用户定义的 if else 规则的规则引擎

> ID：771843
> 
> 赞同：1
> 
> 时间：2009-04-21T09:40:58.597
> 
> 标签：c#, .net, rule-engine

我需要构建新的规则引擎，其中我有这样的规则，它以表格格式存储在 Excel 工作表中。

```
<If>  "Name = Nita "
<Value> "200"
<else> "Name = Gita"
<value> "300"
<LookInto> "/Name/@Income" 
```

我有两个文件说 1 n 2。我需要在第一个文件中查看 Name 是 Nita 还是 Gita。基于执行，我将获得价值。现在我需要将此结果值与第二个文件进行比较，该文件是一个 xml 文件，其路径已定义为 .

任何人都可以建议我在 C# 中有什么可以有效地用于开发相同的东西，或者任何人都可以建议我如何用 C# 实现这一点。我需要一些相同的类设计的想法。

我正在使用.Net 1.1。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-04-21T09:50:10.820

首先，您需要创建可以定义规则的类。一旦你有了这个结构，你将能够构建一个利用这些类的引擎。

我会考虑创建类似的东西：

```
class RuleEngine 
{
  public RuleMatch[] RuleMatches { get; set; }
  public void RunEngine(inputdata...) 
  {  
    // do processing in here
  }
}

class RuleMatch 
{
  public Rule[] Rules { get; set; }
  public Object ValueIfMatched { get; set; }
}

class Rule 
{
  public String FieldName { get; set; }
  public MatchType Match { get; set; }
  public Object Value { get; set; }
)

enum MatchType 
{
  Equal = 1,
  NotEqual = 2,
  GreaterThan = 4,
  LessThan = 8,
  Like = 16
} 
```

然后从那里继续......

如果将这种结构更改为具有一组可以添加到一组规则中的规则会更好，例如 (a AND b) OR (c AND d) - 我将把这个留给您考虑现在。

* * *

请注意，我在这里使用了一些 C# 3.0 构造，您需要在 1.1 中创建完整的私有属性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-21T10:08:20.637

你可以用 boo 创建一个 DSL，但我不知道这是否适用于 1.1

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-21T10:16:59.430

您将受到 .NET 1.1 的极大限制。我认为您的第一步将是升级。

后续步骤可能涉及 Windows Workflow Foundation 中内置的规则引擎；这个引擎，以及与之相关的图形设计师，被设计成可以在 WF 之外使用。

另一件值得关注的事情是验证应用程序块，它是[Microsoft Enterprise Library](http://entlib.codeplex.com/)的一部分。

六年前，当 .NET 1.1 统治地球时，这些东西都不存在。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-06-04T21:26:32.340

或者您可以让其他人完成这项工作并使用良好的 .NET 规则引擎，例如 InRule Technology 的产品、.Net 的 IBM/ILOG 规则或 .Net 的 Blaze Advisor。它们运行良好，将在 .Net 中为您提供强大的规则环境

# macos - Mac 的 CodeCharge Studio 替代品？

> ID：771853
> 
> 赞同：1
> 
> 时间：2009-04-21T09:43:41.007
> 
> 标签：macos

我是[CodeCharge Studio](http://www.yessoftware.com/products/product_detail.php?product_id=1)的快乐用户，但遗憾的是，这是拥有并行虚拟机的唯一原因，这里的每个人都使用 Mac。有谁知道生成 PHP 代码并在 OS X 下运行的其他工具？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-08-16T15:40:52.340

没有一个比 Code Charge Studio 更好的了。

我在我的 mac 上运行 vmware fusion 只是为了 Code Charge Studio，在 YesSoftware 创建一个 mac 版本之前，这对我来说是值得的，提示提示。我想让它在我的 Mac 上运行 nativity ！！！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-05T04:54:19.537

根据它的网站，[ScriptCase](http://www.scriptcase.net/scriptcase-features/ "ScriptCase 功能")可以通过网络浏览器使用。

APEEL PHP 生成器站点对其他 PHP 代码生成器进行了一些[比较：](http://www.phpcodegeneratorpro.com/reviews.php "PHP 生成器比较")

这些评论非常公平，涵盖了成本、安装和一些关于生成的代码结构的评论。但是，它们中的大多数只是 Windows。

话虽如此，我还在我的 Mac 上使用 VMWare 中的 CodeCharge Studio，与其他工具相比，我对它非常满意。我在 .NET 和 PHP 项目中工作，因此两者（以及在语言之间切换）的单一工具非常棒。

# .net - Nant 构建失败 - 但仅限于 TeamCity

> ID：771857
> 
> 赞同：3
> 
> 时间：2009-04-21T09:47:14.960
> 
> 标签：.net, continuous-integration, teamcity

我设置了一个 nant 构建文件，它在 cmd 行中可以正常工作，但在 TeamCity 中却不行。

我已经检查了我执行的命令是从 TC 所在的同一目录运行并检查了所有引用，但它仍然失败并出现以下错误：

```
[build] Compile the project using Debug configuration...
[10:30:05]: [build] msbuild (1m:18s)
[10:30:06]: [msbuild] Starting MSBuild...
[10:30:07]: [msbuild] Starting 'C:\WINDOWS\Microsoft.NET\Framework\v3.5\msbuild.exe (@"G:\TeamCity\buildAgent\work\9de21b975852dd95\src\Irm.Web.App\Irm.Web.App.sln.teamcity.msbuild.tcargs")' in 'G:\TeamCity\buildAgent\work\9de21b975852dd95'
[10:30:09]: [msbuild] MSBUILD : error MSB1025: An internal failure occurred while running MSBuild.
[10:31:18]: [msbuild] Unhandled Exception: System.NullReferenceException: Object reference not set to an instance of an object.
[10:31:18]: [msbuild] at Microsoft.Build.CommandLine.MSBuildApp.BuildProject(String projectFile, String[] targets, String toolsVersion, BuildPropertyGroup propertyBag, ILogger[] loggers, LoggerVerbosity verbosity, DistributedLoggerRecord[] distributedLoggerRecords, Boolean needToValidateProject, String schemaFile, Int32 cpuCount, Boolean enableNodeReuse)
[10:31:18]: [msbuild] at Microsoft.Build.CommandLine.MSBuildApp.Execute(String commandLine)
[10:31:18]: [msbuild] at Microsoft.Build.CommandLine.MSBuildApp.Main()
[10:31:24]: G:\TeamCity\buildAgent\work\9de21b975852dd95\Irm-deploy.build(22,10): External Program Failed: msbuild (return code was -1073741819) 
```

有谁知道为什么 TC 无法运行构建但我知道它可以工作？

干杯

w://

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2009-06-06T04:15:31.783

默认情况下，TeamCity Build Agent 服务作为本地系统帐户运行。如果您的测试或构建脚本需要该帐户无法访问的内容（在我的情况下是数据库连接），您有两个选择：

*   更改资源的权限以允许系统帐户访问

*   更改构建代理服务使用的帐户

更改服务帐户与任何其他 Windows 服务相同 - 通过控制面板/管理工具/服务

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2010-03-25T21:51:08.333

我有这个问题。您的任务中的详细程度是否设置为**安静？**`msbuild`如果是这样，请删除它，它可能会起作用 - 它对我有用。

另请参阅[此报告的错误](http://jetbrains.net/devnet/message/5259392;jsessionid=DF9793BF8292EE905C4BC92DEBBD44B1)（不是我的）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-21T12:10:32.653

团队城市代理在与您使用的用户不同的用户下运行。如果我没记错的话，您可以在安装代理时更改它，或者您可以更改运行代理服务的用户。

此外，您可以选择不将代理作为服务运行，而是将其作为普通命令行程序运行。

# ms-access - 在 MS-Access 中插入带日期时间的 SQL 命令

> ID：771861
> 
> 赞同：13
> 
> 时间：2009-04-21T09:48:00.590
> 
> 标签：ms-access, ms-access-2007

我正在 MS-Access 2007 中尝试以下查询，但它在时间字段上失败。

```
INSERT INTO LOG (
    EMPLOYEECODE, STATUSID, LOCATIONID, TIME, DURATION,
    SHIFTID, LATECOMING, EARLYGOING, LOGDATE, STATIONID
)
VALUES (
    1, 1, 0, '4/21/2009 2:25:53 PM', 0, 
    8, 0, 1, '1/1/2009', 1
) 
```

该`TIME`字段被定义为日期时间。

没有该`TIME`字段，查询工作正常！

我尝试了许多不同的方法，例如将日期时间括在散列、引号等中。但是，时间字段上的查询仍然失败。

* * *

谢谢你们！这几乎让我完全在那里。我仍然不断收到插入语句的语法错误，但是在进一步的谷歌搜索中，我意识到这`TIME`可能是一个保留关键字，所以把它放在方括号上`[TIME]`就可以了！

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2009-04-21T10:00:53.103

**访问使用#**中的日期和时间输入，因为访问无法在 SQL 查询中将字符/文本自动转换为日期或时间（或访问称为查询），您最好使用国际标准输入日期时间，即**YYYY- MM-DD HH:NN:SS**（4 位年，2 位月，2 位日，2 位小时，2 位分钟，2 位秒）

所以对于2009 年 4 月 21 日**下午 2:25:53**使用**#2009-04-21 14:25:53#**

或者如果仍然失败，您可以使用**#'2009-04-21 14:25:53'#**

编辑：如果您启用 ANSI 92 或使用 ADO/OLEDB 作为数据库接口，上面可能会工作，感谢 David 指出

我建议你使用 YYYY-MM-DD HH:NN:SS 格式并在使用前用单引号 (') 尝试 # 就像我上面说的

# c# - 询问执行一行

> ID：771862
> 
> 赞同：0
> 
> 时间：2009-04-21T09:48:31.073
> 
> 标签：c#, c++

我希望用 C# 编写一个程序来逐行执行。

我的意思是相当于 C++

```
#include <stdio.h>

int main ()
{
  char c;
  puts ("Enter q to exit:");
  do {
    c = getchar();
    putchar(c);
  } while (c != 'q');
  return 0;
} 
```

c# 中的等价物是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-21T12:28:15.013

惯用的 c# 实现将通过[System.Console](http://msdn.microsoft.com/en-us/library/system.console.aspx)类。

特别是 [Read](http://msdn.microsoft.com/en-us/library/system.console.read.aspx)或 [ReadKey](http://msdn.microsoft.com/en-us/library/system.console.readkey.aspx) [ReadLine之一](http://msdn.microsoft.com/en-us/library/system.console.readline.aspx)

Read 最接近 getchar 的精神，尽管 ReadKey 使用起来更简单、更安全。如果您希望逐行操作而不是逐字符操作，那么 ReadLine 是您最好的选择。

```
using System;
using System.IO;

public static void Main(String[] args)
{
  ConsoleKeyInfo k;
  Console.WriteLine("Enter q to exit:");
  do {
    k = Console.ReadKey();
    Console.WriteLine(k.KeyChar);
  } while (k.KeyChar != 'q');
  return 0;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-21T09:52:39.737

使用 Console.Read（最接近 getchar()）、Console.ReadKey 和/或 Console.ReadLine。

# jsp - 自定义标签和 Java Bean 的区别？

> ID：771863
> 
> 赞同：4
> 
> 时间：2009-04-21T09:49:30.027
> 
> 标签：jsp, jsp-tags

自定义标签和 Java Bean 的区别？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-04-21T09:55:05.880

必须在 JSP 中解释和运行自定义 JSP 标记；Java Bean 没有。

自定义 JSP 标记必须扩展 javax.servlet.jsp.tagext.Tag 接口；Java Bean 没有。

自定义 JSP 标记可能使用其他 Java Bean 来完成它的工作，但反之则不然。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-21T10:01:49.700

自定义标签可以访问隐式对象，如请求、响应、会话等。JavaBeans 是普通的 java 类，对 JSP 一无所知。

Javabean 通常用于维护数据和自定义标记以实现功能或在 jsp 页面上实现逻辑。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-20T11:16:49.593

自定义标签可以访问所有隐式对象。JavaBean 是 Java 类，但所有 Java 类都不是 Java Bean。主要的是 - 自定义标签可以使用 java bean 相互通信。

# c# - 使用正则表达式用可变文本替换文本？

> ID：771865
> 
> 赞同：3
> 
> 时间：2009-04-21T09:50:26.343
> 
> 标签：c#, regex

假设我有一些包含很多单词“Find”实例的文本，我想用“Replace1”、“Replace2”、“Replace3”等文本替换它。数字是“Find”在文本。如何在 C# 中以最有效的方式做到这一点，我已经知道循环方式。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-04-21T09:58:37.213

A`MatchEvaluator`可以这样做：

```
string input = "FindbcFinddefFind", pattern = "Find";
int i = 1;
string replaced = Regex.Replace(input, pattern, match => "REPLACE" + i++); 
```

请注意，该`match`变量还可以访问`Match`等。使用 C# 2.0，您需要使用匿名方法而不是 lambda（但效果相同） - 以同时显示 this 和`Match`：

```
string input = "FindbcFinddefFind", pattern = "Find";
int i = 1;
string replaced = Regex.Replace(input, pattern, delegate(Match match)
{
    string s = match.Value.ToUpper() + i;
    i++;
    return s;
}); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-04-21T09:56:35.237

您可以使用采用 a 的重载[`MatchEvaluator`](http://msdn.microsoft.com/en-us/library/system.text.regularexpressions.matchevaluator.aspx)并在委托实现中提供自定义替换字符串，这将允许您一次完成所有替换。

例如：

```
var str = "aabbccddeeffcccgghhcccciijjcccckkcc";
var regex = new Regex("cc");
var pos = 0;
var result = regex.Replace(str, m => { pos++; return "Replace" + pos; }); 
```

# c++ - 如何制作跨平台的 c++ 内联汇编语言？

> ID：771867
> 
> 赞同：5
> 
> 时间：2009-04-21T09:50:51.677
> 
> 标签：c++, cross-platform, assembly

我破解了以下代码：

```
unsigned long long get_cc_time () volatile {
  uint64 ret;
  __asm__ __volatile__("rdtsc" : "=A" (ret) : :);
  return ret;
} 
```

它适用于 g++，但不适用于 Visual Studio。我怎样才能移植它？检测 VS / g++ 的正确宏是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-04-21T10:42:57.480

```
#if defined(_MSC_VER)
// visual c
#elif defined(__GCCE__)
// gcce
#else
// unknown
#endif 
```

我的内联汇编技能生疏了，但它的工作原理如下：

```
__asm
{
// some assembler code
} 
```

但是只使用**rdtsc**你可以只使用内在函数：

```
unsigned __int64 counter;
counter = __rdtsc(); 
```

[http://msdn.microsoft.com/en-us/library/twchhe95.aspx](http://msdn.microsoft.com/en-us/library/twchhe95.aspx)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-10-12T13:02:55.043

OP搁置的具体问题：我找到了一种定义适用于两种语法版本的宏的方法：

```
#ifdef _MSC_VER
#   define ASM(asm_literal) \
        __asm { \
            asm_literal \
        };
#elif __GNUC__ || __clang__
#   define ASM(asm_literal) \
        "__asm__(\"" \
            #asm_literal \
        "\" : : );"
#endif 
```

不幸的是，因为预处理器[在宏展开之前去掉了换行符](https://stackoverflow.com/a/1510919/894166)，所以你必须用这个宏来包围每个汇编语句。

```
float abs(float x) {
    ASM( fld     dword ptr[x] );
    ASM( fabs                 );
    ASM( fstp    dword ptr[x] );

    return x;
} 
```

但请注意，GCC 和 clang[使用 AT&T/UNIX 汇编语法](http://www.ibiblio.org/gferg/ldp/GCC-Inline-Assembly-HOWTO.html#s3)，而 MSVC 使用 Intel 汇编语法（虽然找不到任何官方来源）。但幸运的是，GCC/clang 也可以[配置为使用 Intel 语法](http://wiki.osdev.org/Inline_Assembly#Intel_Syntax)。要么使用`__asm__(".intel_syntax noprefix");`/ `__asm__(".att_syntax prefix");`（请务必重置更改，因为它会影响从那时起生成的*所有程序集，甚至是编译器从 C 源代码生成的程序集）。*这会给我们留下一个像这样的宏：

```
#ifdef _MSC_VER
#   define ASM(asm_literal) \
        __asm { \
            asm_literal \
        };
#elif __GNUC__ || __clang__
#   define ASM(asm_literal) \
        "__asm__(\".intel_syntax noprefix\");" \
        "__asm__(\"" \
            #asm_literal \
        "\" : : );" \
        "__asm__(\".att_syntax prefix\");"
#endif 
```

或者，您也可以使用 GCC/clang 使用`-masm=intel`标志进行编译，这会在全局范围内切换语法。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-04-21T10:27:37.407

VC++ 中有一个 _MSC_VER 宏，在 MSDN 中被描述为“Microsoft 特定”，并且可能在其他编译器上编译代码时没有定义。您可以使用#ifdef 来确定它是什么编译器，并为 gcc 和 VC++ 编译不同的代码。

```
#ifdef _MSC_VER
    //VC++ version
#else
    //gcc version
#endif 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-04-21T13:14:07.477

直接使用该`RDTSC`指令有一些严重的缺点：

*   TSC 不能保证在所有 CPU 上同步，因此如果您的线程/进程从一个 CPU 内核迁移到另一个 CPU 内核，则 TSC 可能会在时间上向前或向后“扭曲”，除非您使用线程/进程关联来防止迁移。
*   不能保证 TSC 以恒定速率前进，尤其是在启用了电源管理或“C1 时钟斜坡”的 PC 上。对于多个 CPU，这可能会增加偏差（例如，如果您有一个线程正在旋转而另一个线程正在休眠，则一个 TSC 可能会比另一个推进得更快）。
*   直接访问 TSC 不允许您利用[HPET](http://en.wikipedia.org/wiki/HPET)。

使用 OS 定时器接口更好，但根据实现的不同，仍然可能有一些相同的缺点：

*   Linux：[`clock_gettime()`](http://linux.die.net/man/3/clock_gettime)
*   视窗：[`QueryPerformanceCounter()`](http://msdn.microsoft.com/en-us/library/ms644904(VS.85).aspx)

另请注意，Microsoft Visual C++ 在针对 64 位处理器时不支持内联汇编，因此`__rdtsc()`Virne 指出了内在的。

# c++ - 编译Platform SDK程序的问题

> ID：771868
> 
> 赞同：1
> 
> 时间：2009-04-21T09:51:06.963
> 
> 标签：c++, windows, driver, platform-sdk

我正在尝试从这里编译示例；

[http://msdn.microsoft.com/en-us/library/ms682619(VS.85).aspx](http://msdn.microsoft.com/en-us/library/ms682619(VS.85).aspx)

我已经安装了 Platform SDK，但出现了这些错误；

```
Error   1   error LNK2019: unresolved external symbol _GetDeviceDriverBaseNameW@12 referenced in function _main DriverChecker.obj   DriverChecker
Error   2   error LNK2019: unresolved external symbol _EnumDeviceDrivers@12 referenced in function _main    DriverChecker.obj   DriverChecker
Error   3   fatal error LNK1120: 2 unresolved externals C:\Files\Projects\VS2008\DriverChecker\Debug\DriverChecker.exe  DriverChecker 
```

有人知道如何正确编译吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-21T09:56:48.900

您只需要`psapi.lib`在链接器选项中添加一个附加库。

编辑项目的属性，导航到链接器->输入，然后`"psapi.lib"`在显示附加依赖项的位置键入。

# vb.net - 如何根据 XML Schema 文件验证 XML 字符串

> ID：771874
> 
> 赞同：2
> 
> 时间：2009-04-21T09:52:53.717
> 
> 标签：vb.net, validation, xsd

我正在使用 Visual Studio 2008 在 .NET3.5 中开发 VB Web 应用程序。

在将某些 XML 添加到 HTML 表单以发布到第 3 方之前，我很难将其验证为字符串。我有一个来自第 3 方的 XML 模式文件进行验证，此时我希望应用程序在每次发布之前执行验证。

搜索后，我找到了对 XmlValidatingReader 的引用，但这已经过时了，我很难找到另一种方法来做到这一点。

此外，所有好的例子都在 C# 中——现在我被 VB 困住了。到目前为止，这就是我正在寻求帮助的东西！

```
Public Function ValidateXML(ByVal strXML As String) As Boolean

    ' er how do I get the schema file into here?
    Dim schema As XmlReader

    Dim settings As XmlReaderSettings = New XmlReaderSettings()
    settings.Schemas.Add("", schema)
    settings.ValidationType = ValidationType.Schema

    ' When I use LoadXML to get the string I can't use the settings object above to get the schema in??
    Dim document As XmlDocument = New XmlDocument()
    document.LoadXml(strXML)

    document.Validate(AddressOf ValidationEventHandler)

End Function

Private Sub ValidationEventHandler(ByVal sender As Object, ByVal e As ValidationEventArgs)
    ' Gonna return false here but haven't got to it yet! Prob set a variable for use above
End Sub 
```

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-04-21T10:00:02.887

这是一个示例： [VB.NET 中的 XmlSchemaValidator](http://www.vbdotnetheaven.com/UploadFile/jmiguel/XmlSchemaValidator04222005082129AM/XmlSchemaValidator.aspx)

**更新**- 试试这个：

```
Public Function ValidateXML(ByVal strXML As String) As Boolean
  Dim xsdPath As String = "path to your xsd"
  Dim schema As XmlReader = XmlReader.Create(xsdPath)
  Dim document As XmlDocument = New XmlDocument()
  document.LoadXml(strXML)
  document.Schemas.Add("", schema)
  document.Validate(AddressOf ValidationEventHandler)
End Function 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-21T12:57:54.050

这就是我最终选择的

```
Public validationErrors As String = ""

Public Function ValidPortalRequest(ByVal XMLPortalRequest As String) As Boolean
    Try
        Dim objSchemasColl As New System.Xml.Schema.XmlSchemaSet
        objSchemasColl.Add("xxx", "xxx")
        objSchemasColl.Add("xxx", "xxxd")
        Dim xmlDocument As New XmlDocument
        xmlDocument.LoadXml(XMLPortalRequest)
        xmlDocument.Schemas.Add(objSchemasColl)
        xmlDocument.Validate(AddressOf ValidationEventHandler)
        If validationErrors = "" Then
            Return True
        Else
            Return False
        End If
    Catch ex As Exception
        Throw
    End Try
End Function

Private Sub ValidationEventHandler(ByVal sender As Object, ByVal e As ValidationEventArgs)
    validationErrors += e.Message & "<br />"
End Sub 
```

与 Jose 相同，只是我添加了 2 个 XSD 作为 SchemaSet，而不是使用 XMLReader 读取它们。

# vb.net - Activator.CreateInstance - 解释一下，以便我理解

> ID：771876
> 
> 赞同：0
> 
> 时间：2009-04-21T09:54:22.293
> 
> 标签：vb.net, design-patterns, singleton

所以我正在查看一些示例代码，但我不知道该怎么做：

```
 Private Shared _instance As PollsProvider = Nothing

    Public Shared ReadOnly Property Instance() As PollsProvider
        Get
            If IsNothing(_instance) Then
                _instance = CType(Activator.CreateInstance( _
                    Type.GetType(Globals.Settings.Polls.ProviderType)), PollsProvider)
            End If
            Return _instance
        End Get
    End Property 
```

上述内容与我通常如何制作单身人士有什么区别：

```
 Private Shared _instance As PollsProvider = Nothing

    Public Shared ReadOnly Property Instance() As PollsProvider
        Get
            If IsNothing(_instance) Then
                _instance = New PollsProvider
            End If
            Return _instance
        End Get
    End Property 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-04-21T10:00:32.947

第一个代码片段读取要从配置创建的 PollsProvider 的类型，而第二个代码片段具有编译的 PollsProvider 的类型。因此，第一个片段允许您在 RealPollsProvider、TestPollsProvider、FiddledByOurEvilPaymastersPollsProvider 等之间切换配置（无需重新编译/重新部署） .

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-21T15:38:33.480

伊托尔森做对了。我将添加它看起来像 PollsProvider 可能是其他类继承的接口或类。

# performance - 为什么在实践中使用快速排序？

> ID：771883
> 
> 赞同：9
> 
> 时间：2009-04-21T09:55:40.650
> 
> 标签：performance, algorithm, sorting, quicksort

快速排序的最坏情况性能为 O(n ² )，但无论如何在实践中仍然广泛使用。为什么是这样？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2009-04-21T10:06:47.863

你不应该只关注最坏的情况，只关注时间复杂度。它更多的是关于平均而不是最差，它是关于时间**和**空间的。

快速排序：

*   平均时间复杂度为 Θ( *n* log *n* )；
*   可以用 Θ(log *n* ) 的空间复杂度来实现；

还要考虑到大 O 表示法不考虑任何常数，但在实践中，如果算法快几倍，它确实会有所不同。Θ( *n* log *n* ) 表示，该算法在*K*  *n*  log( *n* ) 中执行，其中*K*是常数。快速排序是具有最低*K*的比较排序算法。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2009-04-21T09:57:09.680

QuickSort 的平均渐近顺序是`O(nlogn)`并且由于较小的常数（更紧密的循环），它通常比堆排序更有效。事实上，有一个理论上的线性时间中值选择算法，您可以使用它来始终找到最佳枢轴，从而产生最坏的情况`O(nlogn)`。然而，普通的快速排序通常比这个理论上的快。

为使其更合理，请考虑 QuickSort 将在 中完成的概率。这只是意味着它几乎永远不会遇到那种糟糕的情况。`O(n`^(`2`)`)``1/n!`

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-01-15T23:48:12.277

有趣的是，快速排序平均比合并排序执行更多的比较——快速排序为 1.44 n lg n（预期），而合并排序为 n lg n。如果重要的是比较，那么合并排序将比快速排序更可取。

快速排序快速的原因是它具有许多其他理想的属性，这些属性在现代硬件上运行得非常好。例如，快速排序不需要动态分配。它可以在原始数组上就地工作，仅使用 O(log n) 堆栈空间（如果实施正确，最坏的情况）来存储递归所需的堆栈帧。尽管可以使用合并排序来执行此操作，但这样做通常会在合并步骤期间导致巨大的性能损失。其他排序算法（如堆排序）也具有此属性。

此外，快速排序具有出色的参考位置。分区步骤，如果使用 Hoare 的就地分区算法完成，本质上是从阵列两端向内执行的两次线性扫描。这意味着快速排序将有非常少量的缓存未命中，这在现代架构上对性能至关重要。另一方面，堆排序没有很好的局部性（它在整个数组中跳跃），尽管大多数合并排序实现具有合理的局部性。

快速排序也非常可并行化。一旦进行了初始分区步骤以将数组拆分为越来越小的区域，这两个部分就可以相互独立地进行排序。许多排序算法可以并行化，包括归并排序，但由于上述原因，并行快速排序的性能往往优于其他并行算法。另一方面，堆排序没有。

快速排序的唯一问题是它可能会降级到 O(n ² )，这在大型数据集上可能非常严重。避免这种情况的一种方法是让算法自省，并在退化的情况下切换到速度较慢但更可靠的算法之一。该算法称为[introsort](http://en.wikipedia.org/wiki/Introsort)，是一种出色的混合排序算法，它在没有病态情况的情况下获得了快速排序的许多好处。

总之：

*   除了递归中使用的堆栈帧外，快速排序是就地的，它占用 O(log n) 空间。
*   快速排序具有良好的参考局部性。
*   快速排序很容易并行化。

这解释了为什么快速排序往往优于纸面上可能更好的排序算法。

希望这可以帮助！

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-04-21T09:56:44.017

因为平均而言，它是最快的比较排序（就经过时间而言）。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-04-21T09:56:55.670

因为，在一般情况下，它是最快的排序算法之一。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-01-15T21:38:37.420

不过，除了最快之外，还可以通过在对数组进行排序之前对其进行洗牌来避免其中的一些不良情况。至于小数据集的弱点，显然不是一个大问题，因为数据集很小，排序时间可能也很短。

例如，我为快速排序和冒泡排序编写了一个 python 函数。冒泡排序需要大约 20 秒来对 10,000 条记录进行排序，7500 条记录需要 11 秒，5000 条记录需要 5 秒。快速排序在大约 0.15 秒内完成所有这些排序！

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-04-21T10:08:57.967

可能值得指出的是，C 确实具有库函数`qsort()`，但并不要求使用实际的 QuickSort 来实现它，这取决于编译器供应商。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-01-20T11:33:37.917

Bcs 这是一种算法，在 O(NlogN) 复杂度的大型数据集上运行良好。这也是占用恒定空间的就地算法。通过明智地选择枢轴元素，我们可以避免更糟糕的快速排序情况，并且即使在排序后的数组上也总是会在 O(NlogN) 中执行。

# django - 如何在 Django 模板中获取对象的类？

> ID：771890
> 
> 赞同：20
> 
> 时间：2009-04-21T09:57:01.163
> 
> 标签：django

如果我有一个需要类似布局但需要一些基于对象类的属性集的对象列表，我该如何获取类名，而**类**和其他**xx**值在模板中不可用。

```
{% for obj in objects %}
 <div 类={{obj.__class__.__name__}}
   ..
 </div>
{% endfor }}

```

我可能在这里缺少另一种方法..

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2013-01-12T08:52:20.983

您还可以编写自定义过滤器。我的[用例](https://stackoverflow.com/a/14291933/1123985)是检查 Django 表单中的 html 元素是否是复选框。此代码已使用 Django 1.4 进行了测试。

我按照有关[Custom Filters](https://docs.djangoproject.com/en/dev/howto/custom-template-tags/#registering-custom-filters)的说明进行操作。我的过滤器代码看起来像这样。

在`myapp/templatetags/class_tag.py`：

```
from django import template
register = template.Library()
@register.filter(name='get_class')
def get_class(value):
  return value.__class__.__name__ 
```

在您的模板文件中：

```
{% load class_tag %}

{% if Object|get_class == 'AClassName' %}
 do something
{% endif %}

{{ Object|get_class }} 
```

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2009-04-21T10:22:50.850

有点脏的解决方案

如果 objects 是属于模型的 QuerySet，则可以向模型添加自定义方法。

```
 class mymodel(models.Model):
     foo = models........

 def get_cname(self):
    class_name = ....
    return class_name 
```

然后在您的模板中，您可以尝试：

```
{% for obj in objects %}
   <div class="{{obj.get_cname}}">
     ..
  </div>
{% endfor }} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-11-01T19:30:24.343

简单一点；假设您的布局是单个模型的列表：

```
class ObjectListView(ListView):
    model = Person
    template_name = 'object_list.html'

    def model_name(self):
        return self.model._meta.verbose_name 
```

然后在`object_list.html`：

```
{% for obj in object_list %}
    <div class="{{view.model_name}}">...</div>
{% endfor }} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-11-28T22:15:22.817

如果您需要在几个课程中使用，David 对自定义过滤器的建议非常棒。

然而，Django 文档忽略了开发服务器不会自动检测新的模板标签，所以在我手动重新启动它之前，我一直被`TemplateSyntaxError class_tag is not a registered tag library`.

.

# c# - 数据完整性问题 C#

> ID：771891
> 
> 赞同：1
> 
> 时间：2009-04-21T09:57:06.357
> 
> 标签：c#, variable-assignment, overwrite

我的问题是下面的 decodedProxyExcerpt2 分配覆盖了 decodedProxyExcerpt1 我不知道为什么。

有什么线索吗？

提前致谢。

```
 DecodedProxyExcerpt decodedProxyExcerpt1 = new DecodedProxyExcerpt(stepSize);
        if (audiofactory.MoveNext(stepSize))
        {
            decodedProxyExcerpt1 = audiofactory.Current(stepSize);
        }
        // At this point decodedProxyExcerpt1.data contains the correct values.

        DecodedProxyExcerpt decodedProxyExcerpt2 = new DecodedProxyExcerpt(stepSize);
        if (audiofactory.MoveNext(stepSize))
        {
            decodedProxyExcerpt2 = audiofactory.Current(stepSize);
        }
        // At this point decodedProxyExcerpt2.data contains the correct values.
        // However, decodedProxyExcerpt1.data is overwritten and now holds the values of decodedProxyExcerpt2.data.

public class DecodedProxyExcerpt
{
    public short[] data { get; set; } // PCM data

    public DecodedProxyExcerpt(int size)
    {
        this.data = new short[size];
    }

} 
```

来自 AudioFactory：

```
 public bool MoveNext(int stepSize)
    {
        if (index == -1)
        {
            index = 0;
            return (true);
        }
        else
        {
            index = index + stepSize;
            if (index >= buffer.Length - stepSize)
                return (false);
            else
                return (true);
        }
    }

    public DecodedProxyExcerpt Current(int stepSize)
    {
        Array.Copy(buffer, index, CurrentExcerpt.data, 0, stepSize);
        return(CurrentExcerpt);
    }} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-04-21T10:06:21.670

从外观上看，它`audiofactory.MoveNext(stepSize)`保持相同的参考。这导致`audiofactory.Current(stepSize)`留在同一地址。

出于这个原因，但是`decodedProxyExcerpt1`和`decodedProxyExcerpt2`指向相同的引用，因此对一个的更改会传播到另一个。

所以，问题在于你的`AudioFactory`班级。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-21T11:57:55.490

类的实例存储为引用。

decodedProxyExcerpt1 和 decodedProxyExcerpt2 都是对同一个对象的引用——audiofactory.CurrentExcerpt。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-21T11:19:16.223

我问了一个朋友，他给了我一个提示，我可能一直在考虑在 C++ 中分配数组创建副本，而不是在 C# 中分配数组创建引用。

如果这是正确的并且

decodedProxyExcerpt1 = audiofactory.Current(stepSize);

正在设置参考（不是副本），那么覆盖是完全可以理解的。

# iphone - 在 Objective-C 中通过类传递变量

> ID：771895
> 
> 赞同：0
> 
> 时间：2009-04-21T09:58:40.893
> 
> 标签：iphone, objective-c, cocoa-touch, events

在我的场景中，我有 2 个视图控制器，一个连接到主视图，一个连接到第一个作为子视图。

现在假设我的 App Delegate 类想要将一个字符串传递给子视图控制器。实现这一目标的最佳实践是什么？如果我想将它传递给第一个控制器，我可以说类似

`[self.firstController getStringInCustomFunction:[NSString stringWithFormat:@"200%d", 9]];`

另请记住，此调用可能必须是异步的。

来自 ActionScript，通常我只会添加事件侦听器并通过事件移动我的变量。Objective-c 中的等价物是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-04-21T10:09:23.817

*来自 ActionScript，通常我只会添加事件侦听器并通过事件移动我的变量。Objective-c 中的等价物是什么？*

看看[`NSNotificationCenter`](http://developer.apple.com/DOCUMENTATION/Cocoa/Reference/Foundation/Classes/NSNotificationCenter_Class/Reference/Reference.html)。

具体来说，[`postNotificationName:object:userInfo`](http://developer.apple.com/DOCUMENTATION/Cocoa/Reference/Foundation/Classes/NSNotificationCenter_Class/Reference/Reference.html#//apple_ref/occ/instm/NSNotificationCenter/postNotificationName:object:userInfo:)您在其中创建一个[`NSNotification`](http://developer.apple.com/documentation/Cocoa/Reference/Foundation/Classes/NSNotification_Class/Reference/Reference.html)包含[`NSDictionary`](http://developer.apple.com/documentation/Cocoa/Reference/Foundation/Classes/NSDictionary_Class/Reference/Reference.html)您在其中传递的对象的一个`userInfo`​​。

在另一端，您有另一个对象已[注册以“听到”](http://developer.apple.com/documentation/Cocoa/Conceptual/Notifications/Articles/Registering.html#//apple_ref/doc/uid/20000723)特定名称的 NSNotification。该其他对象调用注册中指定的任何方法。您可以在此方法中解包`userInfo`字典，以检索感兴趣的对象。

# ajax - 通过ajax在partialpostback上渲染javascript

> ID：771896
> 
> 赞同：0
> 
> 时间：2009-04-21T09:58:42.330
> 
> 标签：ajax, postback

我在页面上有一个网格，以及通过 javacsript 在 dlDrivers_ItemDataBound 事件上动态创建的每个单元格的工具提示。我一直在我的页面上使用 ajax。当我第一次访问该页面时，所有工具提示都工作正常，但是当我在页面上执行一些操作时，网格是通过 ajax 进行的回发，但是这里的 javascript 没有呈现并且工具提示没有出现。

谁能给我一些解决方案…………

库什

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-04-21T10:10:58.383

您必须重新注册所需的脚本：

```
ScriptManager.RegisterStartupScript(this.Page, this.Page.GetType(), "* nameScript *", "* scriptCode *", true) 
```

就在更新面板更新之前。

# git - 在 Git 中选择性地还原或签出对文件的更改？

> ID：771897
> 
> 赞同：92
> 
> 时间：2009-04-21T09:59:11.080
> 
> 标签：git

是否有一个命令允许您部分撤消对工作目录中一个（或多个文件）的更改？

假设您已经编辑了很多文件，但您意识到您想要撤消一些更改回到已提交状态，而不是其他更改。

我正在设想一个选项，`git checkout`它的工作原理很像`git add -p`，即它逐个遍历文件并询问您是否要保留它。

* * *

## 回答 #1

> 赞同：117
> 
> 时间：2011-01-27T15:47:04.263

使用 git version >= 1.7.1 我可以

```
git checkout -p 
```

我不确定何时引入此功能。

* * *

## 回答 #2

> 赞同：87
> 
> 时间：2009-04-21T10:56:53.593

你可以使用

```
git add -p <path> 
```

暂存要保留在特定文件中的块，然后

```
git checkout -- <path> 
```

通过检查文件的暂存版本来丢弃您不想保留的工作树更改。

最后，您可以使用

```
git reset -- <path> 
```

将文件的暂存版本恢复为文件的最新提交版本，使您的更改未暂存。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2009-04-21T10:03:24.393

`git checkout $file`将文件的状态恢复`$file`到最后提交的状态。我认为您可以使用`git checkout SHA-1 -- $file`将文件还原为 SHA-1 标识的提交。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-04-21T10:31:57.147

您需要返回多少次提交并从中进行选择？如果它只是一个，也许在它之前取一个分支，签出你提交的文件，然后用`git add -p`你想要的方式添加它。然后你可以回到你所在的位置并从你的临时分支中签出文件。

那是：

```
git checkout -b temp troublesome-commit^
git checkout troublesome-commit -- path/to/file
git add -p path/to/file
git commit -c troublesome-commit
git checkout @{-1}
git checkout temp -- path/to/file
git commit path/to/file
git branch -D temp 
```

其他替代方法包括返回并编辑提交`git rebase -i`（将提交标记为`edit`，然后执行 a`git reset HEAD^`并在放回 shell 时重做提交）。

如果您需要从中选择的更改分布在一系列提交中，最好将它们提取为补丁（或覆盖所有这些的补丁）并手动编辑补丁，取出您想要保留的更改，并将残留物送入`git apply --reverse`.

# python - Python：如何通过 IMAP 将带有密件抄送收件人的草稿电子邮件存储到 Exchange Server？

> ID：771907
> 
> 赞同：6
> 
> 时间：2009-04-21T10:03:09.870
> 
> 标签：python, email, exchange-server, imap, bcc

我尝试通过 IMAP 将草稿电子邮件存储到 MS Exchange 上运行的文件夹中。一切正常，除了密件抄送收件人未显示在存储在服务器上的草稿消息中。如果我使用 MS Outlook 发送电子邮件，密件抄送收件人也不会收到电子邮件。如果我在将消息存储在服务器上后用 Python 读回消息，我可以在草稿中看到密件抄送。

以下 Python 代码重现了此行为：

```
import imaplib 
import time 
from email.MIMEMultipart import MIMEMultipart 
from email.MIMEText import MIMEText 

message = MIMEMultipart() 
message['Subject'] = 'Test Draft' 
message['From'] = 'test@test.net' 
message['to'] = 'test@test.com' 
message['cc'] = 'testcc@test.com' 
message['bcc'] = 'testbcc@test.com' 
message.attach(MIMEText('This is a test.\n')) 

server= imaplib.IMAP4('the.ser.ver.ip') 
server.login('test', 'test') 
server.append("Drafts" 
              ,'\Draft' 
              ,imaplib.Time2Internaldate(time.time()) 
              ,str(message)) 
server.logout() 
```

如果我运行此代码，草稿将存储到`Draft`Exchange Server 上的文件夹中。但如果我用 MS Outlook 查看草稿，它不包括`bcc`收件人 ( `message['bcc'] = 'testbcc@test.com'`)。`Message`, `to`, `from`,`cc`好的，没有错误。

如果我从 Exchange 文件夹下载已经包含密件抄送的草稿，我也可以看到密件抄送。只有上传对我不起作用。

非常感谢任何帮助。谢谢。顺便说一句，MAPI 不是一个选项。

**更新**：谢谢。`X-Receiver`对我不起作用。至于在 Outlook 中使用 IMAP 文件夹，我得到了一个有趣的结果。如果我通过 Outlook 中的 IMAP 文件夹访问草稿，我会看到密件抄送。但如果我通过 MAPI 文件夹访问它，我看不到它。会玩一点。

**结论**：感谢您的输入。实际上，代码工作得很好。请参阅下面的我找到的答案。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-05-28T13:22:51.230

实际上，代码工作得很好。它使用包括密件抄送在内的所有正确标题创建正确的邮件。

**邮件客户端如何显示密件抄送？**

[邮件客户端](http://en.wikipedia.org/wiki/E-mail_client)（例如，在我的情况下，通过 IMAP 或 MAPI的Python 或 MS Outlook）决定是否以及如何显示密件抄送标题。例如，Outlook 不显示 IMAP 文件夹中的密件抄送标题。这是一项将密件抄送收件人彼此隐藏的功能，因为他们之前没有从邮件中被剥离（从标准中不清楚是否允许一个密件抄送收件人查看所有其他密件抄送收件人，请参阅[Wikipedia](http://en.wikipedia.org/wiki/Blind_carbon_copy#Visibility)）。

**谁在发送电子邮件时处理密件抄送？**

现在假设我们在邮件客户端中起草了一条消息并将其存储在 IMAP 或 MAPI 文件夹中。提供 IMAP / MAPI 文件夹的服务器保持草稿消息不变。发送邮件时 bcc-headers 会发生什么取决于实现，并且可能取决于邮件客户端和[邮件传输代理](http://en.wikipedia.org/wiki/Mail_transfer_agent)（例如，在我的情况下为 MS Exchange Server）。简而言之，人们不同意是邮件客户端还是邮件传输代理负责删除密件抄送标头。然而，大多数开发人员似乎认为这是邮件客户端的业务，邮件传输代理不接触邮件（例如 MS Exchange、MS SMTP、Exim、OpenWave）。在这种情况下，邮件传输代理将电子邮件发送给定义在`RCPT TO:`[SMTP](http://en.wikipedia.org/wiki/SMTP)通信，否则保持电子邮件不变。但是，其他一些邮件传输代理会从电子邮件中去除密件抄送标头（例如 sendmail、Lotus Notes）。可以在从[这里](http://lists.exim.org/lurker/message/20040722.043422.7a079b9f.hu.html#exim-dev)开始的 Exim 邮件列表中找到非常详尽的讨论。

对于 MS Outlook 和 MS Exchange，MS Outlook 从不发送密件抄送（而是为每个密件抄送收件人发送单独的电子邮件），并且 MS Exchange 不会触及电子邮件标题，而是将完整的电子邮件（可能包括密件抄送收件人）发送给定义的收件人在`RCPT TO:`.

**结论**

我不明白密件抄送没有保证的行为，并且通常客户端处理密件抄送。我将重写我的 Python 代码以遍历密件抄送收件人并为每个密件抄送收件人生成一封电子邮件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-21T12:02:01.707

设计上可能是这样。毕竟，密件抄送的全部意义在于收件人彼此之间是隐藏的。

我了解您没有发送电子邮件，只是存储它。但我的猜测是，当邮件被 IMAP.append 到文件夹时，Exchange 的内部规则就会启动，从而导致密件抄送字段被剥离。

显然，当使用 Outlook 将邮件保存到文件夹时，密件抄送字段**不会**被删除。但我猜 Outlook 使用一些内部机制（MAPI？）与 Exchange 进行通信。

以上只是猜测。

您可以尝试一些有趣的事情：

*   在一个空的 Outlook/MAPI 配置文件中，创建一个 IMAP 帐户。将其设置为在 Exchange 服务器上存储草稿和已发送邮件。
*   查看使用 IMAP 的 Outlook 是否可以正确保存草稿的密件抄送。

我使用通过 IMAP 连接到 Exchange 的 Evolution 电子邮件客户端尝试了上述操作。使用outlook（以正常方式连接），然后我查看了草稿和已发送项目。两个地方都缺少密件抄送字段。

我相信这支持了我的理论。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-21T13:07:21.033

尝试设置密件抄送标头的替代版本：

```
X-Receiver: someguy@gmail.com 
```

特别是在您发送时，Exchange 会将其视为密件抄送。但我敢打赌，当您通过 IMAP 编写时，它不会剥离它。通过复制此行，您可以包含多个密件抄送收件人。

显然，这是一个完整的黑客攻击。

# c# - WPF：将用户控件添加到窗口

> ID：771910
> 
> 赞同：2
> 
> 时间：2009-04-21T10:04:50.380
> 
> 标签：c#, wpf, user-controls

首先，我是 WPF 和 C# 的新手，所以我遇到的问题可能很容易解决。但我现在有点卡住了。

让我解释一下我的问题。

我有一个 WPF 窗口和两个用户控件（控件和 ContentDisplayer）。

包含一些按钮的用户控件控件被添加到窗口的 XAML 中。这里没什么特别的。

窗口.XAML

```
<nv:Controls/> 
```

现在，我想要做的是当用户按下控件中的按钮时，需要将 ContentDisplayer 添加到我在窗口中拥有的 Scatterview 中。

我通过将按钮添加到窗口解决了这个问题，而不是使用用户控件控件。但这不是我想要的。

窗口.XAML.CS

```
private static void Button_ContactChanged(object sender, ContactEventArgs e)
    {
      object ob = Application.LoadComponent(new Uri(
      "NVApril;component\\XAML\\ContentDisplayer.xaml",
      System.UriKind.RelativeOrAbsolute));

    //Set a unique name to the UserControl
      string name = String.Format("userControl{0}",
      SurfaceWindow1_Scatterview.Items.Count);
      UserControl userControl = ob as UserControl;
      userControl.Name = name;

    //Add the new control to the Scatterview
      SurfaceWindow1_Scatterview.Items.Add(userControl);
      SurfaceWindow1_Scatterview.RegisterName(name, userControl);
    } 
```

所以真正的问题是：如何通过按下其他用户控件中的按钮将用户控件添加到窗口？

谢谢，

碳粉

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-05T21:46:51.543

在窗口顶部添加 xaml

```
xmlns:d="clr-namespace:SomeNamespace.Usercontrols" 
```

在这些已经存在的地方，您可以从智能列表中选择控件的命名空间。

然后您要放置控件类型的位置：

```
<d:yourusercontrolhere params /> 
```

并且您的用户控件可以添加到那里。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-21T18:02:10.310

在您的窗口中，听起来您需要将事件添加到控件的实例中。

```
<local:ContentDisplayer>
...
  <nv:Controls AddControl="ContactChanged"/>
... 
```

然后在您的 ContactChanged 事件处理程序中，您可以实例化一个新的 Controls 控件并将其添加到您正在使用的任何集合中，就像在上面的 Button_ContactChanged 事件处理程序中一样。

如果您需要进一步说明，请告诉我。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-21T10:56:52.783

在控件内公开一个事件，当您想要添加新控件时触发该事件。

```
public event EventHandler AddControl;

private void RaiseAddControl()
{
    if (AddControl!= null)
    {
        AddControl(this, EventArgs.Empty);
    }
} 
```

现在在你的窗口中接收那个事件

```
yourControl.AddControl += ContactChanged 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-24T20:56:15.020

我不知道你想做什么你的例子，

所以你有一个这样定义的控件：

```
public partial class somecontrolname : UserControl 
```

使用相应的 Xaml 文件

在代码中将它添加到窗口所需要做的就是首先您需要一个 LayoutRoot，例如窗口中的 Grid 控件，然后只需

[mylayoutcontrol].Children.Add(new somecontrolname());

也许我对你想要做什么有错误的想法，你的示例代码对我来说没有多大意义，看起来你正在尝试加载 xaml 源文件

# c# - 远程与套接字

> ID：771912
> 
> 赞同：5
> 
> 时间：2009-04-21T10:05:39.987
> 
> 标签：c#

远程处理和套接字之间的差异、优点和缺点是什么......这是服务器-客户端功能的最佳方式......

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2009-04-21T10:10:01.257

套接字是两个端点之间的原始二进制流。您需要包装自己的 RPC（等）层来处理消息，并处理大量基础架构代码。然而，由于它们非常接近金属，这可能非常非常有效。它不依赖于任何特定的架构，只要两端都使用相同的消息格式。像 protobuf-net 这样的工具可以帮助您为流构建二进制消息（而不是滚动您自己的序列化代码）。

Remoting 是一个 .NET 特定的工具，并且是非常脆弱的重新版本控制。我不建议对客户端/服务器进行远程处理 - 改用 WCF 之类的东西。

WCF 是一个更灵活的通信堆栈——强大且复杂，但也可以说有点臃肿（xml、复杂的安全性等）。它基于数据契约，因此*大致*开放（客户端/服务器可能不同），但仍然有点 .NET 的重点。

* * *

**编辑**信息，[protobuf-net](http://code.google.com/p/protobuf-net/)也提供了一个 RPC 堆栈；目前只提供了一个 HTTP 实现，但在某些时候我会添加原始 TCP/IP。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-04-21T12:08:20.833

与 Remoting 或 WCF 相比，直接套接字操作可以为您提供更多的功能、灵活性、性能和复杂性。但是，如果您需要低级别 TCP/IP 的好处，例如非阻塞 IO 和自定义协议，[Ragel等工具和](http://www.complang.org/ragel/)[Mina](http://mina.apache.org/)等框架可以减轻复杂性负担。我建议首先尝试使用 WCF 等高级 API，如果这些 API 不能满足您的需求，则仅使用直接套接字。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-04-21T10:18:02.547

我是 Marc Gravell 写的第二多 - 特别是远程处理和内部序列化“很容易”，但很容易被破坏，并且通常不能很好地扩展到公共网络（我对 .net 远程处理不太熟悉，但我想它需要众所周知的注册服务，在离开干净的实验室环境时通常会出现问题）。

从长远来看，实现标准甚至自己滚动的 RPC 更难但更安全：代码修订没有问题（或者它们更容易控制），缩放完全由您自己的代码控制，并且易于使用各种技术开发组件。

有很多工具可以帮助您轻松地在套接字上构建 RPC 机制，但我真的很喜欢使用普通的旧 HTTP——在您的服务器进程中运行一个简单的 HTTP 嵌入式服务器，您的客户端只需要一个 HTTP 客户端来发送消息. 如果您开发自己的简单 RESTful 调用语义（而不是使用 SOAP 或 XML-RPC 等臃肿的消息格式），那么实际上几乎无事可做 :-)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-04-21T11:52:45.080

我想说的是，在套接字和远程处理之间进行选择最好考虑您正在开发的应用程序类型。套接字绝对适用于您自己的协议实现、低级编程以及如果您必须与其他 tcp/ip 应用程序通信的唯一方法。远程处理是开发新的 .NET 通信应用程序的首选方式，在这种情况下，您无需使用 tcp/ip 堆栈并确保您的应用程序与其他应用程序（可能是旧应用程序）进行通信。如果您只能使用 .NET，最好选择 .NET 3.5 和 WCF 框架而不是 .net 2.0 远程处理，最后一个已死且不受支持的技术。

# sql - 在 Access 中插入查询

> ID：771913
> 
> 赞同：1
> 
> 时间：2009-04-21T10:06:05.337
> 
> 标签：sql, ms-access

我有从 Visual Studio 2005 构建的查询。我正在将 SQL 数据库中的记录插入 Access。

我的查询是

```
insert into i_mails
   (id,from_mails,to_mails,cc_mails,subject,body,
    anchor_level_id,attachment,forward_status ,reply_status,delete_status,        read_status, 
   received_date,response_date,
   batch,forward_score,delete_score,priority,
    is_auto_reply,parent_mail_id,case_id,time_bound) 

values (1,'a@a.com',  'a@a.com','a@a.com',  'Hi','--long html field--',
        7 , 'True' ,False,False,False,False,
        #12/12/2000 00:00:00# ,#12/12/2000 00:00:00#,
        0, '0','0',  1 , 
        'False',0,2,0) 
```

我在标准表达式中得到数据类型不匹配错误..
不知道这个错误在查询中是在哪里触发的......请帮助!!

访问数据库结构：

Id - 编号，
from_mails - 备忘录，
to_mails - 备忘录，
cc_mails - 备忘录，
主题 - 备忘录，
正文 - 备忘录，
anchor_level_id - 编号，
附件 - 是\否，
forward_status - 是\否，
reply_status - 是\否，
delete_status - 是\否，
read_status - 是\否，receive_date -
DateTime，
response_date - DateTime，
batch - Number，
forward_score - Number，delete_score - Number，
priority - Number，
is_auto_reply - Yes\No，
parent_mail_id - Number，
case_id - Number，
time_bound - Number，

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-04-21T10:17:53.623

对于 is_auto_reply，使用不带引号的 'false'。这似乎是问题

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-04-21T10:16:14.253

将每个值替换为 null（或其他“零”值）。从第一个开始，然后是第二个（将第一个保留为空），直到您将所有值替换为空值。每次更改后测试查询。

当查询开始工作时，您更改的最后一个值就是导致问题的值。

PS 它可能不是唯一不正确的值，但是使用这种方法你会发现所有输入错误的值。

希望这可以帮助

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-21T10:16:17.637

在不知道表结构和数据类型的情况下很难判断，但完全可以猜测

您尝试插入的值`received_date`&`response_date`

由于`#`符号分隔符不正确...

尝试将它们更改为

```
'12/12/2000 00:00:00' ,'12/12/2000 00:00:00' 
//i.e. Surround them with apostrophes 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-04-21T10:44:28.770

查看您尝试插入字段的数据：附件和 is_auto_reply 当您尝试插入字符串数据“True”和“False”时，它们应该是布尔值字段。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-04-21T10:19:26.600

可能值得检查您的“--long html 字段--”是否包含任何格式问题（例如，它是否包含任何撇号，这将被解释为过早结束该字段）。

除此之外，其他人所说的：没有表结构的细节，没有人能够帮助你太多。

# nlp - 如何进行词干提取或词形还原？

> ID：771918
> 
> 赞同：112
> 
> 时间：2009-04-21T10:07:03.993
> 
> 标签：nlp, stemming, lemmatization

我尝试过 PorterStemmer 和 Snowball，但两者都不能处理所有单词，缺少一些非常常见的单词。

我的测试词是：“**猫跑仙人掌仙人掌社区**”，都答对了不到一半。

**也可以看看：**

*   [产生真实单词的词干算法](https://stackoverflow.com/questions/190775)
*   [Stemming - 代码示例或开源项目？](https://stackoverflow.com/questions/595110)

* * *

## 回答 #1

> 赞同：145
> 
> 时间：2009-05-03T23:07:03.180

如果您了解 Python，[自然语言工具包 (NLTK)](http://www.nltk.org/)有一个非常强大的词形还原器，它利用了[WordNet](http://wordnet.princeton.edu/)。

请注意，如果您是第一次使用此词形还原器，则必须在使用之前下载语料库。这可以通过以下方式完成：

```
>>> import nltk
>>> nltk.download('wordnet') 
```

您只需执行一次。假设您现在已经下载了语料库，它的工作方式如下：

```
>>> from nltk.stem.wordnet import WordNetLemmatizer
>>> lmtzr = WordNetLemmatizer()
>>> lmtzr.lemmatize('cars')
'car'
>>> lmtzr.lemmatize('feet')
'foot'
>>> lmtzr.lemmatize('people')
'people'
>>> lmtzr.lemmatize('fantasized','v')
'fantasize' 
```

[nltk.stem 模块](http://www.nltk.org/api/nltk.stem.html)中还有其他词形还原器，但我自己没有尝试过。

* * *

## 回答 #2

> 赞同：29
> 
> 时间：2012-03-02T10:47:46.417

我使用[stanford nlp](http://nlp.stanford.edu/software/corenlp.shtml)进行词形还原。在过去的几天里，我一直遇到类似的问题。多亏了 stackoverflow 帮我解决了这个问题。

```
import java.util.*; 
import edu.stanford.nlp.pipeline.*;
import edu.stanford.nlp.ling.*; 
import edu.stanford.nlp.ling.CoreAnnotations.*;  

public class example
{
    public static void main(String[] args)
    {
        Properties props = new Properties(); 
        props.put("annotators", "tokenize, ssplit, pos, lemma"); 
        pipeline = new StanfordCoreNLP(props, false);
        String text = /* the string you want */; 
        Annotation document = pipeline.process(text);  

        for(CoreMap sentence: document.get(SentencesAnnotation.class))
        {    
            for(CoreLabel token: sentence.get(TokensAnnotation.class))
            {       
                String word = token.get(TextAnnotation.class);      
                String lemma = token.get(LemmaAnnotation.class); 
                System.out.println("lemmatized version :" + lemma);
            }
        }
    }
} 
```

如果稍后在分类器中使用，使用停用词来最小化输出引理也可能是一个好主意。请看一下John Conwell 编写的[coreNlp扩展。](https://github.com/cppexpert/coreNlp)

* * *

## 回答 #3

> 赞同：24
> 
> 时间：2009-04-21T10:41:35.220

[我在这个雪球演示网站](http://snowballstem.org/demo.html)上尝试了你的术语列表，结果看起来还不错....

*   猫->猫
*   运行->运行
*   跑->跑
*   仙人掌->仙人掌
*   仙人掌->仙人掌
*   社区 -> 社区
*   社区 -> 社区

词干分析器应该将词的变形形式转换为一些共同的词根。使该词根成为“正确”的字典词并不是词干分析器的工作。为此，您需要查看[形态学/正交分析器](http://www.informatics.sussex.ac.uk/research/groups/nlp/carroll/morph.html)。

我认为[这个问题](https://stackoverflow.com/questions/190775/stemming-algorithm-that-produces-real-words)或多或少是同一件事，而 Kaarel 对这个问题的回答是我从第二个链接中获取的。

* * *

## 回答 #4

> 赞同：21
> 
> 时间：2014-03-09T15:03:03.517

词干分析器与词形还原器的争论还在继续。这是一个更喜欢精确而不是效率的问题。您应该进行词形还原以实现具有语言意义的单位，并使用最少的计算量来索引单词及其变体在同一键下。

参见[Stemmers vs Lemmatizers](https://stackoverflow.com/questions/17317418/stemmers-vs-lemmatizers)

这是一个使用 python NLTK 的示例：

```
>>> sent = "cats running ran cactus cactuses cacti community communities"
>>> from nltk.stem import PorterStemmer, WordNetLemmatizer
>>>
>>> port = PorterStemmer()
>>> " ".join([port.stem(i) for i in sent.split()])
'cat run ran cactu cactus cacti commun commun'
>>>
>>> wnl = WordNetLemmatizer()
>>> " ".join([wnl.lemmatize(i) for i in sent.split()])
'cat running ran cactus cactus cactus community community' 
```

* * *

## 回答 #5

> 赞同：9
> 
> 时间：2009-04-21T10:59:58.047

Martin Porter 的官方页面包含PHP和[其他语言的](http://tartarus.org/~martin/PorterStemmer/)[Porter Stemmer](http://tartarus.org/~martin/PorterStemmer/php.txt)。

如果你真的很重视良好的词干提取，尽管你需要从 Porter 算法之类的东西开始，通过添加规则来修复数据集中常见的不正确案例来改进它，然后最后在规则中添加很多例外. 这可以通过键/值对（dbm/hash/dictionaries）轻松实现，其中键是要查找的单词，值是替换原始单词的词干。我曾经工作过的一个商业搜索引擎以修改后的 Porter 算法有 800 个例外。

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2018-02-22T15:22:22.627

根据我遇到的 Stack Overflow 和博客上的各种答案，这是我正在使用的方法，它似乎可以很好地返回真实的话。这个想法是将传入的文本拆分成一个单词数组（使用您喜欢的任何方法），然后找到这些单词的词性 (POS) 并使用它来帮助词干和词形还原。

您上面的示例效果不太好，因为无法确定 POS。但是，如果我们使用一个真实的句子，事情就会好得多。

```
import nltk
from nltk.corpus import wordnet

lmtzr = nltk.WordNetLemmatizer().lemmatize

def get_wordnet_pos(treebank_tag):
    if treebank_tag.startswith('J'):
        return wordnet.ADJ
    elif treebank_tag.startswith('V'):
        return wordnet.VERB
    elif treebank_tag.startswith('N'):
        return wordnet.NOUN
    elif treebank_tag.startswith('R'):
        return wordnet.ADV
    else:
        return wordnet.NOUN

def normalize_text(text):
    word_pos = nltk.pos_tag(nltk.word_tokenize(text))
    lemm_words = [lmtzr(sw[0], get_wordnet_pos(sw[1])) for sw in word_pos]

    return [x.lower() for x in lemm_words]

print(normalize_text('cats running ran cactus cactuses cacti community communities'))
# ['cat', 'run', 'ran', 'cactus', 'cactuses', 'cacti', 'community', 'community']

print(normalize_text('The cactus ran to the community to see the cats running around cacti between communities.'))
# ['the', 'cactus', 'run', 'to', 'the', 'community', 'to', 'see', 'the', 'cat', 'run', 'around', 'cactus', 'between', 'community', '.'] 
```

* * *

## 回答 #7

> 赞同：5
> 
> 时间：2009-04-21T16:42:10.220

[http://wordnet.princeton.edu/man/morph.3WN](http://wordnet.princeton.edu/man/morph.3WN)

对于我的很多项目，我更喜欢基于词典的 WordNet lemmatizer，而不是更具侵略性的搬运工词干提取。

[http://wordnet.princeton.edu/links#PHP](http://wordnet.princeton.edu/links#PHP)有一个指向 WN API 的 PHP 接口的链接。

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2009-04-21T13:52:22.750

查看 WordNet，一个用于英语的大型词汇数据库：

[http://wordnet.princeton.edu/](http://wordnet.princeton.edu/)

有用于以多种语言访问它的 API。

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2012-10-29T06:37:36.610

这看起来很有趣：麻省理工学院 Java WordnetStemmer： [http ://projects.csail.mit.edu/jwi/api/edu/mit/jwi/morph/WordnetStemmer.html](http://projects.csail.mit.edu/jwi/api/edu/mit/jwi/morph/WordnetStemmer.html)

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2014-05-17T22:27:32.150

看看[LemmaGen](http://lemmatise.ijs.si/) - 用 C# 3.0 编写的开源库。

测试词的结果（[http://lemmatise.ijs.si/Services](http://lemmatise.ijs.si/Services)）

*   猫->猫
*   跑步
*   跑->跑
*   仙人掌
*   仙人掌->仙人掌
*   仙人掌 -> 仙人掌
*   社区
*   社区 -> 社区

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2018-10-07T17:19:00.773

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2009-04-21T10:17:32.720

搜索 Lucene，我不确定是否有 PHP 端口，但我知道 Lucene 可用于许多平台。Lucene 是一个 OSS（来自 Apache）的索引和搜索库。自然而然，它和社区附加功能可能会有一些有趣的东西值得一看。至少您可以了解它是如何用一种语言完成的，这样您就可以将“想法”翻译成 PHP。

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2012-04-06T03:14:05.037

NLTK 中最新版本的词干分析器是 Snowball。

您可以在此处找到有关如何使用它的示例：

[http://nltk.googlecode.com/svn/trunk/doc/api/nltk.stem.snowball2-pysrc.html#demo](http://nltk.googlecode.com/svn/trunk/doc/api/nltk.stem.snowball2-pysrc.html#demo)

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2009-04-21T11:07:17.220

If I may quote my answer to the question StompChicken mentioned:

> *The core issue here is that stemming algorithms operate on a phonetic basis with no actual understanding of the language they're working with.*

As they have no understanding of the language and do not run from a dictionary of terms, they have no way of recognizing and responding appropriately to irregular cases, such as "run"/"ran".

If you need to handle irregular cases, you'll need to either choose a different approach or augment your stemming with your own custom dictionary of corrections to run after the stemmer has done its thing.

* * *

## 回答 #15

> 赞同：1
> 
> 时间：2012-05-23T17:53:26.500

您可以使用 Morpha 词干分析器。如果您打算从 Java 应用程序中使用它，UW 已将[morpha stemmer 上传到 Maven 中心。](http://mvnrepository.com/artifact/edu.washington.cs.knowitall/morpha-stemmer)有一个包装器使它更易于使用。您只需将其添加为依赖项并使用`edu.washington.cs.knowitall.morpha.MorphaStemmer`该类。实例是线程安全的（原来的 JFlex 有不必要的局部变量的类字段）。实例化一个类并运行`morpha`你想要阻止的单词。

```
new MorphaStemmer().morpha("climbed") // goes to "climb" 
```

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2015-04-22T03:45:12.467

在这里试试这个：http: [//www.twinword.com/lemmatizer.php](http://www.twinword.com/lemmatizer.php)

我在演示中输入了您的查询`"cats running ran cactus cactuses cacti community communities"`并获得`["cat", "running", "run", "cactus", "cactus", "cactus", "community", "community"]`了可选标志`ALL_TOKENS`。

**示例代码**

这是一个 API，因此您可以从任何环境连接到它。下面是 PHP REST 调用的样子。

```
// These code snippets use an open-source library. http://unirest.io/php
$response = Unirest\Request::post([ENDPOINT],
  array(
    "X-Mashape-Key" => [API KEY],
    "Content-Type" => "application/x-www-form-urlencoded",
    "Accept" => "application/json"
  ),
  array(
    "text" => "cats running ran cactus cactuses cacti community communities"
  )
); 
```

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2014-03-08T10:59:33.380

Martin Porter wrote Snowball (a language for stemming algorithms) and rewrote the "English Stemmer" in Snowball. There are is an English Stemmer for C and Java.

He explicitly states that the Porter Stemmer has been reimplemented **only** for historical reasons, so testing stemming correctness against the Porter Stemmer will get you results that you (should) already know.

> From [http://tartarus.org/~martin/PorterStemmer/index.html](http://tartarus.org/%7Emartin/PorterStemmer/index.html) (emphasis mine)
> 
> The Porter stemmer should be regarded as ‘<strong>frozen’, that is, strictly defined, and not amenable to further modification. As a stemmer, it is slightly inferior to the Snowball English or Porter2 stemmer, which derives from it, and which is subjected to occasional improvements. For practical work, therefore, the new Snowball stemmer is recommended. The Porter stemmer is appropriate to IR research work involving stemming where the experiments need to be exactly repeatable.

Dr. Porter suggests to use the English or Porter2 stemmers instead of the Porter stemmer. The English stemmer is what's actually used in the [demo site](http://snowball.tartarus.org/demo.php "demo site") as @StompChicken has answered earlier.

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2009-09-27T08:50:51.050

.Net lucene 有一个内置的搬运工词干分析器。你可以试试。但请注意，波特词干在推导引理时不考虑词上下文。（通过算法及其实现，你会看到它是如何工作的）

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2014-12-15T04:07:20.200

在 Java 中，我使用[tartargus-snowball](http://snowball.tartarus.org/demo.php)来提取词干

**马文：**

```
<dependency>
        <groupId>org.apache.lucene</groupId>
        <artifactId>lucene-snowball</artifactId>
        <version>3.0.3</version>
        <scope>test</scope>
</dependency> 
```

**示例代码：**

```
SnowballProgram stemmer = new EnglishStemmer();
String[] words = new String[]{
    "testing",
    "skincare",
    "eyecare",
    "eye",
    "worked",
    "read"
};
for (String word : words) {
    stemmer.setCurrent(word);
    stemmer.stem();
    //debug
    logger.info("Origin: " + word + " > " + stemmer.getCurrent());// result: test, skincar, eyecar, eye, work, read
} 
```

* * *

## 回答 #20

> 赞同：0
> 
> 时间：2018-06-13T02:14:15.647

我强烈推荐使用[Spacy](http://spacy.io)（基础文本解析和标记）和[Textacy](http://textacy.readthedocs.io/en/latest/api_reference.html)（建立在 Spacy 之上的更高级别的文本处理）。

[Spacy 中默认情况下可以使用](https://spacy.io/api/token#attributes)词形还原词作为标记的`.lemma_`属性，并且可以在使用 textacy 进行许多其他文本预处理时对文本进行词形还原。例如[，在创建一组术语](http://textacy.readthedocs.io/en/latest/api_reference.html#textacy.doc.Doc.to_bag_of_terms) [或单词](http://textacy.readthedocs.io/en/latest/api_reference.html#textacy.doc.Doc.to_bag_of_words)时，或者通常在执行一些需要它的处理之前。

我鼓励您在编写任何代码之前都检查一下，因为这可以为您节省大量时间！

* * *

## 回答 #21

> 赞同：-1
> 
> 时间：2018-05-09T21:07:20.773

```
df_plots = pd.read_excel("Plot Summary.xlsx", index_col = 0)
df_plots
# Printing first sentence of first row and last sentence of last row
nltk.sent_tokenize(df_plots.loc[1].Plot)[0] + nltk.sent_tokenize(df_plots.loc[len(df)].Plot)[-1]

# Calculating length of all plots by words
df_plots["Length"] = df_plots.Plot.apply(lambda x : 
len(nltk.word_tokenize(x)))

print("Longest plot is for season"),
print(df_plots.Length.idxmax())

print("Shortest plot is for season"),
print(df_plots.Length.idxmin())

#What is this show about? (What are the top 3 words used , excluding the #stop words, in all the #seasons combined)

word_sample = list(["struggled", "died"])
word_list = nltk.pos_tag(word_sample)
[wnl.lemmatize(str(word_list[index][0]), pos = word_list[index][1][0].lower()) for index in range(len(word_list))]

# Figure out the stop words
stop = (stopwords.words('english'))

# Tokenize all the plots
df_plots["Tokenized"] = df_plots.Plot.apply(lambda x : nltk.word_tokenize(x.lower()))

# Remove the stop words
df_plots["Filtered"] = df_plots.Tokenized.apply(lambda x : (word for word in x if word not in stop))

# Lemmatize each word
wnl = WordNetLemmatizer()
df_plots["POS"] = df_plots.Filtered.apply(lambda x : nltk.pos_tag(list(x)))
# df_plots["POS"] = df_plots.POS.apply(lambda x : ((word[1] = word[1][0] for word in word_list) for word_list in x))
df_plots["Lemmatized"] = df_plots.POS.apply(lambda x : (wnl.lemmatize(x[index][0], pos = str(x[index][1][0]).lower()) for index in range(len(list(x)))))

#Which Season had the highest screenplay of "Jesse" compared to "Walt" 
#Screenplay of Jesse =(Occurences of "Jesse")/(Occurences of "Jesse"+ #Occurences of "Walt")

df_plots.groupby("Season").Tokenized.sum()

df_plots["Share"] = df_plots.groupby("Season").Tokenized.sum().apply(lambda x : float(x.count("jesse") * 100)/float(x.count("jesse") + x.count("walter") + x.count("walt")))

print("The highest times Jesse was mentioned compared to Walter/Walt was in season"),
print(df_plots["Share"].idxmax())
#float(df_plots.Tokenized.sum().count('jesse')) * 100 / #float((df_plots.Tokenized.sum().count('jesse') + #df_plots.Tokenized.sum().count('walt') + #df_plots.Tokenized.sum().count('walter'))) 
```

# seo - 用于抓取网站并检索每个页面的所有元信息的在线工具

> ID：771919
> 
> 赞同：0
> 
> 时间：2009-04-21T10:07:24.960
> 
> 标签：seo, web-crawler, meta-tags

有谁知道可以抓取任何给定网站并仅返回元关键字和元描述信息的免费在线工具？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-29T17:50:03.567

假设您可以访问 Linux/Unix：

```
mkdir temp
cd temp
wget -r SITE_ADDRESS 
```

然后，对于关键字：

```
egrep -r -h 'meta[^>]+name="keywords' * | sed 's/^.*content="\([^"]*\)".*$/\1/g' 
```

和描述：

```
egrep -r -h 'meta[^>]+name="description' * | sed 's/^.*content="\([^"]*\)".*$/\1/g' 
```

如果您想要所有唯一关键字，请尝试：

```
egrep -r -h 'meta[^>]+name="keywords' * | sed 's/^.*content="\([^"]*\)".*$/\1/g' | sed 's/\s*,\s*/\n/g' | sort | uniq 
```

我敢肯定有一个单线或程序可以做到这一点，而且肯定有更简单的答案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-05-27T12:37:13.900

要检索所有元信息，请尝试使用此工具[Meta Tags Analyzer](http://www.seotoolsfree.in/meta-tags-analyzer/)

# java - 帮助处理非常奇怪的 Java GC 行为

> ID：771920
> 
> 赞同：1
> 
> 时间：2009-04-21T10:07:42.540
> 
> 标签：java, garbage-collection

我在 Apache 后面的 JBoss 上运行了一个 Java Web 应用程序（通过 mod_jk），我看到了一些非常奇怪的 GC 行为。我在这个问题上附上了一张图表。有没有人见过类似的 GC 行为？它是在服务器级机器上运行的 Java 6，默认 GC 调整来自人体工程学。谢谢。

[![](https://lh5.ggpht.com/_EW1juK89-8o/Se2am0804UI/AAAAAAAAAJY/Jy5-V3g8zuU/s800/gc-log-20090420.png)](http://picasaweb.google.com/lh/photo/0vfc320Ac_3eIc9YLtB-iw?authkey=Gv1sRgCJbomJPboPPcGA&feat=embedwebsite)

注意：上图是全尺寸版本的链接。该图是使用[GCViewer](http://www.javaperformancetuning.com/tools/gcviewer/index.shtml)生成的。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-04-21T11:03:09.787

The problem seems to be that the system can't recover sufficient memory even after a full garbage collection. This also has the negative effect of promoting objects to tenured and survivor spaces that don't really belong there.

The size of the old generation should settle down over time, most objects are (or at least should be) very short lived. If you find that the old generation keeps growing then there may be a resource leak somewhere. From your graph it seems like some allocation is tipping the system over the edge and into a gc death spiral.

Try to get the an idea of what objects are being created, and, more importantly, how long they are hanging around. This will give you the best idea of where you should be looking.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-21T10:27:47.313

我可以看到图像，但无法正确读取 X 和 Y 轴上的内容。我假设 JVM 运行一段时间后 GC 的频率正在增加。这可能是因为您当时获得了更多负载。如果你开启了 GC 日志，那么你可以检查 JVM 是否在中间改变了 GC 策略。

# licensing - CDDL（Suns OS 许可证）和 GPL 之间的区别

> ID：771935
> 
> 赞同：3
> 
> 时间：2009-04-21T10:14:56.080
> 
> 标签：licensing

*   如果被商业软件使用，我有什么义务？
*   它是 GPLish 还是更接近 ASL 2 ？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-04-21T11:17:08.567

IANAL，但 FSF[已声明](http://www.gnu.org/licenses/license-list.html#SoftwareLicenses)CDDL 与 GPL 不兼容。在链接方面，它似乎具有 LGPL 的一些特性（允许从具有不同许可证的代码链接）。

我会非常仔细地阅读[法律文本并咨询贵公司的律师。](http://www.sun.com/cddl/cddl.html)您对代码本身所做的任何更改也必须进行 CDDL。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2011-11-14T23:14:00.700

我是通过一个询问 Sun（现在的 Oracle）软件在 GPL 和 CDDL 下的双重许可的人来到这个页面的。这意味着您可以根据一种或另一种许可的条款自由使用该软件，或者（正如大多数人似乎正在做的那样）为下游用户进行双重许可。

# c++ - 如何测量Windows上进程使用的用户时间？

> ID：771944
> 
> 赞同：2
> 
> 时间：2009-04-21T10:18:00.097
> 
> 标签：c++, windows, cross-platform

在 linux 上我们可以使用“time”命令。或者来自 C++：

```
#include <sys/time.h>
#include <sys/resource.h>

int getrusage(int who, struct rusage *usage); 
```

如何在 Windows 上做最接近的事情？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-04-21T10:24:07.820

[获取处理时间](http://msdn.microsoft.com/en-us/library/ms683223(VS.85).aspx)

这给出了 lpUserTime [out] ：指向 FILETIME 结构的指针，该结构接收进程在用户模式下执行的时间量。确定进程的每个线程在用户态执行的时间，然后将所有这些时间相加得到这个值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-21T15:22:41.457

进行精确时间测量的最佳方法是使用独立于平台的库组件，如[ACE_High_Res_Timer](http://www.dre.vanderbilt.edu/Doxygen/Stable/ace/classACE__High__Res__Timer.html)。

# sql - PL/SQL 中的函数和过程有什么区别？

> ID：771949
> 
> 赞同：75
> 
> 时间：2009-04-21T10:18:41.827
> 
> 标签：sql, stored-procedures, function, plsql

PL/SQL 中的函数和过程有什么区别？

* * *

## 回答 #1

> 赞同：54
> 
> 时间：2009-04-21T10:24:43.560

过程没有返回值，而函数有。

例子：

```
CREATE OR REPLACE PROCEDURE my_proc
   (p_name IN VARCHAR2 := 'John') as begin ... end

CREATE OR REPLACE FUNCTION my_func
   (p_name IN VARCHAR2 := 'John') return varchar2 as begin ... end 
```

请注意函数如何在参数列表和“as”关键字之间有一个返回子句。这意味着函数体内的最后一条语句应该是这样的：

```
return(my_varchar2_local_variable); 
```

其中 my_varchar2_local_variable 是该函数应返回的一些 varchar2。

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2009-04-21T10:32:19.377

可以将函数内联到 SQL 语句中，例如

```
select foo
      ,fn_bar (foo)
  from foobar 
```

这不能用存储过程来完成。查询优化器的架构限制了在这种情况下函数可以做什么，要求它们是纯的（即相同的输入总是产生相同的输出）。这限制了函数中可以执行的操作，但如果它被定义为“纯”，则允许它在查询中内联使用。

否则，函数（不一定是确定性的）可以返回变量或结果集。在函数返回结果集的情况下，您可以将它与查询中的其他选择结合起来。但是，您不能在相关子查询中使用这样的非确定性函数，因为优化器无法预测将返回哪种类型的结果集（这在计算上是难以处理的，例如停机问题）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-08-30T09:27:12.743

它以极其简单的方式表达了这个意思。

**职能 ：**

这些子程序返回一个**值**；主要用于计算和返回一个值。

**程序 ：**

这些子程序**不**直接返回值；主要用于执行一个动作。

**示例程序：**

```
CREATE OR REPLACE PROCEDURE greetings

BEGIN 

dbms_output.put_line('Hello World!');

END ;
/ 
```

**执行独立程序：**

可以通过两种方式调用独立过程：

• 使用`EXECUTE`关键字 • 从 PL/SQL 块调用过程名称

该过程也可以从另一个 PL/SQL 块调用：

```
BEGIN 
greetings;
END;
/ 
```

**功能：**

```
CREATE OR REPLACE FUNCTION totalEmployees 
RETURN number IS
total number(3) := 0;
BEGIN 
SELECT count(*) into total 
FROM employees;
RETURN total; 
END;
/ 
```

`totalCustomers`以下程序从另一个块调用函数

```
DECLARE 
c number(3);
BEGIN 
c := totalEmployees();
dbms_output.put_line('Total no. of Employees: ' || c);
END;
/ 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2017-08-31T05:02:45.047

存储过程和函数都是位于数据库中的命名块，可以在需要时执行。

主要区别在于：

1.  存储过程可以选择使用 out 参数返回值，但也可以以不返回值的方式编写。但是，函数必须返回一个值。

2.  SELECT 语句中不能使用存储过程，而 SELECT 语句中可以使用函数。

实际上，我会为一组特定的需求选择一个存储过程，并为一个可以在多个场景中共享的通用需求选择一个函数。例如：比较两个字符串，或修剪它们或取最后一部分，如果我们有一个函数，我们可以将它全局用于我们拥有的任何应用程序。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-02T05:39:11.313

以下是过程和功能之间的主要区别，

1.  过程被命名为 PL/SQL 块，它执行一项或多项任务。其中函数被命名为执行特定操作的 PL/SQL 块。
2.  过程可能会或可能不会返回值，而函数应该返回一个值。
3.  我们可以在 select 语句中调用函数，而作为过程我们不能。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-08-31T12:55:30.597

简而言之 - 函数返回一些东西。您可以在 SQL 查询中使用函数。过程是处理数据的代码的一部分，但您不能从查询中调用过程，您必须在 PL/SQL 块中运行它。

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2011-06-29T06:53:28.790

1.  我们可以在存储过程中调用存储过程，在函数中调用函数，在函数中调用StoredProcedure，但不能在存储过程中调用函数。
2.  我们可以在 select 语句中调用函数。
3.  我们可以从函数返回值，而无需将输出参数作为参数传递给存储过程。

这就是我发现的不同之处。如果有请告诉我。

# c# - c# 使用 web 客户端检查服务器上的文件

> ID：771950
> 
> 赞同：0
> 
> 时间：2009-04-21T10:19:25.570
> 
> 标签：c#, client

C# 2008

我使用了 WebClient DownloadFile 方法。

我可以下载我想要的文件。但是，客户坚持创建包含版本号的不同文件夹。所以文件夹的名称应该是这样的：1.0.1、1.0.2、1.0.3 等。

因此，这些文件将包含在本案例文件夹 1.0.3 中的最新版本中。但是，我的 Web 客户端如何检测哪个是最新的？

客户端将在启动时检查此内容。除非我实际下载所有文件夹然后进行比较。我不确定我还能如何做到这一点。

非常感谢您的任何建议，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-04-21T10:22:31.490

创建一个为您提供当前版本号的页面。

```
string versionNumber = WebClient.DownloadString(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-04-21T12:00:59.727

[允许在 IIS 中浏览目录](http://blog.crowe.co.nz/archive/2006/03/18/603.aspx)并下载根文件夹。然后你可以找到最新的版本号并构造实际的 url 来下载。这是一个示例（假设您的目录格式为 Major.Minor.Revision）：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Net;
using System.Text.RegularExpressions;

class Program
{
    static void Main(string[] args)
    {
        using (var client = new WebClient())
        {
            var directories = client.DownloadString("http://example.com/root");
            var latestVersion = GetVersions(directories).Max();
            if (latestVersion != null)
            {
                // construct url here for latest version
                client.DownloadFile(...);
            }
        }
    }

    static IEnumerable<Version> GetVersions(string directories)
    {
        var regex = new Regex(@"<a href=""[^""]*/([0-9]+\.[0-9]+\.[0-9])+/"">",
            RegexOptions.IgnoreCase);

        foreach (Match match in regex.Matches(directories))
        {
            var href = match.Groups[1].Value;
            yield return new Version(href);
        }
        yield break;
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-21T10:35:59.167

[这个问题](https://stackoverflow.com/questions/728862/getting-image-from-hyperlink-and-not-from-folder-to-populate-my-repeater-control)可能对你有一些有用的信息。请阅读我的答案，该答案涉及远程服务器上的枚举文件。

# asp.net - ASP.NET 页面验证

> ID：771952
> 
> 赞同：1
> 
> 时间：2009-04-21T10:21:01.090
> 
> 标签：asp.net, validation

我有一个要求，其中我有一堆大约 10 个 aspx 页面。用户应该能够使用导航从一个屏幕转到另一个屏幕。所有范围、自定义、正则表达式验证器都需要归档，以便输入的数据是正确的。必填字段在这个阶段不需要输入，用户可以跳过必填字段。在最后一页，我需要找出所有必需的字段，如果不完整的想要向用户显示，这些字段是必需的，类似于摘要，带有指向控件留空页面的链接。有没有人有任何好的想法来在用户离开的页面上进行验证，并且可以在提交数据之前最后进行验证。任何指针将不胜感激。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-04-21T10:32:19.627

验证器构成它们所在页面的一部分。您不能使用内置的验证器控件来验证序列中前几页上的输入字段。如果您必须这样做，那么您应该实现自己的验证框架，该框架验证每个页面上的数据，但在摘要页面上提供反馈。

如果您只在页面序列的末尾向用户提供反馈，您应该研究面临的可用性问题。他/她将被要求返回几页并在那里重试输入。我认为这根本不是一个好的选择。

更好的选择是使用 ASP.NET 向导控件（它在单独的面板中加载顺序 UI，但在同一页面上）。这将使您能够将验证器与您的设置结合使用。[Steve C. Orr 的这篇文章](http://steveorr.net/articles/Wizard.aspx)很好地介绍了将验证器与向导控件一起使用。

或者，您可以按照其他人的建议使用 AJAX Tab 控件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-21T10:25:01.313

您可以通过使用 TabControl（随 Ajax Control Toolkit 提供）来实现此目的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-21T10:26:47.177

我在 Asp.net MVC 中应用的相同，但我建议您使用 Tab 控件而不是使用 Bunch of pages as sshow 发布。

# javascript - 你如何在javascript中从浏览器窗口顶部和左侧获取en元素的坐标？

> ID：771964
> 
> 赞同：1
> 
> 时间：2009-04-21T10:26:43.087
> 
> 标签：javascript, html

我需要获取相对于浏览器窗口的元素坐标。你如何在 javascript 中得到它？

# browser - 链接到在网页中打印

> ID：771966
> 
> 赞同：27
> 
> 时间：2009-04-21T10:26:51.933
> 
> 标签：browser, printing, webpage

我可以在我的网页上放置打印机的链接吗？

像 Ctrl-P 一样在 Firefox、IE 中转到同一页面。

谢谢你。

* * *

## 回答 #1

> 赞同：50
> 
> 时间：2009-04-21T10:28:37.983

```
<a href="javascript:if(window.print)window.print()">Print</a> 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2009-04-21T10:28:58.730

将此添加到您的链接：

```
onclick="window.print();" 
```

# excel - Excel公式中是否有变量之类的东西？

> ID：771973
> 
> 赞同：46
> 
> 时间：2009-04-21T10:30:46.683
> 
> 标签：excel

我讨厌重复函数，尤其是在 Excel 公式中。有什么办法可以避免类似的事情：

```
=IF( VLOOKUP(A1, B:B, 1, 0) > 10, VLOOKUP(A1, B:B, 1, 0) - 10, VLOOKUP(A1, B:B, 1, 0) ) 
```

[以上只是问题的一个简单示例，而不是我正在使用的特定公式。]

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2009-04-21T10:52:57.080

您可以为公式的 VLOOKUP 部分定义名称。

1.  突出显示包含此公式的单元格
2.  在插入菜单上，转到名称，然后单击定义
3.  输入变量的名称（例如“值”）
4.  在“引用到”框中，输入您的 VLOOKUP 公式：`=VLOOKUP(A1,B:B, 1, 0)`
5.  单击添加，然后关闭对话框
6.  在您的原始公式中，将 VLOOKUP 部分替换为您刚刚定义的名称：`=IF( Value > 10, Value - 10, Value )`

步骤 (1) 在这里很重要：我猜在第二行，您希望 Excel 使用`VLOOKUP(A2,B:B, 1, 0)`第三行`VLOOKUP(A3,B:B, 1, 0)`等。步骤 (4) 通过使用相对引用 ( `A1`and `B:B`) 而不是绝对引用 ( `$A$1`and `$B:$B`) 来实现这一点。

> **笔记：**
> 
> 1.  **对于带有功能区的较新 Excel 版本**，请转到公式功能区 -> 定义名称。之后也是一样。此外，要使用您的姓名，您可以在“定义名称”下的“在公式中使用”，同时编辑公式，或者开始输入，Excel 会建议名称（来源：Michael Rusch）
>     
>     
> 2.  **缩短步骤：** 1\. 右键单击​​一个单元格，然后单击定义名称... 2\. 输入名称和要与该名称/局部变量关联的公式 3\. 使用变量（来源：Jens Bodal）

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2021-01-13T14:24:07.043

现在您可以使用**函数 LET**在 Excel 公式中声明变量。 *此功能自 2020 年 6 月起适用于 Microsoft 365 用户。*

鉴于您的示例，公式将是：

```
=LET(MyFunc,VLOOKUP(A1,B:B,1,0), IF(MyFunc > 10, MyFunc - 10, MyFunc ) ) 
```

第一个参数是变量名，第二个参数是函数或范围。您可以添加更多对参数变量、函数/范围。

添加变量后，最后一个参数将是您感兴趣的公式——调用您刚刚创建的变量。

有关详细信息，请在[此处](https://support.microsoft.com/en-us/office/let-function-34842dd8-b92b-4d3f-b325-b8b8f9908999)访问 Microsoft 网页。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2009-04-21T10:35:51.600

您可以将中间值存储在单元格或列中（如果您选择可以隐藏）

```
C1: = VLOOKUP(A1, B:B, 1, 0)
D1: = IF(C1 > 10, C1 - 10, C1) 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-04-21T10:34:16.347

两种选择：

*   `VLOOKUP`在自己的单元格中运行：（`=VLOOKUP(A1, B:B, 1, 0)`例如，C1），然后是引用 C1 的公式：`=IF( C1 > 10, C1 - 10, C1 )`
*   创建一个UDF：

```
 Function MyFunc(a1, a2, a3, a4)
    Dim v as Variant
    v = Application.WorksheetFunction.VLookup(a1, a2, a3, a4)
    If v > 10 Then
        MyFunc = v - 10
    Else
        MyFunc = v
    End If
End Function 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-04-21T10:40:12.260

是的。但不是直接。

更简单的方法

*   您可以在一个单元格中发布 Vlookup() 并在需要的地方使用其地址。- 这可能是在 Excel 中使用变量的唯一直接方式。

或者

*   您可以从 VBE 宏中将 Vlookup(reference)-10 定义为包装函数。按 Alt+f12 并使用该功能

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-09-13T14:33:37.780

与变量无关，您的示例也将通过以下方式解决`MOD`：

```
=Mod(VLOOKUP(A1, B:B, 1, 0);10) 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2016-08-25T10:52:12.160

定义包含查找的 NAME 是一个很好的解决方案，但是，它似乎总是将工作表名称与单元格引用一起存储。但是，我认为如果您删除“”引号中的工作表名称但留下“！”，它可能会起作用。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-04-21T10:39:57.550

没有办法在 Excel 的公式栏中定义变量。作为一种解决方法，您可以将函数放在另一个单元格中（可选地，隐藏内容或将其放在单独的工作表中）。否则，您可以创建一个[VBA 函数](http://www.wikihow.com/Create-a-User-Defined-Function-in-Microsoft-Excel)。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2013-04-18T14:32:07.017

我知道这有点离题，但跟进 Jonas Bøhmer 提出的解决方案，实际上我认为 MOD 是您示例的最佳解决方案。

如果您的意图是将结果限制为一位数，那么 MOD 是实现它的最佳方法。

IE。假设 VLOOKUP(A1, B:B, 1, 0) 返回 23。您的 IF 公式将简单地进行此计算：23 - 10 并返回 13 作为结果。

另一方面，MOD(VLOOKUP(A1, B:B, 1, 0), 10) 将 23 除以 10 并显示余数：3。

回到主题，当我需要使用重复某些部分的公式时，我通常将其放在另一个单元格上，然后像某些人已经建议的那样将其隐藏。

# c# - 设置传输规则适用于 powershell，但在使用 Web 界面时失败

> ID：771977
> 
> 赞同：0
> 
> 时间：2009-04-21T10:32:16.927
> 
> 标签：c#, powershell, exchange-server

我有一个修改传输规则的 powershell 脚本。它可以在 powershell 上完美运行，我想创建一个 Web 界面，以便非技术人员可以编辑传输规则（特别是重定向），但是当我尝试从 .net 网站运行它时，set-transportrule 命令似乎被忽略了。脚本是：

```
$rule = "Redirect -> " + $args[0]    
$ca = (get-transportrule $rule).Actions    
$ca[0].addresses = get-mailbox $args[1]    
set-transportrule $box -Action $ca    
$ca = (get-transportrule $rule).Actions[0]    
$ca.addresses 
```

该网站将这两个参数传递给脚本。

我什至尝试使用 pipeline.commands 传递单个命令，然后调用管道，但结果是一样的。

我已经尝试为网站提供具有 NetworkService 身份的自己的应用程序池，但它仍然无法正常工作。

我的想法用完了，有人可以帮忙吗？

非常感谢，

安德鲁

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-22T21:40:06.643

我猜这是权限不足的情况。网络服务在设计上几乎没有权限。尝试将应用程序池更改为您自己的凭据并查看脚本是否有效，然后（如果有效）找出更永久的解决方案（例如专用服务帐户。）

# iphone - 示例代码 MoviePlayer 问题

> ID：771980
> 
> 赞同：2
> 
> 时间：2009-04-21T10:33:07.910
> 
> 标签：iphone, movieplayer

我之前已经发布过这个问题，但无法得到答案，所以我再次发布。关于从 iphone 开发者网站下载的 MoviePlayer 示例，当我按下完成按钮时，电影播放器​​控制模式下，电影完成并退出到主查看，同时调用了moviePlayBackDidFinish函数，但是当我再次播放电影时，播放器屏幕一直闪烁，如何防止这种情况？

我没有做任何更改的代码完全是从从苹果网站下载的示例代码构建的，以前有没有人遇到过这个问题，并解决了它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-11-11T21:34:21.897

此问题仅在模拟器中发生，而不在实际设备上发生。如果你想摆脱这个，你需要释放 MoviePlayer 并在每次播放电影时分配一个新的。例如：

```
- (void) moviePlayBackDidFinish:(NSNotification*)notification
{
    // remove observer
    [[NSNotificationCenter defaultCenter] 
     removeObserver:self
     name:MPMoviePlayerPlaybackDidFinishNotification
     object:thePlayer];

    [thePlayer release];
} 
```

和

```
thePlayer = [[MPMoviePlayerController alloc] initWithContentURL:theMovie];

[[NSNotificationCenter defaultCenter] 
     addObserver:self 
     selector:@selector(moviePlayBackDidFinish:) 
     name:MPMoviePlayerPlaybackDidFinishNotification 
     object:thePlayer];

[thePlayer play]; 
```

别处。

# java - 什么是上下文对象设计模式？

> ID：771983
> 
> 赞同：61
> 
> 时间：2009-04-21T10:34:44.597
> 
> 标签：java, design-patterns

什么是上下文对象设计模式？

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2009-07-16T04:54:46.840

上下文是数据的集合，通常存储在`Map`自定义类或自定义类中，该类充当具有访问器和修饰符的结构。它用于维护状态和在系统内共享信息。[有关详细说明，请参阅此 PDF](https://www.dre.vanderbilt.edu/~schmidt/PDF/Context-Object-Pattern.pdf)。虽然它可以用于高效和有效的数据共享，但您应该注意，许多人对`Context`作为[反模式](https://stackoverflow.com/questions/986865/can-you-explain-the-context-design-pattern-a-bit/986947#986947)的模式持谨慎态度。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2011-05-12T14:26:01.810

一个例子可能是 HttpSession 对象：你有属性，它基本上是一个带有字符串键和对象元素的映射。这提供了 http 请求之间的状态信息。另一个例子是 ServletRequest，它提供 Servlet 之间的状态信息。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-04-23T04:56:42.433

请参阅[您能解释一下上下文设计模式吗？](https://stackoverflow.com/questions/986865/can-you-explain-the-context-design-pattern-a-bit/16161219#16161219)模式的详细描述。

我在那里的帖子还解释了为什么它不是反模式 - 但它的拙劣实现是。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-04-24T15:19:20.650

“上下文”来自“上下文信息”。

来自 Msu.edu：

> 上下文信息：文档实际文本之外的信息，例如发送日期、发件人身份、收件人身份、路由信息和回执。

在大多数框架（以及设计模式）中，上下文对象存储有关传入请求和确认响应的信息。

# delphi - ado 和 bde 的区别

> ID：771987
> 
> 赞同：0
> 
> 时间：2009-04-21T10:36:30.723
> 
> 标签：delphi, ado, bde

ado和bde有什么区别？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-04-21T15:50:45.197

就 Delphi 而言，ADO 调用 Microsoft 提供的数据库驱动程序。BDE 调用 Borland 提供的数据库驱动程序。ADO 和 BDE 在基本相同的事情上做得很好。在过去几年中，BDE 没有任何重大变化，但 ADO 也没有。两者都能够调用第 3 方 ODBC 驱动程序，因此可以进行扩展。

如果我要开始一个新项目，我会推荐使用 ADO 而不是 BDE。ADO 被更大范围的程​​序员使用，由操作系统供应商直接支持，并且由于大多数要求已经到位，因此更容易部署。（例外可能是特定的数据库驱动程序，但您也会在 BDE 中遇到这种情况）。

8 年前，我将我的一个 BDE 应用程序完全移植到了 ADO 中，并且从未后悔过。这种痛苦非常值得增加灵活性和易于部署。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-06-18T21:19:27.943

简单的，

BDE 已死。时期。问任何 Codegear/Embarcadero 的人，他们会说 BDE 的存在***只是***为了向后兼容，不再受支持。

ADO 是 Microsoft 的一项技术，在许多场景中都能很好地工作，并且非常灵活。

# python - pyqt4 和 pyserial

> ID：771988
> 
> 赞同：4
> 
> 时间：2009-04-21T10:37:15.263
> 
> 标签：python, linux, qt, serial-port, pyserial

我想做一个应用程序，不断观察串口并根据从端口接收到的输入更改用户界面。我已经设法在 Linux 下使用 pyserial 从端口读取行，但我不确定如何以常规方式执行此操作：创建一个单独的线程并检查计时器事件的输入？我如何确保我不会错过任何东西？（实现某种握手/协议似乎有点矫枉过正......）最重要的是：我如何使用 qt4 的设施来做到这一点？

**编辑：**这就是我现在正在做的事情（我想在应用程序的其余部分运行而不等待的情况下定期执行此操作）

```
class MessageBox(QtGui.QWidget):
    def __init__(self, parent=None):
        QtGui.QWidget.__init__(self, parent)

        ser = serial.Serial('/dev/ttyS0', 9600, bytesize=serial.EIGHTBITS,
        parity=serial.PARITY_NONE,     
        stopbits=serial.STOPBITS_ONE, 
        timeout=None,           
        xonxoff=0,              
        rtscts=0,
        interCharTimeout=None)

        self.label = QtGui.QLabel(ser.readline(), self)
        self.label.move(15, 10)
        ser.close()
        self.setGeometry(300, 300, 250, 150)
        self.setWindowTitle('Authentication')

        self.color = QtGui.QColor(0, 0, 0) 

        self.square = QtGui.QWidget(self)
        self.square.setGeometry(120, 20, 100, 100)
        self.square.setStyleSheet("QWidget { background-color: %s }" % self.color.name()) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-04-21T11:12:42.777

您不会错过任何字节，任何待处理的输入都会被缓冲。

你有几个选择：

1.  使用通过 PySerial/inWaiting() 轮询串行端口的线程

2.  在使用 PySerial/inWaiting 轮询串行端口的主线程中使用计时器。

3.  找到端口的句柄并将其传递给 QSocketNotifier。这仅适用于 linux，但在这种情况下，QSocketNotifier 将监视与您的串行端口关联的文件并在有可用内容时发送信号。

方法 2 和 3 更好，因为您不需要线程。

# python - 如何在窗口中添加第二个弹跳球？

> ID：771992
> 
> 赞同：1
> 
> 时间：2009-04-21T10:38:19.393
> 
> 标签：python, animation, pygame

我编写了一个动画（在 python 中），让沙滩球在屏幕上弹跳。我现在希望在窗口中添加第二个球，当两个球发生碰撞时，它们会相互反弹。

到目前为止，我在这方面的尝试都没有成功。任何想法如何做到这一点？我到目前为止的代码如下。

```
import pygame

import sys

if __name__ =='__main__':

    ball_image = 'Beachball.jpg'
    bounce_sound = 'Thump.wav'
    width = 800
    height = 600
    background_colour = 0,0,0
    caption= 'Bouncing Ball animation'
    velocity = [1,1]
    pygame.init ()
    frame = pygame.display.set_mode ((width, height))
    pygame.display.set_caption (caption)
    ball= pygame.image.load (ball_image). convert()
    ball_boundary = ball.get_rect (center=(300,300))
    sound = pygame.mixer.Sound (bounce_sound)
    while True:
        for event in pygame.event.get():
            print event 
            if event.type == pygame.QUIT: sys.exit(0)
        if ball_boundary.left < 0 or ball_boundary.right > width:
            sound.play()
            velocity[0] = -1 * velocity[0]
        if ball_boundary.top < 0 or ball_boundary.bottom > height:
            sound.play()
            velocity[1] = -1 * velocity[1]

        ball_boundary = ball_boundary.move (velocity)
        frame.fill (background_colour)
        frame.blit (ball, ball_boundary)
        pygame.display.flip() 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-04-21T11:42:49.490

这是您的代码的一个非常基本的重组。它仍然可以整理很多，但它应该向您展示如何使用该类的实例。

```
import pygame
import random
import sys

class Ball:
    def __init__(self,X,Y):
        self.velocity = [1,1]
        self.ball_image = pygame.image.load ('Beachball.jpg'). convert()
        self.ball_boundary = self.ball_image.get_rect (center=(X,Y))
        self.sound = pygame.mixer.Sound ('Thump.wav')

if __name__ =='__main__':
    width = 800
    height = 600
    background_colour = 0,0,0
    pygame.init()
    frame = pygame.display.set_mode((width, height))
    pygame.display.set_caption("Bouncing Ball animation")
    num_balls = 1000
    ball_list = []
    for i in range(num_balls):
        ball_list.append( Ball(random.randint(0, width),random.randint(0, height)) )
    while True:
        for event in pygame.event.get():
            print event 
            if event.type == pygame.QUIT:
                sys.exit(0)
        frame.fill (background_colour)
        for ball in ball_list:
            if ball.ball_boundary.left < 0 or ball.ball_boundary.right > width:
                ball.sound.play()
                ball.velocity[0] = -1 * ball.velocity[0]
            if ball.ball_boundary.top < 0 or ball.ball_boundary.bottom > height:
                ball.sound.play()
                ball.velocity[1] = -1 * ball.velocity[1]

            ball.ball_boundary = ball.ball_boundary.move (ball.velocity)
            frame.blit (ball.ball_image, ball.ball_boundary)
        pygame.display.flip() 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-04-21T10:46:51.840

您可能应该创建一个类来代表您的沙滩球。然后，您可以根据需要创建尽可能多的实例，并将这些实例放入 Python 列表中。

然后，您将在每一帧上浏览该列表，更新和渲染每一帧。

您需要包含一种方法来测试与另一个球的碰撞（这对于圆圈来说很简单）。如果检测到碰撞，所涉及的球应模拟相互弹开。

# java - 使用混合 POJO 处理集合，每个 POJO 使用不同的处理程序

> ID：771995
> 
> 赞同：2
> 
> 时间：2009-04-21T10:39:28.020
> 
> 标签：java, language-agnostic, design-patterns

我正在尝试为以下问题找到一个优雅的 OOP 解决方案。

假设我们有一个 POJO 集合，在这种情况下是事件，其中每个 POJO 可能是不同的类。我们需要处理这个集合，对每个 POJO 类（或类型）使用不同的规则。

一个基本假设是我们不能用适当的处理程序来装饰 POJO，因为我们不控制它们的生成，并且按原样接收集合。因此，任何对此的机制都落入了同一个陷阱。但是，第 3 项仍然处理这种可能性。

有一些可能的解决方案，一些非常丑陋，一些更优雅但复杂：

1.  显而易见的解决方案，也是最丑陋的，是使用 instanceOf 运算符将 POJO 传递给处理程序。
2.  对 1 的稍微更好的修改是为此使用责任链，使用链式调度程序，以便新类型只需要一个新的调度程序。但是，每个调度程序仍然需要 instanceOf。
3.  创建增强对象，而不是 POJOS，其中每个对象都包含对其处理程序的引用。这在 POJO 和我们的处理器之间创建了耦合。
4.  创建（我知道如何在 Java 中正确执行此操作）一个调度程序服务，它将处理程序注册到特定事件类，并使用泛型（Typesafe 容器，如在有效的 java 中）将事件调度到处理程序。

4是最优雅的，但我想知道是否有更好的想法。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-04-21T12:01:00.913

＃4的简化：

使用 Map 来存储每个事件类的处理程序。

```
Map<Class, Handler> classHandlers = new HashMap<Class, Handler>();
classHandlers.put(EventA.class, new EventAHandler());
classHandlers.put(EventB.class, new EventBHandler()); 
```

现在使用事件的类来获取事件的处理程序。

```
Handler handler = classHandlers.get(event.getClass());
handler.handle(event); 
```

当然，这需要在编码时了解所有可能的事件类，因此不如外部事件调度器灵活。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-21T12:06:18.543

> 假设我们有一个 POJO 集合，在这种情况下是事件，其中每个 POJO 可能是不同的类。我们需要处理这个集合，对每个 POJO 类（或类型）使用不同的规则。

恭喜 如果 POJO 的类是稳定的（不经常添加新的*类类型*），您刚刚描述了使用访问者模式的动机！

更好的是，因为您*可能*想要对您的 POJO 集合做不同的事情，您可以创建一个 AbstractBaseVisitor 并扩展它来处理您需要做的不同事情！

这将需要在每个 POJO 周围放置一个小型包装器，每个 POJO 类有一个包装器类，以添加一个`visit()`回调访问者的函数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-21T10:44:21.347

在这种情况下，我使用了第 4 项中的解决方案，我认为这是一个很好的解决方案。我还将寻找其他关于更好解决方案的意见。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-04-21T11:32:56.253

4 是您提出的最佳解决方案。#1 & 2 会因为 instanceof 的混乱而痛苦。

另一种解决方案：使用它的调度程序方法注释每个类。您不需要一个中心位置来处理调度程序调用，并且 POJO/调度程序不会在注释之外耦合。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-04-21T14:00:01.670

这个问题实际上与语言无关。在某些语言中，您可以轻松地装饰类。但是，让我们坚持使用 Java。即使在那里我说“这取决于”。

我们想做的一件显而易见的事情是对处理程序进行某种自动发现。例如，使用 @Handler(handles=PojoA.class) 注释对您的处理程序进行注释，然后扫描所有使用 @Handler 注释的类（基本上需要加载类文件的混乱方式或使用类似 Scannotation 的东西）。

如果您在诸如 Spring 之类的上下文中运行，则会出现一个更有趣的选项。您可以获取所有实现某个接口的 bean，例如：

```
public interface Handler<T> {
    void handle(T object);
} 
```

然后在您的调度程序代码中找到它们：

```
Collection<Handler> handlers = applicationContext.getBeansofType(Handler.class).values();
for (Handler handler : handlers) {
    Method handleMethod = handler.getClass().getMethod("handle", Object.class);
    Class<?> type = handleMethod.getParameterTypes()[0];
    register(type, handler);
} 
```

（诚​​然，上面的代码未经测试）

我意识到我走出了这里的界限。我的观点是，解决方案的优雅取决于您选择的语言、您愿意使用的外部工具以及您使用的框架。

# networking - 是否可以使用 ping 测量带宽？

> ID：771998
> 
> 赞同：2
> 
> 时间：2009-04-21T10:40:20.793
> 
> 标签：networking, bandwidth, ping, measurement

如果是的话，我们可以从ping服务器所需的时间中找到互联网带宽吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2009-04-21T10:42:18.247

不，ping 不会告诉您有关带宽的任何信息，它只是测量延迟。测量带宽最好通过专门的测试来完成，即传输一堆比特并测量需要多长时间。您可能需要考虑带宽可能会因许多因素而发生巨大变化，例如：

*   方向; A 到 B 可能比 B 到 A 快，反之亦然
*   一天中的时间；取决于所涉及链接的一般负载水平
*   采取的确切路线，而路线又可以随机变化

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2009-04-21T10:50:30.613

您可以通过创建不同大小的 ping 来进行非常粗略的测量

然后，您可以使用较小和较大 ping 之间的延迟差异来形成延迟计算的基础。

实际上，尽管使用宽带速度，这不会产生有意义的数据。在调制解调器速度或更慢的情况下，您可能能够获得带宽指示，但它不太可能是准确和可重复的。

但是正如其他人已经指出的那样，ping 最好用作延迟的指示，并且有更好的方法来测量带宽。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2009-04-21T10:55:12.927

几年前，我对电缆上的延迟和带宽使用之间的关系进行了一些调查。

基本上，如果您从零带宽开始并增加带宽使用，延迟会非常缓慢地增加 - 直到您达到大约 90% 的带宽。然后延迟穿过屋顶，到达另一个高原，之后它再次缓慢增加。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-04-21T10:41:57.920

不，但您可能能够估计延迟。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-04-21T10:55:57.307

请查看 [top-5-unix-network-monitoring-utilities](http://immike.net/blog/2007/05/01/top-5-unix-network-monitoring-utilities/)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-04-21T11:25:24.133

如果您事先知道通道的延迟，则可以测量带宽。

您可以使用大 ping 包并在了解信道类型和预期 RTT 的情况下*估计带宽。*

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-05-05T09:23:49.173

我问过同样的事情，但每个人都说真正的 ping 不能很好地测量带宽。下面列出的这批是使用 ping 进行的带宽速度测试，但它的最大速度限制为 1000kb/s，并且在这种简单的形式中不会四舍五入，但您可以使用它并进行实验。

```
@echo off
:begin
color 0b
MODE CON:COLS=15 LINES=3
for /F "tokens=10 delims=ms=," %%a in ('ping -n 1 -w 1000 -l 1024 8.8.8.8^| find "Average"') do set "A1=%%a"
set /a T=%A1%
set /a varia=1000/%T%
set /a answer=%varia%
set /a varia2=%answer%
set /a answer2=%varia2%
echo.
echo  Speed %answer2% Kb/s
sleep 5
goto begin 
```

# sql-server - 为什么 MS SQL 中的“Where 子句中没有数学函数”？

> ID：771999
> 
> 赞同：2
> 
> 时间：2009-04-21T10:40:50.653
> 
> 标签：sql-server, performance

大多数 SQL 查询对 where 子句没有数学运算。

将它们放在“where 子句”上有什么问题？有没有性能问题？

例如：

SELECT * FROM Employee WHERE Salary*3 = 5000

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2009-04-21T10:43:08.197

如果 where 子句可以利用索引，它通常（但不总是）更快。对字段使用数学运算将停止使用索引。

例如，如果您有一个包含一百万行的表和一个已编入索引的日期列，则此处的查询 1 将远远优于查询 2（它们都检索日期为过去 7 天的所有行）：

查询1：

```
select date from table where date > dateadd(d, -7, getdate()) 
```

查询2：

```
select date from table where dateadd(d, 7, date) > getdate() 
```

* * *

在您的示例中，查询会更好：

```
select * from employee where salary = (5000 / 3) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-04-21T10:44:25.447

嗯？不，在 where 子句中使用数学完全没有错。where 子句可以包含任何使用列名、函数或常量的表达式，只要该表达式是合法谓词即可。

ck 给出了以下两个例子：

> 从表中选择日期，其中 date > dateadd(d, -7, getdate())
> 
> 从表中选择日期，其中 dateadd(d, 7, date) > getdate()

并解释说第一个可能更快，因为它可以使用索引。

ck 是正确的，但也应该注意，第一个可以更快，因为`dateadd(d, -7, getdate())`它是一个常量表达式（它只需要评估一次，无论行数），而`dateadd(d, 7, date)`第二个需要对每一行进行评估。

但是ck 的*两个*示例都是在 where 子句中使用“数学”（表达式）的示例，这是 OP 所要求的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-21T10:45:13.357

你能举个例子吗...你可以`HAVING`在 WHERE 子句之后使用具有某些功能的子句

```
SELECT filter, count(*) FROM Test GROUP BY filter HAVING count(*) > 1 
```

如果您想在 , 等上使用子句，则同样的逻辑适用`HAVING`...`MAX``MIN`

对于您的示例，您需要将 Salary*3 括在括号中

```
WHERE (Salary * 3) > 5000 
```**************