# StackOverflow 问答 11079000-11079999

# jsf - 当我与数据库没有连接时，我的 ChartBean 被提前调用

> ID：11079002
> 
> 赞同：0
> 
> 时间：2012-06-18T08:05:32.083
> 
> 标签：jsf

在我的 xhtml 中，我有如下内容：

```
 <p:barChart  id="horizontal"  
               value="#{ChartBean.categoryModel}" 
               legendPosition="ne"  
               breakOnNull="false" 
               barMargin="3" barPadding="3"
               title="Horizontal Bar Chart"  
               orientation="horizontal" min="0" 
               max="#{ChartBean.count}" 
               style="height:#{ChartBean.ssize}" 
    /> 
```

当我运行我的网络应用程序时，我得到 en Exception 告诉我

“java.lang.Exception：未连接”

所以我知道这个类是作为应用程序范围加载的，但是当我在会话范围内查看它时，如何将它更改为只加载。

好吧，我确实尝试过设置为

```
 <managed-bean>
        <managed-bean-name>ChartBean</managed-bean-name>
        <managed-bean-class>com.xxx.view.ChartBean</managed-bean-class>
        <managed-bean-scope>session</managed-bean-scope>
    </managed-bean> 
```

但是无论如何都会立即加载吗？我错过了什么？

# xml - 使用 distinct-values() 时的 XQuery

> ID：11079003
> 
> 赞同：11
> 
> 时间：2012-06-18T08:05:34.610
> 
> 标签：xml, xpath, xquery

XML 文件

```
<Cities>
  <Place>
    <City n="New Delhi"></City>
    <City n="Chandigarh"></City>
    <City n="Mumbai"></City>
  </Place>
  <Place>
    <City n="New Delhi"></City>
    <City n="Chandigarh"></City>
  </Place>
  <Place>
    <City n="New Delhi"></City>
    <City n="Mumbai"></City>
  </Place>
</Cities> 
```

我正在使用以下 XQuery -

```
for $x in doc("sample")/Cities/Place/City
   order by $x/@n
   return distinct-values($x/@n) 
```

我期待的结果是—— `Chandigarh Mumbai New Delhi`

但得到 - `Chandigarh Chandigarh Mumbai Mumbai New Delhi New Delhi New Delhi`

请告诉我我哪里出错了？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-06-18T08:28:43.383

请试试这个 -

```
for $x in distinct-values(doc("sample")/Cities/Place/City/@n)
   order by $x
   return $x 
```

我已经用 baseX 7.1 进行了同样的检查，并按照您的预期顺利工作:)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-18T08:11:10.440

您现在分别调用`distinct-values`每个值。`distinct-values`返回序列中的不同值，但该序列现在仅包含一个元素。您应该调用`distinct-values(...)`where`...`是城市名称的序列。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-04-23T04:59:03.447

不同值函数

```
let $items := (1,2,4,4,5,5,9,9,9,9,3,3,2)
let $unique-items-by := distinct-values($items)
return
   <result>   

      <items>
      {
         for $item in $unique-items-by
         return <item>{$item}</item>
      }
      </items>

   </result> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-04-23T05:01:33.613

distinct-values 函数用于
唯一项

```
 let  $x:=doc("/db/my.xml")
let $unique-items := distinct-values($x)
 for $x in $unique-items

return (
 $unique-items
) 
```

# video - ffmpeg 错误尝试创建 mpeg 视频

> ID：11079004
> 
> 赞同：1
> 
> 时间：2012-06-18T08:05:35.780
> 
> 标签：video, bitmap, ffmpeg, mpeg

我在创建 mpeg 文件时遇到问题，我有 2 个位图（2592*2160 32 位）。我正在尝试将它们组合成一个 mpeg 文件，但我无法让它工作，我尝试过的命令是：

```
ffmpeg -i %d.bmp -b:v 99.99M -r 1 -s 2592x2160 vid.mpg 
```

输出是

```
ffmpeg -i %d.bmp -b:v 99.99M -r 1 -s 2592x2160  vid.mpg
ffmpeg version N-41416-g718607b Copyright (c) 2000-2012 the FFmpeg developers
  built on Jun  8 2012 12:46:19 with gcc 4.6.3
  configuration: --enable-gpl --enable-version3 --disable-w32threads --enable-ru
ntime-cpudetect --enable-avisynth --enable-bzlib --enable-frei0r --enable-libass
 --enable-libcelt --enable-libopencore-amrnb --enable-libopencore-amrwb --enable
-libfreetype --enable-libgsm --enable-libmp3lame --enable-libnut --enable-libope
njpeg --enable-librtmp --enable-libschroedinger --enable-libspeex --enable-libth
eora --enable-libutvideo --enable-libvo-aacenc --enable-libvo-amrwbenc --enable-
libvorbis --enable-libvpx --ena  libavutil      51\. 56.100 / 51\. 56.100
  libavcodec     54\. 25.100 / 54\. 25.100
  libavformat    54\.  6.101 / 54\.  6.101
  libavdevice    54\.  0.100 / 54\.  0.100
  libavfilter     2\. 78.101 /  2\. 78.101
  libswscale      2\.  1.100 /  2\.  1.100
  libswresample   0\. 15.100 /  0\. 15.100
  libpostproc    52\.  0.100 / 52\.  0.100
[image2 @ 01e6be40] Stream #0: not enough frames to estimate rate; consider incr
easing probesize
Input #0, image2, from '%d.bmp':
  Duration: 00:00:00.08, start: 0.000000, bitrate: N/A
    Stream #0:0: Video: bmp, pal8, 2592x2160, 25 tbr, 25 tbn, 25 tbc
File 'vid.mpg' already exists. Overwrite ? [y/N] y
w:2592 h:2160 pixfmt:pal8 tb:1/25 sar:0/1 sws_param:flags=2
[ffmpeg_buffersink @ 02bb3ce0] No opaque field provided
[scale @ 02bb3f20] w:2592 h:2160 fmt:pal8 sar:0/1 -> w:2592 h:2160 fmt:yuv420p s
ar:0/1 flags:0x4
[mpeg1video @ 02b864a0] bitrate tolerance too small for bitrate
Output #0, mpeg, to 'vid.mpg':
    Stream #0:0: Video: mpeg1video, yuv420p, 2592x2160, q=2-31, 99990 kb/s, 90k
tbn, 5 tbc
Stream mapping:
  Stream #0:0 -> #0:0 (bmp -> mpeg1video)
Error while opening encoder for output stream #0:0 - maybe incorrect parameters
such as bit_rate, rate, width or height 
```

如果我省略 -r 参数（ffmpeg -i %d.bmp -b:v 99.99M -s 2592x2160 vid.mpg），输出将变为：

```
[mpeg @ 02f80120] buffer underflow i=0 bufi=749380 size=950639
[mpeg @ 02f80120] buffer underflow i=0 bufi=751421 size=950639
[mpeg @ 02f80120] packet too large, ignoring buffer limits to mux it
[mpeg @ 02f80120] buffer underflow i=0 bufi=751421 size=950639
[mpeg @ 02f80120] buffer underflow i=0 bufi=753462 size=950639
[mpeg @ 02f80120] packet too large, ignoring buffer limits to mux it
[mpeg @ 02f80120] buffer underflow i=0 bufi=753462 size=950639
[mpeg @ 02f80120] buffer underflow i=0 bufi=755503 size=950639
... 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-18T18:37:33.867

您收到第一个错误是因为我认为 ffmpeg 不会读取数百万的“M”字符，因此它将您的参数读取为 99.99 kb/s，这还不足以处理您想要做的事情，因此“比特率容差对于比特率来说太小”警告。尝试使用足够大的东西在###k 中指定您的比特率，它应该会继续。至于第二部分，当您省略 -r 参数时它部分起作用的原因是因为 mpeg 容器不支持许多不同的帧速率。因此，如果您想要一个强制帧速率为每秒 1 帧的视频，您将需要使用不同的容器。此外，使用 -r 参数的当前位置，您所说的只是输出视频将以每秒一帧的速度播放，并不是每个位图都代表视频中的一帧。要执行后者，您需要在指定输入之前指定输入帧速率。

例如，要使用您指定的比特率制作两秒钟的 avi 视频（在这种情况下为每秒一个位图），您需要执行以下操作：

```
ffmpeg -r 1 -i %d.bmp -b:v 990k -s 2592x2160 vid.avi 
```

# javascript - Javascript 找到缺失的选择值

> ID：11079005
> 
> 赞同：1
> 
> 时间：2012-06-18T08:05:50.397
> 
> 标签：javascript

我有以下 JavaScript：

```
var next_user = "1";

    i=0;
    for (i=0;i<=10;i++) 
    {
        var el = document.getElementById("user_list"); 
        var val = el[i].value;

        if (val <= next_user)
        {
            next_user = i;
        }   

        if (val >= next_user)
        {
            next_user = i;
        }   

            alert(next_user);
    } 
```

我在屏幕上有以下选择框：

```
<select id="user_list" onclick="load_user(this)" name="user_list" size="21" style="width:200px;">
<option value="1">Bob</option>
<option value="2">john</option>
<option value="3">Frank</option>
<option value="5">tom</option>
</select> 
```

我似乎无法让它按照我想要的方式工作。

选择框的列表中可能有 10 个用户，并且每个（选项）值都是唯一的 (1-10)。

正如您在我的选择框中看到的那样，我缺少值 4。我上面的 Javascript 代码旨在通过选择框并找到缺少的第一个值。（在我上面的例子中，它应该回复 4，因为它丢失了）但是如果 Bob 丢失了，那么它应该回复 1。

好吧，这就是我上面的 JavaScript 代码应该做的，但我似乎无法弄清楚我做错了什么。（好吧，我希望我做得对）

有谁知道我做错了什么？

（在这个阶段我并不打算使用任何 jQuery）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T08:25:19.203

您应该使用`options`您提取的选择元素的属性。

例子：

```
<script>
var userList = document.getElementById("user_list");
for (var i=0;i<userList.options.length; i++) {
    if (userList.options[i].value != (i+1)) {
        alert((i+1)+" is missing");
        break;
    }
}
</script> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-18T08:27:59.453

您可以使用以下代码来提醒缺少的选项

```
var next_user = 1;
var el = document.getElementById("user_list");
for (i = 0; i < 10; i++) {
    var val = parseInt(el[i].value);

    if (val > next_user) {
        alert(next_user);
        break;
    } else {

        next_user++;
    }

}​ 
```

**演示：http:** [//jsfiddle.net/joycse06/75kM7/](http://jsfiddle.net/joycse06/75kM7/)

# c# - 缺少 ToolStripButton.Left 属性

> ID：11079006
> 
> 赞同：1
> 
> 时间：2012-06-18T08:06:04.367
> 
> 标签：c#, winforms, toolstripbutton

我需要设置一个 panel.Left 属性等于 ToolStripButton.Left 值：

```
pan1.Left = btn1.Left; 
```

但是 ToolStripButton 没有这样的属性。请问有解决办法吗。

如果没有 - 如何将面板放置在表单的中心。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T11:22:25.033

这有效：

```
pan1.Location = new Point(btn1.Bounds.X,pan1.Location.Y); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-18T08:33:25.347

您不需要任何类型的`control`来推断中心，而是形成自身：

```
panel1.Left = this.ClientSize.Width / 2 - panel1.Width / 2; 
```

# android - 当我更新 android 原生联系人时，我得到“java.lang.UnsupportedOperationException:”

> ID：11079011
> 
> 赞同：2
> 
> 时间：2012-06-18T08:06:29.243
> 
> 标签：android, contacts

当我更新 android native 联系人时，我得到了异常：

```
java.lang.UnsupportedOperationException: Your selection contains data that can be deleted by ContactsProviderinternals only.
    at android.database.DatabaseUtils.readExceptionFromParcel(DatabaseUtils.java:168)
    at android.database.DatabaseUtils.readExceptionWithOperationApplicationExceptionFromParcel(DatabaseUtils.java:159)
    at android.content.ContentProviderProxy.applyBatch(ContentProviderNative.java:456)
    at android.content.ContentProviderClient.applyBatch(ContentProviderClient.java:120)
    at android.content.ContentResolver.applyBatch(ContentResolver.java:767)
    at 
```

请帮我。谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T08:18:06.237

确保您首先添加了权限`android.permission.READ_CONTACTS`，`android.permission.WRITE_CONTACTS`然后您应该发布一些代码，因为不知道您如何更新它们。但是你应该像这样做

```
ContentValues data = new ContentValues();
data.put(ContactsContract.Contacts.DISPLAY_NAME,<data>);
data.put(ContactsContract.CommonDataKinds.Phone.NUMBER,<data>);
getContentResolver().update(workUri, data, null, null); 
```

# c# - 使用安卓手机浏览器从 Asp.net 网站下载 .apk 时出错

> ID：11079015
> 
> 赞同：3
> 
> 时间：2012-06-18T08:06:50.663
> 
> 标签：c#, android, asp.net, .net, apk

在我的`.aspx`页面中，我有下载`onclick`文件的下载按钮`.apk`。

当我在我的电脑上运行它工作正常`.apk`文件被下载**到我的电脑上**。
但是当我使用我的 android 手机去那个站点并单击下载按钮时，它将开始下载，但文件单击给出错误**解析包时出现问题。**

实际文件大小也为**604kb**（从安卓手机下载时为**22kb**）

*下载的文件（22kb）包含 html 内容。*

```
 private void DownloadFile()
    {
        string getPath = "demo_Android/demoAndroid.apk";
        System.IO.Stream iStream = null;

        // Buffer to read 10K bytes in chunk:
        byte[] buffer = new Byte[1024];

        // Length of the file:
        int length;

        // Total bytes to read:
        long dataToRead;

        // Identify the file to download including its path.
        string filepath = Server.MapPath(getPath);

        // Identify the file name.
        string filename = System.IO.Path.GetFileName(filepath);
        try
        {
            // Open the file.
            iStream = new System.IO.FileStream(filepath, System.IO.FileMode.Open,
                        System.IO.FileAccess.Read, System.IO.FileShare.Read);

            // Total bytes to read:
            dataToRead = iStream.Length;
            Response.ContentType = "application/vnd.android.package-archive";
            Response.AddHeader("Content-Disposition", "attachment; filename=" + filename);

            // Read the bytes.
            while (dataToRead > 0)
            {
                // Verify that the client is connected.
                if (Response.IsClientConnected)
                {
                    // Read the data in buffer.
                    length = iStream.Read(buffer, 0, 1024);

                    // Write the data to the current output stream.
                    Response.OutputStream.Write(buffer, 0, length);

                    // Flush the data to the HTML output.
                    Response.Flush();

                    buffer = new Byte[1024];
                    dataToRead = dataToRead - length;
                }
                else
                {
                    //prevent infinite loop if user disconnects
                    dataToRead = -1;
                }
            }
        }
        catch (Exception ex)
        {
            // Trap the error, if any.
            Response.Write("Error : " + ex.Message);
        }
        finally
        {
            if (iStream != null)
            {
                //Close the file.
                iStream.Close();
            }
            Response.Close();
        }
    } 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-19T10:44:44.810

这是我解决问题的方法

我的应用程序托管在具有 IIS 7 的 Window server 2008r2 下

第 1 步：在 .aspx 页面中添加超链接设置 navigateurl 作为文件路径

```
<asp:HyperLink ID="lnkdwnload" runat="server" NavigateUrl="~/Application_Android/MyAndroidAppAame.apk">Download MyApp</asp:HyperLink> 
```

第二步：Web.config 在 staticContent 下添加 mimeMap 元素

```
<system.webServer>
    <staticContent>
      <mimeMap fileExtension=".apk" mimeType="application/vnd.android.package-archive"/>
    </staticContent>
</system.webServer> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T08:34:01.590

这可能是我在使用 Android 原生浏览器时也遇到过的问题。问题是下载操作被传递给平台的下载应用程序（与浏览器分开），该应用程序重新加载页面，而不是真正的 APK，而是下载 aspx 页面。

尝试使用 Opera Mobile 下载。如果问题消失，很可能是同样的问题。用标准超链接替换按钮将是最简单的解决方案。尽管如果您还需要其他逻辑而不是仅仅下载，它可能不是一个选择。

# bash - 对布尔变量的操作

> ID：11079017
> 
> 赞同：2
> 
> 时间：2012-06-18T08:06:56.480
> 
> 标签：bash, shell, boolean, sh

在这个[问题](https://stackoverflow.com/questions/2953646/how-to-declare-and-use-boolean-variables-in-shell-script)中，已经展示了如何在 bash 中使用简洁的布尔变量。有没有办法用这些变量执行逻辑运算？例如如何得到这个：

```
var1=true
var2=false
# ...do something interesting...
if ! $var1 -a $var2; then     <--- doesn't work correctly
   echo "do sth"
fi 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-18T08:06:57.760

这确实有效：

```
if ! $var1 && $var2; then
   echo "do sth"
fi 
```

也许有人可以解释为什么 -a 和 -o 运算符不起作用和 &&, ||, ! 做？

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-18T11:58:44.313

好的男孩和女孩，上课时间。

执行此行时发生了什么？

```
if true ; then echo 1 ; fi 
```

这里发生的是`if`命令正在执行。之后发生的一切都是`if`命令的一部分。

它的作用是`if`执行一个或多个命令（或者更确切地说，管道），并且如果执行的最后一个命令的返回代码成功，它会在达到`then`until之后执行命令`fi`。如果返回代码不成功，`then`则跳过该部分并在之后继续执行`fi`。

`if` **不带开关**，它的行为无论如何都不可修改。

在上面的示例中，我告诉`if`执行的命令是`true`. `true`不是语法或关键字，它只是另一个命令。尝试自己执行它：

```
true 
```

它不会打印任何内容，但会将其返回码设置为`0`（又名“true”）。`if`将上面的语句改写成这样，可以更清楚地看出它是一个命令：

```
if /bin/true ; then echo 1 ; fi 
```

这是完全等价的。

总是从测试中返回 true 并不是很有用。它通常`if`与`test`命令一起使用。`test`有时符号链接或以其他方式称为`[`. 在您的系统上，您可能有一个`/bin/[`程序，但如果您使用`bash` `[`的是内置命令。`test`是一个比它更复杂的命令`if`，您可以阅读所有相关信息。

```
help [
man [ 
```

但是现在让我们说`test`根据您提供的选项执行一些测试，并返回成功的返回码 ( `0`) 或不成功的返回码。这让我们可以说

```
if [ 1 -lt 2 ] ; then echo one is less than two ; fi 
```

但同样，这*总是*正确的，所以它不是很有用。如果`1`并且`2`是变量会更有用

```
read -p' Enter first number: ' first
read -p' Enter second number: ' second
echo first: $first
echo second: $second
if [ $first -lt $second ] ; then
     echo $first is less than $second
fi 
```

现在你可以看到它`test`正在做它的工作。在这里，我们传递`test`了四个参数。第二个参数是`-lt`一个开关，告诉`test`应该测试第一个参数和第三个参数，看看第一个参数是否小于第三个参数。第四个参数只标记命令的结束；当`test`作为`[`最后一个参数调用时，必须始终是`]`.

在执行上述`if`语句之前，对变量进行评估。假设我输入了 20 for`first`和 25 for `second`，评估后脚本将如下所示：

```
read -p' Enter first number: ' first
read -p' Enter second number: ' second
echo first: 20
echo second: 25
if [ 20 -lt 25 ] ; then
     echo 20 is less than 25
fi 
```

现在你可以看到，当`test`被执行时，它将是 testing `is 20 less than 25?`，这是真的，所以`if`将执行`then`语句。

回到手头的问题：这里发生了什么？

```
var1=true
var2=false

if ! $var1 -a $var2 ; then
    echo $var1 and $var2 are both true
fi 
```

当`if`命令被评估时，它将变成

```
if ! true -a false ; then 
```

这是指示`if`执行`true`并将参数传递`-a false`给`true`命令。现在，`true`不需要任何开关或参数，但如果您在不需要的情况下提供它们，它也不会产生错误。这意味着它将执行，返回成功并且该`-a false`部分将被忽略。这`!`会将成功反转为失败，并且该`then`部分将不会被执行。

如果您要使用调用它的版本替换上述内容，`test`它仍然无法按预期工作：

```
var1=true
var2=false

if ! [ $var1 -a $var2 ] ; then
    echo $var1 and $var2 are both true
fi 
```

因为该`if`行将被评估为

```
if ! [ true -a false ; ] then 
```

并且`test`不会将`true`其视为布尔关键字，也不会视为命令，而是视为字符串。由于非空字符串被视为“真”，`test`因此它总是会成功返回`if`，即使您说过

```
if ! [ false -a yourmom ] ; then 
```

由于两者都是非空字符串`-a`，测试都为真，返回成功，它被反转`!`并传递给`if`，它不执行`then`语句。

如果你`test`用这个版本替换版本

```
if ! $var1 && $var2 ; then 
```

然后它将被评估为

```
if ! true && false ; then 
```

并且会这样处理：`if`执行`true`返回成功；由`!`;反转 因为第一个命令的返回码是失败的`&&`语句短路并且`false`永远不会被执行。因为最后执行的命令返回了失败，失败被传回`if`不执行`then`子句的那个。

我希望这一切都清楚了。

或许值得指出的是，您可以使用这样的结构：

```
! false && true && echo 1 
```

哪个不使用`if`但仍然检查返回码，因为那是什么`&&`和`||`用途。

`test`在不犯任何错误的情况下使用是一种黑色艺术。通常，`bash`在`[[`使用`[`.

由于原始海报没有提供他正在努力完成的实际示例，因此很难就最佳解决方案提供任何具体建议。希望这对他有足够的帮助，他现在可以找出正确的做法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-18T08:14:34.090

您在这里混合了两种不同的语法。

这将起作用：

```
if ! [ 1 -a 2 ]; then
   echo "do sth"
fi 
```

注意表达式周围的括号。

您需要`test`命令（`[`在较新的语法中）才能使用这些键（`-a`等`-o`）。

但是`test`nut run 命令本身。如果要检查命令的退出代码，则不能使用`test`.

# grails - 如何在 Grails 中保存关联对象？

> ID：11079021
> 
> 赞同：3
> 
> 时间：2012-06-18T08:07:03.843
> 
> 标签：grails

我是一个 grails 初学者。

我有一个 2domain 类

```
class Employee {
        String name
        String department
    static constraints = {
    }
    public String toString() {
        name
    }
}

class Address {
    String line1
    String line2
    Employee employee

    static belongsTo = Employee

    static constraints = {
    }
} 
```

地址属于员工的地方..所以我已经给出了 `belongsTo`关联。

我的 Employee/create.gsp 页面接受 Employee 和 Address 中指定的字段的输入。

如此创建员工，地址必须自动保存。

那么EmployeeController中的保存操作可能是什么

我尝试过这样的事情，但没有奏效。

```
def save = {
    def employeeInstance = new Employee(params)
    def addressInstance = new Address(params)
    if (employeeInstance.save(flush: true)) {
        flash.message = "${message(code: 'default.created.message', args: [message(code: 'employee.label', default: 'Employee'), employeeInstance.id])}"
        redirect(action: "show", id: employeeInstance.id)
    }
    else {
        render(view: "create", model: [employeeInstance: employeeInstance])
    }
} 
```

如何保存这个关联的模型？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-18T08:21:38.407

在这里，您有一个一对一的关系 -`address`向类添加一个属性`Employee`。

```
class Employee {
    String name
    String department
    Address address

    public String toString() {
        name
    }
} 
```

改变你`belongsTo`的`Address`这样的：

```
class Address {
    String line1
    String line2

    static belongsTo = [employee: Employee]
} 
```

现在你可以创建一个`Employee`这样的：

```
def employeeInstance = new Employee(params)
employeeInstance.address = new Address(params)
if (employeeInstance.save(flush: true)) {
    // your logic
} 
```

阅读[文档（一对一关系）](http://grails.org/doc/latest/guide/GORM.html#manyToOneAndOneToOne)以获取更多信息。

# c# - 无法从另一个文件创建对象

> ID：11079025
> 
> 赞同：0
> 
> 时间：2012-06-18T08:07:23.437
> 
> 标签：c#, c#-4.0

我在**TestInput.cs**文件中有这个类，

```
 public class HDate
 {
        private string StartYear;

        public string StartYear1
        {
            get { return StartYear; }
            set { StartYear = value; }
        }

        public HDate() { }

        public HDate(){
           DateTime today = DateTime.Now;
           //Some Code here
        }

     return StartDate+';'+EndDate; // ???
 } 
```

然后我要从那个类创建一个对象。这个文件是**Inputsubmit.cs**文件

```
 if(ds.Tables[0].Rows.Count < 0)
         {
          HDate hd = new HDate()
          hd.

         } 
```

然后我得到的是自动为 HDate 创建新类.. 但是我已经在另一个文件上有一个类知道吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T08:16:36.057

除非您展示的是 的声明的大幅缩减示例`HDate`，否则可能是`HDate`该类无法编译，因此智能感知不会选择它。

特别是你有这条线： `return StartDate+';'+EndDate; // ???`

那只是在类声明中，而不是在方法中，并且引用`StartDate`并且`EndDate`我看不到声明。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T08:12:28.600

如果您能阐明在尝试构建`HDate`. 但是，您的`HDate`类有两个具有相同签名的构造函数。编译器将无法确定调用哪一个，因此您需要先删除其中一个，然后才能创建`HDate`对象。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-18T08:27:39.343

关于你的类 HDate：构造函数 HDate() 不能返回值！而且您不能不从拥有某种回归的 Methode 中返回...

当您创建类的实例时：（ HDate hd= new HDate(); ）这是正确的。你将执行你的构造函数 HDate()。但是在你的构造函数中你声明了一个局部变量（（今天它是一个局部变量，它不是一个全局变量））所以你不能使用它。

也许你可以做到：

```
public class HDate
    {
        private string StartYear;

        public string StartYear1 {get ; set } 
        //you can write that when you use framwork 3.0 or hit

  //public HDate() { }// you can note have 2 constructor with same signature !! 

        public DateTime today;
        public HDate(){
        today = DateTime.Now;
      //Some Code here
      }

// you can make methode :
public string updateDate() // this methode will retrun a string
{
DateTime StartDate, EndDate;
// some code here
return StartDate+" ; "+EndDate ; // string is between " " ! not between ' ' ;)
}
}// end of class.. after you can declarate hd and make hd.updateDate(); good luck 
```

哦 ！我忘了 ！你需要写：使用TestInput.cs；在您的文件中：Inputsubmit.cs：D

# emacs - Emacs：添加自定义代码块分隔符？

> ID：11079026
> 
> 赞同：3
> 
> 时间：2012-06-18T08:07:37.670
> 
> 标签：emacs, syntax-highlighting, delimiter, parentheses

我使用 emacs 编写一些[ejs](http://embeddedjs.com)文件。我已经设定

```
(show-paren-mode t) 
```

在我的 .emacs 中突出显示括号。ejs 代码如下所示：

```
<ul>
    <% for(var i=0; i<supplies.length; i++) {%>
        <li><%= supplies[i] %></li>
    <% } %>
</ul> 
```

使用 html-mode 编辑 ejs 时，这种模式似乎无法正常工作。例如，'<%' 中的左侧 '<' 匹配右侧的 '}' 而不是匹配 '%>'。

所以我的问题是我可以添加 '<%' 作为代码块分隔符以使 show-paren-mode 在 ejs 文件中正常工作吗？

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T12:53:23.653

您是否真的充分考虑过这个括号突出显示如何工作？

您在“<%”和“%>”之间有一个裸的起始分隔符“{”起始分隔符。

这相当于：

```
( { ) 
```

是否`show-paren-mode`正确突出显示此类代码？

在 Emacs 中编辑混合的主要模式文件（HTML 中的 JS）（HTML 中的 Ruby）是很困难的。

您可以使用此代码段删除“<”和“>”作为匹配分隔符，这可以稍微缓解您的问题。

```
(eval-after-load "sgml-mode" '(progn
                                (modify-syntax-entry ?< "'" sgml-mode-syntax-table)
                                (modify-syntax-entry ?> "'" sgml-mode-syntax-table))) 
```

但是你需要一个多主模式库才能真正让它工作，但我怀疑是否有人投入工作以使“EJS”工作。

# ajax - Javascript AJAX 文件下载

> ID：11079027
> 
> 赞同：4
> 
> 时间：2012-06-18T08:07:43.110
> 
> 标签：ajax, binary

有可能做这样的事情吗？

```
$.post( '/generate/file', json_data_striginfied, function( data ) {
    var win = window.open()
    window.write(data)
}); 
```

返回的数据是二进制数据（PDF 文件）？

我已经尝试过了，新窗口包含二进制数据作为文本，它不会强制下载。我希望它强制下载 PDF 文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T20:48:49.530

尝试将远程 PDF url 添加到新窗口源 url。

# matlab - MATLAB中两个连通分量之间的填充区域

> ID：11079031
> 
> 赞同：7
> 
> 时间：2012-06-18T08:08:02.130
> 
> 标签：matlab, image-processing, fill

我有一个表示 MATLAB 中的数字的二进制图像：

![图片描述](../Images/546f1ad4b42c1e470642538d337f1ead.png)

我想填写所有数字。期望的结果是：

![在此处输入图像描述](../Images/01892240ccef25f55fe2cb3472918f12.png)

我唯一找到的是`imfill`函数，但这并没有什么帮助，因为我丢失了我的内部数据（例如 9 的内圈）。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-18T17:29:10.733

另一种可能性是使用[BWBOUNDARIES](http://www.mathworks.com/help/toolbox/images/ref/bwboundaries.html)函数，它：

> 跟踪对象的外部边界，以及这些对象内部的孔的边界

该信息包含在第四个输出中`A`，这是一个表示父子孔依赖关系的邻接矩阵。

```
%# read binary image
bw = imread('SUvif.png');

%# find all boundaries
[B,L,N,A] = bwboundaries(bw, 8, 'holes');

%# exclude inner holes
[r,~] = find(A(:,N+1:end));        %# find inner boundaries that enclose stuff
[rr,~] = find(A(:,r));                      %# stuff they enclose
idx = setdiff(1:numel(B), [r(:);rr(:)]);    %# exclude both
bw2 = ismember(L,idx);                      %# filled image

%# compare results
subplot(311), imshow(bw), title('original')
subplot(312), imshow( imfill(bw,'holes') ), title('imfill')
subplot(313), imshow(bw2), title('bwboundaries') 
```

![在此处输入图像描述](../Images/5feb4657f32a6a05db54cf08a23af0df.png)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-18T09:04:54.030

问题是如何区分孔和数字。一种可能的临时解决方案是通过内部像素的区域过滤它们。

```
function SolveSoProblem()

    I = imread('http://i.stack.imgur.com/SUvif.png');

    %Fill all the holes 
    F = imfill(I,'holes');

    %Find all the small ones,and mark their edges in the image
    bw = bwlabel(I);
    rp = regionprops(bw,'FilledArea','PixelIdxList');
    indexesOfHoles = [rp.FilledArea]<150;   
    pixelsNotToFill = vertcat(rp(indexesOfHoles).PixelIdxList); 
    F(pixelsNotToFill) = 0;
    figure;imshow(F);

    %Remove the inner area
    bw1 = bwlabel(F,4);
    rp = regionprops(bw1,'FilledArea','PixelIdxList');
    indexesOfHoles1 = [rp.FilledArea]<150;
    pixelListToRemove = vertcat(rp(indexesOfHoles1).PixelIdxList);
    F(pixelListToRemove) = 0;

    figure;imshow(F);
end 
```

在**步骤（1）**之后：

![在此处输入图像描述](../Images/ef7d97cba1f75514821496fdbf92f13a.png)

在**步骤（2）**之后：

![在此处输入图像描述](../Images/2fedcf509cdf5b51cd10251b9c99134a.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-18T11:26:44.233

假设左上角的像素总是在要填充的区域之外：

跨越顶行，将像素复制到输出图像

当您在输入图像中出现一个白色像素后跟一个黑色像素时，开始在输出图像中设置白色像素，直到出现黑色像素后跟一个白色像素。

# c# - asp.net listview排序和手动数据绑定

> ID：11079035
> 
> 赞同：1
> 
> 时间：2012-06-18T08:08:16.150
> 
> 标签：c#, asp.net, listview, sorting, data-binding

我有一个奇怪的问题。我有一个 ListView，我通过单击 listview 标题，使用下面的方法按 ASC/DESC 顺序排序，现在当我定义了 ObjectDataSource 并将其附加到 ListView 时，它可以完美地工作。

现在，如果我只使用手动绑定

```
listview.DataSource = GetListViewContent();
listview.DataBind(); 
```

排序不再起作用。我已经尝试在排序方法中重新绑定，但它仍然不起作用。我错过了什么吗？

```
protected void lvFullReport_Sorting(object sender, ListViewSortEventArgs e)
    {
        Control me = (Control)sender,
           headerRow = me.FindControl("headerRow");

         //Assume that the "header row" control's "control collection" just contains "th"-like control,
         //whose type is exactly "HtmlTableCell" . While we just utilize its properties in the "HtmlControl" level
         //so we cast them as "HtmlControl".
         //What's more , as for these "th" controls , just those who contains an "IButtonControl" ( sorting triggers)
         //are really needed.

        foreach (System.Web.UI.HtmlControls.HtmlControl sortCell in headerRow.Controls.Cast<System.Web.UI.HtmlControls.HtmlControl>()
            .Where(th => th.Controls.OfType<IButtonControl>().Any()))
        {
              //Get out the "only" sorting-Button Control ,
              //for that in a "th" those empty space or literal text area are treated as "Literal Control" ,
              //"literal" fills whole space of "th".

            IButtonControl btnSortField = sortCell.Controls.OfType<IButtonControl>().Single();

            if (btnSortField.CommandArgument == e.SortExpression)
                sortCell.Attributes["class"] = e.SortDirection == SortDirection.Ascending ? "up" : "down";
            else
                if (sortCell.Attributes["class"] != null) sortCell.Attributes.Remove("class");
        }

        DisplayChart();
    } 
```

GetListViewContent() 是手动和自动来源的来源，出于显示目的，两者都可以显示数据；但排序只适用于汽车。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T08:23:18.090

您还需要重新绑定已排序的数据。所以也许你应该考虑这样实现你的方法：

`GetListViewContent(SortDirection sortDir)`;

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T20:59:26.560

使用对象数据源时，我也总是得到 e.SortDirection = SortDirection.Ascending。我发现以下有用的帖子： http:
[//www.codedigest.com/articles/aspnet/412_sorting_in_aspnet_listview_control_-_binding_in_codebehind.aspx](http://www.codedigest.com/articles/aspnet/412_sorting_in_aspnet_listview_control_-_binding_in_codebehind.aspx)

这导致我采用以下解决方案将 SortExpression 存储在 ViewState 中，然后用正确的值覆盖 e.SortDirection。

```
protected void ListView_Sorting(object sender, ListViewSortEventArgs e)
{
    // Override sort direction (since it's always ascending when 
    // we're using an object data source)
    e.SortDirection = GetListViewSortDirection(e.SortExpression);

    // Rebind data
    ProductListView.DataSource = 
        GetListViewContent(e.SortExpression, e.SortDirection);
    ProductListView.DataBind();
}

private SortDirection GetListViewSortDirection(string sortExpression)
{
    // Store sort expression in viewstate
    SortDirection listViewSortDirection = SortDirection.Ascending;
    if (ViewState["SortExpression"] != null 
        && ViewState["SortExpression"].ToString() == sortExpression)
    {
        ViewState["SortExpression"] = null;
        listViewSortDirection = SortDirection.Descending;
    }
    else
    {
        ViewState["SortExpression"] = sortExpression;
    }

    return listViewSortDirection;
} 
```

# icalendar - iCalendar (RFC5545) 年度重复规则

> ID：11079036
> 
> 赞同：1
> 
> 时间：2012-06-18T08:08:19.273
> 
> 标签：icalendar, recurrence, rfc2445, rfc5545

我怎样才能在某些选定的日子里每年发生一个事件，比如开始 45 天然后跳过 15 天，然后选择 30 天然后跳过 30 天，然后选择 30 天然后跳过 30 天，然后选择 30 天然后跳过 30 天，然后选择 30 天然后跳过 30 天，然后选择 30 天然后跳过 30 天

```
RRULE:FREQ=YEARLY;BYYEARDAY=1,2,..,45,61,62,...,90,120,121.... 
```

这是正确的程序吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T21:49:37.423

freq=yearly 和 byyearday 的组合确实是前进的方向，虽然它看起来不是你的情况，你也可以考虑 BYWEEKNO。

# actionscript-3 - 将字符串网络文本转换为字节数组时，动作脚本 as3 CB 模式密码长度必须是块大小 16 错误的倍数

> ID：11079038
> 
> 赞同：0
> 
> 时间：2012-06-18T08:08:32.193
> 
> 标签：actionscript-3

这是一个基本的安全应用程序，我只想加密和解密一些数据现在我的问题是在文本框中显示网络文本并取回该文本然后将其转换为字节数组并且在解密时我得到了错误

```
Error: ECB mode cipher length must be a multiple of blocksize 16
    at com.hurlant.crypto.symmetric::ECBMode/decrypt() 
```

## 这是security.mxml

```
<?xml version="1.0" encoding="utf-8"?>
<s:Application xmlns:fx="http://ns.adobe.com/mxml/2009" 
               xmlns:s="library://ns.adobe.com/flex/spark" 
               xmlns:mx="library://ns.adobe.com/flex/mx" minWidth="955" minHeight="600">
    <fx:Declarations>
        <!-- Place non-visual elements (e.g., services, value objects) here -->
    </fx:Declarations>
    <fx:Script>
        <![CDATA[
            import com.hurlant.crypto.Crypto;
            import com.hurlant.crypto.prng.Random;
            import com.hurlant.crypto.symmetric.ICipher;
            import com.hurlant.util.Base64;
            import com.hurlant.util.Hex;
            import com.security.AesKeyGen;
            import com.security.EncryptionKeyGen;

            import mx.utils.Base64Decoder;
            public var mytest:String;
            private var kdata:ByteArray = new ByteArray();
            private var cleartextBytes:ByteArray = new ByteArray();
            private function encryptedSave():void
            {
                //create or retrieve the current shared object
                var so:SharedObject = SharedObject.getLocal("encryptedStore");

                //generate a random key

                var ec:EncryptionKeyGen = new EncryptionKeyGen();
                kdata=//some plaine text converted to byte array or some byte array
                trace(kdata);
                //store our data to encrypt into a ByteArray

                cleartextBytes.writeUTFBytes(plainText.text);

                var aes:ICipher = Crypto.getCipher("aes-ecb", kdata, Crypto.getPad("pkcs5"));

                aes.encrypt(cleartextBytes);
                trace("after Encription-------------"+cleartextBytes.length+cleartextBytes);

            }

            private function encryptedLoad():void
            {cleartextBytes=new ByteArray();
                cleartextBytes.writeUTFBytes(cyperText.text);
                                 trace(cleartextBytes +"-------------"+cleartextBytes.length);
                var aes:ICipher = Crypto.getCipher("aes-ecb", kdata, Crypto.getPad("pkcs5"));

                aes.decrypt(cleartextBytes);

            }
        ]]>
    </fx:Script>

    <mx:Panel width="600" height="400" title="FlexEncryptionExample1">
        <mx:Form width="100%">
            <mx:FormHeading label="Stored WebService credentials"/>
            <mx:FormItem label="User: " width="100%">
                <mx:TextInput id="plainText" width="100%"/>
            </mx:FormItem>
            <mx:FormItem label="CyperText: " width="100%">
                <mx:TextInput id="cyperText" width="100%"/>
            </mx:FormItem>
            <mx:FormItem label="plainText2: " width="100%">
                <mx:TextInput id="plainText2"  width="100%"/>
            </mx:FormItem>
            <s:Label text="" id="encryptedText" visible="false"/>
        </mx:Form>
        <mx:HBox width="100%" horizontalAlign="center" verticalAlign="bottom">
            <mx:Button label="Save" click="encryptedSave()"/>
            <mx:Button label="Load" click="encryptedLoad()"/>
        </mx:HBox>
    </mx:Panel>
</s:Application> 
```

任何人都可以帮助我谢谢......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T10:10:17.773

在转换为字符串时进行 Aes 加密后，我添加了以下代码，最后一切都正确了......

```
 aes.encrypt(cleartextBytes);
            trace("after Encription-------------"+cleartextBytes.length+cleartextBytes);
            cleartextBytes.position=0;
            var myEncoder:Base64Encoder = new Base64Encoder();

            myEncoder.encodeBytes(cleartextBytes);

            cyperText.text=myEncoder.toString();

            trace("Encoded string length"+cyperText.text.length); 
```

# css - 兼容性，优势少 css

> ID：11079039
> 
> 赞同：4
> 
> 时间：2012-06-18T08:08:36.963
> 
> 标签：css, cross-browser, less

对于我的网站，我正在考虑使用[Less](http://lesscss.org/)。

我可以在浏览器中遇到一些兼容性问题、JavaScript 问题或其他问题吗？我知道这比 CSS 好，但我不知道我是否会遇到问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-18T08:17:33.120

尽管我更喜欢[SASS](http://sass-lang.com/)而不是[LESS](http://lesscss.org/)（更好的语法 [循环和控制结构] 并且它具有更多功能 => 我的观点），**但通常使用 CSS-Framework 是一个好主意**。它可以节省时间和不必要的工作。请务必在生产模式下预编译您的样式。不要在客户端进行（可能会导致问题：禁用 javascript、性能问题...）。如果您预编译 CSS，您不必担心出现任何问题，因为原生 CSS 会交付给浏览器。

您可以在这里查看一个很好的比较：

[https://gist.github.com/820035](https://gist.github.com/820035)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-18T08:31:22.303

来自 LESS 文档：

> 作为 CSS 的扩展，LESS 不仅向后兼容 CSS，而且它添加的额外功能使用现有的 CSS 语法。[...] 如果有疑问，让您回退到 CSS。

生产中最好的方法是在服务器端编译它，而在开发中你可以简单地使用客户端 javascript 编译器：

[http://lesscss.org/#-client-side-usage](http://lesscss.org/#-client-side-usage)

另请注意，LESS 并不是严格意义上的框架（与 Twitter Bootstrap 相反），但可以轻松配对。Bootstrap 本身也有一个 LESS 增强版本。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-18T08:16:35.973

我同意@Christoph。我也更喜欢SASS。Less 或 Sass 也不习惯于浏览器兼容性。它们用于向 css 添加功能。

你可以在这里查看那篇文章。

[http://nittygrittyjs.com/blog/why-less-is-a-pain-in-the-sass/](http://nittygrittyjs.com/blog/why-less-is-a-pain-in-the-sass/)

# iphone - 如何从 Uidatepicker 获得正确的时间

> ID：11079047
> 
> 赞同：-1
> 
> 时间：2012-06-18T08:09:05.733
> 
> 标签：iphone, nsdate, uidatepicker

我正在使用下面的代码从 datepicker 获取日期和时间。

当我使用格式化程序时，它给出了正确的时间。

但是当我将该字符串转换为`NSdate`对象时，它没有给出正确的时间值。

```
 NSDate *choice = [datepicker date];
 NSDateFormatter *format = [[NSDateFormatter alloc] init];
 [format setDateFormat:@"MMM dd, yyyy HH:mm"]; 
 NSString *dateString = [format stringFromDate:choice]; 

NSDate *date = [format dateFromString:dateString]; NSLog(@"%@",date); 
```

`DateString`给出了正确的值，但是当我`NSdate`再次将其转换为时，它给出了错误的值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T08:11:26.560

如果正在记录的数据有几个小时的差异，那么它可以，因为记录`NSDate`会在`GMT`时区记录它，那么这不是一个错误，如果你`dateString`是正确的并且你`NSdate`有几个小时的差异，那么你就没有问题

# java - 提取 SimpleDateFormat

> ID：11079051
> 
> 赞同：-1
> 
> 时间：2012-06-18T08:09:36.080
> 
> 标签：java, datetime, date

我使用 SimpleDateFormat 获取当前时间，我想返回 6 小时 30 分钟前的新时间。我尝试使用日历来执行此操作，但如果分钟数小于 30，它会返回负值。所以我的问题是，当需要从小时或天数借用时，是否可以这样做以返回正数。这是代码。我使用eclipse，程序正在编译和运行。

```
import java.text.DateFormat;
import java.text.NumberFormat;
import java.text.ParseException;
import java.text.SimpleDateFormat;
import java.util.Calendar;
import java.util.Date;
import java.util.Locale;

public class DifferenceInHours_04 
{

    public static void main(String[] args) 
    {
        Date date = new Date();
        SimpleDateFormat sdf = new SimpleDateFormat("dd MMM yyyy hh:mm:ss zzz" );
        System.out.println(sdf.format(date));

        Calendar cal = Calendar.getInstance();
        int hour = cal.get(Calendar.HOUR);
        int minute = cal.get(Calendar.MINUTE );
        int second = cal.get(Calendar.SECOND);
        System.out.println("Current time: "  + hour + ":" + minute +":" + second);

        int newHour = hour - 6;
        int newMinute = minute - 30;
        System.out.println("Modified time: " + newHour + ":" + newMinute + ":"+  second);

    }

} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-18T08:11:10.210

简单做

```
 Calendar cal = Calendar.getInstance();
    cal.add(Calendar.HOUR, -6);
    cal.add(Calendar.MINUTE,-30 );
    System.out.println("Time before 6 hour and 30 min from now is : "+ cal.getTime()); 
```

# php - 从 PHP 调用 JavaScript 函数的问题

> ID：11079059
> 
> 赞同：1
> 
> 时间：2012-06-18T08:09:59.623
> 
> 标签：php, javascript, jquery, dialog

我创建了一个表单来将新闻通讯上传到数据库中。我正在使用 iFrame 方法在不刷新页面的情况下发布日期，并且正在为加载显示一个不错的 jQuery 对话框。

我现在在上传完成后关闭该对话框时遇到问题。我在网上阅读的所有教程都说我必须像这样回显代码：

```
<?php
  echo "<script type='text/javascript>uploadComplete();</script>";
?> 
```

现在，当我执行一些愚蠢的测试（例如回显警报）时，JavaScript 确实会运行，但是当我尝试调用任何函数或直接转到 jQuery 以关闭对话框时，它只是说该函数未定义。如果有必要，我可以发布我的代码，但它非常标准，我认为在这种示例中我不需要。

任何帮助，将不胜感激！提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-18T08:10:59.070

你忘`'`了到底`'text/javascript'`

```
echo "<script type='text/javascript'>uploadComplete();</script>"; 
```

**注意**：`type`如果脚本是 JavaScript，则该属性是完全不需要的

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-18T08:12:35.010

```
using just php

echo '<script type="text/javascript">'
   , 'jsfunction();'
   , '</script>';

escaping from php mode to direct output mode

<?php
// some php stuff
?>
<script type="text/javascript">
    jsFunction();
</script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-25T12:48:12.263

我最终通过使用以下代码解决了这个问题：

```
<?php
  echo "<script type='text/javascript>top.uploadComplete();</script>";
?> 
```

“top”关键字刚刚解决了我所有的问题。我希望这对遇到与我相同问题的人有所帮助！

# java - 创建一个简单的 LAN Messenger

> ID：11079068
> 
> 赞同：4
> 
> 时间：2012-06-18T08:10:58.023
> 
> 标签：java, sockets, lan, instantmessenger

我想用 Java 创建一个简单的 LAN 会议聊天风格的信使，但我***不知道从哪里开始***。
它必须具有以下特点：

*   **没有永久用户名**：用户每次加入时都必须能够输入用户名，但应该有一个记住我的选项，以防他经常使用它*   一个简单的聊天室界面，右侧显示所有在线用户，中间显示聊天消息*   私人聊天服务和阻止选项我**不**想要现成的代码，我希望有人向我解释从哪里开始以及如何去做以及我应该知道的事情（例如输入用户名和内容的文本框）
*想象一下作为一个信使，允许一栋楼里的所有员工互相聊天*

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-18T08:18:08.440

尽管您的问题很模糊，但您似乎已经具备了基础知识（套接字和所有这些）。我建议您从阅读 Oracle 网站上的[All About Sockets](http://docs.oracle.com/javase/tutorial/networking/sockets/index.html)和[All About Datagrams](http://docs.oracle.com/javase/tutorial/networking/datagrams/index.html) Java 课程开始。您可能想要消化的第二课的主要内容是关于广播的部分（用于自动服务器检测）。

以下是我将如何在高层次上进行实施：

*   在一个可执行文件中实现一个包含服务器和客户端功能的应用程序。
*   启动应用程序时，如果未检测到其他服务器（自动或由用户指定），则运行该服务器。
*   始终运行客户端。这意味着，没有专用服务器将用作客户端之一充当服务器。每个客户端都连接到服务器（包括与服务器在同一台机器上运行的客户端）。

显然有很多方法可以制作这种应用程序。我并不是说我描述的方式是最好的。但是，它可能适合您描述的用例，并且它的实现相当简单。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-18T08:27:40.827

听起来您需要为每个用户提供一个服务器应用程序和一个客户端应用程序。他们将通过套接字进行通信。服务器会打开 a [`ServerSocket`](http://docs.oracle.com/javase/6/docs/api/java/net/ServerSocket.html)，客户端会创建[`Socket`](http://docs.oracle.com/javase/6/docs/api/java/net/Socket.html)s 并在他们想要聊天时连接到服务器。

服务器需要能够接受来自客户端的连接。服务器将保存所有全局细节，例如存在哪些聊天室，每个聊天室都有谁等。基本行为是，当聊天室中有几个人（客户端）时，一个客户端会说些什么，这被发送到服务器通过套接字。服务器拥有聊天室中所有客户端（套接字）的列表，并将消息发送给每个客户端。

最后，您需要注意服务器必须是多线程的，并且可能需要为每个连接的客户端套接字创建一个新线程。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-18T08:37:53.830

由于您不知道是否会有用于该目的的服务器，因此除了先前的响应之外，您可能会感兴趣的下一个链接：

[http://docs.oracle.com/javase/tutorial/networking/datagrams/broadcasting.html](http://docs.oracle.com/javase/tutorial/networking/datagrams/broadcasting.html)

可以实现阻止选项，保存 IP 列表并忽略来自它们的消息。

您还必须查看 swing 教程，以便了解如何创建窗口、文本框、文本区域、按钮等，这样您就可以创建自己的界面：

[http://docs.oracle.com/javase/tutorial/uiswing/](http://docs.oracle.com/javase/tutorial/uiswing/)

例如，您可以使用属性文件非常轻松地保存用户，但如果您提出此类问题，也许您必须从​​头开始学习 java。

# playframework - 如何通过功能测试设置和验证闪存范围

> ID：11079071
> 
> 赞同：1
> 
> 时间：2012-06-18T08:11:04.140
> 
> 标签：playframework

在播放功能测试中，我正在执行对我的一些控制器方法的请求。在控制器中，我使用闪存范围来获取一些参数并使用它。但是在测试中我无法设置这个闪存参数，我尝试了：

```
Flash.current().put("key","value"); 
```

但这会在测试中给出 NullPointerException。

并且在控制器闪存范围内为空：

```
flash.get("key") 
```

如何设置闪光范围？我不想测试设置这个闪存值的整个工作流程，并阅读它，我只想专注于这个请求。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T12:39:34.930

功能测试执行与功能测试的测试设置在不同的线程中，因此设置 Flash.current() 将不起作用。

但是，`FunctionalTest`该类在调用之间存储 cookie。

因此，测试使用 flash 范围的请求的一种可能性是首先调用在您的应用程序中确实设置了 flash 范围的请求——尽管根据您的描述，您不希望这样做。

另一种可能性是手动将 Flash-Scoped 变量放入 cookie 中`Request`——您需要咨询`play.mvc.Scope.Flash.save()`格式。

# php - PHP：构建分层数组结构

> ID：11079079
> 
> 赞同：1
> 
> 时间：2012-06-18T08:11:37.103
> 
> 标签：php, json, hierarchy

我在构建分层数组结构时遇到了一些问题——我几乎已经完成了，但是有一些无法解释的东西让我的数组看起来很奇怪，我希望你能帮助我。

树形结构为：

```
root
|data
|-children
|--data
|--children
|---data
|---children 
```

任何孩子都可以有任意数量的孩子，每个孩子可以有任意数量的父母。

我有一个构建树的函数：

```
private function build_tree($rows,$parent) {
    $i = 0;
    $response -> result = array();
    $result = array();
    $leaf = false;

    foreach($rows as $row) {
        if($row['parent_id'] == $parent) {
            $leaf = is_null($row['treeDef']) ? false : true;
            $workingSet = array_merge($result,array(                
                'id' => (int)$i, 
                'parent_id' => (int)$row['parent_id'], 
                'child_id' => (int)$row['id'], 
                'name' => (string)$row['resourceName'], 
                'updated' => strtotime($row['updated']), 
                'purchasedUnit' => (string)$row['purchasingUnit'], 
                'purchasedCost' => (double)$row['purchasingCosts'], 
                'purchasedDiscount' => (double)$row['discount'], 
                'estimateUnit' => (string)$row['estimatingUnit'], 
                'profitAddOn' => (string)$row['profitAddOn'], 
                'landedCost' => (double)$row['landedCost'], 
                'unitCorrelation' => (double)$row['unitCorrelation'], 
                'leadTime' => (string)$row['leadTime'], 
                'ResourceClassShortname' => (string)$row['ResourceClassShortname'], 
                'supplierName' => (string)$row['nameSupplier'],
                'iconCls' => (string)$row['typeIcon'],
                'leaf' => $leaf
            ));
            $hasChildren = $this->Resource_model->has_children($rows,$row['id']);
            if ($hasChildren->check) {
                if (!$leaf) {
                    for($j=0; $j <= ($hasChildren -> rows); $j++) {
                        $parentArray = $workingSet;
                        $childArray = $this -> Resource_model -> build_tree($rows,$row['id']);
                        $workingSet = array_merge($parentArray,array('children' => $childArray -> result));
                    }
                } 
            }
            $result[$i] = $workingSet;
            $i++;
        }
    }

    $response -> result = $result;
    $response -> rows = $i; 
    return $response;
} 
```

这会产生这个 JSON：

![打印屏幕](../Images/2a19de0663a1d0ac4c2f3349a22771f0.png "缩略图")

[大图](http://www.mediafire.com/imageview.php?thumb=2&quickkey=lhy5y46fc42cgj9 "大图")

每个有 2 个孩子（或更多？ - 没有测试值）的项目都会像应该的那样获得第一个项目，但第二个项目也包含第一个项目 - 复制所有结果。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T08:28:29.663

而不是`array_merge`使用`array_push`- 这将添加`children`子数组，而不是尝试将它与已经存在的子数组合并......

它在这部分代码中（已编辑）：

```
 $hasChildren = $this->Resource_model->has_children($rows,$row['id']);
        if ($hasChildren->check) {
            if (!$leaf) {
                for($j=0; $j <= ($hasChildren->rows); $j++) {
                    $parentArray = $workingSet;
                    $childArray = $this->Resource_model->build_tree($rows,$row['id']);
                    $workingSet = array_push($parentArray,array('children' => $childArray->result));
                }
            } 
        } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T09:17:13.027

让它工作，这是最终的代码：

```
private function build_tree($rows,$parent) {
    $i = 0;
    $response -> result = array();
    $result = array();
    $leaf = false;
    $newArray = array();

    foreach($rows as $row) {
        if($row['parent_id'] == $parent) {
            $leaf = is_null($row['treeDef']) ? false : true;
            $newArray = array(              
                'id' => (int)$i, 
                'parent_id' => (int)$row['parent_id'], 
                'child_id' => (int)$row['id'], 
                'name' => (string)$row['resourceName'], 
                'updated' => strtotime($row['updated']), 
                'purchasedUnit' => (string)$row['purchasingUnit'], 
                'purchasedCost' => (double)$row['purchasingCosts'], 
                'purchasedDiscount' => (double)$row['discount'], 
                'estimateUnit' => (string)$row['estimatingUnit'], 
                'profitAddOn' => (string)$row['profitAddOn'], 
                'landedCost' => (double)$row['landedCost'], 
                'unitCorrelation' => (double)$row['unitCorrelation'], 
                'leadTime' => (string)$row['leadTime'], 
                'ResourceClassShortname' => (string)$row['ResourceClassShortname'], 
                'supplierName' => (string)$row['nameSupplier'],
                'iconCls' => (string)$row['typeIcon'],
                'leaf' => $leaf
            );

            $hasChildren = $this -> Resource_model -> has_children($rows,$row['id']);
            if ($hasChildren->check) {
                for($j=0; $j <= ($hasChildren -> rows); $j++) {
                    $childArray = $this -> Resource_model -> build_tree($rows,$row['id']);
                    $newArray = array_merge($newArray, array('children' => $childArray -> result));
                }
            }
            $result[$i] = $newArray;
            $i++;
        }
    }

    $response -> result = $result;
    $response -> rows = $i; 
    return $response;
} 
```

# php - 让 tinyMCE 编辑器在 PHP 脚本中工作？

> ID：11079081
> 
> 赞同：1
> 
> 时间：2012-06-18T08:12:08.693
> 
> 标签：php, tinymce

到目前为止，我有一个简单的 textarea，它看起来像这样：

```
<textarea id="mailtemplate4" rows="20" cols="139" name="templatearea4"></textarea> 
```

稍后我将使用 Ajax 添加此文本区域的内容。现在我想用 tinyMCE 编辑器替换这个 textarea。所以我将 tiny_mce.js 文件添加到我的 Web 应用程序中，并且还调用了 tinymce 的 init，如下所示：

```
tinyMCE.init({
    mode : "textareas",
    theme : "simple"   
}); 
```

这用简单的 tinymce 编辑器替换了我的旧文本区域，但我无法输入任何文本，并且内容没有用 Ajax 填充。查看页面的源代码，我看到它在我的旧区域下方添加了一些代码，它的开头是这样的：

```
<span id="mailtemplate4_container" class="mceEditor defaultSimpleSkin">... 
```

我想那是正确的，那么问题是什么？为什么内容没有填写，为什么我不能输入任何文字？该代码不会引发 JavaScript 错误。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T11:17:28.467

如果您没有`tiny_mce.js`在主文档中包含 ，您可能会遇到编辑器出现问题。

# windows - openssl fips 错误

> ID：11079089
> 
> 赞同：2
> 
> 时间：2012-06-18T08:12:36.710
> 
> 标签：windows, visual-c++, 64-bit, openssl, fips

我在 Windows 中运行的服务项目中使用 OpenSSL 库。这些库是按照 FIPS 标准构建的。在 32 位 Windows 操作系统中，该服务运行良好。但是，当我尝试在 64 位 Windows（Windows Server 2008、Windows 7 等）中运行项目时，程序会崩溃。

程序的输出：.\fips\fips.c(146): OpenSSL internal error, assertion failed: FATAL FIPS SELFTEST FAILURE

我正在使用 C++ 来实现该服务项目并使用 MS Visual Studio 2010。此外，我正在使用 Win32 设置构建该项目，并且还在我收到的 64 位平台中使用 32 位编译的 OpenSSL 库错误。OpenSSL 版本是 0.9.8r。

任何想法将不胜感激，在此先感谢。

# android - 如何从 Web 服务中提取或解析值以在 Android 上登录？

> ID：11079091
> 
> 赞同：0
> 
> 时间：2012-06-18T08:13:08.697
> 
> 标签：android, web-services

我已经制作了 .NET Web 服务，到目前为止，我的 android 应用程序可以与我的 Web 服务进行通信。现在，我想制作一个登录表单，但我对来自 Web 服务的值感到困惑。

这是我的登录代码：

```
// Login button Click Event
        btnLogin.setOnClickListener(new View.OnClickListener() {

            public void onClick(View view) {
                try
                {
                    inputUser = (EditText) findViewById(R.id.loginUser);
                    inputPassword = (EditText) findViewById(R.id.loginPassword);
                    String user = inputUser.getText().toString();
                    String password = inputPassword.getText().toString();
                    hasil = "START";

                    Panggil call = new Panggil();
                    call.user = user;
                    call.password = password;
                    call.join();
                    call.start();

                    while (hasil.equals("START")){

                        try{
                            Thread.sleep(10);
                        }

                        catch (Exception ex){

                        }
                    }

                    if (hasil != ""){
                        loginErrorMsg.setText("");
                        // Launch Dashboard Screen

                        // Send User Full Name to Dashboard Screen
                        Intent dashboard = new Intent(getApplicationContext(), DashboardActivity.class);
                        dashboard.putExtra("myname", hasil);

                        // Close all views before launching Dashboard
                        dashboard.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
                        startActivity(dashboard);

                        // Close Login Screen
                        finish();
                    }
                    else{
                        // Error in login
                        loginErrorMsg.setText("Incorrect username/password");
                    }
                }

                catch(Exception ex)
                {
                    ad.setTitle("Error!");
                    ad.setMessage(ex.toString());
                    ad.show();
                }
            }
        }); 
```

从该登录代码中，我得到如下值`hasil`：

```
anyType{ccduser=myusername; password=123456} 
```

如何提取或解析该值并将其`IF..ELSE..`用作登录条件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T20:47:34.840

我会把这个作为答案..

我建议您使用[JSON](http://www.json.org/)将数据从 ws 传递到客户端并返回，互联网上有很多免费的 .NET 和 android 库。Android 也集成[了 JSON 解析器 API](http://developer.android.com/reference/org/json/package-summary.html)

您也可以使用 XML，但对于移动设备，我会推荐 JSON，因为它更轻巧，并且您可以找到很多库。您也可以开发自己的数据封装格式，但这需要一些时间，如果您愿意的话将来要使您的客户端应用程序与其他服务器一起使用或您的服务器将数据发送到其他客户端，您将不得不返回并使用一些标准，如 JSON 或 XML。

# closest - 以下jquery没有运行

> ID：11079092
> 
> 赞同：0
> 
> 时间：2012-06-18T08:13:13.577
> 
> 标签：closest

jquery没有执行！！！我不知道为什么

```
 $(".other-edithion").click(function(){ 
var city = $(this).closest('#city');
    if (city.is(":hidden"))city.fadeIn("slow");
    else {city.fadeOut("slow");}
 });
 $("#city").mouseleave(function(){
     $("#city").fadeOut("slow");
 }); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-18T08:17:04.420

如果您有元素的 id，则不需要[.closest()](http://api.jquery.com/closest/)

```
var city = $('#city'); 
```

作为 jQuery.closest()

> 获取与选择器匹配的第一个元素，从当前元素开始，向上遍历 DOM 树。

如果`#city`没有通过 dom 树，选择器将无法匹配元素。

对于鼠标离开，

```
$('#city, .other-edithion #city').mouseleave(function(){
    $(this).fadeOut('slow');
}); 
```

# sql - 只有一列的表应该有一个主键吗？

> ID：11079093
> 
> 赞同：1
> 
> 时间：2012-06-18T08:13:19.140
> 
> 标签：sql

例如，我有一个名为的表`programs`和另一个名为`format`. 这些`format`表包含一个名为 format 的列，它具有三个可能的值：zip、rar 和 exe。格式表应该有主键吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-18T08:17:25.147

想想如果您的表格包含以下内容会发生什么：

```
zip
rar
exe
exe 
```

如果您没有发现问题，那么您的桌子不需要 PK。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T08:16:07.367

如果这些值是唯一的，那么可能不是。但是，如果您对值没有唯一索引，则可能有重复项，这会使识别单行变得困难。此外，使用具有已知固定长度（例如整数 ID）的 PK 将有助于提高性能并减少索引碎片。另外，如果您需要加入此表，最好通过使用外键（在某些 RDBMS 中需要 PK）来引用格式的 ID 而不是值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-18T08:16:11.300

如果您有一个名为`Programs`的表和一个`Format`用一堆值调用的表，为什么不在表中有一个`FormatId`列`Program`并使用表中的（当前三个）外键值之一`Format`？

请参阅有关规范化的这些说明：[http](http://en.wikipedia.org/wiki/Database_normalization) ://en.wikipedia.org/wiki/Database_normalization （我确定您知道这一点，但也许其他阅读该问题的人可能不知道）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-18T08:17:05.197

在大多数情况下，只有一列的表将具有唯一值，因为重复值在单列中也是没有意义的。

所以，在你的情况下，格式不会重复（这就是我的想法），所以制作主键没有害处，但是

1）它对那个字段强加一个索引（你想要那个吗？）

2）将来，如果您打算将其链接到另一个表，请确保将其用作主键，并且不要为主键引入诸如 format_id 之类的任何内容。如果您这样做，那么请不要立即将其作为主键。

# java - 在 windows xp 上使用 Memcached 和 Java 的要求

> ID：11079096
> 
> 赞同：1
> 
> 时间：2012-06-18T08:13:29.163
> 
> 标签：java, windows-xp, memcached, spymemcached

在 windows xp 上通过 java 使用 memcached 有什么要求？目前我使用 memcached 1.4.4 作为服务，eclipse ganymede，spymemcached 2.8.0。但是我在设置密钥时遇到问题，连接意外断开并尝试重新连接。

我是否需要与它们一起使用任何其他软件或服务，例如 libevent？

# visual-c++ - 如何以编程方式更改 MFC 中组框的默认标题颜色？

> ID：11079097
> 
> 赞同：0
> 
> 时间：2012-06-18T08:13:39.257
> 
> 标签：visual-c++, mfc, colors, groupbox

目前，我的应用程序中的组框在 Windows xp 中显示蓝色标题，在 Windows 7 中显示黑色。如何以编程方式更改 MFC 中组框的默认标题颜色？这样它就可以在 Windows XP 和 Windows 7 中显示为黑色。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T09:19:52.847

看看[OnCtlColor()。](http://msdn.microsoft.com/en-us/library/0wwk06hc%28v=vs.80%29.aspx)MFC 将在绘制控件之前调用它以允许您设置画笔。

# google-docs - 无法关闭 Google 选择器 iframe

> ID：11079100
> 
> 赞同：2
> 
> 时间：2012-06-18T08:14:01.140
> 
> 标签：google-docs, google-picker

我正在使用 Google Picker api 访问我的 google 驱动器文件夹的文件。以下 html 页面使用选择器加载我的谷歌文档。但是，在我选择一个文档并按选择选项后，选择器对话框没有关闭。甚至当我按下 iframe 右上角的关闭按钮时。我认为问题出在选择器回调中，但我不知道如何解决这个问题。我在这里包含了 html 页面。

```
<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8"/>
    <title>Google Picker Example</title>

    <!-- The standard Google Loader script. -->
    <script src="http://www.google.com/jsapi"></script>
    <script type="text/javascript">

    // Use the Google Loader script to load the google.picker script.
    // google.setOnLoadCallback(createPicker);
    google.load('picker', '1');

    // Create and render a Picker object for searching images.
    function createPicker() {
        var picker = new google.picker.PickerBuilder().
            addView(google.picker.ViewId.DOCS).
            setCallback(pickerCallback).
            build();
        picker.setVisible(true);
    }

    // A simple callback implementation.
    function pickerCallback(data) {
      var url = 'nothing';
      if (data[google.picker.Response.ACTION] == google.picker.Action.PICKED) {
        var doc = data[google.picker.Response.DOCUMENTS][0];
        url = doc[google.picker.Document.URL];
      }
      var message = 'You picked: ' + url;
      document.getElementById('result').innerHTML = message;
    }
    </script>
  </head>
  <body>
    <div id="result">
      <button onclick="createPicker()">Upload Files </button>
      <iframe></iframe>
    </div>
  </body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T16:58:44.870

Picker 需要一些跨域通信，如果您在本地打开页面（例如从磁盘打开 html 文件），则无法完成这些通信。

在 Web 服务器上托管相同的页面，它应该可以按预期工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-20T04:52:25.623

问题是我没有使用谷歌 api 密钥来验证我与谷歌的通信......一旦关闭被激活，它就会使用谷歌提供的 json 文件调用 pickercallback ...... .

问题出在这条线...

```
<script src="http://www.google.com/jsapi"></script> 
```

它应该像..

```
<script src="http://www.google.com/jsapi?key=#########################"></script> 
```

用您的 google api 控制台密钥替换 #'s ....您可以在此处生成密钥[https://code.google.com/apis/console/](https://code.google.com/apis/console/)

# ms-word - windows server 2003如何生成word文档？

> ID：11079102
> 
> 赞同：1
> 
> 时间：2012-06-18T08:14:10.610
> 
> 标签：ms-word, office-interop

我编写了一个函数来使用 Office Interop Word 对象生成 Word 文档。我的代码如下所示。它在我的本地系统中运行良好。但是当我尝试从window server 2003 运行它时它不起作用。它一直在 Word.Document wordDoc = wordApp.Documents.Open 处加载并且不执行任何操作。你能帮帮我吗？

```
private void GenerateEmploymentCertificate()
{
    object Nothing = System.Reflection.Missing.Value;
    object format = Word.WdSaveFormat.wdFormatDocument;
    Word.Application wordApp = new Word.ApplicationClass();

    object srcFileName = Server.MapPath(ResolveUrl(@"~/HRLetter\Arabia\Templates\Employment Certificate.doc"));
    Word.Document wordDoc = wordApp.Documents.Open
   (ref srcFileName, ref format, ref Nothing, ref Nothing,
   ref Nothing, ref Nothing, ref Nothing, ref Nothing, ref Nothing,
   ref Nothing, ref Nothing, ref Nothing, ref Nothing, ref Nothing,
   ref Nothing, ref Nothing);
    try
    {

        object bookmarkDate = "Date";
        wordDoc.Bookmarks.get_Item(ref bookmarkDate).Select();
        wordApp.Selection.Text = string.Format("{0:MM/dd/yyyy}", lblRequestdate.Text);

        object bookmarkEmployeeName = "EmployeeName";
        wordDoc.Bookmarks.get_Item(ref bookmarkEmployeeName).Select();
        wordApp.Selection.Text = lblEmployeeName1.Text;

        object bookmarkCompany = "Company";
        wordDoc.Bookmarks.get_Item(ref bookmarkCompany).Select();
        wordApp.Selection.Text = lblCompanyName1.Text; 

        object bookmarkJoiningDate = "JoiningDate";
        wordDoc.Bookmarks.get_Item(ref bookmarkJoiningDate).Select();
        wordApp.Selection.Text = string.Format("{0:MM/dd/yyyy}", lblJoiningDate1.Text); 

        object bookmarkDesignation = "Designation";
        wordDoc.Bookmarks.get_Item(ref bookmarkDesignation).Select();
        wordApp.Selection.Text = lblDesignation1.Text;

        string DocName;
        DocName = string.Format("{0}_employment_certificate", lblRequestNo.Text);
        hFilename.Value = DocName;
        wordDoc.SaveAs(Server.MapPath(ResolveUrl(@"~/HRLetter\Arabia\Letters\" + DocName + ".doc")));

    }
    catch (Exception exp)
    {
        Session["generalError"] = null;
        Session["generalError"] = "There was an error at generating the letter. Please send email to unify.admin@unilever.com with this screen shot.<br /><br /><br />Request No:" + lblRequestNo.Text + "<br />Action:Submit<br />" + exp.StackTrace.ToString();
        LogManager logHelper = new LogManager(Request.PhysicalApplicationPath.Trim(), "Leave System - Malaysia");
        logHelper.LogError("[btnSubmit_Click - ]" + exp.Message + ".StackTrace - " + exp.StackTrace.ToString());
        Response.Redirect(ResolveUrl("~/Error/ErrorHandler.aspx"));
    }
    finally
    {
        // Close wordDoc2
        wordDoc.Close(ref Nothing, ref Nothing, ref Nothing);
        if (wordDoc != null)
        {
            System.Runtime.InteropServices.Marshal.ReleaseComObject(wordDoc);
            wordDoc = null;
        }
        // close wordApp
        wordApp.Quit(ref Nothing, ref Nothing, ref Nothing);
        if (wordApp != null)
        {
            System.Runtime.InteropServices.Marshal.ReleaseComObject(wordApp);
            wordApp = null;
        }
    }
    GC.Collect();} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T16:55:35.820

MS office 在服务器环境中并不能真正工作。[连MS都这么说](http://support.microsoft.com/kb/257757)。

我们已经让它与 LibreOffice 一起工作。您可以在我们的[博客上阅读](http://blog.templater.info/post/2012-05-30-joys-converting-docx-pdf)

# c# - 水晶报表：如何获取传递给水晶报表的参数的多行

> ID：11079104
> 
> 赞同：0
> 
> 时间：2012-06-18T08:14:15.213
> 
> 标签：c#, crystal-reports

我有一张表 tbl_invoice。我想在这个表中显示数据的水晶报告。对于每张发票，我都有 invoiceid（主键）和账单编号。每张发票的主键都会更改，但 billno 保持不变。我正在获取 max invoiceid 的 billno 并将其传递给水晶报告。但它只显示了水晶报告中的最后一条记录。如何显示与账单号匹配的所有记录？我写了这段代码

```
private void button1_Click(object sender, EventArgs e)
    {
        SalesInvoice_Caret crt = new SalesInvoice_Caret();
        crt.SetParameterValue("BillNo", txtBillNo.Text);
        crystalReportViewer1.ReportSource = crt;
        crystalReportViewer1.Refresh();
    }

    private void crt_sales_invoice_viewer_Load(object sender, EventArgs e)
    {
        string getBill = "Select top 1 BillNo from tbl_sales_invoice order by SalesInvoiceId desc";
        SqlCommand cmd = new SqlCommand(getBill, con);
        con.Open();
            object obj = cmd.ExecuteScalar();
        con.Close();

        MessageBox.Show(obj.ToString());
        txtBillNo.Text = obj.ToString();

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T14:18:05.497

我认为您需要在创建“SalesInvoice_Caret”对象时传递所有发票编号和所需数据。创建一个查询，为所选账单编号提供所有 invoiceid 编号。并将数据传递给报告。在报告中，您需要使用组专家为每个 invoiceid-billno 对创建一个特定的报告。

# mysql - MySQL：为什么这些查询返回不同的结果？

> ID：11079111
> 
> 赞同：0
> 
> 时间：2012-06-18T08:15:07.323
> 
> 标签：mysql, sql, database, select

**查询一：**

```
SELECT * 
FROM user_d1 
WHERE EXISTS (SELECT 1 
              FROM `user_d1` 
              WHERE birthdate BETWEEN '1989-08-04' AND '1991-08-04') 
ORDER BY timestamp_lastonline DESC 
LIMIT 20 
```

**查询 2：**

```
SELECT * 
FROM user_d1 
WHERE birthdate BETWEEN '1989-08-04' AND '1991-08-04' 
ORDER BY timestamp_lastonline DESC 
LIMIT 20 
```

我真的不明白：为什么**查询 2**返回错误的结果？它返回一个列表，首先按顺序排列`birthdate`，然后按`timestamp_lastonline`...

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-18T08:20:47.163

**查询 1**：如果日期之间至少**存在**一条记录，则检索整个 talbe。

**查询 2**：仅检索日期之间的记录。

阅读[此处](http://www.techonthenet.com/sql/exists.php)了解其`EXISTS`工作原理。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-18T08:21:54.150

您的第二个查询使用 BETWEEN 返回第一个条目与`'1989-08-04'`下一个条目之间的每个条目`'1991-08-04'`，然后按顺序对这些条目进行排序`timestamp_lastonline DESC`。请注意，这实际上是返回具有这两个值的两个条目之间的条目，而不是在 1989 年到 1991 年之间的每个条目（除非您手动订购这些条目以按时间顺序编制索引！）。我很想看看您认为您的第一个查询返回什么，因为`timestamp_lastonline`如果有 BETWEEN 子句返回的行，它将获取表中的每个条目排序。

# asp.net - SharePoint 2010 中的 Asp.net 图表控件

> ID：11079113
> 
> 赞同：1
> 
> 时间：2012-06-18T08:15:37.697
> 
> 标签：asp.net, sharepoint-2010, charts

谁能帮我将图表控件的临时图像存储在 SharePoint 2010 文档库/图片库中？有没有可能？实际上想在负载平衡的环境中使用带有图表控件的 webpart。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T06:33:27.573

我想我得到了查询的答案，要将图表图像存储在 SharePoint 文档库中，我们需要将文档库映射到硬盘驱动器（就像我做 z:)，然后将图表图像处理程序设置为：为此正常工作，我们还需要将脚本管理器的异步回发超时属性更改为 3600，即 AsyncPostBackTimeOut="3600"。在我的环境中，这个过程大约需要 3 分钟（因为它首先在文档库中创建图表图像，然后下载这些图像），这对于用户等待这么长时间来说有点高:( 所以再次搜索一些可以使过程更快。希望这可以帮助某人。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T04:02:29.340

文档库中的信息存储在数据库中，因此在负载平衡的环境中保存图像应该没有问题。文档/图像库中的图像都是 URL 可访问的资源，因此您应该能够填充图表控件的 ImageLocation 属性并将 ImageStorageMode 设置为 ImageStorageMode.UseImageLocation。将其封装在 Web 部件中不应与用户控件有任何区别。您可以选择在同一个站点 coll 功能中预配图像库和 Web 部件。

# android - Android SoundPool 播放，但音频断断续续。有什么建议么？

> ID：11079114
> 
> 赞同：3
> 
> 时间：2012-06-18T08:15:43.413
> 
> 标签：android, android-mediaplayer, android-audiomanager

我正在使用`SoundPool`，上下文是我想循环播放多个音效。

除了某些效果的音频质量太差之外，一切正常，这是随机发生的。

听到这些音效，感觉音频断断续续，播放了 2-3 次，我尝试将音效播放的速率和初始化流音量设置为`SoundPool.play(index, streamVolume, streamVolume, 1, 0, 1f);`仅 1 次以减少延迟，但无济于事。

我还尝试了各种音频格式，如 ogg、wav、mp3，但都是一样的。

有人可以很好地阐明这一点。

# php - 如何使数组循环？

> ID：11079120
> 
> 赞同：-3
> 
> 时间：2012-06-18T08:16:44.693
> 
> 标签：php, arrays

例如，我有数组

```
// In
$arr = [0, 1, 2, 4, 5];
// Out
$cycled_arr = [5, 1, 2, 3, 4, 0]; 
```

我这样做了：

```
$arr = array(0, 1, 2, 3, 4, 5);

// It cycles once
function array_start_push($array){
    return array_merge( array(array_pop($array)), $array);
}
// This function must cycle array $times times
function cycleArray($times,&$glArr){
    if (!isset($times)){
        $result = $glArr;
    } else {
        for ($loc = 0; $loc <= $times; $loc++) {    
        $result = array_start_push($glArr); 
        $glArr = $result;
    }   
    return $result;
}

$hmm = cycleArray($arr);

echo "<pre>";
var_dump($hmm);
echo "</pre>"; 
```

不幸的是它正在加载页面，请小心执行！

**更新：**

```
// In array
$arr = array(0, 1, 2, 3, 4, 5);

// Circle array once 
function array_start_push($array){
    return array_merge( array(array_pop($array)), $array);
}
// Cycling $times times
function cycleArray($times,&$glArr){
        for ($loc = 0; $loc <= $times; $loc++) { 
            $result = array_start_push($glArr); 
            $glArr = $result;
        }   
    return $result;
}

$hmm = cycleArray(0,$arr);

echo "<pre>";
var_dump($hmm);
echo "</pre>"; 
```

但这会产生一次循环，尽管有一个空值！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T08:18:22.757

它可能会给你一个错误，因为`cycleArray($arr);`不存在。它需要2个参数。

检查您的错误日志。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T08:33:27.330

试试这个功能：

```
function cycleArray($times, $glArr){
  for($i = 0; $i < $times; $i++)
  {
    //$glArr[] = array_shift($glArr);
    array_unshift($glArr, array_pop($glArr));
  }
  return $glArr;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-18T08:45:06.183

假设您实际上是指*循环*，而不是您的示例显示的任何内容：

```
function cycle(array $arr, $steps) {
    return array_merge(array_slice($arr, $steps), array_slice($arr, 0, $steps));
}

var_dump(cycle(array(1, 2, 3, 4, 5), 3)); 
```

结果是：

```
array(5) {
  [0]=> int(4)
  [1]=> int(5)
  [2]=> int(1)
  [3]=> int(2)
  [4]=> int(3)
} 
```

# c# - 创建 PerformanceCounter 时出现 InvalidOperationException

> ID：11079124
> 
> 赞同：0
> 
> 时间：2012-06-18T08:17:00.983
> 
> 标签：c#, .net, exception-handling, performancecounter, invalidoperationexception

我正在尝试获取实际的可用内存。使用性能计数器似乎是最简单的解决方案。它在我的编码机上工作得很好，不幸的是我在目标计算机上得到了一个异常。我使用 Windows XP 和 .NET 3.5 你能帮帮我吗？

代码：

```
namespace TestConsole
{
    class Program
    {
        static void Main(string[] args)
        {
            PerformanceCounter ramCounter = new PerformanceCounter("Memory", "Available Bytes");
        }
    }
} 
```

例外：

```
Unhandled Exception: System.InvalidOperationException: Category does not exist.
   at System.Diagnostics.PerformanceCounterLib.CounterExists(String machine, String category, String counter)
   at System.Diagnostics.PerformanceCounter.Initialize()
   at System.Diagnostics.PerformanceCounter..ctor(String categoryName, String counterName, String instanceName, Boolean
readOnly)
   at System.Diagnostics.PerformanceCounter..ctor(String categoryName, String counterName)
   at TestConsole.Program.Main(String[] args) in D:\Projektarbeit\Bachelorarbeit\VS2010\Projekte\DiagStationControllerTe
stConsoleV1\TestConsole\Program.cs:line 15 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T08:44:47.947

异常消息说明了一切：

> 类别不存在。

平均类别“内存”不存在。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T13:52:04.530

我无法解决根本问题，但有一种解决方法是不使用 PerformanceCounter，而是使用 API-Calls，请参阅[http://www.codeproject.com/Articles/1285/Calling-API-functions-using-C](http://www.codeproject.com/Articles/1285/Calling-API-functions-using-C)

# perl - 使用 XML::Twig，如何检测最后一个兄弟姐妹？

> ID：11079128
> 
> 赞同：1
> 
> 时间：2012-06-18T08:17:18.170
> 
> 标签：perl, siblings, xml-twig, nextsibling

使用 Perl XML::Twig，如何在每个兄弟节点上循环直到到达最后一个节点？

```
while (condition_sibling_TWIG, $v)
{
$v=$v->next_sibling;
$v->print;

# process $v 
} 
```

条件应该是 ($v != undef) 吗？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-18T09:37:21.573

您可以使用`next_siblings`获取兄弟姐妹列表：

```
foreach my $sibling ($elt->next_siblings)
  { # process sibling
  } 
```

`next_siblings`接受一个可选条件作为参数，它是一个 XPath 步骤，或者至少是 XML::Twig 支持的 XPath 子集：`$elt->next_siblings('p[@type="secret"]'))`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-18T08:47:14.170

**更新：**

如果没有兄弟姐妹，该`sibling`方法返回下一个兄弟姐妹或 undef。您可以使用它来获取下一个，直到没有剩余为止。

> 兄弟姐妹 ($offset, $optional_condition)
> 
> ```
> Return the next or previous $offset-th sibling of the element, or the $offset-th one matching $optional_condition. If $offset is 
> ```
> 
> 负则返回前一个兄弟，如果 $offset 为正则返回下一个兄弟。$offset=0 如果没有条件或者元素匹配条件>，则返回元素，否则返回 undef。

这是一个例子：

```
use strict; use warnings; 
use XML::Twig;
my $t= XML::Twig->new();
$t->parse(<<__XML__
<root>
    <stuff>
        <entry1></entry1>
        <entry2></entry2>
        <entry3></entry3>
        <entry4></entry4>
        <entry5></entry5>
    </stuff>
</root>
__XML__
);
my $root = $t->root;
my $entry = $root->first_child('stuff')->first_child('entry1');
while ($entry = $entry->sibling(1)) {
  say $entry->print . ' (' . $entry->path . ')';
} 
```

*这只会给你那些你已经拥有的元素之后的元素。如果您从条目 3 开始，您只会得到条目 4 和 5。*

* * *

**原始（编辑）答案：**

您还可以使用该`siblings`方法遍历元素的所有兄弟元素的列表。

> 兄弟姐妹（$ optional_condition）
> 
> ```
> Return the list of siblings (optionally matching $optional_condition) of the element (excluding the element itself). 
> ```
> 
> 元素按文档顺序排列。

将上面的代码替换为：

```
my $root = $t->root;
my $entry1 = $root->first_child('stuff')->first_child('entry1');
# This is going to give us entries 2 to 5
foreach my $sibling ($entry1->siblings) {
  say $sibling->print . ' (' . $sibling->path . ')';
} 
```

*这为您提供了起始元素的所有兄弟姐妹，但不是那个本身。如果从 at 开始，`entry3`您将获得条目 1、2、4 和 5。*

# entity-framework-4 - 在数据库 C# 中存储密码文本字段

> ID：11079133
> 
> 赞同：0
> 
> 时间：2012-06-18T08:17:41.533
> 
> 标签：entity-framework-4, passwords, password-storage

我正在尝试编写一个简单的 ASP.Net 应用程序，允许用户使用他们的用户名和密码登录。我在 .NET Framework 4 中使用 EF 数据库，用 C# 编码。我的问题是，当用户在注册页面上注册他们的详细信息时，他们的密码值没有保存。该文本字段是密码字段。

如何将密码实际值保存在数据库中，但将文本字段保留为密码？我需要加密吗？我从来没有做过加密，所以任何帮助将不胜感激。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-05-25T22:18:09.473

您应该使用一些加密算法来计算密码字符串的哈希值（请参阅[c# 中的哈希字符串](https://stackoverflow.com/questions/3984138)）。然后将其作为字节数组或编码字符串（如 hex 或 base64）存储在 db 中。

# php - 如何使用 PHP cURL 发布 JSON 数据？

> ID：11079135
> 
> 赞同：196
> 
> 时间：2012-06-18T08:17:50.760
> 
> 标签：php, json, rest, curl

这是我的代码，

```
$url = 'url_to_post';
$data = array(
    "first_name" => "First name",
    "last_name" => "last name",
    "email"=>"email@gmail.com",
    "addresses" => array (
        "address1" => "some address",
        "city" => "city",
        "country" => "CA",
        "first_name" =>  "Mother",
        "last_name" =>  "Lastnameson",
        "phone" => "555-1212",
        "province" => "ON",
        "zip" => "123 ABC"
    )
);
$data_string = json_encode($data);
$ch=curl_init($url);
curl_setopt($ch, CURLOPT_CUSTOMREQUEST, "POST");
curl_setopt($ch, CURLOPT_POSTFIELDS, array("customer"=>$data_string));
curl_setopt($ch, CURLOPT_HEADER, true);
curl_setopt($ch, CURLOPT_HTTPHEADER,
    array(
        'Content-Type:application/json',
        'Content-Length: ' . strlen($data_string)
    )
);

$result = curl_exec($ch);
curl_close($ch); 
```

在其他页面，我正在检索帖子数据。

```
 print_r ($_POST); 
```

输出是

```
HTTP/1.1 200 OK
Date: Mon, 18 Jun 2012 07:58:11 GMT
Server: Apache
X-Powered-By: PHP/5.3.6
Vary: Accept-Encoding
Connection: close
Content-Type: text/html

Array ( ) 
```

所以，即使在我自己的服务器上，我也没有得到正确的数据，它是空数组。我想使用 json 实现 REST，如[http://docs.shopify.com/api/customer#create](http://docs.shopify.com/api/customer#create)

* * *

## 回答 #1

> 赞同：267
> 
> 时间：2013-03-26T17:26:44.130

您错误地发布了 json - 但即使它是正确的，您也无法使用`print_r($_POST)`（[在此处阅读原因](https://stackoverflow.com/a/813510/445295)）进行测试。相反，在您的第二页上，您可以使用 nab 传入的请求**`file_get_contents("php://input")`，其中将包含 POSTed json**。要以更易读的格式查看接收到的数据，请尝试以下操作：

```
echo '<pre>'.print_r(json_decode(file_get_contents("php://input")),1).'</pre>'; 
```

在您的代码中，您表示的是`Content-Type:application/json`，但您并未对所有 POST 数据进行 json 编码 - 只有“客户”POST 字段的值。相反，请执行以下操作：

```
$ch = curl_init( $url );
# Setup request to send json via POST.
$payload = json_encode( array( "customer"=> $data ) );
curl_setopt( $ch, CURLOPT_POSTFIELDS, $payload );
curl_setopt( $ch, CURLOPT_HTTPHEADER, array('Content-Type:application/json'));
# Return response instead of printing.
curl_setopt( $ch, CURLOPT_RETURNTRANSFER, true );
# Send request.
$result = curl_exec($ch);
curl_close($ch);
# Print response.
echo "<pre>$result</pre>"; 
```

*旁注：您可能会受益于使用[第三方库](http://docs.shopify.com/api/libraries/php)而不是自己直接与 Shopify API 交互。*

* * *

## 回答 #2

> 赞同：73
> 
> 时间：2018-12-24T06:03:23.927

```
$url = 'url_to_post';
$data = array("first_name" => "First name","last_name" => "last name","email"=>"email@gmail.com","addresses" => array ("address1" => "some address" ,"city" => "city","country" => "CA", "first_name" =>  "Mother","last_name" =>  "Lastnameson","phone" => "555-1212", "province" => "ON", "zip" => "123 ABC" ) );

$postdata = json_encode($data);

$ch = curl_init($url); 
curl_setopt($ch, CURLOPT_POST, 1);
curl_setopt($ch, CURLOPT_POSTFIELDS, $postdata);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1); 
curl_setopt($ch, CURLOPT_HTTPHEADER, array('Content-Type: application/json'));
$result = curl_exec($ch);
curl_close($ch);
print_r ($result); 
```

这段代码对我有用。你可以试试...

* * *

## 回答 #3

> 赞同：20
> 
> 时间：2012-06-18T08:34:09.840

代替

```
curl_setopt($ch, CURLOPT_POSTFIELDS, array("customer"=>$data_string)); 
```

和：

```
$data_string = json_encode(array("customer"=>$data));
//Send blindly the json-encoded string.
//The server, IMO, expects the body of the HTTP request to be in JSON
curl_setopt($ch, CURLOPT_POSTFIELDS, $data_string); 
```

* * *

我不明白您所说的“其他页面”是什么意思，我希望它是位于：'url_to_post' 的页面。如果该页面是用 PHP 编写的，那么您刚刚在上面发布的 JSON 将按以下方式读取：

```
$jsonStr = file_get_contents("php://input"); //read the HTTP body.
$json = json_decode($jsonStr); 
```

* * *

## 回答 #4

> 赞同：12
> 
> 时间：2018-03-06T13:09:50.897

请尝试以下代码：-

```
$url = 'url_to_post';

$data = array("first_name" => "First name","last_name" => "last name","email"=>"email@gmail.com","addresses" => array ("address1" => "some address" ,"city" => "city","country" => "CA", "first_name" =>  "Mother","last_name" =>  "Lastnameson","phone" => "555-1212", "province" => "ON", "zip" => "123 ABC" ) );

$data_string = json_encode(array("customer" =>$data));

$ch = curl_init($url);

curl_setopt($ch, CURLOPT_POSTFIELDS, $data_string);

curl_setopt($ch, CURLOPT_HTTPHEADER, array('Content-Type:application/json'));

curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);

$result = curl_exec($ch);

curl_close($ch);

echo "$result"; 
```

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2020-10-07T08:15:37.127

第一的，

1.  始终使用 CURLOPT_CAPATH 选项定义证书，

2.  决定如何传输您发布的数据。

# 1 证书

默认：

*   `CURLOPT_SSL_VERIFYHOST == 2`其中“*检查公用名的存在并验证它是否与提供的主机名匹配*”和

*   `CURLOPT_VERIFYPEER == true`其中“*验证对等方的证书*”。

所以，你所要做的就是：

```
const CAINFO = SERVER_ROOT . '/registry/cacert.pem';
...
\curl_setopt($ch, CURLOPT_CAINFO, self::CAINFO); 
```

取自工作类，其中`SERVER_ROOT`是在应用程序引导期间定义的常量，例如在自定义类加载器、另一个类等中。

**忘记像** `\curl_setopt($handler, CURLOPT_SSL_VERIFYHOST, 0);`or之类的东西`\curl_setopt($handler, CURLOPT_SSL_VERIFYPEER, 0);`。

在[这个](https://stackoverflow.com/questions/14987857/what-exactly-is-cacert-pem-for)问题中找到`cacert.pem` [那里。](https://curl.haxx.se/docs/caextract.html)

# 2 种开机自检模式

发布数据时实际上有两种模式：

*   数据传输时`Content-Type`标头设置为`multipart/form-data`或，

*   数据是带有`application/x-www-form-urlencoded`编码的 urlencoded 字符串。

在第一种情况下，您传递一个**数组**，而在第二种情况下，您传递一个**urlencoded 字符串**。

## `multipart/form-data`前任。：

```
$fields = array('a' => 'sth', 'b' => 'else');
$ch = \curl_init();
\curl_setopt($ch, CURLOPT_POST, 1);
\curl_setopt($ch, CURLOPT_POSTFIELDS, $fields); 
```

## `application/x-www-form-urlencoded`前任。：

```
$fields = array('a' => 'sth', 'b' => 'else');
$ch = \curl_init();
\curl_setopt($ch, CURLOPT_POST, 1);
\curl_setopt($ch, CURLOPT_POSTFIELDS, \http_build_query($fields)); 
```

## `http_build_query`：

在你的命令行测试它

```
user@group:$ php -a
php > $fields = array('a' => 'sth', 'b' => 'else');
php > echo \http_build_query($fields);
a=sth&b=else 
```

POST 请求的另一端将定义适当的连接模式。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-06-18T09:05:03.907

试试这个例子。

```
<?php 
 $url = 'http://localhost/test/page2.php';
    $data = array("first_name" => "First name","last_name" => "last name","email"=>"email@gmail.com","addresses" => array ("address1" => "some address" ,"city" => "city","country" => "CA", "first_name" =>  "Mother","last_name" =>  "Lastnameson","phone" => "555-1212", "province" => "ON", "zip" => "123 ABC" ) );
    $ch=curl_init($url);
    $data_string = urlencode(json_encode($data));
    curl_setopt($ch, CURLOPT_CUSTOMREQUEST, "POST");
    curl_setopt($ch, CURLOPT_POSTFIELDS, array("customer"=>$data_string));

    $result = curl_exec($ch);
    curl_close($ch);

    echo $result;
?> 
```

您的 page2.php 代码

```
<?php
$datastring = $_POST['customer'];
$data = json_decode( urldecode( $datastring));

?> 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2012-06-18T08:38:37.670

试试这样：

```
$url = 'url_to_post';
// this is only part of the data you need to sen
$customer_data = array("first_name" => "First name","last_name" => "last name","email"=>"email@gmail.com","addresses" => array ("address1" => "some address" ,"city" => "city","country" => "CA", "first_name" =>  "Mother","last_name" =>  "Lastnameson","phone" => "555-1212", "province" => "ON", "zip" => "123 ABC" ) );
// As per your API, the customer data should be structured this way
$data = array("customer" => $customer_data);
// And then encoded as a json string
$data_string = json_encode($data);
$ch=curl_init($url);

curl_setopt_array($ch, array(
    CURLOPT_POST => true,
    CURLOPT_POSTFIELDS => $data_string,
    CURLOPT_HEADER => true,
    CURLOPT_HTTPHEADER => array('Content-Type:application/json', 'Content-Length: ' . strlen($data_string)))
));

$result = curl_exec($ch);
curl_close($ch); 
```

您忘记的关键是对您的数据进行 json_encode。但是您也可能会发现使用 curl_setopt_array 通过传递数组来一次设置所有 curl 选项很方便。

# jenkins - 根据参数安排作业？

> ID：11079142
> 
> 赞同：1
> 
> 时间：2012-06-18T08:18:35.633
> 
> 标签：jenkins

我想为名为 project-${X} 的作业开始构建，其中 ${X} 由当前构建的参数给出。这行得通吗，也许有插件？

谢谢，卡斯滕

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T09:53:20.427

[参数化触发器插件](https://wiki.jenkins-ci.org/display/JENKINS/Parameterized+Trigger+Plugin)具有该功能。您需要使用最新版本（2.15） - 早期版本中似乎存在错误。

您的其他选择似乎是[Python JenkinsAPI 包装器或通过](http://pypi.python.org/pypi/jenkinsapi)[Groovy Plugin](https://wiki.jenkins-ci.org/display/JENKINS/Groovy+plugin)运行的Groovy ，后者通过其[Java API](http://javadoc.jenkins-ci.org/)访问 Jenkins 。

# asp.net-mvc-3 - asp.net-MVC 根据角色编辑GridDate

> ID：11079144
> 
> 赞同：0
> 
> 时间：2012-06-18T08:18:38.217
> 
> 标签：asp.net-mvc-3, datagrid, role

我有一个数据网格来显示员工的具体信息，但我需要设置一个逻辑，如果 Role=Manager 则显示所有员工，如果 Role=Employee 仅显示 1 个属于他的数据。下面是我显示员工的代码。我设法向所有员工展示。需要帮助为员工设置过滤器。

看法

```
@model IEnumerable<SealManagementPortal_3._0.Models.VOC_CUSTODIAN>
@{
    ViewBag.Title = "List of Custodians";
}
<h2>Index</h2>
<p> 
   @if (User.IsInRole("Manager"))
{
    @Html.ActionLink("Create New", "Create")
}
</p>
<script type="text/javascript">
    jQuery(document).ready(function () {
        jQuery("#list2").jqGrid({
            url: '@Url.Action("GridData", "Custodian")',
            datatype: 'json',
            mtype: 'GET',
            colNames: ['Agent ID', 'Branch', 'Unique ID', 'Custodian Name', /*'NRIC No', 'E-Mail', 'Contact No', 'Mobile No',*/'Role', 'Details', 'Edit', 'Delete'],
            colModel: [
                { name: 'Agent ID', index: '', width: 10, align: 'left' },
                { name: 'Branch', index: '', width: 10, align: 'left' },
                { name: 'Unique ID', index: '', width: 10, align: 'left' },
                { name: 'Custodian Name', index: '', width: 10, align: 'left' },          
                {name: 'Role', index: '', width: 10, align: 'left' },
                { name: 'Details', index: '', width: 5, align: 'left' }
                , { name: 'Edit', index: '', width: 5, align: 'left' }
                ,{ name: 'Delete', index: '', width: 5, align: 'left' }
                ],    
            pager: jQuery('#pager2'),
            rowNum: 10,            
            sortname: 'Id',
            sortorder: "desc",
            viewrecords: true,
            autowidth: true,            
            caption: 'Custodians List'
        });

    }); 
</script>

@using (Html.BeginForm())
{
    <table id="list2" class="scroll" cellpadding="0" cellspacing="0"></table>
    <div id="pager2" class="scroll" style="text-align:center;"></div>
} 
```

控制器

```
 public ActionResult GridData (string sidx, string sord, int page, int rows)
            {             
                int pageIndex = Convert.ToInt32(page) - 1;
                int pageSize = rows;
                int totalRecords = db.VOC_CUSTODIAN.Count();
                int totalPages = (int)Math.Ceiling((float)totalRecords / (float)pageSize);   
                var jsonData = new
                               {
                                   total = totalPages,
                                   page = page,
                                   records = totalRecords,
                                   rows = (from custo in db.VOC_CUSTODIAN.AsEnumerable()
                                          select new
                                                 {
                                                     id = custo.Idx,
                                                     cell = new string []
                                                            {
                                                                custo.StaffId, 
                                                                custo.Branch,
                                                                custo.UniqueId,
                                                                custo.Name,
                                                                custo.Role,
                                                                ("<a href='"+ @Url.Action("Details", "Custodian") +"/"+ custo.Idx+ "'>DETAILS</a>"),
                                                                ("<a href='"+ @Url.Action("Edit", "Custodian") +"/"+ custo.Idx+ "'>EDIT</a>"),
                                                                ("<a href='"+ @Url.Action("Delete", "Custodian") +"/"+ custo.Idx+ "'>DELETE</a>")
}
                                                 }).ToArray()
                               };
                return Json(jsonData, JsonRequestBehavior.AllowGet);
            } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T08:32:24.097

你的视图不应该处理逻辑，你的控制器动作应该。[你应该可以用Roles.InUserInRole](http://msdn.microsoft.com/en-us/library/4z6b5d42.aspx)做这样的事情：

```
if (!Roles.IsUserInRole(User.Identity.Name, "Managers"))
{
  jsonData.total = 1;
  jsonData.page = 1;
  jsonData.records = 1;
  jsonData.rows = jsonData.rows.Where(x => x.id = currentUserId).ToArray() 
}

return Json(jsonData, JsonRequestBehavior.AllowGet); 
```

# apache - 为什么要使用 Node.js 安装服务器（Nginx、Apache...）？

> ID：11079145
> 
> 赞同：5
> 
> 时间：2012-06-18T08:18:37.927
> 
> 标签：apache, node.js, nginx

> **可能重复：**
> [为什么我们在 Node.js express web 框架下需要 apache？](https://stackoverflow.com/questions/9287747/why-do-we-need-apache-under-node-js-express-web-framework)

我想知道为什么我应该使用 Node.js 安装 Nginx 或 Apache 等服务器。我曾经认为服务器可以帮助我处理缓存控制或更多。但是我发现 Connect 静态中间件已经做到了，对吧？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-18T08:27:32.823

如果您不知道为什么在 Node.js 之上需要 Nginx 或 Apache，那么您就不需要它。

Nginx 做一些事情比 Node.js 更快（在某些情况下更容易配置）：代理、url 重写、http 缓存、重定向、静态文件服务和负载平衡。

如果您发现您的任何这些角色的 Node.js 代码变得越来越复杂，或者成为性能瓶颈，那么值得调查。在此之前，无需费心。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-18T08:27:52.960

使用稳定可靠的 Web 服务器软件作为前端可以带来几个优势。例如，您可以使用 Nginx 进行负载平衡。此外，通过不将应用程序服务器直接呈现给 Internet，可以降低安全风险。

# wpf - wpf绑定画笔颜色

> ID：11079146
> 
> 赞同：0
> 
> 时间：2012-06-18T08:18:42.593
> 
> 标签：wpf, binding, dependency-properties, brush

我有一个自定义文本块，它具有左、右和相同文本的各种文本属性作为依赖属性。我使用“运行”使它们具有不同的前景色。在控件内部的一个方法中是这样的：

Inlines.Add(new Run(_leftValue[i]) { Foreground = Brushes.Red });

我为画笔添加了一个依赖属性。如何在自定义控件的 cs 文件中设置它？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T08:35:27.560

你给了我们宝贵的东西，但无论如何我都会给你一个答案。设置依赖属性的格式是这样的：

```
[instance of the dependency object].SetValue(YourDependencyObject.TheDependencyProperty, value); 
```

所以对于一个DP拿刷子的例子，这应该是这样的：

```
this.SetValue(MyCustomControl.ForegroundBrush, Brushes.Red); 
```

请注意，这`MyCustomControl`是您的类型的文字名称，并且`this`应该可以转换为 DependencyObject（如果您的控件派生自 Window、Control、FrameworkElement 等，则它派生自 DependencyObject）。

# java - 单独的调用是否转到服务器以在 jsp 文件的 img 标记中呈现图像？

> ID：11079147
> 
> 赞同：0
> 
> 时间：2012-06-18T08:18:47.000
> 
> 标签：java, image

我知道如何在 jsp 文件上显示图像。但从未想过它是如何工作的？我的意思是当jsp页面被网络服务器评估为html内容并作为字节与其他html一起传输到浏览器时，图像是否会立即用html页面呈现，或者它不会以这种方式发生。我确实和我的同事讨论过，但他们也不确定。其中一位告诉我，当您从服务器请求任何 JSP 页面时，jsp 页面会被评估为相应的 html 内容，此时不会呈现图像。因此，当浏览器获取此 html 页面并看到如下标签时，浏览器会使为每个图像单独调用服务器。正确吗？如果是，如果 jsp 页面上有 50 个图像，50 个请求是否会转到服务器下载图像。他还提到不仅图像，而且 JavaScript 也仅以这种方式包含在 JSP 中？我不确定何时以及如何请求 jsp 页面中包含的图像？也无法通过谷歌搜索清除这个事实。吨

```
src="getImage.jsp" 
```

这个问题出现在我的脑海中，因为在下拉列表中更改某些值时，我想更改图像。我以为我可以在客户端做到这一点。但是如果按照最后提到的方法进行，看起来必须先从服务器下载图像。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-18T08:21:48.020

很难说出你在问什么。`img`如果您的意思是，当您的 JSP 容器将其编译为 servlet 时，您通过标记（例如）包含在 JSP 页面中的图像是否会`<img src="/path/to/image.jpg">`以某种方式“烘焙到”您的 JSP 页面中，答案是否定的。浏览器将请求 JSP 页面，取回 HTML 等。等，然后请求图像。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-18T08:35:49.463

如果您想根据下拉菜单更改图像，我建议您使用 javascript。

首先在 javascript 对象中加载所有图像（在加载页面时），然后在下拉菜单的 onchange 事件中更改图像。

谷歌搜索“预加载图像 javascript”应该提供充足的例子

从 jsp 文件返回图像也是可能的

在 jsp 中编写代码，将图像的字节流写入 jsp 编写器，确保正确设置 mime 类型。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-18T08:24:19.180

图像的下载与所有其他资源完全一样，并由您的浏览器呈现。

如果您询问*单个页面中同一图像的*50 个实例是否会被下载 50 次，答案取决于特定图像资源的 HTTP 缓存策略标头 - 如果它们允许缓存资源，它将被您的缓存浏览器，并且只会通过网络下载一次。

# ios - 更改 UIPopoverController 颜色（和后退按钮颜色）

> ID：11079148
> 
> 赞同：5
> 
> 时间：2012-06-18T08:18:47.657
> 
> 标签：ios, ipad, uikit, uipopovercontroller, popover

我尝试从 iOS 5 上的 UIPopoverControler 更改颜色。为此，我使用了 UIPopoverBackgroundView 的子类，我将其分配给我的弹出框，如下所示：

```
self.popover.popoverBackgroundViewClass = [KWPopoverBackgroundView class]; 
```

正如我在 KWPopoverBackgroundView 类中定义的那样，我的弹出框现在是黑色的，但我的外观仍然存在问题。我的弹出框内的导航控制器的后退按钮（奖牌）仍然是蓝色的。我希望一切都统一为黑色。我如何摆脱这种蓝色？

![在此处输入图像描述](../Images/fd6494589cf09172ba3256c36b723eec.png)

我试图改变我的 navigationController.navigationBar 的 tintColor 但当然弹出框并不关心这一点。有没有办法在 iOS 5.0 中解决这个问题？（我的应用程序在 AppStore 上，我不想要一个丑陋的黑客来解决这个问题）谢谢。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-18T18:26:02.740

Ok, I just found how to change the tint color from the UINavigationController back button (or other UIBarButtonItems) inside the UIPopoverController.

With UIPopoverBackgroundView you can only change background and arrow images. To change the other items appearance you have to use UIAppearance with something like the following.

```
// Set the UIBarButtonItem(s) inside UIPopoverController class to dark gray
[[UIBarButtonItem appearanceWhenContainedIn:[UIPopoverController class], nil] 
                        setTintColor:[UIColor colorWithWhite:0.1f alpha:1.0f]]; 
```

![black popover with black back button item](../Images/f8d5de8afe94dfb10c69c828866ab421.png)

# android - 在两个片段之间切换

> ID：11079150
> 
> 赞同：1
> 
> 时间：2012-06-18T08:18:58.163
> 
> 标签：android, android-fragments

我想做以下事情。第一个和第二个有两个片段。有必要在它们之间进行过渡。当我从第二个片段中的第一个片段开始时，首先存储在堆栈中。当我单击后退按钮时，第二个片段被删除并从堆栈中返回第一个片段。我再次无法进入第二个片段 - 它已被删除。我怎么解决这个问题？

在主要活动中（Fragment1 的回调）：

```
@Override
public void onNavigate() {
    FragmentTransaction ft = getFragmentManager().beginTransaction();
    Fragment1 newFragment1 = (Fragment1) getFragmentManager().findFragmentByTag("frag_1");
    Fragment2 newFragment2 = (Fragment2) getFragmentManager().findFragmentByTag("frag_2");
    ft.replace(R.id.main, newFragment2);
    ft.remove(newFragment1);
    ft.addToBackStack(null);
    ft.commit();
} 
```

我动态添加的片段：

```
 FragmentTransaction ft = getFragmentManager().beginTransaction();
    ft.add(R.id.main, new Fragment1(), "frag_1");
    ft.add(R.id.main, new Fragment2(), "frag_2");
    ft.commit(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-12T08:21:31.853

我解决了这个问题:)。我隐藏第一个片段并将事务添加到后堆栈。当我单击按钮返回时，我返回片段

```
@Override 
public void onNavigate() { 
    FragmentTransaction ft = getFragmentManager().beginTransaction(); 
    Fragment1 newFragment1 = (Fragment1) getFragmentManager().findFragmentByTag("frag_1"); 
    ft.hide(newFragment1); 
    ft.addToBackStack(null); 
    ft.commit(); 
} 
```

# c# - C#正则表达式来操作文本

> ID：11079152
> 
> 赞同：0
> 
> 时间：2012-06-18T08:19:12.313
> 
> 标签：c#, .net, regex

我有一个包含大量旧 phpBB 数据的数据库，其中包含带有以下文本的帖子：

```
[b:522f1e2c15]bold[/b:522f1e2c15]
[i:522f1e2c15]italic[/i:522f1e2c15]
[u:522f1e2c15]underline[/u:522f1e2c15]
[img:522f1e2c15]http://www.mysite.com/myimage.jpg[/img:522f1e2c15]
[quote:522f1e2c15="Mr Smith"]quoted text by Mr Smith[/quote:522f1e2c15]
[quote="Mr Smith"]quoted text by Mr Smith[/quote] 
```

我正在将这些数据迁移到一个新系统中，而这些标签在我来渲染它们时都需要进行操作，因此它们变为：

```
<b>bold</b>
<i>italic</i>
<u>underline</u>
<img src="http://www.mysite.com/myimage.jpg" />
<div><h4>Posted by Mr Smith</h4>quoted text by Mr Smith
<div><h4>Posted by Mr Smith</h4>quoted text by Mr Smith 
```

在大多数情况下，出现在原始 phpBB 标签中的“id”与“per post”相同，因此帖子可能如下所示（所有标签都包含 id '522f1e2c15'）：

```
This is [b:522f1e2c15]bold[/b:522f1e2c15] and this is [i:522f1e2c15]italic[/i:522f1e2c15]. 
```

但是，我还需要在同一个帖子中满足从一个标签到下一个标签的不同的 id，即

```
This is [b:123f1e2c15]bold[/b:123f1e2c15] and this is [i:522f1e2c15]italic[/i:522f1e2c15]. 
```

我还需要能够处理这些标签的嵌套实例，例如，带有一些斜体标签文本的粗体标签文本，即

```
This is [b:522f1e2c15]bold and [i:522f1e2c15]this is bold italic[/i:522f1e2c15][/b:522f1e2c15]. 
```

我最初在这里发布了一个[类似的问题](https://stackoverflow.com/questions/11048794/stuck-with-a-c-sharp-regular-expression)，专门用于处理上述的“引用”实例，它的回答似乎是一个可行的[解决方案](https://stackoverflow.com/a/11048981/197415)，但通过进一步测试，我注意到如果标签中包含的 id 是在同一篇文章的另一个标签中使用（即我上面发布的示例），然后它会中断。

所以基本上我需要一个处理上述所有问题的正则表达式解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T08:24:33.720

嵌套标签位是 Regex 中难以完成的部分，但 .NET 正则表达式引擎提供了处理它们和 ID 匹配所需的所有工具。您可以应用具有平衡组的正则表达式来解决任务。

也就是说，对于这种数据，我宁愿实现一个真正的解析器，例如使用 GOLD Parser System 或 ANTLR 等工具集。

# objective-c - objC 预处理器 NSString 宏

> ID：11079157
> 
> 赞同：1
> 
> 时间：2012-06-18T08:19:54.963
> 
> 标签：objective-c, nsstring, c-preprocessor

我在创建一个预处理器宏函数时遇到问题，它连接两个字符串并“返回”一个`NSString`(@"...") 值。

这是我尝试过的：

```
#define ObjectKeyMake(NAME) @"com.test.##NAME" 
```

如果我从通话中打印结果，我会得到：

```
NSLog(@"%@", ObjectKeyMake(foo)); // com.test.##NAME 
```

**所以我的问题是**：如何在预处理器宏中连接 2 个字符串并“返回”一个 NSString (@"..")？

不，我不能使用`#define ObjectKeyMake(NAME) [@"com.test." stringByAppendingString: NAME]`，因为我需要一个编译时常量。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-06-18T08:31:18.997

您可以利用编译器组合彼此相邻的字符串文字这一事实，如下所示：

```
NSString* greeting = @"Hello, " "world"; 
```

宏实现如下所示：

```
#define ObjectKeyMake(NAME) (@"com.test." #NAME) 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-18T08:32:40.517

```
#define ObjectKeyMake(NAME) @"com.test."#NAME 
```

# c - 为每个线程保留一个字符串列表

> ID：11079158
> 
> 赞同：1
> 
> 时间：2012-06-18T08:20:03.990
> 
> 标签：c, multithreading, daemon

我正在开发一个多线程套接字侦听器（守护进程）。

我使用 pthread 库成功实现了多线程。

当设备连接到守护程序时，它会发送一个标识号，我的问题是：

如何为每个线程存储该标识号，以便当我从该设备接收到一些数据以知道它的 ID 时。

在 delphi 中，有一个叫做 threadvar 的东西（为每个线程分配的变量）。如果这不可能，是否有一个库可以用来存储列表？我不打算重新发明轮子（例如制作我自己的链表）

我在 Linux Mint 上使用 GNUCC

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T08:25:42.503

如果我们有你的代码会更容易回答，但是：

*   如果你想要一个带有 pthread 的线程局部变量，只需在线程中运行的函数的堆栈上分配它（这个线程局部变量将是指向你的字符串列表的指针）。
*   您可以使用具有单链表和双链表的[Glib来存储您的字符串。](http://developer.gnome.org/glib/2.32/)确保在线程中运行的函数末尾释放列表
*   您可以将数据传递给将通过`void *`指针线程化的函数（但不清楚是否需要这样做）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-18T08:54:52.240

I think you are looking for thread specific data to store variables; then have a look in to pthread_setspecific() and pthread_getspecific().

# clojure - 如何将现有功能应用于新类？

> ID：11079162
> 
> 赞同：4
> 
> 时间：2012-06-18T08:20:19.347
> 
> 标签：clojure

在我的项目中，许多客户将修改服务器中的地图。我使用`ref`of `map`，像这样：

```
(def dict (ref {})) ; the map we play with 
```

我使用`dosync`STM 方式更新此地图。但我发现它没有我希望的那么快：

```
user=> (time (dotimes [n 1000000] (dosync ( alter xx assoc xx 1 1))))
"Elapsed time: 2470.766 msecs" 
```

所以我决定使用原生 Java CuncurrentHashMap 来代替 Clojure 内置的 map 和 STM。如何将 Java CuncurrentHashMap 包装到 Clojure 中，以便我可以像 Clojure 映射一样修改它，使用 assoc、包含？、dissoc 等等。这将使我修改最少的代码行。

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-18T08:24:55.570

您可以使用`atom`，因为您只修改了一个不需要事务的值，因此不需要`ref`

```
user=> (def dict (atom {}))
user=> (time (dotimes [n 1000000] (swap! dict assoc :xx 1)))
"Elapsed time: 108.105703 msecs" 
```

# ios - 找出重复的 UILocalNotification 何时触发

> ID：11079167
> 
> 赞同：3
> 
> 时间：2012-06-18T08:20:40.313
> 
> 标签：ios, uilocalnotification

我有一个`UILocalNotification`设置为以`2012-06-18 10:00`1 分钟的重复间隔开始。

在`2012-06-18 10:05`5 通知将被触发。然后，用户将选择通知编号 3。该通知应在 触发`2012-06-18 10:02`。

在我的`- application:didReceiveLocalNotification:`方法中。我怎样才能以编程方式从通知号 3 中获取此触发日期，这应该是`2012-06-18 10:02`. 我知道我可以从中获取初始/启动 fireDate 属性，`UILocalNotification`但我对此不感兴趣。我很想知道**这个**重复通知的触发日期（不是初始/开始触发日期）。

`UILocalNotification`如果有人可以向我解释如何在不解析通知的情况下找出哪个重复被解雇`- description`，我会给你一些我来之不易的赏金。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T18:06:49.307

获取 UILocalNotification 的**fireDate**的最佳替代解决方案是计算日期。
假设您有一个初始 fireDate，您可以使用重复的间隔来计算给定通知的 fireDate。

> 1.从初始触发日期开始
> 2.获取您拥有的通知的通知编号/索引
> 3.将重复间隔乘以索引并将其添加到您的初始触发日期

但是，由于时区和“其他讨厌的事情”，如下链接中提到的日期计算很棘手。
这是一个有用的链接：
[How to grab the NEXT fire date from a UILocalNotification object](https://stackoverflow.com/questions/4301184/how-to-grab-the-next-fire-date-from-a-uilocalnotification-object)

当然，还有解析`description`方法的最终后备解决方案。但是`[notification.fireDate description]`，正如您可能知道的那样，这样做绝不是一个好主意，因为将来格式可能会发生变化，从而破坏您的代码。

希望这有帮助！

**编辑：** 示例：好的，所以说我的第一个初始 fireDate 是`2012-06-18 10:00`
我知道我的重复间隔是每 ONE 分钟，对吗？
比如说，用户点击 uilocalnotification number 3，那么这意味着应该已经过了两分钟！
因此，该特定通知的时间是：`2012-06-18 10:02`
这有意义吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T04:22:39.540

因此，我对此进行了更多考虑，正如我在评论中所说，由于处理通知的方式，这似乎是不可能的。

您创建一个并立即启动或安排它。

通知只是一些信息的存储，这意味着它仅用于读取其属性。

应用程序通过接收通知

```
application:didReceiveLocalNotification: 
```

在其中仅传递[UILocalNotification](http://developer.apple.com/library/ios/#DOCUMENTATION/iPhone/Reference/UILocalNotification_Class/Reference/Reference.html)本身。这个通知只有一堆在开始时设置的属性。

重复间隔仅用于重新通知用户，它不会改变通知里面的内容。

由此得出的结论是，对于您希望实现的行为，如果您希望传递不同的信息或执行不同的操作，则必须触发不同的通知。

（子分类也没有用，如此处所述[https://stackoverflow.com/a/8583329/1068522](https://stackoverflow.com/a/8583329/1068522)）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-21T10:51:27.533

**问：**

> 如果有人可以向我解释如何在不解析通知的描述的情况下找出哪个重复的 UILocalNotification 被触发，我会给你一些我来之不易的赏金。

**答：最简单的方法：**

```
- (void) application:(UIApplication *)application didReceiveLocalNotification:(UILocalNotification *)notification
{
    NSDateComponents *comps = [[NSCalendar currentCalendar] components:notification.repeatInterval fromDate:notification.fireDate toDate:[NSDate date] options:0];
    NSLog(@"Notification #%d", [comps minute] + 1);
} 
```

* * *

**问：**如何在`description`不解析的情况下获得“下一个开火日期”？

**A:**这有私有/未记录的功能：`nextFireDateForLastFireDate`

```
- (void) application:(UIApplication *)application didReceiveLocalNotification:(UILocalNotification *)notification
{
    NSLog(@"next: %@", [notification nextFireDateForLastFireDate:[NSDate date]]);
} 
```

**问：**也许通知中有某种计数？属性还是方法？

**A：**有无证属性：

```
@property (assign, nonatomic) int totalRepeatCount;
@property (assign, nonatomic) int remainingRepeatCount; 
```

但它们似乎总是具有相同的价值：`UILocalNotificationInfiniteRepeatCount`. 它们都由**操作系统管理**，因此覆盖此属性或底层实例变量不会执行任何操作。此外，从触发到触发，UILocalNotifications**内部没有任何变化，无法区分一个 UILocalNotification 与另一个（内存中的地址除外）。****Next fireDate**根据当前时间计算。

# ruby-on-rails - 如何将不存在的列添加到 sql 查询

> ID：11079168
> 
> 赞同：0
> 
> 时间：2012-06-18T08:20:46.270
> 
> 标签：ruby-on-rails, ruby, cart

我有一个小问题。我正在寻找一种将列“添加”到 sql 查询的方法。

实际上我用这个顺序从一个表中排序了一些产品：

```
@prod = Table.find(:all,{:select=>["id, prod-id, cost"],:conditions=>["something = ? and somethingelse = ?","that thing","that other东西"],:order=>"id DESC"})

```

然后我将这个查询的结果放入一个表格 (html) 中，并使用一个表格将产品添加到购物车中。

现在问题来了。在我的购物车中，产品是这样的：

```
购物车：#<购物车：0x00000005ce0a68 @items=[[#<Table id：6024，prod-id：907509，成本：33>]]>

```

我需要在我的购物车中的数据中添加一个“列”。像这样得到我的购物车：

```
cart: #<Cart:0x00000005ce0a68 @items=[[#<Table id: 6024, prod-id: 907509, cost: 33, 数量: 1>]]>

```

这是我的购物车：

```
类购物车
      attr_reader ：项目

      定义初始化
        @项目 = []
        @total_price = 0
      结尾

      def add_product(产品)
        @项目 << 产品
        产品
      结尾

      def total_price
        @items.sum{ |项目| item.prod_pxuttc}
      结尾

      def total_items
        @items.length
      结尾
    结尾

```

我不需要在我的表中添加任何列。因为我必须将另一个源数据库中的数据导入到我的表中，并且我无法更改源数据库。*（是的，这是一个愚蠢的过程，但这就是我的客户想要的）*

我完全不知道如何为我需要做的过程命名。

* * *

**[编辑]**

我找到了解决问题的方法。通过创建第二个表，具有相同的列和列数量，默认为空行。然后我从第一个表中选择我的产品，从第二个表中选择默认行，并将产品中的值放入默认行的变量中。然后我把我的新变量放入我的购物车。

这有点棘手，但它有效。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T09:23:18.770

也许将 Cart 定义为以下将解决问题。

```
class Product
  attr_accessor quantity
end

class Cart
  ...
end 
```

# objective-c - 即使设备已锁定方向，如何进行方向检测

> ID：11079172
> 
> 赞同：0
> 
> 时间：2012-06-18T08:21:20.573
> 
> 标签：objective-c, ios

我想知道即使设备的当前方向被锁定（通过双击主页按钮并按下灰色方向锁定图标）如何感知方向变化

但是，我见过`UIImagePickerController`可以感知方向变化并改变其控制方向的视频拍摄应用程序 ( )。

我知道为了检测变化，我可以使用：

```
- shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)toInterfaceOrientation
- UIDeviceOrientationDidChangeNotification 
```

但是如果设备的方向被锁定，这些方法都不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T08:36:26.797

您可以使用`accelerometer`来获取当前方向检查此[检测 iPhone 屏幕方向](https://stackoverflow.com/questions/999686/detect-iphone-screen-orientation)

# c# - 为 TreeView 中的不同节点分配不同的图像

> ID：11079174
> 
> 赞同：1
> 
> 时间：2012-06-18T08:21:29.317
> 
> 标签：c#, xml, winforms, treeview, linq-to-xml

在我的树视图中，我可以加载带有图像的 xml 数据，但此代码将公共图像应用于所有节点。

我如何为`Parent node, sub_child node`..etc 应用特定图像？例如，我想为`countries, country, name, states, state`XML 结构分配不同的图像。

我在图像目录中加载了 5 个不同的图像。我需要一些示例来向我的树视图添加不同的图像。

```
private void populateTree()
{
    ImageList li = new ImageList();
    li.ImageSize = new Size(32, 32);
    li.ColorDepth = ColorDepth.Depth32Bit;
    treeView1.ImageList = li;

    System.IO.DirectoryInfo dir = new System.IO.DirectoryInfo(Application.StartupPath + @"\images");
    foreach (System.IO.FileInfo file in dir.GetFiles("*.*"))
    {
        li.Images.Add(file.Name, Image.FromFile(@"images\" + file.Name));
        treeView1.Nodes.Add(null, file.Name, file.Name.ToString(), file.Name.ToString());
    }

    //treeView1.ImageList = li;

    //treeView1.SelectedNode.ImageIndex = 0;
    //treeView1.SelectedNode.SelectedImageIndex = 1;

    var filename = @"C:\Countries.xml";
    //First, we'll load the Xml document
    XmlDocument xDoc = new XmlDocument();
    xDoc.Load(filename);

    //Now, clear out the treeview, and add the first (root) node
    treeView1.Nodes.Clear();
    treeView1.Nodes.Add(new TreeNode(xDoc.DocumentElement.Name));
    TreeNode tNode = new TreeNode();
    tNode = (TreeNode)treeView1.Nodes[0];
    //Here make a call to AddNode, where we'll add all of our nodes
    addTreeNode(xDoc.DocumentElement, tNode);

    //Expand the treeview to show all nodes
    treeView1.ExpandAll();

}

private void addTreeNode(XmlNode xmlNode, TreeNode treeNode)
{
    XmlNode xNode;
    TreeNode tNode;
    XmlNodeList xNodeList;

    if (xmlNode.HasChildNodes) //The current node has children
    {
        xNodeList = xmlNode.ChildNodes;

        for (int x = 0; x <= xNodeList.Count - 1; x++) //Loop through the child nodes
        {
            xNode = xmlNode.ChildNodes[x];
            treeNode.Nodes.Add(new TreeNode(xNode.Name));
            tNode = treeNode.Nodes[x];
            addTreeNode(xNode, tNode);
        }
    }
    else //No children, so add the outer xml (trimming off whitespace)
        treeNode.Text = xmlNode.OuterXml.Trim();
} 
```

XML 文件：

```
<?xml version="1.0" encoding="utf-8" ?> 
<countries>
    <country>
        <name>India</name>
        <states>
            <state>TamilNadu</state>
            <state>Andhra</state>
            <state>Kerala</state>
            <state>Karnataka</state>
        </states>
    </country>
</countries> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T08:24:22.597

我认为您正在搜索[TreeNode.ImageIndex](http://msdn.microsoft.com/en-us/library/system.windows.forms.treenode.imageindex.aspx)属性使用。

在's associated中分配存在的*索引*。`Image``TreeView``ImageList`

# ruby-on-rails - 跨多个实例的相同活动记录数据集

> ID：11079177
> 
> 赞同：0
> 
> 时间：2012-06-18T08:21:39.160
> 
> 标签：ruby-on-rails, ruby-on-rails-3, activerecord

我有一个带有计算字段的模型说 modela。像下面

```
class modelA < ActiveRecord::Base
      attr_accessor : calc_field

def calc_field
   @stuff =  modelb.all
   //do fancy things with stuff
end

end 
```

现在我的问题是如果我有 100 条 modelA 记录。modelb.all 被调用了 100 次。但每次都是相同的数据集。但查询被发送了 100 次。

无论如何/任何地方我都可以全局声明@stuff，以便它在modelA的所有实例之间共享。所以它只被调用一次。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T08:24:59.047

您可以使用类变量。

```
def calc_field
   @@stuff ||=  modelb.all
   //do fancy things with stuff
end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-18T08:26:21.377

有很多方法可以解决这个问题。

解决方案 A：

```
class modelA < ActiveRecord::Base
  attr_accessor : calc_field

  def calc_field(modelb_info)
     @stuff =  modelb_info
     //do fancy things with stuff
  end

end 
```

然后在您的代码工作流程中

```
model_info = ModelB.all
model_a_array.collect{|model_a| model_a model_info} 
```

解决方案 B

```
class modelA < ActiveRecord::Base
  @@stuff ||= ModelB.all
end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-18T08:30:24.193

如果您可以修改获取 ModelA 实例的方式，我建议这样做：

```
modelas = ModelA.includes(:modelbs) 
```

从那时起，当您调用时，数据库将不再被击中（例如）

```
modelas.first.calc_field 
```

我希望这会有所帮助

# java - 在实体、DTO 包上禁用声纳复制

> ID：11079186
> 
> 赞同：33
> 
> 时间：2012-06-18T08:22:33.303
> 
> 标签：java, static-analysis, sonarqube

有没有办法从 Sonar 中的选定包中禁用某些指标？我使用 Sonar 分析我的项目，并且在实体和 DTO 包中我有一些相同的代码 - 带有注释的相同字段 ID 等被 Sonar 报告为重复。这对我来说绝对没有意义，所以我想禁用它。我怎样才能做到这一点？使用全局排除选项会禁用所选包上的所有指标，但如何仅针对代码重复执行此操作？

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2017-03-08T07:55:33.857

使用较新的 SonarQube 安装，您可以使用`sonar.cpd.exclusions`仅从重复检查中排除某些文件。请参阅：[https ://docs.sonarqube.org/display/SONAR/Analysis+Parameters](https://docs.sonarqube.org/display/SONAR/Analysis+Parameters)

例子：

```
sonar.cpd.exclusions=**/AssemblyInfo.cs,**/*.g.cs,**/Mappings/*.cs 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-06-18T09:54:14.467

[您可以使用标准的“sonar.exclusions”](https://docs.sonarqube.org/display/SONAR/Narrowing+the+Focus)参数排除资源，或使用[关闭违规插件](http://docs.codehaus.org/display/SONAR/Switch+Off+Violations+Plugin)排除“重复代码”违规。

请注意，第二个选项（使用关闭插件）仅在您使用嵌入了“sqale-java:DuplicatedBlocksCheck”规则的[SQALE 插件时才有效。](http://www.sonarsource.com/products/plugins/governance/sqale/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-10-08T12:21:25.843

您可以将这些文件添加到*pom.xml*的属性中：

**这是从代码覆盖率中排除的：**

```
<sonarcube.coverage.exclusions>
  your file paths
</sonarcube.coverage.exclusions> 
```

**这是为了排除代码重复：**

```
<sonarcube.cpd.exclusions>
  your file paths
</sonarcube.cpd.exclusions> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-10-22T01:51:31.730

对我来说，它的工作原理：

```
<sonar.cpd.exclusions>
  com.simulate.java.dto\**
<\sonar.cpd.exclusions> 
```

我有这样的多模块java项目：

```
- parent
--  project-a
--  project-b
--  project-c 
```

在我放置的标签内的父项目的 pom.xml 中`<properties>`：

```
<properties>
        <project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>
        <maven.compiler.target>1.8</maven.compiler.target>
        <maven.compiler.source>1.8</maven.compiler.source>

        <sonar.cpd.exclusions>
                com.simulate.java.vo\**,
                com.simulate.java.dto\**
        <\sonar.cpd.exclusions>
<\properties> 
```

就这样。我希望我对你有所帮助。

# java - 2d 游戏中的移动动画

> ID：11079188
> 
> 赞同：0
> 
> 时间：2012-06-18T08:23:00.060
> 
> 标签：java, 2d

我正在制作一个像太空入侵者一样的简单 2d 射击游戏，我只想水平移动我的“敌人”，以相同的速度从一侧移动到另一侧。我怎样才能做到这一点？

我已经用 a 为我的“英雄”做了这件事，`KeyListener`但我不知道如何自动完成。

这里有一些代码可能会有所帮助。

```
public SimpleEnemy(String linkimg, int x, int y, int life) {
    super(linkimg, x, y);
    this.life=life;
    this.isMoving=false;
}

public void move() {
    x += dx;
    y += dy;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T08:34:57.990

你需要的是一个游戏循环。例如一个永不结束的while循环（endless-loop），如果需要，它会更新你的英雄位置。

```
while (true) {
    // insert statement if move is needed here
    move();
} 
```

这是一个非常基本的例子，但它应该让事情变得清晰。

由于我假设您使用的是 java，因此您可以查看一些游戏框架，例如[jgame](http://www.13thmonkey.org/~boris/jgame/)。这些框架采用类似的方法，使其使用起来更加舒适。

编辑：

请注意，这些天处理器的运行速度非常快，并且这种无限循环将在很短的时间内非常频繁地运行（例如每秒 1000 次以上）。所以你可能不得不限制这个循环的执行时间，否则你的英雄会更快地出现在屏幕之外。

您可以通过睡眠或类似的方式来实现这一点。我提到的这些框架也会有这个限制。

# ios - 从变量中获取 NSURL 中的字符串

> ID：11079189
> 
> 赞同：0
> 
> 时间：2012-06-18T08:23:00.743
> 
> 标签：ios, nsurlconnection

现在，我只是一些直接从 URL 中获取图片的代码。

`ViewController.h`

```
(...)
@property (retain, nonatomic) IBOutlet UIImageView *imageView;
(...) 
```

`ViewController.m:`

```
#import Header.h
(...)
    - (void)viewDidLoad
    {
    [super viewDidLoad];

    NSURL *imageURL = [NSURL URLWithString:@"http://www.visitingdc.com/images/eiffel-tower-picture.jpg"];

    NSData *myImageData = [NSData dataWithContentsOfURL:imageURL];

    imageView.image = [UIImage imageWithData:myImageData];

} 
```

我的目标是在 imageView 中查看图片，该链接存储在数据库中。JSON 会将数据库中的数据作为字符串发送：

```
[
    {
        "image":"http://www.visitingdc.com/images/eiffel-tower-picture.jpg"
    }
] 
```

它将存储在变量`*image`中`Header`。

`Header.h`

```
@interface Header : NSObject {

    NSString *image;

}

@property (nonatomic, copy) NSString *image;

- (id)initWithDictionary:(NSDictionary *)dictionary;

+ (NSArray *)findAllRemote;

@end 
```

我必须在`NSURL`-code 中写什么，`ViewController.m`以便它从变量而不是 URL 字符串中获取数据？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T08:29:24.597

您可以将 json 响应存储在 NSSTring 中，例如

```
self.image = ;//where you have parsed JSON data 
```

然后使用 -

```
NSURL *imageURL = [NSURL URLWithString:self.image]; 
```

# google-apps-script - 电子表格脚本时间限制

> ID：11079190
> 
> 赞同：0
> 
> 时间：2012-06-18T08:23:18.177
> 
> 标签：google-apps-script

我正在尝试将具有特定标签的所有邮件的邮件地址、邮件和发送时间导入电子表格，我在该标签上有超过 1300 条邮件。

到目前为止，我每次运行 100 条消息，因为这就是我看到的限制，但是现在，在导入 500 行之后，我的脚本停止工作并给了我一个

> “TypeError：无法调用未定义的方法“getMessages”。（Línea 19）Ignorar”

我应该怎么办？等两个小时？等一天？开始一个新的电子表格？

谢谢，狮子座

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T09:06:25.703

Gmail 阅读的配额是 10000/天（请参阅[仪表板上的配额](https://docs.google.com/macros/dashboard)）。您确定错误不是来自其他地方吗？也许您可以提供一些您使用的代码？

按照您的评论（感谢代码信息），我建议通过避免这些需要大量时间的大量 setValue() 来加快您的代码速度......改为尝试这个：（替换代码中的相关部分）

```
 var sheet = SpreadsheetApp.getActiveSheet(); 
    var toShow=new Array()
    for (var i = 502; i < 550; i++) { 
    var myThread = GmailApp.search("is:w-destino-mensajes")[i]; 
   if(myThread.length>0){
    var message = myThread.getMessages()[0]; 
    toShow.push([message.getDate(),message.getFrom(),message.getBody()]); 
}
    }
    sheet.getRange(startRow,2,toShow.length,toShow[0].length).setValues(toShow) 
```

编辑：我不认为您的问题与限制有关，看到错误消息我猜 myThread 在某些情况下返回一个空值并产生错误。您可以在尝试 getMessages 之前尝试添加存在条件（请参阅上面的代码）。

# ruby-on-rails-3.1 - 如何使用 emberjs 和 rails3 实现认证系统？

> ID：11079193
> 
> 赞同：4
> 
> 时间：2012-06-18T08:23:22.607
> 
> 标签：ruby-on-rails-3.1, ember.js

我正在使用 emberjs 和 active_model_serializer 构建一个应用程序。

我进行了很多搜索以了解如何使用 emberjs 和 rails 实现身份验证/授权，但不能。

有人做过吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-18T12:11:25.497

我目前正在研究此类主题：我正在使用 Devise，并尝试了两种解决方案：

1.  要么使用导航进行身份验证，将整个过程委托给 Devise 的标准控制器和视图，
2.  或者您可以包装 Devise 的控制器以将 JSON 返回到纯单页应用程序。

我都试过了，一切都很好。使用 #1 不方便的是身份验证导航时的“老式”闪烁。解决方案#2 有我的偏好。

下面是一个使用 JSON 封装的 Devise auth 示例：

```
class SessionsController < Devise::SessionsController

  def create
    resource = warden.authenticate!(auth_options)
    sign_in(resource_name, resource)
    render(json: resource, status: :ok) and return
  end

  ... 
```

仍然让我烦恼的一点是，我必须*完全*覆盖控制器方法，以避免双重渲染，因为 Devise 尚未设计为具有可定制的渲染。

# c# - 通过 Web 服务访问 Team Foundation Server 的信息

> ID：11079194
> 
> 赞同：3
> 
> 时间：2012-06-18T08:23:25.043
> 
> 标签：c#, tfs, tfsbuild

我想访问团队项目的构建信息，以便在我们公司的其他应用程序中使用它们。我需要的是为团队项目请求所有构建。我需要以下信息： - Outlut 复制到的 UNC 路径 - 名称 - 构建日期 - 谁开始或触发了构建（如果可能）

我没有找到任何描述如何通过 Web 服务访问 TFS 上的信息。我学到的是 TFS 有一个服务接口。

我希望任何人都可以给我一点提示如何达到我的目标。如果有人有一些示例代码，我肯定会很高兴:-)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T08:47:31.703

这样的事情会有所帮助吗：

```
using System;
using Microsoft.TeamFoundation.Build.Client;
using Microsoft.TeamFoundation.Client;

namespace BuildDetails
{
    class Program
    {
        static void Main()
        {
            TfsTeamProjectCollection teamProjectCollection = TfsTeamProjectCollectionFactory.GetTeamProjectCollection(new Uri("http://tfsURI"));
            var buildService = (IBuildServer)teamProjectCollection.GetService(typeof(IBuildServer));

            IBuildDefinition buildDefinition = buildService.GetBuildDefinition("TeamProjectName", "BuildDefinitionName");
            IBuildDetail[] buildDetails = buildService.QueryBuilds(buildDefinition);

            foreach (var buildDetail in buildDetails)
            {
                IBuildInformation buildInformation = buildDetail.Information;
                Console.Write(buildDetail.BuildNumber+"\t");
                Console.Write(buildDefinition.Name+"\t");
                Console.Write(buildDetail.Status+"\t");
                Console.Write(buildDetail.StartTime+"\t");
                Console.WriteLine((buildDetail.FinishTime - buildDetail.StartTime).Minutes);
            }
        }
    }
} 
```

这只是 TFS-SDK 的标准用法，我认为它提供了您正在寻找的信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-18T08:38:55.940

我建议使用[wrapper](http://tfsapiwrapper.codeplex.com/)来访问 TFS，因为它更容易并且可能足以满足您的需要。

如果没有，我建议使用[TFS SDK](http://msdn.microsoft.com/en-us/library/bb130146%28v=vs.100%29.aspx)。

如果您仍想降低，请阅读此[SO](https://stackoverflow.com/questions/5227376/is-there-any-documentation-on-tfs-web-services)。

# jakarta-ee - LocalTransaction.commit() 中的异常处理

> ID：11079200
> 
> 赞同：1
> 
> 时间：2012-06-18T08:24:00.873
> 
> 标签：jakarta-ee, glassfish, jca

我们尝试编写一个应该支持本地事务的 JCA 适配器。我们想使用最后一个代理优化来将我们的连接器与 XADataSource 放在同一个事务中。

根据规范，在提交期间`LocalTransactions.commit`应该 throw`LocalTransactionException`指示错误，并且应该导致回滚 XA 事务。但是，这不会发生。我们只是在 server.log 中看到一些堆栈跟踪，并且事务保持在准备状态（并挂在那里）。我们调试了调用，glassfish 确实执行了最后一个代理优化，但是`ConnectorXAResource.commit`（调用它）将其`LocalTransactionException`转换为不会导致回滚的异常。

有什么建议可以解决这个问题吗？

# android - 如何在启动 android 手机时打开我的 android 应用程序？

> ID：11079204
> 
> 赞同：2
> 
> 时间：2012-06-18T08:24:13.577
> 
> 标签：android, startup, android-sdk-2.3, android-sdk-tools

> **可能重复：**
> [如何在启动时启动应用程序？](https://stackoverflow.com/questions/6391902/how-to-start-an-application-on-startup)

我是 android 新手，我有我的 android 应用程序。我只想在我的安卓手机启动时打开我的应用程序。请告诉我怎么做？我正在使用带有 android sdk 2.3.3 的 Eclipse

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-18T08:33:40.103

在清单中给予许可......

```
<uses-permission android:name="android.permission.RECEIVE_BOOT_COMPLETED" /> 
```

在您的接收器中，将其提供给意图过滤器...

```
 <intent-filter>
        <action android:name="android.intent.action.BOOT_COMPLETED" />
    </intent-filter> 
```

在接收器类中尝试此代码.....

```
 @Override
    public void onReceive(Context context, Intent intent) {
        if ("android.intent.action.BOOT_COMPLETED".equals(intent.getAction())) {
            Intent serviceIntent = new Intent("*package name*.*Receivername*");
            context.startService(serviceIntent);
        }
    } 
```

[有关 android 的更多更新，请访问此网站。](http://www.varemads.com)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-18T08:33:37.100

如果你想务实地做

```
<receiver android:name=".MyServiceManager"
        android:enabled="true" >

            <intent-filter>
                <action android:name="android.intent.action.BOOT_COMPLETED" />
                 <category android:name="android.intent.category.DEFAULT" />
            </intent-filter>
</receiver> 
```

然后只需将此代码添加到清单文件的应用程序标记中，并将使用权限添加到清单文件中。

然后

```
public class MyServiceManager extends BroadcastReceiver
{

    @Override
    public void onReceive(Context context, Intent intent) {

        String action = intent.getAction();

        if(action.equalsIgnoreCase("android.intent.action.BOOT_COMPLETED"))
        {
            Intent myIntent=new Intent(context,package.YourActivity.class);
            myIntent.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
            context.startActivity(myIntent);
        }
} 
```

将此类添加到您的项目中。请检查包名和类名并进行相应更改。如果您仍然有问题，请写信给我。

# java - Java中的线程安全循环缓冲区

> ID：11079210
> 
> 赞同：27
> 
> 时间：2012-06-18T08:24:43.243
> 
> 标签：java, thread-safety, circular-buffer

考虑一些并行运行的 Web 服务器实例。每个服务器都持有对单个共享“状态保持器”的引用，其作用是保持`N`来自所有服务器的最后请求。

例如 ( `N=3`)：

```
Server a: "Request id = ABCD"        Status keeper=["ABCD"]
Server b: "Request id = XYZZ"        Status keeper=["ABCD", "XYZZ"] 
Server c: "Request id = 1234"        Status keeper=["ABCD", "XYZZ", "1234"]
Server b: "Request id = FOO"         Status keeper=["XYZZ", "1234", "FOO"]
Server a: "Request id = BAR"         Status keeper=["1234", "FOO", "BAR"] 
```

在任何时间点，“状态保持器”可能会从读取这些最后`N`的 SLA 报告请求的监视应用程序中调用。

在 Java 中实现这个生产者-消费者场景的最佳方式是什么，给 Web 服务器比 SLA 报告更高的优先级？

[CircularFifoBuffer](http://commons.apache.org/collections/apidocs/org/apache/commons/collections/buffer/CircularFifoBuffer.html)似乎是保存请求的合适数据结构，但我不确定实现高效并发的最佳方式是什么。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-06-21T12:48:04.253

```
Buffer fifo = BufferUtils.synchronizedBuffer(new CircularFifoBuffer()); 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-06-18T10:20:08.830

这是一个无锁环形缓冲区实现。它实现了一个固定大小的缓冲区——没有 FIFO 功能。我建议您`Collection`改为为每个服务器存储一个请求。这样，您的报告就可以进行过滤，而不是让您的数据结构进行过滤。

```
/**
 * Container
 * ---------
 * 
 * A lock-free container that offers a close-to O(1) add/remove performance.
 * 
 */
public class Container<T> implements Iterable<T> {

  // The capacity of the container.
  final int capacity;
  // The list.
  AtomicReference<Node<T>> head = new AtomicReference<Node<T>>();
  // TESTING {
  AtomicLong totalAdded = new AtomicLong(0);
  AtomicLong totalFreed = new AtomicLong(0);
  AtomicLong totalSkipped = new AtomicLong(0);

  private void resetStats() {
    totalAdded.set(0);
    totalFreed.set(0);
    totalSkipped.set(0);
  }
  // TESTING }

  // Constructor
  public Container(int capacity) {
    this.capacity = capacity;
    // Construct the list.
    Node<T> h = new Node<T>();
    Node<T> it = h;
    // One created, now add (capacity - 1) more
    for (int i = 0; i < capacity - 1; i++) {
      // Add it.
      it.next = new Node<T>();
      // Step on to it.
      it = it.next;
    }
    // Make it a ring.
    it.next = h;
    // Install it.
    head.set(h);
  }

  // Empty ... NOT thread safe.
  public void clear() {
    Node<T> it = head.get();
    for (int i = 0; i < capacity; i++) {
      // Trash the element
      it.element = null;
      // Mark it free.
      it.free.set(true);
      it = it.next;
    }
    // Clear stats.
    resetStats();
  }

  // Add a new one.
  public Node<T> add(T element) {
    // Get a free node and attach the element.
    totalAdded.incrementAndGet();
    return getFree().attach(element);
  }

  // Find the next free element and mark it not free.
  private Node<T> getFree() {
    Node<T> freeNode = head.get();
    int skipped = 0;
    // Stop when we hit the end of the list 
    // ... or we successfully transit a node from free to not-free.
    while (skipped < capacity && !freeNode.free.compareAndSet(true, false)) {
      skipped += 1;
      freeNode = freeNode.next;
    }
    // Keep count of skipped.
    totalSkipped.addAndGet(skipped);
    if (skipped < capacity) {
      // Put the head as next.
      // Doesn't matter if it fails. That would just mean someone else was doing the same.
      head.set(freeNode.next);
    } else {
      // We hit the end! No more free nodes.
      throw new IllegalStateException("Capacity exhausted.");
    }
    return freeNode;
  }

  // Mark it free.
  public void remove(Node<T> it, T element) {
    totalFreed.incrementAndGet();
    // Remove the element first.
    it.detach(element);
    // Mark it as free.
    if (!it.free.compareAndSet(false, true)) {
      throw new IllegalStateException("Freeing a freed node.");
    }
  }

  // The Node class. It is static so needs the <T> repeated.
  public static class Node<T> {

    // The element in the node.
    private T element;
    // Are we free?
    private AtomicBoolean free = new AtomicBoolean(true);
    // The next reference in whatever list I am in.
    private Node<T> next;

    // Construct a node of the list
    private Node() {
      // Start empty.
      element = null;
    }

    // Attach the element.
    public Node<T> attach(T element) {
      // Sanity check.
      if (this.element == null) {
        this.element = element;
      } else {
        throw new IllegalArgumentException("There is already an element attached.");
      }
      // Useful for chaining.
      return this;
    }

    // Detach the element.
    public Node<T> detach(T element) {
      // Sanity check.
      if (this.element == element) {
        this.element = null;
      } else {
        throw new IllegalArgumentException("Removal of wrong element.");
      }
      // Useful for chaining.
      return this;
    }

    public T get () {
      return element;
    }

    @Override
    public String toString() {
      return element != null ? element.toString() : "null";
    }
  }

  // Provides an iterator across all items in the container.
  public Iterator<T> iterator() {
    return new UsedNodesIterator<T>(this);
  }

  // Iterates across used nodes.
  private static class UsedNodesIterator<T> implements Iterator<T> {
    // Where next to look for the next used node.

    Node<T> it;
    int limit = 0;
    T next = null;

    public UsedNodesIterator(Container<T> c) {
      // Snapshot the head node at this time.
      it = c.head.get();
      limit = c.capacity;
    }

    public boolean hasNext() {
      // Made into a `while` loop to fix issue reported by @Nim in code review
      while (next == null && limit > 0) {
        // Scan to the next non-free node.
        while (limit > 0 && it.free.get() == true) {
          it = it.next;
          // Step down 1.
          limit -= 1;
        }
        if (limit != 0) {
          next = it.element;
        }
      }
      return next != null;
    }

    public T next() {
      T n = null;
      if ( hasNext () ) {
        // Give it to them.
        n = next;
        next = null;
        // Step forward.
        it = it.next;
        limit -= 1;
      } else {
        // Not there!!
        throw new NoSuchElementException ();
      }
      return n;
    }

    public void remove() {
      throw new UnsupportedOperationException("Not supported.");
    }
  }

  @Override
  public String toString() {
    StringBuilder s = new StringBuilder();
    Separator comma = new Separator(",");
    // Keep counts too.
    int usedCount = 0;
    int freeCount = 0;
    // I will iterate the list myself as I want to count free nodes too.
    Node<T> it = head.get();
    int count = 0;
    s.append("[");
    // Scan to the end.
    while (count < capacity) {
      // Is it in-use?
      if (it.free.get() == false) {
        // Grab its element.
        T e = it.element;
        // Is it null?
        if (e != null) {
          // Good element.
          s.append(comma.sep()).append(e.toString());
          // Count them.
          usedCount += 1;
        } else {
          // Probably became free while I was traversing.
          // Because the element is detached before the entry is marked free.
          freeCount += 1;
        }
      } else {
        // Free one.
        freeCount += 1;
      }
      // Next
      it = it.next;
      count += 1;
    }
    // Decorate with counts "]used+free".
    s.append("]").append(usedCount).append("+").append(freeCount);
    if (usedCount + freeCount != capacity) {
      // Perhaps something was added/freed while we were iterating.
      s.append("?");
    }
    return s.toString();
  }
} 
```

请注意，这接近于 O1 put and get。A`Separator`只是第一次发出“”，然后从那时起它的参数。

编辑：添加了测试方法。

```
// ***** Following only needed for testing. *****
private static boolean Debug = false;
private final static String logName = "Container.log";
private final static NamedFileOutput log = new NamedFileOutput("C:\\Junk\\");

private static synchronized void log(boolean toStdoutToo, String s) {
  if (Debug) {
    if (toStdoutToo) {
      System.out.println(s);
    }
    log(s);
  }
}

private static synchronized void log(String s) {
  if (Debug) {
    try {
      log.writeLn(logName, s);
    } catch (IOException ex) {
      ex.printStackTrace();
    }
  }
}
static volatile boolean testing = true;

// Tester object to exercise the container.
static class Tester<T> implements Runnable {
  // My name.

  T me;
  // The container I am testing.
  Container<T> c;

  public Tester(Container<T> container, T name) {
    c = container;
    me = name;
  }

  private void pause() {
    try {
      Thread.sleep(0);
    } catch (InterruptedException ex) {
      testing = false;
    }
  }

  public void run() {
    // Spin on add/remove until stopped.
    while (testing) {
      // Add it.
      Node<T> n = c.add(me);
      log("Added " + me + ": " + c.toString());
      pause();
      // Remove it.
      c.remove(n, me);
      log("Removed " + me + ": " + c.toString());
      pause();
    }
  }
}
static final String[] strings = {
  "One", "Two", "Three", "Four", "Five",
  "Six", "Seven", "Eight", "Nine", "Ten"
};
static final int TEST_THREADS = Math.min(10, strings.length);

public static void main(String[] args) throws InterruptedException {
  Debug = true;
  log.delete(logName);
  Container<String> c = new Container<String>(10);

  // Simple add/remove
  log(true, "Simple test");
  Node<String> it = c.add(strings[0]);
  log("Added " + c.toString());
  c.remove(it, strings[0]);
  log("Removed " + c.toString());

  // Capacity test.
  log(true, "Capacity test");
  ArrayList<Node<String>> nodes = new ArrayList<Node<String>>(strings.length);
  // Fill it.
  for (int i = 0; i < strings.length; i++) {
    nodes.add(i, c.add(strings[i]));
    log("Added " + strings[i] + " " + c.toString());
  }
  // Add one more.
  try {
    c.add("Wafer thin mint!");
  } catch (IllegalStateException ise) {
    log("Full!");
  }
  c.clear();
  log("Empty: " + c.toString());

  // Iterate test.
  log(true, "Iterator test");
  for (int i = 0; i < strings.length; i++) {
    nodes.add(i, c.add(strings[i]));
  }
  StringBuilder all = new StringBuilder ();
  Separator sep = new Separator(",");
  for (String s : c) {
    all.append(sep.sep()).append(s);
  }
  log("All: "+all);
  for (int i = 0; i < strings.length; i++) {
    c.remove(nodes.get(i), strings[i]);
  }
  sep.reset();
  all.setLength(0);
  for (String s : c) {
    all.append(sep.sep()).append(s);
  }
  log("None: " + all.toString());

  // Multiple add/remove
  log(true, "Multi test");
  for (int i = 0; i < strings.length; i++) {
    nodes.add(i, c.add(strings[i]));
    log("Added " + strings[i] + " " + c.toString());
  }
  log("Filled " + c.toString());
  for (int i = 0; i < strings.length - 1; i++) {
    c.remove(nodes.get(i), strings[i]);
    log("Removed " + strings[i] + " " + c.toString());
  }
  c.remove(nodes.get(strings.length - 1), strings[strings.length - 1]);
  log("Empty " + c.toString());

  // Multi-threaded add/remove
  log(true, "Threads test");
  c.clear();
  for (int i = 0; i < TEST_THREADS; i++) {
    Thread t = new Thread(new Tester<String>(c, strings[i]));
    t.setName("Tester " + strings[i]);
    log("Starting " + t.getName());
    t.start();
  }
  // Wait for 10 seconds.
  long stop = System.currentTimeMillis() + 10 * 1000;
  while (System.currentTimeMillis() < stop) {
    Thread.sleep(100);
  }
  // Stop the testers.
  testing = false;
  // Wait some more.
  Thread.sleep(1 * 100);
  // Get stats.
  double added = c.totalAdded.doubleValue();
  double skipped = c.totalSkipped.doubleValue();
  //double freed = c.freed.doubleValue();
  log(true, "Stats: added=" + c.totalAdded + ",freed=" + c.totalFreed + ",skipped=" + c.totalSkipped + ",O(" + ((added + skipped) / added) + ")");
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-28T11:39:09.507

也许你想看看[Disruptor-Concurrent Programming Framework](http://code.google.com/p/disruptor/)。

*   在此处查找描述替代方案、设计以及性能比较的论文`java.util.concurrent.ArrayBlockingQueue`：[pdf](http://disruptor.googlecode.com/files/Disruptor-1.0.pdf)
*   考虑阅读[BlogsAndArticles的前三篇文章](http://code.google.com/p/disruptor/wiki/BlogsAndArticles)

如果图书馆太多，坚持`java.util.concurrent.ArrayBlockingQueue`

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-06-18T08:54:43.620

我会看看 ArrayDeque，或者对于更并发的实现，看看[Disruptor](http://code.google.com/p/disruptor/)库，它是 Java 中最复杂/最复杂的环形缓冲区之一。

另一种方法是使用无界队列，因为生产者永远不需要等待消费者，所以它的并发性更高。[Java编年史](https://github.com/peter-lawrey/Java-Chronicle)

除非您的需求证明了复杂性，否则 ArrayDeque 可能就是您所需要的。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-21T17:22:51.963

也看看`java.util.concurrent`。

阻塞队列将一直阻塞，直到有东西要消耗或（可选）空间要产生：

[http://docs.oracle.com/javase/1.5.0/docs/api/java/util/concurrent/BlockingQueue.html](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/concurrent/BlockingQueue.html)

并发链接队列是非阻塞的，并使用一种允许生产者和消费者同时处于活动状态的灵活算法：

[http://docs.oracle.com/javase/1.5.0/docs/api/java/util/concurrent/ConcurrentLinkedQueue.html](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/concurrent/ConcurrentLinkedQueue.html)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-06-25T10:22:50.703

Hazelcast 的[Queue](http://hazelcast.com/docs/2.1/manual/multi_html/ch02.html#Queue)几乎提供了您所要求的一切，但不支持循环。但是根据您的描述，我不确定您是否真的需要它。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-06-27T17:22:43.697

如果是我，我会按照您的指示使用 CircularFIFOBuffer，并在写入（添加）时在缓冲区周围同步。当监控应用程序要读取缓冲区时，在缓冲区上进行同步，然后复制或克隆它以用于报告。

此建议基于将缓冲区复制/克隆到新对象的延迟最小的假设。如果有大量元素，并且复制时间很慢，那么这不是一个好主意。

伪代码示例：

```
public void writeRequest(String requestID) {
    synchronized(buffer) {
       buffer.add(requestID);
    }
}

public Collection<String> getRequests() {
     synchronized(buffer) {
        return buffer.clone();
     }
} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2020-05-28T19:37:23.370

由于您特别要求给予作者（即网络服务器）比阅读者（即监控）更高的优先级，我建议采用以下设计。

Web 服务器将请求信息添加到由专用线程读取的并发队列中，该线程将请求添加到覆盖最旧元素的线程本地（因此非同步）队列中，例如`EvictingQueue`or `CircularFifoQueue`。该同一线程检查一个标志，该标志指示在处理每个请求后是否已请求报告，如果是肯定的，则从线程本地队列中存在的所有元素生成报告。

# java - Liferay 6.0.6 的 Ext 插件未在 RHEL 5.2 x86_64 上执行

> ID：11079221
> 
> 赞同：1
> 
> 时间：2012-06-18T08:25:47.300
> 
> 标签：java, jboss, centos, liferay-6

这是一个奇怪的问题。Liferay 6.0.6 的 Ext 插件可以在除 centos 或 RHEL 之外的任何操作系统平台上执行。

现在我将尽力解释我的实验。

首先，我创建了`login-hook`一个添加验证码图像的位置`$LIFERAY_SDK_DIR/hooks/login-hook/docroot/custom-jsps/html/portlet/login/login.jsp`：

```
<portlet:actionURL windowState="<%= LiferayWindowState.EXCLUSIVE.toString() %>" var="captchaURL">
                <portlet:param name="struts_action" value="/login/captcha" />
</portlet:actionURL>

<liferay-ui:captcha url="<%= captchaURL %>" /> 
```

并对以下内容进行修改`/html/taglib/ui/captcha/simplecaptcha.jsp`：

```
<div class="taglib-captcha">
    <table border=0>
        <tr>
            <td>
                <aui:input label="text-verification" name="captchaText" size="10" type="text" value="" />
            </td>
            <td style="padding-left:10px;">
                <img id="captcha_image" alt="captcha" class="captcha" src="<%= url %>"  />
            </td>
            <td>
                <a href="#" id="captcha_change_btn" class="captcha"
                   onclick="return false;"><liferay-ui:message key="change_captcha" />
                </a>
            </td>
        </tr>
    </table>
    <aui:script>
        jQuery.noConflict();
        jQuery(function ($) {
              $('#captcha_change_btn').click(function () {
                 var url = "<%= url %>";
                 $('#captcha_image').attr('src', url + '&random=' + Math.random());
              });
        });
    </aui:script>
</div> 
```

部署`login-hook`到 liferay 后，登录窗口将如下所示： ![在此处输入图像描述](../Images/1189237e57d9fa646c2d7e1ea3caef58.png)

其次，我创建了一个`login-ext`将在登录时检查用户提供的验证码文本。所以我添加代码

```
 _log.warn("check the captcha ... ");
    CaptchaUtil.check(actionRequest);
    System.out.println("success check captcha"); 
```

在`protected void login( ThemeDisplay themeDisplay, ActionRequest actionRequest, ActionResponse actionResponse, PortletPreferences preferences) throws Exception`的`$LIFERAY_EXT_DIR/ext/login-ext/docroot/WEB-INF/ext-impl/src/com/liferay/portlet/login/action/LoginAction.java`

部署`login-ext`，然后尝试在不提供验证码文本的情况下登录将导致正确的错误。但是当我将整个 liferay 系统移动到 centos 5.8 时，将通过没有验证码文本的登录。

谁能给我一个建议？谢谢

# cross-browser - 将 mp3 文件嵌入到跨浏览器工作的 html 中

> ID：11079222
> 
> 赞同：4
> 
> 时间：2012-06-18T08:25:50.390
> 
> 标签：cross-browser, mp3

我正在使用以下代码将 mp3 文件嵌入到我的 html 文档中：

```
 <embed src="aharddaysnight.mp3" width="140" height="40" autostart="false" loop="FALSE"></embed> 
```

在 IE 中，这可以正常工作，因为带有控件的 mp3 播放器会自动显示。

但是，在 FireFox 中，会出现一个弹出窗口，提示您需要额外的插件。当我单击安装附加插件的选项时，由于安全证书错误，它不允许我安装。

在 Chrome 中，播放器会显示，但媒体会自动开始播放，即使代码显示 autostart “false”。

有没有人有更好的方法来嵌入 mp3，或者解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T21:40:32.133

我已经在 Chrome 和 Firefox 中对此进行了测试，并且可以在这两种情况下使用，但会退回。但是，如果它是一个长文件，比如我正在尝试的 2 小时音频，它将停止播放。希望它会帮助你，我会继续寻找我的解决方法。

```
<audio controls="controls">
 <source src="yourURL.mp3" />
 <source src="yourURL.ogg" />
 <!-- fallback -->
  <embed type="application/x-shockwave-flash"                                                         
    flashvars="audioUrl=yourURL.mp3"    
     src="http://www.google.com/reader/ui/3523697345-audio-player.swf"   
     width="650? height="0? quality="best"></embed>
</audio>` 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-05T12:15:49.667

Try this

```
type="audio/mpeg" 
```

OR

```
type="audio/midi" 
```

# c++ - 无法手动加载 Common Dialogs DLL

> ID：11079228
> 
> 赞同：1
> 
> 时间：2012-06-18T08:26:22.543
> 
> 标签：c++, winapi, visual-c++

大家好，我正在使用通用控件的纯 Win32 API 制作 VC++ 2008 项目。现在我面临的问题是，如果我使用 LoadLibrary API 函数显式链接到 WinSXS 文件夹中的 comctl32.dll（版本 6.0。），我的主窗口甚至不显示。但是，如果我在我的代码中使用#pragma 注释这样 - ：

```
#pragma comment(linker,"\"/manifestdependency:type='win32' \
name='Microsoft.Windows.Common-Controls' version='6.0.0.0' \
processorArchitecture='*' publicKeyToken='6595b64144ccf1df' language='*'\"") 
```

并将 comctl32.lib 添加到我的项目依赖项中，然后运行它，然后我得到预期的输出。但是，如果我使用 LoadLibrary API 函数手动链接到 WinSXS 中的 comctl32.dll，然后使用 GetProcAddress Api 函数获取 InitCommonControls 的过程地址，然后调用它，我的主窗口甚至不会显示。为什么会这样？根据定义，我应该能够手动加载我的 dll，找到我想要使用的所需过程并执行它，但由于某种原因，这里没有发生这种情况。这是我正在使用的代码-：

```
#include <Windows.h>
#include <CommCtrl.h>
#include "resource.h"

LRESULT CALLBACK WindowFunc(HWND, UINT, WPARAM, LPARAM);
BOOL CALLBACK DialogFunc(HWND, UINT, WPARAM, LPARAM);

char szWinName[]="Timer Main Window";
HWND hDlg=NULL;
HINSTANCE hInst;

int WINAPI WinMain(HINSTANCE hThisInst, HINSTANCE hPrevInst,
                   LPSTR lpszArgs, int nWinMode)
{
    HWND hwnd;
    MSG msg;
    WNDCLASSEX wndclass;
    HMODULE hmod=NULL;
    void (*InitCommonControls)(void)=NULL;

    wndclass.cbSize=sizeof(WNDCLASSEX);

    wndclass.hInstance=hThisInst;
    wndclass.lpszClassName=szWinName;
    wndclass.lpfnWndProc=WindowFunc;
    wndclass.style=0;

    wndclass.hIcon=LoadIcon(hThisInst,MAKEINTRESOURCE(IDI_ICON1));
    wndclass.hIconSm=LoadIcon(hThisInst,MAKEINTRESOURCE(IDI_ICON2));
    wndclass.hCursor=LoadCursor(NULL,IDC_ARROW);

    wndclass.lpszMenuName=NULL;
    wndclass.cbClsExtra=0;
    wndclass.cbWndExtra=0;

    wndclass.hbrBackground=(HBRUSH) GetStockObject(LTGRAY_BRUSH);

    if(!RegisterClassEx(&wndclass)) return 0;

    /*Initialize the common controls for WinXP look and feel*/
    hmod=LoadLibrary("C:\\WINDOWS\\WinSxS\\x86_Microsoft.Windows.Common-Controls_6595b64144ccf1df_6.0.2600.6028_x-ww_61e65202\\comctl32.dll");
    if (!hmod)
    { MessageBox(NULL,"dll not loaded","error",MB_ICONERROR);
    }
    InitCommonControls=(void (*)(void)) GetProcAddress(hmod,
                        "InitCommonControls");
    if(InitCommonControls==NULL){
        MessageBox(NULL,"no entry point","error",MB_ICONERROR);
    }

    (*InitCommonControls)();
    //FreeLibrary(hmod);
    //hmod=NULL;

    hInst=hThisInst;

    hwnd=CreateWindow(
        szWinName,
        "Auto Timer (Work in progress)",
        WS_OVERLAPPEDWINDOW,
        CW_USEDEFAULT,
        CW_USEDEFAULT,
        CW_USEDEFAULT,
        CW_USEDEFAULT,
        NULL,
        NULL,
        hThisInst,
        NULL
        );

    while(GetMessage(&msg, NULL, 0, 0)>0)
    { if (!hDlg||!IsDialogMessage(hDlg,&msg))
    {
        TranslateMessage(&msg);
        DispatchMessage(&msg);
    }
    }
    return msg.wParam;

}

LRESULT CALLBACK WindowFunc(HWND hwnd, UINT message, WPARAM wparam, 
                            LPARAM lparam)
{ 
    switch(message){
        case WM_DESTROY:
            PostQuitMessage(0);
            break;
        case WM_CREATE:
            hDlg=CreateDialog(hInst,MAKEINTRESOURCE(IDD_FORMVIEW),
                hwnd,(DLGPROC)DialogFunc);
            break;
        default:
            return DefWindowProc(hwnd,message,wparam,lparam);
    }
    return 0;
}
BOOL CALLBACK DialogFunc(HWND hwnd, UINT message, 
                         WPARAM wparam, LPARAM lparam)
{ 
  switch(message)
    {
    case WM_INITDIALOG:
        SendMessage(hwnd,WM_SETICON, ICON_SMALL , 
            (LPARAM)LoadIcon(hInst,MAKEINTRESOURCE(IDI_ICON2)));
            break;
    case WM_CTLCOLORSTATIC:
        return (INT_PTR)GetStockObject(WHITE_BRUSH);
    case WM_CLOSE:
        DestroyWindow(hwnd);
        hDlg=NULL;
        PostQuitMessage(0);
        return TRUE;
    }
    return FALSE;
} 
```

如果有人想要整个项目，请给我您的邮件 ID，我会将整个项目发送给他们。我想确切地知道为什么会发生这种情况，而不是我是否应该这样做。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T18:01:28.523

**工作案例**

您的清单引用`Microsoft.Windows.Common-Controls`程序集。此程序集是一个或多个 DLL 和 COM 对象的集合，它不是 .Net 程序集。当您的应用程序启动时，Windows 会创建一个[激活上下文](http://msdn.microsoft.com/en-us/library/windows/desktop/aa374153%28v=vs.85%29.aspx)。对程序集中描述的 DLL 或 COM 对象的任何引用都将重定向到请求的版本。激活上下文在调用 期间保持活动状态`comctl32.dll`，因此它对 DLL 或 COM 对象的任何调用也将被重定向。

**不工作的情况**

您加载特定版本的`comctl32.dll`from `\Windows\Sxs\`。这引用了其他 DLL 或 COM 对象，但在没有激活上下文的情况下，会加载错误的对象。而且您的应用程序不起作用。

**结论**

我不知道这是否是您的具体问题，但一般来说，存在的任何东西`\Windows\Sxs`都旨在在特定的激活上下文中运行，并且您不能期望它在该上下文之外工作。即使它确实起作用了，它也可能在未来破裂。不要这样做。

# html - iframe 在 Chrome 中加载时显示空白

> ID：11079238
> 
> 赞同：1
> 
> 时间：2012-06-18T08:27:45.893
> 
> 标签：html, google-chrome, iframe

我有一个简单的 php 页面，应该在框架中显示 html。当我在 Firefox 中打开它时，它运行良好。当我在 Crome 中打开它时，它显示为空白（带有垂直滚动条）并且只有当我滚动它（通过鼠标滚轮或通过单击滚动条上的向上/向下箭头）或当我向下滚动页面时，我才能看到框架然后备份 - 只有这样我才能正常看到文本。我什至尝试用普通框架替换它，但它根本不显示。

```
<iframe id="first" src="01001.htm#20" width="600" height="100"></iframe> 
```

谢谢。

编辑：

PHP：

```
<html>
<head profile="http://www.w3.org/2005/20/profile">
<link rel="icon"
      type="image/png"
      href="favicon.png">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<title>Vedrije jutro</title>
<link type='text/css' rel='stylesheet' href='style.css' />
</head>
<body>
<div style="margin:0 auto;width:900px">
    <div id="header">
        <div><span style="font: bold 30pt arial">Vedrije jutro</span><span style="margin-left:120px; font: 20px arial">Svakodnevno proučavanje Svetog Pisma korak po korak</span></div>
    </div>
    <div id="toolbar">
    </div>
    <div id="wrapper">
        <div id="main">
            <div id="jutarnji">
                <h3>Jutarnji stih:</h3>
                <div><b>Jovan 6:35 - "Sigurni u Isusovim rukama: Jedini izvor istine"</b></div>
                <iframe id="first" src="01001.htm#20" width="600" height="100"></iframe>
            </div>
            <div id="pouka">
                <h3>Biblijska pouka:</h3>
                <iframe id="pouka" src="pouke/2-2012.pdf#page=95" width="640" height="600" frameborder="0" style="padding:0"></iframe>
            </div>
            <div id="redom">
            </div>
            <div id="vecernje">
            </div>
        </div>
    </div>
    <div id="footer">
    </div>
</div>
</body>
</html> 
```

HTM：

```
<HTML>
<HEAD>
<META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=windows-1250">
<TITLE>1 Mojsijeva, glava 1</TITLE>
<link rel="stylesheet" type="text/css" href="biblija.css">
<script language="JavaScript" src="layer1.js"></script>
</HEAD>
<BODY OnLoad="namosw_init_float_layers('layer1', 6);">
<div id="layer1" style="width:320px; height:26px; position:absolute; left:10px; top:980px; z-index:1; ">

    <pre>1 Mojsijeva, glava 1   <OBJECT
  id=shortcut
  type="application/x-oleobject"
  classid="clsid:adb880a6-d8ff-11cf-9377-00aa003b7a11">
  <PARAM name="Command" value="ShortCut">
  <PARAM name="Button" value="Bitmap:note.bmp">
  <PARAM name="Item1" value="wordpad,wordpad.exe,beleske/sz/1Mojsijeva/01.pog">
  </OBJECT></pre>

</div>

<FONT SIZE=3>
<p><a name="1"></A><sup>1</sup> U početku stvori Bog nebo i zemlju.<BR>
<div align="right"><small><A HREF="18JOV038.HTM#4">Jov 38:4</A><EM>, </EM><A HREF="23ISA044.HTM#24">Isa. 44:24</A><EM>, </EM><A HREF="23ISA045.HTM#18">Isa. 45:18</A><EM>, </EM><A HREF="43JVN001.HTM#1">Jn. 1:1</A><EM>, </EM><A HREF="43JVN001.HTM#3">Jn. 1:3</A><EM>, </EM><A HREF="45RIM001.HTM#20">Rim. 1:20</A><EM>, </EM><A HREF="51KOL001.HTM#16">Kol. 1:16</A><EM>, </EM><A HREF="58JEV001.HTM#10">Jev. 1:10</A><EM>, </EM><A HREF="58JEV011.HTM#3">Jev. 11:3</A></small></div></P>
<p><a name="2"></A><sup>2</sup> A zemlja beše bez obličja i pusta, i beše tama nad bezdanom; i duh Božji dizaše se nad vodom.<BR>
<div align="right"><small><A HREF="23ISA040.HTM#12">Isa. 40:12</A><EM>, </EM><A HREF="24JER004.HTM#23">Jer. 4:23</A></small></div></P>
<p><a name="3"></A><sup>3</sup> I reče Bog: Neka bude svetlost. I bi svetlost.<BR>
<div align="right"><small><A HREF="19PSA033.HTM#9">Ps. 33:9</A></small></div></P>
<p><a name="4"></A><sup>4</sup> I vide Bog svetlost da je dobra; i rastavi Bog svetlost od tame.</P>
<p><a name="5"></A><sup>5</sup> I svetlost nazva Bog dan, a tamu nazva noć. I bi veče i bi jutro, dan prvi.<BR>
<div align="right"><small><A HREF="18JOV038.HTM#12">Jov 38:12</A><EM>, </EM><A HREF="19PSA074.HTM#16">Ps. 74:16</A></small></div></P>
<p><a name="6"></A><sup>6</sup> Potom reče Bog: Neka bude svod posred vode, da rastavlja vodu od vode.<BR>
<div align="right"><small><A HREF="18JOV037.HTM#18">Jov 37:18</A><EM>, </EM><A HREF="19PSA033.HTM#6">Ps. 33:6</A><EM>, </EM><A HREF="24JER010.HTM#12">Jer. 10:12</A></small></div></P>
<p><a name="7"></A><sup>7</sup> I stvori Bog svod, i rastavi vodu pod svodom od vode nad svodom; i bi tako.<BR>
<div align="right"><small><A HREF="19PSA148.HTM#4">Ps. 148:4</A></small></div></P>
<p><a name="8"></A><sup>8</sup> A svod nazva Bog nebo. I bi veče i bi jutro, dan drugi.</P>
<p><a name="9"></A><sup>9</sup> Potom reče Bog: Neka se sabere voda što je pod nebom na jedno mesto, i neka se pokaže suvo. I bi tako.<BR>
<div align="right"><small><A HREF="18JOV026.HTM#10">Jov 26:10</A><EM>, </EM><A HREF="18JOV038.HTM#8">Jov 38:8</A><EM>, </EM><A HREF="18JOV038.HTM#10">Jov 38:10</A><EM>, </EM><A HREF="19PSA095.HTM#5">Ps. 95:5</A></small></div></P>
<p><a name="10"></A><sup>10</sup> I suvo nazva Bog zemlja, a zborišta vodena nazva mora; i vide Bog da je dobro.</P>
<p><a name="11"></A><sup>11</sup> Opet reče Bog: Neka pusti zemlja iz sebe travu, bilje, što nosi seme, i drvo rodno, koje rađa rod po svojim vrstama, u kome će biti seme njegovo na zemlji. I bi tako.<BR>
<div align="right"><small><A HREF="40MAT007.HTM#17">Mt. 7:17</A><EM>, </EM><A HREF="42LUK006.HTM#4">Lk. 6:4</A><EM>, </EM><A HREF="58JEV006.HTM#7">Jev. 6:7</A></small></div></P>
<p><a name="12"></A><sup>12</sup> I pusti zemlja iz sebe travu, bilje, što nosi seme po svojim vrstama, i drvo, koje rađa rod, u kome je seme njegovo po njegovim vrstama. I vide Bog da je dobro.</P>
<p><a name="13"></A><sup>13</sup> I bi veče i bi jutro, dan treći.</P>
<p><a name="14"></A><sup>14</sup> Potom reče Bog: Neka budu videla na svodu nebeskom, da dele dan i noć, da budu znaci vremenima i danima i godinama;<BR>
<div align="right"><small><A HREF="055MO004.HTM#19">5 Moj. 4:19</A><EM>, </EM><A HREF="18JOV025.HTM#3">Jov 25:3</A><EM>, </EM><A HREF="18JOV025.HTM#5">Jov 25:5</A><EM>, </EM><A HREF="19PSA074.HTM#16">Ps. 74:16</A><EM>, </EM><A HREF="19PSA136.HTM#7">Ps. 136:7</A></small></div></P>
<p><a name="15"></A><sup>15</sup> I neka svetle na svodu nebeskom, da obasjavaju zemlju. I bi tako.</P>
<p><a name="16"></A><sup>16</sup> I stvori Bog dva videla velika: videlo veće da upravlja danom, i videlo manje da upravlja noću, i zvezde.</P>
<p><a name="17"></A><sup>17</sup> I postavi ih Bog na svodu nebeskom da obasjavaju zemlju.<BR>
<div align="right"><small><A HREF="19PSA008.HTM#1">Ps. 8:1</A></small></div></P>
<p><a name="18"></A><sup>18</sup> I da upravljaju danom i noću, i da dele svetlost od tame. I vide Bog da je dobro.</P>
<p><a name="19"></A><sup>19</sup> I bi veče i bi jutro, dan četvrti.</P>
<p><a name="20"></A><sup>20</sup> Potom reče Bog: Neka vrve po vodi žive duše, i ptice neka lete iznad zemlje pod svod nebeski.<BR>
<div align="right"><small><A HREF="19PSA104.HTM#24">Ps. 104:24</A></small></div></P>
<p><a name="21"></A><sup>21</sup> I stvori Bog kitove velike i sve žive duše što se miču, što provrveše po vodi po vrstama svojim, i sve ptice krilate po vrstama njihovim. I vide Bog da je dobro;</P>
<p><a name="22"></A><sup>22</sup> I blagoslovi ih Bog govoreći: Rađajte se i množite se, i napunite vodu po morima, i ptice neka se množe na zemlji.<BR>
<div align="right"><small><A HREF="011MO008.HTM#17">1 Moj. 8:17</A><EM>, </EM><A HREF="24JER029.HTM#6">Jer. 29:6</A></small></div></P>
<p><a name="23"></A><sup>23</sup> I bi veče i bi jutro, dan peti.</P>
<p><a name="24"></A><sup>24</sup> Potom reče Bog: Neka zemlja pusti iz sebe duše žive po vrstama njihovim, stoku i sitne životinje i zveri zemaljske po vrstama njihovim. I bi tako.<BR>
<div align="right"><small><A HREF="19PSA033.HTM#9">Ps. 33:9</A></small></div></P>
<p><a name="25"></A><sup>25</sup> I stvori Bog zveri zemaljske po vrstama njihovim, i stoku po vrstama njenim, i sve sitne životinje na zemlji po vrstama njihovim. I vide Bog da je dobro.</P>
<p><a name="26"></A><sup>26</sup> Potom reče Bog: Da načinimo čoveka po svom obličju, kao što smo mi, koji će biti gospodar od riba morskih i od ptica nebeskih i od stoke i od cele zemlje i od svih životinja što se miču po zemlji.<BR>
<div align="right"><small><A HREF="18JOV020.HTM#4">Jov 20:4</A><EM>, </EM><A HREF="19PSA008.HTM#6">Ps. 8:6</A><EM>, </EM><A HREF="19PSA100.HTM#3">Ps. 100:3</A><EM>, </EM><A HREF="49EFE004.HTM#24">Ef. 4:24</A><EM>, </EM><A HREF="59JAK003.HTM#9">Jak. 3:9</A></small></div></P>
<p><a name="27"></A><sup>27</sup> I stvori Bog čoveka po obličju svom, po obličju Božjem stvori ga; muško i žensko stvori ih.<BR>
<div align="right"><small><A HREF="21PRO007.HTM#29">Prop. 7:29</A><EM>, </EM><A HREF="39MAL002.HTM#15">Mal. 2:15</A><EM>, </EM><A HREF="40MAT019.HTM#4">Mt. 19:4</A><EM>, </EM><A HREF="41MAR010.HTM#6">Mk. 10:6</A><EM>, </EM><A HREF="461KO011.HTM#7">1 Kor. 11:7</A><EM>, </EM><A HREF="51KOL003.HTM#10">Kol. 3:10</A></small></div></P>
<p><a name="28"></A><sup>28</sup> I blagoslovi ih Bog, i reče im Bog: Rađajte se i množite se, i napunite zemlju, i vladajte njom, i budite gospodari od riba morskih i od ptica nebeskih i od svih zveri što se miče po zemlji.<BR>
<div align="right"><small><A HREF="011MO006.HTM#1">1 Moj. 6:1</A><EM>, </EM><A HREF="011MO009.HTM#1">1 Moj. 9:1</A><EM>, </EM><A HREF="011MO009.HTM#7">1 Moj. 9:7</A><EM>, </EM><A HREF="011MO035.HTM#11">1 Moj. 35:11</A><EM>, </EM><A HREF="033MO026.HTM#9">3 Moj. 26:9</A><EM>, </EM><A HREF="19PSA127.HTM#3">Ps. 127:3</A><EM>, </EM><A HREF="19PSA128.HTM#3">Ps. 128:3</A><EM>, </EM><A HREF="23ISA045.HTM#18">Isa. 45:18</A><EM>, </EM><A HREF="541TI004.HTM#3">1 Tim. 4:3</A></small></div></P>
<p><a name="29"></A><sup>29</sup> I još reče Bog: Evo, dao sam vam sve bilje što nosi seme po svoj zemlji, i sva drveta rodna koja nose seme; to će vam biti za hranu.<BR>
<div align="right"><small><A HREF="18JOV036.HTM#31">Jov 36:31</A><EM>, </EM><A HREF="19PSA136.HTM#25">Ps. 136:25</A><EM>, </EM><A HREF="19PSA146.HTM#7">Ps. 146:7</A><EM>, </EM><A HREF="44DEL014.HTM#17">Dela 14:17</A></small></div></P>
<p><a name="30"></A><sup>30</sup> A svim zverima zemaljskim i svim pticama nebeskim i svemu što se miče na zemlji i u čemu ima duša živa, dao sam svu travu da jedu. I bi tako.<BR>
<div align="right"><small><A HREF="18JOV039.HTM#3">Jov 39:3</A><EM>, </EM><A HREF="19PSA145.HTM#15">Ps. 145:15</A><EM>, </EM><A HREF="19PSA147.HTM#9">Ps. 147:9</A></small></div></P>
<p><a name="31"></A><sup>31</sup> Tada pogleda Bog sve što je stvorio, i gle, dobro beše veoma. I bi veče i bi jutro, dan šesti.<BR>
<div align="right"><small><A HREF="19PSA104.HTM#24">Ps. 104:24</A><EM>, </EM><A HREF="541TI004.HTM#4">1 Tim. 4:4</A></small></div></P>
<P>&nbsp;</P>
<CENTER><IMG SRC="linija.gif"></P>
<P><div align="center"></P>
<TABLE CELLSPACING=0 BORDER=0>
<TR><TD VALIGN="MIDDLE">
<TD VALIGN="TOP">
<P><A HREF="#top"><IMG SRC="vrh.gif" ALIGN=CENTER BORDER=0 ALT="Vrh stranice"></A></TD>
<TD VALIGN="MIDDLE">
<P><A HREF="011MO002.HTM"><IMG SRC="s_glava.gif" ALIGN=RIGHT BORDER=0 ALT="Sledeca glava"></A></TD>
</TR>
<TR><TD VALIGN="MIDDLE">&nbsp;</TD>
<TD VALIGN="MIDDLE">&nbsp;</TD>
<TD VALIGN="MIDDLE">
<P><A HREF="022MO001.HTM"><IMG SRC="s_knjiga.gif" ALIGN=RIGHT BORDER=0 ALT="Sledeca knjiga"></A></TD>
</TR>
</TABLE><p>&nbsp;</p>

<P></P></BODY>
</HTML> 
```

这有帮助吗？

# asp.net-mvc-3 - 在 linq 中更新查询以更新多个表中的数据

> ID：11079239
> 
> 赞同：0
> 
> 时间：2012-06-18T08:27:50.317
> 
> 标签：asp.net-mvc-3, visual-studio-2010, linq, kendo-ui

我创建了 kendo ui 网格。我能够从数据库加载数据。对于这个网格，数据来自不同的表，我在我的 linq 查询中使用连接来加载数据。现在，我想使用 linq 查询更新数据，并更新不同表中的数据。有什么建议么..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T11:41:35.197

DataContext 实例跟踪它加载的所有实例。当您调用 SubmitChanges 时，所有更改都会在一个事务中发送到数据库。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T11:45:17.577

您必须更新每个表中的单个记录，然后执行 db.SubmitChanges();

在您的查询中，输出是匿名类型，而不是连接到 dbContext 的表类型。

如果您从 SQL 角度考虑，LinqToSql 的工作方式非常相似。可以选择带有连接的记录集，但您不能直接在此更新。您需要将其分解并直接一一修改条目。

# c# - 将 datagridview 与数据表进行比较

> ID：11079246
> 
> 赞同：0
> 
> 时间：2012-06-18T08:28:57.110
> 
> 标签：c#, asp.net, datagridview, datatable

我需要将gridview与数据表进行比较，当它匹配时，我需要检查一个复选框来控制匹配的确切行。所以有人可以给我意见吗？

目前我正在使用**foreach()**和**datatable.select()**。代码在这里..

```
 foreach (GridViewRow grdrwCr /*dtrwCr1*/ in grdCr.Rows /*&dtCr1.Rows*/)
        {string TxnNo = grdrwCr.Cells["TxnNo"].ToString();
            string TxnDate = grdrwCr.Cells["TxnDate"].ToString();
            string TxnID = grdrwCr.Cells["TxnID"].ToString();
            string ChequeNo = grdrwCr.Cells["ChequeNo"].ToString();
            string CrAmount = grdrwCr.Cells["lblCrAmount"].ToString(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T08:36:56.067

在第一次绑定控件时，您必须为 gridview 中的每一行打印主键（具有 visible = false 的列）。

在用户第二次选择复选框或行时，您获取与事件对应的主键。

并使用主键 ,, 您在数据表中选择您的数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T08:52:52.480

只是一个想法。如果您可以将 GridView 与 dataTable 作为数据源绑定，那么您可以合并这两个数据表并检查行状态决定复选框逻辑。

用于合并 2 个数据表的 MSDN 链接 - [http://msdn.microsoft.com/en-us/library/fk68ew7b.aspx](http://msdn.microsoft.com/en-us/library/fk68ew7b.aspx)

已经在以下链接中讨论过 [-C#-合并两个重复行的数据表](https://stackoverflow.com/questions/6833454/c-sharp-merge-two-datatables-where-rows-are-duplicate)

```
var intersection = table1.AsEnumerable() 
                         .Intersect(table2.AsEnumerable(), DataRowComparer.Default); 
```

# wpf - 如何将 Viewport3D 导出 为 2d 图像文件？

> ID：11079250
> 
> 赞同：5
> 
> 时间：2012-06-18T08:29:34.747
> 
> 标签：wpf, 3d, screenshot

我在 WPF 中使用 3d 并希望将其保存为 2d 图像文件，一种屏幕截图。最好的方法是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-18T08:47:30.393

在他[12 天的 WPF 3D](http://www.ericsink.com/wpf3d/index.html)系列中，Eric Sink 有一篇关于[将 WPF 3D 场景渲染到位图](http://www.ericsink.com/wpf3d/3_Bitmap.html)的好帖子。同样令人感兴趣的可能是有关[打印](http://www.ericsink.com/wpf3d/B_Printing.html)支持的帖子。

对于任何 WPF 3D 用户，我强烈推荐（开源）[Helix 3D Toolkit](http://helixtoolkit.codeplex.com)，它有多个不同格式的导入器和导出器，是一个必不可少的 WPF 3D 配套库。

# java - 不同的 JVM 行为：从 Eclipse 启动 tomcat 与从 Catalina.bat 启动

> ID：11079251
> 
> 赞同：0
> 
> 时间：2012-06-18T08:29:39.230
> 
> 标签：java, tomcat, jvm

我正在维护一个使用 java.protocol.handler 的 Web 应用程序。我使用以下值初始化它：`-Djava.protocol.handler.pkgs=<my value>`。问题如下： 1\. 如果我部署应用程序。直接从eclipse到tomcat，使用这个[指令](http://www.avajava.com/tutorials/lessons/how-do-i-run-a-maven-web-application-in-tomcat-from-eclipse.html?page=2 "说明（链接）")（直接引用Tomcat主类）并 `-Djava.protocol.handler.pkgs=<my value>`在VM参数选项卡中传递参数，应用程序正常工作并初始化-protocol依赖bean。

2.如果我将 .war 文件直接部署到 Tomcat/webapps 并使用`catalina.bat`（添加 `-Djava.protocol.handler.pkgs=<my value>`到`JAVA_OPTS`）启动 Tomcat，我得到：`Malformed URL supplied Exception`. 3.如果我从 Eclipse 启动 Tomcat（并指定类似于第 1 点的 VM 参数。）相同的 .war 将被正确部署。

我的猜测是 catalina.bat 和 eclipse 初始化 VM 参数的方式之间存在差异。或者也许我应该以某种方式将我的项目 .jars 附加到 Tomcat。

谢谢你的任何提示。我可以提供更多所需的详细信息

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T10:05:57.787

根据评论，如果没有更多信息，很难知道发生了什么，但这也许会有所帮助。Tomcat 调用`URL.setURLStreamHandlerFactory`来设置它自己的`URLStreamHandlerFactory`，它会覆盖`java.protocol.handler.pkgs`系统属性的默认行为。然后，您不能`URL.setURLStreamHandlerFactory`在不破坏内部 Tomcat 功能的情况下使用自己的处理程序进行调用。URLStreamHandlers 系统当然不是Java 最大的特点。

我发现可靠地使用我自己的流处理程序的唯一方法是将其传递给[URL 构造函数](http://docs.oracle.com/javase/7/docs/api/java/net/URL.html#URL%28java.net.URL,%20java.lang.String,%20java.net.URLStreamHandler%29)：

```
URL url = new URL( null, "http://example.com", myURLStreamHandler ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T08:34:58.647

我们注意到 -Djava.protocol.handler.pkgs="my.protocol" 在 Tomcat 6.0.x 中有效，如果协议实现在 Tomcat lib 文件夹中而不是在战争中......

也许这对其他人有帮助

# php - 验证序列中的表单字段

> ID：11079252
> 
> 赞同：0
> 
> 时间：2012-06-18T08:29:44.507
> 
> 标签：php, javascript, jquery, forms

我有一个以这种方式构建的多步骤订单：

第 1 步：通过单选按钮选择类别

“下一步”按钮只是一个具有 onclick 功能的图像，使用单选按钮隐藏当前 div，并显示一个带有下一步的新 div。

第 2 步：文本区域，复选框 -> 动态价格

包含一个文本区域、一个动态价格和四个复选框。价格根据文本区域中的字符数和复选框中的选择而变化。为了做到这一点，使用了 JQuery 脚本。同样，“下一步”按钮只是一个图像，激活 onclick 功能后会隐藏当前 div，并在表单中显示包含下一步的 div。

第 3 步：个人数据

这是我的问题。用户在此处插入姓名、电子邮件等。“下一步”按钮再次只是一个图像，在激活 onclick 功能后隐藏当前 div 并显示包含下一步的 div。我如何使此步骤中的表单字段成为必需的，以允许用户前进到下一步。我用于隐藏和显示 div 的代码如下：

```
<script type="text/javascript">
    function toggleDiv(id, flagit) {
        if (flagit == "1") {
            if (document.layers) document.layers[''+id+''].visibility = "show"
            else if (document.all) document.all[''+id+''].style.visibility = "visible"
            else if (document.getElementById) document.getElementById(''+id+'').style.visibility = "visible"
        }
        else`if (flagit == "0") {
            if (document.layers) document.layers[''+id+''].visibility = "hide"
            else if (document.all) document.all[''+id+''].style.visibility = "hidden"
            else if (document.getElementById) document.getElementById(''+id+'').style.visibility = "hidden"`
        }
    }
    //-->
</script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T08:35:45.597

那是一段可怕的（也是错误的）旧代码。

这是一个实际上仍然处理 Netscape4 的更新（图层部分）

您需要向我展示您切换的脚本的其余部分。您需要向该部分添加验证，而不是切换。

例如，使用

```
<form onsubmit="return validate(this)"> 
```

和

```
<input type="image" src="next.png" /> 
```

你可以这样做（纯 JavaScript，jQuery 中的显示和隐藏显示在页面的其他位置）：

```
var currentStep=1;
function toggleDiv(id,flagit) {
  if (document.getElementById) document.getElementById(id).style.visibility = (flagit)?"visible":"hidden";
  else if (document.all) document.all(id).style.visibility = (flagit)?"visible":"hidden";
  else if (document.layers) document.layers[id].visibility = (flagit)?"show":"hide";
}
function validate(theForm) {
  if (currentStep == 1)  {
    if (theForm.category.value....) {
      alert("Error in category");
      return false;
    }
    currentStep++;
    toggleDiv("part1",0);
    toggleDiv("part2",1);
    return false; // do not submit
  }
  if (currentStep == 2)  {
    if (theForm.price.value....) {
      alert("Error in price");
      return false
    }
    currentStep++;
    toggleDiv("part2",0);
    toggleDiv("part3",1);
    return false; // do not submit
  }
  if (currentStep == 3)  {
    if (theForm.name.value....) {
      alert("Error in name");
      return false
    }
    return true; // submit
  }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T08:41:42.863

好吧，既然您已经用 jQuery 标记了您的问题，为什么不实际使用它并让 jquery 处理所有特定于平台的问题。

```
function toggleDiv(id,flagit) {
    if( flagit ) {
       $("#"+id).show();
    } else {
       $("#"+id).hide();
    }
} 
```

让我知道这个是否奏效。

# perl - Perl 无法定位函数，但已安装数据包

> ID：11079256
> 
> 赞同：3
> 
> 时间：2012-06-18T08:29:52.880
> 
> 标签：perl, excel, spreadsheet

我正在使用 Spreadsheet::WriteExcel 数据包创建一些 Excel 文件。一切正常，但是当我尝试使用以下方法设置列宽时：

```
$excel->set_column("A:F",  20); 
```

excel是：

```
my $excel = Spreadsheet::WriteExcel->new('test.xls'); 
```

我收到错误：

> 无法通过 test.pl 第 49 行的包“Spreadsheet::WriteExcel”找到对象方法“set_column”。

我不明白，因为所有其他功能都可以正常工作。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-18T08:37:00.057

您需要在工作表对象而不是工作簿上调用该方法。

# android - 隐藏按钮后如何用ListView填充空白空间

> ID：11079257
> 
> 赞同：1
> 
> 时间：2012-06-18T08:29:54.117
> 
> 标签：android, android-layout, android-listview, android-button

我有一个简单的垂直`LinearLayout`，其中`button`顶部有一个，`Listview`下面有一个。
我想要的是，当`button`按下 时，它会隐藏（使用*View.GONE*）并且它生成的空白空间由`ListView`.
但经过所有的努力，我一直未能实施。

我尝试了`invalidate()`，`onDraw()`我也尝试`layout_weight=1`了`ListView`，我尝试了`forceLayout()`，`requestLayout()`方法，但它们都没有奏效。

奇怪的是，如果有`EditText`or`TextView`或任何其他组件而不是`ListView`，它的工作正常，即`Edittext`等。去抓住隐藏`Button`. 但在 的情况下`ListView`，它不会发生。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T08:49:55.587

检查这个......

```
 public class TestingActivity extends ListActivity {
/** Called when the activity is first created. */
Button checkBtn;
     String[] temp={"item 1","item 2","item 3"};
/** Called when the activity is first created. */

@SuppressWarnings("unchecked")
@Override

public void onCreate(Bundle savedInstanceState) {

    super.onCreate(savedInstanceState);

    setContentView(R.layout.main);

        getListView().setAdapter(new  ArrayAdapter(this, android.R.layout.simple_list_item_1, temp));
      checkBtn = (Button) findViewById(R.id.button1);

      checkBtn.setOnClickListener(new View.OnClickListener()
      {

       public void onClick(View v)
       {

         checkBtn.setVisibility(View.GONE);

       }});

     } } 
```

xml 是：

```
 <?xml version="1.0" encoding="utf-8"?>
 <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:orientation="vertical" >

<Button
    android:id="@+id/button1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="check connetion" />

<ListView
    android:id="@android:id/list"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:scrollingCache="false" >
</ListView>

  </LinearLayout> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-18T08:44:42.940

这东西在我的模拟器中完美运行

```
 btn1 = (Button) findViewById(R.id.button1);

    btn1.setOnClickListener( new OnClickListener() {

        public void onClick(View v) {
            // TODO Auto-generated method stub
            new ProgressTask().execute();
            btn1.setVisibility(8);
        }
    }) 
```

XML 代码

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >
    <Button
        android:id="@+id/button1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Button" />

    <ListView
        android:id="@+id/itemlist"
        android:layout_below="@+id/button1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" />
</RelativeLayout> 
```

# c# - WinForm 和 Class 交互

> ID：11079264
> 
> 赞同：1
> 
> 时间：2012-06-18T08:30:29.013
> 
> 标签：c#, .net, winforms, design-patterns

我有两个类和一个用户窗体。我试图不在我的课程中使用任何与表单相关的代码，但我对 OOP 还是很陌生。在 CreateGraph() 方法中，我想用是/否对话框提示用户。该方法中的代码将根据结果继续执行。我已经阅读了一些关于 MVP 的示例，但不确定在这种情况下如何实现。

有人可以指导我吗？我确实相信我的代码中存在一些严重的设计问题

```
//singleton class
public class MyApplication
{
    private int state;
    private static MyApplication instance = null;

    public void Task1()
    {
        GraphGenerator gg = new GraphGenerator();
        gg.CreateGraph();
        state = 1;
    }

    public void Task2()
    {
        //some other tasks..
        state = 2;

    }
} 
```

我有问题的班级..

```
public class GraphGenerator
{
    public void CreateGraph()
    {
        //some code for creating a graph..
        //here i want to prompt the user with a
        // Yes/No dialog box..
    }
} 
```

用户表单

```
public partial class Form1 : Form
{
    private void btnTask1_Click(object sender, EventArgs e)
    {
        MyApplication ma = MyApplication.Instance;
        ma.Task1();
    }

    private void btnTask1_Click(object sender, EventArgs e)
    {
        MyApplication ma = MyApplication.Instance;
        ma.Task2();
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T08:40:36.350

1.  命名 - MyApplication - 是控制器或演示者的错误名称，例如使用“表单名称”+“演示者”进行命名。
2.  辛格尔顿。控制器或演示者不应是单例的。通过构造函数注入它或在 ctor 中创建，然后使用类中的私有 setter 保存到字段或属性。例如：

    ```
    public Form1(FormPresenter presenter)
    {
       InitializeComponent();
       this.presenter = presenter;
    } 
    ```

3.  这个简单样本上的所有其他内容都是正常的。但是对于按钮事件处理程序，您可以在演示者/控制器中使用事件，并在特定于演示者/控制器事件的​​按钮事件处理程序中触发。

也尝试寻找 MVC/MVP 框架。在此处查找相关问题： [Implementing MVC with Windows Forms](https://stackoverflow.com/questions/654722/implementing-mvc-with-windows-forms)

我记得有 [Microsoft Smart Client Guidance (CAB / Microsoft Composite Application Block)](http://smartclient.codeplex.com/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-18T13:31:20.757

First , it is best to design your classes as much as possible such that you don't need to intermingle UI code with your domain objects. Can you restructure the code so that the *caller/owner* of `GraphGenerator` decides if it needs to ask the user something instead of `GraphGenerator` doing it? Try to keep `GraphGenerator` solely focused on his task or making graphs.

Failing that, you could define events (or delegates or callback interface, but lets call these related mechanisms events for now) within `GraphGenerator` such that the caller/owner can listen for notifications from `GraphGenerator` and in turn interact with the user. For example, define an event called `QueryConfirmSave` to raise and the caller can handle the event and prompt the user and then pass back a boolean as an EventArg field.

(The code would be something like this (from the hip, not editor checked):

```
GraphGenerator gg = new GraphGenerator();
gg.QueryConfirmSave += new EventHandler<ConfirmSaveArgs>(GraphGenerator_QueryConfirmSave); 
```

and then:

```
private void GraphGenerator_QueryConfirmSave(object sender, ConfirmSaveArgs args)
{
   if (MessageBox.Show("Save?") == DialogResult.Yes)
   {
      args.SaveConfirmed = true;
   }
} 
```

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2012-06-18T08:36:49.493

你需要[MessageBox.Show(...)](http://msdn.microsoft.com/en-us/library/system.windows.forms.messagebox.show%28v=vs.90%29.aspx)。

# xml - 如何在 Filemaker Pro Advanced 中创建动态元素 XML

> ID：11079265
> 
> 赞同：1
> 
> 时间：2012-06-18T08:30:29.707
> 
> 标签：xml, filemaker

我想根据 Filemaker Advanced 中的数据库记录创建具有动态元素和属性的 XML。作为 Filemaker 生成固定格式的 XML。

应该有可能吗？如何？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T09:53:39.120

从技术上讲，您需要一个 XSLT 文件来将 FileMaker XML 语法转换为您的 XML。获得此文件后，您可以告诉 FileMaker 在导出期间使用它。当然，这是一个相当通用的答案，但问题也是如此:)

# qt - QGraphicsItemAnimation 中的缩放

> ID：11079266
> 
> 赞同：3
> 
> 时间：2012-06-18T08:30:34.700
> 
> 标签：qt, animation

我正在寻找实现“ScaleAnimation”的正确方法。我的目的是为 QImage 设置动画：

```
 timeline = new QTimeLine(time);
    timeline->setFrameRange(0, 100);
    animation = new QGraphicsItemAnimation;

    QRectF rect = item->boundingRect();
    int h = rect.bottom() - rect.top();
    int w = rect.right() - rect.left();

    animation->setItem(item);
    animation->setTimeLine(timeline);

    for (int i = 0; i < 100; i++) {
            int x = w + (int)((float)w*(float)(i/100.0));
            qreal xx = (qreal)(x)/(qreal)w;
            int y = (h) + (int)((float)h*(float)(i/100.0));
            qreal yy = (qreal)(y)/(qreal)h;          
            animation->setScaleAt(i/100, xx, yy);
    } 
```

它似乎有效，但动画的起源似乎是`(0, 0)`。有什么方法可以应用动画`(w/2, h/2)`吗？是否有更好、更有效（或正确）的方式来重写动画？我退出了 Qt 世界的新手。

感谢您的耐心等待。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T11:14:17.590

如果您使用的是 QGraphicsPixmapItem，只需将其偏移设置为中点，并将其移动相同的量以抵消设置偏移的影响。

```
const QSizeF size = item->boundingRect().size()*0.5;
item->setOffset(size.width(), size.height());
item->moveBy(size.width(), size.height()); 
```

# eclipse - Eclipse：“删除”按钮想要删除我的源文件而不是代码..为什么？

> ID：11079269
> 
> 赞同：-1
> 
> 时间：2012-06-18T08:30:42.290
> 
> 标签：eclipse

我在 Eclipse 中编程，“删除”按钮想要删除我的源文件而不是代码。

如果我想使用 Ctrl+A 选择我的所有代码，它会选择包资源管理器中的所有文件...

我想在我的代码中使用的所有快捷方式都在 PackageExplorer 上生效。诸如 ctrl +c 、 ctrl +v 、删除按钮或 ctrl +a 之类的所有内容

请不要提供诸如“单击您的代码”之类的解决方案，因为至少我在询问之前尝试过。

你知道为什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T08:35:44.783

单击并专注于您的代码窗口。您目前的重点是 PackageExplorer。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-14T08:59:21.087

我也面临同样的问题。似乎我的一些源文件处于存档和只读模式。

执行命令`attrib -r -a /s /d`解决了我的问题。

# php - 缺少 PHP 脚本 我已经为 Yii 下载了一个模块库，其中每个 PHP 文件都以此开头： '。此外，如果禁用，您必须使用长格式的 PHP 开放标记 ()。 于 2012-06-18T08:32:16.377 回答 This answer is useful 4 您需要激活 short_open_tag 在 php.ini 从“关”到“开”。不要忘记重新加载/重新启动 apache 于 2012-06-18T08:32:50.103 回答 This answer is useful 2 您可以使用以下行添加 .htaccess 文件以使其工作： php_value short_tags on 于 2012-06-18T08:40:04.253 回答 Related 2 android - 在位图上画一个圆圈 2 heroku - 使用多个测功机玩 2 Heroku 启动 1 java - facesContext.getExternalContext().getRequest().getSession() 的返回对象是什么类？ 1 cakephp - 在 CakePHP 2.x 中未从主题加载图像 4 java - 在路径中使用波浪号执行 bash 脚本 4 css - Css 选择取决于不同选择器的条件 2 android - 不使用 android 2.3 启动 MainActivity 3 javascript - 遍历用户选项并将它们分配给 CoffeeScript 中的对象实例 2 ruby-on-rails - 自动刷新 无需重新加载整个页面 1 querydsl - QueryDSL：从 PathBuilder 生成谓词 Reference php × 1429865 c/c++ × 756500 nginx × 49975 mongodb × 159057 mybatis × 3233 anaconda × 13410 pycharm × 14671 python × 1902243 vscode × 56040 docker × 110988 github × 49000 flask × 49129 ffmpeg × 24037 jmeter × 16910 matplotlib × 63493 bootstrap × 54641

> ID：11079270
> 
> 赞同：1
> 
> 时间：
> 
> 标签：php, apache

我已经为 Yii 下载了一个模块库，其中每个 PHP 文件都以此开头：

```
<? 
```

...而不是：

```
<?php 
```

在我的本地 Apache 服务器上，这些文件被加载为平面文件，而不是作为可执行脚本，尽管这些文件都被修改为可写和可执行的。有没有办法强制这些文件作为 PHP 运行，或者我必须修改所有文件（可能有一百个）。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-18T08:32:16.377

您必须[`short_php_tag`](http://www.php.net/manual/en/ini.core.php#ini.short-open-tag)从 php.ini 启用或更好地更改`<?`为`<?php`在您的文件中。

> 告诉 PHP 是否应该允许 PHP 的 open 标记的短格式 ()。如果您想将 PHP 与 XML 结合使用，您可以禁用此选项以使用内联。否则，您可以使用 PHP 打印它，例如：'; ?>'。此外，如果禁用，您必须使用长格式的 PHP 开放标记 ()。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-18T08:32:50.103

您需要激活

```
short_open_tag 
```

在 php.ini 从“关”到“开”。不要忘记重新加载/重新启动 apache

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-18T08:40:04.253

您可以使用以下行添加 .htaccess 文件以使其工作： php_value short_tags on

# extjs - 重新配置 extjs 4.1 中未刷新商店

> ID：11079272
> 
> 赞同：0
> 
> 时间：2012-06-18T08:31:00.947
> 
> 标签：extjs, extjs4.1

我正在使用重新配置功能来更改面板表单的列和数据。

grid.reconfigure(globalStore, tmpColumns);

网格有分页栏

代码正在运行，并且数据已更改。但是 paging 和 total 确实显示了旧数据。

请帮忙

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T08:53:21.433

I solved it

```
 var pagingBar = grid.getDockedItems()[1];
 pagingBar.unbind(store);

  store = Ext.create('Ext.data.Store', {
            fields: tmpFields,
            pageSize: itemsPerPage,
            proxy: {
                type: 'ajax',
                url: getDataWithPageURL,
                reader: Ext.create('CustomReader', { root: 'Results', totalProperty: 'Total' })
            }
        });

        store = store.load({
            params: {
                start: 0,
                limit: itemsPerPage
            }
        });

pagingBar.bind(store); 
```

# objective-c - 我收到 stringWithContentsOfFile 的警告，参数 usedEncoding？

> ID：11079276
> 
> 赞同：2
> 
> 时间：2012-06-18T08:31:24.303
> 
> 标签：objective-c, ios, utf-8, nsstring

我只是尝试了这个：

```
NSString *docPath = [NSHomeDirectory() stringByAppendingPathComponent:@"Docs/data.txt"];
NSString *dataFile = [NSString stringWithContentsOfFile:docPath usedEncoding:NSUTF8StringEncoding error:NULL]; 
```

使用这个，我有这个警告：

> 不兼容的整数到指针转换将“int”发送到“NSStringEncoding *”类型的参数（又名“unsigned int *”）；

怎么了？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-18T08:33:41.667

代替

```
NSString *dataFile = [NSString stringWithContentsOfFile:docPath usedEncoding:NSUTF8StringEncoding error:NULL]; 
```

利用

```
NSString *dataFile = [NSString stringWithContentsOfFile:docPath 
                                           encoding:NSUTF8StringEncoding 
                                                  error:NULL]; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-18T08:39:21.193

或者你可以使用

```
NSStringEncoding *encoding = nil;
NSString *dataFile = [NSString stringWithContentsOfFile:docPath usedEncoding:encoding error:nil]; 
```

但是 Omar 是对的。将“usedEncoding”替换为“encoding”就可以了。

# c++ - 用 boost::asio 打孔

> ID：11079278
> 
> 赞同：6
> 
> 时间：2012-06-18T08:31:36.173
> 
> 标签：c++, udp, client-server, hole-punching

我试图用打孔协议制作一个服务器客户端。所以我向我的服务器发送我的客户端 IP 和客户端端口，当连接第二个用户时，服务器向客户端发送另一个客户端的 Ip 和端口。因此，当我有这个时，我试图在我的两个客户端之间建立连接，但 boost::asio 出现错误

```
terminate called after throwing an instance of 'boost::exception_detail::clone_impl<boost::exception_detail::error_info_injector<boost::system::system_error> >' 
```

what()：未找到服务已中止

这是我的代码

```
std::vector<std::string> response;

response = split(reply, ':');
std::cout << "name : " << response[0] << std::endl;
std::cout << "adresse : " << response[1] << std::endl;
std::cout << "port : " << response[2] << std::endl;

udp::resolver::query query(udp::v4(), response[0], response[1]);

std::cout << "resolved - - -  -" << std::endl;

struct client *cl = new struct client();

cl->endpoint_iterator = resolver.resolve(query);
// It Crash HERE

cl->sender_endpoint = *endpoint_iterator;
cl->name = response[0];
_clients.push_back(cl); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T22:49:44.940

检查查询的参数。

您正在打印 response[1] 作为主机地址和 response[2] 作为端口。但是您正在构建查询对象，其中 response[0] 作为主机地址， response[1] 作为端口/服务。

我怀疑“Service not found Aborted”是指您的主机名看起来不像端口号或服务名称。

See [http://www.boost.org/doc/libs/1_50_0/doc/html/boost_asio/reference/ip__basic_resolver_query/basic_resolver_query/overload4.html](http://www.boost.org/doc/libs/1_50_0/doc/html/boost_asio/reference/ip__basic_resolver_query/basic_resolver_query/overload4.html)

# css - 如何定位具有相同类的输入和选择元素

> ID：11079292
> 
> 赞同：0
> 
> 时间：2012-06-18T08:32:31.797
> 
> 标签：css, grouping

我怎么能写这个所以它针对两个元素而不用写两次

```
.field_with_errors input{
    color: red;
    background: #CEF6EC;
    border: 1px solid red;
}

.field_with_errors select{
    color: red;
    background: #CEF6EC;
    border: 1px solid red;
} 
```

这不起作用

```
.field_with_errors select input{
    color: red;
    background: #CEF6EC;
    border: 1px solid red;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-18T08:33:31.960

```
.field_with_errors select,
.field_with_errors input {
    color: red;
    background: #CEF6EC;
    border: 1px solid red;
} 
```

多个 css 选择器必须用逗号分隔。如上所述，您必须为每个选择器重复整个选择器。

此外，通常的做法是在每个逗号后换行，以使您的 css 更具可读性 - 它不会影响结果，因此以下含义相同：

```
.field_with_errors select,
.field_with_errors input { 
```

和

```
.field_with_errors select, .field_with_errors input { 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-18T08:33:38.730

```
.field_with_errors input,.field_with_errors select{
    color: red;
    background: #CEF6EC;
    border: 1px solid red;
} 
```

# elasticsearch - elasticsearch facet 功能如何与异步搜索查询一起使用？

> ID：11079296
> 
> 赞同：1
> 
> 时间：2012-06-18T08:32:51.197
> 
> 标签：elasticsearch

我知道如何使用 elasticsearch 的 facet 功能，我们可以根据搜索查询结果数据获取指定字段的值的聚合值。

我有一个应用程序，我在其中监视日志并使用 elasticsearch 搜索日志条目。在 UI 前端，我有一个分页机制，因此使用搜索的异步功能一次获取“n”个条目。

所以我的问题是，如果我修改我的异步搜索查询以获取某些字段的方面信息，它是否会为作为异步查询的结果而获取的结果子集提供聚合值。还是它会获得整个搜索结果的聚合值（而不是返回给用户的子集）。

非常感谢和问候， 科马尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T11:31:26.617

为整个搜索结果返回构面。您甚至可以在您的请求中将 size 设置为 0，这将导致无法获取任何结果，您仍将获得所有方面。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-23T06:39:22.347

请参阅[此处](http://www.elasticsearch.org/guide/reference/api/search/facets/terms-facet.html)以获取详细文档。您可以提供匹配所有查询以获取所有文档的方面。`{ "query" : { "match_all" : { } }, "facets" : { "tag" : { "terms" : { "field" : "tag", "size" : 10 } } } }` 请发布您的代码要点以获取更多信息。

# c# - 将 datagridview 更新到 SQL Server 时不考虑 DateTimePicker 值

> ID：11079300
> 
> 赞同：2
> 
> 时间：2012-06-18T08:33:15.673
> 
> 标签：c#, sql-server, datagridview, datetimepicker

我有一个绑定到 SQL Server 表的 datagridview。我通过单击这样的按钮来更新更改：

```
SqlDataAdapter dataAdapter = new SqlDataAdapter("Select * From EDI;", conn.ConnectionString);
SqlCommandBuilder cb = new SqlCommandBuilder(dataAdapter);
dataAdapter.UpdateCommand = cb.GetUpdateCommand();                 
dataAdapter.Update(dataSet, "EDI"); 
```

在我的 datagridview 中，可以通过选择 datetimepicker 的日期来更改某个列的单元格值。因此，在 datetimepicker_value 更改事件中，代码如下所示：

```
private void dateTimePicker1_ValueChanged(object sender, EventArgs e)
{
        dataGridView1.CurrentCell.Value = dateTimePicker1.Value.ToShortDateString();
        dateTimePicker1.Visible = false;           
} 
```

现在的问题是，更新工作得很好，但不适用于这个日期列。有趣的是，如果我将 datetimpicker 的值更改*两次*并在此之后更新，那么 datecolumn 的更新会起作用。

我现在很绝望，谢谢你提前回答

# ios - iOS 和 CoreAudio：调用 MusicPlayerSetTime() 会停止 MusicPlayer

> ID：11079312
> 
> 赞同：2
> 
> 时间：2012-06-18T08:33:48.993
> 
> 标签：ios, core-audio, midi

我在 iOS 5 上使用 CoreAudio 来播放 MIDI 文件。我已经完成了所有设置，一切正常，一切都很好，除非我想**在播放过程中**从头开始重新开始序列。为此，我自然会调用：

```
 if (MusicPlayerSetTime(musicPlayer, (MusicTimeStamp)0.0) != noErr)
        [NSException raise:@"playMIDI" format:@"Can't reset the player"]; 
```

我没有收到任何错误，但是进行此调用会完全停止播放，而不是（如文档中所述）继续从新位置播放。我也试过这个（以及许多其他相同类型的组合）：

```
Boolean isPlaying = NO;
if (MusicPlayerIsPlaying(musicPlayer, &isPlaying) != noErr)
    [NSException raise:@"playMIDI:" format:@"Can't get MusicPlayer play state"];

if (isPlaying) {
    if (MusicPlayerStop(musicPlayer) != noErr)
        [NSException raise:@"playMIDI:" format:@"Can't stop MusicPlayer"];
}

if (MusicPlayerSetSequence(musicPlayer, musicSequence) != noErr)
    [NSException raise:@"playMIDI:" format:@"Can't set sequence for MusicPlayer"];

if (MusicPlayerSetTime(musicPlayer, (MusicTimeStamp)0.0) != noErr)
    [NSException raise:@"playMIDI" format:@"Can't reset the player"];

if (MusicPlayerSetPlayRateScalar(musicPlayer, 1.0) != noErr)
    [NSException raise:@"playMIDI" format:@"Can't set speed"];

if (MusicPlayerStart(musicPlayer) != noErr)
    [NSException raise:@"playMIDI" format:@"Can't start MusicPlayer"]; 
```

没有喜悦，同样的效果。

但是，如果我更改 MusicSequence，则新的 MusicSequence 可以正常播放。所以我走到了极端，从同一个 MIDI 文件创建两个 MusicSequence 并从一个切换到另一个。不高兴，iOS 知道我想播放同一个文件两次并禁止它。我必须等到序列完全播放完才能再次播放。扑朔迷离。

任何的想法？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T09:40:52.887

我没有注意到在 t0 开始/停止/重新启动序列有任何问题。您确定序列中的音符处于您认为的时间吗？还是发生了其他事情？

使用下面的代码进行快速测试（删除了错误检查）停止+重新启动正常。或者我误解了你描述的问题。Fwiw - 没有停止/开始播放器的调用，它也可以工作，但瞬态音符仍然会发出声音，所以它不是一个干净的跳跃。

```
- (void)jump
{
    if (player) {
        MusicPlayerStop(player)
        MusicPlayerSetTime(player, 0.0f);
        MusicPlayerStart(player);
    }
} 
```

**更新**

我查看了 .mid 文件并对其进行了测试。这就是 MusicPlayer 看到你的文件的方式（使用函数`CAShow(nameOfYourSequence)`）

```
Sequence @0x68ad7c0
NumTracks = 1, Type = beats
* * TempoTrack * *
SequenceTrack @0x68ab250
    Num Events: 3, Track Length: 0.00 beats
    0.000: Time Sig:4/4, 24 clks/qtr, 8 32nds/clk
    0.000: SMPTE Offset [33:0:0:0.0]
    0.000: Tempo:120.000

* * Track 1 * *
SequenceTrack @0x6a815e0
    Num Events: 9, Track Length: 4.11 beats
    0.000: MetaEvent:03
         0:  30 31 30 31 30 31 31 31                           01010111        
    0.000: MetaEvent:04
         0:  30 31 20 43                                       01 C            
    0.000: MetaEvent:59
         0:  00 00                                             ..              
    0.000: MetaEvent:06
         0:  31 20 4D 41 4A 45 55 52 53                        1 MAJEURS       
    0.000: MetaEvent:06
         0:  31 31                                             11              
    0.000: Note:Ch:0 36 121 (4.113)
    0.000: Note:Ch:0 60 116 (3.931)
    0.000: Note:Ch:0 64 110 (3.931)
    0.000: Note:Ch:0 67 105 (3.931) 
```

我能够重现该文件的问题 - 以前没有见过，但我工作的文件更长。不知道您要做什么，但解决方法可能是在 0.000 之后开始您的活动。

另一方面，您是否考虑过直接使用以下方法管理您的 noteOn + noteOff 事件：

```
MusicDeviceMIDIEvent (self.samplerUnit, noteCommand, noteNum, onVelocity, 0); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T09:03:15.973

好的，这就是我认为正在发生的事情：Core Audio 是基于拉取的，也就是说，当一个单元需要数据时，它会从其源请求它。现在，当我在 MusicPlayer 上重置时间时，它会在某个时间完成，比如 t0。不久之后，在时间 t1，由这个 MusicPlayer 提供的 AU 节点请求数据。MusicPlayer 获取 t1 并计算它在其事件序列中的位置。因为它总是大于 t0，所以任何恰好在 t0 开始的事件（例如，从 MIDI tick 0 开始的事件）都被认为已播放，因此根本不播放。换句话说，midi 文件的第一个音符是/不播放的。

现在，由于我的文件很短，实际上只包含从第 0 点开始的和弦，所以没有播放任何音符，我得到了沉默。

为什么当我加载新序列或在尚未播放时开始序列时没有发生这种情况我不清楚......

无论如何，一种可能的解决方法是：停止播放器，设置顺序，将时间设置为 0，然后将播放器的启动延迟例如 25 毫秒。这对于响应性来说并不理想，但它确实有效。

解决此问题的一种稍微复杂的方法如下：
- 在音乐播放器提供的音频单元上设置回调（AudioUnitAddRenderNotify()）
- 在重置序列时，不要重置时间在播放器上但设置一个布尔标志
- 在渲染回调中，如果设置了标志，则重置播放器上的时间并取消设置标志
没有引入延迟并且它也有效，这往往验证我对问题的解释。

# image - php中的图片文件路径

> ID：11079314
> 
> 赞同：0
> 
> 时间：2012-06-18T08:33:53.800
> 
> 标签：image

我是 web 开发/php 的新手。

如果图像位于根文件夹中，我想通过以下脚本显示图像。

`<img src='photo_1.png' alt='nayaad_logo' width='100' height='100' align='top' />`

但如果我将它放在一个文件夹中，它不会显示：

`<img src='/ad_photos/photo_1.png' alt='nayaad_logo' width='100' height='100' align='top' />`

如何显示来自不同文件夹的图像？

问候：

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T08:37:33.783

“ad_photos”文件夹可能不在您的网络根文件夹中。

试试这个： `<img src='ad_photos/photo_1.png' alt='nayaad_logo' width='100' height='100' align='top' />`

# android - 在android中处理大型哈希表

> ID：11079315
> 
> 赞同：0
> 
> 时间：2012-06-18T08:34:00.400
> 
> 标签：android, hashtable, out-of-memory

尝试使用`hashtable`大数据时遇到问题。我有一个包含超过 111000 条记录的文本文件，当它达到 75000 条时，抛出了**内存不足异常**，那么有人对此有任何解决方案吗？

问题发生在以下行：

```
while ((text = reader.readLine())!= null); 
```

并且由于 `java.lang.String <init>`内部`readLine()`，但我认为问题来自`hashtable`太大而无法保存存储数据。
我在我的*xperia Neo上对其进行了测试，但它失败了，尽管它在另一台**三星*设备上运行得很好。

`SoundUnit`我保留的对象`hashtable`具有以下结构：

```
private String filename; 
private int start; 
private int end; 
```

就在 SoundUnit 对象内的 3 个字段之上。

这是我用来从文本中读取数据以存储的一段代码`hashtable`：

```
 reader = new BufferedReader(new InputStreamReader(new FileInputStream(unitSelectionFile),  "UTF-8"));
       String text=null;

       do {

                if (text.length() != 0) {
                    if (mainHash.get(text)==null)
                        mainHash.put(key, soundUnit);
                }

        } while ((text = reader.readLine())!= null); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T08:46:47.477

是的，很可能哈希表太大了。我在 Galaxy Nexus 上进行了测试，这是一款相当新的手机，它在 230k 个条目后内存不足，唯一的键和值大约 8 个字符长。我建议将您的数据放入[数据库](http://developer.android.com/reference/android/database/sqlite/package-summary.html)中。

您的阅读器应该不是问题，因为`BufferedReader`只使用少量内存。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T08:47:28.740

您应该从响应中获取 InputStream 并将其传递给任何 xml 处理程序以进行解析。这应该可以解决问题，因为通过这样做，您的 xml 将在您获取输入流时动态解析。

# web-services - BPEL 流程上的 selectionFault

> ID：11079319
> 
> 赞同：1
> 
> 时间：2012-06-18T08:34:12.323
> 
> 标签：web-services, axis2, bpel, apache-ode

我正在尝试使用 BPEL 进行简单的服务编排：我有一个服务，其操作允许我上传文件，并且我想通过允许我上传多个文件的流程来编排它。

为了实现这一点，我定义了一个输入变量，它是一个自定义元素数组，每个元素都包含一个字符串（名称）和一个 base64Binary（文件内容）。

我要做的是接收这些文件并使用 ForEach 循环调用上传服务，该循环迭代直到所有文件都被上传。

我已经在 Apache ODE 中成功部署了我的流程，并且我已经使用 WSDL2Java 生成了一个客户端来测试它。问题是，当我调用服务时，我得到一个轴故障：

```
Exception in thread "main" org.apache.axis2.AxisFault: axis2ns75:selectionFailure
at org.apache.axis2.util.Utils.getInboundFaultFromMessageContext(Utils.java:531)
at org.apache.axis2.description.OutInAxisOperationClient.handleResponse(OutInAxisOperation.java:375)
at org.apache.axis2.description.OutInAxisOperationClient.send(OutInAxisOperation.java:421)
at org.apache.axis2.description.OutInAxisOperationClient.executeImpl(OutInAxisOperation.java:229)
at org.apache.axis2.client.OperationClient.execute(OperationClient.java:165)
at _import.invocation.ws.ImportOrchestrationStub.process(ImportOrchestrationStub.java:182)
at it.italsystem.client.Client.main(Client.java:58) 
```

在我调用存根的处理方法时出现异常。

我读过，当您尝试使用一些尚未初始化的变量时，通常会出现此故障，但它们应该是，因为我正在为 Eclipse 使用 BPEL 设计器，当我添加一些分配活动时，它会询问我是否想要初始化变量。

我希望有人能给我一些建议，或者告诉我我是否在做一些愚蠢的事情，因为我对 BPEL 很陌生 :)

这是我的流程代码：

```
<bpel:process name="ImportOrchestration"
     targetNamespace="http://ws.invocation.import"
     suppressJoinFailure="yes"
     xmlns:tns="http://ws.invocation.import"
     xmlns:bpel="http://docs.oasis-open.org/wsbpel/2.0/process/executable"
     xmlns:ns1="http://services.italsystem.it">

<!-- Import the client WSDL -->
<!-- <bpel:import importType="http://schemas.xmlsoap.org/wsdl/"></bpel:import> -->
<bpel:import namespace="http://services.italsystem.it" location="ImportModule.wsdl" importType="http://schemas.xmlsoap.org/wsdl/"></bpel:import>
<bpel:import location="ImportOrchestrationArtifacts.wsdl" namespace="http://ws.invocation.import" 
        importType="http://schemas.xmlsoap.org/wsdl/" />

<!-- ================================================================= -->         
<!-- PARTNERLINKS                                                      -->
<!-- List of services participating in this BPEL process               -->
<!-- ================================================================= -->         
<bpel:partnerLinks>
    <!-- The 'client' role represents the requester of this service. -->
    <bpel:partnerLink name="client"
                 partnerLinkType="tns:ImportOrchestration"
                 myRole="ImportOrchestrationProvider"
                 />

    <bpel:partnerLink name="ImportPL" partnerLinkType="tns:ImportType" partnerRole="ImportRole"></bpel:partnerLink>
</bpel:partnerLinks>

<!-- ================================================================= -->         
<!-- VARIABLES                                                         -->
<!-- List of messages and XML documents used within this BPEL process  -->
<!-- ================================================================= -->         
<bpel:variables>
    <!-- Reference to the message passed as input during initiation -->
    <bpel:variable name="input"
              messageType="tns:ImportOrchestrationRequestMessage"/>

    <!-- 
      Reference to the message that will be returned to the requester
      -->
    <bpel:variable name="output"
              messageType="tns:ImportOrchestrationResponseMessage"/>

    <bpel:variable name="ImportPLRequest" element="ns1:importSingleFile"/>
    <bpel:variable name="ImportPLResponse" element="ns1:importFileResponse"/>          

</bpel:variables>

<!-- ================================================================= -->         
<!-- ORCHESTRATION LOGIC                                               -->
<!-- Set of activities coordinating the flow of messages across the    -->
<!-- services integrated within this business process                  -->
<!-- ================================================================= -->         
<bpel:sequence name="main"><!-- Receive input from requester. 
         Note: This maps to operation defined in ImportOrchestration.wsdl 
         -->
    <bpel:receive name="receiveInput" partnerLink="client" portType="tns:ImportOrchestration" operation="process" variable="input" createInstance="yes" />

    <!-- Generate reply to synchronous request -->
    <bpel:forEach parallel="no" counterName="Counter" name="ForEach" xmlns:http="urn:http:namesapce">
        <bpel:startCounterValue>1</bpel:startCounterValue>
        <bpel:finalCounterValue>
            <![CDATA[count($input.payload/tns:file/tns:name)]]>
        </bpel:finalCounterValue>
        <bpel:scope>
            <bpel:sequence>
                <bpel:assign validate="no" name="Assign">
                    <bpel:copy>
                        <bpel:from>
                            <![CDATA[$input.payload/tns:file/tns:name]]>
                        </bpel:from>
                        <bpel:to variable="ImportPLRequest">
                            <bpel:query queryLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0"><![CDATA[ns1:name]]></bpel:query>
                        </bpel:to>
                    </bpel:copy>
                    <bpel:copy>
                        <bpel:from>
                            <![CDATA[$input.payload/tns:file/tns:content]]>
                        </bpel:from>
                        <bpel:to variable="ImportPLRequest">
                            <bpel:query queryLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0"><![CDATA[ns1:content]]></bpel:query>
                        </bpel:to>
                    </bpel:copy>
                </bpel:assign>
                <bpel:invoke name="Invoke" partnerLink="ImportPL" operation="importSingleFile" portType="ns1:ImportServicePortType" inputVariable="ImportPLRequest1" outputVariable="ImportPLResponse1"></bpel:invoke>

            </bpel:sequence>
            <bpel:variables>
                <bpel:variable name="ImportPLResponse1" messageType="ns1:importSingleFileResponse"></bpel:variable>
                <bpel:variable name="ImportPLRequest1" messageType="ns1:importSingleFileRequest"></bpel:variable>
            </bpel:variables>
        </bpel:scope>
    </bpel:forEach>

    <bpel:assign validate="no" name="Assign1">
        <bpel:copy>
            <bpel:from>
                <bpel:literal xml:space="preserve">&quot;Done!&quot;</bpel:literal>
            </bpel:from>
            <bpel:to part="payload" variable="output">
                <bpel:query queryLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0"><![CDATA[tns:result]]></bpel:query>
            </bpel:to>
        </bpel:copy>
    </bpel:assign>
    <bpel:reply name="replyOutput" partnerLink="client" portType="tns:ImportOrchestration" operation="process" variable="output" />

</bpel:sequence>
</bpel:process> 
```

更新：根据您的建议，我做了一些更改，结果如下：

```
<bpel:process name="ImportOrchestration"
     targetNamespace="http://ws.invocation.import"
     suppressJoinFailure="yes"
     xmlns:tns="http://ws.invocation.import"
     xmlns:bpel="http://docs.oasis-open.org/wsbpel/2.0/process/executable"
     xmlns:ns1="http://services.italsystem.it">

<bpel:import namespace="http://services.italsystem.it" location="ImportModule.wsdl" importType="http://schemas.xmlsoap.org/wsdl/"></bpel:import>
<bpel:import location="ImportOrchestrationArtifacts.wsdl" namespace="http://ws.invocation.import" 
        importType="http://schemas.xmlsoap.org/wsdl/" />

<bpel:partnerLinks>
    <bpel:partnerLink name="client"
                 partnerLinkType="tns:ImportOrchestration"
                 myRole="ImportOrchestrationProvider"
                 />

    <bpel:partnerLink name="ImportPL" partnerLinkType="tns:ImportType" partnerRole="ImportRole"></bpel:partnerLink>
</bpel:partnerLinks>

<bpel:variables>
    <bpel:variable name="input"
              messageType="tns:ImportOrchestrationRequestMessage"/>
    <bpel:variable name="output"
              messageType="tns:ImportOrchestrationResponseMessage"/>
    <bpel:variable name="ImportPLResponse" messageType="ns1:importSingleFileResponse"></bpel:variable>
    <bpel:variable name="ImportPLRequest" messageType="ns1:importSingleFileRequest"></bpel:variable>                  
</bpel:variables>

<bpel:sequence name="main">
    <bpel:receive name="receiveInput" partnerLink="client" portType="tns:ImportOrchestration" operation="process" variable="input" createInstance="yes" />

    <bpel:forEach parallel="no" counterName="Counter" name="ForEach" xmlns:http="urn:http:namesapce">
        <bpel:startCounterValue>1</bpel:startCounterValue>
        <bpel:finalCounterValue>
            <![CDATA[count($input.payload/tns:file/tns:name)]]>
        </bpel:finalCounterValue>
        <bpel:scope>
            <bpel:sequence>
                <bpel:assign validate="no" name="InitializeAssign">
                    <bpel:copy>
                        <bpel:from>
                            <bpel:literal xml:space="preserve">0</bpel:literal>
                        </bpel:from>
                        <bpel:to part="parameters" variable="ImportPLRequest">
                            <bpel:query queryLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0"><![CDATA[ns1:name]]></bpel:query>
                        </bpel:to>
                    </bpel:copy>
                    <bpel:copy>
                        <bpel:from>
                            <bpel:literal xml:space="preserve">0</bpel:literal>
                        </bpel:from>
                        <bpel:to part="parameters" variable="ImportPLRequest">
                            <bpel:query queryLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0"><![CDATA[ns1:content]]></bpel:query>
                        </bpel:to>
                    </bpel:copy>
                </bpel:assign>
                <bpel:assign validate="no" name="Assign">

                    <bpel:copy>
                        <bpel:from>
                            <![CDATA[$input.payload/tns:file/tns:name]]>
                        </bpel:from>
                        <bpel:to variable="ImportPLRequest">
                            <bpel:query queryLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0"><![CDATA[ns1:name]]></bpel:query>
                        </bpel:to>
                    </bpel:copy>
                    <bpel:copy>
                        <bpel:from>
                            <![CDATA[$input.payload/tns:file/tns:content]]>
                        </bpel:from>
                        <bpel:to variable="ImportPLRequest">
                            <bpel:query queryLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0"><![CDATA[ns1:content]]></bpel:query>
                        </bpel:to>
                    </bpel:copy>
                </bpel:assign>
                <bpel:invoke name="Invoke" partnerLink="ImportPL" operation="importSingleFile" portType="ns1:ImportServicePortType" inputVariable="ImportPLRequest" outputVariable="ImportPLResponse"></bpel:invoke>

            </bpel:sequence>
        </bpel:scope>
    </bpel:forEach>

    <bpel:assign validate="no" name="Assign1">

        <bpel:copy>
            <bpel:from>
                <bpel:literal xml:space="preserve">DONE</bpel:literal>
            </bpel:from>
            <bpel:to part="payload" variable="output">
                <bpel:query queryLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0"><![CDATA[tns:result]]></bpel:query>
            </bpel:to>
        </bpel:copy>
    </bpel:assign>
    <bpel:reply name="replyOutput" partnerLink="client" portType="tns:ImportOrchestration" operation="process" variable="output" />

</bpel:sequence>
</bpel:process> 
```

这里还有 Eclipse BPEL Designer 生成的 WSDL 文件：

```
<definitions xmlns="http://schemas.xmlsoap.org/wsdl/" xmlns:plnk="http://docs.oasis-open.org/wsbpel/2.0/plnktype" xmlns:soap="http://schemas.xmlsoap.org/wsdl/soap/" xmlns:tns="http://ws.invocation.import" xmlns:vprop="http://docs.oasis-open.org/wsbpel/2.0/varprop" xmlns:wsdl="http://services.italsystem.it" name="ImportOrchestration" targetNamespace="http://ws.invocation.import">

<plnk:partnerLinkType name="ImportType">
<plnk:role name="ImportRole" portType="wsdl:ImportServicePortType"/>
</plnk:partnerLinkType>
<import location="ImportModule.wsdl" namespace="http://services.italsystem.it"/>
<types>
    <schema xmlns="http://www.w3.org/2001/XMLSchema" attributeFormDefault="unqualified" elementFormDefault="qualified" targetNamespace="http://ws.invocation.import">

        <element name="ImportOrchestrationRequest" type="tns:ImportOrchestrationReqType">
        </element>

        <element name="singleEntry">
            <complexType>
                <sequence>
                    <element minOccurs="0" name="name" nillable="true" type="string"/>
                    <element minOccurs="0" name="content" nillable="true" type="base64Binary"/>
                </sequence>
            </complexType>
        </element>

        <element name="ImportOrchestrationResponse">
            <complexType>
                <sequence>
                    <element name="result" type="string"/>
                </sequence>
            </complexType>
        </element>

        <complexType name="ImportOrchestrationReqType">
            <sequence minOccurs="1" maxOccurs="unbounded">
                <element name="file" type="tns:SingleFile"></element>
            </sequence>
        </complexType>

        <complexType name="SingleFile">
            <sequence>
                <element name="name" type="string"></element>
                <element name="content" type="base64Binary"></element>
            </sequence>
        </complexType>
    </schema>
</types>

<message name="ImportOrchestrationRequestMessage">
    <part name="payload" element="tns:ImportOrchestrationRequest"/>
</message>
<message name="ImportOrchestrationResponseMessage">
    <part element="tns:ImportOrchestrationResponse" name="payload"/>
</message>

<portType name="ImportOrchestration">
    <operation name="process">
        <input message="tns:ImportOrchestrationRequestMessage"/>
        <output message="tns:ImportOrchestrationResponseMessage"/>
    </operation>
</portType>   

<plnk:partnerLinkType name="ImportOrchestration">
    <plnk:role name="ImportOrchestrationProvider" portType="tns:ImportOrchestration"/>
</plnk:partnerLinkType>

<binding name="ImportOrchestrationBinding" type="tns:ImportOrchestration">
    <soap:binding style="document" transport="http://schemas.xmlsoap.org/soap/http"/>
    <operation name="process">
        <soap:operation soapAction="http://ws.invocation.import/process"/>
        <input>
            <soap:body use="literal"/>
        </input>
        <output>
            <soap:body use="literal"/>
        </output>
    </operation>
</binding>

<service name="ImportOrchestration">
    <port binding="tns:ImportOrchestrationBinding" name="ImportOrchestrationPort">
        <soap:address location="http://localhost:8080/ode/processes/ImportOrchestration"/>
    </port>
</service>
</definitions> 
```

最后是流程使用的服务的 WSDL。它有 2 个操作，但进程使用的唯一一个是“importFile”。

```
<wsdl:definitions xmlns:wsdl="http://schemas.xmlsoap.org/wsdl/" xmlns:ns1="http://org.apache.axis2/xsd" xmlns:ns="http://services.italsystem.it" xmlns:wsaw="http://www.w3.org/2006/05/addressing/wsdl" xmlns:http="http://schemas.xmlsoap.org/wsdl/http/" xmlns:ax23="http://exceptions.italsystem.it/xsd" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:mime="http://schemas.xmlsoap.org/wsdl/mime/" xmlns:soap="http://schemas.xmlsoap.org/wsdl/soap/" xmlns:soap12="http://schemas.xmlsoap.org/wsdl/soap12/" targetNamespace="http://services.italsystem.it">
<wsdl:documentation>ImportService</wsdl:documentation>
<wsdl:types>
    <xs:schema attributeFormDefault="qualified" elementFormDefault="qualified" targetNamespace="http://exceptions.italsystem.it/xsd">

        <xs:complexType name="ServiceException">
            <xs:complexContent>
                <xs:extension base="xs:anyType" />
            </xs:complexContent>
        </xs:complexType>   

    </xs:schema>
    <xs:schema xmlns:ax24="http://exceptions.italsystem.it/xsd" attributeFormDefault="qualified" elementFormDefault="qualified" targetNamespace="http://services.italsystem.it">
        <xs:import namespace="http://exceptions.italsystem.it/xsd"/>
        <xs:element name="ImportServiceServiceException">
            <xs:complexType>
                <xs:sequence>
                    <xs:element minOccurs="0" name="ServiceException" nillable="true" type="ax23:ServiceException"/>
                </xs:sequence>
            </xs:complexType>
        </xs:element>
        <xs:element name="importFile">
            <xs:complexType>
                <xs:sequence>
                    <xs:element minOccurs="0" name="name" nillable="true" type="xs:string"/>
                    <xs:element minOccurs="0" name="dh" nillable="true" type="xs:base64Binary"/>
                </xs:sequence>
            </xs:complexType>
        </xs:element>
        <xs:element name="importFileResponse">
            <xs:complexType>
                <xs:sequence>
                    <xs:element minOccurs="0" name="return" nillable="true" type="xs:string"/>
                </xs:sequence>
            </xs:complexType>
        </xs:element>
        <xs:element name="importSingleFile">
            <xs:complexType>
                <xs:sequence>
                    <xs:element minOccurs="0" name="name" nillable="true" type="xs:string"/>
                    <xs:element minOccurs="0" name="content" nillable="true" type="xs:base64Binary"/>
                </xs:sequence>
            </xs:complexType>
        </xs:element>
        <xs:element name="importSingleFileResponse">
            <xs:complexType>
                <xs:sequence>
                    <xs:element minOccurs="0" name="return" nillable="true" type="xs:string"/>
                </xs:sequence>
            </xs:complexType>
        </xs:element>
    </xs:schema>
</wsdl:types>
<wsdl:message name="importFileRequest">
    <wsdl:part name="parameters" element="ns:importFile"/>
</wsdl:message>
<wsdl:message name="importFileResponse">
    <wsdl:part name="parameters" element="ns:importFileResponse"/>
</wsdl:message>
<wsdl:message name="ImportServiceServiceException">
    <wsdl:part name="parameters" element="ns:ImportServiceServiceException"/>
</wsdl:message>
<wsdl:message name="importSingleFileRequest">
    <wsdl:part name="parameters" element="ns:importSingleFile"/>
</wsdl:message>
<wsdl:message name="importSingleFileResponse">
    <wsdl:part name="parameters" element="ns:importSingleFileResponse"/>
</wsdl:message>
<wsdl:portType name="ImportServicePortType">
    <wsdl:operation name="importFile">
        <wsdl:input message="ns:importFileRequest" wsaw:Action="urn:importFile"/>
        <wsdl:output message="ns:importFileResponse" wsaw:Action="urn:importFileResponse"/>
        <wsdl:fault message="ns:ImportServiceServiceException" name="ImportServiceServiceException" wsaw:Action="urn:importFileImportServiceServiceException"/>
    </wsdl:operation>
    <wsdl:operation name="importSingleFile">
        <wsdl:input message="ns:importSingleFileRequest" wsaw:Action="urn:importSingleFile"/>
        <wsdl:output message="ns:importSingleFileResponse" wsaw:Action="urn:importSingleFileResponse"/>
        <wsdl:fault message="ns:ImportServiceServiceException" name="ImportServiceServiceException" wsaw:Action="urn:importSingleFileImportServiceServiceException"/>
    </wsdl:operation>
</wsdl:portType>
<wsdl:binding name="ImportServiceSoap11Binding" type="ns:ImportServicePortType">
    <soap:binding transport="http://schemas.xmlsoap.org/soap/http" style="document"/>
    <wsdl:operation name="importFile">
        <soap:operation soapAction="urn:importFile" style="document"/>
        <wsdl:input>
            <soap:body use="literal"/>
        </wsdl:input>
        <wsdl:output>
            <soap:body use="literal"/>
        </wsdl:output>
        <wsdl:fault name="ImportServiceServiceException">
            <soap:fault use="literal" name="ImportServiceServiceException"/>
        </wsdl:fault>
    </wsdl:operation>
    <wsdl:operation name="importSingleFile">
        <soap:operation soapAction="urn:importSingleFile" style="document"/>
        <wsdl:input>
            <soap:body use="literal"/>
        </wsdl:input>
        <wsdl:output>
            <soap:body use="literal"/>
        </wsdl:output>
        <wsdl:fault name="ImportServiceServiceException">
            <soap:fault use="literal" name="ImportServiceServiceException"/>
        </wsdl:fault>
    </wsdl:operation>
</wsdl:binding>
<wsdl:binding name="ImportServiceSoap12Binding" type="ns:ImportServicePortType">
    <soap12:binding transport="http://schemas.xmlsoap.org/soap/http" style="document"/>
    <wsdl:operation name="importFile">
        <soap12:operation soapAction="urn:importFile" style="document"/>
        <wsdl:input>
            <soap12:body use="literal"/>
        </wsdl:input>
        <wsdl:output>
            <soap12:body use="literal"/>
        </wsdl:output>
        <wsdl:fault name="ImportServiceServiceException">
            <soap12:fault use="literal" name="ImportServiceServiceException"/>
        </wsdl:fault>
    </wsdl:operation>
    <wsdl:operation name="importSingleFile">
        <soap12:operation soapAction="urn:importSingleFile" style="document"/>
        <wsdl:input>
            <soap12:body use="literal"/>
        </wsdl:input>
        <wsdl:output>
            <soap12:body use="literal"/>
        </wsdl:output>
        <wsdl:fault name="ImportServiceServiceException">
            <soap12:fault use="literal" name="ImportServiceServiceException"/>
        </wsdl:fault>
    </wsdl:operation>
</wsdl:binding>
<wsdl:binding name="ImportServiceHttpBinding" type="ns:ImportServicePortType">
    <http:binding verb="POST"/>
    <wsdl:operation name="importFile">
        <http:operation location="importFile"/>
        <wsdl:input>
            <mime:content type="application/xml" part="parameters"/>
        </wsdl:input>
        <wsdl:output>
            <mime:content type="application/xml" part="parameters"/>
        </wsdl:output>
    </wsdl:operation>
    <wsdl:operation name="importSingleFile">
        <http:operation location="importSingleFile"/>
        <wsdl:input>
            <mime:content type="application/xml" part="parameters"/>
        </wsdl:input>
        <wsdl:output>
            <mime:content type="application/xml" part="parameters"/>
        </wsdl:output>
    </wsdl:operation>
</wsdl:binding>
<wsdl:service name="ImportService">
    <wsdl:port name="ImportServiceHttpSoap11Endpoint" binding="ns:ImportServiceSoap11Binding">
        <soap:address location="http://localhost:8080/axis2/services/ImportService.ImportServiceHttpSoap11Endpoint/"/>
    </wsdl:port>
    <wsdl:port name="ImportServiceHttpSoap12Endpoint" binding="ns:ImportServiceSoap12Binding">
        <soap12:address location="http://localhost:8080/axis2/services/ImportService.ImportServiceHttpSoap12Endpoint/"/>
    </wsdl:port>
    <wsdl:port name="ImportServiceHttpEndpoint" binding="ns:ImportServiceHttpBinding">
        <http:address location="http://localhost:8080/axis2/services/ImportService.ImportServiceHttpEndpoint/"/>
    </wsdl:port>
</wsdl:service>
</wsdl:definitions> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T10:14:53.237

`ImportPLRequest`您在第一个分配活动中分配给在顶级范围定义的名为 的变量。但是，您在调用活动中使用该变量`ImportPLRequest1`。此变量未初始化，因此出现错误。附带说明：这不应该是您的响应变量的问题。

但是，我想知道你为什么得到一个`selectionFailure`. 我认为`uninitializedVariable`在这种情况下一个错误是正确的。也许，这是 ODE 中的一个错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-18T09:47:50.230

`ImportPLRequest`查看 BPEL 文件，我可以看到由于某种原因，您没有初始化`foreach`. 您只是将值复制到变量中而没有适当的初始化逻辑。

添加流程的 WSDL 后编辑。
查看更新后的 BPEL 文件中的第一个复制语句。在将一些值复制到“ `ImportPLRequest`”变量的“ `ns1:name`”元素之前，您应该初始化“ `ImportPLRequest`”变量。您只为 BPEL 流程提供了 WSDL，但此变量是根据您的合作伙伴服务的 WSDL 中的消息创建的。如果您可以为合作伙伴服务提供 WSDL，我们可以帮助初始化块。您可以参考[[1]](https://svn.wso2.org/repos/wso2/carbon/platform/trunk/products/bps/modules/samples/product/src/main/resources/bpel/2.0/CreditRating/CreditRating.bpel)作为变量初始化的参考。请参阅第一个副本声明。

[1](https://svn.wso2.org/repos/wso2/carbon/platform/trunk/products/bps/modules/samples/product/src/main/resources/bpel/2.0/CreditRating/CreditRating.bpel) - [https://svn.wso2.org/repos/wso2/carbon/platform/trunk/products/bps/modules/samples/product/src/main/resources/bpel/2.0/CreditRating/CreditRating.bpel](https://svn.wso2.org/repos/wso2/carbon/platform/trunk/products/bps/modules/samples/product/src/main/resources/bpel/2.0/CreditRating/CreditRating.bpel)

高温高压

# android - 如何以编程方式将 TextView 更改为 ImageView 并返回

> ID：11079320
> 
> 赞同：4
> 
> 时间：2012-06-18T08:34:25.313
> 
> 标签：android, android-imageview, textview

我有一个 XML 布局，它定义了一个*50px x 320px*`TextView`的框，ID 是。 我有时想使用相同的区域来显示图像。 我希望能够以编程方式将该区域切换为或。*`TextView2`
`TextView`
`TextView``ImageView`*

 *```
 <LinearLayout
    android:layout_width="320dp"
    android:layout_height="50dp" >

    <TextView
        android:id="@+id/textView2"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_weight="0.35"
        android:text="      "
        android:textAppearance="?android:attr/textAppearanceLarge" />
    </LinearLayout> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-18T08:42:41.820

只需在 TextView 下方/旁边添加一个 ImageView 并将 android:visibility="gone" 设置在您不想显示的那个上。

还设置一个 android:id="@+id/some_identifier" 以便您可以在代码中找到视图并将 TextView 设置为 View.GONE 并将 ImageView 设置为 View.VISIBLE 当您想要切换时。

```
<LinearLayout
    android:layout_width="320dp"
    android:layout_height="50dp" >

    <TextView
        android:id="@+id/textView2"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_weight="0.35"
        android:text="      "
        android:textAppearance="?android:attr/textAppearanceLarge" />

    <ImageView
        android:id="@+id/image_view_1"
        android:visibility="gone"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" />

</LinearLayout> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-18T08:37:47.590

在这里你有两个选择：

1.  您可以根据特定条件随时设置文本视图的背景或设置文本。

2.  当您想要 ImageView True 和 Textview GONE 的 Image Set Visibility 时，您可以单独获取 ImageView nd，而当您想要文本时，请设置 TextView True 和 ImageView GONE 的 Visibility*

# c# - 从 dll C# 返回一个类对象

> ID：11079322
> 
> 赞同：3
> 
> 时间：2012-06-18T08:34:27.623
> 
> 标签：c#

我在 C# 中有一个 dll，它返回一个类对象。

DLL 代码：

**个人.cs：**

```
namespace Extract
{
    public class Person
    {
        public string name;
        public string address;
        public int age;
        public int salary;
    }
} 
```

**Class1.cs**

```
namespace Extract
{
    public class MClass
    {
        public static Person GetPerson()
        {
            Person p = new Person();
            p.name = "Deepak";
            p.address = "Bangalore";
            p.age = 30;
            p.salary = 20000;
            return p;
        }
    }
} 
```

我在 C# 中有另一个程序“RunApp”，它具有相同的 Person.cs 类并尝试从上述 dll 中获取对象。

运行应用代码：

**个人.cs：**

```
namespace Extract
{
    public class Person
    {
        public string name;
        public string address;
        public int age;
        public int salary;
    }
} 
```

**Form1.cs：**

```
namespace Ex
{
    public partial class Form1 : Form
    {
        public Form1()
        {
            InitializeComponent();
        }

        private void Form1_Load(object sender, EventArgs e)
        {
            Person mem = MClass.GetPerson();
        }
    }
} 
```

在此之后，当我编译“RunApp”代码时，我得到一个错误：

> “不能将类型'Extract.Person'隐式转换为'Ex.Person'”。我尝试将“RunApp”代码的命名空间从“Ex”更改为“Extract”，但同样的错误：“无法将类型“Extract.Person”隐式转换为“Extract.Person”。

我想将 Extract.dll 中的值发送到 RunApp 程序。我想在多个程序中使用这个 dll。

有人可以帮忙解决这个问题吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-18T08:38:01.203

类型由其程序集**定义。**`Foo.Bar.SomeClass`两个不同程序集中的两个相同副本**是不同的类型**，并且不可互换 - 即使它们具有相同的命名空间等。

您应该*引用*该库，并从那里重新使用该类型。

# iphone - 在新 Mac 上安装配置文件

> ID：11079326
> 
> 赞同：0
> 
> 时间：2012-06-18T08:34:50.807
> 
> 标签：iphone, provisioning-profile

自从旧的 Mac 崩溃并试图在新机器上安装我的配置文件后，我得到了一台新的 Mac。通常为此，我从管理器中导出配置文件并将其导入另一台机器。但由于旧机器不再工作，我不能这样做。只需从 apple.com/developer 的开发人员门户下载，就会出现错误“找不到有效的签名身份”，我猜这是由于缺少私钥。我需要撤销证书并创建一个新证书吗？我还有什么其他选择？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T08:40:06.467

您需要撤销它，因为私钥无法重新生成，只需撤销旧的并按照苹果开发者网站上的步骤创建新的

# android - SQLite 和密码加密、解密和上传

> ID：11079328
> 
> 赞同：2
> 
> 时间：2012-06-18T08:34:57.453
> 
> 标签：android, database, sqlite, encryption, flash-builder

我正在 Flash builder 中构建一个 android 应用程序，这将允许客户端在应用程序内使用和访问数据库，但在外部阻止。

案例是获取一个加密的数据库（阻止客户端访问应用程序外部的信息），一个密码（对客户端隐藏）并将其上传到服务器。其中服务器就可以用这个密码来解密数据库，然后我打算用PHP来操作数据。

**在上传阶段安全传递 SQLite 数据库和密码的最佳方法是什么？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T08:43:02.520

使用 HTTPS 与您的服务器通信。这将自动加密所有流量。另请记住，如果客户端（用户）可以从应用程序访问数据，并且数据在设备上，那么您几乎无法阻止他们复制和访问应用程序外部的数据。只要密码/加密密钥也在设备上，它所要做的就是让它们慢一点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T08:47:04.450

Create a http API that your application will use. This API will enforce which operations are possible. So the client never sees the DB password, encrypted or not.

I don't really get what you're encrypting the db for. Are you trying to protect against the case where the server gets hacked?

Now other applications will be able to use this API, and it's impossible to stop them. You can just throw as much obfuscation at it as possible, and hope that crackers are too lazy.

# jquery - 在不同的 li 上换班

> ID：11079331
> 
> 赞同：4
> 
> 时间：2012-06-18T08:35:04.207
> 
> 标签：jquery, css, jquery-selectors

我有 18 张图像，每行显示 6 张图像。我想为连续的倒数第二个和最后一个图像分配不同的类。例如：-

```
1    2    3    4    5    6
7    8    9    10   11   12
13   14   15   16   17   18 
```

这里的类应该是不同的 `5 6 11 12 17 18`

我可以为此做出等式，因为留下 5 6

它可能`5n + (n-1) 6n` 从 n=2 开始

```
 5(2) + (2-1)    6(2)  =    11    12
   5(3) + (3-1)    6(3)  =    17    18 
```

我不确定如何使用 jquery 来实现这一点。AS 5 6 应该是原样，然后是 11、12、17、18 的等式，从 n=2 开始

```
<li><a href="#"><span></span><img src="images/img14.jpg" alt="" width="136" height="136" /><em class="popup"> <strong class="arrow"></strong><strong class="title">Sponsor Name Here</strong>Lorem ipsum dolor sit amet, consectetur edt adipiscing elit. Nullam dignissim enim ut co. Lorem ipsum dolor sit amet, consectetur bel adipiscing elit nullam digniss</em></a></li> 
```

在 em 我想添加类 popup-left

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-18T08:39:00.977

**为此，您不需要 jQuery。**

以下选择器将应用您需要的样式：

```
li:nth-child(6n) img, li:nth-child(6n-1) img
{
    /* styles here */
} 
```

[**查看更新的演示**](http://jsfiddle.net/Curt/FJLfz/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-18T08:38:42.317

如果我很好理解（并假设你有`li`元素）

```
$('li:nth-child(6n+4)').addClass('class1');
$('li:nth-child(6n+5)').addClass('class2'); 
```

或者只是将选择器定义为直接的 css（但在这种情况下它不起作用`IE<9`）

```
li:nth-child(6n+4) {
  ...
}

li:nth-child(6n+5) {
  ...
} 
```

如果需要更改`li`您的真实元素（`img`或`p`其他任何内容）

# java - 在 JSF 2.0 项目中 MyFaces Trinidad 的基本设置是什么？

> ID：11079332
> 
> 赞同：1
> 
> 时间：2012-06-18T08:35:18.277
> 
> 标签：java, ajax, jsf-2, myfaces, trinidad

我有一个带有 MyFaces Trinidad 2.0.1 组件的 JSF 2.0 项目，我使用 trinidad 组件创建了一些表单，但是一些使用 ajax 的组件在[展示](http://example.irian.at/trinidad-components-showcase-2012061803/faces/pages/demoStart.xhtml)中没有按预期呈现或没有响应，树组件没有'不展开，选项卡式面板显示内容，但不呈现选项卡控件。日期选择器也。Firebug 不显示任何 JavaScript 错误。谢谢你

我正在使用 Eclipse Indingo 3.7.2、Java EE 6 和 Glassfish 3.1.2

[截屏](http://www.beatscent.co.za/res/form2.PNG)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-01T09:29:31.427

您是否尝试过使用[Trinidad 的 Maven 原型](http://myfaces.apache.org/build-tools/archetypes/myfaces-archetype-trinidad20/index.html)开始一个项目？

> 使用以下 maven 命令，然后从选项中选择 myfaces-archetype-trinidad20。

```
mvn archetype:generate -DarchetypeCatalog=http://myfaces.apache.org 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-11T15:04:50.147

您正在使用或之一`<tr:document>`吗？`<trh:head>``<h:head>`

[这是一个 JSF2 教程，其中提到`<f:ajax>`支持需要`<h:head>`](http://courses.coreservlets.com/Course-Materials/pdf/jsf/jsf2/JSF2-Getting-Started.pdf). 如果对 Trinidad 组件的 ajax 支持需要类似的东西，我不会感到惊讶。

# zend-framework - 使用 $this->renderScript 时给视图赋值

> ID：11079333
> 
> 赞同：0
> 
> 时间：2012-06-18T08:35:23.510
> 
> 标签：zend-framework

为了避免复制/粘贴，我可以对不同的操作使用独特的视图，我可以使用其中一种方式来做到这一点

```
$this->renderScript('index/index.phtml'); 
$this->view->var = "hello world"; 
```

或者

```
$this->_helper->viewRenderer('index');
$this->view->var = "hello world"; 
```

如果我想使用不同的控制器，我必须使用第一个控制器，viewRenderer 没问题，但是当我使用 renderScript 时，它没有显示任何`var`未定义的内容。如何为视图脚本分配值？

index.phtml 会是这样的

`echo $this->var ;`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T09:09:37.777

它应该按照您描述的方式工作

```
class IndexController extends Zend_Controller_Action
{

    public function init()
    {
        /* Initialize action controller here */
        $this->view->var = 'echo me in any action viewscript and i will show you text';
    }

    public function indexAction()
    {
        // action body
        $this->view->test = 'Don\'t put me here becuase this is not the action that is run';

    }

    public function testAction()
    {
        // action body

        $this->view->test = 'Hello world';
        $this->renderScript('index/index.phtml');
        // or $this->_helper->viewRenderer('index');
    }

} 
```

在我看来（index.phtml）

我有

```
<?php echo $this->test;?> 
```

当我去 /index/test/ 它会显示“你好世界”...

另外，当我在另一个控制器中执行此操作时，它会给我结果

```
class MyController extends Zend_Controller_Action
{

    public function init()
    {
        /* Initialize action controller here */
    }

    public function indexAction()
    {
        // action body
        $this->view->test = 'Hello world';
        $this->renderScript('index/index.phtml'); 
    }

} 
```

# html - html 错误：我说 top:0% 和 left:0% 但浏览器中有空白填充

> ID：11079334
> 
> 赞同：1
> 
> 时间：2012-06-18T08:35:27.443
> 
> 标签：html, css

好吧，这可能是一个新手问题，但这让我非常沮丧。我在样式标签中清楚地说，顶部的蓝色条需要紧贴顶部，两个侧板需要紧贴两侧。

然而由于某种原因，它冒昧地在我的 html 周围插入了一个空白区域。

这是链接： http: [//popularn.com/nate/error.html](http://popularn.com/nate/error.html)

看到左侧和顶部的空白区域了吗？

即使我说 top:0% 和 left:0%，它*仍然*不起作用。就好像它在嘲笑我，而我已经受够了。就像它从顶部开始文档：2％和左侧：2％，我无能为力......

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-18T08:37:13.957

从正文中删除边距，将左上角设置为 0，当然不要忘记位置属性

```
 html,body{padding:0; margin:0;}
 #someElement{position: absolute; top:0; left:0} 
```

也 - 把`position:absolute; top:0; left:0;`它放在`body`就像什么都不做`position`，`#top_menu`应该是`position: fixed`而不是`fixes`没有意义

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-18T08:49:31.773

浏览器有一组默认样式，称为“用户代理样式”。这些是适用于元素的通用 CSS 规则集。你知道当你把一个 H1 放在一个页面上时，它会显得很大，而且是粗体的吗？就是这些风格。

页面中的基本元素都使用这些 UA 规则进行样式设置。正文、HTML、div 等 - 它们都有少量的填充，这就是它的来源。

因此，当您开发超出基本样式时，**始终使用 CSS reset是一种很好的做法。**我推荐几个不错的。由于 CSS 是分层的（因此是级联的！），您需要首先包含重置。

首先是[Eric Meyer 的 CSS reset](http://meyerweb.com/eric/tools/css/reset/)。这通常适用于所有事物，并且在大多数情况下是不可见的。您包含该文件，所有内容都会重置为基础。

其次是[Yahoo UI 3 (YUI) reset](http://yuilibrary.com/yui/docs/cssreset/)，它采用了稍微不同的方法。它们允许您通过包含一个类来选择性地将重置应用于页面的不同区域。这对某些事情很有用，但对于几乎每个中小型项目，我都推荐上面链接的 Eric 的重置 - 但它对于比较和学习很有用。

与其尝试在进行过程中调整不一致 - 使用 CSS 重置将为您提供所有元素的基线，这在每个浏览器上都是相同的。相信我——**你想要这个**。当您进一步了解 html、表单或类似的有趣内容时，这种东西绝对是救命稻草。

希望有帮助！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-18T08:41:01.907

您需要在任何浏览器上重置默认填充和边距。我通常使用这个：

```
*{padding:0;margin:0;} 
```

# android - 将应用程序数据文件移动到 SDCard

> ID：11079336
> 
> 赞同：2
> 
> 时间：2012-06-18T08:35:28.387
> 
> 标签：android

我有一个应用程序，其中包含一些图像`res/drawable/`并在网格视图中显示它们。

我添加了一些我的假期照片，所以我的应用程序的大小增加到大约**70MB**，因为它只是一个简单的应用程序，所有这些都存储在手机内存中，我想改变它。

所以我的问题是：如何制作应用程序，以便在安装后当我单击**“移动到 SDCard”**选项时，所有图片都存储在 SDCard 上，然后从那里在应用程序中查看，而不是从手机内存中查看。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-18T08:42:08.243

将偏好外部放入您的清单中

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
android:installLocation="preferExternal"
... > 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T08:38:33.817

您可以在 Android Manifest 文件中使用 installLocation xml 标记，如下所示：http: [//developer.android.com/guide/appendix/install-location.html](http://developer.android.com/guide/appendix/install-location.html)

# visual-c++ - Wince 5.0 使用 STLport void *operator new(size_t,void *)' 已经有一个主体

> ID：11079337
> 
> 赞同：1
> 
> 时间：2012-06-18T08:35:29.417
> 
> 标签：visual-c++, windows-ce, stlport

我正在做从 windows 到 wince 的转换工作。对于使用 iostream，我选择`STLport5.2.1`. *我在vs2008*上收到编译错误：

> am files (x86)\windows ce tools\wce500\athenapbws\mfc\include\wcealt.h(248) : error C2084: function 'void *operator new(size_t,void *)' has a body
> 
> 2> D:\Program Files (x86)\Windows CE Tools\wce500\AthenaPBWS\include\ARMV4I../Armv4i/new(71) ：参见之前的“新”定义
> 
> 2>d:\program files (x86)\windows ce tools\wce500\athenapbws\mfc\include\wcealt.h(254) : error C2084: function 'void operator delete(void *,void *)' has a body
> 
> 2> D:\Program Files (x86)\Windows CE Tools\wce500\AthenaPBWS\include\ARMV4I../Armv4i/new(73) ：参见之前的“删除”定义
> 
> 2>Util1.cpp 2>D:\Program Files (x86)\Windows CE Tools\wce500\AthenaPBWS\include\ARMV4I../Armv4i/new(72) : error C2084: function 'void *operator new(size_t,void *)' 已经有一个主体
> 
> 2> d:\program files (x86)\windows ce tools\wce500\athenapbws\mfc\include\wcealt.h(247) : 参见之前的“新”定义
> 
> 2>D:\Program Files (x86)\Windows CE Tools\wce500\AthenaPBWS\include\ARMV4I../Armv4i/new(74) : error C2084: function 'void operator delete(void *,void *)' already has身体
> 
> 2> d:\program files (x86)\windows ce tools\wce500\athenapbws\mfc\include\wcealt.h(253) : 参见之前的“删除”定义

你怎么能解决这个错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T14:55:16.740

您必须在配置 bat 中添加字符串 --rtl-static。这对我很有效。dll 的输出名称将是 stlport-x.5.2.dll

**编辑**

我发现了这个问题。我能够使用 /MD（DLL 多线程）构建 stlport，请查看 http://social.msdn.microsoft.com/Forums/en-US/vssmartdevicesnative/thread/fbae6f2a-4fc0-4610-a4b7-3d3d6bc6ac7e/

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-20T15:27:19.873

看起来你应该定义 __PLACEMENT_NEW_INLINE - 如果尚未定义，它的作用如下：

```
/* 使用 MFCCE 和一起使用时的解决方法：MFCCE 的 wcealt.h 没有
 * 在定义 operator new 之前检查 __PLACEMENT_NEW_INLINE，所以当
 * 之前定义了operatore，会报C2084错误：
 *“函数'void *__cdecl operator new(unsigned int,void *)'已经有一个主体”。
 */
# ifdef _STLP_USE_MFC
# 定义 __PLACEMENT_NEW_INLINE
＃ 万一

```

# gcc - ccs上的交叉编译

> ID：11079338
> 
> 赞同：0
> 
> 时间：2012-06-18T08:35:36.933
> 
> 标签：gcc, cross-compiling, object-files

我应该使用霓虹内在构建一个项目，由于CCS不支持霓虹内在，我正在使用GCC在cygwin命令行上编译程序，然后将它链接到CCS上。

现在的问题是我得到了目标文件。但我无法在 CCS 上链接它。我不想被勺子喂食，我需要遵循的一组基本步骤就足够了。提前谢谢你

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T13:38:25.893

在这里你有一个一步一步：

[https://linuxlink.timesys.com/docs/gsg/ompl138_exp](https://linuxlink.timesys.com/docs/gsg/omapl138_exp)

[http://processors.wiki.ti.com/index.php/How_to_connect_to_the_OMAP-L138/C6748/AM1808_EVM_board_using_CCS%3F](http://processors.wiki.ti.com/index.php/How_to_connect_to_the_OMAP-L138/C6748/AM1808_EVM_board_using_CCS%3F)

玩得开心。

# linux - 尝试在 Linux 上使用双重身份验证“登录 Google”时 Eclipse 崩溃

> ID：11079339
> 
> 赞同：1
> 
> 时间：2012-06-18T08:35:38.263
> 
> 标签：linux, eclipse, google-app-engine, google-eclipse-plugin

首先，如果 StackOverflow 是该问题的错误问答网站，我深表歉意，如果需要，我很乐意将其移至另一个网站...

每当我尝试在插件中登录我的 Google 帐户时，Eclipse 就会崩溃（Eclipse 左下角的链接）。我可以输入我的电子邮件和密码，然后它会加载我的验证码页面（因为我使用[谷歌的两因素身份验证](http://googleblog.blogspot.co.uk/2011/02/advanced-sign-in-security-for-your.html)）。提交验证码后，eclipse 完全崩溃并从我的桌面消失。

有任何想法吗？

**环境**：全新安装以下内容：

1.  薄荷 Linux 13
2.  我在我的 Google（应用程序）帐户上启用了双重身份验证。
3.  日蚀靛蓝
4.  日食的谷歌插件

**更新 - 2012/06/27** 这是控制台中的输出：

```
$ eclipse
12:26:50.336 [org.eclipse.jdt.internal.ui.text.JavaReconciler] INFO  org.mortbay.log - Logging to Logger[org.mortbay.log] via org.mortbay.log.Slf4jLog
#
# A fatal error has been detected by the Java Runtime Environment:
#
#  SIGILL (0x4) at pc=0x00b16e62, pid=3853, tid=3077970176
#
# JRE version: 6.0_24-b24
# Java VM: OpenJDK Client VM (20.0-b12 mixed mode, sharing linux-x86 )
# Derivative: IcedTea6 1.11.1
# Distribution: Ubuntu 12.04 LTS, package 6b24-1.11.1-4ubuntu3
# Problematic frame:
# C  0x00b16e62
#
# An error report file with more information is saved as:
# /home/matt/gitrepos/OddPrints/hs_err_pid3853.log
#
# If you would like to submit a bug report, please include
# instructions how to reproduce the bug and visit:
#   https://bugs.launchpad.net/ubuntu/+source/openjdk-6/
# The crash happened outside the Java Virtual Machine in native code.
# See problematic frame for where to report the bug.
#
Aborted (core dumped) 
```

或者**，如果您真的很感兴趣**，[完整的日志就在这里](http://pastebin.com/Jn7mSxHC)。

**更新 - 2012/06/28**

正如@jpe 所建议的，我尝试将 eclipse 配置中的默认浏览器更新为“mozilla”。这只是引发了一个错误，说它无法启动浏览器，因此要在外部启动一个浏览器以供我登录。我还给了我一个输入验证码的框。我这样做了，但在输入验证码后，它被错误 400 炸毁。这是 eclipse 日志的尾部：

```
!ENTRY com.google.gdt.eclipse.login 4 0 2012-06-28 14:53:36.043
!MESSAGE Could not sign in. Make sure that you entered the correct verification code.
!STACK 0
com.google.api.client.http.HttpResponseException: 400 Bad Request
    at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:380)
    at com.google.api.client.auth.oauth2.draft10.AccessTokenRequest.executeUnparsed(AccessTokenRequest.java:457)
    at com.google.api.client.auth.oauth2.draft10.AccessTokenRequest.execute(AccessTokenRequest.java:473)
    at com.google.gdt.eclipse.login.GoogleLogin.logIn(GoogleLogin.java:376)
    at com.google.gdt.eclipse.login.GoogleLogin.logIn(GoogleLogin.java:312)
    at com.google.gdt.eclipse.login.ui.LoginTrimContribution$1.mouseUp(LoginTrimContribution.java:102)
    at org.eclipse.swt.widgets.TypedListener.handleEvent(TypedListener.java:219)
    at org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:84)
    at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:1258)
    at org.eclipse.swt.widgets.Display.runDeferredEvents(Display.java:3588)
    at org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:3209)
    at org.eclipse.ui.internal.Workbench.runEventLoop(Workbench.java:2701)
    at org.eclipse.ui.internal.Workbench.runUI(Workbench.java:2665)
    at org.eclipse.ui.internal.Workbench.access$4(Workbench.java:2499)
    at org.eclipse.ui.internal.Workbench$7.run(Workbench.java:679)
    at org.eclipse.core.databinding.observable.Realm.runWithDefault(Realm.java:332)
    at org.eclipse.ui.internal.Workbench.createAndRunWorkbench(Workbench.java:668)
    at org.eclipse.ui.PlatformUI.createAndRunWorkbench(PlatformUI.java:149)
    at org.eclipse.ui.internal.ide.application.IDEApplication.start(IDEApplication.java:123)
    at org.eclipse.equinox.internal.app.EclipseAppHandle.run(EclipseAppHandle.java:196)
    at org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.runApplication(EclipseAppLauncher.java:110)
    at org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.start(EclipseAppLauncher.java:79)
    at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:344)
    at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:179)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:616)
    at org.eclipse.equinox.launcher.Main.invokeFramework(Main.java:622)
    at org.eclipse.equinox.launcher.Main.basicRun(Main.java:577)
    at org.eclipse.equinox.launcher.Main.run(Main.java:1410) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T10:03:09.117

在我看来，您偶然发现了[WebKit 和 XULRunner 的 sqlite Eclipse 错误之间的不兼容](https://bugs.eclipse.org/bugs/show_bug.cgi?id=349837)。来自错误报告的引用：“确保不会发生此错误的唯一方法是[设置 org.eclipse.swt.browser.DefaultType 属性](http://www.eclipse.org/swt/faq.php#browserspecifydefault)。”

因此，上述问题修复了 Eclipse 崩溃，正如问题的编辑所暗示的那样。现在您似乎偶然发现了一个 Google App Engine 问题，也许是[这个](http://code.google.com/p/googleappengine/issues/detail?id=5971)。人们说如果您的计算机上的时间明显不准确，appengine 将拒绝登录。

如果您可以使用计算机中的其他方法来测试您尝试从 Eclipse 登录的登录，那将会有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T12:39:50.713

我找到了解决方案，至少是一种解决方法。我有同样的问题，Ubuntu 10.04 x64，虚拟机上的 eclipse Juno .. 所以，不要使用 Eclipse 窗口下端的按钮登录到 Google 帐户，只需使用顶部 G 图标中的选项工具栏，您可以在其中使用 GWT 创建新项目、更新等。所以：在做任何事情之前按下`Deploy to App Engine`并登录。然后，您将登录。然后，Eclipse 将再次崩溃，但至少登录仍将保留，因此在您重新启动 Eclipse 后，您应该让您的帐户与您的 IDE 同步。希望它有帮助，它对我有用。

# bash - 执行包含来自 shell 变量的引号的命令

> ID：11079342
> 
> 赞同：28
> 
> 时间：2012-06-18T08:35:44.880
> 
> 标签：bash, shell

我目前在从 shell 变量执行命令时遇到问题。

一般来说，以下工作按预期工作：

```
COMMAND="echo A"
echo $COMMAND
$COMMAND 
```

产生：

```
echo A
A 
```

但如果我这样做

```
COMMAND="su aUser -s /bin/bash -c 'echo A'"
echo $COMMAND
$COMMAND 
```

我明白了

```
su aUser -s /bin/bash -c 'echo A'
Password: 
A': -c: line 0: unexpected EOF while looking for matching `''
A': -c: line 1: syntax error: unexpected end of file 
```

如果我进入该行

```
su aUser -s /bin/bash -c 'echo A' 
```

直接它按预期工作。

看来我假设 $COMMAND 等于直接输入内容作为命令是错误的。

## 问题

1）有谁知道我如何从变量运行命令？

2）究竟有什么区别

```
COMMAND="command"
$COMMAND 
```

和

```
command 
```

?

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2012-06-18T10:18:38.507

数组对于保持参数完整很有用：

```
command=(su aUser -s /bin/bash -c 'echo A') 
```

并完全像这样调用它：

```
"${command[@]}" 
```

* * *

## 回答 #2

> 赞同：29
> 
> 时间：2012-06-18T08:39:06.923

你需要`eval`.

```
$ eval $VARIABLE 
```

# xml - 使用 DSIG 为 XML 加时间戳

> ID：11079346
> 
> 赞同：2
> 
> 时间：2012-06-18T08:36:06.850
> 
> 标签：xml, asn.1, timestamping, xml-dsig

我需要给 XML 文件加上时间戳。有什么解决方案吗？我可以制作数字签名并将其放入 XML-DSIG 结构中，但我需要使用时间戳来完成。原则上是相同的过程。签名我自己做，时间戳做 TSA（时间戳权威）。

是的，当然，我可以像制作 clasis 签名一样制作散列。来自 TSA 的回应加入了一些元素（例如 ）。但它似乎并不干净。并且无法使用可用工具（XML-DSIG 工具）进行验证。

谢谢你的建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T13:17:16.783

您是否考虑过使用分离的时间戳，即将时间戳应用于 xml 指纹并将结果存储`TimeStampResponse`在单独的`.tsr`文件中？

如果这对您来说没问题，那么您可以使用例如[easytimestamping.com](http://easytimestamping.com)或[相关 API](https://api.securo.it/api/doc/)将受信任的时间戳应用于您的文件。

然后可以使用任何符合 RFC3161 的软件进行验证，例如 OpenSSL 或来自欧洲认证机构的[在线验证工具。](https://standardva.webnotarius.eu/dvcs-client/)

*免责声明：我参与了easytimestamping.com背后的公司*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-26T08:10:29.857

[XAdES](http://en.wikipedia.org/wiki/XAdES)标准基于 XMLDsig 并使用 (TSA) 时间戳（除其他之外）的结构对其进行了扩展。

查看 XAdES-T 表格。

# jquery - 用jquery替换特定的html？

> ID：11079347
> 
> 赞同：0
> 
> 时间：2012-06-18T08:36:07.297
> 
> 标签：jquery, html, replace

我有一个具有不同级别的巨大复选框列表，我想对其进行样式设置，但由于所有项目都具有相同的类，并且没有 id 或 wordpress 的联系表 7 无法在复选框面板中创建子级别，我认为我可以实现这一点用jQuery。

生成的html是：

```
<span class="wpcf7-list-item-label">--- Checkbox level one</span>
<span class="wpcf7-list-item-label">------ Checkbox level two</span> 
```

我想要实现的是替换

```
<span class="wpcf7-list-item-label">--- 
```

和

```
<span class="wpcf7-list-item-label level-one"> 
```

我试过这段代码

```
 <script>
    $("<span class=\"wpcf7-list-item-label\">---").replaceWith( "<span class=\"wpcf7-list-item-label level-one\">" );
    </script> 
```

但是没有成功，是否可以使用 jquery 来实现？

谢谢你的时间。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-18T08:39:48.557

```
$('span.wpcf7-list-item-label:first').addClass("level-one") 
```

**如果要根据索引向所有跨度添加一个类：**

```
$('span.wpcf7-list-item-label').each(function(index){
    $(this).addClass('level-' + index);
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-18T08:39:14.690

用这个 ：

```
$('.wpcf7-list-item-label').first().addClass('level-one'); 
```

为了检查特定的文本，

```
$(".wpcf7-list-item-label:contains('---')").addClass('level-one'); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-18T08:43:06.560

用这个：

```
$('.wpcf7-list-item-label').first().removeClass("existingclass").addClass("newclass"); 
```

# java - 如何在java中均匀调整JFrame的大小，使其保持方形

> ID：11079348
> 
> 赞同：4
> 
> 时间：2012-06-18T08:36:07.783
> 
> 标签：java, swing, jframe, resize

我需要我`JFrame`有一个平方大小。一开始我的框架具有相同的宽度和高度，即使在调整窗口大小后我也希望保持这种状态。我真的很想知道在`componentResized`方法中写什么。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-18T09:50:08.710

例如，Thihara +1

```
import java.awt.Dimension;
import java.awt.event.ComponentAdapter;
import java.awt.event.ComponentEvent;
import java.util.HashSet;
import java.util.Set;
import javax.swing.JFrame;
import javax.swing.SwingUtilities;

public class MirroredFrame extends JFrame {

    private static final long serialVersionUID = 1L;
    private State state;
    private String name;
    private Set<StateListener> listeners = new HashSet<StateListener>();

    public MirroredFrame(String name) {
        super(name);
        final String frameName = name;
        this.name = frameName;
        state = new State();
        addComponentListener(new ComponentAdapter() {

            @Override
            public void componentResized(ComponentEvent e) {
                state.setSize(getSize(), true);
            }

            @Override
            public void componentMoved(ComponentEvent e) {
                System.out.println("JFrame : " + frameName + ", location on the screen " + getLocation());
            }

            @Override
            public void componentShown(ComponentEvent e) {
                System.out.println("JFrame : " + frameName + " shown ");
            }

            @Override
            public void componentHidden(ComponentEvent e) {
                System.out.println("JFrame : " + frameName + " hidden ");
            }
        });
        setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        setVisible(true);
    }

    private void addListener(StateListener sl) {
        listeners.add(sl);
    }

    public void associateWith(MirroredFrame other) {
        other.addListener(new MirrorStateListener());
    }

    private class State {

        private Dimension size;

        public void setSize(Dimension newSize, boolean fireEvent) {
            if (newSize.equals(size)) {
                return;
            }
            int height = newSize.height;
            int widht = newSize.width;
            if (height > widht) {
                size = new Dimension(height, height);
            } else {
                size = new Dimension(widht, widht);
            }
            MirroredFrame.this.setSize(size);
            if (fireEvent) {
                for (StateListener sl : listeners) {
                    sl.sizeChanged(size);
                }
            }
        }
    }

    private static interface StateListener {

        void sizeChanged(Dimension newSize);
    }

    private class MirrorStateListener implements StateListener {

        @Override
        public void sizeChanged(Dimension newSize) {
            System.out.println("JFrame : " + name + " received and changed sizeChanged Event");
            state.setSize(newSize, false);
        }
    }

    public static void main(String[] args) {
        SwingUtilities.invokeLater(new Runnable() {

            @Override
            public void run() {
                MirroredFrame f1 = new MirroredFrame("f1");
                MirroredFrame f2 = new MirroredFrame("f2");
                f1.associateWith(f2);
                f2.associateWith(f1);
                f1.setSize(300, 300);
                f2.setLocation(600, 10);
            }
        });
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-18T08:46:11.970

Get the width and height of the JFrame after resizing using the `getSize()` method. Then pick one or perform some logical operations to get the size you want and the resize the JFrame to the new size using the JFrame's `setSize(int width,int height)` method. When you give the same value to width and height it will be square!

# android - CDMA 设备上的 Android facebook 应用程序

> ID：11079350
> 
> 赞同：-2
> 
> 时间：2012-06-18T08:36:15.940
> 
> 标签：android, facebook, gsm, cdma

我有一个 android`facebook`应用程序。它在*GSM*设备上运行良好。但在*CDMA*设备上不行。

它会在*GSM*和*CDMA*设备上运行吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T12:42:07.433

手机是 GSM 还是 CDMA 与 facebook 应用程序无关。

facebook 应用程序将能够通过其中任何一个获得数据连接。

因此，您的 facebook 应用程序***应该***在您的 CDMA 手机上运行。

# cakephp - 在 CakePHP 中使用包含

> ID：11079355
> 
> 赞同：1
> 
> 时间：2012-06-18T08:36:35.737
> 
> 标签：cakephp

我有一个看起来像这样的模型：

```
表现
    - 地点
    - 事件
        - 位置（另一个）
        - 一堆其他的东西

```

当我将递归性设置为 2 时，我得到*了*太多数据（“一堆其他东西”）当我使用 contains('Location') 时，我只能在 Performance 下直接获得“Location”模型，而不是在 Event 下......

我如何获得这些数据？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T08:42:27.357

您是否尝试过（假设来自控制器）：

```
$this->Performance->find('all', array(
   'contain' => array('Event' => 'Location')
)); 
```

# flash-cs5 - 添加按钮后如何减小 Flash CS5 swf 文件大小

> ID：11079356
> 
> 赞同：0
> 
> 时间：2012-06-18T08:36:37.560
> 
> 标签：flash-cs5

我在 Flash 上工作不多，但我为客户制作了一个小型横幅广告……它是一个简单的横幅，其中包含 3 张图像和一个按钮，其中包含一些链接到外部活动监视器的操作脚本。

目标文件大小约为 70kb。图像压缩在发布设置中打开。

没有按钮，文件大小很好。当我添加一个带有事件侦听器的基本按钮和大约 5 行代码时，发布的 swf 大小跳到超过 200kb...

我试过删除按钮，它回落到 70kb ......

任何人都知道我可以做些什么来包含一个按钮，同时保持文件大小相当小？

干杯

狗

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T09:38:50.380

好吧，它看起来像是 CS5 中的一个错误...我尝试在 Flash CS6 中打开横幅并执行相同的创建按钮并对其进行操作的过程...发布它现在大约 40kb...

很奇怪。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T12:18:36.050

检查您在 Flash 库中是否有任何分配了 Linkage id 的图像。删除链接 ID 并发布 swf。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-18T09:49:31.267

您是否在按钮中使用文本并嵌入了字体？这真的可以让 swf 膨胀。您可以尝试将文本分开，这样您就不需要嵌入字体（但这会使编辑工作量很大），或者您只嵌入您在按钮中实际键入的字符。

如果这不是问题，请发布您能想到的更多细节，包括代码。

# decimal - 带小数的 VHDL 时钟分频器

> ID：11079358
> 
> 赞同：3
> 
> 时间：2012-06-18T08:36:47.187
> 
> 标签：decimal, vhdl, clock, divider

我正在尝试将 50MHz 时钟降低到 25.175MHz，以便在 VGA 控制器中使用。我已经有一个时钟分频器，但是当当前时钟速度和所需时钟速度的结果分频不是整数时，我很难减慢时钟速度。即 50000000/25175000 ~ 1.98。时钟分频器编译并运行，但如果分频是十进制数，则不输出任何内容。这是我的代码：

```
 LIBRARY IEEE;
    USE  IEEE.STD_LOGIC_1164.ALL;

    ENTITY Clockdiv IS PORT (
        Clkin: IN STD_LOGIC;
        Clk: OUT STD_LOGIC);
    END Clockdiv;

    ARCHITECTURE Behavior OF Clockdiv IS
        CONSTANT max: INTEGER := 50000000/25175000;
        CONSTANT half: INTEGER := max/2;
        SIGNAL count: INTEGER RANGE 0 TO max;
    BEGIN
        PROCESS
        BEGIN
            WAIT UNTIL Clkin'EVENT and Clkin = '1';

            IF count < max THEN
                count <= count + 1;
            ELSE
                count <= 0;
            END IF;

            IF count < half THEN
                Clk <= '0';
            ELSE
                Clk <= '1';
            END IF;
        END PROCESS;
    END Behavior; 
```

我在 google 上搜索，发现使用 REAL 数据类型将允许您使用小数，但是当我将我使用的变量更改为 REAL 时，Quartus 给了我错误：`Error (10414): VHDL Unsupported Feature error at Clockdiv.vhd(12): cannot synthesize non-constant real objects or values`.

然后，如果我将“计数”更改为一种`CONSTANT`类型，我会收到错误：`Error (10477): VHDL error at Clockdiv.vhd(18): name "count" must represent signal`.

有谁知道我怎样才能把时钟减慢到 25.175MHz？另外，有没有人知道如何减慢时钟，以便编译器对得到的除法是十进制值感到满意？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-18T14:43:11.677

一般来说，实数是不可综合的，因此您需要提出一个基于整数的解决方案。

这个比例相当棘手，因为它几乎是 2:1，但并不完全。大多数基于边沿的时钟分频器电路仅在原始时钟的一个边沿上工作，因此您可以分频的最低比率是 2。在这种情况下，您必须在时钟的两个边沿上工作。

一旦你得到了，你需要有一个计数器，它以你的比率的分母递增，它是否超过了分子，然后输出一个时钟边沿。

```
PROCESS
    BEGIN
        WAIT UNTIL Clkin'EVENT;

        IF count < max THEN
            count <= count + DENOMINATOR;
        ELSE
            count <= 0;
        END IF;

        IF count > NOMINATOR THEN
            Clk <= ~Clk;
        END IF;
    END PROCESS; 
```

对于这个比率，我认为您可以表示它的最小方式是 2000/1007。

这样做的问题是你会得到一个基本上是 25MHz 的时钟，但偶尔（每 2000 / 7 次迭代）你会得到一个额外的优势。它不会是 25.175MHz 时钟。如果没有 PLL，就不可能从 50MHz 获得 25.175MHz。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-18T19:27:21.837

我写了很多 VGA 控制器，只使用 25 MHz 时钟从来都不是什么大问题。但是，如果您绝对想靠近，您的 FPGA 可能有某种时钟管理器（我只熟悉 Xilinx 设备），它允许您通过乘法和除法输入时钟来合成输出时钟。

此外，虽然在这种情况下使用派生/门控时钟（您直接在进程中设置值的时钟）可能对您有用，但它可能会导致许多难以调试的问题。更好的解决方案是生成时钟使能，然后在同一（快速）时钟上运行所有内容。

最后一件事，虽然这可能是首选风格的问题，但我通常使用时钟进程语句而不是`WAIT`语句（如下所示，上升沿触发、同步复位和时钟启用）。我发现它更易于阅读和理解，并且不太容易编写不可综合的构造，例如, 或带有多个s 的`wait for 10ns;`语句。`WAIT`

```
process(clk)
begin
    if(rising_edge(clk)) then
        if(sync_reset = '1') then
            --Reset logic
        elsif(clk_enable = '1') then
            --Actual functionality
        end if;
    end if;
end process; 
```

# c# - 使用 C#.Net 将应用程序窗口表单链接到条码打印机 Zebra TLP2844

> ID：11079369
> 
> 赞同：1
> 
> 时间：2012-06-18T08:37:30.260
> 
> 标签：c#, winforms, .net-4.0, zebra-printers, barcode-printing

任何人都可以提供帮助或提供解决方案，在使用 C#.Net 将 Windows 表单应用程序链接到条形码打印机机器 Zebra TLP2844 时最好做什么？有人说必须使用 ZPL 语言对机器进行条码处理，有人说使用将原始数据发送到机器。当我研究使用 ZebraDesigner Pro 作为条形码打印机设计器应用程序时，它可以链接到数据库，并在指定数据库上进行字段选择。数据库可以识别dBase、Access和Excel文件等。由于我们的应用程序使用的是 SQLServer2008R2，因此必须将其转换为 Excel 文件。但是那个软件设计师只能试用30天。

现在我有点困惑应用程序如何从 win 表单生成条形码 ID？任何帮助、解决方案还是我必须创建其他类函数来将 win 表单应用程序链接到 Zebra 条码打印机类型 TLP2844？

提前致谢。

问候， ikadewi

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T18:08:20.090

我一直只是使用 filecopy "C:\printebuffer.txt" \uncprinterpath type 命令将原始数据发送到斑马打印机，以便将原始数据推送到端口。

这是斑马页面的链接，您可以在其中获取手册。 [http://www.zebra.com/us/en/support-downloads.html](http://www.zebra.com/us/en/support-downloads.html) 那里有一些示例标签缓冲区。通常，您可以为您的主标签创建一个“模板”，然后只更改您需要即时更改的数据。希望这可以帮助。

# actionscript-3 - 如何在 as3 中将图像转换为数据 URI？

> ID：11079371
> 
> 赞同：0
> 
> 时间：2012-06-18T08:37:38.153
> 
> 标签：actionscript-3, apache-flex, svg

我正在尝试将图像从 Flex 应用程序导出到 svg。我看到图像的格式是数据 uri 类似这样

> “数据：图像/ GIF; BASE64，R0lGOD lhCwAOAMQfAP //// 7 + / + vj4 Hh4eHd3d / V7 + / Dw8HV1dfLy8ubm5vX19e3t7fr 6 + nl5edra2nZ2dnx8fMHBwYODg / b29np6eujo6JGRkeHh4eTk5LCwsN3d3dfX 13Jycp2dnevr6 //// yH5BAEAAB8ALAAAAAALAA4AAAVq4NFw1DNAX / o9imAsB tKpxKRd1 + YEWUoIiUoiEWEAApIDMLGoRCyWiKThenkwDgeGMiggDLEXQkDoTh CKNLpQDgjeAsY7MHgECgx8YR8oHwNHfwADBACGh4EDA4iGAYAEBAcQIg0Dk gcEIQA7”。

是否可以在as3中将图像转换为上述格式？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T08:54:40.110

实际上，你必须区分。Base64 编码获取字节并计算字符串。您可以使用 Base64Encoder 来完成。你不会得到的是 SVG。SVG 是一种基于 XML 的规范。使用 SVG 时，您会希望获得将由浏览器解释以呈现实际图像的 XML。这不适用于 Base64Encoder。

# ssrs-2008 - 如何设置千位分隔符（空格）和小数分隔符（逗号）并从 ssrs 的数据库字段中获取小数位数？

> ID：11079372
> 
> 赞同：1
> 
> 时间：2012-06-18T08:37:43.397
> 
> 标签：ssrs-2008, locale, reporting-services, numeric, decimal

我正在 MS SQL Report Builder 中准备一份报告。我有数据字段：

```
Value        Decimals
12345.3456   3
3455.34      3 
654677       0
145.4565727  6 
```

我需要根据小数对值进行舍入，并将千位分隔符更改为空格，将小数点更改为逗号（它是语言属性 sv-SE）。报告上的文本框输出必须具有如下值：

```
Value
12 345,346
3 455,34  
654 677    
145,456573 
```

我还没有找到任何方法来设置千位和小数分隔符（语言属性），而是从数据库字段中获取小数位数。有人对如何获得它有建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-05-19T16:04:36.477

尝试这个 ：

```
Format(Sum(Fields!CreditAmountCur.Value),"## ### ##0.000000") 
```

对我来说，我在该点之后使用了 2 个数字：

```
Format(Sum(Fields!CreditAmountCur.Value),"## ### ##0.00") 
```

希望它对你有用！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-17T09:17:04.940

出乎意料的难！您可以将这些表达式用于值：

```
=replace(Format(12345.3456, "## ### ##0.###")   ,".",",")
=replace(Format(3455.34,    "## ### ##0.###")   ,".",",")
=replace(Format(654677,     "## ### ##0.###")   ,".",",")
=replace(Format(145.4565727,"## ### ##0.######"),".",",") 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-18T14:56:11.057

您是否尝试过 FormatCurrency 功能？您可以将参数传递给此函数以指定小数位数。不要对值进行硬编码，而是使用数据库字段。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-18T20:35:29.890

我会在格式属性上做一个表达式。

就像是：

```
="### ###," & StrDup(Fields!Decimals.Value, "#") 
```

# interpolation - 离散线与插值路径

> ID：11079376
> 
> 赞同：1
> 
> 时间：2012-06-18T08:38:07.770
> 
> 标签：interpolation, d3.js

在本文描述的上下文中：[路径转换](http://bost.ocks.org/mike/path/)，我正在从数据馈送中开发一个刻度图。

我喜欢 Mike 在上面的路径转换示例中所做的，他展示了时间轴转换和使用路径对运行线进行插值。

我想从一条简单的模拟条线开始，而不是一条路径，以掌握 D3 的窍门。如果有人可以指导我如何为每个带有转换的新数据输入绘制单独的垂直条，我想我可以完成我的刻度图应用程序。

*   假设输入是`Math.random()`（y1）。
*   假设我们添加`.2`到每个新推送数据点的高度。
*   然后我们`.attr`为`x1,y1, x2,y2+.2`每个做。

我不知道如何正确使用*转换/翻译*。
我看到在 x 轴上运行 Mike 的代码的插值，我也创建了一个`y-axis`转换。我熟悉这个主题，但没有足够的能力来做这个简单的线栏版本。

# c++ - “(void)startGuardBegin;”语句是什么意思？做？

> ID：11079380
> 
> 赞同：7
> 
> 时间：2012-06-18T08:38:43.387
> 
> 标签：c++

> **可能重复：**
> [“(void) new”在 C++ 中是什么意思？](https://stackoverflow.com/questions/1029743/what-does-void-new-mean-in-c)

我不熟悉 C++，也不理解方法签名之后的那一行：

```
int EAN13Reader::decodeMiddle(Ref<BitArray> row,
        int startGuardBegin,
        int startGuardEnd,
        std::string& resultString)
{
    (void)startGuardBegin;
    ...
} 
```

是什么`(void)startGuardBegin;`？方法调用？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-18T08:44:20.070

它告诉编译器该参数未使用，因此不应显示“未使用参数”警告。

虽然诸如 GCC 之类的编译器通常有其他方式`int startGuardBegin __attribute__ ((unused))`（`(void)`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-18T08:45:31.207

它什么也没做。

相反，它向读者和`startGuardBegin`函数中未使用的任何静态分析工具指定这是可以和预期的。

如果函数中未使用参数，静态分析工具将发出警告，因为这表明可能存在错误。如果无法从签名中删除参数（如果它在调试代码中使用，或者是兼容性或未来行为所必需的），则在无效语句中使用参数将防止警告。但是，仅在语句中使用它`startGuardBegin;`会触发另一个警告（因为该值被丢弃），因此将其强制转换以`void`防止这种情况发生。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-18T09:09:58.290

转换`void`为用于抑制未使用的变量和未保存的返回值或表达式的编译器警告。

标准（2003）在 §5.2.9/4 中说，

> 任何表达式都可以显式转换为类型“cv void”。表达式值被**丢弃**。

所以你可以写（以 C++ 风格的方式）：

```
//suppressing unused variable warnings
static_cast<void>(unusedVar);

//suppressing return value warnings
static_cast<void>(fn());

//suppressing unsaved expressions
static_cast<void>(a + b * 10);
static_cast<void>( x &&y || z);      
static_cast<void>( m | n + fn()); 
```

All forms are valid. I usually make it shorter as:

```
//suppressing  expressions
(void)(unusedVar);
(void)(fn());
(void)(x &&y || z); 
```

Its also okay.

# asp.net - 持久的jQuery选项卡选定的项目不起作用

> ID：11079381
> 
> 赞同：1
> 
> 时间：2012-06-18T08:38:45.497
> 
> 标签：asp.net, jquery-ui, tabs

我将 jQuery UI 的 Tabs 插件与 asp.net (webform) 应用程序一起使用。

由于页面中有一些回发，我想保留当前选项卡。我正在尝试使用以下标记代码，但这不起作用：

```
<input type="hidden" name="selectedTab" id="selectedTab" value="<%= Page.Request.Form["selectedTab"] %>" />

<script type="text/javascript">
    $(function () {
        $("#ActionTabs")
            .tabs()
            .bind("tabsselect", function (event, ui) {
                $("#selectedTab").val(ui.index);
            })
            .tabs("select", $("#selectedTab").val());

    });
</script>

<div id="ActionTabs">
    <ul>
         <li><a href="#tab1">Tab1</a></li>
         <li><a href="#tab2">Tab2</a></li>
    </ul>
    <div id="tab1">
    </div>
    <div id="tab2">
    </div> 
</div> 
```

使用开发人员工具，我可以看到我的隐藏 selectedTab 在选择选项卡时设置正确，并且在回发后正确设置，但在页面加载后始终选择第一个选项卡。

我的代码有什么问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T09:15:24.437

好的，我找到了另一种声明标签的方法：

```
<script type="text/javascript">
    $(function () {
        $("#ActionTabs")
            .tabs({
                selected : $("#selectedTab").val(),
                select: function (event, ui) {
                    $("#selectedTab").val(ui.index);
                }
            });

    });
</script> 
```

这一次，它按预期工作。不确定为什么第一个版本不起作用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T08:57:39.143

我认为由于将两个锚标签链接到同一个 tab1 有问题

```
<ul>
     <li><a href="#tab1">Tab1</a></li>
     <li><a href="#tab1">Tab2</a></li>
</ul> 
```

# java - GarbageCollectorMXBean Full GC CollectionCount 和 CollectionTime

> ID：11079382
> 
> 赞同：2
> 
> 时间：2012-06-18T08:38:55.030
> 
> 标签：java, garbage-collection, visualvm

我使用 GarbageCollectorMXBean 来获取 JVM Full GC CollectionCount 和 CollectionTime。但是数据与 jstat 收集的数据不相等（但 VisualVM 的数据与 jstat 相等）。

所以，我查看了 VisualVM 源代码来研究它是如何工作的，并且看到 VisualVM 也可以通过 GarbageCollectorMXBean 来收集 JVM 全 GC 数据。为什么？

我为 java 应用程序添加 gc 日志（部分 JVM 参数是 -XX:+PrintGCDetails -verbose:GC -Xloggc:/home/yubaofu/work/debug/gc.log）。我阅读了 gc 日志，发现完整的 gc CollectionCount 不等于 jstat 显示的数据。这是否意味着 jstat full gc 不仅仅是 full gc ？

visualVm vs jstat
visualVm full gc is 4
jstat is full gc also 4

![在此处输入图像描述](../Images/de2efadff0f7c11d2539e4913dd35a79.png)

jconsole vs jstat
jconsole full gc is 2
jstat full gc is 4

![在此处输入图像描述](../Images/66af5ede785c9c4bea82b54872a7cd14.png)

为什么不相等呢？

gc log vs jstat
gc log full gc is 2
jstat full gc is 4 ![在此处输入图像描述](../Images/6111a93079e9122015f501e3830e414c.png)

我很抱歉我的英语不好，希望你能明白我的意思:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-12T12:14:20.217

看起来您正在比较代表不同事物的数据。

首先，GarbageCollectorMXBean.getCollectionCount 返回给定 GC 的“已发生的收集总数”。这意味着你会得到 Young GC 和 Old GC 的总数，不一定是 Full GC 的数量。特别是如果您使用 CMS。

您正在寻找 CMS-initial-mark，这绝对不是 Full GC。在您的情况下，完整的 GC 将是调用`System.gc()`ParNew Promotion 失败或并发模式失败。否则，您只是在查看 CMS 周期的数量。

最后，我认为 VisualVM 使用 SA 代理来获取更多信息，而 JConsole 仅使用 MX Beans。所以你不会得到相同的数据。

# javascript - 在android中单击按钮时在webview中显示的网页部分内移动？

> ID：11079385
> 
> 赞同：0
> 
> 时间：2012-06-18T08:39:03.997
> 
> 标签：javascript, android, html, android-webview

我正在显示一个网页（html），它使用`webView`. 我的问题是如何在我的应用程序中**单击按钮移动到网页的特定部分。**

有一个 HTML 页面，上面有很多部分，并通过 java 脚本代码中的各种类进行区分。

那么如何调用该类或如何`<a>`在单击按钮时调用 html 页面的标记？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T08:31:24.047

我刚刚找到了使用以下代码提出的问题的答案

```
String baseUrl = "file:///android_asset/abc.html#anchor_tag_name";
WebView wv = (WebView)findViewById(R.id.webview);
wv.loadUrl(baseUrl); 
```

# visual-studio-2010 - 2 个 VS2010 解决方案，2 个类似的 .pro 文件。一种解决方案是无法访问 INCLUDEPATH 中的任何标头

> ID：11079390
> 
> 赞同：1
> 
> 时间：2012-06-18T08:39:14.220
> 
> 标签：visual-studio-2010, qt, opencv, qmake, qt-vs-addin

我有两个 Qt .pro 文件用于编译到 Visual Studio 2010 解决方案。一个编译为 qt library/dll，另一个是应用程序。

库 .pro 文件：

[http://ideone.com/3gll0](http://ideone.com/3gll0)

应用程序 .pro 文件：

[http://ideone.com/gdruV](http://ideone.com/gdruV)

在图书馆的解决方案中，我无法在任何地方执行以下操作：

```
#include "opencv2/imgproc/imgproc.hpp" 
```

或#include "NuiApi.h"

但是，如果我在主应用程序的 main.cpp 或 qpowerpointmod.cpp 文件中这样做，它就可以工作。

所以是的......另外，我对 .pro 文件中令人震惊的代码表示歉意，我今天已经为此苦苦挣扎了好几个小时。

# c++ - 将选项卡添加到 QTabWidget 后 Qt App 崩溃

> ID：11079396
> 
> 赞同：0
> 
> 时间：2012-06-18T08:39:43.460
> 
> 标签：c++, qt, qt4

标题或多或少说明了一切。我创建了一个小部件，将其添加到 QTabWidget ，当我切换到新选项卡时，应用程序崩溃。

preferencestab.h（我要添加的小部件）

```
#ifndef PREFERENCESTAB_H
#define PREFERENCESTAB_H

#include <QWidget>

#include "tab.h"

class PreferencesTab : public QWidget
{
    Q_OBJECT
public:
    explicit PreferencesTab(QWidget *parent = 0);
    ~PreferencesTab();
    int num;

private:

private slots:
};

#endif // PREFERENCESTAB_H 
```

首选项选项卡.cpp

```
#include "preferencestab.h"

#include <QDebug>

PreferencesTab::PreferencesTab(QWidget *parent) : QWidget(parent)
{
}

PreferencesTab::~PreferencesTab()
{

} 
```

tabmanager.cpp （QTabWidget 的子类，我在其中添加新选项卡）

```
...
void TabManager::openPreferences()
{
    PreferencesTab *pref = new PreferencesTab();
    int index = this->addTab(pref, "Edit");

    this->setCurrentIndex(index); // It crashes on this line
} 
```

如果我删除它崩溃的行，它会成功创建新选项卡，但是当我手动切换到它时会崩溃。

这一定是愚蠢的，但我找不到错误。请帮忙

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-18T09:23:57.377

尝试调试您的应用程序。

在 QtCreator 中，您可以通过按 F5（Mac 上的⌘-Y）而不是 Ctrl-R 来启动调试模式。这将启动一个调试器（例如 GDB），它告诉 QtCreator（然后告诉你）发生了什么样的错误。您还可以设置断点，单步执行代码并检查变量值（当然是在错误发生之前）。

另一种选择是使用 qDebug 打印出变量。候选者是`this`指针`pref`和`index`变量；检查它们的值。

也就是说，导致崩溃的问题很可能在`PreferencesTab`课堂之外，甚至可能在课堂之外`TabManager`。执行类方法中的代码并不意味着这是一个“有效”调用（=`this`指针有效）。因此，检查`this`指针始终是跟踪对空指针或无效指针的调用的好主意。

如果`TabManager`是 a `QObject`，即使调试`this`指针也会失败（如果它无效），因为`qDebug() << this`会要求 ，`metaObject()`如果指针无效，这将（很可能）是无效读取`this`。

# qt - 如何在 Qt 子目录项目中设置构建顺序

> ID：11079398
> 
> 赞同：18
> 
> 时间：2012-06-18T08:39:50.523
> 
> 标签：qt, build, build-process, qmake

我有一个包含 5-6 个库和一个可执行文件的项目。可执行文件依赖于库，一些库依赖于其他库。如何指定构建顺序，以便在需要之前构建依赖项？

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2015-04-28T14:46:06.317

**更新：**（2021 年 2 月）

*   2018 年 10 月 - [Qt 决定弃用 Qbs](https://www.qt.io/blog/2018/10/29/deprecation-of-qbs)并重新定向其资源以增加对 CMake 的支持。
*   2020 年 10 月 - [CMake 是 Qt 6 的构建系统](https://www.qt.io/blog/qt-6-build-system)。

请根据此新信息使用以下（旧）答案中的建议。

* * *

虽然这个问题很久以前就已经回答并接受了，但我觉得有必要再补充一个答案；老实说，我认为有更好的答案。

我认为`CONFIG += ordered`有害和坏习惯。这可能是 qmake 开发人员过早引入的东西。并且有[强烈的反对者](http://blog.rburchell.com/2013/10/every-time-you-configordered-kitten-dies.html)使用它。缺点是这些：

1.  它**没有**定义依赖关系，它只是命名一个构建顺序
2.  它缩短了多核构建时间
3.  它阻止 Qt 开发人员[实现有意义的功能](https://bugreports.qt.io/browse/QTCREATORBUG-8349)

因此，我建议更改您的项目文件如下：

```
TEMPLATE = subdirs

SUBDIRS += Utility GraphicModule PackingLib Core GameProto

GameProto.depends = Core
Core.depends = PackingLib
PackingLib.depends = GraphicModule
GraphicModule.depends = Utility 
```

这样就可以清楚地定义依赖关系。您还可以考虑其他更复杂的依赖层次结构，这些依赖层次结构可以通过这种方式实现，而构建顺序绝对不可能。

不幸的是，`qmake`当涉及到具有深层子项目层次结构的大型项目时，它并不是最好的工具。大型项目出现的问题如下：

*   无法为层次结构中较高的子项目定义依赖关系
*   `Run qmake`执行时间极长
*   编译时间长，因为没有正确处理依赖关系并且执行了太多不必要的编译步骤
*   有时`qmake`无法正确计算子项目依赖关系，需要单独编译子项目

解决这些问题主要有两种方法：

*   将您的项目重写为平面层次结构。所有可执行文件、静态库和动态库都应该位于最顶层。仅对绝对无法避免的子项目使用两个或更多级别。（例如，由静态库组成的动态库）这将缩短`qmake`运行时间和编译时间。然而，即使这种方法有时也可能会失败。
*   更改为不同的制作工具，例如`cmake`. 严重地。`Cmake`是一款成熟的产品，来自 Qt Creator 的支持堪比`qmake`.

由于众所周知的问题`qmake`，Qt 公司已经决定引入一个新的 make 工具`QBS`。然而，这个工具的使用并不像第一印象那样简单。`qmake`从到的过渡并不容易`QBS`，尤其是对于更复杂的项目。该`QBS`语言的类 Javascript 语法不易掌握，文档稀缺。

恕我直言，只有两个其他工具可以替换`qmake`：

*   [`CMake`](https://cmake.org/)，众所周知的构建工具。
*   [`meson`](http://mesonbuild.com/)，一个开源的构建系统意味着非常快，更重要的是，尽可能地对用户友好。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-06-18T09:59:45.710

行。我找到了解决方案。只需将命令添加到 CONFIG 并以正确的顺序背诵子目录

```
CONFIG += ordered

SUBDIRS += Utility GraphicModule PackingLib Core GameProto 
```

对我来说，这项工作很好

# xslt - 通过 XSLT 根据条件更改 xml 属性

> ID：11079399
> 
> 赞同：2
> 
> 时间：2012-06-18T08:39:59.247
> 
> 标签：xslt

任何人都可以帮助通过 XSLT 转换我的 xml。我是这个 xslt 的新手，无法让它工作。

这是示例输入 xml 文件：

```
<?xml version="1.0" encoding="UTF-8" standalone="no" ?>
<TCXML xmlns="http://www.tcxml.org/Schemas/TCXMLSchema">
  <BOMLine bl_appearance_path_node="" bl_attachments="#id13 #id15 #id20 #id21 #id22 #id3" bl_bomview="" bl_bomview_rev="" bl_gde_bomview_rev="" bl_item="#id7" bl_real_occurrence="" bl_revision="#id8" elemId="id61">

    <GSIdentity elemId="id2" label="_RnrSUKuM1CaiD"/>

</BOMLine>
 <DrawingSheet creation_date="2012-06-05T09:27:19Z" date_released="2012-06-05T09:25:33Z" ead_paragraph="" elemId="id69" format_used="BINARY" gov_classification="" highest_rev_prop="1" ip_classification="" keep_limit_prop="3" last_mod_date="2012-06-05T09:27:20Z" license_list="" object_desc="" object_name="Sheet 1" owning_organization="">

    <GSIdentity elemId="id24" label="RoL9sTu6BT4jNA"/>

</DrawingSheet>
  <DrawingSheet creation_date="2012-06-05T09:28:44Z" date_released="2012-06-05T09:25:33Z" ead_paragraph="" elemId="id70" format_used="BINARY" gov_classification="" highest_rev_prop="1" ip_classification="" keep_limit_prop="3" last_mod_date="2012-06-05T09:28:45Z" license_list="" object_desc="" object_name="Sheet 1" owning_organization="">

    <GSIdentity elemId="id25" label="RoO9sTvgBT4jNA"/>

</DrawingSheet>
  <DrawingSheet creation_date="2012-06-05T09:29:29Z" date_released="2012-06-05T09:25:33Z" ead_paragraph="" elemId="id71" format_used="BINARY" gov_classification="" highest_rev_prop="1" ip_classification="" keep_limit_prop="3" last_mod_date="2012-06-05T09:29:29Z" license_list="" object_desc="" object_name="Sheet 1" owning_organization="">

    <GSIdentity elemId="id26" label="RoO9sTfVBT4jNA"/>

</DrawingSheet>
 <IMAN_Drawing elemId="id78" owning_site="#id4" primary_object="#id21" secondary_object="#id25" user_data="">

    <GSIdentity elemId="id50" label="R8D9sTvgBT4jNA"/>

</IMAN_Drawing>
  <IMAN_Drawing elemId="id79" owning_site="#id4" primary_object="#id22" secondary_object="#id26" user_data="">

    <GSIdentity elemId="id56" label="R8D9sTfVBT4jNA"/>

</IMAN_Drawing>
  <IMAN_Drawing elemId="id80" owning_site="#id4" primary_object="#id20" secondary_object="#id24" user_data="">

    <GSIdentity elemId="id44" label="R8A9sTu6BT4jNA"/>

</IMAN_Drawing>
<UGPART creation_date="2012-06-05T09:25:30Z" date_released="2012-06-05T09:25:33Z" ead_paragraph="" elemId="id117" format_used="PART" gov_classification="" highest_rev_prop="1" ip_classification="" keep_limit_prop="3" last_mod_date="2012-06-05T09:25:34Z" license_list="" object_desc="dwg3" object_name="dwg3" owning_organization="">

    <GSIdentity elemId="id21" label="RXM9sPifBT4jNA"/>

</UGPART>
  <UGPART creation_date="2012-06-05T09:25:30Z" date_released="2012-06-05T09:25:33Z" ead_paragraph="" elemId="id118" format_used="PART" gov_classification="" highest_rev_prop="1" ip_classification="" keep_limit_prop="3" last_mod_date="2012-06-05T09:25:33Z" license_list="" object_desc="dwg1" object_name="dwg1" owning_organization="">

    <GSIdentity elemId="id20" label="R3K9sPifBT4jNA"/>

</UGPART>
  <UGPART creation_date="2012-06-05T09:25:28Z" date_released="2012-06-05T09:25:33Z" ead_paragraph="" elemId="id119" format_used="PART" gov_classification="" highest_rev_prop="1" ip_classification="" keep_limit_prop="3" last_mod_date="2012-06-05T09:25:34Z" license_list="" object_desc="dwg2" object_name="dwg2" owning_organization="">

    <GSIdentity elemId="id22" label="xuO9sPifBT4jNA"/>

</UGPART>
</TCXML> 
```

在这个 xml 文件中有 3 个 IMAN_Drawing 、3 个图纸和 3 个 UGPART 标签。例如 ，

```
<IMAN_Drawing elemId="id78" owning_site="#id4" primary_object="#id21" secondary_object="#id25" user_data="">

    <GSIdentity elemId="id50" label="R8D9sTvgBT4jNA"/>

</IMAN_Drawing> 
```

所以我想复制UGPART（在这种情况下为primary_object id21）object_name 并附加到DrawingSheet（在这种情况下为secondary_object id25）object_name。所以最终 DrawingSheet 名称将是 UGPART 的 object_name _ DrawingSheet 的 object_name。对于这种情况，DrawingSheet object_name 将更新为 dwg3_Sheet 1

所以最后我想为我的 input.xml 输出 xml，如下所示。

```
<?xml version="1.0" encoding="UTF-8" standalone="no" ?>
<TCXML xmlns="http://www.tcxml.org/Schemas/TCXMLSchema">
  <BOMLine bl_appearance_path_node="" bl_attachments="#id13 #id15 #id20 #id21 #id22 #id3" bl_bomview="" bl_bomview_rev="" bl_gde_bomview_rev="" bl_item="#id7" bl_real_occurrence="" bl_revision="#id8" elemId="id61">

    <GSIdentity elemId="id2" label="_RnrSUKuM1CaiD"/>

</BOMLine>
 <DrawingSheet creation_date="2012-06-05T09:27:19Z" date_released="2012-06-05T09:25:33Z" ead_paragraph="" elemId="id69" format_used="BINARY" gov_classification="" highest_rev_prop="1" ip_classification="" keep_limit_prop="3" last_mod_date="2012-06-05T09:27:20Z" license_list="" object_desc="" object_name="dwg1_Sheet 1" owning_organization="">

    <GSIdentity elemId="id24" label="RoL9sTu6BT4jNA"/>

</DrawingSheet>
  <DrawingSheet creation_date="2012-06-05T09:28:44Z" date_released="2012-06-05T09:25:33Z" ead_paragraph="" elemId="id70" format_used="BINARY" gov_classification="" highest_rev_prop="1" ip_classification="" keep_limit_prop="3" last_mod_date="2012-06-05T09:28:45Z" license_list="" object_desc="" object_name="dwg3_Sheet 1" owning_organization="">

    <GSIdentity elemId="id25" label="RoO9sTvgBT4jNA"/>

</DrawingSheet>
  <DrawingSheet creation_date="2012-06-05T09:29:29Z" date_released="2012-06-05T09:25:33Z" ead_paragraph="" elemId="id71" format_used="BINARY" gov_classification="" highest_rev_prop="1" ip_classification="" keep_limit_prop="3" last_mod_date="2012-06-05T09:29:29Z" license_list="" object_desc="" object_name="dwg2_Sheet 1" owning_organization="">

    <GSIdentity elemId="id26" label="RoO9sTfVBT4jNA"/>

</DrawingSheet>
 <IMAN_Drawing elemId="id78" owning_site="#id4" primary_object="#id21" secondary_object="#id25" user_data="">

    <GSIdentity elemId="id50" label="R8D9sTvgBT4jNA"/>

</IMAN_Drawing>
  <IMAN_Drawing elemId="id79" owning_site="#id4" primary_object="#id22" secondary_object="#id26" user_data="">

    <GSIdentity elemId="id56" label="R8D9sTfVBT4jNA"/>

</IMAN_Drawing>
  <IMAN_Drawing elemId="id80" owning_site="#id4" primary_object="#id20" secondary_object="#id24" user_data="">

    <GSIdentity elemId="id44" label="R8A9sTu6BT4jNA"/>

</IMAN_Drawing>
<UGPART creation_date="2012-06-05T09:25:30Z" date_released="2012-06-05T09:25:33Z" ead_paragraph="" elemId="id117" format_used="PART" gov_classification="" highest_rev_prop="1" ip_classification="" keep_limit_prop="3" last_mod_date="2012-06-05T09:25:34Z" license_list="" object_desc="dwg3" object_name="dwg3" owning_organization="">

    <GSIdentity elemId="id21" label="RXM9sPifBT4jNA"/>

</UGPART>
  <UGPART creation_date="2012-06-05T09:25:30Z" date_released="2012-06-05T09:25:33Z" ead_paragraph="" elemId="id118" format_used="PART" gov_classification="" highest_rev_prop="1" ip_classification="" keep_limit_prop="3" last_mod_date="2012-06-05T09:25:33Z" license_list="" object_desc="dwg1" object_name="dwg1" owning_organization="">

    <GSIdentity elemId="id20" label="R3K9sPifBT4jNA"/>

</UGPART>
  <UGPART creation_date="2012-06-05T09:25:28Z" date_released="2012-06-05T09:25:33Z" ead_paragraph="" elemId="id119" format_used="PART" gov_classification="" highest_rev_prop="1" ip_classification="" keep_limit_prop="3" last_mod_date="2012-06-05T09:25:34Z" license_list="" object_desc="dwg2" object_name="dwg2" owning_organization="">

    <GSIdentity elemId="id22" label="xuO9sPifBT4jNA"/>

</UGPART>
</TCXML> 
```

我正在寻找 xslt 1.0 解决方案。

这是我尝试使用的 xslt（我试图通过参数传递值来更新 UGPART 属性，但它是空值），但不知何故它不起作用。由于我无法更新 UGPART 的属性，因此我没有尝试更新我想要更新的绘图表名称。

```
<?xml version="1.0" encoding="UTF-8" standalone="no" ?>
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform"  xmlns:plm="http://www.tcxml.org/Schemas/TCXMLSchema" version="1.0">
  <xsl:output method="xml" indent="yes" omit-xml-declaration="yes"/>
<xsl:template match="/plm:TCXML/plm:IMAN_Drawing">  
<xsl:copy>
    <xsl:copy-of select="@*" />
    <xsl:for-each select="/plm:TCXML/plm:IMAN_Drawing">
        <xsl:variable name="currentSecObjectId" select="@secondary_object"/>
        <xsl:variable name="RefSecObjectId" select="substring($currentSecObjectId,2)"/>
        <xsl:variable name="currentPrimaryObjectId" select="/plm:TCXML/plm:IMAN_Drawing/@primary_object"/>
        <xsl:variable name="RefPrimaryObjectId" select="substring($currentPrimaryObjectId,2)"/>
        <xsl:call-template name="UGPart">
            <xsl:with-param name="PriId" select="$RefPrimaryObjectId"/>
        </xsl:call-template>
    </xsl:for-each>

    <xsl:apply-templates/>  

</xsl:copy> 
</xsl:template> 
    <xsl:template match="/plm:TCXML/plm:UGPART" name="UGPart">
    <xsl:param name="PriId"/>
    <xsl:copy>
    <xsl:if test="@object_name="'Test'">
        <xsl:attribute name="owning_organization">
            <xsl:value-of select="$PriId"/>
        </xsl:attribute>        
    </xsl:if>
      <xsl:copy-of select="@*[not(name()='owning_organization')]" /> 
    <xsl:apply-templates /> 
    </xsl:copy>

</xsl:template> 
```

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T03:30:05.980

Finnaly followign xslt 为我的问题工作：

```
<?xml version="1.0" encoding="UTF-8" standalone="no" ?>
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform"  xmlns:plm="http://www.tcxml.org/Schemas/TCXMLSchema" version="1.0">
  <xsl:output method="xml" indent="yes" omit-xml-declaration="yes"/>

  <!-- This is general rule to copy every thing that we dont specify condition-->
<xsl:template match="@*|node()">
  <xsl:copy>
    <xsl:apply-templates select="@*|node()"/>
  </xsl:copy>
</xsl:template>

<xsl:template match="plm:IMAN_Drawing">
    <xsl:variable name="Pri_id" select="substring(@primary_object,2)" />
    <xsl:variable name="Sec_id" select="substring(@secondary_object,2)" />
    <xsl:copy>
    <xsl:apply-templates select="@*|node()"/>
    </xsl:copy> 

        <xsl:for-each select="../plm:UGPART[plm:GSIdentity/@elemId=$Pri_id]">
            <xsl:variable name="UGpartName" select="@object_name"/>
            <xsl:copy>
            <xsl:apply-templates select="@*"/>                      
            <xsl:apply-templates select="node()"/>
            </xsl:copy>
            <xsl:call-template name="DrawingSheet">
                <xsl:with-param name="Sec_ID_For_Drawing" select="$Sec_id"/>
                <xsl:with-param name="UGPART_Name" select="$UGpartName"/>   
            </xsl:call-template>
        </xsl:for-each>

</xsl:template>

<xsl:template match="plm:UGPART"/>
<xsl:template match="plm:DrawingSheet"/>
<xsl:template match="plm:DrawingSheet" name ="DrawingSheet">
<xsl:param name="Sec_ID_For_Drawing"/>
<xsl:param name="UGPART_Name"/>
<xsl:for-each select="../plm:DrawingSheet[plm:GSIdentity/@elemId=$Sec_ID_For_Drawing]">
    <xsl:copy>
        <xsl:apply-templates select="@*"/>
        <xsl:variable name="DarwingObjectName" select="@object_name"/>
        <xsl:attribute name="object_name">
            <xsl:value-of select="concat($UGPART_Name,'_',$DarwingObjectName)"/>
        </xsl:attribute>
        <xsl:apply-templates select="node()"/>
    </xsl:copy>
</xsl:for-each>
</xsl:template>

</xsl:stylesheet> 
```

感谢所有帮助过我的人。谢谢肖恩。B杜尔金

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T11:44:32.977

我会使用以下模式，非常轻巧干净：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
    <xsl:output indent="yes"/>

    <!-- identity template to copy input xml as is --> 
    <xsl:template match="node()|@*">
        <xsl:copy>
            <xsl:apply-templates select="node()|@*"/>
        </xsl:copy>
    </xsl:template>

    <!-- specific template to update just DrawingSheet -->
    <xsl:template match="DrawingSheet">

        <!-- get UPGART id from IMAN_Drawing -->
        <!-- get UPGART object_name -->
        <!-- update Drawing Sheet obejct_name -->

    </xsl:template>

</xsl:stylesheet> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-19T05:22:50.063

Parag，恭喜您获得了良好的自我回答！

尽管这可能不会更好，但出于您的兴趣，这里有另一种不同角度的解决方案。在 Empo 的解决方案的基础上，它采用功能视图，提出问题，即作为输入函数表示的输出是什么，而不是过程（for-each、call-template 等）视图。

```
<?xml version="1.0" encoding="UTF-8" standalone="no" ?>
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform"  xmlns:plm="http://www.tcxml.org/Schemas/TCXMLSchema" version="1.0">
<xsl:output method="xml" indent="yes" omit-xml-declaration="yes"/>

<xsl:template match="node()|@*">
 <xsl:copy>
  <xsl:apply-templates select="node()|@*"/>
 </xsl:copy>
</xsl:template>

<xsl:template match="plm:DrawingSheet">
 <xsl:variable name="Sec_Id" select="plm:GSIdentity/@elemId" />
 <xsl:variable name="Pri_id" select="
    substring(
       ../plm:IMAN_Drawing[$Sec_Id=substring(@secondary_object,2)]
       /@primary_object,2)" />
 <xsl:copy>
  <xsl:apply-templates select="@*"/>
   <xsl:attribute name="object_name">
     <xsl:value-of select="concat(
        ../plm:UGPART[plm:GSIdentity/@elemId=$Pri_id]/@object_name,
       '_',
       @object_name)" /> 
   </xsl:attribute>
  <xsl:apply-templates select="node()"/>
 </xsl:copy>  
</xsl:template>

</xsl:stylesheet> 
```

# objective-c - check sqlite column type

> ID：11079407
> 
> 赞同：1
> 
> 时间：2012-06-18T08:40:19.383
> 
> 标签：objective-c, ios, sqlite

I am working on an iOS application that uses a SQLite database.

In the next release of my product, i would like to migrate a table column from `TEXT` to `BLOB`. I plan to do a `DROP TABLE` followed by a `CREATE TABLE` (we can afford to lose the data, it is not an issue here)

My problem is : how can I check simply from Objective-C if a table's column type is `TEXT` or `BLOB` ?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T09:28:07.917

SQLite is "typeless". This means that you can store any kind of data you want in any column of any table, regardless of the declared data type of that column. You can find more info [here.](http://www.sqlite.org/datatypes.html)

But, if you want to get the info about the declared data type of a column, you can do that by using the pragma table_info(table_name).

eg.

```
pragma table_info(Setting); 
```

Then , you can iterate through the returned resultset and check for the data type you want to check.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-18T08:45:54.547

Why do you need this check? You can catch first start after release (use settings for this) and update your table, it will be easier

checking first start after release:

```
NSUserDefaults *prefs=[NSUserDefaults standardUserDefaults];        
BOOL flag=[prefs boolForKey:SETTINGS_ALREDY_RAN];//will be NO if settings hasn't those parameters, you can change it to version number 
```

# html - 表格中的空列重置表格宽度

> ID：11079415
> 
> 赞同：0
> 
> 时间：2012-06-18T08:41:20.397
> 
> 标签：html, css, html-table

我的代码包含一个需要固定宽度的表格。该表基本上有页面浏览链接。这些列是First、Prev、Some page numbers、Next、Last。如果填充了这些列中的每一个，或者即使填充了 (First,Prev) 或 (Next,last) 中的一个，该表在 Chrome 和 Firefox 中都会正确呈现。

但是，如果除页码以外的所有列都是空的，我会得到一小行。

有趣的是，Chrome 检查列出了应有的表格宽度（大约 960 像素；）但 tbody 宽度被重置为 255 像素（我什至没有在我的代码中使用 tbody）。我尝试在每个 table、td、tr 上设置 min-width 和 table-layout 属性。

这是一个工作代码片段

```
<div id="maincontent">
        <table id="events_table_end">
            <tr width="100%">
                <td width=5% class="first"></td> 
                <td width=5% ></td> 
                <td width=80%><a href="/events/1?cri=time&amp;order=desc" class="active">1</a></td>
                <td width=5% ></td>
                <td width=5% class="last"></td>
            </tr>
        </table>
    </div> 
```

相关的 CSS 部分是：

```
#maincontent {width:1024px; margin:0 auto; text-align:left;}

#events_table_end {padding:2px; margin:10px; margin-top:0px; padding-top:0; display: block; width:97%; empty-cells:show;}
#events_table_end tr {width:100%; }
#events_table_end td {background:#3F547F;color:#D5DFF3; font-weight:bold;}
#events_table_end a {color:#D5DFF3; padding-right:10px;}
#events_table_end a:hover {color:white;}
#events_table_end a.active {color:#F4F8FF;  text-decoration:none; pointer-events: none; cursor:text;}

#events_table_end td.first {border-bottom-left-radius:15px; -moz-border-radius-bottomleft: 15px;}
#events_table_end td.last {border-bottom-right-radius:15px; -moz-border-radius-bottomright: 15px;}
a.no_underline {text-decoration:none;}
a.table_link:hover {font-weight:bold; color:#122A5A; } 
```

如果仅将这么多代码复制到新的 HTML 文件中，它会被 chrome 正确显示，但不能被 Firefox 正确显示。

任何输入将不胜感激。

注意：我认为这个问题可以在 jsfiddle [here](http://jsfiddle.net/LdMRC/)上重现。请注意表格宽度如何正确但 tbody 宽度不正确。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T09:05:33.203

`#events_table_end {}`尝试从您的规则中删除以下声明：

```
display: block; 
```

如果要`display`为表格设置 CSS 属性，则正确的值为`table`. 但是您根本不需要设置该`display`属性。

[修改后的小提琴](http://jsfiddle.net/LdMRC/2/)

# iphone - iPhone编程移动线圈等

> ID：11079417
> 
> 赞同：0
> 
> 时间：2012-06-18T08:41:23.983
> 
> 标签：iphone, ios

在我的 iPhone 应用程序中，我想绘制不同的形状，如线条、圆形以及我想要在手指触摸时一一移动这些形状的东西。我可以绘制不同的形状，但不知道如何移动该形状，如线条和圆形。

我已经使用 uiimageview 来绘制。请帮忙 。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T08:45:13.750

创建一个`UIView`用于绘制形状的自定义，实现`drawRect`在其中绘制形状，并实现`touchesBegan`,`touchesMoved`和`touchesEnded`移动相同的，现在每次你想向你的 中添加一个新的绘图时`main view`，创建一个新的实例`DrawingUIView`并将其添加到主视图

每个绘图都会有它的`DrawingUIView`，移动这些形状将像您通常`UIView`使用 touches 事件移动任何形状一样完成

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T09:35:15.123

很难知道你应该移动什么形状。

我建议您阅读 Ole Begemann[关于 CGPath Hit Testing 的博客文章](http://oleb.net/blog/2012/02/cgpath-hit-testing/)。它解释了如何确定应拖动的形状，还包括 GitHub 上的示例项目。

# cocos2d-iphone - 在 CCArray 中触摸特定的 CCSprite

> ID：11079420
> 
> 赞同：0
> 
> 时间：2012-06-18T08:41:33.050
> 
> 标签：cocos2d-iphone

我在编码时遇到问题，使特定精灵在数组中移动....

```
-(void)ccTouchesBegan:(NSSet *)touches withEvent:(UIEvent *)event
{        
    UITouch* myTouch = [touches anyObject];
    CGPoint location = [myTouch locationInView: [myTouch view]];
    location = [[CCDirector sharedDirector]convertToGL:location];
    CCSprite*grade=[grades lastObject];
    [grade runAction:[CCMoveTo actionWithDuration:3 position:location]];

} 
```

数组移动的最后一个对象..

你能帮我更正代码以触摸数组中的特定精灵，并在`ccTouchesMove`方法中对其进行移动吗？

PS我只使用cocos2d，而不是box2d。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T08:46:08.320

```
-(void)ccTouchesBegan:(NSSet *)touches withEvent:(UIEvent *)event
{        
    UITouch* myTouch = [touches anyObject];
    CGPoint location = [myTouch locationInView: [myTouch view]];
    location = [[CCDirector sharedDirector]convertToGL:location];

    for (CCSprite *grade in grades) {
        if (CGRectContainsPoint(grade.boundingBox, location)) {
            [grade runAction:[CCMoveTo actionWithDuration:3 position:location]];
        }
    }   

} 
```

`CGRectContainsPoint`将检查触摸的位置是否在给定的矩形内。所以我所做的是迭代你的精灵数组和位置在其矩形（边界框）内的精灵，而不是移动那个精灵。`if`如果您只想移动第一个触摸的精灵，您可以在语句中添加一个中断。

# algorithm - 如何判断一组值是否符合目标函数

> ID：11079421
> 
> 赞同：1
> 
> 时间：2012-06-18T08:41:34.433
> 
> 标签：algorithm, math

我有从探头获得的电子数据读数。通过查看数据，我必须判断数据是否***正确***。***正确***的意思是数据遵循与给定目标函数相同的模式。例如，X 轴值是时间，Y 轴是张力。

给定的目标函数由正确读数 (x,y) 值列表提供。

我已阅读有关*数值分析*和*函数逼近*的内容，但我想知道我是否走在正确的道路上。任何人都可以对此提供一些启示吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T09:33:00.730

因此，您试图找出的内容称为[拟合优度](http://en.wikipedia.org/wiki/Goodness_of_fit)。它基本上衡量了实际数据和您假设的模型的相关性。

在大多数语言中应该有用于此的工具/库，并且可能在 R 或 Matlab 等统计/数据语言中具有特定的东西。Python 也广泛用于数据分析（[pandas](http://pandas.pydata.org/)、[numpy](http://numpy.scipy.org/)）

此外，还有一个用于统计的 SE 站点：[https ://stats.stackexchange.com/](https://stats.stackexchange.com/)

# linux - 如何构建（获取/下载）time.h 库？

> ID：11079422
> 
> 赞同：2
> 
> 时间：2012-06-18T08:41:34.470
> 
> 标签：linux, build, header-files, time.h

我正在尝试通过 Makefile 在 Linux 上构建一个项目。

我不断收到`cannot find <sys/time.h>`错误。

我四处询问，并被告知我的项目无权访问库文件夹。

因此，我试图通过在我的项目文件夹中本地使用时间库来解决这个问题。我对 Linux 很陌生。所以，如果这听起来很幼稚，请原谅我的问题。

我找到了这个，但我不知道我需要什么文件，以及如何构建库。 [http://sourceware.org/git/?p=glibc.git;a=tree;f=time;h=c950c5d4dd90541e8f3c7e1649fcde4aead989bb;hb=master](http://sourceware.org/git/?p=glibc.git;a=tree;f=time;h=c950c5d4dd90541e8f3c7e1649fcde4aead989bb;hb=master)

*   我在哪里可以找到 time.h 库/包？
*   我如何建立图书馆？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T09:12:08.247

在 Debian 派生的发行版上，`apt-get install libc6-dev`将获得所需的头文件。几乎任何 C 项目都需要它们。在一般情况下，[Debian 软件包搜索](http://packages.debian.org/search?searchon=contents&keywords=%2Fusr%2Finclude%2Fsys%2Ftime.h&mode=path&suite=stable&arch=any)或`apt-file`可以告诉您在哪里可以找到丢失的库等文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T08:59:34.720

首先，尝试更新您的系统。

```
sudo apt-get update 
sudo apt-get install build-essential 
```

这应该确保您拥有所有库、适当的编译器等。

这应该可以理想地解决您的问题。

如果没有，而不是做

```
#include<time.h> 
```

尝试做，

```
#include<sys/time.h> 
```

如果这也不起作用，那么在您编译时，使用“-lrt”标志来解析您的库。

按照列出的顺序执行所有这些操作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-18T09:10:52.257

`time.h`是属于 GNU C 库的头文件。作为系统上的用户，您*应该*具有对头文件的读取权限。

检查头文件是否已安装：

```
find /usr/include -name time.h 
```

如果上述`find`命令没有返回任何内容，则可能是 GNU C 库尚未安装。在这种情况下，您必须让具有 root 权限的人为您安装它（以及所有依赖项）。如果您的系统是基于 Redhat 的，那么您将有兴趣使用`yum`它来安装该库；如果在 Ubuntu 或 Debian 上，你会想要使用`apt`.

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-06-18T08:55:32.310

您可以尝试“man time.h”寻求帮助。

# php - 将 $_SERVER['REQUEST_URI'] 保存为 cookie 时的浮点数后缀

> ID：11079426
> 
> 赞同：2
> 
> 时间：2012-06-18T08:41:50.383
> 
> 标签：php, apache, cookies, uri, setcookie

我正在尝试在 PHP 中做一件简单的事情，并通过保存`$_SERVER['REQUEST_URI']`.

但是，cookie 值始终包含一个浮点数，例如`path/to/file.php?0.449978803506048`. 如果 URI 包含参数，这些参数将被删除并替换为浮点数。

访问页面`path/to/file.php?param=value`：

```
<?php
    $this_page = $_SERVER['REQUEST_URI']; 
    echo $this_page; // returns: path/to/file.php?param=value

    setcookie("last_page", $this_page, time()+3600);

    echo $_COOKIE['last_page']; // returns: path/to/file.php?0.449978803506048
?> 
```

每个页面重新加载的数字都会发生变化，这让我相信它与时间戳有关。是否有 PHP 设置或我需要注意的事项？结果在不同的浏览器中是相同的，我也尝试在保存 cookie 之前将值编码为 base 64，但结果仍然相同。

我通常不会编写太多 PHP，所以它可能是一个非常简单的解决方案，但我找不到它！

在 Ubuntu Server 11.10 (GNU/Linux 3.0.0-16-server x86_64) 和 PHP 版本 5.3.6 的 Apache 2.2.20 上运行。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T09:19:06.843

好吧，我想你误解了 setcookie 的效果，事实上它不会改变 $_COOKIE 变量的**当前**值，所以你的代码的正确版本可以是这样的：

```
<?php
if(isset($_COOKIE['last_page'] )){
        echo  "cookie: ". $_COOKIE['last_page'] .'</br>';   // echo the current val of cookie 
}

$this_page = $_SERVER['REQUEST_URI'];
echo "this val". $this_page ."</br>"; // returns: path/to/file.php?param=value

//setcookie("last_page", $this_page, time()+3600,'/');
setcookie("last_page", $this_page, time()+3600);

?> 
```

小数来自 ajax/javascript 调用（我确定是 99.99%），你可以在 access_log 中看到它，如果你**总是**看到小数，你会在日志中找到一组对：

```
127.0.0.1 - - [18/Jun/2012:11:06:04 +0200]  "GET /index.php?0.1234567784534 HTTP/1.1" "-" 
127.0.0.1 - - [18/Jun/2012:11:06:04 +0200]  "GET /index.php?param=val HTTP/1.1" "-" 
```

编辑

检测请求是否为 ajax 的最佳解决方案（？）：

```
if(isset($_SERVER['HTTP_X_REQUESTED_WITH']) && $_SERVER['HTTP_X_REQUESTED_WITH']==='XMLHttpRequest';){
     // this is an ajax request
} else {
    // set cookie
} 
```

# java - android 4.0 问题上的标签

> ID：11079429
> 
> 赞同：1
> 
> 时间：2012-06-18T08:42:04.643
> 
> 标签：java, android, tabs, android-fragments, android-tabs

我正在尝试在 android 2.2 - 4.0 上使用标签。我扩展[了这个](http://developer.android.com/resources/samples/Support4Demos/src/com/example/android/supportv4/app/FragmentTabs.html)演示：http: [//developer.android.com/resources/samples/Support4Demos/src/com/example/android/supportv4/app/FragmentTabs.html](http://developer.android.com/resources/samples/Support4Demos/src/com/example/android/supportv4/app/FragmentTabs.html)：

```
TabSpec ts = mTabHost.newTabSpec("randomTab");
Intent intent = new Intent();
intent.setClass(this, FragActiv.class);
ts.setContent(intent);
ts.setIndicator("randomTab");
mTabManager.addTab(ts, FragActiv.class, new Bundle()); 
```

但我不知道在*onTabChanged*中添加什么，所有的魔法都发生在演示中。

*我需要做的是：*
我有一个`ListFragment`，当单击一个项目时，它应该在一个单独的屏幕上以*小屏幕/纵向*显示详细信息，或者在*大屏幕/横向*显示一个片段，其中包含详细信息同一个屏幕。我可以使用 Fragments 解决这个问题，还是应该尝试`FragmentActivities`正常工作？

通过以下示例：[example](http://developer.android.com/resources/samples/Support4Demos/src/com/example/android/supportv4/app/FragmentLayoutSupport.html)，我能够实例化一个*FragmentActivity*，但它占据了整个屏幕，而不仅仅是选项卡菜单下的区域。

是否有机会**使用活动（或 FragmentActivities）而不是片段作为选项卡的内容**？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T05:38:46.480

不需要做我想做的事（使用 TabActivity 作为选项卡的内容）。我通过在我的 tabContent 中有两个容器解决了这个问题，一个用于 ListView 片段，一个用于详细信息片段。这是我现在的布局：

```
<LinearLayout
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

    <HorizontalScrollView
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:fillViewport="true"
        android:scrollbars="vertical" >

        <TabWidget
            android:id="@android:id/tabs"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:orientation="horizontal" />
    </HorizontalScrollView>

    <FrameLayout
        android:id="@android:id/tabcontent"
        android:layout_width="0dp"
        android:layout_height="0dp"
        android:layout_weight="0" />

    <LinearLayout
        xmlns:android="http://schemas.android.com/apk/res/android"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:baselineAligned="false"
        android:fadingEdge="none" >

        <FrameLayout
            android:id="@+android:id/realtabcontent"
            android:layout_width="0px"
            android:layout_height="fill_parent"
            android:layout_weight="1" />

        <FrameLayout
            android:id="@+android:id/details_container"
            android:layout_width="0px"
            android:layout_height="fill_parent"
            android:layout_weight="1"
            android:visibility="gone" />
    </LinearLayout>
</LinearLayout> 
```

最初，**details_container**已消失。您可以按以下方式使用它：

```
 ft.replace(R.id.details_container, detailsFragment);
        FrameLayout detailsLayout = (FrameLayout) mActivity.findViewById(R.id.details_container);
        detailsLayout.setVisibility(View.VISIBLE); 
```

# javascript - Ext JS 4.1：网格列中的渲染器参数不起作用

> ID：11079433
> 
> 赞同：0
> 
> 时间：2012-06-18T08:42:33.433
> 
> 标签：javascript, extjs, extjs4, dom-events, extjs4.1

我正在寻找解决 extjs 网格面板问题的技巧。我面临的情况如下：

我有一个由许多列组成的网格面板，这样的网格由日期存储填充。下面我报告网格的数据存储及其相关的数据模型：

```
Ext.define('branch', {
    extend: 'Ext.data.Model',
    fields: [{
        type: 'int',
        name: 'id'
    }, {
        type: 'int',
        name: 'customer_id'
    }, {
        type: 'int',
        name: 'city_id'
    }, {
        type: 'string',
        name: 'address'
    }, {
        type: 'string',
        name: 'phone'
    }, {
        type: 'string',
        name: 'fax'
    }, {
        type: 'string',
        name: 'email'
    }]
});

var branch_store = Ext.create('Ext.data.Store', {
    autoDestroy: true,
    model: 'branch',
    autoLoad: true,
    proxy: {
        type: 'ajax',
        url: 'controller/loader.php?item=branch',
        reader: {
            type: 'json',
            successProperty: 'success',
            root: 'data'
        }
    }
}); 
```

这是网格面板的定义及其列列表：

```
rowHeight: 0.15,
xtype: 'gridpanel',
id: 'branch_grid',
store: branch_store,
height: 400,
title:'Branch list',
columns: [{
    text   : 'id',
width    : 30,
sortable : true,
dataIndex: 'id'
},{
    text   : 'Company',
width  :   200,
sortable : true,
dataIndex: 'customer_id',
renderer: get_company
},{
    text   : 'City',
width    : 100,
sortable : true,
dataIndex: 'city_id'
//renderer: city_from_id
},{
    text   : 'Address',
width    : 100,
sortable : true,
dataIndex: 'address'
},{
text   : 'Phone',
width    : 100,
sortable : true,
dataIndex: 'phone'
},{
text   : 'Fax',
width    : 100,
sortable : true,
dataIndex: 'fax'
},{
text   : 'Email',
width    : 100,
sortable : true,
dataIndex: 'email'
} 
```

好吧，如果我没有为“公司”列使用渲染器，extjs 将显示一个包含整数的列，该整数是客户的 ID。我不喜欢这样，所以我编写了一个名为 get_company 的简单渲染器，它通过知道客户 ID 来获取客户名称。为此，它会扫描客户的数据存储以查找具有传递 id 的记录，当它找到该记录时，它会返回包含客户姓名的名为“公司”的记录字段。这是渲染器的代码：

```
function get_company(val) {
    if(customer_store.count()>0) {
    console.log('Val: '+ val + ', Stuff: ' + customer_store.count());
    company = ' ' + customer_store.getById(val).get('company');
    console.log(typeof company);
    return company;
}
else{
    console.log('customer store is empty');
    return 'test name';
}
} 
```

最后是 customer_store 及其相关数据模型的代码：

```
Ext.define('customer', {
    extend: 'Ext.data.Model',
    fields: [{
        type: 'int',
        name: 'id'
    }, {
        type: 'string',
        name: 'company'
    }, {
        type: 'string',
        name: 'vat'
    }, {
        type: 'string',
        name: 'ssn'
    }, {
        type: 'int',
        name: 'ref_id'
    }]
});

var customer_store = Ext.create('Ext.data.Store', {
    autoDestroy: true,
    model: 'customer',
    autoLoad: true,
    proxy: {
        type: 'ajax',
        url: 'controller/loader.php?item=customer',
        reader: {
            type: 'json',
            successProperty: 'success',
            root: 'data'
        }
    }
}); 
```

好吧，每次我测试这段代码时，我都会获得一个网格面板，其中公司列的每一行都包含“测试名称”，我相信这个问题的原因是渲染器函数在 customer_store 完全加载之前起作用。有谁知道如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T10:32:43.970

解决问题的唯一方法是确保`customer_store`将在`branch_store`.

所以，不要`branch_store`自动加载。而是捕获`afterrender`网格面板的事件，像这样加载存储`customer_store`：

```
customer_store.on('load', function() {
   branch_store.load();
}, this, { single: true });
customer_store.load(); 
```

# php - PHP SDK库api返回空白结果

> ID：11079434
> 
> 赞同：0
> 
> 时间：2012-06-18T08:42:37.043
> 
> 标签：php, facebook, sdk, github

我已经成功安装了域，已经可以通过 Facebook 登录，已经获得了这些参数，

```
$facebook->getUser();
$facebook->getAccessToken(); 
```

但是当api调用此函数时，它此时挂起（返回空白结果）：

```
$userInfo = $facebook->api('/' + $userId); 
```

github php sdk有什么问题吗？

看来我发现了问题。使用某些受限用户时，无法使用该库检索信息，但是当我使用普通用户帐户时完全没有问题。

然而，sdk 仍然必须抛出正确的错误信息。现在谁能告诉他们呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T08:45:32.690

facebook 的服务器端库与域问题无关 - 域用于 javascript sdk

你没有得到用户的原因是因为他不允许你的应用程序 - 使用 javascript sdk`FB.login`将用户连接到你的应用程序

用户`$facebook->getLoginUrl()`重定向用户以获取`signed_request`//`access_token`参数`code`

# iphone - ASIFormDataRequest : 图片发布到 .net 服务

> ID：11079436
> 
> 赞同：3
> 
> 时间：2012-06-18T08:42:41.897
> 
> 标签：iphone, asp.net

我想将图像从 iphone/ipad 发布到 .net 服务。目前我正在使用 ASIFormDataRequest 但我收到错误

> “请求格式无效：multipart/form-data；charset=utf-8；boundary=0xKhTmLbOuNdArY。”

请帮我解决这个错误。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T08:57:27.403

```
-(void)uploadFile{
    NSURL *url = [NSURL URLWithString: photoUploadURLString];

    ASIFormDataRequest *request = [ASIFormDataRequest requestWithURL:url];

    [request setUseKeychainPersistence:YES];
    //if you have your site secured by .htaccess

    NSString *fileName = [NSString stringWithFormat:@"ipodfile%@.jpg",self.fileID];//your image file name
    [request addPostValue:fileName forKey:@"name"];

    // Upload an image
    NSData *imageData = UIImageJPEGRepresentation([UIImage imageName:fileName]) // your image 
    [request setData:imageData withFileName:fileName andContentType:@"image/jpeg" forKey:@"userfile"];

    [request setDelegate:self];
    [request setDidFinishSelector:@selector(uploadRequestFinished:)];
    [request setDidFailSelector:@selector(uploadRequestFailed:)];

    [request startAsynchronous];
}

- (void)uploadRequestFinished:(ASIHTTPRequest *)request{    
NSString *responseString = [request responseString];
    NSLog("Upload response %@", responseString);
}

- (void)uploadRequestFailed:(ASIHTTPRequest *)request{

    NSLog(@" Error - Statistics file upload failed: \"%@\"",[[request error] localizedDescription]); 
 } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T08:54:30.673

Try to set data in your `ASIFormDataRequest` like this

```
NSData *imgData = UIImagePNGRepresentation(img);
[request addData:imgData withFileName:@"FILENAME" andContentType:@"image/jpg" forKey:@"YOUR KEY"]; 
```

Where request is your `ASIFormDataRequest`

Happy coding.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-04T19:20:35.063

我也遇到了同样的问题。。同样的错误。。

但我用一些不同的方法解决了它。

基本上 .Net webservice 期望图像作为`binary`或`byte[]`数组提供。

我找不到将`UIImage`as `byte[]`using发送`ASIFormDataRequest`到服务器的方法。

但是`NSURLRequest`以更好的方式，我们需要比平时多挖一点。

我在使用`Sudzc`iOS 的肥皂框架方面有过很好的经验，这不是开源的，但你可以免费获得它。

你需要做的就是，

1.  你需要 WSDL 链接，你可以得到它，如果 ***http://.....xyz.asmx***是你的基本 URL，那么***http://.....xyz.asmx/wsdl***会给你WSDL，你可以在浏览器中查看。
2.  访问[www.sudzc.com](http://sudzc.com)
3.  粘贴 URL，从 URL 字段下方的下拉列表中选择***Objectivc-C for iOS项目。***如果需要，您可以提供前缀，或者您可以避免这种情况。
4.  点击**生成**

这将为您提供一个包含 iOS 项目的 zip 文件。一旦你打开项目，检查`Generated`你可以看到所有你需要的目录。

# php - 具有 1 级回复的 PHP 评论系统。查询显示问题

> ID：11079449
> 
> 赞同：2
> 
> 时间：2012-06-18T08:43:58.073
> 
> 标签：php, mysql, messaging

我正在尝试创建一个类似于 facebooks 墙的 PHP 评论系统，但每个帖子只有 1 级回复。

我想要这种格式：

```
Post 1

Response 1
Response 2
Response 3

Add comment box

----------

Post 2
Response 1
Response 2
Response 3

Add comment box 
```

但是，我目前的代码会产生以下结果：

```
Post 1
Response 1

Add comment box

Post 1
Response 2

Add comment box
----------------
Post 2
Response 1

Add comment box

---------------

Post 2
Response 1

Add comment box

--------------- 
```

我想循环遍历结果，以便每次循环时，帖子消息都不会与与该帖子相关的行中的下一条评论一起打印。所以它应该循环一次主消息，打印它，然后通过循环在下面发布所有相应的评论。

### 表结构

帖子

*   `p_id`=该帖子的编号
*   `user_id`=他们发布的用户
*   `poster_user_id`= 发帖人
*   `post`

评论

*   `comment_id`=该评论的数量
*   `post_id`=评论相关的帖子编号
*   `commenter_user_id`= 发表评论的人
*   `comment`

### 代码

```
$query = "SELECT posts.p_id, comments.post_id, posts.poster_id,
      posts.user_id, message, `comments.commenter_user_id, comments.comment`
    FROM posts, comments
    WHERE posts.p_id = comments.post_id";
$query_run = mysql_query($query) or die(mysql_error());

while ($query_row = mysql_fetch_assoc($query_run)) {
    $pid = $query_row['p_id'];
    $post_id = $query_row['post_id'];
    $poster_id = $query_row['poster_id'];
    $user_id= $query_row['user_id'];
    $message = $query_row['message'];
    $commenter_user_id = $query_row['commenter_user_id'];
    $comment = $query_row['comment'];

    echo "
      <div id=\"post\">
        Post $pid $post_id Poster: $poster_id  Mentions: $user_id 
        <br><br> $message <br><br> 

        <ul class=\"comment\">
            $commenter_user_id 
            <li> $comment </li>
        </ul>

        <form name=\"message\" method=\"post\" action=\"sendmessage.php\">
        <textarea name=\"message\"></textarea> <br>
        <input type=\"submit\" value=\"Send\" /></form>
      </div>
      <br>";
} 
```

关于如何产生预期结果的任何建议？我知道通过改变我的逻辑可能很容易解决这个问题，但我刚刚开始学习。您对此的帮助将不胜感激！

**更新**

谢谢大家的帮助。我已经合并了您的代码示例的各个方面，并且效果很好。

还有一个问题：

上面提到的每一个都包含一个评论。发表评论后，我希望评论表使用新帖子进行更新。当我发表评论时，如何获取每个特定帖子的 post_id 和 commenter_user_id 变量，以便我可以使用该数据对评论表执行插入查询，如下所示：

```
INSERT INTO `comments`SET
    `post_id` = $post_id
    'commenter_user_id = $_SESSION['commenter_user_id'] " (I was thinking sessions?) 
```

我正在考虑通过将变量通过 url 传递到脚本页面来获取数据：

```
 while ($query_row = mysql_fetch_assoc($query_run)){

// more variable definitions
$post_id = $query_row['post_id']

echo " <form method=\"post\" action=\"add_comment.php?post_id='.$post_id.'>
                <textarea name=\"comment\"></textarea> <br>
                <input type=\"submit\" value=\"Send\" /></form> " 
```

但我尝试将变量传递给其他页面，如下所示：action=\"add_comment.php?post_id='.$post_id.' 但是当我尝试这样做时，我得到了一个未定义的索引：变量。

关于我如何做到这一点的任何想法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-18T09:17:53.970

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-18T09:21:06.153

这就是我期望发生的事情，因为您的 SQL 查询是从两个表中选择的，这是一个内部连接 ​​- 所以您会得到重复的行。

直接在查询窗口中尝试`mysql`查询以查看结果。

我建议存储当前帖子的值，仅在帖子没有更改时输出评论；类似于以下内容：

此外，您没有在表单中记录帖子 ID（作为隐藏变量或在 URL 中），所以我添加了一个隐藏变量，因为没有 post_id 我怀疑这将是您的下一个错误。

```
 $last_post_id = null;

    while ($query_row = mysql_fetch_assoc($query_run)){

       $post_id = $query_row['post_id'];
       if ($last_post_id == $post_id)
       {
?>
                    <ul class=\"comment\">
                    $commenter_user_id 
                    <li> $comment </li>
                </ul>    
<?php
       }
       else
       {
          if ($last_post_id !== null)
          {
?>
                <form name=\"message\" method=\"post\" action=\"sendmessage.php\">
                <textarea name=\"message\"></textarea> <br>
                <input type=\"hidden\" name="\post_id\" value=\"$last_post_id\" />       </form>
                <input type=\"submit\" value=\"Send\" /></form>
<?php
              $last_post_id = $post_id;
          }
?>
           <div id=\"post\">
                Post $pid $post_id Poster: $poster_id  Mentions: $user_id 
                <br><br> $message <br><br> 
                <ul class=\"comment\">
                    $commenter_user_id 
                    <li> $comment </li>
                </ul>
            </div>
<?php
   }
?> 
```

* * *

更新的答案

在`sendmessage.php`（使用我上面的表格，输入类型=隐藏）见下文。您是正确的，您需要使用会话来获取当前用户 ID 以用于发布目的。

我建议使用 POST 方法提交任何导致数据修改的表单。

```
<?php

if (isset($_POST['post_id']))
{
    $post_id = mysql_real_escape_string($_POST['post_id']);
    $user_id = $_SESSION['current_user_id'];
    $sql = "INSERT INTO `comments`SET
            `post_id` = $post_id
            'commenter_user_id = $user_id";

    if (!mysql_query($sql))
        echo "MySQL error during insert ". mysql_error();
}
else
{
    echo "Invalid form posting";
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-18T09:07:57.167

递归呢？它符合您的需求吗？如果是，那么您只需要每条消息的父消息 ID（如果不是响应，则为 NULL）。然后加载所有消息并仅使用 NULL 消息调用函数，同时提供整个消息数组。

# c - #定义VS变量

> ID：11079450
> 
> 赞同：9
> 
> 时间：2012-06-18T08:43:59.057
> 
> 标签：c, variables, c-preprocessor

我不明白有什么区别：

```
#define WIDTH 10 
```

和

```
int width = 10; 
```

使用第一个或第二个有什么好处？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-18T08:47:42.950

嗯，有很大的不同。你可以改变它的值`width`，你可以取它的地址，你可以询问它的大小等等。使用`WIDTH`, 它将被替换为一个常量`10`，所以表达式`++WIDTH`没有任何意义。另一方面，你可以声明一个包含`WIDTH`项目的数组，而你不能声明一个包含`width`项目的数组。

总结一下： 的值`WIDTH`在编译时是已知的，无法更改。编译器不会为`WIDTH`. 相反，`width`是一个*初始*值为 10 的变量，其进一步的值在编译时是未知的；变量从编译器获取内存。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-06-18T08:50:08.380

> **两者有什么区别？**

第一个是**[宏](http://gcc.gnu.org/onlinedocs/cpp/Macros.html)**，第二个是变量声明。

`#define WIDTH 10`是一个**[预处理器指令](http://en.wikipedia.org/wiki/C_preprocessor)**，允许您指定名称（`WIDTH`）及其替换文本（`10`）。预处理器解析源文件，并且每次出现的名称都被其关联的文本替换。编译器实际上根本看不到宏名称，它看到的是替换的文本。

变量声明由编译器本身评估。它告诉编译器声明一个名为`width`and 类型的变量，`int`并用 value 初始化它`10`。
编译器通过它自己的名字知道这个变量`width`。

> **你应该更喜欢哪一个？为什么？**

通常，建议使用编译时常量变量 over `#define`. 所以你的变量声明应该是：

```
const int width = 10; 
```

选择编译时间常数的原因有很多`#define`，即：

***基于范围的机制：***

的范围`#define`仅限于定义它的文件。因此，`#defines`在一个源文件中创建的内容在不同的源文件中**不可**用。简而言之，`#define`s 不尊重作用域。注意`const`变量是可以作用域的。它们遵守所有作用域规则。

* * *

***在编译错误期间避免奇怪的神奇数字：***

如果您使用`#define`的是那些在预编译时被预处理器替换所以如果您在编译期间收到错误，那将是令人困惑的，因为错误消息不会引用宏名称而是值并且它会出现一个突然的值，并且在代码中跟踪它会浪费大量时间。

* * *

***易于调试：***

同样出于＃2中提到的相同原因，而调试`#define`实际上并没有提供任何帮助。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-18T08:45:27.867

`WIDTH`是一个宏，它将被[预处理器](http://gcc.gnu.org/onlinedocs/cpp/index.html)替换为值 (10)，而`width`是一个变量。

当您#define 宏（如此处的 WIDTH）时，预处理器将在程序传递给编译器之前简单地进行*文本替换。*即你`WIDTH`在代码中使用的任何地方，它都会被替换为`10`.

但是当你这样做时`int width=10`，变量是活动的

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-18T08:49:32.653

首先是一个简短的背景：在**编译**之前，对`C`文件进行了**预处理**。预**处理器**检查`#include`和`#define`语句。

在您的情况下，该`#define`语句告诉**预处理器**使用 string 更改`WIDTH`源代码中的每个字符串`10`。当文件在下一步被**编译**`WIDTH`时，实际上每次出现的都是`10`. 现在，两者的区别

```
#define WIDTH 10 
```

和

```
int width = 10; 
```

是第一个可以看作是一个`constant`值，而第二个是一个普通变量，其值可以改变。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-18T08:51:14.870

一个`#define`由预处理器处理，如果`WIDTH`在源代码中找到并将其替换为`10`，它所做的只是基本替换等，另一个`int width = 10;`由编译器处理，这将在查找表中创建条目，生成二进制文件以在堆栈上分配足够的内存，具体取决于其定义的位置，并将值 10 复制到该内存位置。

所以一个只不过是一个常量的标签，另一个是运行时的变量。

您可以使用预处理器来加快执行速度，因为变量需要在堆栈上分配，代价是在运行时不可变。

您通常将预处理器用于不需要在运行时更改的东西，但要小心预处理器可能有点难以调试，因为它们实际上可以在源代码交给编译器之前对其进行操作，从而导致非常微妙的错误，这可能会或可能不会明显检查源代码。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-07-27T06:44:41.040

定义就像一个静态的全局定义范围。它不能作为普通变量被更改或覆盖。

# html - Flotr图表无法显示

> ID：11079453
> 
> 赞同：0
> 
> 时间：2012-06-18T08:44:10.770
> 
> 标签：html, charts, flotr

我是 Flotr javascript 库的新手。当我创建图表并执行时。它显示白页，我的图表无法查看。谁能纠正我哪里出错了，我需要为 flotr 添加哪些 js 文件？

```
<html>
 <head>
  <title>Chart</title>
  <style>
  body {
        margin: 0px;
        padding: 0px;

      }
      #container {
        width : 600px;
        height: 384px;
        margin: 8px auto;
      }
  </style>
 </head>

 <body>
 <div id="container"></div>
  <script type="text/javascript" src="./js/flotr2.min.js"></script>

    <script type="text/javascript">
(function basic() {
var container = document.getElementById('container'),
    var d1 = [
        [0, 3],
        [4, 8],
        [8, 5],
        [9, 13]
    ], graph;

    graph = Flotr.draw(container,[d1],
    {
        xaxis:
        {
            minorTickFreq: 4
        },
        grid: 
        {
            minorVerticalLines: true
        }
    });
})
(document.getElementById("editor-render-0"));

    </script>
 </body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T22:24:50.077

您是否有位于您提供的位置的实际文件？这也是您现在拥有的文件路径：`./js/flotr2.min.js`但是您应该在 js.js 之前使用 2 个句点尝试它。像这样：`../js/flotr2.min.js`

# ruby-on-rails-3 - jquery ajax什么都不返回

> ID：11079455
> 
> 赞同：2
> 
> 时间：2012-06-18T08:44:21.040
> 
> 标签：ruby-on-rails-3, jquery

我**在rails + jquery ajax上使用ruby**

我的功能是让**用户检查新用户注册的可用性。**

```
function checkavailablity(){
    var username = jQuery("#user_email").val();
    var allNodes = 'name=' + username;
    var capture;

    if ((username).length > 0) {

        jQuery('#availability').show().text("Checking...");
        jQuery.ajax({
            url: "/user_available",
            data: allNodes,
            success: function(result) {
                // Call this function on success
        alert(result);
//            showResponseRegisterCheck( result );
//            return result;
        },
        error: function() {
            alert('Error occured');
        }

        });
    } else {
        jQuery('#availability').addClass('show_msg');
        jQuery('#availability').show().text('Please enter a valid email id');
        return false;
    }   
} 
```

==================================================== ==========================

在rails上我的方法是

```
def user_available
    render :nothing => true
    p user_email = params[:name]
    p @user_email = User.where("email = ?",user_email).first
    if @user_email.nil?
      @ww = "yes"
    else
      @ww = "no"
    end
    return @ww

  end 
```

==================================================== ====================

**我的问题是**
在我的 ajax 成功中我没有输出，但
**在我的 rails 方法中我返回的是或否**值。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-18T09:10:26.927

像下面这样的变化怎么样。

```
- render :nothing => true
- return @ww
+ render :text => @ww  #at the last line 
```

# objective-c - 在后台接收 BluetoothManager 通知

> ID：11079457
> 
> 赞同：2
> 
> 时间：2012-06-18T08:44:26.560
> 
> 标签：objective-c, ios, bluetooth, notifications, iphone-privateapi

我在我的应用程序中使用蓝牙管理器私有框架，我想知道当应用程序在后台时如何接收蓝牙管理器通知（例如：在后台接收连接/断开的蓝牙通知）。

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-31T03:36:14.183

利用

```
// global notification explorer
CFNotificationCenterAddObserver(CFNotificationCenterGetLocalCenter(),
    NULL, MyCallBack, NULL, NULL, 
    CFNotificationSuspensionBehaviorDeliverImmediately); 
```

并接收通知：

```
// global notification callback
void MyCallBack (CFNotificationCenterRef center,void *observer,CFStringRef name,const void object,CFDictionaryRef userInfo)
{
    NSLog(@"CallBack:CFN Name:%@ Data:%@", name, userInfo);
} 
```

# html - 我可以使用 Notepad++ 中的快捷方式突出显示整个 html 标记吗？

> ID：11079462
> 
> 赞同：1
> 
> 时间：2012-06-18T08:44:46.840
> 
> 标签：html, selection, notepad++

我知道您可以突出显示整行或一个单词，但我正在寻找一键选择 html 标记。

你知道我该怎么做吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-18T09:29:44.123

试试这个插件：http: [//sourceforge.net/projects/npp-plugins/files/HTMLTag/HTMLTag%20plugin%20v0.3/](http://sourceforge.net/projects/npp-plugins/files/HTMLTag/HTMLTag%20plugin%20v0.3/)

# asp.net-mvc - 带有 WCF 的 ASP.NET MVC 插件

> ID：11079470
> 
> 赞同：0
> 
> 时间：2012-06-18T08:45:29.090
> 
> 标签：asp.net-mvc, asp.net-mvc-3, wcf

我想就这种情况寻求解决方案：

1.  我有 ASP.NET MVC 3 应用程序
2.  我需要为这个应用程序提供插件可用性（客户端请求将发送到服务器并根据 url 路由器到适当的插件，结果返回视图），路由帮助我决定哪个插件由操作名称使用。每个插件都有自己的数据库进行操作。
3.  我需要 wcf 服务，该服务将在 asp.net 应用程序上，并将使用从具体插件挖掘的数据（视图）请求

知道如何处理吗？

# android - Android线程调度/管理

> ID：11079473
> 
> 赞同：0
> 
> 时间：2012-06-18T08:45:38.403
> 
> 标签：android, multithreading, android-activity

我目前有 2 项不同的活动需要一起工作。

我需要`Activity #1`先做一些工作，然后打电话`Activity#2`等待它完成，然后做一些不同的工作，然后暂停并`Activity#2`再次打电话，......等等。

编辑：我不知道我在想什么，但我错过了这个拼出：每当我从 Activity 2 获得一些结果时，我都需要更新 Activity 1 的 UI，所以我决定将大部分代码放在 AsyncTask 中：

```
//class Activity#1: 
    onCreate(){
     // creates UpdateUITask (the AsyncTask), pass its Context as parameter
    }
    onActivityResult()
    {
     // do something with result
    }

// the AsyncTask
class UpdateUITask implements AsyncTask{
    doInBackground(){
     // uses the passed context to call startActivityForResult(Activity#2)
     // this is done multiple times ***
    }
    publishProgress()
    { 
     // update the UI of Activity #1
    }
} 
```

我的问题是我上面用***标记的内容实际上并没有被 startActivityForResult 暂停，而只有 Activity#1 是。因此，AsyncTask 创建了 Activity#2 的多个实例，这在我的情况下是不可取的。有没有办法克服这个问题？

对之前的不便深表歉意。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T09:19:41.483

`activity#2`从`activity#1`使用开始`startActivityForResult()`。完成`activity#2`操作后，您就可以完成该活动。完成后将`activity#2` `onActivityResult()`被`activity#1`调用，您可以执行剩余的操作。

检查以下链接以获取更多信息：http: [//developer.android.com/reference/android/app/Activity.html#StartingActivities](http://developer.android.com/reference/android/app/Activity.html#StartingActivities)

**编辑**

该方法`doInBackground()`在非 UI 线程中运行。`startActivityForResult(Activity#2)`从这个方法调用你会出错。如果您有任何不需要任何用户干预的流程，那么您不需要调用任何活动。只需将非 UI 进程写入`doInBackground()`其中`publishProgress()``Activity #1`

# android - Distributing Android Apps to enterprise (Volume Purchase Program like)

> ID：11079481
> 
> 赞同：5
> 
> 时间：2012-06-18T08:46:12.063
> 
> 标签：android, google-play

I would like to know if there is a kind of Enterprise Program to distribute Apps on Google Play. I know the Volume Purchase Program of Apple to distribute apps to enterprise (you sell a number of licences of your app to an enterprise and their employees will be able to download it quickly without buying it as the company already paid for it).

How to do it with Android apps ? Should we distribute the .apk ourselves to the company by-passing the Google Play ? I don't think so, but I cannot figure out how to do it...

Thanks

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T08:52:52.520

这可能不是获得有关公司服务（例如 Google Play）的答案的最佳位置。如果它不在文档中，很可能它当前不可用（或至少公开可用）。您可能想联系 Google 直接询问。

如果事实证明没有这样的选项，您需要建立自己的分发渠道（电子邮件、从网站下载、在设备上预安装等）和可能的许可方案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-29T02:20:01.187

这是 Google Play 私人频道： http: [//support.google.com/a/bin/answer.py ?hl=en&answer=2494992](http://support.google.com/a/bin/answer.py?hl=en&answer=2494992)

似乎要求接收用户从分销商那里获得他们的谷歌帐户*。*

# asp.net-mvc - asp.net mvc - 添加新模型时出错

> ID：11079482
> 
> 赞同：0
> 
> 时间：2012-06-18T08:46:17.980
> 
> 标签：asp.net-mvc, model

我是 asp.net mvc 的新手。我正在尝试添加新的模型类，但出现错误。经过一些研究后，我**`Database.SetInitializer<STF_SEAL_MANAGEMENT_TEST>( null );`**在 Gobal.asax.cs 中输入了 Application_start，但我收到了另一个错误，说`"The type or namespace name 'STF_SEAL_MANAGEMENT_TEST1' could not be found (are you missing a using directive or an assembly reference?)"`请帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T07:19:15.457

我删除了整个数据库，然后再次重新运行应用程序。它工作正常。

# css - 不明白为什么背景图片看起来不一样？

> ID：11079485
> 
> 赞同：0
> 
> 时间：2012-06-18T08:46:41.393
> 
> 标签：css, jquery-validate

我正在使用 jQuery 验证插件。我有两个图像：标签的第一个背景，当数据有效时，第二个 - 无效。

但是它们看起来不一样，具有相同的 css 属性。

这里是我的麻烦[截图](http://i.imgur.com/JnjUT.png)

这是我在css文件中的代码：

```
 label.error {
color:transparent;
display: inline;  
background: url('../images/not_valid.png') no-repeat;
padding: 10px;
margin-left: 5px;
width: 47px;
height: 36px;
}

label.valid {
background: url('../images/valid.png') no-repeat;
display: inline;  
padding: 10px;
margin-left: 5px;
color:transparent;
width: 47px;
height: 36px;
} 
```

**已编辑：DROPBOX 上的文件**-[链接](https://www.dropbox.com/sh/1ea9k2z6vmsvg58/Pz5X0qRNDv)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T09:26:18.797

您应该使用您最喜欢的 dom 检查器检查这些元素，并确保在您的 css 中的其他地方没有定义其他`.valid`和/或`.error`类，这会影响您的元素的样式。我没有完全理解你的意思

> 使用相同的 CSS 属性，它们看起来不一样

所以我只能认为其他地方还有一些 css 会影响您的一个元素的显示。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T09:28:28.097

好吧，图像似乎被裁剪了。所以问题似乎与`background-position`标签的尺寸或大小有关。

# c# - 应该/我可以将实体框架用于非标准 CRUD 吗？

> ID：11079487
> 
> 赞同：3
> 
> 时间：2012-06-18T08:46:47.857
> 
> 标签：c#, entity-framework, database-design, crud

我正在编写一个带有数据库的应用程序，该数据库具有稍微不寻常的模式。至少我认为这很不寻常，我很少做数据库的事情。

我所有的书都告诉我应该使用实体框架（或其他一些 ORM）来访问数据库，但他们给出的例子总是沼泽标准 CRUD。每个实体一张表，每个对象一行，活动记录等。

我的架构使用不相交的子类型，因此每个实体有多个表，并且具有修订历史记录，因此编辑实际上会创建一个新行，但仅在一个表中（取决于已编辑的字段）

EF 是迎合这种自定义行为还是面向传统模式？我的理解是我创建了一个模式或域对象，数据库操作代码是自动生成的。我可以覆盖默认行为吗？我还能如何告诉 EF 我的自定义行为？

如果 EF 能让我的生活更轻松，我非常愿意学习它，但我不想花很多精力去学习一个我最终会努力让它做我想做的事情的框架。如果是这种情况，我宁愿推出自己的存储库并自己处理 SQL。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-18T09:42:36.940

这个问题太抽象了，无法明确回答。EF 提供了一些高级映射方案，其中可以将更多表映射到单个实体，但它定义了严格的规则来实现这一点。或者，您可以映射数据库视图或自定义 SQL 查询，组合表中的数据以形成实体。

更复杂的是您的第二个要求 - 它通常需要编写您自己的 SQL / 存储过程并将其映射到对表执行的 EFs CUD 操作。此 SQL 代码将包含您的更新规则的一部分，因为 EF 更新整个实体不仅影响记录。如果您使用映射视图或查询，则必须将这些 CUD 操作映射到自定义 SQL 或存储过程，否则您的实体将是只读的。

结论：可以实现你想要的但并不简单，它需要高级的EF知识，你仍然会写一些SQL。

# c# - Serialize XML into pdfConverter object

> ID：11079490
> 
> 赞同：2
> 
> 时间：2012-06-18T08:46:53.637
> 
> 标签：c#

I have a `pdfConverter` object (I added a reference to **EvoHtmlToPdf**). I want to initialize the object with values from XML. I tried to do deserialize but it doesn't work because the `pdfConverter` object has some levels. How can I initialize the object with all levels from the XML file?

# ios - 删除行前的确认

> ID：11079494
> 
> 赞同：4
> 
> 时间：2012-06-18T08:47:09.443
> 
> 标签：ios, uitableview, uialertview

我试图`UIAlertView`在实际从 a 中删除一个单元格之前显示 a`UITableView`

```
NSIndexPath *_tmpIndexPath;

- (void)tableView:(UITableView *)tableView commitEditingStyle:(UITableViewCellEditingStyle)editingStyle forRowAtIndexPath:(NSIndexPath *)indexPath
{
    if(editingStyle == UITableViewCellEditingStyleDelete)
    {
        _tmpIndexPath = indexPath;

         NSLog(@"%d", indexPath.row); // 2
         NSLog(@"%d", _tmpIndexPath.row); // 2

        UIAlertView *alert = [[[UIAlertView alloc] initWithTitle:@"Dete" message:@"Are you sure you want to delete this entry?" delegate:self cancelButtonTitle:@"Cancel" otherButtonTitles:@"Ok", nil] autorelease];
        [alert show];
    }
} 
```

所以我的两个日志都返回了正确的路径。

我有委托 UIAlertView 的观点

```
- (void)alertView:(UIAlertView *)alertView clickedButtonAtIndex:(NSInteger)buttonIndex
{
    NSLog(@"%d", _tmpIndexPath.row);
    if(buttonIndex == 1)
    {
        NSLog(@"%d", _tmpIndexPath.row);
    }
} 
```

现在我无法弄清楚为什么在`clickButtonAtIndex()`尝试登录时出现错误`_tmpIndexPath.row`

```
 *** -[NSIndexPath row]: message sent to deallocated instance 0x12228e00 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-18T08:50:37.990

您将需要保留 indexPath，发生的情况是警报解除时您的 indexPath 已从系统中释放，

像这样

改变

```
_tmpIndexPath = indexPath; 
```

至

```
_tmpIndexPath = [indexPath retain]; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-18T08:57:31.527

你可以尝试这样做

```
 UIAlertView *alert = [[[UIAlertView alloc] initWithTitle:@"Dete" message:@"Are you sure you want to delete this entry?" delegate:self cancelButtonTitle:@"Cancel" otherButtonTitles:@"Ok", nil] autorelease];
[alert setTag:indexPath.row];
        [alert show]; 
```

所以你可以得到价值

```
[alertView tag] 
```

在`clickedButtonAtIndex`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-18T08:58:52.513

承认上面的技术答案，我可以建议这实际上不是必需的。如果您使用常规方法从表格视图中删除项目（编辑按钮并滑动行），那么在流程中添加确认将与人们期望表格的行为方式相矛盾。用户在获得删除功能之前已经必须点击（或滑动），所以他们必须已经非常确定他们想要这样做。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-18T08:54:34.197

`NSIndexPath` is a `NSObject` and you have it autoreleased in your `tableView: commitEditingStyle` method so assigning it to your instance variable: `_tmpIndexPath = indexPath;` it gets deallocated later. What you need to do is: `_tmpIndexPath = [indexPath copy];` but be careful because every time you are responsible to release your `_tmpIndexPath` before setting it again. The cleaner solution is to use properties:

```
@property (nonatomic, copy) NSIndexPath *tmpIndexPath;
...
self.tmpIndexPath = indexPath; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-18T08:52:04.120

你用ARC吗？如果没有尝试 _tmpIndexPath = [indexPath retain]; 并且不要忘记稍后发布它

# mysql - Symfony2 - 学说：模式：创建用户访问被拒绝

> ID：11079499
> 
> 赞同：2
> 
> 时间：2012-06-18T08:47:34.107
> 
> 标签：mysql, symfony, doctrine, localhost

**/app/config/parameters.ini**

```
[parameters]
    database_driver   = pdo_mysql
    database_host     = localhost
    database_port     =
    database_name     = my_dbname
    database_user     = my_user
    database_password = my_password 
```

**Linux 外壳**

```
/var/www/Symfony$ mysql -u my_user -p
Enter password: 
Welcome to the MySQL monitor.  Commands end with ; or \g.
...
mysql> show databases;
+--------------------+
| Database           |
+--------------------+
| information_schema |
| my_dbname          |
| test               |
+--------------------+

mysql> Bye
/var/www/Symfony$ php app/console doctrine:schema:create

[PDOException]                                                               
SQLSTATE[28000] [1045] Access denied for user 'my_user'@'localhost' (using pa  
ssword: YES) 
```

问题的可能原因是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T13:25:36.973

我的密码包含一个`@`引起问题的字符。

# r - 如何将数据类型“因子”转换为 R 中的数据类型“数值”？

> ID：11079503
> 
> 赞同：2
> 
> 时间：2012-06-18T08:47:40.457
> 
> 标签：r, dataframe, type-conversion

> **可能重复：**
> [如何在不丢失信息的情况下将因子转换为整数\数字](https://stackoverflow.com/questions/3418128/how-to-convert-a-factor-to-an-integer-numeric-without-a-loss-of-information)

我想计算（稍后绘制）数组的唯一值：

```
data = c(1,2,3,4,5,2.1,1,2,1,2,1,4,5,7,8,9,6,5,4,3,2,2,1)
uniCount = as.data.frame(table(data))
uniCount$cumsum = cumsum(uniCount$Freq)

str(uniCount)

plot (uniCount$data, uniCount$Freq)
plot (uniCount$data, uniCount$cumsum) 
```

但是，该列的值`data`不是“数字”而是“因子”。对我来说，数据类型 Factor 似乎是字符串的关联数组。当我使用`as.numeric(uniCount$data)`结果时给出“1 2 3 4 5 6 7 8 9 10”

如何将数据类型“Factor”转换为数据类型“numeric”？或者如何防止 R 将我的数值转换为 Facotr？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-18T08:56:38.827

这可能对你有用

```
as.numeric(attr(uniCount$data,"levels")) 
```

或者

```
as.numeric(levels(uniCount$data)) 
```

如果你不想要因素试试

```
data = c(1,2,3,4,5,2.1,1,2,1,2,1,4,5,7,8,9,6,5,4,3,2,2,1)
uniCount = as.data.frame(table(data),stringsAsFactors =F)
uniCount$cumsum = cumsum(uniCount$Freq) 
```

编辑：

谢谢@Carl Witthoft，但`?factor`说这`as.numeric(levels(uniCount$data))[uniCount$data]`是推荐的，比 `as.numeric(as.character(uniCount$data))`“

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T13:03:38.210

该`plyr`包可以使执行此类操作变得更容易，而无需获取字符/因子变量。

```
library(plyr)
d <- data.frame(x=c(1,2,3,4,5,2.1,1,2,1,2,1,4,5,7,8,9,6,5,4,3,2,2,1))
ddply(d, "x", summarize, Freq=length(x)) 
```

# mysql - 将字符串转换为 SQL 日期类型

> ID：11079505
> 
> 赞同：0
> 
> 时间：2012-06-18T08:47:50.657
> 
> 标签：mysql, jsf, date, jdbc

我有一个作为文本字段的开始时间。我需要将我在文本字段中键入的字符串转换为 SQL 日期并存储到数据库中。

默认.xhtml

```
 Start Date 
 <h:inputText id="startdate" value="#{customer.start_date}" 
                size="20" required="true"
                label="startdate" >
            </h:inputText> 
```

CustomerBean.java

```
 formatter = new SimpleDateFormat("dd/MM/yyyy");
      Date startDate = (Date)formatter.parse(CustomerBean.this.getStart_date());
      Date endDate = (Date)formatter.parse(CustomerBean.this.getEnd_date());
      @SuppressWarnings("deprecation")
    java.sql.Date startdate=new java.sql.Date(startDate.getDate());
      @SuppressWarnings("deprecation")
    java.sql.Date enddate=new java.sql.Date(endDate.getDate());
     System.out.println("Today is " +date );
     PreparedStatement ps 
        = con.prepareStatement(sql);
    ps.setDate(1,startdate);
    ps.setDate(2,enddate); 
```

如果我运行这个程序，我会收到以下错误。

```
An Error Occurred:

  java.text.ParseException: Unparseable date: "19/06/2012"
 - Stack Trace

  javax.faces.el.EvaluationException: java.text.ParseException: Unparseable date:    "19/06/2012"
at javax.faces.component.MethodBindingMethodExpressionAdapter.invoke(MethodBindingMethodExpressionAdapter.java:102)
at com.sun.faces.application.ActionListenerImpl.processAction(ActionListenerImpl.java:102)
at javax.faces.component.UICommand.broadcast(UICommand.java:315)
at javax.faces.component.UIViewRoot.broadcastEvents(UIViewRoot.java:794)
at javax.faces.component.UIViewRoot.processApplication(UIViewRoot.java:1259)
at com.sun.faces.lifecycle.InvokeApplicationPhase.execute(InvokeApplicationPhase.java:81)
at com.sun.faces.lifecycle.Phase.doPhase(Phase.java:101)
at com.sun.faces.lifecycle.LifecycleImpl.execute(LifecycleImpl.java:118)
at javax.faces.webapp.FacesServlet.service(FacesServlet.java:593)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:304)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:240)
at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:164)
at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:462)
at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:164)
at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:100)
at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:562)
at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:395)
at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:250)
at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:188)
at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:166)
at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:302)
at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
at java.lang.Thread.run(Thread.java:619) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T12:57:02.100

需要[`java.util.Date`](http://docs.oracle.com/javase/7/docs/api/java/util/Date.html)在模型类中[`java.sql.Date`](http://docs.oracle.com/javase/7/docs/api/java/sql/Date.html)独占使用，在DAO类中独占使用。在视图中，您应该使用在 HTML/HTTP中的表示和模型类中[`<f:convertDateTime>`](http://docs.oracle.com/javaee/6/javaserverfaces/2.1/docs/vdldocs/facelets/f/convertDateTime.html)的表示之间进行转换。`String``java.util.Date`

模型：

```
import java.util.Date;

// ...

private Date startDate;
private Date endDate; 
```

看法：

```
<h:inputText value="#{customer.startDate}">
    <f:convertDateTime pattern="dd/MM/yyyy" />
</h:inputText>
<h:inputText value="#{customer.endDate}">
    <f:convertDateTime pattern="dd/MM/yyyy" />
</h:inputText> 
```

道：

```
import java.sql.Date;

// ...

preparedStatement.setDate(1, new Date(customer.getStartDate().getTime()));
preparedStatement.setDate(2, new Date(customer.getEndDate().getTime())); 
```

# web-services - 跨服务的服务设计和身份验证/授权

> ID：11079508
> 
> 赞同：0
> 
> 时间：2012-06-18T08:48:03.217
> 
> 标签：web-services, api, rest, soa

我正在开发我的第一个基于 Web 的 SOA 应用程序。我对 SOA 非常陌生，并且仍在尝试围绕服务设计的最佳设计原则，特别是在服务应该与另一个对话的方式方面。

我试图弄清楚的当前问题与身份验证和授权有关。假设我有一个简单的用户服务和事件服务，其中事件服务代表日历中的事件。让事件服务调用用户服务来授权请求​​是一般做法吗？或者，在客户端和请求的服务之间存在的系统上实现用户授权会更好吗？该系统本质上只是另一个服务，它检查用户凭据以确保他们可以访问请求的操作（GET events/1 等），如果可以，则将请求发送到服务。该服务还可以充当中央负载平衡器和缓存...我只是喜欢将用户逻辑保留在每个特定服务之外的想法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T08:56:13.257

You can use siteminder as authentication and authorization. Only the client who has valid token can invoke the service. you could also have roles assigned in siteminder.

# symfony - 如何在 Entity 中使用 entityManager？

> ID：11079509
> 
> 赞同：4
> 
> 时间：2012-06-18T08:48:10.643
> 
> 标签：symfony, doctrine-orm, entity, entitymanager

我在实体类中有这个功能，但 getDoctrine 不喜欢......

```
public function getObject()
{
    $em = $this->getDoctrine()->getEntityManager();

    switch($this->objectType)
    {
        case 'video':
            return $em->getRepository('fdj2012AdminBundle:Video')->find($this->objectId);
            break;
        case 'default':
            return false;
            break;
    }
} 
```

如何在我的 Entity 中使用 entityManager？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-21T19:40:01.343

实际上 Entity 不应该知道 EM。如果我需要在我的实体中使用高级逻辑，我会使用事件监听器。当您像服务一样注册侦听器时，您可以在那里传递参数，例如 EM 或容器，并将它们放入侦听器类中。

[Symfony 文档](http://symfony.com/doc/2.0/cookbook/doctrine/event_listeners_subscribers.html)

但我知道在 Entity 类中获取 EM 并不是很好的方法。通过在实体方法中获取全局变量内核。

```
global $kernel;
if ( 'AppCache' == get_class($kernel) )
{
   $kernel = $kernel->getKernel();
}
$em = $kernel->getContainer()->get( 'doctrine.orm.entity_manager' ); 
```

为我感到羞耻:(

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2015-09-21T09:09:47.200

在 services.yml 添加这个

```
access_manager:
  class: AppBundle\Services\EntityManager
  arguments: [ @service_container ] 
```

在经理-

```
private $_container;

public function __construct(ContainerInterface $container)
{
    $this->_container = $container;
} 
```

访问管理器-

```
 $entity2Manager = $this->_container->get('entity2_manager'); 
```

# c# - 如何识别我的服务的客户？

> ID：11079510
> 
> 赞同：1
> 
> 时间：2012-06-18T08:48:13.280
> 
> 标签：c#, .net, wcf, ssl, wcf-security

我想创建一个新的 WCF 服务和客户端。2 方将使用 2 路 SSL 进行通信，以相互信任。

我的问题是，在服务器端，我如何确定谁是与之对抗的客户端。最好的办法是获得客户端的证书（在 SSL 的身份验证阶段发送）。

我需要此证书才能根据它的身份授予此客户端权限。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T08:51:48.723

采用

```
System.ServiceModel.ServiceSecurityContext.Current 
```

检查其属性：

*   授权策略
*   是匿名的
*   主要身份
*   Windows 身份

# c# - 如何将 Fluent NHibernate 映射转换为 NHibernate 内置基于代码的映射

> ID：11079514
> 
> 赞同：1
> 
> 时间：2012-06-18T08:48:32.153
> 
> 标签：c#, nhibernate, nhibernate-mapping

我有两个使用 Fluent NHibernate 映射的示例类。Fluent NHibernate 映射已被注释，我正在尝试进行基于代码的映射，但仍然出现 ArgumentNullException "Value cannot be null."。如何使它正确？

```
//Fluent NHIbernate mapping for table LocalizationEntry
//public class LocalizationEntryMapping : ClassMap<LocalizationEntry>
//{
//    public LocalizationEntryMapping()
//    {
//        Cache.ReadWrite();
//        CompositeId()
//            .ComponentCompositeIdentifier(x => x.Id)
//            .KeyProperty(x => x.Id.Culture)
//            .KeyProperty(x => x.Id.EntityId)
//            .KeyProperty(x => x.Id.Property)
//            .KeyProperty(x => x.Id.Type);
//        Map(x => x.Message);
//    }
//}
public class LocalizationEntryId
{
    public virtual string Culture { get; set; }
    public virtual string Type { get; set; }
    public virtual string Property { get; set; }
    public virtual string EntityId { get; set; }

    public override bool Equals(object obj)
    {
        if (obj != null)
        {
            LocalizationEntryId other = obj as LocalizationEntryId;
            if (other != null)
            {
                return this.Type      == other.Type &&
                        this.Property == other.Property &&
                        this.EntityId == other.EntityId &&
                        this.Culture  == other.Culture;
            }
        }
        return false;
    }

    public override int GetHashCode()
    {
        return base.GetHashCode();
    }
}

public class LocalizationEntry : IDomainMapper
{
    public virtual LocalizationEntryId Id { get; set; }
    public virtual string Message { get; set; }

    public virtual void Map(ModelMapper mapper)
    {
        mapper.Class<LocalizationEntry>(m =>
        {                
            m.ComposedId( t =>
            {
                t.Property(g => g.Id.Culture, c =>
                {
                    c.NotNullable(true);
                    c.Length(10);
                });
                t.Property(g => g.Id.EntityId, c =>
                {
                    c.NotNullable(true);
                });
                t.Property(g => g.Id.Property, c =>
                {
                    c.NotNullable(true);
                    c.Length(100);
                });
                t.Property(g => g.Id.Type, c =>
                {
                    c.NotNullable(true);
                    c.Length(100);
                });
            });

            m.Property(t => t.Message, c =>
            {
                c.NotNullable(true);
                c.Length(400);
            });
        });
    }
} 
```

/////////// 编辑 /////////////// 我已经找到了解决方案。映射应该以这种方式完成：

```
public virtual void Map(ModelMapper mapper)
        {
            mapper.Class<LocalizationEntry>(m =>
            {
                m.ComponentAsId(x => x.Id, n =>
                {
                    n.Property(x => x.Culture);
                    n.Property(x => x.EntityId);
                    n.Property(x => x.Property);
                    n.Property(x => x.Type);
                });

                m.Property(t => t.Message, c =>
                {
                    c.NotNullable(true);
                    c.Length(400);
                });
            });
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T07:43:01.737

我已经找到了解决方案。映射应该以这种方式完成：

```
public virtual void Map(ModelMapper mapper)
    {
        mapper.Class<LocalizationEntry>(m =>
        {
            m.ComponentAsId(x => x.Id, n =>
            {
                n.Property(x => x.Culture);
                n.Property(x => x.EntityId);
                n.Property(x => x.Property);
                n.Property(x => x.Type);
            });

            m.Property(t => t.Message, c =>
            {
                c.NotNullable(true);
                c.Length(400);
            });
        });
    } 
```

# ruby-on-rails - 如何根据 rails 3.2 中的提交值决定我将执行哪些验证？

> ID：11079517
> 
> 赞同：0
> 
> 时间：2012-06-18T08:48:53.417
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我的环境

```
Rails 3.2.1
ruby 1.9.3p194 (2012-04-20 revision 35410) [x86_64-darwin11.4.0] 
```

我想根据提交值更改验证方法。

例如，在以下视图中，当推送“only_foo”时，我只想检查“foo”的验证，但是当推送“only_bar”时，我只想检查“bar”的验证。

```
<%= from_for(@user, :url => "/hoge/") %>
  <%= f.text_field 'foo' %>
  <%= f.text_field 'bar' %>
  <%= f.submit 'only_foo' %>
  <%= f.submit 'only_bar' %>
<% end %> 
```

在用户模型中，我想在 validate 方法中获取提交值。

```
validate :foo, :presence => true, :if => :only_foo?
validate :bar, :presence => true, :if => :only_bar?

def only_foo?
  # I want to get the commit value, like this.
  commit == 'only_foo'
end

def only_bar?
  # I want to get the commit value, like this.
  commit == 'only_bar'
end 
```

还是有更好的做法？

提前谢谢了。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-18T09:03:18.127

在定义提交按钮时，您可以将名称与它们相关联

```
<%= f.submit 'only_foo', name: 'foo' %>
<%= f.submit 'only_bar', name: 'bar' %> 
```

在您的控制器操作中，`params[:commit]`将包含与提交关联的名称。

您也许可以将其作为虚拟属性（即名称提交）分配给 User 的实例。即在类模型中有类似的东西`attr_accessor :commit`

另外，不确定它是否有帮助，但您可以将其稍微重构为

**更新**

```
validates :foo, :presence => true, if: ->(u) { u.commit == 'foo'}
validates :bar, :presence => true, if: ->(u) { u.commit == 'bar'} 
```

让我知道这是否有帮助或是否需要进一步阐述

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T09:06:53.367

您可以根据您希望的任何条件，在 .save 之前运行一个方法来检查您想要检查的内容。

# php - 赋值：将参数传递给函数

> ID：11079526
> 
> 赞同：0
> 
> 时间：2012-06-18T08:49:38.747
> 
> 标签：php, smarty

有`php`代码：

```
function getChildren($parent_id = 0)
{
....
return $SomeChildrenArray;
} 
```

和 Smarty 分配`$smarty->assign('children', getChildren($id));`

如何编写 smarty 表达式以将一些值传递给函数？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T09:31:42.033

Smarty 可以通过其插件 API 进行扩展。有关介绍，请参见[registerPlugin()](http://www.smarty.net/docs/en/api.register.plugin.tpl)。

```
$smarty->registerPlugin('function', 'children', function($params, $template) {
  return "some string:" . $params['foobar'];
}); 
```

和

```
{children foobar="hello world"} 
```

会输出

```
some string:hello world 
```

请注意，插件函数必须返回一个字符串。

* * *

从 Smarty3 开始，您可以从模板中调用和分配任意函数：

```
{$children = getChildren(3)} 
```

这样你就可以调用任何函数并返回你想要的任何值/类型。有关如何控制可以调用哪些函数的详细信息， 请参阅[Smarty_Security ……</p>](http://www.smarty.net/docs/en/advanced.features.tpl#advanced.features.security)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T14:27:32.227

哦对不起！我的帖子错了=）请试试这个

.php 文件

```
$smarty->registerPlugin("function","my_supper_closure_function", "my_supper_closure_function");
function my_supper_closure_function($params, $smarty){
$SomeChildrenArray=array($params["parent_id"]);
return print_r($SomeChildrenArray,true);
}

$smarty->display('index.tpl'); 
```

文件

```
{my_supper_closure_function parent_id=2} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-18T09:18:39.420

PHP 文件：

```
$smarty->assign('children', function($parent_id = 0) {
    ....
    return $SomeChildrenArray;
}); 
```

parent_id=2 的 tpl 文件

`{children p1=2}`

# proof - 证明 - Coq - 我需要归纳吗？

> ID：11079527
> 
> 赞同：1
> 
> 时间：2012-06-18T08:49:39.610
> 
> 标签：proof, coq

我有一个场景，我想证明一个引理，包括许多字符串和列表变量。可能，它需要“归纳”，但任何人都可以帮助我证明下面给出的引理。如果需要其余代码，我也可以提供。

```
Definition DLVRI (IA IT : string) 
                 (FA ICL FCL IUL FUL FTL : strlist) : bool :=
match (TestA IA FA),
      (TestC ICL FCL),
      (TestD IT IUL FUL FTL) with 
 | true, true, true => true
 |  _  , _  , _    => false
end.            

(**
Lemma TestDL : forall (IA IT : string), 
               forall (FA ICL FCL IUL FUL FTL : strlist),
              (TestA IA FA) = true /\ 
              (TestC ICL FCL) = true /\
              (TestD IT IUL FUL FTL) = true.
Proof.
*)
   (*  OR *)

Lemma TestDL : forall (IA IT : string), 
               forall (FA ICL FCL IUL FUL FTL : strlist),
               (TestA IA FA) = true /\ 
               (TestC ICL FCL) = true /\
               (TestD IT IUL FUL FTL) = true 
               ->   DLVRI IA IT FA ICL FCL IUL FUL FTL = true. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T12:19:58.187

这是一个片段，展示了如何解决类似的目标。

```
Require Import String.

Parameter TestA: string -> list string -> bool.
Parameter TestC: list string -> list string -> bool.
Parameter TestD: string -> list string -> list string -> list string -> bool.

Definition DLVRI (IA IT : string)
  (FA ICL FCL IUL FUL FTL : list string) : bool :=
  match (TestA IA FA), (TestC ICL FCL), (TestD IT IUL FUL FTL) with
  | true, true, true => true
  |  _  , _  , _    => false
end.

Lemma TestDL:
  forall
    (IA IT : string)
    (FA ICL FCL IUL FUL FTL : list string),
    TestA IA FA = true ->
    TestC ICL FCL = true ->
    TestD IT IUL FUL FTL = true ->
    DLVRI IA IT FA ICL FCL IUL FUL FTL = true.
Proof.
  intros ???????? TA TC TD. unfold DLVRI. rewrite TA, TC, TD. reflexivity.
Qed. 
```

这是一个非常简单的证明：只需展开 DLVRI 的定义，并用假设重写。

没有，我用`(TestA IA FA) = true /\ (TestC ICL FCL) = true /\ (TestD IT IUL FUL FTL) = true`三个假设代替了假设。如果您不想这样做，那么证明变为：

```
intros ???????? HYP. destruct HYP as [TA [TC TD]]. unfold DLVRI. rewrite TA, TC, TD. reflexivity. 
```

然而，像我一样分开假设可能是更好的风格，除非你通常操纵这样的连词。否则，连词会妨碍证明，您总是必须破坏/构造它们。

* * *

编辑：由于我没有说清楚，因此您不需要对这个证明进行归纳。例如，如果您声明需要对字符串列表的形状进行递归案例分析的目标，则需要使用归纳法。

# php - 一些谷歌链接突然出现

> ID：11079528
> 
> 赞同：0
> 
> 时间：2012-06-18T08:49:40.890
> 
> 标签：php, wordpress

我正在接手一个由其他开发人员完成的 Wordpress 项目，并通过它我意识到他已经调整了一些预制主题并编辑了它的许多区域。

它工作正常，但是主页上出现了一些标签，并在 IE8 中弄乱了网站结构。这些链接看起来很简单，像这样：在 Chrome 的 Inspect Element 或 Firebug 中，但是当我加载源代码时，它们看起来像这样：

```
<a href="http://www.google.com" target="_blank" rel="dofollow"> 
```

我尝试一次或一个一个地删除所有正在加载的脚本，但它仍然存在。

这是网站，所以如果你知道为什么会这样，那就太棒了。

[http://basicallyfood.implementek.net/demo/](http://basicallyfood.implementek.net/demo/)

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T11:53:38.700

我猜 google.com 链接只是占位符，开发人员忘记了它们......只需查看模板的源代码，如果找不到，请进行 grep 搜索：

```
grep -lir "google.com" * 
```

如果找不到任何东西，请在数据库中搜索字符串，尤其是在 wp_options

# mysql - SQL Join 相同的列，不同的表，不同的值

> ID：11079529
> 
> 赞同：1
> 
> 时间：2012-06-18T08:49:43.167
> 
> 标签：mysql, sql, join, inner-join

我有几张我想加入的桌子。

我只是不知道如何做我需要的事情，这有点难以解释，所以我将向您展示到目前为止的查询：

```
SELECT  exp_channel_data.field_id_102,
        exp_channel_data.field_id_104,
        exp_channel_data.field_id_126,
        exp_channels.deft_status
FROM exp_channel_data
  INNER JOIN exp_channels
    ON exp_channels.channel_id = exp_channel_data.channel_id
  INNER JOIN exp_channel_titles
    ON exp_channels.channel_id = exp_channel_titles.channel_id
WHERE exp_channels.channel_id = 18
AND exp_channel_titles.channel_id = 19 
```

不起作用的位是 AND exp_channel_titles.channel_id = 19

问题是我得到了一个 0 结果集。然而我知道这两列都有数据。尽管它们是完全独立的数据集。

> exp_channels

包含所有数据，如日期、时间、价格等

> exp_channel_titles

包含所有标题信息

但我需要将两者结合在一起，以便获得以下结果集：

“职称、日期、教师、时间”等

所以我只是想知道是否有人对如何做到这一点有解决方案？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T08:53:49.733

因为您使用的是内部连接，所以`channel_id`一行的所有内容都应该相同。

你的意思是`OR`？

```
SELECT  exp_channel_data.field_id_102,
        exp_channel_data.field_id_104,
        exp_channel_data.field_id_126,
        exp_channels.deft_status
FROM exp_channel_data
  INNER JOIN exp_channels
    ON exp_channels.channel_id = exp_channel_data.channel_id
  INNER JOIN exp_channel_titles
    ON exp_channels.channel_id = exp_channel_titles.channel_id
WHERE exp_channels.channel_id = 18
OR exp_channel_titles.channel_id = 19 
```

或者你可以使用`IN`.

```
WHERE exp_channels.channel_id IN (18, 19) 
```

# html - 抖动设备jquery-mobile后过渡导致闪烁

> ID：11079531
> 
> 赞同：0
> 
> 时间：2012-06-18T08:49:49.237
> 
> 标签：html, ios5, jquery-mobile, uiwebview

我正在使用 iOs 应用程序，有一个带有 jquery-Mobile 的 Webview，当设备摇晃时会出现问题。页面转换之间看起来眨眼。如果我不晃动设备，则不会出现闪烁。

在横向模式下不会出现闪烁，仅在纵向模式下。

我的元数据：

```
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=0, minimum-scale=1.0, maximum-scale=1.0"> <meta name="apple-mobile-web-app-capable" content="yes"> 
```

我试过：

```
-webkit-visibility:hidden 
```

但这并不能解决我的问题...

设备：iPad iO5。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T09:25:14.467

如果我正确理解了这个问题：当您摇动设备时，Webview 中的页面将使用 jQuery mobile 转换为新页面，并且在转换屏幕闪烁/闪烁时，然后就可以了。

这可能是使用`-webkit-transition`. 您可能只需要强制硬件加速。希望您能够使用`-webkit-transform: translate3d(0,0,0);`

将该行放入`-webkit-transition`父元素上带有 or 的元素的 CSS 规则中。

或者，闪烁的原因有时可能是 CSS 将元素推离屏幕。例如，`text-indent: -9999px;`或子元素上的负边距。如果删除这些修复它，你可以这样做，它是一个比强制硬件加速更好的解决方案。

希望有帮助:)

# sql-server-2008 - 值 8.95 的 SQL 舍入函数错误

> ID：11079537
> 
> 赞同：3
> 
> 时间：2012-06-18T08:50:28.567
> 
> 标签：sql-server-2008, rounding

在 SQL Server 2008 中：

```
declare @Value float
declare @result float 

set @Value=7.95
select @result=round(@Value,1)
print @result /*Prints 8*/

set @Value=8.95
select @result=round(@Value,1)
print @result /*Prints 8.9*/ 
```

对于 8.95，得到的结果是 8.9，但是如果我把值设为 7.95，则轮函数的结果是 8。

为什么值 8.95 得到 8.9 而不是 9？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T10:56:22.233

浮点（REAL 和 FLOAT）数据是近似值。十进制（数字）是准确的：[msdn.microsoft.com/en-us/library/ms187912](http://msdn.microsoft.com/en-us/library/ms187912%28v=sql.105%29.aspx) (v=sql.105).aspx 这可能是这种看似不一致的行为的原因。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-18T09:00:34.937

对于 8.975，它只给出 9。你应该改用这个， `@result=round(@value,1,1)`

# javascript - Ajax 密集型页面：重用同一个 XMLHttpRequest 对象还是每次都创建一个新对象？

> ID：11079543
> 
> 赞同：6
> 
> 时间：2012-06-18T08:50:47.617
> 
> 标签：javascript, ajax, xmlhttprequest, instance, reusability

我正在开发某种在线多用户编辑器/合作界面，它将在一个页面的生命周期内执行很多（如数千个）ajax 请求。

什么是最好的：（在稳定性、兼容性、避免麻烦方面的“最佳”）

1.  创建一个 XMLHttpRequest 对象并为每个 HTTP 请求重用它

2.  为每个 HTTP 请求创建一个新的 XMLHttpRequest 对象

3.  管理 XMLHttpRequest 对象的动态“池”，在启动 HTTP 请求且没有现有对象可用时创建一个新对象，并在上次请求成功完成时将先前创建的对象标记为“可用”

我认为 1 不是一个选项，因为某些请求可能会失败，我可能会在前一个请求尚未完成时发起新请求，等等。

至于 2，我猜这是内存泄漏，或者可能导致疯狂的内存/资源使用。或者我可以在请求完成时以某种方式关闭或删除对象吗？（在哪里/如何？）或者 JS 垃圾收集器本身是否妥善处理了这个问题？

以前从未尝试过 3，但感觉就像两全其美。或者这样的方法是不必要的，还是我仍然错过了潜在的问题？究竟什么时候可以假设请求完成（因此，该对象可用于新请求），是在接收 readyState 4 和 http status 200 时？（即我能确定在那之后不会再有更新或回调吗？）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-18T08:52:42.327

需要时创建一个新的。一旦不再需要旧的，GC 将处理它们。

但是，对于像协作编辑器这样的东西，您可能需要考虑使用 WebSockets 而不是一直发送请求。一个小的 HTTP 请求的开销是巨大的，而 WebSocket 连接几乎没有开销。

# jquery - jquery手机导航问题

> ID：11079554
> 
> 赞同：0
> 
> 时间：2012-06-18T08:51:46.943
> 
> 标签：jquery, jquery-mobile, navigation

我在 jquery 移动应用程序中使用 simpledialog。在正常浏览器宽度下运行时它工作正常。但是，当我将屏幕宽度减小到小于 250 像素（apprx。）（屏幕宽度匹配移动设备）时，URL 开始在当前 URL 中附加 #&ui-state=dialog。问题也与重定向有关。我的一个按钮链接到其他页面。当我单击该按钮时，它会重定向到指定页面并返回当前页面。但如果我再次这样做，就不会有任何问题。谁能帮我解决这个问题？

我的简单对话框代码如下：

```
$('#create_invoice').append('<div id="temp_div_popup" style="width:80px;position:absolute;top:0px;left:0px;"></div>');
$('#temp_div_popup').simpledialog({
    'buttons':{
        'Edit':{
            click:function () {
                operation = 'edit_exist';
                if (type == 'item') {
                    $.mobile.changePage('add_item.html',{
                        transition : 'none',
                        allowSamePageTransition : true
                    });
                }
                else if (type == 'task') {
                    $.mobile.changePage('add_task.html',{
                        transition : 'none',
                        allowSamePageTransition : true
                    });
                }
                $('#temp_div_popup').remove();
            }
        },
        'Delete':{
            click:function () {
                deleteItemOrTask(type);
                $('#temp_div_popup').remove();
            }
        },

        'Cancel':{
            click:function () {
                $('#temp_div_popup').remove();
            },
            icon:"delete",
            theme:"c"
        }
    },
    'height' :function(){
        return '55px;'
    },
    'width' : function(){
        return '140px';
    }
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T17:26:32.770

这个问题通常只在较小的视图中出现，例如在手机中。可以通过将浏览器调整为更小的窗口来模拟它。我通过删除这个插件并添加我自己的自定义对话框窗口解决了这个问题。:)

# javascript - 如何使用 java 脚本和 jQuery 更改我的 Html5 混合应用程序的语言？

> ID：11079556
> 
> 赞同：-1
> 
> 时间：2012-06-18T08:51:49.157
> 
> 标签：javascript, html, jquery-mobile

在我的应用程序中，我可以选择语言。

当我选择一个选项时，应该更改整个应用程序语言。

我已经尝试过使用 Google 和 Microsoft api，但我猜这是付费的。是否有任何使用 javascript 的免费 api 可以帮助我解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T12:45:01.340

[这篇文章](https://stackoverflow.com/questions/9781124/language-switcher-link-changes-url)可能是您正在寻找的。他们在谈论：

*   A `wordpress`、改变语言`plugin widget`。

*   A`jQuery handler`改变语言`by directing to another url`。

祝你今天过得愉快！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T10:33:13.197

两种选择：

**#1**
看看[这里](http://dev.jtsage.com/jQM-DateBox/)。单击右上角的“选项”并选择其他语言。打开一个日期框插件小部件，它将使用您指定的语言。

我喜欢使用[Crowdin](https://crowdin.com/project/jquery-mobile-datebox)完成的方式，尽管您最终会将所有文本都放在 .js 文件中。如果您查看其中一种[语言示例文件](http://dev.jtsage.com/cdn/datebox/i18n/jquery.mobile.datebox.i18n.en_US.utf8.js)，如果您的网站变得更加复杂，这将是一大堆内容。

**#2**
做这个服务器端。我（使用 Coldfusion）在第一页加载时加载一个语言对象并缓存它，直到用户选择一种新语言。我的语言对象大约是 60k，有 2000 个条目。您也可以通过 json 从服务器将其发送到页面并将其存储在页面中，然后您可以从 Jquery/Javascript 中引用它。

我可能最终会尝试从服务器端切换到使用第一种方法，并会尝试查看是否可以根据 JQM 页面拆分我的语言 .js 文件，然后将它们与[require](http://requirejs.org/)一起加载，这意味着只有几 ks每页。如果您不介意每种语言和页面都有一堆语言文件，那么这可能是最好的“移动”方法。

# mysql - SQL 连接问题与具有相同名称但不同值的多个列

> ID：11079558
> 
> 赞同：0
> 
> 时间：2012-06-18T08:51:49.580
> 
> 标签：mysql, sql, join, inner-join

我的 SQL 语句有点问题。这有点难以解释，所以我将向您展示：

```
SELECT  exp_channel_data.field_id_102,
        exp_channel_data.field_id_104,
        exp_channel_data.field_id_126,
        exp_channels.deft_status
FROM exp_channel_data
  INNER JOIN exp_channels
    ON exp_channels.channel_id = exp_channel_data.channel_id
  INNER JOIN exp_channel_titles
    ON exp_channels.channel_id = exp_channel_titles.channel_id
WHERE exp_channels.channel_id = 18
AND exp_channel_titles.channel_id = 19 
```

不起作用的位是 AND exp_channel_titles.channel_id = 19

关于如何解决这个问题的任何想法？

提前致谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-18T08:55:58.613

您已加入`exp_channels.channel_id = exp_channel_titles.channel_id` 并正在过滤

```
exp_channels.channel_id = 18 
exp_channel_titles.channel_id = 19 
```

所以永远不会有任何结果

# ios - 聊天在所有单元格中加载相同的消息

> ID：11079561
> 
> 赞同：0
> 
> 时间：2012-06-18T08:51:56.957
> 
> 标签：ios, xmppframework

我正在开发一个需要聊天功能的应用程序，在表格视图中显示发送和接收的消息。我可以毫无问题地加载第一条消息，但是当第二条消息到达时，第一条消息在表格中被删除并显示第二条消息，但在两个单元格中，第三条消息在三个单元格中，依此类推。

我将消息存储在 中`NSMutableArray`，然后运行该数组：

```
-(UITableViewCell *) tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
General *general = [General sharedManager];

NSLog(@"We are in cellForRowAtIndexPath de ChatViewController");
//UITableViewCell *cell=[tableView dequeueReusableCellWithIdentifier:@"UITableViewCell"];
//if(!cell){
messarray=general.messarray;
for (int i=0;i<=messarray.count; i++)
{
    diccio=[messarray objectAtIndex:i];
    general.firstmess=[diccio objectForKey:@"msg"];
    general.firstfrom=[diccio objectForKey:@"sender"];

UITableViewCell *cell=[[UITableViewCell alloc]initWithStyle:UITableViewCellStyleSubtitle reuseIdentifier:@"UITableViewCell"];
//}
text=general.firstmess;
remite=general.firstfrom;
[[cell textLabel]setText:remite];
[[cell detailTextLabel] setText:text];

return cell;

}
} 
```

它就像`for`没有正确完成。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T08:54:31.267

您的 for 循环将最后一条消息分配给当前单元格您需要做的是

```
-(UITableViewCell *) tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    General *general = [General sharedManager];

    NSLog(@"We are in cellForRowAtIndexPath de ChatViewController");
    messarray = general.messarray;

    //Get the element basing on the current row
    diccio=[messarray objectAtIndex:indexPath.row];
    general.firstmess=[diccio objectForKey:@"msg"];
    general.firstfrom=[diccio objectForKey:@"sender"];

    UITableViewCell *cell=[[UITableViewCell alloc]initWithStyle:UITableViewCellStyleSubtitle reuseIdentifier:@"UITableViewCell"];
    text = general.firstmess;
    remite = general.firstfrom;
    [[cell textLabel]setText:remite];
    [[cell detailTextLabel] setText:text];

    return cell;
} 
```

一个建议是`dequeueReusableCellWithIdentifier`正确 实施

# android - 带有文本+图像的 Android 自定义 GridLayout

> ID：11079563
> 
> 赞同：2
> 
> 时间：2012-06-18T08:52:01.903
> 
> 标签：android, grid-layout

在我的应用程序中，我试图从 Web 服务中获取一组用户的详细信息。然后，我想在 GridLayout 中显示每个用户的图像及其名称。我以前没有使用过 GridLayout，因此尝试浏览在线可用的教程，但其中大多数只处理图像。我需要在网格中显示图像和文本。

如何设置自定义 GridLayout 以显示 Text 和 Images ？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-18T08:54:38.797

试试这个 ：

```
 public class GridActivity extends Activity implements AdapterView.OnItemClickListener {
/** Called when the activity is first created. */

Integer[] imageIDs = {
        R.drawable.ic_launcher,
        R.drawable.ic_launcher,
        R.drawable.ic_launcher,
        R.drawable.ic_launcher,
        R.drawable.ic_launcher,
        R.drawable.ic_launcher,
        R.drawable.ic_launcher,
        R.drawable.ic_launcher,
        R.drawable.ic_launcher,
        R.drawable.ic_launcher,
        R.drawable.ic_launcher,
        R.drawable.ic_launcher,
        R.drawable.ic_launcher,
        R.drawable.ic_launcher,
        R.drawable.ic_launcher,
        R.drawable.ic_launcher,
        R.drawable.ic_launcher,
        R.drawable.ic_launcher,
        R.drawable.ic_launcher,
        R.drawable.ic_launcher,
        R.drawable.ic_launcher,
        R.drawable.ic_launcher,
        R.drawable.ic_launcher,
        R.drawable.ic_launcher,
        R.drawable.ic_launcher,
        R.drawable.ic_launcher,
        R.drawable.ic_launcher,
        R.drawable.ic_launcher,
        R.drawable.ic_launcher,
        R.drawable.ic_launcher,

  };

String[] titles = {
        "First",
        "Second",
        "Third",
        "Fourth",
        "Fifth",
        "First",
        "Second",
        "Third",
        "Fourth",
        "Fifth",
        "First",
        "Second",
        "Third",
        "Fourth",
        "Fifth",
        "First",
        "Second",
        "Third",   
        "Fourth",
        "Fifth",
        "First",
        "Second",
        "Third",
        "Fourth",
        "Fifth",
        "First",
        "Second",
        "Third",
        "Fourth",
        "Fifth",

 };
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
  GridView gridView = (GridView) findViewById(R.id.grid);
    gridView.setAdapter(new ImageAdapter(this));

}

public class ImageAdapter extends BaseAdapter 
{
    private Context context;

    public ImageAdapter(Context c) 
    {
        context = c;
    }

    //---returns the number of images---
    public int getCount() {
        return imageIDs.length;
    }

    //---returns the ID of an item--- 
    public Object getItem(int position) {
        return position;
    }

    public long getItemId(int position) {
        return position;
    }

    //---returns an ImageView view---
    public View getView(int position, View convertView, ViewGroup parent) 
    { 
        ImageView icon;
    icon = new ImageView(context);

    LayoutInflater inflater = (LayoutInflater)             context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
    View row=inflater.inflate(R.layout.row, parent, false);
    TextView label=(TextView)row.findViewById(R.id.image_name);
    label.setText(titles[position]);
    icon=(ImageView)row.findViewById(R.id.album_image);

    icon.setImageResource(imageIDs[position]);

    return row;
    }

}

@Override
public void onItemClick(AdapterView<?> arg0, View arg1, int arg2,
        long arg3) {

    // TODO Auto-generated method stub

}
    } 
```

**主文件**

```
 <?xml version="1.0" encoding="utf-8"?>
 <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
  android:layout_width="fill_parent"
  android:layout_height="fill_parent"
  android:orientation="vertical" >   

  <GridView
    android:id="@+id/grid"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:layout_below="@+id/lay"
    android:columnWidth="100px"
    android:horizontalSpacing="5dip"
    android:numColumns="auto_fit"
    android:scrollbars="horizontal"

    android:stretchMode="columnWidth"
    android:verticalSpacing="35px" />
   </LinearLayout> 
```

行.xml

```
 <?xml version="1.0" encoding="utf-8"?>
 <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:orientation="vertical" >

  <ImageView
  android:id = "@+id/album_image"
  android:adjustViewBounds="true"
  android:layout_width = "fill_parent"             
  android:layout_height="wrap_content"
  />
  <TextView
  android:id = "@+id/image_name"
  android:layout_width = "fill_parent"             
  android:layout_height="wrap_content"
  android:gravity="center"
  />
  </LinearLayout> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-18T08:53:42.410

这是带有 ImageView 和 TextView 的 GridView 的一个非常好的示例。

[http://mytelcoit.com/2010/02/programming-android-create-icon-with-text-using-gridview-and-layout-inflater/](http://mytelcoit.com/2010/02/programming-android-create-icon-with-text-using-gridview-and-layout-inflater/)

只需像这样使用 ImageView 和 textView 创建一个 xml 文件，

```
<LinearLayout
xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@+id/widget44"
android:layout_width="wrap_content"
android:layout_height="wrap_content"
android:orientation="vertical"
android:layout_x="201px"
android:layout_y="165px"
android:gravity="center_horizontal">
<ImageView
android:id="@+id/icon_image"
android:layout_width="wrap_content"
android:layout_height="wrap_content">
</ImageView>
<TextView
android:id="@+id/icon_text"
android:layout_width="wrap_content"
android:layout_height="wrap_content"
android:text="TextView"
android:gravity="center_horizontal"
android:textColorHighlight="#656565">
</TextView>
</LinearLayout> 
```

然后使用自定义适配器填充它。

```
@Override
        public View getView(int position, View convertView, ViewGroup parent) {
            // TODO Auto-generated method stub
            View v;
            if(convertView==null){
                LayoutInflater li = getLayoutInflater();
                v = li.inflate(R.layout.icon, null);
                TextView tv = (TextView)v.findViewById(R.id.icon_text);
                tv.setText("Profile "+position);
                ImageView iv = (ImageView)v.findViewById(R.id.icon_image);
                iv.setImageResource(R.drawable.icon);

            }
            else
            {
                v = convertView;
            }
            return v;
        } 
```

# android - 输入频道注册失败 - 动态壁纸

> ID：11079565
> 
> 赞同：3
> 
> 时间：2012-06-18T08:52:09.253
> 
> 标签：android, runtime-error, live-wallpaper, wallpaper

[我遇到了与此类](https://stackoverflow.com/questions/7701660/failed-to-register-input-channel-what-is-this-caused-by-and-how-to-fix-this)似的问题。

崩溃报告来自 Google Play，我自己无法重现。我尝试下载 Launcher Pro，但这并没有造成任何问题。
这是堆栈跟踪：

```
java.lang.RuntimeException: Failed to register input channel. Check logs for details.
at android.view.InputQueue.nativeRegisterInputChannel(Native Method)
at android.view.InputQueue.registerInputChannel(InputQueue.java:92)
at android.service.wallpaper.WallpaperService$Engine.updateSurface(WallpaperService.java:534)
at android.service.wallpaper.WallpaperService$Engine.attach(WallpaperService.java:670)
at android.service.wallpaper.WallpaperService$IWallpaperEngineWrapper.executeMessage(WallpaperService.java:898)
at com.android.internal.os.HandlerCaller$MyHandler.handleMessage(HandlerCaller.java:61)
at android.os.Handler.dispatchMessage(Handler.java:99)
at android.os.Looper.loop(Looper.java:130)
at android.app.ActivityThread.main(ActivityThread.java:3806)
at java.lang.reflect.Method.invokeNative(Native Method)
at java.lang.reflect.Method.invoke(Method.java:507)
at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
at dalvik.system.NativeStart.main(Native Method) 
```

# javascript - jQuery Cycle - 跟踪循环中每个图像被查看的次数

> ID：11079567
> 
> 赞同：0
> 
> 时间：2012-06-18T08:52:32.937
> 
> 标签：javascript, jquery, jquery-cycle

我的网站上有 3 个随机化的 jquery 周期。循环可以有任意数量的图像，因为它是动态构建的。我希望能够跟踪每个周期中每个图像被查看的次数。

有没有人能够做到这一点？我已经用谷歌搜索了大约一个小时，但我一无所获。

任何帮助将不胜感激。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T09:26:50.750

没有内置的方法可以做这样的事情。但是你可以使用`before`回调来实现这样的事情。`before`这个想法是在回调中维护一个全局数组和更新计数。检查以下代码

```
var viewCount = [];
$('#s2').cycle({ 
        fx:     'scrollLeft', 
        timeout: 1000, 
        before: function(){
          var index = $('#s2 img').index(this); 
          viewCount[index] = (viewCount[index])? viewCount[index] + 1 : 1;
}); 
```

**演示：http:** [//jsfiddle.net/joycse06/LPZxs/](http://jsfiddle.net/joycse06/LPZxs/)

[循环插件选项参考](http://jquery.malsup.com/cycle/options.html)

# php - mod_rewrite 将请求发送到正确的位置，但 CSS 文件没有加载？

> ID：11079568
> 
> 赞同：1
> 
> 时间：2012-06-18T08:52:33.213
> 
> 标签：php, mysql, apache

我正在尝试 mod_rewrite，以便客户可以在 Google 上列出更好的网址

所以我创建了一个页面（www.cruiseandmaritime.com/cruise_details_by_name.php，我在其中发送类似

www.cruiseandmaritime.com/cruises/French-Leave

工作正常，页面加载了正确的数据，但没有加载样式表，所以它只是未格式化

现在我猜，因为我已经创建了虚构的目录“巡航”它与...？

这是我在 .htaccess 文件中的行

```
RewriteEngine On    # Turn on the rewriting engine
RewriteBase     /
RewriteRule     ^cruises/([A-Za-z0-9-]+)?$      cruise_details_by_name.php?id=$1    [NC,L]    # Handle requests for all cruises 
```

再次感谢任何帮助！

富有的：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T08:56:46.473

我不认为这是一个 mod_rewrite 问题。

在您的 html 代码中有一个指向您的 css 文件的链接：

```
<link rel="stylesheet" type="text/css" href="stylesheets/anytime.css" /> 
```

当前浏览器正在尝试加载位于`http://www.cruiseandmaritime.com/cruises/stylesheets/anytime.css`

如果您让文件路径以此开头`/`应该可以工作。这样，使用绝对 uri 而不是相对 uri。

# java - 休眠插入到 OneToMany

> ID：11079575
> 
> 赞同：0
> 
> 时间：2012-06-18T08:53:09.347
> 
> 标签：java, hibernate, one-to-many

**我刚开始使用 Hibernate，我想知道如何在不**先加载容器的情况下将新元素插入 oneToMany 关系。

考虑以下示例：

```
@Entity
@Table(name="orders")
class Order {
    @Id @GeneratedId
    public Long id;
    @OneToMany(mappedBy="order")
    public List<Item> items = new ArrayList<Item>();
}

@Entity
@Table(name="items")
class Item {
    @Id @GeneratedId
    public Long id;
    @ManyToOne
    public Order order;
} 
```

我想在订单中插入一个新项目（我知道订单的 id 并且它是有效的），但我不想先加载订单。显然，这应该是可能的，因为 SQL 只需要插入的 id 而不是整个 Order 对象。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T09:54:51.783

您应该能够在 Hibernate 中轻松完成这一切。

```
Item item - new Item();
Order order = new Order();
order.setId(order_id);
item.setOrder(order);
em.persist(item); 
```

确保在 Item 实体中的 order 属性上正确设置了级联属性。如果不这样做，您最终可能会无意中更改 Order 中的值。

```
@ManyToOne(cascade=CascadeType.PERSIST) 
```

应该可以。如果订单尚不存在，它将仅允许从项目方面更改订单。

顺便说一句，您可能想将此关系视为多对多，因为在多个订单上拥有项目是有意义的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-18T09:59:21.127

“幸运的是”您没有任何级联策略，并且依赖项设置在 Item 端。

您可以使用 session.load() 加载具有所需 ID 的用户。load() 方法将返回一个代理，以防在会话中找不到它。当您想设置依赖项而不去 db 获取实体时，这很有用。

它看起来像：

```
Order order = session.load(Order.class, orderId);  // no DB call
Item item = new Item(); 
item.setOrder(order);
// set other attributes of item
session.save(item); 
```

load() 和 get() 的区别请参考 [Hibernate：session.get 和 session.load 的区别](https://stackoverflow.com/questions/608947/hibernate-difference-between-session-get-and-session-load)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-18T08:55:49.657

I don't think you can, Hibernate will need to have the Order in session/context before you can add an item to it. i.e. Hibernate will need to 'know' the items order.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-18T09:04:01.093

您可以通过创建一个`Item`不`Order`带.`order_id``Item`

# ffmpeg - 如何使用 ffmpeg 将 MP4 转换为 WMV 以获得更好的质量？

> ID：11079577
> 
> 赞同：16
> 
> 时间：2012-06-18T08:53:13.107
> 
> 标签：ffmpeg, mp4, wmv

我正在使用以下两个重新缩放命令将**MP4 文件转换为 WMV ：**

```
ffmpeg -i test.mp4 -y -vf scale=-1:360 test1.wmv
ffmpeg -i test.mp4 -y -vf scale=-1:720 test2.wmv 
```

我也试过：

```
ffmpeg -g 1 -b 16000k -i test1.mp4 test1.wmv 
```

**但是**，生成的 .wmv 文件是“**块状和颗粒状**的”，正如您在视频截图的一小部分中看到的那样：

![在此处输入图像描述](../Images/335bebe7c86f169936558df3946400cb.png)

这些是尺寸：

```
test.mp4 - 106 MB
test1.wmv - 6 MB
test2.wmv - 16 MB 
```

**如何提高生成的 .wmv 文件的质量/大小（不关心 .wmv 文件的大小）？**

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2016-01-18T10:02:00.457

请考虑以下命令（最终答案部分中的一些过时命令）：

```
ffmpeg -i test.mp4 -c:v wmv2 -b:v 1024k -c:a wmav2 -b:a 192k test1.wmv 
```

**参考**

*   [https://askubuntu.com/questions/352920/fastest-way-to-convert-videos-batch-or-single](https://askubuntu.com/questions/352920/fastest-way-to-convert-videos-batch-or-single)

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-06-18T09:23:00.607

您可以简单地使用`-sameq`参数（“使用与源相同的量化器”）来生成更大尺寸的视频文件（227 MB），但质量非常好。

```
ffmpeg -sameq -i test.mp4 -y -vf scale=-1:360 test1.wmv 
```

在较新版本的 ffmpeg 标志 '-sameq' 已被删除。为了获得类似的结果，应该使用 0 值的 'qscale' 标志：

```
ffmpeg -sameq -i test.mp4 -qscale 0 -vf scale=-1:360 test1.wmv 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-02-07T22:59:27.227

经过多次令人沮丧的提高最终质量的尝试后，我发现的一件事是，如果您不指定比特率，它将使用相当低的平均值。尝试 -b 1000k 作为起点，并尝试增加或减少它，直到达到所需的结果。因此，您的文件会更大或更小。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2020-09-30T13:41:04.350

2020 年的工作答案，生成没有块状的输出视频：

```
ffmpeg -i input.mp4 -q:v 1 -q:a 1 output.wmv 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-09-07T14:22:15.007

我用了这个，结果很好

```
ffmpeg -i "file1.mp4" -q:v 0 -c:v wmv2 -b:v 1024k -c:a wmav2 -b:a 192k test2.wmv 
```

# php - php soap：如何让它生成 我是这方面的新手，并且一直在研究论坛试图弄清楚如何使用 PHP 的肥皂。 我马上就要拔头发了！ 花了无数年试图弄清楚如何生成这个标题。 <autenticationtoken><username>admin <username>admin</username> <password>123456</password></username></autenticationtoken> 最终使用了这个： $sh_param = "<autenticationtoken><username>admin</username><password>123456</password></autenticationtoken>"; $auth = new SoapVar($sh_param, XSD_ANYXML, null, null, null); $headers = new SoapHeader($wdsl, 'AuthenticationToken', $auth); 当我使用这种方法时，它会不断生成这样的“ns”->。 <ns2:authenticationtoken><item><key>Username</key> <value>admin</value></item> <item><key>Password</key> <value>123456</value></item></ns2:authenticationtoken> $sh_param = array( 'Username' => 'admin', 'Password' => '123456'); $headers = new SoapHeader($wsdl, 'AuthenticationToken', $sh_param); 现在我需要让它从 更改<soap:envelope为<soap-env:envelope 1="" 4="" 。帮助！="" 我解决了="" var="" pagingbar="grid.getDockedItems()[1];" pagingbar.unbind(store);="" store="Ext.create('Ext.data.Store'," {="" fields:="" tmpfields,="" pagesize:="" itemsperpage,="" proxy:="" type:="" 'ajax',="" url:="" getdatawithpageurl,="" reader:="" ext.create('customreader',="" root:="" 'results',="" totalproperty:="" 'total'="" })="" }="" });="" params:="" start:="" 0,="" limit:="" itemsperpage="" pagingbar.bind(store);="" phpsoap="" 回答="" this="" answer="" is="" useful="" 类="" soapstruct="" function="" __construct($user,="" $pass)="" $this-="">Username = $user; $this->Password = $pass; } } //set username and password $auth = new SOAPStruct("admin","123456"); //soap header object $header = new SoapHeader("http://gateway.asiagategroup.com/","AutenticationToken",$auth,false); $client->__setSoapHeaders($header); 希望这能解决您的问题 于 2012-06-20T13:56:31.687 回答 Related 1 javascript - 如何将 websql .executeSql 结果存储在全局变量中？ 1 jquery - 如何在不阻塞浏览器的情况下在 fancyBox 弹出窗口中调用脚本？ 2 javascript - 使 javascript 函数与回调异步 1 xna-4.0 - 检测非矩形的点击 1 javascript - javascript弹出连接不起作用 1 ios - iOS-deleteRowsAtIndexPaths 崩溃 2 tfsbuild - 在 Team Build 机器上激活 InstallShield 2012 LE（限量版） 1 javascript - 错误：SCRIPT65535：调用对象第 1 行字符 1 无效 2 sql - 根据某个 ID 将表的行显示为列 1 android - GLSurfaceView onDrawFrame 清除行为 Reference php × 1429865 c/c++ × 756500 nginx × 49975 mongodb × 159057 mybatis × 3233 anaconda × 13410 pycharm × 14671 python × 1902243 vscode × 56040 docker × 110988 github × 49000 flask × 49129 ffmpeg × 24037 jmeter × 16910 matplotlib × 63493 bootstrap × 54641</soap:envelope为<soap-env:envelope>

> ID：11079578
> 
> 赞同：0
> 
> 时间：
> 
> 标签：php, soap

我是这方面的新手，并且一直在研究论坛试图弄清楚如何使用 PHP 的肥皂。

我马上就要拔头发了！

花了无数年试图弄清楚如何生成这个标题。

```
<AutenticationToken>
      <Username>admin</Username>
      <Password>123456</Password>
   </AutenticationToken> 
```

最终使用了这个：

```
$sh_param = "<AutenticationToken><Username>admin</Username><Password>123456</Password></AutenticationToken>";
$auth = new SoapVar($sh_param, XSD_ANYXML, null, null, null);
$headers = new SoapHeader($wdsl, 'AuthenticationToken', $auth); 
```

当我使用这种方法时，它会不断生成这样的“ns”->。

```
<ns2:AuthenticationToken>
  <item>
   <key>Username</key>
   <value>admin</value>
  </item>
  <item>
   <key>Password</key>
   <value>123456</value>
  </item>
</ns2:AuthenticationToken>

$sh_param = array( 
                    'Username'    =>    'admin', 
                    'Password'    =>    '123456'); 
 $headers = new SoapHeader($wsdl, 'AuthenticationToken', $sh_param); 
```

现在我需要让它从 更改`<soap:Envelope`为`<SOAP-ENV:Envelope` 。帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T13:56:31.687

类 SOAPStruct

{

```
function __construct($user, $pass) 
{
    $this->Username = $user;
    $this->Password = $pass;
} 
```

}

```
//set username and password
$auth = new SOAPStruct("admin","123456");

//soap header object
$header = new SoapHeader("http://gateway.asiagategroup.com/","AutenticationToken",$auth,false); 
$client->__setSoapHeaders($header); 
```

希望这能解决您的问题

# apache-camel - 骆驼路线验证错误

> ID：11079580
> 
> 赞同：1
> 
> 时间：2012-06-18T08:53:29.370
> 
> 标签：apache-camel

我正在使用骆驼来验证 xml，并且在路线中我正在执行以下操作：

```
<route>
    <from uri="file:{{file.inbox}}?preMove=inprogress&amp;move=../.done"/>
    <doTry>
        <to uri="validator:classpath:idocOrderStatus.xsd"/>
        <to uri="file:{{file.outbox.valid}}"/>
        <doCatch>
            <exception>org.apache.camel.ValidationException</exception>
            <to uri="file:{{file.outbox.invalid}}"/>
        </doCatch>
    </doTry>
</route> 
```

我收到以下错误：

```
 Exception in thread "SpringOsgiExtenderThread-10" org.apache.camel.RuntimeCamelException: org.apache.camel.FailedToCreateRouteException: Failed to create route route7 at: >>> DoT
ry[[To[validator:classpath:idocOrderStatus.xsd], To[file:outbox/valid], DoCatch[ null -> [To[file:{{file.outbox.invalid}}]]]]] <<< in route: Route[[From[file:{{file.inbox}}?preMove=inprogres
s&move=../.... because of org.apache.camel.ValidationException
        at org.apache.camel.util.ObjectHelper.wrapRuntimeCamelException(ObjectHelper.java:1157)
        at org.apache.camel.spring.SpringCamelContext.onApplicationEvent(SpringCamelContext.java:110)
        at org.apache.camel.spring.CamelContextFactoryBean.onApplicationEvent(CamelContextFactoryBean.java:240)
        at org.springframework.context.event.SimpleApplicationEventMulticaster.multicastEvent(SimpleApplicationEventMulticaster.java:97)
        at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:303)
        at org.springframework.context.support.AbstractApplicationContext.finishRefresh(AbstractApplicationContext.java:911)
        at org.springframework.osgi.context.support.AbstractOsgiBundleApplicationContext.finishRefresh(AbstractOsgiBundleApplicationContext.java:235)
        at org.springframework.osgi.context.support.AbstractDelegatedExecutionApplicationContext$4.run(AbstractDelegatedExecutionApplicationContext.java:358)
        at org.springframework.osgi.util.internal.PrivilegedUtils.executeWithCustomTCCL(PrivilegedUtils.java:85)
        at org.springframework.osgi.context.support.AbstractDelegatedExecutionApplicationContext.completeRefresh(AbstractDelegatedExecutionApplicationContext.java:320)
        at org.springframework.osgi.extender.internal.dependencies.startup.DependencyWaiterApplicationContextExecutor$CompleteRefreshTask.run(DependencyWaiterApplicationContextExecutor.java:
132)
        at java.lang.Thread.run(Thread.java:662)
Caused by: org.apache.camel.FailedToCreateRouteException: Failed to create route route7 at: >>> DoTry[[To[validator:classpath:idocOrderStatus.xsd], To[file:outbox/valid], DoCatch[ null -> [T
o[file:{{file.outbox.invalid}}]]]]] <<< in route: Route[[From[file:{{file.inbox}}?preMove=inprogress&move=../.... because of org.apache.camel.ValidationException
        at org.apache.camel.model.RouteDefinition.addRoutes(RouteDefinition.java:820)
        at org.apache.camel.model.RouteDefinition.addRoutes(RouteDefinition.java:165)
        at org.apache.camel.impl.DefaultCamelContext.startRoute(DefaultCamelContext.java:685)
        at org.apache.camel.impl.DefaultCamelContext.startRouteDefinitions(DefaultCamelContext.java:1683)
        at org.apache.camel.impl.DefaultCamelContext.doStartCamel(DefaultCamelContext.java:1468)
        at org.apache.camel.impl.DefaultCamelContext.doStart(DefaultCamelContext.java:1360)
        at org.apache.camel.spring.SpringCamelContext.doStart(SpringCamelContext.java:169)
        at org.apache.camel.impl.ServiceSupport.start(ServiceSupport.java:67)
        at org.apache.camel.impl.ServiceSupport.start(ServiceSupport.java:54)
        at org.apache.camel.impl.DefaultCamelContext.start(DefaultCamelContext.java:1328)
        at org.apache.camel.spring.SpringCamelContext.maybeStart(SpringCamelContext.java:213)
        at org.apache.camel.spring.SpringCamelContext.onApplicationEvent(SpringCamelContext.java:108)
        ... 10 more
Caused by: java.lang.ClassNotFoundException: org.apache.camel.ValidationException
        at org.apache.camel.impl.DefaultClassResolver.resolveMandatoryClass(DefaultClassResolver.java:52)
        at org.apache.camel.model.CatchDefinition.createExceptionClasses(CatchDefinition.java:254)
        at org.apache.camel.model.CatchDefinition.createProcessor(CatchDefinition.java:91)
        at org.apache.camel.model.TryDefinition.createProcessor(TryDefinition.java:90)
        at org.apache.camel.model.ProcessorDefinition.makeProcessor(ProcessorDefinition.java:444)
        at org.apache.camel.model.ProcessorDefinition.addRoutes(ProcessorDefinition.java:183)
        at org.apache.camel.model.RouteDefinition.addRoutes(RouteDefinition.java:817)
        ... 21 more 
```

我不明白为什么会出现此错误？无论如何在骆驼上下文中导入这个类？我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T10:49:42.797

You can find the solution on the fuse forum [fuse forum](http://fusesource.com/forums/thread.jspa?threadID=4015&tstart=0)

# jquery - Codeigniter 显示 JavaScript 文件的 404 错误

> ID：11079584
> 
> 赞同：0
> 
> 时间：2012-06-18T08:53:57.817
> 
> 标签：jquery, codeigniter

Codeigniter 显示 404 错误页面，用于 javascript 文件。该文件位于`js`文件夹中。有问题的文件是`jquery.cookie.js`.

如果我更改文件名，那么我可以访问该文件。

该文件没有路由设置或 .htaccess 规则，但由于某种原因，当访问 javascript 文件时，codeigniter 会显示其默认的 404 页面。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T10:19:02.507

我以前遇到过这个问题 - 问题源于 CI 寻找某些恶意字符串的善意安全系统。我从来没有追查过它的确切位置，但是如果 JS 文件名包含“.cookie”，它将被 CI 的内部过滤器拒绝。

快速解决方法是重命名文件以不包含单词 cookie，或`.`将文件名中的`_`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T06:41:10.490

好的，终于知道问题出在哪里了。任何文件名中包含“cookie”的文件都被我们服务器上的 mod_security 阻止。

# java - ORMLite中外来实体的属性排序

> ID：11079585
> 
> 赞同：4
> 
> 时间：2012-06-18T08:53:59.753
> 
> 标签：java, android, foreign-keys, sql-order-by, ormlite

如何在 ORMLite 中构建查询，以便我可以使用 orderBy 函数（使用带有原始字符串的函数或参数化的函数）引用与我正在构建查询的 dao 不同的实体的属性? 我的查询是这样构建的：

```
// Inner query for performances
QueryBuilder<Performance, String> performancesQB = performanceDao.queryBuilder();
performancesQB.selectColumns("performance_id");
SelectArg performanceSelectArg = new SelectArg();
performancesQB.where().lt("date", performanceSelectArg);

// Outer query for Order objects, where the id matches in the performance_id
// from the inner query
QueryBuilder<Order, String> ordersQB = orderDao.queryBuilder();
ordersQB.where().isNull("user_id").and().in("performance_id", performancesQB);
ordersQB.orderByRaw("performances.date DESC");
pastOrdersQuery = ordersQB.prepare(); 
```

每当我尝试执行此查询时遇到的异常是：

```
android.database.sqlite.SQLiteException: no such column: performances.date:,
   while compiling: SELECT * FROM `orders` WHERE
     (`user_id` IS NULL AND `performance_id` IN
     (SELECT `performance_id` FROM `performances` WHERE `date` < ? ) )
     ORDER BY performances.date DESC 
```

我在这里看到的唯一解决方案是自己使用 JOIN 而不是嵌套选择编写原始查询。这可能是一个很好的解决方案吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-27T21:24:46.927

ORMLite 现在支持简单的 JOIN 查询。这里是关于这个主题的文档：

> [http://ormlite.com/docs/join-queries](http://ormlite.com/docs/join-queries)

所以你的查询现在看起来像：

```
QueryBuilder<Performance, String> performancesQB = performanceDao.queryBuilder();
SelectArg performanceSelectArg = new SelectArg();
performancesQB.where().lt("date", performanceSelectArg);
performancesQB.orderBy("date", false);

// query for Order objects, where the id matches
QueryBuilder<Order, String> ordersQB = orderDao.queryBuilder();
ordersQB.join(performancesQB).where().isNull("user_id");
pastOrdersQuery = ordersQB.prepare(); 
```

# windows - Getting started with openMP. install on windows

> ID：11079586
> 
> 赞同：24
> 
> 时间：2012-06-18T08:54:08.173
> 
> 标签：windows, installation, openmp

I want to write parallel program in C++ using OpenMP, so I am getting started with OpenMP. On the other words I am a beginner and I need good OpenMP guide telling how to install it. Does someone know how to install OpenMP on Windows, then compile and run the program?

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-06-18T09:17:09.327

OpenMP 不是您安装的东西。它随您的编译器一起提供。您只需要一个支持 OpenMP 的体面的编译器，并且您需要知道如何启用 OpenMP 支持，因为默认情况下它通常被禁用。

Windows 的标准编译器来自 Microsoft，它是来自 Visual Studio 的 Microsoft Visual C/C++ 编译器。不幸的是，它的 OpenMP 支持有点过时了——即使是最新最好的 Visual Studio 也只支持 OpenMP 2.0（2002 年过时的标准版本）。有关如何在 Visual Studio 中使用 OpenMP 的更多信息，请参阅[此处。](http://msdn.microsoft.com/en-us/library/tt15eb9t%28v=vs.100%29.aspx)还有其他可用的编译器 - 英特尔 C/C++ 编译器（需要商业许可）和 GCC（免费提供）支持较新的 OpenMP 版本，其他编译器也可用。

[您可以通过访问此处](http://openmp.org/wp/resources/)的 OpenMP 网站开始学习 OpenMP 。[这里](https://computing.llnl.gov/tutorials/openMP/)还有来自劳伦斯利弗莫尔国家实验室的关于 OpenMP 的精彩教程。

**2020 年更新：**微软现在随 Visual Studio 一起发布适用于 Windows 的 Clang。虽然有点复杂，但可以（ab）使用 Clang-cl 工具集来生成工作***的 32 位***OpenMP 程序。一些步骤是必要的：

1.  如果尚未安装，请使用 Visual Studio 2019 安装程序添加 Clang 和 Clang-cl。
2.  将项目的平台工具集（项目*属性 -> 常规 -> 平台工具集*）设置为“LLVM (clang-cl)”。
3.  `-Xclang -fopenmp`通过在项目*Properties -> C/C++ -> All Options -> Additional Options*中添加编译器选项来启用 Clang OpenMP 支持。
    **重要提示：**确保在切换平台工具集**之前**禁用 OpenMP 支持（这是新 C++ 项目的默认设置）。`/openmp`即使 Clang 的语言配置没有 OpenMP 的选项，VS 似乎记住了设置并且仍然通过。如果在构建过程中`clang-cl.exe`抛出错误 MSB8055（不支持`/openmp`的选项），请将平台工具集设置回“Visual Studio 2019 (vXXX)”并在*Properties -> C/C++ -> Language -> Open MP Support*中禁用 OpenMP 支持，然后切换平台工具集再次改为“LLVM (Clang-cl)”。
4.  添加`libomp.lib`到项目*Properties -> Linker -> Input -> Additional Dependencies*中的其他库。
5.  通过在项目*Properties -> Linker -> General -> Additional Library Directories*`libomp.lib`中添加具有值的新条目，将路径添加到链接器搜索路径。`$(LLVMInstallDir)\lib`
**   添加一个将 LLVM 复制到项目输出目录的构建后操作`libomp.dll`（如果没有此步骤，运行可执行文件将失败，除非`libomp.dll`位于 DLL 搜索路径中）。在项目*属性 -> 构建事件 -> 构建后事件 -> 命令行中*：

    `xcopy /y "$(LLVMInstallDir)\bin\libomp.dll" "$(SolutionDir)$(Configuration)"`

    *   构建并运行项目。* 

 *注意：这很可能仍然不受 Microsoft 支持，并且它仅适用于 x86 项目，因为 VS 附带的 LLVM 库仅是 32 位的。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2016-07-15T06:25:18.157

下面是我为最终让 OpenMP 在我的 Windows 10 PC 上运行所做的工作：

1.  Get MinGW - 下载并获取获取基本 gcc 编译器和 g++ 软件包所需的内容（它真的很容易做到）。您可以随时运行`g++ -v`以确保它已启动并运行
2.  运行`mingw-get upgrade --recursive "gcc<4.7.*" "gcc-g++<4.7.*"`这是“有趣”的部分。因为此时他们的 4.9.* 版本不支持 libgomp 库，所以我的 gcc 无法识别`<omp.h>`最后一个支持版本是 4.7.2，所以我终于能够运行我的 openMP

编译运行`g++ -fopenmp myOpenMPFile.cpp -o myOpenMP`，一切都将从那里开始

`gcc -fopenmp myOpenMPFile.cpp -o myOpenMP`也适用于 C 代码

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2019-11-13T10:21:28.800

我想分享我为让 OpenMP 在我的 Windows 10 PC 上运行所做的工作（2019 年事情变得更加简单）

1.  我使用 GCC 8.2.0 编译器从[这里](https://nuwen.net/mingw.html)安装了 MinGW 发行版。发行版的维护者已经为 GCC 添加了 winpthreads 和 OpenMP 支持。

2.  我用标志编译了我的代码，`-fopenmp`如下所示：`g++ -fopenmp main.cpp -o exec`

注意：MinGW 发行版支持许多有用的库（例如 Boost 1.69.0）和其他实用程序。我发现它非常有用。*

# r - 检查输入值时出错

> ID：11079587
> 
> 赞同：-3
> 
> 时间：2012-06-18T08:54:08.440
> 
> 标签：r

我有一个使用 readline 要求人们输入数据的函数。但我不知道确保输入的数据符合我的标准的最佳方法。我认为“if”语句可能是检查错误的最佳方法，但我不确定如何合并它们。我尝试使用它们显然是有缺陷的（见下文）。

作为一个简单的例子，我将遇到的两个最可能的问题是我想确保至少为 x 输入了一些值（如果为 x 输入了一个值，它是一个数字）并且 V1 和 V2 包含相同数量的值。

```
fun<-function(){
T<-readline("What is x" )

if(T=="" | typeof(x)!=numeric)
{print("Input non-aceptable")
T<-readline("What is x ")}

else

V<-readline("Enter 4 values" )
V2<-readline("Enter 4 more values ")

if(length(V1)!=length(V2))
{print("V1 & V2 do not contain equal # of values")
    V<-readline("Enter 4 values ")
    V<-readline("Enter 4 more values ")}

 else

T<-as.numeric(T)
V<-as.numeric(V)
V2<-as.numeric(V2)
return(list(x,V1,V2) 
```

}

如您所见，我希望在潜在错误导致实际错误发生之前尝试发现它们，然后让人们有机会重新输入数据。如果“if”语句是要走的路，我能得到一些正确使用的帮助吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T10:17:21.750

在 R 中，布尔类型`TRUE`和`FALSE`也可以用`T`和表示`F`。因此，首先尝试将您命名的变量更改为`T`合理的东西……比如`x`可能？？？

其次，在你的`typeof(x)`论点中，你调用了变量 T，所以这不起作用。此外，数字周围没有引号。尝试`if(!(is.numeric(x)))`

第三，您的变量命名不一致，V 和 V，然后是 V1 和 V2。除了难以阅读之外，它也无法正常工作。

最后，您的 return 语句需要第二个右括号，函数代码块需要一个右花括号。

# actionscript-3 - 创建频谱图时遇到问题

> ID：11079600
> 
> 赞同：1
> 
> 时间：2012-06-18T08:54:43.887
> 
> 标签：actionscript-3, audio, media, fft

我知道之前被问了一千次，但我仍然找不到解决方案。搜索SO，我确实找到了它的算法，但缺乏真正理解它所需的数学知识，我无助地迷失了！

首先，我的目标是计算整个频谱图并将其保存到图像中，以便将其用于可视化器。

我尝试使用 Sound.computeSpectrum，但这需要播放声音并等待它结束，我想以比聆听所有歌曲所需的时间更短的方式计算频谱图。我有 2 小时长的 mp3。

我现在正在做的是从 Sound 对象中读取字节，分成两个 Vectors(.); 然后使用计时器，每 100 毫秒我调用一个函数（步骤 1），其中我有算法的实现，如下所示：

1.  对于每个向量（每个向量），我将 hann 函数应用于元素；
2.  对于每个向量，我都会取消虚部（我有一个辅助向量）
3.  对于每个向量，我应用 FFT
4.  对于每个向量，我找到前 N / 2 个元素的大小
5.  对于每个向量，我将平方幅度转换为 dB 比例
6.  结尾。

但我只得到负值，只有 30% 的结果可能有用（其余部分相同）

我将只发布一个频道的代码，以摆脱“每个矢量”部分。

```
private var N:Number = 512;
private function step1() : void
{
    var xReLeft:Vector.<Number> = new Vector.<Number>(N);
    var xImLeft:Vector.<Number> = new Vector.<Number>(N);

    var leftA:Vector.<Number> = new Vector.<Number>(N);

    // getting sample range
    leftA = this.channels.left.slice(step * N, step * (N) + (N));

    if (leftA.length < N)
    {
        stepper.removeEventListener(TimerEvent.TIMER, getFreq100ms);
        return;
    }
    else if (leftA.length == 0)
    {
        stepper.removeEventListener(TimerEvent.TIMER, getFreq100ms);
        return;
    }

    var i:int;

    // hann window function init
        m_win = new Vector.<Number>(N);
        for ( var i:int = 0; i < N; i++ )
            m_win[i] = (4.0 / N) * 0.5 * (1 - Math.cos(2 * Math.PI * i / N));

    // applying hann window function
    for ( i = 0; i < N; i++ )
    {
        xReLeft[i] = m_win[i]*leftA[i];
        //xReRight[i] = m_win[i]*rightA[i];
    }

    // nullify the imaginary part
    for ( i = 0; i < N; i++ )
    {
        xImLeft[i] = 0.0;
        //xImRight[i] = 0.0;
    }

    var magnitutel:Vector.<Number> = new Vector.<Number>(N);

    fftl.run( xReLeft, xImLeft );

    current = xReLeft;
    currf = xImLeft;

    for ( i = 0; i < N / 2; i++ )
    {
        var re:Number = xReLeft[i];
        var im:Number = xImLeft[i];
        magnitutel[i] = Math.sqrt(re * re + im * im);
    }

    const SCALE:Number = 20 / Math.LN10;
    var l:uint = this.total.length;
    for ( i = 0; i < N / 2; i++ )
    {
        magnitutel[i] = SCALE * Math.log( magnitutel[i] + Number.MIN_VALUE );
    }

    var bufferl:Vector.<Number> = new Vector.<Number>();

    for (i = 0; i < N / 2 ; i++)
    {
        bufferl[i] =  magnitutel[i];
    }

    var complete:Vector.<Vector.<Number>> = new Vector.<Vector.<Number>>();
    complete[0] = bufferl;
    this.total[step] = complete;

    this.step++;
} 
```

该函数在定时器（步进器）调度的事件中执行。显然我做错了什么，正如我所说的，我只有负值，而且更多的值在 1 到 7000 之间（至少）。

我要提前感谢您的帮助。

怀着敬意，保罗

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T14:24:06.913

负分贝值是可以的。只需添加一个常数（代表您的音量控制），直到您要着色的点数变为正数。保持负数的其余值通常仅在频谱图中显示或着色为黑色。无论多么负（因为它们可能只是 FFT 的数值噪声，可能是一个巨大的负 dB 数，甚至是 NaN 或 log(0) 的 -Inf）。

# objective-c - 从 appDelegate 更改所有表格单元格属性

> ID：11079604
> 
> 赞同：0
> 
> 时间：2012-06-18T08:55:20.483
> 
> 标签：objective-c, ios, uitableview

我有几个 UITableViews，我想做的是能够从单个类（即 AppDelegate 类）更改这些 UITableViews 的属性。

有谁知道是否可以这样做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T09:00:01.643

如果您使用的是 iOS5，那么您可以使用 UIAppearance

```
//For example this changes the background color of all UITableViews contained in a UIView
[[UITableView appearanceWhenContainedIn:[UIView class], nil] setBackgroundColor:[UIColor greenColor]]; 
```

# oop - 适配器——适配器模式的任何真实例子

> ID：11079605
> 
> 赞同：94
> 
> 时间：2012-06-18T08:55:29.033
> 
> 标签：oop, design-patterns, adapter, software-design

我想向我的团队演示[适配器模式的使用。](https://en.wikipedia.org/wiki/Adapter_pattern)我在网上阅读了很多书籍和文章。每个人都在引用一个有助于理解这个概念的例子（形状、存储卡、电子适配器等），但没有真正的案例研究。

您能否分享任何适配器模式的案例研究？

ps 我尝试在 stackoverflow 上搜索现有问题，但没有找到答案，因此将其发布为新问题。如果您知道已经有答案，请重定向。

* * *

## 回答 #1

> 赞同：79
> 
> 时间：2012-11-10T16:19:53.890

Adapter 的许多示例都是微不足道的或不切实际的（[矩形与 LegacyRectangle、Ratchet 与 Socket](http://www.vincehuston.org/dp/adapter.html)、[SquarePeg 与 RoundPeg](http://userpages.umbc.edu/~tarr/dp/lectures/Adapter-2pp.pdf)、[Duck 与土耳其](http://my.safaribooksonline.com/book/software-engineering-and-development/patterns/0596007124/being-adaptive/hfdesignpat-chp-7-sect-3)）。更糟糕的是，许多没有**为不同的 Adaptee 显示多个适配器**（[有人引用 Java 的 Arrays.asList 作为适配器模式的示例](https://stackoverflow.com/questions/1673841/examples-of-gof-design-patterns)）。*仅将一个类*的接口适配为与另一个类一起工作似乎是 GoF 适配器模式的一个弱示例。这种模式使用继承和多态性，因此人们期望有一个很好的例子来展示*针对不同适配者的适配器的多种实现*。

我发现的*最好的例子是在*[应用 UML 和模式：面向对象分析和设计以及迭代开发（第 3 版）](https://rads.stackoverflow.com/amzn/click/com/0131489062)的第 26 章。以下图片来自该书的 FTP 站点上提供的讲师资料。

第一个展示了应用程序如何使用功能相似但具有不同 API 的多个实现（适配对象）（例如，税收计算器、会计模块、信用授权服务等）。我们希望避免硬编码我们的域层代码来处理计算税收、售后、授权信用卡请求等不同的可能方式。这些都是可能会有所不同的外部模块，我们无法修改代码。适配器允许我们在适配器中进行硬编码，而我们的域层代码总是使用相同的接口（IWhateverAdapter 接口）。

![图 26.1](../Images/4c98dbf3ba87a6fd094e516a57dca12e.png)

我们在上图中没有看到实际的适配者。但是，下图显示了如何`postSale(...)`在 IAccountingAdapter 接口中进行多态调用，从而通过 SOAP 将销售过帐到 SAP 系统。

![图 26.2](../Images/84e6e5d49738b57b817cd5078823ef27.png)

* * *

## 回答 #2

> 赞同：53
> 
> 时间：2015-08-27T14:15:09.643

如何把一个法国人变成一个正常人...

```
 public interface IPerson
    {
        string Name { get; set; }
    }

    public interface IFrenchPerson
    {
        string Nom { get; set; }
    }

    public class Person : IPerson
    {
        public string Name { get; set; }
    }

    public class FrenchPerson : IFrenchPerson
    {
        public string Nom { get; set; }
    }

    // that is a service that we want to use with our French person
    // we cannot or don't want to change the service contract
    // therefore we need 'l'Adaptateur'
    public class PersonService
    {
        public void PrintName(IPerson person)
        {
            Debug.Write(person.Name);
        }
    }

    public class FrenchPersonAdapter : IPerson
    {
        private readonly IFrenchPerson frenchPerson;

        public FrenchPersonAdapter(IFrenchPerson frenchPerson)
        {
            this.frenchPerson = frenchPerson;
        }

        public string Name 
        {
            get { return frenchPerson.Nom; }
            set { frenchPerson.Nom = value; }
        }
    } 
```

例子

```
 var service = new PersonService();
    var person = new Person();
    var frenchPerson = new FrenchPerson();

    service.PrintName(person);
    service.PrintName(new FrenchPersonAdapter(frenchPerson)); 
```

* * *

## 回答 #3

> 赞同：42
> 
> 时间：2015-07-16T23:10:53.417

将一个接口转换为另一个接口。

> 适配器模式的任何真实示例

为了连接电源，我们在世界各地都有不同的接口。使用适配器，我们可以很容易地连接。

![在此处输入图像描述](../Images/18b54d96bcbe9e47c6e844de6768e7cf.png)

* * *

## 回答 #4

> 赞同：13
> 
> 时间：2016-03-08T05:05:49.183

这是一个模拟转换`analog data`为`digit data`.

它提供了一个将浮点数数据转换为二进制数据的适配器，它在现实世界中可能没有用，它只是有助于解释适配器模式的概念。

* * *

## 代码

*模拟信号.java*

```
package eric.designpattern.adapter;

public interface AnalogSignal {
    float[] getAnalog();

    void setAnalog(float[] analogData);

    void printAnalog();
} 
```

*数字信号.java*

```
package eric.designpattern.adapter;

public interface DigitSignal {
    byte[] getDigit();

    void setDigit(byte[] digitData);

    void printDigit();
} 
```

*FloatAnalogSignal.java*

```
package eric.designpattern.adapter;

import java.util.Arrays;

import org.slf4j.Logger;
import org.slf4j.LoggerFactory;

public class FloatAnalogSignal implements AnalogSignal {
    private Logger logger = LoggerFactory.getLogger(this.getClass());
    private float[] data;

    public FloatAnalogSignal(float[] data) {
        this.data = data;
    }

    @Override
    public float[] getAnalog() {
        return data;
    }

    @Override
    public void setAnalog(float[] analogData) {
        this.data = analogData;
    }

    @Override
    public void printAnalog() {
        logger.info("{}", Arrays.toString(getAnalog()));
    }
} 
```

*BinDigitSignal.java*

```
package eric.designpattern.adapter;

import java.util.Arrays;

import org.slf4j.Logger;
import org.slf4j.LoggerFactory;

public class BinDigitSignal implements DigitSignal {
    private Logger logger = LoggerFactory.getLogger(this.getClass());
    private byte[] data;

    public BinDigitSignal(byte[] data) {
        this.data = data;
    }

    @Override
    public byte[] getDigit() {
        return data;
    }

    @Override
    public void setDigit(byte[] digitData) {
        this.data = digitData;
    }

    @Override
    public void printDigit() {
        logger.info("{}", Arrays.toString(getDigit()));
    }
} 
```

*AnalogToDigitAdapter.java*

```
package eric.designpattern.adapter;

import java.util.Arrays;

import org.slf4j.Logger;
import org.slf4j.LoggerFactory;

/**
 * <p>
 * Adapter - convert analog data to digit data.
 * </p>
 * 
 * @author eric
 * @date Mar 8, 2016 1:07:00 PM
 */
public class AnalogToDigitAdapter implements DigitSignal {
    public static final float DEFAULT_THRESHOLD_FLOAT_TO_BIN = 1.0f; // default threshold,
    private Logger logger = LoggerFactory.getLogger(this.getClass());

    private AnalogSignal analogSignal;
    private byte[] digitData;
    private float threshold;
    private boolean cached;

    public AnalogToDigitAdapter(AnalogSignal analogSignal) {
        this(analogSignal, DEFAULT_THRESHOLD_FLOAT_TO_BIN);
    }

    public AnalogToDigitAdapter(AnalogSignal analogSignal, float threshold) {
        this.analogSignal = analogSignal;
        this.threshold = threshold;
        this.cached = false;
    }

    @Override
    public synchronized byte[] getDigit() {
        if (!cached) {
            float[] analogData = analogSignal.getAnalog();
            int len = analogData.length;
            digitData = new byte[len];

            for (int i = 0; i < len; i++) {
                digitData[i] = floatToByte(analogData[i]);
            }
        }

        return digitData;
    }

    // not supported, should set the inner analog data instead,
    @Override
    public void setDigit(byte[] digitData) {
        throw new UnsupportedOperationException();
    }

    public synchronized void setAnalogData(float[] analogData) {
        invalidCache();
        this.analogSignal.setAnalog(analogData);
    }

    public synchronized void invalidCache() {
        cached = false;
        digitData = null;
    }

    @Override
    public void printDigit() {
        logger.info("{}", Arrays.toString(getDigit()));
    }

    // float -> byte convert,
    private byte floatToByte(float f) {
        return (byte) (f >= threshold ? 1 : 0);
    }
} 
```

* * *

## 代码 - 测试用例

AdapterTest.java

```
package eric.designpattern.adapter.test;

import java.util.Arrays;

import junit.framework.TestCase;

import org.junit.Test;

import eric.designpattern.adapter.AnalogSignal;
import eric.designpattern.adapter.AnalogToDigitAdapter;
import eric.designpattern.adapter.BinDigitSignal;
import eric.designpattern.adapter.DigitSignal;
import eric.designpattern.adapter.FloatAnalogSignal;

public class AdapterTest extends TestCase {
    private float[] analogData = { 0.2f, 1.4f, 3.12f, 0.9f };
    private byte[] binData = { 0, 1, 1, 0 };
    private float[] analogData2 = { 1.2f, 1.4f, 0.12f, 0.9f };

    @Test
    public void testAdapter() {
        AnalogSignal analogSignal = new FloatAnalogSignal(analogData);
        analogSignal.printAnalog();

        DigitSignal digitSignal = new BinDigitSignal(binData);
        digitSignal.printDigit();

        // adapter
        AnalogToDigitAdapter adAdapter = new AnalogToDigitAdapter(analogSignal);
        adAdapter.printDigit();
        assertTrue(Arrays.equals(digitSignal.getDigit(), adAdapter.getDigit()));

        adAdapter.setAnalogData(analogData2);
        adAdapter.printDigit();
        assertFalse(Arrays.equals(digitSignal.getDigit(), adAdapter.getDigit()));
    }
} 
```

* * *

## 依赖 - 通过 Maven

```
 <dependency>
        <groupId>junit</groupId>
        <artifactId>junit</artifactId>
        <version>4.8.2</version>
    </dependency>

    <dependency>
        <groupId>org.slf4j</groupId>
        <artifactId>slf4j-api</artifactId>
        <version>1.7.13</version>
    </dependency>
    <dependency>
        <groupId>org.slf4j</groupId>
        <artifactId>slf4j-log4j12</artifactId>
        <version>1.7.13</version>
    </dependency>
    <dependency>
        <groupId>log4j</groupId>
        <artifactId>log4j</artifactId>
        <version>1.2.16</version>
    </dependency> 
```

* * *

## 如何测试

只需运行单元测试。

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2014-05-31T03:26:27.683

> 适配器模式充当两个不兼容接口之间的桥梁。这种模式涉及一个称为适配器的类，它负责两个独立或不兼容的接口之间的通信。

现实世界的例子可能是语言翻译器或移动充电器。此 youtube 视频中的更多内容：

[Youtube - 适配器设计模式：简介](https://www.youtube.com/watch?v=YYC8_HOAFKY&list=PLmCsXDGbJHdjX4WzDCwIT93UZrwTFKP23)

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2018-02-21T19:25:02.197

当您必须处理具有相似行为的不同接口（这通常意味着具有相似行为但具有不同方法的类）时，您可以使用适配器设计模式。一个例子是一个连接到三星电视的类和另一个连接到索尼电视的类。它们将共享常见的行为，如打开菜单、开始播放、连接到网络等，但每个库都有不同的实现（具有不同的方法名称和签名）。这些不同的供应商特定实现在 UML 图中称为**Adaptee 。**

因此，在您的代码（在 UML 图中称为**Client** ）中，您可以创建一个通用接口（在 UML 图中称为**Target**）而不是硬编码每个供应商（或**Adaptee** ）的方法调用，以包装这些类似的行为和工作只有一种类型的对象。

 **然后，**适配器**将实现**Target**接口，将其方法调用**委托**给通过构造函数传递给**适配器的适配器。**

为了让您在 Java 代码中实现这一点，我编写了一个非常简单的项目，使用与上面提到的完全相同的示例，使用适配器来处理多个智能电视接口。该代码很小，有据可查且易于解释，因此请深入研究它以了解真实世界的实现情况。

只需下载代码并将其作为 Maven 项目导入 Eclipse（或您最喜欢的 IDE）。**您可以通过运行org.example.Main.java**来执行代码。请记住，这里重要的是要了解如何将类和接口组合在一起以设计模式。我还在**com.thirdparty.libs**包中创建了一些假的**Adaptee**。希望能帮助到你！

[https://github.com/Dannemann/java-design-patterns](https://github.com/Dannemann/java-design-patterns)

* * *

## 回答 #7

> 赞同：5
> 
> 时间：2019-11-14T12:42:16.397

*适配器设计模式有助于将一个类的接口转换为客户期望的接口。*

**示例：** *您有一个服务，它通过将城市名称作为输入值来返回天气（以摄氏度为单位）。现在，假设您的客户想要传递邮政编码作为输入，并期望得到城市的温度作为回报。在这里，您需要一个适配器来实现这一点。*

```
public interface IWetherFinder {
    public double getTemperature(String cityName);
}

class WeatherFinder implements IWetherFinder{
   @Override
   public double getTemperature(String cityName){
     return 40;
   }
}

interface IWeatherFinderClient
{
   public double getTemperature(String zipcode);
}  

public class WeatherAdapter implements IWeatherFinderClient {

    @Override
    public double getTemperature(String zipcode) {

        //method to get cityname by zipcode 
        String cityName = getCityName(zipcode);

        //invoke actual service
        IWetherFinder wetherFinder = new WeatherFinder();
        return wetherFinder.getTemperature(cityName);
    }

    private String getCityName(String zipCode) {
        return "Banaglore";
    }
} 
```

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2014-07-30T09:41:56.983

您可以在此处找到用于防御注入攻击的适配器模式的 PHP 实现：

[http://www.php5dp.com/category/design-patterns/adapter-composition/](http://www.php5dp.com/category/design-patterns/adapter-composition/)

适配器模式的一个有趣的方面是它有两种风格：依赖于多重继承的类适配器和依赖于组合的对象适配器。上面的例子依赖于组合。

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2014-12-09T09:38:20.680

一个真实的例子是 Qt-Dbus。

qt-dbus 有一个实用程序，可以从提供的 xml 文件生成适配​​器和接口代码。以下是执行此操作的步骤。

```
 1\. Create the xml file - this xml file should have the interfaces 
that can be viewed by the qdbus-view in the system either on 
the system or session bus.

    2.With the utility - qdbusxml2cpp , you generate the interface adaptor code. 
This interface adaptor does the demarshalling of the data that is 
received from the client. After demarshalling, it invokes the 
user defined - custom methods ( we can say as adaptee).

    3\. At the client side, we generate the interface from the xml file. 
This interface is invoked by the client. The interface does the 
marshalling of the data and invokes the adaptor interface. As told 
in the point number 2, the adaptor interface does the demarshalling 
and calls the adaptee - user defined methods. 
```

您可以在此处查看 Qt-Dbus 的完整示例 -

[http://www.tune2wizard.com/linux-qt-signals-and-slots-qt-d-bus/](http://www.tune2wizard.com/linux-qt-signals-and-slots-qt-d-bus/)

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2015-12-14T01:46:05.640

当您有一个无法更改但需要使用的接口时，请使用适配器。把它看成你是办公室里的新人，你不能让白发苍苍的人遵守你的规则——你必须适应他们的规则。这是一个真实的例子，来自我曾经参与过的一个真实项目，其中用户界面是给定的。

您有一个应用程序将文件中的所有行读入 List 数据结构并将它们显示在网格中（我们将其称为底层数据存储接口 IDataStore）。用户可以通过单击“首页”、“上一页”、“下一页”、“最后一页”按钮来浏览这些数据。一切正常。

现在应用程序需要与生产日志一起使用，这些日志太大而无法读入内存，但用户仍然需要浏览它！一种解决方案是实现一个缓存来存储第一页、下一页、上一页和最后一页。我们想要的是当用户点击“下一页”时，我们从缓存中返回页面并更新缓存；当他们点击最后一页时，我们从缓存中返回最后一页。在后台，我们有一个文件流在做所有的事情。通过这样做，我们在内存中只有四页，而不是整个文件。

您可以使用适配器将这个新的缓存功能添加到您的应用程序中，而用户不会注意到它。我们扩展当前的 IDataStore 并将其称为 CacheDataStore。如果要加载的文件很大，我们使用 CacheDataStore。当我们请求第一页、下一页、上一页和最后一页时，信息将被路由到我们的缓存。

谁知道呢，明天老板要开始从数据库表中读取文件。您所做的仍然是像对缓存所做的那样将 IDataStore 扩展到 SQLDataStore，在后台设置连接。当他们单击 Next page 时，您将生成必要的 sql 查询以从数据库中获取接下来的几百行。

本质上，应用程序的原始界面没有改变。我们简单地调整了现代和酷炫的功能来工作，同时保留旧界面。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2017-09-08T13:09:00.190

@Justice o 的示例没有清楚地讨论适配器模式。扩展他的答案 - 我们有我们的消费者代码使用的现有接口 IDataStore，我们无法更改它。现在我们被要求使用 XYZ 库中的一个很酷的新类来执行我们想要实现的功能，但是，但是，我们无法更改该类来扩展我们的 IDataStore，已经看到问题了吗？创建一个新类 - ADAPTER，它实现了我们的消费者代码期望的接口，即 IDataStore，并通过使用我们需要具有其特性的库中的类 - ADAPTEE，作为我们 ADAPTER 中的成员，我们可以实现我们想要的。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2018-12-11T13:54:42.413

根据 Judith Bishop 的“C# 3.0 设计模式”一书，Apple 使用适配器模式来调整 Mac OS 以与 Intel 产品一起工作（在第 4 章中进行了解释，此处摘录[2](https://docs.microsoft.com/en-us/previous-versions/visualstudio/visual-studio-2008/ff652513(v=orm.10))）

*   [C# 3.0 设计模式](https://epdf.tips/c-sharp-30-design-patterns.html)
*   [结构模式：适配器和外观](https://docs.microsoft.com/en-us/previous-versions/visualstudio/visual-studio-2008/ff652513(v=orm.10))

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2020-08-08T14:45:18.357

Yii 框架的一个例子是：Yii 通过接口 ICache 使用内部缓存。 [https://www.yiiframework.com/doc/api/1.1/ICache](https://www.yiiframework.com/doc/api/1.1/ICache)

其签名如下：-

```
abstract public boolean set(string $id, mixed $value, integer $expire=0, ICacheDependency $dependency=NULL) 
```

```
abstract public mixed get(string $id) 
```

假设你想在 Yii 项目中使用 symfony 缓存库 [https://packagist.org/packages/symfony/cache](https://packagist.org/packages/symfony/cache)和它的缓存接口，通过在 Yii 服务组件（服务定位器）配置 [https:// /github.com/symfony/cache-contracts/blob/master/CacheInterface.php](https://github.com/symfony/cache-contracts/blob/master/CacheInterface.php)

```
 public function get(string $key, callable $callback, float $beta = null, array &$metadata = null); 
```

我们看到，symfony 缓存有一个只有一个 get 方法的接口，缺少一个 set 方法和一个不同的 get 方法签名，因为 Symfony 在提供第二个可调用参数时也使用 get 方法作为 setter。

由于 Yii 核心在内部使用这个 Yii 缓存/接口，因此很难（扩展 Yii/YiiBase）如果不是不可能的话，重写对该接口的调用。

另外 Symfony 缓存也不是我们的类，所以我们不能重写它的接口来适应 Yii 缓存接口。

所以这里来拯救适配器模式。我们将编写一个映射 = 一个中间适配器，它将 Yii 缓存接口调用映射到 Symfony 缓存接口

看起来像这样

```
 class YiiToSymfonyCacheAdapter implements \Yii\system\caching\ICache
    {
        private \Symfony\Contracts\Cache\CacheInterface $symfonyCache;

        public function __construct(\Symfony\Contracts\Cache\CacheInterface $symfonyCache)
        {
            $this->symfonyCache = $symfonyCache;
        }

      public boolean set(string $id, mixed $value, integer $expire=0, ICacheDependency 
       $dependency=NULL) 
      {

          // https://symfony.com/doc/current/cache.html
          return $this->symfonyCache->get(
              $id, 
              function($item) { 
              // some logic .. 
               return $value; 
              }
          );

//          https://github.com/symfony/cache/blob/master/Adapter/MemcachedAdapter.php
// if a class could be called statically, the adapter could call statically also eg. like this
//          return \Symfony\Component\Cache\Adapter\MemcacheAdapter::get(
//              $id, 
//              function($item) { 
//              // some logic .. 
//               return $value; 
//              }
          );
       }

       public mixed get(string $id) 
       {
           // https://github.com/symfony/cache/blob/master/Adapter/FilesystemAdapter.php 
           // if a class could be called statically, the adapter could call statically also eg. like this
           // \Symfony\Component\Cache\Adapter\FileSystemAdapter::get($id)
           return $this->symfonyCache->get($id) 
       }
    } 
```

* * *

## 回答 #14

> 赞同：-1
> 
> 时间：2014-11-17T12:33:34.457

一个真实的例子可以是应用程序中的报告文档。简单的代码就像这里。

我认为适配器对于编程结构非常有用。

```
class WordAdaptee implements IReport{
    public void report(String s) {
        System.out.println(s +" Word");
    }
}

class ExcellAdaptee implements IReport{
    public void report(String s) {
        System.out.println(s +" Excel");
    }
}

class ReportAdapter implements IReport{
    WordAdaptee wordAdaptee=new WordAdaptee();
    @Override
    public void report(String s) {
        wordAdaptee.report(s);
    }
}

interface IReport {
    public void report(String s);
}

public class Main {
    public static void main(String[] args) {

        //create the interface that client wants
        IReport iReport=new ReportAdapter();

        //we want to write a report both from excel and world
        iReport.report("Trial report1 with one adaptee");  //we can directly write the report if one adaptee is avaliable 

        //assume there are N adaptees so it is like in our example
        IReport[] iReport2={new ExcellAdaptee(),new WordAdaptee()};

        //here we can use Polymorphism here  
        for (int i = 0; i < iReport2.length; i++) {
            iReport2[i].report("Trial report 2");
        }
    }
} 
```

结果将是：

```
Trial report1 with one adaptee Word
Trial report 2 Excel
Trial report 2 Word 
```

* * *

## 回答 #15

> 赞同：-1
> 
> 时间：2017-10-20T13:06:10.237

这是适配器实现的示例：

```
interface NokiaInterface {
    chargementNokia(x:boolean):void
}

class SamsungAdapter implements NokiaInterface {
//nokia chargement adapted to samsung
    chargementNokia(x:boolean){
        const old= new SamsungCharger();
        let y:number = x ? 20 : 1;
        old.charge(y);
      }
}

class SamsungCharger {
      charge(x:number){
            console.log("chrgement x ==>", x);
      }
}

function main() {
      //charge samsung with nokia charger
      const adapter = new SamsungAdapter();
      adapter.chargementNokia(true);
} 
```**

# ios - Photoshop-like Curves tool in Objective-C

> ID：11079607
> 
> 赞同：0
> 
> 时间：2012-06-18T08:55:40.337
> 
> 标签：ios, image-processing, curves

I want to adjust an image like curves tool in photoshop. It changes image color, constrast, etc in each R,G,B channel or all RGB. any idea to do this task in objective C?

I found this link [http://www.planet-source-code.com/vb/scripts/ShowCode.asp?txtCodeId=68577&lngWId=-1](http://www.planet-source-code.com/vb/scripts/ShowCode.asp?txtCodeId=68577&lngWId=-1) but it only adjust curves in all image using VB, not support each color channel like photoshop

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T15:57:16.067

曲线在 Photoshop 中的工作方式使用直方图方法。本质上，通过计算整个图像中每个值的数量（可以分配的值在 histo 的 X 轴上）来获取直方图。可以执行此操作来获得每个颜色通道的直方图。

在此处查找图像直方图 [http://en.wikipedia.org/wiki/Image_histogram](http://en.wikipedia.org/wiki/Image_histogram)

获得直方图后，可以应用曲线（如果您愿意，可以应用到每个颜色通道）。标准曲线是一二一或线性曲线。这意味着当实际像素值为 10 时，分配给已编辑图像的值为 10。

可以想象任何曲线甚至随机分布。虽然有许多方法，但标准方法是基于日志的直方图方法。这实际上是查看图像直方图，并将最大的变换曲线斜率应用于具有最高输入像素数的直方图区域，从而为最多的像素提供良好的对比度。

就曲线而言，您放置在直方图顶部的曲线只是定义了输入像素值到编辑像素值的映射函数。您可以在不制作直方图的情况下应用曲线，但 histo 对您的用户来说是一个很好的参考，以便他们知道他们想要在哪里编辑曲线以获得最佳效果。

# android - Android: Trouble Rotating a bitmap on orientation sensor Y axis (pitch)

> ID：11079609
> 
> 赞同：0
> 
> 时间：2012-06-18T08:55:50.580
> 
> 标签：android, bitmap, draw, android-sensors, rotateanimation

Hello i am in desperate need of help on this i have an image of a steering and i want to rotate it when the phone is tilted left or right. My app is in landscape mode. You should see the code below. The problem is that the bitmap does not rotate and redraws on different position. I am unable to find the problem.

```
public class Accelerometer extends Activity {

 mySteering steering = null;
 private static SensorManager mySensorManager;
 private boolean sensorrunning;
 public  float y;

   /** Called when the activity is first created. */
   @Override
   public void onCreate(Bundle savedInstanceState) {
       super.onCreate(savedInstanceState);

       steering = new mySteering(this);

       setContentView(steering);

       mySensorManager = (SensorManager)getSystemService(Context.SENSOR_SERVICE);
       List<Sensor> mySensors = mySensorManager.getSensorList(Sensor.TYPE_ORIENTATION);

       if(mySensors.size() > 0){
        mySensorManager.registerListener(mySensorEventListener, mySensors.get(0), SensorManager.SENSOR_DELAY_NORMAL);
        sensorrunning = true;
        Toast.makeText(this, "Start ORIENTATION Sensor", Toast.LENGTH_LONG).show();
       }
       else{
        Toast.makeText(this, "No ORIENTATION Sensor", Toast.LENGTH_LONG).show();
        sensorrunning = false;
        finish();
       }

   }

   private SensorEventListener mySensorEventListener = new SensorEventListener() {

  @Override
  public void onSensorChanged(SensorEvent event) {
   // TODO Auto-generated method stub

   y = event.values[1];
  }

  @Override
  public void onAccuracyChanged(Sensor sensor, int accuracy) {
   // TODO Auto-generated method stub

  }
 };

 @Override
 protected void onDestroy() {
  // TODO Auto-generated method stub
  super.onDestroy();

  if(sensorrunning){
   mySensorManager.unregisterListener(mySensorEventListener);
   Toast.makeText(Accelerometer.this, "unregisterListener", Toast.LENGTH_SHORT).show();
  }
 }

@Override
protected void onStart() {
    // TODO Auto-generated method stub
    super.onStart();
}

public class mySteering extends View {
    static final int width = 50;
    static final int height = 50;

    Accelerometer sensor = new Accelerometer();
    Matrix rot = new Matrix();

    public mySteering(Context context) {
        super(context);

    }

    protected void onDraw(Canvas canvas) {

        Bitmap bmp = BitmapFactory.decodeResource(getResources(),
                R.drawable.steering);
        Paint p = new Paint(); // set some paint options
        p.setColor(Color.WHITE);

        int canvasWidth = canvas.getWidth();
        int canvasHeight = canvas.getHeight();
        int centreX = (canvasWidth) / 2;

        int centreY = (canvasHeight) / 2;

        canvas.drawText("This is on Y   " + sensor.y, 5, 40, p);

        if (sensor.y <= 12.0 && sensor.y >= -12.0) {

             canvas.drawBitmap(bmp, centreX, centreY, null);
             invalidate();
             }  

        if (sensor.y > 20.0 && sensor.y < 0.0) {

         rot.setRotate(45, centreX, centreY);
         canvas.drawBitmap(bmp, rot, p);
         invalidate();
         } 

         if (sensor.y < -20.0 && sensor.y > 0.0 ) {
             rot.setRotate(-45, centreX, centreY);
             canvas.drawBitmap(bmp, rot, p);
             invalidate();
         } 
```

Can some one figure out or alter the mistakes in the code? Thanks in advance. This is how it looks this time is not rotating or not even redrawn.

[screenshot](https://picasaweb.google.com/lh/photo/p84qZy9xWA2UKojvdece3dMTjNZETYmyPJy0liipFm0?feat=directlink)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T01:36:07.863

您可能必须按如下方式传递传感器值：

```
 public void onSensorChanged(SensorEvent event) {
   // TODO Auto-generated method stub

   steering.sensor = this;
   y = event.values[1];
   steering.invalidate();
  } 
```

# mysql - Should I try to rid my MySQL database of back-slashes?

> ID：11079611
> 
> 赞同：1
> 
> 时间：2012-06-18T08:55:59.620
> 
> 标签：mysql, magic-quotes-gpc

I'm using PDO prepared statements to insert data into a MySQL database, and I notice that apostrophes (single quotes) in strings are being stored in the database with back-slashes (`\`) preceding them.

I use `stripslashes($string)` on output, and of course this gets rid of them.

I searched my server's `phpinfo()` information (PHP version 5.2.17) for "magic_quotes" and found:

*   magic_quotes_gpc: local value = on, master value = on
*   magic_quotes_runtime: local value = off, master value = off
*   magic_quotes_sybase: local value = off, master value = off

**Firstly**, would turning magic_quotes_gpc off prevent the occurrence of the back-slashes? I don't currently have access to the server php.ini master settings, but as I understand it I would be able to disable it by configuring the root .htaccess file with the directive `php_flag magic_quotes_gpc Off`.

**Secondly**, is the prevention of these back-slashes in the database desirable? I ask this because I saw the somewhat cryptic remark [here](https://stackoverflow.com/a/7356010) to "*think twice before you do*".

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T09:00:00.920

> 关闭magic_quotes_gpc 会阻止反斜杠的出现吗？

大概是。

> 在数据库中防止这些反斜杠是否可取？

是的。他们没有任何目的。如果您使用 PDO 和适当的参数化查询，那么魔术引号用来解决的问题已经解决了。

请参阅[有关魔术引号的 PHP 手册，](http://php.net/manual/en/security.magicquotes.php)了解为什么使用它们，以及为什么不应再使用它们。

# perl - 如何在 Perl 中关闭从页面获取图像

> ID：11079615
> 
> 赞同：0
> 
> 时间：2012-06-18T08:56:33.253
> 
> 标签：perl

使用以下代码：

```
use LWP::Simple;
my $url= "http://example.com";
my $html= get $url; 
```

我能够在 $html 变量中获取源代码，当我回显变量时，它确实有代码。我想知道如何将该页面上的其中一个图像保存到我的名为 images 的文件夹中，该文件夹位于该文件现在所在的同一文件夹中？我正在通过`my $IE->Navigate($url);`方法进入该页面。

我尝试使用 Image::Grab 模块，但它不会在没有强制的情况下安装（不知道该怎么做）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-18T09:05:04.660

首先，使用适当的模块解析 HTML（我倾向于[HTML::TreeBuilder::XPath](https://metacpan.org/module/HTML%3a%3aTreeBuilder%3a%3aXPath)）。

其次，使用其 API 查找`<img>`您关心的元素并提取其 URI。

第三，如果需要，将该 URI 转换为带有[URI的绝对值。](https://metacpan.org/module/URI)

第四，使用`getstore`LWP::Simple 中的方法来保存它。

# windows - Convert unix to windows shell script

> ID：11079616
> 
> 赞同：0
> 
> 时间：2012-06-18T08:56:34.147
> 
> 标签：windows, shell, batch-file

I'm trying to convert the following unix shell script to windows:

```
for strWorkerDirectory in $BASEDIR/worker01/applogs $BASEDIR/worker01/filtered   $BASEDIR/worker01/filtered/error-logs $BASEDIR/worker01/filtered/logs $BASEDIR/worker01/filtered/session-logs
do
  if [ ! -d $strWorkerDirectory ]; then
    mkdir -p $strWorkerDirectory
  fi
done 
```

So far, I came up with this:

```
FOR %%strWorkerDirectory IN (%BASEDIR%worker01\applogs %BASEDIR%worker01\filtered %BASEDIR%worker01\filtered\error-logs %BASEDIR%worker01\filtered\logs %BASEDIR%worker01\filtered\session-logs) DO 
( 
IF exist %%strWorkerDirectory ( echo %%strWorkerDirectory exists ) ELSE ( mkdir %%strWorkerDirectory && echo %%strWorkerDirectory created)
) 
```

but i'm getting an error message which just says something is wrong here

```
"%strWorkerDirectory" kann syntaktisch an dieser Stelle nicht verarbeitet werden. 
```

What would be the correct conversion here?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-18T10:28:34.540

两个问题：

1.  “循环变量”只能有一个字符。尝试仅`%%s`使用示例。请注意，根据`FOR`循环的类型，名称具有含义（`FOR /?`有关更多信息，请参阅）；例如，当与`FOR /F "tokens=..."` 一起使用时。在你的情况下，它应该没关系。
2.  左大括号必须与`DO`

完整示例：

```
FOR %%s IN (%BASEDIR%worker01\applogs %BASEDIR%worker01\filtered %BASEDIR%worker01\filtered\error-logs %BASEDIR%worker01\filtered\logs %BASEDIR%worker01\filtered\session-logs) DO (
IF exist %%s ( echo %%s exists ) ELSE ( echo mkdir %%s && echo %%s created)
) 
```

提示：您可以使用插入符号 ( `^`) 作为行继续符以避免过长的行。只需确保插入符号后确实没有其他字符（甚至没有空格）。

```
FOR %%s IN (%BASEDIR%worker01\applogs  ^
  %BASEDIR%worker01\filtered ^
  %BASEDIR%worker01\filtered\error-logs ^
  %BASEDIR%worker01\filtered\logs ^
  %BASEDIR%worker01\filtered\session-logs) DO (
    IF exist %%s ( echo %%s exists ) ELSE ( echo mkdir %%s && echo %%s created)
) 
```

**编辑**正如评论者@dbenham 指出的那样，上面的行延续实际上并不是必需的。

# ruby-on-rails - `next_migration_number'：在 rails 中使用 wysihat-engine 的 NotImplementedError (NotImplementedError)

> ID：11079617
> 
> 赞同：6
> 
> 时间：2012-06-18T08:56:36.803
> 
> 标签：ruby-on-rails, wysihat

我正在使用以下 gem 作为编辑器。

```
gem "wysihat-engine", "~> 0.1.13" 
```

当我运行“rails generate wysihat”时，它会生成所有图像文件，但无法生成迁移并给出以下错误

```
c:/Ruby193/lib/ruby/gems/1.9.1/gems/railties-3.2.3/lib/rails/generators/migration.rb:30:in `next_migration_number': NotImplementedError (NotImplementedError)
    from c:/Ruby193/lib/ruby/gems/1.9.1/gems/railties-3.2.3/lib/rails/generators/migration.rb:49:in `migration_template'
    from c:/Ruby193/lib/ruby/gems/1.9.1/gems/wysihat-engine-0.1.13/lib/generators/wysihat_generator.rb:60:in `install_wysihat'
    from c:/Ruby193/lib/ruby/gems/1.9.1/gems/thor-0.14.6/lib/thor/task.rb:22:in `run'
    from c:/Ruby193/lib/ruby/gems/1.9.1/gems/thor-0.14.6/lib/thor/invocation.rb:118:in `invoke_task'
    from c:/Ruby193/lib/ruby/gems/1.9.1/gems/thor-0.14.6/lib/thor/invocation.rb:124:in `block in invoke_all'
    from c:/Ruby193/lib/ruby/gems/1.9.1/gems/thor-0.14.6/lib/thor/invocation.rb:124:in `each'
    from c:/Ruby193/lib/ruby/gems/1.9.1/gems/thor-0.14.6/lib/thor/invocation.rb:124:in `map'
    from c:/Ruby193/lib/ruby/gems/1.9.1/gems/thor-0.14.6/lib/thor/invocation.rb:124:in `invoke_all'
    from c:/Ruby193/lib/ruby/gems/1.9.1/gems/thor-0.14.6/lib/thor/group.rb:226:in `dispatch'
    from c:/Ruby193/lib/ruby/gems/1.9.1/gems/thor-0.14.6/lib/thor/base.rb:389:in `start'
    from c:/Ruby193/lib/ruby/gems/1.9.1/gems/railties-3.2.3/lib/rails/generators.rb:170:in `invoke'
    from c:/Ruby193/lib/ruby/gems/1.9.1/gems/railties-3.2.3/lib/rails/commands/generate.rb:12:in `<top (required)>'
    from c:/Ruby193/lib/ruby/gems/1.9.1/gems/activesupport-3.2.3/lib/active_support/dependencies.rb:251:in `require'
    from c:/Ruby193/lib/ruby/gems/1.9.1/gems/activesupport-3.2.3/lib/active_support/dependencies.rb:251:in `block in require'
    from c:/Ruby193/lib/ruby/gems/1.9.1/gems/activesupport-3.2.3/lib/active_support/dependencies.rb:236:in `load_dependency'
    from c:/Ruby193/lib/ruby/gems/1.9.1/gems/activesupport-3.2.3/lib/active_support/dependencies.rb:251:in `require'
    from c:/Ruby193/lib/ruby/gems/1.9.1/gems/railties-3.2.3/lib/rails/commands.rb:29:in `<top (required)>'
    from script/rails:6:in `require'
    from script/rails:6:in `<main>' 
```

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2014-09-10T13:36:45.920

我刚刚在 Rails 4.1.5 中遇到了这个问题

我通过在我的迁移中实现它来修复它，如下所示：

```
class MigrationGenerator < ::Rails::Generators::Base
  include Rails::Generators::Migration

  private
  def self.next_migration_number(dirname)
    next_migration_number = current_migration_number(dirname) + 1
    ActiveRecord::Migration.next_migration_number(next_migration_number)
  end
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-03T14:17:51.830

使用 include ActiveRecord::Generators::Base 代替。（更新到最新版本的 gem 可能有效）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-07-23T14:44:00.257

```
require 'rails/generators/active_record'
class YourGenerator < ActiveRecord::Generators::Base
  # save you from `next_migration_number': NotImplementedError and undefined method `migration_template'
end 
```

# python - Python DB API 列表

> ID：11079621
> 
> 赞同：6
> 
> 时间：2012-06-18T08:56:44.603
> 
> 标签：python, database, python-db-api

如何使用 Python 的 DB API 列出数据库的表？

如果做不到这一点，还有其他方法吗？

谢谢

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-06-18T08:58:30.637

DBAPI 没有此功能，因此很遗憾您需要使用特定于数据库引擎的 SQL（没有列出表的标准化方法）。

*   MySQL：[`SHOW TABLES`](http://dev.mysql.com/doc/refman/5.1/en/show-tables.html)
*   PostgreSQL：[`SELECT tablename FROM pg_tables WHERE schemaname = 'public'`](http://www.postgresql.org/docs/9.1/static/view-pg-tables.html)
*   SQLite：[`SELECT name FROM sqlite_master WHERE type = 'table'`](https://stackoverflow.com/a/82889/298479)
*   微软 SQL：[`SELECT Distinct TABLE_NAME FROM information_schema.TABLES`](https://stackoverflow.com/a/6598435/298479)
*   甲骨文：[`SELECT table_name FROM all_tables`](https://stackoverflow.com/a/205746/298479)
*   SAP HANA：[`SELECT table_name FROM tables`](http://help.sap.de/hana/SAP_HANA_SQL_and_System_Views_Reference_en.pdf)

# asp.net - 在会话变量中显示多个数据

> ID：11079625
> 
> 赞同：1
> 
> 时间：2012-06-18T08:57:07.850
> 
> 标签：asp.net, session, webforms

在我的应用程序中，我从数据库中检索数据。在数据库中包含 10 条记录。但是当我在页面中显示记录时，它只显示一条记录。我希望显示所有 10 条记录。我使用会话变量在页面中存储和显示数据。我不希望任何控件来绑定数据。我只想使用会话变量来存储和显示数据。下面我写代码。我知道会话只存储一个值，但我希望会话存储多个值并显示多个数据。

.cs 文件

```
protected void Page_Load(object sender, EventArgs e)
    {
        SqlConnection con = new SqlConnection("Data Source=Aarambh;Initial Catalog=rebuild_technology;Integrated Security=True");
        con.Open();
        SqlCommand cmd = new SqlCommand("select * from content_managment ", con);
        SqlDataAdapter da = new SqlDataAdapter(cmd);
        DataSet ds = new DataSet();
        da.Fill(ds);
        foreach (DataRow dr in ds.Tables[0].Rows)

        {
            Session["divhtml_heading1"] = dr["divhtml_content"].ToString();

        }
} 
```

这里我在 aspx 页面中显示数据。

**源代码**

```
<%@ Page Language="C#" MasterPageFile="~/MasterPage.master" AutoEventWireup="true" CodeFile="Default.aspx.cs" Inherits="Home" Title="Untitled Page" %>
<asp:Content ID="Content1" ContentPlaceHolderID="ContentPlaceHolder1" Runat="Server">
 <% Response.Write(Session["divhtml_heading1"].ToString()); %>
</asp:Content> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T09:01:47.010

我建议将所有数据库内容存储在自定义对象中，例如

```
List<string> lstOfDivHtml = new List<string>(); 
```

将内容存储在 foreach 循环中，例如

```
 foreach (DataRow dr in ds.Tables[0].Rows)
 {
    lstOfDivHtml.Add(dr["divhtml_content"].ToString());
 } 
```

您在 forloop 中填充 lstOfDivHtml 并在 for 循环之后将其设置为 session 一次

```
Session["divhtml_heading1"] = lstOfDivHtml 
```

当您在页面上显示内容时，从 Session 中检索 lstofDivHtml 并在循环中显示它

```
var list = Session["divhtml_heading1"] as List<string>; // now loop over 'list'. 
```

附言

```
protected void Page_Load(object sender, EventArgs e)
    {
        //Define list
        List<string> lstOfDivHtml = new List<string>();  
        SqlConnection con = new SqlConnection("Data Source=Aarambh;Initial Catalog=rebuild_technology;Integrated Security=True");
        con.Open();
        SqlCommand cmd = new SqlCommand("select * from content_managment ", con);
        SqlDataAdapter da = new SqlDataAdapter(cmd);
        DataSet ds = new DataSet();
        da.Fill(ds);
        foreach (DataRow dr in ds.Tables[0].Rows)
        {
          //add records from dr to lstOfDivHtml 
          lstOfDivHtml.Add(dr["divhtml_content"].ToString());
        }
  } 
```

在页面标记或代码隐藏

```
<% 
var list = Session["divhtml_heading1"] as List<string>;
foreach(var item in  list )
{
 Response.Write(item); 
}
%> 
```

现在不能比这更具体了:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T15:09:48.080

快速一种肮脏的方法是使用：

```
Session["divhtml_heading1"] &= dr["divhtml_content"].ToString(); 
```

**追加**行数据，而不是：

```
Session["divhtml_heading1"] = dr["divhtml_content"].ToString(); 
```

**替换**行数据。

# gcc - 使用 -Lpath -lname 选项与直接提供库文件

> ID：11079636
> 
> 赞同：0
> 
> 时间：2012-06-18T08:57:40.273
> 
> 标签：gcc, linker, static-linking

最近，我遇到了[链接问题和`VPATH`](https://stackoverflow.com/questions/11078582/how-to-give-a-dependency-that-doesnt-appear-in-vpath-involved)这个问题的副作用。

假设您正在实现一个库，并且您希望将您的测试与它链接起来。你有两个选择（我知道）：

*   使用`-L`和`-l`选项：

    ```
    gcc main.o -Lpath/to/lib -lname 
    ```

*   直接给出库文件：

    ```
    gcc main.o path/to/lib/libname.a 
    ```

我的问题是，鉴于我正在链接到我自己的正在实施的库（而不是已安装并因此放置的库`/usr/lib`），**选择这两种方法有什么好处吗？**

目前我使用第一种方法，但第二种方法可以解决我遇到的问题`VPATH`。在进行切换之前，我特别想知道第二种方法是否存在某些警告。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T18:41:46.763

我能想到的唯一区别是第一种方法允许链接器选择共享库（如果存在）。第二个没有，因为您明确命名了`.a`静态存档。

如果您使用的是共享库，则存在差异：如果第二种形式命名一个没有 soname 的共享库，则应用程序将具有 DT_NEEDED 标记`path/to/lib/libname.so`，但第一种形式将具有值为 的标记`libname.so`。（如果共享库有一个将用于 DT_NEEDED 标记的 soname，但是指定了路径。）

# c - 二维数组的名称是否在 C 中给出了它的基地址？

> ID：11079637
> 
> 赞同：1
> 
> 时间：2012-06-18T08:57:53.353
> 
> 标签：c

二维数组的名称是否像一维数组一样在 C 中给出其基地址？以及如何将二维数组的基地址存储在指针变量中？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-18T08:59:58.677

它衰减为指向第一个元素的指针：

```
int a[5][7]; 
```

衰减到

```
int (*pa)[7] = a; 
```

在实践中，存储的值`pa`将与指向 的第一个`int`元素的指针相同`a`，但获取指向 的第一个元素的指针的正确方法`a`是使用

```
int *p_elm = &(a[0][0]); 
```

或等效地

```
int *p_elm = &(pa[0][0]); 
```

但是，请注意，指向第一个元素的指针不能（严格地）被视为指向`N*M`数组开头的指针。参见例如[http://www.lysator.liu.se/c/c-faq/c-2.html#2-11](http://www.lysator.liu.se/c/c-faq/c-2.html#2-11)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-18T09:01:45.833

是的，您将地址存储为：

```
int *p = &a[0][0]; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-18T09:02:31.397

二维数组本质上是一维数组，其中每个元素本身都是一个数组。

数组的名称等价于 &arrayName[0]。

分配指向该地址的指针与往常一样，例如：

```
int myArray[5][5];
int (*arrayptr)[5] = myArray; 
```

这`arrayptr`是一个指向 5 个整数数组的指针。因为`myArray`是第一个元素的地址，也就是`int[5]`，所以我们的声明很好。

但是，当您取消引用此指针时，您将获得第一个元素，它是一个数组。因此，您可以执行以下操作：

```
(*arrayptr)[3]; // parens necessary for precedence issues 
```

访问嵌套在“外部数组”的第一个元素内的数组中的第三个元素。它相当于

```
myArray[0][3]; 
```

发生的事情是您正在取消引用`arrayptr`，这将产生一个一维数组（在这种情况下大小为 5）.. 然后您要求这个一维数组的第 4 个元素。

现在，如果您要查找的是矩阵的左上角“角”，您将需要：

```
int *topleft = &(myArray[0][0]); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-18T09:06:57.180

使用运算符的*地址*指向基址的偏移量。

```
char base[2][2];
int *basepointer = &base; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-04-29T13:10:50.020

I would like to give answer specific to your question.

Whenever you pass name of a 2D Array, that name of array will be decayed into pointer to first element,

In a multi-dimensional array, as multi dimensional array is array of arrays, so first element will be array itself.

So name of 2D array will be decayed to pointer to array, ie pointer to first row having number of elements equal to number of columns in your 2D array.

Remember 2D array is received in a function as pointer to array not pointer to pointer.

```
 int main()
    {
     int arr[2][3];

     display(arr);
     ............

    }
     void display( int (*arr)[3])
    {

} 
```

# jquery - 使用 jQuery 删除位于 textarea 顶部的标签

> ID：11079638
> 
> 赞同：2
> 
> 时间：2012-06-18T08:57:57.210
> 
> 标签：jquery, textarea, label

我目前有一个`label`绝对定位在文本区域内的。

我正在尝试使以下工作：

一旦我点击`textarea`，`label`就会消失。一旦我点击外部`textarea`，检查是否有我添加的任何内容。如果没有，请放`label`后面。如果是，请忽略它。

[jsFiddle 在这里](http://jsfiddle.net/tDHwZ/2/)。

我试过了`$('html').click()`，但它似乎干扰了`textarea`点击。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-18T09:02:33.113

你想要焦点和模糊**工作演示**：http: [//jsfiddle.net/tDHwZ/10/](http://jsfiddle.net/tDHwZ/10/)

```
 $('#comment').focus(function() {
            $(this).prev().hide()  
        });
 $('#comment').blur(function() {
            if($(this).val()=='')
           $(this).prev().show()  
        }); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-18T09:00:50.087

对于这种情况，通过用 .blur() 替换**.click(** **)**事件，您应该可以达到预期的结果。

 **您可以查看下面的链接：

[http://jsfiddle.net/tDHwZ/27/](http://jsfiddle.net/tDHwZ/27/)

$(文档).ready(函数() {

```
 $('#comment').blur(function() {

        if($('#comment').val()!= "") {
           $('label[for=comment]').addClass('hidden');    
        } else {
           $('label[for=comment]').removeClass('hidden');                
        }

        if($('label[for=comment]').hasClass('hidden')) {
            $('label[for=comment]').hide();

        } else {
            $('label[for=comment]').show();
        }
    });

}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-18T09:21:35.460

如果您使用 HTML5，那么 placeholder 属性肯定会解决这个问题。或者如果不是 HTML5，那么这可能会有所帮助[http://trevordavis.net/blog/jquery-inline-form-labels](http://trevordavis.net/blog/jquery-inline-form-labels)**

# iphone - 如何根据特定字符串获取数组中的对象

> ID：11079641
> 
> 赞同：0
> 
> 时间：2012-06-18T08:58:08.937
> 
> 标签：iphone

我是 iphone 新手。我有一个数组，其中包含“04_Num”下面的对象，

```
 "04_Num/04Num.m3u",
    "04_Num/04Num001.mp3",
    "04_Num/04Num002.mp3",
    "04_Num/04Num003.mp3",
    "04_Num/04Num004.mp3",
    "04_Num/04Num005.mp3",
    "04_Num/04Num006.mp3",
    "04_Num/04Num007.mp3",
    "04_Num/04Num008.mp3",
    "04_Num/04Num009.mp3",
    "04_Num/04Num010.mp3",
    "04_Num/04Num011.mp3",
    "04_Num/04Num012.mp3",
    "04_Num/04Num013.mp3",
    "04_Num/04Num014.mp3",
    "04_Num/04Num015.mp3",
    "04_Num/04Num016.mp3",
    "04_Num/04Num017.mp3",
    "04_Num/04Num018.mp3",
    "04_Num/04Num019.mp3",
    "04_Num/04Num020.mp3",
    "04_Num/04Num021.mp3",
    "04_Num/04Num022.mp3",
    "04_Num/04Num023.mp3",
    "04_Num/04Num024.mp3",
    "04_Num/04Num025.mp3",
    "04_Num/04Num026.mp3",
    "04_Num/04Num027.mp3",
    "04_Num/04Num028.mp3",
    "04_Num/04Num029.mp3",
    "04_Num/04Num030.mp3",
    "04_Num/04Num031.mp3",
    "04_Num/04Num032.mp3",
    "04_Num/04Num033.mp3",
    "04_Num/04Num034.mp3",
    "04_Num/04Num035.mp3",
    "04_Num/04Num036.mp3" 
```

但在这里我只想要包含 .mp3 扩展名的对象，然后我必须将这些对象放入另一个数组中

如果有人知道这怎么可能，请帮助我...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T09:01:58.207

您可以迭代并仅获取具有 .mp3 的那个

像这样

```
//yourArrayThatContainsAllStrings contains all the strings
NSMutableArray *arrayOfMp3 = [[NSMutableArray alloc] init];

for (NSString *str in yourArrayThatContainsAllStrings) {
    if ([str rangeOfString:@".mp3"].location != NSNotFound) {
        [arrayOfMp3 addObject:str];
    }
}

//arrayOfMp3 will contain only the .mp3 files 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T09:07:44.023

```
NSMutableArray *mpthrees = [[NSMutableArray alloc] initWithCapacity:0];
for (NSString *file in songs) //Where songs is the array with the paths you have provided
{
    BOOL isMpthree = [[file pathExtension] isEqualToString:@"mp3"];
    if (isMpthree) [mpthrees addObject:file];
}
// Now mpthrees array holds only paths pointing to .mp3 files 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-18T09:25:45.833

```
// Let's call your array of strings as stringsArray
NSMutableArray *filteredArray = [[NSMutableArray alloc] init];

for (NSString *str in stringsArray) {
    if ([str hasSuffix:@".mp3"]) {
        [filteredArray addObject:str];
    } }

//filteredArray will contain only the strings ending with ".mp3" 
```

PS 由于您刚刚开始使用Objective C，我想重申Objective C NSString 对象总是以@ 符号开头。@"04_Num/04Num001.mp3"

# python - Django 仅向新条目发出信号

> ID：11079644
> 
> 赞同：14
> 
> 时间：2012-06-18T08:58:28.593
> 
> 标签：python, django, django-signals

*每当有新*文章添加到站点时，我都会使用 Django 的 post_save 信号向用户发送电子邮件。但是，每当我`save()`对已创建的文章使用方法时，用户仍然会收到新电子邮件。只有在添加了新条目时才可能收到电子邮件？

提前致谢

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-06-18T09:24:35.847

该`post_save`信号接收一个布尔`created`参数，该参数指示是否`instance`已创建保存。

```
def my_callback(sender, **kwargs):
    if kwargs['created']:
        print('Instance is new') 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-18T09:24:26.430

看看[https://docs.djangoproject.com/en/dev/ref/signals/#django.db.models.signals.post_save](https://docs.djangoproject.com/en/dev/ref/signals/#django.db.models.signals.post_save)

实际上有一个参数与信号“created: A boolean; True if a new record is created”一起传递。

我认为，这应该可以解决问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-18T09:04:05.210

检查 instance.id 是确定实例是否“新”的好方法。这仅在您使用由数据库自动生成的 id 时才有效。

# java - 关于 InetAddress "isReachable" 方法

> ID：11079646
> 
> 赞同：0
> 
> 时间：2012-06-18T08:58:31.980
> 
> 标签：java

为了开发设备监控系统，我使用 InetAdress`isReachable`方法来了解网络中的设备是否在线。我正在使用`ScheduledExecutorService`设备列表同时 ping`icmp`设备。

现在，如果要使用 10 个线程池 ping 的设备数量较低（例如 60 个设备）`ScheduledExecutorService`，它工作正常。意味着结果将正确显示设备状态。这里`isReachable`有 5000 毫秒的时间。如果设备数量增加到 80，`isReachable`即使设备在线，某些设备也会显示离线状态。如果我将`isReachable`方法超时时间增加到 10000 毫秒，设备状态就有更好的机会获得正确的状态。

从这些设备中，大多数设备都是基于 Linux 的系统，并且`isReachable`总是为它们返回正确的状态，但对于 Windows，行为是不可预测的。我想确保网络上的设备始终处于正确状态。还可以通过启动 java 进程来查看在线设备的退出值 0 来替代机制。

例如“ `Process proc = new ProcessBuilder("ping", host).start();`”

那么，有哪些专家会给出建议呢？具有上述 a 的设备的检查状态`Process`会比`isReachable`call 更好和可靠吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T09:18:10.577

在子进程中运行 ping 不太可能使事情变得更好；虽然 Java 进程的负载会减少，但您只是在一台机器内移动它。（此外，由于 ICMP ECHO（ping 的标准化核心）的工作方式，我不确定您是否真的可以从一台主机一次 ping 多台机器。）您可能遇到的另一个问题是一台机器可以响应 ping 而实际上没有*用处*可达；我见过内核工作的机器（使其可 ping 通）但没有工作的用户进程，你可以很容易地想象机器上特别有趣的服务正在关闭。（此外，一些防火墙会阻止 ping。）最好实际检测每台机器是否正在使用某种无操作连接到该机器上运行的真实服务。

如果您真的想跟踪大量机器的状态，您应该考虑使用为该任务设计的软件（例如，Nagios）。[对于ServerFault](https://serverfault.com/)而言，这比 Stack Overflow 更像是一个问题……</p>

# asp.net-mvc-3 - 在 IIS 上运行时，ASP.NET Web 应用程序中的模拟不起作用

> ID：11079651
> 
> 赞同：5
> 
> 时间：2012-06-18T08:58:58.857
> 
> 标签：asp.net-mvc-3, .net-4.0, windows-authentication, impersonation, kerberos

我正在研究适用于 Intranet 环境的 ASP.NET 4.0 MVC3 Web 应用程序。该应用程序使用 Windows 身份验证。它的应用程序池由在域控制器上设置了 spn 的域用户运行。使用 Kerberos 进行身份验证（经过一些额外配置后在 IE 和 Firefox 上）。

现在我想将文件上传到 sharepoint，但在用户当前登录到应用程序时上传文件对我来说很重要（因此文件是使用他/她的凭据在 Sharepoint 上创建的）。

我在函数中有以下代码`ResourceExists(Uri uri)`：

```
'...
    Dim identity As System.Security.Principal.WindowsIdentity = HttpContext.User.Identity
    Dim impersonationContext = identity.Impersonate()
    response = request.GetResponse()
    impersonationContext.Undo()
'... 
```

这在本地运行时有效，但是当我部署到服务器时出现异常：

```
System.Net.WebException: The remote server returned an error: (401) Unauthorized.\r\n   at WebDav.WebDavClient.ResourceExists(Uri uri)\r\n   at Website.Website.WebdavController.Upload(HttpPostedFileBase file, UploadViewModel vm) 
```

我读到了一些关于传递凭据的内容，这对于 NTLM 是不可能的，但我确信我正在使用 Kerberos（我用 wireshark 和 fiddler 检查了标题），我看到了以下内容：

```
Authorization: Negotiate YIIFpQYGKwYBBQUCoIIFmTCCBZWgJDAiBgkqhkiC9x... 
```

任何想法为什么在 IIS 服务器上运行时模拟不起作用？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-21T08:18:09.130

我在这里找到了答案：

[http://support.microsoft.com/kb/810572](http://support.microsoft.com/kb/810572)

“Kerberos 在负载平衡的体系结构中不起作用，IIS 退回到 NTLM 身份验证。因为您不能使用 NTLM 进行委派，所以任何需要委派的应用程序或服务都不起作用。有关详细信息，请单击以下文章编号以查看微软的文章”

情况正是如此。我现在尝试使用另一台没有负载平衡的机器并且它可以工作。

唯一让我感到惊讶的是，身份的ImpersonationLevel仍然`Impersonate`没有`Delegate`......

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-18T09:19:04.083

在您的 web.config 中设置后`<identity impersonate="true"/>`，请尝试以下操作：

```
using (((WindowsIdentity)User.Identity).Impersonate())
using (var client = new WebClient { Credentials = CredentialCache.DefaultNetworkCredentials })
{
    string result = client.DownloadString("http://sharepoint");
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-18T09:19:59.980

您需要在 IIS 中正确配置您的站点才能使模拟工作。

请参阅[配置 ASP.NET 模拟身份验证 (IIS 7)](http://technet.microsoft.com/en-us/library/cc730708%28v=ws.10%29.aspx)

# grails - 在控制器上应用“环绕”方面后，它失败并出现错误，指出“不存在此类方法或属性”

> ID：11079652
> 
> 赞同：0
> 
> 时间：2012-06-18T08:59:06.047
> 
> 标签：grails, aop, grails-plugin, spring-aop, grails-2.0

最初的想法：当控制器抛出异常时，只有堆栈跟踪可用，而不是导致它的参数。想法是为线程放置一个包含 grails 控制器、服务和一些其他兴趣点 (POI) 的日志记录方面，如果出现异常，它不仅记录堆栈跟踪，还记录来自所有 POI 的参数。注意：使用方法进行操作（自 grails 2.0 起）不是闭包。

做了什么：围绕方面将所有调用与应用的特定注释一起包装，并将调用参数收集到 ThreadLocal 变量中。在调用结束时，它会检查它是否是一个错误，然后它会在特定的记录器中记录所有调用链。它与服务一起工作得很好，我在服务调用其他服务时尝试了组合，并且效果很好。

问题：在控制器上应用此类方面时失败。错误表明找不到方法（返回 404 错误），而它确实存在（在没有此类方面的控制器上运行相同的请求可以正常工作）。

具有如下方面（简化版）：

```
@Pointcut("@within(ThreadLoggerMarker)")
public void threadLoggerMarker(){}

@Around("threadLoggerMarker()")
public Object aroundMarker( ProceedingJoinPoint pjs )
throws Throwable
{
    String beanName = pjs.signature.declaringTypeName;
    String methodName = pjs.signature.name;
    Object[] methodParams = pjs.args;
    try{
        System.out.println( "Calling ${beanName}.${methodName}(${methodParams})" );
        return pjs.proceed();
    }catch( Exception ex ){
        System.out.println( "Got exception ${ex}" );
        throw ex;
    }
} 
```

和控制器如：@ThreadLoggerMarker class MainController {

```
MainService mainService

def dummyAction( Boolean fail ){
    try{
        render( text:mainService.dummyAction( fail ) )
    }finally{
        println( ThreadLoggerHelper.prettyPrintCurrentThreadCallTrace() );
    }
} 
```

}

调用控制器导致（跳过包名）：

```
Calling MainController.getMetaClass([])
Calling MainController.getProperty([dummyAction])
Got exception groovy.lang.MissingPropertyException: No such property: dummyAction for class: MainController
Calling MainController.getProperty([params])
Calling MainController.getProperty([errors])
Calling MainController.getMetaClass([]) 
```

如果有命令对象，我如何拦截所有参数的 dummyAction 调用，包括命令对象？

# android - AOSP：不可聚焦但可长时间点击的 TextView

> ID：11079655
> 
> 赞同：0
> 
> 时间：2012-06-18T08:59:09.310
> 
> 标签：android, textview, android-source, android-framework

我刚刚下载了 AOSP 并为我的目的修改了 TextView。

我在 TextView 中添加了一个 LongClick 侦听器，它显示了一个简单的 Toast。

由于我修改了 Android 框架，它反映到了所有的应用程序和整个 Android 操作系统中。

我现在遇到了一个奇怪的问题，TextView 在某些地方获得焦点，而其他底层小部件没有获得任何焦点。这会产生很多问题。

例如：在“设置”应用程序中，“Wi-Fi”文本正在接收焦点，但除非单击 Wi-Fi 列表项中的任何空白区域，否则我无法输入 wi-fi 设置。（我希望清楚！）

另一个例子：我无法选择单选按钮，因为单选按钮对应的文本获得焦点。

所以我的问题是：

1.  有什么方法可以使 TextView 无法聚焦但接收 Long Click 事件？
2.  有什么办法可以将焦点传递给父布局？
3.  你还有什么方法可以推荐吗？

（PS：请不要说我做的是对是错，这只是对我想要达到的目标的可行性测试。）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T09:25:41.147

视图确实具有“focusable”和“longClickable”属性。你试过这些的组合吗？

# android - 睡眠模式检测

> ID：11079657
> 
> 赞同：0
> 
> 时间：2012-06-18T08:59:24.750
> 
> 标签：android

设备用于进入“睡眠”模式，这会导致再次启动我的活动的 onCreate() 方法，这是不希望的。

例如，我有一个 VideoView 活动，它在 onCreate 方法中被初始化，所以当设备“休眠”时，它会重新创建我的播放器并启动播放器。

如何克服这一点？和系统广播有关系吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T02:33:01.020

`onPause()`最终，一旦被调用，您永远无法阻止系统杀死您的应用程序。您必须**始终**编写您的应用程序，以便它可以重新启动。在实践中，这意味着 a) 实施`onRetainNonConfigurationInstance()`以捕获应用程序的非常短期的破坏和重新创建，b) 覆盖`onSaveInstanceState(Bundle)`以捕获中期破坏/重新创建，以及 c) 覆盖`onPause()`以处理长期破坏/重新创建创建。

在大多数情况下，它是您*真正*需要实现`onSaveInstanceState()`的唯一一个，但可以是真正的优化。*`onRetainNonConfigurationInstance()`*

 *在您的特定情况下，您`onSaveInstanceState()`会将视频文件的 URI 和上次播放的时间戳写入 Bundle，以便在重新创建应用程序时返回到视频中最后播放的位置。

至于唤醒锁，这些是可以接受的，例如防止您的设备在观看视频的过程中进入睡眠状态。它们*不能*让你的应用程序不被杀死，这样你就不必经历第二次通过 onCreate() 的麻烦。首先，它会耗尽电池，其次，无论如何也不能保证。

最后一点：如果你不这样做，你应该确保你的视频播放活动设置了“singleTop”属性，这样你就不会在活动堆栈中获得多个实例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T09:09:45.327

您可以使用 AlarmManager 来触发小部件的刷新。在安排下一个周期时，您可以定义是否唤醒您的设备（也就是执行实际任务）。

```
 alarmManager.set(wakeUpType, triggerAtTime, pendingIntent); 
```*

# iphone - iPhone中不同类型的动画

> ID：11079659
> 
> 赞同：-1
> 
> 时间：2012-06-18T08:59:38.337
> 
> 标签：iphone, ipad, animation, uibutton

我是`iPhone`开发人员的新手，

我想实现不同`Animations`的按钮点击，`Button`我的主页上有 5 个

每次单击按钮时，我都想导航到一个不同的新页面，`Animation`所以我想知道 . 中可用的不同动画是什么`iPhone`。

到目前为止我只找到了2个动画，

(1)

```
[UIView beginAnimations:@"yourAnim" context:nil];
[UIView setAnimationTransition:UIViewAnimationTransitionFlipFromLeft forView:yourView cache:cacheFlag];
      ...
[UIView commitAnimations]; 
```

(2)

```
[UIView beginAnimations:@"yourAnim" context:nil];
[UIView setAnimationTransition:UIViewAnimationTransitionCurlUp forView:yourView cache:cacheFlag];
     ...
[UIView commitAnimations]; 
```

**提前致谢 ！**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T09:06:03.347

此链接提供 UIView 动画。通过它。

[http://www.raywenderlich.com/5478/uiview-animation-tutorial-practical-recipes](http://www.raywenderlich.com/5478/uiview-animation-tutorial-practical-recipes)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-18T09:05:07.090

这些是 5 种不同的动画过渡：

```
UIViewAnimationTransitionNone,
UIViewAnimationTransitionFlipFromLeft,
UIViewAnimationTransitionFlipFromRight,
UIViewAnimationTransitionCurlUp,
UIViewAnimationTransitionCurlDown, 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-18T09:18:10.000

也看看 CATransition 类 [https://developer.apple.com/library/mac/#documentation/graphicsimaging/reference/CATransition_class/Introduction/Introduction.html](https://developer.apple.com/library/mac/#documentation/graphicsimaging/reference/CATransition_class/Introduction/Introduction.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-18T12:04:36.550

我认为您的以下方法可以测试不同类型的过渡动画......

```
- (void) pushController: (UIViewController*) controller
         withTransition: (UIViewAnimationTransition) transition
{
    [UIView beginAnimations:nil context:NULL];
    [self pushViewController:controller animated:NO];
    [UIView setAnimationDuration:.5];
    [UIView setAnimationBeginsFromCurrentState:YES];        
    [UIView setAnimationTransition:transition forView:self.view cache:YES];
    [UIView commitAnimations];
} 
```

你可以从这个可能得到想法......

# c# - 类结构确认

> ID：11079660
> 
> 赞同：0
> 
> 时间：2012-06-18T08:59:48.813
> 
> 标签：c#, c#-4.0

我有这个类文件调用**SMSHelper.cs**首先我只是想知道我的书面结构是正确还是错误？（我的类文件名也是 SMSHelper.cs 我的第一个类也是 SMSHelper 在这里你可以在代码中看到。）。

基本上我在同一个文件中有 3 个类。一个类与文件名同名。

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Text;
using System.Text.RegularExpressions;

namespace SMSBase.SMSFunction
{
public class SMSHelper : DotNetNuke.Entities.Modules.PortalModuleBase
{
 // Some Code here 
 // Return Something here
}
 public class Validator
   {
    public bool IsValidate(string Item)
    { 
    // Some Code Here Not return anything

 }

  public class HuntingDate
     {
    //Implementation & Constructor here.. Return Something
    }

    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T09:22:31.047

您的班级结构没有任何问题（除了缺少一个括号）。并且无论您的类名和文件名是否相同。您可以像这样访问和初始化您的类对象...

```
SMSBase.SMSFunction.SMSHelper objSMSHelper = new SMSBase.SMSFunction.SMSHelper();

SMSBase.SMSFunction.Validator objValidator = new SMSBase.SMSFunction.Validator();

SMSBase.SMSFunction.HuntingDate objHuntingDate = new SMSBase.SMSFunction.HuntingDate(); 
```

这`SMSBase.SMSFunction`是你的命名空间......你可以通过你的命名空间访问类，或者在类头中包含这个命名空间，比如

```
using SMSBase.SMSFunction 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T09:11:26.243

打开右括号时出现问题：

```
namespace SMSBase.SMSFunction 
{ 
public class SMSHelper : DotNetNuke.Entities.Modules.PortalModuleBase 
{  // Some Code here   // Return Something here 
}  
public class Validator    
{     
public bool IsValidate(string Item)    
 {      // Some Code Here Not return anything 

 }
}   
 public class HuntingDate     
 {     //Implementation & Constructor here.. Return Something   
 }      

 } 
```

如果那是你要问的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-18T12:10:59.610

*是的，正如 Talha 所说，缺少一个支架。试着把它放上去。*

当我们想要调用类名时，最好使用“namespace.ClassName”格式调用，这样可以使编译器更加清晰。

# c# - 如何使 jQuery UI 在 DotnetNuke 6+ 中工作

> ID：11079661
> 
> 赞同：0
> 
> 时间：2012-06-18T08:59:51.713
> 
> 标签：c#, jquery-ui, dotnetnuke

编辑：这是编辑后的控制文件（control.ascx）：

```
 <%@ Control Language="C#" AutoEventWireup="true" CodeFile="Sale.ascx.cs" Inherits="Enmasse.Modules.Demo_Enmasse.Sale" %>

    <script type="text/javascript">
        $(document).ready(function () {
            $("#<%=txtuser.ClientID%>").autocomplete('<%=ResolveUrl("Search_Username.ashx")%>');
        function AnotherJSFunction{
...
}
        });      
    </script>

    <asp:MultiView ID="MultiView1" runat="server" ActiveViewIndex=0>
    <asp:View ID="main" runat="server">
    <div class=item>
    <asp:TextBox ID="txtuser" runat="server" ></asp:TextBox><br />
    ... 
```

这是文件后面的编辑代码（control.ascx.cs）：

```
protected void Page_Load(object sender, System.EventArgs e)
       {
            DotNetNuke.Framework.jQuery.RequestUIRegistration();
       } 
```

这是 Web 处理程序以防万一（ashx）：

```
<%@ WebHandler Language="C#" Class="Search_Username" %>

using System;
using System.Web;
using System.Data.SqlClient;
using System.Configuration;
using System.Text;

public class Search_Username : IHttpHandler {

    public void ProcessRequest (HttpContext context) {
        string prefixText = context.Request.QueryString["q"];
        using (SqlConnection conn = new SqlConnection())
        {
            conn.ConnectionString = ConfigurationManager.ConnectionStrings["SiteSqlServer"].ConnectionString;
            using (SqlCommand cmd = new SqlCommand())
            {
                cmd.CommandText = "select Username from Users where Username like @SearchText + '%' and IsSuperUser <> 1";
                cmd.Parameters.AddWithValue("@SearchText", prefixText);
                cmd.Connection = conn;
                StringBuilder sb = new StringBuilder();
                conn.Open();
                using (SqlDataReader sdr = cmd.ExecuteReader())
                {
                    while (sdr.Read())
                    {
                        sb.Append(sdr["Username"]).Append(Environment.NewLine);
                    }
                }
                conn.Close();
                context.Response.Write(sb.ToString());
            }
        }
    }
    public bool IsReusable {
        get {
            return false;
        }
    }
} 
```

我已经测试了 Web 处理程序 Search_Username.ashx，它工作正常，但我不确定文件的链接是否正确。jQuery 自动完成仍然不起作用，也没有错误。我不知道在哪里解决，尽管我在这里查看了一些问题。有人能帮我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T12:35:36.603

由于您使用的是 DNN 6，因此框架中包含 jQuery UI。从您的标记中删除 JavaScript 包含，并`DotNetNuke.Framework.jQuery.RequestUIRegistration`添加`Page_Load`.

从那里，我将查看页面上的源代码并检查您的 URL 是否正确。通常，我会使用[`ResolveUrl`](http://msdn.microsoft.com/en-us/library/system.web.ui.control.resolveurl.aspx), 而不是`ModulePath`获取资源的路径（例如`<%=ResolveUrl("Search_Username.ashx")%>`）。

否则它看起来很合理。您可能会查看 jqueryui.com 中的“ [Remove with caching](http://jqueryui.com/demos/autocomplete/#remote-with-cache) ”示例，并将一些日志记录添加到它提供的源方法中，这样您就可以查看您是否真正连接、拨打电话和获得响应。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T12:15:42.533

*由于您在 DNN 6 中，因此框架中包含 jQuery UI。从您的标记中删除 JavaScript 包含，并`DotNetNuke.Framework.jQuery.RequestUIRegistration`添加`Page_Load`.

# javascript - jQuery 和 input[type=file][multiple=multiple] 值

> ID：11079668
> 
> 赞同：2
> 
> 时间：2012-06-18T09:00:10.990
> 
> 标签：javascript, jquery, html

例如，有一个字段：

```
<input type="file" name="files[]" multiple="multiple" class="multiupload" /> 
```

选择多个文件后，如何访问所有文件列表？

`$('.multiupload').val()`仅返回第一个文件名。我试图在谷歌浏览器中做到这一点。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-18T09:05:12.337

```
$('.multiupload').map(function(){
  return $(this).val();
}); 
```

***更新：***`multiple`对于一个输入字段使用`files`您可以获得属性。

```
$.map($('.multiupload').get(0).files, function(file) {
  return file.name;
}); 
```

# asp.net - 控制 ASP.NET 从登录返回

> ID：11079669
> 
> 赞同：0
> 
> 时间：2012-06-18T09:00:26.793
> 
> 标签：asp.net, login

我有一个要求，当用户在完成多表单数据提交过程时登录时，他们的个人资料会根据他们已经提交的数据进行检查，并且某些类别的用户将显示一条警报消息；即，一些用户在登录时会收到一条弹出消息。

弹出窗口将使用 Ajax 工具包中的 ModalPopupExtender，它与代码库中其他地方的类似功能一致。

我遇到的问题是，一旦用户被验证，用户总是被重定向到原始页面；我想暂停此操作，直到向用户显示消息，然后在用户单击以关闭消息时执行重定向。

任何人都可以提出解决方案（使用.NET 3.5）吗？

编辑

由于它被要求，登录页面有一个用户控件，其中包含一个控件。该控件处理基本上调用的 OnAuthenticate 事件：

```
 protected void Login_Authenticate(object sender, AuthenticateEventArgs e)
    {
        bool isValidUser = Membership.ValidateUser(FullLogin.UserName, FullLogin.Password);

        if (isValidUser)
        {
            e.Authenticated = true;
        }
       ...
    } 
```

它还处理 LoggedIn 事件，该事件执行一些业务逻辑并引发页面处理的“LogInSuccessful”或“LoginFailed”事件。成功登录会将用户重定向回原始页面。

我已经重构了关闭信息框时要调用的手动重定向代码，但似乎表单身份验证正在自动重定向用户，这是我试图覆盖的行为。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T09:36:02.190

当您使用表单身份验证登录时，asp.net 会将用户带到登录表单并返回原始页面。

一旦您对用户进行了身份验证，它将带他回到原始页面。如果您必须在此页面上执行此操作，则必须为这组用户取消身份验证，然后显示消息。

```
protected void Login_Authenticate(object sender, AuthenticateEventArgs e)
    {
        bool isValidUser = Membership.ValidateUser(FullLogin.UserName, FullLogin.Password);

        Session["isValidUser"] = isValidUser;
        if (!Session.ContainsKey("isValidUser"))
        {
            e.Authenticated = false;
        }
        else
        {
          e.Authenticated = (bool)Session["isValidUser"];
        }
       ...
    } 
```

当用户单击确定按钮时，您必须回发并验证用户。这将需要您存储会话中上一次调用的身份验证结果。

将此消息放在一个通用母版页中可能更简单，让 asp 将用户带回原始页面并在那里显示消息。

# php - 使用 PHP 和 MySQL 创建数组

> ID：11079675
> 
> 赞同：-5
> 
> 时间：2012-06-18T09:00:52.697
> 
> 标签：php, mysql, database, arrays

我查看了 stackoveflow 上的几篇关于创建数组的帖子，但还没有找到我想要的内容......我想尝试这么多不同的答案，并得到一个最接近我想要完成的答案。

假设我想使用此查询创建一个数组：

“从产品中选择 *”

这如何最有效地完成？

谢谢你。

PS - 请注意，我是从头开始的。

**更新**

我的配置文件：

```
`[root@CentOS testphp]# vi config.php
<?php
// Connection's Parameters
$db_host="localhost";
$db_name="tablename";
$username="username";
$password="password";
$db_con=mysql_connect($db_host,$username,$password);
$connection_string=mysql_select_db($db_name);
// Connection
mysql_connect($db_host,$username,$password);
mysql_select_db($db_name);
?>` 
```

我试图用...创建数组的 php 代码出现语法错误：

解析错误：语法错误，第 2 行 /var/www/html/testphp/test.php 中的意外 T_VARIABLE

我犯了同样的错误：

```
`[root@CentOS testphp]# vi test.php
<?php include('config.php')
$query = "select * from upload_products";
$dataArray = array();
$result = mysqli_query($query, $link);
while($row = mysqli_fetch_assoc($query)) {
$dataArray[] = $row;
}
var_dump($dataArray); //Now you have your array.
?>` 
```

任何想法......感觉就像我在这里遗漏了一些东西。而且，是的，我已经阅读了文档...逐行使用了他们的代码，查看了代码，但仍然得到与我在网上找到的所有代码示例相同的错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T09:09:43.443

没有明确的方法可以将数据库结果对象转换为关联数组目录。您将不得不创建这个数组作为您的结果。

```
$query = "...";
$dataArray = array();
$result = mysqli_query($query, $link);
while($row = mysqli_fetch_assoc($query)) {
    $dataArray[] = $row;
}
var_dump($dataArray); //Now you have your array. 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-18T09:05:35.790

您可以使用：

```
$query = mysqli_query("SELECT * FROM products");
$result = mysqli_fetch_assoc($query); 
```

但是您只会在 $result 变量中收到一行。如果要获取所有内容，则必须对其应用任何循环：例如：

```
$query = mysqli_query("SELECT * FROM products");
while($result = mysqli_fetch_assoc($query)){
 //do something with your results 
 //you can access result like: $result['column_name']
} 
```

你现在清楚了吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-18T10:35:26.410

尝试这个

```
@ $db = new mysqli('localhost', 'username', 'password', 'dbname');

  if (mysqli_connect_errno()) {
     echo 'Error: Could not connect to database.  Please try again later.';
     exit;
  }

  $query = "select * from books";
  $result = $db->query($query);

  $num_results = $result->num_rows;

  echo "<p>Number of books found: ".$num_results."</p>";

  for ($i=0; $i <$num_results; $i++) {
     $row = $result->fetch_assoc();
    // echo something here
  }

  $result->free();
  $db->close(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-18T09:19:27.480

您可以使用[mysql_fetch_assoc](http://php.net/manual/en/function.mysql-fetch-assoc.php)或[mysql_fetch_array](http://www.php.net/manual/en/function.mysql-fetch-array.php)以数组形式获取 mysql 查询响应。以下是如何使用两者的代码示例。

使用 **mysql_fetch_assoc**：

```
$query = "select * from products";
$result = mysql_query($query);
if (mysql_num_rows($result) != 0) {
   while ($row = mysql_fetch_assoc($result)) {
          //every row will represent a record as an array
          // your code   
   }
} 
```

使用 **mysql_fetch_array**：

```
 $query = "select * from products";
 $result = mysql_query($query);
 if (mysql_num_rows($result) != 0) {
       while ($row = mysql_fetch_array($result,MYSQL_ASSOC)) {
           //every row will represent a record as an array
           //  your code
      }
 } 
```

如果您还有任何疑问，请参阅 php 手册。

# java - 如何设置进度条以在android中使用数据加载活动

> ID：11079676
> 
> 赞同：0
> 
> 时间：2012-06-18T09:00:57.263
> 
> 标签：java, android

这是我做 Url loading 的第一堂课。

```
public class HelloWebViewClient extends WebViewClient
{    
     @Override
     public boolean shouldOverrideUrlLoading(WebView view, String url)
     {
         view.loadUrl(url);
         return true;
     }
} 
```

这是我的活动类，其中数据在 Web 视图中被替换。

```
public class detailedview extends Activity
{
    WebView mWebView;
    @Override
    public void onCreate(Bundle savedInstanceState) 
    {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.detailedview);
        GetSet gs = new GetSet();

        String title = gs.getTitle();
        String desc = gs.getDesc();

        mWebView = (WebView) findViewById(R.id.webview);
        mWebView.getSettings().setJavaScriptEnabled(true);
        mWebView.getSettings().setBuiltInZoomControls(true);
        mWebView.getSettings().setSupportZoom(true);
        mWebView.getSettings().setTextSize(TextSize.SMALLER);
        mWebView.loadDataWithBaseURL("", "<p  align=\"justify\"><b> " + title+"</p></b><p align=\"justify\"><br>"+ desc + "</p></br>", "text/html", "utf-8", "");
        mWebView.setWebViewClient(new HelloWebViewClient());
    }
} 
```

我想在我的活动中放置加载数据的进度条，我尝试了很多但我做不到。

您能否编写代码或发布代码，以便我可以在根据我的代码加载数据时有一个进度条。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T09:04:05.267

将此代码添加到您的代码中

```
ProgressDialog pd = new ProgressDialog(detailedview .this);
                                       ^^^^^^^^^^^^
        pd.setMessage("Loading...");
        pd.show(); <-----

mWebView.setWebViewClient(new WebViewClient() {
^^^^^^^^    

@Override 
public void onPageFinished(WebView view, String url) { <-----
     super.onPageFinished(view, url);
     pd.dismiss(); <-----
   }
});
-------------------------------------------------------------------------------

public class detailedview extends Activity
{
    WebView mWebView;
    @Override
    public void onCreate(Bundle savedInstanceState) 
    {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.detailedview);
        ProgressDialog pd = new ProgressDialog(detailedview .this);

        pd.setMessage("Loading...");
        pd.show(); 

       mWebView.setWebViewClient(new WebViewClient() {

@Override 
public void onPageFinished(WebView view, String url) { 
     super.onPageFinished(view, url);
     pd.dismiss(); 
   }
});
        GetSet gs = new GetSet();

        String title = gs.getTitle();
        String desc = gs.getDesc();

        mWebView = (WebView) findViewById(R.id.webview);
        mWebView.getSettings().setJavaScriptEnabled(true);
        mWebView.getSettings().setBuiltInZoomControls(true);
        mWebView.getSettings().setSupportZoom(true);
        mWebView.getSettings().setTextSize(TextSize.SMALLER);
        mWebView.loadDataWithBaseURL("", "<p  align=\"justify\"><b> " + title+"</p></b><p align=\"justify\"><br>"+ desc + "</p></br>", "text/html", "utf-8", "");
      //  mWebView.setWebViewClient(new HelloWebViewClient());
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T09:38:06.527

首先让一个类说它 DownloadWebPageTask

把它放在你的 oncreate 方法中

GetSet gs = new GetSet();

```
 String title = gs.getTitle();
    String desc = gs.getDesc();

    mWebView = (WebView) findViewById(R.id.webview);
    mWebView.getSettings().setJavaScriptEnabled(true);
    mWebView.getSettings().setBuiltInZoomControls(true);
    mWebView.getSettings().setSupportZoom(true);
    mWebView.getSettings().setTextSize(TextSize.SMALLER); 
```

现在像这样制作该类的对象

DownloadWebPageTask 任务 = new DownloadWebPageTask(); 任务.执行（）；注意：**task.execute(); 将调用你的类“DownloadWebPageTask”你可以从任何代码行开始这个现在我已经把它放在onCreate方法中

这是你的课

```
private class DownloadWebPageTask extends AsyncTask<String, Void, String> {

     private final ProgressDialog dialog = new ProgressDialog(Home.this);

      // can use UI thread here
      protected void onPreExecute() {
         this.dialog.setMessage("Loading...");
         this.dialog.show();
      }
    @Override
    protected String doInBackground(String... urls) {
        String response = "";

      mWebView.loadDataWithBaseURL("", "<p  align=\"justify\"><b> " + title+"</p></b><p align=\"justify\"><br>"+ desc + "</p></br>", "text/html", "utf-8", "");

        return response;
    }

    @Override
    protected void onPostExecute(String result) {
         if (this.dialog.isShowing()) {
                this.dialog.dismiss();
           }

             mWebView.setWebViewClient(new HelloWebViewClient());
    }

} 
```

注意：**当您使用任何进度条而不是在 post excute 方法中时，所有后台进程都已完成，直到您的进度条将被显示，并且一旦数据下载完成，就会调用 onPostExcute 方法。并从外部服务器下载数据将存储在 webview 中，或者你可以用它做任何事情。如果您仍然找到任何查询，请告诉我祝您好运 Aamirkhan I。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-18T09:06:36.587

您可以使用以下代码

```
public class Grab extends Activity {

WebView view;
private ProgressDialog progressDialog = null;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    setContentView(R.layout.grab);

    view = (WebView) findViewById(R.id.WebView01);
    view.setBackgroundColor(0);  // set the background transparent 

    progressDialog = ProgressDialog.show(view.getContext(), "Loading...", "Loading...");
    progressDialog.setProgressStyle(ProgressDialog.STYLE_SPINNER    );

    view.setWebChromeClient(new MyWebChromeClient());
    view.getSettings().setJavaScriptEnabled(true);
    view.setWebViewClient(new MyWebViewClient());
    view.loadUrl("http://www.wepware.com/web/apps/jots.do");
}

private class MyWebViewClient extends WebViewClient {
    @Override
     public boolean shouldOverrideUrlLoading(WebView view, String url)      //override WebViewClient method to open url in activity
    {
        view.loadUrl(url);
        return true;
    }
}

private class MyWebChromeClient extends WebChromeClient {
    @Override
    public void onProgressChanged(WebView view, int newProgress) {
        if(progressDialog!=null){
            if ( newProgress >=80 ) {
                progressDialog.dismiss();
            } else {
                progressDialog.setMessage(newProgress + " % loaded");
            }
        }
        super.onProgressChanged(view, newProgress);
    }
}
} 
```

# android - Android - 当我们选择复选框时，微调器需要更改

> ID：11079678
> 
> 赞同：1
> 
> 时间：2012-06-18T09:01:13.887
> 
> 标签：android, database, checkbox, android-spinner

我有`checkBox`和`Spinner`。如果`checkbox`选中，`spinner`则应调用数据库并从那里获取值，否则为默认值。

**我的问题是：** 如果选中 CheckBox，则应该调用 Spinner。如何实施？

我的代码是：

```
private HashMap<Integer,ReturnProduct> retrunTypes  =new HashMap<Integer, ReturnProduct>();

checkBox1=(CheckBox)findViewById(R.id.checkBox1);
  checkBox1.setOnCheckedChangeListener(new OnCheckedChangeListener() {
    public void onCheckedChanged(CompoundButton buttonView, boolean isChecked) {
        if(isChecked) {
            rtnStatus =true;
            retrunTypes = getReturnRason(); 
        }else {
            rtnStatus =false;
        }

    }
   }); 
```

* * *

**微调器：**

```
 retrunTypes = getReturnRason();
    ArrayList<String> returnTypeList = new ArrayList<String>();
    for (Map.Entry<Integer, ReturnProduct> entry : retrunTypes.entrySet()) {
            ReturnProduct myProduct = entry.getValue();
            returnTypeList.add(myProduct.getDescription());
    }

    retuReason = (Spinner) findViewById(R.id.retuReason);
    reTypeAdapter = new ArrayAdapter<String>(SalesActivityGroup.group.getApplicationContext(),android.R.layout.simple_spinner_item, returnTypeList);
    reTypeAdapter.setDropDownViewResource(android.R.layout.simple_spinner_item);
    retuReason.setAdapter(reTypeAdapter);
    retuReason.setOnItemSelectedListener(new OnItemSelectedListener() {
        public void onItemSelected(AdapterView<?> parent, View view,int arg2, long arg3) {
            //selectedReType = parent.getSelectedItem().toString();
            selectedReTypeId= arg2;
            selectedReType = retrunTypes.get(selectedReTypeId).getReturnReason();

            //ReturnProduct rProduct = findReturnType(selectedReType);
            processingRequird = retrunTypes.get(selectedReTypeId).getProcessingRequired();
            selectedReTypeCode = selectedReType;
            selectedRetCategory =  retrunTypes.get(selectedReTypeId).getReturnCategory();
        }
        public void onNothingSelected(AdapterView<?> arg0) {
        }
    });

 private HashMap<Integer,ReturnProduct> getReturnRason(){
    DBAdapter dbAdapter = DBAdapter.getDBAdapterInstance(this);
    HashMap<Integer,ReturnProduct> returnType = new HashMap<Integer, ReturnProduct>();
    try {
        dbAdapter.openDataBase();
        String  query ="";
        if(rtnStatus) {
            query = "SELECT rs.ReturnReasonCode,rs.ReturnType,rs.Description,rt.ProcessingRequired,rt.ReturnCategory " +
                    " FROM WMReturnReason rs,WMReturnType rt" +
                    " WHERE rs.ReturnType =rt.ReturnType AND rs.BusinessUnit=? AND Status ='1' AND  rt.ProcessingRequired ='1' ";
        }else {
            query = "SELECT rs.ReturnReasonCode,rs.ReturnType,rs.Description,rt.ProcessingRequired,rt.ReturnCategory " +
                    " FROM WMReturnReason rs,WMReturnType rt" +
                    " WHERE rs.ReturnType =rt.ReturnType AND rs.BusinessUnit=? AND Status ='1' ";
        }

        String[] d = new String[]{strBusinessUnit};
        ArrayList<?> stringList = dbAdapter.selectRecordsFromDBList(query, d);

        dbAdapter.close();
        //System.out.println("===getReturnType=="+stringList.size());
        if(stringList.size() > 0){
            for (int i = 0; i < stringList.size(); i++) {
                ArrayList<?> arrayList = (ArrayList<?>) stringList.get(i);
                ArrayList<?> list = arrayList;
                ReturnProduct returnProduct = new ReturnProduct();
                returnProduct.setReturnReason((String) list.get(0));
                returnProduct.setReturnType((String) list.get(1));
                returnProduct.setDescription((String) list.get(2));

                returnProduct.setProcessingRequired((String) list.get(3));
                returnProduct.setReturnCategory((String) list.get(4));

                returnType.put(i, returnProduct);
            }
        }
    } catch (Exception e) {
        e.printStackTrace();
    }
    return returnType;
 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T09:19:14.233

可以`spinner.setSelection(pos)`在里面使用`setOnCheckedChangeListener`。我可以看到您已经推出了自己的方法来从数据库中获取值。现在根据返回的值来选择你的微调器。

# ios - 如何使用我的 ios 应用程序中的代码旋转 ipad 屏幕

> ID：11079681
> 
> 赞同：0
> 
> 时间：2012-06-18T09:01:45.693
> 
> 标签：ios, screen, rotation

当我的应用程序启动时，它最初是纵向的。它可以在 ipad 设备物理旋转时旋转。

我希望添加一个功能，允许用户单击按钮打开帮助教程。我希望教程只是横向的。

所以我重写了`shouldAutorotateToInterfaceOrientation`检查应用程序是否处于帮助教程模式的方法；如果是，则返回“是”：

```
return (interfaceOrientation == UIInterfaceOrientationLandscapeLeft || 
    interfaceOrientation ==UIInterfaceOrientationLandscapeRight)` 
```

当屏幕是纵向的，并且用户单击按钮打开帮助教程时，如何在按钮响应代码的开头将屏幕旋转为横向？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T09:53:03.297

如果带有帮助教程的控制器不支持纵向，它会自动以横向模式显示图像，即使用户没有这样握住设备，您也不需要自己“旋转”屏幕，通过代码。

如果您想手动旋转视图（但不更改设备方向），请使用此代码进行 90 度旋转

```
CGAffineTransform transform = CGAffineTransformMakeRotation(-M_PI_2);
self.view.transform = transform; 
```

M_PI_2 = 90 度

M_PI = 180 度

# android - 检查 Android 设备是否有可用的视频功能？

> ID：11079685
> 
> 赞同：0
> 
> 时间：2012-06-18T09:01:55.510
> 
> 标签：android, video

是否有任何简单的方法来检查 Android 设备是否可以播放 1280 x 720 像素的 MP4 H.264 视频，以便应用程序可以优雅地退回到较低分辨率的版本（如 360 x 480 像素）或禁用视频功能？（视频嵌入在应用程序中，因为它们不是很长。）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T09:07:40.327

您可以使用以下代码段获取设备的物理分辨率：

```
WindowManager w = getWindowManager();
Display d = w.getDefaultDisplay();
int width = d.getWidth();
int height = d.getHeight(); 
```

* * *

编辑：

刚刚检查了[API](http://developer.android.com/reference/android/view/Display.html)。`getWidth()`和`getHeight()`方法现在已弃用。您将不得不[`getSize()`](http://developer.android.com/reference/android/view/Display.html#getSize%28android.graphics.Point%29)改用。

# objective-c - 在 NSMutableArray 和 Sqlite 中存储 CGPoints

> ID：11079686
> 
> 赞同：3
> 
> 时间：2012-06-18T09:01:56.327
> 
> 标签：objective-c, ios, xcode, nsmutablearray, cgpoint

我想在调用 touchesMoved 时存储积分。到目前为止，一切正常。但是我想做的是每次调用 touchesMoved 时创建一个“新”数组。例如，一旦触摸结束，点数组就会保存到标识符为 1 的数据库中。下次调用 touchesMoved 时，数组被清空并替换为具有不同标识符的另一组点。我尝试在每次调用 touchesEnded 时增加一个整数，但我发现每次触摸结束时整数都将保持不变。那么我将如何做到这一点？任何帮助将不胜感激。

更新：例如，我的数组中有这个记录点：

```
100.000, 200.000
100.000, 202.000
100.000, 204.000 
```

这些点将使用标识符保存在数据库中，例如 1。

```
1 | 100.000 | 200.000
1 | 100.000 | 202.000
1 | 100.000 | 204.000 
```

现在，当触摸移动并再次结束时，新的记录点集将使用不同的标识符保存，比如 2。

```
2 | 200.000 | 300.000
2 | 200.000 | 302.000
2 | 200.000 | 304.000 
```

所以基本上我想要发生的是每次调用 touchesMoved 时，它都会记录将保存在数组中的点。当触摸结束时，这些记录的点将与标识符一起保存。并且，一旦再次调用 touchesMoved 并结束，新的记录点集将使用不同的标识符保存。任何想法如何做到这一点？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-18T09:06:52.737

要存储`CGPoint`，`NSMutableArray`请执行此操作

```
NSMutableArray *yourCGPointsArray = [[NSMutableArray alloc] init];
[yourCGPointsArray addObject:[NSValue valueWithCGPoint:CGPointMake(100, 100)]];

//Now getting the cgpoint back
CGPoint point = [[yourCGPointsArray objectAtIndex:0] CGPointValue]; 
```

# python - 在 Jinja2 模板中将项目均匀地分成列

> ID：11079690
> 
> 赞同：8
> 
> 时间：2012-06-18T09:02:10.360
> 
> 标签：python, flask, jinja2

我有一个可变的城市名称列表，我想将它平均分成 4 列。我有一些解决方案，但它看起来不堪重负和肮脏。最好和最简单的方法是什么？

我的解决方案在这里：

```
{% set cities_in_column = cities|length/4|int %}
{% set step=0 %}
<div class="four columns">
    {% for city in cities|sort %}
        {% if step > cities_in_column %}
            {% set step = 0 %}
            </div>
            <div class="four columns">
        {% endif %}
        <h5><a href="/city/{{ city.url }}">{{ city.name }}</a> <span style="float:right;">({{ city.users_count }})</span></h5>
        {% set step=step + 1 %}
    {% endfor %}
</div> 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-06-19T04:19:31.943

您正在寻找[`slices`](http://jinja.pocoo.org/docs/templates/#slice)过滤器：

```
{% for column in cities | sort | slice(4) -%}
<div class="four columns">
    {%- for city in column -%}
    <h5><a href="/city/{{ city.url}}">{{ city.name }}</a>
    <span style="float:right;">({{ city.users_count }})</span></h5>
    {%- endfor -%}
</div>
{%- endfor %} 
```

还有一个对[`slices`](http://jinja.pocoo.org/docs/templates/#slice)调用的补充，[`batch`](http://jinja.pocoo.org/docs/templates/#batch)它提供了运行`n`（而不是将可迭代对象分成`n`组）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-06-26T18:08:52.650

这是 CSS* 的工作：

```
<ol style="column-count: 4;">
{% for city in cities|sort %}
    <li>
        <a href="/city/{{ city.url }}">{{ city.name }}</a> ({{ city.users_count }})
    </li>
{% endfor %}
</ol> 
```

（*是`column-count`, `float`, `flex`, 等等..）

# objective-c - 未找到 AudioUnit/AudioUnit.h 文件

> ID：11079695
> 
> 赞同：0
> 
> 时间：2012-06-18T09:02:32.597
> 
> 标签：objective-c, ipad

嗨，我在 ipad 应用程序中使用 AudioToolbox 框架，我已经添加了所有必需的框架。应用程序在 Ipad 模拟器中成功运行。但是当我想在设备中运行时，它会显示找不到 AudioUnit/AudioUnit.h 文件的错误。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T16:38:33.850

看到类似问题，添加 CoreAudio.framework

# silverlight - 如何在没有浏览器身份验证的情况下通过 Dropbox 或 Skydrive 上传文件

> ID：11079697
> 
> 赞同：0
> 
> 时间：2012-06-18T09:02:33.570
> 
> 标签：silverlight, windows-phone-7, xna, dropbox

我有一个大型 3d 游戏，让玩家可以构建和创建有趣且巨大的世界，并将它们保存到 windows phone 7 上的磁盘。

该游戏使用 XNA 并执行了 silverlight 或 SLXNA 混合应用程序不支持的许多事情。

我想让玩家在那里备份保存文件到他们的skydrive（首选）或保管箱，但经过一个多星期试图让某种实施工作我想出了什么...

似乎每个用于eather 的样本都内置（并且需要）silverlight 和一个网络浏览器才能工作。

**有谁知道克服这些限制的方法？**我的游戏有近 100,000 人，最需要的功能是云备份...

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T20:36:50.593

嗯，我认为这不会很困难。

我在一个 Web 应用程序项目中工作，其中服务器执行所有身份验证工作。当然，您总是需要打开浏览器窗口让用户输入其凭据。

当用户输入其凭据、skydrive、dropbox 或任何给您一个 TOKEN 的东西时，您使用该 TOKEN 以用户的名义执行操作（例如：将文件上传到 dropbox）执行 REST（webrequest）和 JSON

你有 REST、JSON 等方面的经验吗？

我认为，您需要将 Oauth 用于桌面（这里是谷歌解释[https://developers.google.com/accounts/docs/OAuth2?hl=es](https://developers.google.com/accounts/docs/OAuth2?hl=es)）

你看到un /官方sdk了吗？Skydrive： http: [//msdn.microsoft.com/en-us/library/live/hh826521](http://msdn.microsoft.com/en-us/library/live/hh826521) 投递箱：

*   [https://www.dropbox.com/developers](https://www.dropbox.com/developers)
*   [http://sharpbox.codeplex.com/](http://sharpbox.codeplex.com/)

来自阿根廷的问候

PS：对不起我糟糕的英语:)

# android - Android：如何向电子邮件帐户发送短信

> ID：11079698
> 
> 赞同：2
> 
> 时间：2012-06-18T09:02:48.770
> 
> 标签：android, sms

库存的 Android 短信应用程序允许您将短信发送到电子邮件帐户而不是电话号码。这是怎么做到的？我尝试了以下代码，但失败了。

```
SmsManager sms = SmsManager.getDefault();
sms.sendTextMessage("myaccount@gmail.com", null, textMsg, sentPI, null); 
```

这个其他问题似乎与[如何向电子邮件地址发送短信回复有关？](https://stackoverflow.com/questions/6388950/how-to-send-sms-message-reply-to-email-address)

...但接受的答案说

> 每个手机运营商都有一个特定的 SMS 号码，您可以向其发送特定格式的短信。这称为“短信网关”。

我想发送到我的 gmail 帐户，而不是 AT&T。

对不起，我似乎误读了答案。看起来我的运营商 (AT&T) 会为我发送电子邮件。令我困惑的是一个应用程序如何为不同的运营商工作？

# objective-c - 将 childViewController 添加到 ParentViewController 的问题

> ID：11079701
> 
> 赞同：0
> 
> 时间：2012-06-18T09:03:14.163
> 
> 标签：objective-c, ios, uiviewcontroller, mappy

我在将 a 集成`ViewController`到另一个时遇到了一个奇怪的问题`ViewController`。我会解释我的问题，

我有一个`ParentViewController`（包含`Buttons`（**Ville/Autour De Moi**，**Carte/Liste** ...）的那个，然后我在两个：和一个（包含地图的那个）`ParentViewController`之间切换，我已经指定了框架采取：_`ChildViewControllers``ListViewController``MapViewController``ChildViewControllers``( 0, 104, 320, 282)`

```
if(mapViewController ==nil) {
            mapViewController = [[MapViewController alloc] init];
            mapViewController.networkViewController = self;
        }

        mapViewController.view.frame = CGRectMake( 0, 104, 320, 282);
        [self.view addSubview:mapViewController.view]; 
```

一切都像魅力一样工作，但我遇到的问题是当我拖动地图时，我的标记和我的注释变成了上方`ParentViewController`，并且它们隐藏了`buttons`。

图片将解释我的问题：

拖动前：

![在地图上拖动之前](../Images/64bed5376d53afff46b1a26096912247.png)

在地图上拖动后：

![在地图上拖动后，我的标记和注释隐藏了 ParentViewController 上的视图](../Images/e0327c5d1edf7f0f45047d5ba48c6594.png)

**注意：我`ParentController`没有透明背景，地图也没有，我使用的是[Mappy SDK IOS](http://connect.mappy.com/fr/iphone/1.40/documentation)**

添加注释的代码：***MPPoiDataSourceMappyCustom.m***

```
#import "MPPoiDataSourceMappyCustom.h"

@implementation MPPoiDataSourceMappyCustom

-(UIView *) labelAtIndex:(NSIndexPath *)indexPath withScreeLocation:(CGPoint)screenLocation withViewBounds:(CGRect)_bounds update:(BOOL)aUpdate {

    // the label is allways up to date, we will not refresh it
    if (aUpdate)
        return nil;

    if ([elementList count] > indexPath.row)
    {
        MPPoi * mpoi = [elementList objectAtIndex:indexPath.row];
        MPGlobalStyle* style = [MPGlobalStyle sharedStyle];
        style.textColor = [UIColor colorWithRed:1.0 green:1.0 blue:1.0 alpha:1.0];
        //style.borderColor = [UIColor whiteColor];
        style.textFont = [UIFont fontWithName:@"Helvetica-Bold" size:12.0];
        style.borderColor = [UIColor colorWithRed:1.0 green:1.0 blue:1.0 alpha:1.0];
        //style.borderColor = [UIColor colorWithRed:0.32 green:0.87 blue:0.05 alpha:1.0];
        style.backgroundColor = [UIColor colorWithRed:0.627 green:0.066 blue:0.196 alpha:1.0];
        MPCalloutView* mpCallOutView = [MPCalloutView calloutWithText:mpoi.uId withScreeLocation:screenLocation withViewBoundsWidth:_bounds.size.width];

//        MPCalloutViewStyle* style = [MPCalloutViewStyle blackAndWhiteStyle];
        mpCallOutView.popinstyle = style;

        return mpCallOutView;
    }
    return nil;
}

@end 
```

这是我用来显示标记的方法：

```
-(void) addMarkersOnMap {
    MPMarkerManager * markerManager = [self.mapView markerManager];
    MPMarkerCategory * category = [markerManager getCategory:STORE_LOC_CATEGORY];

    //change the image of markers of this category
    category.markerImage = [UIImage imageNamed:@"green-marker.png"];

    //category settings 
    [category setOptimalZoom:YES];//set the zoom to be optimal : show all poi in the category
    [category setHideLabelOnTheFirstShow:YES];
    [category setAnimateAtFirstShow:YES];

    //remove old elements   
    [category.dataSource removeAllElements];

    //create new mappy data source for our cotegory ( stores)
    MPPoiDataSourceMappyCustom* datasource = [[MPPoiDataSourceMappyCustom alloc] init ];

    //add markers on map
    for(int i=0; i<self.arrayStores.count; i++) {

        NSDictionary* currentStore = [self.arrayStores objectAtIndex:i];
        float latitude  = [[currentStore objectForKey:@"latitude"] floatValue];
        float longitude = [[currentStore objectForKey:@"longitude"] floatValue];
        CLLocationCoordinate2D locationStore = CLLocationCoordinate2DMake(latitude, longitude);

        //add the marker on the map for the current store
        //create a new POI object with location 
        NSString* str = [NSString stringWithFormat:@"%@ \n %@ %d", [currentStore objectForKey:@"title"],[currentStore objectForKey:@"address"], [currentStore objectForKey:@"CP"] ];
        MPPoi * poi = [[MPPoi alloc] initWithUId:str withLocation:locationStore];
        [datasource addElement:poi];
        [poi release];
        NSLog(@"add store %d on the map , coordonnées :( %f , %f )", i,latitude,longitude);
    }

    [category setDataSource:datasource];
    [datasource release];

    //send all subviews to the back
    for( UIView* view in [self.view subviews]) {
        [self.view sendSubviewToBack:view];
    }

} 
```

关于这个奇怪问题的根源的任何想法朋友？这是来自 Mappy SDK 吗？我试图在 MapViewController 的子视图上进行 boocle 并将它们发送到 Back 但它对我不起作用。提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T16:47:11.627

我已经通过尝试将其他视图放在前面来修复它：

```
[self.view bringSubviewToFront:self.headerView]; 
```

# javascript - HTML - 通过 POST 将参数传递到模态对话框

> ID：11079703
> 
> 赞同：2
> 
> 时间：2012-06-18T09:03:25.893
> 
> 标签：javascript, html, post

我们的代码如下所示：

```
var result = window.showModalDialog("somepage.jsp?argument1=abc", 
                                     dialogArguments, 
                                     otherArgs);
if (result ... 
```

我想通过`argument1`，`POST`因为它包含敏感信息。

是否可以打开一个模态对话框并将参数传递给它`POST`？如何？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T11:26:16.697

There is no way for window.showModalDialog to use POST innately. You can, however, work around it by having it submit a form.

[http://social.msdn.microsoft.com/Forums/en-us/iewebdevelopment/thread/126fcea8-c28b-49ce-ad49-65884ffabeb6](http://social.msdn.microsoft.com/Forums/en-us/iewebdevelopment/thread/126fcea8-c28b-49ce-ad49-65884ffabeb6)

Alternatively, there are many other methods of doing a similar thing.

# c# - 在 CMS 内容页面中动态创建分页

> ID：11079704
> 
> 赞同：0
> 
> 时间：2012-06-18T09:03:34.633
> 
> 标签：c#, .net, html, content-management-system, ektron

我有一个要求，CMS 管理员将从我的 CMS 中创建内容 [文章] 页面。

在文章中，会有很多带有`<h3> </h3>`标签的子标题。

当我在网页中呈现这篇文章时，我应该用其中的子标题数量对文章进行分页。就像，如果一篇文章中有 5 个子标题，则应该可以通过单击分页导航到每个子标题。所以我应该为每个子标题动态创建一个分页。

注意：所有子标题都将呈现在同一个 .aspx 页面中，我一次应该只看到一个子标题。

我的问题是，实现这一目标的最佳方法是什么？我应该在 HTML 中搜索标签并将每个部分放在一个 div 中并显示它吗？有更好的主意吗...？...

我使用的 CMS 是 Ektron。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T09:29:46.510

伙计，这可以使用 JQuery 简单地实现。
假设一页上只呈现一篇文章：

根据页面上的索引为h3元素添加一个类。

```
 $('h3').addClass($(this).index())[帮助](http://api.jquery.com/index/) 
```

并根据以下内容呈现页码：

```
$('h3').size() 
```

然后根据页码显示相关的 <h3> 标签并使用隐藏其他标签

```
$('h3:not(.[your page number])').hide(); 
```

这应该可以解决问题。应该有更好的方法来做到这一点，但这会奏效。

此外，您应该小心使用此类标签，因为当设计师和开发人员同时编码时会出现问题，所以要小心。

# asp.net-mvc - MVC4用户控件？

> ID：11079706
> 
> 赞同：2
> 
> 时间：2012-06-18T09:03:40.423
> 
> 标签：asp.net-mvc, user-controls

我正在使用 MVC4 RC 编写一个小型移动网络应用程序。

在这个应用程序中，用户必须输入各种数值，为了方便用户使用，我希望用户能够使用类似计算器的数据输入控件输入这些值

```
 1  2  3
         4  5  6
         7  8  9
            0  <  (< = Backspace) 
```

[上一条] 拼贴 [......] [下一条]

这样移动键盘就不必可见，用户可以“点击”按钮 1 到 0 并使用退格键进行更正，“点击”值应显示在“Oplage”旁边的字段中，完成后，用户应该选择“NEXT”并获得下一个视图，他将使用相同的“控件”并输入下一个数值。

我在标准 ASP.NET 中创建了许多用户控件，但对 MVC 还是陌生的，希望得到一些关于什么是最好的方法的指导。

于仁。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T09:16:08.283

MVC 具有 HTML 帮助程序，您可以使用这些帮助程序为您的应用程序生成预定义的 HTML（和脚本，如果需要）。您可以通过扩展方法[使用自己的内置帮助器进行扩展。](http://www.asp.net/mvc/tutorials/older-versions/views/creating-custom-html-helpers-cs)

或者，您可以[创建](http://rachelappel.com/razor/partial-views-in-asp-net-mvc-3-w-the-razor-view-engine/)包含相关标记和脚本的局部视图，并使用`@Html.RenderPartial("NumberPad", Model.NumericProperty)`（其中`NumberPad`是局部视图的名称，并且`Model.NumericProperty`是视图模型类上的整数属性）。

作为局部视图的变体，您可以使用[编辑器模板](http://xhalent.wordpress.com/2011/01/18/using-editortemplates-in-mvc-3/)（表面上是相同的，只是为您提供更简洁的语法）。从上方保持您的部分视图页面：

```
 @Html.EditorFor(m => m.NumericProperty, "NumberPad"); 
```

# delphi - 将 TStringGrid 导出为 doc、xls 和 pdf

> ID：11079707
> 
> 赞同：0
> 
> 时间：2012-06-18T09:03:41.330
> 
> 标签：delphi, delphi-xe2, tclientdataset, tstringgrid, jvcl

我有一种我在 TZColorStringGrid 的帮助下创建的报告（它是 Delphi 的 TStringGrid 的后代），我希望能够导出为 doc、xls、pdf 并能够打印此报告。所以我在过去两天一直在思考如何做到这一点。

我在这里找到了一篇帖子，有人询问如何从 TStringGrid 的内容创建 TClientDataSet [如何从 TStringGrid 的内容创建 QuickReport，](https://stackoverflow.com/questions/3244249/how-to-create-a-tclientdataset-from-the-contents-of-a-tstringgrid)并且提供的答案是使用 QuickReport.OnNeedData 事件处理程序。当我读到我很高兴时，我对自己说就是这样，但是在我意识到我的 DelphiXe2 上没有快速报告之后，所以这个解决方案失败了。**我可以使用 Fast Reports 以类似的方式执行此操作吗？**

我想解决问题的第二种方法是使用 JVCL 导出组件，但导出仅适用于 DBGrid，不适用于 TStringGrid。所以我认为我还需要从我的 TStringGrid 创建 TClientDataSet 并将 TClientDataSet 链接到 DbGrid 并导出它。**但我不知道如何创建该 ClientDataSet 以及是否会保留我的 TStringGrid 结构，如下图所示**

**稍后编辑：TJvPrint 是 JVCL 的组件，用于打印字符串网格，它不需要 TClientDataSet 即可工作，但它不保留我的表结构（我的意思是合并的单元格、字体格式等）**

[![点击放大图片](../Images/20c3adae65c559050adfdbcc6df96a85.png "点击放大图片")](https://i.stack.imgur.com/z64uu.png)

我认为可以解决我的问题的第三种方法是找到一个导出我的 TStringGrid 的免费组件。我找到了一个 SMExport，但它不是免费的，而且我根本没有钱投资它（不幸的是我还是个学生）。**您知道可以用来导出 TStringGrid 的任何其他免费组件吗？**

**如果有人想到导出 TStringGrid 的另一种解决方案并且他想分享它，我将不胜感激！**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-12T20:53:03.510

```
procedure TForm1.exportClick(Sender: TObject);
var
  i: Integer;
  CSV: TStrings;
  SD: TSaveDialog;
  FileName: string;
begin
  SD := TSaveDialog.Create(nil);
  try
    SD.Filter := 'CSV (*.csv)|*.CSV';
    // filters file types to only allow you to select CSV files

    if SD.Execute then
    begin
      FileName := SD.FileName;
      if ExtractFileExt(FileName) <> '.csv' then
        FileName := FileName + '.csv';

      Screen.Cursor := crHourGlass;
      try
        CSV := TStringList.create;
        try
          for i := 0 to StringGrid1.RowCount - 1 do
            CSV.Add(StringGrid1.Rows[i].CommaText);

          CSV.SaveToFile(FileName);
        finally
          CSV.free;
        end;
      finally
        Screen.Cursor := crDefault;
      end;
    end;

  finally
    SD.Free;        
  end;
end; 
```

试试看，我不确定它是否会保留合并的单元格

# c# - SetEnvironmentVariable 不更改 PATH 变量

> ID：11079709
> 
> 赞同：3
> 
> 时间：2012-06-18T09:03:45.727
> 
> 标签：c#, xulrunner

我正在使用 Se7enSoft 的 MozNet 插件。这是 FireFox 3.6 的 WebBrowser 控件。它使用 XulRunner。

我要做的第一件事是执行 Initialize(...) 方法。

```
var binDirectory = Path.GetDirectoryName(
    Assembly.GetExecutingAssembly().Location);
var xulRuntimeDirectory = Path.Combine(binDirectory, "xul");
Se7enSoft.MozNet.Xpcom.Initialize(xulRuntimeDirectory, null); 
```

我必须将我们安装 XulRunner 的目录传递给它。该插件的 Initialize 方法在内部使用以下 DLLImport。

```
[DllImport("xpcom", CharSet = CharSet.Ansi, 
           EntryPoint = "NS_CStringContainerFinish",   
           CallingConvention = CallingConvention.Cdecl)]
internal static extern int Moz_CStringContainerFinish(ACString container); 
```

需要 XulRunner 的 xpcom.dll 中的 NS_CStringContainerFinish 方法。

就在第一次调用此方法之前，MozNet 插件会临时更改 PATH 环境变量。

```
Environment.SetEnvironmentVariable("path", 
    Environment.GetEnvironmentVariable("path") + ";" + 
    binDirectory, EnvironmentVariableTarget.Process); 
```

XulRunner 的位置被临时添加到 PATH 环境变量中，以确保它可以解析 xpcom.dll（和其他）。

但是它仍然找不到它。我收到以下异常。

```
Unable to load DLL 'xpcom': Cannot find method. 
    (Exception from    HRESULT: 0x8007007F)
at Se7enSoft.MozNet.Native.MozNativeMethods.Moz_CStringContainerInit(
   ACString container)
at Se7enSoft.MozNet.Xpcom.XpCom_Init()
at Se7enSoft.MozNet.Xpcom.Initialize(String mozPath, String profPath) 
```

此问题仅发生在 3 台 PC（Windows 2000 和 XP）上。适用于数百人。

如果我调试并跳过 Environment.SetEnvironmentVariable(...) 方法，我可以重现该问题。

SetEnvironmentVariable 是否有任何问题可能会阻止它更改 PATH 环境变量？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-18T13:10:42.607

找到了原因。

DLLImport 语句使用[动态链接库搜索顺序](http://msdn.microsoft.com/en-us/library/windows/desktop/ms682586%28v=vs.85%29.aspx)自动定位 xpcom.dll 文件。

```
[DllImport("xpcom", CharSet = CharSet.Ansi, 
           EntryPoint = "NS_CStringContainerFinish",   
           CallingConvention = CallingConvention.Cdecl)]
internal static extern int Moz_CStringContainerFinish(ACString container); 
```

简而言之，它搜索：

1.  安装应用程序的目录。
2.  系统目录
3.  16位系统目录
4.  视窗目录
5.  当前目录
6.  PATH 环境变量中的目录。

原来有问题的 3 台 PC 有一个不同的 xpcom.dll 徘徊。这是首先发现的，然后 BOOM ......异常丰富。

PATH 环境变量中列出的目录（UNC 路径）指向几个 DLL，它们是 xpcom.dll 的依赖项，即：

*   nspr4.dll
*   nss3.dll
*   plc4.dll
*   plds4.dll

我们仅通过更改进程的 PATH 变量来修复它。通过将它添加到 PATH 环境变量的开头，确保我们的路径在任何其他路径之前被搜索。

```
var pluginDirectory = @"C:\....\xulrunner\");
var path = Environment.GetEnvironmentVariable("path");
Environment.SetEnvironmentVariable(
    "path", 
    pluginDirectory + ";" + path, 
    EnvironmentVariableTarget.Process); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T09:19:32.033

是的，使用设置环境变量有问题，它只是为当前进程设置指定环境变量的内容，不会对变量产生影响。

请阅读以下示例进行说明。

[http://msdn.microsoft.com/en-us/library/windows/desktop/ms686206(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/ms686206%28v=vs.85%29.aspx)

**该函数对系统环境变量或其他进程的环境变量没有影响。**

# ios - iOS UI 组件控制器如何工作？

> ID：11079710
> 
> 赞同：0
> 
> 时间：2012-06-18T09:03:46.277
> 
> 标签：ios, ios5, uiviewcontroller, controller, custom-controls

此代码运行良好：

```
UIDatePicker *pickerView = [[UIDatePicker alloc] initWithFrame:pickerFrame];
[pickerView addTarget:self 
               action:@selector(pickerChanged:) 
     forControlEvents:UIControlEventValueChanged];
[self.view addSubview:pickerView]; 
```

为什么我不需要将选择器控制器添加到我的 UIViewControllers 层次结构中？

```
[self addChildViewController:pickerView.controller]; 
```

我知道， UIView 没有**控制器**属性。但是 UIPIcker 组件如何将他的控制器添加到控制器层次结构中呢？或者 UIPicker 根本没有控制器？或者这个控制器不需要在控制器层次结构中？

我需要知道这一点来开发我自己的自定义 UI 组件，这应该很容易集成。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T09:24:47.443

`UIDatePicker`是`UIControl`that 的子类`UIView` 所以它不是 a的子类`UIViewController`，添加`UIView`到视图中添加使用`addSubView`

如果确实是 then`UIDatePicker`的子类，则必须使用`UIViewController``addChildViewController`

当您创建自定义视图时，它取决于您扩展的类，如果您扩展，`UIView`那么您将需要使用`addSubView`，如果它会扩展`UIViewController`然后使用`addChildViewController`

# java - 无法通过 javamail 通过 POP3 协议获取 yahoo 邮件

> ID：11079713
> 
> 赞同：0
> 
> 时间：2012-06-18T09:03:55.030
> 
> 标签：java, netbeans, jakarta-mail

我在下面有一些代码：

```
Properties props = System.getProperties();

        //set mail protocol 
        //props.setProperty("mail.store.protocol", "imaps");
        props.setProperty("mail.store.protocol", "pop3s");

        //create new store 
        Session session = Session.getDefaultInstance(props);

        //store = session.getStore("imaps");
        store = session.getStore("pop3s");

        store.connect("pop.mail.yahoo.com", 995, "MyYahooUserName", "MyPassword");
        //store.connect("imap.next.mail.yahoo.com", 993, "MyYahooUserName", "MyPassword");
        isConnect = true; 
```

当我尝试 IMAP 协议时它可以工作，但是对于 POP3，我在下面遇到异常，我不知道为什么

```
SEVERE: null
javax.mail.AuthenticationFailedException: EOF on socket
at com.sun.mail.pop3.POP3Store.protocolConnect(POP3Store.java:208)
at javax.mail.Service.connect(Service.java:295)
at gmailutilities.GmailUtilities.connect(GmailUtilities.java:88)
at gmailutilities.Main.main(Main.java:29)
javax.mail.MessagingException: Not connected
at com.sun.mail.pop3.POP3Store.checkConnected(POP3Store.java:408)
at com.sun.mail.pop3.POP3Store.getDefaultFolder(POP3Store.java:357)
at gmailutilities.GmailUtilities.openFolder(GmailUtilities.java:103)
at gmailutilities.Main.main(Main.java:30) 
```

**有人知道为什么吗？请帮助我。谢谢大家！**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T12:19:24.547

请注意，免费的 Yahoo! 邮件帐户不允许 POP3 或 SMTP 访问。您必须购买 Yahoo! Mail Plus 帐户以获得 POP3 和 SMTP 访问权限。

# android - Action Bar 的 Home 按钮的 onClick 监听器

> ID：11079718
> 
> 赞同：89
> 
> 时间：2012-06-18T09:04:09.933
> 
> 标签：android, android-intent, actionbarsherlock, onitemclicklistener

如何`onClickListener`为操作栏的主页按钮实现自定义？

我已经做了一个`getSupportActionBar().setDisplayHomeAsUpEnabled(true);`，现在我想将用户重定向到某个活动，以防单击主页按钮。

我试过：

```
@Override
    public boolean onOptionsItemSelected(MenuItem item) {
        switch (item.getItemId()) {
        case android.R.id.home:
            item.setOnMenuItemClickListener(new OnMenuItemClickListener() {
                public boolean onMenuItemClick(MenuItem item) {
                    Intent i = new Intent();
                    i.setClass(BestemmingActivity.this, StartActivity.class);
                    i.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
                    startActivity(i);
                    return true;
                }
            });
        default:
            return super.onOptionsItemSelected(item);
        }
    } 
```

但它永远不会进入`onMenuItemClick`.

基本上，它就像在[这个链接](http://developer.android.com/guide/topics/ui/actionbar.html#Up)中一样完成，但它仍然没有进入监听器。

* * *

## 回答 #1

> 赞同：120
> 
> 时间：2015-02-24T09:20:11.637

如果其他人需要解决方案

```
@Override
public boolean onOptionsItemSelected(MenuItem item) {
    int id = item.getItemId();

    if (id == android.R.id.home) {
        onBackPressed();  return true;
    }

    return super.onOptionsItemSelected(item);
} 
```

* * *

## 回答 #2

> 赞同：111
> 
> 时间：2012-07-10T08:22:29.390

我使用[actionBarSherlock](http://actionbarsherlock.com/index.html)，设置后`supportActionBar.setHomeButtonEnabled(true);`
我们可以覆盖 onMenuItemSelected 方法：

```
@Override
public boolean onMenuItemSelected(int featureId, MenuItem item) {

    int itemId = item.getItemId();
    switch (itemId) {
    case android.R.id.home:
        toggle();

        // Toast.makeText(this, "home pressed", Toast.LENGTH_LONG).show();
        break;

    }

    return true;
} 
```

我希望这对你有用~~~祝你好运

* * *

## 回答 #3

> 赞同：24
> 
> 时间：2014-06-02T11:37:06.617

if we use the system given action bar following code works fine

```
getActionBar().setHomeButtonEnabled(true);

@Override
public boolean onMenuItemSelected(int featureId, MenuItem item) {

    int itemId = item.getItemId();
    switch (itemId) {
    case android.R.id.home:
      //do your action here.
        break;

    }

    return true;
} 
```

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2012-06-18T09:30:45.757

固定：无需使用`setOnMenuItemClickListener`. 只需按下按钮，它就会通过意图创建并启动活动。

非常感谢大家的帮助！

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2016-07-10T07:38:59.257

回答了正在发生的事情的一半。当 manifest.xml 系统中的父活动集转到父活动时，如果`onOptionsItemSelected`不是控制按钮。`homeAsUp`在活动标签中使用这样的：

```
<activity ... >
<meta-data
android:name="android.support.PARENT_ACTIVITY"
android:value="com.activities.MainActivity" /> 
</activity> 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2012-06-18T09:09:38.963

如果在 ICS 上运行，您需要显式启用 home 操作。从[文档](http://developer.android.com/guide/topics/ui/actionbar.html#Home)：

> 注意：如果您使用图标导航到 home Activity，请注意，从 Android 4.0（API 级别 14）开始，您必须通过调用 setHomeButtonEnabled(true) 显式启用图标作为操作项（在以前的版本中，默认情况下，图标作为操作项启用）。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2016-06-08T03:53:30.283

自定义操作栏 onClickListener 的最佳方法是 onSupportNavigateUp()

此代码将是[帮助代码的有用链接](https://stackoverflow.com/questions/11304483/proper-way-to-handle-action-bar-up-button/37692750#37692750)

* * *

## 回答 #8

> 赞同：-4
> 
> 时间：2017-07-28T09:22:44.640

您应该删除您的 Override onOptionsItemSelected 并使用此代码重新标记您的 onCreateOptionsMenu

```
@Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.menu_action_bar_finish_order_stop, menu);
        menu.getItem(0).setOnMenuItemClickListener(new FinishOrderStopListener(this, getApplication(), selectedChild));
        return true;

    } 
```

# c# - 删除列表视图中的列数据

> ID：11079719
> 
> 赞同：2
> 
> 时间：2012-06-18T09:04:14.610
> 
> 标签：c#, .net, windows

我有一个包含以下内容的列表视图：

```
 // Add column headers for log
    logListView.View = View.Details;
    logListView.GridLines = true;
    logListView.FullRowSelect = true;
    logListView.Columns.Add("Event ID", 70);
    logListView.Columns.Add("Checkname", 150);
    logListView.Columns.Add("Hostname", 120);
    logListView.Columns.Add("Result", 150);
    logListView.Columns.Add("Date", 125);
    logListView.Columns.Add("Time", 125); 
```

每列都包含数据，尽管如何删除特定列中的所有数据？（如下图红框所示）

![网格图像](../Images/ad5f265cd3c28304d7314f6d4d5ebd3f.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T09:13:52.643

您可以将该列值设置为空字符串：

```
int totalItems = logListView.Items.Count;
for(int i=0; i<totalItems ; i++){
    // Column B is at index 1
    logListView.Items[i].SubItems[1].Text = string.Empty;
} 
```

# c# - Windows Phone 中多进程访问数据库

> ID：11079721
> 
> 赞同：0
> 
> 时间：2012-06-18T09:04:35.690
> 
> 标签：c#, multithreading, windows-phone-7

我正在编写一个 Windows Phone 应用程序，它将数据存储在本地数据库中。我的应用程序中有多个线程可以访问数据库，到目前为止，我已经使用[此处](http://queconejo.wordpress.com/2011/09/04/windows-phone-mango-and-concurrent-database-access/)描述的技术和 AutoResetEvent 来确保任何时候只有一个线程可以访问数据库。

到目前为止，这已经非常可靠地工作了，但是现在我想添加一个 ScheduledTask 在后台做一些工作，所以我现在可能有多个进程竞争访问数据库。

谁能建议我如何调整 AutoResetEvent 技术以在 Windows Phone 上的多个进程中使用？

我见过使用互斥锁的方法。如果我在每次 DB 调用之前获取 Mutex，然后在之后释放它（类似于我使用 AutoResetEvent 的方式），这会成功吗？这种技术有什么潜在的问题吗？例如：性能？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T07:25:22.970

好的，首先我的问题实际上是两个问题：

1.  需要确保如果前台应用程序正在运行，则后台进程不会运行
2.  需要确保一次只有一个线程可以访问数据库，并且这需要跨进程工作，以适应（诚然很少见，但可能）在后台进程正在进行时启动前台应用程序的情况。

基于[此线程](https://stackoverflow.com/questions/229565/what-is-a-good-pattern-for-using-a-global-mutex-in-c/229567#229567)中所做的出色工作，我创建了几个类来提供帮助。

为了解决问题（1），我创建了 SingleInstanceSynchroniser：

```
/// <summary>
/// Used to ensure only one instance (foreground app or background app) runs at once
/// </summary>
public class SingleInstanceSynchroniser : IDisposable
{
    private bool hasHandle = false;
    Mutex mutex;

    private void InitMutex()
    {
        string mutexId = "Global\\SingleInstanceSynchroniser"; 
        mutex = new Mutex(false, mutexId);
    }

    public SingleInstanceSynchroniser()
    {
        InitMutex();
        hasHandle = mutex.WaitOne(0);
    }

    public void Dispose()
    {
        if (hasHandle && mutex != null)
            mutex.ReleaseMutex();
    }

    public bool HasExclusiveHandle { get { return hasHandle; } }

} 
```

用法：

在 App.xaml.cs 中：

```
...

SingleInstanceSynchroniser singleInstanceSynchroniser;

public App()
{
    singleInstanceSynchroniser = new SingleInstanceSynchroniser();

... 
```

在 ScheduledAgent.cs 中：

```
SingleInstanceSynchroniser singleInstanceSynchroniser;

protected override void OnInvoke(ScheduledTask task)
    {
        singleInstanceSynchroniser = new SingleInstanceSynchroniser();

        if (singleInstanceSynchroniser.HasExclusiveHandle)
        {
            //Run background process
            ...
        }
        else
        { //Do not run if foreground app is running
            NotifyComplete();
        }
    } 
```

为了解决问题（2），我创建了 SingleAccessSynchroniser：

```
/// <summary>
/// Used to ensure only one call is made to the database at once 
/// </summary>
public class SingleAccessSynchroniser : IDisposable
{
    public bool hasHandle = false;
    Mutex mutex;

    private void InitMutex()
    {
        string mutexId = "Global\\SingleAccessSynchroniser"; 
        mutex = new Mutex(false, mutexId);            
    }

    public SingleAccessSynchroniser() : this(0)
    { }

    public SingleAccessSynchroniser(int TimeOut)
    {
        InitMutex();

        if (TimeOut <= 0)
            hasHandle = mutex.WaitOne(); 
        else
            hasHandle = mutex.WaitOne(TimeOut);

        if (hasHandle == false)
            throw new TimeoutException("Timeout waiting for exclusive access on SingleInstance");
    }

    public void Release()
    {
        if (hasHandle && mutex != null)
        {
            mutex.ReleaseMutex();
            hasHandle = false;
        }
    }

    public void Dispose()
    {
        Release();
    }
} 
```

用法：在所有数据库调用中：

```
using (var dbSync = new SingleAccessSynchroniser())
        {
            //Execute your database calls
        } 
```

这已经可靠地运行了几个星期。希望别人觉得它有用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-22T07:03:27.490

我在 Windows Phone 8 上使用 Bens 解决方案时遇到了一些问题。有关这些问题的完整文档，请参阅[此](http://social.msdn.microsoft.com/Forums/en-US/wpdevelop/thread/d0700c1b-fd9b-4a71-9d3e-79e58fcbe2c4/)线程。

我能够通过从“Global\SingleInstanceSynchroniser”中删除“Global\”来解决这些问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-20T08:28:44.990

代理和应用程序之间对数据库的并发访问不应该成为问题。事实上，使用 Linq2SQL 是[应用程序和代理之间通信的推荐方式](http://msdn.microsoft.com/en-us/library/hh202944%28v=vs.92%29.aspx)之一。

在实践中，应用程序和代理很少需要同时运行，因此防止这种情况发生可能更合适。

潜在的性能问题将取决于您在做什么。您需要对此进行测量以查看它是否真的是一个问题。

# jquery - 使用 GoogleDocs 在 iF rame 中使用 jQuery 显示 pdf 找不到文件

> ID：11079725
> 
> 赞同：1
> 
> 时间：2012-06-18T09:04:49.777
> 
> 标签：jquery, google-docs

当我从我的 Mac 的个人网络共享服务器提供服务时，我已经成功地使用 GoogleDocs 在 iPad 上显示 PDF，我在该服务器上完成了我的所有开发工作。

但是，当我从文件位于虚拟目录中的 64 位生产 Windows Server 2008 运行时，GooglDocs 会显示一条对不起消息，它无法找到该文件。单击他们的“单击此处下载文件”链接在 iFrame 中加载文件没有问题，但在 GoogleDocs 查看器中没有问题。

这是我的代码在没有虚拟目录的 mac 上的样子...

```
iFrameSrc = "http://docs.google.com/viewer?url=http%3A%2F%2F71.98.201.139%2FSectorPlansPDF%2FFM-01Q-16QMC1824(1).pdf";
iFrameSrc = "http://docs.google.com/viewer?url=" + iFrameSrc + "&embedded=true";
$('.viewer .ifrm').attr('src', iFrameSrc); 
```

未编码的源看起来像这样......

```
iFrameSrc = "http://docs.google.com/viewer?url=http://71.98.201.139/SectorPlansPDF/FM-01Q-16QMC1824(1).pdf"; 
```

在具有虚拟目录的 Windows 服务器上，它看起来像这样......

```
iFrameSrc = "http://docs.google.com/viewer?url=http%3A%2F%2FMyProdcutionSite.com%2FMyVirtualDir%2FSectorPlansPDF%2FFM-01Q-16QMC1824(1).pdf";
iFrameSrc = "http://docs.google.com/viewer?url=" + iFrameSrc + "&embedded=true";
$('.viewer .ifrm').attr('src', iFrameSrc); 
```

未编码的这个看起来像这样......

```
iFrameSrc = "http://docs.google.com/viewer?url=http://MyProdcutionSite.com/MyVirtualDir/SectorPlansPDF/FM-01Q-16QMC1824(1).pdf"; 
```

任何人都知道为什么会这样，如果是这样，如何让它工作？我们关闭了防火墙以确保这不会导致问题。我怀疑 IIS 中有一个我们没有正确设置的设置。

你问我为什么不直接在没有 GoogleDocs 的 iFrame 中使用它？PDF 比 iPad 上的 iFrame 大得多，因此加载时只能看到 PDF 的左上角，这是不可接受的。我找不到缩放 pdf 以适应 iframe 的方法。GooglDocs 会自动显示缩放以适合查看器的 pdf。

谢谢你的帮助。

约翰

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-06-16T19:30:10.940

您可以使用 Google Document Viewer，它可以让您使用他们的查看器来处理不在 Google 上托管的文件。就像是：

```
<iframe src="http://docs.google.com/gview?url=http://example.com/example.pdf&embedded=true" style="width:600px; height:500px;" frameborder="0"></iframe> 
```

更多信息：http: [//googlesystem.blogspot.com/2009/09/embeddable-google-document-viewer.html](http://googlesystem.blogspot.com/2009/09/embeddable-google-document-viewer.html)

# objective-c - 如何处理 AVCaptureVideoPreviewLayer 中的自动旋转？

> ID：11079726
> 
> 赞同：8
> 
> 时间：2012-06-18T09:04:50.263
> 
> 标签：objective-c, ios, orientation, preview, autorotate

我的应用程序支持除 PortraitUpsideDown 之外的所有方向。在我的视图层次结构中，我有一个 AVCaptureVideoPreviewLayer 作为顶视图中的子层，即 UIImageView。然后在视图层次结构的下方是几个显示控件的覆盖视图。

覆盖视图在方向更改时正常工作，但我不知道如何使用此 AVCaptureVideoPreviewLayer。我希望它的行为像在相机应用程序中一样，以便 previewLayer 保持静止并且控件可以顺利重组。现在，由于主视图在方向更改时旋转，我的预览层也旋转了，这意味着在横向视图中它保持纵向视图，仅占据屏幕的一部分，并且来自相机的图片也旋转了 90 度。我已经设法手动旋转预览层，但是它有这个方向改变动画，这导致在动画期间可以看到背景一段时间。

那么在使 previewLayer 保持静止的同时自动旋转控件的正确方法是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-28T11:35:17.520

在我的实现中，我将 UIView 子类化为我想要旋转的视图，以及类似 viewController 的视图，这只是 NSObject 的子类。

在这个 viewController 中，我做了所有与方向变化相关的检查，决定是否应该改变目标视图的方向，如果是，那么我调用视图的方法来改变它的方向。

首先，我们需要将整个应用程序界面的方向固定为纵向模式，以便我们的 ACCaptureVideoPreviewLayer 始终保持静止。这是在`MainViewController.h`：

```
(BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation`
{
    return interfaceOrientation==UIInterfaceOrientationPortrait;
} 
```

它对除纵向以外的所有方向都返回 NO。

为了让我们的自定义 viewController 能够跟踪设备方向的变化，我们需要让它成为相应通知的观察者：

```
[[UIDevice currentDevice] beginGeneratingDeviceOrientationNotifications];
[[NSNotificationCenter defaultCenter]addObserver:self selector:@selector(orientationChanged) name:UIDeviceOrientationDidChangeNotification object:nil]; 
```

我将这些行放在`(void)awakeFromNib`我的 viewController 的方法中。所以每次改变设备方向时，`orientationChanged`都会调用viewController的方法。

它的目的是检查设备的新方向是什么，设备的最后一个方向是什么，并决定是否改变它。这是实现：

```
if(UIInterfaceOrientationPortraitUpsideDown==[UIDevice currentDevice].orientation ||
    lastOrientation==(UIInterfaceOrientation)[UIDevice currentDevice].orientation) 
    return;
    [[UIApplication sharedApplication]setStatusBarOrientation:[UIDevice currentDevice].orientation animated:NO];

    lastOrientation=[UIApplication sharedApplication].statusBarOrientation;
    [resultView orientationChanged]; 
```

如果方向与之前或 PortraitUpsideDown 中的方向相同，则什么也不做。否则它将状态栏方向设置为正确的方向，以便当有来电或骨化时，它会出现在屏幕的右侧。然后我还在目标视图中调用方法，其中完成了新方向的所有相应更改，例如旋转、调整大小、移动此视图中与新方向相对应的界面的其他元素。

这是`orientationChanged`目标视图的实现：

```
Float32 angle=0.f;
UIInterfaceOrientation orientation=[UIApplication sharedApplication].statusBarOrientation;

switch (orientation) {
    case UIInterfaceOrientationLandscapeLeft: 
        angle=-90.f*M_PI/180.f;
        break;
    case UIInterfaceOrientationLandscapeRight: 
            angle=90.f*M_PI/180.f;
        break;
    default: angle=0.f;
        break;
}   
if(angle==0 && CGAffineTransformIsIdentity(self.transform)) return;

CGAffineTransform transform=CGAffineTransformMakeRotation(angle);

[UIView beginAnimations:@"rotateView" context:nil];
[UIView setAnimationCurve:UIViewAnimationCurveEaseOut];
[UIView setAnimationDuration:0.35f];

self.transform=transform;

[UIView commitAnimations]; 
```

当然，您可以在此处添加任何其他更改，例如平移、缩放需要响应新方向并为其设置动画的界面不同视图。

此外，您可能不需要 viewController，但只需在您的视图类中完成所有操作。希望大体思路清晰。

另外，当您不需要方向更改时，不要忘记停止接收通知，例如：

```
[[NSNotificationCenter defaultCenter]removeObserver:self name:UIDeviceOrientationDidChangeNotification object:nil];
[[UIDevice currentDevice]endGeneratingDeviceOrientationNotifications]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-05-22T10:18:17.813

iOS 8 解决方案：

```
- (void)viewWillTransitionToSize:(CGSize)size withTransitionCoordinator:(id<UIViewControllerTransitionCoordinator>)coordinator {
    if ([UIApplication sharedApplication].statusBarOrientation == UIInterfaceOrientationLandscapeLeft) {
        self.layer.connection.videoOrientation = AVCaptureVideoOrientationLandscapeLeft;
    } else {
        self.layer.connection.videoOrientation = AVCaptureVideoOrientationLandscapeRight;
    }
} 
```

在您的设置代码中：

```
self.layer = [[AVCaptureVideoPreviewLayer alloc] initWithSession:self.session];
self.layer.videoGravity = AVLayerVideoGravityResizeAspectFill;
if ([UIApplication sharedApplication].statusBarOrientation == UIInterfaceOrientationLandscapeLeft) {
    self.layer.connection.videoOrientation = AVCaptureVideoOrientationLandscapeLeft;
} else {
    self.layer.connection.videoOrientation = AVCaptureVideoOrientationLandscapeRight;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-21T17:46:04.760

主要问题是当我收到通知时，状态栏还没有旋转，所以检查当前值实际上是旋转前的值。所以我在调用检查状态栏方向并旋转我的子视图的方法之前添加了一点延迟（这里是 2 秒）：

```
-(void) handleNotification:(NSNotification *) notification
{    
    (void) [NSTimer scheduledTimerWithTimeInterval:(2.0)
                                           target:self
                                          selector:@selector(orientationChanged)
                                          userInfo:nil
                                           repeats:NO ] ;
} 
```

其余代码来自 BartoNaz。

# crystal-reports - 将数据集添加到我的 Crystal 报表

> ID：11079729
> 
> 赞同：1
> 
> 时间：2012-06-18T09:05:04.487
> 
> 标签：crystal-reports

我有一个关于我的项目的 Crystal 报表，我想向我的数据集添加一个新表。我创建了表格并打开了 Dataset Expert 对话框。当我选择要添加的新表时，它会显示另一个对话框，我必须在其中写下我的班级名称。如果我不这样做，它会给我一个名为“登录失败”的错误。

我必须指定哪个类？

你能帮助我吗？

谢谢你。

# python - Python 装饰器理论

> ID：11079734
> 
> 赞同：4
> 
> 时间：2012-06-18T09:05:13.647
> 
> 标签：python, decorator, theory

我对 Python 中的干净理论有疑问。什么时候：

```
@decorator_func
def func(bla, alba):
    pass 
```

相当于：

```
def func(bla, alba):
    pass
func = decorator_func(func) 
```

所以：

```
@decorator_func(aaa, bar)
def func(bla, alba):
    pass 
```

相当于...？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-18T09:07:31.780

它相当于：

```
def func(bla, alba):
    pass
func = decorator_func(aaa, bar)(func) 
```

或者：

```
def func(bla, alba):
    pass
decorator = decorator_func(aaa, bar)
func = decorator(func) 
```

因此，在您的第二个示例中，`decorator_func`应该是一个返回可调用对象的可调用对象。

这是这种结构的一个例子：

```
class prepend_two_arguments:
    def __init__(self, a, b):
        self.a = a
        self.b = b

    def __call__(self, f):
        def wrapped_function(*args, **kwargs):
            return f(self.a, self.b, *args, **kwargs)
        return wrapped_function

@prepend_two_arguments(1,2)
def f(a, b, c):
    return a+b+c
print(f(3)) # 6 
```

还有一个，只使用函数：

```
def add_to_result(x):
    def decorator(fn):
        def wrapped_function(*args, **kwargs):
            return fn(*args, **kwargs)+x
        return wrapped_function
    return decorator

@add_to_result(3)
def my_func(a, b):
    return a+b
print(my_func(1,2)) # 6 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-18T09:27:19.953

下面是一个使用闭包的装饰器函数示例：

```
def print_string_before(string):
    def decorator_fn(fn):
        def wrapped_fn(*args, **kwargs):
            print string
            return fn(*args, **kwargs)
        return wrapped_fn
    return decorator_fn 
```

请注意，装饰器同样可以返回被装饰的函数（或类），并以某种方式对其进行修改（例如设置属性）。

# php - php里面的javascript函数

> ID：11079735
> 
> 赞同：2
> 
> 时间：2012-06-18T09:05:19.203
> 
> 标签：php, javascript, jquery

我想做的是在脚本标签内运行 php 循环内的 javascript。例如：

```
<script>
$('#mydiv').mouseover(function(){
time();
function time(){
<?php  
    $secs = 45; 
    $secs--;
if($secs <= 25){
?>//javascript code here 
}
});
</script> 
```

我的主要目的是当用户将鼠标悬停在一个 div 上时，一个 javascript 函数运行并且在该 javascript 函数内部有 php if conitions。如果时间小于 25 则执行指定的 javascript 代码。然后是另一个条件，如果时间少于 10，则执行另一个 javascript 函数。任何类型的帮助将不胜感激。谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-18T09:12:41.583

JavaScript 是客户端脚本，PHP 是服务器端脚本。因此，您要么对服务器进行[AJAX](http://api.jquery.com/jQuery.ajax/)调用，要么只对纯 JS 进行调用。

**AJAX+PHP：**

```
<script>
    $('#mydiv').mouseover(function(){
        $.ajax({
            url: 'secs.php',
            success: function(data) {
                var secs = parseInt(data);

                if(secs <= 10) {
                    // do stuff
                }
                else if(secs <= 25) {
                    // do stuff
                }
            },
        });
    });
</script> 
```

秒.php：

```
<?php
    session_start();

    if(!isset($_SESSION['secs'])) $_SESSION['secs'] = 45;
    else echo $_SESSION['secs'] --;
?> 
```

**纯JS：**

```
<script>
    var secs = 45;

    $('#mydiv').mouseover(function(){
        secs --;

        if(secs <= 10) {
            // do stuff
        }
        else if (secs <= 25) {
            // do stuff
        }
    });
</script> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-18T09:07:21.120

PHP 在服务器上运行并输出一些文本。

然后浏览器将该文本解释为 HTML/JS/等。

除非您发出新的 HTTP 请求，否则您无法运行 PHP 来响应客户端事件。

如果您知道 PHP 在页面构建时关心的值，那么您可以生成 JavaScript，并将该数据存储在变量中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-18T09:08:48.220

您不能在 Javascript 中使用 PHP，如果您需要服务器端操作，您应该使用 AJAX。[jQuery 有一个简洁的实现。](http://api.jquery.com/jQuery.ajax/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-18T09:11:10.393

你不能这样做，因为 php 在服务器上运行而 javascript 在客户端上运行。这意味着您的 php 代码在服务器上转换为 DHTML 并发送到客户端。但是javascript在客户端上运行......所以如果你想将它们结合起来。您必须再次从客户端请求服务器（例如通过 ajax）。

但回到你的代码......你为什么不在javascript中计算时间？你可以得到你想要的`var date = new Date(); time = date.getCurrentTime()`

# iphone - 在 iPhone 上流式传输视频

> ID：11079738
> 
> 赞同：0
> 
> 时间：2012-06-18T09:05:29.613
> 
> 标签：iphone, ios, streaming, video-streaming

我想在 iPhone 中从 ftp 流式传输大型视频。视频大小超过 500 MB。我从来没有做过流媒体，所以不知道。我查看了 Apple 的实时流媒体指南，但它没有提供有关 iPhone 编码的任何帮助。有人可以帮助我在 iPhone 编码中到底需要做什么吗？到目前为止，我已经完成了以下工作：

```
MPMoviePlayerViewController *mpvc = [[MPMoviePlayerViewController alloc] initWithContentURL:[NSURL URLWithString:@"http://www.defencecourse.com/digital-reproductions/yellow-belt.mp4"]];
[[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(moviePlayBackDidFinish:) name:MPMoviePlayerPlaybackDidFinishNotification
                                           object:nil];
mpvc.moviePlayer.movieSourceType = MPMovieSourceTypeStreaming;

[self presentMoviePlayerViewControllerAnimated:mpvc];
[mpvc release]; 
```

这种编码是否足以播放流媒体视频？

我有一个为我准备视频的人，我应该让他对服务器上的视频做什么？我应该问他只是在服务器上分割视频还是其他什么？有人可以建议我最好的转发方式吗？

问候
潘卡伊

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T09:43:19.213

嗨，您必须在 iphone 端执行以下操作...

-（无效）btnClose_clicked {

```
[appDelegate.navShowController dismissModalViewControllerAnimated:YES]; 
```

} -（IBAction）btnPlay_clicked {

```
//    NSString *urlStr = [[NSBundle mainBundle] pathForResource:@"3idiots.mov" ofType:nil];
//   NSURL *url =[NSURL fileURLWithPath:urlStr];
NSURL *url = [[NSURL alloc] initWithString:[self.DiscAnsDetail objectForKey:@"product_video"]];  
MPMoviePlayerController *moviePlayer = [[MPMoviePlayerController alloc] initWithContentURL:url];  

// Register to receive a notification when the movie has finished playing.  
[[NSNotificationCenter defaultCenter] addObserver:self  
                                         selector:@selector(moviePlayBackDidFinish:)  
                                             name:MPMoviePlayerPlaybackDidFinishNotification  
                                           object:moviePlayer];  

if ([moviePlayer respondsToSelector:@selector(setFullscreen:animated:)]) {  
    // Use the new 3.2 style API  
    moviePlayer.controlStyle = MPMovieControlStyleDefault;  
    moviePlayer.shouldAutoplay = YES;  
    [self.view addSubview:moviePlayer.view];  
    [moviePlayer setFullscreen:YES animated:YES];  
} else {  
    // Use the old 2.0 style API  
    moviePlayer.movieControlMode = MPMovieControlModeHidden;  
    [moviePlayer play];  
} 
```

} - (void)moviePlayBackDidFinish:(NSNotification*)notification {
MPMoviePlayerController *moviePlayer = [通知对象];
[[NSNotificationCenter defaultCenter] removeObserver:self
name:MPMoviePlayerPlaybackDidFinishNotification
object:moviePlayer];

```
// If the moviePlayer.view was added to the view, it needs to be removed  
if ([moviePlayer respondsToSelector:@selector(setFullscreen:animated:)]) {  
    [moviePlayer.view removeFromSuperview];  
}  

[moviePlayer release]; 
```

}

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T09:19:42.027

查看这些教程[AVFoundation Tutorials并](http://www.sdkboy.com/?cat=8)[在此处](https://developer.apple.com/library/mac/#documentation/AudioVideo/Conceptual/AVFoundationPG/Articles/00_Introduction.html)阅读 Apple 的 AVFoundation Framework 编程指南

AVFoundation 框架要强大得多。

# android - OSM 地图中的瓦片服务器是什么

> ID：11079741
> 
> 赞同：6
> 
> 时间：2012-06-18T09:05:45.297
> 
> 标签：android, tile, openstreetmap

我的应用程序完全在显示引脚和路线信息以及两个引脚之间的距离的地图上。为此，我尝试使用 OSM 地图而不是谷歌地图，因为如果用户增加，谷歌地图有一定的限制。所以我的客户想要其他地图而不是谷歌地图。经过研究，我知道 OSM 是另一种方法。但它使用磁贴服务器有一些限制。但我不明白它是什么。谁能告诉我它是什么，使用 OSM 会更好吗

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-19T06:32:10.920

切片服务器是从数据库生成渲染图像（[切片）的服务。](https://wiki.openstreetmap.org/wiki/Tiles)因此，它需要大量的存储容量来存储数据库和渲染图块。带宽和 CPU 也是必需的，但主要取决于您的磁贴服务器的访问频率。

还有一些[非官方的 OSM 瓦片服务器](http://wiki.openstreetmap.org/wiki/Tile_usage_policy#Alternative_OpenStreetMap_Tile_Providers)，它们的使用策略限制较少。但是，如果它们不符合您的需求，并且您想了解有关设置自己的磁贴服务器的更多信息，请访问[switch2osm.org](http://switch2osm.org/serving-tiles/)。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-18T09:10:43.773

据我所知，Tile Server 是托管 OSM 地图的服务器。您可以创建自己的 Tile Server 并将数据从另一个 Tile Server 复制到该服务器。

# android - 如何将 SpriteFont 导入 MonoGame

> ID：11079744
> 
> 赞同：1
> 
> 时间：2012-06-18T09:05:53.160
> 
> 标签：android, xamarin.android, android-assets, monogame, spritefont

我正在使用 Mono For Android 和 MonoGame 将一个简单的类似俄罗斯方块的 XNA 应用程序移植到 Android；我已按照[此链接](http://www.youtube.com/watch?v=hF0sm5KGPPM)中的建议步骤进行操作，到目前为止，一切都编译得很好，并且没有出现相关警告。但是，在加载内容时，一个空参数异常会在我的程序中的以下位置中断程序：

```
protected override void LoadContent() {
    // ...
    _font = Content.Load<Microsoft.Xna.Framework.Graphics.SpriteFont>("SpriteFont1");
    // ... 
} 
```

内容根目录在游戏构造器类中设置：

```
public Game2 (){
Content.RootDirectory = "Content";
Content.RootDirectory = "Assets/Content"; // TEST.
//...} 
```

而且我尝试了几种组合，都无济于事。

我还尝试在 Build Action 属性中将 xnb 文件设置为 Content 和 Android Assets；有链接，总是复制，只有更新时才复制......等等。

无论哪种方式，我的问题是我真的不明白 *为什么*以及*如何*做到这一点。我对这个平台和 XNA 也很陌生，所以这很可能是一个新手问题，但事实是，在我用头和拳头敲打显示器/键盘几个小时后，我感到卡住了，需要你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T11:28:31.110

MonoGame (2.5.1) 在 ContentManager.Load 中为 SpriteFont 类型抛出 NotImplementedException。有同样未解决的问题。我试图不使用 DrawString。

为了在 Win32 应用程序中加载纹理，我使用：

```
Content.RootDirectory = @"../../Content";
var sampleTexture = Content.Load<Texture2D>("Sample.png"); 
```

您甚至不能将其添加到解决方案中。

对于 Andoind (MonoDroid) 应用程序，您必须将“Content”文件夹添加到您的解决方案中，并在“Sample.png”属性中设置“Andtoid Asset”。

```
Content.RootDirectory = "Content";
var sampleTexture = Content.Load<Texture2D>("Sample.png"); 
```

也可以看看：

[http://monogame.codeplex.com/discussions/360468](http://monogame.codeplex.com/discussions/360468)

[http://monogame.codeplex.com/discussions/267900](http://monogame.codeplex.com/discussions/267900)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T13:21:33.297

我有一个支持[MonoGame](https://github.com/ananthonline/graffiti)上可变宽度字体（由[BMFont](http://www.angelcode.com/products/bmfont/)生成）的库。不幸的是，它是一个渲染器，周围还有其他代码。但是，基本思想非常简单。您可以在此处查看[加载程序和](https://github.com/ananthonline/graffiti/blob/master/Graffiti.Core/Text/BitmapFont.cs)[此处](https://github.com/ananthonline/graffiti/blob/master/Graffiti.Core/Text/BitmapText.cs)的网格构建器（给定一个字符串）。此构建器也支持将字符分布在多个页面上的字体。

希望这可以帮助！

# html - 在内容下放置页脚似乎不起作用

> ID：11079749
> 
> 赞同：0
> 
> 时间：2012-06-18T09:06:14.227
> 
> 标签：html, css, positioning, footer

无论内容的长度如何，我都试图在我的内容下的网页上获取页脚。出于某种原因，它不想这样做。

**HTML：**

```
<div class="container">
    <div class="navigatie">
        <ul>
            <a class="navigatielink" href="index.php?page=home"><li class="navigatieli navigatie1">Home</li></a>
            <a class="navigatielink" href="index.php?page=info"><li class="navigatieli navigatie2">Info</li></a>
            <a class="navigatielink" href="index.php?page=agenda"><li class="navigatieli navigatie3 ">Agenda</li></a>
            <a class="navigatielink" href="index.php?page=fotos"><li class="navigatieli navigatie4">Foto's</li></a>
            <a class="navigatielink" href="index.php?page=contact"><li class="navigatieli navigatie5">Contact</li></a>
            <a class="navigatielink" href="index.php?page=gastenboek"><li class="navigatieli navigatie6">Gastenboek</li></a>
        </ul>
    </div>
    <?php
        //include the page content
        include_once ("content/".$_PAGE.'.php');
    ?>
</div>
<div class="clear"></div>
<div class="footer"> 
```

**CSS：**

```
.container {
    width: 1000px;
    margin: auto;
    height: auto;
}

.clear {
    clear: both;
}
.footer {
    background-image: url("images/css/footer.png");
    height: 500px;
}

.navigatie {
    font-family: Rockwell;
    height: 45px;
    width: 980px;
    margin:auto;
    margin-top: 15px;
    font-size: 24px; 
    border: 1px solid #c3c3c3;
    background: #fff;
} 
```

我已经尝试将`.container`高度设置为 100% 并使用定位，但无论它的长度如何，我似乎都无法在内容下方获得此页脚......
还有更多建议吗？

**编辑：**
关于[这个网站](http://www.dejeuzel.be/new/index.php)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T09:15:28.967

由于您没有提到已使用的样式， `class="navigatie"`我猜您已经使用了`float`那里的属性。如果是这样，那么添加`overflow:hidden`到`.container`. 例如，

```
.container {
    width: 1000px;
    margin: auto;
    height: 100%; /* For IE6 */
    overflow:hidden /* For all other browsers*/
} 
```

如果我的假设不正确，请提供内部元素的完整列表`.contaier`以及完整的样式表。

**编辑：** 试试这个

```
 HTML:
   <div class="contentPart">
      <?php
        //include the page content
       include_once ("content/".$_PAGE.'.php');
      ?>
 </div>

CSS:
.contentPart {
     overflow:hidden;
     height:100%;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T09:17:43.150

尝试添加一个浮点数：左；到 .footer 类

```
.footer{
  float:left;
} 
```

如果你能得到一个 jsFiddle 它将有很大帮助

# ruby-on-rails - 不能再在本地使用 Faye

> ID：11079753
> 
> 赞同：0
> 
> 时间：2012-06-18T09:06:18.313
> 
> 标签：ruby-on-rails, bundler, faye

我习惯在本地环境中使用 Faye 服务器启动

```
sudo bundle exec rackup faye.ru -s thin -E production 
```

它工作正常。但是现在我不知道发生了什么，当我尝试它时，我得到了这个错误：

> /Users/.../.rvm/rubies/ruby-1.9.3-p194/lib/ruby/site_ruby/1.9.1/rubygems/dependency.rb:247:in `to_specs': 找不到捆绑程序 (>= 0) 在 [bigdecimal-1.1.0, io-console-0.3, json-1.5.4, minitest-2.5.1, rake-0.9.2.2, rdoc-3.9.4] (Gem::LoadError)

我 100% 确定 bundler 已安装，我也尝试运行`gem install bundler`重新安装 bundler，但没有任何变化。

有什么猜测吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T11:05:35.600

让它工作使用

```
rackup faye.ru -s thin -E production 
```

# css - 对多个 HTML 标签使用相同的 ID？

> ID：11079756
> 
> 赞同：10
> 
> 时间：2012-06-18T09:06:27.923
> 
> 标签：css, html, css-selectors

> **可能重复：**
> [具有相同 ID 的多个元素响应一个 CSS ID 选择器](https://stackoverflow.com/questions/7262195/several-elements-with-the-same-id-responding-to-one-css-id-selector)

下面是我正在测试的示例代码，我很困惑。每个人都说我们可以使用或者我们应该每个 id 只使用一次，但是我有测试多次使用它，但它给了我正确的输出。

我应该怎么办？

在这个例子中，它对我来说有点像课堂一样

代码：

```
<html>
<head>
<style>

#exampleID1 { background-color: blue; } 
#exampleID2 { text-transform: uppercase; } 

</style>
</head>
<body>
<p id="exampleID1">This paragraph has an ID name of "exampleID1" and has a blue CSS defined background.</p>
<p id="exampleID2">This paragraph has an ID name of "exampleID2" and has had its text transformed to uppercase letters.</p>

<address id="exampleID1">

Written by W3Schools.com<br />
<a href="mailto:us@example.org">Email us</a><br />
Address: Box 564, Disneyland<br />
Phone: +12 34 56 78
</address>

<blockquote id="exampleID1">
Here is a long quotation here is a long quotation here is a long quotation here is a long quotation here is a long quotation here is a long quotation here is a long quotation here is a long quotation here is a long quotation.
</blockquote>

</body>
</html> 
```

请查看上面的代码并回答我为什么我们不应该在一个页面中使用两次 id 选择器而它工作正常。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-06-18T09:08:02.793

一个 id 在一个页面中必须是唯一的。如果要描述一组元素，请使用类。

> 为什么我们不应该在一个页面中使用 id 选择器两次，而它工作正常。

你犯了一个错误，并且取决于每个浏览器都会查看页面来弥补它。你不能确定他们都会。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-06-18T12:27:11.553

我认为更容易理解的方法是与产品进行类比。想象一个`ID`像序列号这样的作品，换句话说，它必须是唯一的，这样你就可以识别出具有数百万份相同副本的产品。

然后，想象一下`class`作为产品代码，例如可以是条形码。在超市中，所有相同的产品都具有相同的条形码，可供光学阅读器读取。

因此，an`ID`是唯一标识符，a 是`class`一组元素。

但是如果我`ID`在我的 HTML/CSS 中使用相同的，我会得到一个完美的结果，我为什么要担心 unique `ID`s？

**原因一：**

将来，如果您需要使用 Javascript 并且需要操作特定元素并且它有重复的`ID`，您的代码将不会生成预期的结果。

**原因 2**

您的代码不会被 W3C 验证，这意味着您可能会对您的网站跨浏览器的兼容性感到头疼。它可以在一个浏览器中正常工作，而在其他浏览器中则不能。

使用一个真实的例子，假设您想使用 Javascript 动态更新此元素的文本：

```
<blockquote id="exampleID1">
Here is a long quotation here is a long quotation here is a long quotation here is a long quotation here is a long quotation here is a long quotation here is a long quotation here is a long quotation here is a long quotation.
</blockquote> 
```

使用 Javascript/JQuery，您将使用如下代码：

```
$("#exampleID1").html("Changing element content"); 
```

然后元素的文本`<blockquote id="exampleID1">`将被更新，但下面的元素也会被更新，因为它具有相同的`ID`.

```
<p id="exampleID1">This paragraph has an ID name of "exampleID1" and has a blue CSS defined background.</p> 
```

因此，如果您只想更新一个元素，它们必须具有唯一`ID`的 s。

`ID`我希望您可以使用此解释来更好地理解和之间的区别`class`。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-18T09:10:30.213

它可以工作，但这不是 ID 的使用方式（根据 HTML 规范）。ID 必须只引用一个对象。描述多个对象必须使用类，而不是 id。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-18T09:11:54.267

您应该使用唯一 ID 来确保 HTML 有效。

这背后的原因很简单，ID 用于标识唯一元素。

尽管无效，该页面仍将呈现，但最大的实际问题是 JavaScript 和其他库经过优化以在 Id 是唯一的假设下工作，因此，如果您尝试获取具有 Id 的所有元素并隐藏它们，例如使用jQuery

```
$('#exampleID1').hide(); 
```

只有第一个元素会被隐藏，因为通过 Id 选择应该只返回一个项目，一旦找到一个元素，查询就会短路以返回单个元素。在不知道这一点的情况下，您可能会得到一些看似奇怪的行为并且难以诊断缺陷。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-18T10:11:43.600

> 为什么我们不应该在一个页面中使用两次 id 选择器而它工作正常

因为您不知道它是否在每个浏览器中都能正常工作。

规范说 id 在页面中必须是唯一的，因此当浏览器发现您的重复 id:s 时，它们会尽力处理它。大多数浏览器似乎通过仅对第一个元素使用标识来处理它，但在元素上保留 id 属性以便您的 CSS 仍然有效，但不能保证*所有*浏览器都以这种方式处理它。

不同的浏览器供应商使用不同的策略来处理不正确的标记，并且每个供应商都找到了一种“新的、更好的”方式，因此通常以尽可能多的不同方式处理不正确的标记。

# google-maps - 如何在谷歌地图开发中检测河流或障碍物

> ID：11079759
> 
> 赞同：0
> 
> 时间：2012-06-18T09:06:37.067
> 
> 标签：google-maps

我想在谷歌地图中实现以下场景：

车辆图像在谷歌地图上自动行驶。为了安全起见，它不应该穿过建筑物或河流。

是否有任何 API 或开源项目可以避免谷歌地图中的障碍或河流？或者如何检测地图上的障碍物和河流？

# iphone - 以编程方式下载 html 页面 - Objective C/Xcode

> ID：11079760
> 
> 赞同：2
> 
> 时间：2012-06-18T09:06:42.717
> 
> 标签：iphone, objective-c, ios, xcode, ipad

我在 iPad`detailView`的应用程序底部有一个名为“下载页面”的按钮。`SplitView`我想通过单击上述按钮下载相应的 html 页面，即我需要为该按钮添加“Ctrl+S”的功能，以便我可以下载并保存页面。我怎样才能做到这一点 ？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-18T09:14:02.707

你应该做这个：

```
//Download data from URL
NSData *data = [NSData dataWithContentsOfURL:[NSURL URLWithString:@"yourstringURL"]];
//use this data to write to any path as documentdirectory path + filename.html
NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
NSString *documentsDirectory = [paths objectAtIndex:0];
//create file path
NSString *htmlFilePath = [documentsDirectory stringByAppendingPathComponent:@"file.html"];
//write at file path
BOOL isSucess = [data writeToFile:htmlFilePath atomically:YES];
if (isSucess)
    NSLog(@"written");
else
    NSLog(@"not written"); 
```

您也可以`htmlFilePath`从中检索`html`文件`document directory`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-18T09:12:10.803

您可以获取 NSString 中的所有 html 内容，然后将其保存，就像这样

```
NSString *allHtml = [webView stringByEvaluatingJavaScriptFromString:@"document.documentElement.outerHTML"];
[allHtml writeToFile:@"YourFilePath" atomically:YES encoding:NSUTF8StringEncoding error:NULL]; 
```

这会将所有 HTML 保存到您定义的路径中

# wpf - WPF ListView - 分组数据但也显示“未分组”数据

> ID：11079763
> 
> 赞同：0
> 
> 时间：2012-06-18T09:06:55.983
> 
> 标签：wpf, listview, mvvm

我正在尝试在 ListView 中显示项目列表，但如果有的话，也按类别对它们进行分组，否则将它们显示在根目录中。

![项目](../Images/d9926b9ed0e641cf350a66e8bdb62f0b.png)

这就是我想要实现的目标。

![列表视图示例](../Images/4048cbf2c7e031f657abfcb7724e2133.png)

CollectionViewSource 似乎不支持这种行为，因为添加 PropertyGroupDescription 将简单地显示带有组的数据（并忽略其余部分）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T11:16:05.230

The "ungrouped" data is still a group - so to achieve that behaviour I would create a ContainerStyleSelector on your groupstyle to display the last items in a stackpanel instead of an expander.

# html - 保持浮动div彼此相邻

> ID：11079765
> 
> 赞同：2
> 
> 时间：2012-06-18T09:07:16.193
> 
> 标签：html, css

我有以下内容：

```
<div id="container">
    <div id="childA">123</div>
    <div id="childB">ABCDEFGHIJKLMNOPQRSTUVWXYZ</div>
</div>

<style>
    #childA, #childB {float:left}
</style> 
```

我想`#childB`留在 的右侧`childA`，但问题是当里面有很多文本时，它会在下面`#childA`- 一旦它达到 的宽度，我想简单地增加高度`#container - #childA`。

我无法设置它的宽度，因为我不知道会有多少文本`#childA`。（`#childA`里面永远不会有太多文本，应该只保留 1 行。）

感谢您的帮助 - 花了一些时间寻找，但找不到任何有用的东西。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-18T09:10:56.943

设置一个`max-width`with `max-width:#container - #childA;`on`#childB`来防止这种情况。

编辑：

另一种方式：从 like 中删除`float:left;`并添加`childB`并`overflow:hidden`添加一个 max-with 。`childA``max-width:80%`

**[演示](http://jsfiddle.net/5wwvJ/)**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T09:10:47.393

您的 #childB 包裹在 #childA 下，因为这两个元素太宽，无法并排放置在它们的父容器中。

试试这个：

```
#container {
    margin: 0;
    padding: 0;
}

#childA, #childB {
    float: left;
    width: 50%;
    white-space: nowrap;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-18T09:20:26.347

设置你的 childA 和 childB 使用类的宽度

```
#childA, #childB {float: left;width:50%;} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-18T09:20:36.690

你可以试试

```
<div id="container">
   <div id="childA">123</div>
   <div id="childB">ABCDEFGHIJKLMNOPQRSTUVWXYZ</div>
</div>

<style>
    #childA {
      float: left;
    }
</style> 
```

所以你的`#childA`div 会浮动到左边，`#childB`它们不会将一个包裹在另一个下面，但缺点是一旦它的高度超过height ，文本`#childB`将包裹在 #childA 下面`#childA`

# java - Web 服务 RESTFUL 或 JSP

> ID：11079766
> 
> 赞同：0
> 
> 时间：2012-06-18T09:07:17.713
> 
> 标签：java, web-services, url

我被要求制作一个应该能够订购一些单词的网络应用程序。例如，颜色。

我认为最好的方法是通过 url 发送颜色并将该 url (url.php?listColors...) 发送到服务器（服务器订购它们）。

或者通过 json 文件发送它们并返回一个带有颜色排序的 json 文件。

但我也被要求通过restul服务来做到这一点。我已经阅读了一些关于它们的内容，我认为这会有点困难，因为我只是找到有关获取或发布资源的信息。但是，发送“事物”列表并用它来做点什么都没有。我应该用java做web服务。

如果我必须在 Web 服务中包含所有单词，我认为它太重了。

使用 JSP，我可以发送所有单词并制定一种排序方法...

你怎么看？我希望有其他意见和想法，以使其成为可能的最佳方式。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-18T09:30:28.640

Restful Web 服务和 JSP 是同一枚硬币的两个方面。当客户端通常是需要以 HTML 格式显示内容的 Web 浏览器时，您使用 JSP。当客户端是需要数据的其他应用程序时，您使用 Restful WS。另一个应用程序可以是浏览器中的 javascript。

Restful 支持所有数据（通过 GET/POST/PUT），包括项目列表等。所以这不应该是选择使用 JSP 还是 Restful 的标准。

正如我所提到的，要回答您的其他问题，您可以使用 Restful 或 JSP。这取决于用例是什么。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-18T09:47:36.370

RESTful 处理所有对象类型，因此您可以创建如下方法：

```
@POST
@Consumes(MediaType.APPLICATION_XML)
@Produces(MediaType.APPLICATION_XML)
public List<String> orderWords(List<String> words); 
```

如果您有性能标准，只需使用 gzip 压缩。

祝你好运！

# java - 在电子邮件签名中插入图像？

> ID：11079769
> 
> 赞同：0
> 
> 时间：2012-06-18T09:07:22.473
> 
> 标签：java, servlets

> **可能重复：**
> [电子邮件签名中的 base64 编码图像](https://stackoverflow.com/questions/9110091/base64-encoded-images-in-email-signatures)

我有一个存储在数据库中的图像。我需要插入该图像以及电子邮件签名，现在只有文本。我计划使用指向 servlet 的图像标签，如下所示，它将在内部从数据库中获取图像并发送它作为响应中的字节流。这种方法可以正常工作，直到我在同一个应用程序中将邮件发送给用户。因为我的应用程序仅在请求来自登录用户时才对请求进行身份验证/受理。因此，当我将电子邮件发送给也存在于我的应用程序中并登录的人时，可以看到图像（插入签名）。当用户将邮件发送到 gmail.com、yahoo.com 等外部域时，就会出现问题。因此，如果我将邮件发送给 gmail 用户，他看不到签名中的图像，因为图像标签发送的 servlet 请求不会被接受，因为用户不属于我的应用程序？我不确定在电子邮件签名中插入图像的最佳方法/方式是什么？

```
img src="/path/toMyServlet.action" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T09:29:04.710

当我阅读您的问题时立即想到了 base64，但是我在上一个角色中在 gmail 中显示 base64 图像时确实遇到了问题，因此最终没有使用它。我认为最好的解决方案是将图像嵌入电子邮件的标题中，这两种方法都记录[在电子邮件签名中的 base64 编码图像中](https://stackoverflow.com/questions/9110091/base64-encoded-images-in-email-signatures)。

希望有帮助

# c++ - 相同的地址，多个 shared_ptr 计数器，C++ 标准是否禁止？

> ID：11079770
> 
> 赞同：6
> 
> 时间：2012-06-18T09:07:27.200
> 
> 标签：c++, c++11, shared-ptr, language-lawyer

假设我需要执行以下操作（这只是一些用于讨论 C++ 标准的富有想象力的代码，因此我不会讨论我为什么要这样设计它，所以不要用类似的东西来打扰我：你的设计是错误的.)

```
T* ptr = new T;
shared_ptr<T> p(ptr);
shared_ptr<T> q(ptr, SomeDeleterThatDoesnotDeleteButDoSomeOtherStuff()); 
```

假设逻辑保证`p`或其某些副本比 的所有副本寿命更长`q`，因此实际上不会有任何问题。我的问题是，C++ 标准是否禁止不同的 shared_ptr 计数器共享相同的地址，例如 C++ 标准明确表示为 UB？

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-18T09:11:59.773

如果第一个 shared_ptr 对象被销毁，那么您将获得 UB，因为使用第二个对象的对象可能会访问已释放的对象。

由于您确保第一个 shared_ptr 对象的寿命比第二个长，因此您不会获得 UB。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-18T09:37:06.100

我在标准（好吧，最终草案）中找不到任何明确排除它的内容。我能找到的最接近的是`20.9.11.2.10 shared_ptr casts`

> 5 [注意：看似等价的表达式 shared_ptr(static_cast(r.get())) 最终会导致未定义的行为，尝试删除同一个对象两次。——尾注]

这实际上似乎忘记了您使用自定义删除器的情况。

# sql-server-2008 - 无法从 WSO2 Stratos live 上的 WSO2 数据服务服务器连接到 SQL Server 2008

> ID：11079773
> 
> 赞同：0
> 
> 时间：2012-06-18T09:07:32.153
> 
> 标签：sql-server-2008, wso2

我已经开始使用 WSO2 Stratos live 并开始使用 WSO2 数据服务服务器。

我在使用带有 WSO2 数据服务服务器的 SQL Server 2008 时遇到问题。

我得到以下错误

> 不支持服务器版本。目标服务器必须是 SQL Server 2000 或更高版本。

我相信这个问题的答案是更新 Stratos live 中的 jar 以使用最新的 sqljdbc4.jar 但我不知道该怎么做。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T02:16:29.983

用户无法替换 StratosLive 数据服务服务器的驱动程序 jar，WSO2 应为您将最新版本的 jar 上传到服务器。我们将确保它们很快得到更新。作为替代方案，如果您想使用自己的最新驱动程序 jar，您可以在 WEB-INF/lib 文件夹中编写一个包含所需 jar 的 webapp，将其托管在 WSO2 应用程序服务器中并连接到您的 MSSQL 实例。

问候， 普拉巴斯

# matlab - 从图像中裁剪椭圆

> ID：11079781
> 
> 赞同：6
> 
> 时间：2012-06-18T09:08:15.093
> 
> 标签：matlab, image-processing, computer-vision, face-detection, matlab-cvst

我想最好在 MATLAB 中从图像中提取椭圆区域（图像中面部的一部分）：

![在此处输入图像描述](../Images/1075c1863228fe4e4d599f2be0c3d6fe.png)

例如，在这张图片中，我想提取红色边界内的区域。
谁能帮我这个 ？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-18T11:18:21.947

裁剪很容易，您所要做的就是使用合适的面膜。诀窍是创建这样的面具。

假设`A`是你的形象，试试这个：

```
%# Create an ellipse shaped mask
c = fix(size(A) / 2);   %# Ellipse center point (y, x)
r_sq = [76, 100] .^ 2;  %# Ellipse radii squared (y-axis, x-axis)
[X, Y] = meshgrid(1:size(A, 2), 1:size(A, 1));
ellipse_mask = (r_sq(2) * (X - c(2)) .^ 2 + ...
    r_sq(1) * (Y - c(1)) .^ 2 <= prod(r_sq));

%# Apply the mask to the image
A_cropped = bsxfun(@times, A, uint8(ellipse_mask)); 
```

裁剪后的图像将存储在`A_cropped`. 使用中心的坐标和半径的值，直到获得所需的结果。

**编辑**：我扩展了 RGB 图像的解决方案（如果矩阵`A`是 3-D）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-10-24T09:03:15.047

这是我用来将面裁剪成椭圆形的方法。它使背景透明。

```
[FileName,PathName] = uigetfile({'*.jpg;*.tif;*.png;*.gif','All Image Files'},'Please Select an Image');
image = imread([PathName FileName]); 
imshow(image) %needed to use imellipse
user_defined_ellipse = imellipse(gca, []); % creates user defined ellipse object.
wait(user_defined_ellipse);% You need to click twice to continue. 
MASK = double(user_defined_ellipse.createMask());
new_image_name = [PathName 'Cropped_Image_' FileName];
new_image_name = new_image_name(1:strfind(new_image_name,'.')-1); %removing the .jpg, .tiff, etc 
new_image_name = [new_image_name '.png']; % making the image .png so it can be transparent
imwrite(image, new_image_name,'png','Alpha',MASK);
msg = msgbox(['The image was written to ' new_image_name],'New Image Path');
waitfor(msg); 
```

# ruby-on-rails - ActiveRecord 查询比直接 SQL 慢得多？

> ID：11079783
> 
> 赞同：9
> 
> 时间：2012-06-18T09:08:20.807
> 
> 标签：ruby-on-rails, ruby-on-rails-3, postgresql, database-performance

我一直在优化我的项目的数据库调用，我注意到以下两个相同调用之间的性能存在“显着”差异：

```
connection = ActiveRecord::Base.connection()
pgresult = connection.execute(
  "SELECT SUM(my_column)
   FROM table
   WHERE id = #{id} 
   AND created_at BETWEEN '#{lower}' and '#{upper}'") 
```

第二个版本：

```
sum = Table.
      where(:id => id, :created_at => lower..upper).
      sum(:my_column) 
```

使用第一个版本的方法平均执行时间为 300ms（该操作在其中总共调用了几千次），使用第二个版本的方法大约需要 550ms。这几乎是 100% 的速度下降。

我仔细检查了第二个版本生成的 SQL，它与第一个版本相同，但它在表列前加上表名。

*   为什么会减速？ActiveRecord 和 SQL 之间的转换真的使操作花费了将近 2 倍吗？
*   如果我需要执行相同的操作很多次并且我不想遇到开销，我是否需要坚持编写直接的 SQL（甚至可能是一个 sproc）？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-18T09:20:52.820

有几件事跳出来。

首先，如果这段代码被调用 2000 次并且需要额外的 250 毫秒来运行，那么每次调用将 Arel 转换为 SQL 大约需要 0.125 毫秒，这并非不现实。

其次，我不确定 Ruby 中 Range 的内部结构，但`lower..upper`可能会进行范围大小等计算，这将对性能造成很大影响。

您是否看到以下相同的性能受到影响？

```
sum = Table.
      where(:id => id).
      where(:created_at => "BETWEEN ? and ?", lower, upper).
      sum(:my_column) 
```

# iphone - iPhone - 正确使用 didSelectRowAtIndexPath

> ID：11079784
> 
> 赞同：0
> 
> 时间：2012-06-18T09:08:25.033
> 
> 标签：iphone, uitableview

我对应该如何使用`didSelectRowAtIndexPath`.

在不使用数据源（保持简单）的情况下，如果您显示一个名称列表，`UITableView`并且您想要做的就是选择一个名称并将其返回给创建该`UITableView`列表的父视图控制器。您会怎么做？

我习惯于 Windows MFC 编程，你有一个对话框类，你调用`DoModal()`来显示对话框，然后查询该对话框对象的成员变量以获得结果。对于 iPhone 编程，我对整个范例感到困惑。我将其`UITableView`付诸行动，但我应该在什么时候尝试检索结果？`pushViewController`本质上是异步的，不是吗？所以我不能指望在 pushViewController 方法之后立即检索结果？

我使用`NSMutableArray`s of `NSString`s 来保持简单。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T09:15:38.873

您将要使用的模式被调用`delegation`，发生的情况是您调用 new`ViewController`并让它工作，调用 this 的函数将正常返回，

现在您需要实现`didSelectRowAtIndexPath`并获取`selectedRow`，在此之后您需要将选定的索引或值返回给原始视图控制器（这将在另一个函数中收到）请阅读更多关于@protocol 和委托

# python - 线程完成时通知主线程

> ID：11079785
> 
> 赞同：1
> 
> 时间：2012-06-18T09:08:34.023
> 
> 标签：python, multithreading

我对 Python 编程相当陌生，线程不是我的专业领域。我有一个问题，我希望这里的人可以帮助我。

**任务：**作为我硕士论文的一部分，我需要制作一个涉及多人游戏的混合现实游戏。在我的游戏设计中，每个玩家可以设置一堆陷阱，每个陷阱在特定的时间段内都处于活动状态，例如 30 秒。为了在所有玩家之间保持一致的游戏状态，需要在服务器端进行所有时间检查，这是用 Python 实现的。

我决定启动一个 python 线程，每次玩家放置一个新的陷阱并在线程上运行一个计时器。所有这部分都很好，但是当我需要通知主线程这个特定陷阱的时间到了时，真正的问题就出现了，这样我就可以与客户端（android 设备）进行通信。

我尝试在任务完成后创建一个队列并将信息插入队列，但我不能做一个 queue.join() 因为它会暂停主线程直到任务完成，这不是我需要的，也不是在我的情况下它是理想的，因为主线程一直在与客户端通信，如果它被停止，那么与玩家的所有通信都将停止。

我需要运行计时器的辅助线程来告诉主线程，一旦时间用完，时间已经用完并发送陷阱的ID，以便我可以将此信息传递给android客户端删除它。我怎样才能做到这一点？

关于如何在不启动大量线程的情况下完成此任务的任何其他建议，也欢迎提出.. :) :)

在此先感谢您的帮助..

干杯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T12:18:33.677

我终于找到了一个用python编写的漂亮的小任务调度程序，它实际上非常轻巧，非常方便使用回调机制为以后的时间或日期安排事件，它允许子线程将值传回主线程通知主线程其状态以及作业是否成功完成。

那些需要与问题中的人类似的功能并且不想与线程讨价还价的人可以使用此调度程序来安排他们的事件并在事件完成时获得回调

这是[APScheduler的链接](http://packages.python.org/APScheduler/index.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-18T09:44:15.870

It may be easier to have the timers all done in the main thread - have a list of timers that you keep appending new ones to. Each timer doesn't actually *do* anything, it just has a time when it goes off - which is easier if you work in arbitrary 'rounds' than in real time, but still doable. Each interval, the mainloop should check all of them, and see if it is time (or past time) for them to expire - if it is, remove them from the list (of course, be careful about removing items from a list you're iterating over - it mightn't do what you expect).

If you have a *lot* of timers, and by profiling you find out that running through all of them every interval is costing you too much time, a simple optimisation would be to keep them in a [heapq](http://docs.python.org/library/heapq.html) - this will keep them sorted for you, so you know after the first one that hasn't expired yet that none of the rest have either. Something like:

```
while True:
    if not q:
       break
    timer = heapq.heappop(q)
    if timer.expiry <= currenttime:
       # trigger events
    else:
       heapq.heappush(q)
       break 
```

This does still cost you one unnecessary pop/push pair, but its hard to see how you would do better - again, doing something like:

```
for timer in q:
    if timer.expiry <= currenttime:
       heapq.heappop(timer)
       # trigger events
    else:
       break 
```

Can have subtle bugs because list iterators (functions in `heapq` work on sequences and use side effects, rather than there being a full-fledged `heapq` class for some reason) work by keeping track of what index they're up to - so if you remove the current element, you push everything after it one index to the left and end up skipping the next one.

The only important thing is that `currenttime` is consistently updated each interval in the main loop (or, if your heart is set on having it in real time, based on the system clock), and `timer.expiry` is measured in the same units - if you have a concept of 'rounds', and a trap lasts six rounds, when it is placed you would do `heapq.heappush(q, Timer(expiry=currenttime+6)`.

If you do want to do it the multithreaded way, your way of having a producer/consumer queue for cleanup will work - you just need to not use `Queue.join()`. Instead, as the timer in a thread runs out, it calls `q.put()`, and then dies. The mainloop would use `q.get(False)`, which will avoid blocking, or else `q.get(True, 0.1)` which will block for at most 0.1 seconds - the timeout can be any positive number; tune it carefully for the best tradeoff between blocking long enough that clients notice and having events go off late because they only just missed being in the queue on time.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-18T09:53:28.800

主线程创建一个队列和一堆从队列中拉出任务的工作线程。只要队列为空，所有工作线程都会阻塞并且什么也不做。当一个任务被放入队列时，一个随机的工作线程获取该任务，完成它的工作并在它准备好后立即休眠。这样，您可以一遍又一遍地重用线程，而无需创建新的工作线程。

当您需要停止线程时，您将一个 kill 对象放入队列中，该对象告诉线程关闭而不是阻塞队列。

# xslt - if 条件在 xslt 中的 for-each 循环内

> ID：11079786
> 
> 赞同：0
> 
> 时间：2012-06-18T09:08:36.313
> 
> 标签：xslt

我有一个下面提到的格式的 xml：

```
<Root>
<Book name="Type" value="Action" />
<Book name="Price" value="10" />
<Book name="color" value="yellow" />
</Root> 
```

我想要的是，我必须遍历这个循环，如果“价格”存在，那么我必须将“10”分配给另一个变量。我试图做的是：

```
<xsl:for-each select="/Root/Book">
<xsl:if test="./@name = 'Price'">
<sample name="{@name}" value="{@value}" />
</xsl:if>
</xsl:for-each> 
```

但我得到一个无法编译的样式表异常

# c# - 仅使用 SSL 进行身份验证

> ID：11079787
> 
> 赞同：0
> 
> 时间：2012-06-18T09:08:36.400
> 
> 标签：c#, .net, wcf, ssl, wcf-security

我想创建新的 WCF 服务和客户端。两方将使用 2-way SSL 进行通信。

我只想将 SSL 用于身份验证阶段。在此认证之后，不需要加密。我可以将我的服务（和客户端）配置为仅使用 SSL 进行身份验证，并且不加密连接（性能问题）吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T17:04:09.783

如果您想使用客户端证书执行身份验证（我认为您的意思是“2-way”SSL），您可以使用具有 NULL 加密的密码套件，例如`TLS_RSA_WITH_NULL_SHA`.

否则，如果您的身份验证方案是 SSL/TLS 之上的应用层的一部分，您当然应该考虑使用加密。

请注意，使用`TLS_RSA_WITH_NULL_SHA`仍将在握手中进行 RSA 密钥交换（即使最终没有实际使用共享加密密钥）。SSL/TLS 握手是使用 SSL/TLS 中计算量最大的部分。实际的加密不应该对性能产生几乎同样的影响，因此您不妨保留它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-18T09:26:37.487

为什么要在身份验证后不加密连接？

用户名和密码将以一种或另一种方式通过网络传递，因此您应该考虑始终加密连接以避免泄露该信息。

**编辑：** 如果您使用的是证书，则必须始终对其进行加密，因为我知道您不能使用证书进行身份验证，然后再返回简单的 HTTP。WCF 需要为每个请求对客户端进行身份验证（如果该客户端暂时无法获得证书，则将其删除并使用您的 WCF 服务，就像什么都没发生一样，因为不再需要身份验证，这在您的情况下是不正常的） .

# linq - 从实体查询返回 DataTable

> ID：11079790
> 
> 赞同：0
> 
> 时间：2012-06-18T09:08:47.710
> 
> 标签：linq, entity-framework, datatable

我有这个代码：

```
public IList<T_LOGO> Get_All_Obj()
        {
            try
            {
                IList<T_LOGO> LesListe;
                using (Soft8Exp_ClientEntities oEntite_T = new Soft8Exp_ClientEntities())
                {
                    var query = from o in oEntite_T.T_LOGO select o;
                    LesListe = query.ToList();
                }
                return LesListe;
            }
            catch (Exception excThrown)
            {
                throw new Exception("Err_02", excThrown);
            }
        } 
```

我怎样才能返回一个 DataTable 呢？

```
public DataTable Get_All_Obj_DataTable()
        {
            try
            {
                DataTable TheTable = new DataTable("sd");
                using (Soft8Exp_ClientEntities oEntite_T = new Soft8Exp_ClientEntities())
                {
                    var query = from o in oEntite_T.T_LOGO select o;
                    IDbCommand cmd = Soft8Exp_ClientEntities.GetCommand(query as IQueryable); // ERROR GetCommand Not Found
                    SqlDataAdapter adapter = new SqlDataAdapter();
                    adapter.SelectCommand = (SqlCommand)cmd;

                }
                return TheTable;
            }
            catch (Exception excThrown)
            {
                throw new Exception("Err_02", excThrown);
            }
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T09:51:05.673

尝试这个：

```
var query = (ObjectQuery<T_LOGO>)(from o in oEntite_T.T_LOGO select o);
Var command = new SqlCommand(query.ToTraceString(),
                             ((EntityConnection)oEntite_T.Connection).StoreConnection); 
```

# asp.net - 如何传递内容以响应 Asp.net WebAPI 中的异常过滤器？

> ID：11079792
> 
> 赞同：6
> 
> 时间：2012-06-18T09:08:48.823
> 
> 标签：asp.net, asp.net-web-api

考虑以下代码：

我的问题是：

1）我似乎无法将错误转换为 HttpContent

2）我不能使用 CreateContent 扩展方法，因为它在 context.Response.Content.CreateContent 上不存在

这里的示例似乎只提供 StringContent，我希望能够将内容作为 JsobObject 传递： [http ://www.asp.net/web-api/overview/web-api-routing-and-actions/异常处理](http://www.asp.net/web-api/overview/web-api-routing-and-actions/exception-handling)

```
 public class ServiceLayerExceptionFilter : ExceptionFilterAttribute
    {
        public override void OnException(HttpActionExecutedContext context)
        {
            if (context.Response == null)
            {                
                var exception = context.Exception as ModelValidationException;

                if ( exception != null )
                {
                    var modelState = new ModelStateDictionary();
                    modelState.AddModelError(exception.Key, exception.Description);

                    var errors = modelState.SelectMany(x => x.Value.Errors).Select(x => x.ErrorMessage);

                    // Cannot cast errors to HttpContent??
                    // var resp = new HttpResponseMessage(HttpStatusCode.BadRequest) {Content = errors};
                    // throw new HttpResponseException(resp);

                    // Cannot create response from extension method??
                    //context.Response.Content.CreateContent
                }
                else
                {
                    context.Response = new HttpResponseMessage(context.Exception.ConvertToHttpStatus());
                }                
            }

            base.OnException(context);
        }

    } 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-06-18T09:12:11.673

```
context.Response = new HttpResponseMessage(context.Exception.ConvertToHttpStatus());
context.Response.Content = new StringContent("Hello World"); 
```

如果要传递复杂对象，您还可以使用`CreateResponse`（在 RC 中添加以替换`HttpResponseMessage<T>`不再存在的泛型类）方法：

```
context.Response = context.Request.CreateResponse(
    context.Exception.ConvertToHttpStatus(), 
    new MyViewModel { Foo = "bar" }
); 
```

# javascript - 将 $.ajax() 与不同的目录一起使用？

> ID：11079797
> 
> 赞同：0
> 
> 时间：2012-06-18T09:09:15.713
> 
> 标签：javascript, jquery, ajax

如何使用“$.ajax()”技术为 url 参数提供项目外部的位置（假设文件在桌面上）。我怎样才能做到这一点 ？？我只知道如何在项目的同一位置进行操作..

非常感谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-18T09:14:29.407

您不能绕过网站并访问其外部的文件，因为它可能会损害托管该网站的机器，但您可以通过您的网站访问网站外部的文件。

1.  您可以访问网站文件夹中的文件，也可以在网站文件夹之外创建文件夹的虚拟目录并通过虚拟目录访问它。

假设您有网站文件夹 d:\websites\TestWebsite 并且您想访问 d:\Data\Testfile.txt 中的文件，在 TestWebsite 侧创建一个指向 d:\Data 的虚拟目录并通过虚拟目录访问其中的文件。

2 你也可以在一些网页/网络服务中做一个功能，访问网站之外的文件。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-18T09:13:36.100

出于安全原因，您不能对本地文件执行 ajax 请求，它们必须位于本地服务器的范围内，别名为“公共目录”。

**编辑：**除了 Adil 建议的服务器配置级别的虚拟目录解决方案之外，您可以通过使用从文件或目录到公用文件夹的符号链接来更简单地完成它。

# android - 使用“market://details?id=my_package_name”时出现“Activity not found exception”

> ID：11079798
> 
> 赞同：2
> 
> 时间：2012-06-18T09:09:19.070
> 
> 标签：android, android-intent, google-play

我在单击按钮时使用此方法。我的应用程序尚未在 google play 中启动，因此我尝试在 URI 中使用其他应用程序的包名称。我尝试了许多不同的软件包，但总是收到“找不到活动异常”

```
public void rateApp(View v) {
        try {
            Intent intent = new Intent(Intent.ACTION_VIEW);
            intent.setData(Uri.parse("market://details?id=mobi.infolife.installer"));
            startActivity(intent);
        }catch (Exception e) {
            Log.i("Exception", "Exception is "+e);
        }
    } 
```

谁能说发生了什么问题。

提前致谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-18T09:10:40.827

我猜这是在模拟器上。“market://”链接仅在设备上安装了 Google Play 应用程序时有效。

如果未安装（您有例外），那么您可以启动网络浏览器。

# configuration - IRC 服务器配置可能性

> ID：11079800
> 
> 赞同：1
> 
> 时间：2012-06-18T09:09:29.787
> 
> 标签：configuration, irc, ape

我需要知道一些关于 IRC 服务器的事情，我无法通过谷歌直接找到（或者不够清楚，我无法确定它是否真的有效）

我在一个更大的社区站点工作，并希望提供页面内聊天。由于让人们也可以通过自己的客户端从外部访问它是一个不错的功能，因此我认为实现 IRC 服务器将是最好的解决方案（可能是专用的，为此我必须自学一些东西）

我计划在 APE 客户端/服务器上包含一个基于 Web 的 IRC 客户端。问题是，我想剥夺用户权限，以禁止 IRC 提供的许多功能：

*   昵称更改：用户通过页面登录登录，我将使用该密码自动为该用户创建 IRC 身份验证。所以基本上，他会通过一个按钮连接到 IRC 客户端。而且连上之后，他应该根本就不能改昵称了
*   创建频道：我希望可以创建频道，但不是来自“普通”用户。基本上，我更喜欢设置公共的基本频道，如果用户真的创建了自己的频道，那么该频道应该是私人的并通过邀请（这可能吗？）
*   私人对话：私人对话应该从全方位的 IRC 客户端中过滤掉，进入我通过 JS 创建的单独的“浏览器窗口”中。我想我只需要过滤来自 IRC 的东西——或者有更好的解决方案吗？
*   只有“注册”用户才能访问：就像我说的，如果有人在页面上注册，我想为他创建一个 IRC“帐户”。未在页面上注册的用户根本无法访问 IRC 服务器（或被淘汰）。主要是为了避免来自外部的垃圾邮件发送者或机器人。

这些东西可以通过 IRC 解决吗？我已经阅读了一些关于 IRC OP 和服务器的常见问题解答和说明，但我找不到明确的答案 - 似乎每个人都可以做几乎所有事情 - 我想以一种更减少用户可能性的方式配置它。基本上，给用户聊天的可能性，但不是更多。

所以问题基本上是，这个问题如何可能/可解决，或者我是否必须为此找到其他解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T09:12:05.313

看看不同的[IRC 服务](http://en.wikipedia.org/wiki/Internet_Relay_Chat_services)，例如[ChanServ](https://www.esper.net/chanserv.php)。使用[Channel 和 User 模式来设置特定的标志](http://docs.dal.net/docs/modes.html)。

您很可能会在服务器端执行以下操作：

*   强制昵称 ( [NickServ](https://www.esper.net/nickserv.php) )
*   仅允许某些用户类型创建频道
*   频道创建后允许任何用户加入
*   频道可以有仅邀请标志`+i`
*   私人对话只是给不同用户的私人消息。如果您需要私人对话来拥有多个用户，则需要实现一些私下使用频道的逻辑
*   创建注册用户应该是可能的，并且可能由像[NickServ](https://www.esper.net/nickserv.php)这样的 IRC 服务强制执行。

考虑使用[CGI:IRC](http://cgiirc.org/)。它是浏览器中的聊天客户端，通过网络服务器连接到 IRC。您可以限制用户可以从那里执行的操作，也可以限制它在服务器端。

对不同的 IRCd 做一些研究，看看你是否找到了一个支持你需要的东西。[Dancer-IRCd](https://help.ubuntu.com/community/Dancer-IRCD)似乎是一个受欢迎的选择，并且包含在 Ubuntu`apt-get`存储库中，但是我不确定它是否支持您需要的所有功能。

* * *

另一种选择是放弃 IRC 的整个想法，并使用[WebSocket API](http://en.wikipedia.org/wiki/WebSocket)或[Comet](http://en.wikipedia.org/wiki/Comet_%28programming%29)实现您自己的聊天客户端。对此也有完整的解决方案。

这方面的例子：

*   彗星：彗星[聊天](http://www.cometchat.com/documentation/installing-cometchat/custom-coded-site/php-site)
*   Websocket API: [Websocket Chat Demo](http://weevilgenius.net/2010/10/html-5-websocket-chat-demo/)

# mercurial - TortoiseHG 无法导入补丁

> ID：11079810
> 
> 赞同：0
> 
> 时间：2012-06-18T09:10:22.770
> 
> 标签：mercurial, patch, tortoisehg

我在这里有一个统一差异格式的补丁文件，我想导入。但是当我通过 Repository -> Import 在工作台中执行此操作时，它只是关闭了窗口，似乎什么也没发生。这里有什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T05:40:34.877

您是否在正确的先前版本之上导入补丁？补丁只包含变更集，它要正常工作，您需要事先将所有以前的变更集应用到您的分支上。

# php - 关于只编辑表格中的 1 行

> ID：11079811
> 
> 赞同：0
> 
> 时间：2012-06-18T09:10:23.097
> 
> 标签：php, mysql

如何使用 php 在 mysql 中编辑一行。我有一个表格，我会将它提取到 php 页面中以 html 格式显示表格，最后我有一个编辑按钮，当我单击编辑按钮时，该行应该是可编辑的，我可以输入新值并且应该更新相同的表行..单击编辑按钮后，该按钮应更改为提交/更新...

![这是表格的图像，此处的值在文本框中，但在用户单击第一次编辑时只读，第一行应该是可写的，并且输入的值应该存储](../Images/a42ffffcd29a3358c81e017254f79c96.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T09:14:16.927

你可以使用这个简单的方法：

**每个 EDIT 链接的**HTML**`id`添加行的：**

 **```
<a href="edit.php?id=4">EDIT</a> 
```

**编辑.php**：

```
if(isset($_GET["id"])){
   echo "start editing the row that have id".$id;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T09:14:41.183

这是基本动作之一，属于 CRUD 功能的范畴。以下是您开始时需要了解的几个步骤。

*   将记录的唯一 ID 传递给编辑页面或类。
*   您可以将`id`, 附加到每个页面的编辑链接。
*   此页面将使用它`id`并从数据库中获取记录
*   详细信息将用于填写表格，用户将从该表格中更新记录。
*   该表单还将保留`id`最有可能隐藏元素的记录。
*   `UPDATE`接下来，当提交此编辑表单时，处理将基于数据创建查询并执行它们。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-18T09:15:13.587

**Jquery 可编辑数据表**插件可能是您需要的最佳解决方案。在此处查看代码 google 以获取文档和实现： [http ://code.google.com/p/jquery-datatables-editable/](http://code.google.com/p/jquery-datatables-editable/)

**注意：**做基本的 CRUP 是完全耗时的，无论是后端还是前端，而且其他人通常很早就解决了这个困境，你只需要拥抱他们的解决方案，并根据自己的喜好定制它们。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-18T09:16:09.640

但是，当您向其他人寻求帮助时，总是告诉您您尝试过的内容..

这只是粗略的图表：-

```
$data = $_REQUEST;

if((isset($data['user_ids'])) && (count($data['user_ids']) == 1)){

 $id =$data['user_ids'][0];
    $sql= "UPDATE no_service SET `Status` = '$data[status_select_update]' WHERE id = $id ";

}elseif ((isset($data['user_ids'])) && (count($data['user_ids']) > 1)) {

    $ids = implode(",",$data['user_ids']);
    $sql= "UPDATE no_service SET `Status` = '$data[status_select_update]' WHERE id IN($ids)";

}else{
} 
```

编辑完全基于您的 id ..您传递的内容..基于该 id 它将更新您在 Mysql 中的记录..

我希望它会有所帮助..**

# mongodb - 如何使用字段选择通过 Mongo shell 返回包含的字段？

> ID：11079814
> 
> 赞同：0
> 
> 时间：2012-06-18T09:10:29.953
> 
> 标签：mongodb

我将推文存储在 MongoDB 数据库中，并希望使用字段选择器 ( [http://www.mongodb.org/display/DOCS/Querying#Querying-FieldSelection](http://www.mongodb.org/display/DOCS/Querying#Querying-FieldSelection) ) 仅返回文本、日期和屏幕名称用户。

```
{ 
    "_id" : NumberLong("213686009408"), 
    "text" : "RT @Milanello: Lightning over the Donb...", 
    "created_at" : "Fri, 15 Jun 2012 17:37:38 +0000", 
    "user" : { 
        "screen_name" : "xxxxx", 
        "profile_image_url" : "http://a0.twimg.com/pro[...].jpg"
    }
} 
```

创建一个只返回文本和日期的查询很简单：

```
> db.abc.find({},{created_at:1,text:1}) 
```

我也不确定如何返回 user.screen_name 属性？

[更新]

我之前曾尝试使用点表示法，但它引发了异常，但是，根据下面的两个答案（我都有+1），点表示法确实有效，但前提是您在属性名称周围使用“”。

所以，这不起作用：

```
db.abc.find({},{created_at:1,text:1, user.screen_name:1}) 
```

但这确实：

```
db.abc.find({},{created_at:1,text:1, "user.screen_name":1}) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T09:57:20.220

您可以像在查询中一样使用[点表示法：](http://www.mongodb.org/display/DOCS/Dot+Notation+%28Reaching+into+Objects%29)

```
db.abc.find({},{created_at:1,text:1, "user.screen_name" : 1}) 
```

但是，该字段不会被展平，因此结果对象仍然有一个`user`-subdocument：

```
{ "_id" : NumberLong("4546545"), 
  "created_at" : "Fri, 15 Jun...", 
  "user" : { "screen_name" : "John Doe" } 
} 
```

但是，在代码中将其展平应该不是什么大问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-18T10:02:29.293

您需要使用点表示法来查询数组中的值。我创建了一个类似的文档，修改了 _id 字段，并成功运行了以下查询 -

```
> db.abc.find({},{'user.screen_name': 1})
{ "_id" : 1200, "user" : { "screen_name" : "xxxxx" } }

> db.abc.find({'user.screen_name': "xxxxx"})
{ "_id" : 1200, "text" : "RT @Milanello: Lightning over the Donb...", "created_at" : "Fri, 15 Jun 2012 17:37:38 +0000", "user" : { "screen_name" : "xxxxx", "profile_image_url" : "http://a0.twimg.com/pro[...].jpg" } } 
```

[这里](http://www.mongodb.org/display/DOCS/Advanced+Queries)有更多关于高级查询的信息。

更新：看起来我是在 mnemosyn 后 2 分钟发布的，所以请先接受他的回答。

# java - HTTP 隧道 Servlet (Java)

> ID：11079816
> 
> 赞同：6
> 
> 时间：2012-06-18T09:10:38.160
> 
> 标签：java, sockets, servlets, tunnel, http-tunneling

我正在尝试编写一个 HTTP 隧道，因为我们希望能够通过我们的 Web 应用程序连接到远程机器。虽然我知道所涉及的安全风险，但这是我们想做的事情。它不是托管在互联网上，而是托管在专用网络上，因此风险被认为很低。

基本要求是允许 Java 调试工具通过 servlet 连接到机器。我们有一些客户坚持将开发箱放在防火墙的一侧，并且由于 java 调试服务器上的返回端口不固定，我们不能简单地要求他们打开特定端口。

代码还不完善。我只是试图以双向方式进行交流。

有几个组件。Eclipse 中的 java 调试连接到的独立服务器。该服务器被配置为根据连接的端口知道它的前进方向。所以如果端口 1166 被命中，它就知道连接到机器 x 上的一个 servlet。

即Eclipse Debugger --> Debug Proxy Server --> Application Servlet --> Application JVM

到目前为止，就我的努力而言，我似乎能够连接，但流并没有完全发挥作用。Eclipse 向 JVM 发送 JDWP-Handshake，它应该以 JDWP-Handshake 回复。我发现当 Eclipse 发送 JDWP-Handshake 时，它​​被写入调试代理服务器，然后中继到 Servlet，但似乎这在 servlet 中被忽略了。我收到的日志如下：

```
[INFO] Started Jetty Server
2012-06-18 10:00:53,356  INFO ProxySocket  - Connection received, forwarding to tidevwls03:1166 via http://localhost:8080/tunnel/debug-proxy
2012-06-18 10:00:53,361  INFO ProxySocket  - Connected to http://localhost:8080/tunnel/debug-proxy
2012-06-18 10:00:53,603  INFO ProxyServlet  - Received incoming http connection, attempting to forward to endpoint tidevwls03:1166
2012-06-18 10:00:53,604  INFO ProxyServlet  - Connecting to endpoint tidevwls03:1166
2012-06-18 10:00:53,613  INFO StreamProxy  - [endpoint-read -> http-write    ] beginning proxy transport.
2012-06-18 10:00:53,613  INFO StreamProxy  - [http-read     -> endpoint-write] beginning proxy transport.
2012-06-18 10:00:53,619  INFO ProxySocket  - Response Header: HTTP/1.1 200 OK
2012-06-18 10:00:53,619  INFO ProxySocket  - Response Header: Content-Length: 0
2012-06-18 10:00:53,623  INFO ProxySocket  - Response Header: Server: Jetty(6.1.22)
2012-06-18 10:00:53,624  INFO StreamProxy  - [client-read  -> servlet-write  ] beginning proxy transport.
2012-06-18 10:00:53,624  INFO StreamProxy  - [client-read  -> servlet-write  ] 'J'
2012-06-18 10:00:53,624  INFO StreamProxy  - [servlet-read -> client-write   ] beginning proxy transport.
2012-06-18 10:00:53,624  INFO StreamProxy  - [client-read  -> servlet-write  ] 'D'
2012-06-18 10:00:53,624  INFO StreamProxy  - [client-read  -> servlet-write  ] 'W'
2012-06-18 10:00:53,624  INFO StreamProxy  - [client-read  -> servlet-write  ] 'P'
2012-06-18 10:00:53,624  INFO StreamProxy  - [client-read  -> servlet-write  ] '-'
2012-06-18 10:00:53,624  INFO StreamProxy  - [client-read  -> servlet-write  ] 'H'
2012-06-18 10:00:53,624  INFO StreamProxy  - [client-read  -> servlet-write  ] 'a'
2012-06-18 10:00:53,624  INFO StreamProxy  - [client-read  -> servlet-write  ] 'n'
2012-06-18 10:00:53,624  INFO StreamProxy  - [client-read  -> servlet-write  ] 'd'
2012-06-18 10:00:53,624  INFO StreamProxy  - [client-read  -> servlet-write  ] 's'
2012-06-18 10:00:53,624  INFO StreamProxy  - [client-read  -> servlet-write  ] 'h'
2012-06-18 10:00:53,624  INFO StreamProxy  - [client-read  -> servlet-write  ] 'a'
2012-06-18 10:00:53,625  INFO StreamProxy  - [client-read  -> servlet-write  ] 'k'
2012-06-18 10:00:53,625  INFO StreamProxy  - [client-read  -> servlet-write  ] 'e' 
```

我想知道是否需要改变我的想法，以便将流分解为多个请求并使用基于会话的连接。一个请求将成为一个永无止境的下游（即无限响应），然后当客户端发送到 servlet 时，它每次都会创建一个新请求。这是让它工作的关键吗？

下面是调试代理服务器的代码，它既可以独立运行，也可以临时将其配置为在 Jetty 服务器上作为 servlet 运行，以便快速测试周转时间。(ProxySocket.java)

```
import java.io.BufferedReader;
import java.io.IOException;
import java.io.InputStreamReader;
import java.io.OutputStream;
import java.net.ServerSocket;
import java.net.Socket;
import java.net.URL;
import java.util.List;

import javax.net.SocketFactory;
import javax.servlet.ServletException;
import javax.servlet.http.HttpServlet;

import org.apache.commons.io.IOUtils;
import org.apache.commons.lang.StringUtils;
import org.apache.log4j.Logger;
import org.springframework.context.ApplicationContext;
import org.springframework.context.support.ClassPathXmlApplicationContext;

public class ProxySocket extends HttpServlet {
  private static final Logger logger = Logger.getLogger( ProxySocket.class ); 
  private static final ApplicationContext springContext = new ClassPathXmlApplicationContext( "env-spring/applicationContext*.xml" ); 

  @Override
  public void init() throws ServletException {
    List<HttpDebugConfig> configs = ( List<HttpDebugConfig> ) springContext.getBean( "DebugProxyHosts" );
    for ( HttpDebugConfig config : configs ) {
      ProxyServer proxyServer = new ProxyServer( config );
      proxyServer.start();
    }
  }

  class ProxyServer extends Thread {
    private HttpDebugConfig config;

    public ProxyServer( HttpDebugConfig config ) {
      this.config = config;
    }

    public void run() {
      ServerSocket ss = null;
      StreamProxy streamToTunnel = null;
      StreamProxy streamToClient = null;

      try {
        ss = new ServerSocket( config.getLocalPort() );
        Socket inbound = null;
        Socket outbound = null;
        logger.info( String.format( "Listening for connections on port %d. Proxying to %s:%d", config.getLocalPort(), config.getRemoteHost(), config.getRemotePort() ) );
        while ( ( inbound = ss.accept() ) != null ) {
          try {
            logger.info( String.format( "Connection received, forwarding to %s:%d via %s", config.getRemoteHost(), config.getRemotePort(), config.getProxyUrl() ) );

            URL proxy = new URL( config.getProxyUrl() );

            outbound = SocketFactory.getDefault().createSocket( proxy.getHost(), proxy.getPort() );
            logger.info( String.format( "Connected to %s", config.getProxyUrl() ) );

            OutputStream out = outbound.getOutputStream();
            BufferedReader in = new BufferedReader( new InputStreamReader( outbound.getInputStream() ) );

            writeLine( out, String.format( "POST %s HTTP/1.1", config.getProxyUrl() ) );
            writeLine( out, String.format( "Host: http://%s:%s", proxy.getHost(), proxy.getPort() ) );
            writeLine( out, "Connection: keep-alive" );
            writeLine( out, String.format( "tunnel_host: %s", config.getRemoteHost() ) );
            writeLine( out, String.format( "tunnel_port: %s", String.valueOf( config.getRemotePort() ) ) );
            writeLine( out, "" );

            // read the http response and then we can start tunnelling.
            for ( String line = ""; StringUtils.isNotBlank( line = in.readLine() ); ) {
              logger.info( String.format( "Response Header: %s", line ) );
            }

            streamToTunnel = new StreamProxy( "[client-read  -> servlet-write  ]", inbound.getInputStream(), outbound.getOutputStream() );
            streamToClient = new StreamProxy( "[servlet-read -> client-write   ]", outbound.getInputStream(), inbound.getOutputStream() );
            streamToTunnel.start();
            streamToClient.start();

            while ( streamToClient.isAlive() || streamToTunnel.isAlive() ) {
              try { Thread.sleep( 100 ); } catch ( InterruptedException e ) { }
            }

            logger.info( String.format( "Shutting down socket-to-%s.", config.getProxyUrl() ) );
          } finally {
            IOUtils.closeQuietly( inbound );
            IOUtils.closeQuietly( outbound );
          }
        }
      } catch ( IOException e ) {
        logger.error( String.format( "No longer listening for connections on port %d. Proxying to %s:%d", config.getLocalPort(), config.getRemoteHost(), config.getRemotePort() ), e );
      } finally {
        if ( ss != null ) {
          try { ss.close(); } catch ( Exception e ) { }
        }
      }
    }

    private void writeLine( OutputStream out, String msg ) throws IOException {
      out.write( String.format( "%s\n", StringUtils.defaultString( msg ) ).getBytes() );
    }
  }
} 
```

下一段代码是spring配置（/env-spring/applicationContext.xml）。

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
    xmlns:util="http://www.springframework.org/schema/util"
    xsi:schemaLocation="
        http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.1.xsd 
        http://www.springframework.org/schema/util http://www.springframework.org/schema/util/spring-util-3.1.xsd
    ">
    <util:list id="DebugProxyHosts" list-class="java.util.ArrayList">
        <bean class="HttpDebugConfig">
            <property name="localPort" value="1166" />
            <property name="proxyUrl" value="http://localhost:8080/tunnel/debug-proxy" />
            <property name="remoteHost" value="tidevwls03" />
            <property name="remotePort" value="1166" />
        </bean> 
    </util:list>
</beans> 
```

配置 bean (HttpDebugConfig.java)。

```
public class HttpDebugConfig {
  private int localPort;
  private String remoteHost;
  private int remotePort;
  private String proxyUrl;

  public int getLocalPort() {
    return localPort;
  }

  public void setLocalPort( int localPort ) {
    this.localPort = localPort;
  }

  public String getRemoteHost() {
    return remoteHost;
  }

  public void setRemoteHost( String remoteHost ) {
    this.remoteHost = remoteHost;
  }

  public int getRemotePort() {
    return remotePort;
  }

  public void setRemotePort( int remotePort ) {
    this.remotePort = remotePort;
  }

  public String getProxyUrl() {
    return proxyUrl;
  }

  public void setProxyUrl( String proxyUrl ) {
    this.proxyUrl = proxyUrl;
  }
} 
```

输入流到输出流复制器 (StreamProxy.java)

```
import java.io.IOException;
import java.io.InputStream;
import java.io.OutputStream;

import org.apache.commons.io.IOUtils;
import org.apache.log4j.Logger;

public class StreamProxy extends Thread {
  private static final Logger logger = Logger.getLogger( StreamProxy.class );

  private InputStream in;
  private OutputStream out;

  private boolean kill = false;

  public StreamProxy( String name, InputStream in, OutputStream out ) {
    this.in = in;
    this.out = out;
    setName( name );
  }

  @Override
  public void interrupt() {
    this.kill = true;
    super.interrupt();
  }

  @Override
  public void run() {
    try {
      logger.info( String.format( "%s beginning proxy transport.", getName() ) );
      do {
        int n = 0;
        while ( -1 != ( n = in.read() ) ) {
          logger.info( getName() + " '" + ( char ) n + "'" );
          out.write( n );
          // out.flush();
        }
        try { Thread.sleep( 1 ); } catch ( Exception e ) { }
      } while ( ! kill );
      logger.info( String.format( "%s completed proxy transport.", getName() ) );
    } catch ( IOException e ) {
      logger.error( String.format( "%s Failed to copy from input stream to output stream. Aborting thread.", getName() ),  e );
      kill = true;
    } finally {
      IOUtils.closeQuietly( in );
      IOUtils.closeQuietly( out );
    }
  }
} 
```

本节为 Tunnel Servlet (ProxyServlet.java)

```
import java.io.IOException;
import java.net.Socket;

import javax.net.SocketFactory;
import javax.servlet.ServletException;
import javax.servlet.http.HttpServlet;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;

import org.apache.commons.io.IOUtils;
import org.apache.commons.lang.StringUtils;
import org.apache.commons.lang.math.NumberUtils;
import org.apache.log4j.Logger;

public class ProxyServlet extends HttpServlet {
  private static final Logger logger = Logger.getLogger( ProxyServlet.class ); 
  private static final long serialVersionUID = -686421490573011755L;

  @Override
  protected void service( HttpServletRequest request, HttpServletResponse response ) throws ServletException, IOException {
    new Runner( request, response ).start();
  }

  class Runner extends Thread {
    private HttpServletRequest request;
    private HttpServletResponse response;

    public Runner( HttpServletRequest request, HttpServletResponse response ) {
      this.request = request;
      this.response = response;
    }

    @Override
    public void run() {
      Socket endpoint = null;
      StreamProxy streamToHttp = null;
      StreamProxy streamToEndpoint = null;

      String host = StringUtils.defaultIfEmpty( request.getHeader( "tunnel_host" ), "localhost" );
      int port = NumberUtils.toInt( request.getHeader( "tunnel_port" ), 8000 );

      try {
        logger.info( String.format( "Received incoming http connection, attempting to forward to endpoint %s:%d", host, port ) );

        logger.info( String.format( "Connecting to endpoint %s:%d", host, port ) );
        endpoint = SocketFactory.getDefault().createSocket( host, port );

        streamToHttp = new StreamProxy( "[endpoint-read -> http-write    ]", endpoint.getInputStream(), response.getOutputStream() );
        streamToEndpoint = new StreamProxy( "[http-read     -> endpoint-write]", request.getInputStream(), endpoint.getOutputStream() );
        streamToHttp.start();
        streamToEndpoint.start();

        while ( streamToEndpoint.isAlive() || streamToHttp.isAlive() ) {
          try { Thread.sleep( 100 ); } catch ( InterruptedException e ) { }
        }

        logger.info( String.format( "Safely shut down servlet-to-%s:%d proxy.", host, port ) );
      } catch ( IOException e ) {
        logger.error( String.format( "Shutting down servlet-to-%s:%d proxy.", host, port ), e );
      } finally {
        if ( streamToHttp != null ) {
          streamToHttp.interrupt();
        }
        if ( streamToEndpoint != null ) {
          streamToEndpoint.interrupt();
        }
        IOUtils.closeQuietly( endpoint );
      }
    }
  }
} 
```

应用程序容器配置 (web.xml)

```
<?xml version="1.0" encoding="ISO-8859-1"?>
<web-app xmlns="http://java.sun.com/xml/ns/j2ee" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://java.sun.com/xml/ns/j2ee http://java.sun.com/xml/ns/j2ee/web-app_2_4.xsd"
    version="2.4">

    <display-name>tunnel</display-name>

    <context-param>
        <param-name>log4jConfigLocation</param-name>
        <param-value>classpath:log4j.properties
        </param-value>
    </context-param>

    <context-param>
        <param-name>contextConfigLocation</param-name>
        <param-value>classpath:env-spring/applicationContext*.xml</param-value>
    </context-param>

    <listener>
        <listener-class>org.springframework.web.util.Log4jConfigListener</listener-class>
    </listener>

    <listener>
        <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
    </listener>

    <servlet>
        <servlet-name>Debug Proxy</servlet-name>
        <servlet-class>ProxyServlet</servlet-class>
        <load-on-startup>1</load-on-startup>
    </servlet>

    <servlet-mapping>
        <servlet-name>Debug Proxy</servlet-name>
        <url-pattern>/debug-proxy</url-pattern>
    </servlet-mapping>

    <servlet>
        <servlet-name>Debug Socket</servlet-name>
        <servlet-class>ProxySocket</servlet-class>
        <load-on-startup>1</load-on-startup>
    </servlet>

    <servlet-mapping>
        <servlet-name>Debug Socket</servlet-name>
        <url-pattern>/debug-socket</url-pattern>
    </servlet-mapping>

    <welcome-file-list>
        <welcome-file>index.jsp</welcome-file>
    </welcome-file-list>
</web-app> 
```

最后，我使用 maven 构建的 pom.xml。

```
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
  <modelVersion>4.0.0</modelVersion>
  <groupId>tunnel</groupId>
  <artifactId>tunnel</artifactId>
  <version>0.0.1-SNAPSHOT</version>
  <packaging>war</packaging>

    <properties>
        <version.spring>3.1.1.RELEASE</version.spring>
    </properties>

    <build>
        <plugins>
            <plugin>
                <groupId>org.mortbay.jetty</groupId>
                <artifactId>maven-jetty-plugin</artifactId>
                <version>6.1.22</version>
                <configuration>
                    <webApp>${project.build.directory}/${project.build.finalName}.${project.packaging}</webApp>
                    <stopPort>9966</stopPort>
                    <stopKey>foo</stopKey>
                </configuration>
            </plugin>
        </plugins>
    </build>

    <dependencies>
        <dependency>
            <groupId>javax.servlet</groupId>
            <artifactId>servlet-api</artifactId>
            <version>2.5</version>
        </dependency>

        <!-- Utilities -->
        <dependency>
            <groupId>commons-lang</groupId>
            <artifactId>commons-lang</artifactId>
            <version>2.6</version>
        </dependency>
        <dependency>
            <groupId>commons-io</groupId>
            <artifactId>commons-io</artifactId>
            <version>2.0.1</version>
        </dependency>
        <dependency>
            <groupId>commons-collections</groupId>
            <artifactId>commons-collections</artifactId>
            <version>3.2.1</version>
        </dependency>
        <dependency>
            <groupId>commons-logging</groupId>
            <artifactId>commons-logging</artifactId>
            <version>1.1.1</version>
        </dependency>
        <dependency>
            <groupId>commons-httpclient</groupId>
            <artifactId>commons-httpclient</artifactId>
            <version>3.0.1</version>
            <exclusions>
                <exclusion>
                    <artifactId>junit</artifactId>
                    <groupId>junit</groupId>
                </exclusion>
            </exclusions>
        </dependency>
        <dependency>
            <groupId>commons-codec</groupId>
            <artifactId>commons-codec</artifactId>
            <version>1.2</version>
        </dependency>

        <!-- Logging -->
        <dependency>
            <groupId>log4j</groupId>
            <artifactId>log4j</artifactId>
            <version>1.2.16</version>
        </dependency>

        <!-- Spring Framework -->
        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-core</artifactId>
            <version>${version.spring}</version>
        </dependency>
    <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-context</artifactId>
            <version>${version.spring}</version>
        </dependency>
    <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-web</artifactId>
            <version>${version.spring}</version>
        </dependency>
    <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-webmvc</artifactId>
            <version>${version.spring}</version>
        </dependency>
    </dependencies> 
</project> 
```

我使用以下 Maven 目标运行 Jetty 服务器

```
jetty:stop clean install jetty:run-war 
```

希望你觉得这个小项目很有趣！我期待听到您的想法和意见。

谢谢，斯图尔特

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-19T04:30:42.190

SSH 隧道 - 我的选择[http://en.wikipedia.org/wiki/Tunneling_protocol](http://en.wikipedia.org/wiki/Tunneling_protocol)

```
ssh -L [bind_address:]port:sshserverhostname:targetmachinehostname port 
```

-L 指定将本地（客户端）主机上的给定端口转发到远程端的给定主机和端口。这通过分配一个套接字来侦听本地端的端口来工作，可选地绑定到指定的 bind_address。每当与此端口建立连接时，都会通过安全通道转发连接，并从远程计算机建立与主机端口 hostport 的连接。端口转发也可以在配置文件中指定。可以通过将地址括在方括号中来指定 IPv6 地址。只有超级用户可以转发特权端口。默认情况下，本地端口根据 GatewayPorts 设置进行绑定。然而，可以使用显式 bind_address 将连接绑定到特定地址。bind_address 的``localhost'' indicates that the listen- ing port be bound for local use only, while an empty address or`*' 表示该端口应可从所有接口使用。

# c - 更改矩阵的行

> ID：11079817
> 
> 赞同：2
> 
> 时间：2012-06-18T09:10:40.180
> 
> 标签：c, pointers

我有一个结构数组。实际上，它是一个二维数组，但却是一个不寻常的二维数组。我在堆栈上分配内存：

```
#define MAX_VERTICES 5068
struct ARRAY_FIX {
    int ele[MAX_VERTICES];
    int size;
    int first;
};
ARRAY_FIX C[MAX_VERTICES];

int main() {
//...
} 
```

所以，我需要用另一行替换一行（实际上，我需要执行此操作以按某些标准对行进行排序）。

![替换行](../Images/a3df9c68594630ede720ac960ce637ce.png)

怎么可能执行？据我了解，如果我使用此代码：

```
С[i] = C[j]; 
```

在这段代码中，运算符“=”将复制所有数组，不是吗？我不需要，我想通过改变指针来改变行

我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T09:23:34.757

您可以使用指针数组`struct ARRAY_FIX`并将指针切换到数组中。

> 我在堆栈上分配内存。

在文件范围内声明的对象通常不在堆栈上。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-18T09:23:55.117

在您的情况下，每一行都由`struct ARRAY_FIX`对象表示。如果您希望能够通过使用引用来处理这些行（通过交换指针等来更改行的顺序），您的二维数组必须以允许您这样做的方式存储。

可能的解决方案是将二维数组更改**为指针数组，`struct ARRAY_FIX`**以便在调用时`С[i] = C[j];`仅复制引用（对象的地址），而不是对象本身。

另请注意，您应该担心性能并仅在真正需要时才尝试使程序更快。***快速编写正确的程序比编写正确的快速程序要容易得多。***

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-18T09:39:42.510

如前所述

> 可能的解决方案是将您的二维数组更改为指向 struct ARRAY_FIX 的指针数组

在这里之后如何做到这一点：

```
#define MAX_VERTICES 5068
struct ARRAY_FIX {
    int ele[MAX_VERTICES];
    int size;
    int first;
};
ARRAY_FIX *C[MAX_VERTICES];

int main() {
int i;
ARRAY_FIX *p;
//...
for (i=0;i<MAX_VERTICES;++i)
{
    C[i] = malloc (sizeof(ARRAY_FIX ));
    //...
}
//...
p = C[1];
C[1] = C[2];
C[2] = p;
//...
} 
```

# java - Java键盘得到移位字符

> ID：11079820
> 
> 赞同：0
> 
> 时间：2012-06-18T09:10:47.070
> 
> 标签：java, keyboard, shift, qwerty

我为我的应用程序制作了一个按键监听器，当用户按下 shift 键 + a 键时，我需要识别按键代码。

例如，当用户按下 shift 键 + 键`2`（英文键盘）时，它应该打印`@`. 我做了一个快速开关/外壳来识别哪个是移位键，但它不适用于 azerty 键盘和 mac 键盘。

java中有没有办法获得移位的键或其他东西？

这很难解释。

我的 java 应用程序只是获取键码，我需要的是与键码关联的移位键码。

前任：

*   (QWERTY) 2 => @; 3 => #; ETC...
*   (AZERTY) & => 1; é => 2; ETC...

目前，我的代码是这样的（仅适用于 qwerty KB）

```
String value = String.valueOf((char)key);
    if (shift)
    {
        switch (value.charAt(0))
        {
            case '1':
                return "!";
            case '2':
                return "@";
            case '3':
                return "#";

            ..... 
```

谢谢你的帮助。

问候。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T09:27:29.717

尝试使用[`KeyEvent#getKeyChar()`](http://docs.oracle.com/javase/7/docs/api/java/awt/event/KeyEvent.html#getKeyChar%28%29). 对于一个事件`Shift+a`，这将返回`A`。但这仅适用于`KeyListener#keyTyped()`方法，不适用于其他方法 ( `keyReleased/keyPressed`)。这是一个小例子，效果很好。我尝试了不同的键盘布局。您的示例 ( `Shift+2`)`@`以 qwerty 等形式返回。

```
import java.awt.event.KeyAdapter;
import java.awt.event.KeyEvent;

import javax.swing.JFrame;

public class Maion {
    public static void main(String[] args) {
        JFrame frame = new JFrame();
        frame.setSize(600, 400);
        frame.addKeyListener(new KeyAdapter() {
            @Override
            public void keyTyped(KeyEvent e) {
                System.out.println("keyTyped: '" + e.getKeyChar() + "'");
            }
        });
        frame.setVisible(true);
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T08:31:42.057

最后，我制作了一个框架，允许用户选择他的键盘布局。然后我做了一个简单的 swith/case 来获得换档的钥匙。

```
String value = String.valueOf((char)key);
if (shift && keyboard.equals("QWERTY"))
{
    switch (value.charAt(0))
    {
        case '1':
            return "!";
        case '2':
            return "@";
        case '3':
            return "#";
    }
}
else if (shift && keyboard.equals("AZERTY"))
{
    switch (value.charAt(0))
    {
        case '&':
            return "1";
        case 'é':
            return "2";
        case '"':
            return "3";
    }
}
else return value; 
```

我希望这可以帮助别人。

问候。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-18T09:21:16.067

查看 KeyEvent 类中的方法 getModifiers()。这将告诉您按下了哪些特殊键（Alt、Ctrl、Shift）

例子：

```
boolean oneShift = (keyEvent.getKeyCode() == KeyEvent.VK_1) && "Shift".equals(KeyEvent.getKeyModifiersText(keyEvent.getModifiers())) 
```

# java - 如何在 Android 中使用正则表达式从 url 中检索文本

> ID：11079822
> 
> 赞同：-2
> 
> 时间：2012-06-18T09:10:48.947
> 
> 标签：java, android, regex, pattern-matching

我有一个 url，我试图在第三个斜杠之前提取文本。我对Android中的概念很陌生。我相信 Pattern 类是用来实现这一点的。我的问题是怎么做。

举个例子：`http://name.mywebsite.com/images....`我只需要图像之前的所有内容。谁能指出我正确的方向？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-18T09:15:24.140

你可以在java中使用uri方法getHost。这个例子会帮助你，

```
URI uri = new URI("http://name.mywebsite.com/images");

String host = uri.getHost();
/* It returns name.mywebsite.com/*/ 
```

# python - python：如何在列表列表中引用特定项目？

> ID：11079825
> 
> 赞同：1
> 
> 时间：2012-06-18T09:11:01.147
> 
> 标签：python, list

Python 初学者在这里，我有一个列表列表，并想引用该列表的特定部分。

例如

```
lol = [[1, 2, 4], [6, 7, 8], [9, 10, 14]] 
```

如果我只想打印其中一个列表中的第一项，例如 1、6 或 9，我该怎么做？

我只能找到分别引用每个列表的方法，例如lol [0]，但不能再引用该列表中的项目。

预先感谢您的帮助！

干杯

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-18T09:12:37.073

```
>>> lol = [[1, 2, 4], [6, 7, 8], [9, 10, 14]]
>>> lol[0][0]
1
>>> lol[1][0]
6
>>> lol[2][0]
9 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-18T09:13:03.710

添加另一个`[x]`级别：

```
lol[2][0] 
```

将为您提供最后一个列表中的第一个元素。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-18T09:12:24.457

*如果我只想打印其中一个列表中的第一项，例如 1、6 或 9，我该怎么做？*

只需使用列表推导来获取列表中特定位置的项目：

```
lol = [[1, 2, 4], [6, 7, 8], [9, 10, 14]]
print [item[0] for item in lol] 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-18T09:14:02.430

已经有一段时间了，但我相信它会是下面的代码。

```
for innerList in lol:
    print innerList[0] 
```

# javascript - ckeditor 在 getdata 中查找

> ID：11079830
> 
> 赞同：0
> 
> 时间：2012-06-18T09:11:30.773
> 
> 标签：javascript, html, dom, ckeditor

有谁知道如何`getdata`使用 javascript 从 ckeditors 函数获得的 HTML 页面访问 DOM？

例如：

```
function Delete_ftv_from_text(mfv_id)
{
    var content=CKEDITOR.instances.editor1.getData();
    content.getelementbyid(mfv_id);
} 
```

因此，与其访问`document.getElementById`我想从 ckeditor 的文本中获取元素，在这种情况下，是具有我进入函数的 id 的 div 元素。

上面的代码当然不起作用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-18T15:40:50.993

您可以直接从包含页面访问 DOM：

```
var el = CKEDITOR.instances['editor1'].document.$.getElementById(id);
// do what you want with el 
```

# version - 检查运行时使用的 JRE 版本

> ID：11079831
> 
> 赞同：1
> 
> 时间：2012-06-18T09:11:33.427
> 
> 标签：version, java

我的系统上安装了多个版本的 jre。有什么方法可以知道应用程序在运行时使用的是哪个 JRE 版本。

应用程序可能使用较低版本的 JRE -“不确定”

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-18T09:29:11.277

使用

```
System.getProperty("java.version") 
```

将返回当前运行的 JVM 的版本。

有时这不会返回任何东西（不知道为什么）。在这种情况下，您可以尝试：

```
System.getProperty("java.runtime.version"); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-18T09:40:48.180

就像 a_horse_with_no_name 所说：你可以通过调用`System.getProperty("java.version")`.

如果您需要此信息以确保使用正确的 JVM 版本启动程序，请尝试以下操作：

```
public class Version
{
    //specifies minimum major version. Examples: 5 (JRE 5), 6 (JRE 6), 7 (JRE 7) etc.
    private static final int MAJOR_VERSION = 7;

    //specifies minimum minor version. Examples: 12 (JRE 6u12), 23 (JRE 6u23), 2 (JRE 7u2) etc.
    private static final int MINOR_VERSION = 1;

    //checks if the version of the currently running JVM is bigger than
    //the minimum version required to run this program.
    //returns true if it's ok, false otherwise
    private static boolean isOKJVMVersion()
    {
        //get the JVM version
        String version = System.getProperty("java.version");

        //extract the major version from it
        int sys_major_version = Integer.parseInt(String.valueOf(version.charAt (2)));

        //if the major version is too low (unlikely !!), it's not good
        if (sys_major_version < MAJOR_VERSION) {
            return false;
        } else if (sys_major_version > MAJOR_VERSION) {
            return true;
        } else {
            //find the underline ( "_" ) in the version string
            int underlinepos = version.lastIndexOf("_");

            try {
                //everything after the underline is the minor version.
                //extract that
                int mv = Integer.parseInt(version.substring(underlinepos + 1));

                //if the minor version passes, wonderful
                return (mv >= MINOR_VERSION);

            } catch (NumberFormatException e) {
                //if it's not ok, then the version is probably not good
                return false;
            }
        }
    }

    public static void main(String[] args)
    {
        //check if the minimum version is ok
        if (! isOKJVMVersion()) {
            //display an error message
            //or quit program
            //or... something...
        }
    }
} 
```

您所要做的就是更改您想要的值并重新编译`MAJOR_VERSION`。`MINOR_VERSION`我一直在我的程序中使用它并且效果很好。`System.getProperty("java.version")`警告：如果您更改为`System.getProperty("java.runtime.version")`... 输出将略有不同，则它不起作用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-04-20T11:24:27.727

您可以将其放入类的静态代码中，使其仅运行一次：（此代码不是我的。您可以在此处参考：-[在运行时获取 Java 版本](https://stackoverflow.com/questions/2591083/getting-version-of-java-in-runtime)

```
public static double JAVA_VERSION = getVersion ();

public static double getVersion () {
    String version = System.getProperty("java.version");
    int pos = version.indexOf('.');
    pos = version.indexOf('.', pos+1);
    return Double.parseDouble (version.substring (0, pos));
} 
```

* * *

如果那没有出现..

```
String version = Runtime.class.getPackage().getImplementationVersion() 
```

* * *

您可以参考的其他链接：

[http://www.oracle.com/technetwork/java/javase/versioning-naming-139433.html](http://www.oracle.com/technetwork/java/javase/versioning-naming-139433.html) [http://docs.oracle.com/javase/1.5.0/docs/relnotes/version-5.0.html](http://docs.oracle.com/javase/1.5.0/docs/relnotes/version-5.0.html)

# android - 有效 APK 文件的最小大小

> ID：11079835
> 
> 赞同：2
> 
> 时间：2012-06-18T09:12:05.333
> 
> 标签：android, file, apk

是否可以说有效 APK 文件的最小字节大小是多少？它应该可以安装在android上，但根本不需要任何功能。所有字符串都可以视为 1 字符长（8 字节）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T09:32:14.653

APK 文件没有最小大小。您最多可以添加 4GB 的 apk 文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T09:17:35.690

根据我具有预定义应用程序名称的新项目，其大小为 35k。

更新：删除所有无用的文本和图像（我只保留 1 个 ldpi 图像作为图标，大小为 2.66k）并编译新的 apk 文件后，其大小减少到 7KB。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-08-22T09:55:56.397

```
Android app store minimum size of apk is :- 7 KB 

Android app store maximum size of apk is :- 100 MB

Google Play Store increases Android APK Size Limit from 50MB to 100MB. 
Google is doubling the maximum APK file size on the Play Store from 50 MB to 100 MB. 
Android app developers can now build higher quality Apps and Games that users love. 
```

# vim - Vim 和 clang_complete，如何明确请求重新解析我的代码

> ID：11079841
> 
> 赞同：4
> 
> 时间：2012-06-18T09:12:16.653
> 
> 标签：vim, clang, clang-complete

我使用带有 clang_complete 的 Vim 来完成全功能。

当我需要完成时，插件会自动触发，例如，在我键入`.`或`->`访问对象成员或方法之后（见下面的截图）。

![clang_complete 显示 std::map 方法](../Images/21254f73df085f8a23a30a566f41c865.png)

该插件工作得非常好，但是我需要一种手动触发它的方法（即编译我的代码以进行语法检查）。

这很有用，原因有两个：

1.  静态语法检查
2.  清除先前已修复的错误（否则将保留在其缓冲区中）。请参阅下面的两个屏幕截图以获得更好的理解。

任何帮助表示赞赏。谢谢。

* * *

## 截图 1

* * *

![第 3 行出错](../Images/b91aa57964859e64c84929306276042a.png)

* * *

## 截图 2

* * *

![错误已修复](../Images/bd2c9ef827fa67d4ea4edc2c2e10f2d9.png)

* * *

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-29T12:32:28.820

来自 clang_complete 文档：

```
 *clang_complete-periodic_quickfix*
        *g:clang_periodic_quickfix*
If equal to 1, it will periodically update the quickfix window.
Default: 0
Note: You could use the g:ClangUpdateQuickFix() to do the same with a mapping. 
```

如果将此变量设置为 1，它将定期更新 quickfix 窗口，（并且）或者您可以创建一个映射：

```
nmap <leader>uq :call g:ClangUpdateQuickFix() 
```

这样 \uq 会导致更新。（当然，使用你的领导者映射，自然）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-07T06:05:27.323

如果您正在寻找动态的语法检查，我建议您看一下[syntastic](https://github.com/scrooloose/syntastic)，它基本上在您的代码上运行 g++ --fsyntaxonly 并在您的缓冲区上标记错误。您还可以将其配置为使用 clang！

# c++ - 检测堆栈已满

> ID：11079844
> 
> 赞同：6
> 
> 时间：2012-06-18T09:12:23.650
> 
> 标签：c++, stack, segmentation-fault, stack-overflow

在编写 C++ 代码时，我了解到使用堆栈存储内存是个好主意。

但是最近我遇到了一个问题：

我有一个实验，其代码如下所示：

```
void fun(const unsigned int N) {
    float data_1[N*N];
    float data_2[N*N];

    /* Do magic */
} 
```

该代码随机出现了一个分段错误，我不知道为什么。

原来问题是我试图在我的堆栈上存储很大的东西，有没有办法检测到这个？或者至少检测到它出错了？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-18T09:15:29.117

```
float data_1[N*N];
float data_2[N*N]; 
```

这些是可变长度数组 (VLA)，`N`不是常量表达式。参数中的*const-ness*仅确保它`N`是只读的。它不会告诉编译器`N`是常量表达式。

仅在 C99 中允许使用 VLA；在其他版本的 C 和所有版本的 C++ 中，它们是不允许的。但是，一些编译器提供 VLA 作为编译器扩展功能。如果您使用 GCC 进行编译，请尝试使用`-pedantic`选项，它会告诉您这是不允许的。

现在为什么您的程序会给出段错误，可能是由于值较大而导致[堆栈溢出](http://en.wikipedia.org/wiki/Stack_overflow)`N * N`：

* * *

考虑使用`std::vector`：

```
#include <vector> 

void fun(const unsigned int N) 
{
  std::vector<float> data_1(N*N);
  std::vector<float> data_2(N*N);

  //your code
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-18T10:04:24.780

很难检测到堆栈已满，而且根本不便携。最大的问题之一是堆栈帧的大小是可变的（尤其是在使用可变长度数组时，这实际上只是一种更标准的方式来做人们之前所做的事情`alloca()`）所以你不能使用像数字这样的简单代理堆栈帧。

*大多数*可移植的最简单方法之一是将变量（可能是类型`char`，以便指向它的指针是 a `char*`）放在堆栈上的已知深度，然后测量从该点到变量（相同的变量）的距离type) 通过简单的指针算法在当前堆栈帧中。加上您将要分配多少空间的估计，您可以很好地猜测堆栈是否即将炸毁您。这样做的问题是你不知道堆栈的增长方向（不，它们并不都在同一个方向增长！）并且计算堆栈空间的大小本身就相当混乱（你可以尝试系统限制之类的东西，但它们真的很尴尬）。加上黑客因素非常高。

我*在 32 位 Windows 上*看到的另一个技巧是尝试获得`alloca()`足够的空间并处理如果空间不足时会发生的系统异常。

```
int have_enough_stack_space(void) {
    int enough_space = 0;

    __try {           /* Yes, that's got a double-underscore. */
        alloca(SOME_VALUE_THAT_MEANS_ENOUGH_SPACE);
        enough_space = 1;
    }  __except (EXCEPTION_EXECUTE_HANDLER) {}

    return enough_space;
} 
```

这段代码是*非常*不可移植的（例如，不要指望它在 64 位 Windows 上工作）并且用旧的 gcc 构建需要一些讨厌的内联汇编程序！结构化异常处理（这是一种用途）是 Windows 上最黑暗的黑魔法之一。（并且不要`return`从`__try`构造内部。）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-18T09:15:56.107

尝试使用 malloc 等函数。如果找不到您请求的大小的内存块，它将显式返回 null。

当然，在这种情况下，不要忘记在函数结束后释放此内存。

此外，您可以检查编译器的设置，以及它生成二进制文件的堆栈内存限制。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-18T09:19:34.427

人们说使用堆栈而不是堆内存更好的原因之一可能是因为当您离开函数体时，分配在堆栈顶部的变量将自动弹出。为了存储大块信息，通常使用堆内存和其他数据结构，如链表或树。此外，在堆栈上分配的内存是有限的，而且比在堆空间中分配的内存要少得多。我认为最好更仔细地管理内存分配和释放，而不是尝试使用堆栈来存储大数据。

您可以使用管理内存分配的框架。您也可以使用 VDL 来检查您的内存泄漏和未释放的内存。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-18T09:25:55.317

> 有没有办法检测到这个？

不，一般来说。

堆栈大小取决于平台。通常，*操作系统*决定堆栈的大小。因此，您可以检查您的操作系统（`ulimit -s`在 linux 上）以查看它为您的程序分配了多少堆栈内存。

如果您的编译器支持`stackavail()`，那么您可以检查它。在不确定是否超出堆栈限制的情况下，最好使用堆分配内存。

# java - 阅读加密电子邮件

> ID：11079848
> 
> 赞同：2
> 
> 时间：2012-06-18T09:12:35.987
> 
> 标签：java, encryption, pfx

我有一个 PFX 证书，我用它来阅读 Outlook 中的加密电子邮件。我想通过 Java 阅读这封电子邮件。我设法获得了 javax.mail.Message 对象的列表。使用我的 PFX 密钥解密这些的最简单方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T10:43:51.703

使用 Bouncycastle 和 JavaMail：

```
Store store = session.getStore("imaps");
store.connect("imap.gmail.com", "user@gmail.com", "gmailPassword");
System.out.println(store);

Folder inbox = store.getFolder("MyFolder");
inbox.open(Folder.READ_ONLY);
Message messages[] = inbox.getMessages();

for (Message message : messages) {
    KeyStore ks = KeyStore.getInstance("pkcs12");

    FileInputStream fis = new FileInputStream("c:\\key.pfx");
    String password = "pfxPassword";

    ks.load(fis, password.toCharArray());
    String alias = ks.aliases().nextElement();

    PrivateKey pKey = (PrivateKey) ks.getKey(alias, password.toCharArray());
    X509Certificate cert = (X509Certificate) ks.getCertificate(alias);

    RecipientId recId = new RecipientId();

    recId.setSerialNumber(cert.getSerialNumber());
    recId.setIssuer(cert.getIssuerX500Principal().getEncoded());

    SMIMEEnveloped m = new SMIMEEnveloped((MimeMessage) message);
    RecipientInformationStore recipients = m.getRecipientInfos();
    RecipientInformation recipient = recipients.get(recId);

    MimeBodyPart res = SMIMEUtil.toMimeBodyPart(recipient.getContent(pKey, ks.getProvider().getName()));

    MimeMultipart parts=(MimeMultipart) res.getContent();

    for (int i=0;i<parts.getCount();i++){
        BodyPart part=parts.getBodyPart(i);
        if (part.getContentType().contains("application/octet-stream")){
            //System.out.println(IOUtils.toString((InputStream) part.getContent()));
            ZipInputStream zin = new ZipInputStream((InputStream)part.getContent());
            ZipEntry entry;
            while((entry = zin.getNextEntry()) != null) {
                System.out.println(IOUtils.toString(zin));
            }
        }
    }
} 
```

# jquery - 为什么浏览器使用 ajax 请求对特殊字符进行不同的编码？

> ID：11079849
> 
> 赞同：2
> 
> 时间：2012-06-18T09:12:37.043
> 
> 标签：jquery, ajax, character-encoding

我有一个 Web 应用程序，它读取几个输入字段（字母数字）的值，并使用 jQuery 的 $.ajax() 方法构造一个非常简单的 xml 传递给服务器。该 xml 的模板是：

```
<request>
    <session>[some-string]</session>
    <space>[some-string]</space>
    <plot>[some-string]</plot>
    ...
</request> 
```

当输入包含芬兰语变音字符（例如**ä**或**ö**）时，将此类请求发送到服务器会在不同浏览器的字符编码方面引发问题。例如，如果我在其中一个输入中添加单词**Käyttötarkoitus** "，Chrome 和 Firefox 向服务器发送完全相同的请求的方式如下：

***铬合金：***

```
<request>
    <session>{string-hidden}</session>
    <space>2080874</space>
    <plot>KÃ¤yttÃ¶tarkoitus</plot>
    ...
</request> 
```

***FF 12.0：***

```
<request>
    <session>{string-hidden}</session>
    <space>2080874</space>
    <plot>Käyttötarkoitus</plot>
    ...
</request> 
```

这是我用来发送请求的代码片段：

```
$.ajax({ 
    type: "POST", 
    url: url,
    dataType: 'xml;charset=UTF-8',
    data: xml, 
    success: function(xml) { 
        //
    },
    error: function(jqXHR, textStatus, errorThrown) {
        //
    }
}); 
```

为什么我会得到不同的编码以及如何摆脱这种差异？我需要解决这个问题，因为它会导致服务器端出现其他问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T09:15:47.040

在 dataType 上，尝试使用“application/xml”或“text/xml”而不是“xml;charset=UTF-8”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-05T06:12:16.000

使用 encodeURI 对 uri 进行编码。而且您也必须在服务器中对其进行解码。我有同样的问题。我正在寻找更好的选择，因为 encodeURI 也对日期字段进行编码

# linq - NHibernate 克服 NotSupportedException

> ID：11079852
> 
> 赞同：6
> 
> 时间：2012-06-18T09:12:44.423
> 
> 标签：linq, nhibernate, notsupportedexception

有谁知道克服 NotSupportedException 的任何方法？我有一个针对用户的方法：

```
 public virtual bool IsAbove(User otherUser)
 {
     return HeirarchyString.StartsWith(otherUser.HeirarchyString);
 } 
```

我想做：

```
_session.Query<User>.Where(x => loggedInUser.IsAbove(x)); 
```

但这会引发 NotSupportedException。真正的痛苦是使用

```
_session.Query<User>.Where(x => loggedInUser.HeirarchyString.StartsWith(x.HeirarchyString)); 
```

工作得很好。但是，我不喜欢将其作为解决方案，因为这意味着如果我更改 IsAbove 方法的工作方式，则每当我想更新代码时，我都必须记住所有复制代码的地方

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-18T09:24:12.607

命名规范表达式并重用它，例如：

```
public Expression<Func<....>> IsAboveSpecification = (...) => ...;

public virtual bool IsAbove(User otherUser)
{
    return IsAboveSpecification(HeirarchyString, otherUser.HeirarchyString);
} 
```

根据需要在查询中重用 IsAboveSpecification。如果经常使用 IsAbove() 方法，可以在表达式上缓存 Compile() 方法的结果。

# c# - C#子类中父类的构造函数

> ID：11079855
> 
> 赞同：0
> 
> 时间：2012-06-18T09:13:05.300
> 
> 标签：c#, inheritance, constructor, parent

我有一个父类和一个子类。父级有一个初始化其参数的构造函数。

我的问题是：孩子如何看待父母的构造函数？我可以为孩子定义一个构造函数吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T09:15:09.653

您可以在您的*子*班`base(...)`的 ctor 中使用。

 *前例：

```
public class Child : BaseClass 
{
    public Child() : base(/*some parameters*/) //CALLING BaseClass parametrized ctor
    {  
    }
} 
```

请注意，如果您不需要某些特定参数，则不要执行*任何*操作，因为调用类时会*顺便*`BaseClass`调用默认值。`ctor`*`ctor``Child`*

 ** * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-18T09:16:10.047

此继承示例显示：

*   如何从孩子的新构造函数调用父构造函数
*   如何传递父构造函数所需的参数

代码示例：

```
public class Parent
{
    private object _member;

    public Parent(object member)
    {
        this._member = member;
    }
}

public class Child : Parent
{
    public Child(object member)
        : base(member)
    {
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-18T09:21:41.417

您可以很好地为子类定义构造函数，仅在您没有为类定义构造函数的情况下才提供默认构造函数

同时对于如何查找parent的构造函数

它将检查父类中是否存在无参数构造函数，以防万一您没有（编译器让您知道相同），否则您将不得不使用参数调用父构造函数，例如`base("This is the string parameter")`

如果您的意思是别的，请更新问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-18T09:15:23.260

您必须为孩子定义构造函数。您可以`: base()`在构造函数原型及其实现之间调用基类的构造函数：

```
public class Parent {
  public Parent() {
    ...
  }
}

public class Child : Parent {
  public Child() : base() { // calls Parent.ctor
  }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-18T09:15:54.913

当然。

您在“base”关键字之后。

```
public class Fruit
{
    string TypeOfFruit { get; set; }

    public Fruit (string typeOfFruit)
    {
        TypeOfFruit = typeOfFruit;
    }

}

public class Apple : Fruit
{
    string AppleType { get; set; }

    public Apple(string appleType) : base("Apple")
    {
        AppleType = appleType;
    }

} 
```**

# ruby-on-rails - Spree 自定义/扩展用户角色和权限

> ID：11079860
> 
> 赞同：3
> 
> 时间：2012-06-18T09:13:42.480
> 
> 标签：ruby-on-rails, spree

我正在尝试在 Spree 中指定一些自定义角色，例如角色“客户”并扩展权限以访问该角色的管理部分。

该用户将只能访问该用户创建的那些产品。概念是让具有“客户”角色的用户仅管理产品和其他某些模型。

首先，我添加了 CanCan 插件并在 role_ability.rb 中定义了一个 RoleAbility 类

就在这篇文章之后：[Spree Custom Roles Permissions](https://stackoverflow.com/questions/5455174/spree-custom-roles-permissions)

```
class RoleAbility
  include CanCan::Ability

  def initialize(user)
    user ||= User.new
    if user.has_role? 'admin'
        can :manage, :all
    elsif user.has_role? 'client_admin'
      can :read, Product
      can :admin, Product
    end
  end
end 
```

将此添加到初始化程序：config/initializers/spree.rb

```
Ability.register_ability(RetailerAbility) 
```

还扩展了 admin_products_controller_decorator.rb :app/controllersadmin_products_controller_decorator.rb

```
Admin::ProductsController.class_eval do
    def authorize_admin
        authorize! :admin, Product
        authorize! params[:action].to_sym, Product
    end
end 
```

但我收到一条消息“授权失败”

试图找到一些运气，我参考了以下链接

用于自定义 Spree 角色的 github 要点：[https ://gist.github.com/1277326](https://gist.github.com/1277326)

这是我面临的类似问题：[http ://groups.google.com/group/spree-user/browse_thread/thread/1e819e10410d03c5/23b269e09c7ed47e](http://groups.google.com/group/spree-user/browse_thread/thread/1e819e10410d03c5/23b269e09c7ed47e)

所有的努力都是徒劳的……

任何指针高度赞赏？

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-06T06:41:18.733

终于找到了。

经过仔细研究后发现 spree 1.1.1 通过在每个类中添加“Spree”模块来更改类，这导致 url 类似于“spree/admin/overview”，之前是“admin/overview”。

所以这对我有用，我能够控制我的角色的权限。

# mysql - 在 MYSQL 中为 TIMEDATE 获取 NULL 值

> ID：11079861
> 
> 赞同：0
> 
> 时间：2012-06-18T09:13:46.817
> 
> 标签：mysql, insert

当我按原样插入代码时，我得到 NULL

```
INSERT INTO dates VALUES (date='12-11-20 11:30:11'); 
```

当我触发查询时

```
SELECT * FROM dates; 
```

我明白了

```
|dates |
| NULL | 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-18T09:15:34.107

```
INSERT INTO dates (date) VALUES('12-11-20 11:30:11') 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-18T09:16:01.287

你的语法是错误的。

正确的语法如下所示。

```
INSERT INTO dates (dates) VALUES ('12-11-20 11:30:11'); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-18T09:19:20.953

你的`INSERT`查询是错误的。使用以下语法之一：

```
INSERT INTO dates (date) VALUES ('12-11-20 11:30:11')
INSERT INTO dates SET date = '12-11-20 11:30:11' 
```

第一个是首选，因为它适用于所有数据库，而后者很可能不是标准 SQL。

您还应该考虑使用`2012-11-20`而不是`12-11-20`. 由于人们不使用 4 位数年份，我们都知道 12 年前发生了什么。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-18T09:42:12.820

好吧，这里有几个有趣的问题需要注意。

首先，在我看来，明确说明将要更新的字段更安全：否则在表结构更改后查询将变得不可用。并且不建议为表的字段和表本身赋予相同的名称：它可能会在以后混淆您。

其次，您的 DATETIME 文字实际上对于 MySQL 来说是可以的 - 它接受两个数字一年，并通过特定规则对其进行解析：

```
Year values in the range 70-99 are converted to 1970-1999.
Year values in the range 00-69 are converted to 2000-2069. 
```

所以你仍然可以使用 '12-11-20' 语法……如果以后维护你的脚本的人不会混淆它（甚至你，也许......））。

最后，INSERT 表达式可以采用 VALUES 子句中的任何有效表达式。在您的情况下，它是`date = '...'`表达式，它被评估为 NULL；这就是为什么 NULL 被插入到你的表中。但是，如果您只想插入 DATETIME 文字（您可能会这样做），请删除赋值符号（实际上被视为“等式运算符”）并简单地使用...

```
 INSERT INTO dates (datetime_field) VALUES ('2012-11-20 12:12:12'); 
```

...或者这个，如果你想用一个查询插入几行：

```
 INSERT INTO dates (datetime_field) VALUES ('2012-11-20 12:12:12'), ('2012-11-20 13:13:13'); 
```

希望这可以帮助。) 但即使您没有任何问题，我仍然建议您学习[插入语法](http://dev.mysql.com/doc/refman/5.5/en/insert.html)和[日期和时间文字](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-literals.html)主题——它会有所帮助。

# c# - 实体框架导航属性生成规则

> ID：11079863
> 
> 赞同：12
> 
> 时间：2012-06-18T09:14:01.010
> 
> 标签：c#, entity-framework

我想知道实体框架在导航属性的命名/生成方面遵循什么规则。我观察到了几种似乎没有意义的场景，所以我想知道是否有人确切地知道这些是如何工作的。

**场景一：**

```
public class Post
{
    public int Id { get; set; }
    public User Author { get; set; }
} 
```

   生成

![方案 1](../Images/4851af5303fa06c8ab5ebf990cfd9872.png)

IE。默认情况下，导航属性会生成名为 [PropertyName]_Id 的 FK

**场景二：**

有意义的是，如果 EF 在您手动指定 FK Id 时生成格式 [PropertyName]_Id 之类的属性，它将遵循相同的规则，但是：

```
public class Post
{
    public int Id { get; set; }
    public int? Author_Id { get; set; }
    public User Author { get; set; }
} 
```

   生成

![方案 2](../Images/d03666b519aa58a68ebc28f5e08a714d.png)

如您所见，这不会自动注册为导航属性。

**场景 3：**

如果它不适用于场景 2，为什么它适用于替代命名约定？

```
public class Post
{
    public int Id { get; set; }
    public int? AuthorId { get; set; }
    public User Author { get; set; }
} 
```

   生成

![方案 3](../Images/e063bfefbba464e954f3b7d9e60a9656.png)

导航属性检测和生成的规则是什么？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-18T11:09:15.317

这是预期的行为，它基于 EF 的两个不同约定

*   在第一个示例中，您使用的是独立关联，您的实体没有 FK 属性。EF 将使用简单模式在数据库中创建 FK：`NameOfNavigationProperty_NameOfRelatedPK`此约定遵循传统的数据库命名。
*   在第二个示例中，您定义了与 EF 使用的 FK 同名的属性。EF 检测到这一点并将 1 添加到其生成的 FK。您的属性不用作 FK 的原因是搜索 FK 属性的第二个约定。此约定要求 FK 属性具有此名称（约定遵循传统的 .NET 命名）：
    *   `NameOfNavigationPropertyNameOfRelatedPK`由...提供`NavigationPropertyNameForeignKeyDiscoveryConvention`
    *   `NameOfRelatedTypeNameOfItsPK`由...提供`TypeNameForeignKeyDiscoveryConvention`
    *   `NameOfRelatedPK`由...提供`PrimaryKeyNameForeignKeyDiscoveryConvention`
*   在上一个示例中，您正确定义了 FK 属性并且 EF 检测到它，因此它使用外键关联。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-02-17T21:11:40.643

除了上面@Ladislav Mrnka 的回答，您还可以在此处找到实体框架默认约定的详细参考：http: [//msdn.microsoft.com/en-us/library/system.data.entity.modelconfiguration.conventions (v =vs.103).aspx](http://msdn.microsoft.com/en-us/library/system.data.entity.modelconfiguration.conventions(v=vs.103).aspx)

# ruby-on-rails - Rails + Twitter Bootstrap：使用 Ajax 渲染部分选项卡不会更改为“活动”？

> ID：11079869
> 
> 赞同：4
> 
> 时间：2012-06-18T09:14:13.653
> 
> 标签：ruby-on-rails, ajax, tabs, twitter-bootstrap

所以我有一个带有标签导航的用户个人资料：

```
<div id="proftab">
    <ul class="nav nav-tabs">
          <li class="active">
            <%= link_to "About", about_users_path, :remote => true, :data => {:toggle=>"tab"} %>
          </li>
          <li><%= link_to "Pictures", pictures_users_path, :remote => true, :data => {:toggle=>"tab"} %></li>
    </ul>
</div>
<div class="row">
    <div id="profile" class="span9">

    </div>
</div> 
```

我已经设法让 Ajax 呈现某些部分。现在，当我单击选项卡时，部分会加载到我的目标占位符 div 中。但我的问题是选项卡列表项不会根据呈现的部分更改其活动类。真的不知道如何解决这个问题。

我认为这与链接或ID有关。当我像在引导文档中那样构建选项卡时（带有隐藏和显示的 div），它可以完美运行。但我认为它无法正确处理部分。我希望有一个人可以帮助我！谢谢！

路线.rb

```
get "users/about" => 'users#about', :as => :about_users

get "users/pictures" => 'users#pictures', :as => :pictures_users 
```

users_controller.rb

```
class UsersController < ApplicationController
  before_filter :authenticate_user!

  def index
    @users = User.all
  end

  def show
    @user = User.find(params[:id])
  end

  def about
    respond_to do |format|
      format.js
    end
  end

  def pictures
    respond_to do |format|
      format.js
    end
  end
end 
```

意见/用户/about.js.erb

```
$("#profile").html("<%= escape_javascript(render(:partial => 'about')) %>"); 
```

意见/用户/pictures.js.erb

```
$("#profile").html("<%= escape_javascript(render(:partial => 'pictures')) %>"); 
```

意见/用户/_about.html.erb

```
<div class="tab-pane active" id="#about">
     about
</div> 
```

视图/用户/_pictures.html.erb

```
<div class="tab-pane active" id="#pictures">
     pictures
</div> 
```

tabs.js

```
$('#proftab a').click(function (e) {
    e.preventDefault();
    $(this).tab('show');
}) 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-18T11:22:48.833

实际上，您根本不需要用于选项卡的引导 javascript。我从链接中删除了数据切换并将我的 javascript 更改为：

```
$('#proftab a').click(function (e) {
    $('ul.nav-tabs li.active').removeClass('active')
    $(this).parent('li').addClass('active')
}) 
```

工作完美！

# html - 嵌套浮动 div

> ID：11079871
> 
> 赞同：1
> 
> 时间：2012-06-18T09:14:20.493
> 
> 标签：html

我在一个 DIV 中有两个 MAIN DIV，它是页面的一部分。

```
<div class="commentholder">                                     
<div class="cthumbnail"> <!-- #1 -->
    <a href="#"><img src="source"></a>
</div>

<div class="ccontent"> <!-- #2 -->
    <a href="#" class="post_author">Dilip Raj Baral</a>

    this is a comment..

    <div class="clear"></div>

    <div class="cstatus">
        April 16, 2012 &#183;
        <a href="#" class="like">Like</a> &#183;
        <a href="#" class="likes">0</a>
    </div>

</div> 
```

如图所示，CTHUMBNAIL 和 CCONTENT 是 DIV 中的两个主要 DIV。它们实际上是两列。CTHUMBNAIL 有一个图片的缩略图显示在左侧，CCONTENT 有评论。与它们相关的 CSS 是：

```
#content .commentholder {
    display: block;
    padding: 5px 0 5px 0;
    border: 2px dotted #d2d9e7; /**********/
    }
#content .ccontent {
    vertical-align: top;
    margin-left: 10px;
    float: left;
    width: 350px; /*change*/
#content .cstatus {
    display: block;
    float: left;
    margin-top: 1px;
    color: #979797;
    font-size: 11px;
    }
#content .cthumbnial {float: left;} 
#content .cthumbnail img {
    width: 32px;
    height: 32px;
    } 
```

[http://connectu.saipal.edu.np/styles/style.css](http://connectu.saipal.edu.np/styles/style.css)如果您需要，这是**完整的 CSS 。**

COMMENTHOLDER div 应与浮动 DIV THUMBNAIL 和 CCONTENT 接壤。但事实并非如此。相反，它显示如下：

[http://minus.com/mCCHNGVfu/](http://minus.com/mCCHNGVfu/)（这是图片链接。我不允许包含图片。

Thumbnail 和 Comment 不在 COMMENTHOLDER DIV 的边界内。

这就是我一整天都在努力解决的问题。

一定是什么故障..请帮帮我！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T09:20:56.663

试试下面的代码，`height:100%; overflow:hidden`这两个属性允许元素在高度上拉伸。每当您使用浮动 div 时，只需将这两个属性添加到父元素即可。

```
#content .commentholder {
    display: block;
    padding: 5px 0 5px 0;
    border: 2px dotted #d2d9e7; /**********/
    height:100%;
    overflow:hidden;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T09:31:05.083

你添加了一个 float:left; 到您的 .ccontent div，但您没有清除浮动。在 .ccontent 之后添加一个带有 class='clear' 的 div，看看问题是否消失。您也可以在此[链接](http://www.mikepadgett.com/technology/technical/solution-to-nested-div-float-problems/)中尝试解决方案。

# entity-framework - 如何在 n 层分层应用程序中使用 Entity Framework(4) 编译查询？

> ID：11079873
> 
> 赞同：2
> 
> 时间：2012-06-18T09:14:26.757
> 
> 标签：entity-framework, n-tier-architecture, business-logic-layer, compiled

我有一个实体框架 4 的 n 层应用程序设计问题。

在服务器端，我的应用程序有 3 层： - 一个服务层 (WCF) - 一个业务层 - 一个数据访问层（使用 EF4）

实体是 POCO，放置在独立的项目/程序集中。

我使用依赖注入来创建业务对象和数据访问层，因此我只使用接口，并且我的业务层不依赖于 EF。

我想使用 EF Compiled Queries 来提高性能。

但是我的（业务）查询是在业务层中定义的，因为在我的架构中，DataAccess 仅提供 CRUD 方法。

所以编译的查询应该在业务层中定义，但我对 EF 没有依赖，也不希望保持松耦合，因此，我不能从那里调用 ObjectContext。

在 DataAccess 中定义查询不适合我的应用程序设计。

**那么有谁知道是否有一种通用的方法可以将业务查询从业务层注入到 DataAccess 层，以便我可以将它们与编译查询一起使用？**

我已经尝试了很多东西，到处看了看，但找不到答案…… :( 看起来 EF 不适合那种 n 层应用程序。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T10:04:53.927

编译查询属于数据访问层，因为它是依赖于数据访问类的数据访问特定功能。如果您的设计不接受这一点，那么它根本就没有为数据访问特定功能做好准备 = 要么更改您的设计，要么不使用数据访问特定功能。

最简单的方法是将已编译的查询添加到您的上下文中，并将它们作为方法公开在上下文中：

```
public IQueryable<SomeEntity> SomeQuery(string someParam) {
    return compiledQuery.Invoke(this, someParam);
} 
```

现在，您将这些方法添加到上下文的接口中。

您可以遵循类似的方法，并在业务层中可见的任何数据访问接口上公开编译后的查询。

# delphi - Delphi Twain 和扫描仪状态

> ID：11079875
> 
> 赞同：1
> 
> 时间：2012-06-18T09:14:31.407
> 
> 标签：delphi, twain

我正在尝试使用`DelphiTwain` [(http://delphitwain.sourceforge.net/)](http://delphitwain.sourceforge.net/)获取有关我的扫描仪的一些基本信息——获取扫描仪名称和生产者非常容易，但我必须获取扫描仪状态并且找不到方法 ...

我想知道扫描仪是否在线、离线（关闭或分离）......如果可能的话，它是否正在扫描或处于错误状态。

谢谢你的帮助

```
procedure TForm1.Scan();
var i: Integer;
    Item: TListItem;
begin
    ListView1.Items.Clear;
    Twain.SourceManagerLoaded := TRUE;
    for i := 0 to Twain.SourceCount - 1 do
    begin
      if (i=0) then
          ListView1.Visible := true;
      Item := ListView1.Items.Add;
      ListView1.Items[i].Caption := Twain.Source[i].ProductName;
      With Item.SubItems do
      begin
         Add(Twain.Source[i].Manufacturer);
         Add(Twain.Source[i].VersionInfo);
         Add(Twain.Source[i].ProductFamily);
      end;
    end;
    Twain.SourceManagerLoaded := FALSE;
end; 
```

# ruby-on-rails - Sunspot Solr（或任何其他全文搜索引擎）和过滤器进行搜索

> ID：11079877
> 
> 赞同：0
> 
> 时间：2012-06-18T09:14:36.800
> 
> 标签：ruby-on-rails, ruby-on-rails-3, filter, full-text-search, sunspot

我知道如何在 rails 3.2 中使用全文搜索（我使用 sunspot solr），但我想知道你是否可以过滤特定的东西。这样您就可以缩短搜索结果的列表。

我不知道该怎么做所以这就是我问这个问题的原因:)

谢谢。

# ruby-on-rails - 模型规格是否执行控制器 before_filters？

> ID：11079878
> 
> 赞同：1
> 
> 时间：2012-06-18T09:14:39.263
> 
> 标签：ruby-on-rails, rspec

我的数据库中的第一个用户是超级管理员，我不希望任何人能够编辑与该帐户关联的电子邮件地址，所以我有以下模型规范，但它失败了。

```
# from my User model spec 
describe "super admin" do
 let(:super_admin){ FactoryGirl.create(:admin, email: "test@email.com") }
 it "can't be edited by anyone" do
    expect do
      super_admin.update_attributes(email: 'email@test.com')
    end.not_to change(super_admin, :email)
  end
end 
```

我的控制器有一个 before 过滤器，它重定向任何尝试编辑第一个数据库条目的用户（超级管理员）。

我担心上面的测试失败了。当编辑这个特定用户被控制器锁定时，我在模型中测试它是错误的，还是我仍然希望它通过，无论它是在请求规范还是模型规范中？

PS - 用户模型具有电子邮件（字符串）和管理员（布尔）字段。SuperAdmin 只是数据库中的第一个用户，恰好是管理员，没什么花哨的

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T09:23:14.220

如果“任何人都无法编辑”行为存在于 User 模型中，那么我认为`models/user_spec.rb`这是一个进行测试的好地方，但如果逻辑实际上并不存在于模型中，那么规范为什么要完全关注模型?

您将逻辑放在控制器中，所以如果我是您，我会将针对该行为的规范放在控制器规范中。

并实际回答您的问题：不，模型规范不会执行控制器 before_filters，因为它们不会触及任何控制器代码。

# mysql - （为什么）MySQL 在这种情况下不能使用索引吗？

> ID：11079884
> 
> 赞同：7
> 
> 时间：2012-06-18T09:15:13.960
> 
> 标签：mysql, database, indexing

1 -`PRIMARY`用于二级索引，例如 ( `PRIMARY`, `column1`)上的二级索引

2 - 我知道，一旦将一个部分用于范围扫描，mysql就无法继续使用索引的其余部分，但是：`IN (...,...,...)`不被视为范围，是吗？是的，它是一个范围，但我在 mysqlperformanceblog.com 上读过它的`IN`行为与`BETWEEN`索引的使用不同。

谁能证实这两点？或者告诉我为什么这是不可能的？或者怎么可能？

更新：

链接：
[http ://www.mysqlperformanceblog.com/2006/08/10/using-union-to-implement-loose-index-scan-to-mysql/](http://www.mysqlperformanceblog.com/2006/08/10/using-union-to-implement-loose-index-scan-to-mysql/)
[http://www.mysqlperformanceblog.com/2006/08/ 14/mysql-followup-on-union-for-query-optimization-query-profiling/comment-page-1/#comment-952521](http://www.mysqlperformanceblog.com/2006/08/14/mysql-followup-on-union-for-query-optimization-query-profiling/comment-page-1/#comment-952521)

更新 2：嵌套 SELECT 的示例：

```
SELECT * FROM user_d1 uo 
WHERE EXISTS (
    SELECT 1 FROM `user_d1` ui
    WHERE ui.birthdate BETWEEN '1990-05-04' AND '1991-05-04'
    AND ui.id=uo.id
)    
ORDER BY uo.timestamp_lastonline DESC
LIMIT 20 
```

因此，外部`SELECT`用于`timestamp_lastonline`排序，内部`PK`用于与外部连接或`birthdate`用于过滤。

如果 MySQL 不能在范围扫描和排序中使用索引，那么除了这个查询还有什么其他选项？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T18:36:11.137

主键的列当然可以在二级索引中使用，但通常不值得。主键保证唯一性，因此在它之后列出的任何列都不能用于范围查找。唯一有帮助的时候是查询可以单独使用索引

至于您的嵌套选择，额外的复杂性不应超过最简单的查询：

```
SELECT * FROM user_d1 uo 
WHERE uo.birthdate BETWEEN '1990-05-04' AND '1991-05-04'
ORDER BY uo.timestamp_lastonline DESC
LIMIT 20 
```

MySQL 将根据它认为最有可能扫描更少行的`birthdate`索引或索引之间进行选择。`timestamp_lastonline`在任何一种情况下，该列都应该是索引中的第一个。该`birthdate`索引还将进行排序惩罚，但如果大量近期用户的出生日期超出该范围，则可能是值得的。

如果您希望控制顺序或潜在地提高性能，a `(timestamp_lastonline, birthdate)`or `(birthdate, timestamp_lastonline)`index 可能会有所帮助。如果没有，并且您确实需要首先根据生日进行选择，那么您应该从内部查询中进行选择，而不是对其进行过滤：

```
SELECT * FROM (
    SELECT * FROM user_d1 ui
    WHERE ui.birthdate BETWEEN '1990-05-04' AND '1991-05-04'
) as uo
ORDER BY uo.timestamp_lastonline DESC
LIMIT 20 
```

即使这样，如果 MySQL 的优化器找到`timestamp_lastonline`索引但没有`birthdate`索引，它可能会选择重写您的查询。

是的，`IN (..., ..., ...)`行为不同于`BETWEEN`. 只有后者可以有效地对索引使用范围扫描；前者会单独查找每个项目。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T09:21:40.927

2.`IN`明显不同`BETWEEN`。如果您对该列有索引，`BETWEEN`则需要获取起点并且一切都完成了。如果您有，它将按值在索引值中查找匹配值，因此与的一次查找`IN`相比，它将查找值的次数与有值的次数一样多。`BETWEEN`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-19T17:15:49.643

1.  是的@Andrius_Naruševičius 是对的*IN*语句只是*EQUALS OR EQUALS OR EQUALS*的简写，因为 BETWEEN 是一个隐含大于或小于的比较运算符，因此绝对喜欢索引

2.  老实说，我不知道你在说什么，但似乎你在问一个很好的问题，我只是不知道它是什么:-)。您是说主键不能包含第二个索引吗？因为它绝对可以。主键永远不需要被索引，因为它总是自动索引，所以如果你收到关于补充索引的错误/警告（我假设你是？）那么它不是第二个，第三个索引导致它是 PRIMARY KEY 不需要它，你提到这可能是错误。话虽如此，我不知道您问了什么问题-这是我对您的实际问题的最佳猜测的回答。

# c++ - 如何在 C++ 中将多维 int 数组映射到字符串时在 map 上实现查找或计数？

> ID：11079892
> 
> 赞同：-3
> 
> 时间：2012-06-18T09:15:40.230
> 
> 标签：c++, map

我最初的问题是如何将多维 int 数组映射到字符串。以下是解决方案：感谢 Ikspeto

```
 map<int , map<int,string>> _myvar;
    _myvar[0][0] = "Some String00";
    _myvar[0][1] = "Some String01";
    _myvar[0][2] = "Some String02";
    _myvar[1][0] = "Some String10"; 
```

现在我的问题是如何在这个上实现 map 的 find 或 count 方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T09:23:55.830

我不太了解你的问题，但我认为这就是你要找的：

```
#include <string>
#include <iostream>
#include <map>

using namespace std;

int main()
{
   map<int, map<int, string> > m; 

   m[0][0] = "one";
   m[1][3] = "two";
   cout<<m[0][0]<<endl;
   cout<<m[1][3]<<endl;
} 
```

请注意，您必须在 string> 之后留一个空格。

或者

如果要将每个字符转换为 int ：

```
#include <string>
#include <iostream>

using namespace std;

int main()
{
   string s;
   s = "one";

   int arr[2][10];

   int a = s.size();
   for(int i=0;i<a;i++)
   {
       arr[0][i] = s[i];
   }

   cout<<arr[0][0]<<" "<<(char)arr[0][1]<<endl;
} 
```

编辑

发布您的完整源代码。我的示例在我的本地编译器上工作。在您提供的代码示例中，您声明了一个名为 _menu_item 的变量，但您使用的是 _myvar。您可能在完整代码的某处以不同方式声明了 _myvar。

要通过第一个值查找地图条目，您可以使用 find()。Find 返回一个迭代器。

```
#include <string>
#include <iostream>
#include <map>

using namespace std;

int main()
{
    map<int , map<int,string> > _myvar, my;
    _myvar[0][0] = "Some String00";
    _myvar[0][1] = "Some String01";
    _myvar[0][2] = "Some String02";
    _myvar[1][0] = "Some String10";

    map<int , map<int,string> >::iterator it; /* This is an iterator for this kind of map.
    You can use it to assign a position to it from the map. */

    it = _myvar.find(0); //Like this
    _myvar.erase (it); // And use it for example like this

    _myvar[3] = _myvar.find(0)->second ; // The pointer ->second gives the second value of the map. In this case an another map.

} 
```

要按值搜索，您可以使用：

```
for (it = _myvar.begin(); it != _myvar.end(); ++it)
{
    if (it->second == value)
    {
        key = it->first;
        break;
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-18T09:24:55.317

如果要将字符串直接存储在二维数组中，可以使用：

```
std::string _myvar[10][20] 
```

如果你想要一个指向 C 字符串的 (const) 指针数组，那么：

```
char* _myvar[10][20];
// or
const char* _myvar[10][20]; 
```

如果您想要一个动态大小的数组，请使用`vector<vector<string>>`（或`boost::multi_array` 也许）

# tcl - -i 标志在期望中是什么意思？

> ID：11079895
> 
> 赞同：0
> 
> 时间：2012-06-18T09:15:56.167
> 
> 标签：tcl, expect

我看到一些代码`exp_send -i $bash_id "/bin/tcsh"`，是什么 `-i flag`意思？后面的 -i 标志是什么意思`exp_send`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-18T12:46:14.297

Expect 允许您一次生成多个进程，然后以混合方式与它们交互。这是一个非常强大的机制，但它确实意味着当你说`exp_send`去往或去往`expect`时，你必须说出你在说什么。这是通过使用`-i`标志来指定*spawn id*`spawn`来完成的，它在创建子进程时返回。

当只有一个子进程时，`-i`可以省略，因为`spawn_id`默认使用全局变量。

# android - android 4.0 - 如何使用黑色主题获取底部菜单按钮？

> ID：11079898
> 
> 赞同：0
> 
> 时间：2012-06-18T09:16:00.067
> 
> 标签：android

我正在尝试创建一个具有以下内容的 android 应用程序：

*   主题设置为@android:style/Theme.Black
*   除一项活动外，所有活动上的底部选项菜单按钮。

我试图通过在 OnCreateOptionsMenu 方法中返回 false 来从我不希望它出现的活动中删除底部菜单按钮。这行不通...

因此，如果我将我的应用程序编译为以 sdk 版本 14 为目标，则菜单将从每个活动中消失...

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T11:07:33.777

假设您正在考虑标准的 Android 菜单按钮，则无法将其删除。请记住，在许多旧手机上，这是一个硬件（物理）按钮。

我建议阅读我在以下链接中收到的建议，关于 MENU 按钮以及与从早期版本的 Android 到 ICS 的更改有关的各种问题。

[处理新版本 Android（3.x 及更高版本）中缺少的 MENU 按钮](https://stackoverflow.com/questions/8774317/the-missing-menu-button-in-honeycomb-and-ice-cream-sandwich)

另外，我会注意以下来自谷歌的官方信息，并强烈考虑重建应用程序以不依赖于 MENU 按钮。

[http://android-developers.blogspot.no/2012/01/say-goodbye-to-menu-button.html](http://android-developers.blogspot.no/2012/01/say-goodbye-to-menu-button.html)

> 您的应用程序不仅应该停止依赖硬件菜单按钮，而且您应该完全停止使用“菜单按钮”来考虑您的活动。

# sharepoint - 将甘特图视图添加到 XML 中的自定义列表模板。 不部署

> ID：11079904
> 
> 赞同：2
> 
> 时间：2012-06-18T09:16:11.223
> 
> 标签：sharepoint, sharepoint-2010

在 Sharpoint 2010 项目中，我有一个自定义内容类型，它继承了标准任务内容类型，以及一个自定义列表模板，其中包含此内容类型的项目（一切都在 XML 和代码中完成，而不是“点击”）。

我想将甘特图添加到我的列表中。我可以使用 Web 界面来完成，但我想在代码中使用它。所以我手动完成了它，打开了 Sharepoint Manager，预览了视图架构，并进行了微小但必要的修改，将其复制到我的列表架构中。所以我最终得到了一个看起来不像这样的视图：

```
 <View WebPartZoneID="Main" Type="GANTT" DisplayName="Gantt Chart" Url="gantt.aspx" Level="1" BaseViewID="1" ContentTypeID="0x" ImageUrl="/_layouts/images/issues.png" SetupPath="pages\viewpage.aspx">
    <Query>
      <OrderBy>
        <FieldRef Name="ID" />
      </OrderBy>
    </Query>
    <ViewFields>
      <FieldRef Name="Attachments" />
      <FieldRef Name="ID" />
      <FieldRef Name="DocIcon" />
      <FieldRef Name="LinkTitle" />
      <FieldRef Name="AssignedTo" />
      <FieldRef Name="Status" />
      <FieldRef Name="Priority" />
      <FieldRef Name="StartDate" />
      <FieldRef Name="DueDate" />
      <FieldRef Name="MyCustomField" />
      <!-- other FieldRefs for my custom fields -->
    </ViewFields>
    <ViewData>
      <FieldRef Name="StartDate" Type="GanttStartDate" />
      <FieldRef Name="DueDate" Type="GanttEndDate" />
      <FieldRef Name="Title" Type="GanttTitle" />
      <FieldRef Name="PercentComplete" Type="GanttPercentComplete" />
      <FieldRef Name="Predecessors" Type="GanttPredecessors" />
    </ViewData>
    <RowLimit Paged="TRUE">30</RowLimit>
    <Aggregations Value="Off" />
  </View> 
```

但这不起作用。该视图在列表中可见，但是当我打开它时，会出现一个空白页面。由于某种原因，当我在 Sharepoint Manager 中预览自定义视图时，`<ViewData>`标签不存在。我可以在 Sharepoint Manager 中手动添加这个标签，然后视图神奇地开始工作。但是，由于某种原因，该标签并未与视图的其余部分一起部署。

关于如何部署标签的任何建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T10:01:35.697

我不确定您的声明有什么问题，但我能够将工作定义添加到架构中。这是我的定义：

```
<View BaseViewID="9" Type="GANTT" WebPartZoneID="Main" DisplayName="Gantt view" SetupPath="pages\viewpage.aspx" ImageUrl="/_layouts/images/issues.png" Url="Gantt.aspx" ReqAuth="TRUE">
        <Toolbar Type="Standard" />
        <XslLink Default="TRUE">main.xsl</XslLink>
        <RowLimit Paged="TRUE">30</RowLimit>
        <ViewFields>
          <FieldRef Name="LinkTitle" />
          <FieldRef Name="AssignedTo" />
          <FieldRef Name="TaskGroup" />
          <FieldRef Name="Status" />
          <FieldRef Name="Priority" />
          <FieldRef Name="DueDate" />
          <FieldRef Name="PercentComplete" />
          <FieldRef Name="Predecessors" />
          <FieldRef Name="Comments" />
        </ViewFields>
        <ViewData>
          <FieldRef Name="StartDate" Type="GanttStartDate"/>
          <FieldRef Name="DueDate" Type="GanttEndDate"/>
          <FieldRef Name="Title" Type="GanttTitle"/>
          <FieldRef Name="PercentComplete" Type="GanttPercentComplete"/>
          <FieldRef Name="Predecessors" Type="GanttPredecessors"/>
        </ViewData>
        <ParameterBindings>
          <ParameterBinding Name="NoAnnouncements" Location="Resource(wss,noXinviewofY_LIST)" />
          <ParameterBinding Name="NoAnnouncementsHowTo" Location="Resource(wss,noXinviewofY_DEFAULT)" />
        </ParameterBindings>
        <Query>
          <OrderBy>
            <FieldRef Name="Title"></FieldRef>
          </OrderBy>
        </Query>
      </View> 
```

请注意 BaseViewID 在范围内应该是唯一的，我不使用 ContentTypeID。此外，计算和计算字段在这里不起作用，因此您应该创建新的简单文本字段并将它们填充到事件接收器中。

# mysql - Doctrine2 "MEMBER OF" 子句对 MySQL 数据库有效吗？

> ID：11079905
> 
> 赞同：7
> 
> 时间：2012-06-18T09:16:12.800
> 
> 标签：mysql, sql, doctrine-orm

Doctrine2 DQL 允许以下[SQL](http://docs.doctrine-project.org/projects/doctrine-orm/en/2.0.x/reference/dql-doctrine-query-language.html)：

```
$query = $em->createQuery('SELECT u.id FROM CmsUser u WHERE :groupId MEMBER OF u.groups');
$query->setParameter('groupId', $group);
$ids = $query->getResult(); 
```

MySQL 数据库是否支持**MEMBER OF子句？**

此外，关注前面的例子，$group 是实体“Group”的 id 还是“Group”实体本身的实例？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-18T09:22:48.067

`MEMBER OF`是一个纯粹的 ORM 条款，与它无关，`DBAL`因此它应该适用于任何供应商。

`MEMBER OF`应该接受一个实体，但也可能接受一个`identifier`。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2014-08-13T16:08:34.290

我检查了`SQL`生成的 with`MEMBER OF`子句：

```
SELECT *fields*
    FROM Page p0_ 
    WHERE 
       EXISTS (
          SELECT 1 
          FROM post_rubric p4_ 
          INNER JOIN Page p3_ 
             ON p4_.rubric_id = p3_.id 
          WHERE p4_.post_id = p0_.id AND p3_.id = ?
       ) 
```

这就是 Doctrine 将`MEMBER OF`子句翻译成的一种方式`SQL`

# solr - Solr 架构和工作流程

> ID：11079908
> 
> 赞同：1
> 
> 时间：2012-06-18T09:16:42.353
> 
> 标签：solr, search-engine

我正在考虑为我们的电子商务项目实施 Solr。我想要实现的是允许用户在产品标题中搜索并显示显示产品标题、产品价格、可用性和简短描述的结果页面。现在我想知道的是，我是将要在搜索结果页面上显示的信息存储在 Solr 中（即价格、描述）还是我只是从 solr 获取产品 ID 并从数据库中检索产品？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T09:32:30.323

你可以两者都做。

如果您将值存储在 Solr 中并简单地通过搜索结果检索它们，您可能更容易实现解决方案（尽管其他选项也很容易实现）。

无论您选择哪种方式，都必须考虑数据库和 Solr 之间的同步，因此请查看以下内容：
[http ://wiki.apache.org/solr/DataImportHandler#Scheduling](http://wiki.apache.org/solr/DataImportHandler#Scheduling)
[http://wiki.apache.org/solr/近实时搜索](http://wiki.apache.org/solr/NearRealtimeSearch)

# xslt - XSLT/XPath 引用：XSLT 内的 XPath-Function 内的 XPath

> ID：11079911
> 
> 赞同：0
> 
> 时间：2012-06-18T09:16:50.607
> 
> 标签：xslt, xpath, quotes

这里我们在 XSLT 级别使用双引号；XPath 函数级别的单引号，但是当我们需要在 XPath 函数中嵌入 XPath 表达式时，我们如何引用它？

```
 <xsl:value-of select="document('price-list.xml','/im_prices/row/UPC_Code[text()='abc']"/>
                                                                                 ^^^^^ 
```

（向右滚动）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T09:27:05.840

不确定，我一直使用以下节点集形式：

```
<xsl:value-of select="document('price-list.xml')/im_prices/row/UPC_Code[text()='abc']"/> 
```

但这可能是特定于供应商的（但是，从来不知道它不起作用！）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T12:08:05.197

document() 的第二个参数是一个节点集，而不是一个字符串，所以应该不会出现问题。但是，当然还有其他可能出现的情况。

在 XSLT 2.0 中：

*   如果要在字符串中包含属性分隔符，请将其转义为`&quot;`或`&apos;`

*   如果要在字符串中包含字符串分隔符，请将其加倍为 '' 或 ""。

在 XSLT 1.0 中，第二个选项不可用。你也可以绕过它

(a) 通过交换用于属性分隔符和字符串分隔符的字符

(b) 通过使用 concat() 构建字符串

# android - Android NDK 溢出 dalvik JNI 本地引用表

> ID：11079912
> 
> 赞同：14
> 
> 时间：2012-06-18T09:17:04.173
> 
> 标签：android, java-native-interface, dalvik, android-ndk

我有以下问题，从 c++ 我将巨大的字符串 [] 发送到 java。巨大的 = 最多 20 行；我正在做以下事情

```
jint jtype = 2;
jstring emptyString = env->NewStringUTF("");
jobjectArray data = (jobjectArray)env->NewObjectArray(7, env->FindClass("java/lang/String"), emptyString);

env->SetObjectArrayElement( data,0,env->NewStringUTF(item->get_id().c_str());
env->SetObjectArrayElement( data,1,env->NewStringUTF(item->get_number().c_str());
env->SetObjectArrayElement( data,2,env->NewStringUTF(item->get_fullname().c_str());
env->SetObjectArrayElement( data,3,env->NewStringUTF(item->get_mf().c_str());
env->SetObjectArrayElement( data,4,env->NewStringUTF(item->get_dob().c_str());
env->CallVoidMethod(dao, jsaveItem, data, jtype);
int i;
for (i = 0; i < 5; ++i) {
   jstring string = (jstring) env->GetObjectArrayElement(data, i);
   env->DeleteLocalRef(string);
}
env->DeleteLocalRef(emptyString);
env->DeleteLocalRef(data);
env->DeleteLocalRef(dao); 
```

这是在一个循环中发生的，所以我正在为要保存在数据库中的每个对象执行此操作，因此您可以想象，它发生了很多次。

所以我很体贴虚拟机并删除了我创建的每个字符串的本地引用，但我仍然得到：

```
 ReferenceTable overflow (max=512)
Last 10 entries in JNI local reference table:
  502: 0x40552880 cls=Ljava/lang/String; (28 bytes)
  503: 0x405528b8 cls=Ljava/lang/String; (28 bytes)
  504: 0x4051f8d0 cls=Ljava/lang/Class; 'Lcom/project/storage/userdata/DataDao;' (212 bytes)
  505: 0x4052eb38 cls=Lcom/project/storage/userdata/DataDao; (12 bytes)
  506: 0x4051f8d0 cls=Ljava/lang/Class; 'Lcom/project/storage/userdata/DataDao;' (212 bytes)
  507: 0x4052eb38 cls=Lcom/project/storage/userdata/DataDao; (12 bytes)
  508: 0x4051f8d0 cls=Ljava/lang/Class; 'Lcom/project/storage/userdata/DataDao;' (212 bytes)
  509: 0x4052eb38 cls=Lcom/project/storage/userdata/DataDao; (12 bytes)
  510: 0x4051f8d0 cls=Ljava/lang/Class; 'Lcom/project/storage/userdata/DataDao;' (212 bytes)
  511: 0x4052eb38 cls=Lcom/project/storage/userdata/DataDao; (12 bytes)
JNI local reference table summary (512 entries):
   58 of Ljava/lang/Class; 212B (1 unique)
    1 of Ljava/lang/Class; 236B
   25 of Ljava/lang/Class; 284B (1 unique)
    1 of Ljava/lang/Class; 572B
  392 of Ljava/lang/String; 28B (392 unique)
    1 of Ljava/lang/String; 36B
    1 of [Ljava/lang/String; 28B
    2 of [Ljava/lang/String; 92B (2 unique)
   31 of Lcom/project/storage/userdata/DataDao; 12B (1 unique)
Memory held directly by tracked refs is 12540 bytes 
```

关于为什么会发生溢出的任何想法？我究竟做错了什么？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-06-18T09:42:28.203

尝试使用后立即删除本地引用。像这样：

```
jstring string;
string = env->NewStringUTF(item->get_id().c_str());
env->SetObjectArrayElement( data,0,string);
env->DeleteLocalRef(string);
string = env->NewStringUTF(item->get_number().c_str());
env->SetObjectArrayElement( data,1,string);
env->DeleteLocalRef(string);
string = env->NewStringUTF(item->get_fullname().c_str());
env->SetObjectArrayElement( data,2,string);
env->DeleteLocalRef(string);
string = env->NewStringUTF(item->get_mf().c_str());
env->SetObjectArrayElement( data,3,string);
env->DeleteLocalRef(string);
string = env->NewStringUTF(item->get_dob().c_str());
env->SetObjectArrayElement( data,4,string);
env->DeleteLocalRef(string);
env->CallVoidMethod(dao, jsaveItem, data, jtype); 
```

我不确定 GetObjectArrayElement() 是返回相同的 localref 还是创建一个新的。如果它正在创建一个新的，那么这将解释你为什么要填充 localref 表。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-18T13:14:45.360

@Davids 的回答是正确的。由于对正在创建的临时字符串的引用`NewStringUTF`丢失了，因此本地引用表中的空间不足。如果您查看错误消息，您会看到

> Ljava/lang/String的392；28B（392 唯一）

您正在创建的引用 NewStringUTF 对象是“匿名的”并且将会丢失。通过删除对您的引用，`data`您只是删除了对数组的引用。在函数退出之前，字符串仍将保留在内存中。我也觉得`emptyString`作为参数传递`NewObjectArray`是多余的，NULL也可以

# php - 如何在 cron 作业中以编程方式更改订单状态？

> ID：11079915
> 
> 赞同：2
> 
> 时间：2012-06-18T09:17:14.930
> 
> 标签：php, magento, magento-1.6

我正在使用 cron 作业将所有“待处理”网上银行订单更改为“待付款”
（这是为了解决我的问题：[为什么在网关取消订单的状态未转换为“payment_pending”？](https://stackoverflow.com/q/11078751/558094)）

这是我的代码- **[编辑]**

```
const MINUTES_DELAY = 15; //Orders younger than this are not changed

public function run() {

  //      date_default_timezone_set('Asia/Kolkata');
  $old_time = time() - (self::MINUTES_DELAY*60);
  $out = date('d.m.y h:i:s A', $old_time)."\n";
  $out .= date('d.m.y h:i:s A')."\n";
  file_put_contents('/home/vinayak/cron.txt', '1'.$out, FILE_APPEND); //Out1

  $orders = Mage::getModel('sales/order')->getCollection()
    ->addFieldToFilter('status', 'pending')
    ->addFieldToFilter('cod_fee', array('null' => true))
    ->addAttributeToSelect('customer_email')
    ->addAttributeToSelect('created_at')
    ;
  foreach ($orders as $order) {
    if (strtotime($order->getCreatedAt()) < $old_time){
      $order->setState('pending_payment', true)->save();
      $out .= $order->getCustomerEmail()." @ ".$order->getCreatedAt()."\n";
    }
  }
  file_put_contents('/home/vinayak/cron.txt', '2'.$out, FILE_APPEND); //Out2

  return true;
} 
```

我检查了 cron 是否正常工作。但是状态/状态没有改变。我现在**没有**收到错误。

**[编辑]**现在的问题 - 我在代码中将输出标记为“out1”，但不是“out2”

更改代码后，我看到，只要`if`条件为真，就会出现问题（上图）。这指出了该行的问题`$order->setState('pending_payment', true)->save();`（我已经注释掉了 中的另一行`if`，问题仍然存在，但是如果我注释掉这一行 out2 会被打印出来）。似乎执行卡在这一行（无限循环？或一些内部问题？）

有什么问题`$order->setState('pending_payment', true)->save();`？还有其他方法可以完成上述事情吗？

~~我是否也可以按订单“创建时间”进行过滤，这样我就不会更改几秒钟前创建的订单的状态。~~[解决了]

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T12:46:56.353

只是试着把`$order->setState('pending_payment'); $order->setStatus('pending_payment'); $order->save();` 我认为你没有改变可能造成问题的订单状态。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T17:50:30.070

我还没有掌握 Zend 查询，所以在直接与数据库交互时，我总是编写正确的 MySQL 查询。请记住，在更新版本的 Magento 之前，订单状态是不灵活的（除非您购买扩展程序）。

```
mysql> select status from sales_flat_order group by status;
+-----------------+
| status          |
+-----------------+
| canceled        | 
| closed          | 
| complete        | 
| pending         | 
| pending_payment | 
| processing      | 
+-----------------+
6 rows in set (0.00 sec)
mysql> select state from sales_flat_order group by state;

+-----------------+
| state           |
+-----------------+
| canceled        | 
| closed          | 
| complete        | 
| new             | 
| pending_payment | 
| processing      | 
+-----------------+
6 rows in set (1.03 sec) 
```

为了帮助自己理解表结构，我编写了一个[php 脚本来制作一个包含 fields 的所有表的 CSV](https://github.com/cacycleworks/mySql_tables_to_csv)。所以你可以用`SELECT entity_id, state, status, created_at, increment_id FROM sales_flat_order WHERE status="pending"`. 我查看并没有在我的 1.4.2 安装中存在的任何字段名中看到“cod_fee”。注意上述查询的输出格式：

```
SELECT entity_id, state, status, created_at, increment_id FROM sales_flat_order WHERE status="pending";
+-----------+------------+---------+---------------------+--------------+
| entity_id | state      | status  | created_at          | increment_id |
+-----------+------------+---------+---------------------+--------------+
|      2493 | new        | pending | 2011-09-14 18:09:47 | 200025332    | 
|      2683 | complete   | pending | 2011-10-04 17:19:07 | 200025523    | 
|      2686 | new        | pending | 2011-10-04 20:43:52 | 200025526    | 
|      3022 | processing | pending | 2011-11-15 01:11:34 | 200025849    | 
|      3428 | complete   | pending | 2012-01-12 17:56:57 | 200026236    | 
|      4493 | processing | pending | 2012-04-11 16:16:55 | 200027230    | 
|      5071 | new        | pending | 2012-05-21 18:05:43 | 200027759    | 
|      5091 | new        | pending | 2012-05-22 17:48:11 | 200027779    | 
   ...
|      5399 | new        | pending | 2012-06-14 17:46:46 | 200028069    | 
|      5443 | new        | pending | 2012-06-18 18:50:55 | 200028111    | 
|      5486 | new        | pending | 2012-06-20 21:18:24 | 200028152    | 
|      5491 | new        | pending | 2012-06-20 23:54:53 | 200028157    | 
+-----------+------------+---------+---------------------+--------------+
23 rows in set (0.79 sec) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-21T05:04:39.873

终于解决了我的问题。现在这项工作完全按照预期工作！

这是工作程序-

```
 const MINUTES_DELAY = 15; //Orders younger than this are not changed
  const OUT_FILE = '/home/vinayak/cron.txt';

  public function run() {
    $old_time = time() - (self::MINUTES_DELAY*60);

    $out = "-------------------------------------------\n";
    $out .= date('d.m.y h:i:s A')."\n";

    $orders = Mage::getModel('sales/order')->getCollection()
      ->addFieldToFilter('status', 'pending')
      ->addFieldToFilter('cod_fee', array('null' => true))
      ;

    foreach ($orders as $order) {
      if (strtotime($order->getCreatedAt()) < $old_time)  {
        try{
          $id = $order->getIncrementId();

          Mage::getModel('sales/order')
            ->loadByIncrementId($id)
            ->setState('pending_payment', true)
            ->save();

          $out .= $id."\n";
        } catch (Exception $e)  {
          $out .= "Caught exception : ".$e->getMessage()."\n";
        }
      }
    }
    file_put_contents(self::OUT_FILE, $out, FILE_APPEND);
    return true;
  } 
```

希望这可以帮助某人。

# android - 如何刷新网址并加载新图片

> ID：11079919
> 
> 赞同：0
> 
> 时间：2012-06-18T09:17:26.013
> 
> 标签：android, url, view, timer

我正在尝试使用计时器来刷新互联网上的图像。

这是我的代码：

```
public class ProjectActivity extends Activity {
/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    BannerActivity ba = new BannerActivity(this);
    LinearLayout layout = (LinearLayout)findViewById(R.id.main_layout);
    layout.addView(ba);
}

public class BannerActivity extends ImageButton implements OnClickListener{
    URL url = null;
    public BannerActivity(Context context) {
        super(context);
        setLayoutParams(new LayoutParams(ViewGroup.LayoutParams.MATCH_PARENT, 300));
        loadimage();
        Timer timer = new Timer();
        timer.schedule(new TimerTask() {
            public void run() {
                loadimage();
            }   
            }, 5000, 1000);
    }

    private void loadimage(){
        try {
            url = new URL("http://3.bp.blogspot.com/_9UYLMDqrnnE/S4UgSrTt8LI/AAAAAAAADxI/drlWsmQ8HW0/s400/sachin_tendulkar_double_century.jpg");
        } catch (MalformedURLException e) {
            e.printStackTrace();
        }
        InputStream content = null;
        try {
            content = (InputStream)url.getContent();
        } catch (IOException e) {
            e.printStackTrace();
        }
        final Drawable d = Drawable.createFromStream(content , "src"); 
        setBackgroundDrawable(d);

        setOnClickListener(this);
    } 
```

我得到的错误是这样的：

```
CalledFromWrongThreadException: Only the original thread that created a view
hierarchy can touch its views. 
```

我是新手，不知道这意味着什么或如何解决它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T09:21:45.217

您要从非 UI 线程中更改 UI，这在 Android 中是不可能的。Instaed od 调用此方法 **setBackgroundDrawable(d);** 在 Timer 的 run 方法中，将其包围在 runonUiThread() 中。

```
contextObj.runOnUiThread(new Runnable() {

        public void run() {
            // TODO Auto-generated method stub
            setBackgroundDrawable(d);
        }
    }); 
```

尝试获取您的活动的上下文，然后像这样更改您的 LoadImage()，

```
private void loadimage(){
    try {
        url = new URL("http://3.bp.blogspot.com/_9UYLMDqrnnE/S4UgSrTt8LI/AAAAAAAADxI/drlWsmQ8HW0/s400/sachin_tendulkar_double_century.jpg");
    } catch (MalformedURLException e) {
        e.printStackTrace();
    }
    InputStream content = null;
    try {
        content = (InputStream)url.getContent();
    } catch (IOException e) {
        e.printStackTrace();
    }
    final Drawable d = Drawable.createFromStream(content , "src"); 
    contextObj.runOnUiThread(new Runnable() {

        public void run() {
            // TODO Auto-generated method stub
            setBackgroundDrawable(d);
        }
    });

    setOnClickListener(this);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T09:22:53.110

Activity 类是一个线程。如果您尝试在没有 Handler 的情况下在活动中创建线程，则会给出 ThreadException。因此，添加一个 Handler 来处理这个新线程。

谢谢

# javascript - 需要使用javascript修剪表单中的所有元素

> ID：11079920
> 
> 赞同：9
> 
> 时间：2012-06-18T09:17:28.930
> 
> 标签：javascript, jquery, forms

我需要从表单的文本元素中修剪所有尾随空格。我需要以最少的步骤完成。一旦我按下提交，它应该修剪所有的空白，然后执行进一步的操作。有没有可用的脚本？如果没有，那么请您帮助我实现我的目标。目前我需要手动识别每个元素，然后执行修剪。

```
var username = myform.elements['username'].value;
username.trim(); 
```

如何概括它？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-06-18T09:20:10.090

```
$('input').val(function(_, value) {
   return $.trim(value);
}); 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-06-18T09:20:05.333

```
 $("form").children().each(function(){
this.value=$(this).val().trim();
}) 
```

将修剪表单标签内的所有文本框和文本区域，但不要在表单内编写不必要的代码。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-18T09:20:19.967

采用

```
var allInputs = $(":input"); 
```

获取所有表单元素。迭代使用每个函数并修剪它。

会是这样的（未测试）

```
var allInputs = $(":input"); 
allInputs.each(function() {
        $(this).val($.trim($(this).val()));
    }); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-06-18T09:20:44.287

```
$('#yourformid').submit(function(){
 $(':input').each(function(){
   $(this).val($.trim($(this).val()))
})
  return true;
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-09-16T09:43:35.703

```
$('#formid').find('input:text').each(function(){
                $(this).val($.trim($(this).val()));
 }); 
```

# facebook - 从 QtQuick 应用程序在 facebook 和 twitter 上共享图像

> ID：11079925
> 
> 赞同：3
> 
> 时间：2012-06-18T09:17:39.017
> 
> 标签：facebook, qt, twitter, nokia, qml

我有一个诺基亚 Qt 应用程序（QtQuick QML 应用程序），它应该在 facebook 和 twitter 上共享图像。有什么办法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-18T09:23:07.563

简单的回答，是的。

长答案，是的。您需要决定如何发布它，但 Facebook 和 Twitter 都公开了用于将图像上传到其服务的 API，或者您可以将其发布到 YFrog 或 TwitPic 等图像托管服务，然后将返回的 URL 与 Facebook 一起使用和 Twitter API 来共享链接。

我不确定在 Facebook 上，但肯定有一个 Twitter Qt 库会很好玩，我假设 Facebook 有一个，但我从来不需要研究一个。

编辑：这是我之前看过的 Qt Twitter 库，不得不深入研究我的 GitHub 书签[https://github.com/minimoog/QTweetLib](https://github.com/minimoog/QTweetLib)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-18T10:42:28.200

您可以在 Facebook 上执行操作，也可以在 Facebook Graph 上描述 api 可以由 javascript QML 使用

# java - 包括一个使用 gradle 的 jar

> ID：11079931
> 
> 赞同：0
> 
> 时间：2012-06-18T09:17:56.323
> 
> 标签：java, jar, compilation, gradle

使用 gradle 时，你如何做相当于将 jar 添加到类路径？

我一直在搜索和阅读文档，但我无法编译它。

编辑：正如下面所指出的，实际上之前有一个关于这个问题的问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T08:06:20.347

如果您计划稍后切换到真正的存储库，您可以首先在本地库文件夹中定义一个存储库，遵循与任何其他 Maven 存储库使用的类似约定：

```
repositories {
  flatDir name: "local-lib", dirs: "$projectDir/lib"
}

dependencies {    
  compile ':avalon-framework-api:4.3.1'
  compile ':avalon-framework-impl:4.3.1'
} 
```

`lib`文件夹内容：

```
avalon-framework-api-4.3.1.jar 
avalon-framework-impl-4.3.1.jar 
```

# android - 单击android中现有布局中的按钮时，从屏幕底部为自定义布局设置动画

> ID：11079934
> 
> 赞同：0
> 
> 时间：2012-06-18T09:18:10.630
> 
> 标签：android

在我的应用程序中，我有一个有一个按钮的活动。当我单击该按钮时，它应该从屏幕底部显示自定义布局，保持父布局可见。我想使用动画来实现这一点。有人可以通过提供一些示例代码来帮助我。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T09:22:20.653

在这里您可以简单地使用**滑动抽屉**示例。请参阅以下链接。

[http://androidimran.blogspot.in/2012/06/android-slidingdrawer-example.html](http://androidimran.blogspot.in/2012/06/android-slidingdrawer-example.html)

# asp.net-mvc-3 - 如何从 mvc3 调用普通的 html 页面

> ID：11079938
> 
> 赞同：-1
> 
> 时间：2012-06-18T09:18:14.087
> 
> 标签：asp.net-mvc-3

我想通过单击 mvc 中的按钮来调用 html 页面。有没有办法从 mvc3 调用普通的 html 页面？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T09:26:39.610

然后您的按钮应如下所示：

```
<a href="path to html">Click me</a> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T09:27:09.350

在您的视图中使用锚标记，就像您通常那样：

```
<a href="/my-html-page.html">Click Me</a> 
```

# facebook - 安装 Facebook C# SDK

> ID：11079942
> 
> 赞同：0
> 
> 时间：2012-06-18T09:18:28.877
> 
> 标签：facebook, windows-phone-7, facebook-c#-sdk, windows-phone-7.1

我想在我的 windows phone 7.1 应用程序中使用 facebook 实现登录

当我尝试使用 nuget 包管理器控制台安装**Facebook C# SDK时。**它已成功添加，但是当我尝试将引用添加到我的项目时，它会出现以下错误。

![在此处输入图像描述](../Images/8d650d17b8e2d6da43380c835ed275d1.png)

我没有写任何代码或任何东西。我只想`using facebook;`在我的代码隐藏文件中添加对 facebook 的引用

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T09:31:06.323

该错误消息似乎很清楚 - 您的项目设置为面向 Windows Phone 7.1，但该版本的 Facebook SDK 不支持 Windows Phone 7.1

查看是否有支持 7.1 的 SDK 更新版本，或者将您的项目定位到 Facebook SDK 支持的版本

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T09:34:03.243

我刚刚对此进行了测试，但无法重现该错误。

确保卸载任何旧版本的 SDK。

然后，右键单击该项目并使用 nuget 添加 SDK。

不要手动安装。

# php - __autoload: 转义类名

> ID：11079952
> 
> 赞同：1
> 
> 时间：2012-06-18T09:18:46.130
> 
> 标签：php

这是我第一次尝试创建一个frontController，我遇到了一些小问题。

**首先让我给你一个印象：** 当我`http://mysite.com/test`在浏览器中打开时，服务器会调用一个带有 GET 参数 $controller (test) 的 index.php。这是由 .htaccess 完成的。在 index.php 中应该创建一个 $controller 类的实例。为此，我使用 PHP 的 __autoload 函数。所以代码看起来像这样：

```
$controller = $_GET["controller"];

function __autoload($controller)
{
    include("controllers/$controller.php");

    if(!class_exists($controller, false))
    {
        eval
        ('
            class '. $controller . '
            {
                public function __construct()
                {
                    include("404.html");
                    exit();
                }
            }
        ');
    }
}

$application = new $controller; 
```

当您查看我提供的代码时，您可能已经注意到其中的**eval()**东西。当 $controller 类不存在时，我使用它来避免致命错误，并显示 404 而不是它。

**乐趣从这里开始：**当有人输入一个类似的网址时

> [http://mysite.com/ImATroll!:D](http://mysite.com/ImATroll!:D)

将有

> 解析错误：语法错误，意外的“！”

和...

> 致命错误：找不到类 'ImATroll!:D'

**所以问题是：**我怎样才能抓住这个？如何以仅包含类名允许的字符的方式转义 $controller 变量？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-18T09:22:58.030

我会简单地**删除**该`eval`部分并在该部分直接重定向到 404。

或者构建*一个*（非动态）`404`- ContentNotFoundController 如果你愿意，只需使用 / yield 那里（当类名不存在时）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-18T09:23:43.850

为什么不在`class_exists`调用之前尝试一下`new $controller;`（class_exists会调用autoload函数），如果为false，include('404.html');

```
function __autoload($classname){

   $file = "controllers/$classname.php";
   if(is_file($file))
    include_once($file);

} 
```

...但要注意安全问题 - 例如传入 ?controller=../htpasswd。您应该通过删除所有非字母数字字符来清理类名 - 比如`$classname = preg_replace('/[^A-Za-z0-9]/', '', $classname);`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-18T09:26:39.343

只需为未找到的类创建一个类：

```
if(!class_exists($controller, false))
{
    $controller = "NotFound";
    include("controllers/NotFoundController.php");
} 
```

您还可以将允许的控制器列入白名单，并检查`in_array()`您是否识别该类名称。这样做的缺点是您必须为添加的每个类更改白名单。

您还可以编写一个过滤可能的类名的正则表达式。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-18T09:32:32.010

你实际上可以从你的自动加载函数中抛出一个异常（ps：使用[spl_autoload_register](http://de.php.net/manual/en/function.spl-autoload-register.php)代替）。

此异常是可捕获的，因此您可以提供“默认”功能。

这是迄今为止最好的方法，但如果你坚持创建这个假控制器，你应该使用 class_alias 代替。

# c - 相对路径/绝对路径查询不适用于当前目录

> ID：11079953
> 
> 赞同：0
> 
> 时间：2012-06-18T09:18:54.987
> 
> 标签：c, file, ubuntu, relative-path, absolute-path

在从当前路径遍历并搜索文件时，我在定位文件时遇到了问题。

我怀疑这`path`是由于`chdir`在下一个代码中的原因：

相关的文件夹是：

*   12,13,14 , 12 是父目录
*   13 内 12 , 14 内 13
*   david1.txt 内 14
*   **get_current_dir_name()**是一个 Linux 函数，不是我的

我从运行可执行文件`Desktop`，像这样（这里是`printf-s`为了尝试定位问题）：

```
 // doesn't work 

   a@ubuntu:~/Desktop$ ./exer4 12 david1.txt

    Current path is :12

    Current path is :/home/a/Desktop/12/13

    Current path is :/home/a/Desktop/12/13/14

//////////////////////////////////////////////////
    // doesn't work      

    a@ubuntu:~/Desktop$ ./exer4 12/13 david1.txt

    Current path is :12/13

    Current path is :/home/a/Desktop/12/13/14

////////////////////////////////////////////////
    // doesn't work 

    a@ubuntu:~/Desktop$ ./exer4 12/13/14 david1.txt

    Current path is :12/13/14 
```

如果我删除这些行：

```
chdir(path);                          // the problem is probably here 
strcpy(path, get_current_dir_name()); // and here 
```

然后每个只涉及一个库名称的查询都有效，例如：

```
// works : 

a@ubuntu:~/Desktop$ ./exer4 12 david1.txt

Current path is :12

Current path is :12/13

File found!

12/13/14/david1.txt-rw-rw-r-- 1 1000 1000 0 2012-06-17 08:10 

Current path is :12/13/14
////////////////////////////////////////////////////////////
// works 
a@ubuntu:~/Desktop$ ./exer4 12/13 david1.txt

Current path is :12/13

File found!

12/13/14/david1.txt-rw-rw-r-- 1 1000 1000 0 2012-06-17 08:10 

Current path is :12/13/14

////////////////////////////////////////////////////////////
// Doesn't work
a@ubuntu:~/Desktop$ ./exer4 12/13/14 david1.txt

Current path is :12/13/14 
```

知道我在这里做错了什么吗？我尝试过无数次更改，但没有任何修复。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T11:50:23.957

这样做时`strcpy(path, get_current_dir_name())`，您不会检查是否没有超出缓冲区。
如果`path`是`argv[1]`，您将超出堆栈。
我的猜测是您超出了文件名 ( `argv[2]`)，然后您开始寻找错误的名称（但没有找到）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-18T13:20:47.563

添加一些我的调试信息，以帮助您清楚地知道原因。

跑步前`strcpy(path, get_current_dir_name());`

```
 Breakpoint 1, traverseDirectories (path=0xbfbfeda8 "src", recursive=1, filename=0xbfbfedac "2.db") at main.c:30
    30               chdir(path);

0xbfbfeda8:     0x73    0x72    0x63    0x00    0x32    0x2e    0x64    0x62
0xbfbfedb0:     0x00    0x54    0x45    0x52    0x4d    0x3d    0x78    0x74
0xbfbfedb8:     0x65    0x72    0x6d    0x00    0x53    0x48    0x45    0x4c
0xbfbfedc0:     0x4c    0x3d    0x2f    0x75    0x73    0x72    0x2f    0x6c 
```

运行后`strcpy(path, get_current_dir_name());`

```
0xbfbfeda8:     0x2f    0x75    0x73    0x72    0x2f    0x68    0x6f    0x6d
0xbfbfedb0:     0x65    0x2f    0x6e    0x65    0x6f    0x2f    0x73    0x72
0xbfbfedb8:     0x63    0x00    0x6d    0x00    0x53    0x48    0x45    0x4c
0xbfbfedc0:     0x4c    0x3d    0x2f    0x75    0x73    0x72    0x2f    0x6c 
```

看到区别了吗？这就是您的功能无法正常工作的原因。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-18T11:59:13.750

我认为问题在于这一行：

```
if (S_ISDIR(fstat.st_mode)) 
```

你首先检查 fstat.st_mode 是否是目录，然后找到你的目标文件。如果使用 function `chdir()`，当目录更改为 12/13/14 时，它不会使条件为 false，`displayAllFiles(full_name , filename)`不会被调用。

# c# - 将多个用户添加到活动目录

> ID：11079956
> 
> 赞同：0
> 
> 时间：2012-06-18T09:19:06.160
> 
> 标签：c#, active-directory

我正在编写将与活动目录交互的 c# 代码，我的问题是是否有一种快速的方法可以将多个用户添加到一个目录条目。我对活动目录有点陌生。到目前为止我发现，我可以使用 DirectoryEntrie 类的 Add 方法来添加用户。所以，使用循环语句我可以添加多个用户。但是，我想知道......如果我有 500 个循环，这不会花很长时间吗？难道没有更好、更快的方法（比如说 Addrange(Ienumerable)），它只执行一次，但有一个列表或数组作为参数？

提前谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T09:23:20.860

从目录服务的角度来看，无法一次创建一批用户。你必须使用循环。

# java - 子类中的最终字段初始化

> ID：11079968
> 
> 赞同：2
> 
> 时间：2012-06-18T09:19:38.157
> 
> 标签：java, initialization

奇怪，但我找不到这个问题的重复项。我有一个带有 overrideMe() 方法的超类和一个覆盖它的子类。在调用子类构造函数之前，final 字段真的被初始化了吗？正如我从输出中看到的那样，它是。

下面是输出： Superclass constr str value: someValue Subclass constr str value: someValue

你能给我解释一下吗？我认为实例变量是在构造函数调用中初始化的，但不是在它之前。

这是代码：

```
public class Test {
  public Test() {
    System.out.println("Superclass constr");
    overrideMe();
  }

  public void overrideMe() {
  }
}

class Ext extends Test {
  private final String str = "someValue";

  public Ext() {
    System.out.println("Subclass constr");
  }

  @Override
  public void overrideMe() {
    System.out.println("str value: " + str);
  }

  public static void main(String[] args) {
    Ext test = new Ext();
    test.overrideMe();
  }
} 
```

**编辑：** 如果我将 str 字段声明为非最终字段，则它在构造函数中的子类调用将按我的预期返回 null。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T09:24:33.807

是的，字段在调用构造函数之前被初始化，这从重载之前的上层类开始。

这是一个一般介绍：[http ://www.linuxtopia.org/online_books/programming_books/thinking_in_java/TIJ306_014.htm](http://www.linuxtopia.org/online_books/programming_books/thinking_in_java/TIJ306_014.htm)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-01-24T07:47:44.277

带有初始化程序的最终字段将被编译器替换为 const 字符串，这就是为什么该字段似乎在超级构造函数返回之前就已初始化的原因。

如果 final 字段是空白初始化的，这意味着它是在子类的构造函数中初始化的，那么超级构造函数当然会看到一个空值。

如果该字段既不是 final 也不是 static，并且提供了一个初始化器，那么它将在超级构造函数之后和子构造函数之前进行初始化。

# c# - Silverlight，连接到不同服务器上的多个数据库

> ID：11079973
> 
> 赞同：3
> 
> 时间：2012-06-18T09:19:45.083
> 
> 标签：c#, silverlight, database-connection

我正在开发 Silverlight 4 应用程序 (C#)。

我使用 Silverlight Web 应用程序模板和实体框架开始 + VS 2010。

我现在有一个正在运行的应用程序，它连接到数据库并正确显示数据。

数据库有一张表，有 5 个属性。

所以我现在需要做什么..

1.  我有一个连接字符串来连接到外部服务器上的数据库。该数据库与我的相似，但包含更多表格和更新的信息。**我需要连接到这个数据库。**（编辑：因为这在我的项目之外，所以我不会为此拥有任何 EF，而只是有权查询单个表。（具体来说是查看））

2.  因为我知道属性名称、表等，所以使用 SELECT 查询并获取数据。所以**执行并获取结果集**。（例如“SELECT R.name, R.marks FROM results R”）。

3.  查询的结果集将存储在例如数据表中，然后**插入到我的数据库中。**

4.  我还创建了一个带有表访问器的对象类，这样我就可以**在 insert 之前为“结果集”提供结构**。

从理论上讲，当我在我的板上粉笔时这听起来是可能的，但我想知道这是否可行？

我的意思是打开 2 个数据库连接。这可能吗？如果我遵循与上述相同的步骤，我可以实现我想要的吗？

如果我不清楚任何事情，请告诉我。这只是实际应用程序的较小版本，但我需要实现的逻辑是相同的。:)

如果有更好的方法，我很乐意考虑。

干杯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T11:00:06.083

You may be over thinking this a little. I add a new class project, and add a new ADO.NET Entity Model to that project using the connection string for the second database. After that, you'll be able to reference the new EF project from your Service or Host (Web) project.

# asp.net - orchard cms全新安装没有页面或链接工作错误：找不到页面

> ID：11079976
> 
> 赞同：1
> 
> 时间：2012-06-18T09:19:57.573
> 
> 标签：asp.net, windows-xp, installation, orchardcms

下载 Orchard CMS zip 解压缩并将 Orchard 文件夹的内容放入我的 iis 根目录中的文件夹中 创建一个虚拟目录 将框架设置为 4.0 配置为将所有内容映射到 aspnet_isapi.dll 打开我的 localhost/orchard 打开 MS-Server 并设置为黑色数据库从我的 localhost\orchard 安装了 Orchard 1.4.2 所有看起来不错的表都已制作并欢迎访问 orchard 主页单击仪表板并出现错误页面无法找到！

有人遇到过这个问题吗？关于出了什么问题以及如何解决这个问题的任何想法？

谢谢克里斯

# bash - 在 H2 db 中，类似于 mySQL 中的查询日志？

> ID：11079986
> 
> 赞同：0
> 
> 时间：2012-06-18T09:20:32.523
> 
> 标签：bash, h2

我想像在 mySQL 中一样轮换日志，但现在是 H2 db。是否有这样的日志可用，我如何在 bash 脚本中轮换它？

mySQL 的示例：

```
#Rotate the MySQL query log
echo '' > /usr/local/mysql/var/mysql_queries.log 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-18T19:28:00.877

对于 H2 数据库，如果附加[`;TRACE_LEVEL_FILE=2`](http://h2database.com/html/features.html#trace_options)到数据库 URL，则执行的 SQL 语句将写入文件`{databaseName}.trace.db`。还有一个[工具可以分析这个跟踪](http://h2database.com/html/performance.html#database_profiling)文件。

# javascript - 从标签内容解析 JSON 时出错

> ID：11079989
> 
> 赞同：0
> 
> 时间：2012-06-18T09:20:38.657
> 
> 标签：javascript, jquery, html, json

我将一个 json 对象传递给我的 js 文件：

```
<script type="text/javascript" src="../js/main.js">
  { lang: 'de' }
</script> 
```

尝试在 main.js 中获取 json 对象：

```
var scriptContent = $('script').filter(function () { return this.src.match(/js\/main\.js/g); }).html(),
  params = $.parseJSON( scriptContent.replace(/&quot;/g, '"') ); 
```

但这会导致以下错误：`JSON.parse: expected property name or '}'`

如您所见，我已经尝试替换`&quot;`为`"`

我试过`{ lang: "de" }`而不是`{ lang: 'de' }`

如何让这个工作？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-18T09:23:23.663

JSON 中的属性应该用引号括起来，如下所示：

```
{
    "lang": "de"
} 
```

此外，要测试 JSON 片段是否有效，您应该使用[http://jsonlint.com/](http://jsonlint.com/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-18T09:22:40.660

您的代码段是不正确的 JSON。属性键也必须被引用。

要快速生成有效的 JSON（用于测试目的？），请使用[`JSON.stringify( some_object )`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/JSON/stringify)，例如：

```
JSON.stringify({ lang: "de" });
>>> {"lang":"de"} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-18T09:23:58.750

使用[JsonLint](http://jsonlint.com/)验证您的 JSON 对象

```
{
    "lang": "de"
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-18T09:27:05.660

还添加：

```
scriptContent = scriptContent.replace(/\n/g, ''); 
```

删除刹车线

# php - 使用php从完整的url字符串中获取http://之后的url

> ID：11079999
> 
> 赞同：-1
> 
> 时间：2012-06-18T09:21:21.137
> 
> 标签：php, string

我像这样在数据库中存储 url 字符串，

```
'http://www.domain.com' 
```

我怎样才能显示上面的字符串

'www.domain.com'

**我需要第一手的正则表达式**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-18T09:23:10.107

[`parse_url()`](http://de2.php.net/manual/en/function.parse-url.php)您可以将 url 拆分为各个部分并获取您想要的部分。在您的情况下（寻找`host`），它将是：

```
$url = 'http://www.domain.com';
$parts = parse_url($url);
$result = $parts['host']; 
```

与其他已发布的解决方案相比，这有一个很大的优势：它可以使用 https-url、带有 get-parameters 的 url 和/或 url，包括 htaccess-authentication 参数，而无需更改代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-18T09:25:01.280

您可以使用以下内容：

```
<?php
str_replace('http://', '', $url); 
```

编辑：

由于您坚持使用正则表达式解决方案，因此这里有一个将 http 和 https 合二为一的解决方案

```
echo preg_replace( '/^(htt|ht|tt)p\:?\/\//i', '', $url); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-18T09:25:44.733

```
echo substr('http://www.domain.com',7);

if (substr('http://www.domain.com',7) == 'http://' or substr('https://www.domain.com',8) == 'https://') 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-18T09:26:31.287

在不解析 URL 的情况下修改字符串的通用解决方案（即你应该学会自己能够做这样的事情）：

```
if (stripos($url, 'http://', 0) == 0)
    $url = substr($url, 7); 
```

`https://`您还可以轻松地为前缀或其他任何内容添加另一个检查：

```
if (stripos($url, 'https://', 0) == 0)
    $url = substr($url, 8); 
```

使用正则表达式，尽管完全没有必要，因为没有什么需要，你可以像这样：

```
$url = preg_replace('/^http:\\/\\//', '', $url); 
```

或者直接支持 https：

```
$url = preg_replace('/^https?:\\/\\//', '', $url); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-18T09:43:56.840

只需您可以使用 $url = 'http://www.domain.com';

`str_replace('http://', '', $url);`

它会准确返回`www.domain.com`