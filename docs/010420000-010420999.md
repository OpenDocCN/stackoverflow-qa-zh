# StackOverflow 问答 10420000-10420999

# azure - Azure CDN - 启用 HTTP 压缩 - 托管 Web 角色

> ID：10420004
> 
> 赞同：11
> 
> 时间：2012-05-02T19:00:29.930
> 
> 标签：azure, cdn, azure-web-roles, azure-cdn

是否有人使用其托管的 Web 角色成功[配置了 Azure CDN 以进行 HTTP 压缩？](http://blogs.msdn.com/b/avkashchauhan/archive/2012/03/05/enableing-gzip-compression-with-windows-azure-cdn-through-web-role.aspx)我们在 Azure 边缘服务器上压缩 HTTP 内容时遇到问题。CDN 仅缓存内容的未压缩版本。

如果我们从非 Azure 方法中点击我们的资源链接 ( webresource.axd )，它会按预期通过 gzip (*使用*xxxx.cloudapp.net/cdn/webresource.axd )*进行压缩。*但是，只要我们将资源链接指向 Azure CDN ( *xxxx.vo.msecnd.net* )，尽管浏览器告诉 Azure CDN 它接受 gzip，内容仍会以未压缩的形式提供。

我[在 Azure 论坛上发布了同样的问题](http://social.msdn.microsoft.com/Forums/en-US/windowsazuredata/thread/a88c31ff-3890-4b25-a7eb-3ee59f2193d3)，但目前还没有人回复。

在对问题进行故障排除时，Azure CDN 似乎正在剥离**Accept-Encoding** HTTP 标头。只是好奇其他人是否有同样的问题。

[Azure CDN 最佳实践指出...](http://blogs.msdn.com/b/windowsazure/archive/2011/03/18/best-practices-for-the-windows-azure-content-delivery-network.aspx)

> ***Windows Azure CDN 如何处理压缩内容？***
> 
> *Windows Azure CDN 不会修改（或添加）对您的对象的压缩。Windows Azure CDN 尊重源基于“Accept-Encoding”标头提供的任何压缩。从 1.4 开始，Azure 存储不支持压缩。如果您使用托管服务对象交付，则可以将 IIS 配置为返回压缩对象。*

我们看到的是 CDN 不尊重来源**Accept-Encoding**，它被剥离了。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-05-03T15:19:59.440

通过反复试验发现，Azure CDN 有一个当前限制，即它不会传递**Accept-Encoding** HTTP 标头，除非它找到包含可压缩文件名类型（*.js、.cs*）的 QueryString 参数，或者您正在请求文件按其原始名称（*jquery.js、site.css 等*）。

这意味着如果您使用的是[AXD 资源处理程序](https://stackoverflow.com/questions/4044455/where-is-webresource-axd)（*WebResource.axd 等*），则不会执行 HTTP 压缩。如果您将 QueryString 参数附加到一个或扩展名，Azure CDN 只会传递**Accept-Encoding 。**`.cs``.js`

我们正在使用自定义的 AXD 资源处理程序，所以这对我们来说很容易实现。我们刚刚申请`&group=core.js`了`&group=core.css`我们的组合缩小资源，并且压缩按预期工作。[不幸的是，当前的Azure CDN 文档](http://msdn.microsoft.com/en-us/library/windowsazure/ff919705.aspx)中不存在这种情况。

简而言之，我们必须从这个转换我们的 URI：

> [https://xxxx.vo.msecnd.net/resourceManager.axd?token=HL80vX5hf3lIAAA](https://xxxx.vo.msecnd.net/resourceManager.axd?token=HL80vX5hf3lIAAA)

对此：

> [https://xxxx.vo.msecnd.net/resourceManager.axd?token=HL80vX5hf3lIAAA&group=core.js](https://xxxx.vo.msecnd.net/resourceManager.axd?token=HL80vX5hf3lIAAA&group=core.js)

Azure CDN`.js`在查询字符串中看到 后，将返回资源的压缩版本。

希望这可以帮助其他人使用通过 Azure CDN 提供的 Web 资源 (AXD)。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-02T19:08:35.860

CDN 从源头获取压缩，Windows Azure 存储不直接支持压缩，因此如果您从 Azure 存储源获取 CDN 内容，它不会被压缩。因此，如果您将内容托管在 Windows Azure 存储中，您将无法拥有压缩内容。要拥有压缩内容，您需要将内容托管在托管服务中，例如作为源的 Web 角色。由于这种类型的来源将基于 IIS，因此是一种使用压缩的受支持方式。

Windows Azure CDN 支持 HTTP1.0 上的压缩内容，而且我看到的大多数问题都与 HTTP 1.0 与 HTTP 1.1 的问题有关。因此，当您通过 HTTP 1.0（使用 wget 命令）直接从您的 Web 角色请求您的 CDN 对象时，如果一切正确，您应该获得压缩内容。如果您获得未压缩的内容，那么您就知道问题出在哪里。请确保您已将应用程序和 IIS 本身配置为向 HTTP 1.0 客户端和 HTTP 1.1 客户端提供压缩内容。

我写了一篇详细的博客文章，通过 Web 角色使用 Azure CDN 准确添加 HTTP 压缩：

[http://blogs.msdn.com/b/avkashchauhan/archive/2012/03/05/enableing-gzip-compression-with-windows-azure-cdn-through-web-role.aspx](http://blogs.msdn.com/b/avkashchauhan/archive/2012/03/05/enableing-gzip-compression-with-windows-azure-cdn-through-web-role.aspx)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-06-18T03:30:30.263

这些关于添加 .css/.js 扩展的答案似乎不再适用于最近（2014 年第一季度）更新的 Azure CDN 服务后端。

我今天用一个新的云服务 Web 角色项目和一个新的 CDN 实例运行了一个隔离测试。

我在我的网络角色（单个实例）中放置了一个 /cdn/style-1.css 文件并通过 CDN 访问它。它没有被压缩。直接访问 WAS 压缩。

我的 Web 角色服务 gzip 内容的修复是确保 IIS 配置选项 noCompressionForProxies 为“false”（默认为 true）。

这使得 Azure CDN 然后将 gzip 内容发送给我。

附加 css/js 扩展没有任何区别。

请注意，在测试此更改时，它是主机配置更改，因此您必须通过 IIS 管理器（而不是 iisreset）重新启动 IIS 才能使其生效。最后，要测试更改，请务必创建一个新文件（例如 style-2.css）并通过 CDN 请求它，以便再次从源服务器获取它。

# silverlight - 向 Silverlight 按钮添加热键功能，但下划线字符不起作用

> ID：10420006
> 
> 赞同：1
> 
> 时间：2012-05-02T19:00:34.490
> 
> 标签：silverlight, xaml

我目前正在 Expression Blend 4 中设计我的 Silverlight 应用程序界面。我希望用户能够按下 Alt 键并在按钮上看到带下划线的字符以提供热键功能。这曾经在 VB 中通过在您想要下划线的字母前添加一个“&”字符来完成（例如“&Save”）。在 XAML 中，我的理解是您使用下划线（“_”）来执行此操作。但是，当我使用下划线时，下划线字符实际上出现在我的按钮内容中。（“_Save”显示在按钮上）。我做错了什么？

这是按钮的 XAML： `<Button Content="_Save" Height="30" Foreground="DarkGray"/>`

我确定我错过了一些简单的东西，但我对此太陌生了，只是找不到现有的帮助。谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-02T19:35:47.843

这样的事情会为你做吗？

```
 <Button x:Name="Play" Margin="1,2"
    ToolTipService.ToolTip="shortcut key: P" 
    AutomationProperties.AccessKey="P">
    <TextBlock><Underline>P</Underline>lay</TextBlock>
  </Button> 
```

[键盘支持](http://www.silverlight.net/learn/advanced-techniques/localization-and-accessibility/making-silverlight-applications-accessible#KeyboardSupport)

# google-app-engine - 用于恢复 appengine 数据存储数据的选项？

> ID：10420007
> 
> 赞同：3
> 
> 时间：2012-05-02T19:00:34.837
> 
> 标签：google-app-engine, google-cloud-datastore, restore, database-backups

我们应用程序的用户意外删除了数据。他们希望恢复这个。我们没有可以执行此操作的特殊逻辑或数据存储实体。

但是，我们每天使用数据存储管理员将整个数据存储备份到 blobstore。

我们有哪些选项可以选择性地将部分备份还原回数据存储区？

我们最好不要让其他用户的服务中断。最后一个限制是我们不能更改我们的生产应用程序 ID（即将数据复制到新应用程序，然后将备份恢复到我们的旧应用程序 - 这是因为我们的客户直接引用我们的应用程序 ID）。

想法？

*更新*

我正在考虑对我们应用程序中的所有 blob 运行 mapreduce，并找到与我们的备份有关的那些。根据需要解析这些备份并恢复实体。唯一的问题是，blob 以什么格式存储？我该如何解析它们？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T23:30:47.487

从 1.6.5 开始，Datastore Admin 现在允许您从现有备份中恢复单个种类。

关于备份格式：根据[数据存储管理源代码](http://code.google.com/searchframe#Qx8E-7HUBTk/trunk/python/google/appengine/ext/datastore_admin/backup_handler.py&q=FileRecordsOutputWriter%20package%3ahttp://googleappengine%5C.googlecode%5C.com&l=22)，您可以使用[RecordsReader](http://code.google.com/searchframe#Qx8E-7HUBTk/trunk/python/google/appengine/ext/mapreduce/input_readers.py&l=1536)读取存储在MapperPipeline中的[leveldb 日志格式的备份文件](http://leveldb.googlecode.com/svn/trunk/doc/log_format.txt)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T04:10:17.597

当前形式的恢复功能对我的应用程序不是很有用。应该有一个选项可以仅将少数实体或命名空间恢复到当前的 app-id 或另一个 app-id。请对此问题加注星 [标 http://code.google.com/p/googleappengine/issues/detail?id=7311](http://code.google.com/p/googleappengine/issues/detail?id=7311)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-12-17T20:11:02.143

可能是[自定义备份阅读器](https://github.com/Serpov/GCDBackupReader)帮助您

```
final BlobstoreService blobstoreService = BlobstoreServiceFactory.getBlobstoreService();
final BlobKey blobKey = blobstoreService.createGsBlobKey("/gs/" + bucket + "/" + pathToOutputFile);

final RecordReadChannel rrc = BlobserviceHelper.openRecordReadChannel(blobKey, blobstoreService);

ByteBuffer bf;
while ((bf = rrc.readRecord()) != null) {
  final OnestoreEntity.EntityProto proto = new OnestoreEntity.EntityProto();
  proto.mergeFrom(bf.array());
  final Entity entity = EntityTranslator.createFromPb(proto);
  entity.removeProperty(""); // Remove empty property
  //Now you can save entity to datastore or read keys and properties
} 
```

# iphone - 为什么 TWTweetComposeViewController 不显示帐户选择器？

> ID：10420010
> 
> 赞同：0
> 
> 时间：2012-05-02T19:00:40.570
> 
> 标签：iphone, ios, twitter

我想从我的应用程序中添加推文发送功能。我使用`TWTweetComposeViewController`创建控制器并以模态方式显示它。

设备或模拟器**设置了多个帐户**，但撰写控制器不显示帐户选择器。

![在此处输入图像描述](../Images/3f329cdb2eebb4dee19171f19f45c722.png)

我做错了什么？这是横向的问题吗？

太感谢了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T20:33:37.027

刚刚在我的设备上进行了测试，当方向为横向时，帐户下拉菜单/选择似乎不可用。

# sql-server-2008 - 将字符串转换为唯一标识符时抑制错误

> ID：10420011
> 
> 赞同：2
> 
> 时间：2012-05-02T19:00:41.663
> 
> 标签：sql-server-2008, stored-procedures, error-handling, uniqueidentifier

我有一个通过 XML 接收唯一标识符列表的存储过程。一个或多个字符串可能不是有效的唯一标识符。SQLServer 在此转换时引发异常并且整个过程中止。

是否可以抑制这些错误并继续？如果除一个 id 之外的所有 id 都有效，我想要有效 id 的所有数据，而不是一条错误消息，指出一个 id 无法解析。

相关选择：

```
SELECT *
FROM dbo.Daily dd           
    INNER JOIN dbo.Member m ON m.MemberId = dd.MemberID
    INNER JOIN OPENXML(@hdoc, 'list_of_guids/id/text()', 1) with (guid uniqueidentifier '.') x
            ON x.guid = m.MemberGuid 
```

示例 XML，请注意最后一个条目无效：

```
<list_of_guids>
<guid>7B8CFAED-8C59-431D-9447-2A45BD4612E5</guid>
<guid>537F4129-0732-4D29-B3B8-4B9127F8522F</guid>
<guid>9965395A-676F-48F2-91CC-F46527D134C</guid>
</list_of_guids> 
```

一种可能性是将 uniqueidentifiers 转换为 varchar 而不是相反，但这会导致性能影响，因为 uniqueidentifier 是成员表上的索引。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T19:17:56.463

无论在里面找到什么数据类型，读取打开的 xml 都不会改变性能。你有没有考虑过做这样的事情（很大程度上是伪的）：

```
SELECT * FROM OPENXML ... INTO #tmp; -- using VARCHAR type, not GUID

DELETE #tmp WHERE col NOT LIKE '[0-9A-F]...' -- delete those not matching pattern
  OR col IS NULL;

ALTER TABLE #tmp ALTER COLUMN col UNIQUEIDENTIFER;
-- create index here too maybe

SELECT FROM #tmp JOIN other tables; 
```

正如我所建议的，这在 SQL Server 2012 中更容易。而且我认为将这些行写入 #temp 表不会对整体性能产生太大影响，如果最大的帮助是 GUID 列上的索引。

# java - java 服务器发送打印流到端口 80 或 443

> ID：10420013
> 
> 赞同：0
> 
> 时间：2012-05-02T19:00:42.357
> 
> 标签：java, sockets, https, applet, logging

我有一个文件传输小程序，我目前正在创建一个日志系统，所以在它初始化的小程序中，直到它发送文件并完成将开始打印一个日志文件（最初它进入客户端的 java 控制台）但现在我正在修改它，所以它会转到服务器（在服务器中创建一个文件并开始在文件上写入）。

它现在可以工作，我正在使用端口 5000，但我需要为端口 5000 打开防火墙，因为打开端口很危险，我可以只使用端口 80 或 443 (HTTPS)，因为它仍然打开用于文件传输吗？怎么做？

目前的代码示例是

在java小程序中会有

```
handler = new SocketHandler("xxx.xxx.xxx.xx", 5000);
//on different area of the file there will be something like
log("starting the applet");
log("sending email");
... 
```

在服务器上，我创建了一个像这样的简单 java 服务器

```
public class ThreadedEchoServer {
    // using port 5000 
    static final int PORT = 5000;

    public static void main(String args[]) {
        ServerSocket serverSocket = null;
        Socket socket = null;

        try {
            serverSocket = new ServerSocket(PORT);
        } catch (IOException e) {
            e.printStackTrace();

        }
        while (true) {
            try {
                socket = serverSocket.accept();
            } catch (IOException e) {
                System.out.println("I/O error: " + e);
            }

            // new thread for a client
            new EchoThread(socket).start();
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T19:04:41.113

你真的不应该考虑使用端口 80 和 443 - 这些是接收连接的端口。在其中一个端口上建立连接后，请求实际上被重定向到另一个端口进行处理。因此，使用它们写入将阻止任何传入的通信。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T19:04:50.993

> 它现在可以工作了，我正在使用端口 5000，但是我需要为端口 5000 打开防火墙，因为打开端口很危险，我可以只使用端口 80 或 443（HTTPS）吗？怎么做？

打开5000端口并不比打开80或443端口更危险。（更改端口并不比修改数字更难，并且没有更多的效果）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-02T19:20:27.643

如果您的服务器正在运行其他重要的应用程序，我会使用 5000 端口并配置一个 chrooted 环境。

您可以查看此线程：[防御路径遍历攻击的最佳方法是什么？](https://stackoverflow.com/questions/2375903/whats-the-best-way-to-defend-against-a-path-traversal-attack)

# c++ - std::unique_ptr 不完整的类型错误

> ID：10420015
> 
> 赞同：5
> 
> 时间：2012-05-02T19:00:44.880
> 
> 标签：c++, visual-studio-2010, templates, c++11, unique-ptr

我有

```
template<typename T>
class queue
{
private:
    struct node
    {
        T data;
        std::unique_ptr<node> next; //compile error on incomplete type

        node(T&& data_):
            data(std::move(data_))
        {}
    };

    std::unique_ptr<node> head;
    node* tail;

public:
        queue():
            tail(nullptr)
        {} 
```

我在 VS10 的标记行上收到编译错误。在这种情况下，我是否应该被允许使用不完整的类型（实例化模板 - 构造函数 - 这里以 int 为例）？有解决方法吗？

**编辑**

```
singlethreadedqueue.h(62): error C2079: 'queue<T>::node::next' uses undefined class 'std::unique_ptr<_Ty>'
1>          with
1>          [
1>              T=MyClass
1>          ]
1>          and
1>          [
1>              _Ty=queue<MyClass>::node
1>          ]
1>          c:\program files\microsoft visual studio 10.0\vc\include\memory(2161) : see reference to class template instantiation 'queue<T>::node' being compiled
1>          with
1>          [
1>              T=MyClass
1>          ]
1>          c:\program files\microsoft visual studio 10.0\vc\include\memory(2195) : see reference to class template instantiation 'std::_Unique_ptr_base<_Ty,_Dx,_Empty_deleter>' being compiled
1>          with
1>          [
1>              _Ty=queue<MyClass>::node,
1>              _Dx=std::default_delete<queue<MyClass>::node>,
1>              _Empty_deleter=true
1>          ]
1>         singlethreadedqueue.h(69) : see reference to class template instantiation 'std::unique_ptr<_Ty>' being compiled
1>          with
1>          [
1>              _Ty=queue<MyClass>::node
1>          ]
1> : see reference to class template instantiation 'queue<T>' being compiled
1>          with
1>          [
1>              T=MyClass
1>          ] 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-03T10:59:19.627

模板实例化点的完整类型的要求是由于`std::default_delete`，因此您可能可以通过提供自定义删除器来解决它。

```
struct node;         // node_delete need to know 'node' is a type.
struct node_deleter 
{                    // std::unique_ptr needs 'node_deleter' to be complete.
    void operator()(node* ptr);  // forward-reference to avoid needing
};                               //  'delete ptr' before the node is complete.

struct node
{
    std::unique_ptr<node, node_deleter> next;
};

void node_deleter::operator()(node* ptr)
{
     delete ptr;
} 
```

请注意，我尚未在 MSVC 中对其进行测试，如果 VC 11 无法编译您的原始代码，您可能应该尝试升级到 VC 11，或者[向 Microsoft 提交错误。](http://connect.microsoft.com/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-02T19:34:21.277

您的代码看起来格式正确。在构造函数体和析构函数体中，一个类被认为是一个完整的类型。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-02T20:22:43.763

如果您使用`shared_ptr`而不是`unique_ptr`，则编译（在 VS2010 上）。我猜它的实现方式在 的情况下允许部分类（前向声明等）`shared_ptr`，但在`unique_ptr`. 文档`boost::shared_ptr`肯定说它允许这样做，但我不知道 VS2010 是否“说”了为什么他们为一个而不是另一个做这种行为。

我会说测试它，看看它是否满足您的需求`shared_ptr`。这不是您想要的，但如果它有效，并且速度差异不是很大，那么它可能没问题。

# sql-server - WSO2 DSS 无法执行 SQL Server 存储过程

> ID：10420021
> 
> 赞同：0
> 
> 时间：2012-05-02T19:00:58.277
> 
> 标签：sql-server, wso2, wso2dss

我们正在将 WSO2 DSS 从版本 2.5.1 升级到 2.6.3。在 2.5.1 版本中，我们能够通过服务从 SQL Server 2005 数据库执行存储过程，没有任何问题。但是，在这个新版本中，情况并非如此。尝试在 TryIt 窗口中执行存储过程时，会记录错误说明

错误 {org.apache.axis2.transport.http.AxisServlet} - {org.apache.axis2.transport.http.AxisServlet} java.lang.AbstractMethodError

然后是完整的堆栈跟踪

如果我将查询更改为 select 语句，它就可以正常工作。

也许现在需要在运行存储过程之前进行一些设置？也许这是另一个配置问题？希望有人可以帮助解决这个问题。我喜欢这个新版本提供的增强功能，但如果我们不能运行存储过程，这对我们来说不是一个可行的选择。提前致谢！

杰森

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T19:19:36.757

您实际上并没有在 AbstractMethodError 中发布他们抱怨的方法。但我猜这与不符合 JDBC4 的 JDBC 驱动程序有关。在 Java 6 中，我们在 WSO2 DSS 中使用 JDBC4 功能，因此您必须升级到适当的 JDBC4 驱动程序，在 MSSQL 的情况下，将是 SQLJDBC4 驱动程序。希望这可以帮助。

干杯，安佳娜。

# c# - 从 .Net WinForms 应用程序以编程方式刷新浏览器页面

> ID：10420023
> 
> 赞同：4
> 
> 时间：2012-05-02T19:01:04.070
> 
> 标签：c#, winforms, browser, refresh

从 asp.net 页面，通过 ClickOnce 部署，启动一个 .Net WinForms 应用程序。在某个时刻，WinForm 应用程序需要刷新它启动的网页。

我怎么能这样做？基于 .Net 的 Windows 应用程序如何刷新已在浏览器中打开的页面？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-02T19:35:55.057

这里有一些示例代码来做你需要的（只是相关部分）：

```
using System.Runtime.InteropServices;
using System.Windows.Forms;

namespace WindowsFormsApplication1
{
    public partial class Form1 : Form
    {
        // Get a handle to an application window.
        [DllImport("USER32.DLL", CharSet = CharSet.Unicode)]
        public static extern IntPtr FindWindow(string lpClassName,
            string lpWindowName);

        // Activate an application window.
        [DllImport("USER32.DLL")]
        public static extern bool SetForegroundWindow(IntPtr hWnd);

        private void RefreshExplorer()
        {
            //You may want to receive the window caption as a parameter... 
            //hard-coded for now.
            // Get a handle to the current instance of IE based on window title. 
            // Using Google as an example - Window caption when one navigates to google.com 
            IntPtr explorerHandle = FindWindow("IEFrame", "Google - Windows Internet Explorer");

            // Verify that we found the Window.
            if (explorerHandle == IntPtr.Zero)
            {
                MessageBox.Show("Didn't find an instance of IE");
                return;
            }

            SetForegroundWindow(explorerHandle );
            //Refresh the page
            SendKeys.Send("{F5}"); //The page will refresh.
        }
    }
} 
```

注意：代码是[此 MSDN 示例的修改。](http://msdn.microsoft.com/en-us/library/ms171548.aspx)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-02T19:51:04.910

以稳健的方式做到这一点并不容易。例如，用户可能没有使用 IE。

您唯一可以控制并且对网页和 Windows 应用程序通用的就是您的 Web 服务器。

这个解决方案很复杂，但这是我能想到的唯一可行的方法。

1）让网页在windows应用程序运行之前打开一个与web服务器的长轮询连接。SignalR 目前正在为此获得很好的媒体报道。

2）让windows应用程序在要更新网页时向服务器发送信号。

3) 在服务器上，完成长轮询请求，向网络浏览器发送回信号。

4) 在网页中，通过刷新页面来处理响应。

我说很纠结！

# mysql - 在mysql中转换不规则日期

> ID：10420026
> 
> 赞同：1
> 
> 时间：2012-05-02T19:01:18.780
> 
> 标签：mysql, sql, date-conversion

我正在使用其他人创建的 mysql 数据库。我有一个包含两个不同日期字段的表，一个称为 eventDate，格式为 YYYY-MM-DD，另一个称为 creationDate，格式为 M/D/YYYY H:MM:SS AM/PM

我想要做的是查询表并返回 eventDate 与 creationDate 相同的结果，但是如何将 creationDate 转换为 YYYY-MM-DD 格式？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T23:16:47.210

尝试使用与您的字符串使用[`STR_TO_DATE()`](http://dev.mysql.com/doc/refman/5.6/en/date-and-time-functions.html#function_str-to-date)的[格式](http://dev.mysql.com/doc/refman/5.6/en/date-and-time-functions.html#function_date-format)匹配的格式：`creationDate`

```
SELECT
…
WHERE DATE(STR_TO_DATE(creationDate, '%c/%e/%Y %r')) = STR_TO_DATE(eventDate, '%Y-%m-%d') 
```

也许 MySQL 能够将`YYYY-MM-DD`字符串隐式转换为日期，因此第二次`STR_TO_DATE()`调用可能是不必要的。

# php - Symfony2 使用资产转储资产时出现致命错误

> ID：10420035
> 
> 赞同：1
> 
> 时间：2012-05-02T19:02:27.237
> 
> 标签：php, symfony, assetic

当我使用以下命令转储资产时

```
app/console assetic:dump --env=dev --watch 
```

我收到此错误

```
Fatal error: Method 
Symfony\Bundle\AsseticBundle\Factory\Resource\FileResource::__toString() 
must not throw an exception in 
vendor/assetic/src/Assetic/Factory/Loader/CachedFormulaLoader.php on line 0 
```

倾倒使用时不会发生

```
app/console assetic:dump --env=prod --no-debug 
```

# java - 杰克逊 2.0 和 Spring 3.1

> ID：10420040
> 
> 赞同：30
> 
> 时间：2012-05-02T19:03:12.920
> 
> 标签：java, json, spring, spring-mvc, jackson

Spring MVC 3.1 与 Jackson 2.0 兼容吗？Spring MVC 在类路径上自动检测 Jackson 并委托给 Jackson 以请求 JSON 内容类型的请求仍然有效吗？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-05-02T20:28:10.937

基思唐纳德（弹簧来源）不久前发布了以下推文。

> 杰克逊 2 的 Spring MVC 支持；也适用于杰克逊的原生“漂亮打印”功能[https://gist.github.com/2423129](https://gist.github.com/2423129)

我没有尝试过`MappingJackson2HttpMessageConverter`上述要点中的发现，但如果它不起作用，我会感到惊讶。

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2012-07-14T11:39:48.587

在 Spring 3.2 中添加了对 Jackson 2 的支持，并且还向后移植到 Spring 3.1.2 ( [SPR-9507](https://jira.springsource.org/browse/SPR-9507) )

* * *

## 回答 #3

> 赞同：17
> 
> 时间：2012-11-17T23:10:05.720

从 Spring 3.1.2 开始，您只需将*jackson-databind* jar 添加到您的类路径中。

在 Maven 中，您可以像这样配置它：

```
<dependency>
    <groupId>com.fasterxml.jackson.core</groupId>
    <artifactId>jackson-databind</artifactId>
    <version>${jackson.version}</version>
</dependency>
<dependency>
    <groupId>com.fasterxml.jackson.core</groupId>
    <artifactId>jackson-core</artifactId>
    <version>${jackson.version}</version>
</dependency> 
```

其余的魔法将由 spring 自动完成。

见： http: [//norrisshelton.wordpress.com/2012/07/15/spring-3-mvc-with-json-via-jackson-2-0/](http://norrisshelton.wordpress.com/2012/07/15/spring-3-mvc-with-json-via-jackson-2-0/)

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2012-07-25T10:45:16.663

对于 Spring 3.1.2 和 Jackson 2 -

*   如上所述，自动支持 JustWorks™</p>

*   但配置没有，因为大多数网络都充斥着 Spring3/Jackson2 之前的配置机制

因此，为了后代，我将列出一个 hack（？或者这是官方方式）来配置 Jackson 转换器。在这种特殊情况下，我将转换器配置为以 ISO-8601 格式返回日期：

```
package foo.bar.JacksonConfig;

import com.fasterxml.jackson.databind.ObjectMapper;
import com.fasterxml.jackson.databind.SerializationFeature;
import org.springframework.beans.BeansException;
import org.springframework.beans.factory.config.BeanPostProcessor;
import org.springframework.http.converter.json.MappingJackson2HttpMessageConverter;
import org.springframework.stereotype.Component;

@Component
public class JacksonConfig implements BeanPostProcessor {

    public Object postProcessBeforeInitialization(Object bean, String beanName) throws BeansException {
        return bean;
    }

    public Object postProcessAfterInitialization(Object bean, String beanName)
            throws BeansException {
        if (bean instanceof MappingJackson2HttpMessageConverter) {
            MappingJackson2HttpMessageConverter jsonConverter =
                    (MappingJackson2HttpMessageConverter) bean;
            ObjectMapper objectMapper = jsonConverter.getObjectMapper();
            objectMapper.configure(SerializationFeature.WRITE_DATES_AS_TIMESTAMPS, false);
            jsonConverter.setObjectMapper(objectMapper);
        }
        return bean;
    }
} 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-06-29T16:26:37.087

需要明确的是，Spring 3.1 没有对 Jackson 2 的原生支持。它在 Spring 3.2 中

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-03-29T16:23:08.737

我没有测试与 Jackson 2.0 兼容的 Spring MVC 3.1。但我遇到 3.0.5 兼容问题。最后我发现 Spring MVC 3.0.5 只兼容 Jackson 1.0.0，肯定 Jackson 1.5.3 不兼容！！！

# ios - 免费订阅，防止显示“分享您的信息”框？

> ID：10420041
> 
> 赞同：0
> 
> 时间：2012-05-02T19:03:16.773
> 
> 标签：ios, in-app-purchase

当用户尝试订阅免费订阅时，有没有办法阻止显示“共享您的信息”框？这个应用程序是为我的学校准备的，如果弹出这个框，除了我不允许访问有关个人用户的信息这一事实之外，它看起来会很奇怪。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T19:13:30.017

可悲的是，那是不可能的。没有办法告诉 Apple 您甚至不想要这些信息，或者只想要部分信息。您确实应该在[bugreport.apple.com](http://bugreport.apple.com)上提交一份关于此问题的错误报告，以引起对该问题的更多关注。

# numerical-methods - 导致两个程序输出差异的数值问题？

> ID：10420045
> 
> 赞同：-1
> 
> 时间：2012-05-02T19:03:32.463
> 
> 标签：numerical-methods

我有两个代码理论上应该返回完全相同的输出。但是，这不会发生。问题是这两个代码处理非常小的数字（双精度数），大约为 1e-100 左右。我怀疑可能存在一些与此相关的数值问题，并导致两个输出不同，即使它们在理论上应该相同。

处理 1e-100 数量级的数字会导致这样的问题是否真的有意义？如果我可以安全地假设来源是数字问题，我不介意输出的差异。有没有人有一个很好的来源/参考来讨论当他们以这种顺序处理数字时算法的稳定性问题？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T19:10:09.490

> 有没有人有一个很好的来源/参考来讨论当他们以这种顺序处理数字时算法的稳定性问题？

想到的第一个参考资料是[每个计算机科学家都应该知道的关于浮点运算的知识](http://docs.oracle.com/cd/E19957-01/806-3568/ncg_goldberg.html)。它通常涵盖浮点数学。

就数值稳定性而言，最佳参考可能取决于所讨论的数值算法。想到的两个广泛的作品是：

*   [Press等人的数字食谱](http://www.nr.com/)；
*   [Golub 和 Van Loan 的矩阵计算](http://books.google.co.uk/books/about/Matrix_Computations.html?id=mlOa7wPX6OYC)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T20:03:47.383

引起问题的不一定是少数人。

您如何检查输出是否“完全相同”？

我会用宽容检查平等。您可以考虑浮点数`x`，如果其中一个或成立，`y`则相等。`fabs(x-y) < 1.0e-6``fabs(x-y) < fabs(x)*1.0e-6`

通常，如果存在数值问题，两种算法之间会存在巨大差异。通常，如果算法遇到数值问题，输入的微小变化可能会导致输出的极端变化。

是什么让您认为存在“数字问题”？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-01T22:03:14.533

如果可能，请更改您的算法以使用 Kahan Summation（又称补偿求和）。来自维基百科：

```
function KahanSum(input)
    var sum = 0.0
    var c = 0.0          //A running compensation for lost low-order bits.
    for i = 1 to input.length do
        y = input[i] - c    //So far, so good: c is zero.
        t = sum + y         //Alas, sum is big, y small, so low-order digits of y are lost.
        c = (t - sum) - y   //(t - sum) recovers the high-order part of y; subtracting y recovers -(low part of y)
        sum = t             //Algebraically, c should always be zero. Beware eagerly optimising compilers!
        //Next time around, the lost low part will be added to y in a fresh attempt.
    return sum 
```

这通过保持累积误差的第二个运行总计来工作，类似于 Bresenham 线绘制算法。最终结果是您获得的精度几乎是数据类型宣传精度的两倍。

我使用的另一种技术是将我的数字从小到大排序（按manitude，忽略符号），然后先加或减小数字，然后是大数字。这样做的好处是，如果您多次添加和减去相同的值，这些数字可能会完全取消并且可以从列表中删除。

# iphone - UINavigationController 动画

> ID：10420046
> 
> 赞同：0
> 
> 时间：2012-05-02T19:03:37.840
> 
> 标签：iphone, objective-c, uinavigationcontroller, popviewcontroller

我有一个带有两个选项卡的 tabBar 应用程序。每个选项卡都有自己的 navigationController 以这种方式实现：

```
FirstViewController *firstController = [[FirstViewController alloc] initWithNibName:@"FirstViewController" bundle:nil];
UINavigationController *firstNavController = [[UINavigationController alloc] initWithRootViewController:firstController];

SecondViewController *secondController = [[SecondViewController alloc] initWithNibName:@"SecondViewController" bundle:nil];
UINavigationController *secondNavController = [[UINavigationController alloc] initWithRootViewController:secondController];

tabBar.viewControllers = [NSArray arrayWithObjects:firstNavController, secondNavController, nil]; 
```

当我想将视图推送到一个选项卡中时，我使用这个：

```
[self.navigationController pushViewController:activityController animated:YES]; 
```

当我在推送视图上并且我想弹出我使用的视图时：

```
[self.navigationController popViewControllerAnimated:YES]; 
```

推送动画效果很好，但在弹出动画中，只有顶部栏（NavigationController）被动画化，并且视图在没有动画的情况下消失。有什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T19:10:02.267

尝试使用`[self.navigationController popToRootViewControllerAnimated:YES];`

而不是`[self.navigationController popViewControllerAnimated:YES];` 告诉我这是否有效。记住 netsted 导航控制器。

# python - 在 Tkinter 中添加小部件的按钮

> ID：10420049
> 
> 赞同：1
> 
> 时间：2012-05-02T19:04:09.700
> 
> 标签：python, tkinter

在 Tkinter 中，单击时添加小部件的按钮代码看起来如何，如有必要，无限？

感谢和抱歉英语不好。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-02T19:24:54.063

这是一个更“优雅”的版本：

```
from Tkinter import *

class Application(Frame):
    def __init__(self, master=None):
        Frame.__init__(self, master)
        self.number = 0
        self.widgets = []
        self.grid()
        self.createWidgets()

    def createWidgets(self):
        self.cloneButton = Button ( self, text='Clone', command=self.clone)
        self.cloneButton.grid()

    def clone(self):
        widget = Label(self, text='label #%s' % self.number)
        widget.grid()
        self.widgets.append(widget)
        self.number += 1

if __name__ == "__main__":
    app = Application()
    app.master.title("Sample application")
    app.mainloop() 
```

![在此处输入图像描述](../Images/c7fcd459e94137183143891df99c4773.png)

请注意，您将小部件保存在 self.widgets 列表中，因此您可以根据需要调用它们并修改它们。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T19:14:13.860

好吧，它可能看起来像这样（它可能看起来像很多不同的东西）：

```
import Tkinter as tk
root = tk.Tk()
count = 0
def add_line():
    global count
    count += 1
    tk.Label(text='Label %d' % count).pack()
tk.Button(root, text="Hello World", command=add_line).pack()
root.mainloop() 
```

# ruby-on-rails - 你可以从 Rails 控制器中的 JSON 数组渲染多个部分吗？

> ID：10420065
> 
> 赞同：0
> 
> 时间：2012-05-02T19:05:28.327
> 
> 标签：ruby-on-rails

对不起，如果这是一个愚蠢的问题。

但是假设我有一个 AJAX 请求是返回这个：

```
format.js { render :partial => 'quickbooks/job', :locals => {:job => @jobs_to_sync }, :layout => false } 
```

@jobs_to_sync 是一个包含许多作业的数组。因此，与其用一些花哨的 javascript 构建所有这些工作，我可以返回为我构建的整个数组以及我已经拥有的部分吗？

如果我有**一个**对象，这将是*完全相同的方式，Rails 将返回您在部分中实现的对象。*但或者，我希望 Rails 通过 JSON 返回我的所有对象，每个对象都使用相同的部分实现。

 **这样，在我原来的 AJAX 调用中，我可以只附加`success(data)`返回。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T19:08:24.563

您可以创建一个新对象并使用 map ou hash 创建一个更大的对象以及所有其他对象。像@MyObject = 新对象；@MyObject.json1 = json1 @MyObject.json2 = json2 。. .**

# objective-c - 包含可访问方法的 iOS 类

> ID：10420067
> 
> 赞同：0
> 
> 时间：2012-05-02T19:05:42.290
> 
> 标签：objective-c, ios, xcode

我正在使用最新版本的 Xcode 开发 iOS 应用程序。该应用程序将使用 http 请求从 Web 服务获取数据，并且该应用程序有点大，因此会有许多不同的请求。所以，我是这个objective-c的新手，所以我想知道你如何创建一个类，它可以包含可以在整个应用程序中访问的方法，只需在另一个类中创建该类的新实例并简单地调用里面的方法你刚开始的类实例。

我的意思是，假设我们有一个名为 Communication 的课程。通信类包含一个名为 的方法`login`，它有两个参数。`Username`和`password`。

然后我想从我的其他类中使用类似的方法调用该方法。

```
Communication com = new Communication();
com.login(username, password) 
```

正如我所说，我对 Objective-c 有点陌生，所以我会得到一些帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T19:13:13.123

**Communication.h（头文件）**

```
#import <Foundation/Foundation.h>

@interface Communication : NSObject {
    NSString *username;
    NSString *password;
}

-(void) login:(NSString *)username withPassword:(NSString *)password;

@property (nonatomic, retain) NSString *username;
@property (nonatomic, retain) NSString *password;

@end 
```

**Communication.m（实施）**

```
@implementation Communication
@synthesize username, password;

-(void) login:(NSString *)username withPassword:(NSString *)password {
 // Do your login stuff here
}

@end 
```

然后使用该类将如下所示：

```
NSString *username = @"hugo";
NSString *password = @"secret!";
Communication *communication = |[Communication alloc] init];
[communication login:username withPassword:password]; 
```

# c# - 从对客户端的调用中返回数据

> ID：10420069
> 
> 赞同：1
> 
> 时间：2012-05-02T19:05:45.347
> 
> 标签：c#, signalr

我有一个连接到数字秤的系统，我正在尝试使用 SignalR 将重量传递给其他请求客户端。

我的集线器如下所示：

```
public class ScaleHub : Hub
{
    private static string ScaleClientId { get; set; }

    // the weight object for the client making the request
    private static Dictionary<string, WeightDTO> scaleWeights =
        new Dictionary<string, WeightDTO>();

    public void RegisterScale()
    {
        ScaleClientId = Context.ConnectionId;
    }

    public WeightDTO GetWeight()
    {
        // clear the scale weight for the client making the request
        scaleWeights[Context.ConnectionId] = null;

        Task updateWeightTask = Clients[ScaleClientId].UpdateWeight(Context.ConnectionId);

        // this doesn't wait :-(
        updateWeightTask.Wait();

        return scaleWeights[Context.ConnectionId];
    }

    public void UpdateWeight(WeightDTO weight, string clientId)
    {
        // update the weight for the client making the request
        scaleWeights[clientId] = weight;
    }
} 
```

客户端的重要部分是：

```
scaleHub.On<string>("UpdateWeight", UpdateWeight);

private void UpdateWeight(string clientId)
{
    // this is replaced with code that talks to the scale hardware
    var newWeight = new WeightDTO(123, WeightUnitTypes.LB);

    scaleHub.Invoke("UpdateWeight", newWeight, clientId).Wait();
}

public Task<WeightDTO> GetWeight()
{
    return scaleHub.Invoke<WeightDTO>("GetWeight");
} 
```

我还是 SignalR 的新手，所以我不确定我是否以正确的方式进行。

添加`Thread.Sleep(2000)`而不是`updateWeightTask.Wait()`解决问题，因为它为 UpdateWeight 的往返调用提供了足够的时间来完成。我不想让我的客户等待 2 秒来称重。

有什么建议么？

# asp.net - 使用基于 HttpContext 的缓存与 System.Runtime.Cache 的优缺点是什么？

> ID：10420070
> 
> 赞同：0
> 
> 时间：2012-05-02T19:05:45.983
> 
> 标签：asp.net, .net, caching, .net-4.0

我在一个网络应用程序中，所以要么可用，`HttpContext`要么`HttpContextBase`可用。我想知道如果有的话，在选择一个而不是另一个时会有什么不同？

[http://msdn.microsoft.com/en-us/library/system.runtime.caching.aspx](http://msdn.microsoft.com/en-us/library/system.runtime.caching.aspx)

对比

[http://msdn.microsoft.com/en-us/library/system.web.caching.cache.aspx](http://msdn.microsoft.com/en-us/library/system.web.caching.cache.aspx)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T19:11:15.950

好吧，`System.Runtime.Caching`文档中的这句话说明了大部分内容：

> “这个命名空间中的类提供了一种使用类似于 ASP.NET 中的缓存设施的方法，但不依赖于 System.Web 程序集。”

如果它是 Web 应用程序，则使用`System.Web`命名空间中的一个，如果不是，则使用另一个。

# mysql - mysql 程序 - 五个数字中的随机数

> ID：10420071
> 
> 赞同：1
> 
> 时间：2012-05-02T19:05:45.980
> 
> 标签：mysql, random

我有 5 个带数字的 INT 变量。我想从 mysql 程序的五个变量中选择一个随机数。

示例数据：

```
DECLARE a, b, c, d, e INT;
SET a = 50;
SET B = 22;
SET C = 88;
SET D = 892;
SET E = 367; 
```

现在我想从变量 a、b、c、d、e 中选择一个随机数。任何想法如何做到这一点？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T19:12:17.057

> SELECT * FROM MyTable ORDER BY RAND() LIMIT 1

更新

> 选择 * 从
> 
> (
> 
> 选择 @A 作为值
> 
> 联合所有
> 
> 选择 @B 作为值
> 
> 联合所有
> 
> 选择 @C 作为值
> 
> 联合所有
> 
> 选择 @D 作为值
> 
> 联合所有
> 
> 选择 @E 作为值
> 
> ） F
> 
> 按 RAND() 限制 1 排序

# android - 获取 ContextMenuListener 视图中的内容

> ID：10420074
> 
> 赞同：0
> 
> 时间：2012-05-02T19:06:02.227
> 
> 标签：android, android-view

我怎样才能得到，我长时间单击的 ContextMenu 的列表项中有什么？我尝试使用`v.getTag()`但`null`一直返回。

```
@Override
    public void onCreateContextMenu(ContextMenu menu, View v, ContextMenuInfo menuInfo) {
        clsStTwoLineAdapter.ViewHolder holder = (clsStTwoLineAdapter.ViewHolder)v.getTag();
                 .
                 .
                 .
                 .
} 
```

这是我的 ViewHolder

```
public class ViewHolder {
        TextView text;
        TextView text2;
        TextView text3;
        ImageView imgLineItem;
        int MessageID;
    } 
```

就像我说`holder`的总是一样`null`，那么我怎么才能得到里面的东西呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T19:50:52.553

看到这个[**帖子**](http://ogrelab.ikratko.com/identifying-the-view-selected-in-a-contextmenu-in-oncontextitemselected-method/)。

# c# - 在 EF4 Code-First 中按基本类型查询

> ID：10420075
> 
> 赞同：5
> 
> 时间：2012-05-02T19:06:03.703
> 
> 标签：c#, entity-framework, inheritance

我有以下类型：

```
public abstract class Vehicle {
    public int Id { get; set; }
    public double TopSpeed { get; set; }
}

public class Car : Vehicle {
    public int Doors { get; set; }
}

public class Motorcycle : Vehicle { 
    public string Color { get; set; }
} 
```

我有一个代码优先的 DBContext：

```
public MyDbContext: DbContext { 
    public DbSet<Car> Cars { get; set; }
    public DbSet<Motorcycle> Motorcycles { get; set; }
} 
```

如果我直接查询汽车或摩托车，这非常有用......

```
var dbContext = new MyDbContext();
var cars = dbContext.Set<Car>().Where(x=> x.TopSpeed>10); // <-- THIS WORKS 
```

但是，如果我想要所有车辆的列表，无论是汽车还是摩托车，我想这样做：

```
var dbContext = new MyDbContext();
var vehicles = dbContext.Set<Vehicle>().Where(x=> x.TopSpeed>10); // <-- THIS DOES NOT WORK 
```

当我尝试上面的代码时，我得到一个异常：

> System.InvalidOperationException ：实体类型 Vehicle 不是当前上下文模型的一部分。

这很有意义......我没有将 Vehicle 添加到上下文中。我添加了汽车和摩托车。在这一点上，我不知道该怎么办。我尝试将 Vehicle 添加到我的上下文中，但这会将 car 和 moto 的表合并到一个 Vehicle 表中。我绝对想要一个单独的汽车和摩托车表（可能还有一个用于车辆基础属性的表）。最好的方法是什么？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-02T19:24:25.630

`Vehicle`在 MyDbContext 类中有一个 DBSet 类型的车辆属性。

```
public MyDbContext: DbContext { 
    public DbSet<Car> Cars { get; set; }
    public DbSet<Motorcycle> Motorcycles { get; set; }
    public DbSet<Vehicle> Vehicles { set; get; }
} 
```

现在您可以使用这样的条件访问所有车辆

```
var vehicles = dbContext.Set<Vehicle>().Where(x=> x.TopSpeed>10); 
```

请记住，您的实体类（`ID`或`{ClassName}ID`）中应该有一个键属性。否则它会给你一个运行时错误！（是的，代码将编译。）

```
public abstract class Vehicle
{
    public int ID { set; get; }
    public double TopSpeed { get; set; }
} 
```

**编辑：根据评论**

默认情况下，实体框架将为**每个层次结构创建一个表**。层次结构中的所有数据都保存在一个表中，并使用该`Discriminator`列来识别哪个记录属于哪个子类型。因此，您将拥有一个 Vehicle 表，其列与层次结构中所有类的属性相同，并带有一个名为“ `Discriminator`”的额外列。对于 Car 的记录，它将在 Discriminator 列中具有“Car”值。

![在此处输入图像描述](../Images/746023cfb2bfca2752d698c050bf33a4.png)

如果您想为每种类型创建单个表，我们将选择每个类型的**表**。实体框架将为基类创建一个表，并为所有子类创建一个单独的表。

为此，您可以使用 Fluent API 覆盖配置。

```
 protected override void OnModelCreating(DbModelBuilder modelBuilder)
    {
        modelBuilder.Entity<Car>().ToTable("Cars");
        modelBuilder.Entity<Motorcycle>().ToTable("Motorcycles");

        base.OnModelCreating(modelBuilder);
    } 
```

输出是

![在此处输入图像描述](../Images/dd4d88f23123584b17970b07870b8cba.png)

现在您应该可以像这样查询您的车辆条目

```
 var vehicles = dbContext.Set<Vehicle>().Where(x => x.TopSpeed > 150).ToList(); 
```

结果就在这里

![在此处输入图像描述](../Images/505d39c1b1099e4614b9ea78435e45a2.png)

请注意，结果同时包含`MotorCycle`类型和`Car`类型。

检查此[链接](http://blogs.msdn.com/b/alexj/archive/2009/04/15/tip-12-choosing-an-inheritance-strategy.aspx)以确定要使用的继承策略。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T19:44:05.547

您是否尝试过仅使用 DBSet 为 Vehicle 提供自己的上下文？我认为这可能对你有用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-24T14:27:41.670

在继承的类上使用 DataAnnotation.Schema.Table("TableName") 条目会触发为继承类型（每个类型的表）创建新表并消除父类型表中的鉴别器字段，而无需需要 Fluent API 代码。

# android - 支持 setTypeface(Typeface.Italic) 的三星设备？

> ID：10420077
> 
> 赞同：11
> 
> 时间：2012-05-02T19:06:09.667
> 
> 标签：android, typeface, italic

我有一个使用自定义视图组件的应用程序，该组件通过 Paint/Canvas 在屏幕上绘制一些文本。

我正在使用以下代码（在我调用 canvas.drawText() 之前）使我的文本斜体：

```
mPaintText.setTypeface(Typeface.defaultFromStyle(Typeface.ITALIC)); 
```

这适用于三星 Galaxy Nexus。但在 Samsung Epic 4g (galaxy S)、Samsung Epic Touch (Galaxy SII) 和 Samsung Transform ultra 上，我的文字仍然不是斜体。

有谁知道为什么其中一些三星设备不支持以这种方式设置斜体文本？我知道这些设备能够呈现斜体文本，因为如果我有一个 TextView 我可以使用

```
tv.setText(Html.fromHtml("<i>sometext</i>"); 
```

在 java 或

```
android:textStyle="italic" 
```

在 layout.xml 中，我的文本显示为斜体。

有谁知道我可以设置画布的 drawText() 方法来绘制可能在这些设备上工作的斜体文本的另一种方法？

**编辑：**

以下是我在评论中尝试过的一些方法及其结果的列表。事实证明，SERIF 似乎是唯一可以使用的字体。

```
mPaint.setTypeface(Typeface.create(Typeface.DEFAULT, Typeface.ITALIC) //Nothing
mPaint.setTypeface(Typeface.create(Typeface.DEFAULT_BOLD, Typeface.ITALIC) //Nothing
mPaint.setTypeface(Typeface.create(Typeface.SERIF, Typeface.ITALIC) //omg it is italic...But serifs look gross.
mPaint.setTypeface(Typeface.create(Typeface.SANS_SERIF, Typeface.ITALIC) //Nothing
mPaint.setTypeface(Typeface.create(Typeface.MONOSPACE, Typeface.ITALIC) //Changes font, but still no italic.
mPaint.setTypeface(Typeface.create(Typeface.DEFAULT, Typeface.BOLD_ITALIC) //Bold but no italic 
```

**再次编辑：**为了实现这个功能，我最终将斜体版的机器人字体添加到我的资产文件夹并将其应用为字体。如果有人找到一种方法让它工作而不以这种方式添加它，我仍然会感兴趣。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T19:41:14.653

可能是您的三星设备没有安装所需字体的原生斜体版本。您可能必须强制系统综合创建斜体样式字体。尝试：

> `tv.setTypeface(Typeface.defaultFromStyle(Typeface.ITALIC),` **`Typeface.ITALIC`**`);`

**编辑**

代替`defaultFromStyle`，尝试使用`Typeface.create (Typeface family, int style)`（[在此处](http://developer.android.com/reference/android/graphics/Typeface.html#create(java.lang.String,int))记录）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-12T09:31:07.070

尝试将直接值传递给`setTypeFace`api，直到找到正确的值。如果斜体是通过其他方法进行的，那么`TypeFace`类中的常量定义可能存在一些问题（在那些构建中）。

```
mPaintText.setTypeface(Typeface.defaultFromStyle(0)); // then 1, 2, 3 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-19T20:14:17.573

这是三星的一个错误，正如 FomayGuy 所说，最好的解决方案是将系统字体的斜体版本添加到资产中。

官方 Roboto Android 字体可[在此处](http://developer.android.com/design/style/typography.html)获得。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-10-06T11:39:33.627

我们需要检查默认字体是否支持斜体模式。我们通过创建一个临时 TextView 对象并在两种模式（NORMAL 和 ITALIC）下测量其宽度来做到这一点。如果它们的宽度不同，则表示支持斜体模式。否则，默认字体不支持它，我们必须使用 setTextSkewX() 方法来倾斜文本。

```
 mPaint.setTypeface(Typeface.create(Typeface.DEFAULT, Typeface.ITALIC));

    // check whether a font supports an italic mode, returns false if it does't
    if (!supportItalicMode(this, Typeface.DEFAULT))
    {
        paint.setTextSkewX(-0.25f);
    }

private boolean supportItalicMode(Context context, Typeface typeFace)
{
    Typeface tfNormal = Typeface.create(typeFace, Typeface.NORMAL);
    Typeface tfItalic = Typeface.create(typeFace, Typeface.ITALIC);

    TextView textView = new TextView(context);
    textView.setText("Some sample text to check whether a font supports an italic mode");

    textView.setTypeface(tfNormal);
    textView.measure(0, 0);
    int normalFontStyleSize = textView.getMeasuredWidth();

    textView.setTypeface(tfItalic);
    textView.measure(0, 0);
    int italicFontStyleSize = textView.getMeasuredWidth();

    return (normalFontStyleSize != italicFontStyleSize);
} 
```

# android - Android、libgdx 和 box2d 基础知识

> ID：10420088
> 
> 赞同：10
> 
> 时间：2012-05-02T19:07:11.587
> 
> 标签：android, box2d, game-physics, libgdx

自从我开始学习 android 以来，我写了几个简单的棋盘游戏，请告诉我是否有任何教程或链接，我可以从 libgdx 的物理库开始，寻找类似 libgdx 的物理基础知识

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-02T22:32:50.987

我将从[libGDX wiki](https://github.com/libgdx/libgdx/wiki/Box2d)上的官方文档开始。这将使您启动并运行一些基本示例。一旦你超越了基础，使用[box2d 手册](http://box2d.org/documentation.html)将填写所有细节。它非常容易阅读，而且将 C 翻译成 Java 也不难。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-03T12:32:45.560

这些教程可能会有所帮助： [http ://decisiontreegames.wordpress.com/2012/04/14/using-box2d-in-libgdx-game-part-i/](http://decisiontreegames.wordpress.com/2012/04/14/using-box2d-in-libgdx-game-part-i/)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-05-02T19:33:48.763

您可以在本书中找到有关如何在 android 中使用 box2d 的非常有用的信息 - Android NDK Beginner's Guide

# json.net - VB.Net 中需要的简单 JSON 解析示例

> ID：10420095
> 
> 赞同：0
> 
> 时间：2012-05-02T19:07:52.553
> 
> 标签：json.net

我正在使用 Newtonsoft Json 解析器做我的第一步，但在 VB.net 上显然有很多 fex 示例。我只想解析一个字符串，然后我希望能够遍历不同的列表

这是我的代码：

```
Dim JSON As String
Dim values As Newtonsoft.Json.Linq.JObject
JSON = "{'mailadresses': {    'List1':{'Stefaan Somers': 'JoskeVermeulen@gmail.com',          'Markske': 'mdtre@gmail.com'       }, 'List2':{'Stefaan XSomers': 'Test@gmail.com',         'xMarkske': 'mdrmdtre@gmail.com'       }}"
values = JObject.Parse(JSON) 
```

它在运行时直接给我错误：加载 JObject 时内容意外结束。路径“mailadresses”，第 1 行，位置 221。

关于如何遍历不同元素的任何想法。如许多示例中所述，我不想转换为自定义类

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T19:50:47.977

根据 jsonlint，您的 json 无效。

试试这个：

```
{
    "mailadresses": {
        "List1": {
            "StefaanSomers": "JoskeVermeulen@gmail.com",
            "Markske": "mdtre@gmail.com"
        },
        "List2": {
            "StefaanXSomers": "Test@gmail.com",
            "xMarkske": "mdrmdtre@gmail.com"
        }
    }
} 
```

# linux - 绕行和 GCC 内联汇编 (Linux)

> ID：10420102
> 
> 赞同：8
> 
> 时间：2012-05-02T19:08:40.410
> 
> 标签：linux, gcc, assembly, hook, detours

我正在为一个为（我们）modder 提供 API 的游戏编写扩展程序。这个 API 提供了各种各样的东西，但它有一个限制。API 仅适用于“引擎”，这意味着基于引擎发布的所有修改（模组）不提供/具有任何类型的（特定于模组的）API。我创建了一个“签名扫描器”（注意：我的插件作为共享库加载，使用 -share 和 -fPIC 编译）找到感兴趣的功能（这很容易，因为我在 linux 上）。所以来解释一下，我将举一个具体的例子：我找到了一个感兴趣的函数的地址，它的函数头很简单`int * InstallRules(void);`. 它需要一个空值（void）并返回一个整数指针（指向我感兴趣的对象）。现在，我想做的是创建一个绕道（并记住我有函数的起始地址）到我自己的函数，我想这样做：

```
void MyInstallRules(void)
{
    if(PreHook() == block) // <-- First a 'pre' hook which can block the function
        return;
    int * val = InstallRules(); // <-- Call original function
    PostHook(val); // <-- Call post hook, if interest of original functions return value
} 
```

现在这是交易；我对函数挂钩没有任何经验，而且我对内联汇编（仅限 AT&T）知之甚少。网上预制的detour包*只*适用于windows或者是使用其他方法（即预加载一个dll来覆盖原来的）。所以基本上; 我应该怎么做才能走上正轨？我应该阅读调用约定（在这种情况下为 cdecl）并了解内联汇编，还是应该做什么？最好的可能是用于 linux 绕行的已经有功能的包装类。最后，我想要这样简单的东西：

```
void * addressToFunction = SigScanner.FindBySig("Signature_ASfs&43"); // I've already done this part
void * original = PatchFunc(addressToFunction, addressToNewFunction); // This replaces the original function with a hook to mine, but returns a pointer to the original function (relocated ofcourse)
// I might wait for my hook to be called or whatever
// ....

// And then unpatch the patched function (optional)
UnpatchFunc(addressToFunction, addressToNewFunction); 
```

我知道我无法在这里得到一个完全令人满意的答案，但我非常感谢一些关于方向的帮助，因为我在这里如履薄冰......我读过关于绕道但几乎没有根本没有任何文档（特别是针对 linux），我想我想实现所谓的“蹦床”，但我似乎无法找到获取这些知识的方法。

注意：我也对 _thiscall 感兴趣，但从我读过的内容来看，使用 GNU 调用约定调用并不难（？）

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-02T19:25:14.760

这个项目是否要开发一个“框架”，允许其他人在不同的二进制文件中挂钩不同的功能？还是只是*您*需要挂钩您拥有的这个特定程序？

首先，假设您想要第二件事，您只需在二进制文件中有一个要以编程方式且可靠地挂钩的函数。普遍这样做的主要问题是可靠地做到这一点是一个非常艰难的游戏，但如果你愿意做出一些妥协，那么它绝对是可行的。还让我们假设这是 x86 的事情。

如果你想挂钩一个函数，有几个选项可以做到这一点。Detours[所做](http://research.microsoft.com/en-us/projects/detours/)的是*内联修补*。他们很好地概述了它在[Research PDF 文档](http://research.microsoft.com/pubs/68568/huntusenixnt99.pdf)中的工作原理。基本思想是你有一个功能，例如

```
00E32BCE  /$ 8BFF           MOV EDI,EDI
00E32BD0  |. 55             PUSH EBP
00E32BD1  |. 8BEC           MOV EBP,ESP
00E32BD3  |. 83EC 10        SUB ESP,10
00E32BD6  |. A1 9849E300    MOV EAX,DWORD PTR DS:[E34998]
...
... 
```

现在，您将函数的开头替换为函数的 CALL 或 JMP，并将您用补丁覆盖的原始字节保存在某处：

```
00E32BCE  /$ E9 XXXXXXXX    JMP MyHook
00E32BD3  |. 83EC 10        SUB ESP,10
00E32BD6  |. A1 9849E300    MOV EAX,DWORD PTR DS:[E34998] 
```

（请注意，我覆盖了 5 个字节。）现在，您的函数使用与原始函数相同的参数和调用约定进行调用。如果您的函数想要调用原始函数（但不是必须），则创建一个“蹦床”，即 1) 运行被覆盖的原始指令 2) jmps 到原始函数的其余部分：

```
Trampoline:
    MOV EDI,EDI
    PUSH EBP
    MOV EBP,ESP
    JMP 00E32BD3 
```

就是这样，您只需要在运行时通过发出处理器指令来构造蹦床函数。这个过程的难点在于让它可靠地工作，适用于任何功能、任何调用约定以及不同的操作系统/平台。其中一个问题是，如果您要覆盖的 5 个字节在指令中间结束。要检测“指令结束”，您基本上需要包含一个反汇编程序，因为函数开头可以有任何指令。或者当函数本身短于 5 个字节时（始终返回 0 的函数可以写成`XOR EAX,EAX; RETN`只有 3 个字节）。

大多数当前的编译器/汇编器产生一个 5 字节长的函数序言，正是为了这个目的，钩子。看到了`MOV EDI, EDI`吗？如果您想知道，“他们为什么将 edi 移到 edi？那什么都没做！？” 你是绝对正确的，但这是序言的目的，正好是 5 个字节长（不是在指令中间结束）。请注意，反汇编示例不是我编造的，它是 Windows Vista 上的 calc.exe。

其余的钩子实现只是技术细节，但它们会给您带来数小时的痛苦，因为这是最难的部分。还有您在问题中描述的行为：

```
void MyInstallRules(void)
{
    if(PreHook() == block) // <-- First a 'pre' hook which can block the function
        return;
    int * val = InstallRules(); // <-- Call original function
    PostHook(val); // <-- Call post hook, if interest of original functions return value
} 
```

似乎比我所描述的（以及 Detours 所做的）更糟糕，例如，您可能想要“不调用原始值”但返回一些不同的值。或者两次调用原始函数。相反，让您的钩子处理程序决定是否以及在何处调用原始函数。此外，您不需要两个处理函数来进行挂钩。

如果您对此所需的技术（主要是组装）没有足够的了解，或者不知道如何进行挂钩，我建议您研究一下 Detours 是做什么的。挂钩您自己的二进制文件并使用调试器（例如 OllyDbg）在汇编级别查看它到底做了什么，放置了哪些指令以及放置在哪里。[本教程](http://www.codeproject.com/Articles/30140/API-Hooking-with-MS-Detours)也可能会派上用场。

无论如何，如果您的任务是在特定程序中挂钩某些功能，那么这是可行的，如果您有任何问题，请再次在这里询问。基本上你可以做很多假设（比如函数序言或使用的约定），这将使你的任务更容易。

如果你想创建一些可靠的钩子框架，那仍然是一个完全不同的故事，你应该首先为一些简单的应用程序创建简单的钩子。

另请注意，此技术不是特定于操作系统的，它在所有 x86 平台上都是相同的，它适用于 Linux 和 Windows。*特定于操作系统的是*，您可能必须更改代码的内存保护（“解锁”它，以便您可以写入它），这`mprotect`在 Linux 和`VirtualProtect`Windows 上都可以完成。调用约定也不同，这就是您可以通过在编译器中使用正确的语法来解决的问题。

另一个麻烦是“DLL 注入”（在 Linux 上它可能被称为“共享库注入”，但*DLL 注入*这个术语已广为人知）。您需要将代码（执行挂钩）放入程序中。我的建议是，如果可能，只需使用 LD_PRELOAD 环境变量，您可以在其中指定将在程序运行之前加载到程序中的库。这已经被描述过很多次了，就像这里：[什么是 LD_PRELOAD 技巧？](https://stackoverflow.com/questions/426230/what-is-the-ld-preload-trick). 如果您*必须*在运行时执行此操作，恐怕您需要使用 gdb 或 ptrace，我认为这很难（至少 ptrace 的事情）。

I also found some nice resources:

*   [SourceHook project](http://wiki.alliedmods.net/SourceHook_Development), but it seems it's only for virtual functions in C++, but you can always take a look at [its source code](http://svn.alliedmods.net/viewvc.cgi/trunk/sourcehook/?root=sourcemm)
*   [this forum thread](http://www.gamedeception.net/showthread.php?13665-simple-*nix-detours) giving a simple 10-line function to do this "inline hook" that I described
*   [this a little more complex code](http://aimbots.net/tutorials/14469-detours-linux-windows.html) in a forum
*   [here on SO](https://stackoverflow.com/questions/2650196/port-win32-dll-hook-to-linux) is some example

Also one other point: This "inline patching" is not the only way to do this. There are even simpler ways, e.g. if the function is *virtual* or if it's a library exported function, you can skip all the assembly/disassembly/JMP thing and simply replace the pointer to that function (either in the table of virtual functions or in the exported symbols table).

# java - 带有php函数参数的Http GET方法

> ID：10420105
> 
> 赞同：0
> 
> 时间：2012-05-02T19:08:50.167
> 
> 标签：java, android, http, get

我是 java / android 的新手，因为我为 IOS 安排了时间，但我怀疑将参数发送到 PHP 中的函数

好吧，是一个表单，当用户点击发送时，我将表单的内容保存在字符串中。

最后有字符串 4

姓名电子邮件名称用户电子邮件用户

我需要将它们发送到 php 中，我按照本[教程](http://w3mentor.com/learn/java/android-development/android-http-services/example-of-http-get-request-using-httpclient-in-android/)进行操作：

但我的问题是将字符串的值作为函数的参数

在 IOS 中做了以下工作：

……

```
NSString *urlEnvio = [[NSString alloc] initWithFormat:@"http://www.xxxx.com.br/indicar.php?destinatario=%@&remetente=%@&nomedestinatario=%@&nome=%@&enviar=%@", destinatario, remetente, nome,nomeRemetente, check]; 
```

...

是我需要java的东西。

根据要求，我编辑了帖子......

```
@Override
            public void onClick(View v) {
                String nome = seuNome.getText().toString();
                String email = seuEmail.getText().toString();
                String strNomeAmigo = nomeAmigo.getText().toString();
                String strEmailAmigo = emailAmigo.getText().toString();

                //chama funcao que envia
                indicar();

            }
        });
    }

    public void indicar(){
          new Thread(new Runnable() {
                public void run() {
                    BufferedReader in = null;
                    try {
                        HttpClient client = new DefaultHttpClient();
                        HttpGet request = new HttpGet();
                        request.setURI(new URI("http://www.xxxx.com.br/indicar.php?"));
                        //send to this address with the parameters: name, email, strNomeAmigo, strEmailAmigo
                        //

                        HttpResponse response = client.execute(request);
                        in = new BufferedReader
                        (new InputStreamReader(response.getEntity().getContent()));
                        StringBuffer sb = new StringBuffer("");
                        String line = "";
                        String NL = System.getProperty("line.separator");
                        while ((line = in.readLine()) != null) {
                            sb.append(line + NL);
                        }
                        in.close();
                        String page = sb.toString();
                        System.out.println(page);
                        } finally {
                        if (in != null) {
                            try {
                                in.close();
                                } catch (IOException e) {
                                e.printStackTrace();
                            }
                        }
                    }
                }

                }
            }).start();

    } 
```

……

使用参数发送到此地址：姓名、电子邮件、strNomeAmigo、strEmailAmigo

像这样的东西：[http](http://www.xxxxx.com.br/indicar.php?nome=name_example&email=example@example.com) ://www.xxxxx.com.br/indicar.php? nome=name_example&email=example@example.com ......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T19:28:51.433

你的问题是用你的参数编码一个url，对吧？如果是这样，您可以为此使用[String.format 。](http://developer.android.com/reference/java/util/Formatter.html#format%28java.lang.String,%20java.lang.Object...%29)这[如何编码 URI 参数值？](https://stackoverflow.com/questions/444112/how-do-i-encode-uri-parameter-values)SO question也解决了同样的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T19:29:15.180

在 Java 中有多种连接字符串的方法。格式化字符串的一种方法是使用`String.format`：

```
String urlEnvio = String.format("http://www.xxxx.com.br/indicar.php?destinatario=%s&remetente=%s&nomedestinatario=%s&nome=%s&enviar=%s", destinatario, remetente, nome, nomeRemetente, check); 
```

我更喜欢使用验证和正确转义参数的东西，所以我更喜欢[`Uri.Builder`](http://developer.android.com/reference/android/net/Uri.Builder.html).

# c# - 从列表列表中打印数据

> ID：10420106
> 
> 赞同：0
> 
> 时间：2012-05-02T19:08:57.900
> 
> 标签：c#, list

我在我的程序中声明了一个列表

```
List<List<object>> result = new List<List<object>>(); 
```

如何将数据打印`result`到控制台？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-02T19:12:15.903

```
foreach (var sublist in result)
{
    foreach (var obj in sublist)
    {
        Console.WriteLine(obj);
    }
} 
```

或者，如果您想使用 linq：

```
foreach (var obj in result.SelectMany(l => l.Select(o => o)))
{
    Console.WriteLine(obj);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T19:10:50.980

如果您使用的是 linq，请尝试

[SelectMany](http://msdn.microsoft.com/en-us/library/bb534336.aspx)扩展

查看以下链接以获取示例

[Linq SelectMany 运算符](http://www.codethinked.com/the-linq-selectmany-operator)

# uinavigationitem - iPhone SDK -> RightBarButtonItem 在通过 AppDelegate 加载视图时消失

> ID：10420107
> 
> 赞同：1
> 
> 时间：2012-05-02T19:09:00.600
> 
> 标签：uinavigationitem, ios5

所以我的 rightbarbuttonitem 消失有问题。我有两种加载这个视图的方法，第一次启动它在用户输入他们的名字后加载它（从初始视图）。第二次（在应用程序退出后），它检查该名称是否存在于我存储的数据库中，如果存在，它会立即加载视图。这第二次是按钮不显示的地方。

该按钮最初是在我的视图的 viewDidLoad 中设置的（并且仍然在此处设置为第一次加载）：

```
if (self.navigationItem.rightBarButtonItem == nil){
    addButton = [[UIBarButtonItem alloc] initWithBarButtonSystemItem:UIBarButtonSystemItemAdd target:self action:@selector(buttonPressed)];
    self.navigationItem.rightBarButtonItem = addButton;
    [self.navigationItem.rightBarButtonItem retain];
} 
```

然后在我的 AppDelegate 的 .m 中，我添加了按钮，认为这将在第二次加载时解决它：

```
if(success){
    self.window = [[[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]] autorelease];
    UIViewController *control = [[ViewController alloc] initWithNibName:@"myNib" bundle:nil];
    [control retain];
    UINavigationController *navControl = [[UINavigationController alloc] initWithRootViewController:control];

    [navControl retain];
    [self.window setRootViewController:navControl];

    if (navControl.navigationItem.rightBarButtonItem == nil){
        addButton = [[UIBarButtonItem alloc] initWithBarButtonSystemItem:UIBarButtonSystemItemAdd target:self action:@selector(buttonPressed)];
        navControl.navigationItem.rightBarButtonItem = addButton;
        [navControl.navigationItem.rightBarButtonItem retain];
    }
    //[navControl release];
    [self.window makeKeyAndVisible];
    return; 
```

这是 App Delegate 的标头和我的视图标头中 addButton 的声明：

```
UIBarButtonItem *addButton;

@property (nonatomic, retain) UIBarButtonItem *addButton 
```

其他帖子说要检查 viewDidLoad/viewWillAppear 但将第一个代码简介放在其中任何一个中都不能解决问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T07:37:48.640

自己解决了，因为按钮从未添加到笔尖，初始化 UIViewController 没有帮助。我必须初始化我的视图控制器。

换句话说，将：替换`UIViewController *control = [[ViewController alloc] initWithNibName:@"myNib" bundle:nil];`为：`MyViewControllerClassName *control = [[MyViewControllerClassName alloc] initWithNibName:@"myNib" bundle:nil];`希望这对将来的其他人有所帮助，如果您愿意的话，感谢您抽出宝贵的时间阅读本文！

# mysql - MySQL - 结合多个查询 + 计数

> ID：10420109
> 
> 赞同：1
> 
> 时间：2012-05-02T19:09:01.707
> 
> 标签：mysql, sql, count, subquery

我正在尝试结合一些查询，但似乎无法确定。我想知道是否有人可以指出我正确的方向。

以下是声明：

```
SELECT
I.id,
I.custname,
I.custemail,
I.sku,
DATE_FORMAT(FROM_UNIXTIME(I.ts), '%l:%i:%s %p, %c/%e/%Y') AS ts
FROM images I
WHERE I.stat = 0

SELECT
COUNT(*) AS total1
FROM images
WHERE stat = 1 AND sku = ?

SELECT
COUNT(*) AS total2
FROM images
WHERE stat = 1 
AND sku IN (SELECT subsku FROM combo WHERE sku = ?) 
```

现在我正在使用 3 个单独的查询，并使用代码来添加两个总数并显示它们。但是我现在需要能够按总数的总和进行排序，所以我想将所有这些数据放入一个语句中......就像：

```
SELECT
I.id,
I.custname,
I.custemail,
I.sku,
DATE_FORMAT(FROM_UNIXTIME(I.ts), '%l:%i:%s %p, %c/%e/%Y') AS ts,
SUM(total1+total2)
FROM images I
WHERE I.stat = 0 
```

但我不确定该怎么做。我尝试了下面的代码，但失败了：

```
SELECT 
I.id, 
I.custname, 
I.custemail, 
I.sku, 
DATE_FORMAT(FROM_UNIXTIME(I.ts),'%l:%i:%s %p, %c/%e/%Y') AS ts, 
(
    SELECT COUNT(*) AS total1 FROM images WHERE stat = 1 AND (
        sku IN (
            SELECT subsku FROM combo WHERE sku = I.sku
    ) OR sku = I.sku)
) AS skuct 
FROM images I 
WHERE stat = 0 
```

任何帮助将不胜感激。非常感谢！

**更新**

首先感谢所有提供帮助的人。我一直在处理查询并认为我越来越近了，但我现在遇到了“子查询返回超过 1 行”错误：

```
SELECT 
I.id, 
I.custname, 
I.custemail, 
I.sku,
DATE_FORMAT(FROM_UNIXTIME(I.ts), '%l:%i:%s %p, %c/%e/%Y') AS ts,
(
    SELECT COUNT(*)
    FROM images
    WHERE stat = 1 
    AND sku = I.sku
    OR sku IN(
        SELECT subsku FROM combo WHERE sku = I.sku
    )
GROUP BY sku
) AS total
FROM images I
WHERE stat = 0 
```

问题是子查询`SELECT subsku FROM combo WHERE...`返回结果集（0+ 行）与标量。如果我能弄清楚那部分，我认为这会奏效。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T19:22:14.820

```
Select I.id, I.custname, I.custemail, I.sku
    , DATE_FORMAT(FROM_UNIXTIME(I.ts), '%l:%i:%s %p, %c/%e/%Y') AS ts
    ,   (
        Select Sum( Case
                    When I1.sku = ? Then 1
                    When I1.sku In( Select subsku From combo As S1 Where S1.sku = ? ) Then 1
                    Else 0
                    End ) As Total
        From images As I1
        Where I1.stat = 1
        ) As Total
From images As I
Where stat = 0 
```

另一种解决方案

```
Select I.id, I.custname, I.custemail, I.sku
    , DATE_FORMAT(FROM_UNIXTIME(I.ts), '%l:%i:%s %p, %c/%e/%Y') AS ts
    ,   (
        Select Count(*)
        From images As I1
        Where I1.stat = 1
            And (
                I1.sku = ?
                Or I1.sku In ( Select subsku From combo As S1 Where S1.sku = ? )
                )
        ) As Total
From images As I
Where stat = 0 
```

**添加**

另一种可能的解决方案：

```
Select I.id, I.custname, I.custemail, I.sku
    , DATE_FORMAT(FROM_UNIXTIME(I.ts), '%l:%i:%s %p, %c/%e/%Y') AS ts
    ,   (
        Select Sum( Cnt )
        From    (
                Select Count(*) As Cnt
                From images As I1
                    Left Join combo As C1
                        On C1.sku = I1.sku
                Where I1.stat = 1
                    And I1.sku = ?
                    And C1.PrimaryKeyCol Is Null
                Union All 
                Select Count( Distinct I1.PrimaryKeyCol )
                From images As I1
                    Join combo As C1
                        On C1.sku = I1.sku
                Where I1.stat = 1
                    And I1.sku = ?
                ) As Z
        ) As Total
From images As I
Where stat = 0 
```

**编辑**

如果您正在查找将计数与外部表 sku 列相关联的*图像*`images`计数，那就完全不同了。为此，我将使用派生表：

```
Select I.id, I.custname, I.custemail, I.sku
    , DATE_FORMAT(FROM_UNIXTIME(I.ts), '%l:%i:%s %p, %c/%e/%Y') AS ts
    , Counts.Total
From images As I
    Join    (
            Select Z.sku, Sum(Z.Cnt) As Total
            From    (
                    Select I1.sku, Count(*) As Cnt
                    From images As I1
                        Left Join combo As C1
                            On C1.sku = I1.sku
                    Where I1.stat = 1
                        And C1.PrimaryKeyCol Is Null
                    Group By I1.sku
                    Union All 
                    Select I1.sku, Count( Distinct I1.PrimaryKeyCol )
                    From images As I1
                        Join combo As C1
                            On C1.sku = I1.sku
                    Where I1.stat = 1
                    Group By I1.sku
                    ) As Z
            Group By Z.sku
            )  As Counts
        On Counts.sku = I.sku
Where stat = 0 
```

显然在所有情况下，替换为表`PrimaryKeyCol`的实际主键列的名称`images`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T19:16:29.857

您是否考虑过更改`WHERE`逻辑以执行计数。假设这两个计数是互斥的，你可以只`OR`考虑这两个条件。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-02T19:18:27.147

使用交叉连接。. .

```
select t1.*, t2.total1, t3.total2
from 
(
  SELECT I.id, I.custname, I.custemail, I.sku,
      DATE_FORMAT(FROM_UNIXTIME(I.ts), '%l:%i:%s %p, %c/%e/%Y') AS ts
  FROM images I
  WHERE I.stat = 0
) t1 
cross join
(
  SELECT COUNT(*) AS total1
  FROM images
  WHERE stat = 1 AND sku = ?
) t2 
cross join
(
  SELECT COUNT(*) AS total2
  FROM images
  WHERE stat = 1  AND sku IN (SELECT subsku FROM combo WHERE sku = ?) 
) t3 
```

您也许可以提高效率，因为它们都在同一张桌子后面。每个子句带有 case 语句的单个聚合`WHERE`可能会更有效。

# php - 如何读取 zip 存档中的单个文件

> ID：10420112
> 
> 赞同：42
> 
> 时间：2012-05-02T19:09:10.167
> 
> 标签：php, zip, gzip, zlib

我需要读取 zip 文件中单个文件“test.txt”的内容。整个 zip 文件是一个非常大的文件（2gb）并且包含很多文件（10,000,000），因此提取整个文件对我来说不是一个可行的解决方案。如何读取单个文件？

* * *

## 回答 #1

> 赞同：60
> 
> 时间：2012-05-02T19:15:30.423

尝试使用[`zip://`包装器](http://php.net/manual/en/wrappers.compression.php)：

```
$handle = fopen('zip://test.zip#test.txt', 'r'); 
$result = '';
while (!feof($handle)) {
  $result .= fread($handle, 8192);
}
fclose($handle);
echo $result; 
```

你也可以使用[`file_get_contents`](http://php.net/file_get_contents)：

```
$result = file_get_contents('zip://test.zip#test.txt'); 
echo $result; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2020-02-08T03:06:53.267

请注意@Rocket-Hazmat`fopen`解决方案如果 zip 文件受密码保护，可能会导致无限循环，因为`fopen`会失败并且`feof`无法返回 true。

**您可能希望将其更改为**

```
$handle = fopen('zip://file.zip#file.txt', 'r');
$result = '';
if ($handle) {
    while (!feof($handle)) {
        $result .= fread($handle, 8192);
    }
    fclose($handle);
}
echo $result; 
```

这解决了无限循环问题，但如果您的 zip 文件受密码保护，那么您可能会看到类似

> 警告：file_get_contents(zip://file.zip#file.txt)：打开流失败：操作失败

不过有解决办法

自 PHP 7.2 起，添加了对加密档案的支持。

**所以你可以这样** `file_get_contents` **做** `fopen`

```
$options = [
    'zip' => [
        'password' => '1234'
    ]
];

$context = stream_context_create($options);
echo file_get_contents('zip://file.zip#file.txt', false, $context); 
```

**但是，在阅读文件之前检查文件是否存在而不用担心加密档案的更好解决方案是使用** [ZipArchive](https://www.php.net/manual/en/class.ziparchive.php)

```
$zip = new ZipArchive;
if ($zip->open('file.zip') !== TRUE) {
    exit('failed');
}
if ($zip->locateName('file.txt') !== false) {
    echo 'File exists';
} else {
    echo 'File does not exist';
} 
```

这将起作用（无需知道密码）

> 注意：要使用`locateName`方法定位文件夹，您需要`folder/`在末尾使用正斜杠传递它。

# c++ - C++ 在二维数组中保存位置

> ID：10420114
> 
> 赞同：1
> 
> 时间：2012-05-02T19:09:13.863
> 
> 标签：c++, multidimensional-array

在忙着做一个小游戏。我必须逐块移动二维数组中的人。问题是我知道如何移动它，但距离原来的 BLOCK 只有一个街区。我想知道如何保存当前在数组中的位置。

```
void DisplayBoard(char** array,int row,int col,char direction){

int NewRow(0),NewCol(1);//I believe my problem is here. 

if(direction =='a')
{
    NewCol--;
}
if(direction =='s')
{
    NewRow++;
}
if(direction == 'd')
{
    NewCol++;
}
if(direction == 'w')
{
    NewRow--;
}

array[0][1] = EMPTY;
array[NewRow][NewCol] = MAN;

 for(int i = 0;i < row ; i++){

    for(int c = 0; c < col; c++){

      cout << array[i][c]<<" ";
    }
      cout <<endl<<endl;
 }
} 
```

我认为我的问题在于我将新数组设为初始值的部分。我想保存我所在的块并将其移动例如向下并保存该位置并将其从那里向下移动。

我该怎么做，请帮忙。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T19:23:25.443

一个简单的解决方案是为您当前的块位置使用**静态**变量。静态变量存在并在程序的生命周期内保持它们的值。在您当前的实现中，*NewRow*和*NewCol*是**自动**变量，这意味着它们在函数完成时被取消分配，并在函数被调用时重新分配。这将导致值重置回 0 和 1。静态定义当前行变量如下所示：

```
static int NewRow(0), NewCol(1); 
```

这会将变量初始化为 0 和 1，但是，即使在函数结束后，对这些变量的任何更新或更改都将持续存在。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T19:27:54.830

一个简单的解决方法是将方法移出`NewCol`和`NewRow`移出，从而使它们的状态不依赖于方法调用。

更好的解决方案是创建一个包含数组和当前位置的新结构，例如：

```
struct GameBoard {
   char **fields;
   int col;
   int row;
}; 
```

然后将 GameBoard 作为输入：

```
void DisplayBoard(Gameboard& board,int row,int col,char direction){
    int prevCol = board.col, prevRow = board.row;
    if(direction =='a')
    {
        board.col--;
    }
    if(direction =='s')
    {
         board.row++;
    }
    if(direction == 'd')
    {
         board.col++;
    }
    if(direction == 'w')
    {
         board.row--;
    }
    array[prevRow][prevCol] = EMPTY;
    array[board.row][board.col] = MAN;
    for(int i = 0;i < row ; i++){

        for(int c = 0; c < col; c++){

           cout << array[i][c]<<" ";
        }
        cout <<endl<<endl;
    }
} 
```

**更新** 正如 beta 提议的那样，可以将这些事情作为成员函数来代替。由于存在安全检查，我还将使用 std::vector 而不是二维数组。因此，我的最终解决方案是：

```
 class GameBoard {
       private:
       std::vector< std::vector<char> > _fields;
       int _col;
       int _row;
       public:
       GameBoard(int ncol, int nrow, int startcol, int startrow)
          : _col(startcol),  _row(startrow), _fields(nrow)  {
              for(int i = 0; i < nrow; i++) {
                   for (int j = 0; j < ncol; j++) {
                       _fields[i].push_back(EMPTY);
                   }
              }
              _fields[_row][_col] = MAN;
       }
       void move_man(char direction) {
             int prevCol = _col, prevRow = _row;
             switch(direction) {
                  case 'a': _col--; break;
                  case 'd': _col++; break;
                  case 'w': _row--; break;
                  case 's': _row++; break;
             }
             _fields[prevRow][prevCol] = EMPTY;
             _fields[_row][_col] = MAN; 
       }
       void display_board() {
             for (int i = 0; i < _fields.size(); i++) {
                  for (int j = 0; j < _fields[i].size(); j++) {
                      std::cout << _fields[i][j] << " ";
                  }
                  std::cout << std::endl;
             }
       }
  }; 
```

# asp.net-mvc-3 - 如何返回另一个控制器动作的 Async ActionResult？

> ID：10420115
> 
> 赞同：3
> 
> 时间：2012-05-02T19:09:14.657
> 
> 标签：asp.net-mvc-3

我有两个控制器：A 派生自 AsyncController，B 派生自 Controller。A 具有 DoAsync 和 DoCompleted 方法。我需要从 B 控制器的动作返回 A 控制器的动作 Do 的动作结果而无需重定向。如果我尝试从 B 控制器中的操作返回 A.Do()，则返回 null。（我使用 T4MVC）

# ms-access - 在报告中，仅在第一行之后重复某些列

> ID：10420116
> 
> 赞同：1
> 
> 时间：2012-05-02T19:09:21.717
> 
> 标签：ms-access, reporting

我的任务是在 Access 中复制在 Filemaker 数据库中运行的特定报告。输出应如下所示：

```
名称 日期 项目
乔 2012 年 5 月 2 日口香糖
                      胶带
                      肥皂
安 2012 年 5 月 1 日论文
鲍勃 2012 年 5 月 1 日 笔
                      纸

```

记录看起来像这样（这是一个连接“person”和“items”表的查询，它们具有 1:many 关系）：

```
名称 日期 项目
乔 2012 年 5 月 2 日口香糖
乔 2012 年 5 月 2 日磁带
乔 5/2/2012 肥皂
安 2012 年 5 月 1 日论文
鲍勃 2012 年 5 月 1 日 笔
鲍勃 2012 年 5 月 1 日论文

```

在报告中，我需要第一个项目总是出现在第一行，完整的行中；如果有更多项目，则仅应在后续行中列出项目（名称和日期值不应重复）。

我不太确定要吠叫哪棵树：

*   在 RDL 中，我可以有条件地逐行隐藏报表项...我可以在 Access 报表中执行此操作吗（在 Access 连续表单中，我认为无法做到这一点 - Visible 设置同时适用于所有行，我思考）
*   我可以使用组来执行此操作，将第一行完整的行放在组标题中，并将后续行放在详细信息部分中吗？如果是这样，我不确定如何只获得标题中的第一项，以及如何在详细信息部分抑制该第一项
*   其他想法？我是否需要考虑不同的记录来源或来源？

到目前为止，我唯一能做的就是对这个人进行分组，在组标题中使用 NAME 和 DATE，然后将所有项目都放在详细信息中，但这并不是我被要求做的。

感谢期待“啊哈！”。

克里斯

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-02T19:15:12.253

1.  按名称添加组
2.  将**所有**字段放在详细信息中
3.  在所有字段上打开隐藏重复项

将 Group by 放在名称上的目的是防止 Bob 的日期和项目被 Ann 的日期和项目隐藏。

顺便说一句，同样的技术适用于 Crystal 和 Jasper 报告。

**布局视图** ![在此处输入图像描述](../Images/2829adb3503b8ad85a2000dd5ecca15e.png)

**设计视图** ![在此处输入图像描述](../Images/a5ceb424d9048e7af3f8131b7af7a076.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-02T19:17:40.113

1.  在报告中也是如此，您不能像在 RDL 中那样应用条件格式。
2.  这似乎是自然的答案。它本质上是一个分组操作，所以按名称和日期分组，并将这两个放在标题中，然后将项目放在详细信息中。唯一的事情是，正如我认为您所指出的，这些项目将相对于您被询问的内容偏移一行。
3.  当然，您可以将条件逻辑放在查询中，但我认为这在这里不起作用，因为显示/隐藏逻辑取决于组查询。见#2。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-12-03T10:43:30.767

在 jaspersoft iReport 4.6.0

1.  选择“添加报告组”，然后使用您想显示一次的一个字段（例如名称）进行分组。
2.  您需要在详细信息带中添加所有字段
3.  更改要显示一次的“打印重复值”（复选框）的属性。

# java - 匹配字符串中未由某些字符分隔的某些关键字

> ID：10420118
> 
> 赞同：1
> 
> 时间：2012-05-02T19:09:37.700
> 
> 标签：java, regex

在 Java 程序中，我想找出这些子字符串在给定字符串中的所有出现：$$ 或 $\d（符号 '$' 后跟一个整数）。

当我添加一个附加约束时，我的问题开始了，该约束指出只有当匹配的字符串不是受特定字符序列限制的子字符串的一部分时才会发生匹配。

例如，如果匹配是由“/{”和“/}”包围的子字符串的一部分，我想忽略它们。

以下示例带来了所有出现的 $$ 或 $\d，但如果匹配在“/{”和“/}”内，则不考虑忽略匹配的附加约束。

```
public static final String PARAMETERS_PREFIX = "$";
public static final String ALL_PARAMS_SUFFIX = "$";
public static final String BEGIN_JAVA_EXPRESSION = "/{";
public static final String END_JAVA_EXPRESSION = "/}";
...
String test = "$1 xxx $$ " //$1 and $$ are matches
  + BEGIN_JAVA_EXPRESSION + "xxx $2 xxx" + END_JAVA_EXPRESSION; //$2 SHOULD NOT be a match
Set<String> symbolsSet = new LinkedHashSet<String>();
Pattern pattern = Pattern.compile(Pattern.quote(PARAMETERS_PREFIX)+"(\\d+|"+Pattern.quote(ALL_PARAMS_SUFFIX)+")");
Matcher findingMatcher = pattern.matcher(test);
while(findingMatcher.find()) {
  String match = findingMatcher.group();
  symbolsSet.add(match);
}
return new ArrayList<String>(symbolsSet); 
```

除了查找不属于某些子字符串的关键字之外，我还希望之后能够仅用某些值替换那些关键字。然后，在进行匹配之前仅删除分隔字符之间的所有内容的选项可能无济于事，因为之后我需要能够获取原始字符串，并将匹配的标记替换为某些值，并且分隔区域内的标记应该保持不变。如果我找到了正确的正则表达式，这应该很容易。

有人可以给我一个关于如何为这个问题编写正确的正则表达式的提示吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T19:17:15.367

是否允许使用超过 1 个正则表达式？它可能不那么性感，但你可以很容易地用 3 个正则表达式做到这一点。（这些不是实际的正则表达式） 1\. 获取您正在寻找的字符串 ($$ | ${num}) 2\. For '/{' 3\. For '/}'

匹配 2 和 3 中的无效区域应该相当容易。然后您可以使用这些跨度来消除 1 中的结果

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T19:26:35.273

我建议为此使用多个正则表达式。试图一次完成所有事情——虽然很诱人——似乎很麻烦。

1.  从字符串中删除“Java 表达式”：`/{.*?/}`
2.  在结果字符串上运行匹配器：`\$(?:\d+)?`

注意：我对第一个表达式很懒惰，所以它假定任何出现的`/{`最终都会跟随`/}`并且没有嵌套。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-02T20:20:44.160

您需要的第一部分可以使用这个正则表达式来实现：

```
(?<!/{)\($[$|\d])(?!}/) 
```

因此，运行此程序后，您将获得分组中的所有匹配项 - 从现在开始，您可以通过评估组中的匹配项并找到合适的替代项来让 Java 完成艰苦的工作。

您应该能够以某种方式使用反向引用来进行替换，但我想您可以弄清楚。

更新：

`(?<!/{)`- 这是一个消极的向后看 - 它说：从当前位置断言前面的字符不是`/{`. 如果计算结果为真，则 /{ 的匹配被丢弃，真正的匹配开始。Lookahead/lookbehind 是不参与匹配的零宽度断言。

`(?!}/)`- 类似但在另一个方向 - 从当前位置断言以下字符不是}/。这些也没有参加比赛。因此，如果满足这些条件，那么您的匹配仍然只是断言中的文本，即 $$ 或 $\d。

顺便说一句：您可能需要转义一些字符 - 我记得的是 { 和 $ 外部字符类

```
(?<!/\{)\(\$[$|\d])(?!}/) 
```

另请参阅： [如何在 Java 中为正则表达式转义文本](https://stackoverflow.com/questions/60160/how-to-escape-text-for-regular-expression-in-java)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-02T20:32:44.337

您可以使用带有[Lookaround](http://www.regular-expressions.info/lookaround.html)的 Pattern ：

`(?<!\\{[^\\}]{0,100})\\$(\\d|\\$)(?![^\\{]*\\})`

*   `(?<!\\{[^\\}]{0,100})`：*用于限制前任值的组*。

    这使用否定的lookbehind: `{?<!X}`，其中`X`是一个不能在主表达式之前的正则表达式。在 Java 中，如果没有明显的最大长度，则不能使用负 lokbehind，那么就不能使用`\\{.*`. 你可以使用`Integer.MAX_VALUE`, ou `testString.length()`。另一件事：您必须检查是否在开始符号之前找到了结束符号。因此表达式是`[^\\}]`代替`.`。

*   `\\$(\\d|\\$)`:*主要群体寻求*。

    通常在这里。

*   `(?![^\\{]*\\})`:*用于限制后验值的组*

    这使用负前瞻：`{?!X}`，其中`X`是一个不能接替主表达式的正则表达式。在这里，您可以使用无固定长度。同样，您必须检查是否找到了子字符串的开始符号。然后，您使用`[^\\{]*`而不是`.*`.

但是，添加更多约束会增加正则表达式的复杂性。

* * *

用于测试模式的字符串：`"$1 xx3x $$ /{xxx $2 xxx/} $4"`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-02T20:09:57.070

我不确定你可以用一个正则表达式做到这一点。如果没有人可以提供这个终极正则表达式，我做了一个小解决方法：

```
public static final String PARAMETERS_PREFIX = "$";
public static final String ALL_PARAMS_SUFFIX = "$";
public static final String BEGIN_JAVA_EXPRESSION = "/{";
public static final String END_JAVA_EXPRESSION = "/}";

    String test = "$1 xxx $$ " //$1 and $$ are matches
    + BEGIN_JAVA_EXPRESSION + "xxx $2 xxx" + END_JAVA_EXPRESSION; //$2 SHOULD NOT be a match
    Set<String> symbolsSet = new LinkedHashSet<String>();
    Pattern pattern = Pattern.compile(Pattern.quote(PARAMETERS_PREFIX)+"(\\d+|"+Pattern.quote(ALL_PARAMS_SUFFIX)+")");
    Matcher findingMatcher = pattern.matcher(test);
    while(findingMatcher.find()) {
        String match = findingMatcher.group(0);
        int idx= findingMatcher.start();
        int bexIdx = test.lastIndexOf(BEGIN_JAVA_EXPRESSION,idx);
        if(bexIdx!=-1){
            int endIdx = test.indexOf(END_JAVA_EXPRESSION,bexIdx);
            if(endIdx<idx){
                symbolsSet.add(match);
            }
        }
        else{
            symbolsSet.add(match);
        }
    } 
```

# c - 如何在 POSIX C regexec() 中获取所有重复匹配的偏移量？

> ID：10420120
> 
> 赞同：1
> 
> 时间：2012-05-02T19:09:51.940
> 
> 标签：c, regex, posix

我在 C 中使用 regexec() 函数。我基本上是在尝试编写一个正则表达式来捕获字符串的一部分以进行替换。

例如，如果我有字符串“Hello $X”，那么我希望 regexec 给我范围 6,7，因为它是“$X”。但由于可以有任意数量的替换，我使用正则表达式：

```
"([^$]*(\\$[A-Za-z][A-Za-z0-9_]*))+" 
```

这应该匹配任何任意的文本序列+替换模式。

因此，例如在字符串“First=$X, Second=$Y”中，我需要知道 $X 发生在偏移量 6-7 处，而 $Y 发生在偏移量 17-18 处。

我从 regexec 得到的实际偏移量是：0,19 8,19 17,19

首先，我知道结束偏移实际上是匹配字符的一个过去。所以上面的偏移量对应于字符串的以下部分：

```
First=$X, Second=$Y
, Second=$Y
$Y 
```

现在我可以看到这里发生了什么：第一个范围显然是整个匹配，第二个是第二个子表达式的第一个完整子匹配。但从这一点开始，我很困惑。为什么它只返回第二个子表达式的第一个子匹配而不是第一个？

我怀疑这与我有一个重复的表达这一事实有关，但我不确定我需要做什么来解决这个问题。如何让它返回所需的偏移量？

注意：我将 128 个元素的 regmatch_t 传递给 regexec() (nmatch=128)，所以我应该能够获得所有匹配项。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T19:27:43.760

你对第一个和第二个的含义感到困惑。在这个表达式中：

```
"([^$]*(\\$[A-Za-z][A-Za-z0-9_]*))+"
 ^_______________________________^    this part 
```

是第一个括号子表达式和

```
"([^$]*(\\$[A-Za-z][A-Za-z0-9_]*))+"
       ^________________________^    this part 
```

是第二个。如果带括号的子表达式多次用作 、 、 或重复运算符的一部分`*`，`?`则`+`它`{}`是最后一个匹配项。

如果你想匹配任意数量的实例，而不是`+`在你的正则表达式的末尾使用，你只需要`regexec`多次调用，并使用上一次运行的结束偏移量作为你的新起点。

# ios - UITabBarController 选择选项卡错误（？）

> ID：10420126
> 
> 赞同：1
> 
> 时间：2012-05-02T19:10:46.103
> 
> 标签：ios, uitabbarcontroller

我的应用程序有一个带有 4 个选项卡的 UITabBarController，从父级显示为模态视图控制器。应用程序完全支持横向，因此可以随时进行布局。

有一个非常奇怪的错误，上个月我只见过 5 次。不知何故，经过一些操作（用户无法说出确切的顺序，但它显然涉及方向更改）选定的选项卡项目保持“横向”，而其他选项卡项目则正确定位。我无法提供更多信息，因为这是一个非常落后的错误。

编辑：它也发生在另一个人编写的另一个应用程序中，所以这实际上可能是一个 iOS 错误。

截屏：![在此处输入图像描述](../Images/10d740764c0d3581f2a4b78b4130c81e.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T19:34:36.040

您可以尝试在您的`- (void)didRotateFromInterfaceOrientation:(UIInterfaceOrientation)fromInterfaceOrientation`每个上实现，然后在旋转后设置 tabBarController 的属性？`UIViewController``UITabBarController``@property(nonatomic) NSUInteger selectedIndex`

我以前没有尝试过，但它可以工作......这样的事情：

```
 - (void)didRotateFromInterfaceOrientation:(UIInterfaceOrientation)fromInterfaceOrientation {
      [[self tabBarController] setSelectedIndex:[[self tabBarController] selectedIndex]];
 } 
```

# iphone - performSelector:withObject:afterDelay 在发布时使应用程序崩溃但不调试

> ID：10420127
> 
> 赞同：0
> 
> 时间：2012-05-02T19:10:48.680
> 
> 标签：iphone, ios, debugging

我正在使用 performSelector:withObject:afterDelay 在我的应用程序中设置动画。该应用程序在发布时崩溃但未调试。崩溃日志如下所示：

```
Exception Type:  EXC_CRASH (SIGSEGV)
Exception Codes: 0x00000000, 0x00000000
Crashed Thread:  1

Thread 0 name:  Dispatch queue: com.apple.main-thread
Thread 0:
0   libobjc.A.dylib                 0x35736e3e objc_release + 14
1   stky                            0x0010e096 -[OPLabel executeStrikethroughAnimationWithCompletion:] (OPLabel.m:142)
2   Foundation                      0x37a6992c __NSFireDelayedPerform + 408
3   CoreFoundation                  0x37207a2c __CFRUNLOOP_IS_CALLING_OUT_TO_A_TIMER_CALLBACK_FUNCTION__ + 8
4   CoreFoundation                  0x37207692 __CFRunLoopDoTimer + 358
5   CoreFoundation                  0x37206268 __CFRunLoopRun + 1200
6   CoreFoundation                  0x3718949e CFRunLoopRunSpecific + 294
7   CoreFoundation                  0x37189366 CFRunLoopRunInMode + 98
8   GraphicsServices                0x32096432 GSEventRunModal + 130
9   UIKit                           0x3390de76 UIApplicationMain + 1074
10  stky                            0x000f7224 main (main.m:16)
11  stky                            0x000f71d8 0xf6000 + 4568 
```

据我所知，这是尝试调用延迟方法导致应用程序崩溃。但除此之外，我不确定问题是什么，也不知道如何调试（因为它不会在调试模式下发生）。帮助？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T19:17:20.110

唯一我猜你可能会引用一些 premitive 值而不是 object 否则它将在查看代码后进行分析，如果你使用的是 premitive 则使用 (id)value 并尝试这是否有效

另一个常见原因是调用的对象已经从内存中释放。尝试使用 NSZombieEnabled 进行跟踪

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T08:39:13.237

作为参数传递给 performSelector 的对象在 Release 模式下被更积极地释放。您应该保留它以确保延迟后它仍在内存中（即使延迟为 0.0！）。

# jsf - 将支持 bean 操作传递给 Facelet 标记文件

> ID：10420129
> 
> 赞同：4
> 
> 时间：2012-05-02T19:11:00.357
> 
> 标签：jsf, action, facelets, jsf-1.2, tagfile

在我的 JSF 1.2 项目中，我创建了一个 facelet 标记文件并定义了一个具有 actionListener 属性的 inputText，我需要将支持 bean 方法名称传递给该属性。我尝试在标签文件中定义一个变量 actionListener="#{actionListener}" 。在我调用组件的 xhtml 中，当我将值传递为

```
actionListener="#{myBean.preFillData}" 
```

标记文件将其视为一个属性，并且错误指示未找到属性“preFillData”。如果我将其更改为

```
actionListener="#{myBean.preFillData()}" 
```

然后标记文件中存在解析错误，因为它不喜欢括号来指示方法名称。

我们如何将方法名称传递给标记文件？

谢谢 PT

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-02T19:44:00.363

标记文件不支持传递方法表达式。只有从 JSF 2.0 开始，所谓的复合组件才有可能。

您可以做的是将 bean 引用和方法名称分开，以便您可以使用大括号表示法来调用方法。我只是不确定这是否适用于`actionListener`，您通常不会使用它来调用操作，但它绝对应该适用于`action`.

例如

```
<my:tag ... bean="#{myBean}" actionMethod="preFillData" /> 
```

带内`tag.xhtml`

```
<h:commandButton ... action="#{bean[actionMethod]}" /> 
```

仅当您碰巧在 Facelets 上使用 JSF 2.0 时，您才能使用`<o:methodParam>`将方法表达式传递给标记文件。另请参阅 ao [Dynamic ui include 和 commandButton](https://stackoverflow.com/questions/15002272/dynamic-ui-include-and-commandbutton/)。

# ruby - Rspec：在失败时保存实例变量值

> ID：10420133
> 
> 赞同：0
> 
> 时间：2012-05-02T19:11:19.390
> 
> 标签：ruby, rspec

我正在测试一个基于 json 的方法。该方法采用 json 数组列表。当 json 数组按顺序出现时，该方法工作正常，而当数组随机化时，该方法会中断。它不会对所有随机案例都失败。所以，失败时我想保存 json 数组的值。有没有办法做到这一点？

```
describe 'when the flat hash comes in random order' do
  it 'knows how to create the parent nodes first' do
    do_stuff_and_validate(@flat_hash[:nodeList].shuffle!)
  end
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T20:02:21.493

您可以定义一个自定义匹配器并覆盖失败消息以显示您想要的内容。

以下示例从[RSpec 文档](https://www.relishapp.com/rspec/rspec-expectations/v/2-9/docs/custom-matchers/define-matcher)复制：

```
require 'rspec/expectations'

RSpec::Matchers.define :be_a_multiple_of do |expected|
  match do |actual|
    actual % expected == 0
  end
  failure_message_for_should do |actual|
    "expected that #{actual} would be a multiple of #{expected}"
  end
end

# fail intentionally to generate expected output
describe 9 do
  it {should be_a_multiple_of(4)}
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T19:19:37.800

您可以将此数组写入文件以便稍后检查。

```
File.open("hash.txt", 'w') do |f|
  f.write(your_json_array)
end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-03T00:20:43.107

我使用了 begin-rescue-reraise 技巧。

```
begin
  # The assertions
rescue Exception => e
  pp @flat_hash
  raise e
end 
```

# google-fusion-tables - 使用 MySQL 或其他数据库动态更新 Google 融合表

> ID：10420134
> 
> 赞同：3
> 
> 时间：2012-05-02T19:11:21.890
> 
> 标签：google-fusion-tables

我已阅读 [https://developers.google.com/fusiontables/docs/developers_guide#Writ](https://developers.google.com/fusiontables/docs/developers_guide#Writ) ... 了解一下，但我想知道是否有完整的教程来展示如何使用数据动态更新融合表存储在 MYSQL 数据库或其他类型的数据库上？一些非常简单的东西，比如一个工作示例

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T23:56:51.343

我不知道有任何教程，但有很多不同编程语言的例子。例如，我使用 python 库将存储在 Postgres 中的数据放入 Fusion Tables 中。基本上创建了我的数据库的 CSV 转储并使用 python 客户端插入/更新我的 Fusion Table。

[https://developers.google.com/fusiontables/docs/sample_code](https://developers.google.com/fusiontables/docs/sample_code)

# xml - JAXB xjc 映射到现有域对象

> ID：10420137
> 
> 赞同：10
> 
> 时间：2012-05-02T19:11:26.813
> 
> 标签：xml, jaxb, schema, bind, xjc

我做了很多搜索，找不到一个简洁的例子来说明如何将 XML 模式映射到现有的域对象，而不是使用*xjc*创建全新的对象。我已经创建了一个绑定 (xjb) 文件，但仍然找不到完成此操作的方法。

如果我有一个希望 JAXB 使用的现有域对象，如下所示：

```
package com.blah.domain;
class CustomerOffice{
   private int id;
   private String name;
   private String phone;
} 
```

我有一个如下的 XML 模式：

```
<?xml version="1.0" encoding="UTF-8"?>
<xs:schema xmlns:www="http://www.blah.com" 
xmlns:xs="http://www.w3.org/2001/XMLSchema" 
targetNamespace="http://www.blah.com" elementFormDefault="unqualified">
   <xs:element name="Customer">
      <xs:complexType>
         <xs:sequence>
           <xs:element name="id" type="xs:int" nillable="false" minOccurs="1" maxOccurs="1"/>
           <xs:element name="name" type="xs:string"/>
           <xs:element name="city" type="xs:string"/>
           <xs:element name="CustomerOffice" type="www:CustomerOffice" maxOccurs="unbounded"/>
        </xs:sequence>
     </xs:complexType>
   </xs:element>
   <xs:complexType name="CustomerOffice">
      <xs:sequence>
        <xs:element name="name" type="xs:string"/>
        <xs:element name="length" type="xs:int"/>
      </xs:sequence>
   </xs:complexType>
</xs:schema> 
```

如果我用*xjc*生成 JAXB 类，它将创建一个名为*Customer*的新类（我想要）。它还将创建一个名为*CustomerOffice*的新类（我不希望它使用我现有的域对象）。

因此，我希望它使用现有的*com.blah.domain.CustomerOffice*而不是指向“type:www:CustomerOffice”的架构。

我试图让这个尽可能简单的例子，任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-05-02T19:55:37.920

您可以使用外部绑定文件来配置 XJC 以执行您想要的操作。

```
<jxb:bindings 
    xmlns:xs="http://www.w3.org/2001/XMLSchema"
    xmlns:jxb="http://java.sun.com/xml/ns/jaxb"
    version="2.1">

    <jxb:bindings schemaLocation="yourSchema.xsd">
        <jxb:bindings node="//xs:complexType[@name='CustomerOffice']">
            <jxb:class ref="com.blah.domain.CustomerOffice"/>
        </jxb:bindings>
    </jxb:bindings>
</jxb:bindings> 
```

**XJC 呼叫**

```
xjc -d outputDir -b binding.xml yourSchema.xsd 
```

# ruby-on-rails - Rails：如何通过关联实现搜索

> ID：10420138
> 
> 赞同：1
> 
> 时间：2012-05-02T19:11:29.603
> 
> 标签：ruby-on-rails, search, associations, has-many

### 原始问题

我的应用程序处理“机器”。机器有规格，写着尽可能多的“规格”。这些规格中的每一个都包含对“Spec_Field”的引用（诸如“重量”、“高度”、“容量”等字段）和一个值。

```
Class Machine
  has_many :specs
  has_many :spec_fields, :through => :specs

Class Spec
  belongs_to :machine
  belongs_to :spec_field 
```

我想要做的是在每台机器的#show 操作中有一个搜索功能，用户在其中检查他想要匹配的规格（“是的，长度 50 是我需要的，容量 500 是完美的，我不关心宽度”），然后单击“查找相似”，然后会找到所有具有相似规格的机器。

我假设我需要一个搜索模型，类似于以下截屏视频： [http ://railscasts.com/episodes/111-advanced-search-form-revised?autoplay=true](http://railscasts.com/episodes/111-advanced-search-form-revised?autoplay=true)

在机器的#show 操作中，我需要检查这台机器的规格，并将它们添加到“搜索”实例中。那么这是否意味着“规范”也需要属于“搜索”？

我只是想不通如何在我的案例中组织所有内容。任何帮助表示赞赏！

### 数据库模式

机器：

```
t.string   "title"
t.text     "description"
t.datetime "created_at",                      :null => false
t.datetime "updated_at",                      :null => false
t.string   "status"
t.integer  "category_id"
t.string   "manufacturer"
t.string   "model"
t.string   "serial"
t.string   "year"
t.string   "location" 
```

眼镜：

```
t.integer  "machine_id"
t.integer  "field_id"
t.text     "value"
t.float    "base_value"
t.integer  "unit_id"
t.datetime "created_at", :null => false
t.datetime "updated_at", :null => false 
```

规格字段：

```
t.string  "label"
t.integer "base_units" 
```

### 似乎有效的解决方案

我添加了一个使用 SQL“IN”和“SELECT”的“With Spec”范围

```
 def self.with_spec(field_id,value)
    min_value = value.to_f * 0.8
    max_value = value.to_f * 1.2
    where("machines.id IN (SELECT machine_id FROM specs WHERE field_id = ? AND value > ? AND value < ?)",field_id,min_value,max_value)
  end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T19:46:47.537

我会建立我所谓的“过滤器范围”；如果您使用适当命名的键传递哈希，它们将减少结果集。如果传入的是 nil 或空白，则忽略该条件。

然后我定义了一个类搜索方法，它结合了所有过滤器搜索，如下所示：

```
Class Spec
  belongs_to :machine
  belongs_to :spec_field

  # filter scopes 
  scope :with_machine,  lambda{|*term| where('machine_id = ?',term) if term.present? }
  scope :with_length,   lambda{|*term| where('length = ?',term)     if term.present? }
  scope :with_capacity, lambda{|*term| where('capacity = ?',term)   if term.present? }
  scope :with_width,    lambda{|*term| where('width = ?',term)      if term.present? }

  def self.filter_search(options)
    with_machine(  options[:machine]  ).
    with_length(   options[:length]   ).
    with_capacity( options[:capacity] ).
    with_width(    options[:width]    )
  end

end 
```

现在您所需要的只是构建一个具有适当命名输入的表单：

```
<%= text_field_tag 'search[machine]', @machine.id %>
<%= text_field_tag 'search[length]' %>
<%= text_field_tag 'search[capacity]' %>
<%= text_field_tag 'search[width]' %>
<%= submit_tag %> 
```

并在控制器上调用它：

```
@specs = Spec.filter_search(params[:search]).all 
```

另一种方法是设置全文搜索引擎，并以几乎相同的方式构建您的搜索方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T21:19:32.280

我认为 gem [meta_search](https://github.com/ernie/meta_search)可以帮助您并简化您的代码。

# html - 使用 CSS 创建一个水平的 CSS 表单，而不是在文本上方带有框的表格

> ID：10420140
> 
> 赞同：-3
> 
> 时间：2012-05-02T19:11:31.067
> 
> 标签：html, css, forms, css-tables

我正在尝试创建一个像我在下面制作的图片一样的表格，我是否将所有内容都分开？

![在此处输入图像描述](../Images/4c15c0ddca9c9a4cf4fcc7cc459e8027.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T19:57:45.407

使用此代码

```
<div style="font-size: 25px">
    Contant Information</div>
<div style="border-bottom: 1px black dashed;width:55%">
</div>
<ul style="padding-left: 0px">
    <div style="margin-top: 4px; display: inline-block">
        First Name</div>
    <div style="display: inline-block; margin-left: 200px">
        Last Name</div>
    <div style="display: inline-block; margin-left: 200px">
        Phone Number</div>
    <br><input><input style="margin-left: 113px"><input style="margin-left: 113px"></ul>
<div style="border-bottom: 1px black dashed; margin-top: 5px;width:55%">
</div>
<ul style="font-size: 20px">
    Desired Vehicle</ul>
<div style="border-bottom: 1px black dashed; margin-top: 5px;width:55%">
</div>
<ul style="padding-left: 0px">
    <div style="margin-top: 4px; display: inline-block">
        Year</div>
    <div style="display: inline-block; margin-left: 238px">
        Make</div>
    <div style="display: inline-block; margin-left: 230px">
        Model</div>
    <div style="display: inline-block; margin-left: 225px">
        Price Range</div>
    <br><input><input style="margin-left: 113px"><input style="margin-left: 113px"><input style="margin-left: 113px"></ul>
<div style="border-bottom: 1px black dashed; margin-top: 5px;width:55%">
</div>
<ul style="padding-left: 0px; font-size: 17px">
    <div>
        List any other features you would like the vehicle to include</div>
    <textarea style="width: 600px; height: 120px"></textarea></ul> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T19:19:44.620

使用这种模式。不要忘记清除你的花车。

```
<div class="contact">
<ul>
    <li><label>First Name</label><input type="text" /></li>
    <li><label>Last Name</label><input type="text" /></li>
    ... etc ...
</ul>
</div> 
```

CSS：

```
.contact li {
    float:left;
    margin-right:10px;
}

label {
     display:block
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-02T19:28:10.493

如果将元素设置在具有所需宽度的包含 div 中，则不需要将每一行放在自己的 div 中。您可以为具有多个输入元素的行制作 div，然后将输入元素设置为

```
display:inline-block; 
```

这样如果它们的包含 div 足够大以将它们内联，它们将水平排列，但是您可以像块级元素一样为它们设置宽度。您还可以在这些 div 上放置顶部和底部边框，以获得您发布的图像中的分割线。

让输入表现得像块元素可能有点奇怪——你也可以试试这个方法，使用 CSS3 box-sizing 属性来设置它们的样式：

[http://craveytrain.com/posts/making-inputs-behave](http://craveytrain.com/posts/making-inputs-behave)。

# php - mySQL查询语句

> ID：10420143
> 
> 赞同：0
> 
> 时间：2012-05-02T19:11:51.410
> 
> 标签：php, mysql

我对输出的 $sql 语句有错误。

*您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 1 行的 '' 附近使用正确的语法“*这是指 UPDATE users SET activationkey 语句。

```
 $query = "SELECT * FROM users"; 

    $result = mysql_query($query) or die(mysql_error());

      while($row = mysql_fetch_array($result)){

if ($queryString == $row["activationkey"]){
 $sql="UPDATE users SET activationkey = '', status='activated' WHERE (id = $row[id])";

  if (!mysql_query($sql)) { *die('Error: in activation' . mysql_error());} 
}
 } 
```

我不知道为什么那个语法是错误的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T20:20:34.187

```
$query = "UPDATE `users` SET `activationkey` = '', status='activated' WHERE `id` = '$row['id']'"; 
```

提示：我建议保护您的 id，因为可以在该查询中完成 sql 注入。我的意思是说 WHERE `id`= '$row['id']' 的瞬间，使用 WHERE `id` = (int) ($row['id'])，这样可以确保在该查询中只给出一个整数。如果是字符串我们 mysql_real_escape_string($row['string'])

# c# - 如何更改 ExchangeConnectionMode (Outlook) 的值

> ID：10420148
> 
> 赞同：2
> 
> 时间：2012-05-02T19:12:19.597
> 
> 标签：c#, outlook, outlook-redemption

我正在编写一个测试用例，我想以编程方式将 Outlook 设置为脱机工作，然后测试 Outlook 再次联机时的反应。无论如何我可以更改属性 Namespace.ExchangeConnectionMode 吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T19:28:07.097

设置`RDOSession.Offline`属性 - [http://www.dimastr.com/redemption/rdosession.htm](http://www.dimastr.com/redemption/rdosession.htm)

# jquery - jquery 下滑效果

> ID：10420149
> 
> 赞同：0
> 
> 时间：2012-05-02T19:12:24.653
> 
> 标签：jquery

假设我有一个有数据的 div。我想当我点击一个按钮时，一个新的 div 将被创建，它将覆盖实际的 div，比如按下快门。这是我从一个非常接近但不是我想要的方式的站点获得的示例代码。

```
 $(document).ready(function() {
  var $box = $('#box')
    .wrap('<div id="box-outer"></div>');
  $('#blind').click(function() {
    $box.blindToggle('slow');  
  });    
}); 
```

检查上述代码的演示[http://www.learningjquery.com/2008/02/simple-effects-plugins](http://www.learningjquery.com/2008/02/simple-effects-plugins) 只需转到站点并单击盲切换按钮即可查看我想要的东西。我想要什么时候单击按钮，然后创建一个新的 div，新的 div 将覆盖实际的 div，并具有向下滑动的效果，当我再次单击时，新的 div 将向上滑动。如何使用 jquery 实现它。如果可能的话，用示例代码指导我。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T19:13:52.997

已经有本机功能[`.slideUp()`](http://api.jquery.com/slideUp/)并且[`.slideDown()`](http://api.jquery.com/slideDown/)可以执行您想要的操作。

* * *

**更新：**不确定我是否理解正确，但这里有一个[演示](http://jsfiddle.net/k45KP/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T19:40:48.227

您提供的链接几乎已经为您提供了代码。你只需要一些调整。

**演示**：http:
[//jsfiddle.net/dACjL/](http://jsfiddle.net/dACjL/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-02T19:16:06.413

用途`slideUp()`和`slideDown`功能。

`$('selector').slideUp()`检查这里[http://api.jquery.com/slideUp/](http://api.jquery.com/slideUp/)

并`$('selector').slideDown()`在这里查看[http://api.jquery.com/slideDown/](http://api.jquery.com/slideDown/)

# excel - 如何使用 Excel VB 复制和添加更多重复的内容到多个选定的行？

> ID：10420156
> 
> 赞同：2
> 
> 时间：2012-05-02T19:13:18.493
> 
> 标签：excel, vba

我想复制选定的行（图片中的第一列）以获取结果，如下面的第二列和第三列。我尝试使用宏，但有时有 >2000 行。请帮我

[http://i45.tinypic.com/2pph3cg.png](http://i45.tinypic.com/2pph3cg.png)

```
ActiveCell.Offset(1, 0).Rows("1:1").EntireRow.Select
Selection.Insert Shift:=xlDown, CopyOrigin:=xlFormatFromLeftOrAbove
Selection.Insert Shift:=xlDown, CopyOrigin:=xlFormatFromLeftOrAbove
Selection.Insert Shift:=xlDown, CopyOrigin:=xlFormatFromLeftOrAbove
Selection.Insert Shift:=xlDown, CopyOrigin:=xlFormatFromLeftOrAbove
Selection.Insert Shift:=xlDown, CopyOrigin:=xlFormatFromLeftOrAbove
Selection.Insert Shift:=xlDown, CopyOrigin:=xlFormatFromLeftOrAbove
Selection.Insert Shift:=xlDown, CopyOrigin:=xlFormatFromLeftOrAbove
Selection.Insert Shift:=xlDown, CopyOrigin:=xlFormatFromLeftOrAbove
Selection.Insert Shift:=xlDown, CopyOrigin:=xlFormatFromLeftOrAbove
ActiveCell.Offset(-1, 0).Range("A1").Select
Selection.AutoFill Destination:=ActiveCell.Range("A1:A9"), Type:=xlFillCopy
ActiveCell.Range("A1:A9").Select
ActiveCell.Offset(0, 1).Range("A1").Select
Selection.AutoFill Destination:=ActiveCell.Range("A1:A9"), Type:=xlFillCopy
ActiveCell.Range("A1:A9").Select
ActiveCell.Offset(0, 1).Range("A1").Select
ActiveCell.FormulaR1C1 = "100"
ActiveCell.Offset(1, 0).Range("A1").Select
ActiveCell.FormulaR1C1 = "200"
ActiveCell.Offset(-1, 0).Range("A1:A2").Select
Selection.AutoFill Destination:=ActiveCell.Range("A1:A9")
ActiveCell.Range("A1:A9").Select 
```

=========== 在代码中，我添加了 9 个重复的行而不是 300。（100,200,..900）

1.  它将所选行移动（偏移）1

2.  它增加了 9 行

3.  它将所选行向后移动 1 (-1)

4.  然后它开始填充单元格 A1:A9 的值 100,200,...，因为我使用了相对引用，单元格范围会根据活动单元格而变化

我的尝试：

```
I do not know how to change the reference A1:A3 to relative one 
```

当活动单元格更改时，它们应该相应地更改。

```
Sub AddDuplicate() 
```

' ' 我不知道如何将参考 A1:A3 更改为相对的，当活动单元格更改时，它们应该相应更改。

我的尝试 [http://i49.tinypic.com/2mwxs39.png](http://i49.tinypic.com/2mwxs39.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-02T21:28:56.970

至少你试过 :) 这就是我想看到的 :) 这就是你正在尝试的吗？

```
Option Explicit

Sub Sample()
    Dim ws As Worksheet
    Dim lastRow As Long, i As Long
    Dim NewRow As Long, j As Long

    '~~> Name of the sheet where the the data lies
    Set ws = Sheets("Sheet1")

    With ws
        '~~> Get the last Row in Col A
        lastRow = .Range("A" & .Rows.Count).End(xlUp).Row

        '~~> Row from where we need to write
        NewRow = 1

        '~~> Loop though each item in Col A
        For i = 1 To lastRow
            '~~> Write to Col C; 3 rows at a time
            .Range("C" & NewRow & ":C" & NewRow + 2).Value = .Range("A" & i).Value

            '~~> Get the next empty row
            NewRow = NewRow + 3
        Next

        '~~> Type "A","B","C" in Col D
        .Range("D1").Value = "A": .Range("D2").Value = "B": .Range("D3").Value = "C"

        '~~> Autofill till the last row
        .Range("D1:D3").AutoFill Destination:=Range("D1:D" & NewRow - 1)
    End With
End Sub 
```

**快照**

![在此处输入图像描述](../Images/a2477932eb383dd57c33c9b844f9627a.png)

# r - 计算相关性时出错

> ID：10420157
> 
> 赞同：0
> 
> 时间：2012-05-02T19:13:22.197
> 
> 标签：r

我有 2 列数据，其数值如下，采用制表符分隔格式：

```
Si1     Si2

8,99691 7,495936
7,7164173   8,092645
4,4428697   4,298263
7,4302206   7,189521
5,897344    5,316047
. 
.
. 
```

为了计算这些之间的相关性，我编写了如下 R 代码：

```
int<-read.table("data.txt",sep="\t",head=TRUE)
attach(int)
cor(int$Si1,int$Si2) 
```

但它显示错误如下：

```
Error in cor(int$Si1,int$Si2) : 'x' must be numeric 
```

谁能告诉我如何解决这个问题？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-02T19:25:52.247

你`read.table("data.txt",sep="\t",header=TRUE, dec = ",")`至少需要写。您的数据使用逗号作为小数分隔符。R 假定一个句点 (.)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T19:24:10.913

要计算两个向量之间的相关性，它们必须是数字（数字）。您的数据中有逗号，因此它们不是数字。

他们应该在那里吗？这工作正常：

```
x<-c(1,2,3,4,5)
y<-c(1,2,3,4,5)
cor(x,y)

returns [1] 1 
```

# asp.net-mvc - 如何在 asp.Net MVC Razor 中触发 Check Box 的 Click 事件

> ID：10420159
> 
> 赞同：5
> 
> 时间：2012-05-02T19:13:34.107
> 
> 标签：asp.net-mvc, checkbox

我有一个“IsQuantityAvailable”复选框，用于选择卖家是否有商品，**点击这个 chkBox 我必须显示一个文本框**来输入商品数量。请建议使用 MVC Razor 的解决方案......谢谢！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-02T19:56:34.353

正如马里奥建议的那样，解决方案与剃须刀没有太大关系，但这可能会有所帮助。如果您有严格的模型绑定，请使用 Html.Checkbox 或 Html.CheckboxFor 创建复选框。在添加时将 onclick 事件处理程序添加到复选框

```
@Html.Checkbox( "somename", new { @onclick="function-to-open-dialog()"}) 
```

“打开对话框的功能”的实现将取决于您在客户端使用的内容。如果它的 jquery 那么它可能是像 $("#DialogId").dialog("open") 这样的简单调用

# php - PHP imap_open 通过 Apache 失败，“没有这样的主机”，但在命令行下工作

> ID：10420161
> 
> 赞同：0
> 
> 时间：2012-05-02T19:13:38.797
> 
> 标签：php, email

我在 CentOS 5.8 上使用 PHP 5.3.10。PHP 是使用以下配置从源代码构建的：

```
./configure --enable-gd-native-ttf --enable-mbstring \
  --enable-sockets --with-bz2 --with-curl --with-gd --with-mcrypt \
  --with-mysql --with-mhash --with-mysqli --with-openssl --with-pdo-mysql \
  --with-pear --with-pcre-regex --with-xsl --with-zlib --with-libdir=/lib64 \
  --with-imap --with-kerberos --with-imap-ssl --with-apxs2=/usr/sbin/apxs 
```

我很肯定系统上没有其他版本的 PHP，并且我已经通过浏览器和 CLI 确认 imap 扩展可用。

这个问题正在影响我正在使用的 CMS，但为了测试我使用了一个简单的 PHP 脚本，即：

```
<?php
error_reporting(15);

$username = "username";
$password = "password";

$mailserver = "{pop.gmail.com:995/pop3/ssl/novalidate-cert}INBOX";

$link = imap_open($mailserver, $username, $password, NULL, 1);
print_r(imap_errors());

$headers = imap_headers($link);
print_r($headers);
?> 
```

当我在命令行运行它时，我得到了预期的输出，即没有错误消息和收件箱中的消息列表。

当我将浏览器指向测试脚本时，我得到：

```
Warning: imap_open() [function.imap-open]: Couldn't open stream {pop.gmail.com:995/pop3/ssl/novalidate-cert}INBOX in test.php on line 9
Array ( [0] => No such host as pop.gmail.com ) 
```

然后在 imap_headers 失败时发出其他警告。

显然 imap 扩展可以通过 Apache 和 CLI 使用，这不应该是防火墙或 DNS 问题，因为它确实可以通过 CLI 工作。我也可以远程登录到邮件服务器。

我正在使用默认的 php.ini-development 文件（[这里](http://pastebin.com/XbZZHXeq)有一个副本）并通过 phpinfo() 和 php -i 确认它在两个环境中都在使用。

有谁知道为什么 imap_open 会通过 Apache 而不是在命令行返回“没有这样的主机...”？

编辑：

我正在使用来自股票 CentOS yum 存储库的 libc-client 和 libc-client-devel 版本 2004g-2.2.1 和 httpd 2.2.3-63.el5.centos.1

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T14:15:56.910

我忘记了 Apache 正在使用 mod_chroot 并且显然对提供 DNS 的库的访问被阻止了。`LoadFile /lib64/libnss_dns.so.2`感谢[这个页面](http://core.segfault.pl/~hobbit/mod_chroot/caveats.html)，我不得不添加到我的 httpd.conf 中。

# database - 在不知道什么表或列的情况下在数据库中查找文本？

> ID：10420162
> 
> 赞同：1
> 
> 时间：2012-05-02T19:13:38.967
> 
> 标签：database, ms-access, full-text-search

我在 MS Access 2010 中有一个数据库。我不是数据库的创建者，也无法联系他问这个问题。这是一个包含许多表和记录的大型数据库，并且表和列的名称非常不具描述性。基本上，我试图找出哪个表/列存储了某些数据，并且我特别知道数据的值。例如：我知道有一个客户名为“ABCDEF”，因为我只是使用使用数据库的软件添加了它。现在，我需要知道存储此客户数据的表是什么。

这可能吗？一种逐个表，逐个记录，逐个字段的整个数据库并将其与我的字符串进行比较的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T19:32:35.527

试试这个

```
Public Sub FindInAllTables(ByVal s As String)
    Dim db As DAO.Database, rs As DAO.Recordset
    Dim tdf As DAO.TableDef, fld As DAO.Field
    Dim pattern As String

    pattern = "*" & s & "*"
    Set db = CurrentDb
    For Each tdf In db.TableDefs
        If (tdf.Attributes And dbSystemObject) = 0 Then
            On Error Resume Next
            Set rs = tdf.OpenRecordset(dbOpenSnapshot)
            If err.Number = 0 Then
                On Error GoTo 0
                Debug.Print "Scanning [" & tdf.Name & "]  ";
                Do Until rs.EOF()
                    For Each fld In rs.Fields
                        If fld.Value Like pattern Then
                            Debug.Print
                            Debug.Print "  Match in [" & tdf.Name & "].[" & _
                                fld.Name & "] ===> """ & fld.Value & """";
                            Exit Do
                        End If
                    Next fld
                    If rs.AbsolutePosition Mod 1000 = 999 Then
                        Debug.Print ".";
                    End If
                    rs.MoveNext
                Loop
                Debug.Print
                rs.Close
            Else
                On Error GoTo 0
                Debug.Print "Cannot open table [" & tdf.Name & "]"
            End If
        End If
    Next tdf
    db.Close
End Sub 
```

这会查找包含在字段的任何部分中的字符串。如果您希望仅查找整个字段，请替换`If fld.Value Like pattern Then`为`If fld.Value = s Then`.

# azure - Azure Table 将行插入 TableServiceContext

> ID：10420164
> 
> 赞同：0
> 
> 时间：2012-05-02T19:13:45.573
> 
> 标签：azure, cloud, azure-table-storage

[输入 azure table noob] 我能找到的所有关于 Azure 表存储的文章都在 Microsoft.WindowsAzure.StorageClient 中指定了与 TableServiceContext 类相关的 AddObject 方法。不幸的是，当我尝试引用 AddObject 和 SaveChanges 方法时，VS 说没有这样的方法。这是我的代码：

```
CloudStorageAccount storageAccount = CloudStorageAccount.Parse(
                    RoleEnvironment.GetConfigurationSettingValue("StorageConnectionString")
                );

CloudTableClient tableClient = new CloudTableClient(storageAccount.TableEndpoint.ToString(), storageAccount.Credentials);
                tableClient.CreateTableIfNotExist("ODATImageResizeErrors");

TableServiceContext context = tableClient.GetDataServiceContext();

ImageResizeErrorEntity entity = new ImageResizeErrorEntity();

entity.ErrorDescription = "Error resizing image";
entity.InnerException = ex.InnerException.ToString();
entity.ImageTypeId = imageTypeId;
entity.SkuId = skuId;
entity.RowKey = Guid.NewGuid().ToString();
entity.PartitionKey = "Errors"; 
```

这是我收到的完整错误： ![表格插入错误](../Images/5ae3ae5ccaafecbe7aea5ce21b8a419a.png)

感谢您的帮助 PS：我确实确保我的 Windows Azure SDK 是最新的，我的 StorageClient DLL 是 v1.1.0.0

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T19:31:40.963

你有对 System.Data.Services.Client.dll 的引用和它的 using 声明吗？

# twitter-bootstrap - Twitter 引导可滚动表

> ID：10420168
> 
> 赞同：161
> 
> 时间：2012-05-02T19:13:57.750
> 
> 标签：twitter-bootstrap

我想在我的网站上有一张桌子。问题是该表将有大约 400 行。如何限制表格的高度，并对其应用滚动条？这是我的代码：

```
<div class="span3">
  <h2>Achievements left</h2>
<table class="table table-striped">
  <thead>
    <tr>
      <th>#</th>
      <th>Name</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>1</td>
      <td>Something</td>
    </tr>
    <tr>
      <td>2</td>
      <td>Something</td>
    </tr>
    <tr>
      <td>3</td>
      <td>Something</td>
    </tr>
    <tr>
      <td>4</td>
      <td>Something</td>
    </tr>
    <tr>
      <td>5</td>
      <td>Something</td>
    </tr>
    <tr>
      <td>6</td>
      <td>Something</td>
    </tr>
  </tbody>
</table>

  <p><a class="btn" href="#">View details &raquo;</a></p>
</div> 
```

我试图将最大高度和固定高度应用于表格，但它不起作用。

* * *

## 回答 #1

> 赞同：263
> 
> 时间：2012-05-02T19:15:41.223

表格元素似乎不直接支持这一点。将表格放在 div 中并设置 div 的高度并设置`overflow: auto`.

* * *

## 回答 #2

> 赞同：57
> 
> 时间：2012-05-02T19:19:34.507

```
.span3 {  
    height: 100px !important;
    overflow: scroll;
}​ 
```

您需要将它包装在它自己的 div 中，或者给 span3 一个它自己的 id，这样您就不会影响整个布局。

这是一个小提琴：http: [//jsfiddle.net/zm6rf/](http://jsfiddle.net/zm6rf/)

* * *

## 回答 #3

> 赞同：44
> 
> 时间：2014-05-07T13:13:34.260

不需要将它包装在一个div中......

**CSS**：

```
tr {
width: 100%;
display: inline-table;
table-layout: fixed;
}

table{
 height:300px;              // <-- Select the height of the table
 display: -moz-groupbox;    // Firefox Bad Effect
}
tbody{
  overflow-y: scroll;      
  height: 200px;            //  <-- Select the height of the body
  width: 100%;
  position: absolute;
} 
```

**引导层**：http : [//www.bootply.com/AgI8LpDugl](http://www.bootply.com/AgI8LpDugl)

* * *

## 回答 #4

> 赞同：35
> 
> 时间：2013-08-30T16:50:45.200

我遇到了同样的问题，并使用了上述解决方案的组合（并添加了我自己的一个转折点）。请注意，我必须指定列宽以使它们在标题和正文之间保持一致。

在我的解决方案中，页眉和页脚在正文滚动时保持固定。

```
<div class="table-responsive">
    <table class="table table-striped table-hover table-condensed">
        <thead>
            <tr>
                <th width="25%">First Name</th>
                <th width="13%">Last Name</th>
                <th width="25%" class="text-center">Address</th>
                <th width="25%" class="text-center">City</th>
                <th width="4%" class="text-center">State</th>
                <th width="8%" class="text-center">Zip</th>
            </tr>
        </thead>
    </table>
    <div class="bodycontainer scrollable">
        <table class="table table-hover table-striped table-condensed table-scrollable">
            <tbody>
                <!-- add rows here, specifying same widths as in header, at least on one row -->
            </tbody>
        </table>
    </div>
    <table class="table table-hover table-striped table-condensed">
        <tfoot>
            <!-- add your footer here... -->
        </tfoot>
    </table>
</div> 
```

然后只需应用以下 CSS：

```
.bodycontainer { max-height: 450px; width: 100%; margin: 0; overflow-y: auto; }
.table-scrollable { margin: 0; padding: 0; } 
```

我希望这对其他人有帮助。

* * *

## 回答 #5

> 赞同：10
> 
> 时间：2012-05-02T19:24:49.947

CSS

```
.achievements-wrapper { height: 300px; overflow: auto; } 
```

HTML

```
<div class="span3 achievements-wrapper">
    <h2>Achievements left</h2>
    <table class="table table-striped">
    ...
    </table>
</div> 
```

* * *

## 回答 #6

> 赞同：9
> 
> 时间：2014-07-18T00:05:54.233

我最近不得不用 bootstrap 和 angularjs 来做这件事，我创建了一个 angularjs 指令来解决这个问题，你可以在这篇[博](http://pointblankdevelopment.com.au/blog/angularjs-fixed-header-scrollable-table-directive)文中看到一个工作示例和详细信息。

您只需向 table 标记添加一个固定标题属性即可使用它：

```
<table class="table table-bordered" fixed-header>
...
</table> 
```

如果您不使用 angularjs，您可以调整指令的 javascript 并直接使用它。

* * *

## 回答 #7

> 赞同：5
> 
> 时间：2017-12-17T20:23:30.200

将表放在一个 div 中，并为该 div 赋予 class `pre-scrollable`。

* * *

## 回答 #8

> 赞同：4
> 
> 时间：2014-01-02T14:13:30.640

所有上述解决方案也使表头滚动......如果你只想滚动 tbody 然后应用这个：

```
tbody {
    height: 100px !important;
    overflow: scroll;
    display:block;
} 
```

* * *

## 回答 #9

> 赞同：4
> 
> 时间：2014-12-27T06:14:13.570

这可能不是大行数的解决方案。我只是使用复制表技巧来完成小行数表的工作，同时它可以保持弹性列宽，你可以试试这个[小提琴](http://jsfiddle.net/zjyuoyrt/)。

（固定宽度列是我用于大行计数表的方法，只需要标题行重复）

示例代码：

```
<div style="height:30px;overflow:hidden;margin-right:15px;">
   <table class="table">
       <thead>
           <tr>
                <th>Col 1</th>
                <th>Col 2</th>
                <th>Col 3</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td>Cel 1,1</td>
                <td>Cel 1,2</td>
                <td>Cel 1,3</td>
            </tr>
            <tr>
                <td>Cel 2,1</td>
                <td>Cel 2,2</td>
                <td>Cel 2,3</td>
            </tr>
            <tr>
                <td>Cel 3,1</td>
                <td>Cel 3,2</td>
                <td>Cel 3,3</td>
            </tr>

        </tbody>
    </table>
</div>
<div style="height:100px;overflow-y:scroll;;">
    <table class="table">
        <thead>

        </thead>
        <tbody>
            <tr>
                <td>Cel 1,1</td>
                <td>Cel 1,2</td>
                <td>Cel 1,3</td>
            </tr>
            <tr>
                <td>Cel 2,1</td>
                <td>Cel 2,2</td>
                <td>Cel 2,3</td>
            </tr>
            <tr>
                <td>Cel 3,1</td>
                <td>Cel 3,2</td>
                <td>Cel 3,3</td>
            </tr>
             <tr style="color:white">
                <th>Col 1</th>
                <th>Col 2</th>
                <th>Col 3</th>
            </tr>
        </tbody>
    </table>
</div> 
```

* * *

## 回答 #10

> 赞同：4
> 
> 时间：2020-11-03T00:59:52.527

这个例子展示了在使用 Bootstrap 4 表格样式时如何使用粘性标题。

```
.table-scrollable {
    /* set the height to enable overflow of the table */
    max-height: 200px;

    overflow-x: auto;
    overflow-y: auto;
    scrollbar-width: thin;
}

.table-scrollable thead th {
    border: none;
}

.table-scrollable thead th {
    /* Set header to stick to the top of the container. */
    position: sticky; 
    top: 0px;

    /* This is needed otherwise the sticky header will be transparent 
    */
    background-color: white;

    /* Because bootstrap adds `border-collapse: collapse` to the
     * table, the header boarders aren't sticky.
     * So, we need to make some adjustments to cover up the actual
     * header borders and created fake borders instead
     */
    margin-top: -1px;
    margin-bottom: -1px;

    /* This is our fake border (see above comment) */
    box-shadow: inset 0 1px 0 #dee2e6,
                inset 0 -1px 0 #dee2e6;
}
```

```
<!-- CSS -->
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/css/bootstrap.min.css" integrity="sha384-TX8t27EcRE3e/ihU7zmQxVncDAy5uIKz4rEkgIXeMed4M0jlfIDPvg6uqKI2xXr2" crossorigin="anonymous">

<!-- jQuery and JS bundle w/ Popper.js -->
<script src="https://code.jquery.com/jquery-3.5.1.slim.min.js" integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ho+j7jyWK8fNQe+A12Hb8AhRq26LrZ/JpcUGGOn+Y7RsweNrtN/tE3MoK7ZeZDyx" crossorigin="anonymous"></script>

<div class="dashboard-container card">
  <div class="card-body">
    <div class="table-scrollable">
      <table class="table table-hover table-sortable">
          <thead>
              <tr>
                  <th data-sort-type="text">Course</th>
                  <th data-sort-type="numeric">In Progress</th>
                  <th data-sort-type="numeric">Not Started</th>
                  <th data-sort-type="numeric">Passed</th>
                  <th data-sort-type="numeric">Failed</th>
              </tr>
          </thead>
          <tbody>
            <tr>
              <td>How to be good at stuff</td>
              <td>0</td>
              <td>1000</td>
              <td>0</td>
              <td>0</td>
            </tr>
            <tr>
              <td>Quantum physics for artists</td>
              <td>200</td>
              <td>6</td>
              <td>66</td>
              <td>66</td>
            </tr>
            <tr>
              <td>The best way to skin a cat</td>
              <td>34</td>
              <td>16</td>
              <td>200</td>
              <td>7</td>
            </tr>
            <tr>
              <td>Human cookbook</td>
              <td>4</td>
              <td>7</td>
              <td>4</td>
              <td>50</td>
            </tr>
            <tr>
              <td>Aristocracy rules</td>
              <td>100</td>
              <td>3</td>
              <td>6</td>
              <td>18</td>
            </tr>
          </tbody>
      </table>
    </div>
  </div>
</div>
```

* * *

## 回答 #11

> 赞同：3
> 
> 时间：2013-06-18T18:46:29.223

我最近遇到了类似的问题，并最终使用不同解决方案的混合物来修复它。

第一个也是最简单的一个是使用两个表格，一个用于标题，一个用于正文。这可行，但标题和正文列未对齐。而且，由于我想使用 twitter 引导表附带的自动大小，我最终创建了一个 Javascript 函数，该函数在以下情况下更改标题：调整窗口大小；列中的数据发生变化等。

这是我使用的一些代码：

```
 <table class="table table-striped table-hover" style="margin-bottom: 0px;">
        <thead>
            <tr>
                <th data-sort="id">Header 1</i></th>
                <th data-sort="guide">Header 2</th>
                <th data-sort="origin">Header 3</th>
                <th data-sort="supplier">Header 4</th>
            </tr>
        </thead>
    </table>
    <div class="bodycontainer scrollable">
        <table class="table table-hover table-striped table-scrollable">
            <tbody id="rows"></tbody>
        </table>
    </div> 
```

标题和正文分为两个单独的表。其中之一是在具有必要样式的 DIV 中生成垂直滚动条。这是我使用的 CSS：

```
.bodycontainer {
  //height: 200px
  width: 100%;
  margin: 0;
}

.table-scrollable {
  margin: 0px;
  padding: 0px;
} 
```

我在这里评论了高度，因为我希望表格到达页面底部，无论页面高度是多少。

我在标题中使用的数据排序属性也用于每个 td。这样我可以获得每个 td 的宽度和填充以及行的宽度。使用我使用 CSS 设置的数据排序属性，相应地每个标题的填充和宽度以及标题行的填充和宽度，因为它没有滚动条，所以它总是更大。这是使用咖啡脚本的功能：

```
fixHeaders: =>
  for header, i in @headers
    tdpadding = parseInt(@$("td[data-sort=#{header}]").css('padding'))
    tdwidth = parseInt(@$("td[data-sort=#{header}]").css('width'))
    @$("th[data-sort=#{header}]").css('padding', tdpadding)
    @$("th[data-sort=#{header}]").css('width', tdwidth)
    if (i+1) == @headers.length
      trwidth = @$("td[data-sort=#{header}]").parent().css('width')
      @$("th[data-sort=#{header}]").parent().parent().parent().css('width', trwidth)
      @$('.bodycontainer').css('height', window.innerHeight - ($('html').outerHeight() -@$('.bodycontainer').outerHeight() ) ) unless @collection.length == 0 
```

在这里，我假设您有一个名为 @headers 的标头数组。

它不漂亮，但它有效。希望它可以帮助某人。

* * *

## 回答 #12

> 赞同：3
> 
> 时间：2015-02-20T01:35:59.980

这些答案都没有让我满意。他们要么没有将表格标题行固定到位，要么他们需要固定的列宽才能工作，即使这样，标题行和正文行也会在各种浏览器中错位。

我建议咬紧牙关，使用适当的网格控件，如[jsGrid](https://github.com/tabalinas/jsgrid)或我个人最喜欢的[SlickGrid](https://github.com/mleibman/SlickGrid)。它显然引入了依赖关系，但如果您希望您的表格表现得像具有跨浏览器支持的真实网格，这将节省您的精力。如果需要，它还为您提供了对列进行排序和调整大小以及大量其他功能的选项。

* * *

## 回答 #13

> 赞同：2
> 
> 时间：2016-05-31T09:16:52.023

重新乔纳森伍德的建议。当我使用 CMS 时，我没有用新的 div 包装表格的选项。使用 JQuery 这是我所做的：

```
$( "table" ).wrap( "<div class='table-overflow'></div>" ); 
```

这使用类“table-overflow”的新 div 包装表元素。

然后，您可以简单地在您的 css 文件中添加以下定义：

```
.table-overflow { overflow: auto; } 
```

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2018-12-31T09:19:53.343

将表格放在 div 中以垂直滚动表格。更改`overflow-y`为`overflow-x`使表格可水平滚动。只是`overflow`为了使表格可以水平和垂直滚动。

```
<div style="overflow-y: scroll;"> 
    <table>
    ...
    </table>
</div> 
```

* * *

## 回答 #15

> 赞同：1
> 
> 时间：2020-11-14T06:17:55.357

我添加`.table-responsive`到表中并且它起作用了。从[文档](https://getbootstrap.com/docs/4.5/content/tables/)

> 通过使用 .table-responsive{-sm|-md|-lg|-xl} 包装任何 .table 来创建响应式表格，使表格在每个最大宽度断点处水平滚动，最多（但不包括）576px、768px、分别为 992 像素和 1120 像素。

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2018-04-10T20:59:42.990

想我会在这里发帖，因为我无法让上述任何内容与 Bootstrap 4 一起使用。我在网上找到了这个并且对我来说非常适合......

```
table
{
    width: 100%;
    display: block;
    border:solid black 1px;
}

thead
{
    display: inline-block;
    width: 100%;
    height: 20px;
}

tbody
{
    height: 200px;
    display: inline-block;
    width: 100%;
    overflow: auto;
}

th, td
{
    width: 100px;
    border:solid 1px black;
    text-align:center;
} 
```

我还附上了工作的 jsfindle。

[https://jsfiddle.net/jgngg28t/](https://jsfiddle.net/jgngg28t/)

希望它可以帮助别人。

# sql-server - 为什么这个子查询会失败？

> ID：10420171
> 
> 赞同：0
> 
> 时间：2012-05-02T19:14:32.550
> 
> 标签：sql-server

我有一个相当复杂的查询，可以在 Access 和 MySQL 中正常工作，但不能在 MS SQL 中工作。收到一条消息“关键字'ORDER'附近的语法不正确”。查询的目标是获得前 100 个订单，首先是加急运输（'USPS Express'）。

```
SELECT * 
FROM    (   SELECT 
            TOP 100     o.orderid
                    ,   (   
                            select 1 
                            from    orders 
                            where   orderid = o.orderid 
                            and     oshipmethod = 'USPS Express'
                        ) as ship_priority 
            FROM    orders o 
            WHERE   o.order_status = 10 
        ) 
ORDER BY ship_priority DESC 
```

此查询失败的任何明显原因？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-02T19:17:17.350

您必须为派生表输出/子查询输出提供别名。否则，您将遇到错误。

话虽如此，我相信这个查询可以用更好的方式编写。

*正确版本*：在子句前注意**T1 。**`ORDER BY`我给了一个简单的名字，但你可以随意命名。建议使用有意义的名称而不是 T1。

```
SELECT * 
FROM    (   SELECT 
            TOP 100     o.orderid
                    ,   (   
                            select 1 
                            from    orders 
                            where   orderid = o.orderid 
                            and     oshipmethod = 'USPS Express'
                        ) as ship_priority 
            FROM    orders o 
            WHERE   o.order_status = 10 
        )  T1
ORDER BY ship_priority DESC 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T19:18:48.563

您缺少外部派生表的别名：

改变这个：

```
 WHERE   o.order_status = 10 
    ) 
ORDER BY ship_priority DESC 
```

进入这个：

```
 WHERE   o.order_status = 10 
    ) as derivedTable
ORDER BY ship_priority DESC 
```

# php - 哪个更快：include() 或 file_get_contents()？

> ID：10420175
> 
> 赞同：7
> 
> 时间：2012-05-02T19:14:48.597
> 
> 标签：php, include, file-get-contents

我正在为我的项目开发一个 SEO 系统，并且正在用一个页面优化所有链接。

文件摘录`.htaccess`：

```
RewriteRule ^(.+)$ seo.php [L,QSA] 
```

此 SEO 文件 ( `seo.php`) 将获取请求的路径并将其解析为我的脚本中的有效 url。

我`include('cat.php?catid=1')`在最后使用`seo.php`，一切正常，但我想知道哪个更快：`include()`还是`file_get_contents()`？

当我使用`file_get_content('cat.php?catid=1')`时，它会显示 PHP 文件的源代码，但是当我使用 时`file_get_content('http://localhost/cat.php?catid=1')`，它会显示正常页面。

那么，哪个更快：`file_get_content()`或`include()`？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-05-02T19:16:51.250

他们当然不一样

*   Include 将解析其中的 PHP 代码
*   file_get_contents 将只返回内容

因此，如果您只想检索页面使用的 html 内容，`file_get_contents`否则如果您需要解析 PHP 代码使用`include();`

注意：如果您想检索托管在您网站上的页面的内容，您应该使用本地路径而不是资源的 Web 路径，即：

*   做：`file_get_contents('/home/user/site/file.html');`
*   不要：`file_get_contents('http://example.com/file.html');`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-02T19:17:17.680

如果您将自己的本地文件作为模板的一部分加载，请使用`require`或`include`. 当然你可以使用`require_once`or `include_once`，但不要`file_get_contents`用于本地文件。

这与性能没有任何关系，它与目的有关。`file_get_contents`不存在用于动态加载模板依赖项。除非您需要在显示之前解析它们的内容，或者它们位于其他域中，否则这不太可能。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-02T19:54:57.080

1.  这是一个毫无意义的问题。两个都够快。没有必要用不知从何而来的问题来困扰自己。
2.  包括('cat.php?catid=1'); 永远不会工作
3.  通过 HTTP 请求调用您自己的代码是错误的。

所以，代码应该是

```
include('cat.php'); 
```

* * *

## 回答 #4

> 赞同：-5
> 
> 时间：2012-08-16T22:16:26.503

更正：您不能使用本地路径`file_get_contents`：

```
file_get_contents('/home/user/site/file.html');  <-- will never work.

file_get_contents('http://site.com/file.html');  <-- this should work. 
```

# objective-c - 如何在 iOS 中创建只读电子邮件？

> ID：10420177
> 
> 赞同：0
> 
> 时间：2012-05-02T19:14:56.713
> 
> 标签：objective-c, ipad, email, ios5

我已经编写了在 Objective c iOS 中创建和填充电子邮件的代码，但我们需要确保用户不会更改内容 - 用户仍然可以控制发送电子邮件。这可能吗？如果可以，怎么办？干杯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T19:19:51.547

您需要通过除 iOS 中的邮件框架之外的其他方式将消息发送到 MTA。如果您使用邮件框架，用户将能够编辑邮件。两个选项是：

*   直接在您的应用程序中实现您自己的 SMTP 客户端。由于您只是发送消息，因此这并不复杂。

*   通过 Web 服务或其他接口将消息发送到另一台机器，并让该机器代表您发送消息。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-02T19:19:54.353

您可以将内容附加为 PDF 文件

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-02T19:17:42.190

我确信在公共 API 中没有办法做到这一点。

您可以预先填写收件人：地址、主题和电子邮件正文，但用户可以随时更改这些内容。

# ios - 使用开发证书连接到 prod APN

> ID：10420179
> 
> 赞同：6
> 
> 时间：2012-05-02T19:15:07.880
> 
> 标签：ios, ruby, ssl, apple-push-notifications

我正在使用此 Ruby 代码在推送失败时从 APN 接收错误：

```
if IO.select([ssl], nil, nil, 5)
    read_buffer = ssl.read(6)
    process_error_response(read_buffer)
end 
```

我注意到一个奇怪的情况，其中 IO.select 不是 nil 但 read_buffer 返回一个空字符串。经过一些调试后，我意识到如果您使用开发 APNs 证书连接到 gateway.push.apple.com 会发生这种情况，并且如果您使用生产证书连接到 gateway.sandbox.push.apple.com 显然会发生同样的事情。

有没有办法以编程方式检测到这种情况，例如，如果用户给你一个推送证书并告诉它是生产/开发，但实际上无法在 Apple 开发者网站上验证这一事实？我原以为连接会被拒绝，但它似乎已创建但处于部分断开的状态。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-04-05T18:28:16.117

一种方法是打开证书并检查主题，例如：

```
require 'openssl'
def production?(cert_path)
  certificate = ::OpenSSL::X509::Certificate.new(File.read(cert_path))
  !certificate.subject.to_s.include?('Development')
end 
```

对于生产证书，主题如下所示：

```
"Apple Production IOS Push Services: com.mybundle.app..." 
```

对于开发证书如下所示：

```
"Apple Development IOS Push Services: com.mybundle.app..." 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T14:07:47.107

好吧，这不是一种检查证书是否是 APNS 有效的方法，但是如果您想检测它是开发证书还是生产证书，则可以对其进行检查。开发将包含“Developer”字符串，而生产将包含“Production”字符串。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-12-17T23:00:30.370

[我只是使用证书直接从命令行](https://stackoverflow.com/a/65270300/5175709)将其发送给自己...

使用开发证书时，我看到：

```
api.development.push.apple.com 
```

我没有使用生产证书进行测试，但是我很确定当您将其与生产一起发送时，您会看到：

```
api.push.apple.com 
```

FWIW*生产*证书将在*开发*（应用程序*未*使用分发证书签名）环境中工作 - 只要两个环境具有相同的 bundleId。但是生产证书在生产环境中不起作用（使用分发证书签名的应用程序）

除此之外，现在更安全的方法是不使用用户证书，而只使用*密钥/令牌*机制。看[这里](https://developer.apple.com/documentation/usernotifications/setting_up_a_remote_notification_server/establishing_a_token-based_connection_to_apns)

# c++ - 解析 GLSL 着色器字符串以查找 Android NDK 中的变量名称

> ID：10420180
> 
> 赞同：5
> 
> 时间：2012-05-02T19:15:08.553
> 
> 标签：c++, parsing, variables, android-ndk, glsl

这是一个笨蛋。为了正确解释，让我解释一下我正在尝试做的事情。我将跟进代码清单，然后解释代码。

**目标**

我正在尝试获取我拥有的每个 GLSL 着色器文件中的变量名称。现在，我只有一个顶点着色器，以及一个片段着色器来补充它。这样做的目的是让我可以动态地将值绑定到着色器，而无需输入每个变量名称。

**代码**

```
std::vector< const char* > GetShaderVariableNames( const Shader& shader )
    {
        Config::Log::info( "Getting shader variable names." );

        static const char* keyLookupTable[] =
        {
            "vec2", "vec3", "vec4",
            "mat2", "mat3", "mat4",
            "float", "int", "double"
        };

        std::vector< const char* >  keys;
        std::vector< std::string > lines;

        SplitIntoLines( &lines, std::string( shader.shaderSrc ) );

        for( int32_t iLines = 0; iLines < lines.size(); ++iLines )
        {
            const char* line = lines[ iLines ].c_str();

            int32_t index = 0;
            bool foundMatch = false;

            for( int32_t iKey = 0; iKey < sizeof( keyLookupTable ) / sizeof( char ); ++iKey )
            {
                if( strContains( lines[ iLines ], keyLookupTable[ iKey ] ) )
                {
                    index = iKey;
                    foundMatch = true;
                    break;
                }
            }

            if( foundMatch )
            {
                const int32_t pos = lines[ iLines ].find( keyLookupTable[ index ] );

                Config::Log::info( "Position found is %i", pos );

                const int32_t lineLen = strlen( line );

                char* var = new char[ lineLen - pos ];

                int32_t iLine = pos + strlen( keyLookupTable[ index ] );

                for( ; iLine < lineLen; ++iLine )
                {
                    var[ iLine ] = line[ iLine ];
                }

                Config::Log::info( "Shader Variable Found is: %s", var );

                keys.push_back( var );
            }
        }

        return keys;
    } 
```

**服用红色药丸**

因此，想法是有一个包含最常用变量*类型*的键查找表。首先，接收到的着色器是一个类，它包含有关数据的信息，例如它的句柄、它的类型（片段、顶点、纹理等），当然还有它的来源。我从着色器文件中解析这些，而不是字符串。

发生的情况是有一个老爹循环，它遍历着色器文件中解析的每一行。在每一行中，如果在键查找表中存在匹配项，则迭代的第二个循环`keyLookupTable[]`将中断，索引值取值为`iKey`（即，数组中的索引，在其中找到匹配项）。然后循环中断。

如果找到匹配项，则采用找到匹配项的行中的位置（例如`vec4`或`mat3`）。从那里，使用存储在 中的位置`pos`，我们用作`pos`变量名称长度的基础，这是通过在 char 数组中指定所需的字符数量来完成的。所需数量是线的长度减去位置。

然后从那里第三个也是最后一个循环遍历该行，使用 a`char*`来引用它，将值放入`line`并将它们复制到分配的`var`字符数组中。

最后，`std::vector`键插入`var`并继续循环，重复该过程。

**值得注意的问题**

*   我使用 JNI 来获取着色器字符串，因为着色器本身是通过 Java 解析的，然后通过 JNI 发送到 C++。
*   Unicode 可能是一个问题，因为我得到了这样的输出： `Shader Variable Found is: |uԯ|uԯ/`
*   着色器 src 从 JNI 通过`env->GetStringUTFChars()`

**结论**

我确信有更好的方法可以做到这一点，可能是使用`std::stringstream`或其他方法，但我对它不是很熟悉，希望这个算法能以某种方式或某种方式工作。但是，如果这是这样做的“天真”方式，我愿意接受建议。

**问题**

实现这一目标以使解析工作的最佳方法是什么？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-02T19:20:28.377

您确定需要自己执行此操作吗？GLSL 已经为您完成了此解析，如果您想要所有输入变量的列表，您可以通过`glGetActiveAttrib`/获取它们`glGetActiveUniform`。

只需查询链接着色器的活动属性/统一的数量，然后遍历每个索引以查询输入变量的名称。

[http://www.opengl.org/sdk/docs/man/xhtml/glGetActiveAttrib.xml](http://www.opengl.org/sdk/docs/man/xhtml/glGetActiveAttrib.xml)

[http://www.opengl.org/sdk/docs/man/xhtml/glGetActiveUniform.xml](http://www.opengl.org/sdk/docs/man/xhtml/glGetActiveUniform.xml)

# objective-c - 在 iPhone 应用程序中动态更改 UI

> ID：10420184
> 
> 赞同：0
> 
> 时间：2012-05-02T19:15:26.463
> 
> 标签：objective-c, ios, cocoa-touch, user-interface

我想知道是否有人知道是否可以根据服务器调用动态更改 iPhone 应用程序 UI，例如，如果用户 X 登录，他将看到一种类型的 UI，如果另一个用户登录，另一个 UI 将出现。

它是否与 Apple HIG 一致（我找不到...）？我猜应该没问题，因为理论上我可以用网络视图做所有事情，但这听起来不像苹果会喜欢的。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-02T19:28:27.157

WWDC10 上有一个关于这个主题的演讲：[“Building a Server-driven User Experience”](https://developer.apple.com/videos/archive/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-02T19:21:04.133

我相信你可以在 iOS 5 框架中使用新的外观 API。这是一篇讨论它的文章：

[http://www.raywenderlich.com/4344/user-interface-customization-in-ios-5](http://www.raywenderlich.com/4344/user-interface-customization-in-ios-5)

# ftp - FTP 命令发送与放置

> ID：10420190
> 
> 赞同：5
> 
> 时间：2012-05-02T19:15:42.680
> 
> 标签：ftp, ftp-client, ftps

我在夜间运行的 dos 文件遇到了一些问题，该文件将一些文件发送到另一家公司的 ftp 服务器，另一家公司检查了他们的日志，我们正在连接并且能够登录，但没有文件被传输。我想知道使用 put 命令和 send 命令之间是否有区别。新旧系统不支持其中一个吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-02T19:19:26.333

Linux 的手册页`ftp`说这`send`是“put 的同义词”。MS 的命令行客户端文档说“[发送命令与放置命令相同](http://www.microsoft.com/resources/documentation/windows/xp/all/proddocs/en-us/ftp__send.mspx?mfr=true)”。

现在，FTP 客户端可以随心所欲地做任何事情。标准化的是 FTP 协议；命令行界面，没那么多。（客户端甚至没有必要*具有*命令行界面；大多数 GUI 客户端没有。）但是为了兼容性，大多数具有命令行界面的客户端倾向于同意大多数常用命令。而且服务器不知道也不关心你输入了什么命令来发送文件；只要它看到一个`STOR`（发送文件的协议级命令），假设其他一切正常，文件就会被传输。

似乎您的问题出在“其他所有问题”中。

# linq - 在没有 foreach 循环的情况下将两个 Linq 查询加入单个选择

> ID：10420191
> 
> 赞同：0
> 
> 时间：2012-05-02T19:16:04.647
> 
> 标签：linq, entity-framework

我需要从两个查询中创建一个新模型。我有一个**Member**实体和一个**MemberTeam**实体，它们都相互引用。我需要的是**所有**成员的列表，并知道该成员是否被分配到给定的团队。

我目前有以下代码，但对我来说似乎很笨重，我希望有人有更好的方法来创建这个组合列表，只使用 Linq 语句（没有 foreach）。基本上，代码获取所有成员的列表，获取分配给团队的另一个成员列表，然后使用 foreach 循环查看该成员是否已分配给团队。

```
 int teamId = 1;
  var model = new SelectedMemberListModel();
  List<Member> allMembers = _unitOfWork.RepositoryFor<Member>().All().ToList();
  List<Member> teamMembers = _unitOfWork.RepositoryFor<MemberTeam>().AllIncluding(x => x.Members).Single(x => x.Id == teamId).Members.ToList();
  List<SelectedMemberModel> membersWithTeamSelected = new List<SelectedMemberModel>();
  foreach (var member in allMembers)
  {
    SelectedMemberModel selectedMemberModel = new SelectedMemberModel();
    selectedMemberModel.FirstName = member.FirstName;
    selectedMemberModel.LastName = member.LastName;
    if(teamMembers.Contains(member))
    {
      selectedMemberModel.Selected = true;
    }
    membersWithTeamSelected.Add(selectedMemberModel);
  } 
```

如果需要更好地理解我的模型，这里是我的实体：

```
public class Member
{
  public int Id { get; set; }
  public string FirstName { get; set; }
  public string LastName { get; set; }
  public int TeamId { get; set; }
  public virtual MemberTeam Team { get; set; }
  //... Other properties here...
}

public class MemberTeam
{
  public int Id { get; set; }
  public string Name { get; set; }
  public ICollection<Member> Members { get; set; }
}

public class SelectedMemberModel
{
  public int MemberId { get; set; }
  public string FirstName { get; set; }
  public string LastName { get; set; }
  public bool Selected { get; set; }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T19:37:21.497

我不完全确定我是否正确理解了您 - 但我认为这些可能是您需要的查询？

这将返回一个 ...Model 对象的列表，仅适用于选定的成员（那些在 teamMembers 列表中）：

```
var assignedOnly = allMembers
                     .Where(m => teamMembers.Contains(m))
                     .Select(m => new SelectedMemberModel() { 
                         FirstName = m.FirstName, LastName = m.LastName, 
                         Selected = true, MemberId = m.Id}); 
```

并且此查询应将所有成员作为 ...Model 对象返回，其中 selected 属性是根据与上述相同的条件设置的：

```
 var allToModel = from m in allMembers
                     let selected = teamMembers.Contains(m)
                     select new SelectedMemberModel() { 
                       FirstName = m.FirstName, LastName = m.LastName, 
                       Selected = selected, MemberId = m.Id }; 
```

无论如何，我不希望这比 foreach 循环更有效。

**更新：**

好的，我误解了意图 - 我以为你想摆脱 foreach 所以我忽略了循环之外的任何东西，但是只进行一个 db 调用是非常有意义的。
我对实体框架不太熟悉，但我认为以下 linq 语句就足够了 - 它仅在 allMembers 列表上运行，使用 teamId 值来评估成员是否在所选团队中。
让我知道这是否能解决您的问题。

```
var selectedMemberModelList = allMembers
                                 .Select(m => new SelectedMemberModel() {
                                    FirstName = m.FirstName, LastName = m.LastName,
                                    MemberId = m.Id, Selected = m.Id == teamId})
                                 .ToList(); 
```

# ruby - 从 Shell 脚本进入和退出子进程

> ID：10420193
> 
> 赞同：0
> 
> 时间：2012-05-02T19:16:06.500
> 
> 标签：ruby, bash, shell

我试图`irb`从 shell 脚本进入，做一些事情，然后返回到 shell 脚本。

我怎样才能做到这一点？

```
#!/bin/bash
#example_app

# Some shell instructions here
irb
four = 2 + 2
exit
echo "This text is not reached and the process hangs open" 
```

**注意：**我不应该尝试加载 irb 来输入静态代码，我同意你们的看法。我没有想过我在做什么。我正在与一个 AWS 库进行交互，我试图将同样的理念带到自动化的过程中，而没有三思而后行。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T19:52:47.053

您可以将此处的文档传递给`irb`：

```
irb <<SCRIPT
  four = 2 + 2
  puts four
SCRIPT 
```

但是，我认为这不会完成您想要做的事情。这是输出：

```
Switch to inspect mode.
  four = 2 + 2
4
  puts four
4
nil 
```

它类似于[`bash -x`](http://tldp.org/LDP/Bash-Beginners-Guide/html/sect_02_03.html)。为什么不简单地使用普通旧`ruby`的呢？

```
ruby <<SCRIPT
  four = 2 + 2
  puts four
SCRIPT
4 
```

如果您不打算*与之交互*，则无需生成*交互式*shell 。

 ** * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T19:26:48.953

我认为你想从 [bash 中的 fork 和 exec 中](https://stackoverflow.com/questions/3096561/fork-and-exec-in-bash)解释答案 ：

function_to_fork() { irb }

function_to_fork &

如果您希望那里的一些交互影响父进程或让父进程等待，这可能不起作用。

我下面的评论格式不太好：

通过以下程序，我能够实现：

```
#!/bin/bash
# irbb.sh
irb
echo "here"

$ ./irbb.sh 
>> four = 2 + 2
=> 4
>> exit
here 
```*

# php - 当类是具有命名空间的变量时调用静态方法

> ID：10420196
> 
> 赞同：0
> 
> 时间：2012-05-02T19:16:25.323
> 
> 标签：php, namespaces

我有以下代码，我在我放在一起的一个小框架中使用。我的框架最初没有使用命名空间，但由于两个类名在这个项目中发生冲突，我认为现在是尝试这个的好时机。执行脚本时会抛出以下错误：

```
[Wed May 02 15:04:33 2012] [error] [client 127.0.0.1] PHP Parse error:  syntax error, unexpected T_VARIABLE, expecting T_STRING in /home/marco/Projects/stackgaming.com/app/server.php on line 17 
```

以下是与错误相关的以下代码片段：

应用程序/服务器.php

```
if( !defined('IN_APP') ) { die('THESE ARE NOT THE DROIDS YOU ARE LOOKING FOR'); }

require_once('model/Server.php');

\Model\Server::$save_path = APPLICATION_ROOT . 'servers';

class Server extends App
{
    public static function init($server_id)
    {
        $server_data = \Model\Server::get($server_id);
        $game = $server_data['interface'];
        require_once('model/' . $game . '.php');

        $query_data = \Model\$game::query($server_data['host'], $server_data['query_port']);

        var_dump($server_data);
        var_dump($query_data);

        //static::$View->display('user_main.tpl');
    }
} 
```

这是 model/Minecraft.php 文件，它被`$game`解析为。

```
<?php

namespace Model;

class MinecraftException extends \Exception
{
    // Exception thrown by Minecraft classes
}

class Minecraft
{
    public static function query( $host, $port = 25565, $timeout = 3 )
    {
        $socket = socket_create(AF_INET, SOCK_STREAM, SOL_TCP);

        socket_set_option($socket, SOL_SOCKET, SO_SNDTIMEO, array('sec' => $timeout, 'usec' => 0));

        if( $socket === false || @socket_connect($socket, $host, (int)$port) === false )
        {
            return false;
        }

        socket_send($socket, "\xFE", 1, 0);
        $len = socket_recv($socket, $data, 256, 0);
        socket_close($socket);

        if( $len < 4 || $data[ 0 ] != "\xFF" )
        {
            return false;
        }

        $data = substr($data, 3);
        $data = iconv('UTF-16BE', 'UTF-8', $data);
        $data = explode("\xA7", $data);

        return array
        (
            'hostname'   => substr($data[0], 0, -1),
            'total_players'    => isset($data[1]) ? intval($data[1]) : 0,
            'max_players' => isset($data[2]) ? intval($data[2]) : 0
        );
    }
} 
```

如果我从 Minecraft 类中删除命名空间，它可以正常工作，但如果我要使用命名空间，我不应该一直走吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T17:38:16.793

我发现这个问题比找到解决方案要早得多。为了大家的利益，这里有一个有用的链接来解决手头的问题：[Variable functions with namespaces in PHP](https://stackoverflow.com/questions/1250297/variable-functions-with-namespaces-in-php)

# magento - Magento 模块设置 - 将产品属性更改为不需要

> ID：10420199
> 
> 赞同：7
> 
> 时间：2012-05-02T19:16:42.243
> 
> 标签：magento

在安装模块期间如何更改 eav 属性属性。

具体来说，我想将产品属性从需要更改为不需要。

我目前正在模块设置中的 getDefaultEntities 调用中合并更新的产品属性，但它给出了奇怪的结果。

例如：

```
public function getDefaultEntities()
    {        
        return array(
            'catalog_product' => array(
                'entity_attribute_collection' => 'catalog/product_attribute_collection',        
                'attribute_model' => 'catalog/resource_eav_attribute',
                'table' => 'catalog/product',
                'entity_model' => 'catalog/product',
                'additional_attribute_table' => 'catalog/eav_attribute',
                'attributes' => array(
                    'short_description' => array('required'=> false)
                )
            )
        );

    } 
```

导致 short_description 字段丢失其前端标签

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-05-02T20:38:14.117

```
/* @var $installer Mage_Catalog_Model_Resource_Setup */
$installer->updateAttribute('catalog_product','short_description','is_required',0); 
```

# ruby-on-rails-3 - 在 link_to 中指定 :format 在 rails 3.2.2 中不起作用

> ID：10420202
> 
> 赞同：11
> 
> 时间：2012-05-02T19:16:58.797
> 
> 标签：ruby-on-rails-3, ruby-on-rails-3.2, link-to

我正在将一个项目从 rails 3.1 移动到 rails 3.2.2，我有这个：

```
= link_to 'CSV', :action => 'list', :search => @search, :format => 'csv' 
```

在 rails 3.1 中，这指定了 html 链接中的格式 (format=csv)，它被 respond_with 捕获，但在 3.2.2 中，该格式永远不会进入链接。我浏览了 github 上的提交列表，找不到与此相关的任何内容。

编辑：

看起来这是 url_for 的问题

```
#rails 3.1
url_for :controller=>'posts', :action=>'index', :format=>:xml
/admin/posts/index?format=xml

#rails 3.2.2
url_for :controller=>'posts', :action=>'index', :format=>:xml
/admin/posts/index

#rails 3.2.2
url_for :controller=>'posts', :action=>'index', :format=>:xml, :id => 5
/admin/posts/index/5.xml 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-05-02T20:19:46.657

尝试使用`:format => :csv`

[http://apidock.com/rails/ActionView/Helpers/UrlHelper/link_to#32-Link-to-same-URL-with-different-format](http://apidock.com/rails/ActionView/Helpers/UrlHelper/link_to#32-Link-to-same-URL-with-different-format)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-17T13:05:08.243

从 Rails 3.0 升级到 3.2.17 时，我遇到了同样的问题。

据我所见，问题不在于（正如其他答案所暗示的那样）关于`link_to`指定参数的方式，而与`routes.rb`. 看起来在3.2中，`:format`参数只能作为URL后缀传递。如果没有映射`:format`到 URL 的路由，那么它将被忽略`link_to`。在这种情况下， 3.0 将添加`format`为 HTTP 参数。3.2 不再这样做了。

我的解决方案是更改我原来的默认路由

```
match ':controller(/:action(/:id(.:format)))' 
```

进入

```
match ':controller(/:action(/:id)(.:format))' 
```

最初的定义涵盖了类似的 URL `/admin/posts/index/5.xml`，但不包括`/admin/posts/index.xml`. 这看起来与此处原始问题中的症状相同。

在我应用更改后，它`:format`也包含在其中没有的 URL 中`id`。

# javascript - extjs4 - 向容器添加自定义组件

> ID：10420205
> 
> 赞同：1
> 
> 时间：2012-05-02T19:17:16.090
> 
> 标签：javascript, extjs, extjs4

我正在尝试将自定义组件添加到 ExtJS4 容器。但是，当尝试在 onRender 方法中将项目添加到容器时，我收到错误消息：

'无法从 AbstractContainer 中的 doLayout 读取属性'layoutBusy' of undefined'。未定义 componentLayout 属性。

```
Ext.define('App.view.dashboard.RightContainer', {   
    extend: 'Ext.container.Container',
    uses: [
        'App.view.Component1',
        'App.view.Component2'
    ],

    alias: 'widget.dashboardright',
    layout: 'fit',
    border: 0,

    onRender: function() {

        var self = this;
        self.callParent(arguments);

        var component1 = Ext.create('App.view.Component1', {
            height: '300px',
            flex: 1,
            incidents: self.dashboard.get('incidents')
        });

        var component2 = Ext.create('App.view.Component2', {
            flex: 1,
            contact: self.dashboard.get('contacts')
        });

        self.add(component1);
        self.add(component2);
    }
}); 
```

我尝试使用容器的项目配置属性添加组件并且它有效。但是，我不确定如何将自定义参数传递给组件（需要将模型实例传递给组件）。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T19:47:27.090

看看这个例子：http: [//jsfiddle.net/ChE59/](http://jsfiddle.net/ChE59/)

我正在向容器中添加 3 个面板并传入一些自定义属性。

```
Ext.define('App.view.dashboard.RightContainer', {   
    extend: 'Ext.container.Container',
    alias: 'widget.dashboardright',

    border: 0,

    constructor: function(config){
        Ext.apply(this, {
            items: [
                { 
                    title: 'panel 1'
                },
                { 
                    title: 'panel 2'
                },
                {
                    title: config.customParameter
                }
            ]     
        });

       this.callParent(arguments);        
    }
});

Ext.widget('dashboardright', {
    renderTo: Ext.getBody(),
    customParameter: 'custom parameter'
}); 
```

（如果您有更多一个组件，则适合布局不是一个好的选择）

# javascript - IE8中的Javascript跨域请求

> ID：10420213
> 
> 赞同：0
> 
> 时间：2012-05-02T19:17:30.307
> 
> 标签：javascript, internet-explorer, cross-domain, xdomainrequest

我有一个针对数据库验证 ID 的函数。如果找到 ID，则该函数返回 true，否则返回 false。

得到在其他浏览器中工作的请求。现在正在使用 Internet Explorer 的 XDomainRequest 来解决这个问题。

```
function verify(id){
    xmlhttp=new window.XDomainRequest();
    xmlhttp.onload = checkResponse;
    xmlhttp.open("GET", "http://abc.com/verify?id=" + encodeURIComponent(id));
    xmlhttp.send();

    function checkResponse(){
        if(xmlhttp.responseText == 200) {   
            return true;
        } else {
            return false;
        }
    }
} 
```

问题是我希望验证函数返回 false，而不是 checkResponse 函数。

在其他浏览器中将 open 设置为 false 可以解决问题，但在 IE 中则不然。

请不要 jQuery 答案。

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-02T19:26:41.560

这是将 IE8 中的 CORS 请求合并到 jQuery 中的推荐方法。您可能可以将此作为您自己的起点：

[https://github.com/jaubourg/ajaxHooks/blob/master/src/ajax/xdr.js](https://github.com/jaubourg/ajaxHooks/blob/master/src/ajax/xdr.js)

此外，`verify`不应该是同步操作。建议将回调函数传递给它并保持异步：

```
function verify(id, callback){
    var xmlhttp = new window.XDomainRequest();
    xmlhttp.onload = function () {
        callback( xmlhttp.responseText === 200 );
    };
    xmlhttp.open("GET", "http://abc.com/verify?id=" + encodeURIComponent(id));
    xmlhttp.send();
} 
```

然后你可以这样调用：

```
verify( 123456, function ( isValid ) {
    if ( isValid ) {
        // do something if valid
    } else {
        // or not
    }
}); 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-05-02T19:23:07.283

您需要考虑的第一点是将 js 代码更改为非异步工作。否则 checkResponse 是您必须得到答案的唯一点。您的代码似乎是异步的，它应该是同步的。

问候。

# asp.net - DataPager 无法与 Listview 一起正常工作

> ID：10420215
> 
> 赞同：1
> 
> 时间：2012-05-02T19:17:37.643
> 
> 标签：asp.net, listview, datapager

它是我的 aspx 页面的 html

```
 <asp:ListView ID="lstviewInvoiceReport" runat="server">
        <LayoutTemplate>
            <table style="font-size: medium; font-family: Times New Roman">
                <tr>
                    <th>
                        Date
                    </th>
                    <th>
                        Biller
                    </th>
                    <th>
                        Customer
                    </th>
                    <th>
                        Total
                    </th>
                    <th>
                        Owing
                    </th>
                    <th>
                        Paid
                    </th>
                </tr>
                <tr>

                </tr>
                <asp:PlaceHolder runat="server" ID="itemPlaceholder"></asp:PlaceHolder>
        </LayoutTemplate>
        <ItemTemplate>
            <tr>
                <td>
                    <asp:Label runat="server" ID="lblDate"><%#Eval("InvoiceDate") %></asp:Label>
                </td>
                <td>
                    <asp:Label runat="server" ID="lblBillerName"><%#Eval("BillerName") %></asp:Label>
                </td>
                <td>
                    <asp:Label runat="server" ID="lblCustName"><%#Eval("CustName") %></asp:Label>
                </td>
                <td>
                    <asp:Label runat="server" ID="lblTotal"><%#Eval("InvoiceTotal") %></asp:Label>
                </td>
                <td>
                    <asp:Label runat="server" ID="lblOwing"><%#Eval("InvoiceOwing") %></asp:Label>
                </td>
            </tr>
        </ItemTemplate>
    </asp:ListView>
    <br />
    <asp:DataPager ID="DataPager1" runat="server" PagedControlID="lstviewInvoiceReport"
        PageSize="2">
        <Fields>
            <asp:NextPreviousPagerField ButtonType="Button" ShowFirstPageButton="True" ShowNextPageButton="False"
                ShowPreviousPageButton="False" />
            <asp:NumericPagerField />
            <asp:NextPreviousPagerField ButtonType="Button" ShowLastPageButton="True" ShowNextPageButton="False"
                ShowPreviousPageButton="False" />
        </Fields>
    </asp:DataPager> 
```

在后面的代码中：

```
protected void Page_Load(object sender, EventArgs e)
{
    if (!IsPostBack)
    {
        dt = objBllinvoice.GetInvoiceStatement(6, 3, "20120404", "20120407");
        lstviewInvoiceReport.DataSource = dt;
        lstviewInvoiceReport.DataBind();
    }
} 
```

我正在将 listview 与 datatable 绑定，它工作正常，但是当我对 listview 进行分页时 a) 我需要双击每个按钮以使其工作。b) listview 中的数据没有根据分页更新。

请在这种情况下帮助我。谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-02T19:20:32.200

当您使用数据分页器时，您必须在 PreRender 中进行数据绑定。您当前正在 Page_Load 中进行数据绑定

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-26T06:56:22.010

尝试将您的数据绑定到`PagePropertiesChanged`Event 中，如下所示：

```
protected void lstviewInvoiceReport_PagePropertiesChanged(object sender, EventArgs e)
        {
            BindData();
        } 
```

# linux - linux makefile链接错误__line__

> ID：10420220
> 
> 赞同：2
> 
> 时间：2012-05-02T19:17:48.973
> 
> 标签：linux, unix

我在 Linux 中收到以下错误“未定义的引用`__line__`。我知道 C 具有隐式宏`__LINE__`。在代码`__line__`中分配`__LINE__`为

```
extern int __line__;
LDF(__line__ = __LINE__); 
```

所以`__line__`这里是一个变量而不是宏，它被赋值为`__LINE__`. 在这里`extern int`，所以它应该在某处被宣布为公正`int __line__`。但是我没有看到声明 _ *line* _ 的任何头文件或 c 文件。此外，此错误不是在编译 .c 文件期间而是在链接 .o 文件时出现。

此错误不会出现在 UNIX 中。此外，在链接 libgen 时，会链接 libposix4 库。这些库仅存在于 UNIX 中而不存在于 LINUX 中我假设`int __line__;`这些库中的某处存在或者我该如何解决此错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T18:27:50.493

@rodrigo @sehe。感谢您的投入。我发现行 int **line** =0; 在“.c”文件之一中创建该文件的对象，并与更多的对象文件一起创建归档文件“.a”库文件。也就是说，common.c 有 int **line** = 0; 和 common.o 和一些 xo, yo 被归档以使用命令“ar ruv”创建“libcommon.a”，并且该库被链接以在 makefile 中创建二进制可执行文件作为 -lcommon。再次感谢您的投入！！！！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T22:02:06.637

`__line__`不幸的是，标准禁止将其作为便携式标识符。

它在 UNIX 上“工作”的事实是实现定义的，并且您正在见证不可移植的事实。

我唯一的建议是重命名该变量。您*可以*玩火并在编译标志中添加一些非常邪恶的东西：

```
-D__line__=MYCODEBASE_LINE__ 
```

但我不特别推荐这样的东西

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-03T00:36:19.000

它可能是一个非标准的、未记录的内部变量，恰好出现在一些使用的库中。

一些聪明的人在你的程序中发现了它的一些用处。您应该尝试了解为什么存在以及是否真的需要它，因为它很可能在 Linux 中根本不存在。

这就是它以双下划线开头的原因：因为该名称是*reserved*。

# jsf-2 - 在 JSF 2 中从 h:selectOneMenu 中选择值后预先检查 h:manyCheckbox

> ID：10420222
> 
> 赞同：0
> 
> 时间：2012-05-02T19:17:53.540
> 
> 标签：jsf-2, checkbox, drop-down-menu, valuechangelistener

从下拉框中选择一个值并在下拉框中调用 valueChangeListener 后，我想预先检查多个复选框。以下是代码：

在 JSF 页面中：

```
<h:selectOneMenu id="roleName" styleClass="text" value="#{role.roleID}" valueChangeListener="#{role.processValueChange}" immediate="true" onchange="submit()">
    <f:selectItem itemLabel="--Select--" itemValue="--Select--"></f:selectItem>
    <f:selectItems noSelectionValue="--Select--" value="#{role.rolesVoList}" var="x" itemLabel="#{x.roleName}" itemValue="#{x.roleID}" />
</h:selectOneMenu>

<p>
    <h:outputText value="Notifications" styleClass="label" />
</p>
<p>
    <h:selectManyCheckbox id="notificationPrivileges" value="#{role.notificationPrivileges}" layout="pageDirection">
        <f:selectItems value="#{role.notificationPrivilegeMap}" />
    </h:selectManyCheckbox>
</p> 
```

在托管 Bean 中：

```
private List<RolesVo> rolesVoList;
    private boolean checkBoxSet = false;
    private List<Integer> notificationPrivileges;
    private Map<String, Integer> notificationPrivilegeMap;
    private RolePrivilegeVo rolePrivilege;

    public void processValueChange(ValueChangeEvent event) {
        messageHandler = new MessageHandler();
        int newValue = (Integer) event.getNewValue();
        setRoleID(newValue);
        try {
            rolePrivilege = roleService.getRolePrivileges(newValue);
            setNotificationPrivileges(rolePrivilege.getPrivilegeIDs());
            setCheckBoxSet(true);

        } catch (Exception e) {
            messageHandler.addGlobalErrorMessage(OATSConstants.errorFetchPrivilege);
        }

    } 
```

getPrivilegeIDs() 返回整数列表。正在提交表单并且正在成功处理 valueChangeListener 方法，但之后未选中复选框。请指出我做错了什么。非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T19:29:14.150

它失败了，因为您没有为`<h:selectManyCheckbox>`. `List`您正在使用和之类的通用集合`Map`。EL 不支持泛型，`String`默认情况下将所有内容解释为。这将在测试中失败，`equals()`以检查是否必须检查该项目。

在使用`Integer`时，您需要指定`javax.faces.Integer`转换器：

```
<h:selectManyCheckbox ... converter="javax.faces.Integer"> 
```

* * *

**与具体问题无关**，您正在使用旧的 JSF 1.x hack 来滥用`valueChangeListener`with`immediate="true"`和`onchange="submit()`来填充另一个组件。这非常笨拙，并且每当您在同一表单中的任何地方使用验证时都可能会失败。而是使用新的 JSF 2.0 提供的`<f:ajax>`标记。然后它将如下所示：

```
<h:selectOneMenu id="roleName" styleClass="text" value="#{role.roleID}">
    <f:selectItem itemLabel="--Select--" itemValue="--Select--"></f:selectItem>
    <f:selectItems noSelectionValue="--Select--" value="#{role.rolesVoList}" var="x" itemLabel="#{x.roleName}" itemValue="#{x.roleID}" />
    <f:ajax listener="#{role.processValueChange}" render="rolePrivileges" />
</h:selectOneMenu>

<p>
    <h:outputText value="Role Management" styleClass="label" />
</p>
<p>
    <h:selectManyCheckbox id="rolePrivileges" value="#{role.rolePrivileges}" layout="pageDirection" converter="javax.faces.Integer">
        <f:selectItems value="#{role.rolePrivilegeMap}" />
    </h:selectManyCheckbox>
</p> 
```

和

```
public void processValueChange(AjaxBehaviorEvent event) {
    // ...
} 
```

# sql - SQL 查询中的 UNION

> ID：10420223
> 
> 赞同：0
> 
> 时间：2012-05-02T19:17:55.337
> 
> 标签：sql, tsql

我目前正在使用查询

```
SELECT sex, count(sex) as [count], problem1, problem2, problem3
from myTable
group by sex, problem1, problem2, problem3
order by sex, problem1, problem2, problem3 
```

这将使我计算每种性别（1、1,1 或 1,01）等所有可能的位组合

有什么方法可以使用联合查询来获取额外列中的男性和女性总数？

所以

![在此处输入图像描述](../Images/75833f44268938db5517bf9a1c792f4b.png)

性别计数问题1 问题2 问题3（性别计数在这里）

如果我不能为两性都做到这一点，有没有办法只为一个做到这一点？

编辑：最后一栏，女性总数是我要添加的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T19:23:35.507

不确定`UNION`应该去哪里，但是如果您希望使用包含所有项目的附加列来扩展结果集`COUNT`，您可以使用以下内容：

```
SELECT sex, count(sex) as [count], problem1, problem2, problem3, (select count(1) from myTable) as TotalCount
from myTable
... 
```

顺便说一句，不确定您是否愿意这样做，因为所有行的值都相同。通常，我们会编写一个单独的查询。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T19:23:55.940

```
SELECT sex, count(sex) as [count], problem1, problem2, problem3, s.s_total
from myTable
, (select count( sex ) s_total from mytable) s
group by sex, problem1, problem2, problem3, s.s_total
order by sex, problem1, problem2, problem3 
```

你可以在子查询部分做任何你喜欢的事情

（编辑 - 需要按相同的 s_total 分组）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-02T19:25:28.313

您可以使用临时表来实现这一点。不过需要注意的是：您的计数将针对特定性别的每一行重复。

```
CREATE TABLE #Temp
(
    sex varchar(10), -- or whatever datatype you are using
    totalCount INT
)

INSERT INTO #Temp
(
    sex,
    totalCount
)
SELECT
    sex,
    count(1)
FROM
    myTable
GROUP BY
    sex

SELECT m.sex, count(m.sex) as [count], m.problem1, m.problem2, m.problem3, t.totalCount
from myTable AS m
JOIN #Temp AS t
ON t.sex = m.sex
group by m.sex, m.problem1, m.problem2, m.problem3, t.totalCount
order by m.sex, m.problem1, m.problem2, m.problem3, t.totalCount 
```

# c# - 如何将字典转换为查找？

> ID：10420228
> 
> 赞同：17
> 
> 时间：2012-05-02T19:18:25.083
> 
> 标签：c#, .net, list, dictionary, lookup

我有一个带有签名的字典：`Dictionary<int, List<string>>`. 我想将其转换为带有签名的查找：`Lookup<int, string>`。

我试过：

```
Lookup<int, string> loginGroups = mapADToRole.ToLookup(ad => ad.Value, ad => ad.Key); 
```

但这不是很好。

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-05-02T19:21:51.980

你可以使用：

```
var lookup = dictionary.SelectMany(p => p.Value
                                         .Select(x => new { p.Key, Value = x}))
                       .ToLookup(pair => pair.Key, pair => pair.Value); 
```

（您可以使用`KeyValuePair`匿名类型来代替 - 我主要不是出于格式化原因。）

这很丑陋，但它会工作。你可以替换任何*创建*字典的代码吗？那可能会更干净。

# android - 以毫秒为单位记录加速度计数据的 Android 代码是什么？

> ID：10420231
> 
> 赞同：0
> 
> 时间：2012-05-02T19:18:34.853
> 
> 标签：android

我正在做一个必须将加速度计数据记录在记录文件中的项目。任何人都可以帮助我使用以下代码吗？为了记录加速度计数据，应在以下代码中添加哪些 android 代码？我可能希望每 10 毫秒获取一次数据。任何帮助是极大的赞赏。

```
package com.example.helloandroid;

import android.app.Activity;
import android.hardware.Sensor;
import android.hardware.SensorEvent;
import android.hardware.SensorEventListener;
import android.hardware.SensorManager;
import android.os.Bundle;
import android.widget.TextView;

public class AccActivity extends Activity implements SensorEventListener {
private SensorManager sensorManager;

TextView xCoor; // declare X axis object
TextView yCoor; // declare Y axis object
TextView zCoor; // declare Z axis object

@Override
public void onCreate(Bundle savedInstanceState){

    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    xCoor=(TextView)findViewById(R.id.xcoor); // create X axis object
    yCoor=(TextView)findViewById(R.id.ycoor); // create Y axis object
    zCoor=(TextView)findViewById(R.id.zcoor); // create Z axis object

    sensorManager=(SensorManager)getSystemService(SENSOR_SERVICE);
    // add listener. The listener will be HelloAndroid (this) class
    sensorManager.registerListener(this,
            sensorManager.getDefaultSensor(Sensor.TYPE_ACCELEROMETER),
            SensorManager.SENSOR_DELAY_NORMAL);

    /*  More sensor speeds (taken from api docs)
        SENSOR_DELAY_FASTEST get sensor data as fast as possible
        SENSOR_DELAY_GAME   rate suitable for games
        SENSOR_DELAY_NORMAL rate (default) suitable for screen       orientation changes
    */
}

public void onAccuracyChanged(Sensor sensor,int accuracy){

}

public void onSensorChanged(SensorEvent event){

    // check sensor type
    if(event.sensor.getType()==Sensor.TYPE_ACCELEROMETER){

        // assign directions
        float x=event.values[0];
        float y=event.values[1];
        float z=event.values[2];

        xCoor.setText("X: "+x);
        yCoor.setText("Y: "+y);
        zCoor.setText("Z: "+z);
    }
} 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T19:58:36.180

您接收数据的速率将取决于操作系统的判断力，因为数据是由触发回调的事件传递的。它也可能依赖于设备。您不能以预定的速率轮询传感器。SensorManager API 文档状态

```
public boolean registerListener (SensorEventListener listener, Sensor sensor, int rate) 
```

速率传感器事件的发送时间为。这只是对系统的提示。事件的接收速度可能比指定的速率快或慢。通常会更快地接收到事件。该值必须是 SENSOR_DELAY_NORMAL、SENSOR_DELAY_UI、SENSOR_DELAY_GAME 或 SENSOR_DELAY_FASTEST 之一，**或者是所需的事件之间的延迟（以微秒为单位）。**

因此，您可以**要求**延迟 10,000 微秒（10 毫秒），但它多久会发送到您的 onSensorChanged 只能通过测量它的实验来确定。

# spss - 如何在 SPSS 中自定义数字格式，例如在括号之间放置百分比？

> ID：10420234
> 
> 赞同：0
> 
> 时间：2012-05-02T17:33:25.533
> 
> 标签：spss

如何在 SPSS 中自定义数字格式，例如在括号之间放置百分比？任何帮助表示赞赏。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T00:43:05.827

`Ctables`让您广泛控制输出单元格格式。大多数其他过程使用变量格式和输出统计类型的组合来构造格式。如果您使用自定义货币格式（通过 定义`Edit > Options > Currency`），您可以对格式进行大量控制。

使用`SPSSINC MODIFY TABLES`，您可以使用命令中包含的自定义函数之一设置单元格格式。这是一个例子。

```
FREQUENCIES var
SPSSINC MODIFY TABLES subtype="frequencies"
SELECT "Percent" "Valid Percent" "Cumulative Percent"
STYLES CUSTOMFUNCTION='customstylefunctions.SetNumericFormat(format="##.#%")' 
```

如果您双击表格，选择一个单元格，然后选择单元格格式，则会以您看到它们的方式引用这些格式。此命令选择具有列出标签的列并更改单元格格式。

要运行此命令，您需要从[SPSS 社区网站](http://www.ibm.com/developerworks/spssdevcentral)安装 Python Essentials 。对于 V19 或更高版本，此命令随 Essentials 一起安装。

HTH，乔恩·派克

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T14:38:40.600

非常感谢。我认为关键字样式之前缺少斜线： SPSSINC MODIFY TABLES subtype="frequencies" SELECT "Percent" "Valid Percent" "Cumulative Percent" /STYLES CUSTOMFUNCTION='customstylefunctions.SetNumericFormat(format="##.#%") '

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-08-05T08:55:05.707

如果您有 SPSS v22 或更高版本，您可以使用它`OUTPUT MODIFY`来微调输出。

这将删除所有数据透视表的数据值中的百分号：

```
get file = "samples\English\Employee data.sav".
crosstabs educ by gender /cells=row.
output modify /select tables /tablecells select=[body]  format="f10.2". 
```

也可以使用自定义格式（CCA 到 CCD）。此外， 的效果`OUTPUT MODIFY`可能仅限于某些 OMS（子）类型。如果 OMS 子类型等于“报告”，则以下括号括起负值。OMS 子类型可以通过右键单击输出项来找到。OMS 代表“输出管理系统”。

```
if ( mod($casenum, 2) eq 0 )  salary = - salary.  /*create some negative values.
summarize salary /cells = min mean max.
set cca "(-,,,)".  /* negative values are parenthesized.
output modify /select tables /if subtypes=['Report'] /tablecells select=[body] format="cca". 
```

# objective-c - 如何将垂直滚动条添加到 NSTextField？

> ID：10420236
> 
> 赞同：7
> 
> 时间：2012-05-02T19:19:11.483
> 
> 标签：objective-c, cocoa

我正在尝试创建一个命令窗口（用户输入文本），并且需要在 NSTextField 上放置一个滚动条，以回顾输入的内容。谢谢

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-05-02T19:53:37.090

`NSTextField`通常仅用于一行文本，因此您需要改为使用`NSTextView`才能`NSTextField`实现滚动。

[NSTextView 参考](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/ApplicationKit/Classes/nstextview_Class/Reference/Reference.html)。

![文本视图](../Images/9f81b0dc080851d0c5bd499c2a8d727c.png)

# ruby-on-rails - 将 ActiveRecord 属性标记为 html_safe

> ID：10420240
> 
> 赞同：2
> 
> 时间：2012-05-02T19:19:27.160
> 
> 标签：ruby-on-rails, activerecord, html-safe

我们有一个带有 html 属性的 ActiveRecord 模型（比如`Post#body`）。有没有一种调用`body`a`post`返回`html_safe?`字符串的好方法？例如：

```
class Post < ActiveRecord::Base
  # is_html_escaped :body or somesuch magic
end

Post.first.body.html_safe? # => true 
```

否则问题是我们必须调用`raw`我们显示该字段的所有内容。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-02T19:53:57.113

这是我找到的一种方法：

```
class Post < ActiveRecord::Base
  def message
    super.html_safe
  end

  def message=(new_mess)
    new_mess = ERB::Util.html_escape(new_mess.sanitize) unless new_mess.html_safe?
    super(new_mess)
  end
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-31T00:51:46.693

供参考。我为此做了一个模块

```
module SanitizeOnly

  def self.included(mod)
    mod.extend(ClassMethods)
  end

  module ClassMethods

    def sanitize_on_input_only(*attribute_names)

      attribute_names.map(&:to_s).each do | attribute_name |
        class_eval <<-RUBY, __FILE__, __LINE__ + 1

        def #{attribute_name}
          super.html_safe
        end

        def #{attribute_name}=(new_val)
          new_val = ERB::Util.html_escape(new_val.sanitize) unless new_val.html_safe?
          super(new_val)
        end

      RUBY
      end
    end

  end
end 
```

要使用它，只需将其包含在模型中，并将要避免使用 raw for 的属性添加到 sanitize_on_input_only 行，如下所示：

```
sanitize_on_input_only :message, :another_attribute, ... 
```

# javascript - 通过 Stackmob Sdk 将基于主干本地存储的应用程序连接到 StackMob 远程服务器

> ID：10420245
> 
> 赞同：1
> 
> 时间：2012-05-02T19:19:48.617
> 
> 标签：javascript, backbone.js, coffeescript, stackmob

我正在构建这是这个 todos 示例的变体 [http://jasongiedymin.github.com/backbone-todojs-coffeescript/docs/coffeescript/todos.html](http://jasongiedymin.github.com/backbone-todojs-coffeescript/docs/coffeescript/todos.html)

如您所见，应用程序将数据保存到浏览器的本地存储中。

我希望它保存到我正在使用的远程服务器，即 StackMob。阅读 StackMob JS - SDK 教程后，它似乎告诉我如何基于 JS SDK [http://www.stackmob.com/devcenter/docs/JS-SDK-Tutorial从头开始​​构建应用程序](http://www.stackmob.com/devcenter/docs/JS-SDK-Tutorial)

问题是，我是否可以使用我已经编写的内容，并将数据存储在 stackmob 而不是 LocalStorage 中，或者我应该更好地按照 JS-SDK 教程重写应用程序？

谢谢，奥兹

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T05:51:27.453

我不熟悉coffeescript 语法（至少现在还不熟悉！），但我会在不久的将来熟悉它。不幸的是，该 Todo 教程中的本地存储适配器链接已损坏，所以我无法调查，但与此同时，也许我可以推理出来。我确实注意到 Todo 通过以下语法从 Backbone.Model 扩展：

```
class Todo extends Backbone.Model 
```

非咖啡脚本语法将其布局为：

```
var Todo = Backbone.Model.extend({ ...}); 
```

同样，创建一个保存到 StackMob 的 Todo 如下所示：

```
var Todo = StackMob.Model.extend({...}); 
```

所以也许这个翻译会起作用？

```
class Todo extends StackMob.Model

class TodoList extends StackMob.Collection 
```

这似乎相当于定义启用 StackMob 的模型的咖啡脚本，为您的模型提供服务器端 CRUD 能力。

扩展 StackMob.Model 的模型将在调用时使用 JSON 对 StackMob 进行 ajax 调用，并将其`save()`保存到服务器端数据库。同样`model.fetch()`将从数据库中检索并填充模型。

TodoList 将内置 StackMob 查询，因此您可以执行以下操作：

```
(regular JS syntax:)
//Get the first five "done" Todo items, order by the "created date"
var q = (new StackMob.Collection.Query()).equals('done', true).
    setRange(0,4).orderAsc('createddate');
var todos = new TodoList();
todos.query(q); 
```

当我有更多时间时，我会在本周晚些时候自己尝试一下，但我想现在就回复你，尽管今晚很晚，以防万一这可以帮助你继续前进。不要忘记，要真正正确保存，您需要一个 StackMob 帐户并正确初始化 JS SDK。但是，初始化步骤记录在[入门：JS SDK](https://stackmob.com/platform/help/tutorials/html5_js_sdk)和[JS SDK 教程](http://www.stackmob.com/devcenter/docs/JS-SDK-Tutorial#a-sdk_setup)文档中。

希望这能让你上路！

埃里克

# sql - sql server中的子字符串无法正确处理长字符串

> ID：10420248
> 
> 赞同：0
> 
> 时间：2012-05-02T19:19:56.273
> 
> 标签：sql

我正在使用子字符串删除最后一个字符，但不确定出了什么问题，但是当输入字符串很长时它不会删除最后一个字符，但是它会删除较短字符串的最后一个字符。下面是我使用的 SUBSTRING(@XXX,0,(Len(@XXX)-1))

当 Len(@XXX) 很小时，它正在删除最后一个字符，但当输入长度为 98015 时，它不会删除。有没有限制？这里有什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T19:47:28.040

我刚刚对其进行了测试，看起来还不错，这使我认为问题在于您如何检查结果。这在查询分析器中运行良好（假设您使用的是 MS SQL），下面的脚本会生成一个 100,000 个字符长的字符串（由 '-' 字符和结尾的 '0' 字符组成），然后检查最后一个字符是什么。

```
declare @longstring varchar(max)
declare @lastchar varchar(1)
declare @i int

set @longstring = ''
set @lastchar = ''
set @i = 1
while @i <= 100000
begin
    set @longstring = @longstring + '-'
    set @i = @i + 1
end
set @longstring = @longstring + '0'
print 'Original long string: ' + @longstring
set @lastchar = SUBSTRING(@longstring, LEN(@longstring), 1)
print 'Last character before substring: ' + @lastchar
--Last character before substring: 0
set @longstring = SUBSTRING(@longstring, 0, len(@longstring) - 1)
set @lastchar = SUBSTRING(@longstring, LEN(@longstring), 1)
print 'Long string after substring: ' + @longstring
print 'Last character after substring: ' + @lastchar
--Last character after substring: - 
```

# css - rails 3.1 link_to image_tag，其中图像数据作为字符串嵌入

> ID：10420260
> 
> 赞同：0
> 
> 时间：2012-05-02T19:21:06.443
> 
> 标签：css, ruby-on-rails-3.1, hyperlink, asset-pipeline

好的，我正在尝试将以下标记转换为 rails 可以理解的 link_to 语句。谁能把我送到正确的方向

我正在尝试将其转换为：

```
<li class="topmenu"><a href="/history" style="height:24px;line-height:24px;"><img src="data:image/png;base64,iVBORw0KGgoAAAANSU.........." alt="History"/>History</a></li> 
```

变成这样：

```
<li class="top menu"><%= link_to "History" + image_tag(data:image/png;base64,iVBORw0KGgoAAAANSU..........) %></li> 
```

上面的代码显然行不通，但总得有个办法。有任何想法吗

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T21:26:23.993

我最终做了这样的事情

```
<%=link_to image_tag("news.png") + "Newsletter", newsletter_path,:style => "height:24px;line-height:24px;"%> 
```

上面列出的答案中不需要该块。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T14:46:15.857

如果您使用的是 SASS，则可以使用

```
资产数据 url("rails.png")

```

查看 github repo 并阅读描述： [https ://github.com/rails/sass-rails#features](https://github.com/rails/sass-rails#features)

# php - PHP页面不保存表单和解析输出

> ID：10420262
> 
> 赞同：0
> 
> 时间：2012-05-02T19:21:18.007
> 
> 标签：php, javascript, jquery, mysql, ajax

我有这个 PHP 页面，它从表单中获取响应（我希望它确实如此），然后将数据输入到表中。然后，我在同一页面上回应来自表格的响应。我在表单页面上使用 ajax 发送表单值，并在 ajax 调用成功时将数据加载到 div 中。这一切都在没有刷新的情况下完成，但是没有发送任何信息，它只是刷新页面

我的 php 页面 -

```
<?php

$comment_name =  $_POST["name"];
$comment_body =  $_POST["comment"];
$film_no =  $_POST["hidden"];
echo $comment_name;
echo $comment_body;
echo $film_no; 

// Connects to your Database 
 mysql_connect("localhost", "****", "****") or die(mysql_error()); 
 mysql_select_db("ignitet1_CheckFilm") or die(mysql_error()); 

$query1 = "INSERT INTO film_comments (comments_id,film_no,name,comment) 
VALUES ('','$film_no', '$comment_name','$comment_body')";
$runquery1 = mysql_query($query1)or die(mysql_error()); 

$getComments = mysql_query("SELECT * FROM film_comments where film_no = '$film_no'") 
                 or die(mysql_error());     

                 while($info = mysql_fetch_array($getComments)) 
                 { 
                echo "<p>";
                echo $info['name']; 
                echo ":</p>";
                echo "<p>";
                echo $info['comment'];  
                echo "</p>";

                echo "<p>Comment posted on:";
                echo $info['timestamp'];    
                echo "</p>";
                echo "</div>";      
?> 
```

我的表单和 javascript 代码

```
<form id="ContactForm2" onsubmit="return submitForm()" >        
<div>                                               <input type="hidden" name="hidden" id="hidden" value="2">
<label for="name">Your Name</label>
<input type="text" name="name" id="name" />
<label for="body">Comment Body</label>                  
<textarea name="comment" id="comment" cols="20" rows="5"></textarea>
<input type="submit" id="comment" class="button" value="Submit" />
<div class="form_result"> </div>
</form> </div>

<script>

function submitForm() {
    $.ajax({type:'POST', url: 'comment.php', data:$('#ContactForm2').serialize(), success: function(response) {
        $('#ContactForm2').find('.form_result').html(response);
    }});

} 
```

我尝试的一切似乎都不起作用。帮助将不胜感激！:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T19:40:44.297

用你的 php 试试这个，它对我来说工作正常。

```
<html>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
    <script>
$(document).ready(function(){
    $('#sub').click(function(){
        $.ajax({type:'POST', url: 'comment.php', data:$('#ContactForm2').serialize(), success: function(response) {
        $('#ContactForm2').find('.form_result').html(response);
    }});
    });
})

    </script>
    <body>
        <div>
        <form id="ContactForm2"> >                                                       <input type="hidden" name="hidden" id="hidden" value="2">
<label for="name">Your Name</label>
<input type="text" name="name" id="name" />
<label for="comment">Comment Body</label>                  
<textarea name="comment" id="comment" cols="20" rows="5"></textarea>
<input type="button" id="sub" class="button" value="Submit" />
<div class="form_result"> </div>
</form> </div>

    </body>
</html> 
```

# html - CSS位置相对没有相对宽度？

> ID：10420264
> 
> 赞同：1
> 
> 时间：2012-05-02T19:21:34.667
> 
> 标签：html, css, width, css-position

我希望一个元素具有相对定位。但我不希望它的子元素（带有`position:absolute`）与父元素具有相对宽度。

例如：http: [//jsfiddle.net/t2yJP/](http://jsfiddle.net/t2yJP/)。我希望第二个`body>div`拥有`position:relative`，但让其孩子的宽度保持相同的行为。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T19:38:04.870

尝试添加`width:inherit`到`.abs`班级。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T20:19:55.010

我能够实现如下类似的效果：

```
<div class='abs pad'>
    Content content content
</div>
<div class='rel pad red'>
</div> 
```

```
.rel {
    position: relative;
}
.abs {
    position: absolute;
    z-index: 1;
}
.pad {
    padding: 2px;
    margin: 2px;
}
.red {
    border: 1px solid black;
    width: 100px;
    height: 100px;
    background-color: red;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-02T20:28:47.567

[这个 jsFiddle](http://jsfiddle.net/t2yJP/2/)怎么样。

但是你真的应该重新考虑你的策略。在您的小提琴中，您的第二个示例仅有效，因为父 div 未定位，因此`.abs`div 在技术上不在父级中。

通常，子元素在其父元素内部。这就是容器的用途！所以如果你不希望`.abs`div被红色矩形约束，就不要把它放在红色矩形里面。

# c# - 如何使用 iText 在 PDF 文档中插入 3D 注释？

> ID：10420265
> 
> 赞同：2
> 
> 时间：2012-05-02T19:21:35.927
> 
> 标签：c#, 3d, annotations, itextsharp

如何使用**iText**将 3D 注释插入现有的多页 PDF 文档？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T10:45:43.197

你试过什么？什么不起作用？

您可以通过[关键字](http://itextpdf.com/themes/keywords.php)查看 iText 示例列表。

根据您的需要，此[示例](http://itextpdf.com/examples/iia.php?id=299)可能是您正在寻找的。

请注意，这些示例是用 Java 编写的，但对 C# 的适应应该是直截了当的。

# delphi - AVIStreamSetFormat() 调用期间发生 AVIERR_MEMORY 错误

> ID：10420267
> 
> 赞同：2
> 
> 时间：2012-05-02T19:21:43.873
> 
> 标签：delphi, graphics, avi, image-compression, vfw

我有一个制作 AVI 电影的 Delphi 6 应用程序。我已经到了可以编写具有未压缩视频帧的 AVI 文件的程度。当我尝试创建压缩视频流时，我在调用 AVIStreamSetFormat() 时收到 AVIERR_MEMORY 错误：

```
hr := AVIStreamSetFormat(
        FAvi_.thePsCompressed, 
        0, 
        @dsBmih, 
        dsBmih.biSize + dsBmih.biClrUsed * sizeof(RGBQUAD)); 
```

**为什么我会收到此错误，我该怎么做才能修复它？**

*这是我使用Radius 压缩器选择 Cinepak 代码*后压缩选项数据结构的内容，使用调用 AVISaveOptions()。请注意，如果我选择不同的压缩机，我*仍然*会收到错误消息：

```
fccType: 0
fccHandler: 1684633187
dwKeyFrameEvery: 0
dwQuality: 8800
dwBytesPerSecond: 0
dwFlags: 8
lpFormat: nil
cbFormat: 0
lpParms: nil
cbParms: 4
dwInterleaveEvery: 0 
```

下面是 TBitmapHeaderInfo 数据结构的内容：

```
biSize: 40
biWidth: 320
biHeight: -240
biPlanes: 1
biBitcount: 32
biCompression: 0
biSizeImage: 307200
biXPelsPerMeter: 0
biYPelsPerMeter: 0
biClrUsed: 0
biClrImportant: 0 
```

这是包含对 AVIStreamSetFormat() 的调用的方法：

```
function TAviWriterWithCompression.compressionDirect(
                                opts: PAVICOMPRESSOPTIONS;
                                bShowDialog: boolean;
                                hparent: HWND;
                                dsBmih: TBitmapInfoHeader;
                                sizeImage: integer;
                                DIBValues: Pointer;
                                framesPerSecond: integer): HRESULT;
var
    lastErr: string;
    hr: HRESULT;
    myopts: TAVICOMPRESSOPTIONS;
    aopts: array[0..0] of PAVICOMPRESSOPTIONS;
    res: Bool;
begin
    if not FIsVirginFile then
    begin
        // The output file already has at least one audio or video frame so
        //  setting or changing the compression format is not allowed.
        Result := LongInt(AVIERR_ERROR);

        // =========================== EXIT POINT ==============
        exit;
    end; // if not Assigned(FAvi_) then

    if not Assigned(FAvi_) then
    begin
        Result := LongInt(AVIERR_BADHANDLE);

        // =========================== EXIT POINT ==============
        exit;
    end; // if not Assigned(FAvi_) then

    // Check the utility object for an error.
    if (FAvi_.iserr) then
    begin
        Result := LongInt(AVIERR_ERROR);
        // =========================== EXIT POINT ==============
        exit;
    end; // if (FAvi_.iserr) then

    // Make sure the compressor has not already been selected.
    if Assigned(FAvi_.thePsCompressed) then
    begin
        Result := LongInt(AVIERR_COMPRESSOR);
        // =========================== EXIT POINT ==============
        exit;
    end; // if (FAvi_.iserr) then

    // create the stream, if it wasn't there before
    if not Assigned(FAvi_.thePs) then
    begin
        hr := createVideoStream(dsBmih, framesPerSecond);

        if hr <> AVIERR_OK then
        begin
            Result := hr;

            // Set the error flag in our utility object.
            FAvi_.iserr := true;

            // =========================== EXIT POINT ==============
            exit;
        end; // if hr <> AVIERR_OK then
    end; // if not Assigned(FAvi_.thePs) then

    // set the compression, prompting dialog if necessary
    if not Assigned(FAvi_.thePsCompressed) then
    begin
        ZeroMemory(@myopts, sizeof(myopts));

        if Assigned(opts) then
            // Use the provided compressor options
            aopts[0] := opts
        else
            // Use our initialized (empty) variable.
            aopts[0] := @myopts;

        // Does the caller want to show the compressor dialog box?
        if (bShowDialog) then
        begin
            res := AVISaveOptions(hparent, 0, 1, FAvi_.thePs, aopts[0]);

            if not res then
            begin
                AVISaveOptionsFree(1, aopts[0]);

                // Set the error flag.
                FAvi_.iserr := true;

                Result := LongInt(AVIERR_USERABORT);

                // =========================== EXIT POINT ==============
                exit;
            end; // if res = 0 then
        end; // if (bShowDialog) then

        hr := AVIMakeCompressedStream(FAvi_.thePsCompressed, FAvi_.thePs, aopts[0], nil);

        if hr <> AVIERR_OK then
        begin
            Result := hr;

            // Set the error flag in our utility object.
            FAvi_.iserr := true;

            // =========================== EXIT POINT ==============
            exit;
        end; // if hr <> AVIERR_OK then

        AVISaveOptionsFree(1, aopts[0]);
        postDiagMsg('Avi::compression after AVISaveOptionsFree()');

        // >>>> This is where I get the AVIERR_MEMORY error.
        hr := AVIStreamSetFormat(FAvi_.thePsCompressed, 0, @dsBmih, dsBmih.biSize + dsBmih.biClrUsed * sizeof(RGBQUAD));

        if hr <> AVIERR_OK then
        begin
            Result := hr;

            // Set the error flag in our utility object.
            FAvi_.iserr := true;

            // =========================== EXIT POINT ==============
            exit;
        end; // if hr <> AVIERR_OK then
    end; // if not Assigned(FAvi_.thePsCompressed) then

    Result := AVIERR_OK;
end; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-03T14:30:55.213

可能是结构体中的负值导致的`biHeight`，[`TBitmapHeaderInfo`](http://msdn.microsoft.com/en-us/library/dd183376%28v=vs.85%29.aspx)也就是说存储在DIB部分的位值代表的是垂直翻转的图像。

某些编解码器可能无法解决此问题。因此，请尝试确保您选择的视频流压缩器可以处理图像头的大小和位深度。您必须仅使用受支持的图像格式，如果您的编解码器不支持翻转图像，则您必须自己翻转 DIB 图像数据并手动修改图像标题。

# python - Django - 如何从模型实例中获取管理员 URL

> ID：10420271
> 
> 赞同：36
> 
> 时间：2012-05-02T19:21:58.033
> 
> 标签：python, django, django-models, django-admin

我正在尝试在保存新模型实例时向用户发送电子邮件，并且我希望电子邮件包含指向该模型实例管理页面的链接。有没有办法获得正确的网址？我认为 Django 必须将这些信息存储在某个地方。

* * *

## 回答 #1

> 赞同：59
> 
> 时间：2012-05-02T20:13:12.490

不是试图扯掉@JosvicZammit，而是`ContentType`在这里使用是错误的方法。这只是一个浪费的数据库查询。您可以从`_meta`属性中获取需求信息：

```
from django.urls import reverse

info = (model_instance._meta.app_label, model_instance._meta.model_name)
admin_url = reverse('admin:%s_%s_change' % info, args=(model_instance.pk,)) 
```

* * *

## 回答 #2

> 赞同：44
> 
> 时间：2012-05-02T19:26:03.617

这个[Django 片段](http://djangosnippets.org/snippets/1916/)应该这样做：

```
from django.urls import reverse
from django.contrib.contenttypes.models import ContentType
from django.db import models

class MyModel(models.Model):

    def get_admin_url(self):
        content_type = ContentType.objects.get_for_model(self.__class__)
        return reverse("admin:%s_%s_change" % (content_type.app_label, content_type.model), args=(self.id,)) 
```

`self`指的是父模型类，即指`self.id`对象的实例`id`。您还可以通过将装饰器[`property`](http://docs.python.org/library/functions.html#property)粘贴在方法签名上来将其设置为模型上的a。`@property`

**编辑：**[下面](https://stackoverflow.com/a/10420949/1211429)Chris Pratt 的答案在表上保存了一个数据库查询`ContentType`。我的回答仍然“有效”，并且不太依赖于 Django 模型`instance._meta`内部。供参考。

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2014-10-04T07:14:42.897

这给出了与 Josvic Zammit 的片段相同的结果，但没有命中数据库：

```
from django.urls import reverse
from django.db import models

class MyModel(models.Model):

    def get_admin_url(self):
        return reverse("admin:%s_%s_change" % (self._meta.app_label, self._meta.model_name), args=(self.id,)) 
```

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2013-11-16T03:15:20.337

只需使用这个也准备好 python 3 的衬垫：

```
from django.urls import reverse

reverse('admin:{0}_{1}_change'.format(self._meta.app_label, self._meta.model_name), args=(self.pk,)) 
```

更多关于这在 django 管理站点文档，[reversing admin urls](https://docs.djangoproject.com/en/dev/ref/contrib/admin/#reversing-admin-urls)中。

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2015-07-30T22:03:59.437

因此，结合 Chris、Josvic 和 Josh 的答案，这是一种可以添加到模型中的复制粘贴方法（在 Django 1.8.3 上测试）。

```
def get_admin_url(self):
    """the url to the Django admin interface for the model instance"""
    from django.core.urlresolvers import reverse
    info = (self._meta.app_label, self._meta.model_name)
    return reverse('admin:%s_%s_change' % info, args=(self.pk,)) 
```

# css - CSS：修复可变高度元素内部分的高度

> ID：10420273
> 
> 赞同：1
> 
> 时间：2012-05-02T19:22:01.280
> 
> 标签：css, positioning

与[这个问题有关](https://stackoverflow.com/questions/2434602/css-setting-width-height-as-percentage-minus-pixels)。

这是一个小提琴：http: [//jsfiddle.net/DRbRS/](http://jsfiddle.net/DRbRS/)

请注意红色轮廓的列表 div 如何与绿色容器 div 的底部不对齐。

问题是没有办法提前知道列表的结果高度应该是多少，即使标题的高度是已知的。

有没有办法在不求助于javascript的情况下处理这个问题？

我们需要的是一种风格`height: fill;`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-02T19:30:18.693

使用`position: absolute`和设置顶部、左侧、右侧和底部：http: [//jsfiddle.net/QARC9/](http://jsfiddle.net/QARC9/)

本文描述了它的工作原理。

[http://www.alistapart.com/articles/conflictingabsolutepositions/](http://www.alistapart.com/articles/conflictingabsolutepositions/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T19:28:08.893

用这个替换你的 CSS

```
#container {

    left: 50px;
    width: 200px;
    position: fixed;
    height: 90%;
    border: 2px dashed green;
}

#header {
    height: 30px;
    line-height: 30px;
    text-align: center;    
    border: 2px dashed blue;
    margin-left:-2px;
    margin-top:-2px;
    width:200px
}

#list {    
    border: 2px dashed red;
    overflow: auto;
    height: 91%;
    width:200px;
    margin-left:-2px;
    margin-top:-2px;

}​ 
```

或在这里查看演示[http://jsfiddle.net/enve/DRbRS/3/](http://jsfiddle.net/enve/DRbRS/3/)

# android - 当类扩展 ArrayAdapter 时将 Activity 移动到另一个 Activity

> ID：10420275
> 
> 赞同：2
> 
> 时间：2012-05-02T19:22:30.043
> 
> 标签：android

当我单击`edit_remainder`按钮时，我想将我的活动移动到另一个活动。

但是类扩展 ArrayAdapter 我不明白如何移动到另一个活动。

请帮我举一个 Intent 类的例子。

```
public class mylist extends ArrayAdapter<String> implements OnClickListener 
{

  private final Context context;
  private final String[] values;
  Button edit_remainder;

  public mylist(Context context, String[] values) {
    super(context, R.layout.some, values);
    this.context = context;
    this.values = values;
  }

  @Override
  public View getView(int position, View convertView, ViewGroup parent) {
    LayoutInflater inflater = (LayoutInflater) context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
    View rowView = inflater.inflate(R.layout.buttonadd, parent, false);
    edit_remeinder=(Button) rowView.findViewById(R.id.btnEdit);
    edit_remeinder.setOnClickListener(this);
    return rowView;
  }

  public void onClick(View v) {
    Toast.makeText(getContext(), "hi", 1000).show();
    // please enter moving code here
  }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T04:11:03.937

这里我为 listview 创建，但您可以尝试自己的应用程序。在您的主要活动中传递意图而不是您自己的适配器。

mainActivity.java

```
public void onCreate(Bundle savedInstanceState) {  
    super.onCreate(savedInstanceState);  
    setContentView(R.layout.main);  

    lview = (ListView) findViewById(R.id.listView2);  
    lviewAdapter = new ListViewAdapter(this, month, number);  //here ListViewAdapter is my own adapter

    System.out.println("adapter => "+lviewAdapter.getCount());  

    lview.setAdapter(lviewAdapter);  

    lview.setOnItemClickListener(this);  
}  

public void onItemClick(AdapterView<?> arg0, View arg1, int position, long id) {  
    // TODO Auto-generated method stub  
    Toast.makeText(this,"Title => "+month[position]+"=> n Description"+number[position], Toast.LENGTH_SHORT).show();  

     // here your intent code

}  
} 
```

请将此 onclick 方法放在您的主要活动中，然后重试。

```
public void onClick(View v) {
Toast.makeText(getContext(), "hi", 1000).show();
// please enter moving code here

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T04:30:22.860

在这里启动一个明确的意图，如：

```
Intent i=new Intent(context,anotheractivity.class);
startActivity(i); 
```

这里的上下文可以是应用程序上下文。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-03T05:02:07.277

您是否创建自己的适配器（mylist）？如果是，则通过调用 mylist 适配器在主类中传递意图。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-02T19:45:45.167

如果我理解正确，您希望在用户点击列表项时将控制权转移到另一个活动。您将需要发出一个**意图**。

这是一个教程：[http ://www.vogella.com/articles/AndroidIntent/article.html](http://www.vogella.com/articles/AndroidIntent/article.html)

# vim - vim: gU 和 gu 在一张地图中

> ID：10420279
> 
> 赞同：5
> 
> 时间：2012-05-02T19:23:02.747
> 
> 标签：vim, map, uppercase, lowercase

在 vim 中，与

```
gUw 
```

使单词大写，用

```
guw 
```

使单词小写。
如何在一张地图中将上转换为下，从下转换为上？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-02T19:37:28.537

如果你想反转大小写，你可以使用`~`. 通常这仅适用于选择（例如视觉模式），但如果您希望它更有用，那么`:set tildeop`您可以执行`~w`或执行您喜欢的任何移动命令。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-02T19:44:38.773

您也可以将波浪号运算符与全局命令一起使用：`g~w`

优点是，您可以使用`.`运算符重复操作:)

# c++ - malloc 失败的条件

> ID：10420280
> 
> 赞同：4
> 
> 时间：2012-05-02T19:23:03.260
> 
> 标签：c++, c, memory, memory-management, memory-leaks

我正在复习 c，重做一些旧练习并在运行此代码段时得到一些不寻常的结果（我知道它会泄漏，但想知道系统允许多少..）

```
#include <stdio.h>
#include <stdlib.h>

int main(int argc,char *argv[])
{
    void *page = 0; int index;
    index = 0;
    while(1)
    {
        page = malloc(1073741824); //1GB
        if(!page)break;
        ++index;
    }
    printf("memory failed at %d\n",index);
    return 0;
} 
```

我实际上得到：

> 内存在 131070 失败

这表明它认为它分配了 131070 x 1GB 内存（大量泄漏）

我以前知道 malloc 在消耗所有虚拟内存之前应该失败，当然如果我尝试在一个块中 malloc 20GB，这会失败。

我的设置：ubuntu 10 8Gb ram，<= 2Gb swap，HD 1TB（这有关系吗？）

任何人都知道它如何泄漏比我更多的内存

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-02T19:29:09.847

*   [http://www.win.tue.nl/~aeb/linux/lk/lk-9.html](http://www.win.tue.nl/~aeb/linux/lk/lk-9.html)

    > 从 2.1.27 开始，有一个 sysctl VM_OVERCOMMIT_MEMORY 和 proc 文件 /proc/sys/vm/overcommit_memory ，其值为 1：做 overcommit，0（默认）：不做。不幸的是，这不允许您告诉内核要更加小心，它只能让您告诉内核不要小心。将 overcommit_memory 设置为 1，每个 malloc() 都会成功。当设置为 0 时，使用旧的启发式，内核仍然过度使用。

您可能还希望查看使用 mallinfo 进行检测：

*   [http://www.gnu.org/software/libc/manual/html_node/Statistics-of-Malloc.html](http://www.gnu.org/software/libc/manual/html_node/Statistics-of-Malloc.html)

最后一个链接：

*   [http://opsmonkey.blogspot.com/2007/01/linux-memory-overcommit.html](http://opsmonkey.blogspot.com/2007/01/linux-memory-overcommit.html)

> 在某种程度上，Linux 分配内存的方式就像航空公司出售机票一样。一家航空公司将出售比实际座位更多的机票，希望一些乘客不会出现。Linux 中的内存以类似的方式管理，但实际上程度要严重得多。

# asp.net-mvc-3 - 客户端数据注释验证不适用于使用 Firefox 和 chrome 的部分视图

> ID：10420281
> 
> 赞同：3
> 
> 时间：2012-05-02T19:23:03.933
> 
> 标签：asp.net-mvc-3, data-annotations

我的 asp.net mvc Web 应用程序中有以下主视图：-

```
<table>
        <tr>
        <th>
        Lab Test
        </th>
        <th>
        Result
        </th>
        <th>
        Date Taken
        </th>
        <th>
        Comment
        </th>
        <th>

        </th>
 @for (int item = 0; item < 10; item++)
        {
using (Ajax.BeginForm("CreateAll", "VisitLabResult", new AjaxOptions
{
    HttpMethod = "Post",
    UpdateTargetId = item.ToString(),
    InsertionMode = InsertionMode.Replace,
    OnSuccess = string.Format(
                   "disableform({0})",
                   Json.Encode(item)),
}))
{ <tr id = "@item">
        @Html.Partial("_create",Model)
       </tr>
            }
        } </table> 
```

**它呈现以下 _create 部分视图：-** @section 脚本{

}

```
 <td>
        @Html.DropDownList("LabTestID", String.Empty)
        @Html.ValidationMessageFor(model => model.LabTestID)
   </td>
   <td>
        @Html.EditorFor(model => model.Result)
        @Html.ValidationMessageFor(model => model.Result)
    </td>
    <td>
        @Html.EditorFor(model => model.DateTaken)
        @Html.ValidationMessageFor(model => model.DateTaken)
    </td>
    <td>
        @Html.EditorFor(model => model.Comment)
        @Html.ValidationMessageFor(model => model.Comment)

    </td>
    <td>
    <input type= "hidden" name = "visitid" value = "@ViewBag.visitid" />
    <input type="submit" value="Create" />
    </td> 
```

目前，使用 firefox 或 chrome 时，所有数据注释客户端验证（如 Required）都不会显示，但它们会在使用 IE9 时正常工作，所以可能是什么问题。BR

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T12:34:12.603

我在这个代码块中发现了一个错字。你在 Json.Encode(item) 之后添加了一个逗号。如果这是最后一项，则不能添加逗号。

```
<table>
            <tr>
            <th>
            Lab Test
            </th>
            <th>
            Result
            </th>
            <th>
            Date Taken
            </th>
            <th>
            Comment
            </th>
            <th>

            </th>
     @for (int item = 0; item < 10; item++)
     {
         using (Ajax.BeginForm("CreateAll", "VisitLabResult", new AjaxOptions{
                HttpMethod = "Post",
                UpdateTargetId = item.ToString(),
                InsertionMode = InsertionMode.Replace,
                OnSuccess = string.Format("disableform({0})", Json.Encode(item))})
         ){ 
             <tr id = "@item">
                 @Html.Partial("_create",Model)
             </tr>
         }
     } 
</table> 
```

希望这会奏效。让我知道。

# pdf - 取消选中安全性受限的 pdf 中的单选框

> ID：10420282
> 
> 赞同：0
> 
> 时间：2012-05-02T19:23:06.173
> 
> 标签：pdf, acrobat

我刚刚在 .pdf 文件中填写了一份 100 多页的背景检查。我查看了它，发现我错误地选中了几个单选框，但我无法取消选中它们。如何取消选中这些框？该文档受密码保护，因此我无法编辑该文档或脚本。有什么办法可以取消选中这些框，还是我应该重新填写一遍？

我正在使用 Adob​​e Acrobat 9 Pro。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-01-09T21:22:26.757

有*办法*！但前提是您尚未保存文档。在您填写或选中您不打算的框后，立即键入 Ctrl-Z。而已！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T09:37:40.713

您可以使用菜单栏中*“表单”下的**“清除表单”*选项。我猜这是你唯一的选择。（但是，您可能需要再次填写完整的 100 多页 PDF……）

 ** * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-05-15T19:09:38.880

如果您在 MacOS 上使用预览，则可以恢复到未选中框的文档的早期版本：`File`-> `Revert To`。*

# eclipse - 在 NetBeans 中导出 Jar 文件

> ID：10420286
> 
> 赞同：1
> 
> 时间：2012-05-02T19:23:13.743
> 
> 标签：eclipse, netbeans, jar, export

我正在寻找一种在 Netbeans 中导出 .jar 文件的方法。我知道当我清理/构建它时，它会自动将所有内容放在 dist 目录中的 .war 文件中。但是，在 Eclipse 中，您可以选择导出 -> 导出 -> Java -> JAR 文件并单击下一步，然后仅选择要导出的资源并选择要将 .jar 文件导出到的位置。Netbeans中是否有与此等价的东西？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T19:42:45.117

您可以在 Netbeans 中启用“编译后构建 JAR”属性

文件 > 项目属性 > 构建 > 打包

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T13:01:34.383

我最终只是以通常的方式构建项目，在 dist 文件夹中获取 .war 文件。
然后我使用了一个名为 IZArc 的 zip 程序：[http](http://www.izarc.org/) ://www.izarc.org/打开 .war 并只取出构建 .jar 所需的内容。然后我再次使用 IZArc 创建 .jar 文件。
如果有人知道更简单的方法（最好是通过 Netbeans 本身），请告诉我。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-09T23:27:50.313

如果您知道如何编写 Ant 文件，请编辑 build.xml 并添加 -post-dist 目标。然后在创建war文件时也会创建jar文件。就像是：

```
<target name="-post-dist" description="Create jar file.">
    <!-- Copy your files to a temp directory if necessary. -->
    <copy ...>
       ...
    </copy>

    <!-- 'basedir' should be the directory from which to jar the files -->
    <jar destfile="${dist.dir}/app.jar" basedir="${build.dir}/myjarfiles"/>
</target> 
```

# facebook - 喜欢没有头像的盒子

> ID：10420297
> 
> 赞同：2
> 
> 时间：2012-05-02T19:24:10.330
> 
> 标签：facebook, profile, facebook-likebox

想在我自己的网站中实现 fb 类似框（https://developers.facebook.com/docs/reference/plugins/like-box/）。我的页面的主要图片有些麻烦：我不希望它显示在流中，而只显示在标题中。我努力隐藏照片，但我没有进行故障排除。希望您能够帮助我。抱歉英语不好：P

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T20:44:19.603

不，这不是like box插件的选项

# jquery - jQuery 和 LESS，样式表更新只能工作一次

> ID：10420299
> 
> 赞同：1
> 
> 时间：2012-05-02T19:24:16.210
> 
> 标签：jquery, css, stylesheet, less, asp.net-mvc-4

尝试更新自定义 CSS href，第一次可以正常工作，但在后续更新中，页面不会发生任何更改。我可以在 Chrome 调试器中看到 href 更新，所以事件正在触发，LESS 没有抛出任何错误，但颜色不会第二次更新。

这是一些代码（为了可读性而连接；注意我使用的是 VS 2010，MVC4，因此*是 less.css*扩展名）：

```
<link href="/Content/themes/customizable_default.less.css" id="CustomCSS" rel="stylesheet/less" type="text/css">

        <a class="ToggleButton btn-primary" CssUrl="/Content/themes/customizable_default.less.css">Default CSS</a>
        <a class="ToggleButton btn-primary" CssUrl="/Content/themes/customizable_green.less.css">Green CSS</a>
        <a class="ToggleButton btn-primary" CssUrl="/Content/themes/customizable_gray.less.css">Gray CSS</a>
        <a class="ToggleButton btn-primary" CssUrl="/Content/themes/customizable_blue.less.css">Blue CSS</a>

        <div class="ThemeBox">
            <div class="ThemeCompartment1">
                <h2>This is the title.</h2>
            </div>
            <div class="ThemeCompartment2">
                <p>A bunch of copy goes here.</p>
            </div>
        </div>

<script type="text/javascript" language="javascript">
    $(document).ready(function () {

        // choosing a template
        $('.ToggleButton').click(function (e) {
            $('link#CustomCSS').attr({ href: $(this).attr('CssUrl') });
            localStorage.clear();
            less.refresh();
        });
    });

</script> 
```

请注意，样式表链接位于标题中，因此所有标记在语义上都是正确的（当然，CssUrl 属性除外）。如果我更改链接 href，然后再返回，则不会重绘新值。

例子：

单击“绿色 CSS”按钮 -> 链接 href="/Content/themes/customizable_green.less.css" -> ThemeBox 变为绿色。

单击“红色 CSS”按钮 -> 链接 href="/Content/themes/customizable_red.less.css" -> ThemeBox 变为红色。

单击“绿色 CSS”按钮 -> 链接 href="/Content/themes/customizable_green.less.css" -> ThemeBox 保持红色。

我怀疑这与 .less 缓存有关，这就是为什么我添加了***localStorage.clear()***调用，但无论是还是***less.refresh(true)***都没有解决这个问题。

有什么想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-02T23:04:57.483

这是由于 LESS 似乎工作的方式。它解析 less 文件，然后*将*属性添加到`style`DOM。在实践中，这些似乎遵循以下格式

```
<style type='text/css' id='less:<<NAME OF YOUR LESS FILE>>'>
   /*your parsed content*/
</style> 
```

您没有看到它返回的原因是因为 LESS 正在解析您的内容，找到现有的样式块，而不是添加它。在末尾添加了后续样式块，`head`因此您可以获得样式的“最后一个”版本。

将您的功能更改为以下内容：

```
 $('.ToggleButton').click(function (e) {
        $('style[id^="less:"]').remove();
        $('link#CustomCSS').attr({ href: $(this).attr('CssUrl') });
    less.refresh();
    }); 
```

你应该看到它以你想要的方式运行。

# c++ - .NET 从具有 www 接口的打印机获取数据

> ID：10420308
> 
> 赞同：1
> 
> 时间：2012-05-02T19:24:51.693
> 
> 标签：c++, .net, sockets, networking, network-printers

我想从公司网络中的打印机获取有关墨水、空闲页面（纸张）等的数据。这些打印机（主要是美能达）中的每一个都有一个 www 界面，所以我可以通过在我的程序中创建浏览器进程来获取这些数据，将其定向到地址“http://192.168.X.YY/data.htm”，下载所有页面代码并从中检索数据。如果没有这个过程，这可能吗？如果我知道这些数据在每个 IP/data.htm 下，我可以使用这些信息以不同的方式下载数据：socket、ftp 等。

一般来说：如果您在网站上有一些数据（显然没有数据库访问权限），您如何检索这些数据？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T19:26:55.140

从外观上看，您的打印机提供基于 REST 的服务。您可以使用[libcurl](http://curl.haxx.se/libcurl/)进行基于 REST 的 API 调用。（这也适用于大多数网站！）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T19:32:29.580

听起来它不像您提供的描述中实现了 REST 接口。

听起来您的想法是从 HTML 页面中抓取数据。这也很好，尽管它有些脆弱（例如，打印机固件升级可能会中断）。

无论如何，您使用 .NET 标记了问题，因此如果您想使用 .NET 方法，您可能需要查看创建[WebClient](http://msdn.microsoft.com/en-us/library/system.net.webclient.aspx "网络客户端")并解析从该`DownloadString`方法返回的结果数据。

# android - Android - 如何将文件附加到短信？

> ID：10420312
> 
> 赞同：3
> 
> 时间：2012-05-02T19:24:55.740
> 
> 标签：android, file, sms, vcf-vcard

我需要通过短信发送联系方式。所以，我正在使用 .vcf 文件。

不过，我需要将它附加到 android SDK 中的短信。android中有这样的功能。我已经在我的智能手机上试过了；

几天来我一直在寻找这样做的方法，到目前为止我发现的一切都是[这个很好的库来构造 vCard](http://code.google.com/p/android-vcard/)和[SMSManager 类的这个方法](http://developer.android.com/reference/android/telephony/SmsManager.html#sendDataMessage%28java.lang.String,%20java.lang.String,%20short,%20byte%5B%5D,%20android.app.PendingIntent,%20android.app.PendingIntent%29)。

有谁知道这是怎么做到的吗？？？我想这个问题的解决方案不仅适用于 vcf，而且适用于任何文件扩展名。

如果您将添加一些代码作为示例，您会让我高兴））

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-21T05:30:32.557

由于您有一个 File 对象，您可以使用此代码发送彩信

```
Intent sendIntent = new Intent(Intent.ACTION_SEND);
sendIntent.setType("text/x-vcard");
sendIntent.putExtra(Intent.EXTRA_STREAM,
    Uri.parse(outputFile.toURL().toString()));
startActivity(sendIntent); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-02T19:29:19.290

我认为您需要使用 SMS 的 MMS 意图 AFAIK SMS 只是文本，在 MMS 中您可以添加文件。

请参阅以下 stackoverflow[问题](https://stackoverflow.com/questions/2972845/how-to-send-image-via-mms-in-android/2973016#2973016)以及此[博客条目](http://androidbridge.blogspot.com/2011/03/how-to-send-mms-programmatically-in.html)

# c# - XtraGrid 整行突出显示，除了单击的单元格

> ID：10420313
> 
> 赞同：5
> 
> 时间：2012-05-02T19:24:57.797
> 
> 标签：c#, winforms, gridview, devexpress, highlighting

当我在下面的 GridView 中选择一行时，我的鼠标所在的单元格（换句话说，我左键单击的单元格）以选择一行，不会突出显示，而该行的其余单元格都突出显示。

我会很感激你的帮助。

```
GridView myView = (GridView)oGrid.MainView;
myView.OptionsSelection.MultiSelect = true;
myView.OptionsSelection.MultiSelectMode = GridMultiSelectMode.RowSelect;

if (myView.RowCount > 0)
{
    frmChangeMyStatus ff = new frmChangeMyStatus(ccfrms);
    DialogResult dr = ff.ShowDialog();

    if (dr == DialogResult.OK)
    {
        for (int i = 0; i < myView.SelectedRowsCount; i++)
        {
            row = myView.GetSelectedRows()[i];
               //...........
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-02T20:21:54.493

如果您希望焦点单元格看起来像焦点行中的任何其他单元格，请在视图属性中禁用焦点单元格样式。您可以通过两种不同的方式执行此操作：

*   在运行时：

    `myView.OptionsSelection.EnableAppearanceFocusedCell = false;`

*   在设计时：调用 XtraGrid 设计器，选择 Views ::（您的视图） :: OptionsSelection :: Set `EnableAppearanceFocusedCell`to `False`。

如果您可以访问 XtraGrid 设计器，如果您需要更复杂的样式规则，可以查看外观部分。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-03T12:15:04.753

除了[Yuriy Guts](https://stackoverflow.com/users/1232399/yuriy-guts)上面所说的关于视图的焦点单元格外观，如果选定的单元格是可编辑的，它仍然不会突出显示该单元格。

因此，如果单元格不需要可编辑，您可以`OptionsColumn.AllowEdit = false`为该列设置。否则，如果用户通过单击一个单元格来选择一行，则您必须忍受这种外观，以便用户可以知道他们当前正在编辑哪个单元格。

# dotnetnuke - DotNetNuke 自定义应用程序架构

> ID：10420314
> 
> 赞同：1
> 
> 时间：2012-05-02T19:25:00.913
> 
> 标签：dotnetnuke

我有开发自定义 ASP.NET 业务应用程序的任务。它基本上由记录条目和管理这些记录的工作流程组成。我们正在寻求利用 CMS，此时我们选择了 DotNetNuke。我想知道我们如何利用诸如实体框架之类的 ORM，以便当我们对模型进行更改时，我们只在一个位置进行更改？

如果我们在前端有高度定制的表单，并且想要进行更改，例如添加新字段，我们如何才能最大限度地减少开发时间？灵活的建筑形式对我们的应用非常重要。我不认为我们可以使用具有 EF 代码优先模式的 ASP.NET MVC，我们只需对 POCO 进行更改并生成脚本来更改数据库和视图页面。所以我想知道 DNN 中是否有任何东西可以提供这种抽象级别？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T22:43:41.327

ASP.NET MVC 的这一部分在 DOtNetNuke 中不容易实现，但是可以在数据/业务层使用 EF Code First，然后您自己处理 UI 的其余部分。

你不会有 UI 的脚手架，但在大多数情况下，脚手架不足以得到人们需要的东西。

# java - Java InetAddress.getHostName() 需要很长时间才能执行

> ID：10420317
> 
> 赞同：5
> 
> 时间：2012-05-02T19:25:19.110
> 
> 标签：java, inetaddress

我有以下小代码片段：

```
 InetAddress address = InetAddress.getByName(host);
        if(address.isReachable(TIMEOUT_IN_MILLISECONDS)) {
          System.out.println(host + " is reachable.");
          String hostName = address.getHostName();
          System.out.println(hostName);
        } 
```

如果找到一台机器，getHostName() 方法需要相当长的时间来执行。有人可以解释为什么吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-02T19:30:53.787

从[`InetAddress#getHostName()`javadocs](http://docs.oracle.com/javase/6/docs/api/java/net/InetAddress.html#getHostName%28%29)中，该方法将执行[反向主机名查找](http://en.wikipedia.org/wiki/Reverse_DNS_lookup)。因此，该方法调用的性能取决于 JVM 和目标主机的域名服务器之间的网络/技术堆栈的性能。

简而言之，该方法将进行系统调用以执行反向查找（例如[`getaddrinfo(3)`](http://linux.die.net/man/3/getaddrinfo)），并且该调用将由操作系统实现，以执行通过为您的机器配置的[名称服务器](http://en.wikipedia.org/wiki/Name_server)收集主机信息所需的网络操作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T19:33:23.430

有些地址需要更长的时间来解决。InetAddress 有一个缓存来存储成功和不成功的解决方案。另外，制作一个线程池。您可以提高性能

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-08-16T16:35:23.907

`toString()`似乎更快：

给定一个 InetAddress ia 或 InterfaceAddress ia，

`System.out.println ( ia.toString() )`将显示一个包含您的 ipAddress 的字符串，速度比`ia.getHostName()`

然后，您可以使用`ia.toString().substring`它来提取它。

我不知道为什么。

# windows - 通过windows内核驱动调度用户空间线程

> ID：10420318
> 
> 赞同：1
> 
> 时间：2012-05-02T19:25:21.717
> 
> 标签：windows, kernel, driver, device-driver

我想使用 ioctl 的倒置模型。我的意思是当驱动程序检测到特定活动时，我想安排一些作为用户空间线程的工作项。例如。1\. 我在内核模式驱动程序中为特定中断注册了回调。
2\. 每当我收到中断时，我想安排一些用户使用 ioctl 注册的用户空间线程。

我可以使用 DPC、APC 或 IRP 来执行此操作吗？我确实知道不应该/不能将驱动程序空间工作与用户空间不同。我想要的是在特定硬件事件发生时在用户空间中做一些独立的活动。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T21:18:25.777

从驱动程序创建用户模式线程是非常糟糕的做法，你不能简单地将控制从内核模式转移到用户模式。您必须在用户应用程序中创建工作线程并在此线程中等待事件。等待有两种主要方法。1）你可以等待一些事件，女巫你在ioctl中发布给驱动程序。在某个时刻，驱动程序将事件设置为可警报并线程执行和处理事件。这是主要和简单的方法

2) 您可以同步发布 ioctl 并在驱动程序中挂起此 irp -> DeviceIoControl 调用中的线程块。当事件发生时，驱动程序完成这些 irp 和线程唤醒并进行处理。

> 每当我收到中断时，我想安排一些用户使用 ioctl 注册的用户空间线程。

您必须先转到安全 irql (< DISPATCH_IRQL)：中断 -> DPC 推入队列 -> 工作线程，因为例如您无法在高 irql 上发出事件信号。

阅读此 [http://www.osronline.com/article.cfm?id=108](http://www.osronline.com/article.cfm?id=108)

和沃尔特·奥尼的书

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-06T17:01:02.027

您不需要将工作项排队或做任何花哨的事情来发布事件。调度程序可在 DISPATCH_LEVEL 调用，因此 DPC 足以向任何人发送信号。

只需使用正常的反向调用：

1) App 发送一个 IOCTL（如果多个线程必须发出信号，它必须使用 FILE_FLAG_OVERLAPPED 和异步 I/O）。

2) 驱动程序在设置取消例程等后将生成的 IRP 放入驱动程序管理的队列中。将 irp 标记为挂起并返回 STATUS_PENDING。

3) 中断到达...从您的 ISR 排队 DPC（或者如果这是 USB 或其他堆栈，您可能已经处于 DISPATCH_LEVEL）。

4) 从队列中移除请求并调用 IoCompleteRequest。

在第 2 步和第 4 步中使用 KMDF。队列 irps 可能会搞砸很多事情，因此最好使用经过良好测试的代码。

# objective-c - 将 ABRecordRef 添加到 NSMutableArray 会导致有关需要桥接强制转换的错误

> ID：10420321
> 
> 赞同：0
> 
> 时间：2012-05-02T19:25:27.093
> 
> 标签：objective-c, cocoa-touch, nsmutablearray, abrecord

我收到一个错误：

> C 指针类型“ABRecordRef”（又名“const void *”）到 Objective-C 指针类型“id”的隐式转换需要桥接强制转换

从此代码中，尝试将一个添加`ABRecordRef`到`NSMutableArray`

```
ABRecordRef person = (__bridge ABRecordRef)[contactArr objectAtIndex:i];
[addressBookArray addObject:person]; 
```

`addressBookArray`定义为

```
NSMutableArray *addressBookArray; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-02T19:33:14.503

正如错误消息所说，您需要重新转换对象才能将其放回`NSMutableArray`：

```
ABRecordRef person = (__bridge ABRecordRef)[contactArr objectAtIndex:i];
[addressBookArray addObject:(__bridge ABRecord *)person]; 
```

[`ABRecord`](http://developer.apple.com/library/mac/documentation/UserExperience/Reference/AddressBook/Classes/ABRecord_Class/)是对应的 ObjC 类`ABRecordRef`；它们是免费桥接的，因此可以为此目的互换。

* * *

注意： `ABRecord`仅在 OS X 上可用。如果您在 iOS 上并且设法以某种方式首先将这些`ABRecordRef`s 放入 an`NSArray`中，您将不得不使用`id`re-cast

```
[addressBookArray addObject:(__bridge id)person]; 
```

# ios - 从 Jenkins 运行 iOS UIAutomation 测试

> ID：10420324
> 
> 赞同：7
> 
> 时间：2012-05-02T19:25:34.540
> 
> 标签：ios, xcode, jenkins, instruments, ios-ui-automation

一段时间以来，我一直在尝试研究如何从 Jenkins 运行 UIAutomation 测试 - 每次我运行构建时，它都构建得很好，然后它运行我的仪器命令（使用与此处详述的相同命令（[可以使用仪器）使用命令行？](https://stackoverflow.com/questions/4819000/can-instruments-be-used-using-the-command-line)）和詹金斯只是挂起，整台机器都可以，当我查看活动监视器时，我可以看到一个使用 2gb 内存的仪器进程。

当我设置 jenkins 时，我最初是以隐藏用户的身份运行它 - 这给 jenkins 作为一个守护进程并且无法访问窗口服务器带来了一些挑战。然后我决定将 jenkins 帐户更改为普通用户，登录并从命令行运行仪器 - 这工作正常..但仍然没有从 jenkins 运行它的运气。

我已将 jenkins 帐户设置为开发人员 - 虽然没有管理员

请让我知道是否还有其他可以尝试的方法，或者如果有人成功运行，我们将不胜感激 - 谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-13T03:30:36.627

OS X 上的 Jenkins 从启动脚本启动，默认情况下将作为“守护进程”运行。要做的是在启动的脚本中更改用户。

首先，让 Jenkins 准备好关闭（在 GUI 的“管理 Jenkins”中）。

然后从 launchd 中卸载作业，如下所示：

```
$ sudo launchctl unload /Library/LaunchDaemons/org.jenkins-ci.plist 
```

然后使用您要运行jenkins的用户编辑launchd plist中的“UserName”属性。还有一个 GroupName 属性，您可能希望/需要根据用户组进行相应调整。

最后，重新加载 Jenkins：

```
$ sudo launchctl load /Library/LaunchDaemons/org.jenkins-ci.plist 
```

希望有帮助！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T20:19:51.930

因此，如果您将其作为守护程序运行，首先要检查如果您在前台运行 Jenkins 会发生什么。最简单的方法是使用`java -jar jenkins.war [other options]`命令（[请参阅此文档](https://wiki.jenkins-ci.org/display/JENKINS/Starting+and+Accessing+Jenkins)）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-07T02:33:47.167

也许你可以使用这个[https://github.com/houlianpi/robot4ios](https://github.com/houlianpi/robot4ios)。

然后在詹金斯执行shell：

```
sh setup.sh
sh runTests.sh ./sample/alltests.js "/Users/komejun/Library/Application Support/iPhone Simulator/5.0/Applications/1622F505-8C07-47E0-B0F0-3A125A88B329/Recipes.app/" 
```

报告将自动创建`./ynmsk-report/test.xml`

# c++ - 如果 EBP 帧指针为 NULL，堆栈是否已损坏？

> ID：10420325
> 
> 赞同：2
> 
> 时间：2012-05-02T19:25:37.047
> 
> 标签：c++, windows, visual-studio, stack-trace

我对堆栈跟踪的理解本质上是基于[基指针和堆栈指针到底是什么？他们指向什么？](https://stackoverflow.com/questions/1395591/what-is-exactly-the-base-pointer-and-stack-pointer-to-what-do-they-point).

我多年来一直帮助开发的一个程序在崩溃时会吐出一个堆栈转储，我已经习惯于评估这些堆栈跟踪，与 C++ 编译器生成的 .map 文件相对应。很多次，我已经成功地遍历堆栈和调试问题。

但是，有时堆栈跟踪有一个 NULL EBP（帧）指针。以下是来自此类示例堆栈转储的相关片段：

```
Initial EBP pointer value: 04d8fab0
{at address 04d8fab0: 00000000} 
```

如您所见，EBP 帧指针的值为 NULL。因此，我不能走堆栈。

这是堆栈损坏的迹象，还是有其他可能的解释？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-08T19:31:34.310

> 如您所见，EBP 帧指针的值为 NULL。因此，我不能走堆栈。这是堆栈损坏的迹象，还是有其他可能的解释？

我认为**还有**另一种解释，其根源在于除了保存当前堆栈帧的地址之外，EBP 寄存器还可以用于任何其他用途，例如通用寄存器。为了安全地做到这一点，需要做两件事：

1.  通过调用将其当前内容存储到堆栈中

    > 推送 EBP

2.  恢复通用使用后退出当前程序前的内容，调用

    > POP EBP

所以我认为您遇到的情况不一定是由堆栈损坏引起的，因为从技术上讲，它可能是在 EBP 寄存器暂时被进程中的其他地方用于通用用途时生成了转储'代码，甚至可能不是您编写的代码。

# iphone - 通过 iPhone 连接到 AT&T 无线网络的谷歌静态地图无法正常工作

> ID：10420327
> 
> 赞同：3
> 
> 时间：2012-05-02T19:25:37.833
> 
> 标签：iphone, google-maps, wireless, google-static-maps

最近，当我连接到 AT&T 无线网络时，我在 iPhone 上检索静态地图时遇到了问题。但是，当我连接到本地 WiFi 时工作正常。

上周日停止工作了几个小时，然后晚上剩下的时间开始工作，然后今天我看到它又停止工作了。

我只是用 safari 浏览器测试我可以下载静态地图，它返回配额已超过图像。但是，我没有办法超过配额。

[http://maps.googleapis.com/maps/api/staticmap?center=40.703049,-74.010695&zoom=16&format=jpg&sensor=false&size=512x512&maptype=roadmap](http://maps.googleapis.com/maps/api/staticmap?center=40.703049,-74.010695&zoom=16&format=jpg&sensor=false&size=512x512&maptype=roadmap)

还有其他人有同样的问题吗？我已经用连接 AT&T 无线网络的其他几个苹果设备重现了这个问题。

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-02T19:54:20.607

这是[一个已知问题](http://groups.google.com/group/google-maps-api/browse_thread/thread/88e5702fd8528ba0/)。它是由移动提供商通过几个静态 IP 地址路由所有互联网请求引起的。手机是其内部网络中的终端（通常具有 10.nnn IP 地址），所有流量都通过面向外部的代理服务器进行路由。

除了

*   说服 Google 将 AT&T 的代理服务器列入白名单
*   说服 AT&T 使用更多代理服务器
*   用脚投票使用代理服务器更多的服务提供商

# programming-languages - 为什么读取文本文件需要字节级函数？

> ID：10420329
> 
> 赞同：0
> 
> 时间：2012-05-02T19:25:52.200
> 
> 标签：programming-languages

为什么需要字节级函数来读取文本文件。我的意思是毕竟它是一个包含字符串数组的文件。那为什么它不能直接存储在字符串中。为什么在任何语言（java、c、c++ 或 as3）中都需要使用字节级函数来读取它们？

如果我能做这样的事情会更容易：

```
var a_str:String = new String();

var myFile:File  ;

a_str = String( myFile.read("xyz.txt") ) ;

trace ( a_str ) ; // << content of the file xyz.txt 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T19:32:37.783

因为并非所有文本都被平等地呈现。一些较旧的字符集以单字节字符表示自己，而其他字符集则是多字节字符。因此，每个作者都必须能够操作字节，而不仅仅是字符。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T19:32:38.000

你如何存储带有字符的文件结尾？对于您能想到的任何合理长度的字符序列，它都有可能出现在文本中并被视为文件结尾并过早结束文件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-02T19:35:01.587

简短的回答？内存通常是字节可寻址的，所以读取一个文件你会期待同样的事情。在大多数 C 风格的编程语言中，字符串通常只是字节的集合，通常以空字符`NUL`(0x00) 终止。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-04T20:17:04.510

有很多语言可以将整个文件读入字符串。Python可以；我很确定 Perl 可以。该功能建立在较低级别的功能之上，该功能当然可以一次读取一个字节（或者，更确切地说，作为一个字节序列，无论是否提供了更大的块）。

如果您不喜欢正在使用的工具，请购买一些更好的工具。

# xsd - 使用 SDL Tridion 的 XSD 方面和指标

> ID：10420331
> 
> 赞同：3
> 
> 时间：2012-05-02T19:25:56.267
> 
> 标签：xsd, tridion

SDL Tridion 使用 XML 模式定义来定义存储在 Tridion 组件中的内容。XSD 可以使用**[限制/方面](http://www.w3schools.com/schema/schema_facets.asp)**或**[指示符](http://www.w3schools.com/schema/schema_complex_indicators.asp)**来限制对 XML 节点有效的内容。

Chris Summers在训练中偶然[发现了其中一些](http://wordpress.urbancherry.net/2012/02/sdl-tridion-2011-learns-about-complex-schemas/)，特别是我们可以在 SDL Tridion 2011 中设置`minOccurs`和指标，如下所示：`maxOccurs`

```
<xsd:element name="someField" minOccurs="2" maxOccurs="5" type="xsd:normalizedString"> 
```

Andrey Marchuk 在同一篇文章中提到了其他选项：

**指标**

*   `MaxValue`
*   `MinValue`

**限制**

*   `FractionDigits`
*   `MaxLength`
*   `MinLength`
*   `Pattern`
*   `TotalDigits`

顺便说一句，这些是特定于 XSD 的吗？

*   `IsMaxValueExclusive`
*   `IsMinValueExclusive`

**如何将 **限制****添加到以下示例 Tridion 架构（源）中？**

```
<xsd:schema xmlns="http://createandbreak.net/schema/example" xmlns:tcmi="http://www.tridion.com/ContentManager/5.0/Instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" elementFormDefault="qualified" targetNamespace="http://createandbreak.net/schema/example">
    <xsd:import namespace="http://www.tridion.com/ContentManager/5.0/Instance"></xsd:import>
    <xsd:annotation>
        <xsd:appinfo>
            <tcm:Labels xmlns:tcm="http://www.tridion.com/ContentManager/5.0">
                <tcm:Label ElementName="someField" Metadata="false">someField</tcm:Label>
            </tcm:Labels>
        </xsd:appinfo>
    </xsd:annotation>
    <xsd:element name="Content">
        <xsd:complexType>
            <xsd:sequence>
                <xsd:element name="someField" minOccurs="2" maxOccurs="5" type="xsd:normalizedString">
                    <xsd:annotation>
                        <xsd:appinfo>
                            <tcm:ExtensionXml xmlns:tcm="http://www.tridion.com/ContentManager/5.0"></tcm:ExtensionXml>
                        </xsd:appinfo>
                    </xsd:annotation>
                </xsd:element>
            </xsd:sequence>
        </xsd:complexType>
    </xsd:element>
</xsd:schema> 
```

以[W3Schools 为例](http://www.w3schools.com/schema/schema_facets.asp)，这将是一个使用正则表达式将字段限制为 5 位的非 Tridion XSD：

```
<xs:element name="prodid">
  <xs:simpleType>
    <xs:restriction base="xs:integer">
      <xs:pattern value="[0-9][0-9][0-9][0-9][0-9]"/>
    </xs:restriction>
  </xs:simpleType>
</xs:element> 
```

我尝试将`xs`命名空间更改为，`xsd`但我不确定 XSD 限制在 (Tridion) 架构中的位置。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-02T20:45:42.237

我相信 XS 和 XSD 在这里有些无关紧要。两者实际上都是引用同一个命名空间的命名空间前缀。这在[这篇文章](https://stackoverflow.com/questions/1193563/difference-between-xs-and-xsd-tags-in-xml-schema-file)中有所描述。

如果您查看您引用的站点 ( [http://www.w3schools.com/schema/default.asp](http://www.w3schools.com/schema/default.asp) ) 中的示例，您将看到`xs`名称空间前缀指的是与 Tridion 架构中`http://www.w3.org/2001/XMLSchema`相同的名称。`xsd`

例如

*   xmlns:xsd="http://www.w3.org/2001/XMLSchema"
*   xmlns:xs="http://www.w3.org/2001/XMLSchema"

因此 xsd 与 xs 相同。

还是我完全错过了你的观点？

如果您只是在寻找如何应用限制，这来自 SDL Tridion 文档（[此处](http://sdllivecontent.sdl.com/LiveContent/web/ui.xql?c=t&action=html&resource=publist_home.html#url=http://sdllivecontent.sdl.com:80/LiveContent/web/search.xql?c=t&lang=&action=search&query=Schema%2520facets%2520regex&sid=lcSearch.runSearch1335992368083&eventType=lcContent.loadDocconcept_A0CA4F22FF3E4D2AA8D2320B7F30465B&pubid=SDL_Tridion_2011_SPONE&publang=en-US&resource=a43f02da-45c5-4e08-97c3-58230e753f99.xml&docid=concept_A0CA4F22FF3E4D2AA8D2320B7F30465B&filename=Schema_ConstrainingFieldContent.xml&query=Schema%2520facets%2520regex&scope=&tid=7df221a9-7948-41f9-b3db-3dec06f9afff&inner_id=&addHistory=true)但需要密码）：

```
<xsd:element name="NumberFieldWithMultipleFacets">
    <xsd:simpleType>
        <xsd:restriction base="xsd:decimal">
            <xsd:totalDigits value="4"/>
            <xsd:fractionDigits value="2"/>
            <xsd:minInclusive value="10"/>
            <xsd:maxInclusive value="20"/>
        </xsd:restriction>
    </xsd:simpleType>
</xsd:element> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T23:20:33.527

如果您正在寻找 Xml Schema 中可能方面的列表，那么您需要查看[此处](http://www.w3.org/TR/xmlschema-2/#facets)。也许然后检查其中哪些受到 Tridion 的尊重/支持是一件简单的事情

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-06-24T21:11:53.087

例如，我仍然想念 xsd:ID，它适用于 WebForms（是的，从 1.0 版开始），但不适用于最新的 SDL Tridion GUI（2013 年除外，未经测试）。

我希望所有有效的 xsd 都能在 Tridion GUI 中工作。

例如，当您将文本字段限制为 min="30" max="70" 个字符时，内容编辑器将看到一个计数器。

将是一个非常好的 GUI 更新。因为它将使 WebForms 在普通（！） Tridion GUI 中成为可能。然后可以通过内容管理创建新字段。创建新的 HTML5 网络表单（经过测试！）只需不到 2 分钟。

所以请更新 GUI 以完全支持 xsd。

# linux - 为特定文件格式创建写入器的问题

> ID：10420332
> 
> 赞同：0
> 
> 时间：2012-05-02T19:26:02.667
> 
> 标签：linux, file-format, specifications, pst

我遇到了微软发布的[PST 文件格式规范。](http://msdn.microsoft.com/en-us/library/ff385210%28v=office.12%29.aspx)似乎很多人提出了基于此规范读取 PST 文件的解决方案，但似乎缺乏能够获取大量数据并将其包装在 PST 格式中的编写器。我想知道是否有人可以启发我为什么会出现这种情况，以及有人将如何编写一些逻辑来获取一些二进制数据并将其以特定格式存储。

编辑：我意识到我没有提供太多关于为什么我对编写 PST 文件生成器感兴趣的上下文。我需要创建由 Linux 机器上的一些二进制文件组成的 PST 文件。要求是这个 PST 生成器也需要安装在 Linux 机器上。似乎如果我将 PST 生成过渡到 Windows 机器，有一些 .NET 互操作机制可以生成 PST 文件，但核心要求是在 Linux 机器上以可扩展的方式生成 PST。

谢谢

# php - 具有多个子查询的 MySQL 查询，每个子查询具有不同的连接类型

> ID：10420335
> 
> 赞同：3
> 
> 时间：2012-05-02T19:26:12.637
> 
> 标签：php, mysql, subquery, left-join, inner-join

让我首先给你一张我的 mysql 查询中使用的表之间的关系图：

[![表关系](../Images/64df89d35b7e9352d9511178f7ca3acb.png)](https://i.stack.imgur.com/aotUv.png)
[（来源：[r717.net](http://eintranet.r717.net/index_htm_files/perm_relationships.png)）]

我有一个看起来像这样的查询：

```
SELECT  * 
FROM    `permissions`
WHERE   `id` IN (
    SELECT      pr.perm_id 
    FROM        `user_roles` as ur 
    LEFT JOIN   `permissions_role` as pr 
    ON          ur.role_id = pr.role_id
    WHERE       ur.user_id = '$userid'
)
OR      `id` IN (
    SELECT      `perm_id` 
    FROM        `permissions_user` 
    WHERE       `user_id` = '$userid'
) 
```

`$userid`是当前用户的用户表中的 id。我将结果中的权限名称存储到一个数组中，该数组表示根据他/她的角色**和**他/她的 id 分配给用户的所有权限：

```
<?php
$user_perms = array();
if(mysql_num_rows($query) > 0):
    while($result = mysql_fetch_array($query):
        $user_perms[] = $result('name');
    endwhile;
endif;
?> 
```

`print_r($user_perms);`产生如下所示的输出：

```
Array ( 
    [0] => ACCESS_TELEPHONELIST_PAGE
    [1] => ACCESS_VACATIONSCHED_PAGE
    [2] => ACCESS_TOURSCHED_PAGE
    [3] => ACCESS_WORKSCHED_PAGE
    [4] => ACCESS_RESOURCES_LINKS
    [5] => ACCESS_PMTOOL_PAGE
    [6] => ACCESS_TOOLSTOOL_PAGE
    [7] => ACCESS_SHOPTOOLLIST_PAGE
    [8] => ACCESS_TOOLINVENTORY_PAGE
    [9] => ACCESS_MANAGETOOLLIST_PAGE
    [10] => ACCESS_TOOLREPORTS_PAGE
    [11] => ACCESS_JOBSLIST_LINKS
    [12] => MAIN_TAB_TOOLSTOOL
    [13] => ADMIN_TAB_PODMANAGEMENT
    [14] => TOOL_TAB_SHOPTOOLLIST
) 
```

我想要做的是将所有用户的角色**也**存储到另一个数组中，而无需进行第二次查询。我想我需要为子查询使用别名，所以我尝试了这个查询：

```
SELECT      permissions.*, usersroles.role_id 
FROM        `permissions`
INNER JOIN  (
    SELECT      ur.user_id, pr.perm_id, ur.role_id
    FROM        `user_roles` as ur
    LEFT JOIN   `permissions_role` as pr 
    ON          ur.role_id = pr.role_id
    WHERE       ur.user_id = '$userid'
) AS usersroles ON usersroles.perm_id = permissions.id
INNER JOIN  (
    SELECT      `perm_id`, `user_id` 
    FROM        `permissions_user` 
    WHERE       `user_id` = '$userid'
) AS userperms ON userperms.user_id = usersroles.user_id
              AND userperms.perm_id = permissions.id 
```

并且，使用类似于上面代码的代码......

```
<?php
$user_perms = array();
$user_roles = array();
if(mysql_num_rows($query) > 0):
    while($result = mysql_fetch_array($query):
        $user_perms = $result('name');
        $user_roles = $result('role_id');
    endwhile;
endif;
?> 
```

...我收到此警告：

```
Warning: mysql_num_rows() expects parameter 1 to be resource, boolean given 
```

但是，我想`print_r($user_roles);`生成一个如下所示的输出：

```
Array (
    [0] => administrator
    [1] => humanresources
    [2] => podmanager
) 
```

谁能告诉我我做错了什么，或者建议一种更好的方法将我需要的数据从**一个**查询中获取到**2 个**数组中？

**编辑：**经过仔细考虑，我将代码更改为使用 ImreL 建议的 2 个查询。生成的代码运行良好且执行迅速。我编辑了答案以显示我使用的最终代码，并添加了支持代码以演示我如何使用这 2 个查询。非常感谢 ImreL！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T00:44:26.227

> 该查询需要在用户加载的每个页面上运行，我们拥有超过 30,000 个权限和 3,000 个角色。我只是在**努力**将我的查询数量保持在最低限度。我们还在办公室的服务器上托管了 7 个站点，服务器似乎无法处理我们产生的流量（不幸的是，我无法控制这一点）

我看到你的意图是好的，但让我告诉你：

“查询数量”不是衡量网站性能的正确方法。

很多时候 2 个简单查询比 1 个复杂查询使用更少的资源。

还有其他方法可以加快您的网站：

*   评估您是否真的需要在每个请求上加载所有这些角色和权限。也许只查询所需的角色/权限就足够了。
*   有适当的索引
*   利用缓存技术来减少负载（网站内容）

所以最后，我试图提出查询来满足所要求的内容：

```
select * from (
    select ur.role_id, p.*
    from user_roles ur 
    left join permissions_role pr on ur.role_id =  pr.role_id
    left join permissions p on p.id = pr.perm_id
    where ur.user_id = '$userid'
  union all
    select null as role_id, p.*
    from permissions_user pu
    join permissions p on p.id = pu.perm_id
    where pu.user_id = '$userid'
) sub
group by ifnull(name,role_id) -- group by to eliminate duplicates 
```

但这对性能不好。使用 2 个查询你会更好：第一个获得用户的所有权限

```
select p.* from permissions p
join permissions_role pr on pr.perm_id = p.id
join user_roles ur on ur.role_id =  pr.role_id and ur.user_id = '$userid'
union
select p.* from permissions p
join  permissions_user pu on pu.perm_id = p.id and pu.user_id = '$userid'; 
```

第二获得所有角色。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T09:13:57.273

**编辑：**这是最终的工作查询。另外，我认为查看查询的使用方式可能对其他人有用，因此包含了完整的解释。

```
//build the array(s)
$userperms = array();
$userroles = array();
if(isset($_SESSION['userid'])):
    //get the userid
    $thisuserid = $_SESSION['userid'];
    //get the permissions for each of the user's roles
    $Cpermissions_role = mysql_query(" 
    SELECT      r.type, ur.user_id, pr.perm_id, ur.role_id, p.name
    FROM        user_roles ur
    LEFT JOIN   permissions_role pr ON ur.role_id = pr.role_id
    LEFT JOIN   roles r ON ur.role_id = r.id
    LEFT JOIN   permissions p ON p.id = pr.perm_id
    WHERE       ur.user_id = '$userid'") or die(mysql_error());
    //get the extra permissions for the user
    $Cpermissions_user = mysql_query("
    SELECT      pu.user_id, pu.perm_id, p.name
    FROM        permissions_user pu
    LEFT JOIN   permissions p ON p.id = pu.perm_id
    WHERE       pu.user_id = '$userid'") or die(mysql_error());
    //build an array of the user's roles & an array of the user's permissions
    if(mysql_num_rows($Cpermissions_role) > 0):
        while($Rpermissions_role = mysql_fetch_array($Cpermissions_role)):
            if(empty($userperms)):
                $userperms[] = $Rpermissions_role['name'];
            elseif(!in_array($Rpermissions_role['name'],$userperms)):
                $userperms[] = $Rpermissions_role['name'];
            endif;
            if(empty($userroles)):
                $userroles[] = $Rpermissions_role['type'];
            elseif(!in_array($Rpermissions_role['type'],$userroles)):
                $userroles[] = $Rpermissions_role['type'];
            endif;
        endwhile;
    endif;
    if(mysql_num_rows($Cpermissions_user) > 0):
        while($Rpermissions_user = mysql_fetch_array($Cpermissions_user)):
            if(empty($userperms)):
                $userperms[] = $Rpermissions_user['name'];
            elseif(!in_array($Rpermissions_user['name'],$userperms)):
                $userperms[] = $Rpermissions_user['name'];
            endif;
        endwhile;
    endif;
endif;
/**
 * Determines if the user has permission for the page or parts of page
 * @param string $perm the permission constant
 * @return boolean true if user has access, false if not
 */
function hasPermission($perm){
    global $userperms;
    if(empty($userperms)):
        return false;
    else:
        if(is_array($userperms)):
            if(in_array($perm,$userperms)):
                return true;
            else:
                return false;
            endif;
        else:
            if($perm == $userperms):
                return true;
            else:
                return false;
            endif;
        endif;
    endif;
} 
```

然后，我使用以下决策声明：

```
if(hasPermission("ACCESS_HOME_PAGE")):
    //perform circus tricks here
endif; 
```

所以，现在`print_r($userperms);`输出这个：

```
Array ( 
    [0] => ACCESS_TELEPHONELIST_PAGE
    [1] => ACCESS_VACATIONSCHED_PAGE
    [2] => ACCESS_TOURSCHED_PAGE
    [3] => ACCESS_WORKSCHED_PAGE
    [4] => ACCESS_RESOURCES_LINKS
    [5] => ACCESS_PMTOOL_PAGE
    [6] => ACCESS_TOOLSTOOL_PAGE
    [7] => ACCESS_SHOPTOOLLIST_PAGE
    [8] => ACCESS_TOOLINVENTORY_PAGE
    [9] => ACCESS_MANAGETOOLLIST_PAGE
    [10] => ACCESS_TOOLREPORTS_PAGE
    [11] => ACCESS_JOBSLIST_LINKS
    [12] => MAIN_TAB_TOOLSTOOL
    [13] => ADMIN_TAB_PODMANAGEMENT
    [14] => TOOL_TAB_SHOPTOOLLIST
    [15] => ACCESS_HOME_PAGE
) 
```

并且，`print_r($userroles);`输出：

```
Array ( 
    [0] => administrator
    [1] => humanresourcees
    [2] => podmanager
) 
```

而且，为了彻底，这里是我用来访问 php 数组的 JavaScript：

```
var js_userperms = new Array();
js_userperms = ["<?php echo join("\", \"", $userperms); ?>"]; 
```

并且，jQuery 决策声明：

```
if(jQuery.inArray("ACCESS_HOME_PAGE", js_userperms) != -1){
    //perform circus tricks here
} 
```

# c++ - Eclipse标记OpenGL函数无法解析

> ID：10420336
> 
> 赞同：7
> 
> 时间：2012-05-02T19:26:16.873
> 
> 标签：c++, c, eclipse, opengl

我尝试在 Eclipse C/C++ 中使用一些 OpenGL 函数。eclipse 可以识别 GlClear 等一些“标准”函数，而 glBindBuffer() 和 glEnableVertexAttribArray() 等其他函数则不能。它们只是用红色下划线。

然而编译是成功的，只有这个令人不安的下划线..

我已经链接了 glut、GL、GLU 和 GLEW，我的操作系统是 arch linux。我使用 Eclipse 3.7.2

为了避免这些错误，我还需要做什么？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-05-05T20:20:26.180

尝试右键单击您的项目并在弹出菜单中：索引 > 重建

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-08-02T21:15:37.120

下划线表示 C++ Indexer 无法识别符号。检查这是否有帮助：

[如何让 Eclipse 索引 #ifdef .... #endif 中的代码](https://stackoverflow.com/questions/3121920/how-can-i-get-eclipse-to-index-code-inside-ifdef-endif)

为了使用 OpenGL 2.0 函数，我在源文件中定义了 GL_GLEXT_PROTOTYPES 符号，但索引器没有选择它。它必须在项目设置中定义，位于：Project Properties > C/C++ General > Paths & Symbols。然后在重建索引后，错误消失了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-26T17:39:10.923

如果您使用 Eclipse CDT 来实际构建您的项目，最简单的解决方案是让 Eclipse 从构建过程中自动学习您的包含路径。

在您的项目属性中，转到 C/C++ Build->Discovery Options，然后选中“自动发现路径和符号”框。

glBindBuffer() 和 glEnableVertexAttribArray() 在 GL/gext.h 中声明，而不是在 GL/gl.h 中。如果将光标放在带有**#include <GL/gl.h>**的行上，右键单击它，然后选择“打开声明”，Eclipse 应该会打开它*认为*是标题的标题。您的实现可能会或可能不会自动将 <GL/gl.h> 包含在 <GL/gl.h> 中；值得检查。

# python - mac上python中的换行符和制表符

> ID：10420337
> 
> 赞同：0
> 
> 时间：2012-05-02T19:26:17.113
> 
> 标签：python, macos, newline

我正在将一个字符串打印到 mac os 10.7.3 上的 python shell。

该字符串包含换行符 \n\r 和制表符 \t。

我不是 100% 确定每个平台上使用了哪些换行符，但是我已经尝试了每种组合（\n、\n\r、\r）并且换行符打印在 shell 上：

```
 'hello\n\r\tworld' 
```

我不知道我做错了什么，任何帮助表示赞赏。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T20:35:20.170

在你看来，换行符和回车实际上是两个字符——一个反斜杠加上一个普通字符。

使用以下方法修复此问题`your_string.decode('string_escape')`：

```
>>> s = 'hello\\n\\r\\tworld'   # or s = r'hello\n\r\tworld'
>>> print s
hello\n\r\tworld
>>> print repr(s)
'hello\\n\\r\\tworld'
>>> print s.decode('string_escape')
hello
        world 
```

# facebook - 在 Facebook 应用上，我为我的应用用户启用了 read_mailbox 权限。我想知道如何访问用户的邮箱？

> ID：10420339
> 
> 赞同：0
> 
> 时间：2012-05-02T19:26:23.200
> 
> 标签：facebook

那么如何从开发者页面读取用户邮箱呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T00:54:35.493

您可以通过调用访问当前用户的邮箱：

```
https://www.graph.facebook.com/me/inbox 
```

其中 'me' 可以替换为当前用户的 id。

# mercurial - 如何匿名化 mercurial 存储库？

> ID：10420340
> 
> 赞同：6
> 
> 时间：2012-05-02T19:26:23.930
> 
> 标签：mercurial

我有一个编程作业要在本周末在我的大学上交，他们对作业的匿名性有严格的规定以保持公正，所以如果我的名字（或任何其他明显的识别信息）出现在任何地方工作可能会被自动取消资格。

在准备将所有内容刻录到光盘时，我刚刚注意到/记得我的 HG 存储库中*充满*了我名字的副本。代码很干净，但每个变更集的作者要么是我的全名和电子邮件，要么是我的大学登录 ID 和实验室计算机的主机名（取决于我在哪里工作）。

我需要创建一个匿名版本的存储库（或将所有姓名换成我的学生证号码），而不会丢失它所拥有的任何其他信息。

所以，正如标题所说，我如何匿名一个 mercurial 存储库？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-02T20:36:55.547

您可以使用 Mercurial 的[Convert 扩展](http://mercurial.selenic.com/wiki/ConvertExtension)，并[`--authors`选择](http://mercurial.selenic.com/wiki/ConvertExtension#A--authors)将您的存储库“转换”为新的 Mercurial 存储库，在转换过程中更改作者的姓名。

引用第二个链接：

> `--authors`如果提供了选项，Convert 还可以在转换期间重新映射作者姓名 。参数应该是一个简单的文本文件，将每个源提交作者映射到目标提交作者。对于使用 UNIX 登录来识别作者（例如：CVS）的源 SCM 来说，这很方便。例子：
> 
> ```
> john=John Smith <John.Smith@someplace.net>
> tom=Tom Johnson <Tom.Johnson@bigcity.com> 
> ```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T19:40:55.573

如果您没有任何合并变更集，那么您可以尝试使用`graft`Mercurial 2.0 中的命令将您的存储库移植到新存储库，同时更改记录的用户名。

如果您确实有合并变更集，那么可能可以使用`transplant`Mercurial 2.2 中的扩展，尽管更改记录的用户名似乎更难。

# javascript - 为什么从 Google 地图第 2 版切换到第 3 版后我的标记不显示？

> ID：10420347
> 
> 赞同：1
> 
> 时间：2012-05-02T19:26:50.077
> 
> 标签：javascript, google-maps, google-maps-markers

从 Google 地图的第 2 版过渡到第 3 版后，这些标记不再可见。我找不到错误！谁能帮我？违规页面是[http://www.lalpinistavirtuale.it/default.asp](http://www.lalpinistavirtuale.it/default.asp)（下面是谷歌地图，您应该看到大约 200 个可点击标记）。提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T01:44:22.893

在您的`initialize`函数中，您已将第一部分代码切换到 v3，但您还有一些工作要做：

*   `GSize(32,32)`应该变成：`google.maps.Size( 32, 32)`
*   `GPoint(16,32)`应该变成：`google.maps.Point( 16, 32)`
*   `GLatLng(44.1883535,7.41206386)`应该变成：`google.maps.LatLng( 44.1883535, 7.41206386)`
*   `GIcon`应该重构创建以使用：`google.maps.MarkerImage( url, size:Size, origin?:Point, anchor?:Point, scaledSize?:Size )`
*   `map.addControl`调用应重构为：`MapOptions`属性如下：

```
 var mapOpts = {
    panControl:        true,   // First half of replacing GLargeMapControl
    zoomControl:       true,   // Other half of replacing GLargeMapControl
    scaleControl:      true,   // Replaces GScaleControl
    mapTypeControl:    true    // Replaces GMapTypeControl
}; 
```

这些控件中的每一个都有可以设置的选项；更多详细信息请[参见 v3 API 参考](https://developers.google.com/maps/documentation/javascript/reference)。您可能有其他必须重构的 v2 代码，但这是最大的份额。不客气 ：）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T19:34:05.387

您的 createmarker 函数正在使用“Gmarker”，而在 V3 中您应该使用“google.maps.Marker”

# windows-phone-7 - 在 windows phone 7 中调用异步方法

> ID：10420350
> 
> 赞同：0
> 
> 时间：2012-05-02T19:27:02.970
> 
> 标签：windows-phone-7

有没有办法在 Windows Phone 7 应用程序中异步使用服务器方法？我有一个数据列表。在 foreach 循环中，为每个数据向服务器发送一个请求，但它们没有按照我的调用顺序完成。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T19:28:47.340

> 我有一个数据列表。在 foreach 循环中，为每个数据向服务器发送一个请求，但它们没有按照我的调用顺序完成。我怎样才能做到这一点？

那么你可以有效地*使*它们同步 - 摆脱它作为一个*实际*的foreach 循环，而是设置适当的异步回调，以便当第一个响应进来时，你发送第二个请求，等等，直到没有更多的请求。（您可能希望使用 a`Queue<T>`将要发送的请求排队。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T03:57:39.167

不要仅仅因为某些东西似乎不起作用而恢复到同步方式。在异步世界中工作有很多好处。也有一些危险。关键是知道如何避免这些危险。这是一个使用 WebClient 的示例，它会产生有害影响。

```
foreach (var item in items)
{
    WebClient client = new WebClient();
    client.DownloadStringCompleted += (sender, args) =>
        {
            item.Stuff = args.Result;
        };
    client.OpenReadAsync(new Uri("http://mydomain.com/stuff"));
} 
```

返回客户端时，不能保证`item`与“创建”客户端请求的项目相同。这被称为“访问修改后的关闭器”。这仅仅意味着您可能正在尝试修改不再存在或不一样的东西。正确的方法是在 foreach 中捕获您的项目，如下所示：

```
foreach (var item in items)
{
    var internalItem = item;
    WebClient client = new WebClient();
    client.DownloadStringCompleted += (sender, args) =>
        {
            internalItem.Stuff = args.Result;
        };
    client.OpenReadAsync(new Uri("http://mydomain.com/stuff"));
} 
```

这可确保您使用正确的项目，因为它已在 foreach 范围内捕获。

# javascript - 将文件大小（以字节为单位）转换为人类可读的字符串

> ID：10420352
> 
> 赞同：309
> 
> 时间：2012-05-02T19:27:09.030
> 
> 标签：javascript, filesize, human-readable

我正在使用此函数将文件大小（以字节为单位）转换为人类可读的文件大小：

```
function getReadableFileSizeString(fileSizeInBytes) {
    var i = -1;
    var byteUnits = [' kB', ' MB', ' GB', ' TB', 'PB', 'EB', 'ZB', 'YB'];
    do {
        fileSizeInBytes = fileSizeInBytes / 1024;
        i++;
    } while (fileSizeInBytes > 1024);

    return Math.max(fileSizeInBytes, 0.1).toFixed(1) + byteUnits[i];
}; 
```

但是，这似乎不是 100% 准确的。例如：

```
getReadableFileSizeString(1551859712); // output is "1.4 GB" 
```

这不应该`"1.5 GB"`吗？似乎除以 1024 正在失去精度。我完全误解了什么还是有更好的方法来做到这一点？

* * *

## 回答 #1

> 赞同：474
> 
> 时间：2013-02-17T08:57:08.960

Here's one I wrote:

```
/**
 * Format bytes as human-readable text.
 * 
 * @param bytes Number of bytes.
 * @param si True to use metric (SI) units, aka powers of 1000\. False to use 
 *           binary (IEC), aka powers of 1024.
 * @param dp Number of decimal places to display.
 * 
 * @return Formatted string.
 */
function humanFileSize(bytes, si=false, dp=1) {
  const thresh = si ? 1000 : 1024;

  if (Math.abs(bytes) < thresh) {
    return bytes + ' B';
  }

  const units = si 
    ? ['kB', 'MB', 'GB', 'TB', 'PB', 'EB', 'ZB', 'YB'] 
    : ['KiB', 'MiB', 'GiB', 'TiB', 'PiB', 'EiB', 'ZiB', 'YiB'];
  let u = -1;
  const r = 10**dp;

  do {
    bytes /= thresh;
    ++u;
  } while (Math.round(Math.abs(bytes) * r) / r >= thresh && u < units.length - 1);

  return bytes.toFixed(dp) + ' ' + units[u];
}

console.log(humanFileSize(1551859712))  // 1.4 GiB
console.log(humanFileSize(5000, true))  // 5.0 kB
console.log(humanFileSize(5000, false))  // 4.9 KiB
console.log(humanFileSize(-10000000000000000000000000000))  // -8271.8 YiB
console.log(humanFileSize(999949, true))  // 999.9 kB
console.log(humanFileSize(999950, true))  // 1.0 MB
console.log(humanFileSize(999950, true, 2))  // 999.95 kB
console.log(humanFileSize(999500, true, 0))  // 1 MB
```

* * *

## 回答 #2

> 赞同：117
> 
> 时间：2013-12-22T17:32:10.057

计算的另一个实施例

```
function humanFileSize(size) {
    var i = Math.floor( Math.log(size) / Math.log(1024) );
    return ( size / Math.pow(1024, i) ).toFixed(2) * 1 + ' ' + ['B', 'kB', 'MB', 'GB', 'TB'][i];
}; 
```

* * *

## 回答 #3

> 赞同：59
> 
> 时间：2012-05-02T19:31:37.047

这取决于您要使用二进制还是十进制约定。

例如，RAM 始终以二进制测量，因此将 1551859712 表示为 ~1.4GiB 是正确的。

另一方面，硬盘制造商喜欢使用十进制，所以他们称之为~1.6GB。

只是为了混淆，软盘混合使用了两个系统——它们的 1MB 实际上是 1024000 字节。

* * *

## 回答 #4

> 赞同：36
> 
> 时间：2013-12-09T04:11:16.973

**这是一个将数字转换为符合新国际标准的可读字符串的原型。**

> 有两种表示大数的方法：您可以将它们显示为 1000 = 10 3（以 10 为底）或 1024 = 2 10（以 2 为底）的倍数。如果除以 1000，则可能使用 SI 前缀名称，如果除以 1024，则可能使用 IEC 前缀名称。问题从除以 1024 开始。许多应用程序使用 SI 前缀名称，有些使用 IEC 前缀名称。目前的情况是一团糟。如果您看到 SI 前缀名称，您不知道该数字是除以 1000 还是 1024

[https://wiki.ubuntu.com/UnitsPolicy](https://wiki.ubuntu.com/UnitsPolicy)

[http://en.wikipedia.org/wiki/Template:Quantities_of_bytes](http://en.wikipedia.org/wiki/Template:Quantities_of_bytes)

```
Object.defineProperty(Number.prototype,'fileSize',{value:function(a,b,c,d){
 return (a=a?[1e3,'k','B']:[1024,'K','iB'],b=Math,c=b.log,
 d=c(this)/c(a[0])|0,this/b.pow(a[0],d)).toFixed(2)
 +' '+(d?(a[1]+'MGTPEZY')[--d]+a[2]:'Bytes');
},writable:false,enumerable:false}); 
```

此函数包含 no `loop`，因此它可能比其他一些函数更快。

**用法：**

*IEC前缀*

```
console.log((186457865).fileSize()); // default IEC (power 1024)
//177.82 MiB
//KiB,MiB,GiB,TiB,PiB,EiB,ZiB,YiB 
```

*SI 前缀*

```
console.log((186457865).fileSize(1)); //1,true for SI (power 1000)
//186.46 MB 
//kB,MB,GB,TB,PB,EB,ZB,YB 
```

我将 IEC 设置为默认值，因为我总是使用二进制模式来计算文件的大小......使用 1024 的幂

* * *

如果您只想在简短的 oneliner 函数中使用其中一个：

**SI**

```
function fileSizeSI(a,b,c,d,e){
 return (b=Math,c=b.log,d=1e3,e=c(a)/c(d)|0,a/b.pow(d,e)).toFixed(2)
 +' '+(e?'kMGTPEZY'[--e]+'B':'Bytes')
}
//kB,MB,GB,TB,PB,EB,ZB,YB 
```

**国际电工委员会**

```
function fileSizeIEC(a,b,c,d,e){
 return (b=Math,c=b.log,d=1024,e=c(a)/c(d)|0,a/b.pow(d,e)).toFixed(2)
 +' '+(e?'KMGTPEZY'[--e]+'iB':'Bytes')
}
//KiB,MiB,GiB,TiB,PiB,EiB,ZiB,YiB 
```

**用法：**

```
console.log(fileSizeIEC(7412834521)); 
```

如果您对功能有任何疑问，请询问

* * *

## 回答 #5

> 赞同：22
> 
> 时间：2015-01-23T23:47:10.903

```
sizeOf = function (bytes) {
  if (bytes == 0) { return "0.00 B"; }
  var e = Math.floor(Math.log(bytes) / Math.log(1024));
  return (bytes/Math.pow(1024, e)).toFixed(2)+' '+' KMGTP'.charAt(e)+'B';
} 
```

> 大小（2054110009）；
> //=> "1.91 GB"
> 
> 大小（7054110）；
> //=> "6.73 MB"
> 
> sizeOf((3*1024*1024));
> //=> "3.00 MB"

* * *

## 回答 #6

> 赞同：17
> 
> 时间：2015-12-10T19:27:28.017

作为 ReactJS 组件的解决方案

```
Bytes = React.createClass({
    formatBytes() {
        var i = Math.floor(Math.log(this.props.bytes) / Math.log(1024));
        return !this.props.bytes && '0 Bytes' || (this.props.bytes / Math.pow(1024, i)).toFixed(2) + " " + ['Bytes', 'KB', 'MB', 'GB', 'TB', 'PB', 'EB', 'ZB', 'YB'][i]
    },
    render () {
        return (
            <span>{ this.formatBytes() }</span>
        );
    }
}); 
```

**更新** 对于那些使用 es6 的人来说，这里是同一组件的无状态版本

```
const sufixes = ['Bytes', 'KB', 'MB', 'GB', 'TB', 'PB', 'EB', 'ZB', 'YB'];
const getBytes = (bytes) => {
  const i = Math.floor(Math.log(bytes) / Math.log(1024));
  return !bytes && '0 Bytes' || (bytes / Math.pow(1024, i)).toFixed(2) + " " + sufixes[i];
};

const Bytes = ({ bytes }) => (<span>{ getBytes(bytes) }</span>);

Bytes.propTypes = {
  bytes: React.PropTypes.number,
}; 
```

* * *

## 回答 #7

> 赞同：11
> 
> 时间：2014-02-25T19:08:46.133

基于[cocco](https://stackoverflow.com/users/2450730/cocco)的想法，这是一个不太紧凑但希望更全面的示例。

```
<!DOCTYPE html>
<html>
<head>
<title>File info</title>

<script>
<!--
function fileSize(bytes) {
    var exp = Math.log(bytes) / Math.log(1024) | 0;
    var result = (bytes / Math.pow(1024, exp)).toFixed(2);

    return result + ' ' + (exp == 0 ? 'bytes': 'KMGTPEZY'[exp - 1] + 'B');
}

function info(input) {
    input.nextElementSibling.textContent = fileSize(input.files[0].size);
} 
-->
</script>
</head>

<body>
<label for="upload-file"> File: </label>
<input id="upload-file" type="file" onchange="info(this)">
<div></div>
</body>
</html> 
```

* * *

## 回答 #8

> 赞同：10
> 
> 时间：2016-12-30T20:46:27.247

另一个与此处类似的示例

```
function fileSize(b) {
    var u = 0, s=1024;
    while (b >= s || -b >= s) {
        b /= s;
        u++;
    }
    return (u ? b.toFixed(1) + ' ' : b) + ' KMGTPEZY'[u] + 'B';
} 
```

它测量的性能比具有相似特征的其他性能好到可以忽略不计。

* * *

## 回答 #9

> 赞同：8
> 
> 时间：2019-06-28T11:45:23.907

我想要小数位数与数字大小成正比的“文件管理器”行为（例如，Windows 资源管理器）。似乎没有其他答案可以做到这一点。

```
function humanFileSize(size) {
    if (size < 1024) return size + ' B'
    let i = Math.floor(Math.log(size) / Math.log(1024))
    let num = (size / Math.pow(1024, i))
    let round = Math.round(num)
    num = round < 10 ? num.toFixed(2) : round < 100 ? num.toFixed(1) : round
    return `${num} ${'KMGTPEZY'[i-1]}B`
} 
```

这里有一些例子：

```
humanFileSize(0)          // "0 B"
humanFileSize(1023)       // "1023 B"
humanFileSize(1024)       // "1.00 KB"
humanFileSize(10240)      // "10.0 KB"
humanFileSize(102400)     // "100 KB"
humanFileSize(1024000)    // "1000 KB"
humanFileSize(12345678)   // "11.8 MB"
humanFileSize(1234567890) // "1.15 GB" 
```

* * *

## 回答 #10

> 赞同：6
> 
> 时间：2020-07-09T10:47:12.770

从 2020 年起，您可以使用文件大小的 npm 包，它支持 IEC（默认 1024 次幂）、SI（1000 次幂）和 JEDEC（替代 SI 单位表示法）格式。

```
npm install file-size

import filesize from "filesize";

// outputs: 186.46 MB
filesize(186457865).human('si');

// outputs: 177.82 MiB
filesize(186457865).human(); 
```

[https://www.npmjs.com/package/file-size](https://www.npmjs.com/package/file-size)

* * *

## 回答 #11

> 赞同：5
> 
> 时间：2020-04-07T15:09:11.550

我的回答可能会迟到，但我想它会对某人有所帮助。

## 公制前缀：

```
/**
 * Format file size in metric prefix
 * @param fileSize
 * @returns {string}
 */
const formatFileSizeMetric = (fileSize) => {
  let size = Math.abs(fileSize);

  if (Number.isNaN(size)) {
    return 'Invalid file size';
  }

  if (size === 0) {
    return '0 bytes';
  }

  const units = ['bytes', 'kB', 'MB', 'GB', 'TB'];
  let quotient = Math.floor(Math.log10(size) / 3);
  quotient = quotient < units.length ? quotient : units.length - 1;
  size /= (1000 ** quotient);

  return `${+size.toFixed(2)} ${units[quotient]}`;
}; 
```

## 二进制前缀：

```
/**
 * Format file size in binary prefix
 * @param fileSize
 * @returns {string}
 */
const formatFileSizeBinary = (fileSize) => {
  let size = Math.abs(fileSize);

  if (Number.isNaN(size)) {
    return 'Invalid file size';
  }

  if (size === 0) {
    return '0 bytes';
  }

  const units = ['bytes', 'kiB', 'MiB', 'GiB', 'TiB'];
  let quotient = Math.floor(Math.log2(size) / 10);
  quotient = quotient < units.length ? quotient : units.length - 1;
  size /= (1024 ** quotient);

  return `${+size.toFixed(2)} ${units[quotient]}`;
}; 
```

**例子：**

```
// Metrics prefix
formatFileSizeMetric(0)      // 0 bytes
formatFileSizeMetric(-1)     // 1 bytes
formatFileSizeMetric(100)    // 100 bytes
formatFileSizeMetric(1000)   // 1 kB
formatFileSizeMetric(10**5)  // 10 kB
formatFileSizeMetric(10**6)  // 1 MB
formatFileSizeMetric(10**9)  // 1GB
formatFileSizeMetric(10**12) // 1 TB
formatFileSizeMetric(10**15) // 1000 TB

// Binary prefix
formatFileSizeBinary(0)     // 0 bytes
formatFileSizeBinary(-1)    // 1 bytes
formatFileSizeBinary(1024)  // 1 kiB
formatFileSizeBinary(2048)  // 2 kiB
formatFileSizeBinary(2**20) // 1 MiB
formatFileSizeBinary(2**30) // 1 GiB
formatFileSizeBinary(2**40) // 1 TiB
formatFileSizeBinary(2**50) // 1024 TiB 
```

* * *

## 回答 #12

> 赞同：4
> 
> 时间：2015-03-06T10:10:21.757

这是我的 - 也适用于非常大的文件 -_-

```
function formatFileSize(size)
{
    var sizes = [' Bytes', ' KB', ' MB', ' GB', ' TB', ' PB', ' EB', ' ZB', ' YB'];
    for (var i = 1; i < sizes.length; i++)
    {
        if (size < Math.pow(1024, i)) return (Math.round((size/Math.pow(1024, i-1))*100)/100) + sizes[i-1];
    }
    return size;
} 
```

* * *

## 回答 #13

> 赞同：4
> 
> 时间：2016-08-11T13:24:41.517

根据[cocco 的回答](https://stackoverflow.com/a/20463021/1414809)，但稍微取消了糖分（老实说，我很满意的保留/添加了）并且不显示尾随零但仍然支持 0，希望对其他人有用：

```
function fileSizeSI(size) {
    var e = (Math.log(size) / Math.log(1e3)) | 0;
    return +(size / Math.pow(1e3, e)).toFixed(2) + ' ' + ('kMGTPEZY'[e - 1] || '') + 'B';
}

// test:
document.write([0, 23, 4322, 324232132, 22e9, 64.22e12, 76.22e15, 64.66e18, 77.11e21, 22e24].map(fileSizeSI).join('<br>'));
```

* * *

## 回答 #14

> 赞同：4
> 
> 时间：2020-12-03T10:22:12.187

这里有很多很棒的答案。但是，如果您正在寻找一种非常简单的方法，并且您不介意流行的库，那么一个很好的解决方案是`filesize` [https://www.npmjs.com/package/filesize](https://www.npmjs.com/package/filesize)

它有很多选项，用法很简单，例如

```
filesize(265318); // "259.1 KB" 
```

取自他们的优秀例子

* * *

## 回答 #15

> 赞同：3
> 
> 时间：2012-05-02T19:43:01.520

```
1551859712 / 1024 = 1515488
1515488 / 1024 = 1479.96875
1479.96875 / 1024 = 1.44528198242188 
```

你的解决方案是正确的。要意识到的重要一点是，为了从 to 得到`1551859712`，`1.5`您必须除以 1000，但字节数以 1024 的二进制到十进制块计算，因此 Gigabyte 值较小。

* * *

## 回答 #16

> 赞同：3
> 
> 时间：2020-07-02T19:04:24.167

用于 SI 系统的简单而简短的“Pretty Bytes”函数，没有不必要的小数舍入。

事实上，因为数字大小应该是人类可读的，所以“千分之一”显示不再是人类。

小数位数默认为 2，但可以在调用函数时将其修改为其他值。常见的主要显示是默认的 2 位小数。

代码很短，使用了 Number String Triplets 的方法。

```
// Simple Pretty Bytes with SI system
// Without fraction rounding

function numberPrettyBytesSI(Num=0, dec=2){
if (Num<1000) return Num+" Bytes";
Num =("0".repeat((Num+="").length*2%3)+Num).match(/.{3}/g);
return Number(Num[0])+"."+Num[1].substring(0,dec)+" "+"  kMGTPEZY"[Num.length]+"B";
}

console.log(numberPrettyBytesSI(0));
console.log(numberPrettyBytesSI(500));
console.log(numberPrettyBytesSI(1000));
console.log(numberPrettyBytesSI(15000));
console.log(numberPrettyBytesSI(12345));
console.log(numberPrettyBytesSI(123456));
console.log(numberPrettyBytesSI(1234567));
console.log(numberPrettyBytesSI(12345678));
```

* * *

## 回答 #17

> 赞同：2
> 
> 时间：2019-12-16T23:47:29.333

我发现[@cocco 的回答](https://stackoverflow.com/a/20463021/1414809)很有趣，但有以下问题：

1.  [不要修改本机类型](https://stackoverflow.com/q/14034180/64750)或您不拥有的类型
2.  为人类编写干净、可读的代码，让 minifiers 为机器优化代码
3.  （TypeScript 用户的奖励）不能很好地使用 TypeScript

**打字稿：**

```
 /**
 * Describes manner by which a quantity of bytes will be formatted.
 */
enum ByteFormat {
  /**
   * Use Base 10 (1 kB = 1000 bytes). Recommended for sizes of files on disk, disk sizes, bandwidth.
   */
  SI = 0,
  /**
   * Use Base 2 (1 KiB = 1024 bytes). Recommended for RAM size, size of files on disk.
   */
  IEC = 1
}

/**
 * Returns a human-readable representation of a quantity of bytes in the most reasonable unit of magnitude.
 * @example
 * formatBytes(0) // returns "0 bytes"
 * formatBytes(1) // returns "1 byte"
 * formatBytes(1024, ByteFormat.IEC) // returns "1 KiB"
 * formatBytes(1024, ByteFormat.SI) // returns "1.02 kB"
 * @param size The size in bytes.
 * @param format Format using SI (Base 10) or IEC (Base 2). Defaults to SI.
 * @returns A string describing the bytes in the most reasonable unit of magnitude.
 */
function formatBytes(
  value: number,
  format: ByteFormat = ByteFormat.SI
) {
  const [multiple, k, suffix] = (format === ByteFormat.SI
    ? [1000, 'k', 'B']
    : [1024, 'K', 'iB']) as [number, string, string]
  // tslint:disable-next-line: no-bitwise
  const exp = (Math.log(value) / Math.log(multiple)) | 0
  // or, if you'd prefer not to use bitwise expressions or disabling tslint rules, remove the line above and use the following:
  // const exp = value === 0 ? 0 : Math.floor(Math.log(value) / Math.log(multiple)) 
  const size = Number((value / Math.pow(multiple, exp)).toFixed(2))
  return (
    size +
    ' ' +
    (exp 
       ? (k + 'MGTPEZY')[exp - 1] + suffix 
       : 'byte' + (size !== 1 ? 's' : ''))
  )
}

// example
[0, 1, 1024, Math.pow(1024, 2), Math.floor(Math.pow(1024, 2) * 2.34), Math.pow(1024, 3), Math.floor(Math.pow(1024, 3) * 892.2)].forEach(size => {
  console.log('Bytes: ' + size)
  console.log('SI size: ' + formatBytes(size))
  console.log('IEC size: ' + formatBytes(size, 1) + '\n')
}); 
```

* * *

## 回答 #18

> 赞同：1
> 
> 时间：2020-04-29T15:35:24.657

这是[mpen答案的大小改进](https://stackoverflow.com/a/14919494/860099)

```
function humanFileSize(bytes, si=false) {
  let u, b=bytes, t= si ? 1000 : 1024;     
  ['', si?'k':'K', ...'MGTPEZY'].find(x=> (u=x, b/=t, b**2<1));
  return `${u ? (t*b).toFixed(1) : bytes} ${u}${!si && u ? 'i':''}B`;    
} 
```

```
function humanFileSize(bytes, si=false) {
  let u, b=bytes, t= si ? 1000 : 1024;     
  ['', si?'k':'K', ...'MGTPEZY'].find(x=> (u=x, b/=t, b**2<1));
  return `${u ? (t*b).toFixed(1) : bytes} ${u}${!si && u ? 'i':''}B`;    
}

// TEST
console.log(humanFileSize(5000));      // 4.9 KiB
console.log(humanFileSize(5000,true)); // 5.0 kB
```

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2022-02-23T20:02:53.010

要在投票解决方案中动态调整小数位数，请将其转换`bytes.toFixed(dp)`为数字，然后再转换回字符串，如下所示：

```
return Number(bytes.toFixed(dp)).toString() + " " + units[u]; 
```

这将显示 100 GiB 而不是 100.00 GiB。在js中动态引用问题[toFixed()](https://stackoverflow.com/questions/62147160/tofixed-dynamically-in-js?noredirect=1&lq=1)

* * *

## 回答 #20

> 赞同：0
> 
> 时间：2019-05-11T12:30:03.063

对于那些使用 的人`Angular`，有一个名为的包`angular-pipes`有一个管道：

**文件**

```
import { BytesPipe } from 'angular-pipes'; 
```

**用法**

```
{{ 150 | bytes }} <!-- 150 B -->
{{ 1024 | bytes }} <!-- 1 KB -->
{{ 1048576 | bytes }} <!-- 1 MB -->
{{ 1024 | bytes: 0 : 'KB' }} <!-- 1 MB -->
{{ 1073741824 | bytes }} <!-- 1 GB -->
{{ 1099511627776 | bytes }} <!-- 1 TB -->
{{ 1073741824 | bytes : 0 : 'B' : 'MB' }} <!-- 1024 MB --> 
```

[链接到文档](https://github.com/fknop/angular-pipes/blob/master/docs/math.md#bytes)。

* * *

## 回答 #21

> 赞同：-2
> 
> 时间：2018-12-06T02:05:36.303

让字节= 1024 * 10 * 10 * 10；

console.log（getReadableFileSizeString（字节））

将返回 1000.0Кб 而不是 1MB

# ember.js - 为什么 create() 的参数不像 setProperties()？

> ID：10420357
> 
> 赞同：12
> 
> 时间：2012-05-02T19:27:57.253
> 
> 标签：ember.js

我发现关于 Ember 非常违反直觉的一点是，您[可以](http://emberjs.com/#toc_computed-properties-setters)使用`create()`. 见[http://jsfiddle.net/zJQJw/2/](http://jsfiddle.net/zJQJw/2/)

我发现最好的解决方法是调用`create().setProperties(properties)`而不是调用`create(properties)`，但这对我来说似乎是一个不必要的问题。我意识到此时它可能会破坏某些应用程序，但是您会考虑让`create()`行为更像`setProperties()`吗？

我提出这个要求的动机是在使用该模式`init()`之前会调用它。这还不是一个大问题，但我可以看到这在某些情况下是不可取的。这是一个完全人为的例子，但也许你能看到我在说什么？[http://jsfiddle.net/QJ8vX/2/](http://jsfiddle.net/QJ8vX/2/)`setProperties()``create().setProperties(properties)`

我可以看到保持当前行为的唯一原因是对 setter 方法进行特定于实例的覆盖。但在这些情况下，你可以很容易地做到`MyClass.extend({ overridenMethod: ... }).create(properties)`

Ember 1.0 会考虑这样的改变吗？还是我对 Ember 的对象模型应该如何工作有错误的想法？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-18T01:44:35.857

我们推迟此更改的主要原因是它无法覆盖在基类上定义为计算属性的属性。例如，在 中`Ember.View`，该`template`属性是一个计算属性：

```
template: Ember.computed(function(key, value) {
  if (value !== undefined) { return value; }

  var templateName = get(this, 'templateName'),
      template = this.templateForName(templateName, 'template');

  return template || get(this, 'defaultTemplate');
}).property('templateName').cacheable(), 
```

创建 的子类时`Ember.View`，您可能希望使用显式模板函数覆盖此定义：

```
Ember.View.create({ template: Ember.Handlebars.compile('...') }); 
```

如果计算属性不处理 setter 情况，则覆盖计算属性的尝试将是静默失败。

如果我们进行了这个更改，它还会引入其他问题，即观察者是否应该触发传递给`create`方法的属性。两者都有可能实现，并且两种方法都有很强的论据。

在 1.0 之前，考虑采用以下方法似乎是合理的：

*   改变`create`使用`setProperties`语义
*   添加一个新的 API (`override`或`createWithOverride`) 来保留现有的语义，以防您明确想要覆盖现有的计算属性
*   抑制因`create`（或决定不）设置的属性的观察者
*   找到一种方法来检测并警告尝试将`create`API 与未实现 setter 的计算属性一起使用。

我需要更多地讨论它，并考虑对现有应用程序的影响，但这绝对是值得考虑的事情，因为它对于新开发人员来说绝对是一个很大的问题。我们需要改变行为的事实`ember-data`是一个很好的线索，表明有些事情不太正确。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-18T15:20:31.380

这可能是一个肮脏的黑客，但它对我有用。

```
Em.Object.reopenClass({ 
   create: function(config) {
       return this._super().setProperties(config); 
   }
}); 
```

# android - Android - 定期后台服务 - 建议

> ID：10420358
> 
> 赞同：33
> 
> 时间：2012-05-02T19:28:03.963
> 
> 标签：android, service

我正在开发一个应用程序，它将有关其位置的信息中继到远程服务器。我打算通过向网络服务器发送一个简单的 HTTP 帖子来做到这一点，一切都很简单。

但根据规范，应用程序需要不时执行自身，假设每 30 分钟执行一次。独立于界面，这意味着即使应用程序关闭，它也需要运行。

我环顾四周，发现需要使用 Android Services。我可以用什么来实现这样的系统。手机重启时服务（或其他机制）会重启吗？

提前致谢。

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-05-02T20:07:44.610

创建一个`Service`将您的信息发送到您的服务器。大概，你已经控制住了。

您`Service`应该由 触发的警报启动[`AlarmManager`](http://developer.android.com/reference/android/app/AlarmManager.html)，您可以在其中指定时间间隔。除非您必须每 30 分钟*准确*报告一次数据，否则您可能需要不准确的警报，以便节省一些电池寿命。

最后，您可以通过如下设置来注册您的应用程序以获取启动广播[`BroadcastReceiver`](http://developer.android.com/reference/android/content/BroadcastReceiver.html)：

```
public class BootReceiver extends BroadcastReceiver {
    @Override
    public void onReceive(Context context, Intent intent) {  
        if (intent.getAction().equals(Intent.ACTION_BOOT_COMPLETED)) {
            // Register your reporting alarms here.            
        }
    }
} 
```

您需要向您添加以下权限才能`AndroidManifest.xml`使其正常工作。当您正常运行应用程序时，不要忘记注册您的闹钟，否则它们只会在设备启动时注册。

```
<uses-permission android:name="android.permission.RECEIVE_BOOT_COMPLETED"/> 
```

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2015-03-07T11:35:46.763

这是一种使服务永久运行的半不同方式。如果你愿意，有办法在代码中杀死它

后台服务：

```
package com.ex.ample;

import android.app.Service;
import android.content.*;
import android.os.*;
import android.widget.Toast;

public class BackgroundService extends Service {

    public Context context = this;
    public Handler handler = null;
    public static Runnable runnable = null;

    @Override
    public IBinder onBind(Intent intent) {
        return null;
    }

    @Override
    public void onCreate() {
        Toast.makeText(this, "Service created!", Toast.LENGTH_LONG).show();

        handler = new Handler();
        runnable = new Runnable() {
            public void run() {
                Toast.makeText(context, "Service is still running", Toast.LENGTH_LONG).show();
                handler.postDelayed(runnable, 10000);
            }
        };

        handler.postDelayed(runnable, 15000);
    }

    @Override
    public void onDestroy() {
        /* IF YOU WANT THIS SERVICE KILLED WITH THE APP THEN UNCOMMENT THE FOLLOWING LINE */
        //handler.removeCallbacks(runnable);
        Toast.makeText(this, "Service stopped", Toast.LENGTH_LONG).show();
    }

    @Override
    public void onStart(Intent intent, int startid) {
        Toast.makeText(this, "Service started by user.", Toast.LENGTH_LONG).show();
    }
} 
```

以下是您从主要活动或您希望的任何地方开始的方式：

```
startService(new Intent(this, BackgroundService.class)); 
```

`onDestroy()`当应用程序关闭或终止时将被调用，但可运行的只是重新启动它。

我希望这可以帮助某人。

有些人这样做的原因是因为企业应用程序在某些情况下用户/员工不能停止某些事情:)

[http://i.imgur.com/1vCnYJW.png](https://i.imgur.com/1vCnYJW.png)

* * *

## **编辑**

从 Android O (8.0) 开始，您必须`JobManager`用于计划任务。Evernote有一个名为[Android-Job](https://github.com/evernote/android-job)的库，它可以让所有 Android 版本的定期后台工作变得轻而易举。我还制作了这个库的[Xamarin 绑定](https://github.com/Dooks123/Android-Job-XamarinBinding)。

那么您需要做的就是以下几点：

在您的应用程序类中：

```
public class MyApp extends Application {

    @Override
    public void onCreate() {
        super.onCreate();
        JobManager.create(this).addJobCreator(new MyJobCreator());
    }
} 
```

创建以下两个类`YourJobCreator`和`YourSyncJob`（所有工作将在哪里完成。Android 为所有要运行的后台作业分配时间。对于 < 8.0 的 android 版本，它仍将正常运行警报管理器和后台服务）

```
public class MyJobCreator implements JobCreator {

    @Override
    @Nullable
    public Job create(@NonNull String tag) {
        switch (tag) {
            case MySyncJob.TAG:
                return new MySyncJob();
            default:
                return null;
        }
    }
}

public class MySyncJob extends Job {

    public static final String TAG = "my_job_tag";

    @Override
    @NonNull
    protected Result onRunJob(Params params) {
        //
        // run your job here
        //
        //
        return Result.SUCCESS;
    }

    public static void scheduleJob() {
        new JobRequest.Builder(MySyncJob.TAG)
                .setExecutionWindow(30_000L, 40_000L) //Every 30 seconds for 40 seconds
                .build()
                .schedule();
    }
} 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2013-06-04T22:02:11.410

您应该使用警报管理器安排您的服务，首先创建待处理的服务意图：

```
Intent ii = new Intent(getApplicationContext(), MyService.class);
PendingIntent pii = PendingIntent.getService(getApplicationContext(), 2222, ii,
PendingIntent.FLAG_CANCEL_CURRENT); 
```

然后使用警报管理器安排它：

```
//getting current time and add 5 seconds to it
Calendar cal = Calendar.getInstance();
cal.add(Calendar.SECOND, 5);
//registering our pending intent with alarmmanager
AlarmManager am = (AlarmManager) getSystemService(ALARM_SERVICE);
am.set(AlarmManager.RTC_WAKEUP,cal.getTimeInMillis(), pi); 
```

这将在当前时间 5 秒后启动您的服务。你可以让你的闹钟重复。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-02T19:58:52.353

您可以使用[警报管理器](http://developer.android.com/reference/android/app/AlarmManager.html)在指定时间启动服务，然后在指定时间间隔重复警报。当警报响起时，您可以启动服务并连接到服务器并制作您想要的东西

# c# - 如何实现可以返回类或可为空结构的通用集合查找方法？

> ID：10420364
> 
> 赞同：6
> 
> 时间：2012-05-02T19:28:20.780
> 
> 标签：c#, generics

我想要一个用于异构集合的类型化查找帮助器函数：它应该返回一个结构或类，如果未找到该项目，则返回 null。下面是一个使用普通集合查找的示例，但它可能是数据库调用或其他。

有没有办法用一个方法签名来实现这一点？

```
 public T GetClass<T>(string key)  where T : class
    {
        object o;
        if (Contents.TryGetValue(key, out o))
        {
            return o as T;
        }
        return null;
    }

    public T? GetStruct<T>(string key) where T : struct
    {
        object o;
        if (Contents.TryGetValue(key, out o))
        {
            if (o is T)
            {
                return (T?) o;
            }
        }
        return null;
    } 
```

我已经尝试过的：

*   我了解通用限制不能用于消除重载的歧义。所以我不能简单地给这两种方法取同名。
*   不能返回`(Default) T`，因为 0 是有效的 int 值。
*   我尝试过调用 with`<int ?>`作为类型，但正如所讨论的那样，`Nullable<T>`它不是引用类型。

有什么方法可以表明我要返回一个装箱的 int 吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-02T19:31:30.380

> 有没有办法用一个方法签名来实现这一点？

使用可选参数有一种[*可怕*](http://msmvps.com/blogs/jon_skeet/archive/2010/11/02/evil-code-overload-resolution-workaround.aspx)（非常可怕）的方法，这样调用代码在两种情况下看起来都一样。不过这很恶心。

选项：

*   返回 a`Tuple<T, bool>`而不是使用 nullity
*   使用`out`参数（如`int.TryParse`等）
*   使用不同的方法名

请注意，通过单独表示不存在值，您可以`null`生成有效的“找到”结果，这有时很有用。或者您*可能*只想保证它永远不会被退回。

如果你真的想使用 nullity，我会选择最后一个选项。我相信无论如何它会让你的代码更清晰。IMO，只有在方法执行使用不同参数表达的*完全相同*的事情时，才应该真正使用重载——而`Nullable<T>`在一种情况下`T`作为返回类型返回，在另一种情况下作为返回类型返回，实际上不能这样看。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-02T19:32:00.310

以下方法适用于类和可为空的结构：

```
public static T GetValue<T>(string key)
{
    object o;
    if (Contents.TryGetValue(key, out o))
    {
        if (o is T)
        {
            return (T)o;
        }
    }
    return default(T);
} 
```

*用法：*

```
int?   result1 = GetValue<int?>("someInt");
string result2 = GetValue<string>("someString"); 
```

注意它`?`是泛型类型参数的一部分，而不是由返回类型的方法定义。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-02T21:18:29.923

这应该完全符合您的需要。如果请求的类型是可为空的类型，请在强制转换之前检查基础类型。

```
public static T GetValue<T>(string key)
{
    object o;
    if (Contents.TryGetValue(key, out o))
    {
        if (o is T || Nullable.GetUnderlyingType(typeof(T)) == o.GetType())
        {
            return (T)o;
        }
    }

    return default(T);
} 
```

我的测试代码：

```
Contents.Add("a string", "string value");
Contents.Add("an integer", 1);
Contents.Add("a nullable integer", new Nullable<int>(2));

// Get objects as the type we originally used.
Debug.WriteLine(string.Format("GetValue<string>(\"a string\") = {0}", GetValue<string>("a string")));
Debug.WriteLine(string.Format("GetValue<int>(\"an integer\") = {0}", GetValue<int>("an integer")));
Debug.WriteLine(string.Format("GetValue<int?>(\"a nullable integer\") = {0}", GetValue<int?>("a nullable integer")));

// Get objects as base class object.
Debug.WriteLine(string.Format("GetValue<object>(\"a string\") = {0}", GetValue<object>("a string")));
Debug.WriteLine(string.Format("GetValue<object>(\"an integer\") = {0}", GetValue<object>("an integer")));
Debug.WriteLine(string.Format("GetValue<object>(\"a nullable integer\") = {0}", GetValue<object>("a nullable integer")));

// Get the ints as the other type.
Debug.WriteLine(string.Format("GetValue<int?>(\"an integer\") = {0}", GetValue<int?>("an integer")));
Debug.WriteLine(string.Format("GetValue<int>(\"a nullable integer\") = {0}", GetValue<int>("a nullable integer")));

// Attempt to get as a struct that it's not, should return default value.
Debug.WriteLine(string.Format("GetValue<double>(\"a string\") = {0}", GetValue<double>("a string")));

// Attempt to get as a nullable struct that it's not, or as a class that it's not, should return null.
Debug.WriteLine(string.Format("GetValue<double?>(\"a string\") = {0}", GetValue<double?>("a string")));
Debug.WriteLine(string.Format("GetValue<StringBuilder>(\"a string\") = {0}", GetValue<StringBuilder>("a string"))); 
```

结果：

```
GetValue<string>("a string") = string value
GetValue<int>("an integer") = 1
GetValue<int?>("a nullable integer") = 2

GetValue<object>("a string") = string value
GetValue<object>("an integer") = 1
GetValue<object>("a nullable integer") = 2

GetValue<int?>("an integer") = 1
GetValue<int>("a nullable integer") = 2

GetValue<double>("a string") = 0

GetValue<double?>("a string") = 
GetValue<StringBuilder>("a string") = 
```

# sql - 我可以在 Oracle 中为 varchar2 传递一个数字吗？

> ID：10420376
> 
> 赞同：5
> 
> 时间：2012-05-02T19:29:18.867
> 
> 标签：sql, oracle, ora-01722

我有一个 Oracle 表和一个列 ( `col1`) 具有类型`varchar2(12 byte)`。它有一行，`col1`值为`1234`

当我说

```
select * from table where col1 = 1234 
```

甲骨文说无效号码。这是为什么？为什么我不能传递一个数字`varchar2`？

编辑：所有的反应都很棒。谢谢你。但我无法理解为什么它不需要`1234`when`1234`是有效的 varchar2 数据类型。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-02T22:10:09.333

问题是您希望 Oracle 会隐式地将 1234 转换为字符类型。相反，Oracle 隐式将该列转换为一个数字。列中存在非数字值，因此 Oracle 会抛出错误。[Oracle 文档](http://docs.oracle.com/cd/B14117_01/server.101/b10759/sql_elements002.htm)在解释如何解决隐式转换之前警告不要隐式转换。解释您所看到的行为的规则是：

> 在将字符值与数值进行比较时，Oracle 会将字符数据转换为数值。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-02T19:39:22.697

哦，转换为 char 比转换为数字要好得多：

```
select *
from table
where col1 = to_char(1234) 
```

当 col1 看起来不像数字时，to_number 返回错误，停止查询。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-05-03T05:19:19.200

> 甲骨文说无效号码。这是为什么？为什么当它是 varchar2 时我不能传递一个数字？

Oracle 执行从字符类型到数字的隐式转换`col1`，因为您将其作为数字进行比较。

此外，您假设这`1234`是*唯一*被提取的行。实际上，Oracle 必须从表中获取所有行，然后根据`where`子句过滤掉。现在有一个字符值在`col1`遇到您的行之前被提取，这会`1234`导致错误，因为该字符无法转换为数字。

[这个小提琴](http://sqlfiddle.com/#!4/ded06/1)显示了这种行为。由于`abc`无法转换为数字，因此您会收到该错误消息

* * *

现在，如果表中*唯一*的记录是 col1 包含数字字符的记录，您会看到该[语句可以正常工作](http://sqlfiddle.com/#!4/ded06/4)

# vba - 带有VBA的`Select`语句的`Case`的目的是什么？

> ID：10420378
> 
> 赞同：2
> 
> 时间：2012-05-02T19:29:22.980
> 
> 标签：vba, syntax

VBA 有一个`Select`语句，可以根据值选择要运行的代码（很像`switch`C 风格的语言）。此语句的语法如下所示：

```
Select Case x
    Case 1
        'do one thing
    Case 2
        'do a different thing
End Select 
```

`Case`右后的目的是什么`Select`？`Select`或者，没有的含义是`Case`什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-02T20:52:02.673

There is no such thing as a `Select` statement in VBA. There is a [`Select Case` statement](http://msdn.microsoft.com/en-us/library/office/gg278665%28v=office.14%29.aspx).

Therefore, strictly speaking, the answers to your questions are: There is none, and there is none.

It's a bit like asking what is the meaning of `Pri` without `nt` and vice-versa... There is no particularly exciting answer to that question.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-02T19:42:26.057

这只是`Select Case`VBA中语句的语法要求：[Select Case Statement](http://msdn.microsoft.com/en-us/library/gg278665.aspx)

`Select`没有`Case`会导致编译错误。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-02T21:16:31.670

如果没有各种`Case`语句，VBA 编译器将无法区分您希望针对每种情况执行的代码。

想象一下没有 case 语句的代码：

```
Select Case x

     'do one thing

     'do a different thing
End Select 
```

你怎么知道什么时候做哪件事？

您可以使用 If 语句执行与 Select Case 语句相同的操作

```
If x Then
     'do one thing
ElseIf x Then
     'do a different thing
End If 
```

如果我们去掉 If 语句会怎样？它不会按照你想要的方式工作。

**正如其他人所说，Case 语句只是 VBA 的必要部分。**

下面的链接很好地概述了 Select Case 语句以及一些示例：[Select Case](http://msdn.microsoft.com/en-us/library/cy37t14y%28v=vs.80%29.aspx)

# xml - Web-Harvest 通过表列标题确定数据类型

> ID：10420379
> 
> 赞同：1
> 
> 时间：2012-05-02T19:29:26.020
> 
> 标签：xml, html-parsing, xquery, webharvest

我正在使用 Web-Harvest 进行一些网页“抓取”。我有一个需要组织的值表。表非常简单。但是，我需要使用表的列标题来确定每列的数据类型。桌子看起来像这样......

```
<table>
  <tr class="header">
    <td>Name</td>
    <td>Age</td>
    <td>Gender</td>
  </tr>
  <tr>
    <td>Bill</td>
    <td>25</td>
    <td>M</td>
  </tr>
  <tr>
    <td>Emily</td>
    <td>31</td>
    <td>F</td>
  </tr>
</table> 
```

我正在使用 XQuery，如 Web-Harvest 示例中所示，并且我知道如何通过索引以及使用属性（类、id 等）获取值，但在这种情况下，我不确定如何确定第 1 列是名称，第 2 列是年龄，等等...我想以这种形式输出 XML...

```
<person>
  <name>Bill</name>
  <age>25</age>
  <gender>M</gender>
</person>
<person>
  <name>Emily</name>
  <age>31</age>
  <gender>F</gender>
</person> 
```

我从另一篇文章中看到了这段代码片段，但我不确定它是如何工作的。

```
//tr[td[.="Jim"]]/td[count(ancestor::table/thead/tr/th[.="Credit"]/preceding-sibling::*)+1] 
```

看起来每行都引用了祖先（父级？）来查找相应的列标题。除此之外，我迷路了。任何其他信息都会非常有帮助。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T03:14:57.610

**这个 XQuery 表达式**：

```
 <persons>
   {
   let $names := /*/tr[1]/td
     return
         for $tr in /*/tr[position() ge 2]
           return
             <person>
               { for $i in 1 to count($tr/td)
                   return
                     element {$names[$i]} {$tr/td[$i]}
               }
            </person>
     }
   </persons> 
```

**应用于提供的 XML 文档时**：

```
<table>
  <tr class="header">
    <td>Name</td>
    <td>Age</td>
    <td>Gender</td>
  </tr>
  <tr>
    <td>Bill</td>
    <td>25</td>
    <td>M</td>
  </tr>
  <tr>
    <td>Emily</td>
    <td>31</td>
    <td>F</td>
  </tr>
</table> 
```

**产生想要的正确结果**：

```
<persons>
   <person>
      <Name>
         <td>Bill</td>
      </Name>
      <Age>
         <td>25</td>
      </Age>
      <Gender>
         <td>M</td>
      </Gender>
   </person>
   <person>
      <Name>
         <td>Emily</td>
      </Name>
      <Age>
         <td>31</td>
      </Age>
      <Gender>
         <td>F</td>
      </Gender>
   </person>
</persons> 
```

# c++ - C++ zip 可变参数模板

> ID：10420380
> 
> 赞同：9
> 
> 时间：2012-05-02T19:29:33.197
> 
> 标签：c++, iterator, c++11, tuples, variadic-templates

这是 C++ 中一个简单的双容器 zip 函数：

```
template <typename A, typename B>
std::list<std::pair<A, B> > simple_zip(const std::list<A> & lhs,
                                       const std::list<B> & rhs)
{
  std::list<std::pair<A, B> >  result;
  for (std::pair<typename std::list<A>::const_iterator,
                 typename std::list<B>::const_iterator> iter
       =
       std::pair<typename std::list<A>::const_iterator,
                 typename std::list<B>::const_iterator>(lhs.cbegin(),
                                                        rhs.cbegin());
       iter.first != lhs.end() && iter.second != rhs.end();
       ++iter.first, ++iter.second)
  {
    result.push_back( std::pair<A, B>(*iter.first, *iter.second) );
  }
  return result;
} 
```

我如何将其扩展到具有可变参数模板的任意数量的容器？

我想`general_zip`接受 a `tuple`of `list`s（每个列表可以包含不同的类型）并返回 a `list`of `tuple`s。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-05-02T21:40:32.480

看起来这应该有效

```
std::list<std::tuple<>> simple_zip() {
  return {};
}

template <typename ...T>
std::list<std::tuple<T...>> simple_zip(std::list<T>... lst)
{
  std::list<std::tuple<T...>>  result;
  for (int i = 0, e = std::min({lst.size()...}); i != e; i++) {
    result.emplace_back(std::move(lst.front())...);
    [](...){} ((lst.pop_front(), 0)...);
  }
  return result;
} 
```

* * *

@Potatoswatter 有一个好的（IMO）评论，当列表大小不同时，这可能会复制比需要的更多，并且仅使用迭代器会更好，因为 pop_front 所做的比实际需要的要多。我认为以下以更多代码为代价“修复”了迭代器之一。

```
template <typename ...T>
std::list<std::tuple<T...>> simple_zip(std::list<T>... lst)
{
  std::list<std::tuple<T...>>  result;
  struct {
    void operator()(std::list<std::tuple<T...>> &t, int c,
             typename std::list<T>::iterator ...it) {
      if(c == 0) return;
      t.emplace_back(std::move(*it++)...);
      (*this)(t, c-1, it...);
    }
  } zip;
  zip(result, std::min({lst.size()...}), lst.begin()...);
  return result;
}

std::list<std::tuple<>> simple_zip() {
  return {};
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-06T14:06:14.510

这是对 Johannes 的第一个答案的增量改进。它避免了虚拟`struct`并避免复制整个输入列表（尽管这无关紧要，除非一个列表比其他列表短）。我也让它在所有容器上通用。

但它需要一个样板包索引生成器，无论如何这非常有用

```
template< std::size_t n, typename ... acc >
struct make_index_tuple {
    typedef typename make_index_tuple<
        n - 1,
        std::integral_constant< std::size_t, n - 1 >, acc ...
    >::type type;
};

template< typename ... acc >
struct make_index_tuple< 0, acc ... >
    { typedef std::tuple< acc ... > type; }; 
```

“真正的”实现由一个需要上述实用程序输出的简单函数和一个将包映射到元组的接口函数组成。

```
template< typename ret_t, std::size_t ... indexes, typename lst_tuple >
ret_t simple_zip( std::tuple< std::integral_constant< std::size_t, indexes > ... >,
    lst_tuple const &lst ) {
    ret_t ret;

    auto iters = std::make_tuple( std::get< indexes >( lst ).begin() ... );
    auto ends = std::make_tuple( std::get< indexes >( lst ).end() ... );

    while ( std::max< bool >({ std::get< indexes >( iters )
                            == std::get< indexes >( ends ) ... }) == false ) {
        ret.emplace_back( * std::get< indexes >( iters ) ++ ... );
    }
    return ret;
}

template< typename ... T >
std::list< std::tuple< typename T::value_type ... > >
simple_zip( T const & ... lst ) {
    return simple_zip
        < std::list< std::tuple< typename T::value_type ... > > > (
        typename make_index_tuple< sizeof ... lst >::type(),
        std::tie( lst ... )
    );
} 
```

至少，这让 Johannes 看起来很容易的事情变得清晰起来。这是大多数可变参数模板算法的样子，因为没有 就无法存储类型可变参数状态`tuple`，并且没有一组索引或元递归函数就无法处理可变参数元组。（编辑：啊，现在 Johannes 使用了一个尾递归本地函数来定义本地包来完成所有这些，完全没有`tuple`。太棒了……如果你能处理所有的函数式编程；v）。）

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-09-29T14:00:45.213

另一个版本：Johannes 和 Potatoswatter 的混合回答，尽量减少欺骗的数量（不过我很喜欢！）

```
template <typename C, typename... Its>
void simple_zip_details(C& c, size_t size, Its... its)
{
   for (int i = 0; i < size; i++)
      c.emplace_back(std::move(*its++)...);
}

template <typename... Ts>
std::list<std::tuple<Ts...>> simple_zip(std::list<Ts>... lst)
{
   std::list<std::tuple<Ts...>>  result;
   size_t size = std::min({ lst.size()... });
   simple_zip_details(result, size, lst.begin()...);
   return result;
} 
```

# asp.net - ASP.NET 使用 updatepanel 时应该刷新页面吗？

> ID：10420383
> 
> 赞同：1
> 
> 时间：2012-05-02T19:29:46.517
> 
> 标签：asp.net, ajax, updatepanel

我有两个列表框和一个左右按钮......它们包含在更新面板中。唯一的问题是单击左或右按钮时，页面会刷新，这是不需要的。

```
<asp:UpdatePanel runat="server" ID="ExportUpdatePanel">
<ContentTemplate>
    <div class="exportWrapper">
    <table class="exportFilter">
        <tr>
            <td>
                <h2>
                    <%= ExportSelectDateLabel %></h2>
            </td>
        </tr>
        <tr>
            <td>
                <label>
                    <%= ExportFromDateLabel %></label>
                <asp:TextBox runat="server" ID="exportFilterFromDate" CssClass="exportDates"></asp:TextBox>
            </td>
        </tr>
        <tr>
            <td>
                <label>
                    <%= ExportToDateLabel %></label>
                <asp:TextBox runat="server" ID="exportFilterToDate" CssClass="exportDates"></asp:TextBox>
            </td>
        </tr>
    </table>
    <table class="exportFilter">
        <tr>
            <td colspan="3">
                <h2>
                    <%= ExportSelectColumnsLabel %></h2>
            </td>
        </tr>
        <tr>
            <td>
                <label>
                    <%= ExportAvailableColumnLabel %></label>
            </td>
            <td>
            </td>
            <td>
                <label>
                    <%= ExportSelectedColumnLabel %></label>
            </td>
        </tr>
        <tr>
            <td>
                <asp:ListBox runat="server" ID="exportFilterAvailableColumns" SelectionMode="Multiple" CssClass="exportListBox">
                </asp:ListBox>
            </td>
            <td class="exportButtonsTd">
                <div>
                    <asp:LinkButton runat="server" OnClick="MoveSelectedClick"><span><img src="/images/source/arrow-right.png" alt="Move Right"/></span></asp:LinkButton>
                </div>
                <div class="mt_10">
                    <asp:LinkButton runat="server" OnClick="RemoveSelectedClick"><span><img src="/images/source/arrow-left.png" alt="Move Left"/></span></asp:LinkButton>
                </div>
            </td>
            <td id="exportedSelectedColumn">
                <asp:ListBox runat="server" ID="exportFilterSelectedColumns" SelectionMode="Multiple" CssClass="exportListBox">
                </asp:ListBox>
            </td>
        </tr>
    </table>
</div>
</ContentTemplate>
</asp:UpdatePanel> 
```

有任何想法吗 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T20:00:10.257

根据您的代码，当您单击 UpdatePanel 中的链接按钮时，ExportUpdatePanel 部分将刷新。它不是整页刷新。更新面板的默认更新模式始终为。这意味着：UpdatePanel 控件的内容会在来自页面上任何位置的每个回发时更新。这包括来自其他 UpdatePanel 控件内的控件的异步回发和来自不在 UpdatePanel 控件内的控件的回发。

这是样本测试：

```
<asp:Label ID="Label1" runat="server" Text="Label"></asp:Label>
    <asp:UpdatePanel ID="UpdatePanel1" runat="server">
        <ContentTemplate>
            <asp:Button ID="Button1" runat="server" onclick="Button1_Click" Text="Button" />
            <asp:Label ID="Label2" runat="server" Text="Label"></asp:Label>
        </ContentTemplate>
</asp:UpdatePanel> 
```

在单击事件时，Label1 和 Label2 都会更新。

```
protected void Button1_Click(object sender, EventArgs e)
{
    Label1.Text = DateTime.Now.ToLongTimeString();
    Label2.Text = DateTime.Now.ToLongTimeString();
} 
```

但只有 Label2 会改变，因为它会被更新面板刷新。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T19:37:32.507

在使用更新面板之前，请阅读一些关于更新面板如何工作的文章。比如这个：[http ://www.asp.net/web-forms/tutorials/aspnet-ajax/understanding-asp-net-ajax-updatepanel-triggers](http://www.asp.net/web-forms/tutorials/aspnet-ajax/understanding-asp-net-ajax-updatepanel-triggers)

向您的更新面板添加`UpdateMode="Conditional"`和`ChildrenAsTriggers="true"`属性，它应该可以按您的意愿工作。

```
<asp:UpdatePanel runat="server"
    ID="ExportUpdatePanel"
    UpdateMode="Conditional"
    ChildrenAsTriggers="true"> 
```

# android - 在 android 设备上找不到文件但在 android Emulator 上找到

> ID：10420385
> 
> 赞同：0
> 
> 时间：2012-05-02T19:30:00.553
> 
> 标签：android

我正在开发一个应用程序，该应用程序将服务器的响应写入 xml 文件，在设备上创建并保存。在开发中，我可以看到并使用 DDMS 中的文件`/data/data/my.package/files/test.xml` 因为我正在尝试在真实设备上测试某些东西并且不想向服务器发出请求我想手动复制粘贴设备中的 test.xml （平板电脑），像这样： `root/created data folder/created data folder/created my.package folder/created files folder/put my test.xml here`。尝试了不同的选项将 test.xml 与 .apk 等放在同一位置。我仍然在设备上找不到文件。在代码中，我只是得到这样的文件：

```
context.openFileInput("test.xml"); // on the emulator works. 
```

应该往里看`data/data/my.package/test.xml`吗？如果是这样，如果我在 Android 设备中创建相同的路径，为什么在平板电脑上找不到该文件？

我希望我没有混淆，任何想法都会很棒。谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T22:21:40.687

你应该把它放在 /data/data/your.package/files/test.xml （注意`files`部分）

# drupal - Drupal 7 theme_hook_suggestions 不起作用

> ID：10420388
> 
> 赞同：1
> 
> 时间：2012-05-02T19:30:32.260
> 
> 标签：drupal, drupal-7, drupal-views

如何为一个视图显示覆盖添加 2？

这是我的有效代码：

```
function yourthemename_preprocess_html(&$vars) {
  if (arg(0) == 'qrule') {        
    $vars['theme_hook_suggestions'][] = 'html__qrule';        
  }
} 
```

HTML模板页面调用：`html--qrule.tpl.php`

这很好用！（感谢@Ionut.A）

但我也想`page.tpl.php`用`page--qrule.tpl.php`但是当我添加这个时覆盖它：

```
function mythemename_preprocess_html(&$vars) {
  if (arg(0) == 'qrule') {        
    $vars['theme_hook_suggestions'][] = 'html__qrule'; 
    $vars['theme_hook_suggestions'][] = 'page__qrule';    
  }
} 
```

PAGE模板页面调用：`page--qrule.tpl.php`

我收到此错误：

```
Fatal error: Only variables can be passed by reference in /var/www/vhosts/xxx/public_html/sites/all/themes/themename/page--qrule.tpl.php on line 1 
```

谁能看到我在这里做错了什么？

谢谢 C

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-02T21:11:30.807

如果您要为 page.tpl.php 文件添加主题挂钩建议，则需要在以下位置添加`hook_preprocess_page()`：

```
function mythemename_preprocess_page(&$vars) {
  $vars['theme_hook_suggestions'][] = 'page__qrule';
} 
```

# c - 选择无限期地等待

> ID：10420395
> 
> 赞同：1
> 
> 时间：2012-05-02T19:31:00.107
> 
> 标签：c, linux, sockets, select

在尝试 select() 时，我得到了一个奇怪的结果。

```
fd_set tempset,set; //set of descriptors

FD_ZERO(&set); //initialize descriptor set to NULL

FD_SET(serversock,&set); //add server's socket to descriptor set 'set'

timeout.tv_sec=2;
timeout.tv_usec=0;

while(1){

tempset=set;
timeout.tv_sec=2;
timeout.tv_usec=0;

printf("%s","Waiting on select\n");

int ret=select(FD_SETSIZE,&tempset,NULL,NULL,&timeout);

if(ret==0) printf("timeout ");

else if(ret==-1){
    printf("Error occured\n");
    exit(0);
}

else if(ret>0){ //socket ready for reading

    for(i=0;i<FD_SETSIZE;i++){

    if(FD_ISSET(i,&tempset)){ //check if it's serversock

        if(i==serversock){
              //accept connection and read/write
              printf("Client connected\n");

    }//i==serversock close

    }
}//for ends 
} 
```

当我删除行 printf("%s","Waiting on select\n"); 选择无限期地等待。但是，当我重新插入线路时，一切都按预期工作（通过客户端连接测试）

我错过了什么吗？

提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-02T21:47:38.803

您正在滥用`FD_SETSIZE`，您根本不应该直接使用它。您只是将一个套接字放入 中`fd_set`，因此根本不需要循环遍历它（但如果确实需要，请改用该`fd_set.fd_count`成员）。

尝试这个：

```
fd_set set;
timeval timeout;

while(1){ 
    FD_ZERO(&set);
    FD_SET(serversock, &set);

    timeout.tv_sec = 2; 
    timeout.tv_usec = 0; 

    printf("%s","Waiting on select\n"); 

    int ret = select(serversock+1, &set, NULL, NULL, &timeout); 

    if (ret==0){
        printf("timeout "); 
    }

    else if (ret==-1){ 
        printf("Error occured\n"); 
        exit(0); 
    } 

    else if (ret>0){ //socket ready for reading 
        ... = accept(serversock, ...);
        printf("Client connected\n"); 
    }
} 
```

或者：

```
fd_set set;
timeval timeout;
int max_fd = 0;

while(1){ 
    FD_ZERO(&set);

    FD_SET(serversock, &set);
    max_fd = serversock;

    // FD_SET() other sockets and updating max_fd as needed...

    timeout.tv_sec = 2; 
    timeout.tv_usec = 0; 

    printf("%s","Waiting on select\n"); 

    int ret = select(max_fd+1, &set, NULL, NULL, &timeout); 

    if (ret==0){
        printf("timeout "); 
    }

    else if (ret==-1){ 
        printf("Error occured\n"); 
        exit(0); 
    } 

    else if (ret>0){ //socket(s) ready for reading 
        for (u_int i = 0; i < set.fd_count; ++i){
            ... = accept(set.fd_array[i], ...);
            printf("Client connected\n"); 
        }
    }
} 
```

# algorithm - 使用 N 路 Merge 的时间复杂度

> ID：10420397
> 
> 赞同：4
> 
> 时间：2012-05-02T19:31:15.490
> 
> 标签：algorithm, complexity-theory

我正在研究 2 路合并排序算法，并在思考是否通过减少合并通道可以在时间方面获得更好的收益。

例如，在 2 路合并中，我们有以下重复：

T(n) = 2T(n/2) + O(n)

这具有 N.log-base2(N) 的时间复杂度

如果我将问题除以 4 并合并 4 个子数组，我将得到

T(n) = 4T(n/4) + O(n)

这应该具有 N.log-base4(N) 的时间复杂度

由于合并通道的数量减少了，在实现合并排序时是否应该考虑这一点？

例如，对于 64 个元素的数组，第一种方法将有 6 次通过，而使用第二种方法将有 3 次通过。

编辑：

好的，所以使用 2T(n/2) 我们每次通过进行 N 次比较，而使用 4T(n/4) 我们最终每次通过进行 3*N 比较？将元素移动到结果数组的成本如何，每次通过时都保持不变吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-02T19:40:54.113

请注意，数字的以 4 为底的对数恰好是数字的以 2 为底的对数的一半；因此，您只是引入了恒定因子加速。除非你不是，因为你在实际合并的成本中引入了一个类似的常数因子 SLOWDOWN（2 路合并需要每个项目 1 次比较，4 路可能需要多达 3 次）。因此，尽管通行证可能较少，但通行证的成本更高。所以你已经把代码复杂化了一点，好处是有问题的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T19:43:30.760

这听起来很合理，但实际上并非如此，因为在这种情况下，您必须至少进行 5 次比较才能对每 4 个元素进行排序。这样你就有 5*N*log4(N) 比较，这比 N*log2(N) 大 5*log(2)/log(4)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-02T19:44:04.423

分解树的高度是 log [4] n，但运行时间不是 n log [4] n。

在第一步中，您有四个大小为 n/4 的列表，它们的合并需要 n/4 + n/4 + n/2 比较。但在正常情况下，它需要 n/2 比较，所以你是树高度的一半，但是你将每个合并乘以两个，所以总运行时间并不比除以 2 部分好。（您可以证明对于树的其他深度，与具有两个分支的树相比，您应该至少进行两次比较）。

* * *

*PS：运行时间是指比较次数。*

# java - 为什么此文本比较失败？

> ID：10420398
> 
> 赞同：0
> 
> 时间：2012-05-02T19:31:23.723
> 
> 标签：java, android, android-edittext, equals

我正在尝试获取`EditText`命名组件中的文本`textfield`，看看它是否等于“facebook”。但它不起作用，我无法终生找出原因。同样在 if 语句`my`中应该是图片的 ID。

```
public class Guess extends Activity {

    ImageView image;
    ImageView stat;
    Button okButton;
    EditText textfield;

    Integer my;

    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.guess);

        final Bundle bundle = this.getIntent().getExtras();
        int pic = bundle.getInt("myimage");
        final int resid = bundle.getInt("resourceID");

        my = pic;

        image = (ImageView) findViewById(R.id.imageView1);
        image.setImageResource(pic);
        image.setAdjustViewBounds(true);

        stat = (ImageView) findViewById(R.id.imageView2);
        stat.setImageResource(R.drawable.incorrect);

        okButton = (Button) findViewById(R.id.button1);
        okButton.setOnClickListener(new View.OnClickListener() {
            public void onClick(View v) {
                // TODO Auto-generated method stub

                textfield = (EditText) findViewById(R.id.editText1);
                if("2130837510".equals(my.toString()) && "facebook".equals(textfield.getText()));
                {
                    stat.setImageResource(R.drawable.correct);
                }
            }
        });
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-02T19:34:42.577

textfield.getText() 返回可编辑而不是字符串。为了使它工作，使用 textfield.getText().toString() 传递实际的 String 对象。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T19:52:20.063

您的 if 语句末尾有一个分号

```
if(1 == 2);
{
    System.out.println("passed");
} 
```

所以下面的代码无论如何都会执行。

# objective-c - ItemsViewController.m 中的重复问题

> ID：10420399
> 
> 赞同：0
> 
> 时间：2012-05-02T19:31:27.713
> 
> 标签：objective-c

即使我没有更改相关方法中的任何内容，我也会在 ItemsViewController.m 中遇到重复的问题。之前我在 SO 上问过一些问题，然后更正了它们，但它们又出现了。没有对再次引起大惊小怪的方法/领域进行任何更改。已注释掉问题区域。

会不会有编译器问题？

这是文件；提前致谢。

项目视图控制器.m

```
#import "ItemsViewController.h"
#import "BNRItemStore.h"
#import "BNRItem.h"

@implementation ItemsViewController //@end is missing in implementation context

- (id)init 
{
  // Call the superclass's designated initializer
  self = [super initWithStyle:UITableViewStyleGrouped];
  if (self) {
    UINavigationItem *n = [self navigationItem];

    [n setTitle:@"Homepwner"];

    // Create a new bar button item that will send
    // addNewItem: to ItemsViewController
    UIBarButtonItem *bbi = [[UIBarButtonItem alloc] 
                            initWithBarButtonSystemItem:UIBarButtonSystemItemAdd 
                            target:self 
                            action:@selector(addNewItem:)];

    // Set this bar button item as the right item in the navigationItem
    [[self navigationItem] setRightBarButtonItem:bbi];

    [[self navigationItem] setLeftBarButtonItem:[self editButtonItem]];
  }
  return self;
}

- (IBAction)addNewItem:(id)sender
{
  // Create a new BNRItem and add it to the store
  BNRItem *newItem = [[BNRItemStore defaultStore] createItem];

  DetailViewController *detailViewController = [[DetailViewController alloc]initForNewItem:YES];

  [detailViewController setItem:newItem];

  [detailViewController setDismissBlock:^{[[self tableView]reloadData];

  UINavigationController *navController = [[UINavigationController alloc]initWithRootViewController:detailViewController];

  [navController setModalPresentationStyle:UIModalPresentationFormSheet];

  [self presentViewController:navController animated:YES completion:nil];

  }

- (id)initWithStyle:(UITableViewStyle)style //use of undeclared identifier 'initWithStyle'
{
  return [self init];
}

- (void)viewWillAppear:(BOOL)animated
{
  [super viewWillAppear:animated];
  [[self tableView] reloadData];
}

- (void)tableView:(UITableView *)tableView 
moveRowAtIndexPath:(NSIndexPath *)fromIndexPath 
      toIndexPath:(NSIndexPath *)toIndexPath 
{
  [[BNRItemStore defaultStore] moveItemAtIndex:[fromIndexPath row] 
                                       toIndex:[toIndexPath row]];
}

- (void)tableView:(UITableView *)aTableView 
didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
  DetailViewController *detailViewController = [[DetailViewController alloc] initForNewItem:NO];

  NSArray *items = [[BNRItemStore defaultStore] allItems];
  BNRItem *selectedItem = [items objectAtIndex:[indexPath row]];

  // Give detail view controller a pointer to the item object in row
  [detailViewController setItem:selectedItem];

  // Push it onto the top of the navigation controller's stack
  [[self navigationController] pushViewController:detailViewController
                                         animated:YES];
}

-(BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)io
{
  if ([[UIDevice currentDevice]userInterfaceIdiom]==UIUserInterfaceIdiomPad) {
    return YES;
  } else {
    return (io==UIInterfaceOrientationPortrait);
  }
}

- (void)tableView:(UITableView *)tableView 
commitEditingStyle:(UITableViewCellEditingStyle)editingStyle 
forRowAtIndexPath:(NSIndexPath *)indexPath 
{
  // If the table view is asking to commit a delete command...
  if (editingStyle == UITableViewCellEditingStyleDelete)
  {
    BNRItemStore *ps = [BNRItemStore defaultStore];
    NSArray *items = [ps allItems];
    BNRItem *p = [items objectAtIndex:[indexPath row]];
    [ps removeItem:p];

    // We also remove that row from the table view with an animation
    [tableView deleteRowsAtIndexPaths:[NSArray arrayWithObject:indexPath]
                     withRowAnimation:UITableViewRowAnimationFade];
  }
}

- (NSInteger)tableView:(UITableView *)tableView
 numberOfRowsInSection:(NSInteger)section
{
  return [[[BNRItemStore defaultStore] allItems] count];
}
- (UITableViewCell *)tableView:(UITableView *)tableView
         cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
  // Create an instance of UITableViewCell, with default appearance
  // Check for a reusable cell first, use that if it exists
  UITableViewCell *cell =
  [tableView dequeueReusableCellWithIdentifier:@"UITableViewCell"];

  // If there is no reusable cell of this type, create a new one
  if (!cell) {
    cell = [[UITableViewCell alloc]
            initWithStyle:UITableViewCellStyleDefault
            reuseIdentifier:@"UITableViewCell"];
  }
  // Set the text on the cell with the description of the item
  // that is at the nth index of items, where n = row this cell
  // will appear in on the tableview
  BNRItem *p = [[[BNRItemStore defaultStore] allItems]
                objectAtIndex:[indexPath row]];
  [[cell textLabel] setText:[p description]];
  return cell;
}

@end // expected '}' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T19:37:44.403

此行似乎缺少块的结尾：

```
[detailViewController setDismissBlock:^{[[self tableView]reloadData]; 
```

应该：

```
[detailViewController setDismissBlock:^{[[self tableView]reloadData]}]; 
```

# php - PHP 每隔一个星期三选择一次

> ID：10420401
> 
> 赞同：1
> 
> 时间：2012-05-02T19:31:30.453
> 
> 标签：php, date

我需要帮助 从 2012 年 5 月 2 日开始，每隔一个星期三选择一次。下面的代码从当前所在的那周开始每隔一个星期三选择一次。但我需要设置开始周。我熟悉 PHP，但不熟悉 php 日期。所以请尽可能具体。我找到了这个：

```
$number_of_dates = 10;

for ($i = 0; $i < $number_of_dates; $i++) {
   echo date('m-d-Y', strtotime('Wednesday +' . ($i * 2) . ' weeks')). "<br>".PHP_EOL;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-02T19:37:59.257

用于[`mktime`](http://www.php.net/manual/en/function.mktime.php)创建您的开始日期并将其作为第二个参数传递给，[`strtotime`](http://www.php.net/manual/en/function.strtotime.php)以便从那里开始计数：

```
$startDate = mktime(0, 0, 0, 5, 2, 2012); // May 2, 2012
for ($i = 0; $i < $number_of_dates; $i++) {
   $date = strtotime('Wednesday +' . ($i * 2) . ' weeks', $startDate);
   echo date('m-d-Y', $date). "<br>".PHP_EOL;
} 
```

[**看到它在行动**](http://ideone.com/e39Qq)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T19:44:51.770

在字符串中给它一个日期，而不是“星期三”（选择下一个星期三），写：

`strtotime('20120502 +' . ($i * 2) . ' weeks'))`

选择那个日期。（格式为 yyyymmdd）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-02T20:31:14.070

如果您有 PHP 5.2.0 或更新版本，您可以通过以下方式轻松完成：

```
$date = new DateTime('2006-05-02');
for ($i=0; $i<10; $i++) {
   echo $date->format('m-d-Y').'<br/>'.PHP_EOL;
   $date->modify('+1 week');
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-02T20:40:20.740

您还可以使用[`DatePeriod`](http://php.net/dateperiod)和[`DateInterval`](http://php.net/dateinterval)类来使生活更轻松。

^(标准免责声明：以上两个类*都需要*PHP >= 5.3.0。)

```
$number_of_dates = 10;

$start_date = new DateTime("5/2/12");
$interval   = DateInterval::createFromDateString("second wednesday");
$period     = new DatePeriod($start_date, $interval, $number_of_dates - 1);

foreach ($period as $date) {
    echo $date->format("m-d-Y") . "<br>" . PHP_EOL;
} 
```

# android - 带有图层的可绘制对象 - 仅调整其中一个的大小 - Android

> ID：10420406
> 
> 赞同：3
> 
> 时间：2012-05-02T19:31:45.083
> 
> 标签：android, position, drawable, scale, layer

我想将 2 个 Drawable 合并为一个，如我的模型所示：http: [//i.imgur.com/tOEiO.jpg](http://i.imgur.com/tOEiO.jpg)

我想将可绘制对象用作 TextView 对象的背景。我是这样尝试的：

```
 Drawable[] layers = new Drawable[2];
            layers[0] = new ColorDrawable(0xffff0000);
            layers[1] = resources.getDrawable(android.R.drawable.ic_btn_speak_now);
            LayerDrawable layerDrawable = new LayerDrawable(layers);
            setBackgroundDrawable(layerDrawable); 
```

不幸的是，使用该代码，第 1 层的 Drawable 被缩放到 TextView 对象的大小。

现在我的问题：

如何告诉 Dalvik 将第 1 层始终垂直居中并水平向右放置，而不是将其缩放到另一层的大小？（就像在我的模型中看到的那样）。

提前非常感谢！

# image - 在文本区域中上传图像

> ID：10420407
> 
> 赞同：1
> 
> 时间：2012-05-02T19:31:50.543
> 
> 标签：image, tinymce

我需要一个富文本区域，我们可以在其中插入来自本地文件系统的图像并将其上传到服务器（也是 S3 - 但它可以通过后台任务完成）。

我目前正在使用 tinymce，但它没有从本地文件系统插入图像的功能。

我可以用什么来获得这样的功能？

注意 - 我使用 PHP 作为后端。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T19:37:29.573

[CKeditor](http://ckeditor.com/ "CK编辑器")似乎相当不错。我前段时间用过它，它是从……你可能不得不购买 CKFinder（每个网站 59 美元……）

...然后有为此花费几乎相同的 TinyMCE 插件： [http ://www.tinymce.com/](http://www.tinymce.com/)

如果你正在寻找一个免费的 TinyMCE 或 CKEditor 插件，可以通过谷歌浏览 TinyMCE 和 iBrowser、TinyFCK、[Kae 的文件管理器](http://kfm.verens.com/ "Kae的文件管理器")、Ajax 文件管理器、 [TinyBrowser](http://www.lunarvis.com/products/tinymcefilebrowserwithupload.php "微型浏览器")来进行本地文件浏览。（我从[http://www.tyssendesign.com.au](http://articles/cms/file-and-image-management-plugins-for-tinymce/ "tyssendesign.com.au")获得了列表）。我会使用 Tiny Browser 或 Ke 的 Filemanager 并保留 TinyMCE，因为它已经存在（但请看一下 CKEditor - 它非常好，这两个文件管理器也可以插入它）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-03T08:24:20.083

你不是第一个遇到这个问题的人。[在这里](http://pascal.vanhecke.info/2005/08/25/image-upload-plugin-for-tinymce/)查看解决方案的简要概述。

# c - 用C程序写标题？

> ID：10420408
> 
> 赞同：3
> 
> 时间：2012-05-02T19:31:58.617
> 
> 标签：c, linux

为了在嵌入式设备上启动 Linux 内核，我必须用特殊的标头标记内核。用于标记内核的程序仅由设备制造商提供为 32 位二进制文​​件。这很烦人，因为我必须在我的 64 位系统上安装数百兆字节的库，只是为了用几个字节标记内核。这是内核的标记方式：

```
$./mkimage -f kernel.cfg -d zImage_without_header zImage 
```

内核.cfg：

```
##########################################################
#ENCINFO.CFG
# 
# information and command for encode the Linux zImage
##########################################################

# Magic number for the ImageHeader, use this to seach start of the Image Header
#
MAGIC_NUMBER 0x27051956

#operation system type
OS_TYPE  linux

#cpu architecture type
CPU_ARCH  arm

#image type
IMAGE_TYPE  kernel

#compress type
COMPRESS_TYPE   gzip

#
DATALOAD_ADDRESS   0x00008000

#
ENTRY_ADDRESS   0x00008000

#image name string
IMAGE_NAME   kernel.img 

#model name string
MODEL_NAME   DNS-313

# version string
VERSION  1.00b18

# mac address string
MAC_ADDRESS          FF-FF-FF-FF-FF-FF

#the beginning offset of writing header
START_OFFSET         0x00

#the end offset of writing header
END_OFFSET           0xFF

#whether overwrite
OVERWRITE            n 
```

mkimage 二进制文件与可从例如 Debian 存储库获得的 mkimage 不同，它不适用于我的设备。我试图创建一个 1MB 的文件并将其标记为显示标题：

```
$dd if=/dev/zero bs=1k count=1024 of=zImage_without_header
$./mkimage -f kernel.cfg -d zImage_without_header zImage 
```

最后一个命令的输出：

```
Magic Number:   27051956
Image Name:   kernel.img
Created:      Wed May  2 17:40:43 2012
Image Type:   ARM Linux Kernel Image (gzip compressed)
Data Size:    1048576 Bytes = 1024.00 kB = 1.00 MB
Load Address: 0x00008000
Entry Point:  0x00008000
Model Name:   DNS-313
Version   :   1.00b18
Mac Address:  ff:ff:ff:ff:ff:ff 
```

* * *

```
$hexdump -C zImage 
```

最后一个命令的输出：

```
00000000  27 05 19 56 [2c 83 53 d5] 4f a1 [55 7b 00 10 00 00] |'..V,.S.O.U{....|
00000010  00 00 80 00 00 00 80 00  [a7 38 ea 1c] 05 02 02 01  |.........8......|
00000020  6b 65 72 6e 65 6c 2e 69  6d 67 00 00 00 00 00 00  |kernel.img......|
00000030  00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00  |................|
00000040  44 4e 53 2d 33 31 33 00  00 00 00 00 00 00 00 00  |DNS-313.........|
00000050  31 2e 30 30 62 31 38 00  00 00 00 00 00 00 00 00  |1.00b18.........|
00000060  ff ff ff ff ff ff 00 00  00 00 00 00 00 00 00 00  |................|
00000070  00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00  |................|
*
00100060 
```

内核应该始终用上面的标题标记，因为我不需要更改任何内容。当文件大小发生变化时，括号**[]**中的值似乎会发生变化，但我不知道如何变化。

我认为同样的事情可以用一个小的 C 程序来完成，但我不确定从哪里开始以及如何开始？

欢迎任何建议或想法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T17:38:47.547

这可能是一个长镜头，但如果您无法访问“mkimage”源代码，您可以尝试使用 objdump 反汇编它并尝试找出发生了什么：

```
$ objdump -d ./mkimage 
```

# function - 是否有一个函数接受参数列表并将每个列表应用于给定函数？

> ID：10420410
> 
> 赞同：5
> 
> 时间：2012-05-02T19:32:05.183
> 
> 标签：function, clojure, arguments, composition

即，类似：

```
(defn dowith [f & arglists]
  (doseq [args arglists] (apply f args))) 
```

Clojure 中是否有类似的内置函数？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-02T19:39:55.180

我经常写这样的东西；它太短了，不值得包装：

```
(map #(apply myfun %) list-of-arglists) 
```

我`map`最常使用，所以我得到结果并保持懒惰。当然，如果您不想让它变得懒惰并且不想要结果，那么`doseq`也可以。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-02T19:35:59.003

不，没有内置函数可以做到这一点。

# java - ruby 中的 Java floatToRawIntBits/intBitsToFloat 或 doubleToRawLongBits/longBitsToDouble 等价物？

> ID：10420413
> 
> 赞同：1
> 
> 时间：2012-05-02T19:32:17.557
> 
> 标签：java, ruby, floating-point, double

ruby 中是否有 java floatToRawIntBits/intBitsToFloat（或 doubleToRawLongBits/longBitsToDouble）的等价物？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-02T20:21:51.087

虽然没有诸如`floatToRawIntBits`函数之类的简单替代方案，但您可以使用`Array#pack`and`String#unpack`来获取底层位：

```
bytes = [3.14].pack('D').each_byte.map { |byte| byte.ord.to_s(2) }
=> ["11111", "10000101", "11101011", "1010001", "10111000", "11110", "1001",
    "1000000"]

bytes.map { |byte| byte.to_i(2).chr }.join.unpack('D')
=> [3.14] 
```

这里发生的事情是您正在将一个数组（我们使用一个包含单个元素的数组，所以我们实际上只是将元素打包，即 3.14）打包成一个字符串，该字符串用一个 ASCII 字符表示每个字节。然后我们获取字符串的每个字节（它与每个字符相同，因为我们使用的是 ASCII 字符）并获取`String#ord`字符的 在 Ruby 1.9 中，字符是单个元素的字符串，并`String#ord`返回单个字符串的序号。使用`Integer#to_s`, with`2`作为参数，我们得到了序数的二进制表示，这是我们正在搜索的，我们浮点数的每个字节的单个位。

请注意，传递`'D'`to`Array#pack`意味着我们想要将数组元素表示为原生机器格式中的 double 的字节（我们得到的是字符串中的字符，但该方法的级别非常低，可以考虑字节）。在取回数字时传递相同的参数很重要`String#unpack`，因为字节只是字节：该方法对字节顺序或数据类型一无所知。

检查[Array#pack](http://www.ruby-doc.org/core-1.9.3/Array.html#method-i-pack)和[String#unpack](http://www.ruby-doc.org/core-1.9.3/String.html#method-i-unpack)的文档以获取更多信息（尤其是关于正确的字节顺序）。

**编辑：**您还可以获取字符串形式的基础位：

```
bytes = [3.14].pack('D').each_byte.
    map { |byte| ('0' * 7 + byte.ord.to_s(2))[-8,8] }
 => ["00011111", "10000101", "11101011", "01010001", "10111000", "00011110",
     "00001001", "01000000"] 

bits = bytes.join(' ')
=> "00011111 10000101 11101011 01010001 10111000 00011110 00001001 01000000"

bits.gsub(' ', '')
=> "0001111110000101111010110101000110111000000111100000100101000000"

bits.split(' ').map { |byte| byte.to_i(2).chr }.join.unpack('D')
=> [3.14] 
```

**编辑2：**如果您从文件中读取了一些字符串，您可以尝试：

```
# You'll probably read each_line from a file, and get a bunch of strings like:
from_file =  0001111110000101111010110101000110111000000111100000100101000000

# If you've no byte separator in your file, the trick is to scan the string
# for 8 digits groups, that is bytes:
bytes = from_file.scan(/\d{8}/)
=>["00011111", "10000101", "11101011", "01010001", "10111000", "00011110",
   "00001001", "01000000"]

# Then, we can go on unpacking:
bytes.map { |byte| byte.to_i(2).chr }.join.unpack('D')
=> [3.14] 
```

# ios - 如何从文件加载 UIImage 而不在 Monotouch 中缓存？

> ID：10420421
> 
> 赞同：4
> 
> 时间：2012-05-02T19:32:48.927
> 
> 标签：ios, uikit, xamarin.ios, uiimage

如果我看这里的讨论：http: [//monotouch.2284126.n4.nabble.com/UIImageView-td4303177.html](http://monotouch.2284126.n4.nabble.com/UIImageView-td4303177.html)

两者，`UIImage.FromFile()`并且`UIImage.FromFileUncached()`映射到`imageWithContentsOfFile:`并且不应该缓存，但是我的经验是不同的，我很确定 UIImage.FromFile() 缓存（从我在 Instruments 中看到的）。

此处的文档 (http://docs.xamarin.com/ios/tutorials/Working_with_Images) 声明`UIImage.FromBundle()`确实缓存，但`UIImage.FromFile()`没有。这仍然是真的吗？`FromFile()`或者如果图像在应用程序包中，是否有一些魔法可以缓存？

有人可以说明正确的方法是什么：

*   加载带有缓存的 UIImage？
*   加载没有缓存的 UIImage ？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-02T20:05:00.323

`UIImage.FromFile`并且`UIImage.FromFileUncached`是**相同**的。他们都调用同一个`imageWithContentsOfFile:`选择器。

Xamarin 的文档[`FromFileUncached`](http://docs.go-mono.com/?link=M:MonoTouch.UIKit.UIImage.FromFileUncached%28System.String%29)解释了为什么这样做。

> FromFile 的别名，只是用一个更明确的名称来引起对与 FromBundle 相比此调用的无缓存特性的注意。

从历史上看，这个选择器的原始 API 被命名为`FromFileUncached`，而旧 `FromFile`方法被映射到`imageNamed:`- 但事实证明这是一个错误，因为后来的选择器意味着来自捆绑包。

添加了一个新`FromBundle`方法，并且为了不破坏 API，`FromFile`与`FromFileUncached`.

我将向`[Obsolete]`该方法添加一个属性，`FromFileUncached`因为它会使它在 IDE 中更加明显，即无需阅读文档。

> 有人可以说明正确的方法是什么：

`FromFile[Uncached]`不缓存，`FromBundle`确实。

# grails - Spock 错误：找不到共享实例字段

> ID：10420424
> 
> 赞同：1
> 
> 时间：2012-05-02T19:32:56.733
> 
> 标签：grails, groovy, spock, geb

我刚刚克隆了示例项目[geb-grails-example](https://github.com/geb/geb-example-grails)并面临与 Spock 相关的错误。

运行 grails (2.0.3) 命令`test-app`时，出现以下错误：

```
| Server running. Browse to http://localhost:8080/geb-example-grails
| Server stopped
| Tests PASSED - view reports in target\test-reports
| Error Error running script test-app --stacktrace: cannot find shared instance field (NOTE:         Stack trace has been filtered. Use --verbose to see entire trace.)
org.spockframework.util.InternalSpockError: cannot find shared instance field
at org.spockframework.runtime.SpecInfoBuilder.getSharedInstanceField(SpecInfoBuilder.java:119)
at org.spockframework.runtime.SpecInfoBuilder.buildSharedInstanceField(SpecInfoBuilder.java:107)
at org.spockframework.runtime.SpecInfoBuilder.doBuild(SpecInfoBuilder.java:58)
at org.spockframework.runtime.SpecInfoBuilder.build(SpecInfoBuilder.java:42)
at org.spockframework.runtime.Sputnik.getSpec(Sputnik.java:78)
at org.spockframework.runtime.Sputnik.runExtensionsIfNecessary(Sputnik.java:86)
at org.spockframework.runtime.Sputnik.getDescription(Sputnik.java:55)
at org.junit.runners.Suite.describeChild(Suite.java:123)
at org.junit.runners.Suite.describeChild(Suite.java:24)
at org.junit.runners.ParentRunner.getDescription(ParentRunner.java:290)
at org.junit.runner.JUnitCore.run(JUnitCore.java:156)
at org.junit.runner.JUnitCore.run(JUnitCore.java:136)
at org.junit.runner.JUnitCore.run(JUnitCore.java:117)
at com.springsource.loaded.ri.ReflectiveInterceptor.jlrMethodInvoke(ReflectiveInterceptor.java:1237)
at grails.plugin.spock.test.GrailsSpecTestType.doRun(GrailsSpecTestType.groovy:73)
at com.springsource.loaded.ri.ReflectiveInterceptor.jlrMethodInvoke(ReflectiveInterceptor.java:1237)
at _GrailsTest_groovy$_run_closure4.doCall(_GrailsTest_groovy:290)
at com.springsource.loaded.ri.ReflectiveInterceptor.jlrMethodInvoke(ReflectiveInterceptor.java:1237)
at _GrailsTest_groovy$_run_closure4.call(_GrailsTest_groovy)
at com.springsource.loaded.ri.ReflectiveInterceptor.jlrMethodInvoke(ReflectiveInterceptor.java:1237)
at _GrailsTest_groovy$_run_closure2.doCall(_GrailsTest_groovy:248)
at com.springsource.loaded.ri.ReflectiveInterceptor.jlrMethodInvoke(ReflectiveInterceptor.java:1237)
at _GrailsTest_groovy$_run_closure1_closure21.doCall(_GrailsTest_groovy:195)
at com.springsource.loaded.ri.ReflectiveInterceptor.jlrMethodInvoke(ReflectiveInterceptor.java:1237)
at _GrailsTest_groovy$_run_closure1.doCall(_GrailsTest_groovy:184)
at com.springsource.loaded.ri.ReflectiveInterceptor.jlrMethodInvoke(ReflectiveInterceptor.java:1237)
at org.codehaus.gant.GantMetaClass.invokeMethod(GantMetaClass.java:133)
at com.springsource.loaded.ri.ReflectiveInterceptor.jlrMethodInvoke(ReflectiveInterceptor.java:1237)
at org.codehaus.gant.GantMetaClass.invokeMethod(GantMetaClass.java:133)
at org.codehaus.gant.GantBinding$_initializeGantBinding_closure5_closure16_closure18.doCall(GantBinding.groovy:185)
at com.springsource.loaded.ri.ReflectiveInterceptor.jlrMethodInvoke(ReflectiveInterceptor.java:1237)
at org.codehaus.gant.GantBinding$_initializeGantBinding_closure5_closure16_closure18.doCall(GantBinding.groovy)
at com.springsource.loaded.ri.ReflectiveInterceptor.jlrMethodInvoke(ReflectiveInterceptor.java:1237)
at java_util_concurrent_Callable$call.call(Unknown Source)
at org.codehaus.gant.GantBinding.withTargetEvent(GantBinding.groovy:90)
at org.codehaus.gant.GantBinding.this$4$withTargetEvent(GantBinding.groovy)
at com.springsource.loaded.ri.ReflectiveInterceptor.jlrMethodInvoke(ReflectiveInterceptor.java:1237)
at org.codehaus.gant.GantBinding$_initializeGantBinding_closure5_closure16.doCall(GantBinding.groovy:185)
at com.springsource.loaded.ri.ReflectiveInterceptor.jlrMethodInvoke(ReflectiveInterceptor.java:1237)
at org.codehaus.gant.GantBinding$_initializeGantBinding_closure5_closure16.doCall(GantBinding.groovy)
at com.springsource.loaded.ri.ReflectiveInterceptor.jlrMethodInvoke(ReflectiveInterceptor.java:1237)
at com.springsource.loaded.ri.ReflectiveInterceptor.jlrMethodInvoke(ReflectiveInterceptor.java:1237)
at org.codehaus.gant.GantMetaClass.invokeMethod(GantMetaClass.java:133)
at TestApp$_run_closure1.doCall(TestApp.groovy:82)
at com.springsource.loaded.ri.ReflectiveInterceptor.jlrMethodInvoke(ReflectiveInterceptor.java:1237)
at org.codehaus.gant.GantMetaClass.invokeMethod(GantMetaClass.java:133)
at com.springsource.loaded.ri.ReflectiveInterceptor.jlrMethodInvoke(ReflectiveInterceptor.java:1237)
at org.codehaus.gant.GantMetaClass.invokeMethod(GantMetaClass.java:133)
at org.codehaus.gant.GantBinding$_initializeGantBinding_closure5_closure16_closure18.doCall(GantBinding.groovy:185)
at com.springsource.loaded.ri.ReflectiveInterceptor.jlrMethodInvoke(ReflectiveInterceptor.java:1237)
at org.codehaus.gant.GantBinding$_initializeGantBinding_closure5_closure16_closure18.doCall(GantBinding.groovy)
at com.springsource.loaded.ri.ReflectiveInterceptor.jlrMethodInvoke(ReflectiveInterceptor.java:1237)
at java_util_concurrent_Callable$call.call(Unknown Source)
at org.codehaus.gant.GantBinding.withTargetEvent(GantBinding.groovy:90)
at org.codehaus.gant.GantBinding.this$4$withTargetEvent(GantBinding.groovy)
at com.springsource.loaded.ri.ReflectiveInterceptor.jlrMethodInvoke(ReflectiveInterceptor.java:1237)
at org.codehaus.gant.GantBinding$_initializeGantBinding_closure5_closure16.doCall(GantBinding.groovy:185)
at com.springsource.loaded.ri.ReflectiveInterceptor.jlrMethodInvoke(ReflectiveInterceptor.java:1237)
at org.codehaus.gant.GantBinding$_initializeGantBinding_closure5_closure16.doCall(GantBinding.groovy)
at com.springsource.loaded.ri.ReflectiveInterceptor.jlrMethodInvoke(ReflectiveInterceptor.java:1237)
at java_util_concurrent_Callable$call.call(Unknown Source)
at gant.Gant$_dispatch_closure5.doCall(Gant.groovy:381)
at com.springsource.loaded.ri.ReflectiveInterceptor.jlrMethodInvoke(ReflectiveInterceptor.java:1237)
at gant.Gant$_dispatch_closure7.doCall(Gant.groovy:415)
at com.springsource.loaded.ri.ReflectiveInterceptor.jlrMethodInvoke(ReflectiveInterceptor.java:1237)
at gant.Gant$_dispatch_closure7.doCall(Gant.groovy)
at com.springsource.loaded.ri.ReflectiveInterceptor.jlrMethodInvoke(ReflectiveInterceptor.java:1237)
at java_util_concurrent_Callable$call.call(Unknown Source)
at gant.Gant.withBuildListeners(Gant.groovy:427)
at gant.Gant.this$2$withBuildListeners(Gant.groovy)
at gant.Gant$this$2$withBuildListeners.callCurrent(Unknown Source)
at gant.Gant$this$2$withBuildListeners.callCurrent(Unknown Source)
at gant.Gant.dispatch(Gant.groovy:415)
at gant.Gant.this$2$dispatch(Gant.groovy)
at com.springsource.loaded.ri.ReflectiveInterceptor.jlrMethodInvoke(ReflectiveInterceptor.java:1237)
at gant.Gant.invokeMethod(Gant.groovy)
at gant.Gant.executeTargets(Gant.groovy:591)
at com.springsource.loaded.ri.ReflectiveInterceptor.jlrMethodInvoke(ReflectiveInterceptor.java:1237)
at gant.Gant.executeTargets(Gant.groovy:590)
at com.springsource.loaded.ri.ReflectiveInterceptor.jlrMethodInvoke(ReflectiveInterceptor.java:1231)
| Error Error running script test-app --stacktrace: cannot find shared instance field 
```

任何帮助或指针将不胜感激，

提前致谢

笔记：

我在用

Geb 版本是 0.7，Spock 版本是 0.6

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T06:42:40.633

我遇到了同样的问题（使用 Geb 0.7.0、Spock 0.6、Grails 2.0.3 和 Groovy 1.8.6）。我发现的一种解决方法是将规范更改为从 GebSpec 而不是 GebReportingSpec 扩展。测试在此更改后通过 - 但我不知道此更改的长期影响是什么（我对这个堆栈很陌生）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T08:04:30.813

尝试使用 -noreloading 标志运行测试：

> grails -noreloading 测试应用程序

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-12T19:44:03.463

```
grails clean
grails compile
grails package 
```

为我清除了这个

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-07T16:36:19.343

我在我的新系统上重新克隆了 repo，所有测试都通过了。我不知道上一个错误的原因。结束问题。

# javascript - 用于文本区域字符倒计时的 JQuery 1.7+ 插件

> ID：10420426
> 
> 赞同：0
> 
> 时间：2012-05-02T19:33:04.013
> 
> 标签：javascript, jquery, jquery-plugins

我一直在寻找用于对文本区域中的字符进行倒计时的 JQuery 插件。我见过不少，但它们都很旧，而且大多数都不能与最新的 JQuery 一起使用。

哪些 JQuery 字符倒计时插件支持 JQuery 1.7+？

# sql - Oracle 产品与否？

> ID：10420427
> 
> 赞同：-1
> 
> 时间：2012-05-02T19:33:08.380
> 
> 标签：sql, database, oracle, plsql

**读一致性回滚段**是Oracle 产品的特性还是 RDBMS 的一般特性？

同样的问题，但这次是关于**存储/表空间**？

最后，**块、范围和段**是 Oracle 还是数据库的一般特性？

非常感谢您的回复！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-02T19:40:12.490

**读取一致性**是事务数据库的一个属性（从我的角度来看是一个要求）。

**回滚段**（简而言之）是 Oracle 支持事务的方式。顺便提一句。它不再称为回滚段。现在叫 UNDO

**表空间**并不是 Oracle 独有的。大多数（如果不是全部）大型 DBMS 都支持这一点。

我知道的所有 DBMS 都按**块**访问文件系统。块（有时称为页）通常是 DBMS 可以读取或写入的最小（存储）单元。

**范围**并不是 Oracle 独有的。其他 DBMS 只是有不同的名称。

**Segments**是一个我只在 Oracle 世界中遇到过的名称。但我想这个概念以某种方式存在于任何主要的 DBMS 中。

# php - mpdf 生成没有图片的pdf

> ID：10420433
> 
> 赞同：0
> 
> 时间：2012-05-02T19:34:04.170
> 
> 标签：php, pdf, mpdf

我将 mpdf 用于 php 项目，但在生成带有图像的 pdf 文件时遇到了困难。它在浏览器上正确显示 pdf 文件，但是在我保存 pdf 文件后它不显示图像。我用不同的浏览器/操作系统尝试过，结果对我来说有点奇怪。它适用于非常浏览器并在 linux 机器上正确显示本地 pdf 文件。mac 和 windows 它会在每个浏览器上显示图像，但是当我保存 pdf 文件时，它不会在本地 pdf 上显示图像。你知道如何解决这个问题吗？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T18:07:57.390

您必须使用绝对链接，从域名的顶部开始。

# google-apps-script - 通过电子邮件触发 Google Apps 脚本

> ID：10420435
> 
> 赞同：14
> 
> 时间：2012-05-02T19:34:14.713
> 
> 标签：google-apps-script

我正在寻找在 GoogleAppsForBusiness 域中运行的恶魔脚本可以解析传入电子邮件的模式示例。一些消息将包含对不同 GAScript 的调用，例如，可以更改特定文档的 ACL 设置。

我假设其他人已经实现了这种模式，但不确定我如何寻找示例。

谢谢

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-05-03T03:47:53.443

您可以在 Apps 脚本[用户指南](https://developers.google.com/apps-script/guide)和[教程](https://developers.google.com/apps-script/articles)中找到脚本示例。[您也可以在论坛](https://groups.google.com/a/googleproductforums.com/forum/#!categories/apps-script)上搜索相关讨论。但我认为没有一个完全适合您，所有代码肯定都在那里，但不是在一个脚本上。

可能有人编写了这样的脚本但从未发布过。因为它做起来有点简单，而且每个人的用法都不一样。例如，您打算如何标记您的电子邮件（您已经阅读、执行的电子邮件等）？最好使用 gmail 过滤器来帮助您，立即将“命令”电子邮件放入标签中，脚本只需删除标签（并可能设置另一个标签）。关键是，看看它有多大的不同。

另外，我认为如果您可以将所有功能保留在同一个脚本项目中会更容易。可能只是在不同的文件上。因为调用不同的脚本要复杂得多。

无论如何，他是我开始的方式：

```
//set a time-driven trigger to run this function on the desired frequency
function monitorEmails() {
  var label = GmailApp.getUserLabelByName('command');
  var doneLabel = GmailApp.getUserLabelByName('executed');
  var cmds = label.getThreads();
  var max = Math.min(cmds.length,5);
  for( var i = 0; i < max; ++i ) {
    var email = cmds[i].getMessages()[0];
    var functionName = email.getBody();
    //you may need to do extra parsing here, depending on your usage

    var ret = undefined;
    try {
      ret = this[functionName]();
    } catch(err) {
      ret = err;
    }
    //replying the function return value to the email
    //this may make sense or not
    if( ret !== undefined )
      email.reply(ret);
    cmds[i].removeLabel(label).addLabel(doneLabel);
  }
} 
```

ps：我没有测试过这段代码

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-08T23:22:43.040

您可以创建一个 google 应用程序，该应用程序将由发送到应用程序特殊地址的传入电子邮件触发。该消息将转换为您的应用程序接收的 HTTP POST。

更多详细信息： [https ://developers.google.com/appengine/docs/python/mail/receivingmail](https://developers.google.com/appengine/docs/python/mail/receivingmail)

我自己还没有尝试过，但在接下来的几天里会这样做。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-06-16T00:31:07.730

有两种方法。首先，您可以使用 Google pub/sub 并在您的 AppScrit 端点中处理传入通知。第二种是在你的 AppScript 代码中使用 googleapis npm 包，[这里是一个示例](https://gist.github.com/tablekat/09a00b741c14aca51d18c738070cc545)。希望能帮助到你。

这些是步骤：

*   [在https://console.cloud.google.com/cloudpubsub/topicList?project=testmabs](https://console.cloud.google.com/cloudpubsub/topicList?project=testmabs)上做了一个项目？
*   做了一个pubsub主题
*   订阅了 webhook url
*   将该网址添加到我拥有的网站中，我猜？我想我必须做 DNS 的事情来确认我拥有它，并且在尝试添加订阅时，错误非常模糊，无法确定这是我必须做的事情
*   添加了“gmail-api-push@system.gserviceaccount.com”作为发布者的主题权限（我还添加了 ....apps.googleusercontent.com 和 youtrackapiuser.caps@gmail.com 但我认为我不需要它们）
*   创建 oauth 客户端信息并将其下载到谷歌控制台的凭据部分。(oauthtrash.json)

# php - 为什么以及何时应该在 PHP 中对变量进行类型转换

> ID：10420445
> 
> 赞同：1
> 
> 时间：2012-05-02T19:35:04.527
> 
> 标签：php, casting

鉴于此声明：

```
(string)$my_string = 'Hello world'; 
```

****对****

```
$my_string = 'Hello world'; 
```

**或者***

```
 (int)$my_int = 1;

 $my_int = 1; 
```

与在 PHP 中定义字符串变量的第一种方法相比有优势吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-02T19:47:06.123

您的“类型转换”代码实际上并没有完成任何事情。

`(type) $var = literal`做这个：

1.  将文字值分配给`$var`文字值的本机类型。
2.  “返回”（作为表达式）`$var`转换为所需类型的值。

类型`$var`保持不变。

例如：

```
var_dump((string) $s = 1);
var_dump($s); 
```

输出是：

```
string(1) "1"
int(1) 
```

所以这个语法没有意义。使用文字进行类型转换几乎可以肯定是毫无意义的。

但是，强制变量为某种类型可能很有用，例如：`$intvar = (int) $var;`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T19:37:33.640

> 比第一种方式有优势吗

是的。第二个更简洁。

> PHP中类型转换变量的优点是什么

将其转换为预期的类型。
不过，您很少需要使用字符串。
并且使用变量定义，您根本不需要它。

# php - 如何发送未选中的复选框以发布

> ID：10420447
> 
> 赞同：1
> 
> 时间：2012-05-02T19:35:06.887
> 
> 标签：php, html, post

只有我选中的复选框被放入 $_POST。我希望那些在 $_POST 中检查的值为“true”，而未检查的值为“false”。无论如何要这样做，或者 POST 请求是否总是只包含有关选中复选框的信息。

我唯一能想到的就是使用隐藏的表单字段，然后让复选框来操作它们。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T19:37:54.970

请参阅[发布未选中的复选框](http://planetozh.com/blog/2008/09/posting-unchecked-checkboxes-in-html-forms/)和[未选中的复选框值](http://planetozh.com/blog/go.php?http://iamcam.wordpress.com/2008/01/15/unchecked-checkbox-values/)

可以通过添加具有相同名称的隐藏字段来实现。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T19:38:43.147

您可以使用

```
<input type="checkbox" name="myCheckbox" value="true" />
<input type="hidden" name="myCheckbox" value="false" /> 
```

然后解析服务器上的输入。您将得到`false`或`true false`，前者映射到`false`，后者映射到`true`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-02T19:36:51.170

它只会包含选中复选框的内容。您必须通过使用表单助手或输入过滤器来模拟，以您喜欢的方式连接您的变量/数组。

此类功能将需要您在每个表单中使用的所有复选框，然后可以将找到的内容设置为真，并将未检测到的内容设置为假。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-02T19:38:32.677

你可以从你的 php 做：

```
if(isset($_POST['checkbox'])||$_POST['checkbox']!="yes"){
    //other code here
} 
```

或者，您可以在提交未发送的复选框值之前使用一些 javascript 添加隐藏输入

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-02T19:38:40.493

这是不可能的，因为它依赖于浏览器。

您可以通过以下方式检查它是否已发布

```
<?php
if (isset($_POST['checkbox1']))
{
    // it's posted
} 
```

或使用`!`：

```
<?php
if (!isset($_POST['checkbox1']))
{
    // it's NOT posted
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-02T19:40:48.593

您可以在您的服务器端假设那些未设置发布数据的人未选中。尝试验证是否设置了变量：

```
$_POST['a_checkbox'] = (isset($_POST['a_checkbox'])) ? 1 : 0; 
```

使用`true`and `false`, or 需要的数据。

# c++ - 在 C++ 中使用 double / float 类型时如何设置精度

> ID：10420448
> 
> 赞同：3
> 
> 时间：2012-05-02T19:35:09.820
> 
> 标签：c++, double, precision

在我之前的问题[Comparing a double and int, without cast or conversion](https://stackoverflow.com/questions/10419377/comparing-a-double-and-int-without-casting-or-conversion)中，我发现了两个 double 之间的差异是如何影响比较的。

我遇到了 setprecision() 方法，它有助于显示小数点后的所有数字。

因此，发现 6.15 和 3.15 的差异为：3.00000000000000044408920985006

现在，当它与 3 比较时，它返回一个结果，表明它大于 3。

我如何强制它只占用有限的位数？

当我使用 6.1 和 3.1 时，区别是：2.99999999999999955591079014994

我应该如何计算精度，以便我们知道它实际上等于 3，并且不小于。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-02T19:41:37.337

希望您应该知道浮点/双精度不能以二进制精确表示，并且由于循环小数而发生截断。您与浮点数/双精度整数的比较总是会失败。

即使您使用 setprecision 也不起作用，因为它是一种 iomanip 设置显示精度而不是存储值的方法。

比较双打的可移植方式不是使用“==”运算符，而是执行类似的操作

```
bool Compare(double a,double b) {
    std::fabs(a - b) < std::numeric_limits<double>::epsilon();
} 
```

您可以使用它来比较双精度与浮点数和/或整数。您还可以为 float 编写类似的比较函数

```
bool Compare(float a,float b) {
    std::fabs(a - b) < std::numeric_limits<float>::epsilon();
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-02T19:45:59.523

在对您的另一个问题的评论中，您已经被指向[这篇](http://docs.oracle.com/cd/E19957-01/806-3568/ncg_goldberg.html)关于浮点数的出色论文。*非常*值得一读。

关于您的特定问题，一种标准方法是定义一个*容差*，以便在双打之间进行比较。例如，如果您有两个双精度`a`和`b`，并希望确定是否`a`大于（另一个双精度）`b`的容差范围内`eps`，您可能会执行以下操作：

```
if (a - b > eps) {
  // a is greater than b
} else {
  // a is not greater than b
} 
```

或者，如果您想知道`a`等于`b`指定的容差`eps`，您可以执行以下操作：

```
if (std::abs(a - b) <= eps) {
  // a and b are equal within the set tolerance
} else {
  // a and b are not equal within the set tolerance
} 
```

正如其他人所指出的，C++ 提供了一些开箱即用的有用函数来执行这些比较。看看[std::abs](http://www.cplusplus.com/reference/clibrary/cstdlib/abs/)、[std::numeric_limits](http://www.cplusplus.com/reference/std/limits/numeric_limits/)和这篇关于 SO[的好帖子。](https://stackoverflow.com/questions/3118165/when-do-i-use-fabs-and-when-is-it-sufficient-to-use-stdabs)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-02T19:51:23.673

这是一个比较函数，用于确定两个数字是否在一个 LSB 内。

```
bool Compare(double a, double b)
{
    return (a <= std::nextafter(b, abs(1.1*b))) && (b <= std::nextafter(a, abs(1.1*a)));
} 
```

`std::nextafter`对 C++11 来说是新的，但在早期的编译器中提供了版本。请参阅[生成下一个最大或最小的可表示浮点数而不进行位旋转](https://stackoverflow.com/questions/7408407/generate-next-largest-or-smallest-representable-floating-point-number-without-bi)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-02T19:39:52.340

`setprecision`允许您选择向流中吐出多少位数字。它不决定要考虑的位数。出于舍入目的，请使用 中的舍入函数之一`<cmath>`。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-05-31T06:59:56.483

float 和 double 的精度位数实际上分别取决于它们的大小。这就是为什么 float 通常比 double 精度低。您可以使用

```
 std::cout<<std::setprecision(desired no);

    float a=(desired no); 
```

现在您已经成功设置了浮点数的精度。同样可以对其他适当的数据类型进行同样的操作，包括双精度数。 **警告**不要将精度设置为大于数据类型必须提供的精度。Double 具有 15 到 18 位精度，而浮点型只有 6 到 9 位精度。

# c# - 循环记录并分配给哈希表

> ID：10420450
> 
> 赞同：-1
> 
> 时间：2012-05-02T19:35:17.913
> 
> 标签：c#, asp.net, sql, hashtable

我有一个如下所示的 SQL 表

 `````
QuestionNumber  UserAnswer

1                   4
2                   11
3                   3
4                   2
5                   Y
6                   5
7                   4
8                   1
9                   34
10                  3 
````  `我试图遍历每个值并将其分配给哈希表，然后返回哈希表等

 `````
 SqlConnection Connection = new SQLAccess().CreateConnection();
                SqlCommand Command = new SqlCommand("GetAllExamAnswersForUser", Connection);
                Command.CommandType = System.Data.CommandType.StoredProcedure;
                Command.Parameters.AddWithValue("@UserID", UserID);
                SqlDataReader da = Command.ExecuteReader();

    while (da.Read())
                    {
                        Details.Add("QuestionNumber1", da["UserAnswer"]);
                        Details.Add("QuestionNumber2", da["UserAnswer"]);
                        Details.Add("QuestionNumber3", da["UserAnswer"]);
                        Details.Add("QuestionNumber4", da["UserAnswer"]);
                        Details.Add("QuestionNumber5", da["UserAnswer"]);
                        Details.Add("QuestionNumber6", da["UserAnswer"]);
                        Details.Add("QuestionNumber7", da["UserAnswer"]);
                        Details.Add("QuestionNumber8", da["UserAnswer"]);
                        Details.Add("QuestionNumber9", da["UserAnswer"]);
                        Details.Add("QuestionNumber10", da["UserAnswer"]);

    } 
````  `但无论我做什么 da["UserAnswer"] 始终是第一个答案......我如何循环遍历表中的每一行并返回值？

请有人帮助我，让我摆脱痛苦.... :-(

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-02T19:38:19.210

> 但无论我做什么 da["UserAnswer"] 总是第一个答案......

嗯，我认为这总是*最后*的答案。你覆盖所有以前的。

每次通过 while 循环时都会获得一条新记录，并且 QuestionNumber 也是一列：

```
 while (da.Read())
   {
         string answer = da["UserAnswer"];
         string question = da["QuestionNumber"];
         Details.Add(question, answer);           // one per record
    } 
```

或者当您想自己（重新）编号时：

```
 int i = 1;
   while (da.Read())
   {
        //Details.Add("QuestionNumber1", da["UserAnswer"]);
        //Details.Add("QuestionNumber2", da["UserAnswer"]);
        //...

         Details.Add("QuestionNumber" + i, da["UserAnswer"]);
         i = i + 1;
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T19:40:45.013

.Read 一次推进一条记录。您的每个 da["UserAnswer"] 调用都在同一记录上运行。````

# opencv - 在 OpenCV 中移动（如 Matlab 函数）矩阵的行或列

> ID：10420454
> 
> 赞同：5
> 
> 时间：2012-05-02T19:35:53.367
> 
> 标签：opencv

在 Matlab 中有一个移位函数，用于执行矩阵的列或行的循环移位。OpenCV中有类似的功能吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-08-28T13:16:37.887

我正在寻找同样的问题，但由于没有，我自己写的。这是另一种选择。在我的代码中，您可以向右或向左移动 n 次：对于`left numRight is -n, right +n`.

```
void shiftCol(Mat& out, Mat in, int numRight){
    if(numRight == 0){ 
        in.copyTo(out);
        return;
    }

    int ncols = in.cols;
    int nrows = in.rows;

    out = Mat::zeros(in.size(), in.type());

    numRight = numRight%ncols;
    if(numRight < 0)
        numRight = ncols+numRight;

    in(cv::Rect(ncols-numRight,0, numRight,nrows)).copyTo(out(cv::Rect(0,0,numRight,nrows)));
    in(cv::Rect(0,0, ncols-numRight,nrows)).copyTo(out(cv::Rect(numRight,0,ncols-numRight,nrows)));
} 
```

希望这会对某些人有所帮助。类似地，shiftRows 可以写成

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-09T14:14:46.457

这是我对循环矩阵移位的实现。欢迎任何建议。

```
//circular shift one row from up to down
void shiftRows(Mat& mat) {

    Mat temp;
    Mat m;
    int k = (mat.rows-1);
    mat.row(k).copyTo(temp);
    for(; k > 0 ; k-- ) {
        m = mat.row(k);
        mat.row(k-1).copyTo(m);
    }
    m = mat.row(0);
    temp.copyTo(m);

}

//circular shift n rows from up to down if n > 0, -n rows from down to up if n < 0
void shiftRows(Mat& mat,int n) {

    if( n < 0 ) {

        n = -n;
        flip(mat,mat,0);
        for(int k=0; k < n;k++) {
            shiftRows(mat);
        }
        flip(mat,mat,0);

    } else {

        for(int k=0; k < n;k++) {
            shiftRows(mat);
        }
    }

}

//circular shift n columns from left to right if n > 0, -n columns from right to left if n < 0
void shiftCols(Mat& mat, int n) {

    if(n < 0){

        n = -n;
        flip(mat,mat,1);
        transpose(mat,mat);
        shiftRows(mat,n);
        transpose(mat,mat);
        flip(mat,mat,1);

    } else {

        transpose(mat,mat);
        shiftRows(mat,n);
        transpose(mat,mat);
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-02T20:39:31.143

简短的回答，不。

长答案，如果您真的需要它，您可以轻松实现它，例如使用临时对象使用`cv::Mat::row(i)`, `cv::Mat::(cv::Range(rowRange), cv::Range(cv::colRange))`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-02T21:59:45.133

或者，如果您使用的是 Python，只需使用[roll() 方法](http://docs.scipy.org/doc/numpy/reference/generated/numpy.roll.html)。

# pdf - TeXnicCenter - 以 PDF 格式打开

> ID：10420458
> 
> 赞同：4
> 
> 时间：2012-05-02T19:36:11.633
> 
> 标签：pdf, adobe-reader, texnic-center

我刚刚花了一些时间安装 TeXnicCenter 并尝试正确配置它。我现在快到了！我遇到的唯一问题是，每次将我正在处理的文档编译为 PDF 文档时，该文档都不会直接在 Adob​​e Reader X 中打开。相反，我只会弹出 Adob​​e Reader X 的“打开屏幕” up，这意味着我必须选择“打开文件”并导航到保存文档的正确文件夹以查看它。这是令人沮丧和耗时的 - 特别是如果我想经常检查我的进度。有什么方法可以配置它，以便 Adob​​e Reader X 自动打开我正在编译的文件，而无需导航到正确的文件夹？

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-02T14:44:27.700

由于这个问题与 TeX 相关，因此您在StackExchange 的 TeX 站点[http://tex.stackexchange.com](http://tex.stackexchange.com)上发帖可能会更好。

您应该研究[这个问题](https://tex.stackexchange.com/questions/43864/texniccenter-adobe-acrobat-10)，特别注意前两个答案，它们应该可以正常工作。

干杯。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-07-02T22:03:44.607

在 Adob​​e Reader X 中，转到`Edit -> Preferences`，类别`general`中应该有一个复选框`Enable protected mode at startup`。取消选中此项，退出 adobe 并重试。它现在有效吗？

# java - Java - 在具有静态尺寸的两个对象之间绘制箭头

> ID：10420460
> 
> 赞同：1
> 
> 时间：2012-05-02T19:36:16.920
> 
> 标签：java, graphics

我被困在以下问题上；我有一个矩形（可以说是 50x40 像素，位置：x1，y1）和一个圆（半径 30，位置 x2，y2）。现在我想在它们之间画一个箭头

```
 void drawArrow(Graphics g1, int x1, int y1, int x2, int y2,) {
//x1 and y1 are coordinates of circle or rectangle
//x2 and y2 are coordinates of circle or rectangle, to this point is directed the arrow 
Graphics2D g = (Graphics2D) g1.create();
double dx=x2-x1;
double dy=y2-y1;
double angle = Math.atan2(dy, dx);
int len = (int) Math.sqrt(dx*dx + dy*dy);
AffineTransform at = AffineTransform.getTranslateInstance(x1, y1);
at.concatenate(AffineTransform.getRotateInstance(angle));
g.transform(at);
g.drawLine(0,0,len,0);
g.fillPolygon(new int[] {len, len-ARR_SIZE, len-ARR_SIZE, len},
new int[] {0, -ARR_SIZE, ARR_SIZE, 0}, 4);
} 
```

这段代码显然只连接了 rect 和 circle 的特定点（在这张图片上，我连接了中间的点[http://imageshack.us/photo/my-images/341/arrk.jpg/](http://imageshack.us/photo/my-images/341/arrk.jpg/)）。你知道如何实现这样的stg吗？（http://imageshack.us/photo/my-images/833/arr2u.jpg/）...我的想法是缩短长度并计算新坐标，但我有点挣扎。

// 我这样调用这个函数：

```
drawArrow(g,temp.x+radius/2,temp.y+radius/2,temp2.x+width/2,temp2.y+height/2); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T19:41:16.853

最简单的方法是设置剪辑。如果您将圆圈和矩形添加到剪辑中，则不会在其上绘制。

它并没有解决问题或绘制箭头。要解决此问题，您需要使用 Shape.getBounds()，找出矩形的边界，然后计算与圆的角度并使用三角函数在矩形上找到正确的点

# python - 按连续序列分组整数列表

> ID：10420464
> 
> 赞同：11
> 
> 时间：2012-05-02T19:36:46.823
> 
> 标签：python

我有一个整数列表...

```
[1,2,3,4,5,8,9,10,11,200,201,202] 
```

我想将它们分组到一个列表列表中，其中每个子列表都包含序列未被破坏的整数。像这样...

```
[[1,5],[8,11],[200,202]] 
```

我有一个相当笨重的工作......

```
lSequenceOfNum = [1,2,3,4,5,8,9,10,11,200,201,202]

lGrouped = []
start = 0
for x in range(0,len(lSequenceOfNum)):
    if x != len(lSequenceOfNum)-1:
        if(lSequenceOfNum[x+1] - lSequenceOfNum[x]) > 1:
            lGrouped.append([lSequenceOfNum[start],lSequenceOfNum[x]])
            start = x+1

    else:
        lGrouped.append([lSequenceOfNum[start],lSequenceOfNum[x]])
print lGrouped 
```

这是我能做的最好的。有没有更“pythonic”的方式来做到这一点？谢谢..

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-05-02T19:51:45.063

假设列表将始终按升序排列：

```
from itertools import groupby, count

numberlist = [1,2,3,4,5,8,9,10,11,200,201,202]

def as_range(g):
    l = list(g)
    return l[0], l[-1]

print [as_range(g) for _, g in groupby(numberlist, key=lambda n, c=count(): n-next(c))] 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-02T19:52:22.787

我意识到我有点过于复杂了，手动计数比使用稍微复杂的生成器要容易得多：

```
def ranges(seq):
    start, end = seq[0], seq[0]
    count = start
    for item in seq:
        if not count == item:
            yield start, end
            start, end = item, item
            count = item
        end = item
        count += 1
    yield start, end

print(list(ranges([1,2,3,4,5,8,9,10,11,200,201,202]))) 
```

生产：

```
[(1, 5), (8, 11), (200, 202)] 
```

这种方法非常快：

这种方法（和旧的方法，它们的执行几乎完全相同）：

```
python -m timeit -s "from test import ranges" "ranges([1,2,3,4,5,8,9,10,11,200,201,202])"
1000000 loops, best of 3: 0.47 usec per loop 
```

[杰夫梅尔卡多的方法](https://stackoverflow.com/a/10420670/722121)：

```
python -m timeit -s "from test import as_range; from itertools import groupby, count" "[as_range(g) for _, g in groupby([1,2,3,4,5,8,9,10,11,200,201,202], key=lambda n, c=count(): n-next(c))]"
100000 loops, best of 3: 11.1 usec per loop 
```

这比速度快了 20 倍以上——当然，除非速度很重要，否则这不是一个真正的问题。

* * *

我使用生成器的旧解决方案：

```
import itertools

def resetable_counter(start):
    while True:
        for i in itertools.count(start):
            reset = yield i
            if reset:
                start = reset
                break

def ranges(seq):
    start, end = seq[0], seq[0]
    counter = resetable_counter(start)
    for count, item in zip(counter, seq): #In 2.x: itertools.izip(counter, seq)
        if not count == item:
            yield start, end
            start, end = item, item
            counter.send(item)
        end = item
    yield start, end

print(list(ranges([1,2,3,4,5,8,9,10,11,200,201,202]))) 
```

生产：

```
[(1, 5), (8, 11), (200, 202)] 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-02T19:57:34.553

您可以通过三个步骤有效地做到这一点

给定

```
list1=[1,2,3,4,5,8,9,10,11,200,201,202] 
```

计算不连续性

```
 [1,2,3,4,5,8,9,10,11 ,200,201,202]
-      [1,2,3,4,5,8,9 ,10 ,11 ,200,201,202]
----------------------------------------
       [1,1,1,1,3,1,1 ,1  ,189,1  ,1]
(index) 1 2 3 4 5 6 7  8   9   10  11 
                *          *
rng = [i+1 for i,e in enumerate((x-y for x,y in zip(list1[1:],list1))) if e!=1] 
>>> rng
[5, 9] 
```

添加边界

```
rng = [0] + rng + [len(list1)]
>>> rng
[0, 5, 9,12] 
```

现在计算实际的连续性范围

```
[(list1[i],list1[j-1]) for i,j in zip(list2,list2[1:])]
[(1, 5), (8, 11), (200, 202)]

LB                [0,   5,    9,  12]
UB             [0, 5,   9,    12]
     -----------------------
indexes (LB,UB-1) (0,4) (5,8) (9,11) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-06-28T09:49:10.673

这个问题很老了，但我想我还是会分享我的解决方案

假设`import numpy as np`

```
a = [1,2,3,4,5,8,9,10,11,200,201,202]

np.split(a, array(np.add(np.where(diff(a)>1),1)).tolist()[0]) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-02T19:46:49.687

这是一个应该易于阅读的版本：

```
def close_range(el, it):
    while True:
        el1 = next(it, None)
        if el1 != el + 1:
            return el, el1
        el = el1

def compress_ranges(seq):
    iterator = iter(seq)
    left = next(iterator, None)
    while left is not None:
        right, left1 = close_range(left, iterator)
        yield (left, right)
        left = left1

list(compress_ranges([1, 2, 3, 4, 5, 8, 9, 10, 11, 200, 201, 202])) 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-02T19:43:40.253

伪代码（需要修复一个错误）：

```
jumps = new array;
for idx from 0 to len(array)
if array[idx] != array[idx+1] then jumps.push(idx); 
```

我认为这实际上是使用索引而不是数组中的对象有意义的情况（如在 C 中，在 java/python/perl/etc 对此进行改进之前）。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-05-01T14:22:28.080

类似的问题：
[Python - 使用列表理解查找增量编号序列](https://stackoverflow.com/questions/16315189/python-find-incremental-numbered-sequences-with-a-list-comprehension)
[Pythonic 方法将整数列表转换为逗号分隔范围的字符串](https://stackoverflow.com/questions/3429510/pythonic-way-to-convert-a-list-of-integers-into-a-string-of-comma-separated-rang)

```
input = [1, 2, 3, 4, 8, 10, 11, 12, 17]

i, ii, result = iter(input), iter(input[1:]), [[input[0]]]
for x, y in zip(i,ii):
    if y-x != 1:
        result.append([y])
    else:
        result[-1].append(y)

>>> result
[[1, 2, 3, 4], [8], [10, 11, 12], [17]]

>>> print ", ".join("-".join(map(str,(g[0],g[-1])[:len(g)])) for g in result)
1-4, 8, 10-12, 17

>>> [(g[0],g[-1])[:len(g)] for g in result]
[(1, 4), (8,), (10, 12), (17,)] 
```

# php - SQL / PHP将字符串转换为float或int

> ID：10420467
> 
> 赞同：1
> 
> 时间：2012-05-02T19:36:55.587
> 
> 标签：php, sql, floating-point, int

我有这个sql查询..

```
select i.invoiceid as transactionid, i.date, i.total, 
'invoice' as transaction_type
from invoice 
```

我在 php 中运行它并在 foreach 循环中回显总数，就像这样......

```
echo gettype($row['total']) . "<br/>"; 
```

并返回所有总数`string`

如何将我的 sql 查询中的 i.total 转换为 int 或 float？

我试过了

`convert(int, i.total)`

那没有用:(

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-02T19:41:51.160

**php 将所有内容（不是数组/字典）作为字符串处理**，除非您明确告诉它不要使用`(int)$row['total']`.

[http://php.net/manual/en/language.types.string.php#language.types.string.conversion](http://php.net/manual/en/language.types.string.php#language.types.string.conversion)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T19:40:00.177

你可以试试

```
select i.invoiceid as transactionid, i.date, CAST(i.total as int) as total, 
'invoice' as transaction_type
from invoice 
```

# javascript - plotBands 使 plotLines 消失 highchart

> ID：10420468
> 
> 赞同：1
> 
> 时间：2012-05-02T19:37:01.813
> 
> 标签：javascript, jquery, highcharts, highstock

当我在 xaxis 上的两个点之间使用 plotbands 并使用 pointLines 在这两个点之间画一条线时，它永远不会出现但是如果你在 yAxis 上做同样的事情，一切都很好，这是我的代码

```
 $(function () {
    var chart = new Highcharts.Chart({
    chart: {
        renderTo: 'container'
    },
    xAxis: {        
        plotBands: [{ // mark the weekend
            color: 'rgba(68, 170, 213, 0.2)',
            from: Date.UTC(2010, 0, 2),
            to: Date.UTC(2010, 0, 4)
        }],
        plotLines:[{
         value: Date.UTC(2010, 0, 3),
                  color: 'green',
                  dashStyle: 'shortdash',
                  width: 2,
        }],
        plotLines:[{
         value: Date.UTC(2010, 0, 6),
                  color: 'green',
                  dashStyle: 'shortdash',
                  width: 2,
        }],
        tickInterval: 24 * 3600 * 1000, // one day
        type: 'datetime'
    },
    yAxis:{
        plotLines:[{
            value : 200,
            color: 'green',
                  dashStyle: 'shortdash',
                  width: 2,
        }] ,
         plotBands: [{ // mark the weekend
            color: 'rgba(68, 170, 213, 0.2)',
            from: 150,
            to: 250,
        }],  
    },

    series: [{
        data: [29.9, 71.5, 106.4, 129.2, 144.0, 176.0, 135.6, 148.5, 216.4 , 255.7],
        pointStart: Date.UTC(2010, 0, 1),
        pointInterval: 24 * 3600 * 1000
       }]
   });
 });​ 
```

我也 jsFiddle 它[http://jsfiddle.net/MsCqR/3/](http://jsfiddle.net/MsCqR/3/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T19:50:57.913

我认为你的问题是，如果你想设置 2 plotLines 你必须通过一个数组传递它们，就像下面的代码：

```
plotLines:[{
    value: Date.UTC(2010, 0, 3),
    color: 'green',
    dashStyle: 'shortdash',
    width: 2,
}, {
   value: Date.UTC(2010, 0, 6),
   color: 'green',
   dashStyle: 'shortdash',
   width: 2,
}] 
```

**如何添加超过 1 条绘图线**：**[LINK1](http://jsfiddle.net/MsCqR/4/)**
**如何编辑 plotLines 的 zindex**：**[LINK2](http://jsfiddle.net/MsCqR/5/)**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-24T14:20:00.577

使用 zIndex 绘制线或 plotbands 位置...

```
 plotLines: [{
                width: 3,
                color: "#808080"
            },{
                value: "200",
                width: 4,
                color: "#FF0000",
        zIndex: 4}], 
```

# php - 如何让 PHP 找到函数

> ID：10420470
> 
> 赞同：0
> 
> 时间：2012-05-02T19:37:06.227
> 
> 标签：php

我是 PHP 新手。我有一个文件夹中的功能。PHP 似乎找不到这个函数。我该怎么做才能让 PHP 找到/查看包含我尝试使用的函数的文件？

编辑：

这是我正在使用的代码

```
<?php

include './blog/wp-includes/post.php';

$recent_posts = wp_get_recent_posts();
foreach( $recent_posts as $recent )
{
echo '<li><a href="' 
        . get_permalink($recent["ID"]) 
        . '" title="Look '
        .esc_attr($recent["post_title"])
        .'" >' 
        .   $recent["post_title"]
        .'</a> </li> ';
    } 
```

但是当我执行代码时，我得到：

```
Fatal error: Call to undefined function add_action() in /home/hilan1/public_html/site/blog/wp-includes/post.php on line 144 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T19:46:35.623

我给你举个例子：

假设您的根目录中有以下结构：

*   索引.php
*   重要（文件夹）/functions.php（文件夹内）

“functions.php”文件示例：

```
<?php

  function HelloWorld($name){
    return "Hello ".$name;
  }  

?> 
```

在您的 index.php 文件中执行以下操作：

```
<?php
include('important/functions.php');

$name = "Oscar";
$result = HelloWorld($name);
echo $result;

?> 
```

这是调用其他文件中的函数的简单方法。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T19:41:28.807

*   [`include()`](http://us.php.net/manual/en/function.include.php)
*   [`include_once()`](http://us.php.net/manual/en/function.include-once.php)
*   [`require()`](http://us.php.net/manual/en/function.require.php)
*   [`require_once()`](http://us.php.net/manual/en/function.require-once.php)

如果您正在使用类，还请查看自动加载：

*   [`__autoload()`](http://us3.php.net/manual/en/function.autoload.php)
*   [`spl_autoload()`](http://us3.php.net/manual/en/function.spl-autoload.php)

**编辑**

`add_action()`在使用另一个使用它的函数之前，您需要包含包含 WordPress 函数的文件。

# actionscript-3 - Flex：如何控制 Spark 数据网格标题文本对齐？

> ID：10420472
> 
> 赞同：3
> 
> 时间：2012-05-02T19:37:20.920
> 
> 标签：actionscript-3, apache-flex, flex4, flex-spark

如果我在 Spark 数据网格中有 10 列，并且一些标题需要左对齐，一些标题右对齐，还有一些居中，那么完成此操作的最简单方法是什么？

假设需要自定义 headerRenderer，是否有任何简单的示例可以引导我完成它？

提前感谢您的任何评论。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-03T16:27:21.493

我能找到解决此问题的最简单方法是覆盖 spark DefaultGridHeaderRenderer 中的设置，如此链接中所述：

[http://flexponential.com/2011/10/30/changeing-fontweight-of-spark-datagrid-headers/](http://flexponential.com/2011/10/30/changing-fontweight-of-spark-datagrid-headers/)

更具体地说，我使用了以下自定义 headerRenderer，保存为文件：myRightHeaderRenderer.mxml：

```
<?xml version="1.0" encoding="utf-8"?>
<s:DefaultGridHeaderRenderer xmlns:fx="http://ns.adobe.com/mxml/2009" 
            xmlns:s="library://ns.adobe.com/flex/spark" 
            xmlns:mx="library://ns.adobe.com/flex/mx" > 

<fx:Declarations>
    <s:Label id="labelDisplay" 
             verticalCenter="1" left="0" right="0" top="0" bottom="0"
             verticalAlign="middle"
             maxDisplayedLines="1"
             textAlign="right"
             fontWeight="bold"
             showTruncationTip="true" />
</fx:Declarations>

</s:DefaultGridHeaderRenderer> 
```

此自定义标题渲染器右对齐标题文本。要使用它，只需将其添加到 Spark DataGrid 的一列或多列，如下所示：

```
...
<fx:Array>
    <s:GridColumn ... />
    <s:GridColumn headerRenderer="myRightHeaderRenderer" ...>
    <s:GridColumn ... />
    ...
</fx:Array>
... 
```

我不知道该怎么做，但我确信可以通过将 textAlign 属性参数化为 、 或 来使其`center`更加`left`灵活`right`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-02T20:22:03.570

如果你看一下[这篇博](http://www.codesofmylife.com/2011/07/07/spark-datagrid-playing-with-custom-header-renderer/)文，就会有相当多的[源代码](http://www.codesofmylife.com/apps/DGHeaderPlay/srcview/index.html)向你展示如何做到这一点。

但是，我认为博客的示例比您需要的要复杂得多。正如您所担心的那样，您将需要一个自定义的 headerRenderer，但您的代码应该非常简单。我只是简单地测试了这个，所以如果您有任何问题，请告诉我。

# 自定义标题渲染器

```
package
{
    import spark.skins.spark.DefaultGridHeaderRenderer;

    public class CustomGridHeader extends DefaultGridHeaderRenderer
    {
        public function CustomGridHeader()
        {
            super();
        }

        public function set headerTextAlign(value:String):void
        {
            labelDisplay.setStyle("textAlign",value);
            labelDisplay.styleChanged("textAlign");
        }
    }
} 
```

# 列可用的变量...

```
[Bindable] private var leftFactory:ClassFactory = new ClassFactory(CustomGridHeader);
[Bindable] private var rightFactory:ClassFactory = new ClassFactory(CustomGridHeader);
[Bindable] private var centerFactory:ClassFactory = new ClassFactory(CustomGridHeader); 
```

# 开`initialize`或`preinitialize`...

```
leftFactory.properties = {headerTextAlign: "left"};
rightFactory.properties = {headerTextAlign: "right"};
centerFactory.properties = {headerTextAlign: "center"}; 
```

# 对于每一列...

```
<s:GridColumn headerText="..." headerRenderer="{centerFactory}"/> 
```

# ruby-on-rails - validates_presence_of 只是有时？

> ID：10420478
> 
> 赞同：0
> 
> 时间：2012-05-02T19:37:33.677
> 
> 标签：ruby-on-rails, validation

我有用户和客户，它们都有一个地址。我想让 address.street 只对客户是必需的。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T20:00:52.977

您可以编写自己的自定义验证，如下所示：

```
class Address < ActiveRecord::Base
  validate :client_street_required

  def client_street_required
    if self.street.blank? and !self.Client.blank?
      errors.add(:street, "required")
    end
  end

end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T20:54:42.683

标准方法是将条件放入验证中。看看[rails_doc](http://guides.rubyonrails.org/active_record_validations_callbacks.html#using-a-symbol-with-if-and-unless)

```
class Address < ActiveRecord::Base

  validate :street, :presence => true, :unless => 'client.nil?'

end 
```

# android - 在 webview 中使用 ShowfindDialog 搜索不突出显示

> ID：10420481
> 
> 赞同：2
> 
> 时间：2012-05-02T19:37:39.347
> 
> 标签：android, search, android-webview, highlighting

对于 Android 3.x，我使用了：

```
webview.showFindDialog(string_to_find, true); 
```

它运作良好。

但是，对于 Android 4.x，它会找到出现次数，但不会突出显示它们......

任何解决方法？

谢谢 ！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T17:14:28.093

似乎是 ICS 中的一个已知错误。此处已报告：[http](http://code.google.com/p/android/issues/detail?id=29987) ://code.google.com/p/android/issues/detail ?id=29987 我在其他地方看到了可能的解决方法（调用私有方法 setFindIsUp），但它对我不起作用。 . =/

# c# - 如何在 ASP.NET C# 中获取用户 PC DNS 避免代理？

> ID：10420484
> 
> 赞同：1
> 
> 时间：2012-05-02T19:37:43.573
> 
> 标签：c#, asp.net, silverlight, flash, dns

我在 ASP.NET 中有一个使用 C# 的应用程序。我想获取客户端 PC IP/子网/DNS。如果用户使用任何代理服务器，我需要避免它们。我需要实际的客户信息。我对 silverlight 或类似技术没有任何问题。

请帮忙。

# jquery - 如何在 jquery.effect 事件之后立即执行 ui 更改？

> ID：10420487
> 
> 赞同：0
> 
> 时间：2012-05-02T19:37:56.093
> 
> 标签：jquery, jquery-ui

我的 jquery ui 中有弹跳效果。在反弹过程中会发生颜色变化，有什么办法可以在反弹完成后立即将颜色恢复正常？

```
 $(div).effect("bounce", { times:2 }, 200); 
```

jQuery 中是否有与动画或效果相关的事件处理程序？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T19:47:23.160

效果文档显示它的调用如下：

```
effect( effect, [options], [speed], [callback] ) 
```

因此，您可以简单地将函数传递给`callback`参数，一旦效果完成，该函数就会运行。

# jaxb - Mule IDE 无法生成 JAX-WS 客户端

> ID：10420495
> 
> 赞同：2
> 
> 时间：2012-05-02T19:38:32.460
> 
> 标签：jaxb, jax-ws, mule

使用 Mule IDE 版本 3.2.3 调用 JAX-WS Web 服务。在输入 WSDL URL 和包名称后的“导入 WSDL”对话框中，JAX-WS 客户端生成失败并显示错误消息

```
Error generating from WSDL: Thrown by JAXB : A class/interface with same name is already in use. Use a class customization to resolve this conflict. 
```

如何在 Mule IDE 中指定 jaxb 自定义？

![Mule IDE 导入 WSDL](../Images/b90457d5ac499425135f797ceb0d0b15.png) ![骡子IDE JAXB错误](../Images/5098069134d610b1f255c549770eee0b.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-08-04T16:18:21.830

您用黑色覆盖的内容是解决此问题的关键。你确定你没有使用一个保留类，或者一个包名已经被占用了吗？

只需尝试`org.example.helloWorld`并让我们知道它是否仍然失败。

# database-design - 状态信息的数据库设计

> ID：10420500
> 
> 赞同：0
> 
> 时间：2012-05-02T19:38:43.297
> 
> 标签：database-design

如果我正在创建一个数据库来存储所有州、县和城市以及每个州的信息，例如州网站 url、州长等。是设置县功能的最佳方式，例如：

```
'Counties' Table (One)
with two fields -> 'state' and 'county'
Texas      Anderson
Texas      Bell
Texas      Dalhart
New York   Albany
New York   Allegany 
```

每一行都有一个唯一的ID？

或者为每个州制作一个县表？或者制作一个县表，每个州都是不同的字段？

我解释得越多，我几乎可以肯定这是第一种方式，但我以前从未这样做过，所以我想检查一下。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T19:40:43.843

州与县是一对多的关系。足够简单

```
States
PK StateID

StateCounties
FK StateID
PK CountyID 
```

因为县名可能在不同的州重复，您可能希望您的县表有一个县 ID 自动标识号，如 int 作为键。我不确定您为什么要`ID`为该行引入一个附加字段。它的独特之处在于州和县的结合。 **没有一个县可以属于两个州。** 他们可能有相同的名字，但他们不属于同一个州。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T19:41:02.060

我有两个表：STATE 和 COUNTY，COUNTY 和 STATE 之间存在一对多的关系。

# java - 如何计算插入批量大小

> ID：10420502
> 
> 赞同：0
> 
> 时间：2012-05-02T19:38:55.387
> 
> 标签：java, mongodb

我有一个包含这样的文档的集合

```
{userId: "123", profile: [{"prof1":"p"}, {"prof2" : "4"}], loc: "loc"} 
```

我想知道插入文档 100,500,1000 的最佳批量大小数是多少？我该如何计算呢？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T20:29:33.450

最佳总批量插入大小可能会有很大差异。大概 50KB - 500KB。找出答案的最好方法是在几个批量插入大小上进行基准测试，看看哪个在您的驱动程序、MongoDB 版本等上最快。

# php - 将此 php 代码转换为 javascript - strpos、str_replace、substr

> ID：10420504
> 
> 赞同：-5
> 
> 时间：2012-05-02T19:38:56.450
> 
> 标签：php, javascript

我的 javascript 标签中有一段用 PHP 编写的代码。我认为在我的脚本标签中包含所有 javascript 会更好。

所以我需要帮助在 javascript 中转换这 3 行代码：

```
if (strpos($video['thumbs']['master'], '/thumbs_old/') !== false) {
    $position = strpos($video['thumbs']['master'], '.flv');
    $oldFlipBookThumb = str_replace(substr($video['thumbs']['master'], $position), '.flv', $video['thumbs']['master']);
 } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-02T19:44:39.933

看看[php.js](http://phpjs.org/)，它具有用于 JavaScript 的 PHP 函数的特定直接端口。

编辑：正如评论者正确指出的那样，php.js 并非没有缺陷（膨胀、错误），所以到目前为止，最好的解决方案是从那里获取你需要的东西，或者使用 JS 已经提供的东西并对其进行定制.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T19:59:38.750

我为javascript找到了这个，我没有测试它，但也许可以帮助：

```
function strpos (haystack, needle, offset) {
  var i = (haystack).indexOf(needle, (offset || 0));
  return i === -1 ? false : i;
}

//call the function as:
var res='scripts,tutorials,tools';
strpos(res, ',');

//result will be: 2 
```

对于替换：

```
var text = "this is some sample text that i want to replace";
var new_text = text.replace("old", "dont want");
document.write(new_text); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-02T20:24:40.707

使用`search()`字符串对象的方法 - 它返回匹配的位置，如果没有找到匹配则返回 -1

```
var position = -1, oldFlipBookThumb;
var str = '<?php echo $video['thumbs']['master'];?>';
if(str.search("/thumbs_old/" != -1){
    position = str.search(".flv");
}
if(position != -1){
    oldFlipBookThumb = str.replace(str.substring(position, Number(position) + 4), '.flv');
} 
```

我可能弄错了，但在我看来，您正在用字符串“.flv”替换字符串“.flv”。

在任何情况下，`substring()`字符串对象的方法都会提取字符串中“from”和“to”之间的字符，不包括“to”本身。`string.substring(from, to)`

string 对象的`replace()`方法搜索子字符串（或正则表达式）和字符串之间的匹配，并将匹配的子字符串替换为新的子字符串。`string.replace(regexp/substr,newstring)`

# ruby-on-rails - RoR 用户联系员工关系

> ID：10420506
> 
> 赞同：0
> 
> 时间：2012-05-02T19:39:21.670
> 
> 标签：ruby-on-rails

我正在使用设计，所以我有一个用户表。我添加了一个 Employee 表和一个 Contact 表（客户联系人）。每个 Employee 和 Contact 都有自己的 user_id。

建立表关系的最佳方法是什么？

1）员工和联系人是否属于：用户？

2）多态？

谢谢

更新 ==============

正如 Yosep 所说，我更改了代码。

但是，我不知道如何在用户索引列表中显示员工记录中的字段。例如，用户列表（索引）应包含employee.first_name。我试过这个=

```
<% @users.each do |user| %>
  <tr>
    <td><%= user.id%></td>
    <td><%= Employee.where(:user_id => user.id).first_name %> </td><td><%= 
```

我试过这个：

```
<td><%= Employee.find_by_user_id(user).first_name %> </td> code 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T20:01:44.057

像这样的东西...

```
class Employee < ActiveRecord::Base
  belongs_to :user

class Contact < ActiveRecord::Base
  belongs_to :user

class User < ActiveRecord::Base
  has_many :employees
  has_many :contacts 
```

一旦你这样做了，你可以做一些神奇的事情，比如：

```
employees = User.find(1).employees 
```

# c++ - 阵列滚动 2 个骰子

> ID：10420508
> 
> 赞同：1
> 
> 时间：2012-05-02T19:27:50.967
> 
> 标签：c++

编写一个模拟两个模具滚动的程序。然后应计算两个值的总和并将其放置在单下标数组中。打印数组。还要找出 12 出现的次数。

```
#include <stdio.h>
#include <stdlib.h>
#include <time.h>
#define SIZE 13
int main()
{
    int face;   
    int arraysize=13;       
    int counter[13];
    int frequency[ SIZE ]= {13};
    for(int i=0; i<13; i++)
        counter[i] = 0;

    int die1; 
    int die2;

    srand( time( NULL ) );

    for ( int roll1 = 0; roll1 <=36000; roll1++ ) {
        die1 =  1 + rand() % 6;
        die2 =  1 + rand() % 6;
        counter[die1+die2]++;
        ++frequency[ face ];
    }

    printf("%4s%17s\n","Sum of Values","Frequency");

    for(int face=2; face<arraysize;face++)
    {
            printf("%8d%17d\n",face,frequency[ face ]);
     }       

    system("PAUSE");
    return 0;
} 
```

```
打印屏幕
值总和频率
       2 36001
       3 0
       4 0
       5 0
       6 0
       7 0
       8 0
       9 0
      10 0
      11 0
      12 0

```

怎么了 ？？？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-02T19:42:39.963

这条线

```
 ++frequency[ face ]; 
```

总是增加相同的位置，因为循环不会改变`face`你应该做的事情

```
++frequency[die1+die2]; 
```

另外我不知道你为什么两者都有`frequency`，有`counter`什么区别？

编辑：就像有人指出的那样，`face`根本没有初始化（除非您删除了一些代码）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-02T19:43:23.110

```
++frequency[ face ]; 
```

`face`尚未初始化。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-02T19:44:20.533

您似乎没有初始化`face`.

然后你反复访问`frequency[ face ]`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-02T19:45:13.837

`face`尚未初始化。它总是将频率添加到同一位置，因此您只得到两个骰子总和的 1 的计数

# sql - 选择对 SQL 2005 视图的访问，对基础表的访问受到限制

> ID：10420512
> 
> 赞同：0
> 
> 时间：2012-05-02T19:39:55.953
> 
> 标签：sql, security, sql-server-2005, view, schema

我在 SQL 2005 数据库中创建了 SQL 用户 ID、角色和架构。我在此架构下创建了一个 SQL 视图，该视图从 dbo 架构中的表中进行选择。但是，我不希望 SQL 用户能够从此表中进行选择。

例如：

```
CREATE VIEW [MySchema].[vwMyView]
AS
SELECT
    *
FROM
    dbo.MyTable 
```

用户可以访问*MySchema*视图并且可以毫无问题地查询*vwMyView*。但是，他们也可以从 dbo.MyTable 中选择。

如何限制对*dbo.MyTable*的所有访问？如果我拒绝对 dbo 架构的 SELECT 权限，则用户无法从视图中进行选择。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T19:45:17.090

```
REVOKE select 
ON tablename
FROM {user_name} 
```

只是撤销 select 本身并不会撤销其他权限。

然后在视图上执行显式授权选择。不确定这是否可行，因为我从未尝试过这种方式，但值得一试。

# jquery - jQuery隐藏选择菜单？

> ID：10420516
> 
> 赞同：6
> 
> 时间：2012-05-02T19:40:03.817
> 
> 标签：jquery, hide, select-menu

我在这样的选择标签上使用 jQuery 的 selectMenu。

```
$('#ddlReport').selectmenu() 
```

在某些情况下，我想隐藏它，但我不知道如何。

这不起作用：

```
$('#ddlReport').selectmenu().hide(); 
```

这也不是

```
$('#ddlReport').hide(); 
```

任何人？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-09-26T17:20:31.107

在失去了几个小时试图弄清楚这一点之后。我终于把东西包在一个`<div>`里面，然后在 div 上显示/隐藏。当然远非优雅，但它让我远离 jq 移动内部。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2015-10-27T11:57:25.843

对于较新版本的 jQueryUI（我正在使用 1.11.4 版），只需使用“widget”属性：

```
$("#element").selectmenu( "widget" ).hide(); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-02T19:50:10.780

看看[这里](http://view.jqueryui.com/selectmenu/demos/selectmenu/default.html "选择菜单演示")和[这里](http://jquery-ui.googlecode.com/svn/branches/labs/selectmenu/index.html "谷歌代码演示")的演示，似乎 selectmenu 通过附加一个

```
<span class="ui-selectmenu-button">
or (probably different selectmenu versions?)
<a ... class="ui-selectmenu ..."> 
```

在原始选择之后，包含人工选择。

您可以尝试使用

```
$('#ddlReport').next('.ui-selectmenu .ui-selectmenu-button').hide(); 
```

虽然听起来它可能使用其他类（而不是`-button`）。这也是一种骇人听闻的解决方法，我确信该插件包含一些*旨在*让您访问新附加菜单的方法。

编辑：查看第二个演示中的代码，似乎至少没有任何预编程的方式可以访问该版本中的新选择。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2014-08-21T18:27:47.997

```
 $("#ddlReport").parent().hide(); 
```

为我工作。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-06T10:29:40.527

谢谢阿玛图斯！

只想说，这对我有用：

```
$('#ddlReport').next('.ui-selectmenu').hide(); 
```

没有 HTML 中不存在的 .ui-selectmenu-button 类。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-06-04T10:15:04.920

这就是解决方案！

```
$("#yourSelectId").parent().hide(); 
```

用 div 包装或强制使用按钮类肯定更复杂。

# iphone - iOS - 处理数据模型更改的正确方法是什么？

> ID：10420519
> 
> 赞同：3
> 
> 时间：2012-05-02T19:40:18.223
> 
> 标签：iphone, ios, core-data, core-data-migration, xcdatamodel

我已经在应用商店有一个应用。我想做一个升级。我的本地数据存储已更改，增加了一个表，并在现有表中添加了一些字段。我想保留旧表中的数据。我该怎么做呢？有人可以指点我处理这种变化的教程吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-02T21:11:06.317

假设您使用的是 SQLite：使用具有不同名称的新数据库进行更新。在启动时，检查具有旧名称的表，复制所需的数据，并在完成后将其删除。

CoreData 有它自己的更新数据，可能对你有用，也可能对你不起作用。您应该研究如何更改数据模型。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-02T21:17:28.413

查看[Apple](http://developer.apple.com/library/mac/#documentation/cocoa/conceptual/CoreDataVersioning/Articles/Introduction.html)关于迁移核心数据实例的文档。它们使 90% 的案例变得非常容易。基本思想是将 xdatamodel 分解为多个版本，因此它具有迁移路径

**这是一个可以帮助您进行** [核心数据迁移的教程](http://mobile.tutsplus.com/tutorials/iphone/core-data_schema-versioning-and-lightweight-migrations/)

# java - 如何通过ajax修改webflow中的对象？

> ID：10420520
> 
> 赞同：1
> 
> 时间：2012-05-02T19:40:24.643
> 
> 标签：java, ajax, spring-mvc, spring-webflow

我无法理解 ajax、控制器和 Web 流如何交互。

截至目前，我的项目通过流程从不同的视图状态从一个页面移动到另一个页面。

但是，在其中一些不同的页面上，我有一些 ajax 调用被定向到各种控制器，以便在“currentObject”上进行服务器处理。服务返回一个对象，我需要将它作为我的“currentObject”放回网络流中。

只是为了说清楚：我想将对象 A 与对象 B 相关联，对象 A 与“currentObject”相关联。我进行服务器处理并完成关联（因此“currentObject”与关联到对象 B 的对象 A 相关联）并将对象保存到数据库。当我点击“创建新对象”时，web-flow 仍然有“currentObject”，其中对象 A 与对象 B 没有关联。

我想将我更新的“currentObject”从我的控制器放入 web-flow，那么通过 ajax 调用修改 web-flow 中的对象的最佳方法是什么？

亚当

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T17:47:09.320

这是一个棘手的问题。我遇到了类似的情况，发现这篇文章很有帮助：[Ajax + Spring Webflow](https://stackoverflow.com/questions/10603177/ajax-spring-webflow)

基本问题是您的 webflow 中的对象是序列化的，因此仅执行 AJAX 调用，然后像使用普通控制器那样修改数据库中的某些内容是行不通的。

就我而言，基本模型对象是“计划”，我想删除一个名为“任务”的子对象。我在我的 webflow 的 XML 配置中设置了一个转换，如下所示：

```
<transition on="dropTask">
    <evaluate expression="planService.dropTaskFromPlan(requestParameters.taskID,  plan)" />
</transition> 
```

“planService”类将通过我的“Plan”对象运行，找到具有给定 ID 的任务，并将其删除。

这是ajax调用：

```
var targetUrl = $("#actionPlanForm").attr("action") +     '&_eventId_dropTask=_eventId_dropTask';
$.ajax({
    type : 'POST',
    data: $("#actionPlanForm").serialize() + '&taskID=' + taskID,
    url : targetUrl
}); 
```

# safari - Safari 重定向后重新发送相同的表单

> ID：10420523
> 
> 赞同：0
> 
> 时间：2012-05-02T19:40:43.117
> 
> 标签：safari

我目前遇到了一个仅在当前版本的 Safari (5.1.5) 中出现的错误，并且想知道这里是否有人可以提出任何解决方法。我在 5.1.2 中对其进行了测试，它在那里运行良好，我不确定 5.1.3 和 5.1.4，因为我无法访问这些版本。

该错误需要三页，我将显示它们的来源，然后解释发生了什么：

**FirstPageWithForm.htm**

```
<form id="theForm" action="ActionHandler.ashx" method="post">
    <input type="hidden" name="differentField" value="1234"/>
    <input type="hidden" name="sameField" value="1111"/>
</form>

<script type="text/javascript">
    var theForm = document.getElementById("theForm");
    theForm.submit();
</script> 
```

**SecondPageWithForm.htm**

```
<form id="theForm" action="ActionHandler.ashx" method="post">
    <input type="hidden" name="differentField" value="5678"/>
    <input type="hidden" name="sameField" value="1111"/>
</form>

<script type="text/javascript">
    var theForm = document.getElementById("theForm");
    theForm.submit();
</script> 
```

**动作处理器.ashx**

```
public void ProcessRequest(HttpContext context)
{
     var referrer = context.Request.UrlReferrer;
     var differentField = context.Request["differentField"];
     context.Response.Write(differentField);
     if (differentField == "1234")
     {
         if (referrer.ToString().Contains("Second"))
             context.Response.Write("Failure");
         else
         {
             context.Response.Redirect("SecondPageWithForm.htm");
         }
     }
     else
        context.Response.Write("Success");
} 
```

如您所见，两个表单具有相同的字段名称，但其中一个字段具有不同的值。但是，在运行此代码时，在 Safari 中，该值`"1234"`被发送为`differentField`而不是`"5678"`. 我不相信这个错误与 .NET 有任何关系，但我没有一种简单的方法来测试另一种语言来确定这一点。

我已经尝试过的事情：

*   将表单提交代码放在一个函数中，然后调用它。
*   需要 Jquery 并在 $(document).ready() 函数中调用它。
*   将函数调用放在 setTimeout() 中。
*   用我按下的按钮替换该功能。
*   复制处理程序并将第二个表单发送到副本。

这些方法中的每一种都具有相同的效果，即打印“失败”而不是“成功”。
我将在 Safari 论坛上提交此错误（我没有 Apple 开发人员帐户，目前无法创建新帐户），但我希望有人可以帮助我想出一个合适的解决方法这个问题，直到他们解决它。

编辑：Safari 论坛错误报告：[https ://discussions.apple.com/thread/3921507](https://discussions.apple.com/thread/3921507)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T14:48:55.953

NicolasIgot 在我的 Safari 论坛上找到了解决我问题的方法。

我刚刚`autocomplete="off"`在第二个表单上添加了表单标签，一切又开始工作了。我还没有在我的真正问题上尝试过，但它适用于我的简单测试用例，所以我对它有信心。

# selenium - 将 Selenium WebDriver GRID 2 实施集成到 Quality Center 的最佳方法是什么？

> ID：10420525
> 
> 赞同：1
> 
> 时间：2012-05-02T19:40:44.113
> 
> 标签：selenium, grid, webdriver, hp-quality-center

我们正在使用 Quality Center 来管理我们的测试用例和手动测试执行。Quick Test Professional 并不能完全满足我们的需求，因此我们已经开始实施 WebDriver + Java + TestNg + GRID2。TestNg 从 TestNg 集中处理事物，它将测试组织成套件，允许数据驱动测试的参数，生成报告、日志和可能的屏幕截图。

Quality Center 还假设它是测试“宇宙”的中心，它用于触发所有测试，包括自动和手动测试，并负责处理和存储结果。

我的问题是，我们如何使用 Quality Center 来：

a) 作为需求和测试用例
的中央存储库 b) 作为测试执行结果的中央存储库

同时利用 TestNg + Selenium + Java + GRID2 来：

a) 在不同平台和浏览器上进行测试 b) 利用并行测试执行
c) 利用云中的分布式测试执行

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-08-28T07:40:11.647

我认为有两种可能的方法：要么使用 Quality Center 作为主控来执行测试，并以某种方式将结果写回它，要么使用 TestNg（或您使用的任何工具）来触发测试并拥有一些反映您的脚本在 Quality Center 中进行测试，并将测试结果导入其中。我认为需要前者来支持您的要求a），后者应该足以满足b）。

要从 Quality Center 开始测试，您可以简单地使用 VAPI-XP 测试来启动一些执行测试的脚本。在 VAPI-XP 脚本中，您必须解析结果并相应地设置测试运行的状态。也许在 Quality Center 中定义自定义测试类型还有更好的方法，但我没有任何经验。

通常，我更喜欢在 Quality Center 外部管理自动化测试并从 Quality Center 外部启动它们。我认为这是更好的方法——它让您可以使用任何您想要的东西来触发测试（例如 Jenkins），并最大限度地减少您对 Quality Center 的依赖。困难的部分是在 Quality Center 中镜像您的测试。通常我使用 OTA 脚本将测试用例导入质量中心，覆盖需求并在测试实验室中创建测试集。每次执行测试用例后，我都会自动将运行添加到测试实验室中的测试中，并附加任何必要的内容以满足测试经理对可追溯性的需求（使用在测试执行后运行的 OTA 脚本）。除了使用 OTA，还可以使用 Quality Center 的 REST API 进行导入。

根据经验，我尽量在质量中心做尽可能少的事情，只导入满足项目需求所需的任何东西，它是测试经理......

# jquery - 日期选择器不适用于 IE 8.0

> ID：10420528
> 
> 赞同：2
> 
> 时间：2012-05-02T19:40:47.790
> 
> 标签：jquery, jquery-ui

我正在使用 jQueryUI-datepicker 控件在我的 ASP.NET MVC 应用程序中显示日历。

使用以下代码，日期选择器会在 FF 和 Chrome 上正常弹出。

```
 $("#Scheduled").datepicker(); 
```

但在 IE 8.0 上，它根本不显示。使用开发工具，这是我看到的：

```
<input name="Scheduled" id="Scheduled" type="text" jQuery1335986904515="11" jQuery17109478568619873011="8" value="5/31/2012 12:00:00 PM"/> 
```

我错过了什么？

编辑：我的页面上有以下脚本：

```
<script type="text/javascript" src="/Scripts/uploadify/jquery-1.7.1.min.js"></script>  
<script type="text/javascript" src="/Scripts/uploadify/jquery.uploadify.v2.1.4.js"></script>  
<script type="text/javascript" src="/Scripts/uploadify/swfobject.js"></script>     
<script type="text/javascript" src="/js/component/jquery-ui-1.8.20.custom.min.js"></script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T13:17:39.890

```
 <input name="Scheduled" id="Scheduled"  readonly="true"  type="text"/> 
```

//在脚本中

```
 $("#Scheduled").datepicker({ dateFormat: 'dd/M/yy', changeMonth: true, changeYear: true });
    $("#Scheduled").datepicker("setDate", new Date('31/may/2012')) 
```

并更改此顺序

```
 <script type="text/javascript" src="/Scripts/uploadify/jquery-1.7.1.min.js"></script> 
 <script type="text/javascript" src="/js/component/jquery-ui-1.8.20.custom.min.js"></script>
 <script type="text/javascript" src="/Scripts/uploadify/jquery.uploadify.v2.1.4.js"></script>  
 <script type="text/javascript" src="/Scripts/uploadify/swfobject.js"></script> 
```

# html - :active 在 IE8 中不起作用

> ID：10420534
> 
> 赞同：0
> 
> 时间：2012-05-02T19:41:03.647
> 
> 标签：html, css, internet-explorer-8, css-selectors

:active 代码适用于所有浏览器，**除了 IE8**（不是 9）。我已经查看了其他类似的问题，并尝试了不同的方法。这是代码：

HTML：

```
<div id="main" style="color:white;font-family:Georgia">
   <div id="button" onmouseup="someFunction()"></div>
   <!-- other things -->
</div> 
```

CSS：

```
#button
{
  position: relative;
  width: 241px;
  height: 41px;
  background-image:url("images/buttonStatic.png");
  display: none;
}

#button:hover
{
  background-image:url("images/buttonHover.png");
}

#button:active
{
  background-image:url("images/buttonActive.png");
} 
```

该按钮显示正确，当我将鼠标悬停在它正确时会更改为第二个按钮，但当我单击它时不会更改为第三个按钮。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T20:01:04.987

我刚刚在 IE8 中尝试过，效果很好。确保您的 DOCTYPE 规范声明正确`<!doctype html>`，并可能尝试放入 IE 兼容性元标记，类似于`<meta http-equiv="X-UA-Compatible" content="IE=Edge"/>`.

附带说明一下，您不应该将`<DIV>`元素用作这样的按钮。你应该使用`<button>`或`<a>`抑制行为。

## 编辑

这是我的代码...

```
<!doctype html>
<html>
    <head>
        <meta http-equiv="X-UA-Compatible" content="IE=Edge"/>
        <title>Active Button</title>
        <link rel="stylesheet" type="text/css" href="http://yui.yahooapis.com/combo?3.5.0/build/cssreset/cssreset-min.css&3.5.0/build/cssfonts/cssfonts-min.css"/>
        <style type="text/css">
            .button {
                padding: 4px 12px;
                border: solid #555 1px;
                background-color: #ddd;
                }
            .button:hover {
                background-color: #eee;
                }
            .button:active {
                background-color: #09c;
                color: #fff;
                }

            .frame {
                padding: 2em;
                }
        </style>
    </head>
    <body>
        <div class="frame">
            <button class="button">I'm a Button</button>
        </div>
    </body>
</html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T19:47:14.357

您的代码很好，这是 IE8 中的一个已知错误（抱歉，差异）。

# c# - 使用什么来构建跨平台应用程序？

> ID：10420540
> 
> 赞同：2
> 
> 时间：2012-05-02T19:41:32.130
> 
> 标签：c#, java, frameworks

我正在寻找有关我正在尝试构建的跨平台应用程序的一些实施建议。我希望有一些直接的东西。

我想创建一个适用于 Windows 和 Mac 的小型应用程序，允许用户在安装时输入他们的用户名和密码，一旦完成，就可以作为**后台服务**每秒轮询我的服务器以执行任务。它们主要是文件读/写和上传操作。

我目前正在考虑使用[Mono 项目](http://www.mono-project.com/CSharp_Compiler)，但是，尽管我对 C# 很满意，但我从未使用过它。

还有其他我应该考虑的选择吗？我不确定Java，因为我觉得界面在不同平台上可能很难看/不同。

我希望我的应用程序在用户必须去获取的依赖项方面没有摩擦。

我很感激对此的任何意见。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T19:46:53.173

关于外观和感觉：

我不会太担心跨平台 Java 应用程序的外观和感觉。Java 的 Nimbus 外观和感觉实际上看起来相当不错，并且已经与 Java 捆绑在一起：http: [//docs.oracle.com/javase/tutorial/uiswing/lookandfeel/nimbus.html](http://docs.oracle.com/javase/tutorial/uiswing/lookandfeel/nimbus.html)

此外，您可以找到许多不同的免费、跨平台、外观和感觉，您可以将它们与您的软件捆绑在一起。我本人是 TinyLAF 外观和感觉的忠实粉丝：http: [//www.muntjak.de/hans/java/tinylaf/tinyscreen.html](http://www.muntjak.de/hans/java/tinylaf/tinyscreen.html)

我用 Java 编写了几个经济学应用程序，我认为它们在 Mac 和 Windows 机器上看起来都不错。（我唯一发现的是，Mac 上的菜单栏有时看起来很奇怪。）

--

要注意的另一件事是 Mac 和 Windows 机器上的文件结构差异。如果您的程序涉及外部文件，请确保您没有在任何特定于平台的内容（如目录分隔符）中进行硬编码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T20:18:59.943

如果你想要一个漂亮的 UI，你也可以考虑 JavaFX（一种基于 Java 的 RIA 技术）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-02T19:45:10.540

对于用户界面，有一些点点滴滴的调整，但使用系统观感，体验相当流畅（看起来像其他原生应用程序）。在 Java 应用程序中，您可以为整个应用程序配置外观，使其看起来非常集成且非常自然。所以我不会太害怕。

对于 C#，我认为这只适用于 Windows 而不是 Mac，但也许这已经改变了？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-02T20:27:25.430

首先，我认为您不会摆脱无依赖关系的应用程序。使用 Mono，你必须安装它。就此而言，Java 也是如此。

我会考虑在您的客户端应用程序中有两个组件。一种是后台工作人员，它将轮询您的服务器并完成工作。另一个是处理登录的 GUI 应用程序，诸如此类。前者可以是用 Java 编写的应用程序。GUI 客户端可以是 Java 或其他平台，或者即使这样，也可以为每个操作系统提供一个端口，因为此时它应该是一个非常简单的应用程序。

就个人而言，我建议避免使用 Mono，因为该项目实际上不再由任何人维护。如果您真的不喜欢 Java 提供的 UI 选项，也许您应该考虑使用 Flex。但是，您谈论的是具有昂贵开发工具的专有平台。真的，我认为您应该重新考虑 Java 提供的功能。它不像以前那样，带有 1990 年代 X-windows 外观的丑陋、粉红色的界面项目。Eclipse 就是一个典型的例子。

# objective-c - iOS：方向获取未来 self.view.bounds

> ID：10420541
> 
> 赞同：4
> 
> 时间：2012-05-02T19:41:37.310
> 
> 标签：objective-c, ios, rotation, orientation, bounds

**背景：**我想将我的内容的变化与方向一起动画化。我的内容位置是相对于`self.view.bounds`.

**问题：**为了使内容与边界一起动画，我需要知道视图的边界最终是什么。我可以对其进行硬编码，但我希望找到一种更动态的方式。

**代码：**所以所有动画都`willRotateToInterfaceOrientation`按照以下方式进行：

```
- (void)willRotateToInterfaceOrientation:(UIInterfaceOrientation)toInterfaceOrientation duration:(NSTimeInterval)duration {
    //centering the image
    imageView.frame = CGRectMake(self.view.bounds.origin.x + (self.view.bounds.size.width - image.size.width)/2 , self.view.bounds.origin.y + (self.view.bounds.size.height - image.size.height)/2, image.size.width, image.size.height);
    NSLog(@"%d",[[UIDevice currentDevice] orientation]);
    NSLog(@"%f", self.view.bounds.origin.x);
    NSLog(@"%f", self.view.bounds.origin.y);
    NSLog(@"%f", self.view.bounds.size.width);
    NSLog(@"%f", self.view.bounds.size.height);

} 
```

边界*在*方向改变之前。因此，这仅在转换为 180 度时才有效。如果我要使用`didRotateFromInterfaceOrientation`，动画将在看起来很糟糕的方向更改*之后。*

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-02T19:52:39.517

改为使用`willAnimateRotationToInterfaceOrientation:duration:`。从旋转动画块中调用此方法，此时所有边界都已正确设置。[文档。](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIViewController_Class/Reference/Reference.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T19:52:28.527

如果你希望它是动态的，那么当你初始化 imageView 时，设置`autoresizingMask`属性，以便当 imageView 的超级视图在旋转时调整大小时，边距可以自动调整大小......

```
 imageView = //init imageView
 imageView.autoresizingMask = UIViewAutoresizingFlexibleTopMargin|UIViewAutoresizingFlexibleBottomMargin|UIViewAutoresizingFlexibleLeftMargin|UIViewAutoresizingFlexibleRightMargin;
 //addtional config 
```

这意味着您只需要设置一次框架，然后 imageView 将始终调整自身以保持在中间。

查看 UIView 类参考[http://developer.apple.com/library/ios/ipad/#documentation/uikit/reference/uiview_class/uiview/uiview.html](http://developer.apple.com/library/ios/ipad/#documentation/uikit/reference/uiview_class/uiview/uiview.html)看看你还能用 autoresizingMask 属性做什么

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-02T19:52:53.430

如果我对您的理解正确，**您只需要在您的 CGRectMake 中交换 X/Y 坐标和宽度/高度**，以获得 90 度变化的未来布局。如果是180度变化，那么和现在一样

```
CGRectMake(self.view.bounds.origin.y + (self.view.bounds.size.height - image.size.height)/2 , self.view.bounds.origin.x + (self.view.bounds.size.width - image.size.width)/2, image.size.height, image.size.width); 
```

# mysql - Mysql查询显示A列数据的问题

> ID：10420544
> 
> 赞同：0
> 
> 时间：2012-05-02T19:41:47.097
> 
> 标签：mysql

我正在尝试从下拉菜单中运行此查询，类别和目标数据工作正常，只是不是子类别，这可能是我的 Html 或 JavaScript 的问题，但我想获得 MYSQL 专家的意见，如果有吗？我对 PHP 和 MYSQL 还是很陌生，但是学习速度很快，不确定我的 HTML 是否会在这里发布，所以我会问是否有人可以确认我的查询应该可以正常工作。多谢你们。

```
$category=$_POST['Category'];
$subcategory=$_POST['Subcategory'];
$destination=$_POST['Destination'];

$result = mysql_query("SELECT * FROM travel WHERE Category='$category' AND        Subcategory='$subcategory' AND Destination='$destination'")
or die(mysql_error()); 
```

$row = mysql_fetch_array( $result ) ;

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T19:53:48.600

不确定这是否是您的罪魁祸首，但您必须先转义来自用户的数据，然后再将其传递给查询：

```
$category=mysql_real_escape_string($_POST['Category']); 
$subcategory=mysql_real_escape_string($_POST['Subcategory']); 
$destination=mysql_real_escape_string($_POST['Destination']);
.... 
```

# ruby-on-rails - 如何使用带有 redirect_to 的字符串？

> ID：10420546
> 
> 赞同：2
> 
> 时间：2012-05-02T19:41:57.227
> 
> 标签：ruby-on-rails, redirect

我敢肯定这是一个愚蠢的问题，所以提前道歉。我想在我的 redirect_to 中使用一个字符串，如下所示：

```
class AppStoreController < ApplicationController

  def get_app
    .
    .
    .
    redirect_path_string = "address_book_path"
    redirect_to redirect_path_string
  end

end 
```

（redirect_path_string 将使用控制器中的可用变量构建，但我想为这个问题抽象出那个细节。）

当我这样做时，我的浏览器中出现“连接已重置”。

有什么想法吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-02T19:48:49.537

您需要提供完全限定的 URL 才能对 redirect_to 使用字符串。Rails 利用约定从 *_path 生成 URL，在本例中为“address_book_path”。以下是您可以使用redirect_to 执行的一些示例。有关更多信息，请访问[http://apidock.com/rails/ActionController/Base/redirect_to](http://apidock.com/rails/ActionController/Base/redirect_to)

```
redirect_to :action => "show", :id => 5
redirect_to post
redirect_to "http://www.rubyonrails.org"
redirect_to "/images/screenshot.jpg"
redirect_to articles_url
redirect_to :back 
```

# sql - SQL 错误：不是唯一的表/别名

> ID：10420548
> 
> 赞同：-1
> 
> 时间：2012-05-02T19:42:12.017
> 
> 标签：sql

我越来越

```
Error Number: 1066

Not unique table/alias: 'default_event_rel_type' 
```

我的查询是：

```
SELECT `default_users`.`username` as user,
       `default_event_rel_type`.`title` as title
  FROM (`default_event_rel`, `default_event_rel_type`)
  JOIN `default_users` ON `default_event_rel`.`uid` = `default_users`.`id`
  JOIN `default_event_rel_type` ON `default_event_rel_type`.`id` = `default_event_rel`.`eid` 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T19:46:39.350

看起来您的`FROM`子句中的语法不正确。你打`default_event_rel_type`了两次电话。你只需要在你的`JOIN`. 您不需要在`FROM`子句中包含它。

```
SELECT `default_users`.`username` as user, `default_event_rel_type`.`title` as title 
FROM `default_event_rel`
JOIN `default_users` 
    ON `default_event_rel`.`uid` = `default_users`.`id` 
JOIN `default_event_rel_type` 
    ON `default_event_rel_type`.`id` = `default_event_rel`.`eid` 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T19:47:25.887

您在 From 语句中有表格

来自 ( `default_event_rel`, `default_event_rel_type`)

然后稍后在查询中加入它。

# android - 如何在某个 x,y 坐标处测试点击？

> ID：10420550
> 
> 赞同：8
> 
> 时间：2012-05-02T19:42:13.663
> 
> 标签：android, testing

对于在 Android 应用程序上运行测试，如何自动点击视图或屏幕的 ax,y 坐标？

我希望在 ActivityInstrumentationTestCase2 或 TouchUtils 中有一些调用，但还没有找到。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-02T20:26:08.833

所以，这个我没有尝试过，但是通过文档看一下，你可以做一些事情来达到这个效果：

1.  捕获一个`ACTION_DOWN` `MotionEvent`（通过触摸操作的调试器）并记下它的属性（停机时间、事件时间和元状态）。这只需要完成一次，以确定您应该使用什么样的值来模拟典型的触摸事件。

2.  在您的测试程序中，创建一个新`MotionEvent`的`MotionEvent.obtain()`

    `MotionEvent newTouch = MotionEvent.obtain(downTime, eventTime, MotionEvent.ACTION_DOWN, x, y, metaState);`

3.  在您的视图上调度事件：

    `view.dispatchTouchEvent(newTouch);`

# qt - Qt中是否有显示代码分支的控件？

> ID：10420555
> 
> 赞同：3
> 
> 时间：2012-05-02T19:42:35.730
> 
> 标签：qt, controls, pyqt4

我正在尝试使用 Qt 显示某种分支。我该怎么做？我必须自己画吗？是否有一些控制/事情会为我做这件事？

[![例子](../Images/6092db13b6f79dbffaf2ae76e47b8806.png)](https://i.stack.imgur.com/9bX94.png)
[（来源：[hades.name](http://hades.name/media/git/git-head.png)）]

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T19:53:44.740

你必须自己做，使用`QGraphicsScene`and `QGraphicsView`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T12:03:51.623

要布局图形，您可能需要查看[GraphViz](http://www.graphviz.org/) - 图形可视化工具。

您可以只使用 GraphViz 算法进行布局（使用普通输出），然后使用 Qt 库进行绘制（`QGraphicsScene`/`QGraphicsView`推荐 @cbamber85 ），或者您可以从 GraphViz 渲染一个 PNG，然后显示它。

您可能想查看[KCacheGrind](http://kcachegrind.sourceforge.net/html/Home.html)，因为这是一个使用 GraphViz 来布置调用图的 Qt 应用程序。

# c# - 如何评估以字符串形式给出的算术表达式

> ID：10420560
> 
> 赞同：0
> 
> 时间：2012-05-02T19:43:01.470
> 
> 标签：c#, string, math

我做了一个 GUI 计算器。因此，当有人按下按钮时，数字和符号会显示在标签中，然后当他们按下 Enter 时，计算机会捕获字符串，这就是我需要帮助的地方。我知道在 Python 中有一个可以使用的 eval 语句，在 C# 中有类似的东西。

如果有帮助，这是代码。具体看方法button_click

```
public class form1 : Form
{
    private Label lab;
    private Button button2;
    private Button button;
    private Button plus;
    private MathFunctions.MathParser calc;

    public static void Main()
    {
        Application.Run(new form1());
    }

    public form1()
    {
       // Initialize controls
       ...
    }

    private void button_Click(object sender,System.EventArgs e)
    {
        string answer = lab.Text;
    }

    private void button2_Click(object sender,System.EventArgs e)
    {
        lab.Text = lab.Text + "2";
    }

    private void button_plus(object sender,System.EventArgs e)
    {
        lab.Text = lab.Text + "+";
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T19:46:26.620

在 C# 中，您没有 eval。原则上，您可以在运行时生成代码、编译它、制作程序集然后执行代码，或者您可以通过发出 IL 来生成动态方法，但所有这些都不是很直接。

我建议您只使用一种众所周知的方法解析字符串，然后创建[表达式树](http://msdn.microsoft.com/en-us/library/bb397951.aspx)。

或者，您可以仅将已弃用的 javascript 引擎用于解析表达式。

请参阅[评估数学表达式的最佳和最短方法](https://stackoverflow.com/questions/1437964/best-and-shortest-way-to-evaluate-mathematical-expressions)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T19:52:10.743

既然你熟悉 python 为什么不使用它呢？在您的 C# 代码中创建 IronPyton 脚本引擎对象。这是一个片段：

```
string expression = lab.Text; // @"540 +  4 / 3" try to test

ScriptEngine engine = Python.CreateEngine();
ScriptSource source = engine.CreateScriptSourceFromString(expression, SourceCodeKind.Expression);

int result = source.Execute<int>(); 
```

# php - wordpress中奇怪的自定义函数输出

> ID：10420561
> 
> 赞同：2
> 
> 时间：2012-05-02T19:43:02.173
> 
> 标签：php, wordpress

我对 Wordpress 有疑问。我正在运行这个功能：

```
function name($text = '', $relative = false, $icon = true) {

echo $text;
echo $relative;
echo $icon;

} 
```

它的输出只是“1”（一）。这怎么可能？不应该是 3 行代码（3 个答案）？我在 Windows 7 上使用 apache 2.4、php 5.4.1 和 wordpress 3.4 beta 3。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T19:54:57.330

那是正确的。

```
<?php
$text='';
$relative=false;
$icon=true;

echo $text;
echo $relative;
echo $icon;

?> 
```

第一个为null，第二个为false，被视为0，输出为null。最后一个为真，即 1。Wich 使输出为 1。

如此处所示：

```
1 
```

（上述脚本的输出）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T20:00:04.253

如果您为每个回声添加包装假人和换行符，您会发现为什么它只显示“1”：

```
function name($text = '', $relative = false, $icon = true) {

echo "text:".$text.";<br>";
echo "relative:".$relative.";<br>";
echo "icon:".$icon.";<br>";

}

name(); 
```

输出：

```
text:;
relative:;
icon:1; 
```

# c++ - 如何同时使用 GTK 和 glut？

> ID：10420562
> 
> 赞同：4
> 
> 时间：2012-05-02T19:43:14.250
> 
> 标签：c++, c, gtk, glut

我知道为了编写 GTK 应用程序，我编写了一堆代码来描述放在主窗口中的内容，然后我调用：

```
gtk_main(); 
```

在此之后的任何代码语句都不会被执行。

现在让我们假设我希望我的 GTK 应用程序显示我用 glut 编写的东西，它本身包含一堆关于需要设置哪些图形等的语句，然后以语句结束：

```
glutMainLoop(); 
```

在此之后的任何内容都不会执行。

所以我的问题是这两个语句中的任何一个都阻止我调用另一个。

1.  有没有办法在 GTK 小部件中执行 glut 主循环？
2.  有没有办法编写可以同时调用 GTK 主循环和 glut 主循环的代码（但从主程序调用并在单独的 X 窗口中呈现，而不是在小部件内）？我有一种感觉，这可以用“线程”来完成......

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-02T19:45:16.560

你没有。一般没有什么意义。

GLUT 是一个用于创建和管理 OpenGL 窗口的库。GTK 中已经*有*一个 OpenGL 窗口。如果您使用的是 GTK，那么使用 GLUT 毫无意义。这就像拥有两个向量数学库或其他东西。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-03T07:34:23.720

您正在运行主循环。`gtk_main()`运行直到`gtk_quit()`被调用。

**[GTK.org 上的 gtk_main()](http://www.gtk.org/api/2.6/gtk/gtk-General.html#gtk-main)**

> 运行主循环，直到`gtk_main_quit()`被调用。您可以嵌套调用 gtk_main()。在这种情况下， gtk_main_quit() 将使主循环的最内层调用返回。

此外，`glutMainLoop()`工作方式相同，它永远处理 GL 事件。

**[OpenGL.org 上的 glutMainLoop()](http://www.opengl.org/documentation/specs/glut/spec3/node14.html#SECTION00041000000000000000)**

> `glutMainLoop()`进入 GLUT 事件处理循环。该例程在 GLUT 程序中最多应调用一次。一旦被调用，这个例程将永远不会返回。它将根据需要调用已注册的任何回调。

所以，你不想同时执行这两件事（我认为它们可能会相互干扰，所以你可能会得到意想不到的结果）然后你需要`gtk_main_iteration()`从内部过剩调用。

**[GTK.org 上的 gtk_main_iteration()](http://www.gtk.org/api/2.6/gtk/gtk-General.html#gtk-main-iteration)**

> 运行主循环的单次迭代。如果没有事件等待处理，GTK+ 将阻塞直到注意到下一个事件。如果您不想阻止查看 gtk_main_iteration_do() 或首先使用 gtk_events_pending() 检查是否有任何事件未决。

现在.. GLUT 没有等效项，`gtk_main_iteration()`因此您将需要注册 GLUT 回调。

您可以使用 GLUT 注册一个回调，该回调`gtk_main_iteration()`使用 `glutIdleFunc(void (*func)(void))`它将为每一帧运行一个回调 - [glutIdleFunc()](http://www.opengl.org/documentation/specs/glut/spec3/node63.html#SECTION000818000000000000000) ..

或者你可以给一个回调来调用并检查每 200 毫秒左右`glutTimerFunc(unsigned int msecs, void (*func)(int value), value)`的返回值。`gtk_main_iteration()`

我可能会同时尝试这两种方法，`glutIdleFunc()`可能并不总是经常被调用以获得良好的响应能力。

[**不过，推动GTK 的 GL 支持**](http://projects.gnome.org/gtkglext/)确实值得一看。

# android - Android Google Maps 将标记位置保存到 MySQL 数据库

> ID：10420568
> 
> 赞同：0
> 
> 时间：2012-05-02T19:44:02.770
> 
> 标签：android, mysql, google-maps, google-maps-markers, android-mapview

我对 Android 和一般编程非常陌生。我正在开发一个 Android 应用程序，允许用户在谷歌地图上放置一个标记，一旦放置了标记，它的位置（纬度和经度）将被上传到存储在服务器上的外部 MySQL 数据库中。

我按照这些教程系列使我的 Google 地图在 Android 上正常工作：

[谷歌地图教程](http://www.youtube.com/watch?v=lywa-2-lQCg)

现在我希望能够将纬度和经度上传到我的数据库，但我不知道该怎么做。

这是我现在拥有的代码：

```
public class Main extends MapActivity implements LocationListener{
/** Called when the activity is first created. */

//set variables
MapView map; //set map to mapview
long start; //create a starting point when the user presses down on the map
long stop; //create a stop point when the user stops pressing down on the map
MapController controller; //create a map controller that animates where the user is going through the map activity
int x, y; //x and y position on the overlay when the user touches the screen
GeoPoint touchedPoint; //create a geopoint as touchedPoint
Drawable d; //create drawable item
List<Overlay> overlayList; //setup list of overlays
LocationManager lm; //setup location manager
String towers; //setup string called towers
int lat; //create lattitude for the phone's current position
int longi; //create longitude for the phone's current position
private ArrayList<ToDoItem> todoItems;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    map = (MapView)findViewById(R.id.mvMain);//set map to mapview in the main.xml
    map.setBuiltInZoomControls(true);//zoom function

    Touchy t = new Touchy();//new instance of touchy class
    overlayList = map.getOverlays();//list of overlays
    overlayList.add(t);//add touchy instance (t) to a list of overlays
    controller = map.getController();//setup controller
    GeoPoint point = new GeoPoint(51643234, 7848593);//setup geopoint
    controller.animateTo(point);//animate controller to that location
    controller.setZoom(6);//set zoom level

    //create drawable item and its location
    d = getResources().getDrawable(R.drawable.yellow);

    //Placing marker at location
    //retrieve location manager for controlling the location updates 
    lm = (LocationManager) getSystemService(Context.LOCATION_SERVICE);
    Criteria crit = new Criteria();//setup criteria

    towers = lm.getBestProvider(crit, false);//return the provider that best fits the given criteria
    Location location = lm.getLastKnownLocation(towers);//access location through location manager and get the last known location called towers

    if (location != null){
        lat = (int) (location.getLatitude() *1E6);//get latitude
        longi = (int) (location.getLongitude() *1E6);//get longitude
        //add overlay to the list
        GeoPoint ourLocation = new GeoPoint(lat, longi);//setup geopoint as ourLocation with lat and long
        OverlayItem overlayItem = new OverlayItem(ourLocation, "Hello", "2nd String");//pass in outLocation to OverlayItem
        CustomMarker custom = new CustomMarker(d, Main.this);
        custom.insertPinpoint(overlayItem);
        overlayList.add(custom);
    }else{
        Toast.makeText(Main.this, "Couldn't find provider", Toast.LENGTH_SHORT).show();
    }

}

@Override
protected void onPause(){
    super.onPause();
    //when pause is pressed remove location updates
    lm.removeUpdates(this);
}

@Override
protected void onResume(){
    super.onResume();
    //when the resume is pressed request location updates
    lm.requestLocationUpdates(towers, 500, 1, this);
}

@Override
protected boolean isRouteDisplayed() {
    // TODO Auto-generated method stub
    return false;
}

//overlay class that handles all touch events
class Touchy extends Overlay{
    public boolean onTouchEvent(MotionEvent e, MapView m){ //onTouchEvent method which includes a motion even and a map view
    if(e.getAction() == MotionEvent.ACTION_DOWN){ //when the user presses down on the overlay
        start = e.getEventTime();//start point when the event happens 
        x = (int) e.getX();//x and y coordinates based on where the user touched the overlay
        y = (int) e.getY();
        touchedPoint = map.getProjection().fromPixels(x, y);//sets a geopoint based on where the user has touched on the screen. Relates the map activity to the user's actual touch on the overlay

    }
    if (e.getAction() == MotionEvent.ACTION_UP){ //when the user stops pressing down on the overlay
        stop = e.getEventTime();//stop point when the event happens
    }
    if (stop - start > 1500){ //if the user presses on the overlay for more than 1.5 seconds
        AlertDialog alert = new AlertDialog.Builder(Main.this).create();//setup alert dialog for the Main class
        alert.setTitle("Pick an Option");//set the title for the alert
        alert.setMessage("Please pick an option");//set the message for the alert

        //BUTTON 1
        //set a button for the alert. Refer to a dialogue interface for this OnClickListener
        alert.setButton("Place a Marker", new DialogInterface.OnClickListener() {

            //when the button is clicked
            public void onClick(DialogInterface dialog, int which) {
                // TODO Auto-generated method stub

                OverlayItem overlayItem = new OverlayItem(touchedPoint, "Hello", "2nd String");//setup overlay item and refer to touchedPoint which is geopoint
                CustomMarker custom = new CustomMarker(d, Main.this);//setup a custom marker with a "d" in the Main class
                custom.insertPinpoint(overlayItem);//add an overlayItem to the pinpoint array list
                overlayList.add(custom);//add custom overlay to the overlay list
                map.invalidate();//make MapView draw itself
                SaveRemote();
            }
        }); 
```

这不是我程序中的所有代码，但我尝试包含与我的问题相关的所有内容，并且可能会帮助您解决它。

如果您向下滚动到“按钮 1”，您可以看到我编写的代码，它在用户按下的位置放置了一个标记。在 Button 1 代码的最后，我调用了一个方法 SaveRemote，该方法负责根据标记的放置位置保存实际的纬度和经度。

我不知道在这个方法中放什么以及如何将它连接到我的主程序并从用户按下的位置获取实际的纬度和经度。

这是我编写的方法的代码

```
public void SaveRemote(){

      String result = "";

         InputStream is = null;
         try{
             HttpClient httpclient = new DefaultHttpClient();
             HttpPost httppost = new HttpPost("myservername.com/insert.php");

             ArrayList<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>();

              }catch(Exception e){
                 Log.e("log_tag", "Error in http connection"+e.toString());
            }
          } 
```

如您所见，我在服务器上调用 insert.php 文件，该文件运行插入查询，将标记的纬度和经度添加到数据库中。

这是实际的 insert.php 代码：

```
 $con = mysql_connect("localhost","username","password");
if (!$con)
  {
  die('Could not connect: ' . mysql_error());
  }

mysql_select_db("mydatabase", $con);

$result = mysql_query("INSERT INTO markers (lat, lng) VALUES (lat, lng)";

mysql_close($con); 
```

我非常感谢您的帮助，因为我不知道如何将标记的位置发送到 SaveRemote 方法，该方法又会将这些数据发送到 php 文件。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-04-14T03:43:24.177

嘿，我可能有点晚了，但你可以使用 setOnMarkerDragListener 解决这个问题，如下所示：

```
 map.setOnMarkerDragListener(new GoogleMap.OnMarkerDragListener() {
                @Override
                public void onMarkerDragStart(Marker marker) {
                    //Toast.makeText(TerminosYC.this.getActivity(), "Arrastra el marcador, hasta el lugar deseado",
                    //        Toast.LENGTH_SHORT).show();
                    LatLng position = marker.getPosition();
                    map.animateCamera(CameraUpdateFactory.newLatLngZoom(
                            new LatLng(position.latitude, position.longitude), 15));
                }

                @Override
                public void onMarkerDrag(Marker marker) {
                      //       System.out.println("Arrastrando...");
                    LatLng position = marker.getPosition();
                    map.animateCamera(CameraUpdateFactory.newLatLngZoom(
                            new LatLng(position.latitude, position.longitude), 15));
                }

                @Override
                public void onMarkerDragEnd(Marker marker) {
                    LatLng position = marker.getPosition();
                    latitudeeeee = position.latitude;
                    longitudeeee = position.longitude;
                    //Toast.makeText(
                    //        TerminosYC.this.getActivity(),
                    //        "Lat " + position.latitude + " "
                    //                + "Long " + position.longitude,
                    //        Toast.LENGTH_LONG).show();

                    //map.animateCamera(CameraUpdateFactory.newLatLngZoom(
                    //        new LatLng(position.latitude, position.longitude), 15));

                }
            });

        }
    }); 
```

# azure - 是否可以从 azure 存储队列中获取消息两次？

> ID：10420570
> 
> 赞同：4
> 
> 时间：2012-05-02T19:44:03.560
> 
> 标签：azure, azure-storage, azure-queues

我知道，如果工作人员无法处理队列中的消息，它将再次变得可见，并且您必须对此进行编码（幂等）。但是工人是否有可能两次出列消息？根据我的日志记录，我似乎看到了这种行为，但我不确定为什么。我什至在去获取下一条消息之间删除了消息，似乎我又得到了它。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-03T01:40:05.053

是的，您可以将同一消息出列两次。这可能有两个原因：

1.  工人 A 使消息 B 出列并且不可见超时到期。消息 B 再次可见，并且 Worker C 将消息 B 出列，从而使 Worker A 的 pop 收据无效。工人 A 完成工作，去删除消息 B 并抛出错误。这是最常见的。
2.  在某些情况下（非常频繁的队列轮询），您可以在`GetMessage`. 这是一种竞争条件，虽然很少发生。工人 A 和 B 轮询非常快，同时进入队列，都得到相同的消息。这曾经在高轮询场景下更为常见（SDK 1.0 时间框架），但现在在以后的存储更新中变得更加罕见（不记得最近看到过这种情况）。

话虽如此 - 如果您只有 1 个工作人员弹出消息，那么您将两次排队消息。1 和 2 仅在您有超过 1 个工人时发生。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T19:59:25.237

您不应该两次将其出列。如果我没记错的话，即使删除它两次也不可能，因为弹出收据应该在第二次出队和锁定后改变。

正如 SilverNinja 建议的那样，我会查看消息是否可能无意中排队了两次。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-02T20:41:33.997

您是否有多个工人角色？

队列项目可见性的超时可能会在您的角色完成处理它正在执行的任何操作之前结束（尤其是对于需要一段时间的进程）。在这种情况下，另一个相同的角色可以接收相同的消息（这实际上是您需要允许的 - 如果多次处理相同的消息，您不希望它成为问题）。

此时第一个角色将完成并将消息出队，然后在超时后拾取它的另一个角色将结束并尝试将消息出队。在我的脑海中，我不记得当一个角色试图使一个已经出队的消息出队时到底发生了什么。

# git - 查看本地和远程 Git 存储库之间的确切分歧/提交

> ID：10420575
> 
> 赞同：18
> 
> 时间：2012-05-02T19:44:08.733
> 
> 标签：git, diff, compare, conflict, status

**设置：** 3 git repos - 在 github、本地和登台服务器上。

我在本地开发，将其推送到 github 并登台服务器拉取。

我不在登台服务器上工作也不提交更改，但我一定是很久以前做过的。因为现在我`git status`（在登台服务器上）收到以下消息：

```
On branch SOME_BRANCH
Your branch and 'origin/SOME_BRANCH' have diverged,
and have 4 and 32 different commit(s) each, respectively. 
```

**我的问题是：** *我如何查看那些不在的确切**4 次**`origin`提交？*

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-05-02T21:01:59.623

```
git rev-list origin..HEAD 
```

这列出了您的分支 (HEAD) 中不属于原始的提交。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2017-09-27T09:52:45.247

通常，如果您的遥控器称为*foo*并且您的分支是*bar*：

```
git rev-list foo/bar..HEAD 
```

@charlesb 是在远程调用 origin 的 master 分支中的答案。

# php - CakePHP：CacheHelper 和主题视图

> ID：10420580
> 
> 赞同：1
> 
> 时间：2012-05-02T19:44:48.230
> 
> 标签：php, cakephp, caching, cakephp-2.1

在 CakePHP (2.1) 应用程序中，我将主题与 cacheAction 一起使用。当访问 eg 的视图时`/controller/action`，它的缓存文件被保存到`tmp/views/controller_action.php`. 从移动 url（如`m.example.com`）访问相同视图时，我在内部使用具有主题视图的相同应用程序来简化移动设备的输出。

但是现在缓存有一个问题：两个请求有不同的主机名和主题，但相同的控制器/动作，因此缓存文件的文件名相同。因此，当访问具有不同主机或主题的 url 时，CakePHP 返回相同的缓存文件（或更准确地说是第一个请求的缓存文件）。无法根据参数（例如主机名或主题）更改缓存文件的名称。

我尝试修改CacheHelper的参数，但没有成功。有没有办法即时更改 CacheHelper 的缓存路径/前缀？还是有另一种可能性来实现这种行为？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T13:26:47.660

解决此问题的唯一解决方法是以下步骤：

1) 创建一个扩展 CacheHelper 的自己的 MyCacheHelper 并将其保存到`app/View/Helper/CacheHelper.php`. 覆盖该方法`_writeFile()`并使用您的前缀扩展 $path 字符串的行：

```
App::uses('Helper', 'Cache');
class MyCacheHelper extends CacheHelper
{
  public function _writeFile($content, $timestamp, $useCallbacks = false)
  {
    // ...
    $cache = $prefix.strtolower(Inflector::slug($path));
    // ...
  }
} 
```

2）创建一个自己的 MyDispatcher 扩展 Dispatcher 并将其保存到`app/Lib/Routing/MyDispatcher.php`. 覆盖该方法`cached()`并使用您的前缀扩展 $path 字符串的行：

```
App::uses('Dispatcher', 'Routing');
class MyDispatcher extends Dispatcher
{
  public function cached($path)
  {
    // ...
    $path = $prefix.strtolower(Inflector::slug($path));
    // ...
  }
} 
```

3) 更改文件`app/webroot/index.php`以使用您的新调度程序：

```
App::uses('MyDispatcher', 'Routing');
$Dispatcher = new MyDispatcher(); 
```

4）更新`$helper`控制器中的参数以使用`MyCache`而不是`Cache`.

而已。有点复杂，但它按预期工作！现在您可以根据需要调整 $prefix 并为不同的域创建唯一的缓存文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T08:43:55.743

更好的解决方案：CakePHP 2.3 现在支持核心配置中的缓存前缀：

```
Configure::write('Cache.viewPrefix', 'YOURPREFIX'); 
```

这个前缀可以适应主题名称或在这些请求中不同的一些其他参数。

# perfmon - Perfmon - 功率计的刷新率

> ID：10420586
> 
> 赞同：1
> 
> 时间：2012-05-02T19:45:10.763
> 
> 标签：perfmon, power-management, meter

我正在编写一个工具来收集有关笔记本电脑功耗的信息。我需要测量当前的功耗，我使用 Perfmon 来测量。但是我发现了一个奇怪的错误。这是典型的功耗图表（这是“Power Meter” - “Power” - “_Total”）：

![](../Images/9f73e67b85ab869095f245c8452e7295.png)

测量值大约每 10-15 秒更新一次。

但如果运行 Everest（或 AIDA64）电源管理选项卡会更频繁地更新此选项，则结果会更准确：

![](../Images/19a0ba4bc35c2a9e4f48d94a1206ef56.png)

测量值大约每 1-2 秒更新一次。

我不明白当我们跑珠穆朗玛峰时会发生什么。我真的需要得到准确的数据。你有什么想法？

我真的很感激在这方面的任何建议。

# python - 如何将字典从 python 脚本发布到 django url？

> ID：10420594
> 
> 赞同：1
> 
> 时间：2012-05-02T19:45:29.010
> 
> 标签：python, django, httpresponse

我需要将字典从 python 脚本传递到 Django 应用程序。因此我使用以下内容：

```
def sendDataToApp(rssi_readings):
        url = 'http://localhost:8000/world/rssi_import'
        data = urllib.urlencode(rssi_readings)
        req = urllib2.Request(url, data)
        response = urllib2.urlopen(req) 
```

rssi_readings 是实际的字典。现在在我的 Django 应用程序中，我设置了一个 url，并且确实有一个如下定义的视图：

```
def rssi_import(request, rssi_readings):
    print "Test"
    cache.set('rssi_angle_reading', rssi_readings)
    return HttpResponse("Data submitted") 
```

我什至没有看到打印，所以我认为服务器无法处理数据。之后我想将数据存储在缓存中，这应该不是问题。

我的开发服务器已启动并正在运行，但是当我运行脚本时，我得到一个 HTTP ERROR 500，其中包含以下内容：

```
 File "autoorientation.py", line 245, in <module>
    main()
  File "autoorientation.py", line 241, in main
    sendDataToApp(rssi_readings)
  File "autoorientation.py", line 199, in sendDataToApp
    response = urllib2.urlopen(req)
  File "/usr/lib/python2.7/urllib2.py", line 126, in urlopen
    return _opener.open(url, data, timeout)
  File "/usr/lib/python2.7/urllib2.py", line 406, in open
    response = meth(req, response)
  File "/usr/lib/python2.7/urllib2.py", line 519, in http_response
    'http', request, response, code, msg, hdrs)
  File "/usr/lib/python2.7/urllib2.py", line 444, in error
    return self._call_chain(*args)
  File "/usr/lib/python2.7/urllib2.py", line 378, in _call_chain
    result = func(*args)
  File "/usr/lib/python2.7/urllib2.py", line 527, in http_error_default
    raise HTTPError(req.get_full_url(), code, msg, hdrs, fp)
urllib2.HTTPError: HTTP Error 500: INTERNAL SERVER ERROR 
```

我希望有人能告诉我问题是什么？即使尝试发布一个简单的字符串也没有用。谢谢！！！

编辑：

这是我的 url.py。我把它分成 2 个文件，但这应该是重要的一个：

```
from django.conf.urls.defaults import patterns, include, url

urlpatterns = patterns('world.views',

    url(r'^$', 'index'),
    url(r'^setup/$', 'setup'),
    url(r'^redoscan/$', 'redoScan'),
    url(r'^rssi_import/$', 'rssi_import'),
) 
```

编辑2：

好的，我刚刚尝试不从脚本发送请求中的数据，现在我实际上得到了一些东西。开发服务器说：

```
[02/May/2012 15:32:46] "GET /world/rssi_import HTTP/1.1" 301 0
[02/May/2012 15:32:46] "GET /world/rssi_import/ HTTP/1.1" 200 14 
```

所以我非常确定脚本和我的网址可以正常工作，但不知何故，愚蠢的东西不知道如何处理数据。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-02T19:56:42.697

我不确定你为什么这样定义你的视图函数：

```
def rssi_import(request, rssi_readings): 
```

我想这可能会在您的 urls.py 定义中使用一些棘手的魔法。

但我认为更直接的方法是：只需从请求中读取 POST 数据：

```
def rssi_import(request):
    rssi_readings = request.POST
    # do something with rssi_readings here
    return HttpResponse("Data submitted") 
```

也许您应该检查这是否甚至是 POST，并且如果您以后的函数对返回的字典产生副作用，您可能至少需要一个浅拷贝：

```
def rssi_import(request):
    if request.method == 'POST':
        rssi_readings = dict(request.POST)
        # do something with rssi_readings here
        return HttpResponse("Data submitted")
    if request.method == 'GET':
        return HttpResponse("rssi_import() reached.  Now POST some RSSI data to me...") 
```

这接近你需要的吗？

编辑/更新：

别忘了，视图函数还是要返回一个有效的响应！我在上面添加了这个，使用你的“return”行。另外：一个 GET 处理程序，因此您可以通过简单的浏览器调用来调试服务器问题（可能在您的 urls.py 中）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T16:22:46.033

好的，我终于想通了。

@Dan H 你的斜杠是对的，它实际上有很大的不同。删除后，我实际上收到了 403 错误。

签出后我收到了 403 错误，我发现了一些关于 CSRF 的信息，正如 @Aleksej Vasinov 在他的评论中已经提到的那样。实际上我什至不知道我在使用它，但它似乎几乎是设置文件中的标准方式。我现在有一个针对这个特定视图的 CSRF 豁免，并且一切正常。

我现在可以发布数据并且非常高兴。谢谢你所有的好主意。我会回到stackoverflow。:)

# android - 简单的 Titanum 应用程序抛出“KrollRuntimeThread msg:java.lang.UnsatisfiedLinkError: Couldn't load stlport_shared”错误

> ID：10420597
> 
> 赞同：1
> 
> 时间：2012-05-02T19:45:43.737
> 
> 标签：android, titanium

我创建了许多 TiStudio 应用程序并将它们推送到此设备（HTC Incredible，Android 2.3.3）而没有问题。

但是，从今天开始，任何新应用程序都会崩溃并出现以下错误：

```
I/TiRootActivity( 2122): (main) [0,0] checkpoint, on root activity create, savedInstanceState: null
I/TiApplication( 2149): (main) [0,0] checkpoint, app created.
I/TiApplication( 2149): (main) [89,89] Titanium 2.0.1 (2012/04/12 16:36 999c68a)
I/TiApplication( 2149): (main) [265,354] Titanium Javascript runtime: v8
E/TiApplication( 2149): (KrollRuntimeThread) [25,379] Sending event: exception on thread: KrollRuntimeThread msg:java.lang.UnsatisfiedLinkError: Couldn't load stlport_shared: findLibrary returned null; Titanium 2.0.1,2012/04/12 16:36,999c68a
E/TiApplication( 2149): java.lang.UnsatisfiedLinkError: Couldn't load stlport_shared: findLibrary returned null
E/TiApplication( 2149):     at java.lang.Runtime.loadLibrary(Runtime.java:429)
E/TiApplication( 2149):     at java.lang.System.loadLibrary(System.java:554)
E/TiApplication( 2149):     at org.appcelerator.kroll.runtime.v8.V8Runtime.initRuntime(V8Runtime.java:55)
E/TiApplication( 2149):     at org.appcelerator.kroll.KrollRuntime.doInit(KrollRuntime.java:163)
E/TiApplication( 2149):     at org.appcelerator.kroll.KrollRuntime$KrollRuntimeThread.run(KrollRuntime.java:101)
I/TiRootActivity( 2149): (main) [0,0] checkpoint, on root activity create, savedInstanceState: null 
```

这包括由 TiStudio 创建的默认应用程序，甚至是一个只有`Titanium.UI.setBackgroundColor('#000');`

奇怪的是，即使在进行代码更改和重新编译之后，我现有的项目仍然可以正常工作。

知道什么会导致这种行为吗？

# excel - 在 Excel VBA 中的两个工作表之间查找和替换

> ID：10420600
> 
> 赞同：0
> 
> 时间：2012-05-02T19:45:58.463
> 
> 标签：excel, vba

我知道这已经完成了，但是我遇到了一个问题，我想改变这个脚本的一部分，我只是不知道怎么做。

这是代码，下面是我需要做的。

```
Option Explicit

Sub PENCMR()
    Dim i As Integer

    With Application
        .ScreenUpdating = False
    End With

    'Internal NCMR
    Dim wsPE As Worksheet
    Dim wsNDA As Worksheet

    'Copy Ranges
    Dim c As Variant

    'Paste Ranges
    Dim p As Range

    'Setting Sheet
    Set wsPE = Sheets("Print-Edit NCMR")
    Set wsNDA = Sheets("NCMR Data")
    Set p = wsPE.Range("A54:U54")

    With wsPE
        c = Array(.Range("AG3"), .Range("B11"), .Range("B14"), .Range("B17"), .Range("B20"), .Range("B23") _
                , .Range("Q11"), .Range("Q14"), .Range("Q17"), .Range("Q20"), .Range("R25"), .Range("V23") _
                , .Range("V25"), .Range("V27"), .Range("B32"), .Range("B36"), .Range("B40"), .Range("B44") _
                , .Range("D49"), .Range("L49"), .Range("V49"))
    End With

    For i = LBound(c) To UBound(c)
        p(i + 1).Value = c(i).Value
    Next

    With wsNDA
        Dim rFind As Long, NR As Long, LR As Long, LC As Long
        LR = .Range("C" & Rows.Count).End(xlUp).Row
        LC = .Cells(2, Columns.Count).End(xlToLeft).Column
        NR = LR + 1
        rFind = wsNDA.Range("A3:A" & LR).Find(wsPE.Range("A54:U54")).Row

        .Range("A54", .Cells(2, LC)).Copy
        .Range("A" & rFind).PasteSpecial xlPasteValues
        .Range("A54", .Cells(1, LC)).ClearContents
    End With

    With Application
        .ScreenUpdating = True
    End With
End Sub 
```

该脚本旨在执行此操作：

当代码被激活时，它意味着复制所有单元格，然后将它们粘贴到表单下方的一行中，然后在引用第二页后，将新创建的行的第一个单元格与第二页列表复制并替换信息。

我想看到的是，因为我被告知可以在不粘贴到同一页面上的情况下完成，所以复制数据，在第二张纸上搜索 ID 号，然后用新数据。

这是单子：

[Excel 替换 WkSht](http://dl.dropbox.com/u/3327208/Excel/Replace.zip "Excel 替换 WkSht")

现在这样写，它不会替换信息，它只是用空白信息覆盖它。我还没有弄清楚为什么......希望通过这个请求重写，我能够解决这个问题。

再次感谢您的帮助。到目前为止，这个地方在帮助我不仅学习，而且从长远来看可以巧妙地写作方面所做的工作令人惊叹。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T23:42:35.307

一些建议的更改：

```
Sub PENCMR()
    Dim i As Integer

    'Internal NCMR
    Dim wsPE As Worksheet
    Dim wsNDA As Worksheet
    Dim c As Variant 'Copy Ranges
    Dim p As Range 'Paste Ranges

    Application.ScreenUpdating = False

    'Setting Sheet
    Set wsPE = Sheets("Print-Edit NCMR")
    Set p = wsPE.Range("A54:U54")

    Set wsNDA = Sheets("NCMR Data")

    c = Array("AG3", "B11", "B14", "B17", "B20", "B23" _
            , "Q11", "Q14", "Q17", "Q20", "R25", "V23" _
            , "V25", "V27", "B32", "B36", "B40", "B44" _
            , "D49", "L49", "V49")

    For i = LBound(c) To UBound(c)
        p(i + 1).Value = wsPE.Range(c(i)).Value
    Next

    With wsNDA
        Dim NR As Long, LR As Long, LC As Long
        Dim f As Range

        LR = .Range("C" & Rows.Count).End(xlUp).Row
        LC = .Cells(2, Columns.Count).End(xlToLeft).Column
        NR = LR + 1

        'find matching row if it exists
        Set f = .Range("A3:A" & LR).Find(what:=p.Cells(1).Value, LookIn:=xlValues, lookat:=xlWhole)
        If Not f Is Nothing Then
            f.Resize(1, p.Cells.Count).Value = p.Value
        Else
            'what should happen if not found?
        End If
    End With

    Application.ScreenUpdating = True

End Sub 
```

# php - mysqli_prepare 和 sha1

> ID：10420603
> 
> 赞同：0
> 
> 时间：2012-05-02T19:46:10.883
> 
> 标签：php, mysql, mysqli, prepared-statement

我正在尝试为登录调用 mysql 中的 SHA1 函数准备一条语句，但准备函数一直返回 false

```
 $query = "select user_id, first_name from users where email=? and pass=SHA1(?)";
 $stmt = mysqli_prepare($dbc, $query); 
```

传递 mysql 函数有效，因为我可以使用 now() 没有问题。有谁知道这里有什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T14:28:21.883

我会`sha1()`在 PHP 中运行该函数。没有理由不这样做，这是一个简单、有效的解决方案，没有明显的答案。

# javascript - 如何在 JavaScript 中动态设置和修改 CSS？

> ID：10420606
> 
> 赞同：3
> 
> 时间：2012-05-02T19:46:26.403
> 
> 标签：javascript, css

我有一些 JavaScript 代码可以创建一些`div`元素并设置它们的 CSS 属性。因为我想将 CSS 逻辑从我的 JavaScript 代码中分离出来，并且因为 CSS 在它自己的`.css`文件中更容易阅读，所以我想设置`className`我的元素的 CSS，然后动态地将一些值注入到定义的 CSS 属性中。

这是我想做的：

`style.css`：

```
.myClass { 
    width: $insertedFromJS 
} 
```

`script.js`：

```
var myElement = document.createElement("div");
myElement.className = "myClass"; 
```

我想做这样的事情，但那时`myElement.style.width`是空的

```
myElement.style.width.replaceAll("$insertedFromJS", "400px"); 
```

我认为我的问题是在调用 之后`myElement.className = "myClass"`，尚未应用 CSS。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T20:02:38.013

设置样式，可以通过定义内页样式声明来完成。

这就是我的意思

```
var style = document.createElement('style');
style.type = 'text/css';
style.cssText = '.cssClass { color: #F00; }';
document.getElementsByTagName('head')[0].appendChild(style);
document.getElementById('someElementId').className = 'cssClass'; 
```

However the part of modifying it can be a lot of tricky than you think. Some regex solutions might do a good job. But here is another way, I found.

```
if (!document.styleSheets) return;
var csses = new Array();
if (document.styleSheets[0].cssRules)  // Standards Compliant {
   csses = document.styleSheets[0].cssRules;
}
else {         
   csses = document.styleSheets[0].rules;  // IE 
}
for (i=0;i<csses.length;i++) {
   if ((csses[i].selectorText.toLowerCase()=='.cssClass') || (thecss[i].selectorText.toLowerCase()=='.borders'))
   {
     thecss[i].style.cssText="color:#000";
   }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-02T20:10:57.123

If I understand your question properly, it sounds like you're trying to set placeholder text in your css file, and then use javascript to parse out the text with the css value you want to set for that class. You can't do that in the way you're trying to do it. In order to do that, you'd have to grab the content of the CSS file out of the dom, manipulate the text, and *then* save it back to the DOM. But that's a really overly-complicated way to go about doing something that...

```
myElement.style.width = "400px"; 
```

...can do for you in a couple of seconds. I know it doesn't really address the issue of decoupling css from js, but there's not really a *whole* lot you can do about that. You're trying to set css dynamically, after all.

Depending on what you're trying to accomplish, you might want to try defining multiple classes and just changing the className property in your js.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-02T19:50:06.030

你能在这个上使用jQuery吗？你可以使用

```
$(".class").css("property", val); /* or use the .width property */ 
```

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2013-10-21T17:26:57.213

There is a jQuery plugin called jQuery Rule, [http://flesler.blogspot.com/2007/11/jqueryrule.html](http://flesler.blogspot.com/2007/11/jqueryrule.html)

I tried it to dynamically set some div sizes of a board game. It works in FireFox, not in Chrome. I didn't try IE9.

# excel - 如何匹配列之间的数据以进行比较

> ID：10420611
> 
> 赞同：2
> 
> 时间：2012-05-02T19:46:36.573
> 
> 标签：excel, vba

我真的不知道如何清楚地解释这一点。请看附图

![在此处输入图像描述](../Images/24ef0e62033a6c7e5b6cdd264420d806.png)

我有一个包含 4 个不同列的表，其中 2 个列彼此相同（名称和数量）。目标是比较数量之间的差异，但是，为了做到这一点。我必须： 1\. 对数据进行排序 2\. 逐项匹配数据 这对小表来说没什么大不了的，但有一万行，我需要几天时间才能完成。

请帮助我，我很感激。

我的逻辑是： 1\. 对前两列（名称和数量）进行排序 2\. 对于后两列（名称和数量）的每个值，检查它是否与前两列匹配。如果为真，则插入该值。3.对于不匹配的值，插入新行，偏移量与前两列但不在后两列的行

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T22:35:10.017

这是你正在尝试的吗？

```
Option Explicit

Sub Sample()
    Dim ws As Worksheet
    Dim lastRow As Long, i As Long, newRow As Long
    Dim aCell As Range, SrchRange As Range

    Set ws = Sheets("Sheet1")

    With ws
        .Columns("A:B").Copy .Columns("G:G")
        .Columns("G:H").Sort Key1:=.Range("G2"), Order1:=xlAscending, Header:=xlYes, _
          OrderCustom:=1, MatchCase:=False, Orientation:=xlTopToBottom, _
          DataOption1:=xlSortNormal

        lastRow = .Range("G" & Rows.Count).End(xlUp).Row
        newRow = lastRow

        Set SrchRange = .Range("G2:G" & lastRow)

        lastRow = .Range("C" & Rows.Count).End(xlUp).Row

        .Range("I1").Value = "NAME": .Range("J1").Value = "QTY"

        For i = 2 To lastRow
            If Len(Trim(.Range("C" & i).Value)) <> 0 Then
                Set aCell = SrchRange.Find(What:=.Range("C" & i).Value, LookIn:=xlFormulas, _
                LookAt:=xlWhole, SearchOrder:=xlByRows, SearchDirection:=xlNext, _
                MatchCase:=False, SearchFormat:=False)

                If Not aCell Is Nothing Then
                    .Range("I" & aCell.Row).Value = .Range("C" & i).Value
                    .Range("J" & aCell.Row).Value = .Range("D" & i).Value
                Else
                    newRow = newRow + 1
                    .Range("I" & newRow).Value = .Range("C" & i).Value
                    .Range("J" & newRow).Value = .Range("D" & i).Value
                End If
            End If
        Next
    End With
End Sub 
```

**快照**

![在此处输入图像描述](../Images/117d05de0ea42c0c2f90ada937cfdef2.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-31T03:02:56.210

![在此处输入图像描述](../Images/798962cd0f6a09746586b4793d6da54f.png)

根据您的上述要求，逻辑完全改变，因此我将其发布为不同的答案。

同样在您上面的“ **This is Wonderful** ”快照中，有一个小错误。按逻辑`SAMPLE10`不能上来`SAMPLE11`。它必须紧随其后`SAMPLE11`。

请参阅下面的快照

![在此处输入图像描述](../Images/ecb85fcbbc36e2b4e24a8e22e8a19ecc.png)

这是代码:)

```
Option Explicit

Sub sAMPLE()
    Dim ws As Worksheet
    Dim lastRow As Long, i As Long, newRow As Long, rw As Long
    Dim aCell As Range, SrchRange As Range

    Set ws = Sheets("Sheet1")

    With ws
        .Columns("A:B").Copy .Columns("G:G")
         .Columns("G:H").Sort key1:=.Range("G2"), Order1:=xlAscending, Header:=xlYes, _
          OrderCustom:=1, MatchCase:=False, Orientation:=xlTopToBottom, _
          DataOption1:=xlSortNormal

        .Columns("H:H").Insert Shift:=xlToRight, CopyOrigin:=xlFormatFromLeftOrAbove

         lastRow = .Range("G" & Rows.Count).End(xlUp).Row

         For i = 2 To lastRow
            .Range("H" & i).Value = GetLastNumbers(.Range("G" & i).Value)

            If .Range("H" & i).Value <> 0 Then
                .Range("G" & i).Value = Left(.Range("G" & i).Value, _
                Len(.Range("G" & i).Value) - Len(.Range("H" & i).Value))
            End If
         Next i

        .Columns("G:H").Sort key1:=.Range("H2"), Order1:=xlAscending, Header:=xlYes, _
        OrderCustom:=1, MatchCase:=False, Orientation:=xlTopToBottom, _
        DataOption1:=xlSortNormal

        For i = 2 To lastRow
            If .Range("H" & i).Value <> 0 Then _
            .Range("G" & i).Value = .Range("G" & i).Value & .Range("H" & i).Value
        Next i

        .Columns("H:H").Delete

        newRow = lastRow

        Set SrchRange = .Range("G2:G" & lastRow)

        lastRow = .Range("C" & Rows.Count).End(xlUp).Row

        .Range("I1").Value = "NAME": .Range("J1").Value = "QTY"

        For i = 2 To lastRow
            If Len(Trim(.Range("C" & i).Value)) <> 0 Then
                Set aCell = SrchRange.Find(What:=.Range("C" & i).Value, LookIn:=xlFormulas, _
                LookAt:=xlWhole, SearchOrder:=xlByRows, SearchDirection:=xlNext, _
                MatchCase:=False, SearchFormat:=False)

                If Not aCell Is Nothing Then
                    .Range("I" & aCell.Row).Value = .Range("C" & i).Value
                    .Range("J" & aCell.Row).Value = Application.Evaluate("=SUMPRODUCT((C2:C" & lastRow _
                            & "=" & """" & .Range("C" & i).Value & """" & ")*(D2:D" & lastRow & "))")
                Else
                    newRow = newRow + 1
                    .Range("I" & newRow).Value = .Range("C" & i).Value
                    .Range("J" & newRow).Value = .Range("D" & i).Value
                End If
            End If
        Next
        lastRow = .Range("G" & Rows.Count).End(xlUp).Row
        For i = lastRow To 2 Step -1
            If .Range("G" & i).Value = .Range("G" & i - 1).Value Then
                .Range("H" & i - 1).Value = .Range("H" & i).Value + .Range("H" & i - 1).Value
                If Application.WorksheetFunction.CountA(.Range("I" & i & ":J" & i)) = 0 Then
                    .Range("G" & i & ":J" & i).Delete Shift:=xlUp
                Else
                    .Range("G" & i & ":H" & i).Delete Shift:=xlUp
                End If
            End If
        Next i

        lastRow = .Range("I" & Rows.Count).End(xlUp).Row
        newRow = .Range("G" & Rows.Count).End(xlUp).Row

        If lastRow <= newRow Then Exit Sub

        .Range("I" & newRow & ":J" & lastRow).Sort key1:=.Range("I" & newRow), Order1:=xlAscending, Header:=xlYes, _
        OrderCustom:=1, MatchCase:=False, Orientation:=xlTopToBottom, _
        DataOption1:=xlSortNormal

        For i = lastRow To newRow Step -1
            If .Range("I" & i).Value = .Range("I" & i - 1).Value Then
                .Range("J" & i - 1).Value = .Range("J" & i).Value + .Range("J" & i - 1).Value
                .Range("I" & i & ":J" & i).Delete Shift:=xlUp
            End If
        Next i
    End With
End Sub

Function GetLastNumbers(strVal As String) As Long
    Dim j As Long, strTemp As String

    For j = Len(strVal) To 1 Step -1
        If Not IsNumeric(Mid(strVal, j, 1)) Then Exit For
        strTemp = Mid(strVal, j, 1) & strTemp
    Next j
    GetLastNumbers = Val(Trim(strTemp))
End Function 
```

# mysql - Rails 添加大量记录的最佳方法

> ID：10420616
> 
> 赞同：0
> 
> 时间：2012-05-02T19:46:49.513
> 
> 标签：mysql, sql, ruby-on-rails

我必须在 Rails 中一次将 25000 条记录添加到数据库中。我也必须验证它们。

这是我现在拥有的：

```
 # controller create action
  def create
    emails = params[:emails][:list].split("\r\n")
    @created_count = 0
    @rejected_count = 0

    inserts = []
    emails.each do |email|
      @email = Email.new(:email => email)
      if @email.valid?
        @created_count += 1
        inserts.push "('#{email}', '#{Date.today}', '#{Date.today}')"
      else
        @rejected_count += 1
      end
    end
    return if emails.empty?
    sql = "INSERT INTO `emails` (`email`, `updated_at`, `created_at`) VALUES #{inserts.join(", ")}"
    Email.connection.execute(sql) unless inserts.empty?
    redirect_to new_email_path, :notice => "Successfuly created #{@created_count} emails, rejected #{@rejected_count}"
  end 
```

现在很慢，由于超时，无法添加这么多的记录。

有任何想法吗？我正在使用mysql。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T19:58:12.310

想到三件事：

1.  您可以使用适当的工具帮助自己，例如： [zdennis/activerecord-import](https://github.com/zdennis/activerecord-import)或[jsuchal/activerecord-fast-import](https://github.com/jsuchal/activerecord-fast-import)。问题在于，您的示例还将创建 25000 个对象。如果您告诉 activerecord-import 不使用验证，它不会创建新对象（[activerecord-import/wiki/Benchmarks](https://github.com/zdennis/activerecord-import/wiki/Benchmarks)）
2.  将数万行导入关系数据库永远不会超快，它应该通过后台进程异步完成。还有一些工具，比如 DelayedJob 等等：[https ://www.ruby-toolbox.com/](https://www.ruby-toolbox.com/)
3.  将属于模型的代码移出控制器（TM）

之后，您需要重新考虑这部分应用程序的流程。如果您在控制器操作中使用后台处理，例如`create`，您不能只是简单地返回`HTTP 201`或`HTTP 200`。您需要做的是返回 "quick" `HTTP 202 Accepted`，并提供指向另一个表示的链接，用户可以在其中检查他们的请求状态（我们是否已经有成功响应？有多少电子邮件失败？），因为它正在处理中在后台。这听起来有点复杂，这是一个迹象，表明你可能不应该那样做。为什么你必须在一个请求中添加 25000 条记录？有什么背景？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T20:28:24.153

If speed is your concern, I'd attack the problem from a different angle.

*   Create a table that copies the structure of your `emails` table; let it be `emails_copy`. Don't copy indexes and constraints.
*   Import the 25k records into it using your database's fast import tools. Consult your DB docs or see e.g. [this answer](https://stackoverflow.com/questions/67117/speeding-up-mysql-dumps-and-imports) for MySQL. You will have to prepare the input file, but it's way faster to do — I suppose you already have the data in some text or tabular form.
*   Create indexes and constraints for `emails_copy` to mimic `emails` table. Constraint violations, if any, will surface; fix them.
*   Validate the data inside the table. It may take a few raw SQL statements to check for severe errors. [You don't have to validate emails for anything but very simple format anyway](https://stackoverflow.com/a/201378/223424). Maybe all your validation could be done against the text you'll use for import.
*   `insert into emails select * from emails_copy` to put the emails into the production table. Well, you might play a bit with it to get autoincrement IDs right.
*   Once you're positive that the process succeeded, `drop table emails_copy`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-02T19:57:44.133

为什么不为工作创建一个 rake 任务？以下链接很好地解释了它。

[http://www.ultrasaurus.com/sarahblog/2009/12/creating-a-custom-rake-task/](http://www.ultrasaurus.com/sarahblog/2009/12/creating-a-custom-rake-task/)

简而言之，一旦你编写了你的​​ rake 任务，你可以通过以下方式开始工作：

耙子成员：load_emails

# entity-framework-4.3 - EntityFramework 代码优先，DropCreate 后运行数据库更新脚本

> ID：10420618
> 
> 赞同：1
> 
> 时间：2012-05-02T19:46:52.940
> 
> 标签：entity-framework-4.3

我正在尝试首先为代码中的计算列问题找到一些不错的解决方法。具体来说，我有许多 CreatedAt 日期时间列需要设置为 getdate()。

我已经看过通过 POCO 构造函数执行此操作，但要做到这一点，我必须删除 Computed 选项（否则它不会保留数据），但是，没有简单的方法可以确保仅在我们设置列时设置插入一条记录。所以这会在我们每次更新时覆盖 CreatedAt。

我希望创建一个可以在 DropCreate 之后调用的更改脚本，该脚本将通过并更改各个列以包含 getdate() 的默认值。

1.  是否有一个事件可以连接到 OnDropCreateCompleted 之类的东西，然后我可以在其中运行其他 SQL
2.  处理更改脚本的最佳方法是什么？我想只是将原始 sql 发送到将运行的服务器。
3.  是否有另一种方法来处理 getdate() 问题，它可能更优雅，更符合我缺少的代码？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T08:14:55.133

您可以从所需的初始化器派生自定义初始化器并覆盖`Seed`方法，您可以在其中执行您想要使用的任何 SQL - 这是创建此类初始化器的[一些示例](https://stackoverflow.com/questions/5701608/unique-key-with-ef-code-first/5701702#5701702)。

如果您正在使用迁移，您可以只使用自定义 SQL`Up`方法。

# ios4 - 将 viewController 添加到标签栏控制器崩溃

> ID：10420625
> 
> 赞同：0
> 
> 时间：2012-05-02T19:47:14.017
> 
> 标签：ios4, ios5

我是 iOS 新手，我使用的是 Xcode 4.3.2，并且我使用 tabView 创建了一个项目，默认情况下它有两个视图控制器。我现在正在创建一个新的，

第三视图.h

```
#import <UIKit/UIKit.h>

@interface ThirdView : UIViewController

@end

#import "ThirdView.h"

@implementation ThirdView

- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    if (self) {
        self.title = NSLocalizedString(@"Third", @"Third");
        self.tabBarItem.image = [UIImage imageNamed:@"Third"];
    }
    return self;
}

- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view, typically from a nib.
}

- (void)viewDidUnload
{
    [super viewDidUnload];
    // Release any retained subviews of the main view.
}

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    if ([[UIDevice currentDevice] userInterfaceIdiom] == UIUserInterfaceIdiomPhone) {
        return (interfaceOrientation != UIInterfaceOrientationPortraitUpsideDown);
    } else {
        return YES;
    }
}

@end 
```

并在 appDelicate.m

```
viewController3 = [[ThirdView alloc] initWithNibName:@"ThirdView" bundle:nil]; 
```

并将 viewController3 添加到 tabBarController。

```
self.tabBarController.viewControllers = [NSArray arrayWithObjects:viewController1, viewController2, viewController3 ,nil]; 
```

问题是：当我在设备中执行代码时，我可以看到第三个选项卡，但是当我单击时，它崩溃了。我在哪里做错了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T19:51:44.233

仔细检查 nib 文件中第三个视图控制器的类名。

# c++ - “继承”具有可变模板函数的类

> ID：10420630
> 
> 赞同：4
> 
> 时间：2012-05-02T19:47:26.487
> 
> 标签：c++, templates, inheritance, c++11, variadic-templates

我想编写一个可以操作不同类型数据库（例如sqlite、postgres 等）的数据库包装器，因此无论用户实际使用什么数据库，用户正在编写的代码都不会改变。

在我看来，这需要一个抽象基类，例如：

```
class database {
public:
    virtual bool query(const std::string &q) = 0;
    // Other stuff
};

class sqlite : public database {
public:
    bool query(const std::string &q) {
        // Implementation
    }
}; 
```

这看起来不错，但我使用可变参数模板来转义查询中的参数（我真的很喜欢这个想法，所以我想坚持下去！），所以不幸的是我的基类看起来像：

```
class database {
public:
    template <typename... Args>
    bool query(const std::string &q, const Args &... args) {
        // Implementation
    }
}; 
```

然而，这阻碍了创建抽象类，因为模板函数不能是虚拟的。到目前为止我唯一想到的就是这个结构

```
template <class DatabaseType>
class database {
public:
    template <typename... Args>
    bool query(const std::string &q, const Args &... args) {
        return database_.query(q, args...);
    }
private:
    DatabaseType database_;
}; 
```

虽然这似乎可行，但所有包装器除了调用同名`database_`函数之外什么都不做，对我来说它看起来不是一个很好的风格。这是这里选择的设计模式，还是有更清洁或更惯用的方式？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-02T19:49:58.827

> [...] 是否有更清洁或更惯用的方式

您可能需要查找[CRTP](http://en.wikipedia.org/wiki/Curiously_recurring_template_pattern)以使用模板实现多态行为。

```
template <class concrete_db> 
struct abstract_db { 
    template <typename... Args>
    void query(std::string const& q, Args const&... args) { 
        static_cast<concrete_db *>(this)->query(q, args...);
    }
};

struct postgres_db : abstract_db<postgres_db> {
    template <typename... Args>
    void query(std::string const& q, Args const&... args) { 
         // do something
    }
}; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-02T19:56:33.073

您可以根据函数的参数构建*查询对象*`query`，并将其传递给虚`query_impl`函数。

# javascript - 如何在javascript中延迟元素的onclick响应

> ID：10420633
> 
> 赞同：1
> 
> 时间：2012-05-02T19:47:45.280
> 
> 标签：javascript, browser, popup, window.open

> **可能重复：**
> [如何告诉浏览器停留在当前窗口](https://stackoverflow.com/questions/10491349/how-to-tell-browser-to-stay-on-current-window)

我可以延迟元素的 onclick 动作吗？我有一个在 onclick 事件中调用函数的元素。如何延迟对该函数的调用？我想告诉浏览器在执行 onclick 操作之前停止两秒钟。

该元素看起来像这样。

```
<div id="id01" class="channel" onclick="load_window('http://www.ewtn.com')"><a>EWTN.com</a></div><br/>EWTN television network</div> 
```

如果我在 load_window 函数中放置一个 setTimeout，浏览器会将 window.open 视为弹出窗口并停止它。所以我想以不同的方式提出这个问题。有没有办法告诉浏览器在执行 onclick 之前等待？在该元素的 .click 中，我有执行其他功能的代码。

```
 $('.channel').click(function() { 
        $(this).addClass("selected");
        show_layer();
        setInterval("refresh_caption()",300000);
    }); 
```

我希望延迟对 load_window() 的调用，同时仍让浏览器将该操作视为用户操作。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-02T19:58:41.260

快速而肮脏的方法是创建一个包含调用超时的新函数`load_window`，并将该新函数设置为`onclick`值。

```
function channel_click(){

    // anon wrapper function, 2 second delay
    setTimeout( function () {
        load_window('http://www.ewtn.com');
    } , 2000 );

} 
```

然后

```
<div id="id01" class="channel" onclick="channel_click()"><a>EWTN.com</a></div><br/>EWTN television network</div> 
```

不知道你的`load_window`函数实际上在做什么，所以我不能说 2 秒后会发生什么。

同样，这特定于您提供的示例。如果您需要更通用的方法，则必须提供更多信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T19:57:38.113

不，没有可行的方法来延迟当前正在运行的 javascript 线程的执行而不在这段时间内挂起浏览器。

您可以在一个紧密的循环中循环直到 2 秒过去，然后执行您的弹出操作，但这将是一种可怕的用户体验，并且某些浏览器甚至可能由于其无响应性而中止您的脚本。我根本不推荐这个。这是一个糟糕的设计。

稍后执行一些代码通常是通过 完成的`setTimeout()`，但是您已经说过出于弹出原因不想使用它。

如果您愿意解释您真正想要解决的问题，也许我们可以提供一些其他方法来解决问题。

# .net - 或在正则表达式中

> ID：10420634
> 
> 赞同：0
> 
> 时间：2012-05-02T19:47:45.373
> 
> 标签：.net, regex

我正在使用这个`(?<=^.*?;).*`表达式来一一解析出用户 ID。它工作得很好，因为它们被分开`;`但是当它到达最后一个没有`;`他/她的 id 的人时会失败。要获得我使用的下一个 id`^.*?;`

一切都很好，但是当`aharris`它失败并不断给我`aharris`。这`^.*?;`不应该给我`aharris`，因为`(?<=^.*?;).*`已经给了我`aharris`。

示例字符串：

```
jsmith; bbrown; kosborne; aharris 
```

现在，如果最后一个人没有，有没有办法添加或切换`^.*?;`它会给我空字符串的位置`;`

我希望我说得通。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T20:06:56.310

示例字符串的结构方式，您可以使用以下模式将其分解：

```
"((?:^|; )(?<userId>.*?))+" 
```

括号的第一个子集是一个“非捕获”组，它匹配一行的开头（对于第一项），或者一个分号后跟一个空格（对于所有其他项）。括号的第二个子集将非贪婪地匹配任何字符集（意味着将使用导致匹配整个模式的最小字符集），并将它们“捕获”在可以通过其名称引用的集合中，“用户身份”。

按以下方式使用此模式（需要引用/使用 System.Text.RegularExpressions 和 System.Linq）：

```
var match = Regex.Match(input, pattern);
var userIds = match.Groups["userId"].Captures.OfType<string>().ToList(); 
```

完成后，userIds 将被实例化，`List<string>`填充此字符串中的所有四个 userIds。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T19:56:09.190

利用

```
 "jsmith; bbrown; kosborne; aharris".Split(';').Select(x => x.Trim()).ToList() 
```

反而。

评论中的讨论导致以下建议：

```
 Regex.Matches("\w+(?=\s*;)", "jsmith; bbrown; kosborne; aharris").Cast<Match>().Select(m => m.Value).ToList() 
```

# php - MongoDB + PHP：如何使用特定键将项目推送到数组？

> ID：10420635
> 
> 赞同：1
> 
> 时间：2012-05-02T19:47:45.700
> 
> 标签：php, mongodb, mongodb-query

在 MongoDB-PHP 中，我使用以下示例代码将新条目推送到集合内数组的末尾...

```
$data = array(
        "domain"=>"superduperyoyo.com",
        "number"=>123,
        "week"=>5,
        "year"=>2012
);
$db->domains->save(
        array( 'someid' => $someid),
        array( '$push' => array( 'data' => $data ))
); 
```

这将返回 0,1,2,3.... 之类的键，即。

```
[someid] => somesupercoolid123
[data] => Array
    (
        [0] => Array
            (
                [domain] => superduperyoyo.com
                [number] => 123
                [week] => 5
                [year] => 2012
            )
        [1] => Array(...)
        [2] => Array(...)
    ) 
```

我想要做的是将 YearWeekNumber 存储为这样的键......

```
 [someid] => somesupercoolid123 
   [data] => Array
        (
            [201205123] => Array
                (
                    [domain] => superduperyoyo.com
                    [number] => 123
                    [week] => 5
                    [year] => 2012
                )
            [201206123] => Array(...)
            [201207123] => Array(...)
        ) 
```

您如何与新条目一起保存/更新密钥？我假设你不能使用 $push。您只使用 .save 或 .update 但如何传递密钥？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T21:21:53.383

你可以通过使用来做到这一点`$set`：

```
$data = array(
        "domain"=>"superduperyoyo.com",
        "number"=>123,
        "week"=>5,
        "year"=>2012
);
$db->domains->update(
        array( 'someid' => $someid),
        array( '$set' => array( 'data' => array( 201205123 => $data )))
); 
```

但是，我不建议这样做。最好使用此“201205123”值设置另一个键，否则您将无法对此值进行范围查询或设置索引。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T23:33:49.563

```
$data = array(
        "domain"=>"superduperyoyo.com",
        "number"=>123,
        "week"=>5,
        "year"=>2012
); 
```

```
 $update = array(
        '$push' => array('data.201205123'  =>  $data )
); 
```

# mysql - MySQL 查询选择最小的非空、非零整数

> ID：10420637
> 
> 赞同：3
> 
> 时间：2012-05-02T19:48:03.170
> 
> 标签：mysql

我有一个有 5 列的表：`uniqueid`、`int1`、`int2`、`int3`和`FruitStand`。我正在寻找的是一个关于如何进行单个选择的示例，该选择输出具有最少非空、非零整数的列的数据。

示例表：

```
uniqueid|int1|int2|int3|FruitStand
1       |   2|   3|   4|Apples
2       |  21|   4|   0|Oranges
3       |NULL|   2|   5|Pears 
```

所以我会从这个查询中得到结果

```
1       |   2|Apples
2       |   4|Oranges
3       |   2|Pears 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-02T20:19:05.293

```
SELECT uniqueid,
FruitStand,
LEAST(
    COALESCE(int1, int2, int3),
    COALESCE(int2, int3, int1),
    COALESCE(int3, int1, int2)) AS number
FROM myTable 
```

为了便于阅读，我省略`NULLIF(intX, 0)`了`COALESCE`. 您将需要添加这些以忽略零值。

使用该函数时需要使用`COALESCE`to 避免`NULL`值，`LEAST`因为从 MySQL 5.0.13 开始，`LEAST`如果`NULL`任何参数为`NULL`.

有关详细信息，请参阅[此问题](https://stackoverflow.com/questions/3078370/how-to-find-least-non-null-column-in-one-particular-row-in-sql)。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-09-26T13:51:14.347

```
SELECT LEAST(
    IF(int1,int1,999999),
    IF(int2,int2,999999),
    IF(int3,int3,999999)
); 
```

在这里，值 999999 应该是这些列的最大可能值。

# xpath - 使用 xpath 查找倒数第二个节点

> ID：10420638
> 
> 赞同：7
> 
> 时间：2012-05-02T19:48:07.557
> 
> 标签：xpath, xslt-1.0, docbook

我有一个带有`chapters`嵌套的 XML 文档`sections`。我正在尝试为任何部分查找第一个二级部分祖先。那是`ancestor-or-self`轴中的倒数第二部分。伪代码：

```
<chapter><title>mychapter</title>
  <section><title>first</title>
     <section><title>second</title>
       <more/><stuff/>
     </section>
  </section>
</chapter> 
```

我的选择器：

```
<xsl:apply-templates 
    select="ancestor-or-self::section[last()-1]" mode="title.markup" /> 
```

当然，直到 last()-1 没有定义（当前节点是`first`节）之前，它都有效。

如果当前节点在该`second`部分下方，我想要标题`second`。否则我想要标题`first`。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-02T20:17:04.947

用这个替换你的xpath：

```
ancestor-or-self::section[position()=last()-1 or count(ancestor::section)=0][1] 
```

由于您已经可以在除一个之外的所有情况下找到正确的节点，因此我更新了您的 xpath 以**找到**部分`first`( `or count(ancestor::section)=0`)，然后选择 ( `[1]`) 第一个匹配项（以相反的文档顺序，因为我们使用的是`ancestor-or-self`轴）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-03T02:56:47.963

**这是一个更短更有效的解决方案**：

```
(ancestor-or-self::section[position() > last() -2])[last()] 
```

这将选择名为 的可能前两个最顶层祖先中的最后一个`section`。如果只有一个这样的祖先，那么它本身就是最后一个。

**这是一个完整的转换**：

```
<xsl:stylesheet version="1.0"
 xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output method="text"/>

 <xsl:template match="section">
  <xsl:value-of select="title"/>
  <xsl:text> --> </xsl:text>

  <xsl:value-of select=
  "(ancestor-or-self::section[position() > last() -2])[last()]/title"/>
  <xsl:text>&#xA;</xsl:text>
  <xsl:apply-templates/>
 </xsl:template>

 <xsl:template match="text()"/>
</xsl:stylesheet> 
```

**当此转换应用于以下文档时**（基于提供，但添加了更多嵌套`section`元素）：

```
<chapter>
    <title>mychapter</title>
    <section>
        <title>first</title>
        <section>
            <title>second</title>
            <more/>
            <stuff/>
        <section>
            <title>third</title>
        </section>
        </section>
    </section>
</chapter> 
```

**产生正确的结果**：

```
first --> first
second --> second
third --> second 
```

# simple.data - 如何检查 SimpleList 或 SimpleRecord 是否为空

> ID：10420640
> 
> 赞同：0
> 
> 时间：2012-05-02T19:48:36.887
> 
> 标签：simple.data

我得到了以下问题。我正在尝试使用 With 或 WithMany 指令通过外部连接检索业务关系的角色链接列表。参照完整性已在数据库中到位，但角色表上的主键是复合键。这就是我使用 OuterJoin 子句的原因，否则会出现异常。

当查询被执行时，结果完全符合我的预期，并且很好地填充了数据。然而，在某些情况下，数据库中还没有可用的角色。所以我希望在这些情况下，返回的 SimpleList（下面的角色）将为空，因为没有可用的数据。相反，Simple.Data 返回一个 SimpleLIst，如果我在调试中展开动态视图，那么它会显示“空：无法发现有关此对象的更多信息”。即使我向下遍历并检索 SimpleList 中的第一个对象，它甚至在调试中返回与上面相同信息的 SimpleRecord。只有在我请求 SimpleRecord 的属性后，我才得到一些信息，即记录为空，因为它返回 null。

归根结底...有没有人可以告诉我如何在不遍历层次结构的情况下检查 SimpleList 或 SimpleRecord 是否为空或 null？

我正在使用 Simple.Data 0.16.1.0（由于政策我还不能使用测试版）

提前感谢您阅读整个故事...

下面是代码示例：

```
dynamic businessRelationRoles;

var query = db.Zakenrelaties.As("BusinessRelations")
   .All()
   .OuterJoin(db.Zakenrelaties_Rollen.As("Roles"), out businessRelationRoles)
   .On(zr_ID: db.Zakenrelaties.zr_ID)
   .With(businessRelationRoles);

foreach (var relation in query)
{
   //Get the SimpleList as IEnumerable
   IEnumerable<dynamic> roles = relation.Roles;

   //Get the first available SimpleRecord
   var role = roles.First();

   //Check if any record was returned..This passes always?? Even if the SimpleList was empty
   if (role != null)
   {
       //Get the id of the role. returns null if SimpleRecord was empty
       var roleId = role.zrro_id;
   }
} 
```

* * *

有没有人可以帮助我？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T13:27:23.717

迟来的，仅供参考，这是一个错误，并在 0.17（又名 1.0-RC0）版本中得到修复。

# java - 在带有 JAXB 的 Jersey RESTful API 的 JSON 输出中包含 null 元素

> ID：10420641
> 
> 赞同：5
> 
> 时间：2012-05-02T19:48:48.120
> 
> 标签：java, json, jaxb, jersey, jax-rs

我有一个类，我想通过 Jersey RESTful API 公开。它看起来类似于：

```
@XmlRootElement
public class Data {
    public String firstName;
    public String lastName;
} 
```

我的问题是这些字段可能为空，在这种情况下，JSON 输出中省略了该字段。我希望所有字段都存在，无论它们的价值如何。例如，如果 lastName 为 null，则 JSON 输出将为：

```
{
   "firstName" : "Oleksi"
} 
```

而不是我想要的：

```
{
   "firstName" : "Oleksi",
   "lastName" : null
} 
```

我有一个如下所示的 JAXBContextResolver（ContextResolver 的实现）：

```
@Provider
public class JAXBContextResolver implements ContextResolver<JAXBContext> {

     // internal state
    private final JAXBContext context;    
    private final Set<Class> types; 
    private final Class[] cTypes = { Data.class };

    public JAXBContextResolver() 
    throws Exception {

        types = new HashSet(Arrays.asList(cTypes));
        context = new JSONJAXBContext(JSONConfiguration.natural().humanReadableFormatting(true).build(), cTypes);
    }

    @Override
    public JAXBContext getContext(Class<?> objectType) {

        return (types.contains(objectType)) ? context : null;
    }
} 
```

一段时间以来，我一直试图弄清楚如何获得所需的输出，但我没有运气。我愿意尝试其他的 ContextResolvers/Serializers，但我找不到一个可以工作的，所以代码示例会很好。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-02T20:29:36.150

对于[**EclipseLink JAXB (MOXy)**](http://www.eclipse.org/eclipselink/moxy.php)的 JSON 绑定，正确的映射如下。您可以与您的提供商一起尝试，看看它是否也可以工作：

```
@XmlRootElement
public class Data {
    @XmlElement(nillable=true)
    public String firstName;

    @XmlElement(nillable=true)
    public String lastName;
} 
```

**了解更多信息**

*   [http://blog.bdoughan.com/2012/04/binding-to-json-xml-handling-null.html](http://blog.bdoughan.com/2012/04/binding-to-json-xml-handling-null.html)
*   [http://blog.bdoughan.com/2012/05/moxy-as-your-jax-rs-json-provider.html](http://blog.bdoughan.com/2012/05/moxy-as-your-jax-rs-json-provider.html)

* * *

**更新 2**

EclipseLink 2.4 包含/`MOXyJsonProvider`的实现，您可以直接使用它来利用 MOXy 的 JSON 绑定`MessageBodyReader``MessageBodyWriter`

*   [http://blog.bdoughan.com/2012/05/moxy-as-your-jax-rs-json-provider.html](http://blog.bdoughan.com/2012/05/moxy-as-your-jax-rs-json-provider.html)

**更新 1**

以下`MessageBodyReader`/`MessageBodyWriter`可能更适合您：

```
import java.io.*;
import java.lang.annotation.Annotation;
import java.lang.reflect.*;
import javax.xml.transform.stream.StreamSource;

import javax.ws.rs.*;
import javax.ws.rs.core.*;
import javax.ws.rs.ext.*;
import javax.xml.bind.*;

import org.eclipse.persistence.jaxb.JAXBContextFactory;

@Provider
@Produces(MediaType.APPLICATION_JSON)
@Consumes(MediaType.APPLICATION_JSON)
public class MOXyJSONProvider implements
    MessageBodyReader<Object>, MessageBodyWriter<Object>{

    @Context
    protected Providers providers;

    public boolean isReadable(Class<?> type, Type genericType,
        Annotation[] annotations, MediaType mediaType) {
        return true;
    }

    public Object readFrom(Class<Object> type, Type genericType,
            Annotation[] annotations, MediaType mediaType,
            MultivaluedMap<String, String> httpHeaders, InputStream entityStream)
            throws IOException, WebApplicationException {
            try {
                Class<?> domainClass = getDomainClass(genericType);
                Unmarshaller u = getJAXBContext(domainClass, mediaType).createUnmarshaller();
                u.setProperty("eclipselink.media-type", mediaType.toString());
                u.setProperty("eclipselink.json.include-root", false);
                return u.unmarshal(new StreamSource(entityStream), domainClass).getValue();
            } catch(JAXBException jaxbException) {
                throw new WebApplicationException(jaxbException);
            }
    }

    public boolean isWriteable(Class<?> type, Type genericType,
        Annotation[] annotations, MediaType mediaType) {
        return true;
    }

    public void writeTo(Object object, Class<?> type, Type genericType,
        Annotation[] annotations, MediaType mediaType,
        MultivaluedMap<String, Object> httpHeaders,
        OutputStream entityStream) throws IOException,
        WebApplicationException {
        try {
            Class<?> domainClass = getDomainClass(genericType);
            Marshaller m = getJAXBContext(domainClass, mediaType).createMarshaller();
            m.setProperty("eclipselink.media-type", mediaType.toString());
            m.setProperty("eclipselink.json.include-root", false);
            m.marshal(object, entityStream);
        } catch(JAXBException jaxbException) {
            throw new WebApplicationException(jaxbException);
        }
    }

    public long getSize(Object t, Class<?> type, Type genericType,
        Annotation[] annotations, MediaType mediaType) {
        return -1;
    }

    private JAXBContext getJAXBContext(Class<?> type, MediaType mediaType)
        throws JAXBException {
        ContextResolver<JAXBContext> resolver
            = providers.getContextResolver(JAXBContext.class, mediaType);
        JAXBContext jaxbContext;
        if(null == resolver || null == (jaxbContext = resolver.getContext(type))) {
            return JAXBContextFactory.createContext(new Class[] {type}, null); 
        } else {
            return jaxbContext;
        }
    }

    private Class<?> getDomainClass(Type genericType) {
        if(genericType instanceof Class) {
            return (Class<?>) genericType;
        } else if(genericType instanceof ParameterizedType) {
            return (Class<?>) ((ParameterizedType) genericType).getActualTypeArguments()[0];
        } else {
            return null;
        }
    }

} 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-05-02T20:24:15.000

Java null 是 JavaScript 的未定义。如果要将 Java null 转换为 JavaScript null，则需要查阅转换库。

# magento - 通过外部站点的查询字符串更新自定义选项 - Magento

> ID：10420646
> 
> 赞同：0
> 
> 时间：2012-05-02T19:49:22.657
> 
> 标签：magento

我们有一个外部站点，其中包含我们的产品和几个选项，我们希望将该数据从该站点传递到商店的产品页面，以便客户可以更新更多属性并添加图像。我知道有一种方法可以直接将其添加到购物车，但我们希望他们先在产品页面停下来回答更多问题，然后再添加到购物车。

这可能吗？

感谢您提前提供任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T20:37:29.747

我将使用观察者在添加到购物车之前捕获事件，并获取所需的值并将它们设置在 PDP 的产品选项上。

关于观察者模式的更多细节可以在这里找到：

[http://www.magentocommerce.com/wiki/5__-_modules_and_development/0__-_module_development_in_magento/customizing_magento_using_event-observer_method](http://www.magentocommerce.com/wiki/5_-_modules_and_development/0_-_module_development_in_magento/customizing_magento_using_event-observer_method)

# python - PCA 计算中的复特征值

> ID：10420648
> 
> 赞同：6
> 
> 时间：2012-05-02T19:49:57.323
> 
> 标签：python, numpy, pca, eigenvector, eigenvalue

我正在尝试计算矩阵的 PCA。

有时，得到的特征值/向量是复值，因此当尝试通过将特征向量矩阵与点坐标相乘来将点投影到低维计划时，我得到以下警告

```
ComplexWarning: Casting complex values to real discards the imaginary part 
```

在那行代码中`np.dot(self.u[0:components,:],vector)`

我用来计算 PCA 的整个代码

```
import numpy as np
import numpy.linalg as la

class PCA:
    def __init__(self,inputData):
        data = inputData.copy()
        #m = no of points
        #n = no of features per point
        self.m = data.shape[0]
        self.n = data.shape[1]
        #mean center the data
        data -= np.mean(data,axis=0)

        # calculate the covariance matrix
        c = np.cov(data, rowvar=0)

        # get the eigenvalues/eigenvectors of c
        eval, evec = la.eig(c)
        # u = eigen vectors (transposed)
        self.u = evec.transpose()

    def getPCA(self,vector,components):
        if components > self.n:
            raise Exception("components must be > 0 and <= n")
        return np.dot(self.u[0:components,:],vector) 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-05-05T14:38:26.257

协方差矩阵是对称的，因此具有实特征值。由于数值误差，您可能会在某些特征值中看到一个小的虚部。虚部一般可以忽略。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-05T14:32:10.143

您可以为 PCA 使用 scikits python 库，这是一个如何使用它的[示例](http://scikit-learn.sourceforge.net/dev/auto_examples/decomposition/plot_pca_vs_lda.html#example-decomposition-plot-pca-vs-lda-py)

# iphone - Flex Mobile 在 iPhone / iPad 上设置状态栏颜色

> ID：10420649
> 
> 赞同：0
> 
> 时间：2012-05-02T19:49:57.443
> 
> 标签：iphone, apache-flex, mobile, statusbar

我一直想将 iPhone 的状态栏样式设置为深色或透明。

我在网上搜索并注意到需要设置什么

`[[UIApplication sharedApplication]`

`setStatusBarStyle:UIStatusBarStyleBlackOpaque animated:NO];`

我知道这些属性和值应该添加到`appname-app.xml`我的 Flex Mobile 项目的 iPhone 标记中： `<iPhone> <InfoAdditions><![CDATA[`

我不确定要设置什么键/值来实现深色或半透明状态栏？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T20:05:17.093

解决了：

在您的 Flex 项目的 appname-xml.xml 文件中，滚动到`<iPhone>`标签并应具有以下键/值：

```
<iPhone>
<InfoAdditions>
         <![CDATA[
    <key>UIStatusBarStyle</key>
            <string>UIStatusBarStyleBlackOpaque</string>
      ]]>
</InfoAdditions>    
</iPhone> 
```

# join - RavenDB Transformations and Joining Simple Data

> ID：10420657
> 
> 赞同：0
> 
> 时间：2012-05-02T19:50:48.077
> 
> 标签：join, ravendb, transformation

I was wondering if someone could help me understand RavenDB transformations as I cant seem to get them working correctly. I tried following [Ayende's post](http://ayende.com/blog/4661/ravendb-live-projections-or-how-to-do-joins-in-a-non-relational-database) but I am not able to apply it to my situation. I have two models, a UserModel and an UserAddressModel. The code is as follows

```
public class UserModel
    {
        #region Properties

        public string Id { get; set; }

        public string AccountId { get; set; }

        public string UserName { get; set; }

        public string FirstName { get; set; }

        public string LastName { get; set; }

        public string Email { get; set; }

        public DateTime InsertDate { get; set; }

        #endregion 
    } 
```

and

```
public class UserAddressModel
    {

        public string Id { get; set; }

        public string AccountId { get; set; }

        public string Address1 { get; set; }

        public string Address2 { get; set; }

        public string City { get; set; }

        public string State { get; set; }

        public string Zipcode { get; set; }

        public float Latitude { get; set; }

        public float Longitude { get; set; }

        public DateTime InsertDate { get; set; }

    } 
```

I have my RavenDB Index set up like such.

```
public class UserDashboard_ByName : AbstractIndexCreationTask<UserModel>
    {
        public UserDashboard_ByName()
        {
            Map = users => from user in users
                                   select new { user.UserName, user.AccountId };

            TransformResults =
                (database, users) => from user in users
                                             let useraddress = database.Load<UserAddressModel>(user.AccountId)
                                             select new
                                                        { FirstName = user.FirstName,
                                                          LastName = user.LastName,
                                                          Address1 = useraddress.Address1,
                                                          Address2 = useraddress.Address2

                                                        };
        }
    } 
```

and I am calling it with the following code

```
using (var session = DataDocumentStore.Instance.OpenSession())
            {

                //Get the AccountId
                var userDashboard =
                (from user in session.Query<UserModel, UserDashboard_ByName>()
                 where user.UserName == userName
                 select user).SingleOrDefault();

            } 
```

When I call the index, it returns a **UserModel** type, not the anonymous type that I am expecting. Also, I do not understand how I can call

```
let useraddress = database.Load<UserAddressModel>(user.AccountId) 
```

when there is no specific relationship that has been specified in code or anywhere else.

Maybe someone can explain to me how I should be joining data in RavenDB? Some expanded documentation or a nudge in the right direction to understanding this better would be greatly appreciated. Thanks in advance.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T20:52:11.150

You need to create another model (a view model basically), such as UserWithAddressModel that includes the 4 properties you wish to return:

```
public class UserWithAddressModel
    {
        public string FirstName { get; set; }
        public string LastName { get; set; }    
        public string Address1 { get; set; }
        public string Address2 { get; set; }
    } 
```

Then do your query like this:

```
var userDashboard =
                (from user in session.Query<UserModel, UserDashboard_ByName>()
                 where user.UserName == userName
                 select user).As<UserWithAddressModel>().SingleOrDefault(); 
```

I think this is what you are looking for.

**UPDATE**:

Try like this:

```
var userDashboard = session.Query<UserModel, UserDashboard_ByName>()
    .Where(x => x.UserName == userName)
    .As<UserWithAddressModel>()
    .SingleOrDefault(); 
```

UPDATE2:

Sorry, just looked again at what you are trying to do, it won't work like that. I thought you had a reference to your UserAddressModel in your UserModel (such as UserAddressId).

Why are you splitting the 2 models up in the first place if they are a 1:1 relation?

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T22:21:05.330

The problem is inside your TransformResult function where you call `database.Load<UserAddressModel>(user.AccountId)`. You can only load the UserAddressModel with its id, not by a property like AccountId.

You have to store the id of the UserAddressModel inside your UserModel if you want to do it that way. However, I wouldn't model it in that way. UserAddressModel doesn't have any meaning on itself, so it should probably be part of UserModel. As a rule of thumb, you generally want to have your aggregrate roots as documents and everything else *inside* them.

# php - php以表格形式显示信息

> ID：10420666
> 
> 赞同：3
> 
> 时间：2012-05-02T19:51:33.263
> 
> 标签：php, html

我有一个功能，允许成员在登录后更新他们的个人详细信息，更新页面具有用户将填写的表单，当按下提交按钮时，deatils 会更新。这很好用，我想在表单中的适当文本字段中显示用户当前的详细信息，例如名字文本字段将具有值“James”，用户可以删除它以输入“jim”。是否与向表单字段添加值有关？我的表格如下所示。

```
 <tr>
    <td width="78">Firstname</td>
    <td width="6">:</td>
    <td width="294"><input name="firstname" type="text" id="firstname"></td>
    </tr>
    <tr>
    <td width="78">Surname</td>
    <td width="6">:</td>
    <td width="294"><input name="surname" type="text" id="surname"></td>
    </tr> 
```

任何帮助深表感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T19:52:30.707

`echo '<input type="text" value="'. $someValue .'" />';`

或者

`<input type="text" value="<?php echo $someValue; ?>" />`

两者显然都要求您位于 .php 文件中，并且该文件`$someValue`包含要设置的适当值。还要注意值周围的双引号。没有它们，任何空格都会在渲染时破坏值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T19:54:02.637

在文本框中打印值。

`<input type="text" value="<?php echo $someValue; ?>" />`

# jquery - jQuery Mobile - 有什么方法可以不缓存页面？

> ID：10420667
> 
> 赞同：1
> 
> 时间：2012-05-02T19:51:35.110
> 
> 标签：jquery, jquery-mobile

我有一个在 AJAX 调用后动态更新的页面。似乎 jQuery Mobile 在页面的初始加载期间加载了缓存。如果我重新访问该页面，它总是显示初始版本而不是更新的页面。

无论如何都要强制页面刷新缓存或每次都简单地执行新请求？

我已经尝试添加`data-ajax="false"`到锚点，它可以工作但会禁用过渡动画，所以我仍在寻找其他选项。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-02T19:56:03.423

你不能在你的 AJAX URL 中添加一个每次都会改变的参数吗？就像是：

```
&nocache="+new Date().getTime(); 
```

# jquery - 关闭变量后如何在 SimpleModal 中返回变量

> ID：10420668
> 
> 赞同：0
> 
> 时间：2012-05-02T19:51:42.193
> 
> 标签：jquery, simplemodal

这似乎是对 simplemodal 的广泛使用，但我无法在任何地方找到如何做到这一点。

我正在使用simplemodal通过iframe拉出一个页面，生成一个变量，然后我想在模态关闭时将它传递回父页面。

我该怎么做呢？

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T20:25:08.060

你的意思是把它传回去？jQuery？如果您不在同一个域、协议或以其他方式正确设置了 document.domain，那么您将遇到以下代码段的错误，但您可以尝试以下类似的方法来访问父页面的 DOM。

```
window.parent.$ 
```

所以假设你在父页面上有这个功能，

```
function UpdateTheHeaderPlease(data) {
$('.header').replaceWith(data); 
```

}

然后你将这段代码封装在 simplemodal 回调 OnClose 中：

```
$("#element-id").modal({onClose: function (dialog) {
window.parent.UpdateTheHeaderPlease(some data); 
```

});

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T21:01:05.910

好的，我想通了，感谢 Rob A 的一些好主意。

我必须先给 iframe 起个名字。

```
$.modal('<iframe src="modal_calls.cfm" name="frameName">', { 
```

然后在 iFrame 页面中，我设置了我想要传递回窗口范围变量的变量：

```
window.frameVar = myVar; 
```

然后在我关闭模式之前，我使用 iFrame 的名称设置了一个窗口范围的变量：

```
onClose: function (dialog) {
    window.newFrameVar= window.frameName.frameVar;
    $.modal.close();
} 
```

然后我可以使用 window.newFrameVar 在父文档上访问它。

# objective-c - 如何处理多行的 NSTableView 拖放

> ID：10420671
> 
> 赞同：2
> 
> 时间：2012-05-02T19:51:50.940
> 
> 标签：objective-c, cocoa, nstableview

我对 Cocoa 开发人员还很陌生，但是在我的 NSTableView 中实现单行拖放非常简单。However I'm now having a hard time getting it to work right when multiple rows are selected.

当所有选定的行都是连续的时，它似乎可以正常工作，但是当您选择第 0 行和第 4 行（其中 4 是最后一行）并将它们拖到两者之间的某个位置（例如第 1 行或第 2 行）时，它会失败) — 失败的意思是删除了错误的行，所以我最终得到了重复。

`acceptDrop`到目前为止，这是我的代码：

```
- (BOOL)tableView:(NSTableView *)aTableView acceptDrop:(id <NSDraggingInfo>)info
        row:(NSInteger)row dropOperation:(NSTableViewDropOperation)operation
{
    NSPasteboard* pboard = [info draggingPasteboard];
    NSData* rowData = [pboard dataForType:BasicTableViewDragAndDropDataType];
    NSIndexSet* rowIndexes = [NSKeyedUnarchiver unarchiveObjectWithData:rowData];
    NSInteger dragRow = [rowIndexes firstIndex];
    NSArray *tempArray = [[NSArray alloc] initWithArray:_filePaths copyItems:YES];

    int i = 0;

  if (dragRow < row) 
    {
        while (dragRow != NSNotFound) 
        {
            int putRow = row + i;
            int deleteRow = dragRow;

            if (putRow > [_filePaths count]) { putRow = [_filePaths count]; }
            if (i >= 1)
            {
                // offset fix for already deleted rows
                deleteRow = deleteRow - i;
            }

            [_filePaths insertObject:[tempArray objectAtIndex:dragRow] atIndex:putRow];
            [_filePaths removeObjectAtIndex:deleteRow];

            dragRow = [rowIndexes indexGreaterThanIndex:dragRow];

            i++;
        }

        [_imagesTableView noteNumberOfRowsChanged];
        [_imagesTableView reloadData];

    return YES;

  }

    NSLog(@"dragging up");

    while (dragRow != NSNotFound) 
    {
        int putRow = row + i;
        if (putRow > [_filePaths count]) { putRow = [_filePaths count]; }

        [_filePaths removeObjectAtIndex:dragRow];
        [_filePaths insertObject:[tempArray objectAtIndex:dragRow] atIndex:putRow];

        dragRow = [rowIndexes indexGreaterThanIndex:dragRow];

        i++;
    } 

    [_imagesTableView noteNumberOfRowsChanged];
    [_imagesTableView reloadData];

  return YES;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-03T17:59:00.877

因此，经过多次拖放（以及一些应用程序崩溃），我再次开始网络搜索，并[在 GitHub 上](https://github.com/dustinrue/ControlPlane/blob/c925241da42156427e70a452907d5679f291eb2c/src/DNDArrayController.m)[找到了这个**类**](https://github.com/dustinrue/ControlPlane/blob/c925241da42156427e70a452907d5679f291eb2c/src/DNDArrayController.m)。

我在那里模仿了代码，现在它就像一个魅力一样工作。

# core-data - iOS 核心数据应用程序委托？

> ID：10420672
> 
> 赞同：0
> 
> 时间：2012-05-02T19:51:55.220
> 
> 标签：core-data, ios5

我正在开发一个需要使用 Core Data 的应用程序，我不禁注意到，如果您在 Xcode 中使用除 Master-Detail、Utility 或 Blank 模板之外的任何东西，则必须手动输入 Core Data。

我还注意到，为了使 Core Data 正常工作，您必须将应用程序包装在导航控制器中，并将 Core Data 的代码放在 AppDelegate 文件中。

任何人都知道解决这个问题的方法，或者这是应该的方式吗？

我的 App Delegate 看起来像这样，这三行似乎是 ManagedObjectContext 最重要的设置！

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    // Override point for customization after application launch.

    UINavigationController *navController = (UINavigationController *)self.window.rootViewController;
    FBBetsViewController *controller = (FBBetsViewController *)navController.topViewController;
    controller.managedObjectContext = self.managedObjectContext; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-03T01:22:04.557

这些模板包括一些核心数据设置，但远非强制性。您可以使用任何项目中的核心数据。如果您愿意，您可以从空应用程序中获取代码，并在您的项目中使用它。

如果查看生成的代码，您将看到用于构建核心数据堆栈的三个主要组件的三个“getter”。

managedObjectModel 使用捆绑包中的模型文件创建模型。通过 New-File 并选择 Core Data Data Model 在 Xcode 中轻松创建。

persistentStoreCoordinator 使用模型和 SQL 存储。

最后，通过使用 persistentStoreCoordinator 创建 managedObjectContext。请注意，如果您愿意，您确实可以通过一种方法构建该堆栈。没有要求有这些单独的访问者......

你可以做这样的事情......

```
- (NSManagedObjectContext*)setupCoreDataStack
{
    // Load the model description
    NSURL *modelURL = [[NSBundle mainBundle] URLForResource:@"APPNAME" withExtension:@"momd"];
    NSManagedObjectModel *model = [[NSManagedObjectModel alloc] initWithContentsOfURL:modelURL];

    // Prepare the persistent store coordinator - needs the model
    NSURL *documentsDirectory = [[[NSFileManager defaultManager] URLsForDirectory:NSDocumentDirectory inDomains:NSUserDomainMask] lastObject];
    NSURL *storeURL = [applicationDocumentsDirectory URLByAppendingPathComponent:@"APPNAME.sqlite"];
    NSError *error = nil;
    NSPersistentStoreCoordinator *psc = [[NSPersistentStoreCoordinator alloc] initWithManagedObjectModel:model];
    if (![psc addPersistentStoreWithType:NSSQLiteStoreType configuration:nil URL:storeURL options:nil error:&error])
    {
        // Handle the error !!!!!
        // exit the function
        return nil;
    }    

    // Create the managed object context.  This is what you will really
    // use in the rest of your program.
    NSManagedObjectContext *moc = [[NSManagedObjectContext alloc] initWithConcurrencyType:NSMainQueueConcurrencyType];
    [moc setPersistentStoreCoordinator:psc];
    return moc;
} 
```

现在你的筹码和其他人几乎一样。唯一真正的区别是这里的 MOC 使用的是主队列并发类型，这是一个更好的选择。

如果您想拥有更好的性能模型，请插入父 moc。

实际上，如果您没有采用当前的核心数据策略，我建议您使用 UIManagedDocument。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-02T19:57:38.253

Core Data 不强制你使用导航控制器，也不强制你在 AppDelegate 中设置它。通常在启动时将设置放在 AppDelegate 中，但实际上，只要确保它只初始化一次，你就可以将它移动到任何你想要的地方。

# wix - WIX 用户元素似乎在每次安装时创建一个新的用户配置文件

> ID：10420673
> 
> 赞同：2
> 
> 时间：2012-05-02T19:51:55.327
> 
> 标签：wix

我的 WIX 安装程序的组件中有这个位

```
 <util:User Id="CIUSER" CreateUser="yes" UpdateIfExists="no" Name="myuser" PasswordNeverExpires="yes" Password="noneofyourbusiness">
      <util:GroupRef Id="Users" />
    </util:User> 
```

我还在代码的其他部分使用它作为参考来设置目录权限。

每次安装我的产品时，似乎都会创建一个新的用户配置文件。因此，如果任何 id 放置在桌面上，以该用户身份登录，从安装到安装都看不到它。

在大多数情况下，我只是在安装程序中有这个代码来帮助设置我们系统的人。这是一个桌面应用程序，但它作为单个“设备”出售，不是通用计算机，我们正在创建一个非特权帐户来执行我们的应用程序。

这是 WIX 3.5。任何人以前见过这样的事情或知道我可能做错了什么？

它可以很好地创建用户并设置适当的权限，现在 Windows 7 中的用户下仅存在多个配置文件。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-03T19:27:16.960

设置`RemoveOnUninstall`属性为`no`，默认为`yes`。您实际上是在每次安装时创建一个新用户，因此配置文件是不同的。

卸载时无法删除配置文件成为WiX 3.5 中[的一个已知缺陷](http://wixtoolset.org/issues/3034/)。
它与`UpdateIfExists`属性无关，也与产品是否卸载重装或升级无关。

[Rob Mensching](http://robmensching.com/blog/)关于缺陷的说明说，自定义操作错误不会在 WiX 4.0 之前得到修复。这也提醒我们，所有的 wixutil 都是使用[自定义操作](http://msdn.microsoft.com/en-us/library/windows/desktop/aa368062%28v=vs.85%29.aspx)实现的，并且我们都能够在技术上创建更好的自定义操作来处理用户帐户并将其作为二进制文件或脚本包含在 MSI 中，前提是问题很紧急足够。或者也许只是一个在卸载时删除非活动用户配置文件。

（这个答案的功劳主要归功于问题作者进行的额外研究。我自己对原因的第一次尝试被发现是错误的。谢谢。）

# r - 在 data.frame 上使用 str 时出错

> ID：10420675
> 
> 赞同：0
> 
> 时间：2012-05-02T19:52:03.957
> 
> 标签：r

当我尝试`str`在 R 中使用该函数时出现错误。
这是数据：

```
> dput(data1)
data1<- structure(list(Year = 1990:2010, Counts = c(1401L, 1290L, 1168L,1260L, 1252L, 1381L, 1330L, 1275L, 1235L, 1248L, 1237L, 1206L, 1175L, 1172L, 1055L, 1030L, 1002L, 987L, 915L, 806L, 868L)), .Names = c("Year", "Counts"), class = "data.frame", row.names = c(NA, -21L)) 
```

我不知道为什么 R 给我以下错误，`str`而 while`class`函数清楚地表明 data1 是 a `data.frame`。

```
> class(data1)
[1] "data.frame"
> str(data1)
Error in str(data1) : 
  unable to find a non-generic version of function "str" 
```

我正在为 Windows 使用 R 版本 2.15.0 (2012-03-30)。

任何帮助将不胜感激。

**编辑：** 通过干净的 R 会话，它起作用了。但是为什么会出现这种问题呢？这有可能知道吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-03T00:05:28.750

好的，我会咬的。

**为什么会出现这种问题？**

对象（即函数、变量）屏蔽是 R 代码中最常见的错误或错误来源之一。为什么会发生这种情况？

好吧，R 的解析器中有一个保留字列表，位于`?Reserved`：

> R 的解析器中的保留字是：
> 
> `if` `else` `repeat` `while` `function` `for` `in` `next` `break`
> 
> `TRUE` `FALSE` `NULL` `Inf` `NaN` `NA` `NA_integer_` `NA_real_` `NA_complex_` `NA_character_`
> 
> `...`和`..1`等`..2`，用于引用从封闭函数向下传递的参数。

这意味着您，用户，不能重新分配这些名称的值。但是几乎所有其他东西（假设它的语法有效）都在界限内。

例如，`data`实际上是**utils**包中的一个函数，这就是为什么人们通常建议不要命名你的数据框`data`。您将屏蔽该*函数* `data`，并且任何依赖于它的代码都会阻塞。

老实说，我通常`df`用于数据框，即使这是一个计算 F 分布的分布函数的函数。（我不太需要 F 分布函数。但我仍然不应该那样做。）

这个问题的一个特别狡猾的例子是 R 用户之间关于设置的常见笑话：

```
T <- FALSE
F <- TRUE 
```

很多人都很懒惰并使用`T`and `F`for `TRUE`and `FALSE`，现在我们明白为什么这是一个非常*非常*糟糕的主意了。（很可能有人会为`T`or分配其他值`F`。）

事实上，任何时候你加载一个包，你都可能会看到一堆警告，其中 R 告诉你，通过加载那个包，你只是掩盖了一堆函数，因为它们有共同的名字。

**我怎么知道这已经发生了？**

这要容易得多。正如本在评论中所说，您使用`conflicts()`.

# ckfinder - CK finder 无法从 Web 服务器加载 XML 响应

> ID：10420676
> 
> 赞同：1
> 
> 时间：2012-05-02T19:52:05.760
> 
> 标签：ckfinder

我对 CKFinder 2.1.1 有疑问。当我单击应该加载它的按钮时，它会加载窗口，但会出现一个响应，上面写着“无法从 Web 服务器加载 XML 响应。服务器返回了一个空响应。” 下面贴出加载 CKFinder 的 javascript 函数。任何帮助将不胜感激，谢谢！

```
$('textarea.contentEditor').ckeditor(function(){},
{
   //Options~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
   resize_enabled : false,
   height : 600,
   fontSize_defaultLabel : '12',
   font_defaultLabel : 'Arial',
   //scayt_autoStartup : true,
   extraPlugins : 'contentPreview',
   contentsCss  : [ 
                $('#SITE_ROOT').html() + "/css/base/StandardWellness.css",      
           $('#SITE_ROOT').html() + "/css/base/CKEditorOverrides.css"                  
        ],
  toolbar :
  [
     { name: 'document', items : [ 'Source','-','DocProps','Print','-','Templates' ] },
     { name: 'clipboard', items : [ 'Cut','Copy','Paste','PasteText','PasteFromWord','-','Undo','Redo' ] },
     { name: 'editing', items : [ 'Find','Replace','-','SelectAll','-','SpellChecker', 'Scayt' ] },
     { name: 'forms', items : [ 'Form', 'Checkbox', 'Radio', 'TextField', 'Textarea', 'Select', 'Button', 'ImageButton',                
         'HiddenField' ] },
     '/',
     { name: 'basicstyles', items : [ 'Bold','Italic','Underline','Strike','Subscript','Superscript','-','RemoveFormat' ] },
     { name: 'paragraph', items : [ 'NumberedList','BulletedList','-','Outdent','Indent','-','Blockquote','CreateDiv','-',
        'JustifyLeft','JustifyCenter','JustifyRight','JustifyBlock','-','BidiLtr','BidiRtl' ] },
     { name: 'links', items : [ 'Link','Unlink','Anchor' ] },
     { name: 'insert', items : [ 'Image','Flash','Table','HorizontalRule','Smiley','SpecialChar','PageBreak','Iframe' ] },
     '/',
     { name: 'styles', items : [ 'Styles','Format','Font','FontSize' ] },
     { name: 'colors', items : [ 'TextColor','BGColor' ] },
     { name: 'tools', items : [ 'Maximize', 'ShowBlocks','-','About' ] },
     { name: 'MyHealth', items : ['contentPreview']}
  ]

}).ckeditor(function(){
   //Callback   ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
   var editor = $('textarea.contentEditor').ckeditorGet();               

   CKFinder.setupCKEditor( editor, { basePath : '../ckfinder/', rememberLastFolder : true  } ) ;

   CKEDITOR.on( 'dialogDefinition', function( ev )
   {
  // Take the dialog name and its definition from the event data.
  var dialogName = ev.data.name;
  var dialogDefinition = ev.data.definition;

  if ( dialogName == 'image' ) {
     dialogDefinition.removeContents( 'Upload' );   
     call_obj = new Object();                  
  }

  if ( dialogName == 'flash' ) {
     dialogDefinition.removeContents( 'Upload' );   
  }

  if( dialogName == 'link' ) {
     dialogDefinition.removeContents( 'upload' );   
  }
   });
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T20:47:06.937

仔细检查 ckeditor/config.php 文件中的错误。我遇到了同样的问题，直到我发现那里有一个错字。

# c# - 想要将图像添加到 aspx rss 页面

> ID：10420678
> 
> 赞同：0
> 
> 时间：2012-05-02T19:52:11.720
> 
> 标签：c#, asp.net, .net, rss, xmltextwriter

我有一个鳕鱼，我的 aspx.cs 文件将 xml 标签写入 aspx。现在我有一个要求，我需要在“标题”标签的末尾添加徽标。

这是我的代码，

```
 writer.WriteStartDocument();
  writer.WriteStartElement("rss");
  writer.WriteAttributeString("version","2.0");
  writer.WriteStartElement("channel");
  writer.WriteElementString("title","FRA News");
  writer.WriteElementString("link", fraNews);
  writer.WriteElementString("description", "FRALatest actions"); 
```

当这显示为 rss 提要时，我希望徽标位于“标题”字段的右上角。我怎么能完成这个。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T19:58:29.480

尝试这个：

```
writer.WriteStartElement("image");
writer.WriteElementString("url","http://www.fileparade.com/Images/logo88x31.png"); 
```

# java - 合成景观360度

> ID：10420683
> 
> 赞同：0
> 
> 时间：2012-05-02T19:52:29.113
> 
> 标签：java, android, c++, vb6, vb4android

有没有人有关于 SRTM 或 HGT 或 DEM 文件（“数字高程数据”）的经验，可以创建图像类型的静态和合成景观： [http](http://www.lalpinistavirtuale.it/Panorami/Ronce_sintetico.jpg) ://www.lalpinistavirtuale.it/Panorami/Ronce_sintetico.jpg 我想讨论一下（算法，绘图模式等。）感谢您提供任何信息

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T20:29:49.940

给定高程数据，即高度图，您可以生成由三角形组成的 3D 网格。这是视频游戏开发中常用的一种技术，您应该可以轻松地在网上找到示例代码（您可以在[Irrlicht](http://irrlicht.sourceforge.net/)或[OGRE](http://www.ogre3d.org/)图形引擎的地形生成器中查找）。

然后，您可以使用[Android 的 OpenGL 支持](http://developer.android.com/guide/topics/graphics/opengl.html)将这些网格渲染为您链接的虚拟景观。

然后，您可以在您生成的世界中移动虚拟相机。或者，如果您想生成全景图，只需将相机保持在一个位置，然后旋转，渲染图像。由于您知道渲染每个图像的方位角，因此将它们组合起来应该是相当简单的。

# tree - 带括号的中序树遍历

> ID：10420685
> 
> 赞同：2
> 
> 时间：2012-05-02T19:52:33.793
> 
> 标签：tree, tree-traversal

我决定尝试自学如何编程，并且正在学习 Python 版本的“如何像计算机科学家一样思考”。试图推迟询问有关练习的问题（因为重点是自己解决问题），但这让我难过。

在第 20 章中，在介绍了 Inorder 遍历（使用表达式 1+2*3）和一个遍历树并打印每个节点的函数之后，它要求：“修改 printTreeInorder 以便在每个运算符和操作数对周围放置括号”。因此，我假设输出应该看起来像 (1+(2)*3)。

我一般都在与递归函数作斗争，并且正在为此苦苦挣扎。我尝试在左右调用之前和之后插入括号，但没有成功，现在我认为函数堆栈将是五个深度 - 看不出我是如何得到两对括号的。

感觉像是在逃避问，但是谁能让我走上正确的轨道？

谢谢，

比利。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-02T20:27:40.173

> puts parentheses round every operator and pair of operands". I'm thus assuming the output should look like `(1+(2)*3)`.

I don't think this should be the output. I think output should be: `(1+(2*3))`

For me the easiest way to view this is through **object oriented approach**.

Let *abstract class* `Node` have *abstract method* `GetExpressionString()` and *field* `Token`.

Let *class* `Operand` inherit from `Node` and implement `GetExpressionString()` so that it returns `Token`. (for example `'1'` or `'2'` or `'3'`).

Let *class* `Operator` inherit from `Node`, has *fields* `Left` and `Right` of type `Node` and implement `GetExpressionString()` so that it returns `'(' + Left.GetExpressionString() + Token + Right.GetExpressionString() + ')'`. For example if `Left = '2'`, `Right = '3'` and `Token = '*'`, then result is `'(2*3)'`.

Then for

```
expression = new Operator(
               Token='+',
               Left=new Operand(Token='1'),
               Right=new Operator(
                       Token='*',
                       Left=new Operand(Token='2'),
                       Right=new Operand(Token='3'))) 
```

a call of `expression.GetExpressionString()` returns `'(1+(2*3))'`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-03-07T21:11:09.757

C++ 中的这段代码应该适合你：

```
void inorder(node1 *start)
{
    if(!(start->left==NULL && start->right==NULL))
    cout<<"(";
    if(start->left!=NULL)
    inorder(start->left);
    cout<<start->value;
    if(start->right!=NULL)
    inorder(start->right);
    if(!(start->left==NULL && start->right==NULL))
    cout<<")";
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-07-04T10:59:26.470

```
void inorder(TreeNode* p)
{
    if(p)
    {
        if(p->left && p->right)
            cout<<"(";

        inorder(p->left);
        cout<<p->data<<" ";
        inorder(p->right);

        if(p->left && p->right)
            cout<<")";
    }
} 
```

# ipad - iPad有调速器吗？

> ID：10420697
> 
> 赞同：0
> 
> 时间：2012-05-02T19:53:15.463
> 
> 标签：ipad, html

我遍历 ajax 记录集并将行插入到 html5 数据库中。在 Google Chrome 中，该程序插入 581 行，而在 iPad 上，它只插入 20 到 80 行。

我将命令输出到文档正文只是为了确保它们正在运行，所以我知道 iPad 上正在运行 581 条插入语句，但表格中只有少数几条。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T20:08:04.397

好的，这就是我的做法。我首先删除表，然后在完成后创建表。然后，完成后，我进行 ajax 调用。当它返回时，我循环遍历记录集并插入到 html5 本地数据库中。

```
var DropTableiUsr = function() {
    var DropTableDeferred = new $.Deferred();
    var CreateTableDeferred = new $.Deferred();
    dbo.transaction(function(myTrans) {
        myTrans.executeSql(
            'drop table iUsr;'
            ,[]
            ,DropTableDeferred.resolve()
        );
    });
    DropTableDeferred.done(function() {
        dbo.transaction(function(myTrans) {
            myTrans.executeSql(
                'CREATE TABLE IF NOT EXISTS iUsr' 
                + '(UsrID Integer NOT NULL PRIMARY KEY'
                + ',UsrGradeDate Varchar(128)'
                + ');'
                ,[]
                ,CreateTableDeferred.resolve()
            );
        });
    });
    CreateTableDeferred.done(function() {
        var settings = {};
        settings.data = {};
        settings.data.method = 'View0';
        var myPromise = $(this).myAjax('com/Usr.cfc', settings); // 'this' normally points to the DOM element that is the context of what caused the Ajax call.
        myPromise.done(function(result) {
            if (result.RTN) {
                var qryUsr = result.qry.DATA;
                qryUsr.RecordCount = result.qry.ROWCOUNT;
                // qryUsr.ColumnList = result.qry.COLUMNS;
                for (var CurrentRow=0;CurrentRow < qryUsr.RecordCount;CurrentRow++) {
                    myFunction(CurrentRow);
                };
                function myFunction(CurrentRow) {
                    $('body').append('INSERT INTO iUsr(UsrID,UsrGradeDate) VALUES(' + qryUsr.USRID[CurrentRow] + ',' + qryUsr.USRGRADEDATE[CurrentRow] + ')<br>');
                    dbo.transaction(function(myTrans) {
                        myTrans.executeSql(
                            'INSERT INTO iUsr(UsrID,UsrGradeDate) VALUES(?,?)',
                            [
                                qryUsr.USRID[CurrentRow],
                                qryUsr.USRGRADEDATE[CurrentRow]
                            ]
                        )
                    });
                };
            } else {
                $('#msg').text(result.MSG);
            }
        });
        myPromise.fail(function(jqXHR, textStatus,C ) {
            alert('PopulateiUsr: ' + C);
            $('.container').append(jqXHR.responseText);
        })
        $('body').append('iUsr<br>');
    });
};

$('#Reset').click(function() {
    DropTableiUsr();
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T21:20:48.917

如果在处理某些内容时移动屏幕，它会停止处理。尝试在 INSERT INTO 回调上显示倒计时，如果向下滚动屏幕，您会看到它会停止倒计时。

# php - 任何文档... PHP 控制结构？

> ID：10420699
> 
> 赞同：-3
> 
> 时间：2012-05-02T19:53:21.803
> 
> 标签：php, language-features

**对于这样的控制结构，是否有任何*官方或非官方文档：***

```
<?php if ($expression == true) { ?>
    <h3>Output</h3>
<?php } else { ?>
    <h3>Another case</h3>
<?php } ?> 
```

我第一次使用它时没有阅读文档，只是期望它可以工作并且效果很好。

但是，现在我已经
在[php.net/manual/en/control-structures.alternative-syntax.php](http://www.php.net/manual/en/control-structures.alternative-syntax.php)
和[php.net/manual/en/language.basic-syntax.phpmode.php](http://www.php.net/manual/en/language.basic-syntax.phpmode.php)
阅读了有关 PHP 控制结构的文档，但仍然做到了找不到任何清楚地表明您可以使用这种方式的`{`东西。`}`并且 php.net 手册经常从各个角度提供许多关于几乎每个主题的好例子。（*到目前为止我读过的内容*）

这甚至是官方的 PHP 功能吗？如果这就是为什么没有关于它的任何明确文档的原因？

**这是记录（使用冒号`:`和`endif;`）+手册中的示例代码作为奖励：**

```
<?php if ($expression == true): ?>
    This will show if the expression is true.
<?php else: ?>
    Otherwise this will show.
<?php endif; ?> 
```

* * *

我正在寻找真正的文档，而不是某人的博客/论坛帖子。
我知道它按预期工作，我一直使用它没有任何问题。
有点相关的问题[这是将 HTML 放入 PHP 的正确方法吗？](https://stackoverflow.com/q/10411457/1338846)

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-02T19:56:48.533

> ...当 PHP 解释器点击`?>`结束标记时，它只是开始输出它找到的任何内容 [...] 除非在条件语句的中间，在这种情况下，解释器将在决定什么之前确定条件的结果跳过哪个。

[来源](http://www.php.net/manual/en/language.basic-syntax.phpmode.php)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-02T19:56:15.157

[控制结构](http://ca3.php.net/manual/en/control-structures.if.php)的手册*非常*清楚。这与用于`{}`表示块的其他 C 风格语言基本相同。

这些控制结构与`<?php ?>`您所期望的完全一样地在 HTML 模式中切换上下文。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-02T19:57:28.660

据我所知，第一种格式没有“真正的文档”。

原因是，因为假设您已经了解 php 如何与 HTML 结合使用。

需要理解的是，php 代表了在发送到浏览器*之前*，在服务器上对代码进行*动态插入和预处理。*因此，服务器查看您的代码，然后将相应的 HTML 打印到浏览器，或者不打印。它实际上就是为此目的而创建的。

# flash-cs5 - Flash - 文本框中的文本重叠

> ID：10420700
> 
> 赞同：0
> 
> 时间：2012-05-02T19:53:23.113
> 
> 标签：flash-cs5

下图应该说够了。

当尝试使用 enter 转到下一行时，它会位于（略低于）其上方的文本行的顶部。

[http://www.dreamincode.net/forums/uploads/monthly_05_2012/post-303110-13359838269609.png.pagespeed.ce.xEvMztZ7Ot.png](http://www.dreamincode.net/forums/uploads/monthly_05_2012/post-303110-13359838269609.png.pagespeed.ce.xEvMztZ7Ot.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T10:07:21.483

在文本字段的字符属性中，检查您的**前导**（它是字体大小旁边的百分位值）。这将设置文本字段的行高。

默认值为 100%。

# php - 如何在 PHP 和 Apache 中启动服务器用户身份验证？

> ID：10420702
> 
> 赞同：0
> 
> 时间：2012-05-02T19:53:29.130
> 
> 标签：php, apache, authentication

我有一个生产服务器，用于在授予访问权限之前对用户进行身份验证。我设置了一台新机器并从旧服务器复制了文件。现在，我可以正常访问页面，但它不要求输入用户名和密码。当我检查 is 的值时，`$_SERVER['PHP_AUTH_USER']`什么都不返回。

是一种在服务器上激活它的方法，或者我在从旧服务器复制它时错过了任何文件？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-02T20:00:23.040

检查旧服务器上的 .htaccess 文件。可能是这样的：

```
AuthGroupFile /dev/null
AuthName "admin"
AuthType Basic
AuthUserFile /home/path/to/.htpasswd/public_html/admin/.htpasswd
require valid-user 
```

那是在做身份验证，而不是 PHP。

# java - 在一列内按两次排序

> ID：10420703
> 
> 赞同：2
> 
> 时间：2012-05-02T19:53:33.550
> 
> 标签：java, sql, oracle, hibernate, sorting

假设我们有一个这样的 NAME 表：

```
PERSON_ID   PART_TYPE   VALUE 
```

并且`PERSON_ID`是对 的外键引用`PERSON`。

内部`PART_TYPE`将是诸如`FAMILY`, `GIVEN`, `PREFIX`,`SUFFIX`等的值。值自然是实际值。

你将如何编写一个 SQL 查询（更不用说 Hibernate）来让 this 按 排序`PART_TYPE`，然后按`VALUE`for排序，`FAMILY` `PART_TYPE`然后按`VALUE`for排序`GIVEN` `PART_TYPE`？

考虑一下你有这三个人的场景：

```
Given3 Family10
Given5 Family10
Given7 Family10 
```

使用此 SQL：

```
SELECT this_.person_id, name1_.part_type, name1_.value
FROM person this_
LEFT OUTER JOIN name name1_
ON this_.person_id       =name1_.person_id
ORDER BY (
  CASE
    WHEN name1_.PART_TYPE = 'FAMILY'
    THEN 0
    WHEN name1_.PART_TYPE = 'GIVEN'
    THEN 1
  END),
  name1_.VALUE, 
```

我得到：

```
 ID2  FAM Family10
  ID1  FAM Family10
  ID3  FAM Family10
  ID4  GIV Given3
  ID5  GIV Given5
  ID6  GIV Given7 
```

我想：

```
ID1  FAM Family10
      ID2  FAM Family10
      ID3  FAM Family10
      ID4  GIV Given3
      ID5  GIV Given5
      ID6  GIV Given7 
```

因此，当前状态下的那些 Family10 行的顺序是不确定的——它可以是 ID1、ID2 和 ID3 的任意组合。我希望它们根据给定值排序。我真的不确定如何做到这一点，即使有多个选择语句。

我想这样做的原因是因为我想获取这些人员 ID，并且我可以在我的末端进行一些过滤以获取不同的人员 ID 并对其执行一些分页逻辑，然后实际加载人员（从而减少很多SQL 调用）。我目前无法更改数据库架构。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-02T20:01:00.310

这与您所要求的有点不同，但也许它会有所帮助 - 它为每个人提供了家庭和名字。

```
SELECT this_.person_id, family.value as family, given.value as given
FROM person this_
LEFT OUTER JOIN name family
    ON this_.person_id = family.person_id
    and family.PART_TYPE = 'FAMILY'
LEFT OUTER JOIN name given_
    ON this_.person_id = given.person_id
    and given.PART_TYPE = 'GIVEN'
ORDER BY family.value, given.value 
```

# .net - 来自 LINQ 语句的高效 SQL 与连接和聚合？

> ID：10420706
> 
> 赞同：2
> 
> 时间：2012-05-02T19:53:46.383
> 
> 标签：.net, sql, linq, entity-framework-4

我正在尝试做一个相对基本的 SQL 语句来加入和分组一些表并使用聚合函数进行汇总。我会像这样用 SQL 编写它：

```
select
  p.LocationID,
  NumReadings = count(*),
  MinDate = min(t.[DateTime]),
  MaxDate = max(t.[DateTime])
from Station p inner join Data pd on p.LocationID = pd.ReadingLocationID
    inner join ApplicationDateTime t on t.ApplicationDateTimeID = pd.DateTimeID
group by p.LocationID 
```

当我在 EF4 中使用下面的 Linq 语句时，它会创建一些可怕的 SQL（见最底部）。有没有更好的方法来做到这一点？显式地执行连接而不是使用 EF 导航属性会使情况变得更糟。

我不关心美学，但看看查询执行，执行格式不佳的 SQL 需要 3-4 倍的时间。

```
from s in Station
select new DataSummary
{
   ReadingLocationID = s.ReadingLocationID,
   StationIdentifier = s.StationIdentifier,
   NumReadings = s.Data.Count(),
   MinDateLoaded = s.Data.Min(d => d.ApplicationDateTime.DateTime),
   MaxDateLoaded = s.Data.Max(d => d.ApplicationDateTime.DateTime)
}; 
```

这是 SQL（注意：这里还有一些额外的复杂性，例如表示为另一个连接的继承关系，但这只会导致另一个嵌套级别）。

```
SELECT 
  [Project3].[LocationTypeID] AS [LocationTypeID], 
  [Project3].[ReadingLocationID] AS [ReadingLocationID], 
  [Project3].[LocationIdentifier] AS [LocationIdentifier], 
  [Project3].[C1] AS [C1], 
  CAST( [Project3].[C2] AS datetime2) AS [C2], 
  CAST( [Project3].[C3] AS datetime2) AS [C3]
FROM ( SELECT 
        [Project2].[ReadingLocationID] AS [ReadingLocationID], 
        [Project2].[LocationTypeID] AS [LocationTypeID], 
        [Project2].[LocationIdentifier] AS [LocationIdentifier], 
        [Project2].[C1] AS [C1], 
        [Project2].[C2] AS [C2], 
        (SELECT 
           MAX([Extent7].[DateTime]) AS [A1]
           FROM  [dbo].[Data] AS [Extent6]
           INNER JOIN [dbo].[ApplicationDateTime] AS [Extent7] ON [Extent6].[DateTimeID] = [Extent7].[ApplicationDateTimeID]
           WHERE [Project2].[ReadingLocationID] = [Extent6].[ReadingLocationID]) AS [C3]
            FROM ( SELECT 
            [Project1].[ReadingLocationID] AS [ReadingLocationID], 
            [Project1].[LocationTypeID] AS [LocationTypeID], 
            [Project1].[LocationIdentifier] AS [LocationIdentifier], 
            [Project1].[C1] AS [C1], 
            (SELECT 
               MIN([Extent5].[DateTime]) AS [A1]
               FROM  [dbo].[Data] AS [Extent4]
               INNER JOIN [dbo].[ApplicationDateTime] AS [Extent5] ON [Extent4].[DateTimeID] = [Extent5].[ApplicationDateTimeID]
               WHERE [Project1].[ReadingLocationID] = [Extent4].[ReadingLocationID]) AS [C2]
               FROM ( SELECT 
                  [Extent1].[ReadingLocationID] AS [ReadingLocationID], 
                  [Extent1].[LocationTypeID] AS [LocationTypeID], 
                  [Extent1].[LocationIdentifier] AS [LocationIdentifier], 
                  (SELECT 
                        COUNT(1) AS [A1]
                        FROM [dbo].[Data] AS [Extent3]
                        WHERE [Extent1].[ReadingLocationID] = [Extent3].[ReadingLocationID]) AS [C1]
                   FROM  [dbo].[ReadingLocation] AS [Extent1]
                   INNER JOIN [dbo].[Station] AS [Extent2] ON [Extent1].[ReadingLocationID] = [Extent2].[LocationID]
                   WHERE ([Extent1].[LocationTypeID] =  CAST( '1' AS int)) AND ([Extent2].[LineID] = 'ACBB3FDF-116C-4E8E-AA80-B925E4922AC8')
                   )  AS [Project1]
               )  AS [Project2]
) 
```

帮助！谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T19:59:47.593

使用不同的 ORM 怎么样？具体来说，诸如[PetaPoco](http://www.toptensoftware.com/petapoco/)或[Massive](https://github.com/robconery/massive)之类的 MicroOrm将允许您在 SQL 中编写查询并取回 .NET 对象。

两者都是 Nuget 包：[PetaPoco](http://nuget.org/packages/PetaPoco)、[Massive](http://nuget.org/packages/Massive) ，因此您可以轻松安装它们。

如果您习惯编写 SQL 并且更愿意控制您的查询，那么它们可能是可行的候选者。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T20:18:46.377

LINQ 可以做很多事情，但它绝对不是魔法。尝试像编写 SQL 一样编写 LINQ。定义您的联接。

这就是您的 LINQ 语句的样子：

```
Station
 .Join(Data, s => new { s.LocationID }, d => new { LocationID = d.ReadingLocationID }, (s,d) => new { s.ID, s.LocationID, d.DateTimeID })
 .Join(ApplicationDateTime, j1 => new { j1.DateTimeID }, t => new { DateTimeID = t.ApplicationDateTimeID }, (j1,t) => { j.ID, j.LocationID, t.DateTime })
 .Group(j2 => new { j2.ID, j2.LocationID })
 .Select(g => new DataSummary
   {
      StationIdentifier = g.Key.ID,
      ReadingLocationID = g.Key.LocationID,
      NumReadings = g.Count(),
      MinDateLoaded = g.Min(j2 => j2.DateTime),
      MaxDateLoaded = g.Max(j2 => j2.DateTime)
   }); 
```

注意：上面提供的代码未经测试！

请记住，在 LINQ 中创建连接时，您在连接中使用的匿名对象的属性应该具有相同的名称和类型。这花了我一些时间让我的第一次加入工作。示例：假设 Data 表上的 DateTimeID 列可以为 NULL，而 ApplicationDateTime 上的 ApplicationDateTimeID 列不能为 NULL。然后，您应该将该联接更改为：

```
.Join(ApplicationDateTime, j1 => new { j1.DateTimeID }, t => new { DateTimeID = (int?)t.ApplicationDateTimeID }, (j1,t) => { j.ID, j.LocationID, t.DateTime }) 
```

# regex - 用于编辑 /etc/sudoers 文件的正则表达式模式

> ID：10420713
> 
> 赞同：7
> 
> 时间：2012-05-02T19:54:29.410
> 
> 标签：regex, linux, bash, sed, awk

我想删除 /etc/sudoers 文件中的 (uncommnet #) 轮组，那么我应该使用什么正则表达式模式？

```
#cat /etc/sudoers
....
....
## Allows members of the 'sys' group to run networking, software,
## service management apps and more.
# %sys ALL = NETWORKING, SOFTWARE, SERVICES, STORAGE, DELEGATING, PROCESSES, LOCATE, DRIVERS

## Allows people in group wheel to run all commands
# %wheel        ALL=(ALL)       ALL

## Same thing without a password
# %wheel  ALL=(ALL)       NOPASSWD: ALL

....
.... 
```

我想从下一行中删除 # 。

```
...
# %wheel  ALL=(ALL)       NOPASSWD: ALL
... 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-05-02T19:59:02.760

您不应该`/etc/sudoers`使用任何类型的脚本来编辑文件。这个命令是有原因的`visudo`。对`sudoers`文件的编辑应该很少且受到良好控制。

话虽如此，如果您的`visudo`命令编辑器是 vi，您可以运行类似`:%s/^# %wheel/%wheel/`取消注释所有以`%wheel`.

或者，如果您认为有必要：

```
sudo sed --in-place 's/^#\s*\(%wheel\s\+ALL=(ALL)\s\+NOPASSWD:\s\+ALL\)/\1/' /etc/sudoers 
```

`--in-place`在没有第一个检查输出的情况下运行它。需要您自担风险使用它。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-05-02T20:02:05.470

以下应该有效：

```
sed -i 's/^#\s*\(%wheel\s*ALL=(ALL)\s*NOPASSWD:\s*ALL\)/\1/' /etc/sudoers 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2019-02-28T21:46:02.827

无需使用 sed。在 centos 上，您可以简单地在以下位置创建文件`/etc/sudoers.d/`

```
echo 'myuser ALL=(ALL) NOPASSWD: ALL' >> ./myuser
sudo chown root:root ./myuser
sudo mv ./myuser /etc/sudoers.d/ 
```

这将启用没有密码的 sudo `myuser`。检查此以获取更多信息：[https ://unix.stackexchange.com/questions/375433/etc-sudoers-vs-etc-sudoers-d-file-for-enabling-sudo-for-a-user](https://unix.stackexchange.com/questions/375433/etc-sudoers-vs-etc-sudoers-d-file-for-enabling-sudo-for-a-user)

# java - Java Regex - 获取字符串中子字符串之前的所有单词

> ID：10420720
> 
> 赞同：6
> 
> 时间：2012-05-02T19:55:14.517
> 
> 标签：java, regex, string, substring

我有一个包含一个句子的字符串，我想根据一个单词将它分成两半。我有一个正则表达式`(\\w+) word`，我认为它可以让我得到“word”+“word”本身之前的所有单词，然后我可以删除最后四个字符。

但是，这似乎不起作用..任何想法我做错了什么？

谢谢。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-02T20:02:21.960

这似乎有效：

```
import java.util.regex.Matcher;
import java.util.regex.Pattern;

public class Test {
    public static void main(String[] args) {
        Pattern p = Pattern.compile("([\\w\\s]+) word");
        Matcher m = p.matcher("Could you test a phrase with some word");
        while (m.find()) {
            System.err.println(m.group(1));
            System.err.println(m.group());
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-02T20:04:16.550

使用字符串操作：

```
int idx = sentence.indexOf(word);
if (idx < 0)
  throw new IllegalArgumentException("Word not found.");
String before = sentence.substring(0, idx); 
```

使用正则表达式：

```
Pattern p = Pattern.compile(Pattern.quote(word));
Matcher m = p.matcher(sentence);
if (!m.find())
  throw new IllegalArgumentException("Word not found.");
String before = sentence.substring(0, m.start()); 
```

或者：

```
Pattern p = Pattern.compile("(.*?)" + Pattern.quote(word) + ".*");
Matcher m = p.matcher(sentence);
if (!m.matches())
  throw new IllegalArgumentException("Word not found.");
String before = m.group(1); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-02T19:57:22.397

您将需要在单词之前和之后标记句子的每个部分。

[http://docs.oracle.com/javase/1.5.0/docs/api/](http://docs.oracle.com/javase/1.5.0/docs/api/)

```
 String[] result = "this is a test".split("\\s"); //replace \\s with your word
 for (int x=0; x<result.length; x++)
     System.out.println(result[x]); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-02T20:06:57.977

试试这个：

```
import java.util.regex.Matcher;
import java.util.regex.Pattern;

public class Test {
    public static void main(String[] args) {
        Pattern p = Pattern.compile("^.*?(?= word)");
        Matcher m = p.matcher("Everything before the word");
        while (m.find()) {
            System.out.println(m.group());
        }
    }
} 
```

它分解如下：

.*? 一切

(?= 之前

*单词*

） 结尾

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-02T20:02:56.270

原因是这`+`是一个贪婪的量词，它将匹配整个字符串，**包括**您指定的单词，而不返回。

如果您将其更改为`(\\w+?) word`它应该可以工作（不情愿的量词）。更多关于量词及其确切功能的[信息](http://docs.oracle.com/javase/tutorial/essential/regex/quant.html)。

# azure - SQL Azure 节流 - 索引的影响

> ID：10420721
> 
> 赞同：2
> 
> 时间：2012-05-02T19:55:15.993
> 
> 标签：azure, azure-sql-database

我发现我们的系统在标称负载下遇到了节流墙，例如每个实例每秒 120 次插入。还有其他并发进程正在运行，我们正在卸载/优化等。我想知道的是：是否有人对索引的存在对节流的影响程度有任何见解？我在系统的其他地方有一些性能问题，索引的存在会有所帮助，但我犹豫要不要添加它们，因为它们有额外的 CPU 和 I/O 负载！

欢迎任何现实世界的建议。请保持它特定于 SQL Azure。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T23:40:55.610

节流基本上只是对 CPU、内存和磁盘使用的限制。因此，索引对限制的影响归结为它对这些资源的影响。所以实际上这就像任何其他性能调整方案一样 - 找出你正在达到的限制，并确定如何减少使用它。

SQL Azure 与 SQL Server 不同，主要是因为您无法访问所有很酷的 DMV。你仍然得到一些，但不是全部。您确实获得的一个优势是，如果您遇到限制错误，它们应该告诉您您正在限制什么资源。

根据您的情况，以下查询可能会有所帮助。[我从Glenn Berry](https://sqlserverperformance.wordpress.com/2012/04/30/sql-server-2008-diagnostic-information-queries-may-2012/)那里偷了这些，我唯一的贡献是弄清楚它们在 Azure 上运行。尽管他专注于非 Azure 安装，但他也对 SQL 性能工作提出了很多很好的建议。

```
--List query plans and stats ordered by last execution time
SELECT TOP(50) q.text, s.last_execution_time, s.execution_count, s.total_worker_time, 
        s.max_elapsed_time, s.max_worker_time,  (s.total_worker_time / s.execution_count) AS AverageExecutionTime,
        s.max_physical_reads, s.max_logical_reads, 
        s.max_logical_writes, s.min_rows, s.max_rows
FROM sys.dm_exec_query_stats as s
      cross apply sys.dm_exec_sql_text(plan_handle) AS q
ORDER BY s.last_execution_time DESC

--List query plans and stats ordered by average execution time
SELECT TOP(50) q.text, s.last_execution_time, s.execution_count, s.total_worker_time, 
        s.max_elapsed_time, s.max_worker_time, (s.total_worker_time / s.execution_count) AS AverageExecutionTime,
        s.max_physical_reads, s.max_logical_reads, 
        s.max_logical_writes, s.min_rows, s.max_rows
FROM sys.dm_exec_query_stats as s
      cross apply sys.dm_exec_sql_text(plan_handle) AS q
ORDER BY [AverageExecutionTime] DESC

--Get 50 most I/O intensive queries
SELECT TOP(50) OBJECT_NAME(qt.objectid) AS [SP Name],
qs.total_logical_writes,
qs.total_logical_reads,
(qs.total_logical_reads + qs.total_logical_writes) /qs.execution_count AS [Avg IO],
SUBSTRING(qt.[text],qs.statement_start_offset/2, 
    (CASE 
        WHEN qs.statement_end_offset = -1 
     THEN LEN(CONVERT(nvarchar(max), qt.[text])) * 2 
        ELSE qs.statement_end_offset 
     END - qs.statement_start_offset)/2) AS [Query Text],
qs.execution_count,
qs.creation_time
FROM sys.dm_exec_query_stats AS qs
CROSS APPLY sys.dm_exec_sql_text(qs.sql_handle) AS qt
WHERE qt.[dbid] = DB_ID()
ORDER BY [Avg IO] DESC OPTION (RECOMPILE);

--Get executing requests
SELECT session_id, blocking_session_id, wait_type, last_wait_type, wait_time, total_elapsed_time, cpu_time, logical_reads, reads, writes
FROM sys.dm_exec_requests AS r
ORDER BY wait_time DESC 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T23:51:45.753

当涉及到索引时，您当然需要评估开销与查询性能改进之间的权衡。最会伤害您的是未使用的索引，因为维护索引的开销属于受到限制的类别。

如果你添加一个索引，你能摆脱另一个现在已经过时的索引吗？由于添加索引，您的查询是否消耗更少的受限资源（I/O、内存、CPU）？

另请注意，CPU 不再受到严格限制（如 I/O 或内存）；查询将执行较慢，但它们会执行。

最后，我很少看到索引是限制的重要原因，除非可能是在创建索引（或刷新）时。然而，常识在 SQL Azure 中适用，就像在 SQL Server 中一样：创建不太宽的索引，并确保索引减少现有查询资源消耗。

使用 DMV 可以帮助您确定整体资源消耗是否正在下降。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-04T01:03:29.210

确保不要对具有聚集索引的 PK 使用 GUID。

# authentication - 如何创建一个全局变量以从不同的 ViewController 访问？

> ID：10420722
> 
> 赞同：0
> 
> 时间：2012-05-02T19:55:18.630
> 
> 标签：authentication, ios5, singleton, global-variables

我有一个具有不同 ViewControllers 的应用程序，这些 ViewControllers 在导航控制器中进行管理。在一个 ViewController 中，我向我的 WebService 发出请求以对用户进行身份验证。我正在用 BOOL (isLoggedIn) 编写响应。现在我需要在不同的 ViewController 中使用这个 BOOL 和用户名。我需要该变量来更改自定义导航按钮标题（登录-> 注销）。同样在另一个 ViewController 中，我必须向我的 WebService 发送一些东西，但只允许经过身份验证的用户 (isLoggedIn) 进行调用。我希望它解释得足够好:) 那么我必须做些什么才能完成这项工作？我读过一些东西来创建一个单例类，这是正确的方法吗？

或者我应该以某种方式从我的 LoginViewController 连接到受影响的 ViewControllers？我怎样才能做到这一点？现在我刚刚使用方法 prepareForSegue 来引用 DetailViewController 并传递数据。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T20:02:39.990

您可以进行单例实现，例如：

```
static SingletonClass *_sharedClass = nil;
@implementation SingletonClass

@synthesize sharedVar;

+ (SingletonClass*)sharedClass
{
    if (_sharedClass == nil) {
        _sharedClass = [[SingletonClass alloc] init];
    }
    return _sharedClass;
}

- (id)init
{
    if ((self = [super init])) {
        //init any class vars you need
    }
    return self;
}
@end 
```

然后让 sharedVar 成为该类的属性。在应用程序的任何地方，您都可以使用：

```
[[SingletonClass sharedClass] sharedVar]; 
```

访问它。

# html - 有没有办法在表单中捕获浏览到文件名的名称？

> ID：10420730
> 
> 赞同：0
> 
> 时间：2012-05-02T19:56:06.320
> 
> 标签：html, forms

我希望能够在我的表单中有一个选项，我单击浏览，这将打开 Mac 上的 Finder 或 Windows 上的资源管理器，然后我选择文件。这个文件名然后成为我的表单字段的值。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T19:58:38.093

你试过[`<input type="file"/>`](http://www.w3.org/TR/html5/states-of-the-type-attribute.html#file-upload-state-type-file)吗？

[http://jsfiddle.net/mattball/eDJtK](http://jsfiddle.net/mattball/eDJtK)（为了简单起见，演示使用 jQuery）。

# oracle - NHibernate 3.3：使用 BLOB 参数执行 Oracle 11g 存储过程

> ID：10420736
> 
> 赞同：1
> 
> 时间：2012-05-02T19:56:39.077
> 
> 标签：oracle, nhibernate, stored-procedures, blob, sql-insert

我正在使用 NHibernate 3.3 和 ODP.NET 来持久化到 Oracle11g 数据库，这是配置的相关部分：

```
<property name="connection.provider">NHibernate.Connection.DriverConnectionProvider</property>
<property name="dialect">NHibernate.Dialect.Oracle10gDialect</property>
<property name="connection.driver_class">NHibernate.Driver.OracleDataClientDriver</property> 
```

我将一个 byte[] 属性映射到一个 BLOB 字段并设置一个块来执行插入存储过程，如下所示：

```
 <class name="Digital" table="DIGITALS">
    <id name="Id" column="COD_DIGITAL">
      <generator class="increment" />
    </id>
    <property name="File" column="FILE" />

    <sql-insert>begin PKG_DIGITALS.insert_sp(?,?); end;</sql-insert> 
```

*数字*实体在大小<=32k 的文件中保持正常；但我收到此错误 [ORA-01460: unimplemented or unreasonable conversion requested] with size>32k files。

是驱动限制吗？我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T14:23:22.130

我遇到了同样的问题（NHibernate 3.3.1.4000，Oracle 11g）。NHibernates OracleDataClientDriver 设置 dbParam.DbType = DbType.Binary。这会导致此 32K 限制。当设置 dbParam.OracleDbType = OracleDbType.Blob 时，限制就消失了。为了存档，我创建了自己的 Oracle 驱动程序：

```
public class OracleOdpClientDriver : OracleDataClientDriver
{
  protected override void InitializeParameter(System.Data.IDbDataParameter dbParam, string name, NHibernate.SqlTypes.SqlType sqlType)
  {
    base.InitializeParameter(dbParam, name, sqlType);
    var oraParam = dbParam as OracleParameter;
    if (oraParam != null)
    {
      if (sqlType.DbType == System.Data.DbType.Binary)
        // Use Oracle Blob instead of Binary to prevent a 32K limit.
        oraParam.OracleDbType = OracleDbType.Blob;
      else if (sqlType.DbType == System.Data.DbType.String && sqlType.LengthDefined && sqlType.Length >= 32768)
        // StringClob params must not be mapped to Varchar2 because that has a 32K limit.
        oraParam.OracleDbType = OracleDbType.Clob;
    }
  } 
```

最后，驱动程序需要在配置中注册：

```
<property name="connection.driver_class">MyDataAccess.OracleOdpClientDriver, MyDataAccess</property> 
```

另请参阅[此处](https://stackoverflow.com/questions/13252511/connecting-oracle-using-odp-net-with-enterprise-library-daab)和[此处](https://forums.oracle.com/forums/thread.jspa?threadID=451248)。我想知道这是否是足以集成到 NHibernate 中的解决方案。

# c# - 正则表达式用 C# 属性替换 XML 注释

> ID：10420737
> 
> 赞同：1
> 
> 时间：2012-05-02T19:56:41.200
> 
> 标签：c#, regex, visual-studio-2008, .net-3.5, xsd

我有一个 XML Schema，我正在尝试使用它来创建 C# 类。目前，我正在使用[XSD2Code](http://xsd2code.codeplex.com/)创建类。[原始模式](http://www.spiraltechinc.com/Tmats/)的元素看起来像这样：

```
<xs:element name="NumberOfTags" type="xs:positiveInteger" minOccurs="0">
    <xs:annotation>
        <xs:documentation>ALT\N</xs:documentation>
    </xs:annotation>
</xs:element> 
```

XSD2Code 生成的代码如下所示：

```
/// <summary>
/// ALT\N
/// </summary>
public string NumberOfTags { get; set; } 
```

XML 注释指的是映射到[不同数据表示](http://www.irig106.org/docs/106-11/chapter9.pdf)的 TMATS CODE 。我需要以某种运行时可读的表示形式捕获这些代码，以便我可以以编程方式执行此映射。到目前为止，我最好的想法是将这些 XML 注释转换为[C# 属性](http://msdn.microsoft.com/en-us/library/z0w1kczw%28v=vs.90%29.aspx)，并编写额外的代码来反映它们。

* * *

所以这是我的问题。我想使用 Visual Studio 查找和替换对 XSD2Code 生成的代码进行正则表达式样式的替换，以便生成的代码如下所示：

```
[TmatsCode(@"ALT\N")]
public string NumberOfTags { get; set; } 
```

实现这一目标的正则表达式是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T20:06:16.763

```
(?<=/// \<summary\>\r\n/// )[^\r\n]+(?=\r\n/// \<\/summary\>) 
```

将匹配

```
ALT\N 
```

在你的例子中。

编辑：

VS查找和替换？没注意到...上面是.net Regex。

但是，继续朝这个方向发展并回答您的评论...通过稍微重写 Regex 以匹配整个评论并捕获组中的内部值，Regex.Replace 的 MatchEvaluator 重载在这里发挥作用：

```
Regex.Replace(
 str,
 @"/// \<summary\>\r\n/// (?<tag>[^\r\n]+)\r\n/// \<\/summary\>",
 m => string.Format(
       "[TmatsCode(@\"{0}\"]",
       m.Groups["tag"].Value)); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-02T20:17:00.663

> 使用 Visual Studio 查找和替换

使用 Visual Studio 的 Find & Replace，您可以使用以下表达式：

```
^.*\<summary\>\n{:b*}///:b*{.*}\n.*\<\/summary\>$ 
```

而这个替换：

```
\1[TmatsCode(@"\2")] 
```

分解它：

*   `^.*\<summary\>\n`- 匹配一行的开头，任意数量的字符 uptil 后跟一个新行。
*   `{:b*}///`捕获任何空格直到 /// 字符。稍后我们将使用这个捕获的空格，以便我们可以正确缩进属性。
*   `:b*{.*}`匹配任何空格，然后将其余部分捕获为我们想要的内容。
*   `\n.*\<\/summary\>$`在新行上匹配，然后直到结束摘要元素的行尾。

对于替换，`\1`是我们捕获的空格，因此属性缩进到相同的位置，并且`\2`是摘要内容。

# mysql - 更新多行，增加值。（不是 autoinc。）

> ID：10420739
> 
> 赞同：1
> 
> 时间：2012-05-02T19:56:43.817
> 
> 标签：mysql, sql

行。我正在尝试使用每行增加的值更新多行。

```
Update table set value=(.......) where update_row = something... 
```

是否可以？以下行：

```
ID:name:value
1:name1:0
2:name2:0
4:name4:0
5:name5:0
7:name7:0
9:name9:0 
```

更新后我希望它是：

```
1:name1:1
2:name2:2
4:name4:3
5:name5:4
7:name7:5
9:name9:6 
```

而且...是否可以以某种方式订购更新，以便增加的值按正确的顺序排列，就像上面一样？使用自动增量不是一种选择。我必须手动执行此操作....

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-02T19:59:17.530

就像是

```
set @rownum := 0;   
Update table set value=(@rownum := @rownum + 1)
where update_row = something... 
```

# c++ - 编译 telnet boost 示例时遇到问题

> ID：10420741
> 
> 赞同：0
> 
> 时间：2012-05-02T19:57:08.470
> 
> 标签：c++, boost, undefined, x86-64, symbols

我正在尝试编译这个程序： http:
[//lists.boost.org/boost-users/att-40895/telnet.cpp](http://lists.boost.org/boost-users/att-40895/telnet.cpp)
在带有 OS X 10.7.3 的 Mac 上。

我正在使用这一行来编译：

```
g++ -O3 telnet.cpp -o telnet 
```

我收到了这个错误：

```
Undefined symbols for architecture x86_64:
  "boost::system::generic_category()", referenced from:
  global constructors keyed to _ZN12_GLOBAL__N_12_1Ein cc4A3W1S.o
  "boost::system::system_category()", referenced from:
  global constructors keyed to _ZN12_GLOBAL__N_12_1Ein cc4A3W1S.o
   boost::asio::detail::posix_thread::func<boost::asio::detail::resolver_service_base::work_io_service_runner>::run()in cc4A3W1S.o
  boost::asio::detail::reactive_socket_connect_op_base::do_perform(boost::asio::detail::reactor_op*)in cc4A3W1S.o
  boost::asio::detail::socket_ops::translate_netdb_error(int) in cc4A3W1S.o
  boost::asio::ip::basic_resolver_iterator<boost::asio::ip::tcp>::create(addrinfo*, std::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, std::basic_string<char, std::char_traits<char>, std::allocator<char> > const&)in cc4A3W1S.o
  boost::asio::detail::socket_ops::translate_addrinfo_error(int) in cc4A3W1S.o
  boost::asio::detail::kqueue_reactor::run(bool, boost::asio::detail::op_queue<boost::asio::detail::task_io_service_operation>&)in cc4A3W1S.o
  ...
"vtable for boost::detail::thread_data_base", referenced from:
  boost::detail::thread_data_base::thread_data_base()in cc4A3W1S.o
NOTE: a missing vtable usually means the first non-inline virtual member function has no definition.
"boost::detail::thread_data_base::~thread_data_base()", referenced from:
  boost::detail::thread_data<boost::_bi::bind_t<unsigned long, boost::_mfi::mf0<unsigned long, boost::asio::io_service>, boost::_bi::list1<boost::_bi::value<boost::asio::io_service*> > > >::~thread_data()in cc4A3W1S.o
  boost::detail::thread_data<boost::_bi::bind_t<unsigned long, boost::_mfi::mf0<unsigned long, boost::asio::io_service>, boost::_bi::list1<boost::_bi::value<boost::asio::io_service*> > > >::~thread_data()in cc4A3W1S.o
"boost::thread::start_thread()", referenced from:
  boost::thread::thread<boost::_bi::bind_t<unsigned long, boost::_mfi::mf0<unsigned long, boost::asio::io_service>, boost::_bi::list1<boost::_bi::value<boost::asio::io_service*> > > >(boost::_bi::bind_t<unsigned long, boost::_mfi::mf0<unsigned long, boost::asio::io_service>, boost::_bi::list1<boost::_bi::value<boost::asio::io_service*> > >, boost::disable_if<boost::is_convertible<boost::_bi::bind_t<unsigned long, boost::_mfi::mf0<unsigned long, boost::asio::io_service>, boost::_bi::list1<boost::_bi::value<boost::asio::io_service*> > >&, boost::detail::thread_move_t<boost::_bi::bind_t<unsigned long, boost::_mfi::mf0<unsigned long, boost::asio::io_service>, boost::_bi::list1<boost::_bi::value<boost::asio::io_service*> > > > >, boost::thread::dummy*>::type)in cc4A3W1S.o
"boost::thread::join()", referenced from:
  _main in cc4A3W1S.o
"boost::thread::~thread()", referenced from:
  _main in cc4A3W1S.o
"telnet_client::~telnet_client()", referenced from:
  _main in cc4A3W1S.o
"typeinfo for boost::detail::thread_data_base", referenced from:
  typeinfo for boost::detail::thread_data<boost::_bi::bind_t<unsigned long, boost::_mfi::mf0<unsigned long, boost::asio::io_service>, boost::_bi::list1<boost::_bi::value<boost::asio::io_service*> > > >in cc4A3W1S.o
ld: symbol(s) not found for architecture x86_64
collect2: ld returned 1 exit status 
```

从我到目前为止的研究中得出的结论是，我需要以某种方式链接到 boost 库。我不知道如何判断它是否正确安装。我下载了brew并使用了

```
brew install boost 
```

安装它。

对不起，如果格式错误，这是我的第一篇文章。谢谢您的帮助。如果我需要提供任何其他信息，请告诉我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T20:03:10.963

您忘记链接 Boost 库。尝试：

```
g++ -O3 -o telnet telnet.cpp -lboost_system -lboost_thread 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T07:57:04.747

你可能需要 -l boost_thread-mt 而不是 -lboost_thread 我没有看过代码，但可能是这种情况

# boost - 太阳黑子中每个班级的 Boost_fields

> ID：10420742
> 
> 赞同：0
> 
> 时间：2012-05-02T19:57:10.717
> 
> 标签：boost, solr, sunspot

所以在 Sunspot 中，可以这样做：

```
QUERY_DOCUMENT_BOOST_OPTIONS = {
  :user => 2,
  :product => 1,
}

fulltext query do
  [User, Product].each do |m|
    boost(QUERY_DOCUMENT_BOOST_OPTIONS[m.name.underscore.to_sym]) { with(:class, m) }
  end
end 
```

是否也可以做这样的事情来提升领域？这样一个字段只有在某个类的文档中才会被提升。

有可能实现这样的目标吗？甚至可以直接在solr中使用吗？当然，这不起作用，因为 boost_fields 不需要阻塞：

```
QUERY_FIELD_BOOST_OPTIONS[m.name.underscore.to_sym].each do |field, boost|
  boost_fields(field => boost) { with(:class, m) }
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T20:03:59.757

我还没有找到直接的方法来做到这一点，但你总是可以通过使用 sunspot 的 :as 选项来命名字段名称。

所以在一个模型中你会这样做：

```
searchable do 
  text: title, :as => 'model_title_text'
end 
```

搜索时你会做

```
search = Sunspot.search [Model] do
  fulltext query
  adjust_solr_params do |params| 
    params['qf'] += ' model_title_text^10'
  end
end 
```

# c# - 定时器并关闭应用程序

> ID：10420752
> 
> 赞同：-2
> 
> 时间：2012-05-02T19:57:40.413
> 
> 标签：c#, winforms, user-interface, timer

在 form1 中，我有一个关闭按钮，可以打开 Form2 以关闭应用程序。我希望使用计时器在 30 秒后关闭 form2，我的想法是使用一个在计时器运行时会变大的图片框，但我想我可以处理最后一部分。我把定时器放在form 2，我试图从form1控制它，但它不识别定时器。这是我的最后一个项目。我真的很感谢你的帮助。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T20:11:11.797

`Form1`如果有帮助，您可以打开计时器。不管它是哪种形式。计时器不依赖于`Forms`. 您可以以编程方式创建它们，而无需将它们放在表单上。向表单添加计时器只是为您提供了一种在属性窗口中设置属性的便捷方法。

* * *

另一种选择是在属性窗口（在该部分）中设置 的`Modifiers`属性。它将使您能够从其他表单访问它。`Timer``Public``Design`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T06:54:51.360

```
 public System.Timers.Timer MyTimer { get; set; }
    int counter;

    public Form2_Load()
    {
        MyTimer = new System.Timers.Timer();
        MyTimer.Interval = 1000;
        MyTimer.Elapsed+=new System.Timers.ElapsedEventHandler(myTimer_Elapsed);
        MyTimer.Start();
    }

    void  myTimer_Elapsed(object sender, System.Timers.ElapsedEventArgs e)
    {
        if (++counter == 30)
        {
            //do pic
            this.Close();
        }
    } 
```

如果你在 form2 中有这个，那么当你制作新的 form2 时，你可以处理计时器，当你显示对话框时，它会启动计时器。

# javascript - 在 LyX 中突出显示 Javascript 的语法，插入子项 -> 程序列表

> ID：10420757
> 
> 赞同：0
> 
> 时间：2012-05-02T19:58:03.913
> 
> 标签：javascript, syntax-highlighting, lyx

我正在写我的硕士论文，其中包括 alotta javascript。我将它作为子文件包含在内，作为具有以下选项的程序列表：

```
breaklines=true
captionpos=b
frame=tb
language=Python 
```

没有 javascript 语言/列表文件，这就是我尝试 python 的原因。也尝试过 Java，但都没有多大用处。

有什么办法可以在这里突出显示一些 js 语法？它确实有很多代码，所以当它全黑时它不是很容易阅读。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-05T13:27:11.223

实际上没有 JavaScript/语言文件，但您可以手动自定义。当您右键单击 LyX 编辑器中的代码块时，Parameters->Advanced 选项卡，您可以手动放置列表选项（注意：我的 LyX 是法语的，因此单击路径可能会略有不同）。

在[http://lenaherrmann.net/2010/05/20/javascript-syntax-highlighting-in-the-latex-listings-package](http://lenaherrmann.net/2010/05/20/javascript-syntax-highlighting-in-the-latex-listings-package)之后我添加了：

```
comment={[l]{//}}
commentstyle={\color{purple}\ttfamily}
identifierstyle={\color{black}}
keywords={typeof, new, true, false, catch, function, return, null, catch, switch, var, if, in, while, do, else, case, break}
keywordstyle={\color{blue}\bfseries}
morecomment={[s]{/*}{*/}}
ndkeywords={class, export, boolean, throw, implements, import, this}
ndkeywordstyle={\color{darkgray}\bfseries}
sensitive=false
stringstyle={\color{red}\ttfamily} 
```

# ember.js - 通过 {{#each}} 获得职位

> ID：10420762
> 
> 赞同：0
> 
> 时间：2012-05-02T19:58:19.527
> 
> 标签：ember.js

我试图弄清楚是否有办法在使用 {{#each}} 的循环渲染期间获得我的位置。在源头上进行黑客攻击，似乎没有一种简单的方法来做到这一点——但这可能只是我无法很好地跟踪代码的结果。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T20:00:14.273

contentIndex 将在创建时在视图上设置，但不会随着数组的变化而更新。

# iphone - 如何在 Objective-C 中填充分数矩阵（用于执行序列比对）

> ID：10420771
> 
> 赞同：1
> 
> 时间：2012-05-02T19:59:00.750
> 
> 标签：iphone, objective-c, ios, matrix, nsmutablearray

我有兴趣在 Objective-C 中进行一些矩阵计算（对于 iPhone 应用程序）。

应该为矩阵中的每个元素计算一个分数，但我什至无法让我的矩阵初始化工作。我试图实现的算法称为 Needleman-Wunsch 算法，用于对齐核苷酸序列。

目前，我正在尝试初始化一个二维数组，定义一个数组，然后用另一个数组填充数组的每个元素，但它似乎不起作用。我现在的样子是这样的：

```
-(IBAction)alignSequences:(id)sender {
NSString *dnaString1 = @"GAATTCAGTTA";
NSString *dnaString2 = @"GGATCGA";

int intSections = (dnaString1.length+1);
int intRows = (dnaString2.length+1);

//The matrix is initialized, and the value of every element is set to 0
NSMutableArray *horizontalArray = [[NSMutableArray alloc] initWithCapacity:intSections];

for (int i=0; i <= intSections; i++) {
    [horizontalArray insertObject:[[NSMutableArray alloc] initWithCapacity:intSections] atIndex:i];

    for (int j=0; j <= intRows; j++) {
        [[[horizontalArray objectAtIndex:i] objectAtIndex:j] insertObject:[NSNumber numberWithInt:0] atIndex:j];
    }
}    

NSLog(@"%@",[[horizontalArray objectAtIndex:1] objectAtIndex:1]);
} 
```

任何想法如何实现这一点？（我是 Objective-C 的新手，如果代码中有愚蠢的问题或明显的错误，请见谅）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T20:15:29.693

约扎！已经有一段时间了......这里什么都没有：

```
NSMutableArray *horizontalArray = [[NSMutableArray alloc] initWithCapacity:intSections];

for (int i=0; i <= intSections; i++) {

    NSMutableArray *innerArray = [[NSMutableArray alloc] initWithCapacity:intRows];

    for (int j=0; j <= intRows; j++) {
        [innerArray addObject:[NSNumber numberWithInt:0]];
    }

    [horizontalArray addObject:innerArray];
    [innerArray release];
} 
```

假设它有效，这会更干净一些，它应该可以做你正在尝试的事情，而不会引发索引错误。在那张纸条上，您似乎正在使用比必要更多的空间来初始化内部数组。这不会导致索引错误，但请注意：

```
[horizontalArray insertObject:[[NSMutableArray alloc] initWithCapacity:intSections] atIndex:i]; 
```

我认为这样会更好：

```
[horizontalArray insertObject:[[NSMutableArray alloc] initWithCapacity:intRows] atIndex:i]; 
```

# objective-c - 为什么我的 iOS5 Core Data 项目抱怨需要 iOS5？

> ID：10420778
> 
> 赞同：4
> 
> 时间：2012-05-02T19:59:39.553
> 
> 标签：objective-c, xcode, core-data, ios5

我的项目似乎适用于 iOS 5 和更新版本，但我的构建导致错误：“to-many relationship Blah.comments 选项需要 iOS 5.0 或更高版本”。

我正在使用有序对多关系和二进制外部存储，它们确实仅适用于 iOS 5。

我已将 Target 的 iOS 开发目标设置为“iOS 5.0”，将项目的 iOS 开发目标（在部署目标部分中）设置为“5.0”，并且我使用的是“最新 iOS (5.1)”的默认 Base SDK。

我在 Xcode 中是否缺少一个设置来阻止为 iOS 4 构建或者我做错了什么？我正在使用 Xcode 版本 4.3.2 (4E2002)，我习惯于尽可能早地定位，而不是最新和最好的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-09-17T11:07:47.283

使用 Xcode 5 dp-6 将 xcdatamodel 文件从新的 ios7 项目复制到旧项目时出现此错误。我最终解决它的方法是在旧 xcode 中打开旧项目，编译，然后在 xcode 5 中再次打开。现在一切都编译了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-17T09:54:37.003

我使用的是 Xcode 5 atm，但您的 xcdatamodeld 文件是否设置为 iOS 5 或更低版本？

它位于“文件检查器”下的“实用程序”栏中

![在此处输入图像描述](../Images/26180df5234dd0be91b4f098b0284a55.png)

# java - JUNG：将整个图形（不仅是可见部分）保存为图像

> ID：10420779
> 
> 赞同：6
> 
> 时间：2012-05-02T19:59:47.253
> 
> 标签：java, image, jung, graph-visualization

我一直在寻找我的问题的解决方案，但没有什么能完全符合我的要求。

我想要做的是将整个 JUNG 图（具有自定义顶点和边缘渲染）保存到图像（PNG 或 JPEG）中。当我将 VisualizationViewer 保存到 BufferedImage 时，它​​只占用可见部分。我想保存整个图表，所以这不是一个选项。

有没有人知道如何将我的整个图表呈现为图像？

提前致谢！

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-05-03T07:06:36.410

我终于找到了解决我的问题的方法，使用`VisualizationImageServer`. 以下是如何从整个 JUNG 图创建图像的示例，供其他人使用：

```
import edu.uci.ics.jung.visualization.VisualizationImageServer;

...

// Create the VisualizationImageServer
// vv is the VisualizationViewer containing my graph
VisualizationImageServer<Node, Edge> vis =
    new VisualizationImageServer<Node, Edge>(vv.getGraphLayout(),
        vv.getGraphLayout().getSize());

// Configure the VisualizationImageServer the same way
// you did your VisualizationViewer. In my case e.g.

vis.setBackground(Color.WHITE);
vis.getRenderContext().setEdgeLabelTransformer(new ToStringLabeller<Edge>());
vis.getRenderContext().setEdgeShapeTransformer(new EdgeShape.Line<Node, Edge>());
vis.getRenderContext().setVertexLabelTransformer(new ToStringLabeller<Node>());
vis.getRenderer().getVertexLabelRenderer()
    .setPosition(Renderer.VertexLabel.Position.CNTR);

// Create the buffered image
BufferedImage image = (BufferedImage) vis.getImage(
    new Point2D.Double(vv.getGraphLayout().getSize().getWidth() / 2,
    vv.getGraphLayout().getSize().getHeight() / 2),
    new Dimension(vv.getGraphLayout().getSize()));

// Write image to a png file
File outputfile = new File("graph.png");

try {
    ImageIO.write(image, "png", outputfile);
} catch (IOException e) {
    // Exception handling
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T20:05:13.957

您可能想看看我不久前整理的 StandardPrint 类：

[http://tus.svn.sourceforge.net/viewvc/tus/tjacobs/print/](http://tus.svn.sourceforge.net/viewvc/tus/tjacobs/print/)

您可以使用 preview() 将任何组件（或使用 SpecialPrint 的任何组件）渲染到图像

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-10-30T13:03:30.017

我按照 dylan202 建议的方式捕获图像的经验是，图像质量达不到标准。因为我需要这些图像来进行演示。

获得 Jung 网络的高质量图像的另一种方法是使用[FreeHEP](http://java.freehep.org/vectorgraphics/index.html)的 VectorGraphics 库。

我使用这个库在 pdf 文件中生成图像。之后，我将 pdf 中的图像快照到我的演示文稿中。

```
JPanel panel = new JPanel ();
panel.setLayout(new FlowLayout());
panel.setBackground(Color.WHITE);
panel.add(vv);

Properties p = new Properties(); 
p.setProperty("PageSize","A4"); 

// vv is the VirtualizationViewer

VectorGraphics g = new PDFGraphics2D(new File("Network.pdf"), vv);                  

g.setProperties(p); 
g.startExport(); 
panel.print(g); 
g.endExport(); 
```

也可以生成 JPEG 或其他类型的文件。例如，要生成 SVG 文件，只需更改一行：

```
VectorGraphics g = new SVGGraphics2D(new File("Network.svg"), vv); 
```

有关详细信息，请参阅[手册](http://java.freehep.org/vectorgraphics/Manual.html)。

PDF 文件的放大快照 ![PDF 文件的放大快照](../Images/c2c3898162e85d8b910d7973f5f8aec4.png)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-01T01:55:54.643

```
BufferedImage image = (BufferedImage) vis.getImage(
new Point2D.Double(graph.getGraphLayout().getSize().getWidth() / 2,
graph.getGraphLayout().getSize().getHeight() / 2),
new Dimension(graph.getGraphLayout().getSize())); 
```

Graph 类中没有名为“getGraphLayout”的方法，而是可视化查看器的方法。

# svn - 将 SVN 工作区指向具有不同父目录的不同服务器和存储库

> ID：10420782
> 
> 赞同：5
> 
> 时间：2012-05-02T19:59:48.857
> 
> 标签：svn, tortoisesvn, migration

我有一个预定 EOL 的 svn 存储库，并且各种项目正在通过 svnrdump 转储和 svnadmin 加载移动到一个新的存储库。出于讨论的目的，基本拓扑是：

```
old repo:  http://oldrepo/repositories/oldname/...
new repo:  http://newrepo/repositories/newname/... 
```

这个特定的存储库很大，我有一个开发人员希望将他的旧工作区指向新的存储库。我看到的问题是 TortoiseSVN 允许重新定位事件，并且通过输入 URL `http://newrepo/repositories/newname`，初始重新定位似乎成功。但是，工作区现在认为新 repo 上的目录结构如下所示：

```
http://newrepo/repositories/newname/oldname 
```

有没有办法删除工作区对旧名称的引用？由于额外的意外目录，SVN 更新失败。我能想到的唯一选择是让这个开发人员从新的存储库中签出整个所需的工作空间，然后让他将他的 WIP 文件复制到新的工作空间中。客户端还有其他选择或解决方案吗？

编辑：工作目录是 c:\SVN\FolderA。执行命令：`svn relocate http://newrepo/repositories/newname/Folder1/FolderA`返回以下错误：

```
svn: E155024: Invalid relocation destination: 'http://newrepo/repositories/newname/Folder1/FolderA' (does not point to target) 
```

我不确定这有多相关，但原始存储库位置 oldrepo 是一个文件夹，但在新存储库中，newrepo（即：）`http://newrepo/repositories/newname`是新存储库的根级别。另外，我应该指出，在迁移过程中，更改被保留，但个别版本号没有。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-10-10T22:23:38.560

我的工作副本也有同样的问题。如果将存储库 UUID 复制到新存储库（使用“svnlook uuid”和“svnadmin setuuid”命令），则可以避免此“无效的重定位目标”错误，但是当我将工作副本升级到 1.8 时，尝试时出现此错误将我的工作副本重新定位到新的仓库。

我建议您只需删除工作文件夹根目录中隐藏的 .svn 文件夹，然后使用指向同一文件夹的新 URL 再次执行结帐。SVN 只会为新的存储库再次“版本化”文件，但它所花费的时间与您执行新签出的时间一样长。如果您有任何修改过的文件，请先创建一个补丁文件，然后再重新检出到同一文件夹，以防检出命令覆盖修改过的文件。

请记住，两条路径之间存在差异：

```
http://newrepo/repositories/newname
http://newrepo/repositories/newname/ <-- notice the final slash 
```

第一个路径说“将新名称目录复制到目标文件夹”，第二个路径说“将新名称目录的内容复制到目标文件夹”。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-08T12:13:12.983

您的开发人员可能必须：

*   断开他的项目与旧工作区的连接
*   将他未提交的更改（如果有）保存在其他地方
*   删除他的项目
*   从新工作区导出他的项目
*   将他未提交的更改（如果有）重新应用到项目中

# c# - 引用其他集合的项目的集合

> ID：10420787
> 
> 赞同：0
> 
> 时间：2012-05-02T20:00:21.310
> 
> 标签：c#, collections

我试图弄清楚是否有办法在 C# 4.0 中执行以下操作：

我有一个包含大量自定义类的 ObservableCollection - 我们称之为“MainCollection”。我的大部分代码都会持续更新 MainCollection 中这些类的值，这一切都很好。

我现在需要创建一个“集合”[或在 WPF DataGrid DataContext 绑定中使用的东西]，它只是将 MainCollection 中的类分组到基础类中的单个参数上。

有没有办法做到这一点，每当 MainCollection 中的项目更新时，这个新的“伪集合”也是如此。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T20:03:10.773

有一些开源框架可以实现这一点。我使用[BindableLinq](http://bindablelinq.codeplex.com/)取得了一些成功。尽管正如主页上所指出的那样，开发已经停滞不前，并且还有其他框架替代方案。

这些库旨在在更新多个级别的依赖项时提供更新（例如集合本身，或集合所依赖的项目的属性，甚至是外部依赖项）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T20:24:41.057

也许您正在寻找[CollectionView 类](http://msdn.microsoft.com/en-us/library/system.windows.data.collectionview.aspx)：

> 表示用于对数据集合进行分组、排序、过滤和导航的视图。

然而，

> 您不应在代码中创建此类的对象。要为仅实现 IEnumerable 的集合创建集合视图，请创建一个 CollectionViewSource 对象，将您的集合添加到 Source 属性，然后从 View 属性获取集合视图。

所以也许最好的起点是[How to: Sort and Group Data Using a View in XAML](http://msdn.microsoft.com/en-us/library/ms742542.aspx)。可以在 CollectionView 页面的底部找到这篇文章和其他一些操作指南文章。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-02T20:03:07.610

是否可以简单地公开一个按需创建新集合的属性？就像是

```
public List<Whatever> Items
{
    get
    {
        return MainCollection.Where( x => [someCondition] ).ToList();
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-02T20:10:05.697

换句话说，您想创建 MainCollection 的视图。这听起来像是 LINQ 的工作！

```
 var newCollection = from item in MainCollection
        group item  by /*item condintion */ into g //use where for filtering
         select new { Prop = g.Prop, Item = g }; 
```

如果您需要 observable，那么只需将序列传递给 ctor：

```
var observableColl = new ObservableCollection(newCollection); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-02T20:17:15.250

更新 MainCollection 以添加此分组功能

```
class MainCollection 
{
  public Dictionary<TGroupBySingleParameter, TValue> TheLookup{get; private set;}

  Update()
  {
        TheLookup.Add(//...
        //do work
  }
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-02T21:22:55.600

您可以创建一个 FilteredCollection 来侦听更改事件以更新过滤的集合。这允许在源集合发生更改时进行有效的重新过滤。

```
using System;
using System.Collections.Generic;
using System.Collections.ObjectModel;
using System.Collections.Specialized;
using System.Linq;

namespace ConsoleApplication26
{
    class FilteredObservableCollection<T> : INotifyCollectionChanged, IEnumerable<T>
    {
        List<T> _FilteredCached;
        ObservableCollection<T> Source;
        Func<T,bool> Filter;

        public FilteredObservableCollection(ObservableCollection<T> source, Func<T,bool> filter)
        {
            Source = source;
            Filter = filter;
            source.CollectionChanged += source_CollectionChanged;
        }

        void source_CollectionChanged(object sender, NotifyCollectionChangedEventArgs e)
        {
            if (e.Action == NotifyCollectionChangedAction.Add)
            {
                var addedMatching = e.NewItems.Cast<T>().Where(Filter).ToList();
                _FilteredCached.AddRange(addedMatching);
                if (addedMatching.Count > 0)
                {
                    CollectionChanged(sender, new NotifyCollectionChangedEventArgs(NotifyCollectionChangedAction.Add, addedMatching));
                }
            }
            else // make life easy and refresh fully
            {
                _FilteredCached = null;
                CollectionChanged(sender, new NotifyCollectionChangedEventArgs(NotifyCollectionChangedAction.Reset));
            }
        }

        public IEnumerator<T> GetEnumerator()
        {
            if (_FilteredCached == null)
            {
                _FilteredCached = Source.Where(Filter).ToList(); // make it easy to get right. If someone would call e.g. First() only 
                // we would end up with an incomplete filtered collection.
            }

            foreach (var filtered in _FilteredCached)
            {
                yield return filtered;
            }
        }

        System.Collections.IEnumerator System.Collections.IEnumerable.GetEnumerator()
        {
            return GetEnumerator();
        }

        public event NotifyCollectionChangedEventHandler CollectionChanged = (o,e) => { };
    }

    class Program
    {
        static void Main(string[] args)
        {
            ObservableCollection<int> data = new ObservableCollection<int>(new int[] { 1, 2, 3, 4, 1 });
            var filteredObservable = new FilteredObservableCollection<int>(data, x => x > 2);
            Print(filteredObservable); // show that filter works
            data.Add(1);
            Print(filteredObservable); // no change
            data.Add(10);
            Print(filteredObservable); // change
            data.Clear();
            Print(filteredObservable); // collection is empy
            data.Add(5);
            Print(filteredObservable); // add item in filter range
            data[0] = 1;
            Print(filteredObservable); // replace it
        }

        static void Print<T>(FilteredObservableCollection<T> coll)
        {
            Console.WriteLine("Filtered: {0}", String.Join(",", coll));
        }
    }

} 
```

这将打印

```
Filtered: 3,4
Filtered: 3,4
Filtered: 3,4,10
Filtered:
Filtered: 5
Filtered: 
```

# regex - vim 正则表达式将所有数字加 1

> ID：10420797
> 
> 赞同：39
> 
> 时间：2012-05-02T20:01:17.297
> 
> 标签：regex, vim

我在 java 中有一个准备好的语句，我在前面添加了一个参数。长话短说，我必须采用大量的 set 方法并将它们的第一个参数增加 1。

我想要一种快速搜索和替换匹配所有数字的方法，然后将它们加一。

* * *

## 回答 #1

> 赞同：62
> 
> 时间：2012-05-02T20:14:54.763

弄清楚了。

```
%s/\d\+/\=(submatch(0)+1)/g 
```

[http://vim.wikia.com/wiki/Using_an_expression_in_substitute_command](http://vim.wikia.com/wiki/Using_an_expression_in_substitute_command)

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-05-02T20:18:01.317

您需要知道的唯一正则表达式是`\d`.

```
:g/\d/exe "normal! \<C-A>" 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-03-26T11:19:20.163

我误解了这个问题，即询问如何在每行上将数字加一，即

```
var1
var1
var1 
```

成为

```
var1
var2
var3 
```

所以我想我会为此发布一个答案。@user606723 提供的[链接](http://vim.wikia.com/wiki/Using_an_expression_in_substitute_command)显示您可以使用（例如在第 1 行和第 3 行之间）执行此操作：

```
:let counter=0|1,3g//let counter=counter+1|s/^/\=counter."\t" 
```

# php - 在提交表单时，将不同的字段插入到不同的 MYSQL 表中

> ID：10420798
> 
> 赞同：2
> 
> 时间：2012-05-02T20:01:19.623
> 
> 标签：php, mysql, database, forms

我有一个包含 3 种类型字段的表单：

1.  (2) 提交给“tblCocktail”的文本字段
2.  (4) 从“tblIngredient”中选择填充值的字段并提交到“tblRecipe”
3.  (4) 选择提交给“tblRecipe”的带有预设选项的字段

表单代码（每个“选择红色”和“数量”下拉菜单有 4 个）：

```
<form method="POST" action="addcocktail.php" >
                    Cocktail Name: <input type="text" name="cocktailname" /> 
                    How To: <input type="text" name="howto" /> 
                    <br> 
                    <select id="selectingred1" name="selectingred1">
                      <?php
                      $sql = "SELECT ingredientID, name FROM tblIngredient ".
                      "ORDER BY name";

                      $rs = mysql_query($sql);

                      while($row = mysql_fetch_array($rs))
                      {
                        echo "<option value=\"".$row['ingredientID']."\">".$row['name']."</option>\n  ";
                      }
                      ?>
                    </select>
                    <select id="quantity1" name="quantity1">
                      <option></option>
                      <option>1</option>
                      <option>2</option>
                      <option>3</option>
                      <option>4</option>
                    </select>
                    <br>
<input type="submit" value="add" />
                </form> 
```

addcocktail.php：

```
 <?php include("databasecon.php"); ?>

<?php
mysql_select_db("mwheywood", $con);

//insert cocktail details
$sql="INSERT INTO tblCocktail (name, howto)
VALUES
('$_POST[cocktailname]','$_POST[howto]')";

$sql2="INSERT INTO tblRecipe (ingredientID, quantity)
VALUES
('$_POST[selectingred1]','$_POST[quantity1]'),
('$_POST[selectingred2]','$_POST[quantity2]'),
('$_POST[selectingred3]','$_POST[quantity3]'),
('$_POST[selectingred4]','$_POST[quantity4]')";

if (!mysql_query($sql,$con))
  {
  die('Error: you fail at life' . mysql_error());
  }
echo "cocktail added";

if (!mysql_query($sql2,$con))
  {
  die('Error: you fail at life' . mysql_error());
  }
echo "ingredients added";

mysql_close($con);

?> 
```

目前这只是将“selectingred4”和“quantity4”值添加到“tblRecipe”中。它忽略了文本框的两个插入，以及前 3 个选择框条目。

我的另一个问题也是我从表单中的 php 中获取了“ingredientID”和“名称”，但是当我提交表单时，它也没有将“ingredientID”提交到“tblRecipe”中。

- 任何帮助将不胜感激 -Matt

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T20:05:26.207

您不断覆盖您的 SQL 查询，只有最后一个实际存在以执行。这是您的代码的固定版本：

```
<?php include("databasecon.php"); ?>

<?php
mysql_select_db("mwheywood", $con);

//insert cocktail details
$sql="INSERT INTO tblCocktail (name, howto)
VALUES
('$_POST[cocktailname]','$_POST[howto]')";

if (!mysql_query($sql,$con))
{
die('Error: you fail at life' . mysql_error());
}

//insert recipe details
$sql="INSERT INTO tblRecipe (ingredientID, quantity)
VALUES
('$_POST[selectingred1]','$_POST[quantity1]')";

$sql="INSERT INTO tblRecipe (ingredientID, quantity)
VALUES
('$_POST[selectingred2]','$_POST[quantity2]')";

$sql="INSERT INTO tblRecipe (ingredientID, quantity)
VALUES
('$_POST[selectingred3]','$_POST[quantity3]')";

$sql="INSERT INTO tblRecipe (ingredientID, quantity)
VALUES
('$_POST[selectingred4]','$_POST[quantity4]')";
if (!mysql_query($sql,$con))
  {
  die('Error: you fail at life' . mysql_error());
  }
echo "cocktail added";

mysql_close($con);

?> 
```

此外，您可以将最后四个查询合并为一个查询：

```
<?php include("databasecon.php"); ?>

<?php
mysql_select_db("mwheywood", $con);

//insert cocktail details
$sql="INSERT INTO tblCocktail (name, howto)
VALUES
('$_POST[cocktailname]','$_POST[howto]')";

if (!mysql_query($sql,$con))
{
die('Error: you fail at life' . mysql_error());
}

//insert recipe details
$sql="INSERT INTO tblRecipe (ingredientID, quantity)
VALUES
('$_POST[selectingred1]','$_POST[quantity1]'),
('$_POST[selectingred2]','$_POST[quantity2]'),
('$_POST[selectingred3]','$_POST[quantity3]'),
('$_POST[selectingred4]','$_POST[quantity4]')";
if (!mysql_query($sql,$con))
  {
  die('Error: you fail at life' . mysql_error());
  }
echo "cocktail added";

mysql_close($con);

?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T20:06:20.883

你分配一个`INSERT`语句`$sql`然后你把它扔掉并分配另一个语句，另一个，实际上*只做*最后一个。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-02T20:06:38.183

好吧，您必须在每个 $sql 片段之后执行 mysql_query ，因为每次将 $sql 变量设置为等于某个值时，您都在重新声明它。您可以将它们连接在一起并通过执行 "$sql.=" 一次运行它们并在一个 php 函数中执行多个查询

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-02T20:08:49.840

您只需继续按顺序将不同的值重新分配给`$sql`，因此只有最后一个值。每次您通过代码时，所有其他内容都会被覆盖。

您需要*遍历*数据，在每次传递时使用新数据执行查询，或者使用正确的语法构建查询。

我还将重新组织表单的结构以允许可变答案。也可能是表格是如何设置的。成分有 ID、描述、价值、成本，可能在哪里可以找到它们和一些注释。食谱有等级、ID、描述和说明。Recipe_xref 有一个 recipe_id 字段、一个 ingredients_id 字段和一个数量字段。

这提供了一个非常丰富和动态的数据结构，可以根据需要进行扩展。从那里开始，构建查询以根据需要提取数据。

# javascript - 从服务器读取的 ajax 文件的 w3schools.com 示例适用于 IE9，但不适用于 FF12

> ID：10420803
> 
> 赞同：0
> 
> 时间：2012-05-02T20:01:52.797
> 
> 标签：javascript, jquery

我需要从服务器读取文本文件的内容并使用 JavaScript 解析内容，以便根据内容向页面添加元素。

但是，[W3Schools](http://www.w3schools.com/ajax/ajax_examples.asp)的示例 在 FF12 中运行良好，但是如果我将示例左侧窗格中的源代码复制到 .html 文件，并在与我的 .html 相同的目录中创建所需的数据文件“demo_ajax_load.txt”，它不起作用。但是，它在 IE9 中可以正常工作。

这是来源：

```
<html>
<head>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript">
$(document).ready(function(){
  $("button").click(function(){
    $.get("demo_ajax_load.txt", function(result){
      $("div").html(result);
    });
  });
});
</script>
</head>
<body>

<div><h2>Let AJAX change this text</h2></div>
<button>Change Content</button>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T19:51:55.593

使用 vxworks 而不是 Windows，解决了这个问题。

# user-interface - 如何从另一个类调用 SWT GUI？

> ID：10420805
> 
> 赞同：0
> 
> 时间：2012-05-02T20:02:05.350
> 
> 标签：user-interface, constructor, swt, invoke

当我使用 Swing 时，我能够做这样的事情..

```
java.awt.EventQueue.invokeLater(new Runnable() { 
public void run() { 
gui = new GUI();
gui.setVisible(true); 
}
} 
```

现在我正在使用 SWT，我正在尝试使用相同的方式创建一个 GUI。要么 gui 不会出现，要么 gui 将冻结。我试图从另一个类中调用它，因为我正在将它开发为整个应用程序的模块。

这就是我到目前为止所尝试的方式..

```
gui = new GUI();
gui.open(); 
```

我也试过上面的括号，但我没有运气。

这是gui类

```
package org.eclipse.swt.snippets;

import org.eclipse.swt.widgets.Display;
import org.eclipse.swt.widgets.Shell;

public class GUI {

protected Shell shell;

/**
 * Launch the application.
 * @param args
 */
public static void main(String[] args) {
    try {
        GUI window = new GUI();
        window.open();
    } catch (Exception e) {
        e.printStackTrace();
    }
}

/**
 * Open the window.
 */
public void open() {
    Display display = Display.getDefault();
    createContents();
    shell.open();
    shell.layout();
    while (!shell.isDisposed()) {
        if (!display.readAndDispatch()) {
            display.sleep();
        }
    }
}

/**
 * Create contents of the window.
 */
protected void createContents() {
    shell = new Shell();
    shell.setSize(450, 300);
    shell.setText("SWT Application");

}

} 
```

我曾尝试编辑 gui 类以形成构造函数，但仍然没有运气

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T20:50:05.323

I'm pretty sure the problem is coming from `shell = new Shell()`. As far as I remember, the Display has to passed to the Shell constructor so it knows where to attach.

I would change it to something like this and try it:

```
/**
 * Open the window.
 */
public void open() {
    Display display = Display.getDefault();
    createContents(display);
    shell.open();
    shell.layout();
    while (!shell.isDisposed()) {
        if (!display.readAndDispatch()) {
            display.sleep();
        }
    }
}

/**
 * Create contents of the window.
 */
protected void createContents(Display display) {
    shell = new Shell(display);
    shell.setSize(450, 300);
    shell.setText("SWT Application"); 
```

I don't have Eclipse or SWT on this machine, though, so I can't test it and am going off memory of how the SWT hierarchy works.

# jquery - 在 jquery 中可拖动，revert 项目不会返回到它的开始位置

> ID：10420810
> 
> 赞同：3
> 
> 时间：2012-05-02T20:02:23.470
> 
> 标签：jquery, jquery-ui, jquery-ui-draggable

我使用 jquery-ui 可拖动并将还原选项设置为无效。

问题是当我将一个项目拖放到一个无效位置时，它不会返回到它的起始位置。它发生在新的位置。

我包括这个例子：

[http://jsfiddle.net/zMxJv/](http://jsfiddle.net/zMxJv/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-19T01:25:47.457

首先，选项**revert**仅采用值**true**和**false**，**无效**和**有效**在 droppable 上可用，您正在使用可拖动。

为了解决您的问题，有两种选择，既使用 sortable ，最后一个也可放置。第一个是选项：

```
containment: 'parent' 
```

这甚至不允许您将元素拖到容器外。

另一个选项需要更多代码。看看这个：http: [//jsfiddle.net/qMdGs/3/](http://jsfiddle.net/qMdGs/3/)

**更新：http:** [//jsfiddle.net/qMdGs/5/](http://jsfiddle.net/qMdGs/5/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-24T15:10:24.227

从代码中删除`draggable`s 和 the `droppable`——您实际上并不需要它们，因为 sortable 会为您处理这些。

这是一个更新的小提琴，让您了解它的方向：http: [//jsfiddle.net/zMxJv/5/](http://jsfiddle.net/zMxJv/5/)

如果您只希望每一天都可以排序而不需要从其他天进行异花授粉，请删除该`connectWith`属性。

# grails - Grails/Groovy：在运行时修改“查询”闭包

> ID：10420812
> 
> 赞同：1
> 
> 时间：2012-05-02T20:02:35.957
> 
> 标签：grails, groovy, grails-orm, criteria

在一个gorm域类中，我可以做

```
def q = {
  property1{
    eq('attr', 0)
  }
}

MyDomainClass.list(q) 
```

如何在运行时修改闭包“q”（或创建一个包含闭包“q”具有的限制的新闭包），例如我可以添加另一个属性限制？

* * *

**更多细节**

实际上我的问题是如何在域类层次结构中创建组合标准。

```
class Parent{
  int pAttr

  static def getCriteria(){
    def dummyParentCriteria = {
      eq('pAttr', 0)
    }
  }
}

class Child extends Parent{
  int cAttr

  static def getCriteria(){
    def dummyChildCriteria = {
      // (1) 
      eq('cAttr', 0)
    }
  }
} 
```

**在“dummyChildCriteria”中，我想避免重复父母的限制。**

我想以某种方式结合 Parent 的 getCriteria 的结果 (1)

* * *

**具有命名查询继承的解决方案**

```
class Parent{
  int pAttr
  static namedQueries = {
     parentCriteria{
       eq('pAttr', 0)
     }
  }
}

class Child extends Parent {
  int cAttr
  static namedQueries = {
     childCriteria{
       parentCriteria() 
       eq('cAttr', 0)
     }
  }
} 
```

但是，如果有人知道最初问题的答案，那就太好了！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T22:18:22.323

从 Grails 2.0.x 开始，您可以使用具有多种用途的**[分离条件查询](http://grails.org/doc/latest/guide/GORM.html#detachedCriteria)**，包括允许您创建通用的可重用条件查询、执行子查询和执行批量更新/删除。

使用 Detached Criteria，您可以使用**[Where Queries](http://grails.org/doc/latest/guide/GORM.html#whereQueries)**进行查询组合。

```
def parentCriteria = {
    pAttr == 0
}

def childCriteria = {
    cAttr == 0
}

def parentQuery = Parent.where(parentCriteria)
def childQuery = Child.where(parentCriteria && childCriteria) 
```

# c - 为什么嵌入式 c 代码的这些安排执行如此不同？

> ID：10420823
> 
> 赞同：3
> 
> 时间：2012-05-02T20:03:30.070
> 
> 标签：c, embedded, interrupt

**背景**

我正在使用基于 8052 的微控制器。我连接了 LCD 和编码器轮。用户可以通过旋转并按下编码轮来浏览 LCD 上显示的菜单。

编码器轮的旋转是基于中断的。

编码器轮的旋转方向 ( `encoder_turn`) 在编码器中断内设置。

我`update_lcd()`在循环内部调用。

**新的响应代码**

```
void update_lcd()                           
{

        //ENCODER TURN      
        switch(encoder_turn)
        {
            case RIGHT:
                 lcd_clear();
                 next_screen();
                 break;
            case LEFT:
                lcd_clear();
                previous_screen();
                break;
            default:
                break;
        }
 }

void next_screen()
{
    if(current_test_screen < screen5)
    {
        current_test_screen++;
    }

    draw_current_test_screen(); 
}

void draw_current_test_screen()
{
    switch(current_test_screen)
    {
        case screen1:
            draw_screen1();
            break;
        case screen2:
            draw_screen2();
            break;
        case screen3:
            draw_screen3();
            break;
        case screen4:
            draw_screen4();
            break;
        case screen5:
            draw_screen5();
            break;      
        default:
        break;
    }
} 
```

**旧的无响应代码**

```
void update_lcd()                           
{

        //ENCODER TURN      
        switch(encoder_turn)
        {
            case RIGHT:
                 lcd_clear();
                 next_screen();
                 break;
            case LEFT:
                lcd_clear();
                previous_screen();
                break;
            default:
                break;
        }

        switch(current_test_screen)
        {
            case screen1:
                draw_screen1();
                break;
            case screen2:
                draw_screen2();
                break;
            case screen3:
                draw_screen3();
                break;
            case screen4:
                draw_screen4();
                break;
            case screen5:
               draw_screen5();
               break;       
            default:
               break;
       }

 }

void next_screen()
{
    if(current_test_screen < screen5)
    {
        current_test_screen++;
    }
} 
```

**问题**

为什么一个反应灵敏而另一个完全没用？

当我说响应时，我指的是当我旋转编码器时屏幕变化是响应的。两种方法都“有效”，但从使用的角度来看，一种方法是不可接受的。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-02T20:08:23.433

这两段代码几乎是等价的，除了一个*非常*细微的区别。

如果您尝试重构旧代码以使其看起来更像您的新代码，您会发现旧代码进行了一次额外的函数调用。仔细看区别：

```
void update_lcd()                           
{
        //ENCODER TURN      
        switch(encoder_turn)
        {
            case RIGHT:
                 lcd_clear();
                 next_screen();
                 break;
            case LEFT:
                lcd_clear();
                previous_screen();
                break;
            default:
                draw_current_test_screen();   // <--- your new code omits this call
                break;
        }
 } 
```

尝试获取新代码并添加该行，看看它是否会导致无响应问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T20:08:00.003

只是一个猜测，但我怀疑：由于您唯一更改的是函数嵌套，`encoder_turn`因此可能正在被优化器缓存。您需要标记`encoder_turn`为易失性，因为中断可以随时发生并更改其值。

# php - 通读文件，并将数字添加到数组部分

> ID：10420829
> 
> 赞同：1
> 
> 时间：2012-05-02T20:04:01.783
> 
> 标签：php, arrays, multidimensional-array, fread

我有一个 CSV 文件，其中有数千个数字。让我们使用这个来简化：

```
4
7
1
9
3
3
8
6
2 
```

我想要的是输出一个每个键有 3 个数字的数组（用逗号内爆）：

```
array (
  [0] => 4,7,1
  [1] => 9,3,3
  [2] => 8,6,2
) 
```

我已经设法做到这一点，阅读 CSV：

```
$path = "data.csv";
$row = 1;
if (($handle = fopen($path, "r")) !== FALSE) {
  while (($data = fgetcsv($handle, 1000, "\r\n")) !== FALSE) {
    $cell = 0;
    $table[$row][$cell] = $data[0];
    $cell++;
  }
  fclose($handle);
} 
```

我只是对我必须在哪里增加 $row 和 $cell 以获得我想要的输出感到困惑。你能帮忙吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-02T20:27:14.653

使用这个，我测试并工作：

```
<?php
$path = "data.csv";
$array = explode("\n", file_get_contents("data.csv"));
$numbers = array();
foreach(array_chunk($array, 3) as $number){
    $numbers[] = implode(", ", $number);
}
print_r($numbers);
?> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-02T20:15:24.830

一个较小的（即使您已经接受了另一个答案），但并不意味着它“更好”（因为它不是那么容易阅读）。你仍然可以从中学到一些技巧：

```
$path = "data.csv";
$datas = array_chunk(explode("\n",file_get_contents($path)),3);
array_walk($datas, create_function('&$v,$k', '$v = implode(\', \', $v);'));
var_dump($datas); 
```

* * *

比上一个好多了：

```
$path = "data.csv";  // path to the file
$datas = explode("\n",file_get_contents($path)); 
// $datas contains an array with each csv line as an array row
$finalArray = array(); // empty array we will fill
$datas = array_chunk($datas, 3); // http://fr.php.net/manual/en/function.array-chunk.php
foreach($datas as $data){
    $finalArray[] = implode(', ', $data);
}
var_dump($finalArray); 
```

* * *

前一个 ：

```
$path = "data.csv";  // path to the file
$row = 0; // initializing
$datas = explode("\n",file_get_contents($path)); 
// $datas contains an array with each csv line as an array row
$finalArray = array(); // empty array we will fill
// Let's loop $datas \o/
foreach($datas as $index => $data){ // 
    $finalArray[$row] = isset($finalArray[$row]) ? $finalArray[$row].', '.$data : $data; // filling the array
    if(($index+1)%3 == 0) $row++; // We jump from a row to another every 3 lines
}

var_dump($finalArray); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-02T20:11:26.147

您必须在循环之外声明单元格，否则它将始终被重置...

这是所需的代码：

```
$path = "data.csv";
$row = 0;
$cell = 0;
if (($handle = fopen($path, "r")) !== FALSE) {
  while (($data = fgetcsv($handle, 1000, "\r\n")) !== FALSE) {
    $table[$row][$cell] = $data[0];
    $row += $cell == 2 ? 1 : 0; //If its last cell, increase row, else do nothing
    $cell = $cell == 2 ? 0 : $cell+1; //if its last cell, reset to 0, else add 1
  }
  fclose($handle);
} 
```

我希望它对你来说很容易理解

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-02T20:25:17.693

这是我的代码：

```
//filter for empty lines
function remove_empty($e){
if(trim($e)!="") return true;
}

//reading the csv file and building the integer array
$arr = array_filter(explode("\r\n",file_get_contents("test.csv")),"remove_empty");
//new array initialization
$newArr = array();
//selecting 3 values in one loop
for($i=0;$i<count($arr);$i=$i+3){
    $newArr[] = implode(",",array($arr[$i],$arr[$i+1],$arr[$i+2]));
}

print_r($newArr); 
```

# php - PHP 5.4 PDO 无法使用旧的不安全身份验证连接到 MySQL 4.1+

> ID：10420831
> 
> 赞同：11
> 
> 时间：2012-05-02T20:04:03.290
> 
> 标签：php, mysql, pdo

我知道有很多类似的问题，事实上我已经阅读了所有（9）个问题。

但是，它们都没有解决我的问题。

我有一个共享主机包（最低限度）。我的包中包含的是域名，以及托管 MySQL 服务器的单独 IP 地址。对于开发，我使用`http://localhost/`的是 PHP 5.4 的开发服务器，并且我使用的是托管包中的 MySQL 服务器。

这个问题只出现在我的电脑上，因为我安装了 PHP 5.4，但我的网络主机安装了 PHP 5.2.17 并且不会升级。MySQL 服务器在 MySQL 5.1.50 上。

**幸运的是，phpMyAdmin 有一个内置的“更改密码”功能。**

phpMyAdmin 中有两个用于更改密码的散列选项：

*   MySQL 4.1+
*   兼容 MySQL 4.0

我使用 MySQL 4.1+ 选项更改了密码，并确认更新成功。

> 个人资料已更新。`SET PASSWORD = PASSWORD( '***' )`

但是，当我执行此查询时：

```
SELECT @@global.old_passwords, @@session.old_passwords, Length(PASSWORD('abc')); 
```

它告诉我密码长度仍然是 16。输出：

> ```
> 1     1     16 
> ```

**所以问题仍然存在。**

> 无法连接到数据库。SQLSTATE[HY000] [2000] mysqlnd 无法使用旧的不安全身份验证连接到 MySQL 4.1+。请使用管理工具通过命令 SET PASSWORD = PASSWORD('your_existing_password') 重置密码。这将在 mysql.user 中存储一个新的、更安全的哈希值。如果此用户在 PHP 5.2 或更早版本执行的其他脚本中使用，您可能需要从 my.cnf 文件中删除 old-passwords 标志

在 phpMyAdmin 中使用 DBO 用户登录时，我也尝试执行这些查询：

```
SET SESSION old_passwords=0; 
[phpMyAdmin reloads to the home screen, but the value remains = 1]

SET GLOBAL old_passwords = 0;
#1227 - Access denied; you need the SUPER privilege for this operation

FLUSH PRIVILEGES;
#1227 - Access denied; you need the RELOAD privilege for this operation 
```

这与虚拟主机菜单中用于设置 DBO 用户的内容相矛盾：

> 数据库所有者
> 创建新数据库时，您需要指定一个数据库所有者 (DBO) 用户，该用户将拥有
> 对数据库的完全管理员访问权限。

这是我必须与我的虚拟主机一起处理的事情吗？或者它可以由我的 DBO 用户解决吗？否则这可以在PHP中绕过吗？（因为它适用于 PHP 5.2.17 但不适用于 PHP 5.4）

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-05-02T22:20:17.970

# 解决了！

虽然`SET SESSION old_passwords=0;`在 phpMyAdmin 中没有工作。

我下载了[MySQL GUI 工具](http://dev.mysql.com/downloads/gui-tools/5.0.html)并使用 MySQL 查询浏览器对非 DBO 用户执行相同的命令：

`SET SESSION old_passwords = 0;`

`SELECT @@global.old_passwords, @@session.old_passwords, Length(PASSWORD('abc'));`

现在返回：

```
1      0      41 
```

所以我只是更改了密码：

`SET PASSWORD = PASSWORD('my_old_password')`

现在 PHP 5.4 PDO 使用该用户连接到数据库！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-03-12T02:49:53.657

在`phpMyAdmin`中，设置会话变量将起作用，但对密码函数的调用必须发生在同一个会话/执行中。

例如，如果我执行：

```
SET SESSION old_passwords = 0;
SET PASSWORD = PASSWORD('notagoodpassword'); 
```

它会正确设置它。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2016-01-25T15:59:56.877

此解决方案有效： SET SESSION old_passwords = 0;

但是：之后我不得不放弃“旧”的用户霜表并创建新的 - 然后它就像一个魅力。

# jquery - 在 jquery 中使用 chrome 开发者工具调试 Dom 异常

> ID：10420832
> 
> 赞同：17
> 
> 时间：2012-05-02T20:04:05.490
> 
> 标签：jquery, html, google-chrome-devtools, domexception

在使用 chrome 开发工具启动调试会话时，我一直收到一个 dom 异常。即使使用这个小的 HTML 测试文档，这个问题仍然存在：

```
<!DOCTYPE HTML>
<html lang="en">
<head>
<meta charset="utf-8">
<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1/jquery.min.js">  
    </script>
</head>
<body>
</body>
</html> 
```

异常代码：12 消息：“SYNTAX_ERR: DOM Exception 12”

异常发生在第 1904 行：

```
 try {
                b.call(c.documentElement, "[test!='']:sizzle")
            } catch (f) {
                e = !0
            } 
```

有任何想法吗？我正在使用 chrome 19.0.1084.36

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-08-08T03:55:12.887

感谢保罗格雷森的回答。

不幸的是，他的答案在评论中，对于寻求解决方案的人来说并不清楚。

为了清楚起见，这里是摘要：

在 Chrome 开发者工具的底部状态栏中，有一个看起来像“暂停”按钮的图标，您可以通过单击它来切换 chrome 将如何暂停异常。

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2013-04-05T12:03:57.020

![只需切换此按钮即可消除此问题](../Images/e7896fc2fe69aafdc88083dd5e324ae2.png)

> 只需切换此按钮即可消除此问题。这是一个普遍的问题，每个人都应该知道。

# android - 通过意图将数据从服务传递到小部件

> ID：10420833
> 
> 赞同：1
> 
> 时间：2012-05-02T20:04:07.960
> 
> 标签：android, android-widget

我有一个服务，它调用一个向我的 AppWidgetProvider 发送自定义文本的意图。为此，我使用 onRecieve 方法并检查正确的操作。

所以我有两个问题，第一个是，这是正确的方法，第二个为什么我的 onReceive 方法永远不会被调用？

我在以下部分添加了清单

```
<receiver android:label="KreativBarometer Widget"
   android:name=".widget.MyWidgetProvider" >
   <intent-filter >
      <action android:name="android.appwidget.action.APPWIDGET_UPDATE" />
   </intent-filter>
   <meta-data
       android:name="android.appwidget.provider"
       android:resource="@xml/widget_info" />
 </receiver> 
```

我的 AppWidgetProvider 使用以下 onReceive 方法

```
public void onReceive(Context context, Intent intent) {
    if(intent.getAction().equals("APPWIDGET_UPDATE")){
        String text = intent.getStringExtra("newItemArrived");
        RemoteViews views = new RemoteViews(context.getPackageName(), R.layout.widget_layout);
        views.setTextViewText(R.id.TextView01, text);
    }
    super.onReceive(context, intent);
} 
```

并且为了测试我使用这个意图

```
Intent intent = new Intent("APPWIDGET_UPDATE");
intent.putExtra("newItemArrived", "Neue Frage erschienen");
sendBroadcast(intent); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2022-01-25T17:22:45.733

要传递自定义日期，您需要使用 Bundle 作为：

```
val intent = Intent(context, ItemsCollectionRemoteViewsService::class.java)
            .apply {
                val extrasBundle = Bundle()
                extrasBundle.putSerializable(WIDGET_DATA, widgetData)
                putExtra(WIDGET_Bundle_DATA, extrasBundle)
            }
        remoteViews.setRemoteAdapter(R.id.items_list_view, intent) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-04-04T10:31:49.917

我认为您必须修改清单文件以包含两件事：

1.  你的另一个动作`<receiver>`表明你有一个意图进入你的小部件

2.  注册您的服务。

也许这个视频会很有用：[https ://youtu.be/DJsNmS-PvD8?t=2m7s](https://youtu.be/DJsNmS-PvD8?t=2m7s)

# javascript - 如果它是子元素，则防止单击

> ID：10420836
> 
> 赞同：1
> 
> 时间：2012-05-02T20:04:30.060
> 
> 标签：javascript, boolean

使用布尔值来确定是否单击了子元素会是一个坏主意吗？有没有更好的方法？

注意：我不想为此使用 jquery。

请参见下面的代码：

```
<!DOCTYPE html>
<html>
<head>
<title></title>
<style type="text/css">
body{margin:0;}
#container{height:300px;background:red}
#box{width:500px;height:300px;background:blue;margin:auto}
</style>
</head>
<body>
<div id="container">
<div id="box"></div>
</div>
<script>
var hbWindow = window,
    hbDocument = document,
    hbBooleanIfIsOutside = new Boolean(),
    hbIdBox = hbDocument.getElementById('box'),
    hbIdContainer = hbDocument.getElementById('container');

hbWindow.onload = function () {

    hbIdContainer.onclick = function () {
        if(hbBooleanIfIsOutside) {
            alert('you\'re outside!');
        } else {
            alert('you\'re inside!');
        }
        hbBooleanIfIsOutside = true;
    }

    hbIdBox.onclick = function () {
        hbBooleanIfIsOutside = false;
    }

}
</script>
</body>
</html> 
```

**添加了新版本：**

在这个版本中，我改用 addEventListener。

```
var hbWindow = window,
    hbDocument = document,
    hbIdBox = hbDocument.getElementById('box'),
    hbIdContainer = hbDocument.getElementById('container');

hbWindow.onload = function () {

function inOrOut(e){
    if (!e) e = hbWindow.event;
    if((e.target || e.srcElement).id == 'container') {
        alert('you\'re outside!');
    } else {
        alert('you\'re inside!');
    }
}

hbIdContainer.addEventListener('click', inOrOut, false);

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T20:05:49.530

如果您想知道是什么触发了点击，请检查`event.target`. 在 IE6-8 上，您将检查该`window.event.srcElement`属性。

```
if ( document.body.addEventListener ) {
  document.body.addEventListener("click", alertMe, false);
} else if ( document.body.attachEvent ) {
  document.body.attachEvent("onclick", alertMe);
}

function alertMe(event) {
  console.log( event.target || window.event.srcElement.nodeName );
} 
```

因此，当我们将事件附加到 时`document.body`，我们可以通过`target`（或在某些情况下`srcElement`）确定哪个孩子触发了点击。

演示：http: [//jsbin.com/oxuzek/7/edit](http://jsbin.com/oxuzek/7/edit)

# c# - 自动化长 SSH 会话

> ID：10420840
> 
> 赞同：1
> 
> 时间：2012-05-02T20:04:42.773
> 
> 标签：c#, windows, linux, ssh

我正在寻找一种创建 ac# 程序的方法，我可以在其中编写多个会话登录等脚本。我必须检查大约 200 台服务器是否存在特定文件中的差异，并且我想用 c# 自动化它。我环顾四周，并没有发现任何关于我想做的最新和最新的事情。目前我正在使用 PuTTY 手动检查文件。我遇到了[http://sshnet.codeplex.com/](http://sshnet.codeplex.com/)，因为它在 stackoverflow 其他地方的建议，但我遇到了一些问题。主要是在执行一个命令之后，你又回到了初始状态。例如，运行“cd /etc/sysconfig”然后运行“ls”不会输出“/etc/sysconfig/”的内容，而是输出默认文件夹的内容。

有没有我可以用来完成此任务的免费库？我正在寻找可以在 C# 程序中实现的类似 PuTTY 的功能。非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T06:04:11.643

您不需要 SSH，而是 SFTP 客户端组件。SFTP 是 SSH 文件传输协议，此类客户端组件可让您连接到远程服务器、请求目录列表和读取文件内容（以及其他必要功能）。我们公司在我们的 SecureBlackbox 产品中为 SSH 和 SFTP 提供了复杂的组件，并且提供了 SFTP 客户端组件的免费许可证，没有附加任何条件，如[http://www.sftp-net.com/free-sftp-net.html](http://www.sftp-net.com/free-sftp-net.html)所述。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T20:09:05.187

[sharpSsh](http://www.codeproject.com/Articles/11966/sharpSsh-A-Secure-Shell-SSH-library-for-NET)（未经测试，但看起来不错）？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-03T06:25:34.697

Putty 还提供了一个命令行界面——因此您也可以考虑从 C# 中使用它。
或者，您也可以使用 scp 或 sftp - 您在检查文件什么？文件大吗？

# xcode - 滑块完成后触发 UIViewAnimation

> ID：10420842
> 
> 赞同：0
> 
> 时间：2012-05-02T20:05:00.537
> 
> 标签：xcode, block, uislider, uiviewanimation

我正在尝试使用滑块触发 UIViewAnimation 块。基本上我想要一个沿 x 轴模式的视图。距离由滑块设置。

动画效果很好，但我希望在完成移动滑块后触发动画。到目前为止，我只完成了与滑块同时移动视图。

关于如何做到这一点的任何想法？

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T22:19:58.793

正如另一位海报所说，我建议将滑块的连续属性设置为 NO，然后添加与值更改事件和 UIControlEventTouchDragInside 事件相关的操作。您应该在用户释放控件时获得值更改事件，并在用户拖动控件时获得持续的 UIControlEventTouchDragInside 事件流。

使用 touch up inside 来获得最终值可能不起作用，因为用户可以触摸控件，拖动到新值，滑到控件外，然后抬起手指。在这种情况下，滑块的值会有所不同，但不会触发 touchUpInside 操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T20:08:32.750

将 UISlider 的`continuous`属性设置为`NO`。然后它仅在用户完成移动（抬起）手指时发送事件。

# python - 你如何获得浮点序列中的下一个值？

> ID：10420848
> 
> 赞同：15
> 
> 时间：2012-05-02T20:05:42.493
> 
> 标签：python, math, floating-point

Python 是否提供了一个函数来获取通过增加现有浮点值的最低有效位而产生的浮点值？

我正在寻找类似于[`std::nextafter`](http://en.cppreference.com/w/cpp/numeric/math/nextafter)C++11 中添加的函数的东西。

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-05-03T06:10:52.267

这里有五个（实际上是四个半）可能的解决方案。

## 解决方案一：使用 Python 3.9 或更高版本

2020 年 10 月发布的 Python 3.9 包含一个新的标准库函数[`math.nextafter`](https://docs.python.org/3.9/library/math.html#math.nextafter)，该函数直接提供此功能：用于`math.nextafter(x, math.inf)`获取下一个正无穷大的浮点数。例如：

```
>>> from math import nextafter, inf
>>> nextafter(100.0, inf)
100.00000000000001 
```

如果您查看该方法提供的十六进制表示，则更容易验证此函数是否确实*产生*[`float.hex`](https://docs.python.org/3/library/stdtypes.html#float.hex)了下一个浮动：

```
>>> 100.0.hex()
'0x1.9000000000000p+6'
>>> nextafter(100.0, inf).hex()
'0x1.9000000000001p+6' 
```

Python 3.9 还引入了一个密切相关且经常有用的伴随函数[`math.ulp`](https://docs.python.org/3.9/library/math.html#math.ulp)，它给出了一个值和下一个远离零的值之间的差异：

```
>>> from math import ulp
>>> nextafter(100.0, inf) - 100.0
1.4210854715202004e-14
>>> ulp(100.0)
1.4210854715202004e-14 
```

## 解决方案 2：使用 NumPy

如果您没有 Python 3.9 或更高版本，但您可以访问 NumPy，那么您可以使用[`numpy.nextafter`](https://docs.scipy.org/doc/numpy/reference/generated/numpy.nextafter.html#numpy-nextafter). 对于常规`float`的 Python，语义匹配`math.nextafter`（尽管说 Python 的语义匹配 NumPy 更公平，因为 NumPy 早在 Python 之前就提供了这个功能*）*。

```
>>> from numpy import nextafter, inf
>>> nextafter(100.0, inf)
100.00000000000001 
```

## `nextafter`解决方案3：自己包装C

C 指定一个`nextafter`函数`math.h`（例如参见 C99 的第 7.12.11.3 节）；这正是 Python >= 3.9 在其`math`模块中封装和公开的函数。如果您没有 Python 3.9 或更高版本，您可以使用[`ctypes`](https://docs.python.org/3/library/ctypes.html)或[`cffi`](http://cffi.readthedocs.org)动态调用 C's `nextafter`，或者编写一个简单的[Cython](https://cython.org)包装器或 Python C 扩展来公开 C's `nextafter`。如何做到这一点的细节已经在其他地方得到了很好的解释：在@ [Endophage](https://stackoverflow.com/users/432193/endophage)对这个问题的[回答](https://stackoverflow.com/a/10421042/270986)中，以及在[这个](https://stackoverflow.com/a/6163157/270986)对类似 StackOverflow 问题的回答中（这个问题作为副本被关闭）。

## 解决方案 4：通过`struct`模块进行位操作

如果您愿意（在实践中几乎总是安全的）假设 Python 使用 IEEE 754 浮点，那么编写一个 Python 函数来提供`nextafter`. 需要一点点小心才能正确处理所有角落案例。

IEEE 754 二进制浮点格式经过巧妙设计，因此从一个浮点数移动到“下一个”浮点数就像增加位表示一样简单。这适用于 range 中的任何数字`[0, infinity)`，正好跨越指数边界和次正规。要生成一个`nextUp`涵盖整个浮点范围的版本，您还需要处理负数、无穷大、nans 和一个涉及负零的特殊情况。`nextUp`以下是Python中 IEEE 754 函数的标准兼容版本。它涵盖了所有极端情况。

```
import math
import struct

def nextup(x):
    # NaNs and positive infinity map to themselves.
    if math.isnan(x) or (math.isinf(x) and x > 0):
        return x

    # 0.0 and -0.0 both map to the smallest +ve float.
    if x == 0.0:
        x = 0.0

    n = struct.unpack('<q', struct.pack('<d', x))[0]
    if n >= 0:
        n += 1
    else:
        n -= 1
    return struct.unpack('<d', struct.pack('<q', n))[0] 
```

`nextDown`然后的实现`nextAfter`看起来像这样。（请注意，这`nextAfter`不是 IEEE 754 指定的函数，因此对于 IEEE 特殊值应该发生什么有一些猜测。这里我遵循 Python`decimal.Decimal`类所基于的 IBM 十进制算术标准。）

```
def nextdown(x):
    return -nextup(-x)

def nextafter(x, y):
    # If either argument is a NaN, return that argument.
    # This matches the implementation in decimal.Decimal
    if math.isnan(x):
        return x
    if math.isnan(y):
        return y

    if y == x:
        return y
    elif y > x:
        return nextup(x)
    else:
        return nextdown(x) 
```

## （部分）解决方案5：浮点运算

如果`x`是一个积极的不太小的`float`，并且你愿意假设 IEEE 754 binary64 格式和语义，有一个非常简单的解决方案：下一个从`x`is向上浮动，下一个从is`x / (1 - 2**-53)`向下浮动。`x``x * (1 - 2**-53)`

更详细地说，假设以下所有条件都是正确的：

*   您不关心 IEEE 754 极端情况（零、无穷大、次正规、nans）
*   您不仅可以假设 IEEE 754 binary64 浮点*格式*，还可以假设 IEEE 754 binary64*语义*：即所有基本算术运算都根据当前舍入模式正确舍入
*   您可以进一步假设当前舍入模式是 IEEE 754 默认的round-ties-to-even 模式。

那么这个数量`1 - 2**-53`可以精确地表示为 a `float`，并且给定一个正的非正常 Python float `x`，`x / (1 - 2**-53)`将匹配`nextafter(x, inf)`。类似地，`x * (1 - 2**-53)`将匹配，除了在最小正正常值`nextafter(x, -inf)`的极端情况下， 。`x``2**-1022`

使用它时要注意一件事：表达式`2**-53`将从系统的数学库中调用您，并且期望正确舍入`pow`通常是不安全的。`pow`有许多更安全的方法来计算这个常数，其中之一是使用`float.fromhex`. 这是一个例子：

```
>>> d = float.fromhex('0x1.fffffffffffffp-1')  # 1 - 2**-53, safely
>>> d
0.9999999999999999
>>> x = 100.0
>>> x / d  # nextup(x), or nextafter(x, inf)
100.00000000000001
>>> x * d  # nextdown(x), or nextafter(x, -inf)
99.99999999999999 
```

这些技巧适用于正常的浮点数范围，包括像 2 的精确幂这样的尴尬情况。

对于一个证明的草图：为了显示与正法`x / d`线相匹配，我们可以按 2 的幂进行缩放而不影响正确性，因此在证明中我们可以假设 不失一般性。如果我们写出（被认为是实数，而不是浮点数）的*精确*数学值，则等于。结合不等式，我们可以得出结论，由于浮点数在区间内完全分开，足以保证最接近的浮点数是。的证明类似。`nextafter(x, inf)``x``0.5 <= x < 1.0``z`*`x / d``z - x``x * 2**-53 / (1 - 2**-53)``0.5 <= x <= 1 - 2**-53``2**-54 < z - x <= 2**-53``2**-53``[0.5, 1.0]``z``nextafter(x, inf)``x * d`*

 ** * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-02T20:19:23.543

**更新：**

原来这是一个重复的问题（在 google 中作为搜索“c++ nextafter python”的结果 #2 出现）：[Increment a python floating point value by the minimum possible amount](https://stackoverflow.com/questions/6063755/increment-a-python-floating-point-value-by-the-smallest-possible-amount)

公认的答案提供了一些可靠的解决方案。

**原始答案：**

当然这不是完美的解决方案，但使用 cython 只需几行就可以让您包装现有的 C++ 函数并在 Python 中使用它。我已经编译了下面的代码，它可以在我的 ubuntu 11.10 机器上运行。

首先，一个 .pyx 文件（我称为我的 nextafter.pyx）定义了您与 C++ 的接口：

```
cdef extern from "cmath":
    float nextafter(float start, float to)

def pynextafter(start, to):
    cdef float float_start = float(start)
    cdef float float_to = float(to)
    result = nextafter(start, to)
    return result 
```

然后 setup.py 定义了如何构建扩展：

```
from distutils.core import setup
from distutils.extension import Extension
from Cython.Distutils import build_ext 

ext_modules=[
    Extension("nextafter",
        ["nextafter.pyx"],
        libraries=[],
        library_dirs=[],
        include_dirs=[],
        language="c++",
    )
]

setup(
    name = "nextafter",
    cmdclass = {"build_ext": build_ext},
    ext_modules = ext_modules
) 
```

确保它们在同一目录中，然后使用`python setup.py build_ext --inplace`. 我希望你能看到如何将 nextafter 的其他变体添加到扩展中（对于双打等）。一旦建成，你应该有一个 nextafter.so。在同一目录中启动 python（或将 nextafter.so 放在您的路径上），您应该可以调用`from nextafter import pynextafter`.

享受！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-02T20:09:22.213

查看[http://docs.python.org/library/stdtypes.html#float.hex](http://docs.python.org/library/stdtypes.html#float.hex)

让我们试试这个不太了解 next after 的实现。

首先，我们需要从十六进制字符串中提取十六进制部分和指数：

```
def extract_parts(hex_val):
    if not hex_val.startswith('0x1.'):
        return None
    relevant_chars = hex_val[4:]
    if not len(relevant_chars) > 14 and relevant_chars[13] == 'p':
        return None
    hex_portion = int(relevant_chars[:13], 16)
    if relevant_chars[14] == '+':
        p_val = int(relevant_chars[15:])
    elif relevant_chars[14] == '-':
        p_val = -int(relevant_chars[15:])
    else:
        return None
    return (hex_portion, p_val) 
```

然后我们需要一种在正方向或负方向上递增的方法（我们假设十六进制字符串已经转换为整数`hex_portion`）：

```
def increment_hex(hex_portion, p_val, direction):
    if hex_portion == 0 and direction == -1:
        new_hex = 'f' * 13
        p_val -= 1
    elif hex_portion == int('f' * 13, 16) and direction == 1:
        new_hex = '0' * 13
        p_val += 1
    else:
        new_hex = hex(hex_portion + direction)[2:].rstrip('L').zfill(13)

    if len(new_hex) != 13:
        return None
    return format_hex(new_hex, p_val) 
```

我们需要一个辅助函数来重新格式化可接受的十六​​进制字符串和指数，我在上面使用过：

```
def format_hex(hex_as_str, p_val):
    sign = '-' if p_val < 0 else '+'
    return '0x1.%sp%s%d' % (hex_as_str, sign, p_val) 
```

最后，实施`nextafter`：

```
def nextafter(float_val):
    hex_equivalent = float_val.hex()
    hex_portion, p_val = extract_parts(hex_equivalent)

    direction = 1
    new_hex_equiv = increment_hex(hex_portion, p_val, direction)
    return float.fromhex(new_hex_equiv) 
```*

# java - 从文件创建二叉树

> ID：10420851
> 
> 赞同：0
> 
> 时间：2012-05-02T20:05:46.213
> 
> 标签：java, file-io, binary-tree

我试图在结束程序时将二叉树保存到文件中，并在再次运行程序时重建它。我的保存方法如下所示：

```
public static void save(TreeNode node, BufferedWriter out) {
    if (node == null) return;
    out.write(node.value()); // these nodes hold Strings
    out.newLine();
    save(node.left(), out);
    save(node.right(), out);
} 
```

我遇到问题的部分是重建过程，因此非常感谢您提供帮助。

编辑：众所周知，每个节点都有 2 个或 0 个子节点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T20:22:09.057

如果要将树保存在完全相同的分支结构中，则需要表示 null。

```
private static final String NULL_TREE_NODE = "";

public static void save(TreeNode node, BufferedWriter out) {
    if (node == null) {
        out.write(NULL_TREE_NODE); // null
        out.newLine();
        return;
    }
    assert !node.value().equals(NULL_TREE_NODE); // Reserver for us.
    assert !node.value().matches(".*[\r\n].*"); // Newline not allowed in value.
    out.write(node.value()); // these nodes hold Strings
    out.newLine();
    save(node.left(), out);
    save(node.right(), out);
}

public static TreeNode load(BufferedReader in) throws IOException {
    String value = in.readLine();
    if (value == null)
        throw new EOFException(); // Unexpected end of input.
    if (value.equals(NULL_TREE_NODE)) {
        return null;
    }
    TreeNode node = new TreeNode();
    node.value(value);
    node.left(load(in));
    node.right(load(in));
    return node;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T20:21:25.780

你在做什么是错误的。
例如，如果你有一棵树：

```
 A  
   B  C   
  D    F  
 E 
```

您正在保存到文件中：

```
A  
B  
D  
E  
C  
F 
```

以这种方式重建树是不可能的。例如，谁的孩子是谁`D`？`B`'s 还是`A`'s?

您必须更改算法以逐级保存，以便能够知道哪个节点具有哪个节点作为父节点

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-02T20:32:07.613

为什么不使用序列化？和 ObjectOutputStream ，ObjectInputStream 并通过单一方法加载整个树？

```
class MyTree implements Serializable {
...

    ObjectOutputStream out = null;
    try {
       out = new ObjectOutputStream(new FileOutputStream("xxx.dat"));
       out.writeObject(tree);
    }

... 
```

# javascript - 是否可以在 Javascript/Coffeescript 中的属性访问期间自动调用函数调用？

> ID：10420856
> 
> 赞同：0
> 
> 时间：2012-05-02T20:06:22.197
> 
> 标签：javascript, coffeescript

例如，这是我的“Hello”机器：

```
hello_machine = new HelloMachine; 
```

此时，如果有人试图访问 中的属性`hello_machine`，我希望发生以下情况。

```
hello_machine.fred;
hello_machine.greetings(); // output: Hi, fred!

hello_machine.george;
hello_machine.greetings(); // output: Hi, george! 
```

无论他们试图访问什么属性，我都希望这种情况自动发生。*我不想要任何硬编码的东西*。

这是我想调用的函数：

```
function set_buddy(name) {
  buddy = name;
} 
```

问候语如下：

```
function greetings() {
  alert('Hi, ' + buddy);
} 
```

显而易见的解决方案是**不这样做**。这是一种糟糕的做法，它改变了 Javascript 的基本行为方式。但是，我处于这种行为非常棒的位置。

我的直觉告诉我这是不可能的，而且互联网也无法说服我相信这个事实（我的脑袋告诉我，我问这个问题是个傻瓜）。但我知道 Javascript 是一个善变的情妇，如果这个功能存在，我也不会感到惊讶。因此，如果有人知道我可以实施任何黑客来获得这种行为，我一定会很感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T20:15:04.700

可悲的是，没有代理你不能这样做：http: [//soft.vub.ac.be/~tvcutsem/proxies/](http://soft.vub.ac.be/~tvcutsem/proxies/)

尚未得到广泛支持。差远了。

如果您希望调用的属性事先已知，您可以声明`Object.define_property`得到更广泛支持的 getter 方法。但是在不知道要提前调用的属性的情况下，没有代理就无法拦截它们。

# php - 获取 $_GET 值不起作用

> ID：10420860
> 
> 赞同：1
> 
> 时间：2012-05-02T20:06:44.107
> 
> 标签：php, javascript, get

```
<html>
 <head>
  <title>PHP Test</title>
<!-- Code within Head Tag -->
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript">
    $(window).load(function(){
        $("#loading").hide();       
    })
</script>
<!-- Code within Head Tag -->

<style type="text/css">
/* Document Styles */

#wrapper{
    width:800px;
    height:500px;
    margin:0 auto;
    padding:5px;
    border:1px solid #CCC;
    background:#CCC;
}
.desc{
    margin:0 auto;
    width:800px;
    text-align:left;
}

/* Loadign Div Style */
#loading{
    position:absolute;
    width:300px;
    top:0px;
    left:50%;
    margin-left:-150px;
    text-align:left;
    padding:7px 0 0 0;
    font:bold 11px Arial, Helvetica, sans-serif;
}
</style>

 </head>
 <body>

<!-- Loading Div -->
<div id="loading">
    Fetching Hotels, please wait..
    <img src="loading.gif" alt="loading.." />
</div>
<!-- Loading Div -->

<select name="month">
    <option value="1">January
    <option value="2">February
    <option value="3">March
    <option value="4">April
    <option value="5">May
    <option value="6">June
    <option value="7">July
    <option value="8">August
    <option value="9">September
    <option value="10">October
    <option value="11">November
    <option value="12">December
</select>
<select name="day">
    <option value="1">1
    <option value="2">2
    <option value="3">3
    <option value="4">4
    <option value="5">5
    <option value="6">6
    <option value="7">7
    <option value="8">8
    <option value="9">9
    <option value="10">10
    <option value="11">11
    <option value="12">12
    <option value="13">13
    <option value="14">14
    <option value="15">15
    <option value="16">16
    <option value="17">17
    <option value="18">18
    <option value="19">19
    <option value="20">20
    <option value="21">21
    <option value="22">22
    <option value="23">23
    <option value="24">24
    <option value="25">25
    <option value="26">26
    <option value="27">27
    <option value="28">28
    <option value="29">29
    <option value="30">30
    <option value="31">31
</select>
<select name="year">
    <option value="2012">2012
    <option value="2013">2013
    <option value="2014">2014
</select>

<?php
// specify url of xml file
$url = "http://xmlfeed.laterooms.com/index.aspx?aid=1000&rtype=4&kword=".$_GET['title']."&sdate=".$_GET['year']."-".$_GET['month']."-".$_GET['day']."&nights=2&orderby=price&sortorder=asc";
// get xml file contents
$xml = simplexml_load_file($url);

// loop begins
foreach($xml->hotel as $hotel)
{
// begin new paragraph
echo "<p>";
echo "<img src=".$hotel->images." height=100 width=100><br/>";
echo "<strong>Hotel Name:</strong> ".$hotel->hotel_name."<br/>";
echo "<strong>Hotel City:</strong> ".$hotel->hotel_city."<br/>";
echo "<strong>Hotel County:</strong> ".$hotel->hotel_county."<br/>";
echo "<strong>Prices From:</strong> &pound;".$hotel->prices_from."<br/>";
echo "<strong>Hotel Link:</strong><a href=".$hotel->hotel_link.">click here</a><br/>";
echo "<strong>Miles from ".$_GET['title']."</strong> ".$hotel->hotel_distance."<br/>";
echo "</p>";
// end paragraph
}
// loop ends

?>

<form method="GET"><input type=text name=title><input type=submit></form> 

 </body>
</html> 
```

删除日期选项时，脚本可以正常工作。我认为我遇到了多个“.$_GET 变量的问题。我已将名称添加到每个日期选项中但没有成功。我有点新，所以不要对我太苛刻

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T20:11:00.177

日期字段不在`<form>...</form>`标签内，因此它们不会被传递到 $_GET 从中收集数据的查询字符串中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T20:15:21.503

*月*、*日*和年选择与表格分开*。*这就是为什么在您提交表单时只传输*文本输入的原因。*

# css - 哪些环境支持 Wingdings？

> ID：10420867
> 
> 赞同：-4
> 
> 时间：2012-05-02T20:07:06.160
> 
> 标签：css, fonts, browser-support

我试图找出哪些环境不支持 Wingdings，因为我想使用该字体在我的网页上创建图标。我需要专门支持 IE8，但我也关心 mac。我似乎在任何地方都找不到指南...有人知道在哪里吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-02T20:12:53.987

Wingdings 字体是专有的，您不应该期望在 Windows 环境之外找到它们，尽管它们或某些仿制品也可能存在于其他地方。

不使用它们的主要原因是它们基于任意放置字形而不是使它们反映*字符*的模型。当使用不同的字体时，使用此类字体的文档将完全改变其内容。所以这是扩展角色曲目的完全错误的方式。并且保证不可靠。

# ruby-on-rails - Rails 应用程序中的 link_to 标记的路由/url 映射损坏

> ID：10420869
> 
> 赞同：1
> 
> 时间：2012-05-02T20:07:23.617
> 
> 标签：ruby-on-rails, rails-routing, url-mapping

我一直在努力让它工作 3 天。我似乎无法理解为什么它不起作用。当用户单击视图上的 link_to 标记时，它应该在控制器中执行 csv 函数。Instread 我得到一个例外。

* * *

以下是相关文件

控制器文件：（users_controller.rb）

```
def csv 

end 
```

（路线.rb）：

```
resources :users 
```

查看：（show.html.erb）

```
 <%= link_to 'Click HERE to open file', @user.image.url  %><br/><br/><br/>
 <%= label_tag(:q, "Parse CSV File:") %><br/>
 <%= link_to 'CSV', csv_user_path %>
 <% end %> 
```

当我点击上面的“link_to 'CSV'.. 标签时。它给了我这个例外：

```
 NameError in Users#show 
 Showing /Users/AM/Documents/RailsWS/bmc_mam/app/views/users/show.html.erb where line #47 raised:
Extracted source (around line #47):

44:         
45:  <%= label_tag(:q, "Parse CSV File:") %><br/>
46:  
47: <%= link_to 'CSV', csv_user_path %>
48:             
49:         
50: 
```

出现异常时浏览器URL如下：

```
http://localhost:3000/users/28 
```

它显然可以使用该功能，但 URL 映射/路由显然搞砸了。我想知道如何解决它.....在过去的几天里，我尝试了几种方法，似乎都没有奏效。这是我最接近使它像...一样工作的方法

在此先感谢您的帮助。

* * *

在@Gavin Miller 在下面发布答案后：

我将我的 routes.rb 文件更改为：

```
get 'csv' => 'users#csv'
resources :users 
```

现在我得到了这个例外：

```
NameError in Users#show

Showing /Users/AM/Documents/RailsWS/bmc_mam/app/views/users/show.html.erb where line #47    raised:

undefined local variable or method `csv_user_path' for #<#  <Class:0x00000104e7f6f8>:0x00000103a23c68>

Extracted source (around line #47):

44:         
45:             <%= label_tag(:q, "Parse CSV File:") %><br/>
46:             
47:             <%= link_to 'CSV', csv_user_path %>
48:             
49:         
50: 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T20:11:26.943

仅仅声明`resources :users`只会推断出 7 个标准的 RESTful 动作¹。如果您想`csv`被接受为路线，则必须明确定义它：

```
get 'csv' => 'controller#action' 
```

哪里`controller == users`和`action == csv`。

* * *

重新解决已编辑的问题...您需要将用户对象传递给`csv_user_path`函数：

```
<%= link_to 'CSV', csv_user_path(@user) %> 
```

* * *

看起来您还希望 url 与用户相关联，因此您可以将其声明为 a`member`以获取类似的 url：`http://localhost:3000/users/28/csv`对于该结果，您可以使用以下代码：

```
resources :users do
  member do
    get 'csv'
  end
end 
```

* * *

¹ RESTful 动作`index, new, create, show, edit, update, destroy`见[Rails 路由指南](http://guides.rubyonrails.org/routing.html#crud-verbs-and-actions)

# facebook - 脸书对话

> ID：10420879
> 
> 赞同：0
> 
> 时间：2012-05-02T20:08:07.320
> 
> 标签：facebook, dialog, popup

嗨，我想要 facebook 弹出对话框，请不要建议我花式框/灯箱或其他 3rd 方脚本来显示这种类型的 facebook 对话框，我需要一些官方的 facebook 脚本来调用弹出对话框。

我搜索了许多论坛和官方 facebook 文档，但我找不到任何解决方案。

弹出对话框示例的 URL [https://www.facebook.com/SAJJADALIOFFICIAL/app_375422485813449](https://www.facebook.com/SAJJADALIOFFICIAL/app_375422485813449)（单击黄色按钮和加入人群以查看对话框）

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T22:16:43.573

第一个对话框不是“官方对话框”，它是他们的对话框，它只是包装在一个 facebook 对话框中。

您可以使用[Fb.Dialog.create 方法](http://fbdevwiki.com/wiki/FB.Dialog)来显示带有您自己的内容的那种对话框。这不是官方文档的一部分，但它仍然有效。请记住，该内容的样式取决于您，例如在您发布的 url 中，如果您检查对话框，您会看到 css 不是来自 facebook cdn 服务器，而是来自*ustream.tv*。

单击*“加入 Facebook”*按钮后，会弹出一个“官方对话框”，即使用[FB.login 方法](http://developers.facebook.com/docs/reference/javascript/FB.login/)。

# asp.net - 使用 HTML5 的 ASP.NET 服务器端逻辑和客户端 2D 可视化

> ID：10420880
> 
> 赞同：0
> 
> 时间：2012-05-02T20:08:12.297
> 
> 标签：asp.net, json, html, client-side

我正在为一个即将启动的项目做一些研究，并希望对我在这里有哪些选择提供一些意见。

基本上，这或多或少应该是这样工作的：用户应该能够绘制某些形状，如多边形，并根据形状的不同属性（如位置等），在服务器端执行计算和结果被发送回客户端。

我有一个 .NET 类库，其中包含形状（圆形、多边形、线条等）的类表示以及所需的所有计算。所有这些都包含在一个项目类中并序列化到一个数据库中，因为用户应该能够登录、保存他的工作、在另一个时间点加载它并继续。

所有绘图都应在客户端使用 HTML5 Canvas 和 JavaScript 完成，业务逻辑（例如计算）在服务器端完成。我需要在这里解决的问题是客户端和服务器之间复杂（多态）对象的双向通信和共享，我想避免使用一个 .NET 形状类和一个 JavaScript 形状类，因为它会导致在冗余代码中。

一种可能的解决方案是将类序列化和反序列化为 JSON。然而，这些类包含相当多的数据（其中大部分对客户端来说并不有趣），并且意味着大量的数据来回传输。这可以使用 DTO 类来解决，但是我又回到了两个包含公共信息的类。

这里还有其他解决方案/技术吗？有没有人遇到过这类问题？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T06:55:32.363

鉴于您使用的是 ASP.NET（而不是 MVC），我认为将**DataContract** / **DataMember**属性添加到您现有的 .NET 类将是可行的方法，以及面向客户端的 WCF 服务。这样，您可以将现有类序列化为 JSON，但仍选择要序列化的属性。

如果你不熟悉数据契约/WCF/AJAX 的东西，这个网站有一些很好的起点： [http ://wcf.codeplex.com/](http://wcf.codeplex.com/)

# ruby-on-rails - 茧+acts_as_taggable_on 不更新

> ID：10420884
> 
> 赞同：2
> 
> 时间：2012-05-02T20:08:34.357
> 
> 标签：ruby-on-rails, acts-as-taggable-on, cocoon-gem

我正在尝试将 Cocoon 和acts_as_taggable_on 一起使用。

我有一个属于问题的答案。答案是已标记的，我使用 Cocoon 来处理这些问题。

## 答案模型

```
class Answer < ActiveRecord::Base
    belongs_to :question
    acts_as_taggable_on :tags
end 
```

## 问题模型

```
class Question < ActiveRecord::Base
    has_many :answers
    accepts_nested_attributes_for :answers, :allow_destroy => true
end 
```

答案标签在创建答案时很好，但是当我尝试更新它们时，它会失败（我不太确定在哪里）。这一切也都通过 ActiveAdmin 运行，我正在考虑只编写自定义控制器操作，但是当它应该正常工作时，这似乎有点矫枉过正。

## 问题表（erb）

```
<%= semantic_form_for [:admin, @question] do |f| %>
    <%= f.inputs "Question" do %>
      <%= f.input :text %>
    <% end %>
    <div id="answers">
        <%= f.semantic_fields_for :answers do |a| %>
            <%= render "answer_fields", :f => a %>
        <% end %>
        <%= link_to_add_association 'add answer', f, :answers %>
    </div>
    <%= f.buttons %>
<% end %> 
```

## 答案茧部分

```
<div class="nested-fields">
    <%= f.inputs do %>
        <%= f.input :text %>
        <%= f.label :tag_list %>
        <%= f.autocomplete_field :tag_list, autocomplete_tag_name_answers_path, :"data-delimiter" => ', ' %>
        <%= link_to_remove_association "remove answer", f %>
    <% end %>
</div> 
```

# objective-c - 为什么我的 UITableViewCell 没有被投射？

> ID：10420886
> 
> 赞同：1
> 
> 时间：2012-05-02T20:08:41.010
> 
> 标签：objective-c, ios, casting

在我的表格视图中，`cellForRowAtIndexPath`我有

```
MenuItemCell *cell = (MenuItemCell *)[[[NSBundle mainBundle] loadNibNamed:@"ResultCell" owner:nil options:nil] objectAtIndex:0]; 
```

在你告诉我不要使用 xib 之前：我有多个表格视图，其单元格需要看起来相同。使用 xib 似乎是实现这一目标的最佳方式。

有问题的 ResultCell xib 由`MenuItemCell`. `MenuItemCell`是 的另一个子类的子类`UITableViewCell`。

这是问题所在：我在单元分配行之后*直接*放了一个断点，这是我的 lldb 结果：

```
(lldb) po [cell class]
(id) $3 = 0x00b6b5fc UITableViewCell 
```

为什么我的单元格是 a`UITableViewCell`而不是 a `MenuItemCell`？（或者也许它是并且`po`不是正确的方法来解决这个问题？）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-02T20:11:53.543

您可能没有告诉 Xcode/Interface Builder 从 XIB 实例化 MenuItemCell，因此它使用默认实现，即 UITableViewCell。请注意，强制转换对象只会使编译器认为它是指定类的实例；它不会*神奇*地将对象转换为类的实例。（换句话说，它是一个 copmile-time 表达式，而不是一个运行时表达式。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T20:21:31.673

这是有关如何设置 NIB 文件的所有者类的屏幕截图

![在此处输入图像描述](../Images/ec6065b2602b7981e8841458a47013dc.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-02T20:16:35.803

您始终可以使用 isKindOfClass 方法检查对象是否属于某个类。

[cell isKindOfClass:[MenuItemCell 类]]

还有，就像H2CO3说的。您可能忘记将所有者类设置为 MenuItemCell。

# php - HTML“链接href”如何从不同的文件夹调用同一个文件？

> ID：10420888
> 
> 赞同：2
> 
> 时间：2012-05-02T20:08:52.227
> 
> 标签：php, html, directory

这是我的根文件夹：

```
index.php
stylesheets(folder) --->main.css
includes(folder)    --->header.php
folder1  (folder)           --->page1.php 
```

这是“header.php”的链接部分（来自包含文件夹）：

```
<link href="stylesheets/main.css" rel="stylesheet" type="text/css" /> 
```

这是 index.php 的一部分：

```
<?php include "includes/header.php"; ?> 
```

这是 page1.php 的一部分（来自 folder1）：

```
<?php include "../includes/header.php"; ?> 
```

问题是，当我打开 index.php 时一切正常。至于/folder1/page1.php，它看不到样式，而是看header.php 的内容。也就是说，它没有带main.css。很可能，因为有`link href="stylesheets/main.css" rel="stylesheet" type="text/css"`任何帮助吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-02T20:12:24.197

因为您从多个级别访问文件，所以您应该使用绝对路径。

所以要么`href="http://domain.com/stylesheets/main.css"`或`href="/stylesheets/main.css"`

但这仅在您将其置于域的顶层时才有效（第二个，也是我推荐的一个）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-02T20:19:57.917

一个健壮的解决方案是使用绝对链接。一种方便的方法是使用中央配置文件。例如，创建一个文件`config.php`，包含

```
<?php

    define('SITE_ROOT', 'http://www.yourdomain.com/');

?> 
```

并将此文件包含在每个 PHP 文件 ( `require_once('config.php');`) 中。然后你可以写

```
<link href="<?php echo SITE_ROOT; ?>stylesheets/main.css" rel="stylesheet" type="text/css" /> 
```

这将始终解析为您要引用的 URL。当您站点的域发生更改时，中央配置将允许您轻松更改它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-02T20:10:39.553

我对您的文件夹结构感到困惑，但我理解正确。

尝试

```
href="../stylesheets/main.css" 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-02T20:23:14.997

有时简单的方法是最好的方法：使用绝对路径！

# .net - 如何检测和解决错误编码的 Varchar 数据？

> ID：10420889
> 
> 赞同：3
> 
> 时间：2012-05-02T20:08:59.933
> 
> 标签：.net, sql-server, encoding, utf-8

我的公司有一个建立在第三方网络邮件系统之上的 CRM 产品。我们使用他们的底层数据库，并用我们自己的其他数据库对其进行了扩展。除了使用我们的产品，客户还可以直接登录网络邮件系统。

网络邮件数据库采用 SQL_Latin1_General_CP1_CI_AS 编码，联系人姓名存储在 varchar 列中，而不是 nvarchar。

我们的产品和 webmail 产品都提供 Content-Type: text/html charset=utf-8 的页面

如果客户在 webmail（第 3 方系统）中创建一个名字为“Céline”的联系人，它最终会以“Céline”的形式存储在数据库中。这是因为 webmail 似乎首先将数据从 utf-8 转换为 latin-1，然后再将其存储到数据库中。utf-8 字符 'é' 存储为两个字节，在 latin-1 中被解释为两个字符：“Ã©”

但是，当数据被检索并显示在 webmail 中时，它会正确显示为“Céline”

问题是：当从我们的 CRM 系统读取/写入联系人时，如果您将名字设置为“Céline”，它将被存储为“Céline”，而不是首先转换为 latin-1 'Céline'

反之亦然，如果您在 webmail 中创建 Céline，它会在我们的 CRM 产品中显示为 Céline，因为它没有从 latin-1 转换为 utf-8

我们的产品是法国国际化的，并且已经生产了好几个月，所以系统中有相当多的数据，两种编码方式。

我可以使用以下方法从 latin-1 转换为 utf-8：

```
var bytes = Encoding.GetEncoding("iso-8859-1").GetBytes(Convert.ToString(obj))
string fix2 = Encoding.UTF8.GetString(bytes).Trim(); //from iso-8859-1 (latin-1) to utf-8 
```

但这仅在数据在存储之前正确转换为 latin-1 时才有效。所以我真正需要的是一种方法来确定记录中的数据是 utf-8 编码的字符串还是 latin-1 编码的字符串。

或者，向前迈进，我需要一种方法来模仿 webmail 正在做什么，并使所有对数据库的写入操作首先从 utf-8 转换为 latin-1，所有读取操作从 latin-1 转换为 utf-8。

有任何想法吗？如果您需要更多信息/说明，请告诉我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T20:31:43.510

一些澄清。在字符编码之间转换字节流（这将修改字节）和使用不同的字符编码解释字节流（这不会修改字节，只是以不同的方式显示它们）之间存在差异。您的 webmail 应用程序不会`UTF-8`在传输到数据库的过程中转换字符，而是（错误地）重新解释字节流。

> 是否可以检测到错误编码的字符？

理论上，没有。解释为`ISO-8859-1`完全有效的字符。在实践中，您可以手动搜索不常见的字符，例如示例中的 Ã，并能够找到不一致之处。

> 我需要一种方法来模仿 webmail 正在做什么

要重新解释 C# 中的字符串 from`UTF-8`到`ISO-8859-1`您可以使用以下行（请记住在从数据库返回的路上执行相反的操作）

```
Encoding.GetEncoding("iso-8859-1").GetString(Encoding.UTF8.getBytes("Some text")) 
```

# c# - 来自串口的数据转换

> ID：10420891
> 
> 赞同：0
> 
> 时间：2012-05-02T20:09:05.000
> 
> 标签：c#, serial-port

我正在开发一个硬件接口项目，并使用 c sharp 在 .net 上构建它。在这个应用程序中，我正在从超级终端上的串行端口接收数据。数据正在像魅力一样接收。但问题是它正在给我一个无法读取的数据如下

来自超级终端的数据是

```
D1U1201250000000085865000000S004100417001130034200820202710033000404102000004100759000080000200031004740010500097002250 
```

其含义完整形式如下

```
Report of Sample no# 85865
WBC = 4.1x103/µL
RBC = 4.17 x106/µL
HGB = 11.3 g/dL
HCT = 34.2 %
MCV = -82.0 fL
MCH = 27.1pg
MCHC = 33.0 g/dL
PLT = + 404 x103/µL

LYM % = 20.0%
MXD % = 4.1%
NEUT % = 75.9%
LYM# 0.8 x103/µL
MXD # 0.2 x103/µL
NEUT # 3.1 x103/µL
RDW = 47.4 fL
PWD = 10.5 fL
MPV = 9.7 fL
P-LCR 22.5 % 
```

我想问如何将第一种形式的数据转换为 seconf 可读形式。谢谢任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T20:23:26.907

看起来像固定大小的格式数字连接在一起。使用[String.Substring](http://msdn.microsoft.com/en-us/library/system.string.substring%28v=vs.100%29.aspx)切割成碎片，然后根据需要转换为 int 和缩放。

如下所示，假设位置 20“022030”的值需要转换为 22.030：

```
var fragment = result.substring(20, 6);
var intValue = int.Parse(fragment);
var outputValue = intValue *0.001; 
```

# android - 试图在 Eclipse 中将 Tika 1.0 移植到 Android：引用 pom.xml 的错误消息

> ID：10420896
> 
> 赞同：0
> 
> 时间：2012-05-02T20:09:23.793
> 
> 标签：android, eclipse, apache-tika

我正在尝试将 Tika 1.0 核心和解析器源代码移植到 Eclipse 中的 Android 并遇到问题。这是我所做的：

*   下载的 Tika 1.0 源码
*   使用 Maven 插件在 Eclipse 中打开核心和解析器子项目
*   将两者都导出到各自的 JAR 中
*   将 JAR 文件复制到我想用来在 4.0 设备上测试 tika 功能的“包装器”Android 项目的 libs 文件夹中
*   清理并重建项目

当我尝试在设备上启动它时，出现此错误：

```
Error generating final archive: Found duplicate file for APK: pom.xml
Origin 1: C:\...\libs\tika-core.jar
Origin 2: C:\...\libs\tika-parsers.jar 
```

这两个 JAR 确实包含 pom.xml 文件，但它们是不同的。

我的目标是能够在设备上单步执行 tika 的代码。那么我需要做什么才能在 Android 上启动？

谢谢

# database - 数据源德比 - 连接被拒绝

> ID：10420902
> 
> 赞同：11
> 
> 时间：2012-05-02T20:09:44.363
> 
> 标签：database, websphere, datasource, derby

我正在尝试将数据库与 java 项目连接起来。在阅读了一些教程和课程支持后，我了解到我需要在 Admin Console 下创建一个新的数据源。

所以，我已经登录到管理控制台，然后导航到资源 -> JDBC -> 数据源 -> 新建；填写字段，当我测试连接时，我得到的错误是这个：

> 消息 节点 RO2CVG6CNode01 的服务器 server1 上的数据源 MyDB 的测试连接操作失败，但出现以下异常：java.sql.SQLNonTransientException：java.net.ConnectException：连接到端口 1527 上的服务器 localhost 时出错，并显示消息连接被拒绝：connect.DSRA0010E： SQL 状态 = 08001，错误代码 = 40,000。查看 JVM 日志以获取更多详细信息。

我不知道问题出在哪里。也许使用数据库名称： jdbc:derby:D:\MyDB ？任何人都可以帮助我吗？[在本教程](http://www.myeclipseide.com/documentation/quickstarts/blueedition/blue_websphere_data_source/)之后，我还尝试仅使用 MyDB 。
但它仍然不起作用。

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-08-29T11:26:07.107

是否运行了 Derby 服务器？

很有可能您正在尝试连接到数据库而没有在端口 1527 上运行的实际服务器。

您可以尝试使用命令行 / linux shell 建立连接 - 取决于您使用的操作系统。

如果你喜欢，试试这个：

1.  打开命令提示符
2.  导航到您的 Derby 安装目录
3.  导航到“bin”目录（注意：如果存在，请进一步导航到 networkServer 文件夹）
4.  键入“startNetworkServer”并按 Enter

您应该收到一条消息，内容如下：

2012-08-29 10:57:16.559 GMT：使用基本服务器安全策略安装的安全管理器。2012-08-29 10:57:16.809 GMT：Apache Derby 网络服务器 - 10.6.2.1 - (999685) 已启动并准备好接受端口 1527 上的连接

如果您不这样做，那么也许您可以检查您的防火墙（请在此处发表评论：）

如果这样做，那么您可以使用以下方法测试您的连接：

1.  打开另一个命令提示符
2.  导航到您的 Derby 安装目录
3.  导航到“bin”目录
4.  键入“ij”并按 Enter
5.  键入以下内容：

    ```
     connect 'jdbc:derby://localhost:1527/MyDB'; 
    ```

    ...然后按 Enter

如果一切顺利，您将得到“ij>”提示。

从这里您可以输入一些 SQL 查询来进一步测试连接。

如果不是，那么可能还有其他一些问题。

如果您是第一次在 derby 中创建数据库，那么您必须使用它来代替上面的第 5 步：

```
 connect 'jdbc:derby://localhost:1527/MyDB;create=true'; 
```

...然后按 Enter

希望在做完这些事情之后，你会得到一个连接。在最后一个实例中，您至少将获得一个名为 MyDB 的新数据库，该数据库在 Derby Server 上处于活动状态。如果您的原始数据库 (MyDB) 相对较小，那么为您需要的任何目的再次重建它可能会更快。

除此之外，如果您确实建立了连接，那么您可以尝试用于数据库开发的其他工具，因为您至少消除了连接是问题的可能性。

请务必检查从步骤 4 报告的端口号。这通常是 1527。如果不是，则在来自德比。

希望这会有所帮助，祝你好运:)

韦恩·里斯特

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-06T18:53:21.607

您是否定义了身份验证别名？似乎与下面链接中的问题相同；

[http://www.webspheretools.com/sites/webspheretools.nsf/docs/Error%20when%20testing%20a%20JDBC%20connection%20to%20Derby](http://www.webspheretools.com/sites/webspheretools.nsf/docs/Error%20when%20testing%20a%20JDBC%20connection%20to%20Derby)

此外，如果您检查 SystemOut.log，您可能会看到一条错误消息，告诉您未设置哪个属性；

{"08001","未设置必需的 Derby 数据源属性 {0}。","40000"},

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-02-01T19:05:47.110

[在这里](http://db.apache.org/derby/papers/DerbyTut/ns_intro.html#ns_config_env)查看 apache derby 文档.....

配置环境以使用 Derby Network Client JDBC 驱动程序

要使用`Derby Network Client JDBC`驱动程序，请将您的设置`CLASSPATH`为包含下面列出的 jar 文件：

*   derbyclient.jar：包含 JDBC 驱动程序
*   derbytools.jar：可选，提供ij工具

您可以`CLASSPATH`使用如下所示的命令显式设置您的：Windows：

```
C:\> set CLASSPATH=%DERBY_INSTALL%\lib\derbyclient.jar;%DERBY_INSTALL%\lib\derbytools.jar;. 
```

UNIX：

```
$ export CLASSPATH=$DERBY_INSTALL/lib/derbyclient.jar:$DERBY_INSTALL/lib/derbytools.jar:. 
```

然后在提示符下输入 ij 命令后尝试创建这样的数据库.....ij> connect

```
jdbc:derby://localhost:1527/Chapter01DB;create=true; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-01-05T20:00:24.977

1.  将 derby 下载到以下位置：

    ```
    /home/ <user_directory> /apache-derby/ 
    ```

2.  设置类路径/路径如下：

    ```
    export DERBY_HOME=/home/<user_directory>/magister-database

    export DERBY_INSTALL=/home/<user_directory>/apache-derby/db-derby-10.11.1.1-bin

    export CLASSPATH=$DERBY_INSTALL/lib/derbyclient.jar:$DERBY_INSTALL/lib/derbytools.jar:$CLASSPATH 
    ```

3.  启动网络服务器：

    ```
    /home/<user_directory>/apache-derby/db-derby-10.11.1.1-bin/bin/startNetworkServer 
    ```

4.  运行 derby 命令行如下：

    ```
    java org.apache.derby.tools.ij

    connect 'jdbc:derby://localhost:1527//home/<user_directory>/<database-directory>/<database-name>';

    show tables;

    disconnect;

    exit; 
    ```

# python - 使用 Mako 的语法错误

> ID：10420905
> 
> 赞同：0
> 
> 时间：2012-05-02T20:09:55.510
> 
> 标签：python, mako

我是 Python 和 Mako 的新手，我正在学习使用它。我已经获得了它的 0.7.0 版本，并尝试在解释器中导入它，但出现以下错误。不知道从这里去哪里。

```
>>> from mako.template import Template
Traceback (most recent call last):
 File "<stdin>", line 1, in ?
 File "/home/kumaram/python/Mako-0.7.0/mako/template.py", line 295
 @util.memoized_property
 ^ 
```

SyntaxError：无效的语法

有谁知道为什么会出现这种情况以及我能做些什么来摆脱它。顺便说一句，我在 $PYTHONPATH 上也有 mako。

谢谢，克

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T20:18:19.933

好像你有一个早于装饰器的 Python 版本，你需要升级 Python。

# linq - LinqToExcel：excel 列中的不同值

> ID：10420911
> 
> 赞同：2
> 
> 时间：2012-05-02T20:10:22.280
> 
> 标签：linq, c#-4.0, interop, excel-interop, linq-to-excel

这对各位大师来说可能是一件非常简单的事情，但我不熟悉 C#4 和 INTEROP。因此，我很难过。这是我的问题。我有一个包含重复数据的 excel 列，我想将其修剪为唯一值。数据如下所示：

```
ColA    ColB
10      Adam
12      Jane
14      Adam
18      Adam
20      Eve 
```

所以，最后我只想要 ColB 的唯一名称：

```
Adam
Jane
Eve 
```

我知道我可以通过将所有这些值放入一个 List 中，然后向其中添加 Distinct 功能来做到这一点。但我认为我做错了什么。无论如何，这是我的程序：

```
Application XLApp = new Microsoft.Office.Interop.Excel.Application();
var XLBook = XLApp.Workbooks.Open(@"c:\temp\Test.xls", ReadOnly: false);
// Grab the 1st sheet
var XLSheet = (Microsoft.Office.Interop.Excel.Worksheet)XLBook.Worksheets.get_Item(1);

XLApp.Visible = true;
// I think I need help with the following lines
IEnumerable<string> myCol = XLApp.Range["B2", XLApp.Range["B2"].End[XlDirection.xlDown]].Select();
myCol.ToList().Distinct();

XLBook.Close(false, System.Reflection.Missing.Value, System.Reflection.Missing.Value);
((_Application)XLApp).Quit();
System.Runtime.InteropServices.Marshal.ReleaseComObject(XLApp); 
```

如何使用 C#4 针对 Excel 执行此操作？

提前致谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-02T20:56:06.337

您可以使用[LinqToExcel](http://code.google.com/p/linqtoexcel/)轻松获取列中的不同值

```
var excel = new ExcelQueryFactory("worksheetFileName");
var distinctNames = (from row in excel.WorkSheet()
                     select row["ColB"]).Distinct() 
```

编辑：

要`Distinct`在 LinqToExcel 中使用，您必须使用与行数据对应的类。

```
public class WorksheetRow
{
    public string ColA { get; set; }
    public string ColB { get; set; }
}

var excel = new ExcelQueryFactory("worksheetFileName");
var distinctNames = (from row in excel.WorkSheet<WorksheetRow>()
                     select row.ColB).Distinct() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-02-06T16:32:35.460

LinqToExcel 内置 distinct() 支持单个属性。我在下面使用来区分多个列：

1.  将它移到内存中，.AsEnumerable()。
2.  使用结构（c#），而不是类。struct 是值类型，class 不是。

* * *

```
public struct RowStruct  
{
    public string C1 {get; set;}
    public string C2 {get; set;}
    public int C3 {get; set;}
}

public class RowClass // class is NOT distinct friendly
{
    public string C1 {get; set;}
    public string C2 {get; set;}
    public int C3 {get; set;}
} 
```

* * *

```
void Main()
{
    var excel = new ExcelQueryFactory(@"C:\Temp\a.xlsx");
    var qs = from c in excel.Worksheet<RowStruct>("Sheet1") select c;
    Console.WriteLine ("struct distinct is:{0}", 
         qs.AsEnumerable().Distinct().Count());

    var qc = from c in excel.Worksheet<RowClass>("Sheet1") select c;
    Console.WriteLine ("class distinct is:{0}", 
         qc.AsEnumerable().Distinct().Count());
} 
```

我的 a.xlsx 有重复数据，这是我的结果：

```
struct distinct is:235
class distinct is:329 
```

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-12-04T20:37:14.583

在 Excel 中，选择列，转到.. 数据 > 删除重复项

![在此处输入图像描述](../Images/8bb796623eacc635c04c595946431b47.png)

这为您留下了独特的价值。

# drupal - Drupal 中的滑块翻译

> ID：10420912
> 
> 赞同：0
> 
> 时间：2012-05-02T20:10:26.937
> 
> 标签：drupal, content-management-system, slider, translation, translate

这可能是一个愚蠢的问题......但我最近被雇用来管理一个活动的网站，而制作该网站的人不再可以让我提问......

我以前从未使用过 Drupal，我在做一些事情时遇到了一些麻烦......

他们问我的最后一件事是翻译整个网站...好的...完成...

但是我的首页上有一个视图是一个滑块，我无法让它正常工作......

当我使用语言 1 时，它显示正确，当我使用语言 2 时，它显示相同的内容……当我单击时，我看到了语言 1 中的文章……

我想在视图中添加一个过滤器..类型翻译内容：语言，但它开始在我的滑块上放置一些不同的图像，而且，它混合它们......有些是语言 1，有些是语言 2

奇怪的内容管理系统

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T05:35:09.317

有时只是将图像链接到它的节点并不能让你到达你需要的地方。尝试为 Drupal 路径添加一个字段（或者如果您不使用路径，则添加节点 ID）。从显示中排除该字段，然后将其重新排列到图像字段上方（如果不重新排列，您将无法将其用作标记。）

然后，在您的图像字段上，选择“重新编写此字段的输出” - “将此字段输出为链接”（措辞可能会根据您使用的版本略有不同）使用替换模式让您获得所需url，使用所需的语言。

例如：

en/node/[nid]

其中“en”是所需语言的语言前缀（在本例中为英语），[nid] 是节点 ID 的替换模式。（同样，必须是图像字段上方的某个字段。）这将强制视图使用正确的语言链接到图像字段所属的任何节点。

编辑添加：确保您取消选择“将此字段链接到其内容”，否则它将覆盖您的自定义重写并且什么都不会改变。

希望有帮助。如果您仍然感到困惑，请告诉我您正在使用的 Drupal 的主要版本（5、6 或 7）以及视图的版本（2 或 3）。我可以更具体一点。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2014-01-29T18:19:19.333

我不知道使用了哪个模块用于内容滑块，但如果您使用 Content Glider，那么这个补丁可能会有所帮助，它对我有用：

```
diff --git a/content_glider.module b/content_glider.module
index 6e1eacd..e0c9397 100755
--- a/content_glider.module
+++ b/content_glider.module
@@ -257,7 +257,8 @@ function content_glider_block_info() {

 function content_glider_generate_block($delta) {

-  global $base_url;    
+  global $base_url;
+  global $language;    
   $ajax_base_path = $base_url;

   $efects = array('updown', 'downup', 'leftright', 'rightleft');
@@ -290,6 +291,7 @@ function content_glider_generate_block($delta) {
           ->fields('n', array('nid'))
           ->condition('type', $content_type,'IN')
           ->range(0, $content_glider_count)
+          ->condition('language', $language->language)
           ->orderBy('n.created' , $content_glider_order_type_val) ;
         $result = $query->execute(); 
```

# android - Android - 使用文本输入实现自定义布局

> ID：10420916
> 
> 赞同：0
> 
> 时间：2012-05-02T20:10:47.673
> 
> 标签：android, layout, input, custom-controls

**编辑：**由于最初的问题有点模糊，这是我正在拍摄的用例：

我正在尝试使用这些约束制作一个自定义的 pin 条目小部件......

*   每个角色都有自己的“盒子”
*   大头针的长度（盒子的数量）可以使用 xml 属性进行配置——这部分我已经完成了
*   一个框被我拥有的图像资源“填充”，而不是 Android 默认使用的字符或项目符号
*   单个框不应该是可聚焦的；相反，整个小部件是可聚焦的

为了满足这些设计约束，我正在`LinearLayout`根据我定义的引脚长度属性以编程方式扩展和添加子视图。不用说，我需要保留用户输入的任何内容。我的想法是在内部使用一个私有`EditText`对象，将关键事件转发给它，并通过`TextWatcher`在`EditText`.

有没有人做过这样的事情？有人对如何进行有提示吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-12T14:01:38.697

可能与[自定义 Android PIN 码输入小部件有关](https://stackoverflow.com/questions/10528592/custom-android-pin-code-entry-widget)

尽管目前还没有完整的答案，但它可能会为任何人指明正确的方向。

# java - 大整数阶乘组合的操作

> ID：10420918
> 
> 赞同：3
> 
> 时间：2012-05-02T20:10:49.213
> 
> 标签：java, biginteger

我正在尝试`BigInteger`进行大量运算，但是当我计算 CnR 和阶乘的组合时，我发现*乘积运算非常慢。*

```
BigInteger n = BigInteger.ONE;
for (int i=1; i<=20; i++) {
    n = n.multiply(BigInteger.valueOf(i));
} 
```

我正在寻找一个最好的算法，包括整数数组。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T20:15:51.793

打印到控制台是代码中最慢的部分。尽量不要在每次迭代中打印。它将使您的代码更快（！）。其余的看起来不错。您可以使用原始类型，这将比真正的类快一点，但不会太多。

# php - PHPUnit 强制我在断言实例之前需要类

> ID：10420925
> 
> 赞同：8
> 
> 时间：2012-05-02T20:11:17.140
> 
> 标签：php, phpunit

我正在测试一个返回另一个类的实例的对象。在内部，该类调用`require_once`. 但是，当我尝试检查返回的对象是否属于该类型时，我收到以下消息：

```
InvalidArgumentException: Argument #1 of PHPUnit_Framework_Assert::assertInstanceOf() must be a class or interface name 
```

`require_once`一旦我在调用之前再次在测试中调用，此消息就会消失`assertInstanceOf`。这似乎不对。似乎 PHPUnit 应该足够聪明，可以知道该类已经加载，所以我不必再次加载它。我想错了吗？我的 PHPUnit 配置错误吗？有没有办法避免在我的测试中再次要求这个类？

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2013-04-17T02:18:03.667

请务必使用完整的命名空间：

```
$this->assertInstanceOf('\Namespace\Subnamespace\MyClass', $obj); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-03T05:34:54.303

您的单位可能与此类似：

```
$this->assertInstanceOf('MyOtherClass', 
    $this->object->someFunctionReturnsOtherClass()); 
```

这没关系，除了这里，注意：phpunit 方法在你的对象之前被调用。既然你说过，你的对象已经在内部做了一个 require_once 意味着直到你的方法被调用，'MyOtherClass' 仍然是一个未定义的类。这正是发生的事情。Phpunit 函数准备使用“MyOtherClass”进行检查，发现它未定义！

对象自己的 require_once 甚至从未被调用过。这就是为什么你必须自己打电话。如果你使用类似的语句`true == $returnObject instanceOf MyOtherClass`，它会返回相同的错误，因为在解析 PHP 时找不到类定义。

# python - [python]使用数字1-10编写数据文件

> ID：10420931
> 
> 赞同：0
> 
> 时间：2012-05-02T20:11:41.593
> 
> 标签：python, python-2.7

```
dataFile = open("temp1", "w")
for line in range(11):
    dataFile.write(line)
dataFile.close() 
```

到目前为止，这是我所拥有的，但是当我运行此代码时，我不断收到错误消息。

```
Traceback (most recent call last):
      File "datafile print liines.py", line 3, in <module>
        dataFile.write(line)
    TypeError: expected a character buffer object
    >Exit code: 1 
```

我希望这段代码使用数字 1-10 编写数据文件，所以我想使用 for 循环和范围来做到这一点，但我不知道如何将它写入文件，每行一个数字。

我知道python有一个'w'命令可以创建一个打开文件。

谁能给我一些建议，说明为什么我会收到此错误以及如何将其写入数据文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T20:14:46.167

您必须将字符串写入文件而不是整数。

`range(11)`返回整数列表：

```
In [1]: range(11)
Out[1]: [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10] 
```

尝试将第 3 行更改为以下内容：

```
dataFile.write(str(line)) 
```

您可以添加一个换行符，以便文件中的结果文本看起来更具可读性：

```
dataFile.write('%s\n' % line)) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T20:15:41.287

尝试这个

```
dataFile = open("temp1", "w")
for line in range(11):
    dataFile.write("%s\n" % line)
dataFile.close() 
```

它会在其中生成一个文件

```
0
1
2
3
4
5 
6
7
8
9
10 
```

您只能使用字符串作为参数`write`

# c++ - G ++获取静态变量的破坏顺序错误

> ID：10420932
> 
> 赞同：10
> 
> 时间：2012-05-02T20:11:50.213
> 
> 标签：c++, templates, static

我有以下类尝试实现通用单例。

```
struct BaseObject
{
   virtual ~BaseObject() {}
};
class _helper
{
private:
    template<typename T> friend class Singleton;
    set<BaseObject*> _s;
    static _helper& _get()
    {
        static _helper t;
        return t;
    }
    _helper()
    {
        cout<<" _helper ctor"<<endl;
    }
    ~_helper()
    {
        cout<<" _helper dtor"<<endl;
        //assert(_s.empty());
    }
};

// Singleton<foo>::Instance() returns a unique instance of foo
template <typename T>
class Singleton : virtual private T
{
public:
    static T& Instance()
    {
        static Singleton<T> _T;
        return _T;
    } 

private:
    Singleton()
    {
        cout<<"inserting into helper "<<typeid(T).name()<<" ptr "<<this<<endl;
        assert(!_helper::_get()._s.count(this));
        _helper::_get()._s.insert(this);
    }
    ~Singleton()
    {
        cout<<"erasing from helper "<<typeid(T).name()<<" ptr "<<this<<endl;
        assert(_helper::_get()._s.count(this));
        _helper::_get()._s.erase(this);
    }
}; 
```

现在，如果我调用`Singleton< bar>::Instance()`后跟`Singleton< foo>::Instance()`，我应该会看到以下输出：

```
 inserting into helper 3bar ptr 0x509630  
 _helper ctor  
 inserting into helper 3foo ptr 0x509588  
 erasing from helper 3foo ptr 0x509588  
 erasing from helper 3bar ptr 0x509630  
 _helper dtor 
```

但是在某些情况下，我会看到以下内容：

```
 inserting into helper 3bar ptr 0x509630  
 _helper ctor  
 inserting into helper 3foo ptr 0x509588  
 erasing from helper 3bar ptr 0x509630  
 _helper dtor  
 erasing from helper 3foo ptr 0x509588 
```

请注意，在第二种情况下，`bar`并`foo`以与构造相同的顺序被破坏。`foo`当和`bar`单例在共享库（.so）中实例化为静态引用时，这似乎会发生：

```
static bar& b = Singleton<bar>::Instance();   
static foo& f = Singleton<foo>::Instance(); 
```

任何想法为什么会这样做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T21:07:12.450

如果单例和助手位于不同的翻译单元或不同的共享对象中，就会发生这种情况。请记住，很难预测模板实例最终会出现在哪个翻译单元中。还要记住，每个共享对象都可以获得自己的 say 实例`Singleton<foo>::_T`。所以你有某种每个共享对象的单例（不是很有用恕我直言）。

请注意，您的助手在从其中删除最后一个对象**之前被销毁。**这将导致程序在退出时崩溃。是的，这件事确实发生在我身上。您将需要在 _helper 类中实现一个对象计数器，以便在至少注册一个对象之前它不会被销毁。或者，分配堆上的所有单例，并让助手在其生命周期结束时销毁它们。

**如果两个静态对象属于同一个动态库，那么**这种破坏顺序反转可能不会发生。它绝对可以而且确实会发生。[这里](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2007/n2407.html)建议程序员不要跨动态库边界导出静态对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T08:51:31.523

`static _helper t;`据我所知，定义了一个地址。

```
static _helper& _get()
{
    static _helper t;
    return t;
} 
```

但看起来你正试图将它用于 2 个不同的对象。

无论如何，我从未见过用于单例的模板。在您的情况下，您似乎正试图摧毁一个单身人士。这也是我不记得以前见过的。单例通常创建一次并一直存在直到您离开程序（并且在您离开时仍然分配。）

否则，您可能想查看共享指针或侵入式引用计数对象？

# python - Python 列表理解列表 - 获取最大值的好方法

> ID：10420934
> 
> 赞同：0
> 
> 时间：2012-05-02T20:11:53.493
> 
> 标签：python, vector, numpy, list-comprehension

我正在编写一个函数，它应该首先找出输入向量所在的空间维度。向量的方向是未知的，因此它可以是 1*ndim 或 ndim*1。我想找一个漂亮的班轮这样做。我试过这个，但这不是正确的语法：

```
 ndim = [max(n,p) for n,p in (n,p) = np.shape(X) if min(n,p) = 1] 
```

顺便说一句，我也想快速检查一下小维度是否有效为1。

任何的想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T20:17:30.560

我认为以下内容可以解决您表达中的错误：

```
ndim = [max(n,p) for n,p in [np.shape(X)] if min(n,p) == 1] 
```

要快速检查最小维度是否为`1`，请使用：

```
min(*np.shape(x)) == 1 
```

# javascript - 注释掉甚至删除的代码在应用程序中被调用

> ID：10420938
> 
> 赞同：1
> 
> 时间：2012-05-02T20:12:16.687
> 
> 标签：javascript, asp.net, debugging, webforms

这是我见过的最奇怪的问题之一。我有一个包含许多 JavaScript 方法的 js 文件。

我注释掉了几行代码，但由于某种原因，当我调试时，它会遍历这些注释掉的行并执行它们。我什至删除了它们，但它们仍然执行。

我删除了浏览器缓存，重新启动我的机器完成了所有操作，但仍然存在同样的问题。

它是一个 VS 2008 ASP.NET Webforms 应用程序。

# html - 有没有办法设置边界线高度？

> ID：10420940
> 
> 赞同：3
> 
> 时间：2012-05-02T20:12:28.497
> 
> 标签：html, css, border

您可以使用border-right-width 属性控制边框的宽度。有没有办法像边框右高度一样设置它的高度？

例如：

首页|关于

但我想要 | 要短一点。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-02T20:26:59.207

您无法根据需要设置`border`属性。但是，在这里使用伪元素可能很有用（[请参阅夸张的现场示例](http://jsfiddle.net/zd7j8/5/)）：

**HTML（可能——其他配置也是可能的）**

```
<div class="menu"><span>Home</span><span>About</span><span>Last</span></div> 
```

**CSS**

```
.menu span {font-size: 2em; padding: 10px; position: relative;}

.menu span:after {content: ''; position: absolute; right: 0; top: .6em; bottom: .6em; width: 1px; background-color: black;}

.menu > span:last-child:after {display: none;} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T20:16:25.780

这将与元素本身的高度有关 - 而不是边框​​。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-02T20:19:17.007

除了边框的宽度、样式和颜色之外，没有其他方法可以设置。如果要使边框看起来与文本的高度不同，则需要在这两个元素之间添加一个元素并以这种方式调整其高度和垂直对齐方式。根据您正在使用的代码，您可能最好使用背景图像。

# php - SQL不是通过使用php查询降序排序

> ID：10420946
> 
> 赞同：1
> 
> 时间：2012-05-02T20:13:01.053
> 
> 标签：php, mysql

我有以下查询：

```
$query = "SELECT - AS -
         FROM -
         WHERE ID = '".$id."'
         ORDER BY 'PRIMARY' DESC
         LIMIT ".$start.", ".$limit.""; 
```

但是，由于某种原因，查询总是按升序返回，即使我已经告诉它按降序排序。

我不确定为什么会这样。当我通过 phpMyAdmin 进行查询时，它会正确返回，但 PHP 查询未按降序列出结果。

注意：查询中的 - 是我截取的数据库中的名称。它们在实际查询中填充了正确的名称。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T20:16:40.800

您的查询实际上根本没有排序，
您按常量字符串排序`PRIMARY`，所有行都将相等。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-02T20:17:25.037

您正在按一个常数值`'PRIMARY'`（始终相同）对结果进行排序 您想按列排序，因此您需要指定列，例如

```
ORDER BY column1 
```

如果列名是`column1` 你不能像这样使用PRIMARY，只有当它是一个列名时。在这种情况下，你会写

```
ORDER BY `PRIMARY` 
```

as`PRIMARY`是 mysql 关键字（用于主键用途）

请注意

```
`PRIMARY` 
```

不同于

```
'PRIMARY' 
```

这是一个常数值

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-02T20:16:01.880

在附近使用反引号而不是单引号`PRIMARY`

```
$query = "SELECT - AS -
         FROM -
         WHERE ID = '".$id."'
         ORDER BY `PRIMARY` DESC
         LIMIT ".$start.", ".$limit.""; 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-05-02T20:16:55.933

您是否尝试过回显查询以确保它与您放入 phpmyadmin 的查询相匹配

# xaml - 有没有一种简单的方法来重新排序 ListView 中的项目

> ID：10420947
> 
> 赞同：2
> 
> 时间：2012-05-02T20:13:02.943
> 
> 标签：xaml, windows-runtime, winrt-xaml

我有一个绑定到 ObservableCollection 的 ListView 数据。我将 CanReorderItems 属性设置为 true。

但是，当我在列表视图中拖动项目时，它们会保持在原来的位置。

有什么简单的方法可以在列表视图中重新排序？

这是我的代码：页面的ctor：

```
public BlankPage()
{
    this.InitializeComponent();
    ObservableCollection<MyClass> c = new ObservableCollection<MyClass>();
    c.Add(new MyClass("a"));
    c.Add(new MyClass("b"));
    c.Add(new MyClass("c"));
    DataContext = c;
} 
```

页面的 XAML：

```
<ListView ItemsSource="{Binding}" CanDragItems="true" CanReorderItems="true" AllowDrop="True"></ListView> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-02T23:26:32.217

There is a [bug](http://social.msdn.microsoft.com/Forums/en-US/winappswithcsharp/thread/d7a81b1b-c87b-4976-966c-38562315d9df) in ListView and GridView now (note the question was asked before Windows 8.0 released) and you need to use a CollectionViewSource:

```
public BlankPage()
{
    this.InitializeComponent();
    ObservableCollection<MyClass> c = new ObservableCollection<MyClass>();
    c.Add(new MyClass("a"));
    c.Add(new MyClass("b"));
    c.Add(new MyClass("c"));
    var viewSource = new CollectionViewSource { Source = c };

    DataContext = viewSource.View;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-07-24T22:25:18.057

您需要打开 AllowDrop 并将 ItemsSource 设置为 ObservableCollection 或 ICollectionViewSource。

# javascript - 如何在我的 php 文件中从我的 javascript 调用变量？

> ID：10420951
> 
> 赞同：0
> 
> 时间：2012-05-02T20:13:24.737
> 
> 标签：javascript, forms

我有一段代码（下面的 JSFiddle 链接），它根据单击的单选按钮生成图片。我想将生成的图像的名称发送到表单，以便可以将其发送到不同的页面（payPal 结帐）。我似乎无法让它工作，我正在寻求帮助。谢谢

[http://jsfiddle.net/YRWKH/](http://jsfiddle.net/YRWKH/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T20:17:04.470

首先，在表单中添加一个字段：

```
<input type="hidden" name="some_name" value="" id="the-hidden-field" /> 
```

然后，在您的`updateImage()`功能中，您可以执行以下操作：

```
var src = "images/" + BodyColor + InsertColor + ".jpg";
$("#FinalImage").attr('src' src);
$('#the-hidden-field').val(src); 
```

现在您的隐藏字段与图像本身的属性具有相同的值`src`，当然隐藏字段将像任何其他字段一样传递给服务器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T20:17:39.977

使用隐藏输入。单击单选按钮，将值设置为图像的路径，然后在发布时，只需 $_POST 即可获取图像名称。

# .net - 将 BMP 图像加载到 vbscript 中的对象中

> ID：10420953
> 
> 赞同：1
> 
> 时间：2012-05-02T20:13:27.280
> 
> 标签：.net, vbscript, activex

Visual Basic 和 .NET 不是我的强项，所以如果我问了一个愚蠢的问题，请原谅我。

我正在使用从硬件设备捕获签名的 activex 组件。我正在尝试在设备的显示屏上加载 BMP 图像。

activex 附带了很好的文档，这就是负责在显示器上绘制 BMP 的函数：

[http://www.topazsystems.com/software/sigplushelp/Methods_and_Properties_for_use_with_LCD_Tablets/Graphics_Methods/LCDWriteBitmap.htm](http://www.topazsystems.com/software/sigplushelp/Methods_and_Properties_for_use_with_LCD_Tablets/Graphics_Methods/LCDWriteBitmap.htm)

该函数接受某种 HBITMAP / BitmapHandle 对象。有人可以给我一个关于如何从 URL（而不是从本地文件）加载 BMP 对象的示例吗？

我得到了另一个用 .NET 编写的示例，但我正在使用带有该 activex 的 vbscript。这是我找到的.NET 示例：

```
Dim WebClient As New System.Net.WebClient
Dim sign As Bitmap
Dim strSign As String
strSign = "http://www.topazsystems.com/images/Sign.bmp"
sign = New System.Drawing.Bitmap(WebClient.OpenRead(strSign))

Dim HIcon As IntPtr = sign.GetHbitmap

AxSigPlus1.TabletState = 1
AxSigPlus1.DisplayWindowRes = True
AxSigPlus1.SetBackgroundHandle(HIcon.ToInt32, 0 
```

**编辑（5/9/12）：**

再看一遍，activex 是一个 OCX activex 组件，而不是一个 DLL。

这是 SDK 附带的演示 vbscript 脚本：

```
<SCRIPT LANGUAGE="VBScript"><!--

Sub LoadSig 
   If document.formname.txtValue2.value="" Then
      SigPlus1.ClearTablet()
      MsgBox "Please re-enter your first name to display signature"
   Else
      SigPlus1.JustifyX=10
      SigPlus1.JustifyY=10
      SigPlus1.AutoKeyStart
      SigPlus1.AutoKeyData=document.formname.txtValue2.value
      SigPlus1.AutoKeyData=document.formname.Disclaimer.value
      strDisclaimer2=document.formname.Disclaimer.value
      SigPlus1.AutoKeyFinish
      SigPlus1.EncryptionMode=1
      SigPlus1.SigCompressionMode=2
      SigPlus1.DisplayPenWidth=10
      SigPlus1.JustifyMode=5
      SigPlus1.SigString=document.formname.SigData.value

      If strDisclaimer=strDisclaimer2 Then
         If SigPlus1.NumberOfTabletPoints=0 Then
            MsgBox "Name does not match. Signature cannot be displayed"
         End If
      Else
         MsgBox "Disclaimer has been changed. Signature cannot be displayed"
      End If
   End If
end Sub

//--></SCRIPT>

<FORM NAME="formname">

<INPUT TYPE="hidden" NAME="SigData">
<INPUT TYPE="hidden" NAME="txtValue">
<DIV STYLE="position:absolute; top:204px; left:10px;">
<b>Disclaimer information from the previous page:</b><br><br>
<INPUT TYPE="text" size=117 name="Disclaimer">
</DIV>

<DIV STYLE="position:absolute; top:252px; left:10px;">
<br><br><br><br><br><br><br>
<b>Please re-enter your first name to display signature:</b><br><br>
<INPUT TYPE="text" NAME="txtValue2">&nbsp;&nbsp;
<input id="DoneBtn" name="DoneBtn" type="button" value="Display" onclick="LoadSig" style="BACKGROUND-COLOR: #666699; COLOR: white; FONT: bold 8pt verdana" onmouseout="window.event.srcElement.style.background = '#666699'" onmouseover="window.event.srcElement.style.background = '#AFAFAF'">
</DIV>

</FORM>

<SCRIPT LANGUAGE="JavaScript"><!--

//These Javascript functions grab the data passed via the GET method, and redistribute
//the data for use on this page

function replace(string,text,by) {
    // Replaces text with by in string
    var i = string.indexOf(text), newstr = '';
    if ((!i) || (i == -1))
        return string;
    newstr += string.substring(0,i) + by;
    if (i+text.length < string.length)
        newstr += replace(string.substring(i+text.length,string.length),text,by);
    return newstr;
}

function getParm(string,parm) {
    // returns value of parm from string
    var startPos = string.indexOf(parm + "=");
    if (startPos > -1) {
        startPos = startPos + parm.length + 1;
        var endPos = string.indexOf("&",startPos);
        if (endPos == -1)
            endPos = string.length;
        return unescape(string.substring(startPos,endPos));
    }
    return '';
}

var passed = replace(location.search.substring(1),"+"," ");

document.formname.SigData.value = getParm(passed,'SigData');
document.formname.txtValue.value = getParm(passed,'txtValue');
document.formname.Disclaimer.value = getParm(passed, 'Disclaimer');
strDisclaimer = document.formname.Disclaimer.value;

//--></SCRIPT> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-04T00:39:49.957

您应该下载文件并临时保存。完成此操作后，您可以使用[LoadPicture()](http://msdn.microsoft.com/en-us/library/66bd1sx9%28v=vs.85%29.aspx)函数获取句柄。LoadPicture 返回一个`Picture`具有**Handle**属性的对象。我认为这就是你所需要的。

```
Dim Fso, Stm, WebCli, sign, HIcon, strTempPath
Set Fso = CreateObject("Scripting.FileSystemObject")

strTempPath = Fso.BuildPath(Fso.GetParentFolderName(WScript.ScriptFullName), Fso.GetTempName)

Set Stm = CreateObject("Adodb.Stream")
    Stm.Type = 1 'adTypeBinary
    Stm.Open

Set WebCli = CreateObject("MSXML2.XMLHTTP")
    WebCli.open "GET", "http://www.topazsystems.com/images/Sign.bmp"
    WebCli.send
    Stm.Write WebCli.responseBody
    Stm.SaveToFile strTempPath
    Stm.Close

Set sign = LoadPicture(strTempPath)
HIcon = sign.Handle

AxSigPlus1.TabletState = 1
AxSigPlus1.DisplayWindowRes = True
AxSigPlus1.SetBackgroundHandle HIcon, 0

Set sign = Nothing
Fso.DeleteFile strTempPath 'remove temp file 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-14T21:10:49.710

如果你能弄清楚如何在字节数组和图片对象之间进行转换，你会很高兴：你可以让服务器应用程序从磁盘加载图片，将其转换为一系列代码生成的 VBA 分配，如 'ar(m) =v...' 然后在 VBA 中取消转换。我在 VB6 中找到了各种示例，但都充满了 win32 API 调用。

祝你好运让客户端使用它。在我工作的地方，我们正在将使用签名板的胖客户端应用程序转换为在 Web 上工作；这就是我打算做的：

用你自己的 OCX 包装它。让它自己设置为脚本安全等，它可以做它想做的事情，包括写文件。

您将不得不向您的用户发送 Topaz 垫。他们将不得不安装软件。只需在安装时搭载您的。如果他们自己购买垫子，只需让他们下载您的安装程序。

如果你想变得非常富有，你可以让你的包装器签名等等，这样它就会自动下载并设置自己的安全。如果你这样做，请确保它非常薄，升级会有开销。

# javascript - history.pushState() 更改查询值

> ID：10420955
> 
> 赞同：9
> 
> 时间：2012-05-02T20:13:30.373
> 
> 标签：javascript, jquery, pushstate

如果我有一个链接正在被`history.pushState({}, "", link);`我的函数更改`link`，例如`page.php?value=1&value2=2`有没有办法只更改`value2`with`pushState()`函数而不是更改整个链接？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-02T21:17:22.410

如果您尝试更改 URL 而不向历史对象添加其他条目，您可以尝试`replaceState`.

```
history.replaceState({value: 1, value2: X}, "title", "page.php"); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-02T20:25:20.690

不，因为查询字符串是 URL 的一部分。如果您确实不需要出于服务器的目的传递这些值，则可以将它们包含在历史状态对象本身中，然后您可以使用`pushState()`. 例如：

```
history.pushState({value: 1, value2: 2}, "Title", 'page.php');
history.pushState({value: 1, value2: 'new value'}, "Title"); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-02T20:35:15.357

您可以使用这个有用的函数来更改查询字符串参数值：

```
function updateParam(url, param, value)
{  
    var re = new RegExp(param+"(.+?)(&|$)","g");

    return url.replace(re, param+'='+value)  
} 
```

# c# - C# 的 Arduino UNO 基础知识

> ID：10420959
> 
> 赞同：20
> 
> 时间：2012-05-02T20:14:21.320
> 
> 标签：c#, arduino, microcontroller

您好，我是使用 USB 连接控制硬件的新手。我有一个 Arduino UNO 微控制器，正在寻找资源让我开始。我用 C# (Visual Studio 2010) 编程，想知道是否有一些基础知识可以用来设置/测试我的连接。我正在寻找一个简单的东西，比如我的 WinForm 中的一个复选框，可以在高低之间切换 Arduino 上的数字 I/O 引脚。一直找不到太多的开始。

提前致谢。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-27T22:00:31.280

有很多方法可以将命令从 pc 发送到 arduino。Sandeep Bansil 提供了一个连接和读取串行端口的好例子。

下面是一个工作示例，说明如何根据 Windows 表单上的复选框状态写入串行端口以及如何在 arduino 上处理来自 pc 的请求。

这是一个冗长的例子，有更清洁的解决方案，但这更清楚。

在示例中，arduino 等待来自 pc 的“a”或“b”。选中复选框时，PC 发送一个“a”，未选中复选框时发送一​​个“b”。该示例假定 arduino 上的数字引脚 4。

**Arduino代码**

```
#define DIGI_PIN_SOMETHING 4
unit8_t commandIn;
void setup()
{
    //create a serial connection at 57500 baud
    Serial.begin(57600);
}

void loop()
{
    //if we have some incomming serial data then..
    if (Serial.available() > 0)
    {
        //read 1 byte from the data sent by the pc
        commandIn = serial.read();
        //test if the pc sent an 'a' or 'b'
        switch (commandIn)
        {
            case 'a':
            {
                //we got an 'a' from the pc so turn on the digital pin
                digitalWrite(DIGI_PIN_SOMETHING,HIGH);
                break;
            }
            case 'b':
            {
                //we got an 'b' from the pc so turn off the digital pin
                digitalWrite(DIGI_PIN_SOMETHING,LOW);
                break;
            }
        }
    }
} 
```

**视窗 C#**

此代码将驻留在您的表单 .cs 文件中。该示例假定您已将 OnOpenForm、OnCloseForm 和 OnClick 事件的表单事件附加到复选框。从每个事件中，您可以调用下面的相应方法....

```
using System;
using System.IO.Ports;

class fooForm and normal stuff
{
    SerialPort port;

    private myFormClose()
    {
        if (port != null)
        port.close();
    }

    private myFormOpen()
    {
        port = new SerialPort("COM4", 57600);
        try
        {
            //un-comment this line to cause the arduino to re-boot when the serial connects
            //port.DtrEnabled = true;

            port.Open();
        } 
        catch (Exception ex)
        {
            //alert the user that we could not connect to the serial port
        }
    }

    private void myCheckboxClicked()
    {
        if (myCheckbox.checked)
        {
            port.Write("a");
        } 
        else
        {  
            port.Write("b");    
        }
    }
} 
```

提示：

如果您想从 arduino 读取消息，请在表单中添加一个计时器，间隔为`50`或`100`毫秒。

如果`OnTick`是 Timer，您应该使用以下代码检查数据：

```
//this test is used to see if the arduino has sent any data
if ( port.BytesToRead > 0 )

//On the arduino you can send data like this 
Serial.println("Hellow World") 

//Then in C# you can use 
String myVar = port.ReadLine(); 
```

`readLine()`will的结果是`myVar`包含`Hello World`.

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-05-02T20:17:15.780

我相信你知道 Arduino 有一些你可以在 C# 中使用的示例

[这是他们的 C# 页面](http://arduino.cc/playground/Interfacing/Csharp)

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-05-21T17:47:23.133

由于您使用的是 Visual Studio，因此您可能会对这个用于 Arduino 开发的酷炫 Visual Studio 插件感兴趣。[http://www.visualmicro.com](http://www.visualmicro.com)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-02-05T06:55:22.107

PC 和 Arduino 之间通信的基本方式是在 PC 上创建 2 个按钮并打开/关闭 Arduino 上的灯。采用`portwrite();`

这是最简单的演示： [https](https://www.instructables.com/id/C-Serial-Communication-With-Arduino/) ://www.instructables.com/id/C-Serial-Communication-With-Arduino/ 这绝对是你想要的！

C#代码：

```
using System;
using System.Windows.Forms;
using System.IO.Ports;
namespace ledcontrol
{
    public partial class Form1 : Form
    {
        SerialPort port;
        public Form1()
        {
            InitializeComponent();
            this.FormClosed += new FormClosedEventHandler(Form1_FormClosed);
            if (port==null)
            {
                port = new SerialPort("COM7", 9600);//Set your board COM
                port.Open();
            }
        }
        void Form1_FormClosed(object sender,FormClosedEventArgs e)
        {
            if(port !=null &&port.IsOpen)
            {
                port.Close();
            }
        }
        private void button1_Click(object sender, EventArgs e)
        {
            PortWrite("1");
        }

        private void button2_Click(object sender, EventArgs e)
        {
            PortWrite("0");
        }
        private void PortWrite(string message)
        {
            port.Write(message);
        }
    }
} 
```

Arduino草图：

```
const int LedPin = 13;  
int ledState = 0;  

void setup()  
{   
  pinMode(LedPin, OUTPUT);  

  Serial.begin(9600);    
}  

void loop()  
{   
    char receiveVal;     

    if(Serial.available() > 0)  
    {          
        receiveVal = Serial.read();  

       if(receiveVal == '1')      
          ledState = 1;     
       else  
          ledState = 0;       
    }     

    digitalWrite(LedPin, ledState);   

    delay(50);      
} 
```

# iphone - 在查看之前预选一些 UIButton

> ID：10420963
> 
> 赞同：0
> 
> 时间：2012-05-02T20:14:31.690
> 
> 标签：iphone, objective-c, ios, xcode, uibutton

我正在制作一个显示用户联系人列表和建议联系人的应用程序。我希望像这样预先选择建议的联系人部分的复选框。有人帮我吗？

![1]: [http://min.us/mOhamWjnd](http://min.us/mOhamWjnd)

到目前为止，我不知道如何实现这一点。当我尝试时，所有复选框都被预先选中。

这是我的 cellforRowIndexPath 代码

```
-(UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath{
AddressBookCell *cell = nil;
if([tableView isEqual:self.myTableView]){
    if([indexPaths objectForKey:indexPath]){
        cell = [indexPaths objectForKey:indexPath];

    }else{
        if([letterArray objectAtIndex:indexPath.section]){
            static NSString *TableViewIdentifier = @"MyCells";
            cell = [[AddressBookCell alloc]initWithStyle:UITableViewCellStyleDefault reuseIdentifier:TableViewIdentifier];
            cell.selectionStyle = UITableViewCellSelectionStyleNone;
            cell.textLabel.text=[[[letterArray objectAtIndex:indexPath.section] objectAtIndex:0] valueForKey:@"name"];
            [[letterArray objectAtIndex:indexPath.section] removeObjectAtIndex:0];
            cell.checkbox.tag = indexPath.row;
            [cell.checkbox addTarget:self action:@selector(checkboxClicked:) forControlEvents:UIControlEventTouchUpInside];

        }

    }
    [indexPaths setObject:cell forKey:indexPath];

}
return cell;
} 
```

这是我的 letterArray 的代码

```
-(void)setUpContacts{
NSMutableArray *tempArray = [[NSMutableArray alloc]init];
eventController = [[UOEventDetailController alloc]init];
[tempArray addObject:[eventController comparingArrays]];

NSDictionary *alphabet = [[NSDictionary alloc]initWithObjectsAndKeys:[NSNumber numberWithInt:1],@"A",[NSNumber numberWithInt:2],@"B",[NSNumber numberWithInt:3],@"C",[NSNumber numberWithInt:4],@"D",[NSNumber numberWithInt:5],@"E",[NSNumber numberWithInt:6],@"F",[NSNumber numberWithInt:7],@"G",[NSNumber numberWithInt:8],@"H",[NSNumber numberWithInt:9],@"I",[NSNumber numberWithInt:10],@"J",[NSNumber numberWithInt:11],@"K",[NSNumber numberWithInt:12],@"L",[NSNumber numberWithInt:13],@"M",[NSNumber numberWithInt:14],@"N",[NSNumber numberWithInt:15],@"O",[NSNumber numberWithInt:16],@"P",[NSNumber numberWithInt:17],@"Q",[NSNumber numberWithInt:18],@"R",[NSNumber numberWithInt:19],@"S",[NSNumber numberWithInt:20],@"T",[NSNumber numberWithInt:21],@"U",[NSNumber numberWithInt:22],@"V",[NSNumber numberWithInt:23],@"W",[NSNumber numberWithInt:24],@"X",[NSNumber numberWithInt:25],@"Y",[NSNumber numberWithInt:26],@"Z", nil];

for(int i = 1; i<=27; i++){
    [tempArray addObject:[NSNull null]];
}
Contacts *contact = [[Contacts alloc]init];
contactNumbers = [contact phoneNumbers];
for (NSDictionary* info in contactNumbers) {
    firstLetter = [info objectForKey:@"lastName"];
    int index = 27;
    if([firstLetter length] > 0){
        firstLetter =[NSString stringWithFormat:@"%C",[firstLetter characterAtIndex:0]];

        firstLetter= [firstLetter capitalizedString];

        if([alphabet objectForKey:firstLetter]){

            NSNumber *t = [alphabet valueForKey:firstLetter];
            index = [t intValue];
        }
    }
    if([tempArray objectAtIndex:index] == [NSNull null]){
        [tempArray insertObject:[NSMutableArray array] atIndex:index];
    }
    [[tempArray objectAtIndex:index] addObject:info];
}
[alphabet release];    
NSArray *alphabet2 = [[NSArray alloc]initWithObjects:@"A",@"B",@"C",@"D",@"E",@"F",@"G",@"H",@"I",@"J",@"K",@"L",@"M",@"N",@"O",@"P",@"Q",@"R",@"S",@"T",@"U",@"V",@"W",@"X",@"Y",@"Z", nil];
NSMutableArray *tempArray2 = [[NSMutableArray alloc]init];
NSMutableArray *titleTemp = [[NSMutableArray alloc]init];
int c = 0;
for(int i = 0; i<=27; i++){
    if([tempArray objectAtIndex:i] != [NSNull null]){
        if(i == 0){
            [titleTemp insertObject:@"Suggested" atIndex:c];
        }else if(i == 27){
            [titleTemp insertObject:@"Others" atIndex:c];
        }else{
            int loc = i -1;

            [titleTemp insertObject:[alphabet2 objectAtIndex:loc] atIndex:c];
        }
        [tempArray2 insertObject:[tempArray objectAtIndex:i] atIndex:c];
        c++;
    }
}
[alphabet2 release];
[tempArray release];
letterArray = tempArray2;
titlePointer = titleTemp;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T20:34:16.980

在您的`if([letterArray objectAtIndex:indexPath.section])`声明结束时，您可以检查 lettersArray 以查看联系人是否应标记为选中，然后如果应该是，您可以调用`[self checkboxClicked:cell.checkbox];`以模拟单击复选框，以便更改其状态...

这是我能做的最好的事情，但我希望这会有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T21:08:11.637

1）您似乎没有重复使用单元格。看起来您为每一行分配一个新单元格并保留它。您应该查看表格视图的示例代码。（和 dequeueReusableCell... 的东西）

2）我看不到您实际设置复选框值的任何地方。您应该在 cellForRowAtIndexPath 中设置它，并且每次调用它时都应该设置它，因为它可能是具有旧值的重用单元格。

# javascript - 如果 mousedown 在 mouseover 事件中触发，则立即返回并且不执行链接的 mouseout 事件

> ID：10420964
> 
> 赞同：1
> 
> 时间：2012-05-02T20:14:34.280
> 
> 标签：javascript, jquery, mouseover, jquery-events, mousedown

不知道该怎么做，但基本上我写了一个工具提示插件，它删除了`mouseout`或上的工具提示`mousedown`。

如果`mousedown`触发了一个事件，它将删除`$that.parent()`哪个很好，这会删除工具提示，但是如果用户还触发了 mouseout 事件（他们将触发事件，因为`mouseover`and`mouseout`事件当前被链接），它将删除另一个 DOM 元素我不想要。所以基本上我想知道这是否可能：

```
$that.on('mouseover', function() {

    // If this event is triggered within the mouseover event, don't run the chained mouseout event
    $that.on('mousedown', function() {
        $that.parent().next().fadeOut(100).remove();
        return false;
    });
}).mouseout(function() {
  // If they clicked above, don't run this
    $that.parent().next().fadeOut(100).remove();
});​ 
```

据我所知，如果不使用全局变量，就很难访问`clicked`该事件内部的布尔集，`mousedown`例如：

```
$that.on('mouseover', function() {
    clicked = false;
    // If this event is triggered within the mouseover event, don't run the chained mouseout event
    $that.on('mousedown', function() {
        clicked = true;
        $that.parent().next().fadeOut(100).remove();
        return false;
    });
}).mouseout(function() {
    // If they clicked above, don't run this
    if (clicked) {
        $that.parent().next().fadeOut(100).remove();
    }
});​ 
```

关于如何优雅地构建它的任何想法？

编辑：中的元素`$that.parent().next()`只是`<div class="js-tooltip"><span>Tooltip text</span></div>`

但这应该无关紧要，因为我只想知道如果在不使用全局变量的情况下触发了该`mouseover`函数是否可以从该函数返回。`mousedown`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T20:32:16.403

你不需要`mouseover`.

```
$that.on('mouseleave mouseup', function(e) {
     if( e.type === 'mouseleave'){
         // do the mouseleave stuff
     }else{
         // do the mouseup stuff
     }
});​ 
```

* * *

正如你所说，如果元素是动态创建的，你应该使用：

`$(document).on('mouseleave mouseup', $that, function(e) {`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T20:35:31.757

您是否考虑过像这样简单地使用类过滤器？

```
$that.parent().next('.js-tooltip').fadeOut(100).remove(); 
```

如果下一个不是工具提示，这根本不会做任何事情，据我所知，这应该可以解决问题。

使用您提出的方法，这样做会更清楚`$that.clicked = false`。

或者怎么样（如果你想保持鼠标悬停 - 这只是为了展示原理；我不确定它是否会像这样工作）：

```
$that.on('mouseover', function() {

    // If this event is triggered within the mouseover event, don't run the chained mouseout event
    $that.on('mousedown mouseout', function() {
        $that.parent().next().fadeOut(100).remove();
        $that.off('mousedown mouseout'); //prevent that happening again
        return false;
    });
}); 
```

# python - 机械手/相机校准问题（面向线性代数）

> ID：10420966
> 
> 赞同：0
> 
> 时间：2012-05-02T20:14:51.710
> 
> 标签：python, linear-algebra, robotics, calibration

我正在从事一个涉及显微镜（将摄像头连接到视口；视频馈送流到我们正在开发的应用程序）和机械臂的研究项目。显微镜和机械臂都由 Luigs & Neumann 控制盒控制（非常陈旧 - 计算机通过串行电缆与其连接，响应时间很慢www。）显微镜可以在 3 个维度上移动；X、Y 和 Z，它们的轴彼此成直角。查询该框时，它将返回每个设备每个轴的位置的十进制值。可以向每个设备发送命令以移动到特定位置，精度为亚微米。

然而，机械臂在所有 3 个维度上都是可调节的，因此不能保证其任何轴都以直角对齐。我们需要能够查看来自摄像机的视频流，然后单击屏幕上我们希望机械臂尖端移动到的点。因此，必须校准两个坐标系。

目前，我们通过将显微镜/相机的位置移动到机械臂的尖端，并将其设置为两个坐标系之间的同步点，并在X方向移动机械臂+250um，将显微镜移动到机械臂的尖端在这个新位置，然后使用这些值之间的差异来定义一个 3d 矢量，该矢量对应于机械臂移动的距离和方向，在显微镜坐标系中的每单位。对机械臂的每个轴重复此操作。

一旦获得此数据，为了将机械臂移动到显微镜坐标系中的特定位置，程序可以求解方程组，该程序确定在每个轴上移动机械臂需要多少才能将其移动到屏幕的中心点。到目前为止，这非常可靠。

我们在这里遇到的问题是，由于设备的响应时间较慢，可能需要 5-10 分钟才能完成校准过程，而且由于机械臂的尖端必须偶尔更换，这使得校准过程变得复杂在实验过程中，需要重复校准过程。我们的研究对时间相当敏感，这在该过程中造成了主要瓶颈。

我的线性代数有点杂乱无章，但似乎如果我们测量显微镜坐标系中每个单位的机械臂尖端行进的单位并将其硬编码到程序中（目前），它可能是可能的一次将操纵器的所有 3 个轴移动特定的量，然后从该信息中导出每个轴的向量。我不确定如何去做（或者是否有可能），任何建议都将不胜感激。如果您需要任何其他信息，或者如果您需要澄清任何事情，请告诉我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T21:26:14.310

您确实需要四个数据点来表征三个独立的运动轴。

您是否可以添加一些其他约束，即操纵器轴是否*相互*正交，即使相对于舞台的轴不固定？即使不准确，您是否*大致*了解机械手的对齐方式？

什么最耗时 - 将舞台重新居中？可以同时移动机械手和载物台吗？显微镜的视野有多宽？视图边缘附近有多少距离失真 - 实际上每次都必须重新居中才能准确吗？也许我们可以想出一个反向屏幕失真映射？

# asp.net-mvc-3 - 为什么我的 MVC 应用会缓存此设置？

> ID：10420967
> 
> 赞同：3
> 
> 时间：2012-05-02T20:14:51.897
> 
> 标签：asp.net-mvc-3, caching, entity-framework-4

我有一个处理传入邮件的电子邮件侦听应用程序，具体取决于电子邮件所在的“桶”（或队列）。每个桶的设置之一是“自动回复”。如果 AutoRespond 为真，我会向发件人发回一封确认电子邮件。

但是，当我更改 AutoRespond 设置时，它似乎没有生效。我熟悉在控制器上设置 OutputCache，但下面的这个逻辑来自我的电子邮件监听服务 cs 文件。

```
if (myObject.Bucket.AutoRespond)
{
    SendEmailConfirmation(someArgs);
} 
```

即使我可以看到它在数据库中设置为 False，这个 if 语句仍然评估为 True。如果我重新启动我的电子邮件收听服务，一切都很好，并且这个 if 语句的评估是正确的。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T22:44:56.490

问题可能是当应用程序启动时从数据库中读取设置......然后它们可能存储在静态变量或应用程序状态字典中。如果是这种情况，您可以通过编写一个管理页面来解决它，该页面在更改设置后强制从数据库重新加载设置。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-26T19:14:07.707

您还可以尝试 web.config 应用程序设置，更改值会自动重新启动应用程序（不确定这是否适合您，但仍然是另一种选择）

网络配置：

```
<appSettings>
    <add key="AutoRespond" value="true" />
</appSettings> 
```

c#逻辑在这里：

```
bool autoRespond = false;
bool.TryParse(System.Configuration.ConfigurationManager.AppSettings["AutoRespond"], out autoRespond); 
```

# jquery - Soundcloud 自定义播放器包括购买按钮

> ID：10420970
> 
> 赞同：1
> 
> 时间：2012-05-02T20:14:56.397
> 
> 标签：jquery, soundcloud

[使用http://developers.soundcloud.com/docs/custom-player](http://developers.soundcloud.com/docs/custom-player)在播放器上工作

想要像所有其他 Soundcloud 嵌入产品一样包含购买按钮......不在文档中。任何人有一个hacky的方式来做到这一点？它运行与 HTML5 小部件相同的 API，所以我确信至少可以做一些事情。

谢谢你的建议！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T07:24:03.570

每个轨道对象都有一个属性`purchase_url`- 外部购买链接，如果存在，它应该指向“立即购买”网址。

在此处查看文档：

[http://developers.soundcloud.com/docs/api/tracks](http://developers.soundcloud.com/docs/api/tracks)

# php - 如何选择以 " 开头的行 我有两列，Entry和text_image，在一个表中。当循环查看数组中的所有行时，我可以获得结果，但我希望它添加/images到文本以img. 这是为了将具有“img”（表示行内的文本）的行定向到正确的文件夹。可能需要进一步解释来说明原因，但我不会深 问问题 问问题 2012-05-02T20:14:58.043 55 次 This question shows research effort; it is useful and clear -1 This question does not show any research effort; it is unclear or not useful Bookmark this question. Show activity on this post. 我有两列，Entry和text_image，在一个表中。当循环查看数组中的所有行时，我可以获得结果，但我希望它添加/images到文本以img. 这是为了将具有“img”（表示行内的文本）的行定向到正确的文件夹。可能需要进一步解释来说明原因，但我不会深入探讨。 while($row = mysql_fetch_array( $result3 )) { echo ""; (I want to add an echo "/images" before the rows that start with "img") echo $row[\'text_image\']; echo ""; } 先感谢您 多次调用后 WCF 中的 TimeoutException 也许我不正确地实现 WCF，但是NetNamedPipedBindings在进行多次调用后，我似乎在使用时遇到了 WCF 异常。 这是我正在做的事情的高水平。基本上，我正在处理一个 out of proc exe 并使用 WCF 命名管道来回通信。我通过这个属性让我的主机保持打开状态： [ServiceBehavior(InstanceContextMode = InstanceContextMode.Single, ConcurrencyMode = ConcurrencyMode.Multiple)] 然后，在我的客户端中，我创建了一个static DuplexChannelFactory实例化一次，然后根据需要通过以下方式使用： channelFactory.CreateChannel().MakeCall(); 我添加了一个 Ping 方法只是为了确保主机正常工作（因为主机会发回我们不想在不知道的情况下错过的事件）。此 Ping 方法每 5 秒运行一次，并且只返回一个 true。但是，在运行了几分钟后，我得到了一个TimeoutException. 这是我的异常跟踪： 服务器堆栈跟踪：在 System.ServiceModel.Channels.ClientFramingDuplexSessionChannel.OnOpen(TimeSpan timeout) 在 System.ServiceModel.Channels.CommunicationObject.Open(TimeSpan timeout) 在 System.ServiceModel.Channels.ServiceChannel.OnOpen(TimeSpan timeout) 在 System.ServiceModel.Channels.CommunicationObject.Open(TimeSpan timeout) 在 System.ServiceModel.Channels.ServiceChannel.CallOpenOnce.System.ServiceModel.Channels.ServiceChannel.ICallOnce.Call(ServiceChannel channel, TimeSpan timeout) 在 System.ServiceModel.Channels。 ServiceChannel.CallOnceManager.CallOnce(TimeSpan timeout, CallOnceManager cascade) at System.ServiceModel.Channels.ServiceChannel.EnsureOpened(TimeSpan timeout) at System.ServiceModel.Channels.ServiceChannel.Call(String action, Boolean oneway, ProxyOperationRuntime operation, Object[] ins , Object[] outs, TimeSpan timeout) at System.ServiceModel.Channels.ServiceChannel.Call(String action, Boolean oneway, ProxyOperationRuntime operation, Object[] ins, Object[] outs) at System.ServiceModel.Channels.ServiceChannelProxy。InvokeService(IMethodCallMessage methodCall, ProxyOperationRuntime operation) at System.ServiceModel.Channels.ServiceChannelProxy.Invoke(IMessage message) 我打开了 JustDecompile，发现这个错误很可能发生在这里： connection = this.connectionPoolHelper.EstablishConnection(timeout) 但是，我看不出为什么在之前工作了几次 ping 之后这会超时？我需要设置什么设置才能使这个无限和/或我是否有另一种方法可以从客户端或服务器端实现这个 WCF 事件服务器（它也用于按需处理）？ 更新 在我开始看到呼叫尝试并且没有返回之前，我做了大约 6 次 ping。 phpmysql 4 1 回答 1 This answer is useful 2 $images = (substr($row['text_image'], 0, 3) == 'img') ? "/images" : ""; echo $images . $row['text_image']; 这将检查 的前 3 个字母$row['text_image']是否被img设置$images为，/images否则将其留空。这将在循环内每次更新。 于 2012-05-02T20:17:48.447 回答 Related 3 c# - C# - Encoding.ASCII.GetString() 返回“??” 而不是实际的字符串，为什么？ 1 c# - tesseract useROI 方法有什么用？ 2 c# - WPF MVVM DataBindings 停止更新 1 jetty - Jetty-Hightide 7 或 8 是否有 debian 发行版？ 2 vim - 是否可以在 Vim 中确定视觉选择的方向？ 1 java - 跨不同线程调用 c>java 1 c# - 表单提交后从查询字符串中删除项目 1 algorithm - 半边数据结构 delaunay 三角剖分 2 objective-c - 自定义 UItabBarItem（所选项目的背景图片） 2 asp.net - 在 ASP.NET 4 中找不到配置文件属性 Reference php × 1429865 c/c++ × 756500 nginx × 49975 mongodb × 159057 mybatis × 3233 anaconda × 13410 pycharm × 14671 python × 1902243 vscode × 56040 docker × 110988 github × 49000 flask × 49129 ffmpeg × 24037 jmeter × 16910 matplotlib × 63493 bootstrap × 54641

> ID：10420971
> 
> 赞同：-1
> 
> 时间：
> 
> 标签：php, mysql

我有两列，`Entry`和`text_image`，在一个表中。当循环查看数组中的所有行时，我可以获得结果，但我希望它添加`/images`到文本以`img`. 这是为了将具有“img”（表示行内的文本）的行定向到正确的文件夹。可能需要进一步解释来说明原因，但我不会深入探讨。

```
while($row = mysql_fetch_array( $result3 )) {
    echo "<div class=\'entry\'>";
    (I want to add an echo "/images" before the rows that start with "img")

    echo $row[\'text_image\'];
    echo "</div>";
} 
```

先感谢您

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T20:17:48.447

```
$images = (substr($row['text_image'], 0, 3) == 'img') ? "/images" : "";
echo $images . $row['text_image']; 
```

这将检查 的前 3 个字母`$row['text_image']`是否被`img`设置`$images`为，`/images`否则将其留空。这将在循环内每次更新。

# c# - 多次调用后 WCF 中的 TimeoutException

> ID：10420973
> 
> 赞同：2
> 
> 时间：2012-05-02T20:14:59.147
> 
> 标签：c#, .net, wcf, timeout, duplex-channel

也许我不正确地实现 WCF，但是`NetNamedPipedBindings`在进行多次调用后，我似乎在使用时遇到了 WCF 异常。

这是我正在做的事情的高水平。基本上，我正在处理一个 out of proc exe 并使用 WCF 命名管道来回通信。我通过这个属性让我的主机保持打开状态：

```
[ServiceBehavior(InstanceContextMode = InstanceContextMode.Single, 
    ConcurrencyMode = ConcurrencyMode.Multiple)] 
```

然后，在我的客户端中，我创建了一个`static DuplexChannelFactory`实例化一次，然后根据需要通过以下方式使用：

```
channelFactory.CreateChannel().MakeCall(); 
```

我添加了一个 Ping 方法只是为了确保主机正常工作（因为主机会发回我们不想在不知道的情况下错过的事件）。此 Ping 方法每 5 秒运行一次，并且只返回一个 true。但是，在运行了几分钟后，我得到了一个`TimeoutException`. 这是我的异常跟踪：

> 服务器堆栈跟踪：在 System.ServiceModel.Channels.ClientFramingDuplexSessionChannel.OnOpen(TimeSpan timeout) 在 System.ServiceModel.Channels.CommunicationObject.Open(TimeSpan timeout) 在 System.ServiceModel.Channels.ServiceChannel.OnOpen(TimeSpan timeout)
> 在 System.ServiceModel.Channels.CommunicationObject.Open(TimeSpan timeout) 在 System.ServiceModel.Channels.ServiceChannel.CallOpenOnce.System.ServiceModel.Channels.ServiceChannel.ICallOnce.Call(ServiceChannel channel, TimeSpan timeout) 在 System.ServiceModel.Channels。 ServiceChannel.CallOnceManager.CallOnce(TimeSpan timeout, CallOnceManager cascade) at System.ServiceModel.Channels.ServiceChannel.EnsureOpened(TimeSpan timeout) at System.ServiceModel.Channels.ServiceChannel.Call(String action, Boolean oneway, ProxyOperationRuntime operation, Object[] ins , Object[] outs, TimeSpan timeout) at System.ServiceModel.Channels.ServiceChannel.Call(String action, Boolean oneway, ProxyOperationRuntime operation, Object[] ins, Object[] outs) at System.ServiceModel.Channels.ServiceChannelProxy。InvokeService(IMethodCallMessage methodCall, ProxyOperationRuntime operation) at System.ServiceModel.Channels.ServiceChannelProxy.Invoke(IMessage message)

我打开了 JustDecompile，发现这个错误很可能发生在这里：

```
connection = this.connectionPoolHelper.EstablishConnection(timeout) 
```

但是，我看不出为什么在之前工作了几次 ping 之后这会超时？我需要设置什么设置才能使这个无限和/或我是否有另一种方法可以从客户端或服务器端实现这个 WCF 事件服务器（它也用于按需处理）？

**更新**

在我开始看到呼叫尝试并且没有返回之前，我做了大约 6 次 ping。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T21:23:12.810

问题是你不能`CreateChannel`一遍又一遍地调用它。没有 dispose 方法，因为这只是我的 WCF 接口的代理。所以，我只是通过存储对代理的引用并在需要重新实例化主机时重新创建它来解决这个问题。

你会认为会有一些关于这个的文档。当有博客写在他们确实多次调用 CreateChannel 的地方时，它尤其没有帮助。

更新：

[这是我发现的应该如何解决这个问题......虽然它对我不起作用......但对其他人来说似乎](http://geekswithblogs.net/SoftwareDoneRight/archive/2008/05/23/clean-up-wcf-clients--the-right-way.aspx)

在链接失效的情况下截断代码：

您必须使用转换为 IClientChannel 的 using，然后在 using 中重置您的引用。该通道将正常关闭，但您的参考将保持打开状态。注意演员表

```
using (IClientChannel client = (IClientChannel)channelFactory.CreateChannel())
{
    var proxy = (IMyInterface)client;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T20:40:17.163

您应该使用sysinternals 中的[PipeList](http://technet.microsoft.com/en-us/sysinternals/dd581625)来查看是否继续不必要地创建新管道。它们将显示为 GUID。[有关WCF 命名管道命名约定的进一步参考，](http://blogs.msdn.com/b/rodneyviana/archive/2011/03/22/named-pipes-in-wcf-are-named-but-not-by-you-and-how-to-find-the-actual-windows-object-name.aspx)请参阅MSDN 博客。

# ruby-on-rails - 在heroku中将force_ssl设置为false后如何删除无限重定向循环？

> ID：10420976
> 
> 赞同：1
> 
> 时间：2012-05-02T20:15:17.103
> 
> 标签：ruby-on-rails, ssl, ruby-on-rails-3.1, dns

我正在开发一个 Rails 3.1.0 应用程序，该应用程序需要在某些页面中使用 ssl，具体取决于用户。

我在 config/enviroments/staging.rb 中将 config.force_ssl 设置为 false。添加了决定是否重定向到 http 的 before 过滤器。如果我清理缓存，重定向在开发中有效。

事情正在进行中，它会导致重定向循环。我相信 force_ssl 使用永久重定向，因此当 DNS 被问及我的应用程序中的页面时，它仍然尝试使用 ssl 重定向到页面。这有道理吗？

我有哪些选择？

编辑

我清理了缓存。这只解决了我第一次进入页面时的问题。假设我刷新所有缓存并进入 http 页面。这将显示 http 页面。当我退出页面时，进入另一个有 ssl 的页面并尝试返回 http 页面，无限重定向再次开始。

我实施的解决方案是重定向到不安全的子域。让我们称之为“不安全”。因此，当我需要重定向到 http 页面时，我会重定向到[http://unsafe.mydomain.com](http://unsafe.mydomain.com)。这解决了无限重定向，但仍然缓存了一些 https 页面。

我想真正的问题是什么时候使用 :status => :moved_permanently 有用，因为它似乎会导致页面缓存并且很难清理这个缓存？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T08:39:47.253

首先，您为什么不只是对所有页面强制使用 SSL？性能开销很小，但在混合模式下运行，如果您不小心，您可能会泄漏您认为安全的 cookie。SSL无处不在:)

现在对于您的问题，我怀疑这与 DNS 有什么关系，并且更有可能与模式匹配逻辑的正则表达式有关，它应该在何时重定向。它是否包括主机名/域？如果是这样，它是否与您在登台中运行的域匹配？

# java - 在 Java 中将 SQL 解析为数组

> ID：10420982
> 
> 赞同：1
> 
> 时间：2012-05-02T20:15:41.550
> 
> 标签：java, sql, netbeans, derby

这应该很简单，我想从 KATA_DASAR 表中检索 KATA 记录并将其放入名为 kamusKata[] 的数组中。但我似乎无法编写正确的代码，有什么帮助吗？预先感谢。:)

```
package ir;

import java.sql.*;

public class kataDasar {
private String[] kamusKata;
private int i=0;

public kataDasar () {
    try {
            //definisi connection
            Connection con = DriverManager.getConnection( "jdbc:derby://localhost:1527/stemming", "admin", "admin" );
            Statement stmt = con.createStatement( );
            //SQL query 
            String SQL = "SELECT KATA FROM KATA_DASAR";
            ResultSet rs = stmt.executeQuery(SQL);

            while (rs.next()){
            String hasil = (rs.getString("KATA"));
            setKamusKata(hasil);
            }

        } catch (SQLException ex) {
            System.err.println("Connection failed"); //jika connection failed
        }
};

private void setKamusKata (String kata) {
    kamusKata[i] = kata;
    i++;
}

public String getKamusKata () {
    return kamusKata;
}
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-02T20:34:19.437

请参阅：ArrayList [http://docs.oracle.com/javase/6/docs/api/java/util/ArrayList.html](http://docs.oracle.com/javase/6/docs/api/java/util/ArrayList.html)

真实性的回答可能对你没有帮助，因为你从来没有初始化你的数组。

你会做这样的事情：

```
kamusKata = new ArrayList<String>();

while(rs.next()) {
 kamusKata.add(rs.getString('KATA')
} 
```

但我不确定您的 getKamusKata() 方法应该做什么。如果你想将它作为一个字符串返回，你应该看看这个问题：[Java equivalents of C# String.Format() and String.Join()](https://stackoverflow.com/questions/187676/java-equivalents-of-c-sharp-string-format-and-string-join)

或者让你的方法做：

```
StringBuilder sb=new StringBuilder();
for(string kata : kamusKata) {
   sb.append(kata);
}

return sb.toString(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T20:24:14.403

这个：

```
public String getKamusKata () {
    return kamusKata;
} 
```

可能是问题所在。您的方法应该返回 a`String`但您试图返回 a `String[]`。

# php - 退出时希望与服务器重新连接。我可以设置任何形式的 Javascript / jQuery / AJAX 陷阱吗？

> ID：10420983
> 
> 赞同：2
> 
> 时间：2012-05-02T20:15:45.117
> 
> 标签：php, jquery, ajax, codeigniter, http-post

第一件事。我在 PHP/MySQL 站点上运行 CodeIgniter。

我的任务是为一系列电影创建一个“外壳”应用程序，人们可以在我正在构建的培训网站上观看这些电影。这里的想法是一个人可以登录到一个页面，单击“参加课程”并让它记录课程的时间。然后，当这个人带着电影退出页面时，我就能记录课程结束的时间。通过这种方式，我可以比较开始时间和结束时间，并确定用户是否观看了大部分影片，以便给予用户信任。嗯，第一部分很简单。首先，我在我的数据库中建立了一个包含以下字段的表：

*   intKey (intKey(10))
*   strHash (varchar(255))
*   dtBegan（日期时间）
*   dtEnded（日期时间）
*   varIpAddress (varchar(255))

我已经放入了一个执行此操作的控制器：

```
$ip_address = $_SERVER['REMOTE_ADDR'];
$data['hash'] = md5(time() . "Proof of Concept!");
$this->db->query("INSERT INTO pocTime SET strHash = '" . $data['hash'] . "', dtBegan = now(), varIpAddress='$ip_address'");
$this->load->view('welcome_message',$data); 
```

好的...很容易，是吗？我也知道，当我完成后，我想启动一个执行此操作的文件：

```
$ip_address = $_SERVER['REMOTE_ADDR'];
$this->db->query("UPDATE pocTime SET dtEnded = now() WHERE strHash = '" . $data['hash'] . "' AND varIpAddress='$ip_address'"); 
```

我希望做的是有一个由第一个代码块调用的页面，并设置一个“陷阱”，可以这么说，以便第二个代码块由某种“回发”运行，如果呈现页面关闭。有什么建议么？我知道我可以放置某种大的“单击此处结束您的视频”类型的按钮来涵盖这一点，但我希望在某种形式的页面退出时运行代码，因为我不知道是什么用户在观看视频后会这样做。有什么想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T20:19:52.263

简单但应该工作，使用 jQuery

```
$(window).unload(function(){
    $.get("test.php?dim1=turn&dim2=off");
}); 
```

使用`unload`哪个 jQuery 文档告诉什么触发了这个： [http ://api.jquery.com/unload/](http://api.jquery.com/unload/)

使用`get`哪个 jQuery 文档在这里： [http ://api.jquery.com/get/](http://api.jquery.com/get/)

或者你也可以使用 post

```
$(window).unload(function(){ 
    $.post("test.php", { dim1: "turn", dim2: "off" } ); 
}); 
```

[http://api.jquery.com/jQuery.post/](http://api.jquery.com/jQuery.post/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T22:13:08.237

我还建议您在数据库查询中使用 Codeigniter 的[Active Record 语法](http://codeigniter.com/user_guide/database/active_record.html)。它不仅使编写 INSERT 和 UPDATE 查询变得更加容易，而且还可以转义和清理您的输入以保护您免受 SQL 注入。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-02T20:18:36.970

您正在寻找 jQuery 的[卸载](http://api.jquery.com/unload/)事件。

# javascript - 覆盖 Backbone.js 比较器

> ID：10420986
> 
> 赞同：3
> 
> 时间：2012-05-02T20:15:54.700
> 
> 标签：javascript, backbone.js, underscore.js

我有一个简单的backbone.js 推特应用程序，它需要以相反的顺序对推文进行排序。我目前已经实现了按日期排序的比较器。单击“反向”按钮时（如视图中所示），如何在不返回比较器的情况下对所有推文进行反向排序？我的印象是，当我调用 sort 时，它会尝试重新渲染列表（这意味着比较器将再次对数据进行排序，这是不可取的）。我该如何覆盖这个？

```
Tweet = Backbone.Model.extend();

 // Define the collection
Tweets = Backbone.Collection.extend(
{
    model: Tweet,
    // Url to request when fetch() is called
    url: 'http://search.twitter.com/search.json?q=codinghorror',

    parse: function(response) {

        //modify dates to be more readable
        $.each(response.results, function(i,val) {
            val.created_at = val.created_at.slice(0, val.created_at.length - 6);
          });

        return response.results;
    },
    // Overwrite the sync method to pass over the Same Origin Policy
    sync: function(method, model, options) {
        var that = this;
            var params = _.extend({
                type: 'GET',
                dataType: 'jsonp',
                url: that.url,
                processData: true
            }, options);

        return $.ajax(params);
    },
    comparator: function(activity){

        var date = new Date(activity.get('created_at'));
        return -date.getTime();

    }
});

   // Define the View
  TweetsView = Backbone.View.extend({
initialize: function() {
  _.bindAll(this, 'render');
  // create a collection
  this.collection = new Tweets;
  // Fetch the collection and call render() method
  var that = this;
  this.collection.fetch({
    success: function (s) {
        console.log("fetched", s);
        that.render();
    }
  });
},

el: $('#tweetContainer'),
// Use an external template

template: _.template($('#tweettemplate').html()),

render: function() {
    // Fill the html with the template and the collection
    $(this.el).html(this.template({ tweets: this.collection.toJSON() }));
},

events : {
    'click .refresh' : 'refresh',
    **'click .reverse' : 'reverse'**
},

refresh : function() {

 this.collection.fetch();
console.log('refresh', this.collection);
 this.render();

},

**reverse : function() {**

    console.log("you clicked reverse");

    console.log(this.collection, "collection");

    this.collection.sort();

   //How do I reverse the list without going through the comparator?

**}**

});

var app = new TweetsView();
 }); 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-02T20:45:26.713

Backbone 问题的通常解决方案是使用事件。调用[`sort`](http://backbonejs.org/#Collection-sort)会触发一个`"reset"`事件：

> 调用**sort**会触发集合的`"reset"`事件，除非通过传递`{silent: true}`.

因此，您的收藏中可以有一个“排序顺序”标志：

```
Backbone.Collection.extend({
    //...
    initialize: function() {
        //...
        this.sort_order = 'desc';
        //...
    }
}); 
```

然后你`comparator`可以注意那个标志：

```
comparator: function(activity) {
    var date = new Date(activity.get('created_at'));
    return this.sort_order == 'desc'
         ? -date.getTime()
         :  date.getTime()
} 
```

并且您可以在集合上有一个方法来更改排序顺序：

```
reverse: function() {
    this.sort_order = this.sort_order = 'desc' ? 'asc' : 'desc';
    this.sort();
} 
```

然后，您的视图可以侦听`"reset"`事件并在您更改排序顺序时重新显示集合。一旦一切就绪，您只需告诉您的*反向*按钮进行呼叫`view.collection.reverse()`，一切都会好起来的。

演示：http: [//jsfiddle.net/ambiguous/SJDKy/](http://jsfiddle.net/ambiguous/SJDKy/)

# xml - 你可以使用antixml来创建xml文档吗？

> ID：10420987
> 
> 赞同：8
> 
> 时间：2012-05-02T20:15:59.603
> 
> 标签：xml, scala, anti-xml

有一些使用 Anti-Xml 从 XML 文档中提取信息的示例，但我找不到使用 Anti-Xml 创建 XML 文档的示例。Anti-Xml 是否支持创建文档，或者我应该为此使用另一个库（哪个库？）。有没有人有使用 Anti-Xml 创建 XML 文档的示例？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-02T21:01:03.930

是的，您可以构建（和序列化）XML 文档：

```
import com.codecommit.antixml._

val doc = Elem(None, "doc", Attributes(), Map(), Group(
  Elem(None, "foo", Attributes("id" -> "bar"), Map(), Group(Text("baz")))
))

val writer = new java.io.StringWriter
val serializer = new XMLSerializer("UTF-8", true)

serializer.serializeDocument(doc, writer) 
```

您还可以使用 Anti-XML 的[zippers](http://anti-xml.org/zippers.html)来做一些有趣的编辑技巧：

```
val foos = doc \ "foo"
val newFoo = foo.head.copy(children = Group(Text("new text!")))
val newDoc = foos.updated(0, newFoo).unselect 
```

现在`newDoc`包含编辑后的文档：

```
scala> newDoc.toString
res1: String = <doc><foo id="bar">new text!</foo></doc> 
```

返回的与 a 的不同之处[`Zipper`](http://www.danielspiewak.com/anti-xml/doc/com/codecommit/antixml/Zipper.html)在于它携带有关其上下文的信息，这允许您“撤消”由 完成的选择操作。`doc \ "foo"`[`NodeSeq`](http://www.scala-lang.org/api/current/scala/xml/NodeSeq.html)`\`

* * *

更新以响应[ziggystar](https://stackoverflow.com/users/108915/ziggystar)下面的评论：如果您想要 Scala 的 XML 文字之类的东西，您可以`convert`在 any 上使用`scala.xml.Elem`：

```
val test: com.codecommit.antixml.Elem = <test></test>.convert 
```

我假设问题是关于程序化创建的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-03T18:37:43.830

除非您使用反 xml 的其他部分，否则我会坚持使用 Scala 的文字。但是，如果您正在寻找具有良好构建器 DSL、就地更新、XPath 使用（基于 DSL 和字符串）等的更好替代方案，那么我建议您查看 Scales。从 0.3-RC5 发布站点 (http://scala-scales.googlecode.com/svn/sites/scales/scales-xml_2.9.1/0.3-RC5/index.html)：

```
val ns = Namespace("test:uri")
val nsa = Namespace("test:uri:attribs")
val nsp = nsa.prefixed("pre")

val builder = 
  ns("Elem") /@ (nsa("pre", "attr1") -> "val1",
               "attr2" -> "val2",
       nsp("attr3") -> "val3") /(
    ns("Child"),
    "Mixed Content",
    ns("Child2") /( ns("Subchild") ~> "text" )
  ) 
```

同样对于直接序列化，您可以利用流式传输，因为 Scales Xml 模型将模型统一用于流式传输和基于树的处理。

我在 0.3-RC6 之前还有更多文档（以及非常酷的 xml 比较框架），但我正在等待首先迁移到 sonatype。（下周预计）

# php - 使用 php 在一个存档中为服务器下载多个存档

> ID：10420988
> 
> 赞同：0
> 
> 时间：2012-05-02T20:16:01.517
> 
> 标签：php, compression, zip, pclzip

我需要做一个应用程序，让用户在服务器中下载大量图片，选择一些标准并且只在一个存档中。我尝试使用 web 上的 php 和 pclzip.lib 和 zipstream 库，但是这两种方法都不起作用。使用 pclzip 我只能压缩 3Mb，而在下载过程中使用 zipstream 库，它会以 25MB 大小失败。我不知道用户需要下载多少档案，但现在我有大约 700 个档案和 75MB。是否有另一种方法可以使此应用程序正常工作，或者是否有人对这个库有类似的问题并解决了它。这里有一些更多的规范：远程服务器 iis、php。谢谢和对不起我的英语

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2020-12-18T21:26:39.590

一段时间后，我找到了使用方法

```
 ini_set('max_execution_time', 1200);
 ini_set("memory_limit","500M"); 
```

还有图书馆`ZipStream`。另外，我更改了 PHP 服务器中的 PHP 内存限制，因为我的文件非常大。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T20:58:38.250

我以前使用过 pclzip 并且此代码有效：

```
if ($this->extension == 'zip') {
    $this->archive = new PclZip($orgPath);

    if ($this->archive->extract(PCLZIP_OPT_PATH, $newPath) == 0) {
        die("Error : " . $this->archive->errorInfo(true));
    }
} 
```

但我认为这不是你的问题。听起来 PHP 没有足够的 RAM 或没有足够的时间。

如果这是你的问题，你可以用

```
set_time_limit(0);   // 0 = no time limit
ini_set('memory_limit', '300M');  // Increases memory for PHP to 300M 
```

这在 Apache 上对我有用（我不舒尔，但 ini_set 在你的系统上工作吗？）

# javascript - 如何在 Jade 编译之前在 Jade 模板中包含 Javascript 对象

> ID：10420990
> 
> 赞同：2
> 
> 时间：2012-05-02T20:16:08.133
> 
> 标签：javascript, template-engine, pug

我正在使用 Jade/Express 构建的网站工作了几周。我最近为网站组织了图像文件夹，因此所有图像都在几个文件夹之间分配，以便于使用和分类。

为了更容易更改图像（和其他此类文件）的层次结构，我编写了一个脚本，其中包含一些文件路径的全局变量。现在我一直在尝试让脚本运行，以便我可以调用翡翠模板中的函数来自动使用这些全局变量。

例如。图像现在被分类到几个文件夹中：

**文件层次结构**

```
img/
    glyphs/
    interactivity/
        buttons/
    ... 
```

在我的路径管理器脚本中，我创建了几个函数，包括：

在：**路径管理器.js**

```
 images_root_path = "/img/";
 glyph_path = images_root_path + "glyphs/";
 function getGlyph(color, name) {
     return glyph_path + color + "/" + name;
 } 
```

我尝试了几种方法来让脚本在模板之前执行。这是尝试之一：

在**page.jade**

```
include ../../../public/js/lib/path-manager.js
=NamespacePathManager(); 
```

理论上，上面应该包含js，然后我执行下面的命名空间以使功能可用，但这不起作用。

这是 Jade 模板的一部分，我想在其中使用该函数：

在**page.jade** *脚本之后包含*

```
span.challenge-time
   img(src=getGlyph("black","stopwatch.png"), style="margin-right:5px;") 
```

上面的例子应该返回：**“/img/glyphs/black/stopwatch.png”**

问题是，我相信，在呈现翡翠模板*之前*，我试图让翡翠模板在服务器端可用的脚本没有被执行。我为使其正常工作所做的一切尝试总是导致错误提示服务器无法识别函数*getGlyph*或当我开始使用命名空间函数*NamespacePathManager*

**摘要：**我希望在将jade模板渲染到网页之前执行一个javascript文件，以便我可以在服务器上调用该javascript中的函数和变量以在渲染jade模板时使用。我的问题是我尝试过的所有方法都无法在 Jade 渲染之前执行 javascript。

**更新** 我发现的一个解决方法是将 javascript 直接放入页面上的无缓冲代码中，包括一个玉。这不是我一直在寻找的优雅解决方案，但它现在有效

```
- some code
- more code 
```

此代码是内联执行的。缺点是我必须手动将它包含在每个页面上 - 而不是只包含一次并让功能随处可用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T08:57:55.547

您可以在 Express 中注册**帮助**方法，然后可以在视图中访问这些方法。

因此，在您的情况下，**path-manager.js**可以是您注册的帮助文件，并包含：

```
var images_root_path = "/img/";
var glyph_path = images_root_path + "glyphs/";

exports.helpers = {
  getGlyph: function (color, name) {
    return glyph_path + color + "/" + name;
  }

  // Other helper methods here..
}; 
```

然后在设置快递服务器时，注册助手

```
var app = express.createServer();

// app.configure here...
//   app.use ...

app.helpers(require('./path-manager.js').helpers);

// Routes set up here .. 
```

最后，您可以像这样从 Jade 视图调用辅助方法：

```
span.challenge-time
  img(src='#{getGlyph("black","stopwatch.png")}', style='margin-right:5px;') 
```

在 DailyJS [http://dailyjs.com/2011/01/03/node-tutorial-8/上有一篇关于这个主题的好文章](http://dailyjs.com/2011/01/03/node-tutorial-8/)

# java - Java是否每次都重新编译每个文件？

> ID：10420991
> 
> 赞同：0
> 
> 时间：2012-05-02T20:16:11.907
> 
> 标签：java, android, eclipse

我正在编译一个使用该`symja`库的示例 Android 应用程序，该库本身通过直接将以下库包含在以下库中来使用它们`src`：

```
com.google.common.*
edu.js.*
org.apache.commons.math*
org.matheclipse.* 
```

构建此应用程序大约需要 1:30 分钟和 2.8 GB RAM。我认为对于像计算机代数系统库这样复杂的东西来说这很好。

不幸的是，这不仅是第一次。

当我在组成实际应用程序而不是库的少数 .java 文件之一中仅更改一行代码时，我不得不再次等待 1:30 分钟。

这是我在那段时间收到的唯一进度通知：

[http://puu.sh/sBr5](http://puu.sh/sBr5)

我检查了文件修改日期，当时只更新了 .apk 和 .dex 文件。是什么让它花这么长时间？

[项目目录 (zip)](http://dl.dropbox.com/u/2399384/SymjaDroid.zip)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T20:26:18.973

The Eclipse Java builder is incremental (see "Sidebar: the Java Builder" on [this page](http://www.eclipse.org/articles/Article-Builders/builders.html)), so it shouldn't be having to rebuild your entire project every time. Something unusual must be going on if it is indeed recompiling every single file.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-02T20:20:39.987

只需在项目下的菜单中取消选择“自动构建”。

# android - 在gridview中旋转图像

> ID：10420992
> 
> 赞同：1
> 
> 时间：2012-05-02T20:16:13.470
> 
> 标签：android, image, gridview, rotation

我正在使用这个 gridview 示例[http://developer.android.com/resources/tutorials/views/hello-gridview.html](http://developer.android.com/resources/tutorials/views/hello-gridview.html)只是在一个角落有更少的图像和一个旋转按钮。我想单击一个图像，然后单击旋转按钮来旋转该图像，但我找不到如何做到这一点。

有人知道吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T20:36:07.463

如果您跟踪要旋转的图像，则可以使用 getView 中的 setImageMatrix() 来旋转图像。像这样的东西：

```
HashMap<Integer, Matrix> mImageTransforms = new HashMap<Integer,Matrix>();
Matrix mIdentityMatrix = new Matrix();

// create a new ImageView for each item referenced by the Adapter
public View getView(int position, View convertView, ViewGroup parent) {
    ImageView imageView;
    if (convertView == null) {  // if it's not recycled, initialize some attributes
        imageView = new ImageView(mContext);
        imageView.setLayoutParams(new GridView.LayoutParams(85, 85));
        imageView.setScaleType(ImageView.ScaleType.CENTER_CROP);
        imageView.setPadding(8, 8, 8, 8);
    } else {
        imageView = (ImageView) convertView;
    }

    Matrix m = mImageTransforms.get(position);
    if ( null == m ) {
        m = mIdentityMatrix;
    }
    imageView.setImageMatrix(m);
    imageView.setImageResource(mThumbIds[position]);
    return imageView;
}

void setImageRotation(int position, int degrees) {
    Matrix m = mImageTransforms.remove(position);        
    if ( degrees != 0 ) {
        if ( null == m ) m = new Matrix();
        m.setRotate(degrees);
        mImageTransforms.put(position, m);
    }
    notifyDataSetChanged();
} 
```

需要注意的一件事。在触摸模式中，列表和网格本身没有选择，但是可以检查它们。让网格视图显示选中状态有点棘手，据说[Honeypad 教程](http://android-codelabs.appspot.com/resources/tutorials/honeypad/index.html)展示了如何在列表视图中使用选中视图，这可能会有所帮助。

# javascript - 单击时获取按钮 ID 并将其应用于带有 javascript 的函数

> ID：10420996
> 
> 赞同：2
> 
> 时间：2012-05-02T20:16:38.143
> 
> 标签：javascript, onclick

我想在点击时获得一个按钮 ID 并将其应用于另一个函数。这是我的代码：

```
<button id="image-upload-button" onClick="reply_click(this.id)" data-link="<?php echo base_url().'admin/phones/upload_image/'; ?>" input-name="image" on-change="imageUpload(this.form);"></button> 
```

和 Javascript：

```
 //get button id
    function reply_click(clicked_id)
    {
        var button_id = clicked_id;
    }

    function reset() {
        var input_name = $('#' + button_id).attr('input-name');
        var on_change = $('#' + button_id).attr('on-change'); 
        var input = $('<input name="'+ input_name +'" type="file" onchange="'+ on_change +'"/>').appendTo(form);
        input.change(function(e) {
            input.unbind();
            input.detach();
            btn.trigger('choose', [input]);
            reset();
        });
    }; 
```

但是，当我添加 $('#' + button_id) 整个脚本停止工作。我该如何解决

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-02T20:19:54.763

您已经在 reply_click() 函数的范围内声明了 button_id 。您应该在外部将其声明为全局变量，然后在 reset_click() 函数中对其进行分配。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-02T20:19:10.347

`button_id`必须对 可见`reset`。在外面声明：

```
var button_id;

//get button id
function reply_click(clicked_id)
{
    button_id = clicked_id;
} 
```