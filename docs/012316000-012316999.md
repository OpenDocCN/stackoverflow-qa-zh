# StackOverflow 问答 12316000-12316999

# c# - 我可以在 C# 控制台应用程序中使用 Razor 脚本吗（而不是在 MVC3 应用程序中使用它）

> ID：12316003
> 
> 赞同：0
> 
> 时间：2012-09-07T10:08:18.420
> 
> 标签：c#, asp.net-mvc-3, razor

> **可能重复：**
> [是否可以在 asp.net 之外使用 Razor View Engine](https://stackoverflow.com/questions/3628895/is-it-possible-to-use-razor-view-engine-outside-asp-net)

我想在控制台应用程序中使用 Razor 脚本。

我正在创建的应用程序是富客户端（非 Web）应用程序，我不想为此使用 MVc3 网络主机。

我可以在 C# 控制台应用程序中使用 Razor 脚本吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-07T10:11:27.873

是的你可以。答案就在这里 [是否可以在 asp.net 之外使用 Razor View Engine](https://stackoverflow.com/questions/3628895/is-it-possible-to-use-razor-view-engine-outside-asp-net)

Razor 被广泛用作电子邮件渲染器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T10:40:16.457

添加对 System.Web.Razor.dll 的引用，并调用在该 System.Web.Razor.dll 中定义的类

# iis-7 - URL 重写 IIS 7 替换入站规则的 cookie 值

> ID：12316005
> 
> 赞同：1
> 
> 时间：2012-09-07T10:08:32.773
> 
> 标签：iis-7, url-rewrite-module

我的重写规则是

```
<rewrite>
  <rules>
    <rule name="rewrite cookie - inbound" enabled="true">
      <match url=".*" />
      <conditions trackAllCaptures="true">
        <add input="HTTP_COOKIE" pattern="(.*)__srf_tk_(.*)" />
      </conditions>
      <serverVariables>
        <set name="HTTP_COOKIE" value="{C:1}__validation_token__{C:2}" />
      </serverVariables>
      <action type="None" />
    </rule>
  </rules>
</rewrite> 
```

如果入站请求中 cookie 的名称以**srf_tk_ 开头，则将其替换为 __validation_token** 上述规则不起作用。有人可以帮我调试吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T13:59:43.147

弄清楚问题是什么替换行

```
<add input="HTTP_COOKIE" pattern="(.*)__srf_tk_(.*)" /> 
```

和

```
<add input="{HTTP_COOKIE}" pattern="(.*)__srf_tk_(.*)" /> 
```

# mysql - mysql查询绘制线性图

> ID：12316011
> 
> 赞同：1
> 
> 时间：2012-09-07T10:08:58.803
> 
> 标签：mysql, jakarta-ee, charts

我想在我的 xhtml 页面中绘制一个线性图表。横坐标是月份，纵坐标是每月的订单数量。在您看来，是否可以创建一个 mysql 查询来返回一个列表，其中每一行在第二个属性中包含一个月和订单数量。

这是我的桌子：

![在此处输入图像描述](../Images/739d9f931d57f98e0048774dc113a3fd.png)

这是检索所有 date_envoi 的 sql 查询：

```
select date_envoi from commande; 
```

这是图像：

![在此处输入图像描述](../Images/6a8461fa196e66ec2413d398cb1a8bd9.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T10:12:16.460

您需要`GROUP`通过`MONTH`and记录`YEAR`：

```
SELECT DATE_FORMAT(date_envoi, '%M %Y') AS month,
       COUNT(*) AS order_quantity
FROM commande
GROUP BY YEAR(date_envoi), MONTH(date_envoi); 
```

**编辑：**以数字格式获取月份：

```
SELECT YEAR(date_envoi) AS year,
       MONTH(date_envoi) AS month,
       COUNT(*) AS order_quantity
FROM commande
GROUP BY YEAR(date_envoi), MONTH(date_envoi); 
```

**编辑2：**

```
SELECT `month`, SUM(order_quantity) AS order_quantity
FROM(

    SELECT MONTH(date_envoi) AS month,
           COUNT(*) AS order_quantity
    FROM commande
    GROUP BY MONTH(date_envoi)
    UNION ALL
    SELECT 1 AS month, 0 order_quantity
    UNION ALL
    SELECT 2 AS month, 0 order_quantity
    UNION ALL
    SELECT 3 AS month, 0 order_quantity
    UNION ALL
    SELECT 4 AS month, 0 order_quantity
    UNION ALL
    SELECT 5 AS month, 0 order_quantity
    UNION ALL
    SELECT 6 AS month, 0 order_quantity
    UNION ALL
    SELECT 7 AS month, 0 order_quantity
    UNION ALL
    SELECT 8 AS month, 0 order_quantity
    UNION ALL
    SELECT 9 AS month, 0 order_quantity
    UNION ALL
    SELECT 10 AS month, 0 order_quantity
    UNION ALL
    SELECT 11 AS month, 0 order_quantity
    UNION ALL
    SELECT 12 AS month, 0 order_quantity
) a
GROUP BY `month`
ORDER BY `month` ASC; 
```

# android - 使扩展 ListActivity 的活动扩展 BaseScreen

> ID：12316012
> 
> 赞同：0
> 
> 时间：2012-09-07T10:09:03.807
> 
> 标签：android, android-listview

我有两个活动。ScreenOne.java 和 ScreenTwo.java。

ScreenOne 扩展 BaseScreen ScreenTwo 扩展 ListActivity

我希望 ScreenTwo 扩展 BaseScreen 作为后退按钮事件使应用程序崩溃。

```
this.mainListView = getListView(); 
```

如果我更改扩展名，这是唯一会引发错误的行。

错误是：

```
The method getListView() is undefined for the type ScreenTwo. 
```

我的后退按钮代码：

```
 @Override
 public boolean onKeyDown(int keyCode, KeyEvent event) {
if ((keyCode == KeyEvent.KEYCODE_BACK)) {
     Intent intent = new Intent(getBaseContext(), ScreenThree.class); 
     startActivity(intent); 
        }
        return true;
    } 
```

我需要以下解决方法之一：

*   使 ScreenTwo 扩展 BaseScreen
*   “麻烦”代码行的替代方案
*   覆盖 Back 按钮以开始一个新活动。

LogCat 输出：

```
09-07 11:30:13.419: E/AndroidRuntime(2845): FATAL EXCEPTION: main
09-07 11:30:13.419: E/AndroidRuntime(2845): java.lang.ClassCastException: com.example.Droid.Screens.ScreenTwo
09-07 11:30:13.419: E/AndroidRuntime(2845): at com.example.Droid.Services.ScreenService.getCurrentScreen(ScreenService.java:226)
09-07 11:30:13.419: E/AndroidRuntime(2845): at com.example.Droid.Screens.BaseScreen.processKeyDown(BaseScreen.java:310)
09-07 11:30:13.419: E/AndroidRuntime(2845): at com.example.Droid.Main.onKeyDown(Main.java:183)
09-07 11:30:13.419: E/AndroidRuntime(2845): at android.view.KeyEvent.dispatch(KeyEvent.java:1256)
09-07 11:30:13.419: E/AndroidRuntime(2845): at android.app.Activity.dispatchKeyEvent(Activity.java:2078)
09-07 11:30:13.419: E/AndroidRuntime(2845): at com.android.internal.policy.impl.PhoneWindow$DecorView.dispatchKeyEvent(PhoneWindow.java:1709)
09-07 11:30:13.419: E/AndroidRuntime(2845): at android.view.ViewRoot.deliverKeyEventToViewHierarchy(ViewRoot.java:2628)
09-07 11:30:13.419: E/AndroidRuntime(2845): at android.view.ViewRoot.handleFinishedEvent(ViewRoot.java:2603)
09-07 11:30:13.419: E/AndroidRuntime(2845): at android.view.ViewRoot.handleMessage(ViewRoot.java:1875)
09-07 11:30:13.419: E/AndroidRuntime(2845): at android.os.Handler.dispatchMessage(Handler.java:99)
09-07 11:30:13.419: E/AndroidRuntime(2845): at android.os.Looper.loop(Looper.java:123)
09-07 11:30:13.419: E/AndroidRuntime(2845): at android.app.ActivityThread.main(ActivityThread.java:3687)
09-07 11:30:13.419: E/AndroidRuntime(2845): at java.lang.reflect.Method.invokeNative(Native Method)
09-07 11:30:13.419: E/AndroidRuntime(2845): at java.lang.reflect.Method.invoke(Method.java:507)
09-07 11:30:13.419: E/AndroidRuntime(2845): at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:867)
09-07 11:30:13.419: E/AndroidRuntime(2845): at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:625)
09-07 11:30:13.419: E/AndroidRuntime(2845): at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T10:15:58.133

如果您`@android:id/list`用作 ListView 的 ID，请使用：

```
ListView listView = (ListView) findViewByID(android.R.id.list); 
```

否则使用：

```
ListView listView = (ListView) findViewByID(R.id.listView); // the id of your listView given in xml file. 
```

这样，您不必扩展`ListActivity`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T11:06:09.303

`Make ScreenTwo extend BaseScreen`

只有你需要改变的是：

在 XML 中：

删除`id = "@android:id/list"` ListView 并使其类似于 `id = "@+id/yourListView"`

并在活动中而不是使用

```
this.mainListView = getListView(); 
```

采用

```
ListView yourListView = (ListView) findViewById(R.id.yourListView); 
```

这些是您唯一需要改变的事情。如果你在改变这些之后没有得到你想要的。然后是因为其他原因，而不是继承问题

或者根据你的第三点使用这个：

```
@Override
public void onBackPressed() {

   Intent intent = new Intent(CurrentActivity.this, ScreenThree.class);
   startActivity(setIntent);
} 
```

# java - 将动态 WHERE 子句传递给 Java/JDBC 中的函数的安全方法

> ID：12316015
> 
> 赞同：1
> 
> 时间：2012-09-07T10:09:19.800
> 
> 标签：java, postgresql, struts

我有一个方法' `getAllIDs()`'用于获取数据库中特定表的 ID。它在我的项目中被许多方法使用。

```
public static int[] getAllIDs (String TableName, String WhereClause, String trxName)
    {
        ArrayList<Integer> list = new ArrayList<Integer>();
        StringBuffer sql = new StringBuffer("SELECT ");
        sql.append(TableName).append("_ID FROM ").append(TableName);
        if (WhereClause != null && WhereClause.length() > 0)
            sql.append(" WHERE ").append(WhereClause);
        PreparedStatement pstmt = null;
        ResultSet rs = null;
        try
        {
            pstmt = DB.prepareStatement(sql.toString(), trxName);
            rs = pstmt.executeQuery();
            while (rs.next())
                list.add(new Integer(rs.getInt(1)));
        }
} 
```

Whereclause 是查询的条件部分。由于这个 whereclause，有可能进行 sql 注入。所以我需要修改这个方法来使用prepared statement参数设置来设置参数。我遇到的问题是因为 ' `getAllIDs()`' 不知道每个 where 子句有多少参数。

每个 where 子句的参数都不同，它可以是任意数字。对于某些类，参数将为 3，对于某些类，参数为 2，等等具有不同的数据类型。那么我如何使用 setstring()、setint() 等。用我发布的代码解释一下。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-07T10:27:34.333

Pass an additional `PreparedStatementBinder` argument to the method:

```
public interface PreparedStatementBinder {
    /**
     * Binds all the arguments to the given prepared statement
     */
    public void bindArguments(PreparedStatement statement) throws SQLException;
} 
```

The caller will have to pass a where clause (such as `"foo = ? and bar = ?"`), and an instance of this interface, such as

```
new PreparedStatementBinder() {
    @Override
    public void bindArguments(PreparedStatement statement) throws SQLException {
        statement.setString(1, theFoo);
        statement.setInt(2, theBar);
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-07T10:28:21.820

There are several possible ways to do this. A simple one could be to make the `WhereClause` behave like a map where you keep parameter names and values. Then you define the prepared statement template based on the keys and fill it with values. You may need a smarter data structure if you want to join the where clauses with AND/OR keywords or use different operators for each clause: = / < / > / NOT / IS NULL etc, all this dynamically.

If you can make use of more sophisticated libraries, the Criteria API in Hibernate or other ORM tools can be really suitable for this kind of usecase.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-07T10:33:14.237

听起来您可能正在构建对象关系映射器 (ORM)、查询生成器或类似的东西。

如果是这样，请考虑使用现有的解决方案来解决问题，因为这些解决方案比看起来更难解决。

考虑 JPA 或 Hibernate Criteria API；它们很丑陋，但很全面。还有许多其他的程序化查询生成器，并非所有这些都与 ORM 相关联。

不要重新发明这个轮子。现在可能看起来很容易，但您将继续遇到限制，直到您的设计开始变得非常复杂和笨拙。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-07T10:21:57.750

也许我把你们都弄错了，但我根据我从你的陈述中得出的结论提出了一个解决方案。使`Where-Clause`参数可选，如

```
public static int[] getAllIDs (String tableName, String... whereClause, String trxName) 
```

如果它们出现，请将它们设置为

```
 for(String param:whereClause)
  {
       pst.setParameter("Param-name",param);
  } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-07T13:53:48.560

大多数人建议使用完整的 ORM 解决方案，例如 Hibernate 或 JPA。如果您只需要一个查询来集成其中任何一个，则需要付出一些努力，但我猜这不是唯一受 SQL 注入影响的查询，并且该设置可以重用于部分/大多数/全部应用程序中的查询。

然而，一个快速而肮脏的解决方案是为标准的每个变体创建方法，如果它们只有几个。每个方法都会接受所需参数的确切类型，并知道如何将这些参数绑定到preparedStatement。类中可能有一个工厂方法（由这些方法调用），它将传递表名、txn 名称等，并返回 SELECT 和 FROM 子句。

无论您选择哪种解决方案，getAllIds() 的调用者都需要更改。

# apple-push-notifications - 使用 ad hoc 配置进行 Apns 测试

> ID：12316017
> 
> 赞同：2
> 
> 时间：2012-09-07T10:09:36.717
> 
> 标签：apple-push-notifications, production, provisioning-profile

我正在开发一个适用于 Apple 推送通知的应用程序，但我在测试时遇到了一些问题。我已经在沙盒中测试了该应用程序，并且一切正常：它可以发送和接收推送通知，但是对于一个设备（我认为这是沙盒版本的正确行为）。

但是当我使用他的生产配置创建一个临时版本时，我有相同的行为：只有一个设备工作正常，它发送和接收推送，但其他设备不接收任何推送。所有设备都可以发送推送，但只有第一个可以接收。

在无法接收推送的设备上安装“PersistentConnectionLogging.mobileconfig”后，我可以在控制台上阅读：

```
Sep  7 13:17:51 unknown apsd[49] <Warning>: <APSCourier: 0x25a0a0>: Received message for enabled topic 'myapp.name' with payload '(null)'
Sep  7 13:17:51 unknown apsd[49] <Warning>: <APSCourier: 0x25a0a0>: Failed to parse JSON message payload for topic 'myapp.name': The operation couldn’-t -b-e -c-o-m-p-l-e-t-e-d-. -(-C-o-c-o-a -e-r-r-o-r -3-8-4-0-.-) 
```

我无法解决这个问题，我已经多次重新生成配置文件，并且在服务器端连接上一切正常，Apple 的反馈是好的。

我已经检查了我存储的设备令牌和沙箱和生产不同，有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-29T09:39:17.993

根据要求合并作为答案发布的评论：（这些有助于分解问题并确定错误发生的位置）

*   您如何/在哪里存储您的设备令牌？您如何生成要推送的消息？

*   您连接到推送服务器并创建有效负载的代码......它如何发送到>1个设备？

*   我不知道 easyApns 代码，但是您的其他设备令牌无效或代码未正确循环以将消息推送到其他设备。此外，通过 Google 浏览可可错误 3840，看看是否有任何帮助您更好地理解该问题。否则选择一些不同的推送代码，看看[下面的链接]作为起点。

[http://www.raywenderlich.com/3443/apple-push-notification-services-tutorial-part-12](http://www.raywenderlich.com/3443/apple-push-notification-services-tutorial-part-12)

# android - 如何在不同行的单个文本视图中显示两个值

> ID：12316019
> 
> 赞同：0
> 
> 时间：2012-09-07T10:09:40.867
> 
> 标签：android, textview

您如何使用单个在不同的行上显示两个值`testview`？我可以通过使用两个 textview 来获得这个，但我想在一个`textview`. 我应该做什么？

```
 xmlRespone[3][1]= Salman Ahmed
 xmlRespone[4][1]= 435000;

TextView lblWelcome = (TextView) findViewById(R.id.lblWelcome);
            lblWelcome.setText("Welcome " + xmlRespone[3][1]);

            TextView lblYouraccountbalance = (TextView)  
   findViewById(R.id.lblYouraccountbalance);
            lblYouraccountbalance.setText(" balance :" + xmlRespone[4][1]); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T10:10:59.500

尝试“\n”换行。

```
TextView lblWelcome = (TextView) findViewById(R.id.lblWelcome);
lblWelcome.setText("Welcome " + xmlRespone[3][1] + "\n" + xmlRespone[4][1]);

Output  : Welcome Salman Ahmed
          435000 
```

# sql - 仅返回每个连接的第一个不同行

> ID：12316021
> 
> 赞同：1
> 
> 时间：2012-09-07T10:09:46.063
> 
> 标签：sql, sql-server, join, distinct

场景很简单。我有 4 个表，A 表、B 表、C1 表和 C2 表。A 是根级表，B 引用 A，C1 和 C2 引用 B。但是每个 B.ID 只能被 C1 或 C2 引用，不能同时被两者引用。结果被导出到 .CSV 文件，然后用于各种目的，这里的问题与可读性有关，以及更容易管理外部软件中的信息。

我编写了一个查询，返回所有 4 个表中的所有数据，保持关系完整，按 A、B、C1 和 C2 排序。

```
SELECT A.*, B.*, C1.*, C2.*
FROM A
JOIN B 
LEFT JOIN C1
LEFT JOIN C2
ORDER BY A.ID, B.ID, etc. 
```

得到了这个：

```
A.ID | B.ID | C1.ID | C2.ID
    1|     1|      1|  NULL
    1|     1|      2|  NULL
    1|     2|      1|  NULL
    1|     2|      2|  NULL
    1|     2|      3|  NULL
    2|     1|   NULL|     1
    2|     1|   NULL|     2
.... 
```

现在，这里的问题是：如何只为每个连接返回第一个不同的行，以便结果集不会被冗余数据阻塞。基本上，上面的结果应该产生这样的结果：

```
A.ID | B.ID | C1.ID | C2.ID
    1|     1|      1|  NULL
     |      |      2|  NULL
     |     2|      1|  NULL
     |      |      2|  NULL
     |      |      3|  NULL
    2|     1|   NULL|     1
     |      |   NULL|     2
.... 
```

我可以通过使每个连接成为子查询并按等级对结果进行分区来做到这一点，或者创建一个临时表并使用所需的逻辑猛击结果，但由于这将在控制台应用程序中使用，我想尽可能保持解决方案干净、简单和优化。

有任何想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-07T10:27:09.500

这是报告/格式化，而不是数据，所以它应该由应用程序处理，而不是 SQL。

也就是说，这将产生接近您要求的东西

```
select 
    case arn when 1 then convert(varchar(10),aid) else '' end as aid,
    case brn when 1 then convert(varchar(10),bid) else '' end as bid,
    case crn when 1 then convert(varchar(10),c1id) else '' end as c1id,
    c2id        
from
(    
           select a.id aid, b.id bid, c1.id c1id, c2.id c2id,
    ROW_NUMBER() over(partition by a.id order by a.id,b.id,c1.id,c2.id) arn,
    ROW_NUMBER() over(partition by a.id,b.id order by a.id,b.id,c1.id,c2.id) brn,
    ROW_NUMBER() over(partition by a.id,b.id,c1.id order by a.id,b.id,c1.id,c2.id) crn
           FROM A 
           JOIN B  
           LEFT JOIN C1 
           LEFT JOIN C2 

) v 
```

# c# - 使用 EF 将新对象和更新现有对象添加到多对多表中

> ID：12316028
> 
> 赞同：0
> 
> 时间：2012-09-07T10:10:19.153
> 
> 标签：c#, sql-server, linq, entity-framework, many-to-many

```
class A
{
    int Id; //Primary key
    string Name;
}

class B
{
    int Id; //Primary key
    string Name;
}

class AB
{
    int Id; //PK
    int AId; //FK
    int BId; //FK
} 
```

在这种情况下：“A”存在于数据库“B”中，“AB”是新创建的对象。

```
A a = new A("asd");
B b = new B("qwe");
AB ab = new AB(1, 1); 
```

我应该如何将它与 Entity Framework 添加到数据库中？

是这样的吗？每个实体应该是 3 个上下文？

```
mydb.A.Context.ApplyCurrentValues(a)
mydb.B.Context.AddObject(b)
mydb.AB.Context.AddObject(ab) //connected with A and B above 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T11:02:43.730

在数据库优先方法中，首先您的实体 AB 不必要地将主键作为其关联实体。除非您想在该表上保留其他属性，否则不需要 Pk，否则会导致 EF 4 创建单独的实体。

Db关系图：

![在此处输入图像描述](../Images/b15d481fe74464eb0adaf8d208862dc1.png)

EF edmx 结果：

![在此处输入图像描述](../Images/01b0ee93ed196f0ec0e1be1258d8b7e8.png)

使用这种关系来回答您的问题。

```
 public void addNewBtoA(B newEntity, A existingEntity) {

        _myContext.Attach(existingEntity);
        existingEntity.B.Add(newEntity);
        myContext.SaveChanges();

    } 
```

编辑：

AB 记录由 EF 在 Db 中为多对多关系自动创建。

编辑2：

如果实体 AB 上有其他属性，则 EF 会将其作为单独的实体导入，更新上下文将总结如下：

```
B b = new B {
    Name = "name"
};

AB ab = new AB {

    A = existingA,
    B = b,
    arbitraryProp = "my heart is a fist of blood" 

}

_myContext.Attach(existingA);
_myContext.Add(b);
_myContext.Add(ab);
_myContext.SaveChanges(); 
```

添加的顺序无关紧要，因为 EF 根据 .edmx 中定义的模型关系确定插入顺序。请记住，仅当当前未跟踪`existingA`时才需要附加- 即，如果已使用然后它已被附加。`existingA``_myContext``existingA``_myContext.A.SingleOrDefault()`

编辑 3：

```
public void testab() {
            A existingA = new A {
                Name = "test a"
            };

            using (ABEntities context = new ABEntities()) {
                context.A.AddObject(existingA);

                context.SaveChanges();
            }

            using (ABEntities context = new ABEntities()) {
                B newB = new B {
                    Name = "test b"
                };

                context.Attach(existingA);
                existingA.B.Add(newB);
                context.SaveChanges();
            }
        } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T11:01:35.280

You need modify your `AB` class definition as follows

```
class AB
{
    public int Id { get; set; }
    public virtual A A { get; set; }
    public virtual B B { get; set; }
} 
```

Then

```
AB ab = new AB { A = a, B = b };

// if 'a' is not attached call mydb.A.Attach(a);
mydb.AB.AddObject(ab); 
```

EF will figure out the insertion order of the entities.

# opencv - OpenCV如何计算二进制对象的面积？

> ID：12316031
> 
> 赞同：3
> 
> 时间：2012-09-07T10:10:27.433
> 
> 标签：opencv

我正在使用 OpenCV 和 c++。二值化后我有黑白图像。当我只有一个点 (x,y) 的坐标属于该对象时，如何计算对象的面积？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T14:15:22.727

由于它是二进制图像，因此您可以轻松获取[blobs](http://en.wikipedia.org/wiki/Blob_detection)。获得斑点后，您可以轻松计算斑点面积。您可以使用[cvBlobsLib](http://opencv.willowgarage.com/wiki/cvBlobsLib)来获取 blob。OpenCV 没有集成 cvBlobsLib。你可以自己做。但是 OpenCV 具有轮廓功能。您可以使用 findContours 获取斑点/轮廓，然后获取该区域。[OpenCV - 查找轮廓](http://docs.opencv.org/2.4.2/doc/tutorials/imgproc/shapedescriptors/find_contours/find_contours.html)

[OpenCV - 结构分析和形状描述](http://opencv.itseez.com/modules/imgproc/doc/structural_analysis_and_shape_descriptors.html)

您将找到有关时刻、huMoments、轮廓等的信息。使用时刻，您可以创建自己的 blob，它还将帮助您获取 blob 区域。

这是一个用于机器视觉的开源框架，它使用 OpenCV 的 Python 绑定 - [SimpleCV](http://simplecv.org/)

他们使用轮廓和矩实现了完整的 blob 功能。你可以看看。

[斑点](https://github.com/ingenuitas/SimpleCV/blob/develop/SimpleCV/Features/Blob.py)

[BlobMaker](https://github.com/ingenuitas/SimpleCV/blob/develop/SimpleCV/Features/BlobMaker.py)

它是用 Python 编写的，但您可以将其移植到 C++ 并使用 blob。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-08T08:44:28.160

该算法非常简单，应该如下：

1.  [找到图像上的所有轮廓](http://docs.opencv.org/2.4.2/doc/tutorials/imgproc/shapedescriptors/find_contours/find_contours.html)。
2.  循环遍历所有轮廓并[检查点是否在轮廓内](http://opencv.itseez.com/modules/imgproc/doc/structural_analysis_and_shape_descriptors.html?highlight=pointpolygontest#pointpolygontest)。
3.  如果找到轮廓，则计算[它的面积](http://opencv.itseez.com/modules/imgproc/doc/structural_analysis_and_shape_descriptors.html?highlight=contourarea#contourarea)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-07T15:45:13.710

您必须编写某种区域增长算法，从您的起点开始，逐步添加相同颜色的相邻像素。

一种懒惰（而且慢得多）的方法是使用 cv::floodFill 函数，将形状中的像素设置为特定颜色，然后计算图像中具有这种特定颜色的像素。

# c# - 从字符串数量输出 HTML

> ID：12316033
> 
> 赞同：1
> 
> 时间：2012-09-07T10:10:34.343
> 
> 标签：c#

我试图弄清楚如何最好地组织一个内联 c# 页面，该页面建立多个数据库连接并将值传递给字符串并需要一些建议。

所以基本上我的工作场所使用的 CMS 只允许内联代码，所以我正在做一个课程搜索页面，它连接到一些存储过程并将值传递给字符串。

处理将不同位信息输出到字符串的三个不同存储过程调用的最佳方法是什么？在旧的 VB 版本中，我将信息传递给字符串，然后将它们作为一个大字符串输出，这可能不是处理这个问题的最佳方法。

代码目前采用这种粗略的格式

```
Stored Procedure 1
Pass x values to string
string = "<p> + xString +</p>"

Stored Procedure 2
Pass y values to string
string = "<p> + yString +</p>" 
```

有没有更聪明的方法来关闭部分，因为每个过程部分通常都涉及一个表或附加到一个更大的表，我只是想看看人们会建议什么是最佳实践。

请注意，我真的不是一个程序员，如果这是一个男生的错误，我只是伸手道歉。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T10:29:37.893

有多种连接字符串的方法：

你可以使用一个`StringBuilder`. 这种类型允许您追加和插入文本，然后使用该`ToString()`方法输出所有文本。

`StringBuilders`通常在从循环中向字符串添加文本时使用。（我已经读过，一旦你有超过 10 个连接，就鼓励使用 StringBuilder）

由于您只需将文本附加到字符串 3 次，您就可以使用： `String.Concat`或`yourString += string.Format("<p>{0}</p>", stringToBeAdded);`

在您的情况下，文本可能彼此不相关，在这种情况下，还有其他可用选项：

```
// Using an array (fixed size)
string[3] yourStrings;
yourStrings[0] = "first string";
yourStrings[2] = "last string";

// Using a list (dynamic sized)
var yourStrings = new List<string>();
yourStrings.Add(storedProcResult.ToString()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T10:52:32.673

我建议您尝试使问题更清楚，但是如果我理解正确，我认为最好创建一个存储过程来运行其他存储过程并将结果存储在临时表中，例如

```
INSERT INTO #MyTable1 EXEC procedure1 @param
INSERT INTO #MyTable2 EXEC procedure2 @param
INSERT INTO #MyTable3 EXEC procedure3 @param 
```

然后在同一个存储过程中运行一个简单的选择语句，根据需要连接字符串并将它们返回到您的内联代码，例如

```
SELECT CONCAT( MyTable1.emp_name, MyTable2.emp_middlename, MyTable3.emp_lastname ) AS Result 
```

# java - wso2 carbon studio：将类调解器上传到 ESB

> ID：12316034
> 
> 赞同：1
> 
> 时间：2012-09-07T10:10:37.617
> 
> 标签：java, wso2, wso2esb, esb, wso2carbon

**在 ESB 上部署类 Mediator 的最快方法是什么？**

我在 Eclipse 中有我的自定义调解器，每次我将项目提取为 JAR 文件并将其放入“ESB\repository\components\lib”但它不会每次都提交更改......

看起来 ESB 仍然使用我的自定义中介的旧版本。

请建议

**编辑**：还要部署最后一个版本，我需要删除“dropins”文件夹中的所有文件

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-10T09:28:27.497

我建议的最快方法（使用 Developer Studio 2.0.1）：

1.  创建中介项目
2.  创建一个 Carbon 应用程序项目并将中介项目作为 C-App 工件包含在 C-App 项目中
3.  导出C-App工程，获取CAR文件
4.  将 CAR 文件部署到 C-App 部署文件夹（/repository/deployment/server/carbonapps）

** 无需重新启动服务器或删除 components/lib 位置或 components/dropins 位置中的现有 Jar

我建议的最快方法（使用 Carbon Studio 1.0.14）：

1.  将“碳应用项目”导出为 CAR
2.  将 CAR 放入 /repository/deployment/server/carbonapps

** 无需重新启动服务器或删除 components/lib 位置或 components/dropins 位置中的现有 Jar

** 更新现有调解器时，将 C-App 部署位置中的现有 CAR 文件替换为新的 CAR 并重新启动服务器

哈沙娜

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-07T23:27:00.310

您可以使用 Developer Studio（以前称为 carbon studio）创建您的自定义中介项目，然后将您的中介逻辑包含在该类中介项目 [1] 中。然后在 Developer Studio 中创建一个 C-App 项目，其中包含您的 Class 调解器作为 C-App 工件[2]。

导出此 C-App 项目后，您将获得一个 CAR 文件，其中包含您的 Class mediator[3]。在 ESB 中部署此 CAR 文件后，它将自动在 ESB 中部署类中介器 OSGi 包，您可以立即使用类中介器。

当您更新类中介器逻辑时，您可以重新导出 C-App 项目并简单地将 ESB 中的现有 CAR 文件替换为新的 CAR 文件。然后，您之前的类中介 OSGi 包将从 ESB 中删除。但是由于 Equinox OSGi 实现的限制，在重新启动服务器之前，您将无法使用新版本的类中介器。

因此，您需要做的就是用较新版本的 CAR 文件替换现有的 CAR 文件并重新启动 ESB 服务器。ESB 服务器将负责将 OSGi 包部署到系统中。

由于我们已经实现了通过 Eclipse 本身 [4] 将 C-App 部署到 Carbon Server 的支持，因此您也可以使用这种方法。您需要做的是，将 ESB 服务器添加到 Eclipse 实例并通过 Eclipse 本身部署包含类中介的 C-App。当您采用这种方法时，您可以更新类中介器中的逻辑并通过 Eclipse [5] 将新版本的 CAR 文件重新部署到服务器。

甚至可以按照 [6] 中的指南在 Developer Studio 中调试您的 Class mediator。

[1]。[http://wso2.org/project/developer-studio/2.0.1/docs/server_extensions_category.html#CustomMediator](http://wso2.org/project/developer-studio/2.0.1/docs/server_extensions_category.html#CustomMediator)

[2]。[http://wso2.org/project/developer-studio/2.0.1/docs/packaging.html#Distribution](http://wso2.org/project/developer-studio/2.0.1/docs/packaging.html#Distribution)

[3]。[http://wso2.org/project/developer-studio/2.0.1/docs/testing_deploying_category.html#CarGen](http://wso2.org/project/developer-studio/2.0.1/docs/testing_deploying_category.html#CarGen)

[4]。[http://wso2.org/project/developer-studio/2.0.1/docs/testing_deploying_category.html#Deploy](http://wso2.org/project/developer-studio/2.0.1/docs/testing_deploying_category.html#Deploy)

[5]。[http://wso2.org/project/developer-studio/2.0.1/docs/testing_deploying_category.html#Redeploy](http://wso2.org/project/developer-studio/2.0.1/docs/testing_deploying_category.html#Redeploy)

[6]。[http://wso2.org/project/developer-studio/2.0.1/docs/testing_deploying_category.html#debug](http://wso2.org/project/developer-studio/2.0.1/docs/testing_deploying_category.html#debug)

希望这可以帮助！

哈沙娜

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-10T08:17:09.013

到目前为止我发现的最快的方法是：

1.  将“碳应用项目”导出为 JAR
2.  将 jar 放入 WSO2_ESB\repository\components\lib
3.  删除 WSO2_ESB\repository\components\dropins 中的相关 jar
4.  重启 ESB

# objective-c - 控制台在使用 NSLog 显示数组的占位符时没有显示正确的值

> ID：12316035
> 
> 赞同：0
> 
> 时间：2012-09-07T10:10:48.363
> 
> 标签：objective-c, xcode

我尝试使用以下代码在控制台中打印数组的第二个占位符：

```
NSArray *europeTransaction = [[NSArray alloc] initWithObjects:europeDollarTransaction,  [NSNumber alloc] initWithDouble: 200.00], nil];    

NSLog(@"I'm displaying the second placeholders value in the NSArray %.2f", europeTransaction [1]); 
```

控制台显示的值为 0.00，而它应该给我的值为 200。代码有什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T10:13:52.937

格式说明符`%f`用于浮点数，而您正在传递一个`NSNumber`实例。使用说明符`%@`或询问`NSNumber`其浮点表示：

```
NSLog(@"I'm displaying the second placeholders value in the NSArray %.2f",
      [europeTransaction[1] floatValue]); 
```

# java - java.lang.IllegalArgumentException：在 java 中尝试谷歌日历 Api 时未找到 JSON 输入

> ID：12316039
> 
> 赞同：2
> 
> 时间：2012-09-07T10:11:12.490
> 
> 标签：java, oauth-2.0, google-calendar-api, google-api-java-client

[我从http://code.google.com/p/google-api-java-client/source/browse/calendar-cmdline-sample/?repo=samples](http://code.google.com/p/google-api-java-client/source/browse/calendar-cmdline-sample/?repo=samples)下载了谷歌日历 api 示例，并在 eclipse 中创建了一个项目。现在，当我尝试运行该项目时，我正在`java.lang.IllegalArgumentException: no JSON input found`这条线上

```
 FileCredentialStore credentialStore = new FileCredentialStore(
        new File(System.getProperty("user.home"), ".credentials/calendar.json"), JSON_FACTORY); 
```

你们有人试过这个例子吗？这里有什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T06:28:18.100

可以通过向 .credentials/calendar.json 文件提供输入来解决此错误。如果您在 calendar.json 中手动提供了以下条目，它将起作用：

```
{
  "installed": {
    "client_id": "client_id",
    "client_secret": "client_secret"
  }
} 
```

这似乎是 Windows 问题，它不允许在 calendar.json 文件上设置可写权限。方法 setWritable(boolean,boolean) 返回 false，因此是此问题的原因。仍然手动提供 json 输入并不是一个完美的解决方案，但您的应用程序可以工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T03:45:23.870

当您的应用程序之前执行并在您的主目录中创建空的 .credentials/calendar.json 文件时，可能会发生这种情况。如果您在 Windows 中运行应用程序，可能会发生这种情况，导致 FileCredentialStore 尝试执行：file.setReadable(false, false) 并失败。

要解决它，只需删除 calendar.json。尽管您可能还有另一个错误：[无法设置文件权限]，但我还不知道如何解决。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-09-07T12:21:33.963

该项目是否具有 calendar.json 资源文件。请分享完整的异常堆栈跟踪。 **似乎 calendar.json 文件中缺少一些必需的配置**

# android - 如何隐藏我的应用程序的弹出窗口？

> ID：12316042
> 
> 赞同：0
> 
> 时间：2012-09-07T10:11:17.617
> 
> 标签：android, popup

看看下面的图片

![在此处输入图像描述](../Images/f67681868e9dff1e80c4fb737fb6db36.png)

前台弹出的是handsent sms app。后台是我的app。我的问题是每当收到短信弹出窗口打开。坏事是即使我的应用程序运行。他们的弹出框可能会打扰我的应用程序用户。如何阻止他们在我的屏幕上弹出。打开默认短信应用程序，然后手动发送短信应用程序不会在窗口上显示弹出窗口。就像我也想阻止我的应用程序屏幕上的其他弹出窗口一样。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T10:32:09.407

> 他们的弹出框可能会打扰我的应用用户..如何阻止他们在我的屏幕上弹出

你不知道。这不是您应该尝试控制的事情，如果用户有一个弹出的应用程序，那可能是他们的偏好。但是，您的应用程序应该为中断做好准备，即[正确处理您的应用程序的生命周期](http://developer.android.com/reference/android/app/Activity.html#ActivityLifecycle)

# java - JPanel 设置为 A4 大小

> ID：12316047
> 
> 赞同：4
> 
> 时间：2012-09-07T10:11:23.973
> 
> 标签：java, swing, jpanel, page-size

我正在用 Java 创建一个可以输出到 PDF 的文本编辑器。为了尽可能地同步出现在我的程序中的数据和输出 PDF，我必须有一个与 A4 纸大小相同（或至少按比例）的 JPanel。我尝试将其 mm 尺寸 (297x210) 转换为像素，但在 PDF 中打开常规尺寸的 A4 文档会导致页面比我的 JPanel 更大。

以像素为单位的特定大小是否与以 A4 大小创建的每个文档（.doc、.pdf 等）的大小相匹配（以 100% 显示），或者程序之间是否存在差异？

我正在尝试理解整个转换交易......我是否必须在视觉上匹配 Adob​​e 阅读器中的尺寸，或者是否有某种因素可以与页面尺寸相乘（以英寸或毫米为单位）？有谁知道整个页面大小格式交易是如何工作的？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-07T10:18:07.067

根据我的经验，没有打印机标准这样的东西。打印机或 Adob​​e Acrobat Reader 等软件的行为差异很大。有些人可能会自动缩小您的 A4 大小的面板以适合带有边距的单页，而其他人可能会打印出 4 页，第二页有一个像素列，第 3 页有一个像素行。

不幸的是，你必须通过反复试验来解决它。使其适用于 Acrobat Reader，然后尝试将其打印出来，看看结果是否相同。它有助于提供有关如何格式化页面的所有提示。缺少这些提示，该软件的大部分内容往往会猜测您的意图是什么。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-07T10:34:35.460

1.  看看[2D Graphics tutorial](http://docs.oracle.com/javase/tutorial/2d/index.html) an `Graphics`to the `BufferedImage`，因为直接输出`Swing GUI`到创建`1pixes == 1 DPI`

2.  有

    *   [使用图像](http://docs.oracle.com/javase/tutorial/2d/images/index.html)

    *   [印刷](http://docs.oracle.com/javase/tutorial/2d/printing/index.html)

3.  几个[例子](http://www.java2s.com/Code/Java/2D-Graphics-GUI/Catalog2D-Graphics-GUI.htm)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-07T12:47:41.803

根据我的经验，所有可打印尺寸都使用 72 像素 = 1 英寸的测量值。可能会有所不同，因为默认 win DPI=96。

# ruby-on-rails - ruby on rails 中的自定义 url

> ID：12316048
> 
> 赞同：3
> 
> 时间：2012-09-07T10:11:24.253
> 
> 标签：ruby-on-rails, ruby, url, url-routing

我知道 rails 使用控制器操作样式的 url `www.myapp.com/home/index`，例如
我想在我的 rails 应用程序上有一个这样的 url，`www.myapp.com/my_page_here`这可能吗？如果可以，我会怎么做？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-07T10:29:06.403

您只需在文件中使用任何或块的`get`外部：`resources``namespace``routes.rb`

```
get 'my_page_here ', :to => 'home#index' 
```

假设您使用的是 Rails 3+，请不要使用`match`. 这可能很危险，因为如果页面接受来自表单的数据，它应该接受 POST 请求。`match`将允许对具有副作用的操作进行 GET 请求 - 这不好。

尽可能使用`get`,`put`或`post`这些变体。

要获得路径助手，请尝试：

```
get 'my_page_here ', :to => 'home#index', :as => :my_page 
```

这样，在您看来，`my_page_path`将等于`http://{domain}/my_page_here`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-07T10:25:56.433

在这种情况下，您只需要制定一个路由规则来匹配该 url，它将类似于

```
match 'my_page_here' => 'your_controller#your_action' 
```

您的控制器和操作将指定该页面的行为

所以你可以做

```
match 'my_page_here' => 'home#index' 
```

或者

```
get 'my_page_here', :to => 'home#index' 
```

正如其他回复中所建议的那样。

如果您有这样的控制器，则用于家庭控制器中的索引操作

有关详细信息，请参阅[http://guides.rubyonrails.org/routing.html](http://guides.rubyonrails.org/routing.html)

另请参阅[Ruby on Rails Routes - get 和 match 之间的区别](https://stackoverflow.com/questions/6988866/ruby-on-rails-routes-difference-between-get-and-match)

# tridion - Tridion 事件系统超时

> ID：12316052
> 
> 赞同：4
> 
> 时间：2012-09-07T10:11:31.313
> 
> 标签：tridion

我目前正在运行 Tridion 2011 SP1。

我正在编写一些在页面发布时运行的代码。它遍历页面中的每个组件模板，获取组件并将各种字段写入 XML 文档。对于具有许多组件模板或具有许多字段的组件的页面，此过程可能需要一段时间才能运行。如果该过程花费超过 30 秒，我会收到错误消息

```
The operation performed by thread "EventSystem0" timed out.

Component: Tridion.ContentManager
Errorcode: 0
User: NT AUTHORITY\NETWORK SERVICE 
```

其次是另一个

```
Thread was being aborted.

Component: Tridion.ContentManager
Errorcode: 0
User: NT AUTHORITY\NETWORK SERVICE

StackTrace Information Details:
   at System.RuntimeMethodHandle.InvokeMethod(Object target, Object[] arguments, Signature sig, Boolean constructor)
   at System.Reflection.RuntimeMethodInfo.UnsafeInvokeInternal(Object obj, Object[] parameters, Object[] arguments)
   at System.Delegate.DynamicInvokeImpl(Object[] args)
   at Tridion.ContentManager.Extensibility.EventSubscription.DeliverEvent(IEnumerable`1 subjects, TcmEventArgs eventArgs, EventPhases phase) 
```

我相信我有三个选择。

**1.增加超时**

这似乎是一个懒惰的解决方案，只会隐藏问题。不能保证超时问题不会再次发生。我也不确定超时值存储在哪里（我尝试在 Tridion Content Manager.msc 管理单元中更改一些值，但没有运气）。

**2\. 在实际的事件处理程序例程中做的更少，并让一个单独的进程完成所有的艰苦工作**

这似乎也不是正确的解决方案。我真的很想将我所有的事件处理程序代码保存在一个地方。我们为我们的 live 5.3 安装提供了这样的解决方案，维护起来简直就是一场噩梦（它非常陈旧而且写得不好）。

**3\. 让我的代码更高效**

我的组件有很多字段，如果它们是 ComponentLinks，我的代码必须深入研究每个字段。我猜是因为 Tridion 对象的属性是延迟加载的，所以我访问的每个属性都会调用一次 API/数据库。检索一个属性平均需要 0.2 秒，该属性在访问多个属性时很快就会堆积起来。如果有一种方法可以在一次调用中检索所有属性，这将很有用。

有任何想法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-07T11:16:11.503

您是否考虑过异步运行您的活动？您可以通过更改以下行来执行此操作：

```
EventSystem.Subscribe<IdentifiableObject,TcmEventArgs(....) 
```

至

```
EventSystem.SubscribeAsync<IdentifiableObject,TcmEventArgs(....) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-13T08:12:47.123

SDL 客户支持建议我增加超时。虽然不是一个很好的解决方案，但它是唯一可用的解决方案。去做这个

1.  在安装内容管理器的服务器上打开`Tridion.ContentManager.config`应该位于`config/`内容管理器根位置的子目录中的服务器，默认为`C:\Program Files\Tridion\ or c:\Program Files (x86)\Tridion\`
2.  找到`<eventSystem>`节点
3.  将`threadtimeout`值（以秒为单位）增加到更高的值（我将其设置为 120）
4.  保存`Tridion.ContentManager.config`并重启`Tridion Content Manager Service Host`服务

可获取更多文档[http://sdllivecontent.sdl.com/LiveContent/web/pub.xql?action=home&pub=SDL_Tridion_2011_SPONE&lang=en-US#addHistory=true&filename=ConfiguringEventSystem.xml&docid=concept_48C53F76CBFD45A783A3975CA72ECC49&inner_id=&tid=&query=&scope=&resource= &eventType=lcContent.loadDocconcept_48C53F76CBFD45A783A3975CA72ECC49](http://sdllivecontent.sdl.com/LiveContent/web/pub.xql?action=home&pub=SDL_Tridion_2011_SPONE&lang=en-US#addHistory=true&filename=ConfiguringEventSystem.xml&docid=concept_48C53F76CBFD45A783A3975CA72ECC49&inner_id=&tid=&query=&scope=&resource=&eventType=lcContent.loadDocconcept_48C53F76CBFD45A783A3975CA72ECC49)。它确实需要用户名和密码才能访问。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-09T11:46:54.333

你只是在做很多处理，这需要时间。也许有一个技术修复，但在这种情况下要做的第一件事就是回到为什么和什么？发布页面基本上是关于呈现您要为该页面输出的 HTML 和二进制文件。那需要多长时间？

所以请你告诉我们你为什么这样做？也许可以将部分工作转移到其他地方，而不会影响良好的设计。如果我们知道目的是什么，也许我们可以提供更多帮助。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-09-07T12:30:55.880

您可能会考虑做的一件事是使用组件的`.ToXml()`方法并从 XML DOM 获取值，而不是使用 Tridion API。这通常要快得多，您可以使用 XSLT 或 Linq 来“遍历”您的字段。

如果您真的只对字段感兴趣，那么只需使用`.Content`(and `.Metadata`) 属性，然后再次使用 Linq 或 XSLT 或您想要解析 xml 的任何技术（也许[RegEx](https://stackoverflow.com/questions/1732348/regex-match-open-tags-except-xhtml-self-contained-tags)除外）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-11T14:27:39.110

如果您真的需要处理时间，那么我认为您应该编写一个 Web 服务来执行您需要的操作，您可以从事件处理程序中调用它。这也不会影响用户体验（在同步事件处理程序的情况下）。

# php - 如何在 Zend_pdf_table 组件上插入版权符号？

> ID：12316053
> 
> 赞同：0
> 
> 时间：2012-09-07T10:11:31.533
> 
> 标签：php, zend-framework, pdf, zend-pdf

有谁知道如何在 Zend_pdf_table 组件上插入版权符号？

还有另一个符号？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T07:19:54.993

关键是了解特殊字符的 UTF-8 代码点。

这是一个例子：

```
$pdf = new Zend_Pdf();

$pdf->pages[0] = new Zend_Pdf_Page(Zend_Pdf_Page::SIZE_A4);
$pdf->pages[0]->setFont(Zend_Pdf_Font::fontWithName(Zend_Pdf_Font::FONT_HELVETICA), 36);

$pdf->pages[0]->drawText("\xc2\xa9", 200, 400);

$pdf->save( 'test.pdf' ); 
```

在此示例中，“\xc2\xa9”是版权符号的 UTF-8 代码点。TM 符号是“\xe2\x84\xa2”，破折号是“\xe2\x80\x94”。

# ios - 从笔尖加载时，空的 UITableView 不会弹跳

> ID：12316055
> 
> 赞同：1
> 
> 时间：2012-09-07T10:11:38.927
> 
> 标签：ios, uitableview

只要`bounces`和`alwaysBounceVertical`属性设置为 YES，当用户滚动时 UITableView 应该弹跳（即使是空的）。当我初始化 UITableViewController 时，一切都按预期工作。当我使用简单的视图层次结构初始化从 nib 加载的 UIViewController 时：具有单个 UITableView 子级的顶级 UIView，然后表格视图不再反弹。这是我使用的代码：

```
#import <UIKit/UIKit.h>

@interface AppDelegate : UIResponder <UIApplicationDelegate, UITableViewDataSource>
@end

@implementation AppDelegate

@synthesize window = _window;

- (BOOL) application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];

    UIViewController *rootViewController = nil;
    UITableView *tableView;
    BOOL loadFromNib = NO;
    if (loadFromNib)
    {
        rootViewController = [[UIViewController alloc] initWithNibName:@"ViewController" bundle:nil];
        tableView = [rootViewController.view.subviews objectAtIndex:0];
    }
    else
    {
        rootViewController = [[UITableViewController alloc] initWithStyle:UITableViewStylePlain];
        tableView = (UITableView *)rootViewController.view;
    }
    tableView.dataSource = self;
    NSLog(@"%@ bounces: %@", tableView.class, tableView.bounces ? @"YES" : @"NO");
    NSLog(@"%@ alwaysBounceVertical: %@", tableView.class, tableView.alwaysBounceVertical ? @"YES" : @"NO");

    self.window.rootViewController = rootViewController;
    [self.window makeKeyAndVisible];

    return YES;
}

- (NSInteger) tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    return 0;
}

- (UITableViewCell *) tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    return [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:nil];
}

@end 
```

`loadFromNib`当我在变量设置为 YES 或 NO的情况下运行此代码时，它总是记录以下内容：

```
UITableView bounces: YES
UITableView alwaysBounceVertical: YES 
```

但是当我从笔尖加载它时（即`loadFromNib`设置为YES），当我尝试滚动时，表格视图不会反弹。为什么不反弹？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-07T10:25:12.350

我无法准确解释原因，但空表视图的行为似乎非常不稳定。无论如何，`tableView.bounces = YES`手动设置（例如，在`-viewDidLoad`表格视图所属的视图控制器的方法中）可以解决此类问题并确保您的表格视图始终弹跳，即使是空的。

# javascript - 在jQuery中显示选中复选框的数量

> ID：12316058
> 
> 赞同：0
> 
> 时间：2012-09-07T10:11:47.740
> 
> 标签：javascript, jquery

我对 jQuery 很陌生，我认为这对你们中的许多人来说可能很容易，但我似乎无法让它工作。如何显示复选框的数量以使值增加或减少。

我尝试了以下方法，但 span 标签中的数字仍然为 0：http: [//jsfiddle.net/yunowork/NTwxc/](http://jsfiddle.net/yunowork/NTwxc/)

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-07T10:14:36.917

您应该收听该`change`事件：

```
$('input[type=checkbox]').on('change', function(){
    var number = $('input[type=checkbox]:checked').length;
    $('.totalchecked').text(number);
}); 
```

[http://jsfiddle.net/NTwxc/7/](http://jsfiddle.net/NTwxc/7/)

请注意，`val`用于获取/设置表单元素的值，对于其他元素，如 span 元素，`text`或`html`应使用方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T10:13:52.423

选中复选框的数量：

```
$(":checkbox:checked").length 
```

[http://api.jquery.com/checked-selector/](http://api.jquery.com/checked-selector/)

* * *

*编辑：我在你的小提琴中看到你已经有了。我会把它留在那里，因为这实际上是“如何显示选中复选框的数量”的答案......*

问题是您没有更新并查看检查了多少。每当检查任何项目时，您都需要重新运行该功能。

```
$(":checkbox").change(function () {
    // update the span with $(":checkbox:checked").length ...
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-07T10:14:23.360

您不应该设置`.val`跨度，但是`.text`.

此外，您需要在每次检查状态更改时更新它。

```
function calc() {
    $('.totalchecked').text($(':checkbox:checked').length);
}

$(calc);
$(':checkbox').change(calc); 
```

[演示](http://jsfiddle.net/x38S2/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-07T10:15:37.260

问题：`.val()`仅适用于表单元素。要设置元素的内容，请使用`.text()`or`.html()`如果您正在插入 HTML。第二个问题是您需要注册一个侦听器来“更改”事件。否则，该值将不会更新。

更新的解决方案：http: [//jsfiddle.net/NTwxc/4/](http://jsfiddle.net/NTwxc/4/)

```
$("input[type=checkbox]").change(function(){
    var number = $('input[type=checkbox]:checked').length;
    $(".totalchecked").text(number);
});
​ 
```

顺便说一句，我个人更喜欢`input[type=checkbox]`而不是`:checkbox`. 前者适用于 CSS 和 jQuery。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-07T10:18:01.463

我们到了！

```
$('input[type="checkbox"]').change(function() {

        $('.totalchecked').empty().text($('input[type="checkbox"]:checked').size());
    }); 
```

**[http://jsfiddle.net/toroncino/PTvG8/](http://jsfiddle.net/toroncino/PTvG8/)**

# ember.js - Ember 绑定不起作用

> ID：12316060
> 
> 赞同：1
> 
> 时间：2012-09-07T10:12:01.817
> 
> 标签：ember.js

我一直在尝试通过一个非常简单的示例使绑定在 Ember 中工作，但它们不能正常工作。这不应该是同步问题，因为我调用的是 Ember.run.sync()。我正在使用的代码如下：

```
var MyApp = Ember.Application.create();
MyApp.initialize();

MyApp.president = Ember.Object.create({
        name: "Barack Obama"
});

MyApp.country = Ember.Object.create({
      // Ending a property with 'Binding' tells Ember to
      //   // create a binding to the presidentName property.
      presidentNameBinding: 'MyApp.president.name'
});

// Later, after Ember has resolved bindings...
Em.run.sync();
console.log(MyApp.country.get('presidentName'));​ 
```

而且我还在这里创建了一个小提琴。

[http://jsfiddle.net/XKsNr/](http://jsfiddle.net/XKsNr/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-07T10:50:24.797

您应该声明没有“var”的 MyApp，第一行应该是：

```
MyApp = Ember.Application.create(); 
```

在此处查看更多详细信息：http: [//docs.emberjs.com/#doc=Ember.Application&src=false](http://docs.emberjs.com/#doc=Ember.Application&src=false)

# xml - Selenium RC Perl 脚本如何获取 xml 页面的源代码？

> ID：12316065
> 
> 赞同：2
> 
> 时间：2012-09-07T10:12:15.833
> 
> 标签：xml, perl, selenium-rc

我使用 WWW::Selenium 模块编写了一个简单的 perl 脚本，该模块与 Selenium RC 服务器交互并进入网页并下载源代码。我可以用 HTML 页面做到这一点。但是，我有一个要下载其源代码的 XML 页面。'get_source_html()' 函数显然不可能做到这一点。下面是我想要做的脚本：

```
#!/usr/bin/perl -sw
use WWW::Selenium;

print "\n setting up Selenium...\n";
my $sel = WWW::Selenium->new( host => "localhost",
port => 4444,
browser => "*firefox",
browser_url => "http://www.google.com",
);

print " starting Selenium...\n";
$sel->start;

$sel->open('someXMLpage...');
$sel->wait_for_page_to_load();

my $xml = $sel->get_html_source();
print $xml; 
```

正如您所看到的，get_html_source 显然是一个问题，因为它会返回一个错误，指出该页面不是 html。有什么方法可以让我下载浏览器中可见的当前页面，而不管页面类型如何（比如在 Firefox 中单击“查看源代码”，甚至更好：一些 get_source() 函数）？另请注意，我需要使用的 url 不会以“.xml”文件结尾。如果这意味着什么，该页面是即时生成的......

任何智慧都非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T23:53:11.167

您需要 Selenium RC`get_page_source()`功能。即使“页面”不是 HTML（甚至是纯文本，而不仅仅是 XML），它也可以工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-16T09:11:50.863

Selenium::Remote::Driver Perl 模块确实提供了一个 get_page_source 函数。

另一方面，WWW::Selenium 没有提供这样的方法。它只提供了一个 get_html_source 函数，该函数返回开始和结束“html”标签之间的整个 HTML 源代码。

但是，通过 WWW::Selenium 获取 XML 文档内容的一种解决方法是使用它的 get_eval 函数来评估将完成这项工作的 JavaScript 片段。例如，以下行返回浏览器窗口中包含的文档的根节点/元素的 XML 内容：

```
my $xml = $sel->get_eval("new XMLSerializer().serializeToString(window.document.documentElement)"); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-09-07T10:15:55.247

尝试：

```
$sel->get_body_text(); 
```

# jquery - asp.net 中继器和 jQuery 迭代所有行以查找选中的复选框和标签值

> ID：12316070
> 
> 赞同：0
> 
> 时间：2012-09-07T10:12:25.983
> 
> 标签：jquery, asp.net, asprepeater

我的中继器如下

```
<ItemTemplate>
<tr>
    <td class="ms-vb2">
        <a href="#" id="aTitle" runat="server" onclick='<%# DataBinder.Eval(Container.DataItem,"ColumnLink") %>'>
            <%# DataBinder.Eval(Container.DataItem,"FieldName") %></a>
    </td>
    <td class="ms-vb2">
        <asp:Label Text='<%# DataBinder.Eval(Container.DataItem,"ControlType") %>' runat="server"
            ID="lblType" />
    </td>
    <td class="ms-vb2" colspan="2">
        <asp:Image ID="imgChecked" runat="server" ImageUrl="/_layouts/images/check.gif" AlternateText='<%# DataBinder.Eval(Container.DataItem,"IsRequired") %>' />
    </td>
    <td class="ms-vb2" colspan="2">
        <asp:CheckBox ID="chkGroupUnique" Checked="false" runat="server" AutoPostBack="true"
            OnCheckedChanged="chkGroupUnique_CheckChanged" /><%--OnCheckedChanged="chkGroupUnique_CheckChanged"Checked='<%#  Boolean.Parse(DataBinder.Eval(Container.DataItem,"Approved").ToString()) %>'--%>
    </td>
</tr> 
```

其中一个数据项是一个复选框，单击此复选框后，我可以获得复选框的 ID 以及我想要的数据（lblType），因为我在 ItemDataBound 事件中添加了这些内容，如下所示

```
CheckBox chk = (CheckBox)e.Item.FindControl("chkGroupUnique");

Label lblType = (Label)e.Item.FindControl("lblType");

chk.Attributes.Add("onclick", "Check(this,'" + chk.ClientID + "','" + lblType.ClientID + "');"); 
```

onclick 函数包含此代码

```
function Check(checkbox, chkBoxId, typeId) {

   var chk =  document.getElementById(chkBoxId);
   var type = document.getElementById(typeId);

   if (checkbox.checked) {
       var t = type.innerText;
   }

   return false;
 } 
```

现在我已经选中了复选框 clientId 和标签 clientId。我想检查是否有任何其他复选框被选中并且在该行标签控件中具有相同的值。我如何使用 jQuery 或纯 javascript 来做到这一点

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T10:25:24.200

我建议您在 ItemDataBound 事件中将每个 CheckBox 控件添加到控件集合中。（您也可以形成其 ID 的集合）

将该集合传递给 Javascript 函数并在 Javascript 函数中迭代它以检查复选框的状态。

# android - 减少 android 应用程序上的分配内存

> ID：12316078
> 
> 赞同：1
> 
> 时间：2012-09-07T10:12:59.603
> 
> 标签：android

我已经构建了一个具有主菜单的 android 应用程序。在主菜单中，用户可以选择不同的“应用程序”来打开一个带有 Runnable 的新 Activity。

菜单显示在自定义 ListViewAdapter 上。适配器中的每个元素都包含一个显示菜单条目的位图。我的位图使用 ~3 MB 内存。

所以我的问题是，当用户打开一个底层应用程序时释放菜单条目并在他返回菜单时重新构建它是否明智。

编辑：所以我认为我没有很好地描述我的问题或问题。主菜单有一个自定义对象 MenuEntry 的列表。每个 MenuEntry 都为显示的图标保存一个 Drawable。我的 ListView 有一个适配器，它接受 Drawable 并在 ImageView 中使用它来在 MenuEntry 中显示图标。

因此，我认为当 MainMenu Activity 暂停以释放一些内存（~3 MB）时，删除我的 MenuEntry 列表是个好主意。并在用户重新打开主菜单时构建新条目。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T10:24:29.747

我建议将位图压缩为字节数组并将其保存到集合或数组中。在您的 ListViewAdapter 从字节数组中设置位图。您可以在此处找到位图压缩示例：[Android : Bitmap save to location](https://stackoverflow.com/questions/649154/android-bitmap-save-to-location)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T10:31:03.360

我不太明白为什么“适配器中的元素包含位图”。也许这会有所帮助： LazyList - 在磁盘缓存中存储位图：[在 ListView 中延迟加载图像](https://stackoverflow.com/questions/541966/android-how-do-i-do-a-lazy-load-of-images-in-listview)

有效地显示位图 - [http://developer.android.com/training/displaying-bitmaps/index.html](http://developer.android.com/training/displaying-bitmaps/index.html)

# php - Symfony2 从安全令牌访问用户实体自定义存储库

> ID：12316083
> 
> 赞同：2
> 
> 时间：2012-09-07T10:13:14.920
> 
> 标签：php, symfony, doctrine-orm

我有一个`User`实体类，用于身份验证提供程序：

```
/**
 * @ORM\Entity(repositoryClass="Aurora\LikeBundle\Entity\UserRepository")
 */
class User implements AdvancedUserInterface
{
    ...
} 
```

在`UserRepository`我有一个自定义方法`getServices()`。在我的控制器中，我可以通过调用访问当前用户`$this->container->get('security.context')->getToken()->getUser()`- 但它只返回用户对象（带有 setter 和 getter），没有存储库方法。

如何从安全上下文中访问它们？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-07T10:32:54.210

Respository 与任何特定的 Entity 对象无关。它与整个实体类有关。所以你有 User 实体的 UserRepository 但是 $user 对象的 UserRepository 没有多大意义。

如果您想获取某个实体（例如用户实体）的存储库，您可以这样做：

```
$repository = $this->getDoctrine()->getRepository('AuroraLikeBundle:User'); 
```

并使用它：

```
$repository->getServices(); // or
$repository->getServices($userId); 
```

# c# - c#中的正则表达式替换

> ID：12316084
> 
> 赞同：0
> 
> 时间：2012-09-07T10:13:38.320
> 
> 标签：c#, regex

我有这样一句话：

> `[FindThis|foo|bar] with some text between [FindThis|foo|bar]. [FindThis|foo|bar] and some more text.`

我想用正则表达式替换这句话，以便我得到：

> `FindThis with some text between FindThis. FindThis and some more text.`

我怎样才能做到这一点？整个早上都在尝试，我唯一想到的是：

```
Regex.Replace(myString, @"\[(\w).*\]", "$1"); 
```

这只给了我：

> `F and some more text.`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-07T10:18:47.460

你可以更换

```
\[([^|]+)[^\]]+] 
```

由`$1`.

一点解释：

```
\[      match the opening bracket
[^|]+   match the first part up to the |
        (a sequence of at least one non-pipe character)
[^\]]+  match the rest in the brackets
        (a sequence of at least one non-closing-bracket character)
]       match the closing bracket 
```

由于我们将第一部分存储在捕获组的括号中，因此我们将整个匹配替换为该组的内容。

快速 PowerShell 测试：

```
PS> $text = '[FindThis|foo|bar] with some text between [FindThis|foo|bar]. [FindThis|foo|bar] and some more text.'
PS> $text -replace '\[([^|]+)[^\]]+]','$1'
FindThis with some text between FindThis. FindThis and some more text. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T10:58:18.707

如果您有其他没有“替代品”的替代品，例如`[FindThat] with text in between [Find|the|other]`，您需要对正则表达式稍作更改：

```
\[([^|\]]+)[^\]]*] 
```

说明：

> ```
> \[ 匹配左括号  
> [^|\]]+ 匹配第一部分直到 | 或者 ]  
>         （至少一个非竖线或右括号字符的序列）  
> [^\]]* 匹配括号中的其余部分  
>         （任何非右括号字符的序列，包括无）  
> ] 匹配右括号  
> 
> ```

[这个答案大部分是从乔伊那里抄来的。]

# ios - 如何跟踪电影播放器 在 iOS 中运行的时间

> ID：12316085
> 
> 赞同：0
> 
> 时间：2012-09-07T10:13:46.977
> 
> 标签：ios, mpmovieplayercontroller

我使用 MPMoviePlayerController 在我的一个应用程序中播放电影文件。它工作正常。我有一个要求，我必须跟踪“用户播放电影的时间？”。为此，我正在使用 Omniture。我一直不知道从一开始就玩了多长时间谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T11:30:42.010

您只需要在电影开始时录制：

```
self.movieStartDate = [NSDate date]; 
```

当电影结束（或停止）时，获取从那时起已经过了多长时间

```
NSTimeInterval duration = [[NSDate date] timeIntervalSinceDate:self.movieStartDate]; 
```

`duration`然后将包含自电影开始以来的时间量，以秒为单位。

但请记住，电影可能会因为应用程序进入后台/变为非活动状态而停止，因此您必须听取这些通知以及来自电影播放器​​的通知 :)

# excel - 将 GridView 导出到 Excel 并删除一些选定的列

> ID：12316086
> 
> 赞同：0
> 
> 时间：2012-09-07T10:13:48.757
> 
> 标签：excel, gridview

我在这里`GridView`用来显示数据。为了将数据导出`Gridview`为 excel 格式，我使用了一个按钮 - `"Download into Excel"`。下载到 Excel 格式或导出到 Excel 工作正常。即`GridView`显示总共 9 列。

我的问题是我想在 Excel 表中显示 7 列（根据我们的选择）。显示的`GridView`内容应保持不变，但 Excel 将仅显示我们想要的那些列。

我已经使用过`GridView1.Columns.RemoveAt(2);` 但这会随机删除更多数量的列。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-25T19:52:23.457

.Net 4.0；VS2012

在我的类似案例中——大致是 Kedar 所描述的，包括按钮和看到 100% 的网格导出——我得出的结论是，尝试让 RemoveAt(index) 完成其从我正在导出的网格视图。我不知道为什么它没有，但是在 RemoveAt 之后我的 gridview 总是没有改变。

我在一个板上看到了一个类似的问题，其中接受的答案 - 对于想要导出到 Excel 的海报，再次想要在导出时隐藏指定的列 - 只是让他不需要的列不可见。受访者虽然乐于提供帮助，但没有抓住重点：目标是让有问题的列不出现在 EXPORT 上 - 不仅仅是从屏幕显示中消失，隐藏列很简单（设置 Visible=false）。

就我而言，我试图丢失gridview上的列，当它被发送到Excel时，没有重新绑定并且没有引入动态的sql。我认为这可能是一个失败的原因，因为我只是没有看到 RemoveAt(index) 工作，即使没有导致错误。我很困惑我可能会做什么，这会导致 gridview.Columns.RemoveAt(index) 非常可靠地无法执行其功能：所有列在我完成后仍然存在。

在以下代码中，我的目标已简化为尝试删除单个列，以验证 RemoveAt(index) 是否会执行任何操作。

GridView gProgramProposalRequests 出现在 UI 中。
我正在制作它的副本，gridForExport，因为我想删除列，然后将 gridForExport 传递给导出方法。“标题”是我的网格中的列之一，用作此运行中的示例列。

```
 GridView gridForExport = (GridView)gProgramProposalRequests;

        gridForExport.AutoGenerateColumns = false;

        for (int i = 0; i < gridForExport.Columns.Count; i++)
        {
            if (gridForExport.Columns[i].HeaderText == "Title")
                gridForExport.Columns.RemoveAt(i);

        } 
```

在循环之后，“标题”仍然存在。我以为我已经告诉应用程序删除名为 Title 的列。我观察执行光标执行 RemoveAt 行。我指定哪一列并不重要——在这个循环执行之后，我仍然可以找到我命名的那一列。

跟进 - 我尝试从 GridView 的集合中删除列没有成功。现在我有点喜欢我从将 CSV 内容写入响应中得到的结果，而不是阻止添加我指定的列。但我必须弄清楚如何处理内容字段中的逗号。感谢[http://wiki.asp.net/page.aspx/401/export-to-csv-file/](http://wiki.asp.net/page.aspx/401/export-to-csv-file/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-18T21:51:35.827

使用 RemoveAt 函数后，您需要对 gridview 进行数据绑定：

```
GridView1.Columns.RemoveAt(0);
GridView1.DataBind(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-01-16T04:18:51.910

RemoveAt() 不起作用

尝试这样的事情

```
int i;
for (i = 0; i < GV.Columns.Count; i++)
{
     if (GV.Columns[i].HeaderText == "Title")
     {
          GV.Columns[i].Visible = false;
          break;
     }
}

GV.RenderControl(htmltextwrtter);
Response.Write(strwritter.ToString());
Response.Flush();
Response.End();
GV.Columns[i].Visible = true; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-11-30T07:46:39.473

```
GridView1.Columns(0).Visible = False 
```

将 0 替换为您要删除的列（它从 0、1、2~ 开始计数），它适用于我的 gridview excel 报告。

# php - 触发器还是 PHP 脚本？

> ID：12316088
> 
> 赞同：3
> 
> 时间：2012-09-07T10:13:50.987
> 
> 标签：php, mysql, triggers

所以，我正在用 PHP + MySQL 开发一个系统，它有大约 4 个相关的表。一个表中的任何形式的插入、更新和删除通常至少反映在 2 个表中。

我的问题是，使用触发器或附加 php 脚本（触发 SQL 查询）来处理所需的相关更改更有效？

触发器对我来说似乎很理想，但是当我编写它们时，从可读性的角度来看它们变得非常复杂和混乱。PHP 允许以更“理智”的方式做事。

请在性能以及可用性/未来修改等的基础上提出建议。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-07T10:18:42.227

我强烈建议您构建数据库来照顾自己。

它被称为解耦。

然后，即使您（或其他人）脚本中存在错误，数据也受到保护。对于大多数（全部？）企业来说，这是最重要的资产。

它还使人们能够使用其他机制来利用数据库。甚至是原始命令行。

为了使代码更具可读性 - 格式化并使用注释。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-07T10:18:08.483

*   如果您希望 DBA 控制代码，则触发。
*   PHP 如果您希望您的程序员控制代码。

澄清：

如果它是一个触发器，那么这意味着它是数据库设计的一部分，可以让事情以这种方式工作。即数据库的结构取决于它以这种方式工作。

如果是 PHP 代码，则暗示该操作是您的业务逻辑的一部分，对数据库的核心结构并不重要。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-07T10:19:10.160

事实上，数据库触发器会比 PHP 代码更快。这取决于在更新其他数据之前您需要从源表中“翻译”多少数据。操作它的次数越多，SQL 的可读性和可维护性就越差。因为它也可能包含商业逻辑。

所以，恕我直言，如果您没有性能问题，最好将其保留在 PHP 中。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2016-06-21T06:24:30.570

你可以使用下面的语法在 MYSQL 中添加触发器...

```
CREATE
    [DEFINER = { user | CURRENT_USER }]
    TRIGGER trigger_name
    trigger_time trigger_event
    ON tbl_name FOR EACH ROW
    [trigger_order]
    trigger_body

trigger_time: { BEFORE | AFTER }

trigger_event: { INSERT | UPDATE | DELETE }

trigger_order: { FOLLOWS | PRECEDES } other_trigger_name 
```

# python - Celery：同步轮询应用程序状态

> ID：12316091
> 
> 赞同：2
> 
> 时间：2012-09-07T10:14:08.350
> 
> 标签：python, celery

我不想检索我的应用程序状态，但目前我只知道如何使用事件异步执行此操作。

```
>>> state = app.events.State()
>>> def on_event(event):
...     state.event(event)
... 
>>> with app.connection() as connection:
...     recv = app.events.Receiver(connection, handlers={'*': on_event})
...     recv.capture(limit=None, timeout=None, wakeup=True)
... 
```

`state`每次发生事件时都会更新实例。但我想从当前状态同步创建快照。我怎样才能做到这一点？

# javascript - 使用谷歌地图 API 和 phonegap 显示当前位置 + 方向？

> ID：12316093
> 
> 赞同：5
> 
> 时间：2012-09-07T10:14:14.967
> 
> 标签：javascript, jquery, google-maps, cordova, google-maps-api-3

我有以下要求

1.  显示从起点到目的地的路线
2.  显示用户的当前位置。

我正在创建一个带有方向的地图，然后在上面显示用户的当前位置。

```
function showDirection(orgn, dstntn)
{
    var directionsService = new google.maps.DirectionsService();
    var directionsDisplay = new google.maps.DirectionsRenderer();

    var map = new google.maps.Map(document.getElementById('displayMap'), {
        zoom : 7,
        mapTypeId : google.maps.MapTypeId.ROADMAP
    });

    directionsDisplay.setMap(map);
    directionsDisplay.setPanel(document.getElementById('displayDirections'));

    var request = {
        origin : orgn,
        destination : dstntn,
        travelMode : google.maps.DirectionsTravelMode.WALKING
    };

    directionsService.route(request, function(response, status) {
        if (status == google.maps.DirectionsStatus.OK) {
            directionsDisplay.setDirections(response);
        }
    });
    var win = function(position) {
            var lat = position.coords.latitude;
            var long = position.coords.longitude;
            var myLatlng = new google.maps.LatLng(lat, long);
            var iconimage="images/current_location_small.png";
            var marker = new google.maps.Marker({
                position: myLatlng,
                map: map
                icon: iconimage
            });

            marker.setMap(map);
     };

     var fail = function(e) {
            alert('Can\'t retrieve position.\nError: ' + e);
        };

     var watchID = navigator.geolocation.getCurrentPosition(win, fail);
} 
```

如果用户在为显示路线而创建的地图内，上面的代码可以正常工作，但如果用户不在地图区域内，则不会显示他的当前位置。

我以某种方式希望所有三个点 1\. 起点、2\. 目的地和 3\. 用户位置都适合地图。有没有办法可以缩小地图以适合所有三个点，或者以所有三个点都可见的方式创建原始地图。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-08T09:25:23.390

在后面添加以下内容`marker.setMap(map);`

```
marker.setMap(map);
//Add these lines to include all 3 points in the current viewport
var bounds = new google.maps.LatLngBounds();
bounds.extend(orgn);
bounds.extend(dstntn);
bounds.extend(myLatlng);
map.fitBounds(bounds); 
```

# xpages - 如何在 XPages 中生成 javadoc

> ID：12316095
> 
> 赞同：2
> 
> 时间：2012-09-07T10:14:23.280
> 
> 标签：xpages

当我尝试使用菜单命令 Project\Generate Javadoc 生成 javadoc 时，会为我在 XPages 中的自定义类生成以下警告和错误：

```
javadoc: warning - No source files for package net.focul.utilties
javadoc: warning - No source files for package net.focul.workflow
javadoc: error - No public or protected classes found to document. 
```

这些包位于`WebContent/WEB-INF/src`构建路径中配置的文件夹中，并且可以在 Generate Javadoc 向导中选择。这些类是具有公共方法的公共类。

如果我选择这些，将为所有 Xpage 和自定义控件类生成 Javadocs。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T07:04:01.203

您遇到此行为是因为 javadoc 不了解 Designer VFS（虚拟文件系统）。它假定您的项目由本地硬盘驱动器上某些文件夹结构中的一堆单独文件组成，而不是在单个 NSF 中自包含。总的来说，Designer VFS 通过拦截项目资源的读/写请求和导入/导出 DXL 或 CD 记录等成功地欺骗 Eclipse，使其相信它正在与本地文件交互。但显然他们没有将这种花招应用到 javadoc也是。

与每个 XPage 和自定义控件对应的 Java 源文件都被成功处理，因为讽刺的是，它们从未存储在 NSF 中。在每个项目构建期间，Designer 都会丢弃它已经生成的任何这些文件，并根据各种 .xsp 文件的当前内容重新创建它们。然后它将这些 Java 文件编译为 .class 文件，这些文件*作为*设计说明存储在 NSF 中。在运行时，正是这些文件从 VFS 中提取并执行……此时源代码不再重要，因此没有理由费心在 NSF 中包含 .java 文件，因此它们只是继续存在硬盘。这种行为的一个迹象是，当在包资源管理器/导航器中查看时，该文件夹被命名为“本地”。

如果您使用的是内置（从 8.5.3 开始）版本控制集成（有关如何使用此功能的详细说明，请参阅[本文](http://www.keithstric.com/A55BAC/keithstric.nsf/default.xsp?documentId=B236F39DEAF6C52F85257A72001157BF)），您可以调整构建路径以包含 src 文件夹的副本存储在磁盘上的项目作为“链接源文件夹”。这会导致 javadoc 认为重复的副本是有效的源文件，因此将它们包含在生成的文档中。不利的一面是，它还会导致 Designer 将它们视为有效的源文件，从而导致由于重复而导致编译错误。因此，这种方法仅在您只需要不经常生成文档时才可行，因此可以暂时中断构建路径以运行 javadoc，然后恢复到通常的设置。

另一种方法是持续以这种方式实际维护您的自定义 Java 代码：与其在 NSF 内的 WEB-INF 中创建文件夹，只需在硬盘上创建一个文件夹来存储源代码，然后将该位置包含为链接源文件夹无限期。这样，Designer 仍然可以找到源代码，但 javadoc 也可以。**注意：**如果你走这条路，那么你肯定需要使用 SCM。因为您的源代码不再存在于 NSF 中，所以我们提供了方便的容器，用于将源代码提供给其他开发人员并确保包含在您使用的任何备份计划中，***唯一的***将您的源代码现在存在于您的本地硬盘上。因此，请确保您定期将这些文件提交到 Git / Subversion / Mercurial 等，或者至少将它们存储在定期备份的文件服务器上，如果适用，所有其他成员都可以访问项目团队。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-08T05:36:19.537

When you expand the net.focul.utilties in Designer, you will see all the methods and properties. But when you click on on of the methods, you will see neo source code. So this is where javadoc fails to generate the documentation. I guess that the author of the application has not provided you with the source code. If you have the source somewhere, you can attach this code and then javadoc will be able to generate the documentation.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-06T06:06:50.913

我遇到了同样的情况，我发现最直接的方法是将源导出到外部文件夹，然后使用常规 Eclipse 生成 JavaDoc。不确定我的过程是否比 Tim 的建议更麻烦，但对我来说，这比尝试处理 VFS 变幻莫测的风险要小。

# python - python中的unittest内务管理

> ID：12316096
> 
> 赞同：0
> 
> 时间：2012-09-07T10:14:29.040
> 
> 标签：python, unit-testing, fixtures

我有一个`unittest`包含四个测试类的测试文件，每个测试类负责在一个特定类上运行测试。每个测试类都使我们使用完全相同的`set-up`方法`teardown`。该`set-up`方法相对较大，启动了大约 20 个不同的变量，而该`teardown`方法只是将这 20 个变量重置为初始状态。

到目前为止，我已经在四个 setUp 类中的每一个中放置了 20 个变量。这可行，但不是很容易维护；如果我决定更改一个变量，我必须在所有四个 setUp 方法中更改它。然而，我寻找更优雅的解决方案失败了。理想情况下，我只想输入我的二十个变量一次，在我的四个`setup`方法中调用它们，然后在我的每个测试方法之后将它们删除。考虑到这一点，我尝试将变量放在一个单独的模块中并在每个 setUp 中导入它，但是当然这些变量只能在 setup 方法中使用（另外，虽然我无法说出确切的原因，这感觉像是一种可能容易出现问题的方法

```
from unittest import TestCase

class Test_Books(TestCase):
    def setup():
        # a quick and easy way of making my variables available at the class level
        # without typing them all in

    def test_method_1(self):
        # setup variables available here in their original state
        # ... mess about with the variables ...
        # reset variables to original state

    def test_method_2(self):
        # setup variables available here in their original state
        # etc...

    def teardown(self):
        # reset variables to original state without having to type them all in

class Books():
    def method_1(self):
        pass

    def method_2(self):
        pass 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T10:21:17.517

我要做的是使 4 个测试类中的每一个成为一个基本测试类的子类，该基本测试类本身就是 TestCase 的子类。然后将 setip 和 teardown 放在基类中，其余的放在其他类中。

例如

```
class AbstractBookTest(TestCase):
   def setup():
      ...

class Test_Book1(AbstractBookTest):
   def test_method_1(self):
     ... 
```

另一种方法是只创建一个类而不是你拥有的四个类，这在这里似乎更合乎逻辑，除非你给出分裂的理由。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-07T10:30:18.690

另一种方法是将二十个变量放入一个单独的类中，设置类中的值，`__init__`然后以 class.variable 的形式访问数据，因此只有在 s 中设置变量的地方，`__init__`并且代码 s 不重复。

```
class Data:
    def __init__(self):
        data.x= ...
        data.y = ....

class Test_Books(TestCase):
    def setup():
        self.data = Data()

    def test_method_1(self):
       value = self.data.x   # get the data from the variable 
```

如果这 20 条数据彼此相关，则此解决方案更有意义。此外，如果您有 20 条数据，我希望它们是相关的，因此它们应该结合在实际代码中，而不仅仅是在测试中。

# actionscript-3 - Flex，与setSyle中的“none”相反？

> ID：12316098
> 
> 赞同：0
> 
> 时间：2012-09-07T10:14:41.283
> 
> 标签：actionscript-3, apache-flex

我正在开发一个 Flex 移动项目，但我不知道哪个与`none`.
例如：

```
textArea.setStyle("borderVisible", "none"); 
```

我必须替换哪个单词`none`有可见的边框？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T10:17:19.387

`borderVisible`是一个布尔类型，所以你可以像这样设置它的值：

*   textArea.setStyle("borderVisible", true);
*   textArea.setStyle("borderVisible", false);

我很惊讶地看到“无”值被解析了。再说一次，它可能会自动转换为布尔值。

# version-control - 是否可以通过在 Mercurial 中导出和导入变更集来合并？

> ID：12316100
> 
> 赞同：1
> 
> 时间：2012-09-07T10:14:47.023
> 
> 标签：version-control, mercurial

我的团队目前的情况是一半在德国，另一半在荷兰。

我们使用 Mercurial 作为源代码控制。问题是现在我们已经分开了，因为公司网络的运作方式，不可能将我们的存储库连接在一起以在它们之间进行任何推拉。

我想知道是否有可能以某种方式导出一堆变更集，通过邮件或 w/e 发送，然后在另一端导入它们？

我对 Mercurial 和分布式源代码控制真的很陌生（以前我真的只使用 SVN）。但我知道其中一个区别是它通过重新应用所有更改来合并，而不是仅仅查看最新版本之间的差异。这就是为什么我认为这可能是可能的。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T10:22:42.163

是的，你可以这样做。见[http://www.selenic.com/mercurial/hg.1.html#email](http://www.selenic.com/mercurial/hg.1.html#email)

**编辑：**用于`-b/--bundle`将多个变更集作为捆绑发送。

# api - 在 localhost 测试foursquare API

> ID：12316103
> 
> 赞同：2
> 
> 时间：2012-09-07T10:15:03.100
> 
> 标签：api, foursquare

我正在本地主机上测试foursquare API

在foursquare developer的配置中，我将应用程序url设置为

下载/欢迎页面 url **`http://localhost`** 您的隐私政策 url **`http://localhost/`** 回调 url **`http://localhost/app`**

我的应用程序 url 是`http://localhost/app`，想法非常简单，使用 HTML5 地理 API 获取我的地理位置，并使用此地理数据从foursquare API 获取附近的地方。

但是，当页面在 auth 处重定向foursquare 时，重定向页面显示出现问题。

我想这是因为回调 url，有人可以告诉我如何在本地主机上设置正确的配置。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-12T04:11:15.807

我遇到了这个问题。似乎在授权时，4SQ API 期望发送 redirect_uri 并匹配 APP 设置中的内容。所以基本上，在创建 Auth URL 时，您应该发送 client_id、response_type 和 redirect_uri。您为 redirect_uri 输入的值必须与您在 APP 设置中输入的值相匹配，在您的情况下为“http://localhost/app”

# iphone - 默认方法删除uitableview行的麻烦

> ID：12316104
> 
> 赞同：0
> 
> 时间：2012-09-07T10:15:08.390
> 
> 标签：iphone, ios, uitableview, delete-row

这个 UITableViews 会让我发疯！

我有由创建的 UITableViewCell

```
- (UITableViewCell *)tableView:(UITableView *)tableView 
cellForRowAtIndexPath:(NSIndexPath *)indexPath {

doneButton = [[UIButton alloc]initWithFrame:CGRectMake(7, 15, 30, 30)];
[cell addSubview:doneButton];

cell.selectionStyle = UITableViewCellSelectionStyleNone;
[doneButton addTarget:self action:@selector(done:) forControlEvents:UIControlEventTouchDown];

UILabel *postedTime = [[UILabel alloc]initWithFrame:CGRectMake(240, 4, 60, 15)];
cell.accessoryType = UITableViewCellAccessoryDetailDisclosureButton;
postedTime.backgroundColor = [UIColor clearColor];
[cell addSubview:postedTime];
cell.textLabel.textColor = [UIColor blackColor];

UILabel *post = [[UILabel alloc] initWithFrame:CGRectMake(45, 25, 190, 30)];
[cell addSubview:post];

UILabel *title = [[UILabel alloc] initWithFrame:CGRectMake(45, 4, 180, 15)];
[cell addSubview:title];

mission *m = (mission *)[missionsArray objectAtIndex:indexPath.row];
title.text = m.title;
post.text = m.post;
postedTime.text = m.posted; 
```

.h 文件：

```
IBOutlet UITableView *table;
NSMutableArray *missionsArray; 
```

我正在尝试按方法删除行

```
- (void)tableView:(UITableView *)tableView commitEditingStyle:(UITableViewCellEditingStyle)editingStyle forRowAtIndexPath:(NSIndexPath *)indexPath {
    if (editingStyle == UITableViewCellEditingStyleDelete) {
        [missionsArray removeObjectAtIndex:indexPath.row];
        [table reloadData];
} 
```

当我单击“删除”按钮 EXC_BAD_ACCESS。我试图调用 [missionsArray removeAllObject]; ——同样的错误。然后我尝试了 NSLog(@"%u", indexPath.row); -- 它打印正确的行（当我选择第一行时，它返回 0 等等）。我也试过这个

```
if (editingStyle == UITableViewCellEditingStyleDelete) {
        [missionsArray removeObjectAtIndex:indexPath.row];
        [table deleteRowsAtIndexPaths:[NSArray arrayWithObject:indexPath] withRowAnimation:YES];
        [table reloadData];
} 
```

而且我没有好结果。也许细胞高度会影响它......请帮助。我不知道该做什么，在哪里搜索。

* * *

问题解决了。当我试图释放我的任务对象时，麻烦是逻辑错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T10:51:57.443

```
#import "ViewController.h"

@implementation ViewController

- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
    // Release any cached data, images, etc that aren't in use.
}

    #pragma mark - View lifecycle

    - (void)viewDidLoad
    {
        [super viewDidLoad];
        // Do any additional setup after loading the view, typically from a nib.
        missionsArray=[[NSMutableArray alloc]initWithObjects:@"A",@"B",@"C", nil];
    }

    - (void)viewDidUnload
    {
        [super viewDidUnload];
        // Release any retained subviews of the main view.
        // e.g. self.myOutlet = nil;
    }

    #pragma mark TableView delegate method.
    - (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView1 {
        return 1;
    }

    - (NSInteger)tableView:(UITableView *)tableView1 numberOfRowsInSection:(NSInteger)section 
    {
        return [missionsArray count];
    }

    - (CGFloat)tableView:(UITableView *)tableView1 heightForRowAtIndexPath:(NSIndexPath *)indexPath{

        return 44;

    }
    - (UITableViewCell *)tableView:(UITableView *)tableView 
             cellForRowAtIndexPath:(NSIndexPath *)indexPath {

        static NSString *CellIdentifier = @"myCell";
        UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
        if (cell == nil) {

            cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleSubtitle reuseIdentifier:nil];
        }

       UIButton * doneButton = [[UIButton alloc]initWithFrame:CGRectMake(7, 15, 30, 30)];
        [cell addSubview:doneButton];

        cell.selectionStyle = UITableViewCellSelectionStyleNone;
        [doneButton addTarget:self action:@selector(done:) forControlEvents:UIControlEventTouchDown];

        UILabel *postedTime = [[UILabel alloc]initWithFrame:CGRectMake(240, 4, 60, 15)];
        cell.accessoryType = UITableViewCellAccessoryDetailDisclosureButton;
        postedTime.backgroundColor = [UIColor clearColor];
        [cell addSubview:postedTime];
        cell.textLabel.textColor = [UIColor blackColor];

        UILabel *post = [[UILabel alloc] initWithFrame:CGRectMake(45, 20, 190, 30)];

        post.text=[missionsArray objectAtIndex:indexPath.row];
        [cell addSubview:post];

        UILabel *title = [[UILabel alloc] initWithFrame:CGRectMake(45, 4, 180, 15)];
        [cell addSubview:title];

        return cell;

    }

        enter code here

    - (void)tableView:(UITableView *)tableView commitEditingStyle:(UITableViewCellEditingStyle)editingStyle forRowAtIndexPath:(NSIndexPath *)indexPath {
        if (editingStyle == UITableViewCellEditingStyleDelete) {
            [missionsArray removeObjectAtIndex:indexPath.row];
            [table reloadData];
        }
    }

    @end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-07T10:22:52.913

假设您的`TableView` 尝试中只有一个部分：

```
if (editingStyle == UITableViewCellEditingStyleDelete) {
        [missionsArray removeObjectAtIndex:indexPath.row];
        [table deleteRowsAtIndexPaths:[NSArray arrayWithObject:indexPath] withRowAnimation:UITableViewRowAnimationFade];
        // No need to reload the tableview.  Remove this line entirely [table reloadData];
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-10T13:29:45.867

感谢帮助。我解决了这个问题。答案在更新的问题中！

# sugarcrm - SugarCRM 6.5.2 的 UserHierachy 模块

> ID：12316110
> 
> 赞同：0
> 
> 时间：2012-09-07T10:15:25.310
> 
> 标签：sugarcrm

我已将我的 SugarCRM 5.1 升级到 6.5.2。现在我想添加 Zukars_Hierarchy 模块但不支持 6.5.2。我该怎么做？如何为用户层次结构开发自定义模块？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T07:13:11.847

SugarCRM 6.5.* 的用户层次结构模块解决方案请访问此站点并按照以下步骤进行操作[http://amolbansode.wordpress.com/2012/10/17/user-hierarchy-module-for-sugar-crm-6-5/](http://amolbansode.wordpress.com/2012/10/17/user-hierarchy-module-for-sugar-crm-6-5/)

# android - 自定义列表视图滚动口吃

> ID：12316111
> 
> 赞同：3
> 
> 时间：2012-09-07T10:15:28.357
> 
> 标签：android, android-layout, android-listview, android-custom-view, android-scrollview

```
 import java.io.BufferedInputStream;
    import java.io.ByteArrayOutputStream;
    import java.io.IOException;
    import java.io.InputStream;
    import java.net.MalformedURLException;
    import java.net.URL;
    import java.text.DateFormat;
    import java.text.SimpleDateFormat;
    import java.util.Calendar;
    import java.util.Date;

    import org.apache.http.HttpEntity;
    import org.apache.http.HttpResponse;
    import org.apache.http.client.HttpClient;
    import org.apache.http.client.methods.HttpGet;
    import org.apache.http.entity.BufferedHttpEntity;
    import org.apache.http.impl.client.DefaultHttpClient;

    import android.app.Activity;
    import android.content.Context;
    import android.content.Intent;
    import android.graphics.Bitmap;
    import android.graphics.BitmapFactory;
    import android.graphics.drawable.Drawable;
    import android.net.Uri;
    import android.util.Log;
    import android.view.LayoutInflater;
    import android.view.View;
    import android.view.View.OnClickListener;
    import android.view.ViewGroup;
    import android.view.ViewGroup.LayoutParams;
    import android.view.ViewParent;
    import android.webkit.WebView;
    import android.widget.BaseAdapter;
    import android.widget.ImageView;
    import android.widget.ImageView.ScaleType;
    import android.widget.LinearLayout;
    import android.widget.TextView;
    import android.widget.ViewAnimator;

    public class NewsScreenAdapter extends BaseAdapter {

        LayoutInflater inflater;
        public GifDecoderView webview1;
        public static  viewholder holder;
        View view = null;
        public static Context context;
        public ImageLoader IL;
        public String imgUrl;
        public static String addurl;    
        public NewsScreenActivity activity;
        String image;
        public static String str;
        public static Date parsed;
        public static String ac, cat_id;
        int storyLenght;

        public NewsScreenAdapter(NewsScreenActivity a) {
            // TODO Auto-generated constructor stub

            context = a.getApplicationContext();
            this.activity = a;       
            inflater = (LayoutInflater) activity.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
            IL = new ImageLoader(activity.getApplicationContext());   
         }

        @Override
        public int getCount() {
            // TODO Auto-generated method stub
            // return NewsScreenActivity.arrayList_header.size();

            return NewsScreenActivity.TotalDataArray.size();
        }

        @Override
        public Object getItem(int position) {
            // TODO Auto-generated method stub
            return position;
        }

        @Override
        public int getItemViewType(int position) {
            // TODO Auto-generated method stub
            return position;
        }

        @Override
        public int getViewTypeCount() {
            // TODO Auto-generated method stub
            return NewsScreenActivity.TotalDataArray.size();
        }
        @Override
        public long getItemId(int position) {
            // TODO Auto-generated method stub
            return position;
        }

        @Override
        public View getView(final int position, View convertView, ViewGroup parent) {
            // TODO Auto-generated method stub

            View vi = convertView;

                holder = new viewholder();

                vi = inflater.inflate(R.layout.newsscren_row, null);
                holder.news_header_title = (TextView) vi.findViewById(R.id.header_title);
                holder.ll_data = (LinearLayout) vi.findViewById(R.id.data);

                vi.setTag(holder);

            holder.news_header_title.setOnClickListener(new OnClickListener() {

                @Override
                public void onClick(View v) {
                    // TODO Auto-generated method stub

                    cat_id = NewsScreenActivity.arrayList_header.get(position);
                    ac = ((NewsScreenActivity.MainData) NewsScreenActivity.TotalDataArray.get(position)).catId;

                    activity.startActivity(new Intent(activity,CategoryActivity.class).putExtra("id", ac));

                }
            });

            holder.ll_data.removeAllViews();
            try {

             storyLenght = ((NewsScreenActivity.MainData) NewsScreenActivity.TotalDataArray.get(position)).storyArr.size();
            } catch (Exception e) {
                // TODO: handle exception
            }
            Log.d("Adapter ", " story Lenght " + storyLenght); 

            for (int i = 0; i < storyLenght; i++) {

                view = LayoutInflater.from(activity).inflate(R.layout.sub_row, null);

                holder.short_text = (TextView) view.findViewById(R.id.short_text);
                holder.image = (ImageView) view.findViewById(R.id.image);
                holder.des = (TextView) view.findViewById(R.id.des);
                holder.date_time = (TextView) view.findViewById(R.id.date_time);
                holder.llAdd = (LinearLayout) view.findViewById(R.id.sub_llAdd);
                holder.imgAdd = (ImageView) view.findViewById(R.id.imgAdd);

            try{
                    holder.image.setTag(NewsScreenActivity.arrayList_image.get(i));

                    IL.DisplayImage(
                            ((NewsScreenActivity.ImagesData) ((NewsScreenActivity.StoryData) ((NewsScreenActivity.MainData) NewsScreenActivity.TotalDataArray
                                    .get(position)).storyArr.get(i)).imageArr.get(0)).smallurl, activity, holder.image);

                    notifyDataSetChanged();

                } catch (Exception e) {
                    // TODO: handle exception
                }
     try {
         holder.short_text.setText(((NewsScreenActivity.StoryData) ((NewsScreenActivity.MainData) NewsScreenActivity.TotalDataArray.get(position)).storyArr.get(i)).title);
           holder.des.setText(((NewsScreenActivity.StoryData) ((NewsScreenActivity.MainData) NewsScreenActivity.TotalDataArray.get(position)).storyArr.get(i)).description);

                String st = ((NewsScreenActivity.StoryData) ((NewsScreenActivity.MainData) NewsScreenActivity.TotalDataArray
                        .get(position)).storyArr.get(i)).date;
                parsed = new Date(Long.parseLong(st.substring(6, st.length() - 2)));

                SimpleDateFormat sdf = new SimpleDateFormat("MMM dd,yyyy hh:mmaa");
                System.out.println(sdf.format(parsed));
                String concat = sdf.format(parsed);
                String data = concat;
                String half1 = data.substring(0, 11);
                Log.e("1st date", "" + half1);

                SimpleDateFormat display_date = new SimpleDateFormat("dd.MM.yyyy");
                Date d_date = new Date();
                String dis_date = display_date.format(parsed);

                String half2 = data.substring(11, 19);
                Log.e("2st time", "" + half2);      

                SimpleDateFormat currentdate = new SimpleDateFormat("MMM dd,yyyy");
                Date currunt = new Date();
                String day = currentdate.format(currunt);
                if (half1.equalsIgnoreCase(day) == true) {
                    holder.date_time.setText(half2);
                    Log.v("if condition", "" + half2);
                } else {
                    half1 = dis_date;
                    holder.date_time.setText(half1);
                    Log.v("else condition", "" + half1);
                }
                Log.e("currunt time", "" + day); 

                holder.news_header_title.setText(((NewsScreenActivity.MainData) NewsScreenActivity.TotalDataArray
                                .get(position)).catDisplay);

                if (!((NewsScreenActivity.StoryData) ((NewsScreenActivity.MainData) NewsScreenActivity.TotalDataArray
                        .get(position)).storyArr.get(i)).advertising
                        .equalsIgnoreCase("null")) {

                     holder.short_text.setVisibility(view.GONE);
                     holder.date_time.setVisibility(view.GONE);
                     holder.des.setVisibility(view.GONE);

                    imgUrl = ((NewsScreenActivity.StoryData) ((NewsScreenActivity.MainData) NewsScreenActivity.TotalDataArray
                            .get(position)).storyArr.get(i)).adData.imageurl;

                    // TODO Auto-generated method stub
                    addurl = ((NewsScreenActivity.StoryData) ((NewsScreenActivity.MainData) NewsScreenActivity.TotalDataArray
                            .get(position)).storyArr.get(i)).adData.targeturl;

                    //-----------------GIF Image view ------------

                    //holder.imgAdd.setImageBitmap(IL.getBitmap(imgUrl));
                    holder.imgAdd.setImageBitmap(loadImageFromUrl(imgUrl));
                    /* InputStream is = null;
                        try {
                            is = (InputStream) new URL(imgUrl).getContent();

                      webview1 = new GifDecoderView(context, is);           
                      activity.setContentView(webview1);                                            

                        } catch (Exception e) {
                            return null;
                        }*/

                    try {
                        InputStream is = (InputStream) new URL(imgUrl).getContent();

                        GifDecoderView webview1 = new GifDecoderView(activity, is);
                    //  GifMovieView webview1 = new GifMovieView(activity, is);

                //      holder.llAdd.addView(webview1, holder.imgAdd.getLayoutParams());

                    } catch (Exception e) {
                        // TODO: handle exception
                    }

                    holder.imgAdd.setOnClickListener(new OnClickListener() {                    
                        @Override
                        public void onClick(View v) {                       

                            activity.startActivity(new Intent(activity, AdvertismentActivity.class));

                        }
                    });             
                    Log.i("---", "---------" + imgUrl);
                    holder.llAdd.setVisibility(View.VISIBLE);
                  }

                holder.ll_data.addView(view);      

                Log.i("Set Tag", position+"OK"+i);
                view.setTag(position+"OK"+i);

                view.setOnClickListener(new OnClickListener() {

                    @Override
                    public void onClick(View v) {

                        String tag = (String) v.getTag();
                        String[] arr = tag.split("OK");
                        int p = Integer.parseInt(arr[0]);
                        int i = Integer.parseInt(arr[1]);
                        Log.i("Pos and I", p + "   " + i );

                        str = ((NewsScreenActivity.StoryData) ((NewsScreenActivity.MainData) NewsScreenActivity.TotalDataArray .get(p)).storyArr.get(i)).storyid;

                        Log.i("Pos and I and STR", p + "   " + i + "   "  + str);
                        Intent intent = new Intent(context,ShowFullDescriprion.class);
                        intent.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
                        intent.putExtra("id", str);
                        intent.putExtra("cat", p);
                        intent.putExtra("pos",i);
                        context.startActivity(intent);
                    }
                });
     } catch (Exception e) {
            // TODO: handle exception
        }
            }
            return vi;

        }

        public static String getDate(long milliSeconds, String dateFormat) {
            // Create a DateFormatter object for displaying date in specified
            // format.
            DateFormat formatter = new SimpleDateFormat(dateFormat);

            // Create a calendar object that will convert the date and time value in
            // milliseconds to date.
            Calendar calendar = Calendar.getInstance();
            calendar.setTimeInMillis(milliSeconds);
            return formatter.format(calendar.getTime());         
        }    
        public static class viewholder {

            TextView news_header_title, short_text, des, date_time;
            LinearLayout ll_data, llAdd;
            public ImageView image, imgAdd;

        }
        public static Bitmap loadImageFromUrl(String url) {
            URL m;
            InputStream i = null;
            BufferedInputStream bis = null;
            ByteArrayOutputStream out =null;
            try {
                m = new URL(url);
                i = (InputStream) m.getContent();
                bis = new BufferedInputStream(i,1024 * 8);
                out = new ByteArrayOutputStream();
                int len=0;
                byte[] buffer = new byte[1024];
                while((len = bis.read(buffer)) != -1){
                    out.write(buffer, 0, len);
                }
                out.close();
                bis.close();
            } catch (MalformedURLException e1) {
                e1.printStackTrace();
            } catch (IOException e) {
                e.printStackTrace();
            }
            byte[] data = out.toByteArray();
            Bitmap bitmap = BitmapFactory.decodeByteArray(data, 0, data.length);
            //Drawable d = Drawable.createFromStream(i, "src");
            return bitmap;
        }

    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T04:24:39.420

```
import java.io.BufferedInputStream;
import java.io.ByteArrayOutputStream;
import java.io.IOException;
import java.io.InputStream;
import java.net.MalformedURLException;
import java.net.URL;
import java.net.URLConnection;
import java.text.SimpleDateFormat;
import java.util.ArrayList;
import java.util.Date;

import org.apache.http.HttpResponse;
import org.apache.http.client.HttpClient;
import org.apache.http.client.methods.HttpPost;
import org.apache.http.impl.client.DefaultHttpClient;
import org.apache.http.params.HttpConnectionParams;
import org.apache.http.util.EntityUtils;
import org.json.JSONArray;
import org.json.JSONObject;

import android.app.Activity;
import android.app.AlertDialog;
import android.app.ProgressDialog;
import android.content.BroadcastReceiver;
import android.content.Context;
import android.content.DialogInterface;
import android.content.Intent;
import android.content.IntentFilter;
import android.graphics.Bitmap;
import android.graphics.BitmapFactory;
import android.graphics.Color;
import android.net.ConnectivityManager;
import android.net.NetworkInfo;
import android.os.AsyncTask;
import android.os.Bundle;
import android.os.StrictMode;

import android.text.Html;
import android.util.Log;
import android.view.GestureDetector;
import android.view.GestureDetector.SimpleOnGestureListener;
import android.view.MotionEvent;
import android.view.View;
import android.view.View.OnClickListener;
import android.view.Window;
import android.view.animation.Animation;
import android.view.animation.TranslateAnimation;
import android.widget.Button;
import android.widget.ImageView;
import android.widget.LinearLayout;
import android.widget.TextView;
import android.widget.Toast;

public class ShowFullDescriprion extends Activity implements OnClickListener {

    ImageView show_image, adv_image, refresh,show_home;
    TextView title_text, des_text, date_time_txt;
    Button back_btn;
    LinearLayout ll, llAdv;
    public static String url, full_des, advertising, adurl = "",img,
            targeturl;
    ProgressDialog progressDialog;
    TextView mDisplay;
    AsyncTask<Void, Void, Void> mRegisterTask;
    String TAG = "ShowFullDescriprion";

    public static ArrayList<String> catId = new ArrayList<String>();
    public static ArrayList<String> catDisp = new ArrayList<String>();
    public static ArrayList<String> next_arraylist = new ArrayList<String>();
    public static ArrayList<String> privious_arraylist = new ArrayList<String>();
    //public static ArrayList<String> arrayList_advertising = new ArrayList<String>();

    SimpleGestureFilter simpleGestureFilter;
    LinearLayout llCat;
    TextView tvCatDisp;

    private static final int SWIPE_MIN_DISTANCE = 200;
    private static final int SWIPE_MAX_OFF_PATH = 250;
    private static final int SWIPE_THRESHOLD_VELOCITY = 200;
    int swpCnt = 0;
    int SWIPE_MAX_VALUE = 1;
    int PIC_WIDTH = 0;

    private GestureDetector gestureDetector;
    View.OnTouchListener gestureListener;

    @SuppressWarnings("unused")
    private Animation animleftin = null, animleftout = null,
            animrightin = null, animrightout = null;

    public static String idS, titleS, dateS, descS, next, privious, adv;
    public static String bigimageS=null;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);
        requestWindowFeature(Window.FEATURE_NO_TITLE);
        setContentView(R.layout.showfull_description);

        back_btn = (Button) findViewById(R.id.button1);
        llCat = (LinearLayout) findViewById(R.id.llCategory);
//      llCat.setOnClickListener(this);
        adv_image = (ImageView) findViewById(R.id.imgAdd);
        refresh = (ImageView) findViewById(R.id.refresh_btn);
        show_home=(ImageView)findViewById(R.id.showfull_des_home);

        llAdv = (LinearLayout) findViewById(R.id.llAdd);
        // simpleGestureFilter = new SimpleGestureFilter(this, this);
    //  int SWIPE_MAX_VALUE_new = ((NewsScreenActivity.MainData) NewsScreenActivity.TotalDataArray.get(getIntent().getExtras().getInt("cat"))).storyArr.size();

        //swpCnt = ((CategoryActivity.MainData) CategoryActivity.TotalDataArray.get(getIntent().getExtras().getInt("cat"))).storyArr.indexOf(getIntent().getExtras().getString("id"));
        //((NewsScreenActivity.StoryData) ((NewsScreenActivity.MainData) NewsScreenActivity.TotalDataArray .get(p)).storyArr.get(i)).storyid;
        //String temp = ((CategoryActivity.StoryData) ((CategoryActivity.MainData) CategoryActivity.TotalDataArray .get(getIntent().getExtras().getInt("cat"))).storyArr.get(getIntent().getExtras().getString("pos"))).storyid;

    //  Log.i("Show full Description .....", "**********************  cat "+getIntent().getExtras().getInt("cat")+" **** id *** "+getIntent().getExtras().getString("id"));
        //Log.i("Show full Description .....", "**********************  SWIPE_MAX_VALUE_new "+ SWIPE_MAX_VALUE_new+" *** swpCnt **** "+temp +"**** Array *** "+((CategoryActivity.MainData) CategoryActivity.TotalDataArray.get(getIntent().getExtras().getInt("cat"))).storyArr.get(5));
        try {
        //  SWIPE_MAX_VALUE = ((NewsScreenActivity.MainData) NewsScreenActivity.TotalDataArray.get(getIntent().getExtras().getInt("cat"))).storyArr.size();
            SWIPE_MAX_VALUE = ((CategoryActivity.MainData) CategoryActivity.TotalDataArray.get(getIntent().getExtras().getInt("cat"))).storyArr.size();
            swpCnt = getIntent().getExtras().getInt("pos");

        } catch (Exception e) {
            // TODO: handle exception
        }

        url = "http://maritimeglobalnews.com/json/story/"+ getIntent().getExtras().getString("id");

        new StoryDataAsyn().execute();

        title_text = (TextView) findViewById(R.id.show_full_des_title_txt);
        show_image = (ImageView) findViewById(R.id.show_full_des_image);
        des_text = (TextView) findViewById(R.id.show_full_des_txt);
        date_time_txt = (TextView) findViewById(R.id.show_full_des_datetime_txt);

        StrictMode.ThreadPolicy policy = new StrictMode.ThreadPolicy.Builder().permitAll().build();

        StrictMode.setThreadPolicy(policy); 

        show_home.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {
                // TODO Auto-generated method stub
            startActivity(new Intent(getBaseContext(), NewsScreenActivity.class));
            finish();
            }
        });

    /*  Log.i(TAG,
                "================Inside OnCreate Method==============================");
        checkNotNull(SERVER_URL, "SERVER_URL");
        checkNotNull(SENDER_ID, "SENDER_ID");
        // Make sure the device has the proper dependencies.
        GCMRegistrar.checkDevice(getBaseContext());
        // Make sure the manifest was properly set - comment out this line
        // while developing the app, then uncomment it when it's ready.
        GCMRegistrar.checkManifest(getBaseContext());

        registerReceiver(mHandleMessageReceiver, new IntentFilter(
                DISPLAY_MESSAGE_ACTION));
        final String regId = GCMRegistrar.getRegistrationId(this);
        if (regId.equals("")) {
            Log.i(TAG,
                    "================Inside if in regId=null ==============================");
            // Automatically registers application on startup.
            GCMRegistrar.register(this, SENDER_ID);
        } else {
            Log.i(TAG,
                    "================Inside else in regId=null ==============================");
            // Device is already registered on GCM, needs to check if it is
            // registered on our server as well.
            if (GCMRegistrar.isRegisteredOnServer(this)) {
                // Skips registration.
                Log.i(TAG,
                        "================Inside else in regId=null Already register on Server =============================");
                mDisplay.append(getString(R.string.already_registered) + "\n");
            } else {
                Log.i(TAG,
                        "================Inside else in regId=null trying to  register on Server =============================");
                // Try to register again, but not in the UI thread.
                // It's also necessary to cancel the thread onDestroy(),
                // hence the use of AsyncTask instead of a raw thread.
                final Context context = this;
                mRegisterTask = new AsyncTask<Void, Void, Void>() {

                    @Override
                    protected Void doInBackground(Void... params) {
                        Log.i(TAG,
                                "================Inside doInBackground Method==============================");
                        boolean registered = ServerUtilities.register(context,
                                regId);
                        // At this point all attempts to register with the app
                        // server failed, so we need to unregister the device
                        // from GCM - the app will try to register again when
                        // it is restarted. Note that GCM will send an
                        // unregistered callback upon completion, but
                        // GCMIntentService.onUnregistered() will ignore it.
                        if (!registered) {
                            GCMRegistrar.unregister(context);
                        }
                        return null;
                    }

                    @Override
                    protected void onPostExecute(Void result) {
                        Log.i(TAG,
                                "================Inside onPostExecute Method==============================");
                        mRegisterTask = null;
                    }

                };
                mRegisterTask.execute(null, null, null);
            }
        }       */

        back_btn.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {
                // TODO Auto-generated method stub

                ShowFullDescriprion.this.finish();
            }
        });
        refresh.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {
                // TODO Auto-generated method stub

                new StoryDataAsyn().execute();      

            }
        });

        gestureDetector = new GestureDetector(new MyGestureDetector());
        gestureListener = new View.OnTouchListener() {
            public boolean onTouch(View v, MotionEvent event) {
                return gestureDetector.onTouchEvent(event);
            }
        };
        prepareAnimations();
    }

    @Override
    public boolean onTouchEvent(MotionEvent event) {
        // TODO Auto-generated method stub
        return super.onTouchEvent(event);
    }

    /*boolean net;

    //onCreate
    net = void isOnline() {
    }
    if (net == true)
    {
    //perform internet related tasks in the app
    }

    //function
    public boolean isOnline1() {
            ConnectivityManager cm = (ConnectivityManager) this
                    .getSystemService(Context.CONNECTIVITY_SERVICE);

            NetworkInfo activeNetworkInfo = cm.getActiveNetworkInfo();
            return activeNetworkInfo != null;

            // return cm.getActiveNetworkInfo().isConnected();

        }*/

    public class StoryDataAsyn extends AsyncTask<Void, Void, Void> {
    //  NewsScreenActivity obj = new NewsScreenActivity();

        @Override
        protected void onPreExecute() {
            // TODO Auto-generated method stub
            super.onPreExecute();

    //      if (isNetworkConnected() == true) 
    //      {
                progressDialog = new ProgressDialog(ShowFullDescriprion.this);
                progressDialog.setMessage("Loding ...");
                progressDialog.setCancelable(false);
                progressDialog.show();
/*          } else  {
                AlertDialog connection = new AlertDialog.Builder(
                        ShowFullDescriprion.this)
                        .setTitle("No Network Found")
                        .setMessage(
                                "Internet Connection Reqired To Use this Application")
                        .setPositiveButton("Ok",
                                new DialogInterface.OnClickListener() {

                                    public void onClick(DialogInterface dialog,
                                            int whichButton) 
                                    {

                                    }
                                }).create();

                connection.show();
            }
*/      }

        @Override
        protected Void doInBackground(Void... params) {
            // TODO Auto-generated method stub

            catId.clear();
            catDisp.clear();            
            getData(url);

            return null;
        }

        @Override
        protected void onPostExecute(Void result) {
            // TODO Auto-generated method stub
            super.onPostExecute(result);
            if (isNetworkConnected() == true) {

            progressDialog.dismiss();
            title_text.setText(titleS);         

            /*if(bigimageS!= null && !bigimageS.equals(""))
            {
            show_image.setImageBitmap(decodeImage(bigimageS));
            Log.v("if", ""+bigimageS);
            }else
            {
                show_image.setImageBitmap(decodeImage(null));

                Log.v("else", ""+bigimageS);
            }   
*/

            if(isBlank(bigimageS)==true)

            {
                show_image.setVisibility(View.GONE);
                show_image.setImageBitmap(decodeImage(null));
            }
            else if(isBlank(bigimageS)==false)
            {
                show_image.setImageBitmap(decodeImage(bigimageS));
            }
    //      show_image.setImageBitmap(loadImageFromUrl(bigimageS));         

            //show_image.setImageBitmap(decodeImage(bigimageS));
            des_text.setText(Html.fromHtml(descS));         

            Date parsed = new Date(Long.parseLong(dateS.substring(6,
                    dateS.length() - 2)));

            SimpleDateFormat sdf = new SimpleDateFormat("MMM dd,yyyy hh:mmaa");
            System.out.println(sdf.format(parsed));

            date_time_txt.setText(sdf.format(parsed));

            llCat.removeAllViews();
            for (int i = 0; i < catId.size(); i++) {

                tvCatDisp = new TextView(ShowFullDescriprion.this);

                tvCatDisp.setText("");      

                tvCatDisp.setText(catDisp.get(i));
                tvCatDisp.setBackgroundResource(R.drawable.box);
                tvCatDisp.setTextColor(Color.BLACK);
                tvCatDisp.setTextSize(18);
                tvCatDisp.setTag(i);
                Log.e("tvCatDisp............", ""+catDisp.get(i));
                tvCatDisp.setOnClickListener(ShowFullDescriprion.this);

                tvCatDisp.setOnClickListener(new OnClickListener() {

                 @Override
                 public void onClick(View v) {
                 // TODO Auto-generated method stub
                 int pos = Integer.parseInt(v.getTag().toString());
                 startActivity(new Intent(ShowFullDescriprion.this,
                 CategoryActivity.class).putExtra("id",catId.get(pos)));
                 }
                 });

                llCat.addView(tvCatDisp);
            }
            llAdv.removeAllViews();
            if ((!adurl.equalsIgnoreCase("")) && adurl != null) {
                llAdv.setVisibility(View.VISIBLE);
                ImageLoader il = new ImageLoader(ShowFullDescriprion.this);

            //  adv_image.setImageBitmap(il.getBitmap(adurl));
        //      adv_image.setImageBitmap(loadImageFromUrl(adurl));
                  try {
                        InputStream is = (InputStream) new URL(adurl).getContent();

                        GifDecoderView webview1 = new GifDecoderView(ShowFullDescriprion.this, is);

                    //    activity.setContentView(webview1);

                    llAdv.addView(webview1,adv_image.getLayoutParams());

                   // holder.imgAdd.setImageBitmap(IL.getBitmap(imgUrl));

                    } catch (Exception e) {

                    }

                  llAdv.setOnClickListener(new OnClickListener() {

                    @Override
                    public void onClick(View v) {
                        // TODO Auto-generated method stub
                    //    Intent showAdvIntent =new Intent(ShowFullDescriprion.this,AdvertismentActivity.class);
                    //    showAdvIntent.putExtra("id",targeturl);
                        startActivity(new Intent(getBaseContext(),AdvertismentActivity.class));
                        Log.e("show add url...", ""+targeturl);
                    }
                });
            } 
            }else 

            {
                llAdv.setVisibility(View.GONE);
                AlertDialog connection = new AlertDialog.Builder(
                        ShowFullDescriprion.this)
                        .setTitle("No Network Found")
                        .setMessage(
                                "Internet Connection Reqired To Use this Application")
                        .setPositiveButton("Ok",
                                new DialogInterface.OnClickListener() {

                                    public void onClick(DialogInterface dialog,
                                            int whichButton) 
                                    {
                                    //  new StoryDataAsyn().execute();
                                        progressDialog.dismiss();
                                    }
                                }).create();

                connection.show();              

            }       

        }
    }
    public boolean isNetworkConnected() {
        ConnectivityManager cm = (ConnectivityManager) getSystemService(Context.CONNECTIVITY_SERVICE);
        NetworkInfo ni = cm.getActiveNetworkInfo();
        if (ni == null) {
            return false;
        } else

        return true;
    }

    public void getData(String url) {

        HttpClient client = new DefaultHttpClient();
        HttpConnectionParams.setConnectionTimeout(client.getParams(), 10000); // Timeout        

        try {

            HttpPost request = new HttpPost(url);

            DefaultHttpClient httpClient = new DefaultHttpClient();

            HttpResponse res = httpClient.execute(request);
            Log.i("Request", request.toString());

            String JsonResponseData = EntityUtils.toString(res.getEntity());
            Log.i("JSON", JsonResponseData);

            JSONObject mainJsonObj = new JSONObject(JsonResponseData);

            titleS = mainJsonObj.getString("Title");
            dateS = mainJsonObj.getString("Date");
            descS = mainJsonObj.getString("ContentHTML");
            next = mainJsonObj.getString("NextStoryEID");
            next_arraylist.add(next);
            Log.e("next id", "" + next_arraylist);
            Log.e("nextstring id", "" + next);

            privious = mainJsonObj.getString("PrevStoryEID");
            privious_arraylist.add(privious);
            Log.e("privious id", "" + privious_arraylist);
            Log.e("privious string id", "" + privious);

            try {
                JSONArray tmpAd = mainJsonObj.optJSONArray("advertising");              
                adurl = tmpAd.getJSONObject(0).getString("ImageUrl");
                targeturl = tmpAd.getJSONObject(0).getString("TargetUrl");
                Log.v("target url is", "" + targeturl);

            } catch (Exception e) {
                // TODO: handle exception
            }

            try {
                JSONArray tmpimg = mainJsonObj.optJSONArray("images");          
                bigimageS = tmpimg.getJSONObject(0).getString("iPhoneBigImageURL");             
                Log.v("bigimageS is", "" + bigimageS);
            } catch (Exception e) {
                // TODO: handle exception
            }       

            JSONArray categJsonArr = mainJsonObj.getJSONArray("categories");    

            for (int i = 0; i < categJsonArr.length(); i++) {

                catId.add(categJsonArr.getJSONObject(i) .getString("CategoryEID"));
                catDisp.add(categJsonArr.getJSONObject(i).getString("CategoryDisplay"));
            }

        } catch (Exception e) {
            e.printStackTrace();
        }
    }

    public static Bitmap loadImageFromUrl(String url) {
        URL m;
        InputStream i = null;
        BufferedInputStream bis = null;
        ByteArrayOutputStream out =null;
        try {
            m = new URL(url);
            i = (InputStream) m.getContent();
            bis = new BufferedInputStream(i,1024 * 8);
            out = new ByteArrayOutputStream();
            int len=0;
            byte[] buffer = new byte[1024];
            while((len = bis.read(buffer)) != -1){
                out.write(buffer, 0, len);
            }
            out.close();
            bis.close();
        } catch (MalformedURLException e1) {
            e1.printStackTrace();
        } catch (IOException e) {
            e.printStackTrace();
        }
        byte[] data = out.toByteArray();
        Bitmap bitmap = BitmapFactory.decodeByteArray(data, 0, data.length);
        //Drawable d = Drawable.createFromStream(i, "src");
        return bitmap;
    }

    public static Bitmap decodeImage(String arrayList_image) {

        URL aURL;

        try {

            aURL = new URL(arrayList_image);

            URLConnection conn = aURL.openConnection();

            conn.connect();

            InputStream is = conn.getInputStream();

            BufferedInputStream bis = new BufferedInputStream(is);

            Bitmap bm = BitmapFactory.decodeStream(bis);

            bis.close();

            is.close();

            return bm;

        } catch (MalformedURLException e) {

            e.printStackTrace();

        } catch (IOException e) {

            e.printStackTrace();
        }
        return null;
    }

    @Override
    public boolean dispatchTouchEvent(MotionEvent me) {
        this.gestureDetector.onTouchEvent(me);
        return super.dispatchTouchEvent(me);
    }

    class MyGestureDetector extends SimpleOnGestureListener {
        @Override
        public boolean onDown(MotionEvent e) {
            // TODO Auto-generated method stub

            return super.onDown(e);
        }

        @Override
        public boolean onFling(MotionEvent e1, MotionEvent e2, float velocityX,
                float velocityY) {

            Log.e("Inside onfling", "Call");

            if (Math.abs(e1.getY() - e2.getY()) > SWIPE_MAX_OFF_PATH)
                return false;
            // right to left swipe
            if (e1.getX() - e2.getX() > SWIPE_MIN_DISTANCE && Math.abs(velocityX) > SWIPE_THRESHOLD_VELOCITY) {

                url = "http://maritimeglobalnews.com/json/story/"+next;
                new StoryDataAsyn().execute();

                Log.d("url next mate", ""+url);
                Log.d("right to left privious.....", ""+next_arraylist);        

            try {
                Log.i("","swip count " + swpCnt+" ***** "+((CategoryActivity.MainData) CategoryActivity.TotalDataArray.get(getIntent().getExtras().getInt("cat"))).storyArr.size());    
            } catch (Exception e) {
                // TODO: handle exception
            }               
                if (swpCnt >= 0 && swpCnt < SWIPE_MAX_VALUE - 1) 
                {
                    swpCnt++;

                /*  url = "http://maritimeglobalnews.com/json/story/"+next;
                    new StoryDataAsyn().execute();

                    Log.d("url next mate", ""+url);
                    Log.d("right to left privious.....", ""+next_arraylist);        */      
                }               
            } 
            else if (e2.getX() - e1.getX() > SWIPE_MIN_DISTANCE && Math.abs(velocityX) > SWIPE_THRESHOLD_VELOCITY ){ 

                url = "http://maritimeglobalnews.com/json/story/"+privious;
                Log.v("previousid first if", ""+privious);
                Log.i("right to left privious first if.....", ""+privious_arraylist);

                new StoryDataAsyn().execute();  

                if (swpCnt > 0 && swpCnt <= SWIPE_MAX_VALUE - 1) {

                    swpCnt--;

                    /*url = "http://maritimeglobalnews.com/json/story/"+privious;
                    Log.v("url",""+url);
                    Log.v("previousid 2 if", ""+privious);                  
                    new StoryDataAsyn().execute();      */              
                }
                try {
                    Log.i("","swip count " + swpCnt+" ***** "+((CategoryActivity.MainData) CategoryActivity.TotalDataArray.get(getIntent().getExtras().getInt("cat"))).storyArr.size());                    
                } catch (Exception e) {
                    // TODO: handle exception
                }

                /*if (swpCnt > 0 && swpCnt <= SWIPE_MAX_VALUE - 1) 
                {
                    swpCnt--;   

                    url = "http://maritimeglobalnews.com/json/story/"+privious;
                    Log.v("previousid 3 if", ""+privious);
                    Log.i("right to left privious. 3 if", ""+privious_arraylist);                   

                    new StoryDataAsyn().execute();              
                }   */                      
            }
            return false;
        }
    }

    private void prepareAnimations() {
        animleftin = new TranslateAnimation(Animation.RELATIVE_TO_PARENT,
                +1.0f, Animation.RELATIVE_TO_PARENT, 0.0f,
                Animation.RELATIVE_TO_PARENT, 0.0f,
                Animation.RELATIVE_TO_PARENT, 0.0f);

        animleftout = new TranslateAnimation(Animation.RELATIVE_TO_PARENT,
                0.0f, Animation.RELATIVE_TO_PARENT, -1.0f,
                Animation.RELATIVE_TO_PARENT, 0.0f,
                Animation.RELATIVE_TO_PARENT, 0.0f);

        animrightin = new TranslateAnimation(Animation.RELATIVE_TO_PARENT,
                -1.0f, Animation.RELATIVE_TO_PARENT, 0.0f,
                Animation.RELATIVE_TO_PARENT, 0.0f,
                Animation.RELATIVE_TO_PARENT, 0.0f);

        animrightout = new TranslateAnimation(Animation.RELATIVE_TO_PARENT,
                0.0f, Animation.RELATIVE_TO_PARENT, +1.0f,
                Animation.RELATIVE_TO_PARENT, 0.0f,
                Animation.RELATIVE_TO_PARENT, 0.0f);
            }

    /*@Override
    protected void onDestroy() {
        Log.i(TAG,
                "================Inside  OnDestroy  Method==============================");
        if (mRegisterTask != null) {
            mRegisterTask.cancel(true);
        }
        unregisterReceiver(mHandleMessageReceiver);
        GCMRegistrar.onDestroy(this);
        super.onDestroy();
    }

    private void checkNotNull(Object reference, String name) {
        Log.i(TAG,
                "================Inside checkNotNull  Method==============================");
        if (reference == null) {
            throw new NullPointerException(getString(R.string.error_config,
                    name));
        }
    }

    private final BroadcastReceiver mHandleMessageReceiver = new BroadcastReceiver() {

        @Override
        public void onReceive(Context context, Intent intent) {
            Log.i(TAG,
                    "================Inside OnReceive in BroadcastReceiver Method==============================");
            String newMessage = intent.getExtras().getString(EXTRA_MESSAGE);
            mDisplay.append(newMessage + "\n");
        }
    };*/

    @Override
    public void onClick(View v) {
        // TODO Auto-generated method stub
        if (v == tvCatDisp) {

            // TODO Auto-generated method stub

            startActivity(new Intent(ShowFullDescriprion.this,
                    CategoryActivity.class).putExtra("id", catId.get((Integer)v.getTag())));
        }

    }
    public static boolean isBlank(String string) {
        if (bigimageS == null || bigimageS.length() == 0)
            return true;

        int l = bigimageS.length();
        for (int i = 0; i < l; i++) {
            if (!Character.isWhitespace(bigimageS.codePointAt(i)))
                return false;
        }
        return true;
    }

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-07T10:16:50.400

您没有重复使用列表项。这就是列表开始“结巴”的原因。

关于这个问题有很多答案显示了重用 ListView 项目的概念。 [像这个](https://stackoverflow.com/a/6923513/422060)

一般来说：在您的`getView`方法中，检查是否`convertView`为空。如果是，请夸大你的观点。如果它不为空，只需插入要显示的项目。这应该可以解决您口吃的列表视图问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-07T13:37:05.980

请用于 BaseAdapter 中的现有布局，如下所示

```
ViewHolder holder = null;

    if ( convertView == null )
    {
        /* There is no view at this position, we create a new one. 
           In this case by inflating an xml layout */
        convertView = mInflater.inflate(R.layout.listview_item, null);  
        holder = new ViewHolder();
        holder.toggleOk = (ToggleButton) convertView.findViewById( R.id.togOk );
        convertView.setTag (holder);
    }
    else
    {
        /* We recycle a View that already exists */
        holder = (ViewHolder) convertView.getTag ();
    } 
```

这可能会帮助你

# php - 从在同一域上运行的自定义脚本获取 Magento 1.7.0.2 登录管理员 ID

> ID：12316112
> 
> 赞同：0
> 
> 时间：2012-09-07T10:15:29.457
> 
> 标签：php, magento, magento-1.7

我似乎已经用尽了 google 和 stackoverflow 上的每个示例。请有人告诉我这是否可能？

我的脚本位于 magento 安装旁边的文件夹中。例如。

```
/var/www/app
/var/www/skin
/var/www/myCustomScript 
```

我正在尝试获取当前登录的管理员 ID。

我尝试过的众多示例之一。

```
require_once ("/var/www/app/Mage.php");
umask(0);
Mage::app();
$user = Mage::getSingleton('admin/session');
$userId = $user->getUser()->getUserId();
echo $userId; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T11:32:32.930

调用上下文是什么？如果您尝试从具有 adminhtml cookie 的浏览器以外的上下文初始化会话，那么您将度过一段糟糕的时光。如果这是在独立脚本中，则需要通过 curl 登录。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-07T11:07:07.023

```
<?php
require_once ("app/Mage.php");
umask(0);
Mage::app();
Mage::getSingleton('core/session',array('name'=>'adminhtml'));
$user = Mage::getSingleton('admin/session');
$userId = $user->getUser()->getUserId();
echo $userId;
?> 
```

# python - python搜索数字字符串，在它们周围加上括号

> ID：12316116
> 
> 赞同：0
> 
> 时间：2012-09-07T10:15:49.507
> 
> 标签：python, regex, insert, numbers

我正在尝试在字符串中搜索数字，并在找到它们时在它们周围加上一些字符，例如

```
a = "hello, i am 8 years old and have 12 toys"
a = method(a)
print a
"hello, i am \ref{8} years old and have \ref{12} toys" 
```

我查看了 re （正则表达式）库，但似乎找不到任何有用的东西......任何很酷的想法？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-07T10:17:34.467

这是该方法的基本用法`.sub`：

```
numbers = re.compile(r'(\d+)')

a = numbers.sub(r'\ref{\1}', a) 
```

数字模式周围的括号`\d+`创建一个组，`\1`引用替换为组的内容。

```
>>> import re
>>> a = "hello, i am 8 years old and have 12 toys"
>>> numbers = re.compile(r'(\d+)')
>>> a = numbers.sub(r'\\ref{\1}', a)
>>> print a
hello, i am \ref{8} years old and have \ref{12} toys 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T10:25:03.690

你需要使用 re.sub 函数沿着这些线：

`re.sub("(\d+)",my_sub_func,text)`# 在此处捕获数字（尽管这仅捕获非实数） my_sub_func 的定义如下：

`def my_sub_func(match_obj):`

```
 text = match_obj.group(0) # get the digit text here
    new_text = "\\ref{"+text+"}" # change the pattern here
    return new_text` 
```

# android - 在 OpenGL 视图顶部添加一个按钮

> ID：12316121
> 
> 赞同：0
> 
> 时间：2012-09-07T10:16:02.513
> 
> 标签：android, button, opengl-es

我租了一个编码器来为我的公司开发一个基于 Android 的 OpenGL 应用程序。该应用程序做了一些非常复杂的事情，并根据通过意图（来自我的其他应用程序）的坐标来渲染 3d 管。我需要在他的 OpenGL 应用程序中添加一个按钮，以便退出应用程序并返回到我原来的应用程序。我只接触过 Java，不知道如何在不涉及布局的情况下添加元素。我不希望按钮基于 OpenGL，因为我对 OpenGL 真的一无所知，所以我宁愿在 Activity 之上放置一个 Android 元素。

这就是他的创建例程的样子。（启动应用程序的意图是传递数据。为了编译，我必须注释掉该代码并仅组成数据）。

```
 protected void onCreate(Bundle savedInstanceState)
{
    super.onCreate(savedInstanceState);

    Intent intent = getIntent();
    //String data = intent.getStringExtra("data");                          
    //double radius = Double.parseDouble(intent.getStringExtra("radius"));                          
    //double width = Double.parseDouble(intent.getStringExtra("width"));                            
    String data = "254,0,90,2,254,0,90,2";
    double radius = 20;
    double width = 10;
    openGLTube3D = new OpenGLTube3D(this, data, radius, radius, width);
    setContentView(openGLTube3D);
} 
```

他使用`setContentView()`他的 OpenGL 类而不是 XML 文件，所以我不知道在哪里添加按钮。

任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-07T17:10:14.933

如果 OpenGLTube3D 是一个视图，那么我建议：

像您通常那样创建一个 XML 文件，以 framelayout 作为根，但不要使用 opengl 视图。这应该包含您想要在 OpenGL 视图顶部显示的任何按钮或小部件。

你会想要这样的东西（请原谅下面的任何语法错误，我是凭记忆写的）：

```
<FrameLayout
    android:id="@+id/myframelayout>
    <Button
      android:...
      android:...
      android:... />
</FrameLayout> 
```

然后，在 onCreate 中，您希望将 layout.xml 设置为内容视图，然后您希望将 OpenGL 视图作为第一个索引插入到 framelayout 中（因此它将出现在按钮下方）

伪代码：

```
openGLTube3D = new OpenGLTube3D(this, data, radius, radius, width);    
FrameLayout frame = (FrameLayout)findViewById(R.id.myframelayout);
frame.addView(openGLTube3D, 0); 
```

我相信这应该将 OpenGL 视图放在框架布局中定义的所有其他元素的下方。

# mysql - MySQL：非常慢的更新/插入/删除查询挂在“查询结束”步骤

> ID：12316122
> 
> 赞同：24
> 
> 时间：2012-09-07T10:16:06.870
> 
> 标签：mysql, performance, replication, innodb

我有一个大而重的 mysql 数据库，它有时执行得非常快，但有时会变得非常慢。所有表都是**InnoDB**，服务器有**32GB 的 RAM**，**数据库大小约为 40GB**。

我的前 20 个查询`slow_query_log`是和查询`update`，我不明白为什么它们这么慢（有时长达 120 秒！）`insert``delete`

这是最常见的查询：

```
UPDATE comment_fallows set comment_cnt_new = 0 WHERE user_id = 1; 
```

分析结果：

```
mysql> set profiling = 1;
Query OK, 0 rows affected (0.00 sec)

mysql> update comment_fallows set comment_cnt_new = 0 where user_id = 1;
Query OK, 0 rows affected (2.77 sec)
Rows matched: 18  Changed: 0  Warnings: 0

mysql> show profile for query 1;
+---------------------------+----------+
| Status                    | Duration |
+---------------------------+----------+
| starting                  | 0.000021 |
| checking permissions      | 0.000004 |
| Opening tables            | 0.000010 |
| System lock               | 0.000004 |
| init                      | 0.000041 |
| Searching rows for update | 0.000084 |
| Updating                  | 0.000055 |
| end                       | 0.000010 |
| query end                 | 2.766245 |
| closing tables            | 0.000007 |
| freeing items             | 0.000013 |
| logging slow query        | 0.000003 |
| cleaning up               | 0.000002 |
+---------------------------+----------+
13 rows in set (0.00 sec) 
```

我正在使用主/服务器复制，因此启用了二进制日志。我已经放弃了我在互联网上找到的一个建议并设置`flush_log_at_trx_commit`为`0`但它没有任何区别：

```
mysql> show variables like '%trx%';
+-------------------------------------------+-------+
| Variable_name                             | Value |
+-------------------------------------------+-------+
| innodb_flush_log_at_trx_commit            | 0     |
| innodb_use_global_flush_log_at_trx_commit | ON    |
+-------------------------------------------+-------+ 
```

表结构：

```
CREATE TABLE `comment_fallows` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `user_id` int(11) NOT NULL,
  `part_id` int(11) DEFAULT NULL,
  `article_id` int(11) DEFAULT NULL,
  `request_id` int(11) DEFAULT NULL,
  `comment_cnt` int(10) unsigned NOT NULL,
  `comment_cnt_new` int(10) unsigned NOT NULL DEFAULT '0',
  `last_comment_date` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
  PRIMARY KEY (`id`),
  KEY `user_id` (`user_id`,`last_comment_date`),
  KEY `part_id` (`part_id`),
  KEY `last_comment_date` (`last_comment_date`),
  KEY `request_id` (`request_id`),
  CONSTRAINT `comment_fallows_ibfk_1` FOREIGN KEY (`user_id`) REFERENCES `users` (`id`) ON DELETE CASCADE,
  CONSTRAINT `comment_fallows_ibfk_2` FOREIGN KEY (`part_id`) REFERENCES `fanfic_parts` (`id`) ON DELETE CASCADE,
  CONSTRAINT `comment_fallows_ibfk_3` FOREIGN KEY (`request_id`) REFERENCES `requests` (`id`) ON DELETE CASCADE
) ENGINE=InnoDB AUTO_INCREMENT=2239419 DEFAULT CHARSET=utf8 
```

以及所有的 innodb 设置（服务器有 32 GB 的 RAM）：

```
mysql> show variables like '%innodb%';
+-------------------------------------------+------------------------+
| Variable_name                             | Value                  |
+-------------------------------------------+------------------------+
| have_innodb                               | YES                    |
| ignore_builtin_innodb                     | OFF                    |
| innodb_adaptive_flushing                  | ON                     |
| innodb_adaptive_flushing_method           | estimate               |
| innodb_adaptive_hash_index                | ON                     |
| innodb_adaptive_hash_index_partitions     | 1                      |
| innodb_additional_mem_pool_size           | 16777216               |
| innodb_autoextend_increment               | 8                      |
| innodb_autoinc_lock_mode                  | 1                      |
| innodb_blocking_buffer_pool_restore       | OFF                    |
| innodb_buffer_pool_instances              | 1                      |
| innodb_buffer_pool_restore_at_startup     | 0                      |
| innodb_buffer_pool_shm_checksum           | ON                     |
| innodb_buffer_pool_shm_key                | 0                      |
| innodb_buffer_pool_size                   | 21474836480            |
| innodb_change_buffering                   | all                    |
| innodb_checkpoint_age_target              | 0                      |
| innodb_checksums                          | ON                     |
| innodb_commit_concurrency                 | 0                      |
| innodb_concurrency_tickets                | 500                    |
| innodb_corrupt_table_action               | assert                 |
| innodb_data_file_path                     | ibdata1:10M:autoextend |
| innodb_data_home_dir                      |                        |
| innodb_dict_size_limit                    | 0                      |
| innodb_doublewrite                        | ON                     |
| innodb_doublewrite_file                   |                        |
| innodb_fake_changes                       | OFF                    |
| innodb_fast_checksum                      | OFF                    |
| innodb_fast_shutdown                      | 1                      |
| innodb_file_format                        | Antelope               |
| innodb_file_format_check                  | ON                     |
| innodb_file_format_max                    | Antelope               |
| innodb_file_per_table                     | ON                     |
| innodb_flush_log_at_trx_commit            | 0                      |
| innodb_flush_method                       |                        |
| innodb_flush_neighbor_pages               | area                   |
| innodb_force_load_corrupted               | OFF                    |
| innodb_force_recovery                     | 0                      |
| innodb_ibuf_accel_rate                    | 100                    |
| innodb_ibuf_active_contract               | 1                      |
| innodb_ibuf_max_size                      | 10737401856            |
| innodb_import_table_from_xtrabackup       | 0                      |
| innodb_io_capacity                        | 10000                  |
| innodb_kill_idle_transaction              | 0                      |
| innodb_large_prefix                       | OFF                    |
| innodb_lazy_drop_table                    | 0                      |
| innodb_lock_wait_timeout                  | 120                    |
| innodb_locks_unsafe_for_binlog            | OFF                    |
| innodb_log_block_size                     | 512                    |
| innodb_log_buffer_size                    | 8388608                |
| innodb_log_file_size                      | 268435456              |
| innodb_log_files_in_group                 | 3                      |
| innodb_log_group_home_dir                 | ./                     |
| innodb_max_dirty_pages_pct                | 90                     |
| innodb_max_purge_lag                      | 0                      |
| innodb_mirrored_log_groups                | 1                      |
| innodb_old_blocks_pct                     | 37                     |
| innodb_old_blocks_time                    | 0                      |
| innodb_open_files                         | 300                    |
| innodb_page_size                          | 16384                  |
| innodb_purge_batch_size                   | 20                     |
| innodb_purge_threads                      | 1                      |
| innodb_random_read_ahead                  | OFF                    |
| innodb_read_ahead                         | linear                 |
| innodb_read_ahead_threshold               | 56                     |
| innodb_read_io_threads                    | 8                      |
| innodb_recovery_stats                     | OFF                    |
| innodb_recovery_update_relay_log          | OFF                    |
| innodb_replication_delay                  | 0                      |
| innodb_rollback_on_timeout                | OFF                    |
| innodb_rollback_segments                  | 128                    |
| innodb_show_locks_held                    | 10                     |
| innodb_show_verbose_locks                 | 0                      |
| innodb_spin_wait_delay                    | 6                      |
| innodb_stats_auto_update                  | 1                      |
| innodb_stats_method                       | nulls_equal            |
| innodb_stats_on_metadata                  | ON                     |
| innodb_stats_sample_pages                 | 8                      |
| innodb_stats_update_need_lock             | 1                      |
| innodb_strict_mode                        | OFF                    |
| innodb_support_xa                         | ON                     |
| innodb_sync_spin_loops                    | 30                     |
| innodb_table_locks                        | ON                     |
| innodb_thread_concurrency                 | 16                     |
| innodb_thread_concurrency_timer_based     | OFF                    |
| innodb_thread_sleep_delay                 | 10000                  |
| innodb_use_global_flush_log_at_trx_commit | ON                     |
| innodb_use_native_aio                     | ON                     |
| innodb_use_sys_malloc                     | ON                     |
| innodb_use_sys_stats_table                | OFF                    |
| innodb_version                            | 1.1.8-rel25.1          |
| innodb_write_io_threads                   | 8                      |
+-------------------------------------------+------------------------+
92 rows in set (0.00 sec) 
```

我已经为这个问题苦苦挣扎了好几个星期，如果有任何关于如何解决这个问题的建议，我都会非常高兴。

为什么我的`update`,`insert`和`delete`查询一步上来这么慢`query end`？

**更新**

我禁用了查询缓存，但是，`update`查询仍然非常慢（没有改变）`insert``delete`

```
show variables like '%cache%';
+------------------------------+----------------------+
| Variable_name                | Value                |
+------------------------------+----------------------+
| binlog_cache_size            | 4194304              |
| binlog_stmt_cache_size       | 32768                |
| have_query_cache             | YES                  |
| key_cache_age_threshold      | 300                  |
| key_cache_block_size         | 1024                 |
| key_cache_division_limit     | 100                  |
| max_binlog_cache_size        | 18446744073709547520 |
| max_binlog_stmt_cache_size   | 18446744073709547520 |
| metadata_locks_cache_size    | 1024                 |
| query_cache_limit            | 16777216             |
| query_cache_min_res_unit     | 4096                 |
| query_cache_size             | 0                    |
| query_cache_strip_comments   | OFF                  |
| query_cache_type             | ON                   |
| query_cache_wlock_invalidate | OFF                  |
| stored_program_cache         | 256                  |
| table_definition_cache       | 400                  |
| table_open_cache             | 2048                 |
| thread_cache_size            | 8                    |
+------------------------------+----------------------+ 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-09-16T12:48:54.517

尝试设置值：

```
innodb_flush_log_at_trx_commit=2
innodb_flush_method=O_DIRECT (for non-windows machine)
innodb_buffer_pool_size=25GB (currently it is close to 21GB)
innodb_doublewrite=0
innodb_support_xa=0
innodb_thread_concurrency=0...1000 (try different values, beginning with 200) 
```

参考：

[MySQL 文档](http://dev.mysql.com/doc/refman/5.0/en/innodb-parameters.html)用于描述不同的变量。

[MySQL 服务器设置调优](http://www.mysqlperformanceblog.com/files/presentations/UC2007-MySQL-Server-Settings-Tuning.pdf)

[MySQL 性能优化基础知识](http://www.mysqlperformanceblog.com/2007/11/01/innodb-performance-optimization-basics/)

希望能帮助到你...

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-07T12:20:52.767

MySQL 如何处理导致类似行为的查询缓存似乎存在错误（请参阅[http://bugs.mysql.com/bug.php?id=28382](http://bugs.mysql.com/bug.php?id=28382)）。

基本上发生的是缓存需要在任何修改数据的查询（INSERT、UPDATE、DELETE）之后更新。使用大缓存需要很长时间才能做到这一点，如果缓存更小，则速度更快。

因此，在引擎修复之前的解决方法是减小缓存大小。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-12-20T09:54:30.627

如果您使用的是 DELL 服务器，则可能是硬件问题。我解决了这个命令。

> /opt/dell/srvadmin/bin/omconfig storage vdisk action=changepolicy controller=0 vdisk=0 writepolicy=fwb

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-14T06:59:27.227

尝试`innodb_buffer_pool_instances`根据`innodb_buffer_pool_size`

首先，我认为您可以显着增加您的`innodb_buffer_pool_size`...

**[innodb_buffer_pool_instances sysvar](http://dev.mysql.com/doc/refman/5.5/en/innodb-parameters.html#sysvar_innodb_buffer_pool_instances)**

> InnoDB 用于缓存其表的数据和索引的内存缓冲区的大小（以字节为单位）。默认值为 128MB，从历史默认值 8MB 增加。最大值取决于 CPU 架构，32 位或 64 位。对于 32 位系统，CPU 体系结构和操作系统有时会施加较低的实际最大大小。
> 
> 该值设置得越大，访问表中的数据所需的磁盘 I/O 就越少。在专用数据库服务器上，您最多可以将其设置为机器物理内存大小的 80%。如果发生这些其他问题，请准备缩减此值...

然后你可以调`innodb_buffer_pool_instances`优，使用多个缓冲池非常重要，你可以在这里阅读一个很好的测试用例：

**[MySQL 工作负载测试](http://dimitrik.free.fr/blog/archives/2010/12/mysql-performance-analyzing-perconas-tpcclike-workload-on-mysql-55.html)**

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-10-12T03:21:14.770

我的测试环境有问题（不是由DBA设置的）。最后我发现my.cnf中有一个conf：sync_binlog=1。我将此conf更改为0，它可以工作。你可以试一试。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-03-29T11:52:29.180

这可能是由于磁盘写入速度慢。

在我们的例子中，这是因为运行 mysqld 的 Debian GNU/Linux 在 Hyper-V 中进行了虚拟化，即使给定 SSD 存储`hdparm -t`也会产生糟糕的结果（在原始硬件上是 10-20MB/s 而不是 600MB/s）

# database - （oracle）与手动插入相比，在存储过程中插入非常慢

> ID：12316124
> 
> 赞同：2
> 
> 时间：2012-09-07T10:16:17.917
> 
> 标签：database, oracle, oracle10g, oracle11g

我从 Oracle sql 工具运行插入，从各种表中选择大约 100.000 行并将它们插入到不同数据库的另一个表中，这在 3 分钟内结束。我在 oracle 中的存储过程或 PLSQL 中尝试了相同的查询，我们运行了大约 2 个小时。有关信息，我使用 Source Oracle 11g 和目标 Oracle 10g

存储过程（每个存储大约需要 2 小时）：

```
CREATE OR REPLACE PROCEDURE MGS.TRANSFER_DATA(a_date in varchar2) -- yyyymmdd
BEGIN
 BEGIN
 FOR xx IN(
  SELECT STR_CD FROM MGS.STORE ORDER BY STR_CD ASC
 ) LOOP
  CALL_LOG(xx.STR_CD,a_date,sysdate,"START INSERT");
  INSERT INTO STOCK@BBS
  SELECT
   STR_CD, STK.DT, PROD_CD, QTY, ORDER_QTY, ORDER_QTY
  FROM
   MGS.STOCK STK, MGS.SALE SAL
   WHERE STK.STR_CD = xx.STR
   AND STK.STR_CD = SAL.STR_CD(+)
   AND STK.PROD_CD = SAL.PROD_CD(+)
   AND STK.DT = SAL.DT(+)
   AND STK.DT = a_date;
 CALL_LOG(xx.STR_CD,a_date,sysdate,"INSERT SUCESSFULL");
END LOOP;
END; 
```

结束传输_数据；

我尝试查询 1 家商店（只需 3 分钟）：

```
INSERT INTO STOCK@BBS
SELECT
 STR_CD, STK.DT, PROD_CD, QTY, ORDER_QTY, ORDER_QTY
FROM
 MGS.STOCK STK, MGS.SALE SAL
 WHERE STK.STR_CD = 'STORE01'
 AND STK.STR_CD = SAL.STR_CD(+)
 AND STK.PROD_CD = SAL.PROD_CD(+)
 AND STK.DT= SAL.DT(+)
 AND STK.DT= '20120801'; -- yyyymmdd 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T12:04:12.840

我最好的猜测是，为过程中的查询生成的计划与为独立查询生成的计划有很大不同。在独立版本中，您可以在其中获得常量，从而使优化器可以做出一些好的假设。如果没有常量，优化器就没有什么可做的了，因此可能会做出一些不同的决定。试试这个：

获取独立查询的执行计划。

获取以下的执行计划（它只是用子查询重构子句替换你的循环）：

```
WITH xx AS (SELECT STR_CD, '20120801' AS A_DATE
              FROM MGS.STORE ORDER BY STR_CD ASC)
  SELECT STR_CD, "DATE", PROD_CD, QTY, ORDER_QTY, ORDER_QTY
    FROM MGS.STOCK STK, MGS.SALE SAL
    WHERE STK.STR_CD = xx.STR AND
          STK.STR_CD = SAL.STR_CD(+) AND
          STK.PROD_CD = SAL.PROD_CD(+) AND
          STK."DATE" = SAL."DATE"(+) AND
          STK."DATE" = xx.A_DATE 
```

（请注意，我必须对名为 的列进行双引号`DATE`。我很惊讶您没有遇到这种情况）。比较计划。由于子查询分解子句的存在，第二个计划显然与第一个不同，但尝试比较匹配的元素。特别是查找第一个查询使用索引而第二个查询执行全表扫描的元素。

根据需要向第二个查询添加提示，以使其计划尽可能地匹配第一个查询。

我认为不太可能的另一种可能性是日志调用是花费时间的地方。对于笑容，您可以尝试评论注销以查看是否有效果（这是我没想到的，但到目前为止生活充满了我没想到的事情:-)。

分享和享受。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-14T08:53:04.613

我没有得到答案为什么 plsql 中的查询变得缓慢，但我有以下解决方案：

```
CREATE OR REPLACE PROCEDURE MGS.TRANSFER_DATA(a_date in varchar2) -- yyyymmdd
BEGIN
 BEGIN
 FOR xx IN(
  SELECT STR_CD FROM MGS.STORE ORDER BY STR_CD ASC
 ) LOOP
  CALL_LOG(xx.STR_CD,a_date,sysdate,"START INSERT");
  execute immediate '
  INSERT INTO STOCK@BBS
  SELECT
   STR_CD, STK.DT, PROD_CD, QTY, ORDER_QTY, ORDER_QTY
  FROM
   MGS.STOCK STK, MGS.SALE SAL
   WHERE STK.STR_CD = ''' || xx.STR || '''
   AND STK.STR_CD = SAL.STR_CD(+)
   AND STK.PROD_CD = SAL.PROD_CD(+)
   AND STK.DT = SAL.DT(+)
   AND STK.DT = ''' || a_date || '''
 ';
 CALL_LOG(xx.STR_CD,a_date,sysdate,"INSERT SUCESSFULL");
END LOOP;
END; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-07T12:05:03.293

尝试通过 dbms_job 为每个存储并行启动所有这些插入。可能允许实现与传统 sql 相同的性能。我认为 dbms_parallel_execute 也可以帮助你，请参考[http://www.oracle-base.com/articles/11g/dbms_parallel_execute_11gR2.php](http://www.oracle-base.com/articles/11g/dbms_parallel_execute_11gR2.php)

# spring-mvc - Dojox 增强的 datagrid 和 spring mvc

> ID：12316125
> 
> 赞同：0
> 
> 时间：2012-09-07T10:16:19.877
> 
> 标签：spring-mvc, dojo, dojox.grid.datagrid

如何在 Spring MVC 应用程序中使用**增强的 dojox 网格？**

`org.springframework.js.resources`jar 文件似乎有这个 dojo 包。有人可以建议此实现的链接吗？

# backbone.js - 初始化子视图

> ID：12316126
> 
> 赞同：1
> 
> 时间：2012-09-07T10:16:22.207
> 
> 标签：backbone.js, underscore.js, backbone-views

我一直在查看一些代码一段时间，无法决定在这种情况下应用的最佳实践：

假设我们有一个包含 n 个子视图的视图。我遇到了两种初始化它们的做法

### 1 内部初始化

```
initialize: function() {
  this.subViews = [];
  this.subViewModelCollection.each(function(model) {
    var view = new SubView({model: model});
    this.subViews.push(view);
    this.$el.append(view.el);
  }, this);
},

render: function() {
  _.invoke(this.subViews, 'render');
} 
```

### 2 内部渲染

```
initialize: function() {
  ... // render handles the subviews
},

render: function() {
  this.subViews = [];
  this.subViewModelCollection.each(function(model) {
    var view = new SubView({model: model}).render(); // render optional
    this.subViews.push(view);
    this.$el.append(view.el);
  }, this);
} 
```

现在这些只是粗略的样本，但它们证明了我的困境。`initialize`或-function是否应该`render`负责初始化子视图？就我个人而言，我一直是后一个版本的坚定拥护者，但我看到的一些代码让我更倾向于前者。

那么，你在哪里初始化你的子视图，你为什么在那里这样做，为什么它比其他选项更好？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-07T10:36:28.907

您应该最大化您在初始化时所做的工作量，因为这只会完成一次，并尽量减少您在渲染函数中所做的工作量，该函数通常可能被多次调用（例如在单页应用程序或响应式网页中） ）。

如果您知道子视图的渲染方法永远不会更改生成的 html，那么您也可以在初始化方法中调用子视图的渲染方法，并简单地将渲染元素附加到“主视图”中。

如果您的子视图和主视图的渲染方法无论如何都只调用一次（作为加载页面或其他任何内容的一部分），那么您如何执行它可能并不重要，但通常会最大限度地减少渲染函数中要完成的工作量可能是个好建议。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-09T19:19:24.813

我会将实际的子视图渲染功能完全放入一个新功能中，比如说`renderSubViews()`。

这将允许更大的灵活性。

*   `initialize`您可以从或调用此函数`render`，并随着应用程序的增长/更改轻松更改它。
*   您可以将此新功能绑定到事件，即`reset`视图的事件。
*   这更符合逻辑。初始化或渲染主视图时自动渲染子视图是否有意义？一个应该直接与另一个绑定吗？

# android - 如何更新作为 GalleryView android 子视图的 ProgressBar

> ID：12316132
> 
> 赞同：0
> 
> 时间：2012-09-07T10:16:55.207
> 
> 标签：android, progress-bar, baseadapter, galleryview

有什么方法可以用 baseAdaptper 更新作为 GalleryView 的子视图（行）的进度条。

我已经用这段代码尝试了一些

```
mProgressBar = (ProgressBar) ((View) mGalleryView.getChildAt(position))
                            .findViewById(R.id.progressBar);
mProgressBar.setProgress(value); 
```

它工作正常，但进度条没有完全填满。

为了更清楚，请检查所附图像。当我尝试在图库中更新进度条时，它看起来像这样。

![在此处输入图像描述](../Images/0057e08f9a4d77f25df02a38acb50c04.png) ![在此处输入图像描述](../Images/08b028df3104e9e730260b3a5e54d2db.png)

期待成为。

![在此处输入图像描述](../Images/30ef05249a21677715c0e6abdadc8bb9.png) ![在此处输入图像描述](../Images/013a577d941800ca17dbe997c899961d.png)

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-08T07:44:41.940

我正在发布我自己问题的答案。我要感谢*Andro Selva*，他对解决这个问题表现出了兴趣。

```
mProgressBar = (ProgressBar) ((View) mGalleryView.getChildAt(position))
                            .findViewById(R.id.progressBar);
mProgressBar.setMax(100);
mProgressBar.setProgress(value); 
```

在上面的代码行之后。

```
mGalleryView.invalidate(); 
```

添加上面的行解决了我的问题以获得预期的输出。

问候维奈库马尔

# c# - 嵌套验证

> ID：12316136
> 
> 赞同：0
> 
> 时间：2012-09-07T10:17:13.293
> 
> 标签：c#, validation, domain-driven-design

我想知道最好的验证方法是什么。

如果我有一个由基元、关联和其他自定义对象的集合组成的复杂对象对象，是否应该使用 IsValid() 方法验证子对象以及根对象的所需字段/键？

如果是，这应该在某种抽象类中，还是最好使用接口？对于抽象，我需要将我的子对象接口转换为它们的具体类定义才能使用抽象方法，而对于接口验证，我相信我可以让我的子对象作为接口，因为我称之为他们的验证方法。

另外，我没有使用 MVC，而是使用 Web 表单的 MVP（并尝试使用 DDD 原则）。

谢谢。

*更新*

我有一个 ScheduledMeeting 的聚合根：

```
class ScheduledMeeting : BaseValidation
{
     ScheduledMeetingID {get;set;}
     ITimeSlot TimeSlot {get;set;}
     IList<IMeetingAssignee> Assignees{get;set;}
     DateTime meetingDate {get;set;}

     AssignEmployees(IList<IEmployees> employees){}
} 
```

目前，存在一个BaseValidation抽象类，类似于以下内容：

```
 public bool isValid(bool validateKeys)
    {
        if (validateKeys)
        {
            ValidateRequiredFields();
            ValidateKeys();
        }
        else
        {
            ValidateRequiredFields();
        }
        return true;
    } 
```

其中 ValidateRequiredFields() 和 ValidateKeys() 在实现对象中被覆盖。

如果我要使用上述方法并级联到 IMeetingAssigned，我需要在 ScheduledMeeting 中同时循环 ValidateKeys() 和 ValidateRequiredKeys()，将 IMeetingAssigned 强制转换为具体的 MeetingAssigned，然后在此对象中调用 ValidateKeys() 或 ValidateRequiredKeys()（因为它也将实现 BaseValidation），等等，一直向下。

*更新 2*

我坚持使用 .NET 3.5，因此无法实现代码合同等（据我所知）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T11:02:29.103

不要让你的对象一开始就进入无效状态，为你省去很多“IsValid”的麻烦。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T10:22:45.697

由于您使用的是领域驱动设计，我假设您已将您的类识别并建模为**Aggregates**。

回答您的问题：是的，**聚合根**负责确保其自身和所包含的所有内容在任何给定时间点都是有效的。聚合根永远不应处于无效状态。

**评论更新：**摆脱您的验证界面。聚合从一开始就不应该处于无效状态。每当您的 AR 状态即将改变时，请确保生成的状态不会破坏任何不变量。如果可以，AR 应该拒绝修改。

强制执行不变量，不要在事后验证。

# php - 用于数据库、代码 (php)、安全性的测试工具

> ID：12316139
> 
> 赞同：1
> 
> 时间：2012-09-07T10:17:19.333
> 
> 标签：php, database, security, testing, automation

哪些工具最适合自动测试：

****代码：****

***   复制/粘贴代码检测器*   注释代码检查器**

 ******D B：****

***   编码检查*   字段大小检查**

 ******安全：****

***   跨站脚本*   SQL注入*   漏洞扫描**

 **我正在寻找可以自动化测试过程、维护大型项目的工具。到目前为止，我已经看过 Selenium，PHPUnit。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-07T10:43:43.270

请参阅[此](http://phpqatools.org/)页面。

看看这些：

*   PHP 复制/粘贴检测器
*   PHP 死代码检测器
*   PHP 混乱检测器
*   PHP_CodeSniffer******

# jquery - 在不同页面之间导航时出现白屏

> ID：12316147
> 
> 赞同：1
> 
> 时间：2012-09-07T10:18:03.057
> 
> 标签：jquery, windows-phone-7, cordova, jquery-mobile

我正在为 windows phone7 开发 jQuery mobile +phonegap(cordova-1.9) 应用程序。这是多个 HTml 页面应用程序。当我从一个 html 页面导航到另一个 html 页面时，首先出现一个白屏，然后加载第二个页面。哪个看起来很糟糕。我搜索各种表格，发现

```
.ui-page 
{
-msie-backface-visibility: hidden;//because IE has msie engine(not very much sure)
-webkit-backface-visibility: hidden;

} 
```

我使用此代码在我的 css 文件中。但这不起作用。请告诉我我错在哪里。我只需要为 Windows Phone 7 工作。谢谢

# c# - 如何在板上（20x20）进行图案/形状匹配/识别？

> ID：12316150
> 
> 赞同：8
> 
> 时间：2012-09-07T10:18:11.797
> 
> 标签：c#, f#

板子是`int[][]`，我想找到这个形状

```
 1
    1
    1 
```

使用板上的所有 4 个对称（旋转）变体并记录位置。例如

```
 ...
      ...
  ... x x x x x x ...
  ... x x 1 1 x x ...
  ... x 1 x x x x ...
  ... x x x x x x ...
      ...
      ... 
```

使用 F# 来处理这类问题会更​​好吗？

下面是我的 c# 代码，用于仅垂直检查模式（水平检查的代码类似）

```
 List<Position> GetMatchVertical(int reelID)
    {
        List<Position> ret = new List<Position>();

        var myReel = board[reelID];
        var leftReel = reelID - 1 >= 0 ? board[reelID - 1] : null;
        var rightReel = reelID + 1 < boardSize ? board[reelID + 1] : null;

        int currentColor = myReel[0];

        for (int reelPosition = 1; reelPosition < boardSize; reelPosition++)
        {
            int nextColor = myReel[reelPosition];
            if (currentColor == nextColor)
            {
                if (leftReel!=null)
                {
                    if (reelPosition + 1 < boardSize && leftReel[reelPosition + 1] == currentColor)
                    {
                        ret.Add(logPosition(...));
                    }
                }
                if (rightReel!=null)
                {
                    if (reelPosition - 2 >= 0 && rightReel[reelPosition - 2] == currentColor)
                    {
                        ret.Add(logPosition(...));
                    }
                }
            }
            else
            {
                currentColor = nextColor;
            }
        }

        return ret;
    } 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-09-07T14:01:57.193

这绝对非常适合函数式编程和 F#。有大量可能的方法。我认为 pad 的解决方案可能是最直接的解决方案，这是一个非常好的起点。如果您需要更通用的东西，那么 Huusom 的解决方案非常好。

还有一种更通用的方法，即构建一种*领域特定语言*(DSL) 来检测数组中的模式。这是更高级的功能技术，但它非常适合您的示例。如果你这样做了，那么你可以用一种非常简洁的方式表达相当复杂的模式。这是一个例子：

```
// Create a detector that tests if a location
// contains 1 and returns 'false' when out of range
let one = border false (equals 1)

// A shape detector for your pattern
let pattern = 
  around (0, 0) one <&> around (1, 0) one <&> 
  around (-1, 1) one

// Test pattern with any rotation: Combine 
// 4 possible rotations with logical or.
let any = 
  pattern <|> rotate pattern <|> 
  rotate (rotate pattern) <|> 
  rotate (rotate (rotate pattern)) 
```

此示例使用各种原语来构建模式的声明性规范。该值`any`表示一个函数，您可以运行该函数来测试模式是否出现在给定位置。它处理模式的所有旋转，并且还进行边界检查。您还需要添加镜像模式，但这很容易扩展。

解释实现可能需要一篇完整的博客文章，但这里有一个注释源代码，应该非常易读：

```
/// A type that represents a function that tests
/// whether an array contains some pattern at a 
/// specified location. It gets the location to 
/// test & the array as arguments and returns bool.
type ShapeDetector = SD of (int -> int -> int[,] -> bool)

/// A primitive that tests whether the value at the
/// current location contains a value 'v'
let equals v = SD (fun x y arr -> arr.[x,y] = v)

/// A combinator that takes 'ShapeDetector' and 
/// creates a new one that returns 'def' when 
/// accessing outside of the array bounds
let border def (SD f) = SD (fun x y arr -> 
  if x < 0 || y < 0 || x >= arr.GetLength(0) || y >= arr.GetLength(1) 
  then def else f x y arr)

/// A combinator that calls a given ShapeDetector
/// at a location specified by offset dx, dy
let around (dx, dy) (SD f) = SD (fun x y arr ->
  f (x + dx) (y + dy) arr)

/// A combinator that takes a ShapeDetector and
/// builds a new one, which is rotated by 90 degrees
let rotate (SD f) = SD (fun x y arr ->
  f -y x arr)

/// Creates a shape detector that succeeds only
/// when both of the arguments succeed.
let (<&>) (SD f1) (SD f2) = SD (fun x y arr ->
  f1 x y arr && f2 x y arr)

/// Creates a shape detector that succeeds 
/// when either of the arguments succeed.
let (<|>) (SD f1) (SD f2) = SD (fun x y arr ->
  f1 x y arr || f2 x y arr) 
```

最后，这是一个在样本 2D 阵列上运行模式检测器的示例：

```
// Create a 2D array as a sample input
let inp = 
  array2D [ [ 0; 0; 1 ]
            [ 0; 1; 0 ]
            [ 0; 1; 0 ] ]

// Get the underlying function and run it
// for all possible indices in the array
let (SD f) = any
for x in 0 .. 2 do
  for y in 0 .. 2 do
    printfn "%A %A" (x, y) (f x y inp) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-07T11:39:48.737

您可以像这样在 F# 中使用模式匹配找到水平形状（对垂直形状进行类似操作）：

```
/// Try to match with horizontal shapes
/// 1 x x  and 1 1 x
/// x 1 1      x x 1
///
/// 1 1 x and x x 1
/// x x 1     1 1 x
/// could be found by reversing matched sub-arrays 
let matchHorizontalShapes (board: _ [] []) =
    let positions = ResizeArray()
    for i in 0..board.Length - 2 do
        for j in 0..board.[0].Length - 3 do
            match [|board.[i].[j..j+2];
                    board.[i+1].[j..j+2]|] with
            | [|[|1; 1; _|];
                [|_; 1; 1|]|] -> positions.Add((i, j), (i+1, j+1), (i+1, j+2))
                                 positions.Add((i, j), (i, j+1), (i+1, j+2))
            | [|[|1; _; _|];
                [|_; 1; 1|]|] -> positions.Add((i, j), (i+1, j+1), (i+1, j+2))
            | [|[|1; 1; _|];
                [|_; _; 1|]|] -> positions.Add((i, j), (i, j+1), (i+1, j+2))
            | _ -> ()
    positions.ToArray() 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-07T12:44:46.177

如果您根据模式创建一组坐标偏移量，那么您可以获取这些值并将结果与​​一组已知值相匹配。

```
let find_matches board pattern = 
    let xb = Array2D.length1 board 
    let yb = Array2D.length2 board

    // safe lookup on board
    let get_value= function
        | (x, _) when (x < 0) || (x >= xb) -> None
        | (_, y) when (y < 0) || (y >= yb) -> None
        | (x, y) -> Some (Array2D.get board x y)

    // do a patten match on board.
    let has_pattern = function
        | [Some 1; Some 1; Some 1] -> true 
        | _ -> false

    // se if a given coordinate is a match 
    let is_match (x,y) =
        pattern 
            |> List.map (fun (x',y') -> (x+x', y+y'))   // expand the coordinat to a list of coordinates
            |> List.map get_value                       // find the values coordinates
            |> has_pattern                              // match to pattern

    [for x in 0..(xb-1) do for y in 0..(yb-1) -> x, y]
        |> List.filter is_match 
```

此功能适用于`[(0,0); (1, -1); (1, -2)]`（您上面的示例）的模式。

请注意，我使用 Array2D (int[,]) 而不是您的示例中给出的 int[][] 。

# opengl-es - OpenGL 和 glScalef

> ID：12316151
> 
> 赞同：1
> 
> 时间：2012-09-07T10:18:26.910
> 
> 标签：opengl-es

我用OpenGL画了一些这样的四边形：

```
 _______  _______
|       ||       |
|       ||       |
|       ||       |
|_______||_______| 
```

目前我使用手动计算的 firstQuad.pos.x + 宽度绘制第二个四边形。但是当我想在中心点缩放它们时，我想知道这是使用计算值的正确方法，还是一个一个地使用 glTranslatef，然后 glTranslatef 到它们的中心，然后使用 glScalef 来缩放它们？或者如何做对？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T10:58:15.113

除非您`firstQuad`根据转换更新四边形的位置，否则您将不得不使用您所描述的 GL 矩阵操作函数。我假设您在这里使用的是旧版 GL（2.1 和更早版本），现代版本不再提供矩阵操作功能。

您必须了解的是，GL[转换](http://en.wikipedia.org/wiki/Transformation_matrix)必须被视为基础和原点的转换，将用于进一步的绘制调用，直到使用`glPopMatrix()`.

# php - Zend_Soap_AutoDiscover 不生成 wsdl 文件

> ID：12316159
> 
> 赞同：1
> 
> 时间：2012-09-07T10:19:04.320
> 
> 标签：php, zend-framework, soap, zend-soap

`Zend_Soap_AutoDiscover`我在从类中生成 WSDL 文件时遇到问题。
有人可以解释我做错了什么吗？

在 bootstrap.php 我有一个方法：

```
public function _initWsdl()
{
    require_once("http://localhost:8080/zf_mta/backend.php");
    $autoDiscover = new Zend_Soap_AutoDiscover('Zend_Soap_Wsdl_Strategy_ArrayOfTypeComplex');
    $autoDiscover->setClass('Backend');
    $autoDiscover->setUri('http://localhost:8080/zf_mta/backend.php');
    $autoDiscover->handle();

    return $autoDiscover;
} 
```

这是 backend.php 类

```
class Order {

    /** @var string */
    public $productid;
    /** @var string */
    public $customerid;
    /** @var int */
    public $productcnt;

    public function __construct($productid,$customerid,$productcnt) {
        $this->productid  = $productid;
        $this->customerid = $customerid;
        $this->productcnt = $productcnt;
    }
}

class Orders {

    /** @var Order[] */
    public $orders;

}

class Backend {

    /**
     * @param Orders $orders
     * @return string
     */
    public function placeOrders($orders) {
        return print_r($orders,1);
    }

} 
```

我收到错误：

> ## 内部服务器错误
> 
> 服务器遇到内部错误或配置错误，无法完成您的请求...

错误日志：

```
[07-Sep-2012 13:39:48 UTC] PHP Warning:  require_once() [<a href='function.require-once'>function.require-once</a>]: http:// wrapper is disabled in the server configuration by allow_url_include=0 in E:\Zend Server\Apache2\htdocs\zf_mta\application\Bootstrap.php on line 18
[07-Sep-2012 13:39:48 UTC] PHP Warning:  require_once(http://localhost:8080/zf_mta/backend.php) [<a href='function.require-once'>function.require-once</a>]: failed to open stream: no suitable wrapper could be found in E:\Zend Server\Apache2\htdocs\zf_mta\application\Bootstrap.php on line 18
[07-Sep-2012 13:39:48 UTC] PHP Fatal error:  require_once() [<a href='function.require'>function.require</a>]: Failed opening required 'http://localhost:8080/zf_mta/backend.php' (include_path='E:\Zend Server\Apache2\htdocs\zf_mta\application/../library;E:\Zend Server\Apache2\htdocs\zf_mta\library;.;E:\Zend Server\ZendServer\share\ZendFramework\library') in E:\Zend Server\Apache2\htdocs\zf_mta\application\Bootstrap.php on line 18 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T01:43:40.677

Florent 的评论解决了第一个问题：您的 PHP 配置禁止使用 HTTP 包含文件。因此，您需要更改 require 语句以引用文件系统中的文件名。

但是，我发现您的代码存在其他几个问题：

*   您将生成的 WSDL 的 URI 设置为 Backend 类的 URI。这是行不通的，因为该文件不包含充当 SOAP 客户端或 SOAP 服务器所需的代码。

*   `Zend_Soap_Autodiscover`通常在 SOAP 服务器中用于响应客户端对 WSDL 副本的请求。因此，您通常会将该代码包含在专门用于处理该请求的方法中，而不是应用程序引导程序中。

*   忽略前一点，我还注​​意到您`Zend_Soap_Autodiscover`在 _initWsdl() 函数的末尾返回了实例。我很确定调用`_init...()`方法的代码会忽略从这些方法传回的任何值或对象，因此最终该代码将什么也不做。

我认为您需要查看一些示例代码才能真正了解如何使用 Zend Framework 实现 SOAP 服务器。以下片段是关于使用 Zend Framework for SOAP 服务的最简单示例，我可以提出：[http](http://pastebin.com/9mb64LeG) ://pastebin.com/9mb64LeG请注意，它不使用 Zend MVC 或路由基础设施，但它可能会对您有所帮助了解`Zend_Soap_Server`and的基本用法`Zend_Soap_Autodiscover`。

# c++ - 可以将非指针成员变量的引用作为指针返回吗？

> ID：12316163
> 
> 赞同：4
> 
> 时间：2012-09-07T10:19:41.760
> 
> 标签：c++, pointers, memory-management, reference, smart-pointers

我最近遇到了一些看起来像这样的 C++ 代码：

```
class SomeObject
{
private:
    // NOT a pointer
    BigObject foobar;

public:
    BigObject * getFoobar() const
    {
        return &foobar;
    }
}; 
```

我问程序员为什么他不只是让 foobar 成为指针，他说这样他就不必担心分配/释放内存。我问他是否考虑使用一些智能指针，他说这同样有效。

这是不好的做法吗？这似乎很hackish。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-07T10:28:22.990

That's perfectly reasonable, and not "hackish" in any way; although it might be considered better to return a reference to indicate that the object definitely exists. A pointer might be null, and might lead some to think that they should delete it after use.

The object has to exist somewhere, and existing as a member of an object is usually as good as existing anywhere else. Adding an extra level of indirection by dynamically allocating it separately from the object that owns it makes the code less efficient, and adds the burden of making sure it's correctly deallocated.

Of course, the member function can't be `const` if it returns a non-`const` reference or pointer to a member. That's another advantage of making it a member: a `const` qualifier on `SomeObject` applies to its members too, but doesn't apply to any objects it merely has a pointer to.

The only danger is that the object might be destroyed while someone still has a pointer or reference to it; but that danger is still present however you manage it. Smart pointers can help here, if the object lifetimes are too complex to manage otherwise.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-07T10:32:40.907

您正在返回指向成员变量而不是引用的指针。这是一个糟糕的设计。您的类管理**foobar**对象的生命周期，并通过返回指向其成员的指针，您可以使类的使用者在**SomeObject**对象的生命周期之外继续使用指针。它还使用户能够根据需要更改**SomeObject**对象的状态。

相反，您应该重构您的类以包含将在 SomeObject 类中的 foobar 上执行的操作作为方法。

附言。考虑正确命名你的类。当你定义它是一个类。当您实例化时，您将拥有该类的一个对象。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-07T10:26:04.533

It's generally considered less than ideal to return pointers to internal data at all; it prevents the class from managing access to its own data. But if you want to do that anyway I see no great problem here; it simplifies the management of memory.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-07T10:26:16.633

As long as the caller knows that the pointer returned from `getFoobar()` becomes invalid when the `SomeObject` object destructs, it's fine. Such provisos and caveats are common in older C++ programs and frameworks.

Even current libraries have to do this for historical reasons. e.g. `std::string::c_str`, which returns a pointer to an internal buffer in the string, which becomes unusable when the string destructs.

Of course, that is difficult to ensure in a large or complex program. In modern C++ the preferred approach is to give everything simple "value semantics" as far as possible, so that every object's life time is controlled by the code that uses it in a trivial way. So there are no naked pointers, no explicit `new` or `delete` calls scattered around your code, etc., and so no need to require programmers to manually ensure they are following the rules.

(And then you can resort to smart pointers in cases where you are totally unable to avoid shared responsibility for object lifetimes.)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-07T10:28:49.243

> Is this bad practice? It seems very hackish.

It is. If the class goes out of scope before the pointer does, the member variable will no longer exist, yet a pointer to it still exists. Any attempt to dereference that pointer post class destruction will result in undefined behaviour - this could result in a crash, or it could result in hard to find bugs where arbitrary memory is read and treated as a BigObject.

> if he considered using some smart pointer

Using smart pointers, specifically `std::shared_ptr<T>` or the boost version, would technically work here and avoid the potential crash (if you allocate via the shared pointer constructor) - however, it also confuses who owns that pointer - the class, or the caller? Furthermore, I'm not sure you can just add a pointer to an object to a smart pointer.

Both of these two points deal with the technical issue of getting a pointer out of a class, but the real question should be "why?" as in "why are you returning a pointer from a class?" There are cases where this is the only way, but more often than not you don't need to return a pointer. For example, suppose that variable needs to be passed to a C API which takes a pointer to that type. In this case, you would probably be better encapsulating that C call in the class.

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-07T11:19:33.957

这里有两个不相关的问题：

1）您希望您的实例如何`SomeObject`管理`BigObject`它需要的实例？如果每个实例都`SomeObject`需要自己的`BigObject`，那么`BigObject`数据成员是完全合理的。在某些情况下，您想做一些不同的事情，但除非出现这种情况，否则请坚持使用简单的解决方案。

2）你想让用户`SomeObject`直接访问它`BigObject`吗？默认情况下，在良好封装的基础上，这里的答案是“否”。但是，如果您确实愿意，那么这不会改变对 (1) 的评估。此外，如果您确实愿意，您不一定需要通过指针来这样做——它可以是通过引用甚至是公共数据成员。

第三个可能的问题可能会改变对 (1) 的评估：

3) 您是否要让用户`SomeObject`直接访问`BigObject`他们在获得实例的生命周期之后继续使用的实例`SomeObject`？如果是这样，那么数据成员当然不好。正确的解决方案可能是`shared_ptr`, 或 for是一个每次调用时都`SomeObject::getFooBar`返回不同的工厂。`BigObject`

总之：

*   除了它不能编译（`getFooBar()`需要返回`const BigObject*`）之外，到目前为止没有理由认为这段代码是错误的。可能会出现其他问题，使其出错。
*   返回`const &`而不是返回可能是更好的风格`const *`。`foobar`您返回的内容与是否应该是`BigObject`数据成员无关。
*   制作指针或智能指针当然没有“只是” `foobar`——任何一个都需要额外的代码来创建`BigObject`指向的实例。

# javascript - javascript mootools 平滑滚动“x”个像素

> ID：12316164
> 
> 赞同：0
> 
> 时间：2012-09-07T10:19:47.790
> 
> 标签：javascript, mootools

我正在尝试使用 javascript/mootools 平滑向下滚动 180px。

我有以下js代码：

```
document.documentElement.scrollTop = document.documentElement.scrollTop + 180; 
```

但是，例如，我怎样才能使这项工作在 500 毫秒的过程中完成，以便它为滚动设置动画而不是向下跳（目前正在执行）。

干杯，阿迪

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-07T11:13:24.233

您可以使用[Fx.SmoothScroll](http://mootools.net/docs/more/Fx/Fx.SmoothScroll)

```
var ss = new Fx.SmoothScroll({duration: 500 /* ms */}, window);

$('scroll').addEvent('click', function(){ ss.start(0, 180 /* Y offset of the window */); }); 
```

​演示：http: [//jsfiddle.net/TmBkj/1/](http://jsfiddle.net/TmBkj/1/)

**编辑**：记得包含插件（默认情况下不在核心上）或包含更多包

# linux - linux shell 支持列表数据结构吗？

> ID：12316167
> 
> 赞同：69
> 
> 时间：2012-09-07T10:20:06.290
> 
> 标签：linux, bash, shell, ash

这个问题[与 Shell 是否支持集合不同？](https://stackoverflow.com/questions/7314319/does-the-shell-support-sets)

我知道很多脚本语言支持列表结构，比如python、python、ruby和javascript，那么linux shell呢？

shell 支持这样的语法吗？

```
for i in list:
do
     print i
done 
```

我会首先**初始化一个列表**，例如：

```
ListName = [ item1, item2, ..., itemn ] 
```

**然后迭代它**

在编写 shell 脚本时这可能吗？

* * *

## 回答 #1

> 赞同：121
> 
> 时间：2012-09-07T12:10:23.357

它支持列表，但不支持单独的数据结构（暂时忽略数组）。

`for`循环迭代一个由空格分隔的值组成的列表（一般意义上），无论该列表是如何创建的，无论是字面意思：

```
for i in 1 2 3; do
    echo "$i"
done 
```

或通过参数扩展：

```
listVar="1 2 3"
for i in $listVar; do
    echo "$i"
done 
```

或命令替换：

```
for i in $(echo 1; echo 2; echo 3); do
    echo "$i"
done 
```

数组只是一个特殊参数，它可以包含更结构化的值列表，其中每个元素本身都可以包含空格。比较差异：

```
array=("item 1" "item 2" "item 3")
for i in "${array[@]}"; do   # The quotes are necessary here
    echo "$i"
done

list='"item 1" "item 2" "item 3"'
for i in $list; do
    echo $i
done
for i in "$list"; do
    echo $i
done
for i in ${array[@]}; do
    echo $i
done 
```

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2012-09-07T10:24:51.817

要列出清单，只需这样做

```
colors=(red orange white "light gray") 
```

从技术上讲是一个数组，但是 - 当然 - 它具有所有列表功能。
甚至python列表都是用数组实现的

# java - GWT：链接器和代码分割

> ID：12316171
> 
> 赞同：4
> 
> 时间：2012-09-07T10:20:26.590
> 
> 标签：java, gwt, linker, fragment

在 GWT-land 中，“链接器”和 DFN 代码拆分之间有什么关系？为什么链接器需要支持分码，为什么有些链接器不支持？你如何选择你的应用程序应该使用哪个链接器，以及哪些因素会影响这个决定？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-07T11:42:46.743

主链接器（也有辅助链接器，但这里不涉及）负责创建托管已编译 JS 代码的 *.js 或 *.html 文件，当然还有如何将它们引导/加载到浏览器中.

一旦您知道这一点，很明显它们必须明确支持代码拆分。

例如，`xs`（跨站点）链接器将整个脚本包装在一个匿名函数中，因此它不会“污染全局范围”（技术也称为*模块模式*）。然后它不能动态地将一些其他脚本注入到可以访问其内部的页面中。（`sso`单脚本）链接器具有相同的限制。

( `std`iframe) 链接器将您的应用加载到动态创建的 iframe 中，该 iframe 充当沙箱：iframe 的全局范围不是主机页面的全局范围。然后，它可以在 iframe 中动态注入一个脚本，该脚本可以访问已经存在的所有内容（iframe 的全局范围）。

但实际上，您不必*选择您的应用程序应该使用哪个链接器*：坚持使用`xsiframe`（但您必须明确激活它，暂时是这样）。它结合了链接器的跨站点友好性和`xs`链接器的 iframe 沙盒`std`。

您可以期望`sso`在未来的 GWT 版本中不推荐使用所有其他链接器（可能除外），并最终完全删除；并将`std`链接器替换`xsiframe`为默认链接器的链接器。

# mockito - 为什么 Mockito 给我模拟对象的默认值？

> ID：12316174
> 
> 赞同：2
> 
> 时间：2012-09-07T10:20:47.467
> 
> 标签：mockito

在我断言的以下简单练习中，我期望 1，但得到 0。为什么我会看到这种行为？

```
public class MockitoTest {

   POJO mockedPojo;

   @Before
   public void setup() {
      mockedPojo = mock(POJO.class);
   }

   @Test
   public void testIndifferentMethodInvocationOrder() {
      int result1 = mockedPojo.getOne();
      assertEquals(1, result1);
   }

   class POJO {
      int count = 1;
      int getOne() {
         return count++;
      }
      int getTwo() {
         return count++;
      }
   } 
```

}

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-07T10:23:05.957

您已经模拟了整个类，这意味着 Mockito 正在提供实现并替换您的实现。

Mockito 的类的模拟实现返回值类型的默认值，在此示例中解释了它返回零的原因。

通常，您不会模拟您正在测试的课程。您通常使用模拟来了解对象协作者的行为。

# recycle-bin - 未使用的变量如何指示错误？

> ID：12316176
> 
> 赞同：0
> 
> 时间：2012-09-07T10:20:55.047
> 
> 标签：recycle-bin

语言类型在这里无关紧要；它可以是功能性的；过程式的、命令式的、面向对象的……或者在语言中根本不必如此。这个问题适用于可以有未使用的变量/代码的语言。

这个错误是什么类型的？不使用额外的东西怎么能算作一个错误？

一点背景知识：虽然我是在 F#[博客](http://blogs.msdn.com/b/fsharpteam/archive/2012/07/19/more-about-fsharp-3.0-language-features.aspx)上读到的，但对我来说似乎与语言无关；毕竟，您可以在任何语言的任何程序中使用未使用的变量。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T10:38:18.280

我实际上已经看到未使用变量（或未使用参数）的警告捕获错误的情况是这样的：

```
start = 1
stop = 10
do_something(start, start, other_data) 
```

`stop`未使用，*因为我输入了错误的东西*，幸运的是警告会引导我识别错误。显然还有其他方法可以捕获该错误（测试），并且该错误的某些实例不会以这种方式捕获，因为该变量仍在其他地方使用。

通常，未使用的变量只是一个警告，表明代码没有按照作者的真正意图编写（因为通常您不*想要*未使用的变量）。并不一定意味着它有问题，只是您可能想以不同的方式编写它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-07T10:49:45.980

这是一个示例，其中未使用的变量可能会掩盖错误，直到删除未使用的变量：

```
int a[10];
int b[10]; // unused
int c[10];

// initialise a
for (i = 0; i <= 10; ++i)
    a[i] = i; // out of bounds write to a when i = 10 
```

在上述情况下，越界写入 a 恰好覆盖了未使用数组 ( `b`) 的开头，因此不会产生任何有害影响（这称为*潜在*错误）。当未使用的数组被删除时，开始`c`被覆盖。

（请注意，上面的示例是依赖于编译器的——它假设`b`智能编译器不会优化它，并且数组是按顺序连续分配的，但一般原则仍然有效。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-07T10:25:05.250

因为，我从来没有写过超过 100 行的函数/方法，我不知道以下事情何时或如何发生，但我能想到的一些场景包括：

可以有已经修改过的代码；现在没用了。

由于许多这样的修改，可能会有一些代码刚刚死掉。死代码在大型代码库中存在问题；因为程序员几乎每次都必须阅读它并且不能调整（删除）它，因为那样他就需要进行严重的错误测试。调整错误代码会产生其他类型的错误。

未使用的变量表明缺乏计划或实施。最初是规范要求的，但由于进一步延迟或规范保持不变，现在仍未使用。

可能是太早太早实现的接口类型的东西。现在，API 是公开的……

使用具有预处理器（某种）指令的语言，可以根据环境或构建类型修改代码；很多变量可以不用。比如 C# 中的调试和发布条件。这可以标记为错误，如“它可能是不同构建或条件下的错误”

除此之外，我仍在寻找答案。

# android - 如何在opengl（android）中立方体的每个面上显示不同的图像？

> ID：12316178
> 
> 赞同：0
> 
> 时间：2012-09-07T10:21:00.323
> 
> 标签：android, graphics, opengl-es, 3d, cube

我正在制作一个 3D 立方体，我可以为每张脸分配一张图像，但我想为每张脸分配不同的图像。我使用 NeHe 端口作为参考，所以对于一张图像，功能是：

```
 public static Bitmap getTextureFromBitmapResource(Context context, int resourceId)
{
    Bitmap bitmap = null;
    try
    {
        bitmap = BitmapFactory.decodeResource(context.getResources(), resourceId);
        return Bitmap.createBitmap(bitmap, 0, 0, bitmap.getWidth(), bitmap.getHeight(), yFlipMatrix, false);
    } finally
    {
        if (bitmap != null)
        {
            bitmap.recycle();
        }
    }
} 
```

我在我的渲染器中调用这个函数是这样的::

```
Bitmap texture = getTextureFromBitmapResource(context, R.drawable.img1); 
```

但我只能为每张脸设置一个图像。我想为每张脸设置不同的图像。我尝试制作一组​​图像，然后将其传递给该函数，但徒劳无功。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-07T11:30:33.307

[纹理数组](http://www.opengl.org/registry/specs/EXT/texture_array.txt)（如果它是您所指的）应该可以工作，但这取决于您在着色器中计算图层的方式。

否则，您必须单独绘制每个面并每次绑定正确的纹理，或者使用[立方体](http://www.opengl.org/registry/specs/ARB/texture_cube_map.txt)贴图。

# php - 致命错误：在 pdo 中对非对象调用成员函数 fetchAll()

> ID：12316185
> 
> 赞同：1
> 
> 时间：2012-09-07T10:21:22.093
> 
> 标签：php, pdo

我是 pdo 的新手，刚刚尝试了以下操作并遇到了致命错误。

```
$pdo = new pdo('mysql:localhost;widget_corp;charset=utf-8', 'root', '');
$query = $pdo->query("SELECT * FROM 'users'");
$result_array = $query->fetchAll(PDO::FETCH_ASSOC); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-07T10:22:49.090

改变：

```
mysql:localhost;widet_corp 
```

到

```
mysql:host=localhost;dbname=widget_corp 
```

同样在您发布的代码中：

```
$query = $pdo->query("SELECT * FROM 'users'"); 
```

你有单引号内的表名。在 Mysql 中，您应该对表和列使用反引号。

```
 $query = $pdo->query("SELECT * FROM `users`"); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-07T10:25:12.550

`PDO::query``false`如果您的查询错误，则返回。

`SELECT * FROM 'users'`

应该

```
SELECT * FROM `users` 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-07T10:22:59.590

`$pdo->query()`如果查询失败，将返回 false。您没有正确启动 pdo，您可能想检查查询是否没有返回错误，所以：

```
$pdo = new pdo('mysql:host=localhost;dbname=widget_corp;charset=utf-8', 'root', '');
$query = $pdo->query("SELECT * FROM `users`");
if($query !== false)
{
    $result_array = $query->fetchAll(PDO::FETCH_ASSOC);
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-07T10:23:46.103

请改用此代码：

```
$pdo = new PDO('mysql:host=localhost;dbname=widget_corp;charset=UTF-8', 'root', '');
$query = $pdo->query("SELECT * FROM `users`");
$result_array = $query->fetchAll(PDO::FETCH_ASSOC); 
```

如果这不起作用，您确定`PDO`安装正确吗？

# javascript - 如果 div 为空，则将容器 div 设置为“display:none”

> ID：12316191
> 
> 赞同：3
> 
> 时间：2012-09-07T10:21:38.123
> 
> 标签：javascript, jquery, html, wordpress, api

在搜索这些论坛时，我一直试图让这段代码在过去一天工作，但没有任何成功。

`div`如果其中一个`div`没有内容，我正在寻找隐藏一个容器。

我得到的脚本如下：

```
$('.video-centre').each(function(){
  if ($(this).find('.video-thumb p').text().length == "")
    $(this).find('.video-centre').css("display", "none");

}); 
```

我试图将其应用到的 HTML 如下：

```
<div class="video-centre">
  <div class="video-point">
    <img src="<?php echo get_bloginfo('template_url') ?>/images/video-point.jpg" alt="video pointer" />
  </div>
  <div class="video-thumb">
    <?php the_field('testimonials'); ?>
  </div>
  <p class="video-more">
    <a href="javascript:animatedcollapse.show(['expandable-1'])">View More</a>
  </p>
  <div id="expandable-1">
    <div class="video-thumb">
      <?php the_field('testimonials_hidden'); ?>
    </div>
    <p class="video-close">
      <a href="javascript:animatedcollapse.hide(['expandable-1'])">Close</a>
    </p>
  </div>
</div> 
```

基本上，在 wordpress 中，客户将有机会添加视频，这有点冗长，但它们被包裹在`p`标签中。但是，如果他们不向特定区域上传任何内容，我希望容器`div`具有`display:none`，如果已上传视频，则仅显示容器。

如果有一种更简单的方法可以查看`div`并说它是否为空，然后让容器`div`不显示任何内容，我很乐意尝试。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-07T10:22:23.113

使用`:empty`伪类

```
if ($(this).find('.video-thumb p').is(':empty')) 
```

这将检查您是否有一个空段落 ( `<p></p>`)，而

```
if ($(this).find('.video-thumb').is(':empty')) 
```

检查一个空`.video-thumb`元素

* * *

编辑后：如果 div 中有空格，则条件返回 false，因此最好简单检查

```
if ($(this).find('.video-thumb p').length === 0) 
```

小提琴示例：http: [//jsfiddle.net/6nyF8/6/](http://jsfiddle.net/6nyF8/6/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-07T10:41:55.970

你可以通过几种方式做到这一点。

```
$('.video-centre').each(function(){
   if($(this).find('div.video-thumb').html('') == '')
      $(this).hide();
}); 
```

或者

```
$('.video-centre').each(function(){
   if($(this).find('div.video-thumb').children().length == 0)
      $(this).hide();
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-07T12:00:39.800

您还可以使用 striptags 函数检查字符串，以便从“testimonials”值中使用 php 在内置函数“striptags”中删除标签，因此现在只保留可以轻松比较的文本。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-07T10:25:25.953

```
if ($(this).find('.video-thumb p').text() == "") 
```

或者

```
if ($(this).find('.video-thumb p').is(':empty')) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-07T10:41:14.207

我会尝试删除html标签之间的换行符和

```
<div class="video-thumb">
<?php the_field('testimonials'); ?>
</div> 
```

应该

```
<div class="video-thumb"><?php the_field('testimonials'); ?></div> 
```

但你也可以在 PHP 中做到这一点：

```
<?php if (the_field('testimonials')=="") $style=" style='display:none'";?>
<div class="video-thumb" <?php print $style;?>>
<?php the_field('testimonials'); ?>
</div> 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-07T10:37:19.810

希望我理解Q，这是我想出的**[小提琴。](http://jsfiddle.net/f3yfm/5/)**很好很简单。

```
if ($('.video-centre').find('div:hidden').size() > 0) {
    $('.video-centre').children().hide();
} 
```

# microsoft-metro - 绑定下拉选择值

> ID：12316194
> 
> 赞同：0
> 
> 时间：2012-09-07T10:21:54.627
> 
> 标签：microsoft-metro

如何使用在 Metro 风格应用程序中绑定下拉列表的选定值`data-win-bind`

```
 <select class="win-interactive itemCount" data-win-bind="itemKey: key; selected: quantity; selectedValue: quantity; value: quantity;" >
                        <option>1</option>
                        <option>2</option>
                        <option>3</option>
                        <option>4</option>
                        <option>5</option>
                    </select> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-09-10T07:42:45.553

在选择标签上使用中继器并将其绑定到值和内容列表：

```
<select id="repeater" data-win-control="WinJS.UI.Repeater">
    <option data-win-bind="value: Val; textContent: Content"></option>
</select> 
```

# jquery-ui - jQuery 的 Dialog 和 datepicker

> ID：12316196
> 
> 赞同：0
> 
> 时间：2012-09-07T10:21:55.187
> 
> 标签：jquery-ui

```
$(function(){
                // Dialog
                $('#dialog').dialog({
                autoOpen: false,
                width: 600,
                buttons: {
                    "Ok": function() {
                        $(this).dialog("close");
                    },
                    "Cancel": function() {
                        $(this).dialog("close");
                    }
                }
            });

            // Dialog Link
            $('#dialog_link').click(function(){
                $('#dialog').dialog('open');
                return false;
            });

            //hover states on the static widgets
            $('#dialog_link, ul#icons li').hover(
                function() { $(this).addClass('ui-state-hover'); },
                function() { $(this).removeClass('ui-state-hover'); }
            );

        }); 
```

我使用对话框 jquery，我想在其中使用 datepicker 它显示了对话框之外.....这是问题....

```
 <div id="dialog" title="Find Patient">
      <p>
      <table style="table-layout: fixed; width: 550px;">
        <tr>
          <td><label class="form-item-label form-item-label-right">Patient Id :</label> </td>
            <td><input type="text" name="byId" id="byId" style="width: 90%"  /></td>
           <td><a class="button" href="#"><span>Find</span></a></td>
        </tr>
        <tr>
          <td><label class="form-item-label form-item-label-right">Patient`s Name :</label></td>
            <td><input type="text" name="byName" id="byName" style="width: 90%"/></td>
            <td><a class="button" href="#"><span>Find</span></a></td>
        </tr>
        <tr>
            <td></td>
            <td><input type="text" id="dob" name="dob" style="width: 90%"></td>
            <td><a class="button" href="#"><span>Find</span></a></td>
        </tr>
        </table>
      </p>
    </div> 
```

当我在对话框的最后一行表中使用 datepicker Jquery 时，加载我的 html 页面 Datepicker 首先加载到页面上

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T11:29:05.053

我不知道这是否是您的解决方案，但是如果您倾向于使用 Jquery 日期选择器，请尝试一下，您应该在加载时直接将其添加到元素中，而不是在焦点上，无论如何，当您关注文本框时它会附加。注意代码行`$('#dob').datepicker();`

```
$(function () {
    // Dialog
    $('#dialog').dialog({
        autoOpen: false,
        width: 600,
        buttons: {
            "Ok": function () {
                $(this).dialog("close");
            },
            "Cancel": function () {
                $(this).dialog("close");
            }
        }
    });

    $('#dob').datepicker();

    // Dialog Link
    $('#dialog_link').click(function () {
        $('#dialog').dialog('open');
        return false;
    });

    //hover states on the static widgets
    $('#dialog_link, ul#icons li').hover(
            function () { $(this).addClass('ui-state-hover'); },
            function () { $(this).removeClass('ui-state-hover'); }
        );

}); 
```

# ckeditor - 请帮我删除粘贴事件的内容

> ID：12316203
> 
> 赞同：0
> 
> 时间：2012-09-07T10:21:59.107
> 
> 标签：ckeditor

当用户粘贴到ckeditor时，我想删除内容的格式。我试过这段代码，但它不起作用。

```
CKEDITOR.on('instanceReady', function (e) {
    editor = e.editor;
    editor.on('paste', function (e) {
        editor.focus();
        editor.document.$.execCommand('SelectAll', false, null );
        editor.execCommand('RemoveFormat', editor.getSelection().getNative());
        editor.insertHtml('additional content');
    });
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T18:31:32.397

尝试添加`CKEDITOR.config.forcePasteAsPlainText= true;`到 config.js，这应该可以解决您的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T14:56:09.127

我通过在为 textarea 设置值之前格式化内容来解决我的问题

```
CKEDITOR.on('instanceReady', function(e){
    var editor = e.editor;
    editor.on('paste', function(e){
        setTimeout(function(){
            $('body').append("<div id='tmpCt'>"+ editor.getData() +"</div>");
            $('#tmpCt div, #tmpCt p, #tmpCt a, #tmpCt span').removeAttr("style");
            $('#requiredDescription').val($('#tmpCt').html());
            $('#tmpCt').remove();
        }, 100);
    });
}); 
```

# c# - .NET SQLite 提供程序再也找不到我的表了

> ID：12316204
> 
> 赞同：0
> 
> 时间：2012-09-07T10:22:01.817
> 
> 标签：c#, .net, sqlite, system.data.sqlite

早期我曾经跑过：

```
using (SQLiteConnection sqlite_connection =
    new SQLiteConnection("Data Source="
        + armc.Model.Settings.dbpath
        + ";Version=3;New=True;Compress=True;")) {
    sqlite_connection.Open();
    SQLiteCommand sqlite_command = sqlite_connection.CreateCommand();
    sqlite_command.CommandText = "select * from `archive`"; // ???
    SQLiteDataReader sqlite_datareader = sqlite_command.ExecuteReader();
    while (sqlite_datareader.Read()) {
        m_products.Add
            (new Product("val", int.Parse(sqlite_datareader["value"].ToString())));
        }
    } 
```

但现在我得到：

$exception {"SQLite 错误\r\n没有这样的表：存档"} System.Exception {System.Data.SQLite.SQLiteException}

我不明白发生了什么变化，但我仍然可以使用 C++ api 和 SQLite 2009 Pro util 使用该 sqlite，但 .NET 4.0 的 .NET 提供程序出了点问题。

曾尝试更改数据库，另存为 RSA，但到目前为止似乎什么也没发生，那里可能有什么 esle？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T10:24:33.210

```
new SQLiteConnection("Data Source="
        + armc.Model.Settings.dbpath
        + ";Version=3;New=True;Compress=True;")) 
```

将属性设置`New`为`False`

# objective-c - 延迟后使用 performSelector 重复

> ID：12316205
> 
> 赞同：0
> 
> 时间：2012-09-07T10:22:05.817
> 
> 标签：objective-c, xcode, cocoa

```
-(void)manageNetConnection{
    static BOOL closing=FALSE;
    NSLog(@"connecting Imap after net");
    if([imapStoreObj isStoreConnected] && closing==FALSE){
        [imapStoreObj close];
        NSLog(@"close store");
        closing=TRUE;
        [self performSelector:@selector(manageNetConnection) withObject:nil afterDelay:5.0];

        return;
    }else if ([imapStoreObj isStoreConnected] && closing==TRUE) {
        [self performSelector:@selector(manageNetConnection) withObject:nil afterDelay:5.0];

        return;
    }
    closing=FALSE;
    [indicatorForGetMail setHidden:NO];
    [indicatorForGetMail startAnimation:nil];
    netOff=2;
    NSLog(@"netOff==%d",netOff);

    [editFolderTable setAllowsMultipleSelection:NO];
    NSLog(@"connect net");

    [self reconnect];

} 
```

在重新建立连接之前，预计此函数会调用自身。问题是该函数在指定的延迟后不会调用自己。请帮忙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T10:58:41.983

我在@performSelector 上遇到了同样的问题。请改用 @performSelectorOnMainThread 和 NSTimer。

```
-(void)manageNetConnection{
    ...
    [self performSelectorOnMainThread:@selector(startTimer:) withObject:@"manageNetConnection" waitUntilDone:YES];
    ...
}

- (void)startTimer:(NSString *)data{
    [NSTimer scheduledTimerWithTimeInterval:5.0 target:self selector:@selector(endTimer:) userInfo:data repeats:NO];
}

- (void)endTimer:(NSTimer *)timer{
    NSString *target = [timer userInfo];
    SEL targetSelector = NSSelectorFromString(target);
    [self performSelectorInBackground:targetSelector withObject:nil];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T11:00:58.190

Below line will call `-(void)manageNetConnection;` method for once after 5.0 if your both conditions are satisfying.

```
[self performSelector:@selector(manageNetConnection) withObject:nil afterDelay:5.0]; 
```

Check for both if condition and else if condition satisfies.

```
if([imapStoreObj isStoreConnected] && closing==FALSE){

        [self performSelector:@selector(manageNetConnection) withObject:nil afterDelay:5.0];

        return;
    }else if ([imapStoreObj isStoreConnected] && closing==TRUE) {
        [self performSelector:@selector(manageNetConnection) withObject:nil afterDelay:5.0];

        return;
    } 
```

or else you can use which repeats the call

```
[NSTimer scheduledTimerWithTimeInterval:1.0 target:self selector:@selector(testMethod:) userInfo:nil repeats:YES]; 
```

# c# - 如何在母版页上有 Google 自定义搜索 V2 搜索元素，但在子页面上显示结果

> ID：12316207
> 
> 赞同：0
> 
> 时间：2012-09-07T10:22:08.013
> 
> 标签：c#, asp.net, search, google-custom-search

我正在尝试在我的网站中实施 Google CSE，我已经格式化了 Google CSE 网站上搜索框和结果的外观，现在我想做以下事情：

*   在页面上有搜索框，`Master`以便它显示在每个地方
*   在单独的页面上显示结果说“ `search.aspx`”，这是`Master`
*   在结果页面上，搜索框保留在母版页中的位置。并且有一个 div 来显示结果。

我知道我们有以下可以使用的元素。

*   `<gcse:search>`
*   `<gcse:searchbox>`和`<gcse:searchresults>`两列布局
*   `<gcse:searchbox-only>`独立的搜索框
*   `<gcse:searchresults-only>`一个独立的搜索结果块。

但我想我的要求只能通过使用上述组合来满足，但不确定是哪一个。

如果有人这样做过，请您指导我要走的路。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T10:46:32.603

一个技巧是重定向到搜索页面，将搜索放在 url 上，例如：

您在任何地方（在 master 上）搜索单词`test`，如果您不在，您的代码`search.aspx`将重定向到：

```
search.aspx?q=test 
```

现在，在 中`search.aspx`，您阅读了查询`q`并将其放在谷歌用来进行搜索的文本框中，仅此而已 - 啊，还有一个帖子回谷歌。

例如，代码将如下所示：

```
<form action="search.aspx" id="Form1">
  <div>                     
    <input type="hidden" name="cx" value="partner-pub-XXXXXXXXXX" />
    <input type="hidden" name="cof" value="FORID:10" />
    <input type="hidden" name="ie" value="UTF-8" />

    <input type="text" name="q" size="46" value="<%=Server.HtmlEncode(Current.Request["q"]) %>" />
    <input type="submit" name="sa" value="Search" />
  </div>
</form> 
```

# mysql - 带单引号的全文查询

> ID：12316209
> 
> 赞同：6
> 
> 时间：2012-09-07T10:22:10.917
> 
> 标签：mysql, full-text-search, match-against

当我尝试使用带有单引号和星号通配符的字符串（即“levi's*”）在布尔模式下进行全文搜索时遇到问题：它似乎也在搜索所有以“s”开头的单词，就像“矛”一样，据我所知，引号应该被视为单词的一部分，而两个单引号（''）将是单词分隔符......但也许我错了。

请看这里的例子：[http](http://www.sqlfiddle.com/#!2/3dd3e/2/0) ://www.sqlfiddle.com/#!2/3dd3e/2/0 - 第二行不应该在那里

我怎么能做我想做的事？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-07T10:33:00.327

我想你应该双引号你需要搜索的字符串，如果它包含单引号

例如：`MATCH(value) AGAINST ('"levi\'s"* lacost*' IN BOOLEAN MODE)`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-07T10:33:56.800

这为您提供了示例中的两行：

```
SELECT  *
FROM    ft
WHERE   MATCH(value) AGAINST ('"levi\'s" lacost*' IN BOOLEAN MODE) 
```

在最后的[http://dev.mysql.com/doc/refman/5.5/en/fulltext-boolean.html](http://dev.mysql.com/doc/refman/5.5/en/fulltext-boolean.html)中，它讨论了双引号中的完全匹配。然后，您只需转义单引号即可。

使用括号，您可以添加星号：

```
WHERE   MATCH(value) AGAINST ('(levi\'s)* lacost*' IN BOOLEAN MODE) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-02-20T22:22:09.790

支持 Bart 的评论来处理单引号，并且仍然具有**类似**的搜索功能，我分别处理了每个术语。所以逻辑是 - 如果一个术语有一个单引号，用括号括起来，否则留下它。这是一些可能有帮助的php代码

```
$term = preg_replace("/[']/", "\'", $term);
$terms = explode(' ',$term);
foreach ($terms as &$t) {
    if (strpos($t, "'")) {
        $t = "(".$t.")";
    }
}
$term = implode(' ',$terms); 
```

我的比赛是反对（' *$term* '在布尔模式下

# javascript - 如何编写在 Chrome 和 IE 中正常工作的 javascript？

> ID：12316214
> 
> 赞同：0
> 
> 时间：2012-09-07T10:22:32.523
> 
> 标签：javascript, html, javascript-events

```
function popupaddpackage(urlToOpen){
  var window_width = screen.availWidth/2;
  var window_height = screen.availHeight;
  var window_left = (screen.availWidth/2)-(window_width/2);
  var window_top = (screen.availHeight/2)-(window_height/2);
  var winParms = "Status=yes" + ",resizable=yes" + ",height="+window_height+",width="+window_width + ",left="+window_left+",top="+window_top;
  var newwindow = window.open(urlToOpen,'_blank',winParms);
  newwindow.focus();
}

<a href="" onclick="popupaddpackage('popupchange.jsp?extkey=<%=extKey%>&classId=<%=classid%>')">OPEN POPUP</a> 
```

你好。我使用这个 js 函数在我的 jsp 中打开弹出屏幕。这在 Chrome 中正常工作，但在 IE 中不能正常工作。在 Chrome 中 - 弹出屏幕打开并且后面的页面保持稳定。但是在 IE 中 - 弹出屏幕打开并且后面的页面重定向到 index.jsp（后面的页面是 property.jsp）。如何解决它。感谢你

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-07T10:26:11.083

请以[*正确*](http://www.ianhoar.com/2010/09/26/doing-javascript-popup-windows-the-right-way)[的方式](http://www.ianhoar.com/2010/09/26/doing-javascript-popup-windows-the-right-way)[启动 JS 弹出窗口，](http://www.ianhoar.com/2010/09/26/doing-javascript-popup-windows-the-right-way)*问题应该消失了。*

 *在你的情况下，它会是这样的：

```
function popupaddpackage(link) {
  var window_width = screen.availWidth/2;
  var window_height = screen.availHeight;
  var window_left = (screen.availWidth/2)-(window_width/2);
  var window_top = (screen.availHeight/2)-(window_height/2);
  var winParms = "Status=yes" + ",resizable=yes" + ",height="+window_height+",width="+window_width + ",left="+window_left+",top="+window_top;
  var newwindow = window.open(link.href,link.target,winParms);
  newwindow.focus();
} 
```

对于 HTML：

```
<a href="popupchange.jsp?extkey=<%=extKey%>&classId=<%=classid%>" target="_blank" onclick="popupaddpackage(this);return false;">OPEN POPUP</a> 
```

这样，你：

1.  *将逻辑*与*标记*完全分离
**   帮助搜索引擎正确理解（索引）您的页面*   没有javascript的用户也可以毫无问题地打开页面*

 ** * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-07T10:26:54.947

您是否尝试添加`return false`到最后一行`popupaddpackage(urlToOpen)`？出于 SEO 原因，将 URL 放入其中可能是有利的`href`，什么是禁用 JavaScript？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-07T10:24:02.740

将 href 属性更改为`href="#"`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-07T10:28:50.703

另一种解决方法是

```
<a href="javascript:void(0);" onclick="...your function ... ">OPEN POPUP</a> 
```**

# asp.net - 仅当尚未绑定时，如何在 Ninject 中绑定接口？

> ID：12316215
> 
> 赞同：8
> 
> 时间：2012-09-07T10:22:39.320
> 
> 标签：asp.net, dependency-injection, ninject

如果已经绑定，是否可以将 Ninject 配置为不绑定依赖项。

例如

如果我们加载一个名为 Client1 的模块，其中包含：

```
public class Client1Module:NinjectModule
{
    public override void Load()
    {
         Bind<IService>.To<FancyService>()
    }
} 
```

然后我们加载一个名为 Base 的模块，其中包含

```
public class BaseModule:NinjectModule
{
    public override void Load()
    {
          Bind<IService>.To<BasicService>()
    }
} 
```

我们希望确保 BasicService 未绑定并且系统始终使用 FancyService。我们不会在设计时知道 FancyService 是否存在。如果找到了 Client1 模块，则加载它。

我真的不想要在每次注入时都有一堆重复的样板代码等。因为有 50-60 个依赖项都可以在客户端模块中更改。

有任何想法吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-07T11:04:21.253

您必须确保在 Client1Module 之后加载 BaseModule：

```
 public class BaseModule: NinjectModule
    {
        public override void Load()
        {
            if (!Kernel.GetBindings(typeof(IService)).Any())
            {
                Bind<IService>().To<BasicService>();
            }
        }
    } 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-09-07T14:11:01.383

如果我假设我先加载基本模块，然后在我认为我可以使用之后加载客户端模块

```
Rebind<IService>.To<FancyService>() 
```

它似乎工作

# qt - Qt Script 函数包装

> ID：12316218
> 
> 赞同：1
> 
> 时间：2012-09-07T10:22:42.587
> 
> 标签：qt, function

我正在浏览 Qt Scripting 的文档，如果指导文本错误，它会完全令人困惑和完整。有人可以用简单的英语解释如何包装一个函数并在包装后在脚本代码中访问它。我在下面包含了我的示例。包装函数。这是一个简单的包装器，我需要返回作为参数传递的字符串。以下是代码。

```
#include <QApplication>
#include <QtScript/QScriptEngine>
#include <QtScript/QScriptContext>
#include <QDebug>

QScriptValue returnProperty(QScriptContext *context , QScriptEngine *engine)
{
    qDebug() << "running returnValues Function "<< context->argument(0).toString();
    return context->thisObject().property("returnValue");
} 

int main(int argc, char *argv[])
{
    QApplication app(argc,argv);
    QScriptEngine engine;
    //Evaluating a simple expression
    qDebug() << engine.evaluate("1+2").toNumber();

    QScriptValue func = engine.globalObject();
    func.setProperty("foo",engine.newFunction(returnProperty),QScriptValue::PropertyGetter);
    engine.evaluate("var v= foo('name') ; print( 'This prints values from addValues function :',v) ;");
} 
```

输出如下

```
3
Running returnValues Function  "undefined" 
```

如果我正确理解这一点，这就是我应该做的，如果我调用 engine.newObject() ，因为它在 doc 函数中提到，甚至不会被调用。

我在这里没有得到的是，我在 func.setproperty 行中分配的属性是什么，一旦我设置了属性 foo 我可以做什么。如何在函数中设置值。

如果有人解释我在这里做错了什么，我将不胜感激。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-07T19:53:29.287

你已经在正确的轨道上。`QScriptEngine::newFunction()`将功能带入引擎。现在，您需要一种从脚本访问此函数的方法。“函数”只是全局对象的一个​​属性，您可以使用`setProperty()`. 编码

```
QScriptValue globalObject = engine.globalObject();
QScriptValue func = engine.newFunction(returnProperty);
globalObject.setProperty("foo", func); 
```

产生输出

```
3
running returnValues Function  "name"
This prints values from addValues function : name 
```

* * *

标志`QScriptValue::PropertyGetter`和`QScriptValue::PropertySetter`仅在您要创建属性时才需要，该属性必须在访问时调用函数。它类似于 的属性`QObject`。考虑这个例子：

```
class MyObject : public QObject
{
   Q_PROPERTY(QString name READ getName WRITE setName)
};
MyObject* obj = new MyObject; 
```

当您执行 a 时，您会在后台`obj->setProperty("name", "Sam");`调用并且是. 一个小例子：`MyObject::setName("Sam")``obj->getProperty("name")``MyObject::getName()`

```
QScriptValue getName(QScriptContext* ctx, QScriptEngine* eng)
{
     // Return the value of the internal '_name_' property.
     qDebug() << "Getter 'getName' called";
     return ctx->thisObject().property("_name_");
}

QScriptValue setName(QScriptContext* ctx, QScriptEngine* eng)
{
    // Do some processing and store the name in an internal '_name_' property. 
    qDebug() << "Setter 'setName' called";
    ctx->thisObject().setProperty("_name_", 
                                  ctx->argument(0).toString().toUpper());
    return QScriptValue::UndefinedValue;
}

int main(int argc, char *argv[])
{
    QApplication app(argc, argv);
    QScriptEngine engine;
    QScriptValue globalObject = engine.globalObject();

    // Create a new object.
    QScriptValue obj = engine.newObject();
    // Bring the functions into the engine.
    QScriptValue getNameFunc = engine.newFunction(getName);
    QScriptValue setNameFunc = engine.newFunction(setName);
    // Create a 'name' property, which calls the getter and setter from above.
    obj.setProperty("name", getNameFunc, QScriptValue::PropertyGetter);
    obj.setProperty("name", setNameFunc, QScriptValue::PropertySetter);
    // Make the new object known as 'person'.
    globalObject.setProperty("person", obj);

    // Test our construct.
    engine.evaluate("print('Set the name to fitzgerald');");
    engine.evaluate("person.name = 'fitzgerald';");
    engine.evaluate("print('And the name is... ' + person.name)");
} 
```

最后输出：

```
Set the name to fitzgerald
Setter 'setName' called 
Getter 'getName' called 
And the name is... FITZGERALD 
```

# performance - scala actor 模型中的核心用法

> ID：12316226
> 
> 赞同：1
> 
> 时间：2012-09-07T10:23:17.960
> 
> 标签：performance, scala, actor, cpu-time

我刚开始学习scala。有没有办法在使用actor模型时找到程序使用的CPU时间和实时以及内核？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T10:35:15.447

您可以使用诸如[VisualVM之类的](http://visualvm.java.net/)[分析器](https://stackoverflow.com/questions/14762/please-recommend-a-java-profiler) 或更方便的解决方案：[Typesafe 控制台](http://typesafe.com/products/console)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T10:35:59.077

使用unix系统时间功能怎么样？

> 时间标量 HelloWorld.scala

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-07T19:50:59.210

如果您在 Linux 中运行（特别是在这里我描述的是 Ubuntu）`mpstat`是一个有用的程序。

您可以使用以下命令安装它：

```
sudo apt-get install sysstat 
```

安装后，您可以运行 bash 脚本来记录 CPU 信息。在这种情况下，我每秒记录 10 次。这将阻塞，直到您按 Control-C 来终止日志记录。（另外，考虑删除`sleep 0.1;`更好的数据。）

```
while x=0; do mpstat -P ALL >> cpu_log.txt; sleep 0.1; done 
```

在另一个终端中，您可以启动您的程序（或任何程序）并查看跟踪性能数据。输出如下所示：

```
03:21:08 PM  CPU    %usr   %nice    %sys %iowait    %irq   %soft  %steal  %guest   %idle
03:21:08 PM  all    0.37    0.00    0.33    0.50    0.00    0.02    0.00    0.00   98.78
03:21:08 PM    0    0.51    0.00    0.45    0.57    0.00    0.03    0.00    0.00   98.43
03:21:08 PM    1    0.29    0.00    0.26    0.45    0.00    0.01    0.00    0.00   99.00 
```

# java - GWT 的各种异步设施

> ID：12316230
> 
> 赞同：1
> 
> 时间：2012-09-07T10:23:41.817
> 
> 标签：java, gwt, asynchronous

在 GWT 中，有两种方法可以进行异步的服务器端调用：（较旧的）GWT-RPC 和（较新的）RequestFactory。我第一次浏览 GWT 的 API 文档，并看到一个似乎到处都在使用的构造，称为`GWT.runAsync`.

这`GWT.runAsync`与 GWT-RPC 和 RequestFactory 有什么关系？仅仅是`GWT.runAsync`GWT-RPC的做事方式吗？还是两者都适用？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-07T10:36:28.160

`GWT.runAsync`与 GWT-RPC 或 RequestFactory 无关。GWT-RPC 和 RequestFactory 都是异步的，不能以同步的方式使用。

# java - 泛型，番石榴 Ordering.arbitrary()

> ID：12316239
> 
> 赞同：1
> 
> 时间：2012-09-07T10:24:20.030
> 
> 标签：java, generics, guava, comparator

```
@SuppressWarnings("unchecked")
public static final Ordering<EmailTemplate> ARBITRARY_ORDERING = (Ordering)Ordering.arbitrary();

public static final Ordering<EmailTemplate> ORDER_BY_NAME = Ordering.natural().nullsFirst().onResultOf(GET_NAME);

public static final Ordering<EmailTemplate> ORDER_BY_NAME_SAFE = Ordering.allEqual().nullsFirst()
            .compound(ORDER_BY_NAME)
            .compound(ARBITRARY_ORDERING); 
```

这是用于订购 EmailTemplate 的代码。如果我有一个 EmailTemplate 列表，我希望列表的 null 元素出现在开头，然后是具有 null 名称的元素，然后按自然名称顺序，如果它们具有相同的名称，则任意顺序。

* * *

这是我应该做的吗？我认为通过“allEqual”启动比较器似乎很奇怪......

我还想知道处理 Ordering.arbitrary() 的最佳方法是什么，因为它是返回 Ordering 的静态方法。有什么优雅的使用方式吗？我不太喜欢这种无用的，带有警告的行：

```
@SuppressWarnings("unchecked")
public static final Ordering<EmailTemplate> ARBITRARY_ORDERING = (Ordering)Ordering.arbitrary(); 
```

* * *

顺便说一句，文档说：

> 返回对所有对象的任意排序，这`compare(a, b) == 0`意味着`a == b`（身份相等）。强加的命令没有任何意义，但它在 VM 的生命周期内是不变的。

这是否意味着与此 Ordering 进行比较的对象永远不会被垃圾收集？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-07T10:50:17.747

关于第二个问题：没有。Guava 使用对象的身份哈希码对它们进行任意排序。

关于第一个问题：我会使用比较链按名称排序，然后按任意顺序：

```
private class ByNameThenArbitrary implements Comparator<EmailTemplate> {
    @Override
    public int compare(EmailTemplate e1, EmailTemplate e2) {
        return ComparisonChain.start()
                              .compare(e1.getName(), e2.getName(), Ordering.natural().nullsFirst(),
                              .compare(e1, e2, Ordering.arbitrary())
                              .result();
    }
} 
```

然后我会创建真正的排序，首先对带有空值的模板进行排序：

```
private static final Ordering<EmailTemplate> ORDER = 
    Ordering.fromComparator(new ByNameThenArbitrary()).nullsFirst(); 
```

不过没有测试。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-07T10:49:37.560

我很确定，你做的太复杂了：

*   `Ordering.arbitrary()`适用于任何`Object`并且`compound`不需要将其限制为`EmailTemplate`
*   比较时说`nullsFirst()`优先`null`，我建议最后应用它
*   您不需要定义多个常量，这一切都应该很容易

我会去

```
public static final Ordering<EmailTemplate> ORDER_BY_NAME_SAFE = Ordering
    .natural()
    .onResultOf(GET_NAME)
    .compound(Ordering.arbitrary())
    .nullsFirst(); 
```

但我没有测试过。

* * *

这里令人困惑的是如何`compound`和`nullsFirst`工作的方式。前者`this`优先，后者测试`null`获胜。两者都是合乎逻辑的：

*   `compound`从左到右工作
*   `nullsFirst`必须首先测试 null，否则我们会得到一个期望

但综合起来很混乱。

* * *

> 这是否意味着与此 Ordering 进行比较的对象永远不会被垃圾收集？

不，它使用弱引用。只要一个对象没有在其他地方引用，它就可以被垃圾回收。这与“顺序在 VM 的生命周期内保持不变”并不矛盾，因为不再存在的对象无法再进行比较。

请注意，这`Ordering.arbitrary()`确实是任意的，并且基于对象的身份而不是 on `equals`，这意味着

```
 Ordering.arbitrary().compare(new String("a"), new String("a")) 
```

不返回 0。

我想知道是否可以实现“等于兼容的任意排序”。

# java - 获取 ComboBox 中的选定项文本

> ID：12316241
> 
> 赞同：2
> 
> 时间：2012-09-07T10:24:22.163
> 
> 标签：java, gwt, gxt

如何在 a 中获取当前选定的项目文本（字符串）`ComboBox`？

我正在使用 Ext GWT 版本 2.2.3 顺便说一句。

我已经尝试过`getValueField`，`getSelectedText`但我得到`null`了这两个功能。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T10:37:20.760

你可以添加一个 SelectionChangedListener 吗？

我对 GWT 不熟悉，但看看[这个](http://www.sencha.com/forum/showthread.php?118155-Selected-item-in-ComboBox)，希望它对你有进一步的帮助。

# php - PHP + jQuery 根据服务器时间改变背景

> ID：12316244
> 
> 赞同：0
> 
> 时间：2012-09-07T10:24:34.737
> 
> 标签：php, jquery

我有一个基于 Apache 的服务器，它目前托管我的 PHP + HTML5 应用程序。我编写了一个 jquery 脚本，如果满足有关服务器时间的某些条件，它应该更改特定 div 的背景图像。问题是 - 脚本不工作:)

我已经在这里解决了一些问题，并尝试修复脚本，但这些都没有帮助，因为它们与我的问题并不完全相关。

好的，这是脚本：

```
$(document).ready(function () {

var serverdate = new Date("<?php echo date('l,g,i,s'); ?>");
var currentTime = serverdate.getTime();
var gameTime = getTimeFromString("8:45 pm");
var endTime = getTimeFromString("11:45 pm");
var currentDay = serverdate.getDay();
var weekday=new Array(7);
weekday[0]="Sunday";
weekday[1]="Monday";
weekday[2]="Tuesday";
weekday[3]="Wednesday";
weekday[4]="Thursday";
weekday[5]="Friday";
weekday[6]="Saturday";
    if (currentDay === "Tuesday" || currentDay ==="Wednesday"){
    if (currentTime<gameTime) {
    $('#bodymain').addClass('day').removeClass('game');
    }

else if (currentTime>endTime) {
    $('#bodymain').addClass('day').removeClass('game');
}

else {
    $('#bodymain').addClass('game').removeClass('day');
}
}
else {
$('#bodymain').addClass('day').removeClass('game');
}

function getTimeFromString(timeString){
var theTime = new Date();
var time = timeString.match(/(\d+)(?::(\d\d))?\s*(p?)/);
theTime.setHours(parseInt(time[1])+(time[3]?12:0));
theTime.setMinutes(parseInt(time[2]) || 0);
return theTime.getTime();
}

}); 
```

有什么线索吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-08T07:47:15.330

根据您的输入，我决定使用不同的方法。现在一切都完美无缺。这是最终的解决方案（我不得不等到我能回答我自己的问题）：

PHP 文件：

```
 <?php
$current_time = strtotime('now');
if ($current_time > strtotime('tuesday this week 8:45pm') && $current_time < strtotime('tuesday this week 11:45pm')) {
 $background = 1;
}
else if ($current_time > strtotime('wednesday this week 8:45pm') && $current_time < strtotime('wednesday this week 11:45pm')) {
 $background = 1;
}
else{
$background = 0;
}

?>

<script>
var backday = <?php echo json_encode($background); ?>;
</script> 
```

JS 文件：

```
$(document).ready(function () {
createBackground()

});

function createBackground(){

if (backday === 0) {
$('#bodymain').addClass('day').removeClass('game');
}
else if (backday === 1) {
$('#bodymain').addClass('game').removeClass('day');
}
else {
alert("Background error");

}
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T10:37:31.013

问题在于[serverdate.getDay();](http://www.w3schools.com/jsref/jsref_getday.asp) .

日期.getDay(); 返回 0-6 天数，而不是天的名称。

和 serverdate.getTime(); 返回总时间的毫秒数。

您应该了解JavaScript 中的[日期对象](http://www.w3schools.com/jsref/jsref_obj_date.asp)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-07T10:58:18.893

只需替换`currentDay`为，`weekday[currentDay]`因为您与日期名称进行比较。这对你有用。

# php - 使用 API 获取 facebook 用户生日

> ID：12316248
> 
> 赞同：0
> 
> 时间：2012-09-07T10:24:59.353
> 
> 标签：php, facebook, api

我正在尝试使用 facebook API 让用户生日。我知道我们现在需要为此请求许可。我真的不知道它是如何工作的

刚刚发现要添加：

```
if ($user) {
    $logoutUrl = $facebook->getLogoutUrl();
} else {
    $loginUrl = $facebook->getLoginUrl(
     array('req_perms' => 'email,read_stream')
);
}

<fb:login-button autologoutlink="true" perms="email,user_birthday,status_update,publish_stream"></fb:login-button> 
```

这是我的整个代码（非常基本）：

```
<?php
require 'php-sdk/src/facebook.php';
$facebook = new Facebook(array(
            'appId' => '4539768XXXXX',
            'secret' => 'fe86f3b0b34b3eXXXXXXXXXX',
            'cookie' => true,
        ));

$signedRequest = $facebook->getSignedRequest();
$liked = $signedRequest["page"]["liked"];

// Get User ID
$user = $facebook->getUser();

if ($user) {
    try {
        // Proceed knowing you have a logged in user who's authenticated.
        $user_profile = $facebook->api('/me');
    } catch (FacebookApiException $e) {
        error_log($e);
        $user = null;
    }
}

// Login or logout url will be needed depending on current user state.
if ($user) {
    $logoutUrl = $facebook->getLogoutUrl();
} else {
    $loginUrl = $facebook->getLoginUrl(
     array('req_perms' => 'email,read_stream')
);
}
?>

<!doctype html>
<html xmlns:fb="http://www.facebook.com/2008/fbml">
    <head>
        <style>
            body {
                font-family: 'Lucida Grande', Verdana, Arial, sans-serif;
            }
            h1 a {
                text-decoration: none;
                color: #3b5998;
            }
            h1 a:hover {
                text-decoration: underline;
            }
        </style>

    </head>
    <body>

        <?php
        if ($liked) {
            header("Location:youlike.php");
        } else {
            echo "you don't like yet";
        }
        ?>

<fb:login-button autologoutlink="true" perms="email,user_birthday,status_update,publish_stream"></fb:login-button>

        <?php if ($user): ?>
            <a href="<?php echo $logoutUrl; ?>">Logout</a>
        <?php else: ?>
            <div>
                Login:
                <a href="<?php echo $loginUrl; ?>">Login with Facebook</a>
            </div>
        <?php endif ?>

        <?php if ($user): ?>
            <h3>Vous</h3>
            <img src="https://graph.facebook.com/<?php echo $user; ?>/picture">

            <h3>Personne connectée</h3>
            <pre><?php print_r($user_profile); ?></pre>
        <?php else: ?>
            <strong><em>Vous n'etes pas loggé!</em></strong>
        <?php endif ?>

    </body>
    <script>
    </script>
</html> 
```

感谢您的帮助，谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-07T14:25:28.640

您的代码中有几个问题。

首先，您在`user_birthday`创建`$loginUrl`. 您应该`req_perms`在第 33 行请求与`<fb:login-button>`代码第 68行相同的权限`email,user_birthday,status_update,publish_stream`：

复制权限后，您可以删除代码的第 68 行。如果没有 JavaScript SDK ，该`<fb:login-button>`代码将无法工作。

`header()`在第 37-58 行向浏览器输出文本后调用第 61 行将不起作用。如果要重定向浏览器，则只能在输出文本**之前执行此操作。**在输出任何内容之前移动这段代码，它将起作用。

`?>`第36 行和第 39 行之间的空白`<!doctype>`将输出到 HTML 文件的顶部。它会导致 Facebook 解析器阻塞。一些浏览器也不喜欢 HTML 文档开头的空白，并且会错误地呈现您的页面。你的代码真的应该是`?><!doctype`

# eclipse-plugin - 将“Create Jira Ticket”视图添加到 Eclipse RCP 应用程序

> ID：12316251
> 
> 赞同：2
> 
> 时间：2012-09-07T10:25:03.290
> 
> 标签：eclipse-plugin, eclipse-rcp, jira, jira-plugin

我在一个 Eclipse RCP 应用程序上工作，我们正试图鼓励人们从我们旧的 trac 错误报告系统迁移到我们基于 Jira 的新系统。

由于用户对 Jira 不熟悉，他们仍然倾向于报告旧系统的错误，而不是新系统。我们不想通过关闭旧的 trac 系统来强迫人们切换，所以我认为如果通过 Jira 报告**更容易**，那么他们更有可能切换。

我当时的想法是，我可以将“提交 Jira Ticket”视图直接集成到我们的应用程序中，这样提交工单总是只需单击按钮，而 Jira 的一些复杂性可以隐藏在我们添加的默认字段后面应用。

实现这一目标的最简单方法是什么？是否已经有 Eclipse 插件可以添加到我的 Eclipse RCP 配置中，还是我必须编写自己的视图插件？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-07T13:30:48.883

一种选择是使用已经具有 JIRA 连接器的[Mylyn Eclipse 插件。](http://www.eclipse.org/mylyn/ "米林")这使您可以创建、更新、查看和搜索问题，并且已经存在了一段时间，因此非常稳定。

如果您想要一个更简单的表单来提交问题，那么您可能必须编写自己的视图。JIRA 提供了一个支持这一点的[REST API 。](http://docs.atlassian.com/jira/REST/latest/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-07T21:40:17.097

正如@NickWilson 所说，您可以使用 Mylyn 作为车辆。

看看扩展点`org.eclipse.mylyn.tasks.core.templates`和`org.eclipse.mylyn.tasks.bugs.support`. 有关 Atlassian 使用它们的示例，请参阅插件`com.atlassian.connector.eclipse.jira.ui`。

这些扩展点用于通过“帮助”>>“报告错误或增强...”菜单项报告错误。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-10T05:54:45.870

Atlassian 有一个 Eclipse 插件，具体取决于 JIRA 的版本。 [https://marketplace.atlassian.com/plugins/com.atlassian.ide.plugins.eclipse.jira](https://marketplace.atlassian.com/plugins/com.atlassian.ide.plugins.eclipse.jira)

安装此插件后，将更新的 eclipse 安装用作基本 eclipse 安装，并将该功能包含在捆绑的 rcp 应用程序中。

# django - 使用 auth.User 的 Django 多个配置文件。标准学生教师示例

> ID：12316254
> 
> 赞同：1
> 
> 时间：2012-09-07T10:25:10.337
> 
> 标签：django, relational-database

在 django 中创建 2 个配置文件是否正确？我希望学生可以接触到他的老师，也希望老师也可以接触到他的学生。我的意思是，如果我以学生身份登录，我想准确浏览教我的老师，如果我以教师身份登录，我想准确浏览我教过的学生。这就是我宁愿不能为教师和学生创建一个个人资料的方式。

```
class Teacher(models.Model):
    ...
    user = models.OneToOneField(User)

class Student(models.Model):
    ...
    user = models.OneToOneField(User)
    teacher = models.ManyToManyField(Teacher) 
```

如果是这样，我的 AUTH_PROFILE_MODULE 应该是这样的吗？

```
AUTH_PROFILE_MODULE = 'school.Teacher, school.Student' 
```

将不胜感激任何答案。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T11:01:59.133

您可以使用单个配置文件；

```
class People(models.Model):
    user = models.ForeignKey(User)
    teachers = models.ManyToManyField("self") 
```

然后您可以访问必要的信息；

```
teacher = People.objects.get(pk=<teacher_pk>)
students = People.objects.filter(teachers=teacher)

student = People.objects.get(pk=<student_pk>)
teachers = student.teachers.all() 
```

# python - Django 在管理索引页面中总是将模型的详细名称大写

> ID：12316259
> 
> 赞同：4
> 
> 时间：2012-09-07T10:25:17.473
> 
> 标签：python, django, django-admin

关于字段有一个类似的问题`verbose_name`：[How to stop auto-capitalization of verbose_name in django](https://stackoverflow.com/questions/9000063/how-to-stop-auto-capitalization-of-verbose-name-in-django)

在管理索引页面中列出应用程序的可用模型时，Django 总是将模型的第一个字母大写`verbose_name_plural`并将其用作模型的名称。

这是来自[django.contrib.admin.sites.py](https://github.com/django/django/blob/master/django/contrib/admin/sites.py#L404)的代码：

```
model_dict = {
    'name': capfirst(model._meta.verbose_name_plural),
    'perms': perms,
} 
```

但是考虑下面的[截图](https://i.stack.imgur.com/mG5aL.png)，我想显示“vCenters”而不是“VCenters”。

我可以删除`capfirst`, 并明确大写其他模型`verbose_name_plural`以使其工作。

但是我必须更改django的源代码，它似乎不是Django的错误。有没有更好的解决方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T12:28:52.867

那并没那么简单 ....

*   将 admin/index.html 模板复制到您的 template/admin/index.html
*   在你自己的 templatetags/my_special_thing.py 目录中创建你自己的模板过滤器：lowerfirst_if_starts_with_v

'

```
@register.filter(is_safe=True)
@stringfilter
def lowerfirst_if_starts_with_v(value):
    """Lowercase the first character of the value."""
    return value and value[0] =='v' and value[0].lower() + value[1:] 
```

*   在 index.html 中加载它

'

```
{%load my_special_thing%} 
```

*   将其应用于第 23 行的 index.html

'

```
<th scope="row"><a href="{{ model.admin_url }}"> \
{{ model.name|lowerfirst_if_starts_with_v }}</a></th> 
```

并做了

# android - PhoneGap API 的 Android CordovaWebView 问题

> ID：12316263
> 
> 赞同：2
> 
> 时间：2012-09-07T10:25:30.963
> 
> 标签：android, cordova, webview

我正在尝试以下面提到的方式使用 CordovaWebView public class TechTimeMainActivity extends DroidGap implements CordovaInterface{

```
@Override
public void onCreate(Bundle savedInstanceState) {
     super.onCreate(savedInstanceState);
    super.setIntegerProperty("loadUrlTimeoutValue", 60000); 
    CordovaWebView webview = new CordovaWebView(this);
    webview.setWebViewClient(new CordovaWebViewClient(this, webview) {         
        @Override         
        public boolean shouldOverrideUrlLoading(WebView view, String url)         
        {           
            Log.i(TAG,"Overridden URL Outside IF-->"+ url);
            if(url.contains("OGTE"))
            {
                String cookie = CookieManager.getInstance().getCookie(url);
                Log.i(TAG,"Cookie for new url-->"+ cookie);
                Log.i(TAG,"Overridden URL Inside IF-->"+ url);
                view.clearSslPreferences();
                view.loadUrl("file:///android_asset/www/index.html");
                return true;
            }

            return true;         
        }

        @Override
        public void onPageFinished(WebView view, String url)
        {
            Log.i(TAG,"Finished Loading-->"+ url);
            CookieSyncManager.getInstance().sync();
                    // Get the cookie from cookie jar.
                    String cookie = CookieManager.getInstance().getCookie(url);
                    if (cookie == null) {
                        return;
                    }
                    Log.i(TAG,"Cookie-->"+cookie);
        }

    }); 

     webview.setWebChromeClient(new CordovaChromeClient(this) {

            public void onConsoleMessage(String message, int lineNumber, String         sourceID) {

            }

            @Override  
            public boolean onJsAlert(WebView view, String url, String message, final android.webkit.JsResult result)   
            {  
                new AlertDialog.Builder(myApp)  
                    .setTitle("javaScript dialog")  
                    .setMessage(message)  
                    .setPositiveButton(android.R.string.ok,  
                            new AlertDialog.OnClickListener()   
                            {  
                                public void onClick(DialogInterface dialog, int which)   
                                {  
                                    result.confirm();  
                                }  
                            })  
                    .setCancelable(false)  
                    .create()  
                    .show();  

                return true;  
            };  
          });
    setContentView(webview);   
    webview.loadUrlIntoView("file:///android_asset/www/index2.html"); 

}

  @Override
  public boolean onCreateOptionsMenu(Menu menu) {
        getMenuInflater().inflate(R.menu.activity_tech_time_main, menu);
        return true;
 } 
```

}

问题是如果我使用 super.loadUrl() 调用我的 loadurl 方法，我的 phonegap API 可以正常工作。但是如果我以上述方式调用我的 CordovaWebView，我的 phonegap api 将无法正常工作。对此的任何帮助都将非常有用。

# java - restart java.exe from an applet

> ID：12316271
> 
> 赞同：0
> 
> 时间：2012-09-07T10:25:58.050
> 
> 标签：java, dll, applet, jvm, twain

I have an applet packaged with a third part dll (from JTwain). My applet scans documents from the TWAIN compatible default printer. The applet fails on a paper jam and won't recover. The user navigates away from the page and the applet is destroyed. When returning to the page it fails again. Closing the browser (which kills java.exe process on the pc), and then returning to the page clears the problem and everything works.

I want to restart everything without requiring users to close down the browser. I've added a GUID query string to the URL's from which the applets resources are loaded - so I know nothing is being cached. I've checked in the windows task manager and there is no process created by the dll, it's all happening within the main java.exe process. I tried wrapping the scanning process in a thread so I could interrupt it in the stop or destroy methods (just in case the applets thread weren't stopped when the applet was destroyed), but that didn't work.

Any suggest would be greatly appreciated. Ideally I'd like some way to restart java when the applet unloads (but I doubt that's possible).

**UPDATE**

I've spent a couple of days trying to identify what causes the applet to fail. I still don't know :(

When the paper jam occurs something (not my code), is producing a couple of popups. The first alerts the user of the jam, and can be closed by clicking the OK button. The second says 'reading from device' and hangs. It cannot be close with the red, close window, icon in the top corner - I kill it from the task manager and windows asks to send a report regarding the 'non-responsive program'. I assume these popups are produced by the dll. And given that the second hangs, my assumption is that a thread started by the dll has hung while retaining a lock on some component of the TWAIN application. I get

```
com.asprise.util.jtwain.JTwainException: Failed to open the specified data source:
    Source: TW-Brother MFC-9970CDW LAN Thrown 
```

..when I try to access the scanner.

I'm at a bit of a loss as to how I can get more information. I'm testing my applet on a windows virtual pc (so as to use ie7), and don't have a method for step debugging in this environment. (And it's crashing on third party code for which I have no source anyway)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T13:20:32.087

我在这里只看到两个实用的选择：

1.  使用可以毫无问题地处理卡纸的 API。当然，这说起来容易（获得健壮的 API），但很难找到。
2.  启动应用程序。[使用Java Web Start](https://stackoverflow.com/tags/java-web-start/info)自由浮动。如果它冻结，用户可以将其杀死并单击新 JVM 中另一个实例的链接。或者，`BasicService.showDocument(URLof.jnlp)`如果小程序可以检测到 DLL 的问题并且它本身没有被冻结，它也可能会调用。

当然，您还应该向 ..Asprise(?) 开发人员报告该错误。**最佳**解决方案是从源头上解决问题。我们在这里所做的任何事情都是“解决方法”。

# ruby-on-rails - Active record fields being truncated when containing special characters

> ID：12316280
> 
> 赞同：0
> 
> 时间：2012-09-07T10:26:35.897
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, activerecord, character-encoding

I am seeing strange behavior when saving strings to fields in my database when it contains special characters. In this example "á" or "\xE1"

So if the field is "TESTá" the field that gets persisted on save is "TEST".

Even more worryingly, if the field is validated as mandatory. And I set it to "á", validation passes but on save an empty string gets saved. Making the persisted record invalid!

My database encoding is UTF-8, so I think this is an encoding issue.

Indeed, if on the console I try a simple test I get this error:

» "TEST\xE1F".encode('UTF-8')
Encoding::UndefinedConversionError: "\xE1" from ASCII-8BIT to UTF-8

So, how should I correctly persist special characters in rails / active record?

Thanks for any help.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T10:30:51.747

将编码类型添加到您的迁移中

```
# encoding: utf-8
class SetDefaultValues < ActiveRecord::Migration
  def up
    change_column_default(:dimensions, :unit_of_measure, "inch")
    change_column_default(:gdnts, :unit_for_tolerance, "µinch")
  end
end 
```

也在模型中。

```
# encoding: utf-8
class Specifications::Specification < ActiveRecord::Base
  ...
end 
```

# android - getting Error for Audio Streaming in Android (using URL)

> ID：12316281
> 
> 赞同：2
> 
> 时间：2012-09-07T10:26:35.883
> 
> 标签：android, audio-streaming, android-mediaplayer

Want to do a audio streaming for a URL. The same URL is playing a live radio while running on the mobile browser. But while using `MediaPlayer` for android app there is no output. It gives the following error.

```
 09-07 05:16:37.539: E/MediaPlayer(1265): error (1, -2147483648)
09-07 05:16:37.539: W/System.err(1265): java.io.IOException: Prepare failed.: status=0x1 
```

My code sample is :

```
try {
        Log.i("Audio Streaming", "start-->");
        mediaPlayer.setAudioStreamType(AudioManager.STREAM_MUSIC);
        mediaPlayer.setDataSource(URL_OF_AUDIO);
        mediaPlayer.prepare();
        mediaPlayer.start();
    } catch (IllegalArgumentException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (IllegalStateException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T11:03:39.197

确保传递的 URL 有效，并检查 androidmanifest 是否具有访问权限。

使用 onprepared listener 启动视频以避免一些不需要的异常。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T07:12:29.173

试试这个效果很好........

```
public class test extends Activity implements OnErrorListener, OnPreparedListener {

private MediaPlayer player;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    player = new MediaPlayer();
    player.setAudioStreamType(AudioManager.STREAM_MUSIC);
    try {
        player.setDataSource("http://www.hubharp.com/web_sound/BachGavotte.mp3");
        player.setOnErrorListener(this);
        player.setOnPreparedListener(this);
        player.prepareAsync();
    } catch (IllegalArgumentException e) {
        e.printStackTrace();
    } catch (IllegalStateException e) {
        e.printStackTrace();
    } catch (IOException e) {
        e.printStackTrace();
    }       
}
@Override
public void onDestroy() {
    super.onDestroy();
    player.release();
    player = null;
}
@Override
public void onPrepared(MediaPlayer play) {
    play.start();
}
@Override
public boolean onError(MediaPlayer arg0, int arg1, int arg2) {
    return false;
}
} 
```

# git - 将 CVS 存储库中的更改合并到 GIT 存储库

> ID：12316282
> 
> 赞同：0
> 
> 时间：2012-09-07T10:26:37.067
> 
> 标签：git, merge, cvs

目前，我的 5 人团队正在使用 GIT 存储库来跟踪我们在模块中所做的更改以及在其他共享模块中所做的更改。但是我们有一个 CVS 存储库，所有其他团队都在使用它来维护其他模块。因此 CVS 存储库具有所有模块的最新更改。

现在我的疑问是如何将更改从 CVS 存储库更改到 GIT 存储库.. 是否有任何简化或万无一失的方法将这些更改从 CVS 合并到 git。

实际上，我们在 GIT 中的代码是几个月前从 CVS 中获取的，现在我们想用 CVS 的最新功能和更改来更新它。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T10:41:44.393

我相信您的问题的答案就在这里：[我如何从 CVS 存储库中 git-cvsimport 多个具有不同分支的模块？](https://stackoverflow.com/questions/1203510/how-can-i-git-cvsimport-multiple-modules-from-a-cvs-repository-with-differing-b?rq=1)

不`git cvsimport`工作？

# c# - What is the difference between C# network stream and memory stream in context of sockets?

> ID：12316285
> 
> 赞同：0
> 
> 时间：2012-09-07T10:26:45.657
> 
> 标签：c#, .net, sockets

i want to transfer data over sockets and currently i am creating a memory stream.

i can also use a network stream.

Can anyone please help me understand the difference between c# network stream and memory stream?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-07T10:30:22.153

A`NetworkStream`与套接字直接相关；它不知道自己的长度，你无法寻找，读/写函数直接绑定到接收/发送API（因此，读和写完全不相关）。它可能会超时，如果等待更多数据，读取可能需要相当长的时间。

A`MemoryStream`基本上是一个本地的包装器`byte[]`。它有一个已知的长度（可以改变），你可以寻找，读/写直接相关：两者都增加相同的位置光标，你可以写一些东西，倒带，然后读它。所有的操作都非常及时。

问“有什么相似之处”可能更容易，这很简单：两者都有一个读/写 API，因为它们都是`Stream`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T10:30:19.770

两个流都是 Stream 的派生，这些类出于不同的目的而变形

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-07T10:30:43.353

根据我的理解，网络流从网络接口读取，如果你使用内存流（我的意思是，在同一场景中），所有数据将首先加载到内存中（我假设它读取到实际的末尾流），然后读取操作将从内存中读取。

内存流上发生的第一个读取操作，需要将所有数据加载到内存中。

在网络流的地方，您可以在数据到达时读取它们。

# spring - failed to read schema document 'http://www.springframework.org/schema/beans/spring-beans-3.0.xsd'

> ID：12316288
> 
> 赞同：14
> 
> 时间：2012-09-07T10:26:59.580
> 
> 标签：spring, schema

While starting my Spring App, I am getting the following error :

```
WARNING: Ignored XML validation warning
org.xml.sax.SAXParseException: schema_reference.4: Failed to read schema document     
'http://www.springframework.org/schema/beans/spring-beans-3.0.xsd', because
1) could not find the document;
2) the document could not be read;
3) the root element of the document is not <xsd:schema>. 
```

My springapp-servlet.xml is as follows :

```
<beans xmlns="http://www.springframework.org/schema/beans"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"        
xmlns:aop="http://www.springframework.org/schema/aop"      
xsi:schemaLocation="http://www.springframework.org/schema/beans   
http://www.springframework.org/schema/beans/spring-beans-3.0.xsd">
<bean name="/hello.htm" class="springapp.web.HelloController"/>
</beans> 
```

Please suggest.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2015-02-24T13:15:59.333

当我收到此错误消息时，这仅仅是因为我的 CLASSPATH 中缺少一个 jar。一些 spring 应用程序似乎对 spring jars 非常渴望。我的应用程序最终需要类路径中的所有这些：

```
${OTS_DIR}/org.springframework.aop-${VERSION}.jar:\
${OTS_DIR}/org.springframework.aspects-${VERSION}.jar:\
${OTS_DIR}/com.springsource.org.aopalliance-${AOPALLIANCE_VER}.jar:\
${OTS_DIR}/org.springframework.asm-${VERSION}.jar:\
${OTS_DIR}/org.springframework.beans-${VERSION}.jar:\
${OTS_DIR}/org.springframework.context-${VERSION}.jar:\
${OTS_DIR}/org.springframework.core-${VERSION}.jar:\
${OTS_DIR}/org.springframework.expression-${VERSION}.jar:\
${OTS_DIR}/org.springframework.jdbc-${VERSION}.jar:\
${OTS_DIR}/org.springframework.jms-${VERSION}.jar:\
${OTS_DIR}/org.springframework.orm-${VERSION}.jar:\
${OTS_DIR}/org.springframework.transaction-${VERSION}.jar:\
${OTS_DIR}/org.springframework.instrument-${VERSION}.jar 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-11T19:44:25.297

```
<beans 
    xmlns="http://www.springframework.org/schema/beans"
    xmlns:aop="http://www.springframework.org/schema/aop"
    xmlns:context="http://www.springframework.org/schema/context"
    xmlns:security="http://www.springframework.org/schema/security"
    xmlns:tx="http://www.springframework.org/schema/tx"
    xsi:schemaLocation="
        http://www.springframework.org/schema/aop http://www.springframework.org/schema/aop/spring-aop-3.0.xsd
        http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
        http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-3.0.xsd
        http://www.springframework.org/schema/security http://www.springframework.org/schema/security/spring-security-3.0.xsd
        http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx-3.0.xsd"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"> 
```

# c# - Accessing internal class through reflection

> ID：12316289
> 
> 赞同：-1
> 
> 时间：2012-09-07T10:27:06.033
> 
> 标签：c#, .net, reflection, internal

Currently I wanted to do a UT coverage for which 100% function coverage is needed. I have a Public Class called FunctionParser.cs in my application and this internally uses an internal class called Autocomplete provided by Third party. Now the problem is there are few functionalities that lie within the AutoComplete Class which are untested . Therefore in order to do the coverage for this internal class named "AutoComplete" am trying to use reflection but nothing works for me can some one say me how can I use reflection to access this internal class for test purpose.

Note : I cannot modify the AutoComplete.CS which is an internal class provided by 3rd party, so other than using •Get [InternalsVisibleTo] . please suggest anything else that could work without modifying the third party class

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-07T11:18:42.910

```
var innerType = Assembly.GetExecutingAssembly().GetTypes()
                .Where(t => t.DeclaringType == typeof(Outer))
                .First(t => t.Name == "Inner");

var innerObject = Activator.CreateInstance(innerType);
innerType.GetMethod("InnerTest", BindingFlags.Instance | BindingFlags.NonPublic)
         .Invoke(innerObject, new object[] { }); 
```

--

```
public class Outer
{
    class Inner
    {
        internal void InnerTest()
        {
            Console.WriteLine("test");
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-07T10:31:28.717

您不应该对第三方提供的代码进行单元测试。如果您的代码依赖于外部代码，则模拟该代码的行为。例如，外部库可能需要封装在实现特殊接口的附加类中。比将该接口注入到您的代码中，例如在构造函数中。在单元测试中，您将注入模拟实现。

# java - How do I reduce this code duplication

> ID：12316291
> 
> 赞同：1
> 
> 时间：2012-09-07T10:27:18.310
> 
> 标签：java, android, optimization, code-duplication

I'm stuck on how I can reduce this code duplication, I'm using the TextToSpeech engine and using locales so the user can select their language.

`language` is a Spinner.

```
language.setOnItemSelectedListener(new OnItemSelectedListener() {

    public void onItemSelected(AdapterView<?> parent, View arg1,
        int pos, long id) {
    System.out.println(parent.getItemAtPosition(pos).toString());
    if (parent.getItemAtPosition(pos).toString().equals("UK")) {
        textToSpeech = new TextToSpeech(MainActivity.this,
            new TextToSpeech.OnInitListener() {

            @Override
            public void onInit(int status) {
                if (status != TextToSpeech.ERROR) {
                textToSpeech.setLanguage(Locale.UK);
                }
            }
            });
    } else if (parent.getItemAtPosition(pos).toString()
        .equals("US")) {
        textToSpeech = new TextToSpeech(MainActivity.this,
            new TextToSpeech.OnInitListener() {

            @Override
            public void onInit(int status) {
                if (status != TextToSpeech.ERROR) {
                textToSpeech.setLanguage(Locale.US);
                }
            }
            });

    } else if (parent.getItemAtPosition(pos).toString()
        .equals("French")) {
        textToSpeech = new TextToSpeech(MainActivity.this,
            new TextToSpeech.OnInitListener() {

            @Override
            public void onInit(int status) {
                if (status != TextToSpeech.ERROR) {
                textToSpeech.setLanguage(Locale.FRANCE);
                }
            }
            });

    } else if (parent.getItemAtPosition(pos).toString()
        .equals("Italian")) {
        textToSpeech = new TextToSpeech(MainActivity.this,
            new TextToSpeech.OnInitListener() {

            @Override
            public void onInit(int status) {
                if (status != TextToSpeech.ERROR) {
                textToSpeech
                    .setLanguage(Locale.ITALIAN);
                }
            }
            });

    } else if (parent.getItemAtPosition(pos).toString()
        .equals("German")) {
        textToSpeech = new TextToSpeech(MainActivity.this,
            new TextToSpeech.OnInitListener() {

            @Override
            public void onInit(int status) {
                if (status != TextToSpeech.ERROR) {
                textToSpeech
                    .setLanguage(Locale.GERMAN);
                }
            }
            });

    }

    }

    public void onNothingSelected(AdapterView<?> arg0) {
    // TODO Auto-generated method stub

    }
});
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-07T10:30:45.023

将 TextToSpeech 对象的创建提取到一个单独的函数中：

```
private TextToSpeech createTextToSpeech(final Locale loc) {
    return new TextToSpeech(MainActivity.this,  
        new TextToSpeech.OnInitListener() {  

        @Override  
        public void onInit(int status) {  
            if (status != TextToSpeech.ERROR) {  
                setLanguage(loc);  
            }  
        }  
    });  
} 
```

请注意，`loc`必须声明参数`final`，以便它可以在匿名类中使用。

用法：

```
...
} else if (parent.getItemAtPosition(pos).toString().equals("French")) {   
    textToSpeech = createTextToSpeech(Locale.FRANCE);
} ... 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-07T10:33:48.097

您可以创建地图。

```
private static final Map<String, Locale> LOCALES = new LinkedHashMap<String, Locale>() {{
   put("US", Locale.US);
   // many more
}

final Locale locale = LOCALES.get(parent.getItemAtPosition(pos).toString());
if(locale != null)
    textToSpeech = new TextToSpeech(MainActivity.this,
        new TextToSpeech.OnInitListener() {
        @Override
        public void onInit(int status) {
            if (status != TextToSpeech.ERROR) 
               textToSpeech.setLanguage(locale);
        }
    }); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-07T10:31:28.523

从我的头顶上，制作一个`Map<String,Locale>`where 键将是国家/地区的名称，值将是语言环境
，然后就可以了

```
textToSpeech = new TextToSpeech(MainActivity.this,
    new TextToSpeech.OnInitListener() {

    @Override
    public void onInit(int status) {
        if (status != TextToSpeech.ERROR) {
            textToSpeech
              .setLanguage(localeMap.get(parent.getItemAtPosition(pos).toString()));
        }
    }
}); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-07T10:51:27.243

```
public class TextToSpeechFactory {

private static final Map<String, Locale> LOCALES = new HashMap<String, Locale>() {{
       put("US", Locale.US);
       // many more
    }
};

public static TextToSpeech createInstance(String language){
    Locale l = LOCALES.get(language);
    if(l == null)
        throw new Exception("Languange "+ language + "is not valid!");
    else{
        return new TextToSpeech(MainActivity.this,
            new TextToSpeech.OnInitListener() {

            @Override
            public void onInit(int status) {
                if (status != TextToSpeech.ERROR) {
                textToSpeech.setLanguage(l);
                }
            }
            });
    }
} 
```

}

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-07T10:33:32.963

尝试使用枚举作为

```
public enum LANGLIST {
   UK("uk", Locale.UK),
   UK("swe", Locale.SWEIDHS);

   public String lang;
   public Locale loc;
   private LANGLIST(String lang, Locale loc) {
      this.lang = lang;
      this.loc = loc;
   }
} 
```

然后遍历枚举中的所有元素。

# perl - Perl - 如何获取哈希中的前一个键？

> ID：12316293
> 
> 赞同：1
> 
> 时间：2012-09-07T10:27:22.580
> 
> 标签：perl, hash, loops, key-value

我有一个散列，其中填充了未知数量的字符串键。每个键的值都是零开始。

我想遍历这个散列，并且对于除第一个元素之外的每个元素，使其值等于我拥有的另一个散列中的等价物加上此散列中的前一个值。所以在数学上是这样的：

```
hash1:a = hash2:a;
hash1:b = hash2:b + hash1:a;
hash1:c = hash2:c + hash1:b;
hash1:d = hash2:d + hash1:c;
hash1:e = hash2:e + hash1:d;
... 
```

我什至不确定我知道如何做第一个，因为我不知道值或键是什么。我打算先对它进行排序，但由于键可以是列表中的任何键，我无法准确指定首先是什么。我不知道如何根据键引用以前的值。这可能吗？

（恐怕我没有任何代码可以显示，我试过但我才意识到这是非常错误的哈哈）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-07T10:32:27.223

哈希本身是无序的，因此他们不知道“以前的”密钥。您需要使用该`keys`功能提取键，对它们进行排序（如您所说），然后参考键列表的前一个元素以找出您选择的顺序中的前一个键是什么。

一旦你有了之前的键，你就可以使用通常的`$hash{$key}`语法从散列中访问值。

然后技巧变成访问列表中的前一个键，这可能需要按索引迭代列表，因为`foreach`循环不会让您知道您当前在列表中的哪个位置。就像是

```
for (my $i = 0; $i <= $#keys; ++$i) {
    if ($i == 0) { ... } # first key
    else { ... } # all other keys
} 
```

可能是合适的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T10:33:54.050

这基本上是所有哈希值的*累积和：*

```
a’ = (0) + a
b’ = (0  + a) + b
c’ = (0  + a  + b) + c
d’ = 0 + ... 
```

遍历哈希，存储总和并始终添加当前值（或将总和添加到当前值，没关系，加法是可交换的）应该可以获得所需的结果。请注意，您必须首先对键进行排序，因为哈希根据定义是无序的。

```
$sum = 0;
foreach my $k (sort keys %hash) {
  $hash{$k} += $sum;
} 
```

生成的哈希也不会被排序，因此您有两个选择：

*   每次使用散列（对其进行迭代）时，您都必须遍历已排序的键，然后在该键位置访问散列。只需使用我上面给出的循环，然后用你想要的任何东西交换它的主体。
*   将总和存储在列表/数组中。这些数据结构不会更改它们的值顺序（但您不会有键值对；只有值）。

# ruby-on-rails - Rails、Capistrano、Nginx、Unicorn - 应用程序已经初始化（RuntimeError）

> ID：12316302
> 
> 赞同：4
> 
> 时间：2012-09-07T10:28:00.750
> 
> 标签：ruby-on-rails, deployment, error-handling, capistrano, unicorn

谁能阐明这个错误到底指的是什么？

我在部署网站的新版本时遇到问题。

```
I,  INFO -- : reloading config_file=[snip]/current/config/unicorn.rb
I,  INFO -- : Refreshing Gem list
E, ERROR -- : error reloading config_file=[snip]/current/config/unicorn.rb: Application has been already initialized. (RuntimeError)
E, ERROR -- : [snip]/shared/bundle/ruby/1.9.1/gems/railties-3.2.3/lib/rails/application.rb:135:in `initialize!'
E, ERROR -- : [snip]/shared/bundle/ruby/1.9.1/gems/railties-3.2.3/lib/rails/railtie/configurable.rb:30:in `method_missing'
E, ERROR -- : [snip]/releases/20120907085937/config/environment.rb:5:in `<top (required)>'
E, ERROR -- : [snip]/shared/bundle/ruby/1.9.1/gems/activesupport-3.2.3/lib/active_support/dependencies.rb:251:in `require'
E, ERROR -- : [snip]/shared/bundle/ruby/1.9.1/gems/activesupport-3.2.3/lib/active_support/dependencies.rb:251:in `block in require'
E, ERROR -- : [snip]/shared/bundle/ruby/1.9.1/gems/activesupport-3.2.3/lib/active_support/dependencies.rb:236:in `load_dependency'
E, ERROR -- : [snip]/shared/bundle/ruby/1.9.1/gems/activesupport-3.2.3/lib/active_support/dependencies.rb:251:in `require'
E, ERROR -- : config.ru:4:in `block in <main>'
E, ERROR -- : [snip]/shared/bundle/ruby/1.9.1/gems/rack-1.4.1/lib/rack/builder.rb:51:in `instance_eval'
E, ERROR -- : [snip]/shared/bundle/ruby/1.9.1/gems/rack-1.4.1/lib/rack/builder.rb:51:in `initialize'
E, ERROR -- : config.ru:1:in `new'
E, ERROR -- : config.ru:1:in `<main>'
E, ERROR -- : [snip]/shared/bundle/ruby/1.9.1/gems/unicorn-4.3.1/lib/unicorn.rb:44:in `eval'
E, ERROR -- : [snip]/shared/bundle/ruby/1.9.1/gems/unicorn-4.3.1/lib/unicorn.rb:44:in `block in builder'
E, ERROR -- : [snip]/shared/bundle/ruby/1.9.1/gems/unicorn-4.3.1/lib/unicorn/http_server.rb:696:in `call'
E, ERROR -- : [snip]/shared/bundle/ruby/1.9.1/gems/unicorn-4.3.1/lib/unicorn/http_server.rb:696:in `build_app!'
E, ERROR -- : [snip]/shared/bundle/ruby/1.9.1/gems/unicorn-4.3.1/lib/unicorn/http_server.rb:677:in `load_config!'
E, ERROR -- : [snip]/shared/bundle/ruby/1.9.1/gems/unicorn-4.3.1/lib/unicorn/http_server.rb:303:in `join'
E, ERROR -- : [snip]/shared/bundle/ruby/1.9.1/gems/unicorn-4.3.1/bin/unicorn:121:in `<top (required)>'
E, ERROR -- : [snip]/shared/bundle/ruby/1.9.1/bin/unicorn:23:in `load'
E, ERROR -- : [snip]/shared/bundle/ruby/1.9.1/bin/unicorn:23:in `<main>'
I,  INFO -- : reaped #<Process::Status: pid 3182 exit 0> worker=0
I,  INFO -- : reaped #<Process::Status: pid 3185 exit 0> worker=1
I,  INFO -- : reaped #<Process::Status: pid 3188 exit 0> worker=2
I,  INFO -- : reaped #<Process::Status: pid 3191 exit 0> worker=3
I,  INFO -- : worker=0 ready
I,  INFO -- : worker=3 ready
I,  INFO -- : worker=1 ready
I,  INFO -- : worker=2 ready 
```

独角兽.rb

```
root = "/home/[user]/apps/[site]/current"
working_directory root
pid "#{root}/tmp/pids/unicorn.pid"
stderr_path "#{root}/log/unicorn.log"
stdout_path "#{root}/log/unicorn.log"

listen "/tmp/unicorn.[site].sock", :backlog => 2048

worker_processes 4

preload_app true

timeout 30

before_fork do |server, worker|
    defined?(ActiveRecord::Base) and ActiveRecord::Base.connection.disconnect!
end

after_fork do |server, worker|
    defined?(ActiveRecord::Base) and ActiveRecord::Base.establish_connection
end 
```

任何帮助表示赞赏 - 如果需要，我可以提取更多配置文件。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-19T20:32:16.113

终于到了这个底线。在重读了[Ryan Bates 的 Railscasts 关于零停机部署的一集之后](http://railscasts.com/episodes/373-zero-downtime-deployment)，我注意到我使用 HUP 而不是 USR2 发出了 unicorn restart/reload 命令。在更改这一点并重新启用 ginettev 答案中的代码（我之前为了理解问题而禁用该代码时，我现在可以根据需要进行部署。

更改就像更改我的 unicorn_init.sh 文件一样简单：

```
restart|reload)
sig HUP && echo reloaded OK && exit 0
echo >&2 "Couldn't reload, starting '$CMD' instead"
run "$CMD"
;; 
```

到

```
restart|reload)
sig USR2 && echo reloaded OK && exit 0
echo >&2 "Couldn't reload, starting '$CMD' instead"
run "$CMD"
;; 
```

希望这对其他人有帮助！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-17T06:43:49.867

查看对我有用的独角兽配置，在 before_fork 部分中，您可以尝试添加以下代码

```
old_pid = '#{root}/tmp/pids/unicorn.pid.oldbin'
if File.exists?(old_pid) && server.pid != old_pid
  begin
    Process.kill("QUIT", File.read(old_pid).to_i)
  rescue Errno::ENOENT, Errno::ESRCH
    # someone else did our job for us
  end
end 
```

此外，您无需检查配置中是否定义了 ActiveRecord::Base。

# qt - 如何为一行设置图像？

> ID：12316309
> 
> 赞同：7
> 
> 时间：2012-09-07T10:28:26.740
> 
> 标签：qt

我想在行尾添加文本（在行的开头）和图像。

我可以设置文本，但如何在行项目的末尾设置图像`QTreeWidgetItem`？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-07T10:36:46.420

只需在 QTreeWidget 中设置例如两列，然后在第一列中设置文本，在第二列中设置图标：

```
QTreeWidgetItem *newItem = new QTreeWidgetItem;
newItem->setText(0, "Something");
newItem->setIcon(1, QIcon("Path to your icon"));

myTreeWidget->addTopLeveItem(newItem); 
```

或设置图标的插入，您可以设置前景：

```
newItem->setForeground(QBrush(QPixmap("Path to your image"))); 
```

这可能更适合您的问题。

# php - 运行此代码会停止我的 while 循环

> ID：12316314
> 
> 赞同：0
> 
> 时间：2012-09-07T10:28:49.117
> 
> 标签：php, mysql, select

```
$q1 = mysql_query("select in_time, out_time  from $att_tbl where fk_eid = '$e_id' and a_date = '$dts'");
$r1 = mysql_fetch_array($q1);
$intime = $r1['in_time'];
$outtime = $r1['out_time']; 
```

在上面的代码中，'$e_id' 是用于指定用户的普通 id，'$dts' 是格式为 YYYY-MM-DD 的日期。但是当我使用这段代码时，它会停止我的父 while 循环，如果我评论这段代码，我的 while 循环运行良好。我从未见过这样的行为。为什么会这样？这段代码有什么问题？

编辑：这是完整的粗略代码

```
$q1 = mysql_query("select ids from $emp_data where lft = '0' order by emp_id");
while($r1 = mysql_fetch_array($q1))
{
$e_id = $r1['ids'];
$htmldata = '';
$filename = "$e_id-$months-$years.html";
$date =time () ;
$day = date('d', $date) ;
$month = date('m', $date) ;
$year = date('Y', $date) ;
$first_day = mktime(0,0,0,$month, 1, $year) ;
$title = date('F', $first_day) ;
$day_of_week = date('D', $first_day) ; 
$today = date('Y-m-d', strtotime('today'));
$yesterday = date('Y-m-d', strtotime('yesterday')); 
$day_before_yesterday = date('Y-m-d', strtotime('yesterday - 1 day'));

switch($day_of_week)
{   
 case "Sun": $blank = 0; break; 
 case "Mon": $blank = 1; break; 
 case "Tue": $blank = 2; break; 
 case "Wed": $blank = 3; break; 
 case "Thu": $blank = 4; break; 
 case "Fri": $blank = 5; break; 
 case "Sat": $blank = 6; break; 
}
$days_in_month = cal_days_in_month(0, $month, $year) ; 
$htmldata.="<link rel=\"stylesheet\" href=\"/cal.css\" type=\"text/css\"><table id=\"mct1\" class=\"ct1 cl1 cp4 cd2 mct\" cellspacing=0>";
$htmldata.="<tr><th> $title $year </th></tr>";
$htmldata.="<tr><td class=\"cbm cba cmi\"><table class=\"ca ca2\"><tr class=\"cl\"><td>Sun</td><td>Mon</td><td>Tue</td><td>Wed</td><td>Thu</td><td>Fri</td><td class=\"cr\">Sat</td></tr>";
$day_count = 1;
$htmldata.="<tr>";
while ( $blank > 0 ) 
{ 
    $htmldata.="<td>&nbsp;</td>"; 
    $blank = $blank-1; 
    $day_count++;
} 
$day_num = 1;
while ( $day_num <= $days_in_month ) 
{ 
    $dts = date("Y-m-d", strtotime("$year-$month-$day_num"));
    if(strtotime($dts) <= strtotime($today))
    {
        // $q1 = mysql_query("select in_time, out_time  from $att_tbl where fk_eid = '$e_id' and a_date = '$dts'");
        // $r1 = mysql_fetch_array($q1);
        // $intime = $r1['in_time'];
        // $outtime = $r1['out_time'];
    }
    $bgclr = '';
    $weekday = date('D', strtotime($year."-".$month."-".$day_num));
    if($weekday == 'Sun')
    {
        $bgclr = "bgcolor = \"pink\"";
    }
    $htmldata.="<td class=\"cr\" $bgclr><div class=\"ccd co4\">$day_num <br><font size=\"2\"> $intime <br> $outtime </font></div></td>"; 
    $day_num++; 
    $day_count++;
    if ($day_count > 7)
    {
        $htmldata.="</tr><tr>";
        $day_count = 1;
    }
} 
while ( $day_count >1 && $day_count <=7 ) 
{
    $htmldata.="<td>&nbsp;</td>"; 
    $day_count++; 
} 
$htmldata.="</tr></tbody></table></td></tr></table>"; 

$myFile = "$filename";
$fh = fopen($myFile, 'w') or die("can't open file");
$stringData = $htmldata;
fwrite($fh, $stringData);
fclose($fh);
} 
```

我已经评论了暂停整个 while 循环的代码，以便可以很容易地看到它

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T10:31:49.047

由于阵列中不存在`in_time`并且您的脚本可能已停止。`out_time`否则，除非您告诉我们您分配给变量的内容，否则您的查询没有问题。

正如我在评论中提到的，签入该`error_log`文件，该文件与此 PHP 脚本位于同一目录中。

此外，您的父循环是否也类似于以下内容：

`while ($foo = @mysql_fetch_array($q1))`

如果是，那可能是你的错误。您正在重置`$q1`while 循环内部的值，因此可能会终止循环。

**更新：**既然您发布了代码，我知道您的确切错误：

这些是您的前两行代码，用于运行主`while`循环：

```
$q1 = mysql_query("select ids from $emp_data where lft = '0' order by emp_id");
while($r1 = mysql_fetch_array($q1)) 
```

请注意，您曾经`$q1`引用​​过查询。现在在那段代码中，在一个嵌套`while`循环中：

```
$q1 = mysql_query("select in_time, out_time  from $att_tbl where fk_eid = '$e_id' and a_date = '$dts'"); 
```

你又用`$q1`了。解释器认为您打算更改变量值，但您想初始化另一个名为`$q1`.

好的，毕竟，您需要做的就是为您的代码编写以下代码：

```
$q2 = mysql_query("select in_time, out_time  from $att_tbl where fk_eid = '$e_id' and a_date = '$dts'");
$r2 = mysql_fetch_array($q2);
$intime = $r2['in_time'];
$outtime = $r2['out_time']; 
```

只需在其他任何地方更改您的参考资料。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T10:33:36.720

您说您的查询在父循环内。这意味着您正在多次运行查询。出于这个原因，最好不要将查询放在循环中。

例如，下面的（坏）代码将运行 1000 次查询。

```
$i = 0; 
while($i <= 1000){
    mysql_query("SELECT name FROM user WHERE user_id = '$i'");
    $i++;
} 
```

因为上面的这段代码没有使用准备好的语句，所以每个查询都需要往返 MySQL 服务器。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-07T10:39:50.153

尝试这个：

```
$q1 = mysql_query("select in_time, out_time  from $att_tbl where fk_eid = '$e_id' and a_date = '$dts'");
while($r1 = mysql_fetch_array($q1))
{
$intime = $r1['in_time'];
$outtime = $r1['out_time'];
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-07T10:41:14.287

您是否必须在循环中运行该查询？您不能先将所有 $e_id 变量作为数组获取，然后将查询更改为`select in_time, out_time from $att_tbl where fk_eid IN (... all your $e_id values formatted for SQL...) and a_date='$e_id'`. 然后，您将遍历结果集，而不是向 MySQL 触发（可能）数百个 SELECT。

你可以用这个格式化你的 $e_id 数组：

```
$sqlString = implode("','", $e_id);
$sql = "select in_time, out_time  from $att_tbl where fk_eid IN ('$sqlString') and a_date='$e_id'; 
```

出于调试目的，您应该始终打开错误报告。我认为，您将能够立即看到问题所在。

# c# - ASP.NET 4.0 站点中的 X-UA 兼容元标记不起作用

> ID：12316317
> 
> 赞同：0
> 
> 时间：2012-09-07T10:29:04.613
> 
> 标签：c#, asp.net, iis, web-applications

我正在编写一个 asp.net 4 应用程序，我希望我的应用程序以兼容模式（IE8 和 IE9）工作。

到目前为止，我已经使用了以下元标记，但它不起作用。（也尝试过“IE=8”）

我已经关注了这个线程，但到目前为止还没有运气；

[在 ASP.NET 4.0 站点中设置 X-UA 兼容元标记不起作用](https://stackoverflow.com/questions/3368220/setting-x-ua-compatible-meta-tag-in-asp-net-4-0-site-doesnt-work)

不知道是不是已知bug？ [http://connect.microsoft.com/VisualStudio/feedback/details/581278/setting-x-ua-compatible-meta-tag-in-asp-net-4-0-site-doesn-t-work-yes-它在顶部#](http://connect.microsoft.com/VisualStudio/feedback/details/581278/setting-x-ua-compatible-meta-tag-in-asp-net-4-0-site-doesn-t-work-yes-it-s-at-the-top#)

添加：

如果我从页面标签中删除“StyleSheetTheme”，那么它会以兼容模式呈现。

有什么办法解决吗？

**可能的解决方案：**

如果我在页面加载事件上动态添加元标记并在页面标记中添加样式表值，它会起作用。

> 将 metaTag 调暗为新 HtmlMeta()
> 
> metaTag.Attributes.Add("http-equiv", "X-UA-Compatible")
> 
> metaTag.Attributes.Add("content", "ID=EmulateIE7")
> 
> Page.Header.Controls.AddAt(0, metaTag)

**你认为这是一种正确的做法吗？还有其他更好的解决方案吗？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T19:45:07.780

尝试将标题添加到您的 iis 设置或 web.config 文件中：http: [//blogs.msdn.com/b/deviations/archive/2009/05/07/how-to-enable-ie-8-compatibility-查看您的整个网站或特定网站目录.aspx](http://blogs.msdn.com/b/deviations/archive/2009/05/07/how-to-enable-ie-8-compatibility-view-for-your-whole-web-site-or-for-specific-web-site-directories.aspx)

# java - 使用 Jackson JSON 解析将 TRUE 或 FALSE 转换为布尔值

> ID：12316321
> 
> 赞同：3
> 
> 时间：2012-09-07T10:29:21.270
> 
> 标签：java, json

我正在使用 Jackson 注释将 JSON 响应解析为 POJO 对象。我在 POJO 中使用布尔变量来映射来自 JSON 的值“true”和“false”。但是突然间，我们将值作为“TRUE”和“FALSE”转换为 JSON 并解析这些值失败。任何人都可以建议将其映射到 boolean 的方法，因为这个变量在很多地方我不想将逻辑更改为 String 到 Boolean 。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-08-01T19:56:21.797

这不是一个真正的问题，这基本上是 BeanUtils 的工作方式。

对于`boolean`vars，Jackson`is`从 setter 名称中删除以派生它在编组为 JSON 时期望的变量名称，并添加`set`到相同的派生名称以解组回 POJO。

所以`boolean isFooTrue;`最终会`fooTrue`在编组为 JSON 时结束，而在解组时它会尝试调用`setIsFooTrue();`，这是不正确的。

如果您使用的是 IDE 并生成了 getter/setter，您可能会注意到生成的代码`boolean isFoo;`基本上忽略了`is`var 名称就好像`foo`：

```
private boolean isFoo;

public boolean isFoo() {
    return isFoo;
}

public void setFoo(boolean isFoo) {
    this.isFoo= isFoo;
} 
```

两个选项是`is`从 var 名称中删除 ，或将 添加`is`到 setter 名称中。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-22T13:27:56.943

我在使用 Jackson Parser 1.8.5 时也遇到了类似的问题。Java POJO 到 JSON 的工作，但相同的 JSON 返回到 Java POJO 没有。在 Java POJO 中，如果布尔变量声明为

```
private Boolean isMyVar; 
```

然后杰克逊产生等效的 JSON 作为

```
{..,
"myVar" : false,
..
} 
```

（我知道这里的布尔变量命名是错误的，但是 JAR 是第三方的并且说你不能改变它！）

我认为这是杰克逊解析器设计用于处理布尔值的方式的一个问题。我将 JSON 从 "myVar" : false 更改为 "isMyVar" : false 并且从 JSON 创建回 Java POJO 工作正常。

有谁知道这仍然是一个错误还是已经解决？

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-09-07T10:35:34.177

我不确定这是你想要的。但它有效。

```
Boolean param = Boolean.parseBoolean((String)yourValue); 
```

测试代码是

```
public class program10 {

    public static void main(String args[]) {

        String yourValue = "TRUE"; // This is what you get from json.
        Boolean param = Boolean.parseBoolean((String)yourValue);

        if(param == true) 
            System.out.println("Value is true");
        else
            System.out.println("Value is false");
        System.out.println(param);
    }
} 
```

# c++ - GLFW (x64) 的一个小问题

> ID：12316322
> 
> 赞同：1
> 
> 时间：2012-09-07T10:29:22.220
> 
> 标签：c++, opengl, glew, glfw, lnk2019

我目前正在努力将我的一些应用程序转换为 C++，为此我决定使用 openGL，因为我从其他平台获得了一些使用它的经验。但是让它在 x64 中编译似乎很麻烦。要检查我的链接是否正常工作，我只是想编译本教程：

[http://www.opengl-tutorial.org/beginners-tutorials/tutorial-1-opening-a-window/](http://www.opengl-tutorial.org/beginners-tutorials/tutorial-1-opening-a-window/)

但正如你所看到的，我失败得很惨。我已经下载并安装：

*   自由过剩
*   GLM
*   GLFW
*   GLEW

这个问题显然存在于 GLFW 内部。我正在使用 Visual express c++ 2010。

我这样安装 GLFW：

*   GLFW.dll (System32)
*   glfw.h (C:\Program Files\Microsoft SDKs\Windows\v7.1\Include\gl)
*   GLFW.lib (C:\Program Files\Microsoft SDKs\Windows\v7.1\Lib\x64)
*   GLFWDLL.lib (C:\Program Files\Microsoft SDKs\Windows\v7.1\Lib\x64)

我的链接器：

```
kernel32.lib;glu32.lib;glew32.lib;GLFW.lib;GLFWDLL.lib;opengl32.lib;user32.lib;gdi32.lib;winspool.lib;comdlg32.lib;advapi32.lib;shell32.lib;ole32.lib;oleaut32.lib;uuid.lib;odbc32.lib;odbccp32.lib;%(AdditionalDependencies) 
```

输出：

```
1>------ Build started: Project: Spacecraft, Configuration: Debug x64 ------
1>  Main.cpp
1>Main.obj : error LNK2019: unresolved external symbol __imp_glfwGetWindowParam referenced in function main
1>Main.obj : error LNK2019: unresolved external symbol __imp_glfwGetKey referenced in function main
1>Main.obj : error LNK2019: unresolved external symbol __imp_glfwSwapBuffers referenced in function main
1>Main.obj : error LNK2019: unresolved external symbol __imp_glfwEnable referenced in function main
1>Main.obj : error LNK2019: unresolved external symbol __imp_glfwSetWindowTitle referenced in function main
1>Main.obj : error LNK2019: unresolved external symbol __imp_glfwTerminate referenced in function main
1>Main.obj : error LNK2019: unresolved external symbol __imp_glfwOpenWindow referenced in function main
1>Main.obj : error LNK2019: unresolved external symbol __imp_glfwOpenWindowHint referenced in function main
1>Main.obj : error LNK2019: unresolved external symbol __imp_glfwInit referenced in function main
1>c:\users\leif andreas\documents\visual studio 2010\Projects\Spacecraft\x64\Debug\Spacecraft.exe : fatal error LNK1120: 9 unresolved externals
========== Build: 0 succeeded, 1 failed, 0 up-to-date, 0 skipped ========== 
```

最后，我的包括：

```
// Include standard headers
#include <stdio.h>
#include <stdlib.h>

// Include GLEW
#include <gl/glew.h>
#include <gl/glut.h>

// Include GLFW
#include <gl/glfw.h>

// Include GLM
#include <glm/glm.hpp>
using namespace glm; 
```

# java - GWT Codesplitting 和 PhoneGap

> ID：12316323
> 
> 赞同：2
> 
> 时间：2012-09-07T10:29:23.597
> 
> 标签：java, gwt, cordova, mgwt

我正计划编写一个 GWT 应用程序，该应用程序将部署到 Web 和移动 Web 以及本机设备上的应用程序。为此，我将首先将我的 GWT 编译成 JavaScript，然后使用该`GWT-Phonegap`库来帮助桥接该 JavaScript 以与 PhoneGap API 兼容。

我唯一关心的是代码分割。对于普通浏览器，GWT 允许开发人员指定可以在客户端和服务器之间的不同时间下载的片段。这可以防止大型应用程序作为一个大型单体下载并在浏览器中永远启动。

但是对于原生应用程序（由 PhoneGap 构建），用户将从市场下载应用程序并期望在那时下载所有代码（100%）。

所以我问：如何`GWT-Phonegap`处理代码分割和片段？代码分割命令会以某种方式被忽略吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-07T12:53:14.263

由于 phoneGap 应用程序实际上是一个使用 javascript 和 html 打包的 WebBrowser 组件，我猜想它会像在浏览器中那样工作。唯一的区别是“下载”代码的所有通信都将在同一设备中进行本地通信。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-08T14:49:57.260

使用 Phonegap，您可以将所有资源放入应用程序（HMTML、CSS、JavaScript）。如果您使用的是 gwt-phonegap，您只需将完整的编译器输出（您通常会将其放入 war 文件中）并将其放入您的应用程序中。因此，由于 javascript 是在本地部署的，因此代码拆分没有真正的问题。

# jquery-plugins - Lazyload 插件在 Safari 中不起作用？

> ID：12316324
> 
> 赞同：1
> 
> 时间：2012-09-07T10:29:25.920
> 
> 标签：jquery-plugins, safari, lazy-loading

我在一列图像上使用了 LazyLoad 插件，它在 Chrome 和 Firefox 中运行良好，但在 Safari 5.1.7 中却搞砸了。当滚动过去折叠图像时，第一个`data-original`. 任何想法为什么？

```
$(function() {
  $("img.scale-with-grid").lazyload({
      effect : "fadeIn",
  });
}); 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-03-05T11:27:21.563

尝试将图像的 css 设置为 display:block。

# java - 通过 url fetch 服务从谷歌应用引擎发送 post 请求时，viewstate MAC 的验证失败

> ID：12316329
> 
> 赞同：3
> 
> 时间：2012-09-07T10:29:47.727
> 
> 标签：java, asp.net, google-app-engine, urlfetch

我的任务是从网站获取 html，在我进入需要登录的页面之前。

我使用低级 api url 获取服务。这是我的代码测试代码：

```
private String postPage(String loginPageHtml) throws IOException{
    String charset = "UTF-8";
    Document doc = Jsoup.parse(loginPageHtml);
    Iterator<Element> inputHiddensIter =   doc.select("form").first().select("input[type=hidden]").iterator();

    String paramStr = "";

    paramStr += "Username" + "=" + URLEncoder.encode("username", charset) + "&";
    paramStr += "Password" + "=" + URLEncoder.encode("password", charset) + "&";
    paramStr += "ImageButton1.x" + "=" + URLEncoder.encode("50", charset) + "&";
    paramStr += "ImageButton1.y" + "=" + URLEncoder.encode("10", charset) + "&";

    while (inputHiddensIter.hasNext()) {
        Element ele = inputHiddensIter.next();
        String name = ele.attr("name");
        String val = ele.attr("value");
        paramStr += name + "=" + URLEncoder.encode(val, charset) + "&";
    }

    URL urlObj = new URL(LOG_IN_PAGE);
    URLFetchService fetcher = URLFetchServiceFactory.getURLFetchService();
    HTTPRequest request = new HTTPRequest(urlObj, HTTPMethod.POST);
    HTTPHeader header = new HTTPHeader("Content-Type", "application/x-www-form-urlencoded");
    HTTPHeader header3 = new HTTPHeader("Content-Language", "en-US");
    HTTPHeader header4 = new HTTPHeader("User-Agent", DEFAULT_USER_AGENT);
    if(!cookie.isEmpty()){
        request.addHeader(new HTTPHeader("Set-Cookie", cookie));
    }
    request.addHeader(header);
    request.addHeader(header3);
    request.addHeader(header4);
    request.setPayload(paramStr.getBytes());
    request.getFetchOptions().setDeadline(30d);
    HTTPResponse response = null;

    try{
        response = fetcher.fetch(request);
        byte[] content = response.getContent();

        int responseCode = response.getResponseCode();
        log.severe("Response Code : " + responseCode);
        List<HTTPHeader>headers = response.getHeaders();

        for(HTTPHeader h : headers) {
            String headerName = h.getName();
            if(headerName.equals("Set-Cookie")){
                cookie = h.getValue();
            }
        }

        String s = new String(content, "UTF-8");

        return s;
    }catch (IOException e){
        /* ... */
    }

    return "";
} 
```

这是我的默认用户代理：

```
private static final String DEFAULT_USER_AGENT = "Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/537.1 (KHTML, like Gecko) Chrome/21.0.1180.83 Safari/537.1"; 
```

它在我的开发机器上运行良好，但是当我在应用引擎上部署并测试它时，我得到响应代码 500 和以下错误：

> 视图状态 MAC 验证失败。如果此应用程序由 Web Farm 或集群托管，请确保 > 该配置指定相同的验证密钥和验证算法。>AutoGenerate 不能在集群中使用。
> 
> 说明：执行当前 Web 请求期间发生未处理的异常。请>查看堆栈跟踪以获取有关错误及其源自代码的位置的更多信息。
> 
> 异常详细信息：System.Web.HttpException：视图状态 MAC 验证失败。如果此应用程序 > 由 Web Farm 或集群托管，请确保配置指定相同的 >validationKey 和验证算法。AutoGenerate 不能在集群中使用。

似乎在 ASP 端发生了一些错误。

我的代码有问题还是应用引擎有一些限制？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T13:58:58.290

看起来你正在做一个`POST`aspx 页面。

当一个 aspx 页面收到一个`POST`请求时，它需要一些隐藏的输入，这些输入具有编码的 ViewState - 如果您浏览到有问题的页面并“查看源”，您应该会在`<form />`标签内看到一些看起来像这样的字段：

```
<input type="hidden" name="__EVENTTARGET" id="__EVENTTARGET" value="" />
<input type="hidden" name="__EVENTARGUMENT" id="__EVENTARGUMENT" value="" />
<input type="hidden" name="__VIEWSTATE" id="__VIEWSTATE" value="xxxxxxxxx" /> 
```

因为您提交的`POST`请求没有这些值存在，所以它在解码和验证它们时遇到了问题（这就是该错误的含义 - 在其他情况下它也可能由于其他原因突然出现）。

有几个可能的解决方案：

1 - 如果您有权访问该站点的代码，并且登录页面不需要 ViewState，您可以尝试在`@Page`指令中的页面级别将其关闭：

```
<%@ Page ViewStateMode="Disabled" .... %> 
```

2 - 您可以执行双重请求 -`GET`在登录页面上请求以检索任何缺少的隐藏字段的值 - 使用这些值并将它们包含在您的`POST`

**编辑** 啊，是的，从您的评论中我可以看到您已经包含了隐藏的表单字段 - 抱歉！

在这种情况下，另一种可能是登录页面处于负载平衡环境中。该环境中的每个服务器都将具有不同的`MachineKey`值（用于对 ViewState 进行编码/解码）。您可能正在阅读一个并发布到另一个。一些 LB 将 ArrowPoint cookie 注入到响应中，以确保您在请求之间“坚持”到同一台服务器。

我可以看到你已经在你的 cookie 中包含了一个 cookie `POST`，但我看不到它是在哪里定义的。是来自第一个`GET`请求，还是自定义 cookie？如果您还没有尝试过，也许可以尝试使用`GET`您正在检索登录页面 HTML 的原始 cookie？除此之外，我没有想法 - 对不起！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-12-08T05:49:34.403

通常，当您尝试在 asp.net 上模拟 postBack 时，您需要 POST：

*   从第一个请求 cookie 中保留以作用于同一会话
*   数据字段 ( `login`, `password`)
*   从第一页隐藏的：`__VIEWSTATE`，`__VIEWSTATEENCRYPTED`（即使它是空的！），`__EVENTVALIDATION`
*   如果您发送一些操作项，也许您还需要包含隐藏字段`__EVENTTARGET`和`__EVENTARGUMENT`

# ios - 单击 UIBar 按钮时删除 TabBar 控制器

> ID：12316331
> 
> 赞同：0
> 
> 时间：2012-09-07T10:29:56.677
> 
> 标签：ios, iphone, uiviewcontroller, uitabbarcontroller

在我的应用程序中，首先我有一些登录视图控制器，在使用按钮操作登录后，我正在移动到带有四个选项卡的标签栏控制器。我的问题是，当我单击 barbutton 并需要进入该 loginViewController 时，我需要退出该标签栏控制器。请任何人帮助我。实际上，我已经尝试了一些方法，但我无法理解。在此先感谢您对问题的宝贵解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T10:35:49.543

在 appDelegate 中放置您的 tabBar 并在侧面 loginView 中，添加此 tabBar

```
TUTAppDelegate *appdelegte =(TUTAppDelegate*)[[UIApplication sharedApplication]delegate];

[[appdelegte window]addSubview:[[appdelegte motivationalTabBar]view]]; 
```

在按钮按下删除 TabBar

```
TUTAppDelegate *appDelegate = (TUTAppDelegate *)[[UIApplication sharedApplication] delegate];
[[[appDelegate motivationalTabBar] view]removeFromSuperview] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T11:44:04.147

```
 AppDelegate *delegate = (AppDelegate *) [[UIApplication sharedApplication] delegate];
[delegate.tabBarController.view removeFromSuperview];
[delegate.window addSubview:delegate.loginViewController.view]; 
```

我用这段代码解决了我的问题。希望这对某人有所帮助。

感谢所有答案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-07T10:53:49.750

首先将您的 tabBar 控制器添加到 [appdelegte 窗口]，然后在其上显示 Login View Controller。当用户登录成功时，关闭登录视图控制器。同样，当您单击 barbutton 进入该 loginViewController 时，在 tabBar 控制器上显示 Login View Controller。在这种情况下，无需一次又一次地添加和删除 tabBar。

# ios - Complie 框架仅适用于 armv7？

> ID：12316334
> 
> 赞同：0
> 
> 时间：2012-09-07T10:30:08.800
> 
> 标签：ios, xcode, frameworks, armv7, armv6

嗨，我有一个支持 armv6/armv7 架构的应用程序

我的问题是我有仅适用于 armv7 的 .framework 文件。

我的问题是：如何将 .framework 文件设置为仅针对 arm7 架构进行编译。我将支持 armv6/armv7 两种架构，无法将架构仅设置为 armv7

我目前的错误信息是：

ld：文件是通用的（2 个切片）但不包含 a(n) armv6 切片：$(PROJECT_DIR) 错误：链接器命令失败，退出代码为 1（使用 -v 查看调用）

# java - 使用字符串模板混合类型

> ID：12316340
> 
> 赞同：0
> 
> 时间：2012-09-07T10:30:39.917
> 
> 标签：java, stringtemplate

我正在使用字符串模板组来创建 java 源文件。其中几个类扩展了另一个类，需要调用一个超级方法，该方法可以包含类型的混合，通常`int`是`String`和`Enum`。

```
super(list) ::= <<
super(<stringList(list)>);
>>

stringList(list) ::= <<
<list:{v | <s(v)>}; separator=", ">
>>

s(v) ::= <<
<if (v)><v; format="java-string"><else>null<endif>
>> 
```

我有这些模板来构建一个`super`只包含字符串的方法。如何创建可以处理和的混合`Strings`的模板？`ints``Enums`

# ruby-on-rails - 新帖子的 Rails 通知

> ID：12316342
> 
> 赞同：2
> 
> 时间：2012-09-07T10:30:43.693
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我正在开发一个 Rails 应用程序，用户可以在其中发布，必须喜欢 facebook。我想实现一个通知系统，提醒用户注意新帖子。但是，我在如何判断用户是否查看过帖子时遇到了麻烦。我真的一无所知。

我正在使用 devise gem，它可以让我访问某些用户统计信息（如果有帮助的话）：

```
 create_table "users", :force => true do |t|
    t.string   "email",                  :default => "", :null => false
    t.string   "encrypted_password",     :default => "", :null => false
    t.string   "reset_password_token"
    t.datetime "reset_password_sent_at"
    t.datetime "remember_created_at"
    t.integer  "sign_in_count",          :default => 0
    t.datetime "current_sign_in_at"
    t.datetime "last_sign_in_at"
    t.string   "current_sign_in_ip"
    t.string   "last_sign_in_ip"
    t.string   "confirmation_token"
    t.datetime "confirmed_at"
    t.datetime "confirmation_sent_at"
    t.string   "unconfirmed_email"
    t.integer  "failed_attempts",        :default => 0
    t.string   "unlock_token"
    t.datetime "locked_at"
    t.string   "authentication_token"
    t.datetime "created_at",                             :null => false
    t.datetime "updated_at",                             :null => false
    t.string   "username",               :default => "", :null => false
    t.integer  "admin",                  :default => 0
  end 
```

还有我的帖子模型：

```
 create_table "posts", :force => true do |t|
    t.integer  "user_id"
    t.text     "content"
    t.datetime "created_at",                :null => false
    t.datetime "updated_at",                :null => false
  end 
```

如何实现一个知道用户是否看过帖子的系统？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-07T11:36:34.587

简单的方法是这样的：

创建一个名为**Seen的模型**

```
rails g model Seen post:references user:references 
```

**模型/seen.rb**

```
belongs_to :user
belongs_to :post 
```

**模型/用户.rb**

```
has_many :seens
has_many :seen_posts, through: :seens, source: :post 
```

**模型/post.rb**

```
has_many :seens
has_many :seen_users, through: :seens, source: :user 
```

你可以创建一个类似的方法

**模型/post.rb**

```
def seen_by?(user)
  seen_user_ids.include?(user.id)
end 
```

**控制器/posts_controller.rb**

```
def show
  @post = Post.find(params[:id])
  current_user.seen_posts << @post unless @post.seen_by?(current_user) 
end 
```

# android - 判断是运行 AOSP 还是 Google Android？

> ID：12316346
> 
> 赞同：0
> 
> 时间：2012-09-07T10:30:53.167
> 
> 标签：android

我已经搜索过但找不到这个，虽然主要是知道要搜索什么的挑战，但我敢肯定以前有人问过它。

应用程序如何推断它是在“Google Android”设备还是 AOSP 设备（例如 Kindle Fire 等）上运行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T10:47:15.230

您可以尝试使用`AccountManager`类枚举设备上的现有帐户：[getAccountsByType()](http://developer.android.com/reference/android/accounts/AccountManager.html#getAccountsByType%28java.lang.String%29)`com.google` ，并作为所需的帐户类型传递。如果没有此类型的帐户，则表示它是 AOSP 设备或用户尚未创建 Google 帐户。

如果这对您来说还不够，您可以使用`PackageManager`类并使用[getPackageInfo()](http://developer.android.com/reference/android/content/pm/PackageManager.html#getPackageInfo%28java.lang.String,%20int%29)方法查询一些谷歌特定的包。例如，`com.android.vending`- Google Play 应用程序。

但请注意，这些方法中没有一种可以保证目标设备正在运行 AOSP。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T10:34:31.620

这不是微不足道的，但大多数应用程序甚至不需要关心。如果这样做，则通常意味着您需要一些独特的功能，因此检查某些功能是否存在更简单，而不是设备上的标签。您也可以检查某些包的存在（如 Google Play），但缺少它并不意味着它自动是 Fire。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-07T10:34:36.640

您可以使用 Intent 检查是否可以打开市场 URL。

有关意图附加功能的文档在[此处](https://developer.android.com/distribute/googleplay/promote/linking.html)。

意图看起来像这样：

```
try {
  Intent intent = new Intent(Intent.ACTION_VIEW);
  intent.setData(Uri.parse("market://details?id=com.example.android"));
  //you can use any package identifier for the check.
  startActivity(intent);
} catch (ActvitiyNotFoundException anfe) {
  //There's no market installed.
  //So you can guess that you're not on a device with Google experience
} 
```

这种方法的缺点是，如果可用，用户将被带到 Play 商店。

# jquery - jQuery DIV 翻转

> ID：12316350
> 
> 赞同：2
> 
> 时间：2012-09-07T10:31:04.913
> 
> 标签：jquery, flip, flippy

这是 HTML

```
<article class="post">
    <div class="post-inner">
        <div class="post-content">
            // stuff here   
            <button class="order">Order</button>
        </div>
        <div class="post-content-back">
            // stuff here
            <button class="back">Back</button>
        </div><!-- / .post-back -->
    </div>
</article> 
```

我正在使用这个[Flippy 插件](http://blog.guilhemmarty.com/flippy/)来翻转前后视图，但由于某种我无法理解的原因，它不起作用：

```
jQuery(".post .order").bind("click",function(e){
    e.preventDefault();
    jQuery(this).parents(".post-content").flippy({
        content:jQuery(this).next().find(".post-content-back"),
        direction:"LEFT",
        duration:"750",
        onStart:function(){
            alert("Let's flip");
        },
        onFinish:function(){
            alert("ok, it's flipped :)");
        }
    });
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-07T12:51:54.233

您需要为元素提供`background-color`a `.post-content`。

该插件在 #217 行执行此操作

```
_Color = convertColor($this.css("background-color")); 
```

它正在抓取该`background-color`属性，如果**未**提供该属性，则默认为`rgba(0, 0, 0, 0)`（在 Chrome 上它对我有用）

当翻转第 312 行时，使用这样的颜色字符串：

```
ctx.fillStyle = (_Ang > 90) ? changeColor(_Color_target,Math.floor(Math.sin(rad)*_Light)) : changeColor(_Color,-Math.floor(Math.sin(rad)*_Light)); 
```

并在 #441 行调用`changeColor(colorHex,step)`函数，该函数期望颜色的十六进制值。不提供十六进制字符串会导致脚本在尝试从`rgba(0, 0, 0, 0)`错误中提取红色、绿色、蓝色的十六进制值时爆炸`Uncaught ReferenceError: g is not defined`

该函数尝试使用`gb`红色、 `a(`绿色和`0,`蓝色。

添加了一个[**演示**](http://jsfiddle.net/zMvA5/)，但这是一个相当本地化的问题，所以我认为在这个答案中内联所有代码没有好处。

@tommarshall 的回答也非常相关，因为您在查找`.post-content-back`元素时遇到了选择器问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-07T10:59:20.633

这里的问题是您获取内容的方式。

```
jQuery(this).next().find(".post-content-back"), 
```

这将返回下一个元素（即 .post-content-back），然后查找其中包含 .post-content-back 类的元素。然后你返回的是 jQuery 对象本身而不是内容。

这是你真正想要的：

```
jQuery(this).next(".post-content-back").html(); 
```

但是，最好在初始化 Flippy 插件并将其存储在变量中之前获取内容。

这是一个工作示例 - [http://jsfiddle.net/SqD6x/](http://jsfiddle.net/SqD6x/)

# python - 对 Twitter API 的 Twython (Python) update_with_media 请求

> ID：12316352
> 
> 赞同：0
> 
> 时间：2012-09-07T10:31:08.533
> 
> 标签：python, upload, twitter, twython

我一直在使用 Twython (https://github.com/ryanmcgrath/twython) 发布照片、描述和链接。所以在 Twitter 上它显示为“...描述... ...链接... ...pic.twitter.com/XXX...”

我遇到的问题是这些用于照片上传的 Twitter API 请求经常失败：（403）“禁止：请求被理解，但已被拒绝。随附的错误消息将解释原因。使用此代码当请求因更新限制而被拒绝时。- 创建状态时出错。”

几点注意事项：

*   [https://upload.twitter.com](https://upload.twitter.com)用于上传，一些消息来源表明使用 api.twitter.com 或仅使用 HTTP（无 SSL）可能会导致问题
*   遇到此问题的 Twitter 帐户尚未达到 30 的每日照片上传限制
*   推文不超过 140 个字符（我尝试只对照片进行 2 个字的描述，但仍然失败）

有谁知道出了什么问题？

非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-23T18:41:55.313

我遇到了同样的问题，结果证明，解决方案是发送编码为 UTF-8 的状态消息。我添加了调试打印语句，我的状态输出如下所示：

```
\u042d\u0442\u043e\u0442 \u0441\u0442\u0430\u0442\u0443\u0441 \u0431\u044b\u043b \u043f\u043e\u043b\u0443\u0447\u0435\u043d \u043f\u0430\u0440\u0441\u0438\u043d\u0433\u043e\u043c \u0432\u0435\u0431-\u0441\u0442\u0440\u0430\u043d\u0438\u0446\u044b 
```

要将其转换为 UTF-8，必须执行以下操作：

```
status.decode('unicode-escape').encode('utf-8')

> Этот статус был получен парсингом веб-страницы 
```

# c# - 具有 ext.net 2.0 和 mvc4 的文本字段远程验证具有剃刀语法，如何设置控制器的操作 url

> ID：12316353
> 
> 赞同：2
> 
> 时间：2012-09-07T10:31:18.467
> 
> 标签：c#, razor, asp.net-mvc-4, ext.net

我正在使用带有 mvc 4 的 ext.net 2.0。由于那里完全缺乏示例，我找不到为 textfiels remotevalidation 设置 url 的方法

```
Html.X().TextField()
    .Width(180)
    .IsRemoteValidation(true)
    .Value("Textfield1") 
```

使用aspx时，代码为：

```
<ext:TextField 
    ID="TextField2" 
    runat="server" 
    FieldLabel="Company" 
    AnchorHorizontal="92%"    
    AllowBlank="False" 
    IsRemoteValidation="true" 
    CausesValidation="true">
    <RemoteValidation 
        Url="~/Controller/CheckName" 
        Json="true" Delay="300" >
    </RemoteValidation>
</ext:TextField> 
```

但是在使用剃须刀时没有像 RemoteValidation 这样的东西.....有什么想法吗？

问候，霍尔格

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-09T20:22:09.983

> 但是在使用剃须刀时，没有什么比 RemoteValidation 更好......

已在 v2.1 中修复（2.1 尚未发布）您可以使用以下代码

```
Html.X().TextField().Control(c=>{c.RemoteValidation.Url = ...}) 
```

# ffmpeg - 使用 sox 组合音频

> ID：12316357
> 
> 赞同：1
> 
> 时间：2012-09-07T10:31:31.140
> 
> 标签：ffmpeg, sox

我有三个 3gp 文件，我用 sox 来组合它们

```
sox --combine sequence C:\1.3gp C:\2.3gp C:\3.3gp C:\newaudio.3gp 
```

但它显示“FAIL 格式：文件扩展名没有处理程序`3gp`”

这意味着我必须安装一些扩展程序？

我正在尝试用 sox 来做，有人可以给我任何建议吗？

或者有可能用 ffmpeg 做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T12:13:03.113

`3gp`是一个多媒体容器，不受`sox`.

您可以提取音频`ffmpeg`并进一步处理它，`sox`尽管`ffmpeg`也可以进行大量音频处理。

这是将数据转换为`wav`、连接并转换回的一种方法`3gp`：

```
ffmpeg -i 1.3gp 1.wav
ffmpeg -i 2.3gp 2.wav
ffmpeg -i 3.3gp 3.wav 
```

连接，也许还有其他东西`sox`（顺序是默认的，所以不需要指定）：

```
sox 1.wav 2.wav 3.wav long.wav 
```

转换回`3gp`：

```
ffmpeg -i long.wav newaudio.3gp 
```

# .net - 使通配符适应 .Net 中的 DBMS/Connections

> ID：12316358
> 
> 赞同：0
> 
> 时间：2012-09-07T10:31:36.233
> 
> 标签：.net, connection, wildcard, database

我公司的一位开发人员开发了一个 C# 项目，其中包含在以下 DBMS 上执行 SQL 查询的类：

*   **使用以下连接之一 **访问（扩展名为“.mdb”的 DB 文件） ：**

    *   **ODBC**连接。
    *   一个**OLE DB**连接** 
***   **使用以下连接之一 **访问（扩展名为“.accdb”的 DB 文件） ：**

    *   **ODBC**连接。
    *   **OLE DB**连接。** ***   **DB2**通过使用 ODBC 连接。*   **MySQL**通过使用以下连接之一：
    *   **ADO .Net**连接。
    *   **ODBC**连接。
    *   **OLE DB**连接。*   **Oracle**通过使用以下连接之一：
    *   **ADO .Net**连接。
    *   **ODBC**连接。
    *   **OLE DB**连接。*   **PostgreSQL**通过使用以下连接之一：
    *   **ADO .Net**连接。
    *   **ODBC**连接。*   **SQL Server**通过使用以下连接之一：
    *   **ADO .Net**连接。
    *   **ODBC**连接。
    *   **OLE DB**连接。****

 ****我想实现一种方法，该方法将用于调整 SQL 查询谓词中使用的字符串中的通配符。
然后将执行 SQL 查询。
当开发人员需要使用通配符时，他将使用独立于 DBMS 的已知字符。

通配符可以不同于 DBMS。例子 ：

*   Access 使用的通配符是“*”。
*   SQL Server 使用的通配符是“%”。

但我想知道通配符是否也取决于用于与 DBMS 通信的连接。
ODBC 连接使用的通配符可能与 ADO .Net 连接使用的通配符不同。
我无法对上面列出的每一对 DBMS/Connection 执行测试，因为我无法使用某些 DBMS。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T08:11:05.810

我已经以编程方式为我的第一篇文章中列出的每一对（DBMS/数据提供者）执行了选择查询，除了这对（DB2/ODBC）。
我在选择查询的 where 语句中包含了一个谓词。
我使用了多字符通配符：%
通配符 '%' 适用于我执行测试的每一对（DBMS/数据提供程序）。****

# c# - 通过 xaml 绑定一个类集合属性

> ID：12316364
> 
> 赞同：0
> 
> 时间：2012-09-07T10:32:03.740
> 
> 标签：c#, wpf, xaml, data-binding, itemsource

这是我的全球课程

```
public class Globals
{
    private static Globals instance = new Globals();

    protected Globals()
    {

    }

    public static Globals Instance
    {            
        get { return instance; }
    }

    public TrackList Tracklist = new TrackList();
} 
```

这是智能代码中的 TrackList：

```
public class TrackList : SettingAttribute {
    public TrackList()
    {
        this.tracks = new ObservableCollectionExt<Track>();
    }

    protected ObservableCollectionExt<Track> tracks;

    public ObservableCollectionExt<Track> Tracks
    {
        get
        {
            return tracks;
        }
    }

    public class Track : ICloneable
    {
        protected Track()
        {
            // Track instance is achieved by GetTrack
        }

        public GetTrack(string path)
        {
            // code implementation here
        }
    }
} 
```

我希望使用 XAML 在 ListView 中绑定 Globals.Instance.Tracklist.Tracks。

通过运行时，使用 ItemSource 属性真的很容易

```
lv.ItemsSource = Globals.Instance.Tracklist.Tracks; 
```

但是使用 xaml 我尝试了几个代码，但没有一个是好的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T10:48:52.250

```
ItemsSource="{Binding Tracklist.Tracks, Source={x:Static local:Globals.Instance}}" 
```

Tracklist 必须是一个属性。将您的 Globals 类更改为：

```
public class Globals
{
    private static Globals instance = new Globals();

    protected Globals()
    {
        Tracklist = new TrackList();
    }

    public static Globals Instance
    {
        get { return instance; }
    }

    public TrackList Tracklist { get; private set; }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T10:49:13.700

在您查看模型中创建类型为 Globals 的属性，如下所示：

```
 property Globals Globals {get;set;} 
```

在 XAML 中绑定到它：

```
 <ListView ItemsSource="{Binding Path=Globals.Instance.Tracklist.Tracks}"> 
```

# java - 如何显示全息主题的活动圈？

> ID：12316365
> 
> 赞同：35
> 
> 时间：2012-09-07T10:32:04.590
> 
> 标签：java, android, android-progressbar

我试图展示一个像这样的不确定的活动圈：

![在此处输入图像描述](../Images/2c8c55bbe05b68b24b7bb862903f9a00.png)

这是布局代码：

```
<ProgressBar
    android:id="@+id/progress"
    style="@style/GenericProgressIndicator"
    android:layout_width="wrap_content"
    android:layout_height="fill_parent"
    android:layout_gravity="center_vertical|center_horizontal"
    android:visibility="gone" /> 
```

这是样式代码：

```
<style name="GenericProgressIndicator" parent="@android:style/Widget.ProgressBar.Large">
    <item name="android:layout_width">wrap_content</item>
    <item name="android:layout_height">wrap_content</item>
    <item name="android:indeterminate">true</item>
</style> 
```

我的圈子看起来不像您在 Gmail 应用或 Play 应用中看到的 Holo 主题圈子。我究竟做错了什么？如何获得好看的 Holo 动画活动圈？

* * *

## 回答 #1

> 赞同：57
> 
> 时间：2012-09-07T13:11:29.997

这真的没有在任何地方记录，我是通过一些随机文章找到的。添加此样式属性可以解决问题：

```
style="?android:attr/progressBarStyleLarge" 
```

开发人员文档中对此的唯一参考是[here](http://developer.android.com/reference/android/R.attr.html#progressBarStyleLarge)。

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2013-01-04T10:22:45.577

您的第一个布局是正确的，但您选择了错误的样式。正确的是：

```
style="@android:style/Widget.Holo.Light.ProgressBar.Large" 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-07T10:50:57.653

你用的是什么版本的安卓？如果您使用的不是 Holo 版本，您将无法使用 Holo 样式显示内容。一个解决方案是使用像 ActionBarSherlock 这样的库，它将 Holo 主题反向移植到以前的 Android 版本。

# java - 为什么我的 java ping 方法只适用于我的计算机？（Windows 机器测试）

> ID：12316367
> 
> 赞同：1
> 
> 时间：2012-09-07T10:32:10.230
> 
> 标签：java, windows, ping

我用 Java 编写了以下 ping 函数供 Windows 使用，它可以在我自己的计算机上完美运行。不幸的是，我不知道为什么，但是在其他计算机（Windows 机器）上，当我运行它时，**它会返回 "null"**。

例如，这会被 Windows 防火墙阻止吗？会不会是windows版本的问题？从XP到windows8，还是不同的语言版本？

在我的电脑上，我收到这样的结果：time=19ms TTL=111

有人可以启发我，为什么它会失败？

```
 private String ping() {

        String ip = "<external IP of a server running, always online>";
        String time = null;
        String pingCommand = "ping " + ip;
        ProcessBuilder builder = new ProcessBuilder(new String[] {"cmd.exe", "/C",pingCommand});
    try {
        Process newProcess = builder.start();
            BufferedReader in = new BufferedReader(new InputStreamReader(newProcess.getInputStream()));
            String inputLine = in.readLine();
            while ((inputLine != null)) {
                if (inputLine.length() > 0) {
                    if(inputLine.contains("time")){
                        // Checking for the time only
                        time = inputLine.substring(inputLine.indexOf("time"));
                        break;
                    }
                }
                inputLine = in.readLine();
            }
    } catch (IOException ex) {
        Logger.getLogger(main.class.getName()).log(Level.SEVERE, null, ex);
    }
    return time; 
} 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-09-07T11:04:10.927

您可以使用 Runtime 类来运行 Windows 命令。请参阅此示例；

```
 private String ping() {
       Runtime rt = Runtime.getRuntime();   
       String time = null;
       String pingCommand = "cmd.exe /C ping yourIpAddress";
       try {
            Process newProcess = rt.exec(pingCommand);
            BufferedReader in = new BufferedReader(new InputStreamReader(
                newProcess.getInputStream()));
            String inputLine = in.readLine();
            while ((inputLine != null)) {
                  if (inputLine.length() > 0) {
                     if (inputLine.contains("time")) {
                     // Checking for the time only
                         time = inputLine.substring(inputLine.indexOf("time"));
                               break;
                             }
                        }
                    inputLine = in.readLine();
        }
    } catch (IOException ex) {
    }
    return time;
} 
```

# jakarta-ee - 显示选定项目的数据（JSF、Primefaces）

> ID：12316369
> 
> 赞同：0
> 
> 时间：2012-09-07T10:32:26.737
> 
> 标签：jakarta-ee, jsf-2, primefaces, mojarra

我在使用 Primefaces 对话在对话中显示所选项目的数据时遇到问题。setSelectedUsers 方法将触发，但对话框不会显示用户对象的数据。知道我在这里缺少什么！我查看了 primefaces 展示，我看不出我在哪里做错了！

Primefaces 3.4、Mojarra 2.1、Java EE 6

我将不胜感激任何帮助。谢谢

```
<h:form prependId="false">
            <p:dataTable id="dataTable" var="user" value="#{userController.lazyModel}" styleClass="userDataTableStyle"
                    paginator="true" rows="10" selection="#{userController.selectedUsers}"
                    paginatorTemplate="{CurrentPageReport}  {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                    lazy="true" rowsPerPageTemplate="10,50,100,150">
            <f:facet name="header">
                User List
            </f:facet>
            <f:facet name="header">  
               Selection 
            </f:facet>  
            <p:column selectionMode="multiple" style="width:18px" />  
            <p:column>
                <f:facet name="header">
                    <h:outputText value="Username" />
                </f:facet>
                <p:commandLink value="#{user.username}" oncomplete="userDialog.show()"  title="View">
                    <f:setPropertyActionListener value="#{user}" target="#{userController.selectedUser}" />    
                </p:commandLink>
            </p:column>

            <p:column>
                <f:facet name="header">
                    <h:outputText value="Firstname" />
                </f:facet>
                <h:outputText value="#{user.firstname}" />
            </p:column>

            <p:column>
                <f:facet name="header">
                    <h:outputText value="Lastname" />
                </f:facet>
                <h:outputText value="#{user.lastname}" />
            </p:column>

            <p:column>
                <f:facet name="header">
                    <h:outputText value="Email" />
                </f:facet>
                <h:outputText value="#{user.email}" />
            </p:column>
            <f:facet name="footer">
                <p:commandButton value="Create User" action="/admin/NewUser.xhtml?faces-redirect=true" ajax="false" icon="ui-icon-star"/>
                <p:commandButton value="Delete Users" actionListener="#{userController.doDeleteUsers}" update="dataTable" icon="ui-icon-trash"/>
            </f:facet>
        </p:dataTable>
        <p:dialog header="Car Detail" widgetVar="userDialog" resizable="false" id="userDlg" >  
            <h:panelGrid id="display" columns="2" cellpadding="4" style="margin:0 auto;">   
                <h:outputText value="Username" />  
                <h:outputText value="#{userController.selectedUser.username}" style="font-weight:bold"/>   
            </h:panelGrid>  
      </p:dialog> 
     </h:form> 
```

Java 代码

```
@ManagedBean(name="userController")
@ViewScoped
public class UserController implements Serializable  {

        private @EJB UserEJB userEJB;     
        private User[] selectedUsers; 
        private List<User> lazyUserList;     
        private Address address = new Address();
        private User user = new User();
        private User selectedUser;
        private LazyDataModel<User> lazyModel; 

    public UserController() {
            lazyModel = new LazyUserDataModel(lazyUserList);
    }

        public String doNewUser() {
            return "admin/NewUser.xhtml?faces-redirect=true";
        }

        public String doCreateUser() {
            userEJB.persistUser(user);
            return "UserList.xhtml?faces-redirect=true";
        }

        public void doDeleteUsers(ActionEvent actionEvent){
            userEJB.deleteUsers(selectedUsers);
        }

        public User getSelectedUser() {  
            return selectedUser;  
        }  

        public void setSelectedUser(User selectedUser) {  
            this.selectedUser = selectedUser;  
        } 

        public User[] getSelectedUsers() {  
            return selectedUsers;  
        }  

        public void setSelectedUsers(User[] selectedUsers) {  
            this.selectedUsers = selectedUsers;  
        }  

        public void onRowSelect(ActionEvent event) {
            if(selectedUser == null)
                return;
            String userName = selectedUser.getUsername();
        }

        public Address getAddress() {
            return address;
        }

        public void setAddress(Address address) {
            this.address = address;
        }

        public User getUser() {
            return user;
        }

        public void setUser(User user) {
            this.user = user;
        }

    public List<User> getUsers() {
        return lazyUserList;
    }

        public LazyDataModel<User> getLazyModel() {
            return lazyModel;
        }        
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T12:37:00.863

在 commandLink 中，您必须更新对话框内容 (update="display")：

```
<p:commandLink value="#{user.username}" update="display" oncomplete="userDialog.show()" title="View">
      <f:setPropertyActionListener value="#{user}" target="#{userController.selectedUser}" />    
</p:commandLink> 
```

# c#-4.0 - 查询字符串在 Asp.net 中的使用

> ID：12316370
> 
> 赞同：0
> 
> 时间：2012-09-07T10:32:33.820
> 
> 标签：c#-4.0, c#-3.0, asp.net-4.0, asp.net-3.5

我正在使用查询字符串方法将值从一页传递到另一页。代码是`Response.Redirect("~/Default.aspx?FirstName=" +Server.UrlPathEncode(TextBox1.Text) + "&LastName=" +TextBox2.Text.Replace(" ","%20") + "");`，但值没有隐藏在地址栏上。我可以在下一页的地址栏上取值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T11:03:57.603

这个问题对我来说不是很清楚，但是如果您在页面之间传递参数以及显示/隐藏此参数时遇到问题，那么您应该阅读有关 GET 和 POST 方法的信息。这是与您的问题类似的问题：[GET and POST in asp.net](https://stackoverflow.com/questions/2242537/get-and-post-in-asp-net)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-29T08:59:06.917

如果您的唯一目标是有一种方法来维护跨页面的值，那么您可以使用[Sessions](http://msdn.microsoft.com/en-us/library/ms178581%28v=vs.100%29.aspx)。

# android - Webview 放大缩小功能

> ID：12316371
> 
> 赞同：0
> 
> 时间：2012-09-07T10:32:39.457
> 
> 标签：android, android-layout, android-intent

我有关于 webview 的放大和缩小功能的任务。我有两个进出按钮。我想在仅对按钮进行点击操作时进行缩放。但我得到了默认的缩放功能 webView.getSettings().setBuiltInZoomControls(true);

单击这两个按钮时我应该怎么做才能获得缩放..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T16:49:38.573

```
wb.getSettings().setBuiltInZoomControls(true); or false 
```

希望这可以帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T10:40:17.950

您可能需要子类化 webview 并覆盖 onTouchEvent 并忽略您不想处理的触摸

# c# - 仅包含 0 和 1 值的数组

> ID：12316380
> 
> 赞同：-1
> 
> 时间：2012-09-07T10:33:29.723
> 
> 标签：c#, arrays, data-structures

我需要一个仅包含值 0 和 1 的数组。`bool[]`对我来说足够好吗？或者有没有更轻的东西？

**编辑：**

我没有内存限制，但是该数组是制作并在线传递的，大文件与该数组同时传递。我想要最大优化，这样大文件就不会被延迟

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T10:35:38.560

布尔可能不是最好的方法。取决于你有多少号码。

重要的是要认识到，即使 bool 是单个位，它也需要内存中的一个完整字节。

另一方面，BitArray 会为您解决这个问题，并且更节省空间，尽管时间效率略低。 [http://msdn.microsoft.com/en-us/library/system.collections.bitarray.aspx](http://msdn.microsoft.com/en-us/library/system.collections.bitarray.aspx)

取决于您的约束，如果它不是用于受约束的环境，则 bool 数组将可以正常工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-07T10:34:26.973

布尔数组已经足够好了。您可以将“假”视为`0`，将“真”视为`1`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-07T10:35:03.630

可能你需要 [BitArray](http://msdn.microsoft.com/en-us/library/system.collections.bitarray.aspx)`1` ，和的序列`0`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-07T10:40:40.150

`bool[]`可以解决问题...如果您的 0 和 1 数字实际上只是“标志”而不是实数。

使用`Enum`带有`Flags`属性的 an 是另一种选择。这将允许您`Intention Revealing Name`对两个布尔值都有一个。

```
[Flags()]
public enum TheFlags
{
    NoneSet = 0,
    FirstSet = 1,
    SecondSet = 2
} 
```

然后您可以检查“First”是否设置如下：

```
TheFlags flags = TheFlags.FirstSet;
if (flags.HasFlag(TheFlags.FirstSet))
    Console.WriteLine("First flag is set!"); 
```

# java - GWT Bean 验证 (jsr-303) 和 xml 配置

> ID：12316386
> 
> 赞同：2
> 
> 时间：2012-09-07T10:33:52.570
> 
> 标签：java, xml, gwt, bean-validation

我正在为 GWT 项目构建一种验证框架。

关键是为客户端和服务器端重用相同的验证代码。我发现 GWT( [here](http://code.google.com/p/gwt-validation/wiki/GWT_Validation_2_0) ) 和 Spring( [here](http://static.springsource.org/spring/docs/3.0.0.RC3/reference/html/ch05s07.html) ) 都支持 jsr-303 Bean Validation。

由于生成了我的模型对象并且我无法正确注释它们，我想使用基于 xml 的配置进行 jsr-303 Bean 验证。但是，我看不到使用 gwt-validation 的方法。

有没有办法使用 xml 而不是注释来配置 gwt-validation？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T13:45:21.683

看起来还没有办法做到这一点。

# mysql - 计算文本字段 Django 中短语的出现次数

> ID：12316389
> 
> 赞同：0
> 
> 时间：2012-09-07T10:33:55.587
> 
> 标签：mysql, django

如何`MyModel`根据文本字段中某个短语的出现次数过滤我的模型`MyModel`

我想这不能用 django orm 完成，也许 SQL 查询可以帮助？

就像是：

```
MyModal.objects.extra(count="SQL query that finds occurence count of a certain phrase in certain model field") 
```

一个完整的原始查询也很好。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T10:49:14.933

试试这个：

```
set @str='a b a c';
select length(@str)-length(replace(@str,'a','')) as 'number of occuarence' 
```

# log4j - 在 log4j 中使用 RollingFileAppender、DailyRollingFileAppender、ConsoleAppender。不工作

> ID：12316393
> 
> 赞同：3
> 
> 时间：2012-09-07T10:34:12.790
> 
> 标签：log4j

我的要求是将消息记录到 3 个单独的日志文件中。

我在 JBOSS 服务器中使用 3 个附加程序。

其中三个需要以 1.RollingFileAppender 等方式工作，consoleAppender 工作于 'INFO' 和 'ERROR' 模式。2.DailyRollingFileAppender 仅适用于“错误”模式和特定类别。

我已经尝试了很多组合，例如更改优先级值和类别，但到目前为止我还没有发现所有这三种方法都可以同时工作。fileAppender 和 ConsoleAppender 都可以工作（同时记录 ERRROR 和 INFO），而 DailyRollingFileAppender 不工作，或者 DailyRollingFileAppender 工作，但其他两个只记录错误而不记录信息。

请告诉我一种方法，以便他们三个工作。

下面提到的是我正在使用的 log4j.xml。

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE log4j:configuration SYSTEM "log4j.dtd">

<!-- ===================================================================== -->
<!--                                                                       -->
<!--  Log4j Configuration                                                  -->
<!--                                                                       -->
<!-- ===================================================================== -->

<!--  -->

<!--
   | For more configuration infromation and examples see the Jakarta Log4j
   | owebsite: http://jakarta.apache.org/log4j
 -->

<log4j:configuration xmlns:log4j="http://jakarta.apache.org/log4j/" debug="false">

  <!-- file appender -->
  <appender name="fileAppender" class="org.apache.log4j.RollingFileAppender">
    <param name="file" value="C:/logs/mdmWSServer.log" /> 
    <param name="MaxBackupIndex" value="5" />
    <param name="MaxFileSize" value="5MB" />
    <layout class="org.apache.log4j.PatternLayout">
         <param name="ConversionPattern" value="[%d{ISO8601}] [%t] [%-5p][ %c:] %m%n"/>
    </layout>
  </appender> 

     <appender name="dailyFileAppender" class="org.apache.log4j.DailyRollingFileAppender">
      <param name="file" value="C:/logs/dailyApp.log"/>
    <param name="MaxBackupIndex" value="5" />
    <param name="MaxFileSize" value="5MB" />
     <param name="DatePattern" value="'.'yyyy-MM-dd-HH" />
    <layout class="org.apache.log4j.PatternLayout">       
        <param name="ConversionPattern" value="[%d{ISO8601}] [%t] [%-5p][%c:] %m%n"/>
    </layout>
  </appender> 

  <appender name="consoleAppender" class="org.apache.log4j.ConsoleAppender">
    <layout class="org.apache.log4j.PatternLayout">
        <param name="ConversionPattern" value="[%d{ISO8601}] [%t] %m%n"/>
    </layout>
  </appender> 

   <category name="com">
      <priority value="INFO"/>
      <appender-ref ref="fileAppender"/>
      <appender-ref ref="consoleAppender"/>
  </category> 
    <category name="com.gsk">    
    <priority value="ERROR"/>
      <appender-ref ref="dailyFileAppender"/>
  </category>
  <category name="org.apache">
      <priority value="INFO"/>
      <appender-ref ref="fileAppender"/>
  </category>

  <root>
    <priority value="DEBUG"/>
    <appender-ref ref="fileAppender"/>
    <appender-ref ref="consoleAppender"/>
  </root>
</log4j:configuration> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T05:27:13.137

`filter class`您可以通过指定要记录的级别来限制附加程序仅记录某个级别。请参阅下面的示例代码

```
 <appender name="TRACE" class="org.apache.log4j.ConsoleAppender">
            <layout class="org.apache.log4j.PatternLayout">
                    <param name="ConversionPattern" value="[%t] %-5p %c - %m%n" />
            </layout>
            <filter class="org.apache.log4j.varia.LevelRangeFilter">
                    <param name="levelMin" value="DEBUG" />
                    <param name="levelMax" value="DEBUG" />
            </filter>
    </appender> 
```

# sql - 金钱数据类型的 SQL Server 逗号分隔符

> ID：12316400
> 
> 赞同：2
> 
> 时间：2012-09-07T10:34:48.297
> 
> 标签：sql, sql-server, ssis, delimiter

我通过 SSIS 将 Excel 文件导入 SQL-Server。我有一个临时表来获取 nvarchar 中的所有内容。然后，对于四列，我将字符串转换为货币类型并放入我的目标表中。

在我的临时表中，这四列之一让我称之为 X 有一个逗号作为分隔符，其余的有一个点。不要问我为什么，我的 SSIS 设置中的所有内容都是一样的。在我的 Excel 中，分隔符也是逗号。

因此，现在在我的目标表中，我将所有内容都放在逗号值中，但是 X 列现在将逗号向右移动了两个位置，如下所示：

**537013,00**而不是**5370,13**，这是 temp 和 excel 列中的原始单元格值。

我在想这是一个文化设置问题，但它应该或不应该在所有这些列上工作。

a) 为什么当我的 Excel 显示逗号​​时，我的临时表中会收到点值？

b）我该如何解决这个问题？我可以用点替换临时表中的“，”吗？

**更新**

我想我找到了原因，但没有找到解决方案：

在excel的这个X列中，前三个单元格是空的 - 其他三列都以0开头。如果我用0填充这三个X单元格，那么我也会在我的临时表中得到点，在我的目标表中得到正确的值. 但当然我必须按原样使用 Excel 文件。有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T10:43:32.680

试试下面的代码。它检查被转换为货币的字符串值是否是数字数据类型。如果字符串值是数字数据类型，则将其转换为货币数据类型，否则返回 NULL 值。它还替换了字符串值的小数符号和数字分组符号，以匹配 SQL Server 的预期小数符号和数字分组符号。

```
DECLARE @MoneyString VARCHAR(20)
SET @MoneyString = '$ 1.000,00'
SET @MoneyString = REPLACE(REPLACE(@MoneyString, '.', ''), ',', '.')
SELECT CAST(CASE WHEN ISNUMERIC(@MoneyString) = 1
                 THEN @MoneyString
                 ELSE NULL END AS MONEY) 
```

至于你得到逗号而不是点的原因，我不知道。我的第一个猜测是文化背景，但你已经检查过了。谷歌搜索怎么样，你得到了一些结果吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T10:46:09.403

首先，SQL 中的“分隔符”是小数点：它唯一使用逗号的 excel。您可以更改 excel 中的格式：您应该将 excel 列格式化为货币并指定小数点作为分隔符。然后在 SSIS 导入向导中拆分列的转换，以便将其导入到货币数据类型。它是一种文化的东西，但分隔符往往用于表示一列的结尾和下一列的开始（如在 csv 中）

高温高压

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-08T11:12:13.363

那是excel长期存在的问题。它使用前 30 行左右来推断数据类型。它可能导致无穷无尽的问题。我认为您的解决方案必须是按照 Yaroslav 建议的方式将所有内容作为字符串处理，或者提供一个 excel 模板来预定义数据和格式化数据类型列，然后插入这些值。它是一个皮塔饼。

# azure - 在没有 .NET 的 Windows Azure 中启用诊断

> ID：12316402
> 
> 赞同：1
> 
> 时间：2012-09-07T10:35:04.207
> 
> 标签：azure, azure-diagnostics

我正在使用 Windows Azure 来托管我的 python 项目，并且我正在尝试启用诊断但没有好的结果。

因为我使用的是 python 而不是 .NET，所以我可以实际配置它的唯一方法是通过配置文件。

在我的配置文件下面：

**服务定义.csdef**

```
...
<Imports>
    <Import moduleName="Diagnostics" />
</Imports>
... 
```

**服务配置.Cloud.cscfg**

```
....
<Setting name="Microsoft.WindowsAzure.Plugins.Diagnostics.ConnectionString" value="DefaultEndpointsProtocol=https;AccountName=<my-account-name>;AccountKey=<my-account-key"/>
.... 
```

**诊断.wadcfg**：

```
<DiagnosticMonitorConfiguration xmlns="http://schemas.microsoft.com/ServiceHosting/2010/10/DiagnosticsConfiguration"
      configurationChangePollInterval="PT10M"
      overallQuotaInMB="1200">

   <DiagnosticInfrastructureLogs bufferQuotaInMB="100"
      scheduledTransferLogLevelFilter="Warning"
      scheduledTransferPeriod="PT5M" />

   <Logs bufferQuotaInMB="200"
      scheduledTransferLogLevelFilter="Warning"
      scheduledTransferPeriod="PT5M" />

   <Directories bufferQuotaInMB="600" 
      scheduledTransferPeriod="PT5M">

      <CrashDumps container="wad-crash-dumps" directoryQuotaInMB="200" />
      <FailedRequestLogs container="wad-frq" directoryQuotaInMB="200" />
      <IISLogs container="wad-iis" directoryQuotaInMB="200" />
   </Directories>
   <WindowsEventLog bufferQuotaInMB="200"
      scheduledTransferLogLevelFilter="Warning"
      scheduledTransferPeriod="PT5M">

      <DataSource name="System!*" />
   </WindowsEventLog>
</DiagnosticMonitorConfiguration> 
```

在诊断管理器中，我实际上看不到任何数据。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T16:23:54.450

请问您的 diagnostics.wadcfg 位于何处？对于常规工作角色，diagnostics.wadcfg 必须位于根文件夹中，并且因为您的项目中没有工作角色模块，所以角色文件夹体系结构的位置非常重要。确保您的 Python 应用程序中的文件夹结构与常规工作角色完全相同，然后将 diagnostics.wadcfg 放入角色根文件夹中。（将该信息添加回您的问题以进行验证）

您是否看到在 *.Diagnostics.ConnectionString 中配置的 Windows Azure Blob 存储中创建了诊断配置 XML。这是一项检查，表明 Azure 角色中的诊断组件能够读取提供的配置，并可以在目标 blob 存储中创建配置 XML（相同的 Azure 存储将用于写入日志 Azure 表存储）。请核实。

最后，您的 diagnostics.wadcfg 需要做更多的工作。由于这是一个非 .net 辅助角色，您已经配置了 IIS 日志记录（您真的有 IIS 在辅助角色中运行吗？）并且还安排系统事件日志传输“仅警告”，因此如果没有警告。最后将日志传输时间设置为 5 分钟，这在测试期间很长。

我可以建议如下测试诊断是否有效：

*   如果没有运行 Azure VM 的 IIS，请删除 IIS 日志
*   将事件日志 DataSource 从 System!* 替换为 Application!* 并将过滤器设置为 Info 级别
*   将日志传输时间更改为不到一分钟
*   使用连接到实际 Azure 存储的诊断连接字符串在 Development Fabric 中运行完全相同的代码。
*   在您的计算机中添加自定义事件日志，并查看它们是否在时限内传输到 Azure 表存储并创建特定表

以上应该可以帮助您解决问题。

# c# - 异步替代

> ID：12316403
> 
> 赞同：2
> 
> 时间：2012-09-07T10:35:06.723
> 
> 标签：c#, windows-phone-7, async-ctp, onedrive

我正在尝试在我的应用程序中实现此代码以将数据备份到 skydrive [http://netitude.bc3tech.net/2012/07/11/skydrive-backup-of-your-mobile-applets-get-some-common-ground /](http://netitude.bc3tech.net/2012/07/11/skydrive-backup-of-your-mobile-applets-get-some-common-ground/)

但是我如何无法安装 Async CTP（我在 2-3 天内进行了测试，但 async ctp 没有安装好……我已经尝试过解决方案，但问题仍然存在）。可以做同样的事情但不使用异步吗？如何等待完成任务才能继续？

使用这些工具“Windows Phone SDK 7.1 和 7.1.1 更新”：[https ://dev.windowsphone.com/en-us/downloadsdk](https://dev.windowsphone.com/en-us/downloadsdk)

(...)

```
var rootFolders = JObject.Parse((await client.GetAsyncTask("/me/skydrive/files?filter=folders,albums")).RawResult);
var progDataFolder = rootFolders["data"].FirstOrDefault(f => f.Value<string>("name").Equals("programdata", StringComparison.OrdinalIgnoreCase));
string progDataFolderId;
if (progDataFolder == null)
{
    var result = await client.PostAsyncTask("me/skydrive/",
        new Dictionary<string, object>() { { "name", "ProgramData" } });**

    progDataFolderId = JObject.Parse(result.RawResult).Value<string>("folder_id");
}
else
{
    progDataFolderId = progDataFolder.Value<string>("id");
}

var windowsPhoneFolder = JObject.Parse((await client.GetAsyncTask(string.Concat("/", progDataFolderId, "/files?filter=folders,albums"))).RawResult)["data"]
    .FirstOrDefault(f => f.Value<string>("name").Equals("windows phone", StringComparison.OrdinalIgnoreCase));
string windowsPhoneFolderId;
if (windowsPhoneFolder == null)
{
    var result = await client.PostAsyncTask(string.Concat("/", progDataFolderId),
        new Dictionary<string, object>() { { "name", "Windows Phone" } });**

    windowsPhoneFolderId = JObject.Parse(result.RawResult).Value<string>("id");
}
else
{
    windowsPhoneFolderId = windowsPhoneFolder.Value<string>("id");
} 
```

(...)

替代执行此操作。例子：

```
var result = await client.PostAsyncTask("me/skydrive/",
            new Dictionary<string, object>() { { "name", "ProgramData" } }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T11:36:00.150

如果你有`Task`s，你可以使用所谓的“延续传递风格”。本质上，在任何你会使用的地方`await`，你都会调用`Task.ContinueWith`并传入你的方法的其余部分。循环更复杂，但也可以用延续来处理。

请注意，`GetAsyncTask`如果您没有正确安装异步 CTP，则可能无法正常工作。因此，在您的情况下，我建议您使用该类已经支持的[基于事件的异步模式（EAP）](http://msdn.microsoft.com/en-us/library/wewwczdw.aspx)`LiveConnectClient`：例如，订阅`GetCompleted`事件然后调用`GetAsync`. 有关示例，请参见[这篇文章。](http://blogs.msdn.com/b/shelly_guos_ms_blog/archive/2011/09/20/get-started-on-live-sdk-for-windows-phone.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T14:07:44.490

假设相同的代码不使用任何仅在新版本框架中可用的方法，您可以简单地使用 TPL 方法来重现所做的事情`await`。 `await`使用执行 await 的代码的同步上下文运行延续。因此，要复制它，您需要使用接受 TaskScheduler 并从当前上下文传入 TaskScheduler 的 ContinueWith 重载。例如：

```
TaskScheduler taskScheduler = TaskScheduler.FromCurrentSynchronizationContext();
client.PostAsyncTask("me/skydrive/", new Dictionary<string, object>() {{"name", "ProgramData"}})
    .ContinueWith(t =>
                    {
                    progDataFolderId= JObject.Parse(result.RawResult).Value<string>("folder_id");
                    }); 
```

`await`现在，这是使用任务调度程序将一个转换为 TPL 方法的简单部分。编译器实际上在做的是在你的`async`方法（包含所有`await`代码的方法）中创建一个状态机。该状态机已将您的原始代码分解为多个块并跟踪各种事情`progDataFolder == null`，例如因为在您的情况下，可以以两种不同的方式调用第一个 else 之后的代码。一种是异步的——如果`progDataFolder`为空，则异步调用else之后的代码，如果`progDataFolder`不为null，`progDataFolderId`则从实例中设置，并且*同步*`progDataFolder`涉及else之后的代码*. 因此，您必须使用 TPL 方法正确地进行模式化。`progDataFolder`即当is not时，您不会在 else 之后继续运行代码`null`。*

# ios - 如果其中有“内容”文件夹，为什么我的捆绑包不能使用？

> ID：12316405
> 
> 赞同：0
> 
> 时间：2012-09-07T10:35:15.860
> 
> 标签：ios, xcode, macros, bundle

我的包名称是“sdk.bundle”。我使用此代码获取捆绑包：

```
NSBundle * bundle = [NSBundle bundleWithPath:[[NSBundle mainBundle] pathForResource:@"sdk" ofType:@"bundle"]];
NSString * filePath = [bundle pathForResource:@"bg" ofType:@"png"]; 
```

捆绑包具有值。我可以打印包的绝对路径。但是 filePath 是 nil。这是我的包的结构：

```
SampleApp.app
   |----SampleApp
   |----Info.plist
   |----sdk.bundle
   |        |----Contents
   |        |        |----Resources
   |        |                 |----1.png
   |        |                 |----2.png
   |        |----bg.png
   |        |.....
   |...... 
```

当我删除 Contents 文件夹时，一切正常！filePath 有值。任何人都可以给我一些打击吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T11:15:45.530

您正在向 NSBundle 对象询问`pathForResource:`. 这显式地在包的 Contents/Resources 文件夹中查找。但是，似乎有一种回退方式，只是查看捆绑包的根目录。

我怀疑这是因为在 OS X 上，捆绑包总是有 Contents 文件夹。但是，在 iOS 上，如果没有 Contents 文件夹，它们不会这样，它只会在根文件夹中查找。

> 该方法首先在指定包的非本地化资源目录中查找匹配的资源文件。（在 OS X 中，此目录通常称为 Resources，但在 iOS 中，它是主包目录。）如果找不到匹配的资源文件，它会查找任何可用的特定语言“.lproj”目录的顶层. （特定语言目录的搜索顺序与用户的偏好相对应。）它不会在这些位置的任何其他子目录中递归。

[源 NSBundle 文档](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/Foundation/Classes/NSBundle_Class/Reference/Reference.html#//apple_ref/doc/uid/20000214-BCIBAHJF)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T10:38:26.000

每个应用程序内部都有一个 Contents 文件夹。您甚至可以在您的 Mac 上看到这一点，右键单击应用程序并选择显示包内容，您将在其中看到一个“内容”文件夹。

# c# - 线程安全的 C# 单例模式

> ID：12316406
> 
> 赞同：93
> 
> 时间：2012-09-07T10:35:25.050
> 
> 标签：c#, design-patterns, singleton

我对这里记录的单例模式有一些疑问：http: [//msdn.microsoft.com/en-us/library/ff650316.aspx](http://msdn.microsoft.com/en-us/library/ff650316.aspx)

以下代码摘自文章：

```
using System;

public sealed class Singleton
{
   private static volatile Singleton instance;
   private static object syncRoot = new object();

   private Singleton() {}

   public static Singleton Instance
   {
      get 
      {
         if (instance == null) 
         {
            lock (syncRoot) 
            {
               if (instance == null) 
                  instance = new Singleton();
            }
         }

         return instance;
      }
   }
} 
```

具体来说，在上面的例子中，是否需要在锁之前和之后将 instance 与 null 进行两次比较？这是必要的吗？为什么不先执行锁定并进行比较？

简化为以下是否有问题？

```
 public static Singleton Instance
   {
      get 
      {
        lock (syncRoot) 
        {
           if (instance == null) 
              instance = new Singleton();
        }

         return instance;
      }
   } 
```

执行锁是否昂贵？

* * *

## 回答 #1

> 赞同：148
> 
> 时间：2012-09-07T10:38:19.327

与简单的指针检查相比，执行锁定*非常*`instance != null`昂贵。

您在此处看到的模式称为[双重检查锁定](http://en.wikipedia.org/wiki/Double-checked_locking)。它的目的是避免昂贵的锁操作，这种操作只需要一次（当第一次访问单例时）。实现是这样的，因为它还必须确保在初始化单例时不会出现线程竞争条件导致的错误。

可以这样想：只有当答案`null`是`lock`“是的，对象已经被构造”时，才能保证给你一个正确的可用答案。但是，如果答案是“尚未构建”，那么您没有足够的信息，因为您真正想知道的是它“尚未构建，*并且没有其他线程打算在短期内构建它*”。因此，您将外部检查用作非常快速的初始测试，并且仅当答案为“否”时才启动正确的、无错误但“昂贵”的过程（锁定然后检查）。

上面的实现对于大多数情况来说已经足够好了，但是在这一点上，阅读[Jon Skeet 的关于 C#](http://csharpindepth.com/Articles/General/Singleton.aspx)中的单例的文章是个好主意，该文章还评估了其他替代方案。

* * *

## 回答 #2

> 赞同：42
> 
> 时间：2017-05-11T05:57:09.593

`Lazy<T>`版本：

```
public sealed class Singleton
{
    private static readonly Lazy<Singleton> lazy
        = new Lazy<Singleton>(() => new Singleton());

    public static Singleton Instance
        => lazy.Value;

    private Singleton() { }
} 
```

需要 .NET 4 和 C# 6.0 (VS2015) 或更高版本。

* * *

## 回答 #3

> 赞同：16
> 
> 时间：2012-09-07T10:47:02.703

执行锁定：相当便宜（仍然比空测试更昂贵）。

当另一个线程拥有它时执行锁定：您将获得他们在锁定时仍然要做的任何事情的成本，添加到您自己的时间。

当另一个线程拥有它时执行一个锁，并且几十个其他线程也在等待它：Crippling。

出于性能原因，您总是希望在尽可能短的时间内拥有另一个线程想要的锁。

当然，“宽”锁比窄锁更容易推理，因此值得从宽锁开始并根据需要进行优化，但在某些情况下，我们从经验和熟悉中学习到窄锁适合模式。

（顺便说一句，如果你可以只使用`private static volatile Singleton instance = new Singleton()`或者你可以不使用单例而是使用静态类，那么在这些问题方面两者都更好）。

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2012-09-07T10:37:07.343

原因是性能。如果`instance != null`（除了第一次之外，情况总是如此），则无需执行昂贵的操作`lock`：同时访问已初始化的单例的两个线程将不必要地同步。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2012-09-07T10:37:35.890

在几乎所有情况下（即：除了第一个情况之外的所有情况），`instance`都不会为空。获取锁比简单的检查成本更高，因此检查一次`instance`锁定前的值是一种不错且免费的优化。

这种模式称为双重检查锁定：[http ://en.wikipedia.org/wiki/Double-checked_locking](http://en.wikipedia.org/wiki/Double-checked_locking)

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2016-03-23T08:58:59.520

Jeffrey Richter 建议如下：

```
 public sealed class Singleton
    {
        private static readonly Object s_lock = new Object();
        private static Singleton instance = null;

        private Singleton()
        {
        }

        public static Singleton Instance
        {
            get
            {
                if(instance != null) return instance;
                Monitor.Enter(s_lock);
                Singleton temp = new Singleton();
                Interlocked.Exchange(ref instance, temp);
                Monitor.Exit(s_lock);
                return instance;
            }
        }
    } 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2019-07-09T05:18:36.583

这称为双重检查锁定机制，首先，我们将检查实例是否创建。如果不是，那么只有我们将同步方法并创建实例。它将大大提高应用程序的性能。执行锁定很重。所以为了避免锁首先我们需要检查空值。这也是线程安全的，是实现最佳性能的最佳方式。请看下面的代码。

```
public sealed class Singleton
{
    private static readonly object Instancelock = new object();
    private Singleton()
    {
    }
    private static Singleton instance = null;

    public static Singleton GetInstance
    {
        get
        {
            if (instance == null)
            {
                lock (Instancelock)
                {
                    if (instance == null)
                    {
                        instance = new Singleton();
                    }
                }
            }
            return instance;
        }
    }
} 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2018-07-01T02:14:06.357

您可以根据您的应用程序需求急切地创建一个线程安全的 Singleton 实例，这是简洁的代码，尽管我更喜欢@andasa 的惰性版本。

```
public sealed class Singleton
{
    private static readonly Singleton instance = new Singleton();

    private Singleton() { }

    public static Singleton Instance()
    {
        return instance;
    }
} 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2019-07-11T03:48:05.490

Singleton 的另一个版本，其中以下代码行在应用程序启动时创建 Singleton 实例。

```
private static readonly Singleton singleInstance = new Singleton(); 
```

这里 CLR（公共语言运行时）将负责对象初始化和线程安全。这意味着我们不需要显式编写任何代码来处理多线程环境的线程安全。

> “单例设计模式中的急切加载不是我们需要在应用程序启动时而不是按需初始化单例对象并将其保存在内存中以备将来使用的过程。”

```
public sealed class Singleton
    {
        private static int counter = 0;
        private Singleton()
        {
            counter++;
            Console.WriteLine("Counter Value " + counter.ToString());
        }
        private static readonly Singleton singleInstance = new Singleton(); 

        public static Singleton GetInstance
        {
            get
            {
                return singleInstance;
            }
        }
        public void PrintDetails(string message)
        {
            Console.WriteLine(message);
        }
    } 
```

从主要：

```
static void Main(string[] args)
        {
            Parallel.Invoke(
                () => PrintTeacherDetails(),
                () => PrintStudentdetails()
                );
            Console.ReadLine();
        }
        private static void PrintTeacherDetails()
        {
            Singleton fromTeacher = Singleton.GetInstance;
            fromTeacher.PrintDetails("From Teacher");
        }
        private static void PrintStudentdetails()
        {
            Singleton fromStudent = Singleton.GetInstance;
            fromStudent.PrintDetails("From Student");
        } 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2021-01-02T20:00:13.720

抗反射单例模式：

```
public sealed class Singleton
{
    public static Singleton Instance => _lazy.Value;
    private static Lazy<Singleton, Func<int>> _lazy { get; }

    static Singleton()
    {
        var i = 0;
        _lazy = new Lazy<Singleton, Func<int>>(() =>
        {
            i++;
            return new Singleton();
        }, () => i);
    }

    private Singleton()
    {
        if (_lazy.Metadata() == 0 || _lazy.IsValueCreated)
            throw new Exception("Singleton creation exception");
    }

    public void Run()
    {
        Console.WriteLine("Singleton called");
    }
} 
```

# macos - OS x 应用程序中的 PageController

> ID：12316407
> 
> 赞同：1
> 
> 时间：2012-09-07T10:35:29.467
> 
> 标签：macos, cocoa, uipagecontrol

我需要在我的 OS x 应用程序中实现类似 UIPageController 的东西。但我在 mac 库中找不到任何默认控件。任何人都知道如何实现它？提前致谢！

# json - REST API 的标准成功、失败和错误 JSON 响应格式应该是什么？

> ID：12316408
> 
> 赞同：3
> 
> 时间：2012-09-07T10:35:28.847
> 
> 标签：json, rest

返回成功 JSON、失败 JSON 和错误 JSON 的标准格式应该是什么？我访问了许多所谓的 RESTful API，但几乎都有自己的方式来返回成功、失败和错误 JSON？是否有任何应遵循/参考的推荐 JSON 格式？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T12:05:47.597

要发出成功、错误或任何其他状态的信号，您应该使用标准的 http 状态代码。如果发生错误，您还可以返回包含代码、严重性和消息等内容的 json。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T16:11:48.837

您应该按照其描述遵循[HTTP 状态代码。](http://www.w3.org/Protocols/HTTP/HTRESP.html)最好让所有 REST 失败/错误响应具有一些常见字段，例如`errorCode`描述`errorMessage`您发回的状态。

```
{
    "apiStatus":{        
        "errorCode":"validation.error.invalidId",
        "errorMessage":"The Id entered is not valid"
    }
    "yourContentIfany": ....
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-07T10:47:18.840

好问题。REST 确实设置了一些约定，但与 GET 或 PUT HTML 不同，其中至少有一个用于发送标签名称的约定，用于 JSON 的词汇表几乎没有......我相信任何真正有用的长期使用将需要开发超出基本事务行为的正式词汇表，无论是 HTML、XMPP 还是 JSON 方言（例如，在 XMPP 中，与 WebSockets 不同，您可以开发知道如何处理任何 Pubsub 服务器的订阅和发布的客户端） .

# java - 使用简单的 java 代码提取 css 属性值

> ID：12316412
> 
> 赞同：0
> 
> 时间：2012-09-07T10:35:38.903
> 
> 标签：java, regex

请检查以下代码。

```
Pattern pxPattern = Pattern.compile("^.*[0-9]+(%|pt|em).*$");
Matcher pxMatcher = pxPattern.matcher("onehellot455emwohellothree");
System.out.println(pxMatcher.matches());
System.out.println(pxMatcher.group(0)); 
```

我想减去字符串 445em。我正在使用代码来检查 CSS。表示我想提取

只是像 45em 或 50% 这样的值。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T10:40:23.817

首先，捕获的组在组 1 中，而不是组 0。然后您需要修改正则表达式以不使用数字并将它们包含在组中。尝试：

```
Pattern pxPattern = Pattern.compile("^.*?([0-9]+(?:%|pt|em)).*$");
Matcher pxMatcher = pxPattern.matcher("onehellot455emwohellothree");
System.out.println(pxMatcher.matches());
System.out.println(pxMatcher.group(1)); 
```

**编辑：**

要从多个字符串中获取所有值，可以使用以下模式：

```
Pattern pxPattern = Pattern.compile("[0-9]+(?:%|pt|em)");
Matcher pxMatcher = pxPattern.matcher("margin: 0pt, 6em, 5%, 2pt");
List<String> propertyValues = new ArrayList<String>();
while (pxMatcher.find()) {
    propertyValues.add(pxMatcher.group());
} 
```

# perl - 在perl中访问数组散列的散列中的元素

> ID：12316418
> 
> 赞同：1
> 
> 时间：2012-09-07T10:35:58.480
> 
> 标签：perl, perl-data-structures, perl-hash

```
my %PlannedPerWeek = (
                    September => {
                            Week1 => [80, 23, 199, 45, 19, 36],
                            Week2 => [78, 21, 195, 43, 18, 36],
                            Week3 => [76, 19, 191, 41, 17, 36],
                            Week4 => [74, 17, 187, 39, 16, 36],
                    }
    ); 
```

我在 perl prog 中有上述数组散列的散列。如何从上述数据结构中访问元素“199”。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-07T10:45:53.720

这很简单。第一个是哈希，所以你不需要取消引用它。数据结构中的每个后续“容器”都是一个引用，因此您可以使用[`->`](http://perldoc.perl.org/perlop.html#The-Arrow-Operator)运算符取消引用该结构。大括号内的东西是`{}`散列（键/值对）引用，需要花括号去引用，而方括号内的东西`[]`是数组引用，需要方括号去引用。

现在它真的只是把东西排好并数到 3：

```
print $PlannedPerWeek{'September'}->{'Week1'}->[2];
                                               ^---- 3rd array ref element
                                    ^--------------- hashref key 'Week1'
                      ^----------------------------- hash key 'September' 
```

您也可以省略[箭头](http://perldoc.perl.org/perlop.html#The-Arrow-Operator)，然后继续：

```
print $PlannedPerWeek{'September'}{'Week3'}[2]; 
```

您应该阅读[perlreftut](http://perldoc.perl.org/perlreftut.html)，其中说：

> 在两个下标之间，箭头是可选的。

# google-apps-script - HtmlService 模板的服务器错误，调试显示什么

> ID：12316423
> 
> 赞同：0
> 
> 时间：2012-09-07T10:36:27.873
> 
> 标签：google-apps-script

我正在尝试评估的应用程序脚本项目中有一个 HTML 模板。我不断收到服务器错误（不是很有帮助），但在调试时我找不到任何东西。我尝试了 getCode() 的运行结果，但那里没有错误。然后我还运行了 output.$out.getContent() （如此处所述[https://developers.google.com/apps-script/html_service](https://developers.google.com/apps-script/html_service)），它为我提供了预期的 html 输出。

我会附上 HTML 文件，但它包含很多变量，我无法创建带有错误的精简版本。我希望有人知道调试这些文件的更好或更正确的方法。

编辑：无论如何，这里是文件，

html文件：

```
<html>
  <body>
    <form action="https://script.google.com/macros/s/AKfycbxHQDJoAtAjBF9uIctvmxBHv-QVpYf6f15UZf8aAnAh_1U_PzU/exec" method="POST" id="mail-form">
      <table>
        <tr style="background-color: #392303; font-size: large; line-height: 30px;">
          <th>
            <a href="<?= info.profile ?>" style="color: #e06c01; font-weight: lighter;"><?= userForm.userName ?></a>
          </th> 
          <th colspan="3"> 
            <div width="250px" style="color: #e06c01; font-weight: lighter; float: left; text-indent: 10px;"><?= userForm.experience ?></div> 
            <div style="color: #FFFFFF; background-color: <?= userForm.pastColor ?>; border: 1px solid white; width: 28px; height: 28px; float: right;" title="<?= userForm.pastApplications ?>">
              <center><?= userForm.pastNumber ?></center> 
            </div>
          </th> 
        </tr>
        <tr style="background-color: #9c9181"> 
          <td width="100">
            <center><p style="font-size:small; top: 5px; margin-bottom: 3px;">Thanks meter: <?= info.thanks ?></p></center> 
            <center><img alt="" src="" style="margin-bottom: 10px;"/></center> 
            <center><img src="<?= info.avatar ?>" style="height: 60px; margin-bottom: 10px;" /></center> 
            <center><p style="font-size:small; margin-bottom: 3px; margin-top: 3px;">Posts: <?= info.totalPosts ?></p></center> 
            <center><p style="font-size:small; margin-bottom: 3px; margin-top: 3px;">Per day: <?= info.postsPerDay ?></p></center> 
            <center><p style="font-size:small; margin-bottom: 3px; margin-top: 3px;">Join date: <?= info.joinDate ?></p></center> 
            <center><p style="font-size:small; margin-bottom: 3px; margin-top: 3px;">Last activity: <?= info.activity ?></p></center>
          </td> 
          <td>
            <center><?= userForm.onSite ?></center>
          </td> 
          <td>
            <center><?= userForm.tools + '\n' + '\n' + userForm.theHardPart ?></center>
          </td> 
          <td width="100">
            <center><?= userForm.development ?></center>
          </td> 
        </tr>

        <tr style="background-color: #392303; font-size: large; line-height: 30px;">
          <td colspan="4" style="color: #e06c01; font-weight: lighter; text-indent: 10px;">Review</td>
        </tr>

        <tr style="background-color: #9c9181">
          <td colspan="1" valign="top">
            <label><input type="radio" name="review" value="approved" id="review_1">Accept</label>
          </td>
          <td colspan="1" valign="top">
            <label><input type="radio" name="review" value="rejected" id="review_2">Reject</label><br><br>
            <label><b>Reason(s) for user</b></label><br>
            <label><input type="checkbox" name="reason" value="Reason1" id="requirements">Reason1</label><br>
            <label><input type="checkbox" name="reason" value="Reason2" id="requirements">Reason2</label><br>
            <label><input type="checkbox" name="reason" value="Reason3" id="requirements">Reason</label><br>
            <label><input type="checkbox" name="reason" value="Reason4" id="requirements">Reason4</label><br>
            <label><input type="checkbox" name="reason" value="Reason5" id="requirements">Reason5</label><br>
            <label><input type="checkbox" name="reason" value="Reason6" id="requirements">Reason6</label><br>
          </td>
          <td colspan="1" style="text-indent: 3px;">
            <label><b>Feedback</b></label><br>
            <label><i>Rejections:</i> <b>WARNING</b> users will see this</label><br>
            <label><i>Approvals:</i> only for us</label><br>
            <textarea name="comments" rows="10" cols="35" id="comments"></textarea>
          </td>
        </tr>        
      </table>

      <input type="hidden" name="userName" id="userName" value="<?= userForm.userName ?>"/>
      <input type="hidden" name="reviewerName" id="reviewerName" value="<?= userForm.reviewer ?>"/>
      <input type="hidden" name="link" id="link" value="<?= info.profile ?>"/>
      <input type="hidden" name="row" id="row" value="<?= userForm.row ?>"/>
      <input type="hidden" name="hash" id="hash" value="<?= userForm.hash ?>"/>

      <div>
        <div style="float: left;">
          <input type="submit" name="submit" id="submit" value="Submit">
        </div>
        <div style="float: right;">
          <a href="mailto:<?= mailTo ?>?subject=<?= subject ?>&body=<?= body ?>"> 
            <b>Consult</b>
          </a>
        </div>
      </div>

    </form>
  </body>
</html> 
```

脚本的相关部分：

```
 var htmlTemplate = HtmlService.createTemplateFromFile('DC Form');
  htmlTemplate.userForm = userForm;
  htmlTemplate.info = info;
  htmlTemplate.mailTo = mailTo;
  htmlTemplate.subject = 'CONSULT: ' + userForm.userName;
  htmlTemplate.body = 'Profile link: ' + userForm.profile + '\n' + '\n';
  var code = htmlTemplate.getCode();
  Logger.log(code);
  var html = htmlTemplate.evaluate().getContent(); 
```

任何事情都会不胜感激，

M·奥兰杰

编辑：

使用 Caja Playground 后，我在这一行中发现了一个错误：

```
<div style="color: #FFFFFF; background-color: <?= userForm.pastColor ?>; border: 1px solid white; width: 28px; height: 28px; float: right;" title="<?= userForm.pastApplications ?>"> 
```

难道是不支持在属性中使用 scriptlet 吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T00:19:31.380

Well then, it looks like a simple missing of 'px' in the width attribute was the cause of all this trouble.

```
<td width="100"> 
```

It is fairly hard to locate as the error only appeared in certain conditions, probably only when that the size didn't match whatever it was. This would be why Corey G. though it had to be the variables, as the variables had to be of a certain length to trigger that width error. Headaches gone.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T20:59:01.250

在不接触您的 html 的情况下，我尝试了您的 .gs 文件的这种轻微变体：

```
function doGet() {
  var htmlTemplate = HtmlService.createTemplateFromFile('DC Form');
  var userForm = {userName: 'userName', profile: 'profile'};
  htmlTemplate.userForm = userForm;
  htmlTemplate.info = "info";
  htmlTemplate.mailTo = "mailTo";
  htmlTemplate.subject = 'CONSULT: ' + userForm.userName;
  htmlTemplate.body = 'Profile link: ' + userForm.profile + '\n' + '\n';
  var code = htmlTemplate.getCode();
  Logger.log(code);
  return htmlTemplate.evaluate();
} 
```

这对我来说很好。我怀疑您的变量中的某个值有问题。

# rest - 如何在 REST 系统中表示签入/签出？

> ID：12316425
> 
> 赞同：1
> 
> 时间：2012-09-07T10:36:29.697
> 
> 标签：rest

我一直在努力解决通过 REST api 表示结帐/签入系统的问题。

给你一个小例子，我们的系统处理节点，我们需要一种方法让一个用户能够锁定这个节点，然后对其进行更改，然后提交它。

所以我在想类似的东西

*   `/nodeId`（这是节点的基本位置，并提供节点的最新签入修订只读视图）
*   `/nodeId/edited`（张贴到这里会创建文档的编辑版本，这是结帐，gettting 获取编辑后的版本，然后进行更改）

现在我想代表签入，我想说`/nodeId/edited`再次发布将提交已编辑的文档，但是我们是，给发布两个不同的含义。我可以创建另一个签入端点，但这看起来很乱？另一种选择是对 /nodeId 进行 POST 以创建编辑后的版本，但这似乎又令人困惑。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T10:42:08.463

锁定/签出资源，`POST`使用`/nodeId` 部分文档`{"locked":"true"}`。服务器必须处理资源状态并检查资源是否可以被锁定等。服务器可以回答`204 No Content`锁定`409 Conflict`是否成功以及锁定是否不可能。

解锁/签入锁定的资源，`POST`以`/nodeId`使用部分文档`{"locked":"false", "someKey":"someValue", ...}`。服务器必须处理资源状态，检查资源是否被锁定，并使用`POST`ed 数据更新它。`204 No Content`同样，如果解锁成功，服务器可以回答，如果不成功`409 Conflict`。

**编辑：**添加了可能的 HTTP 状态代码。

**编辑 2：** REST 中没有像 SOAP 中的“端点”。你操纵资源，你不调用方法。

# php - 通过反向代理跨两台服务器共享网页元素

> ID：12316437
> 
> 赞同：1
> 
> 时间：2012-09-07T10:37:12.193
> 
> 标签：php, apache, curl, reverse-proxy

我有一个电子商务系统和一个博客，它们都在两台服务器上独立工作。电子商务服务器反向代理博客

/博客

这一切都很好，但是我的问题是从一个服务器到另一个服务器获取标题网页元素的最佳方式是什么，考虑到标题中存在动态元素，如果登录，购物篮计数和用户名。

我想出的唯一解决方案是通过 curl 或类似的方式获取标题并定期缓存。然后使用跨服务器共享的会话数据增强它，即购物篮计数、用户名。

在此先感谢，希望这是有道理的

安德鲁

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T18:15:20.100

由于您使用单个服务器进行反向代理，因此您可以对这个单个站点执行 ajax 请求，而不必担心任何跨站点策略恶作剧。

假设您有以下内容

> /blog -> 你的博客服务器
> /notblog -> 你的 EC 服务器。

从下面提供的页面中，`/blog`您可以获取类似于`/notblog/basket.php`ajax 请求的 url，并使用相关信息更新标头的各个部分。

或者（一个更粗略的解决方案）将包括`/notblog/basket.php`作为脚本文件，并动态生成仅打印您的标题内容的javascript。（记得添加标题以防止它缓存！）

这两个都需要对您的站点提出额外的请求，但您提出的使用 cURL 的解决方案也是如此。

# asp.net-mvc - ASP.NET MVC 绑定到视图中的字典

> ID：12316441
> 
> 赞同：1
> 
> 时间：2012-09-07T10:37:16.437
> 
> 标签：asp.net-mvc

我有一个将数据绑定到模型的 ASP.NET MVC 3 应用程序。**模型中的简单**对象可以完美地工作：**ContactName**和**Telephone**。

我只是通过以下方式做到这一点：`@Html.TextBoxFor(m => m.ContactName)`

模型包含一个字典对象，它没有与我当前的实现绑定。

谁能给我一个例子来说明我如何做到这一点？我绑定到字典的当前代码是：

```
<div>
@*TABS*@
 <ul class="nav nav-tabs">
@for (var i = 0; i < Model.Translations.Count; i++)
{
<li class="@i == 0 ? 'active' : ''"><a href="#@Model.Translations.Keys.ToList()[i]" data-toggle="tab">@Model.Translations.Keys.ToList()[i]</a></li>
}
</ul>

@*TABCONTENT*@
   <div class="tab-content" style="overflow: visible;">

     @foreach (var translation in Model.Translations)
     {
       for (var i = 0; i < Model.Translations.Count; i++)
        {
         <div class="@i == 0 ? 'active' : ''" id="@translation.Value.CultureCode">@translation.Value.Title</div>
        }
@Html.TextBoxFor(m => translation.Value.Title[]);
@Html.TextBoxFor(m => translation.Value.FullDescription);
@Html.TextBoxFor(m => translation.Value.PreviewDescription);
}
</div>
</div> 
```

非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-07T10:42:08.213

如果您有以下情况，请使用“您的列表属性”[index].value.id 示例：

```
public IList<KeyValuePair<int,string>> Properties { get; set; } 
```

你应该写在视图中：

```
for (int i = 0; i < Model.Properties.Count; i++)
{
    @Html.EditorFor(item=>Model.Properties[i].Value)
} 
```

**更新：**

```
 @for (var i=0; i < Model.Translations.Count; i++) { 
        <div id="tabs-@(i)">
            <div class="@i == 0 ? 'active' : ''" id="@Model.Translations[i].Value.CultureCode">@Model.Translations[i].Value.Title</div>
            @Html.TextBoxFor(m => Model.Translations[i].Value.Title);
            @Html.TextBoxFor(m => Model.Translations[i].Value.FullDescription);
            @Html.TextBoxFor(m => Model.Translations[i].Value.PreviewDescription);  }
        </div>

    </div>
        </div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T10:42:04.863

试试这个，我正在考虑翻译是字典对象：

```
 @foreach (var category in translation) {

    @Html.TextBoxFor(m => category.Value.Title);
    @Html.TextBoxFor(m => category.Value.FullDescription);
    @Html.TextBoxFor(m => category.Value.PreviewDescription);

    } 
```

# java - 无法使用jstl在jsp中迭代arraylist

> ID：12316447
> 
> 赞同：0
> 
> 时间：2012-09-07T10:37:28.807
> 
> 标签：java, jsp, spring-mvc, arraylist, jstl

在我的应用程序中，我需要显示姓名列表。我尝试了以下。

```
 <c:forEach items="${list}" var="lists">
    <tr>
      <td><c:out value="${lists.firstName}" /><td>
      <td><c:out value="${lists.lastName}" /><td>
    </tr>
  </c:forEach> 
```

以下是我的控制器代码（spring-mvc）

```
List<Person> list = personDao.getAllNames();
model.addAttribute("list", list); 
```

我收到以下异常，任何人都可以帮我解决这个问题吗？

```
org.apache.jasper.JasperException: /WEB-INF/pages/personList.jsp (line: 5, column: 1) Attribute value invalid for tag forEach according to TLD
    org.apache.jasper.compiler.DefaultErrorHandler.jspError(DefaultErrorHandler.java:42)
    org.apache.jasper.compiler.ErrorDispatcher.dispatch(ErrorDispatcher.java:408)
    org.apache.jasper.compiler.ErrorDispatcher.jspError(ErrorDispatcher.java:237)
    org.apache.jasper.compiler.Validator$ValidateVisitor.checkXmlAttributes(Validator.java:1260)
    org.apache.jasper.compiler.Validator$ValidateVisitor.visit(Validator.java:870)
    org.apache.jasper.compiler.Node$CustomTag.accept(Node.java:1539)
    org.apache.jasper.compiler.Node$Nodes.visit(Node.java:2376)
    org.apache.jasper.compiler.Node$Visitor.visitBody(Node.java:2428)
    org.apache.jasper.compiler.Node$Visitor.visit(Node.java:2434) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T11:04:05.763

我已更改订单或“var”和“items”。现在它工作正常。

```
<c:forEach var="lists" items="${list}">
    <tr>
      <td><c:out value="${lists.firstName}" /><td>
      <td><c:out value="${lists.lastName}" /><td>
    </tr>
  </c:forEach> 
```

# iphone - 我正在使用 ZXingObjC 库从图像中读取条形码，但它没有返回任何结果我使用的代码如下

> ID：12316449
> 
> 赞同：0
> 
> 时间：2012-09-07T10:37:33.133
> 
> 标签：iphone, xcode4, iso

```
-(void)decode:(CVImageBufferRef)BufferRef
{

  NSAutoreleasePool * pool = [[NSAutoreleasePool alloc] init];

  CGImageRef videoFrameImage = [ZXCGImageLuminanceSource createImageFromBuffer:BufferRef];

  CGImageRef rotatedImage = [self rotateImage:videoFrameImage degrees:0.0f];

  [NSMakeCollectable(videoFrameImage) autorelease];

  //Decoding:
  ZXLuminanceSource* source = [[[ZXCGImageLuminanceSource alloc]     initWithCGImage:rotatedImage] autorelease];

  [NSMakeCollectable(rotatedImage) autorelease];

  ZXBinaryBitmap* bitmap = [ZXBinaryBitmap binaryBitmapWithBinarizer:[ZXHybridBinarizer binarizerWithSource:source]];

  NSError* error = nil;

  // There are a number of hints we can give to the reader, including

  // possible formats, allowed lengths, and the string encoding.

  ZXDecodeHints* hints = [ZXDecodeHints hints];

  ZXMultiFormatReader* reader = [ZXMultiFormatReader reader];

  ZXResult* result = [reader decode:bitmap
                              hints:hints
                              error:&error];
  if (result) 
  {

    // The coded result as a string. The raw data can be accessed with

    // result.rawBytes and result.length.

    NSString* contents = result.text;

    // The barcode format, such as a QR code or UPC-A

    ZXBarcodeFormat format = result.barcodeFormat;

  } 

  else 

  {

    // Use error to determine why we didn't get a result, such as a barcode

    // not being found, an invalid checksum, or a format inconsistency.
  }

  [pool drain];

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T02:30:47.987

我遇到了这个问题，可以通过对相机生成的图像进行下采样轻松解决。显然，图书馆处理条形码的分辨率太高了。通过在调用 [image CGImage] 之前将我的 UIImage 的大小减小到 640x480，一切正常。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T11:08:16.003

您已经评论说您应该使用错误来确定您没有得到结果的原因，但您实际上并没有这样做。看看里面有什么`error`。

# sql-server - 错误 1934：用户“用户名”的删除失败

> ID：12316451
> 
> 赞同：1
> 
> 时间：2012-09-07T10:37:36.673
> 
> 标签：sql-server, sql-server-2008

每次尝试从数据库中删除用户时，我都会收到此错误：

1.  展开数据库
2.  展开安全
3.  展开用户
4.  右键单击“用户名”，然后选择删除

发生以下错误：

用户“用户名”的删除失败。(Microsoft.SqlServer.Smo)

**附加信息：**

执行 Transact-SQL 语句或批处理时发生异常。

CONDITIONAL 失败，因为以下 SET 选项的设置不正确：“ARITHABORT”。验证 SET 选项是否适用于索引视图和/或计算列上的索引和/或查询通知和/或 xml 数据类型方法。（Microsoft SQL Server，错误：1934）

有没有人遇到过这个？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-08T02:31:03.133

检查 sp_configure 以查看“用户选项”的设置。 [http://technet.microsoft.com/en-us/library/ms190763.aspx](http://technet.microsoft.com/en-us/library/ms190763.aspx)

我遇到了一些事情，这些事情也指向可能引发此错误的审计触发器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T08:37:11.827

我不确定这是否应该是一个修复程序，但它目前确实有效。只需在数据库上运行它：

```
SET ARITHABORT ON
DROP USERNAME
SET ARITHABORT OFF 
```

# asp.net - 如何在 Fired 中的 TextChaged 事件中设置焦点在文本框上 - Asp .Net

> ID：12316452
> 
> 赞同：0
> 
> 时间：2012-09-07T10:37:36.173
> 
> 标签：asp.net, user-interface, textbox

我有一个带有 2 个文本框（以及其他控件）的表单。他们都有 TextChanged 事件。我正在使用 Tab 键从一个控件转到另一个控件。

在第一个文本框中输入一些值然后按 Tab 后，焦点不会转到第二个文本框。

我在用着`TextBox2.Focus();`

但这不起作用。

您的代码对我没有用。我的 TextBox 确实有 OnTextChanged 事件。我实现了 TabIndex，但这在 PostBack 之后不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T11:39:37.123

[当您可以使用纯 html 属性tabindex](http://www.w3schools.com/tags/att_standard_tabindex.asp)处理它时，为什么要执行服务器端代码

## 纯 HTML 代码

```
<span>2</span><input type='text' tabindex="1" /><br/>
<span>1</span><input type='text' tabindex="3" /><br/>
<span>3</span><input type='text' tabindex="4" /><br/>
<span>4</span><input type='text' tabindex="2" /><br/>​ 
```

* * *

## ASP.NET 代码

```
 <asp:TextBox ID="txtField1" runat="server" tabindex="1" />
   <asp:TextBox ID="txtField2" runat="server" tabindex="2" /> 
```

[有关工作演示，请参见此处](http://jsfiddle.net/QczSt/1/)

# sql - 使用 NLS_COMP=LINGUISTIC 和 NLS_SORT=BINARY_CI 时的 LIKE

> ID：12316453
> 
> 赞同：1
> 
> 时间：2012-09-07T10:37:36.637
> 
> 标签：sql, oracle, oracle11g, sql-like

甲骨文版本：11.2.0.2.0

我已经设置`NLS_COMP = 'LINGUISTIC'`和`NLS_SORT = 'BINARY_CI'`.

每当我使用`LIKE`没有前导通配符 (%) 的比较时，它都不会返回正确的结果。这是一个通用示例。我的问题显然与查询#3 有关。以前有人经历过吗？

```
CREATE TABLE People     
(      
  ID NUMBER(1,0),    
  FirstName NVARCHAR2(20),    
  LastName NVARCHAR2(20)
);    

INSERT INTO People (ID, FirstName, LastName) VALUES ('1', 'John', 'Doe');    
INSERT INTO People (ID, FirstName, LastName) VALUES ('2', 'Jane', 'Doe');    
INSERT INTO People (ID, FirstName, LastName) VALUES ('3', 'Rich', 'Donner');    
INSERT INTO People (ID, FirstName, LastName) VALUES ('4', 'Mike', 'Redoer');            

-- Query #1    
SELECT ID FROM People WHERE Lastname = 'doe';

-- Results (Correct)    
-- 1    
-- 2

-- Query #2    
SELECT ID FROM People WHERE Lastname LIKE '%doe%';

-- Results (Correct)    
-- 1    
-- 2    
-- 4

-- Query #3
SELECT ID FROM People WHERE Lastname LIKE 'do%';

-- Results (Incorrect)    
-- 1    
-- 2    
-- 3    
-- 4 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T10:48:33.313

查询 3 给了你这个，因为 do% 是说：找到任何姓氏在字符串 'do' 后面包含 0 个或更多字符的人（这就是为什么你也会在那里得到 Redoer..）

您对 Q3 的期望是什么？

**更新**

如果您只想从“做”开始，您可以尝试

```
LIKE '[d]o%'; 
```

**更新 2**

在进一步[阅读](http://www.orafaq.com/node/999)/测试之后我发现，对于你想要做的事情（找到任何以'do'开头的东西），你真的不需要 NLS_SORT='BINARY_CI' 因为这个确实将排序设置为不区分大小写并且我们失去了在大写字母中使用第一个字母的优势，并且搜索在那里搞砸了。
因此，假设第一个字母在 Cap 中，您需要做的就是：

```
alter session set nls_comp='LINGUISTIC';  
SELECT ID FROM People WHERE Lastname LIKE 'Do%';

ID
1
2
3 
```

[这](http://sqlfiddle.com/#!4/999fb/39)是我做的测试，希望对你有帮助:)

# c# - 通过控制台将参数传递给构建的单元测试 DLL

> ID：12316454
> 
> 赞同：1
> 
> 时间：2012-09-07T10:37:48.077
> 
> 标签：c#, unit-testing, nunit

是否可以通过控制台将参数传递给 Microsoft 单元测试 DLL？我想这样做，因为我有数千个测试用例存储在 XML 中，我不想将 XML 文件作为资源包含在 Visual Studio 项目中，因为我不想每次我们想要修改时都重新编译测试解决方案测试数据。我正在使用 VS 2010 和 MSUnit 测试框架。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T22:46:35.350

您不能真正将命令行参数传递给测试套件可以使用的 mstest，但是您可以指定一个可以包含部署项的测试设置文件。

您的测试将使用该文件，就好像它是相对于运行测试的路径一样；每个测试设置文件可以指定不同的文件，假设名称文件的名称保持不变。

# module - 在一个共同的地方收集变量 - fortran90

> ID：12316467
> 
> 赞同：0
> 
> 时间：2012-09-07T10:38:34.223
> 
> 标签：module, fortran

感谢您的建议。请原谅我不够清楚。让我尽我所能再描述一遍。

`compns.f`有两个模型 - A 和 B。模型 A 有一个由主程序调用的子程序（它不是模块的一部分） 。下面，`compns.f`代码：

compns.f：（模型 A）

```
 subroutine compns(deltim,fhout)      
 use var_repos, only: compns_var_dump

 open(unit=nlunit,file=gfs_namelist) ! reads a file for the variables deltim and fhout

 rewind (nlunit)

 read(nlunit,nam_mrf)

 print *, deltim,fhout               ! deltim = 360.0, fhout  = 6.0

 CALL compns_var_dump(deltim,fhout)  ! calls the subroutine and passes the variables

 end 
```

另一个包含子程序 compns_var_dump（用于收集变量）的模块是 `var_repos.f90`：

```
MODULE var_repos

  IMPLICIT NONE

  PUBLIC :: compns_var_dump

  PUBLIC :: tstep_var_dump       !!! to dump variables from another place

  REAL, PUBLIC :: d_time    ! dummy variable

! declare the variables which will go public here:

  REAL,    PUBLIC :: deltim, fhout

CONTAINS

  SUBROUTINE compns_var_dump(deltim , fhout)

  REAL,    INTENT(inout) :: deltim , fhout

  d_time = deltim

  WRITE(*,*)'Inside var_repos: deltim = ',deltim,d_time

  END SUBROUTINE compns_var_dump

  SUBROUTINE tstep_var_dump

  ...

  END SUBROUTINE tstep_var_dump

END MODULE var_repos 
```

现在，我需要模型 B 中的变量`var_repos.f90`。模型 B 中需要它们的模块如下：

mo_time_control.f90：（模型 B）

```
 MODULE time_control

 PUBLIC :: get_delta_time

CONTAINS

   REAL(dp) FUNCTION get_delta_time()

   USE var_repos,      ONLY: d_time

   IMPLICIT NONE

   REAL :: d_time

   REAL :: a_time            ! Testing

   get_delta_time = d_time

   a_time = d_time           ! Testing

   WRITE(*,*)'Inside function get_delta_time(): deltim= ',d_time,get_delta_time, a_time

   END FUNCTION get_delta_time

 END MODULE time_control 
```

运行模型后的输出如下：

```
'Inside var_repos: deltim = ' 360.000 360.000

'Inside function get_delta_time(): deltim= ' 0.00000E+00 0.00000E+00 0.00000E+00 
```

我希望我在这篇文章中很清楚。有没有更好的方法来完成上述任务？我的理念是通过不同的子程序调用将模型 A 所需的变量收集到一个模块中，从而将该模块用作存储库，让模型 B 将其用于所需的变量。这种方法对吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T11:16:17.330

试试这个例子：

```
MODULE var_repos

  IMPLICIT NONE

  PUBLIC :: compns_var_dump

  REAL,    PUBLIC :: deltim, var2

CONTAINS

  SUBROUTINE compns_var_dump(deltim , fhout)

  REAL,    INTENT(in) :: deltim , fhout

  WRITE(*,*)'Inside var_repos: args = ', deltim, fhout
  var2 = fhout

  END SUBROUTINE compns_var_dump

END MODULE var_repos

program test

use var_repos

call compns_var_dump ( 2.0, 3.0 )

write (*, *) "in main:", deltim, var2

end program test 
```

输出是：

```
 Inside var_repos: args =    2.00000000       3.00000000    
 in main:   0.00000000       3.00000000 
```

我相信答案是子程序的参数 deltim 和同名的模块变量是不同的变量。创建与模块变量同名的子例程虚拟参数会屏蔽模块模块，而不是自动将值复制到模块变量。所以在 main 模块变量 deltim 没有收到值 2 并且是未定义的。在编译器中，我使用了它所拥有的随机值为零；该值在不同的编译器上可能不同。另一方面，变量 fhout 和 var2 不同，虚拟参数 fhout 被主动复制到 var2。因此，模块 var2 的值被设置并可用于任何使用该模块的例程（这里是主程序）。

编辑：解决方案是我为参数 fhout 和模块变量 var2 显示的。调用虚拟参数 ARG_varX 和模块变量 GBL_varX。在子例程中使用赋值语句将每个 ARG_varX 复制到 GBL_varX。然后使用该模块的任何程序都可以访问变量 GBL_varX，这些变量将具有它们被发送到子程序中的值。这是否解决了你的问题。

编辑 2：这是您的新代码的一个版本。它似乎工作。如果我修复了错误，或者它在您显示的代码之外：

```
MODULE var_repos

   IMPLICIT NONE

   PUBLIC :: compns_var_dump

   ! declare the variables which will go public here:

   REAL,    PUBLIC :: GBL_deltim, GBL_fhout

CONTAINS

   SUBROUTINE compns_var_dump(ARG_deltim, ARG_fhout)

      REAL,    INTENT(in) :: ARG_deltim , ARG_fhout

      GBL_deltim = ARG_deltim
      GBL_fhout = ARG_fhout

      WRITE(*,*)'Inside compns_var_dump:', ARG_deltim, GBL_deltim, GBL_fhout

   END SUBROUTINE compns_var_dump

END MODULE var_repos

! ------------------------------------------------------------

module my_b

contains

   subroutine compns ()
      use var_repos, only: compns_var_dump

      real :: deltim, fhout

      deltim = 360.0
      fhout  = 6.0

      write (*, *) "compns:", deltim, fhout

      CALL compns_var_dump(deltim,fhout)  ! calls the subroutine and passes the variables

   end subroutine compns

end module my_b

! ------------------------------------------------------------

MODULE time_control

   PUBLIC :: get_delta_time

CONTAINS

   FUNCTION get_delta_time()

      USE var_repos,      ONLY: GBL_deltim

      IMPLICIT NONE

      real :: get_delta_time

      REAL :: a_time            ! Testing

      get_delta_time = GBL_deltim

      a_time = GBL_deltim           ! Testing

      WRITE(*,*)'Inside function get_delta_time(): deltim= ', GBL_deltim, get_delta_time, a_time

   END FUNCTION get_delta_time

END MODULE time_control

! ------------------------------------------------------------

program main

   use var_repos, only: GBL_deltim, GBL_fhout
   use my_b, only: compns
   use time_control, only: get_delta_time

   real :: local_var

   call compns ()

   local_var = get_delta_time ()

   write (*, *) "main:", local_var, GBL_deltim, GBL_fhout

end program main 
```

# javascript - jquery插件或javascript方法自动调整文本输入（不是textarea）（固定宽度）可变高度

> ID：12316468
> 
> 赞同：0
> 
> 时间：2012-09-07T10:39:05.317
> 
> 标签：javascript, jquery, css, jquery-ui, jquery-plugins

我正在寻找一个 jquery 插件或 javascript 方法来按高度自动调整文本输入（而不是 textarea）的大小，例如具有固定宽度和可调整高度的 facebook 评论框。

如果有人可以帮助我。我会感谢他

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T11:42:41.293

查看[http://www.jacklmoore.com/autosize](http://www.jacklmoore.com/autosize)

# jakarta-ee - 我如何知道应用程序是否使用 RMI？

> ID：12316469
> 
> 赞同：0
> 
> 时间：2012-09-07T10:39:11.837
> 
> 标签：jakarta-ee, rmi

我正在开发一个现有的 Java EE 应用程序。据说该应用程序使用 RMI 调用来获取其中一个模块的数据。

我正在搜索`UniCastRemoteObject`and `java.rmi.Remote`，但在项目中都找不到。

如何判断应用程序是否使用 RMI？是否有任何特定的类应该扩展？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T11:28:27.380

好吧，现在有很多框架对你“隐藏”显式 RMI 代码，
所以无论是否使用 RMI，你都不会发现这样的情况。
我想如果你知道你正在使用什么“通信框架”，你就会知道项目是否使用 RMI。
例如，当我使用[JBoss 远程处理](http://www.jboss.org/jbossremoting)时，我使用 RMI“扩展”来添加 RMI 支持，而无需编写显式 RMI 代码，框架对我这样做了。
如果您想在运行时尝试找出应用程序是否使用 RMI，也许应该检查进程“ [rmiregistry](http://docs.oracle.com/javase/tutorial/rmi/running.html) ”是否已启动。

# xcode - 为什么我在 UITableView 上调用 reloadData 时应用程序崩溃？

> ID：12316470
> 
> 赞同：0
> 
> 时间：2012-09-07T10:39:17.997
> 
> 标签：xcode, uitableview, subview

我有一个 UITableView，它的 cellForRowAtIndexPath 打印在下面。当我在 tableView 上调用 reloadData 时，应用程序崩溃，并且没有明确的 EXC_BAD_ACCESS 或任何东西 - 它只是返回到 main。自从我添加标签子视图以来，问题就出现了，这让我认为释放子视图/重用单元格可能存在一些问题。

谁能看到导致问题的原因？

提前致谢，

埃德

这是代码：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{

    static NSString *CellIdentifier = @"MyCell";
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

    //---
    for(UIView *eachView in [cell subviews])
        [eachView removeFromSuperview];

    //Initialize cell label
    UILabel *myLabel = [[UILabel alloc]initWithFrame:CGRectMake(10, 10, 290, 25)];
    [myLabel setFont:[UIFont fontWithName:@"HelveticaNeue" size:14.0]];
    [myLabel setTextColor:[UIColor darkGrayColor]];
    myLabel.text =@"Label";
    [cell addSubview:myLabel];
    [myLabel release];

    return cell;

} 
```

# mysql - 对分组数据行使用联接

> ID：12316472
> 
> 赞同：1
> 
> 时间：2012-09-07T10:39:18.383
> 
> 标签：mysql, database, join, left-join

我有两张桌子，`invoices`和`deposits`。

它们看起来有点像这样：

发票

```
id    |    paymentType     |     grossTotal   |    dateTime
1     |         Cash       |        1000      |   UNIX TIME    
2     |         Card       |        1350      |   UNIX TIME   
3     |         Card       |        1250      |   UNIX TIME   
4     |         Card       |        750       |   UNIX TIME 
```

存款

```
id    |    paymentType     |       invNo      |    dateTime    |     amount
1     |         Cash       |         1        |    UNIX TIME   |       150
2     |         Card       |         2        |    UNIX TIME   |       350 
```

存款总是过去的日期，发票日期将是，例如`today`，所以我想确定发票上今天支付的余额，即`invoices.grossTotal - deposits.amount`，并按付款类型列出。

因此，在上面的表格示例中，发票 1 上将支付 850 英镑，发票 2 上将支付 1000 英镑，这很容易实现，每行一到两行，但是在对付款类型和存款发票进行分组时，我被卡住了...

```
SELECT 
   invoices.id, 
   sum(grossTotal)-IFNULL(depositsCheck.previouslyPaid,0) as todayTotal, 
   depositsCheck.previouslyPaid, sum(grossTotal) as grossTotal  
FROM `invoices`    
    LEFT JOIN (SELECT SUM(amount) as previouslyPaid, invNo 
    FROM deposits 
    GROUP BY invNo) depositsCheck ON depositsCheck.invNo=invoices.id 
GROUP BY  invoices.paymentType ORDER BY id DESC 
```

上面的 SQL 查询将适用于用 CASH 支付的项目，但不适用于卡支付，因为分组`invoices.paymentType`意味着表中的`id`列`invoices`不再正确，因此`JOIN`如果该行有一个`id`与存款无关的列，则失败.

如何运行如上所述的查询，但确保我可以在发票的任何实例上`join`的`deposits`表格，按与分组列 id 记录匹配的付款类型分组？

我正在使用 mySql，所以请发布 MySql 可以做的连接！:D

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T10:48:59.007

问题是，当您使用 时`GROUP BY`，您只能`SELECT`聚合和分组的列。

`invoices.id`是您尝试选择但未分组的列。我认为您可能希望将此列添加到`GROUP BY`子句中。

```
SELECT 
   invoices.id, 
   sum(grossTotal)-IFNULL(depositsCheck.previouslyPaid,0) as todayTotal, 
   depositsCheck.previouslyPaid, sum(grossTotal) as grossTotal  
FROM `invoices`    
    LEFT JOIN (SELECT SUM(amount) as previouslyPaid, invNo 
    FROM deposits 
    GROUP BY invNo) depositsCheck ON depositsCheck.invNo=invoices.id 
GROUP BY  invoices.paymentType, invoices.id ORDER BY id DESC 
```

对于您提供的示例表，它可能会提供：

```
id    |    paymentType     |     grossTotal   |    dateTime   |   previouslyPaid
1     |         Cash       |        1000      |   UNIX TIME   |       150
2     |         Card       |        1350      |   UNIX TIME   |       350
3     |         Card       |        1250      |   UNIX TIME   |         0
4     |         Card       |        750       |   UNIX TIME   |         0 
```

但一般来说，你会有类似的东西：

```
id    |    paymentType     |     grossTotal   |    dateTime   |   previouslyPaid
1     |         Cash       |        1000      |   UNIX TIME   |       150
1     |         Card       |        1000      |   UNIX TIME   |       300
2     |         Cash       |        1350      |   UNIX TIME   |       350
2     |         Card       |        1350      |   UNIX TIME   |       350 
```

如上图所示，发票 1 中，150 以现金支付，300 以卡支付。

# iphone - 自定义 UITableView

> ID：12316475
> 
> 赞同：4
> 
> 时间：2012-09-07T10:39:52.663
> 
> 标签：iphone, ios, uitableview, xcode4

如何在一个 ViewController 中使用多个 UITableView？是否可以在一个页面中使用多个 TableView？

实际上我正在创建一个申请表，我必须使用对象替代组合框。

我选择 TableView 代替组合框。

这是一个正确的方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T10:46:47.123

绝对是悟空，你可以`UITableViews`在一个单一的`UIViewController`.
你只需要`UITableView`在[**UITableViewDelegete**](http://developer.apple.com/library/ios/#documentation/uikit/reference/UITableViewDelegate_Protocol/Reference/Reference.html)中调整你的两者。
例如 ：

```
- (void)tableView:(UITableView *)tableView didDeselectRowAtIndexPath:(NSIndexPath *)indexPath {
        if (tableView == yourFirstTableView) {
            // <do whatever on first table view>...
        } else if (tableView == yourSecondTableView) {
            // <do whatever on second table view>...
        }
    } 
```

只需确保为两个表设置了两个代表：

```
yourFirstTableView.delegate  = self;
yourSecondTableView.delegate = self; 
```

如有疑问，请参阅[**此**](https://github.com/vikingosegundo/my-programming-examples/tree/master/TwoTableViews/)示例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T10:42:41.897

`UITableView's`是的，您可以在一个中使用多个`ViewController`. 您可以使用不同的部分和使用各种附件类型来创建一个申请表。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-07T10:46:47.370

您可以在一个控制器中使用多个表视图，只需为每个 UITableView 实例定义不同的委托。您可以专门定义新的类来充当表视图委托，并让您的控制器创建这些实例并相应地设置每个 UITableView 的委托属性。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-07T10:48:10.660

是的，你可以在单个视图控制器中使用多个 tableview。只需在 xib 中或手动创建 tableview。

在 Tableview 的方法中你可以这样写

```
-(NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{
    if(tableview==table1){

    }else if (tableview ==table2){

    }
}

-(NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    if(tableview==table1){

    }else if (tableview ==table2){

    } 
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-07T12:21:16.470

是的，您可以在 UIViewcontroller 中拥有多个 tableview。您需要为每个 tableview 设置标签，并且您可以在 tableview 中加载数据。

```
-(NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section {    
  if(tableview.tag == 1)
 {

 } else if (tableview.tag == 2)
 {

 } 

} 
```

# c# - 测试计算机日期时间格式

> ID：12316476
> 
> 赞同：0
> 
> 时间：2012-09-07T10:39:53.897
> 
> 标签：c#, datetime, format

我正在尝试制作一个测试计算机时间格式是**12h**还是**24h**的函数。目前我有这个功能：

```
string format = DateTime.Now.ToString("tt");

if (format == "AM" || format == "PM")
{
    //12h
}
else
{
    //24h
} 
```

但是这个功能有问题。如果我将格式更改为**12h**并且我第一次运行该应用程序，它会告诉我格式是**24h**（之前的格式）。在我再次运行它之后，它会告诉我格式是**12h**。问题是该应用程序在第二次运行后告诉我正确答案。我需要一个能够正确测试的函数赢得了第一次运行，而不是第二次运行。

该功能将`Form1_Load`用于测试表单加载。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T11:00:46.203

CultureInfo should support the 24 hour boolean, but thats not the case. However this will tell you if the system is displaying the am/pm symbol:

```
bool is12hr =  CultureInfo.CurrentCulture.DateTimeFormat.ShortTimePattern.Contains("t"); 
```

# javascript - 谷歌地图信息窗口 Z 索引

> ID：12316477
> 
> 赞同：16
> 
> 时间：2012-09-07T10:40:11.230
> 
> 标签：javascript, maps, z-index, infowindow

InfoWindow 是否可以在Z-Index 高于谷歌地图的元素**上弹出？**

因此，可以说谷歌地图的 z-index 为零。该元素的 z-index 为 100。单击标记会在与该元素相同的区域中显示一个信息窗口。我们如何让这个 InfoWindow 悬停在元素上而不是在它下面？

我尝试将 InfoWindow 的 z-Index 设置为更高的值，但这似乎没有任何作用。

我在下面整理了一个演示来演示这个问题。任何援助将不胜感激！

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"> 
```

```
<head>
    <title>Infowindow Z-Index Test</title>

    <script language="Javascript" type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.6.4/jquery.min.js"></script>                   
    <script src="http://maps.google.com/maps/api/js?sensor=false" type="text/javascript"></script>          

    <script language="Javascript" type="text/javascript">
        var coords = [[35.50733, 35.12768, 3]]; //, [-23.806549, 133.96059, 13], [68.169002, -134.425964, 10], [69.529715, -132.109222, 10], [80.231047, -22.730713, 7], [35.108675, -117.961578, 12]];
        var map;            

        function mapChoose(coords) {
            var current = coords[Math.floor(Math.random() * (coords.length))];
            //mapShow(current[0], current[1], current[2], document.getElementById('map'));
            mapShow(current[0], current[1], current[2], document.getElementById('map_canvas'));
        };

        function initialize() {

            mapChoose(coords);
        }

        function mapShow(lat, lng, zoom, div) {
            var myOptions = {
                'zoom': zoom,
                'center': new google.maps.LatLng(lat, lng),
                'mapTypeId': google.maps.MapTypeId.SATELLITE,
                'disableDefaultUI': true,
                'scrollwheel' : false,
                'draggable': false
            }
            map = new google.maps.Map(document.getElementById("map_canvas"), myOptions);

            // markers
            // load markers - us
            var marker3 = new google.maps.Marker({
                position: new google.maps.LatLng(40.71435, -74.00597),
                map: map,
                icon: 'http://google-maps-icons.googlecode.com/files/kitesurfing.png',
                draggable: true
            });
            marker3.setTitle("New York");                

            // info windows                
            var contentString = $("#divContentForInfoWindow").html();
            $("#divContentForInfoWindow").html('');

            infowindow3 = new google.maps.InfoWindow({
                content: contentString, zIndex: 5000 // this ZIndex property doesnt appear to do anything.
            });

            google.maps.event.addListener(marker3, 'click', function () {
                infowindow3.open(map, marker3);

            });

        };

    </script>

</head>

<body onload="initialize()" onunload="GUnload()">

    <!-- Google canvas element | Z-Index of 0 -->
    <div id="map_canvas" style="position: absolute; top: 0; bottom: 0; left: 0; right: 0; z-index: 0;"></div>         

    <!-- Floating block of text | Z-Index of 100  -->
    <div id="FloatingBlock" style='z-index: 100;position: absolute;left: 50px;top:75px;font-size: 16px;width: 525px;text-align: left;color: #111;background-color:#fff;opacity:.80;filter:alpha(opacity=80);'>

        <b>This layer is floating above the google map because the Z-Index has been set higher. <br /></b>

        Hello world hello world hello world hello world hello world hello world hello world<br />
        hello world hello world hello world hello world hello world hello world hello world<br /> 
        Hello world hello world hello world hello world hello world hello world hello world<br /> 
        hello world hello world hello world hello world hello world hello world hello world<br /> 
        Hello world hello world hello world hello world hello world hello world hello world<br /> 
        hello world hello world hello world hello world hello world hello world hello world<br /> 

        <div class="text">

          <!-- <input type="button" id="btntest" value="Open Info Window" onclick="showInfoWindow2();" /><input type="button" id="btntest2" value="hide Info Window" onclick="hideInfoWindow2();" />-->
    </div>

    <div style="clear:both;"></div>

    </div>      
    <!-- / can delete this, not used -->

    <!-- everything IN here will appear in the google maps info window -->
    <div id="divContentForInfoWindow">       

        This is popup content. <br />This is popup content. <br />
        This is popup content. <br />This is popup content. <br />
        This is popup content. <br />This is popup content. <br />
        This is popup content. <br />This is popup content. <br />
        This is popup content. <br />This is popup content. <br />
        This is popup content. <br />This is popup content. <br />

   </div>
   <br /><br /><br />        
    <!-- / everything in here will appear in the google maps info window -->
</body> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2015-08-26T05:40:23.677

使用 infowindow.setZIndex(Number);

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-11-29T10:14:44.777

您可以使用[自定义控件](https://developers.google.com/maps/documentation/javascript/examples/control-custom-state)而不是外部元素来放置在地图上。自定义控件放置在地图上方，当您打开 InfoWindow 时，Google 地图会检测到控件的位置并自动移动并打开控件下方的 InfoWindow，因此两者不会重叠。在这种情况下，最好使用它而不是[自定义叠加层](https://developers.google.com/maps/documentation/javascript/examples/overlay-hideshow)，因为当您拖动或缩放地图时叠加层会移动，并且控件始终保持在同一位置。

因此，首先您必须在 html 中将地图和控件添加为 div-s，然后初始化地图，然后将控件添加到地图中，如下所示：

```
var control = document.getElementById('control');
map.controls[google.maps.ControlPosition.TOP_LEFT].push(control); 
```

那是多么简单；）

# java - Javadoc 和链接到 UNC 路径上的文件

> ID：12316484
> 
> 赞同：2
> 
> 时间：2012-09-07T10:40:28.623
> 
> 标签：java, url, javadoc

可能听起来很疯狂，但我想将一些 javadoc 文档链接到网络上存在的文件。这是从标准 UNC 路径访问的。

我想使用如下链接：

```
/**
 * This class does something in accordance with some external spec.
 * <br/><br/>
 * This spec can be found 
 * <a target="_blank" href="file://S:\Projects\Some%20Folder\Documents\External%20documents\Some%20File.pdf">here</a>.<br/>
 * And <a href="file://S:\Projects\Some Folder\Documents\External documents\Some File.pdf">here</a>
 * @author Meeeeee 
 */
public class SomeClass {
    // blah...
} 
```

该链接出现在 Javadoc（在 Netbeans 中）中，但单击它不会执行任何操作。我可以链接到外部网页没问题。我尝试了 2 种关于使用标准 URL 编码字符串和未编码字符串 URL 的方法。

这可能吗？

谢谢

安德斯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T10:54:54.757

在 href 中使用它，如下所示：如果文件在 LAN 中的某个服务器或其他系统中

```
 <a href="file:////<filelocation server or ip address>/folder/filename.xlsx">Click</a> 
```

如果文件在本地系统中

```
<a href="C:\folder\filename.xls" >click</a> 
```

# ruby - 来自方法的真实过程

> ID：12316488
> 
> 赞同：2
> 
> 时间：2012-09-07T10:40:42.930
> 
> 标签：ruby, metaprogramming

`proc`有没有办法从 Ruby 中的方法中得到一个真实的？

获得的`UnboundMethod`via`instance_method`不符合要求，因为我只能将它绑定到声明该方法的类的对象。我无法像在（使用）中那样重新解释`self`方法体内部。`proc``instance_exec`

同样，`Method`获得的 via`method`也不行，因为`self`它绑定到了接收者，`method`我无法更改它。

编辑（澄清）：

我要做的是采用一个类中定义的方法并将其转移到另一个类。这意味着我需要能够重新解释`self`方法内的含义。对于`proc`s，这可以通过`instance_exec`and实现`instance_eval`，但对于方法则不行。

为什么我试图将方法从一个类移动到另一个类？长话短说，实现一种命名空间形式，因为我对 Ruby 提供的可见性控制最不满意（无法将模块成员隐藏到包含类）。然而，这远远超出了这个问题的范围。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-07T11:19:01.147

也许`to_proc`from`Method`可以帮助你：

```
class A
  def test
    puts 'this is a test'
  end
end

m = A.new.method(:test)

m.to_proc.call #=> this is a test 
```

更新：只是一个想法

通过使用[sourcify](https://github.com/ngty/sourcify) gem`proc`从第一个对象转换为源，然后在第二个对象的上下文中评估它

# instagram - Instagram 中的分页和位置搜索端点

> ID：12316489
> 
> 赞同：0
> 
> 时间：2012-09-07T10:40:50.700
> 
> 标签：instagram

我正在使用`media/search`Instagram API 的端点来获取用户位置周围的图片。但这里的问题是我无法实现分页。

[https://api.instagram.com/v1/media/search?lat=48.858844&lng=2.294351&?access_token=ACCESS-TOKEN](https://api.instagram.com/v1/media/search?lat=48.858844&lng=2.294351&?access_token=ACCESS-TOKEN)

我还尝试查看`locations/search`端点以获取位置 ID，然后考虑将其用于`locations/:id/media/recent`端点。

但是，我无法理解 location/media/recent api 中位置 id 的映射，因为给定文档的示例 URL 没有提及位置 id。

文档中的示例 URL [https://api.instagram.com/v1/tags/snow/media/recent?access_token=ACCESS-TOKEN](https://api.instagram.com/v1/tags/snow/media/recent?access_token=ACCESS-TOKEN)

有没有更好的方法，我可以实现一个位置周围的照片分页？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T00:04:39.293

似乎`/media/search`端点不支持分页，请参阅[https://github.com/potomak/jquery-instagram/issues/35](https://github.com/potomak/jquery-instagram/issues/35)

# sql - SQL查询避免循环或游标获取记录

> ID：12316495
> 
> 赞同：2
> 
> 时间：2012-09-07T10:41:25.657
> 
> 标签：sql

我有3张桌子如下

```
Table #1 has column UserId and UserName

Table #2 has column MenuId and MenuName

Table #3 has column MappingId, UserId, MenuId 
```

（在表#3 列中，UserId 和 MenuId 分别与表#1 userId 和表#2 MenuId 具有外键关系。）

我想要选择语句

```
UserName, MenuName, AllowedDisallowedFlag

Where 

UserName is Names of User From Table #1

MenuName is Names of Menu from Table #2 
```

如果表#3 中存在 UserName和`AllowedDisallowedFlag`MenuName 组合，则为真，否则为假。

有没有办法在不使用游标或循环的情况下实现这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-07T10:47:13.330

你需要这样的东西：

```
SELECT DISTINCT
    UserName,
    MenuName,
    CASE WHEN Table3.UserID IS NULL THEN 0 ELSE 1 END AS Allowed
    FROM Table1
    CROSS JOIN Table2
    LEFT JOIN Table3 ON Table1.UserID = Table3.userID 
    AND Table3.MenuID = Table2.MenuID 
```

这是一个[SQL 小提琴](http://www.sqlfiddle.com/#!3/7b715/1)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T10:51:09.237

请尝试查询（我没有执行）：

```
SELECT
(SELECT UserName FROM Table#1 T1 WHERE T1.UserId=T2.UserID) AS UserName,
(SELECT MenuName FROM Table#2 T3 WHERE T3.MenuId=T2.MenuID) AS MenuName,
(CASE WHEN ISNULL(UserId,'')<>'' AND ISNULL(MenuID,'')<>'' THEN TRUE ELSE FALSE END) AS AllowedDisallowedFlag FROM Table#3 T2 
```

注意：提供的 UserID 和 MenuID 是唯一的。

# arrays - Delphi 将字符串数组发送到 Java Web 服务始终为空

> ID：12316497
> 
> 赞同：1
> 
> 时间：2012-09-07T10:41:32.163
> 
> 标签：arrays, web-services, delphi, soap, client

我在java中使用NetBeans编写了一个简单的web服务，一个函数接受一个字符串数组。然后我用delphi写了一个web服务客户端并调用函数，服务器总是收到一个空数组。

当我使用soapUI 测试web 服务时，它运行正常。

我检查了delphi客户端发送的xml内容并与soapUI进行了比较。这是由delphi客户端发送的：

```
<?xml version="1.0"?>
<SOAP-ENV:Envelope xmlns:SOAP-ENV="http://schemas.xmlsoap.org/soap/envelope/" 
    xmlns:xsd="http://www.w3.org/2001/XMLSchema"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
  <SOAP-ENV:Body>
    <helloList xmlns="http://hw.xzq.com/">
      <helloList>line 1</helloList>
    </helloList>
  </SOAP-ENV:Body>
</SOAP-ENV:Envelope> 
```

这是由 soapUI 发送的：

```
<soapenv:Envelope
   xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/"
   xmlns:hw="http://hw.xzq.com/">
   <soapenv:Header/>
   <soapenv:Body>
      <hw:helloList>
         <!--Zero or more repetitions:-->
         <helloList>?</helloList>
      </hw:helloList>
   </soapenv:Body>
</soapenv:Envelope> 
```

我将delphi客户端的xml内容复制到soapUI，服务器现在收到空数组。

我通过更改以下三行来修改 xml 内容：

```
 <hw:helloList xmlns:hw="http://hw.xzq.com/">
      <helloList>line 1</helloList>
    </hw:helloList> 
```

在此之后，服务器收到了我的字符串数组。

所以，我认为问题是delphi客户端发送没有前缀命名空间的数组内容。但是如何纠正呢？谢谢你的帮助！

顺便说一句，注释 InvRegistry.RegisterInvokeOptions(TypeInfo(HelloWorld), ioDocument); 没有帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T12:30:25.813

我可以用 NetBeans 7.2 / JAX-WS 和 Delphi 2009 验证问题：

*   简单的数据类型有效，数组失败
*   我不得不取消注释生成单元中的一行，如[Delphi 2007 中所述，没有正确使用 JAX-WS Web 服务](https://stackoverflow.com/questions/462171/delphi-2007-not-consuming-jax-ws-web-service-properly)
*   我尝试了 .NET 3.0 / Metro 1.0 和 .NET 3.5 / Metro 1.3 兼容性

也许较新的 Delphi 版本可以处理这个问题（Delphi XE3 也许任何人）

我的Java代码：

```
@WebMethod(operationName = "example")
public void testArray(@WebParam(name = "arr") String[] arr) {

    System.out.println("in web method");

    System.out.println("Array has " + arr.length + " entries");

    for (String s : arr) {
        System.out.println(s);
    }
} 
```

另请参阅：[使用 Web 服务的 Delphi 和 Java 集成](https://mikejustin.fogbugz.com/default.asp?W5)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-08T04:43:45.320

我使用带有 Metro 2.0（.NET 3.5/Metro 1.3 兼容）的 NetBeans 7.2 编写 Web 服务，客户端由安装了 Delphi SOAP Runtime 和 Importer Update (24535) 的 delphi 7 编写。

我认为问题是 delphi 客户端生成的 xml 与 Web 服务不兼容。

我想这可能会有所帮助，但我不知道如何在 java 中做同样的事情。

```
In the Server, to go to the SOAP web module, select the HTTPSoapPascalInvoker
component, and open up the Options property in the Object Inspector. Make sure
the option "soRootRefNodesToBody" is checked. 
```

另一方面，我想对 Web 服务使用“RFC”类型可能会有所帮助，但 RFC 类型需要 JAXB 并且不支持 java.util.List。

那么，另一种方法可以纠正这个问题吗？

# fonts - 包括谷歌字体链接或导入？

> ID：12316501
> 
> 赞同：254
> 
> 时间：2012-09-07T10:41:41.383
> 
> 标签：fonts, webfonts, google-webfonts

在页面上包含 Google 字体的首选方式是什么？

1.  通过`<link>`标签

    ```
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Judson:ital,wght@0,400;0,700;1,400&display=swap" rel="stylesheet"> 
    ```

2.  通过样式表中的导入

    ```
    @import url('https://fonts.googleapis.com/css2?family=Kameron:wght@400;700&display=swap'); 
    ```

3.  使用[Web 字体加载器](https://github.com/typekit/webfontloader)

* * *

## 回答 #1

> 赞同：384
> 
> 时间：2012-09-12T01:12:53.093

对于 90% 以上的情况，您可能需要`<link>`标签。根据经验，您希望避免使用`@import`规则，因为它们会延迟加载包含的资源，直到获取文件为止。如果您有一个“扁平化”@import 的构建过程，那么您会使用 Web 字体创建另一个问题: 像 Google WebFonts 这样的动态提供程序提供特定于平台的字体版本，因此如果您只是内联内容，那么您最终会在某些平台上遇到损坏的字体。

现在，你为什么要使用网络字体加载器？如果您需要*完全*控制字体的加载方式。大多数浏览器会将内容绘制到屏幕上，直到所有的 CSS 都被下载并应用——这避免了“无样式内容的闪烁”问题。缺点是……在内容可见之前，您可能会有额外的暂停和延迟。使用 JS 加载器，您可以定义字体可见的方式和时间。例如，您甚至可以在将原始内容绘制到屏幕上之后淡入它们。

再一次，90% 的情况是`<link>`标签：使用好的 CDN，字体会很快下降，甚至更有可能从缓存中提供。

如需更多信息并深入了解 Google Web Fonts，请查看此[GDL 视频](https://www.youtube.com/watch?v=sqesm0euf9M)

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2019-06-03T08:27:30.020

如果您关心 SEO（搜索引擎优化）和性能，最好使用`<link>`标签，因为它可以预加载字体。

例子：

```
<link rel="preconnect" href="https://fonts.gstatic.com/" crossorigin>
<link rel="preload" href="https://fonts.gstatic.com/s/quicksand/v7/6xKtdSZaM9iE8KbpRA_hK1QNYuDyPw.woff2" as="font" crossorigin>
<link rel="preload" href="https://fonts.gstatic.com/s/lato/v14/S6uyw4BMUTPHjx4wXiWtFCc.woff2" as="font" crossorigin>
<style>
@font-face {
 font-family: 'Lato';
 font-style: normal;
 font-weight: 400;
 src: local('Lato Regular'), local('Lato-Regular'), url(https://fonts.gstatic.com/s/lato/v14/S6uyw4BMUTPHjx4wXiWtFCc.woff2) format('woff2');
 unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6, U+02DA, U+02DC, U+2000-206F, U+2074, U+20AC, U+2122, U+2191, U+2193, U+2212, U+2215, U+FEFF, U+FFFD;
}
@font-face {
 font-family: 'Quicksand';
 font-style: normal;
 font-weight: 400;
 src: local('Quicksand Regular'), local('Quicksand-Regular'), url(https://fonts.gstatic.com/s/quicksand/v7/6xKtdSZaM9iE8KbpRA_hK1QNYuDyPw.woff2) format('woff2');
 unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6, U+02DA, U+02DC, U+2000-206F, U+2074, U+20AC, U+2122, U+2191, U+2193, U+2212, U+2215, U+FEFF, U+FFFD;
}
</style> 
```

有关更多信息，请阅读： [https ://ashton.codes/preload-google-fonts-using-resource-hints/](https://ashton.codes/preload-google-fonts-using-resource-hints/)

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2019-06-03T08:18:29.070

使用`<link>`Google 提供的，因为字体有版本控制，但在它上面使用 HTML5 的预连接功能要求浏览器打开 TCP 连接并提前与 fonts.gstatic.com 协商 SSL。这是一个示例，显然需要驻留在您的`<head></head>`标签中：

```
<link rel="preconnect" href="https://fonts.gstatic.com/" crossorigin>
<link href="https://fonts.googleapis.com/css?family=Roboto&display=swap" rel="stylesheet"> 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2021-05-25T14:36:30.930

我了解其他答案的建议是`<link>`在 html 文件中使用。

我最近意识到有一个用例供我`@import`在 css 文件中使用。

原因很简单：我正在为我的业余项目制作静态网站，我更看重便捷方式而不是 SEO 或与稀有平台的兼容性等。

在 css 文件中使用的好处`@import`是，如果我想更改字体，我需要做的就是在 css 文件中修改几行。就这样，故事结束。如果我`<link>`在html文件中使用，除了更改css文件中的字体之外，我还必须更新和上传所有html文件，这有点不方便。

长话短说：`@import`在css文件中是自包含的，所以更新方便。它对于测试和尝试不同的字体特别有用。

# c# - 防止在 DotNetBar AdvTree/TreeControl 的子节点上拖放

> ID：12316503
> 
> 赞同：1
> 
> 时间：2012-09-07T10:41:46.780
> 
> 标签：c#, treecontrol, dotnetbar

我正在使用 DotNetBar Advtree 组件实现 TreeControl。但是，我似乎很难找到使特定节点不可能有任何孩子的属性。我想在下面停止以下内容；

![如何使用 TreeControl 组件阻止这种情况？](../Images/9658de7a8bb4f4fd3254eb3ab06f4122.png)

例如，RSS 提要不能包含在 RSS 提要中。实际上，我希望某些节点可以拖动，并且可以有子节点，而其他节点只能拖动。

![在此处输入图像描述](../Images/83ff3339c13853dc3509c04b5a9509ec.png)

谢谢你的帮助。我注意到我设置为 -1 或 5000 的属性 NodesIndent 但都没有任何帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T08:17:36.037

根据[http://www.devcomponents.com/kb2/?p=327](http://www.devcomponents.com/kb2/?p=327)，有一个 DragDropEnabled 属性来控制它。如果这不起作用，请处理 BeforeNodeDragStart 事件并取消拖动。

[编辑：添加以下内容]

为了防止在某些节点而不是其他节点下拖动节点，请处理 BeforeNodeDrop 事件并设置 Cancel=true 如果被拖动的节点不能作为子节点添加到目标节点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-10T12:58:51.803

刚刚在文档中发现；

“获取或设置被拖动节点的 NewParentNode.Nodes 集合内的新插入位置。如果 InsertPosition 为 -1，则 ParentNode 指的是当前鼠标悬停的节点，拖放节点将作为子节点添加到该节点。”</p>

所以基本上我可以捕获它是否被添加为子节点，比较节点类型并决定是否接受丢弃。

# java - Java 正则表达式到 JavaCC

> ID：12316504
> 
> 赞同：0
> 
> 时间：2012-09-07T10:41:51.257
> 
> 标签：java, regex, javacc

我有下面的字符串（*），我需要用 Java CC 解析它。

初始字符串：(*)

```
 SPECIAL_STEP=\/file1\/file_1\/plugins\/plugin_folder\/folder1|
\/folder/subfolder|
\/stebs_folder\/cancan_folder|
\/fis_alb\/|
\/special_folder[^d].*|
\/.*_self_folder\/|
\/.*_conditional\/|

[step888#hrhkrtmlkhd]
FUNCTIONS=grregerg 
```

我需要提取下一个子字符串：

```
`SPECIAL_STEP=\/file1\/file_1\/plugins\/plugin_folder\/folder1|
\/folder/subfolder|
\/stebs_folder\/cancan_folder|
\/fis_alb\/|
\/special_folder[^d].*|
\/.*_self_folder\/|
\/.*_conditional\/|` 
```

我需要在没有单词“[step”的情况下提取它；并将相同的单词（“[step”）保留到输入流中。

当我使用 Java 正则表达式时这很简单，但我需要一个解决方案来使用 JavaCC 获得相同的结果

在 Java 中，我有以下正则表达式：`SPECIAL_STEP=[^=]*(?=\r?\n\[step))`.

我现在需要在 JavaCC 中做同样的事情，但我不知道是否可以在 JavaCC 中进行积极的前瞻。

# macos - Jersey SEVERE：Servlet load() 异常

> ID：12316505
> 
> 赞同：0
> 
> 时间：2012-09-07T10:41:52.960
> 
> 标签：macos, web-services, rest, jersey

我使用 Rest Web Service 制作了一个项目。在我的 Windows PC 上工作正常，但我需要把它放在 MAC 机器上（使用 OS X 10.8.1），当我执行它时，它给了我这个异常：

```
SEVERE: Servlet /pt.Agile21.Acerola.WebService threw load() exception
java.lang.ClassNotFoundException: com.sun.jersey.spi.container.servlet.ServletContainer 
```

Windows和MAC之间存在一些相关的差异？？我已经在 MAC 上配置了 TomCat，如果我在终端上设置 tomcat，它也会毫无问题地进入 localhost:8080！所以我认为问题出在日食上，对吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T11:11:20.673

听起来您不需要 jar 文件。为了运行 jersey 应用程序，您需要 jersey-server.jar 以及应用程序 lib 文件夹中的 jersey-core.jar 文件。

# ms-access - 单个表单显示多个查询的输出

> ID：12316515
> 
> 赞同：0
> 
> 时间：2012-09-07T10:42:29.230
> 
> 标签：ms-access, vba, ms-access-2003

感谢在其他问题中获得的帮助和一些很好的教程，我可以创建我的访问数据库来保存我图书馆中的书籍，我现在有一个很好的表格（有几个子表格）可以将新书输入我的数据库。（这一切仅基于 access 2003）。

下一步是能够查询数据库并搜索书籍。

我正在考虑采用以下方法，但我不确定它是否可行和/或努力是否会令人望而却步。事实上，我已经有了自己的担忧和/或问号。

您能否分享您对我的方法的看法并最终解决我的一些担忧？（链接到解决我的任何问题的其他问题或资源非常好！）
提前感谢您的任何贡献！

**第 1 点**. 创建带有按钮的控件表单以执行不同类型的查询（按作者、按标题等）；我还想为整个数据库提供一个“自由文本搜索”选项。此表单还将包括用于输入搜索条件的字段，例如，按作者搜索的作者等。这些字段应是具有自动完成功能的组合框，以便于用户进行搜索。
**第 2 点**。要执行的不同查询应在相应按钮的点击事件的vba代码中“硬编码”；这是因为我发现手动编写 SQL 查询更容易，尤其是当我需要从其他字段传递参数时；另外，当我可以将它们“存储”在我的代码中时，我认为不需要在数据库中单独地增加表单和存储查询。
**第 3 点**. 查询的最终结果（一个记录集？）然后将显示在一个表格中。无论执行的查询如何，我都会始终选择要输出的相同字段，因此应使用单个表单作为所有不同查询的输出。出于这个原因，我想要一个表单，这样我就可以一劳永逸地自定义它的外观和行为。如果可能，表格应为数据表类型（但这不是严格要求）。考虑到搜索条件的差异，我相信将查询结果存储在易失性表/记录集中是非常好的，并且在每次请求时都必须重新填充它们不是问题。

**对第 1 点的关注**。自由文本搜索真的可行吗？我怎么能这样做？
**对第 2 点的担忧**. 使用所有输入参数构建一个包含 SQL 查询的字符串很容易，但是如何运行查询呢？我在教程中的搜索让我感到困惑，我不知道该怎么做。如前所述，我不想单独存储查询，然后在查询集合中引用特定查询，而是执行和“SQL 字符串”。这是怎么做到的？以及如何将结果存储在变量中？Recordset 是存储临时表的正确变量类型吗？
**对第 3 点的担忧**. 如何创建“输出”表单？我应该将字段（在设计视图中）创建为未绑定还是将它们绑定到我的数据库中的表？以及如何使用变量中的数据填充表单？鉴于我的数据库中有多个多对多关系（如作者和书籍），数据表是否可行。如果我必须再次访问表单和子表单，鉴于“表格”在设计期间不存在而仅在“运行时”存在，我如何连接子表单和主表单？而且我也没有查询，因为如前所述，这些是不同的，并且在 vba 代码中是硬编码的。

**PS**关于信息，所有这些都是作为“爱好”完成的，并且通过这样做来学习新的东西（访问和vba）......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T11:04:32.847

> Point 1\. 创建一个带有按钮的控件表单来执行不同类型的查询（按作者、按标题等）；我还想为整个数据库提供一个“自由文本搜索”选项。此表单还将包括用于输入搜索条件的字段，例如，按作者搜索的作者等。这些字段应是具有自动完成功能的组合框，以便于用户进行搜索。

您当然可以使用下拉菜单来填充表单。有一个向导。您不能使用下拉菜单在任何地方搜索，但有一个方便的搜索按钮，或者您可以连接并使用 InStr。

> Point 2.要执行的不同查询要“硬编码”在对应按钮的on-click事件的vba代码中；这是因为我发现手动编写 SQL 查询更容易，尤其是当我需要从其他字段传递参数时；另外，当我可以将它们“存储”在我的代码中时，我认为不需要在数据库中单独地增加表单和存储查询。

当您开始制作 accdes/mdes 时，您将看到将查询排除在代码之外的意义

> 第 3 点。查询的最终结果（一个记录集？）然后应显示在一个表格中。我将始终选择要输出的相同字段，而不管执行的查询如何，因此应使用单个表单作为所有不同查询的输出。出于这个原因，我想要一个表单，这样我就可以一劳永逸地自定义它的外观和行为。如果可能，表格应为数据表类型（但这不是严格要求）。考虑到搜索条件的差异，我相信将查询结果存储在易失性表/记录集中是非常好的，并且在每次请求时都必须重新填充它们不是问题。

重新填充会导致膨胀。如果可以，请始终避免使用 MS Access 中的临时表。

# c# - c# Excel 为什么要从单元格中删除与整行相对的重复项？

> ID：12316517
> 
> 赞同：4
> 
> 时间：2012-09-07T10:42:39.523
> 
> 标签：c#, excel, duplicates, removeall

我已经进行了一些搜索，但我发现的功能似乎并没有按我的预期工作，我是否传入了错误的参数？

我想使用 c# 删除 excel 电子表格中的所有重复行条目。

```
Range theRange = workSheet.UsedRange as Range;
theRange.RemoveDuplicates(XlYesNoGuess.xlYes); 
```

它似乎所做的只是删除具有任何重复单元格值的行，而不是将行视为一个整体。

我究竟做错了什么？当我进入excel并单击数据>>删除重复项并选择所有列时，它会给我我想要的。这样做的程序化方式是什么？

`Removeduplicates`似乎相当快，所以我不想做任何类型的循环等。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-07T12:01:16.160

你的问题一直困扰着我一整天，我终于想通了！

您需要指定要从中删除重复项的列号。

即使您已经指定了范围，您仍然需要指定列。该描述具有误导性，因为它将其声明为可选，并表明如果将其留空，则将在整个范围内搜索重复项。这不是真的。

该描述更具误导性，因为它说这可以是一个对象数组。指定列的唯一方法是按数字，将整数数组传递到此方法会导致运行时错误。

您传递给此方法的第二个布尔参数按预期工作，它允许您声明列中的第一个单元格包含标题。

关于从第一列中删除重复项，以下代码对我有用：

```
using System.Runtime.InteropServices;
using Excel = Microsoft.Office.Interop.Excel;

namespace RemoveDupes
{
    class Program
    {
        static void Main()
        {
            var excel = new Excel.Application();
            var workbook = excel.Workbooks.Open(@"C:\Test\Test.xlsx");
            Excel.Worksheet worksheet = workbook.Sheets[1];

            var usedRange = worksheet.UsedRange;

            usedRange.RemoveDuplicates(1);

            workbook.Close(true);

            Marshal.ReleaseComObject(excel);
        }
    }
} 
```

# visual-studio-2010 - 水晶报表每页只显示一行

> ID：12316518
> 
> 赞同：2
> 
> 时间：2012-09-07T10:42:39.667
> 
> 标签：visual-studio-2010, c#-4.0, crystal-reports, datatable

我在 Visual Studio 2012 中使用 Crystal Reports。我对 Crystal Reports 完全陌生。我刚刚将我的数据字段添加到详细信息部分，但不是在一页中显示所有行，而是为每一行创建一个新页面。我没有使用任何分组或更改部分分页设置。

即使我在之后和之前检查了部分专家的新页面，它也没有被检查。我还检查了 Keep Together，它已检查。

我已经在详细信息部分添加了数据，我只有一个详细信息部分。

我附上了我的水晶报表设计视图的屏幕截图

伙计们请帮帮我......我被这个困住了

![报告预览][1] [http://imageshack.us/photo/my-images/201/reportay.jpg/](http://imageshack.us/photo/my-images/201/reportay.jpg/)

![报表设计模式][2] [http://imageshack.us/photo/my-images/26/reportdesign.jpg/](http://imageshack.us/photo/my-images/26/reportdesign.jpg/)

先感谢您

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-07T13:41:11.250

您必须减少细节区域中的空白 [在设计模式下]。
**每行获取详细信息区域的高度，因此该区域应该只有一行高。** ![Crystal 报表设计视图，重点是详细信息部分的行高。](../Images/4c78281145bd7305b9e80d3e6000bf8e.png)

*编辑：*使报表页脚与详细信息部分相同，但没有任何数据字段。这样，如果（何时）数据行没有填满最后一页，报表将从数据末尾填充到页脚开头。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T07:17:30.397

确保您使用详细信息部分来显示所有这些行。因为如果你碰巧使用页眉或报表头，行就不会增长。
如果您确定已减少设计视图中的空白区域，请检查 Section Expert 中的“New Page Before”或“New Page After”选项。

请尝试所有这些并返回您获得的结果。等待帮助你！

# ruby-on-rails-3 - 更新/删除 ActiveRecord AREL 查询参数

> ID：12316520
> 
> 赞同：1
> 
> 时间：2012-09-07T10:42:46.350
> 
> 标签：ruby-on-rails-3, arel

我希望能够从活动记录查询中删除条件。

我的情况是：

用户通过 ui 选择一些记录，并进行批量更新。

（导致 AREL 查询，然后调用 update_all）。

然后，我想发送一封电子邮件，通知相关人员更新的记录。

当更新更新原始查询中的属性时，这对我不起作用，因为数据更改并且不再起作用。所以我的问题是，是否可以更新 AREL 查询并删除条件？

# xslt-2.0 - 如何在两个不同的强调标签之间添加空格

> ID：12316522
> 
> 赞同：2
> 
> 时间：2012-09-07T10:42:55.320
> 
> 标签：xslt-2.0

我在两个不同重点之间的间距值方面遇到问题。下面给定 xslt 的当前输出还可以，但两个标签之间没有间距。请帮助我，因为我对转型不太了解。详细的问题可以在下面看到。

这是输入 XML：

```
<caption>
    <content>Box</content>
      <number>1</number>
      <description>
        <em type="bold">Some text with scientic name: </em>
    <em type="bolditalic">fhadinistis</em>
      </description>
</caption> 
```

输出是：

```
<cap>
    <text>Box</text>
    <num>1</num>
    <content>
        <b>Some text with scientic name:</b><b>
            <i>fhadinistis</i>
        </b>
    </content>
</cap> 
```

所需的输出应该是：（注意在结束和开始粗体标记之间有一个空格）

```
<cap>
    <text>Box</text>
    <num>1</num>
    <content>
        <b>Some text with scientic name:</b> <b>
            <i>fhadinistis</i>
        </b>
    </content>
</cap> 
```

我的 XSLT 是：

```
<xsl:template match="em">
    <xsl:choose>
        <xsl:when test="@type='bolditalic'">
            <b>
                <it>
                    <xsl:apply-templates/>
                </it>
            </b>
        </xsl:when>
        <xsl:when test="@type='boldunderline'">
            <b>
                <ul>
                    <xsl:apply-templates/>
                </ul>
            </b>
        </xsl:when>
        <xsl:when test="@type='italicunderline'">
            <it>
                <ul>
                    <xsl:apply-templates/>
                </ul>
            </it>
        </xsl:when>                 
    </xsl:choose>
</xsl:template> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T12:38:42.903

只需将其放在模板的开头即可：

```
 <xsl:if test="preceding-sibling::*[1][self::em]">
      <xsl:text> </xsl:text>
    </xsl:if> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T10:49:45.577

无论您需要空格，您都可以尝试使用：

```
<xsl:text>#x20;</xsl:text> 
```

甚至

```
<xsl:text> </xsl:text> 
```

应该可以解决问题，但很容易错过代码中的空格，最好使用#x20; 为了能见度。

您可以将它放在 xsl:choose 关闭标记之后。因此，即使 xsl:choose = nothing 并且您得到多个空格，HTML 也只会显示 1（默认情况下）

将其实现为：

```
<xsl:template match="em">
    <xsl:choose>
        <xsl:when test="@type='bolditalic'">
            <b>
                <it>
                    <xsl:apply-templates/>
                </it>
            </b>
        </xsl:when>
        <xsl:when test="@type='boldunderline'">
            <b>
                <ul>
                    <xsl:apply-templates/>
                </ul>
            </b>
        </xsl:when>
        <xsl:when test="@type='italicunderline'">
            <it>
                <ul>
                    <xsl:apply-templates/>
                </ul>
            </it>
        </xsl:when>                 
    </xsl:choose>
    <xsl:text>#x20;</xsl:text>
</xsl:template> 
```

# javascript - Javascript - 从随机单词数组创建段落

> ID：12316523
> 
> 赞同：0
> 
> 时间：2012-09-07T10:42:57.070
> 
> 标签：javascript, arrays, random

我试图以一组单词为例...

```
Apple
Banana
The
Orange
House
Boat
Lake
Car
And 
```

我希望能够使用 javascript 将这些单词中的 50 个随机输出到 div。这可能吗？如果可以，我应该考虑将它们放入数组或类似的东西中吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T10:47:44.907

是的，这是可能的，使用该`Math.random`函数生成文本并`innerHTML`填充 div。

数组使获取单词更容易。

```
var tokens = ['Apple', 'Banana', 'The' ...];
var text = '';
for (var i=0; i<50; i++) {
    text += tokens[Math.floor(Math.random()*tokens.length)];
}
document.getElementById('myDiv').innerHTML = text; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-07T10:48:41.517

是的，使用数组。要从这样的数组中获取随机单词，请使用以下命令：

```
function getRandomWord() {
   var words = ['Apple','Banana','The','Orange','House','Boat','Lake','Car','And'];
   return words[Math.floor(Math.random() * words.length)];
} 
```

然后以您喜欢的程度调用该函数。

```
var paragraph = [];
for(var i = 0; i < 50; i++)
    paragraph.push(getRandomWord());

$('#my-container').text( paragraph.join(' ') ); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-07T10:53:15.583

这是可能的，这是一个快速而肮脏的例子。（对不起，我没有更多的时间自动取款机）

```
var words = ['apple', 'beer', 'cake', 'potato', 'orange'],
    div = document.getElementById('foo');

for(i = 0; i < 50; i++) {
    div.innerHTML += ' ' + words[Math.floor(Math.random() * words.length)];
} 
```

​</p>

[http://jsfiddle.net/LavY5/](http://jsfiddle.net/LavY5/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-07T10:53:43.867

是的，把你所有的话放在一个`Array`. 然后应用[**Fisher-Yates shuffle algorithm**](http://en.wikipedia.org/wiki/Fisher-Yates_shuffle)来随机化/随机化您的单词数组。然后，获取`slice`指定大小的数组，并将这些单词打印到 HTML：

```
var words = [ "Apple", "Banana", "The", "Orange", "House", "Boat", "Lake", "Car", "And" ];

function fisherYates (arr) {
  var n = arr.length;
  while (n) {
    var j = Math.floor(Math.random() * n--);
    var temp = arr[n];
    arr[n] = arr[j];
    arr[j] = temp;
  }
  return arr;
}

fisherYates(words); // shuffle
var randomParagraph = words.slice(0, 5).join(" "); // take 5 random words
document.write(randomParagraph); 
```

**[演示](http://jsfiddle.net/R66Rp/)**。​</p>

# python - 如何处理 Django/Tastypie 中的动作？

> ID：12316524
> 
> 赞同：1
> 
> 时间：2012-09-07T10:43:06.233
> 
> 标签：python, django, tastypie

我正在编写一个网络应用程序，其目的是充当应用程序和亚马逊 API 之间的中间层。我认为 REST 风格的 API 适合并选择 Tastypie 来简化实现。

我创建了一个名为 Instance 的模型和一个与之配套的 Tastypie 资源。为了简化一点，假设对该资源的 PUT 将启动 EC2 实例，而 DELETE 将停止它。我需要与亚马逊的 API 通信的地方在哪里处理这些操作的正确位置？它应该放在资源代码、模型代码还是其他地方？

另外，向客户端返回错误消息的最合适方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T11:03:31.770

我会这样做：

*   PUT 创建一个新的 Instance 并将其存储在数据库中
*   实例模型上的[Django Post Save Signal](https://docs.djangoproject.com/en/dev/ref/signals/#post-save)执行一个特殊的事情：

在models.py中：

```
@receiver(post_save, sender=Instance, dispatch_uid="create_instance")
def create_instance(sender, **kwargs):
    instance = kwargs['instance']
    created = kwargs['created']
    raw = kwargs['raw']
    if instance and created and not raw:
        from my_project.my_app.tasks import create_ec2_instance
        result = create_ec2_instance(instance)
        if result:
             instance.started = True
             instance.save() 
```

在tasks.py中：

```
def create_ec2_instance(instace):
    # do the calls to ec2 to create the instance and get a result form it
    return the_result_from_ec2 
```

# linux - 使用 gSOAP 通过 WCF Windows 服务下载文件

> ID：12316528
> 
> 赞同：0
> 
> 时间：2012-09-07T10:43:27.403
> 
> 标签：linux, wcf, web-services, gsoap

我有一个 Windows Communication Foundation Web 服务，我需要访问它才能将文件从我的 linux gsoap 客户端下载。

界面如下：

```
public interface IFileDownload
{
   [OperationContract]
   Stream GetUpdate(string updateName);
} 
```

此函数接受字符串（要下载的文件的唯一名称）并返回要下载的文件的 Stream。

这已被其他 Windows 客户端使用。

我需要构建一个 linux gsoap 客户端来调用它。

我已经在 gsoap 网站上构建了 calc 示例，它运行良好。我已经读过要调用的函数必须始终返回一个 int（错误代码），并且最后一个参数实际上是“out”参数。

在这种情况下，如果返回类型是 Stream 而不是 int，我该怎么办？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T07:33:19.270

我认为您必须定义一个流类型的公共属性，然后必须使用**MessageContract**对其进行标记，然后从函数内部操作该属性。

# css - css3 派不工作

> ID：12316529
> 
> 赞同：1
> 
> 时间：2012-09-07T10:43:30.913
> 
> 标签：css

我有这个代码：

```
ul.topMenu li.language .dropDown {
    background: url(../img/arrow-dropdown.png) no-repeat 137px 9px;
    border: 1px solid #c5c2be;
    -webkit-border-radius: 4px;
    -moz-border-radius: 4px;
    border-radius: 4px;
    behavior: url(PIE.htc);
} 
```

边框半径在 firefox、chrome 和 IE9 中效果很好，但由于某种原因，即使我在 index.html 所在的目录中有 PIE.htc 文件，ie8 也无法识别它。我错过了什么？我只有 PIE.htc 文件包含在项目中，我还需要 pie 中的其他文件吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T21:50:17.453

你可以试着把`position:relative;`

# jquery - 粉碎杂志如何先加载图像然后再加载内容

> ID：12316531
> 
> 赞同：-1
> 
> 时间：2012-09-07T10:43:36.607
> 
> 标签：jquery, html, css, loading, lazy-loading

如果您看到加载 www.smashingmagazine.com，它会先加载嵌入图像和背景图像，然后再加载内容。

它是如何使用延迟加载概念的。

感谢广告问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T10:46:13.517

加载所有隐藏的非图像内容就足够了，然后在正文 onload 中显示它（而不是在 DOMReady 上，因为在加载图像之前不会触发 onload）。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-07T11:24:12.987

滚动时加载图像或数据时不使用延迟加载器，因此使用了图像预加载功能。

# c - C中的二进制分解

> ID：12316536
> 
> 赞同：0
> 
> 时间：2012-09-07T10:43:46.327
> 
> 标签：c, binary

我正在编写一些代码以在培训站点上以二进制形式分解数字。我已经在我的本地编译器上测试了一百次，它工作得很好，但是培训网站告诉我有错误。

（我的代码既不优雅也不高效，尤其是循环，但我分解了代码以了解错误可能在哪里）。谁能告诉我是否有错误？

```
#include <stdio.h>
#include <stdlib.h>

//function that displays the greatest power of 2 less than a fixed number N
int residu(int N)

{
    int i;
    int M=2;
    for(i=0;i<N;i++){
        if(M>N){break;}else{M=2*M;i++;}
    }
    return M/2;
}

int main()
{
    int i;

    //N is the input to decompose
    int N;
    scanf("%d",&N);
    //We will search for the greatest power of 2 less than a fixed number N, 
    //than repeating the some process with the residue of N with the greatest power of 2        //less than N, so we have to store the value of N for the loop (see below) we will use to work //correctly
    int M;
    M=N;
    //D displays the diffrence betwenn two successive powers of 2 that appears in the    //binary decomposition, (we will then print "O")
    int D;
    D=log(residu(N))/log(2);

        for(i=0;i<M;i++){
            //If N==residu(N), the decomposition is finished
            if(N==residu(N)){printf("1");int k;
                for(k=0;k<D;k++){printf("0");}break;}
            else{
             // N is a the residue of the former value of N and the greatest power of 2 //less than N
                N=N-residu(N);
                D=D-log(residu(N))/log(2);
                printf("1");
                int k;
                for(k=0;k<D-1;k++){printf("0");
                }
                D=log(residu(N))/log(2);
            }        
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-07T11:24:43.007

这是浮点计算的典型问题。该函数`log`适用于浮点数。

`log(8) / log(2)`正在计算`2.999...`，然后`2`在转换为时截断为`int`.

这就是为什么你得到错误的结果。确切的行为取决于编译器/机器。如需进一步阅读，请参阅[Goldberg](http://docs.oracle.com/cd/E19957-01/806-3568/ncg_goldberg.html)等。

以这种方式混合整数和浮点计算通常是一个坏主意。您的函数`residu`应该报告准确的二进制对数。或者你实现了一个专门的函数来计算整数的日志，比如

```
unsigned binlog(unsigned n) {
    unsigned i = 0;
    while (n > 1) { n /= 2; ++i; }
    return i;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-07T10:51:37.100

您需要包含数学库

```
#include <math.h> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-07T11:03:50.087

如前所述，您缺少数学库的包含：

```
#include <math.h> 
```

此外，还有一个错误是该程序不适用于输入“0”。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-07T11:12:26.757

尝试以下修复：

1) 为日志函数包含 math.h

```
#include <math.h> 
```

2）在每个函数的顶部（或在每个函数内的每个作用域的顶部）声明所有变量，即：

```
int main() {  
int i;      
//N is the input to decompose
int N;
int M;
//D displays the diffrence betwenn two successive powers of 2 that appears in the
//binary decomposition, (we will then print "O") 
int D;
...
if(N==residu(N)){int k;printf("1");
...
else{  
   int k; 
```

3）从main中返回一些东西。它的返回类型是“int”，所以添加一个

```
return 0; 
```

4）如果仍然不这样做，您可以尝试显式类型转换这些语句的返回：

```
D=log(residu(N))/log(2);
D=D-log(residu(N))/log(2);
D=log(residu(N))/log(2); 
```

他们会发出警告，表示数据丢失会导致双重结果并将其存储在 int 中。

# nginx - Nginx 反向代理 Resin 的吞吐量

> ID：12316537
> 
> 赞同：0
> 
> 时间：2012-09-07T10:43:47.733
> 
> 标签：nginx, resin

我们正在使用 nginx+resin 来服务一个 jsp 网站。我的问题是当Web客户端向ngix的许多请求然后nginx请求resin时，所以我想知道：resin是否将数据响应给客户端或Nginx从resin获取数据然后响应客户端。如果ngix从resin获取数据然后响应数据给客户端，但是为什么我使用top命令看不到Nginx占用了很多cpu和内存资源，但是resin占用了很多资源。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-08T05:00:00.337

Nginx 充当代理。在客户端（浏览器）和后端（树脂）之间代理数据不需要大量内存和 CPU。除了在源和目标之间复制数据之外，它不做任何工作，但是做这种类型的工作该死的快，所以你看不到 nginx 在顶部。因此，如果您不使用 nginx 的另一个优点，例如缓存和非常快速的静态文件服务，那么在您的配置中它绝对是无用的。

# eclipse - Tomcat 没有从 Eclipse 部署我的 Web 项目

> ID：12316540
> 
> 赞同：29
> 
> 时间：2012-09-07T10:44:01.367
> 
> 标签：eclipse, tomcat

我正在开发网络应用程序。直到昨天一切都很好。

昨天发生了一些事情（不知道到底是什么），Eclipse 不再部署我的应用程序。

我正在使用spring和maven，但它之前工作过，所以我认为这没有问题。

当我启动我的应用程序时，启动日志中有这个：

```
7.9.2012 12:39:23 org.apache.catalina.core.AprLifecycleListener init
INFO: The APR based Apache Tomcat Native library which allows optimal performance in production environments was not found on the java.library.path: C:\Program Files\Java\jdk1.6.0_31\bin;C:\Windows\Sun\Java\bin;C:\Windows\system32;C:\Windows;C:/Program Files (x86)/Java/jre6/bin/client;C:/Program Files (x86)/Java/jre6/bin;C:/Program Files (x86)/Java/jre6/lib/i386;C:\Windows\system32;C:\Windows;C:\Windows\System32\Wbem;C:\Windows\System32\WindowsPowerShell\v1.0\;C:\Program Files (x86)\ATI Technologies\ATI.ACE\Core-Static;C:\Program Files (x86)\CVSNT\;c:\Programs\apache-ant-1.8.1\bin;C:\Program Files (x86)\Common Files\Teleca Shared;C:\SSD\Oracle11g\product\11.2.0\dbhome_3\bin;C:\SSD\Oracle11g\product\11.2.0\dbhome_1\bin;C:\Program Files (x86)\Groovy\Groovy-1.8.6\bin;C:\Programs\TortoiseSVN-1.7.7\bin;c:\Programs\apache-ant-1.8.1\bin;c:\Program Files\Java\jdk1.6.0_31\bin;c:\Programs\cygwin\bin;c:\Programs\apache-maven-2.2.1\bin;C:\SSD\Mudrc\Eclipse;;.
7.9.2012 12:39:23 org.apache.tomcat.util.digester.SetPropertiesRule begin
WARNING: [SetPropertiesRule]{Server/Service/Engine/Host/Context} Setting property 'source' to 'org.eclipse.jst.jee.server:MudrcWeb2' did not find a matching property.
7.9.2012 12:39:23 org.apache.coyote.AbstractProtocol init
INFO: Initializing ProtocolHandler ["http-bio-9091"]
7.9.2012 12:39:23 org.apache.coyote.AbstractProtocol init
INFO: Initializing ProtocolHandler ["ajp-bio-8009"]
7.9.2012 12:39:23 org.apache.catalina.startup.Catalina load
INFO: Initialization processed in 491 ms
7.9.2012 12:39:23 org.apache.catalina.core.StandardService startInternal
INFO: Starting service Catalina
7.9.2012 12:39:23 org.apache.catalina.core.StandardEngine startInternal
INFO: Starting Servlet Engine: Apache Tomcat/7.0.29
7.9.2012 12:39:24 org.apache.coyote.AbstractProtocol start
INFO: Starting ProtocolHandler ["http-bio-9091"]
7.9.2012 12:39:24 org.apache.coyote.AbstractProtocol start
INFO: Starting ProtocolHandler ["ajp-bio-8009"]
7.9.2012 12:39:24 org.apache.catalina.startup.Catalina start
INFO: Server startup in 693 ms 
```

当我使用spring时，日志中至少应该有上下文初始化。

我在这里读了几个类似的问题

*   [Eclipse Indigo 中的 Tomcat 7：javax.naming.NameNotFoundException：找不到资源 /WEB-INF/classes](https://stackoverflow.com/questions/9260555/tomcat-7-in-eclipse-indigo)
*   [Tomcat 在 Eclipse 中启动但无法连接到 http://localhost:8085/](https://stackoverflow.com/questions/2280064/tomcat-started-in-eclipse-but-unable-to-connect-to-link-to-http-localhost8085/2280650#2280650)
*   [Eclipse：从 Eclipse 启动 tomcat 服务器，不启动部署的战争](https://stackoverflow.com/questions/7857975/eclipse-starting-tomcat-server-from-eclipse-does-not-start-the-deployed-wars)
*   [Eclipse 在哪里使用 WTP 部署 Web 应用程序？](https://stackoverflow.com/questions/2119351/how-does-eclipse-deploy-web-applications-using-wtp)
*   [从 Eclipse 启动 Tomcat 时出现“SetPropertiesRule”警告消息](https://stackoverflow.com/questions/104854/setpropertiesrule-warning-message-when-starting-tomcat-from-eclipse/355378#355378)
*   [将属性 'source' 设置为 'org.eclipse.jst.jee.server:JSFTut' 没有找到匹配的属性](https://stackoverflow.com/questions/3566146/setting-property-source-to-org-eclipse-jst-jee-serverjsftut-did-not-find-a)

但没有任何帮助

我尝试将新服务器添加到 Eclipse，重命名项目，清理，但它仍然是一样的。

当我用 maven 构建它时，我可以将它部署到 Tomcat 并且它可以工作。

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-09-07T10:52:23.827

您是否检查过**Server Locations中的****部署路径**？可能是您的 tomcat 部署路径已更改，而 Eclipse 未部署您的应用程序。

 **在日食。

> 1.  窗口 -> 显示视图 -> 服务器。
> 2.  双击您的服务器。
> 3.  在 Tomcat 服务器的概述中。
>     
>     
>     
>     3.1 检查你的服务器路径
>     
>     
>     
>     3.2 检查您的部署路径

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2016-09-26T14:29:31.533

也许项目属性中的部署 Maven 程序集丢失：

[![在此处输入图像描述](../Images/0bc8b4e443d8a3a1c431e71cf72a4c97.png)](https://i.stack.imgur.com/Jo8f1.png)

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2019-06-07T12:49:19.677

我有这个类似的问题，我可以启动 tomcat 服务器，但是应用程序没有初始化或启动，所以我右键单击我的项目 --> 部署程序集 --> 单击右侧面板中的“添加”，选择'Java Build path entries'并点击'Next'，现在选择'Maven dependencies'并点击'Finish'。现在我运行服务器并成功启动了应用程序。

[![在此处输入图像描述](../Images/d76e6de61edc14c81b1cc2b8d39c79b5.png)](https://i.stack.imgur.com/Lg5cE.png) [![在此处输入图像描述](../Images/148487b4b238bbdca0a1a8537693f0a5.png)](https://i.stack.imgur.com/pUx68.png)
[![在此处输入图像描述](../Images/5ef9552f8ce55a67404bb6c6601d4e4e.png)](https://i.stack.imgur.com/AN4es.png)

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2013-11-09T17:20:59.373

已解决：我遇到了这个错误，我无法理解，花了 5 个小时。

解决方案：项目属性/面向项目/动态 web 模块版本设置为 3.0

一周后，我得到了同样的错误

FIXED2 [gwt-project-external-mode-main-main-nocache-js-not-found](https://stackoverflow.com/a/20044952/1720415)

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2014-06-03T11:44:20.233

我遇到了这个问题，我刚刚从 eclipse 中删除了服务器并重新配置了它......一切都开始正常工作......我已经面对它两次，三次，同样的事情奏效了。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2015-12-16T13:45:37.330

同样的问题，不知道为什么它只是从升级`Spring` `v3.2.x`到`v4.2.x`.

通过执行以下操作解决了它：

1.  清除所有 eclipse 文件*[.classpath, .project, .settings/]*。
2.  执行*>mvn eclipse:eclipse*
3.  执行**eclipse>project>properties>deployment** assembly add *[referenced projects, additional classpaths]*。

**在选项卡中发布**并**启动**模块`Tomcat`，它现在可以正常启动。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2016-09-28T17:01:18.557

删除服务器....... 窗口 -> 显示视图 -> 服务器。点击右键->删除

在项目运行配置中单击右键

并再次添加服务器......

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2013-08-06T05:47:29.397

我有同样的问题。我通过在 org.eclipse.wst.common.project.facet.core.xml 中制作以下条目来修复它

```
<runtime name="Apache Tomcat v7.0" /> 
```

现在这个完整的文件看起来像 -

```
<?xml version="1.0" encoding="UTF-8"?>
<faceted-project>
    <runtime name="Apache Tomcat v7.0" />
    <fixed facet="wst.jsdt.web" />
    <installed facet="java" version="1.5" />
    <installed facet="jst.web" version="2.3" />
    <installed facet="wst.jsdt.web" version="1.0" />
</faceted-project> 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2013-07-16T00:17:49.020

在 Eclipse 中查看 Web 项目中的 org.eclipse.wst.common.component 文件。

< wb-module deploy-name="PROJECT_NAME">

检查 PROJECT_NAME。可能搞砸了 同样查看 .project 文件。

希望这可以帮助！！

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2014-08-12T05:47:20.897

我遇到了同样的错误，并在删除部署后通过重新部署解决了它。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2015-11-25T16:27:33.880

我发现对我有用的唯一方法是在“Web 部署程序集”中添加一个条目

项目 webapp > 属性 > 部署程序集
添加...
源：“/target/classes”
部署路径：“WEB-INF/classes”

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2016-02-12T13:54:15.417

我这样解决了这个问题：

1.  停止服务器
2.  删除您之前执行的部署
3.  打扫
4.  再次部署

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2016-10-04T13:29:41.527

尽管已有一年的话题，但这个话题似乎对这个问题有最多的答案。就任性吧。尝试了一切，从“清理”开始，以总“.metadata”和另一个服务器设置结束，但没有任何效果。

我记得不久前我决定清理一些“pom”警告，并且有一些关于“应用于项目数据”的建议。然后我开始浏览文件夹项目，在那里我找到了我头痛的根源——一个名为“.tomcatplugin”的文件。删除它后（这是我尝试解决问题的第三个小时），一切都像魅力一样。

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2016-10-04T20:49:10.470

知道了 ：）

通常在 eclipse 引用另一个（或在正确的 web 文件夹中，可能是 webConent）时引起

1.  更新 .settings/.jsdtscope 以获得正确的 webapp 条目，类似于下面

2.  更新 org.eclipse.wst.common.component 以获得正确的 webapp 条目

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2016-10-31T08:46:57.383

我也有同样的问题，我的解决方法是：

*   安装 WTP Maven 集成（不知道有没有必要）
*   项目 -> 运行配置（选择你的 tomcat 服务器） -> 运行

几个小时以来，我尝试使用“服务器”窗口部署和启动应用程序，但没有成功。我的战争没有放在 wptwebapps 文件夹中，手动将战争部署到 webapps 工作。

使用运行配置使我的应用程序最终可部署...

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2018-05-28T10:56:02.270

我尝试了一切，但没有任何效果，所以这是另一个最终有效的解决方案（对我来说）。

我必须`Enable Java EE configuration`在 Preferences -> Maven -> Jave EE configuration 下检查

之后，您可以检查是否`Deployment assemblies`在项目设置中添加了更多条目。

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2019-05-25T13:34:37.827

就我而言，我配置了一个外部 Maven 安装，并确保使用 JDK 而不是 JRE（在 eclipse 配置和服务器环境中）。您可以从 Eclipse 运行项目的 Maven 构建以检查一切是否正常。

之后，我更新了 maven 项目，清理并构建了项目，清理了服务器，并重新部署了工件。**

# php - 肥皂给出未捕获的 SoapFault 异常：[HTTP] Error Fetching http headers

> ID：12316541
> 
> 赞同：0
> 
> 时间：2012-09-07T10:44:18.090
> 
> 标签：php, soap, wsdl

我正在尝试在 PHP 和 Web 服务的帮助下构建一个 Web 应用程序。我想通过 Web 服务使用 PHP 的 PDO 连接到数据库。我已经构建了服务器文件、客户端文件和 wsdl 文件。通过各种测试，我发现我的 wsdl 文件存在一些问题，因为当我在服务器和客户端文件中使用其他 wsdl 文件运行其他功能时，它们可以正常工作。我在 localhost 上工作，所有文件都位于 wamp/www/myApp/api/ 目录中（Apache 2.2.8，PHP 5.2.6）。我正在发布 wsdl 文件供您参考。请告诉我哪里出错了，并指导我纠正错误。谢谢。

wsdl 文件：

```
 <?xml version="1.0" encoding="utf-8"?>
    <definitions name="MyService" xmlns="http://schemas.xmlsoap.org/wsdl/" targetNamespace="http://My.Local.IP/myApp/api/my.wsdl" xmlns:soap="http://schemas.xmlsoap.org/wsdl/soap/" xmlns:xsd="http://www.w3.org/2000/10/XMLSchema">

<message name="LoginRequest">
    <part name="dns" type="xsd:string"/>
    <part name="user" type="xsd:string"/>
    <part name="password" type="xsd:string"/>
</message>
<message name="LoginResponse">
    <part name="result" type="xsd:string"/>
</message>

<portType name="Fetch_PortType">
    <operation name="Login">
        <input message="tns:LoginRequest"/>
        <output message="tns:LoginResponse"/>
    </operation>
</portType>

<binding name="MyService_Binding" type="tns:Fetch_PortType">
    <soap:binding style="rpc" transport="http://schemas.xmlsoap.org/soap/http"/>
    <operation name="Login">
        <soap:operation soapAction="http://My.Local.IP/myApp/api/Login"/>
        <input name="Login">
            <soap:body encodingStyle="http://schemas.xmlsoap.org/soap/encoding/" use="encoded"/>
        </input>
        <output name="Login">
            <soap:body encodingStyle="http://schemas.xmlsoap.org/soap/encoding/" use="encoded"/>
        </output>
    </operation>
</binding>

<service name="My_Service">
    <documentation>WSDL File MyService</documentation>
    <port name="Fetch_PortType" binding="tns:MyService_Binding">
        <soap:address location="http://My.Local.IP/myApp/api/server.php"/>
    </port>
</service>
    </definitions> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T10:48:07.570

可能是服务器类或实现 Login 方法的类/函数中的 PHP 错误。当您直接访问文件时会发生什么？请检查您的错误日志。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2015-03-17T10:05:00.990

我自己从来没有写过 WSDL。相反，您可以编写一个镜像 .NET Web 服务并使用自动生成的 WSDL（由 MS Visual Studio）。

# android - Android 3.2 中的屏幕支持（API 级别 13）

> ID：12316549
> 
> 赞同：4
> 
> 时间：2012-09-07T10:45:38.590
> 
> 标签：android, android-layout, screen, android-screen-support

根据本文档 (DeclaringTabletLayouts) 中的说明[，](http://developer.android.com/guide/practices/screens_support.html#DeclaringTabletLayouts)旧组已被弃用（small、normal、large 和 xlarge），这就是我们必须迁移到 Android 3.2 中定义的新技术的原因。

> 注意：从 Android 3.2（API 级别 13）开始，这些尺寸组已被弃用，取而代之的是一种基于可用屏幕宽度管理屏幕尺寸的新技术。如果您正在为 Android 3.2 及更高版本进行开发，请参阅为 Android 3.2 声明平板电脑布局以获取更多信息。

**我们如何使用新技术为小屏幕、普通屏幕和大屏幕制作不同的布局？**我试过了，没有找到解决方案，我想为每个设置不同的布局，并且注释说不推荐使用。

旧方式分类：

```
xlarge screens are at least 960dp x 720dp
large screens are at least 640dp x 480dp
normal screens are at least 470dp x 320dp
small screens are at least 426dp x 320dp 
```

新的方法 ：

```
320dp: a typical phone screen (240x320 ldpi, 320x480 mdpi, 480x800 hdpi, etc).
480dp: a tweener tablet like the Streak (480x800 mdpi).
600dp: a 7” tablet (600x1024 mdpi).
720dp: a 10” tablet (720x1280 mdpi, 800x1280 mdpi, etc).

res/layout-sw320dp/main_activity.xml # For handsets (smaller than 600dp available width)
res/layout-sw600dp/main_activity.xml # For 7” tablets (600dp wide and bigger)
res/layout-sw720dp/main_activity.xml # For 10” tablets (720dp wide and bigger) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T10:59:39.737

文档中很好地解释了您可以通过`layout.xml`在值文件中创建并创建别名以指向替代布局来使用它。您可以创建 values-large、values-sw-600 等，并指向您要为该特定类型选择的布局别名。

```
 <?xml version="1.0" encoding="utf-8"?>
    <resources>
<item type="layout" name="login">@layout/login_large
</item>

 </resources> 
```

请参阅[http://developer.android.com/training/multiscreen/screensizes.html](http://developer.android.com/training/multiscreen/screensizes.html)，因为它很好地解释了如何以最佳方式开发多个屏幕。

# html - 不同分辨率的不同CSS精灵可行吗？

> ID：12316551
> 
> 赞同：0
> 
> 时间：2012-09-07T10:45:48.757
> 
> 标签：html, css, background-image, css-sprites, fluid-layout

我正在开发一个流畅的网站。为了获得最大的图像质量和最小的图像加载时间，我为不同的分辨率使用了不同的精灵（例如 1680+、1440+、1280+、1024+、800+、1680@2x（对于视网膜）、1440@2x，..）通过@media 查询。

我最终有10个不同的精灵。简单地通过 CSS（背景大小或最大宽度）缩小高分辨率图像会导致质量下降（尤其是图标）和图像文件大小的不必要开销。

使用 Photoshop 将图像缩小 10 倍并对其进行微调并不是一个好习惯（Imagemagick 在这里对我不起作用）。怎么做才对？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T10:51:46.297

如果您需要对每张缩小的图像进行微调，则需要对每一张进行微调。如果没有，我建议两种尺寸，一种用于“高分辨率”，一种用于“低分辨率”。

# mks - 如何让 mksapiviewer 在输出中返回 unicode 符号

> ID：12316552
> 
> 赞同：0
> 
> 时间：2012-09-07T10:45:51.787
> 
> 标签：mks

我正在使用 mksapiviewer 来获取有关不同字段的信息。详细说明字段具有欧元符号。因此，api 没有返回完整的字符串，并且在 xml 中它没有关闭标签并缺少下一个打开的标签。

用于获取问题的 xml 的命令：

```
mksAPIViewer --iplocal --xml im viewissue --showAttachments --showChangePackages --showHistory --showHistoryAscending --showRelationships 
```

如何解决这个问题呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T09:02:37.030

Java api mksapi.jar 比 mksapiviewer 可执行文件更好地处理特殊字符，尽管它存在一些问题。

# java - GWT：片段和模块

> ID：12316555
> 
> 赞同：1
> 
> 时间：2012-09-07T10:46:06.520
> 
> 标签：java, gwt, module, fragment

我理解 GWT 中初始、独占和剩余片段之间的区别，但我不明白它们与模块/入口点的关系。一个模块只是一个初始片段吗？如果是这种情况，并且我的应用程序实际上定义了多个模块，那么我认为这意味着它也有多个初始片段，是吗？

如果我在这里错了，那么模块和片段之间有什么区别，它们之间有什么关系？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T14:00:29.447

每个模块编译为不同的脚本，该脚本位于不同的输出文件夹中：

/war/module1/ /war/module2/

等等，其中 module1 和 module2 是您的模块的名称。如果您使用代码拆分，每个模块都有自己的片段。

# java - JavaScript jvm 实现

> ID：12316557
> 
> 赞同：20
> 
> 时间：2012-09-07T10:46:09.820
> 
> 标签：java, javascript, browser, compiler-construction

是否有任何**JavaScript jvm 实现**？
如果没有，你能给我一些为什么它还没有实现的原因吗？（可能不可能？）我试图了解创建一个缺少什么？

我问的原因是我想创建具有编译功能的 Web 浏览器 ide，甚至没有在计算机上安装 jdk 或 jre（仅在浏览器中）。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-03-26T19:10:18.267

最新的似乎是**[Doppio](http://plasma-umass.github.io/doppio-demo/)**

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-05-17T18:59:42.813

你可以看看**bck2brwsr** (aka java.net HTML)

*   它是一个将 java 字节码转换为 JavaScript 的 VM（Bck2Brwsr 虚拟机）
*   为 HTML 提供基于 Java 的包装器（通过 Java API 的 HTML）

该项目的范围是**不**执行**任何**现有的 java 库。（见[http://wiki.apidesign.org/wiki/Bck2Brwsr](http://wiki.apidesign.org/wiki/Bck2Brwsr)）

网上有两个很好的例子：

*   一个计算器，可以提供很好的技术洞察力（[http://xelfi.cz/bck2brwsr/](http://xelfi.cz/bck2brwsr/)）
*   一个很好的太空入侵者演示作为概念证明（JAYDAY 2013 java 峰会页面）

从一个**工作示例****开始**（需要 Maven 和 JDK7）：

 **第 1 步：加载原型

```
mvn archetype:generate -DarchetypeGroupId=org.apidesign.bck2brwsr \
 -DarchetypeArtifactId=bck2brwsr-archetype-html-sample -DarchetypeVersion=0.7.2 \
 -DarchetypeRepository=https://maven.java.net/content/repositories/releases/ 
```

第 2 步：构建 HTML 页面和依赖项并打包为 ZIP 文件

```
mvn install
# produces bck-1.0-SNAPSHOT-bck2brwsr.zip 
```

第三步：解压ZIP

```
cd target; unzip bck-1.0-SNAPSHOT-bck2brwsr.zip
  creating: public_html/
  creating: public_html/lib/
  extracting: public_html/lib/emul-0.7.2-rt.jar  
  extracting: public_html/lib/javaquery.api-0.7.2.jar  
  inflating: public_html/bck2brwsr.js  
  extracting: public_html/bck-1.0-SNAPSHOT.jar  
  inflating: public_html/index.html 
```

第 4 步：使用浏览器打开**index.html**

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-09-07T11:12:08.813

不确定[jsJVM](https://github.com/Jivings/jsJVM)有多成熟，但看起来你会感兴趣。正如页面所说，它是用 Javascript 编写的 JVM。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-04-02T19:54:02.470

1.  [+script](http://www.keithschwarz.com/+script/)似乎也很有趣，而且作者也在基于 Web 的 IDE 上工作。

2.  [BicaVM](http://www.surf-the-edge.com/2011/11/15/bicavm-jvm-in-javascript-why/)可能是另一种选择。

3.  [Orto](https://github.com/robterrell/orto)项目可能已经死了。

    *   [有谁知道我在哪里可以找到“Orto”Javascript JVM？](https://stackoverflow.com/questions/1444681/does-anyone-know-where-i-can-find-the-orto-javascript-jvm)
    *   [http://ejohn.org/blog/running-java-in-javascript/](http://ejohn.org/blog/running-java-in-javascript/)

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2016-05-09T17:53:23.330

很晚的答案，但对于未来的询问者：自从第一次提出这个问题以来，已经发布了一个用于 JavaScript 的新 Java JVM 实现。它声称即使没有安装 Java 也能实现 JVM。

[https://www.javapoly.com/](https://www.javapoly.com/)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-07T11:06:57.470

使用 JavaScript 编译 Java 的问题之一是编译器通常需要知道目标 Java 最低版本的方法和属性是否存在。甚至要知道这些信息，您还需要存储描述目标 J2SE 的每个类的公共成员的属性或变量。这代表了一个*非常大*的信息块。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-09-14T10:26:32.023

有一个用 Java 编写的 JVM，它有一个 JavaScript 字节码解释器： [https ://gitlab.com/neoexpert/jvm](https://gitlab.com/neoexpert/jvm)

它还可以将 Bytecode 直接编译为 JavaScript 以提高性能。**

# javascript - 模态窗口背景没有正确调整大小

> ID：12316561
> 
> 赞同：0
> 
> 时间：2012-09-07T10:46:20.833
> 
> 标签：javascript, extjs, extjs4

我的应用程序中的模式窗口有问题。一切都很好，除了调整模式窗口掩码的大小时：当浏览器大小减小时，它们会增加。模态窗口掩码保持较小的窗口大小。

![](../Images/2b12c8d27f2f0b10412137d1d83f83e2.png)

这是我的视口

```
Ext.define('Bis.view.Viewport', {
    extend: 'Ext.container.Viewport',
    layout: 'border',
    items: [{
            region: 'north',
            xtype: 'container',
            height: 100,
            layout: 'border',
            items:[{
                xtype: 'container',
                layout: 'border',
                region: 'north',
                height: 70,
                items: [{
                    xtype: 'container',
                    region: 'west',
                    styleHtmlCls: 'account-header-logo',
                    styleHtmlContent: true
                }, {
                    xtype: 'component',
                    region: 'center'
                }, {
                    xtype: 'container',
                    itemId: 'userControlsContainer',
                    region: 'east'
                }]
            }, {
                region: 'center'
            }]

        }, {
            region: 'center',
            bodyStyle: 'background:#79b5d8;'
        }, {
            region: 'south',
            xtype: 'container',
            items:[{
                xtype: 'component',
                width: 150,
                styleHtmlCls: 'footer-logo',
                styleHtmlContent: true
            }]
         }
    ]
}); 
```

模态窗口不添加到视口，而是添加到区域：“中心”。添加到视口的时候没有这样的问题，但是我需要将窗口添加到这个区域

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-12T13:52:07.000

我已经解决了这个问题。它发生了，因为背景正在像视口一样监听全局窗口调整大小事件。因此，有时背景蒙版不会调整到正确的大小。我使用了与此类似的修复（将其添加到覆盖）：

```
Ext.EventManager.removeResizeListener(Ext.WindowManager._onContainerResize, Ext.WindowManager);
Ext.EventManager.onWindowResize(Ext.WindowManager._onContainerResize, Ext.WindowManager, {delay: 5}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T07:01:37.417

尝试明确指定中心区域的 xtype 和布局：

```
 {
    region: 'center',
    xtype: 'panel',
    layout: 'fit'    
 } 
```

如果这不起作用，您可能需要详细说明如何添加模式窗口。

# sql - 运行带有 powershell 问题的 SQL 命令

> ID：12316562
> 
> 赞同：0
> 
> 时间：2012-09-07T10:46:24.190
> 
> 标签：sql, powershell, vbscript

我有以下从 VB 脚本转换而来的 powershell 命令：

```
$conn = New-Object System.Data.SqlClient.SqlConnection(“Data Source=SERVER; Initial Catalog=DATABASE; Integrated Security=SSPI”) 
$conn.Open() 
$cmd1 = $conn.CreateCommand() 
$cmd1.CommandType = [System.Data.CommandType]::Text 
$cmd1.CommandText =“SELECT guid, name, [Serial Number] FROM dbo.wrksta as a inner join Inv_AeX_HW_Serial_Number as b on a.GUID=b._resourceGUID ORDER BY Name” 
$data = $cmd1.ExecuteReader() 
$cmd2 = $conn.CreateCommand() 
$cmd2.CommandType = [System.Data.CommandType]::Text 
$cmd2.CommandText =“SELECT top 1 [User] FROM dbo.Evt_aex_client_logon WHERE _resourceGuid = (SELECT top 1 Guid FROM dbo.Wrksta WHERE Name='" + $data["name"] + "' ORDER BY WrkstaID DESC) AND Event = 'logon' AND _eventTime > getdate()-60 GROUP BY [User] ORDER BY count([User]) desc” 
$data2 = $cmd2.ExecuteReader() 
$dt = new-object “System.Data.DataTable” 
$dt.Load($data2) 
$dt | format-table 
$conn.Close() 
```

如果您查看第二个 select 语句，我想使用第一个变量 $data 中的值，但我不确定如何编写它。在 VB 中就像这样 WHERE Name='" + Workstation("name").value + "' 以下是在 powershell 中编写此代码的正确方法吗？'" + $数据["名称"] + "'。我在 $date 变量中存储的名称列中的值之后

以前用来做这个的VB如下

```
connString = "Provider=sqloledb;Data Source=SERVER;Initial Catalog=DATABASE;Integrated Security=SSPI;"
objSQL.Open connString 

sqlWorkstations = "SELECT guid, name, [Serial Number] FROM dbo.wrksta as a inner join Inv_AeX_HW_Serial_Number as b on a.GUID=b._resourceGUID ORDER BY Name"
Set workstation = objSQL.Execute(sqlWorkstations)

Do Until (workstation.EOF)

sqlUser = "SELECT top 1 [User] FROM dbo.Evt_aex_client_logon WHERE _resourceGuid = (SELECT top 1 Guid FROM dbo.Wrksta WHERE Name='" + workstation("name").value + "' ORDER BY WrkstaID DESC) AND Event = 'logon' AND _eventTime > getdate()-60 GROUP BY [User] ORDER BY count([User]) desc"
set user = objSQL.Execute(sqlUser)

if not user.eof then
  userName = user("User").value
else
  username = "??????"
end if 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T12:59:58.760

让您自己更轻松并加载`SqlServerCmdletSnapin100`管理单元。如果您使用的是 SQL Server，它会为您处理大部分样板文件，并将正在运行的查询提炼为单个 cmdlet。

您上面的代码假定第一个查询仅返回一行。这可能会也可能不会总是如此；我不知道你的数据库。如果它返回多条记录，那么您的代码只会为您提供与第一个查询中的第一条记录相对应的数据。

使用`SqlServerCmdletSnapin100`'s`Invoke-SQLCmd`并处理返回多条记录的情况，请执行以下操作：

```
$data1 = Invoke-Sqlcmd -ServerInstance SERVER -Database DATABASE -Query “SELECT guid, name, [Serial Number] FROM dbo.wrksta as a inner join Inv_AeX_HW_Serial_Number as b on a.GUID=b._resourceGUID ORDER BY Name”;
foreach ($row in $data1) {
    $name = $row.name;
    $data2 = invoke-sqlcmd -ServerInstance SERVER -Database DATABASE -Query “SELECT top 1 [User] FROM dbo.Evt_aex_client_logon WHERE _resourceGuid = (SELECT top 1 Guid FROM dbo.Wrksta WHERE Name='$name' ORDER BY WrkstaID DESC) AND Event = 'logon' AND _eventTime > getdate()-60 GROUP BY [User] ORDER BY count([User]) desc” ;
    $data2 |ft -AutoSize
} 
```

也有可能您可以使用一个正确编写的查询来检索所有数据，但又一次，您不知道很难说的数据。您确实应该就这些查询咨询您的 DBA，以确保它们正确编写并正确匹配您的要求。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T13:00:07.637

[ExecuteReader](http://msdn.microsoft.com/de-de/library/9kcbe65k%28v=vs.80%29.aspx)只创建阅读器，但您需要调用 $data.Read() 来检索第一条记录。（请参阅链接的 MSDN 中的示例）

# spring - 如何使 DispatcherServlet 初始化错误从嵌入式 Jetty 冒泡？

> ID：12316573
> 
> 赞同：0
> 
> 时间：2012-09-07T10:47:01.270
> 
> 标签：spring, error-handling, jetty

我有一个应用程序，其中包含一个由主应用程序上下文实例化的 Embedded Jetty。在 Jetty 中，有一个额外的 Spring Web 应用程序上下文已初始化，并使用 HTTP Invoker 导出了一个服务。当前，当嵌入式上下文无法初始化（通过`DispatcherSerlvet`）时，Web 应用程序上下文根本不可用，但 Jetty 继续在指定端口上运行。这使得应用程序不一致。如果嵌入式 Spring 上下文无法启动，我喜欢以某种方式拆除主上下文（和应用程序）。这样做的正确方法是什么？是否有任何监听器`DispatcherServlet`可以获取有关初始化问题的通知？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T07:01:43.993

我已经设法自己解决了这个问题。Jetty`ServletHolder`和`WebAppContext`类现在有一个`getUnavailableException()`函数，如果启动成功则返回初始化错误或 null。请参阅[JETTY-319 功能请求票](http://jira.codehaus.org/browse/JETTY-319)。我已经向`ServletHolder`管理 Spring 的 bean添加了一个 ID，`DispatcherServlet`并且在刷新外部 Spring 上下文之后，我添加了一个针对这个 bean 的简单检查。如果出现错误，我可以随意关闭应用程序。

# python - Django + fcgi =未显示对views.py的新编辑

> ID：12316575
> 
> 赞同：1
> 
> 时间：2012-09-07T10:47:06.707
> 
> 标签：python, django, apache, fastcgi

我想深入研究 Python\Django 开发并使用我手头的东西：

*   在 Hostgator 上托管（不是 vps，而是共享）。

他们确实支持 Django，但通过 fcgi。[我做了这里](http://support.hostgator.com/articles/django-with-fastcgi)的小指南中所说的所有内容

所以我得到了“你好世界”的工作。虽然我的应用程序的views.py中有时间而不是hello world：

```
from datetime import datetime
from django.http import HttpResponse
def index(request):
 return HttpResponse(datetime.now().strftime('%H:%M:%S')) 
```

但是现在，当我对views.py 进行任何更改时 - 我无法立即看到结果。我确实删除了所有 *.pyc 文件，仍然没有。例如，即使这样做：

```
return HttpResponse('Hello World!') 
```

我不明白这一点，但仍然看到时间。

我已经完全迷路了。我通过 ssh 和 django-admin.py 尝试了很多事情......但仍然 - 我看到了时间。

如果我在代码中犯了一个错误 - 它会快速（可能不是立即）赶上它并给出错误\调试信息，但即使在那之后我将它更正为新代码 = 结果仍然是时间。

好像我错过了什么。views.py 的一些“刷新”功能...清除缓存..或类似的东西？重启应用？

UPD：杀死 -USR1 index.fcgi 做到了！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-07T10:53:06.583

是fcgi！

您可能必须重新启动生成的服务器，因此它会重新加载 Python 文件。

您可以通过触摸 .fcgi 文件来实现：

```
$ touch index.fcgi 
```

请参阅[如何将 Django 与 FastCGI、SCGI 或 AJP 一起使用](https://docs.djangoproject.com/en/dev/howto/deployment/fastcgi/#restarting-the-spawned-server)。

Hostgator 的竞争对手 Dreamhost 说你有时需要终止[进程](http://wiki.dreamhost.com/FastCGI#Errors_and_Troubleshooting)：

```
killall -USR1 index.fcgi 
```

但我不知道这是否也适用于 hostgator。

# python - Python PyQt：按下按钮更改圆形颜色时出现类型错误

> ID：12316577
> 
> 赞同：1
> 
> 时间：2012-09-07T10:47:12.353
> 
> 标签：python, qt, pyqt4, qpainter

我是 Python 新手，使用 PyQt4 开发 Gui。我想在按下切换按钮的同时更改圆圈的颜色。但是我在插槽中遇到错误。

我的代码是：

```
import sys
from PyQt4.QtGui import *
from PyQt4.QtCore import *

class MyFrame(QWidget):
    def __init__(self, parent=None):
        QWidget.__init__(self)

        self.scene=QGraphicsScene(self)
        self.scene.setSceneRect(QRectF(0,0,245,245))
        self.bt=QPushButton("Press",self)
        self.bt.setGeometry(QRect(450, 150, 90, 30))
        self.bt.setCheckable(True)
        self.color = QColor(Qt.green)
        self.color1= QColor(Qt.magenta)
        self.show()
        self.connect(self.bt, SIGNAL("clicked()"), self.changecolor)

    def paintEvent(self, event=None):
        paint=QPainter(self)
        paint.setPen(QPen(QColor(Qt.magenta),1,Qt.SolidLine))
        paint.setBrush(self.color)
        paint.drawEllipse(190,190, 70, 70)
        paint.setPen(QPen(QColor(Qt.green),1,Qt.SolidLine))
        paint.setBrush(self.color1)
        paint.drawEllipse(300,300, 70, 70)

    def changecolor(self):
        if pressed:
         self.color = QColor(Qt.red)
         self.color1= QColor(Qt.blue)
        else:
         self.color=QColor(Qt.yellow)
         self.color1=QColor(Qt.gray)

        self.update()

app=QApplication(sys.argv)
f=MyFrame()
f.show()
app.exec_() 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-07T11:08:57.090

就目前而言，它尝试仅使用一个参数 self 来调用 changecolor。我不完全确定您要达到的目标。您的 changecolor 接受变量“paint”，但尝试使用不存在的 self.paint。所以也许你会想，你可以通过调用 QPainter 来获取画家并丢失名为“paint”的参数，如下所示：

```
def changecolor(self):
  paint = QPainter(self)
  paint.setBrush(QColor(Qt.red))
  paint.drawEllipse(190,190,70,70)
  self.update() 
```

这会遇到以下错误：

```
QPainter::begin: Widget painting can only begin as a result of a paintEvent
QPainter::setBrush: Painter not active 
```

这告诉您，您只能在paintEvent 中进行绘画操作。一种解决方案是拥有一个类成员，例如 self.color 保存您想要的圆圈颜色。一个完整的工作代码如下：

```
import sys
from PyQt4.QtGui import *
from PyQt4.QtCore import *

class MyFrame(QWidget):
  def __init__(self, parent=None):
    QWidget.__init__(self)

    self.scene=QGraphicsScene(self)
    self.scene.setSceneRect(QRectF(0,0,245,245))
    self.bt=QPushButton("Press",self)
    self.bt.setGeometry(QRect(450, 150, 90, 30))
    self.color = QColor(Qt.green)
    self.show()
    self.connect(self.bt, SIGNAL("clicked()"), self.changecolor)

  def paintEvent(self, event=None):
    paint=QPainter(self)
    paint.setPen(QPen(QColor(Qt.red),1,Qt.SolidLine))
    paint.setBrush(self.color)
    paint.drawEllipse(190,190, 70, 70)

  def changecolor(self):
    self.color = QColor(Qt.red)
    self.update()

app=QApplication(sys.argv)
f=MyFrame()
f.show()
app.exec_() 
```

# embedded - 开始编写嵌入式代码

> ID：12316580
> 
> 赞同：0
> 
> 时间：2012-09-07T10:47:14.400
> 
> 标签：embedded

我想学习如何编写嵌入式代码。不幸的是，我不是很有经验的程序员，也不知道如何开始。

我正在做的项目是带有运动传感器和微处理器的 PCB，我想通过对微处理器进行编程来控制传感器的设置。

我需要什么样的硬件和软件？我读过我需要一个[JTAG](http://en.wikipedia.org/wiki/Joint_Test_Action_Group) /开发板和一个编程环境。我很乐意参考任何可以告诉我（最好是尽可能基本的）如何开始的书籍/网站。到目前为止，我只找到了初学者无法阅读的资源。

微控制器（[STM32F101RC](http://www.st.com/web/catalog/mmc/FM141/SC1169/SS1031/LN1567/PF164498)，核心：ARM 32 位 Cortex™-M3 CPU）使用[SPI](http://en.wikipedia.org/wiki/Serial_Peripheral_Interface_Bus)与传感器通信。PCB 包含一个 USB 和一个 JTAG 连接（10 个引脚）。另外，我正在使用 Windows 笔记本电脑进行编程。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T11:00:08.167

这取决于您拥有的特定配置 - 可能是 ARM 或 AVR 板。在这两种情况下，您都可以使用基于 GCC (GNU) 的工具链并像往常一样开始编写 C/C++ 代码 - 您将无法使用需要操作系统的功能（即文件操作，使用标准I/O - 你有端口和 SFR）等。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-12T01:51:09.877

工具链：

*   软件：我推荐[Yagarto](http://www.yagarto.de)以顺利启动。
*   硬件：您将需要一个片上调试器。我推荐[J-Link ECU](http://www.segger.com/cms/j-link-edu.html)

您可以/应该：

*   至少获得一些关于嵌入式软件/硬件的知识（*[AVR Microcontroller and Embedded Systems: Using Assembly and C](https://rads.stackoverflow.com/amzn/click/com/0138003319)*这本书很棒！）
*   了解[ARM Cortex-M3](http://en.wikipedia.org/wiki/ARM_Cortex-M#Cortex-M3)架构的基础知识（google it！那里有很多资源、书籍等）
*   获得一些C经验
*   如果您的产品确实需要RTOS，请考虑使用[RTOS 。](http://en.wikipedia.org/wiki/Real-time_operating_system)
*   如果您打算使用 ARM Cortex-M3，请查看[CMSIS 。](http://www.arm.com/products/processors/cortex-m/cortex-microcontroller-software-interface-standard.php)
*   检查您的芯片制造商是否为芯片提供任何软件库、引导加载程序……。
*   一开始不做定制PCB，用开发板来原型你的项目

重要的提示：

我不知道您选择目标处理器的标准，但如果项目不需要 ARM M3（32 位）处理能力，请考虑使用 AVR 8 位[微控制器。](http://en.wikipedia.org/wiki/Microcontroller)AVR 更容易、更便宜，特别是对于初学者来说。这里的规则是不要使用功能远远高于您的产品/项目需求的微控制器。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-09-06T06:26:52.273

要学习嵌入式系统编程，最好从一个简单的 8 位板和免费 ide 开始。您可以从 avr / 8051 系列 /pic 系列等开始，嵌入式编程的主要问题是设置适合您的电路板功能的启动配置/初始化。如果你从你自己的董事会开始，你自己很难跨过这个阶段。如果您从一个现成的工具包开始，那么给定的示例将引导您轻松完成此过程。一旦你跨过这个阶段，你将获得足够的信心来处理更大的事情。我在这里并不提倡任何一种处理器系列。另一件事是要成为一名优秀的嵌入式程序员，还必须对硬件相当熟悉。在多个团队成员从事嵌入式项目的大型项目中，您可以获得涉及纯 c 和逻辑而没有太多硬件知识的角色，

# vb.net - 打开一个文件，其名称和目录由组合框 vb.net 中选择的内容确定

> ID：12316584
> 
> 赞同：1
> 
> 时间：2012-09-07T10:47:27.947
> 
> 标签：vb.net, string, combobox

我有一个包含名称列表的组合框 ( *combobox1* )，例如：CHARLY SUSAN BOB。

我想要实现的是在另一个组合框（*combobox2*）中读取相应文件的内容，所以

*   CHARLY 将打开 CHARLY.txt 并使用该文件内容填充 combobox2
*   SUSAN 将打开 SUSAN.txt 并使用该文件内容填充 combobox2
*   BOB 将打开 BOB.txt 并使用该文件内容填充 combobox2

它本身的名称列表是从文本文件中读取的，这是因为我将来想添加更多名称。

这些通过以下代码读入（ *Combobox1 ）：*

```
'Compiles list for plotter/ printer items...
ComboBox1.Items.AddRange(System.IO.File.ReadAllLines("C:\PEOPLE\NAMES.txt")) 
```

我正在考虑将这个概念保持在一个不断扩展的列表中，以便为目标名称设置一个变量/字符串，然后为其添加一个前缀，例如：BOBfile.txt 还添加了一个后缀，该后缀将指向目标文件目录然后是`C:\PEOPLE\BOBSfile.txt`

然后，变量中的这个集合将打开相关文件夹，如下所示：

```
ComboBox2.Items.AddRange(System.IO.File.ReadAllLines( BOBSVARIABLE )) 
```

有人知道如何实现这一目标吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T12:17:21.050

这是一个简单的例子：

```
Private Sub ComboBox1_SelectedIndexChanged(sender As Object, e As EventArgs) _
                                        Handles ComboBox1.SelectedIndexChanged
  If ComboBox1.SelectedIndex = -1 Then
    ComboBox2.Items.Clear()
  Else
    Dim peoplePath As String = "C:\PEOPLE"
    Dim personFile As String = Path.Combine(peoplePath, _
                                            ComboBox1.SelectedItem & "file.txt")
    If File.Exists(personFile) Then
      ComboBox2.Items.AddRange(File.ReadAllLines(personFile))
    Else
      ComboBox2.Items.Clear()
    End If
  End If
End Sub 
```

请考虑使用数据库。此外，您当前的系统不能很好地处理重复名称。

# ajax - 如何在 javascript 中过滤 Ajax 请求

> ID：12316586
> 
> 赞同：1
> 
> 时间：2012-09-07T10:47:30.097
> 
> 标签：ajax, jquery

是否可以根据某些 URL 过滤掉一些 Ajax 请求？我不想在每个 AJAX 请求中编写代码，例如如果 url 与“A”匹配然后进行调用，否则不会。有类似 ajaxStart 方法的东西，但我没有在该函数中收到 ajax 请求 url。所以我试图解决这个问题的方法是：

```
$.ajaxSetup({
    beforeSend: function(xhr, settings) {
        if (settings.url == "A") return false; // Filter out URLs Try-1
        if (settings.url == "A") settings.url = "#"; // Loop on same page Try-2
    }
 }); 
```

Q1。我认为如果我们从 beforeSend 返回 false 则不会进行 ajax 调用。我对吗 ？-**是的**

Q2。更新 settings.url 实际上会更改 ajax 对象的 url，现在 ajax 调用被阻止到同一页面。这是正确的吗 ？

请告诉我我做错了什么？

# apache - 获取或检查 JAVA_OPTS

> ID：12316587
> 
> 赞同：1
> 
> 时间：2012-09-07T10:47:34.483
> 
> 标签：apache, tomcat, java-opts

我为 Apache Tomcat 设置环境（通过 setenv.sh）

```
export JAVA_OPTS="-XX:PermSize=256m -XX:MaxPermSize=356m" 
```

如何在 JSP 或 Apache Tomcat 管理器页面中检查此参数？我想确保选项正常工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T15:00:48.307

您需要从 ManagementFactory 获取 RuntimeMXBean：

[如何获取启动进程的命令行](https://stackoverflow.com/questions/2541627/how-do-i-get-the-commandline-that-started-the-process)

这将为您提供整个命令行（`main`方法的参数除外）。您还可以查找`JAVA_OPTS`环境变量（以及`CATALINA_OPTS`更有用的 ），但这是一个实现细节：您并不真正关心环境变量......您想知道用于启动 JVM 的选项。

# android - Android 计算器减法

> ID：12316597
> 
> 赞同：1
> 
> 时间：2012-09-07T10:48:24.327
> 
> 标签：android, double, calculator

我正在研究一个安卓计算器。用户按下 1 到 9 和小数点的按钮，然后 inputnum (arraylist ) 会将显示解析为输入，然后操作然后显示答案。相关代码如下：

```
ArrayList<Double> inputnum = new ArrayList<Double>(); 
double inputnum1; 
double inputnum2;    

...

inputnum.add(Double.parseDouble(Fakedisplay.getText().toString()));        
case SUBTRACT: 
        inputnum1 = inputnum.get(0); 
        inputnum2 = inputnum.get(1); 
        inputnum.removeAll(inputnum); 
        inputnum.add(inputnum1 - inputnum2); 

        Fakedisplay.setText(String.format("%.19f", inputnum.get(0)));             

        String strf2=Fakedisplay.getText().toString(); 
        String strippedf2 = Double.valueOf(strf2).toString();  
        if (strippedf2.endsWith(".0")) 
            strippedf2 = strippedf2.substring(0, strippedf2.length() - 2); 
        Fakedisplay.setText(strippedf2); 
```

问题：对于 1000.84 - 1000.01，它会给出 0.830000000000041，这在演示中是不需要的，但是这个问题只发生在减法上，加法、乘法和除法的编码完全相同，但效果很好，即：1000.84+ 1000.01 表示 2000.85仅此而已，1000.84*1000.01=1000850.0084 仅此而已，1000.84/1000.01 也可以正常工作并正确显示。

为什么减法如此特别？如何处理？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T10:57:14.073

尝试十进制格式以显示最多 N 个十进制数字的长值。

```
DecimalFormat round = new DecimalFormat ("###.##");
String output = round.format(inputnum.get(0));
Fakedisplay.setText(output); 
```

**输出 = 0.83 为 0.830000000000041**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-07T10:54:03.637

数学计算是通过二进制计算进行的。没有多少小于 1 的数字可以用二进制精确表示，这就是为什么你会收到奇怪的结果——它们是最好的解释表示。

如果你想避免这个问题，我建议使用 Decimal 而不是 Double（因为 decimal 使用 base 10 而不是 base 2）。另一种选择是使用 Math.Round 来获得更准确的计算。另一个建议（但可能是最不精确的）是将最终结果显示为字符串，然后截断小数点后第二位的所有值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-09-03T13:42:15.897

试试这个：[http ://www.hackpundit.com/android-tutorial-simple-calculator-app/](http://www.hackpundit.com/android-tutorial-simple-calculator-app/)

```
buttonSub.setOnClickListener(new View.OnClickListener() {
    @Override
    public void onClick(View v) {
        mValueOne = Float.parseFloat(edt1.getText() + "");
        mSubtract = true ;
        edt1.setText(null);
    }
}); 
```

# .net - SQL：在 Sql Server 中的连接需要帮助

> ID：12316598
> 
> 赞同：0
> 
> 时间：2012-09-07T10:48:26.623
> 
> 标签：.net, sql, sql-server, sql-server-2008, sql-server-2008-r2

我有下表，模式是

* * *

## 表：成员

```
Id        // PK Int Auto Increment
MemberID
MembershipType        // Holds MemberShipMaster types 1/2/3 for Prem, Corp or Free
RegisteredCountry     // FK of CountryMaster table
RegisteredState       // FK of States Table
RegisteredCity        // FK of Districts table
PostalCountry         // FK of CountryMaster table
PostalState           // FK of States Table
PostalCity            // FK of Districts table 
```

**请注意：邮政地址和注册地址可能不同（其逻辑...）**

* * *

## 表 : CountryMaster

```
Id        // PK , int auto increment
Country   // Name of Country 
```

* * *

## 表 : MemberShipMaster

```
Id               // PK int auto increment
Type             // Type Id int   , 1,2,3 respectively for Prem, Corp and Free
TypeName          // Membership Type Name e.g. Premium, Corporate, Free 
```

* * *

## Tbale : 城市

```
Id,         // PK int auto increment
Name       
StateId     // FK, PK of states table 
```

* * *

## 表：状态

```
Id   // PK int auto increment
Name           
CountryId // FK , PK of COuntry 
```

以下是我的查询

```
SELECT Id , MemberID, MembershipType, Districts.Name as RegisteredCity,
States.Name as RegisteredState,CountryMaster.Country as RegisteredCountry,
Districts.Name as PostalCity,States.Name as PostalState, CountryMaster.Country as PostalCountry 
FROM   dbo.JFPMembers RIGHT  JOIN MemberShipMaster ON MemberShipMaster.Id= dbo.JFPMembers.MembershipType  
LEFT  JOIN  Districts ON dbo.JFPMembers.PostalCity = Districts.Id OR  Districts.Id =JFPMembers.RegisteredCity
LEFT  JOIN  States ON States.Id = dbo.JFPMembers.RegisteredState OR States.Id = dbo.JFPMembers.PostalState
LEFT  JOIN CountryMaster ON CountryMaster.Id = dbo.JFPMembers.RegisteredCountry and CountryMaster.Id = dbo.JFPMembers.postalCountry
Where Id= @id 
```

我的预期输出：

**根据列中保存的 id，在下面的字段中输入适当的城市、州或国家/地区名称。但相反，我在所需的列中得到空值**。我已经确认这两个值存在于数据库中以用于连接。

Districts.Name 作为 RegisteredCity，States.Name 作为 RegisteredState，CountryMaster.Country 作为 RegisteredCountry，Districts.Name 作为 PostalCity，States.Name 作为 PostalState，CountryMaster.Country 作为 PostalCountry

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-27T18:48:19.287

Postal needs its joins to the respective country, state and city tables on its own via separate aliases... Same with Registered...

```
SELECT 
      M.Id, 
      M.MemberID, 
      M.MembershipType, 
      MM.TypeName as MembershipTypeName,
      RegCountryAlias.Country as RegisteredCountry,
      RegStatesAlias.Name as RegisteredState,
      RegCitiesAlias.Name as RegisteredCity,
      PostalCountryAlias.Country as PostalCountry,
      PostalStatesAlias.Name as PostalState,
      PostalCitiesAlias.Name as PostalCity
   FROM   
      JFPMembers M
         JOIN MemberShipMaster MM
            ON M.MembershipType = MemberShipMaster.Id

         JOIN CountryMaster as RegCountryAlias
            ON M.RegisteredCountry = RegCountryAlias.ID
         JOIN States as RegStatesAlias
            ON M.RegisteredState = RegStatesAlias.ID
         JOIN Cities as RegCitiesAlias
            ON M.RegisteredCity = RegCitiesAlias.ID

         JOIN CountryMaster as PostalCountryAlias
            ON M.PostalCountry = PostalCountryAlias.ID
         JOIN States as PostalStatesAlias
            ON M.PostalState = PostalStatesAlias.ID
         JOIN Cities as PostalCitiesAlias
            ON M.PostalCity = PostalCitiesAlias.ID
   WHERE
      M.ID = @id 
```

As Kenneth pointed out about possible NULLs if any column didn't specifically find a match in the corresponding joined table, it would not return a record. Therefore, you would probably change the JOINs to LEFT JOINs. Additionally, you mentioned a "Districts" table, but did not provide, but DID provide your "Cities" table which is what I used as the basis of the joins.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-27T18:40:17.510

你的问题是你试图加入两个不同的条件。而是加入您的查找表两次。像这样：

```
SELECT Id , MemberID, MembershipType, RegDistricts.Name as RegisteredCity,
    RegStates.Name as RegisteredState, RegCountryMaster.Country as RegisteredCountry,
    PostalDistricts.Name as PostalCity, PostalStates.Name as PostalState, 
    PostalCountryMaster.Country as PostalCountry 
FROM dbo.JFPMembers 
LEFT JOIN MemberShipMaster 
    ON MemberShipMaster.Id = dbo.JFPMembers.MembershipType  
LEFT JOIN Districts RegDistricts
    ON RegDistricts.Id = JFPMembers.RegisteredCity
LEFT JOIN Districts  PostalDistricts
    ON dbo.JFPMembers.PostalCity = PostalDistricts.Id 
LEFT JOIN States RegStates
    ON RegStates.Id = dbo.JFPMembers.RegisteredState 
LEFT JOIN States PostalStates
    ON PostalStates.Id = dbo.JFPMembers.PostalState
LEFT JOIN CountryMaster RegCountryMaster
    ON RegCountryMaster.Id = dbo.JFPMembers.RegisteredCountry 
LEFT JOIN CountryMaster PostalCountryMaster
    ON PostalCountryMaster.Id = dbo.JFPMembers.postalCountry
Where Id= @id 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-07T10:51:58.970

> 左加入 CountryMaster ON CountryMaster.Id = dbo.JFPMembers.RegisteredCountry 和 CountryMaster.Id = dbo.JFPMembers.postalCountry

你是说`and`还是`or`？

# yii - 如何通过双击访问 Yii Cgridview 中选定行的 id？

> ID：12316604
> 
> 赞同：3
> 
> 时间：2012-09-07T10:48:45.830
> 
> 标签：yii

```
<?php $this->widget('zii.widgets.grid.CGridView', array(
'id'=>'message-grid',
    //'selectionChanged'=>'js:function(id){location.href = "'.$this->createUrl('view').'/id/"+$.fn.yiiGridView.getSelection(id);}', 
    'selectionChanged'=>'function(id){location.href = "'.$this->createUrl('view').'&id="+$.fn.yiiGridView.getSelection(id)+"&f=s";}',
//'dataProvider'=>$model->sentitem(),
    'dataProvider'=>$model->search(),    
'filter'=>$model,
    'columns'=>array(
            array(      
                        'class'=>'CCheckBoxColumn',
                        'id'=>'chk',
                        'selectableRows'=>'2',
                        //'htmlOptions'=>array('width'=>'40px'),

            ), 
```

), ));

> 我已经编写了通过选择更改单击的代码我正在尝试通过 jquery dbclick 函数访问 id，我不知道如何使用在 dbclick 中更改的选择来获取 id

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T13:32:53.983

尝试这个：

```
$('#message-grid tbody tr').live('dbclick', function() {
    var id = $.fn.yiiGridView.getKey(
        'message-grid',
        $(this).prevAll().length 
    );
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-19T13:30:57.553

以下代码将加载项目的查看页面。( url => itemcontroller/view/id/+selectedId )

```
<?php $this->widget('zii.widgets.grid.CGridView', array(
    'id'=>'id-grid',
    'dataProvider'=>$dataProvider,
    'filter'=>$model,

    'selectableRows'=>1,
    'selectionChanged'=>'function(id){ location.href = "'.$this->createUrl('view').'/id/"+$.fn.yiiGridView.getSelection(id);}', 
```

# android - 仅在网络中关闭的套接字 v4.0 ksoap2

> ID：12316607
> 
> 赞同：1
> 
> 时间：2012-09-07T10:49:00.437
> 
> 标签：android, sockets, ksoap2, android-ksoap2

我使用 ksoap2 库，工作正常，但是当我使用 android 4.0 并且我超过 3G 时，当我尝试设置连接时，套接字总是关闭。我读到的是关于连接保持活动，但我不知道如何设置这个属性。

任何想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-07T11:27:30.650

在库源HttpConectionSE.java中设置属性连接keep-alive编译包使用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-09-12T08:59:00.310

也许太晚了四个，但我希望这对未来像我一样到达这里的人有所帮助，因为同样的问题而疯狂。

**这是一个Android错误**。一切都适用于 WiFi，但它在 3G 上崩溃。它发生在我的 4.1 上，但在 4.2.2 上没有问题。

要解决它，您必须修改文件**org.ksoap2.transport.HttpTransportSE**（我扩展了一个新文件并将其命名为 MyHttpTransportSE，因为我使用的是 ksoap2 程序集 jar）。只需覆盖方法*public void call(String soapAction, SoapEnvelope envelope)*注释掉该行：

```
 //connection.setRequestProperty("Connection", "close"); 
```

当然，如果您使用 SSL，则需要从新的*MyHttpTransportSE扩展您自己的**HttpsTransportSE*。

 *更多详细信息：[https ://groups.google.com/forum/#!searchin/ksoap2-android/closed/ksoap2-](https://groups.google.com/forum/#!searchin/ksoap2-android/closed/ksoap2-)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-07T12:19:35.337

Android 4.0 不允许您在主线程上运行互联网通信。一起去`AsyncTask`

[你在这里](http://www.vogella.com/articles/AndroidPerformance/article.html)阅读更多。

或者，看看[这个问题](https://stackoverflow.com/questions/12193758/androidhttpclient-does-not-run-in-android-4-0-api/)。*

# javascript - 动态更改 ID

> ID：12316614
> 
> 赞同：0
> 
> 时间：2012-09-07T10:49:18.740
> 
> 标签：javascript

我有一些输入如下：

```
<input type="hidden" id="selected_id-1" name="e_id[]" />
<input type="hidden" id="selected_id-2" name="e_id[]" />
<input type="hidden" id="selected_id-3" name="e_id[]" />
<input type="hidden" id="selected_id-4" name="e_id[]" /> 
```

我也有用于删除该输入的每个输入的按钮。

但是，当我删除例如`"selected_id-2"`输入时，我想更新下一个输入的 id。所以`"selected_id-3"`会变成`"selected_id-2"`和`"selected_id-4"`- `"selected_id-3"`。

我怎样才能更新那些ID？需要纯 JavaScript，不需要框架。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T10:52:47.930

你想要这样的东西吗？

```
var els = document.getElementsByTagName('input');
for (var i=0; i<els.length; i++) {
    els[i].id = 'selected_id-'+i;
} 
```

如果你想要更精确的东西，即使没有 jQuery（但使用[不太旧的浏览器](https://developer.mozilla.org/en-US/docs/DOM/Document.querySelectorAll)），你可以这样做：

```
var els = document.querySelectorAll('input[name="e_id[]"]'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-07T10:54:05.260

您可以将所有`<input>`元素放入一个数组中。你遍历那个数组，然后当你达到你想要的数字时，你`'select_id-'+(i)`用`'select_id-'+(i-1)`.

以下是如何获取所有`<input>`元素的数组：

```
var myControls = document.getElementsByTagName('input'); 
```

然后你通过一个for（概念代码）：

```
for (var i = 1; i < [length of myControls]; i++) { 
    if (this_id's_number < i) {
        continue;
    } else if (this_id's_number == i) {
        remove this input
    } else {
        current_number = getCurrentNumberFromID();

        current input's id = current_number -1;
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-07T10:54:55.897

根据您的标记，可能有更好的方法来获取所有输入，例如，在给定容器中查找所有输入，但缺少此类信息，您仍然可以执行以下操作：

```
function updateIds() {

   var count = 0;

   var inputs = document.getElementsByTagName('input');
   for(var i = 0; l = inputs.length; i < l; i++) {
      if(inputs[i].name == 'e_id[]') {

         inputs[i].id = 'selected_id-' + (++count);

      }
   }

} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-07T10:53:33.810

您可以在 JavaScript 中使用名为[`setAttribute()`](http://www.w3schools.com/dom/met_element_setattribute.asp).

### JavaScript方式：

```
var elem = document.getElementById("selected_id-2"); 
elem.setAttribute("id", "selected_id-3");
elem.id = "selected_id-3"; 
```

### jQuery方式：

```
$("#selected_id-2").attr("id", "selected_id-3"); 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-09-07T10:52:09.677

您可以使用一些 DOM 体操，例如

```
document.getElementById("elementId").id.value="newId" 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-09-07T10:53:34.587

```
$("#selected_id-" + number_to_change).attr('id',"selected_id-"+(number_to_change-1)); 
```

# java - GWT：如何计算片段数

> ID：12316616
> 
> 赞同：1
> 
> 时间：2012-09-07T10:49:33.307
> 
> 标签：java, gwt, fragment

来自[https://developers.google.com/web-toolkit/articles/fragment_merging](https://developers.google.com/web-toolkit/articles/fragment_merging)：

> 要启用此功能，只需添加`-XfragmentCount x`到 GWT 编译器命令行，代码拆分器将尝试将独占片段的数量限制为 x。这里，x 是独占片段数的下限。当编译器认为合并尽可能多的分割点可能没有好处时，实际数字可能大于 x。

所以我问，如何为他们的应用计算“x”？碎片是通过研究编译器报告简单地“根据需要”执行的，还是应该使用一些神奇的公式/方程式或一组因素？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T13:57:01.573

假设您有 X 个没有合并选项的片段。编译时不使用合并选项并使用 (X - 1) 设置并比较结果。请注意，有一个错误显示剩余代码为零：它不是。检查输出文件夹的实际大小。

请注意，如果编译器决定合并多个片段（假设您得到 X - 4 个），您可能会得到少于 X - 1 个片段。您可以尝试更多地强制该问题并使用 X - 5 选项进行编译。编译器会按照你的要求去做，但很可能没有或几乎没有好处。

我通常将此设置保持在 X - 1，并让编译器决定要合并多少片段。

# php - 在 PHP 中具有进程分叉的 Rabbitmq 队列

> ID：12316620
> 
> 赞同：0
> 
> 时间：2012-09-07T10:50:04.923
> 
> 标签：php, rabbitmq, amqp

我有基于PHP标准[AMQP类的简单队列工作者。](http://php.net/manual/en/book.amqp.php)它与 RabbitMQ 作为服务器一起使用。我有用于初始化 AMQP 连接 wirh RabbitMQ 的队列类。下面的代码一切正常：

```
$queue = new Queue('myQueue');

 while($envelope = $queue->getEnvelope()) {
   $command = unserialize($envelope->getBody());

   if ($command instanceof QueueCommand) {
     try {
       if ($command->execute()) {
         $queue->ack($envelope->getDeliveryTag());
       }
     } catch (Exception $exc) {
       // an error occurred so do some processing to deal with it
     }
   }
 } 
```

但是我想分叉队列命令执行，但在这种情况下，队列会一遍又一遍地与第一个命令一起执行。我无法确认 RabbitMQ 收到的消息是 $queue->ack(); 我的分叉版本（为了测试而简化了只有一个孩子）看起来像这样：

```
$queue = new Queue('myQueue');

while($envelope = $queue->getEnvelope()) {
  $command = unserialize($envelope->getBody());

  if ($command instanceof QueueCommand) {
    $pid = pcntl_fork();

    if ($pid) {
      //parent proces
      //wait for child
      pcntl_waitpid($pid, $status, WUNTRACED);

      if($status > 0) {
        // an error occurred so do some processing to deal with it
      } else {
        //remove Command from queue
        $queue->ack($envelope->getDeliveryTag());
      }
    } else {
      //child process
      try {
        if ($command->execute()) {
          exit(0);
        }
      } catch (Exception $exc) {
        exit(1);
      }
    }
  }
} 
```

任何帮助将不胜感激...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T11:56:10.610

我终于解决了问题！我必须从子进程运行 ack 命令，它是这样工作的！这是正确的代码：

```
$queue = new Queue('myQueue');

while($envelope = $queue->getEnvelope()) {
  $command = unserialize($envelope->getBody());

  if ($command instanceof QueueCommand) {
    $pid = pcntl_fork();

    if ($pid) {
      //parent proces
      //wit for child
      pcntl_waitpid($pid, $status, WUNTRACED);

      if($status > 0) {
        // an error occurred so do some processing to deal with it
      } else {
        // sucess
      }
    } else {
      //child process
      try {
        if ($command->execute()) {
          $queue->ack($envelope->getDeliveryTag());
          exit(0);
        }
      } catch (Exception $exc) {
        exit(1);
      }
    }
  }
} 
```

# android - 如何从其他图书馆活动中调用一个图书馆活动？

> ID：12316621
> 
> 赞同：0
> 
> 时间：2012-09-07T10:50:10.687
> 
> 标签：android, android-manifest, android-library

我没有其他方法可以问这个问题，所以这是我的问题：我有一个用于两个应用程序的库项目，并且运行良好。现在我有两个应用程序的通用登录页面和登录功能，并且为了避免重复代码，我想为两个应用程序使用相同的登录活动。这是我使用的代码

图书馆项目

```
 public class CanteenPreference {

        // Static variables declaration
        private static final String KEY_INSTANCE_URL = "instance_url";
        private static final String KEY_USER_NAME = "user_name_preferences";
        private static final String KEY_ACCESS_KEY = "access_key_preferences";
        public static final String DEFAULT_URL = "some url";
        private static final String URL_SUFFIX = "/api/call";

        /**
         * Gets the preferred url.
         * 
         * @param activity
         * @return
         */
        public static String getUrl(Activity activity){
            SharedPreferences sharedPrefs = PreferenceManager.getDefaultSharedPreferences(activity.getApplicationContext());
            String previousURL = sharedPrefs.getString(KEY_INSTANCE_URL, null);
            if (previousURL == null) {
                Intent in=new Intent(activity,LoginActivity.class);
                activity.startActivity(in);

                previousURL = sharedPrefs.getString(KEY_INSTANCE_URL, DEFAULT_URL + URL_SUFFIX);
            }
            return previousURL;
        }

        /**
         * Gets the preferred user name.
         * 
         * @param activity
         * @return
         */
        public static String getUserName(Activity activity){
            SharedPreferences sharedPrefs = PreferenceManager.getDefaultSharedPreferences(activity.getApplicationContext());
            String previousUsername = sharedPrefs.getString(KEY_USER_NAME, null);
            if (previousUsername == null) {
                activity.startActivity(new Intent(activity, LoginActivity.class));

                previousUsername = sharedPrefs.getString(KEY_USER_NAME, "test");
            }
            return previousUsername;
        }

        /**
         * Gets the preferred password.
         * 
         * @param activity
         * @return
         */
        public static String getPassword(Activity activity){
            SharedPreferences sharedPrefs = PreferenceManager.getDefaultSharedPreferences(activity.getApplicationContext());
            String previousPassword = sharedPrefs.getString(KEY_ACCESS_KEY, null);
            if (previousPassword == null) {
                activity.startActivity(new Intent(activity, LoginActivity.class));

                previousPassword = sharedPrefs.getString(KEY_ACCESS_KEY, "test");
            }
            return previousPassword;
        }

        /**
         * Writes the preferences
         * 
         * @param activity
         * @param url
         * @param userName
         * @param password
         * @return true if committed
         */
        public static boolean write(Activity activity, String url, String userName, String password){
            SharedPreferences sharedPrefs = PreferenceManager.getDefaultSharedPreferences(activity.getApplicationContext());
            SharedPreferences.Editor prefEditor = sharedPrefs.edit();

            prefEditor.putString(KEY_INSTANCE_URL, url + URL_SUFFIX);
            prefEditor.putString(KEY_USER_NAME, userName);
            prefEditor.putString(KEY_ACCESS_KEY, password);
            return prefEditor.commit();
        }
    } 
```

和图书馆中的登录活动

```
 public class LoginActivity extends Activity {
    private EditText mUrlInput;
    private EditText mUserInput;
    private EditText mPasswordInput;
    private Button mButton;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.login_page);
        mButton = (Button) findViewById(R.id.loginButt);
        mUrlInput = (EditText) findViewById(R.id.urlInput);
        mUserInput = (EditText) findViewById(R.id.userInput);
        mPasswordInput = (EditText) findViewById(R.id.passwordInput);

        mUrlInput.setText(CanteenPreference.DEFAULT_URL);

        mButton.setOnClickListener(new OnClickListener() {
            public void onClick(View v) {
                final String url = mUrlInput.getText().toString();
                final String userName = mUserInput.getText().toString();
                final String password = mPasswordInput.getText().toString();

                if (url == null || url.length() == 0 || userName == null
                        || userName.length() == 0 || password == null
                        || password.length() == 0) {
                    Toast toast = Toast.makeText(LoginActivity.this,
                            "All fields are required", Toast.LENGTH_SHORT);
                    toast.show();

                } else {

                    Thread loginThread = new Thread() {
                        @Override
                        public void run() {
                            try {
                                DefaultHttpClient httpClient = new DefaultHttpClient();
                                HttpPost httpPost = new HttpPost(url);
                                List<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>();

                                nameValuePairs.add(new BasicNameValuePair(
                                        "username", userName));
                                nameValuePairs.add(new BasicNameValuePair(
                                        "password", password));

                                httpPost.setEntity(new UrlEncodedFormEntity(
                                        nameValuePairs));
                                HttpResponse httpResponse = httpClient
                                        .execute(httpPost);

                                if (httpResponse.getStatusLine()
                                        .getStatusCode() != HttpStatus.SC_OK) {
                                    throw new Exception("Invalid credentials !");
                                }

                            } catch (Exception e) {
                                Log.d("Login: ", "Invalid credentials", e);
                                Toast toast = Toast.makeText(
                                        LoginActivity.this,
                                        "Invalid credentials",
                                        Toast.LENGTH_SHORT);
                                toast.show();
                            }
                            // write the preferences
                            CanteenPreference.write(LoginActivity.this, url,
                                    userName, password);
                            // finish the activity
                            LoginActivity.this.finish();
                        }
                    };

                    loginThread.start();
                }
            }
        });
    }
} 
```

我已经在应用程序和库清单中定义了登录活动，但我仍然关注 logcat`

```
 09-07 16:00:12.436: W/ActivityThread(1429): Application com.jumbybay.ferry is waiting for the debugger on port 8100...
09-07 16:00:12.465: I/System.out(1429): Sending WAIT chunk
09-07 16:00:12.465: I/dalvikvm(1429): Debugger is active
09-07 16:00:12.476: I/System.out(1429): Debugger has connected
09-07 16:00:12.476: I/System.out(1429): waiting for debugger to settle...
09-07 16:00:12.685: I/System.out(1429): waiting for debugger to settle...
09-07 16:00:12.836: I/dalvikvm(1429): threadid=3: reacting to signal 3
09-07 16:00:12.896: I/System.out(1429): waiting for debugger to settle...
09-07 16:00:12.896: I/dalvikvm(1429): Wrote stack traces to '/data/anr/traces.txt'
09-07 16:00:13.096: I/System.out(1429): waiting for debugger to settle...
09-07 16:00:13.306: I/System.out(1429): waiting for debugger to settle...
09-07 16:00:13.336: I/dalvikvm(1429): threadid=3: reacting to signal 3
09-07 16:00:13.346: I/dalvikvm(1429): Wrote stack traces to '/data/anr/traces.txt'
09-07 16:00:13.505: I/System.out(1429): waiting for debugger to settle...
09-07 16:00:13.708: I/System.out(1429): waiting for debugger to settle...
09-07 16:00:13.836: I/dalvikvm(1429): threadid=3: reacting to signal 3
09-07 16:00:13.856: I/dalvikvm(1429): Wrote stack traces to '/data/anr/traces.txt'
09-07 16:00:13.906: I/System.out(1429): waiting for debugger to settle...
09-07 16:00:14.106: I/System.out(1429): waiting for debugger to settle...
09-07 16:00:14.306: I/System.out(1429): waiting for debugger to settle...
09-07 16:00:14.376: I/dalvikvm(1429): threadid=3: reacting to signal 3
09-07 16:00:14.385: I/dalvikvm(1429): Wrote stack traces to '/data/anr/traces.txt'
09-07 16:00:14.515: I/System.out(1429): waiting for debugger to settle...
09-07 16:00:14.717: I/System.out(1429): waiting for debugger to settle...
09-07 16:00:14.846: I/dalvikvm(1429): threadid=3: reacting to signal 3
09-07 16:00:14.866: I/dalvikvm(1429): Wrote stack traces to '/data/anr/traces.txt'
09-07 16:00:14.916: I/System.out(1429): debugger has settled (1325)
09-07 16:00:15.356: I/dalvikvm(1429): threadid=3: reacting to signal 3
09-07 16:00:15.375: I/dalvikvm(1429): Wrote stack traces to '/data/anr/traces.txt'
09-07 16:00:15.866: I/dalvikvm(1429): threadid=3: reacting to signal 3
09-07 16:00:15.886: D/dalvikvm(1429): threadid=1: still suspended after undo (sc=1 dc=1)
09-07 16:00:15.886: I/dalvikvm(1429): Wrote stack traces to '/data/anr/traces.txt'
09-07 16:00:16.375: I/dalvikvm(1429): threadid=3: reacting to signal 3
09-07 16:00:16.385: D/dalvikvm(1429): threadid=1: still suspended after undo (sc=1 dc=1)
09-07 16:00:16.385: I/dalvikvm(1429): Wrote stack traces to '/data/anr/traces.txt'
09-07 16:00:16.866: I/dalvikvm(1429): threadid=3: reacting to signal 3
09-07 16:00:16.876: D/dalvikvm(1429): threadid=1: still suspended after undo (sc=1 dc=1)
09-07 16:00:16.886: I/dalvikvm(1429): Wrote stack traces to '/data/anr/traces.txt'
09-07 16:00:17.375: I/dalvikvm(1429): threadid=3: reacting to signal 3
09-07 16:00:17.385: D/dalvikvm(1429): threadid=1: still suspended after undo (sc=1 dc=1)
09-07 16:00:17.385: I/dalvikvm(1429): Wrote stack traces to '/data/anr/traces.txt'
09-07 16:00:17.886: I/dalvikvm(1429): threadid=3: reacting to signal 3
09-07 16:00:17.896: D/dalvikvm(1429): threadid=1: still suspended after undo (sc=1 dc=1)
09-07 16:00:17.896: I/dalvikvm(1429): Wrote stack traces to '/data/anr/traces.txt'
09-07 16:00:18.385: I/dalvikvm(1429): threadid=3: reacting to signal 3
09-07 16:00:18.395: D/dalvikvm(1429): threadid=1: still suspended after undo (sc=1 dc=1)
09-07 16:00:18.395: I/dalvikvm(1429): Wrote stack traces to '/data/anr/traces.txt'
09-07 16:00:18.896: I/dalvikvm(1429): threadid=3: reacting to signal 3
09-07 16:00:18.906: D/dalvikvm(1429): threadid=1: still suspended after undo (sc=1 dc=1)
09-07 16:00:18.906: I/dalvikvm(1429): Wrote stack traces to '/data/anr/traces.txt'
09-07 16:00:19.395: I/dalvikvm(1429): threadid=3: reacting to signal 3
09-07 16:00:19.405: D/dalvikvm(1429): threadid=1: still suspended after undo (sc=1 dc=1)
09-07 16:00:19.405: I/dalvikvm(1429): Wrote stack traces to '/data/anr/traces.txt'
09-07 16:00:19.896: I/dalvikvm(1429): threadid=3: reacting to signal 3
09-07 16:00:19.916: D/dalvikvm(1429): threadid=1: still suspended after undo (sc=1 dc=1)
09-07 16:00:19.916: I/dalvikvm(1429): Wrote stack traces to '/data/anr/traces.txt'
09-07 16:00:20.395: I/dalvikvm(1429): threadid=3: reacting to signal 3
09-07 16:00:20.415: D/dalvikvm(1429): threadid=1: still suspended after undo (sc=1 dc=1)
09-07 16:00:20.415: I/dalvikvm(1429): Wrote stack traces to '/data/anr/traces.txt'
09-07 16:00:20.906: I/dalvikvm(1429): threadid=3: reacting to signal 3
09-07 16:00:20.926: D/dalvikvm(1429): threadid=1: still suspended after undo (sc=1 dc=1)
09-07 16:00:20.926: I/dalvikvm(1429): Wrote stack traces to '/data/anr/traces.txt'
09-07 16:00:21.405: I/dalvikvm(1429): threadid=3: reacting to signal 3
09-07 16:00:21.425: D/dalvikvm(1429): threadid=1: still suspended after undo (sc=1 dc=1)
09-07 16:00:21.425: I/dalvikvm(1429): Wrote stack traces to '/data/anr/traces.txt'
09-07 16:00:21.916: I/dalvikvm(1429): threadid=3: reacting to signal 3
09-07 16:00:21.926: D/dalvikvm(1429): threadid=1: still suspended after undo (sc=1 dc=1)
09-07 16:00:21.936: I/dalvikvm(1429): Wrote stack traces to '/data/anr/traces.txt'
09-07 16:01:15.126: W/ActivityThread(1470): Application com.jumbybay.ferry is waiting for the debugger on port 8100...
09-07 16:01:15.176: I/System.out(1470): Sending WAIT chunk
09-07 16:01:15.176: I/dalvikvm(1470): Debugger is active
09-07 16:01:15.385: I/System.out(1470): Debugger has connected
09-07 16:01:15.385: I/System.out(1470): waiting for debugger to settle...
09-07 16:01:15.585: I/System.out(1470): waiting for debugger to settle...
09-07 16:01:15.787: I/System.out(1470): waiting for debugger to settle...
09-07 16:01:15.996: I/System.out(1470): waiting for debugger to settle...
09-07 16:01:16.195: I/System.out(1470): waiting for debugger to settle...
09-07 16:01:16.399: I/System.out(1470): waiting for debugger to settle...
09-07 16:01:16.601: I/System.out(1470): waiting for debugger to settle...
09-07 16:01:16.795: I/System.out(1470): waiting for debugger to settle...
09-07 16:01:16.996: I/System.out(1470): waiting for debugger to settle...
09-07 16:01:17.207: I/System.out(1470): waiting for debugger to settle...
09-07 16:01:17.408: I/System.out(1470): waiting for debugger to settle...
09-07 16:01:17.610: I/System.out(1470): debugger has settled (1403)
09-07 16:02:10.908: D/AndroidRuntime(1470): Shutting down VM
09-07 16:02:10.908: W/dalvikvm(1470): threadid=1: thread exiting with uncaught exception (group=0x409c01f8)
09-07 16:02:11.056: E/AndroidRuntime(1470): FATAL EXCEPTION: main
09-07 16:02:11.056: E/AndroidRuntime(1470): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.jumbybay.ferry/com.jumbybay.ferry.FerryMain}: android.content.ActivityNotFoundException: Unable to find explicit activity class {com.jumbybay.ferry/com.jumbybay.activity.LoginActivity}; have you declared this activity in your AndroidManifest.xml?
09-07 16:02:11.056: E/AndroidRuntime(1470):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1956)
09-07 16:02:11.056: E/AndroidRuntime(1470):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1981)
09-07 16:02:11.056: E/AndroidRuntime(1470):     at android.app.ActivityThread.access$600(ActivityThread.java:123)
09-07 16:02:11.056: E/AndroidRuntime(1470):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1147)
09-07 16:02:11.056: E/AndroidRuntime(1470):     at android.os.Handler.dispatchMessage(Handler.java:99)
09-07 16:02:11.056: E/AndroidRuntime(1470):     at android.os.Looper.loop(Looper.java:137)
09-07 16:02:11.056: E/AndroidRuntime(1470):     at android.app.ActivityThread.main(ActivityThread.java:4424)
09-07 16:02:11.056: E/AndroidRuntime(1470):     at java.lang.reflect.Method.invokeNative(Native Method)
09-07 16:02:11.056: E/AndroidRuntime(1470):     at java.lang.reflect.Method.invoke(Method.java:511)
09-07 16:02:11.056: E/AndroidRuntime(1470):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
09-07 16:02:11.056: E/AndroidRuntime(1470):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
09-07 16:02:11.056: E/AndroidRuntime(1470):     at dalvik.system.NativeStart.main(Native Method)
09-07 16:02:11.056: E/AndroidRuntime(1470): Caused by: android.content.ActivityNotFoundException: Unable to find explicit activity class {com.jumbybay.ferry/com.jumbybay.activity.LoginActivity}; have you declared this activity in your AndroidManifest.xml?
09-07 16:02:11.056: E/AndroidRuntime(1470):     at android.app.Instrumentation.checkStartActivityResult(Instrumentation.java:1508)
09-07 16:02:11.056: E/AndroidRuntime(1470):     at android.app.Instrumentation.execStartActivity(Instrumentation.java:1384)
09-07 16:02:11.056: E/AndroidRuntime(1470):     at android.app.Activity.startActivityForResult(Activity.java:3190)
09-07 16:02:11.056: E/AndroidRuntime(1470):     at android.app.Activity.startActivity(Activity.java:3297)
09-07 16:02:11.056: E/AndroidRuntime(1470):     at com.jumbybay.activity.CanteenPreference.getUrl(CanteenPreference.java:32)
09-07 16:02:11.056: E/AndroidRuntime(1470):     at com.jumbybay.ferry.FerryMain.onCreate(FerryMain.java:42)
09-07 16:02:11.056: E/AndroidRuntime(1470):     at android.app.Activity.performCreate(Activity.java:4465)
09-07 16:02:11.056: E/AndroidRuntime(1470):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1049)
09-07 16:02:11.056: E/AndroidRuntime(1470):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1920)
09-07 16:02:11.056: E/AndroidRuntime(1470):     ... 11 more
09-07 16:02:11.716: I/dalvikvm(1470): threadid=3: reacting to signal 3
09-07 16:02:11.736: I/dalvikvm(1470): Wrote stack traces to '/data/anr/traces.txt'
09-07 16:07:11.416: I/Process(1470): Sending signal. PID: 1470 SIG: 9 
```

清单文件主要活动

```
 <manifest xmlns:android="http://schemas.android.com/apk/res/android"
        package="com.jumbybay.ferry"
        android:versionCode="1"
        android:versionName="1.0" >

        <uses-sdk
            android:minSdkVersion="11"
            android:targetSdkVersion="10" />

        <uses-permission android:name="android.permission.INTERNET" />
        <uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" />

        <application
            android:icon="@drawable/ic_launcher"
            android:label="@string/app_name"
            android:theme="@style/AppTheme" >
            <activity android:name=".FerryMain" >
                <intent-filter>
                    <action android:name="android.intent.action.MAIN" />

                    <category android:name="android.intent.category.LAUNCHER" />
                </intent-filter>
            </activity>

            <activity android:name=".ferryBlur" >
            </activity>
            <activity android:name=".PassengerList" >
            </activity>
            <activity android:name=".com.jumbybay.activity.LoginActivity" >
            </activity>
            <activity android:name=".TripIn" >
            </activity>
        </application>

    </manifest> 
```

清单文件库

```
 <manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.jumbybay.activity"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk
        android:minSdkVersion="14"
        android:targetSdkVersion="15" />

    <uses-permission android:name="android.permission.NFC" />
        <uses-permission android:name="android.permission.INTERNET" />

    <uses-feature android:name="android.hardware.nfc" />

    <application>
        <activity
            android:name=".LoginActivity"
            android:label="Jumbybay : Canteen" >
        </activity>
        <activity android:name=".NfcReaderActivity" >
            <intent-filter>
                <action android:name="android.nfc.action.TAG_DISCOVERED" />

                <category android:name="android.intent.category.DEFAULT" />
            </intent-filter>
        </activity>
    </application>

</manifest> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T12:04:03.737

尝试`.`在您的应用清单中删除

改变

```
<activity android:name=".com.jumbybay.activity.LoginActivity" > 
```

进入

```
<activity android:name="com.jumbybay.activity.LoginActivity" > 
```

这`.`意味着这是您的清单包的一部分，在您的情况下这是错误的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-07T12:06:01.263

我预计问题与领先的 . 您在其中指定登录活动

.com.jumbybay.activity.LoginActivity

尝试将其更改为 com.jumbybay.activity.LoginActivity

您还需要确保在设备上安装了相关活动

# sql-server-2008 - 如何更新应该反映在外键列中的主键列？

> ID：12316628
> 
> 赞同：0
> 
> 时间：2012-09-07T10:50:17.100
> 
> 标签：sql-server-2008

我有两张桌子`emp_details`和`dep_details`.

在`emp_details`字段中是 ( `empid`, `empname`, `empsal`, `deptId(f.key)`)，在`dept_details`字段中是 ( `deptID(P.key)`, `deptname`)。

如果我更新`empname`, `empsal`and `deptname`from `empdetails`and `deptdetails`，主键列和外键列`deptID`必须同时更新。

以下是我尝试过的存储过程：

```
alter proc UpdateEmployeeDetail(@eid int ,@ename varchar(30),@esal float, @deptid varchar(30),@deptname varchar(30))
as 
begin
update e set e.ename=@ename, e.esal=@esal, e.deptid=@deptid from
 EmployeeDetails e where  e.eid=@eid
 update d set d.deptid=@deptid, d.deptname=@deptname from  DepartmentDetails d  , EmployeeDetails e
 where e.deptid=d.deptid and d.deptid=@deptid
end 
go' 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T14:24:22.433

也许您可以更改表之间的约束（ON UPDATE CASCADE）..：

```
ALTER TABLE dbo.MyTable ADD CONSTRAINT
    FK_SomeFK FOREIGN KEY
    (
        SomeID
    ) REFERENCES dbo.OtherTable
    (
        SomeId
    ) ON UPDATE CASCADE 
     ON DELETE NO ACTION 
```

# android - 少数小部件的一类

> ID：12316632
> 
> 赞同：0
> 
> 时间：2012-09-07T10:50:37.290
> 
> 标签：android, widget

我的应用程序中几乎没有大小不同的小部件。对于每个小部件，我需要将接收器 android:name 设置为不同的值（否则 Android 只显示一个第一个小部件）。所以我需要为每个小部件创建具有相同代码的单独类。那是不安。我怎样才能避免这种情况？我可以创建一个父类并为其他小部件类继承它吗？

我的代码：

显现：

```
 <meta-data
            android:name="android.appwidget.provider"
            android:resource="@xml/widget_1x1" />

    </receiver>

    <receiver android:exported="false"
        android:name=".WidgetHandler_4x4"
        android:label="Widget 4x4" >
        <intent-filter>
            <action android:name="android.appwidget.action.APPWIDGET_UPDATE" />
        </intent-filter>

        <meta-data
            android:name="android.appwidget.provider"
            android:resource="@xml/widget_4x4" />
    </receiver> 
```

和 WidgetHandler_1x1 / WidgetHandler_4x4：

```
 public class WidgetHandler_4x4 extends AppWidgetProvider {
        public static String ACTION_WIDGET_EDIT = "ActionWidgetEdit";

        @Override
        public void onUpdate(Context context, AppWidgetManager appWidgetManager, int[] appWidgetIds) {
             RemoteViews remoteViews = new RemoteViews(context.getPackageName(), R.layout.widget);

             Intent editIntent = new Intent(context, this.getClass());
             editIntent.setAction(ACTION_WIDGET_EDIT);
             PendingIntent editPendingIntent = PendingIntent.getBroadcast(context, 0, editIntent, 0);
             remoteViews.setOnClickPendingIntent(R.id.edit_button, editPendingIntent);

             appWidgetManager.updateAppWidget(appWidgetIds, remoteViews);
        }

        @Override
        public void onReceive(Context context, Intent intent) {
             if (intent.getAction().equals(ACTION_WIDGET_EDIT)) {
                  Toast.makeText(context, "edit", Toast.LENGTH_SHORT).show();
             }
             super.onReceive(context, intent);
       }
    } 
```

# ollydbg - ollydbg - 关于插件的两个菜鸟问题

> ID：12316633
> 
> 赞同：0
> 
> 时间：2012-09-07T10:50:39.553
> 
> 标签：ollydbg

我已经很好地掌握了 ollydbg 的基础知识，但遇到了障碍：

1.  在搜索中找不到引用的文本，有人可以推荐插件来解决这个问题吗？

2.  在选项 => 目录中引用了插件目录，但在插件下拉列表中，除了书签之外，我没有其他选项。点击书签，它是空的。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T13:48:22.027

下载了 ollydbg 1.0，插件现在出现了。

# python - psycopg2 执行返回日期时间而不是字符串

> ID：12316638
> 
> 赞同：6
> 
> 时间：2012-09-07T10:51:22.017
> 
> 标签：python, psycopg2

```
cur.execute("SELECT \
                title, \
                body, \
                date \ # This pgsql type is date
             FROM \
                table \
             WHERE id = '%s';", id)

response = cur.fetchall()

print response 
```

作为一个例子，这给了我： -

```
[('sample title', 'sample body', datetime.date(2012, 8, 5))] 
```

不能传递给像**json.dumps**这样的东西，所以我必须这样做： -

```
processed = []

for row in response:
    processed.append({'title' : row[0], 
                      'body' : row[1], 
                      'date' : str(row[2])
                     }) 
```

这感觉像是糟糕的形式，有没有人知道更好的处理方法？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-07T10:56:19.580

首先，您期望从具有“日期”数据类型的字段返回什么？明确地，**date**和 driver 显然在这里按预期执行。

所以你的任务实际上是找出如何说 json 编码器来编码`datetime.date`类的实例。简单的答案，通过子类化内置编码器来改进编码器：

```
from datetime import date
import json

class DateEncoder(json.JSONEncoder):

    def default(self, obj):
        if isinstance(obj, date):
            return str(obj)
        return json.JSONEncoder.default(self, obj) 
```

用法（您需要明确说明您正在使用自定义编码器）：

```
json.dumps(_your_dict, cls=DateEncoder) 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2018-05-27T18:45:08.000

正如前面的答案所暗示的，这是对日期字段进行查询的预期结果。但是，可以在查询本身中简化很多。如果您浏览 postgres 文档，您可以找到[to_char()](https://www.postgresql.org/docs/8.2/static/functions-formatting.html) 函数。这将导致您的查询发生简单的变化

```
cur.execute("SELECT \
            title, \
            body, \
            to_char(date, 'YYY-MM-DD') \ # This pgsql type is date
         FROM \
            table \
         WHERE id = '%s';", id) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2022-02-10T13:43:50.340

您可以自定义 SQL 和 Python 数据类型之间的 psycopg2 映射，而不是添加编码，如下所述：

[https://www.psycopg.org/docs/advanced.html#type-casting-of-sql-types-into-python-objects](https://www.psycopg.org/docs/advanced.html#type-casting-of-sql-types-into-python-objects)

代码模板是

```
date_oid = 1082 # id of date type, see docs how to get it from db
def casting_fn(val,cur):
  # process as you like, e.g. string formatting
# register custom mapping
datetype_casted = psycopg2.extensions.new_type((date_oid,), "date", casting_fn)
psycopg2.extensions.register_type(datetype_casted) 
```

完成此操作后， `[('sample title', 'sample body', datetime.date(2012, 8, 5))]` 您将收到 `[('sample title', 'sample body', '2012-08-05')]`

# php - zend layout.phtml 错误

> ID：12316639
> 
> 赞同：1
> 
> 时间：2012-09-07T10:51:22.653
> 
> 标签：php, zend-framework, zend-view

嗨，我的 Zend Framework 项目出现错误...

它提出：

> 指定的控制器无效 (myweb)

这是我的阿帕奇`error.log`：

> `foreach()`PHP 警告：在第 107 行的 /var/www/myweb/application/layouts/scripts/layout.phtml 中提供的参数无效

这是我的代码`layout.phtml`：

```
<?php foreach($this->category as $categories):?>

    <li><a href="<?php echo $this->url(array('controller'=>'product', 'action'=>'index','category'=> $categories['categoriesName']), null, true);?>"><div id="sidemenu"> �&lt;?php echo $categories['categoriesName'];?></div></a></li>

    <?php endforeach;?> 
```

有谁能够帮我？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-08T08:21:25.240

问题似乎是由于某种原因您的 url 呈现`myweb`为控制器而不是您的控制器。

我的猜测是您正在尝试使用 localhost 来显示您的应用程序，因此呈现的 url 类似于`http://localhost/myweb/...`

虽然可以使用*localhost*查看 ZF 应用程序，但随着应用程序变得越来越复杂，它通常会变得不方便。我建议您将[虚拟主机](http://www.survivethedeepend.com/zendframeworkbook/en/1.0/creating.a.local.domain.using.apache.virtual.hosts)用于除非常简单的应用程序之外的任何内容。

我很确定当您解决 url 问题时，php 警告可能会自行修复。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T11:40:12.003

似乎该变量`$this->category`未在控制器中设置。您可以通过`$this->view->category`从控制器定义来做到这一点。

大多数情况下，当在布局脚本而不是相应的视图脚本中使用这些控制器生成的变量时，您希望在每个视图中使用相同的数据。如果是这种情况，请检查以下问题：[Sending variables to the layout in Zend Framework](https://stackoverflow.com/questions/1537700/sending-variables-to-the-layout-in-zend-framework)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-07T11:36:07.317

出现此错误是因为您的数组`$this->category`为空白。如果这是空白数组或不返回任何内容，那么 foreach 循环将如何执行？

所以首先打印这个数组并检查。

# dependencies - 如何让 maven-bundle-plugin 在 OSGi 清单中包含 maven 依赖项

> ID：12316645
> 
> 赞同：2
> 
> 时间：2012-09-07T10:51:37.067
> 
> 标签：dependencies, osgi, maven-bundle-plugin

希望有人可以帮助我解决这个问题。我正在尝试使用 maven-bundle-plugin 从我的 maven 依赖项中自动生成我的 OSGi 清单。我在 OSGi 容器中安装了一些依赖项，因为它们在多个包中共享。例如，春天。我正在设置这些依赖项的范围，如提供的那样（因为它们是在容器中提供的，而不是被嵌入的）。但是，我无法让 maven-bundle-plugin 将这些依赖项包含在清单的部分中。任何想法如何做到这一点？

```
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
<modelVersion>4.0.0</modelVersion>
<groupId>com.example.osgi.test</groupId>
<artifactId>spring-mvc-bundle</artifactId>
<version>0.0.1-SNAPSHOT</version>
<packaging>war</packaging>

<properties>
    <spring.version>3.0.5.RELEASE</spring.version>
    <spring.osgi.version>1.2.1</spring.osgi.version>
</properties>

<!-- Module dependencies -->
<dependencies>
    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-context</artifactId>
        <version>${spring.version}</version>
        <scope>provided</scope> 
    </dependency>
    <!-- Other dependencies here... -->
</dependencies>

<!-- Build plugins + config -->
<build>
    <plugins>

        <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-war-plugin</artifactId>
            <version>2.2</version>
            <executions>
                <execution>
                    <id>create-war</id>
                    <phase>package</phase>
                    <goals>
                        <goal>war</goal>
                    </goals>
                </execution>
            </executions>

            <configuration>
                <archive>
                    <manifestFile>${project.build.outputDirectory}/META-INF/MANIFEST.MF</manifestFile>
                </archive>
            </configuration>
        </plugin>

        <plugin>
            <groupId>org.apache.felix</groupId>
            <artifactId>maven-bundle-plugin</artifactId>
            <version>2.3.5</version>
            <executions>
                <execution>
                    <id>bundle-manifest</id>
                    <phase>process-classes</phase>
                    <goals>
                        <goal>manifest</goal>
                    </goals>
                </execution>
            </executions>
            <extensions>true</extensions>
            <configuration>
                <supportedProjectTypes>
                    <supportedProjectType>war</supportedProjectType>
                    <supportedProjectType>jar</supportedProjectType>
                    <supportedProjectType>bundle</supportedProjectType>
                </supportedProjectTypes>
            </configuration>
        </plugin>
    </plugins>
</build> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T15:30:45.717

这在很大程度上取决于您对这些依赖项的使用。如果它们与动态类加载一起使用，则 bnd 工具不知道如何处理这些。因此，您需要将这些依赖项添加到配置部分的一部分中。这样，除了已经找到的 Imports 之外，它们还会作为 Imports 添加到您的 Manifest 中。

# c# - 访问 xaml 中的嵌入式 WPF 控件

> ID：12316648
> 
> 赞同：1
> 
> 时间：2012-09-07T10:51:44.993
> 
> 标签：c#, wpf, silverlight, xaml

可以说我得到了以下用户控制：

```
<UserControl x:Class="MyUserControl">
    <tk:DataGrid>
        <tk:DataGrid.Columns>
            <!-- some columns -->
        </tk:DataGrid.Columns>
    </tk:DataGrid>
</UserControl> 
```

实际上，我无法定义数据网格应该有哪些列，因为我需要在很多地方使用这个控件，使用不同的列。这是我想做的事情：

```
<UserControl x:Class="MyPanel">
    <ui:MyUserControl>
        <Columns>
            <!-- columns that will go into the data grid -->
        </Columns>
    </ui:MyUserControl>
</UserControl> 
```

有可能实现这一目标吗？

PS：DataGrid.Columns 是只读的，无法将其绑定到其他东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T10:54:15.817

您可以在被调用者上公开一个[依赖属性](http://msdn.microsoft.com/en-us/library/ms752914.aspx)，该属性可以绑定到内部. 您当然可以通过访问该物业。`UserControl``Columns``DataGrid``<ui:MyUserControl.Columns>`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-07T11:29:52.137

正如@HB 在他的解决方案中所说，您应该公开自己的依赖属性，但仅执行绑定是行不通的，因为该`Columns`属性是只读的。

您需要做的是在依赖属性的`OnChange`回调中处理此问题，并根据需要添加/删除列。您还需要注册到您的依赖属性的`CollectionChanged`事件，可能还有网格的列`CollectionChanged`，以同步这两个属性。

不幸的是，我认为没有针对此的仅限 XAML 的解决方案。

# java - 在 jconsole 中激活 jmxmp

> ID：12316651
> 
> 赞同：1
> 
> 时间：2012-09-07T10:51:52.420
> 
> 标签：java, jvm, jmx, jconsole, jvm-arguments

我正在尝试通过 jmxmp 协议使用 jconsole 连接到我的 tomcat 服务器。我`jmxremote_optional.jar`在 jdk 和 jre 文件夹中到处都是，但是当我尝试连接时，我仍然得到：

```
malformed exception: unsupported protocol 
```

如何启用此协议？非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T12:15:32.243

您还需要确保 JVM 参数启用了 JMX。JVM 需要以下参数：

```
java \
    -Dcom.sun.management.jmxremote \
    -Dcom.sun.management.jmxremote.authenticate=false \
    ... 
```

这是有关如何[使用 Tomcat 启用 JMX](http://tomcat.apache.org/tomcat-6.0-doc/monitoring.html)的页面。

* * *

**编辑：**

我相信最终，这是一个类路径问题。这是一个页面，它提供了一些关于[如何在运行 jconsole 时设置类路径的](http://docs.oracle.com/cd/E14571_01/web.1111/e13729/accesscust.htm)示例。它是这样的：

```
jconsole -J-Djava.class.path=$JAVA_HOME/lib/jconsole.jar:\
    $JAVA_HOME/lib/tools.jar:\
    $WLS_HOME/lib/wljmxclient.jar \
    -J-Djmx.remote.protocol.provider.pkgs=weblogic.management.remote 
```

# javascript - 出现错误 - SCRIPT5022：Sys.WebForms.PageRequestManagerParserErrorException：无法解析从服务器收到的消息

> ID：12316664
> 
> 赞同：0
> 
> 时间：2012-09-07T10:52:31.827
> 
> 标签：javascript, asp.net, updatepanel, internet-explorer-7, dopostback

我需要帮助。我在 .Net 3.5 中创建了一个 Web 应用程序，它使用 asp.net 母版页、更新面板和服务器控件。我有使用母版页创建的 asp.net 页面，其中包含更新面板，更新面板包含其他服务器控件。我正在尝试使用 javascript 生成位于更新面板中的链接按钮的回发

```
__doPostBack('<%= ServerControl.ClientID.Replace("_","$") %>', ''); 
```

每个浏览器都在执行此代码，但 IE7 并未执行此 javascript。我在 IE7 中收到此错误：

```
SCRIPT5022: Sys.WebForms.PageRequestManagerParserErrorException: The message received from the server could not be parsed. Common causes for this error are when the response is modified by calls to Response.Write(), response filters, HttpModules, or server trace is enabled.
Details: Error parsing near '

<!DOCTYPE html P'. 
ScriptResource.axd?d=83rNjjrfU8utKX3Fb9DiQ2ssFx4VjayT06ZNJ9Aj38iN2ufeWDf1Hd7nu73QshB8Q80tcmosFZ1IQcnqEvC-7nMUe8kLPGpreZP7iBWnviMAl8vzvxmED51yr720yzPv0&t=ffffffffec2d9970, line 513 character 13 
```

我不知道这里是什么原因。我试图设置这个

```
ValidateRequest="false" EnableEventValidation="false" 
```

但它仍然无法正常工作。我使用了更新面板，因为我想向客户端发送异步请求，所以我只想使用异步回发类型的事件我不想使用回发类型的事件（它重新加载整个页面）。

请问有人可以帮助我吗？这将是非常大的帮助。

谢谢，

安维什

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-07T10:58:24.220

**该错误的最常见原因：**

*   调用 Response.Write()：
*   响应过滤器
*   HttpModules
*   服务器跟踪已启用
*   调用 Server.Transfer()

有关避免错误 [**Sys.WebForms.PageRequestManagerParserErrorException 的更多详细信息，请参阅此博客 - 它是什么以及如何避免它**](http://weblogs.asp.net/leftslipper/archive/2007/02/26/sys-webforms-pagerequestmanagerparsererrorexception-what-it-is-and-how-to-avoid-it.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-08T09:02:32.043

好的，我自己解决了这个问题。

我所做的是我已经设定

```
ValidateRequest="false" 
```

在页面指令中。我也从表单标签中删除了 action="#" 。

我改变了这个

```
<form id="Form1" method="post" action="#" runat="server"> 
```

对此：

```
<form id="Form1" method="post" runat="server"> 
```

我在这里写回复，所以如果有人面临同样的问题，那么他可以使用这个解决方案。

谢谢， 安维什

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-02-24T19:49:54.927

我遇到了同样的问题，我注意到错误是由于我正在执行插入的表中现有触发器中的错误引起的。

修复了触发器并且它起作用了

# .net - 如何在 Silverlight 图表的轴中将数字格式化为指数

> ID：12316670
> 
> 赞同：0
> 
> 时间：2012-09-07T10:52:56.007
> 
> 标签：.net, silverlight, charts, silverlight-toolkit

我正在使用 Silverlight 图表来显示包含非常大数字的数据。

像“36000000000000”这样的轴上的标签并不是特别好。如何将它们格式化为像“3.6 x 10^13”这样的指数？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T16:30:18.317

你想要的是一个数字字符串格式，它将接受一个数字并输出你想要的格式的字符串。

以下是 .NET 中内置的一些基本数字字符串格式的列表：

[http://msdn.microsoft.com/en-us/library/0c899ak8.aspx](http://msdn.microsoft.com/en-us/library/0c899ak8.aspx)

因此，例如，您可以使用以下代码将大数字转换为压缩格式：

```
long bigNum = 36000000000000;
string displayString = bigNum.ToString("e0"); 
```

如果您使用绑定，则可以在 XAML 中使用这些权限，方法是创建 IValueConverter 对象来执行自定义转换，或者在绑定本身上使用 StringFormat。您可能必须发布有关图表实施的更多详细信息，以确定如何创建用于显示轴标签的模板。

所以基本上你可能有两个不同的问题需要解决：

1.  查找或创建一个字符串格式提供程序，它可以将您的数字格式化为您想要的字符串。

2.  自定义图表控件上的标签。

因此，让我们知道您需要帮助（或两者）是哪个问题，并为您的图表发布代码。

# javascript - 容器内的jquery ui可拖动滚动

> ID：12316675
> 
> 赞同：7
> 
> 时间：2012-09-07T10:53:11.127
> 
> 标签：javascript, jquery, jquery-ui

我有一个无序列表，并使用 jquery ui draggable 为每个列表项添加了可拖动功能。该列表位于 id="content" 的 div 中。这是我的 UL 清单的快照

![在此处输入图像描述](../Images/d51fc312ba70ba70e460ef0f3cf9c162.png)

这是我写的代码：

```
 <script src="../../jquery-1.8.0.js"></script>
<script src="../../ui/jquery.ui.core.js"></script>
<script src="../../ui/jquery.ui.widget.js"></script>
<script src="../../ui/jquery.ui.mouse.js"></script>
<script src="../../ui/jquery.ui.draggable.js"></script>
 <script type="text/javascript">
$(function() {
    $( ".draggable" ).draggable({ 
        scroll: true,
        scrollSensitivity: 100,
        revert: true,
        containment: '#content',
        zIndex: 999990,
        revertDuration: 100,
        delay: 100 
    });
});
</script>
<div style="width:200px;height:300px;overflow:auto;" id="content">
    <ul>
    <li class="draggable">One</li>
    <li class="draggable">Two</li>
    <li class="draggable">Three</li>
    <li class="draggable">Four</li>
    <li class="draggable">five</li>
    <li class="draggable">six</li>
    <li class="draggable">Seven</li>
    <li class="draggable">Eight</li>
    <li class="draggable">Nine</li>
    <li class="draggable">Ten</li>
    <li class="draggable">Eleven</li>
    <li class="draggable">Twelve</li>
    <li class="draggable">Thirteen</li>
    <li class="draggable">Fourteen</li>
    <li class="draggable">Fifteen</li>
    <li class="draggable">Sixteen</li>
    <li class="draggable">Seventeen</li>
    <li class="draggable">Eighteen</li>
    <li class="draggable">Nineteen</li>
    <li class="draggable">Twenty</li>
      </ul>
 </div> 
```

我想做的是当我在容器中拖动任何列表项（即 id="content" 的 div）并且当鼠标位于 div 边框或大小的边缘时，容器也应该滚动以便我可以在容器内上下移动。

例如，如果我想将列表中的最后一个列表项拖动到列表中的第一个，那么当鼠标位于 div 边缘的顶端时，容器（在我们的示例中为 div）也应该自动滚动。这是 jquery ui 可拖动中的错误吗？请帮忙

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T14:54:23.177

尝试降级到 jQuery 1.7.2

（我认为它不应该与 1.8 一起使用。当你下载 jQuery UI 时，你可以在 rar 中找到最新的兼容版本）

# jenkins - Artifactory 的 Debian 存储库插件？

> ID：12316677
> 
> 赞同：6
> 
> 时间：2012-09-07T10:53:12.880
> 
> 标签：jenkins, debian, artifactory

我找到了一个 yum 插件，它可以让 Artifactory 充当[rpm 存储库](http://wiki.jfrog.org/confluence/display/RTF/YUM+Repositories)。debian 软件包存储库是否有类似的插件？

附言。作为与 Jenkins 和 Artifactory 继续集成过程的一部分，我将我的软件部署为 deb 包。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-07T17:58:12.630

我们正在努力 :) 请投票：[https ://issues.jfrog.org/jira/browse/RTFACT-4613](https://issues.jfrog.org/jira/browse/RTFACT-4613)

**2014 年 7 月 13 日更新：**等待结束！[支持 Debian 的 Artifactory 3.3 已经发布！](http://www.jfrog.com/confluence/display/RTF/Artifactory+3.3)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-04T22:56:24.303

我刚刚发布了[dput-webdav](https://github.com/jhermann/artifactory-debian#package-uploading)，因此您现在可以轻松地将您的软件包上传到[Artifactory 托管的 Debian 存储库中](https://github.com/jhermann/artifactory-debian#overview)。

# linux - 强制 Eclipse 将插件存储在工作区之外

> ID：12316679
> 
> 赞同：1
> 
> 时间：2012-09-07T10:53:26.057
> 
> 标签：linux, eclipse

我正准备将我的 Eclipse 更新到 4.2 版本，我想解决一个多年来一直困扰我的问题。现在我的安装看起来像这样：

*   eclipse 文件夹位于 /usr/local/share。这是一个系统范围的目录，但 Eclipse 需要用户的写入权限，这与 unix 权限理念背道而驰。
*   我有一个工作区，我安装的所有插件都进入这个工作区中的 .metadata 文件夹。

我想要实现的是：

*   首先，不要在工作区目录中安装插件。我希望看到插件安装在我的主目录中的某处，或者 - 如果用户需要对 eclipse 目录具有写权限 - 在 eclipse 目录本身中。
*   取消用户对 eclipse 目录的写权限。这当然会阻止在那里安装插件，但我不介意将它们安装在某个地方〜
*   更好的解决方案是取消用户对 eclipse 目录的写入权限，并能够以 root 身份在该目录中安装插件。所以当我想添加新插件时，我以 root 权限启动 Eclipse，安装插件（它进入 eclipse 安装目录），然后我可以作为非特权用户使用这个插件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T15:34:51.307

虽然我不是 linux 用户，但我 99% 确信插件永远不会安装到工作区中；这与 Eclipse 架构中工作区和插件的分离方式正好相反。工作区可能具有存储与类似于插件名称的文件/文件夹名称的配置/缓存数据，但实际插件存储在其他地方。

我认为，如果您阅读在线帮助中的[多用户安装指南](http://help.eclipse.org/juno/index.jsp?topic=/org.eclipse.platform.doc.isv/reference/misc/multi_user_installs.html)，您会发现其中列出的选项之一将满足您的需求。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-07T18:56:39.363

查看共享安装文档以获取有关如何设置用户没有写入权限的基本 Eclipse 并允许用户本地安装插件的说明。

[http://help.eclipse.org/indigo/index.jsp?topic=%2Forg.eclipse.platform.doc.isv%2Freference%2Fmisc%2Fmulti_user_installs.html](http://help.eclipse.org/indigo/index.jsp?topic=%2Forg.eclipse.platform.doc.isv%2Freference%2Fmisc%2Fmulti_user_installs.html)

# javascript - javascript 或 mootools 动画滚动顶部的方法，如 jQuery

> ID：12316683
> 
> 赞同：1
> 
> 时间：2012-09-07T10:53:43.017
> 
> 标签：javascript, jquery, mootools

这相当于什么：

```
$('html, body').animate({
    scrollTop: 200
}, 400); 
```

在 MooTools 或不可知论的 javascript 中？

我在兜圈子……

干杯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T11:37:02.207

此循环可以在基本 javascript 中为窗口的 scrollTop 属性设置动画：

```
window.onload = function() {
    var offset = 0; //vertical offset
    var interval = setInterval(function() {
        window.scrollTo(0, offset);
        offset += 4; // plus 4 pixels
        if (offset >= 200) {
            clearInterval(interval);
        }
    }, 8); //  200px/4px==50 cycles ; 400ms/50cycles == 8ms per cycle
}; 
```

[小提琴](http://jsfiddle.net/kJLjb/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-09T14:24:09.177

因为您要求在 mootools 中提供一个版本，所以只有一行：

```
new Fx.Scroll(window).start(0, 200);​ 
```

[http://jsfiddle.net/ye3vX/](http://jsfiddle.net/ye3vX/)

注意：需要mootools more的Fx.Scroll。

# xml - 如何从 xml 标签中删除 xmlns=""

> ID：12316686
> 
> 赞同：0
> 
> 时间：2012-09-07T10:53:54.803
> 
> 标签：xml, xml-parsing

我正在编写以下代码以向现有 xml 添加标题标签。

```
 String pagemetadata = curPage.Metadata.OuterXml;
            XmlDocument pageMeta = new XmlDocument();
            pageMeta.LoadXml(pagemetadata);

            XmlNode Metadata = pageMeta.FirstChild as XmlNode;
            XmlNode headingNode = pageMeta.CreateNode(XmlNodeType.Element, "heading", null);
            headingNode.InnerText = HTML_BrowserTitle;
            Metadata.AppendChild(headingNode); 
```

我可以添加标签，如下所示。但是我怎样才能从标签中删除 xmlns="" 呢？

```
<title xmlns="">    </title> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T11:01:38.800

This usually happens when the namespace of the document is different to the namespace of the element. Try creating the XML Node with `CreateNodeNS` instead of `CreateNode`, and make sure it is in the same namespace as its parent/main document.

# workitem - 将 tfs2010 中的 ALLOWEDVALUES 更改为 AD 组

> ID：12316691
> 
> 赞同：0
> 
> 时间：2012-09-07T10:54:17.943
> 
> 标签：workitem

我有一个工作项的小问题。

我的目标是将`<ALLOWEDVALUES>`工作项更改为 AD 组，以便并非所有“ValidUsers”都能获得分配的工作项。为此，我创建了一个新的 TFS 组“TFS_AssignGroup”并向其中添加了 AD 组 (AD-TFS_AssignGroup)。

现在我更改了工作项类型定义：

```
<FIELD name="Assigned To" refname="System.AssignedTo" type="String" syncnamechanges="true" reportable="dimension">
        <HELPTEXT>The person currently working on this bug</HELPTEXT>
        <ALLOWEDVALUES expanditems="true" filteritems="excludegroups">
            <LISTITEM value="[project]\TFS_AssignGroup" />
        </ALLOWEDVALUES>
      </FIELD> 
```

现在我预计，AssignedTo 字段仅显示 AD 组中的人员。但它实际上只向我展示了 AD 组本身。因此，我的 AssignedTo 字段中只有一个条目：AD-TFS_AssignGroup。

任何的想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T16:41:44.423

好的，这很简单：从 AD 获取数据只需要一些时间。所以解决办法就是什么都不做，等待（或者重启TFS服务器）。

# python - 你怎么能绑定 到 tkinter 按钮小部件？

> ID：12316696
> 
> 赞同：0
> 
> 时间：2012-09-07T10:54:48.647
> 
> 标签：python, tkinter, bind

我想使用一个 Button 小部件来拖动一个项目。如果我使用的是标签小部件，我可以绑定到小部件并获取事件，但按钮小部件似乎会消耗所有鼠标事件。有任何想法吗？

背景：我正在创建一个网格，其中每一行都有几个按钮来执行各种操作。我希望能够通过单击拖动小部件来重新排序行，然后上下拖动小部件（携带整行）。这是我的图形用户界面：

```
+---+--------------+---+---+
|        Title         | + |
+---+--------------+---+---+
| - | Label widget | = | > |
+---+--------------+---+---+
| - | Label widget | = | > |
+---+--------------+---+---+
| - | Label widget | = | > |
+---+--------------+---+---+ 
```

“+”是添加行的按钮（通过弹出窗口填写数据），“-”是删除行的按钮，“>”是允许您编辑（通过弹出窗口）行数据的按钮。通过单击并拖动“=”，您可以重新排列行。目前，它是一个图像标签，但我希望它像其他控件一样是一个按钮。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T11:42:05.757

按钮小部件与任何其他小部件没有什么不同，只是它已经绑定了某些事件（这意味着您需要禁用它们，或者准备好使用它们）。您仍然可以将您想要的任何事件绑定到按钮，但我质疑您为什么要为此目的使用按钮。大多数人不会期望能够拖动按钮——按钮提供了能够推动它而不是拖动它的功能。

如果是我，我会把你的按钮重新排列成这样：

```
+---+--------------+---+---+
|        Title         | + |
+---+--------------+---+---+
| = | Label widget | > | - |
+---+--------------+---+---+
| = | Label widget | > | - |
+---+--------------+---+---+
| = | Label widget | > | - |
+---+--------------+---+---+ 
```

然后，将“= 按钮”更改为看起来可以抓取的图像。通常情况下，我认为有两到三条水平线的图像似乎是为了“抓握”。另外，我认为通过抓住末端来移动某物比抓住中间的某个地方更常见。

现在您可以抓住左边缘（可以说这是一种更自然的移动方式），并且所有添加/删除按钮都排在同一列中。另外，编辑弹出按钮紧靠正在编辑的东西，这对我来说是有道理的。

您还可以考虑将布局更改为如下所示：

```
+---+--------------+---+---+---+
|             Title            |
+---+--------------+---+---+---+
| = | Label widget | > | - | + |
+---+--------------+---+---+---+
| = | Label widget | > | - | + |
+---+--------------+---+---+---+
| = | Label widget | > | - | + |
+---+--------------+---+---+---+ 
```

上述的优点是它允许您在中间添加一个按钮，而不是总是在末尾添加或删除，这意味着您的用户可能会学会通过单击而不是单击来准确地添加一行和拖累。

# c# - C＃。OpenTK 与 OpenGL 相同的代码？

> ID：12316697
> 
> 赞同：6
> 
> 时间：2012-09-07T10:54:52.483
> 
> 标签：c#, opengl, opentk

我正在考虑使用 C# 学习 OpenGL，并且我打算使用 OpenTK。我想知道 OpenTK 和“真正的 OpenGL”的代码是否相同？我是否必须阅读有关 OpenTK 的书籍/教程，或者我是否可以阅读有关 OpenGL 的内容并仍然学习用 C# 编写代码？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T18:22:37.120

我想说学习 OpenGL，然后在他们的网站上查看 C++/OpenGL 和 C#/OpenTK 之间的一些细微差别。正如我所说的，总体上差异很小，OpenTK 只会让你的事情变得更容易，不会让它们变得更复杂。

我还注意到关于 OpenTK 的一点是，他们正试图让一些基本类型看起来像 XNA。即，你会发现 glVertex3f(float, float, float); 在 OpenGL/C++ 中，你可以写成 GL.Vertex3(Vector3); ，其中他们从 XNA 中“窃取”了 Vector3 数据类型（尽管您不需要使用 Vector3 执行此操作），因此对于类似的事情，阅读一些 OpenTK 文档可能会很方便。虽然这不是必需的，但它可能有助于简化一些事情。

至于我自己，我开始学习 OpenTK 之前有 XNA 的经验，所以我已经知道游戏背后的主要逻辑，并且切换到 OpenTK 非常简单，我在网上找到了我需要的所有信息！

# jquery - jquery attr value 返回 undefined 或 0 如果 value 是一个大数字

> ID：12316700
> 
> 赞同：0
> 
> 时间：2012-09-07T10:54:54.467
> 
> 标签：jquery, attr

首先，我很抱歉如果问了这样的问题，因为我已经搜索了很多小时。请忍受我的问题。让我详细说明。我正在动态地将选项添加到具有“值”属性的选择元素，例如简单的 10 位电话号码（如 7465768574）和文本为“名称（电话号码）”，当用户选择时，将其添加到无序列表中以显示用户选择的选项。为了删除该列表项，我提供了一个图像，单击该图像首先检查选择元素中是否存在相应的选项，然后从无序列表中删除相同的列表项并从选择元素中删除相应的选项。现在，为了实现这一点，我正在检查“价值”属性。问题是如果该值属性是像电话号码这样的大数字，我的逻辑失败了，因为 jQuery 无法正确提取该值。如果它是一个非常大的数字，它返回 0，如果它在 6,000,000,000 到 7,000,000,000 的范围内（值中没有逗号），它返回一些随机数。我不知道问题是什么。它与价值类型有关吗？

```
<select multiple="multiple" id="select1">  
     <option class="selectedoptions" value="8234567890">Joker(8234567890)</option>  
     <option class="selectedoptions" value="2">Batman(2)</option>  
     <option class="selectedoptions" value="3">Superman(3)</option>  
     <option class="selectedoptions" value="4">Spiderman(4)</option>
     <option class="selectedoptions" value="5">Ironman(5)</option> 
     <option class="selectedoptions" value="6">Thor(6)</option> 
     <option class="selectedoptions" value="7">Loki(7)</option>
</select> 
```

我的 jQuery 代码是

```
 function removeSelected() {
            var check = $(this).parent().attr('value');
            var parent = $(this).parent();
            $('#select2 option').each(function () {
                if ($(this).attr('value') == check) {
                    $(this).remove().appendTo('#select1');
                    parent.remove();
                    return true;
                }
                return true;
            });
            return true;
        } 
```

当我使用 FireBug 调试此代码时，我可以看到对于较大的数字，“检查”为 0，并且对于小于 8,000,000,000 的某个范围，它返回的随机数。对于较小的数字，它可以完美地工作。

另外，如果我尝试 .val() 而不是 .attr('value') 萤火虫显示错误

```
TypeError: (c.value || "").replace is not a function 
```

提前谢谢各位。

编辑1：好的。似乎我的动态添加列表项的 jQuery 代码在列表项中引入了随机数作为值。但问题仍然存在。我可以看到我的代码（通过萤火虫）在创建列表项时添加了适当的值，但生成的列表项没有反映它。

编辑 2：回应 ronalchn 先生。对不起。需要一个上下文。我所拥有的正在关注。2 选择元素“select1”和“select2”和一个无序列表“selectedlist”。用户可以从“select1”中选择选项并将其移动到“select2”。&“select2”选项将/应该反映为“selectedlist”的列表项。我有一个函数 removeSelected 绑定到列表项内的图像。

```
<li class="selectedlistItems" value="8123456789">
Joker(8123456789)
<a class="search-choice-close" href="#"> </a>
</li> 
```

现在在函数中，我试图遍历“select2”的选项并检查它的哪些选项具有与此列表项相同的值。"check" 是列表项的 "value" &

```
$(this).attr('value') 
```

是“select2 选项”的值。如果匹配则

```
$(this).remove().appendTo('#select1'); 
```

删除“select2 选项”并将其附加到“select1”，其中

```
parent.remove(); 
```

删除列表项，以便无序列表始终反映“select2”元素。

我想这个上下文足以理解我想要做什么。我是 jquery 的新手，通常我会发布问题，我只是找到答案，这是我的第一个问题。我已经很感谢这么快的反应。

编辑 3：检查这个 jsFiddle 以了解情况。[http://jsfiddle.net/ygaurav/vUgym/](http://jsfiddle.net/ygaurav/vUgym/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T11:17:07.250

`attr()`绝对适用于大数字，因为它只返回一个字符串。

我在 jsfiddle 上试过你的代码。当然，它遗漏了一些细节，所以我只是创造性地添加了它。然后我修复了一些看起来不正确的代码。无论如何，它现在正在工作。

[http://jsfiddle.net/QA5nk/1/](http://jsfiddle.net/QA5nk/1/)

更改包括以下几行：

```
var check = $(this).attr('value'); // instead of looking for the parent
...
// parent.remove(); // this line is removing what is already removed 
```

您尝试两次删除某些内容，这也使页面炸毁，所以我将其注释掉。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T10:05:41.963

这是因为，当您将其分配给元素的`'value'`属性时，这是一种类型。这就是为什么它会导致溢出并且你会得到一个垃圾值。`<li>``'value'``'number'`

为什么不使用自定义属性，我的意思是不要`'value'`使用其他自定义属性。前任。说`'toonId'`

```
$('#list').append($("<li></li>").html(Joker(8123456789)'<a class=search-choice-close href=#></a>').attr('toonId', "8234567890")); 
```

渲染后的外观如下：

```
<li class="selectedlistItems" toonId="8234567890">Joker(8123456789)<a class="search-choice-close" href="#"> </a></li> 
```

这将为`<li>`项目添加一个新属性，您以后可以在任何地方访问该`'toonId'`属性。

希望这会有所帮助。

# api - 如何获得不同网站的点赞数？

> ID：12316702
> 
> 赞同：0
> 
> 时间：2012-09-07T10:54:55.350
> 
> 标签：api, ruby-on-rails-3.1

我需要计算 Rails 3 应用程序中特定 URL 的 Facebook Likes、Google +1、Diggs、StumbleUpon 和 Tweets。

Rails 中是否有任何教程、API 或演示？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T05:50:05.267

对于[`facebook likes count`](http://developers.facebook.com/docs/reference/plugins/like/),[`google +1 count`](http://www.tomanthony.co.uk/google_plus_one_api_example.php)

我写了以下帮助程序来根据 url 查找计数

```
 #Ref:- http://developers.facebook.com/docs/reference/plugins/like/
  def facebook_like_count(url, id)
    js = <<-JAVASCRIPT
      <div id="#{id}">
        <img src='/images/facebook_login.png'/>
      </div>
      <script>
        jQuery(window).load(function() {
          var query = FB.Data.query('select like_count from link_stat where url="#{url}"');
          query.wait(function(rows){
            jQuery("##{id}").append((typeof(rows[0]) === "undefined") ? "<br/>0" : "<br/>"+rows[0].like_count)
          });
        });
      </script>
      JAVASCRIPT
      js.html_safe
  end

  def tweets_count(url, id)
    js = <<-JAVASCRIPT
      <div id="#{id}">
        <img src="/images/share-twitter.png" />
      </div>
      <script>
        jQuery(window).load(function() {
          jQuery.getJSON('http://feeds.delicious.com/v2/json/urlinfo/data?url='+"#{url}"+'&amp;callback=?',
            function(data) {
              jQuery('##{id}').append((typeof(data[0]) === "undefined") ? "<br/>0" : "<br/>"+data[0].total_posts);
          });
        });
      </script>
      JAVASCRIPT
      js.html_safe
  end

  #Ref:- https://developers.google.com/+/plugins/+1button/#plusonetag-parameters
  def google_plus_one_count(url, id)
    js = <<-JAVASCRIPT
      <div id="#{id}">
        <g:plusone href="#{url}" annotation="bubble"></g:plusone>
      </div>
      <script type="text/javascript">
        jQuery(window).load(function() {
        window.___gcfg = {
          lang: 'en-US'
        };

        (function() {
          var po = document.createElement('script'); po.type = 'text/javascript'; po.async = true;
          po.src = 'https://apis.google.com/js/plusone.js';
          var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(po, s);
        })();
        });
      </script>
      JAVASCRIPT
      js.html_safe
  end 
```

# php - php require_once windows和linux之间的路径差异

> ID：12316703
> 
> 赞同：5
> 
> 时间：2012-09-07T10:54:55.743
> 
> 标签：php, windows, linux, relative-path, require-once

我的 CakePHP 根文件夹中有一个文件，位于名为 cron 的文件夹下。路径是：

```
c:/wamp/www/project/cron/daily.php 
```

该文件需要在 cake 结构的 vendor 文件夹中放置另一个文件，如下所示：

```
require("/../vendors/phpMailer/class.phpmailer.php"); 
```

我从任务调度程序运行这个**daily.php 。**这是我的开发站点中的场景。（Windows系统）。它按预期工作正常。当我将项目迁移到 Ubuntu（生产站点）时，**require**语句开始引起问题；它找不到所需的文件。我在那里做了一个小改动，如下所示：

```
require("../vendors/phpMailer/class.phpmailer.php"); <= removed the preceding slash 
```

它奏效了。所以我的疑问是，父目录符号在寡妇和 Linux 中的工作方式有什么不同吗？如果是这样，我该如何克服？每次我将项目从我的开发站点（Windows）移动到生产站点（Linux）时，删除一个斜线是不可行的。

* * *

我试过这个：

```
 require("./../vendors/phpMailer/class.phpmailer.php"); 
```

它在linux中工作。但是在 Windows 中给出了“没有这样的文件目录”错误。似乎 windows 仅适用于：

```
 require("/../vendors/phpMailer/class.phpmailer.php"); 
```

* * *

**解决方案**

来自@TWCrap 的帮助问题解决如下：

```
require(dirname(__FILE__)."/../vendors/phpMailer/class.phpmailer.php"); 
```

它适用于 Windows 和 linux（* 喜悦之泪 *）。但在 Windows 中，它产生的路径为：

```
C:\wamp\www\project\cron/../vendors/phpMailer/class.phpmailer.php 
```

这条路看起来很丑，我希望它不会在未来造成问题！

-多谢你们！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-07T10:57:21.197

我记得，当您在该行前面放置 1 个点时，您将从您所在的目录开始。因此，该行必须如下所示：

```
require("./../vendors/phpMailer/class.phpmailer.php"); 
```

这应该适用于Windows和Linux....

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-07T10:57:55.927

如果您确实不需要，请不要使用**绝对路径。**正确设置更安全，更好，`include_path`因此在移动的情况下，您只需调整一个设置，而不是挖掘整个项目及其所有文件。

> 所以我的疑问是，父目录符号在寡妇和 Linux 中的工作方式有什么不同吗？

以`/`(ie `/foo/bar`) 开头的路径是绝对路径，因为开头`/`表示根文件夹。在 Windows 上，你有驱动器号。

我还建议使用`require_once`以避免重复的要求（如果您将 HTML 与代码混合使用，这是可以的，但无论如何不建议使用“意大利面条代码”），但可能会导致代码出现问题

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-07T10:58:22.337

问题是，至少在 UNIX 系统上，当您在文件路径上以斜杠开头时，您从根目录开始。

您应该在两个系统上都写 ./../ ***或只写 ../ 。它应该同时工作。

# .net - where is mscoree.dll in mono linux?

> ID：12316710
> 
> 赞同：0
> 
> 时间：2012-09-07T10:55:51.953
> 
> 标签：.net, linux, mono

In Windows, the mscoree.dll, is the start of a CLR app, but where is it or what is it in Mono Linux?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-07T11:14:44.187

单声道中没有 mscoree.dll。

所有启动代码都在`mono`可执行文件中。

# c# - 无法更新 EntitySet '...'，因为它有一个 DefiningQuery

> ID：12316711
> 
> 赞同：3
> 
> 时间：2012-09-07T10:55:53.673
> 
> 标签：c#, asp.net-mvc, entity-framework

我将 MVC 4 和 C# 4.5 与 EntityFramework 4 一起使用。

我设置了一个简单的多对多表：

`tblAdminUser -> tblAdminUserRole <- tblAdminRole`

当我尝试向管理员用户添加角色时，出现以下错误：

> “无法更新 EntitySet 'tblAdminUserRole'，因为它有一个 DefiningQuery 并且元素中不存在支持当前操作的元素。”

我正在使用的代码是：

```
this.Role = new tblAdminRole()
{
    Name = "__role__",
};

context.tblAdminRoles.Add(this.Role);
context.SaveChanges();

this.AdminUser.tblAdminRoles.Add(this.Role);
context.SaveChanges(); 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-07T11:01:49.507

Update your database, set pair of foreign key to tables in m2m table as primary key. Then update your model to database.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-07T11:01:02.653

Please check, if all **ID fields** in `tblAdminUserRole` have been set as **Primary Key** in your SQL database. Then update your model.

If Entity Framework can't figure out the primary key, it will generate a `SELECT` statement but it won't be able to create the according `INSERT`, `UPDATE` and `DELETE` statements.

# jquery - 如何获取每个 li 的点击事件，而不是全部

> ID：12316712
> 
> 赞同：0
> 
> 时间：2012-09-07T10:55:52.993
> 
> 标签：jquery, onclick

我试图让这个按钮`onClick`在每个 li 中显示一个隐藏的 div，它将以绝对定位显示在 post div 上。问题是，在点击时，它会显示所有 li 的所有隐藏 div。我使用 wordpress + buddypress，所以每个 li 的 id 都有一个唯一的 ID

```
<li id="activity-<?php bp_activity_id(); ?>" class="activity" >

  <div id="post"></div>

  <div class="action">
   //my pop in stuff
  </div>

  <div id="post-actions-bar">   
    <button id="show">show</button>
  </div>

</li> 
```

这是我认为可行的jquery。注意：我正在使用`.on()`，因为会动态添加 li。

```
$(document).on(  'click' , '.activity button#show' , function() {
   $('.action').show();
}); 
```

从某种意义上说它确实有效，但它显示`.action div's`了屏幕上每个 li 的所有内容，我只想显示被点击的那个 li 按钮的那个。我尝试使用`.each()`，但它不工作。我错了（很明显，哈哈）

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-07T10:58:57.833

在事件处理程序`$(this)`中指的是被单击的一个按钮。所以你需要做的是从 DOM 树开始`$(this)`并[遍历](http://api.jquery.com/category/traversing/tree-traversal/)到`.action`你想要显示的那棵树。

这是一种方法，我觉得更可取：

```
$(document).on('click' , '.activity button' , function() {
   $(this).closest(".activity").find(".action").show();
}); 
```

顺便说一句，您的 HTML 意味着您`id`对多个元素使用相同的值。这是非法的，应该得到解决——造成麻烦只是时间问题。大多数情况下，将共享分配`class`给您的元素而不是相同`id`并使用它是可以的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-07T10:59:04.223

您需要使用`$(this).closest('.activity').find('.action')`而不是`$('.action')`.

这样做的原因很简单 - 当您使用时，`$('.action')`您只需检索与选择器`.action`完全不相关的所有与事件无关的元素。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-07T11:00:37.090

I'd use the ul instead of the document to catch the click event

```
$('ul#parentofyouractivitylis').on('click', '.activity button', function(){
    $(this).closest(".activity").find(".action").show();
}); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-07T11:04:20.397

您不能使用单个绑定来完成它们，因为`.action`无法使用相同的方法`.activity`或`button#show`使用相同的方法。你可以这样做：

```
$(document).on('click', '.activity', function() {
    $(this).find(".action").show();
});

$(document).on('click', '#show', function() {
    $(this).closest(".action").show();
});​ 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-07T11:00:38.573

[Here](http://jsfiddle.net/q5ABt/) is a fiddle for you:

```
// html
<li>
    <div>Loading 1...</div>
</li>
<li>    
    <div>Loading 2...</div>
</li>​

// css
div
{
    display:none;
}​

// js
$("li").click(function(){

   // hide any showing ones
   $("li > div").hide(); 

   $(this).find("> div").show();

}); 
```

# android - Android：运行进度条对话框时无法停止处理程序

> ID：12316713
> 
> 赞同：0
> 
> 时间：2012-09-07T10:55:57.803
> 
> 标签：android, handler, progressdialog

我根据这个网站[http://www.mkyong.com/android/android-progress-bar-example/进行了对话](http://www.mkyong.com/android/android-progress-bar-example/)

当进度条达到 100% 时，对话框关闭，但吐司仍然持续出现。我注意到在 bar 达到 100% 之后，progressHandler 仍然循环运行。

我该如何解决这个问题？我想要的东西：当进度条达到 100% 时，对话框关闭，Toast 显示并关闭。

```
Thread background = new Thread(new Runnable() {
@SuppressWarnings("null")
public void run() {
try {

    while (dialog.getProgress() <= dialog.getMax()) {
    // wait 500ms between each update
    Thread.sleep(100);
    // active the update handler
    progressHandler.sendMessage(progressHandler.obtainMessage());
}

} catch (java.lang.InterruptedException e) {
    // if something fails do something smart
    Toast.makeText(getApplicationContext(), "Error Occurs",Toast.LENGTH_LONG).show();
}
}
});

// start the background thread
background.start();
}

// handler for the background updating
Handler progressHandler = new Handler() {
    public void handleMessage(Message msg) {
    dialog.incrementProgressBy(increment);

    if(dialog.getProgress()==100){
    editor.putInt("lastestSummaryNoSent",summary.getCurrentSummaryNo());
    editor.commit();
    dialog.dismiss();
    Toast.makeText(getApplicationContext(), "Update Finished", Toast.LENGTH_LONG).show();
    }

}
}; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T11:04:19.677

这个错误

> 无法在未调用 Looper.prepare() 的线程内创建处理程序

是因为您在**后台**Thread 中提供了 Toast。删除 Catch 短语中的 Toast 即可。

# internet-explorer - IE 插件 API（接口）

> ID：12316714
> 
> 赞同：1
> 
> 时间：2012-09-07T10:56:12.993
> 
> 标签：internet-explorer, plugins, activex

我正在使用 ActiveX 插件架构。它工作正常。但是现在我需要访问“文档”中的窗口来绘制我自己的视频流。

```
<object id="MyPlugin" name="MyPlugin" type="application/myplugin" classid="CLSID:1BAEC849-6C36-4DEE-905F-111111111" width="200" height="200"></object> 
```

我实现了下一个接口：

```
class MyActiveXObject : public IObjectSafety,
                              public IProvideClassInfo2,
                              public IConnectionPointContainer,
                              public IObjectWithSite,
                              public IOleInPlaceObject,
                              public IPreviewHandler 
```

问题：我需要实现（或调用）哪些接口来获得浏览器中输出窗口的正确位置？我怎样才能得到这个窗口的 HWND？

# android - 如何日期选择器+在按钮中显示日期？android

> ID：12316717
> 
> 赞同：2
> 
> 时间：2012-09-07T10:56:31.480
> 
> 标签：android, layout, button, datepicker, textview

我想在我的活动中有一个按钮，该按钮将默认当前日期显示为按钮标题，当我单击按钮以显示日期选择器对话框并将新选择显示为按钮标题时。

我怎样才能做到这一点？有更好的主意吗？最好用 EditText 来做到这一点，以便用户更容易更改日期？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T11:10:43.090

我在这里附上了时间和日期的代码，根据您的要求使用它。这里打算 txtdate 和 txtTime 你可以在按钮文本上设置它。

```
private static final int DIALOG_DATE = 1;
         private static final int DIALOG_TIME = 2;    

private Calendar dateTime = Calendar.getInstance();
     private SimpleDateFormat dateFormatter = new SimpleDateFormat(
             "MMMM dd yyyy");
     private SimpleDateFormat timeFormatter = new SimpleDateFormat(
             "hh:mm a");

                 txtstdate.setText(dateFormatter.format(dateTime.getTime()));   
  txtAddtime.setText(timeFormatter.format(dateTime.getTime()));

@Override
    protected Dialog onCreateDialog(int id)
    {
        switch (id)
        {
        case DIALOG_DATE:
            return new DatePickerDialog(this, new OnDateSetListener()
            {

                @Override
                public void onDateSet(DatePicker view, int year,
                        int monthOfYear, int dayOfMonth)
                {
                    dateTime.set(year, monthOfYear, dayOfMonth);
                    txtstdate.setText(dateFormatter.format(dateTime.getTime()));
                    txtAdddate.setText(dateFormatter.format(dateTime.getTime()));
                }
            }, dateTime.get(Calendar.YEAR),
               dateTime.get(Calendar.MONTH),
               dateTime.get(Calendar.DAY_OF_MONTH));

        case DIALOG_TIME:
            return new TimePickerDialog(this, new OnTimeSetListener()
            {

                @Override
                public void onTimeSet(TimePicker view, int hourOfDay,
                        int minute)
                {
                    dateTime.set(Calendar.HOUR_OF_DAY, hourOfDay);
                    dateTime.set(Calendar.MINUTE, minute);
                    txtsttime.setText(timeFormatter.format(dateTime.getTime()));
                    txtAddtime.setText(timeFormatter.format(dateTime.getTime()));
                }
            }, dateTime.get(Calendar.HOUR_OF_DAY),
               dateTime.get(Calendar.MINUTE), false);

        }
        return null;
    }

}

**Call Dialog:** 
```

在按钮单击事件上调用此方法。

```
showDialog(DIALOG_DATE);

showDialog(DIALOG_TIME); 
```

访问更多参考：[http](http://hasmukhbhadani.blogspot.in/search/label/Date%20and%20time%20Dialog) ://hasmukhbhadani.blogspot.in/search/label/Date%20and%20time%20Dialog 。 [http://hasmukhbhadani.blogspot.in/search/label/DatePickerSlider%20in%20android](http://hasmukhbhadani.blogspot.in/search/label/DatePickerSlider%20in%20android)。

# java - 找不到 Jersey REST Web 服务子资源

> ID：12316718
> 
> 赞同：4
> 
> 时间：2012-09-07T10:56:32.703
> 
> 标签：java, web-services, rest, jersey

起初，在我的 Web 服务器中，我只有一个 REST servlet。就像是：

```
@Path("/")
public class Controller {
  @GET
  @Produces({ MediaType.TEXT_HTML })
  public Response get(@Context UriInfo info) throws Exception {
    ...
  }

  @GET
  @Path("resource1")
  @Produces({ MediaType.TEXT_HTML })
  public Response resource1() throws Exception {
    ...
  }

  ...

 } 
```

和 web.xml：

```
 <servlet>
    <servlet-name>rest</servlet-name>
    <servlet-class>com.sun.jersey.spi.container.servlet.ServletContainer</servlet-class>
    <init-param>
        <param-name>com.sun.jersey.config.property.packages</param-name>
        <param-value>xpto.mypack1;xpto.mypack2</param-value>
    </init-param>
    <load-on-startup>1</load-on-startup>
</servlet>

<servlet-mapping>
    <servlet-name>rest</servlet-name>
    <url-pattern>/*</url-pattern>
</servlet-mapping> 
```

但是后来我想在服务器上添加一些静态 html，所以我将 servlet 映射更新为 /rest/*

以及 Controller servlet 类的 @Path 指令从“/”到“/rest”。一切正常，但带有停止工作的@path指令的控制器的子资源或方法..即：

*   / 工作正常，因为我在根目录下有一个 index.html 页面
*   /rest 工作正常，它调用我的 servlet 的 get 方法
*   /rest/resource1 返回 404 http 代码...

有什么帮助吗？我已经尝试了每个 @Path 指令之后和之前的 / 组合列表，但没有成功......非常感谢

一更新：

我使用了跟踪工具并得到了以下结果：

对于 /[app-name]/rest （有效）：

*   X-Jersey-Trace-002 接受右手路径 java.util.regex.Matcher[pattern=/rest(/.*)? region=0,11 lastmatch=/rest]: "/rest" -> "/rest" : ""
*   X-Jersey-Trace-003 接受资源："rest" -> @Path("/rest") xpto.mypack.Controller
*   X-Jersey-Trace-000 接受根资源类：“/rest”
*   X-Jersey-Trace-001 匹配路径 "/rest" -> "/application.wadl(/. *)?", "/rest(/.* )?"

对于 /[app-name]/rest/resource1 （它不起作用）：

*   X-Jersey-Trace-002 匹配异常映射器：com.sun.jersey.api.NotFoundException@4fd41dc3 -> xpto.myclass
*   X-Jersey-Trace-003 将异常映射到响应：com.sun.jersey.api.NotFoundException@4fd41dc3 -> 404（未找到） X-Jersey-Trace-000 接受根资源类：“/resource1” X-Jersey- Trace-001 匹配路径“/resource1”->“/application.wadl(/.)?”、“/rest(/. *)* ?”

我希望它可以帮助有人帮助我..

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-10T09:14:17.047

如果您将 servlet 映射定义为`/rest/*`，请不要`/rest`在资源的`@Path`注释中重复。即，您需要做的就是保持控制器不变（在您上面的问题中）并更改 servlet 映射。资源可用的 URL 是：

```
<application_context_path>/<servlet_mapping> 
```

因此，如果您将`@Path`注释从更改`@Path("/")`为`@Path("rest")`并且您还将 servlet 映射更改为`/rest`，那么您的资源将在以下位置可用：

```
<application_context_path>/rest/rest/* 
```

# regex - 如何从 URL 中删除字符串？

> ID：12316719
> 
> 赞同：-1
> 
> 时间：2012-09-07T10:56:35.257
> 
> 标签：regex, coldfusion-8

> **可能重复：**
> [如何去除 url 变量](https://stackoverflow.com/questions/4700884/how-to-strip-out-a-url-variable)

我有网址`http://localhost/abc/detail.cfm?iId=1711471&countrysearch=3693&itemnumbersearch=&keywordsearch=&purl=%2FIGPCI%2Fthumbs%2Ecfm%3Fcountrysearch%3D3693%26itemnumbersearch%3D%26keywordsearch%3D%26x%3D78%26y%3D10&productid=1111&recordindex=1`。
每次我需要准备具有 productid 和 recordindex 新值的新 URL 时，我想在单击名为“next”的链接上搜索产品详细信息。例如，关于 countryid="3693"，我有四个产品，

```
productid productname 
1           p1
2           p2
3           p3
4           p4 
```

下次单击新 URL 时准备 productid=1 和 recordindex=1，再次单击 URL 为 productid=2 和记录 id =2，依此类推。

为了获取 URL，我使用了以下代码：

```
 <cfset currentURL = "#CGI.SERVER_NAME#" & "#CGI.PATH_INFO#" & "#CGI.query_string#"> 
```

这给了我当前的网址

然后我用下面的代码准备新的网址：

```
<cfif queryString.recordset gt 0> <cfset recordindex=#recordindex#+1> <cfset newUrl=currentURL & '&productid=#queryString.poductid[recordindex]#&recordindex=#recordindex#' </cfif> 
```

使用此代码，每次它都将 url 值与旧的附加到新的。喜欢：

```
http://localhost/abc/detail.cfm?iId=1711471&countrysearch=3693&itemnumbersearch=&keywordsearch=&purl=%2FIGPCI%2Fthumbs%2Ecfm%3Fcountrysearch%3D3693%26itemnumbersearch%3D%26keywordsearch%3D%26x%3D78%26y%3D10&productid=1111&recordindex=1&productid=2&recordindex=2 
```

我的问题是如何在旧 URL 中删除旧的**&productid=1111&recordindex=1**。我尝试使用替换功能，但它在字符串匹配时替换，在我的情况下，每次产品和记录索引值都发生变化。如何使用正则表达式删除旧字符串。请帮我。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T12:30:11.580

你不需要正则表达式。事实上，有人已经为此构建了一个 UDF。

[查询字符串删除变量](http://cflib.org/udf/QueryStringDeleteVar)

例子：

```
<cfset currentURL = CGI.SERVER_NAME & CGI.PATH_INFO & queryStringDeleteVar("productid,recordindex")> 
```

UDF 代码：

```
<cfscript>
/**
 * Deletes a var from a query string.
 * Idea for multiple args from Michael Stephenson (michael.stephenson@adtran.com)
 * 
 * @param variable      A variable, or a list of variables, to delete from the query string. 
 * @param qs      Query string to modify. Defaults to CGI.QUERY_STRING. 
 * @return Returns a string. 
 * @author Nathan Dintenfass (michael.stephenson@adtran.comnathan@changemedia.com) 
 * @version 1.1, February 24, 2002 
 */
function queryStringDeleteVar(variable){
    //var to hold the final string
    var string = "";
    //vars for use in the loop, so we don't have to evaluate lists and arrays more than once
    var ii = 1;
    var thisVar = "";
    var thisIndex = "";
    var array = "";
    //if there is a second argument, use that as the query string, otherwise default to cgi.query_string
    var qs = cgi.query_string;
    if(arrayLen(arguments) GT 1)
        qs = arguments[2];
    //put the query string into an array for easier looping
    array = listToArray(qs,"&");        
    //now, loop over the array and rebuild the string
    for(ii = 1; ii lte arrayLen(array); ii = ii + 1){
        thisIndex = array[ii];
        thisVar = listFirst(thisIndex,"=");
        //if this is the var, edit it to the value, otherwise, just append
        if(not listFind(variable,thisVar))
            string = listAppend(string,thisIndex,"&");
    }
    //return the string
    return string;
}
</cfscript> 
```

虽然，由于您要替换 URL 参数值，但[QueryStringChangeVar](http://cflib.org/udf/QueryStringChangeVar)可能更符合您的要求。

```
<cfscript>
/**
 * Changes a var in a query string.
 * 
 * @param name      The name of the name/value pair you want to modify. (Required)
 * @param value      The new value for the name/value pair you want to modify. (Required)
 * @param qs      Query string to modify. Defaults to CGI.QUERY_STRING. (Optional)
 * @return Returns a string. 
 * @author Nathan Dintenfass (nathan@changemedia.com) 
 * @version 2, September 5, 2002 
 */
function QueryStringChangeVar(variable,value){
    //var to hold the final string
    var string = "";
    //vars for use in the loop, so we don't have to evaluate lists and arrays more than once
    var ii = 1;
    var thisVar = "";
    var thisIndex = "";
    var array = "";
    var changedIt = 0;
    //if there is a third argument, use that as the query string, otherwise default to cgi.query_string
    var qs = cgi.query_string;
    if(arrayLen(arguments) GT 2)
        qs = arguments[3];

    //put the query string into an array for easier looping
    array = listToArray(qs,"&");
    //now, loop over the array and rebuild the string
    for(ii = 1; ii lte arrayLen(array); ii = ii + 1){
        thisIndex = array[ii];
        thisVar = listFirst(thisIndex,"=");
        //if this is the var, edit it to the value, otherwise, just append
        if(thisVar is variable){
            string = listAppend(string,thisVar & "=" & value,"&");
            changedIt = 1;
        }
        else{
            string = listAppend(string,thisIndex,"&");
        }
    }
    //if it was not changed, add it!
    if(NOT changedIt)
        string = listAppend(string,variable & "=" & value,"&");
    //return the string
    return string;
}
</cfscript> 
```

# asp.net - 如何在网格加载时不绑定值

> ID：12316720
> 
> 赞同：1
> 
> 时间：2012-09-07T10:56:36.653
> 
> 标签：asp.net, c#-4.0, asp.net-mvc-4, telerik-grid, telerik-mvc

我的代码是：

```
@(Html.Telerik().Grid<Model>()
        .Name("TestGrid")
        .ClientEvents(events =>
        {
            events.OnDataBound("validate");
            events.OnDataBinding("onDataBinding");
        })
        .DataBinding(db => db.Ajax()
                .Select("Action1", "Controller1", new { ldata, filter }).Enabled(true)
                    )
        .Columns(c =>
        {
            c.Bound(ctl => ctl.Uname)
              .ClientTemplate("<input type='radio' id='rdbutton'name='IsSelected'/>")
                //.ClientTemplate("<input name='<#= UserName #>' type='radio' />")
                .Title("").Filterable(false).Sortable(false).Width(5);
            c.Bound(itm => itm.Fname).Title("FName").Width(200).HtmlAttributes(new { @style = "vertical-align: top !important;" });
            c.Bound(itm => itm.LNAme).Title("Lname").Width(200).HtmlAttributes(new { @style = "vertical-align: top !important;" });
            c.Bound(itm => itm.Location).Title("Location").Width(200).HtmlAttributes(new { @style = "vertical-align: top !important;" });
        })
        .Selectable()
        .Sortable()
        .Filterable()
        .Pageable(pg =>
        {
            pg.PageSize(3);
        })
        ) 
```

列是绑定的，因为它们需要在搜索时检索值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-09T18:05:22.393

哟，伙计，

第一个建议 - 使用 Kendo MVC Grid - 你有一个名为**AutoBind**的选项，你可以将其设置为 false。

如果您确实想使用旧的 Grid - 使用**OnDataBinding**事件并在第一次阻止它。

例如

```
var isFirst = true;

function onGridDataBinding(e){
   if(isFrist)
   {
       isFirst=false;
       e.preventDefault();
   }
} 
```

# ios - 在 IOS 上使用 LIKE 的 CoreData 的性能是否比标准 SQLite 差很多

> ID：12316722
> 
> 赞同：1
> 
> 时间：2012-09-07T10:56:44.900
> 
> 标签：ios, sqlite, core-data

我正在使用 NSFetchedResultsController 查询一个包含大约 250,00 个英文单词的非常简单的数据库。我使用 [NSCompoundPredicate andPredicateWithSubPredicates] 构造以下谓词：

```
"word LIKE '*a*' AND word LIKE '*b*' AND word LIKE '*c*' AND word LIKE '*d*'" 
```

当我通过调用 [NSFetchedResultController alloc] initWithFetchRequest:...] 运行查询时，运行大约需要 8 秒。

我可以使用 sqlite3 在完全相同的数据库上运行等效查询：

```
"Select word from words where word LIKE '%a%' AND word LIKE '%b%' ..." 
```

CPU时间约为0.01秒。

使用 LIKE 或使用 NSPredicate 或 NSFetchedResultsController 有区别吗？

更新

目前，对象模型尽可能简单，由单个*Word*对象组成，具有三个属性
NSString * word
NSString * sortedWord
NSInteger 长度。

这是 Instruments - Time Profiler 的屏幕截图（我不确定从 Instruments 共享数据的更好方法），它显示（我认为）大部分时间都花在 [_NSPredicateUtiltiesDoRegexForString:Pattern:likeProtect:flags:语境：]。

[http://www.mckaydalton.com/images/instruments.jpg](http://www.mckaydalton.com/images/instruments.jpg)

此外，这是 SQLDebug 输出：

```
CoreData: sql: SELECT 0, t0.Z_PK, t0.Z_OPT, t0.ZLENGTH, t0.ZSORTEDSTRING, t0.ZWORD FROM ZWORD t0 WHERE ( NSCoreDataLike( t0.ZWORD, ?, 0)  AND  NSCoreDataLike( t0.ZWORD, ?, 0) ) ORDER BY t0.ZWORD 
```

CoreData：注解：sql连接获取时间：10.7353s

CoreData：注释：总提取执行时间：10.7439 秒，24891 行。

这里使用“原始”sqlite3 对同一数据库进行相同的选择：

```
SELECT 0, Z_PK, Z_OPT,ZSORTEDSTRING, ZWORD FROM ZWORD WHERE ZWORD LIKE '%a%' AND ZWORD LIKE '%b%' ORDER BY ZWORD; 
```

CPU时间：用户0.377206 sys 0.054738

因此，在我看来，NSCoreDataLike 的行为与 sqlite 内置的“LIKE”非常不同。这不是一个主要问题，因为我可以只使用 C-api 到 sqlite（尽管我想将项目保留在 CoreData 中，因为它会变得更大，如果可能的话）或使用 CONTAINS 而不是 LIKE （尽管这将需要更改应用程序逻辑），但很高兴了解发生了什么

# java - Java字符串与html标签的比较

> ID：12316723
> 
> 赞同：2
> 
> 时间：2012-09-07T10:56:47.880
> 
> 标签：java

我有两个字符串如下：

```
String input="<tr><td>Hello world</td></tr>";
String output="<body><tr><td>Hello world</td></tr></body>"; 
```

我想比较这两个字符串，`<body></body>`如果输入字符串不包含标签，则需要从输出字符串中删除`<body>`标签。字符串可以是任意长度。

如何根据输入字符串比较和替换输出字符串？ `<body>`标签可能类似于`<body ></body > or < body>< /body>,etc`.

需要找到标签并根据输入字符串替换它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T10:59:04.067

```
static String[] combinations = new String[] {
    "<body>","</body>","< body>","< /body>","<body >"
};

for (int i = 0; i < combinations.length; i++) {
    if (!input.contains(combinations[i])) {  
        output = output.replace(combinations[i], "");    
    }    
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-07T11:00:40.620

```
 String resultingOutput = "";
 if( !(input.contains("<body>")) && !(input.contains("</body>")) ){
      resultingOutput = output.replace("<body>", "").replace("</body>","");
 } 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-09-07T11:03:36.123

```
int compare;
if (!input.contains("<body>"))
compare = output.replaceAll("<body>","").replaceAll("</body>","").compareTo(input); 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-09-07T11:06:59.410

```
public class Practice {

public static void main(String[] args) {
    String input = "<tr><td>Hello world</td></tr>";
    String output = "<body><tr><td>Hello world</td></tr></body>";
    String tag = "<body>";
    String replace = "";

    System.out.println("Output : " + validate(input, output, tag, replace));

}

private static String validate(String input, String output, String word,
        String replace) {

    if (!(input.contains(word)) && !(input.contains(word))) {
        output = output.replace(word, replace).replace(word, replace);
    }
    return output;

}} 
```

# sql - 如何从一列插入多行？

> ID：12316724
> 
> 赞同：5
> 
> 时间：2012-09-07T10:56:51.620
> 
> 标签：sql, database, oracle, insert

我想通过拆分列值从一列中插入多行。但是由于性能问题，我必须在没有游标的情况下这样做。

每个`value`被拆分为 6 个字符长度值。然后这些值也拆分为 3、1 和 2 个字符长度值，以在表 B 中插入不同的列。

我认为提供样本将澄清我的问题：

### 表 A

```
ID      Value
1       ABCDEFGHJKLM
2       NOPRST
3       NULL VALUE 
```

我想像这种格式一样将这些值插入表 B

### 表 B

```
ID     Value1       Value2       Value3
1       ABC          D            EF
1       GHJ          K            LM
2       NOP          R            ST 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-07T11:07:59.877

假设 600（100 行）作为值的最大长度：

```
insert into tableB
select id, substr(value,n*6+1,3), substr(value,n*6+4,1), substr(value,n*6+5,2)
from tableA 
     join (select level-1 as n from dual connect by level <= 100)
       on length(value) > n*6; 
```

见[Sqlfiddle](http://sqlfiddle.com/#!4/d8510/2)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-07T11:21:09.163

```
select ID,
    SUBSTR(value,number*6+1,3),
    SUBSTR(value,number*6+4,1),
    SUBSTR(value,number*6+5,2)
from yourtable,
    (select 0  as number union select 1 union select 2 union select 3 union select 4 
            union  select 5 union select 6) as numbers 
      /* etc up to the max length of your string /6 */
where LEN(value)>number*6 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-07T11:17:33.320

尝试这个：

请将其转换为 ORACLE SQL .. 即使它使用 while 循环，它会进行批量插入 .. 并且循环是按照表中值的最大长度的长度执行的

```
declare @max_len int=0;
declare @counter int=0;
declare @col_index int=1;
select @max_len=MAX(len(Value)) from TableA

while (@max_len/6 > @counter)
begin
    set @counter=@counter+1

    Insert into TableB

    select ID,substring(Value,@col_index,3),
              substring(Value,@col_index+3,1),
              substring(Value,@col_index+4,2) 
    from TableA where substring(Value,@col_index,3) is not null

    set @col_index=@col_index+6
end 
```

# asp.net-mvc - MVC3 管理远程验证异常

> ID：12316727
> 
> 赞同：1
> 
> 时间：2012-09-07T10:57:09.283
> 
> 标签：asp.net-mvc, asp.net-mvc-validation, remote-validation

我有以下问题：我正在使用远程验证来验证字段，现在我正在尝试管理异常

```
public class ValidationController : Controller
{
    List<string> values = new List<string>() { "AAAA", "BBBB" }; //blacklist

    public JsonResult NameAllowed(string ID)
    {
        throw new Exception();
        //return Json(!values.Contains(ID), JsonRequestBehavior.AllowGet);
    }

} 
```

但在这种情况下，表单没有提交（通过网络捕获，开发工具栏出现错误 500）并且没有出现任何错误。

1.  管理异常的最佳方法是什么（例如超时和不可预测的异常）？
2.  是否存在跳过这些错误以提交表单的解决方案（任何服务器端参数）？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T11:21:36.403

远程验证只能用作客户端的图形反馈，以防止用户向服务器发送无用数据。您应该**始终**对您必须验证的所有内容进行服务器端验证，如果您这样做，那么您的表单将被发送但未被批准，并且您的验证错误将与您的无效输入一起显示重新呈现的表单。

将客户端/远程验证作为具有两个目的的“预验证”

1.  防止无用的服务器端处理
2.  提供更具响应性的数据验证，而不是等待提交表单。

然而，它们不应该用于实际验证数据。

**编辑**

也就是说，如何正确编写验证代码，使用 try catch 并且不让任何未处理的异常溜走？

# asp.net - PreRender 阶段非常慢

> ID：12316733
> 
> 赞同：1
> 
> 时间：2012-09-07T10:57:26.407
> 
> 标签：asp.net, viewstate

我刚刚在我的一个页面上遇到了性能问题。**base.PreRender**需要超过 12 秒：

```
aspx.page   Begin PreRender 0.00577958119283298 0.000009
aspx.page   End PreRender   12.3006780015036    12.294898 
```

如何诊断在 PreRender 阶段到底发生了什么？起初我认为这是数据库获取的问题，但据我所知，当 PreRender 发生时，所有数据绑定都已完成。

可能是 ViewState 是问题所在吗？

编辑：我已将此诊断代码添加到我的页面：

```
 protected override void OnPreRender(EventArgs e)
    {
        Trace.Write("OnPreRender", "Start");
        base.OnPreRender(e);
        Trace.Write("OnPreRender", "End");
    } 
```

实际上`Trace.Write("End");`line 是立即执行的。这是跟踪输出

```
aspx.page   Begin PreRender 0.233399419245709   0.000010
OnPreRender Start   0.233407218080441   0.000008
OnPreRender End 0.233415320448565   0.000008
aspx.page   End PreRender   1.45992676325022    1.226511 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-07T13:48:17.310

每个在页面上带有`runat="server"`标签的 Web 控件也将有一个`OnPreRender()`独立于 page.aspx 调用的方法`OnPreRender()`。如果您在页面上有任何自定义控件，则可能值得将相同的诊断代码放入他们的`OnPreRender()`方法中以进一步查找故障。

（很抱歉写这个作为答案 - 还没有足够的代表发表评论！）

# sql-server-2008r2-express - 不允许从数据类型 datetime 到 int 的隐式转换。使用 CONVERT 函数运行此查询

> ID：12316734
> 
> 赞同：-4
> 
> 时间：2012-09-07T10:57:31.173
> 
> 标签：sql-server-2008r2-express

alter table Garantor alter column [Birth Date] int

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-07T11:09:44.120

尝试这样的事情（您需要创建一个新列，使用转换更新它，删除旧列，然后用旧列重命名新列）

```
ALTER TABLE dbo.Garantor
ADD newBirthDate int NOT NULL DEFAULT 0 -- NULL and DEFAULT as required
GO

UPDATE dbo.Garantor
SET newBirthDate = CAST([Birth Date] AS int) -- or CONVERT function, it will do the same
GO

ALTER TABLE dbo.Garantor
DROP COLUMN [Birth Date]
GO

SP_RENAME 'dbo.Garantor.newBirthDate', 'dbo.Garantor.[Birth Date]'
GO 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2021-11-18T10:07:01.163

转换对我不起作用。演员也不起作用。要更改列的数据类型，下面是有效的代码。将“date”类型更改为“int”类型，只保留年份。

这对我有用：

```
ALTER TABLE [dbo].[Garantor]
ADD [newBirthDate] int NOT NULL DEFAULT 0
GO

UPDATE [dbo].[Garantor]
SET [newBirthDate] = DATEPART(yyyy,[Birth Date])
GO

ALTER TABLE [dbo].[Garantor]
DROP COLUMN [Birth Date]
GO

SP_RENAME 'dbo.Garantor.newBirthDate', 'dbo.Garantor.[Birth Date]'
GO 
```

另一种解决方案是：

```
= YEAR([Birth Date]) 
```

如果您的表中有索引：

```
ALTER TABLE [dbo].[Garantor]
ADD [newBirthDate] int NOT NULL DEFAULT 0
GO

UPDATE [dbo].[Garantor]
SET [newBirthDate] = DATEPART(yyyy,[Birth Date])
GO

ALTER TABLE [dbo].[Garantor] DROP CONSTRAINT [UQ__Garantor__1C123681D17FE31B] -- [UQ__Garantor__1C123681D17FE31B] change with your
GO

ALTER TABLE [dbo].[Garantor]
DROP COLUMN [Birth Date]
GO

SP_RENAME 'dbo.Garantor.newBirthDate', 'dbo.Garantor.[Birth Date]'
GO

ALTER TABLE [dbo].[Garantor] ADD UNIQUE NONCLUSTERED 
(
    [Birth Date] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, SORT_IN_TEMPDB = OFF, IGNORE_DUP_KEY = OFF, ONLINE = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON, OPTIMIZE_FOR_SEQUENTIAL_KEY = OFF) ON [PRIMARY]
GO 
```

# ember.js - 如果视图是孩子，它不能正常工作

> ID：12316736
> 
> 赞同：1
> 
> 时间：2012-09-07T10:57:43.747
> 
> 标签：ember.js

非常简单的模板

```
<script type="text/x-handlebars" data-template-name="win-edit-foot">
    {{name}}
</script> 
```

容器视图类：

```
App.WinElementEditView = Em.ContainerView.extend({
    classNames:['edit'],
    childViews:['foot'],
    foot:Em.View.extend({
        templateName:'win-edit-foot',
        name:'some name'
    })
}); 
```

它不起作用，模板中的 {{name}} 替换为“”（无）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T11:42:24.137

问题来自您的模板。如果你想要`name`视图的属性，你必须替换`{{name}}`为`{{view.name}}`，根据[视图上下文变化](https://gist.github.com/2494968)。

我建议你看一看[理解 Ember.js 视图层指南](http://emberjs.com/guides/view_layer/)。

这是不起作用的 JSFiddle： [view`{{name}}`和[与`{{view.name}}`](http://jsfiddle.net/xj8nK/).

# android - 浏览器第二页未在 Android ICS 中打开

> ID：12316738
> 
> 赞同：1
> 
> 时间：2012-09-07T10:57:46.453
> 
> 标签：android, browser

在带有 HSPA 调制解调器（USB 接口）的自定义设备中，我无法在 Android ICS 4.0.3、内核 3.0.8 中浏览多个页面

我能够在 netcfg 中使用 IP 获得 PPP 接口

ping: sendmsg: 没有可用的缓冲区空间

并且浏览器也不会加载超过一页。对于第二页，它一直在加载，一段时间后它报告网络已经发生

在 ppp_async.c OBUFFSIZE 是 4096 我也尝试了 10240 但它没有用

我试过 echo 83886080 > /proc/sys/net/core/wmem_max 然后也是同样的问题。

init.rc 中的 tcp 缓冲区大小为

```
setprop net.tcp.buffersize.default 4096,87380,110208,4096,16384,110208
setprop net.tcp.buffersize.wifi    524288,1048576,2097152,262144,524288,1048576
setprop net.tcp.buffersize.lte     524288,1048576,2097152,262144,524288,1048576
setprop net.tcp.buffersize.umts    4094,87380,110208,4096,16384,110208
setprop net.tcp.buffersize.hspa    4094,87380,262144,4096,16384,262144
setprop net.tcp.buffersize.edge    4093,26280,35040,4096,16384,35040
setprop net.tcp.buffersize.gprs    4092,8760,11680,4096,8760,11680 
```

有没有人遇到过这个问题有什么建议来调试这个

# forms - chrome打开表单在新标签中提交没有数据

> ID：12316741
> 
> 赞同：0
> 
> 时间：2012-09-07T10:57:56.550
> 
> 标签：forms, google-chrome, tabs, submit

我刚刚注意到 Chrome 的一些奇怪行为。在我的网站上，有一个页面有一个表单，该表单向网站的安全部分发送 POST。但是，如果我使用 ctrl+左键单击（在提交按钮上）在 Chrome 中提交表单，它会打开一个新窗口（如预期的那样），但请求是 GET 请求而不是 GET 请求，并且没有发送表单数据。我试图通过只用一个简单的表格制作一个测试页面来排除所有其他事情：

```
<form method="post" action='https://secure.mysite.com/formtest2.php' target='_top'>
  <input type='text' name='element' value='blabla' />
  <input type='submit' value='submit' />
</form> 
```

和一个接收页面：

```
<?php
 print "POST:";
 print_r($_POST);
 print "<br/>GET:";
 print_r($_GET);
?> 
```

当我单击提交按钮（在 Chrome 中）时，一切都按预期工作，我得到：

POST:Array ( [my-element] => blabla )

获取：数组（）

但是，当我使用 ctrl+click 时，我会在新选项卡中看到：

POST:数组 ( )

获取：数组（）

所以我的问题是，这是正常行为还是 Chrome 中的错误（我的版本是 21.0.1180.83 m）？并且无论如何都可以防止这种情况发生，所以我不必向用户显示某种错误页面，将他重定向回来并要求不要在新选项卡中打开表单提交（丑陋！）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T11:01:35.233

This looks like sort of a bug: [http://code.google.com/p/chromium/issues/detail?id=77565](http://code.google.com/p/chromium/issues/detail?id=77565)

# iphone - XCode iPhone Simulator 升级后不显示用户位置

> ID：12316743
> 
> 赞同：0
> 
> 时间：2012-09-07T10:58:17.070
> 
> 标签：iphone, ios, location, mapkit, xcode4.4

我正在使用 XCode 4.3 并且有一个工作代码。但是在升级到 4.4 之后我遇到了一个问题。问题是当前用户位置没有显示在 iphone 模拟器上。我是说蓝点。而且我的图钉也消失了，地图也没有聚焦到我想要的区域。你对这个问题有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-07T11:00:26.203

你试过这个吗

```
self.mapView.showsUserLocation=YES; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T12:09:05.600

GPS 服务在模拟器中无法正常工作。Apple 在模拟器 5 中支持它，但在之前的版本中不支持。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-06-29T01:14:39.487

确保您已选中“编辑方案...>运行>选项”“允许位置模拟”。

我一开始也有这个问题。针在那里，但没有显示地图，只有一个网格。

我玩了地图来移动它，它开始工作了。

我有 xcode 7.3.1

# javascript - 从backbonejs和nodejs调用路由器

> ID：12316746
> 
> 赞同：0
> 
> 时间：2012-09-07T10:58:20.810
> 
> 标签：javascript, node.js, backbone.js, pushstate

我有一个网络应用程序。基本上它是一个单页应用程序。初始页面是一个名为 index.html 的平面 html 文件，其中包含一个指向 require.js 的脚本声明。从那里我使用backbonejs来处理客户端逻辑。index.html 由 nodejs 提供服务。

我的问题是，页面中的任何操作，例如，我点击一个链接，都会调用骨干路由器。这是我希望成为单页应用程序的行为。

例如：*www.testserver.com*然后我点击一个链接，该链接显示一个用于注册*www.testserver.com/register*的模式屏幕，通过主干路由器，**推送状态为 on**

当我没有访问应用程序中的某个链接，而是直接在浏览器中打开 URL 时，问题就出现了。例如，我在浏览器中粘贴*www.testserver.com/register 。*然后将请求发送到我的节点路由器。我假设这是正确的行为，因为该页面还不存在，这意味着骨干路由器也不存在。

我想知道，解决这个问题的正确方法是什么。当我访问此链接时，我该怎么办？我如何将正确的行为传递回我的主干应用程序。

非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T14:41:50.097

服务器应始终返回 index.html 页面。当您在 Backbone 中启动路由器时，路由器会处理导航并调用您为实际路由定义的函数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T21:44:05.460

假设您不需要做任何 SEO 类型的东西，以便每个唯一的 URL 加载自己的元数据，只需始终提供与声明相同的 index.html。但是，如果您想根据 URL 获得不同的静态头部内容，您应该根据路径在节点内执行此操作（例如，为您滑入稍微更动态的初始视图模板的每个路由保留一个元数据数组，基于在您现有的平面 index.html 上）

# android - 使用 setFilters 时未正确应用 EditText maxLength 属性

> ID：12316752
> 
> 赞同：5
> 
> 时间：2012-09-07T10:58:56.087
> 
> 标签：android, android-edittext, input-filter

当我`setFilter`在 an 上使用方法`EditText`来处理特殊字符时，`maxLength`属性没有按预期工作。我的代码如下。

```
editName = (EditText)findViewById(R.id.rna_editTextName);
        editName.setFilters(new InputFilter[]{getFilteredChars()}); 

        //Below method returns filtered characters.
       public InputFilter getFilteredChars() 
       {
           InputFilter filter = new InputFilter() 
            { 
                 @Override
                    public CharSequence filter(CharSequence source, int start, int end,                                Spanned dest, int dstart, int dend) {
                        if (end > start) {

                            char[] acceptedChars = new char[]{'a', 'b', 'c', 'd', 'e', 'f', 'g', 'h', 'i', 'j', 'k', 'l', 'm', 'n', 'o', 'p', 'q', 'r', 's', 't', 'u', 'v', 'w', 'x', 'y', 'z', 
                                    'A', 'B', 'C', 'D', 'E', 'F', 'G', 'H', 'I', 'J', 'K', 'L', 'M', 'N', 'O', 'P', 'Q', 'R', 'S', 'T', 'U', 'V', 'W', 'X', 'Y', 'Z', ' ' ,'.', '\''};

                            for (int index = start; index < end; index++) {                                         
                                if (!new String(acceptedChars).contains(String.valueOf(source.charAt(index)))) { 
                                    return ""; 
                                }               
                            }
                        }
                        return null;
                } 
        };
        return filter;
       } 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-09-21T15:59:09.700

这是因为该`maxLength`属性`InputFilter`在您的`EditText`. 通过调用`EditText.setFilters(new InputFilter[] {<YOUR_FILTER>})`，您将覆盖所有现有的 InputFilters，包括`maxLength`.

要解决此问题，请复制返回的数组`EditText.getFilters()`并将您自己的数组添加到其中：

```
InputFilter[] editFilters = edit.getFilters();
InputFilter[] newFilters = new InputFilter[editFilters.length + 1];
System.arraycopy(editFilters, 0, newFilters, 0, editFilters.length);
newFilters[editFilters.length] = <YOUR_FILTER>;
edit.setFilters(newFilters); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-07-07T13:54:50.153

试试这个代码。基于@Jozua 的回答

```
 /**
 * Adds filter to EditText preserving other filters.
 * 
 * @param editText
 * @param filter
 */
public static void setFilter(EditText editText, InputFilter filter) {
InputFilter curFilters[] = editText.getFilters();

if (curFilters != null) {
    InputFilter newFilters[] = new InputFilter[curFilters.length + 1];
    System.arraycopy(curFilters, 0, newFilters, 0, curFilters.length);
    newFilters[curFilters.length] = filter;
    editText.setFilters(newFilters);
} else {
    editText.setFilters(new InputFilter[] { filter });
}
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-02-06T09:22:30.337

您可以在数组中添加多个过滤器。就像您的 editText 中的最大字符限制和特殊字符过滤器一样。

editText.setFilters(new InputFilter[]{new InputFilter.LengthFilter(MAX_CHARACTER_LIMIT),SpecialCharacterInputFilter});

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-06-25T08:54:08.633

> 在以编程方式设置edittext的maxlenth属性时

请显示使用代码。

Wild Guess：问题可能是您在布局中设置了 maxLength。通过调用 setFilters() 此行为被您的过滤器替换。

解决方案：使用多个过滤器或在 getFilteredChars() 过滤器中实现 maxLenght 行为。

编辑：你可能想看看[http://developer.android.com/reference/android/text/InputFilter.LengthFilter.html](http://developer.android.com/reference/android/text/InputFilter.LengthFilter.html)

对于您在评论中的问题，来自文档：

```
when the buffer is going to replace the range dstart … dend of dest with the new text from the range start … end of source 
```

所以，类似于（伪代码 liveCoding）：

```
dest.lenght - (dend-dstart) + (end-start)  = new legnth 
```

# xml - awk one liner：替换 xml 标签

> ID：12316757
> 
> 赞同：0
> 
> 时间：2012-09-07T10:59:11.633
> 
> 标签：xml, replace, awk

我有一个包含一些属性的 xml 文件，例如

```
<string name="my/ attribute" optional="true">
  <description>some text</description>
  <value>some text again</value>
</string> 
```

我想通过字符串“none”更改值（不一定必须是“一些文本”）。我在命令行上尝试了以下操作：

```
 awk '/<string name="my\/ attribute" optional="true">/,/<\/string>/ {sub(/<value>(.*)<\/value>/,"<value>none</value>")}1' my.xml > my_new.xml 
```

这在某种程度上可以正常工作，但结果如下：

```
<string name="my/ attribute" optional="true">
  <description>some text</description>
  <value>some text again<\/value>
</string> 
```

为什么标签中的 /（斜杠）被转义了？

非常感谢你的帮助，

丹妮拉。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T11:37:28.190

假设理查德指出的问题中的不一致是偶然的：

```
$ cat input.xml
<string name="my/ attribute" optional="true">
  <description>some text</description>
  <value>some text again</value>
</string>

$ awk '/<string/{doit=1} doit{sub(/<value>[^<]+<\/value>/, "<value>none</value>"); print} /<\/string>/{doit=0}' input.xml 
<string name="my/ attribute" optional="true">
  <description>some text</description>
  <value>none</value>
</string>

$ 
```

这比您的脚本安全一点，因为它将处理缩小的 XML（即删除空格，全部在 e 行上），但它不会处理`<value>`拆分为多行的内容。

我建议查看[Perl 的 XML::Simple](http://www.techrepublic.com/article/parsing-xml-documents-with-perls-xmlsimple/5363190)或[PHP 的 SimpleXML](http://php.net/manual/en/book.simplexml.php)。它不会是单行的，但它会更可靠地工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T14:30:50.843

不要使用标准文本工具来处理 XML - 始终使用 XML 工具。否则，您（或您的客户）最终将成为在此列表上发布问题的数百人中的一员，他们询问如何处理格式不正确的 XML 的事实。手动完成它太难了，以适应所有可能出现的边缘情况。例如，您知道开始和结束标签中允许空格的规则吗？从您的示例代码来看，您似乎没有。

# android - 无法理解linux命令的输出

> ID：12316761
> 
> 赞同：-1
> 
> 时间：2012-09-07T10:59:19.070
> 
> 标签：android, linux, linux-kernel, ls, proc

我是 linux 的新手，实际上我正在使用 android ndk（也是新手）我想知道是否有人可以解释以下命令“ls -l /proc/ */fd/”和“ls -l /data/”的含义数据” 。当我运行以下命令“ls -l /proc/* /fd/”时，我得到以下输出：-

```
lr-x------ root     root              2012-09-07 15:56 4 -> /dev/__properties__ (deleted)
lrwx------ root     root              2012-09-07 15:56 5 -> socket:[257]
lrwx------ root     root              2012-09-07 15:56 6 -> socket:[259]
lrwx------ root     root              2012-09-07 15:56 7 -> socket:[260]
lrwx------ app_4    app_4             2012-09-07 15:56 0 -> /dev/null
lrwx------ app_4    app_4             2012-09-07 15:56 1 -> /dev/null
lrwx------ app_4    app_4             2012-09-07 15:56 2 -> /dev/null
l-wx------ app_4    app_4             2012-09-07 15:56 3 -> /dev/log/main
l-wx------ app_4    app_4             2012-09-07 15:56 4 -> /dev/log/radio
l-wx------ app_4    app_4             2012-09-07 15:56 5 -> /dev/log/events
lr-x------ app_4    app_4             2012-09-07 15:56 6 -> /system/framework/core.jar
lr-x------ app_4    app_4             2012-09-07 15:56 7 -> /system/framework/bouncycastle.jar
lr-x------ app_4    app_4             2012-09-07 15:56 8 -> /dev/__properties__ (deleted)
lrwx------ app_4    app_4             2012-09-07 15:56 9 -> /dev/binder
lr-x------ app_4    app_4             2012-09-07 15:56 10 -> /system/framework/ext.jar
lr-x------ app_4    app_4             2012-09-07 15:56 11 -> /system/framework/framework.jar
lr-x------ app_4    app_4             2012-09-07 15:56 12 -> /system/framework/android.policy.jar
lr-x------ app_4    app_4             2012-09-07 15:56 13 -> /system/framework/services.jar
lr-x------ app_4    app_4             2012-09-07 15:56 14 -> /system/framework/core-junit.jar
lr-x------ app_4    app_4             2012-09-07 15:56 15 -> /system/framework/framework.jar
lr-x------ app_4    app_4             2012-09-07 15:56 16 -> /system/fonts/DroidSans.ttf
lr-x------ app_4    app_4             2012-09-07 15:56 17 -> /system/framework/core.jar
lr-x------ app_4    app_4             2012-09-07 15:56 18 -> /dev/urandom
lr-x------ app_4    app_4             2012-09-07 15:56 19 -> /system/framework/framework-res.apk
l-wx------ app_4    app_4             2012-09-07 15:56 20 -> /dev/cpuctl/tasks
lrwx------ app_4    app_4             2012-09-07 15:56 21 -> socket:[616]
lr-x------ app_4    app_4             2012-09-07 15:56 22 -> pipe:[617]
l-wx------ app_4    app_4             2012-09-07 15:56 23 -> pipe:[617]
lrwx------ app_4    app_4             2012-09-07 15:56 24 -> socket:[620]
l-wx------ app_4    app_4             2012-09-07 15:56 25 -> /dev/cpuctl/bg_non_interactive/tasks
lr-x------ app_4    app_4             2012-09-07 15:56 26 -> pipe:[632]
l-wx------ app_4    app_4             2012-09-07 15:56 27 -> pipe:[632]
lrwx------ app_4    app_4             2012-09-07 15:56 28 -> anon_inode:[eventpoll]
lr-x------ app_4    app_4             2012-09-07 15:56 29 -> /system/app/OpenWnn.apk
lr-x------ app_4    app_4             2012-09-07 15:56 30 -> /system/app/OpenWnn.apk
lrwx------ app_4    app_4             2012-09-07 15:56 31 -> /dev/ashmem
lrwx------ app_4    app_4             2012-09-07 15:56 32 -> /dev/ashmem
lr-x------ app_4    app_4             2012-09-07 15:56 33 -> /system/app/OpenWnn.apk
lrwx------ radio    radio             2012-09-07 15:56 0 -> /dev/null
lrwx------ radio    radio             2012-09-07 15:56 1 -> /dev/null
lrwx------ radio    radio             2012-09-07 15:56 2 -> /dev/null
l-wx------ radio    radio             2012-09-07 15:56 3 -> /dev/log/main
l-wx------ radio    radio             2012-09-07 15:56 4 -> /dev/log/radio
l-wx------ radio    radio             2012-09-07 15:56 5 -> /dev/log/events
lr-x------ radio    radio             2012-09-07 15:56 6 -> /system/framework/core.jar
lr-x------ radio    radio             2012-09-07 15:56 7 -> /system/framework/bouncycastle.jar
lr-x------ radio    radio             2012-09-07 15:56 8 -> /dev/__properties__ (deleted)
lrwx------ radio    radio             2012-09-07 15:56 9 -> /dev/binder
lr-x------ radio    radio             2012-09-07 15:56 10 -> /system/framework/ext.jar
lr-x------ radio    radio             2012-09-07 15:56 11 -> /system/framework/framework.jar
lr-x------ radio    radio             2012-09-07 15:56 12 -> /system/framework/android.policy.jar
lr-x------ radio    radio             2012-09-07 15:56 13 -> /system/framework/services.jar
lr-x------ radio    radio             2012-09-07 15:56 14 -> /system/framework/core-junit.jar
lr-x------ radio    radio             2012-09-07 15:56 15 -> /system/framework/framework.jar
lr-x------ radio    radio             2012-09-07 15:56 16 -> /system/fonts/DroidSans.ttf
lr-x------ radio    radio             2012-09-07 15:56 17 -> /system/framework/core.jar
lr-x------ radio    radio             2012-09-07 15:56 18 -> /dev/urandom
lr-x------ radio    radio             2012-09-07 15:56 19 -> /system/framework/framework-res.apk
l-wx------ radio    radio             2012-09-07 15:56 20 -> /dev/cpuctl/tasks
lrwx------ radio    radio             2012-09-07 15:56 21 -> socket:[621]
lr-x------ radio    radio             2012-09-07 15:56 22 -> pipe:[622]
l-wx------ radio    radio             2012-09-07 15:56 23 -> pipe:[622]
lrwx------ radio    radio             2012-09-07 15:56 24 -> socket:[625]
l-wx------ radio    radio             2012-09-07 15:56 25 -> /dev/cpuctl/bg_non_interactive/tasks
lr-x------ radio    radio             2012-09-07 15:56 26 -> pipe:[638]
l-wx------ radio    radio             2012-09-07 15:56 27 -> pipe:[638]
lrwx------ radio    radio             2012-09-07 15:56 28 -> anon_inode:[eventpoll]
lr-x------ radio    radio             2012-09-07 15:56 29 -> /system/app/Phone.apk
lr-x------ radio    radio             2012-09-07 15:56 30 -> /system/app/Phone.apk
lrwx------ radio    radio             2012-09-07 15:56 31 -> /dev/ashmem
lrwx------ radio    radio             2012-09-07 15:56 32 -> /dev/ashmem
lr-x------ radio    radio             2012-09-07 15:56 33 -> /system/app/Phone.apk
lr-x------ radio    radio             2012-09-07 15:56 34 -> /system/app/TelephonyProvider.apk
lr-x------ radio    radio             2012-09-07 15:56 35 -> /system/app/TelephonyProvider.apk
lr-x------ radio    radio             2012-09-07 15:56 36 -> /system/app/TelephonyProvider.apk
lrwx------ radio    radio             2012-09-07 15:56 37 -> /data/data/com.android.providers.telephony/databases/telephony.db
lr-x------ radio    radio             2012-09-07 15:56 38 -> pipe:[730]
l-wx------ radio    radio             2012-09-07 15:56 39 -> pipe:[730]
lrwx------ radio    radio             2012-09-07 15:56 40 -> anon_inode:[eventpoll]
lrwx------ radio    radio             2012-09-07 15:56 41 -> socket:[731]
lr-x------ radio    radio             2012-09-07 15:56 42 -> pipe:[750]
l-wx------ radio    radio             2012-09-07 15:56 43 -> pipe:[750]
lrwx------ radio    radio             2012-09-07 15:56 44 -> anon_inode:[eventpoll]
lr-x------ radio    radio             2012-09-07 15:56 45 -> pipe:[753]
l-wx------ radio    radio             2012-09-07 15:56 46 -> pipe:[753]
lrwx------ radio    radio             2012-09-07 15:56 47 -> anon_inode:[eventpoll]
lr-x------ radio    radio             2012-09-07 15:56 48 -> pipe:[754]
l-wx------ radio    radio             2012-09-07 15:56 49 -> pipe:[754]
lrwx------ radio    radio             2012-09-07 15:56 50 -> anon_inode:[eventpoll]
lr-x------ radio    radio             2012-09-07 15:56 51 -> pipe:[756]
l-wx------ radio    radio             2012-09-07 15:56 52 -> pipe:[756]
lrwx------ radio    radio             2012-09-07 15:56 53 -> anon_inode:[eventpoll]
lr-x------ radio    radio             2012-09-07 15:56 54 -> pipe:[762] 
```

当我运行“ls -l /data/data”命令时，我得到以下输出：-

```
drwxr-x--x system   system            2012-08-10 17:07 com.android.providers.set
tings
drwxr-x--x system   system            2012-08-10 17:07 com.android.settings
drwxr-x--x app_13   app_13            2012-08-10 17:07 com.android.launcher
drwxr-x--x app_6    app_6             2012-08-10 17:07 com.android.providers.con
tacts
drwxr-x--x system   system            2012-08-10 17:07 com.android.providers.sub
scribedfeeds
drwxr-x--x app_0    app_0             2012-08-10 17:07 com.android.providers.drm

drwxr-x--x app_14   app_14            2012-08-10 17:07 com.android.customlocale
drwxr-x--x app_16   app_16            2012-08-10 17:07 com.android.spare_parts
drwxr-x--x app_17   app_17            2012-08-10 17:07 com.android.speechrecorde
r
drwxr-x--x app_18   app_18            2012-08-10 17:07 com.android.term
drwxr-x--x app_0    app_0             2012-08-10 17:08 com.android.providers.dow
nloads
drwxr-x--x app_19   app_19            2012-08-10 17:08 com.android.deskclock
drwxr-x--x app_28   app_28            2012-08-10 17:08 com.android.email
drwxr-x--x app_0    app_0             2012-08-10 17:08 com.android.providers.med
ia
drwxr-x--x app_4    app_4             2012-08-10 19:57 jp.co.omronsoft.openwnn
drwxr-x--x app_6    app_6             2012-08-13 14:54 com.android.providers.use
rdictionary
drwxr-x--x radio    radio             2012-08-10 17:07 com.android.providers.tel
ephony
drwxr-x--x app_20   app_20            2012-08-28 19:29 com.android.browser
drwxr-x--x app_21   app_21            2012-08-10 17:07 com.android.packageinstal
ler
drwxr-x--x app_22   app_22            2012-08-10 17:07 com.android.certinstaller

drwxr-x--x app_23   app_23            2012-08-10 17:07 com.android.netspeed
drwxr-x--x system   system            2012-08-10 17:07 com.android.systemui
drwxr-x--x app_24   app_24            2012-08-10 17:07 com.android.protips
drwxr-x--x app_25   app_25            2012-08-10 17:07 com.android.camera
drwxr-x--x app_26   app_26            2012-08-10 17:07 com.android.sdksetup
drwxr-x--x app_27   app_27            2012-08-10 17:07 com.android.calculator2
drwxr-x--x app_29   app_29            2012-08-10 17:07 com.android.development
drwxr-x--x app_1    app_1             2012-08-10 17:07 com.android.htmlviewer
drwxr-x--x app_3    app_3             2012-08-10 17:07 com.android.defcontainer
drwxr-x--x system   system            2012-08-10 17:07 com.android.server.vpn
drwxr-x--x app_5    app_5             2012-08-10 17:07 com.android.music
drwxr-x--x app_6    app_6             2012-08-10 17:07 com.android.providers.app
lications
drwxr-x--x app_7    app_7             2012-08-10 17:07 com.android.wallpaper.liv
epicker
drwxr-x--x app_8    app_8             2012-08-10 17:07 com.android.fallback
drwxr-x--x app_9    app_9             2012-08-10 17:07 com.svox.pico
drwxr-x--x app_10   app_10            2012-08-10 17:07 com.android.inputmethod.l
atin
drwxr-x--x app_11   app_11            2012-08-10 17:07 android.tts
drwxr-x--x app_12   app_12            2012-08-10 17:07 com.android.soundrecorder

drwxr-x--x app_6    app_6             2012-08-10 17:07 com.android.inputmethod.p
inyin
drwxr-x--x app_0    app_0             2012-08-10 17:07 com.android.providers.dow
nloads.ui
drwxr-x--x app_0    app_0             2012-08-10 17:07 com.android.gallery
drwxr-x--x app_15   app_15            2012-08-10 17:08 com.android.mms
drwxr-x--x app_34   app_34            2012-09-07 15:55 com.hawkagentmain
drwxr-x--x app_35   app_35            2012-09-07 15:55 com.SampleDumpsys.Activit
y
drwxr-x--x app_30   app_30            2012-09-07 15:55 com.android.gesture.build
er
drwxr-x--x app_31   app_31            2012-09-07 15:55 com.example.android.softk
eyboard
drwxr-x--x app_32   app_32            2012-09-07 15:55 com.example.android.livec
ubes
drwxr-x--x app_33   app_33            2012-09-07 15:55 com.example.android.apis
drwxr-x--x app_6    app_6             2012-09-06 20:47 com.android.contacts
drwxr-x--x app_2    app_2             2012-09-06 20:47 com.android.quicksearchbo
x
drwxr-x--x radio    radio             2012-09-06 20:47 com.android.phone 
```

谁能说出这些输出说明了什么？我会非常感谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T11:05:47.400

`ls -s /data/data`显示 /data/data 目录中的目录和文件，其中包含所有者名称（例如，app_30）、组名称（app_30，所有者名称和组名称相等）和分配给文件夹的权限（drwxr-x--x）。此目录包含已安装的 android 应用程序的私有数据。

`/proc/<proc_id>/fd`显示 PID 等于 proc_id 的进程的打开描述符。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-07T11:10:17.487

“ls” 表示“列出活动目录中的文件”-l 表示“向我显示每个文件的更多详细信息（权限、所有者、组、创建日期、文件名）放入“/proc/fd/”或“ /data/data”后面的意思是：显示这个目录的内容而不是活动目录

这样的条目：“com.android.deskclock”表示目录中有一个具有该名称的文件而这个“18 - > /dev/urandom”表示该目录中有一个名为“18”的链接，它显示在文件“/dev/urandom”

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-07T11:12:22.810

-s 开关打印列出的每个文件的分配大小。

您还可以在线查看手册页：http: [//man.he.net/](http://man.he.net/)

# python - 使用Python解码未知编码的繁体中文字符串

> ID：12316766
> 
> 赞同：2
> 
> 时间：2012-09-07T10:59:39.043
> 
> 标签：python, text-manipulation

嗨，我有一个繁体中文网站，当我查看网站统计信息时，它告诉我该网站的搜索词对`å%8f°å%8d%97 è¦ªå­%90é¤%90å»³`我来说显然没有意义。我的问题是这种编码叫什么？有没有办法使用 Python 来解码这个字符串。谢谢你。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-07T11:11:37.713

它被称为 mutt 编码；底层字节已超出其原始含义，它们不再是真正的编码。

它曾经是 URL 引用的 UTF-8，但现在被解释为 latin-1 而没有取消引用那些 URL 转义。我能够通过这样解释它来解决这个问题：

```
>>> from urllib2 import unquote
>>> bytesquoted = u'å%8f°å%8d%97 è¦ªå­%90é¤%90å»³'.encode('latin1')
>>> unquoted = unquote(bytesquoted)
>>> print unquoted.decode('utf8')
台南 親子餐廳 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-01-24T20:34:13.760

您可以使用[chardet](https://github.com/chardet/chardet)。使用以下命令安装库：

```
pip install chardet
# or for python3
pip3 install chardet 
```

该库包含一个 cli 实用程序`chardetect`（或`chardetect3`相应的），它采用文件的路径。

一旦你知道了编码，你就可以在 python 中使用它，例如：

```
codecs.open('myfile.txt', 'r', 'GB2312') 
```

或从外壳：

```
iconv -f GB2312 -t UTF-8 myfile.txt -o decoded.txt 
```

^(如果您需要更高的性能，那么还有**[cchardet](https://github.com/PyYoshi/cChardet)** — 一个更快的 C 优化版本的`chardet`.)

# java - JAVA ASM：为什么修改会导致嵌套异常？

> ID：12316767
> 
> 赞同：0
> 
> 时间：2012-09-07T10:59:41.197
> 
> 标签：java, exception, java-bytecode-asm

在我的项目中，我`ASM`用来更改方法签名。我选择使用 RMI 的方法并以这种方式更改它们：

从：

```
String f(int i, String s) {
    ...
} 
```

至

```
String f(int i, String s, ThreadId t) {
    log(t)
    ...
    log(t)
} 
```

并从

```
a.f(i,s); 
```

至

```
a.f(i, s, t); 
```

所以定义和调用都改变了。

令人惊讶的是，它在某些情况下有效，并`ThreadId`通过控制流传递。

但是一种方法导致：

```
java.rmi.ServerError: Error occurred in server thread; nested exception is:
            java.lang.AbstractMethodError: some.package.SomeClass.method(I;String;ThreadId;)String; 
```

我不知道为什么会发生此错误。你能解释一下吗？或者也许给我一些建议我应该如何解决它？任何帮助都会很棒！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T11:14:39.573

方法是抽象的。您是否修改了抽象方法的方法签名（可以），然后尝试更改实现（它没有）？只需检查它是否是抽象的并跳过任何代码修改。

# c++ - 将空指针赋予 snprintf 时的预期行为

> ID：12316768
> 
> 赞同：3
> 
> 时间：2012-09-07T10:59:44.463
> 
> 标签：c++, c, pointers, printf

此代码片段的预期行为是什么？

```
char * aNullPointer = 0;
snprintf (res, 128, "Testing %s null pointer",aNullPointer); 
```

请注意，我故意试图让它取消引用我的空指针`aNullPointer`。

行为 1)`res`指向一个字符串“Testing (null) null pointer”

行为 2) 段错误

似乎我会根据我的平台获得不同的行为。一些`snprintf`实现执行完整性检查，而其他实现不执行。

最常见的行为是什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-07T11:01:03.970

It's undefined behavior - there's nothing to expect. The fact that some implementations check for `NULL` and replace it with "nil" or "null" is just a nicety, you can't rely on it at all.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-07T11:01:37.560

Undefined behaviour. Don't do it.

glibc will use `(null)` when passing a NULL pointer to `%s` though, but don't rely on this feature!

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-07T11:02:40.360

从某种意义上说，没有预期的行为。事实上，标准中明确指出，该行为在相当广泛的意义上是未定义的：它可以工作，它可以发生段错误，它可以格式化你的硬盘等等。你应该`NULL`自己检查指针。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-08-25T13:11:05.317

此处对其他答案的一个警告：*如果*第二个参数（指定要写入的字节数）为零，*则*允许将空指针作为第一个参数传递。`snprintf`

 *从 C11 标准（强调我的）：

> 该`snprintf`函数等价于`fprintf`，除了输出写入数组（由参数指定`s`）而不是流。**如果`n`为零，则不写入任何内容，并且 s 可能是空指针。**

这对于首先找出要写入多少字节`snprintf`以便分配该大小的缓冲区以通过第二次调用写入，这可能很有用`snprintf`，如[https://stackoverflow.com/a/10388547/1709587](https://stackoverflow.com/a/10388547/1709587)所示。

但是，如果`n`为非零，则行为未定义。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-07T11:06:44.607

如果我们考虑[Opengroup 规范](http://pubs.opengroup.org/onlinepubs/009695399/functions/printf.html)，似乎对于这种情况没有定义的行为：

> 参数应为指向 char 数组的指针。数组中的字节应写入（但不包括）任何终止的空字节。如果指定了精度，则写入的字节数不得超过该数量。如果精度未指定或大于数组的大小，应用程序应确保数组包含空字节。*

# lua - 用相等运算符比较 lua 中的数字有多安全？

> ID：12316769
> 
> 赞同：3
> 
> 时间：2012-09-07T10:59:43.817
> 
> 标签：lua, numbers, double, equality

在我的引擎中，我有一个用于编写脚本的 Lua VM。在脚本中，我写了如下内容：

```
stage = stage + 1
if (stage == 5) then ... end 
```

和

```
objnum = tonumber("5")
if (stage == objnum) 
```

根据 Lua 来源，Lua 在比较双精度数时使用了一个简单的相等运算符，它使用的内部数字类型。

我知道处理浮点值时的精度问题，所以我想知道比较是否安全，即使用Lua默认的'=='操作简单地比较这些数字会有什么问题吗？如果是这样，我是否可以采取任何对策来确保 1+2 始终比较等于 3？将值转换为字符串会起作用吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-07T15:12:44.317

如果您只关心某些情况下的相等性，则最好转换为字符串然后比较结果*。*例如：

```
> print(21, 0.07*300, 21 == 0.07*300, tostring(21) == tostring(0.07*300))
21      21      false   true 
```

当我给我的学生分配这些数字（0.07 和 300）并要求他们实施一个单元测试时，我学到了这个艰难的方法，然后抱怨 21 不等于 21 惨遭失败（它是在比较实际数字，但显示字符串化的值）。这是我们讨论比较浮点值的一个很好的理由。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-08T04:23:01.927

> 我可以用来确保 1+2 总是比较等于 3？

[你不用担心。](http://lua-users.org/wiki/FloatingPoint)Lua 中的数字类型是`double`，它可以容纳比 a 更多的整数`long int`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-07T11:16:18.633

在某些情况下，双打的比较和基本操作是安全的。特别是如果数字及其结果可以精确表达 - 包括所有低值整数。

所以`2+1 == 3`双打就好了。

`pow`注意：我相信某些数学函数（如and ）甚至有一些保证`sqrt`，如果您的编译器/库尊重这些，那么`sqrt(4.0)==2.0`或`4.0 == pow(2.0,2.0)`将可靠地为真。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-07T14:08:03.663

默认情况下，Lua 是用 c++ 浮点数编译的，在幕后数字比较归结为 c/c++ 中的浮点比较，这确实是有问题的，并且在几个线程中讨论过，例如[most-effective-way-for-float-and-double -比较](https://stackoverflow.com/questions/17333/most-effective-way-for-float-and-double-comparison)。

Lua 通过将所有数字（包括 c++ 整数）转换为浮点数，只会使情况变得更糟。所以你需要记住它。

# iphone - 如何在 iPhone 应用中制作 iAd？

> ID：12316771
> 
> 赞同：-1
> 
> 时间：2012-09-07T11:00:04.387
> 
> 标签：iphone, iad, adbannerview

目前我正在使用 iAd iPhone 应用程序。使用`ADBannerView`它，我有一个在 iPhone 应用程序中显示广告的 URL，但我不知道如何集成它。

我试过这个：

```
IBOutlet ADBannerView *adView;
adView.requiredContentSizeIdentifiers = [NSSet setWithObject:ADBannerContentSizeIdentifier320x50];
adView.requiredContentSizeIdentifiers = [NSSet setWithObjects:ADBannerContentSizeIdentifier320x50,ADBannerContentSizeIdentifier480x32,nil];
adView.delegate=self; 
```

然后我想在哪里插入 URL 以显示 iAd。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-07T11:14:14.423

苹果有 2 个示例代码，演示了在任何 iOS 应用程序中的 iAd 实现，你经历过这些..

[iAdSuite](https://developer.apple.com/library/ios/#samplecode/iAdSuite/Introduction/Intro.html#//apple_ref/doc/uid/DTS40010198)和[iAdInterstitialSuite](https://developer.apple.com/library/ios/#samplecode/iAdInterstitialSuite/Introduction/Intro.html#//apple_ref/doc/uid/DTS40010627)

下载这些示例应用程序，查看它们并尝试在您的应用程序中实现它。

# c++ - omp 并行块外的 omp 编译指示

> ID：12316776
> 
> 赞同：9
> 
> 时间：2012-09-07T11:00:29.747
> 
> 标签：c++, c, openmp

是否可以在 omp 并行块之外使用 omp pragma，如关键、单一、主或屏障？我有一个可以从 OMP 并行块调用的函数，也可以不调用。如果是，我需要将部分代码包含在关键部分中。换句话说，这段代码好吗？

```
void myfunc(){
    #pragma omp critical
    { /* code */ }
}

// not inside an omp parallel region
myfunc();

#pragma omp parallel
{
    // inside an omp parallel region
    myfunc();
} 
```

我在 OpenMP 文档中没有提到这一点。我猜代码的行为应该与 1 个线程执行完全一样——这就是它与 gcc 一起工作的方式。我想知道这种行为是可移植的，还是规范没有定义的东西，任何东西都是可以预期的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-27T19:24:24.987

根据[这份](https://computing.llnl.gov/tutorials/openMP/#BindingNesting)文件：

> DO/for、SECTIONS、SINGLE、MASTER 和 BARRIER 指令绑定到动态封闭的 PARALLEL（如果存在）。如果当前没有执行并行区域，则指令无效。

所以答案是这些编译指示可以在并行区域之外使用。虽然我仍然没有发现它在文档中明确写入。

# uitableview - UITableView reusable cell or not

> ID：12316778
> 
> 赞同：0
> 
> 时间：2012-09-07T11:00:36.703
> 
> 标签：uitableview, selected, didselectrowatindexpath

I'm developing an app that represents a huge amount of data using UITableView with a custom UITableViewCell.

When the tableView is set to editing mode, it supports multiple selection for further usage of the selected set of data.

Using `-tableView:didSelectRowAtIndexPath:` and `didDeselect` I'm changing the rows UIImageViews image to a little tick and storing the selection into an array. When selecting a cell it gets light blue background (iOS standard).

When I'm now scrolling down and up again, the cells background is still light blue but the image is reset to default and the cells `isSelected` property is `NO`. Selecting it again invokes the `-tableView:didSelectRowAtIndexPath:` method.

After a while debugging it turned out that the reusable identifier was wrong. But as I corrected it, scrolling down repeated the same 12 cells over and over again. And the `isSelected` property is still reset to `NO`.

How can I maintain selected rows while scrolling the tableView?! And: Why is the cell blue highlighted (or marked as selected) but the `isSelected` property gets reset to `No`?

Thanks for help, with kind regards, Julian

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T11:04:50.577

不要使用单元来保持持久的控制器状态。而是保留一个`NSArray`并将`NSIndexPath`每个选定单元格添加到您的数组中（如果/当用户取消选择一个单元格时删除它们）。

然后`cellForRowAtIndexPath:`只需确保根据其索引路径是否在所选单元格数组中正确配置单元格。

# scipy - How to compile distributable Fortran binaries on Mac OS X Mountain Lion?

> ID：12316780
> 
> 赞同：11
> 
> 时间：2012-09-07T11:00:37.420
> 
> 标签：scipy, osx-mountain-lion, gfortran, xcode4.4

Since Apple have stopped distributing gfortran with Xcode, how should I compile architecture independent Fortran code? I have Mac OS X Mountain Lion (10.8), and XCode 4.4 installed, with the [Command Line Tools](https://stackoverflow.com/questions/9329243/xcode-4-4-command-line-tools/9329325#9329325) package installed.

# Apple's Native Compilers

As far as I can tell, the Xcode C / C++ / ObjC compilers use a fork of the [GNU compiler collection](http://gcc.gnu.org/), with [llvm](http://llvm.org/) as a backend; the latter I figure enables compiling and optimising "universal" binaries, for both Intel and PPC architectures.

# 3rd party binary Fortran compilers

## HPC

I've only found a single website that distributes a binary version of gfortran specifically for Mountain Lion: the [HPC](http://hpc.sourceforge.net/#fortran) website. However, I failed to get this to compile SciPy, and later saw in SciPy's README that it is ["known to generate buggy scipy binaries"](https://github.com/scipy/scipy/blob/master/INSTALL.txt).

## CRAN/R

SciPy's recommended (free) Fortran compiler is the one on [CRAN's R](http://cran.r-project.org/bin/macosx/tools/) server, but this has not been updated for Mountain Lion yet. They provide instructions and a script for [Building a Universal Compiler](http://r.research.att.com/tools/), but, again, this hasn't been updated for Mountain Lion yet..

## G95

The [G95 project](http://www.g95.org/) hasn't had an update since 2010, so I didn't try it.. Anyone tried this on Mountain Lion?

## MacPorts

I guess this will be the easiest way to get gfortran installed, but `port search gfortran` comes up with nothing, and I've not had any joy with MacPorts in the past (no offence to MacPorts; it's looks like a very active project, but I've been spoilt with Linux package managers, my favourite manager being aptitude) so on Mac OS X I've compiled software and libraries from source code in the past. Never been a problem 'til now...

# Building a Fortran compiler

Having dug around on the internet a lot in the last couple of days, I've found other Fortran compilers, but I've failed to get any to cross-compile universal binaries, or to compile SciPy.

## GCC - The Gnu Compiler Collection

I compiled the entire [GCC collection](http://gcc.gnu.org/) (v4.6.3), including autotools, automake, libtool and m4 - like the [GCC wiki](http://gcc.gnu.org/wiki/InstallingGCC) and [this blog](http://www.mattvsworld.com/blog/2010/02/install-the-latest-autoconf-and-automake-on-mac-os-10-6/) describe - but the resulting compilers didn't compile universal binaries, probably because LLVM wasn't used as a backend.

## DragonEgg

[DragonEgg](http://dragonegg.llvm.org/) is a "gcc plugin that replaces GCC's optimisers and code-generators ... with LLVM". This looks interesting, but I don't know how I could use it to compile 'llvm-gfortran-4.x'. Can this be done?

# Compatibility

## Libraries

The compiler that comes with Xcode is (a fork of?) GCC v4.2\. But GCC's current release and development branches are versions 4.6 and 4.7, respectively. Apparently, a GNU license change, or something, stopped Apple from updating to more modern versions of GCC. So, if I was to build dynamic libraries made with GCC's gfortran v4.6, could they then be linked with C code compiled by Xcode's native compiler? At a minimum, I figure resulting Mach-O binaries need both x86_64 and i386 code paths. Do GCC provide backwards compatibility with Apple's (forks of?) GCC? I know gfortran has the [`-ff2c` flag](http://gcc.gnu.org/onlinedocs/gfortran/Code-Gen-Options.html), but is this stable across versions?

## Compile flags

The GCC Fortran compiler I built from source didn't support the use of the `-arch` compile flag. I had been including the flags `-arch x86_64 -arch i386` in both CFLAGS and FFLAGS environment variables on earlier OSX versions (Snow Leopard to Lion). Python's distutils, and probably other OSX compilers, expect these flags to work, when configured to build apps or frameworks, using Xcode's universal SDK.

In case you're wondering what compile flags I use, I've uploaded [the script I use to pastebin](http://pastebin.com/DwwTqyPw), which I `source` before I compile anything, using: `source ~/.bash_devenv`.

# The Ideal OSX Fortran Compiler

*   Create ppc and intel (32 and 64bit) universal binaries, specified by using the `-arch` flags.
*   Makes binaries compatible with XCode's linker.
*   Compiles SciPy, giving no errors (compatible with numpy's distutils and f2py).

I don't use Xcode so much, but integration with it would surely benefit other users. Even Intel are still [having problems](http://software.intel.com/en-us/forums/topic/271434) integrating ifort into Xcode 4.4, so this is not something I expect to work..

If you read all the above, then thank you! You can probably tell that I'm not averse to building my own Fortran compiler from source, but is it even possible? Have I missed something? A configure flag maybe? And if such a compiler is not available yet, then why not?!

## (Update:) Apple's GCC

Apple provide the source code for their patched version of GCC, at [opensource.apple.com](http://www.opensource.apple.com/release/developer-tools-44/). This actually includes the source code for gfortran, but what do you know - it doesn't compile (easily). I'm in the process of writing a build script to get this to work. Unfortunately, I've had to apply a couple of patches, and learn about ["the Apple way"](http://www.opensource.apple.com/source/llvmgcc42/llvmgcc42-2336.11/README.Apple) of building GNU software. This is the way to go I think. Any reasons why it shouldn't be? I'll update with an answer if I get it to work...

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-03T14:01:29.213

[从http://r.research.att.com/tools/gcc-42-5666.3-darwin11.pkg](http://r.research.att.com/tools/gcc-42-5666.3-darwin11.pkg)安装 gfortran 后，我设法编译，如此[处](http://www.scipy.org/Installing_SciPy/Mac_OS_X#head-9840c9ac98812bf7f41cc918b34a8a116d72a6ba)所述。不过，我不得不尝试打开包裹几次。第一次说只能安装 App Store 中的应用程序。安装 gfortran 后，`python setup.py build`工作`python setup.py install`正常。scipy 的单元测试虽然给出了相当多的失败率，但不确定它是否正常。

```
Ran 5481 tests in 82.079s

FAILED (KNOWNFAIL=13, SKIP=42, errors=11, failures=72)
<nose.result.TextTestResult run=5481 errors=11 failures=72> 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-16T10:02:18.857

如果您还没有注意到这一点：在较新版本的 Xcode 中，您必须通过以下方式显式安装命令行工具：

首选项 -> 下载 -> 组件

然后单击命令行工具的“安装”按钮。这包括 gfortran：

```
> gfortran -v
Using built-in specs.
Target: i686-apple-darwin10
Thread model: posix
gcc version 4.2.1 (Apple Inc. build 5664) 
```

诚然，这并不能解决我所有的 fortran 需求（在某些情况下，“./configure”脚本会抱怨它们不能“编译一个简单的 fotran 程序”）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-07-27T11:30:49.423

您可以使用 brew （或[Homebrew](http://brew.sh)）来安装 gfortran。

$ 酿造安装 gfortran

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-11-01T14:32:02.450

我知道你说你不喜欢 MacPorts，但如果你安装了这个`gcc48`端口，它实际上包括`gfortran`（尽管你还必须做`sudo port select --set gcc mp-gcc48`它来设置名为 的符号链接`gfortran`）。

此外，FWIW，MacPorts 选项不一定是二进制文件 - MacPorts 实际上可以从源代码构建它，这就是为什么有时需要一段时间。另一方面，它有时似乎也会从某个地方获取存档的二进制文件，但我认为这取决于 portfile 的原始作者上传的内容。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-17T13:22:28.810

我最终编译了苹果[开发者工具源代码页面](http://www.opensource.apple.com/release/developer-tools-44/)提供的源代码 gfortran 。现在这似乎工作正常 - 我已经成功编译了 x86-64 和 i386/i686 LAPACK、ATLAS 和 BLAS fortran 库 - 但是`make -k test`在构建目录中运行时，有一些 ranlib 测试失败。（如果有人愿意，我可以提供有关该 pastebin 或其他地方的更多信息......）

**构建过程**

问完这个问题，我下载了苹果的[llvmgcc42 源代码 tar 存档](http://www.opensource.apple.com/static/images/icon_downloads.png)，里面包含了 llvm/gcc C、C++、ObjC 和 fortran 编译器的源代码，并花了一些时间尝试编译 gfortran 的通用版本。在我的四核 2.8GHz Mac Pro 上构建大约需要 30-60 分钟，并且变得相当复杂，所以我为它编写了一组构建脚本，我已经在[github.com](https://github.com/alexleach/gfortran-mlion)上分享了这些脚本。

……

如果有人想要一份副本，我会暂时[在此处](http://bioltfws1.york.ac.uk/~albl500/Downloads/gfortran-mlion.tar.gz)保留我的构建的 tar 存档。（2012 年 9 月 26 日更新）它只有在安装了前缀 /usr/local/ 时才有效，除非您`install_name_tool`在可执行文件和 dylib 上运行，否则将前缀从 /usr/local 更改为您想要放置的任何位置它。您可以使用（有关原因的更多信息在[这里](http://osiris.laya.com/coding/dylib_linking.html)）测试**install_name 。**`otool -L filename`

我现在使用的最终版本还包括对 gcc/fortran 和 libgfortran 目录的更新，这是我从 GNU GCC 4.2.4 获得的。我从本地[GCC 的镜像](http://gcc.gnu.org/mirrors.html)中获得这些资源。4.2.1 和 4.2.4 之间只有微小的变化，构建脚本包括升级代码所需的补丁。

我编写的[build-gfortran.sh 脚本会](https://github.com/alexleach/gfortran-mlion/blob/master/build-gfortran.sh)下载缺少的依赖项（[mpfr](http://www.mpfr.org/)和[gmp](http://gmplib.org/)），编译和交叉编译它们，使用依赖于架构的预处理器宏修补不同的头文件，并运行 lipo 来创建通用二进制文件和库，最终同时支持 i386 和x86_64 架构。llvmCore 和 GCC 的过程类似。我主要从 Apple 的 llvmgcc42 提供的[build_llvm](http://www.opensource.apple.com/source/llvmgcc42/llvmgcc42-2336.11/llvmCore/utils/buildit/build_llvm)和[build_gcc](http://www.opensource.apple.com/source/llvmgcc42/llvmgcc42-2336.11/build_gcc) bash 脚本中复制代码，但其中一些必须修改，包括一些`lipo`和 [`install_name_tool`](http://developer.apple.com/library/mac/#documentation/Darwin/Reference/ManPages/man1/install_name_tool.1.html)命令。

使用 Xcode 编译 Apple 的 gcc 的官方方法`gnumake`对我不起作用。我认为这应该通过将“fortran”添加到 build_gcc 中的 LANGUAGES 变量来工作。

关于编译 Scipy，仍然无法完美地构建该建筑物。我不得不使用 clang 和 clang++ 作为 C/C++ 编译器，否则我会收到 EXC_BAD_ACCESS malloc 错误。没有尝试过我构建的 gcc/g++ 编译器，只是使用了系统编译器。[这是在 Scipy安装页面](http://www.scipy.org/Installing_SciPy/Mac_OS_X)上为 Lion 报告的。我有 11 个错误和 1 个失败，它们都是由相同的 3 个函数调用（_fitpack._bspleval、numeric.asarray、testing.utils.chk_same_position）引发的。认为这很好，但我希望每个测试都能通过......

# php - Avoid XSS in PHP

> ID：12316784
> 
> 赞同：0
> 
> 时间：2012-09-07T11:00:54.283
> 
> 标签：php, xss

> **Possible Duplicate:**
> [What are the best practices for avoiding xss attacks in a PHP site](https://stackoverflow.com/questions/71328/what-are-the-best-practices-for-avoiding-xss-attacks-in-a-php-site)

I have a php board but it contains XSS security leaks.

If I insert following XSS in url address field in the IE6,

`http://x.x.x.x/xe/?mid=notice&category='"--></style></script><script>alert(0x000640)</script>` (here `'"--></style></script><script>alert(0x000640)</script>` is a XSS code)

the browser shows alert message with 1600 (it translate the above code as script)

to prevent XSS, i inserted following codes (`if(preg_match('/"/',$target)) return true;` )

```
function _isHackedSrc($src) {  
    if(!$src) return false;  
    if($src) {  
     $target = trim($src);  
     if(preg_match('/(\s|(\&\#)|(script:))/i', $target)) return true;  
     if(preg_match('/data:/i', $target)) return true;  

        $url_info = parse_url($src);  
        $query = $url_info['query'];  
     if(!trim($query)) return false;  
     $query = str_replace("&amp;","&",$query);  
        $queries = explode('&', $query);  
        $cnt = count($queries);  
        for($i=0;$i<$cnt;$i++) {  
            $tmp_str = strtolower(trim($queries[$i]));  
            $pos = strpos($tmp_str,'=');  
            if($pos === false) continue;  
            $key = strtolower(trim(substr($tmp_str, 0, $pos)));      
            $val = strtolower(trim(substr($tmp_str,$pos+1)));  
            if( ($key=='module'&&$val=='admin') || ($key=='act'&&preg_match('/admin/i',$val)) ) return true;  
        }
    }
    return false;
} 
```

but it dosent work. please help me

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T11:03:17.743

**不要**尝试检查任何输入是否有恶意内容 - 这是你永远输掉的战斗。

相反，您需要正确转义任何输入。对于 HTML，正确的函数是`htmlspecialchars()`.

* * *

## 回答 #2

> 赞同：-4
> 
> 时间：2012-09-07T11:02:59.680

尝试这个：

```
function _isHackedSrc($src) {  
    $src=trim(strip_tags(addslashes($src))); 
    ....
} 
```

更多信息：[http ://r00tsecurity.org/forums/topic/9924-workaround-strip-tags-and-addslashes-in-the-xss/](http://r00tsecurity.org/forums/topic/9924-workaround-strip-tags-and-addslashes-in-the-xss/)

# ruby - 嵌套哈希的 Ruby 路径

> ID：12316789
> 
> 赞同：0
> 
> 时间：2012-09-07T11:01:11.520
> 
> 标签：ruby, hash

我有一个哈希，`@data`看起来类似于以下内容：

```
{
   "calcData"   =>   {
      "coverStartDate"      =>"10/08/2011",
      ...
      "part"=>      [
         {
            "licenceYears"            =>"10",
            "licenceType"            =>"1",

            ...

            "@partname"            =>"ratingData"
         },
         {                
            "dob"            =>"26/01/1964",
            "age"            =>"47",

            ...

            "@partname"            =>"driver"
         },

         ...
      ]
   }
} 
```

位中有多个不同的部分，`part`差异为`@partname`s。

选择这些`@partname`位之一的最佳方法是什么：

例如：

```
@data["calcData"]["part <<< where @partname="ratingData" >>> "]["licenceYears"] 
```

我如何在 ruby​​/rails 中表示这个逻辑？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T12:02:35.857

```
query = 'driver'

@data["calcData"]['part'].select{|part| part['@partname'].eql?query}
 => [{"dob"=>"26/01/1964", "age"=>"47", "@partname"=>"driver"}] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T11:18:17.280

这是一种方法：

```
part = @data["calcData"]["part"]
keys = part.keys.select{|key| part["@partname"] == "ratingData"}
values = keys.collect{|key| part[key]["licenceYears"]} 
```

您可以将其组合成一个衬里，但它并不容易阅读。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-07T11:57:48.100

使用结构。

```
CalcData = Struct.new :coverStarDate, :part
calc_data = CalcData[ "10/08/2011",
                      { "licenceYears" => 10,
                        # etc.
                      } ] 
```

因此，您摆脱了顶级括号参考，您可以说：

```
calc_data.part["licenceYears"] 
```

# ios - How to load my Facebook Friends from Facebook and display them on iPhone App?

> ID：12316790
> 
> 赞同：-6
> 
> 时间：2012-09-07T11:01:11.737
> 
> 标签：ios, facebook-ios-sdk

I want the details about the friendlist like the below code

```
if (FBSession.activeSession.isOpen) {
    [[FBRequest requestForMyFriends] startWithCompletionHandler:
     ^(FBRequestConnection *connection,
       NSDictionary<FBGraphUser> *user,
       NSError *error) {
         if (!error) {
            NSString *friendnames=[NSString stringWithFormat:@"Hello %@!", user.friendsnames];
         }}];

} 
```

can anyone please help with this code?

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-07T11:19:46.327

在我的应用程序中，我正在这样做：

```
[self.facebook requestWithGraphPath:@"me/friends?fields=name,picture,installed" andDelegate:self];

if ([request.url hasSuffix:@"me/friends?fields=name,picture,installed"])
{
    NSMutableArray *array = [NSMutableArray array];
    for (NSDictionary *dict in [result objectForKey:@"data"])
    {
        FacebookUser *friend = [[FacebookUser alloc] initWithDictionary:dict];
        [array addObject:friend];
    }
    NSLog(@"%@", result); 
```

希望它有帮助， **马里奥**

**编辑：**

这是我创建的模型，它实现了 NSObject

**FacebookUser.h**

```
#import <Foundation/Foundation.h>

@interface FacebookUser : NSObject

@property (readonly) NSString *facebookID;
@property (readonly) NSURL *link;
@property (readonly) NSString *name;
@property (readonly) NSString *pictureURL;
@property (readonly) NSString *firstName;
@property (readonly) NSString *lastName; 
```

**脸书用户.m**

```
#import "FacebookUser.h"

@implementation FacebookUser

@synthesize facebookID = _facebookID;
@synthesize link = _link;
@synthesize name = _name;
@synthesize pictureURL = _pictureURL;
@synthesize firstName = _firstName;
@synthesize lastName = _lastName;

- (id)initWithDictionary:(NSDictionary *)dictionary;
{
    self = [super init];
    if (self)
    {
    _facebookID = [dictionary valueForKey:@"id"];

    //IMPLEMENT WHAT YOU WANT TO SAVE.... 

    }

    return self;
}  

@end 
```

# sql - 管道分隔格式的数据插入表中

> ID：12316791
> 
> 赞同：0
> 
> 时间：2012-09-07T11:01:22.053
> 
> 标签：sql, sql-server, function

我写了一个函数，它返回一个带有单列的表，其中数据分隔为“|”。

例如，如果您将参数传递给函数`funsplit('SAGAR|INDIA|MUMBAI','|')`

它返回为

```
Item<Column Name>
SAGAR
INDIA
MUMBAI 
```

我想要它作为

```
COLUMN 1   COLUMN2    COLUMN3
-----------------------------
SAGAR      INDIA      MUMBAI 
```

这是我的功能

```
ALTER FUNCTION [dbo].[funSplit]
(
    @sInputList Varchar(8000), -- List of delimited items  
    @sDelimiter VarChar(8000) = ',' -- delimiter that separates items  
)
Returns @List Table (item VarChar(8000))  
Begin  
 Declare @sItem VarChar(8000)  

 While CharIndex(@sDelimiter,@sInputList,0) <> 0  
  Begin  
   Select   
   @sItem=RTrim(LTrim(SubString(@sInputList,1,CharIndex(@sDelimiter,@sInputList,0)-1))),  
   @sInputList=RTrim(LTrim(SubString(@sInputList,CharIndex(@sDelimiter,@sInputList,0)+Len(@sDelimiter),Len(@sInputList))))  

   If Len(@sItem) > 0  
    Insert Into @List Select @sItem  
 End  

 If Len(@sInputList) > 0  
  Insert Into @List Select @sInputList -- Put the last item in  

 Return  
End 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T11:09:33.107

这将转置您的结果。

```
select *
from
(
 SELECT Row_Number() over(order by Item) rn,  Item 
 from dbo.funsplit('SAGAR|INDIA|MUMBAI','|')
) src
PIVOT 
(Max(Item) for rn in ([1],[2],[3])) p 
```

如果订单对您很重要，您需要从您的函数中返回该订单

如果列是可变的，那么您可以使用动态 SQL 创建上述内容并使用`sp_executesql`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T11:09:09.700

您的 @List 变量应该是一个包含多个列的表，例如

```
DECLARE @List TABLE(col1 varchar(8000),col2 varchar(8000),col3 varchar(8000)) 
```

因此，您需要提前知道字符串部分的数量。

我知道这可能不是您所需要的，但我不确定您是否可以通过其他方式做您想做的事情。

希望它有点帮助

# ant - With FDT, How Do I Prevent Packaging For Mobile Applications (iOS & Android)

> ID：12316797
> 
> 赞同：0
> 
> 时间：2012-09-07T11:01:42.673
> 
> 标签：ant, launch, fdt

When working with the FDT FREE version, how do I run a configuration which only compiles the SWF and doesn't package an .IPA or .APK.

Is there any way of do this?

For example, I would like to have 2 launch methods, one that only compiles the swf and after it processes some ant script to update resources, and another that final compiles and packages the app.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-08T21:33:49.150

将启动器平台设置为“Adobe AIR Desktop”并选择“不启动”。您可能需要将项目类型设置为“AIR All”才能实现此目的。这适用于大多数情况。 ![在此处输入图像描述](../Images/489e968a94700568aca1f96719409d0e.png) ![在此处输入图像描述](../Images/31ce8a6e6d9045eb8bb9b9dc7cf237d6.png)

# unix - In cvs diff I want to see author name and date of files having difference

> ID：12316799
> 
> 赞同：1
> 
> 时间：2012-09-07T11:01:48.753
> 
> 标签：unix, diff, cvs, wincvs

How can I get the author name and date of the different files, when I do a cvs diff. M using wincvs on windows 2.1.1.1(build 1). I can also do it on unix server through command line. thx

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T11:14:39.403

您不能，除非此信息出现在源中（它不应该出现，除非您希望在每次合并时都发生冲突）。为此，您需要使用其他 cvs 命令；想到了cvs log，但已经有一段时间了。不过，您总是可以编写一个脚本或批处理文件来显示更改的日志条目和差异。

# powershell - 如何自行将子项放入变量中

> ID：12316804
> 
> 赞同：0
> 
> 时间：2012-09-07T11:02:06.950
> 
> 标签：powershell

我相对确定这很容易做到，但我的 google fu 运行不强

目前我正在做：

```
add-pssnapin windows.serverbackup
get-wbsummary 
```

这让我回想起：

```
NextBackupTime                  : 07/09/2012 12:00:00
NumberOfVersions                : 210
LastSuccessfulBackupTime        : 06/09/2012 21:00:13
LastSuccessfulBackupTargetPath  : \\?\Volume{bf315689-e5ed-11e1-a376-d067e5f384ea}
LastSuccessfulBackupTargetLabel : SBSERVE 2012_08_21 12:20 DISK_01
LastBackupTime                  : 06/09/2012 21:00:13
LastBackupTarget                : SBSERVE 2012_08_21 12:20 DISK_01
DetailedMessage                 :
LastBackupResultHR              : 0
LastBackupResultDetailedHR      : 0
CurrentOperationStatus          : NoOperationInProgress 
```

我想要做的只是获取结果部分（而不是将其标题放入变量中），例如 $lastbackuptime = 07/09/2012 12:00:00

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T11:20:07.230

```
PS> $wbs = Get-WBSummary   
PS> $lastbackuptime = $wbs.NextBackupTime 
```

# ruby-on-rails - 从 Rails 的关联中获取外键字段

> ID：12316805
> 
> 赞同：16
> 
> 时间：2012-09-07T11:02:08.650
> 
> 标签：ruby-on-rails, activerecord, redmine

我想知道 Rails 中给定模型的表标题对应的字段名称。

我正在使用查询模型显示标题。

> > query.columns.map{|q| q.caption}
> > => ["Tracker", "Status", "Priority", "Subject", "Assignee", "Target version", "Due date", "% Done"]

列具有与标题对应的名称

> > query.columns.map{|q| q.name}
> > => [:tracker, :status, :priority, :subject, :assigned_to, :fixed_version, :due_date, :done_ratio]

我的模型看起来像

> > 问题.columns.map{|q| q.name}
> > => [“id”、“tracker_id”、“project_id”、“subject”、“description”、“due_date”、“category_id”、“status_id”、“assigned_to_id”、“priority_id”、“fixed_version_id” 、“author_id”、“created_on”、“updated_on”、“start_date”、“done_ratio”、“estimated_hours”、“parent_id”]

我想从上述信息中获取与标题对应的字段名称（数据库字段名称）。

模型中的样本关联

```
belongs_to :assigned_to, :class_name => 'Principal', :foreign_key => 'assigned_to_id' 
```

因此，对于上述关联，我想知道外键。

因为`assigned_to`我想要`'assigned_to_id'`

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-09-07T11:41:45.497

`reflections`哈希包含这种信息：

```
Issue.reflections['assigned_to'].foreign_key 
```

您还可以获得其他信息，例如类 ( `.active_record`) 或关联类型 ( `.macro`)。在 rails 4.2 之前，这个哈希的键是符号而不是字符串。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-04-18T19:17:59.273

Rails 4.2 的正确方法是：

```
Issue.reflections['assigned_to'].options[:foreign_key] 
```

请注意，“assigned_to”是根据 API 的字符串：

> 返回反射名称的哈希作为键，返回 AssociationReflection 作为值。

[http://api.rubyonrails.org/classes/ActiveRecord/Reflection/ClassMethods.html#method-i-reflections](http://api.rubyonrails.org/classes/ActiveRecord/Reflection/ClassMethods.html#method-i-reflections)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-06-09T14:03:37.160

我在这里发布这个，以防这对其他人有帮助。我试图从`proxy_association`关联扩展中获取外键。

您可以`reflection`通过简单地使用`proxy_associtation.reflection`.

然后，使用上面@Frederick Cheung 的方法，你可以像这样得到foreign_key：

```
reflection = proxy_association.reflection
reflection.foreign_key 
```

你也可以`class_name`用同样的方法得到：

```
reflection = proxy_association.reflection
reflection.class_name 
```

# iphone - 无法在真实 iPhone 中调试

> ID：12316806
> 
> 赞同：0
> 
> 时间：2012-09-07T11:02:13.580
> 
> 标签：iphone, ios, debugging

代码运行得很好。我可以在模拟器中调试。我也习惯了在 iPhone 上调试。可以为 iPhone**构建代码。**但是，我不能直接调试到 iPhone。

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    CLog(@"Hello I am called"); //i put break point here and it's never reached 
```

如果我尝试调试到 iphone，iphone 将显示启动屏幕然后退出。

调试区没有日志。

我应该怎么办？附加说明：为我的 iphone 工作不适用于我朋友的 iphone。此外，该程序在我朋友的手机上更加滞后（是的，它可以运行，但无法在那里调试）

ios在两部手机5.11（我的）上都是ios5

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T11:28:38.147

长镜头，但也许你的 iPhone 仍在运行 3.0 之前的 ios 版本？此调用仅从 3.0 开始使用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-07T11:27:53.843

如果我在临时构建之上安装了开发构建，我已经看到了这种行为。我认为问题在于，来自临时构建的不允许调试的权利文件仍然存在，从而导致了问题。我建议从您的设备中删除该应用程序，然后重试。

如果这是问题所在，我发现使用单独的捆绑 ID 进行开发/测试/发布构建有几个好处。这意味着您可以在一台设备上同时安装所有三个，并且它们的用户偏好等保持独立。它还可以防止此类问题的发生。

# c++ - QTableView - 添加命名行

> ID：12316808
> 
> 赞同：0
> 
> 时间：2012-09-07T11:02:25.123
> 
> 标签：c++, qt, qtableview, qabstracttablemodel

我使用 a using a`QTableView`与从`QAbstaractTableModel`. 现在我想插入行/列（代表状态/输入字符），但我需要将状态/输入字符的字符串作为标签（然后显示在 HeaderView 中）传递给我的数据类。

```
bool TransTableModel::insertRows(int position, int rows, const QModelIndex &index)
{
    beginInsertRows(index, position, position+rows-1);

    garage->addUsedState("q6");

    endInsertRows();
} 
```

`TransTableModel`是我的定制模型。我的问题：如何从用户那里获取这个字符串？在这种情况下，我硬编码`"q6"`为标签，但我需要用户提供它。有办法吗？我应该打开一个输入对话框吗？来自模型班？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T12:32:19.420

如果模型需要这些数据，它应该由视图提供，然后可以打开一个输入对话框。

您可以向模型添加一个成员函数以传递该额外参数并从视图类调用它，而不是调用“常规” `insertRows`（您也不必调用`insertRows`该新函数，只需`beginInsertRows`和`endInsertRows`）。

# c - 来自内核的 SIGSEGV

> ID：12316810
> 
> 赞同：-1
> 
> 时间：2012-09-07T11:02:34.687
> 
> 标签：c, linux, linux-kernel, signals

我有一个从用户空间程序动态修改（添加和删除）的节点链接列表。节点分配总是在用户空间中的可能性有多大？

通常的链表节点，

```
struct node {
  int x;
  struct node *next;
}; 
```

我得到了这个问题，因为当我遍历列表时，内核会向`SIGSEGV`这个用户空间进程发送一个信号。而且每当我创建一个新节点时，我都会检查 NULL 指针。

我也知道`SIGSEGV`如果进程尝试访问内核内存，内核会发送信号。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T11:32:22.570

SIGSEGV 是分段错误。这意味着您的程序正在尝试访问不在程序分配的内存范围或段内的区域中的内存。分割是一个丑陋的系统，人们过去必须直接处理，但现在不再那么多了。今天对您来说意味着您的代码很可能会延迟空指针或某些未初始化的值。

您应该做的是将调试器连接到您的程序并查看导致 SIGSEGV 被抛出的地址。一看到它，它很可能是 0x0，或者一些垃圾值，例如 0xDEADC0DE 之类的。

可能您没有将节点中的所有指针都设置为 0x0。在构造函数中执行此操作并仔细检查您的 addNode() removeNode() 函数，以确保您没有悬空指针。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-07T11:09:39.680

不要忘记设置 next=NULL; 在节点构造函数中，或者在节点创建之后。是的，分配总是在用户空间完成

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-07T11:26:19.863

> 节点分配总是在用户空间中的可能性有多大？

100%确定。

> 当我遍历列表时，内核发送一个 SIGSEGV 信号

这意味着您的程序中存在试图访问 la-la-land 的错误。

> 我也知道如果进程尝试访问内核内存，内核会发送 SIGSEGV 信号。

SIGSEGV 是当程序试图访问被禁止的内存时发送的 POSIX 标准信号。因此，不一定只是内核内存，而是您的进程可以访问的空间之外的任何内存。

# ipad - iOS：处理 HTTP 请求的 unicode 字符

> ID：12316813
> 
> 赞同：0
> 
> 时间：2012-09-07T11:02:41.537
> 
> 标签：ipad, asihttprequest, ios5.1, unicode-string

当我 NSLog HTTP 请求响应字符串时，它显示为“ÃÂ£ÃÂÃÂ¯ÃÂ£Ãâ¬ÃÂÃÂ£ÃÂÃÂÃÂ£ÃÂ”，并且 UILabel 上出现了一些不同的内容，但与我期望的日文/中文格式不同。我正在使用 ASIHTTPRequest 并且如前所述[，](https://stackoverflow.com/questions/6718589/unicode-strings-in-json-string)我已将响应编码设置为 NSUTF8StringEncoding（服务器使用 UTF-8 相同），但它没有帮助。有人可以告诉我如何在我的应用程序中支持 unicode 字符吗？谢谢。

```
- (void)getData
{
    ASIHTTPRequest *request = [ASIHTTPRequest requestWithURL:[NSURL URLWithString:[dataUrl stringByAppendingFormat:@"%@",self.selectedID]]];
    [request setResponseEncoding:NSUTF8StringEncoding];

    SBJSON *parser = [[SBJSON alloc] init];

    NSMutableDictionary *data = [[NSMutableDictionary alloc] initWithCapacity:3];
    [data setObject:self.username forKey:@"username"];
    [data setObject:self.password forKey:@"password"];

    NSString *dataJSON = [parser stringWithFragment:data error:nil];
    [request appendPostData:[dataJSON dataUsingEncoding:NSUTF8StringEncoding]];

    [request setDelegate:self];
    [request setDidFinishSelector:@selector(requestSuccess:)];
    [request setDidFailSelector:@selector(requestFailed:)];

    [self.queue addOperation: request];
    [self.queue go];
}

- (void)requestSuccess:(ASIHTTPRequest *)request
{
     NSLog(@"success: %@", [request responseString]);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T13:33:52.163

我设法解决了这个问题。以下是变化！

```
ASIHTTPRequest *request = [ASIHTTPRequest requestWithURL:[NSURL URLWithString:[dataUrl stringByAppendingFormat:@"%@",self.selectedID]]];
[request setResponseEncoding:NSUTF8StringEncoding]; -- > Wrong!!!

 request.defaultResponseEncoding = NSUTF8StringEncoding; --> Correct! 
```

# asp.net - ASP.NET MVC中如何配置复杂类型（四）用MvcExtensions

> ID：12316815
> 
> 赞同：0
> 
> 时间：2012-09-07T11:02:44.860
> 
> 标签：asp.net, asp.net-mvc, asp.net-mvc-4, mvcextensions

我有一个具有一些复杂属性的模型：

```
public class TestModel
{
    public string Prop1 { get; set; }
    public SubClass Prop2 { get; set; }
}
public class SubClass 
{
    public string Test { get; set; }
}

public class TestModelMetadata : ModelMetadataConfiguration<TestModel>
{
    public TestModelMetadata ()
    {
        Configure(m => m.Prop1).DisplayName("is going to be displayed");
        Configure(m => m.Prop2.Test).DisplayName("is NOT going to be displayed");
    }
} 
```

当我试图在视图上显示模型时：

```
@Html.LabelFor(m => m.Prop1)
@Html.LabelFor(m => m.Prop2.Test) 
```

显示 Prop1 的正确标签，而不显示 Prop2.Test。

有人知道解决方案吗？谢谢！！！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T15:27:37.230

据我所知，应为每种类型创建元数据配置，在您的情况下为 SubClass ：

```
public class SubClassMetadata : ModelMetadataConfiguration<SubClass>
{
    public SubClassMetadata()
    {
        Configure(m => m.Test).DisplayName("is going to be displayed1");
    }
} 
```

此外，如果您想使用 @Html.DisplayForModel 显示具有子类属性的模型，您还应该覆盖对象的显示模板，因为默认 mvc（3 - 我不知道它是否在 v4 中更改）显示对象跳过“ComplexType”属性的模板。自定义默认模板的起点可以是[https://github.com/ASP-NET-MVC/ASP.NET-Mvc-3/blob/master/mvc3/src/MvcFuturesFiles/DefaultTemplates/DisplayTemplates/Object.ascx](https://github.com/ASP-NET-MVC/ASP.NET-Mvc-3/blob/master/mvc3/src/MvcFuturesFiles/DefaultTemplates/DisplayTemplates/Object.ascx)

希望能帮助到你。

# django - Django数据库连接错误

> ID：12316819
> 
> 赞同：7
> 
> 时间：2012-09-07T11:02:59.567
> 
> 标签：django, postgresql

我从“python manage.py shell”运行了这些行：

```
from django.db import connection
cursor = connection.cursor() 
```

但出现以下错误：

```
Traceback (most recent call last):
  File "<console>", line 1, in <module>
  File "/usr/local/lib/python2.7/dist-packages/django/db/backends/__init__.py", line 306, in cursor
    cursor = self.make_debug_cursor(self._cursor())
  File "/usr/local/lib/python2.7/dist-packages/django/db/backends/postgresql_psycopg2/base.py", line 177, in _cursor
    self.connection = Database.connect(**conn_params)
  File "/usr/lib/python2.7/dist-packages/psycopg2/__init__.py", line 179, in connect
    connection_factory=connection_factory, async=async)
OperationalError: FATAL:  role "jay" does not exist 
```

在 settings.py 我有

```
DATABASES = {
    'default': {
        'ENGINE': 'django.db.backends.postgresql_psycopg2', 
        'NAME': 'mysite',                     
        'USER': '',                     
        'PASSWORD': '',                  
        'HOST': '',                      
        'PORT': '',                     
    }
} 
```

我在这里做错了什么？我安装了 postgresql 和适配器

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-07T11:12:09.867

> 致命：角色“杰伊”不存在

由于`USER`为空白，因此它使用的是您的本地用户名 ( `jay`)，并且您尚未使用该名称创建 PostgreSQL 用户。

尝试：

```
psql -u postgres createuser -P jay 
```

您可能必须将您在提示符下输入的密码放入`settings.py`，除非您`pg_hba.conf`使用`ident`的是 auth 方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-07T11:11:23.820

由于您没有提供用户名，postgresql 正在使用运行 django 的操作系统用户的用户名来连接数据库。您收到的错误表明该用户（jay）未在数据库中定义。

`mysite`一种可能的解决方案是提供数据库所有者的用户名和密码。也添加`localhost`为主机以确保 postgresql 使用用户/密码身份验证，而不是使用拥有 django 进程的用户名。

# teechart - 无法让 TeeChart 进入 VS2010

> ID：12316820
> 
> 赞同：0
> 
> 时间：2012-09-07T11:03:01.577
> 
> 标签：teechart

我正在尝试将 TeeChart 添加到 VS2010 C++ 项目中。我不想将 TeeChart 图标拖到对话框上，因为我想在我的代码中创建图表以在运行时显示。我已经在我的 PC 上安装了 TeeChart 演示版，但我在注册表中看不到条目 - 可以吗？我原以为只需将 dll 导入我的项目，然后调用方法，但我无法从帮助文件中看到要使用的 dll，还是必须包含 .lib？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T09:01:17.230

对，那是正确的。演示版功能齐全，但不安装任何设计时许可证，并在 40 天后过期。您应该为您的项目使用 TeeChart.dll。

# maven - 在本地设置存档时出现错误 500

> ID：12316821
> 
> 赞同：0
> 
> 时间：2012-09-07T11:03:15.313
> 
> 标签：maven, archiva

我正在尝试在 Windows 机器上设置 Archiva。以下是我在尝试创建管理员用户时遇到的错误。

访问 /archiva/security/register.action 时出现问题。原因：

```
Mail server connection failed; nested exception is javax.mail.MessagingException: Could not connect to SMTP host: localhost, port: 25; 
```

嵌套异常是：java.net.ConnectException：连接被拒绝：连接原因：

org.springframework.mail.MailSendException：邮件服务器连接失败；嵌套异常是 javax.mail.MessagingException：无法连接到 SMTP 主机：localhost，端口：25；嵌套异常是：java.net.ConnectException：连接被拒绝：在 org.springframework.mail.javamail.JavaMailSenderImpl.send（JavaMailSenderImpl.java： 342）在 org.codehaus.redback.integration.mail.MailerImpl.sendMessage(MailerImpl.java:131) 在 org.codehaus.redback.integration .mail.MailerImpl.sendAccountValidationEmail(MailerImpl.java:73) 在 org.codehaus.plexus.redback.struts2.action.RegisterAction.register(RegisterAction.java:154) 在 sun.reflect。

有人遇到过这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T12:02:52.530

一种解决方案 - 定义 smtp 服务器：

在 jetty.xml 中：

```
 <Resource name="mail/Session"  type="javax.mail.Session" auth="Container" 
   mail.smtp.host="localhost" 
   mail.smtp.auth="true" 
   mail.user="USERNAME" 
   mail.password="PASSWORD" 
   mail.port="25" 
   mail.transport.protocol="smtp" 
   mail.debug="true"/> 
```

或者在 windows 上安装 smtp 服务器。现在不知道能不能禁用邮件配置。

# c# - Xaml 和 C# 中的 Windows 8 动画将对象从一列移动到另一列？

> ID：12316825
> 
> 赞同：0
> 
> 时间：2012-09-07T11:03:32.527
> 
> 标签：c#, silverlight, xaml, windows-8

我制作了一个用户控件以在单击时展开，其中有 7 个在带有列的网格中。当我单击最后一个时，它会退出屏幕。我想制作动画，如果它展开，那么它应该移动到 grid.column 1，然后当它折叠时它会回到它自己的网格。

代码：

```
 <Grid x:Name="GrdVwSearchResults" Grid.Row="2" Margin="120,70,0,0" >
        <Grid.Resources>
            <Storyboard x:Name="moveBackAnimation" >
                <DoubleAnimation x:Name="moveBackDoubleAnimation" EnableDependentAnimation="True" Storyboard.TargetName="usrFlight5" Storyboard.TargetProperty="Col" From="4" To="1" Duration="0:0:0.5"/>
            </Storyboard>
        </Grid.Resources>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="Auto" />
            <ColumnDefinition Width="Auto" />
            <ColumnDefinition Width="Auto" />
            <ColumnDefinition Width="Auto" />
            <ColumnDefinition Width="Auto" />
            <ColumnDefinition Width="Auto" />
            <ColumnDefinition Width="Auto" />
        </Grid.ColumnDefinitions>
        <usercontrol:Top3SearchResultDisplay  x:Name="usrFlight1" Height="440" HorizontalAlignment="Left" VerticalAlignment="Top"/>
        <usercontrol:Top3SearchResultDisplay  x:Name="usrFlight2" Grid.Column="1" Height="440" HorizontalAlignment="Left" VerticalAlignment="Top" Margin="10,0,0,0"/>
        <usercontrol:Top3SearchResultDisplay  x:Name="usrFlight3" Grid.Column="2" Height="440" HorizontalAlignment="Left" VerticalAlignment="Top" Margin="10,0,0,0"/>
        <usercontrol:Top3SearchResultDisplay  x:Name="usrFlight4" Grid.Column="3" Height="440" HorizontalAlignment="Left" VerticalAlignment="Top" Margin="10,0,0,0"/>
        <usercontrol:Top3SearchResultDisplay  x:Name="usrFlight5" Grid.Column="4" Height="440" HorizontalAlignment="Left" VerticalAlignment="Top" Margin="10,0,0,0"/>
        <usercontrol:Top3SearchResultDisplay  x:Name="usrFlight6" Grid.Column="5" Height="440" HorizontalAlignment="Left" VerticalAlignment="Top" Margin="10,0,0,0"/>
        <usercontrol:Top3SearchResultDisplay  x:Name="usrFlight7" Grid.Column="6" Height="440" HorizontalAlignment="Left" VerticalAlignment="Top" Margin="10,0,0,0"/>
    </Grid> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T13:37:05.960

如果您想在 Grid 中对元素的行或列的更改进行动画处理，最好的方法是使用 VisualStateManager。您可以启用 FluidLayout 来动画布局更改，例如行、网格等。这可以在 Expression Blend 中轻松完成。

这是一个包含 6 列的网格的 XAML 的简短示例，最后一列中有一个按钮，当您单击它时，它将动画到第一列。对于更高级的状态更改，您可能希望更改代码中的状态，但这是使用一种行为来更改 XAML 中的状态：

```
<Window xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:ei="http://schemas.microsoft.com/expression/2010/interactions"
        xmlns:i="http://schemas.microsoft.com/expression/2010/interactivity"
        x:Class="TestingWPF.MainWindow"
        Title="MainWindow"
        Height="350"
        Width="525">
    <Grid x:Name="LayoutRoot">
        <VisualStateManager.CustomVisualStateManager>
            <ei:ExtendedVisualStateManager/>
        </VisualStateManager.CustomVisualStateManager>
        <VisualStateManager.VisualStateGroups>
            <VisualStateGroup x:Name="VisualStateGroup" ei:ExtendedVisualStateManager.UseFluidLayout="True">
                <VisualStateGroup.Transitions>
                    <VisualTransition GeneratedDuration="0:0:0.5"/>
                </VisualStateGroup.Transitions>
                <VisualState x:Name="Default"/>
                <VisualState x:Name="Expanded">
                    <Storyboard>
                        <Int32AnimationUsingKeyFrames Storyboard.TargetProperty="(Grid.Column)" Storyboard.TargetName="button">
                            <EasingInt32KeyFrame KeyTime="0" Value="0"/>
                        </Int32AnimationUsingKeyFrames>
                    </Storyboard>
                </VisualState>
            </VisualStateGroup>
        </VisualStateManager.VisualStateGroups>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="*"/>
            <ColumnDefinition Width="*"/>
            <ColumnDefinition Width="*"/>
            <ColumnDefinition Width="*"/>
            <ColumnDefinition Width="*"/>
            <ColumnDefinition Width="*"/>
        </Grid.ColumnDefinitions>
        <Button x:Name="button" Content="Button" Grid.Column="5">
            <i:Interaction.Triggers>
                <i:EventTrigger EventName="Click">
                    <ei:GoToStateAction StateName="Expanded"/>
                </i:EventTrigger>
            </i:Interaction.Triggers>
        </Button>
    </Grid>
</Window> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T17:50:19.010

我不确定你是如何使用它的，但这里有一个动画，可以为对象提供“弹出”外观和感觉。

```
 <Storyboard x:Name="PopupFlight">
        <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="(Grid.ColumnSpan)" Storyboard.TargetName="usrFlight7">
            <DiscreteObjectKeyFrame KeyTime="0">
                <DiscreteObjectKeyFrame.Value>
                    <x:Int32>7</x:Int32>
                </DiscreteObjectKeyFrame.Value>
            </DiscreteObjectKeyFrame>
        </ObjectAnimationUsingKeyFrames>
        <DoubleAnimationUsingKeyFrames EnableDependentAnimation="True" Storyboard.TargetProperty="(FrameworkElement.Width)" Storyboard.TargetName="usrFlight7">
            <EasingDoubleKeyFrame KeyTime="0" Value="200"/>
            <EasingDoubleKeyFrame KeyTime="0:0:2" Value="500"/>
        </DoubleAnimationUsingKeyFrames>
        <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="(Canvas.ZIndex)" Storyboard.TargetName="usrFlight7">
            <DiscreteObjectKeyFrame KeyTime="0">
                <DiscreteObjectKeyFrame.Value>
                    <x:Int32>10</x:Int32>
                </DiscreteObjectKeyFrame.Value>
            </DiscreteObjectKeyFrame>
        </ObjectAnimationUsingKeyFrames>
        <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="(Grid.Column)" Storyboard.TargetName="usrFlight7">
            <DiscreteObjectKeyFrame KeyTime="0">
                <DiscreteObjectKeyFrame.Value>
                    <x:Int32>3</x:Int32>
                </DiscreteObjectKeyFrame.Value>
            </DiscreteObjectKeyFrame>
        </ObjectAnimationUsingKeyFrames>
    </Storyboard> 
```

# c++ - 删除这个 & 私有析构函数

> ID：12316828
> 
> 赞同：2
> 
> 时间：2012-09-07T11:03:48.943
> 
> 标签：c++, oop, memory, this, destructor

我一直在考虑`delete this`在 c++ 中的可能用途，并且我已经看到了一种用途。

因为你只能说`delete this`当一个对象在堆上时，我可以将析构函数设为私有并完全停止在堆栈上创建对象。最后，我可以通过`delete this`在充当析构函数的随机公共成员函数中说来删除堆上的对象。我的问题：

1）为什么我要强制对象在堆上而不是在堆栈上？

2）除此之外还有其他用途`delete this`吗？（假设这是对它的合法使用:)）

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-07T11:10:44.640

任何使用的方案`delete this`都有些危险，因为调用执行此操作的函数的人都会留下一个悬空指针。（当然，正常删除对象的时候也是这样，但是那样的话，很明显对象已经被删除了）。尽管如此，还是有一些合理的情况需要一个对象来管理它自己的生命周期。

它可以用来实现一个讨厌的、侵入性的引用计数方案。您将具有“获取”对对象的引用的功能，防止它被删除，然后在完成后“释放”它，如果没有其他人获得它，则将其删除，如下所示：

```
class Nasty {
public:
    Nasty() : references(1) {}

    void acquire() {
        ++references;
    }
    void release() {
        if (--references == 0) {
            delete this;
        }
    }
private:
    ~Nasty() {}
    size_t references;
};

// Usage
Nasty * nasty = new Nasty; // 1 reference
nasty->acquire();          // get a second reference
nasty->release();          // back to one
nasty->release();          // deleted
nasty->acquire();          // BOOM! 
```

我更愿意`std::shared_ptr`为此目的使用它，因为它是线程安全的、异常安全的、适用于任何类型而不需要任何显式支持，并且在删除后阻止访问。

更有用的是，它可以在事件驱动系统中使用，在该系统中创建对象，然后管理它们自己，直到它们收到一个告诉它们不再需要它们的事件：

```
class Worker : EventReceiver {
public:
    Worker() {
        start_receiving_events(this);
    }    
    virtual void on(WorkEvent) {
        do_work();
    }
    virtual void on(DeleteEvent) {
        stop_receiving_events(this);
        delete this;
    }
private:
    ~Worker() {}
    void do_work();
}; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-07T15:22:48.020

> 1）为什么我要强制对象在堆上而不是在堆栈上？

1) 因为对象的生命周期在逻辑上与范围无关（例如，函数体等）。要么是因为它必须管理自己的生命周期，要么是因为它本质上是一个共享对象（因此，它的生命周期必须附加到它的共同依赖对象的生命周期）。这里的一些人指出了一些例子，比如事件处理程序、任务对象（在调度程序中），以及复杂对象层次结构中的一般对象。

2）因为您想控制为分配/释放和构造/销毁执行代码的确切位置。这里的典型用例是跨模块代码（跨可执行文件和 DLL（或 .so 文件）传播）。由于模块之间的二进制兼容性和单独堆的问题，通常要求您严格控制这些分配构造操作发生在哪个模块中。这意味着仅使用基于堆的对象。

> 2）除此之外还有其他用途吗？（假设这是对它的合法使用:)）

好吧，您的用例实际上只是“操作方法”而不是“为什么”。当然，如果您要`delete this;`在成员函数中使用语句，那么您必须有适当的控制来强制所有创建发生`new`（并且在发生语句的同一翻译单元中`delete this;`）。不这样做只会是非常糟糕的风格和危险的。但这并没有解决您要使用它的“原因”。

1）正如其他人指出的那样，一个合法的用例是您拥有一个对象，该对象可以确定其工作何时结束并因此自行销毁。例如，事件处理程序在事件被处理时删除自己，网络通信对象在指定执行的事务结束后删除自己，或者调度程序中的任务对象在任务完成时删除自己。然而，这留下了一个大问题：向外界发出它不再存在的信号。这就是为什么许多人提到“侵入式引用计数”方案，这是确保对象仅在没有更多引用时才被删除的一种方法。另一种解决方案是使用“有效”对象的全局（类似单例）存储库，`delete this;`调用（作为重载的 new/delete 的一部分，或与每个 new/delete 调用一起）。

然而，有一种更简单且侵入性更小的方法来实现相同的行为，尽管不太经济。可以使用自引用`shared_ptr`方案。如此：

```
class AutonomousObject {
  private:
    std::shared_ptr<AutonomousObject> m_shared_this;

  protected:
    AutonomousObject(/* some params */);

  public:

    virtual ~AutonomousObject() { };

    template <typename... Args>
    static std::weak_ptr<AutonomousObject> Create(Args&&... args) {
      std::shared_ptr<AutonomousObject> result(new AutonomousObject(std::forward<Args>(args)...));
      result->m_shared_this = result;  // link the self-reference.
      return result;  // return a weak-pointer.
    };

    // this is the function called when the life-time should be terminated:
    void OnTerminate() {
      m_shared_this.reset( NULL );  // do not use reset(), but use reset( NULL ).
    };
}; 
```

使用上面的方法（或者这个粗略的例子的一些变化，取决于你的需要），只要它认为有必要并且没有其他人在使用它，对象就会一直存在。弱指针机制充当代理，由对象的可能外部用户查询对象的存在。这种方案使对象更重（其中有一个共享指针），但实现起来更容易、更安全。当然，您必须确保对象最终会自行删除，但在这种情况下，这是给定的。

2）我可以想到的第二个用例与将对象限制为仅堆的第二个动机有关（见上文），但是，它也适用于您不对其进行限制的情况。如果要确保释放和销毁都被分派到正确的模块（分配和构造对象的模块），则必须使用动态分派方法。为此，最简单的方法就是使用虚函数。但是，虚拟析构函数不会将其切断，因为它只调度销毁，而不是释放。解决方案是使用调用`delete this;`相关对象的虚拟“销毁”功能。这是一个简单的方案来实现这一点：

```
struct CrossModuleDeleter;  //forward-declare.

class CrossModuleObject {
  private:
    virtual void Destroy() /* final */;

  public:
    CrossModuleObject(/* some params */);  //constructor can be public.

    virtual ~CrossModuleObject() { };  //destructor can be public.

    //.... whatever...

    friend struct CrossModuleDeleter;

    template <typename... Args>
    static std::shared_ptr< CrossModuleObject > Create(Args&&... args);
};

struct CrossModuleDeleter {
  void operator()(CrossModuleObject* p) const {
    p->Destroy();  // do a virtual dispatch to reach the correct deallocator.
  };
};

// In the cpp file:

// Note: This function should not be inlined, so stash it into a cpp file.
void CrossModuleObject::Destroy() {
  delete this;
};

template <typename... Args>
std::shared_ptr< CrossModuleObject > CrossModuleObject::Create(Args&&... args) {
  return std::shared_ptr< CrossModuleObject >( new CrossModuleObject(std::forward<Args>(args)...), CrossModuleDeleter() );
}; 
```

上述方案在实践中运行良好，它的优点是该类可以充当基类，而不会受到派生类中这种虚拟销毁机制的额外入侵。而且，您还可以修改它以仅允许基于堆的对象（通常使构造函数-析构函数私有或受保护）。如果没有基于堆的限制，优点是您仍然可以根据需要将对象用作局部变量或数据成员（按值），但是，当然，任何使用班级。

据我所知，这些是我在任何地方见过或听说过的唯一合法用例（第一个很容易避免，正如我所展示的，而且经常应该避免）。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-07T11:21:11.030

一般原因是对象的生命周期是由类内部的某些因素决定的，至少从应用程序的角度来看是这样。因此，它很可能是一个调用`delete this;`.

显然，当对象是唯一知道需要多长时间的对象时，您不能将其放在随机线程堆栈上。有必要在堆上创建这样的对象。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-07T11:51:36.737

```
delete this; 
```

有时可能很有用，通常用于控制另一个对象的生命周期的控件类。使用侵入式引用计数，它控制的类是从它派生的类。

使用这样一个类的结果应该是让你的类的用户或创建者更容易处理生命周期。如果它没有实现这一点，那就是不好的做法。

一个合理的例子可能是你需要一个类在它被破坏之前清理对它自己的所有引用。在这种情况下，每当您存储对它的引用时（大概在您的模型中），您“告诉”该类，然后在退出时，您的类会在它调用`delete this`自身之前将这些引用或其他任何内容清空。

对于您班级的用户，这一切都应该发生在“幕后”。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-07T11:51:42.157

“为什么我要强制对象在堆上而不是在堆栈上？”

通常，当您强制这样做不是因为您*想*要这样做时，这是因为该类是某些多态层次结构的一部分，并且获得它的唯一合法方法是从工厂函数返回不同派生类的实例，根据你传递给它的参数，或者根据它知道的一些配置。然后很容易安排工厂函数使用`new`. 即使他们想要，这些类的用户也不可能将它们放在堆栈上，因为他们事先不知道他们正在使用的对象的派生类型，只知道基本类型。

一旦你有了这样的对象，你就知道它们是用 销毁的`delete`，你可以考虑以最终结束的方式管理它们的生命周期`delete this`。只有当对象能够以某种方式知道何时不再需要它时，您才会这样做，这通常是（如 Mike 所说），因为它是某些框架的一部分，它不会显式管理对象生命周期，但会告诉它的组件他们已经被分离/注销/无论如何[*]。

如果我没记错的话，James Kanze 就是你的人选。我可能记错了，但我想他偶尔会提到，在他的设计`delete this`中不仅使用过，而且很常见。这样的设计避免了共享所有权和外部生命周期管理，有利于实体对象网络管理它们自己的生命周期。并且在必要时，在摧毁自己之前从任何了解他们的信息中注销自己。因此，如果您在“工具带”中有多个“工具”，那么您不会认为工具带“拥有”对每个工具的引用，您会想到工具将自己放入和取出皮带。

[*] 否则，您将让您的工厂返回 a`unique_ptr`或`auto_ptr`鼓励调用者将对象直接填充到他们选择的内存管理类型中，或者您将返回原始指针但通过文档提供相同的鼓励。所有你习惯看到的东西。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-09-07T11:14:40.567

这通常是一个非常糟糕的主意。在极少数情况下，例如，COM 对象强制执行侵入式引用计数。您只会在非常具体的情境原因下执行此操作 - 永远不会针对通用课程。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-09-07T11:21:40.630

> 1）为什么我要强制对象在堆上而不是在堆栈上？

因为它的生命周期不是由范围规则决定的。

> 2）除此之外还有其他用途吗？（假设这是对它的合法使用:)）

`delete this`当对象是最适合负责其自身寿命的对象时，您使用它。我知道的最简单的例子之一是 GUI 中的窗口。窗口对事件做出反应，其中的一个子集意味着窗口必须关闭并因此被删除。在事件处理程序中，窗口执行`delete this`. （您可以将处理委托给控制器类。但是“窗口将事件转发给决定删除窗口的控制器类”的情况并没有太大不同`delete this`，窗口事件处理程序将被删除窗口。您也可以需要将关闭与删除分离，但您的理由与 ) 的可取性无关`delete this`。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-09-07T11:09:10.303

曾几何时，我正在编写一些插件代码。我相信我混合构建（调试插件，发布主代码或可能相反），因为一个部分应该很快。或者可能发生了另一种情况。这样的 main 已经基于 gcc 发布，并且插件正在 VC 上调试/测试。当主代码从插件中删除某些内容或插件删除某些内容时，会发生内存问题。这是因为它们都使用了不同的内存池或 malloc 实现。所以我有一个私有 dtor 和一个名为 deleteThis() 的虚函数。

-edit- 现在我可能会考虑重载删除运算符或使用智能指针，或者只是声明永远不要删除函数。这将取决于并且通常不应该重载 new/delete 除非你*真的*知道你在做什么（不要这样做）。我决定使用 deleteThis() 是因为我发现它比 C 中的 thing_alloc 和 thing_free 更容易，因为 deleteThis() 感觉更像是 OOP 方式

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-09-07T11:07:15.030

一个好的经验法则是不使用`delete this`.

简单地说，使用的东西`new`应该有足够的责任在使用`delete`对象时使用。这也避免了堆栈/堆上的问题。

# android - 如何在应用程序中添加颜色选择器？

> ID：12316831
> 
> 赞同：0
> 
> 时间：2012-09-07T11:03:56.230
> 
> 标签：android, android-layout, android-widget, touch, color-picker

我开发了一个应用程序，它使用屏幕作为石板，手指作为粉笔，它工作正常。但我想为粉笔使用不同的颜色类型。

这是我的代码：

**我的演示.java**

```
 package com.example.mydemo;
    import android.os.Bundle;
    import android.app.Activity;
    import android.view.View;
    import android.widget.Button;
    import android.widget.LinearLayout;

    public class MyDemo extends Activity {

    private LinearLayout root;
    private Button btnReset;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_my_demo);

        root = (LinearLayout) findViewById(R.id.root);
        btnReset = (Button) findViewById(R.id.reset);

        final MyImageView view = new MyImageView(this);
        view.setLayoutParams(new LinearLayout.LayoutParams(LinearLayout.LayoutParams.FILL_PARENT, LinearLayout.LayoutParams.FILL_PARENT));
        root.addView(view);

        btnReset.setOnClickListener(new View.OnClickListener() {
            public void onClick(View v) {
                view.reset();
            }
        });
    }

} 
```

**MyImageView.java**

```
package com.example.mydemo;
import android.content.Context;
import android.graphics.Canvas;
import android.graphics.Color;
import android.graphics.Paint;
import android.graphics.Path;
import android.graphics.PointF;
import android.view.MotionEvent;
import android.view.View;
import android.widget.ImageView;
import java.util.ArrayList;
import java.util.List;

public class MyImageView extends ImageView implements View.OnTouchListener {

    private int id = -1;
    private Path path;
    private List<Path> paths = new ArrayList<Path>();
    private List<PointF> points = new ArrayList<PointF>();

    boolean multiTouch = false;

    public MyImageView(Context context) {
        super(context);
        this.setOnTouchListener(this);
    }

    public void reset() {
        paths.clear();
        points.clear();
        path = null;
        id = -1;
        invalidate();
    }

    @Override
    protected void onDraw(Canvas canvas) {
        super.onDraw(canvas);

        Paint paint = createPen(Color.BLACK);
        paint.setStyle(Paint.Style.STROKE);
        for (Path path : paths) {
            canvas.drawPath(path, paint);
        }

        for (int i = 0; i < points.size(); i++) {
            PointF p = points.get(i);
            canvas.drawText("" + p.x, p.y, i, createPen(Color.WHITE));
        }
    }

    private PointF copy(PointF p) {
        PointF copy = new PointF();
        copy.set(p);
        return copy;
    }

    public boolean onTouch(View v, MotionEvent event) {
        int action = event.getAction();
        switch (action & MotionEvent.ACTION_MASK) {
            case MotionEvent.ACTION_DOWN:
                multiTouch = false;

                id = event.getPointerId(0);
                PointF p = getPoint(event, id);
                path = new Path();
                path.moveTo(p.x, p.y);
                paths.add(path);

                points.add(copy(p));
                break;
            case MotionEvent.ACTION_POINTER_DOWN:
                multiTouch = true;
                for (int i = 0; i < event.getPointerCount(); i++) {
                    int tId = event.getPointerId(i);
                    if (tId != id) {
                        points.add(getPoint(event,i));
                    }
                }
                break;
            case MotionEvent.ACTION_MOVE:
                if (!multiTouch) {
                    p =getPoint(event, id);
                    path.lineTo(p.x, p.y);
                }
                break;
        }

        invalidate();

        return true;
    }

    private PointF getPoint(MotionEvent event, int i) {
        int index = 0;
        return new PointF(event.getX(index), event.getY(index));
    }

    private Paint createPen(int color) {
        Paint pen = new Paint();
        pen.setColor(color);
        float width = 3;
        pen.setStrokeWidth(width);
        return pen;
    }

} 
```

**activity_my_demo.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout android:id="@+id/root" xmlns:android="http://schemas.android.com/apk/res/android"
              android:orientation="vertical"
              android:layout_width="fill_parent"
              android:layout_height="fill_parent"
        >

    <Button android:id="@+id/reset" android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="Reset"
            />
</LinearLayout> 
```

谁能告诉我应该在我的代码中添加或更改什么以便我可以为粉笔使用不同的颜色？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T11:15:24.180

您可以在您的 android 文件夹的..

对于颜色选择器，请转到此文件夹中：

android/samples/android-YOURS_VERSION/ApiDemos

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T05:10:13.730

使用它，查看此代码。比你的问题得到解决

```
 package com.example.changecolor;
      import android.app.Activity;
      import android.content.pm.PackageInfo;
      import android.content.pm.PackageManager;
      import android.graphics.Color;
      import android.os.Bundle;
      import android.view.Menu;
      import android.view.MenuItem;
      import android.view.View;
      import android.widget.Button;
      import android.widget.LinearLayout;
      import android.widget.TextView;

 public class MainActivity extends Activity
  implements View.OnClickListener, UberColorPickerDialog.OnColorChangedListener {

private int mColor = 0xFFFF0000;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    //Write the version number
    PackageManager pm = getPackageManager();
    String versionName = "";
    try {
        PackageInfo pi = pm.getPackageInfo("com.keithwiley.android.ubercolorpickerdemo", 0);
        versionName = pi.versionName;
    }
    catch (Exception e) {
    }
    TextView textView = (TextView) findViewById(R.id.version);
    textView.setText(versionName);

    //Initialize the sample
    ((LinearLayout) findViewById(R.id.LinearLayout)).setBackgroundColor(mColor);
    float hsv[] = new float[3];
    Color.colorToHSV(mColor, hsv);
    if (UberColorPickerDialog.isGray(mColor))
        hsv[1] = 0;
    if (hsv[2] < .5)
        ((TextView) findViewById(R.id.sample)).setTextColor(Color.WHITE);
    else ((TextView) findViewById(R.id.sample)).setTextColor(Color.BLACK);

    //Set up the buttons
    Button button = (Button) findViewById(R.id.colorPickerWithTitle);
    button.setOnClickListener(this);

    button = (Button) findViewById(R.id.colorPickerWithToast);
    button.setOnClickListener(this);
}

protected void onPause() {
    super.onPause();
}

protected void onResume() {
    super.onResume();
}

public boolean onCreateOptionsMenu(Menu menu) {
    super.onCreateOptionsMenu(menu);

    return true;
}

public boolean onPrepareOptionsMenu(Menu menu) {
    super.onPrepareOptionsMenu(menu);

    return true;
}

public boolean onOptionsItemSelected(MenuItem item) {
    switch (item.getItemId()) {
    }

    return super.onOptionsItemSelected(item);
}

public void onClick(View v) {
    if (v.getId() == R.id.colorPickerWithTitle)
        new UberColorPickerDialog(this, this, mColor, true).show();
    if (v.getId() == R.id.colorPickerWithToast)
        new UberColorPickerDialog(this, this, mColor, false).show();
}

public void colorChanged(int color) {
    ((LinearLayout) findViewById(R.id.LinearLayout)).setBackgroundColor(mColor=color);

    float hsv[] = new float[3];
    Color.colorToHSV(mColor, hsv);
    //if (UberColorPickerDialog.isGray(mColor))
    //  hsv[1] = 0;
    if (hsv[2] < .5)
        ((TextView) findViewById(R.id.sample)).setTextColor(Color.WHITE);
    else ((TextView) findViewById(R.id.sample)).setTextColor(Color.BLACK);
   }
  } 
```

并使用颜色选择器类

# linux - 如何使用 FUSE - S3FS 挂载 Amazon S3 存储桶

> ID：12316837
> 
> 赞同：3
> 
> 时间：2012-09-07T11:04:08.150
> 
> 标签：linux, amazon-web-services, amazon-s3, fuse, s3fs

这把我逼到了墙角。我对 Linux 还是有点陌生​​，但我确实知道如何做大部分我需要做的日常事情。我想要做的是将 Amazon S3 存储桶挂载到我服务器上的挂载点。

我运行 Ubuntu 服务器 12.04，它是最新的。我按照这个指导，

[http://www.craiglotter.co.za/2012/04/20/how-to-install-s3fs-on-an-ubuntu-server/](http://www.craiglotter.co.za/2012/04/20/how-to-install-s3fs-on-an-ubuntu-server/)

如何在我的服务器上安装 FUSE 和 S3FS。但它只是说它不能“建立安全凭证”。我在 etc 中使用了一个 psswd_s3fs 文件，并在主文件夹中尝试了一个 .passwd_s3fs 文件（/home/USERNAME - 这是我放它的地方）。这些文件确实具有访问密钥 ID 和秘密访问密钥 (ID:ACESSKEY) <- 使用的格式。

如果我将任一文件的 chmod 更改为 600 到 777，它会报告这是错误的，它不需要其他权限。所以我知道它使用文件。

那么我做错了什么？

还创建了一个新用户，我一直在使用的访问详细信息用于默认用户登录，但也不会使用它们。不确定如何将该用户分配给选定的存储桶，还是我必须以其他方式进行？

请帮忙？

更新 ：

想知道的是我从亚马逊那里得到的细节是否正确，所以我下载了TntDrive在windows中测试，没有问题。安装我的驱动器没有任何问题....

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-09T07:14:44.597

试试这个链接[http://code.google.com/p/s3fs/wiki/FuseOverAmazon](http://code.google.com/p/s3fs/wiki/FuseOverAmazon) 并记住：- 凭证文件可能没有宽松的权限，因为这会造成安全漏洞。IE。~/.passwd-s3fs 可能没有其他/组权限，/etc/passwd-s3fs 可能没有其他权限。相应地设置这些文件的权限：

% chmod 600 ~/.passwd-s3fs % sudo chmod 640 /etc/passwd-s3fs

它应该工作，它为我工作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-07T14:45:53.653

好的，

不知道为什么我会遇到这个问题，因为我确实在 Linux 中制作了该文件，但基本上我的密码文件不是 Linux 可读格式。

我使用了 do2unix（只是谷歌它，你会发现它）。这解决了我的问题，然后我可以看到 Amazon S3 服务器。

我添加的下一个问题是 samba 不会共享驱动器，在安装驱动器时必须使用“-o allow_other”选项。

请注意，您将/可能必须在 fuse.conf 中启用“user_allow_other”。(/etc/fuse.conf) 你不能错过它前面只有一个#的选项，只需删除然后保存它。

希望对其他人有所帮助。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2020-08-29T00:06:48.810

请确保您：

1 ) 如果您只有一组凭据，请使用此格式：

```
accessKeyId:secretAccessKey 
```

2 ) 如果您拥有一组以上的凭据，也可以识别此语法：

```
bucketName:accessKeyId:secretAccessKey 
```

3）密码文件可以存储在两个位置：

```
/etc/passwd-s3fs     [0640]
$HOME/.passwd-s3fs   [0600] 
```

# android - 在 AsyncTask 中使用 runOnUiThread 效率低下而且不好？

> ID：12316838
> 
> 赞同：2
> 
> 时间：2012-09-07T11:04:09.163
> 
> 标签：android, multithreading, android-asynctask

我知道有人在 AsyncTask 中使用 runOnUiThread 听起来很疯狂。不知何故，它对我有用，但我想知道它是否是一种可接受且稳健的方法。这是场景：

我有一个应用程序，在成功登录后，用户被呈现到下一个屏幕。在这个新屏幕中，3 种不同的方法从 Web 服务器加载不同类型的数据。这些方法是：

*   **getMembersForList()**：它加载社区成员列表并将其显示在列表视图中。

*   **getProfileData()**：它加载登录用户的个人资料并在屏幕上显示他的姓名、图像等。

*   **getNotificationCounts**：它为用户加载新通知的计数。

我为此应用了 3 种不同的方法：

**(1)**在 onCreate 中简单地调用所有 3 个方法，即没有独占线程用于任何方法。在这种情况下，从登录屏幕到此屏幕的转换变得非常缓慢，并且在此活动出现之前会出现一段时间的黑屏。

**(2)**在 UI 线程上调用 getMembersForList()，在独占线程上调用其他 2 个方法。在这种情况下，转换变得快速并且列表快速显示，但通知计数和用户名等不会显示，因为发生 WrongThreadException 表示该线程无法触及其他线程的视图（用户名的 TextViews、通知计数等，它们是全局声明的) . 当我从 AsyncTask 启动这些线程时也会发生同样的事情。

**(3)**在 UI 线程上调用 getMembersForList()，然后在 doInBackground() 方法内的“runOnUiThread”中调用其他 2 个方法的 AsyncTask。这解决了上述两个问题。现在屏幕转换更快了，也没有出现 WrongThread 异常。

到目前为止，**方法-(3)**对我来说效果很好，但我不确定这是否是正确的方法，因为 runOnUiThread 和 AsyncTask 是两个完全相反的东西。谁能消除我对这种情况的怀疑。提前谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T11:09:59.640

我建议在 asyncTask 中运行所有 3 个调用，并在后台任务完成后更新 AsyncTask 的 postExecute() 中的 UI，postExecute 在 UIthread 上运行，因此您无需调用任何显式的内容即可在 UIthread 上运行它们。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-07T11:13:17.967

`runOnUiThread()`是的，像这样的用例是该方法首先存在的一个重要原因。这个想法是你允许你的后台线程/`AsyncTask`实例在后台运行你的冗长操作，然后提供一个简单的钩子，当他们有结果时（或以任意间隔，随着结果的不同部分变得可用）。

只要这就是您正在做的事情，那么您的使用就可以了。您要避免做的是在主线程上执行冗长的操作，直接或间接地通过从后台线程传入一些冗长的操作。

当然，如果您不想这样做，则不必这样做。你可以`postExecute()`改用。或者您可以将结果存储在某处，然后使用任何类型的消息传递 API 来通知主线程结果已准备好，依此类推。

# batch-file - 如何将额外的额外参数传递给批处理文件？

> ID：12316840
> 
> 赞同：5
> 
> 时间：2012-09-07T11:04:10.130
> 
> 标签：batch-file, command-line-arguments

我想使用传递给批处理文件的前 2 个参数，然后将其他所有内容附加到批处理文件中执行的命令中。

有没有简单的方法可以做到这一点？

```
// batch file
command -Duser=%1 -Dpwd=%2 {? how to pass all remaining arguments on the command line} 
```

批处理将像这样执行

```
batch.bat USR PWD -Dargument1=1 -Dargument2=2 
```

实际上，我希望执行以下操作

```
command -Duser=USR -Dpwd=PWD -Dargument1=1 -Dargument2=2 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-07T13:32:38.777

该`for`命令应该给你你想要的：

```
for /f "tokens=1,2*" %%a in ("%*") do echo command -Duser=%%a -Dpwd=%%b %%c 
```

来自`for`( `for /?`) 的帮助：

* * *

`FOR /F "eol=; tokens=2,3* delims=, " %i in (myfile.txt) do @echo %i %j %k` 将解析 myfile.txt 中的每一行，忽略以分号开头的行，将每行的第二个和第三个标记传递给 for 正文，标记由逗号和/或空格分隔。 **请注意 for body 语句引用 %i 来获取第二个标记，%j 获取第三个标记，以及 %k 获取第三个之后的所有剩余标记。** 对于包含空格的文件名，您需要用双引号将文件名括起来。为了以这种方式使用双引号，您还需要使用 usebackq 选项，否则双引号将被解释为定义要解析的文字字符串。

* * *

所以在我的解决方案中，`%%a`将第一个参数的值传递给脚本，`%%b`第二个参数的值以及`%%c`其余参数。

当我`batch.bat USR PWD -Dargument1=1 -Dargument2=2`从命令提示符运行时，我得到：

```
command -Duser=USR -Dpwd=PWD -Dargument1=1 -Dargument2=2 
```

删除`echo`后面的`do`以使用参数调用您的命令。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-07T15:40:50.727

Patrick Cuff 的解决方案通常有效，但如果前 2 个参数中的任何一个包含带引号的空格或特殊字符，它将失败。如果参数用空格以外的东西分隔，它也会失败。FOR /F 分隔符可以扩展为包含`,` `;`and `=`，但是如果参数包含任何引用的分隔符，它将失败。

以下改进支持带引号的特殊字符，如`&`and `|`，但参数分隔符仍然是个问题。

```
@echo off
setlocal enableDelayedExpansion
set args=%*
for /f "tokens=1,2*" %%a in ("!args!") do (
  endlocal
  echo arg1=%%a  arg2=%%b  remainder=%%c
) 
```

***编辑*** *这是一个使用USEBACKQ的更简单的修改，它实现了同样的事情*

```
for /f "usebackq tokens=1,2*" %%a in ('%*') do echo arg1=%%a  arg2=%%b  remainder=%%c 
```

*结束编辑*

不幸的是，一个真正通用的解决方案需要一个从 3 开始解析每个参数的 GOTO 循环。只要所有引号都是平衡的并且所有特殊字符都被引用，下面的解决方案应该可以工作。

```
@echo off
setlocal
set "args="
:parseArgs
set args=%args% %3
shift /3
if "%~3" neq "" goto :parseArgs
if (%3) equ ("") goto :parseArgs
echo arg1=%1  arg2=%2  remainder=%args% 
```

要消除所有限制需要采取严厉措施 - 请参阅[如何接收最奇怪的命令行参数？](https://stackoverflow.com/q/4200316/1012053)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-07T12:26:58.580

这可能是你想要的

```
C:>help shift
Changes the position of replaceable parameters in a batch file.

SHIFT [/n]

If Command Extensions are enabled the SHIFT command supports
the /n switch which tells the command to start shifting at the
nth argument, where n may be between zero and eight.  For example:

    SHIFT /2

would shift %3 to %2, %4 to %3, etc. and leave %0 and %1 unaffected. 
```

# javascript - 使用 jquery 显示和隐藏产品 li

> ID：12316843
> 
> 赞同：2
> 
> 时间：2012-09-07T11:04:15.373
> 
> 标签：javascript, jquery, list, show-hide

我有一个清单

```
<ul class="products">
   <li class="products">first</li>
   <li class="products">second</li>
   <li class="products">third</li>
   <li class="products">fourth</li>
</ul> 
```

并且我想使用 jquery 来：
1-当用户单击除单击的一个之外的一个时隐藏其他 li。
2-当用户再次单击活动 li 时显示所有 li。

这是脚本：

```
$(window).load(function(){
$(".products li.active").click(function(){
    $(".products li").show("slow");
    $(this).removeClass("active");
});
$(".products li").click(function(){
    $(this).addClass("active");
    $(".products li:not(.active)").hide("slow");
});
}); 
```

它适用于第一步，但是当用户单击活动 li 时，没有任何变化。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T11:07:01.890

试试这个：

```
$(window).load(function(){
   $(".products li").click(function(){
      if ($(this).hasClass("active")) {
          //this is already active, show all
          $(".products li").show("slow");
          $(this).removeClass("active");
      } else {
          //this is not active yet, make active and hide all others
          $(this).addClass("active");
          $(".products li:not(.active)").hide("slow");
      }
   });
}); 
```

[JsFiddle 上提供现场演示](http://jsfiddle.net/v3kvR/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-07T11:06:12.267

这些选择器在你绑定事件的那一刻被评估——所以第一个`click`事件不会被绑定到任何东西。改用单个函数并检查该函数内的类：

```
$(document).ready(function() {
    $(".products li").click(function() {
        if($(this)).hasClass('active') {
            $(".products li").show("slow");
            $(this).removeClass("active");
        } else {
            $(this).addClass("active");
            $(".products li:not(.active)").hide("slow");
        }
    });
}); 
```

哦，使用 DOMReady ( `$(document).ready()`) 事件而不是 WindowLoaded 事件...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-07T11:06:59.533

您不需要有 2 个点击事件：

```
$(document).load(function(){
    $(".products li").click(function(){
        if($(this).hasClass("active"){
           $(".products li").show("slow");
           $(this).removeClass("active");
        }
        else{
           $(this).addClass("active");
           $(".products li:not(.active)").hide("slow");
        }
    });
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-07T11:12:05.170

你可以这样做

```
$(".products li.active").live("click",function(){
    $(".products li").show("slow");
    $(this).removeClass("active");
});

$(".products li:not('.active')").live("click",function(){
    $(this).addClass("active");
    $(".products li:not(.active)").hide("slow");
}); 
```

[JS 小提琴](http://jsfiddle.net/vZEBr/) </p>

# spring - spring hibernate - 共享会话beeween DAO

> ID：12316848
> 
> 赞同：0
> 
> 时间：2012-09-07T11:04:23.873
> 
> 标签：spring, hibernate

我想在我的 Web 应用程序中使用 Spring + Hibernate。我的应用程序是在没有 Spring 的情况下编写的。当调用“打开页面”操作时，我打开 Hibernate Session，将其存储在 Http Session 中并在我的 DAO 之间共享。当调用保存操作时，我使用旧会话开始事务。

但现在我想将我的旧 DAO 迁移到基于 HibernateDaoSupport 的 DAO。在这种情况下如何共享会话？如果我的 DAO 引用 beans.xml 中的一个 SessionFactory，它们会共享同一个会话吗？在这种情况下如何管理会话（打开新的或使用旧的）？

我已经编写了以下代码，但我得到了

org.hibernate.LazyInitializationException：无法初始化代理 - 没有会话

在页面 System.out.println(obj.getCategory().getName());

```
public class CategoryObjectDAOSpringImpl extends HibernateDaoSupport implements CategoryObjectDAO {

@Override
public CategoryObject get(int id) throws Exception {

    CategoryObject obj = getHibernateTemplate().get(CategoryObject.class, id);

    System.out.println(obj.getId());

    System.out.println(obj.getCategory().getName());

    for (ObjAttrCommon objAttr : obj.getAttributes()) {
        //objAttr.setSession(getSession());
        System.out.println(objAttr.getId());
    }

    return obj;
} 
```

奇怪的是，如果我添加

```
getSessionFactory().openSession(); 
```

在顶部打电话我有同样的例外。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T11:12:33.507

我认为[同样的 awswer](https://stackoverflow.com/questions/12313840/configuring-web-xml-in-a-spring-mvc-with-hibernate-project-dispatcherservlet-and/12316134#12316134)对这篇文章是有效的：

如果您的“[工作单元](http://docs.jboss.org/hibernate/orm/3.3/reference/en/html/transactions.html#transactions-basics-uow)”不能根据请求自动生成，我认为您可以使用事务在服务层中手动创建它。像这样的东西：

```
public Object serviceMethod(params) {
   TransactionTemplate transactionTemplate = getHibernateTemplate().get(CategoryObject.class, id);
   transactionTemplate.execute(new TransactionCallbackWithoutResult() {
         public void doInTransactionWithoutResult(TransactionStatus status) {
         try {
        // call your DAO's to update/delete/... and set values to service
         } catch (DAOException e) {
        LOGGER.error(e);
        throw new ServiceException(e);
         }
    }
});
} 
```

**已编辑**：异常出现在事务中。确保问题不在您的视野中。如果在使用 HibernateTemplate 检索实体后从视图访问它，它将解释 LazyException，因为当您从视图访问对象时，您的 Hibernate 会话将已经关闭。

在您在 JSP/JSF 中使用模型时，您需要扩展工作单元以涵盖所有请求上下文。您必须包含一个过滤器来管理您的 Hibernate 会话打开，即所谓的 Open Session In view Pattern，[看看这个](https://community.jboss.org/wiki/OpenSessionInView)。复制这篇文章中出现的过滤器实现并将其包含在您的应用程序中，它应该可以解决问题。

# installation - Wix Installer - 如何动态选择要在安装程序中发送的文件？

> ID：12316851
> 
> 赞同：0
> 
> 时间：2012-09-07T11:04:37.603
> 
> 标签：installation, wix, windows-installer

我们的产品可以选择连接到 SQL、MySql 和 Oracle。

我想运送连接所需的所有 dll，不管成员想要什么，但这会增加 msi 的大小。（使用 ms 构建）

我可以在 Wix 中有某种组，并且运行时根据它选择要发送的 dll 的参数吗？或者可能有多个 .wxs 文件（每个数据库驱动程序一个）和运行时决定选择哪一个？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-08T21:01:55.833

将不同数据提供者的文件组织成不同的功能。然后使用基于变量的预处理器语句在构建中包含或排除功能。最后将变量传递到 WiX 构建中进行评估。您还应该提供不同 MSI 的唯一 ProductName、ProductCode 和 PackageCode 属性。可能是相同的 UpgradeCode。您可能还需要考虑在安装程序中进行检查，以确保一次只安装一个变体，除非您安装到不同的目录并且您的组件在设计上是完全隔离的。

此外，如果三个数据提供者是您唯一的变体点，那么我想您只有 7 个变体。您可能希望预先构建这 7 个，然后将内容发布到您的分发渠道。

[预处理器](http://wix.sourceforge.net/manual-wix2/preprocessor.htm)

# javascript - 按钮方法的 Onclick 在 enyo.js 中不起作用，但在列表或中继器的加载时工作正常

> ID：12316852
> 
> 赞同：0
> 
> 时间：2012-09-07T11:04:45.483
> 
> 标签：javascript, enyo

我有repeater.js，m在其中获取加载值。这是setupItem方法..

我想在单击按钮时获得相同的值..如果列表和中继器都出现此问题...数据正在加载 onload 但在按钮上它不起作用...任何人都可以帮助...

```
enyo.kind({
    name: "enyo.sample.RepeaterSample",
    classes: "enyo-fit repeater-sample",
    components: [
        {kind: "Repeater", onSetupItem:"setupItem", components: [
            {name:"item", classes:"repeater-sample-item", components: [
                {tag:"span", name: "personNumber"},
                {tag:"span", name: "personName"}
            ]}
        ]},
        //{kind: "onyx.Button", content:"Fetch", ontap:"setupItem"}
    ],
    create: function() {
        this.inherited(arguments);
        this.$.repeater.setCount(this.people.length);
        this.peopleChanged();
    },
    published: {
        people: []
    },
    peopleChanged: function() {
        for(var i=0;i < 5;i++){
            this.people[i]="art "+i;
        }
        this.$.repeater.setCount(this.people.length);
    },
    setupItem: function(inSender, inEvent) {
        var index = inEvent.index;
        var item = inEvent.item;
        alert(this.people[index]);
        var person = this.people[index];
        //item.$.personNumber.setContent((index) + ". ");
        item.$.personName.setContent(person);
        //item.$.personName.applyStyle("color", person.sex == "male" ? "dodgerblue" :        "deeppink");
    },
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T14:59:41.167

我认为您可能会混淆这里需要发生的事情。setupItem 方法应该只被调用以响应当您对其进行 .setCount() 或 .build() 时列表抛出的 onSetupItem 事件。

因此，按钮 ontap 的处理程序应设置数组的内容，然后更改列表上的计数（使用 setCount()）或直接调用 .build()。

# events - 从 HDFS 接收文件系统事件和通知

> ID：12316855
> 
> 赞同：2
> 
> 时间：2012-09-07T11:04:58.477
> 
> 标签：events, hadoop, notifications, filesystems, hdfs

HDFS 是否提供轮询文件系统事件（如文件创建/修改/删除）的方法？此外，它是否提供/支持任何回调机制以在此类事件发生时获得通知？

我没有看到这种事情的直接和详细的用例，但是有一个特定的要求来检查这种能力。我没有遇到任何提到这一点的文档。如果有任何 HDFS 提交者对此发表评论，那就太好了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-31T00:04:39.987

目前没有内置`HDFS`的功能允许这样做。

解决方法是对监视的目录执行客户端轮询，或手动拖尾所有记录事件的事务日志。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-10-19T19:48:50.930

从 hadoop 2.7 开始，这个`INotify`库现在可以实现了。请参阅此示例：[https ://github.com/onefoursix/hdfs-inotify-example/blob/master/src/main/java/com/onefoursix/HdfsINotifyExample.java](https://github.com/onefoursix/hdfs-inotify-example/blob/master/src/main/java/com/onefoursix/HdfsINotifyExample.java)

# xml - XML 使用 XSL 合并节点内的同名元素

> ID：12316859
> 
> 赞同：2
> 
> 时间：2012-09-07T11:05:32.627
> 
> 标签：xml, xslt, merge

我有以下xml

```
<EMPLS>
 <EMPL>
    <NAME>110</NAME>
    <REMARK>R1</REMARK>
  </EMPL>
 <EMPL>
    <NAME>111</NAME>
    <REMARK>R1</REMARK>
    <REMARK>R2</REMARK>
    <REMARK>R3</REMARK>
  </EMPL>
</EMPLS> 
```

并且需要将xml转换为以下格式：

```
<EMPLS>
 <EMPL>
    <NAME>110</NAME>
    <REMARK>R1</REMARK>
  </EMPL>
 <EMPL>
    <NAME>111</NAME>
    <REMARK>R1 R2 R3</REMARK>
  </EMPL>
</EMPLS> 
```

我是 xsl 的新手，请您告知如何完成。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T11:57:16.697

**我这个 XSLT 1.0 转换**：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>
 <xsl:strip-space elements="*"/>

 <xsl:key name="kChildByName" match="EMPL/*"
  use="concat(generate-id(..), '+', name())"/>

 <xsl:template match="node()|@*">
     <xsl:copy>
       <xsl:apply-templates select="node()|@*"/>
     </xsl:copy>
 </xsl:template>

  <xsl:template match="EMPL/*" priority="0"/>

 <xsl:template match=
 "EMPL/*
     [generate-id()
     =
      generate-id(key('kChildByName',
                       concat(generate-id(..), '+', name())
                      )[1]
                  )
      ]">
  <xsl:copy>
   <xsl:for-each select="key('kChildByName',
                             concat(generate-id(..), '+', name())
                         )">
    <xsl:if test="not(position()=1)"><xsl:text> </xsl:text></xsl:if>
    <xsl:value-of select="."/>
   </xsl:for-each>
  </xsl:copy>
 </xsl:template>
 <xsl:template match="EMPL/*" priority="0"/>
</xsl:stylesheet> 
```

**当应用于提供的 XML 文档时**（已从众多畸形中纠正）：

```
<EMPLS>
 <EMPL>
    <NAME>110</NAME>
    <REMARK>R1</REMARK>
  </EMPL>
 <EMPL>
    <NAME>111</NAME>
    <REMARK>R1</REMARK>
    <REMARK>R2</REMARK>
    <REMARK>R3</REMARK>
  </EMPL>
</EMPLS> 
```

**产生想要的正确结果**：

```
<EMPLS>
   <EMPL>
      <NAME>110</NAME>
      <REMARK>R1</REMARK>
   </EMPL>
   <EMPL>
      <NAME>111</NAME>
      <REMARK>R1 R2 R3</REMARK>
   </EMPL>
</EMPLS> 
```

**说明**：

1.  正确使用和覆盖**[身份规则](http://www.dpawson.co.uk/xsl/sect2/identity.html)**。

2.  正确使用**[Muenchian 分组方法](http://www.jenitennison.com/xslt/grouping/muenchian.html)**和复合键。

* * *

**二、XSLT 2.0 解决方案：**

```
<xsl:stylesheet version="2.0"   xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
    <xsl:output omit-xml-declaration="yes" indent="yes"/>

 <xsl:template match="node()|@*">
     <xsl:copy>
       <xsl:apply-templates select="node()|@*"/>
     </xsl:copy>
 </xsl:template>

 <xsl:template match="EMPL">
  <xsl:copy>
    <xsl:for-each-group select="*" group-by="name()">
     <xsl:copy>
       <xsl:value-of select="current-group()" separator=" "/>
     </xsl:copy>
    </xsl:for-each-group>
  </xsl:copy>
 </xsl:template>
</xsl:stylesheet> 
```

**说明**：

1.  正确使用**[`<xsl:for-each-group>`](http://www.w3.org/TR/2007/REC-xslt20-20070123/#xsl-for-each-group)**.

2.  正确使用**[`current-group()`](http://www.w3.org/TR/2007/REC-xslt20-20070123/#function-current-group)**功能。

# c - C 编程数据输入错误

> ID：12316860
> 
> 赞同：0
> 
> 时间：2012-09-07T11:05:34.937
> 
> 标签：c, for-loop, struct, fgets, gets

我写这篇文章是为了获取学生信息（最后 3 个学期的全名、id 和 gpa，所以我使用结构和 for 循环来插入信息，但是，在第一次执行 for 循环之后（这意味着学生 2 ）我的第一个和第二个输入一起显示在屏幕上。我怎样才能以一种简单易懂的方式防止这种情况发生？（ PS：我已经尝试将 getchar(); 放在 for 循环的末尾并且它起作用了，但是；我不应该使用它，因为我们还没有在课堂上学习过）

我的错误发生的c程序部分：

```
 #include <stdio.h>

struct Student {
  char name[30];
  int id;
  float gpa[3];
};

float averageGPA ( struct Student [] );

int main()
{
  int i;
  float average;
  struct Student studentlist[10];
  i=0;

  for (i; i<10; i++)
  {
     printf("\nEnter the Student %d full name: ", i+1);
     fgets(studentlist[i].name, 30, stdin);
     printf("Enter the Student %d ID: ", i+1);
     scanf("\n %d", &studentlist[i].id);
     printf("Enter the Student %d GPA for the 1st trimester: ", i+1);
     scanf("%f", &studentlist[i].gpa[0]);
     printf("Enter the Student %d GPA for the 2nd trimester: ", i+1);
     scanf("%f", &studentlist[i].gpa[1]);
     printf("Enter the Student %d GPA for the 3rd trimester: ", i+1);
     scanf("%f", &studentlist[i].gpa[2]);
  }

  average = averageGPA(studentlist);

  printf("\n\nThe average GPA is %.2f", average); 

  return 0;
}

float averageGPA (struct Student studentlist[])
{
  int i;
  float total = 0.0, average = 0.0;
  for (i=0; i<10; i++)
  {
    total =  studentlist[i].gpa[0] + studentlist[i].gpa[1] + studentlist[i].gpa[2]; 
  }

  average = total / 30 ;
  return average;
} 
```

电脑输出：

```
Enter the Student 1 full name: mm

Enter the Student 1 ID: 12

Enter the Student 1 GPA for the 1st trimester: 3

Enter the Student 1 GPA for the 2nd trimester: 4

Enter the Student 1 GPA for the 3rd trimester: 3

Enter the Student 2 full name: Enter the Student 2 ID: <<<<< Here is the problem!! 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T11:08:24.873

尝试在最后一个之后吃换行符`scanf`：

```
scanf("%f ", &studentlist[i].gpa[2]);
         ^ 
```

这非常像您的`getchar`解决方案。它实际上优于`getchar`，因为它只丢弃空格。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-07T11:10:22.330

但是你必须使用`getchar()`丢弃在你的 last 之后仍然在输入缓冲区中的换行符`scanf("%f")`，它根据给定的格式转换一个浮点数并将所有其他字符留在缓冲区中。

如果您不能使用，请在循环结束时`getchar()`使用另一个.. 但当然会更好`fgets()``getchar()`

编辑解释：每当您在键盘上键入字符时，都会进入一个输入缓冲区，等待您的应用程序处理。getchar() 只是从这个缓冲区“消耗”一个字符（返回它），如果缓冲区为空，则等待一个有效的字符。scanf("%f") 仅“消耗”字符，导致浮点数。因此，当您键入“5.12<enter>”时，scanf 会从缓冲区“5.12”中读取并删除，留下“<enter>”。所以下一个 fgets() 已经在缓冲区中找到了换行符并立即返回；这就是为什么你应该使用 getchar(): 忽略它的返回值，你成功地从缓冲区中丢弃“<enter>”。最后请注意，如果缓冲区中只有"<enter>"，scanf("%f"

最后一点：输入流由您的操作系统默认策略缓冲，因为在您键入“<enter>”之前应用程序不会接收任何字符。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-07T11:09:25.840

通过以下方式使用 scanf 读取学生姓名：

```
scanf(" %[^\n]",studentlist[i].name); 
```

格式说明符中的第一个空格很重要。它否定先前输入的换行符。顺便说一句，格式指示读取直到遇到换行符 (\n)。

**[编辑：应要求添加解释]**

接受字符串的格式说明符是`%s`. 但它只允许您输入非空白字符。另一种方法是在方括号内指定可接受的（或不可接受的，基于场景）的字符。

在方括号内，您可以指定单个字符、范围或这些字符的组合。要指定要排除的字符，请以插入符号 (^) 开头。

因此，`%[a-z]`这意味着 a 和 z 之间的任何字符（都包括在内）将被接受

在您的情况下，我们需要接受除换行符以外的每个字符。所以我们想出了说明符`%[^\n]`

您将从网上获得有关这些说明符的更多信息。为方便起见，这里有一个链接：http: [//beej.us/guide/bgc/output/html/multipage/scanf.html](http://beej.us/guide/bgc/output/html/multipage/scanf.html)

开头的空间实际上“消耗”了之前输入留下的任何前面的空白。您可以在此处参考答案以获取详细说明：[scanf: "%[^\n]" 跳过第二个输入，但 " %[^\n]" 不跳过。为什么？](https://stackoverflow.com/questions/6083045/scanf-n-skips-the-2nd-input-but-n-does-not-why)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-07T11:24:18.420

我只想对 scanf() 说不。对所有输入字段使用 fgets() 并使用 atoi() 和 atof() 转换为数字。

# caching - TYPO3 - 在文件名中编码缓存参数

> ID：12316861
> 
> 赞同：1
> 
> 时间：2012-09-07T11:05:45.910
> 
> 标签：caching, proxy, typo3, cache-control

我读过一些代理不使用“？”缓存资源。在他们的 URL 中查询。[参考](https://developers.google.com/speed/docs/best-practices/caching#LeverageProxyCaching)

有没有办法让参数成为文件名的一部分？

（我猜这意味着将 style.css?v=123456 变成 style.123456.css）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T11:35:10.047

是的 - 有这样的参数称为：**versionNumberInFilename**。您可以在 InstallTool->All Configuration 或在typo3conf/localconf.php 中手动设置它们

Take care that there is such parameter for BE (backend) and separete for FE (frontend)

For backend you need to set it to "1". So finally in you typo3conf/localconf.php file there will be added line:

```
$TYPO3_CONF_VARS['BE']['versionNumberInFilename'] = '1' 
```

For frontend you need to set it to "embed". So finally in you typo3conf/localconf.php file there will be added line:

```
$TYPO3_CONF_VARS['FE']['versionNumberInFilename'] = 'embed'; 
```

Then make sure the lines below are in your .htaccess so the files with numbers inside are properly resolved. In the latest versions of TYPO3 its by default active.

```
# Rule for versioned static files, configured through:
# - $TYPO3_CONF_VARS['BE']['versionNumberInFilename']
# - $TYPO3_CONF_VARS['FE']['versionNumberInFilename']
# IMPORTANT: This rule has to be the very first RewriteCond in order to work!
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.+)\.(\d+)\.(php|js|css|png|jpg|gif|gzip)$ $1.$3 [L] 
```

# c++ - 优化开关——它们的真正作用是什么？

> ID：12316863
> 
> 赞同：4
> 
> 时间：2012-09-07T11:05:50.160
> 
> 标签：c++, visual-c++, gcc, clang

可能每个人都使用某种优化开关（在 gcc 的情况下，我相信最常见的是*-O2 ）。*

但是 gcc（以及其他编译器，如 VS、Clang）在存在这些选项的情况下**真正做了什么？**

当然没有明确的答案，因为它很大程度上取决于平台、编译器版本等。但是，如果可能的话，我想收集一套“经验法则”。我什么时候应该考虑一些技巧来加速代码，什么时候应该把工作留给编译器？

例如，对于不同的优化级别，编译器在这种（有点人为的......）情况下会走多远：

1) `sin(3.141592)` // 会在编译时进行评估，还是我应该考虑一个查找表来加速计算？

2) `int a = 0; a = exp(18), cos(1.57), 2;` // 编译器是否会计算 exp 和 cos，尽管不需要，因为表达式的值等于 2？

3)

```
for (size_t i = 0; i < 10; ++i) {
  int a = 10 + i;
} 
```

// 编译器会跳过整个循环，因为它没有可见的副作用吗？

也许你可以想到其他的例子。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-07T11:27:44.670

如果您想知道编译器的作用，最好的办法是查看编译器文档。对于优化，您可以查看[LLVM 的 Analysis and Transform Passes](http://llvm.org/docs/Passes.html)例如。

> 1) sin(3.141592) // 是否会在编译时进行评估？

大概。IEEE 浮点计算有非常精确的语义。顺便说一句，如果您在运行时更改处理器标志，这可能会令人惊讶。

> 2) int a = 0; a = exp(18), cos(1.57), 2;

这取决于：

*   函数`exp`和`cos`是否内联
*   如果不是，它们是否正确注释（因此编译器知道它们没有副作用）

对于取自 C 或 C++ 标准库的函数，应正确识别/注释它们。

至于消除计算：

*   `-adce`: 积极的死代码消除
*   `-dce`: 死代码消除
*   `-die`: 死指令消除
*   `-dse`: 死店消除

编译器喜欢寻找无用的代码 :)

> 3)

与`2)`实际相似。不使用存储的结果并且表达式没有副作用。

*   `-loop-deletion`: 删除死循环

最后：什么不对编译器进行测试？

```
#include <math.h>
#include <stdio.h>

int main(int argc, char* argv[]) {
  double d = sin(3.141592);
  printf("%f", d);

  int a = 0; a = (exp(18), cos(1.57), 2); /* need parentheses here */
  printf("%d", a);

  for (size_t i = 0; i < 10; ++i) {
    int a = 10 + i;
  }

  return 0;
} 
```

Clang 在编译过程中已经尝试提供帮助：

```
12814_0.c:8:28: warning: expression result unused [-Wunused-value]
  int a = 0; a = (exp(18), cos(1.57), 2);
                           ^~~ ~~~~
12814_0.c:12:9: warning: unused variable 'a' [-Wunused-variable]
    int a = 10 + i;
        ^ 
```

以及发出的代码（LLVM IR）：

```
@.str = private unnamed_addr constant [3 x i8] c"%f\00", align 1
@.str1 = private unnamed_addr constant [3 x i8] c"%d\00", align 1

define i32 @main(i32 %argc, i8** nocapture %argv) nounwind uwtable {
  %1 = tail call i32 (i8*, ...)* @printf(i8* getelementptr inbounds ([3 x i8]* @.str, i64 0, i64 0), double 0x3EA5EE4B2791A46F) nounwind
  %2 = tail call i32 (i8*, ...)* @printf(i8* getelementptr inbounds ([3 x i8]* @.str1, i64 0, i64 0), i32 2) nounwind
  ret i32 0
} 
```

我们注意到：

*   正如预测的那样，`sin`计算已在编译时解决
*   正如预测的那样，`exp`并且`cos`已被完全剥离。
*   正如预测的那样，循环也被剥离了。

如果您想更深入地研究编译器优化，我鼓励您：

*   学习阅读 IR（这非常容易，真的，组装起来要简单得多）
*   使用 LLVM 试用页面来测试您的假设

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-07T12:13:24.523

编译器有许多优化通道。每个优化过程都负责一些小的优化。例如，您可能有一个在编译时计算算术表达式的过程（例如，您可以将 5MB 表示为 5 * (1024*1024) 而不会受到惩罚）。另一个传递内联函数。另一个搜索无法访问的代码并将其杀死。等等。

编译器的开发人员然后决定他们希望以何种顺序执行这些传递中的哪些。例如，假设您有以下代码：

```
int foo(int a, int b) {
  return a + b;
}

void bar() {
  if (foo(1, 2) > 5)
    std::cout << "foo is large\n";
} 
```

如果您对此运行死代码消除，则不会发生任何事情。同样，如果您运行表达式缩减，则不会发生任何事情。但是内联器可能会认为 foo 小到可以内联，所以它用函数体替换 bar 中的调用，替换参数：

```
void bar() {
  if (1 + 2 > 5)
    std::cout << "foo is large\n";
} 
```

如果现在运行表达式归约*，*它将首先确定 1 + 2 为 3，然后确定 3 > 5 为假。所以你得到：

```
void bar() {
  if (false)
    std::cout << "foo is large\n";
} 
```

*现在*死代码消除将看到一个 if(false) 并杀死它，所以结果是：

```
void bar() {
} 
```

但是现在bar突然变得非常小了，之前它更大更复杂。因此，如果您再次运行内联程序，它将能够将 bar 内联到其调用者中。这可能会带来更多的优化机会，等等。

对于编译器开发人员来说，这是编译时间和生成代码质量之间的权衡。他们根据启发式、测试和经验决定要运行的优化器序列。但是由于一种尺寸并不适合所有尺寸，因此它们会暴露一些旋钮来调整它。gcc 和 clang 的主要旋钮是 -O 选项系列。-O1 运行一个简短的优化器列表；-O3 运行更长的列表，其中包含更昂贵的优化器，并且更频繁地重复传递。

除了决定运行哪些优化器之外，这些选项还可以调整各种通道使用的内部启发式方法。例如，内联器通常有很多参数来决定何时值得内联一个函数。通过 -O3，只要有可能提高性能，这些参数就会更倾向于内联函数；传递 -Os，参数只会导致非常小的函数（或可证明只调用一次的函数）被内联，因为其他任何东西都会增加可执行文件的大小。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-07T11:12:57.650

编译器会执行您无法想到的各种优化。尤其是 C++ 编译器。

他们做一些事情，比如展开循环、使函数内联、消除死代码、用一条指令替换多条指令等等。

我可以给出的一条建议是：在 C/C++ 编译器中，您可以相信它们会执行**很多**优化。

看看[1]。

[1] [http://en.wikipedia.org/wiki/Compiler_optimization](http://en.wikipedia.org/wiki/Compiler_optimization)

# c# - 按类型对对象的属性进行分组

> ID：12316878
> 
> 赞同：0
> 
> 时间：2012-09-07T11:07:04.387
> 
> 标签：c#, asp.net-web-api

我正在使用 WebAPI 开发服务，并且需要将一个客户端对象传递给我的 API，并将属性分组到各个类型的存储桶中。

所以我的数据合同看起来像

```
public class MyObject
{
   public string SourceId { get; set; }
   List<KeyValuePair<string, string>> StringValuedProperties { get; set; }
   List<KeyValuePair<string, int>> IntegerValuedProperties { get; set; }
   List<KeyValuePair<string, DateTime>> DateTimeValuedProperties { get; set; }
} 
```

我需要将属性分组到特定类型的存储桶中并解释它需要一篇文章，这是有充分理由的：）

只是想知道是否有人以前以更好的方式做到了这一点，还是这是唯一的方法？

# ios - 超过查询限制的 Google Places api

> ID：12316881
> 
> 赞同：0
> 
> 时间：2012-09-07T11:07:10.097
> 
> 标签：ios, google-maps-api-3, uitableview

我正在 iPhone 中开发一个应用程序，其中我在 tableview 中显示位置列表。

我想在单元格中显示该地点与用户当前位置的距离。为了找到距离，我使用的是 Google api，并且我已经编写了代码来查找单元格本身的距离。

tableview 中有 20 行，因此 Google Web 服务被调用了 20 次，这就是它给出 OVER QUERY LIMIT 响应的原因。

为了克服这个问题，我也使用过`NSOperationQueue`，但这也不起作用。Google api 仍然给出 OVER QUERY LIMIT 响应。

有谁知道如何克服这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T11:11:50.610

不要使用 Google API 来计算距离。代替 Google 使用 iOS 的 CLLocation。

看看[CLLocation Class Reference](https://developer.apple.com/library/ios/#documentation/CoreLocation/Reference/CLLocation_Class/CLLocation/CLLocation.html)，并使用：

```
- (CLLocationDistance)distanceFromLocation:(const CLLocation *)location 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T12:16:40.617

Google Places API 对您每天可以发出的请求数量有限制（[更多信息请点击此处](https://developers.google.com/places/policies#usage_limits)）。因此，在通话之间增加延迟并没有真正的帮助。

如果您有两个点的纬度/经度，您可以使用[Haversine 公式](http://en.wikipedia.org/wiki/Haversine_formula)计算距离或使用核心位置。

# c# - 标头命名空间不匹配问题

> ID：12316884
> 
> 赞同：4
> 
> 时间：2012-09-07T11:07:26.727
> 
> 标签：c#, .net, wcf

我有一个使用 WCSF Blue 从 XSD 生成的 wsdl。我正在使用来自控制台应用程序客户端的服务。我收到以下异常（SOAP？）。wsdl 有什么问题？我们怎样才能纠正它？

> RestaurantService.AddRestaurant 类型的成员 UserCredentials 中的标头命名空间不匹配。
> 
> 描述中的标头命名空间是 urn:thinktecture-com:demos:restaurantservice:headerdata:v1。
> 
> 格式化器推导出的元素命名空间为urn:thinktecture-com:demos:restaurantservice:wsdl:v1。
> 
> 如果在 XmlElementAttribute 或 XmlArrayAttribute 中指定的命名空间与在 MessageHeaderAttribute 或 MessageHeaderArrayAttribute 或合同命名空间中指定的命名空间不匹配，则可能会发生这种不匹配。

WSDL

![在此处输入图像描述](../Images/6d37e7bb947d50c248cc878c8fe2c47d.png)

标题数据

![在此处输入图像描述](../Images/2769ed2394987dfb8cab05671c2f6168.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T06:48:43.650

我打算使用以下方法：

1.  [验证400 Bad Request Exception: Simple SOAP WCF service with small data](https://stackoverflow.com/questions/12410947/400-bad-request-exception-simple-soap-wcf-service-with-small-data)中提到的所有内容

服务代码是使用工具（WCSF 蓝色）从 wsdl 生成的。使用该服务，生成 wsdl 时略有不同。所以，

2.  尝试使用浏览svc文件得到的wsdl创建客户端。在这个新客户端的配置文件中引用端点地址。验证我们客户的地址是否与该客户的地址相同。

# asp.net - 各种网站/应用程序 - 改变架构

> ID：12316895
> 
> 赞同：0
> 
> 时间：2012-09-07T11:07:53.300
> 
> 标签：asp.net, asp.net-mvc, computer-architecture

我有许多网站和基于 Web 的应用程序在专用 Web 服务器上运行。同一个盒子目前也运行数据库（这不太可能改变。）

我注意到我在不同项目中遇到的需求经常相互重复。所以，虽然我很安静，但我正在尝试重新规划各个站点的架构。

理想情况下，我想将重复的功能（登录、一些用户报告、错误报告等）提取到一个核心库中，这让我开始思考。

如果我制作了一个核心程序集，并将其添加到每个网站的 bin 中，那么它将与应用程序配置文件中的任何数据库进行通信。但是当事情发生变化时，这让我对版本控制/维护感到头疼。

我可以将这个核心库放在 GAC 中，这意味着我需要注册/取消注册它，但所有应用程序都可以根据需要包含和使用它。

或者我可以看到的第三种方法是使用 WCF Web 服务并向我的应用程序添加另一个内部层，在那里他们将核心工作移交给一组单独的 Web 服务。这样做的好处是，如果/当我们扩展时，所有接口都可以保留为一组 web 服务，让我的应用程序只进行 http 或 tcp 调用，而不必担心移动 bin 文件或 gac'ed 程序集。

基本上我在这里看看是否有人对这两种方法有任何想法/评论/批评，因为我不想开始走一条路然后不得不重新走另一条路，因为墨菲法规定它会出错就像我们有一项重要工作一样:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T11:20:28.573

我建议根据需要使用该库作为参考（因此它位于应用程序的 bin 中）。

如果您需要对其中一份报告稍作改动怎么办？进行更改后，您是否计划对所有现有应用程序进行回归测试？
保留 dll 的不同副本允许您在必要时对其进行升级。
确保您可以找出哪个应用程序正在运行哪个版本的 dll。

从维护的角度来看，您并不总是希望更改有效的方法。
“会出错的，就会出错”，所以要限制可能出错的区域。

# select - 选择具有 id 的组的最小值

> ID：12316897
> 
> 赞同：0
> 
> 时间：2012-09-07T11:08:03.210
> 
> 标签：select, group-by, min

考虑以下代码：

```
DECLARE @table AS TABLE
  (
    id INT IDENTITY ,
    DATA VARCHAR(100) ,
    code CHAR(1)
  )

INSERT  INTO @table
        ( data, code )
VALUES  ( 'xasdf', 'a' ),
        ( 'aasdf', 'a' ),
        ( 'basdf', 'a' ),
        ( 'casdf', 'b' ),
        ( 'Casdf', 'c' ),
        ( NULL, NULL ) 
```

我需要获得按代码分组的最少数据的行。我可以在没有嵌套查询的情况下执行此操作吗？

基本上，我想要的是这样的：

```
SELECT TOP ( 1 )
        id ,
        MIN(data)
FROM    @table
GROUP BY code 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T15:36:21.697

SELECT * (SELECT ROW_NUMBER() OVER(PARTITION BY code ORDER BY code DESC,data DESC) AS Row, id,DATA,code FROM @table) T where T.Row = 1

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T15:52:14.623

最简洁的答案是不。这是不可能的。

# struts2 - 使用应用程序感知在 struts2 标记中设置日期格式

> ID：12316899
> 
> 赞同：1
> 
> 时间：2012-09-07T11:08:10.470
> 
> 标签：struts2

要求是管理员将根据此选择从列表中选择日期格式，例如（“dd-MM-yyyy”，“d MMM yyyy”），所有要显示的日期都应与选择一致。

由于此设置应适用于整个应用程序，因此我尝试使用应用程序感知将其保存在应用程序范围中。我能够保存，但问题是在尝试实施更改时

方法

```
GlobelSetting global = new GlobelSetting();
global.setFormatDate("dd-MM-yyyy");
applicationMap.put("dateFormat", global.getFormatDate()); 
```

现在尝试在日期标签中设置日期格式

```
<td align="left"> 
 <s:date name="employee.dateCreated" format="#application.dateFormat"/></td> 
```

但我在显示错误时遇到错误是

```
java.lang.IllegalArgumentException: Illegal pattern character 'p' 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T12:46:57.970

“格式”属性需要强制评估：

```
<s:date name="employee.dateCreated" format="%{#application.dateFormat}" /> 
```

# php - PHP echo 返回确认函数斜杠

> ID：12316907
> 
> 赞同：1
> 
> 时间：2012-09-07T11:08:45.857
> 
> 标签：php, javascript

嗨我一直在使用这个 php echo 语句

```
echo "<a href = 'message_delete_script_outbox.php?id=".$row['id']."'"."onclick='return        
confirm(/Are you sure, you want to delete?/)'>Delete</a>"; 
```

该声明正在运行我看到此消息/您确定，您要删除吗？/而不是此您确定，您要删除吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-07T11:10:01.733

您的报价嵌套有点混乱。尝试遵循以下规则：

*   外引号 = `"`（这标志着字符串的开始和结束）
*   内引号= `\"`（转义为不标记“字符串开头/结尾”）
*   三级报价= `'`（字面报价）
*   第四层引用= `\'`（将作为转义的外部引用生成的文字引用）

结果：

```
echo "<a href=\"message_delete_script_outbox.php?id=".$row['id']."\"onclick=
      \"return confirm('Are you sure, you want to delete?')\">Delete</a>"; 
```

有关报价嵌套的更多信息：http: [//blog.opensourceopportunities.com/2007/10/nested-nested-quotes.html](http://blog.opensourceopportunities.com/2007/10/nested-nested-quotes.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-07T11:10:48.557

您将消息括在引号中，这些引号需要转义以避免混淆 PHP 脚本：

```
echo "<a href = 'message_delete_script_outbox.php?id=".$row['id']."'"."onclick='return        
confirm(\"Are you sure, you want to delete?\")'>Delete</a>"; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-07T11:11:21.433

只需添加双引号并转义它们

```
echo "<a href = 'message_delete_script_outbox.php?id=".$row['id']."' onclick='return confirm(\"Are you sure, you want to delete?\")'>Delete</a>"; 
```

我不确定您在此处发布时是否添加了新行，但您应该知道您不能将该脚本放在 2 行上。

# xml - XSL 转换变得疯狂

> ID：12316908
> 
> 赞同：1
> 
> 时间：2012-09-07T11:08:49.687
> 
> 标签：xml, xslt, transformation

我的 xsl 转换出现问题，我看不到问题（是的，新手）。

我有一个xml：

```
<REG_REQUEST>
    <header>
        <version/>
        <!-- many tags here -->

        <ref_dtls>
            <ref_doc_num>000111222</ref_doc_num>
            <ref_doc_date>01.01.2000</ref_doc_date>
            <ref_name>Hello world!</ref_name>
        </ref_dtls>
    </header>

    <general_info>
        <dfiState>AGRM</dfiState>
    </general_info>

    <add_info>some additional info here</add_info>
    <!-- many more tags here -->
</REG_REQUEST> 
```

和一个xsl：

```
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="1.0">  
    <xsl:output method="html" encoding="utf-8"/>

    <xsl:template match="header">
         <!-- template contents -->
    </xsl:template>
</xsl:stylesheet> 
```

模板本身可以很好地打印，但之后它还会打印 xml 属性的所有值的列表。该模板仅包含一些 html 代码输出。我无法弄清楚为什么会这样。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-07T11:18:52.677

这是因为在未提供特定模板时使用的内置模板。这些如下：

*   对于一个元素，处理它的节点子节点
*   对于文本节点，给出它的值

您尚未为**REG_REQUEST**提供模板，因此内置模板将处理其子项。您有一个用于**标头**的模板，因此可以按预期工作，但没有用于**REG_REQUEST**其他子项的模板。这意味着默认行为启动，最终元素和属性的文本值得到输出。

解决方案是添加一个模板来匹配**REG_REQUEST**的其他子项并忽略它们，这样就不会对元素进行进一步处理

```
<xsl:template match="REG_REQUEST/*[not(self::header)]" /> 
```

**这将导致除标题**之外的所有其他元素被忽略。

# clearcase - 如何解决 mkorder 错误：存储并转发服务器 clearcase？

> ID：12316909
> 
> 赞同：1
> 
> 时间：2012-09-07T11:08:49.773
> 
> 标签：clearcase

您将如何解决多站点错误消息：

```
---- NOTE: consult log file (/var/adm/rational/clearcase/log/shipping_server_log) for errors.
mkorder(2232326): Error: Store-and-forward server "/opt/rational/clearcase/etc/shipping_server" failed with status 1 
```

因此，我们无法同步 vob。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T11:35:23.463

确保在此之后检查日志和*以下*错误消息。
如“[删除默认存储类](http://www-01.ibm.com/support/docview.wss?uid=swg21247712)”中所见，该错误消息后面可能是实际原因。

[“ shipping_server RPC 无法将数据包发送到存储和转发主机](http://www-01.ibm.com/support/docview.wss?uid=swg21429858)”中描述的一种可能原因：

> 使用的 DNS 算法存在缺陷。
> 当 VOB 服务器启动导出时，会向本地 DNS 服务器发送一个请求，以获取有关目标可达性的信息。
> 如果 DNS 服务器很忙或响应时间过长，那么即使运输服务器能够转发它们，数据包也会停滞在传出托架中。

# ruby-on-rails - Nic 编辑：不工作的要点

> ID：12316915
> 
> 赞同：2
> 
> 时间：2012-09-07T11:09:06.180
> 
> 标签：ruby-on-rails, ruby-on-rails-3, nicedit

我在我的 rails 项目中使用了“Nic Edit”。

项目符号点（ol 和 ul）不起作用。

我检查了 nicEDIT.js.erb

它在按钮列表中。

Bold ， Italic 和其他人正在工作，除了这个 'ol' 和 'ul' 。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-13T10:16:52.627

我有解决办法。那是一个 CSS 问题。这两个类解决了问题

```
.nicEdit-main ol{ list-style:inside; list-style-type: decimal; }
.nicEdit-main ul{ list-style: inside; list-style-type: circle; } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-07T12:57:19.803

很可能你有一个 CSS 样式正在改变这些。

检查您的 css 样式以了解对 ul/ol 的任何更改。

# android - Android - 在未运行时处理应用程序连接更改

> ID：12316916
> 
> 赞同：0
> 
> 时间：2012-09-07T11:09:08.380
> 
> 标签：android, android-activity, android-lifecycle, connectivity

我在我的应用程序中扩展了 Application 类。在那个类中，我有一个等待连接更改的 BroadcastReceiver。如果完全连接丢失，我将显示特定活动。但是，如果应用程序不是“焦点”（不在前台），我不想显示该活动。

但是，Application 类没有 onPause 或 onResume 方法。仅当应用程序正在运行时，我如何才能显示此活动？我是否必须在我的所有活动中都有一个 BroadcastReceiver（其中有很多，我不能为所有活动创建扩展活动，因为它们扩展了不同的活动类（活动、ListActivity、FragmentActivity 等）。 **是吗？当且仅当应用程序的活动之一在前台时，是否可能只有一个 BroadcastReceiver 采取行动？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T12:40:59.080

我会说在您的自定义 Application 类中注册 BroadcastReceivers 是一种反模式。例如，您何时取消注册该接收器？正如您所提到的，Application 类缺少 Activity 具有的生命周期回调（至少其中大部分）。

在您的情况下，我将在 onResume() 回调中的所有活动中注册动态处理连接更改的接收器，并在 onPause() 回调中取消注册它们。很有可能，您的所有活动都可以扩展 FragmentActivity：ListAcitivity 只是一个辅助类，您可以轻松地自己处理所有与列表相关的东西，而 FragmentActivity 只是扩展了基本的 Activity 类。

因此，我建议为您的活动创建一个自定义基类来处理接收器注册，它扩展了 FragmentActivity。你所有的具体活动类都应该扩展这个基类。

# .htaccess - 哪个优先：读取 .htaccess 或 301 重定向？

> ID：12316920
> 
> 赞同：1
> 
> 时间：2012-09-07T11:09:19.263
> 
> 标签：.htaccess, redirect

我的 .htaccess 文件中有以下几行：

```
 #redirect A
    RewriteCond %{DOCUMENT_ROOT}/partners/$1/index.shtml -f
    RewriteRule ^(.*) /partners/$1/ [R=301,L] 
```

这些行检查目录是否存在，如果存在则重定向用户。

```
 #redirect B
    RewriteCond %{DOCUMENT_ROOT}/partners/$1/index.shtml !-f
    RewriteRule ^(.*) /partners/default.php?code=$1 [R=301,L] 
```

同样，这些行检查目录是否不存在，如果找不到该目录，则将用户重定向到其他地方。

这是发生了什么：假设我访问`www.example.com/andyf`并且`andyf`目录中不存在该文件夹`partners`，然后我被带到`www.example.com/partners/default.php?code=andyf`

到目前为止，一切都很好。

但是，如果`andyf`稍后创建目录，我仍然会被带到该`default.php`页面，即使现在存在正确的目录。这取决于已实施的 301 重定向。

让我感到困惑的是，如果[在每个请求上都读取](http://en.wikipedia.org/wiki/Htaccess#Advantages).htaccess 文件，那么为什么重定向 A 不覆盖重定向 B？还是像我怀疑的那样，在读取 .htaccess 文件之前发生了 301 重定向？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-08T10:04:23.537

似乎这只是缓存的问题，如果您清除缓存，它将按预期工作。

# apache-flex - Flex 中的帧精确视频

> ID：12316923
> 
> 赞同：0
> 
> 时间：2012-09-07T11:09:22.950
> 
> 标签：apache-flex

我正在一个项目中工作，我必须逐帧移动我的视频播放器，我们的 flex 人员开发了一个播放器，用于播放视频，他们使用 NetStream.resume() 方法播放视频对象。现在我必须得到所有视频中的帧，以便当用户执行下一个或上一个时，我可以移动到特定的帧。为此，我计划将整个 NetStream 放入一个字节数组并填充每一帧，其中我的每一帧都是一个字节数组，我可以逐帧播放每一帧，但无法获取 NetStream 对象中的字节，任何人都可以建议如何获得？

谢谢 Sougata

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T09:06:44.703

不确定是否将 NetStream 数据放入 byteArray。但最容易移动到特定帧的是 NetStream.seek() 方法。此方法查找最接近指定位置的关键帧，因此您始终可以查找下一个或上一个。

*   注意：此方法以秒为单位进行搜索。
*   您可以在[控制视频播放中阅读更多信息](http://help.adobe.com/en_US/as3/dev/WS5b3ccc516d4fbf351e63e3d118a9b90204-7d4d.html)

# php - 如何从 HTML 表中删除记录？

> ID：12316929
> 
> 赞同：0
> 
> 时间：2012-09-07T11:09:41.870
> 
> 标签：php

到目前为止我有这个代码：这个表单是在查询循环期间生成的

```
 while ($row = mysql_fetch_assoc($result)) {
  echo "<tr>";
  echo "<td>" . $row['name'] . "</td>";
  echo "<td>" . $row['age'] . "</td>";
  echo "<td>" . $row['breed'] . "</td>";
  if($row['neuteredOspayed']=="1"){
  echo "<td>" . "neutered" . "</td>";
  }else
  echo "<td>" . "spayed". "</td>";
  echo "<td>" . $row['priceFee'] . "</td>";
  if($row['housebroken']=="1"){
  echo "<td>" . "yes" . "</td>";
  }else
  echo "<td>" . "no". "</td>";
  if($row['goodwithdogs']=="1"){
  echo "<td>" . "yes" . "</td>";
  }else
  echo "<td>" . "no". "</td>";
  if($row['goodwithcats']=="1"){
  echo "<td>" . "yes" . "</td>";
  }else
  echo "<td>" . "no". "</td>";
  echo "<td>" . $row['status'] . "</td>";
  echo "</tr>";
  }
echo "</table>"; 
```

现在，有没有办法在每个结果旁边放置一个“删除”链接？例如在状态字段旁边？这是它的样子：![在此处输入图像描述](../Images/3b9e4ff6acf0038a4edb749cf412024f.png)

要删除它，我想我需要以某种方式发现记录。我需要的是取动物的名字。例如，如何从表中获取值“Sparky”并将其分配给变量？如果我有名字，我将能够进行检查并运行查询，女巫将删除记录。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T11:12:43.203

您将不得不使用 Javascript 和 AJAX。

基本上，您需要在单元格中放置一个按钮，每行一个，当单击它时，通过 AJAX 将要删除的记录的 id 传递回 PHP 脚本，然后从数据库中删除记录。它还应该在单击时隐藏该行。

我建议使用 jQuery 的[.ajax()](http://api.jquery.com/jQuery.ajax/)，因为原始 XHR 充其量是痛苦的。

仅使用 PHP 无法做到这一点，因为 HTTP 是无状态的。加载网页后，HTML 和 PHP 部分就完成并修复了。您必须使用 Javascript 来发出连续的请求。

或者，正如 bcmcfc 指出的那样，您也可以只拥有一个指向脚本的超链接，该脚本将从您的数据库中删除一条记录。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-07T11:13:54.243

在你的 while 循环中你需要这样的东西：

```
echo '<td><a href="path/to/delete.php?name='.$row['name'].'">Delete</a></td>'; 
```

使用表的主键会比名称更好 - 名称在数据库中是唯一的吗？假设有一个PK，它被称为`id`：

```
echo '<td><a href="path/to/delete.php?id='.$row['id'].'">Delete</a></td>'; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-07T11:15:46.567

php 只是用于页面生成，一旦你生成了那个表，你就不能修改它。但是，您可以发出新的 get 请求，指定带有要删除的行名的参数，但是您必须更改服务器 php 代码以考虑此参数。

根据我的说法，最好的方法是使用 javascript：为每一行分配一个 td id，然后编写一个简单的函数来删除该行。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-07T11:17:36.870

您必须提交表单并执行此操作....

```
<input type="submit" name="submit" value="Delete" /> 
```

提交后，表单将重定向到某个页面。在该页面中，您获得了所有发布的值。因为您可以使用记录 ID 删除记录，否则您可以使用相应记录的名称。

```
$query = "DELETE FROM table_name WHERE name='$_POST['name']'";

                         (or)

$query = "DELETE FROM table_name WHERE id='$_POST['id']'"; 
```

执行此操作后，您必须将 URL 重定向到该页面。

```
 (or)

<a href="delete.php?id='.$row['id'].'">Delete</a> 
```

在这个文件中，你必须这样写......

```
$id = $_REQUEST['id'];
$query = "DELETE FROM table_name WHERE id='$id'"; 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-07T11:37:25.110

```
//Add this form before the end of the while loop

    <form action="#" method="post">
    <input type="hidden" name="name" value="<?php echo $row['name']?>">
    <input type="submit" name="delete" value="delete">
    </form>

//Add this at the end of the coding

<?php

    if(isset($_POST['delete']))
    {
    //database connection
    $sql="DELETE FROM `table_name` WHERE `name`='{$_POST['name']}'";
    $queryEXE=mysql_query($sql);
    }

?> 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-07T11:15:15.313

您为每个`<tr>`s 添加一个“elemID”属性，并为每一行添加一个新类（例如， elem+ `the id`）：

```
<tr elemId="12" class="elem12">...</tr> 
```

然后，对于 Delete 链接，您使用 AJAX 调用从 DB 中删除行的页面，将 elemID 作为参数传递给此函数：

```
function deleteRow(thisElemID) {
 $.ajax({
  url: yourURL,
  data: {'elemID', thisElemID },
  success: function() {
       $('.elem'+thisElemID).remove();
  }
 });
} 
```

更多关于 $.ajax[的信息](http://api.jquery.com/jQuery.get/)。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-09-07T11:17:20.167

在表格中创建另一个单元格并调用该按钮的 ajax onclik。在您的 ajax 调用中删除特定行

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-09-07T11:22:03.407

对每一行使用“删除”表单。

最好的方法是为每一行添加一个带有提交按钮的表单。每个表单都有一个隐藏字段，其中包含要删除的记录的 ID（或名称，如果必须）。将表单的方法设置为“发布”。

原因：

*   删除链接 (a href) 可以很容易地被索引和添加书签。您不希望每次 Google 路过或用户浏览其历史记录时都删除宠物。
*   method='get' 形式还可以使 url 被添加书签和/或显示在历史记录中。带有表单的方法完全可以在没有 Javascript 的情况下工作。

除此之外，

*   任何解决方案（包括表单和链接）都可以轻松地“升级”为使用 Ajax 的解决方案以获得更好的用户体验，但这始终是额外的且没有核心功能。
*   如果您愿意，您可以设置提交按钮的样式，使其看起来像一个链接。
*   如果您实施此解决方案，请使用[post-redirect-get 模式。](http://en.wikipedia.org/wiki/Post/Redirect/Get)

也就是说，假设您要实际从数据库中删除记录。如果您只想更改 HTML，则 Javascript 解决方案会更有意义。

# android - 带有页面指示器的 Android 视图寻呼机

> ID：12316931
> 
> 赞同：28
> 
> 时间：2012-09-07T11:09:46.880
> 
> 标签：android, android-viewpager, android-view, viewpagerindicator, activity-indicator

我需要在带有图像的视图寻呼机文件中获取页面指示器。这是我的代码。

```
public class IndicatorActivity extends Activity {

 /** Called when the activity is first created. */
    @Override

        public void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);
            setContentView(R.layout.main);

            MyPagerAdapter adapter = new MyPagerAdapter();
            ViewPager myPager = (ViewPager) findViewById(R.id.pager);
            myPager.setAdapter(adapter);
            myPager.setCurrentItem(0);
            TitlePageIndicator indicator = (TitlePageIndicator)findViewById(R.id.indicat);
            indicator.setViewPager( myPager );
    }
} 
```

在这段代码中，我在 `TitlePageIndicator indicator = (TitlePageIndicator)findViewById(R.id.indicat);`as中遇到了错误`TitlePageIndicator cannot be resolved to a type`。这是什么错误。我该如何解决？

这是我的xml代码：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <android.support.v4.view.ViewPager
        android:id="@+id/pager"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
         />
    <com.viewpagerindicator.TitlePageIndicator
    android:id="@+id/indicat"
    android:layout_height="wrap_content"
    android:layout_width="fill_parent" />
</LinearLayout> 
```

我需要在里面写什么代码`TitlePageIndicator`？ **我想在不使用 Fragments 的情况下做到这一点**。

我还创建了一个类，例如：

```
class MyPagerAdapter extends PagerAdapter {

     private static Integer[] titles = new Integer[] 
                { 
        R.drawable.jk,R.drawable.lm,R.drawable.no
                };

    public int getCount() {
            return 3;
    }

    public Object instantiateItem(View collection, int position) {

            LayoutInflater inflater = (LayoutInflater) collection.getContext()
                            .getSystemService(Context.LAYOUT_INFLATER_SERVICE);
            View view;
            ImageView iv;

            view = inflater.inflate(R.layout.first, null);

            ((ViewPager) collection).addView(view, 0);
            switch (position) {
            case 0:
                iv = (ImageView)view.findViewById(R.id.imageView1);
                iv.setImageResource(titles[position]);
                    break;
            case 1:
                iv = (ImageView)view.findViewById(R.id.imageView1);
                iv.setImageResource(titles[position]);
                    break;
            case 2:
                 iv = (ImageView)view.findViewById(R.id.imageView1);
                iv.setImageResource(titles[position]);
                    break;
            }
            return view;
    }

    public void destroyItem(View arg0, int arg1, Object arg2) {
            ((ViewPager) arg0).removeView((View) arg2);

    }

    public boolean isViewFromObject(View arg0, Object arg1) {
            return arg0 == ((View) arg1);

    }

} 
```

除了这门课，我还想做其他事情吗？

提前感谢您的帮助

* * *

## 回答 #1

> 赞同：54
> 
> 时间：2015-01-23T09:50:00.917

**更新：** 22/03/2017

主要片段布局：

```
 <FrameLayout xmlns:android="http://schemas.android.com/apk/res/android"
            xmlns:app="http://schemas.android.com/apk/res-auto"
            android:layout_width="match_parent"
            android:layout_height="match_parent">

            <android.support.v4.view.ViewPager
                android:id="@+id/viewpager"
                android:layout_width="match_parent"
                android:layout_height="match_parent" />

            <RadioGroup
                android:id="@+id/page_group"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_gravity="center_horizontal|bottom"
                android:layout_marginBottom="@dimen/margin_help_container"
                android:orientation="horizontal">

                <RadioButton
                    android:id="@+id/page1"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:checked="true" />

                <RadioButton
                    android:id="@+id/page2"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content" />

                <RadioButton
                    android:id="@+id/page3"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content" />
            </RadioGroup>
        </FrameLayout> 
```

在您的片段上设置视图和事件，如下所示：

```
 mViewPaper = (ViewPager) view.findViewById(R.id.viewpager);
        mViewPaper.setAdapter(adapder);

        mPageGroup = (RadioGroup) view.findViewById(R.id.page_group);
        mPageGroup.setOnCheckedChangeListener(this);

        mViewPaper.addOnPageChangeListener(this);

       *************************************************
       *************************************************

    @Override
    public void onPageScrolled(int position, float positionOffset, int positionOffsetPixels) {
    }

    @Override
    public void onPageSelected(int position) {
        // when current page change -> update radio button state
        int radioButtonId = mPageGroup.getChildAt(position).getId();
        mPageGroup.check(radioButtonId);
    }

    @Override
    public void onPageScrollStateChanged(int state) {
    }

    @Override
    public void onCheckedChanged(RadioGroup radioGroup, int checkedId) {
        // when checked radio button -> update current page
        RadioButton checkedRadioButton = (RadioButton)radioGroup.findViewById(checkedId);
        // get index of checked radio button
        int index = radioGroup.indexOfChild(checkedRadioButton);

        // update current page
        mViewPaper.setCurrentItem(index), true);
    } 
```

自定义复选框状态：[自定义复选框图像android](https://stackoverflow.com/questions/3965484/custom-checkbox-image-android)

Viewpager 教程：[http ://architects.dzone.com/articles/android-tutorial-using](http://architects.dzone.com/articles/android-tutorial-using)

![在此处输入图像描述](../Images/e668abc9fcc9c221bc9f6e4c839814ad.png)

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-09-07T11:37:29.267

以下是您需要做的几件事：

1-如果您还没有这样做，请下载[库。](https://github.com/JakeWharton/Android-ViewPagerIndicator)

2- 导入 Eclipse。

3- 设置您的项目以使用库：项目-> 属性-> Android -> 向下滚动到库部分，单击*添加...*并选择 viewpagerindicator。

4-现在您应该可以导入`com.viewpagerindicator.TitlePageIndicator`.

现在关于在不使用片段的情况下实现它：

*在viewpagerindicatior*附带的示例中，您可以看到该库正在与`ViewPager`具有`FragmentPagerAdapter`.

但实际上图书馆本身是`Fragment`独立的。它只需要一个`ViewPager`. 所以只需使用 a`PagerAdapter`而不是 a`FragmentPagerAdapter`就可以了。

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2012-10-19T05:53:16.477

我知道这已经得到解答，但是对于任何寻找 ViewPager 指示器的简单、简洁实现的人来说，我已经实现了一个我已经开源的。对于任何发现 Jake Wharton 的版本对他们的需求来说有点复杂的人，请查看 [https://github.com/jarrodrobins/SimpleViewPagerIndicator](https://github.com/jarrodrobins/SimpleViewPagerIndicator)。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2013-09-19T13:20:50.117

我还使用了@JROD 的 SimpleViewPagerIndicator。如@manuelJ 所述，它也会崩溃。

根据他的文件：

```
SimpleViewPagerIndicator pageIndicator = (SimpleViewPagerIndicator) findViewById(R.id.page_indicator);
pageIndicator.setViewPager(pager); 
```

确保你也添加了这一行：

```
pageIndicator.notifyDataSetChanged(); 
```

它因数组越界异常而崩溃，因为 SimpleViewPagerIndicator 未正确实例化并且项目为空。调用 notifyDataSetChanged 会导致正确设置或正确重置所有值。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2016-11-30T11:30:46.830

只是对@vuhung3990 给出的好答案的改进。我实施了该解决方案并且效果很好，但是如果我触摸一个单选按钮，它将被选中并且没有任何反应。

我建议在点击单选按钮时也更改页面。为此，只需向 radioGroup 添加一个侦听器：

```
mPager = (ViewPager) findViewById(R.id.pager);
final RadioGroup radioGroup = (RadioGroup)findViewById(R.id.radiogroup);    
radioGroup.setOnCheckedChangeListener(new RadioGroup.OnCheckedChangeListener() {
            @Override
            public void onCheckedChanged(RadioGroup group, int checkedId) {
                switch (checkedId) {
                    case R.id.radioButton :
                        mPager.setCurrentItem(0, true);
                        break;
                    case R.id.radioButton2 :
                        mPager.setCurrentItem(1, true);
                        break;
                    case R.id.radioButton3 :
                        mPager.setCurrentItem(2, true);
                        break;
                }
            }
        }); 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2015-06-05T06:56:28.357

您必须执行以下操作：

1-从此处下载完整项目[https://github.com/JakeWharton/ViewPagerIndicator](https://github.com/JakeWharton/ViewPagerIndicator) [ViewPager Indicator](https://github.com/JakeWharton/ViewPagerIndicator) 2-导入 Eclipse。

导入后，如果要制作以下类型的屏幕，请按照以下步骤操作 -

![截屏](../Images/9671730bb1a80f61bc7125cea54d5525.png)

在某一方面的变化

**示例圆圈默认**

```
 package com.viewpagerindicator.sample;
  import android.os.Bundle;  
  import android.support.v4.view.ViewPager;
  import com.viewpagerindicator.CirclePageIndicator;

  public class SampleCirclesDefault extends BaseSampleActivity {
   @Override
   protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.simple_circles);

    mAdapter = new TestFragmentAdapter(getSupportFragmentManager());

    mPager = (ViewPager)findViewById(R.id.pager);
  //  mPager.setAdapter(mAdapter);

    ImageAdapter adapter = new ImageAdapter(SampleCirclesDefault.this);
    mPager.setAdapter(adapter);

    mIndicator = (CirclePageIndicator)findViewById(R.id.indicator);
    mIndicator.setViewPager(mPager);
  }
} 
```

**图像适配器**

```
 package com.viewpagerindicator.sample;

 import android.content.Context;
 import android.support.v4.view.PagerAdapter;
 import android.support.v4.view.ViewPager;
 import android.view.LayoutInflater;
 import android.view.View;
 import android.view.ViewGroup;
 import android.widget.ImageView;
 import android.widget.TextView;

 public class ImageAdapter extends PagerAdapter {
 private Context mContext;

 private Integer[] mImageIds = { R.drawable.about1, R.drawable.about2,
        R.drawable.about3, R.drawable.about4, R.drawable.about5,
        R.drawable.about6, R.drawable.about7

 };

 public ImageAdapter(Context context) {
    mContext = context;
 }

 public int getCount() {
    return mImageIds.length;
 }

 public Object getItem(int position) {
    return position;
 }

 public long getItemId(int position) {
    return position;
 }

 @Override
 public Object instantiateItem(ViewGroup container, final int position) {

    LayoutInflater inflater = (LayoutInflater) container.getContext()
            .getSystemService(Context.LAYOUT_INFLATER_SERVICE);

    View convertView = inflater.inflate(R.layout.gallery_view, null);

    ImageView view_image = (ImageView) convertView
            .findViewById(R.id.view_image);
    TextView description = (TextView) convertView
            .findViewById(R.id.description);

    view_image.setImageResource(mImageIds[position]);
    view_image.setScaleType(ImageView.ScaleType.FIT_XY);

    description.setText("The natural habitat of the Niligiri tahr,Rajamala          Rajamala is 2695 Mts above sea level"
        + "The natural habitat of the Niligiri tahr,Rajamala Rajamala is 2695 Mts above sea level"
                    + "The natural habitat of the Niligiri tahr,Rajamala Rajamala is 2695 Mts above sea level");

    ((ViewPager) container).addView(convertView, 0);

    return convertView;
 }

 @Override
 public boolean isViewFromObject(View view, Object object) {
    return view == ((View) object);
 }

 @Override
 public void destroyItem(ViewGroup container, int position, Object object) {
    ((ViewPager) container).removeView((ViewGroup) object);
 }
} 
```

**画廊视图.xml**

```
 <?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:background="@drawable/about_bg"
android:orientation="vertical" >

<LinearLayout
    android:id="@+id/about_layout"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical"
    android:weightSum="1" >

    <LinearLayout
        android:id="@+id/about_layout1"
        android:layout_width="match_parent"
        android:layout_height="0dp"
        android:layout_weight=".4"
        android:orientation="vertical" >

        <ImageView
            android:id="@+id/view_image"
            android:layout_width="match_parent"
            android:layout_height="match_parent" 
            android:background="@drawable/about1">
     </ImageView>
    </LinearLayout>

    <LinearLayout
        android:id="@+id/about_layout2"
        android:layout_width="fill_parent"
        android:layout_height="0dp"
        android:layout_weight=".6"
        android:orientation="vertical" >

        <TextView
            android:id="@+id/textView1"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:text="SIGNATURE LANDMARK OF MALAYSIA-SINGAPORE CAUSEWAY"
            android:textColor="#000000"
            android:gravity="center"
            android:padding="18dp"
            android:textStyle="bold"
            android:textAppearance="?android:attr/textAppearance" />

        <ScrollView
            android:layout_width="fill_parent"
            android:layout_height="match_parent"
            android:fillViewport="false"
            android:orientation="vertical"
            android:scrollbars="none"
            android:layout_marginBottom="10dp"
            android:padding="10dp" >

            <TextView
                android:id="@+id/description"
                android:layout_width="match_parent"
                android:layout_height="match_parent"
                android:textColor="#000000"
                android:text="TextView" />

            </ScrollView>
    </LinearLayout>
 </LinearLayout> 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2018-11-15T08:23:07.407

您可以创建一个包含 TextView (mDots) 数组的线性布局。要将 textView 表示为点，请在您的代码中提供此 HTML 源代码。参考我的代码。我从 Youtube Channel TVAC Studio 获得了这些信息。这里的代码：`

```
 addDotsIndicator(0);
    viewPager.addOnPageChangeListener(viewListener);
}

public void addDotsIndicator(int position)
{
        mDots = new TextView[5];
        mDotLayout.removeAllViews();

        for (int i = 0; i<mDots.length ; i++)
        {
             mDots[i]=new TextView(this);
             mDots[i].setText(Html.fromHtml("&#8226;"));            //HTML for dots
             mDots[i].setTextSize(35);
             mDots[i].setTextColor(getResources().getColor(R.color.colorAccent));

             mDotLayout.addView(mDots[i]);
        }

        if(mDots.length>0)
        {
            mDots[position].setTextColor(getResources().getColor(R.color.orange));
        }
}

ViewPager.OnPageChangeListener viewListener = new ViewPager.OnPageChangeListener() {
    @Override
    public void onPageScrolled(int position, float positionOffset, int 
   positionOffsetPixels) {

    }

    @Override
    public void onPageSelected(int position) {

        addDotsIndicator(position);
    }

    @Override
    public void onPageScrollStateChanged(int state) {

    }
};` 
```

# node.js - 有可能有比我进行高级测试更好的选择吗？

> ID：12316932
> 
> 赞同：0
> 
> 时间：2012-09-07T11:09:49.143
> 
> 标签：node.js, testing, high-level

好吧，我对测试很陌生，但我想将编程提升到一个新的水平并开始测试，没有单元测试，而是高级测试。例如：插入一个作业并通过检查它的输入和结果来检查它是否有效。或者另一个例子：插入一个工作并且工人 X 启动它：现在我将检查工作和工人的属性，以了解它们是否处于有效状态。

但这非常复杂，所以我一直在考虑在每个测试中做一个环境和一个实例，每个环境创建一个服务器实例并分配一个空数据库来使用；

例如 start job 高级案例：

```
var environment = new GenericEnvironment(test); // test will be used to throw errors within the environment when something goes wrong.
environment.insertWorker({name: 'bla bla', number 99});
environment.insertARandomProduct();
environment.insertJob({productId: product._id})
environment.startJob({workerId: worker._id})
var environmentValidator = new environmentValidators.StartJobEV()
var job = environment.getLastInsertedJob(environment, test);
environment.validate(job);
// node.js (Javascript on server) 
```

这个例子非常简单，因为在现实世界中它使用异步回调。

environmentValidator 使用来自环境的数据来检查作业是否处于有效状态。例如，还要让正在工作的工作人员检查它的状态是否很忙。

但我不认为这很好，因为我正处于创建测试的开始阶段，所以我问你是否有可能改进进行这些高级测试的方式。

另外我想知道这些测试是否有任何现有的框架？

谢谢

真实世界的代码，但仅用于在插入作业后检查状态：

```
 var serverManager = new ServerManager(test.getPathForDatabase());
    require('production/tests/tottys/_environments/DefaultEnvironment');
    var environment = new production.tests.tottys._environments.DefaultEnvironment(test, serverManager);

    var dummyData = {}

    test.addStep('initEnvironment', function(nextStep){
        environment.init();
        environment.addListener('afterInitialized', function(){
            nextStep();
        }, this);
    });

    test.addStep('insertWorker', function(nextStep){
        dummyData.worker = environment.insertRandomWorker(function(data){
            nextStep();
        });
    });

    test.addStep('insertProduct', function(nextStep){
        dummyData.product = environment.insertRandomProduct(function(data){
            nextStep();
        });
    });

    test.addStep('insertJob', function(nextStep){
        var worker = environment.getLastInsertedWorker();
        var product = environment.getLastInsertedProduct();
        dummyData.job = environment.insertRandomJob(worker, product, function(data){
            nextStep();
        });
    });

    test.addStep('updateWorker', function(nextStep){
        environment.updateWorker({workerId: environment.getLastInsertedWorker()._id}, function(data){
            nextStep();
        });
    });

    test.addStep('validateInsertedJob', function(nextStep, test){
        require('production/tests/tottys/_environmentValidators/AfterJobInserted');
        var EV = new production.tests.tottys._environmentValidators.AfterJobInserted(environment, test);
        var job = environment.getLastInsertedJob();
        EV.addListener('validationEnded', function(e){
            nextStep();
        });
        EV.validate(job, dummyData);
    });
    test.start(); 
```

和验证文件：

```
qx.Class.define("production.tests.tottys._environmentValidators.AfterJobInserted", {
     extend: qx.core.Object

    ,properties: {
    }

    ,events: {
        validationEnded: 'qx.event.type.Data'
    }

    ,construct: function(environment, test){
        this.__environment = environment;
        this.__test = test;
    }

    ,members: {
        validate: function(job, dummyData){
            this.__job = job;
            this.__dummyData = dummyData;
            this.__environment.getWorkerForJob(job, this.__afterWorkerReturned, this);
            this.__environment.getProductForJob(job, this.__afterProductReturned, this);
        }

        ,__afterWorkerReturned: function(worker){
            this.__worker = worker;
            this.__tryStartValidation();
        }

        ,__afterProductReturned: function(product){
            this.__product = product;
            this.__tryStartValidation();
        }

        ,__tryStartValidation: function(){
            if(this.__preConditionsAreValid()){
                this.__startValidation();
            }
        }

        ,__preConditionsAreValid: function(){
            if(this.__worker && this.__product){
               return true;
            }
            return false;
        }

        ,__startValidation: function(){
            var test = this.__test;
            var dummyData = this.__dummyData;
            var job = this.__job;
            var worker = this.__worker;
            var product = this.__product;

            test.add("Expect job not to be done.", function(expect){
                expect(job.done).toBe(false);
            })

            test.add("Expect job's requested quantity to be the same as requested.", function(expect){
                expect(job.qtdRequested).toBe(dummyData.job.qtdRequested);
            })

            test.add("Expect job's missing quantity be the same as requested.", function(expect){
                expect(job.qtdMissing).toBe(dummyData.job.qtdRequested);
            })

            test.add("Expect to be requested by the same request type.", function(expect){
                expect(job.requestedByType).toBe('manager')
            })

            test.add("Expect job not to be done.", function(expect){
                expect(job.done).toBe(false);
            })

            test.add("Expect job's done quantity to be '0' (Number)", function(expect){
                expect(job.qtdDone).toBe(0);
            })

            test.add("Expect job to not have any time frames.", function(expect){
                expect(job.timeFrames && job.timeFrames.length > 0).notToBe(true);
            })

            test.add("Expect job's date end to not exist.", function(expect){
                expect(job.dateJobEnd).notToExist();
            })

            test.add("Expect job's date request to exist.", function(expect){
                expect(job.dateRequested).toExist();
            })

            test.add("Expect job's state to be 'todo'.", function(expect){
                expect(job.state).toBe('todo');
            })

            test.add("Expect job's order to be '0' (Number).", function(expect){
                expect(job.order).toBe(0);
            })

            test.add("Expect job's worker's name to be the same as the requested one.", function(expect){
                expect(job.forWorker.name).toBe(dummyData.worker.name);
            })

            test.add("Expect job's worker's number to be the same as the requested one.", function(expect){
                expect(job.forWorker.number).toBe(dummyData.worker.number);
            })

            test.add("Expect job's worker's _id to be the same as the generated one.", function(expect){
                console.log(worker);
                expect(job.forWorker._id.toString()).toBe(worker._id.toString());
            })

            test.add("Expect job's product's code to be the same as the requested one.", function(expect){
                expect(job.product.code).toBe(dummyData.product.code);
            })

            test.add("Expect job's product's description to be the same as the requested one.", function(expect){
                expect(job.product.description).toBe(dummyData.product.description);
            })

            test.add("Expect job's product's _id to be the same as the requested one.", function(expect){
                expect(job.product._id.toString()).toBe(product._id.toString());
            })
            this.fireDataEvent('validationEnded', {err: false})
        }
    }

}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T11:51:42.820

如果您从测试开始，那么做“高级”或“集成测试”（IT）总是很诱人。它比“单纯”的单元测试感觉更自然、更“简单”、更强大。你已经让整个系统运行起来了，为什么不以此为基础进行测试呢？

但与软件开发一样，IT 意味着您有更多的依赖关系。如果要运行这些测试，数据库必须处于某种状态。服务器将不得不运行。您将需要一个浏览器。网络应该可以工作。对于 IT 而言，整个系统必须处于精确定义的状态，并且您需要工具来使系统处于这种状态 - 您必须在每次单独测试之前这样做。

问题：每个依赖项都是错误的来源。如果依赖项的数量达到某个点，其中一个将始终被破坏，并且您的测试将失败。不是因为代码被破坏了，而是因为创建初始*状态*太复杂了。

这就是为什么你应该真正从单元测试开始。找到系统中没有依赖关系的最小组件并对其进行测试。

这种方法的优点：

1.  它降低了复杂性。与 IT 相比，测试通常或总是会成功。
2.  测试用例会更小。你不会花一个小时来弄清楚你需要什么初始状态以及最终状态应该是什么。
3.  设置会更简单（通常，你不会有任何或 1-2 行设置）
4.  依赖项的更改不会破坏其他测试。有了 IT，一个微小的变化就可以打破所有其他测试。
5.  如果您知道所有单独的组件都可以正常工作，那么其余代码中的错误将自动消失。
6.  修复错误会容易得多。如果您只测试 10 行代码，那么这 10 行代码中必然存在任何错误。如果您运行 IT，则错误可能在任何地方。

结论：获取[jasmine](http://pivotal.github.com/jasmine/)并从一些单元测试开始。当您对所有内容进行单元测试时，为整个系统编写 IT 将变得更加简单……如果您需要的话。

# asp.net - 根据项目数显示数据列表项目

> ID：12316933
> 
> 赞同：2
> 
> 时间：2012-09-07T11:09:56.460
> 
> 标签：asp.net, datalist

我在 ASP.net 应用程序中使用 DataList 控件。我已经设定

```
DataList1.RepeatColumns = 3;
DataList1.RepeatDirection = RepeatDirection.Horizontal; 
```

数据列表的属性。当项目数超过 3 时，它会正确显示。但是，如果它小于 3，它会扭曲并占据整个空间。例如，如果只有 1 个项目，它会占用完整的宽度并扭曲 UI。如果 $$$ 是一项，则 3 显示为
$$$|$$$|$$$
一项显示为
$$$$$$$$$$$$

和 UI 完全干扰。

有没有办法以正确的方式格式化显示？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T01:24:22.817

正如 lcarus 提到的，尝试设置`ItemStyle-Width`属性。这是一个对我有用的片段：

```
<asp:DataList ID="myDataList" runat="server" RepeatColumns="3"  HorizontalAlign="Center" RepeatLayout="Table" RepeatDirection="Horizontal">
    <ItemStyle  Width="33%" /> 
    <ItemTemplate>
        <your code here>
    </ItemTemplate>
</asp:DataList> 
```

当需要 3 列时，将列宽设置为 33%。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T13:42:31.483

尝试将`ItemStyle-Width`属性设置为所需的宽度。我希望它将每个项目的宽度设置为您设置的确切大小：这是 MSDN 文档的链接：http: [//msdn.microsoft.com/en-us/library/system.web.ui.webcontrols .datalist.itemstyle.aspx](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.datalist.itemstyle.aspx)

# box-api - API V2 - 企业 - 创建托管用户

> ID：12316943
> 
> 赞同：0
> 
> 时间：2012-09-07T11:10:36.870
> 
> 标签：box-api

我正在评估企业帐户的盒子。在版本 1 文档中有企业命令，例如

*   create_managed_user
*   编辑管理用户等

是否有相同的 V2 命令？是否会弃用这些方法的现有 V1 命令？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-08T20:46:29.367

更新这个，因为最近有人提到它，即使这个答案很古老。

完全更新：与 V1 Box.com API 相比，V2 API 中“管理使用”的可用表面积增加了约 20%。

在哪里？/用户

1.  POST 创建一个新的
2.  GET /users 查看企业内所有用户
3.  PUT /users/ 更新特定用户
4.  GET /users/?fields=a,b,c 以获取您想要查看的特定字段，包括一些非默认字段，例如他们的企业 ID、他们的角色、一些权限等。 [请参阅用户文档](https://developers.box.com/docs/#users)，并查找绿色草原。

还有什么地方？/组

1.  POST 创建一个新的
2.  GET 获取所有组的列表
3.  GET /groups//memberships 获取组中所有用户的列表

还有什么？as-user 标头可以让您构建为您的用户自动化流程的应用程序。

当然，要完成所有这些事情，您必须是管理员，被授予执行这些不同事情的权限。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-08T21:35:37.447

V2 API 有一些管理员级别的 API，主要在 /users 端点 (http://developers.box.com/docs/) 下。但是，许多方法仍在 V2 API 中添加，并且大部分管理功能目前仅在 V1 API 中可用。V2 API 还没有与 V1 中的 create_managed_user 或 edit_managed_user 等效的方法。

我们一般建议应用尽可能使用 V2 API，并在需要时包含 V1 调用。随着我们向 V2 API 添加更多方法，最好尽快更改您的 v1 调用。

# javascript - 如何找到一个 jQuery 选择器（使用 :contains）结果集的补码

> ID：12316948
> 
> 赞同：0
> 
> 时间：2012-09-07T11:10:45.830
> 
> 标签：javascript, jquery, selector

获得 jQuery 选择器结果集的补充的最佳方法是什么？我想做如下的事情：

```
jQuery(this).find("div:contains('someValue')").show(); 
```

但我想隐藏这个选择的补充：

```
jQuery(this).find("div:not(:contains('someValue'))").hide(); 
```

有没有比仅仅执行互补选择器更优雅的解决方案？我可以看到的另一种方法是先找到所有 div，存储结果，然后过滤：

```
var results = jQuery(this).find("div");
results.find(":contains('someValue')").show();
results.find(":not(:contains('someValue'))").hide(); 
```

但这似乎并没有那么好。有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-07T11:17:15.437

```
var results = jQuery(this).find("div"),
    selector = ":contains('someValue')";

results.filter(selector).show();
results.not(selector).hide(); 
```

正如[@Simon](https://stackoverflow.com/users/1004893/simon)在[评论](https://stackoverflow.com/questions/12316948/how-to-find-a-jquery-selector-using-contains-result-sets-complement/12317053#comment16528772_12317053)中提到的，有一种方法可以改进这个特定的解决方案：

```
var results = jQuery("div", this),
    selector = ":contains('someValue')";

results.filter(selector).show();
results.not(selector).hide(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-07T11:16:18.843

好吧，我认为您的代码相当不错，但是另一种选择可能是运行以下单个语句：

```
jQuery(this).find("div").each(
    function() {
        var me = $(this);
        var f = me.is(":contains('someValue')") ? "show" : "hide";
        me[f]();
    }
); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-07T11:29:38.660

像这样试试

```
jQuery(this).find("div").hide();
jQuery(this).find("div:contains('someValue')").show(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-01-11T13:43:20.840

```
/** $.grepl 
*   uses a regular expression for text matching within an internal $.grep.
*/

$.extend({ 
 "grepl": function(el, exp){ 
  exp=new RegExp(exp,'gi'); // create RegExp
  return $( 
   this.grep( el, function(n,i){ // run internal grep
    return el[i].textContent.match(exp) != null; // match RegExp against textContent
   })
  );
 }
});

$.grepl( $('div'), '^.*someRegexp.*$' ).css('display','none'); // usage of the function 
```

我知道这并不完全使用 ":contains" 表达式，但结果应该是相同的。

# c# - Powershell 和 C# 中的此运行空间不支持语法

> ID：12316952
> 
> 赞同：5
> 
> 时间：2012-09-07T11:11:09.450
> 
> 标签：c#, powershell, office365

我正在尝试使用集成到 C# 中的 power shell 获取有关用户邮箱的信息，但出现以下错误：

```
This syntax is not supported by this run space. This might be because it is no-language mode. 
```

这是我正在使用的代码：

```
using System;
using System.Collections.ObjectModel;
using System.Collections;
using System.Linq;
using System.Text;
using System.Management.Automation;
using System.Management.Automation.Runspaces;
using System.Threading;
using System.Globalization;

namespace Office365
{
    class Program
    {
        static void Main(string[] args)
        {
            CultureInfo oldCI = Thread.CurrentThread.CurrentCulture;
            Thread.CurrentThread.CurrentCulture = CultureInfo.CreateSpecificCulture("en-US");
            Thread.CurrentThread.CurrentUICulture = new CultureInfo("en-US");

            System.Security.SecureString secureString = new System.Security.SecureString();
            string myPassword = "mySecretPassword";
            foreach (char c in myPassword)
                secureString.AppendChar(c);
            PSCredential credential = new PSCredential("my@maildomain.com", secureString);
            Console.WriteLine("Forbinder....");
            WSManConnectionInfo connectionInfo = new WSManConnectionInfo(new Uri("https://ps.outlook.com/PowerShell-LiveID?PSVersion=2.0"), "http://schemas.microsoft.com/powershell/Microsoft.Exchange", credential);
            connectionInfo.AuthenticationMechanism = AuthenticationMechanism.Basic;
            connectionInfo.SkipCACheck = true;
            connectionInfo.SkipCNCheck = true;

            string cmd2 = @"Get-Mailbox | Select-object Identity, displayname, ProhibitSendReceiveQuota, @{n='size';e={$MBXSTAT=Get-MailboxStatistics $_.Identity; $MBXSTAT.TotalItemSize}}";

            using (Runspace runspace = RunspaceFactory.CreateRunspace(connectionInfo))
            {

                    runspace.Open();

                using (Pipeline pipeline = runspace.CreatePipeline(cmd2))
                {
                    pipeline.Commands.AddScript(cmd2);
                    Collection<PSObject> results = pipeline.Invoke();
                    foreach (PSObject obj in results)
                    {

                        // Do something with each result object
                    }
                }
            }
        }
} 
```

对此有何建议？我该如何克服这个问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2017-07-18T10:30:25.687

通常我喜欢让死者独自一人，但在这种情况下，我觉得有必要复活这篇旧帖子，因为我遇到了确切的问题，需要一个地方来保存这段代码，并希望这可以防止其他人浪费太多时间。

我发现连接到 O365 有`WSManConnectionInfo`问题，在浪费了太多时间试图让它工作之后，除非我别无选择，否则我不会使用它。

也就是说，下面的代码对我有用，并且行为与我打开 PowerShell 提示符输入我要运行的命令一样:) 它使测试变得更加简单。

```
`using (var _power_shell = PowerShell.Create()) {
  _power_shell.AddScript("Set-ExecutionPolicy -ExecutionPolicy RemoteSigned -Scope Process");
  _power_shell.Invoke();

  var credential = new PSCredential(username, password.ToSecureString());
  _power_shell.Runspace.SessionStateProxy.SetVariable("Credential", credential);

  _power_shell.AddScript("$Session = New-PSSession –ConfigurationName Microsoft.Exchange -ConnectionUri [https://ps.outlook.com/powershell](https://ps.outlook.com/powershell) -Credential 
  $Credential -Authentication Basic -AllowRedirection");
  _power_shell.AddScript("Import-PSSession $Session");
  _power_shell.Invoke();

  _power_shell.AddScript("Get-Mailbox -RecipientTypeDetails RoomMailbox | Select-Object DisplayName, PrimarySmtpAddress");
  var results = _power_shell.Invoke();

  foreach (var obj in results)
  {
     /* Do something with the results */
  }

  _power_shell.AddScript("Remove-PSSession $Session");
  _power_shell.Invoke();
}`
```

`上面的代码假定`username`&`password`作为字符串变量已经在范围内。也存在扩展方法`ToSecureString`并且在范围内。`

 `据我了解，`PowerShell.Creste()`提供了一个设置为 Restricted 的执行环境，因此您首先需要更改它。在这种情况下，因为我们将范围限定为`Set-ExecutionPolicy`不需要管理员权限的流程。

从我在这个主题上发现的一点点来看，您似乎需要在完成后删除会话，否则您可能会受到限制并将自己锁定在 O365 之外一段时间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-10-03T10:47:14.933

这是 Exchange Online 的限制，在这种情况下您需要使用命令而不是脚本。例如，运行 cmdlet`Get-Mailbox -Identity user@mydomain.onmicrosoft.com`将如下所示：

```
 WSManConnectionInfo connectionInfo = new WSManConnectionInfo(new Uri("https://ps.outlook.com/PowerShell-LiveID?PSVersion=2.0"), "http://schemas.microsoft.com/powershell/Microsoft.Exchange", credential);
  connectionInfo.AuthenticationMechanism = AuthenticationMechanism.Basic;
  Runspace runspace = RunspaceFactory.CreateRunspace(connectionInfo);
  PowerShell shellInstance = PowerShell.Create();
  shellInstance.Runspace = runspace;

  PSObject mailbox = shellInstance.Runspace.AddCommand("Get-Mailbox").AddParameter("Identity","user@mydomain.onmicrosoft.com").Invoke().First(); 
```

我没有在我的项目中使用复杂的脚本和管道，所以如果你需要运行一些相当棘手的东西，我不确定它是如何工作的。`

# sql - 在 PostgreSQL 中插入带单引号的文本

> ID：12316953
> 
> 赞同：594
> 
> 时间：2012-09-07T11:11:11.530
> 
> 标签：sql, postgresql, quotes, string-literals

我有一张桌子`test(id,name)`。

我需要插入如下值： `user's log`, `'my user'`, `customer's`.

```
 insert into test values (1,'user's log');
 insert into test values (2,''my users'');
 insert into test values (3,'customer's'); 
```

如果我运行上述任何语句，我会收到错误消息。

如果有任何方法可以正确地做到这一点，请分享。我不想要任何准备好的陈述。

是否可以使用 sql 转义机制？

* * *

## 回答 #1

> 赞同：1022
> 
> 时间：2012-09-07T15:06:16.447

### 字符串文字

`'`通过将单引号加倍来转义单引号->`''`是标准方式，当然也可以：

```
~~'user's log'~~     -- incorrect syntax (unbalanced quote)
'user''s log'
```

请注意，普通单引号（ASCII / UTF-8 代码 39）不是反引号```，它在 Postgres 中没有特殊用途（与某些其他 RDBMS 不同），而不是双引号`"`，用于标识符。

在旧版本中，或者如果您仍在运行，[`standard_conforming_strings = off`](https://www.postgresql.org/docs/current/runtime-config-compatible.html#GUC-STANDARD-CONFORMING-STRINGS)或者，通常，如果您在字符串前面加上`E`声明*Posix 转义字符串语法*，您也可以使用反斜杠进行转义`\`：

```
E'user\'s log' 
```

反斜杠本身用另一个反斜杠转义。但这通常不是可取的。
如果您必须处理许多单引号或多层转义，您可以避免在 PostgreSQL 中用[**美元引用的字符串**](http://www.postgresql.org/docs/current/sql-syntax-lexical.html#SQL-SYNTAX-DOLLAR-QUOTING)引用地狱：

```
~~'escape '' with '''''~~
$$escape ' with ''$$
```

为了进一步避免美元报价之间的混淆，请为每一对添加一个唯一的标记：

```
$token$escape ' with ''$token$ 
```

可以嵌套任意数量的级别：

```
$token2$Inner string: $token1$escape ' with ''$token1$ is nested$token2$ 
```

请注意该`$`字符在您的客户端软件中是否应具有特殊含义。此外，您可能还必须逃避它。对于像 psql 或 pgAdmin 这样的标准 PostgreSQL 客户端，情况并非如此。

这对于编写 plpgsql 函数或 ad-hoc SQL 命令非常有用。但是，当用户可以输入时，它不能减轻使用准备好的语句或其他方法来防止应用程序中的 SQL 注入的需要。[@Craig 的回答](https://stackoverflow.com/a/12317363/939860/49718#49718)对此有更多了解。更多细节：

*   [Postgres 函数中的 SQL 注入与准备好的查询](https://dba.stackexchange.com/q/49699/3684)

### Postgres 中的值

在处理数据库中的值时，有几个有用的函数可以正确引用字符串：

*   [`quote_literal()`或`quote_nullable()`](https://www.postgresql.org/docs/current/functions-string.html#FUNCTIONS-STRING-OTHER)- 后者输出`NULL`空输入的字符串。（在需要获取有效 SQL*标识符*[`quote_ident()`](https://www.postgresql.org/docs/current/functions-string.html#FUNCTIONS-STRING-OTHER)的地方也需要*双引号*。）
**   [`format()`](https://www.postgresql.org/docs/current/functions-string.html#FUNCTIONS-STRING-FORMAT)与格式说明符`%L`等效于`quote_nullable()`.
    像：`format('%L', string_var)`*   [~~`concat()`~~或者~~`concat_ws()`~~](https://www.postgresql.org/docs/current/functions-string.html#FUNCTIONS-STRING-FORMAT)通常不适合此目的，因为它们*不会*转义嵌套的单引号和反斜杠。*

 ** * *

## 回答 #2

> 赞同：51
> 
> 时间：2012-09-07T11:36:45.183

这是一个糟糕的世界，因为您的问题暗示您的应用程序中可能存在巨大的[SQL 注入](http://en.wikipedia.org/wiki/SQL_injection)漏洞。

您应该使用参数化语句。对于 Java，[`PreparedStatement`与占位符一起](http://docs.oracle.com/javase/tutorial/jdbc/basics/prepared.html)使用。您说您不想使用参数化语句，但您没有解释*原因*，坦率地说，不使用它们必须是一个很好的理由，因为它们是解决您正在尝试的问题的最简单、最安全的方法解决。

请参阅[防止 Java 中的 SQL 注入](https://www.owasp.org/index.php/Preventing_SQL_Injection_in_Java)。不要成为[鲍比](http://xkcd.com/327/)的下一个受害者。

PgJDBC 中没有用于字符串引用和转义的公共函数。这部分是因为它可能使它看起来像是一个好主意。

*在 PostgreSQL中有*内置的引用函数`quote_literal`，`quote_ident`但它们适用于`PL/PgSQL`使用`EXECUTE`. 这些天大多被*参数化版本*`quote_literal`淘汰了，因为它*更安全*，*更容易*。您不能将它们用于您在此处解释的目的，因为它们是服务器端功能。`EXECUTE ... USING`

 **** * *

想象一下，如果您`');DROP SCHEMA public;--`从恶意用户那里获得价值会发生什么。你会产生：

```
insert into test values (1,'');DROP SCHEMA public;--'); 
```

分解为两个语句和一个被忽略的注释：

```
insert into test values (1,'');
DROP SCHEMA public;
--'); 
```

哎呀，你的数据库到了。

* * *

## 回答 #3

> 赞同：46
> 
> 时间：2012-09-07T11:23:33.580

根据[PostgreSQL 文档（4.1.2.1。字符串常量）](https://www.postgresql.org/docs/current/sql-syntax-lexical.html#SQL-SYNTAX-STRINGS)：

> 要在字符串常量中包含单引号字符，请写入两个相邻的单引号，例如'Dianne''s horse'。

另请参阅[`standard_conforming_strings`](https://www.postgresql.org/docs/current/runtime-config-compatible.html#GUC-STANDARD-CONFORMING-STRINGS)参数，该参数控制是否使用反斜杠进行转义。

* * *

## 回答 #4

> 赞同：31
> 
> 时间：2012-09-07T20:44:21.213

在 postgresql 中，如果您想在其中插入值，`'`那么为此您必须提供额外的`'`

```
 insert into test values (1,'user''s log');
 insert into test values (2,'''my users''');
 insert into test values (3,'customer''s'); 
```

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2017-12-29T10:00:36.453

您可以使用 postrgesql chr(int) 函数：

```
insert into test values (2,'|| chr(39)||'my users'||chr(39)||'); 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2017-12-18T17:01:02.620

如果您需要在 Pg 中完成工作：

`to_json(value)`

[https://www.postgresql.org/docs/9.3/static/functions-json.html#FUNCTIONS-JSON-TABLE](https://www.postgresql.org/docs/9.3/static/functions-json.html#FUNCTIONS-JSON-TABLE)

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2021-10-29T15:40:53.940****

# python - 与带有格式说明符的旧式 python 字符串不同，Gettext 不会用“python-format”标记 python 格式字符串

> ID：12316954
> 
> 赞同：3
> 
> 时间：2012-09-07T11:11:14.287
> 
> 标签：python, internationalization, gettext, format-string

似乎 gettext 无法正确识别带有替换字段的 Python 格式字符串，因此不会将它们标记为“python-format”。例如

```
ugettext("This is a sample format string with a {kwarg}").format(kwarg='key word argument') 
```

然而，gettext 用格式说明符正确识别 Python 字符串，并用“python-format”标记这些源字符串，例如，

```
ugettext("This is a sample string with a %(format_spec).") % {'format_spec': 'format specifier'} 
```

我曾尝试使用`xgettext`Django 的`manage.py makemessages`工具为 Python 格式字符串生成 PO 文件，但没有看到 Python 格式字符串被标记为“python-format”。

此外，[http:](http://www.gnu.org/software/gettext/manual/html_node/Python.html) //www.gnu.org/software/gettext/manual/html_node/Python.html 没有指定有关新 Python 格式字符串的任何内容。

请帮助我找到解决此问题的方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T16:07:18.200

我想你被这个 [错误](http://bugs.debian.org/cgi-bin/bugreport.cgi?bug=668226)击中了：这些`gettext`工具只支持旧的 Python 字符串格式进行替换。所以你应该使用旧的字符串格式。或者您可以使用其他工具进行翻译。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-20T14:58:43.287

该标志`python-format`是指`__mod__`使用运算符的经典替换方法`%`。较新的*格式*迷你语言完全不同，当然不能共享相同的格式标志。

对于刚加入并被告知使用它的人来说，`.format`因为它是新的和灵活的，这可能会让人感到困惑；但是出于一致性原因，标志名称必须包含`-format`，并且与使用的 Python 机制的名称完全无关。

“经典”风格的优点是速度更快。就像是

```
kwarg = 'keyword argument'
ugettext('This is a sample format string with a %(kwarg)s') % locals() 
```

应该被识别并标记为`python-format`.

就像是

```
ugettext('This is a sample format string with a %s') % (kwarg,) 
```

将被标记为`c-format`.

（当然，您需要自己在其他地方处理“关键字参数”的翻译。）

**更新：**显然，[语法的](https://lists.gnu.org/archive/html/bug-gettext/2012-12/msg00031.html)[格式标志`.format()``python-brace-format`](https://lists.gnu.org/archive/html/bug-gettext/2012-12/msg00031.html)是.

# java - 使网站的欢迎页面成为 servlet

> ID：12316956
> 
> 赞同：6
> 
> 时间：2012-09-07T11:11:20.053
> 
> 标签：java, servlets

我可以将网站的*欢迎文件*设为 servlet 吗？如果是，如何？我正在尝试类似的东西：

```
 <welcome-file-list>
    <welcome-file>FilterForwarded</welcome-file>
</welcome-file-list>

<!-- FilterForwarded is a servlet --> 
```

部署时我没有看到任何错误，但是当我尝试打开网站*abc.com*时，我从浏览器收到一条消息，提示它无法连接到该网站。为什么会这样？

我希望当任何人访问该网站时，我应该能够存储客户端的*公共 IP*。为此，我编写了一个过滤器，在获取 IP 后，将其传递给 servlet（从那里我可以更新日志）。存储 IP 后，客户端会自动重定向到 index.jsp。有没有办法做到这一点？

**编辑 ：**

```
 <servlet-mapping>
       <servlet-name>FilterForwarded</servlet-name>
       <url-pattern>/FilterForwarded</url-pattern>
   </servlet-mapping> 
```

这是 web.xml 中定义的映射。当我`/FilterForwarded`在欢迎文件中使用时，我在尝试部署时收到此消息：*错误配置：欢迎文件必须是相对路径：/FilterForwarded*

## **从日志：**

```
com.google.apphosting.utils.config.AppEngineConfigException: Welcome files must be relative paths: /FilterForwarded
at com.google.apphosting.utils.config.WebXml.validate(WebXml.java:125)
at com.google.appengine.tools.admin.Application.<init>(Application.java:150)
at com.google.appengine.tools.admin.Application.readApplication(Application.java:225)
at com.google.appengine.tools.admin.AppCfg.<init>(AppCfg.java:145)
at com.google.appengine.tools.admin.AppCfg.<init>(AppCfg.java:69)
at com.google.appengine.tools.admin.AppCfg.main(AppCfg.java:65) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-07T11:22:49.850

如果您将过滤器映射到 /*，您应该能够拦截所有请求，然后从那里记录 IP。

还是您要求只为登录页面记录客户端 IP？

如果是这样，您可以更改 Servlet 容器的默认 servlet，但请记住，这将更改与web.xml 中的映射不匹配的*所有请求的默认 servlet。*

```
<servlet-mapping>
    <servlet-name>FilterForwarded</servlet-name>
    <url-pattern>/</url-pattern>
</servlet-mapping> 
```

一个更复杂但可能更好的解决方案是在您的 Java Web 容器前面放置一个 Web 服务器，并使用重写规则来代理您的后端 Servlet。这种方式意味着您可以控制为您的登录页面访问的 Servlet，而无需覆盖所有不匹配请求的默认 Servlet。不过，这对于您的问题可能有点过分了。

# cocoa-touch - NSMutableArray objectatindex 总是显示最后一个 Object

> ID：12316959
> 
> 赞同：0
> 
> 时间：2012-09-07T11:11:22.907
> 
> 标签：cocoa-touch, ios5, uiviewcontroller, nsmutablearray, multiple-views

我的问题是我总是用-method`NSMutableArray`得到最后一个元素。`objectatindex`

我有一个数组，其中一些类派生自`UIViewController`. 我想显示一个又一个视图。

首先我填充数组：

```
ContactViewController *ContactView = [[ContactViewController alloc]init];
QuestionViewController *QuesView = [[QuestionViewController alloc]init];;
ContactView.mydelegate = self;
[QuesView setDelegate:self];

[Views addObject:ContactView];

Views =[[NSMutableArray alloc]initWithCapacity:11];
for (int i = 0; i < 11; i++) {
    [QuesView setParam:@"text" :i ];
    [Views addObject:QuesView];
} 
```

之后我想获得实际视图并像这样跳到下一个：

```
-(IBAction)Button:(id)sender
{

    UIViewController *newView = [[UIViewController alloc]init];
    newView =  (UIViewController*)[Views objectAtIndex:enumerator];
    [self presentViewController:newView animated:YES completion: nil];
    enumerator++;
     //dismiss old view here....

    NSLog(@"number %d",[newView getNumber]);
} 
```

新视图未显示，日志中的数字始终是数组的最后一个数字。我尝试使用 for 循环遍历“视图”中的所有元素，但每个对象中总是有最后一个数字....

任何提示？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T12:47:07.500

您可能想要创建多个 QuestionViewController 实例。但实际上您只创建了一个对象并对其调用了 11 次 setParam。

此行`[Views addObject:ContactView]`也无效，因为您创建了一个新数组对象并将其分配给下一行中的 Views。与`UIViewController *newView = [[UIViewController alloc]init]`. 希望您使用的是 ARC，否则会造成内存泄漏！

# c# - 为什么 DataContract 比 Serializable 更快？

> ID：12316966
> 
> 赞同：3
> 
> 时间：2012-09-07T11:12:00.743
> 
> 标签：c#, .net, datacontractserializer, xml-deserialization

我尝试使用下面的代码对自定义对象进行序列化和反序列化。

```
[Serializable]
public class TaskProperty
{
    public int Id { get; set; }
    public DateTime ScheduleTime { get; set; }
    public TimeSpan InitializationTime { get; set; }
    public Nullable<DateTime> InstantOfStart { get; set; }
    public TimeSpan TotalElapsedTime { get; set; }
}

// Main
var serializer = new DataContractSerializer(typeof(TaskProperty));
var reader = new FileStream("myfile.xml", FileMode.Open);
TaskProperty deserialized = (TaskProperty)(serializer.ReadObject(reader));
reader.Close();
Console.WriteLine("deserialized: {0}", deserialized); 
```

如果`TaskProperty`类用`DataContract`属性修饰（并且`DataMember`每个属性都用属性），反序列化比用属性修饰时快得多`Serializable`：

*   使用`DataContract`和`DataMember`属性，反序列化几乎是立即的；
*   使用`Serializable`属性，反序列化非常慢（大约需要 30 秒）。

为什么？

**更新...**此外，如果反序列化之前是序列化相同类型的对象（显然具有不同的内容），则序列化速度慢而反序列化速度快。类似地，如果序列化之前是反序列化相同类型的对象，反序列化速度很慢，而序列化速度很快。

**更新 2...**为了完整起见，我添加了应该序列化和反序列化的自定义类。

**更新3 ...**好吧，也许我发现了影响`Serializable`属性的缓慢的原因，但我不明白为什么。本质上，如果我明确声明与五个属性相关的五个私有字段，那么第一次序列化（或反序列化）几乎是即时的。为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T15:33:48.307

只是为了评论您在第一次通话后加速序列化的更新：

序列化器可能正在使用反射来构建元数据，并可能使用动态方法来执行该类型的序列化，这是它第一次必须处理该类型。

我知道如果我正在编写通用序列化程序，那就是我会做的；反映所有属性，ILEmit 一个动态方法来执行实际的序列化，并保存生成的方法，以便在再次序列化或反序列化相同类型时使用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-07T15:38:46.873

您可能正在调试模式下进行测试，而需要在具有正确 NGEN 的序列化程序的发布模式下进行测试。

**编辑：**关于您上面的评论“平均性能提高，因为只有第一次序列化速度较慢。” 几乎证实了我对缺乏 NGEN 是罪魁祸首的怀疑。您需要在项目属性 < 构建 < 生成序列化程序集下查看您的项目构建设置

您想验证发布版本没有禁用它（如果需要，您也可以启用它进行调试）

可以找到一些进一步的信息：

[XmlSerializer 在 64 位系统上启动巨大的性能损失](https://stackoverflow.com/questions/4137335/xmlserializer-startup-huge-performance-loss-on-64bit-systems)

[http://blogs.msdn.com/b/billwert/archive/2008/02/23/use-of-sgen-exe-to-avoid-common-xmlserializer-performance-pitfalls.aspx](http://blogs.msdn.com/b/billwert/archive/2008/02/23/use-of-sgen-exe-to-avoid-common-xmlserializer-performance-pitfalls.aspx)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-07T11:17:47.477

我不是 100% 确定，但我的猜测是：

1) .NET 将属性信息嵌入到程序集的元数据中，因此数据协定序列化程序不必进行反射来查找类的所有数据成员属性。

2) 使用[Serializable]，序列化器检查对象的所有字段，并且必须使用反射来做到这一点，这是昂贵的。

# android - 如何在Android的屏幕上同时获得两个点的坐标？

> ID：12316969
> 
> 赞同：0
> 
> 时间：2012-09-07T11:12:02.060
> 
> 标签：android, touch-event, ontouchlistener

我想知道当屏幕同时触摸到屏幕上的点时，是否可以获得两组正确的坐标点。如果是，那么如何使用它。谷歌搜索但没有得到任何满意的结果。请帮忙？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T11:53:40.207

使用以下两种方法代替 getX 和 getY：

```
public final float getX (int pointerIndex)
        Since: API Level 5

        Returns the X coordinate of this event for the given pointer index (use getPointerId(int) to find the pointer identifier for this index). Whole numbers are pixels; the value may have a fraction for input devices that are sub-pixel precise.

public final float getY (int pointerIndex)
        Since: API Level 5

        Returns the Y coordinate of this event for the given pointer index (use getPointerId(int) to find the pointer identifier for this index). Whole numbers are pixels; the value may have a fraction for input devices that are sub-pixel precise.
        Parameters
        pointerIndex    Raw index of pointer to retrieve. Value may be from 0 (the first pointer that is down) to getPointerCount()-1. 
```

# c++ - 如何调整 std::stod (string to double) 的小数分隔符和位数

> ID：12316972
> 
> 赞同：9
> 
> 时间：2012-09-07T11:12:08.140
> 
> 标签：c++, qt, c++11, type-conversion, locale

有没有办法调整 std::stod() 以增加（字符串到双精度）转换中的小数位数并强制它使用美国语言环境？

我有一个可以在控制台或 gui 模式下运行的 Qt 应用程序：

```
if (opt->getFlag( 'c' ) || opt->getFlag( "console" ) ){
  ThreadManager  modelMainThread;
  modelMainThread.runFromConsole(inputFileName,scenarioName);
}
else {
  QApplication app(argc, argv);
  MainWindow mainWin;
  mainWin.show();
  return app.exec();
} 
```

在这个应用程序中，我有一个包含新 C++11 stod 的 string to double 方法：

```
double s2d ( const string &string_h) const {
  try {
    return stod(string_h);
  } catch (...) {
    if (string_h == "") return 0;
    else {
      cout << "error!" << endl;
    }
  }
  return 0;
} 
```

奇怪的是，在控制台模式下，字符串到双重转换需要一个带点作为小数分隔符的字符串，而在 gui 模式下，它需要一个带逗号的字符串。此外，正如我之前使用 istringstream 的那样：

```
istringstream totalSString( valueAsString );
totalSString >> valueAsDouble; 
```

我注意到 stod 将生成的 double 截断为仅 3 个十进制数字，比 istringstream 少得多。

那么有没有办法增加小数位数并强制 std::stod 使用美国语言环境进行转换？

谢谢 ：-）

**编辑**：

如果我尝试这个脚本：

```
// testing stod() ..
vector<string> numbers;
numbers.push_back("123.1234567890");
numbers.push_back("123.1234");
numbers.push_back("123,1234567890");
numbers.push_back("123,1234");
double outd;
for(uint i=0;i<numbers.size();i++){
    try {
        outd =  stod(numbers[i]);
        cout << "Conversion passed: " << numbers[i] << "  -  " << outd << endl;
    } catch (...) {
        cout << "Conversion DID NOT passed: " << numbers[i] << "  -  " <<endl;
    }
} 
```

我得到了这些结果：

“控制台”模式：

```
Conversion passed: 123.1234567890  -  123.123
Conversion passed: 123.1234  -  123.123
Conversion passed: 123,1234567890  -  123
Conversion passed: 123,1234  -  123 
```

“gui”模式：

```
Conversion passed: 123.1234567890  -  123
Conversion passed: 123.1234  -  123
Conversion passed: 123,1234567890  -  123.123
Conversion passed: 123,1234  -  123.123 
```

很明显，有些东西会影响 stod() 的行为！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2019-01-11T10:50:59.083

`std::stod`是根据 定义的`std::strtod`，它继承自 C 标准库。C 函数`strtod`根据 C 语言环境工作，可通过标头中的`setlocale`函数访问`<locale.h>`。

在 C++ 中，C 语言环境仍然可以通过标头`std::setlocale`中的函数访问`<clocale>`，并且它确实影响`std::strtod`和`std::stod`。

Qt`QApplication`用于`std::setlocale`设置用户选择的语言环境。因此，每当您在 GUI Qt 应用程序中使用依赖于 C 语言环境的函数时，您将拥有依赖于语言环境的小数点。

现在，要强制数字使用特定的语言环境，您可以使用`std::setlocale`如下。但请注意，这可能会破坏多线程应用程序，因为 C 语言环境是线程全局状态。下面的例子将程序的 locale 临时设置为`LC_NUMERIC=C`，调用后恢复设置`std::stod`。

```
#include <iostream>
#include <clocale>
#include <vector>
#include <string>

void test()
{
    for(auto s : {"123.1234567890",
                  "123.1234",
                  "123,1234567890",
                  "123,1234"})
    {
        // Save locale setting
        const std::string oldLocale=std::setlocale(LC_NUMERIC,nullptr);
        // Force '.' as the radix point. If you comment this out,
        // you'll get output similar to the OP's GUI mode sample
        std::setlocale(LC_NUMERIC,"C");
        try
        {
            const auto outd=std::stod(s);
            std::cout << "Conversion succeeded: " << s << "  =>  "
                      << outd << '\n';
        }
        catch (...)
        {
            std::cout << "Conversion FAILED   : " << s << "  =>  ???\n";
        }
        // Restore locale setting
        std::setlocale(LC_NUMERIC,oldLocale.c_str());

    }
}

#include <QApplication>
int main(int argc, char** argv)
{
    std::cout << "Test in normal console mode\n";
    test();
    QApplication app(argc, argv);
    std::cout << "Test in GUI mode\n";
    test();
} 
```

输出：

```
Test in normal console mode
Conversion succeeded: 123.1234567890  =>  123.123
Conversion succeeded: 123.1234  =>  123.123
Conversion succeeded: 123,1234567890  =>  123
Conversion succeeded: 123,1234  =>  123
Test in GUI mode
Conversion succeeded: 123.1234567890  =>  123.123
Conversion succeeded: 123.1234  =>  123.123
Conversion succeeded: 123,1234567890  =>  123
Conversion succeeded: 123,1234  =>  123 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-07T12:00:47.807

`std::stod`及其亲属旨在提供从字符串到数字类型的**简单、快速的转换。**（完全披露：这是我的设计）所以，不，没有语言环境；你所看到的就是你得到的。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-07T11:26:05.790

`std::stod``std::string`是一种将 a 转换为 double的通用方式。如果你想要更具体的东西，你应该自己实现它。

例如：

```
double my_stod(const std::string &valueAsString) {
    istringstream totalSString( valueAsString );
    double valueAsDouble;
    // maybe use some manipulators
    totalSString >> valueAsDouble;
    if(!totalSString)
        throw std::runtime_error("Error converting to double");    
    return valueAsDouble;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-10-11T13:44:50.793

为了避免在设置语言环境和使用时出现线程问题`strtod`，我会使用`istringstream`：

```
#include <optional>
#include <sstream>

[[nodiscard]] std::optional<double>
toDouble( const std::string& stringToConvert)
{
    std::istringstream streamToConvert( stringToConvert );
    streamToConvert.imbue( std::locale( "C" ) );
    double result = 0.0;
    streamToConvert >> result;

    if ( streamToConvert.fail() || streamToConvert.bad() || !streamToConvert.eof() ) {
        return std::nullopt;
    }
    return result;
} 
```

如果你真的不想使用`istringstream`，你可以尝试调用[`std::num_get`](https://en.cppreference.com/w/cpp/locale/num_get)，这是`istringstream`内部调用的。

# c# - 即使在页面刷新后，页面的 IsPostBack 属性也不会变为 false

> ID：12316977
> 
> 赞同：2
> 
> 时间：2012-09-07T11:12:22.637
> 
> 标签：c#, asp.net, postback

我陷入了一个非常不寻常的问题。我有一个用 C# 编写的代码，它只是`IsPostBack`检查`Page_Load`. 我知道`IsPostBack`当页面第一次登陆时它仍然是错误的，并且只有当任何控件将表单发布到服务器时才 bocme true（具有`runat=sever`）。

我也知道，如果我们点击刷新，该`IsPostBack`属性应该更改为 false（因为刷新不是回发）。

这是示例代码：

```
if (!IsPostBack)
{
    // If I click on any control on the page, and then hit refresh,
    // the code inside this block should execute, but this is not happening.
    // After first postback, I tried refreshing the page for more than
    // ten times, but always finds IsPostBack=true

    // ...
}
else
{
    // ...
} 
```

我点击了服务器端按钮（回发），然后点击刷新。我认为它会进入 if 块但没有运气。无论我在浏览器上点击刷新多少次，`IsPostBack`总是如此。这确实是我以前从未见过的不寻常的活动。

我真的很感激任何帮助。我需要知道为什么会这样，这是与浏览器相关的问题还是其他问题？我使用了 Mozilla 和 chrome。

每次我点击刷新时，我都会在两个浏览器上收到警告。

*   在 chrome 上：确认表单提交您正在寻找您输入的已使用信息的页面，返回到该页面可能会导致您执行的任何操作被重复。您要继续吗？

*   在 mozilla 上：确认要显示页面，firefox 必须发送将重复任何操作的信息...

提前感谢您的任何帮助。

普拉文

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T11:17:35.610

如果您在发布后刷新，大多数浏览器都会发布相同的数据。

这就是您所看到的对话的含义（他们在询问您是否要重新发布 - 单击是/确定意味着重新发布）。

为了避免重新发布，只需转到地址栏并按回车即可。这将导致新请求成为问题，而不是重新发布。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-08T00:08:45.110

浏览器弹出的那些对话框告诉您他们将进行回发，而不是仅仅获取页面。您可以在代码中看到警告是准确的 - 在原始回发中调用的任何处理程序都将被第二次调用。这是回发的主要问题之一——它们基本上破坏了刷新键。如果您只想加载页面，则必须将鼠标移至地址栏并按 Enter。这将加载 IsPostback 为 false 的页面。

# sql - 传递参数时如何对报表查询中生成的引号进行转义

> ID：12316983
> 
> 赞同：0
> 
> 时间：2012-09-07T11:12:45.250
> 
> 标签：sql, jasper-reports

我遇到了*JasperReports*的一种情况。我有一个报告查询，它获取三个参数，就像这样：

```
SELECT DISTINCT
mr.int_grp_no,
mr.grp_no,
ISNULL((select cv_lbl from code_value_mcg where cv_type = 'mem grp type' and cv_code = (select grp_type from mem_group_mcg where group_id = mr.grp_no)), '') as grouptype,
isnull((select reg_date_en from mem_group_mcg where group_id = mr.grp_no), '') as reg_date,
isnull((select name from mem_group_mcg where group_id = mr.int_grp_no), '') as intergroup,
isnull((select name from mem_group_mcg where group_id = mr.grp_no), '') as groupname,
(select count(mid) from mem_reg_mcg where gender = 1 and grp_no = mr.grp_no) as totmale,
(select count(mid) from mem_reg_mcg where gender = 2 and grp_no = mr.grp_no) as totfemale,
((select count(mid) from mem_reg_mcg where gender = 1 and grp_no = mr.grp_no)+(select count(mid) from mem_reg_mcg where gender = 2 and grp_no = mr.grp_no))as total
FROM
dbo.mem_reg_mcg as mr
where $P{condition} and mr.reg_date between $P{Reg_date_from} and $P{Reg_date_to}] 
```

在参数条件中，我将传递类似的东西*`mr.mem_in = 2`*，*`mr.grp_no = 3`*但是当我在参数中传递这样的值时，当报告获取参数时，它会将参数生成为*`'mr.mem_in = 2 and mr.grp_no = 3'`*. 引号是此查询中的错误。所以我假设去掉引号。

那么我该怎么做呢？

任何想法都会对我很有帮助。

# jquery - CSS 不会切换

> ID：12316993
> 
> 赞同：2
> 
> 时间：2012-09-07T11:13:47.330
> 
> 标签：jquery

以下成功切换 div 地主弹出窗口。但是，它不会在切换时为 div 的楼主_pop_up 设置 css 属性。任何想法将不胜感激。我试图让弹出框的高度在切换时从 20em 变为 42em。

```
$(function () {
    $('#toggle1').click(function () {
        $('#landlord_pop_up').slideToggle(function () {
            $(".popupBox").css({
                "height": "42em"
            });
        }, function () {
            $(".popupBox").css({
                "height": "20em"
            });
        });
    });
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T11:18:51.380

根据[文档](http://api.jquery.com/slideToggle/) slideToggle`duration`作为第一个参数。你正在提供一个功能

```
.slideToggle(duration,callback); 
```

所以你可以做这样的事情

```
$('#landlord_pop_up').slideToggle(1000, 
function () { 
 $(".popupBox").css({"height":"20em"});
 $(".popupBox").css({"height":"42em"});
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T11:34:12.710

这会在滑动后切换弹出框的高度：

```
$(function() {
    $('#toggle1').click(function() {
        $('#landlord_pop_up').slideToggle(function(){
            $(".popupBox").toggle(function () {
                $(this).height("42em");
            }, function () {
                $(this).height("20em");
            });
        });
    });
}); 
```

# sharepoint-workflow - 使用 Nintex 工作流程中提供的用户数据更新 sharepoint 2003 列表

> ID：12316994
> 
> 赞同：1
> 
> 时间：2012-09-07T11:13:51.683
> 
> 标签：sharepoint-workflow, workflow-activity, nintex-workflow, sharepoint-2003

为这个问题的天真道歉，但我对在 Sharepoint 中使用 Nintex 工作流程是全新的。

由于没有在 Nintex 手册或在线找到示例，我希望执行的简单任务是向用户发送任务以提示他们更新 Sharepoint 列表中的特定字段。

我创建了一个工作流，当在列表中创建新条目时将任务分配给用户。但是，“缺失的链接”是我找不到如何在任务中向用户呈现列表字段，以便他们可以简单地更新现有字段。例如，在列表中创建了一个新的“客户”条目后，我希望不同的人填写记录上的字段。

为我希望更新的每个字段创建一个单独的表单似乎很冗长，在 Nintex 2007 中，我正在努力了解如何从运行工作流的数据列表中合并现有字段。

感激地收到链接或提示。

# android - 如何在新线程中加载 admob 广告？

> ID：12316995
> 
> 赞同：0
> 
> 时间：2012-09-07T11:13:51.300
> 
> 标签：android, multithreading, admob

我为 Android ICS 重新设计了我的应用程序并遇到了以下问题。广告是在主线程的 oncreate 中下载的，因此文章（由 webview 显示）不会出现，直到广告不会加载。如何在新线程中加载广告？

下面是 WebView Activity 的代码：

```
@Override
    public void onCreate(Bundle savedInstanceState) {
        setTheme(R.style.Theme_Sherlock_Light);
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_webview);
        showActionBar();

    adView = (AdView) findViewById(R.id.adView);
    adView.setAdListener(this);
....
}
....
@Override
    public void onDismissScreen(Ad arg0) {
    }

    @Override
    public void onFailedToReceiveAd(Ad arg0, ErrorCode arg1) {
        ads_view.setVisibility(View.GONE);
    }

    @Override
    public void onLeaveApplication(Ad arg0) {
    }

    @Override
    public void onPresentScreen(Ad arg0) {
    }

    @Override
    public void onReceiveAd(Ad arg0) {
        ads_view.setVisibility(View.VISIBLE);
    } 
```

此外，我将 adView 块放在具有 ID“ads_view”的 RelativeLayout 中。

此方法不起作用：

```
adView = (AdView) findViewById(R.id.adView);
        adView.setAdListener(this);

        (new Thread() {
            public void run() {
                 Looper.prepare();
                adView.loadAd(new AdRequest());
            }
        }).start(); 
```

请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T23:00:32.330

loadAd 调用需要在 UI 线程上进行，因为 SDK 最终会添加到您的视图层次结构中。

您的应用程序是否有一个在收到广告之前不显示的 WebView？你的布局是什么样的？在收到广告之前，您是否有机会将文章的视图设置为 NONE？

# django - django - 创建一个预览页面

> ID：12316997
> 
> 赞同：2
> 
> 时间：2012-09-07T11:13:57.097
> 
> 标签：django, django-views

我的博客应用中有一个“添加帖子”页面。我想添加一个“预览页面”。我应该在保存帖子之前点击预览按钮。为了这 ; 我在我的 models.py 中创建了两个新字段：titlePreview 和 bodyPreview。

我正在做的是将表单数据保存到这两个字段中以在发布前预览页面。

但我不能那样做。我有一个 addPost 视图。这里是 ：

```
@login_required(login_url='/panel')
def addpost(request):
    if request.method=="POST":
        form = addForm(request.POST)
        if form.is_valid():
            titleform=form.cleaned_data['title']
            bodyform=form.cleaned_data['body']
            checkform=form.cleaned_data['isdraft']
            owner = request.user
            n = Post(title = titleform, body = bodyform, isdraft=checkform, owner=owner)
            n.save()
            return HttpResponseRedirect('/admin/')
    else:
        form=addForm()
        return render(request,'add.html',{'form':form,})
    return render(request,'add.html',{'form':form,}) 
```

这是我的models.py：

```
class Post(models.Model):
    owner = models.ForeignKey(User)
    title = models.CharField(max_length = 100)
    body = models.TextField()
    bodyPreview = models.TextField()
    titlePreview = models.CharField(max_length=100)
    slug = AutoSlugField(populate_from='title',unique=True)
    posted = models.DateField(auto_now_add=True)
    isdraft = models.BooleanField(default=False)

    def __unicode__(self):
        return self.title

    @permalink
    def get_absolute_url(self):
        return ('view_blog_post',None, {'postslug':self.slug}) 
```

现在我想我应该创建一个不同的视图，比如“preview_view”，它必须从 addpost.html 重定向到“preview.html”。

但我无法连接点。

谢谢你

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T11:55:51.363

## 解释我之前的评论

### 第一部分：*创建页面*模板通过`POST`

这部分可以通过多种方式实现，这是一种形式：

```
<form action={% url "preview_page" %} method="POST">
    <input type="hidden" name="title" value="{{ post_title }}">
    <input type="hidden" name="body" value="{{ post_body }}">
    <input type="submit" name="preview_button" value="preview">
</form> 
```

### 第二部分：创建视图 preview_page

```
@login_required(login_url='/panel')
def previewpost(request):
    if request.method=="POST":
        # Here pass the POST data to the template, POST is already a dict,
        # so it may be can fit directly into the template if names match
        # though it is always better to check the values first
        return render(request,'post_template.html', request.POST)
    else:
        ... 
```

### post_template.html

```
...
<h1>{{ title }}</h1>
<p>{{ body }}</p>
... 
```

免责声明：代码根本没有经过测试

此解决方案的缺点是您必须将数据（标题、正文）再次从客户端传递到服务器。我希望这对你有用。