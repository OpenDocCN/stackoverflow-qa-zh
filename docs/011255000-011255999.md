# StackOverflow 问答 11255000-11255999

# php - MYSQL PHP 通配符

> ID：11255000
> 
> 赞同：1
> 
> 时间：2012-06-29T01:27:56.060
> 
> 标签：php, mysql

我有一个由 AJAX 调用的 php 脚本，它一直不返回我想看到的通配符结果。无法弄清楚出了什么问题。奇怪的是我正在尝试在数据库中查找不寻常的字符`=.-,;,"`等。我正在构建的应用程序是盲文查找的英文字符。

这是我的代码。

```
$ENG = "english phrase" // Could be Equal sign, dash whatever
$ENG_WILD = $ENG."%"; //Add in wildcard
$result = mysql_query("SELECT * FROM $DB_TABLE WHERE ENG LIKE '$ENG' OR '$END_WILD' ");
$row = mysql_fetch_array( $result );
$result = mysql_query("SELECT * FROM $DB_TABLE WHERE ENG LIKE '$ENG' OR '$END_WILD' ");
if (mysql_num_rows($result)==0) {
    die($Failed . mysql_error());
}

// keeps getting the next row until there are no more to get
while($row = mysql_fetch_array( $result )) {
    // Print out the contents of each row
    echo $box."Dots needed for..".$row['ENG']."..are..".$row['BR_PAR']."..The Rule that applies..".$row['RULE']."</p>".$box_end;
} 
```

我试过使用`*`而不是，`%`但它失败了。以下是 ENG 下 DB 中的条目示例：`= (Nemeth Code: Equal Sign)`

如果我将输入作为一个整体运行上面的脚本，我会得到正确的结果，但如果我运行它，`=`否则`= (Nemeth`我不会得到任何结果。我不明白——我原以为通配符会让我得到我想要的。多谢你们。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-29T01:33:13.823

您的变量是`$ENG_WILD`，但您`$END_WILD`在`mysql_query()`函数中使用。（英文*G*与 EN *D*）

如果您解决了这个问题，但它仍然无法正常工作，请记住，`%`只有当短语出现在该字段的开头时，最后的 using 才会匹配。`%`如果它在开头、中间的任何位置或结尾包含您的短语，则在开头和结尾都使用 a来匹配。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T13:59:44.840

```
SELECT * FROM $DB_TABLE WHERE ENG LIKE '$ENG' OR '$END_WILD' 
```

可能不会像你想的那样做。使用括号，它是这样做的：

```
SELECT * FROM $DB_TABLE WHERE (ENG LIKE '$ENG') OR ('$END_WILD') 
```

当我认为你想要：

```
SELECT * FROM $DB_TABLE WHERE ENG LIKE '$ENG' OR ENG LIKE '$END_WILD' 
```

寻找 'this' 和 'this%' 也是多余的，因为第二个也会返回 'this'。

您还无缘无故地执行了两次完全相同的查询。我猜有很多我们没有看到的代码。

最后，结果为零并不意味着您的查询失败，该查询可能没有结果。

# javascript - Javascript函数返回位置[0]中的整个数组

> ID：11255004
> 
> 赞同：0
> 
> 时间：2012-06-29T01:28:10.233
> 
> 标签：javascript, arrays, return

我对 JS（以及其他所有东西）都很陌生，我正在尝试使用一个函数来生成一个随机数数组，然后将该数组传递回主数组。我似乎正在按照我的意愿制作数字数组，但随后整个数组被放入位置一（数组 [0]），并且数组长度读取为一个位置。我试图在其他地方找到这个问题，但没有看到任何与我的问题相匹配的东西。

这是代码：

```
//sets up an array of numbers that will be the secret code
// code = quantity of digits, number = numerals used for each digit

setSecretCode = function(code,numbers){ 

    var secretCode = "0";
    var secret = [];

    console.log("using code = "+ code); //used to verify parameters are correct
    console.log("and numbers = "+numbers); 
for (i=0; i < code; i++){ 
        secret[i] = Math.floor(Math.random()*numbers+1);
        console.log("secret#"+ i+"is"+secret[i]);
    }
    return secret;   

};

//function call - passing user defined parameters
var secret = new Array (setSecretCode(enteredCode,enteredNumber));

//printout of array for debugging
console.log("secret code is: "+ secret);      // returns appropriate looking code
console.log("secret0 = "+ secret[0]);         // whole array appears in this position
console.log("secret1 = "+ secret[2]);         // shows up as undefined

console.log(secret.length); //this illuminates problem -  array is only one position! 
```

* * *

感谢您的任何反馈。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T01:31:08.723

那是因为您在数组中嵌套了一个数组： setSecretCode 返回一个数组，并且您在执行此操作时将该数组包装在一个新数组中`new Array (setSecretCode(enteredCode,enteredNumber));`

一般来说，`new Array()`在 Javascript 中几乎不需要。只需使用数组文字`[]`- 这是同一件事。

# heroku - Heroku 与 FTPTLS - SSL 连接错误

> ID：11255005
> 
> 赞同：1
> 
> 时间：2012-06-29T01:28:35.787
> 
> 标签：heroku, ftp, openssl, ssl-certificate, ssl

我正在尝试使用 Rails 1.9 在 Heroku 上通过 TLS 连接到 FTP

Rails 1.9 不包含 FTPTLS，因此我将 Rails 1.8 ftptls.rb 文件复制到 lib/assets 中。

这在 localhost 上运行良好，但是当我将其推送到 Heroku 时失败，因为证书验证失败。

库/资产/ftptls.rb：

```
=begin
= $RCSfile$ -- SSL/TLS enhancement for Net::HTTP.

= Info
  'OpenSSL for Ruby 2' project
  Copyright (C) 2003 Blaz Grilc <farmer@gmx.co.uk>
  All rights reserved.

= Licence
  This program is licenced under the same licence as Ruby.
  (See the file 'LICENCE'.)

= Requirements

= Version
  $Id: ftptls.rb 13657 2007-10-08 11:16:54Z gotoyuzo $

= Notes
  Tested on FreeBSD 5-CURRENT and 4-STABLE
  - ruby 1.6.8 (2003-01-17) [i386-freebsd5]
  - OpenSSL 0.9.7a Feb 19 2003
  - ruby-openssl-0.2.0.p0
  tested on ftp server: glftpd 1.30
=end

require 'socket'
require 'openssl'
require 'net/ftp'

module Net
  class FTPTLS < FTP
    def connect(host, port=FTP_PORT)
      @hostname = host
      super
    end

    def login(user = "anonymous", passwd = nil, acct = nil)
       store = OpenSSL::X509::Store.new
       store.set_default_paths
       ctx = OpenSSL::SSL::SSLContext.new('SSLv23')
       ctx.cert_store = store
       ctx.verify_mode = OpenSSL::SSL::VERIFY_PEER
       ctx.key = nil
       ctx.cert = nil
       voidcmd("AUTH TLS")
       @sock = OpenSSL::SSL::SSLSocket.new(@sock, ctx)
       @sock.connect
       @sock.post_connection_check(@hostname)
       super(user, passwd, acct)
       voidcmd("PBSZ 0")
    end
  end
end 
```

Heroku的错误：

> SSL_connect 返回=1 errno=0 state=SSLv3 读取服务器证书B：证书验证失败

我发现了这个关于 https 连接的线程： [http ://www.quora.com/What-is-the-path-to-the-SSL-root-certificate-trusted-root-CA-on-Heroku](http://www.quora.com/What-is-the-path-to-the-SSL-root-certificate-trusted-root-CA-on-Heroku)

所以我尝试将它添加到我的 ftptls.rb 文件中，但错误仍然存​​在。

```
ctx.ca_file = '/usr/lib/ssl/certs/ca-certificates.crt' 
```

让这个工作有什么想法吗？

# mysql - 通过列更改进行审计的 MYSQL 触发器

> ID：11255006
> 
> 赞同：1
> 
> 时间：2012-06-29T01:28:36.727
> 
> 标签：mysql, function, triggers, audit, declare

我有多个表，目前对一个几乎是克隆和 1 对 1 的表进行审计。我希望为我的所有表创建一个用于审计目的的表，但不是捕获我想要的所有更改仅插入到审计中的列名更改、旧数据和新数据。

这是我的概念触发器；

```
CREATE TRIGGER `tr_users_audit`
BEFORE UPDATE ON `tbl_users` FOR EACH ROW
BEGIN
    DECLARE @var1 nvarchar(max), @var1 nvarchar(max), @var1 nvarchar(max) 

    [... get values for var's ...]

    INSERT INTO `tbl_audit` (id_user, event_date, table_name, record_id, column_name, old_value, new_value)
    VALUES (NEW.update_userid, NEW.dtupdated, 'tbl_users', NEW.id, [@va1], [@var2], [@var3],)
END 
```

我在网上搜索了几个小时，并没有找到很多审计示例触发器，而我发现的那些触发器并没有做这样的事情。我想我需要相当多的 sql 才能让 3 var 为插入做好准备，但我不确定如果有任何合适的函数是什么。

关于要使用的功能的任何建议都会很棒。

# php - 检查是否使用 Ajax 单击按钮

> ID：11255008
> 
> 赞同：1
> 
> 时间：2012-06-29T01:28:59.830
> 
> 标签：php, javascript, ajax

我将如何使用 Ajax 检查是否单击了按钮？我想要一个按钮，当单击它时，它会发送一个 Ajax 请求（已经完成），并在单击该按钮时收到通知。我只是不知道如何检查它是否是从另一个源文件中按下的，以及在 Ajax 请求中发送哪些标头。我的代码如下（假设我的表单中有一个名为“button”的按钮：

```
<script type = "text/javascript">
function checkVote()
{
    request = new ajaxRequest();
    request.open("POST", "checkButton.php", true);
    request.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
    request.send(params);
}

function ajaxRequest()
{
    try
    {
        request = new XMLHttpRequest();
    }
    catch(e1)
    {
        try
        {
            request = new ActiveXObject('Msxml2.XMLHTTP');
        }
        catch(e2)
        {
            try
            {
                request = new ActiveXObject('Microsoft.XMLHTTP');
            }
            catch(e3)
            {
                request = false;
            }
        }                               
    }
    return request;
}
</script> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-29T01:33:13.657

所有流行的 JavaScript 库/框架都发送`HTTP_X_REQUESTED_WITH`带有值的`XMLHttpRequest`，让您的脚本知道请求是通过 Ajax 发出的。因此，如果您使用 jQuery、Prototype 等，这将为您处理（并使您的 JavaScript 编码生活更轻松）。如果没有，您可以自行设置，以便遵循公认的约定。

```
if ($_SERVER['HTTP_X_REQUESTED_WITH'] === 'XMLHttpRequest') {
  // Ajax request
} 
```

# node.js - Express 错误：EMFILE，打开的文件太多

> ID：11255020
> 
> 赞同：2
> 
> 时间：2012-06-29T01:33:02.963
> 
> 标签：node.js, express, pug

我收到以下非常烦人的错误：

```
Error: EMFILE, too many open files '/home/savagegames.net/views/index.jade'
at Object.openSync (fs.js:240:18)
at Object.readFileSync (fs.js:128:15)
at View.contents (/home/savagegames.net/node_modules/express/lib/view/view.js:121:13)
at Function.compile (/home/savagegames.net/node_modules/express/lib/view.js:68:45)
at ServerResponse._render (/home/savagegames.net/node_modules/express/lib/view.js:417:18)
at ServerResponse.<anonymous> (/home/savagegames.net/node_modules/express/lib/view.js:318:17)
at /home/savagegames.net/node_modules/express-mongoose/index.js:45:21
at resolve (/home/savagegames.net/node_modules/express-mongoose/index.js:75:12)
at ServerResponse.expressmongoose [as render] (/home/savagegames.net/node_modules/express-mongoose/index.js:37:12)
at /home/savagegames.net/controllers/index_controller.coffee:49:18 
```

我认为这是 Express 的问题；我该如何补救？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-26T12:49:46.657

根据我的发现，当发生一些错误并且某些文件没有关闭时会发生这种情况（当然这是一个错误）。就我而言，node-postgres 错误导致（奇迹般地）耗尽了可用的描述符。当我删除导致数据库错误的代码时，EMFILE 消失了。

我想它可以在 node.js 代码中修复 - 它应该在垃圾收集时关闭文件对象。尽管可能会发生这些丢失的文件描述符仍然被其他东西锁定的情况。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-05-26T10:30:43.903

我浏览了很多资源，但相关答案在 express 文档中：

```
app.enable('view cache') 
```

它确实有很大帮助，尤其是很多缓存命中说明，它根本没有打开文件。

# ms-access - 访问替换功能

> ID：11255023
> 
> 赞同：2
> 
> 时间：2012-06-29T01:33:17.753
> 
> 标签：ms-access

我有以下访问查询：

```
SELECT [city]
FROM [patient]
WHERE REPLACE([patient].[city],'  ',' ') LIKE 'San D*' 
```

我相对确定这曾经有效，但现在我明白了`Data type mismatch in criteria expression.`

有任何想法吗？

**编辑**

有人愿意根据自己的数据测试 sql 吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-29T15:08:08.047

问题原来是列中的空值。

解决方案是：

```
SELECT [city]
FROM [patient]
WHERE REPLACE(
  IIF(ISNULL([patient].[city]),'',[patient].[city])
  ,'  ',' ') LIKE 'San D*' 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-29T02:12:36.633

城市是否存储为字符串？如果它存储为数字（可能作为另一个表的 fkey），那么这将是有意义的，因为您正在对其使用字符串操作。

编辑：自我注意：不要忘记 Null 值。

# php - 转换嵌套的 JSON 数组

> ID：11255025
> 
> 赞同：0
> 
> 时间：2012-06-29T01:33:26.710
> 
> 标签：php, javascript, json

我有一个 PHP 函数，它通过

```
$jsonArray= array();
for ($i=0; $i<$dirCount; $i++){
  $query = sprintf("SELECT * FROM tour WHERE FileName= '../%s/%s'", $imageDirectory, $dirArrays[$i]);
  $result = mysqli_query($link, $query);

  if (mysqli_num_rows($result) == 1){
    $row = mysqli_fetch_row($result);
    $jsonArray[]= array('filename'=>$dirArrays[$i], 'location'=>$row[4], 'latitude'=>$row[2], 'longitude'=>$row[3], 'heading'=> $row[5]);
  } 
} 
```

并在通过 ajax 查询执行时返回它。

但是，它在 Firebug 中显示为

```
[
  0 : Object{ 'filename' : , 'location': , 'latitude': , 'longitude: },
  1 : Object{ 'filename' : , 'location': , 'latitude': , 'longitude: }, 
] 
```

等等

如何转换它以便索引位置是`location`值？我的想法是

```
'start' : Object{ 'filename' : , 'location': , 'latitude': , 'longitude: },
'testLab' : { 'filename' : , 'location': , 'latitude': , 'longitude: } 
```

这背后的原因是我有另一个函数，它在与位置字段匹配时创建一个带有数据字段的对象。

```
function buildData(input){
  for (var i=0; i<data.length; i++){
    if (data[i].location == input)
      //create and return object using data[i] fields
  } 
} 
```

我想摆脱循环并依赖条件

```
function buildData(input){
  if (data[input]){
    //same object creation and return
  }
} 
```

这将如何完成？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-29T01:35:21.277

不只是推入数组的每个元素 ( `$jsonArray[] = ...`)，只需分配给相关的键 ( `$jsonArray[$somekey] = ...`)。

# c++ - 为什么用户定义的移动构造函数会禁用隐式复制构造函数？

> ID：11255027
> 
> 赞同：46
> 
> 时间：2012-06-29T01:33:30.877
> 
> 标签：c++, boost, c++11, copy-constructor, rvalue-reference

当我阅读 boost/shared_ptr.hpp 时，我看到了这段代码：

```
//  generated copy constructor, destructor are fine...

#if defined( BOOST_HAS_RVALUE_REFS )

// ... except in C++0x, move disables the implicit copy

shared_ptr( shared_ptr const & r ): px( r.px ), pn( r.pn ) // never throws
{
}

#endif 
```

注释“生成的复制构造函数，析构函数很好，除了在 C++11 中，移动禁用隐式复制”在这里是什么意思？我们是否应该总是自己编写复制 ctor 以防止在 C++11 中出现这种情况？

* * *

## 回答 #1

> 赞同：118
> 
> 时间：2012-06-29T02:15:27.187

我赞成 ildjarn 的回答，因为我发现它既准确又幽默。:-)

我提供了一个替代答案，因为我假设问题的标题是 OP 可能想知道标准**为什么**这么说。

**背景**

C++ 已经隐式生成了复制成员，因为如果它没有，它就会在 1985 年死产，因为它与 C 是**如此**不兼容。在那种情况下，我们今天就不会进行这个对话，因为 C++ 将不存在.

话虽如此，隐式生成的副本成员类似于“与魔鬼交易”。没有它们，C++ 就不可能诞生。但它们是邪恶的，因为它们在大量实例中默默地生成错误代码。C++ 委员会并不愚蠢，他们知道这一点。

**C++11**

现在 C++ 已经诞生，并且已经发展成为一个成功的大人，委员会只想说：我们不再做隐式生成的复制成员了。他们太危险了。如果您想要一个隐式生成的副本成员，您必须选择加入该决定（而不是选择退出）。但是考虑到如果这样做会破坏现有 C++ 代码的数量，那无异于自杀。有一个*巨大*的向后兼容性问题是非常合理的。

所以委员会达成了一个妥协的立场：如果你声明了 move 成员（遗留的 C++ 代码不能这样做），那么我们将假设默认的 copy 成员可能会做错事。`=default`如果需要，请选择加入（使用）。或者自己写。否则，它们将被隐式删除。迄今为止，我们在一个只有移动类型的世界中的经验表明，这个默认位置实际上是非常常见的（例如`unique_ptr`、`ofstream`、`future`等）。选择加入的费用实际上非常小`= default`。

**期待**

委员会甚至想说：如果你写了析构函数，那么隐式复制成员很可能是不正确的，所以我们将删除它们。这是 C++98/03 “三法则”。然而，即使这样也会破坏很多代码。然而，委员会在 C++11 中表示，如果您提供用户声明的析构函数，则不**推荐使用**隐式生成的复制成员。这意味着可以在未来的标准中删除此功能。并且现在任何一天，您的编译器都可能在这种情况下开始发出“不推荐使用的警告”（标准不能指定警告）。

**结论**

所以请注意：C++ 已经成长和成熟了几十年。这意味着您父亲的 C++ 可能需要迁移以处理您孩子的 C++。这是一个缓慢而渐进的过程，因此您不会举手而只是移植到另一种语言。但它**是**变化，即使缓慢。

* * *

## 回答 #2

> 赞同：31
> 
> 时间：2012-06-29T01:45:09.373

因为 C++ 标准是这样说的——第 12.8/7 节：

> 如果类定义没有显式声明复制构造函数，则*隐*式声明一个。**如果类定义声明了移动构造函数或移动赋值运算符，则隐式声明的复制构造函数定义为已删除**；否则，它被定义为默认值。如果类具有用户声明的复制赋值运算符或用户声明的析构函数，则不推荐使用后一种情况。因此，对于类定义
> 
> ```
> struct X {
>     X(const X&, int);
> }; 
> ```
> 
> 复制构造函数是隐式声明的。如果用户声明的构造函数后来被定义为
> 
> ```
> X::X(const X& x, int i =0) { /* ... */ } 
> ```
> 
> 那么由于歧义，对 X 的复制构造函数的任何使用都是格式错误的；不需要诊断。

（强调我的。）

# javascript - Phonegap - Phonegap 到 Utils 更改

> ID：11255028
> 
> 赞同：1
> 
> 时间：2012-06-29T01:33:52.697
> 
> 标签：javascript, html, cordova, phonegap-plugins

所以我有一个运行Phonegap 1.4.0（不要问）的应用程序，我决定升级到1.8.1，这样做之后Phonegap全局变量不再存在，被utils替换。

所以我转换了每一次出现：

```
var thisUUID = Phonegap.createUUID(); 
```

到：

```
var thisUUID = utils.createUUID(); 
```

仅在运行应用程序时遇到“utils”未定义参考错误。所以我打开了 cordova-1.8.1.js 并看到 utils 和 utils.createUUID 确实是在全球范围内定义的，所以我不知道为什么当我尝试调用它时我没有生成 UUID，也没有任何相关的东西.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T07:48:58.487

我有同样的要求，但我发现 utils 没有作为外部模块导出，所以我按以下方式使用它：

```
var utils = cordova.require('cordova/utils');
var myid = utils.createUUID(); 
```

# python - 获取列表中的最大重复项

> ID：11255035
> 
> 赞同：1
> 
> 时间：2012-06-29T01:34:34.233
> 
> 标签：python, arrays, list

我有这个清单：

```
mylist = [20, 30, 25, 20, 30] 
```

使用获取重复值索引后

```
[i for i, x in enumerate(mylist) if mylist.count(x) > 1] 
```

结果是：

```
`[0, 1, 3, 4]` 
```

有两对重复值。我想知道，我怎样才能只获得更高的重复值？在此列表中，它是`30`或它的任何索引，`1`或者`4`，而不是重复值的整个列表。

问候...

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-29T02:45:34.263

这个是 O(n)

```
>>> from collections import Counter
>>> mylist = [20, 30, 25, 20, 30]
>>> max(k for k,v in Counter(mylist).items() if v>1)
30 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-29T01:37:52.580

获取最大重复值：

```
max(x for x in mylist if mylist.count(x) > 1) 
```

不幸的是，由于重复的 count() 调用，这具有 O(n**2) 性能。这是一种更冗长的方法来执行具有 O(n) 性能的相同操作，如果列表很长，这很重要：

```
seen = set()
dups = set()
for x in mylist:
    if x in seen:
        dups.add(x)
    seen.add(x)
max_dups = max(dups) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-29T02:11:40.870

另一种 O(n) 的做法，只是因为......

```
>>> from collections import defaultdict
>>> 
>>> mylist = [20,30,25,20,30]
>>> dd = defaultdict(int)
>>> for i in mylist:
...    dd[i] += 1
...
>>> max(i for i in dd if dd[i] > 1)
30 
```

您也可以使用常规的旧字典来执行此操作：

```
>>> d = dict.fromkeys(mylist, 0)
>>> for i in mylist:
...   d[i] += 1
... 
>>> max(i for i in d if d[i] > 1)
30 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-29T05:18:00.243

只是一些需要考虑的相对时间：

```
from collections import Counter
from collections import defaultdict

mylist = [20, 30, 25, 20, 30]

def f1():
    seen = set()
    dups = set()
    for x in mylist:
        if x in seen:
            dups.add(x)
        seen.add(x)
    max_dups = max(dups)

def f2():
    max(x for x in mylist if mylist.count(x) > 1)

def f3():
    max(k for k,v in Counter(mylist).items() if v>1)

def f4():
    dd = defaultdict(int)
    for i in mylist:
        dd[i] += 1

    max(i for i in dd if dd[i] > 1)

def f5():
    d = dict.fromkeys(mylist, 0)            
    for i in mylist:
       d[i] += 1

    max(i for i in d if d[i] > 1)

cmpthese([f1,f2,f3,f4,f5]) 
```

印刷：

```
 rate/sec     f3     f4     f5     f2     f1
f3   93,653     -- -63.3% -73.0% -79.2% -83.6%
f4  255,137 172.4%     -- -26.3% -43.3% -55.3%
f5  346,238 269.7%  35.7%     -- -23.1% -39.3%
f2  450,356 380.9%  76.5%  30.1%     -- -21.0%
f1  570,419 509.1% 123.6%  64.7%  26.7%     -- 
```

所以明智地选择

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-29T01:44:03.363

```
$ cat /tmp/1.py
from itertools import groupby

def find_max_repeated(a):
    a = sorted(a, reverse = True)
    for k,g in groupby(a):
        gl = list(g)
        if len(gl) > 1:
            return gl[0]

a = [1,1,2,3,3,4,5,4,6]
print find_max_repeated(a)

$ python /tmp/1.py
4 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-01-24T00:54:43.217

```
mylist = [20, 30, 25, 20, 30]
result = max((mylist.count(x), x) for x in set(mylist))
print(result)
>>> (2, 30) 
```

下面是它的工作原理：

*   set(mylist) - 您只从 mylist (20, 30, 25) 创建唯一值
*   然后使用生成器理解创建元组，其中第一个项目出现该值的次数 ((1, 25), (2, 20), (2, 30))
*   由于元组是逐项可比较的，因此您可以获得序列中的最大元组，在本例中为 (2, 30) 因为它大于 (2, 20)

# javascript - jQuery 缓动弹跳动画

> ID：11255036
> 
> 赞同：2
> 
> 时间：2012-06-29T01:35:10.527
> 
> 标签：javascript, jquery

我正在尝试为我的动画添加反弹效果，但在这样做时遇到了麻烦。我一直在关注[jQuery API animate() 页面](http://api.jquery.com/animate/)，但一直失败。我正在尝试创建一种效果，使我的对象从顶部滑入并在固定到位之前弹跳。

```
$(this).animate( {
        "top": "+=100px"
    }, { 
        duration: '400',
        specialEasing: {
            width: 'linear',
            height: 'easeOutBounce'
        },
    }
); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-29T01:38:39.103

我不太确定您希望反弹的具体元素是什么，但试试这个：

```
$(this).animate({ "top" : "+=100px" }, 400, "easeOutBounce"); 
```

这需要**jQuery Easing**插件。更多[信息](https://gsgd.co.uk/sandbox/jquery/easing/)，[github](https://github.com/gdsmith/jquery.easing/)或[CDN](https://cdnjs.cloudflare.com/ajax/libs/jquery-easing/1.4.1/jquery.easing.min.js)。

**演示：**

```
$("#target").animate({ "top" : "+=100px" }, 400, "easeOutBounce");
```

```
#target{ position:absolute; left:50px; top:50px; background:red; }
```

```
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-easing/1.4.1/jquery.easing.min.js"></script>

<div id='target'>Hellow World<div>
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-10-10T10:39:23.217

要使用 jQuery 实现`bounce`缓动效果，您需要**扩展**有限数量的[可用缓](http://per-property-easing)动方法并添加更多高级方法。[这是](http://gsgd.co.uk/sandbox/jquery/easing/)一个提供许多很酷的缓动功能的插件。

您还可以复制所需的缓动方法（如果您不需要插件带来的所有可能性）并将其合并到代码中的某个位置：

```
/* jQuery easing */
jQuery.extend( jQuery.easing,{
    def: 'easeOutQuad',
    easeOutBounce: function (x,t,b,c,d) {
        if ((t/=d) < (1/2.75)) {
            return c*(7.5625*t*t) + b;
        } else if (t < (2/2.75)) {
            return c*(7.5625*(t-=(1.5/2.75))*t + .75) + b;
        } else if (t < (2.5/2.75)) {
            return c*(7.5625*(t-=(2.25/2.75))*t + .9375) + b;
        } else {
            return c*(7.5625*(t-=(2.625/2.75))*t + .984375) + b;
        }
    }
}); 
```

# 演示：

```
function bounceDown(){
  $('.ball').animate({top:150}, 1000, 'easeOutBounce', onEnd);
}

function onEnd(){
  $(this).animate({top:0}, 500, 'easeOutCubic', bounceDown);
}

bounceDown();
```

```
.ball{ 
  background:red; 
  border-radius:50%;
  display: inline-block;
  padding:30px;
  position:relative;
}
```

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
<script src="http://gsgd.co.uk/sandbox/jquery/easing/jquery.easing.1.3.js"></script>

<div class='ball'></div>
```

# java - 表的 JPA 函数依赖关系

> ID：11255038
> 
> 赞同：1
> 
> 时间：2012-06-29T01:35:28.097
> 
> 标签：java, jpa

在我的“国家”表列中，“国家名称”被“城市”和“州”表引用，现在我需要通过 JPA 检查数据库表引用的列以获取给定的国家名称。不使用 NativeQuery 是可能的。我通过 NativeQuery 尝试过，但我需要 NamedQuery 或 Query。

# java - JTable 通过选中另一列中的一个来启用和禁用复选框

> ID：11255041
> 
> 赞同：2
> 
> 时间：2012-06-29T01:36:02.867
> 
> 标签：java, swing, checkbox, jtable, jcheckbox

我有一个 JTable，其中几列被绘制为复选框。我想要做的是通过选中/取消选中 B 列中的相应复选框来启用/禁用 A 列的复选框。

我已经设法根据[这个例子](https://stackoverflow.com/questions/5798980/jtable-disable-checkbox-in-cell)做到了，但是我对新启用/禁用的复选框有一个问题——它们没有正确刷新。只有在我单击表格中的任何其他单元格后，才会刷新最后启用/禁用的复选框。

问题看起来像这样（“参考结构”列是启用/禁用复选框的列）：

复选框未启用：

![复选框未启用](../Images/d0bb516fe2872f5245d349efeb3629f8.png)

复选框未禁用：

![复选框未禁用](../Images/df361c719816b38e3eb393c14c04b34d.png)

这是我的 JTable 代码：

```
public class StructuresJTable extends JTable {

public StructuresJTable() {
    super();
}

public StructuresJTable(TableModel dm) {
    super(dm);
}

@Override
public Component prepareRenderer(TableCellRenderer renderer, int row,
        int col) {
    Component c = super.prepareRenderer(renderer, row, col);
    if (col == StructuresTableModel.COMPARISON_REF_STRUCT_COL) {
        c.setEnabled((Boolean) this.dataModel.getValueAt(row,
                StructuresTableModel.COMPARE_COL));
    } else {
        c.setEnabled(true);
    }
    return c;
}

} 
```

你对如何使它工作有什么建议吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-29T03:09:18.847

更新：使用`prepareRenderer()`与实施`TableCellRenderer`并不像正确调节模型那么重要。如果模型正确，则视图将随之而来。你需要一个合适的[模型](http://docs.oracle.com/javase/tutorial/uiswing/components/table.html#data)、[渲染器和编辑器](http://docs.oracle.com/javase/tutorial/uiswing/components/table.html#editrender)。

*   模型：您需要一些数据结构来保存每个单元格的状态。在您的 实现中`TableModel`，覆盖`setValueAt()`以在发生更改时调整模型中每个单元格的所需状态。

*   渲染器：在您的, 中`TableCellRenderer`，覆盖`getTableCellRendererComponent()`以调整模型中指定的每个单元格的渲染器。

*   编辑：[这里](https://stackoverflow.com/a/4528604/230513)`DefaultCellEditor`隐式使用的 应该足够了。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-29T01:51:21.760

我没有看过你的代码，但一般来说，对于 Swing 表、列表和树，渲染器实例被重用以绘制许多行。您需要告诉 JTable 其内容已更改，以便它可以重绘相关行。使用模型通知其 TableModelListeners 某些行已更改。

# salesforce - Apex 作业未在触发器中异步运行

> ID：11255044
> 
> 赞同：3
> 
> 时间：2012-06-29T01:36:48.267
> 
> 标签：salesforce

我在删除触发器之前运行 Apex 作业，并注意到通过 Salesforce 界面删除单个营销活动大约需要 34 秒，并且当营销活动被删除时，Apex 作业已完成运行。当我使用 VisualForce 页面在相同数量的记录 (15,000) 上运行相同的 Apex 作业时，Apex 作业会排队并在 VisualForce 页面完成后运行。

在此屏幕截图中，第一个作业使用 VisualForce 排队，第二个和第三个作业使用触发器排队：

![顶点工作](../Images/f9919b6e4ede75282d610738fd6ce633.png)

如您所见，虽然相同数量的记录 (15,000) 在使用触发器排队时由相同的 Apex 作业处理，但没有创建批次，提交和完成日期完全不同。

Apex 作业在触发器中排队：

```
trigger DeleteChilds on Campaign (before delete) {
public static final Integer MAX_DELETED = 500;
Set<ID> ids = new Set<Id>();
List<Parent__c> objs = new List<Parent__c>();   

for(Campaign c : Trigger.old)
    ids.add(c.Id);

objs = [SELECT Id FROM Parent__c WHERE Campaign__c IN :ids];

ids = new Set<Id>();

for(Parent__c s : objs)
    ids.add(s.Id);

Integer childCount = [SELECT count() FROM Childs__c WHERE Parent__c IN :ids];

if(childCount < MAX_DELETED){
    List<Childs__c> childs = [SELECT Id FROM Childs__c WHERE Parent__c IN :ids];

    delete childs;  
} else {                 
    String deleteQuery = 'SELECT Id FROM Childs__c WHERE ';

    for(ID id : ids){
        deleteQuery += String.format(' Parent__c = \'\'{0}\'\' OR', new String[] {id});
    }   

    if(deleteQuery.endsWith('OR')){
        deleteQuery = deleteQuery.substring(0, deleteQuery.length() - 2);
    }               

    BatchDeleteChilds batch = new BatchDeleteChilds();
    batch.deleteQuery = deleteQuery;

    ID batchId = Database.executeBatch(batch);      
}

delete objs;
} 
```

这是 Apex 作业：

```
global class BatchDeleteChilds implements Database.Batchable<sObject> {
public String deleteQuery;

global Database.QueryLocator start(Database.BatchableContext context){
    return Database.getQueryLocator(deleteQuery);
}

global void execute(Database.BatchableContext context, List<sObject> records){
    delete records;
    DataBase.emptyRecycleBin(records);
}   

global void finish(Database.BatchableContext context){

}   
} 
```

有没有其他人经历过这样的事情？

谢谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T00:37:15.223

您正在查看一个您可能永远不会赢的比赛条件。已删除的父对象将在批处理作业执行时提交，这将使数据库中从子对象到父对象的查找无效。因此，您传递到批处理中的查询将有零记录。

*   预删除子项：（name = 'example'，parent__c = '123'）
*   删除后（批量前）子项：（名称 = 'example'，parent__c = null）

我不知道激发这种方法的设计决策，但还有其他选项可用于批量删除子记录。最简单的方法是让孩子与父母的关系成为主要细节。使用这种类型的关系会自动删除子记录。

其次，您可以使用 visualforce 页面覆盖父对象的删除按钮。然后控制器将计算孩子的数量并决定是否启动批处理以删除它们。然后让批处理等待删除父对象，直到它的完成方法。

# wpf - 样式组合框以删除内部填充并摆脱圆角。如何？

> ID：11255050
> 
> 赞同：1
> 
> 时间：2012-06-29T01:37:42.470
> 
> 标签：wpf, xaml, styles

我使用 Blend 复制样式，进行了我需要的大部分更改，但我确实坚持如何完全删除舍入并删除周围的空白。带箭头的按钮应为 18，整个下拉菜单应为 18 高。现在，当按钮未居中时，周围有填充和白色。另外，这个四舍五入对吗？

![在此处输入图像描述](../Images/4d80e4105dcaae8b6ee7bf07764d1edf.png)

这是我的风格：

```
<Style x:Key="ComboBoxReadonlyToggleButton" TargetType="{x:Type ToggleButton}">
            <Setter Property="OverridesDefaultStyle" Value="true"/>
            <Setter Property="IsTabStop" Value="false"/>
            <Setter Property="Focusable" Value="false"/>
            <Setter Property="ClickMode" Value="Press"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="{x:Type ToggleButton}">
                        <Microsoft_Windows_Themes:ButtonChrome Height="18"
                            x:Name="Chrome" RoundCorners="False" 
                            BorderBrush="{TemplateBinding BorderBrush}" 
                            Background="{TemplateBinding Background}" 
                            RenderMouseOver="{TemplateBinding IsMouseOver}" 
                            RenderPressed="{TemplateBinding IsPressed}" SnapsToDevicePixels="true">
                            <Border
                                BorderBrush="#a6a6a6" BorderThickness="1"
                                HorizontalAlignment="Right" Width="18" Height="18">
                                <Border.Background>                                    
                                    <LinearGradientBrush StartPoint="0.5,0" EndPoint="0.5,1">
                                        <GradientStop Color="#899ba5" />
                                        <GradientStop Color="#4f6473" Offset="1" />
                                    </LinearGradientBrush>                                    
                                </Border.Background>
                                <Grid>
                                    <Path x:Name="Arrow" Fill="#dcdcdc" HorizontalAlignment="Center" VerticalAlignment="Center">
                                        <Path.Data>
                                            <Geometry>M 0 0 L 3.5 4 L 7 0 Z</Geometry>
                                        </Path.Data>
                                    </Path>
                                </Grid>
                            </Border>                            
                        </Microsoft_Windows_Themes:ButtonChrome>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>        
        <Style x:Key="ComboBoxStyle" TargetType="{x:Type ComboBox}">
            <Setter Property="Height" Value="18" />
            <Setter Property="Foreground" Value="#1a3e55"/>
            <Setter Property="Background" Value="#f7f7f7"/>
            <Setter Property="BorderBrush" Value="#a6a6a6"/>
            <Setter Property="ScrollViewer.HorizontalScrollBarVisibility" Value="Auto"/>
            <Setter Property="ScrollViewer.VerticalScrollBarVisibility" Value="Auto"/>

            <Setter Property="ScrollViewer.CanContentScroll" Value="true"/>
            <Setter Property="ScrollViewer.PanningMode" Value="Both"/>
            <Setter Property="Stylus.IsFlicksEnabled" Value="False"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="{x:Type ComboBox}">
                        <Grid x:Name="MainGrid" 
                            SnapsToDevicePixels="true">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition MinWidth="{DynamicResource {x:Static SystemParameters.VerticalScrollBarWidthKey}}" Width="0"/>
                            </Grid.ColumnDefinitions>
                            <Popup x:Name="PART_Popup" AllowsTransparency="true" Grid.ColumnSpan="2" IsOpen="{Binding IsDropDownOpen, RelativeSource={RelativeSource TemplatedParent}}" Margin="1" PopupAnimation="{DynamicResource {x:Static SystemParameters.ComboBoxPopupAnimationKey}}" Placement="Bottom">
                                <Microsoft_Windows_Themes:SystemDropShadowChrome x:Name="Shdw" Color="Transparent" MaxHeight="{TemplateBinding MaxDropDownHeight}" MinWidth="{Binding ActualWidth, ElementName=MainGrid}">
                                    <Border x:Name="DropDownBorder" BorderBrush="{DynamicResource {x:Static SystemColors.WindowFrameBrushKey}}" BorderThickness="1" Background="{DynamicResource {x:Static SystemColors.WindowBrushKey}}">
                                        <ScrollViewer x:Name="DropDownScrollViewer">
                                            <Grid RenderOptions.ClearTypeHint="Enabled">
                                                <Canvas HorizontalAlignment="Left" Height="0" VerticalAlignment="Top" Width="0">
                                                    <Rectangle x:Name="OpaqueRect" Fill="{Binding Background, ElementName=DropDownBorder}" Height="{Binding ActualHeight, ElementName=DropDownBorder}" Width="{Binding ActualWidth, ElementName=DropDownBorder}"/>
                                                </Canvas>
                                                <ItemsPresenter x:Name="ItemsPresenter" KeyboardNavigation.DirectionalNavigation="Contained" SnapsToDevicePixels="{TemplateBinding SnapsToDevicePixels}"/>
                                            </Grid>
                                        </ScrollViewer>
                                    </Border>
                                </Microsoft_Windows_Themes:SystemDropShadowChrome>
                            </Popup>
                            <ToggleButton 
                                BorderBrush="{TemplateBinding BorderBrush}" 
                                Background="{TemplateBinding Background}" 
                                Grid.ColumnSpan="2" 
                                IsChecked="{Binding IsDropDownOpen, Mode=TwoWay, RelativeSource={RelativeSource TemplatedParent}}" 
                                Style="{StaticResource ComboBoxReadonlyToggleButton}"/>
                            <ContentPresenter 
                                ContentTemplate="{TemplateBinding SelectionBoxItemTemplate}" 
                                ContentTemplateSelector="{TemplateBinding ItemTemplateSelector}" 
                                Content="{TemplateBinding SelectionBoxItem}" 
                                ContentStringFormat="{TemplateBinding SelectionBoxItemStringFormat}" 
                                HorizontalAlignment="{TemplateBinding HorizontalContentAlignment}" 
                                IsHitTestVisible="false" 
                                Margin="{TemplateBinding Padding}" 
                                SnapsToDevicePixels="{TemplateBinding SnapsToDevicePixels}" 
                                VerticalAlignment="{TemplateBinding VerticalContentAlignment}"/>
                        </Grid>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>           
        </Style> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T20:56:24.787

好吧，这次我*终于搞定了。*

所有这些都在您的 ButtonChrome 样式模板中。我使用了这个答案[https://stackoverflow.com/a/4554309/1449777](https://stackoverflow.com/a/4554309/1449777)来了解如何更改这种风格。从此处提供的链接下载类文件： [http ://www.mediafire.com/?wnra4qj4qt07wn6](http://www.mediafire.com/?wnra4qj4qt07wn6)

**首先，让我们摆脱圆角。**

将切换按钮的样式更新为按钮 chrome 类的本地副本并设置 RoundedCorners="false"。

```
<local:MyButtonChrome RoundCorners="False" ... > 
```

为了修复圆角，我修改了 buttonchrome 类以正确实现 RoundedCorners="false"。在 DrawBorder 函数中，我将绘制边框（第 128 行）的逻辑更改为：

```
if (this.RoundCorners)
{
    Rect rectangle = new Rect(bounds.Left + 0.5, bounds.Top + 0.5, bounds.Width - 1.0, bounds.Height - 1.0);
    if (base.IsEnabled && (pen != null))
    {
        dc.DrawRoundedRectangle(null, pen, rectangle, 2.75, 2.75);
    }
    if (borderOverlayPen != null)
    {
        dc.DrawRoundedRectangle(null, borderOverlayPen, rectangle, 2.75, 2.75);
    }
}
else
{
    Rect rectangle = new Rect(bounds.Left + 0.5, bounds.Top + 0.5, bounds.Width - 1.0, bounds.Height - 1.0);
    if (base.IsEnabled && (pen != null))
    {
        dc.DrawRectangle(null, pen, rectangle);
    }
    if (borderOverlayPen != null)
    {
        dc.DrawRectangle(null, borderOverlayPen, rectangle);
    }
} 
```

我将 InnerBorder 函数（第 180 行）更改为：

```
private void DrawInnerBorder(DrawingContext dc, ref Rect bounds)
{
    if (DisableInnerBorder == false && ((base.IsEnabled || this.RoundCorners) && ((bounds.Width >= 4.0) && (bounds.Height >= 4.0))))
    {
        Pen innerBorderPen = this.InnerBorderPen;
        if (innerBorderPen != null)
        {
            if (this.RoundCorners)
            {
                dc.DrawRoundedRectangle(null, innerBorderPen, new Rect(bounds.Left + 1.5, bounds.Top + 1.5, bounds.Width - 3.0, bounds.Height - 3.0), 1.75, 1.75);
            }
            else
            {
                dc.DrawRoundedRectangle(null, innerBorderPen, new Rect(bounds.Left + 1.5, bounds.Top + 1.5, bounds.Width - 3.0, bounds.Height - 3.0), 0, 0);
            }
        }
    }
} 
```

**现在让我们处理那个填充。**

这个需要一段时间才能发现，但我在函数 ArrangeOverride（第 40 行）中找到了它。只需删除以下函数，它将不再覆盖放置。

```
protected override Size ArrangeOverride(Size finalSize) 
```

**结果：**

只是为了证明它确实有效......

![在此处输入图像描述](../Images/39972a4231139145b1d476ced25c06c1.png)

# java - 使用接口解组复杂类型的 JAXB/Jersey 问题

> ID：11255052
> 
> 赞同：1
> 
> 时间：2012-06-29T01:38:00.480
> 
> 标签：java, jaxb, jersey

我正在努力解决 marshal/unmarshall JSon 的几个问题，看起来我永远不会让它工作:(

看第一个问题：我有一个包含几个字段的类响应：字符串错误、字符串错误代码和对象响应。负责填写所有响应数据的类，如果需要填写错误字段并将其发送回客户端以进行进一步分析。

“对象响应”可以是任何类型（为什么是对象？因为它不适用于接口，这将是问题的第二部分）

**代码片段：**

```
 @XmlRootElement
    @XmlAccessorType(XmlAccessType.FIELD)
    public class Response
    {
        public static final String ERROR_FIELD_NAME = "error";
        public static final String ERROR_CODE_FIELD_NAME = "error_code";
        public static final String RESPONSE_FIELD_NAME = "response";

        @XmlElement(name = Response.ERROR_CODE_FIELD_NAME)
        private String errorCode;

        @XmlElement(name = Response.ERROR_FIELD_NAME)
        private String errorMessage;

        @XmlElementRefs(
            {@XmlElementRef(type = AClassResponse.class),
        @XmlElementRef(type = BClassResponse.class)})
        private Object entity; 
```

等等...

```
import javax.xml.bind.annotation.XmlRootElement;
import javax.xml.bind.annotation.adapters.XmlAdapter;

//@XmlRootElement(name = Response.RESPONSE_FIELD_NAME)
//@XmlJavaTypeAdapter(AClassResponse.Adapter.class)
@XmlRootElement
public class AClassResponse
{
    private TargetObject target;

    public TargetObject getTarget()
    {
        return target;
    }

    public void setTarget(TargetObject target)
    {
        this.target = target;
    }
}

JSON 1 (for XmlElementRef AClassResponse.class ):
    { 
      "error" : "",
      "error_code" : "",
      **"aClassResponse" :** 
         { "target" : 
            { "accountId" : "5bd0812b",
              "id" : "6ccb6ae1-30c3-4aa0-8d1e-6ed61b6bb217",
              "isCaseSensitive" : "false",
              "maxNumberOfConnections" : "0",
              "name" : "targetName",
              "pathDelimiter" : "/",
              "type" : "SMB"
            } 
         }
    }

JSON 1 (for XmlElementRef BClassResponse.class):
   { 
      "error" : "",
      "error_code" : "",
      **"bClassResponse" :** 
         { "target" : 
            { "accountId" : "5bd0812b",
              "id" : "6ccb6ae1-30c3-4aa0-8d1e-6ed61b6bb217",
              "isCaseSensitive" : "false",
              "maxNumberOfConnections" : "0",
              "name" : "targetName",
              "pathDelimiter" : "/",
              "type" : "SMB"
            } 
         }
    } 
```

现在的问题：

看看上面的 JSon，**“aClassResponse”：**和**“bClassResponse”：**总是动态的（意味着名称是从类名派生的）——这不是我需要的。

我的目标是给这个名字一个持久的名字**"response"**，这样任何远程客户端都会意识到这一点并依赖这个名字。

我知道，要解决这个问题，我可以用**@XmlRootElement(name = "response")注释****AClassResponse.class**，并且它确实有效，直到您定义了多个 @XmlElementRef。

 **如果两个或更多，这会导致编组/取消编组出现问题，并且 JAXB 不知道绑定哪个类应该绑定到实体字段，因为它也依赖于名称（名称 =“响应”）

```
@XmlElementRefs(
        {@XmlElementRef(type = AClassResponse.class),
        @XmlElementRef(type = BClassResponse.class)})
        private Object entity; 
```

它像这样对待它：

```
@XmlElementRefs(
            {@XmlElementRef(name = "response", type = AClassResponse.class),
            @XmlElementRef(name = "response", type = BClassResponse.class)})
            private Object entity; 
```

假设这是一个正确的行为，我无法为任何对象类型保持相同（名称 =“响应”）。

好的，我尝试通过为每个实现引入接口而不是对象类型 + @XmlJavaTypeAdapter(AClassResponse.Adapter.class) 来解决它 - 但是它也没有工作，抛出不支持接口的异常等等......

这篇文章似乎可以对此有所了解，[http://jaxb.java.net/guide/Mapping_interfaces.html](http://jaxb.java.net/guide/Mapping_interfaces.html)

但它也失败了，说它不能实例化抽象类**abstract class AbstractFooImpl**

```
@XmlJavaTypeAdapter(AbstractFooImpl.Adapter.class)
interface IFoo {
  ...
}
**abstract class AbstractFooImpl implements IFoo {**
  ...

  static class Adapter extends XmlAdapter<AbstractFooImpl,IFoo> {
    IFoo unmarshal(AbstractFooImpl v) { return v; }
    AbstractFooImpl marshal(IFoo v) { return (AbstractFooImpl)v; }
  }
}

class SomeFooImpl extends AbstractFooImpl {
  @XmlAttribute String name;
  ...
}

class AnotherFooImpl extends AbstractFooImpl {
  @XmlAttribute int id;
  ...
}

class Somewhere {
  public IFoo lhs;
  public IFoo rhs;
} 
```

关于我如何解决这个问题的任何建议？请帮忙..

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T01:51:09.130

您可以使用`@XmlElements`注释并执行以下操作：

```
@XmlElements({
    @XmlElementRef(name = "response", type = AClassResponse.class),
    @XmlElementRef(name = "response", type = BClassResponse.class)
})
private Object entity; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T01:59:42.823

JAXB 不做接口。解决方案是泛型或抽象类（使用 @XmlTransient 注释以使 JAXB 忽略基类并使用 @XmlSeeAlso 使其使用特定实现）。这解决了 Java 部分，但您仍然需要修复等式的 XSD 部分（请记住，JAXB 只能通过 Jersey 看到您的 JSON 的 XML 版本）。

为此，您可以在字段上使用 @XmlElementRef 和 @XmlElementRefs 注释，以便 XSD 映射到特定实现的选择。

```
@XmlTransient // JAXB doesn't like abstract types, so do not map this type name
// XmlSeeAlso only required if BaseImpl/BaseImpl2 are not otherwise auto-discovered by JAXB
@XmlSeeAlso({BaseImpl.class, BaseImpl2.class })
public abstract class Base {
  @XmlElement(name='still-works')
  public String thisFieldWillStillBeMappedByJAXB;
}

@XmlRootElement("base-impl")
public class BaseImpl {}

@XmlRootElement("alternative")
public class BaseImpl2 {}

public class Complex<E extends Base> {
   @XmlElementRefs({
     @XmlElementRef(type=BaseImpl.class), 
     @XmlElementRef(type=BaseImpl2.class)
   })
   public E impl; // will be an instance of either "base-impl" or "alternative"
} 
```**

# ruby-on-rails - 尝试在 Mac OS X 上启动 rails 服务器时出现奇怪的 PostgreSQL 错误

> ID：11255056
> 
> 赞同：0
> 
> 时间：2012-06-29T01:38:40.540
> 
> 标签：ruby-on-rails, ruby-on-rails-3, postgresql, rails-postgresql

我想让一个使用 PostgreSQL 的 rails 应用程序，但是发生了一些奇怪的事情。我的朋友们能够安装 PostgreSQL 并执行：

```
sudo su
su postgres
createdb development 
```

其次是

```
rails server 
```

没有错误。但是，当我尝试这样做时，出现了一个奇怪的错误：

```
/Users/user/.rvm/gems/ruby-1.9.3-p194/gems/activerecord 3.2.5/lib/active_record/connection_adapters/postgresql_adapter.rb:1151:in `async_exec': PG::Error: ERROR:  relation "reports" does not exist (ActiveRecord::StatementInvalid) 

LINE 4:              WHERE a.attrelid = '"reports"'::regclass
                                    ^
:             SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
          FROM pg_attribute a LEFT JOIN pg_attrdef d
            ON a.attrelid = d.adrelid AND a.attnum = d.adnum
         WHERE a.attrelid = '"reports"'::regclass
           AND a.attnum > 0 AND NOT a.attisdropped
         ORDER BY a.attnum 
```

请注意，“报告”是应用程序中的模型。

对于它的价值，database.yml 文件如下所示：

```
development:
  adapter: postgresql
  encoding: unicode
  database: development
  pool: 5
  username: postgres
  password: post 
```

（我不知道 pool 是什么意思，但我已经将我的 postgres 密码设置为 post）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T01:41:28.623

你跑了`rake db:migrate`吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T11:37:05.160

`WHERE a.attrelid = '"reports"'::regclass ...`引用过多。它应该是`WHERE a.attrelid = 'reports'::regclass ...`

# actionscript-3 - Adobe Flash AEC 的工作原理是什么？+ AEC 部分工作

> ID：11255057
> 
> 赞同：2
> 
> 时间：2012-06-29T01:38:50.630
> 
> 标签：actionscript-3, flash, aec

我正在尝试构建一个简单的 red5-flash 应用程序，两个人可以在其中相互交谈。我有两个用于 A 和 B 的 Flash 播放器，每个都有一个发布者部分（接收实时网络摄像头并将其发送到 red5 服务器，进行记录和发布）和一个查看器部分（从 red5 获取对方的流并播放）。

**问题：**我正在通过 getEnhancedMicrophone 使用 Adob​​e 的声学回声消除。它带来了显着的改善并减少了回声，A 和 B 的谈话没有回声 - 这很好 - 但是当我在服务器机器上播放录制的版本时，回声仍然存在。

**问题1：**这怎么可能？任何可能的解决方案？

**问题 2：** Adobe AEC 实际是如何工作的？
它是否使用某种比较方法将反馈过滤到麦克风中（淡出从音频输出出来的音频，并再次通过输入进入）？
或
它是否像这样比较输入 - 2 向 1 发送一些东西，发生反馈，并且 1 向 2 发送“回声”（当然通过 red5 并因此被记录） - 2 接收回声并通过将其与什么进行比较来过滤它它发送得更早等等？

# sql - 获取由另一列分组的多个 AVG 的 MAX

> ID：11255059
> 
> 赞同：2
> 
> 时间：2012-06-29T01:38:57.327
> 
> 标签：sql, sqlite, aggregate-functions

我有一个用于保龄球中心的查询，用于按降序对所有最佳平均值进行排序。

一切都很好，除了如果一个球员在两个不同的联赛打球（或者当我没有按赛季分组，因为每个赛季后的平均数都重置了），我只想要给定球员的最佳平均数，因为我不想要重复. （同一球员在不同联赛的平均数不会累积，因此一名球员可以有多个平均数）

我以为我在 Stack Overflow 上询问后不久就解决了这个问题（[这里](https://stackoverflow.com/questions/9740421/get-max-average-for-each-distinct-record-in-a-sql-query)），但最近，有人告诉我，有时查询存在一些问题，我不知道我之前是怎么没有注意到的。

问题是，即使我没有得到重复的名字并且我得到了正确的 MAX 平均值，但如果一个球员在多个联赛中打球，其他列，例如联赛名称、比赛次数和赛季并不总是正确的. 这是查询：

```
SELECT  PlayerID, Name, max(score)Avg, gamesCount, LeagueName, Season
    FROM( SELECT  PlayerID, Player.Name as Name, Player.Gender as Gender, ROUND(AVG(score),2) as score, COUNT(score) as gamesCount, LeagueName, Season
        FROM  Scores JOIN Players as Player USING(PlayerID)
        WHERE Score > -1 AND bowlout = 'No' AND season = '2011-2012'
        GROUP BY PlayerID, LeagueName, Season
        HAVING gamesCount >= 50
    ) as league_avg
WHERE Gender = 'Male'
GROUP BY PlayerID
ORDER BY Avg DESC LIMIT 0,50; 
```

显然，它不起作用，因为外部查询仅按 PlayerID 分组，因此它获取玩家的最大 AVG，但其他字段，例如，如果有多个联赛，则从联盟中随机选择其他字段。他参加的联赛。

我想要的是获得与球员和他的最高平均水平相对应的联赛名称（以及所有其他信息）。

这是一个例子：

```
Name       |      AVG      |   LeagueName
Jones, Tom      122.56          Friday League
Smith, Adam     182.42          Super League
Smith, Adam     194.25          Friendly League
... 
```

预期的结果是：

```
Name       |      AVG      |   LeagueName
Smith, Adam     194.25          Friendly League
Jones, Tom      122.56          Friday League 
```

我得到了什么：

```
Name       |      AVG      |   LeagueName
Smith, Adam     194.25          *Super League*
Jones, Tom      122.56          Friday League 
```

如您所见，Smith、Adam 的 AVG 正确，但与 Name/Avg 组合关联的联赛错误。

我尝试将外部 GROUP BY 子句更改为 PlayerID、LeagueName、Season，但这只是在每个赛季的每个联赛中重新分离，然后我再次得到重复项。除了使用其中的 Java 应用程序、获取所有结果并删除 Java 中的重复项之外，我不知道该尝试什么。显然，我宁愿第一次从 SQL 查询中得到正确的结果。

作为旁注，即使在本文前面提到过，有时查询不会有“AND season = '2011-2012'”部分，所以我也不能在不同赛季中获得同一球员的重复。

**编辑：**我正在使用 SQLite，以防有些人没有注意到标签。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T03:47:42.523

我相信这样的事情应该有效。

```
SELECT PlayerID,
       Name,
       Season,
       CAST( SUBSTR(MAX(stats),1,10) AS REAL) AS Average,
       CAST( SUBSTR(MAX(stats),11,10) AS INTEGER) AS GamesCount,
       SUBSTR(MAX(stats),21) AS LeagueName
  FROM (
          SELECT PlayerID,
                 Player.Name as Name,
                 Season,
                 CASE WHEN LENGTH(ROUND(AVG(score),2))-(LENGTH(CAST(AVG(score) AS INTEGER)))=2
                           THEN SUBSTR('          '||(ROUND(AVG(score),2))||'0', -10,10)
                           ELSE SUBSTR('          '||(ROUND(AVG(score),2)), -10,10)
                   END || SUBSTR('          '||COUNT(score),-10,10) || LeagueName as stats
            FROM Scores
            JOIN Players as Player USING(PlayerID)
           WHERE Score > -1
             AND bowlout = 'No'
           GROUP BY PlayerID, Player.Name, LeagueName, Season
           HAVING COUNT(score) >= 50
       ) AS league_avg
 WHERE Season = '2011-2012'
 GROUP BY PlayerID, Name, Season
 ORDER BY Average DESC LIMIT 0,50
; 
```

我从未使用过 SQLite，所以如果我有一些错误的语法，请不要感到惊讶。它尝试将Average、GameCount 和LeagueName 连接成一个可以轻松按Average 排序的字符串，并且还可以使用子字符串操作轻松提取组件。

我最不确定的部分是平均值的格式。我使用[了在此链接底部](http://sqlite.awardspace.info/syntax/sqlitepg10.htm)找到的语法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-02T23:44:49.630

正如*Andriy M*在评论中所发布的，有一种解决方法可以让聚合函数为不在 GROUP BY 子句中的列获得正确的结果。

由于 SQLite 规范中未定义该变通方法来解决与未来版本的兼容性问题，因此使用该变通方法是不安全的，但在这种特殊情况下它适用于我，而不会减慢查询速度，这正是我想要的。

我也不打算在未来升级我的 SQLite 版本，因为我已经计划将我的应用程序与 MySQL 数据库联机，所以我觉得发布这个答案是合理的，因为它完美地解决了我的问题。

诀窍是在字段的内部查询中使用 ORDER BY 来获取平均值。它之所以有效，是因为当外部查询尝试按 PlayerID 进行分组时，未被使用的其他列是与分组依据的字段的最后一个实例一起使用的列。因此，如果一个 PlayerID 具有三个不同的平均值，则在内部查询中，最高平均值将是最后一个，因此外部查询将使用该特定 PlayerID 的最后一个实例附带的字段。

这是代码，添加的行有注释：

```
SELECT  PlayerID, Name, max(score)Avg, gamesCount, LeagueName, Season
FROM( SELECT  PlayerID, Player.Name as Name, Player.Gender as Gender, ROUND(AVG(score),2) as score, COUNT(score) as gamesCount, LeagueName, Season
    FROM  Scores JOIN Players as Player USING(PlayerID)
    WHERE Score > -1 AND bowlout = 'No' AND season = '2011-2012'
    GROUP BY PlayerID, LeagueName, Season
    HAVING gamesCount >= 50
    ORDER BY score /* Here is the added line that solves it all */
) as league_avg
WHERE Gender = 'Male'
GROUP BY PlayerID
ORDER BY Avg DESC LIMIT 0,50; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-29T01:46:06.430

您想通过修饰符学习[WITH ROLLUP组](http://dev.mysql.com/doc/refman/5.0/en/group-by-modifiers.html)

# javascript - HTML5 音频播放列表

> ID：11255063
> 
> 赞同：2
> 
> 时间：2012-06-29T01:40:04.763
> 
> 标签：javascript, jquery, html, html5-audio, playlist

我正在尝试构建一个 HTML5 音频播放器，我的主要问题是滚动曲目。我已经构建了一个 JSON 文件，其中包含我的曲目以及标题和其他信息。这是html代码。

```
<audio>
   <source src="" id="oggSource" type="audio/ogg" />
   <source src="" id="mp3Source" type="audio/mpeg" />
   Your browser does not support the audio element.
</audio>
<br/>

<input type="button" value="<<" onclick="">
<input type="button" value="Play" onclick="playPause()">
<input type="button" value=">>" onclick="playNextSongOnClick()"><br/>
<input type="button" value="Duration" onclick="duration()"><input type="button" value="currentTime" onclick="currentTime()"><br/> 
```

这是我的 javascript

```
function initiate_AudioPlayer(){
  var song = 0;
  $("#oggSource").attr("src","audio/"+playlist.songs[song].source+".ogg");
  $("#mp3Source").attr("src","audio/"+playlist.songs[song].source+".mp3");  
}

function playPause() {
  var audio = document.getElementsByTagName('audio')[0];
  if (audio.paused){audio.play();}
  else {audio.pause();}
}

function playNextSongOnClick(){
  var audio = document.getElementsByTagName('audio')[0];
  $("#oggSource").attr("src", "audio/song2.ogg");
  $("#mp3Source").attr("src", "audio/song2.mp3");

  audio.pause();
  audio.load();
  audio.play();
}

function duration(){
  var audio = document.getElementsByTagName('audio')[0];
  alert (audio.duration);
}

function currentTime(){
  var audio = document.getElementsByTagName('audio')[0];
  alert (audio.currentTime);
}

$('document').ready(initiate_AudioPlayer); 
```

在 Safari 中，当我按下播放时会播放音频，但之后不会播放另一首曲目。当我单击“持续时间”按钮时，会弹出“NaN”，所以我假设 Safari 没有加载文件。

在 Firefox 中，我遇到了相反的问题。第一首曲目返回“NaN”的持续时间，但是当我单击“播放下一首曲目”按钮时，会返回实际的持续时间值并播放曲目。

在 Chrome 中，一切都很棒！我没有在IE9中测试过。

我应该缓冲或卸载文件或类似的东西吗？任何帮助将不胜感激。

# c - 等待gdb附加

> ID：11255064
> 
> 赞同：14
> 
> 时间：2012-06-29T01:40:16.300
> 
> 标签：c, debugging, gdb, cygwin

我一直在将 gdb 用于 1 或 2 个项目。即我调用`gdb --args prog args`. gdb 与我正在调试的程序在同一个 tty 中运行。

但是我最新的项目是修改 dtach 实用程序。这是一个类似于屏幕的程序，因此 tty 被重定向到其他地方，因此我必须使用 gdb 的附加功能。

gdb attach 的问题在于，显然您不能从一开始就附加，因为您需要先运行程序才能获得要附加的 pid。

有什么办法可以让程序在某个时间点等待 gdb 附加？

我不能使用 gdbserver，因为我在 cygwin 上。我也尝试过使用`pause()`，但是当我尝试继续时它就挂了。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2015-06-01T16:00:23.787

至少使用 LLDB 将进程发送`SIGSTOP`给自己应该可以解决问题。然后调试器继续命令将发出`SIGCONT`. 这也应该适用于 GDB。或者尝试`SIGINT`代替`SIGSTOP`.

包括标题

```
#include <signal.h>
#include <csignal> // or C++ style alternative 
```

然后

```
raise(SIGSTOP) 
```

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-06-29T03:05:22.157

这是我解决这个问题的方法。我也看到其他人也这样做过。

选择一个您希望程序停止的地方并等待您附加调试器。对于大多数程序来说，这只是一个开始，但如果有一些初始化工作需要您完成，您可能希望完成它然后执行此操作。

放入类似这样的循环：

```
#ifdef DEBUG

int i = 0;

while (i == 0)
{
    usleep(100000);  // sleep for 0.1 seconds
}

#endif // DEBUG 
```

成功附加到进程后，您可以使用调试器更改变量的值`i`，这将打破循环并允许继续正常执行。

将变量更改为 1 的 gdb 命令：`set var i = 1`

我一直在做的另一件事：我定义了一个叫做`nop()`什么都不做的短函数（“无操作”）。然后我坚持一个电话到`nop()`我想中断的任何地方，并在里面放一个断点`nop()`。

注意：如果您构建调试版本，`-O0`则编译器不会优化该变量。如果您需要这个技巧来使用优化的构建，我想您需要将变量声明为`volatile`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-29T02:55:09.833

某些平台可能有等待调试器指令或陷阱。

更便携，您可以让程序等待一些外部满足的条件，例如连接到套接字或将一些数据写入fifo。然后，您可以建立连接或从第三个终端发送虚拟数据。

或者您可以在程序中放置一个无限循环，测试您将使用调试器修改的某个 volatile 变量的值，以使其继续运行。

如果我记得你可以在cygwin程序中使用windows apis，并且一些网络搜索似乎表明一个用于检测程序是否正在调试，所以你可以循环直到返回。

# naming-conventions - 我应该为学校的一个班级的学生命名一个班级？

> ID：11255069
> 
> 赞同：2
> 
> 时间：2012-06-29T01:41:14.147
> 
> 标签：naming-conventions

使用 python（或任何其他保留单词 Class 的语言）：

我使用的模型由科目（例如 10 年级英语、11 年级化学、12 年级 IT）和课程组成，它们对应于时间表条目（例如 10ENGB - 10 年级英语组 B）。我无法为班级班级制定合适的名称。

此外，学生和科目之间的关系是注册。你会怎么称呼学生和班级之间的关系？老师和班级之间？

> 计算机科学中只有两个难点：缓存失效和命名。
> 
> ——菲尔·卡尔顿

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-29T01:45:24.873

该[词库](http://thesaurus.com/browse/class)建议“课程”或“会话”等。学生和班级之间的关系可以是“student_in”，教师和班级之间的关系可以是“teacher_of”。

顺便说一句，该报价的更好形式是：

> 计算机科学中只有两件困难的事情：缓存失效、命名事物和非一错误。

# ruby-on-rails - 如何存储表单数据以便在提交前显示确认页面

> ID：11255072
> 
> 赞同：1
> 
> 时间：2012-06-29T01:41:32.413
> 
> 标签：ruby-on-rails, forms, file, post, upload

我有一个很长的多部分表单，包括文件输入字段。我的客户希望用户能够在将数据发送到远程服务器之前查看他们输入的数据。当前工作的实现只是获取表单数据并将其提交给外部 Web 服务。由于已经编写了大量的验证和 SOAP 请求样板，因此我只是在它们之间添加了一个控制器操作。因此，我需要做的就是将提供给“Review”操作的表单数据发送到“Submit”操作。

## 这是到目前为止涉及的控制器和视图的流程：

*   呈现表单，用户输入数据，点击“继续”
*   表单被验证，然后表单数据被发送到“review”页面
*   视图页面的操作创建`params[:clean]`并使用人类可读的表单数据填充它
*   查看带有选项的显示表 | 数据，底部有一个“提交”按钮

## 到目前为止我已经尝试过：

*   `session[:form_data] = params`这会导致“无法转储文件”错误

## 考虑过但如果可能的话宁愿避免：

*   在“评论”视图上创建另一个表单，该表单从参数和 POST 填充到提交 url

值得注意的是，上传的文件没有被应用程序处理。客户端的 SOAP 架构处理所有事情——我只需要一个保存表单数据的页面，然后在客户满意的情况下将其传递。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T22:14:03.163

# 这是我最终做的

## 在“审查”行动中：

```
session[:uploaded_files_array] = Array.new
session[:application_data] = params.except(*exclusions, *files)

if params[:uploaded_file]
  params[:application_data][:uploaded_file] = true
  file_name = session[:current_customer] + "more_stuff"
  uploaded_path = File.join(Dir.tmpdir, file_name)
  File.open(uploaded_path, "wb") do |f|
    f.write(params[:uploaded_file].read)
  end
  session[:uploaded_files_array] << uploaded_path
end 
```

## 在“提交”动作中：

```
uploaded_files_array = session[:uploaded_files_array]  
params = session[:application_data]  
unless uploaded_files_array.blank?  
    Resque.enqueue(ConfirmationDocumentUploader, uploaded_files_array, session[:current_customer] ["DocumentID"] )
end 
```

所以基本上，我将上传的文件写入文件系统中的临时位置，并将它们的位置存储在会话中。我还将所有相关参数从 params 复制到会话中。然后，在提交过程中，我只需从会话中读取覆盖参数，并使用路径数组为文件排队工作。

希望这对其他人有用，我想拥有一个评论页面，以便客户可以确认他们的选择，是一个相当普遍的愿望。

# excel - 如何从随机日期获得下周四？

> ID：11255074
> 
> 赞同：5
> 
> 时间：2012-06-29T01:41:41.913
> 
> 标签：excel, calendar, excel-formula

我想做的是让你有一个随机日期列表，它永远不会相同，所以它必须是一个通用公式，但是你得到任何日期，一年中的任何日期，然后每个星期四是一个开始新的一周。对于每个日期，您设置的日期等于星期四，它大于前一个并且小于星期四。

举例说明，因为我含糊不清，假设您得到 2012 年 6 月 24 日。6 月 24 日大于 2012 年 6 月 21 日（上一个星期四），小于 2012 年 6 月 28 日，即下一个星期四。这意味着它应该在其旁边的列中生成 2012 年 6 月 28 日的值。

这有什么意义吗？根据您获得的任何日期值，您计算它应该生成哪个星期四日期？有什么办法可以在excel中做到这一点？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-06-29T10:02:51.033

此公式将为您提供 A1 中日期之后的星期四

`=A1+7-WEEKDAY(A1+2)`

如果 A1 是星期四，则返回该日期，如果 A1 是星期四，则应为 A1+7，则更改为该版本

`=A1+8-WEEKDAY(A1+3)`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-29T02:20:25.860

```
=IF(WEEKDAY(A1) < 5, A1+5-WEEKDAY(A1), A1+5+7-WEEKDAY(A1)) 
```

将从 Excel 中单元格 A1 中给出的日期开始给您下一个星期四。如果输入日期是星期四，它将给出下一个星期四。

如果要在给定星期四时显示输入 Thursday，而不是显示下一个星期四，请在条件中使用 <=。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-02-24T15:08:46.970

我知道这个问题已经得到了完美的回答，但是我只想分享一些代码，这些代码可能会帮助任何正在寻找比“星期四”或“星期二”更强大的东西的人。而是想向函数传递一个日期和日期名称，并取回下一个发生的日期。它是一个两部分功能

```
 Function nextDateofDay(ByVal xdate As Date, ByVal dayOfWeek As String) As 
     Date
      dow = findWeekDayNum(dayOfWeek)
      nextDayofWeek = xdate + 7 - Weekday(xdate + 7 - dow)

     End Function

     Function findWeekDayNum(ByVal dayName As String)
        dayName = Trim(UCase(dayName))
        daysOfWeek = Array("SUNDAY", "MONDAY", "TUESDAY", "WEDNESDAY", 
                            "THURSDAY", "FRIDAY", "SATURDAY")
        'Need to find the day of week of that name, so looping through array
        For j = LBound(daysOfWeek) To UBound(daysOfWeek)
             If daysOfWeek(j) = dayName Then
                 findWeekDayNum = j + 1 ' need to add one cause array index 
                     'starts at 1
                 Exit Function
              End If
        Next j

     End Function 
```

然后如何使用一个将简单地使用该功能

```
 sub test()
       currentDate = now() ' or can be a date from a cell
       dayDesired = "MONDAY" ' or can also be from a cell
       nextDate = nextDateofDay(currentDate,dayDesired)
       debug.print(nextDate)
   end sub 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2020-04-21T13:33:17.993

对于新的 Java 8 Time API，您可以使用以下代码。您需要`DayOfWeek.THURSDAY`在下面的代码中更改等。

```
LocalDate date1=LocalDate.now();
// This will give you int value of Day(for eg. Friday) and the date you want to check for

int duration=DayOfWeek.WEDNESDAY.getValue()-date1.getDayOfWeek().getValue();
System.out.println("duration "+duration);
if(date1.getDayOfWeek().equals(DayOfWeek.WEDNESDAY)) {
    System.out.println("Wednesday");
} else {
    date1=date1.plusDays(7).minusDays(7-  duration); 
}
// it will first give next day of week then minus the duration from 7.

System.out.println("new date1 "+date1); 
```

# api - Wikitravel XML 树结构

> ID：11255085
> 
> 赞同：2
> 
> 时间：2012-06-29T01:43:26.840
> 
> 标签：api, parsing, web-scraping, mediawiki

我正在浏览 Wikitravel API，我注意到他们提供的 XML 文件只是将所有信息集中在一个大块中。示例：[http ://wikitravel.org/en/Special:Export/San_Francisco](http://wikitravel.org/en/Special:Export/San_Francisco)

有没有办法获得具有特定标题的树（例如，了解、进入、绕过等）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-29T03:36:03.717

您可以使用[`action=parse`](https://www.mediawiki.org/wiki/API%3aParsing_wikitext#parse)MediaWiki [API](https://www.mediawiki.org/wiki/API)来执行此操作。

例如，查询[http://wikitravel.org/wiki/en/api.php?format=xml&action=parse&prop=sections&page=San%20Francisco](http://wikitravel.org/wiki/en/api.php?format=xml&action=parse&prop=sections&page=San%20Francisco)将返回如下内容：

```
<api>
  <parse>
    <sections>
      <s toclevel="1" level="2" line="Districts" number="1" index="1" fromtitle="San_Francisco" byteoffset="1186" anchor="Districts"/>
      <s toclevel="1" level="2" line="Understand" number="2" index="2" fromtitle="San_Francisco" byteoffset="9563" anchor="Understand"/>
      <s toclevel="2" level="3" line="History" number="2.1" index="3" fromtitle="San_Francisco" byteoffset="9578" anchor="History"/>
      <s toclevel="2" level="3" line="Climate" number="2.2" index="4" fromtitle="San_Francisco" byteoffset="13913" anchor="Climate"/>
      <s toclevel="2" level="3" line="Literature" number="2.3" index="5" fromtitle="San_Francisco" byteoffset="16502" anchor="Literature"/>
      <s toclevel="2" level="3" line="Movies" number="2.4" index="6" fromtitle="San_Francisco" byteoffset="19404" anchor="Movies"/>
      <s toclevel="2" level="3" line="Tourist information" number="2.5" index="7" fromtitle="San_Francisco" byteoffset="23236" anchor="Tourist_information"/>
      <s toclevel="1" level="2" line="Talk" number="3" index="8" fromtitle="San_Francisco" byteoffset="24227" anchor="Talk"/>
      …
    </sections>
  </parse>
</api> 
```

由此，您可以重建截面树。

# iphone - UIImageView 旋转动画很容易出

> ID：11255094
> 
> 赞同：0
> 
> 时间：2012-06-29T01:45:45.220
> 
> 标签：iphone, ios, uiimageview, cabasicanimation

我现在正在旋转一个圆形箭头。这很酷，但我希望在结束时像其他视图一样有一些更精致的东西，你可以为它们设置动画以缓入或缓出，我想知道您是否可以为此做同样的事情..这是我的代码..

```
- (IBAction)animator:(id)sender
{
    [arrowRotation removeFromSuperview];

    //arrow animation
    arrowRotation = [[UIImageView alloc] initWithImage:[UIImage imageNamed:@"arrow.png"]];
    arrowRotation.frame = CGRectMake(148.0, 20.0, 30.0, 30.0);
    [self.view addSubview:arrowRotation];

    CABasicAnimation *fullRotation;
    fullRotation = [CABasicAnimation animationWithKeyPath:@"transform.rotation"];
    fullRotation.fromValue = [NSNumber numberWithFloat:0];
    fullRotation.toValue = [NSNumber numberWithFloat:((360*M_PI)/180)];
    fullRotation.duration = 0.75f;
    fullRotation.repeatCount = 3;

    [arrowRotation.layer addAnimation:fullRotation forKey:@"360"];
} 
```

所以我的问题是，当涉及到 3 次旋转时，我可以让这个动画变慢。就像 UIView 的轻松。如果这有意义..

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T02:00:59.037

首先，在这一行`fullRotation.toValue = [NSNumber numberWithFloat:((360*M_PI)/180)];`中，您的浮点数`((360*M_PI)/180)`会将圆圈旋转 360 度，但您的数字有点过多。我的意思是您可以将其简化为`2*M_PI`.

第二：如果你想更多地定制这个，你可以使用`CAKeyframeAnimation`：

```
CAKeyframeAnimation *rotationAnimation = [CAKeyframeAnimation animationWithKeyPath:@"transform.rotation"];

NSArray *rotationValues = [NSArray arrayWithObjects: [NSNumber numberWithFloat: 0], [NSNumber numberWithFloat: (2*M_PI)], nil];

[rotationAnimation setValues:rotationValues];

NSArray *rotationTimes = [NSArray arrayWithObjects:[NSNumber numberWithFloat:0.0f],[NSNumber numberWithFloat:1.0f], nil];
[rotationAnimation setKeyTimes:rotationTimes];

NSArray *rotationTimingFunctions = [NSArray arrayWithObjects:[CAMediaTimingFunction functionWithName:kCAMediaTimingFunctionLinear],[CAMediaTimingFunction functionWithName:kCAMediaTimingFunctionEaseOut],  nil];
[rotationAnimation setTimingFunctions:rotationTimingFunctions];

rotationAnimation.fillMode = kCAFillModeForwards;
rotationAnimation.removedOnCompletion = NO;
rotationAnimation.duration = 1;

[self.view.layer addAnimation:rotationAnimation forKey:@"animation"]; 
```

希望这可以帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T01:50:55.490

用于`UIView animateWithDuration:delay:options:animations:completion:`制作动画并使用选项`UIViewAnimationOptionCurveEaseOut`。这是 iOS 上更新后的首选 UIView 动画方法，可让您轻松完成所需的操作。

这里的文档：http: [//developer.apple.com/library/ios/#documentation/uikit/reference/uiview_class/uiview/uiview.html](http://developer.apple.com/library/ios/#documentation/uikit/reference/uiview_class/uiview/uiview.html)

如果您有任何问题，请告诉我！

# php - 当没有类范围处于活动状态时无法访问 self::

> ID：11255095
> 
> 赞同：13
> 
> 时间：2012-06-29T01:45:49.280
> 
> 标签：php, class, object, scope

我正在尝试在公共静态函数中使用 PHP 函数，如下所示（我已经缩短了一些时间）：

```
class MyClass {

public static function first_function() {

    function inside_this() {    
            $some_var = self::second_function(); // doesnt work inside this function
    }               

    // other code here...

} // End first_function

protected static function second_function() { 

    // do stuff

} // End second_function

} // End class PayPalDimesale 
```

那是当我收到错误“无法访问 self:: 当没有类范围处于活动状态时”。

如果我`second_function`在函数之外调用`inside_this`，它工作正常：

```
class MyClass {

public static function first_function() {

    function inside_this() {    
            // some stuff here  
    }               

    $some_var = self::second_function(); // this works

} // End first_function

protected static function second_function() { 

    // do stuff

} // End second_function

} // End class PayPalDimesale 
```

我需要做什么才能`second_function`在`inside_this`函数内使用？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-06-29T01:52:06.573

这是因为**PHP 中的所有函数都具有全局作用域**——即使它们是在函数内部定义的，它们也可以在函数外部调用，反之亦然。

所以你必须这样做：

```
 function inside_this() {    
   $some_var = MyClass::second_function(); 
 } 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-29T01:55:54.723

适用于 PHP 5.4：

```
<?php
class A
{
  public static function f()
  {
    $inner = function()
    {
      self::g();
    };

    $inner();
  }

  private static function g()
  {
    echo "g\n";
  }
}

A::f(); 
```

输出：

```
g 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-29T02:36:48.137

尝试将您的第一个功能更改为

```
public static function first_function() {

    $function = function() {    
            $some_var = self::second_function(); //  now will work
    };               
    ///To call the function do this
    $function();
    // other code here...

} // End first_function 
```

# sqlalchemy - SQLAlchemy：提交后会话查询仍然有效吗？

> ID：11255098
> 
> 赞同：12
> 
> 时间：2012-06-29T01:46:57.510
> 
> 标签：sqlalchemy

我刚从这个 SQLAlchemy ORM 开始，我想知道，如果在调用会话提交之后，你是否仍然可以使用该 sesison 进行查询，甚至可能再次提交。

所以，例如

```
session = Session()
session.add(Foo())
session.commit()
print session.query(Foo).first()
session.add(Bar())
session.commit() 
```

所有这些代码都可以工作吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-29T08:49:38.943

简短的回答：**是的。**
长答案：请阅读[使用会话](http://docs.sqlalchemy.org/en/latest/orm/session.html)以及其中的[管理事务](http://docs.sqlalchemy.org/en/latest/orm/session_transaction.html#managing-transactions)部分。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2020-01-23T12:31:41.387

正如@van 已经指出的那样，答案是**肯定**的，但是这里是基于[sqlalchemy 文档](https://docs.sqlalchemy.org/en/13/orm/session_transaction.html#managing-transactions)的解释：

> 当回滚或提交后事务状态完成时（即`session.rollback()`或`session.commit()`，Session 释放所有 Transaction 和 Connection 资源，并回到“开始”状态，再次调用新的 Connection 和 Transaction 对象作为新的请求发出 SQL 语句收到。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-03-23T09:17:01.257

```
def test_multi_commit(flask_app):
    session = flask_app.Session()
    try:
        foo = Foo()
        foo.id = 1
        foo.name = 'name'
        session.add(foo)
        session.flush()
        session.begin_nested()
        try:
            foo_obj = session.query(Foo).filter(Foo.id==1).first()
            foo_obj.name = 'i am change'
            # 1/0
            session.commit()
        except Exception as e:
            print(e)
            session.rollback()
            raise
        # this will raise an exception and rollback all the change
        1/0
        session.commit()
    except Exception as e:
        flask_app.logger.info(e)
        print(e)
        session.rollback() 
```

# c - 在什么情况下我们会出现这个错误信息公司？

> ID：11255099
> 
> 赞同：-10
> 
> 时间：2012-06-29T01:47:22.593
> 
> 标签：c

**恐慌 2017：无法从早期错误中恢复，终止。**

这是什么意思？谁能帮我 ？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-29T01:50:00.240

当您在编译过程中遇到错误时，您应该只查看前一两条消息，其余的几乎总是由于第一条而导致的后续问题。修复第一个错误，然后重试。

# java - MongoDB 嵌入式对象没有 ID（空值）

> ID：11255100
> 
> 赞同：31
> 
> 时间：2012-06-29T01:48:06.943
> 
> 标签：java, spring, mongodb, spring-data

我有一个关于 MongoDB 和 Spring Data 的问题。我有这些域类：

```
@Document
public class Deal  {
    @Id
    private ObjectId _id;
    private Location location;
    private User user;
    private String description;
    private String title;
    private String price;
    private boolean approved;
    private Date expirationDate;
    private Date publishedDate;
}

@Document
public class Location {
    @Id
    private ObjectId _id;
    private Double latitude;
    private Double longitude;
    private String country;
    private String street;
    private String zip;
}

@Document
public class User {
    @Id
    private ObjectId _id;
    private String email;
    private String password;
    private String profile_image_url;
    private Collection<Deal> deals = new ArrayList<Deal>();
} 
```

有了这些域，我可以成功地进行 CRUD。只有一个问题。保存带有交易的用户时，交易和位置在将它们保存到 MongoDB 时将 _id 设置为 null。为什么 MongoDB 不能为嵌入式对象生成唯一 ID？

用一笔交易保存用户后的结果：

```
{ "_id" : ObjectId( "4fed0591d17011868cf9c982" ),
  "_class" : "User",
  "email" : "milo@gmail.com",
  "password" : "mimi",
  "deals" : [ 
    { "_id" : null,
      "location" : { "_id" : null,
        "latitude" : 2.22,
        "longitude" : 3.23445,
        "country" : "Denmark",
        "street" : "Denmark road 77",
        "zip" : "2933" },
      "description" : "The new Nexus 7 Tablet. A 7 inch tablet from Google.",
      "title" : "Nexus 7",
      "price" : "1300",
      "approved" : false,
      "expirationDate" : Date( 1343512800000 ),
      "publishedDate" : Date( 1340933521374 ) } ] } 
```

从结果中可以看出，交易和位置 ID 设置为 NULL。

* * *

## 回答 #1

> 赞同：51
> 
> 时间：2012-06-29T14:44:34.920

MongoDB CRUD 操作 ( `insert`, `update`, `find`, `remove`) 都只对顶级文档进行操作——当然您可以按嵌入文档中的字段进行过滤。嵌入文档总是在父文档中返回。

该`_id`字段是父文档的必填字段，通常不需要或不存在于嵌入文档中。如果你需要一个唯一的标识符，你当然可以创建它们，`_id`如果这对你的代码或你的心智模型方便，你可以使用该字段来存储它们；更典型的是，它们以它们所代表的内容命名（例如“用户名”、“其他系统密钥”等）。MongoDB 本身和任何驱动程序都不会自动填充`_id`除顶级文档之外的字段。

特别是在 Java 中，如果您希望为`_id`嵌入文档中的字段生成 ObjectId 值，您可以这样做：

```
someEmbeddedDoc._id = new ObjectId(); 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-12-09T13:01:23.800

在 REST 架构的上下文中，嵌套文档有自己的 Id 是很有意义的。

1.  持久性实现应该独立于资源表示。作为 API 使用者，我不在乎您使用的是 mongo 还是 mysql。如果您在 mongo 中没有 id 的嵌套文档，请尝试想象如何将持久层更改为关系数据库。现在做同样的练习，事先考虑过独立于实现的方法。在关系数据库中建模嵌套文档，根文档和嵌套文档将是不同的实体/表，每个都有自己的 id。根可能与嵌套文档具有一对多关系。
2.  我可能需要直接访问嵌套文档而不是顺序访问。我可能不需要绝对唯一的 id，就像 mongo 发布的那样，但我仍然需要一些本地唯一标识符。这是根文档中唯一的。

在讨论了我关于嵌套文档中需要 id 的观点后，@dcrosta 已经就如何在 mongo 中填充 _id 字段给出了正确的答案。

希望这可以帮助。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-10-10T15:55:58.887

Mongo 不会`_id`在嵌入式文档上创建或需要 s。如果需要，您可以添加一个`_id`字段 - 我已经完成了。

```
@Document
public class Location {
    @Id
    private ObjectId _id;

    public Location() {
        this._id = ObjectId.get();
    }
}

@Document
public class User {
    @Id
    private ObjectId _id;

    public User() {
        this._id = ObjectId.get();
    }
} 
```

这对我很有用。

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2012-06-29T07:51:39.680

默认情况下，仅在根文档上未在子文档上设置 _id。

您需要在插入和更新时为您的子文档定义一个 _id。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-05-12T14:06:11.600

其他答案现在不再适用。每个子文档都会`_id`自动获取一个。实际上，为了避免将 an`_id`应用于子文档，您必须显式传递选项

```
{ _id: false } 
```

在子文档架构中。

# paypal - Javascript：计算总额的 3.4% 加上 €0.35

> ID：11255101
> 
> 赞同：0
> 
> 时间：2012-06-29T01:48:06.950
> 
> 标签：paypal, add

我有一个表格，人们在其中输入要支付的金额，然后在单击“提交”时将其发送到贝宝。我希望此表格自动将总额的 3.4% 加上 0.35 欧元添加到支付贝宝费用的金额中。我环顾了 stackoverflow 和其他地方，发现答案对于稍微不同的问题非常具体，以至于我无法针对这种特殊情况对其进行自定义。

有人有答案吗？我敢肯定，这是许多人在某一时刻需要的东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T01:56:22.810

你可以试试这个：`total + (total / 100.0 * 3.4) + 0.35`。

确保您在 JavaScript 上执行此计算只是为了先前向用户显示结果，然后在您的后端再次执行，因为如果您在客户端计算它然后发送到服务器，任何具有普通 JavaScript 知识的人都可以绕过它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-29T01:59:15.333

您要做的第一件事是乘以 1.034（即 100% + 3.4%，得到 103.4%；除以 100%，得到 1.034 的比例）。然后添加您的 0.35 欧元。

我不知道你的表格是用什么语言写的，但如果你在这一点上，你应该能够弄清楚。如果您无法从那里弄清楚，您需要发布您拥有的代码（如果您有权发布它）或者至少告诉我们您使用什么语言或程序来设置这一切，如果您不能发布您的代码。

总之，如果您有一个变量 SUBTOTAL，您的 NETTOTAL 将是：

```
NETTOTAL = SUBTOTAL * 1.034 + 0.35 
```

# delphi - TIdHTTPServer 与 TIdMultiPartFormDataStream

> ID：11255105
> 
> 赞同：0
> 
> 时间：2012-06-29T01:48:57.390
> 
> 标签：delphi, indy

这与我之前的问题有关，[我](https://stackoverflow.com/questions/11025703/how-to-handle-tidhttpserver-with-tidmultipartformdatastream)发现了一些东西，认为这可能是我的问题的解决方案，但我无法让它工作，我需要可以帮助我的人。

这是
代码 TIdMIMEBoundary.FindBoundary() 的问题是未声明的标识符，也是 Fetch()。

```
uses
...
IdTCPConnection, IdTCPClient, IdHTTP, IdBaseComponent,
  IdComponent, IdCustomTCPServer, IdCustomHTTPServer, IdHTTPServer,
  IdContext, IdMultipartFormData, IdHeaderList, IdMessageCoder,
  IdMessageCoderMIME, IdMessage, IdGlobalProtocols;

procedure DecodeFormData(const Header: String; ASourceStream:TStream);
var
  MsgEnd: Boolean;
  Decoder: TIdMessageDecoder;
  Tmp: String;
  Dest: TStream;
begin
  MsgEnd := False;
  Decoder := TIdMessageDecoderMIME.Create(nil);
  try
    TIdMessageDecoderMIME(Decoder).MIMEBoundary :=
    TIdMIMEBoundary.FindBoundary(Header);
    Decoder.SourceStream := ASourceStream;
    Decoder.FreeSourceStream := False;
    Decoder.ReadLn;
    repeat
      Decoder.ReadHeader;
      case Decoder.PartType of
        mcptUnknown:
        raise Exception.Create('Unknown form data detected');

        mcptText:
        begin
          Tmp := Decoder.Headers.Values['Content-Type'];
          Dest := TMemoryStream.Create;
          try
            Decoder := Decoder.ReadBody(Dest,MsgEnd);
            if AnsiSameText(Fetch(Tmp, ';'),'multipart/mixed') then
              DecodeFormData(Tmp, Dest)
             else
            // use Dest as needed...
          finally
            FreeAndNil(Dest);
          end;//try
        end;

      mcptAttachment:
      begin
        Tmp := ExtractFileName(Decoder.FileName);
        if Tmp <>'' then
          Tmp := 'c:\some folder\' + Tmp
        else
          Tmp := MakeTempFilename('c:\somefolder\');
        Dest := TFileStream.Create(Tmp, fmCreate);
        try
          Decoder := Decoder.ReadBody(Dest,MsgEnd);
        finally
          FreeAndNil(Dest);
        end;//try
      end;

      end;

      until (Decoder = nil) or MsgEnd;
  finally
    FreeAndNil(Decoder);
  end;//try
end; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T09:41:26.523

You need to include IdMessage and IdMessageCoderMIME in your uses clause

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2017-01-07T09:20:28.380

我创建了一个名为 TIdMultiPartFormDataStreamReader 的对象，它可以一步解码您在服务器上收到的所有多部分/表单数据内容。

```
unit idMultipartFormDataReader;

interface

{$I IdCompilerDefines.inc}

uses System.SysUtils, System.Classes, IdGlobal, IdGlobalProtocols,
  idMultipartFormData, IdCustomHTTPServer,
  IdCoderQuotedPrintable, IdCoderMIME, IdHeaderList;

type
  TIdMultiPartFormDataStreamReader = class( TIdMultiPartFormDataStream )
  private
    FRequestInfo: TIdHTTPRequestInfo;
  protected
    procedure decodeStream;
  public
    property Fields: TIdFormDataFields read FFields;
    constructor Create( ARequestInfo: TIdHTTPRequestInfo );
  end;

implementation

{ TIdMultiPartFormDataStreamReader }

constructor TIdMultiPartFormDataStreamReader.Create(
  ARequestInfo: TIdHTTPRequestInfo);
begin
  inherited Create;
  FSize := 0;
  FInitialized := False;
  FFields := TIdFormDataFields.Create(Self);
  FRequestInfo := ARequestInfo;
  decodeStream;
end;

procedure TIdMultiPartFormDataStreamReader.decodeStream;
var
  delimi, cadStream: string;
  cabeceras: TIdHeaderList;
  stInfo: TMemoryStream;
  posIniPost, posFinPost, posIniRetorno: Integer;
  cadenaOri: string;
  fieldName: string;
  fieldFileName: string;
  contentType: string;
  charSet: string;
  transferEnconding: string;
  {$IFDEF STRING_IS_ANSI}
    LBytes: TIdBytes;
  {$ENDIF}

  function ReadStringLn( StreamOri: TStream; var cadenaBus: string; char_set: string ): Boolean;
  var
    candidato: Boolean;
    posIniSO: Integer;
    posFinSO: Integer;
    StreamDes: TMemoryStream;
    bleer: Byte;
  begin

    candidato := False;
    StreamDes := TMemoryStream.Create;
    posIniSO := StreamOri.Position;

    cadenaBus := '';

    while ( not candidato ) and ( StreamOri.Position < StreamOri.Size ) do begin

      StreamOri.Read( bleer, 1 );

      if ( bleer = 13 ) then begin

        StreamOri.Read( bleer, 1 );

        if ( bleer = 10 ) then  begin

          candidato := True;
          posFinSO := StreamOri.Position;
          StreamOri.Position := posIniSO;

          if ( posFinSO - 2 - posIniSO > 0 ) then begin

            StreamDes.CopyFrom( StreamOri, posFinSO - 2 - posIniSO );

            StreamDes.Position := 0;

            cadenaBus := IdGlobalProtocols.ReadStringAsCharset( StreamDes, char_set );

          end;

          StreamOri.Position := posFinSO;

        end;

      end;

    end;

    StreamDes.Free;
    Result := candidato;

  end;
begin
  {$IFDEF STRING_IS_ANSI}
  LBytes := nil;
  {$ENDIF}

  if ( ExtractHeaderItem( FRequestInfo.RawHeaders.Values[ 'Content-Type' ] ) <> 'multipart/form-data' ) then
    Exit;

  cabeceras := TIdHeaderList.Create( TIdHeaderQuotingType.QuoteHTTP );

  delimi := FRequestInfo.RawHeaders.Params['Content-Type', 'boundary'];

  FBoundary := delimi;

  FRequestContentType := sContentTypeFormData + FBoundary;

  FRequestInfo.PostStream.Position := 0;

  if ( ReadStringLn( FRequestInfo.PostStream, cadenaOri, FRequestInfo.CharSet ) ) then begin

    while ( cadenaOri = '--' + delimi )  and
          ( FRequestInfo.PostStream.Position < FRequestInfo.PostStream.Size ) do begin

      if ( ReadStringLn( FRequestInfo.PostStream, cadenaOri, FRequestInfo.CharSet ) ) then begin

        while ( cadenaOri <> '' ) and
          ( FRequestInfo.PostStream.Position < FRequestInfo.PostStream.Size ) do begin

          cabeceras.Add( cadenaOri );
          ReadStringLn( FRequestInfo.PostStream, cadenaOri, FRequestInfo.CharSet );

        end;

        fieldName := cabeceras.Params[ 'Content-Disposition', 'name' ];
        fieldFileName := cabeceras.Params[ 'Content-Disposition', 'filename' ];

        contentType := ExtractHeaderItem( cabeceras.Values[ 'Content-Type' ] );
        charSet := cabeceras.Params[ 'Content-Type', 'charset' ];

        transferEnconding := cabeceras.Values[ 'Content-Transfer-Encoding' ];

        stInfo := TMemoryStream.Create;
        posIniPost := FRequestInfo.PostStream.Position;
        posFinPost := posIniPost;

        ReadStringLn( FRequestInfo.PostStream, cadenaOri, FRequestInfo.CharSet );

        while ( cadenaOri <> '--' + delimi ) and ( cadenaOri <> '--' + delimi + '--' )  and
          ( FRequestInfo.PostStream.Position < FRequestInfo.PostStream.Size ) do begin

          posFinPost := FRequestInfo.PostStream.Position;
          ReadStringLn( FRequestInfo.PostStream, cadenaOri, FRequestInfo.CharSet );

        end;

        posIniRetorno := FRequestInfo.PostStream.Position;

        FRequestInfo.PostStream.Position := posIniPost;

        if ( posFinPost - 2 - posIniPost > 0 ) then begin

          if ( fieldFileName <> '' ) then begin

            stInfo.CopyFrom( FRequestInfo.PostStream, posFinPost - 2 - posIniPost );

            if ( LowerCase( transferEnconding ) = 'quoted-printable' ) then begin

              stInfo.Position := 0;

              cadStream := ReadStringFromStream( stInfo );

              stInfo.Clear;
              stInfo.Position := 0;

              TIdDecoderQuotedPrintable.DecodeStream( cadStream, stInfo );

            end else if ( LowerCase( transferEnconding ) = 'base64' ) then begin

              stInfo.Position := 0;

              cadStream := ReadStringFromStream( stInfo );

              stInfo.Clear;
              stInfo.Position := 0;

              TIdDecoderMIME.DecodeStream( cadStream, stInfo );

            end;

            stInfo.Position := 0;

            AddFormField( fieldName, contentType, charSet, stInfo, fieldFileName );

          end else begin

            stInfo.CopyFrom( FRequestInfo.PostStream, posFinPost - 2 - posIniPost );

            cadStream := '';

            stInfo.Position := 0;

            {$IFDEF STRING_IS_ANSI}

            ReadTIdBytesFromStream( stInfo, LBytes, stInfo.Size );

            {$ENDIF}

            if ( LowerCase( transferEnconding ) = '7bit' ) then begin

              {$IFDEF STRING_IS_UNICODE}

              cadStream := ReadStringFromStream( stInfo, -1, IndyTextEncoding_ASCII );

              {$ELSE}

              CheckByteEncoding( LBytes, IndyTextEncoding_ASCII, CharsetToEncoding( charSet ) );

              {$ENDIF}

            end else if ( LowerCase( transferEnconding ) = 'quoted-printable' ) then begin

              {$IFDEF STRING_IS_UNICODE}

              cadStream := ReadStringFromStream( stInfo );

              cadStream := TIdDecoderQuotedPrintable.DecodeString( cadStream, CharsetToEncoding( charSet ) );

              {$ELSE}

              BytesToRaw( LBytes, cadStream, Length( LBytes ) );

              LBytes := TIdDecoderQuotedPrintable.DecodeBytes( cadStream );

              {$ENDIF}

            end else if ( LowerCase( transferEnconding ) = 'base64' ) then begin

              {$IFDEF STRING_IS_UNICODE}

              cadStream := ReadStringFromStream( stInfo );

              cadStream := TIdDecoderMIME.DecodeString( cadStream, CharsetToEncoding( charSet ) );

              {$ELSE}

              BytesToRaw( LBytes, cadStream, Length( LBytes ) );

              LBytes := TIdDecoderMIME.DecodeBytes( cadStream );

              {$ENDIF}

            end else if ( LowerCase( transferEnconding ) = '8bit' ) or ( LowerCase( transferEnconding ) = 'binary' ) then begin

              {$IFDEF STRING_IS_UNICODE}

              cadStream := ReadStringAsCharset( stInfo, charSet );

              {$ENDIF}

            end;

            {$IFDEF STRING_IS_ANSI}

            BytesToRaw( LBytes, cadStream, Length( LBytes ) );

            {$ENDIF}

            AddFormField( fieldName, cadStream, charSet, contentType );

            stInfo.Free;

          end;

        end;

        FRequestInfo.PostStream.Position := posIniRetorno;

        cabeceras.Clear;

      end;

    end;

  end;

end;

end.
```

该项目位于[https://github.com/enriquecerda/TIdMultiPartFormDataStreamReader](https://github.com/enriquecerda/TIdMultiPartFormDataStreamReader)

# javascript - 当openssl命令行执行时，Node.js验证功能不验证签名

> ID：11255106
> 
> 赞同：5
> 
> 时间：2012-06-29T01:49:03.513
> 
> 标签：javascript, node.js, cryptography, openssl

我正在尝试使用 Node.js 加密模块来验证某些数据的签名。我正在使用 Node.js 0.8.0。

文件中的数据已使用 MD5 算法进行哈希处理，并使用私有 RSA 密钥进行签名，并将签名保存到单独的文件中。这一切都是使用 Java 库完成的。

如果我使用 openssl 来验证签名是否成功，请使用：

```
openssl dgst -verify mykey.pem -signature example.sig hello.txt 
```

它以 响应`Verified OK`。如果我更改 hello.txt 的单个字符，它不会验证。我可以在上面的命令中添加一个 -MD5 参数，它仍然可以工作，但我认为这是默认设置，但如果我说 -MD4 或 -SHA 它不会验证。这一切都很好。

如果我随后尝试使用包装 openssl 的 Node 加密模块，我将无法进行此验证。

我的示例代码是：

```
var crypto = require("crypto");
var fs = require("fs");

var data = fs.readFileSync("./hello.txt");
var pubkey = fs.readFileSync("./mykey.pem", "utf8");
var signature = fs.readFileSync("./example.sig");

var verifier = crypto.createVerify ('RSA-MD5');
verifier.update (data);
var success = verifier.verify (pubkey, signature);
console.log(success); 
```

这总是输出`false`。我试过了：

*   将数据读取为“utf8”和“ascii”编码，因为它是一个文本文件。
*   将密钥读取为“ascii”编码（我有理由认为密钥很好，因为当我在某一时刻加载错误编码的密钥时遇到了一些异常）
*   使用 MD5 代替 RSA-MD5 作为摘要算法
*   加载base64编码的签名而不是二进制，并将'base64'参数放在验证函数上。

我是否误解了我的代码正在执行与我在这里显示的 openssl 命令行相同的操作？有关如何解决此问题的任何建议？

更新：我也尝试过使用自签名的可信证书，而不仅仅是密钥。我已经确认 openssl 验证证书，但节点加密库不验证文件。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-11-07T23:04:55.807

终于发现是签名格式问题——verify有第三个参数，当我有'hex'格式时默认为'binary'。

最终解决方案转为使用 SHA1 哈希，现在在节点 0.10 上运行，该节点的流 API 略有不同，但相关行已更改：

```
result = verifier.verify(publicKey, signature, 'hex'); 
```

# java - 将 null 从 Javascript 传递到 Java 类时，DWR 报告转换器错误

> ID：11255107
> 
> 赞同：2
> 
> 时间：2012-06-29T01:49:24.000
> 
> 标签：java, javascript, jakarta-ee

在我的 Java EE Web 应用程序中，我将 DWR（Direct Web Remoting）用于 Ajax。

Java 类有许多 int 成员，可以通过 DWR 将其转换为 JavaScript 对象。例如：

```
// Java
public class MyClass {

    private int id;
    private String comments;
}

// the converted JavaScript class
var myObject = {
    id: 100,
    comments: "hello world"
} 
```

但是，当我尝试将id等于null的js对象发送到应用服务器时，DWR报如下异常：

```
Erroring: batchId[7] message[org.directwebremoting.extend.MarshallException: Error marshalling int: Format error converting null. See the logs for more details.] 
```

任何人都可以提供任何想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-16T09:54:36.527

在 Java 中，`int`是值类型，而不是引用类型。因此，它永远不能被赋值`null`。另一方面，Javascript 使用动态类型。每个变量都可以更改其类型，因此您可以将 null 分配给所有内容。DWR 处理产生错误的问题。

你有几个选择：

如果您需要处理这个值在服务器端可以为 null 的事实（看起来就是这种情况），您可以使用引用类型，例如`Integer`，而不是`int`. `id`否则，只需确保始终为 Javascript成员赋值

另一种选择：如果缺少来自 javascript 对象的值，DWR 可能允许分配一个默认值。

# documentation-generation - 如何生成在 1 列中显示文件内联文档并在另一列中显示代码的文档？

> ID：11255108
> 
> 赞同：0
> 
> 时间：2012-06-29T01:49:51.193
> 
> 标签：documentation-generation

我以前见过它，但我不记得他们使用了哪个项目或哪个文档（如果有的话）。我很确定这是一个 JS 项目，可能是一个 Node.JS 模块。

无论如何，文档是按文件列出的，每页显示为 2 列，一列是内联文档，另一列是代码。

有谁知道哪些工具允许这样做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T05:14:54.083

“带注释的文档”是我试图想到的！

该工具是[docco](http://jashkenas.github.com/docco/)。

上面的链接是使用 docco 记录的 docco 文档。

# ios - 使用新的 UITableViewCells 重新加载 UITableView

> ID：11255111
> 
> 赞同：0
> 
> 时间：2012-06-29T01:50:21.680
> 
> 标签：ios, uitableview

通常使用 reloaddata 函数，它只是重新加载表中的数据，但是如果我想更改为不同类型的 UITableViewCell 怎么办？

基本上我喜欢动态调用

```
 -(UITableViewCell*)tableView:(UITableView*)tableView cellForRowAtIndexPath:(NSIndexPath*)indexPath 
```

这允许加载不同类型的单元格。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T02:04:09.407

您是否尝试过设置`NSString`属性，然后将其用作`dequeueReusableCellWithIdentifier:`参数。然后调用`reloadData`可以换出单元格？

我自己没有尝试过 - 只是一个想法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T02:35:57.127

尝试

```
- (void)reloadRowsAtIndexPaths:(NSArray *)indexPaths withRowAnimation:(UITableViewRowAnimation)animation 
```

并传入要重新加载的索引数组。它将为您调用 cellForRowAtIndexPath 回调。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-29T03:35:00.827

为不同的单元格类型定义 typedef：

```
typedef enum {
    kTableCellType1,
    kTableCellType2
} TableCellType; 
```

然后，定义一个使用新 TableCellType 的类实例变量，例如

```
@interface MyTableViewController ()
{
    TableCellType _tableCellType;
}
@end 
```

在`viewDidLoad`中，初始化此 ivar：

```
- (void)viewDidLoad
{
    [super viewDidLoad];

    // do all of your other initialization

    _tableCellType = kTableCellType1;
} 
```

然后，您`cellForRowAtIndexPath`可以查看要使用的单元格类型：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    if (_tableCellType == kTableCellType1)
    {
        // build first table cell type
    }
    else if (_tableCellType == kTableCellType2)
    {
        // build the other table cell type
    }
} 
```

最后，当你想改变你的单元格时，你改变你的 ivar 然后重新加载数据：

```
_tableCellType = kTableCellType2;
[self.tableView reloadData]; // or reloadRowsAtIndexPaths or reloadSections 
```

# vb.net - VB.Net 按标题关闭窗口

> ID：11255118
> 
> 赞同：2
> 
> 时间：2012-06-29T01:51:14.880
> 
> 标签：vb.net, api, window

我正在寻找一种按标题关闭特定窗口的方法。

我试过了`Process.GetProcessesByName`；但不是特别适用于这种情况。

我正在使用 API 或类似方法搜索方法（不在 C# 中，我看到了一些代码，但在 vb.net 中无法正常工作）

谢谢！

* * *

更新

谢谢回复。但是我仍然对您在下面描述的解决方案有疑问。我有一个控制两个窗口的唯一进程。然后，如果我关闭（或杀死）第二个窗口，立即关闭第一个窗口（见图）。

由于这个原因，我认为从乞讨中使用 API 方法。

我只想关闭第二个窗口。

![截屏](../Images/b3bab66d766b6cb32dac95379b24273c.png)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-29T02:05:06.033

尝试使用这样的东西。用于[`Process.MainWindowTitle`](http://msdn.microsoft.com/en-us/library/system.diagnostics.process.mainwindowtitle)获取标题文本并[`Process.CloseMainWindow`](http://msdn.microsoft.com/en-us/library/system.diagnostics.process.closemainwindow)关闭 UI，它比杀死进程更优雅一点。

注意：包含进行区分大小写的搜索

```
Imports System.Diagnostics
Module Module1

    Sub Main()
        Dim myProcesses() As Process = Process.GetProcesses

        For Each p As Process In myProcesses
            If p.MainWindowTitle.Contains("Notepad") Then
                p.CloseMainWindow()
            End If
        Next

    End Sub

End Module 
```

* * *

就 Win API 函数而言，尝试这样的事情。请注意，如果您关闭父窗口，您**也会**关闭子窗口。

```
Module Module1
    Private Declare Auto Function FindWindowEx Lib "user32" (ByVal parentHandle As Integer, _
                                               ByVal childAfter As Integer, _
                                               ByVal lclassName As String, _
                                               ByVal windowTitle As String) As Integer

    Private Declare Auto Function PostMessage Lib "user32" (ByVal hwnd As Integer, _
                                                            ByVal message As UInteger, _
                                                            ByVal wParam As Integer, _
                                                            ByVal lParam As Integer) As Boolean

    Dim WM_QUIT As UInteger = &H12
    Dim WM_CLOSE As UInteger = &H10

    Sub Main()
        Dim handle As Integer = FindWindowEx(0, 0, Nothing, "YourFormsTitle")
        PostMessage(handle, WM_CLOSE, 0, 0)
    End Sub

End Module 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T02:04:34.557

您还没有向我们展示您的代码片段。也许你可以试试这个。

```
Dim processList() As Process
processList = Process.GetProcessesByName(ListBox1.Items(ListBox1.SelectedIndex).ToString)

For Each proc As Process In processList
    If MsgBox("Terminate " & proc.ProcessName & "?", MsgBoxStyle.YesNo, "Terminate?") = MsgBoxResult.Yes Then
        Try
            proc.Kill()
        Catch ex As Exception
            MessageBox.Show(ex.Message)
        End Try
    End If
Next 
```

在上面的片段中，我有一个窗口标题列表`listBox`。该片段将迭代窗口标题的列表框，如果找到标题，它会询问是否终止进程的消息。

# python - Python中split函数的奇怪行为

> ID：11255121
> 
> 赞同：1
> 
> 时间：2012-06-29T01:51:33.747
> 
> 标签：python, performance

`:`我正在使用 Python处理大量拆分数据。我遇到了一个奇怪的情况。

这是我同事写的原始代码：

```
tag = word[i].split(":")[0].decode('utf8')
value = int(word[i].split(":")[1]) 
```

而且我认为它效率低下，因为它`split`两次调用该函数而一次调用就足够了，所以我将其更改为：

```
tokens = word[i].split(":")
tag = tokens[0].decode('utf8')
value = int(tokens[1]) 
```

在此之后发生了非常奇怪的事情：

我用日志来记录代码的性能，处理1000行数据大约需要`10 second`s，但我修改后大约`50 seconds`需要处理1000行数据。

为什么会发生这种情况？一个电话不应该比两个电话更快吗？

谢谢你的建议。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-29T08:26:59.170

日志不是对短代码部分进行基准测试的好方法 - 您的系统中还会发生很多其他事情。使用 timeit 模块将给出更准确的结果：

```
Python 2.6.6 (r266:84292, Sep 15 2010, 15:52:39) 
[GCC 4.4.5] on linux2
Type "help", "copyright", "credits" or "license" for more information.
>>> import timeit
>>> word = ["answer:42"]
>>> def split1(word=word):
...     tag = word[0].split(":")[0].decode("utf-8")
...     value = int(word[0].split(":")[1])
... 
>>> def split2(word=word):
...     tokens = word[0].split(":") 
...     tag = tokens[0].decode("utf-8")
...     value = int(tokens[1])
... 
>>> t2 = timeit.Timer("split2()", "from __main__ import split2")
>>> t2.timeit()
2.5862038135528564
>>> t1 = timeit.Timer("split1()", "from __main__ import split1")
>>> t1.timeit()
2.8647868633270264 
```

# iphone - UIScrollView 失去触摸事件

> ID：11255123
> 
> 赞同：0
> 
> 时间：2012-06-29T01:52:10.253
> 
> 标签：iphone, objective-c, uiscrollview, touch

我的应用程序中有一个滚动视图，我希望当用户向下滚动它时，它的 contentOffset.y 达到-50，滚动视图将动画到屏幕底部（此时滚动视图将不可见）。

我设法做到了这一点，但是当我将我的滚动视图动画化以使其再次可见时，它会丢失触摸事件并且不再滚动。

我已经尝试将 scrollEnabled 和 userInteractionEnabled 设置为 YES 但没有任何效果。如果有人可以提供帮助，我将不胜感激。

谢谢。

**这是我将滚动视图动画到屏幕底部时的代码**

```
[UIView animateWithDuration:0.5 animations:^
     {     
         CGRect scrollRect = self.scrollView.frame;
         CGRect newFrame = CGRectMake(scrollRect.origin.x, 367, scrollRect.size.width, self.scrollView.contentSize.height);
         self.scrollView.frame = newFrame;
     }
     completion:^(BOOL finished)
     {
         self.navigationItem.leftBarButtonItem = [[[UIBarButtonItem alloc] initWithBarButtonSystemItem:UIBarButtonSystemItemDone target:self action:@selector(doneButtonPressed:)] autorelease];
     }]; 
```

**这是我让我的滚动视图再次可见的代码**

```
[UIView animateWithDuration:0.5 animations:^
 {
     CGRect scrollRect = self.scrollView.frame;
     CGRect newFrame = CGRectMake(scrollRect.origin.x, 0, scrollRect.size.width, self.scrollView.contentSize.height);
     self.scrollView.frame = newFrame;
 }
 completion:^(BOOL finished)
 {
     self.navigationItem.leftBarButtonItem = nil;
     self.scrollView.scrollEnabled = YES;
     self.scrollView.userInteractionEnabled = YES;
     _canScroll = YES;
 }]; 
```

之后我不能再滚动它了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T04:45:19.173

您将滚动视图高度设置为 self.scrollView.contentSize.height 因此滚动视图将无法垂直滚动。尝试将其更改为 self.scrollview.frame.height

# css - 用于 CLASSLESS **和** IDLESS 元素的 Jsoup 选择器表示法？

> ID：11255124
> 
> 赞同：1
> 
> 时间：2012-06-29T01:52:15.743
> 
> 标签：css, css-selectors, jsoup

这个 CSS 选择器选择没有类属性的元素：

```
a:not([class]) 
```

这个 CSS 选择器选择没有 id 属性的元素：

```
a:not([id]) 
```

但是 CSS 选择器选择没有 id***和***class 的元素的语法是什么？

我尝试了以下方法：

```
a:not([class][id]) 
```

但它所做的是选择没有 id*或*没有类的元素。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T02:01:48.353

怎么样

```
a:not([class]):not([id]) 
```

[小提琴](http://jsfiddle.net/f27zc/)

# vba - 运行时错误 13：组合框上的类型不匹配 - Excel VBA

> ID：11255125
> 
> 赞同：1
> 
> 时间：2012-06-29T01:52:19.863
> 
> 标签：vba, excel

**简介**：我以前有编程经验（C、C++、Java），但是，这是我第一次使用 Excel VBA。

**一些背景**： 我正在尝试使用一个名为的工作表中的列表初始化一个组合框，`ORI_LIST`但每次运行它时我都会得到`Run Time Error 13`。任何有关这方面的信息都会很棒。

```
Private Sub UserForm_Initialize()
    Dim cLoc As Range
    Dim OriSheetList As Worksheets

    Set OriSheetList = Worksheets("ORI_LIST")

    For Each cLoc In OriSheetList.Range("CRI")
        With Me.COMBO_ORILIST
            .AddItem cLoc.Value
        End With
    Next cLoc
End Sub 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T02:25:50.800

啊，这是一个愚蠢的，但你想要`Dim OriSheetList As Worksheet`。

`Worksheet`对象是单一的。工作簿中所有工作表的集合都是复数。如果 IDE 能在这些问题上提供更多帮助，那就太好了，但是这就是 VBA 的世界。

# c# - 从目录树中获取随机文件

> ID：11255127
> 
> 赞同：0
> 
> 时间：2012-06-29T01:52:59.550
> 
> 标签：c#, linq, directory-tree

所以我似乎无法在任何地方找到一个很好的例子。[我从这个](https://stackoverflow.com/questions/742887/select-random-file-from-directory)从目录中选择随机文件的问题中找到了一个很好的例子，但是我需要从目录树中选择一个随机文件（深度未知）。这段代码从 1 个目录中获取了一个随机文件，但我对如何将它扩展到所有子目录感到困惑，我相信你们中的一个 LINQ 大师可以帮助我制作一些东西。

```
var extensions = new string[] { ".mp3" };
var di = new DirectoryInfo(MusicPath);
var rgFiles = di.GetFiles("*.*")
    .Where( f => extensions.Contains( f.Extension.ToLower() ));
int fileCount = rgFiles.Count();
if (fileCount > 0)
{
    int x = this.Generator.Next( 0, fileCount );  //Generator is 'Random' object
    file = rgFiles.ElementAt(x).FullName;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-29T02:08:17.283

尝试这个

```
var random = new Random(); // this should be placed in a static member variable, but is ok for this example
var fileNames = System.IO.Directory.GetFiles(@"c:\temp", "*.mp3", SearchOption.AllDirectories);
var randomFile = fileNames[random.Next(0, fileNames.Length)]; 
```

# php - 当我添加 .com.sg 而不是 .com 时，PHP 邮件功能无法发送电子邮件

> ID：11255128
> 
> 赞同：1
> 
> 时间：2012-06-29T01:53:06.730
> 
> 标签：php, function, email

我想发送一个链接供用户在注册后验证他们的帐户。但是当我使用`www.singapore.com`时，`$message`我能够收到电子邮件，但是当我将其更改回时，`www.singapore.com.sg`我无法收到它。我想知道是因为链接还是我的代码中有错误？请帮我。

```
$domain ='www.singapore.com'; 
$id = mysql_insert_id(); 
$to = 'myemail@gmail.com'; 
$subject = "E-mail Verification"; 
$message = 'Click on the link to verify your account: http://'.$domain.'/rates/activation.php?id='.$id.' '; 
$headers = "From: <Singapore> \r\n"; 
mail($to,$subject,$message,$headers, '-f enquiry@singapore.com.sg'); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T02:25:13.777

您需要 -f 信封选项吗？如果没记错的话，任何放入其中的地址都需要在 sendmail 配置中添加为受信任用户。

我在 PHP 邮件文档中找到了这个：

> 运行 Web 服务器的用户应作为受信任用户添加到 sendmail 配置中，以防止在使用此方法设置信封发件人 (-f) 时将“X-Warning”标头添加到邮件中。对于 sendmail 用户，此文件是 /etc/mail/trusted-users。

您是否只是试图设置回复地址和地址？如果是这样，请为此使用 $header 并且不要打扰其他参数。

```
$headers = “From: enquiry@singapore.com.sg” . “\r\n” . “Reply-To: enquiry@singapore.com.sg”; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T02:27:28.553

你的代码有问题。改成这个

```
$message = 'Click on the link to verify your account: http://'.$domain.'/rates/activation.php?id='.$id; 
```

它最后有额外的引号。

希望有帮助.. :)

# asp.net-mvc-4 - ASP.net 网络 API

> ID：11255129
> 
> 赞同：1
> 
> 时间：2012-06-29T01:53:17.507
> 
> 标签：asp.net-mvc-4, asp.net-web-api

我一直在阅读有关 MVC 4 的内容，并对 Web API 功能感兴趣。在 WCF Http 服务上使用 web api 在什么情况下是有利的？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-29T03:01:56.167

Web API 提供了对 HTTP 交互所有方面的更多访问。它是围绕 HTTP 规范从头开始设计的。如果您只是使用 HTTP 来通过防火墙，WCF 就可以了。如果您真的想使用 HTTP 作为应用程序协议，您会发现 Web API 要容易得多。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-15T18:37:46.937

当您使用 HTTP 作为应用程序协议时，Web API 是有利的——也就是说，当您的应用程序的行为由 HTTP 控制流和数据元素而不是由仅通过 HTTP 传输的一些附加数据控制时。例如，您可以使用 HTTP 动词（GET、POST、DELETE、PATCH 等）来描述 Web 服务请求的预期操作，而不是将该信息包装在特定于应用程序的 XML 或 JSON 中并使用 HTTP 作为载体。

Web API 使执行一流的 HTTP 编程变得容易，在互联网时代，这是一个重要的特性。尽管 Web 上的客户端服务通信基础设施存在巨大差异，但可以优化客户端和服务以围绕通用应用程序协议（HTTP）创建一流的体验。

# flash - 闪存中的分数

> ID：11255130
> 
> 赞同：0
> 
> 时间：2012-06-29T01:53:42.453
> 
> 标签：flash, fractions

我正在寻找一种在 Flash 的文本字段中显示分数（½、¼ 等）的方法，我的第一个想法是使用 html 文本和特殊的分数字体。然而，这将限制可能的分数的数量，我很确定我会很快达到这一点。它们必须是动态的，对两个数字都没有限制。现在我可以创建一个带有 2 个动态文本字段的准备好的影片剪辑，但是我可以将它们嵌入到一个文本字段中，并且还能够为它们提供动态文本字段所需的 2 个参数吗？

据我所知，您可以使用 html 标签将图像嵌入到文本字段中。

或者还有另一种聪明的方法吗？

[编辑] 我刚刚发现您实际上可以在 img src 属性中使用库链接名称来嵌入影片剪辑。使用 id 属性，您可以通过 actionscript 对其进行修改，所以我想这将是设置分数的两个数字的方法。但是，似乎影片剪辑总是在文本字段中向左对齐（或以其他任意方式定位），这使得该解决方案无用。

[edit2] 感谢查尔斯指出这一点，我在网上找到的那些看起来很痛苦的东西现在很有意义..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T02:41:59.850

也许我太从字面上理解你的例子了；但是，如果您只想要[unicode vulgar fraction math entities](http://tlt.its.psu.edu/suggestions/international/bylanguage/mathchart.html)，您可以将这些字符嵌入到您的字体中：

![字体嵌入](../Images/4f6cc25a09091ffe66c458c82dadbf52.png)

这将包括：

¼ ½ ¾ ⅓ ⅔ ⅕ ⅖ ⅗ ⅘ ⅙ ⅚ ⅛ ⅜ ⅝ ⅞</p>

[Unicode 数字形式](http://unicode.org/charts/PDF/U2150.pdf)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T13:49:04.977

我实际上最终只使用了 x/y 符号。我想我可以通过使用 x 的上标字体和 y 的下标字体来匹配分数的外观。

# c# - 未能识别通过的类型

> ID：11255132
> 
> 赞同：1
> 
> 时间：2012-06-29T01:53:55.970
> 
> 标签：c#, function, object, types

我得到了错误

> “找不到类型或命名空间名称‘passedType’（您是否缺少 using 指令或程序集引用？）”

关于函数内部对passedType的两个引用。为什么它不能识别“passedType”变量？

```
public bool ObjectIsInHighlightedList(object thing, Type passedType)
{
  foreach (object obj in _highlightedList)
  {
     if (obj is passedType && thing == (passedType)obj)
        return true;
  }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T04:06:46.130

尝试使用[IsAssignableFrom](http://msdn.microsoft.com/en-us/library/system.type.isassignablefrom.aspx)方法。

```
public bool ObjectIsInHighlightedList(object thing, Type passedType)
{
  foreach (object obj in _highlightedList)
  {
     if (passedType.IsAssignableFrom(obj.GetType()) && (object)thing == obj)
        return true;
  }
} 
```

然而，这对于泛型方法来说实际上是一个很好的场景：

```
public bool ObjectIsInHighlightedList<T>(object thing)
{
  foreach (object obj in _highlightedList)
  {
     if (obj is T && thing == (T)obj)
        return true;
  }
} 
```

# c++ - 如何在 Win32 C++ 中将数据类型传递给资源 (.rc) 文件？

> ID：11255133
> 
> 赞同：1
> 
> 时间：2012-06-29T01:53:56.370
> 
> 标签：c++, winapi, resources, dialog, constants

我想在我的 Win32 应用程序中居中放置一个对话框，但是在将常量传递给我的**resource.rc**文件时遇到了问题。**我在resource.h**中做了以下声明：

```
const int SCREENX = GetSystemMetrics(SM_CXSCREEN); 
```

但是，当我在 .rc 文件（如下）中用**SCREENX替换****100**并构建时，我得到：**error RC2108: expected numeric dialog constant**。

 ****```
#include <windows.h>
#include "resource.h"
#include "afxres.h"

// I'd like to replace "100" with "GetSystemMetrics(SM_CXSCREEN)"
ID_ABOUT DIALOG DISCARDABLE  100, 0, 237, 87
STYLE DS_MODALFRAME | WS_POPUP | WS_CAPTION | WS_SYSMENU
CAPTION "About"
FONT 10, "MS Sans Serif"

BEGIN
    GROUPBOX "Contact", IDC_CONTACT, 7, 43, 98, 39, WS_CHILD | WS_VISIBLE
    LTEXT    "My info", IDC_CONTACT, 16, 53, 85, 25, WS_CHILD | WS_VISIBLE
END 
```

我也不能直接在所需位置使用**GetSystemMetrics(SM_CXSCREEN) （同样的错误）。**

我认为将数据类型传递给**.rc**是例行公事，所以我必须在这里遗漏一些基本的东西。（资源文件让我头疼不已。）谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-29T08:18:37.527

资源文件被编译成一堆存储在可执行文件中的静态数据。例如，一个对话资源可能被编译成一个[`DLGTEMPLATE`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms645394%28v=vs.85%29.aspx)结构。

换句话说，编译资源中的所有内容都是常量。

`GetSystemMetrics(SM_CXSCREEN)`不是一个常数。它在运行时计算以像素为单位的当前屏幕宽度。

正如另一个答案所说，要使对话框居中，请使用`DS_CENTER`style 或 handle `WM_INITDIALOG`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-29T01:59:34.900

要将对话框在屏幕上居中，只需将 DS_CENTER 样式或对话框的其他窗口样式即可。

如果您想使用 GetSystemMetrics，请在 WM_INITDIALOG 中执行此操作并将对话框定位在那里。

资源文件只是一个脚本。****

# android - Eclipse中的Android NDK插件

> ID：11255134
> 
> 赞同：2
> 
> 时间：2012-06-29T01:54:14.770
> 
> 标签：android, eclipse-plugin, android-ndk

2012 年 6 月 28 日

Android 发布新版 SDK r20

还有新的 ADT Eclipse 插件 v20。但是我很惊讶，因为他们已经包含了 NDK 插件。

**问题是，如何使用他们新的 NDK 插件？**由于 NDK 插件，我希望在本机方面的开发更容易。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T06:07:32.187

我在 [Android 工具项目站点中找到了这个](http://tools.android.com)[答案](http://tools.android.com/recent/usingthendkplugin)

# python - django webfaction：没有名为 dateutil.relativedelta 的模块

> ID：11255136
> 
> 赞同：2
> 
> 时间：2012-06-29T01:54:47.740
> 
> 标签：python, django, webfaction

我刚刚上传了要在 webfaction 上托管的项目，但出现以下错误。

```
No module named dateutil.relativedelta 
```

我在我的一种形式中使用这个模块。这与python路径有关吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-08T23:44:41.983

当 Eclipse 给出相同的错误时，在 Ubuntu 上为我工作：

```
sudo apt-get install python-dateutil 
```

# spring - 从没有参数名称的 URL 中检索请求参数

> ID：11255137
> 
> 赞同：1
> 
> 时间：2012-06-29T01:54:53.823
> 
> 标签：spring, jsp, servlets, url-rewriting, request

我有一个如下所示的 URL：[http://localhost:8080/resource/headline3-7]

在这个网址

资源 - Servlet

标题3-7 - 请求参数

在 Servlet 我使用以下代码：

```
@WebServlet(name = "ArticleServlet", value = "/resource/*")
protected void doGet(HttpServletRequest request, HttpServletResponse response) throws     ServletException, IOException {
     System.out.println("hiii"+ request.getQueryString());
} 
```

我想弄清楚如何在这个例子中获取请求参数？

我可以看到控件正在转移到 Servlet

弹出的另一件事是我正在为 Application 使用 Spring 框架，并且我有一个 URLrewrite.xml，我正在尝试添加以下有助于获取 ID 的规则，但它似乎不起作用：

```
 <rule>
    <from>^/resource/([A-Z]+)$</from>
    <to>/resource/id=$1</to>

</rule> 
```

答：实际上我使用了 URL 模式和使用的正则表达式如下：

```
 <rule>
    <from>^/resource-center/([a-z A-Z-0-9'-_]+)$</from>
    <to>/resource?id=$1</to>
 </rule> 
```

这个表达式对我有用，我使用的 servlet 使用 req.getparmeter function()

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T02:01:52.160

request.getQueryString() 对你不起作用，因为严格来说你没有任何查询字符串 - 你将不得不做一些你自己的解析，比如：

```
String param = null;
String[] paths = request.getPathInfo().split("/");
if (paths.length > 0) {
    param = paths[paths.length-1];
}
System.out.println(param); 
```

# php - PHP - 常量的用途？

> ID：11255138
> 
> 赞同：3
> 
> 时间：2012-06-29T01:54:55.747
> 
> 标签：php, oop, constants, globals

确切地说，使用常量（在 PHP 中）的目的是什么？我了解它们是如何工作的，但在哪些情况下它们比全局变量更可取？如果有的话，变量不是更灵活，因为它们可以放在字符串中吗？

我在网上搜索过，但我发现的只是定义——而不是使用其中一个的实际原因。谁能帮助我了解使用其中一种的好处？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-29T01:56:12.413

> 在哪些情况下它们比全局变量更可取？

常数不变。不可变的全局状态将优于其可变的对应状态；通过这种方式，您的状态被定义在一个位置，并且在您的脚本过程中永远不会改变。除非使用`runkit`您的代码，否则将无法以您未预料到的某些方式更改状态。

此外，必须使用`global`关键字在函数内部声明全局变量，尽管从技术上讲，该声明，尽管我认为更多的类型工作比假设的全局更好:)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-29T02:03:34.577

常数是可靠的。它不会改变。例如，您正在编写一个其他人可以使用的类库。假设您想使用 Pi 到小数点后 5 位，无论出于何种原因，您都不想将其设为带有 getter 的私有变量。

所以你也是

```
 Class Foo {

       public $pi = 3.14159;
   } 
```

现在有些人不小心使用了你的课

```
$foo->pi = 4; 
```

那么这将搞砸一切。所以相反，你做

```
const $pi = 3.14159; 
```

现在你知道它不会改变，也不会搞砸。另外，开发人员会知道您出于某种原因将其定义为特定值。

# jquery - 如何在 JSON 中的 jqGrid 中以 root 显示网格

> ID：11255143
> 
> 赞同：0
> 
> 时间：2012-06-29T01:55:46.610
> 
> 标签：jquery, json, jqgrid

我有一个以以下格式返回 JSON 的服务器：

```
[{"Name": "Student1", "Email": "Email1", "CellPhone": null},
{{"Name": "Student2", "Email": "Email2", "CellPhone": null}] 
```

HTML 文件有： `<table id="list1></table> <div id="pager1"></div>`

JS文件是：

```
jQuery().ready(函数 () {
    jQuery("#list2").jqGrid({
        url: 'Default.aspx?query=SELECT VALUE s FROM ModelContainer.StudentSet AS s WHERE s.Name = \'Student2\'',
        数据类型：“json”，
        colNames：['姓名'，'电子邮件']，
        col型号：[
            { 名称：'名称'，索引：'名称'，宽度：200 }，
            { 名称：'电子邮件'，索引：'电子邮件'，宽度：500 }
        ],
        行数：10，
        行列表：[10,20,30]，
        寻呼机：'#pager1',
        排序名称：'名称'，
        观看记录：真实，
        排序顺序：“desc”，
        标题：“JSON 示例”，
        jsonReader：{
            重复项目：真实，
            编号：“0”，
            细胞： ””，
            //根： ””，
            记录：函数（obj）{
                返回 obj.length;
            }
        }
    });
    jQuery("#list1").jqGrid('navGrid','#pager1',{edit:false,add:false,del:false});
});

```

由于我的 JSON 已经是所需数据的根，我不知道该`root`列是什么。我试过不写任何关于 root 的东西，或者`root: ""`，也没有输出。但 firebug 显示 JSON 被正确接收。

我不知道这是否与根有关。有什么建议吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-29T05:39:10.853

您可以使用

```
jsonReader: {
    repeatitems: false,
    id: "0",
    root:  function (obj) {
        return obj;
    },
    records: function (obj) {
        return obj.length;
    },
    page: function () {
        return 1;
    },
    total: function () {
        return 1;
    }
} 
```

但是要使您提出的代码正常工作，您必须修复更多错误：

*   HTML 片段

```
<table id="list1></table> <div id="pager1"></div> 
```

应固定为

```
<table id="list1"></table> <div id="pager1"></div> 
```

*   `jQuery("#list2").jqGrid({`应该固定为`jQuery("#list1").jqGrid({`
*   `{`由于一个不需要的字符，必须修复 JSON 数据以消除语法错误。正确的数据可以

```
[{"Name": "Student1", "Email": "Email1", "CellPhone": null},
 {"Name": "Student2", "Email": "Email2", "CellPhone": null}] 
```

[固定演示](http://www.ok-soft-gmbh.com/jqGrid/Ovilia.htm)有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T03:03:53.230

据我所知，我们需要在 jsonReader 中设置 JSON 对象名称，如下所示：

```
jsonReader: {
            repeatitems: true,
            id: "0",
            cell: "",
            rows : "details",
            page : "pageno"
            } 
```

**JSON 格式：**

```
 {"pageno":"1", "details" : [{"Name": "Student1", "Email": "Email1", "CellPhone": null},   
    {{"Name": "Student2", "Email": "Email2", "CellPhone": null}] 
```

jsonreader 选项：

[http://www.trirand.com/jqgridwiki/doku.php?id=wiki:retrieving_data#json_data](http://www.trirand.com/jqgridwiki/doku.php?id=wiki:retrieving_data#json_data)

# c++ - 为什么 boost::bind 存储传入类型的参数而不是函数期望的类型？

> ID：11255144
> 
> 赞同：1
> 
> 时间：2012-06-29T01:55:47.633
> 
> 标签：c++, boost, boost-bind

[我最近在使用boost::bind](http://www.boost.org/doc/libs/1_50_0/libs/bind/bind.html)时遇到了代码中的错误。

来自 boost::bind 文档：

> bind 接受的参数由返回的函数对象在内部复制和保存。

我假设所持有的副本的类型基于函数的签名。但是，它实际上是基于传入的值的类型。

在我的例子中，发生了隐式转换，将绑定表达式中使用的类型转换为函数接收到的类型。我期待这种转换发生在绑定的位置，但是当使用生成的函数对象时会发生这种情况。

回想起来，我应该能够从以下事实中弄清楚这一点：当类型[仅在调用站点而不是绑定站点](http://www.boost.org/doc/libs/1_50_0/libs/bind/bind.html#err_signature)不兼容时，使用 boost::bind 会产生错误。

我的问题是：为什么 boost::bind 会这样工作？

1.  它似乎给出了更糟糕的编译器错误消息
2.  当发生隐式转换并且对函子有多次调用时，它似乎效率较低

但是考虑到 Boost 的设计有多好，我猜这是有原因的。它是从 std::bind1st/bind2nd 继承的行为吗？是否有一个微妙的原因为什么这很难/不可能实现？完全不同的东西？

为了测试第二个理论，我编写了一个似乎可行的小代码片段，但很可能有一些我没有考虑到的绑定功能，因为它只是一个片段：

```
namespace b = boost;
template<class R, class B1, class A1>
   b::_bi::bind_t<R, R (*) (B1), typename b::_bi::list_av_1<B1>::type>
   mybind(R (*f) (B1), A1 a1)
{
   typedef R (*F) (B1);
   typedef typename b::_bi::list_av_1<B1>::type list_type;
   return b::_bi::bind_t<R, F, list_type> (f, list_type(B1(a1)));
}

struct Convertible
{
   Convertible(int a) : b(a) {}
   int b;
};

int foo(Convertible bar)
{
   return 2+bar.b;
}

void mainFunc()
{
   int x = 3;
   b::function<int()> funcObj = mybind(foo, x);
   printf("val: %d\n", funcObj());
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-29T02:12:56.000

因为函子可能支持多个重载，这可能会产生不同的行为。即使当您知道所有参数时可以解决此签名（并且我不知道标准 C++ 是否可以保证此功能）`bind`也不知道所有参数，因此肯定无法提供。因此，`bind`不具备必要的信息。

编辑：只是为了澄清，考虑

```
struct x {
    void operator()(int, std::vector<float>);
    void operator()(float, std::string);
};

int main() {
    auto b = std::bind(x(), 1); // convert or not?
} 
```

即使您要反思结构并了解它的重载，是否需要将其转换`1`为浮点数仍然是不确定的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-29T02:09:16.727

我认为这是因为 bind 必须与任何可调用实体一起使用，无论是函数指针`std::function<>`，还是您自己的`struct`带有`operator()`. 这使得 bind 在任何可以使用`()`. 即 Bind 对你的仿函数的隐含要求就是它可以与`()`

如果 bind 要存储函数参数类型，它必须以某种方式为作为类型参数传入的任何可调用实体推断它们。这显然不是通用的，因为`operator()`如果不依赖用户指定某种类型`typedef`（例如），就不可能推断传入的结构类型的参数类型。结果，对函子（或*概念*）的要求不再具体/简单。

我不完全确定这是原因，但这是可能出现问题的事情之一。

编辑：正如 DeadMG 在另一个答案中提到的另一点，即使对于标准函数指针，重载也会产生歧义，因为编译器将无法解析仿函数类型。通过存储您提供给 bind 和 using 的类型`()`，也可以避免这个问题。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-29T02:54:40.183

在不同的情况下，您*需要*在调用站点处理参数。

第一个这样的例子是调用一个成员函数，你可以在一个`boost::bind( &std::vector<int>::push_back, myvector)`你很可能不想要的对象的副本上调用成员（根据需要 ( `boost::bind( &std::vector<int>::push_back, &myvector )`) --注意这两个选项在不同的程序中都有意义

另一个重要的用例是通过*引用*函数来传递参数。`bind`将*复制*执行与按值传递调用等效的操作。该库提供了通过辅助函数`ref`和包装参数的选项`cref`，它们都存储指向要传递的实际对象的指针，并在调用位置取消引用指针（通过隐式转换）。如果在绑定时执行到目标类型的转换，那么这将无法实现。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-01-24T05:30:40.527

一个很好的例子是将“std::future”绑定到一些采用普通类型的普通函数：

假设我想以一种令人难以置信的异步方式使用普通的 f(x,y) 函数。即，我想将其称为“f(X.get(), Y.get())”。这有一个很好的理由——我可以调用该行，只要两个输入都可用，f 的逻辑就会运行（我不需要单独的代码行来进行连接）。为此，我需要以下内容：

1）我需要支持隐式转换“std::future<T> -> T”。这意味着 std::future 或我的自定义等效项需要一个强制转换运算符：

```
operator T() { return get(); } 
```

2）接下来，我需要绑定我的泛型函数来隐藏它的所有参数

```
// Hide the parameters
template<typename OUTPUT, typename... INPUTS>
std::function<OUTPUT()> BindVariadic(std::function<OUTPUT(INPUTS...)> f,
                                     INPUTS&&... in)
{
   std::function<OUTPUT()> stub = std::bind( f, std::forward<INPUTS>(in)...);
   return stub;
} 
```

使用在调用时执行“std::function<T> -> T”转换的 std::bind，我只等待所有输入参数在我实际调用“stub()”时变为可用。如果它在绑定时通过运算符 T() 进行转换，那么当我实际构造“存根”而不是使用它时，逻辑会默默地强制等待。如果“stub()”不能总是在我构建的同一个线程中安全运行，那可能是致命的。

还有其他用例也迫使这种设计选择。这个用于异步处理的复杂处理只是我个人熟悉的处理。

# android - 使用Android中的复选框获取ListView中的行位置

> ID：11255148
> 
> 赞同：0
> 
> 时间：2012-06-29T01:56:03.750
> 
> 标签：android, android-listview, listactivity

我正在编写一个 android 应用程序，但在`ListView`使用`CheckBox`.

这是模拟器上的截图： ![https://dl.dropbox.com/u/24223262/help.png](../Images/3479981ebc2552938a1361d6a63778e9.png)

我已经`ListView`用 CheckBoxes 做了。但我不知道如何找到每个选中条目的行位置。一旦我得到检查的位置，我想实施一个*删除选定*的操作。

请帮忙！

这是我的代码：

```
public class ListTest extends ListActivity implements OnCheckedChangeListener {
    @Override 
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);

        //--- Importing StringsArray---     
        Bundle gotBasketScanner = getIntent().getExtras();
        String[] StringArrayHistory = gotBasketScanner.getStringArray("fromHistory");

        // ---Make Adapter---
        setListAdapter( new ArrayAdapter<String>(ListTest.this,
                    android.R.layout.simple_list_item_multiple_choice,
                    StringArrayHistory));

        // ---Put Array into a ListView and add Checkboxes to Listview
        ListView list = getListView();
        list.setChoiceMode(ListView.CHOICE_MODE_MULTIPLE);
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T04:33:55.320

hey check this it will help you...

[http://windrealm.org/tutorials/android/listview-with-checkboxes-without-listactivity.php](http://windrealm.org/tutorials/android/listview-with-checkboxes-without-listactivity.php)

[Android ListView with Checkbox and all clickable](https://stackoverflow.com/questions/5417339/android-listview-with-checkbox-and-all-clickable)

[http://appfulcrum.com/2010/09/12/listview-example-3-simple-multiple-selection-checkboxes/](http://appfulcrum.com/2010/09/12/listview-example-3-simple-multiple-selection-checkboxes/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-29T04:57:07.590

使用`onItemClick()`in 而不是`onCheckedChangeListener`...

```
getListView().setChoiceMode(ListView.CHOICE_MODE_MULTIPLE);
getListView().setOnItemClickListener(new AdapterView.OnItemClickListener() {

@Override
public void onItemClick(AdapterView<?> parent, View view, int position,
                            long id) {
         Toast.makeText(getApplicationContext(), "Item "+position+" is clicked",
                              Toast.LENGTH_SHORT).show();
    }
} 
```

这是获取点击位置和 id 的更好方法。

我希望这能解决你的问题。

**编辑**

我已更新以下行：-

`getListView().setOnItemClickListener(new AdapterView.OnItemClickListener() {`

现在试试你的代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-29T05:00:54.340

您可以将[PrefrenceScreen](http://developer.android.com/reference/android/preference/PreferenceScreen.html)与[CheckBoxPreference](http://developer.android.com/reference/android/preference/CheckBoxPreference.html)一起使用，以实现更轻松且可扩展的实施

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-29T05:54:31.303

您可以使用 CheckedTextView 来实现相同的功能：

**主要的.xml**

```
 <?xml version="1.0" encoding="utf-8"?>
  <CheckedTextView xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent" 
    android:clickable="true"
    android:focusable="true"
    android:checkMark="?android:attr/listChoiceIndicatorMultiple">
  </CheckedTextView> 
```

**添加列表.xml**

```
 <?xml version="1.0" encoding="utf-8"?>
 <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
   android:layout_width="fill_parent"
   android:layout_height="fill_parent"
   android:orientation="vertical" >

  <ListView
     android:id="@+id/mainListView"
     android:layout_width="fill_parent"
     android:layout_height="wrap_content"
     >
  </ListView>

  <Button android:id="@+id/click"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:text="Click"/>
 </LinearLayout> 
```

这是活动**GetCheckedTextPositionActivity**。单击按钮后，您将检查列表项的位置：

```
 public class GetCheckedTextPositionActivity extends Activity {

private ListView myList;
private EfficientAdapter myAdapter;
private ArrayList<String> data;
private LayoutInflater mInflater;
private Button click;
private ArrayList<Integer> positions;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.addlist);

    positions = new ArrayList<Integer>();

    data = new ArrayList<String>();
    data.add("Bangalore");
    data.add("Delhi");
    data.add("Patna");
    data.add("Mumbai");

    click = (Button)findViewById(R.id.click);
    mInflater = LayoutInflater.from(getApplicationContext());
    myList = (ListView) findViewById(R.id.mainListView);
    myAdapter = new EfficientAdapter(data, getApplicationContext());
    myList.setAdapter(myAdapter);

    click.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {

            if(positions.size() != 0){
                for(Integer pos : positions){
                Log.e("Positions checked :"," Positions :"+pos);
                }
            }

        }
    });

}

public class EfficientAdapter extends BaseAdapter {
    private ArrayList<String> myData;

    public EfficientAdapter(ArrayList<String> mData, Context ctx) {
        // TODO Auto-generated constructor stub
        this.myData = mData;
    }

    @Override
    public int getCount() {
        // TODO Auto-generated method stub
        return myData.size();
    }

    @Override
    public Object getItem(int position) {
        // TODO Auto-generated method stub
        return myData.get(position);
    }

    @Override
    public long getItemId(int position) {
        // TODO Auto-generated method stub
        return position;
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {

        final int currentPos = position;

        if (convertView == null) {
            convertView = mInflater.inflate(R.layout.main, null);
        }

        ((CheckedTextView) convertView).setText(myData.get(position));
        ((CheckedTextView) convertView).setOnClickListener(new View.OnClickListener() {
                    public void onClick(View v) {
                        ((CheckedTextView) v).toggle();
                        if(((CheckedTextView) v).isChecked()){
                            positions.add(currentPos);
                        }
                    }
                });
        return convertView;
    }

}
 } 
```

希望这可以帮助。

# apache - Apache 1.x 和 2.x 在 Gzip 压缩方面有什么区别

> ID：11255150
> 
> 赞同：0
> 
> 时间：2012-06-29T01:56:14.363
> 
> 标签：apache, compression, gzip, mod-deflate

我运行的几个测试表明，与 Apache 1.x 相比，Apache 2.x 具有更好的压缩（mod_deflate）。让我知道是否有人做过详细的基准测试。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T18:04:42.093

压缩和速度方面的显着差异是一种固有的权衡，用户可以在压缩与时间上进行选择。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T02:28:32.297

[在这篇Linux Journal 文章](http://www.linuxjournal.com/article/6802)中有一些比较，其中包含 apache 1.3 的 mod_gzip 与 apache 2.0 的 mod_deflate 之间的一些压缩数。

# c# - 无法将字符串添加到字符串 c# 的列表中

> ID：11255152
> 
> 赞同：0
> 
> 时间：2012-06-29T01:56:30.873
> 
> 标签：c#

我正在读取一个包含数据的本地 csv 文件，我最终将使用它来加载到数据库中。我的问题本质上很简单，但我似乎无法理解这个概念。下面是我的代码。很简单的东西。

```
 static void loadTables() {
        int size = new int();
        string[] empid = new string[0];

        //string[] empid = new string();
        List<string[]> EmployeeName = new List<string[]>();
        List<string[]> EmployeeId = new List<string[]>();
        List<string[]> Group = new List<string[]>();
        List<string[]> Org = new List<string[]>();
        List<string[]> Fund = new List<string[]>();
        try {
            using (StreamReader readFile = new StreamReader("C:\\temp\\groupFundOrgReport.csv")) 
            {
             string line;
              string[] row;
              size = 0;
              while ((line = readFile.ReadLine()) != null)
              {
                  row = line.Split(',');
                  /*resize the array up by 1*/
                  Array.Resize(ref empid,empid.Length+1);
                  /*I'm using size as a counter to add to the slot on the array.*/
                  empid[size] = row[0].Remove(0,1);
                  // here I receive error (the best overload match of system generic list?...etc) 
                  EmployeeName.Add(row[0]);
                  size++;

              }

             }
           }

        catch(Exception e){

            Console.WriteLine(e);

        }

    } 
```

我有一个字符串列表，但是任何尝试向其中添加字符串的尝试都会出错。换句话说，如果我尝试这样做**EmployeeName.Add(row[0].ToString);** 我得到一个错误。但是，如果我注释掉这条线，我可以使用旧式数组。我真的很喜欢使用列表，但我似乎无法传递我想要的值。有人可以指出我正确的方向吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T02:00:27.067

你的问题是声明`EmployeeName`，它是一个`List`数组`string`：

```
List<string[]> EmployeeName = new List<string[]>(); 
```

将其更改为：

```
var EmployeeName = new List<string>(); 
```

或者，使用`List<string[]>`相应的...

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-29T02:00:36.307

我从您的代码中猜想员工姓名是 CSV 文件的第一个字段。

您已将 EmployeeName 声明为字符串数组列表`List<string[]>`，而不是字符串列表`List<string>`。

Row[0] 是数组中的第一个字符串，因此您尝试将字符串添加到期望您添加字符串数组的列表中。

您应该将 EmployeeName 声明为 a `List<string>`，使用如下行：

```
List<string> EmployeeName = new List<string>(); 
```

或者

```
var EmployeeName = new List<string>(); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-29T02:00:49.010

`EmployeeName`是一个`List<string[]>`所以你必须写：

```
EmployeeName.Add(row); 
```

要在拆分字符串时删除空条目，请使用：

```
row=line.Split(New String() {","},
                     StringSplitOptions.RemoveEmptyEntries); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-29T02:07:01.930

他们都是`List`'s of `String Array`'s

```
List<string[]> EmployeeName = new List<string[]>(); 
List<string[]> EmployeeId = new List<string[]>(); 
List<string[]> Group = new List<string[]>(); 
List<string[]> Org = new List<string[]>(); 
List<string[]> Fund = new List<string[]>(); 
```

您可以添加的唯一变量就像

```
//Define array of strings
var strArr = new string[] {"abc", "xyz"}; 
```

然后你可以打电话

```
EmployeeName.Add(strArr); 
```

尽管将`List`泛型类型更改为`string`类型会解决您的问题

```
List<string> EmployeeName = new List<string>(); 
List<string> EmployeeId = new List<string>(); 
List<string> Group = new List<string>(); 
List<string> Org = new List<string>(); 
List<string> Fund = new List<string>();

var str = "My String";

EmployeeName.Add(str); 
```

# android - 如何使用不展开，只是用来点击的微调器？

> ID：11255155
> 
> 赞同：3
> 
> 时间：2012-06-29T01:56:40.510
> 
> 标签：android, android-layout

我从谷歌日历中得到这个，希望你能看到图片：

![在此处输入图像描述](../Images/f67a68ddf82e5c7fd1b8f82542c5e2c5.png)

当专门查看**From**和**To**部分时，它们看起来像`Spinner`s，但我可能完全错了。我想这样做，基本上就像 ICS 中的日历对`Spinner`s 所做的那样。我将用户日期放入其中，然后用户单击并弹出一个日期选择器。问题是，我看不到任何可以让我在其中设置文本的东西。如何在不扩展的情况下将其设置为文本？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T12:06:12.280

他们不使用 a `Spinner`，而是使用`Button`看起来像 a 的 a `Spinner`。查看应用程序的[style.xml](https://github.com/android/platform_packages_apps_calendar)文件。

# nosql - 我应该如何管理json域数据，nosql或sql解决方案

> ID：11255157
> 
> 赞同：1
> 
> 时间：2012-06-29T01:57:47.960
> 
> 标签：nosql

我一直有这个问题，所以我觉得我只是问。

我们有一个基本上是域数据应用程序的系统。非常低的使用频率/数量。从这一点来看，使用 nosql 解决方案似乎没有意义。

另一方面，我们所有的操作几乎都是以 json 格式检索“对象”，并根据对象层次结构操作这组数据库。从这方面来看，我真的不明白为什么我会使用关系数据库来“建模”这些对象，然后将其检索/翻译成 json 并返回。

所以问题真的是，我如何证明使用基于 nosql 的解决方案是合理的？在上述情况下应用 nosql 解决方案是否有点矫枉过正？

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T13:12:09.737

我认为使用 SQL 解决方案可能有点矫枉过正。

如果您的数据已经是 JSON 格式，那么为什么要产生额外的来回转换开销？

这完全取决于您对所选数据库的期望。性能、安全性、可扩展性等

根据您提供的信息，我倾向于选择 NoSQL / MultiValue DB 解决方案以实现兼容性。但是，如果您有特殊要求，例如可扩展性或性能，那么您应该将它们纳入决策过程。如果您需要良好的性能，您可以使用类似 NoSQL 的解决方案来实现这一点，即使在小型硬件上也是如此。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T17:21:54.870

基于一个简单的问题使用 NoSQL 或 SQL 显示：“我的数据是关系型的吗？” 不是“我会有一堆数据要存储吗？”，我认为 NoSQL 回答了“如何存储明显非关系的信息”的问题，当然，大多数 NoSQL 引擎都是以性能和可伸缩性为创建的他们主要关心的是，但我想你不会在这种情况下陷入用锤子杀死苍蝇的表情。

NoSQL 存储可能非常有用的一点是您将能够查询您的信息，如果您使用 SQL 引擎，这将不适用，因为它们会将您的 json 视为 blob，并且这些查询将很难创建.

我认为你应该去像 djondb、MongoDB、Redis 等这样的文档存储，它为你的数据提供查询功能。

# javascript - jQuery点击事件触发两次？

> ID：11255158
> 
> 赞同：1
> 
> 时间：2012-06-29T01:57:50.077
> 
> 标签：javascript, jquery, coffeescript

这是一个相当奇怪的案例，您可以在此处查看代码：

[http://jsfiddle.net/zpZtH/2/](http://jsfiddle.net/zpZtH/2/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T02:12:36.670

`input`你不应该使用元素来包装元素`label`，试试这个：

```
<label for="average-data" class="section-view-time-checkbox">
    <span class="custom checkbox checked"></span> Average  
</label>
<input type="checkbox" id="average-data" style="display: none;"> 
```

[http://jsfiddle.net/zpZtH/7/](http://jsfiddle.net/zpZtH/7/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T02:02:44.010

[http://jsfiddle.net/Cc55g/](http://jsfiddle.net/Cc55g/)

您需要`event.preventDefault()`在点击处理程序中调用。这可以防止在您的自定义函数运行后执行默认单击操作。第二个警报正在发生，因为正在提交表单。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-02T14:40:13.037

这是 Javascript 中的常见错误。你可以在互联网上找到很多关于 SO 的文章，特别是关于事件被触发两次。你可以试试这样的

```
 $(document).on('click', '#task-list li', function(e)
 {
       alert('Hellow world');
       e.stopPropagation();
       return false;
 }); 
```

这绝对是 Javascript 问题，因为如果您点击 google 并搜索**event fire 两次**，您会看到 Angular、Jquery 和骨干网等都在某个地方触发了两次甚至三次事件。所以，这似乎是它背后的javascript。当然，如果您使用 Mozilla Developers Network 搜索此内容，那么您会看到专家也这么说。

# php - Javascript数学onkeyup问题

> ID：11255162
> 
> 赞同：0
> 
> 时间：2012-06-29T01:58:30.143
> 
> 标签：php, javascript, mysql

我一生都无法弄清楚以下问题（我对 JavaScript 不太了解）。

这是我的代码：

```
<script type='text/javascript'>//<![CDATA[ 
window.onload=function(){

<?php print("var base = " . $cash2points . " ;\n");?>
   document.getElementById('numberField').onkeyup = function() {
      if(this.value.length == 0) {
         document.getElementById('result').innerHTML = '';
         return;
      }
      var number = parseInt(this.value);
      if(isNaN(number)) return;
      document.getElementById('result').innerHTML = number * base;
   };
   document.getElementById('numberField').onkeyup();

<?php print("var base1 = " . $points2cash . " ;\n");?>
   document.getElementById('numberField1').onkeyup = function() {
      if(this.value.length == 0) {
         document.getElementById('result1').innerHTML = '';
         return;
      }
      var number = parseInt(this.value);
      if(isNaN(number)) return;
      document.getElementById('result1').innerHTML = number * base1;
   };
   document.getElementById('numberField1').onkeyup();
}//]]>  

</script> 
```

`$cash2points = 100`并且代码的第二`$points2cash = 0.01`部分具有`base1`魅力`<span>`_ _这是做不到的。我尝试制作，但仍然产生相同的结果。`0.01``numberfield``base = $cash2points``0``1``$cash2points = 100.00`

我很确定小数会返回为假，`isNaN`所以我认为这也不是问题。

非常感谢任何提示或指示。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-29T02:05:12.110

既然你已经包裹`number`了`parseInt`，你只会得到整数值 - 并且浮点数（如`0.01`）将被截断为整数。尝试`parseFloat`改用。

# cakephp - CakePHP 1.3：saveField 的问题

> ID：11255163
> 
> 赞同：0
> 
> 时间：2012-06-29T01:58:36.690
> 
> 标签：cakephp

我不明白为什么我无法根据以下代码更新数据库中的字段：

```
$this->User->id = 1;
$this->User->saveField('image','img/default_pic.png'); 
```

基本上，我想用新的图像更改 Db 中的当前图像。

上面的代码只是清除当前`image`字段中的值，但不添加任何内容。

例如，会发生以下情况：

```
id    username    image
=============================
1     admin       mypic.jpg
2     john        johnPic.jpg 
```

执行上面的代码后，我得到以下结果

```
id    username    image
=============================
1     admin       
2     john        johnPic.jpg 
```

我对实际发生的事情感到困惑

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T13:18:26.023

解决了！

我决定回去检查我的`user.php`模型类，并意识到我之前尝试过使用`MeioUpload`并放弃了，但我从未删除过该`var actsAs`条目。

只要我把它评论出来，我现在就可以上传图片了。

根据以下博客，对于可能遇到此问题的其他任何人，也`beforeSave`可能导致此类问题：http: [//blog.phplabs.net/2011/11/cakephp-savefield-not-working.html](http://blog.phplabs.net/2011/11/cakephp-savefield-not-working.html)

谢谢，

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-29T10:21:23.653

sql日志说正在发生什么？

我的猜测是你实际上正在做类似的事情

```
$this->User->saveField('image', $variable) 
```

并且`$variable`拼写错误或为空。

# android - 在 Android 的本机代码中使用证书

> ID：11255167
> 
> 赞同：0
> 
> 时间：2012-06-29T01:59:20.327
> 
> 标签：android, openssl, android-ndk

我正在尝试在我的 JNI 代码中为我的 android 应用程序加载证书。有没有人尝试过类似的事情？我知道 Open-SSL 具有需要证书文件的功能。我发现您可以以这种方式将证书存储在内存中。我需要此功能，因为我想对证书进行硬编码。现在这个代码片段应该完成这项工作，但它没有。

```
BIO* mem_bio = BIO_new_mem_buf(certificate, strlen(certificate));
X509* cert = PEM_read_bio_X509_AUX(mem_bio,NULL,NULL,NULL);
X509_STORE_add_cert(ctx->cert_store,cert);
BIO_free(mem_bio);
X509_free(cert);
(ctx is a handle to my SSL_CTX) 
```

我对 C 编程相当陌生，我错过了什么吗？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T17:08:01.810

这是一个愚蠢的错误。我试图构建的共享库没有与我正在使用的 libssl.a 和 libcrypto.a 静态库正确链接。

我在查看输出形式“nm”命令 nm 后发现了这一点，它表明这两个静态库提供的所有函数都是未定义的。

# javascript - 使用 jQuery Deferred 对象管理 ajax 调用

> ID：11255168
> 
> 赞同：0
> 
> 时间：2012-06-29T01:59:21.237
> 
> 标签：javascript, jquery

我必须在给定的时间点检查设备中互联网访问的可用性。因此，我正在对服务器进行 ajax 调用以加载一个小图像。我遇到了 jQuery Deferred 并尝试使用它。

```
var spacer = "some url";
var getImage;
var connectionAlive;
function checkOnline(spacer) {
    getImage = $.ajax({url:spacer})
                .done(function() {console.log('Connection alive');connectionAlive = true;})
                .fail(function() {console.log('Connection dead');connectionAlive = false;});
    if(connectionAlive === true) {
        return true;
    }
    return false;
} 
```

现在我必须在某些事件发生时调用这个 checkOnline 函数。所以，我正在调用该函数并等待承诺得到解决。

```
$(document).on('click','#explore',function() {
    checkOnline(spacer);
    getImage.done(function() {
            // Do something
            })
 }); 
```

这仅在第一次有效，我认为这是因为延迟对象状态在解决后保持不变。我应该如何编写我的代码，以便每次点击事件触发时我都可以实际检查连接？

新代码：

嗨，我遵循了上面的代码，但点击事件仍然只能在第一次正常工作。

```
 var connectionAlive;
var url = "http://example.com";
function checkOnline(url, callback1,callback2) {
    $.ajax({url:url})
        .done(function() {console.log('Connection alive');connectionAlive = true;})
        .done(callback1)
        .fail(function() {console.log('Connection dead');connectionAlive = false;})
        .fail(callback2);

}

$(document).on('click','#explore',function() {
    checkOnline(url, function(){
        console.log('Connection Alive from event');
    },function() {
        console.log('Connection Dead from event');
    });

}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T02:25:58.743

更改`checkOnline`以返回承诺本身：

```
$(document).on('click','#explore',function() {
     checkOnline('url.com').done(function(){
          // Do something
     });
});

var connectionAlive;
function checkOnline(url) {
    return $.ajax({url : url})
            .done(function() {console.log('Connection alive');connectionAlive = true;})
            .fail(function() {console.log('Connection dead');connectionAlive = false;});
} 
```

或将其更改为进行回调：

```
$(document).on('click','#explore',function() {
     checkOnline('url.com', function(){
          // Do something
     });
});

var connectionAlive;
function checkOnline(url, callback) {
    $.ajax({ url : url})
     .done(function() {console.log('Connection alive');connectionAlive = true;})
     .done(callback)
     .fail(function() {console.log('Connection dead');connectionAlive = false;});
     // Do not try to return connectionAlive from here,
     // it will return the value before the ajax response arrived
} 
```

# android - 为什么我的应用程序在 OnCreate 方法上找不到类“com.google.gson.Gson”？

> ID：11255171
> 
> 赞同：0
> 
> 时间：2012-06-29T01:59:46.707
> 
> 标签：android, json, gson

我想使用 Gson 来解析我的 JSON，我已将 Gson 库添加到我的项目中。当我编译它时一切都很好，但是当我运行它时，我收到错误消息日志说

```
Could not find class 'com.google.gson.Gson', referenced from method report.weeklyflash.WeeklyFlashIdActivity.onCreate 
```

这是使用 Gson 的代码：

```
import com.google.gson.Gson;
import report.weeklyflash.ReportResult;
import report.weeklyflash.ReportResults;

public class WeeklyFlashIdActivity extends Activity {

  @Override
  public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    setContentView(R.layout.list_item);

    System.out.println("oncreate");

    final TableLayout tableLayout = (TableLayout) findViewById(R.id.headerTable);

    InputStream is = null;
    String json = "";

    //http get content
    try
    {
        HttpClient httpclient = new DefaultHttpClient();
        HttpGet httpget = new HttpGet("http://10.80.3.73/webservice/Service1.svc/json/weeklyflash/my");
        HttpResponse response = httpclient.execute(httpget);
        HttpEntity entity = response.getEntity();
        is = entity.getContent();

    }
    catch(Exception e)
    {
        Log.e("log_tag", "Error in http connection "+e.toString());
    }

    //convert response to string
    try
    {
        BufferedReader reader = new BufferedReader(new InputStreamReader(is,"UTF-8"),8);

        StringBuilder sb = new StringBuilder();
        String line = null;
        while ((line = reader.readLine()) != null) 
        {
            sb.append(line + "\n");
        }
        is.close();
        json=sb.toString();
    }
    catch(Exception e)
    {
        Log.e("log_tag", "Error converting result "+e.toString());
    }

    ReportResults reports = new Gson().fromJson(json, ReportResults.class);
    List<ReportResult> results = reports.getGetReportResult();
//bla..blaa.bblaa.. 
```

如需更多详细信息，请查看我的完整代码：
[我的活动代码、](http://www.pastie.org/4168954)
[我的 ReportResult 类代码、](http://www.pastie.org/4168964)
[我的 ReportResults 类代码](http://www.pastie.org/4168969)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-29T02:11:36.773

确保将 gson.jar 放在`libs`目录中。从 ADT17 开始，所有外部库 jar 都必须放在那里。

好消息是您只需将它们放在那里，工具就会负责将它们添加到项目中。

哦，该目录需要与`src`and`assets`等处于同一级别。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-09-07T09:16:04.133

在项目的根目录中创建“libs”文件夹，其中保存“src”和“assets”文件夹，将 jar 文件放入其中，仅此而已。现在你可以使用它们了。确保撤消您尝试进行的所有更改。:)

# ajax - Firefox 不会发送跨域资源共享 Pre-flight？

> ID：11255173
> 
> 赞同：4
> 
> 时间：2012-06-29T02:00:03.767
> 
> 标签：ajax, firefox, xmlhttprequest, cors

我已经实现了一个利用 CORS 从另一台服务器收集 JSON 数据的 Web 应用程序。服务器在不同的子域上运行。一切*似乎*都正确实施，并且与 Chromium 配合得很好。以下是我的请求副本，来自 Chromium。

我的问题是在 Firefox（用 13.0.1 测试）中，从来没有对我的 AJAX 资源发出请求。没有发送预检请求，也没有发出实际请求。相反，我从 XMLHttpRequest.send() 函数中得到了这个错误：

```
[21:40:27.546] uncaught exception: [Exception... "Access to restricted URI denied"  code: "1012" nsresult: "0x805303f4 (NS_ERROR_DOM_BAD_URI)"  location: "http://192.168.1.99:2502/static/mootools-core-1.4.5.js Line: 5398"] 
```

我正在使用 Mootools 的`Request.JSON`对象，它设置了各种额外的标题，这意味着确实需要进行预检。但是，它永远不会发送。

不幸的是，JSONP 不是一个选项，因为数据很敏感。

有谁知道问题可能是什么？非常感谢。

* * *

## 工作示例，来自 Chromium：

预检请求：

```
OPTIONS /api/resource HTTP/1.1
Host: dev0.mydomain.com
Connection: keep-alive
Access-Control-Request-Method: GET
Origin: http://192.168.1.99:2502
User-Agent: Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/535.19 (KHTML, like Gecko) Ubuntu/12.04 Chromium/18.0.1025.151 Chrome/18.0.1025.151 Safari/535.19
Access-Control-Request-Headers: origin, x-request, x-requested-with, accept
Accept: */*
Referer: http://192.168.1.99:2502/
Accept-Encoding: gzip,deflate,sdch
Accept-Language: en-US,en;q=0.8
Accept-Charset: ISO-8859-1,utf-8;q=0.7,*;q=0.3
Cookie: [redacted] 
```

预检响应：

```
HTTP/1.0 200 OK
Server: PasteWSGIServer/0.5 Python/2.7.3
Date: Fri, 29 Jun 2012 01:43:37 GMT
Content-Length: 0
Access-Control-Allow-Headers: Cookie, Origin, X-Request, X-Requested-With, Accept
Access-Control-Max-Age: 1
Access-Control-Allow-Credentials: true
Access-Control-Allow-Origin: http://192.168.1.99:2502
Access-Control-Allow-Methods: GET
Content-Type: text/html; charset=UTF-8 
```

“真实”请求：

```
GET /api/resource HTTP/1.1
Host: dev0.mydomain.com
Connection: keep-alive
Origin: http://192.168.1.99:2502
X-Request: JSON
X-Requested-With: XMLHttpRequest
User-Agent: Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/535.19 (KHTML, like Gecko) Ubuntu/12.04 Chromium/18.0.1025.151 Chrome/18.0.1025.151 Safari/535.19
Accept: application/json
Referer: http://192.168.1.99:2502/
Accept-Encoding: gzip,deflate,sdch
Accept-Language: en-US,en;q=0.8
Accept-Charset: ISO-8859-1,utf-8;q=0.7,*;q=0.3
Cookie: [redacted] 
```

“真实”的回应：

```
HTTP/1.0 200 OK
Server: PasteWSGIServer/0.5 Python/2.7.3
Date: Fri, 29 Jun 2012 01:43:37 GMT
Access-Control-Allow-Origin: http://192.168.1.99:2502
Content-Type: text/html; charset=UTF-8
Content-Length: 22
Access-Control-Allow-Credentials: true 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-29T13:11:45.477

答案在问题的评论中给出。由于我提供的 HTTP 身份验证用户名，Firefox 没有发送请求。

# iphone - 如何为非 ARC 项目中的文件启用 ARC？

> ID：11255177
> 
> 赞同：31
> 
> 时间：2012-06-29T02:00:32.310
> 
> 标签：iphone, xcode, automatic-ref-counting

我知道您可以使用`-fno-objc-arc`flag 为 ARC 项目中不支持 ARC 的文件禁用 ARC。

有什么方法可以在非 ARC 项目中为支持 ARC 的文件启用 ARC？

谢谢！

* * *

## 回答 #1

> 赞同：62
> 
> 时间：2012-06-29T02:01:45.630

`-fobjc-arc`是的：以同样的方式添加标志。

# c# - 如何使用 xpath 过滤 xml 数据？

> ID：11255179
> 
> 赞同：0
> 
> 时间：2012-06-29T02:00:41.067
> 
> 标签：c#, asp.net, xml

如果我有一个这样的 xml 文件：

```
 <?xml version="1.0" encoding="utf-8" ?> 
<Employees> 
   <Employee Department="Sales"> 
      <Name>David</Name> 
      <Salary>20000</Salary> 
   </Employee> 
   <Employee Department="Finance"> 
      <Name>Simon</Name> 
      <Salary>18000</Salary> 
   </Employee> 
   <Employee Department="Accounts"> 
      <Name>Peter</Name> 
      <Salary>22000</Salary> 
   </Employee> 
</Employees> 
```

然后数据显示在转发器中，如下所示：

```
<asp:Repeater ID="Repeater1" runat="server" DataSourceID="XmlDataSource1">
   <ItemTemplate>
      <strong> 
     <%# XPath("@Department")%><br /> 
  </strong> 
  - Name: <%#XPath("Name")%><br /> 
  - Salary: <%#XPath("Salary")%><br />  
   </ItemTemplate>
</asp:Repeater> 
```

我怎样才能只显示销售部门的员工？这是在一个 asp.net webapp 中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T02:29:03.530

尝试在数据源上使用 XPath。

```
<asp:XmlDataSource DataFile="data.xml" runat="server" ID="XmlDataSource1" XPath="/Employees/Employee[@Department='Sales']" />

<asp:Repeater ID="Repeater1" runat="server" DataSourceID="XmlDataSource1">
   <ItemTemplate>
    <strong>Department: <%# XPath("@Department")%><br /></strong> 
    - Name: <%#XPath("Name")%><br /> 
    - Salary: <%#XPath("Salary")%><br />  
   </ItemTemplate>
</asp:Repeater> 
```

**输出**

```
Department: Sales
- Name: David
- Salary: 20000 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T02:12:18.823

数据在后台使用过滤器作为数据源Repeater，貌似不能

# jquery - 如何以编程方式获取 jQuery 中当前的默认缓动函数？

> ID：11255185
> 
> 赞同：0
> 
> 时间：2012-06-29T02:01:36.033
> 
> 标签：jquery, animation, jquery-animate, easing, jquery-easing

`$.easing`包含内置的缓动函数，但它似乎不包含有关哪个是当前默认值的任何信息（即，如果未明确指定缓动函数，则使用该函数）。`$.speed()`有一个`easing`属性，`undefined`当我运行它时。

# html - AS3 如何使用 2 个影片剪辑中的链接访问 html 文本字段

> ID：11255186
> 
> 赞同：0
> 
> 时间：2012-06-29T02:01:39.580
> 
> 标签：html, actionscript-3, nested, textfield

我是一个初学者，几天以来一直在努力达到这一点。我会很感激一些帮助。

我有一个格式正确的 HTML 文本字段（实例名称：**myHTML**）嵌套在 1 个电影剪辑中：**符号**1又嵌套在电影剪辑中：**white_bg** myHTML 中有链接，并且由于动画需要位于这两个电影剪辑中。

我有一个第一个空帧这个 as3：

```
var myHTMLText:String = "<h1>new projects:</h1>"+
"<a href='http://www.somewebsite1.html'>somewebsite1</a> \n"+
"<a href='http://www.somewebsite2.html'>somewebsite2</a> \n"+
"<a href='http://www.somewebsite3.html'>somewebsite3</a>;

//create and initialize css
var myCSS:StyleSheet = new StyleSheet();
myCSS.setStyle("h1", {fontSize:'13',color:'#666666'});
myCSS.setStyle("a:link", {color:'#0099CC',textDecoration:'none'});
myCSS.setStyle("a:hover", {color:'#003366',textDecoration:'none'});
myHTML.styleSheet = myCSS;
myHTML.htmlText = myHTMLText; 
```

我测试了这部电影，但出现错误：“1120：未定义属性 myHTML 的访问。” 我搜索了很多博客。太复杂。是否有一种简单的方法可以在这些剪辑中单击/访问此文本字段？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T08:02:24.220

如果我对您的理解正确并且您的动作脚本位于根时间线上，则应该是

> white_bg.Symbol1.myHTML.htmlText = myHTMLText;

# python - 如何删除多对多对象而不删除关系中的所有对象？

> ID：11255193
> 
> 赞同：0
> 
> 时间：2012-06-29T02:02:13.827
> 
> 标签：python, django, model-view-controller, many-to-many

在models.py我有...

```
class Siteinfo(models.Model):
    url = models.CharField(max_length=100)
    description = models.TextField()    

class Makesite(models.Model):
    sitename = models.CharField(max_length=100, unique = True) 
    siteinfo = models.ManyToManyField(Siteinfo)
    ref_id = models.ManyToManyField(RefID)
    def __unicode__(self):
        return u'%s' %(self.sitename) 
```

我正在尝试删除一个描述实例并将其替换为另一个实例，并且仍然让它与相同的 url 关联，并且仍然是多对多对象。组上。

所以 group1 是站点名称。建立我的关系

```
url = request.POST['url']
description = request.POST['description']

datsite = Makesite.objects.get(sitename=site)
datsite.siteinfo.add(Siteinfo.objects.create(url=url,description=description)) 
```

但是当我尝试用这段代码删除和替换描述时，它也会删除 url。

```
name = Makesite.objects.get(sitename=site).siteinfo.values_list('description',flat=True)[0]
Makesite.objects.get(sitename=site).siteinfo.get(description=name).delete() 
```

我想我可以尝试编写一些代码来解决这个问题，但我宁愿找到一种方法来删除一个并在其位置添加另一个实例。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T02:43:12.863

只是为了挑剔，您应该使用[表单](https://docs.djangoproject.com/en/1.4/topics/forms/)来处理用户输入。

听起来您想更新一个实例，而不是删除和添加一个几乎完全相同的实例。

```
site_info = Makesite.objects.get(sitename=site).siteinfo.get(description=name)
site_info.description = "new description"
site_info.save() 
```

或者，更简单地说：

```
site_info = Siteinfo.objects.get(makesite__sitename=site, description=name) # only 1 query
site_info.description = "new description"
site_info.save() 
```

# css - CSS可变高度列

> ID：11255199
> 
> 赞同：1
> 
> 时间：2012-06-29T01:47:57.740
> 
> 标签：css, layout

我创建了一个网站 www.unionfamilies.com。

我有一个页眉、一个由两列组成的主要部分和一个页脚。目前，我已经为页眉、主目录、页脚等指定了高度。我想让网站使页眉保持在顶部，列调整以匹配最长列的高度，而页脚保持在底部。有人可以帮我弄这个吗？我是 CSS 新手，所以请耐心等待。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T04:06:50.877

更正了一些 div 的属性。

```
#container {
    background-color: #FFFFFF;
    background-repeat: repeat-x;
    margin-left: auto;
    margin-right: auto;
    position: relative;
    width: 770px;
    z-index: 1;
}
#header {
    background-color: #3A50B6;
    background-position: right center;
    background-repeat: no-repeat;
    height: 109px;
    left: 0;
    position: relative;
    top: 0;
    width: 770px;
    z-index: 1;
}
#menu {
    background-color: #3A50B6;
    background-repeat: repeat-x;
    font-family: Georgia,"Times New Roman",Times,serif;
    height: 40px;
    left: 0;
    margin: 0;
    padding: 0 0 0 10px;
    position: relative;
    z-index: 2;
}
#sidebar {
    background-color: #FFFFFF;
    border-width: 0;
    float: right;
    left: 0;
    top: 150px;
    width: 225px;
    z-index: 3;
}
#main {
    background-color: #FFFFFF;
    float: right;
    left: 226px;
    padding-left: 20px;
    padding-right: 20px;
    top: 150px;
    width: 503px;
    z-index: 4;
}
#footer {
    background-color: #3A50B6;
    clear: both;
    color: #FFFFFF;
    font-family: Georgia,"Times New Roman",Times,serif;
    font-size: 14px;
    height: 50px;
    left: 0;
    line-height: 3.5em;
    text-align: center;
    vertical-align: middle;
    width: 770px;
    z-index: 1;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T03:23:56.477

您可能需要在#menu 之后创建一个div #wrapper，以同时包含#sidebar 和#main。

但首先，您绝对需要删除 div 中的所有“位置：绝对”（#header、#menu、#main、#footer、#sidebar 等）。

然后你应该在你的 HTML 中添加一个 div #wrapper，它将被放置在你的 #menu 之后，并且将包含你的 #main 和你的 #sidebar，例如：

```
<div id="header"></div>
<div id="wrapper">
   <div id="main"></div>
   <div id="sidebar"></div>
</div> 
```

然后你应该尝试应用这个设置：

```
#container {
width: 770px;
margin: 0 auto;
}

#wrapper {
width: 770px;
height: auto;
padding: 20px;
background-color: white;
}

#main{
width: 503px;
float: right;
} 

#sidebar{
width: 225px;
float:left;} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-29T03:42:02.213

不幸的是，我还没有找到一种方法来成功地使每一列的高度与其在 CSS 中最高的相邻列的高度相同。有 JS 脚本会为您执行此操作（获取高度，然后写入 CSS 内联以设置所有列的高度）。至于其余的，只需制作几个不同的块级元素。你可以在这里看到一点。

[http://jsfiddle.net/LGuGM/](http://jsfiddle.net/LGuGM/)

# categories - 如何在prestashop中列出某个类别的产品

> ID：11255204
> 
> 赞同：0
> 
> 时间：2012-06-29T02:04:10.343
> 
> 标签：categories, prestashop, product

一旦我在左侧快速启动中选择了一个类别，我想列出一个类别的产品。

有人知道该怎么做吗？

提前感谢:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2019-03-29T14:20:24.573

您可以使用**以下函数**获取该类别的所有产品。

```
$id_category = Tools::getValue('id_category');

$products = Product::getProducts(Context::getContext()->language->id, 0, 0, 'date_upd', 'ASC', $id_category, true); 
```

**$products**是属于该类别的产品**数组。**

**注意：** **id_category**应该是产品的**默认类别**。

# c# - c# 和 LINQ，其中集合成员的属性名称通过函数传递

> ID：11255206
> 
> 赞同：3
> 
> 时间：2012-06-29T02:04:29.190
> 
> 标签：c#, linq, generics, parameters

与往常一样，总是感谢帮助/评论的想法，并为我的编程天真表示歉意。

我正在尝试创建一个广泛适用的函数，可用于未来涉及块随机化的研究。patientDataCollection 的每个成员都有一个布尔属性，命名为interventionArm、givenDrugX 或类似的东西。该功能旨在（伪）随机分配给研究组，具体取决于块大小 - 也就是说，如果块大小为 8，则将 4 分配给治疗，将 4 分配给控制（无治疗）。

到目前为止的代码：

```
 public static bool nextAllocation<T>(int blockSize, IEnumerable<T> patientDataCollection, string allocationPropertyName)
 {
    int remainingAllocations = blockSize - patientDataCollection.Count();
    if (remainingAllocations <= 0) throw new Exception("All alocations within block accounted for");
    var p = typeof(T).GetProperty(allocationPropertyName);

    int remainingInterventions = blockSize/2 - patientDataCollection.Count(c => c.p);
    double Pintervention = (double)remainingInterventions / (double)remainingAllocations;
    double rdm = new Random().NextDouble();
    return (rdm <= Pintervention);
 } 
```

这当然是有缺陷的逻辑，因为变量 p 与 linq 语句 PatientDataCollection.Count(c => cp) 中引用的 cp 无关。显然，这个语句只是简单地计算所有具有真值的元素。

ASP 为 4.0。谁能看到如何实现这一目标

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T08:16:15.307

`Func<T, bool>`您可以将用于计数的方法传递给您的方法。

```
public static bool nextAllocation<T>(int blockSize, IEnumerable<T> patientDataCollection, Func<T,bool> predicate) 
{ 
    int remainingAllocations = blockSize - patientDataCollection.Count(); 
    if (remainingAllocations == 0) throw new Exception("All alocations within block accounted for"); 
    int remainingInterventions = blockSize/2 - patientDataCollection.Count(predicate); 
    double Pintervention = remainingInterventions / remainingAllocations; 
    double rdm = new Random().NextDouble(); 
    return (rdm <= Pintervention); 
} 
```

使用示例如下：

```
var result = nextAllocation(10, collection, c=>c.interventionArm); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-29T02:08:27.817

您可以使用[反射](http://msdn.microsoft.com/en-us/library/b05d59ty.aspx)来获取属性的值：

```
int remainingInterventions = blockSize/2 - 
    patientDataCollection.Count(c => (bool)p.GetValue(c,null)); 
```

也添加错误检查。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-29T05:58:03.220

尝试使用表达式

```
public static class ExpressionCreator
{
    public static Func<T, TProperty> CreatePropertyAccessExpression<T, TProperty>(string propertyName)
    {
        var tType = typeof (T);
        var property = tType.GetProperty(propertyName);
        var parameterExpression = Expression.Parameter(tType);
        var memberAccessExpression = Expression.MakeMemberAccess(parameterExpression, property);
        var lambda = Expression.Lambda<Func<T, TProperty>>(memberAccessExpression, parameterExpression);
        return lambda.Compile();
    }
} 
```

示例用法：

```
 public class A
    {
        public bool Thing1 { get; set; }
        public bool Thing2 { get; set; }
    }

    static void Main(string[] args)
    {
        var @as = new A[10];
        for(var i = 0; i < @as.Length; i+=2)
        {
            @as[i] = new A {Thing1 = true};
            @as[i + 1] = new A {Thing2 = i%4 == 0};
        }

        var thing1Expression = ExpressionCreator.CreatePropertyAccessExpression<A, bool>("Thing1");
        var thing2Expression = ExpressionCreator.CreatePropertyAccessExpression<A, bool>("Thing2");
        Console.WriteLine(@as.Count(thing1Expression));
        Console.WriteLine(@as.Count(thing2Expression));
        Console.ReadLine();
    } 
```

# python - 多对多关系中的 Django 管理错误

> ID：11255209
> 
> 赞同：0
> 
> 时间：2012-06-29T02:04:37.910
> 
> 标签：python, django, many-to-many, django-orm

例如。

```
class One(models.Model):

     text=models.CharField(max_length=100)

class Two(models.Model):

     test = models.Integer()
     many = models.ManyToManyField(One, blank=True) 
```

当我尝试在管理面板中保存对象时，出现以下错误：

“'Two'实例需要有一个主键值才能使用多对多关系。”

我使用 django 1.3。我尝试将 AutoField 添加到两个类，但它也不起作用。

这是我的代码。

```
from django.http import HttpResponse, HttpResponseRedirect
from django.shortcuts import render_to_response, redirect
from django.template import RequestContext
from django.core.urlresolvers import reverse
from project.foo.forms import FooForm
from project.foo.models import Foo
from project.fooTwo.views import fooTwoView

def foo(request, template_name="foo_form.html"):
    if request.method == 'POST':
        form = FooForm(data=request.POST)
        if form.is_valid():
            foo = Foo()
            foo.name = request.POST.get("name")
            foo.count_people = request.POST.get("count_people")
            foo.date_time = request.POST.get("date_time")
            foo.save()
            return fooTwoView(request)
    else:
        form = FooForm()

    return render_to_response(template_name, RequestContext(request, {
        "form": form,
    })) 
```

PS我发现我失败了。它在模型中。我在保存方法中使用了多对多。我在使用前添加了检查，但这没有帮助。

```
class Foo(models.Model):
    name = models.CharField(max_length=100, null=False, blank=False)
    count_people = models.PositiveSmallIntegerField()
    menu = models.ManyToManyField(Product, blank=True, null=True)
    count_people = models.Integer()
    full_cost = models.IntegerField(blank=True)

    def save(self, *args, **kwargs):
        if(hasattr(self,'menu')):
            self.full_cost = self.calculate_full_cost()
        super(Foo, self).save(*args, **kwargs)

    def calculate_full_cost(self):
        cost_from_products = sum([product.price for product in self.menu.all()])
        percent = cost_from_products * 0.1
        return cost_from_products + percent 
```

我尝试破解保存方法，例如

```
if(hasattr(self,Two)):
        self.full_cost = self.calculate_full_cost() 
```

这对我有帮助，但我不认为这是 django 的方式。有趣的是，没有这个检查管理面板显示错误，而是创建对象。现在，如果我从两个中选择项目并保存，我的对象没有 full_cost，但是当我查看我的对象时，管理面板会记住我的选择并向我显示我的两个项目，我选择了什么......我不知道为什么。

我该如何保存？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T02:47:30.647

为什么不使用“OneToOneField”而不是多对多

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T08:09:14.443

你的代码有很多问题。最明显的是

1/ 在您看来，使用表单进行用户输入验证/清理/转换，然后忽略经过清理/转换的数据并直接从请求中获取未经清理的输入。使用 form.cleaned_data 而不是 request.POST 来获取您的数据，或者更好地使用 ModelForm 它将为您创建一个完全填充的 Foo 实例。

2/ Python 方法中没有隐含的“this”（或“self”或其他）指针，您必须明确使用“self”来获取实例属性。这是您模型的“保存”方法的真正作用：

```
 def save(self, *args, **kwargs):
       # test the truth value of the builtin "id" function
       if(id):  
           # create a local variable "full_cost" 
           full_cost = self.calculate_full_cost()
       # call on super with a wrong base class
       super(Banquet, self).save(*args, **kwargs)
       # and exit, discarding the value of "full_cost" 
```

现在关于您的问题： Foo.save 显然不是基于 m2m 相关对象计算 someting 的正确位置。要么编写一个独特的方法来运行计算并更新 Foo 并保存它并在保存 m2m 后调用它（提示：ModelForm 将负责为您保存 m2m 相关对象），或者只使用 m2m_changed 信号。

话虽这么说，我强烈建议你花几个小时学习 Python 和 Django——它会为你节省很多时间。

# r - 剧情出现奇怪差距的原因

> ID：11255210
> 
> 赞同：-4
> 
> 时间：2012-06-29T02:04:40.480
> 
> 标签：r, plot, time-series

我有这个深度与时间的图：![ ](../Images/73f11b3553968496857abe5da3c45206.png) 这个图在五月初有一个奇怪的差距。

![在此处输入图像描述](../Images/69516914895e48fdafccd9fe9d2ad6ec.png)

我检查了数据，但没有 NAs 或 Nans 或没有丢失数据。这是一个以 15 分钟为间隔的时间序列

我不能在这里给出数据集，因为它包含 10,000 行。有人可以提出建议吗？

我正在使用以下绘图代码：

```
 library(zoo)
   z=read.zoo("data.txt", header=TRUE)
   temp=index(z[,1])
   m=coredata(z[,1])
x=0.001
p=rep.int(x,length(temp))
png(filename=paste(Name[k],"_mean1.png", sep=''), width= 3500, height=1600, units="px")
par(mar=c(13,13,5,3),cex.axis= 2.5, cex.lab=3, cex.main=3.5, cex.sub=5)
plot(temp,m, xlab="Time", ylab="Depth",type='l', main=Name[k])
symbols(temp,m,add=TRUE,circles=p, inches=1/15, ann=F, bg="steelblue2", fg=NULL)
dev.off() 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-29T04:02:42.247

好的，这是您发布的内容的猜测。

我猜在 5 月初的一段时间内没有数据显示有问题的“差距”突然出现。没有 NA，因为这一时期根本没有任何数据行。这行代码仍然在绘图上绘制了一条细黑线，它将数据中的“差距”联系起来......

```
plot(temp,m, xlab="Time", ylab="Depth",type='l', main=Name[k]) 
```

...但是没有足够近的蓝色符号（圆圈）绘制在一起，使其看起来像一条连续的蓝线。使用以下代码在现有绘图的顶部绘制蓝色符号：

```
symbols(temp,m,add=TRUE,circles=p, inches=1/15, ann=F, bg="steelblue2", fg=NULL) 
```

我建议不要绘制一条线，然后在其顶部绘制符号，而是绘制一条粗蓝线以开始，例如：

```
plot(temp,m, xlab="Time", ylab="Depth",type='l', main=Name[k],lwd=5,col="steelblue2") 
```

# asp.net-mvc - asp.net MVC Serving Dynamic images not working on server (only local)

> ID：11255216
> 
> 赞同：0
> 
> 时间：2012-06-29T02:05:40.753
> 
> 标签：asp.net-mvc, image, dynamic, asp.net-mvc-2, devexpress

我正在尝试让 DevExpress 仪表控件在 MVC 中工作。实际教程在这里： http: [//www.devexpress.com/Support/Center/p/E2976.aspx](http://www.devexpress.com/Support/Center/p/E2976.aspx)。它通过 xml 文件创建设置并构建图像，然后将其存储在控制器的内存流中并推送到位于视图上的 img 标签。这个 img tags src attr 正在调用 Url.Action 来调用动作来渲染 Gauge。控制器中的代码如下所示

```
[OutputCache(Duration = 1000, VaryByParam = "param")]
        public ActionResult RenderGauge(double param)
        {
            ASPxGaugeControl ctrl = new ASPxGaugeControl();
            param = param * 100;
            ctrl.RestoreLayoutFromXml(Server.MapPath("~/App_Data/gauge.xml"));
            (ctrl.Gauges["myGauge"] as CircularGauge).Scales["myScale"].Value = (float)param;

            MemoryStream stream = new MemoryStream();
            ctrl.ExportToImage(stream, ImageFormat.Jpeg);

            stream.Seek(0, SeekOrigin.Begin);
            return new FileStreamResult(stream, "image/jpeg");
        } 
```

视图如下所示：

```
<div style="background: 1px solid Blue; width; 240px;">
<%  double data = Model.ListData[0].Percentage; %>
                    <img src='<%: Url.Action("RenderGauge", "GetDashBoard", new RouteValueDictionary(new { param = data })) %>'
                        alt="Gauge showing data" id="gaugeImg1" />

    </div> 
```

同样，这一切都在我的本地机器上工作，但在服务器上呕吐。src attr 似乎渲染得很好：

```
<img src='/CINet/CorporateDashBoard/GetDashBoard/RenderGauge?param=0.7'
                        alt="Gauge showing data" id="gaugeImg1" /> 
```

我还想补充一点，这是 IIS 7、MVC 2，我尝试添加在 Internet 上找到的特殊处理程序但没有成功：

```
<handlers>
      <add type="DevExpress.Web.ASPxUploadControl.ASPxUploadProgressHttpHandler, DevExpress.Web.v11.2, Version=11.2.11.0, Culture=neutral, PublicKeyToken=b88d1754d700e49a" verb="GET,POST" path="ASPxUploadProgressHandlerPage.ashx" name="ASPxUploadProgressHandler" preCondition="integratedMode" />
      <add name="PNG Images" path="*.png" verb="*" type="System.Web.StaticFileHandler" resourceType="Unspecified" preCondition="integratedMode" />
 </handlers> 
```

Any help would be greatly appreciated!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T14:18:04.880

Thank you everyone for your questions, it was weird because it never puked and going directly there yielded the same results of the 'x' and alt text being displayed but no image. Turned out to be that the Gauge dll for DevExpress was not being copied locally on the server. Would have thought I would have gotten a complaining exception for that, but oh well. Hope this helps others

# javascript - 使用 javascript 数组填充下拉选择框

> ID：11255219
> 
> 赞同：36
> 
> 时间：2012-06-29T02:05:58.553
> 
> 标签：javascript, html, drop-down-menu

我有一个文本文件，我正在读取数据并将其存储在一个 javascript 数组中，它是一个美食列表。我想使用数组来填充下拉选择框。我知道如何在下拉框的值中硬编码（如果我错了，使用纠正我），但我希望能够使用数组来填充它。

```
<script type="text/javascript">
var cuisines = ["Chinese","Indian"];            
</script>

<select id="CusineList"></select> 
```

为了简单起见，我硬编码了一个数组，“CuisineList”是我的下拉框

* * *

## 回答 #1

> 赞同：88
> 
> 时间：2012-06-29T02:15:29.430

使用`for`循环遍历您的数组。对于每个字符串，创建一个新`option`元素，将字符串分配为其`innerHTML`and `value`，然后将其附加到`select`元素。

```
var cuisines = ["Chinese","Indian"];     
var sel = document.getElementById('CuisineList');
for(var i = 0; i < cuisines.length; i++) {
    var opt = document.createElement('option');
    opt.innerHTML = cuisines[i];
    opt.value = cuisines[i];
    sel.appendChild(opt);
} 
```

[**演示**](http://jsfiddle.net/jackwanders/kGgkE/)

**更新：使用`createDocumentFragment`和`forEach`**

如果您有一个非常大的要附加到文档的元素列表，则单独附加每个新元素可能是无效的。`DocumentFragment`充当可用于收集元素的轻量级文档对象。一旦你的所有元素都准备好了，你可以执行一个`appendChild`操作，这样 DOM 只更新一次，而不是`n`多次。

```
var cuisines = ["Chinese","Indian"];     

var sel = document.getElementById('CuisineList');
var fragment = document.createDocumentFragment();

cuisines.forEach(function(cuisine, index) {
    var opt = document.createElement('option');
    opt.innerHTML = cuisine;
    opt.value = cuisine;
    fragment.appendChild(opt);
});

sel.appendChild(fragment); 
```

[**演示**](http://jsfiddle.net/jackwanders/1qja2vg2/)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2016-04-29T09:19:14.097

这是我最近编写的 REST 服务的一部分。

```
var select = $("#productSelect")
for (var prop in data) {
    var option = document.createElement('option');
    option.innerHTML = data[prop].ProduktName
    option.value = data[prop].ProduktName;
    select.append(option)
} 
```

我发布这个的原因是因为 appendChild() 在我的情况下不起作用，所以我决定提出另一种同样有效的可能性。

# java - 在删除该文件夹中的所有文件之前检查文件夹是否存在

> ID：11255224
> 
> 赞同：0
> 
> 时间：2012-06-29T02:08:21.320
> 
> 标签：java

我很难尝试添加一个 if 语句来检查该文件夹在删除之前是否存在，如果不存在，它将不会尝试运行。我在另一个类中使用该类，所以目前，由于该文件夹不存在，它使主类在失败时停止它正在做的事情。如果您可以使其进行多次扩展，则可以加分。

```
public class cleardiroftxt {
static String userprofile = System.getenv("USERPROFILE");
   private static final String FILE_DIR = userprofile+"\\Downloads\\Software_Tokens";
   private static final String FILE_TEXT_EXT = ".txt";

   public static void run(String args[]) {
    new cleardiroftxt().deleteFile(FILE_DIR,FILE_TEXT_EXT);
   }

   public void deleteFile(String folder, String ext){

     GenericExtFilter filter = new GenericExtFilter(ext);
     File dir = new File(folder);

     //list out all the file name with .txt extension
     String[] list = dir.list(filter);

     if (list.length == 0) return;

     File fileDelete;

     for (String file : list){
    String temp = new StringBuffer(FILE_DIR)
                      .append(File.separator)
                      .append(file).toString();
        fileDelete = new File(temp);
        boolean isdeleted = fileDelete.delete();
        System.out.println("file : " + temp + " is deleted : " + isdeleted);
     }
   }

   //inner class, generic extension filter 
   public class GenericExtFilter implements FilenameFilter {

       private String ext;

       public GenericExtFilter(String ext) {
         this.ext = ext;             
       }

       public boolean accept(File dir, String name) {
         return (name.endsWith(ext));
       }
    }
} 
```

如果你需要它，我在这里调用它

```
public void actionPerformed(ActionEvent e){
        JButton clickedButton = (JButton) e.getSource();

        // JOptionPane.showMessageDialog(null, clickedButton.getText() + " clicked");
        cleardir.run(null);
        cleardiroftxt.run(null);
        Unzip.run(null);
        //when we click the ok button... then
        if(clickedButton == btnOk){
            JOptionPane.showMessageDialog(null, clickedButton.getText() + " clicked");  
            String cboString = (String) cboSequence.getSelectedItem();

            /* we have to check if user have entered any value, is the chosen digit is NOT NONE.
             * the ComboBox selection is NOT "None"
             */
            if(cboString.equals("None") == false){
                String temp = txtSequence.getText();

                // then it has to be have some value for the textfield
                if(temp.equals("") || temp == null){
                    JOptionPane.showMessageDialog(null, "Oops... Please fill up the sequence number field");
                    txtSequence.grabFocus();
                    //something to highlight the field in future?
                    return;
                }
            }
            JOptionPane.showMessageDialog(null, "rename invoked");
            renameFile();   

        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T02:27:10.280

```
File dir = new File(folder);

if (dir.exists()) {

  //list out all the file name with .txt extension
  String[] list = dir.list(filter);

  ...
} 
```

# php - Mongo 组查询 - 过滤结果

> ID：11255227
> 
> 赞同：0
> 
> 时间：2012-06-29T02:08:50.657
> 
> 标签：php, mongodb, mongodb-query, nosql

我在我的 mongo 组查询中遇到问题：（这是 PHP 代码）

```
$conditions = array(
                 'user' => array(
                      '$ne' => $uid
                 )
            );

            $group = $db->words->group(
                array("word" => true),
                array("count" => 0),
                "function(obj, prev) { prev.count += 1 }",
                $conditions
            ); 
```

想象一下单词集合中的以下文档

```
{
_id: 3,
word: "hello",
user: "test"
}
{
_id: 2,
word: "world",
user: ""
}
{
_id: 1,
word: "test",
user: ""
} 
```

我需要从 group 命令返回的是：

```
{
    word: "world",
    count: 1
    } 
```

我只需要在任何文档中都没有用户关联的单词。目前我得到：

```
{
    word: "test",
    count: 2
    }
{
    word: "world",
    count: 1
    } 
```

这有意义吗？我还是从 mongo 开始...

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T08:13:23.080

我认为您不能直接在 group() 中过滤计数。

您需要将其过滤掉客户端。我怀疑这无论如何都是你想要的，因为你会希望以一种或另一种方式对计数进行排序（我知道我会的）。所以是的，你需要通过每个文档取出计数字段。

我相信聚合框架会更好：

[http://docs.mongodb.org/manual/reference/aggregation/#_S_group](http://docs.mongodb.org/manual/reference/aggregation/#_S_group)

您可以将其用作管道，然后在 $sort 或其他任何内容之后替换另一个管道中的字段。

希望这可以帮助，

# asp.net - ApplicationInstance.CompleteRequest 不会停止执行它下面的代码吗？

> ID：11255229
> 
> 赞同：10
> 
> 时间：2012-06-29T02:08:58.700
> 
> 标签：asp.net

有人告诉我 Respond.Redirect 是一个昂贵的过程，因为它会引发 ThreadAbortException。因此，我们应该改用 CompleteRequest 函数。所以我试了一下，但我注意到它下面的代码仍在运行，这是我不想要的。我想立即强制浏览器跳转到另一个网站。

```
Public Shared Sub TestCompleteRequest()
            If 1 = 1 Then
                System.Web.HttpContext.Current.Response.Redirect("Http://Google.com", False)
                System.Web.HttpContext.Current.ApplicationInstance.CompleteRequest()
            End If

            Throw New ApplicationException("Hello, why are you here?")
End Sub 
```

至于上面的代码，还是抛出了ApplicationException。但为什么？:(

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-06-29T08:25:38.543

一种方法不会直接替换另一种方法。[CompleteRequest() 方法](http://blogs.msdn.com/b/tmarq/archive/2009/06/25/correct-use-of-system-web-httpresponse-redirect.aspx) 在调用时**不会**结束执行。因此，如果这确实是您想要做的，那么 Response.Redirect(string) 将是正确的选择。

CompleteRequest() 只是绕过[Response.End()](https://stackoverflow.com/questions/1087777/is-response-end-considered-harmful)方法，这是生成您提到的 ThreadAbortException 的原因，但至关重要的是 CompleteRequest() 会刷新响应缓冲区。**这意味着 HTTP 302 重定向响应将在您调用 CompleteRequest()的行**发送到浏览器，这使您有机会在响应发送给用户后执行不影响响应的操作。

您的解决方案实际上取决于您需要实现的目标，您能否提供一个示例，说明您正在使用 Response.Redirect 以及相同方法中的其他代码？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-29T08:35:40.183

调用 ASP.NET 框架中的方法来处理*请求*，但事实是您仍在编写和运行**VB.NET** -*语言*中没有任何内容（我会说也不应该有）表明“当这个方法返回，执行`Exit Sub`'.

无论如何，谁说你不想在告诉 ASP.NET 完成请求之后再执行一些方法呢？

# jquery - 服务器端jquery

> ID：11255230
> 
> 赞同：4
> 
> 时间：2012-06-29T02:09:02.073
> 
> 标签：jquery, node.js, server-side

假设我有一个用 perl 或 python 编写的脚本。编写将在字符串上使用 jquery 选择器作为其一部分的函数的最简单方法是什么？即能够做到：

```
jquery_selector('table.new#element', text) 
```

where`jquery_selector`是一个对存储在 .html 中的 html 字符串运行 jquery 选择器的函数`text`。即使它仅限于返回字符串（不是完整的 jquery 对象），它仍然非常有用。即，如果您需要提供一个 javascript 函数作为回调，该回调会将结果呈现为脚本语言中可理解的内容：

```
jquery_selector('table.new#element, text, 'function(e){return e.val()}') 
```

它会将回调的结果作为列表返回。

我意识到大多数语言都有 dom 库，但是 jquery 比它们中的大多数要好得多。

我不是在询问具有 jquery 之类的语法的本机库。我猜想运行 jquery 的浏览器需要一个 API 吗？或者这就是 node.js 的作用？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-29T02:21:52.113

如果我正确理解你的问题，你想要的是[phantom.js 之](http://phantomjs.org/)类的东西。PhantomJS 是一个带有 JavaScript API 的无头 WebKit。您可以将 jquery 注入其中并使用所有 jquery 选择器来操作 dom。你也可以让它像一个独立的服务器一样工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-16T09:36:27.007

我很困惑，因为您在问题中引用了 Python 或 Perl，但用“node.js”标记了这个问题。运行 node.js 和/或 phantom.js 只是为了在 HTML DOM 上运行选择器对我来说听起来很重，并且在实际项目中应该仔细考虑引入整个依赖链。

因此，对于 Python，我建议运行[BeautifulSoup](http://www.crummy.com/software/BeautifulSoup)和[soupselect](https://code.google.com/p/soupselect/)的组合，如[本答案](https://stackoverflow.com/a/3051389/171579)中所述。然后，您可以执行以下操作：

```
from BeautifulSoup import BeautifulSoup as Soup
from soupselect import select
import urllib

soup = Soup(urllib.urlopen('http://slashdot.org/'))
select(soup, 'div.title h3') 
```

请注意，soupselect 似乎只实现了 jquery 的 CSS3 选择器的一个子集，因此对于诸如兄弟选择器或伪类之类的东西，它可能不起作用。在这种情况下，我建议考虑将项目的相关部分移植到 node.js，如果您可以在稍微轻量级的环境中独立运行[Sizzle](https://www.npmjs.org/package/node-sizzle)（jQuery 的选择器引擎）或[Cheerio 。](https://github.com/cheeriojs/cheerio)

# c - 是什么导致了这个奇怪的输出？

> ID：11255232
> 
> 赞同：-1
> 
> 时间：2012-06-29T02:09:40.937
> 
> 标签：c

我有以下代码：

```
void doPlayerMove(void)
{
    bool moved = false;

    while (!moved) 
    {
        printf("\nWhere is the piece you want to move?(rc):");
        int r = getchar() - '0';// gets the row number
        int c = getchar() - '0';// gets the column number

        printf("%d:%d", r, c);// prints the chosen row/column

        clearInput();
        printf("\nWhere is the space you want to move to?(rc):");
        int r2 = getchar() - '0';
        int c2 = getchar() - '0';

        printf("%d:%d", r2, c2);

        ...
    }
}

void clearInput(void)
{
    while(getchar() != '\n');
} 
```

这是我得到的输出：

```
Where is the piece you want to move?(rc):51
5:1
Where is the space you want to move to?(rc):40
4:00 
```

多余的 0 是怎么回事？有谁看到问题出在哪里？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T05:48:06.010

正如 OP 在评论中所说：

> 问题解决了，这是我在调用的某个函数的一些输出......抱歉误报！

# facebook-c#-sdk - 将照片发布到特定页面和相册

> ID：11255234
> 
> 赞同：1
> 
> 时间：2012-06-29T02:09:57.913
> 
> 标签：facebook-c#-sdk, photos

我正在尝试使用 C# Facebook SDK 将照片发布到我作为内容创建者的页面。

```
dynamic parameters = new ExpandoObject();
        parameters.message = txtMessage.Text;
        parameters.source = new FacebookMediaObject
        {
            ContentType = "image/jpeg",
            FileName = Path.GetFileName(ofd.FileName)
        }.SetValue(File.ReadAllBytes(ofd.FileName)); 
```

当我尝试如下路径时，它给了我一个错误，上面写着 (OAuthException - #2500) Unknown path components: /ALBUM_ID/photos

```
 fb.PostTaskAsync("PAGE_ID/ALBUM_ID/photos", parameters); 
```

当我尝试如下路径时，它会将照片发布到我自己的个人资料中。

```
 fb.PostTaskAsync("PAGE_ID/photos", parameters); 
```

我在这里想念什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T09:54:13.640

您只是使用了错误的路径——您必须`/ALBUM_ID/photos`直接发布到，而不是 /page/album/photos 也不是 /page/photos。

另请参阅：[https ://developers.facebook.com/docs/reference/api/album/](https://developers.facebook.com/docs/reference/api/album/)

# android-layout - 在Android中将视图部分定位在屏幕之外

> ID：11255238
> 
> 赞同：2
> 
> 时间：2012-06-29T02:11:01.433
> 
> 标签：android-layout

如何在 Android 中将视图部分放置在屏幕之外？到目前为止，需要滑入的视图放置在 RelativeLayout 内，这是整个布局文件。

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent">

    <WebView
        android:id="@+id/webViewLink"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"/>
    <WebView
        android:id="@+id/webView"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"/>
</RelativeLayout> 
```

第二个 webview 需要部分位于屏幕之外。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-11-16T19:14:25.963

您可以`android:layout_marginRight="-30dp"`按照@user1490103 的建议使用。或者你可以使用`android:translationX`. 如果您打算为此视图设置动画，则翻译会更有意义。记得在RelativeLayout上[设置。](https://developer.android.com/reference/android/view/ViewGroup.html#attr_android:clipChildren)`android:clipChilren="false"`

# php - 如何在php中获取父亲的名字

> ID：11255239
> 
> 赞同：1
> 
> 时间：2012-06-29T02:11:21.230
> 
> 标签：php, mysql

我有一个示例代码：

```
products(id, parent_id, name)
1 | 0 | product1
2 | 0 | product2
3 | 1 | product1_1
4 | 1 | product1_2
5 | 2 | product2_1
6 | 2 | product2_2 
```

并查询：

```
SELECT prod.id, prod.name
FROM `products` AS prod
INNER JOIN `products` AS prod_parent ON prod_parent.product_id = prod.parent_id 
```

但结果是：

```
3 | product1_1
4 | product1_2
5 | product2_1
6 | product2_2 
```

如何获得父母父亲

```
 1 | product1
 2 | product2 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T02:13:36.953

在您的列表中具体说明`SELECT`您希望它们来自哪个表。这将为您提供所有四列，但您可以仅将其修剪为您需要的那些。

```
SELECT 
  prod.id AS prod_id,
  prod.name AS prod_name,
  prod.parent_id AS parent_id,
  prod_parent.name AS parent_name
FROM `products` AS prod
LEFT JOIN `products` AS prod_parent ON prod_parent.product_id = prod.parent_id 
```

# django - 如何在 django 中获得不同模型的平均值？

> ID：11255243
> 
> 赞同：0
> 
> 时间：2012-06-29T02:11:47.117
> 
> 标签：django, templates, view, model, average

我正在尝试获取给定类别中所有产品的每个产品的平均评分（在评论模型中找到）。我很难做到这一点。相关的 urlconf、视图和模板如下：

```
url(r'^category/(?P<category_id>\d+)/$', 'view_product_category'),

class Productbackup(models.Model):
    website = models.CharField('Product name', max_length = 200)
    website_url = models.URLField('Product URL')
    category = models.ForeignKey(Categories)
    def __unicode__(self):
        return self.website

class ProductbackupForm(ModelForm):
    class Meta:
        model = Productbackup

def get_avg_rating(self):
    reviews = Reviewbackup.objects.filter(product=self)
    count = len(reviews)
    sum = 0
    for rvw in reviews:
        sum += rvw.rating
    return (sum/count)

class Reviewbackup(models.Model):
    review = models.CharField('Review', max_length = 2000)
    rating = models.IntegerField(max_length=200)
    product = models.ForeignKey(Product)
    def __unicode__(self):
        return self.review

class Categories(models.Model):
    category = models.CharField('Category_second', max_length = 200)
    def __unicode__(self):
        return unicode(self.category)

def view_product_category(request, category_id):
    allproduct = Productbackup.objects.filter(category_id=category_id)
    #get average for each product within a category
    return render_to_response('reserve/templates/view_category.html', {'allproduct':allproduct},
    context_instance=RequestContext(request))

{% for product in allproduct %}
    <a href = "/products/{{ product.id}}/reviews"> {{ product.website }}</a>: <a href = "{{ product.website_url }}"> Direct link</a><br>
    #average rating for that product
{{ product.get_avg_rating }}    
{% endfor %} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T04:33:02.163

我将在`Product`模型上添加方法以获得平均评分。

```
class Productbackup(models.Model):
    website = models.CharField('Product name', max_length = 200)
    website_url = models.URLField('Product URL')
    category = models.ForeignKey(Categories)
    def __unicode__(self):
        return self.website

    def get_avg_rating(self):
        reviews = Reviewbackup.objects.filter(product=self)
        count = len(reviews)
        sum = 0
        for rvw in reviews:
            sum += rvw.rating
        return (sum/count) 
```

在模板中：

```
{% for product in allproducts %}
    <a href = "/products/{{ product.id}}/reviews"> {{ product.website }}</a>: <a href = "{{ product.website_url }}"> Direct link</a><br>
    #average rating for that product    
    {{ product.get_avg_rating }}
{% endfor %} 
```

注意：在您的代码中传递“所有产品”而不是“产品”。所以相应地更新视图代码。在您的代码`{% for product in product %}`中使用相同的变量名，这是不正确的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-10-16T13:43:30.787

非常有效（无需迭代）的方法是使用方法[聚合](https://docs.djangoproject.com/en/dev/topics/db/aggregation/#cheat-sheet)`Avg()`，

```
 class Productbackup(models.Model):
        website = models.CharField('Product name', max_length = 200)
        website_url = models.URLField('Product URL')
        category = models.ForeignKey(Categories)
        def __unicode__(self):
            return self.website

        def get_avg_rating(self):
            reviews = Reviewbackup.objects.filter(product=self).aggregate(rating_avg=Avg('rating'))
            return (reviews['rating_avg']) 
```

在模板中：

```
 {% for product in allproducts %}
        <a href = "/products/{{ product.id}}/reviews"> {{ product.website }}</a>: <a href = "{{ product.website_url }}"> Direct link</a><br>
        #average rating for that product    
        {{ product.get_avg_rating }}
    {% endfor %} 
```

# php - 数据库查询重定向到主目录

> ID：11255250
> 
> 赞同：0
> 
> 时间：2012-06-29T02:13:35.963
> 
> 标签：php, mysql, redirect

我有最简单的数据库条目，当我点击“提交”时，它会将我带到我的主目录，并且没有任何内容添加到数据库中。如何修复它以便输入数据？我过去使用相同的代码没有遇到过这样的问题......

```
<?php
 if(isset($_POST['submit'])) {
   $text = $_POST['text'];
   $link = mysql_connect("localhost", "******", "********") or die("Couldn't make connection.");
   @mysql_select_db("*****") or die("Couldn't select database");
   mysql_query("INSERT INTO wall (message) VALUES ('$text')");
 }
?>

<html>
 <form action="post" name="post" id="post">
  <input type="text" id="text" name="text"/>
  <input type="submit" name="submit" id="submit" value="submit"/>
 </form>
</html> 
```

我知道我的密码和数据库名称是正确的，因为当我拿走“form”和“isset”时，每次重新加载页面时它上传都没有问题：

```
<?php
  $link = mysql_connect("localhost", "******", "*******") or die("Couldn't make connection.");
  @mysql_select_db("********") or die("Couldn't select database");
  mysql_query("INSERT INTO wall (message) VALUES ('test')");
?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T02:19:36.387

改变

```
<form action="post" name="post" id="post"> 
```

到

```
<form method="post" name="post" id="post"> 
```

Action 是你希望表单提交到的页面 Method 是类型（默认获取）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-29T02:31:06.367

你的 form<> 没有方法，试试这个：

```
<form method="post" name="post" id="post">

</form> 
```

# forms - 当未给出“标题”属性时，工具提示 javascript 会破坏以下表单元素

> ID：11255252
> 
> 赞同：1
> 
> 时间：2012-06-29T02:13:50.503
> 
> 标签：forms, tooltip, javascript

我正在使用 jqueryTOOLS 提供的 javascript 工具提示在表单中提供工具提示。

对于一些不需要工具提示的表单元素，我想将标题字符串留空，但是如果我这样做，则会导致表单的后续元素中断 - 几乎就像将它们视为工具提示一样：on将鼠标悬停在没有标题字符串的元素上，它会将下一个元素的位置移动到该字段旁边，然后当不再聚焦时，它会永久消失。

我的工具提示代码：

```
$(function() {
$("#myform :input").tooltip({
position: "center right",
offset: [-2, 10],
effect: "fade",
opacity: 0.7
  });
}); 
```

正如您可能已经猜到的那样，此工具提示基于字段的“标题”属性。

包含后

```
<script src="http://cdn.jquerytools.org/1.2.7/full/jquery.tools.min.js"></script> 
```

在标题中。

希望我对事件的描述是有道理的！

提前感谢您的帮助

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T15:03:05.913

我修复了一个问题，给我同样的错误，但在不同的上下文中：

我有一个包含两列的表格，两列都包含工具提示（`DIV`相应的 中的a `TD`）。

```
<table>
  <tbody>
    <tr>
      <td><div class="tooltip"></div></td>
      <td><div class="tooltip"></div></td>
    </tr>
  </tbody>
</table> 
```

在第一列中打开工具提示时，第二列的高度和宽度会`TD`发生变化（就好像那`TD`是工具提示一样）。

在第一列的工具提示之后添加一个额外的空`DIV`元素解决了这个问题。`DIV``TD`

```
<table>
  <tbody>
    <tr>
      <td>
        <div class="tooltip"></div>
        <div></div> <!-- extra empty div -->
      </td>
      <td><div class="tooltip"></div></td>
    </tr>
  </tbody>
</table> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-29T23:38:28.547

我想到了：

触发器元素被定义为所有输入，因此在缺少标题元素的情况下，它使用下一个作为工具提示。

只是 jqueryTOOLS 一方的一个错误，但一个简单的解决方案：

代替

```
$("#myform :input") 
```

和

```
$("#myform :input[title]") 
```

希望这对其他人有帮助

# android - Android教程报错：R无法解析为变量

> ID：11255256
> 
> 赞同：4
> 
> 时间：2012-06-29T02:15:08.183
> 
> 标签：android

[http://developer.android.com/training/basics/firstapp/building-ui.html](http://developer.android.com/training/basics/firstapp/building-ui.html)

我一直在关注本教程，但我有两个错误，都是“R 无法解析为变量”。我过去制作过 android 应用程序（简单的应用程序），我记得通过检查我是否有 import R 语句（我没有）以及项目在构建之前是否已清理来解决这个问题再次（我清理它，我仍然得到错误）。我不知道该怎么做。谢谢！

*我还要提一下我确实看到了170次点击的同名帖子，并且“删除import R语句”的解决方案不适用于我的问题（我不认为）再次感谢

所有代码都直接来自上面的链接，但这里是为了方便起见

activity_my_first.xml

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="horizontal">
    <EditText android:id="@+id/edit_message"
        android:layout_weight="1"
        android:layout_width="0dp"
        android:layout_height="wrap_content"
        android:hint="@string/edit_message" />
    <Button
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="@string/button_send" />
</LinearLayout> 
```

MyFirstActivity.java

```
package com.example.myfirstapp;

import android.os.Bundle;
import android.app.Activity;
import android.view.Menu;
import android.view.MenuItem;
import android.support.v4.app.NavUtils;

public class MyFirstActivity extends Activity {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_my_first);
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        getMenuInflater().inflate(R.menu.activity_my_first, menu);
        return true;
    }

} 
```

字符串.xml

```
<?xml version="1.0" encoding="utf-8"?>
<resources>
    <string name="app_name">My First App</string>
    <string name="edit_message">Enter a message</string>
    <string name="button_send">Send</string>
    <string name="menu_settings">Menu Settings</string>
</resources> 
```

编辑：当我清理项目时，我在控制台中收到此消息：

> [2012-06-29 11:12:38 - MyFirstApp] W/ResourceType（6140）：错误的 XML 块：标头大小 91 或总大小 0 大于数据大小 0 [2012-06-29 11:12:38 - MyFirstApp] C:\Users\zhong\workspace\eclipse\MyFirstApp\res\menu\activity_my_first.xml:2: error: Error: No resource found that match the given name (at 'title' with value '@string/menu_settings' ）。

编辑：在布局 xml 文件中添加了一行`<string name="menu_settings">Menu Settings</string>` 修复了清理项目错误，但我仍然无法从两个 R 错误中运行项目。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-06T20:44:30.010

我正在研究相同的示例，并且遇到了相同（或非常相似）的问题。

最后我注意到 manifest.xml 上有一个很小的红色 x。果然，它在抱怨这个：

```
android:label="@string/title_activity_hello_world" > 
```

所以我补充说：

```
<string name="title_activity_hello_world">Hello World</string> 
```

到strings.xml，现在它可以工作了。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-18T22:49:42.177

我在学习教程时遇到了同样的问题。清理项目或清理进口并没有解决问题。

问题是如何（简单地）解决的：我退出 Eclipse 并重新启动它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-29T02:20:30.803

2 可能的事情

Android Manifest 中指定的包名称与 Java 文件中的不同。

或者，您的 IDE 没有在 gen/ 文件夹中生成 R.java 文件。再次尝试构建（尽管有错误），它通常会清除它。

基本上，R.java 文件是为您生成的，并且在同一个包中，因此您可以将其简称为 R。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-16T21:16:21.957

我有`android:text="@string/button_send"`
哪个给出了错误：`No resource found that matches the given name (at 'text' with value '@string/button_send').`

我尝试使用教程解决错误。但是教程并没有告诉我将所有需要的行一一写出来。所以我想念`"<string name="button_send">Send</string>"`在strings.xml中写。

添加上一行后，错误消失了！我认为这与该线程中的原始问题类似。

因此，如果我从给定的教程中复制了整行，它可能不会发生，但是通过输入 our-self 是我认为最好的学习方式。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-26T00:07:21.390

我找到了解决方案：

去你那里`project->res->menu` 打开`XML`文件并删除这一行：

```
android:title="@string/menu_settings" 
```

我删除了它，它开始工作，在问题部分发出相同的警告 3 小时后。

当您阅读它时，它甚至是有意义的，“`title`具有价值`@string/menu_settings`”

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-29T02:53:16.940

请确认没有错误

1- 项目文件夹 2- eclipse 的问题视图 3- 控制台 4- 错误日志如图 ![在此处输入图像描述](../Images/6aa43d0e4b5d9ba8a4c0bb79b0642bb1.png)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-06-29T03:02:44.107

你必须确保

1.  清理你的项目 Project-->Clean
2.  /res 目录不包含错误（某些文件将在文件资源管理器中显示为红色图标）
3.  您的导入不包含此行`import android.R;`
4.  检查 AndroidManifest.xml 中属性包的值是否正确。`<manifestxmlns:android="http://schemas.android.com/apk/res/android" package="your.correct.package.name"`

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-07-19T18:36:43.547

这为我修复了它： [https ://stackoverflow.com/a/3259974/1538785](https://stackoverflow.com/a/3259974/1538785)

似乎eclipse喜欢无缘无故地向java文件添加导入行。进入你的java文件，点击ctrl+shift+o，所有的import语句都会出现。删除说 import andriod.R 的行

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2013-01-11T19:05:30.550

右键单击项目，选择“Android 工具”>“添加支持库”>“Android 支持库，修订版 11”>“安装”

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2013-07-09T13:46:18.617

就我而言，问题是我在 64 位 Linux 上，并且没有安装所需的 32 位库，这意味着构建工具无法生成 R.java。

运行此命令，然后清理项目，解决了问题：

```
sudo apt-get install ia32-libs 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2014-01-12T22:31:07.467

如果您在 Linux 机器上运行默认下载，请确保 sdk/build-tools/android-xyz/* 中的可执行文件（aapt 等）是可执行的...

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2014-02-17T15:13:17.883

我在尝试第一个教程时遇到了同样的错误。为了让应用程序运行，我编辑了 MainActivity.java 所以它看起来像这样

```
package com.example.myfirstapp; 
```

导入android.app.Activity；导入android.os.Bundle；

公共类 MainActivity 扩展 Activity {

```
@Override
protected void onCreate(Bundle savedInstanceState) {
super.onCreate(savedInstanceState);
setContentView(R.layout.activity_main);

} 
```

}

# php - 通过书签自动填充来自另一个网站的 url 的文本字段

> ID：11255257
> 
> 赞同：0
> 
> 时间：2012-06-29T02:15:15.970
> 
> 标签：php, javascript, jquery, bookmarklet

我在这里需要一点线索。我想要做的是允许用户通过小书签向我的网站提交 url。因此，当他们单击书签时，带有 id ( `field_url`) 的文本字段将自动填充他们所在页面上的 url。我环顾四周，发现我需要将这段代码用于书签。

```
javascript:location.href="http://mywebsite.com/geturl.php?url="+encodeURIComponent(location.href); 
```

我的问题：我应该输入什么`geturl.php`来自动填充文本字段？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T02:21:57.993

您通过[`GET`参数](http://www.php.net/manual/en/reserved.variables.get.php)传递 URL ，因此通常您只需要[`echo`](http://www.php.net/manual/en/function.echo.php)在 php 页面中使用它：

```
<input type="text" id="field_url" value="<?php echo $_GET['url']; ?>" /> 
```

速记方法是`<?=$_GET['url']?>`，但我更喜欢远离 PHP 速记。

# asp.net-mvc-3 - dataannotations 在主键上设置身份种子值，代码优先

> ID：11255263
> 
> 赞同：3
> 
> 时间：2012-06-29T02:16:31.230
> 
> 标签：asp.net-mvc-3, ef-code-first, data-annotations

ASP.NET MVC3 代码第一个项目。

在我的类定义中，如何设置 Identity 种子值。

```
 public class Account
  {
    [Key]   
    public int Id { get; set; } 
```

将身份种子设置为 1000000 的语法是什么？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-03T03:16:50.177

感谢 Craig，在查看了[https://stackoverflow.com/a/5974656/968301](https://stackoverflow.com/a/5974656/968301)之后，它非常简单。

创建一个初始化器

```
public class MyInitializer : DropCreateDatabaseIfModelChanges<MyContext> 
{   
  protected override void Seed(MyContext context) 
  {   
    context.Database.ExecuteSqlCommand("DBCC CHECKIDENT ('Account', RESEED, 1000000)");
  }  
} 
```

然后从 Global.asax.cs 的 Application_Start 部分调用

```
protected void Application_Start()
{
  Database.SetInitializer(new MyInitializer());
  AreaRegistration.RegisterAllAreas();

  RegisterGlobalFilters(GlobalFilters.Filters);
  RegisterRoutes(RouteTable.Routes);
} 
```

# c++ - Random123 使用 Visual Studio 为 opencl 生成随机数

> ID：11255266
> 
> 赞同：2
> 
> 时间：2012-06-29T02:17:20.567
> 
> 标签：c++, visual-studio-2010, opencl

[http://www.thesalmons.org/john/random123/releases/1.00/docs/index.html](http://www.thesalmons.org/john/random123/releases/1.00/docs/index.html)

我很难看到 opencl 和 random123 的示例，因为我是 OpenCL 的新手，我不确定在使用 Visual Studio 2010 时如何使用提供的信息。

任何可以编写使用上述库生成随机数并使用 Visual Studio 2010 的指南的人。

**更新：** 我解决了如下问题，现在想知道如何更改种子，以便在每次运行时获得随机数。

```
int main(int argc, char **argv)
{       
    const char *kernelname = "counthits";
    unsigned count =10000;

    cl_int              err;
    cl::Context         cl_context;
    cl::Program         program;
    cl::Kernel          cl_kernel;
    cl::Buffer          cl_out;
    cl::CommandQueue    cl_queue;

    size_t i, nthreads, hits_sz;
    size_t cores, work_group_size;
    cl_uint2 *          hits_host;

    double              d = 0.; // timer

    d = timer(&d);
    progname = argv[0];

    std::vector< cl::Platform > platformList;   
    CHECK(cl::Platform::get(&platformList));        
    CHECKERR(  cl_context = createCLContext(CL_DEVICE_TYPE_GPU,cl_vendor::VENDOR_AMD, &err) );

    std::vector<cl::Device> devices;
    CHECKERR( devices = cl_context.getInfo<CL_CONTEXT_DEVICES>(&err) );

    size_t length = 0;
    const char * sourceStr = loadFileToString("pi_opencl_kernel.ocl","",&length);

    cl::Program::Sources sources(1, std::make_pair(sourceStr, length));
    program = cl::Program(cl_context, sources);

    CHECK( program.build(devices,"-I D:\\libs\\Random123\\1.06\\include") );

    CHECKERR(work_group_size = devices[0].getInfo<CL_DEVICE_MAX_WORK_GROUP_SIZE>(&err) );
    CHECKERR(cores = devices[0].getInfo<CL_DEVICE_MAX_COMPUTE_UNITS>(&err) );
    cores *= 16*4; //Tahiti.

    if (work_group_size > 64) work_group_size /= 2;
    nthreads = cores * work_group_size*32; //2048*128 = 262144

    if (count == 0)
    count = NTRIES/nthreads; //38

    printf("Count: %lu\n",count);

    hits_sz = nthreads * sizeof(hits_host[0]);//2097152
    CHECKNOTZERO(hits_host = (cl_uint2 *)malloc(hits_sz));

    CHECKERR    ( cl_out = cl::Buffer(  cl_context,  CL_MEM_WRITE_ONLY | CL_MEM_USE_HOST_PTR, hits_sz, hits_host, &err));
    CHECKERR    ( cl_kernel = cl::Kernel(program,kernelname,&err) );
    CHECK       ( cl_kernel.setArg( 0, count) );
    CHECK       ( cl_kernel.setArg( 1, cl_out) );

    CHECKERR (cl_queue = cl::CommandQueue(cl_context, devices[0], 0, &err) );
    cl::Event event;

    CHECK( cl_queue.enqueueNDRangeKernel(cl_kernel,cl::NullRange,cl::NDRange(nthreads), cl::NDRange(work_group_size), NULL,  &event) );
    event.wait();
    CHECK( cl_queue.enqueueReadBuffer(cl_out, CL_TRUE, 0,hits_sz, hits_host) );

    unsigned long hits = 0, tries = 0;
    for (i = 0; i < nthreads; i++) {
#ifdef _DEBUG   
        printf("%lu %u %u\n", (unsigned long)i, hits_host[i].s[0], hits_host[i].s[1]);
#endif
    hits += hits_host[i].s[0];
    tries += hits_host[i].s[1];
    }

    return pi_check(hits, tries);
} 
```

核心：

```
#include <Random123/threefry.h>

/*
 * counthits generates 2*n x,y points and returns hits[tid] with
 * the count of number of those points within the unit circle on
 * each thread.
 */
__kernel void counthits(unsigned n, __global uint2 *hitsp) {
    unsigned tid = get_global_id(0);
    unsigned hits = 0, tries = 0;
    threefry4x32_key_t k = {{tid, 0xdecafbad, 0xfacebead, 0x12345678}};
    threefry4x32_ctr_t c = {{0, 0xf00dcafe, 0xdeadbeef, 0xbeeff00d}};
    while (tries < n) {
        union {
            threefry4x32_ctr_t c;
            int4 i;
        } u;
        c.v[0]++;
        u.c = threefry4x32(c, k);
        long x1 = u.i.x, y1 = u.i.y;
        long x2 = u.i.z, y2 = u.i.w;
        if ((x1*x1 + y1*y1) < (1L<<62)) {
            hits++;
        }
        tries++;
        if ((x2*x2 + y2*y2) < (1L<<62)) {
            hits++;
        }
        tries++;
    }
    hitsp[tid].x = hits;
    hitsp[tid].y = tries;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-03-04T01:03:09.680

我没有对此进行测试，但粗略地说，类似于以下内容：

1.  尝试将 counthits 的签名更改为：

_kernel void counthits(unsigned n, __global uint2 *hitsp, unsigned seed)

2.  用种子替换 0xdecafbad

3.  添加

char *seedstr = getenv("COUNTHITS_SEED");

无符号种子 = seedstr ？atoi(seedstr) : 0xdecafbad;

...

检查（cl_kernel.setArg（2，种子））；

到主程序（这个 setArg 在 setArg(1, ...) 之后，你可以，of）。

# dom - 如何在 DOM 中显示来自 asp 文件的帖子？

> ID：11255268
> 
> 赞同：0
> 
> 时间：2012-06-29T02:17:33.487
> 
> 标签：dom, asp-classic

我正在创建一个用户提交文本字段条目并公开显示的网站。我有 Javascript 来提交条目并将其发布到我们服务器上的文件中。但是，您如何使用 javascript“get”方法获取帖子并将它们显示在 DOM 中？为了澄清，我从一个 asp 文件中获取文本和图片条目，并在 DOM 中显示其中的 10 个（HTML 中的空 div）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T02:37:32.100

通常您将提交的内容保存在数据库中，而不是文件中。然后查询同一个数据库以将它们拉回来。然后，您可以在页面重新加载中获取它们或使用 AJAX 将它们加载到当前页面中。

# postgresql - 为什么 postgresql 日志中长时间运行的查询为空白？

> ID：11255269
> 
> 赞同：2
> 
> 时间：2012-06-29T02:17:37.823
> 
> 标签：postgresql, postgresql-9.0

我正在运行一个日志 ( `log_min_duration_statement = 200`) 来分析 PostgreSQL 9.0 中的一些慢查询，但没有记录最差查询的语句。有什么办法可以找出查询实际上是什么？

`***`（为了简洁和隐私，一些值被替换了。）

```
2012-06-29 02:10:39 UTC LOG:  duration: 266.658 ms  statement: SELECT *** FROM "oauth_accesstoken" WHERE "oauth_accesstoken"."token" = E'***' 
2012-06-29 02:10:40 UTC LOG:  duration: 1797.400 ms  statement: 
2012-06-29 02:10:49 UTC LOG:  duration: 1670.132 ms  statement: 
2012-06-29 02:10:50 UTC LOG:  duration: 354.336 ms  statement: SELECT *** FROM ***
... 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T02:22:03.237

中有一些日志文件目标选项`postgresql.conf`，如下所示。我建议使用`csvlog`.

```
log_destination = 'csvlog'  
logging_collector = on  
log_directory = '/var/applog/pg_log/1922/'   
log_rotation_age = 1d 
log_rotation_size = 10MB 
log_statement = 'ddl'                   # none, ddl, mod, all
log_min_duration_statement = 200 
```

进行任何更改后，您需要重新加载`postgresql.conf`文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-30T07:34:09.303

事实证明，因为我一直在关注日志，`tail -f path | grep 'duration .+ ms'`任何以换行符开头的语句都不可见。我这样做主要是为了突出显示持续时间字符串。

# java - Java：如何在接口层次结构中返回声明的类型？

> ID：11255270
> 
> 赞同：3
> 
> 时间：2012-06-29T02:17:42.170
> 
> 标签：java, generics

我的界面层次结构类似于 -

```
interface Type
{
    Type copy();
};

interface SubType extends Type
{
};

interface SubSubType extends SubType
{
}; 
```

还有一个具体的类

```
public class Concrete implements SubSubType
{
    @Override public Concrete copy() { return new Concrete(); }
} 
```

我希望能够在 Type 上调用 copy() 并取回 Type，在 SubType 上调用 copy() 并取回 SubType 等等。这可以实现吗？可能与泛型？

提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-29T02:31:47.507

像这样：

```
public interface Type { 
  public Type copy();
}

public interface SubType extends Type { 
  public SubType copy();
}

public class Concrete implements Type { 
  @Override
  public Concrete copy() {
    return new Concrete();
  }
}

public class SubConcrete implements SubType {
  @Override
  public SubConcrete copy() {
    return new SubConcrete();
  }
}

public static void main(String[] args) {
  Type    type    = new Concrete();
  SubType subType = new SubConcrete();

  Type    newType    = type.copy();
  SubType newSubType = subType.copy();
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-29T02:48:39.667

我想你可以去

```
interface <T extends Type> Type {
   T copy();
}

interface SubType extends Type<SubType> {
  // any extra methods here
} 
```

然后，实现将是

```
public class Concrete implements SubType {
   public SubType copy() {
      // code here
   }
} 
```

作为记录，在没有复制任何内容时调用方法 copy() 是一个非常糟糕的主意。

编辑：更正下面的代码。为简单起见，SubXXX 接口作为内部类放入，实际上这不太可能有意义。显然我需要切换顺序。呸！

```
public interface Type<T extends Type<?>> {
   T copy();

   public interface SubType<T extends SubType<?>> extends Type<T> {      
   }

   public interface SubSubType extends SubType<SubSubType> {      
   }
} 
```

并且，实现可能如下所示：

```
 class Concrete implements SubType<Concrete> {

      @Override
      public Concrete copy() {
         return new Concrete();
      }     
   } 
```

这看起来确实很混乱，我更喜欢（并且刚刚投票支持）@Tim Pote 的答案。

# mysql - MySQL 3 列查询返回重复项

> ID：11255271
> 
> 赞同：0
> 
> 时间：2012-06-29T02:17:45.953
> 
> 标签：mysql, sql, multiple-columns

```
x_Id  | y_Id | z_Id
----- |----- |-----
1     | 1    | 1
2     | 1    | 1
3     | 1    | 1
4     | 1    | 1
5     | 1    | 1
1     | 2    | 3 
```

我在编程方面相对较新，我无法弄清楚这个 MySql 查询。我只需要在 ((y_Id = 1 AND z_Id = 1) AND (y_Id = 2 AND z_Id = 3)) 处选择 x_Id。因此，以这些数字为例，唯一应该选择的是 (x_Id =) 1。

**所有这些列都在同一个表中

我最接近的是使用这个查询：

```
SELECT 
    * 
FROM 
    `relationships` 
WHERE
    y_id = 1 AND
    z_id = 1

UNION    
SELECT 
    * 
FROM 
    `relationships` 
WHERE
    z_id = 3 AND
    y_id = 2 
```

但是，这会将所有 x_id 和 x_id = 1 再次作为副本返回。

**我正在使用 sqlPro 和 MySql 5

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T02:24:14.480

不需要联盟。

**看到评论后更新：**

```
select
*
from relationships T1
INNER JOIN relationshipsT2 on t1.x_Id   = t2.x_Id  where
((T1.y_Id = 1 AND T1.z_Id = 1) AND (T2.y_Id  = 2 AND T2.zz_Id= 3)) 
```

你也只能返回`x_Id` 而不是`*`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T02:24:32.080

### 看到评论后更新：

使用聚合`SUM()`，您可以合计每个值满足的条件数`x_id`。如果总数 > 1，则表中的某处同时满足这两个条件。

```
SELECT DISTINCT x_id FROM (
  SELECT
    x_id,
    SUMCASE WHEN (y_id = 1 AND z_id = 1) OR (z_id = 3 AND y_id = 2) THEN 1 ELSE 0 END) AS hasboth
  FROM relationships
  GROUP BY x_id
  HAVING hasboth > 1
) subq 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-29T02:31:47.547

如果您只对 x_id 值感兴趣，则可以使用上面的查询，但只需添加 DISTINCT 并仅投影 x_id 值。

例子：

```
SELECT 
    DISTINCT x_id 
FROM 
 `relationships` 
WHERE
     y_id = 1 AND z_id = 1

UNION

SELECT 
    DISTINCT x_id 
FROM 
    `relationships` 
WHERE
    z_id = 3 AND y_id = 2 
```

几乎没有其他方法可以做到这一点，甚至更容易，例如在 WHERE 子句中使用 OR。

# css - 带有 CSS 的菜单列

> ID：11255274
> 
> 赞同：1
> 
> 时间：2012-06-29T02:18:13.877
> 
> 标签：css, list, menu, grid

我需要将元素堆叠成网格/列结构，其中 1 在 2 之上，3 在 4 之上，等等。有没有更好的方法可以在不使用 javascript 并且仍然使用无序列表的情况下实现这一点？我所拥有的正在工作，但这似乎是实现这一目标的糟糕方法。

```
<style type="text/css">
    #nav{
        height:63px;
        width:100%;
        position:relative;
    }
    ul.topnav {
        margin:0 0;
        padding:0 0;
        list-style:none;
        font-size:14px;
    }
    ul.topnav li {
        width:180px;
        height:30px;
        margin:1px 0 0;
        background-color:#666;
        position: absolute;
        left:0; top:0;
        }
        ul.topnav li.navTopPos{ top:32px; }
        ul.topnav li.navLeftPos1{ left:180px; }
        ul.topnav li.navLeftPos2{ left:360px; }
        ul.topnav li.navLeftPos3{ left:540px; }
</style>

</head>
<body>

<div id="nav">
    <ul class="topnav">
        <li>ONE</li>
        <li class="navTopPos">TWO</li>
        <li class="navLeftPos1">THREE</li>
        <li class="navLeftPos1 navTopPos">FOUR</li>
        <li class="navLeftPos2">FIVE</li>
        <li class="navLeftPos2 navTopPos">SIX</li>
        <li class="navLeftPos3">SEVEN</li>
        <li class="navLeftPos3 navTopPos">EIGHT</li> 
    </ul>
</div>
</body> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T02:50:51.617

这会做吗：[工作小提琴](http://jsfiddle.net/DnmaM/1/)

```
<style type="text/css">
    #nav{
        height:63px;
        width:100%;
       }
    ul.topnav {
        margin:0 0;
        padding:0 0;
        list-style:none;
        font-size:14px;
    }
    ul.topnav li {
        width:180px;
        height:30px;
        margin:1px 0 0;
        background-color:#666;
        float:left
        }
</style>

</head>
<body>

<div id="nav">
    <ul class="topnav">
        <li>ONE</li>
        <li>THREE</li>
        <li>FIVE</li>
        <li>SEVEN</li>
    </ul>
    <ul class="topnav">
        <li>TWO</li>
        <li>FOUR</li>
        <li>SIX</li>
        <li>EIGHT</li>
    </ul>
</div>
</body> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T03:27:53.983

您可以将其分解为列表中的块。

```
<style type="text/css">
    #nav{
        height:63px;
        width:100%;
        position:relative;
    }
    ul.topnav {
        margin:0 0;
        padding:0 0;
        list-style:none;
        font-size:14px;
    }
    ul.topnav li {
        height:30px;
        margin:1px 0 0;
        background-color:#666;
        position: absolute;
        left:0; top:0;
    }
</style>

</head>
<body>

<div id="nav">
    <ul class="topnav">
        <div style="display:inline-block; width: 180px;">
            <li>ONE</li>
            <li>TWO</li>
        </div>
        <div style="display:inline-block; width: 180px;">
            <li>THREE</li>
            <li>FOUR</li>
        </div>
        <div style="display:inline-block; width: 180px;">
            <li>FIVE</li>
            <li>SIX</li>
        </div>
        <div style="display:inline-block; width: 180px;">
            <li>SEVEN</li>
            <li>EIGHT</li> 
        </div>
    </ul>
</div>
</body> 
```

工作示例在这里：http: [//jsfiddle.net/cDeeP/](http://jsfiddle.net/cDeeP/)

# master-pages - Pyramid 框架和主模板/母版页/部分视图

> ID：11255276
> 
> 赞同：9
> 
> 时间：2012-06-29T02:20:05.623
> 
> 标签：master-pages, pyramid, chameleon, template-metal

我对 .NET MVC 很有经验，并且想学习 Python 框架。我选择了金字塔。

.NET MVC 具有**母版页**、**视图**和**部分视图**的概念。母版页看起来像：

```
<%@ Master Language="C#" Inherits="System.Web.Mvc.ViewMasterPage" %>
<!DOCTYPE html>
<html>
<head runat="server">
    <title><asp:ContentPlaceHolder ID="TitleContent" runat="server" /></title>
</head>
<body>
    <div>
        <asp:ContentPlaceHolder ID="MainContent" runat="server" />
    </div>
</body>
</html> 
```

然后我可以创建一个**视图**来填充`MainContent`母版页中标识的空间。

[通过此处](http://docs.pylonsproject.org/projects/pyramid/en/latest/tutorials/wiki2/definingviews.html)的 Pyramid wiki 教程，我看到作者在他的每个模板中都重复了许多相同的内容——通常在母版页中定义的内容——并且完全违反了**DRY**。

Pyramid中有**母版页的概念吗？**

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-06-29T04:00:03.417

就像 MVC.NET Pyramid 可以使用任意数量的模板语言一样，几乎所有模板语言都支持类似于母版页的概念。不过，他们都没有这样*称呼*他们；-)

Chameleon 可能是最远的——用于定义母版页中插槽的工具`ContentPlaceholder`等）`macros`在 Chameleon 中被调用，并由相当重的首字母缩略词[`METAL`（*宏扩展模板属性语言*）](http://chameleon.repoze.org/docs/latest/reference.html#macros-metal)引用。

在 Jinja2 和 Mako 中，它们被称为`blocks`，Breve 称为它们`slots`。

以下是其中每个母版页的外观：

**变色龙**：

```
<!-- Caveat Emptor - I have never used Chameleon in anger -->
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
  xmlns:tal="http://xml.zope.org/namespaces/tal"
  xmlns:metal="http://xml.zope.org/namespaces/metal"
  xmlns:i18n="http://xml.zope.org/namespaces/i18n">
<!-- We don't *need* all of this in Chameleon, but it's worth 
remembering that it adds it for us -->
<head>
<title metal:define-macro="title"><span metal:define-slot="title"></span></title>
</head>
<body metal:define-macro="content">
<div metal:define-slot="content"></div>
</body>
</html> 
```

**金贾2**：

```
<!DOCTYPE html>
<html>
<head>
<title>{% block title %}{% endblock %}</title>
</head>
<body>
{% block content %}{% endblock %}
</body>
</html> 
```

**马可**：

```
<!DOCTYPE html>
<html>
<head>
<title><%block name="title" /></title>
</head>
<body>
<%block name="content" />
</body>
</html> 
```

**短**：

```
html [
    head [
        title [ slot("title") ]
    ]
    body [
       slot("content")
    ]
] 
```

# android - 我如何将我的应用程序包含在这个完整的操作选项中

> ID：11255277
> 
> 赞同：-4
> 
> 时间：2012-06-29T02:20:17.973
> 
> 标签：android

当用户使用 Android 下载文件时，我希望启动我的自定义活动以打开该文件。例如，当文件启动时，我的自定义活动应显示在“使用完成操作”警报框中。

有什么例子可以看看这是怎么做到的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-30T21:47:05.323

If I am correct, this will be what you want in your manifest:

```
<activity
     android:name=".NameOfYourActivity"
     android:label="@string/app_name" >
            <intent-filter>
                  <action android:name="android.intent.action.VIEW" />
                  <category android:name="android.intent.category.DEFAULT" />
                  <data android:mimeType="text/plain" />
            </intent-filter>
</activity> 
```

For more information, read [Intents and Intent Filters](http://developer.android.com/guide/components/intents-filters.html) from the developer website.

Also, here is a sample of an activity you could use to display a file.

```
public class MIMEsActivity extends Activity {
/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    //Get the intent that has the information about the file.
    Intent sender = getIntent();

    //In this example I'm simply displaying the file's contents
    //in a TextView.
    TextView view = (TextView) findViewById(R.id.textview);

    //Check to see if there was an intent sent.
    if(sender != null) {

        //Get the file.
        File file = new File(sender.getData().getPath());

        /*
            DO STUFF HERE WITH THE FILE
            I load the text of the file and send it
            to the TextView.
        */
        StringBuilder text = new StringBuilder();
        try {
            BufferedReader br = new BufferedReader(new FileReader(file));
            String line;

            while ((line = br.readLine()) != null) {
                text.append(line);
                text.append('\n');
            }
        }
        catch (IOException e) {
            //You'll need to add proper error handling here
        }

        view.setText("PATH: " + sender.getData().getPath() + "\n\n" + text);
        //Done doing stuff.
    }
    //If an intent was not sent, do something else.
    else {
        view.setText("You did not get a file!");
    }

} 
```

}

# php - 通过 postfix + PHP 以 Apache 用户身份发送电子邮件

> ID：11255281
> 
> 赞同：3
> 
> 时间：2012-06-29T02:20:38.073
> 
> 标签：php, email, postfix-mta

我通过 PHP > postfix > Sendgrid 从我的服务器发送电子邮件。在 PHP 中，我将 From: 标头设置为我的 noreply@domain.com。但是，电子邮件的 From 标头中将始终包含 Apache@mail.domain.com。

从服务器发送电子邮件的新手，我应该查看哪些配置文件？或者我该如何调试？

我在 PHP 中设置这样的标题：

```
$headers = "From: ".$from."\r\n";
$headers = "Reply-To: ".$from."\r\n";
$headers .= "MIME-Version: 1.0\r\n";
$headers .= "Content-Type: text/html; charset=ISO-8859-1\r\n"; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T07:41:20.067

问题是其中一个 $headers .= 行没有 .= 并且正在覆盖以前的标题。我猜很容易错过。

# javascript - XMLHttpRequest 不断返回 null

> ID：11255282
> 
> 赞同：0
> 
> 时间：2012-06-29T02:20:39.167
> 
> 标签：javascript, xmlhttprequest

所以我的代码正在调用我的服务器“zom3.ms3d”上的一个文件，我已经确认它在那里，你也可以，以及所有源代码。(http://www.pso2u.com)

这是有问题的代码：

```
function getMs3dModel(model, name){
        var xhr = new XMLHttpRequest();
        xhr.open('GET', name, true);
        xhr.responseType = 'arraybuffer';
        xhr.onload = function(e) {
            parseBinFile(model, name, this.response);
        };
        xhr.send();
    } 
```

这是它打印内容的地方（或它的前 10 个字节）

```
function parseBinFile(model, name, buffer){

        var headerStr = new DataView(buffer, 0, 10);  
        console.log(headerStr);
    } 
```

为什么我的请求返回 null？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T02:34:43.287

尝试使用`xhr.response`，而不是`this.reponse`按照[MDN 文章的建议](https://developer.mozilla.org/en/DOM/XMLHttpRequest/Sending_and_Receiving_Binary_Data)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T02:37:32.273

你使用的是什么浏览器？xhr.onload 是 XMLHttpRequest Level 2 的一部分。以下是支持它的浏览器列表：http: [//caniuse.com/xhr2](http://caniuse.com/xhr2)

您的代码看起来不错，尽管我会使用 *xhr.response*而不是*this.response* （这些天我通常避免使用“this”）。

# javascript - 为什么我的 Javascript 中的两个正则表达式文字在一个属性上有所不同？

> ID：11255283
> 
> 赞同：2
> 
> 时间：2012-06-29T02:20:58.497
> 
> 标签：javascript

我在*Javascript: The Good Parts* by Douglas Crockford 中读到 javascript 正则表达式文字共享同一个对象。如果是这样，那么这两个正则表达式文字如何在`lastIndex`属性中有所不同？

```
var a = /a/g;
var b = /a/g;

a.lastIndex = 3;
document.write(b.lastIndex);​ 
```

[JS小提琴](http://jsfiddle.net/5gTR2/)

输出 0 而不是 3。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-29T02:35:17.783

[ECMAScript 文档](http://www.ecma-international.org/publications/files/ECMA-ST/ECMA-262.pdf)的第 7.8.5 节清楚地表明它们是两个不同的对象：

> **7.8.5 正**
> 则表达式文字 正则表达式文字是一个输入元素，每次计算文字时都会转换为 RegExp 对象（参见 15.10）。程序中的两个正则表达式文字评估为永远不会作为 === 相互比较的正则表达式对象，即使这两个文字的内容相同。RegExp 对象也可以在运行时通过 new RegExp（参见 15.10.4）或调用 RegExp 构造函数作为函数（15.10.3）来创建。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T02:28:57.523

因为它们是不同的对象。

```
document.write(a === b); 
```

即使这个输出`false`。

要么克罗克福德错了，要么他当时是对的，但时代变了。

我意识到这不是一个特别有用或信息丰富的答案。我只是在反驳我认为你不相信 Crockford 写的东西可能（现在）是错误的。

顺便说一句，你有没有提到那个说法？在上下文中阅读它会很有趣（我没有这本书）。

# asp.net - 你调用的对象是空的。IE问题

> ID：11255292
> 
> 赞同：3
> 
> 时间：2012-06-29T02:22:21.110
> 
> 标签：asp.net, asp.net-mvc-3, internet-explorer, asp.net-mvc-4

我在 ASP.Net 中开发了一个网站，它在除 IE 之外的所有浏览器中都可以正常工作，在该浏览器中出现错误“对象引用未设置为对象的实例”。

在我的本地机器上一切正常，发布到服务器后出现错误。

任何想法如何解决这个问题？

这是我得到的堆栈跟踪：

```
Server Error in '/web' Application.
--------------------------------------------------------------------------------

Object reference not set to an instance of an object. 
  Description: An unhandled exception occurred during the execution of the current web request. Please review the stack trace for more information about the error and where it originated in the code. 

 Exception Details: System.NullReferenceException: Object reference not set to an instance of an object.

Source Error: 

 An unhandled exception was generated during the execution of the current web request. Information regarding the origin and location of the exception can be identified using the exception stack trace below.  

Stack Trace: 

[NullReferenceException: Object reference not set to an instance of an object.]
   A2APay.Web.Controllers.MemberController.MemberCreate() in c:\Users\Aiman\Documents\Visual Studio 11\Projects\A2APay3\A2APay.Web\Controllers\MemberController.cs:98
   lambda_method(Closure , ControllerBase , Object[] ) +62
   System.Web.Mvc.ActionMethodDispatcher.Execute(ControllerBase controller, Object[] parameters) +14
   System.Web.Mvc.ReflectedActionDescriptor.Execute(ControllerContext controllerContext, IDictionary`2 parameters) +211
   System.Web.Mvc.ControllerActionInvoker.InvokeActionMethod(ControllerContext controllerContext, ActionDescriptor actionDescriptor, IDictionary`2 parameters) +27
   System.Web.Mvc.Async.<>c__DisplayClass42.<BeginInvokeSynchronousActionMethod>b__41() +28
   System.Web.Mvc.Async.<>c__DisplayClass8`1.<BeginSynchronous>b__7(IAsyncResult _) +10
   System.Web.Mvc.Async.WrappedAsyncResult`1.End() +57
   System.Web.Mvc.Async.AsyncControllerActionInvoker.EndInvokeActionMethod(IAsyncResult asyncResult) +48
   System.Web.Mvc.Async.<>c__DisplayClass39.<BeginInvokeActionMethodWithFilters>b__33() +57
   System.Web.Mvc.Async.<>c__DisplayClass4f.<InvokeActionMethodFilterAsynchronously>b__49() +223
   System.Web.Mvc.Async.<>c__DisplayClass37.<BeginInvokeActionMethodWithFilters>b__36(IAsyncResult asyncResult) +10
   System.Web.Mvc.Async.WrappedAsyncResult`1.End() +57
   System.Web.Mvc.Async.AsyncControllerActionInvoker.EndInvokeActionMethodWithFilters(IAsyncResult asyncResult) +48
   System.Web.Mvc.Async.<>c__DisplayClass2a.<BeginInvokeAction>b__20() +24
   System.Web.Mvc.Async.<>c__DisplayClass25.<BeginInvokeAction>b__22(IAsyncResult asyncResult) +102
   System.Web.Mvc.Async.WrappedAsyncResult`1.End() +57
   System.Web.Mvc.Async.AsyncControllerActionInvoker.EndInvokeAction(IAsyncResult asyncResult) +43
   System.Web.Mvc.<>c__DisplayClass1d.<BeginExecuteCore>b__18(IAsyncResult asyncResult) +14
   System.Web.Mvc.Async.<>c__DisplayClass4.<MakeVoidDelegate>b__3(IAsyncResult ar) +23
   System.Web.Mvc.Async.WrappedAsyncResult`1.End() +62
   System.Web.Mvc.Controller.EndExecuteCore(IAsyncResult asyncResult) +57
   System.Web.Mvc.Async.<>c__DisplayClass4.<MakeVoidDelegate>b__3(IAsyncResult ar) +23
   System.Web.Mvc.Async.WrappedAsyncResult`1.End() +62
   System.Web.Mvc.Controller.EndExecute(IAsyncResult asyncResult) +47
   System.Web.Mvc.Controller.System.Web.Mvc.Async.IAsyncController.EndExecute(IAsyncResult asyncResult) +10
   System.Web.Mvc.<>c__DisplayClassb.<BeginProcessRequest>b__4(IAsyncResult asyncResult) +25
   System.Web.Mvc.Async.<>c__DisplayClass4.<MakeVoidDelegate>b__3(IAsyncResult ar) +23
   System.Web.Mvc.Async.WrappedAsyncResult`1.End() +62
   System.Web.Mvc.<>c__DisplayClasse.<EndProcessRequest>b__d() +48
   System.Web.Mvc.SecurityUtil.<GetCallInAppTrustThunk>b__0(Action f) +7
   System.Web.Mvc.SecurityUtil.ProcessInApplicationTrust(Action action) +22
   System.Web.Mvc.MvcHandler.EndProcessRequest(IAsyncResult asyncResult) +60
   System.Web.Mvc.MvcHandler.System.Web.IHttpAsyncHandler.EndProcessRequest(IAsyncResult result) +9
   System.Web.CallHandlerExecutionStep.System.Web.HttpApplication.IExecutionStep.Execute() +9615056
   System.Web.HttpApplication.ExecuteStep(IExecutionStep step, Boolean& completedSynchronously) +155 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T02:51:24.720

我想你的答案在这里：[https ://stackoverflow.com/a/1635766/538387](https://stackoverflow.com/a/1635766/538387)

*   您是否在 IE 中禁用了 cookie？
*   您是否将 IE 设置为高安全级别？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T02:25:32.533

是 JavaScript 错误吗？如果是这样，请检查 FF 和 Chrome 中的错误控制台。

# nginx - 为 Apache + Nginx 设置后端设置

> ID：11255296
> 
> 赞同：3
> 
> 时间：2012-06-29T02:23:38.930
> 
> 标签：nginx, apache2, varnish

```
backend default {
     .host = "localhost";
     .port = "8080";
} 
```

在清漆配置中，应该分配什么端口？我在后端使用 Apache 监听，`1740`而 Nginx 正在监听`80`到`proxy_pass`upstream `127.0.0.1:1740`。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T11:11:13.150

为什么不只是 nginx + 清漆？

nginx 和 apache 都是 webserver，当然你可以使用 nginx proxy_pass... 但如果这是同一台服务器，我会放弃 apache 或 nginx... 选择一个。

无论如何，“Varnish 是一个 Web 应用程序加速器。你将它安装在你的 Web 应用程序之前，它会显着加速它。” （从他们网站的主页复制粘贴）

所以我认为首先你应该决定你是想要 nginx 还是 apache 有你的网络服务器。

# ruby-on-rails - 对同一类型的多个元素使用 content_tag 的通用方法

> ID：11255297
> 
> 赞同：4
> 
> 时间：2012-06-29T02:23:46.370
> 
> 标签：ruby-on-rails, ruby

我想生成像这样的html，

```
<label for='field'>
  Label Text
  <span class='span1'> Some Text 1 </span>
  <span class='span2'> Some Text 2 </span>
  ...
</label> 
```

我想要一个助手，例如，

`label_for 'field', :label => 'Label Text', :type1 => 'Some Text 1', :type2 => 'Some Text 2'`

为此，我尝试做类似的事情，

```
 content_tag(:label, opts[:label], :for => field_name) do
   ['span1', 'span2'].map { |i| 
     content_tag(:span, opts[i], :class => i) if opts[i] }.compact.joins('+').html_safe
   }
  end 
```

但这不起作用（当然）。

['span1', 'span2'] 数组是固定的，用户可以根据需要选择显示尽可能多的跨度。

我怎么解决这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-29T02:38:25.547

为什么不这样呢？

```
def special_label_for(field_name, label_text, span_array)
  content_tag "label", :for => field_name do
    concat label_text
    span_array.each_with_index do |span_content, index|
      concat content_tag("span", span_content, :class => "span" + index.to_s)
    end
  end
end

special_label_for :user_name, "User Name", ["This is the first Span", "And this is the second Span", "Can also have a third span", "Or as many spans as you like"] 
```

尚未测试此代码，可能需要添加/删除`concat`或`html_safe`以使其在您的视图中正确呈现。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-05T10:34:47.047

类似的事情我需要标签中的多个 html 元素。我在这里解决了

[http://apidock.com/rails/ActionView/Helpers/FormTagHelper/label_tag#1428-Html-inside-Lable-tag](http://apidock.com/rails/ActionView/Helpers/FormTagHelper/label_tag#1428-Html-inside-Lable-tag)

您可以传递参数以使动态

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-09-15T18:41:08.413

你甚至可以做这样的事情：

如果给定的数组是`list_of_items`

```
list_of_items.map{ |item| content_tag(:span, item) }.join('').html_safe 
```

# java - 无法在 RelativeLayout 中更新 textview 的文本

> ID：11255302
> 
> 赞同：-1
> 
> 时间：2012-06-29T02:24:23.373
> 
> 标签：java, android, eclipse, android-layout, textview

我有一个在 xml 中创建的简单屏幕，父布局是“相对布局”，我有一个子布局（也是一个包含 3 个文本视图的“RelativeLayout”）。

我唯一要做的就是按下一个按钮并更改 textviews 的值。

更改文本显然是这样的：

```
MyTextView.SetText("Text"); 
```

代码运行完美，但不会刷新布局中文本视图的文本。

**但是当屏幕旋转时，屏幕刷新，标签得到正确的值。**

为什么会这样？为什么按下按钮时我无法更新文本？

我尝试使用“AsyncTask”并且文本也没有更新。

做一些简单的事情可能会很成问题。?

问候。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T04:54:49.707

你的代码

```
MyTextView.SetText("Text"); 
```

应该在 UI 线程上执行以生效假设如果您希望在单击按钮后对其进行更新，那么此代码应该在您`onClickButton`的按钮的侦听器中

访问[此链接](https://stackoverflow.com/questions/9173299/how-to-execute-some-code-in-android-ui-thread-async)了解更多详情

# bash - 重新启动一堆服务器，在重新启动期间只保留一些服务器

> ID：11255303
> 
> 赞同：2
> 
> 时间：2012-06-29T02:24:23.543
> 
> 标签：bash

考虑以下脚本：

```
for host in $(get-all-hosts)
do
  (restart-server $host; wait-for-server-to-come-up $host) &
done 
```

正如您可能猜到的那样，`restart-server`重新启动服务器并`wait-for-server-to-come-up`阻止命令直到服务器启动（例如，`grep -m 1 'server up' <(tail -f /path/to/log)`）。

该脚本基本上同时重新启动所有服务器。我很好奇修改此脚本以在某些固定数量的服务器后停止并等待一台服务器启动后再继续下一次重新启动的最简单方法是什么，以便在任何给定的情况下最多有 4 台服务器停机时间。我知道这样做的一种方法是简单地以 4 个块重新启动并等待每个块中的所有 pid，但我希望做一些更聪明的事情并不难。

一些从头开始的解决方案：

第二次尝试，使用丹尼斯链接中的一些想法。几乎是香草 Bash 解决方案的理想选择：

```
mkfifo mfifo
exec 3<>mfifo
echo >&3
echo >&3
echo >&3
for host in $(get-all-hosts)
do
  read
  (restart-server $host; wait-for-server-to-come-up $host; echo >&3) &
done <&3 
```

我对这个解决方案最大的抱怨是它假设还没有一个名为 mfifo 的命名队列已经在使用中。除此之外，我没有看到任何问题，据我所知，它完全按照预期工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T04:05:28.100

`xargs`具有类似于以下的并行特性`parallel`：

```
echo $(get-all-hosts) | tr ' ' '\n' | xargs -P 4 -n 1 ./blocking-restart 
```

..where`blocking-restart`预计将采用单个服务器的名称，重新启动它并等待它完成。请注意`tr`将每个主机放在自己的行上，这是 xargs 所期望的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-29T02:34:36.783

该`parallel`工具（在 Ubuntu / Debian`moreutils`软件包中）可能会在这里提供帮助；如果您重新编写`restart-server`工具以阻止直到服务器恢复，您可以以如下方式运行脚本：

```
parallel -j 4 restart-server -- $(get-all-hosts) 
```

当然，如果四台服务器都没有恢复，整个事情就会陷入停顿。也许这是可取的。

# visual-studio - NDIS 和微型端口驱动程序

> ID：11255311
> 
> 赞同：3
> 
> 时间：2012-06-29T02:25:35.103
> 
> 标签：visual-studio, ethernet, wdk, ndis

我正在尝试使用 Visual Studio 2012 中提供的 WDK 工具修改以太网驱动程序。

WDK 中提供的示例是“微型端口适配器”和“NDIS 轻型过滤器”等。我仍处于编写驱动程序的最开始，因此很难在代码中导航。

在 Visual Studio 2012 中构建微型端口适配器后，我能够安装它[在我的网络适配器列表中显示为“Microsoft 虚拟微型端口适配器”。]我还可以为其分配 IP 地址和子网掩码。[我发现这不会连接到我的 PC 上的任何物理设备]。

我还设置了“调试视图”软件来检查来自我的适配器的驱动程序消息。[我在代码中使用了“DbgPrint”语句然后构建它。]但是，调试消息被重复打印。

1-为什么会一次又一次地打印消息？消息来自程序的“datapath.c”文件，来自函数“MPSendNetBufferLists”。['Net Buffer' 指定在网络上发送或接收的数据。]

2-我设置了 Wireshark 来捕获适配器上的数据，它显示有来自 ARP、HTTP、SSDP、MDNS 等的请求来自它。我无法理解与适配器实际交谈的内容？我怎样才能阻止它说话？

我可以使用“ping”来查看我分配给适配器的 IP 地址上是否存在连接，它会成功响应，告诉所有数据包都已发送并且没有数据包丢失。

我的目标是通过 IP 地址向这个以太网适配器发送和接收“数据”数据包。即-我希望应用程序连接到分配给适配器的 IP 地址并与之交谈。

3- 我真的可以用 WDK 中提供的样本来做吗？

欢迎任何其他建议或意见。

PS-我无法使用 Visual Studio 2012 中内置的 Windows 调试器。我使用了 2 台 PC，能够将驱动程序连接并安装到“目标”PC 上，但无法对断点等进行任何操作。代码和在“目标”PC 上安装驱动程序后，程序什么也没做。对此有什么建议吗？我以为我也可以对驱动程序进行逐步调试。[我知道我错了]。

谢谢阿迪亚

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-29T17:42:22.140

NDIS 微型端口驱动程序与许多低级驱动程序一样，旨在与硬件通信。微型端口的职责是从操作系统接收发送数据包，将它们转换为硬件所需的任何格式，并指示硬件在线发送数据包。

WDK 可以（事实上，曾经）包含一个真实世界的示例驱动程序，该驱动程序在真实世界的硬件上发送数据包。但这会导致一些混乱，因为现实世界的驱动程序必须处理许多硬件特定的细节，这些细节会分散样本的重点。如果您从真实世界的驱动程序开始，您必须做的第一件事是识别所有特定于硬件的位并将它们撕掉，这样您就可以用您自己的硬件特定位替换它们。

相反，WDK 中的“netvmini”样本是假驱动程序。这意味着它假装拥有真正的硬件，但暗中这一切都是谎言。当操作系统向 netvmini 发送数据包时，netvmini 驱动程序将简单地将这些数据包广播到安装在该机器上的任何其他 netvmini 微型端口适配器。（实际上，在同一台机器上安装 2 个 netvmini 适配器模拟了将两个真实适配器插入同一个以太网集线器时会发生的情况。）因此，在 ASCII-art 中，如果在同一系统上安装两个 netvmini 适配器会发生这种情况：

```
 TCPIP                       TCPIP                      TCPIP
         |                           |                          |
Real physical miniport        Your netvmini #1           Your netvmini #2
         |                           \                          /
   [The Internet]                     [The netvmini virtual hub] 
```

正如 ASCII-art 所展示的那样，您的 netvmini 适配器没有任何通往 Internet 的路径。因此，除非您添加硬件的详细信息，否则您的驱动程序不会获得可以路由到 Internet 的“真实”IP 地址。在那之前，Windows 将继续尝试发送永远不会到达任何地方的 ARP 和 HTTP 请求。

要回答您的具体问题：

1.  每次操作系统尝试发送数据包时，都会打印来自 MPSendNetBufferLists 的消息。因为操作系统认为你有一个真实的网络连接，所以操作系统会多次尝试使用它。最终，当一切都得出结论认为这不是一个有用的链接时，这应该会平静下来。

2.  请求来自 TCPIP。如果您不希望 TCPIP 发送数据，则将其与适配器解除绑定。

3.  您绝对可以将数据发送到适配器。事实上，您已经观察到您已经在发送随机 HTTP 数据包等。但是数据实际上不会到达 Internet，直到您教驱动程序如何与您的真实硬件对话。

如果您坐在那里想“但我没有硬件！”，那么您可能想要创建某种虚拟微型端口。虚拟微型端口与 netvmini 类似，因为它们没有真正的硬件，但它们仍然有一些方法可以将数据包从机器中取出。例如，在第 2 层运行的 VPN 微型端口（如 L2TP）通常会安装第二个驱动程序 - NDIS 协议驱动程序 - 从“真实”物理微型端口发送和接收数据。然后，只要虚拟微型端口需要从机器上获取数据包，它就会与它的协议对话。结果是：

```
 TCPIP
          |
  Your virtual miniport
          |
   Your NDIS protocol
          |
The real physical miniport
          |
     The Internet 
```

有替代架构；例如，在第 4 层运行的 VPN（如 SSTP）可能决定打开 WSK 套接字而不是实现 NDIS 协议驱动程序：

```
 TCPIP
          |
  Your virtual miniport
          |
      WSK socket
          |
        TCPIP
          |
The real physical miniport
          |
     The Internet 
```

# iphone - 使 TableView 淡出的问题

> ID：11255317
> 
> 赞同：0
> 
> 时间：2012-06-29T02:26:58.617
> 
> 标签：iphone, ios, cocoa-touch, uitableview

使用`UIView animateWithDuration`，我将`UITableView`alpha 设置为 0，以便它在消失的动画中消失。但是，我注意到当`UITableView`褪色时，每个单元格上的某些区域在褪色前会变黑。如果有图像，它后面的整个区域在淡入淡出时会变黑，通常左右边缘的插入空间都会变黑。我已经尝试将子视图的所有背景颜色设置`UITableViewCell`为白色，但它仍然不起作用。

这个 tableview 没有嵌入到 UITableViewController 中。相反，它是一个单独的浮动 tableView，我将其用作菜单。

以下是它褪色时发生的情况的示例：

![在此处输入图像描述](../Images/44c338871db3714e1fac9490f6eff07f.png)

这也是我正在使用的代码

```
[UIView animateWithDuration:ImageViewControllerBarsAnimationDuration delay:0 options: UIViewAnimationOptionAllowUserInteraction animations:^
    {
            if (self.menu.superview)
            {
                self.menu.alpha = 0;
            }
    } 
completion:^(BOOL finished)
{
            if (self.menu.superview)
            {
                [self.menu removeFromSuperview];
                self.menu.alpha = 1;
            }   
}]; 
```

+

```
- (UITableViewCell *) tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath 
{
    static NSString *cellIdentifier = @"Cell";

    UITableViewCell *tableViewCell = [tableView dequeueReusableCellWithIdentifier:cellIdentifier];

    if (tableViewCell == nil) 
    {
        tableViewCell = [[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:cellIdentifier] autorelease];
    }

    [[tableViewCell textLabel] setFont:[UIFont fontWithName: @"Helvetica-Bold" size: 17]];
    [[tableViewCell textLabel] setText: [self.menuItems objectAtIndex:0]];
    [[tableViewCell imageView] setImage: [self.menuItems objectAtIndex:1]];

    return tableViewCell;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T22:26:08.513

DTS给了我一个解决方案，必须做到以下几点：

```
self.myTableView.backgroundView = nil;
self.myTableView.backgroundColor = [UIColor clearColor]; 
```

然后在`cellForRowAtIndexPath`方法内部必须这样做：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *kOneCellID = @"cellID";

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:kOneCellID];
    if (cell == nil)
    {
        cell = [[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:kOneCellID] autorelease];
        cell.backgroundView = [[UIView alloc] init];
        cell.backgroundView.backgroundColor = [UIColor whiteColor];

    }

    ...
} 
```

* * *

## 回答 #2

> 赞同：-4
> 
> 时间：2012-06-29T06:11:35.377

什么是self.menu？如果你把 tableView 放在它的位置，它工作得很好。

```
[UIView animateWithDuration:ImageViewControllerBarsAnimationDuration delay:0 options: UIViewAnimationOptionAllowUserInteraction animations:^
    {
            if (tableView.superview)
            {
                tableView.alpha = 0;
            }
    } 
completion:^(BOOL finished)
{
            if (tableView.superview)
            {
                [tableView removeFromSuperview];
                tableView.alpha = 1;
            }   
}]; 
```

# arrays - will_paginate 不适用于数组

> ID：11255321
> 
> 赞同：1
> 
> 时间：2012-06-29T02:27:11.670
> 
> 标签：arrays, ruby-on-rails-3, will-paginate

我已经添加

```
# config/initializers/will_paginate_array_fix.rb
require 'will_paginate/array' 
```

但似乎仍然没有获得对数组的分页支持，例如：

```
def index
  @array = (1..100).to_a.paginate(params[:page])
end
# gives TypeError: can't convert Symbol into Integer 
```

它适用于模型，我得到

```
defined? WillPaginate # => constant
ActiveRecord::Base.respond_to? :paginate # => true
# but:
Array.respond_to? :paginate # => false 
```

任何人都知道我缺少什么来获得数组的分页支持？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-29T03:46:52.507

通过查看 will_paginate/array 中的源代码找到了答案：

```
def paginate(options = {})
  page     = options[:page] || 1
  per_page = options[:per_page] || WillPaginate.per_page
  total    = options[:total_entries] || self.length

  WillPaginate::Collection.create(page, per_page, total) do |pager|
    pager.replace self[pager.offset, pager.per_page].to_a
  end
end 
```

因此，对于数组，您必须使用 .paginate（而不是 .page），并且必须将其作为散列传递。所以以下工作：

```
def index
  @array = (1..100).to_a.paginate(page: params[:page])
end 
```

# windows-runtime - 如何在运行时更改动态磁贴的背景颜色？

> ID：11255326
> 
> 赞同：2
> 
> 时间：2012-06-29T02:28:00.220
> 
> 标签：windows-runtime, winrt-xaml

我正在尝试在运行时更改我的 Windows 8 应用程序上实时磁贴的背景颜色。这可能吗？有人有代码片段吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T04:13:15.630

背景颜色在应用清单中指定。因此，这似乎是不可能的。

可以通过在运行时使用适当的背景图像（用于颜色）发送自定义时间来模拟相同的情况。这是一种古怪的方法，但我的小脑袋只能想到这种方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-10-22T16:15:15.650

假设您已经解决了问题，但我将在此处发布此信息，如果有人遇到此线程可能会很有用。

对于 Primary Tile，Bruno Lemos 的答案是正确的。

**对于 Seconday Tiles**，我会使用 TileUpdateManager。**CreateTileUpdaterForSecondaryTile** (Tile2_ID)。

使用 TileNotifications 和 TileUpdaterManager 对我来说立竿见影。

使用 Tile 模板，您必须从模板中修改一些 XML 代码，但您也可以下载**NotificationsExtensions** NuGet 包并这样做：

```
var tile2 = TileContentFactory.CreateTileSquare150x150PeekImageAndText01();
tile2.Branding = TileBranding.Name;
tile2.Image.Src = "ms-appx:///assets/Logo-transparent.png"; //Useful to have the same logo image with transparent background and other colors
tile2.TextHeading.Text = "Heading";
tile2.TextBody1.Text = "String1";
tile2.TextBody2.Text = "String2";
tile2.TextBody3.Text = "String3";
var doc = new XmlDocument();
doc.LoadXml(tile2.ToString());
var updater = TileUpdateManager.CreateTileUpdaterForSecondaryTile(tile2_id);
updater.EnableNotificationQueueForSquare150x150(true); //enables up to 5 different tile *animations* for 150 square icon, can be enabled for other sizes too
updater.Update(new TileNotification(doc) { Tag = "1" }); 
```

上面的代码考虑了之前创建的 SecondaryTile。

您可以在此处查看不同的图标模板：[https ://msdn.microsoft.com/en-us/library/windows/apps/xaml/windows.ui.notifications.tiletemplatetype.aspx](https://msdn.microsoft.com/en-us/library/windows/apps/xaml/windows.ui.notifications.tiletemplatetype.aspx)

您只需更改**TileContentFactory.CreateNAMEOFTEMPLATE**行并填充不同的字符串/图像字段。

可以在此处找到有关**EnableNotificationQueue**在磁贴中具有超过 1 个动画的信息：[https ://msdn.microsoft.com/en-us/library/windows/apps/hh781199.aspx](https://msdn.microsoft.com/en-us/library/windows/apps/hh781199.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-02-20T04:09:40.037

**对于 Primary / Default Tile**，您可以执行@Tilak 所说的操作：创建平铺图像通知并用于`TileUpdateManager.CreateTileUpdaterForApplication().Update`更新它。

**对于 Secondary Tiles**，请执行以下操作：

1.  在应用清单中，将背景颜色设置为“透明”
2.  在应用清单中，使用具有透明背景的图像

3.  现在您可以在运行时执行此操作：

`var tile = new SecondaryTile("YOUR_TILE_ID"); tile.VisualElements.BackgroundColor = Colors.Red; await tile.UpdateAsync();`

> 问题是：后台没有立即更新，我不知道为什么。但是例如，您可以在退出/登录后看到效果。（使用 Windows 10 测试）

所以这个答案是不完整的，但希望能给像我这样从谷歌来到这里的人提供见解。

[@brunolemos](http://twitter.com/brunolemos)

# jquery - jQuery 不会把它变成 JSON

> ID：11255341
> 
> 赞同：0
> 
> 时间：2012-06-29T02:31:09.233
> 
> 标签：jquery, arrays, json

所以我想变成JSON的代码如下

```
var locationData = [];
locationData['lat'] = position.coords.latitude;
locationData['long'] = position.coords.longitude;
locationData['address']['road'] = data['address']['road'];
locationData['address']['suburb'] = data['address']['suburb'];
locationData['address']['city'] = data['address']['city'];
locationData['address']['county'] = data['address']['county'];
locationData['address']['state'] = data['address']['state'];
locationData['address']['postcode'] = data['address']['postcode'];
locationData['address']['country'] = data['address']['country'];
locationData['address']['country_code'] = data['address']['country_code']; 
```

但是当我运行它时，它并没有提醒我它已经成功

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-29T02:37:46.543

您最初的声明是错误的：

```
var locationData = []; 
```

这会创建一个数组，它不会像您期望的那样工作；你想要一个对象。您还需要初始化内部任何复杂的数据结构，例如`address`：

```
var locationData = {
    address: {}
} 
```

* * *

**边注**

数组也是 JavaScript 中的对象，但在使用数字属性时它的行为方式很特殊。在您的情况下，您根本没有使用数字属性，这就是为什么常规对象更适合您的需求。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T02:33:47.443

正如您将 locationData 声明为数组一样，您也需要将 locationData['address'] 声明为数组。（`locationData['address']=[]`在你的第三或第四行）。

# c - 无法正确终止“while”循环

> ID：11255342
> 
> 赞同：2
> 
> 时间：2012-06-29T02:31:31.493
> 
> 标签：c, loops, input, while-loop, terminate

我第一次尝试用 C 编程，并将其应用于一些具体的东西......

我正在创建的解决问题的程序处理一个while循环。该程序的目标是计算一组卡车每加仑的平均英里数。我希望它在输入 -1 作为消耗的加仑数后立即终止，但我必须输入两次，一次输入加仑数，一次输入英里数。我发现这个输入实际上被用作结果计算的一部分。这是代码：

```
#include <stdio.h>
int main()
{

    int tanks, miles;
    float gallons = 0, average = 0, miles_per_gallon = 0;
    tanks = 0;

    while (gallons != -1) {

            tanks += 1;
            miles_per_gallon = (float)miles / gallons;
            average = average + miles_per_gallon;
            printf("The miles / gallon for this tank was %.3f\n",
                   miles_per_gallon);

            printf("Enter the gallons used (-1 to end): ");
            scanf("%f", &gallons);

            printf("Enter the miles driven: ");
            scanf("%d", &miles);
    }

    average /= tanks;
    printf("The overall average miles/gallon was %.3f", average);
    return 0;
} 
```

这是一些示例输出：

```
C:\>gallons
Enter the gallons used (-1 to end): 12.3
Enter the miles driven: 700
The miles / gallon for this tank was 56.911
Enter the gallons used (-1 to end): 13.4
Enter the miles driven: 666
The miles / gallon for this tank was 49.701
Enter the gallons used (-1 to end): 17.3
Enter the miles driven: 644
The miles / gallon for this tank was 37.225
Enter the gallons used (-1 to end): 15.5
Enter the miles driven: 777
The miles / gallon for this tank was 50.129
Enter the gallons used (-1 to end): -1
Enter the miles driven: -1
The miles / gallon for this tank was 1.000
The overall average miles/gallon was 38.993 
```

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T02:46:53.170

问题是代码中的语句序列使得直到请求第二个输入之后才达到对循环退出条件的检查。您可以在输入后立即添加检查`-1`，然后退出循环。或者，您可以要求在加仑之前输入英里。

```
for (;;) { /* This is a "forwver" loop; we break out from the middle */

        tanks += 1;
        miles_per_gallon = (float)miles / gallons;
        average = average + miles_per_gallon;
        printf("The miles / gallon for this tank was %.3f\n",
               miles_per_gallon);

        printf("Enter the gallons used (-1 to end): ");
        scanf("%f", &gallons);

        /* This is where you break from the loop: */
        if (gallons == -1) return 0;

        printf("Enter the miles driven: ");
        scanf("%d", &miles);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-29T02:46:41.940

好吧，您应该能够自己解决，如果您只是更改循环或在加仑输入后添加 if 语句，这很容易

```
while (gallons != -1) {

        tanks += 1;
        miles_per_gallon = ( float ) miles / gallons;
        average = average + miles_per_gallon;
        printf("The miles / gallon for this tank was %.3f\n", miles_per_gallon);

        printf("Enter the gallons used (-1 to end): ");
        scanf("%f", &gallons);

        if(gallons==-1){
             printf("Program terminated");
            return 0;
        }

        printf("Enter the miles driven: ");
        scanf("%d", &miles);
    } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-29T02:51:57.463

读取加仑数后检查退出条件。我对您的代码进行了一些更改 --- 因为您只是在阅读加仑后才中断，所以我将 while 条件更改为 true。其次，我将您的测试更改为 <=0，就好像输入 0 一样，除以`0`它会破坏您的数学运算，小于 0 的任何东西都没有任何意义。第三，我在读取值后将计算和报告更改为，所以你不要除以零

```
 while (1) {

    printf("Enter the gallons used (-1 to end): ");
    scanf("%f", &gallons);
    if(gallons <= 0) break;

    printf("Enter the miles driven: ");
    scanf("%d", &miles);

    tanks += 1;
    miles_per_gallon = ( float ) miles / gallons;
    average = average + miles_per_gallon;
    printf("The miles / gallon for this tank was %.3f\n", miles_per_gallon);
  } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-29T02:50:34.587

```
while (gallons != -1) {
        /* snip */

        printf("Enter the gallons used (-1 to end): ");
        scanf("%f", &gallons);

        printf("Enter the miles driven: ");
        scanf("%d", &miles);
} 
```

请注意，您只在问完这两个问题后才评估*退出标准。*如果你想避免询问里程，你必须进一步扭曲你的循环。它看起来像这样：

```
while (gallons != -1) {
        /* snip */

        printf("Enter the gallons used (-1 to end): ");
        scanf("%f", &gallons);

        if (gallons == -1)
            break;  /* exit the while loop */

        printf("Enter the miles driven: ");
        scanf("%d", &miles);
} 
```

当然，像这样在中间退出循环[有点粗糙](http://en.wikipedia.org/wiki/Structured_programming#Low-level_structure_programming)，但我没有立即看到更方便的方法来终止循环而不问第二个问题。

# spring - 如何使用带有弹簧配置的石英运行多个计划

> ID：11255349
> 
> 赞同：0
> 
> 时间：2012-06-29T02:32:48.580
> 
> 标签：spring, quartz-scheduler

在我的情况下，允许客户安排工作。如我所见，quartz 经常使用 cronExpression 来执行计划。但是有很多客户有很多计划，我不能写很多触发 bean 因为我不知道真正有多少计划，这取决于客户。那么，有人会帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T19:41:28.057

Quartz 旨在在运行时添加和删除作业和触发器。Spring 是一种退化的情况，所有触发器和作业都是在启动时定义的。在 Quartz 中，当拥有一个实例时，`Scheduler`您可以轻松地创建、浏览和删除触发器，例如[How-To: Scheduling a Job](http://quartz-scheduler.org/documentation/quartz-2.1.x/cookbook/ScheduleJob)中的示例：

```
// Define job instance
JobDetail job1 = newJob(ColorJob.class)
    .withIdentity("job1", "group1")
    .build();

// Define a Trigger that will fire "now", and not repeat
Trigger trigger = newTrigger()
    .withIdentity("trigger1", "group1")
    .startNow()
    .build();

// Schedule the job with the trigger 
schedulder.scheduleJob(job, trigger); 
```

请参阅[官方文档](http://quartz-scheduler.org/documentation/quartz-2.1.x/quick-start)，尤其是[说明书](http://quartz-scheduler.org/documentation/quartz-2.1.x/cookbook/)。

还要区分作业（包装在应该执行的类中的一段代码）和触发器（执行作业的时间条件）。请记住，默认情况下，当与作业关联的最后一个触发器（作业可以有多个触发器）触发时，该作业将从调度程序中删除。

# java - Java - 在两个字符串之间获取所有字符串的最佳方法？（正则表达式？）

> ID：11255353
> 
> 赞同：37
> 
> 时间：2012-06-29T02:33:22.823
> 
> 标签：java, regex, string

这个问题一直困扰着我很长时间，但基本上我正在寻找最有效的方法来获取两个字符串之间的所有字符串。

几个月来我一直在这样做的方式是使用一堆临时索引、字符串、子字符串，这真的很混乱。（为什么 Java 没有本地方法，例如`String substring(String start, String end)`？

假设我有一个字符串：

`abcabc [pattern1]foo[pattern2] abcdefg [pattern1]bar[pattern2] morestuff`

最终目标是输出`foo`和`bar`。（后来被添加到 JList 中）

我一直在尝试加入正则表达式，`.split()`但没有成功。我已经尝试过使用`*`'s 和`.`'s 的语法，但我认为这并不是我的意图，特别是因为`.split()`只需要一个参数来分裂。

否则我认为另一种方法是使用 Pattern 和 Matcher 类？但我对适当的程序真的很模糊。

* * *

## 回答 #1

> 赞同：88
> 
> 时间：2012-06-29T02:41:53.100

您可以构建正则表达式来为您执行此操作：

```
// pattern1 and pattern2 are String objects
String regexString = Pattern.quote(pattern1) + "(.*?)" + Pattern.quote(pattern2); 
```

这会将`pattern1`and`pattern2`视为**文字**文本，并且模式之间的文本将在第一个[捕获组](http://docs.oracle.com/javase/6/docs/api/java/util/regex/Pattern.html#cg)中捕获。[`Pattern.quote()`](http://docs.oracle.com/javase/6/docs/api/java/util/regex/Pattern.html#quote%28java.lang.String%29)如果您想使用正则表达式，您可以删除，但如果您这样做，我**不**保证任何事情。

您可以通过向`regexString`.

*   如果您想要 Unicode 感知的不区分大小写的匹配，`(?iu)`请在 开头添加`regexString`，或`Pattern.CASE_INSENSITIVE | Pattern.UNICODE_CASE`向方法提供标志[`Pattern.compile`](http://docs.oracle.com/javase/7/docs/api/java/util/regex/Pattern.html#compile(java.lang.String,%20int))。
*   如果要捕获内容，即使两个分隔字符串跨行出现，请添加`(?s)`before `(.*?)`， ie`"(?s)(.*?)"`或[`Pattern.DOTALL`](http://docs.oracle.com/javase/7/docs/api/java/util/regex/Pattern.html#DOTALL)向方法提供标志[`Pattern.compile`](http://docs.oracle.com/javase/7/docs/api/java/util/regex/Pattern.html#compile(java.lang.String,%20int))。

然后编译正则表达式，获取一个[`Matcher`](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/regex/Matcher.html)对象，遍历匹配并将它们保存到 a `List`（或 any `Collection`，这取决于你）。

```
Pattern pattern = Pattern.compile(regexString);
// text contains the full text that you want to extract data
Matcher matcher = pattern.matcher(text);

while (matcher.find()) {
  String textInBetween = matcher.group(1); // Since (.*?) is capturing group 1
  // You can insert match into a List/Collection here
} 
```

测试代码：

```
String pattern1 = "hgb";
String pattern2 = "|";
String text = "sdfjsdkhfkjsdf hgb sdjfkhsdkfsdf |sdfjksdhfjksd sdf sdkjfhsdkf | sdkjfh hgb sdkjfdshfks|";

Pattern p = Pattern.compile(Pattern.quote(pattern1) + "(.*?)" + Pattern.quote(pattern2));
Matcher m = p.matcher(text);
while (m.find()) {
  System.out.println(m.group(1));
} 
```

请注意，如果您使用上述方法搜索此输入之间`foo`和中的文本，您将得到一个匹配项，即.`bar``foo text foo text bar text bar`` text foo text `

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-06-29T02:41:16.660

这是一个可以完成所有工作的单线：

```
List<String> strings = Arrays.asList( input.replaceAll("^.*?pattern1", "")
    .split("pattern2.*?(pattern1|$)")); 
```

细分是：

1.  删除直到 pattern1 的所有内容（要求不以空字符串结尾作为第一项）
2.  `.*?`在 pattern2 和 pattern1 （或输入结束）之间分割输入（非贪婪）
3.  使用实用程序方法`Arrays.asList()`生成一个`List<String>`

下面是一些测试代码：

```
public static void main( String[] args ) {
    String input = "abcabc pattern1foopattern2 abcdefg pattern1barpattern2 morestuff";
    List<String> strings = Arrays.asList( input.replaceAll("^.*?pattern1", "").split("pattern2.*?(pattern1|$)"));
    System.out.println( strings);
} 
```

输出：

```
[foo, bar] 
```

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2012-06-29T02:56:37.117

试试这个：

```
String str = "its a string with pattern1 aleatory pattern2 things between pattern1 and pattern2 and sometimes pattern1 pattern2 nothing";
Matcher m = Pattern.compile(
                            Pattern.quote("pattern1")
                            + "(.*?)"
                            + Pattern.quote("pattern2")
                   ).matcher(str);
while(m.find()){
    String match = m.group(1);
    System.out.println(">"+match+"<");
    //here you insert 'match' into the list
} 
```

它打印：

```
> aleatory <
> and <
> < 
```

# c# - 如何获取使用 FileSystemWatcher 创建的新文件的名称？

> ID：11255360
> 
> 赞同：6
> 
> 时间：2012-06-29T02:33:59.797
> 
> 标签：c#, .net, filesystemwatcher

我正在使用 FileSystemWatcher 监视文件夹。如果我将文件下载到那里，我如何获得该下载文件的名称？例如，如果我下载了一个名为 TextFile.txt 的文件，我将如何让它作为字符串返回？我假设这适用于所有四个触发器（更改、创建、删除、重命名）？我将 IncludeSubdirectories 设置为 true，所以它应该能够做到这一点。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-06-29T02:38:59.000

在`OnCreated`事件中，添加以下代码：

```
private void watcher_OnCreated(object source, FileSystemEventArgs e)
{
    FileInfo file = new FileInfo(e.FullPath);
    Console.WriteLine(file.Name); // this is what you're looking for.
} 
```

**[请参阅 FileInfo 类 @ MSDN](http://msdn.microsoft.com/en-us/library/system.io.fileinfo.aspx)**

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-01-30T14:55:52.007

```
private void watcher_OnCreated(object source, FileSystemEventArgs e)
{
    String Filename = Path.GetFilename(e.FullPath);
} 
```

# ruby-on-rails-3 - Rails 3.2.6 - 运行 rake assets:precompile 并收到 form_for 错误

> ID：11255363
> 
> 赞同：0
> 
> 时间：2012-06-29T02:35:16.690
> 
> 标签：ruby-on-rails-3

当我尝试运行 rake assets:precompile 时，我不断收到此错误：

```
rake aborted!
/new-ui/app/views/account_assets/_form.html.erb:1: syntax error, unexpected ')'
_erbout = ''; _erbout.concat(( form_for @asset do |f| ).to_s) 
```

它引用的代码是一个非常简单的部分代码：

```
<%= form_for @asset do |f| %>
<% if @asset.errors.any? %>
<div id="error_explanation">
  <h2><%= pluralize(@asset.errors.count, "error") %> prohibited this asset from being saved:</h2>

  <ul>
  <% @asset.errors.full_messages.each do |msg| %>
    <li><%= msg %></li>
  <% end %>
  </ul>
</div>
<% end %>

<div class="field">
 <%= f.label :account_id %><br />
 <%= f.number_field :account_id %>
</div>
<div class="field">
<%= f.label :asset_name %><br />
<%= f.text_field :asset_name %>
</div>
<div class="field">
<%= f.label :asset_location %><br />
<%= f.text_field :asset_location %>
</div>
<div class="actions">
<%= f.submit %>
</div>
<% end %> 
```

我已经看到有关堆栈溢出的其他帖子说要从 form_for 中删除 = 符号，但是当我这样做时，我得到一个错误，即方法 form_for 未找到，所以我认为这不是要走的路。

有人知道吗？谢谢

**更新** 这是完整的跟踪：

```
rake assets:precompile --trace RAILS_ENV=production
** Invoke assets:precompile (first_time)
** Execute assets:precompile
/home/dan/.rvm/rubies/ruby-1.9.2-p290/bin/ruby /home/dan/.rvm/gems/ruby-1.9.2-p290@boomerang/bin/rake assets:precompile:all RAILS_ENV=production RAILS_GROUPS=assets --trace
** Invoke assets:precompile:all (first_time)
** Execute assets:precompile:all
** Invoke assets:precompile:primary (first_time)
** Invoke assets:environment (first_time)
** Execute assets:environment
** Invoke environment (first_time)
** Execute environment
SMTP configuration:
   SMTP server: smtp.gmail.com
   SMTP port:   587
   SMTP domain: testmymail.com
   SMTP auth:   plain
   SMTP user:   noreply@testmymail.com
ActiveMerchant gateway: paypal
           login: seller.testmymail.com
** Invoke tmp:cache:clear (first_time)
** Execute tmp:cache:clear
** Execute assets:precompile:primary
rake aborted!
/home/dan/Clients/Boomerang/new-ui/app/views/account_assets/_form.html.erb:1: syntax error, unexpected ')'
_erbout = ''; _erbout.concat(( form_for @asset do |f| ).to_s)
                                                       ^
/home/dan/Clients/Boomerang/new-ui/app/views/account_assets/_form.html.erb:32: syntax error, unexpected keyword_ensure, expecting ')'
/home/dan/Clients/Boomerang/new-ui/app/views/account_assets/_form.html.erb:34: syntax error, unexpected keyword_end, expecting ')'
  (in /home/dan/Clients/Boomerang/new-ui/app/views/account_assets/_form.html.erb)
/home/dan/.rvm/gems/ruby-1.9.2-p290@boomerang/gems/tilt-1.3.3/lib/tilt/template.rb:209:in `instance_eval'
/home/dan/.rvm/gems/ruby-1.9.2-p290@boomerang/gems/tilt-1.3.3/lib/tilt/template.rb:209:in `evaluate_source'
/home/dan/.rvm/gems/ruby-1.9.2-p290@boomerang/gems/tilt-1.3.3/lib/tilt/template.rb:144:in `cached_evaluate'
/home/dan/.rvm/gems/ruby-1.9.2-p290@boomerang/gems/tilt-1.3.3/lib/tilt/template.rb:127:in `evaluate'
/home/dan/.rvm/gems/ruby-1.9.2-p290@boomerang/gems/tilt-1.3.3/lib/tilt/template.rb:76:in `render'
/home/dan/.rvm/gems/ruby-1.9.2-p290@boomerang/gems/sprockets-2.1.3/lib/sprockets/context.rb:177:in `block in evaluate'
/home/dan/.rvm/gems/ruby-1.9.2-p290@boomerang/gems/sprockets-2.1.3/lib/sprockets/context.rb:174:in `each'
/home/dan/.rvm/gems/ruby-1.9.2-p290@boomerang/gems/sprockets-2.1.3/lib/sprockets/context.rb:174:in `evaluate'
/home/dan/.rvm/gems/ruby-1.9.2-p290@boomerang/gems/sprockets-2.1.3/lib/sprockets/processed_asset.rb:12:in `initialize'
/home/dan/.rvm/gems/ruby-1.9.2-p290@boomerang/gems/sprockets-2.1.3/lib/sprockets/base.rb:241:in `new'
/home/dan/.rvm/gems/ruby-1.9.2-p290@boomerang/gems/sprockets-2.1.3/lib/sprockets/base.rb:241:in `block in build_asset'
/home/dan/.rvm/gems/ruby-1.9.2-p290@boomerang/gems/sprockets-2.1.3/lib/sprockets/base.rb:262:in `circular_call_protection'
/home/dan/.rvm/gems/ruby-1.9.2-p290@boomerang/gems/sprockets-2.1.3/lib/sprockets/base.rb:240:in `build_asset'
/home/dan/.rvm/gems/ruby-1.9.2-p290@boomerang/gems/sprockets-2.1.3/lib/sprockets/index.rb:89:in `block in build_asset'
/home/dan/.rvm/gems/ruby-1.9.2-p290@boomerang/gems/sprockets-2.1.3/lib/sprockets/caching.rb:19:in `cache_asset'
/home/dan/.rvm/gems/ruby-1.9.2-p290@boomerang/gems/sprockets-2.1.3/lib/sprockets/index.rb:88:in `build_asset'
/home/dan/.rvm/gems/ruby-1.9.2-p290@boomerang/gems/sprockets-2.1.3/lib/sprockets/base.rb:163:in `find_asset'
/home/dan/.rvm/gems/ruby-1.9.2-p290@boomerang/gems/sprockets-2.1.3/lib/sprockets/index.rb:56:in `find_asset'
/home/dan/.rvm/gems/ruby-1.9.2-p290@boomerang/gems/sprockets-2.1.3/lib/sprockets/bundled_asset.rb:16:in `initialize'
/home/dan/.rvm/gems/ruby-1.9.2-p290@boomerang/gems/sprockets-2.1.3/lib/sprockets/base.rb:244:in `new'
/home/dan/.rvm/gems/ruby-1.9.2-p290@boomerang/gems/sprockets-2.1.3/lib/sprockets/base.rb:244:in `build_asset'
/home/dan/.rvm/gems/ruby-1.9.2-p290@boomerang/gems/sprockets-2.1.3/lib/sprockets/index.rb:89:in `block in build_asset'
/home/dan/.rvm/gems/ruby-1.9.2-p290@boomerang/gems/sprockets-2.1.3/lib/sprockets/caching.rb:19:in `cache_asset'
/home/dan/.rvm/gems/ruby-1.9.2-p290@boomerang/gems/sprockets-2.1.3/lib/sprockets/index.rb:88:in `build_asset'
/home/dan/.rvm/gems/ruby-1.9.2-p290@boomerang/gems/sprockets-2.1.3/lib/sprockets/base.rb:163:in `find_asset'
/home/dan/.rvm/gems/ruby-1.9.2-p290@boomerang/gems/sprockets-2.1.3/lib/sprockets/index.rb:56:in `find_asset'
/home/dan/.rvm/gems/ruby-1.9.2-p290@boomerang/gems/actionpack-3.2.6/lib/sprockets/static_compiler.rb:23:in `block in compile'
/home/dan/.rvm/gems/ruby-1.9.2-p290@boomerang/gems/sprockets-2.1.3/lib/sprockets/base.rb:212:in `block in each_logical_path'
/home/dan/.rvm/gems/ruby-1.9.2-p290@boomerang/gems/sprockets-2.1.3/lib/sprockets/base.rb:200:in `block (2 levels) in each_file'
/home/dan/.rvm/gems/ruby-1.9.2-p290@boomerang/gems/sprockets-2.1.3/lib/sprockets/base.rb:190:in `each'
/home/dan/.rvm/gems/ruby-1.9.2-p290@boomerang/gems/sprockets-2.1.3/lib/sprockets/base.rb:190:in `each_entry'
/home/dan/.rvm/gems/ruby-1.9.2-p290@boomerang/gems/sprockets-2.1.3/lib/sprockets/base.rb:198:in `block in each_file'
/home/dan/.rvm/gems/ruby-1.9.2-p290@boomerang/gems/sprockets-2.1.3/lib/sprockets/base.rb:197:in `each'
/home/dan/.rvm/gems/ruby-1.9.2-p290@boomerang/gems/sprockets-2.1.3/lib/sprockets/base.rb:197:in `each_file'
/home/dan/.rvm/gems/ruby-1.9.2-p290@boomerang/gems/sprockets-2.1.3/lib/sprockets/base.rb:210:in `each_logical_path'
/home/dan/.rvm/gems/ruby-1.9.2-p290@boomerang/gems/actionpack-3.2.6/lib/sprockets/static_compiler.rb:18:in `compile'
/home/dan/.rvm/gems/ruby-1.9.2-p290@boomerang/gems/actionpack-3.2.6/lib/sprockets/assets.rake:56:in `internal_precompile'
/home/dan/.rvm/gems/ruby-1.9.2-p290@boomerang/gems/actionpack-3.2.6/lib/sprockets/assets.rake:70:in `block (3 levels) in <top (required)>'
/home/dan/.rvm/gems/ruby-1.9.2-p290@boomerang/gems/rake-0.9.2.2/lib/rake/task.rb:205:in `call'
/home/dan/.rvm/gems/ruby-1.9.2-p290@boomerang/gems/rake-0.9.2.2/lib/rake/task.rb:205:in `block in execute'
/home/dan/.rvm/gems/ruby-1.9.2-p290@boomerang/gems/rake-0.9.2.2/lib/rake/task.rb:200:in `each'
/home/dan/.rvm/gems/ruby-1.9.2-p290@boomerang/gems/rake-0.9.2.2/lib/rake/task.rb:200:in `execute'
/home/dan/.rvm/gems/ruby-1.9.2-p290@boomerang/gems/rake-0.9.2.2/lib/rake/task.rb:158:in `block in invoke_with_call_chain'
/home/dan/.rvm/rubies/ruby-1.9.2-p290/lib/ruby/1.9.1/monitor.rb:201:in `mon_synchronize'
/home/dan/.rvm/gems/ruby-1.9.2-p290@boomerang/gems/rake-0.9.2.2/lib/rake/task.rb:151:in `invoke_with_call_chain'
/home/dan/.rvm/gems/ruby-1.9.2-p290@boomerang/gems/rake-0.9.2.2/lib/rake/task.rb:144:in `invoke'
/home/dan/.rvm/gems/ruby-1.9.2-p290@boomerang/gems/actionpack-3.2.6/lib/sprockets/assets.rake:60:in `block (3 levels) in <top (required)>'
/home/dan/.rvm/gems/ruby-1.9.2-p290@boomerang/gems/rake-0.9.2.2/lib/rake/task.rb:205:in `call'
/home/dan/.rvm/gems/ruby-1.9.2-p290@boomerang/gems/rake-0.9.2.2/lib/rake/task.rb:205:in `block in execute'
/home/dan/.rvm/gems/ruby-1.9.2-p290@boomerang/gems/rake-0.9.2.2/lib/rake/task.rb:200:in `each'
/home/dan/.rvm/gems/ruby-1.9.2-p290@boomerang/gems/rake-0.9.2.2/lib/rake/task.rb:200:in `execute'
/home/dan/.rvm/gems/ruby-1.9.2-p290@boomerang/gems/rake-0.9.2.2/lib/rake/task.rb:158:in `block in invoke_with_call_chain'
/home/dan/.rvm/rubies/ruby-1.9.2-p290/lib/ruby/1.9.1/monitor.rb:201:in `mon_synchronize'
/home/dan/.rvm/gems/ruby-1.9.2-p290@boomerang/gems/rake-0.9.2.2/lib/rake/task.rb:151:in `invoke_with_call_chain'
/home/dan/.rvm/gems/ruby-1.9.2-p290@boomerang/gems/rake-0.9.2.2/lib/rake/task.rb:144:in `invoke'
/home/dan/.rvm/gems/ruby-1.9.2-p290@boomerang/gems/rake-0.9.2.2/lib/rake/application.rb:116:in `invoke_task'
/home/dan/.rvm/gems/ruby-1.9.2-p290@boomerang/gems/rake-0.9.2.2/lib/rake/application.rb:94:in `block (2 levels) in top_level'
/home/dan/.rvm/gems/ruby-1.9.2-p290@boomerang/gems/rake-0.9.2.2/lib/rake/application.rb:94:in `each'
/home/dan/.rvm/gems/ruby-1.9.2-p290@boomerang/gems/rake-0.9.2.2/lib/rake/application.rb:94:in `block in top_level'
/home/dan/.rvm/gems/ruby-1.9.2-p290@boomerang/gems/rake-0.9.2.2/lib/rake/application.rb:133:in `standard_exception_handling'
/home/dan/.rvm/gems/ruby-1.9.2-p290@boomerang/gems/rake-0.9.2.2/lib/rake/application.rb:88:in `top_level'
/home/dan/.rvm/gems/ruby-1.9.2-p290@boomerang/gems/rake-0.9.2.2/lib/rake/application.rb:66:in `block in run'
/home/dan/.rvm/gems/ruby-1.9.2-p290@boomerang/gems/rake-0.9.2.2/lib/rake/application.rb:133:in `standard_exception_handling'
/home/dan/.rvm/gems/ruby-1.9.2-p290@boomerang/gems/rake-0.9.2.2/lib/rake/application.rb:63:in `run'
/home/dan/.rvm/gems/ruby-1.9.2-p290@boomerang/gems/rake-0.9.2.2/bin/rake:33:in `<top (required)>'
/home/dan/.rvm/gems/ruby-1.9.2-p290@boomerang/bin/rake:19:in `load'
/home/dan/.rvm/gems/ruby-1.9.2-p290@boomerang/bin/rake:19:in `<main>'
Tasks: TOP => assets:precompile:primary
rake aborted!
Command failed with status (1): [/home/dan/.rvm/rubies/ruby-1.9.2-p290/bin/...]
/home/dan/.rvm/gems/ruby-1.9.2-p290@boomerang/gems/rake-0.9.2.2/lib/rake/file_utils.rb:53:in `block in create_shell_runner'
/home/dan/.rvm/gems/ruby-1.9.2-p290@boomerang/gems/rake-0.9.2.2/lib/rake/file_utils.rb:45:in `call'
/home/dan/.rvm/gems/ruby-1.9.2-p290@boomerang/gems/rake-0.9.2.2/lib/rake/file_utils.rb:45:in `sh'
/home/dan/.rvm/gems/ruby-1.9.2-p290@boomerang/gems/rake-0.9.2.2/lib/rake/file_utils_ext.rb:39:in `sh'
/home/dan/.rvm/gems/ruby-1.9.2-p290@boomerang/gems/rake-0.9.2.2/lib/rake/file_utils.rb:80:in `ruby'
/home/dan/.rvm/gems/ruby-1.9.2-p290@boomerang/gems/rake-0.9.2.2/lib/rake/file_utils_ext.rb:39:in `ruby'
/home/dan/.rvm/gems/ruby-1.9.2-p290@boomerang/gems/actionpack-3.2.6/lib/sprockets/assets.rake:12:in `ruby_rake_task'
/home/dan/.rvm/gems/ruby-1.9.2-p290@boomerang/gems/actionpack-3.2.6/lib/sprockets/assets.rake:21:in `invoke_or_reboot_rake_task'
/home/dan/.rvm/gems/ruby-1.9.2-p290@boomerang/gems/actionpack-3.2.6/lib/sprockets/assets.rake:29:in `block (2 levels) in <top (required)>'
/home/dan/.rvm/gems/ruby-1.9.2-p290@boomerang/gems/rake-0.9.2.2/lib/rake/task.rb:205:in `call'
/home/dan/.rvm/gems/ruby-1.9.2-p290@boomerang/gems/rake-0.9.2.2/lib/rake/task.rb:205:in `block in execute'
/home/dan/.rvm/gems/ruby-1.9.2-p290@boomerang/gems/rake-0.9.2.2/lib/rake/task.rb:200:in `each'
/home/dan/.rvm/gems/ruby-1.9.2-p290@boomerang/gems/rake-0.9.2.2/lib/rake/task.rb:200:in `execute'
/home/dan/.rvm/gems/ruby-1.9.2-p290@boomerang/gems/rake-0.9.2.2/lib/rake/task.rb:158:in `block in invoke_with_call_chain'
/home/dan/.rvm/rubies/ruby-1.9.2-p290/lib/ruby/1.9.1/monitor.rb:201:in `mon_synchronize'
/home/dan/.rvm/gems/ruby-1.9.2-p290@boomerang/gems/rake-0.9.2.2/lib/rake/task.rb:151:in `invoke_with_call_chain'
/home/dan/.rvm/gems/ruby-1.9.2-p290@boomerang/gems/rake-0.9.2.2/lib/rake/task.rb:144:in `invoke'
/home/dan/.rvm/gems/ruby-1.9.2-p290@boomerang/gems/rake-0.9.2.2/lib/rake/application.rb:116:in `invoke_task'
/home/dan/.rvm/gems/ruby-1.9.2-p290@boomerang/gems/rake-0.9.2.2/lib/rake/application.rb:94:in `block (2 levels) in top_level'
/home/dan/.rvm/gems/ruby-1.9.2-p290@boomerang/gems/rake-0.9.2.2/lib/rake/application.rb:94:in `each'
/home/dan/.rvm/gems/ruby-1.9.2-p290@boomerang/gems/rake-0.9.2.2/lib/rake/application.rb:94:in `block in top_level'
/home/dan/.rvm/gems/ruby-1.9.2-p290@boomerang/gems/rake-0.9.2.2/lib/rake/application.rb:133:in `standard_exception_handling'
/home/dan/.rvm/gems/ruby-1.9.2-p290@boomerang/gems/rake-0.9.2.2/lib/rake/application.rb:88:in `top_level'
/home/dan/.rvm/gems/ruby-1.9.2-p290@boomerang/gems/rake-0.9.2.2/lib/rake/application.rb:66:in `block in run'
/home/dan/.rvm/gems/ruby-1.9.2-p290@boomerang/gems/rake-0.9.2.2/lib/rake/application.rb:133:in `standard_exception_handling'
/home/dan/.rvm/gems/ruby-1.9.2-p290@boomerang/gems/rake-0.9.2.2/lib/rake/application.rb:63:in `run'
/home/dan/.rvm/gems/ruby-1.9.2-p290@boomerang/gems/rake-0.9.2.2/bin/rake:33:in `<top (required)>'
/home/dan/.rvm/gems/ruby-1.9.2-p290@boomerang/bin/rake:19:in `load'
/home/dan/.rvm/gems/ruby-1.9.2-p290@boomerang/bin/rake:19:in `<main>'
Tasks: TOP => assets:precompile 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T19:04:52.627

它看起来像一些注册了由[倾斜引擎](https://github.com/rtomayko/tilt/blob/master/TEMPLATES.md)`account_assets/_form.html.erb`编译的组件。

尝试使用 关闭应用程序的初始化`assets:precompile`。在里面`config/application.rb`添加这个：（但是[这个链接](http://guides.rubyonrails.org/asset_pipeline.html#precompiling-assets)是关于它的警告）

```
config.assets.initialize_on_precompile = false 
```

您是否对`config/application.rb`or`config/enviroment/production.rb`或中的资产进行了任何修改`config/environments/development.rb`？

# sql - SQL Select 语句 - 我要查询的东西有一个单引号

> ID：11255367
> 
> 赞同：1
> 
> 时间：2012-06-29T02:35:45.390
> 
> 标签：sql

大家好，我是 StackOverflow 和 SQL 的新手。我不知道如何表达标题，所以谷歌不是很有帮助。

我正在做一个简单的 SELECT 查询：

```
SELECT * FROM Department WHERE DepartmentName = "Controller's Office" 
```

我想返回 DepartmentName 为“Controller's Office”的所有结果。名字本身有一个单引号，不能去掉（因为老板是这么说的）。使用单引号不起作用。并返回错误：

```
Invalid column name 'Controller's Office'. 
```

我该如何进行查询以使其正常工作？如果您正在做任何复杂的事情，请解释一下，因为我是新人，谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T02:37:05.127

SQL 的大多数变体（您没有指定您使用的内容）将允许您使用*另一个*单引号来转义单引号：

```
SELECT * FROM Department WHERE DepartmentName = 'Controller''s Office' 
```

双引号（在我知道的大多数 SQL 变体中）用于分隔*标识符*（列名和表名），其中包含在标识符名称中无效的字符。

# jpa - nativequery 的替代命名查询

> ID：11255370
> 
> 赞同：0
> 
> 时间：2012-06-29T02:36:06.017
> 
> 标签：jpa, named-query, nativequery, createquery

我需要在 jpa 中将我的查询从**native-query**更改为（**named-query 或 create-query ）。**

```
em = getEntityManager();

    String query = "SELECT kcu.table_Name FROM INFORMATION_SCHEMA.key_column_usage kcu,Information_schema.Tables kt " +
            "WHERE kcu.REFERENCED_TABLE_NAME = 'sampleTable1' " +
            "AND kcu.TABLE_SCHEMA='sampleDataBase' " +
            "AND kcu.REFERENCED_COLUMN_NAME = 'sampleRollNoId' " +
            "AND kt.table_name = kcu.table_name " +
            "AND kt.table_rows > 0 " +
            "AND kt.table_schema = kcu.table_schema";

    List tableNameList = (List) em.createNativeQuery(query).getResultList(); 
```

此查询返回所有表名（表名外键引用此表 (sampleTable1)）。

当我更改 createQuery 或 namedQuery 时出现错误。

像

```
List tableNameList = (List) em.createQuery(query).getResultList();

or

List tableNameList = (List) em.createNamedQuery(query).getResultList(); 
```

如何将此查询更改为 namedQuery 或 createQuery。有可能吗？

以下错误，当我使用 createquery

```
------------- Standard Error -----------------
log4j:WARN No appenders could be found for logger 
   (org.springframework.test.context.junit4.SpringJUnit4ClassRunner).
log4j:WARN Please initialize the log4j system properly.

Testcase: testEntryInUseNamedQuery(com.JPASampleDAOTest):        Caused an ERROR
org.hibernate.hql.ast.QuerySyntaxException: INFORMATION_SCHEMA.key_column_usage is not mapped

[SELECT kcu.table_Name FROM INFORMATION_SCHEMA.key_column_usage kcu,Information_schema.Tables kt WHERE kcu.REFERENCED_TABLE_NAME = 'sampleTable1' AND kcu.TABLE_SCHEMA='sampleDatabase' AND kcu.REFERENCED_COLUMN_NAME = 'sampleRollNoId' AND kt.table_name = kcu.table_name AND kt.table_rows > 0 AND kt.table_schema = kcu.table_schema]

java.lang.IllegalArgumentException: org.hibernate.hql.ast.QuerySyntaxException: INFORMATION_SCHEMA.key_column_usage is not mapped [SELECT kcu.table_Name FROM INFORMATION_SCHEMA.key_column_usage kcu,Information_schema.Tables kt WHERE kcu.REFERENCED_TABLE_NAME = 'sampleTable1' AND kcu.TABLE_SCHEMA='sampleDatabase' AND kcu.REFERENCED_COLUMN_NAME = 'sampleRollNoId' AND kt.table_name = kcu.table_name AND kt.table_rows > 0 AND kt.table_schema = kcu.table_schema]
    at org.hibernate.ejb.AbstractEntityManagerImpl.throwPersistenceException(AbstractEntityManagerImpl.java:624)
    at org.hibernate.ejb.AbstractEntityManagerImpl.createQuery(AbstractEntityManagerImpl.java:96)
    at org.springframework.orm.jpa.SharedEntityManagerCreator$SharedEntityManagerInvocationHandler.invoke(SharedEntityManagerCreator.java:193)
    at $Proxy27.createQuery(Unknown Source)
 at org.springframework.test.context.junit4.SpringTestMethod.invoke(SpringTestMethod.java:198)
    at org.springframework.test.context.junit4.SpringMethodRoadie.runTestMethod(SpringMethodRoadie.java:274)
    at org.springframework.test.context.junit4.SpringMethodRoadie$2.run(SpringMethodRoadie.java:207)
    at org.springframework.test.context.junit4.SpringMethodRoadie.runBeforesThenTestThenAfters(SpringMethodRoadie.java:254)
    at org.springframework.test.context.junit4.SpringMethodRoadie.runWithRepetitions(SpringMethodRoadie.java:234)
    at org.springframework.test.context.junit4.SpringMethodRoadie.runTest(SpringMethodRoadie.java:204)
    at org.springframework.test.context.junit4.SpringMethodRoadie.run(SpringMethodRoadie.java:146)
    at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.invokeTestMethod(SpringJUnit4ClassRunner.java:151)

Caused by: org.hibernate.hql.ast.QuerySyntaxException: INFORMATION_SCHEMA.key_column_usage is not mapped [SELECT kcu.table_Name FROM INFORMATION_SCHEMA.key_column_usage kcu,Information_schema.Tables kt WHERE kcu.REFERENCED_TABLE_NAME = 'sampleTable1' AND kcu.TABLE_SCHEMA='sampleDatabase' AND kcu.REFERENCED_COLUMN_NAME = 'sampleRollNoId' AND kt.table_name = kcu.table_name AND kt.table_rows > 0 AND kt.table_schema = kcu.table_schema]
    at org.hibernate.hql.ast.util.SessionFactoryHelper.requireClassPersister(SessionFactoryHelper.java:158)
    at org.hibernate.hql.ast.tree.FromElementFactory.addFromElement(FromElementFactory.java:87)
    at org.hibernate.hql.ast.tree.FromClause.addFromElement(FromClause.java:70)
    at org.hibernate.hql.ast.HqlSqlWalker.createFromElement(HqlSqlWalker.java:255)
    at org.hibernate.hql.antlr.HqlSqlBaseWalker.fromElement(HqlSqlBaseWalker.java:3056)
    at org.hibernate.hql.antlr.HqlSqlBaseWalker.fromElementList(HqlSqlBaseWalker.java:2945)
    at org.hibernate.hql.antlr.HqlSqlBaseWalker.fromClause(HqlSqlBaseWalker.java:688)
    at org.hibernate.hql.antlr.HqlSqlBaseWalker.query(HqlSqlBaseWalker.java:544)
    at org.hibernate.hql.antlr.HqlSqlBaseWalker.selectStatement(HqlSqlBaseWalker.java:281)
    at org.hibernate.hql.antlr.HqlSqlBaseWalker.statement(HqlSqlBaseWalker.java:229)
    at org.hibernate.hql.ast.QueryTranslatorImpl.analyze(QueryTranslatorImpl.java:228)
    at org.hibernate.hql.ast.QueryTranslatorImpl.doCompile(QueryTranslatorImpl.java:160)
    at org.hibernate.hql.ast.QueryTranslatorImpl.compile(QueryTranslatorImpl.java:111)
    at org.hibernate.engine.query.HQLQueryPlan.<init>(HQLQueryPlan.java:77)
    at org.hibernate.engine.query.HQLQueryPlan.<init>(HQLQueryPlan.java:56)
    at org.hibernate.engine.query.QueryPlanCache.getHQLQueryPlan(QueryPlanCache.java:72)
    at org.hibernate.impl.AbstractSessionImpl.getHQLQueryPlan(AbstractSessionImpl.java:133)
    at org.hibernate.impl.AbstractSessionImpl.createQuery(AbstractSessionImpl.java:112)
    at org.hibernate.impl.SessionImpl.createQuery(SessionImpl.java:1623)
    at org.hibernate.ejb.AbstractEntityManagerImpl.createQuery(AbstractEntityManagerImpl.java:93) 
```

帮助我，提前谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T08:55:47.637

**在 SQL 上使用[JPQL 。](http://docs.oracle.com/javaee/6/tutorial/doc/bnbtg.html)**在 JPQL 中，您指的是实体而不是表，以及属性而不是列。

用于`em.createQuery()`执行 JPQL 查询。`em.createNamedQuery(`) 用于不同的目的。

# jquery - jQuery。fadeIn() "inline-block" 元素将它们设置为阻塞

> ID：11255371
> 
> 赞同：0
> 
> 时间：2012-06-29T02:36:22.833
> 
> 标签：jquery, css

我需要淡入最初隐藏的 div，这些 div 用 display:none 隐藏。当它们淡入时，我需要显示为“inline-block”而不是“block”，这样它们就可以彼此内联显示，而不是彼此下降。这可能吗？

```
.sectionBlock{
width:163px; 
height: 261px; 
padding:5px 5px; 
position: relative;  
/*display: inline-block;*/ 
display: none;
overflow: hidden; 
margin: 0 6px 11px 6px; 
} 
```

.

```
...
$('.sectionBlock').fadeIn('slow');
... 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T02:38:54.990

尝试[`.fadeTo()`](http://api.jquery.com/fadeTo/)改用。据我所知，这并不影响`display`房产。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-29T02:46:30.227

试试这个：

```
.sectionBlock {
   opacity: 0;
}

$('.sectionBlock').animate({'display': 'inline-block', 'opacity': '1'}, 'slow'); 
```

或者，您可以`float`使用 div：

```
.sectionBlock {
   float: left
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-29T05:13:04.533

我换了一种不同的方式来思考这个问题。我现在将所有 sectionBlocks 输出到一个隐藏的 div 中，并将它们附加到容器并淡入容器。效果很好。

```
$('.sectionBlock').clone().appendTo($('.sectionBlockWrapper'));
$('.sectionBlockWrapper').fadeIn('slow'); 
```

我正在克隆它们，因为我正在对它们进行分页并且需要在清空容器后重新使用它们。如果有人感兴趣，这是我的完整代码。现在远非最佳，但它可以解决问题：

```
//work out how many section blocks we have
        var numberOfElements = $('.sectionBlock').length; //total number of section blocks
        var maxNumberPerPage = 8; //maximum number of blocks per 1 page layout
        var maxNumberFL = 7; //maximum number of blocks on the first and last pages
        var maxNumberMid = 6; //maximum number of blocks on the mid pages
        var virtualPage = 1; //set the start page to 1

        //work out the total number of pages
        var totalPages = 1;
        if (numberOfElements <= maxNumberPerPage){
            //we leave it set to 1
        } else if (numberOfElements <= (maxNumberFL*2)){
            totalPages = 2;
        } else {
            totalPages = 2;
            additionalElements = numberOfElements - (maxNumberFL*2); //because we have 14 for the first and last pages
            additionalPages = (parseInt(additionalElements/maxNumberMid)+1);
            totalPages = totalPages + additionalPages;
        }

        var nextButton = '<div class="sectionBlock" id="nextButton">Next >></div>'
        var prevButton = '<div class="sectionBlock" id="prevButton"><< Previous</div>'

        if (numberOfElements <= maxNumberPerPage){
            //1 page
            $('.sectionBlock').clone().appendTo($('.sectionBlockWrapper'));
            $('.sectionBlockWrapper').fadeIn('slow');
        } else {
            //we have extra pages so we only show [maxNumberFL] on the page and append the next button
            $('.sectionBlock:lt('+maxNumberFL+')').clone().appendTo($('.sectionBlockWrapper'));
            $('.sectionBlockWrapper').append(nextButton);
            $('.sectionBlockWrapper').fadeIn('slow');
        }

        $('#nextButton').live('click', function(){
            $('.sectionBlockWrapper').fadeOut('slow', function(){
                $('.sectionBlockWrapper').empty();
                virtualPage = virtualPage + 1;

                if (numberOfElements > (maxNumberFL*2)){
                    if (virtualPage == totalPages){
                        //this is the last page of a multi page
                        var startAt = parseInt((maxNumberMid * virtualPage) -4);
                        var endAt = startAt + maxNumberMid;
                        $('.sectionBlock').slice(startAt-1,9999).clone().appendTo($('.sectionBlockWrapper'));
                        $('.sectionBlockWrapper').prepend(prevButton);
                        $('.sectionBlockWrapper').fadeIn('slow');
                    } else {
                        //this is a mid page of a multi page
                        var startAt = parseInt((maxNumberMid * virtualPage) -4);
                        var endAt = startAt + maxNumberMid;
                        $('.sectionBlock').slice(startAt-1,endAt-1).clone().appendTo($('.sectionBlockWrapper'));
                        $('.sectionBlockWrapper').prepend(prevButton);
                        $('.sectionBlockWrapper').append(nextButton);
                        $('.sectionBlockWrapper').fadeIn('slow');
                    }
                } else {
                    //this is the second and last page
                    $('.sectionBlock').slice(maxNumberFL, maxNumberFL*virtualPage).clone().appendTo($('.sectionBlockWrapper'));
                    $('.sectionBlockWrapper').prepend(prevButton);
                    $('.sectionBlockWrapper').fadeIn('slow');
                }
            });
        });

        $('#prevButton').live('click', function(){
            $('.sectionBlockWrapper').fadeOut('slow', function(){
                $('.sectionBlockWrapper').empty();
                virtualPage = virtualPage - 1;

                if (numberOfElements > (maxNumberFL*2)){
                    if (virtualPage == 1){
                        //this is the first page of a multi page
                        var startAt = parseInt((maxNumberMid * virtualPage) -4);
                        var endAt = startAt + maxNumberMid;
                        $('.sectionBlock').slice(0,maxNumberFL).clone().appendTo($('.sectionBlockWrapper'));
                        $('.sectionBlockWrapper').append(nextButton);
                        $('.sectionBlockWrapper').fadeIn('slow');
                    } else {
                        //this is a mid page of a multi page
                        var startAt = parseInt((maxNumberMid * virtualPage) -4);
                        var endAt = startAt + maxNumberMid;
                        $('.sectionBlock').slice(startAt-1,endAt-1).clone().appendTo($('.sectionBlockWrapper'));
                        $('.sectionBlockWrapper').prepend(prevButton);
                        $('.sectionBlockWrapper').append(nextButton);
                        $('.sectionBlockWrapper').fadeIn('slow');
                    }
                } else {
                    //this is the first page
                    $('.sectionBlock').slice(0, maxNumberFL).clone().appendTo($('.sectionBlockWrapper'));       
                    $('.sectionBlockWrapper').append(nextButton);
                    $('.sectionBlockWrapper').fadeIn('slow');
                }
            });
        }); 
```

# compilation - 未创建 Opa 可执行文件

> ID：11255381
> 
> 赞同：1
> 
> 时间：2012-06-29T02:38:37.613
> 
> 标签：compilation, executable, opa

当我去用 Opa 编译一些东西时，无论是我写的东西，甚至是非常简单的“你好，网络！” 脚本，我看到没有产生可执行文件。它正在生成一个 _build 目录和一个 JavaScript 文件。知道这里发生了什么吗？

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T14:31:45.610

最新版本的 Opa 编译为 JavaScript（在 Node.js 上运行）。所以生成的 JavaScript 文件正是您所需要的，您应该能够运行它：

```
./your_app.js 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T12:09:24.887

是的，在您需要完全启动此 javascript 文件之后，如下所示：

```
./application.js 
```

# javascript - 这是一个有 2 个条件的条件语句，我需要添加第 3 个

> ID：11255388
> 
> 赞同：1
> 
> 时间：2012-06-29T02:39:07.660
> 
> 标签：javascript, conditional

首先，我不会为菜鸟问题提前道歉。

正如标题所说，我有这行：

```
stringValue = numericValue >= 1000 ? numericValue.toString().substr(0, numericValue.toString().length - 3) + "TB" : numericValue + "GB"; 
```

基本上，如果值超过 1000，它会附加“TB”，而在 1000 以下，它会附加“GB”。我需要第三个条件，如果它低于 50，它会完全删除文本。

我可以看到这就像一个 if/else 语句，但我不能完全解码它并弄清楚如何添加第三个条件。提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T02:43:34.467

这转化为：

```
stringValue = function(numericValue) {
    if(thirdCondition) {
          return "something";
    }
    if(numericValue >= 1000) {
      return numericValue.toString().substr(0, numericValue.toString().length - 3) + "TB";
    }
    else {
      return numericValue + "GB";
    }
} 
```

我不确定你的第三个条件是什么，但你明白了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-29T02:44:35.370

您可以从一点缩进中受益。像这样打破它使其更具可读性：

```
stringValue = 
    numericValue >= 1000 
        ? numericValue.toString().substr(0, numericValue.toString().length - 3) + "TB" 
        : numericValue + "GB"; 
```

现在，要添加另一个条件，比如 else 部分，你可以这样做：

```
stringValue = 
    numericValue >= 1000 
        ? numericValue.toString().substr(0, numericValue.toString().length - 3) + "TB" 
        : numericValue < 1
            ? "Negligible"
            : numericValue + "GB"; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-29T02:44:49.100

这应该有效：

```
 stringValue = numericValue >= 1000 ? numericValue.toString().substr(0, numericValue.toString().length - 3) + "TB" : (numericValue > 50 ? numericValue + "GB" : numericValue); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-29T02:45:19.650

```
var x = 5;

var y = x > 1000 ? "big" : x > 50 ? "medium" : "small" 
```

您可以链接三元运算符。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-29T02:50:35.147

```
value = function(numericValue) {
  numString = numericValue.toString();
  length = numString.length -3;
  subString = numString.substr(0, length);
  if(numericValue<50) { return ""; }
  else if(numericValue< 1000) { return numString + "GB"; }
  else { return substring + "TB"; }
} 
```

不要无缘无故地让你的代码过于复杂。保持简单，清楚地表明你打算做什么。这将防止您和其他任何人在将来维护您的代码时感到头疼。

**编辑**- 固定行“返回 numString + “GB””。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-06-29T03:07:57.113

挺容易

```
stringValue = numericValue >= 1000 ? numericValue.toString().substr(0, numericValue.toString().length - 3) + "TB" : numericValue >= 50? numericValue + "GB":"do here your 'below 50 stuff'"; 
```

基本上它是这样工作的：

```
(condition)?(return case true):(return case false); 
```

所以你也可以嵌套它

```
(condition1)?(return case true1):((condition2)?(return case true2):(return case false both)); 
```

在您的情况下，您有 3 个案例。还有其他几种解决方案：经典`if(){} else if(){} else{}`语句

switch: [W3Schools JavaScript Switch 语句](http://www.w3schools.com/js/js_switch.asp)如下：

```
switch(n)
{
case 1:
  execute code block 1
  break;
case 2:
  execute code block 2
  break;
default:
  code to be executed if n is different from case 1 and 2
} 
```

在您的情况下，我会考虑使用 switch 版本（更易于阅读）或 if、else if、else。嵌套三元运算符 ' ? : ' 不容易阅读。

对于开关，您可以执行以下操作

```
var numericValue = //a numeric value;
switch (true) {
    case (numericValue <= 50):
        //do case below 50
        break;
    case (numericValue > 50 && numericValue <= 1000):
        //do case above 50 and below 1000
        break;
    default:
        //do case above 1000
        break;
} 
```

Here we switch over the value 'true'. That means we look the different cases and check for the one that is 'true' (or default)

# eclipse - 在可见选项卡下保留以前打开的文件选项卡

> ID：11255389
> 
> 赞同：42
> 
> 时间：2012-06-29T02:39:30.373
> 
> 标签：eclipse, eclipse-juno

Eclipse Juno - 在我的工作区中，我在左侧打开了“包资源管理器”，在右侧我有 6 个可见的文件选项卡，在“显示列表”下我有 17 个文件。

在这 6 个可见文件选项卡中，我正在处理第三个文件 (abc.java)，如果我在“显示列表”(xyz.java) 下选择一个文件，则 eclipse 将 xyz.java 显示为活动选项卡，并且显示列表中的下 5 个文件。我以前的可见文件选项卡不见了，现在我有了一组新的可见文件选项卡。有没有办法让我以前的活动文件'abc.java'在可见文件选项卡下，我当前的活动文件为'xyz.java'

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-07-02T10:00:40.837

我想我只是遇到了同样的问题，我通过切换主题解决了它。

转到 Preferences -> General -> Appearance 并切换到 Classic 主题。

我不明白为什么这有帮助，但它对我有用。

更新：

在再次被此咬伤后，我再次检查，正如@anweibel 在他的回答中所说，这可以在 CSS 中进行编辑。

我刚刚使用 Eclipse Marketplace 安装了 E4 CSS 编辑器插件，这样我就可以在 Preferences -> Apperance 下直接从 Eclipse 更改 CSS。我将 swt-mru-visible 从 false 更改为 true，以便 GTK 主题的相关部分如下所示：

```
.MPartStack {
    font-size: 11;
    swt-simple: false;
    swt-mru-visible: true;
} 
```

需要重新启动才能使更改生效。

更多信息也可以在这里找到：[Eclipse tabs repositioning](https://stackoverflow.com/questions/12578197/eclipse-juno-tabs-repositionning)

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2012-09-28T15:15:26.273

有一种更直接的方法可以恢复 eclipse Juno 编辑器的旧选项卡行为：

*   去`INSTALL/plugins/org.eclipse.platform_4.2.0.qualifier/css`
*   为您使用的主题选择 CSS
*   替换`swt-mru-visible: false;`为`swt-mru-visible: true;`
*   重新启动eclipse（我没有测试过是否有必要）

如果这不起作用，还请查找`INSTALL/configuration/org.eclipse.e4.ui.css.swt.theme/`CSS 文件。

如果您查看不同主题的 css 文件，您就会明白为什么切换主题也能解决问题。

=> [http://wiki.eclipse.org/Eclipse4/CSS](http://wiki.eclipse.org/Eclipse4/CSS)

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2014-06-27T14:58:21.373

这是 anweibel 对 Eclipse Luna 的回答的快速更新：

您要编辑的 CSS 现在位于

*   安装/插件/org.eclipse.ui.themes_1.0.0.qualifier/css

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-09-27T10:48:16.513

适用于所有主题的快速 Linux 修复：

```
cd <eclipse install dir>
find . -type f -name "*.css" | xargs grep 'swt-mru-visible: false'  | cut -d: -f1 | xargs -n1 sed -i.orig 's/swt-mru-visible: false/swt-mru-visible: true/' 
```

这将找到所有带有“swt-mru-visible: false”的 CSS 文件，用 *.orig 后缀备份它们并更改为“swt-mru-visible: true”

您可以使用“找到所有备份文件”

```
find . -type f -name "*.orig" 
```

# zend-framework - Zend 框架中的 URL 重写

> ID：11255391
> 
> 赞同：0
> 
> 时间：2012-06-29T02:39:52.773
> 
> 标签：zend-framework, url-rewriting, zend-route

我目前有像 localhost/zend_practice/countries/index?data=1 这样的网址，其中国家是我的控制器的名称，索引是我的操作名称。我想要像 localhost/zend_practice/countries/index/data/1 这样的 url。还有一条规则只接受获取参数“数据”的数字。我怎样才能只为“国家”控制器（而不是我的其他控制器）执行此操作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T04:12:00.317

Zend Framework 默认将 url 作为

> /控制器/动作/parameter_name/parameter_value

您可以直接使用您的网址作为

> /国家/地区/索引/数据/1

在代码中，您可以获得数据参数并根据需要应用您的逻辑。这是一个片段。

```
class CountriesController extends Zend_Controller_Action{
    public function indexAction(){
        //capture the data parameter
        $data = $this->_request->getParam('data');
        //check data if numeric
        if(is_numeric($data)){
            //your code goes here....
        }

    }
} 
```

# ios - iOS iPad应用程序不隐藏键盘

> ID：11255392
> 
> 赞同：0
> 
> 时间：2012-06-29T02:39:58.403
> 
> 标签：ios, ipad, uitextfield, uipopovercontroller

在我的应用程序中，我有一个视图，它是一个有很多输入的表单。当 UITextField 调用`textFieldDidBeginEditing`时，它会检查标签并根据输入的含义显示 UIPopoverController 或键盘。

如果键盘启动，我需要它在用户按下弹出弹出框的文本字段时消失。但是我不能让它消失，我已经尝试了各种方法来摆脱键盘，但它只是留在那里。我试过了：

*   呼入`resignFirstResponder`_`textFieldDidEndEditing`
*   呼入`[self.view endEditing:YES]`_`textFieldDidEndEditing`
*   在检查前一个标签时调用`resignFirstResponder`AND等于键盘输入文本字段。`[self.view endEditing:YES]``textFieldDidBeginEditing`

任何想法都会很棒。

如果有人想查看确切的行为，我已将其撕掉并将其放入示例项目中。 [http://dl.dropbox.com/u/61692457/KB_Test.zip](http://dl.dropbox.com/u/61692457/KB_Test.zip)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T04:24:03.600

在 .h 文件中声明一个全局 UITextField

UITextField *txtfld;

将您的方法 textFieldDidBeginEditing 替换为 textFieldShouldBeginEditing ，现在编写此代码

```
- (BOOL)textFieldShouldBeginEditing:(UITextField *)textField 
{

if (textField.tag == 1 || textField.tag==3)
{

    if(numPickerPopover == nil)
    {   

        numPicker = [[[NumPicker alloc] initWithStyle:UITableViewStylePlain] autorelease];

        numPicker.delegate = self;

        numPickerPopover = [[UIPopoverController alloc] initWithContentViewController:numPicker];
        [numPickerPopover setPopoverContentSize:CGSizeMake(60.0, 260.0f)];
    }

    [numPickerPopover presentPopoverFromRect:textField.frame inView:self.view permittedArrowDirections:UIPopoverArrowDirectionAny animated:YES];

    [txtfld resignFirstResponder];
    return NO;
}

if (textField.tag == 2)

{

    txtfld = textField;

    return YES;
}

return YES;    

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T03:03:25.010

要在用户触摸启动它的 textField 时关闭键盘，请添加以下方法：

```
- (IBAction)dismissKeyboard:(id)sender {

    [textField resignFirstResponder];
} 
```

在 Interface Builder 中，将此方法连接到您想要的 textField 事件，例如在内部进行修饰（或任何更合适的方法）。

# javascript - 你如何使 mootools 拖放与触摸一起工作？

> ID：11255393
> 
> 赞同：1
> 
> 时间：2012-06-29T02:40:26.113
> 
> 标签：javascript, drag-and-drop, mootools, touch, draggable

我有这个 Javascript Mootools 代码：dragStart: function() {

```
var scatterGame = this; // get current object so that can be referenced once out of scope

        $$('.begin-word').makeDraggable({

            container: $('start-game'),

            droppables: $$('.begin-def, #start-game'),

            onEnter: function(draggable, droppable) {
                draggable.addClass('mouseover');
                if (droppable != $('start-game')) {
                    droppable.addClass('mouseover');
                }
            },

            onLeave: function(draggable, droppable) {
                draggable.removeClass('mouseover');     
                droppable.removeClass('mouseover');
            },

            onDrop: function(draggable, droppable) {
                draggable.removeClass('mouseover');
                if (droppable.hasClass('begin-def')) {
                    draggable.setStyle('color','green');
                    droppable.setStyle('color','green');
                    scatterGame.instructionStart();
                }
            }

        });

    }, 
```

它工作得很好，除了我需要它与触摸一起工作。有没有办法使这项工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T03:59:23.527

将其迁移到触摸的挑战主要是触摸时没有鼠标悬停。

因此，您的第一个挑战是考虑将鼠标悬停事件转换为触摸事件。

我看到鼠标悬停可能是一个不幸命名的 css 类，不一定是一个事件，所以这些应该不是问题。考虑将其重命名以进行维护。如果有任何与可拖动组件相关的悬停或鼠标悬停样式/事件，则预计它需要被迁移。

要添加触摸，

1.  你必须指定一个触摸框架，我看到这里有一个[MooTools 1,3 演示](http://davidwalsh.name/mootools-touch)。还有其他的。

在示例中：

> MooTools Core 的一大新增功能是检测移动事件的能力：touchstart、touchmove、touchend、touchcancel……

1.  将“检测移动事件的能力”映射到您现有的：onEnter、onLeave、onDrop 处理程序。

像这样的东西：

```
//add touchstart event to the body
document.body.addEvent('touchstart',function(e) {
  //call onEnter, onLeave, onDrop

}); 
```

另外，查看传入的“e”参数。您可能需要查询它以确保它是您想要传递给可拖动界面的触摸事件。

希望有帮助！纳什

# c++ - 我的 lambda 表达式做映射键比较有什么问题？

> ID：11255394
> 
> 赞同：-1
> 
> 时间：2012-06-29T02:40:38.653
> 
> 标签：c++, lambda

```
BOOL utils::GetLogicDrivesByFreeSpace(LPTSTR pDrives)
{
    TCHAR szBuff[257];
    TCHAR chMaxDrive;
    DWORD dwLogicalDrives;
    ULARGE_INTEGER freeBytesAvaliable, maxFreeBytesAvaliable;
    ULARGE_INTEGER totalNumberOfBytes;
    std::map< ULARGE_INTEGER, TCHAR > driveMap;

    maxFreeBytesAvaliable.QuadPart = 0;
    dwLogicalDrives = GetLogicalDrives();
    for (int nDrive = 0; nDrive < 32; ++nDrive) {
        if (dwLogicalDrives && (1 << nDrive)) {
            _stprintf(szBuff, TEXT("%c:\\"), TEXT('A') + nDrive);
            //如果是硬盘分区
            if (GetDriveType(szBuff) == DRIVE_FIXED) {
                GetDiskFreeSpaceEx(szBuff,
                    &freeBytesAvaliable, &totalNumberOfBytes, NULL);
                driveMap.insert( std::pair< ULARGE_INTEGER, TCHAR >(freeBytesAvaliable.QuadPart, TEXT('A') + nDrive));
            }
        }
    }
    std::sort( driveMap.begin(), driveMap.end(), [](std::pair< ULARGE_INTEGER, TCHAR > n1, std::pair< ULARGE_INTEGER, TCHAR > n2) -> bool { return (n1.first.QuadPart < n2.first.QuadPart); } );
    int i = 0;
    for (std::map< ULARGE_INTEGER, TCHAR >::const_iterator iter = driveMap.begin(); iter != driveMap.end(); ++iter, ++i) {
        pDrives[i] = iter->second;
    }
    return true;
} 
```

这个 lambda 表达式`[](std::pair< ULARGE_INTEGER, TCHAR > n1, std::pair< ULARGE_INTEGER, TCHAR > n2) -> bool { return (n1.first.QuadPart < n2.first.QuadPart); }`无法编译，为什么？？？

谢谢。

**===仅供参考===**

创建一个类：

```
struct CompareLargeInteger {
    bool operator()(ULARGE_INTEGER n1, ULARGE_INTEGER n2) {
        return (n1.QuadPart > n2.QuadPart);
    }
}; 
```

然后将 driveMap 声明为

```
std::map< ULARGE_INTEGER, TCHAR, CompareLargeInteger > driveMap; 
```

然后一切正常。

深入了解 MS 的 STL

```
template<class _RanIt,
    class _Diff> inline
    void _Sort(_RanIt _First, _RanIt _Last, _Diff _Ideal)
    {   // order [_First, _Last), using operator<
    _Diff _Count;
    for (; _ISORT_MAX < (_Count = _Last - _First) && 0 < _Ideal; )
        {   // divide and conquer by quicksort
        _STD pair<_RanIt, _RanIt> _Mid =
            _Unguarded_partition(_First, _Last);
        _Ideal /= 2, _Ideal += _Ideal / 2;  // allow 1.5 log2(N) divisions

        if (_Mid.first - _First < _Last - _Mid.second)
            {   // loop on second half
            _Sort(_First, _Mid.first, _Ideal);
            _First = _Mid.second;
            }
        else
            {   // loop on first half
            _Sort(_Mid.second, _Last, _Ideal);
            _Last = _Mid.first;
            }
        }

    if (_ISORT_MAX < _Count)
        {   // heap sort if too many divisions
        _STD make_heap(_First, _Last);
        _STD sort_heap(_First, _Last);
        }
    else if (1 < _Count)
        _Insertion_sort(_First, _Last); // small
    } 
```

`__Count = __Last - __First`，减号运算符仅由随机访问运算符支持。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-29T03:57:29.983

std::sort 需要随机访问迭代器，但 std::map 迭代器是双向迭代器。

我认为您应该阅读有关 std::map 的更多信息。它是根据键类型和可选谓词隐式排序的。

# c# - 在不同的客户端连接oracle有困难

> ID：11255395
> 
> 赞同：0
> 
> 时间：2012-06-29T02:40:40.883
> 
> 标签：c#, oracle, oracle9i

我用 Microsoft Visual Studio 2008 编写了一个程序，.NET Framework 3.5 SP1

要连接 Oracle 数据库并获取一些数据，即使我使用 VS 组件或者我自己创建连接和适配器，该程序在我的机器上也能正常工作。该程序在我的朋友 PC 上也可以正常工作，该 PC 安装了相同版本的 Visual Studio，但我们与其他客户端有问题。我已经用最新的 .Net Framework 更新了它们，但它们仍然无法连接。

我尝试添加我的 Oracle dll 也有同样的问题（我不记得了，如果你认为问题出在这部分，你可以再次建议我）。即使我将该dll复制到他们的system32，windows目录，但什么也没发生。

我想知道你介意帮我解决这个问题吗？

我用 C# 编写了我的程序，我的 Oracle 数据库是 9i。仅供参考，我已经尝试了很多关于我的问题的搜索，但我仍然没有成功。

你可以参考我的截图。谢谢

![在此处输入图像描述](../Images/94826ba335ca04c5dfdf26bd95bdf227.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-01T08:02:52.043

[从这里](http://www.oracle.com/technetwork/database/enterprise-edition/downloads/index.html)下载 Oracle 客户端软件，然后将其安装在您的客户端机器上，一切都必须为您的客户端正常工作

# jsp - 如何从 HttpServlet 请求中获取操作以分派到多个页面

> ID：11255397
> 
> 赞同：3
> 
> 时间：2012-06-29T02:41:04.193
> 
> 标签：jsp, jakarta-ee, servlets, dispatcher

我正在使用页面控制器模式。如何通过检测请求操作然后根据结果进行调度，将同一个控制器用于两个不同的页面？

这是我的代码：

**帐户.jsp**

```
<form name="input" action="<%=request.getContextPath() %>/edit" method="get">
   <input type="submit" value="Modifier" />
</form> 
```

**帐户 Servlet**

```
public void doGet(HttpServletRequest request, HttpServletResponse response)
            throws ServletException, IOException {
        System.out.println("received HTTP GET");

        String action = request.getParameter("action");

        if (action == null)
        {
            // the account page
            dispatch(request, response, "/account");    
        }
        else if (action == "/edit") {
            // the popup edit page
            dispatch(request, response, "/edit");
        }

        protected void dispatch(HttpServletRequest request,
            HttpServletResponse response, String page)
            throws javax.servlet.ServletException, java.io.IOException {
        RequestDispatcher dispatcher = getServletContext()
            .getRequestDispatcher(page);
        dispatcher.forward(request, response);
}
    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-30T03:12:22.953

我发现 using[`HttpServletRequest#getServletPath()`](http://docs.oracle.com/javaee/5/api/javax/servlet/http/HttpServletRequest.html#getServletPath%28%29)正是我需要的，所以我不需要解析任何东西！

```
public void doGet(HttpServletRequest request, HttpServletResponse response)
        throws ServletException, IOException {
    System.out.println("received HTTP GET");

    String action = request.getServletPath();

    if (action.equals("/account"))
    {
        // the account page
        dispatch(request, response, "/content/account.jsp");    
    }
    else if (action.equals("/edit")) 
    {
        // the popup edit page
        dispatch(request, response, "/content/edit.jsp");
    }
}

protected void dispatch(HttpServletRequest request,
    HttpServletResponse response, String page)
        throws javax.servlet.ServletException, java.io.IOException {
    RequestDispatcher dispatcher = getServletContext()
            .getRequestDispatcher(page);
    dispatcher.forward(request, response);
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-29T07:57:46.437

你应该使用`httpServletRequest.getPathInfo()`.

**这就是文档所说的：**

```
java.lang.String getPathInfo()

Returns any extra path information associated with the URL the client sent when it
made this request. The extra path information follows the servlet path but 
precedes the query string and will start with a "/" character.

This method returns null if there was no extra path information.

Same as the value of the CGI variable PATH_INFO.

Returns:
    a String, decoded by the web container, specifying extra path information that
    comes after the servlet path but before the query string in the request URL; 
    or null if the URL does not have any extra path information 
```

在您的情况下，如果`AccountServlet`映射到`/accounts/*`它会给出如下值：

*   对于 url`/accounts/account`它返回`/account`
*   对于 url`/accounts/edit`它返回`/edit`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-29T03:15:07.237

我想你可能想看看`request.getRequestURI()`然后获取该 URI 的最后一部分：

```
String uri = request.getRequestURI().getPath();
String action = uri.substring(0, uri.lastIndexOf('/'));
... 
```

我没有检查过这段代码。小心边缘情况。

我不确定我是否理解你的问题。无论如何，希望这会有所帮助。

# jquery - ColorBox iframe rel (群展)

> ID：11255404
> 
> 赞同：0
> 
> 时间：2012-06-29T02:42:21.220
> 
> 标签：jquery, iframe, colorbox, rel

我真的被卡住了..现在一直坐在这个代码上..尝试用 ColorBox 制作一个画廊，看起来很不错..我只有一个问题..使用 iframe 时我无法让它成为一个组...

[http://www.lani.dk/thomas/temp/iframe_problem.zip](http://www.lani.dk/thomas/temp/iframe_problem.zip)

地点

```
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>-</title>

 <link media="screen" rel="stylesheet" href="css/colorbox.css" />
<script src="scripts/jquery.min.js"></script>
<script src="scripts/jquery.colorbox.js"></script>
<script>
function showColorBox(imageURL) {
$.fn.colorbox({ opacity: .6, open: true, href: imageURL });
}
</script>

 </head>
<body>
<iframe src="iframe.asp" name="iframename" width="400" height="400" frameborder='0'     id="iframename">
<p>Your browser does not support iframes.</p>
</iframe>
</body>
</html> 
```

框架

```
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>-</title>

<style type="text/css">
body {
background-color: #999;
}
</style>

<script src="scripts/jquery.min.js"></script>
<script src="scripts/jquery.colorbox.js"></script>
<script>
$(document).ready(function () {
 $('a.colorbox').click(function (event) {
    event.preventDefault(); 
    parent.showColorBox($(this).attr("href"));
});
});
</script>

</head>
<body>

<p><a href="images/gallery/pic1.jpg" class="colorbox" rel="group1">pic1</a></p>
<p><a href="images/gallery/pic2.jpg" class="colorbox" rel="group1">pic2</a></p>
<p><a href="images/gallery/pic3.jpg" class="colorbox" rel="group1">pic2</a></p>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T15:45:43.027

请记住，ColorBox 会在页面加载时扫描 DOM 以获取要呈现的资产。我怀疑该插件在 iframe 中看不到资产，因此无法识别它们。

PS。喜欢糖果般的嘴唇。

# javascript - isNaN 在 IE 和 Chrome 中得到不同的结果

> ID：11255405
> 
> 赞同：-1
> 
> 时间：2012-06-29T02:42:21.730
> 
> 标签：javascript, javascript-events

我需要在网页的每个链接中绑定onclick函数，所以我使用了这个函数

```
var links = document.getElementsByTagName('a');// total 5 links
for(var key in links){
   //always be true in IE, But just be true from second latest in chrome
   alert(isNaN(parseInt(key)));
   if(isNaN(parseInt(key))){
      break;
   }else{
      ...
   }
} 
```

请帮忙，谢谢

更新：似乎是for（var key in links）的问题，当在IE中时，键成为链接的Id，但它只是chrome中的数字

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T02:46:16.503

您正在枚举锚标签之外的其他内容，其中一些内容应该是`NaN`. 使用常规`for`循环：

```
for(var i=0; i<links.length; i++) {
    // do something with links[i], 
    // which is guaranteed to be
    // an anchor tag
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-29T02:46:18.263

如果您正在使用 jQuery（我强烈建议您这样做），请使用该`$.isNumeric()`函数。

您还应该`document.getElementsByTagName`用这样的 jQuery 选择器替换

```
$('a').each(function(index, tag) {
    if($.isNumeric($(tag.attr('SOMEATTRIBUTE'))) {
        // do whatever you want here
    } else {
        // do the other condition here
    }
}); 
```

# php - 如何正确显示下表

> ID：11255408
> 
> 赞同：1
> 
> 时间：2012-06-29T02:43:07.463
> 
> 标签：php, html

我有一张表，目前显示如下：

```
Question        OptionType
What is 2+2
What is 3+3
What is 4+4
A-D
A-C
A-E 
```

但我不希望它像这样明显地显示，问题应该放在“问题”标题下，选项类型应该放在“选项类型”标题下。如何让表格显示如下：

```
Question        OptionType
What is 2+2     A-D
What is 3+3     A-C
What is 4+4     A-E 
```

下面是代码：

```
echo "<table>
  <tr>
  <th class='questionth'>Question</th>
  <th class='optiontypeth'>Option Type</th>
  </tr>";
  foreach ($searchResults as $question) {
    echo '<tr><td>'.htmlspecialchars($question).'</td></tr>';
          }
  foreach ($searchOption as $option) {
    echo '<tr><td>'.htmlspecialchars($option).'</td></tr>';
}
  echo "</table>"; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T02:46:22.433

构建数组时，将它们合并在一起，使其看起来像

```
$results[] = array('question' => $question, 'type'=> $type) 
```

那么你会做

```
foreach($results as result) {
            echo '<tr><td>'.htmlspecialchars($result['question']).'</td>';
            echo '<td>'.htmlspecialchars($result['type']).'</td></tr>';
    } 
```

但是使用你给我的代码，我会这样做

```
echo "<table>
  <tr>
  <th class='questionth'>Question</th>
  <th class='optiontypeth'>Option Type</th>
  </tr>";
  foreach ($searchResults as $key=>$question) {
    echo '<tr><td>'.htmlspecialchars($question).'</td>';
    echo '<td>'.htmlspecialchars($searchOption[$key]).'</td></tr>';
  }

  echo "</table>"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T02:51:13.900

表我们不是用于此类应用程序的正确标签。相反，您应该使用在语义上更适用的定义列表。

```
<dl>
    <dt>Question</dt><dd>OptionType</dd>
    <dt>What is 2+2</dt><dd>A-D</dd>
    ....
</dl> 
```

见： http: [//www.maxdesign.com.au/articles/definition/](http://www.maxdesign.com.au/articles/definition/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-29T02:51:45.013

您不能设置为 foreach 单独打印这些变量，我认为这样就可以了，我只是希望每个变量具有相同的长度并具有数字键

```
for($i=0;$i<count($searchOption);$i++){
    echo '<tr><td>'.htmlspecialchars($searchResults[$i]).'</td><td>'.htmlspecialchars($searchOption[$i]).'</td></tr>';
} 
```

# javascript - 有什么方法可以使javascript中的嵌套回调代码更具可读性？

> ID：11255410
> 
> 赞同：0
> 
> 时间：2012-06-29T02:43:28.467
> 
> 标签：javascript, node.js, syntax, callback

考虑这个婴儿简单的代码

```
pg.connect( {
    user: 'hhope',
    password: '...',
    port: 5432,
    host: '/var/run/postgresql',
    database: 'phiddler' },
  function( err, client ) {
    client.query(
      "select count(1) as ct from pg_prepared_statements",
      function( err, results ) {
        console.log( 'prepared statement count: '+results.rows[0].ct );
        client.query( {
                    name: 'test2' ,
                    text: "insert into t1( c2 ) values( 'q1')" },
          function( err, result ) {
            console.log( 'inserted t1' );
            client.query(
              "select count(1) as ct from pg_prepared_statements",
               function( err, results ) {
                  console.log( 'prepared statement count: '+results.rows[0].ct );
               } );
           }
        );
      }
    );
  }
); 
```

如果按程序写成

```
pg = new PG(...);
client = new pg.client();
console.log( client.col( "select ..." ) );
client.prepare( 'test2', "insert into t1( c2 ) values( 'q1')" );
console.log( client.col( "select ..." ) ); 
```

在我看来，后者更具可读性和可维护性。

是否有某种折衷方法可以使标准缩进回调样式更具可读性？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T03:51:29.590

您想使用[`async`](https://github.com/caolan/async/)库的[`waterfall`](https://github.com/caolan/async/#waterfall)机制：

```
var async = require('async');

async.waterfall([
    pg.connect.bind(this, {
        user: 'user', password: 'pass', port: 5432, host: '/somewhere/', database: 'db'
    }),
    function(client, callback) {
        client.query('select * from foo', callback)
    }
], function(err, results) {
    console.log(results);
}); 
```

在 ES5 中`bind`添加到s的方法与 async 库结合使用*非常*有用，因为列表中的最后一个参数通常是回调，而更早的值通常在进入链之前就已经知道了。`Function`

 ** * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T03:59:49.893

“可读”是一个意见问题，但你可以这样做：

```
var iter = function(cb) {
   var v = Array.prototype.slice.call(arguments);
   var f = function() {
        var g = v.shift();
        g && g(f);
   };

   f();
};

iter(function(cb) {
        console.log('in f1');
        cb();
     },
     function(cb) {
        console.log('in f2');
        cb();
     }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-29T03:40:42.603

程序变体并不是真正等效的-我假设它是同步的，而原始变体可能不是。

如果您不需要关闭变量，则可以使用命名函数。就像是：

```
function f2(){}
function f1() {
    client.query("select count(1) as ct from pg_prepared_statements", f2);
}
pg.connect( {
    user: 'hhope',
    password: '...',
    port: 5432,
    host: '/var/run/postgresql',
    database: 'phiddler' },
    f1
); 
```*

# ruby-on-rails - 将消息（“介绍”）定向到某个用户

> ID：11255417
> 
> 赞同：0
> 
> 时间：2012-06-29T02:44:24.413
> 
> 标签：ruby-on-rails, ruby

简单的 rails 应用程序：我有 2 个模型，用户和介绍 [这只是一条消息]。每条消息都有一个发送者（用户）和一个接收者（用户）。这是介绍模型（省略验证）：

```
class Intro < ActiveRecord::Base
  attr_accessible :content

  belongs_to :sender, class_name: "User"
  belongs_to :receiver, class_name: "User"

  default_scope order: 'intros.created_at DESC'
end 
```

现在是用户模型：

```
class User < ActiveRecord::Base
    attr_accessible :name, :email, :password, :password_confirmation
    has_secure_password

    has_many :sent_intros, foreign_key: "sender_id", dependent: :destroy, class_name: "Intro"
    has_many :received_intros, foreign_key: "receiver_id", dependent: :destroy, class_name: "Intro"

    before_save { |user| user.email = email.downcase }
    before_save :create_remember_token

    private

        def create_remember_token
            self.remember_token = SecureRandom.urlsafe_base64
        end
end 
```

该应用程序当前允许当前用户将介绍提交到表单中并与该消息相关联（主页显示 sent_intros）。但是，当涉及到 received_intros 函数时，我可以在 intros_controller/create 方法中使用一些帮助。如何让当前用户创建的介绍与（即发送给）另一个特定用户相关联，以便我可以将其路由到收件人的收件箱？谢谢你。

```
class IntrosController < ApplicationController
  before_filter :signed_in_user

  def create
    @sent_intro = current_user.sent_intros.build(params[:intro])
    if @sent_intro.save
        flash[:success] = "Intro sent!"
        redirect_to root_path
    else
        render 'static_pages/home'
    end
  end

  def index
  end

  def destroy
  end
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T02:51:21.457

看起来您不允许 current_user 将 a 分配给`receiver`他们创建的介绍？您需要在表单上输入一个允许用户设置有效的输入`receiver_id`，并且您需要将 receiver_id 添加到 attr_accessible：

```
class Intro < ActiveRecord::Base
  attr_accessible :content, :receiver_id 

  #Rest of your code
end 
```

这样，当您`intro`创建时，它将与发送者和接收者正确关联。然后，您将能够使用该方法访问 current_user 收到的介绍`current_user.received_intros`

您可能希望向`Intro`模型添加一些验证，以确保接收者和发送者都存在。

编辑：您可以在评论中将 receiver_id 字段添加到您的代码中，如下所示：

```
<!-- In your first view -->
<% provide(:title, 'All users') %> 
<h1>All users</h1> 
<%= will_paginate %> 
<ul class="users"> 
  <%= @users.each do |user| %> 
    <%= render user %> 
    <%= render 'shared/intro_form', :user => user %>  <!-- make sure you pass the user to user intro_form -->
  <% end %> 
</ul> 
<%= will_paginate %> 

<!-- shared/intro_form -->
<%= form_for(@sent_intro) do |f| %> 
  <%= render 'shared/error_messages', object: f.object %> 
  <div class="field">  
    <%= f.text_area :content, placeholder: "Shoot them an intro..." %> 
  </div> 
  <%= observe_field :intro_content, :frequency => 1, :function => "$('intro_content').value.length" %> 
  <%= f.hidden_field :receiver_id, :value => user.id %> <!-- Add this to pass the right receiver_id to the controller -->
  <%= f.submit "Send intro", class: "btn btn-large btn-primary" %> 
<% end %> 
```

# java - >> 和 >>> 在 Java 中是什么意思？

> ID：11255420
> 
> 赞同：9
> 
> 时间：2012-06-29T02:45:06.750
> 
> 标签：java

> **可能重复：**
> [>>> 和 >> 之间的区别](https://stackoverflow.com/questions/2811319/difference-between-and)
> [java 中的“>>>”是什么意思？](https://stackoverflow.com/questions/9444242/what-does-in-java-mean)

在 Java`>>`中是什么意思？`>>>`

为什么`-1 >> 2`和`-1 >>> 2`有不同的结果？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-29T02:47:15.180

`>>`是一个有符号右移运算符，它将位模式向右移动。 `>>>`是一个无符号右移运算符，它将零移到最左边的位置。请参阅[Oracle 文档。](http://docs.oracle.com/javase/tutorial/java/nutsandbolts/op3.html)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-06-29T02:50:33.650

在java中，有两种类型的右移。>>> 将附加 0 以填充正数和负数的空格（逻辑右移），而 >> 将附加 1 如果负数和 0 如果正数（符号扩展）。

# internet-explorer-9 - Facebook Canvas IE 9 iFrame 安全问题

> ID：11255425
> 
> 赞同：0
> 
> 时间：2012-06-29T02:46:17.293
> 
> 标签：internet-explorer-9, facebook-canvas

有时，我会注意到 IE9 不会显示我的应用程序，它会显示以下消息：

“为了帮助保护您输入本网站的信息的安全，此内容的发布者不允许将其显示在框架中。”

它只是偶尔发生，如果我刷新整个画布窗口，它通常会消失。关于为什么会发生这种情况的任何想法？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T09:49:51.940

当 Web 服务器发送一个值为or的 HTTP 响应标头时，这*通常*会发生（并且应该会）——但如果您不是为您的应用程序这样做，那么它必须是其他东西。或者您是否在您网站的其他地方这样做，并且在某些条件下，您的应用页面也可能发生这种情况？`X-Frame-Options``DENY``SAMEORIGIN`

# matlab - MATLAB中三个矩阵的同时乘法

> ID：11255428
> 
> 赞同：0
> 
> 时间：2012-06-29T02:46:23.800
> 
> 标签：matlab, matrix, matrix-multiplication

这是一个非常愚蠢的问题……我知道。但我真的不知道如何实现附加的公式。这是一个例子：

对于输入数据：

```
L_i =

    0.1022         0         0
         0    0.1656         0
         0         0    2.7321 
```

和：

```
U_i =

    0.7514    0.3104    0.5823
   -0.6513    0.4901    0.5793
   -0.1056   -0.8145    0.5704 
```

如何获得以下结果？

```
1,1 = (2.7321*(+0.7514)*(+0.7514) + 0.1656*(+0.3104)*(+0.3104) + 0.1022*(+0.5823)*(+0.5823))
1,2 = (2.7321*(+0.7514)*(-0.6513) + 0.1656*(+0.3104)*(+0.4901) + 0.1022*(+0.5823)*(+0.5793))
2,1 = (2.7321*(-0.6513)*(+0.7514) + 0.1656*(+0.4901)*(+0.3104) + 0.1022*(+0.5793)*(+0.5823))
... 
```

![在此处输入图像描述](../Images/b775187235e54ee569fa5e53e1ba55b2.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T03:51:44.363

我相信你正在寻找的是

```
 A = U_i*diag(flipud(diag(L_i)))*U_i' 
```

然后矩阵 L_i 和 U_i 分别包含 A 的[特征值和特征向量](http://en.wikipedia.org/wiki/Eigendecomposition_of_a_matrix)。

# python - 用于使用进度条播放声音数据的 Python 模块？

> ID：11255432
> 
> 赞同：3
> 
> 时间：2012-06-29T02:46:38.260
> 
> 标签：python, audio

我有一组原始声音数据样本，我正在尝试制作一个图形播放器，在播放时显示波形以及音频的进度。

我可以使用 matplotlib 轻松绘制它，并且可以使用 audiolab 播放它，但 audiolab 似乎无法获取播放头的“当前位置”。

有没有能够做到这一点的模块？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T06:01:03.497

如果您只想要一个进度条而不是“查找”功能 - 只想显示完成和剩余的工作量，您可以使用 tkintr 轻松构建它并与您现在拥有的任何东西集成。

除此以外，

基本上有两个模块可以为您提供进度条。

> [http://code.google.com/p/py-audio-gui/wiki/PageName](http://code.google.com/p/py-audio-gui/wiki/PageName)

PyAudio 只播放 MP3。主要缺点。但是更容易使用。

还有一个名为 Snack 的模块，它支持许多不同的格式，并且还具有进度条功能。

这有点难以使用，但我听说他们最近确实提供了一些很好的教程/示例。

因此，如果您愿意，我建议您转向小吃。

干杯。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-01T11:31:41.880

如果您知道音频帧的数量和采样率，则不需要 audiolab 告诉您当前位置，您可以计算它。

`Sndfile.frames / Sndfile.samplerate`将以秒为单位为您提供文件的持续时间，然后您可以将其与自声音文件开始计算相对当前位置以来经过的时间结合使用。说明原理：

```
import time

start_time = time.time()
duration_s = sndfile.frames / sndfile.samplerate

while 1:
    elapsed_time = time.time() - start_time
    current_location = elapsed_time / float(duration_s)
    if current_location >= 1:
         break
    time.sleep(.01) 
```

要在实践中实现这一点，您可以使用[Python 线程](http://docs.python.org/library/threading.html)，异步播放声音文件，然后在父线程中计算当前位置（如上）。要处理播放失败的情况，请将调用包装`scikits.audiolab.play()`在异常处理程序中，然后`threading.Event`在 play() 调用失败时将事件传递给父线程。

在父线程中，您需要`event.isSet()`相应地检查：

```
if current_location >= 1 or fail_event.isSet():
    break 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2018-05-25T01:18:06.103

我找到了一个很好的代码，它能够运行你正在寻找的东西。这是链接： [https](https://gist.github.com/deeplycloudy/2152643) ://gist.github.com/deeplycloudy/2152643 我无法运行作者的代码，但我在该存储库下方的评论中进行了一些更正。

萨鲁多斯！！

# facebook - 检查哪些用户喜欢 Facebook 页面

> ID：11255435
> 
> 赞同：2
> 
> 时间：2012-06-29T02:46:56.500
> 
> 标签：facebook, facebook-graph-api

我已经研究了几天，我看到了很多类似问题的答案，不幸的是，他们都是“不，你不能那样做”。因此，也许您可​​以帮助我找到更有效的方法，或者您有更好的答案。

我在一个活动中运行游戏。当用户注册我的游戏时，他们将授权我的 Facebook 应用程序。他们在我的比赛中因为做某些事情而获得积分。他们获得积分的其中一件事是喜欢所选的 Facebook 页面。

他们不喜欢通过我控制的任何界面的页面，所以我将在后台运行一个进程，检查我的授权用户是否喜欢该页面。

不过，我将有成千上万的人玩这个游戏。我为他们每个人都有一个 access_token，我知道我可以使用他们的 access_token 获取 Person X 的喜欢列表，但是获取 10,000 多个喜欢列表来检查他们是否喜欢该页面似乎很荒谬......尤其是因为如果他们不喜欢它，我不能把他们从名单上划掉。我需要每隔几分钟检查一次活动的持续时间，看看他们是否喜欢这个页面并给他们积分。一旦他们喜欢该页面，我就不再需要继续检查他们，但这仍然需要大量请求。

有没有办法可以确定我拥有个人 access_tokens 的 10k+ 用户中的哪些人喜欢我的页面？

或者我可以获得最近喜欢特定页面的人的列表吗？

还有其他建议吗？

编辑：作为我的 FB 页面的管理员，我可以使用该网站点击访问，我可以看到所有喜欢我页面的人，所以我觉得应该有某种方式以编程方式访问这些信息。我只是错过了什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T05:05:43.700

这个问题似乎是使用[FQL](https://developers.facebook.com/docs/reference/fql/)的候选者。有一个称为表的表[`page_fan`](https://developers.facebook.com/docs/reference/fql/page_fan/)充当 和 表之间的连接`user`表`page`。您可以为每个用户运行查询以查看所选页面是否存在行。例如：

```
SELECT 1 FROM page_fan WHERE uid = me() and page_id = 8484927467 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-29T08:48:22.080

> 我在一个活动中运行游戏。当用户注册我的游戏时，他们将授权我的 Facebook 应用程序。他们在我的比赛中因为做某些事情而获得积分。他们获得积分的其中一件事是喜欢所选的 Facebook 页面。

请澄清一些细节：

*   您的游戏应用程序是在 Facebook 或其他地方作为**页面标签应用程序运行的吗？**

*   如果它在页面选项卡中运行，那也是他们需要喜欢的页面吗？

如果是这种情况，如果用户自动喜欢 signed_request 参数中的页面，您将获得信息，无需进一步的 API 查询等。

> 获取 10,000 多个喜欢的列表来检查他们是否喜欢该页面似乎很荒谬......

但请记住，您不必查看每个用户的点赞*列表*- 您可以通过查询 来询问某人是否喜欢特定页面`/userid/likes/pageid`。（我知道，这仍然是每个用户的一个请求。）

> 我需要每隔几分钟检查一次活动的持续时间，看看他们是否喜欢这个页面并给他们积分。一旦他们喜欢该页面，我就不再需要继续检查他们，但这仍然需要大量请求。

您是否知道[JavaScript SDK 中将事件绑定到单击您页面上的点赞按钮的用户的方法](https://developers.facebook.com/docs/reference/javascript/FB.Event.subscribe/)？也许您可以使用它——在您的站点中实现点赞按钮，捕捉用户使用该按钮点赞页面的事件……然后通过 AJAX 处理您的服务器上发生了点赞的事实，可能会针对该特定请求再发出*一个*请求用户验证不涉及“作弊”（有人自己调用您的 AJAX 端点，实际上并没有喜欢）……您应该拥有您想要的，对吗？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-06-01T15:52:58.467

大家好，在您的页面设置中转到“禁止用户”面板，然后选择喜欢您的页面的人。谢谢

# haskell - 在 Data.Map.Map 上实现 Functor 时“没有 (Ord k) 的实例”

> ID：11255436
> 
> 赞同：5
> 
> 时间：2012-06-29T02:47:01.887
> 
> 标签：haskell, functional-programming, functor, tail-recursion

我正在尝试通过 Data.Map.Map 实现 Functor fmap，但出现错误。我确信我不需要将 Map 与 List 相互转换以使其正常工作，但这是迄今为止我想出的最好的。

```
class Functor' f where
    fmap' :: (a -> b) -> f a -> f b

instance Functor' (Map.Map k) where
    fmap' f m
        | Map.null m = Map.empty
        | otherwise = let x:xs = Map.toList m
                          mtail = Map.fromList xs
                          a = fst x
                          b = snd x
                      in  Map.insert a (f b) (fmap f mtail) 
```

错误：

```
No instance for (Ord k)
  arising from a use of `Map.fromList'
In the expression: Map.fromList xs
In an equation for `mtail': mtail = Map.fromList xs
In the expression:
  let
    x : xs = Map.toList m
    mtail = Map.fromList xs
    a = fst x
    ....
  in Map.insert a (f b) (fmap f mtail) 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T03:17:00.133

该错误是由于未将 Ord 谓词分配给类型变量 k。只需这样做：

```
instance Ord k => Functor' (Map.Map k) where 
```

# javascript - 我在 Javascript 中的以下 try、throw 和 catch 异常处理程序做错了什么？

> ID：11255437
> 
> 赞同：1
> 
> 时间：2012-06-29T02:47:11.980
> 
> 标签：javascript

我有以下代码可以在不使用 throw 的情况下工作，但是当我使用 throw 关键字时，它不会返回适当的消息。我究竟做错了什么？

**更新**

我故意调用该函数`addme`，而不是`addMe`因为我想捕获错误消息。

**代码 - 无需使用即可`throw`**

```
function addMe() {
        var a = 1;
        var b = 2;
        return a+b;
    }

    try {
        addme();
    }

    catch (err) {
        document.write(err.name + " " + err.message);
    } 
```

**代码 - 这不起作用**

```
function addMe() {
        var a = 1;
        var b = 2;
        return a+b;
    }

    try {
        addme();
        throw "error 1";
    }

    catch(err) {
        if(err ==  "error 1") {
            document.write("This is a custom message for error 1");
        }
    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-29T02:52:25.427

`addme`是未定义的，所以你永远不会达到你的`throw`陈述。（具体来说，[`ReferenceError`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/ReferenceError)调用时首先抛出a`addme`而不是`addMe`）

要记住的关键是程序是自上而下读取的——直到你注入一个`GOTO`（错误、调用函数、从函数返回等）将你发送到其他地方。一旦您[`GOTO Raptor`](http://xkcd.com/292/)不保证调用该行下方的行。

```
try {
    addme(); // Reference Error Thrown - go to catch statement
    throw "error 1"; // We never get here
}

catch(err) {
    // Never true - err is always a ReferenceError.
    if(err ==  "error 1") {
        document.write("This is a custom message for error 1");
    } 
```

要处理任何类型的错误，您可以检查`err instanceof TYPE_OF_ERROR`：

```
catch(err) {
    if(err instanceof ReferenceError) {
        document.write("This is a custom message for ReferenceErrors");
    }
} 
```

（请记住，[字符串不是错误](http://www.devthought.com/2011/12/22/a-string-is-not-an-error/)）

# android - 在线交易：asynctask vs service

> ID：11255438
> 
> 赞同：1
> 
> 时间：2012-06-29T02:47:13.537
> 
> 标签：android, android-asynctask, android-service

给定用户必须使用应用程序执行在线交易（例如在线支付）的用例。

这应该在不阻塞 UI 的情况下完成，所以我打算使用 AsyncTask。问题在于以下场景： - 用户在交易过程中旋转手机或接到来电，从而导致活动被破坏。

如果我理解正确， asynctask 现在有一个对陈旧对象的引用。所以交易完成后，没有办法通知用户结果。是吗？

应该改用服务吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T03:05:38.613

### [什么是服务？](http://developer.android.com/reference/android/app/Service.html)

> 关于 Service 类的大多数困惑实际上都围绕着它不是什么：
> 
> *   服务不是一个单独的进程。Service 对象本身并不意味着它在自己的进程中运行；除非另有说明，否则它在与其所属的应用程序相同的进程中运行。
> *   服务不是线程。它本身并不是一种脱离主线程工作的方法（以避免应用程序无响应错误）。

### [你应该使用服务还是线程？](http://developer.android.com/guide/components/services.html#Basics)

> 服务只是一个组件，即使用户没有与您的应用程序交互，它也可以在后台运行。因此，只有在需要时才应该创建服务。
> 
> 如果您需要在主线程之外执行工作，但仅在用户与您的应用程序交互时执行，那么您可能应该创建一个新线程而不是服务。例如，如果您想播放一些音乐，但仅在您的活动运行时，您可以在 onCreate() 中创建一个线程，在 onStart() 中开始运行它，然后在 onStop() 中停止它。还可以考虑使用 AsyncTask 或 HandlerThread，而不是传统的 Thread 类。有关线程的更多信息，请参阅进程和线程文档。
> 
> 请记住，如果您确实使用服务，默认情况下它仍会在应用程序的主线程中运行，因此如果它执行密集或阻塞操作，您仍应在服务中创建一个新线程。

### [当用户旋转手机时，是什么导致活动被破坏？](http://developer.android.com/reference/android/app/Activity.html#ConfigurationChanges)

> 如果设备的配置（由 Resources.Configuration 类定义）发生更改，则显示用户界面的任何内容都需要更新以匹配该配置。因为 Activity 是与用户交互的主要机制，所以它包括对处理配置更改的特殊支持。
> 
> 除非您另有说明，否则配置更改（例如屏幕方向、语言、输入设备等的更改）将导致您当前的活动被破坏，并通过 onPause()、onStop() 和onDestroy() 视情况而定。如果活动在前台或对用户可见，则在该实例中调用 onDestroy() 后，将创建该活动的新实例，使用前一个实例从 onSaveInstanceState(Bundle) 生成的 saveInstanceState。

### [解决由于 Activity 重新创建而导致的 AsyncTask 中断的可能解决方法：](http://developer.android.com/reference/android/app/Activity.html#ConfigurationChanges)

> 在某些特殊情况下，您可能希望根据一种或多种类型的配置更改绕过重新启动活动。这是通过清单中的 android:configChanges 属性完成的。对于您说您在那里处理的任何类型的配置更改，您将收到对当前活动的 onConfigurationChanged(Configuration) 方法的调用，而不是重新启动。但是，如果配置更改涉及您未处理的任何内容，则活动仍将重新启动，并且不会调用 onConfigurationChanged(Configuration)。

# silverlight - Silverlight Out-of-Browser 应用程序不会使用 MainWindow.Close 方法关闭

> ID：11255442
> 
> 赞同：8
> 
> 时间：2012-06-29T02:47:32.300
> 
> 标签：silverlight, silverlight-5.0

我有一个不受[信任的 Silverlight 5.1.10411.0](http://msdn.microsoft.com/en-us/library/ee721083%28v=vs.95%29) [Out-of-Browser](http://msdn.microsoft.com/en-us/library/dd550721%28v=vs.95%29)应用程序，我正在尝试使用[App.Current.MainWindow.Close](http://msdn.microsoft.com/en-us/library/system.windows.window.close(v=vs.95).aspx)方法关闭该应用程序。根据文档，如果以下条件之一为真，我只能使用此机制：

*   这是一个受信任的应用程序（我的应用程序不是这样）
*   在 Application.Startup 事件完成之前（我的应用程序不是这样）
*   响应用户发起的操作，例如，在按钮 Click 事件处理程序中（这就是我要开始工作的内容）

在我试图让它工作的过程中，我让事情变得非常简单，并直接在按钮单击事件处理程序后面的代码中调用该方法，如下所示，但它没有任何效果。

```
void closeButton_Click(object sender, RoutedEventArgs e)
{
    var mainWindow = Application.Current.MainWindow;
    mainWindow.Close();
} 
```

当我附加调试器并设置“抛出异常时中断”时，我可以看到异常

> SecurityException：除非应用程序具有提升的权限，或者代码是通过用户启动的操作调用的，否则不允许访问属性或方法调用。

任何想法为什么我的代码不被视为用户发起的操作？

我尝试在 XAML 和代码隐藏中附加事件处理程序（不是同时）

```
 <Button x:Name="closeButton" Content="Close" Click="closeButton_Click" /> 
```

或者

```
 closeButton.Click += closeButton_Click; 
```

没有成功。我已经非常仔细地阅读了[用户发起的事件](http://msdn.microsoft.com/en-us/library/cc189018%28v=VS.95%29.aspx#fullscreen_mode_and_events)文档，并且看不出为什么我的代码不被认为是用户发起的。我已经在调试和发布模式以及没有成功连接调试器的情况下尝试过这个。如果我将“在浏览器外运行时需要提升信任”更改为 true，则关闭调用将按预期工作。

我已经*重新定义了我的应用程序要求*来解决这个问题，但我真的很想了解我做错了什么;-)

**更新**：[SonOfPirate](https://stackoverflow.com/users/173281/sonofpirate)的回答表明此方法的文档不准确，但我不相信。使用反射工具[dotPeek](http://www.jetbrains.com/decompiler/)抛出异常的方法是

```
private void CheckForPermissions()
{
  if (!Application.Current.HasElevatedPermissions && !XcpImports.IsUserInitiatedAction() && Application.Current.ApplicationStarted)
    throw new SecurityException(Resx.GetString("Window_AccessNotAllowed"));
} 
```

我觉得这读起来有点混乱，所以我已经模拟了代码并为它编写了单元测试，如此[要点](https://gist.github.com/3057166)所示，正如你从结果中看到的那样，我应该能够从不受信任的应用程序调用 close，只要它是用户发起。 ![窗口关闭安全测试结果](../Images/f702af2c78923e506cbb3cfd230fddd5.png)

安全异常消息

> 除非应用程序具有提升的权限，或者代码是通过用户启动的操作调用的，否则不允许访问属性或方法调用。

还表明它应该是可能的，所以我回到问题 - 为什么这段代码不被认为是用户启动的？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-04T13:24:34.653

The mistake is in the very first paragraph when you state that you "can only use this mechanism if one of these conditions is true:" Re-read the MS documentation a little closer and you will see that they do not say "one" of these conditions. Here is the exact text from the MS reference page for the [Close method](http://msdn.microsoft.com/en-us/library/system.windows.window.close%28v=vs.95%29.aspx):

> You can call this method only in the following cases:
> 
> *   In response to a user-initiated action, for example, in a button Click event handler.
> *   Before the Application.Startup event has completed (that is, in an IApplicationService.StartService method, an IApplicationLifetimeAware.Starting method, or a Startup event handler).
> *   In a trusted application.

As you have seen, you need to enable elevated trust.

**UPDATE**

I concede that the wording used by Microsoft is a bit misleading with either of the first two cases required in combination with the third. Perhaps it would be clearer if worded more accurately as:

> You can call this method only in a trusted application in either of the following cases:
> 
> *   In response to a user-initiated action, for example, in a button Click event handler.
> *   Before the Application.Startup event has completed (that is, in an IApplicationService.StartService method, an IApplicationLifetimeAware.Starting method, or a Startup event handler).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-10T06:05:30.087

**如何在 silverlight 中提升 webBrowser 控件的权限：**

1- [http://msdn.microsoft.com/en-us/library/gg192793%28v=vs.96%29.aspx](http://msdn.microsoft.com/en-us/library/gg192793%28v=vs.96%29.aspx) *主题：* **启用浏览器内受信任的应用程序**

2- [http://www.johnpapa.net/digitally-signing-a-xap-silverlight/](http://www.johnpapa.net/digitally-signing-a-xap-silverlight/) *主题：* **对 XAP Silverlight 进行数字签名**

3- [http://chainding.wordpress.com/2012/09/19/silverlight-5-trusted-applications/](http://chainding.wordpress.com/2012/09/19/silverlight-5-trusted-applications/) *主题：* **添加所需的注册表设置** **签署您的 XAP 文件** **部署证书**

并确保签名证书部署在本地机器和当前用户的受信任的发布者中。

# ios - 在哪里放置模型的方法？

> ID：11255443
> 
> 赞同：0
> 
> 时间：2012-06-29T02:47:38.127
> 
> 标签：ios, core-data

我是 Core Data 的新手，所以我想我会在这里问这个。

我有一个模型，用户记录，目前，它具有以下内容：

```
@property (nonatomic, retain) NSDate * dateCreated;
@property (nonatomic, retain) NSData * audioData;
@property (nonatomic, retain) NSString * name; 
```

我真正想要的是有一个方法，称为“播放”，来播放录音。现在，我将它放在我的视图控制器中，但这显然很糟糕，因为我在两个控制器中都有相同的方法。我已经环顾四周（并且会继续寻找）但无法弄清楚 - 它应该去哪里？我应该有一个模型控制器（经理）吗？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T02:56:12.520

您的控制器应该持有模型（即实例变量或属性），以便当用户单击视图中的按钮（应该有连接到控制器的插座）时，您可以调用所需的消息.

只需将 play 方法添加到您的模型中（在头文件中，因此它是公共的）并让控制器在用户与视图交互时调用该方法。

# coordinates - 返回坐标的 OpenNI 范围

> ID：11255445
> 
> 赞同：2
> 
> 时间：2012-06-29T02:48:00.750
> 
> 标签：coordinates, coordinate-systems, openni

我正在使用 OpenNI 的 HandsGenerator 类，我想用它来跟踪用户的动作。

我已经注册了自己的回调来获取手的更新位置，一切正常，除了我找不到返回的坐标系等信息`XnPoint3D`。是否有一个规范可以精确地指定 X、Y、Z 范围，也许还有缩放信息（这样我就知道 100 的变化`XnPoint3D`对应`X`于 10 厘米的移动，或其他东西）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T20:08:25.997

HandsGenerator 从传感器返回以毫米为单位的真实世界坐标。这意味着位于深度图中间的深度点的 X 和 Y 将为 0。

100 的变化（X、Y 或 Z）确实是 10 厘米的变化（100 毫米 = 10 厘米）。

X 和 Y 值的范围取决于手点的 Z 值。假设您在深度图的左上角有一个手点（或投影坐标中的 0,0），可能的 X 和 Y 值取决于手的距离。手越近，X 和 Y 越小。要获得手位置的最大范围，您应该选择任意的最大 Z 值，然后找到该距离处深度图角落的 X 和 Y 值。或者换句话说 - 将投影坐标 (0,0,maxZ) 和 (DepthmapWidth,DepthmapHeight,maxZ) 转换为真实世界坐标。所有 Z 值小于 maxZ 的手点将落在这 2 个真实世界坐标之间）

请注意，您可以使用 DepthGenerator::ConvertProjectiveToRealWorld 将投影坐标转换​​为真实世界。

# c# - ASP.NET 枚举下拉列表验证

> ID：11255446
> 
> 赞同：1
> 
> 时间：2012-06-29T02:48:03.160
> 
> 标签：c#, asp.net

我有一个枚举

```
public enum TypeDesc
{
[Description("Please Specify")]
PleaseSpecify,
Auckland,
Wellington,
[Description("Palmerston North")]
PalmerstonNorth,
Christchurch
} 
```

我正在使用 page_Load 上的以下代码将此枚举绑定到下拉列表

```
protected void Page_Load(object sender, EventArgs e)
        {
            if (TypeDropDownList.Items.Count == 0)
            {
                foreach (TypeDesc newPatient in EnumToDropDown.EnumToList<TypeDesc>())
                {
                 TypeDropDownList.Items.Add(EnumToDropDown.GetEnumDescription(newPatient));
                }
            }
        }

public static string GetEnumDescription(Enum value)
        {
            FieldInfo fi = value.GetType().GetField(value.ToString());

            DescriptionAttribute[] attributes =
                (DescriptionAttribute[])fi.GetCustomAttributes(typeof(DescriptionAttribute), false);

            if (attributes != null && attributes.Length > 0)
                return attributes[0].Description;
            else
                return value.ToString();
        }

        public static IEnumerable<T> EnumToList<T>()
        {
            Type enumType = typeof(T);

            // Can't use generic type constraints on value types,
            // so have to do check like this
            if (enumType.BaseType != typeof(Enum))
                throw new ArgumentException("T must be of type System.Enum");

            Array enumValArray = Enum.GetValues(enumType);
            List<T> enumValList = new List<T>(enumValArray.Length);

            foreach (int val in enumValArray)
            {
                enumValList.Add((T)Enum.Parse(enumType, val.ToString()));
            }

            return enumValList;
        } 
```

我的 aspx 页面使用以下代码进行验证

```
 <asp:DropDownList ID="TypeDropDownList" runat="server" >
            </asp:DropDownList>
            <asp:RequiredFieldValidator ID="TypeRequiredValidator" runat="server" ControlToValidate="TypeDropDownList" ErrorMessage="Please Select a City" Text="<img src='Styles/images/Exclamation.gif' />"
                ValidationGroup="city"></asp:RequiredFieldValidator> 
```

但我的验证是接受“请指定”作为城市名称。如果未选择城市，我想停止用户提交。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T02:56:50.173

添加枚举项之前请指定。

```
 TypeDropDownList.Items.Add("Please Specify","");
 foreach (TypeDesc newPatient in EnumToDropDown.EnumToList<TypeDesc>())
 {
    TypeDropDownList.Items.Add(EnumToDropDown.GetEnumDescription(newPatient), newPatient.ToString());
 } 
```

从枚举中删除“请指定”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T03:58:16.590

我整理出来我使用了以下代码

```
if (TypeDropDownList.Items.Count == 0)
            {
                foreach (TypeDesc newPatient in EnumToDropDown.EnumToList<TypeDesc>())
                {
                    string text = EnumToDropDown.GetEnumDescription(newPatient);

                    TypeDropDownList.Items.Add(new ListItem(text, newPatient.ToString()));
                }
            } 
```

验证器为

```
<asp:RequiredFieldValidator ID="TypeRequiredValidator" runat="server" ControlToValidate="TypeDropDownList"
                InitialValue="PleaseSpecify" ErrorMessage="Please Select a City" Text="<img src='Styles/images/Exclamation.gif' />"
                ValidationGroup="city"></asp:RequiredFieldValidator> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-29T02:57:51.877

当明确指定时， DropDownList 可以绑定到[Value](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.listcontrol.datavaluefield.aspx)和[Text属性。](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.listcontrol.datatextfield.aspx)当一个项目的值为空时，这将被您的验证器拾取。

```
<asp:DropDownList ID="TypeDropDownList" runat="server" DataTextField="Text" DataValueField="Value" ></asp:DropDownList> 
```

以及添加项目时：

```
foreach (TypeDesc newPatient in EnumToDropDown.EnumToList<TypeDesc>())
{
   string text = EnumToDropDown.GetEnumDescription(newPatient)),
   TypeDropDownList.Items.Add(new
   {
       Text = text,
       Value = text == "Please specify" ? null : text // should be replaced with a clean solution
   }
} 
```

# bash - >& 是什么意思？

> ID：11255447
> 
> 赞同：98
> 
> 时间：2012-06-29T02:48:03.953
> 
> 标签：bash, io, file-descriptor, io-redirection

我对这个表达有点困惑：

```
gcc -c -g program.c >& compiler.txt 
```

我知道`&>filename`会将 stdout 和 stderr 都重定向到 file `filename`。但在这种情况下，& 符号位于大于号之后。它看起来像它的形式`M>&N`，其中`M`和`N`是文件描述符。

在上面的片段中，do`M=1`和`N='compiler.txt'`? 这与以下具体有何不同：

```
gcc -c -g program.c > compiler.txt     (ampersand removed) 
```

我的理解是每个打开的文件都与大于 2 的文件描述符相关联。这是正确的吗？

如果是这样，作为重定向目标的文件名是否可以与其文件描述符互换？

* * *

## 回答 #1

> 赞同：111
> 
> 时间：2012-06-29T02:57:19.930

这与`&>`. 从 bash 手册页：

> 重定向标准输出和标准错误 该结构允许标准输出（文件描述符 1）和标准错误输出（文件描述符 2）都被重定向到名称为 word 扩展的文件。
> 
> ```
> There are two formats for  redirecting  standard  output  and  standard
> error:
> 
>        &>word
> and
>        >&word
> 
> Of the two forms, the first is preferred.  This is semantically equiva-
> lent to
> 
>        >word 2>&1 
> ```

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2018-06-30T06:39:33.510

## `&>`vs `>&`: 首选版本是`&>`(clobber)

关于：

*   `&>`
*   `>&`

两者都会破坏文件 - 在写入之前将文件截断为 0 字节，就像`> file`在仅 STDIN 的情况下所做的那样。

**但是**，[`bash`手动重定向部分](https://www.gnu.org/software/bash/manual/html_node/Redirections.html)补充说：

> 在这两种形式中，首选第一种。这在语义上等价于
> 
> ```
> >word 2>&1 
> ```
> 
> 使用第二种形式时，*word*不能扩展为数字或`-`. 如果是这样，出于兼容性原因，将应用其他重定向运算符（请参阅下面的复制文件描述符）。

（注意：[两者`zsh`都是等价的](http://zsh.sourceforge.net/Doc/Release/Redirection.html)。）

以第一种 ( ) 形式获取手指记忆是非常好的做法`&>`，因为：

## （附加）不支持使用`&>>`as`>>&``bash`

只有一种附加形式：

> 附加标准输出和标准错误的格式是：
> 
> ```
> &>>word 
> ```
> 
> 这在语义上等价于
> 
> ```
> >>word 2>&1 
> ```
> 
> （请参阅下面的复制文件描述符）。

笔记：

*   鉴于只有一种追加 in 的方法，再次建议使用上面部分中的`&>`over的 clobber 用法。`>&``bash`
*   `zsh`允许两者`&>>`和`>>&`形式。

# blackberry - 黑莓无法关闭屏幕

> ID：11255448
> 
> 赞同：0
> 
> 时间：2012-06-29T02:48:09.767
> 
> 标签：blackberry, screen

我正在使用`finish()`在退出 Android 应用程序之前关闭当前活动。

但是，我无法在黑莓中关闭屏幕。

```
public class Main_AllLatestNews extends MainScreen {

public Main_AllLatestNews() {
    super(USE_ALL_WIDTH);
}

private boolean Dialog() {
    final Bitmap logo = Bitmap.getBitmapResource("icon.png");
    d = new Dialog("确定离开？", new String[] { "是", "否" }, new int[] {
            Dialog.OK, Dialog.CANCEL }, Dialog.OK,
            logo) {
        public void setChangeListener(FieldChangeListener listener) {
            if (d.getSelectedValue() == Dialog.OK) {

            } else {
                d.close();
            }
        };
    };
    d.show();
    return (d.doModal() == Dialog.OK);
}

public boolean onClose(){
    if(Dialog()){
        System.exit(0);
        return true;
    }else
        return false;
}
} 
```

这是我的`Main`课

```
public class Main extends UiApplication {
public static void main(String[] args) {
    Main theApp = new Main();
    theApp.enterEventDispatcher();
}

public Main() {
    pushScreen(new MyScreen());
}

public final class MyScreen extends MainScreen {
    private Bitmap logo = Bitmap.getBitmapResource("logo_page.png");
    private BitmapField bmfield;

    public MyScreen() {
        setTitle("Oriental Daily");

        bmfield = new BitmapField(logo, Field.FIELD_HCENTER
                | BitmapField.FOCUSABLE) {
            protected boolean navigationClick(int status, int time) {
                Main.this.pushScreen(new Main_AllLatestNews());
                Main.this.popScreen(MyScreen.this);
                return true;
            }
        };
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-29T04:00:49.640

这完全取决于您希望您的亲密行为如何发挥作用。另外，我只能阅读英文，所以我不能 100% 确定你`Dialog`说什么。我假设这与关闭应用程序有关（是或否）？

无论如何，通常，我的应用程序通过覆盖子类`onClose()`中的方法来关闭`MainScreen`。您实际上不需要听转义键。 `onClose()`当用户完全退出应用程序，或者按下带有黑莓图标的小按钮，然后选择**Close**时，将正常调用。

```
public final class MyScreen extends MainScreen {

   /** @return true if the user chooses to close the app */
   private boolean showDialog() {       
      Bitmap logo = Bitmap.getBitmapResource("icon.png");
      Dialog d = new Dialog("确定离开？", 
            new String[] { "是", "否" }, 
            new int[] { Dialog.OK, Dialog.CANCEL }, 
            Dialog.OK,
            logo);       
      return (d.doModal() == Dialog.OK);
   }       

   /** Shutdown the app? */
   public boolean onClose() {
      if (showDialog()) {       
         System.exit(0);
         return true;
      } else {
         // the user does not want to exit yet
         return false;
      }
   }
} 
```

# php - 带有计数资源 id #11 的 Mysql 查询

> ID：11255449
> 
> 赞同：-1
> 
> 时间：2012-06-29T02:48:31.253
> 
> 标签：php, mysql

我的代码

```
$query = mysql_query("SELECT COUNT(`op_id`) FROM `room_group_options` WHERE `group` = '$group'");
echo $query;
$result = mysql_result($query, 0) ==  1) ? true : false;
if($result === true)
{
$error = 'already have this data';
} 
```

我的检查代码已经有数据了吗？，问题是运行此代码后结果总是错误的，然后我尝试回显 $query 并得到资源 ID #11

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T02:53:29.803

`mysql_query`返回一个 [`resource`](http://www.php.net/manual/en/language.types.resource.php)

并将条件更改为失败时[`mysql_result`](http://php.net/manual/en/function.mysql-result.php)返回**false**

所以条件应该是这样的

```
$result = (FALSE !== mysql_result($query, 0)) ? TRUE : FALSE; 
```

如果您想从资源链接中获取，请致电

```
while ( $row = mysql_fetch_assoc($query))
{
  $fetch[]= $row;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T03:14:44.207

尝试做这样的事情来确定结果`mysql_result()`

```
echo "<pre>",print_r(mysql_result($query, 0) , TRUE),"</pre>"; 
```

但似乎你在这里有一个不成对的起始括号

```
$result = mysql_result($query, 0) ==  1) ? true : false; 
```

应该是，我假设

```
$result = (mysql_result($query, 0) ==  1) ? true : false; 
```

# eclipse - Eclipse 和 EGit：如何在提交到 *local* 存储库之前轻松查看对所有已修改文件的更改

> ID：11255451
> 
> 赞同：46
> 
> 时间：2012-06-29T02:49:20.053
> 
> 标签：eclipse, git, egit

我正在使用带有（内置）EGit 插件 v.1.3.0.201202151440-r 的 Eclipse Indigo SR2，并且在提交之前无法找到任何方法来轻松查看我的所有更改。

我多年来一直使用 Eclipse 和 SVN，而且这总是很容易做到的。我通常会右键单击我的项目，选择`Team->Synchronize`，双击第一个更改的文件（在 Team Sync 透视图中），然后反复点击`Ctrl`-`.`以查看一个文件中的所有更改，然后继续下一个文件，因为我为提交消息写了我的更改摘要。

但当然，git 与 Subversion 非常不同，因此我的工作流程必须改变。使用 EGit，“团队同步”似乎只对查看我的本地文件和远程存储库之间的更改有用（即在推送到远程之前）。*自上次提交到本地*存储库以来，我需要一种方法来查看更改。在推送到远程之前，我通常什至不关心（重新）审查更改（如果我这样做了，我更喜欢简单的等价物`git log`来查看我将要推送的提交）。

如果我右键单击我的项目并选择`Team->Commit`，我会看到一个窗口，它*几乎*可以完成我需要做的所有事情（选择要暂存的文件、提交、编写提交消息、修改先前的提交等）。它*不允许*我做的是在比较编辑器中快速轻松地查看我的所有更改。我不敢相信这种能力不存在！似乎我需要双击每个单独的文件，查看更改，关闭比较编辑器，然后双击下一个文件。这是荒谬的！

TL/DR - 我正在寻找一个简单的 GUI 等价物（在 Eclipse 中）来做我可以从命令行轻松完成的事情`git vimdiff`（其中 vimdiff 是一个 git 别名，它使用 vimdiff 作为“difftool”来循环浏览所有修改文件）后跟`git commit`（中间可能有一`git add`两个）。

如果没有人有好的解决方案，我很好奇其他人如何使用 EGit 处理他们的提交工作流程。从命令行提交我一直相处得很好（不是 Eclipse 对此感到高兴），但我不敢相信 EGit 在我看来几乎没用。也许我的 google-fu 不像以前那么强大了？

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2012-06-29T09:58:46.737

[这里](http://wiki.eclipse.org/EGit/User_Guide#Comparing_with_Branches_.28Synchronize.29)说您可以看到工作树和任何给定参考之间的差异。也许您应该尝试最新版本的 Eclipse/EGit (Juno)，看看它是否变得更好？

*更新：我已经在最新的 Eclipse 中尝试过了，据我所知，它运行良好。就是这样：*

在撰写本文时，Eclipse Juno 4.2 是您应该选择的版本。在下载页面上，您可以根据需要在几个包之间进行选择。'Eclipse IDE for Java Developers' 与 EGit 捆绑在一起，但您也可以使用 Eclipse Marketplace（在帮助菜单下）将 EGit 安装到任何发行版中。

*   将项目导入 Eclipse 后，请确保项目是“共享的”：

右键单击项目 -> 团队 -> 共享项目.. -> Git

现在执行以下操作：

*   切换到团队同步视角。
*   单击同步视图中的同步小按钮。
*   选择 Git
*   选择一个合适的分支进行同步，比如`refs/remotes/origin/master`
*   **确保选中“在比较中包含本地未提交的更改”框**
*   点击完成

现在，更改一些文件并观察它们出现在同步视图中。双击更改的文件以查看差异（如下面的屏幕截图所示）。

![Eclipse Juno 截图 - EGit 同步视图](../Images/56166eca8577f94441ac9f085986127f.png)

* * *

## 回答 #2

> 赞同：28
> 
> 时间：2012-06-29T04:58:32.580

您是否知道“Git 暂存”视图。它跟踪所有已更改的文件，您可以随时查看更改。（这可能比使用提交对话框好一点）

另一种方法是在不审查的情况下提交所有更改，然后使用历史视图来比较两个提交（只需选择最后一个最多的提交，右键单击并选择“相互比较”）。这样您就不必一直双击单个文件。如果您需要更改某些内容，您可以随时“修改”最后一次提交。（我通常遵循这种方法）

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2019-06-26T15:10:05.433

我是从 Eclipse Oxygen 开始写这篇文章的，但它也应该适用于其他版本。

1.  选项 1 与团队同步视图：**右键单击项目 > 比较 > 提交。**您可以在此处选择您的最新提交，即使您尚未将其推送到存储库。
2.  带有差异视图的选项 2：如果您想在不提交的情况下查看“差异”版本，您可以通过**右键单击您的项目 > 团队 > stashes > Stash Changes > 选中 Include untracked files 来实现此目的。**这会将您的所有更改保存到存储中。然后您将**右键单击项目 > 团队 > 存储 > 选择您保存的存储。** 您单击右上角的绿色箭头以将您隐藏的所有更改重新应用到代码中。在同一个存储窗口中，您将在右下角看到一个“差异”选项卡。单击差异选项卡将以红色/绿色突出显示的差异样式显示您的更改。我希望有一种方法可以在不存储的情况下生成差异视图，但这是我发现的唯一解决方法。

# php - 将信息发送到另一个网站

> ID：11255453
> 
> 赞同：0
> 
> 时间：2012-06-29T02:49:35.823
> 
> 标签：php

我如何将信息从一个站点发送到另一个站点并填写表格？

例如，假设我有一个 Minecraft 服务器，并且我想要一个表单，玩家可以在我的网站上输入他们的名字。输入他们的姓名并按 Enter 后，他们将被发送到自动填写其姓名的另一个站点。

这是一个很好的例子。在[这个网站上](http://www.obsidiancraft.com/)，您可以在上面写着“为钻石投票”的地方输入您的姓名。（您可以输入任何内容），然后单击下一步 - 他们为投票站点提供按钮。一旦他们点击，他们就会被发送到下一个网站，他们的名字已经填写，他们在下一页（在用户输入他们的名字之后）。我怎样才能为我的网站做到这一点？我想不出办法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T02:53:30.867

您可以使用该`action`属性来指定应在何处处理表单数据：

```
<form action="http://othersite.com/processor.php" method="post">
   <!-- Form elements go here -->
</form> 
```

我以为这就是你的意思。如果您正在寻找服务器将收集到的数据发送到另一台服务器，则需要使用 cURL： http: [//php.net/manual/en/book.curl.php](http://php.net/manual/en/book.curl.php)

# c++ - 如何为 TIdHTTPProxyServer 设置超时（不是连接超时）

> ID：11255454
> 
> 赞同：0
> 
> 时间：2012-06-29T02:49:49.383
> 
> 标签：c++, delphi, proxy, indy10, c++builder-xe2

我正在使用 TIdHTTPProxyServer，现在我想在成功连接到目标 HTTP 服务器但长时间没有收到响应（ig 3 分钟）时终止连接目前我没有找到与之相关的属性或事件。即使客户端在代理服务器收到 HTTP 服务器的响应之前终止连接。在代理服务器收到响应之前，不会触发 OnException 事件。（也就是说，如果代理服务器仍然没有收到来自 HTTP Server 的响应，我什至不知道客户端已经终止了连接......）

任何帮助将不胜感激。

谢谢！

威利

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T16:23:07.003

Indy 默认使用无限超时。要执行您要求的操作，您需要设置到目标服务器的出站连接的 ReadTimeout 属性。`TIdHTTPProxyServerContext.OutboundClient`您可以通过该属性访问该连接。使用在`OnHTTPBeforeCommand`OutboundClient 连接到目标服务器之前触发的事件，例如：

```
#include "IdTCPClient.hpp"

void __fastcall TForm1::IdHTTPProxyServer1HTTPBeforeCommand(TIdHTTPProxyServerContext *AContext)
{
    static_cast<TIdTCPClient*>(AContext->OutboundClient)->ReadTimeout = ...;
} 
```

# mysql - NOT IN 子查询如何处理 NULL 值？

> ID：11255455
> 
> 赞同：1
> 
> 时间：2012-06-29T02:50:25.063
> 
> 标签：mysql

我很困惑以下如何在 MySQL 中工作。在下面的查询中，第一个`SELECT`返回所有行，`table2`而第二个`SELECT`不返回任何行。是否有关于如何`NULL`与`NOT IN`运营商合作的解释。是否有任何文件可以解释这一点？

```
CREATE TABLE table1 (
   id INT UNSIGNED NOT NULL AUTO_INCREMENT,
   PRIMARY KEY (id)
);

CREATE TABLE table2 (
   id INT UNSIGNED NOT NULL AUTO_INCREMENT,
   table1_id INT UNSIGNED,
   PRIMARY KEY (id)
);

INSERT INTO table2 (id, table1_id) VALUES (1, NULL);

SELECT COUNT(*) FROM table2 WHERE table1_id NOT IN (SELECT id FROM table1);
+----------+
| COUNT(*) |
+----------+
|        1 |
+----------+

INSERT INTO table1 (id) VALUES (1);

SELECT COUNT(*) FROM table2 WHERE table1_id NOT IN (SELECT id FROM table1);
+----------+
| COUNT(*) |
+----------+
|        0 |
+----------+ 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-29T02:53:17.903

原因是根据 SQL 规范，`Foo IN(A,B,C)`转换为`( Foo = A Or Foo = B Or Foo = C )`. 因此，如果我们有`Foo In(Null, 1, 2)`我们得到`Foo = Null Or Foo = 1 Or Foo = 2`. 由于`Foo = Null`总是为过滤目的`UNKNOWN`而评估，`False`因此 IN 表达式中的 Null 将不返回任何结果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-09-23T09:19:36.557

您可以添加`IFNULL(id, '')`到子查询以便它可以工作，例如：

```
SELECT COUNT(*) FROM table2 WHERE table1_id NOT IN (SELECT IFNULL(id, '') FROM table1); 
```

# perl - Perl Imager::Screenshot 不使用默认参数进行屏幕截图

> ID：11255459
> 
> 赞同：2
> 
> 时间：2012-06-29T02:50:39.667
> 
> 标签：perl, screenshot

我有以下代码：

```
use Imager::Screenshot 'screenshot';
my $img = screenshot(hwnd => 'active', 
    left => 450, 
    right => 200, 
    top => 50, 
    bottom => 50
);
$img->write(file => 'screenshot.png', type => 'png' ) || 
    print "Failed: ", $img->{ERRSTR} , "\n"; 
```

它打印：

> “无法在第 3 行的未定义值上调用方法“写入””

但是当我这样做时：

```
use Imager::Screenshot 'screenshot';
my $img = screenshot(hwnd => 'active', 
    left => 100, 
     right => 300, 
     top => 100, 
     bottom => 300
);

$img->write(file => 'screenshot.png', type => 'png' ) || 
     print "Failed: ", $img->{ERRSTR} , "\n"; 
```

它确实需要一个屏幕截图。为什么左边、右边、顶部和底部的值在这里很重要？

编辑：经过一些研究，我发现左参数必须小于右参数，并且顶部必须小于底部。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T02:55:00.790

您是否尝试过检查错误？例如

`my $img = screenshot(...) or die Imager->errstr;`

编辑：试试这个代码：

```
use Imager::Screenshot 'screenshot';
my $img = screenshot(hwnd => 'active',
    left => 450, 
    right => 200, 
    top => 50, 
    bottom => 50
) or die Imager->errstr;
$img->write(file => 'screenshot.png', type => 'png' ) || 
    print "Failed: ", $img->errstr, "\n"; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-29T03:15:41.283

我想这是导致问题的行：

```
my $img = screenshot(
  hwnd => 'active', 
  left => 450, 
  right => 200, 
  top => 50, 
  bottom => 50
); 
```

看，`left`和`right`参数设置为正值（即> 0），我们设置开始和结束'X-'坐标。但这对于开始'X'比结束'X'更远离窗口的最左边缘没有意义。同样的故事也发生在`top`并`bottom`重视平等。

如果你想要的是'让我从左侧 450 像素，右侧 200 像素，顶部和底部边缘 50 像素的窗口中获取一些东西'，请使用以下命令：

```
my $img = screenshot(
  hwnd => 'active', 
  left => -200, 
  right => -450, 
  top => -50, 
  bottom => -50
); 
```

# java - Spring JDBCTemplate 更新问题

> ID：11255460
> 
> 赞同：-1
> 
> 时间：2012-06-29T02:50:39.343
> 
> 标签：java, sql-server, spring, jakarta-ee, jdbctemplate

在我的表定义中，有一列具有 int 数据类型。如果值为“0”，我希望 jdbcTemplate 更新方法默认使用“NULL”而不是“0”更新此字段。

```
this.jdbcTemplate.update("UPDATE GCUR_OBSERVATION "
                + "SET ObserverId = ?," + "ObservationDate = ?,"
                + "PointCuring = ?"
                + " WHERE locationId = ? AND ObservationStatus = 0",
                new Object[] { new Integer(newObservation.getObserverId()),
                        newObservation.getObservationDate(),
                        new Integer(newObservation.getLocationId()) }); 
```

上面的代码片段在`Point Curing`is时运行良好`not NULL`。但是，它如何存储`NULL`在数据库表中呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-29T05:05:24.127

我希望你得到 NULL 指针异常。

尝试这个

```
Integer locId = null;

if(newObservation.getLocationId() != null) {
 locId = new Integer(newObservation.getLocationId());
 if(locId == 0) {
   locId = null;
 }
} 
```

现在在这里传递 locId。

```
this.jdbcTemplate.update("UPDATE GCUR_OBSERVATION "
                + "SET ObserverId = ?," + "ObservationDate = ?,"
                + "PointCuring = ?"
                + " WHERE locationId = ? AND ObservationStatus = 0",
                new Object[] { new Integer(newObservation.getObserverId()),
                        newObservation.getObservationDate(),
                        locId) }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-29T05:30:04.863

假设 getLocationId() 的返回类型是 int 以下代码将起作用。正确的解决方法是将 getLocationId() 的签名更改为 Integer 并确保初始化它的代码将其设置为 NULL 而不是 0

```
this.jdbcTemplate.update("UPDATE GCUR_OBSERVATION "
                + "SET ObserverId = ?," + "ObservationDate = ?,"
                + "PointCuring = ?"
                + " WHERE locationId = ? AND ObservationStatus = 0",
                new Object[] { new Integer(newObservation.getObserverId()),
                        newObservation.getObservationDate(),
                        newObservation.getLocationId() == 0 ? null : new Integer(newObservation.getLocationId()) }); 
```

# javascript - IIFE（立即调用函数表达式）中的 Object.Prototype 方法和“使用严格”

> ID：11255461
> 
> 赞同：3
> 
> 时间：2012-06-29T02:50:49.607
> 
> 标签：javascript, inheritance, anonymous-function, iife

原代码：

```
'use strict';
function GitJs(config) {
    var defaults = {
        inheriting: false,
        clientId: undefined,
        accessToken: undefined,
        baseUrl: 'https://api.github.com',
        mode: 'read'
    };

    this.config = $.extend(defaults, config);
}

/**
 * Gets the jQuery method that GitJs#generateApiRequest is going to use to send the ajax request.
 *
 * @param {string} httpVerb The HTTP verb that the request will use,
 * @return string
 */
GitJs.prototype.getCommandMethod = function (httpVerb) {
    var method = $.get;

    switch (httpVerb) {
    case 'GET':
        method = $.get;
        break;
    case 'POST':
        method = $.post;
        break;
    }
    return method;
};

... 
```

新代码：

```
(function() {
'use strict';
    'use strict';
    function GitJs(config) {
        var defaults = {
            inheriting: false,
            clientId: undefined,
            accessToken: undefined,
            baseUrl: 'https://api.github.com',
            mode: 'read'
        };

        this.config = $.extend(defaults, config);
    }

    /**
     * Gets the jQuery method that GitJs#generateApiRequest is going to use to send the ajax request.
     *
     * @param {string} httpVerb The HTTP verb that the request will use,
     * @return string
     */
    GitJs.prototype.getCommandMethod = function (httpVerb) {
        var method = $.get;

        switch (httpVerb) {
        case 'GET':
            method = $.get;
            break;
        case 'POST':
            method = $.post;
            break;
        }
        return method;
    };

    ...
}()); 
```

正如这段代码所代表的，当我尝试：

`var gitjs = new GitJs();`

我被告知 GitJs 是未定义的

我到底在想什么：

*   我不想把`use strict`每个方法都放在里面。
*   如果我的代码被缩小并连接到另一个文件，我希望它能够很好地发挥作用。
*   我想使用该`.prototype`语法以便稍后继承（和代码清晰）
*   我不想创建一个全局`var gitJs`变量，因为它可能会被其他人的脚本覆盖。
*   我假设用户将始终通过`new`关键字调用对象构造函数

为了记录，我知道我错了。大错特错。我似乎无法弄清楚我思维中的缺陷在哪里，我希望得到一些指导。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-29T03:00:06.003

您的问题是 GitJS 现在是立即调用函数的私有变量。您不能在私有范围内隐藏您的函数并同时使其公开可用。它们是相互排斥的目标。

因此，您需要通过窗口显式设置全局变量

```
var GitJS;
(function() {
    'use strict';
     GitJS = function(){ ... }
     ...
}()); 
```

或从 IIFE 内部返回导出的函数。

```
var ExportedGitJS = (function(){ //using a different name just to be clear...
    'use strict';
    var GitJS = function(){ ... }
    ...
    return GitJS;
}()); 
```

* * *

好吧，我撒谎了。您*可以*制作 Javascript 模块而不必依赖全局变量，但这通常意味着还使用不同的模块创建约定和/或使用模块库。如果您对此感兴趣，我强烈建议您查看[http://requirejs.org/ 。](http://requirejs.org/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-25T01:03:16.357

关于提供一些指导，我不确定这听起来是否完全显而易见，但*有*一种方法：

*   不要在每个方法中都插入`use strict`编译指示
*   连接时不对其他源施加严格模式
*   使用`.prototype`语法
*   不需要全局`var gitJs`变量
*   让用户通过`new`关键字调用对象构造函数

它是：

```
/* Class constructor, public, globally available */
function GitJs(config) {
    'use strict'; /* You may want to drop this one */
    var defaults = {
        inheriting: false,
        clientId: undefined,
        accessToken: undefined,
        baseUrl: 'https://api.github.com',
        mode: 'read'
    };

    this.config = $.extend(defaults, config);
}

/* IIFE to wrap the *main* strict pragma */
(function () {
    'use strict';

    GitJs.prototype.getCommandMethod = function (httpVerb) {
        /* ... */
    };

    GitJs.prototype.someOtherMethod = function (someParam) {
        /* ... */
    };

})();

...

/* some other block */
... {
    var gitjs = new GitJs();
}; 
```

这是否部分回答了这个问题？

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-29T03:09:18.427

@missingno 是正确的，但我必须补充一点，您距离使用[RequireJS](http://requirejs.org/)或[等效的](https://github.com/unscriptable/curl) [loader](https://github.com/requirejs/cajon)仅一步之遥。你对全局变量保持警惕是对的；如果您承诺在具有已定义依赖项的异步模块中运行所有 JavaScript，那么您可以简单地将 GitJs 构造函数返回到全局定义函数，然后在任何需要它的地方使用您的 GitJS 模块。

```
// using the global define function provided by an AMD loader
// assuming that jQuery has already been provided by the paths config
define(['jquery'],function($) {
    'use strict';
    var GitJS = function() { ... }
    return GitJS
}); 
```

# java - 为什么clojure中的java原生HashMap运行缓慢？

> ID：11255471
> 
> 赞同：6
> 
> 时间：2012-06-29T02:52:08.500
> 
> 标签：java, clojure, hashmap

我将一个键与一个哈希映射关联了 10000000 次。这是Java代码和输出：</p>

```
import java.util.HashMap;

public class TestMap {
    public static void main(String[] args) {
        HashMap<Integer, Integer> mp = new HashMap<Integer, Integer>();
        long  start = System.currentTimeMillis();
        for (int i = 0; i < 10000000; i++) {
            mp.put(1, 1);
        }
        long end = System.currentTimeMillis();
        System.out.println("Elapsed time: " + (end - start) + " msecs");
    }
}

$ javac TestMap.java && java -cp . TestMap
Elapsed time: 38 msecs 
```

然后我在 REPL 中从 clojure 调用 java：

```
user=> (import java.util.HashMap)
java.util.HashMap
user=> (def mp (HashMap.))
#'user/mp
user=>  (time (dotimes [n 10000000] (.put mp 1 1)))
"Elapsed time: 10024.797 msecs"
nil 
```

两个代码都做同样的事情，但是 clojure 版本运行速度非常慢！！

有什么问题？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-06-29T04:04:19.140

添加类型提示更好：

```
user> (import 'java.util.HashMap)
java.util.HashMap
user> (def mp (HashMap.))
#'user/mp
user> (time (dotimes [n 10000000] (.put mp 1 1)))
"Elapsed time: 13932.248126 msecs"
nil
user> (time (dotimes [n 10000000] (.put ^HashMap mp 1 1)))
"Elapsed time: 117.915992 msecs"
nil 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-06-29T03:42:58.487

像这样的性能问题的第一步是打开反射警告并删除任何。

```
 (set! *warn-on-reflection* true) 
```

loop 和 recur 的开销也最低。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-29T07:04:24.640

您还可以通过在声明中声明 HashMap 大小来提高 Java 代码速度

```
HashMap<Integer, Integer> mp = new HashMap<Integer, Integer>(10000000); 
```

我想这也是REPL的一种方式（我不知道），是否可以保留内存空间？

# java - 警报对话框中的 HTTP 链接不起作用

> ID：11255473
> 
> 赞同：1
> 
> 时间：2012-06-29T02:52:59.383
> 
> 标签：java, android, http, textview, android-alertdialog

我尝试按照以下示例在我的警报对话框中的 TextView 中创建一个 HTTP 链接，但它不起作用：

[如何使 TextView 中的链接可点击？](https://stackoverflow.com/questions/2734270/how-do-i-make-links-in-a-textview-clickable)

我可以让它工作的唯一方法是将链接的文本直接放入我的字符串并放入`android:autoLink="web"`我的 TextView。但我不想看到整个链接，只是名字。

这是创建我的对话框的位置：

```
@Override
protected Dialog onCreateDialog(int id) {
    LayoutInflater factory = LayoutInflater.from(this);

    switch (id) {
    case DISCLAIMER:
            final View disclaimerView = factory.inflate(R.layout.disclaimer_dialog, null);
            final TextView dtv = (TextView) disclaimerView.findViewById(R.id.disclaimer_body);

            dtv.setText("v"+versionName+"\n\n\u00A9"+Calendar.getInstance().get(Calendar.YEAR)+" "+"Developer\n\n" +
                getString(R.string.alert_dialog_disclaimer_body));

            dtv.setMovementMethod(LinkMovementMethod.getInstance());                

            return new AlertDialog.Builder(MyActivity.this)                
                .setView(disclaimerView)
                .setPositiveButton(R.string.alert_dialog_ok, new DialogInterface.OnClickListener() {
                    public void onClick(DialogInterface dialog, int whichButton) {
                    }
                })
                .create();
    }

    return null;
} 
```

这是我的 TextView 位于`R.layout.disclaimer_dialog`：

```
<TextView
    android:id="@+id/disclaimer_body"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:layout_marginTop="5dp"
    android:layout_marginBottom="10dp"
    android:gravity="center"
    /> 
```

这是我的字符串资源：

```
<string name="alert_dialog_disclaimer_body">This application was developed and written by me.\n\nGraphs use AChartEngine licensed under <a href="http://www.apache.org/licenses/LICENSE-2.0">Apache License 2.0</a>.\n\nThe rest goes here.</string> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T04:37:01.803

[TextView.setText(CharSequence)](http://developer.android.com/reference/android/widget/TextView.html#setText%28java.lang.CharSequence%29)的文档说明：

> 设置 TextView 的字符串值。**TextView 不*接受*类似 HTML 的格式，您可以对 XML 资源文件中的文本字符串执行此操作。**要设置字符串样式，请将 android.text.style.* 对象附加到 SpannableString，或查看可用资源类型文档以获取在 XML 资源文件中设置格式化文本的示例。

根据他们的建议，[格式和样式在](http://developer.android.com/guide/topics/resources/string-resource.html#FormattingAndStyling)*带有 HTML 标记*的样式标题下解释了如何同时拥有 HTML 标记和格式代码。

我认为在您的情况下最简单的事情就是调整您的布局以在您已经使用的一个视图中包含您的版权声明，并将下面的免责声明放在您只需不理会的第二个视图中：

```
<TextView
    android:id="@+id/disclaimer_body"
    android:text="@string/alert_dialog_disclaimer_body"
    ...
    /> 
```

# c# - 点击活动链接时如何请求权限

> ID：11255486
> 
> 赞同：0
> 
> 时间：2012-06-29T02:56:09.663
> 
> 标签：c#, asp.net, facebook-opengraph

在我的网站中，当用户阅读文章时，如果用户是经过身份验证的用户。“读取”操作将发布到用户的时间线中。

但是，当其他用户单击上述用户发布的链接时，它没有请求许可并转到链接的目的地。

单击链接时如何强制请求许可？如果接受许可，用户将重定向到目的地，如果拒绝，用户将留在 Facebook。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T06:54:31.533

您可以使用 javascript 进行确认，如果用户单击是，则将用户重定向到文章前：

在您的 aspx 页面中获取调用 javascript 的链接：

```
<asp:LinkButton ID="xyz" runat="server" OnClientClick="return checkUser()" OnClick="xyz_Click" /> 
```

Javascript：

```
<script type="text/javascript">
function chackUser(){
if (confirm("Are You Sure") == true) {
            return true;
        }
        else
            return false;

    }
</script> 
```

在页面后面的代码中：

```
protected void xyz_Click(object sender, EventArgs e)
{
Resonse.Redirect("your link");
} 
```

# java - 将类传递给方法以实例化泛型

> ID：11255489
> 
> 赞同：0
> 
> 时间：2012-06-29T02:56:30.643
> 
> 标签：java, generics

以下代码不起作用，因为标记的行无法编译：

```
MyClass {
    //singleton stuff
    private static MyClass instance;
    private MyClass () {}
    public static MyClass getInstance() {
        if(instance==null) {
            instance = new MyClass ();
        }
        return instance;
    }

    // method creating problems
    public NonGenericSuperClassOfGenericClass create(Class<?> c1, Class<?> c2) {
        return new GenericClass<c1,c2>; // DOES NOT COMPILE!!!
    }
} 
```

我不希望 MyClass 是通用的。为什么？因为create方法的实际实现类似于下面这样：

```
 // method creating problems
    public NonGenericSuperClassOfGenericClass create(Class<?>... classes) {
        if(someCondition)
             return new GenericClass<classes[0],classes[1]>;
        else
             return new OtherGenericClass<classes[0]>;
} 
```

因此，我不能将 MyClass 与任何特定的泛型结合起来。有没有办法用传递的参数实例化我的 GenericClass？如何？

谢谢

* * *

谢谢您的回答。我会告诉你整个故事。

我正在使用**Spring**并且我打算使用**MongoDB**。

类 GenericClass 类似于：

```
 GenericClass<PersistetType1, Long> 
```

或者

```
 GenericClass<PersistentType2, Long> 
```

其中 PersistentType1/2 是我最终需要存储在数据库中的类，而 GenericClass 是一种访问 Mongo API 的代理。事实上，它看起来像：

```
 public MongoTemplate getTemplate();
  public void save(T toInsert);
  public List<T> select(Query selectionQuery);
  public T selectById(ID id);
  public WriteResult update(Query selectionQuery, Update updatedAttributes);
  public void delete(T toRemove);
  public void delete(Query selectionQuery); 
```

怎么办？从控制器（或实体，如果你很挑剔）我需要实例化存储库并调用任何方法。这导致控制器与 MongoDB 耦合，即它们必须显式实例化这样的 GenericClass，它实际上称为 MongoRepository 并且严格依赖于 Mongo（实际上它是一个具有恰好两个“自由度”的泛型）。

所以，我决定创建 MyClass，这是一个隔离控制器的进一步代理。这样，Controller 可以获取 MyClass 的单个实例，并让它创建相应存储库的新实例。特别是，当“somecondition”为真时，意味着我们要使用MongoRepository（当它为假时，可能需要实例化一个Hibernate代理，即HibernateRepository）。但是，MongoRepository 是通用的，因此它需要某种形式的实例化，我希望将其作为参数传递。

不幸的是，泛型是在编译时解决的，因此我猜它们对我不起作用。

我该如何解决？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-29T03:01:57.673

这没有意义，尤其是在 Java 中。

泛型的全部意义在于在*编译时*指定类型是什么。

如果您直到运行时才知道类型是什么，那么由于类型擦除，Java 泛型将毫无用处。（在 C# 中，你需要反射）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-29T11:56:52.693

由于[Type Erasure](http://docs.oracle.com/javase/tutorial/java/generics/erasure.html)，第一个实现可以只考虑 rawtypes 实现。

```
// Similar to original method
@SuppressWarnings("rawtypes")
public Map<?, ?> create(Class<?> c1, Class<?> c2) {
    return new HashMap();
} 
```

更清洁的替代方案如下：

```
// A more generic alternative
public <S, T> Map<S, T> create2(Class<? extends S> c1, Class<? extends T> c2) {
    return new HashMap<S, T>();
} 
```

两种实现在运行时都做同样的事情。第二个更好，因为它的签名取决于它的参数（虽然 create 返回 a `Map<?, ?>`，第二个可能返回 a `Map<String, Integer>`）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-29T17:48:23.930

无需在运行时传入 Class 对象。泛型纯粹是编译时的。因为（看起来）你正在返回一个非泛型类型，所以无论如何你都扔掉了泛型参数（我不知道你为什么要这样做；但既然你是，我会去的），它使用什么作为参数并不重要。任何通过类型检查器的类型参数就足够了：

```
public NonGenericSuperClassOfGenericClass create() {
    if(someCondition)
         return new GenericClass<Object,Object>();
    else
         return new OtherGenericClass<Object>();
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-30T05:47:43.230

想到的一件事是：

```
public NonGenericSuperClassOfGenericClass create(Class<?>... classes) {
    if(someCondition)
         return new helper1(classes[0],classes[1]);
    else
         return new helper2(classes[0]);
}

public <R,T> GenericClass<R,T> helper1( Class<R> a, Class<T> b ){
    return new GenericClass<R,T>();
}

public <T> OtherGenericClass<T> helper2( Class<T> a ){
    return new OtherGenericClass<T>();
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-07-11T21:20:27.000

方法是用另一个泛型参数化泛型：T1>。这样我就得到了我需要的联轴器。The appropriate choice of AnotherClass gives the expected result.

# c++ - 由于相互包含标头，无法在模板化类中成功地为模板化方法添加好友

> ID：11255495
> 
> 赞同：0
> 
> 时间：2012-06-29T02:56:57.773
> 
> 标签：c++, templates, include

我有一个包含矩阵管理逻辑的类。同时我有一套方法专门用于处理一些重要的时间花费矩阵操作操作（如 LU 分解等）。

该类使用该文件中定义的函数。该文件需要有权访问该类的元素。我需要让那些专门的方法成为上述课程的朋友。这导致我在每个其他标题中包含一个标题。

## 我的问题

我之前描述的情况在这里编码如下。第一个代码是指`mat.hpp`.

```
#ifndef MAT_HPP
#define MAT_HPP
#include "operations.hpp"
namespace nsA {
template <typename T>
// Templated class because matrices can be real or complex
class mat {
   // Members...
   friend template <typename U> 
   void exec_lu(const mat<U>& in, const mat<U>& out);
   // Members...
} /* class end */
}
#endif
#endif 
```

第二个文件是`operations.hpp`

```
#ifndef OPERATIONS_HPP
#define OPERATIONS_HPP
#include "mat.hpp"
namespace nsA {
namespace nsB {
template <typename T>
void exec_lu(const mat<T>& in, const mat<T>& out);
}
}
#endif 
```

问题是编译器开始抱怨。

## 笔记

请考虑一下，如果我在其中评论了朋友声明`mat.hpp`但留下了包含，编译器会告诉我在“operations.hpp”`mat`中没有定义类型！

如果还注释包含`mat.hpp`并保持朋友声明也注释，编译器就可以了！

如何解决这个问题？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T03:30:07.187

你可以通过添加几个前向声明来做到这一点......但是你甚至可以用更多的代码做得更好：

```
template <typename T> class mat;
template <typename T> void exec_lu( const mat<T>&, const mat<T>& );
template <typename T>
class mat {
   friend void exec_lu<T>( const mat<T>&, const mat<T>& );
};
template <typename T>
void exec_lu( const mat<T>& a, const mat<T>& b ) { ... } 
```

这种方法和你的方法之间的主要区别（除了修复语法限制）是，在这种方法中，单个实例化`exec_lu`被授予访问权限`mat<T>`，特别是*需要*访问它的实例化。在您的代码中（修复后），所有专业化`exec_lu`都可以访问任何专业化`mat`（即`exec_lu<int>`可以访问`mat<int>`私有成员，但也`mat<double>`...），您可能不希望这样。

有关声明模板朋友的不同选项的详细说明，请阅读相关问题的[答案。](https://stackoverflow.com/a/4661372/36565)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-29T03:25:16.563

要使其正常工作，您需要转发声明该类。它看起来像这样：

文件 mat.hpp：

```
#ifndef MAT_HPP
#define MAT_HPP
namespace nsA {
template <typename T>
class mat;
namespace nsB {
  template <typename T> 
  void exec_lu(const mat<T>& in, const mat<T>& out);
}
template <typename T>
class mat {
   friend void exec_lu(const mat<T>& in, const mat<T>& out);
};
}
#endif 
```

和文件操作.hpp：

```
#ifndef OPERATIONS_HPP
#define OPERATIONS_HPP
#include "mat.hpp"
namespace nsA { namespace nsB {
template <typename T>
void exec_lu(const mat<T>& in, const mat<T>& out);
}}
#endif 
```

你最初的宣言比我的更能传递友谊。我的只为与类的类型名匹配的函数授予友谊。

# php - 根据 PHP 中的值在 googlemap 中设置折线

> ID：11255500
> 
> 赞同：0
> 
> 时间：2012-06-29T02:57:33.440
> 
> 标签：php, javascript

我看过这个链接：

[Google map api v3从数组中添加折线](https://stackoverflow.com/questions/8176349/google-map-api-v3-add-polylines-from-array)

这与我的问题有点相同.. 你看，我收到一个 javscript 错误，如下所示：

```
Uncaught TypeError: Cannot call method 'getPath' of undefined 
AddCoordinate map:118
(anonymous function) 
```

好吧，我的代码基本上是在页面与地图一起加载时首先填充坐标。当点击被触发（html按钮）时，这是唯一一次用折线绘制地图。我希望我解释得很好。这就是我得到的：

```
 var map;
    var Markers = [];
    var Coordinates = [];
    var LinePath;

    function initialize()
    {  
      var myLatLng = new google.maps.LatLng(21.291982, -140.821856);
      var myOptions = {
                zoom: 3,
            center: myLatLng,
            mapTypeId: google.maps.MapTypeId.SATELLITE
          };
      var MarkerSize = new google.maps.Size(48,48);
      map = new google.maps.Map(document.getElementById("map_canvas"), myOptions);
    }

    function AddCoordinate( lat, long )                                                                                                                         {
      var path = LinePath.getPath(); 
      path.push( new google.maps.LatLng( lat, long ) );
      LinePath.setPath(path);
    }

    function PlotLine()
    {
      LinePath = new google.maps.Polyline({
                path:Coordinates,                                                                                                                           
                strokeColor:"#ffffff",
                strokeOpacity:1.0,
                strokeWeight:5
                });
      LinePath.setMap(map);
    }

   <html>
    <body onload="initialize()">
    <div id="map_canvas" ></div>
    <?php
                    foreach($arrayOfPlotPoints as $key => $value){ 
                        $longitude = round($value['longitude'],5);
                        $latitude = round($value['latitude'],5);
                        $snrLevel = $value['snr_level'];
                        echo '<script type="text/javascript">AddCoordinate('.$latitude.','.$longitude.')</script>';
                    ?>
                        <option value="<?php echo $longitude.",".$latitude.",".$snrLevel?>"> Lg:<?php echo $longitude." Lt: ".$latitude." LV: ".$snrLevel?></option>
                        <?php } ?>
                    </select>
                    <br /><br />
                    <?php echo $this->Form->button('PLOT', array('type'=>'button', 'onclick'=>'PlotLine()')); ?>
echo $this->Form->button('PLOT', array('type'=>'button', 'onclick'=>'PlotLine()')); 
     ?> 
```

********已编辑**********

我对我的代码进行了部分修改..但是我得到了同样的错误..

```
Uncaught TypeError: Cannot call method 'getPath' of undefined 
    AddCoordinate (anonymous function)

function initialize() {
 //.....
 LinePath = new google.maps.Polyline({
        path:Coordinates,                                                                                                                           //san ka galing Coordinates??? dineclare ka pero di ka aman nilagyan "YATA" ng laman
        strokeColor:"#ffffff",
        strokeOpacity:1.0,
        strokeWeight:5
        });
}

function AddCoordinate( latitude, longitude )                                                                                                                       {
  var path = LinePath.getPath(); 
  path.push(  latitude, longitude  );
}

function PlotLine()
{
  LinePath = new google.maps.Polyline({
            path:Coordinates,                                                                                                                           
            strokeColor:"#ffffff",
            strokeOpacity:1.0,
            strokeWeight:5
            });
  LinePath.setMap(map);

}

<HTML>
select name="long_and_lat" id="long_and_lat" style="width:220px;height:250px;" size="100">
                <?php    
                $plotPoints = array();
                foreach($arrayOfPlotPoints as $key => $value){ 
                    $longitude = round($value['longitude'],5);
                    $latitude = round($value['latitude'],5);
                    $snrLevel = $value['snr_level'];
                    echo '<script type="text/javascript">AddCoordinate('.$latitude.','.$longitude.')</script>';
                ?>
                    <option value="<?php echo $longitude.",".$latitude.",".$snrLevel?>"> Lg:<?php echo $longitude." Lt: ".$latitude." LV: ".$snrLevel?></option>
                    <?php } ?>
                </select>
                <br /><br />
                <?php echo $this->Form->button('PLOT', array('type'=>'button', 'onclick'=>'PlotLine()')); ?>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T03:35:21.077

您正在调用`LinePath`in `AddCoordinate()`，但在被调用（通过单击按钮）`LinePath`之前不会创建。`PlotLine()`

也许您可以`LinePath`在声明它时创建，然后只需调用`LinePath.setMap(map);`from `PlotLine()`。

也许是这样的：

```
<html>

<head>
<link href="https://google-developers.appspot.com/maps/documentation/javascript/examples/default.css" rel="stylesheet" type="text/css" />
<script type="text/javascript" src="https://maps.googleapis.com/maps/api/js?sensor=false"></script>
<script type="text/javascript">

    var map;
    var Markers = [];
    var Coordinates = [];
    var LinePath = new google.maps.Polyline({
                path:Coordinates,          
                strokeColor:"#ffffff",
                strokeOpacity:1.0,
                strokeWeight:5
                });

    function initialize()
    {  
      var myLatLng = new google.maps.LatLng(21.291982, -140.821856);
      var myOptions = {
                zoom: 3,
            center: myLatLng,
            mapTypeId: google.maps.MapTypeId.SATELLITE
          };
      var MarkerSize = new google.maps.Size(48,48);
      map = new google.maps.Map(document.getElementById("map_canvas"), myOptions);

    }

    function AddCoordinate( lat, long ) {
      var path = LinePath.getPath(); 
      path.push( new google.maps.LatLng( lat, long ) );
      LinePath.setPath(path);

    }

    function PlotLine()
    {
      LinePath.setMap(map);
    }

    </script>

</head>
<body onload="initialize()">
    <div id="map_canvas" ></div>
    <script type="text/javascript">AddCoordinate(11,12)</script>
</body>
</html> 
```

# django - django 中的 {% url url_name %} 和 {% url 'url_name' %} 有什么区别

> ID：11255502
> 
> 赞同：2
> 
> 时间：2012-06-29T02:58:02.767
> 
> 标签：django

我不确定 {% url url_name %} 和 {% url 'url_name' %} 有什么区别。为什么会有这样的差异。什么时候用什么？需要对此进行一些澄清...谢谢..

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-29T03:57:48.757

从 django 1.5 开始`{% url url_name %}`，会将参数视为上下文变量，而`{% url 'url_name' %}`会为您提供名为“url_name”的 url。在以前的版本中，后一种语法是错误的，并且不起作用。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-29T04:19:37.810

因此，如果您使用的是 django 1.4 并且稍后将迁移到较新的版本，请使用此语法`{% url 'url_name' %}`来获取命名 url。

注意：您必须`{% load url from future %}`在将使用上述语法的每个模板中添加。

# php - REGEX 如何重复提取模式？

> ID：11255506
> 
> 赞同：2
> 
> 时间：2012-06-29T03:00:03.860
> 
> 标签：php, regex

假设我想从格式中列出的电子邮件中提取部分列表

`Section 26, 753, 87, 201, 47`

我知道这种格式存在于我的文档中，但我不知道在哪里。我如何编写一个将提取所有节号的正则表达式？（对不起，我稍后会发布我已经拥有的模式。）目前，它会查找部分短语，后跟一个空格，然后是一个数字。其余的如何提取？也许 0 次或多次重复逗号、空格、数字？究竟是如何格式化的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T03:37:35.773

使用 PHP/PCRE 无法直接从正则表达式返回可变数量的捕获（尽管有支持这一点的实现，尤其是[.NET](http://msdn.microsoft.com/en-us/library/system.text.regularexpressions.group.captures.aspx)和[Perl 6](http://feather.perl6.nl/syn/S05.html#Repeated_captures_of_the_same_subrule)）。

使用 PHP，您必须编写代码。有多种选择 - 在循环中从字符串中删除匹配项，提取列表，然后使用 preg_match_all 获取数字，等等 - 但我想我只会将整个列表提取到它自己的字符串中并使用`split`（嗯, `preg_split`) 获取各个部分的编号：

```
$str = 'Section 26, 753, 87, 201, 47';
if (preg_match('/Section\s+(\d+(?:,\s*\d+)*)/', $str, $match)) {
  $sections = preg_split('/,\s*/', $match[1]);
}

print_r($sections); 
```

这给出了预期的结果：

```
 Array (
     [0] => 26
     [1] => 753
     [2] => 87
     [3] => 201
     [4] => 47 
) 
```

# php - 如何在 PHP 中测试 URL 的文件类型？

> ID：11255508
> 
> 赞同：4
> 
> 时间：2012-06-29T03:00:08.150
> 
> 标签：php, image, file-type

我正在尝试从 URL 下载图像，如果是 gif，我将对其进行转换，否则，我将保持原样。但是，很像[这个问题](https://stackoverflow.com/questions/9203811/how-to-display-a-gif-image-in-windows-phone-7)（它实际上是为了解决同样的问题），我有不包含文件扩展名的 URL，所以我需要以某种方式确定文件类型的另一种方式。

最好的方法是什么？使用标头可能很容易，但由于我知道 URL 必须涉及重定向才能真正访问文件，所以我不确定测试它的最佳方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T03:03:39.997

只需向 URL 发送请求，遵循任何返回的重定向（您的 HTTP 客户端应该为您执行此操作），然后读取`Content-Type`标头。
请注意，标头不能被信任；恶意服务器或代理可以设置它想要的任何标头。

# jquery - 如何自定义布局 h:selectOneRadio

> ID：11255509
> 
> 赞同：5
> 
> 时间：2012-06-29T03:00:15.710
> 
> 标签：jquery, html, css, jsf

h:selectOneRadio 的布局可以水平或垂直，所以有没有办法可以做一些自定义布局。例如，不是显示 8 个单选按钮，而是将它们显示为 2 行，每行 4 个？请在 PrimeFaces p:selectOneRadio 解决方案旁边提供您的答案，它使用 CSS3 导致 IE8 以矩形形状显示单选按钮。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-29T11:17:39.230

不完全是这样，但您可以使用[Tomahawk 的](http://myfaces.apache.org/tomahawk/index.html) [`<t:selectOneRadio>`](http://myfaces.apache.org/tomahawk-project/tomahawk20/tagdoc/t_selectOneRadio.html)属性`layout`设置为`"spread"`单选按钮的无标记呈现。然后，您可以使用[`<t:radio>`](http://myfaces.apache.org/tomahawk-project/tomahawk20/tagdoc/t_radio.html)您想要的方式将单个单选按钮放置在标记中，例如在`<h:panelGrid columns="4">`.

例如

```
<t:selectOneRadio id="foo" value="#{bean.selectedItem}" layout="spread">
    <f:selectItems value="#{bean.availableItems}" />
</t:selectOneRadio>

<h:panelGrid columns="4">
    <t:radio for="foo" index="0" />
    <t:radio for="foo" index="1" />
    <t:radio for="foo" index="2" />
    <t:radio for="foo" index="3" />

    <t:radio for="foo" index="4" />
    <t:radio for="foo" index="5" />
    <t:radio for="foo" index="6" />
    <t:radio for="foo" index="7" />
</h:panelGrid> 
```

甚至当单选按钮的数量未指定时

```
<h:panelGrid columns="4">
    <c:forEach items="#{bean.availableItems}" varStatus="loop">
        <t:radio for="foo" index="#{loop.index}" />
    </c:forEach>
</h:panelGrid> 
```

*（请注意，`<ui:repeat>`它不适合在视图渲染期间运行，因此最终成为单列`<h:panelGrid>`，您需要改用纯 HTML `<table>`）*

# android - 如何使用一个后台服务启动不同的活动

> ID：11255513
> 
> 赞同：1
> 
> 时间：2012-06-29T03:01:08.890
> 
> 标签：android, service, asynchronous, android-activity

我是 Android 新手，但我遇到了一个概念问题。我有一个包含多个活动的应用程序，其中一些活动很关键，需要用户登录 web 应用程序。

当用户单击一个按钮以达到其中一个关键活动时，我会调用一个后台服务来询问用户是否仍连接到 webApp（不是超时）。如果用户已登录，则启动活动，否则会弹出一个对话框并询问用户名和密码。问题是有几个受保护的活动，我想使用相同的服务进行验证。我目前这样做的方式可行，但有点笨拙。

```
 public class A_Activity extends Activity {
    Context context;
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        context = getApplicationContext();
        setButtonClickListener();
    }

    private void setButtonClickListener() {

        button_1 = (Button)findViewById(R.id.button1);
        button_1.setOnClickListener(new View.OnClickListener() {
            public void onClick(View v) {       
                Intent intentCall = new Intent(context,com.them.cp.ConnexionManagerService.class);
                intentCall.putExtra("WHO_IS_CALLED","FIRST_ACTIVITY");
                context.startService(intentCall);                   
            }
        });

        button_2 = (Button)findViewById(R.id.button2);
        button_2.setOnClickListener(new View.OnClickListener() {
            public void onClick(View v) {
                Intent intentCall = new Intent(context,com.them.cp.ConnexionManagerService.class);
                intentCall.putExtra("WHO_IS_CALLED","SECOND_ACTIVITY");
                context.startService(intentCall);       
            }
        });
    }
} 
```

还有我的服务

```
 public class ConnexionManagerService extends Service{
    public class IsConnectedAsync extends AsyncTask<String , Void, Void>{
        protected Void doInBackground(String... whoIsCalled) {
            String redirectedURL = getRedirectedURL();
            if(redirectedURL.equalsIgnoreCase(IF_NOT_CONNECTED_URL)){
                if(whoIsCalled[0].equalsIgnoreCase("FIRST_ACTIVITY")){
                    Intent trueIntent = new Intent(getBaseContext(), FirstActivity.class);
                    trueIntent.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
                    getApplication().startActivity(trueIntent);
                }
                else if(whoIsCalled[0].equalsIgnoreCase("SECOND_ACTIVITY")){
                    Intent trueIntent = new Intent(getBaseContext(), SecondActivity.class);
                    trueIntent.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
                    getApplication().startActivity(trueIntent);
                }       
            }
            else{
                Intent falseIntent = new Intent(getBaseContext(), PopUpLoginActivity.class);
                falseIntent.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
                getApplication().startActivity(falseIntent);
            }
        }
        return null;
    }
     }

     @Override
     public void onCreate() {
    Toast.makeText(this, "My Service Created", Toast.LENGTH_LONG).show();
    Log.d("service onCreate", "onCreate");
     }

     public int onStartCommand(Intent intent, int flags, int startId){
    String whoIsCalled = intent.getStringExtra("WHO_IS_CALLED");
    new IsConnectedAsync().execute(whoIsCalled);        
    return START_STICKY;
     }

     @Override
     public IBinder onBind(Intent intent) {
    return null;
     }
 } 
```

据我所知，我希望我可以发送一个意图，但似乎不可能，因为它不是 UI 线程。

**我的问题是：我该怎么做才能使这项服务更通用？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T07:05:00.040

> 我想使用相同的服务进行验证。

如果您不销毁服务，它将是相同的服务对象。如果启动服务的活动完成或停止服务，如果它是启动服务的唯一活动，它可能会被破坏。如果您想确保服务在后台提醒您在您的应用程序类（扩展应用程序）和您需要的每个活动中启动它。当一个活动停止服务或完成服务时，服务不会被销毁，因为您的应用程序类仍处于连接状态。

编辑：

为了避免一次又一次地写 putExtra：

```
public class StartOrder1 extends Intent {

     public StartOrder(Context ctx, String activity_name){
           super(ctx, ServiceName.class);
           if(activity_name != null)
                super.putExtra("WHO", activity_name);
           else
                super.putExtra("WHO", "UNKNOWN");
     }

     public String getWho(){
           reurn.getIntExtra("WHO");
     }
} 
```

要启动它：

```
this.startService(new StartOrder1(this, "My activity name")); 
```

最佳解决方案：

```
public class StartOrder2 extends Intent {

     public StartOrder(Activity a){
           super(a, ServiceName.class);
           super.putExtra("WHO", a.toString());
     }

     public String getWho(){
           reurn.getIntExtra("WHO");
     }
} 
```

您可以在每个 Activity 中重写 toString 方法，传递活动名称、类名，无论您想要什么。然后当你开始一个意图时：

```
this.startService(new StartOrder2(this)); 
```

或使用此实用程序扩展 Activity：

```
public class EnhancedActivity extends Activity{

     protected startMyService(String name){
          Intent i = new Intent(this, MyService.class);
          i.putExtra("who", name);
          startService(i);
     }
} 
```

并在您的最后一项活动中调用它

```
[...]
super.startMyService("activity_name");
[...] 
```

# java - JTable 未在 Java Applet 中的表中呈现 JCheckBox 或 JComboBox

> ID：11255516
> 
> 赞同：-1
> 
> 时间：2012-06-29T03:01:55.473
> 
> 标签：java, swing, jtable, jcombobox, japplet

我无法获取我用来在我的小程序中显示复选框或组合框的 JTable。

这是无法正常工作的代码

```
 String[] options = {"download", "ignore"};
 Object[] obj = {new JComboBox(options), ((MetadataList)array.get(1)).getMetadata("Filename").getValue()};

 defaultTableModel2.addRow(obj); 
```

defaultTableModel2 只是一个 DefaultTableModel defaultTabelModel2 = new DefaultTableModel() 所以没有什么太戏剧化的地方。上面的代码使用的是 JComboBox，但我也尝试过使用 JCheckBox，并且存在相同的问题。

```
javax.swing.JComboBox[,0,0,0x0,invalid,layout=javax.swing.plaf.basic.BasicComboBoxUI$Handler,alignmentX=0.0,alignmentY=0.0,border=javax.swing.plaf.synth.SynthBorder@8380df,flags=320,maximumSize=,minimumSize=,preferredSize=,isEditable=false,lightWeightPopupEnabled=true,maximumRowCount=8,selectedItemReminder=download] 
```

是出现而不是 JComboBox

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-29T03:43:50.733

例如：

```
import java.awt.*;
import javax.swing.*;
import javax.swing.table.*;

@SuppressWarnings("serial")
public class TableJunk extends JPanel {
   enum Day {MONDAY, TUESDAY, WEDNESDAY, THURSDAY, FRIDAY, SATURDAY, SUNDAY}
   MyTableModel tableModel = new MyTableModel();
   private JTable myTable = new JTable(tableModel);

   public TableJunk() {
      setLayout(new BorderLayout());
      add(new JScrollPane(myTable));

      Object[] rowData = {Day.MONDAY, Boolean.TRUE};
      tableModel.addRow(rowData );
      rowData = new Object[]{Day.TUESDAY, Boolean.TRUE};
      tableModel.addRow(rowData );
      rowData = new Object[]{Day.WEDNESDAY, Boolean.TRUE};
      tableModel.addRow(rowData );
      rowData = new Object[]{Day.THURSDAY, Boolean.TRUE};
      tableModel.addRow(rowData );
      rowData = new Object[]{Day.FRIDAY, Boolean.TRUE};
      tableModel.addRow(rowData );
      rowData = new Object[]{Day.SATURDAY, Boolean.FALSE};
      tableModel.addRow(rowData );
      rowData = new Object[]{Day.SUNDAY, Boolean.FALSE};
      tableModel.addRow(rowData );

      // create the combo box for the column editor          
      JComboBox<Day> comboBox = new JComboBox<TableJunk.Day>(Day.values());
      myTable.getColumnModel().getColumn(0).setCellEditor(new DefaultCellEditor(comboBox));
   }

   private static void createAndShowGui() {
      TableJunk mainPanel = new TableJunk();

      JFrame frame = new JFrame("TableJunk");
      frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
      frame.getContentPane().add(mainPanel);
      frame.pack();
      frame.setLocationByPlatform(true);
      frame.setVisible(true);
   }

   public static void main(String[] args) {
      SwingUtilities.invokeLater(new Runnable() {
         public void run() {
            createAndShowGui();
         }
      });
   }

   private static class MyTableModel extends DefaultTableModel {
      private static final String[] COLUMN_NAMES = {"Day", "Work Day"};

      public MyTableModel() {
         super(COLUMN_NAMES, 0);
      }

      // this method will allow the check box to be rendered in the 2nd column
      public java.lang.Class<?> getColumnClass(int columnIndex) {
         if (columnIndex == 0) {
            return Day.class;
         } else if (columnIndex == 1) {
            return Boolean.class;
         } else {
            return super.getColumnClass(columnIndex);
         }
      };
   }
} 
```

# css - CSS：是否可以有一个 3 列布局，左列和中心列都灵活地填充空间？

> ID：11255521
> 
> 赞同：1
> 
> 时间：2012-06-29T03:02:39.350
> 
> 标签：css, position, positioning

可以在中间列上使用`position:absolute`and`left`来`right`设置它相对于父 div 的结束位置。

但是，我希望能够让中心 div 的左侧从左列结束的右侧开始，并且左列可以调整（基于其内容）。

这似乎是一件非常基本的事情，但据我所知，没有弹性盒就无法做到这一点。这是真的？对语义上多余的元素和某些样式设置的巧妙嵌套，我无能为力`auto`吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T03:10:39.233

如果 right`div`有一些设置宽度（以 % 或 px 为单位），那么可以，您可以让 left`div`的宽度由其内容定义，同时让中心`div`填充剩余空间：

```
#right {
  position: absolute; /* position in top right corner */
  top: 0;
  right: 0;
  width: 80px;
}
#center {
  margin-right: 80px; /* same as #right width */
}
#left {
  float: left;
} 
```

[**jsFiddle DEMO**](http://jsfiddle.net/jackwanders/JFCHw/) ​</p>

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T03:08:59.420

据我所知，使用简单的浮动块会更好。如果您想将所有这些绝对定位在一起，您可以将它们包装在一个绝对容器中，然后将它们浮动在里面。也许我只是不明白为什么你需要它们绝对定位，但这似乎是一个可行的选择。

# wcf - WCF 客户端读取 JSONP 响应

> ID：11255528
> 
> 赞同：0
> 
> 时间：2012-06-29T03:04:24.263
> 
> 标签：wcf, jsonp

我正在使用 WCF 为 Web 服务编写一个简单的客户端。不幸的是，Web 服务只回答 JSONP 消息，而不是纯 JSON。

是否可以使用 .NET 4.0 中的内置功能来执行此操作，或者我是否需要扩展其他内容以从我从服务器获得的答案中去除函数名称、{ 和 }？我知道如何读取 JSON 响应，但还不知道 JSONP。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T00:09:02.547

您需要的是自定义消息编码器。在服务器端，是编码器将填充（函数调用）添加到响应中，因此您需要在客户端使用类似的东西来删除该填充，然后再处理消息（可能将其委托给另一个编码器）。在编码器上您需要担心的另一件事是，用于 JSONP (application/x-javascript) 的内容类型通常不会被识别为 JSON 内容类型（因为它不是，它是一个函数调用），因此编码器还应该将该内容类型“翻译”为被委托调用的编码器所理解的内容类型。

下面的代码显示了这种编码器的一个示例。正如您提到的服务所做的那样，该服务已被修改为始终包装结果。

```
public class StackOverflow_11255528
{
    [ServiceContract]
    public interface ICalculator
    {
        [WebGet(ResponseFormat = WebMessageFormat.Json)]
        int Add(int x, int y);
        [WebGet(ResponseFormat = WebMessageFormat.Json)]
        int Subtract(int x, int y);
    }
    [ServiceContract]
    public class CalculatorService
    {
        [WebGet(ResponseFormat = WebMessageFormat.Json)]
        public Stream Add(int x, int y)
        {
            return ReturnWrapped(x + y);
        }

        [WebGet(ResponseFormat = WebMessageFormat.Json)]
        public Stream Subtract(int x, int y)
        {
            return ReturnWrapped(x - y);
        }

        private Stream ReturnWrapped(int result)
        {
            string callback = "Something";
            string response = string.Format("{0}({1});", callback, result);
            WebOperationContext.Current.OutgoingResponse.ContentType = "application/x-javascript";
            return new MemoryStream(Encoding.UTF8.GetBytes(response));
        }
    }
    public class JsonpAwareClientMessageEncodingBindingElement : MessageEncodingBindingElement
    {
        WebMessageEncodingBindingElement webEncoding;

        public JsonpAwareClientMessageEncodingBindingElement()
        {
            this.webEncoding = new WebMessageEncodingBindingElement();
        }

        public override MessageEncoderFactory CreateMessageEncoderFactory()
        {
            return new JsonpAwareClientMessageEncoderFactory(this.webEncoding.CreateMessageEncoderFactory());
        }

        public override MessageVersion MessageVersion
        {
            get { return this.webEncoding.MessageVersion; }
            set { this.webEncoding.MessageVersion = value; }
        }

        public override BindingElement Clone()
        {
            return new JsonpAwareClientMessageEncodingBindingElement();
        }

        public override IChannelFactory<TChannel> BuildChannelFactory<TChannel>(BindingContext context)
        {
            context.BindingParameters.Add(this);
            return context.BuildInnerChannelFactory<TChannel>();
        }

        class JsonpAwareClientMessageEncoderFactory : MessageEncoderFactory
        {
            private MessageEncoderFactory factory;

            public JsonpAwareClientMessageEncoderFactory(MessageEncoderFactory factory)
            {
                this.factory = factory;
            }

            public override MessageEncoder Encoder
            {
                get { return new JsonpAwareClientMessageEncoder(this.factory.Encoder); }
            }

            public override MessageVersion MessageVersion
            {
                get { return this.factory.MessageVersion; }
            }
        }

        class JsonpAwareClientMessageEncoder : MessageEncoder
        {
            private MessageEncoder encoder;

            public JsonpAwareClientMessageEncoder(MessageEncoder encoder)
            {
                this.encoder = encoder;
            }

            public override string ContentType
            {
                get { return this.encoder.ContentType; }
            }

            public override string MediaType
            {
                get { return this.encoder.MediaType; }
            }

            public override MessageVersion MessageVersion
            {
                get { return this.encoder.MessageVersion; }
            }

            public override bool IsContentTypeSupported(string contentType)
            {
                if (contentType == "application/x-javascript")
                {
                    contentType = "application/json";
                }

                return this.encoder.IsContentTypeSupported(contentType);
            }

            public override Message ReadMessage(ArraySegment<byte> buffer, BufferManager bufferManager, string contentType)
            {
                if (contentType == "application/x-javascript")
                {
                    contentType = "application/json";
                }

                byte openParenthesis = (byte)'(';
                byte closeParenthesis = (byte)')';
                int startOfParenthesis = buffer.Offset;
                int count = buffer.Count;
                while (buffer.Array[startOfParenthesis] != openParenthesis)
                {
                    startOfParenthesis++;
                    count--;
                }

                // Skipped 'Func', now skipping '('
                startOfParenthesis++;
                count--;

                // Now need to trim the closing parenthesis and semicolon, if any
                int endOfParenthesis = buffer.Offset + buffer.Count - 1;
                while (buffer.Array[endOfParenthesis] != closeParenthesis)
                {
                    endOfParenthesis--;
                    count--;
                }

                // Skipped back to ')', now remove it
                endOfParenthesis--;
                count--;

                return this.encoder.ReadMessage(new ArraySegment<byte>(buffer.Array, startOfParenthesis, count), bufferManager, contentType);
            }

            public override Message ReadMessage(Stream stream, int maxSizeOfHeaders, string contentType)
            {
                throw new NotSupportedException("Streamed mode not supported");
            }

            public override ArraySegment<byte> WriteMessage(Message message, int maxMessageSize, BufferManager bufferManager, int messageOffset)
            {
                return this.encoder.WriteMessage(message, maxMessageSize, bufferManager, messageOffset);
            }

            public override void WriteMessage(Message message, Stream stream)
            {
                throw new NotSupportedException("Streamed mode not supported");
            }
        }
    }
    public static void Test()
    {
        string baseAddress = "http://" + Environment.MachineName + ":8000/Service";
        ServiceHost host = new ServiceHost(typeof(CalculatorService), new Uri(baseAddress));
        WebHttpBinding binding = new WebHttpBinding { CrossDomainScriptAccessEnabled = true };
        host.AddServiceEndpoint(typeof(CalculatorService), binding, "").Behaviors.Add(new WebHttpBehavior());
        host.Open();
        Console.WriteLine("Host opened");

        WebClient c = new WebClient();
        Console.WriteLine(c.DownloadString(baseAddress + "/Add?x=5&y=8&callback=Func"));

        CustomBinding clientBinding = new CustomBinding(
            new JsonpAwareClientMessageEncodingBindingElement(),
            new HttpTransportBindingElement { ManualAddressing = true });
        ChannelFactory<ICalculator> factory = new ChannelFactory<ICalculator>(clientBinding, new EndpointAddress(baseAddress));
        factory.Endpoint.Behaviors.Add(new WebHttpBehavior());
        ICalculator proxy = factory.CreateChannel();
        Console.WriteLine(proxy.Subtract(456, 432));

        Console.Write("Press ENTER to close the host");
        Console.ReadLine();
        host.Close();
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T06:22:29.007

我知道没有直接的方法，但让我们首先尝试了解 JSON 和 JSONP 之间的区别

```
//JSON
{"prop":"val"}
//JSONP
func({"prop":"val"}); 
```

要获取 JSON 字符串，您可以简单地去除“（”和“）”大括号之间的所有内容，然后使用不同的 JSON 库将其转换为对象。

```
string jsonString = Regex.Match(jsonpString, @"\(([^)]*)\)").Groups[1].Value 
```

# extjs4 - EXT JS 应用程序设计建议

> ID：11255529
> 
> 赞同：1
> 
> 时间：2012-06-29T03:04:24.527
> 
> 标签：extjs4

需要 EXT JS 应用程序设计建议。这是我到目前为止所拥有的图表：

[http://screencast.com/t/RCdve5dO2](http://screencast.com/t/RCdve5dO2)

我有一个带有工具栏的窗口。在 tb 上有 3 个菜单、一个按钮和一个用于跟踪一些信息的商店。窗口本身是一个图像，根据菜单的值单击按钮时会发生变化。我有一个菜单处理程序。

这一切都可以在一个窗口中正常运行。

我遇到的问题是我可以在放置事件上创建多个窗口实例（从左侧的树拖动）。当打开多个窗口时，会出现某种菜单冲突。当在另一个窗口上选择一个项目时，一个窗口中断的菜单。像这样：

[http://screencast.com/t/bbJ8RjlQK1b1](http://screencast.com/t/bbJ8RjlQK1b1)

似乎窗口的所有实例似乎都共享同一个处理程序，或者每个窗口都共享同一个菜单实例？我需要调查一下。

我的问题：

所以退后一步，要求是每个重复的窗口（可能有很多）必须独立运行。从设计的角度来看，实现这一目标的最佳方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T03:14:59.027

让我猜猜，您正在为 initComponent 函数之外的组件类定义对象或数组。

你可以发布你的代码吗？

您应该像这样在 initComponent 中声明所有非原始对象：

```
Ext.define('SomeComponent', {

  extend:'SomeOtherComponent',

  title:'a string is a primitive type. so is a number',

  initComponent: function(){

    Ext.applyIf(this, {
      someNonPrimitiveProperty:{ text:'arrays and objects are non-primitive' }
    });

    this.callParent(arguments); //always call this

  }
}); 
```

# python - Python 简单 SSL 套接字服务器

> ID：11255530
> 
> 赞同：14
> 
> 时间：2012-06-29T03:04:27.003
> 
> 标签：python, openssl

只是尝试设置一个简单的 SSL 服务器。过去，我从来没有为我做过任何 SSL 工作。我对 SSL 证书和签名的方式有一个大致的了解。

代码很简单

```
import socket, ssl

context = ssl.SSLContext(ssl.PROTOCOL_TLSv1)
context.load_cert_chain(certfile="mycertfile") ###############

bindsocket = socket.socket()
bindsocket.bind(('', 2099))
bindsocket.listen(5)

while True:
    newsocket, fromaddr = bindsocket.accept()
    sslsoc = context.wrap_socket(newsocket, server_side=True)
    request = sslsoc.read()
    print(request) 
```

后面有###s 的那一行是行不通的。我不知道我必须用 openssl 做什么来生成一个可以在这里工作的 PEM 文件。

谁能启发我如何使这个简单的套接字工作。

顺便说一句，这不用于 HTTP。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-12-09T06:20:57.870

您可以使用此命令生成自签名证书

```
openssl req -new -x509 -days 365 -nodes -out cert.pem -keyout cert.pem 
```

openssl 框架会要求你输入一些信息，比如你的国家、城市等，只要按照说明，你就会得到一个`cert.pem`文件。输出文件将包含您的 RSA 私钥和证书，您可以使用它生成您的公钥。输出文件如下所示：

```
-----BEGIN RSA PRIVATE KEY-----
 # your private key
-----END RSA PRIVATE KEY-----
-----BEGIN CERTIFICATE-----
 # your certificate
-----END CERTIFICATE----- 
```

只需加载它，ssl 模块将为您处理其余的：

```
context.load_cert_chain(certfile="cert.pem", keyfile="cert.pem") 
```

顺便说一句，python2 中**没有**“SSLContext”。对于使用 python2 的人，只需在包装套接字时分配 pem 文件：

```
newsocket, fromaddr = bindsocket.accept()
connstream = ssl.wrap_socket(newsocket,
                             server_side=True,
                             certfile="cert.pem",
                             keyfile="cert.pem",
                             ssl_version=YOUR CHOICE) 
```

可用的 ssl 版本：`ssl.PROTOCOL_TLSv1`, `ssl.PROTOCOL_SSLv2`, `ssl.PROTOCOL_SSLv3`, `ssl.PROTOCOL_SSLv23`. 如果您不知道，`ssl.PROTOCOL_SSLv23`可能是您的选择，因为它提供了与其他版本的最大兼容性。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2019-06-27T15:58:18.667

在您的示例中，您提供了`certfile`，但没有`keyfile`。两者都是必需的。

# ios - 如何使用 Core Data 在 UITableView 中汇总类似的行，例如 iOS Phone 最近

> ID：11255531
> 
> 赞同：1
> 
> 时间：2012-06-29T03:04:27.190
> 
> 标签：ios, uitableview, nsfetchedresultscontroller

在 UITableView 中汇总类似行的最佳方法是什么，例如 Phone 的“Recents”选项卡。我正在使用核心数据，目前根据我的 NSManagedObject 中的“时间戳”字段按时间顺序显示数据。iPhone 最近的表格将行分组为一行以压缩冗余数据。

实现这一目标的最佳方法是什么？

![汇总相似的行](../Images/f242f4719fd395b3af4069d0cd8a198d.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T07:54:08.493

我确信 Apple 在他们的代码中有一些更简单的方法，但这就是我想出的。我在方法中实例化了1 个`NSArray`（带有一些原始数据），`viewDidLoad`然后`NSMutableArray`在 .h 文件中将 2 个声明为属性（并延迟实例化）。这是我的代码。

。H

```
@interface RollUpTableViewController : UITableViewController

@property (strong, nonatomic) IBOutlet UITableView *rollUpTableView;

@property (strong, nonatomic) NSMutableArray *names;
@property (strong, nonatomic) NSMutableArray *countOfNames;

@end 
```

.m

```
-(NSMutableArray *)names{
    if(!_names) _names = [[NSMutableArray alloc]init];
    return _names;
}

-(NSMutableArray *)countOfNames{
    if (!_countOfNames) _countOfNames = [[NSMutableArray alloc] init];
    return _countOfNames;
}

- (void)viewDidLoad
{
    [super viewDidLoad];

    NSArray *rawData = [[NSArray alloc] initWithObjects:@"Jack", @"Jill", @"Jill", @"Ryan", @"Bill", @"Ryan", @"Ryan", @"Ryan", @"Steve", @"Katie", @"Jill", @"Ryan", @"Ryan", nil];

    int countOfLikeNames = 0;
    int i=0;
    for (i = 0; i < [rawData count]; i++){
        if (i == 0) {
            //Putting the first name in the names NSMutableArray no matter what
            [self.names addObject:[rawData objectAtIndex:i]];
            countOfLikeNames = countOfLikeNames + 1;
        } else {
            //Checking if the current name is the same as the previous
            if ([rawData objectAtIndex:i] == [rawData objectAtIndex:(i-1)]) { 
                countOfLikeNames = countOfLikeNames + 1;
            } else {
                //Once it runs into a difference in names, add the final count to the countOfNames NSMutableArray
                [self.countOfNames addObject:[NSNumber numberWithInt:countOfLikeNames]];
                //Starting the count over
                countOfLikeNames = 1;
                //Adding the next name
                [self.names addObject:[rawData objectAtIndex:i]];
            }
        }
        //if the for loop is on its last iteration, add what will be the last object for countOfNames
        if (i == ([rawData count] - 1)) {
            [self.countOfNames addObject:[NSNumber numberWithInt:countOfLikeNames]];
        }

    }

}

#pragma mark - Table view data source

- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{
    // Return the number of sections.
    return 1;
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    // Return the number of rows in the section.
    return [self.names count];

}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"Cell";
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

    cell.textLabel.text = [self.names objectAtIndex:indexPath.row];
    cell.detailTextLabel.text = [[self.countOfNames objectAtIndex:indexPath.row] stringValue];

    return cell;
}

@end 
```

我有点懒，只是在 UITableViewCell 上使用了 Apple 内置的“Right Detail”样式，这就是原始数据的结果。

![rollUpTable查看结果](../Images/94e1bed3791d0786f3aa85430cdb7627.png)

您必须比较您从 CoreData 获得的时间戳，但希望这可以帮助您了解这个概念。

# apache-flex - FlexPrintJob 不打印图形过滤器

> ID：11255532
> 
> 赞同：2
> 
> 时间：2012-06-29T03:05:01.340
> 
> 标签：apache-flex, printing

如果我在 UIComponent.filters 属性中分配过滤器，它们会在屏幕上正常显示，但是当我通过 FlexPrintJob 打印它们时它们会被忽略。

我试过 DropshadowFilter、BlurFilter、BevelFilter。他们都没有出现。我尝试了所有的位图缓存模式。还有 printAsBitmap。

您可以通过查看 ASDoc for FlexPrintJob 中的示例来进行尝试。只需将过滤器分配给某些打印组件。

你能告诉我怎么做吗？

我在第一个文件中放置了一个过滤器：

```
enter code here

FormPrintHeader.mxml

<?xml version="1.0"?>
<!-- Custom control for the header area of the printed page. -->
<s:VGroup name="FormPrintHeader"
        xmlns:fx="http://ns.adobe.com/mxml/2009"
        xmlns:s="library://ns.adobe.com/flex/spark"
        width="60%"
        horizontalAlign="right" filters="{[new spark.filters.BlurFilter]}">

    <s:Label text="This is a placeholder for first page contents"/>

</s:VGroup>

FormPrintFooter.mxml

<?xml version="1.0"?>
<!-- Custom control for the footer area of the printed page. -->
<s:VGroup name="FormPrintFooter"
        xmlns:fx="http://ns.adobe.com/mxml/2009"
        xmlns:s="library://ns.adobe.com/flex/spark"
        width="60%"
        horizontalAlign="right" >

    <!-- Declare and initialize the product total variable. -->
    <fx:Script>
        <![CDATA[
            [Bindable]
            public var pTotal:Number = 0;
        ]]>
    </fx:Script>

    <s:Label text="Product Total: {pTotal}"/>

</s:VGroup>

FormPrintView.mxml

<?xml version="1.0"?>
<!-- Custom control to print the Halo DataGrid control on multiple pages. -->
<s:VGroup name="FormPrintView"
        xmlns:fx="http://ns.adobe.com/mxml/2009"
        xmlns:s="library://ns.adobe.com/flex/spark"
        xmlns:mx="library://ns.adobe.com/flex/mx"
        xmlns="*">

    <fx:Script>
        <![CDATA[
            import mx.core.*;

            // Declare and initialize the variables used in the component.
            // The application sets the actual prodTotal value.
            [Bindable]
            public var pageNumber:Number = 1;

            [Bindable]
            public var prodTotal:Number = 0;

            // Control the page contents by selectively hiding the header and
            // footer based on the page type.
            public function showPage(pageType:String):void {
                if (pageType == "first" || pageType == "middle") {
                    // Hide the footer.
                    footer.includeInLayout = false;
                    footer.visible = false;
                }
                if (pageType == "middle" || pageType == "last") {
                    // The header won't be used again; hide it.
                    header.includeInLayout = false;
                    header.visible = false;
                }
                if (pageType == "last") {
                    // Show the footer.
                    footer.includeInLayout = true;
                    footer.visible = true;
                }
                //Update the DataGrid layout to reflect the results.
                validateNow();
            }
        ]]>
    </fx:Script>

    <!-- The template for the printed page, with the contents for all pages. -->
    <s:VGroup width="80%" horizontalAlign="left">
        <s:Label text="Page {pageNumber}"/>
    </s:VGroup>

    <FormPrintHeader id="header" />

    <!-- The data grid. The sizeToPage property is true by default, so the last
        page has only as many grid rows as are needed for the data. -->
    <mx:PrintDataGrid id="myDataGrid" width="60%" height="100%">
        <!-- Specify the columns to ensure that their order is correct. -->
        <mx:columns>
            <mx:DataGridColumn dataField="Index" />
            <mx:DataGridColumn dataField="Qty" />
        </mx:columns>
    </mx:PrintDataGrid>

    <!-- Create a FormPrintFooter control and set its prodTotal variable. -->
    <FormPrintFooter id="footer" pTotal="{prodTotal}" />

</s:VGroup>

PrintDataGridExample.mxml

<?xml version="1.0"?>
<!-- Main application to print a Halo DataGrid control on multiple pages. -->
<s:Application name="PrintDataGridExample.mxml"
        xmlns:fx="http://ns.adobe.com/mxml/2009"
        xmlns:s="library://ns.adobe.com/flex/spark"
        xmlns:mx="library://ns.adobe.com/flex/mx"
        initialize="initData();">

    <fx:Script>
        <![CDATA[

        import mx.printing.*;
        import mx.collections.ArrayCollection;
        import FormPrintView;
        import mx.core.FlexGlobals;

        // Declare variables and initialize simple variables.
        [Bindable]
        public var dgProvider:ArrayCollection;
        public var footerHeight:Number = 20;
        public var prodIndex:Number;
        public var prodTotal:Number = 0;

        // Data initialization.
        public function initData():void {
            // Create the data provider for the DataGrid control.
            dgProvider = new ArrayCollection;
        }

        // Fill the dgProvider ArrayCollection with the specified items.
        public function setdgProvider(items:int):void {
            prodIndex=1;
            dgProvider.removeAll();
            for (var z:int=0; z<items; z++) {
                var prod1:Object = {};
                prod1.Qty = prodIndex * 7;
                prod1.Index = prodIndex++;
                prodTotal += prod1.Qty;
                dgProvider.addItem(prod1);
            }
        }

        // The function to print the output.
        public function doPrint():void {
            var printJob:FlexPrintJob = new FlexPrintJob();
            if (printJob.start()) {
                // Create a FormPrintView control as a child of the current view.
                var thePrintView:FormPrintView = new FormPrintView();
                FlexGlobals.topLevelApplication.addElement(thePrintView);

                //Set the print view properties.
                thePrintView.width=printJob.pageWidth;
                thePrintView.height=printJob.pageHeight;
                thePrintView.prodTotal = prodTotal;
                // Set the data provider of the FormPrintView component's data grid
                // to be the data provider of the displayed data grid.
                thePrintView.myDataGrid.dataProvider = myDataGrid.dataProvider;
                // Create a single-page image.
                thePrintView.showPage("single");
                // If the print image's data grid can hold all the provider's rows,
                // add the page to the print job.
                if (!thePrintView.myDataGrid.validNextPage)  {
                    printJob.addObject(thePrintView);
                }
                // Otherwise, the job requires multiple pages.
                else {
                    // Create the first page and add it to the print job.
                    thePrintView.showPage("first");
                    printJob.addObject(thePrintView);
                    thePrintView.pageNumber++;
                    // Loop through the following code until all pages are queued.
                    while (true) {
                        // Move the next page of data to the top of the print grid.
                        thePrintView.myDataGrid.nextPage();
                        thePrintView.showPage("last");
                        // If the page holds the remaining data, or if the last page
                        // was completely filled by the last grid data, queue it for printing.
                        // Test if there is data for another PrintDataGrid page.
                        if (!thePrintView.myDataGrid.validNextPage) {
                            // This is the last page; queue it and exit the print loop.
                            printJob.addObject(thePrintView);
                            break;
                        } else {
                            // This is not the last page. Queue a middle page.
                            thePrintView.showPage("middle");
                            printJob.addObject(thePrintView);
                            thePrintView.pageNumber++;
                        }
                    }
                }
                // All pages are queued; remove the FormPrintView control to free memory.
                FlexGlobals.topLevelApplication.removeElement(thePrintView);
            }
            // Send the job to the printer.
            printJob.send();
        }
        ]]>
    </fx:Script>

    <s:Panel title="DataGrid Printing Example"
            width="75%" height="75%"
            horizontalCenter="0" verticalCenter="0">
        <s:VGroup left="10" right="10" top="10" bottom="10">
            <mx:DataGrid id="myDataGrid" dataProvider="{dgProvider}">
                <mx:columns>
                    <mx:DataGridColumn dataField="Index"/>
                    <mx:DataGridColumn dataField="Qty"/>
                </mx:columns>
            </mx:DataGrid>

            <s:Label width="100%" color="blue"
                text="Specify the number of lines and click Fill Grid first. Then you can click Print."/>

            <s:TextInput id="dataItems" text="35"/>

            <s:HGroup>
                <s:Button id="setDP" label="Fill Grid" click="setdgProvider(int(dataItems.text));"/>
                <s:Button id="printDG" label="Print" click="doPrint();"/>
            </s:HGroup>
        </s:VGroup>
    </s:Panel>

</s:Application> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T09:36:36.287

请使用以下代码修改您的 FormPrintHeader.mxml：-

```
<?xml version="1.0"?>
<!-- Custom control for the header area of the printed page. -->
<s:VGroup name="FormPrintHeader"
          xmlns:fx="http://ns.adobe.com/mxml/2009"
          xmlns:s="library://ns.adobe.com/flex/spark"
          width="60%"
          horizontalAlign="right" xmlns:mx="library://ns.adobe.com/flex/mx" 
          filters="{[new flash.filters.BlurFilter()]}" creationComplete="addHeaderPrinting(this)">
    <fx:Script>
        <![CDATA[
            import flash.filters.BlurFilter;

            import mx.graphics.ImageSnapshot;

            private function addHeaderPrinting(source:IBitmapDrawable):void {
                var imageBitmapData:BitmapData = ImageSnapshot.captureBitmapData(source);
                swfLoader.source = new Bitmap(imageBitmapData);
                mylblPrint.includeInLayout = mylblPrint.visible = false;
            }
        ]]>
    </fx:Script>

    <mx:Label id="mylblPrint"
             text="This is a placeholder for first page contents. This is a placeholder for first page contents"/>
    <mx:SWFLoader id="swfLoader" >
        <mx:filters>
            <mx:BlurFilter />
        </mx:filters>
    </mx:SWFLoader>
</s:VGroup> 
```

希望这可以帮助你。

# sorting - C#获取枚举索引

> ID：11255533
> 
> 赞同：0
> 
> 时间：2012-06-29T03:05:10.687
> 
> 标签：sorting

我有这个枚举：

```
public enum SymbolPair
    { 
        AUDJPY = 0, AUDNZD, AUDUSD, CADJPY, CHFJPY, EURCHF, EURGBP, EURJPY, EURUSD, GBPJPY, GBPUSD, NZDUSD, USDCAD, USDCHF, USDJPY 
    } 
```

我有一组符号字符串

```
List<string> symbols = new List<string>(){ }; 
```

符号根据输入参数中输入的符号动态加载到集合中。它们可以按任何顺序和任何计数加载。

因此，例如一组可以加载“EUR/USD”、“CHFJPY”、“GBPUSD”

我需要找到枚举类型的索引对应的索引。例如，在这种情况下，我需要索引 8、4 和 10。

有人可以给出一个想法，如何使用 linq 或代表或任何其他有效的方式来做到这一点。谢谢

编辑：我需要这些方面的东西，但这不起作用，因为 linq 确实返回单个值。我怎样才能得到那个单一的索引？

```
 SymbolPair[] enumList = (SymbolPair[])Enum.GetValues(typeof(SymbolPair));

    foreach (string symbol in symbols)
    {           
        int instrumentIndex = from symbolPair in enumList 
                               where symbolPair.ToString() == symbol
                                select (int)symbolPair;
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T04:25:37.573

好，我知道了。无论如何谢谢。

```
SymbolPair[] symbolEnumList = (SymbolPair[])Enum.GetValues(typeof(SymbolPair));
int instrumentIndex = (int)symbolEnumList.Single(symbolPair => symbolPair.ToString() == instr.Symbol.ToString()); 
```

# php - 使用 jQuery getScript 从 PHP 脚本调用 JavaScript 函数

> ID：11255535
> 
> 赞同：0
> 
> 时间：2012-06-29T03:05:23.623
> 
> 标签：php, javascript, jquery

一般来说，我对 jQuery 和 Web 开发非常陌生。我正在尝试使用 jQuery 的“.getScript()”方法来加载几个用特定 PHP 文件编写的 JavaScript 脚本，但我认为我遗漏了一些东西。（**注意：**我注意到几个不同的问题，看起来他们有可能帮助我，但没有一个。如果你知道，请随时向我指出那个方向。谢谢。）

当我在 Firebug 中调试它时，它会点击“.getScript()”调用然后跳到下一行，似乎没有执行。
这是我正在尝试的方法：

```
jQuery.getScript("relative/path/to/script/phpScript.php", function(){
    alert("I'm HERE!");
    setValues(); // JavaScript function that's written by phpScript.php
}); 
```

在这种情况下，JavaScript 是由“phpScript.php”文件生成的，而我的“alert()”永远不会运行，但我不知道为什么。有任何想法吗？
我确实注意到按照另一个问题中的建议，我遇到了某种解析错误。我不知道如何解决。这是代码：

```
jQuery(document).ajaxError(function(event, request, settings){
      alert('error loading: ' + request.status + "\nevent: "+ event);
      for (var key in request){
          if (request.hasOwnProperty(key)) {
              alert(key + " -> " + request[key]);
          }
     }
}); 
```

顺便说一句，我们正在使用“jQuery.noConflict();”运行 jQuery 设置，这就是为什么我不使用速记“$()”表示法。

以下是 getScript() 中 GET 调用的响应正文的片段：

```
<html><script type="text/javascript">
function setValues()
    jQuery("#formname").text(window.formNAME);
    jQuery("#Form_Path").text(window.formPATH);
    jQuery("#Form_DB").text(window.formDB);
    jQuery('#pertaining_to').text(window.pertainNAME);
    jQuery("#Pertain_To_ID").text(window.pertainID);
    jQuery("#Form_ID").text(window.formID);
    jQuery("#Field_ID").text(window.fieldName);
}
</script>

<head> 
```

在此先感谢，
-马克

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-29T03:15:48.700

如果您正在加载 JS 脚本，请尝试将它们作为离散函数写入 .js 文件（例如：jsscript.js），然后使用以下 HTML 行：

```
<script type='text/javascript' src='jsscript.js'></script> 
```

然后你可以直接调用函数而不使用 .getScript()。（当然，您需要将上述行放在调用脚本的位置之前。）

这似乎是一种比您当前尝试的更清洁的方法。

编辑：鉴于您目前的情况（即：生成 JS 脚本的 PHP 页面和调用脚本的 PHP 页面），也许您可​​以这样做？

```
//PHP page that generates the scripts
function gen_script() {
    //JS script generated into $script variable
    return $script;
}

//PHP page that calls the scripts
include ('generate.php');
echo gen_script(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-05T07:52:13.770

我以为您可以将 phpScript.php 文件编辑为

```
function setValues(){
  jQuery("#formname").text(window.formNAME);
  jQuery("#Form_Path").text(window.formPATH);
  //...
} 
```

那会好的。

# android - 如何获取以前关联的 wifi 网络？

> ID：11255539
> 
> 赞同：5
> 
> 时间：2012-06-29T03:05:50.733
> 
> 标签：android

有没有办法为 Android 设备获取以前关联的 Wifi 网络？最后，我想调出一个列表（例如，一个微调器），其中包含用户关联的所有网络。然后，我希望他们选择他们的“家庭网络”。但是，我找不到关联的历史。历史记录必须保存在某个地方，因为我可以调出我的“Wi-Fi 设置”，并且可以看到我之前关联的网络。他们只是在下方说“不在范围内”。

我检查了 WifiManager 但在那里找不到任何相关的东西。

我确实注意到只有根位置有历史记录（可能是因为网络的密码是明文形式）：

```
data/wifi/bcm_supp.conf 
```

我想要一个非root方法。

* * *

编辑：我现在*知道*这是可能的。如果您从 Market 或 Google Play 下载名为“Wifi Manager”的应用程序，您可以将下拉菜单下拉到“Known networks”，它们就会出现。我已经搜索了所有的网络文档，但是我仍然无法找到方法。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-29T17:42:14.547

您正在寻找的是：[https://developer.android.com/reference/android/net/wifi/WifiManager.html#getConfiguredNetworks()](https://developer.android.com/reference/android/net/wifi/WifiManager.html#getConfiguredNetworks())

这将为您提供所有以前关联的网络，因为它们必须已经配置才能连接到它们。

# android - 空检查编辑文本框android

> ID：11255540
> 
> 赞同：0
> 
> 时间：2012-06-29T03:05:59.970
> 
> 标签：android, try-catch

我想让空文本框检查android。我试过try catch，但它是强制关闭的。

下面是我的代码

```
 try{
                    name    = (EditText)findViewById(R.id.name);    
                    }catch(NullPointerException ex){
                        new AlertDialog.Builder(KawalanAppXTVT.this).setTitle("Error" )
                        .setMessage("That's not a number")
                        .setPositiveButton("OK", null).show(); 
```

有人能帮我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T03:13:24.480

如果您想将输入限制为您的数字，请`EditText`添加`android:inputType="number"`到其布局定义 xml。

*   要检查该字段是否为空，请使用`TextUtils.isEmpty(name.getText());`
*   检查字段内容是否为数字`TextUtils.isDigitsOnly(name.getText());`

你不需要`try...catch`块。

```
// ... onCreate()
name    = (EditText)findViewById(R.id.name); 

// ... when validating
if(!TextUtils.isDigitsOnly(name.getText())) {
new AlertDialog.Builder(KawalanAppXTVT.this).setTitle("Error" )
                        .setMessage("That's not a number")
                        .setPositiveButton("OK", null).show();

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-29T03:49:34.593

你可以这样检查：

```
if (name.length() == 0) {
    name.setError("Enter Username");
        } 
```

# c - 如何在没有选择的情况下检查非阻塞套接字超时

> ID：11255541
> 
> 赞同：1
> 
> 时间：2012-06-29T03:06:18.920
> 
> 标签：c, linux, sockets, tcp

我使用了一些遗留代码：**非阻塞**套接字，**选择**超时，**读取**（2）和**写入**（2）。现在它偶尔会由于 select/1024 fd 限制而失败。所以我需要更换选择。

似乎 RCVTIMEO 和 SNDTIMEO 也可以检查超时，但它们适用于阻塞模式，并且从非阻塞更改为阻塞影响太大。

那么还有其他最佳实践来检查**非阻塞**套接字（无**选择**）的超时吗？或者我必须得到一些计时器/纳米睡眠来解决这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-29T03:15:56.783

`poll()`本质上是 using 的直接替代品`select()`，但没有 1024 个文件描述符限制。您必须稍微更改代码以创建`struct pollfd`结构数组而不是使用`fd_set`s，但代码的整体结构不必更改。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-29T03:21:29.333

epoll 是比 select 更好的解决方案，不限于 1024 个描述符。

事实上，你可以使用[libevent](http://libevent.org)或[libev](http://libev.schmorp.de/)来处理低级异步套接字 I/O，它们是所谓的异步 I/O 的“最佳实践”。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-29T03:19:42.970

poll() 系统调用将超时，并且没有固定的文件描述符限制。如果你真的有 1000 个开放描述符，你可能会更好地使用 epoll()，它使用起来更复杂，但具有更好的缩放特性。

# javascript - 使用 Spine.Model.Ajax，如何在模型更新时处理响应 JSON 中的额外属性

> ID：11255543
> 
> 赞同：0
> 
> 时间：2012-06-29T03:06:44.927
> 
> 标签：javascript, spine.js

例如：

```
class User extends Spine.Controller
  @configure 'User', 'name'
  @extend Spine.Model.Ajax
  @url: '/save'

user = new User(name: 'test')
user.save()

User.bind 'update', (item) ->
  console.log(item.flag) # undefined 
```

`{flag: 0}`由于一些数据库错误，说'/save'响应，当Ajax完成时，Spine触发更新事件并更新`user`模型，但没有`flag`属性扩展到`user`更新时。那么，当我需要响应一些与模型略有不同的额外数据时，我该如何处理这种情况呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T06:31:37.190

再仔细阅读文档后，找到了答案：见[http://spinejs.com/docs/ajax](http://spinejs.com/docs/ajax)【自定义序列化】

# javascript - 粗略动画

> ID：11255544
> 
> 赞同：0
> 
> 时间：2012-06-29T03:06:55.880
> 
> 标签：javascript, jquery, html, css

任何人都知道为什么这个 jquery 上的动画很粗糙（实际上并没有动画）？

```
$('.close').click(function() {
    $('.hidden-content').fadeOut('fast', function (){
        $('.serv-button').fadeIn('fast');
    });
}); 
```

基本上，当您单击关闭按钮时，“.hidden-content”应该淡出，“serv-button”应该淡入。但它们只是出现并且不会淡出。这是我的工作示例，位于服务部分：

[http://www.hdesignonline.com/qdup/](http://www.hdesignonline.com/qdup/)

基本上我需要内容完全淡出它淡入的方式......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T03:19:01.273

看起来它正在褪色每个单独的块。如果您制作一个包装器来绕过所有这些块，并让其褪色而不是单个块，它最终会变得更加平滑。

# dart - 如何创建与另一个类/接口同名的类？

> ID：11255545
> 
> 赞同：0
> 
> 时间：2012-06-29T03:07:11.077
> 
> 标签：dart

我想创建自己的名为 Point 的类，但在 html 库中遇到了同名接口的问题。我错过了什么可以让我摆脱“已经定义为接口”的泡菜？

```
class Point
{
//r is x
// g is the difference between x+y and 0
// b is y
  num r,g,b;
  Point(this.r, this.g, this.b);
...
} 
```

> 内部错误：'http://127.0.0.1:3030/C:/Users/.../Desktop/dart/workspace/projects/.../Point.dart'：错误：第 1 行 pos 7：'Point'已经定义为接口类Point

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T03:24:47.473

导入具有要重用的类/接口的库时，请使用前缀对其进行限定，这将强制您显式使用原始类，并隐式使用新类。

```
#import('dart:html', prefix:'html'); 
```

`html.Point`将在html中使用点接口。
`Point`将在您的项目/库中使用该类。

# java - 这段代码（extjs）有什么区别？

> ID：11255546
> 
> 赞同：0
> 
> 时间：2012-06-29T03:07:33.157
> 
> 标签：java, jakarta-ee, extjs

我会先说我是一名初学者 Java EE 开发人员。

我写了以下代码。为什么会得到这个ID？

```
MsItemDTO msItemDTO = new MsItemDTO();
msItemDTO.setItemID(trInboundD.getItemID().getItemID());
trInboundDDTO.setItemID(msItemDTO); 
```

为什么没有得到 ID（ID = null）？

```
trInboundDDTO.setItemID(new MsItemDTO(trInboundD.getItemID().getItemID())); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T03:25:35.520

```
MsItemDTO msItemDTO = new MsItemDTO(); 
msItemDTO.setItemID(trInboundD.getItemID().getItemID()); 
trInboundDDTO.setItemID(msItemDTO); 
```

我们将详细介绍上面的代码：

1.  第一行，它将创建一个`MsItemDTO`类的实例或对象，对象名称为`msItemDTO`.
2.  第二行，我们将项目 ID 设置为`msItemDTO`我们在第一行创建的对象。
3.  第三行，我们将对象设置`msItemDTO`为另一个对象的`trInboundDDTO`Item Id 值。

现在我们将看看其他代码：

```
trInboundDDTO.setItemID(new MsItemDTO(trInboundD.getItemID().getItemID())); 
```

此行将为 MsItemDTO 创建一个对象，其中一些`arguments`名为`trInboundD.getItemID().getItemID()`. 在这里，您需要编写一个构造函数来使用此参数创建对象。否则，它不会创建任何对象，并将 Item id 保存为 null。所以这里的对象是不同的。第二个是我们试图将这个不同的对象设置为另一个`trInboundDDTO`将发生冲突的对象项目 ID。

希望这可以帮助你:)

# c# - Excel Dna - 刷新所有数据源和公式计算

> ID：11255548
> 
> 赞同：5
> 
> 时间：2012-06-29T03:07:38.847
> 
> 标签：c#, excel-dna

我有几个来自数据库的公式和数据。我想通过 ExcelDna 以编程方式刷新所有公式。所有这些公式都是 ExcelFunctions，我已将 ExcelCommand name = "Refresh" 放在我想重新计算到 Excel 工作表的地方。

我使用以下，但它只刷新本机 excel 函数，例如 NOW()、SUM() 等。它不会在 ExcelDna 函数上调用刷新？

```
[ExcelCommand(MenuName="Refresh", MenuText="Refresh"   )]
        public static void GetPositionCommand()
        {
            XlCall.Excel(XlCall.xlcCalculateNow);
        } 
```

提前致谢...

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-29T08:57:04.223

xlcCalculateNow 将仅计算 Excel 知道必须重新计算的公式。您可以将 Excel 函数标记为“易失性”，使其行为类似于 Excel 的 NOW() 函数，该函数每次都会重新计算。使用 Excel-DNA，您可以这样做：

```
[ExcelFunction(IsVolatile=true)]
public static string MyVolatileNow()
{
    return DateTime.Now.ToString("HH:mm:ss.fff");
} 
```

并与默认的非易失性案例进行比较：

```
[ExcelFunction]
public static string MyNow()
{
    return DateTime.Now.ToString("HH:mm:ss.fff");
} 
```

将数据推送到 Excel 的另一种方法是创建 RTD 服务器或在最新的 Excel-DNA 签入中使用新的 Reactive Extensions for Excel (RxExcel) 支持。这里有一些信息 - [http://exceldna.codeplex.com/wikipage?title=Reactive%20Extensions%20for%20Excel](http://exceldna.codeplex.com/wikipage?title=Reactive%20Extensions%20for%20Excel)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-07-20T13:45:01.543

我必须按 Ctrl + **Alt** + F9（至少在 Excel 2013 中）才能刷新单元格！

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-10-09T20:21:33.557

这有效（至少在 Excel 2013 中）：

```
Excel.Application excelApp = ExcelDnaUtil.Application as Excel.Application;
excelApp.CalculateFull(); 
```

或者

```
Excel.Application excelApp = ExcelDnaUtil.Application as Excel.Application;
excelApp.CalculateFullRebuild(); 
```

第一个重新计算所有工作簿（类似于按 Ctrl + Alt + F9），第二个类似于重新输入所有公式。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-01-11T11:07:41.937

尝试`IsVolatile=false`在 ExcelDNA 函数的属性中设置：

```
[ExcelFunction(Description = "Subscribe to real time data.", IsVolatile = false, Category = UDF_CATEGORY)]
public static object XSub(        
    string param1)
{
    // Implementation here.
} 
```

这个简单的更改显着降低了 CPU 使用率。在我使用的一个大电子表格中，CPU 使用率从 100%（即不断重新计算，并且永远不会赶上）下降到 20%。

使用`IsVolatile=true`，即使输入没有改变，Excel 也会定期重新计算函数的输出值。

使用`IsVolatile=false`时，Excel 只会在输入发生变化时重新计算函数的输出值。

有了`IsVolatile=false`，一切都变得更加高效，因为 Excel 在大多数情况下可以跳过重新计算 90% 的电子表格。

话虽如此，某些函数可能需要`IsVolatile=true`，例如，返回当前时间的函数。

# c# - 使用 c# 为不同的浏览器获取网页的 HTML 源代码

> ID：11255554
> 
> 赞同：1
> 
> 时间：2012-06-29T03:08:48.990
> 
> 标签：c#, html

我想使用 c# 获取网页的 HTML 源代码，就像使用 IE9、Chrome、Firefox 等不同浏览器访问它一样。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T03:10:47.953

您可以通过多种方式获取 HTML 源代码。我的首选方法是[HTML Agility Pack](http://htmlagilitypack.codeplex.com/)

```
HtmlDocument doc = new HtmlDocument();
doc.Load("http://domain.com/resource/page.html");
doc.Save("file.htm"); 
```

.NET 中的[WebClient](http://msdn.microsoft.com/en-us/library/system.net.webclient.aspx)也很好用。

```
WebClient myWebClient = new WebClient();
myWebClient.Headers.Add ("user-agent", "Mozilla/4.0 (compatible; MSIE 6.0; Windows NT 5.2; .NET CLR 1.0.3705;)"); // If you need to simulate a specific browser
byte[] myDataBuffer = myWebClient.DownloadData (remoteUri);
string download = Encoding.ASCII.GetString(myDataBuffer);
// This is verbatim from MSDN... unfortunately their example does not dispose
// of myWebClient (it implements IDisposable).  You should wrap use of a WebClient
// in a using statement. 
```

[http://msdn.microsoft.com/en-us/library/xz398a3f.aspx](http://msdn.microsoft.com/en-us/library/xz398a3f.aspx)

你得到的 HTML 就是你得到的。给定的浏览器决定了它的构成（除非服务器为不同的用户代理呈现不同的 HTML）。

如果您确实需要显式设置用户代理（以模拟不同的浏览器），以下帖子显示了如何执行此操作：

[http://blog.abodit.com/2010/03/a-simple-web-crawler-in-c-using-htmlagilitypack/](http://blog.abodit.com/2010/03/a-simple-web-crawler-in-c-using-htmlagilitypack/)

（此链接还使用 HTML Agility Pack 实现了一个简单的网络爬虫）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-29T03:12:35.603

我不是 C# 专家，但假设无论哪个“浏览器”访问 url，html 都是相同的，您可以使用 System.Net.WebClient（如果您只需要简单的控制）或 HttpWebRequest（如果您需要更高级的控制)

对于 WebClient，只需创建一个实例并调用其中一个 Download* 方法：

```
var cli = new WebClient();
string data = cli.DownloadString("http://www.stackoverflow.com"); 
```

# postgresql - 使用 LDAP 集成的多租户

> ID：11255557
> 
> 赞同：2
> 
> 时间：2012-06-29T03:09:01.043
> 
> 标签：postgresql, jakarta-ee, multi-tenant

我需要您对以下多租户的建议：

实际上我需要为我的应用程序实现多租户。我已经将它用于使用 DB/Schema 的传统流程（例如，每个租户的单独模式）。

现在我还需要集成来自 LDAP 和多租户的用户验证。所以我在想的是，如果我将**用户信息 + 数据库/架构信息（数据库连接信息）**存储在 LDAP 服务器中以获得应用程序的更多动态特性。因为有了这个我就可以连接任何数据库/模式（不管它们的物理位置）。

您对这种方法有何看法，真的可行吗？如果您有任何缺点，请分享。

感谢和问候。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-08T14:21:38.977

听起来您正试图在您的系统上托管多个客户端的系统，并且每个客户端可能有来自多个位置的多个连接。从您的问题来看，尽管数据库可能不在同一个集群上，但您似乎为每个数据库放置了一个客户。

要做的第一件事是在 pg_hba.conf 中适当地锁定 PostgreSQL，并仅公开您想要公开的那些数据库/用户组合。如果你走这条路，LDAP 对我来说发布连接信息听起来很理智，因为这意味着你可以控制谁可以访问哪些帐户。另一个可能紧密相关的选择是颁发 SSL 证书并由客户端使用证书身份验证，因此可以向他们颁发证书并使用它进行连接。您甚至可以针对 LDAP 对 PostgreSQL 进行身份验证。

因此，一旦您以其他方式妥善保护了东西，这里就有很多选项可以将这两者结合使用。祝你好运。

# c# - 是否可以将 C# 泛型方法类型参数约束为“可分配自”包含类的类型参数？

> ID：11255558
> 
> 赞同：9
> 
> 时间：2012-06-29T03:09:16.260
> 
> 标签：c#, generics, type-constraints

我怀疑答案是否定的，但我想知道是否可以这样做：

```
public class MyGenericClass<TSomeClass> {
    public void MyGenericMethod<TSomeInterface>() 
        // This doesn't compile.
        where TSomeClass : TSomeInterface 
    {
        //...
    }
} 
```

在上面的（非工作）示例中，我的意思是限制`TSomeInterface`它可以是任何基类、实现的接口，或者（如果你真的想花哨的话）隐式转换`MyGenericClass`.

**注意：** 我怀疑这从未在 C# 中实现的原因是通用约束并不是*真正*的代码契约，这就是我在这里尝试使用它们的方式。我真的不在乎是什么类型`TSomeInterface`，只要它是由`TSomeClass`.

到目前为止，我已经一起破解了这个：

```
public class MyGenericClass<TSomeClass> {
    public void MyGenericMethod<TIntermediateType, TSomeInterface>() 
        where TIntermediateType : TSomeClass, TSomeInterface 
    {
        //...
    }
} 
```

这或多或少强制了我想要的约束（`TSomeClass`必须继承自，或者在接口的情况下，实现，`TSomeInterface`），但是调用它非常笨拙，因为我必须指定`TIntermediateType`（即使我真的希望它评估`TSomeClass`):

```
var myGenericInstance = new MyGenericClass<TSomeClass>();
myGenericInstance.MyGenericMethod(TSomeClass, TSomeInterface); 
```

此外，上述技巧被破坏了，因为调用者理论上可以将 的子类指定`TSomeClass`为第一个类型参数，其中只有子类实现`TSomeInterface`.

**我想这样做的原因**是我正在为 WCF 服务编写流利的工厂模式，并且我想*防止*调用者（在编译时）尝试使用服务类没有的合同创建端点' t 实施。我显然可以在运行时检查这个（WCF 实际上是为我做的），但我是编译时检查的忠实粉丝。

有没有更好/更优雅的方式来实现我在这里追求的目标？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-29T04:43:17.327

我能够理解为什么不能编译的原因如下：

考虑这个程序编译：

```
class Program {
    class Class1 { }
    class Class2 { }
    public class MyGenericClass<TSomeClass> {
        public void MyGenericMethod<TSomeInterface>() where TSomeClass : TSomeInterface {
        }
    }
    static void Main(string[] args) {
        var inst = new MyGenericClass<Class1>();
    }
} 
```

万事皆安。编译器很高兴。现在考虑我改变`Main`方法：

```
static void Main(string[] args) {
    var inst = new MyGenericClass<Class1>();
    inst.MyGenericMethod<Class2>();
} 
```

编译器会抱怨`Class1`没有实现`Class2`. 但是**哪条线是错的**？约束是调用`MyGenericMethod`，但有问题的代码行是创建`MyGenericClass`.

换句话说，哪一个得到红色波浪线？

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-12-08T04:36:47.080

正如在[这个链接的问题](https://stackoverflow.com/questions/18596387/constrain-type-parameter-to-a-base-type?lq=1)`where`中所讨论的，您不能在子句的左侧使用不是来自当前声明的类型参数。

因此，正如 w0lf 在另一个问题中所建议的那样，您可以做的是在您的接口（而不是方法）声明中提供这两种类型：

```
public class MyGenericClass<TSomeClass, TSomeInterface> {
    where TSomeClass : TSomeInterface 
    public void MyGenericMethod() // not so generic anymore :( 
    {
        //...
    }
} 
```

但是，这极大地限制了您`MyGenericMethod`并迫使您的类事先声明您允许使用的基本接口。

所以**另一种选择**是使用具有更多类型参数的静态方法：

```
public class MyGenericClass<TSomeClass> {
    public static void MyGenericMethod<TSomeClass, TSomeInterface>
                                         (MyGenericClass<TSomeClass> that) 
        where TSomeClass : TSomeInterface 
    {
        // use "that" instead of this
    }
} 
```

可能您可以将其作为扩展方法，使其在用户看来就像一个实际方法。

这些都不是您想要的，但可能比中间类型的解决方案更好。

至于*为什么不这样做的原因？*，我的猜测是它会使编译器复杂化而没有增加足够的价值。这是[Angelika Langer 关于同一主题但关于**Java**](http://www.angelikalanger.com/GenericsFAQ/FAQSections/TypeParameters.html#FAQ107)的讨论。尽管 C# 和 Java 之间存在显着差异，但我认为她的结论也可能适用于这里：

> 底线是类型参数下限的有用性是有争议的。当用作泛型类的类型参数时，它们会令人困惑甚至误导。另一方面，泛型方法有时会从具有下限的类型参数中受益。对于方法，通常可以找到缺少下限类型参数的解决方法。这种变通方法通常涉及静态泛型方法或下限通配符。

她还提供了一个很好的用例，请参见上面的链接。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-06-25T11:57:37.000

扩展方法提供了最好的解决方案，尽管它并不能完全解决您的所有问题。

```
public class MyGenericClass<TSomeClass>
{
}

public static class MyGenericClassExtensions
{
    public static void MyGenericMethod<TSomeClass, TSomeInterface>(this MyGenericClass<TSomeClass> self)
        where TSomeClass : TSomeInterface
    {
        //...
    }
} 
```

调用时仍然需要指定这两种类型`MyGenericMethod`，但它可以防止调用者为`TSomeClass`您提出的方法指定不正确的类型。使用这种方法，可以像这样调用该方法：

```
var myGenericInstance = new MyGenericClass<TSomeClass>();
myGenericInstance.MyGenericMethod<TSomeClass, TSomeInterface>(); 
```

`MyGenericClass`如果声明的类型参数与第一个类型参数不匹配，则会出现编译错误`MyGenericMethod`。

由于第一个类型参数可以由实参推断`this`，因此编译器通常可以推断出两个类型参数，如果它们的附加参数是方法的。

# php - 如何处理未分配的记录

> ID：11255566
> 
> 赞同：0
> 
> 时间：2012-06-29T03:10:55.333
> 
> 标签：php, sql

我有这个 PHP 页面，用户可以在其中选择和取消选择项目。界面如下所示：

![这是我们如何从可用位置（左侧）分配位置（右侧）的界面](../Images/db8636ab25317da08fa19a76eb0d4646.png)

现在我正在使用这些代码，当用户点击保存更改按钮时：

```
foreach( $value as $al_id ){ //al_id is actually location id
    //check if a record exists
    //if location were assigned and leave it as is
    $assigned_count = $this->AssignedLoc->checkIfAssigned( $tab_user_id, $al_id ); 

    if( $assigned_count == 0 ){
        //else if not, insert this new record
        $this->insertAssigned( $tab_user_id, $company_id, $al_id );
    }

} 
```

现在我的问题是，如何删除未分配的位置？例如，在上面的屏幕截图中，有 4 个分配的位置，如果我要从分配的位置中删除（或取消分配）“Mercury Morong”和“GP Hagonoy”，则必须只保留两个。使用 PHP 有哪些可能的解决方案？

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T03:13:25.853

循环遍历不可用选项中提交的值。如果“已分配”部分中存在具有该 ID/名称/您使用的任何标识符的行，则从已分配部分中删除该行。使用您预先存在的 checkIfAssigned 函数。

# android - 如何读取android进程命令的输出

> ID：11255568
> 
> 赞同：13
> 
> 时间：2012-06-29T03:11:50.683
> 
> 标签：android, process

我试图用java获取android shell命令'getprop'的输出，因为getprop（）无论如何总是返回null。

我从 developer.android.com 试过这个：

```
 Process process = null;
    try {
        process = new ProcessBuilder()
           .command("/system/bin/getprop", "build.version")
           .redirectErrorStream(true)
           .start();
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }

     InputStream in = process.getInputStream();

     //String prop = in.toString();
     System.out.println(in);

     process.destroy(); 
```

然而，打印的不是输出，而是一堆字符和数字（现在没有确切的输出）。

我怎样才能得到这个过程的输出？

谢谢！

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-11-22T06:13:59.190

是否有任何特殊原因要将该命令作为外部进程运行？有一个更简单的方法：

```
String android_rel_version = android.os.Build.VERSION.RELEASE; 
```

但是，如果您真的想通过 shell 命令执行此操作，这是我让它工作的方式：

```
try {
      // Run the command
      Process process = Runtime.getRuntime().exec("getprop");
      BufferedReader bufferedReader = new BufferedReader(
              new InputStreamReader(process.getInputStream()));

      // Grab the results
      StringBuilder log = new StringBuilder();
      String line;
      while ((line = bufferedReader.readLine()) != null) {
          log.append(line + "\n");
      }

      // Update the view
      TextView tv = (TextView)findViewById(R.id.my_text_view);
      tv.setText(log.toString());
} catch (IOException e) {
} 
```

# dll - 关于主可执行文件未显式使用链接对象时的 armlink 行为

> ID：11255569
> 
> 赞同：1
> 
> 时间：2012-06-29T03:11:50.950
> 
> 标签：dll, linker, arm

我想将示例与 liba.so 链接，即使示例未使用 liba.so 中的任何内容：

```
 armlink --userlibpath /mylib/lib liba.so --fpic --shared 
        -o example main.o demo.o 
```

我什么也没得到`readelf -d example | grep NEEDED`，看来 armlink 做了一些优化来删除“示例”引用的链接库。

如果我希望 liba.so*始终*链接到示例中，我需要使用 armlink 选项做什么？

任何信息都非常感谢;）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2019-11-20T13:58:46.167

7年前，好吧，无论如何。你需要*--keep* armlink 选项

> *--keep* 此选项指定不能通过未使用部分消除来删除的输入部分。

[http://infocenter.arm.com/help/index.jsp?topic=/com.arm.doc.dui0804b/CHDJGJEC.html](http://infocenter.arm.com/help/index.jsp?topic=/com.arm.doc.dui0804b/CHDJGJEC.html)

# xcode - 如何在 xcode 4.3.1 中启用 opengl es 帧捕获

> ID：11255575
> 
> 赞同：3
> 
> 时间：2012-06-29T03:12:35.877
> 
> 标签：xcode, opengl-es

只是找不到用于启用 opengl es 帧捕获的 UI。

我知道在 xcode 4.2 文档中，界面在 Edit Scheme 中，如下链接。但在这个地方找不到4.3。

[http://developer.apple.com/library/ios/#documentation/DeveloperTools/Conceptual/WhatsNewXcode/Articles/xcode_4_2.html#//apple_ref/doc/uid/00200-SW1](http://developer.apple.com/library/ios/#documentation/DeveloperTools/Conceptual/WhatsNewXcode/Articles/xcode_4_2.html#//apple_ref/doc/uid/00200-SW1)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-09T14:17:53.103

不再有启用此功能的复选框。

您需要在 Project Navigator 中有 OpenGLES.framework 才能显示相机图标。（我有几个通过链接器设置包含的应用程序，但没有被选中）。

如果仍然失败，请尝试将其删除并重新添加，并将其添加到您的 Build Phases/Link Binary With Libraries。我发现这是非常可靠的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-04-04T01:00:42.083

当我运行模拟器时，捕获 GPU 帧对我来说是灰色的。似乎它需要一个真正的设备。

# javascript - 使用 vhost 中间件在 Express 中按子域指定路由

> ID：11255582
> 
> 赞同：5
> 
> 时间：2012-06-29T03:13:42.850
> 
> 标签：javascript, node.js, express, subdomain, middleware

我正在使用`vhost`express/connect 中间件，我对应该如何使用它感到有点困惑。我希望将一组路由应用于具有子域的主机，另一组应用于没有子域的主机。

在我的 app.js 文件中，我有

```
var app = express.createServer();

app.use...(middlware)...
app.use(express.vhost('*.host', require('./domain_routing')("yes")));
app.use(express.vhost('host', require('./domain_routing')("no")));
app.use...(middlware)...

app.listen(8000); 
```

然后在`domain_routing.js`：

```
module.exports = function(subdomain){

  var app = express.createServer();

  require('./routes')(app, subdomain);

  return app;
} 
```

然后在`routes.js`我计划运行路由集，这取决于传入的子域变量是`"yes"`还是`"no"`.

我是在正确的轨道上还是这不是你使用这个中间件的方式？我对`app`创建两个服务器实例这一事实有点困惑（因为这就是网络上的示例似乎做事的方式）。我是否应该传入原始`app`服务器实例并只使用它而不是创建一个单独的服务器实例而不是子域路由器？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T09:11:44.673

是的，你在正确的轨道上。每个虚拟主机都**应该**有一个不同的服务器实例。无论是 a`http.Server`还是`express app`.

如果您通过了 original `app`，您发送到 vhost 的请求将被发送到原始应用程序。因此，除非虚拟主机具有原始服务器中未使用的路径，否则它将获得响应，就好像请求已发送到原始服务器一样。

从连接文档

```
connect()
  .use(connect.vhost('foo.com', fooApp))
  .use(connect.vhost('bar.com', barApp))
  .use(connect.vhost('*.com', mainApp)) 
```

# entity-framework - 实体框架 5 与 Telerik OpenAccess ORM（特别是）

> ID：11255583
> 
> 赞同：14
> 
> 时间：2012-06-29T03:14:01.367
> 
> 标签：entity-framework, entity-framework-5, telerik-open-access

我正在开始一个新项目，并希望获得有关选择 ORM 的建议。我知道这个主题之前已经提出过，但是这个主题是特定于实体框架 5（不是 4）或 Telerik OpenAccess ORM。

该项目将驻留在 Windows Azure 上并使用 Windows Azure SQL 数据库。一旦 4.5 在 Azure 上运行，我会将其迁移到 .NET 4.5。

我目前是 Telerik Ultimate Collection 订阅者。

有没有人知道这种情况有什么优点/缺点？目前我稍微倾向于 Telerik OpenAccess。

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-16T23:54:22.870

首先，评论：

“这不是一个真正的答案 - 但如果您打算针对 Azure 使用 OpenAccess，您可能需要密切关注以下内容：telerik.com/community/forums/orm/orm-express/...” 不反映正确的产品.

处理免费版本的 OpenAccess。Jayantha 在他的问题中指出他是“终极收藏订阅者”。

OpenAccess ORM 现在与 Azure 兼容。

选择 OpenAccess ORM 而不是 Entity Framework 5 的一些原因：

*   可视化设计器中的批处理操作
*   WCF 服务的代码生成
*   ASP.Net Web API 服务的代码生成
*   动态模型修改
*   自定义类型框架
*   内置验证框架
*   .NET 3.5 支持
*   悲观并发
*   内置二级缓存
*   高级连接池
*   纯 XML 映射

使用 EF5 提供的 OpenAccess 时您会失去什么：

*   自我追踪实体
*   完全支持可视化设计器中的枚举（仅部分支持）

去搞清楚！

# proxy - HttpWebRequest 给出“目标机器主动拒绝”错误

> ID：11255585
> 
> 赞同：0
> 
> 时间：2012-06-29T03:14:15.697
> 
> 标签：proxy, httpwebrequest, pac

我正在尝试通过 HttpWebRequest 访问 URI，并收到“目标机器主动拒绝”错误。

我从没有代理的机器上知道这工作正常，我知道我的公司互联网使用 PAC 文件来确定代理，但它似乎并没有为我挑选这个。

这是我所知道的：

*   我的 app.config 有
*   我想我不需要指定 WebRequest.DefaultWebProxy 但这没有区别
*   我可以使用有效的 WebProxy 和 NetworkCredentials 明确设置代理

有任何想法吗？任何人都有 PAC 文件的经验，以及为什么我可以通过 IE 而不是通过代码访问目标。显然，如果我对代理进行硬编码，它就可以正常工作，所以似乎没有自动检测到同一个代理？

# html - 在 CSS 中当场生长一个元素

> ID：11255586
> 
> 赞同：2
> 
> 时间：2012-06-29T03:14:42.273
> 
> 标签：html, css

我有很多跨度是`center`标签中的框，我希望每个框在用户将鼠标悬停在它上面时当场增长。这不起作用，因为它会移动所有其他元素并且看起来不太好：

```
.square:hover {
    background-color: yellow;
    width: 50px; // originally 25px
    height: 50px;// originally 25px
} 
```

我怎样才能让它成长而不把它所有的邻居都推到一边？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T03:16:43.567

给出`.square`绝对位置并将其相对于它的容器定位...

```
.square { 
    position:absolute; /* moves the element out of normal flow */
}

.square:hover {
    background-color: yellow;
    width: 50px; // originally 25px
    height: 50px;// originally 25px
} 
```

您可能还需要更改伪选择器中的`top`和`left`属性，`:hover`因为定位基于元素的左上角：

```
.square { top:50px; left:50px; }

.square:hover {
    /* ... definitions ... */

    top:25px;
    left:25px;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-29T03:26:27.547

我会将 .square 包装在相同大小的相对位置容器中，然后在 hove 上使 .square 绝对定位

```
.squareContainer { 
    position:relative; 
    width: 25px; 
    height: 25px;
}
.square:hover { 
    position:absolute; 
    width: 50px; 
    height: 50px;
} 
```

这样，当 .square 从流程中移除时，它不会影响其他元素。编辑

将 .square 设置为绝对似乎不起作用
，但将两者都设置为相对工作

[小提琴](http://jsfiddle.net/UD9yM/)

[http://jsfiddle.net/ur4aT/10/](http://jsfiddle.net/ur4aT/10/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-29T04:01:44.030

我已经使用了这个技巧

1.  将外部`div`s 位置设置 `inline-block`为水平对齐（不需要你）
2.  设置outer的宽高`div`（必填）
3.  使用`%`基于尺寸的内部`div`（选择你喜欢的任何东西，这样工作很简单）。
4.  在内部 div`:hover`状态下，再次设置它的尺寸`%`并将它的`margin`a/c 设置为公式`margin = (100-width)/2`

查看演示@jsFiddle：http: [//jsfiddle.net/dxb28/](http://jsfiddle.net/dxb28/)，

祝你好运:)<

# ios - 在类型的对象上找不到 tableView

> ID：11255595
> 
> 赞同：1
> 
> 时间：2012-06-29T03:15:52.750
> 
> 标签：ios, uitableview

我有一个名为 FirstViewController 的类，它是 UIViewController 的子类，并且我在类中有一个 UITableView。当按下一行时，我需要从这个类转换到一个新的 UIViewController 子类（使用 segues）。

我使用代码将 FirstViewController 设置为 UITableViewDelegate 和 UITableViewDataSource -

```
@interface FirstViewController : UIViewController <UITableViewDataSource, UITableViewDelegate> 
```

我在这行代码中遇到错误-

```
NSIndexPath *path = [self.tableView indexPathForSelectedRow]; 
```

由于 tableView 是在 UITableViewController 而不是 UIViewController 类中找到的，我该如何解决这个问题？

编辑 -

这是与我的表格视图相关的代码 -

```
- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section{

    return [sarray count];
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath{

    static NSString *cellId = @"Cell";
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:cellId];

    if(cell == nil){
        cell = [[UITableViewCell alloc]initWithStyle:UITableViewCellStyleDefault reuseIdentifier:cellId];
    }

    NSString *text = [sarray objectAtIndex:[indexPath row]];
    cell.textLabel.text = text;
    return cell;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-29T03:24:52.720

您可以简单地将 tableView 声明为属性：

```
@property(nonatomic, strong) IBOutlet UITableView *tableView; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-29T03:28:52.877

`UITableView`只有在子类化时，您才能获得免费`UITableViewController`，

```
@interface FirstViewController : UITableViewController 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-02-07T04:33:33.433

您可以在使用时简单地声明一个表视图属性`FirstViewController`：

```
@property(nonatomic, strong) IBOutlet UITableView *tableView; 
```

然后，您需要将此属性连接到`Table View`情节提要中的 。

# ios - 如何确定哪个视图控制器当前处于活动状态/显示视图的那个？

> ID：11255599
> 
> 赞同：4
> 
> 时间：2012-06-29T03:16:44.083
> 
> 标签：ios

在我的应用程序中，我正在排队一些本地通知，当它们触发时，我必须呈现一个模态视图。问题是我有许多视图控制器，其中任何一个当前都可能处于活动状态，因此需要呈现模态视图控制器。如何确定当前正在使用哪一个？

我将导航控制器设置为 Windows 根视图控制器，这可以推送任意数量的其他视图控制器，其中一些本身也可能当前以模态方式呈现另一个视图控制器。这必须适用于 iOS 4 和 5。

我有很多视图控制器，所以想避免在每个视图控制器中放入代码，以检查它们当前是否是最上面的。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-29T03:23:05.330

您可以查看导航控制器的`topViewController`属性以找出哪个控制器位于堆栈顶部。这将是显示其视图的那个。

由于您可能还会呈现模态视图控制器，因此您可能对该`visibleViewController`属性更感兴趣，它将为您提供当前视图的控制器，无论是模态呈现还是推送到导航堆栈。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T03:23:35.177

创建一个变量来存储指向最近推送的 ViewController 的指针。每次推送新的 ViewController 时，更新此变量。然后，您将永远知道哪个在顶部！

# version-control - github公共回购有多公开？

> ID：11255601
> 
> 赞同：13
> 
> 时间：2012-06-29T03:17:38.700
> 
> 标签：version-control, open-source, github

我终于转移到 GitHub 进行源代码控制。我们只能为正在做的项目使用公共 repo，但是如何**公开**呢？假设如果我根本不宣传这个项目，那么没有人会在他们已经拥有的 300 万个 repo 中真正找到它，这是安全的吗？

到目前为止，我真的不能让人们看到源代码，但是 7/mo 只需要 1 个私人 repo 有点陡峭。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-06-29T03:20:08.713

不，这不是一个安全的假设。GitHub 有一个公共存储库的搜索引擎，人们使用它（包括我自己）。因此，总有可能有人会看到您的源代码。如果你想要一个免费的私人仓库，我建议改用[BitBucket](https://bitbucket.org/)，或者其他提供免费私人仓库的服务。请注意，只有在您的存储库中有 5 个或更少的用户时，BitBucket 才免费。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-07-02T18:20:02.983

当问自己这样的问题时，您应该考虑到很多网站访问者是*其他计算机*，而不是人类。谷歌机器人正在索引它可以找到的每个页面，ohloh.net 在 github 上创建开源项目的统计数据，......等等等等。因此，如果某些东西在 Internet 上，人们会找到它。:)

# php - 有没有办法使用 PHP 加载备用样式表？

> ID：11255607
> 
> 赞同：1
> 
> 时间：2012-06-29T03:18:40.580
> 
> 标签：php, css, mobile, stylesheet, alternate

我正在构建我的网站的移动版本，此时，创建一个备用样式表就足以使该网站适用于移动设备。我想使用用户代理检测 PHP 脚本来检测平台，并相应地切换样式表。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-29T03:32:33.973

您可能想尝试一个库来检查它是否是移动设备，然后您可以尝试这个库：[http](http://code.google.com/p/php-mobile-detect/) ://code.google.com/p/php-mobile-detect/ （这也支持检测特定的操作系统）

然后有类似的代码

```
if($detect->isiOS()){
    echo <link rel="stylesheet" type="text/css" href="iOSstyle.css" />;
}
else if ($detect->isMobile()) {
   echo <link rel="stylesheet" type="text/css" href="mobile.css" />;
}
else{
  echo <link rel="stylesheet" type="text/css" href="normal.css" />;
} 
```

FYI, these libraries are dependent on the User-Agent value in the header and other headers too.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-29T03:31:38.317

试试这个（用伪代码编写的 if 条件，因为我没有使用过 WURLF）：

```
<?php
if (device is mobile) {
    echo "<link rel='stylesheet' type='text/css' href='mobile.css' />";
}else{
    echo "<link rel='stylesheet' type='text/css' href='monitor.css' />";
?> 
```

将此代码放在您通常拥有 CSS 链接的位置。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-29T03:32:30.713

我之前所做的是将当前状态（移动/桌面）存储在会话变量中。然后你可以有一个“查看桌面/移动版本”链接来切换会话变量。渲染每个页面时，在会话变量上使用 if 语句来确定要显示的样式表。我建议您将此逻辑分离为一个函数以供重复使用，这样您就不必在重构时编辑 20 个不同的页面。

如果要自动检测移动浏览器，可以使用[WURLF](http://wurfl.sourceforge.net/php_index.php)或[php-mobile-detect](http://code.google.com/p/php-mobile-detect/)。

# ios - 不正确的布尔值

> ID：11255608
> 
> 赞同：2
> 
> 时间：2012-06-29T03:18:42.390
> 
> 标签：ios, json, afnetworking

我正在解析一个 JSON 字符串：

```
Response: {"success":false,"displaymessage":"UserName or Email already exist. Please try again"} 
```

我正在使用的代码是：

```
 NSLog(@"Result: %@ %@", [responseObject valueForKeyPath:@"success"]? @"YES" : @"NO", [responseObject valueForKeyPath:@"displaymessage"]); 
```

但是我的输出是：

```
Result: YES UserName or Email already exist. Please try again 
```

我应该得到一个不。我做错了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-29T03:21:26.743

该`valueForKeyPath:`方法返回一个对象，该对象始终为非零（因此您看到的是 a`YES`而不是 a `NO`）。如果我没记错的话，布尔值被包裹在`NSNumber`. 您应该从返回的对象中提取实际的布尔值`valueForKeyPath:`，如下所示：

```
[[responseObject valueForKeyPath:@"success"] boolValue]? @"YES" : @"NO" 
```

# java - 通过java IO生成输出文件

> ID：11255610
> 
> 赞同：-2
> 
> 时间：2012-06-29T03:19:08.507
> 
> 标签：java, io

我开发了一个 java 代码，可以从用户选择的文件夹中读取文件。它显示每个文件中有多少行代码，它只读取 .java 文件，最终结果显示在控制台上，我在想输出要显示在控制台上，但连同包含相同信息的文本文件一起获取也存储在桌面上，请告知如何做到这一点，并且生成的文件的名称将基于时间戳假设输出文件的名称为“output06282012”并且该文本文件应包含相同的信息显示在控制台上，这是我的一段代码...

```
public static void main(String[] args) throws FileNotFoundException {

        JFileChooser chooser = new JFileChooser();
        chooser.setCurrentDirectory(new java.io.File("C:" + File.separator));
        chooser.setDialogTitle("FILES ALONG WITH LINE NUMBERS");
        chooser.setFileSelectionMode(JFileChooser.DIRECTORIES_ONLY);
        chooser.setAcceptAllFileFilterUsed(false);
                if (chooser.showOpenDialog(null) == JFileChooser.APPROVE_OPTION)
        {      Map<String, Integer> result = new HashMap<String, Integer>();
             File directory = new File(chooser.getSelectedFile().getAbsolutePath()); 
             int totalLineCount = 0;
             File[] files = directory.listFiles(new FilenameFilter(){
                  @Override
                  public boolean accept(File directory, String name) {
                      if(name.endsWith(".java"))
                      return true;
                    else
                      return false;              
                  }
                }
   );
              for (File file : files)
            {
                if (file.isFile())
                {    Scanner scanner = new Scanner(new FileReader(file));
                    int lineCount = 0;
                     try
                    { for (lineCount = 0; scanner.nextLine() != null; lineCount++) ;
                          } catch (NoSuchElementException e)
                    {   result.put(file.getName(), lineCount);
                    totalLineCount += lineCount;  
                                    }

                } }
              System.out.println("*****************************************");
              System.out.println("FILE NAME FOLLOWED BY LOC");
              System.out.println("*****************************************");

            for (Map.Entry<String, Integer> entry : result.entrySet())
            {   System.out.println(entry.getKey() + " ==> " + entry.getValue());
            }
            System.out.println("*****************************************");
            System.out.println("SUM OF FILES SCANNED ==>"+"\t"+result.size()); 
            System.out.println("SUM OF ALL THE LINES ==>"+"\t"+ totalLineCount);

             }     

    } 
```

现在我脑海中的想法就是这个逻辑

1）构造你要使用的文件名

2）打开文件进行写入

3) 每次调用 System.out.println() 时，进行类似的调用以将相同的消息写入文件

4) 完成后，请确保关闭文件句柄。

我有一个粗略的想法是这样的

```
try{

 java.util.Date date= new java.util.Date();
 System.out.println(new Timestamp(date.getTime())); 

BufferedWriter out = new BufferedWriter(new FileWriter("C://Desktop//output"+new Timestamp(date.getTime())+".txt"));

out.write("some information");

out.close; 

}catch(IOException e){
  e.printStackTrace();
 } 
```

请告知如何操作，生成的文件的名称将基于时间戳假设输出文件的名称为“output06282012”，并且该文本文件应包含与控制台上显示的相同信息

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T03:35:05.900

据我所知，这是您真正要问的唯一问题：

> 请告知如何执行此操作，并且生成的文件的名称将基于时间戳。让我们假设输出文件的名称是 'output06282012' ...

简单的答案是：

```
 String fileName = "output" + new Date().getTime(); 
```

然后你继续说：

> ....并且该文本文件应包含控制台上显示的相同信息

你有两个选择：

*   你可以通过调用来*改变*去哪里。（有关详细信息，请查看 javadoc。）`System.out``System.setOut(...)`

*   您可以为文件流创建一个`PrintWriter`或`PrintStream`包装器并写入该文件而不是写入`System.out`.

在我看来，`System.setOut(...)`除非你别无选择，否则使用它是一个坏主意。这是一个影响整个应用程序的“全局操作”。最好将要用作参数的编写器传递...

* * *

> 您能否像我所做的那样在代码中播种，这将有助于理解

抱歉，我不会为人们编写程序（除非这是一个有趣的问题！）。您需要使用相关 javadocs 中提供的信息自己编写和调试代码。您可以在 Oracle 网站上在线找到 Java 文档：http: [//docs.oracle.com/javase/7/docs/](http://docs.oracle.com/javase/7/docs/)

# html - 如果页面达到一定高度，则添加垂直滚动条

> ID：11255615
> 
> 赞同：0
> 
> 时间：2012-06-29T03:19:34.707
> 
> 标签：html, css

我在谷歌上搜索了答案，但没有找到任何东西。我有一个绝对的内容位置，我想在网络浏览器上添加一个滚动条，但前提是它达到一定的大小。这是一个全屏网站，所以我不想一直有滚动条。如果我没有说清楚，请随时回复，我会尽快回复您。谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T03:25:24.450

CSS

```
.absPosDiv{
  max-height:700px; /* however tall you want before scrolls*/

  overflow:auto;

  /* if specifying x & y is important, use this instead of `overflow`*/
  overflow-x: auto;
  overflow-y: hidden;
} 
```

# ruby - Facebook Graph API 仅返回 50 条评论

> ID：11255618
> 
> 赞同：0
> 
> 时间：2012-06-29T03:19:55.697
> 
> 标签：ruby, facebook-graph-api, railscasts, koala

我在[Railscasts 第 361 集中使用](http://railscasts.com/episodes/361-facebook-graph-api)[考拉](https://github.com/arsduo/koala/)宝石。我正在尝试获取给定帖子的所有评论，但 Facebook 似乎只给了我该帖子的最后 50 条评论。这是 Facebook Graph API 的限制还是我做错了什么？

```
fb = Koala::Facebook::API.new oauth_token
post = fb.get_object(id_of_the_post)
comments = fb.get_object(post['id'])['comments']['data']
puts comments.size # prints 50 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-14T22:24:15.693

当帖子数量大于设置的限制（在您的情况下为 50）时，图形 API 对结果进行分页。

要访问下一页结果，请调用“next_page”方法：

```
comments = fb.get_object(post['id'])
while comments['comments']['data'].present?
  # Make operations with your results
  comments = comments.next_page
end 
```

此外，通过查看源代码可以看到“get_object”方法接收 3 个参数：

```
def get_object(id, args = {}, options = {}) 
```

这样，您可以将每页的帖子提高到任意数量的帖子：

```
comments = fb.get_object(post['id'], {:limit => 1000}) 
```

# jquery - 使用仅字段集 ID 构建表单和输入以促进迭代

> ID：11255621
> 
> 赞同：2
> 
> 时间：2012-06-29T03:20:11.097
> 
> 标签：jquery, input, fieldset

假设我有 3 个字段集，每个字段集有 2 个输入：NAME 和 AGE。稍后，我想用 JQUERY 遍历表单并读取每个字段集的所有输入。

我应该如何构建字段集和输入以最好地促进迭代？现在，我正在为每个输入分配唯一的 ID——但如果可能的话，最好将唯一标识符进一步推到树的上方，比如 fieldset 标记。

我如何能够使用 Jquery 访问字段集中的每个元素？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T03:26:40.577

您可以这样做，为每个名称文本框分配“名称”类，为所有年龄文本框分配“年龄”类。然后像 tihs 一样遍历每个 feildset，

```
var people=[];
$('feildset').each(function(index,feildset){
    people.push({Name:$('.name',feildset).val(), Age:$('.age',feildset).val()})
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T03:26:06.010

```
<fieldset id="fieldset_1">
  <input type="text" class="name">
  <input type="text" class="age">
</fieldset>
<fieldset id="fieldset_2">
  <input type="text" class="name">
  <input type="text" class="age">
</fieldset>
<fieldset id="fieldset_3">
  <input type="text" class="name">
  <input type="text" class="age">
</fieldset> 
```

然后你可以：

```
$("fieldset").each(function(){
  alert($(this).id + " has the name value: " + $(this).find("input.name").val());
  alert($(this).id + " has the age value: " + $(this).find("input.age").val());
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-29T03:26:49.520

试试这个：

```
$('fieldset').each(function() {
   var cls = $(this).attr('id');
   // this makes a ul element with a class based on the fieldset's id and appends it to the body
   $('</ul>').text($(this).attr('id') + ':').addClass(cls).appendTo('body');
   $(this).find('input').each(function() { // iterating over fieldset's inputs
       // this adds list elements to the ul 
       $('</li>').text($(this).attr('name') + ': ' + $(this).val()).appendTo("." + cls);
   })
}) 
```

# android - android webview重定向超过302

> ID：11255622
> 
> 赞同：-2
> 
> 时间：2012-06-29T03:20:25.120
> 
> 标签：android, webview

我正在使用 android 中的 webview 做一个项目。我无法访问网址：`http://www.baidu.org`。因为这个网址重定向到

```
http://s.click.taobao.com/t_js?tu=http%3A%2F%2Fs.click.taobao.com%2Ft_9%3Fp%3Dmm_13057488_2720475_9729699%26l%3Dhttp%253A%252F%252Fmall.taobao.com%252F%26eventid%3D101766%26ref%3D. 
```

在我的项目中，webview 将重新加载该 url 数百次。有谁知道如何解决这个问题？加载网址时遇到同样的问题

```
http://www.tmall.com/?ali_trackid=2:mm_13057488_2720475_9729699:1340938813_4z4_2025563791 
```

在我的网络视图中。

ps：在我的电脑浏览器中，我输入 url: `www.baidu.org`，它重定向到

```
http://www.tmall.com/?ali_trackid=2:mm_13057488_2720475_9729699:1340938813_4z4_2025563791. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T04:11:30.773

使用您的代码检查以下代码，

```
webview=(WebView)findViewById(R.id.webview1);
webview.getSettings().setJavaScriptEnabled(true); 
webview.loadUrl("http://www.baidu.org/");      
webview.addJavascriptInterface(new MyJavaScriptInterface(), "Android");
webview.setWebViewClient(new WebViewClient());
webview.setWebChromeClient(new WebChromeClient());

final class MyJavaScriptInterface
    {
        public void ProcessJavaScript(final String scriptname, final String args)
            {             
                mHandler.post(new Runnable()
                    {
                        public void run()
                            {
                                //TODO...
                            }
                    });
            }
    } 
```

这对我有用....试试这个

编辑：

在 PC 浏览器中：

![在此处输入图像描述](../Images/dc92b89b18207677150048fd72e8941f.png)

在移动 Web 视图中

![在此处输入图像描述](../Images/ce0ddd30255859b12b9413f677bda38d.png)

那你的问题是什么？

# mysql - 将 SQL 查询结果存储为 $string

> ID：11255623
> 
> 赞同：0
> 
> 时间：2012-06-29T03:20:37.767
> 
> 标签：mysql, loops

我敢打赌这是循环 101，但它就在这里。我只是将结果打印到屏幕上，因为当然，这就是我在代码中使用的（即回显），但我想将打印的内容保存为实际字符串。我不希望它出现，而只是被通过。

这对我来说通常是小菜一碟，但这是一个让我感到困惑的嵌套循环。目前这是打印到屏幕上的结果。“数量：1 - 2”设计师木百叶窗 | 数量：2 - 2" Designer Wood Blinds | 数量：3 - 2" Designer Wood Blinds |" 这是完美的格式和一切。我希望将其作为 $string 传递到购物车描述中。

我用什么替换脚本的“回声”部分？非常感谢您。

```
$desc_details = mysql_query("SELECT qty, prodid FROM cartitems WHERE uniquetoken = '".$uniquetoken."';");
while($detail_list = mysql_fetch_array($desc_details))
{
    echo "Qty: " .$detail_list['qty']. " - ";

            $desc_prodid = mysql_query("SELECT * FROM products WHERE prodid = '".$detail_list['prodid']."';");
            while($detail_prod = mysql_fetch_array($desc_prodid))
               {
                  echo $detail_prod['prodname']. " | ";
               }
}; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T03:26:00.780

```
$str='';
$desc_details = mysql_query("SELECT qty, prodid FROM cartitems WHERE uniquetoken = '".$uniquetoken."';");
while($detail_list = mysql_fetch_array($desc_details))
{
    $str.= "Qty: " .$detail_list['qty']. " - ";

            $desc_prodid = mysql_query("SELECT * FROM products WHERE prodid = '".$detail_list['prodid']."';");
            while($detail_prod = mysql_fetch_array($desc_prodid))
               {
                  $str.= $detail_prod['prodname']. " | ";
               }
}; 
```

$str 将您的数据存储为字符串

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T03:27:33.243

我自己不是专家，但您是否尝试过类似`$string .=`（字符串连接）而不是`echo`？

然后你可以在你特别需要的地方回显 $string 。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-06-29T03:26:56.650

当需要一个字符串时，连接它。

```
$desc_details = mysql_query("SELECT qty, prodid FROM cartitems WHERE uniquetoken = '".$uniquetoken."';");
$string;
while($detail_list = mysql_fetch_array($desc_details)) {
    $string .= "Qty: " .$detail_list['qty']. " - ";

          $desc_prodid = mysql_query("SELECT * FROM products WHERE prodid = '".$detail_list['prodid']."';");
          while($detail_prod = mysql_fetch_array($desc_prodid))
            {
               $string .= $detail_prod['prodname']. " | ";
            }
}; 
```

注意 $string 的添加。

# c# - DbDataRecord 中将使用什么方法来验证列是否存在？

> ID：11255624
> 
> 赞同：0
> 
> 时间：2012-06-29T03:20:43.703
> 
> 标签：c#, .net-3.5

我想验证该字段是否真的存在于数据库的表中。我使用 SqlDataReader 类来读取数据。在将值分配给 SqlDataReader 之后，我创建了一个循环来使用 foreach 迭代每条记录。这是示例代码。

```
SqlCommand sqlCommand = new SqlCommand();

SqlDataReader sqlDr = sqlCommand.ExecuteReader();

Foreach(DbDataRecord record in sqlDr)
{
    // Validate if the value is not null and (I want to validate if this field really exist in the table)
    if(record["MyField1"].GetType().ToString() == "System.DBNull")
    {
        // Statement here
    }
} 
```

我希望得到一个友好的答复。非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T04:15:02.417

我会编写一个`extension`方法来遍历阅读器中的每个字段并返回真/假。

```
public static class DataRecordExtensions
{
    public static bool HasColumn(this IDataRecord dr, string columnName)
    {
        for (int i = 0; i < dr.FieldCount; i++)
        {
            if (dr.GetName(i).Equals(columnName, StringComparison.InvariantCultureIgnoreCase))
                return true;
        }
        return false;
    }
} 
```

然后像这样调用它

```
if (objReader.HasColumn("FirstName")
{
  //Column exist. So lets read the value
   someobject.Name= objReader.GetString(objReader.GetOrdinal("FirstName"));
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T04:06:54.140

保持代码与您的问题相似，您**可以**这样做：

```
using (SqlCommand sqlCommand = new SqlCommand())
{
    SqlDataReader sqlDr = sqlCommand.ExecuteReader();

    if (!sqlDr.Read()) return;

    HashSet<string> fieldNames = new HashSet<string>(sqlDr.FieldCount);
    for (int i = 0; i < sqlDr.FieldCount; i++)
    {
        fieldNames.Add(sqlDr.GetName(i));
    }

    if (!fieldNames.Contains("MyField1") || !fieldNames.Contains("MyField2"))
    {
        // do something here
    }
} 
```

# java - 如何访问保存在 .mat 文件中的 MATLAB Builder JA 构建的 jar 文件中的变量？

> ID：11255627
> 
> 赞同：1
> 
> 时间：2012-06-29T03:21:05.160
> 
> 标签：java, matlab, matlab-deployment, mat-file

大量记录 MATLAB Builder JA 的页面让我分心，而且运行时间非常短。

我的问题是，我如何加载 .mat 文件并访问它的所有变量？

我所做的是，我用 MATLAB Builder JA 中需要的所有函数创建了自己的类，然后添加了我需要的 .mat 文件并构建了所有这些。

我现在创建了一个 java 项目并实例化了我的类的一个对象，但现在我想访问保存在 Java .mat 文件中的变量以将其传递给对象的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T22:59:08.350

阿萨尔莫·阿利科姆

按照 Amro 的建议，最好的方法是制作一个加载 MAT 文件本身的 matlab 函数。

```
 function out= loadMAT(nameOfMAT)
       out=load(nameOfMAT); 
```

这将加载 MAT 并将其作为 Java 中的 MWStructArray 类返回（它在 javabuilder.jar 中）。您可以在 JAVA 中执行此操作以访问 MAT 文件内的对象。

```
List rhs=new ArrayList();
rhs.add(new File("matlab-mat-file-name.mat").getAbsolutePath());    
Object[] ob=fis.loadMAT(1, rhs.get(0)); 
```

ob 有你想要的所有变量！

萨拉姆！

# mongodb - 如何导出 MongoDB 中的所有集合？

> ID：11255630
> 
> 赞同：401
> 
> 时间：2012-06-29T03:21:27.047
> 
> 标签：mongodb, export

我想通过以下命令导出 MongoDB 中的所有集合：

```
mongoexport -d dbname -o Mongo.json 
```

结果是：
没有指定集合！

手册说，如果您不指定集合，则将导出所有集合。
但是，为什么这不起作用？

[http://docs.mongodb.org/manual/reference/mongoexport/#cmdoption-mongoexport--collection](http://docs.mongodb.org/manual/reference/mongoexport/#cmdoption-mongoexport--collection)

我的 MongoDB 版本是 2.0.6。

* * *

## 回答 #1

> 赞同：812
> 
> 时间：2013-05-17T09:31:32.007

对于懒惰`mongodump`的人，使用 ，它更快：

```
mongodump -d <database_name> -o <directory_backup> 
```

并“恢复/导入”它（来自 directory_backup/dump/）：

```
mongorestore -d <database_name> <directory_backup> 
```

这样，您无需单独处理所有集合。只需指定数据库。

请注意，我建议不要将`mongodump`/`mongorestore`用于**大数据存储**。它非常慢，一旦您获得超过 10/20GB 的数据，可能需要数小时才能恢复。

* * *

## 回答 #2

> 赞同：71
> 
> 时间：2012-11-25T11:41:44.353

我为此编写了 bash 脚本。只需使用 2 个参数（数据库名称、存储文件的目录）运行它。

```
#!/bin/bash

if [ ! $1 ]; then
        echo " Example of use: $0 database_name [dir_to_store]"
        exit 1
fi
db=$1
out_dir=$2
if [ ! $out_dir ]; then
        out_dir="./"
else
        mkdir -p $out_dir
fi

tmp_file="fadlfhsdofheinwvw.js"
echo "print('_ ' + db.getCollectionNames())" > $tmp_file
cols=`mongo $db $tmp_file | grep '_' | awk '{print $2}' | tr ',' ' '`
for c in $cols
do
    mongoexport -d $db -c $c -o "$out_dir/exp_${db}_${c}.json"
done
rm $tmp_file 
```

* * *

## 回答 #3

> 赞同：37
> 
> 时间：2016-02-04T12:48:05.253

导出所有集合：

```
mongodump -d database_name -o directory_to_store_dumps 
```

要恢复它们：

```
mongorestore -d database_name directory_backup_where_mongodb_tobe_restored 
```

* * *

## 回答 #4

> 赞同：37
> 
> 时间：2018-03-02T06:10:04.060

按照以下步骤从服务器创建一个 mongodump 并将其导入另一台具有用户名和密码的服务器/本地计算机

```
1\. mongodump -d dbname -o dumpname -u username -p password
2\. scp -r user@remote:~/location/of/dumpname ./
3\. mongorestore -d dbname dumpname/dbname/ -u username -p password 
```

* * *

## 回答 #5

> 赞同：22
> 
> 时间：2015-11-03T08:10:55.217

请让我们知道您在哪里安装了 Mongo DB？（在 Ubuntu 或 Windows 中）

*   **对于 Windows：**

1.  在导出之前，您必须在 cmd 提示符下连接到 Mongo DB，并确保您能够连接到本地主机。

2.  现在打开一个新的 cmd 提示符并执行以下命令，

    ```
    mongodump --db database name --out path to save 
    ```

    例如：`mongodump --db mydb --out c:\TEMP\op.json`

3.  访问[https://www.youtube.com/watch?v=hOCp3Jv6yKo](https://www.youtube.com/watch?v=hOCp3Jv6yKo)了解更多详情。

*   **对于 Ubuntu：**

1.  登录到安装了 Mongo DB 的终端，并确保您能够连接到 Mongo DB。

2.  现在打开一个新终端并执行以下命令，

    ```
    mongodump -d database name -o file name to save 
    ```

    例如：`mongodump -d mydb -o output.json`

3.  访问[https://www.youtube.com/watch?v=5Fwd2ZB86gg](https://www.youtube.com/watch?v=5Fwd2ZB86gg)了解更多详情。

* * *

## 回答 #6

> 赞同：17
> 
> 时间：2017-10-21T06:55:16.247

以前的答案解释得很好，如果您正在处理受远程密码保护的数据库，我将添加我的答案以提供帮助

```
mongodump --host xx.xxx.xx.xx --port 27017 --db your_db_name --username your_user_name --password your_password --out /target/folder/path 
```

* * *

## 回答 #7

> 赞同：14
> 
> 时间：2019-08-22T16:23:39.303

您可以使用*mongodump*命令执行此操作

> 第 1 步：打开命令提示符
> 
> 第 2 步：转到 mongoDB 安装的 bin 文件夹（C:\Program Files\MongoDB\Server\4.0\bin）
> 
> 第三步：然后执行以下命令
> 
> `mongodump -d your_db_name -o destination_path`
> 
> your_db_name = 测试
> 
> 目的地路径 = C:\Users\HP\Desktop

导出的文件将在destination_path\your_db_name 文件夹中创建（在本例中为C:\Users\HP\Desktop\test）

参考：[o7planning](https://o7planning.org/en/10279/importing-and-exporting-mongodb-database)

* * *

## 回答 #8

> 赞同：12
> 
> 时间：2016-01-23T10:56:42.717

如果您想连接像 mongolab.com 这样的远程 mongoDB 服务器，您应该传递连接凭据，例如。

```
mongoexport -h id.mongolab.com:60599 -u username -p password -d mydb -c mycollection -o mybackup.json 
```

* * *

## 回答 #9

> 赞同：10
> 
> 时间：2012-08-31T12:29:36.547

如果您对 bson 格式没问题，那么您可以使用具有相同 -d 标志的 mongodump 实用程序。它将所有集合以 bson 格式转储到转储目录（默认值，可以通过 -o 选项更改）。然后，您可以使用 mongorestore 实用程序导入这些文件。

* * *

## 回答 #10

> 赞同：10
> 
> 时间：2017-02-27T00:42:37.560

我意识到这是一个相当老的问题，如果你想要一个 100% 忠实的结果，包括索引，那么 mongodump/mongorestore 显然是正确的方法。

但是，我需要一个快速而肮脏的解决方案，它可能在新旧版本的 MongoDB 之间向前和向后兼容，前提是没有什么特别古怪的事情发生。为此，我想要原始问题的答案。

上面还有其他可以接受的解决方案，但是这个 Unix 管道相对较短且比较好：

```
mongo --quiet mydatabase --eval "db.getCollectionNames().join('\n')" | \
grep -v system.indexes | \
xargs -L 1 -I {} mongoexport -d mydatabase -c {} --out {}.json 
```

`.json`这会为每个集合生成一个适当命名的文件。

请注意，数据库名称（“mydatabase”）出现两次。我假设数据库是本地的，您不需要传递凭据，但是使用`mongo`和很容易做到这一点`mongoexport`。

请注意，我使用`grep -v`to discard `system.indexes`，因为我不希望旧版本的 MongoDB 尝试从新版本解释系统集合。相反，我允许我的应用程序进行通常的`ensureIndex`调用来重新创建索引。

* * *

## 回答 #11

> 赞同：9
> 
> 时间：2012-11-28T21:03:53.533

您可以使用`mongo --eval 'printjson(db.getCollectionNames())'`来获取集合列表，然后对所有集合执行 mongoexport。这是一个红宝石的例子

```
 out = `mongo  #{DB_HOST}/#{DB_NAME} --eval "printjson(db.getCollectionNames())"`

  collections = out.scan(/\".+\"/).map { |s| s.gsub('"', '') }

  collections.each do |collection|
    system "mongoexport --db #{DB_NAME}  --collection #{collection}  --host '#{DB_HOST}' --out #{collection}_dump"
  end 
```

* * *

## 回答 #12

> 赞同：8
> 
> 时间：2013-03-03T23:50:01.160

我需要 Windows 批处理脚本版本。这个线程很有用，所以我想我也会贡献我的答案。

```
mongo "{YOUR SERVER}/{YOUR DATABASE}" --eval "rs.slaveOk();db.getCollectionNames()" --quiet>__collections.txt
for /f %%a in ('type __collections.txt') do @set COLLECTIONS=%%a
for %%a in (%COLLECTIONS%) do mongoexport --host {YOUR SERVER} --db {YOUR DATABASE} --collection %%a --out data\%%a.json
del __collections.txt 
```

我在使用时遇到了一些问题`set /p COLLECTIONS=<__collections.txt`，因此使用了复杂的`for /f`方法。

* * *

## 回答 #13

> 赞同：8
> 
> 时间：2014-01-10T11:07:34.773

在尝试了许多复杂的示例后，我发现非常简单的方法对我有用。

我只是想从本地转储数据库并将其导入远程实例：

在本地机器上：

```
mongodump -d databasename 
```

然后我 scp'd 我的转储到我的服务器机器：

```
scp -r dump user@xx.xxx.xxx.xxx:~ 
```

然后从转储的父目录简单地：

```
mongorestore 
```

并导入了数据库。

假设 mongodb 服务当然正在运行。

* * *

## 回答 #14

> 赞同：7
> 
> 时间：2013-12-31T21:54:53.503

如果需要，您可以在不指定的情况下将所有集合导出到 csv `--fields`（将导出所有字段）。

从[http://drzon.net/export-mongodb-collections-to-csv-without-specifying-fields/](http://drzon.net/export-mongodb-collections-to-csv-without-specifying-fields/)运行这个 bash 脚本

```
OIFS=$IFS;
IFS=",";

# fill in your details here
dbname=DBNAME
user=USERNAME
pass=PASSWORD
host=HOSTNAME:PORT

# first get all collections in the database
collections=`mongo "$host/$dbname" -u $user -p $pass --eval "rs.slaveOk();db.getCollectionNames();"`;
collections=`mongo $dbname --eval "rs.slaveOk();db.getCollectionNames();"`;
collectionArray=($collections);

# for each collection
for ((i=0; i<${#collectionArray[@]}; ++i));
do
    echo 'exporting collection' ${collectionArray[$i]}
    # get comma separated list of keys. do this by peeking into the first document in the collection and get his set of keys
    keys=`mongo "$host/$dbname" -u $user -p $pass --eval "rs.slaveOk();var keys = []; for(var key in db.${collectionArray[$i]}.find().sort({_id: -1}).limit(1)[0]) { keys.push(key); }; keys;" --quiet`;
    # now use mongoexport with the set of keys to export the collection to csv
    mongoexport --host $host -u $user -p $pass -d $dbname -c ${collectionArray[$i]} --fields "$keys" --csv --out $dbname.${collectionArray[$i]}.csv;
done

IFS=$OIFS; 
```

* * *

## 回答 #15

> 赞同：7
> 
> 时间：2014-09-05T21:09:10.343

如果您想转储所有数据库中的所有集合（这是对原始提问者意图的广泛解释），请使用

```
mongodump 
```

所有数据库和集合都将在“当前”位置的名为“转储”的目录中创建

* * *

## 回答 #16

> 赞同：7
> 
> 时间：2020-10-03T13:58:33.553

如果您正在处理远程数据库，您可以尝试这些命令，因为您不介意输出是 BSON

## 1\. 转储为 gzip 存档

```
mongodump --uri="mongodb://YOUR_USER_ID:YOUR_PASSWORD@YOUR_HOST_IP/YOUR_DB_NAME" --gzip --archive > YOUR_FILE_NAME 
```

## 2.还原（[将数据库从一个复制到另一个](https://stackoverflow.com/a/58379219/9552116)）

```
mongorestore --uri="mongodb://$targetUser:$targetPwd@$targetHost/$targetDb" --nsFrom="$sourceDb.*" --nsTo="$targetDb.*" --gzip --archive 
```

* * *

## 回答 #17

> 赞同：6
> 
> 时间：2022-01-12T12:42:51.967

对于本地和远程转储和恢复：

# 对于本地

本地转储：

```
mongodump -d mydb -o ./mongo-backup 
```

本地还原：

```
mongorestore -d mydb ./mongo-backup/mydb 
```

* * *

# 对于远程

**远程转储**

```
mongodump --uri "mongodb+srv://Admin:MYPASS@appcluster.15lf4.mongodb.net/mytestdb" -o ./mongo-backup 
```

远程恢复

```
mongorestore --uri "mongodb+srv://Admin:MYPASS@appcluster.15lf4.mongodb.net/mytestdb" ./mongo-backup/mytestdb 
```

* * *

## 回答 #18

> 赞同：6
> 
> 时间：2017-11-23T10:38:41.737

您可以使用以下命令创建 zip 文件。它将创建提供的数据库 {dbname} 的 zip 文件。稍后您可以在 mongo DB 中导入以下 zip 文件。

```
Window filepath=C:\Users\Username\mongo 

mongodump --archive={filepath}\+{filename}.gz --gzip --db {dbname} 
```

* * *

## 回答 #19

> 赞同：3
> 
> 时间：2013-05-30T13:09:31.597

如果您想使用*mongoexport*和*mongoimport*从数据库中导出/导入每个集合，我认为[此实用程序](https://gist.github.com/smashew/6125915)对您有所帮助。我已经使用过几次类似的实用程序；

```
LOADING=false

usage()
{
    cat << EOF
    usage: $0 [options] dbname

    OPTIONS:
        -h      Show this help.
        -l      Load instead of export
        -u      Mongo username
        -p      Mongo password
        -H      Mongo host string (ex. localhost:27017)
EOF
}

while getopts "hlu:p:H:" opt; do
    MAXOPTIND=$OPTIND

    case $opt in 
        h)
            usage
            exit
            ;;
        l)
            LOADING=true
            ;;
        u)
            USERNAME="$OPTARG"
            ;;
        p) 
            PASSWORD="$OPTARG"
            ;;
        H)
            HOST="$OPTARG"
            ;;
        \?)
            echo "Invalid option $opt"
            exit 1
            ;;
    esac
done

shift $(($MAXOPTIND-1))

if [ -z "$1" ]; then
    echo "Usage: export-mongo [opts] <dbname>"
    exit 1
fi

DB="$1"
if [ -z "$HOST" ]; then
    CONN="localhost:27017/$DB"
else
    CONN="$HOST/$DB"
fi

ARGS=""
if [ -n "$USERNAME" ]; then
    ARGS="-u $USERNAME"
fi
if [ -n "$PASSWORD" ]; then
    ARGS="$ARGS -p $PASSWORD"
fi

echo "*************************** Mongo Export ************************"
echo "**** Host:      $HOST"
echo "**** Database:  $DB"
echo "**** Username:  $USERNAME"
echo "**** Password:  $PASSWORD"
echo "**** Loading:   $LOADING"
echo "*****************************************************************"

if $LOADING ; then
    echo "Loading into $CONN"
    tar -xzf $DB.tar.gz
    pushd $DB >/dev/null

    for path in *.json; do
        collection=${path%.json}
        echo "Loading into $DB/$collection from $path"
        mongoimport $ARGS -d $DB -c $collection $path
    done

    popd >/dev/null
    rm -rf $DB
else
    DATABASE_COLLECTIONS=$(mongo $CONN $ARGS --quiet --eval 'db.getCollectionNames()' | sed 's/,/ /g')

    mkdir /tmp/$DB
    pushd /tmp/$DB 2>/dev/null

    for collection in $DATABASE_COLLECTIONS; do
        mongoexport --host $HOST -u $USERNAME -p $PASSWORD -db $DB -c $collection --jsonArray -o $collection.json >/dev/null
    done

    pushd /tmp 2>/dev/null
    tar -czf "$DB.tar.gz" $DB 2>/dev/null
    popd 2>/dev/null
    popd 2>/dev/null
    mv /tmp/$DB.tar.gz ./ 2>/dev/null
    rm -rf /tmp/$DB 2>/dev/null
fi 
```

* * *

## 回答 #20

> 赞同：3
> 
> 时间：2016-03-27T17:32:30.033

以下是还原导出数据库时对我有用的方法：

`mongorestore -d 0 ./0 --drop`

其中 ./ 包含导出的 bson 文件。请注意，这`--drop`将覆盖现有数据。

* * *

## 回答 #21

> 赞同：2
> 
> 时间：2014-03-24T17:44:34.677

如果要备份服务器上的所有 dbs，而不必担心会调用 dbs，请使用以下 shell 脚本：

```
#!/bin/sh

md=`which mongodump`
pidof=`which pidof`
mdi=`$pidof mongod`
dir='/var/backup/mongo'

if [ ! -z "$mdi" ]
   then
        if [ ! -d "$dir" ]
           then
               mkdir -p $dir
           fi
        $md --out $dir >/dev/null 2>&1
   fi 
```

这使用 mongodump 实用程序，如果没有指定，它将备份所有数据库。

你可以把它放在你的 cronjob 中，它只会在 mongod 进程正在运行时运行。如果不存在，它还将创建备份目录。

每个数据库备份都写入一个单独的目录，因此您可以从全局转储中恢复单个数据库。

* * *

## 回答 #22

> 赞同：2
> 
> 时间：2021-01-19T05:05:16.823

如果你有这个问题： `Failed: can't create session: could not connect to server: connection() : auth error: sasl conversation error: unable to authenticate using mechanism "SCRAM-SHA-1": (AuthenticationFailed) Authentication failed.`

然后加`--authenticationDatabase admin`

例如：

`mongodump -h 192.168.20.30:27018 --authenticationDatabase admin -u dbAdmin -p dbPassword -d dbName -o path/to/folder`

* * *

## 回答 #23

> 赞同：2
> 
> 时间：2020-09-30T10:30:41.273

> 我将所有收藏转储到 robo3t 上。我在 vagrant/homestead 上运行以下命令。这对我有用

```
mongodump --host localhost --port 27017 --db db_name --out db_path 
```

* * *

## 回答 #24

> 赞同：2
> 
> 时间：2021-04-15T08:20:28.213

现在不推荐使用某些选项，在版本中`4.4.5`这是我的做法

```
mongodump --archive="my-local-db" --db=my

mongorestore --archive="my-local-db" --nsFrom='my.*' --nsTo='mynew.*' 
```

在此处阅读有关还原的更多信息：[https ://docs.mongodb.com/database-tools/mongorestore/](https://docs.mongodb.com/database-tools/mongorestore/)

* * *

## 回答 #25

> 赞同：2
> 
> 时间：2019-02-08T14:34:36.230

**首先，启动 Mongo DB - 为此转到路径 ->**

`C:\Program Files\MongoDB\Server\3.2\bin`并单击**mongod.exe**文件以启动 MongoDB 服务器。

**Windows 中要导出的命令**

*   `C:/Users/Desktop/temp-folder`使用内部 IP 地址和端口从远程服务器将Windows 中的 MongoDB 数据库从“远程服务器”导出到目录中的本地计算机的命令。

```
C:\> mongodump --host remote_ip_address:27017 --db <db-name> -o C:/Users/Desktop/temp-folder 
```

**Windows 中要导入的命令**

*   将Windows中的MongoDB数据库从本地机器目录导入“远程服务器”的命令 `C:/Users/Desktop/temp-folder/db-dir`

```
C:\> mongorestore --host=ip --port=27017 -d <db-name> C:/Users/Desktop/temp-folder/db-dir 
```

* * *

## 回答 #26

> 赞同：1
> 
> 时间：2020-07-28T17:14:23.467

即使在 mongo 版本 4 中，也无法一次导出所有集合。从在端口 27017 上运行的本地 MongoDB 实例将指定的集合导出到指定的输出文件，您可以使用以下命令：

.\mongoexport.exe --db=xstaging --collection=products --out=c:/xstaging.products.json

* * *

## 回答 #27

> 赞同：1
> 
> 时间：2018-05-03T06:32:33.530

```
#mongodump using sh script 
#!/bin/bash
TIMESTAMP=`date +%F-%H%M`
APP_NAME="folder_name"
BACKUPS_DIR="/xxxx/tst_file_bcup/$APP_NAME"
BACKUP_NAME="$APP_NAME-$TIMESTAMP"
/usr/bin/mongodump -h 127.0.0.1 -d <dbname> -o $BACKUPS_DIR/$APP_NAME/$BACKUP_NAME
tar -zcvf $BACKUPS_DIR/$BACKUP_NAME.tgz $BACKUPS_DIR/$APP_NAME/$BACKUP_NAME
rm -rf /home/wowza_analytics_bcup/wowza_analytics/wowza_analytics
### 7 days old backup delete automaticaly using given command

find /home/wowza_analytics_bcup/wowza_analytics/ -mindepth 1 -mtime +7 -delete 
```

* * *

## 回答 #28

> 赞同：1
> 
> 时间：2019-04-10T18:42:25.963

**有多种选择取决于您想要做什么**

1）如果要将数据库导出到另一个 mongo 数据库，则应使用`mongodump`. 这将创建一个 BSON 文件文件夹，其中包含 JSON 没有的元数据。

```
mongodump
mongorestore --host mongodb1.example.net --port 37017 dump/ 
```

2）如果您想将数据库导出为 JSON，您*可以*使用`mongoexport`，除非您必须一次收集一个（这是设计使然）。但是我认为导出整个数据库`mongodump`然后转换为 JSON 是最简单的。

```
# -d is a valid option for both mongorestore and mongodump

mongodump -d <DATABASE_NAME>
for file in dump/*/*.bson; do bsondump $file > $file.json; done 
```

* * *

## 回答 #29

> 赞同：0
> 
> 时间：2014-05-06T10:13:34.887

1.  打开连接
2.  启动服务器
3.  打开新的命令提示符

出口：

`mongo/bin> mongoexport -d webmitta -c domain -o domain-k.json`

进口：

`mongoimport -d dbname -c newCollecionname --file domain-k.json`

在哪里

```
webmitta(db name)
domain(Collection Name)
domain-k.json(output file name) 
```

* * *

## 回答 #30

> 赞同：0
> 
> 时间：2021-05-08T02:14:25.073

这是我用来实现结果的 bash 脚本。该脚本被概括为 4 个输入（主机 url、数据库、用户名和密码），因此它可以用于任何 mongo 数据库。

```
dburl=$1
username=$3
password=$4
db=$2

mongoAccess=mongodb+srv://$username:$password@$dburl/$db

Collections=$(mongo $mongoAccess --quiet --eval "db.getCollectionNames()" | sed 's/,/ /g' | tail +6)

#echo $Collections

for col in $Collections
do
    if [ "$col" = "[" ] || [ "$col" = "]" ]
    then
        continue
    else
        echo "Exporting $col"
        mongoexport --uri $mongoAccess --collection=$col --type json --out output-$col.json
    fi

done 
```

* * *

## 回答 #31

> 赞同：0
> 
> 时间：2019-05-03T07:02:37.493

对于转储，您的数据库使用以下 CMD

```
 mongodump -d <your d name> -o <dump path>
Ex:mongodump -d qualetics -o D:\dbpackup\qualetics 
```

# functional-programming - 单一任务的目的是什么？

> ID：11255632
> 
> 赞同：9
> 
> 时间：2012-06-29T03:21:39.290
> 
> 标签：functional-programming, erlang

我目前正在尝试掌握 Erlang。这是我研究的第一种函数式编程语言，我注意到在 Erlang 中，您所做的每个作业都是一个作业。显然，不仅在 Erlang 中，在许多其他函数式编程语言中，赋值都是通过单个赋值完成的。

我真的很困惑他们为什么会这样。单次分配的目的究竟是什么？我们能从中得到什么好处？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-29T03:39:53.757

不变性（你称之为单一赋值）简化了很多事情，因为它从你的程序中取出了“时间”变量。

例如，在数学中，如果你说

```
 x = y 
```

您可以在任何地方替换`x`for `y`。在操作编程语言中，您无法确保这种等式成立：每一行代码都有一个“时间”（状态）。[这种时间状态也为不受欢迎的副作用](http://en.wikipedia.org/wiki/Side_effect_%28computer_science%29)敞开了大门，这是模块化和并发性的头号敌人。

有关更多信息，请参阅[此。](https://mitpress.mit.edu/sites/default/files/sicp/full-text/book/book-Z-H-20.html#%_sec_3.1)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-29T07:31:28.823

由于[Single Assignment](http://learnyousomeerlang.com/starting-out-for-real#invariable-variables)，副作用非常小。事实上，在 Erlang 中编写具有竞争条件或任何副作用的代码非常困难。这是因为，编译器很容易告诉未使用的变量、未使用的已创建术语、阴影变量（尤其是内部`funs`）等

Erlang 在这方面获得的另一个优势是[参照透明](http://en.wikipedia.org/wiki/Referential_transparency_%28computer_science%29)性。Erlang 中的函数将仅依赖于传递给它的变量，而不依赖于全局变量，除了`MACROS`（并且宏不能在运行时更改，它们是常量。）。

最后，如果你看过[Erlang Movie](http://www.youtube.com/watch?v=uKfKtXYLG78)， Erlang`Sophisticated Error Detection Mechanism`中内置的 很大程度上取决于在 Erlang 中，变量被分配一次的事实。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-29T08:32:09.133

让变量保持它们的值可以更容易地理解和调试代码。对于并发进程，无论如何您都会遇到同样的问题，因此无论如何都会有足够的复杂性，而没有任何变量可能随时改变其值。将其视为通过仅在显式时允许它们来封装副作用。

# bigdata - 什么是大数据，为什么现在需要它？

> ID：11255634
> 
> 赞同：0
> 
> 时间：2012-06-29T03:22:06.517
> 
> 标签：bigdata

现在一天，只有一个嗡嗡声在继续……大数据……很想知道它是什么……虽然我已经从[大数据](http://en.wikipedia.org/wiki/Big_data)中收集了一些信息，但想知道更多。

谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-29T03:34:04.043

咖啡店数据库和 facebook 数据库之间的区别。与 200 个用户一起工作很容易。但是当你有 200,000 个用户时……那就是另一回事了。

表扫描变得不可能。索引变得非常重要。

单个服务器无法处理所有负载。采用了诸如集群之类的解决方案，使其可以在多台服务器上托管一个应用程序。这使得每次负载变得太大并且性能开始下降时，您都可以继续向集群添加更多服务器。

您也会听到很多关于 NoSQL 数据库的信息，例如 MongoDB。这是数据库仅存储键/值文档的地方。这种数据库比关系数据库系统更适合大规模扩展（通过分片）。

# sql-server - IN 查询以选择所有记录

> ID：11255639
> 
> 赞同：-1
> 
> 时间：2012-06-29T03:23:12.210
> 
> 标签：sql-server

我试过这个查询但没有运气：

```
SELECT tr.transferfrom, tr.transferto, br.id as 'BR_ID',
  tr.refno, br.name as 'BR_NAME', br.code as 'BRANCH_CODE',
  tr.docno, tr.transdate, stk.stockno,stk.salescat,tr.qty,
  tr.sprice,tr.qty*tr.sprice as 'GROSS_SALES' 
FROM TRANSFER tr 
JOIN branch br on tr.branchid=br.id 
JOIN stocks stk on tr.stockid=stk.id 
WHERE (tr.docno = 'ST00576' AND br.id IN ('*')) 
OR RIGHT(tr.refno,7) = 'ST00576' AND LEFT(tr.refno,3) IN ('*') 
```

`br.id`如果是空白值，我想查询以选择所有记录。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T03:25:46.937

有一个获取所有分支 id 的子查询，然后`IN`查询可以引用子查询的输出.. 子查询会像`select br.id from branch br`

因此整个查询将如下所示：

```
SELECT 
  tr.transferfrom, 
  tr.transferto, 
  br.id as 'BR_ID',
  tr.refno,
  br.name as 'BR_NAME', 
  br.code as 'BRANCH_CODE', 
  tr.docno,
  tr.transdate, 
  stk.stockno,
  stk.salescat,
  tr.qty,
  tr.sprice,
  tr.qty*tr.sprice as 'GROSS_SALES' 
FROM TRANSFER tr 
  JOIN branch br 
    on tr.branchid=br.id 
  JOIN stocks stk 
    on tr.stockid=stk.id
WHERE (
  tr.docno = 'ST00576' 
  AND br.id IN (select br.id from branch br)
  ) 
  OR RIGHT(tr.refno,7) = 'ST00576' 
  AND LEFT(tr.refno,3) IN ( select br.id from branch br) 
```

# c - 什么是事务内存？

> ID：11255640
> 
> 赞同：21
> 
> 时间：2012-06-29T03:23:24.693
> 
> 标签：c, memory, transactional-memory

我很困惑，因为从阅读 wiki 页面来看，似乎只有一个用于加载和存储的 checkValidate 和提交系统。目的是解决同步问题吗？它是建立在当前硬件之上的软件编程，还是通过 ISA 实现的硬件？每个（硬件/软件）实现之间有什么区别？

谢谢。

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2012-06-29T04:36:16.727

Transactional Memory is the concept of using transactions rather than locks to synchronise processes that execute in parallel and share memory.

At a very simplified level, to synchronise with locks you identify sections of code (called *critical sections*) that must not be executed simultaneously by different threads and acquire and release locks around the critical sections. Since each lock can only be held by one thread at a time, this guarantees that once one thread enters a critical section, all of the section's operations will have been completed before another thread enters a critical section protected by the same lock(s).

Transactional memory instead lets you designate sections of code as transactions. The transactional memory system (which can be implemented in hardware, software, or both) then attempts to give you the guarantee that any run of a program in which multiple threads execute transactions in parallel will be equivalent to a different run of the program in which the transactions all executed one after another, never at the same time.

The transactional memory system does this by allowing transactions to execute in parallel and monitoring their access to *transaction variables*. If the system detects a conflict between two transactions' access to the same variable, it will cause one of them to abort and "rollback" to the beginning of the transaction it was running; it will then automatically restart the transaction, and the overall state of the system will be as if it had never started the earlier run.

* * *

One goal of transactional memory is ease-of-programming and safety; a properly implemented TM system which is able to enforce that transactions are used correctly gives hard *guarantees* that there are no parallelism bugs (deadlocks, race conditions, etc) in the program, and only requires that the programmer designate the transactions (and sometimes transaction variables, if the system doesn't just consider all of memory to implicitly be transaction variables), without needing to identify exactly what locks are needed, acquire them in the correct order to prevent deadlock, etc, etc. "Transacitons are used correctly" implies that there is no sharing data between threads without going through transaction variables, no access to transactional data except in transactions, and no "un-rollbackable" operations inside transactions); library based software transactional memory systems for imperative languages like C, Java, etc generally are unable to enforce all of this, which can re-introduce the possibility of some of the parallelism bugs.

Another goal of transactional memory is increasing parallelism; if you have a whole bunch of parallel operations which access some data structure, all of which *might* write to it but few of which actually do, then lock-based synchronisation typically requires that all of the operations run serially to avoid the chance of data corruption. Transactional memory would allow almost all of the operations to run in parallel, only losing parallelism when some process actually *does* write to the data structure.

In practice (as of when I researched my honours project a few years ago), hardware-based transactional memory hasn't really taken off, and current software transactional memory systems have significant overheads. So software transactional memory is more aimed at "reasonable performance that scales with the available processors moderately well and is pretty easy to code", rather than giving you absolute maximal performance.

There's a lot of variability between different transactional memory systems though; I'm speaking at quite an abstract and simplified level here.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-29T03:57:49.640

来自[gcc 维基：](http://gcc.gnu.org/wiki/TransactionalMemory)

```
通常，实现有两种形式： 软件事务内存
(STM) 系统使用锁或其他标准原子指令来完成其工作。
硬件事务内存 (HTM) 系统使用多字同步
CPU 的操作以直接实现事务的要求
（例如，参见 Rock 处理器）。因为大多数 HTM 系统可能是最好的
 努力设施（即，并非所有交易都可以使用 HTM 执行），
包含 HTM 的实用 TM 实现也具有 STM 组件
因此被称为混合事务内存系统。
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-06-29T03:32:57.140

在实现级别，事务内存是缓存层的一部分。它允许软件在内存上“尝试”某些操作，然后仅在系统中没有其他多处理器修改任何已读取或写入的内存时才“提交”它们。在大多数访问不会发生冲突的非常并行的 SMP 环境中，这可能比让所有线程锁定相同（高度竞争的）同步原语更快。

但是，它使应用程序程序员的任务更加困难，因为如果提交失败，软件必须能够恢复（“回滚”）事务。

# c# - 处理视图模型

> ID：11255650
> 
> 赞同：1
> 
> 时间：2012-06-29T03:24:22.453
> 
> 标签：c#, wpf

我的一个视图模型包含对服务控制器的引用。我已经在这个视图模型上实现了 IDisposable。现在，我正在其他一些视图模型中创建此视图模型的列表。我是否需要在其他视图模型上实现 IDisposable。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T04:23:33.247

我会支持这一步，并询问您的视图模型如何获得对 ServiceController 的此引用。您是否将其作为依赖项注入？ServiceController 的寿命是否比 ViewModel 更长？如果 ViewModel 正在*创建*它，那么 Disposable 是有意义的，但是如果您正在注入此依赖项，或者它以某种方式在“ViewModelA”的实例之间共享，那么它不应该由该类来处理 ServiceController . 我的意思是，对可能在其他地方合法范围内的某个对象调用 Dispose() 是没有意义的。

但是，假设这确实有意义（您有一些在内部创建其 ServiceController 的 VM 列表），那么 ViewModelB 是否需要实现 IDisposable 取决于 ViewModelA 实例的生命周期。如果这些作为类级别变量保留，那么是的，您可能应该在 VMB 的 IDisposable 中处理它们。如果它们是在一个方法中创建、使用和丢弃的，那么就没有必要了。

关于 IDisposable 的推理实际上就是考虑对象的生命周期。当您有一些需要释放但在实例生命周期内保留的资源时，这是有意义的。而且，当这种情况发生时，您需要在与创建它的范围相同的范围内调用 Dispose()（通常，如 Ashish 所述，使用“using”关键字）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-29T03:32:53.810

ViewModelA - 实现 IDisposable

ViewModelB - 有 ViewModelA 的列表

我认为您不需要在 ViewModelB 上实现 IDisposable，因为无论您在 ViewModelB 中使用该列表的任何位置，您都将基本上对已经实现 IDisposable 以处置服务控制器的 ViewModelA 对象进行操作（例如，可以在“使用“堵塞）。

# ios - 用于图像策略的内存中缓存和磁盘缓存

> ID：11255653
> 
> 赞同：4
> 
> 时间：2012-06-29T03:24:47.393
> 
> 标签：ios, xcode, uitableview, caching, image-gallery

现在，我正在开发一个新闻阅读器应用程序，比如 BBC 新闻 iOS。 [见 BBC 新闻](http://itunes.apple.com/gb/app/bbc-news/id377382255?mt=8)

在我的应用程序中，我必须将图像从服务器下载并显示在视图中，以使用户更容易选择他们想要阅读的新闻。

为了获得更高的性能，我必须缓存图像以避免为服务器重新加载图像。我知道有两种缓存：将图像保存在内存（RAM）中的内存缓存和将图像保存在磁盘中以便在需要时加载它的 DiskCach。

我的问题是：我的应用程序的最佳图像缓存混合策略是什么？（同时使用内存缓存和图像缓存）我的解决方案是：

*   下载图像 --> 将它们保存在磁盘缓存中 + 将它们保存在内存缓存中 --> 按需从内存缓存中加载图像并显示在视图中 ---> 内存缓存超过其 MAX_SIZE --> 释放内存缓存---> 按需从磁盘缓存中加载图像并将其保存到内存缓存中 --> 重复........

我的解决方案是正确的方法吗？

另一个问题：当内存缓存超过其 MAX_SIZE --> 我们将释放它 --> 缓存中的所有图像都会丢失，因此我们视图中的图像将消失。--> 如何解决这个问题？

抱歉英语不好。预先感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-23T10:17:12.557

在我的一个项目中，我实现了几乎相同的缓存方法（磁盘缓存和内存缓存）。

**最大缓存大小**

每个缓存系统都有自己的最大大小限制。每个图像的“大小”在缓存系统中的计算方式不同。

对于内存缓存，每个图像的大小计算为 `image size = image width * image height (in pixels)` 所以，内存缓存的最大大小将表示像素表面的最大面积

对于磁盘缓存，我使用了每个文件的实际文件大小。

**腾出空间**

使用缓存系统时，您可能会遇到其中一个缓存已满并且您想在其中插入新项目的情况 - 您必须删除一些项目以腾出空间。

我所做的是为缓存中的每个条目分配一个时间戳。每次访问该项目时，我都会更新时间戳。当您想腾出空间时，您只需要根据上次访问时间戳从最旧到最新开始删除项目。

这是一种用于释放空间的简单算法，在某些情况下实际上可能表现不佳。由您自己进行试验，看看您是否需要比这更先进的东西。例如，您可以通过为每个项目添加优先级值来改进此方法，如果它们的优先级高，则将旧项目保留在缓存中。同样，这取决于您的应用程序的需求。

**到期**

对于磁盘缓存，我肯定会为每个条目添加一个到期日期。如果当用户完全终止应用程序时内存缓存被破坏，磁盘缓存中的图像可能会永远卡在那里。

**封装**

我会考虑的另一个方面是使缓存系统对程序员尽可能透明。如果要启用/禁用其中一个缓存，最好让大部分代码保持不变。

在我的应用程序中，我构建了一个中央内容交付系统，我总是通过这个对象从互联网上请求图像。然后，缓存系统会检查本地缓存（内存/磁盘）并立即将图像返回给我或发出下载请求。

无论哪种方式......我，作为缓存系统的“用户”并不关心幕后发生的事情。我只知道我请求从 URL 获取图像并且我得到了它（更快或更慢，取决于图像是否被缓存）。

# javascript - 谷歌地图缺少瓷砖处理

> ID：11255657
> 
> 赞同：1
> 
> 时间：2012-06-29T03:24:53.577
> 
> 标签：javascript, google-maps, http-status-code-404, tiles

请告知如何在我的 ImageMapType 上显示特殊图块而不是丢失图块？

我的地图有很多缺失的图块，现在它报告每个图块大约 404 错误。我想处理它并只显示黑色瓷砖。

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T05:39:21.863

Mike Williams 在他关于[自定义地图](http://econym.org.uk/gmap/custommap.htm)的 v2 教程中描述了一种方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-16T14:49:16.180

您可以使用 .htaccess 将不存在的图块重定向到“空”图块：

```
RewriteEngine on
RewriteCond %{REQUEST_URI} \.(jpg|jpeg|gif|png|ico)$ [NC]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ your_path_to empty_tile/none.png [L] 
```

附上空瓷砖：

![1x1 空瓷砖](../Images/677cd670611a93c2f0ab3073319b0fb6.png)

# trigger.io - 打开模态视图时出错：“无法显示 URL”

> ID：11255659
> 
> 赞同：1
> 
> 时间：2012-06-29T03:25:15.213
> 
> 标签：trigger.io

这是控制台中出现的错误：

> [警告] 模式 webview 错误：错误域 = WebKitErrorDomain 代码 = 101 “无法显示 URL” UserInfo = 0x8fee7e0 {NSErrorFailingURLKey = http%3A%2F%2Fimgur.com%2F59tSD.jpg，NSErrorFailingURLStringKey = http%3A%2F %2Fimgur.com%2F59tSD.jpg, NSLocalizedDescription=无法显示网址}

加载本地文件时出现相同的错误：

```
forge.tabs.open('about.html'); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T06:09:51.420

在前一种情况下，您似乎需要解码您的 url [decodeURIComponent](http://www.w3schools.com/jsref/jsref_decodeuricomponent.asp)

在后面，您需要使用[forge.tools.getURL获取本地文件的完整路径](http://docs.trigger.io/en/v1.3/modules/tools.html#geturl)

这应该有效：

```
forge.tools.getURL('about.html', function(url) {
    forge.tabs.open(url);
}); 
```

# jquery - Jquery：根据选择表单选项的值显示隐藏的div

> ID：11255665
> 
> 赞同：0
> 
> 时间：2012-06-29T03:25:38.967
> 
> 标签：jquery, forms, html, hide, show

我在 Jquery 上很糟糕，当我尝试为我的网站制作这段代码时几乎无法理解它。

我的目标是在表单中选择的值等于该 Div 标签的名称时显示*Div*标签*。*

这是我所拥有的：

```
<form>
    <select name="SELECT_Mood_30">
        <option value="hap">Happy</option>
        <option value="sad">Sadness</option>
        <option value="ang">Angry</option>
        <option value="gru">Grumpy</option>
    </select>

    <select name="SELECT_hair_75">
        <option value="red">red</option>
        <option value="bla">black</option>
        <option value="blo">blonde</option>
        <option value="bru">brunette</option>
    </select>
</form> 
```

现在想象一下，可能有 40、50 甚至 100 种不同的选项。每个都有一个隐藏的 div，如下所示。在选择具有与这些 div 之一的名称匹配的值的选项后，我希望 div 出现。取消选择它时，我希望它消失。

```
<div id="ang" style="display:none;">
    SO YOU'RE ANGRY HUH?!
</div>
<div id="sad" style="display:none;">
    How can I make you feel better?
</div>
<div id="bla" style="display:none;">
    Black hair is really cool
</div>
<div id="red" style="display:none;">
    Red hair is nice!
</div> 
```

在 Jquery 中可以做到这一点吗？可能让它查找选定的值，然后取消隐藏命名的 div。表单的名称无关紧要，它可以在心情表单中查找红色，如果出现，它无论如何都可以显示它。如果命名的 div 不存在，那么什么都不会发生并且一切都很好？（没有错误信息或任何东西）

我在网上找到了一些工作的，但他们似乎都需要将每个选项放在 Jquery 中，这是我不想要的。我希望它足够灵活，您只需更改选项值和 div 名称。

编辑：我忘了说如果选择了一个选项，例如“sad”，然后有人选择“red”，我不希望名为“sad”的 div 消失。但是如果选择了“ang”选项，我希望“悲伤”消失。我希望这不会使事情更加混乱。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T03:28:22.230

为所有 div 添加一个类

```
$("select").change(
function()
{
$(".class").hide();
$(".class[id='"+this.value+"']").show();
}) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T03:30:10.977

给你所有的 div（隐藏）一个类说`class='foo'`

```
 $(document).ready(function(){
    $('select').change(function(){
    $('.foo').hide();

    $("div[name='"+$(this).val()+"']").show();

    });
    }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-29T05:29:48.507

您还可以使用[切换](http://api.jquery.com/toggle/)：

```
jQuery(function() {

   $('select').change(function() {
       // I've use .message to distinguish the divs to show or hide

       var value = $(this).val();
       $('div.message').each(function() { 
              $(this).toggle($(this).attr('id') == value) 
       })

   });

}); 
```

# api - Soundcloud 音频“未定义”

> ID：11255673
> 
> 赞同：0
> 
> 时间：2012-06-29T03:26:51.080
> 
> 标签：api, soundcloud

所以我一直在这个开发服务器上开发一个版本的 Soundcloud 播放器：dev.elbone.com.au/nl 虽然我的播放器工作正常，但我现在收到关于音频的错误。除了一个轨道（“奇数轨道”）之外，轨道 url 在所有轨道上都显示为“未定义”。把我的头发拉在这里。正如音符轨道仅在“可流式”未设置为“0”时显示。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T06:02:06.540

我已经测试了入侵者和看门狗，它们都设置为 streamable=false：

[http://api.soundcloud.com/tracks/37984946?client_id=YOUR_CLIENT_ID](http://api.soundcloud.com/tracks/37984946?client_id=YOUR_CLIENT_ID) http://api.soundcloud.com/tracks/37984625?client_id=YOUR_CLIENT_ID

对我有用的那个（降雪者）设置为 streamable=true：

[http://api.soundcloud.com/tracks/26317984?client_id=YOUR_CLIENT_ID](http://api.soundcloud.com/tracks/26317984?client_id=YOUR_CLIENT_ID)

将不可流式设置为可流式应该可以解决问题。

# c# - 700 万多条记录，我需要对其应用多个公式

> ID：11255679
> 
> 赞同：0
> 
> 时间：2012-06-29T03:27:58.147
> 
> 标签：c#, sql

我有 700 万多条记录，需要对其应用多个公式。这就是我的做法：我将公式转换为分流 Yard 算法，然后使用“查找并替换”变量，然后使用反向波兰表示法转换为双精度...
例如：
y= ( 3 + X + RMT + T ) + 5
将 X 替换为 6
将 RMT 替换为 5.9
将 T 替换为任何...

时间太长了。我可以加快速度吗？谢谢

注意：公式是动态的，可以更改...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T04:35:57.073

> 时间太长了

使用分析器，修复您的应用程序。

我在一个正确的多核系统上看到一个简单的公式时遇到问题，当一个正确编程的解释器连接到那里时，并行化需要十分之一秒才能完成 700 万次更新。

类似的东西的性能是一个实现细节，你缺乏任何信息。

通常情况下通常适用 - 它太慢了，拉起分析器并找出原因。

# xcode - 可以在 iOS5 中更改 UISlider 的按钮大小吗？

> ID：11255680
> 
> 赞同：1
> 
> 时间：2012-06-29T03:28:09.830
> 
> 标签：xcode, ios5, uislider

是时候再问一个 iOS 问题了。

只是想知道是否可以通过编程方式更改滑块控制按钮的半径。我想让控件更大或更小以表示它正在选择的画笔大小。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T15:41:00.640

从[文档](http://developer.apple.com/library/ios/#documentation/uikit/reference/UISlider_Class/Reference/Reference.html)：

```
Assigns a thumb image to the specified control states:
- (void)setThumbImage:(UIImage *)image forState:(UIControlState)state 
```

# c++ - 为什么 c++ 不支持 for 循环中的多个初始化程序？

> ID：11255684
> 
> 赞同：15
> 
> 时间：2012-06-29T03:28:47.350
> 
> 标签：c++, for-loop, programming-languages, language-lawyer

> **可能重复：**
> [在 C++ 中为什么我不能像这样编写一个 for() 循环：for(int i = 1, double i2 = 0;](https://stackoverflow.com/questions/3337126/in-c-why-cant-i-write-a-for-loop-like-this-for-int-i-1-double-i2-0)
> [为什么在 C++ 中用 2 个循环变量编写一个 for 循环这么“难” ?](https://stackoverflow.com/questions/3440066/why-is-it-so-hard-to-write-a-for-loop-in-c-with-2-loop-variables)

```
#include <iostream>
using namespace std;

int main()
{
    for (int i = 0, double j = 3.0; i < 10; i++, j+=0.1)
        cout << i << j << endl;
    return 0;
} 
```

无法编译，因为 for 循环初始化程序块中有两个声明。

但为什么？

* * *

## 回答 #1

> 赞同：50
> 
> 时间：2012-06-29T03:53:23.097

如果你想要`int`两者`double`，在初始化中，那么一种方法是定义一个匿名结构！是的，您**也**`struct`可以在`for`循环中定义。这似乎是C++一个*鲜为人知的特性：*

```
#include <iostream>

int main()
{
    for( struct {int i; double j;} v = {0, 3.0}; v.i < 10; v.i++, v.j+=0.1)
       std::cout << v.i << "," << v.j << std::endl; 
} 
```

输出：

```
0,3
1,3.1
2,3.2
3,3.3
4,3.4
5,3.5
6,3.6
7,3.7
8,3.8
9,3.9 
```

在线演示：http: [//ideone.com/6hvmq](http://ideone.com/6hvmq)

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2012-06-29T03:36:08.833

在 C++ 语法中，**不同的数据类型用`;`**（如果不是函数）分隔。在`for`循环中，一旦`;`找到，含义就会改变。IE

```
for (<initializations>; <condition>; <next operation>) 
```

其他原因可能是为了避免已经很复杂的语法变得复杂，这个特性是不允许的。

如果你想在`for`循环范围内声明变量，那么你总是可以模拟这种情况：

```
int main()
{
  {
    double j = 3.0;
    for (int i = 0; i < 10; i++, j+=0.1)
        cout << i << j << endl;
  }
    return 0;
} 
```

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2012-06-29T03:36:31.177

因为已经采用了语法。在变量声明/定义中，用逗号分隔会添加相同类型的新变量，而不是不同类型的新变量。该语法在`for`循环中可用：

```
for ( std::vector<int>::const_iterator it = v.begin(), end = v.end();
      it != end; ++it ) {
   // do something here
} 
```

# iphone - 程序在 gldrawarray 崩溃

> ID：11255687
> 
> 赞同：1
> 
> 时间：2012-06-29T03:29:10.050
> 
> 标签：iphone, ios, opengl-es

我在 ios 的 Opengles 代码中使用以下模型加载器上传了一个模型。

```
http://bill.dudney.net/roller/objc/entry/wave_front_obj_textures_working 
```

现在的问题是，当我想用​​以下代码绘制一个立方体和这个模型加载器时

```
const GLfloat floorVertices[] = {
    -1.0, 1.0, 0.0,     // Top left
    -1.0, -1.0, 0.0,    // Bottom left
    1.0, -1.0, 0.0,     // Bottom right
    1.0, 1.0, 0.0       // Top right
};

glVertexPointer(3, GL_FLOAT, 0, floorVertices);
glEnableClientState(GL_VERTEX_ARRAY);
glRotatef(90.0, 0.0, 1.0, 0.0);
glDrawArrays(GL_TRIANGLE_FAN, 0, 4); 
```

它在 glDrawArrays(GL_TRIANGLE_FAN, 0, 4) 上崩溃，出现 EXC_BAD_ACCESS 错误

我已经在互联网上搜索了这个问题，但无法简单的解决方案或解释。这是另一个关于它的问题，但由于缺乏关于opengles的知识，我无法得到他的答案。

[glDrawArrays 与 EXC_BAD_ACCESS 崩溃](https://stackoverflow.com/questions/3205229/gldrawarrays-crash-with-exc-bad-access)。

任何人都可以解决这个问题或简单解释已经提出的问题。提前致谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-29T04:03:32.590

这可能是因为其他顶点数组仍处于启用状态，而 OpenGL 指向它们的指针尚未清除，导致 OpenGL 取消引用悬空指针。

使用 OpenGL 帧调试器或 glGetIntegerv() 查看是否启用了任何其他数组类型（COLOR_ARRAY、NORMAL_ARRAY、GL_TEXTURE_COORD_ARRAY）。

# windows - VB.Net通过代码隐藏一个窗口（不是.Net窗口）

> ID：11255688
> 
> 赞同：0
> 
> 时间：2012-06-29T03:29:24.113
> 
> 标签：windows, vb.net

我有一个快速的问题：

有人有一个代码片段可以完全隐藏一个窗口。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T03:35:54.167

使用这个`Me.Visible = False`或检查这个[http://msdn.microsoft.com/en-us/library/windows/desktop/ms633548(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/ms633548(v=vs.85).aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T05:23:58.573

与您的其他问题相同，您可以使用要隐藏的窗口的句柄并`ShowWindow`使用 0 调用 API 函数，因为 nCmdShow 将隐藏窗口。

**宣言**

```
 Private Declare Auto Function ShowWindow Lib "user32" (ByVal hwnd As Integer, nCmdShow As Integer) As Boolean 
```

**用法**

```
ShowWindow(handle, 0) 
```

# c++ - 在我的 windows 和 mac 共享库中使用 openssl

> ID：11255691
> 
> 赞同：0
> 
> 时间：2012-06-29T03:30:54.433
> 
> 标签：c++

我正在编写一个具有 windows 和 mac 版本的软件。该程序需要 ssl 套接字通信。如何在 mac 和 windows 之间创建 openssl 共享库。并使程序可以在没有安装 openssl 的机器上运行

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T03:35:37.583

您需要在 Mac 和 Windows 上编译 openssl 库，并将静态库（Windows 的 .lib 和 Mac 的 .a）分别链接到您的可执行文件中。

# shell - ksh中的两种检查返回值

> ID：11255696
> 
> 赞同：4
> 
> 时间：2012-06-29T03:32:08.787
> 
> 标签：shell, ksh

在 ksh shell 中，我想在运行命令后检查返回值，我写了两种样式：

```
if [ $? -ne 0 ] ; then
    echo "failed!"
    exit 1
else
    exit 0
fi

[ $? -ne 0 ] && echo "failed!" && exit 1 
```

它们是等价的吗？如果没有，如果我想把它写在一行中，我该怎么办？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-29T03:53:25.360

它们很接近，但不一样。首先，即使由于某种原因失败，`if`也会执行；链式表达式不会。此外，链式版本缺少.`exit 1``echo``else exit 0`

更好的等价物是：

```
[ $? -ne 0 ] && { echo "failed!"; exit 1; } || exit 0 
```

这是标记`ksh`的，因此您可能会发现数字表达式语法更清晰：

```
(( $? )) && { echo "failed!"; exit 1; } || exit 0 
```

但`if`如果你愿意，你也可以在一行上写：

```
if (( $? )); then echo "failed!"; exit 1; else exit 0; fi 
```

如果您刚刚在此表达式上方运行以设置的命令`$?`很短，您可能只想将其直接用作`if`表达式 - 使用反向子句，因为退出代码 0 为真：

```
if grep -q "pattern" /some/filename; then exit 0; else echo "failed!"; exit 1; fi 
```

对于这种简单的情况无关紧要，但通常您可能希望避免`echo`. 相反，使用`printf`- 或者如果你不介意只使用 ksh，你可以使用`print`. 问题`echo`在于它没有提供一种可移植的方式来处理变量中的奇怪字符串：

```
$ x=-n
$ echo "$x"
$ 
```

虽然两者都`printf`做`print`：

```
$ printf '%s\n' "$x"
-n
$ print - "$x"
-n 
```

同样，这里不是问题，或者任何时候你只是打印一个文字字符串，但我发现`echo`完全训练自己摆脱这种习惯更容易。

# android - 注册上下文菜单时应用程序挂起

> ID：11255701
> 
> 赞同：0
> 
> 时间：2012-06-29T03:32:40.223
> 
> 标签：android

在我的网络视图中，只要长按任何视图，我都想打开一个上下文菜单。

**我所有的上下文菜单相关代码： -**

```
public void onCreateContextMenu(ContextMenu menu,View view,ContextMenuInfo menuInfo)
  {
      super.onCreateContextMenu(menu, view, menuInfo);
      menu.setHeaderTitle("Options");
      menu.add(0,view.getId(),0,"Save File");
      menu.add(0,view.getId(),0,"Show URL");
  }

/**
 * Context menu
 */
public boolean onContextItemSelected(MenuItem item)
{
    if(item.getTitle()=="Save File")
    {   
        return true;
    }
    else if (item.getTitle()=="Show URL")
    {myWebView.setWebViewClient(new WebViewClient() { 
        public boolean shouldOverrideUrlLoading(WebView view, String url){
            myWebView.loadUrl(url); 
            // Here the String url hold 'Clicked URL' 
            displayMessage(url);
            return false; 
        } 
    });
        return true;
    }
    return false;
} 
```

然后我在 onCreate()

```
this.registerForContextMenu(myWebView); 
```

应用程序强制关闭。我在这里做错了什么，请指出给我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T03:43:36.973

也许是这样：

```
public void onCreateContentMenu 
```

应该是这样的：

```
public void onCreateContextMenu 
```

??

# php - 如果您无法验证来自云的付款，您如何安全地将订单保存在云中？

> ID：11255702
> 
> 赞同：8
> 
> 时间：2012-06-29T03:32:50.570
> 
> 标签：php, android, web-services, security, design-patterns

我正在开发一个移动售票应用程序。该系统允许用户使用 3rd 方 api (CardIO) 支付物品，将所有信息保存到我愉快地坐在云端的服务器上。

**问题归结为：** 因为 (1) 支付过程完全发生在手机上，并且 (2) 没有 API 允许我的服务器向支付处理器验证支付实际发生了，我想知道如何最好在我的服务器上的数据库中将其标记为已付款之前，先验证用户是否确实已为该项目付款。

您会看到，用户可以手动跟踪我的 api 调用，登录到他们的帐户，然后将命令发送到我的服务器以将购买标记为已付款，而无需支付该项目的费用。

**所以问题是：** 我如何验证付款是否发生在我的服务器上，或者通过某种握手或移动应用程序加密？

**我目前的方法：** 我通过 SSL (HTTPS) 调用向服务器发送所需的明文信息。除此之外，我发送该字符串的哈希，并在我的服务器上使用相同的算法验证发送的字符串与发送的哈希匹配。我的想法是，然后我可以使用某种密钥来生成这个散列，然后验证纯文本是否与服务器端的散列匹配，以确保没有任何变化。我对这个解决方案的问题是，我不认为它真的那么安全......有人可以很容易地破解算法，因为他们被赋予了加密和纯文本。

感谢您的关注！

斯蒂芬

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-01T21:23:12.793

简短的回答是你不能信任客户，期间。随心所欲地破解它——这不是构建交易信息的方法。

如果您的支付处理器没有您可以依赖的 API，那么您需要一个更好的……它可以立即解决您的问题并为将来解决问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-01T21:15:10.043

手机应该扫描信用卡信息并将其发送到您的服务器，服务器应该是执行付款过程的服务器

# php - 使用 PHP 循环遍历 XML 文件中的节点

> ID：11255705
> 
> 赞同：1
> 
> 时间：2012-06-29T03:32:59.440
> 
> 标签：php, xml

嗨 Stackoverflow 社区 - 来自一个狂热的程序员的问题，我在这里研究了很多，但仍然无法弄清楚。感谢我能得到的任何帮助。

我有一个名为 example.xml 的 XML 文档，其结构如下...

```
<Submissions>
    <Submission>
        <Name>Submission 001</Name>
        <Entries>
            <Entry>
                <EntryId>1</EntryId>
                <Field1>Foo</Field1>
            </Entry>

            <Entry>
                <EntryId>2</EntryId>
                <Field1>Bar</Field1>
            </Entry>
        </Entries>
    </Submission>
    <Submission>
        <Name>Submission 002</Name>
        <Entries>
            <Entry>
                <EntryId>1</EntryId>
                <Field1>Foo</Field1>
            </Entry>

            <Entry>
                <EntryId>2</EntryId>
                <Field1>Bar</Field1>
            </Entry>
        </Entries>
    </Submission>
</Submissions> 
```

我在 PHP 中使用 SimpleXML，并希望解析 XML 文档并向浏览器回显如下所示的内容：

```
Submission 1, Entry 1, Foo
Submission 1, Entry 2, Bar
Submission 2, Entry 1, Foo
Submission 2, Entry 2, Bar 
```

所以基本上这个想法只是循环遍历 XML 文档并将每个条目与它所属的提交相关联。

我做了我的研究，我很乐意使用以下代码输出条目，但我不知道如何将条目与提交相关联。

```
<?php

$xml = simplexml_load_file('example.xml');

$Submissions = $xml;

foreach ($Submissions->Submission->Entries->Entry as $Entry) {

    echo $Entry->EntryId.' , '.$Entry->Field2.' <br />';

}

?> 
```

感谢你的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T03:40:43.263

您可以尝试使用 XPath 像这样获取祖父母

```
$submission = $Entry->xpath("../.."); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T03:42:21.853

我很少使用 SimpleXML，但你能不能不这样做：

```
foreach ($Submissions->Submission as $Sub) {

  foreach ($Sub->Entries->Entry as $Entry) {

    echo $Sub->Name . ', ' . $Entry->EntryId.' , '.$Entry->Field2.' <br />';

  }

} 
```

**编辑：**更改代码以正确显示名称标签中的数据（如以下评论中建议的 OP）。

# spring - Spring MVC 3：不同控制器中的相同@RequestMapping，具有集中式 XML URL 映射（混合 xml/注释方法）

> ID：11255706
> 
> 赞同：4
> 
> 时间：2012-06-29T03:33:00.053
> 
> 标签：spring, spring-mvc, request-mapping

我喜欢将所有映射保存在同一个地方，所以我使用 XML 配置：

```
<bean class="org.springframework.web.servlet.handler.SimpleUrlHandlerMapping">

    <property name="mappings">
        <value>
            /video/**=videoControllerr
            /blog/**=blogController
        </value>
    </property>
    <property name="alwaysUseFullPath">
        <value>true</value>
    </property>
</bean> 
```

如果我在不同的控制器中创建具有相同名称的第二个请求映射，

```
@Controller
public class BlogController {
    @RequestMapping(value = "/info", method = RequestMethod.GET)
    public String info(@RequestParam("t") String type) {
        // Stuff
    }
}

@Controller
public class VideoController {
    @RequestMapping(value = "/info", method = RequestMethod.GET)
    public String info() {
        // Stuff
    }
} 
```

我得到一个例外：

```
Caused by: java.lang.IllegalStateException: Cannot map handler 'videoController' to URL path [/info]: There is already handler of type [class com.cyc.cycbiz.controller.BlogController] mapped. 
```

有没有办法在不同的控制器中使用相同的请求映射？

我想有2个网址：

```
/video/info.html

/blog/info.html 
```

使用 Spring MVC 3.1.1

**编辑：** 我不是唯一一个： [https ://spring.io/blog/2008/03/24/using-a-hybrid-annotations-xml-approach-for-request-mapping-in-spring-mvc](https://spring.io/blog/2008/03/24/using-a-hybrid-annotations-xml-approach-for-request-mapping-in-spring-mvc)

该应用程序的其余部分运行良好。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-29T03:45:02.600

只需在控制器级别放置一个请求映射：

```
@Controller
@RequestMapping("/video")
public class VideoController {
    @RequestMapping(value = "/info", method = RequestMethod.GET)
    public String info() {
        // Stuff
    }
}

@Controller
@RequestMapping("/blog")
public class BlogController {
    @RequestMapping(value = "/info", method = RequestMethod.GET)
    public String info(@RequestParam("t") String type) {
        // Stuff
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-28T14:34:26.843

您可以使用每个方法映射的参数。看我的问题和答案：

*   [@RequestMapping 在不同类中的相同 URL 上使用“params”会导致 JUnit 中使用 SpringJUnit4ClassRunner 出现“IllegalStateException：无法映射处理程序”](https://stackoverflow.com/questions/14561691/requestmapping-with-params-on-same-url-in-different-classes-cause-illegalsta/)
*   [https://stackoverflow.com/a/14563228/173149](https://stackoverflow.com/a/14563228/173149)

# mysql - 检测非变化值的高级 SQL 语句 - MySQL

> ID：11255707
> 
> 赞同：2
> 
> 时间：2012-06-29T03:33:09.080
> 
> 标签：mysql, sql

我有下面描述的两个表。我需要的是一个单一的查询，它将告诉我在给定的天数内得分没有变化的球员。

```
CREATE TABLE players (
  pid INT(50),
  name VARCHAR(255),
  updatedAt DATETIME
);

CREATE TABLE pl_scores (
  pid INT(50),
  score INT(255),
  updatedAt DATETIME
); 
```

该`players`表保留了所有玩家的主列表以及其他不变的数据，为简洁起见未在此处显示。该`pl_scores`表保留分数变化的运行历史记录，以跟踪增长和其他可能发生变化的值。`pl_scores`每 6 小时为每个玩家插入一条新记录。

我想得到的是`pid`在一定天数内没有得分变化的球员，但我不确定如何将其分组以获得正确的值。

**示例数据集**

（只显示每天的最后一个分数，真正需要比较的只是一个）

```
+------+------+-------+------+---------+---------------------+
| pid  | aid  | score | rank | cityCnt | updatedAt           |
+------+------+-------+------+---------+---------------------+
| 1660 |    0 |   801 | 2111 |       1 | 2012-06-20 22:14:11 |
| 1660 |    0 |   801 | 2250 |       1 | 2012-06-21 22:15:45 |
| 1660 |    0 |   801 | 2387 |       1 | 2012-06-22 22:17:06 |
| 1660 |    0 |   801 | 2547 |       1 | 2012-06-23 22:17:09 |
| 1660 |    0 |   801 | 2702 |       1 | 2012-06-24 22:19:50 |
| 1660 |    0 |   801 | 2836 |       1 | 2012-06-25 22:21:07 |
| 1660 |    0 |   801 | 2956 |       1 | 2012-06-26 21:42:44 |
+------+------+-------+------+---------+---------------------+ 
```

**编辑**

下面找到的答案完美无缺，但现在我想更进一步，并通过在第三张表中找到的硬编码值来限制结果。这是有效的 SQL 语句

```
SELECT a.pid, c.aid, b.name AS pName, c.name AS aName, a.score FROM pl_scores AS a 
JOIN players AS b ON a.pid = b.pid 
JOIN alliances AS c ON b.aid = c.aid 
WHERE a.updatedAt >= CURRENT_DATE() - INTERVAL 3 DAY GROUP BY a.pid HAVING MIN(a.score) = MAX(a.score); 
```

每个玩家在世界各地都有多个城市。我想限制在给定大陆上找到城市的玩家的结果。例如，我想找到最近 3 天在 大陆 上没有改变分数的所有玩家`34`。该`cities`表如下所示：

```
CREATE TABLE cities (
  cid INT(50),
  pid INT(50),
  name VARCHAR(255),
  cont INT(10),
  updatedAt DATETIME
); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T03:44:32.633

我想它可以用这样的东西来完成：

```
 SELECT plf.pid, 
             COALESCE(plf.score, 0) AS former_score, 
             COALESCE(pll.score, 0) AS latter_score
        FROM pl_scores AS plf
  RIGHT JOIN (
             SELECT pid, score FROM pl_scores 
             WHERE DATE(updatedAt) = DATE(NOW())
             ) as pll
          ON plf.pid = pll.pid
       WHERE DATE(updatedAt) = DATE(DATE_SUB(NOW(), INTERVAL 3 DAY)) 
      HAVING former_score = latter_score 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-29T04:38:21.120

您可以`pid`像这样获得分数不变的玩家：

```
SELECT pid
FROM pl_scores
WHERE updatedAt >= CURRENT_DATE() - INTERVAL n DAY
GROUP BY pid
HAVING MIN(score) = MAX(score) 
```

现在您可以使用这些`pid`s 来获取有关相应玩家的完整（或更多）信息，例如：

```
SELECT *  /* or you could specify the necessary columns here */
FROM players
WHERE pid IN (  
  SELECT pid
  FROM pl_scores
  WHERE updatedAt >= CURRENT_DATE() - INTERVAL n DAY
  GROUP BY pid
  HAVING MIN(score) = MAX(score)
) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-29T07:33:48.427

```
SELECT a.pid, c.aid, b.name AS pName, c.name AS aName, a.score FROM pl_scores AS a 
JOIN players AS b ON a.pid = b.pid 
JOIN alliances AS c ON b.aid = c.aid 
JOIN cities AS d ON a.pid = d.pid
WHERE 
a.updatedAt >= CURRENT_DATE() - INTERVAL 3 DAY 
AND d.cont = 34
GROUP BY a.pid HAVING MIN(a.score) = MAX(a.score); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-29T03:43:59.260

我认为这样的事情会起作用：

`SELECT pid, MIN(updatedAt) AS last FROM pl_scores GROUP BY pid, score HAVING last > '2012-06-24'`

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-06-29T03:47:40.337

假设您的`updatedAt`包含何时输入而不是更新时间，使用 3 天作为检查时间：

```
SELECT pid FROM
    (SELECT * FROM pl_score GROUP BY pid HAVING updatedAt > DATE_SUB(NOW(), INTERVAL 3 DAY) AND COUNT(DISTINCT(score)) = 1) AS y
JOIN pl_score ON y.pid = pl_score.pid; 
```

阅读[此页面](http://www.xaprb.com/blog/2006/12/07/how-to-select-the-firstleastmax-row-per-group-in-sql/)以了解有关此类问题的更多信息。

我不能保证这会奏效，但请试一试。

# c++ - 如何在 Windows 上仅使用事件和联锁原语实现递归锁？

> ID：11255713
> 
> 赞同：0
> 
> 时间：2012-06-29T03:34:21.797
> 
> 标签：c++, windows, critical-section

我写了一个递归锁，它的行为喜欢临界区。但是当我实现递归功能时我遇到了问题。像这样的代码：

```
#include "own_cs.h"
#define WIN32_LEAN_AND_MEAN
#include <windows.h>
#include <assert.h>
#include <malloc.h>
#include <stdlib.h>
#include <stdio.h>

struct own_critical_section
{
    long   own_lock_count;          // count of locked thread, -1 means unlock , other means lock.
    HANDLE own_event;               // auto-reset
    DWORD  own_owning_thread_id;    // owner thread of lock
};

void InitialOwnCriticalSection( own_critical_section** own_cs)
{
    *own_cs = (own_critical_section*)malloc( sizeof( own_critical_section ) );
    (*own_cs)->own_lock_count = -1;
    (*own_cs)->own_event = CreateEventW( NULL, FALSE, FALSE, NULL );
    (*own_cs)->own_owning_thread_id = 0;
}

void DeleteOwnCriticalSection( own_critical_section* own_cs )
{
    assert( own_cs != NULL );

    CloseHandle( own_cs->own_event );
    free( own_cs );
}

void EnterOwnCriticalSection( own_critical_section* own_cs )
{
    for ( int spin_count = 0; spin_count < 500; ++ spin_count )
    {//spinlock
        if ( -1L == InterlockedCompareExchange( &own_cs->own_lock_count, -1L, -1L ) )
            break;
        Sleep(0);
    }

    if( 0 < InterlockedIncrement( &own_cs->own_lock_count ) &&
        ( own_cs->own_owning_thread_id != ::GetCurrentThreadId() ) )　
//there is no guarantee that own_owning_thread_id is set before comparison with tid.so this comparison is not thread-safe.
    {   
        //locked
        WaitForSingleObject( own_cs->own_event, INFINITE ); 
    }

    own_cs->own_owning_thread_id = ::GetCurrentThreadId();
}

void LeaveOwnCriticalSection( own_critical_section* own_cs )
{
    if( -1L != InterlockedDecrement( &own_cs->own_lock_count ) &&
        (::GetCurrentThreadId() == own_cs->own_owning_thread_id ) )
    {
        SetEvent( own_cs->own_event );
    }
} 
```

问题是 EnterOwnCriticalSection 例程；作为该函数中的注释，不保证在与 tid 比较之前设置 own_owning_thread_id。所以这种比较不是线程安全的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T06:42:21.223

```
#include "own_cs.h"  
#define WIN32_LEAN_AND_MEAN  
#include <windows.h>  
#include <assert.h>  
#include <malloc.h>  
#include <stdlib.h>  
#include <stdio.h>  

struct own_critical_section  
{  
    long   own_lock_count;          // count of locked thread, -1 means unlock , other means lock.  
    HANDLE own_event;               // auto-reset  
    DWORD  own_owning_thread_id;    // owner thread of lock  
    long   own_recursion_count;     // count of recursion  
};  

void InitialOwnCriticalSection( own_critical_section** own_cs)  
{  
    *own_cs = (own_critical_section*)malloc( sizeof( own_critical_section ) );  
    (*own_cs)->own_lock_count = -1;  
    (*own_cs)->own_event = CreateEventW( NULL, FALSE, FALSE, NULL );  
    (*own_cs)->own_owning_thread_id = 0;  
    (*own_cs)->own_recursion_count = 0;  
}  

void DeleteOwnCriticalSection( own_critical_section* own_cs )  
{  
    assert( own_cs != NULL );  

    CloseHandle( own_cs->own_event );  
    free( own_cs );  
}  

void EnterOwnCriticalSection( own_critical_section* own_cs )  
{  
    assert( own_cs->own_lock_count>=-1L );  

    DWORD current_thread_id = GetCurrentThreadId();  

    if ( own_cs->own_owning_thread_id != current_thread_id )  
    {  
        for ( int spin_count = 0; spin_count < 500; ++ spin_count )  
        {//spinlock  
            if ( -1L == InterlockedCompareExchange( &own_cs->own_lock_count, -1L, -1L ) )  
                break;  
            Sleep(0);  
        }     
    }  

    // if current thread is the acquired thread,   
    // own_cs->own_owning_thread_id = current_thread_id  
    // else if current thread is not the acquired thread  
    // own_cs->own_owning_thread_id should be 0 or the thread_id which is acquired thread.  
    if( 0 < InterlockedIncrement( &own_cs->own_lock_count ) &&  
        ( own_cs->own_owning_thread_id != current_thread_id ) )  
    {     
        //locked  
        WaitForSingleObject( own_cs->own_event, INFINITE );    
    }  

    // inside lock  
    ++own_cs->own_recursion_count;  
    own_cs->own_owning_thread_id = current_thread_id;  
}  

void LeaveOwnCriticalSection( own_critical_section* own_cs )  
{  
    assert( own_cs->own_lock_count>=-1L && own_cs->own_recursion_count>=0 );  

    if ( --own_cs->own_recursion_count == 0 )  
        own_cs->own_owning_thread_id = 0;  

    if( -1L != InterlockedDecrement( &own_cs->own_lock_count ) &&  
        ( 0 == own_cs->own_recursion_count ) )  
    {  
        SetEvent( own_cs->own_event );  
    }  
} 
```

上面的代码已更新。我添加评论指出。

# c - 将 x 提高到 n 次方

> ID：11255720
> 
> 赞同：2
> 
> 时间：2012-06-29T03:35:23.640
> 
> 标签：c, performance, time-complexity, runtime-compilation

我是一个新手，我知道我在 Internet 上某个地方获得的这个 C 程序（学分：[http](http://www.geeksforgeeks.org/archives/28) ://www.geeksforgeeks.org/archives/28 ）可以正常工作。

```
#include<stdio.h>

float power(float x, int y)
{
    float temp;
    if( y == 0)
       return 1;
    temp = power(x, y/2);
    if (y%2 == 0)
        return temp*temp;
    else
    {
        if(y > 0)
            return x*temp*temp;
        else
            return (temp*temp)/x;
    }
}

/* Program to test function power */
int main()
{
    float x=2;
    int y=5;
    printf("%f", power(x, y));
    getchar();
    return 0;
} 
```

我只是想知道如何以及为什么。我在此函数中的代码行之后提出了问题/评论...

```
float temp;
if( y == 0)
   return 1; 
       //this I understand because for instance 2^0 is 1
temp = power(x, y/2);
if (y%2 == 0)
    return temp*temp; 
        //if y is even, eg. 2^4 then 2^2 * 2^2 is still equal to 16
else
{
    if(y > 0) 
        //this part I don't get anymore. eg. 2^5, then temp=2^(5/2)
        return x*temp*temp; 
            //2 * 2^(5/2) * 2^(5/2) how? this will become 64 but the answer is 32.
            //but when I run the program it halts the right answer ie, 32
    else
        return (temp*temp)/x;
} 
```

请向我解释发生了什么。也许我只是错过了一些东西。以及它是如何变成**O(lg n)**运行时间的。非常感谢你！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-29T03:44:07.740

请注意，`y/2`用于计算 temp 的是*整数*除法。因此，在您评论的问题中，5/2 的结果将是 2，而不是 2.5。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-29T03:45:36.020

很难与 Wikipedia 对[平方乘幂](http://en.wikipedia.org/wiki/Exponentiation_by_squaring)的解释竞争，但这是我的看法。

答案的关键在于这个公式：

```
a^(b*c) == ((a^b)^c) 
```

这立即回答了“当幂是偶数时做什么”的问题：如果`y=2*k`，那么你可以先平方`x`，然后将结果提升到 的幂`k`。

奇次幂的情况有点复杂：让我们重写

```
x ^ (2*k+1) 
```

作为

```
(x ^ 2*k) * x 
```

现在你看到了在那个`else`分支中发生了什么：他们从奇数中减去 1 使其成为偶数，得到`x ^ (y-1)`，最后乘以它`x`。^*

现在是时间复杂度：每一步都会减少`y`一半，所以递归调用的次数是`O(Log2(N))`.

* * *

^*实现不会显式地减去`1`。`y`相反，它执行 的整数除法`y/2`，丢弃除法的余数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-29T03:44:56.453

```
/* if y is even and positive, e.g., 5, then floor of y/2 is (y-1)/2, e.g. 4/2
   then x^((y-1)/2 + (y-1)/2 + 1) = x^y, e.g., x * x^2 * x^2 = x^(1+2+2) = x^5) */
if(y > 0) 
    return x*temp*temp; 

/* if y is even and negative, e.g., -5, then floor of y/2 is (y+1)/2, e.g. -4/2
   then x^((y+1)/2 - (y+1)/2 - 1) = x^y, e.g., x^-1 * x^-2 * x^-2 = x^(-1-2-2) = x^-5) */

else
    return (temp*temp)/x; 
```

至于复杂度 O(lgn)，由于在每次递归幂调用之前都要除以 2，因此您最多会进行 lg(n) 调用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-03-04T07:03:11.427

这是通常的 x ^n算法的一个有点笨拙的实现，它在将 n 减半的同时反复平方 x。奇数`n`需要额外的处理：在每一步，您检查 n 是否为奇数，然后乘以另一个因子。

* * *

[Alexander Stepanov 的](https://en.wikipedia.org/wiki/Alexander_Stepanov)^(1 个)非常好的[关于通用/模板化算法的系列讲座](https://youtu.be/wrmXDxn_Zuc?list=PLHxtyCq_WDLV5N5zUCBCDC2WqF1VBDGg1)解释了这个系列的起源：

它来自古埃及算法，用于在减半的同时通过重复加法进行乘法运算`n`。

第一堂课从很简单的东西开始，但要做好。他有有趣的旁白和故事。他从重复加法乘法的递归算法开始，并以各种方式对其进行改进。[他到了将 + 替换为 *](https://youtu.be/etZgaSjzqlU?t=37m6s)的地步，以使这个求幂算法在第 2 课（共 4 课）结束时进行。

* * *

1：Stepanov 设计并实现了 C++ 的大部分 STL。他是泛型编程的早期发明者/先驱之一。我喜欢他的讲座，并会推荐他们。

* * *

这个特定的实现对我来说看起来不太好。

我没有考虑过，但肯定有`n`比除法更好的方法来处理负奇数。这可能是 C 整数除法的舍入方向的怪癖？（它与算术右移不同，即使在`>>`对有符号操作数进行算术移位的 C 实现中也是如此。C 标准不要求这样做，但在某些特定的 C 实现中，它确实具有定义的行为。）

此外，变量名称具有误导性：通常您希望`y`具有与`x`. 如果您混合使用整数和 FP 变量，请使用`n`整数之类的名称。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2016-03-03T15:14:26.200

```
private int nthPower(int num, int power)
    {
        int [] arr = new int[power+1];
        arr[0] = 1; // Any number to the power '0' is '1'
        arr[1] = num; // Any number to the power '1' is num itself.
        int i =2;
        //Now in the for loop you just fill the next element in the array 
        // by multiplying the num with its previous result. Once you are out 
        // of loop you have the desired answer in 'i-1' th index.
        for (i =2; i<=power;i++)
        {
            arr[i] = num*arr[i-1];
        }
        return arr[i-1]; //This is your answer
    } 
```

# java - 用java从网站打开一个文件

> ID：11255721
> 
> 赞同：0
> 
> 时间：2012-06-29T03:35:26.490
> 
> 标签：java

具体来说，我正在尝试从 SharePoint 打开一个文件，但它实际上只是一个网站，而且我有适当的访问权限，所以这不是问题。我正在尝试使用 java 中的桌面 api 打开它，但它给了我一条错误消息“文件不存在！” 桌面只能在本地工作吗？如果它确实适用于网站，我做错了什么？

基于 stephen c 的建议的新代码，它仍然无法正常工作。我错过了什么？

```
public class ParseURL {
        public static void main(String[] args) throws Exception {
            try {
            URL url = new URL("http://wss/is/sites/itsd/network/Remote%20Access/Soft%20Tokens/Your%20new%20RSA%20Soft%20Token%20for%20Android%20-%20INC%20XXXXXXX.oft"); 
            InputStream is = url.openStream(); 
            is.close();
            } catch(IOException err) { 
              }
        }
    } 
```

旧代码

```
 public static void main(){

        try {

            File oftFile = new File("http://wss/is/sites/itsd/network/Remote%20Access/Soft%20Tokens/Your%20new%20RSA%20Soft%20Token%20for%20Android%20-%20INC%20XXXXXXX.oft
");
            if (oftFile.exists()) {

                if (Desktop.isDesktopSupported()) {
                    Desktop.getDesktop().open(oftFile);
                } else {
                    System.out.println("Awt Desktop is not supported!");
                }

            } else {
                System.out.println("File does not exist!");
            }

            System.out.println("Done");

          } catch (Exception ex) {
            ex.printStackTrace();
          }
    }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T03:41:22.233

尝试使用[HttpURLConnection](http://docs.oracle.com/javase/1.4.2/docs/api/java/net/HttpURLConnection.html)。

这是一个网址，您需要连接到该 url 并从您从连接中获得的流中读取内容。

请参阅此处的[用法](https://stackoverflow.com/questions/2793150/how-to-use-java-net-urlconnection-to-fire-and-handle-http-requests)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T03:58:42.510

该类`File`用于表示位于本地/本地安装的文件系统上的文件的名称/路径。你给了它一个 URL，它不是文件名或路径名。

您应该使用`URL`or`URI`类，并尝试通过打开连接来读取它...

我建议您阅读[Java 教程的相关部分，](http://docs.oracle.com/javase/tutorial/networking/urls/index.html)而不是给您提供可剪切和粘贴的盆栽示例。

* * *

> 所以我阅读了教程，但是如何从 url 打开文件？这不仅仅是我试图读取数据，而是我想在 Outlook 中打开经常文件。

啊......所以“打开”是指“启动一个带有文件查看器的单独窗口”。

在这种情况下，您的代码是正确的方法，但您不能`File.exists()`用来测试 URL 是否存在。如果你只有一个“http:”，你需要尝试`URL.openStream()`按照教程中的示例代码打开文件，并将异常解释为文件是否存在。（HTTP 404 响应变成 a`FileNotFoundException`但其他`IOException`s 也是可能的。）不要忘记`close()`流，否则您的代码会泄漏文件描述符。

事实上，您最好不要尝试测试 URL 是否存在。只需尝试“打开”它并诊断异常。

# mysql - 使用 Drupal 6 中的视图获取 Ubercart 产品的总销售额？

> ID：11255722
> 
> 赞同：1
> 
> 时间：2012-06-29T03:35:28.460
> 
> 标签：mysql, drupal, views, report, ubercart

我有一个使用 Drupal 6 和 Ubercart 2 销售产品的网站。每个产品都由外部创建者提供并引用，并且该人从每次销售中获得一定比例。

我使用 CCK 字段创建了一个用户参考字段和佣金字段，它是一个纯文本数字（即“60”代表 60% 的佣金率）

我正在创建一个视图页面，供应商可以在其中登录并查看销售总数、所有已售商品的总金额、该产品的佣金百分比以及他们将收到的总金额。

我已经使用 PHP 和 Customfield 模块设置了所有计算，我只需要知道如何使用 Views 提取任何给定产品的销售总数。

我最初认为 Ubercart 订单产品：数量字段会这样做，但这会拉动给定订单中的销售数量，或者类似的东西。

/admin/store/reports/products 上的 Ubercart 报告页面显示了每种产品的总销售额，所以我知道这是可能的，但我在编程方面还不够好，无法了解他们是如何做到的。

我认为对于有经验的用户来说应该很简单。

任何人？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T16:10:20.477

我做的！我不敢相信我想通了。来自 uc_reports.admin.inc 的第 219 行是关键。

这是我为获得给定产品的总销售额所做的工作。

在我的视图中，我创建了一个节点 ID 字段并将其从显示中排除。然后我创建了一个 Customfield PHP Code 字段并使用了以下代码，其中 $data->node_vid 从我最初创建的字段中提取节点 ID。

```
<?php
$sold = db_result(db_query("SELECT COUNT(*) FROM {uc_order_products} AS p LEFT JOIN {uc_orders} AS o ON p.order_id = o.order_id WHERE o.order_status ='completed' AND p.nid = '$data->node_vid'"));
print $sold;
?> 
```

然后，我创建了更多带有一些基本 PHP 数学函数的 Customfield PHP Code 字段，以生成我在其他字段中需要的内容。

我使用 $data->customfield_phpcode_3 将总销售数据提取到其他字段中，您的具体数字可能会有所不同。此处唯一需要注意的是，如果您删除了其他自定义字段 PHP 代码字段之一，则必须返回并将 $data->customfield_phpcode_3 更改为所需的任何新数字。

现在我看着它，这一切似乎都很容易。

# c# - 使用 Mutex(??) 检查只允许 2 个活的应用程序实例

> ID：11255728
> 
> 赞同：2
> 
> 时间：2012-06-29T03:36:17.413
> 
> 标签：c#, mutex, semaphore

我了解[Mutex 可用于](https://stackoverflow.com/questions/229565/what-is-a-good-pattern-for-using-a-global-mutex-in-c)仅允许我的应用程序的一个实例在一台机器上启动。这意味着无论任意数量的用户使用多少桌面，最多只能有一个程序实例在运行。

现在，我不想只允许一个实例，而是最多允许*两个*，仅此而已。怎么做？我试过这样的代码：

```
 public static bool MutexChecking()
    {

            bool createNew1;
            // one set of GUID
            new Mutex(false, "54A8F2C1-6C11-4ED4-8A62-AD7C1D9F7970", out createNew1);

            if (createNew1)
                return true;
            bool createNew2;
             //another set
              new Mutex(false, "5E1C76D0-9897-412B-BD56-64A872F8FDE3", out createNew2);

            return createNew2;

    } 
```

上面的代码工作......有点。它适用于我测试过的所有情况，除了这个：

1.  打开程序（我们称之为`p1`）
2.  再次打开程序（我们称之为`p2`）
3.  关闭`p1`。
4.  第三次打开程序 ( `p3`)
5.  期望：在 期间`p3`，上面的方法应该返回一个真（因为`createNew1`应该是`true`），但它返回一个假（因为 `createNew1`返回`false`）。

为什么会这样？知道如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T03:43:43.570

你想要的是一个信号量，而不是一个互斥体。互斥体处理互斥，信号量将共享资源的使用限制为最大数量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T08:12:47.753

Chris Shain 说的是对的。您需要做的是拥有互斥锁，而不仅仅是创建它。此外，您必须在退出应用程序时手动**释放**互斥锁，否则其他应用程序实例可能会遇到*AbandonedMutexException*。

下面是一个简单的代码示例，说明您可能希望如何实现它。请注意，此特定代码要求 StartInstance() 和 StopInstance() 由*同一*线程调用。

```
private static Mutex Mutex1 = new Mutex(false, "54A8F2C1-6C11-4ED4-8A62-AD7C1D9F7970");
private static Mutex Mutex2 = new Mutex(false, "5E1C76D0-9897-412B-BD56-64A872F8FDE3");
private static Mutex AcquiredMutex;

public static bool StartInstance()
{
    if (AcquiredMutex != null)
        return true;

    if (Mutex1.WaitOne(1))
    {
        AcquiredMutex = Mutex1;
    }
    else if (Mutex2.WaitOne(1))
    {
        AcquiredMutex = Mutex2;
    }

    return (AcquiredMutex != null);
}

public static void StopInstance()
{
    if (AcquiredMutex != null)
        AcquiredMutex.ReleaseMutex();
} 
```

* * *

**编辑：**实际上，如果您想使用*createNew*作为检测多个实例的方法，您可能可以这样做，但我个人不推荐它，因为 Mutex 不是为此而设计的。

但是，即使您决定使用*createNew*方法，您仍然需要在应用程序退出后自己显式**关闭互斥锁。**

与前一种方法相比，此方法可能具有的一个优点是 Close() 方法不必由创建它的同一线程调用。

下面是一个使用*createNew*方法的简单代码示例。请注意，它不是线程安全的。您将需要在 StartInstance() 和 StopInstance() 中使用 lock() 以使其成为线程安全的。

```
private static readonly string[] MutexNames = new string[]
{
    "54A8F2C1-6C11-4ED4-8A62-AD7C1D9F7970",
    "5E1C76D0-9897-412B-BD56-64A872F8FDE3"
};

private static Mutex CreatedMutex;

public static bool StartInstance()
{
    if (CreatedMutex != null)
        return true;

    foreach (string name in MutexNames)
    {
        bool created;
        Mutex mutex = new Mutex(false, name, out created);

        if (created)
        {
            CreatedMutex = mutex;
            return true;
        }
        else
        {
            mutex.Close();
        }
    }

    return false;
}

public static void StopInstance()
{
    if (CreatedMutex != null)
        CreatedMutex.Close();
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-29T03:44:48.050

这是因为在 p2 中您再次打开第一个互斥锁。该互斥体保持打开状态，因为 p2 保持打开状态。当您打开第一个互斥锁并发现它已经打开时，您应该将其关闭，这样 p2 只保持第二个互斥锁打开，而 p1 只保持第一个互斥锁打开。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-29T03:45:29.953

简单的。您误解了 out 参数（createdNew）的要点。从[文档](http://msdn.microsoft.com/en-us/library/bwe34f1k.aspx)：

> 当此方法返回时，如果创建了本地互斥锁（即，如果 name 为 null 或空字符串）或创建了指定的命名系统互斥锁，则包含一个布尔值；如果指定的命名系统互斥体已经存在，则返回 false。此参数未初始化传递。

在您的情况下，`p2`已经创建了第一个互斥锁，因此它不是“新创建的”。

您要做的不是依赖应用程序创建互斥锁，而是依赖于*拥有*互斥锁。尝试`true`作为第一个参数传递，并在应用程序退出时调用[ReleaseMutex 。](http://msdn.microsoft.com/en-us/library/system.threading.mutex.releasemutex)

或者，按照@ChrisLatta 的建议切换到命名信号量。

# c# - C# 选中/取消选中 WebBrowser 控件中的复选框？

> ID：11255733
> 
> 赞同：9
> 
> 时间：2012-06-29T03:38:22.453
> 
> 标签：c#, html, winforms, webbrowser-control

这是我的代码：

```
webBrowser1.Document.GetElementById("user").SetAttribute("value", txtUsername.Text);
webBrowser1.Document.GetElementById("pass").SetAttribute("value", txtPassword.Text);
webBrowser1.Document.GetElementById("rememberme").SetAttribute("checked", cbAutoLogin.Checked.ToString()); 
```

用户名和密码都可以，我没有任何问题，但检查不起作用。问题不在 cbAutoLogin.Checked.ToString() 上，即使我写的是 true 或 false 也没有任何变化。

这是html上的复选框

```
<input type='checkbox' id='rememberme' checked='checked' name='rememberme' value='1' class='input_check' /> 
```

其他人有同样的问题吗？还是我做错了什么？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-06-29T03:42:34.740

用这个：

```
webBrowser1.Document.GetElementById("rememberme").InvokeMember("CLICK"); 
```

如果未选中，它将使其选中，如果选中，则将其选中。

或将用户名、密码等值属性更改为 0 或 1。

# objective-c - 将 OAuth 令牌从 iOS 传递到服务器进行存储的安全方式

> ID：11255735
> 
> 赞同：1
> 
> 时间：2012-06-29T03:39:06.150
> 
> 标签：objective-c, twitter, oauth

目标是让用户通过 Twitter 登录，获取 OAuth 令牌和机密（通过反向身份验证）并将其传递给服务器。然后，服务器将使用 Twitter 验证令牌的有效性，并创建一个新用户以及它自己的令牌，应用程序将使用该令牌来来回进行经过身份验证的通信。

我正在努力解决后半部分的问题 - 以安全的方式传递初始数据。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T12:21:43.197

最终通过以下方式解决了初始登录身份验证问题：

1.  用户通过应用程序（移动设备）通过 Facebook 或 Twitter 登录
2.  应用程序将设备 ID、OAuth 数据传递给服务器
3.  服务器根据以上数据创建新用户（或使用设备id作为主键更新当前用户）
4.  服务器创建（或更新）用户令牌和用户秘密哈希并将其返回给应用程序
5.  应用程序存储令牌/秘密哈希

从现在开始，每个 API 请求都使用请求时生成的用户秘密哈希和随机盐进行签名。*用户令牌*、*签名*和*盐*随着每个 API 请求一起传递（通过标头）。

Socket 连接握手授权使用相同的逻辑。

# css - 有了这个 CSS，如何在 iPad2 中添加 iscroll4？

> ID：11255739
> 
> 赞同：0
> 
> 时间：2012-06-29T03:39:50.437
> 
> 标签：css, ipad, iscroll4

```
<html>
<head>
  <script type="text/javascript" src="js/jquery.js"></script>
  <script type="text/javascript" src="js/iscroll.js"></script>
  <script type="text/javascript" src="js/jquery-ui.min.js"></script>
  <link rel="stylesheet" type="text/css" href="js/jquery-ui.css" />
  <link rel="stylesheet" type="text/css" href="css/drag.css" />
  <script type="text/javascript">
    $(document).ready(function(){
      var myScroll;
      function loaded() {
        myScroll = new iScroll('wrapper');
      }
      document.addEventListener('DOMContentLoaded', loaded, false);
    });
  </script>
</head>
<body>
<div id="wrapper" style="overflow: hidden; ">
  <div id="scroll" style="-webkit-transition: -webkit-transform 0ms; -webkit-transform-origin: 0px 0px; -webkit-transform: translate3d(0px, 0px, 0px);" >
  <ul>
    <li>a</li>
    <li>b</li>
    <li>c</li>
    <li>c</li>
    <li>c</li>
    <li>c</li>
    <li>c</li>
    <li>c</li>
    <li>c</li>
    <li>c</li>
    <li>c</li>
    <li>c</li>
    <li>c</li>
    <li>c</li>
    <li>d</li>
  </ul>
</div>
<div class="myScrollbarV" style="pointer-events: none; -webkit-transition: opacity 0ms 0ms; overflow: hidden; opacity: 1; ">
  <div style="pointer-events: none; -webkit-transition: -webkit-transform 0ms cubic-bezier(0.33, 0.66, 0.66, 1); height: 40px; -webkit-transform: translate3d(0px, 221px, 0px); ">
  </div>
</div>
</div>
</body>
</html> 
```

以上是我的 iscroll4 的 HTML 代码，我正在使用以下 CSS：

```
.wrapper{
  position: absolute;
  z-index: 1;
  top: 45px;
  bottom: 48px;
  left: 0;
  width: 100%;
  background: #AAA;
  overflow: auto;
}
.scroll{
  position: relative;
  -webkit-tap-highlight-color: rgba(0,0,0,0);
  float: left;
  width: 100%;
  padding: 0;
}
.div2{
  list-style-type:none;
}
.myScrollbarV {
  position:absolute;
  z-index:100;
  width:8px;bottom:7px;top:2px;right:1px
}
.myScrollbarV > div {
  position:absolute;
  z-index:100;
  width:100%;
  /* The following is probably what you want to customize */
  background:-webkit-gradient(linear, 0 0, 100% 0, from(#f00), to(#900));
  background-image:-moz-linear-gradient(top, #f00, #900);
  background-image:-o-linear-gradient(top, #f00, #900);
  border:1px solid #900;
  -webkit-background-clip:padding-box;
  -moz-background-clip:padding-box;
  -o-background-clip:padding-box;
  background-clip:padding-box;
  -webkit-box-sizing:border-box;
  -moz-box-sizing:border-box;
  -o-box-sizing:border-box;
  box-sizing:border-box;
  -webkit-border-radius:4px;
  -moz-border-radius:4px;
  -o-border-radius:4px;
  border-radius:4px;
  -webkit-box-shadow:inset 1px 1px 0 rgba(255,255,255,0.5);
  -moz-box-shadow:inset 1px 1px 0 rgba(255,255,255,0.5);
  -o-box-shadow:inset 1px 1px 0 rgba(255,255,255,0.5);
  box-shadow:inset 1px 1px 0 rgba(255,255,255,0.5);
} 
```

我只能看到那个红色的滚动条，但不能滚动它。有人可以帮我吗？iscroll的CSS部分有问题吗？我用[它](http://cubiq.org/dropbox/iscroll4/examples/custom-scrollbar/)作为参考来实现我的滚动。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T03:55:19.080

首先要做的事情：你不需要声明`var myScroll;`，事实上，你不应该。您应该将 iScroll 绑定到窗口对象，以便您可以在必要时取消分配它，这样您就可以检查/调试它的行为。

在您的浏览器中设置一个 javascript 断点（Break on Next 按钮应该可以工作）并检查您的 window.myScroll 对象。有时，iScroll 认为其滚动条或包装器的计算高度为零，除非它是手动设置的，因此它会自行禁用 vScroll 和 hScroll。

尝试在调整 CSS 后在 javascript 控制台中手动执行`window.myScroll.refresh();`，它最终应该会开始滚动。然后在 drag.cs​​s 文件中进行您在浏览器中所做的 CSS 更改。

（PS：如果您愿意，您还可以从滚动条和包装器中删除内联样式，因为 iScroll 会自动应用这些样式）

# openerp - 允许每个经理只看到他创建的项目

> ID：11255743
> 
> 赞同：0
> 
> 时间：2012-06-29T03:40:22.870
> 
> 标签：openerp

> **可能重复：**
> [仅当用户已分配任务时才应显示任务](https://stackoverflow.com/questions/10945270/tasks-should-show-up-only-if-the-user-has-been-assigned-it)

我知道我必须使用访问规则我对如何在这里使用全局变量感到困惑。我希望项目中的每个经理只能访问他们的项目、阶段和任务。

干杯，维沙尔

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T04:52:44.993

OpenERP 有两种可以分配给用户组的安全限制：

*   [记录规则](http://doc.openerp.com/v6.0/book/8/8_20_Config/8_20_Config_accessRights.html#record-rules-for-objects)是应用于创建、读取、写入、取消链接操作的过滤器，并在已授予访问权限后允许按文档进行访问控制。如果文档与至少一个记录规则匹配，用户将只能对给定文档执行操作。默认策略是 ALLOW，因此如果给定模型不存在规则，则具有必要访问权限的用户可以访问该模型的所有文档。

*   [访问权限](http://doc.openerp.com/v6.0/book/8/8_20_Config/8_20_Config_accessRights.html#access-rights-to-objects)是创建、读取、写入、取消链接、是/否标志（类似于 Unix FS 权限），并允许按模型访问控制。它们说明该组的成员是否可以对特定文档模型的任何文档（例如项目任务）执行创建、读取、更新和删除操作。默认策略是 DENY，因此默认情况下，如果用户没有通过其组的访问权限之一明确有权执行任何操作，则默认情况下将拒绝任何操作。

访问权限和记录规则也可以在全局范围内定义，而无需将它们分配给特定组，在这种情况下它们适用于每个人。记录规则有一个陷阱：全局规则可能不会被其他规则放松（故意！），因此请谨慎使用。

在您的情况下，您似乎应该在项目用户组上定义一个额外的记录规则，明确限制对项目、项目任务和阶段的访问，以访问您自己的任务。您需要使用以下参数在“安全规则”菜单中创建一个新条目：

```
object/model: project.task
name: See own tasks only
domain: ['|',('user_id','=',False),('user_id','=',user.id)]
(means: your own tasks and unassigned ones)
apply for read: [x]
apply for write: [x]
apply for create: [x]
apply for delete: [x]
groups: Project / User

object/model: project.project
name: See own project only
domain: ['|',('user_id','=',False),('user_id','=',user.id)]
(means: your own project and unassigned ones)
apply for read: [x]
apply for write: [x]
apply for create: [x]
apply for delete: [x]
groups: Project / User

object/model: project.phase
name: See own phase only
domain: ['|',('user_id','=',False),('user_id','=',user.id)]
(means: your own phase and unassigned ones)
apply for read: [x]
apply for write: [x]
apply for create: [x]
apply for delete: [x]
groups: Project / User 
```

记录规则的域是一个标准的 OpenERP 域，它在您尝试对其执行操作的记录上进行评估，并且可以引用包含当前用户数据的用户变量（技术上，当前用户的浏览记录） . 在中查找 search()

注意：查看现有的记录规则以了解它们首先在做什么，并确保在添加您的规则时阅读记录规则表单上的说明。请记住，如果您在访问权限和记录规则方面做错了什么，您总是可以修复管理员帐户的混乱，因为这些安全限制不适用于管理员（类似于 Unix 上的 root 用户）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-29T07:50:46.203

项目模块包括一个记录规则，它对任务完全执行，“根据用户和项目的任务”：

`['|',('user_id','=',False),('user_id','=',user.id)]`

您只需要在 object 上创建一个相同的记录规则（菜单设置»安全»记录规则）`Project`。

# c# - 具有通用列表参数的函数

> ID：11255749
> 
> 赞同：0
> 
> 时间：2012-06-29T03:40:45.400
> 
> 标签：c#, generics

我正在尝试编写一种方法，该方法采用任何类型的列表并比较那里的项目。这是我到目前为止所拥有的，但它没有编译。

```
protected bool DoListsContainAnyIdenticalRefernces(List<T> firstList, List<T> secondList)
  {
     bool foundMatch = false;
     foreach (Object obj in firstList)
     {
        foreach (Object thing in secondList)
        {
           if (obj.Equals(thing))
           {
              foundMatch = true;
           }
        }
     }
     return foundMatch;
  } 
```

它表示参数中的两个 T 存在错误，并且 if 语句中的“obj”和“thing”存在错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T03:52:03.663

您也可以使用 Linq 扩展方法`Intersect`来实现相同的结果。

```
// to get a list of the matching results
var matchedResults = MyCollection.Intersect(MyOtherCollection); 
```

或者

```
// to see if there are any matched results
var matchesExist = MyCollection.Intersect(MyOtherCollection).Any(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-29T03:50:38.900

如果您不在泛型类中，则需要将泛型参数添加`T`到[泛型方法](http://msdn.microsoft.com/en-us/library/twcad0zb%28v=vs.80%29.aspx)定义中

```
 protected bool DoListsContainAnyIdenticalRefernces<T>(
      List<T> firstList, 
      List<T> secondList)
  {
     bool foundMatch = false;
     foreach (T obj in firstList)
     {
        foreach (T thing in secondList)
        {
           if (obj.Equals(thing))
           {
              foundMatch = true;
           }
        }
     }
     return foundMatch;
  } 
```

注意：您可以`T`在方法内部使用而不是`Object`.

# ruby-on-rails - 每次迁移后是否隐式调用 reset_column_information

> ID：11255768
> 
> 赞同：3
> 
> 时间：2012-06-29T03:42:57.173
> 
> 标签：ruby-on-rails, ruby-on-rails-3, migration

如果我有两个迁移，第一个添加一列，第二个将值插入该列，我还需要`reset_column_information`在第一次迁移结束时手动调用吗？

或改写问题：`reset_column_information`每次迁移后自动调用？

* * *

我在 Rails 3.2.3 上，我相信它曾经`reset_column_information`在每次迁移后调用。但是最近我发现当我将它插入到新创建的列时缺少一些值。这两个迁移在一个 rake 任务期间运行。我认为这是一个错误，但只是想澄清一下。

* * *

更新：

我创建了一个演示应用程序来演示该问题：[https](https://github.com/lulalala/migration-bug) ://github.com/lulalala/migration-bug 。自述文件显示了准备和重现它的步骤。我认为这可能是一个错误并已归档。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-06T04:18:20.253

根据[Rails 问题的此评论](https://github.com/rails/rails/issues/6939#issuecomment-6738014)，Rails 3.2.6 每次运行时只会获取数据库方案的新副本`rake db:migrate`。因此，一次运行一个迁移可能有助于绕过某些新列未更新的问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-29T17:30:26.730

您需要自己在迁移中调用“reset_column_information”。这仅在您添加一列并随后在“相同迁移”中立即填充它时。查看[导轨指南](http://api.rubyonrails.org/classes/ActiveRecord/Migration.html)了解详细信息。

# php - 如何计算行数并显示该数字？

> ID：11255770
> 
> 赞同：1
> 
> 时间：2012-06-29T03:43:01.453
> 
> 标签：php

例如，屏幕上显示 5 条记录。我希望 $questionnum 显示数字 5，但它一直说 $questionnum 为 0。我怎样才能获得与屏幕上输出的行数实际匹配的行数。EG 如果 5 行则显示数字 5，如果 3 行则显示数字 3 等等。

下面是代码：

```
 // Execute
    if (!$stmt->execute()) {
      die("Error executing statement: $stmt->error"); 
    }

    $stmt->store_result();

    // This will hold the search results
    $searchResults = array();
    $searchOption = array();

    // Fetch the results into an array
    if (!$stmt->num_rows()) {
      $stmt->bind_result($dbQuestionContent,$dbOptionType); 
      while ($stmt->fetch()) {
        $searchResults[] = $dbQuestionContent;
        $searchOption[] = $dbOptionType;
      }
    }

    if (isset($_GET['searchQuestion'])) {

      // If $terms is not empty we did a query
      if (!empty($terms)) {

          $questionnum = $stmt->num_rows;

        // If $searchResults is not empty we got results
        if (!empty($searchResults)) {
         echo"<p>Number of Questions Shown from the Search: <strong>$questionnum</strong></p>";
          echo "<table border='1' id='resulttbl'>
          foreach ($searchResults as $key=>$question) {
            echo '<tr class="questiontd"><td>'.htmlspecialchars($question).'</td>';
            echo '<td class="optiontypetd">'.htmlspecialchars($searchOption[$key]).'</td>';
    }
          echo "</table>";
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T03:47:03.160

试试这个：

```
$questionnum = $stmt->num_rows; 
```

如果它仍然是空的，可能是因为你忘了打电话：

```
$stmt->store_result(); 
```

阅读[手册](http://php.net/manual/en/mysqli-stmt.num-rows.php)以获取更多信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T04:08:41.550

由于您已经将结果存储在数组中，只需执行

```
$questionnum = sizeof($searchOption); 
```

# java - WebSphere MQ 消息侦听器（类似于 JMS 消息侦听器）

> ID：11255772
> 
> 赞同：0
> 
> 时间：2012-06-29T03:43:13.837
> 
> 标签：java, ibm-mq, websphere-7

我有从队列中检索消息的 MQConsumerClass，如下所示。

```
while (running)
{
    try
    {
        MQMessage rcvMessage = new MQMessage();
        MQGetMessageOptions gmo = new MQGetMessageOptions();

        gmo.options = MQConstants.MQGMO_WAIT;
        gmo.waitInterval = 60000; 
        queue.get(rcvMessage, gmo);

        if(rcvMessage.getTotalMessageLength() > 0)
        {
            String msgText = rcvMessage.readUTF();
        }
    }
    catch blocks{}
} 
```

但问题是当队列中没有消息时，会抛出 2033 异常。

我认为 2033 NO_MSG_AVAILABLE 异常不是可能会停止操作的严重异常。

`onMessage(Message msg)`但是，每当队列中有新消息时，我想调用函数。

我想用 MessageListener 创建这个类，但我找不到 MessageListener 或任何与之相关的示例。

所以，请告诉我 WMQ Java API 中是否有任何 MessageListener 函数。

或者

有什么办法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-09T14:27:48.033

2033“错误”实际上不是错误，它更像是 MQSeries 返回状态： MQRC_NO_MSG_AVAILABLE 2033 MQTester 程序正在轮询队列以查找消息，但没有可用的消息。

你可以排除它

> MQException.logExclude（新整数（MQException.MQRC_NO_MSG_AVAILABLE））；

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-29T07:00:32.137

好吧，WMQ Java API 没有消息监听器。没有类似`onMessage`的JMS，只有同步接收。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-29T14:05:26.453

在这种循环中，您无法完全避免这些 2033“无消息”异常。通过增加等待间隔，几乎没有缺点（除了完成后应用程序关闭速度可能会变慢），并且您将减少每次获取调用都无法获取消息的机会。因此，例如，如果您指定 5 分钟的等待间隔，只要每 5 分钟至少有一条消息到达队列，那么每个 get 调用都会收到一条消息（通常）。但是对于这种异常，您仍然需要一个 catch 块，因为您应该期望有时在您的等待间隔内找不到消息。只要您的等待间隔不是太短，那么失败的获取、捕获块和循环循环的性能开销应该相对较小。

如果您真的想使用异步使用者，当消息可用时将调用您的应用程序，那么用于 JMS 的 WebSphere MQ 类就是 Java API，您可以在其中找到 MessageListener 接口。WebSphere MQ 为 Java 公开了 2 个不同的 API。您的代码片段正在使用用于 Java 的 WebSphere MQ 类，而不是 JMS。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-09-02T16:19:47.790

您可以使用 **MQConstants.MQWI_UNLIMITED**来指定无限等待间隔。

```
while (running) {
      MQGetMessageOptions gmo = new MQGetMessageOptions();
      gmo.options = MQConstants.MQGMO_WAIT; 
      gmo.waitInterval = MQConstants.MQWI_UNLIMITED;

  try {
      // Get the message off the queue.
      queue.get(rcvMessage, gmo);
  } catch (MQException e) {
    if (e.reasonCode == 2033) {
        continue;
  }

} 
```

}

# actionscript-3 - 循环遍历 Flash 中的对象属性

> ID：11255778
> 
> 赞同：4
> 
> 时间：2012-06-29T03:43:43.193
> 
> 标签：actionscript-3, flash

我有一个对象，它获取按此顺序添加的属性。

```
Home
School
living
status
sound
Memory 
```

当我遍历对象时，它们不会按该顺序出现。我如何让他们按这个顺序出来。

数据是对象

```
for (var i:String in data)
{
    trace(i + ": " + data[i]);
} 
```

有没有办法对其进行排序？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-29T04:17:06.173

对您可以访问属性的顺序进行排序的唯一方法是手动。这是我为您创建的一个功能：

```
function getSortedPairs(object:Object):Array
{
    var sorted:Array = [];

    for(var i:String in object)
    {
        sorted.push({ key: i, value: object[i] });
    }

    sorted.sortOn("key");

    return sorted;
} 
```

审判：

```
var test:Object = { a: 1, b: 2, c: 3, d: 4, e: 5 };
var sorted:Array = getSortedPairs(test);

for each(var i:Object in sorted)
{
    trace(i.key, i.value);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-29T04:30:17.687

Marty 分享的链接很好地解释了正在发生的事情，他的回答也很好。

如果订单很重要，您可能还会考虑另一个解决方案是使用`Vector`.

```
// Init the vector
var hectorTheVector:Vector.<String> = new Vector.<String>();

// Can add items by index
hectorTheVector[0] = "Home";
hectorTheVector[1] = "School";
hectorTheVector[2] = "living";

// Or add items by push
hectorTheVector.push("status");
hectorTheVector.push("sound");
hectorTheVector.push("Memory");

//See all items in order
for(var i:int = 0; i < hectorTheVector.length; i++){
    trace(hectorTheVector[i]);
}

/* Traces out:
Home
School
living
status
sound
Memory
*/ 
```

An`Array`也会保持秩序。这是一个[关于排序数组的好话题](http://help.adobe.com/en_US/ActionScript/3.0_ProgrammingAS3/WS5b3ccc516d4fbf351e63e3d118a9b90204-7fa4.html)

# c# - 在 C# 中打印隐藏的表单？

> ID：11255783
> 
> 赞同：1
> 
> 时间：2012-06-29T03:44:03.367
> 
> 标签：c#, winforms, printing

我有一个包含一堆文本框的 Windows 窗体。我需要一种方法将它们打印在一张纸上。我所做的是将信息从第一种形式转移到第二种形式。我按照我希望它在打印时的样子来格式化第二个表格。我正在使用 PrintForm 控件。使用此控件使我必须使其可见才能打印。

有没有其他方法可以在加载并隐藏第二个表单时立即打印它，以便用户看不到该表单？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T04:17:12.030

使表单可见，但不可见。例如`Location = new Point(-1000, -1000);`

# javascript - Google Apps 脚本的失败摘要：为查看者订阅更改的副本 - 我每分钟收到一次通知

> ID：11255787
> 
> 赞同：-1
> 
> 时间：2012-06-29T03:44:41.357
> 
> 标签：javascript, google-apps-script

我每天每分钟都会收到错误通知，如下所示 / ***** ** *** ** *** ** *** ** *** ** *** ** *** ** *** ** *** ** *** ** *** ** *** ** *** * * *** ** *** *** 您的脚本“为观众订阅更改：服装和配饰”最近未能成功完成。故障摘要如下所示。要为此脚本配置触发器，或更改您的设置以接收未来的失败通知，请单击此处。

该脚本由文档为查看者订阅更改使用：衣服和配饰。

详细信息：启动函数错误消息触发器结束 2012 年 6 月 28 日晚上 9:08 send_changes 执行该操作需要授权。基于时间的 2012 年 6 月 28 日晚上 9:08

真挚地，

Google Apps 脚本

需要帮忙？访问 Google Apps 脚本文档。请不要回复这个信息。(c) 2012 谷歌 ***** ** *** ** *** ** *** ** *** ** *** ** *** ** *** ** *** ** *** ** *** ** *** ** *** ** *** **** / 这是该错误的相关代码

/ ***** ** *** ** *** ** *** ** *** ** *** ** *** ** *** ** *** ** *** ** *** ** *** ** *** ** *** ** *** ** *** ** *** *****

```
var ss = SpreadsheetApp.getActiveSpreadsheet();

function send_changes() {
    var current_time = new Date();
    var last_check = ScriptProperties.getProperty("last_check");
    if (last_check == null) {
        last_check = current_time;
        ScriptProperties.setProperty("last_check", last_check);
    }

    var updates = '';

    var url = ss.getSheetByName('Dashboard').getRange('C5').getValue();
    var when = ss.getSheetByName('Dashboard').getRange('C8').getValue();
    var scope = ss.getSheetByName('Dashboard').getRange('C3').getValue();
    if (scope == 'Site') {
        var site = SitesApp.getSiteByUrl(url);
        var descendants = site.getAllDescendants();
        for (var j = 0; j < descendants.length; j++) {
            var updates = getInfo_(descendants[j], updates, last_check, when);
        }
    }
    else if (scope == 'Page and all subpages') {
        var page = SitesApp.getPageByUrl(url);
        var descendants = page.getAllDescendants();
        for (var j = 0; j < descendants.length; j++) {
            var updates = getInfo_(descendants[j], updates, last_check, when);
        }
    }
    else {
        var page = SitesApp.getPageByUrl(url);
        var updates = getInfo_(page, updates, last_check, when);
    }

    if (updates != "") {
        updates = updates.replace(/<td>/g, "<td style=\"border: 1px solid grey; padding: 7px;\">");
        updates = updates.replace(/<th>/g, "<th  colspan=2  BGCOLOR='#0066cc'  style=\"border: 1px solid grey; padding:  10px;  text-align: left;  color: white; font-size: 1.1em;\">");
        updates = updates.replace(/<table>/g, "<table style=\"width: 700px; border-collapse: collapse;\">");

        // Remove duplicates, remove people who have unsubscribed, remove false email addresses
        var mailing = scrubData_();

        var subject = ss.getSheetByName('Dashboard').getRange('G5').getValue();
        ///////////////////////////////////////////////////////////////////////////////////
        // If the number of updates is too important, send those updates as attachment
        ///////////////////////////////////////////////////////////////////////////////////
        if (updates.length * 2 > 19800) {
            var body = ss.getSheetByName('Dashboard').getRange('G7').getValue() + "<br><br>";
            body += "*** You can find those updates in attachment. ***";
            body += "<br><br><a href=\"" + ss.getFormUrl() + "\">Unsubscribe</a>";
        }
        else {
            var body = ss.getSheetByName('Dashboard').getRange('G7').getValue() + "<br><br>" + updates;
            body += "<br><br><a href=\"" + ss.getFormUrl() + "\">Unsubscribe</a>";
        }
        ////////////////////
        // Batch emails   
        ////////////////////
        for (var j = 0; j < mailing.length; j = j + 30) {
            var bcc = "";
            for (var k = j; k < j + 30; k++) {
                if (k < mailing.length && mailing[k][1] != "") {
                    bcc += mailing[k][1] + ",";
                }
            }
            if (updates.length * 2 > 19800) {
                MailApp.sendEmail('notify@google.com', subject, body, {
                    bcc: bcc,
                    htmlBody: body,
                    attachments: [Utilities.newBlob(updates, "text/html", "Updates")]
                });
            }
            else {
                MailApp.sendEmail('notify@google.com', subject, body, {
                    bcc: bcc,
                    htmlBody: body
                });
            }
        }
        var emails_sent = ss.getSheetByName('Dashboard').getRange('G17').getValue();
        ss.getSheetByName('Dashboard').getRange('G17').setValue(emails_sent + 1);
    }
    ScriptProperties.setProperty("last_check", current_time);
}

function getInfo_(page, updates, last_check, when) {
    var type = page.getPageType();
    switch (type.toString()) {
    case 'AnnouncementsPage':
        var newsfeed = page.getAnnouncements();
        for (var j = 0; j < newsfeed.length; j++) {
            if (chooseWhen_(newsfeed[j], when) > new Date(last_check).getTime()) {
                updates += "<table><tr><th>" + newsfeed[j].getTitle() + "</th></tr>";
                updates += "<tr><td style=\"border: 1px solid grey; padding: 7px; width: 100px;\">Blog </td><td>" + page.getTitle() + "</td></tr>";
                updates += "<tr><td  style=\"border: 1px solid grey; padding: 7px; width:  100px;\">Preview  </td><td  style=\"color: grey; font-style:  italic; border: 1px  solid grey;  padding: 7px;\">" + newsfeed[j].getTextContent().substr(0, 280) + "...</td></tr>";
                updates += "<tr><td style=\"border: 1px solid grey; padding: 7px; width: 100px;\">Link  </td><td><a href=\"" + newsfeed[j].getUrl() + "\">Link</a></td></tr></table><br>";
            }
        }
        break;
    case 'FileCabinetPage':
        var attachments = page.getAttachments();
        for (var j = 0; j < attachments.length; j++) {
            if (chooseWhen_(attachments[j], when) > new Date(last_check).getTime()) {
                updates += "<table><tr><th>" + attachments[j].getTitle() + "</th></tr>";
                updates += "<tr><td  style=\"border: 1px solid grey; padding: 7px; width: 100px;\">Type  </td><td>Attachment</td></tr>";
                updates += "<tr><td style=\"border: 1px solid grey; padding: 7px; width: 100px;\">Description </td><td>" + attachments[j].getDescription() + "</td></tr>";
                updates += "<tr><td style=\"border: 1px solid grey; padding: 7px; width: 100px;\">Page </td><td>" + page.getTitle(); + "</td></tr>";
                updates += "<tr><td style=\"border: 1px solid grey; padding: 7px; width: 100px;\">Link  </td><td><a href=\"" + page.getUrl() + "\">Link</a></td></tr></table><br>";
            }
        }
        break;
    case 'ListPage':
        var listItems = page.getListItems();
        var listUpdated = false;
        for (var j = 0; j < listItems.length; j++) {
            if (chooseWhen_(listItems[j], when) > new Date(last_check).getTime()) {
                listUpdated = true;
            }
        }
        if (listUpdated) {
            updates += "<table><tr><th>" + page.getTitle() + "</th></tr>";
            updates += "<tr><td  style=\"border:  1px solid grey; padding: 7px;  width:  100px;\">List  </td><td  style=\"color:  grey;  font-style:  italic; border: 1px  solid grey;  padding:  7px;\">New item  added</td></tr>";
            updates += "<tr><td style=\"border: 1px solid grey; padding: 7px; width: 100px;\">Link  </td><td><a href=\"" + page.getUrl() + "\">Link</a></td></tr></table><br>";
        }
        break;
    case 'WebPage':
        if (chooseWhen_(page, when) > new Date(last_check).getTime()) {
            updates += "<table><tr><th>" + page.getTitle() + "</th></tr>";
            updates += "<tr><td  style=\"border: 1px solid grey; padding: 7px; width:  100px;\">Preview  </td><td  style=\"color:  grey;  font-style: italic; border: 1px  solid grey;  padding:  7px;\">" + page.getTextContent().substr(0, 280) + "...</td></tr>";
            updates += "<tr><td style=\"border: 1px solid grey; padding: 7px; width: 100px;\">Link  </td><td><a href=\"" + page.getUrl() + "\">Link</a></td></tr></table><br>";
        }
        break;
    }
    return updates;
}

function chooseWhen_(item, when) {
    var time = 0;
    if (when == 'Item is updated') {
        time = item.getLastUpdated().getTime();
    }
    else {
        time = item.getDatePublished().getTime();
    }
    return time;
} 
```

****** *** ** *** ** *** ** *** ** *** ** *** ** *** ** *** ** *** ** *** ** *** ** *** ** *** ** *** ** *** ** *** ** **** /**

 *** * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T05:13:24.833

脚本错误通知清楚地表明“执行该操作需要授权”因此，打开脚本编辑器（作为安装此触发器的用户）并从脚本编辑器运行任何功能 - 然后它会要求您授权。允许后，您应该不会再看到这些错误。

请注意，某些服务（如邮件）每次修改脚本时都需要您重新授权（即使添加空格并保存也被视为修改）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T04:55:39.293

我可以建议几件事：

*   在计时器触发器上运行脚本时，应避免使用`getActiveSpreadsheet()`并将其替换为`openById('SSkey')`
*   您应该检查您是否对脚本正在写入的站点和页面具有写入权限：您可以通过从脚本编辑器手动运行脚本并登录到发生错误的站点或页面来检查。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-11T01:25:35.750

Start Function Error Message Trigger End 7/10/12 9:08 PM send_changes 执行该操作需要授权。基于时间的 2012 年 7 月 10 日晚上 9:08

错误消息来自 send_changes 函数，我运行 send_changes 函数，它要求授权，我也接受授权。但是仍然每分钟都会出现错误通知。请给我这个问题的永久解决方案。**

# android - android中imageview中的动画

> ID：11255789
> 
> 赞同：0
> 
> 时间：2012-06-29T03:44:48.607
> 
> 标签：android, android-animation, android-imageview

我在线性布局中有四个图像视图，一次只显示三个。

```
<set xmlns:android="http://schemas.android.com/apk/res/android" 
    android:interpolator="@android:anim/decelerate_interpolator">

 <translate 
    android:fromXDelta="0%" 
    android:toXDelta="-33%" 
    android:duration="500"
    android:fillAfter="true" />

</set> 
```

我使用这个动画将它们从右向左移动。我已将此动画应用于 onFling 方法中的所有图像。但问题是它们移动到左侧但立即回到原来的位置。我希望他们留在他们的新职位上。
并且在第一次滑动时，第一张图像应该移出屏幕，第四张图像应该从屏幕右侧移入。谁能告诉我我该怎么做。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T05:19:17.837

干得好

```
<?xml version="1.0" encoding="utf-8"?>
<set xmlns:android="http://schemas.android.com/apk/res/android"
    android:fillAfter="true"
    android:interpolator="@android:anim/decelerate_interpolator" >

    <translate
        android:duration="500"
        android:fromXDelta="0%"
        android:interpolator="@android:anim/decelerate_interpolator"
        android:toXDelta="-33%" />

</set> 
```

您需要添加`fillAfter=true`要设置的属性。

最重要的是为什么你在集合中嵌入翻译动画？

`Set`当您想要混合多种动画时使用。

# wix - 如何在 WiX 中安装期间使用替换计算机 + 磁盘图标？

> ID：11255792
> 
> 赞同：4
> 
> 时间：2012-06-29T03:45:01.430
> 
> 标签：wix

是否可以使用 WiX 3.5 替换 msiexec 在安装过程中显示的看起来很古老的计算机 + 磁盘映像？如果有怎么办？

![在此处输入图像描述](../Images/4132acf85db5ce7902606f67bf39c4c9.png)

我目前没有使用 WixUI。我愿意使用它，只要我能获得简单的零点击安装体验。

我已经尝试了此页面上建议的所有 WixVariables：[http](http://wix.tramontana.co.hu/tutorial/user-interface/ui-wizardry) ://wix.tramontana.co.hu/tutorial/user-interface/ui-wizardry但没有运气。谢谢你的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-29T15:14:02.003

不，你不能改变它。

此图标来自`msiexec.exe`，即 Windows Installer 服务。不支持更改此系统对话框中的图标以及[窗口图标](https://stackoverflow.com/questions/6680527/how-to-customize-dialog-window-icon-using-wix)。

# silverlight - 如何计算 GridView 或模板列中的未绑定值

> ID：11255801
> 
> 赞同：0
> 
> 时间：2012-06-29T03:45:52.010
> 
> 标签：silverlight, algorithm, c#-4.0, mvvm-light, radgridview

我想要达到的目标如下：

![在此处输入图像描述](../Images/caf1c0cd3580f5f827bec11ac565f75b.png)

在上图中，您可以看到绑定到样本 ObservableItemsCollection ocSOI 的 DataGrid；

`Code , Description, Total, Delivered`列分别绑定到`ocSOI.Code, ocSOI.Description, ocSOI.TotalQty, ocSOI.DeliveredQty`。

`I am trying to Achieve :`当用户在`'This Delivery'`文本框中输入一个值时，我想重新计算列`'Remaining Qty'`和之前`SubmitChanges()`的值`DomainContext`，我想更改在值中`'ocSOI.DeliveredQty'`添加当前交付的值`ocSOI.DeliveredQty = ocSOI.DeliveredQty + ThisDelivery`。

我非常沉迷于算法，并且迷失在如何实现这一目标的概念中。我真的把我的头拉出来了，这是我无法理解的设计缺陷吗.....不要......所以迷路了......请帮助.!!!

ps`SalesOrderItem`实体包含的`ID, Code, Description, TotalQty, DeliveredQty`属性。

pss 我在我的视图模型中使用 MVVM-Light

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T13:16:22.743

我会做`SalesOrderItem`包含`ThisDelivery`和`Remaining`属性

每条记录都应该代表客户可以订购的物品，因此应该包含所有需要的信息。

您可以使数据项包含 Grid 中每一列的单独属性

```
public class SalesOrderItem
{
    /* Not writing out full Property Change for sake of simplicity */
    public string Code { get; set; }
    public string Description { get; set; }
    public int Quantity { get; set; }
    public int Delivered { get; set; }
    public int ThisDelivery { get; set; }
    public int Remaining { get; set; }

    // When ThisDelivery changes, adjust Remaining value
} 
```

或者您可以将您的项目属性集中在一个对象下，只需在您的项目中包含该项目的属性`SalesOrderItem`

```
public class SalesOrderItem
{
    /* Not writing out full Property Change for sake of simplicity */
    public ItemModel Item { get; set; }
    public int Delivered { get; set; }
    public int ThisDelivery { get; set; }
    public int Remaining { get; set; }

    // When ThisDelivery changes, adjust Remaining value
} 
```

# git - 从 Git 历史记录中删除二进制文件后，为什么我的存储库仍然很大？

> ID：11255802
> 
> 赞同：26
> 
> 时间：2012-06-29T03:46:07.327
> 
> 标签：git, version-control, github

因此，让我先说我知道与 Stackoverflow 上的主题有关的先前问题。事实上，我已经尝试了所有我能找到的解决方案，但我的仓库中有一个二进制文件拒绝被删除，并继续大大增加了我的仓库大小。

我试过的方法，

*   [大卫·安德希尔的剧本](http://dound.com/2009/04/git-forever-remove-files-or-folders-from-history/)
*   [Github 的操作指南](https://help.github.com/articles/remove-sensitive-data)

这两个都是 Darhuuk 对[Remove files from git repo的回答推荐的](https://stackoverflow.com/questions/5563564/remove-files-from-git-repo-completely)

但是，在尝试了这两种解决方案之后，[在 git 中查找大文件的脚本](http://stubbisms.wordpress.com/2009/07/10/git-script-to-show-largest-pack-objects-and-trim-your-waist-line/)仍然会找到有问题的二进制文件。[但是，此答案](https://stackoverflow.com/a/223890/20774)中的脚本不再找到二进制文件的提交。这两个脚本都是由[这个答案](https://stackoverflow.com/a/10622293/20774)建议的。

尝试删除后，repo 仍然是 44mb，这对于相对较小的源大小来说太大了。哪些建议大文件脚本正确地完成了它的工作。我试过推到 github（我做了一个 fork 以防万一），然后做一个新的克隆，看看 repo 大小是否减小，但它仍然是相同的大小。

有人可以解释我做错了什么或建议替代方法吗？

我应该注意，我不仅对从本地存储库中修剪文件感兴趣，而且还希望能够修复 Github 上的远程存储库。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-06-30T20:34:59.600

2017 年编辑：如果您正在阅读本文，您可能应该查看[BFG Repo-Cleaner 。](https://rtyley.github.io/bfg-repo-cleaner/)

* * *

令人尴尬的是，我的本地存储库的大小没有缩小的原因是因为我在 filter-branch 中使用了错误的文件路径。因此，虽然我感谢 J-16 SDiZ 和 CodeGnome 的回答，但我的问题出在椅子和键盘之间。

为了使这个问题不再是我愚蠢的纪念碑，并且对人们真正有用，我花时间写了一个在修剪回购后必须经历的步骤，以便在 Github 上重新获得回购. 希望这可以帮助某人。

* * *

## 删除有问题的文件

要删除有问题的文件，请运行下面的 shell 脚本，基于[Github 删除敏感数据 howto](https://help.github.com/articles/remove-sensitive-data)

```
#!/usr/bin/env bash
git filter-branch --index-filter 'git rm -r -q --cached --ignore-unmatch '$1'' --prune-empty --tag-name-filter cat -- --all

rm -rf .git/refs/original/
git reflog expire --expire=now --all
git gc --prune=now
git gc --aggressive --prune=now 
```

~~我遍历了本地存储库中的每个分支并执行了此操作，但老实说，我不确定是否需要这样做，~~（您不需要在每个分支上都执行此操作）但是您确实需要每个本地分支以进行下一步，所以记在脑子里。完成后，您应该会看到本地存储库中的大小减小。您还应该能够在 CodeGnome 的答案中运行 blob 脚本并查看有问题的 blob 删除。如果不是，请仔细检查文件名和路径并确保它们正确。

[git filter-branch](http://www.kernel.org/pub/software/scm/git/docs/git-filter-branch.html)实际上在这里做的是运行 repo 中每个提交的引号中列出的命令。

脚本的其余部分只是清理旧数据的任何缓存版本。

## 推送修剪后的回购

现在本地存储库处于您需要的状态，诀窍就是将其备份到 Github 上。不幸的是，据我所知，没有办法从 Github 存储库中完全删除二进制数据，这是[Github 敏感数据操作指南的引用](https://help.github.com/articles/remove-sensitive-data)

> 请注意，强制推送不会删除远程 repo 上的提交，它只是引入新的提交并移动分支指针以指向它们。如果您担心用户直接通过 SHA1 访问错误提交，则必须删除 repo 并重新创建它。

您需要重新创建 Github 存储库，这很糟糕，但好消息是重新创建存储库实际上非常容易。痛苦是您还必须在问题和 wiki 中重新创建数据，我将在下面介绍。

我建议在 github 中创建一个新的 repo，然后在你准备好时用旧的 repo 将其切换出来。这可以通过将旧的重命名为“repo name old”，然后将新创建的 repo 的名称更改为“repo name”来完成。确保在创建新存储库时取消选中使用 README 进行初始化，否则您将无法处理干净的状态。

如果你完成了最后一步，你应该清理你的仓库并准备好了。现在需要更改遥控器以匹配新的 Github 存储库位置。我通过直接编辑 .git/config 文件来做到这一点，尽管我确信有人会告诉我这不是正确的方法。

在进行推送之前，请确保您在本地存储库中拥有要推送的所有分支和标签。准备好后，使用以下命令推送所有分支

```
git push --all
git push --tags 
```

现在你应该有一个远程仓库来匹配你修剪的本地仓库。仔细检查所有数据以防万一。

现在，如果您不必担心问题或 wiki，您就完成了。如果你继续阅读。

## 移动 wiki

Github wiki 只是与您的主存储库相关联的另一个存储库。因此，要开始在某处克隆您的旧 wiki 存储库。然后下一部分有点棘手，据我所知，您需要单击新存储库的 wiki 选项卡才能创建 wiki，但它会使用初始文件为新创建的 wiki 播种。所以我所做的，我不确定是否有更好的方法，将遥控器更改为新创建的 wiki repo 并使用推送到新位置

```
git push --all --force 
```

这里需要强制，否则 git 会抱怨当前分支的尖端不匹配。我认为这可能会使初始页面在 git repo 中处于分离状态，但它对 repo 大小的影响应该可以忽略不计。

## 转移问题

[这个答案](https://stackoverflow.com/a/9720796/20774)对此给出了建议。但是看看答案中链接[的脚本](https://github.com/mkorenkov/tools/blob/master/gh-issues-import/gh-issues-import.py)，它看起来相当不完整，有一个 TODO 用于评论导入，我不知道它是否会带来问题的状态。

因此，鉴于我有一个相当小的未解决问题队列，并且我不介意丢失已解决的问题，我选择手动解决问题。请注意，在评论中正确归因于其他人是不可能做到这一点的。因此，我认为对于一个更成熟的大型项目，您需要编写一个更强大的脚本来完成所有工作，但对于我的特定情况，这不是必需的。

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2012-06-29T06:31:25.010

假设您已经使用 git-filter-branch(1) 和朋友从历史记录中删除了 blob，Git 经常将内容保存在 reflog、packfile 和松散的存储库对象中。删除这些未引用对象的咒语是：

```
git prune --expire=now
git reflog expire --expire-unreachable=now --rewrite --all
git repack -a -d
git prune-packed 
```

如果您已完成此操作并且您的存储库*仍然*比您认为的要大，那么您仍然在存储库中的*某个*位置引用了您的 blob 。您必须返回到第一步并删除它们。这可能会有所帮助：

```
# List all blobs by size in bytes.
git rev-list --all --objects   |
    awk '{print $1}'           |
    git cat-file --batch-check |
    fgrep blob                 |
    sort -k3nr 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-06-29T03:51:36.327

script 中的[脚本在 git 中查找大文件](http://stubbisms.wordpress.com/2009/07/10/git-script-to-show-largest-pack-objects-and-trim-your-waist-line/)检查`.pack`文件——即原始对象存储库。第二个脚本显示不再引用大对象。如果你真的想清理它，你可以做 a`gc`和`repack`：

```
git gc --aggressive --prune=now
git repack -A -d 
```

如果这仍然没有帮助，您可能在*远程分支*中有对象引用，您可以尝试

2.  找出哪个提交有这个对象，请参阅[哪个提交有这个 blob？](https://stackoverflow.com/questions/223678/which-commit-has-this-blob)做`git branch -a --contains <commit-ish>`
3.  使用删除远程分支`git branch -r -D branchname`

**更新——什么是“远程分支”？**

*   `git fetch`当您执行/时，远程分支是 git fetch 的内容`git pull`。(与+`git pull`相同。`git fetch refspec``git merge remote-branch`

*   如果您从远程存储库克隆，删除远程分支应该没有不良影响——您总是可以使用类似的东西再次从远程获取/拉取`git fetch origin refs/heads/master:refs/remotes/origin/master`（这将`master`分支从远程拉到远程分支`remotes/origin/master`）。

*   如果这个分支是你创建的，删除也应该没问题——因为你应该有一个“正常”（跟踪）分支。*但*你应该再次确认这一点。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-05-26T05:08:38.097

> 有人可以解释我做错了什么或建议替代方法吗？

您是否尝试过申请 DMAIC？**定义**、**测量**、**分析**、改进**、****控制**。

D - 从 git 历史记录中删除文件后，我的仓库仍然很大。
M - 确定新回购的大小，`git init`用于建立基线。
A - 识别、验证和选择根本原因。用[`git-repo-analysis`](https://github.com/larsxschneider/git-repo-analysis).
I - 识别、测试和实施解决方案。也许[BFG Repo-Cleaner](https://rtyley.github.io/bfg-repo-cleaner/)会有所帮助。也许不会。
C - 维持收益。看看像[Git LFS](https://git-lfs.github.com)或其他适当的控制方法。

> 我还希望能够修复 Github 上的远程仓库。

这将取决于您选择如何解决问题。例如，当使用 BFG 从历史记录中修剪文件时，它会重写历史记录并更新提交 SHA，因此根据您的特定需求和期望的结果，这里会有一些让步。

# android - 将“ant clean test”与最新的 android sdk 一起使用。'${renderscript.opt.level}' 不是 com.android.ant.RenderScriptTask$OptLevel 的允许值

> ID：11255805
> 
> 赞同：9
> 
> 时间：2012-06-29T03:46:14.393
> 
> 标签：android, ant

使用 'ant clean test' 和最新的 android sdk 出错：

build.xml:622：执行此行时发生以下错误：

build.xml:642: '${renderscript.opt.level}' 不是 com.android.ant.RenderScriptTask$OptLevel 的允许值

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-06-29T03:58:29.113

这个怎么样？[https://issues.apache.org/jira/browse/CB-974](https://issues.apache.org/jira/browse/CB-974)似乎是 Android SDK API 16 的 R20 中的一个问题（截至 2012 年 6 月 28 日的最新版本）。我实际上没有使用 RenderScript 的经验，但解决方案似乎正在设置`renderscript.opt.level=O0`.

# php - 实现一个可点击的 ShareThis 按钮

> ID：11255807
> 
> 赞同：1
> 
> 时间：2012-06-29T03:47:00.033
> 
> 标签：php, wordpress, sharethis

我一直在编写此代码来为 ShareThis 实现一个可单击的“共享”按钮，例如，而不是在用户将鼠标悬停在按钮上时弹出 ShareThis 窗口的代码。使其工作的关键是 onmouseover:false 设置：

```
<script language="javascript" type="text/javascript">

    var object = SHARETHIS.addEntry({
        title: "<?php the_title(); ?>",
        url: "<?php the_permalink(); ?>"},
            {button:false,onmouseover:false});

    document.write('<span id="<?php the_title(); ?>"><a href="javascript:void(0);">Share</a></span>');

    var element = document.getElementById("<?php the_title(); ?>");
    object.attachButton(element);

</script> 
```

问题是 onmouseover:false 设置会导致关闭按钮 (X) 在弹出窗口中停止工作（各种 ShareThis 控件都可以工作）。是否有任何解决方法可以使该功能再次运行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T04:16:19.063

我已将 popup:true 添加到属性列表中，如下所示：

```
var object = SHARETHIS.addEntry({
    title: "<?php the_title(); ?>",
    url: "<?php the_permalink(); ?>"},
        {button:false,onmouseover:false,popup:true}); 
```

这导致漂亮的 ShareThis 弹出框出现在一个完全独立的窗口中。它不是那么优雅，但它确实有效。我将把它留几天，如果没有其他人建议重新启用弹出窗口上的关闭按钮，那么我会接受这个作为答案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T03:58:17.280

检查您的代码---

```
var object = SHARETHIS.addEntry({
        title: "<?php the_title(); ?>",
        url: "<?php the_permalink(); ?>"},  <----
            {button:false,onmouseover:false <----
}); 
```

报价不平衡

# php - 为什么 $ 在这个正则表达式中不匹配？

> ID：11255810
> 
> 赞同：2
> 
> 时间：2012-06-29T03:47:17.203
> 
> 标签：php, regex, preg-match-all, lookahead, lookaround

我有以下行，用于分隔 GIF 文件中的帧：

```
preg_match_all('/(?P<frame>\x00\x21\xF9\x04.(?P<delay>..).\x00\x2C.*?)(?=\x00\x21\xF9\x04)/s', $fileContents, $matches, PREG_SET_ORDER); 
```

如果您熟悉 GIF 文件格式，您可能会注意到其中的一个主要缺陷 - 它不会检测最后一帧，因为前瞻仅针对帧头。

相反，如果我将正则表达式更改为：`'/(?P<frame>\x00\x21\xF9\x04.(?P<delay>..).\x00\x2C.*?)(?=\x00\x21\xF9\x04|\x3B$)/s`，`\x3B`文件终止符在哪里（后面是文件/字符串的实际结尾），整个事情都会失败，它甚至不能匹配一次。

我已经在 Kodos*中对此进行了*测试，但由于这是二进制数据，我能做的最好的就是纯文本等价物，它完全符合预期。该函数`preg_match('/\x00\x3B$/', $fileContents)` *确实*匹配，并且在十六进制编辑器中对文件的分析确认它的布局是应该的。

那么，为什么添加`|\x3B$`前瞻会使其完全失败？

注意：是的，有一些用于处理 gif 图像的库。这个问题纯粹是关于过程，而不是最终结果。

**编辑：**我注意到管道空间实际上可能不是问题；正则表达式很乐意匹配`\x00\x21\xF9\x04` *or* `\x3B`（这没有用，因为`\x3B`在整个文件中多次单独出现）。管道空间之后的多个字符似乎出现了问题......有点。`\x3B$`并且`\x00\x3B`都会导致整个正则表达式失败。但是，无论如何，仅寻找 $ 都会失败。这似乎是 $ 锚的问题，而不是其他任何问题，尽管这显然不是这里唯一的问题。

导致**0**个匹配的排列：

```
//Grouping within lookahead:
'/(?P<frame>\x00\x21\xF9\x04.(?P<delay>..).\x00\x2C.*?)(?=(\x00\x21\xF9\x04|\x3B$))/s'
//Moving lookahead within frame subpattern:
'/(?P<frame>\x00\x21\xF9\x04.(?P<delay>..).\x00\x2C.*?(?=\x00\x21\xF9\x04|\x3B$))/s'
//Both of the above:
'/(?P<frame>\x00\x21\xF9\x04.(?P<delay>..).\x00\x2C.*?(?=(\x00\x21\xF9\x04|\x3B$)))/s'
//Separating to two lookaheads:
'/(?P<frame>\x00\x21\xF9\x04.(?P<delay>..).\x00\x2C.*?)((?=\x00\x21\xF9\x04)|(?=\x3B$))/s'
//Just looking for the end anchor without \x3B:
'/(?P<frame>\x00\x21\xF9\x04.(?P<delay>..).\x00\x2C.*?)(?=\x00\x21\xF9\x04|$)/s'
//Just trying to find the end of the file:
'/(?P<frame>\x00\x21\xF9\x04.(?P<delay>..).\x00\x2C.*?)(?=$)/s'
'/(?P<frame>\x00\x21\xF9\x04.(?P<delay>..).\x00\x2C.*?)$/s'
//Trying to find \x00\x3B, the last two bytes:
'/(?P<frame>\x00\x21\xF9\x04.(?P<delay>..).\x00\x2C.*?)(?=\x00\x21\xF9\x04|\x00\x3B)/s'
//With some more grouping experiments:
'/(?P<frame>\x00\x21\xF9\x04.(?P<delay>..).\x00\x2C.*?)(?=(\x00\x21\xF9\x04|\x00\x3B))/s'
'/(?P<frame>\x00\x21\xF9\x04.(?P<delay>..).\x00\x2C.*?)(?=(\x00\x21\xF9\x04)|(\x00\x3B))/s'
//Moving file end outside of lookahead:
'/(?P<frame>\x00\x21\xF9\x04.(?P<delay>..).\x00\x2C.*?)((?=\x00\x21\xF9\x04)|$)/s'
'/(?P<frame>\x00\x21\xF9\x04.(?P<delay>..).\x00\x2C.*?)((?=\x00\x21\xF9\x04)|\x3B$)/s'
'/(?P<frame>\x00\x21\xF9\x04.(?P<delay>..).\x00\x2C.*?)((?=\x00\x21\xF9\x04)|\x00\x3B)/s'
//Moving file end before header:
'/(?P<frame>\x00\x21\xF9\x04.(?P<delay>..).\x00\x2C.*?)(?=$|\x00\x21\xF9\x04)/s'
'/(?P<frame>\x00\x21\xF9\x04.(?P<delay>..).\x00\x2C.*?)(?=\x3B$|\x00\x21\xF9\x04)/s'
'/(?P<frame>\x00\x21\xF9\x04.(?P<delay>..).\x00\x2C.*?)(?=\x00\x3B|\x00\x21\xF9\x04)/s'
'/(?P<frame>\x00\x21\xF9\x04.(?P<delay>..).\x00\x2C.*?)(?=($)|(\x00\x21\xF9\x04))/s'
'/(?P<frame>\x00\x21\xF9\x04.(?P<delay>..).\x00\x2C.*?)(?=(\x3B$)|(\x00\x21\xF9\x04))/s'
'/(?P<frame>\x00\x21\xF9\x04.(?P<delay>..).\x00\x2C.*?)(?=(\x00\x3B)|(\x00\x21\xF9\x04))/s' 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T04:43:03.190

您可能需要将管道分隔值分组在一对自己的括号中：

```
(?=(a|b)) 
```

# google-maps - SCRIPT5007：无法获取属性“offsetWidth”的值：

> ID：11255811
> 
> 赞同：2
> 
> 时间：2012-06-29T03:47:26.710
> 
> 标签：google-maps, google-maps-api-3

我在 ie9 中遇到了这个错误，并且一直在拔头发。基本上“地图画布” div 不会加载。

这是我得到的完整错误：

SCRIPT5007：无法获取属性“offsetWidth”的值：对象为 null 或未定义 main.js，第 29 行字符 1104

任何帮助，将不胜感激！！

这是我的代码：

```
<!DOCTYPE html>
<html class="no-maps-mini" xmlns:v="urn:schemas-microsoft-com:vml">

<!-- Starts the HTML header area -->
<head>

<meta name="viewport" content="initial-scale=1.0, user-scalable=no"/>
<meta content="text/html;charset=UTF-8" http-equiv="content-type"/>

<link rel="stylesheet" type="text/css" href="style/style.css" />

<title>Google Map Demo</title> 

 <script type="text/javascript"
    src="http://maps.google.com/maps/api/js?sensor=false">
 </script>

 <script type="text/javascript"> 

    var tableid1 = 4338356;         //Fusion Table ID
    var mylatlng = new google.maps.LatLng(49.66685, -124.91038); //map centre - Courtenay/Comox  

        function initialize() {

            var myOptions = { 
                            scaleControl: true,   
                            overviewMapControl: true,
                            mapTypeControl: true,    
                            mapTypeControlOptions: {      
                                style: google.maps.MapTypeControlStyle.DEFAULT    
                                },  
                             zoom: 14,
                             center: mylatlng,       
                             mapTypeId: google.maps.MapTypeId.TERRAIN    
                            }; 

            var map = new google.maps.Map(document.getElementById('map-canvas'), myOptions);                        

            var layer1 = new google.maps.FusionTablesLayer({
                query: {
                        select: "'geometry'",
                        from: tableid1
                        },
                map: map
            });
        };

        function changeMapl() {
            var searchString = document.getElementById('search-string-l').value.replace(/'/g, "\\'");
            layerl.setOptions({
                query: {
                        select: "'geometry'",
                        from: tableid1,
                        where: "'Name' = '" + searchString + "'"
                        }
            });
        };

     google.maps.event.addDomListener(window, 'load', initialize());

 </script>

</head>

<body>

<div id="container">
    <div id="header">
        <h1>Comox Valley Walking Trails</h1>
        <hr />
    </div><!-- end #header -->

    <div id="content-secondary">

        <h3>sidebar1 Content</h3>

        <h4>Trails</h4>

            <select id="search-string-l" onChange="changeMapl(this.value);">
                <option value="">--Select--</option>
                <option value="MacDonald Wood Park">MacDonald Wood Park</option>
                <option value="Goose Spit">Goose Spit</option>
                <option value="Mack Laing Park">Mack Laing Park</option>
                <option value="Filberg Rd to Goose Spit">Filberg Rd to Goose Spit</option>
            </select>

          <div class="clear"></div>

    </div>

    <div id="content-primary"><div id="map-canvas"></div></div>    

    <!-- This clearing element should immediately follow the #mainContent div in order to force the #container div to contain all child floats -->
    <br class="clearfloat" />

    <div id="footer">
    <p>Footer</p>
<!-- end #footer --></div>
<!-- end #container --></div>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T05:05:22.017

这是我在 IE8 中遇到的错误：

网页错误详情

消息：'null' 为空或不是对象行：29 字符：1104 代码：0 URI：[http ://maps.gstatic.com/intl/en_us/mapfiles/api-3/9/7a/main.js](http://maps.gstatic.com/intl/en_us/mapfiles/api-3/9/7a/main.js)

你有几个问题：

1.  google.maps.event.addDomListener(window, 'load', initialize()); 不正确，需要改成 google.maps.event.addDomListener(window, 'load', initialize); 在定义地图 div 之前执行它的方式（带括号），导致上面的错误）。

2.  在 ChangeMap1 中，layerl（layer 后跟小写“L”）与 layer1（layer 后跟数字一）不同。

3.  在您发布的代码中，地图画布 div 没有大小（*您的*版本可能不是这样）

[链接到工作版本](http://www.geocodezip.com/v3_FusionTables_GoogleMapDemoA.html)

# jquery - 在 asp.net 中将 Prototype 更改为 JQuery

> ID：11255812
> 
> 赞同：0
> 
> 时间：2012-06-29T03:47:27.207
> 
> 标签：jquery, asp.net, prototypejs

在标题我有以下

```
<script language="javascript" type="text/javascript">
function setConBal() {
    conBal = 1;
}
function readBalance() {
    new Ajax.Updater('tableBalance', '_Bet/PanelBalance1.aspx', { method: 'post', onComplete: setConBal });
}
function preReadBalance() {
    new Ajax.Updater('tableBalance', '_Bet/PanelBalance1.aspx', { method: 'post' });
}
</script> 
```

在 Body 里面我有一个 ID = tableBalance 的 div 和 body 标签的结尾我有这个来调用 JS 函数

```
<script type="text/javascript">readBalance(); preReadBalance();</script> 
```

js函数假设调用PanelBalance1.aspx生成HTML表格并将其放入div中，使用原型时它工作正常，但现在我需要使用JQuery做完全相同的事情。我试图将函数更改为 JQuery 语法，但它不起作用。

```
function readBalance() {
    $.ajax({
        type: 'post',
        url: "_Bet/PanelBalance1.aspx",
        complete: function(r) {
        $('#tableBalance').html(r);
            setConBal();
        }
    });
}

function preReadBalance() {
    $.ajax({
        type: 'post',
        url: "_Bet/PanelBalance1.aspx"
    });

} 
```

当我更改为这种语法时没有错误，但同时也没有输出......我这样做是不是错误的方式？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T04:01:17.780

试试这个

```
function readBalance() {
    $.ajax({
        type: 'post',
        url: "_Bet/PanelBalance1.aspx",
        success: function(data) {
        $('#tableBalance').html(data);
            setConBal();
        }
    });
} 
```

# jquery - ajax 调用后渲染多个 facebook 的“like”按钮

> ID：11255818
> 
> 赞同：1
> 
> 时间：2012-06-29T03:48:01.677
> 
> 标签：jquery, ajax, facebook, facebook-like

[作为Render-like-button-after-ajax-call](https://stackoverflow.com/questions/8961567/render-like-button-after-ajax-call)的后续行动，我在网页上呈现多个“喜欢”按钮时遇到了问题。

我想通过 JSON 和 JQuery 从 Facebook 获取所有帖子的 ID，然后显示每个带有类似按钮的框......问题是简单地调用“FB.XFBML.parse();” 所以我做这样的事情：

```
function displayPost(postJson)
{
$("#myelement").append(postJson.text+"<somehtmltags for like button>"+postJsonId);
FB.XFBML.parse();
}
regular ajax call
{
...
displayPost(postJson);
...
} 
```

编辑：现在，这段代码确实确保了未来的 ajax 调用显示类似按钮，但类似按钮不显示实际的喜欢计数（有多少人喜欢这篇文章）......有什么想法吗？

# jquery - 无法让 jQuery 正确显示或隐藏元素

> ID：11255819
> 
> 赞同：0
> 
> 时间：2012-06-29T03:48:19.823
> 
> 标签：jquery, html

为什么在脚本 1 中，当我显示或隐藏元素时，甚至当我将“显示：无”放置为样式时，我无法让隐藏空间消失？但是在脚本 2 中它工作得很好吗？我究竟做错了什么？下面是运行代码的图像：

![在此处输入图像描述](../Images/956eadbf705d4e0518cd18d96a83691d.png)

脚本 1：

```
<script>
    $(document).ready(function() {
        // if there are more than 4 posts, hide all after 4 and show the 'show more' link
        if($('a').length >= 4) {
            $('a').slice(4).hide();
            $("#showMore").show();

            // below display's 'show more' link. when clicked displays hidden comments and hides 'show more' link
            $("#showMore").click(function() {
                $('a').slice(4).show();
                $("#showMore").hide();
            });
        }
    });
</script>

<a>test </a><br>
<a>fed </a><br>
<a>fdes </a><br>
<a>grr </a><br>
<a>rerf </a><br>
<a style="display: none">dferf</a><br>
<a style="display: none">dferf</a><br>
<a style="display: none">dferf</a><br>
<a style="display: none">dferf</a><br>
<a style="display: none">dferf</a><br>
<a style="display: none">dferf</a><br>
<a style="display: none">dferf</a><br>
<a style="display: none">dferf</a><br>

<span id="showMore" href="javascript:void(0)" style="display: none">Show More</span> 
```

脚本 2：

```
<p id="example">This is an example of text that will be shown and hidden.</p>

<input type="button" value="Hide" onclick="$('#example').hide()" />
<input type="button" value="Show" onclick="$('#example').show()" /> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T03:51:11.927

你可以使用[`gt`](http://api.jquery.com/gt-selector/)选择器：

> 选择匹配集中索引大于索引处的所有元素。

```
$('a:gt(4)').hide(); 
```

而不是`<br/>`增加额外空间的标签，您可以使用`display: block`锚标签：

```
a {
   display: block
} 
```

# visual-studio-2010 - 位图转换为 3.0？

> ID：11255821
> 
> 赞同：1
> 
> 时间：2012-06-29T03:48:59.733
> 
> 标签：visual-studio-2010, bitmap

只是一个使用 MS Visual Studio 2010 的快速问题，我收到此错误

```
error RC2170: bitmap file C:\Users\Doug\Desktop\paperbowser.bmp is not in 3.00 format 
```

我怎样才能把这个位图变成 3.0 格式

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-10T10:12:05.523

[http://www.coolutils.com/online/image-converter/](http://www.coolutils.com/online/image-converter/)

只需转到上面的链接并将您的图像文件转换为 .bmp 文件。

# python - 在eclipse中用python创建一个.app？

> ID：11255824
> 
> 赞同：0
> 
> 时间：2012-06-29T03:49:53.590
> 
> 标签：python, eclipse, macos, .app

嘿，我只是想知道是否可以在 Eclipse Classic 中使用 python 创建可执行文件（mac）？如果没有，那么如何使用我的 python 代码创建可执行文件？我不能使用 py2app，因为它不适用于 Pygame。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T17:20:49.197

尝试使用[pyinstaller](http://pyinstaller.org)。它应该能够为 Windows、Linux 和 Mac 创建可执行文件。它确实支持 pygame（我已经成功地使用它构建了几个使用 pygame 的程序，尽管只在 Windows 和 Linux 中），但您可能需要先应用此[错误修复](http://www.pyinstaller.org/ticket/406)，具体取决于最新下载是否已修复此问题.

我相信它独立于 Eclipse 运行。

# javascript - 如何推迟解析（也称为动态加载）tinyMCE wysiwyg 文本编辑器 javascript 文件？

> ID：11255827
> 
> 赞同：2
> 
> 时间：2012-06-29T03:50:09.080
> 
> 标签：javascript, ajax, jquery, tinymce

我知道如何[推迟 javascript 文件的解析](https://developers.google.com/speed/docs/best-practices/mobile#DeferParsingJS)。这很容易。

在初始 javascript 文件之后处理 tinyMCE 调用的各种其他文件并不那么容易。主要是因为 tinyMCE 默默地失败了，我怀疑。

如果我通过常规的 html 脚本标签加载文件，它工作正常。但如果我尝试做这样的事情：

```
var my_local_tinymce_js_file = "http://domain.com/inc/tinymce/jscripts/tiny_mce/tiny_mce.js";

$.when($.getScript(var my_local_tinymce_js_file)).
done(function(script, textStatus) {

    alert("download of tiny_mce succeeded!");
    setTimeout("setup_tinymce();", 7500);

})
.fail() {

    alert("download of tiny_mce failed!");

}); 
```

我总是可以看到文本警报“tiny_mce 的下载成功！”，我也可以在警报框中打印出脚本变量，以证明**它确实下载了脚本。**

我什至在未来调用 setup_tinymce 7.5 秒，以允许加载所有其他 javascript 和 css 文件（我不相信它们正在加载）。

setup_tinymce 函数如下所示：

```
function setup_tinymce() {

            tinyMCE.baseURL = 'http://domain.com/inc/tinymce/jscripts/tiny_mce/';
            tinyMCE.init({
                mode : "textareas", 
                theme : "advanced", 
                schema: "html5", 
                plugins : "emotions,spellchecker,advhr,insertdatetime,preview", 
                theme_advanced_buttons1 : "bold,italic,underline,|,forecolor,backcolor,|,justifyleft,justifycenter,justifyright,|,fontselect,fontsizeselect", 
                theme_advanced_buttons2 : "bullist,numlist,|,outdent,indent,|,undo,redo,|,link,unlink,|,image,|,advhr,|,removeformat", 
                theme_advanced_buttons3 : "", 
                theme_advanced_toolbar_location : "top", 
                theme_advanced_toolbar_align : "left", 
                theme_advanced_resizing : true
            });
            tinyMCE.execCommand('mceAddControl', false, 'comment_text');

} 
```

这就是我尝试动态加载文件的原因... [https://developers.google.com/speed/pagespeed/insights#url=http_3A_2F_2Fwww.tinymce.com_2Ftryit_2Ffull.php&mobile=false&rule=DeferParsingJavaScript](https://developers.google.com/speed/pagespeed/insights#url=http_3A_2F_2Fwww.tinymce.com_2Ftryit_2Ffull.php&mobile=false&rule=DeferParsingJavaScript)

它相当大，如果我可以动态加载它，会大大加快我的页面渲染速度。

**编辑：**我什至尝试过一些像这样的 jQuery 代码：

```
$.when(
        $.getScript("http://domain.com/inc/tinymce/jscripts/tiny_mce/tiny_mce.js"),
        $.getScript("http://domain.com/inc/tinymce/jscripts/tiny_mce/langs/en.js"),
        $.getScript("http://domain.com/inc/tinymce/jscripts/tiny_mce/plugins/emotions/editor_plugin.js"),
        $.getScript("http://domain.com/inc/tinymce/jscripts/tiny_mce/themes/advanced/editor_template.js"),
        $.getScript("http://domain.com/inc/tinymce/jscripts/tiny_mce/plugins/spellchecker/editor_plugin.js"),
        $.getScript("http://domain.com/inc/tinymce/jscripts/tiny_mce/plugins/advhr/editor_plugin.js"),
        $.getScript("http://domain.com/inc/tinymce/jscripts/tiny_mce/plugins/insertdatetime/editor_plugin.js"),
        $.getScript("http://domain.com/inc/tinymce/jscripts/tiny_mce/plugins/preview/editor_plugin.js"),
        $.getScript("http://domain.com/inc/tinymce/jscripts/tiny_mce/themes/advanced/langs/en.js")
    ).then(

        $(function() {

            //initialize tinyMCE here

        })

    ); 
```

没有运气。该脚本加载所有适当的 JavaScript 文件（当我从 head 标签加载脚本时加载），然后初始化 tinymce 但不起作用。没有错误被抛出。

以下是一些在 tinymce 论坛上提到动态加载的旧论坛帖子...所有这些帖子都包含一些旧代码，但没有完整的示例：S

[http://www.tinymce.com/forum/viewtopic.php?id=23286](http://www.tinymce.com/forum/viewtopic.php?id=23286)

[http://www.tinymce.com/forum/viewtopic.php?id=2290](http://www.tinymce.com/forum/viewtopic.php?id=2290)

[http://www.tinymce.com/forum/viewtopic.php?id=17467](http://www.tinymce.com/forum/viewtopic.php?id=17467)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T06:01:18.970

像这样加载 tinymce 可能是不可能的，因为浏览器不知道如何获取所有其他需要的 tinymce 文件（如果你找到解决方案（我认为你不会）让我知道 - 这对我很感兴趣） .

如果您的目标是使用 tinymce 加速您的页面，您也可以使用 tinymce 压缩器（请参阅开发人员下载）。这最初最多可以节省 1-2 秒。

# mysql - 当我的 MySQL 字段也有小时/分钟/秒时，有什么方法可以用 Django.models 按日期“分组”？

> ID：11255833
> 
> 赞同：1
> 
> 时间：2012-06-29T03:50:42.350
> 
> 标签：mysql, django, or-mapper

我想使用 Django.models 查询 MySQL，但是由于我将我的`created_at`（日期时间字段）与`datetime.datetime.now()`，似乎很难对每个日期进行“分组”。我做了这样的查询：

```
start = time.strptime("2012/6/25","%Y/%m/%d")
end = time.strptime("2012/6/26","%Y/%m/%d")
unix_start= time.mktime(start)
unix_end = time.mktime(end) 
```

`Mymodels.objects.filter(created_at__range[datetime.datetime.fromtimestamp(unix_start),datetime.datetime.fromtimestamp(unix_end]).values("~~~~~").annotate(player_id=Coun`t("player_id"))

但我猜这个查询对于网络来说太重了。当我的 MySQL 数据是 datetime.datetime.now() 时，有什么方法可以按 datetime.date “分组”或在 Django.models 中使用 (date() for MySQL)？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T08:45:11.063

`date_trunc()`当日期保存为日期时间时，我使用 PostgreSQL按日期对值进行分组。我认为你可以在 MySQL 中使用这样的东西：

```
select_date = {"date": """DATE_FORMAT(start, '%Y-%m-%d')"""}
query = query.extra(select=select_date).values('date')
query = query.annotate(player_id=Count('player_id', distinct=True)).order_by('date') 
```

# c# - 显式定义时接口属性失败

> ID：11255835
> 
> 赞同：1
> 
> 时间：2012-06-29T03:51:09.633
> 
> 标签：c#, properties, explicit-interface

我正在学习接口属性并遇到了一些我认为应该基于 MSDN 和书籍示例工作的东西，但事实并非如此。如果我显式实现接口属性，则当我的类实例尝试访问时它不会被识别，但如果我隐式执行它则可以正常工作（不确定这是否是正确的术语）。

```
interface IMyInterface
  {
    string Name { get; set; }       
  }

class MyClass : IMyInterface
{
    private string name;

    string IMyInterface.Name  //works if not explicit: i.e., public string Name
    {
        get { return this.name; }
        set { this.name = value; }
    }
}

class Program
{
    static void Main(string[] args)
    {
        MyClass myClass = new MyClass();
        myClass.Name = "blah";  // fails

    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-29T03:55:12.300

这就是它应该如何与[显式接口实现](http://msdn.microsoft.com/en-us/library/aa288461%28v=vs.71%29.aspx)一起工作：

> 实现接口的类可以显式地实现该接口的成员。当显式实现成员时，不能通过类实例访问它，而只能通过接口的实例访问。

因此，如果您像这样重新编写代码，它应该不再失败：

```
static void Main(string[] args)
{
    IMyInterface myClass = new MyClass();
    myClass.Name = "blah";  // no longer fails
} 
```

# javascript - 获取指定元素中的图像

> ID：11255843
> 
> 赞同：1
> 
> 时间：2012-06-29T03:52:33.930
> 
> 标签：javascript, dom

`document.images``<img>`包含HTML 文件中所有标签的完整列表。

我可以只获取`img`放置在指定元素中的标签吗？（例如哪一个有`images_list`类）像这样的东西：

`document.getElementById('images').images`

谢谢 ...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-29T03:59:29.080

`container`如果您的容器元素位于如下所示的变量中，那么您可以在纯 javascript 中执行此操作：

```
<div id="box">
    <img src="xxx">
    <img src="yyy">
</box>

var container = document.getElementById("box");
var imgs = container.getElementsByTagName("img"); 
```

在现代浏览器中，您可以使用内置的选择器功能：

```
var imgs = document.querySelectorAll("#box img"); 
```

如果使用 jQuery 库，您可以使用：

```
var imgs = $("#box img"); 
```

如果使用 Sizzle 选择器库（它是 jQuery 内部的选择器库或单独提供），您可以使用：

```
var imgs = Sizzle("#box img"); 
```

向我们展示您的 HTML，我们可以更具体地回答您的 HTML。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-29T03:59:21.637

如果您不使用 JQuery 或其他库并且可以使用 an`id`而不是类，您可以这样做：

```
​var cont = document.getElementById("image_list");
var img = cont.getElementsByTagName("img");
console.log(img);

​&lt;div id="image_list">
<img id="img1" src="" />
</div>​​​​​​​​​​​​​​​​​​​​​​​ 
```

但我建议使用 JQuery。您可以在上面使用一个类来执行此操作，但代码会更多。

有一种`getElementsByClassName`方法，但IE等浏览器不支持。[https://developer.mozilla.org/en/DOM/document.getElementsByClassName](https://developer.mozilla.org/en/DOM/document.getElementsByClassName)

这是一个演示，我也包含了一个 jquery 示例：http: [//jsfiddle.net/TJn7A/1/](http://jsfiddle.net/TJn7A/1/)

# c# - 在循环中计算经过的 Unix 时间

> ID：11255844
> 
> 赞同：0
> 
> 时间：2012-06-29T03:52:33.923
> 
> 标签：c#, vb.net, time, webrequest, elapsed

我正在执行这些 webrequests 循环，我需要跟踪自第一次请求以来经过的时间（unix 时间）。例如：

```
 Dim post1 String = "http://www.xxx.com/......" & UnixTimeNow1stCall & "......"
    Dim postReq1 As HttpWebRequest = DirectCast(WebRequest.Create(post1), HttpWebRequest)

    Dim post2 String = "http://www.xxx.com/......" & UnixTimeElasped1stCall& "......"
    Dim postReq2 As HttpWebRequest = DirectCast(WebRequest.Create(post2), HttpWebRequest)

    Dim post3 String = "http://www.xxx.com/......" & UnixTimeElasped1stCall& "......"
    Dim postReq3 As HttpWebRequest = DirectCast(WebRequest.Create(post3), HttpWebRequest)

*LOOP again* 
```

等等。换句话说，我需要在第一次调用中锁定当前的 Unix 时间，并且每当我稍后调用时（以 10 秒为间隔），我需要它来引用第一次调用。

使用它来计算当前的 Unix 时间：

> 公共函数 UnixNow() 只要
> 
> ```
>  Dim _TimeSpan As TimeSpan = (DateTime.UtcNow - New DateTime(1970, 1, 1, 0, 0, 0))
> 
>     Return CLng(_TimeSpan.TotalSeconds)
> 
> End Function 
> ```

每当我打电话给 UnixTime 时，都会给我当前时间，所以结果总是 0。有什么提示吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T05:18:02.160

当然 UnixNow 总是会给你当前时间...

存储它并计算差异

```
Dim unixTimeFirstRequest Long = UnixNow()
Dim post1 String = "http://www.xxx.com/......" & unixTimeFirstRequest & "......"
Dim postReq1 As HttpWebRequest = DirectCast(WebRequest.Create(post1), HttpWebRequest)

Dim post2 String = "http://www.xxx.com/......" & UnixNow() - unixTimeFirstRequest & "......"
Dim postReq2 As HttpWebRequest = DirectCast(WebRequest.Create(post2), HttpWebRequest)

Dim post3 String = "http://www.xxx.com/......" & UnixNow() - unixTimeFirstRequest & "......"
Dim postReq3 As HttpWebRequest = DirectCast(WebRequest.Create(post3), HttpWebRequest) 
```

# razor - Webmatrix 识别出错误的“}”

> ID：11255846
> 
> 赞同：1
> 
> 时间：2012-06-29T03:52:43.103
> 
> 标签：razor, webmatrix

我的页面包含以下代码：

```
@{
var db= Database.Open("Surgestuff");
var sqlQ = "SELECT * FROM Comments";
var data = db.Query(sqlQ);
Page.Title = "Add Comment"; 
}
@{
    var CommenterrorMessage = "";
    var LengtherrorMessage = "";
    var date = @DateTime.Now;
        if (IsPost) {
        var CommName = "";
        var Comment = "";
        CommName=Request["formName"];
        Comment=Request["formComm"];
        var Dt = @DateTime.Now;
        var isValid = true;
        if (Comment.IsEmpty()){
            CommenterrorMessage = "This field is required";
            isValid = false;
        }

        else if (Comment.Length > 400){
            LengtherrorMessage = "Comment must be less than 400 characters";
            isValid = false;
        }

        else if (CommName.IsEmpty()){
            CommName = "Anonymous";
        }

        if (isValid){
        var SQLINSERT = "INSERT INTO Comments (Name, Comment, Dt) " + "VALUES (@0, @1, @2)";
        db.Execute(SQLINSERT, CommName, Comment, Dt);
        Response.Redirect("~/Comments");
        }

        else
        {
            <p class="message error">Please correct the errors and resubmit the form.</P> 
        }
    }
}
<fieldset><legend>Add Comment</legend>
<form action="" method="post" enctype="multipart/form-data">
  Name:
  <p><input type="text" id="Name" name="formName"/></p>
  Comment:
  <p><textarea cols="35" rows="5" id="Comment" name="formComm"/></textarea></p>
     @if(!CommenterrorMessage.IsEmpty()) {
        <label for="formComm" class="validation-error">
            @CommenterrorMessage
        </label>
    }
     @if(!LengtherrorMessage.IsEmpty()) {
        <label for="formComm" class="validation-error">
            @LengtherrorMessage
        </label>
    }

  <p><input type="submit" value="Add Comment" /></p>
</form>
</fieldset> 
```

当我尝试运行此页面时，它给了我错误：

' "2" 在代码块的开头无效。只有标识符、关键字、注释、“（”和“{”是有效的。'当我查看 webmatrix 中的文件工作区时，它会将第一个关闭的“}”识别为整个代码块的结尾，然后忽略其余部分，直到它得到到“@2”。在我升级到 webmatrix 2.0 之前，我的网站上有完全相同的代码。我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T14:46:26.700

我终于将您的代码复制/粘贴到 WebMatrix 中（在我的 Virtual Box 上）。`@DateTime.Now`您的 Razor`@{ ... }`代码中有 2秒。如果您将它们更改为：

```
... = DateTime.Now; 
```

它解决了这个问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T04:59:09.237

在 Razor 中，任何需要使用 @ 作为自身（不是 Razor 指示器）的地方，使用：`@@`。

所以试试：`@@0, @@1, @@2`。

资料来源：[http ://haacked.com/archive/2011/01/06/razor-syntax-quick-reference.aspx](http://haacked.com/archive/2011/01/06/razor-syntax-quick-reference.aspx)

# c - 指针定义的行为是按位算术吗？

> ID：11255848
> 
> 赞同：2
> 
> 时间：2012-06-29T03:52:55.297
> 
> 标签：c, pointers, undefined-behavior, null-pointer

我正在学习指针。鉴于此代码：

```
FILE* from = fopen("in.txt", "r");
FILE* to = fopen("out.txt", "w");
if (from == NULL || to == NULL)
{
    printf("failed to open files!\n");
    return;
} 
```

是否将`if`条件更改为此有效（已定义）行为？

```
FILE* from = fopen("in.txt", "r");
FILE* to = fopen("out.txt", "w");
if ((from | to) == NULL)
{
    printf("failed to open files!\n");
    return;
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-29T04:00:52.297

不。

首先，它不应该编译，至少在编译器符合标准的情况下是这样。`|`对于像and之类的按位运算符，指针不是有效的操作数`&`。

其次，即使您的编译器允许您将指针视为整数，您也会面临平台不兼容的风险；有些 C 实现完全不能互换。您可能会假设任何这样的实现也必然是一致的，但假设很少是安全的......

第三，即使假设 ORing 两个指针一起工作，并得到你可以比较的东西`NULL`，你已经改变了测试的意义：`(from|to)`只有`NULL`当*两者都* `fopen`失败时才会如此；如果其中只有一个成功，则结果将非零并且您的代码将失败。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-29T04:06:59.970

不。

根据标准，对于`T *x`和`T *y`在 C 中，表达式是没有意义的。`x|y`它不应该编译。从 n1256 §6.5.12 ¶2“按位包含 OR 运算符”：

> 每个操作数都应为整数类型。

**这意味着这** `x|y`是一个*错误，*故事结束。这同样适用于所有其他位运算符：`&` `|` `^` `~` `<<` `>>`都*只能*用于整数（请注意，“整数”包括字符和布尔值）。

但是，如果您想节省键入的工作量，在指针上使用*逻辑运算符是完全有效的。*

```
// x == NULL is exactly semantically equivalent to !x
// These two are exactly the same
if (x == NULL || y == NULL) ...
if (!x || !y) ...

// In a logical expression, x != NULL is exactly semantically equivalent to x
// These two are exactly the same
if (x != NULL && y != NULL) ...
if (x && y) ... 
```

您认为`x == NULL`更好还是`!x`更好取决于您。你最好能同时阅读这两种风格，因为这两种风格都很常见。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-29T05:12:14.707

永远不要尝试使用按位运算符和指针玩游戏。

如果您只是在寻找一种更简洁的方式来编写表达式，这是一种非常常见且惯用的方式：

```
 FILE* from = fopen("in.txt", "r");
    FILE* to = fopen("out.txt", "w");
    if (!from || !to) // note the use of the ! operator
    {
        printf("failed to open files!\n");
        return;
    }
    ...
} /* end of function */ 
```

`!`运算符是逻辑 NOT 运算符。由于空指针的值始终为 0，这是一个“假”值，该表达式的`!from`意思是“如果`from`是空指针，则为真，否则为假”。它读起来也很好：“如果不是来自，或者不是到，那么处理错误”

同样，人们编写代码喜欢`if (from)`检查指针是否为非 NULL。

PS 我知道很多人喜欢`FILE*`在声明指针时使用表达式，但我不喜欢这种形式，因为它是谎言。当您声明`FILE *from`这意味着“表达式`*from`具有类型`FILE`”。将`*`右边放在 the 之后是可行的，`FILE`但这使它看起来意味着“表达式`from`具有指向指针的类型`FILE`”。它没有，这里有一个例子：

```
FILE* from, to; 
```

`from`类型为“pointer-to- `FILE`”。什么类型`to`？为什么它很旧`FILE`，而不是任何类型的指针。如果您在一行上声明这些，您需要使用的表达式是：

```
FILE *from, *to; 
```

这意味着“表达式`*from`是 type `FILE`，而表达式`*to`是 type `FILE`”。它看起来像，一旦你习惯了。

你可以写这个，但它很恶心。

```
FILE* from, *to; 
```

呸！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-29T04:08:17.450

`from`并且`to`是指针，您不能对它们进行任何按位操作。但是，`<stdint.h>`提供`intptr_t`了整数类型并保证保存指针，因此首先将指针转换为它们是有效的。但是，这很难看，所以我会坚持使用更具可读性的版本。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-29T07:49:36.257

指针上不允许按位运算。

你应该避免这样的运动。

# parameters - 自解压 zip 带参数

> ID：11255850
> 
> 赞同：4
> 
> 时间：2012-06-29T03:53:19.063
> 
> 标签：parameters, installation, arguments, exe, self-extracting

我正在寻找一种工具，它可以让我创建一个可以接受参数的自解压可执行文件。这些参数稍后将传递给驻留在自解压 exe 包含的包中的批处理文件。

这是我希望逐步实现的目标：

用户类型：cmd>setup.exe arg1 arg2 arg3 arg4 arg5

预期行为：1) setup.exe 将其内容提取到某个文件夹 2) 然后它执行一个带有 arg1、arg2、...arg5 参数的批处理文件

有人知道这样的工具吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-29T04:06:03.647

不知道它是否有帮助，但[WinRAR](http://www.rarlab.com/download.htm)允许您创建自动 exe 提取文件，此外它还让您可以选择在提取后运行某些命令和/或在文本编辑器中显示许可证信息

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-09T02:51:18.973

我能够使用 WinRar 实现它。所以谢谢你的建议。用户可以指定提取文件后要启动的可执行文件。命令行参数保存在环境变量 %sfxcmd% 中。因此，如果您将该环境变量放在可执行文件旁边，则参数将被传递给它。这些参数稍后可能会在您的可执行文件中传递。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-01T06:36:09.840

使用 7zip 也可以做到这一点。我首先创建了一个 .7z 包，然后使用“[安装程序的 SFX 模块](http://www.bugaco.com/7zip/MANUAL/switches/sfx.htm)”将其转换为自解压 zip。这允许您在配置文件中指定提取后要启动的文件。如果您将参数传递给自解压 zip，它们将被传递给您指定的文件。这种方法的缺点是无法指定用于 zip 的图标。

[此问题](https://superuser.com/questions/42788/is-it-possible-to-execute-a-file-after-extraction-from-a-7-zip-self-extracting-a)提供了更多详细信息

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-04-09T20:01:59.757

使用 WinRar。可以使用 -sp 选项传递参数。

[http://www.winrar-tr.com/winrar/Help/ENG/html/HELPGUISFXCmd.htm](http://www.winrar-tr.com/winrar/Help/ENG/html/HELPGUISFXCmd.htm)

```
myexe.exe -spoptions 
```

“选项”将在可执行文件的设置字段中传递给程序。

# python - 跳转到 Python 中的代码小节？

> ID：11255856
> 
> 赞同：2
> 
> 时间：2012-06-29T03:54:00.677
> 
> 标签：python, goto

我知道每个人都讨厌问任何与 goto 相关的问题的人，但这是我的问题：我是编码的绝对初学者，所以我正在制作我 11 岁的兄弟提出的一些小练习程序。这是一个程序，您可以在其中选择一个项目，它会从一个帐户中取款。

```
#!/usr/bin/env python
Acc = 30
print("$1 products: Pepsi, Water, Coke, Sprite")
print("$2 products: Chips, Cookies, Skittles, Twix")
print("$3 products: Amp, Monster, Red Bull, Rockstar")
L1 = ('Pepsi', 'Water', 'Coke', 'Sprite')
L2 = ('Chips', 'Cookies', 'Skittles', 'Twix')
L3 = ('Amp', 'Monster', 'Red Bull', 'Rockstar')
sel = raw_input("Please enter a product: ")
if sel in L1:
    print("$1 has been removed from your account.")
    Acc = Acc-1
    print("You now have $") (Acc), ("left in your account")
if sel in L2:
    print("$2 has been removed from your account.")
    Acc = Acc-2
    print("You now have $") (Acc), ("left in your account")
if sel in L3:
    print("$3 has been removed from your account.")
    Acc = Acc-3
    print("You now have $"), (Acc), ("left in your account") 
```

我希望能够从 If 语句的末尾跳转到用户输入部分之前的点。有没有办法在 Python 中做到这一点？提前致谢。（：

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-29T04:01:46.790

您应该做的是将您的语句嵌入到`while`循环中，并在给出特殊值（或不接受）时退出。另外，如果你拿的物品只能在1个列表中，你应该`elif`声明，所以当找到一个真值时，它就会退出。

```
#!/usr/bin/env python
Acc = 30
print("$1 products: Pepsi, Water, Coke, Sprite")
print("$2 products: Chips, Cookies, Skittles, Twix")
print("$3 products: Amp, Monster, Red Bull, Rockstar")
L1 = ('Pepsi', 'Water', 'Coke', 'Sprite')
L2 = ('Chips', 'Cookies', 'Skittles', 'Twix')
L3 = ('Amp', 'Monster', 'Red Bull', 'Rockstar')
while True:
    sel = raw_input("Please enter a product: ")
    if sel in L1:
        print("$1 has been removed from your account.")
        Acc = Acc-1
        print("You now have $") (Acc), ("left in your account")
    elif sel in L2:
        print("$2 has been removed from your account.")
        Acc = Acc-2
        print("You now have $") (Acc), ("left in your account")
    elif sel in L3:
        print("$3 has been removed from your account.")
        Acc = Acc-3
        print("You now have $"), (Acc), ("left in your account")
    elif sel == "exit":
        break 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-29T03:59:41.273

您想要实现的通常是通过在接受用户输入的行之后围绕所有内容的循环来实现的。像这样的东西：

```
#!/usr/bin/env python
Acc = 30
print("$1 products: Pepsi, Water, Coke, Sprite")
print("$2 products: Chips, Cookies, Skittles, Twix")
print("$3 products: Amp, Monster, Red Bull, Rockstar")
L1 = ('Pepsi', 'Water', 'Coke', 'Sprite')
L2 = ('Chips', 'Cookies', 'Skittles', 'Twix')
L3 = ('Amp', 'Monster', 'Red Bull', 'Rockstar')
while True:
    sel = raw_input("Please enter a product: ")
    if sel == 'exit':
        break
    if sel in L1:
        print("$1 has been removed from your account.")
        Acc = Acc-1
        print("You now have $") (Acc), ("left in your account")
    if sel in L2:
        print("$2 has been removed from your account.")
        Acc = Acc-2
        print("You now have $") (Acc), ("left in your account")
    if sel in L3:
        print("$3 has been removed from your account.")
        Acc = Acc-3
        print("You now have $"), (Acc), ("left in your account") 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-29T04:17:05.557

您可以使用此技巧保存两次键入所有项目

```
L1 = ('Pepsi', 'Water', 'Coke', 'Sprite')
L2 = ('Chips', 'Cookies', 'Skittles', 'Twix')
L3 = ('Amp', 'Monster', 'Red Bull', 'Rockstar')
print("$1 products:", ", ".join(L1))
print("$2 products:", ", ".join(L2))
print("$3 products:", ", ".join(L3)) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-29T03:59:25.443

您通常会为此使用循环：

```
foo = 42
# … other setup …
while True:
    sel = raw_input(…)
    if sel == "foo":
        do_stuff()
    # … etc … 
```

# iphone - 持久化 NSCache 的内容

> ID：11255857
> 
> 赞同：2
> 
> 时间：2012-06-29T03:54:28.200
> 
> 标签：iphone, objective-c, nscache

我正在使用 NSCache 来存储 webData。

```
 webData=[[NSData alloc]initWithContentsOfURL:[NSURL URLWithString:urlString]];
[cache setObject:webData forKey:urlString]; 
```

只有当我的应用程序运行时缓存才会存在。尽管应用程序已退出，但我想保留缓存的内容。将内容写入磁盘是一种方法。还有其他方法吗？如果不是，将缓存写入磁盘的有效方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T04:47:57.077

像 CoreData 一样使用**CoreData**是具有清除和修剪功能的对象图的持久性。

参考[这个](http://www.raywenderlich.com/934/core-data-on-ios-5-tutorial-getting-started)教程

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-21T11:15:31.840

您可以选择[TMCache](https://github.com/tumblr/TMCache)，因为它具有持久化的能力。

# mysql - 按时间戳之间的间隔对时间戳进行分组，然后从 MySQL 组中计算

> ID：11255858
> 
> 赞同：3
> 
> 时间：2012-06-29T03:54:34.157
> 
> 标签：mysql, timestamp

为了把这个问题放到上下文中，我试图根据事件日志计算“应用程序中的时间”。

假设下表：

```
user_id   event_time
2         2012-05-09 07:03:38
3         2012-05-09 07:03:42
4         2012-05-09 07:03:43
2         2012-05-09 07:03:44
2         2012-05-09 07:03:45
4         2012-05-09 07:03:52
2         2012-05-09 07:06:30 
```

我想`event_time`从彼此相距 2 分钟内（并按用户分组）的一组时间戳中获得最高和最低之间的差异。如果时间戳超出该集合的 2 分钟间隔，则应将其视为另一个集合的一部分。

期望的输出：

```
user_id  seconds_interval
2        7     (because 07:03:45 - 07:03:38 is 7 seconds)
3        0     (because 07:03:42)
4        9     (because 07:03:52 - 2012-05-09 07:03:43)
2        0     (because 07:06:30 is outside 2 min interval of 1st user_id=2 set) 
```

这是我尝试过的，虽然我不能分组`seconds_interval`（即使我可以，我不确定这是正确的方向）：

```
SELECT (max(tr.event_time)-min(tr.event_time)) as seconds_interval
FROM some_table tr
INNER JOIN TrackingRaw tr2 ON (tr.event_time BETWEEN 
   tr2.event_time - INTERVAL 2 MINUTE AND tr2.event_time + INTERVAL 2 MINUTE) 
GROUP BY seconds_interval 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-29T08:46:45.520

我认为没有一种非常直接的方法可以查询现有表以生成所需的数据。但是，您可以维护第二个用户会话表（当然，这样做的缺点是，如果您以后想要使用不同会话超时期限的报告，则需要从头开始重新填充该表）：

```
CREATE TABLE Sessions (
  user_id INT,
  session_start TIMESTAMP,
  session_end   TIMESTAMP,
  PRIMARY KEY (user_id, session_start),
  FOREIGN KEY (user_id, session_start) REFERENCES TrackingRaw(user_id, event_time),
  FOREIGN KEY (user_id, session_end  ) REFERENCES TrackingRaw(user_id, event_time)
); 
```

您可以使用以下触发器自动填充/更新此类表`INSERT ... SELECT ... ON DUPLICATE KEY UPDATE`：

```
CREATE TRIGGER after_insert_TrackingRaw AFTER INSERT ON TrackingRaw FOR EACH ROW
  INSERT INTO Sessions (user_id, session_start, session_end)
    SELECT NEW.user_id,
           IFNULL(MAX(session_start), NEW.event_time),
           NEW.event_time
    FROM   Sessions
    WHERE  user_id = NEW.user_id
       AND session_end >= NEW.event_time - INTERVAL 2 MINUTE
  ON DUPLICATE KEY UPDATE
    session_start = session_start,
    session_end   = NEW.event_time; 
```

然后，获取您想要的查询结果：

```
SELECT user_id, session_end - session_start AS seconds_interval FROM Sessions; 
```

在[sqlfiddle](http://sqlfiddle.com/#!2/ad7f6/1/0)上查看。

* * *

**更新**

经过进一步思考，您当然可以在存储过程中构建这样的`Sessions`表：

```
CREATE PROCEDURE getSessions(IN secs INT) READS SQL DATA BEGIN
  DECLARE no_more_rows BOOLEAN;
  DECLARE cur CURSOR FOR
    SELECT user_id, event_time FROM TrackingRaw ORDER BY event_time ASC;
  DECLARE CONTINUE HANDLER FOR NOT FOUND SET no_more_rows = TRUE;

  DROP   TEMPORARY TABLE IF EXISTS Sessions;
  CREATE TEMPORARY TABLE Sessions (
    user_id INT,
    session_start TIMESTAMP,
    session_end   TIMESTAMP,
    PRIMARY KEY(user_id,session_start),
    FOREIGN KEY(user_id,session_start) REFERENCES TrackingRaw(user_id,event_time),
    FOREIGN KEY(user_id,session_end  ) REFERENCES TrackingRaw(user_id,event_time)
  );

  OPEN cur;
  the_loop: LOOP
    FETCH cur INTO @u, @t;
    IF no_more_rows THEN
      CLOSE cur;
      LEAVE the_loop;
    END IF;

    INSERT INTO Sessions
      SELECT @u, IFNULL(MAX(session_start), @t), @t
      FROM   Sessions
      WHERE  user_id = @u AND session_end >= @t - secs
    ON DUPLICATE KEY UPDATE
      session_start = session_start, session_end = @t
  END LOOP the_loop;

  DEALLOCATE PREPARE stmt;
  SELECT user_id, session_end - session_start AS seconds_interval FROM Sessions;
  DROP TEMPORARY TABLE Sessions;
END;; 
```

然后获得你的输出：

```
CALL getSessions(120); -- for a 2 minute (120 second) timeout 
```

# c++ - 释放/删除联合 malloc/C/C++ 中的新数组

> ID：11255869
> 
> 赞同：3
> 
> 时间：2012-06-29T03:57:25.210
> 
> 标签：c++, c, unions, strict-aliasing, type-punning

我正在工作并且正在考虑使用工会。我决定反对它，因为设计确实需要一个结构/类，但它最终导致了以下假设性问题：

假设你有一个像这个人为的例子这样的联合：

```
typedef union {
    char* array_c;
    float* array_f;
    int* array_i;
} my_array; 
```

. . . 然后你分配一个数组并尝试从其他地方删除它：

```
my_array arr;
arr.array_f = (float*)(malloc(10*sizeof(float)));
free(arr.array_i); 
```

我认为这会起作用，尽管它在技术上没有定义，因为 malloc 的实现方式。我还假设它在分配 array_c 时会起作用，尽管与 int 与 float 不同，数组的大小不太可能相同。

可以使用类似的 new 和 delete 重复测试。我猜这些也行得通。

我猜语言规范会讨厌我这样做，但我希望它会起作用。它让我想起了“即使它是数组而不是对象，也不要删除转换为 void* 的新指针”业务。

所以问题是：规范对这样做有什么看法？我*简单地*检查了一下，但找不到任何特别解决这种情况的东西。无论如何，这是多么不明智——从*功能*的角度来看（我意识到从清晰的角度来看这很糟糕）。

这纯粹是出于迂腐目的的好奇问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T04:01:56.257

你完全正确。它打破了规则：

> 当一个值存储在联合类型对象的成员中时，不对应于该成员但确实对应于其他成员的对象表示的字节采用未指定的值，但联合对象的值不应因此成为陷阱表示。
>     - ISO/IEC 标准 9899，第 6.2.6.1 节

然而，实现的方式通常是完成的，它会“意外地”正常工作。由于`free`需要 a `void *`，因此参数将转换为 a`void *`以传递给`free`。由于所有指针都位于同一地址，并且所有到 a 的转换`void *`都不涉及对其值的更改，因此传递给的最终值`free`将与传递正确的成员相同。

从理论上讲，如果您读取的成员与上次写入的成员不同，则实现可以跟踪最后访问的联合成员并破坏值（或使程序崩溃或执行其他任何操作）。但据我所知，没有实际的实现会做这样的事情。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-29T04:02:24.860

这是未定义的行为，因为您访问的成员与您设置的成员不同。它可以做任何事情。

在实践中，这通常会起作用，但您不能依赖它。编译器和工具链并非故意作恶，但在某些情况下，优化与未定义的行为交互会产生完全出乎意料的结果。当然，如果您曾经使用过具有不同 malloc 实现的系统，它可能会崩溃。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-06-29T05:29:50.927

它与 malloc() 实现无关。您示例中的联合使用相同的内存位置来存储三个“不同”指针之一。但是，所有指针，无论它们指向什么，都是相同的大小 - 这是您所在架构的本机整数大小 - 在 32 位系统上为 32 位，在 64 位系统上为 64 位等。这是因为指针是内存中的地址，可以用整数表示。

假设您的 arr 位于地址 0x10000（指向您的指针的指针，如果您愿意的话）。假设 malloc() 在 0x666660 处为您找到一个内存位置。您将 arr.array_f 分配给该值 - 这意味着您将指针 0x666660 存储在位置 0x10000 中。然后将浮点数写入 0x666660 到 0x666688。

现在，您尝试访问 arr.array_i。因为您使用的是联合，所以 arr.array_i 的地址与 arr.array_f 和 arr.array_c 的地址相同。所以你再次从地址 0x10000 读取 - 你读出了指针 0x666660。由于这与之前返回的 malloc 指针相同，因此您可以继续释放它。

也就是说，试图将整数解释为文本，或将浮点数解释为整数等，显然会导致破产。如果 arr.array_i[0] == 1，那么 arr.array_f[0] 肯定不会 == 1，并且 arr.array_c[0] 与字符 '1' 无关。您可以尝试以这种方式“查看”内存作为练习（循环和 printf()） - 但您将一事无成。

# jquery - 使用jquery悬停a标签时如何触发点击？

> ID：11255875
> 
> 赞同：-2
> 
> 时间：2012-06-29T03:58:04.550
> 
> 标签：jquery

这是我的代码，但它不能工作

```
$(document).ready(function(){
    $(".nav").hover(function(){
        $(this).click();
        return false;
    });
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T04:08:22.030

或者你可以尝试`trigger()`方法：

```
$(document).ready(function(){
    $(".nav").mouseenter(function(){
        $(this).trigger('click');
    });
}); 
```

# vim - Vim swp 文件干扰存储库 vimdiff

> ID：11255877
> 
> 赞同：3
> 
> 时间：2012-06-29T03:58:16.210
> 
> 标签：vim, macvim, vimdiff

我的设置是使用 vim（特别是图形模式下的 MacVim）来编辑源文件，然后我使用 vimdiff（再次在图形模式下）进行（mercurial）存储库差异。有时，当我做 diff 时，vim 会给我错误：

> 交换文件“~/nn/src/imm/model/injector_node/.values_table.py.swp”已经存在！

我该如何解决？我可以命令 vim 停止制作 swp 文件，或者 vimdiff 忽略它们，或者将其 swp 文件写入不同的地方吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-29T04:10:08.573

是的，（也许），是的。

要关闭交换文件：

```
set nobackup
set nowritebackup
set noswapfile 
```

要更改交换文件的位置（我的首选）：

```
" Set the directory of the swap file
" The // indicates that the swap name should be globally unique
set directory=~/.vim/tmp//,/tmp 
```

这里我将它设置`tmp`在`.vim`. 请参阅`:h 'directory'`以了解选项的每个部分代表什么。

至于让 Vimdiff 忽略交换文件，我不太确定。但错误可能正在发生，因为当您使用 Mercurial 检查差异时，您已经在 MacVim 中打开了相同的文件。如果您只是在执行差异之前关闭文件，那么您应该没问题。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-29T17:44:05.280

我会建议一种不同的方法：不要使用 mercurial 命令行界面来查看文件之间的差异，而是使用添加 VCS 支持的 vim 插件之一，在这种情况下，您不需要关闭任何东西，也不需要对交换文件做任何事情。

例如，使用我的[aurum](https://bitbucket.org/ZyX_I/aurum)，您可以使用`<leader>aD`(mapped to `:AuVimDiff`) 查看当前打开的缓冲区与其在存储库中的版本之间的差异，然后`<Leader>X`切换回正常视图（如果您没有编辑任何内容，它甚至会恢复打开/关闭的折叠）。如果您这样做`let g:aurum_vimdiffusewin=1`并使用垂直或水平（取决于“diffopt”）同样大小的分割，那么我的脚本将重用相邻窗口之一。

您可以在`<leader>agD`vimdiff 拆分的多个选项卡中查看对存储库中所有文件的所有更改（不包括添加和删除的文件）：它映射到`:AuVimDiff full`. 据我所知，这个功能几乎是独一无二的：有一些用于 mercurial 的脚本可以完成相同的工作，但它没有与其他 VCS 插件集成。再次，`<leader>X`关闭所有选项卡。已经打开的缓冲区不会关闭，其他缓冲区会。

我可能推荐的另一个插件是[VCSCommand](http://www.vim.org/scripts/script.php?script_id=90)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-09-02T09:45:17.680

我知道这个问题现在已经有一年多了，但我可以推荐[lawrencium](https://bitbucket.org/ludovicchabant/vim-lawrencium/overview)，一个将 mercurial 集成到 vim 的插件，灵感来自 git 的梦幻般的[逃犯](https://github.com/tpope/vim-fugitive)插件。只需几个简单的命令，它们就可以使您正在做的事情（以及许多其他 CVS 事情）变得更加容易。他们没有付钱让我这么说；插件真的很好！

# java - PC 配置正确，但 .jar 文件仍然无法运行

> ID：11255881
> 
> 赞同：0
> 
> 时间：2012-06-29T03:58:38.063
> 
> 标签：java, windows, executable-jar

当我使用 BlueJ 制作 .jar 文件时，它在我的两台 PC（笔记本电脑）上运行良好——一台运行 Windows Vista，另一台运行 Windows 7——但在另一台运行 Windows XP 的 PC 上却不行。这第三台 PC 确实具有正确的文件关联和 JRE。不显示错误，播放紧急停止声音但没有其他活动。

这里真正的问题是，为什么独立的 JRE 可以在 Windows 7 中工作，但不能在 Windows XP 中工作？

我如何确保我为其编写程序的人可以运行 jar 文件而无需安装 JDK？对于我的 Windows 7 电脑来说，JRE 就足够了，为什么情况并非总是如此？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T06:46:50.410

如果安装了多个 jdk，则必须将其删除。然后安装最新版本的 jdk。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T02:23:01.653

一个独立的 JRE 允许通过双击 Windows 7 而不是 Windows XP 来执行 jar 文件。基于此，一些 JRE 在不同的 O/S 上的表现与其他 JRE 不同。

# selenium - 在 Selenium IDE 中打开新窗口后保持焦点

> ID：11255895
> 
> 赞同：1
> 
> 时间：2012-06-29T04:00:40.943
> 
> 标签：selenium, focus, selenium-ide

在 IDE 中使用 openWindow 命令后，我无法保持焦点。此问题仅适用于同一测试套件中的第二个测试用例尝试与新打开的窗口进行交互时。例如，我有一个由单独的测试用例组成的测试套件来执行以下操作：

1.  登录站点 A
2.  输入一些交易数据
3.  提交交易以供批准
4.  打开一个新窗口并登录到站点 B
5.  批准站点 B 中的交易并关闭窗口
6.  继续处理站点 A 中的事务

如果我在与“openWindow”相同的测试用例中执行测试用例 5“站点 B”操作（即合并测试用例 4 和 5），则所有命令都会执行而不会出错。如果我在不同的测试用例中执行相同的操作，那么新窗口将失去焦点，所有 Selenium 命令都将被定向回原始窗口。

有趣的部分是尝试在步骤 5 中识别并重新选择“新”窗口。

在测试用例 5 中执行“selectWindow name=siteB_URL”会导致错误消息“窗口不存在。如果这看起来像 Selenium 错误...”。

然后我想我会调用 storeAllWindowNames 并回显结果，以至少查看 Selenium 在各个点知道的窗口名称。如果我在测试用例 4 中作为最后两个命令执行此操作，我会得到预期的结果 - 记录“echo ,siteB_URL”。如果我在测试用例 5 中做与前两行相同的事情，我会得到“echo”。这是让我感到兴奋的部分 - 简单地更改测试用例似乎失去了对新窗口的引用。

有没有人在 Selenium IDE 中提出解决此问题的解决方法或解决方案？

今天早上我花了几个小时在网上和各种论坛上寻找建议，但无济于事。

提前致谢，

格伦

4-7-12 - 更新 - 这是上述场景的简化示例：

```
[info] Executing: |openWindow | http://www.google.com.au | google2 |
[info] Executing: |selectWindow | google2 | |
[info] Executing: |storeAllWindowNames | allWindows | |
[info] Executing: |echo | ${allWindows} | |
[info] echo: ,google2
[info] Changed test case
[info] Executing: |storeAllWindowNames | allWindows | |
[info] Executing: |echo | ${allWindows} | |
[info] echo:
[info] Executing: |selectWindow | name=google2 | |
[error] Window does not exist. If this looks like a Selenium bug, make sure to read http://seleniumhq.org/docs/04_selenese_commands.html#alerts-popups-and-multiple-windows for potential workarounds. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T07:18:56.900

您是否使用以下命令检查过它？

```
selectFrame | relative=up
selectFrame | iframe name 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-08T13:21:13.180

尝试选项：

```
selectWindow() 
```

只需在`()`.

例如：窗口标题是测试，然后

```
command : selectWindow
title : Testing 
```

要知道新打开的窗口的标题，请按照以下步骤操作：

转到新窗口

右键->查看页面源码

按 ctrl+F。

输入标题并搜索。

您将获得新窗口的标题。

我希望这会有所帮助...谢谢 Sathiya

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-06-26T23:58:05.827

//在原始窗口上...

命令：存储窗口句柄

目标：myVar

//...做任何事情...

命令：选择窗口

目标：句柄=${myVar}

# r - 使用 Chrome 浏览器插件在 github 中支持 Mathjax？

> ID：11255900
> 
> 赞同：8
> 
> 时间：2012-06-29T04:01:02.970
> 
> 标签：r, github, mathjax

我希望 Mathjax 在我所有的 github 页面上工作（例如，在 github 上显示的 Markdown、问题跟踪器）。我有很多从 R Markdown 生成的文件，这些文件也有方程式。

虽然我希望 github 为 Mathjax 提供可选支持，但我认为更现实的目标是拥有一些浏览器插件，该插件可以检测到我在 github 页面上并自动运行 mathjax 脚本。

*   Chrome 浏览器是否有任何浏览器插件可以在指定的 URL（例如`http*github*`）上自动运行 MathJaX 脚本？

### 最初的想法

关于 MathOverflow有相当[长的讨论](https://mathoverflow.net/questions/22141/how-do-i-see-latex-math-on-any-web-page-and-in-email)。但是，讨论包括对一系列技术（不仅仅是 MathJax）的讨论，并且许多解决方案是特定于 Firefox 浏览器的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-01T17:36:13.680

这是一个 GreaseMonkey 脚本，它应该做你想做的事：[在 Github 中运行 MathJax](http://www.math.union.edu/locate/Cervone/transfer/mathjax/mathjax-in-github.user.js)。它应该适用于所有主要浏览器（尽管有些需要插件来运行 GreaseMonkey 脚本；有关详细信息，请参阅[此问题](https://math.meta.stackexchange.com/questions/4208/a-prototype-for-incremental-preview-updates)的安装说明）。

这个脚本只在包含 TeX 或 MathML 标记的页面上加载 MathJax（它对此做了一个非常简单的测试，当然可以做得更复杂）。请注意，默认分隔符`\(...\)`用于内联数学和`\[...\]`/或`$$...$$`显示数学。特别是，单美元不能用作数学分隔符（因为它们在普通的非数学文本中出现得太频繁了）。如果要启用单美元分隔符，则需要在加载 MathJax.js 本身之前编辑脚本以添加 MathJax 配置脚本。

该脚本设置为在`http://github.com/*`和上触发`https://github.com/*`。并非所有的 GreaseMonkey 实现都在 URL 的主机部分提供模式匹配，但如果你这样做，你可以使它更复杂，以便它也能获得 github 的子域。

希望这能满足您的需要。

**编辑**：脚本现在可以`$...$`按照提问者的要求进行内联数学。

# c# - 使用正则表达式确定字符串是否包含带有逗号分隔符的特定子字符串的重复序列，仅此而已

> ID：11255901
> 
> 赞同：0
> 
> 时间：2012-06-29T04:01:06.503
> 
> 标签：c#, regex, string

我想查找一个字符串是否包含已知子字符串的重复序列（带有逗号分隔符）而没有其他内容，如果是这种情况则返回 true；否则为假。例如：子字符串是“0,8”

字符串 A：“0,8,0,8,0,8,0,8”返回 true 字符串 B：“0,8,0,8,1,0,8,0”返回 false，因为 '1'

我尝试使用 C# 字符串函数 Contains，但它不符合我的要求。我对正则表达式完全陌生，但我觉得它应该足够强大来做到这一点。我应该使用什么正则表达式来做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-29T04:11:09.297

只包含重复数量的给定子字符串（可能为零，导致空字符串）的字符串的模式是`\A(?:substring goes here)*\z`. 匹配字符串的`\A`开头，字符串`\z`的结尾，并`(?:...)*`匹配与冒号和右括号之间的事物匹配的任何内容的 0 个或多个副本。

但是由于额外的逗号，您的字符串实际上并不匹配`\A(?:0,8)*\z`；一个匹配的例子是“0,80,80,80,8”。您需要使用类似`\A0,8(?:,0,8)*\z`.

您可以在 C# 中构建这样的东西：

```
string OkSubstring = "0,8";
string aOk = "0,8,0,8,0,8,0,8";
string bOK = "0,8,0,8,1,0,8,0";

Regex OkRegex = new Regex( @"\A" + OkSubstring + "(?:," + OkSubstring + @")*\z" );
OkRegex.isMatch(aOK);  // True
OkRegex.isMatch(bOK);  // False 
```

对逗号分隔符进行硬编码；你可以让它更通用。或者，也许您只需要文字正则表达式。无论哪种方式，这都是您需要的模式。

**编辑**根据 Mike Samuel 的建议更改了锚点。

# java - Java/Android xml解析

> ID：11255904
> 
> 赞同：0
> 
> 时间：2012-06-29T04:01:28.453
> 
> 标签：java, android, xml-parsing

我正在尝试从 google api 解析数据：
[http ://gdata.youtube.com/feeds/base/videos?q=kittens&client=ytapi-youtube-search&v=2&start-index=1](http://gdata.youtube.com/feeds/base/videos?q=kittens&client=ytapi-youtube-search&v=2&start-index=1)

像这样

```
try {

        DocumentBuilder db = dbf.newDocumentBuilder();
        doc = db.parse(new InputSource(new StringReader(xml.trim())));

} catch (ParserConfigurationException e) {
            System.out.println("XML parse error: " + e.getMessage());
            return null;
} catch (SAXException e) {
            System.out.println("Wrong XML file structure: " + e.getMessage());
            return null;
} catch (IOException e) {
            System.out.println("I/O exeption: " + e.getMessage());
            return null;
} 
```

并不断收到“SAXException”..我做错了什么？

准确的错误消息是：I/System.out(19026): Wrong XML file structure: Unexpected token (position:TEXT null@1:104174 in java.io.StringReader@410c2448)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T16:58:03.777

我做了这个，它对我有用：

```
public static void readGDATA(){

      DocumentBuilderFactory dbf = DocumentBuilderFactory.newInstance();
      DocumentBuilder db = null;
      Document doc = null;

      try {

        db = dbf.newDocumentBuilder();
        doc = db.parse(new URL("http://gdata.youtube.com/feeds/base/videos?q=kittens&client=ytapi-youtube-search&v=2&start-index=1").openStream());
        System.out.println(doc.getElementsByTagName("name").getLength());

      } catch (ParserConfigurationException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (SAXException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } 

} 
```

控制台中的输出：

26

# java - 需要帮助存储/检索数据

> ID：11255914
> 
> 赞同：1
> 
> 时间：2012-06-29T04:02:49.000
> 
> 标签：java, data-structures

一个用户有一个数字的 ArrayList。这些数字对应于他们有权访问的应用程序。某些应用程序具有不同的权利编号（即 3、72 等）。我想要做的是将这些数据存储在地图中，这样当用户登录时，他们可以将他们的号码输入到地图中并快速获取他们有权使用的应用程序。但是，某些应用程序需要 2 到 3 个权利编号。例如，一个条目可以是：("101 and 234", "Application 1")。我想知道是否有一种理想的方法可以从地图中检索用户权利编号满足的所有值。

我目前如何拥有它，该程序将用户数据与每个应用程序进行比较并确认或拒绝访问。这似乎效率低下。任何帮助我们都非常感谢！

注意：我正在从 XML 中读取应用程序及其编号，因此我可以随意存储它们。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T04:08:16.437

如果每个应用程序需要大量数字，最好的方法是使用集合交集。如果数字是连续的或至少是密集的，您可以将其优化为一个位集。不过，对于一两个数字，我建议只单独测试每个数字，因为它可能比全套操作更快。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T04:12:26.783

解决方案：

*   为每个应用程序定义一个类（我们称之为`App`）。该类包含应用程序的名称和（排序的）权利列表/数组。
*   使用 Map 从 String 映射到`App`:`Map<String, App>`对于所有单一权利应用程序（您可以使用`HashMap`或`TreeMap`- 您的选择）。如果有多个应用程序只需要一个相同的权利，请考虑`Map<String, List<App>>`. 从地图中排除需要多个权利的应用程序，并将它们存储在单独的列表/数组中。
*   当您获得检索应用程序的权利列表时，遍历列表并获取`Map`将字符串映射到的所有内容。对于那些需要多个权利的人，只需单独检查（您可以通过对给定权利列表进行`App`排序并按排序顺序存储每个权利来加快检查速度 - 但由于大小很小，这甚至可能无关紧要）。

该解决方案降低了操作的时间复杂度。但是，在我看来，几百个应用程序乘以大约 10 的权利数量是非常小的，除非您多次调用。最好对您的原始方法和这种方法进行比较 - 因为开销可能会影响时间的任何改进。

进一步的改进（或没有）是：

*   使用`Map<String, List<App>>`甚至包括需要多个权利的应用程序（这些应用程序将被许多权利映射到）。
*   当我们搜索应用程序时，我们将使用 a`Map<App, Integer>`来跟踪我们为多个授权应用程序确认的授权数量。所以流程会是这样的：

    ```
    new mapAppInteger
    foreach entitlement in inputListOfEntitlement
        listOfApps = mapStringAppList.get(entitlement)

        if listOfApps found
            for each app in listOfApps
                if app needs singleEntitlement
                    put app in output list
                else // needs multiple
                    if app is in mapAppInteger
                        map app --> count + 1
                        if mapAppInteger.get(app) == app.numberOfRequiredEntitlement
                            put app in output list
                            remove app from mapAppInteger
                    else // not in mapAppInteger
                        map app --> 1 
    ```

# sql - 我如何订购最终具有某些值等于零的结果，而其他结果正在上升？

> ID：11255915
> 
> 赞同：1
> 
> 时间：2012-06-29T04:03:09.070
> 
> 标签：sql

让我解释一下：我需要按升序对列表进行排序，而结果最后小于零。

例子：

```
**Field**  
2  
5  
15  
19  
0  
-5  
-19 
```

我**想**我可以使用 UNION 加入两个查询的结果，但我只想使用一个，这可能吗？

任何告诉如何以这种方式订购的答案将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-29T04:10:31.763

在正常查询结束时使用以下 ORDER BY（无联合）

```
order by (case when field>0 then 0 else 1 end), field 
```

或者，如果您的数据库系统的 SQL 风格支持将布尔值隐式转换为整数：

```
order by (field <= 0), field 
```

# php - Google 自定义搜索初始值

> ID：11255917
> 
> 赞同：0
> 
> 时间：2012-06-29T04:03:52.410
> 
> 标签：php, javascript, html

我创建了一个谷歌搜索功能，但是我想将文本字段留空而不是这个外观：-

![在此处输入图像描述](../Images/293d3b393dc8c9c3bfa0074356197c73.png)

有可能的？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T04:09:26.810

假设您使用的是 stock 自定义搜索嵌入代码，请将以下内容添加到您的 CSS：

```
form#cse-search-box div input {
    background-image: none !important;
} 
```

# javascript - 能够获取 JSON 数据，但未显示在 Handlebars 模板中

> ID：11255918
> 
> 赞同：0
> 
> 时间：2012-06-29T04:04:00.593
> 
> 标签：javascript, api, handlebars.js

我的页面中有以下内容，准备好：

```
<div id="result"></div>
<script id="some-template" type="text/x-handlebars-template">
  <table>
    <thead>
      <th>Name</th>
    </thead>
    <tbody>
      {{#athletes}}
        <tr>
          <td>{{firstName}} {{lastName}}</td>
        </tr>
      {{/athletes}}
    </tbody>
  </table>
</script> 
```

和下面的 JavaScript 触发：

```
var source   = $("#some-template").html();
var template = Handlebars.compile(source);

var data = $.getJSON("http://api.espn.com/v1/sports/baseball/mlb/athletes?apikey=axfy7dvwqzktu28srdjna8ta", function() {
  alert('Load was performed.');          
});

$("#result").html(template(data)); 
```

我收到加载已执行的警报，我可以在 Firebug 中看到所有数据，但 #result div 不显示数据。

如果我用下面的纯文本替换 var 数据，它的所有功能都完全正确：

```
var data = { athletes: [
    {firstName: "Josh", lastName: "Hamilton"},
    {firstName: "Yu", lastName: "Darvish"},
    {firstName: "Ian", lastName: "Kinsler"}
  ] } 
```

“athletes”键位于 JSON 树中的几层（体育 -> 联赛 -> 运动员）。关于如何从 API 结果中提取这些数据，我有什么不明白的地方？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T04:10:35.683

您使用 $.getJSON 错误。它不返回数据，而是调用成功函数（我相信你正在提醒的地方）并将数据传递给它。将您的 html 人口移动到成功回调中。

这样做是因为默认情况下 AJAX 请求本质上是异步的

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T04:58:33.503

尝试这样的事情：

```
$.getJSON("http://api.espn.com/v1/sports/baseball/mlb/athletes?apikey=axfy7dvwqzktu28srdjna8ta", function(data) {
      alert('Load was performed.');
      $("#result").html(template(data.sports[0].leagues[0].athletes));          
}); 
```

另外，一个重要的旁注：你已经粘贴了你的 apikey。我想你想保密。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-12-11T21:06:22.503

如果由于某种原因您无法更改`$.get()`to `$.getJSON()`，则必须`JSON.parse(theData)`在成功回调中进行更改，否则模板将没有要呈现的数据。（现在很明显，但是当我遇到这种情况时花了我一点时间。）

# c# - C# 或 VB.NET 中图像上的可拖动文本或形状

> ID：11255922
> 
> 赞同：1
> 
> 时间：2012-06-29T04:04:41.997
> 
> 标签：c#, .net, vb.net, winforms

我正在尝试使用 C# 或 VB.NET 创建一个 Winforms 应用程序，这将允许我将文本或形状放在图片框内现有图像的顶部，并使用鼠标拖动该文本或形状。例如，如果我想在图像上放置一个 90X90 的正方形，我会在“宽度”文本框中输入 90，在“高度”文本框中输入 90，然后单击图像，它将绘制在现有图像的顶部。然后我可以通过将鼠标移动到我想要的位置来定位它。如果需要，可能还有其他步骤（例如单击“插入矩形”按钮启动该过程）。我尝试了一些想法，例如调用一个例程，将图片框重置为其原始图像并在引发“鼠标移动”事件时绘制形状，但这显然太慢了。这是否应该在图片框的绘画事件中完成，如果是这样，有人可以指出我如何做到这一点的正确方向吗？这是可能的，还是我过度简化了这个想法？

在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T12:29:36.530

下面是一个非常简单的示例，说明如何在父控件内绘制可拖动的矩形。

```
public class Draggable : PictureBox
{
    Rectangle shapeBounds;
    bool isDragging;
    Point dragPoint;

    public Draggable()
    {
        InitializeComponent();
        shapeBounds = new Rectangle(10, 10, 30, 30);
    }

    protected override void OnMouseDown(MouseEventArgs e)
    {
        base.OnMouseDown(e);
        if (shapeBounds.Contains(e.Location))
        {
            isDragging = true;
            dragPoint = new Point(
                e.Location.X - shapeBounds.Location.X,
                e.Location.Y - shapeBounds.Location.Y);
        }
    }

    protected override void OnMouseUp(MouseEventArgs e)
    {
        base.OnMouseUp(e);
        isDragging = false;
    }

    protected override void OnMouseMove(MouseEventArgs e)
    {
        base.OnMouseMove(e);
        if (isDragging)
        {
            Point p = new Point(
                e.Location.X - dragPoint.X,
                e.Location.Y - dragPoint.Y);
            shapeBounds = new Rectangle(p, shapeBounds.Size);
            Invalidate();
        }
    }

    protected override void OnPaint(PaintEventArgs e)
    {
        base.OnPaint(e);
        e.Graphics.FillRectangle(Brushes.Red, shapeBounds);
    }
} 
```

# glib - Glib GIOChannel

> ID：11255923
> 
> 赞同：0
> 
> 时间：2012-06-29T04:04:50.753
> 
> 标签：glib

我正在尝试使用 GIOChannel 的 glib 教程。我正在使用带有 glib-2.30.2 (gtk+-3.2.3) 和 C 代码的 Ubuntu 11.04 (Natty Narwhal)。

代码来自这里： http://library.developer.nokia.com/index.jsp?topic=/GUID-E35887BB-7E58-438C-AA27-97B2CDE7E069/ [GUID-817C43E8-9169-4750-818B-B431D138D71A.html](http://library.developer.nokia.com/index.jsp?topic=/GUID-E35887BB-7E58-438C-AA27-97B2CDE7E069/GUID-817C43E8-9169-4750-818B-B431D138D71A.html)

程序运行但我的源测试文件的内容没有复制到目标文件。我没有收到任何错误或警告消息。该程序什么也不做。这里有什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T17:46:18.947

现在工作，我改变了这一行：

```
g_print("usage:<cp SOURCE> <DESTINATION>\n"); 
```

至：

```
g_print("usage: %s <SOURCE> <DESTINATION>\n", argv[0]); 
```

然后使用以下方法编译它：

```
gcc -Wall $(pkg-config --cflags gio-2.0) -c io.c

gcc -Wall $(pkg-config --libs gio-20) -o io io.o 
```

使用以下命令运行程序：`./io io.c new_io.c`

# java - 使用 SwingWorker 在后台完成复杂的任务

> ID：11255925
> 
> 赞同：1
> 
> 时间：2012-06-29T04:05:01.683
> 
> 标签：java, swingworker

我有一个登录屏幕的 GUI。每当我按下登录按钮时，都会根据在线 mysql 数据库中的条目检查用户名和密码，我在登录按钮的 actionPerformed() 方法中从数据库中提取所有这些信息。问题是程序从数据库中获取数据时GUI 冻结。我用谷歌搜索了我的问题，发现我应该使用 SwingWorker，但作为一个新手，我不知道如何将 SwingWorker 用于我的目的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-29T04:20:59.377

首先，在你的类中声明一个成员变量（它可以在你的 GUI 类中），类型`SwingWorker`如下：

```
private SwingWorker<Boolean, Void> backgroundProcess; 
```

然后在初始化代码（构造函数、onShow 方法事件处理程序等）中初始化变量，如下所示：

```
 backgroundProcess = new SwingWorker<Boolean, Void>() {

        @Override
        protected Boolean doInBackground() throws Exception {
            // paste the MySQL code stuff here
        }

        @Override
        protected void done() {
            // Process ended, mark some ended flag here
            // or show result dialog, messageBox, etc      
        }
    }; 
```

然后，在您的`actionPerfomed`方法中，调用`SwingWorker`的执行方法：

```
 backgroundProcess.execute(); 
```

如果操作正确，GUI 不应在按钮按下事件后冻结

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T04:18:30.077

这个简单的[例子](https://stackoverflow.com/a/4530659/230513) `extends SwingWorker<Icon, Void>`来获取一个`Icon`带有`Void`中间结果的。同样，您的可能会扩展`SwingWorker<DataSource, Void>`到获取[`DataSource`](http://docs.oracle.com/javase/7/docs/api/javax/sql/DataSource.html).

# tfs - 如何在父子工作项之间创建规则

> ID：11255930
> 
> 赞同：3
> 
> 时间：2012-06-29T04:06:00.723
> 
> 标签：tfs

我们正在尝试对我们的项目施加一些规则，您能告诉我们是否可以这样做吗？如果是的话，我应该从哪里开始？

示例规则之一是

交付物不能与未关闭的子项一起关闭。

*   这意味着即使处于已解决状态，子项目也会阻止关闭可交付成果。
*   这应该仅适用于父子链接类型
*   这仅适用于可交付父母和任何类型的有效孩子

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-29T06:54:29.583

有两种方法可以做到这一点。

1.  服务器端：您可以向 tfs 添加一个插件，以更改工作项。一个很好的例子是[TFSAggregator](https://github.com/tfsaggregator/tfsaggregator)。它不会为您的特定问题提供解决方案，但我可以向您展示如何在服务器端更改工作项。添加您的案例应该不是什么大问题。此解决方案的问题在于，它仅在保存后才更改工作项。所以用户仍然可以关闭孩子，但服务器会重新打开它。

2.  客户端：第二种解决方案是自定义控件，可以在工作项的 WITD 中实现。它可以只是一个不可见的控件，增加了一些验证。[您可以在此处](http://witcustomcontrols.codeplex.com/)找到一些示例。这个解决方案的缺点？您必须在使用 Visual Studio 的每个客户端上安装自定义控件，并且您可能必须开发特定版本的 Web 访问。

# html - Internet Explorer 无法调整内联列表项宽度？

> ID：11255933
> 
> 赞同：1
> 
> 时间：2012-06-29T04:06:31.127
> 
> 标签：html, css, internet-explorer, internet-explorer-8, html-lists

我有一个无序列表，其列表项显示为内联。但是，它的布局相当复杂，所以让我向您展示 Fiddle：

*   全屏：http: [//jsfiddle.net/spryno724/F5CFD/embedded/result/](http://jsfiddle.net/spryno724/F5CFD/embedded/result/)
*   代码：http: [//jsfiddle.net/spryno724/F5CFD/](http://jsfiddle.net/spryno724/F5CFD/)

请注意无序列表项如何使用该属性拉伸到最高列表项的高度`display: table-cell`（第一个列表项除外）。这允许第一个列表项有一条垂直线延伸无序列表的整个高度，字母“A”垂直对齐顶部。

此演示文稿在大多数浏览器中运行良好，当然 Internet Explorer 8 ^([1])除外。以下是一些屏幕截图，以防您没有 IE8：

*   Chrome 中的出色渲染：[https ://picasaweb.google.com/lh/photo/oI6rWHT8iS_0nKVQRb1o_hV2JJooBc4dMF1MOKsl3b4?feat=directlink](https://picasaweb.google.com/lh/photo/oI6rWHT8iS_0nKVQRb1o_hV2JJooBc4dMF1MOKsl3b4?feat=directlink)
*   IE8 渲染相同页面，IE 开发者工具突出显示第三个列表项的不稳定宽度：[https ://picasaweb.google.com/lh/photo/_n-WvfHYgUrPJ6jTdk24KxV2JJooBc4dMF1MOKsl3b4?feat=directlink](https://picasaweb.google.com/lh/photo/_n-WvfHYgUrPJ6jTdk24KxV2JJooBc4dMF1MOKsl3b4?feat=directlink)

我可以做些什么来保持与您在 Chrome（或 IE1-IE8 以外的任何其他浏览器）中看到的外观相同？

感谢您的时间。

[1] 我们对你做过什么 IE8 让你这么恨我们？？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T04:16:12.837

不幸的是，IE 不呈现 table-cell 属性，所以你不得不求助于各种 hack。幸运的是，这个效果很好。

```
ul li {
    display: inline-block;
    *display:inline;
    zoom: 1;
    height: 100%;
    max-width: 130px;
    min-width: 130px;
    padding: 0px 0px 0px 15px;
    vertical-align: bottom;
} 
```

这将允许元素在 IE 中以内联块方式对齐，从而为您提供跨浏览器的内联元素。

# sql - 高效使用 SQL GROUP BY、SUM、COUNT

> ID：11255938
> 
> 赞同：4
> 
> 时间：2012-06-29T04:07:02.967
> 
> 标签：sql, performance, count, group-by, sum

我有一张产品销售表，可能如下所示：

```
product   | amount   | ptype    | pdate      
p1        | 1.00     | sale     | 01/01
p1        | 2.00     | base     | 01/02
p2        | 1.50     | sale     | 02/03
p3        | 5.25     | base     | 10/10 
```

我想建立一个表格，每行显示一个产品，金额的总和，如果产品是唯一的，则显示类型，否则将类型显示为“VAR”，如果产品是唯一的，则显示日期，否则显示日期作为NULL。因此结果如下所示：

```
product   | total    | ptype    | pdate      
p1        | 3.00     | VAR      | (NULL)
p2        | 1.50     | sale     | 02/03
p3        | 5.25     | base     | 10/10 
```

我通过执行以下操作来完成我需要的结果：

```
SELECT DISTINCT product
,(SELECT SUM(amount) FROM T as b GROUP BY b.product HAVING a.product = b.product ) as total
,(SELECT CASE WHEN COUNT(*) = 1 THEN a.ptype  ELSE 'VAR' END from T as b GROUP BY b.product HAVING a.product = b.product) as ptype
,(SELECT CASE WHEN COUNT(*) = 1 THEN a.pdate  ELSE NULL END from T as b GROUP BY b.product HAVING a.product = b.product) as pdate
FROM T as a 
```

但我想知道是否有更有效的方法可以实现相同的结果。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-29T04:26:58.557

无需使用任何形式的子查询或内联视图。根据数据库引擎的复杂程度，这些结构可能会对性能产生负面影响。

这是您所要求的，即使在最原始的 SQL 引擎上，它也应该通过对表的单次扫描可靠地给出结果。

```
select product,
       sum(amount) as amount,
       case when count(*)=1 then min(ptype) else 'VAR' end as ptype,
       case when count(*)=1 then min(pdate) else null end as pdate
  from T
 group by product 
```

以下内容并不完全符合您的要求，但我认为它可能更接近您实际寻找的内容。如果聚合中有多个不同的值，它只会将 ptype 报告为 VAR 或 pdate 报告为 NULL。

我添加了一个 pcount 列，以便您仍然可以识别单线态聚合，即使 ptype 和 pdate 都不是 nulll。

```
select product,
       sum(amount) as amount,
       count(*) as pcount,
       case when count(distinct ptype)=1 then min(ptype) else 'VAR' end as ptype,
       case when count(distinct pdate)=1 then min(pdate) else null end as pdate
  from T
 group by product 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-29T04:30:08.467

如果您针对任何主要数据库（例如 SQL Server）运行此程序，查询优化器可能会代表您处理大部分优化。也就是说，您可以使用具有单个 group by 的内部查询轻松完成此操作。这是一个有效的示例，您可以使用：

[http://sqlfiddle.com/#!3/f2e05/19/1](http://sqlfiddle.com/#!3/f2e05/19/1)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-06-29T04:18:26.593

试试这段代码：

```
SELECT DISTINCT product, x.total,
IF(COUNT(x.ptype) > 1, 'VAR', x.ptype) AS ptype,
IF(COUNT(x.pdate) > 1, NULL, x.pdate) AS pdate
FROM (SELECT DISTINCT product, SUM(amount) AS total, ptype, pdate FROM table GROUP BY product) AS x
JOIN table ON x.product = table.product
GROUP BY x.product; 
```

希望它有效。

# ruby-on-rails - Rails 保存序列化对象失败？

> ID：11255939
> 
> 赞同：3
> 
> 时间：2012-06-29T04:08:04.827
> 
> 标签：ruby-on-rails, ruby, activerecord, serialization, yaml

请参阅以下输出：

```
1.9.3p194 :001 > player = Player.randomize_for_market
 => #<Player id: nil, name: "Gale Bridges", age: 19, energy: 100, attack: 6, defense: 4, stamina: 5, goal_keeping: 3, power: 4, accuracy: 5, speed: 5, short_pass: 5, ball_controll: 4, long_pass: 6, regain_ball: 5, contract_id: nil, created_at: nil, updated_at: nil> 
1.9.3p194 :002 > player.save!
   (0.2ms)  BEGIN
   SQL (20.5ms)  INSERT INTO "players" ("accuracy", "age", "attack", "ball_controll", "contract_id", "created_at", "defense", "energy", "goal_keeping", "long_pass", "name", "power", "regain_ball", "short_pass", "speed", "stamina", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14, $15, $16, $17) RETURNING "id"  [["accuracy", 5], ["age", 19], ["attack", 6], ["ball_controll", 4], ["contract_id", nil], ["created_at", Fri, 29 Jun 2012 04:02:34 UTC +00:00], ["defense", 4], ["energy", 100], ["goal_keeping", 3], ["long_pass", 6], ["name", "Gale Bridges"], ["power", 4], ["regain_ball", 5], ["short_pass", 5], ["speed", 5], ["stamina", 5], ["updated_at", Fri, 29 Jun 2012 04:02:34 UTC +00:00]]
   (16.6ms)  COMMIT
 => true 
1.9.3p194 :003 > YAML::load(YAML::dump(Player.randomize_for_market)).save!
   (0.2ms)  BEGIN
   (0.2ms)  COMMIT
 => true 
```

为什么会发生这种情况，我该如何避免？

模型上没有 ((before|after)+(save|create|commit))。我正在使用rails 3.2。

```
 Table "public.players"
   Column     |            Type             |                      Modifiers                       
--------------+-----------------------------+------------------------------------------------------
id            | integer                     | not null default nextval('players_id_seq'::regclass)
name          | character varying(255)      | not null
age           | integer                     | not null
energy        | integer                     | not null
attack        | integer                     | not null
defense       | integer                     | not null
stamina       | integer                     | not null
goal_keeping  | integer                     | not null
power         | integer                     | not null
accuracy      | integer                     | not null
speed         | integer                     | not null
short_pass    | integer                     | not null
ball_controll | integer                     | not null
long_pass     | integer                     | not null
regain_ball   | integer                     | not null
contract_id   | integer                     | 
created_at    | timestamp without time zone | not null
updated_at    | timestamp without time zone | not null

Indexes:
   "players_pkey" PRIMARY KEY, btree (id) 
```

编辑：回答“你为什么期望 YAML::load(YAML::dump(Player.randomize_for_market)).save! 做任何事情？”

因为它序列化一个对象并恢复它？例子：

```
1.9.3p194 :006 > p = Player.randomize_for_market
 => #<Player id: nil, name: "Vincenzo Allen", age: 23, energy: 100, attack: 2, defense: 8, stamina: 6, goal_keeping: 3, power: 5, accuracy: 6, speed: 5, short_pass: 6, ball_controll: 5, long_pass: 6, regain_ball: 5, contract_id: nil, created_at: nil, updated_at: nil> 
1.9.3p194 :007 > p
 => #<Player id: nil, name: "Vincenzo Allen", age: 23, energy: 100, attack: 2, defense: 8, stamina: 6, goal_keeping: 3, power: 5, accuracy: 6, speed: 5, short_pass: 6, ball_controll: 5, long_pass: 6, regain_ball: 5, contract_id: nil, created_at: nil, updated_at: nil> 
1.9.3p194 :008 > YAML::load(YAML::dump(p))
 => #<Player id: nil, name: "Vincenzo Allen", age: 23, energy: 100, attack: 2, defense: 8, stamina: 6, goal_keeping: 3, power: 5, accuracy: 6, speed: 5, short_pass: 6, ball_controll: 5, long_pass: 6, regain_ball: 5, contract_id: nil, created_at: nil, updated_at: nil> 
```

注意 p 的返回值与 YAML::load 的返回值相同

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-29T05:31:03.123

这可能有助于回答您的问题：

```
:001 > article = Article.new
#<Article:0x102d16b10> { ... }
:002 > article.persisted?
false
:003 > dumped = YAML::dump(article)
"--- !ruby/object:Article ... "
:004 > loaded = YAML::load(dumped)
#<Article:0x102cf5500> { ... }
:005 > loaded.persisted?
true 
```

查看 Rails 源代码[`ActiveRecord::Base#persisted?`](http://api.rubyonrails.org/classes/ActiveRecord/Persistence.html#method-i-persisted-3F)：

```
def persisted?
  !(new_record? || destroyed?)
end 
```

对于[`ActiveRecord::Base#new_record?`](http://api.rubyonrails.org/classes/ActiveRecord/Persistence.html#method-i-new_record-3F)：

```
def new_record?
  @new_record
end 
```

将`@new_record`对象转储到 Yaml 时不会保存实例变量，因此是`nil`从 Yaml 加载对象时。所以 ActiveRecord 认为它已经被持久化到数据库中并且不会尝试保存它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-06-17T16:08:43.483

Brandan 的回答非常相关，从 YAML 反序列化的对象认为它已经被持久化了。假设`@loaded_obj`是您从 YAML 加载的对象（您要保存的对象），请尝试`@loaded_obj.dup.save`

# .net - 正则表达式匹配单词，包括周围的方括号

> ID：11255945
> 
> 赞同：1
> 
> 时间：2012-06-29T04:09:05.270
> 
> 标签：.net, regex

在下面的文本中，我只想匹配第一个 [ID]，而不是第二个 [ID]，它是 [SOMETHING].[ID]
编辑的一部分：实际文本确实包含方括号。我还需要匹配周围的括号。

> 匹配 [ID] 但不匹配 [SOMETHING].[ID]

我使用了以下正则表达式，但它不匹配任何内容。

```
\b\[ID\] 
```

为什么这个正则表达式不起作用，什么是正确的？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T04:28:11.333

据我所知，`\b`与字符串的开头不匹配。尝试：

```
(^|[\W])\[ID\] 
```

作为你的正则表达式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T04:58:20.383

这个正则表达式符合我的要求。

> (?<=\s+|^)\[ID\]

# java - 如何为表格行循环添加视图？

> ID：11255946
> 
> 赞同：0
> 
> 时间：2012-06-29T04:09:12.310
> 
> 标签：java, android, loops

我已经编写了这段代码来将 textview 添加到表格行中，但是我对行数有问题，我所做的表格行数是恒定的（5 行），我想要的是表格行数是动态的。所以我想循环这段代码，但我不知道怎么做。你能教我怎么做吗？谢谢你 ：）

这是代码：

```
 TableRow row0 = new TableRow(this);
    TableRow row1 = new TableRow(this);
    TableRow row2 = new TableRow(this);
    TableRow row3 = new TableRow(this);
    TableRow row4 = new TableRow(this);

    row0.addView(createTextView(listTipe.get(0).getType()));
    row1.addView(createTextView(listTipe.get(1).getType()));
    row2.addView(createTextView(listTipe.get(2).getType()));
    row3.addView(createTextView(listTipe.get(3).getType()));
    row4.addView(createTextView(listTipe.get(4).getType()));

    row0.addView(createTextView(listTotal1.get(0).getTotal()));
    row1.addView(createTextView(listTotal1.get(1).getTotal()));
    row2.addView(createTextView(listTotal1.get(2).getTotal()));
    row3.addView(createTextView(listTotal1.get(3).getTotal()));
    row4.addView(createTextView(listTotal1.get(4).getTotal()));

    row0.addView(createTextView(listTotal2.get(0).getTotal()));
    row1.addView(createTextView(listTotal2.get(1).getTotal()));
    row2.addView(createTextView(listTotal2.get(2).getTotal()));
    row3.addView(createTextView(listTotal2.get(3).getTotal()));
    row4.addView(createTextView(listTotal2.get(4).getTotal()));

    row0.addView(createTextView(listTotal3.get(0).getTotal()));
    row1.addView(createTextView(listTotal3.get(1).getTotal()));
    row2.addView(createTextView(listTotal3.get(2).getTotal()));
    row3.addView(createTextView(listTotal3.get(3).getTotal()));
    row4.addView(createTextView(listTotal3.get(4).getTotal()));

    row0.addView(createTextView(listUang1.get(0).getUang()));
    row1.addView(createTextView(listUang1.get(1).getUang()));
    row2.addView(createTextView(listUang1.get(2).getUang()));
    row3.addView(createTextView(listUang1.get(3).getUang()));
    row4.addView(createTextView(listUang1.get(4).getUang()));

    row0.addView(createTextView(listUang2.get(0).getUang()));
    row1.addView(createTextView(listUang2.get(1).getUang()));
    row2.addView(createTextView(listUang2.get(2).getUang()));
    row3.addView(createTextView(listUang2.get(3).getUang()));
    row4.addView(createTextView(listUang2.get(4).getUang()));

    row0.addView(createTextView(listUang3.get(0).getUang()));
    row1.addView(createTextView(listUang3.get(1).getUang()));
    row2.addView(createTextView(listUang3.get(2).getUang()));
    row3.addView(createTextView(listUang3.get(3).getUang()));
    row4.addView(createTextView(listUang3.get(4).getUang()));

    tableLayout.addView(row0);
    tableLayout.addView(row1);
    tableLayout.addView(row2);
    tableLayout.addView(row3);
    tableLayout.addView(row4);

  }

  private TextView createTextView(String text) {
    TextView textView = new TextView(this);
    textView.setText(text);
    textView.setTextSize(TypedValue.COMPLEX_UNIT_DIP, 15);
    textView.setTypeface(null, Typeface.BOLD);
    textView.setPadding(0, 0, 15, 0);
    return textView;

  } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T04:16:47.037

```
for (int i = 0; i < 5; i++) {
  TableRow tableRow = new TableRow(this);
  tableRow.addView(createTextView(listTipe.get(i).getType());
  tableRow.addView(createTextView(listTotal1.get(i).getTotal()));
  tableRow.addView(createTextView(listTotal2.get(i).getTotal()));
  tableRow.addView(createTextView(listTotal3.get(i).getTotal()));
  tableRow.addView(createTextView(listTotal1.get(i).getUang()));
  tableLayout.addView(tableRow);
} 
```

# powerbuilder - 想要在 Powerbuilder 中使用 SetNamedSecurityInfo 来更改文件的所有者

> ID：11255949
> 
> 赞同：0
> 
> 时间：2012-06-29T04:09:43.157
> 
> 标签：powerbuilder

我需要更改文件的所有权或撤销使用 Powerbuilder 创建文件的用户的所有权。即在我的应用程序中，用户创建了一个文件，我想立即在代码中从文件中删除他的所有权。这样用户就无法编辑或修改文件。我找到了一些相同的 c++ 示例（[在 Windows 中更改文件所有者](https://stackoverflow.com/questions/2220336/change-file-owner-in-windows)），但无法在 Powerbuilder 中复制它。调用 SetNamedSecurityInfoW 时使用以下代码获取错误代码 87。如果有人可以帮助我使用 Powerbuilder 实现所有权变更。

* * *

```
CONSTANT Integer SE_FILE_OBJECT = 1
CONSTANT Integer OWNER_SECURITY_INFORMATION = 1
CONSTANT Integer NAME_SIZE = 64
CONSTANT Integer SID_SIZE = 32
String domain_name 
Integer ret, sid_len, domain_len 

integer li_ret, newowner
n_filesys nvo

Integer l_nothing
SetNull(l_nothing)
newowner = 100
li_ret = nvo.SetNamedSecurityInfoW('P:\My Documents\Test.txt',SE_FILE_OBJECT,OWNER_SECURITY_INFORMATION,newowner,l_nothing,l_nothing,l_nothing)

    If li_ret <> 0 Then
                messagebox("Hi","Error")
    end if

---------------------------------------------------------------------
Declaration of SetNamedSecurityInfoW:---

Function Integer SetNamedSecurityInfo ( &
   String ObjectName, &
    Integer ObjectType, &
    Integer SecurityInfo, &
    Long sidOwner, &
    Long sidGroup, &
    Long Dacl, &
    Long Sacl &
    ) Library "advapi32.dll" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T15:06:13.067

根据[Windows 系统错误代码列表](http://msdn.microsoft.com/en-us/library/windows/desktop/ms681382%28v=vs.85%29.aspx)，您的参数无效。我的猜测是 sidOwner、sidGroup、Dacl 和 Sacl 参数。这些都是指向结构的指针，因此最好实际定义结构并通过引用传递它们。为 sidOwner 传入一个整数肯定会导致问题。声明结构看起来也不是很直接，但您可以使用[此处的文档开始](http://msdn.microsoft.com/en-us/library/windows/desktop/aa379594%28v=vs.85%29.aspx)。

# javascript - 正确删除 HTML DOM 节点

> ID：11255950
> 
> 赞同：0
> 
> 时间：2012-06-29T04:09:57.673
> 
> 标签：javascript, html, google-chrome

我正在尝试创建一个星光闪烁的动画。

```
function ShowStars()
{
    //if ($('img.star').length > 5)
    //  return;

    var x = Math.floor(Math.random() * gameAreaWidth) - 70;
    var y = Math.floor(Math.random() * gameAreaHeight);

    var star = document.createElement("img");
    star.setAttribute("class", "star");
    star.setAttribute("src", imagesPath + "star" + GetRandom(1, 3) + ".png");
    star.style.left = x + "px";
    star.style.top = y + "px";
    gameArea.appendChild(star);
    // Light.
    setTimeout(function () { star.setAttribute("class", "star shown"); }, 0);
    // Put out.
    setTimeout(function () { star.setAttribute("class", "star"); }, 2000);
    // Delete.
    setTimeout(function () { gameArea.removeChild(star); }, 4000);

    setTimeout(function () { ShowStars(); }, 500);
} 
```

在我取消注释以下应该调节星数的代码之前，它工作正常：

```
//if ($('img.star').length > 5)
//  return; 
```

然后它停止工作，好像创建的星星没有被移除（前 5 颗星星闪烁然后什么都没有发生）。为什么 jQuery 选择器在之后选择它们`gameArea.removeChild(star);`？将它们从父节点中删除还不够吗？

浏览器：谷歌浏览器 17。

问候，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T06:36:48.613

将注释掉的行更改为

```
if ($('img.star').length > 5) {
  setTimeout(function () { ShowStars(); }, 500);
  return;
} 
```

保持 ShowStars 递归继续进行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T04:25:09.980

我看到了一种解决方法：不要动态创建星星，而是将它们插入 HTML（`<img id="star1">`... `<img id="starN">`，其中 N 是总数），然后点亮并熄灭现有节点。不过，我想了解，删除上述问题中的节点有什么问题。

# javascript - Jquery 不是从事件处理程序进行深度复制

> ID：11255951
> 
> 赞同：1
> 
> 时间：2012-06-29T04:09:59.633
> 
> 标签：javascript, html, drag-and-drop, dom-events

我有一个使用普通 javascript 设置的事件处理程序，如下所示：

```
myElement.addEventListener('drop', handleDrop, false); 
```

然后，在 handle drop 里面我尝试这样做：

```
var myContainer = $(this.parentNode);
myContainer.after(myContainer.clone(true, true)); 
```

但是，该事件似乎没有被转移到克隆元素。发生这种情况是因为我也没有将事件与 jQuery 绑定吗？

我试图通过将事件与 jQuery 绑定来测试这一点，但这不支持该`dataTransfer`对象，因此它破坏了其他代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-30T11:00:45.003

一种解决方案是为 addEventListener 编写自己的包装器，该包装器会记住已添加的侦听器，因此可以“重放”它们：

```
// set an event handler after memoizing it
function myAddEventListener(element, type, listener, useCapture) {
    // store listeners as an array under element.listeners
    if (!element.listeners) { element.listeners=[]; }

    // each element of the array is an array of arguments to addEventListener
    element.listeners[element.listeners.length] = 
        Array.prototype.slice.call(arguments,1);

    // apply listener to element itself
    element.addEventListener (type, listener, useCapture);
}

// copy a list of event handlers from one element to another
function copyEventListeners (from_element, to_element) {
    var i;
    if (from_element.listeners) {
        for (i=0; i<from_element.listeners.length; i++) {
          Element.addEventListener.apply (to_element, from_element.listeners[i]);
        }
    }
} 
```

然后：

```
function clone_with_listeners (element) {
    var cloned_element = element.cloneNode();
    copyEventListeners (element, cloned_element);
    return cloned_element;
} 
```

如果您没有宗教信仰阻止您覆盖 Element 对象上的原始方法：

```
var orgAddEventListener = Element.addEventListener;

// our version of addEventListener
Element.addEventListener = function (type, listener, useCapture) {
    // store listeners as an array under element.listeners
    if (!this.listeners) { this.listeners=[]; }

    // each element of the array is an array of arguments to addEventListener
    this.listeners[element.listeners.length] = 
        Array.prototype.slice.call (arguments,0);

    // apply listener to element itself
    orgAddEventListener.call (element, type, listener, useCapture);
};

// copy a list of event handlers from this element to another
Element.copyEventListeners = function (to_element) {
    var i;
    if (from_element.listeners) {
        for (i=0; i<this.listeners.length; i++) {
            Element.addEventListener.apply (to_element, this.listeners[i]);
        }
    }
}; 
```

接着：

```
Element.cloneNode = function () {
  var cloned_element = this.cloneNode();
  this.copyEventListeners (cloned_element);
  return cloned_element;
}; 
```

# git - 将 git 存储库重置为来自特定分支的特定提交

> ID：11255952
> 
> 赞同：3
> 
> 时间：2012-06-29T04:10:06.997
> 
> 标签：git, reset

我在一个处于以下状态的分支上工作

```
 A'--B'--C'--D'
       /
A--B--C--D 
```

发生了一些非常糟糕的事情，我必须在本地和远程返回 B'，以便远程存储库如下

```
 A'--B'
        /
 A--B--C--D 
```

对于我做的本地存储库

```
git reset --hard <sha> 
```

但我怎样才能为远程存储库做到这一点？

我应该能够做类似的事情

git push origin mybranch --reset

但它不在手册页中

我尝试创建一个提交，它会取消以前的提交，但是

混帐添加。

报告没有变化（预计因为我正好在上一次推送之后）

那么如何重置远程存储库？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-29T04:23:45.407

要使用您的覆盖跟踪的远程分支，请执行`git push origin --force mybranch`. （或使用`-f`代替`--force`，或在分支名称前加上`+`: `git push origin +mybranch`。）

请注意，您应该警告任何可能已更改您的分支的协作者它已被远程更改，因此他们不会将其覆盖回来。因为`git push`在他们的副本上会为远程分支做快进——除非你至少对它做了一个新的提交，并且`git pull`不会更新他们的本地版本的分支。合作者应该：

```
git fetch origin
git checkout mybranch
git rebase origin/mybranch 
```

更新完整性：正如@CodeGnome 建议的那样，要完全删除提交，请`git prune --expire now`在包含它们的所有 Git 存储库上运行。但请注意，此命令将从 Git 中删除*所有*悬空对象，并会阻止在运行之前恢复您“丢失”的任何数据。通常没问题，但无论如何你都需要被警告。

更新：正如[这个](https://wincent.com/wiki/Obliterating_a_Git_commit)页面所暗示的，`git prune --expire now`不会清除 reflogs 中的提交。查看解决方案的链接。对于侵入性较小的解决方案，请尝试`git reflog expire --all mybranch`. 您必须在运行之前执行此操作`git prune`。

有时更可取的是显式生成“撤消”提交以删除更改（因此旧版本及其删除的事实在历史记录中可见）。有一个`git revert`命令。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-29T04:26:17.203

### 从历史中删除提交

您真正需要做的就是在 B' 分支上，然后去`git push --force`覆盖该分支的当前提交指针。如果您没有将遥控器设置为跟踪分支，则可能需要这样做`git push --force origin <branchname>`。

C' 和 D' 将保留在 reflog 中并作为存储库中的对象，直到它们最终被修剪，但除非您开始深入研究管道，否则不应显示为任何日志历史记录的一部分。

### 从存储库中删除悬空对象

如果您希望 C' 和 D' 完全退出存储库，则可以调用`git prune --expire now`两个存储库。那应该完全移除悬空的物体。

# zsh - zsh：完成菜单。如何放置名称的公共部分？

> ID：11255959
> 
> 赞同：1
> 
> 时间：2012-06-29T04:10:36.100
> 
> 标签：zsh, tab-completion

我在我的 zsh 中配置了完成菜单。效果很好，没问题。

现在我想让我的 zsh 像这样：

假设一个目录中有3个文件：

1.  somefile_first
2.  somefile_second
3.  somefile_third

现在，当我按下 [TAB] 时，我会看到完成菜单，其中包含放置在命令行中的第一个文件。但我希望 zsh 完成文件名的公共部分（在本例中为**somefile_**），不要**在**公共部分之后放置任何其他内容，让我浏览完成菜单。

我怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-18T18:15:55.813

我意识到这个问题很老，但是在寻找相同的答案时我偶然发现了它。这是我发现的。

AFAIK 使用完成菜单时 zsh 将始终在命令行中突出显示完成。但是你可以让它不那么仓促。

```
unsetopt menucomplete
setopt automenu 
```

改变行为

*   首先`TAB`完成公共部分
*   第二个列出完成而不更改命令行
*   第三次启动菜单并以突出显示的完成完成命令行

如果您不喜欢命令行更改而不是花哨的菜单取消设置自动菜单：

```
unsetopt menucomplete automenu 
```

这给出了类似 bash 的完成。仅完成共同部分并列出命题。

# apache - localhost/drupal/drupal/mysite 到 localhost/mysite 还是 mysite.com？

> ID：11255961
> 
> 赞同：0
> 
> 时间：2012-06-29T04:11:27.737
> 
> 标签：apache, drupal, drupal-7, xampp

如何从 localhost/htdocs/drupal-vn/drupal-vn/mysite1 更改；...mysite2 到 www.mysite1.com 和 www.mysite2.com 以及到 localhost/mysite？我不使用 httpd.conf 什么的吗？我在 XP 上使用 XAMPP。

另外，这个过程叫什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T06:56:21.370

将在 apache 配置中进行更改。请按照此处的说明进行操作-如果您按步骤进行操作，则为好文章-http: [//www.debian-administration.org/articles/412](http://www.debian-administration.org/articles/412)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T10:47:40.603

我有一些网站提供了关于如何实现这一点的令人困惑的教程：

[http://httpd.apache.org/docs/current/vhosts/examples.html](http://httpd.apache.org/docs/current/vhosts/examples.html)

[http://complete-concrete-concise.com/web-tools/how-to-change-localhost-to-a-domain-name](http://complete-concrete-concise.com/web-tools/how-to-change-localhost-to-a-domain-name)

# javascript - 静态大小的外部元素，尤其是 .animate() 向右和向下

> ID：11255967
> 
> 赞同：0
> 
> 时间：2012-06-29T04:12:53.143
> 
> 标签：javascript, jquery, html, css

我有一个解决这个问题的方法，但是我在玩弄 html/javascript (jquery) 时注意到了一些特殊的行为。

我注意到将元素向右和向下移动到包含元素的边界之外会调整包含元素的大小。例如，读者可以访问[http://jqueryui.com/demos/draggable/](http://jqueryui.com/demos/draggable/)。尝试将框拖动到包含框的右侧或下方。这种行为令人抓狂。

你怎么能禁用这个烦人的属性？我的大部分元素都是位置：相对的，因为按照它们的书写顺序放置它们根本不是很有用。这只是我注意到的一些事情，并且想要一些推理。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T04:34:35.877

你可以试试`containment`：

> 将拖动限制在指定元素或区域的范围内。可能的字符串值：'parent'、'document'、'window'、[x1, y1, x2, y2]。

```
$( ".selector" ).draggable({ containment: "parent" }); 
```

# c - 为什么这段代码只循环 4 次？

> ID：11255970
> 
> 赞同：1
> 
> 时间：2012-06-29T04:13:19.390
> 
> 标签：c, pointers, malloc

背景：我试图澄清 C 中指针和动态内存分配的奥秘。我试图从用户那里获取几个浮点输入，将它们存储在一个动态分配的数组中，从而扩展以容纳更多值。一旦用户输入 0，循环终止，计算和打印总和和平均值。我正在使用 Borland C 5.02

问题： 1.循环只工作了4次，然后第4个值没有存储！
2\. 如果我将 x+i 替换为 x[i] 并将 *(x+i-1) 替换为 x[i-1] 我得到“浮点错误：堆栈错误”“程序异常终止。

```
int main(void)
{
   float *x;
   float sum=0;
   float avg=0;
   int i=0;

   x=(float*)malloc(sizeof(float));

   do
   {
        scanf("%f",x+i);  //take input

      i++;
      x=(float*)realloc(x, i*sizeof(float));  //reallocate memory to store more values
      if(x==NULL){printf("WARNING");}

      printf("\n%f    %p   %d\n",*(x+i-1),x,i);

   }while(*(x+i-1)!=0);

   for(int j=0;j<i;j++)
   {sum=sum+*(x+j);} // Sum all values

   avg=sum/(i-1);   //Find result, i is 1 bigger than number of values, ith value is 0

   printf("\n\n%d   sum: %f   avg: %f ",i,sum,avg);
   getch();
   return 0;
} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-29T04:24:11.993

由于`i`是基于 0 的，因此您的 realloc 应该是： `x=(float*)realloc(x, (i+1)*sizeof(float));`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T04:38:54.833

I compiled your program and ran it. I built with `-g` and tried debugging it. It gives this message and then a stack backtrace:

```
*** glibc detected *** ./a.out: realloc(): invalid next size: 0x0000000000797010 *** 
```

For me, it dies after the 6th number.

I did a search on the above error message about "invalid next size" and haven't found anything really useful. All the answers I found are basically "you did something that corrupted your heap" but in your program I don't spot anything that should be doing that.

EDIT: Okay, sure enough, it was heap corruption caused by writing after the end of the allocated memory. That should teach me. There was one call to `realloc()` and one place that was writing to the memory; the bug had to be one of those two lines!

# java - 无法访问文件目录

> ID：11255971
> 
> 赞同：0
> 
> 时间：2012-06-29T04:13:51.297
> 
> 标签：java, file, io, directory, slash

这可能真的很无聊，但我正在尝试访问一个文件目录，以便可以加载其中的所有图像。出于某种原因，当我输入一个文件目录（例如“/Images”）时，当我创建一个新文件时它会显示为“\Images”，而 Windows 找不到该目录，因为它是一个反斜杠......

代码：

```
private final String imgDir =  "/Images";

File dir = new File(imgDir);

System.out.println(imgDir);
System.out.println(dir);

File[] files = dir.listFiles(new FilenameFilter() {
  public boolean accept(File dir, String fname) {
     return fname.endsWith(".png") || fname.endsWith(".bmp") || fname.endsWith(".jpg");
  }
}); 
```

打印输出分别是“/Images”和“\Images”。由于目录错误，文件总是显示为空。任何想法为什么会这样？

编辑：好的，我让它工作了。你们没关系，我需要使用相对路径，但由于它位于 src 文件夹中，我只需要将其设为“.\src\Images”：D 这样做是不好的做法吗？我应该将图像文件夹移动到根项目目录吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T04:19:58.483

尝试使用`File.separator`而不是显式斜杠来编写字符串，例如： `private final String imgDir = File.separator + "Images"`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T06:21:37.190

> Windows 找不到目录，因为它是反斜杠

这不是原因。Windows 本身使用反斜杠。

> 由于目录错误，文件总是显示为空。

这样就可以了，例如，如果按照您的评论，您的意思是`./Images`但您实际上编码了`/Images`.

# c# - 我可以在这种情况下使用 WF 4 吗？

> ID：11255972
> 
> 赞同：2
> 
> 时间：2012-06-29T04:14:17.377
> 
> 标签：c#, asp.net-mvc-3, workflow-foundation-4

我想弄清楚 ms Workflow WF 4 在以下情况下是否可用？尝试在 asp.net mvc 3 中创建 Web 应用程序。

办公室里有一种情况，有不同的角色。表单必须通过不同角色（项目经理、团队负责人、总监）的批准。因此，项目经理创建了一个表单，将其提交给团队负责人以供批准。团队负责人批准通知并批准此表格。然后他批准并提交后，将由主任批准。如果他不批准，他会将表格发回给项目经理。

将其与 asp.net mvc 3 一起实现到 WF 4 中是否有用，或者这不是可取的？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-29T07:15:06.410

新技术的选择取决于许多标准。因此，如果您想决定是否使用工作流来解决您的业务问题，请根据您当前的需求创建一个小型 POC。验证一下，这是最合适的方式吗？您的团队是否熟悉这项技术？需要什么学习曲线？

从我的角度来看，您当前的要求适合使用工作流 4.0。这是一个长期运行的过程，需要频繁的人工干预。

您也可以参考这些链接..

[http://msdn.microsoft.com/en-us/library/dd851337](http://msdn.microsoft.com/en-us/library/dd851337)

[http://msdn.microsoft.com/en-us/library/ee342461.aspx](http://msdn.microsoft.com/en-us/library/ee342461.aspx)

[http://msdn.microsoft.com/en-us/library/cc709416](http://msdn.microsoft.com/en-us/library/cc709416)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-02T04:47:23.573

我想表达对WF4的一些担忧。在我看来，您是在从鸟类的角度描述工作流程。工作流程是一条信息（表格）必须由多方批准，每一方都有不同的职责。

当您从 MVC 的角度看待问题时，您会发现以下内容：

1.  您具有基于角色的身份验证的 ASP.NET 表单身份验证。
2.  您有多个模型 - 一条信息（您所称的形式）以及多个其他模型 - 例如`project manager`、`team leader`和`director`. 此外，您的域模型（实体框架 4/LINQ2SQL/NHibernate）中还有大量其他连接器表/实体......
3.  每个人都应该有一组不同的视图，他们可以根据他们的权限访问，以便与该数据进行交互。
4.  在每个视图后面，您还有控制器负责读取/写入数据源以及其他逻辑的繁重工作。

虽然您当然可以创建工作流以在您的应用程序中实现某些逻辑 - 最终这些工作流将从您的控制器中调用。此外，如果各方的批准过程是单击“批准”按钮或其他一些 UI 交互 - 我认为使用 WF4 来实现这一点没有意义。

在我看来，WF4 不太适合 UI 交互。当您想要创建操作大量数据和/或编排复杂逻辑以完成某些任务的后端代码时，这真的很好。但是，在您描述的场景中，您实际上并没有这种用途。

您的审批流程最多应在包含 FormID、ApproverID、DateApproved、ApproverType 和其他一些信息的数据库中设置“已批准”记录。（审批者 ID 是进行审批的用户的 Guid/唯一标识符）。

为团队领导和主管显示“待批准”表单的视图应该只查询表单表，其中批准表上的连接产生空记录（又名......批准记录不存在）在任何情况下 - 取决于你的领域模型和数据的结构你真的不需要比你的控制器更多的东西来实现你正在寻找的东西。

# c++ - 编译器是否将琐碎的 getter 方法优化为简单的字段访问？

> ID：11255973
> 
> 赞同：3
> 
> 时间：2012-06-29T04:14:35.287
> 
> 标签：c++, visual-c++, methods, compiler-optimization, getter

虽然我认为在 VC++ 中这将是一个明智的选择，但仍然值得一问。

*当为只*返回受保护/私有成员的值的类创建 getter 方法时，编译器是否优化了此调用，因此它相当于引用该成员而无需与类为友并且没有完整方法调用的开销？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-29T04:47:27.413

是的。两种变体都编译成相同的东西：

```
struct test
{
    int x;

    int get() const { return x; }
};

__declspec(noinline) int use_x(const test& t)
{
    return t.x;
}

__declspec(noinline) int use_get(const test& t)
{
    return t.get();
}

int main()
{
    test t = { 111605 };

    // pick one:
    return use_x(t);
    //return use_get(t);
} 
```

请注意，对于编译器，它并不像总是替换为 , 那样简单`t.get()`。`t.x`考虑这样的事情：

```
t.get() += 5; 
```

这不应该编译，因为函数调用的结果是一个右值并且`+=`（对于原语）需要一个左值。编译器会检查类似的东西。

# c# - 根据存储的变量，DataGridView 单元格上的图像。怎么做？

> ID：11255974
> 
> 赞同：0
> 
> 时间：2012-06-29T04:14:38.160
> 
> 标签：c#, .net

我的代码需要一些帮助。我已经完成并工作了 DataGridView，但是，在第一列单元格中，我存储了一个范围为 3（0、1 或 2）的字节变量。

我也有 3 张 ico 图片（16 x 16px），每张都有不同的颜色。我想在单元格上看到图片（红色、绿色和黄色）的值（0、1 和 2）。

请帮我！

谢谢

狮子座

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T05:30:02.680

如果您的 gridview 绑定到某个数据源，那么您可以扩展数据源以添加一个图像列，该列将基于字节列返回图像。例如，如果 gridview 绑定到实体，那么你可以在你的实体类中添加一个新属性

```
 public Image Image {  get {   if(ByteValue == 0) return ZeroImage;    else if(ByteValue == 1) return OneImage; else  return TwoImage; } } 
```

或者您可以处理 rowCreated 事件以提供取决于字节值的图像

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T06:24:17.623

假设：

1.  您正在使用 VS2010 C# ASP.NET 4
2.  您的 ico 文件位于网站主目录 (~/Images/) 的文件夹中

如果您有原始表格的形式：

```
CREATE TABLE YourOriginalTable(
    [PK] [int] IDENTITY(1,1) NOT NULL PRIMARY KEY CLUSTERED,
    [TheByteVariable] [int] NOT NULL,
    [SomeOtherTextColumn] [nvarchar](250) NOT NULL); 
```

数据如下：

```
INSERT YourOriginalTable VALUES
(0,'Jon'),
(2,'Joan'),
(1,'John'),
(0,'Jonnie'),
(2,'Jonny'); 
```

您可以在您的 aspx 文件中使用以下内容：

```
<asp:GridView ID="GridView1" runat="server" AutoGenerateColumns="False" 
        DataKeyNames="PK,gvImageCode" DataSourceID="SqlDataSource1">
        <Columns>
            <asp:BoundField DataField="PK" HeaderText="PK" ReadOnly="True" SortExpression="PK"  Visible="False"/>
            <asp:BoundField DataField="gvImageCode" HeaderText="gvImageCode" ReadOnly="True" SortExpression="gvImageCode" Visible="False" />
            <asp:ImageField DataImageUrlField="gvImageFileName" HeaderText="i" ></asp:ImageField>
            <asp:BoundField DataField="SomeOtherTextColumn" HeaderText="SomeOtherTextColumn" SortExpression="SomeOtherTextColumn" />

        </Columns>
    </asp:GridView>
    <asp:SqlDataSource ID="SqlDataSource1" runat="server" 
        ConnectionString="<%$ ConnectionStrings:YourConnectionString %>" 
        SelectCommand="DECLARE @tb TABLE([gvImageCode] [int] NOT NULL PRIMARY KEY CLUSTERED,[gvImageFileName] [nvarchar](250) NOT NULL);
                       INSERT @tb VALUES (0, N'~/Images/Red.ico'),(1, N'~/Images/Green.ico'),(2, N'~/Images/Yellow.ico');
                       SELECT PK, gvImageFileName, SomeOtherTextColumn, gvImageCode FROM YourOriginalTable INNER JOIN @tb ON TheByteVariable = gvImageCode">
    </asp:SqlDataSource> 
```

解决方案可以在`SelectCommand`. 您可以看到在那里创建了一个带有 ico 文件 URL 的表并将其加入到原始表中。

注意力：

1.  GridView 的 asp:ImageField 不是常规列。

2.  GridView 的 DataKeyNames，两个键都必须存在。

3.  键和所有显示的列必须出现在`SELECT`子句中。

4.  为了隐藏列使用：`Visible="False"`

经测试！

我希望它有帮助

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-29T05:52:31.410

试试这个活动

```
private void dataGridView1_RowsAdded(object sender, DataGridViewRowsAddedEventArgs e)
{
  int imageIndex =  Convert.ToInt32(dataGridView1.Rows[e.RowIndex].Cells[0].Value);
  switch (imageIndex)
  {
   case 0:
   //dataGridView1.Rows[e.RowIndex].Cells[0] =  get image 0
   break;
   //case 1:
   //case 2:
  }
} 
```

# c# - 在 Ubuntu Linux 上另存为期间共享冲突

> ID：11255975
> 
> 赞同：1
> 
> 时间：2012-06-29T04:14:49.357
> 
> 标签：c#, linux, io, save

我是 C# 新手，保存到新文件时遇到了一些问题。我的程序有两个保存选项：保存和另存为。

保存时出现共享冲突错误，但我通过关闭前一个文件流解决了这个问题。但是，我仍然无法弄清楚为什么我的另存为代码给了我一个共享冲突错误。

这是代码：

```
 // get a file stream from the file chooser
        FileStream file = File.OpenWrite(saveFc.Filename);
        // check to see if the file is Ok
        bool fileOk = file.CanWrite;
        if (fileOk == true)
        {
            // get the filename
            string filename = file.Name;
            // store the filename for later use
            UtilityClass.filename = filename;
            // get the text from textview1
            string text = textview1.Buffer.Text;
            // get a StreamWriter
            StreamWriter writer = File.CreateText(filename);
            // write to the file
            writer.Write(text);
            // close/save the file
            writer.Close();
            file.Close();
        }
    }
    // close the file c 
```

如果你能帮我弄清楚，那将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-29T04:29:53.940

You're opening the same file twice:

```
FileStream file = File.OpenWrite(saveFc.Filename); 
```

And:

```
string filename = file.Name;
StreamWriter writer = File.CreateText(filename); 
```

Your code could probably be simplified to:

```
using (var writer = File.CreateText(saveFc.Filename))
{
    // store the filename for later use
    UtilityClass.filename = saveFc.Filename;

    // get the text from textview1
    string text = textview1.Buffer.Text;

    // write the text
    writer.Write(text);
} 
```

If you open the file with CreateText/OpenWrite it will always be writeable (or an exception will be thrown). The `using` block will automatically close the `writer` when it exits.

# c++ - 使用 C++ 在计算机之间发送文件

> ID：11255976
> 
> 赞同：2
> 
> 时间：2012-06-29T04:14:50.187
> 
> 标签：c++, file, network-programming, winsock

我正在尝试编写一个程序，该程序使用 C++ 通过 Internet（或 LAN）将基本文本文件从一台计算机发送到另一台计算机。我正在研究 Winsock，但我读到的所有内容都让它看起来只是用于服务器和客户端之间的通信。我不确定这是否是我想要做的，或者我是否正在寻找一个不同的问题。

编辑：谢谢你们的精彩回答。我有点为不得不从很多中选择一个最好的而感到难过。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2018-11-28T11:40:45.947

这是如何在 Linux 中使用 C/C++ 复制/传输文件的示例。`server`监听端口 8080。`client`传输文件名。`server`接收文件名，打开文件并将其内容发送给客户端。出于说明目的，我故意使用奇数或小缓冲区大小。

`server.c`文件：

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#include <ctype.h>
#include <netinet/in.h>
#include <unistd.h>
#include <fcntl.h>

int main (int argc,char *argv[])
{
    struct sockaddr_in p;
    struct sockaddr_in q;
    int z,s,t,x,n,b = sizeof(q);
    char buf[23];
    int fd;

    s = socket(AF_INET,SOCK_STREAM,0);

    bzero (&p,sizeof(p));
    p.sin_family = AF_INET;
    p.sin_addr.s_addr = INADDR_ANY;
    p.sin_port = htons(8080);

    bind (s,(struct sockaddr*)&p,sizeof(p));
    listen(s,13);

    while (1) {
        t = accept (s,(struct sockaddr*)&q, &b);
        n = read(t,buf,23);
        buf[n] = 0;
        printf("%s sent: ",buf);
        fd = open (buf,O_RDONLY);
        z = lseek(fd,0,SEEK_END);
        lseek(fd,0,SEEK_SET);
        x = 0;
        do {
            n = read (fd,buf,23);
            write (t,buf,n);
            x += n;
        } while (x < z);
        printf("%d/%d\n",x,z);
        close(fd);
        close(t);
    }
} 
```

`client.c`文件：

```
#include <stdio.h>
#include <string.h>
#include <netdb.h>
#include <unistd.h>
#include <fcntl.h>

void main (int argc, char *argv[]) 
{
    int ret;
    char buf[5];
    int s,n,fd;
    struct sockaddr_in p;
    struct hostent *h;
    char *str = argv[1];

    fd = open (str,O_CREAT | O_WRONLY,S_IRUSR|S_IWUSR);
    h = gethostbyname("127.0.0.1");

    bzero(&p,sizeof(p));
    p.sin_family = AF_INET;
    p.sin_addr.s_addr = htonl(INADDR_ANY);
    p.sin_addr.s_addr = ((struct in_addr*)(h->h_addr))->s_addr;
    p.sin_port = htons(8080);

    s = socket (AF_INET,SOCK_STREAM,0);
    connect (s,(void*)&p,sizeof(p));
    n = write (s,str,strlen(str));
    int idx = 0;
    do {
        n = read (s,buf,5);
        idx += n;
        printf(".");
        fflush(stdout);
        write (fd,buf,n);
    } while (n > 0);
    close (fd);
    close (s);
} 
```

编译：

1.  打开终端
2.  gcc -o 服务器 server.c
3.  gcc -o 客户端客户端.c

将服务器运行为`./server`. 然后复制`rngoidiot.txt`，运行客户端，`./client rngoidiot.txt`文件将使用 TCP/IP 复制。简单的组合;-)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-29T04:34:23.127

A client-server architecture should be fine for sending files. The "server" is simply the program that starts first, and waits for the other (the client) to connect to it. Past there, there's not a lot of difference between the two. In a lot of cases, it's easiest to write the code so it automatically attempts to contact a server, and if it can't find one, it sets itself up as the server.

Also note that making things work across the internet with (particularly) NAT routers involved can make the code a little trickier. It's not all that tough if you pre-configure the firewall to allow the connection(s), but otherwise you typically end up using UPnP to establish the connection through the firewall. That can easily double the work compared to doing the job locally without NAT involved.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-29T04:38:09.933

In short: Yes, sockets are the way to go.

"Server" and "client" in the sockets sense are generic terms - your system is running a variety of both at any given time. For example, your web browser operates as an HTTP client (where HTTP is a text-bounded mostly-synchronous protocol running over TCP/IP); Windows file sharing and remote desktop are "servers" that other systems connect into.

The distinction between server and client in the sockets sense (really in the TCP/IP sense) is that a "server" socket listens for incoming connections from remote systems (refer to MSDN or man pages on bind(), listen(), accept()) whereas a "client" socket creates outgoing connections to remote systems (connect()).

Beware that sockets programming can be a bit tricky. What you describe is a good learning exercise, but if you're trying to get something done quickly, you might look at existing tools such as netcat.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-29T04:22:14.423

> 似乎仅用于服务器和客户端之间的通信

所以呢？将一台计算机（即将接收文件）作为服务器。在该计算机上创建一个套接字并使其侦听端口上的连接。一旦连接到达，根据一些定义的结构获取数据（见下文）

发送方计算机（客户端）将连接到另一台计算机，它知道 IP 地址和端口号。（客户端必须知道这两者才能进行连接）。建立连接后，它将以字节序列的形式将数据发送到服务器。

**结构**：

在这里进行通信的两台计算机必须具有明确定义的结构，并且两者都知道并接受。最简单的结构将是：

```
|Length-Of-Data | Data ......  |
 <-- 4 bytes---> <-- n bytes--> 
```

`n`从前 4 个字节开始读取。这里的`4`字节 ( `n`) 代表数据的长度，可能会有所不同，这是您的定义。

对于文件名、文件类型等，您可以拥有更多“字段”（取决于功能）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-29T04:26:00.960

如果你想通过互联网发送文件，你必须使用套接字，或者更好的其他用套接字实现的高级库。

在 TCP 套接字术语中，客户端和服务器之间没有太大区别：通信是两种方式。唯一的区别在于谁在侦听传入连接（绑定、侦听、接受），以及谁在启动连接（打开）。

你提到了 Winsock，这意味着你在 Windows 上工作。查看 Windows API，您可能会找到一些处理文件传输的高级库（如 FTP 或 HTTP 库）。

也许不符合您的要求，但您也可以将共享文件夹用于 LAN 和 Dropbox 同步的文件夹用于 Internet ......然后只需使用标准 IO。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-29T04:27:09.513

一般来说，任何文件传输都需要某种服务器/客户端连接。一台计算机需要启动连接，另一台计算机需要在另一端侦听连接，然后执行第一台计算机指示的操作。

虽然您当然可以使用套接字推出自己的客户端和服务器软件，但取决于您想要在哪些类型的计算机之间传输文件，利用一些现有的客户端/服务器协议可能是最有意义的。一些更流行的可能性包括 ssh、http 或 ftp。我认为所有这些协议都应该存在 C/C++ 库。

如果没有更多信息，我会倾向于使用 ssh。安装一个 ssh 服务器应该不会太难，所以你只需要编写客户端软件，我认为为此存在一些非常好的开源库。

编辑：[libssh](http://www.libssh.org/)看起来不错！

# ruby-on-rails - 渲染 json: 时如何添加分组头？

> ID：11255980
> 
> 赞同：0
> 
> 时间：2012-06-29T04:15:06.927
> 
> 标签：ruby-on-rails, json, restkit

在控制器中：

```
if @topic.save
  render json: @topic, status: :updated, location: @topic
else
  render json: @topic.errors, status: :unprocessable_entity
end 
```

有错误的地方，json响应是这样的：

```
{"topic_id":["has already been taken"]} 
```

如何向错误 json 响应添加分组前缀，以便更容易在客户端 (RestKit) 路径映射上进行解析？例如：

```
{"errors":[{"topic_id":["has already been taken"]}]} 
```

# matlab - MATLAB 实验室工作人员分配的内存

> ID：11255983
> 
> 赞同：1
> 
> 时间：2012-06-29T04:15:29.373
> 
> 标签：matlab, parallel-processing, shared-memory

我想知道当我们运行`spmd`块并创建单独的实验室工作人员时，那么分配给他们每个人的内存是多少？我有一台 8 核机器，我使用了 8 个实验室工作人员。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T07:45:14.583

当您使用`matlabpool`Parallel Computing Toolbox 中的命令启动工作进程时，每个工作进程都会启动相同的 - 它们本质上是一个普通的 MATLAB 进程，但没有可见的桌面。当您在它们上创建数组时，它们会消耗内存。例如，在以下情况下，每个工作人员使用相同数量的内存来存储`x`：

```
spmd
    x = zeros(1000);
end 
```

但在以下情况下，每个工作人员消耗不同数量的内存来存储他们的副本`x`：

```
spmd
    x = zeros(100 * labindex);
end 
```

# javascript - FB Connect 对话框不关闭

> ID：11255986
> 
> 赞同：1
> 
> 时间：2012-06-29T04:16:18.880
> 
> 标签：javascript, facebook

当我单击我的 FB 登录按钮时，会弹出 FB 身份验证对话框。在我输入我的 FB 凭据后，对话框会重定向到这样的 url：

[https://www.facebook.com/dialog/permissions.request?wholeBunchOfQueryParameters](https://www.facebook.com/dialog/permissions.request?wholeBunchOfQueryParameters)

或者，如果我已经登录 FB，弹出对话框是：

[https://www.facebook.com/dialog/oauth?wholeBunchOfQueryParameters](https://www.facebook.com/dialog/oauth?wholeBunchOfQueryParameters)

但那些是保持打开状态的空白对话框。一旦我关闭对话框，回调就会发生，但直到那时才会发生。这是 IE 和 Chrome 上的行为。

我确实有这个工作正常，我认为当我有一台新电脑时它停止工作，所以它可能是环境问题。我认为从那时起它就起作用了，但也许没有。我恢复到我的代码版本，它正在工作，它也不再工作，因此进一步表明它是环境的，但我不知道它可能是什么。我可能会在杂草中离开。

另外，还有一点信息，我正在本地开发，所以我使用的是 localhost:port。我对这个问题进行了大量研究，确实看到有人说使用 127.0.0.1 而不是 localhost 所以我也尝试过，但没有任何区别。

知道为什么对话框不会关闭吗？

```
<fb:login-button perms="email,user_checkins" onlogin="afterFacebookConnect();" 
   autologoutlink="false" ></fb:login-button>
<div id="fb-root" style="display:inline; margin-left:20px;"></div>

<script language="javascript" type="text/javascript">
window.fbAsyncInit = function () {
    FB.init({ appId: 'myAppId',
        status: true, cookie: false, xfbml: true
    });
};

function afterFacebookConnect() {
    FB.getLoginStatus(function (response) {
        alert("Hi");
        var access_token = FB.getAuthResponse()['accessToken'];
        if (response.authResponse) {
            window.location = "../Account/FacebookLogin?token=" +
                   access_token;
        } else {
            alert(FB.getAuthResponse);
        }
    });
};
function logout() {
    FB.getLoginStatus(function (response) {
        var access_token = FB.getAuthResponse()['accessToken'];
        if (response.authResponse) {
            window.location = "../Account/Logout";
        } else {
            // user clicked Cancel
        }
    });    
};
$(document).ready(function () {
    if (document.getElementById('fb-root') != undefined) {
        var e = document.createElement('script');
        e.type = 'text/javascript';
        e.src = document.location.protocol + '//connect.facebook.net/en_US/all.js';
        e.async = true;
        document.getElementById('fb-root').appendChild(e);
    }
});
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-01T02:41:14.080

这是最近几天出现的一个已知错误（请参阅[https://developers.facebook.com/bugs/241915819261223](https://developers.facebook.com/bugs/241915819261223)）。

好消息是 FB 的一位工程师刚刚声明了以下内容，所以我们应该很快就会看到这个问题得到解决：

> 我们对此问题进行了修复，并将很快推出。敬请关注。

# objective-c - 像选框一样连续滚动UILabel

> ID：11255988
> 
> 赞同：10
> 
> 时间：2012-06-29T04:16:20.357
> 
> 标签：objective-c, ios, cocoa-touch, uilabel, marquee

以下是我水平滚动 UILabel 使其显示为选框效果的代码。但是动画从中心的标签开始并滚动到它的宽度，然后再次从中心开始统计。我想要从左到右像选框一样连续滚动。任何人都可以帮助我。

```
-(void)loadLabel{

    if (messageView) {
        [messageView removeFromSuperview];
    }

    NSString *theMessage = text;
    messageSize = [theMessage sizeWithFont:font];
    messageView = [[UIView alloc] initWithFrame:CGRectMake(0, 0, messageSize.width, 916)]; //x,y,width,height
    [messageView setClipsToBounds:NO]; // With This you prevent the animation to be drawn outside the bounds.
    [self.view addSubview:messageView];
    lblTime = [[RRSGlowLabel alloc] initWithFrame:CGRectMake(0, 0, messageSize.width, 916)]; //x,y,width,height
    [lblTime setBackgroundColor:[UIColor yellowColor]];
    lblTime.font = font;
    [lblTime setText:theMessage];
    lblTime.glowOffset = CGSizeMake(0.0, 0.0);
    lblTime.glowAmount = 90.0;
    lblTime.glowColor = color;
    [lblTime setClipsToBounds:NO];
    [lblTime setTextColor:color];
    [lblTime setTextAlignment:UITextAlignmentLeft];
    lblTime.frame = messageView.bounds ; //x,y,width,height
    [messageView addSubview:lblTime];

    [UIView beginAnimations:nil context:NULL];
    [UIView setAnimationDuration:speed];

    [UIView setAnimationRepeatCount:HUGE_VALF];
    [UIView setAnimationTransition:UIViewAnimationTransitionNone forView:messageView cache:YES];
    lblTime.frame = CGRectMake(-messageSize.width, 45, messageSize.width, 916); //x,y,width,height
    [UIView commitAnimations];
} 
```

# java - 不同布局的Android onclicklistener，我一直失败

> ID：11255991
> 
> 赞同：0
> 
> 时间：2012-06-29T04:16:53.490
> 
> 标签：java, android, layout, onclicklistener

我已经在互联网上彻底搜索了答案，并尝试了不同的设置，但我就是无法让它工作。问题是，我不完全确定要搜索什么，以及如何正确地制定它，无论如何，我的问题是：

我的设置是：在 Eclipse 中为 android 2.1 开发。

我想在不同的布局中添加一个 onclicklistener。我有 2 种不同的布局，main.xml 和 ChiOverview.xml。我必须在 main.xml 文件中设置按钮（imagebutton1 和 imagebutton2），以及 4 个按钮（其中一个是 ChIdentifierbutton）。当为 ChIdentifierbutton 制作 onclicklistener 时，它的布局不同，我的应用程序崩溃。

这是我的 ChIdentifierActivity，java 的源代码：

```
 package feldballe.FPConsult;

    import android.app.Activity;
    import android.hardware.Camera;
    import android.os.Bundle;
    import android.view.View;
    import android.view.View.OnClickListener;
    import android.widget.FrameLayout;
    import android.widget.ImageButton;
    import android.widget.ImageView;
    import android.widget.SeekBar;

    public class ChIdentifierActivity extends Activity {
        /** Called when the activity is first created. */
        ImageButton imageButton;
        ImageButton imageButton2;
        ImageButton imageButton3;
        Preview preview;
        CameraDemo camerademo;
        SeekBar ChIdentifierBar;
        ImageView imageViewChi;

        @Override
        public void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);
            setContentView(R.layout.main);
            addListenerOnButton();
        }

        public void addListenerOnButton() {          
            imageButton = (ImageButton) findViewById(R.id.imageButton2);
            imageButton.setOnClickListener(new OnClickListener() {

                public void onClick(View arg0) {
                   setContentView(R.layout.chioverview);
                }
            });

            imageButton2 = (ImageButton) findViewById(R.id.imageButton1);
            imageButton2.setOnClickListener(new OnClickListener() {

                public void onClick(View arg0) {
                   setContentView(R.layout.yuwrong);
                }
            });

            imageButton3 = (ImageButton) findViewById(R.id.ChIdentifierButton);
            imageButton3.setOnClickListener(new OnClickListener() {

                public void onClick(View chioverview) {
                   setContentView(R.layout.yuwrong);
                }
            });     
    }
} 
```

我的 main.xml：

```
 <?xml version="1.0" encoding="utf-8"?>
    <RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <TextView
        android:id="@+id/textView1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentTop="true"
        android:layout_centerHorizontal="true"
        android:layout_marginTop="46dp"
        android:text="@string/pushChi"
        android:textAppearance="?android:attr/textAppearanceLarge" />

    <ImageButton
        android:id="@+id/imageButton1"
        android:layout_width="150dp"
        android:layout_height="150dp"
        android:layout_alignParentLeft="true"
        android:layout_below="@+id/textView1"
        android:src="@drawable/mainchi" />

    <ImageButton
        android:id="@+id/imageButton2"
        android:layout_width="150dp"
        android:layout_height="150dp"
        android:layout_alignParentRight="true"
        android:layout_alignTop="@+id/imageButton1"
        android:src="@drawable/realchi" />

    <TextView
        android:id="@+id/textView2"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentTop="true"
        android:layout_centerHorizontal="true"
        android:text="@string/weucom"
        android:textAppearance="?android:attr/textAppearanceLarge" />

    </RelativeLayout> 
```

我的 chioverview.xml：

```
 <?xml version="1.0" encoding="utf-8"?>
   <RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
   android:layout_width="fill_parent"
   android:layout_height="fill_parent"
   android:orientation="vertical" >

   <Button
       android:id="@+id/ChiFunfactsButton"
          android:layout_width="wrap_content"
       android:layout_height="wrap_content"
       android:layout_centerVertical="true"
       android:text="@string/ChiFunfacts" />

   <Button
       android:id="@+id/ChiCalButton"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_above="@+id/ChiFunfactsButton"
        android:text="@string/ChiCalendar" />

    <Button
        android:id="@+id/ChIdentifierButton"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_above="@+id/ChiCalButton"
        android:text="@string/ChIdentifier2" />

    <Button
        android:id="@+id/ChiPhotosButton"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_below="@+id/ChiFunfactsButton"
        android:text="@string/ChiPhotos" />

    <TextView
        android:id="@+id/textView1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_above="@+id/ChIdentifierButton"
        android:layout_centerHorizontal="true"
        android:layout_marginBottom="26dp"
        android:text="@string/WhereYuWannaGo"
        android:textAppearance="?android:attr/textAppearanceLarge" />

    </RelativeLayout> 
```

这是我的日志：

```
06-29 04:43:23.566: I/dalvikvm(1043): threadid=3: reacting to signal 3
06-29 04:43:23.837: I/dalvikvm(1043): Wrote stack traces to '/data/anr/traces.txt'
06-29 04:43:24.096: I/dalvikvm(1043): threadid=3: reacting to signal 3
06-29 04:43:24.157: I/dalvikvm(1043): Wrote stack traces to '/data/anr/traces.txt'
06-29 04:43:24.209: D/gralloc_goldfish(1043): Emulator without GPU emulation detected.
06-29 04:43:32.436: D/AndroidRuntime(1043): Shutting down VM
06-29 04:43:32.436: W/dalvikvm(1043): threadid=1: thread exiting with uncaught exception (group=0x409c01f8)
06-29 04:43:32.446: E/AndroidRuntime(1043): FATAL EXCEPTION: main
06-29 04:43:32.446: E/AndroidRuntime(1043): java.lang.ClassCastException: android.widget.Button cannot be cast to android.widget.ImageButton
06-29 04:43:32.446: E/AndroidRuntime(1043):     at feldballe.FPConsult.ChIdentifierActivity$1.onClick(ChIdentifierActivity.java:50)
06-29 04:43:32.446: E/AndroidRuntime(1043):     at android.view.View.performClick(View.java:3511)
06-29 04:43:32.446: E/AndroidRuntime(1043):     at android.view.View$PerformClick.run(View.java:14105)
06-29 04:43:32.446: E/AndroidRuntime(1043):     at android.os.Handler.handleCallback(Handler.java:605)
06-29 04:43:32.446: E/AndroidRuntime(1043):     at android.os.Handler.dispatchMessage(Handler.java:92)
06-29 04:43:32.446: E/AndroidRuntime(1043):     at android.os.Looper.loop(Looper.java:137)
06-29 04:43:32.446: E/AndroidRuntime(1043):     at android.app.ActivityThread.main(ActivityThread.java:4424)
06-29 04:43:32.446: E/AndroidRuntime(1043):     at java.lang.reflect.Method.invokeNative(Native Method)
06-29 04:43:32.446: E/AndroidRuntime(1043):     at java.lang.reflect.Method.invoke(Method.java:511)
06-29 04:43:32.446: E/AndroidRuntime(1043):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
06-29 04:43:32.446: E/AndroidRuntime(1043):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
06-29 04:43:32.446: E/AndroidRuntime(1043):     at dalvik.system.NativeStart.main(Native Method)
06-29 04:43:33.056: I/dalvikvm(1043): threadid=3: reacting to signal 3
06-29 04:43:33.076: I/dalvikvm(1043): Wrote stack traces to '/data/anr/traces.txt' 
```

请帮帮我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T05:01:53.427

尝试这个...

当我跟踪您的错误日志时..我发现了这个

`java.lang.ClassCastException: android.widget.Button cannot be cast to` `android.widget.ImageButton`

您**在布局中使用了 Button**，并且正在**将其转换为类中的 ImageButton**。

在你的布局中使用 ImageButton，或者在你的类中使用 Button 来使它工作......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T04:28:33.397

查看我编辑的代码：

```
import android.app.Activity;
import android.hardware.Camera;
import android.os.Bundle;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.FrameLayout;
import android.widget.ImageButton;
import android.widget.ImageView;
import android.widget.SeekBar;

public class ChIdentifierActivity extends Activity {
/** Called when the activity is first created. */

ImageButton imageButton;
ImageButton imageButton2;
ImageButton imageButton3;

Preview preview;
CameraDemo camerademo;

SeekBar ChIdentifierBar;
ImageView imageViewChi;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    addListenerOnButton();
}

public void addListenerOnButton() {

    imageButton = (ImageButton) findViewById(R.id.imageButton2);

    imageButton.setOnClickListener(new OnClickListener() {

        public void onClick(View arg0) {
           setContentView(R.layout.chioverview);
           imageButton3 = (ImageButton) findViewById(R.id.ChIdentifierButton);
           imageButton3.setOnClickListener(new OnClickListener() {

              public void onClick(View chioverview) {
              setContentView(R.layout.yuwrong);

           }

           }); 
        }

       });

    imageButton2 = (ImageButton) findViewById(R.id.imageButton1);

    imageButton2.setOnClickListener(new OnClickListener() {

        public void onClick(View arg0) {
           setContentView(R.layout.yuwrong);

        }

    });

}
} 
```

希望这可以帮助你..

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-02T13:05:19.047

这是你的问题

您的 findViewById() 函数会查找 ID 为“R.id.ChIdentifierButton”的 ImageButton

```
ImageButton imageButton3;    
imageButton3 = (ImageButton) findViewById(R.id.ChIdentifierButton);
        imageButton3.setOnClickListener(new OnClickListener() {

            public void onClick(View chioverview) {
               setContentView(R.layout.yuwrong);
            }
        }); 
```

当您将“R.id.ChIdentifierButton”分配给 xml 中的按钮时

```
 <Button
    android:id="@+id/ChIdentifierButton"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_above="@+id/ChiCalButton"
    android:text="@string/ChIdentifier2" /> 
```

因此，类转换异常:-)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-29T05:27:02.213

> 图像按钮图像按钮；
> 
> 图像按钮 imageButton2;
> 
> 图像按钮 imageButton3;

根据您的日志，您可能正在将 Button 转换为 ImageButton。您可以粘贴 main.xml 的代码吗？

# javascript - 数据未通过 java servlet 的问题

> ID：11255992
> 
> 赞同：0
> 
> 时间：2012-06-29T04:16:55.660
> 
> 标签：javascript, google-app-engine, jquery, servlets

我正在尝试使用 jquery ajax 简单地将一些罐装 json 发布到 servlet。我正在使用谷歌应用引擎。我在调试器中捕获调用并检查请求，但它的参数映射始终为空......

任何帮助是极大的赞赏！

这是ajax调用

```
 $.ajax({ url: "/UDF/register",
                    type: "POST",
                    data:  xx={"a" : "s"},
                    dataType : 'json'  }); 
```

我在映射了 url 的 servlet 中捕获了 doPost，我查看了请求参数（也许我在错误的地方寻找？）并且它们为空。

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T04:42:07.190

问题是我在请求对象上查看错误的参数映射。如果我无缘无故地把任何人带到这里，我很抱歉。

# php - 将变量添加到数据库而不替换当前值？

> ID：11255993
> 
> 赞同：0
> 
> 时间：2012-06-29T04:17:05.223
> 
> 标签：php, mysql

我正在尝试做一个 MySQL 查询，它以一种不会覆盖其当前值的格式将信息添加到数据库，而是将其附加到 Friends 列中将有friend1、friend 2、friend 3 ...等。

首先，我不确定 INSERT INTO 是否正确：

```
$username = $_SESSION['username'];

mysql_query("INSERT INTO members (friends) WHERE username = $username
    VALUES ('$friendtoadd')"); 
```

我想做的是让这做两件事

1）以提到的格式添加朋友，以便以后可以调用如果会话中设置的 $username 是活动的，那么页面上发布的结果仅来自他们的朋友列中包含的其他用户。

2）如果 $friendtoadd 已经存在于他们的朋友列中，那么它什么也不做。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-29T04:19:49.763

```
UPDATE members SET friends = CONCAT_WS(', ', friends, '$friendtoadd') where username = '$username' 
```

我希望`$friendtoadd`以及`$username`通过 mysql_real_escape_string 进行消毒

而且，这个设计也不是很好。你应该有一个单独的朋友桌，所以

```
table friend
id (auto increment), userID, name)

then do 
Insert into friend SET userID = $userID, name = '$friendName' 
```