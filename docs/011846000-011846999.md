# StackOverflow 问答 11846000-11846999

# algorithm - 积分解数

> ID：11846001
> 
> 赞同：2
> 
> 时间：2012-08-07T12:28:29.680
> 
> 标签：algorithm, combinations

来自 MS f2f 面试的面试问题：

确定积分解的个数

`x1 + x2 + x3 + x4 + x5 = N`

在哪里`0 <= xi <= N`

所以基本上我们需要在最多 5 个部分中找到 N 的分区数 假设用纸和铅笔来解决。虽然没有取得太大进展，有人对此有解决方案吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-07T12:34:51.577

假设数字严格 > 0。
考虑一个整数段**[0, N]**。问题是将它分成**4**个正长度的段。想象一下，我们通过在相邻数字之间放置 4 个分隔点来做到这一点。有多少种方法可以做到这一点？**C(N-1, 4)**。
现在，一些数字可以是 0-s。让**k**是非零数字的数量。我们可以以**C(5,k)**种方式选择它们，每种方式都有**C(N-1,k)**种分裂。**将[0,5]**范围内的所有**k**累加，我们得到**Sum[ C(5,k) * C(n-1,k);** **k = 0 到 5]**

 ***** * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-07T13:04:52.170

@Grigor Gevorgyan 确实提供了找出解决方案的正确方法。

想想什么时候

```
1 <= xi 
```

这正好将 N 个点分成 5 段。它相当于在 N-1 个可能的位置（相邻数字之间）中插入 4 个“分割点”。所以答案是 C(N-1,4)

那么什么时候

```
0 <= xi 
```

?

如果你有 X+5 个点的解

```
1 <= xi 
```

谁的答案是`C(N-1,4)=C(X+5-1,4)=C(X+4,4)`

然后你只需从每组中删除一个点，你就有了 X 个点的解，

```
0 <= xi 
```

这意味着，现在的答案完全等于`C(X+4,4)`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-07T13:10:28.467

[Topcoder 教程](http://community.topcoder.com/tc?module=Static&d1=tutorials&d2=combinatorics)

寻找“结合重复”部分：具体案例在该部分下用图解说明进行说明。（一张图值得几句话！）

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-07T13:12:36.577

[你在这里](http://www.physicsforums.com/showthread.php?t=428074)有答案。

这是经典问题-

将 N 个球放入 M 个盒子的选项数 = c(M+N-1,N)。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-07T13:20:26.390

如果要求笔和纸解决方案，则组合解决方案更合适。这也是经典的解决方案。这是一个动态编程解决方案。

让`dp[i, N] = number of solutions of x1 + x2 + ... +xi = N`.

让我们来看看`x1 + x2 = N`：

我们有解决方案：

```
0 + N = N
1 + N - 1 = N
...
N + 0 = N 
```

所以`dp[2, N] = N + 1`解决方案。

让我们来看看`x1 + x2 + x3 = N`：

我们有解决方案：

```
0 + (0 + N) = N
0 + (1 + N - 1) = N
...
0 + (N + 0) = N
... 
```

`N + 1`请注意，到目前为止有一些解决方案。继续：

```
1 + (0 + N - 1) = N
1 + (1 + N - 2) = N
...
1 + (N - 1 + 0) = N
... 
```

请注意，还有另一种`N`解决方案。继续：

```
...
N - 1 + (0 + 1) = N
N - 1 + (1 + 0) = N
=> +2 solutions
N + (0 + 0) = N
=> +1 solution 
```

所以我们有`dp[3, N] = dp[2, N] + dp[2, N - 1] + dp[2, N - 2] + ... + dp[2, 0]`.

还要注意`dp[k, 0] = 1`

由于矩阵的每一行都需要`N`求和，因此计算的复杂度`dp[k, N]`是`O(k*N)`，这与组合数学解决方案所需的一样多。

为了保持每一行的复杂性`O(N)`，存储`s[i] = sum of the first i elements on the previous row`. 使用的内存也可以减少到`O(N)`.****

# silverlight - 表达式混合 3 不会显示背景图像

> ID：11846007
> 
> 赞同：1
> 
> 时间：2012-08-07T12:28:38.333
> 
> 标签：silverlight, xaml, expression-blend

我正在使用 Expression blend 3 开发一个解决方案，但我遇到了一个问题，因为我的背景图像不会在设计时显示，在运行时我可以看到它们。

正如您在附图中看到的那样，堆栈面板中没有图像。

有针对这个的解决方法吗？

![图片](../Images/7882f8d7b629dcd8ad70d998095fcb52.png)

最好的问候，卢卡

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T09:52:16.203

在混合中，您应该能够将图像从项目文件夹拖放到工作区中，混合然后动态添加 xaml。如果它不在您的项目文件夹中，您应该创建一个图像文件夹并“添加现有项目”然后浏览到图像。

# php - 是否可以使用 php 从访问者那里获取时区？

> ID：11846015
> 
> 赞同：2
> 
> 时间：2012-08-07T12:28:59.807
> 
> 标签：php, date, datetime, time, timezone

或者这只能用javascript（客户端）来完成？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T12:31:37.600

有两种方法可以做到这一点。最明显的方法是使用 Javascript，因为它存在于客户端世界中。另一种方法是让用户在注册您的网站时指定他们的时区，然后您可以根据 GMT 进行一些后端操作以获取他们访问的实际时间。这当然有用户可以输入错误时区的缺陷。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-07T12:31:39.003

单独使用 PHP 是不可能的。但是您可以通过 JS 将 GET 参数设置为用户当前的时间戳，并将差异与服务器上生成的时间戳进行比较。这样您就可以计算服务器和客户端之间的时区差异。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-07T12:31:30.403

2个解决方案

1.  您可以尝试使用 javascript - 并使用 ajax 发送到您的脚本，但这不是 100% 准确的。
2.  您可以使用 GeoIP，然后匹配它以查看他的时区。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-07T12:33:00.657

没有办法只能在 Javascript 中完成。A`timezone`不包含在标题中。因此，它必须与类似的语言结合使用`PHP`。以下是一些解决方案：

[如何在 PHP 中获取访问者的时区？](https://stackoverflow.com/questions/1718935/how-do-i-get-a-visitors-time-zone-in-php)

[http://www.onlineaspect.com/2007/06/08/auto-detect-a-time-zone-with-javascript/](http://www.onlineaspect.com/2007/06/08/auto-detect-a-time-zone-with-javascript/)

# google-drive-api - Drive Console API 中的范围无效？

> ID：11846020
> 
> 赞同：1
> 
> 时间：2012-08-07T12:29:15.973
> 
> 标签：google-drive-api

我想在我的应用程序中使用 docs 范围。

```
https://docs.google.com/feeds/ 
```

为什么这个范围在进入 API 控制台时会导致无效条目异常？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T14:26:29.457

为什么要使用该范围，您可能不应该使用新代码。

如果您想测试范围，请转到[OAuth 2.0 Playground](https://code.google.com/oauthplayground/)。API 资源管理器可能不支持它。

# javascript - 在将图像保存到服务器之前检查图像大小

> ID：11846021
> 
> 赞同：0
> 
> 时间：2012-08-07T12:29:20.070
> 
> 标签：javascript, android, jquery, html

美好的一天，拜托我正在尝试编写一个应用程序，将我用相机拍摄的图像自动存储到数据库中。但是我想在保存之前检查图像大小（MB）。

我阅读了 android Camera.Capture 开发人员说明并知道我无法以编程方式调整大小。

另外我知道在上传到数据库之前存储在一个临时文件夹中是可能的，但我正在寻找一个不保存在临时文件夹中的文件夹。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T12:34:56.903

getRowBytes() * getHeight() 对我来说似乎工作正常。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T12:36:21.367

您的服务器无法知道图像的大小，除非它可以查看它。您可以使用 PHP 来限制最大上传大小。一旦您将服务器上的文件作为临时文件，您就可以更详细地分析它（尺寸等）。如果图像“好”，则将其移动到其永久位置（另一个目录或作为数据库 BLOB），如果不是，则将其删除。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-07T12:42:38.130

在您的相机 PictureCallback 中：

```
public void onPictureTaken(byte[] data, Camera camera)
{
  int nPictureSize = data.length;
} 
```

压缩图像的长度就是字节数组的长度

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-07T12:51:47.463

如果您使用的是自定义相机，那么在您的回调中，您将收到一个字节数组，只需获取该数组的长度并将其除以 1024*1024 即可获得以 MB 为单位的大小。

如果您使用的是相机意图，那么您将返回一个位图，其大小可以通过使用 bitmap.getRowbytes * bitmap.getHeight 找到，然后将其除以 1024*1024 以获得以 MB 为单位的图像大小

# file - 如何拦截 file:// 请求以提供目录列表？

> ID：11846022
> 
> 赞同：4
> 
> 时间：2012-08-07T12:29:22.843
> 
> 标签：file, firefox-addon, protocols, firefox-addon-sdk

我正在尝试将 Firefox 生成的目录列表替换为自定义列表。

所以，我需要三样东西：

1.  我需要知道 Firefox 何时尝试加载`file://`URI。
2.  我必须测试该 URI 是否针对目录或文件。
3.  如果 URI 的目标是目录，我必须阻止 Firefox 生成目录列表，而是显示我自己的目录列表。

这是最有问题的第一点：

*   我阅读了文档，`nsIObserverService`但它没有做我想要的（有`http-on-modify-request`但没有`file-on-modify-request`）
*   我尝试`addon-kit/page-mod`在`file://*`URI 上使用 Jetpack，但它似乎不允许我在加载我的东西之前验证 URI 是否针对目录。
*   我阅读了 的文档`nsIFileProtocolHandler`，但它对我没有帮助。

那么如何拦截`file://*`请求呢？

有人有想法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-07T13:04:01.033

> 我尝试在 file://* URI 上使用 Jetpack 的 addon-kit/page-mod，但它似乎不允许我在加载我的东西之前验证 URI 是否针对目录。

这是正确的。但是，您可以执行与模块相同的`page-mod`操作，即监听[`document-element-inserted`观察者通知](https://developer.mozilla.org/en-US/docs/Observer_Notifications#Documents)。这些方面的东西：

```
var events = require("sdk/system/events");
var urls = require("sdk/url");
events.on("document-element-inserted", function(event)
{
  var window = event.subject.defaultView;
  if (!window)   // XBL document?
    return;

  var url = urls.URL(window.document.URL);
  if (url.scheme == "file")
  {
    // A file:/// URL was loaded, do something with this window
  }
}); 
```

供参考：[`system/events`模块](https://developer.mozilla.org/en-US/Add-ons/SDK/Low-Level_APIs/system_events)，[`url`模块](https://developer.mozilla.org/en-US/Add-ons/SDK/High-Level_APIs/url)。

> 我必须测试该 URI 是否针对目录或文件。

该`url`模块还允许您获取文件路径，然后您可以使用该[`io/file`模块](https://developer.mozilla.org/en-US/Add-ons/SDK/Low-Level_APIs/io_file)访问它：

```
var files = require("sdk/io/file");
var path = urls.toFileName(url);
var isDir = files.exists(path) && !files.isFile(path); 
```

> 如果 URI 的目标是目录，我必须阻止 Firefox 生成目录列表，而是显示我自己的目录列表。

那是困难的部分。我认为您不能阻止 Firefox 生成目录列表，但调用`window.stop()`应该具有相同的效果。然后，您可以将自己的内容动态添加到窗口中。您可以使用`files.list(path)`方法获取目录条目列表：

```
window.stop();
var entries = files.list(path);
for (var i = 0; i < entries.length; i++)
  addEntry(window, path, entries[i]); 
```

# playn - 无法运行 playn 示例项目 - 编译错误

> ID：11846023
> 
> 赞同：6
> 
> 时间：2012-08-07T12:29:26.503
> 
> 标签：playn

我尝试按照 playn 入门页面上的说明进行操作，并在运行第一个程序 java 展示时遇到问题。右键单击并运行 Maven 测试时出现以下错误。此外，我在 Eclipse 的问题选项卡中遇到许多错误，这些错误与（无法从 yyy 传输 xxx）相关，其中 xxx 是一些 jar 文件，yyy 是 gwt 或 playn 网站

```
[INFO] Scanning for projects...
[INFO]                                                                         
[INFO] ------------------------------------------------------------------------
[INFO] Building PlayN Showcase Java 1.0-SNAPSHOT
[INFO] ------------------------------------------------------------------------
Downloading: http://snapshots.repository.codehaus.org/org/apache/maven/plugins/maven-surefire-plugin/2.10/maven-surefire-plugin-2.10.pom
Downloading: http://repo.maven.apache.org/maven2/org/apache/maven/plugins/maven-surefire-plugin/2.10/maven-surefire-plugin-2.10.pom
Downloaded: http://repo.maven.apache.org/maven2/org/apache/maven/plugins/maven-surefire-plugin/2.10/maven-surefire-plugin-2.10.pom (11 KB at 47.2 KB/sec)
Downloading: http://snapshots.repository.codehaus.org/org/apache/maven/surefire/surefire/2.10/surefire-2.10.pom
Downloading: http://repo.maven.apache.org/maven2/org/apache/maven/surefire/surefire/2.10/surefire-2.10.pom
Downloaded: http://repo.maven.apache.org/maven2/org/apache/maven/surefire/surefire/2.10/surefire-2.10.pom (12 KB at 118.8 KB/sec)
Downloading: http://snapshots.repository.codehaus.org/org/apache/maven/maven-parent/20/maven-parent-20.pom
Downloading: http://repo.maven.apache.org/maven2/org/apache/maven/maven-parent/20/maven-parent-20.pom
Downloaded: http://repo.maven.apache.org/maven2/org/apache/maven/maven-parent/20/maven-parent-20.pom (25 KB at 143.9 KB/sec)
Downloading: http://snapshots.repository.codehaus.org/org/apache/maven/plugins/maven-antrun-plugin/1.6/maven-antrun-plugin-1.6.pom
Downloading: http://repo.maven.apache.org/maven2/org/apache/maven/plugins/maven-antrun-plugin/1.6/maven-antrun-plugin-1.6.pom
Downloaded: http://repo.maven.apache.org/maven2/org/apache/maven/plugins/maven-antrun-plugin/1.6/maven-antrun-plugin-1.6.pom (5 KB at 52.2 KB/sec)
Downloading: https://oss.sonatype.org/content/repositories/snapshots/com/googlecode/playn/playn-showcase-core/1.0-SNAPSHOT/maven-metadata.xml
Downloading: http://forplay.googlecode.com/svn/mavenrepo/com/googlecode/playn/playn-showcase-core/1.0-SNAPSHOT/maven-metadata.xml
Downloading: http://forplay.googlecode.com/svn/mavenrepo/com/googlecode/playn/playn-showcase-core/1.0-SNAPSHOT/playn-showcase-core-1.0-SNAPSHOT.pom
Downloading: https://oss.sonatype.org/content/repositories/snapshots/com/googlecode/playn/playn-showcase-core/1.0-SNAPSHOT/playn-showcase-core-1.0-SNAPSHOT.pom
[WARNING] The POM for com.googlecode.playn:playn-showcase-core:jar:1.0-SNAPSHOT is missing, no dependency information available
Downloading: http://forplay.googlecode.com/svn/mavenrepo/jlayer/tritonus_share/1.0/tritonus_share-1.0.pom
[WARNING] Checksum validation failed, no checksums available from the repository for http://forplay.googlecode.com/svn/mavenrepo/jlayer/tritonus_share/1.0/tritonus_share-1.0.pom
Downloaded: http://forplay.googlecode.com/svn/mavenrepo/jlayer/tritonus_share/1.0/tritonus_share-1.0.pom (462 B at 0.7 KB/sec)
Downloading: http://forplay.googlecode.com/svn/mavenrepo/com/googlecode/playn/playn-showcase-core/1.0-SNAPSHOT/playn-showcase-core-1.0-SNAPSHOT.jar
Downloading: http://forplay.googlecode.com/svn/mavenrepo/jlayer/mp3spi/1.9.5/mp3spi-1.9.5.jar
Downloading: http://forplay.googlecode.com/svn/mavenrepo/jlayer/tritonus_share/1.0/tritonus_share-1.0.jar
[WARNING] Checksum validation failed, no checksums available from the repository for http://forplay.googlecode.com/svn/mavenrepo/jlayer/mp3spi/1.9.5/mp3spi-1.9.5.jar
Downloaded: http://forplay.googlecode.com/svn/mavenrepo/jlayer/mp3spi/1.9.5/mp3spi-1.9.5.jar (25 KB at 40.9 KB/sec)
[WARNING] Checksum validation failed, no checksums available from the repository for http://forplay.googlecode.com/svn/mavenrepo/jlayer/tritonus_share/1.0/tritonus_share-1.0.jar
Downloaded: http://forplay.googlecode.com/svn/mavenrepo/jlayer/tritonus_share/1.0/tritonus_share-1.0.jar (101 KB at 102.4 KB/sec)
Downloading: https://oss.sonatype.org/content/repositories/snapshots/com/googlecode/playn/playn-showcase-core/1.0-SNAPSHOT/playn-showcase-core-1.0-SNAPSHOT.jar
[INFO] ------------------------------------------------------------------------
[INFO] BUILD FAILURE
[INFO] ------------------------------------------------------------------------
[INFO] Total time: 6.155s
[INFO] Finished at: Tue Aug 07 08:01:22 EDT 2012
[INFO] Final Memory: 7M/112M
[INFO] ------------------------------------------------------------------------
[ERROR] Failed to execute goal on project playn-showcase-java: Could not resolve dependencies for project com.googlecode.playn:playn-showcase-java:jar:1.0-SNAPSHOT: Could not find artifact com.googlecode.playn:playn-showcase-core:jar:1.0-SNAPSHOT in forplay-legacy (http://forplay.googlecode.com/svn/mavenrepo) -> [Help 1]
[ERROR] 
[ERROR] To see the full stack trace of the errors, re-run Maven with the -e switch.
[ERROR] Re-run Maven using the -X switch to enable full debug logging.
[ERROR] 
[ERROR] For more information about the errors and possible solutions, please read the following articles:
[ERROR] [Help 1] http://cwiki.apache.org/confluence/display/MAVEN/DependencyResolutionException 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-08T05:34:39.860

你可以试试这个：

右键单击“playn-showcase”然后：运行方式-> Maven 安装

它应该正确检索所有依赖项。

下次要启动示例时，可以按照教程过程进行操作：

右键单击“playn-showcase-java”然后：运行方式-> Maven 测试

# javascript - 在 Opera 浏览器中替代文档启动

> ID：11846027
> 
> 赞同：0
> 
> 时间：2012-08-07T12:29:45.247
> 
> 标签：javascript, firefox-addon, dom-events, opera-extension

我在 Firefox 扩展（或用户脚本）中看到了“@run-at document-start”和“contentScriptWhen: 'start'”。

所有这些语句都用于运行一些脚本，而网页开始在 Firefox 中加载。

现在我想在 Opera 扩展（或用户脚本）的文档开始处运行我的脚本。

如何在 Opera 浏览器中捕获此启动事件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T21:17:04.400

你想要的实际上是opera用户javascript的默认行为。

*   问题 #1：*您的脚本**必须**具有 .js 扩展名，而不是 .user.js*
*   问题2：当你使用 .js 用户脚本时，你必须手动监听加载事件。

但是，恕我直言，您获得的权力的价格 - 并没有那么高；）

# assembly - 不能无错误跳转

> ID：11846028
> 
> 赞同：1
> 
> 时间：2012-08-07T12:29:46.380
> 
> 标签：assembly, operating-system, x86, boot, protected-mode

我有问题。最近几天我在玩 GDT、A20 和保护模式。我有这个简单的 GDT 代码：

```
gdt_start:
gdt_null:
    dd 00000000h
    dd 00000000h

gdt_code:
    dw 0xFFFF
    dw 0
    db 0
    db 10011010b
    db 11001111b
    db 00000000b

gdt_data:
    dw 0xFFFF       
    dw 0                
    db 0                
    db 10010010b            
    db 11001111b            
    db 0

gdt_end:
gdt_ptr:
    dw gdt_end - gdt_data - 1
    dd gdt_start

install_gdt:
    cli;
    pusha
    lgdt [gdt_ptr]
    sti
    popa

    ret 
```

如您所见，它非常简单。这是我的 A20 启用：

```
ena20:
    mov al, 0xDD
    out 0x64, al
    ret 
```

第二阶段代码的一部分：

```
 call install_gdt
    call ena20

    cli
    mov eax, cr0
    or eax, 1
    mov cr0, eax

    jmp 0x8:stage3
;-------------------------------------------
;STAGE3
;-------------------------------------------
BITS 32
stage3:
    ;mov ax, 0x10
    ;mov ds, ax
    ;mov ss, ax
    ;mov es, ax
    ;mov esp, 90000h

    ;mov edi, 0xB8000
    ;mov byte [edi], 'A'

    jmp $ 
```

我试着一步一步来。我可以成功地将 GDT 加载到它的寄存器中，启用 A20 并进入保护模式。但是当我尝试时`jmp 0x8:stage3`，我从 VirtualBox 收到错误：

```
A critical error has occurred while running the virtual machine and
the machine execution has been stopped. 
```

（虚拟机状态现在是'Guru Meditation'）有人知道问题出在哪里吗？我应该怎么做才能让它工作？请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T12:46:23.473

Here:

```
gdt_ptr:
    dw gdt_end - gdt_data - 1
    dd gdt_start 
```

Why is the GDT size from `gdt_data` to `gdt_end` and yet the start is at `gdt_start`?

Also, how about the real-mode segment in which the GDT is contained? How do you "include" it in the value of `gdt_start`?

Here:

```
 mov eax, cr0
    or eax, 1
    mov cr0, eax

    jmp 0x8:stage3

BITS 32
stage3: 
```

You want `stage3` in a segment whose base is 0 according to the relevant GDT entry. Is that the case? IOW, is the value of `stage3` equal to the physical address of the code at this label?

# python - 在 PyQt4 中自定义 WM_NAME 和 WM_CLASS（如 xprop 所示）

> ID：11846029
> 
> 赞同：7
> 
> 时间：2012-08-07T12:29:49.830
> 
> 标签：python, pyqt4

如何自定义字符串`WM_NAME`和程序`WM_CLASS`，`PyQt4`如图所示`xprop`？

考虑例如：

```
from PyQt4 import QtGui, QtCore
import sys

if __name__ == '__main__':

    app = QtGui.QApplication(sys.argv)
    app.setStyle("plastique")

    listView = QtGui.QListView()    
    listView.show()

    combobox = QtGui.QComboBox()
    combobox.show()    

    sys.exit(app.exec_()) 
```

如果我通过运行此（文件称为`xprop_test.py`）并为 ListView 或 ComboBox`python xprop_test.py`调用 linux 工具，它会显示`xprop`

```
WM_NAME(STRING) = "xprop_test.py" 
```

和

```
WM_CLASS(STRING) = "xprop_test.py", "Xprop_test.py" 
```

如何将字符串设置`WM_NAME`为`WM_CLASS`另一个自定义值（不同于文件名）？

如何为整个程序设置它？如何为每个单独的 GUI 元素调整它？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-07T17:50:28.757

该`WM_NAME`字符串只是标题栏标题，可以这样设置：

```
listView.setWindowTitle('listview') 
```

给予：

```
WM_NAME(STRING) = "listView" 
```

`WM_CLASS`更难影响。默认情况下，它是从 构造的`argv[0]`，并且似乎没有办法使用 Qt API 以编程方式更改它。`-name`但是，可以通过使用以下选项运行程序来更改字符串的第一部分：

```
python xprop_test.py -name FooBar 
```

给予：

```
WM_CLASS(STRING) = "FooBar", "Xprop_test.py" 
```

# ruby-on-rails - 在商店购买的人的设计

> ID：11846031
> 
> 赞同：0
> 
> 时间：2012-08-07T12:29:59.100
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.1

我正在尝试从人的角度为商店的步骤建模，并且需要模型设计方面的帮助以及如何实际实施“购买此产品/服务”部分。

到目前为止，我认为模型设计将是：

```
Person
  has_many :purchases

Purchase
  belongs_to :person
  belongs_to :product

Products
  belongs_to :store
  has_many :purchases 
```

一个人可以根据需要购买许多产品。

我想让“购买此产品”功能成为一个复选框，然后将其分配`Purchase`给产品，但如何完成？我的模型设计正确吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T12:35:01.780

我会假设模型应该更接近这个。

```
Service:  
belongs_to :store  
has_many :products  

Products:  
belongs_to :store  
has_many : purchases 
```

这背后的原因是，`Service`应该产生一个`Product`在现实世界中是否是有形商品并不重要（我认为）。例如，机械师提供`Service`汽车维修服务，最终`Product`是修理过的车辆。

**更新**

本质上需要发生的是你`Person`只需要一个`Collection`or `List`（我不知道 ruby​​ 数据类型，但它是一个标准的数据结构），它将是 type `Product`。当显示在 UI 上时，您只需遍历其中的所有`Products`内容，`Person`这些将是他们拥有的一切。现在，如果您的意思是`Person`拥有的所有东西都与总库存相交，这是一个稍微不同的问题。方法是相同的，只是您只需将两个产品列表（Person 拥有的那些和总库存中的一个）相交，然后您就会得到 Person 拥有的所有东西。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-07T13:17:25.473

您可以使用 使这更简单一些`through`，如果您实际上不需要 Purchase 作为模型，您可以只做一个 HABTM（个人`has_and_belongs_to_many`产品）。

```
Person
  has_many :purchases
  has_many :products, :through => :purchases

Purchase
  belongs_to :person
  belongs_to :product

Product
  has_many :purchases
  has_many :buyers, :through => :purchases, :class => 'Person' 
```

当一个人购买产品时，您可以记录以下内容：

```
@person.products << Product.find(100) 
```

相关采购将自动构建并保存。如果您想记录其他信息，例如购买时产品的价格，您可以创建`before_save`在购买模型中设置这些值的回调：

```
class Purchase < ActiveRecord::Base
  # ...
  before_save :record_price

  def record_price
    self.price = product.price
  end
end 
```

# python - 在 Pygame 中检测鼠标悬停在图像上

> ID：11846032
> 
> 赞同：7
> 
> 时间：2012-08-07T12:30:01.527
> 
> 标签：python, pygame, game-engine

我有一张图片：

```
newGameButton = pygame.image.load("images/newGameButton.png").convert_alpha() 
```

然后我将其显示在屏幕上：

```
screen.blit(newGameButton, (0,0)) 
```

如何检测鼠标是否正在触摸图像？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-08-08T06:36:29.053

用于[`Surface.get_rect`](http://www.pygame.org/docs/ref/surface.html#Surface.get_rect)获取[`Rect`](http://www.pygame.org/docs/ref/rect.html)描述你的边界[`Surface`](http://www.pygame.org/docs/ref/surface.html)，然后用于[`.collidepoint()`](http://www.pygame.org/docs/ref/rect.html#Rect.collidepoint)检查鼠标光标是否在 this[`Rect`](http://www.pygame.org/docs/ref/rect.html)中。

* * *

**例子：**

```
if newGameButton.get_rect().collidepoint(pygame.mouse.get_pos()):
    print "mouse is over 'newGameButton'" 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-07T13:01:58.837

我确信有更多的pythonic方法可以做到这一点，但这里有一个简单的例子：

```
button_x = 0
button_y = 0
newGameButton = pygame.image.load("images/newGameButton.png").convert_alpha()
x_len = newGameButton.get_width()
y_len = newGameButton.get_height()
mos_x, mos_y = pygame.mouse.get_pos()
if mos_x>button_x and (mos_x<button_x+x_len):
    x_inside = True
else: x_inside = False
if mos_y>button_y and (mos_y<button_y+y_len):
    y_inside = True
else: y_inside = False
if x_inside and y_inside:
    #Mouse is hovering over button
screen.blit(newGameButton, (button_x,button_y)) 
```

阅读更多关于 pygame 中的[鼠标](http://www.pygame.org/docs/ref/mouse.html)以及pygame 中的[表面](http://www.pygame.org/docs/ref/surface.html)。

[这里](https://stackoverflow.com/a/10888145/1393894)还有一个与此密切相关的示例。

# php - 如何获得像svn这样的html文本差异？

> ID：11846033
> 
> 赞同：0
> 
> 时间：2012-08-07T12:30:00.903
> 
> 标签：php, html, diff

我正在使用 PEAR text_diff 类来比较文本。它适用于纯文本，但是当我尝试将文本与 HTML 标签进行比较时，它给出了错误的结果

有什么方法可以比较两个 HTML 块并在结果显示文本中保留其 HTML 并显示差异，如 svn

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T12:32:28.877

我不确定您使用的是哪个操作系统，但我总是在 Ubuntu 上使用 Meld 来区分非版本化文件。区分 HTML 代码（或其他任何内容）没有任何问题：

[http://meldmerge.org/](http://meldmerge.org/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T12:38:29.093

根据我的经验，这两个很棒：

*   [https://github.com/cygri/htmldiff](https://github.com/cygri/htmldiff) (Python)
*   [http://www.w3.org/People/Bos/#jpegxmp（C](http://www.w3.org/People/Bos/#jpegxmp)，必须编译）

是的，没有一个程序是用纯 PHP 编写的。您只需通过 PHP 运行它们：

```
// Python script:
$html_diff = shell_exec ('python /path/to/htmldiff version1.html version2.html');
// C program:
$html_diff = shell_exec ('/path/to/htmldiff --start-delete="<span class=\'delete\'>" --end-delete="</span>" --start-insert="<span class=\'insert\'>" --end-insert="</span>" version1.html version2.html'); 
```

由于它们不是用 PHP 编写的，因此您可以享受令人难以置信的高速 :)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-08-07T12:40:01.583

您可以在 javascript 本身中正确执行此操作。查看[google-diff-match-patch](http://code.google.com/p/google-diff-match-patch/)。

差异演示[在这里](http://neil.fraser.name/software/diff_match_patch/svn/trunk/demos/demo_diff.html)。

# html - 样式表加载正常但没有 CSS

> ID：11846034
> 
> 赞同：2
> 
> 时间：2012-08-07T12:30:06.583
> 
> 标签：html, css, http, stylesheet

看看这里：[http ://ec2-122-248-199-2.ap-southeast-1.compute.amazonaws.com](http://ec2-122-248-199-2.ap-southeast-1.compute.amazonaws.com)

样式表似乎加载正常，但它们对页面没有任何影响。我不知道为什么。任何帮助，将不胜感激！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-07T12:33:22.107

HTTP 服务器声称编写的是 css 文件`text/plain`而不是`text/css`.

```
quentin@system:~ # curl -I http://ec2-122-248-199-2.ap-southeast-1.compute.amazonaws.com/stylesheets/layout.css | grep -i content-type
Content-Type: text/plain 
```

# knockout.js - Knockoutjs ObservableArray

> ID：11846035
> 
> 赞同：0
> 
> 时间：2012-08-07T12:30:07.347
> 
> 标签：knockout.js, ko.observablearray

下面的代码片段——导致一个空的列表框。谁能告诉我做错了什么？

```
<script src="/Scripts/knockout-2.1.0.debug.js"></script>
<script type="text/javascript">
var listEditorVM = function () {
    this.allItems = ko.observableArray(["Apple", "Banana", "Orange"]);
    alert(this.allItems().length);
};
ko.applyBindings(new listEditorVM());

</script>

<div>List items:</div>
<select multiple="multiple" data-bind="options: allItems"></select> 
```

作品是 jsFiddle——不在浏览器中

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-07T13:48:29.893

你需要`ko.applyBindings`在你的 DOM 准备好之后调用。您可以通过将该脚本块移动到页面底部或在类似 jQuery 的[ready](http://api.jquery.com/ready/)函数中调用它来做到这一点。

默认情况下，jsFiddle 将运行你的 js 代码“onload”，所以它会在你的元素存在之后发生。

# vba - 将实现 ATL 接口的 VBA 类传递给 ATL 方法

> ID：11846036
> 
> 赞同：1
> 
> 时间：2012-08-07T12:30:07.243
> 
> 标签：vba, dll, interface, atl, address-operator

**编辑 ：**

我有一个 ATL 简单对象 MyATLObject，只有一种方法：

```
STDMETHODIMP CMyATLObject::EVAL( DOUBLE* x, long AddressOfFunc )
{
*x = toto<FCTPTR>(*((FCTPTR) AddressOfFunc)) ;
return S_OK;
} 
```

其中 toto 是由定义的模板函数

```
#pragma once

template<typename F>
double toto( F f )
{
    return f(0.0) ;
} 
```

其中 FCTPTR 定义为

typedef double (__stdcall * FCTPTR)( double );

我的 ATL 方法使用 double x 来存储 toto 的结果，而 long AddressOfFunc 是 VBA 函数的 AddressOf。

这通过地址将 VBA 函数传递给 ATL 方法。这太可怕了。否则，它如何能够做同样的事情——将 VBA 函数传递给 ATL 方法，例如通过在 ATL 端定义一个接口？

非常感谢。

///////////////////////////////////////// ///////////////////////////////////////// ///////////////////////////////////////// ////////////////////////////

**我的问题的第一个版本：**

我实际上是在做以下事情：创建一个 ATL/COM 项目，向其中添加一个名为 MyATLObject 的“简单 ATL 对象”：

1）在idl文件中：

```
interface IMyATLObject : IDispatch{
[id(1), helpstring("method EVAL")] HRESULT EVAL(DOUBLE* x, long AddressOfFunc) ;
}; 
```

2 在 MyATLObject.h 文件中：

一个

```
#include "MyStupidEvaluator.h" 
```

和一个

```
typedef double (__stdcall * FCTPTR)( double ); 
```

课外，课内

```
public:
STDMETHOD(EVAL)(DOUBLE* x, long AddressOfFunc) ; 
```

最后在 MyATLObject.cpp 文件中：

```
STDMETHODIMP CMyATLObject::EVAL( DOUBLE* x, long AddressOfFunc )
{
*x = toto<FCTPTR>(*((FCTPTR) AddressOfFunc)) ;
return S_OK;
} 
```

MyStupidEvaluator.h 包含：

```
#pragma once

template<typename F>
double toto( F f )
{
    return f(0.0) ;
} 
```

这只是一个模板函数，它返回任何函数对象的零值，即承认 () 运算符的类型名（或类）。

现在，这在编译后给了我一个 dll。

这就是 c++ 部分的全部内容。现在，我在 VBA 和 VBA 中引用了这个 dll：

a) 我定义了一个函数

```
Public Function F(ByVal x As Double) As Double

    F = x * x - 2 * x + 1

End Function 
```

b) 和一个子

```
 Public Sub Draft1()

        Dim ENGINE As MyTestProjectLib.MyATLObject
        Set ENGINE = New MyTestProjectLib.MyATLObject
        Dim x As Double
        x = 0#

        Call ENGINE.EVAL(x, AddressOf F)
        Sheets("Test1").Range("Value_at_0").Offset(0, 0).Value = x

    End Sub 
```

c) 执行这个子程序会给我，在工作表“Test1”的 V“alue_at_0”（这里只是一个单元格）范围内，函数 F 的 0.0 处的值。

我总是这样工作：toto 模板函数在这里是微不足道的（评估为 0.0），但通常它可能是一个数值积分例程，或者是一个求根例程，需要 c++ 来提高速度；由于 AddressOf VBA 关键字，我一直通过它们的地址传递 VBA 函数：这给了我一个 long，我将它传递给我的 ATL 方法 EVAL，我将这个 long 转换为函数指针 (FCTPTR) p，然后应用我的例程“ toto" 到 *p，这给了我一个双倍，我将它传递回我的 ATL 方法。

这很酷，一切正常，但是......我觉得这太糟糕了！而且真的很不雅。这就是为什么我想做以下事情：

在 ATL 端“以某种方式”设计一个接口，一个

```
interface IMyFunction : IDispatch 
```

这将由 VBA 类 VBAClass1 在 VBA 中实现（通过 VBA 的实现），并将该 VBA 类的实例传递给我以前的 VBA 方法的新版本，以在 0.0 处执行评估。

我的问题是：我根本不是 ATL 方面的专家，也不是界面创建方面的专家：我已经成功地在界面创建方面做了真正愚蠢/琐碎的事情，好吧，但我真的不知道如何设计界面做我想做的是：

ATL 中的一个接口（根据定义，它只有方法，通过 ATL 构造！）将具有“某物”扮演类成员的角色，成员跟踪 VBA 函数仍将通过 ATL 传递给他方法。

任何帮助将不胜感激，伙计们。

这是我第一次来这里，如果消息不是完美/最佳形式，请提前道歉。

先感谢您。

拉夫

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T14:10:47.677

您应该重新考虑有关`AddressOfFunc`参数和回调地址的所有内容。当你设计 COM 接口并且你想提供一个回调时，你需要传递一个可调用的 COM 接口指针作为参数（[相关讨论](http://www.wilmott.com/messageview.cfm?catid=10&threadid=91874)），以便 COM 类会回调它的方法——这需要你的 VBA 类实现这个接口（[相关问题](https://stackoverflow.com/questions/3171324/implementing-my-own-interface-in-vba-error-object-module-needs-to-implement)）。如果您不想在 VBA 端实现接口，另一种选择是设计带有事件（[连接点](http://msdn.microsoft.com/en-us/library/7bkz4x17%28v=vs.71%29.aspx)）的 ATL COM 类，以便 COM 类会触发一个事件，而您的调用者将在那里处理它并执行回调活动。

函数的普通地址在这里是行不通的，当你不得不强制转换东西以使它们甚至可以编译时，你应该怀疑它。

**升级版**。这提供了如何回调 VB 代码的示例：[从 C++/ATL 类实现 VBScript（VB6、VBA）回调的三种方法](http://alax.info/blog/1381)

# sql - 从 URL 生成报告 - SQL Server Reporting Services 2008

> ID：11846037
> 
> 赞同：14
> 
> 时间：2012-08-07T12:30:09.770
> 
> 标签：sql, sql-server-2008, ssrs-2008, reporting-services

我有 SQL Server Reporting Services 2008，当我打开以下 URL 时：

> “http://localhost/Reports/Pages/Report.aspx?someReport”

我得到报告屏幕，我在其中填写参数并生成报告，

我的问题是如何在没有任何 GUI 的情况下做到这一点？通过批处理文件或 C# 脚本..

提前致谢。

==================================================== ========================

**编辑：**

感谢以上所有答案，我成功生成报告并将其保存为 XML 使用以下链接：

> “http://Server/ReportServer/Pages/ReportViewer.aspx?someReport&dFrom=01/01/2012&dTo=08/08/2012&rs%3AFormat=XML”

谢谢大家！！！

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-08-07T14:54:44.690

您的问题是您正在将参数传递给`http://server/reports...` 您需要将参数传递给`http://server/reportserver...`

我记得我第一次开始使用 Reporting Services 时遇到的这个问题。

这是可以帮助您的 MSDN：http: [//msdn.microsoft.com/en-us/library/ms155391.aspx](http://msdn.microsoft.com/en-us/library/ms155391.aspx)

```
For example, to specify two parameters, “ReportMonth” and “ReportYear”, defined in a 
report, use the following URL for a native mode report server:

http://myrshost/ReportServer?/AdventureWorks 2008R2/Employee_Sales_Summary_2008R2&ReportMonth=3&ReportYear=2008 
```

结果是这样的：

`http://myRSServer/ReportServer/Pages/Report.aspx?%2fDefaultTenant%2fDialing+Reports%2fDialing+Agent+Performance&dFrom=01/01/2012&dTo=08/08/2012`

如果要将报告导出到 excel / pdf / 等，您可以附加它：

对于excel：`&rs:Format=Excel`

对于 PDF：`&rs:Format=PDF`

这也应该有所帮助：[http ://www.mssqltips.com/sqlservertip/1336/pass-parameters-and-options-with-a-url-in-sql-reporting-services/](http://www.mssqltips.com/sqlservertip/1336/pass-parameters-and-options-with-a-url-in-sql-reporting-services/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-07T15:20:05.823

您的第二个 URL 选项是最接近的，您传递不带引号的日期参数。正如 JonH 所说，您想使用`ReportServer`而不是`Reports`，并且您还想删除`ItemPath=`

```
http://Server/ReportServer/Pages/Report.aspx?%2fDefaultTenant%2fDialing+Reports%2fDialing+Agent+Performance&dFrom=01/01/2012&dTo=08/08/2012 
```

另外，如果您想导出文件，您可以附加`&rs:command=render&rs:format=PDF`替换 PDF 为您想要的格式

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-07T12:59:11.580

```
string URL = "YourReportUrl";     
string FullURL = URL + "&JobId=" + JobId.ToString() + "&JobNumber=" + JobNo.ToString() + "&rs%3aCommand=Render"; 
```

您的参数名称在哪里`JobId`以及`JobNumber`将是。这将直接在您的报告查看器中打开。

要以 XML 格式显示，请将其添加**`&rs%3AFormat=XML`**到 URL 的末尾。

```
string FullURL = URL + "&JobId=" + JobId.ToString() + "&JobNumber=" + JobNo.ToString() + "&rs%3aCommand=Render&rs%3AFormat=XML"; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-04-16T15:04:57.830

以下是使用 URL 生成报告的示例。它传递参数并指定参数是否应该隐藏

```
http://myServer/ReportServer/Pages/ReportViewer.aspx?/InventoryTracking/Receiving/InboundContainerID
&rs:Command=Render&rc:Parameters=false&Plant="20" 
```

如果使用 HTML 文件来显示这个，那么使用

```
window.location.href = url; 
```

# javascript - html/javascript canvas 将设置值更改为用户输入

> ID：11846038
> 
> 赞同：1
> 
> 时间：2012-08-07T12:30:12.910
> 
> 标签：javascript, html, forms, canvas

所以我有一些代码可以在画布周围反弹一个球，允许用户更改球的大小和颜色。我现在要添加的是让他们有一个输入来改变球的速度。

这是js

```
function draw(){
 var canvas = document.getElementById('ball');
 context= ball.getContext('2d');
 //context.clearRect(150,50,750,750);
 context.beginPath();
 context.fillStyle="#0000ff";
 context.arc(x,y,10,20,Math.PI*2,true);
  context.closePath();
  lineColor = document.getElementById('lineColor').value;
  lineWidth = document.getElementById('lineWidth').value;
        if (lineWidth)
        {
            context.lineWidth=lineWidth;
        }
        if (lineColor)
        {
            context.strokeStyle=lineColor;
            context.stroke();
        }
  //context.fill();
  if( x<0 || x>1000)
  dx=-dx;
  if( y<0 || y>1050)
  dy=-dy;
  x+=dx;
   y+=dy;
  }
   //currently this line changes the speed
   setInterval(draw,1); 
```

这是html：

```
 <html>
<body style="background-color:#FFDEAD;">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Bouncing Ball Paint</title>
<body> Welcome to Paint Brush! 
Before you begin: Please type in a color and width. Now sit back and enjoy the show.</body>
<body>
Ball Width: <input type="text" id="lineWidth"></input>
Ball Color: <input type="text" id="lineColor"></input>
Ball Speed X:<input type="text" id="speedx"></input>
<input type="button" value="Clear" onClick="window.location.href=window.location.href">
</body>
<body>
<h1>Bouncing a Ball</h1>
<div id="container">

    <canvas id="ball" width="2050" height="2050"></canvas>

</div>
<script type="text/javascript" 

            src="balledit1.js"> </script>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T13:00:29.290

只是你如何处理其他设置，你会`setTimeout`根据元素的 1 在你的 1 （这里我还设置了一个回退到 50 `.value`）`speedx`

```
<html>
<header>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Bouncing Ball Paint</title>
<style>
#ball{width:500px;height:500px; background:#CCC;}
</style>
</header>
<body style="background-color:#FFDEAD;">
Ball Width: <input type="text" id="lineWidth"></input>
Ball Color: <input type="text" id="lineColor"></input>
Ball Speed X:<input type="text" id="speedx"></input>
<input type="button" value="Clear" onClick="window.location.href=window.location.href">
<h1>Bouncing a Ball</h1>
<canvas id="ball" width="500" height="500"></canvas>
<script>
var x=50;
var y=300;
var dx=10;
var dy=10;
function draw(){
   var ball = document.getElementById('ball');
   context= ball.getContext('2d');
   context.clearRect(0,0,ball.width,ball.height);
   lineColor = (document.getElementById('lineColor').value.length>0)?document.getElementById('lineColor').value:'#0000FF';
   lineWidth = (document.getElementById('lineWidth').value.length>0)?document.getElementById('lineWidth').value:'10';
   context.beginPath();
   context.fillStyle=lineColor;
   context.arc(x,y,lineWidth,20,Math.PI*2,true);
   context.closePath();
   if (lineWidth){
      context.lineWidth=lineWidth;
   }
   if (lineColor){
      context.strokeStyle=lineColor;
      context.stroke();
   }
   context.fill();
   if( x<0 || x>500)
      dx=-dx;
   if( y<0 || y>500)
      dy=-dy;
   x+=dx;
   y+=dy;
   fr = (document.getElementById('speedx').value>0)?document.getElementById('speedx').value:50;
   setTimeout(draw,fr);  
}
draw();
</script>
</body>
</html> 
```

# java - 从 JEditorPane 中的 URL 以 html 格式显示图像。可能与 ImageView？

> ID：11846040
> 
> 赞同：1
> 
> 时间：2012-08-07T12:30:24.930
> 
> 标签：java, swing, url, imageview, jeditorpane

我正在尝试从 Internet 下载图像以显示在插件中。该插件使用 JEditorPane 并包含 html 内容。我尝试使用可以在常规 HTML 中工作的简单 HTML 代码：

```
imageUrl = "http://cactus.nci.nih.gov/chemical/structure/" + smiles + "/image";
builder.append("<img src=" + imageUrl + "alt=\"molecule image\"/></p>"); 
```

当然，我发现这行不通。我得到的只是图像应该在的地方。我在互联网上查看并发现 HTMLFactory ImageView 可能工作，但我找不到如何实现它。

如果有人可以提供帮助，那就太好了:)

注意：builder 是一个 stringbuilder，我在其中存储 jeditorpane 的 html 内容。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T13:42:09.470

[http://java-sl.com/tip_local_images.html](http://java-sl.com/tip_local_images.html)这可能会有所帮助

# couchdb - 从节目/列表中抛出 404

> ID：11846050
> 
> 赞同：2
> 
> 时间：2012-08-07T12:30:59.157
> 
> 标签：couchdb

我这样查询视图：

```
/db/_design/myviewname/_view/foo?key=%22ABC123%22 
```

结果如下：

```
{
 total_rows: 3,
 offset: 3,
 rows: [ ]
} 
```

都好。

由于没有找到文档，我想从节目或列表中抛出 404。

那可能吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-07T17:37:21.807

根据[wiki](http://wiki.apache.org/couchdb/Formatting_with_Show_and_List/#Sending_a_Redirect)，您可以通过 Show/List 函数发出重定向响应。因此，也可以发送任意 HTTP 状态代码。（如 404）

```
function (head, req) {
    start({ code: 404 });
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T17:44:08.530

我不确定*404*是否是正确的选择。这真的意味着*没有找到*。

从 W3 HTTP/1.1 [rfc2616](http://www.w3.org/Protocols/rfc2616/rfc2616.html)：

> ### [10.4.5 404 未找到](http://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html#sec10.4.5)
> 
> > 服务器未找到任何与请求 URI 匹配的内容。没有说明这种情况是暂时的还是永久性的。如果服务器通过一些内部可配置的机制知道旧资源永久不可用并且没有转发地址，则应该使用 410 (Gone) 状态代码。当服务器不希望确切地揭示请求被拒绝的原因或没有其他响应适用时，通常使用此状态代码。

我认为还有另一个更合适的响应状态代码。*204 No Content*这听起来更像是您真正想告诉客户的内容。

> ### [10.2.5 204 无内容](http://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html#sec10.2.5)
> 
> > 服务器已完成请求，但不需要返回实体主体，并且可能希望返回更新的元信息。响应可能包括实体头形式的新的或更新的元信息，如果存在，应该与请求的变体相关联。
> > 
> > 如果客户端是用户代理，它不应该改变导致请求被发送的文档视图。这个响应主要是为了允许输入动作发生而不导致用户代理的活动文档视图发生变化，尽管任何新的或更新的元信息应该应用于当前在用户代理的活动视图中的文档。
> > 
> > 204 响应不能包含消息体，因此总是由头字段之后的第一个空行终止。

现在要设置自定义响应标头，您只需在传递给 start 函数的对象中指定它，就像这样。

```
function(head, req) {
  return { "code": 204 };
} 
```

# - 对话框

> ID：11846053
> 
> 赞同：0
> 
> 时间：2012-08-07T12:31:02.837
> 
> 标签：

QDialog 是 Qt Toolkit 中的一个类，它是对话框窗口的基类。

# javascript - ExtJS Ajax POST 与代理 POST

> ID：11846057
> 
> 赞同：4
> 
> 时间：2012-08-07T12:31:25.083
> 
> 标签：javascript, extjs4.1

我正在尝试使用 ExtJS 4.1 创建一个网格面板。它使用 AJAX 代理从服务器获取数据：

```
var store = Ext.create('Ext.data.Store', {
    model: 'myModel',
    pageSize: pageSize,
    proxy: {
        type: 'ajax',
        url: "../search",
        actionMethods:  {
            create: "POST",
            read: "POST",
            update: "POST",
            destroy: "POST"
        },
        headers: {
            'Content-Type': 'application/json'
        },
        limitParam: false,
        startParam: false,
        pageParam: false,
        extraParams: JSON.stringify({
            rows: pageSize,
            role: "Admin",
            index: myIndex,
            question: searchPhrase
        }),
        reader: {
            type: 'json',
            root: 'results.results',
            totalProperty: 'numFound',
            model: 'myModel'
        }
    }
});

store.loadPage(1); 
```

但它似乎不起作用。

我收到一条错误消息，指出无法读取 JSON。更重要的是，在 Firebug 中，发送的参数不是人类可读的。

当我尝试使用相同的参数进行 Ajax 调用时，一切似乎都正常：

```
Ext.Ajax.request({
    url:"../search",
    method: "POST",
    params: JSON.stringify({
        rows: pageSize,
        role: "Admin",
        index: myIndex,
        question: searchPhrase
    }),
    success: function(){
        console.log("ok");
    },
    failure: function(response, opts){
        console.log("failed");
    },
    headers: {
        'Content-Type': 'application/json'
    }
}); 
```

即使在 Firebug 中，请求中的每个参数看起来都很好。

使用代理时，框架有什么不同？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2019-02-20T18:08:50.337

我为商店使用以下代理配置（ExtJS v6.5.2）：

```
proxy: {
    url: 'api/search',
    paramsAsJson: true,
    actionMethods: {
        read: 'POST'
    },
    type: 'ajax',
    reader: {type: 'json'}
}, 
```

它将参数作为 JSON 发送：

```
{"page":1,"start":0,"limit":25} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T08:10:19.223

这似乎是另一个 ExtJS 问题。

我在这里找到了**解决**方法：

[http://www.sencha.com/forum/showthread.php?196194-Ajax-Store-Send-Params-as-JSON-Body](http://www.sencha.com/forum/showthread.php?196194-Ajax-Store-Send-Params-as-JSON-Body)

# android - 如何在我的android代码中检索sqlite中的格式化日期字段？

> ID：11846060
> 
> 赞同：0
> 
> 时间：2012-08-07T12:31:35.333
> 
> 标签：android, sqlite, date

我的android程序中有以下代码：

```
Cursor cursor = db.rawQuery("select ID,firstname,date(birthday) from user", null);  
String birthdaystr=cursor.getString(2); 
```

但是birthdaystr 的值为空。

我将代码更改为：

```
Cursor cursor = db.rawQuery("select ID,firstname,birthday from user", null);  
String birthdaystr=cursor.getString(2); 
```

Birthdaystr 的值类似于“Wed Jan 10 00:00:00 +0000 1973”。

有人知道这个问题吗？（如果我使用 date() 函数，我似乎需要通过另一种方式获取值）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T12:48:50.287

使用`strftime`函数检索格式化日期。

```
strftime(" + "\"%Y" + "-" + "%m" + "-" + "%d\"" + ",birthday) 
```

或使用

```
SimpleDateFormat sdf = new SimpleDateFormat("yyyy-MM-dd");
String formatted = sdf.format(new Date(birthdaystr)); 
```

您可以应用任何您想要的日期格式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T12:49:43.550

尝试：

```
....
Cursor cursor = db.rawQuery("select ID,firstname,birthday from user", null);  
String birthdaystr=cursor.getString(2);
SimpleDateFormat sdf = new SimpleDateFormat("yyyy-MM-dd");
String formatted = sdf.format(new Date(birthdaystr));
..... 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-07T12:52:55.560

你为什么不试试：

```
Cursor cursor = db.rawQuery("select ID,firstname,birthday from user", null);  
String birthdaystr=cursor.getString(2);
SimpleDateFormat sdf = new SimpleDateFormat("HH:m:ss dd-MM-yyyy");
String TimeStampDB = sdf.format(new Date(birthdaystr)); 
```

# java - 如何提高分析器的正则表达式效率

> ID：11846064
> 
> 赞同：0
> 
> 时间：2012-08-07T12:31:53.417
> 
> 标签：java, regex, performance

这是分析器的结果：

> 在“destinationDetails”视图中，以下正则表达式无法由系统加速的正则表达式引擎执行，而是由Java内置的正则表达式引擎执行：
> 
> ```
>  /(?<=dst\s)(.+?)\n/ 
> ```
> 
> 在大多数情况下，发生这种不兼容是因为正则表达式包含前瞻/后瞻结构，例如 `\A, \Z, \b, ^, $, (?=X), (?!X), (?<=X), or (?<!X)`
> 
> 输入源：2011-12-06T00:02:01.726755+05:18 Dec 06 2011 00:00:33 KOC-TEJ-CBA-ASA-5510-3:%ASA-4-106023: Deny tcp src CBA:10.2。 2.78/1885 dst 外部：10.31.129.2/1494 由访问组“CBA_access_in”[0x8104ddd0, 0x0]

有人可以解释如何更有效地克服探查器警告吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T17:14:17.350

鉴于警告消息示例，正则表达式中作为潜在问题突出的一个元素是“零宽度正向后视” `(?<=dst\s)`。它用于确保“dst\s”在匹配的其余部分之前，但不被捕获为匹配的一部分。

如何替换`(?<=dst\s)`this 在很大程度上取决于整个正则表达式的使用方式：

*   `dst\s`不作为比赛的一部分被捕获真的很重要吗？简而言之，如果您只是想回答“正则表达式是否匹配某些输入，是或否”，那么您可能不在乎消耗了什么。试试：`/dst\s(.+?)\n/`。

*   如果这是一个更大的正则表达式的一部分，或者如果你正在使用正则表达式做任何比简单的“是/否”匹配更复杂的事情，那么就需要提出来以便有人提出任何明智的建议。

# sql-server - 找不到表 [tablename] -2147189180

> ID：11846065
> 
> 赞同：11
> 
> 时间：2012-08-07T12:31:56.910
> 
> 标签：sql-server, vb6, crystal-reports

我已经使用 Crystal Reports XIr2 创建了一个报表，用于为我们的应用程序报告来自数据库的信息。它是一个交叉表报告，报告运行存储过程返回的各种数据。

快速了解运行此报告的应用程序 - 它是一个用 VB6 编写的应用程序，在加载应用程序时会提示您输入用户名和密码，它们在 SQL 服务器上配置为 SQL 登录名，因此当您登录时您正在针对 SQL Server 安全性进行身份验证的应用程序。

该报表在 Crystal Reports 中工作得非常好，但是当它从客户站点上的应用程序中启动时，我遇到了一些奇怪的行为。它适用于所有具有“sa”级别数据库访问权限的用户，但在以任何其他用户身份运行时会出现以下错误；

![错误信息](../Images/f9333e084c6997d6ffc7fc01b4b9a48d.png)

如果我以在应用程序中收到上述错误的用户身份直接连接到数据库服务器，则手动运行存储过程不会出现任何错误。

如果我给在 SQL 服务器上的应用程序“sa”权限内遇到错误的用户，则错误将停止发生。

我已经检查了相关存储过程的所有相关执行权限，但如我所述，如果我手动连接到 SQL Server 并执行该过程，我没有收到上面链接的错误。

如果收到此错误的用户在此报告之前运行另一个报告，它会起作用，但是如果他们在收到此错误后运行报告，则所有报告都会停止工作并需要重新启动应用程序。

请问有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T03:54:05.793

我建议您确保为报告问题的用户将数据库的用户映射的默认架构设置为 dbo。我还建议为此使用数据库角色。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T05:25:01.313

授予执行权限并不总是到此为止——有时，您必须检查其中对象的可能权限块。当您说您使用用户的登录名手动运行该过程时，是否也可以肯定用户的凭据就是您用来连接数据库的凭据？

也许您可以使用应用程序将使用的更通用的 sql 登录 - 这样您就不必跟踪多个用户的权限（只是一个建议！:)）

# process - 从 cmd 调用时，进程压缩文件挂起

> ID：11846067
> 
> 赞同：0
> 
> 时间：2012-08-07T12:32:09.800
> 
> 标签：process, arguments, cmd, 7zip

我运行这样的东西：

```
string exec = @"/k" + @"7za.exe a -tzip " + name + ".zip \"" + name + "\"";
processStarter ps.run(exec); 
```

开始信息设置：

```
 startInfo.WorkingDirectory = workingDir;
        startInfo.FileName = exe;
        startInfo.UseShellExecute = false;
        startInfo.RedirectStandardOutput = true; 
```

这会使用命令行和 7zip 可执行文件压缩一些文件夹。启动形式的 winform 应用程序工作正常，压缩并转到下一行，但是当应用程序从带有一些参数的 cmd 形式启动时，程序在调试这一行时挂起。它会生成正确的 zip 存档，但程序不会转到下一行。

我将不胜感激任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T19:11:39.293

/K 告诉 CMD 实例在完成执行时不要终止。您应该将其替换为 /C。这是来自 CMD 内置帮助 (CMD /?) 的指导

```
/C      Carries out the command specified by string and then terminates
/K      Carries out the command specified by string but remains 
```

您应该将命令更新为：

```
@"/C" + @"7za.exe a -tzip " + name + ".zip \"" + name + "\""; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-12-20T10:45:29.407

我在使用 zip 信息中的 zip.exe 时遇到了类似的问题，目前我在一个我删除的地方

> ```
> startInfo.UseShellExecute = false;
> startInfo.RedirectStandardOutput = true; 
> ```

行，这一切都神奇地起作用，我仍在调查中，当我找到解决方案和原因时，我将确保编辑此答案。

编辑：

亲爱的朋友，我的问题是标准输出缓冲区已满并且操作停止继续，我使用了`zip.exe -q`在静默模式下工作并停止写入错误的选项，这解决了问题并向我展示了我的问题的原因，我认为它是你也一样。

# java - 谁能告诉我为什么我的 sqlite 语句不起作用？

> ID：11846072
> 
> 赞同：0
> 
> 时间：2012-08-07T12:32:27.640
> 
> 标签：java, sqlite

我已经用这个 SQLite 语句尝试了我能想到的一切。我有以下要运行的代码。

```
public ArrayList getData(int i)
{
    data = new ArrayList();

    try
    {
        Statement stat2;
        stat2 = conn.createStatement();
        System.out.println(i);
        PreparedStatement prep9 = conn.prepareStatement("SELECT * FROM tbl_INPUT_OBJECTS WHERE cardID = ?;");
        prep9.setInt(1, i);

        ResultSet rs2 = prep9.executeQuery();
        while (rs2.next())
        {
            System.out.println(3);
            IOdevice.get("IOdevice" + (rs2.getInt("id") - (16 * (i - 1)))).setId(rs2.getInt("id") - (16 * (i - 1)));
            IOdevice.get("IOdevice" + (rs2.getInt("id") - (16 * (i - 1)))).setDescription(rs2.getString("description"));

            System.out.println(4);

            System.out.println(rs2.getString("description"));
            System.out.println(rs2.getInt("id") - (16 * (i - 1)));
            System.out.println(IOdevice.get("IOdevice" + (rs2.getInt("id") - (16 * (i - 1)))));
            System.out.println(rs2.getBoolean("state"));
            System.out.println(rs2.getString("type"));
            System.out.println("IOdevice" + (rs2.getInt("id") - (16 * (i - 1))));

            IOdevice.get("IOdevice" + (rs2.getInt("id") - (16 * (i - 1)))).setState(rs2.getBoolean("state"));
            IOdevice.get("IOdevice" + (rs2.getInt("id") - (16 * (i - 1)))).setType(rs2.getString("type"));
        }

        rs2.close();
        stat2.close();

        System.out.println(5);
......etc. 
```

我正在查看的数据库是这样的： ![DB_ScreenShot](../Images/c66b9a0d71b430f34c228f360d8e6abb.png)

我这部分程序的输出是：

```
1
5 
```

它应该是：

```
1
3
4
5 
```

有人可以就我做错了什么给我建议吗？

注意：以下代码确实有效，因此它不是数据库本身......（至少我不认为它是。）

```
Statement stat;
        stat = conn.createStatement();

        ResultSet rs = stat
                .executeQuery("SELECT * from tbl_TEST WHERE cardID = " + i
                        + ";");
        while (rs.next())
        {
            data.add(rs.getInt("id"));
            data.add(rs.getString("lblDescriptionProp"));
            data.add(rs.getString("lblAddressProp"));
            data.add(IOdevice);

            for (int j = 1; j <= 32; j++)
            {
                IOdevice.get("IOdevice" + j).getDescription();
                IOdevice.get("IOdevice" + j).getState();
                IOdevice.get("IOdevice" + j).getType();
            }
        }

        rs.close();
        stat.close(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T13:18:49.630

所以它有效吗？不久前我遇到了同样的问题，结果数据类型被声明为`CHAR`在表中（而不是`NUMERIC`等）。

这可能会导致一些复杂性，并且一开始可能并不明显。例如，声明为 CHAR 的列可能有前导或尾随空格（例如：“1”或“1”），这可能会在数据类型转换期间出现问题。

# javascript - Javascript 数据可用事件

> ID：11846074
> 
> 赞同：0
> 
> 时间：2012-08-07T12:32:50.620
> 
> 标签：javascript, events

我不是 JavaScript/jQuery 方面的专家。所以我在这里。

我正在调用一个需要一些时间来处理的 javascript 函数。当我的数据在成功方法中可用时，有什么方法可以跟踪事件。我的代码如下。

```
function doWave() {
    window.plugins.AudioFxDemo.doConvert('http://c0458222.cdn.cloudfiles.rackspacecloud.com/RC1_2.2_Conversation_line7.mp3',
        function(data) {
            // success
            alert(data);
        }, function(error) {
            alert(error);
        });
} 
```

我正在获取数据，但这需要一些时间。那么我如何知道数据何时可用。

-Arefin

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T12:49:46.667

我不太清楚你想做什么。基于回调的 API 的通常行为是*在数据可用时调用*成功方法。所以只要把你的处理代码放在那里。我想您可以触发一个[额外的事件处理程序](https://stackoverflow.com/search?q=%5Bjavascript%5D%20trigger%20event)并在另一个回调中处理数据，但这是否有意义取决于您要获取的内容。

还请发布有关您的编程环境（框架、目标客户端、工具等）的更多详细信息，以便我们为您提供更好的建议。:)

* * *

# 更新：

如果您尝试`doWave`定期调用该函数，可以尝试以下操作：

```
function doWave() {
    window.plugins.AudioFxDemo.doConvert('[url]',
        function(data) {
            // process data, display etc.
            // [...]

            // queue doWave for immediate execution
            setTimeout(doWave, 0);
        }, function(error) {
            alert(error);
        });
} 
```

这样，每次`doWave`执行时，都会在当前成功函数执行完成后立即将另一个执行排队。

如果您想了解更多信息，[这里有一篇关于计时器功能的好文章。](http://ejohn.org/blog/how-javascript-timers-work/)

我仍然不确定这是您要查找的内容，如果不是，请评论/更新问题。

# python - Python 正则表达式从模式的某个位置替换

> ID：11846076
> 
> 赞同：4
> 
> 时间：2012-08-07T12:32:51.043
> 
> 标签：python, regex

我有一个功能：

```
find = re.compile(ur"\s+(Word)\s+", flags = re.U)
text = find.sub('\1', text) 
```

我想找到一些像这样的模式“ `Word`”（带有前缀/后缀空格）并将其替换为“Word”（没有这些空格）。在红宝石中，我以前做过这样的事情：

```
text.gsub('\s+(Word)\s+', '\1') 
```

编辑：我的意思是我需要用一个新的字符串或其他东西来改变这些空间，这取决于情况。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-07T12:37:55.023

问题是 Python 将您的 '\1' 解释为特殊的反斜杠字符；您需要使用[原始字符串](http://docs.python.org/reference/lexical_analysis.html#string-literals)，这可以通过`r`在字符串之前添加一个来完成。改变

```
find.sub('\1', text) 
```

至

```
find.sub(r'\1', text) 
```

例子：

```
text = "Replace this Word "
find = re.compile(ur"\s+(Word)\s+", flags = re.U)
find.sub(r'\1', text)
# 'Replace thisWord' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-07T12:37:08.687

尝试这个：

```
regcom = re.compile('\s+Word\s+', re.UNICODE)
print regcom.sub(u'Word', u'This is a     Word     ')
u'This is aWord' 
```

# xcode - （null）：在 __TEXT 部分中，__text reloc 3：地址部分（0x7C6C）地址不在架构 armv7 的任何部分中

> ID：11846078
> 
> 赞同：4
> 
> 时间：2012-08-07T12:32:54.087
> 
> 标签：xcode

升级到 Xcode 4.4 后，我在尝试在 iPhone 或 iPad 上运行我的（通用）应用程序时遇到了这个烦人的链接器错误。如果我在iOS模拟器上运行它，我没有问题......我尝试添加armv6，不包括armv7，但没有运气......知道吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-08T05:55:36.737

只是想说谢谢你的问题和你的回答，niraj！我遇到了同样的问题，解决方案效果很好。

为了节省人们一些翻译时间，答案是在目标的“构建设置”的“Apple LLVM 编译器 4.0 - 代码生成”部分中将“生成位置相关代码”设置为“否”。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-07T12:33:55.743

浪费了三个小时，终于在中文博客上找到一篇有用的帖子解决了我的问题！！！链接在这里：

[http://blog.k-res.net/%E8%AE%BE%E8%AE%A1%E5%BC%80%E5%8F%91/%E5%8D%87%E7%BA%A7xcode- 4-4%E5%90%8E%E9%A1%B9%E7%9B%AEbuild%E6%8F%90%E7%A4%BAaddress-section-architecture-armv7%E7%9A%84%E8%A7% A3%E5%86%B3%E6%96%B9%E6%B3%95.html](http://blog.k-res.net/%E8%AE%BE%E8%AE%A1%E5%BC%80%E5%8F%91/%E5%8D%87%E7%BA%A7xcode-4-4%E5%90%8E%E9%A1%B9%E7%9B%AEbuild%E6%8F%90%E7%A4%BAaddress-section-architecture-armv7%E7%9A%84%E8%A7%A3%E5%86%B3%E6%96%B9%E6%B3%95.html)

# cuda - NVIDIA Visual Profiler 可以显示并发内核执行吗？

> ID：11846086
> 
> 赞同：2
> 
> 时间：2012-08-07T12:33:11.983
> 
> 标签：cuda, nvvp

我在许多论坛上读到 NVIDIA Visual Profiler 序列化程序以收集时序信息。

然而，在可视化分析器中，在上下文选项卡下，会提供诸如*“内存副本和 GPU 上的内核之间没有时间重叠”之*类的建议，或者如果内存和内核执行存在重叠，它会显示重叠时间。此外，如果您查看[以下网络研讨会 - 幻灯片 6](http://developer.download.nvidia.com/CUDA/training/StreamsAndConcurrencyWebinar.pdf)，您可以看到重叠内核的输出跟踪。

我想知道探查器是否可以显示有关并发内核执行的信息（即，如果我们使用 3 个不同的流并行运行 3 个内核，探查器是否可以显示这是否确实发生在 GPU 中）。如果是这样，我可以在视觉分析器中的什么位置获取这些信息。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T16:17:59.740

### 是的。

CUDA Toolkit 5.0 中的 nvprof 和 Visual Profiler (nvvp)（作为预览版提供给注册的 CUDA 开发人员）都支持并发内核执行。

# powershell - Powershell CMD.exe 和路径中的空格

> ID：11846087
> 
> 赞同：2
> 
> 时间：2012-08-07T12:33:12.540
> 
> 标签：powershell

我在使用`cmd.exe`PowerShell 执行命令时遇到问题。问题是命令的路径中有空格。似乎是 PowerShell 的普遍问题。以下是摘录：

```
$base_dir = resolve-path ..\  # this path has spaces in it 
$msdeploy = $base_dir\tools\msdeploy\msdeploy.exe

cmd.exe /c $("""$msdeploy"" -verb:sync -source:....") 
```

我需要有`msdeploy`通过变量解析的路径，因为脚本用于持续集成过程。

由于空格，该命令不会执行。我试图将命令包装在`""`（引号）中，但仍然没有运气。在这种情况下如何格式化`$msdeploy`变量？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T13:19:47.160

在命令周围反打“”应该使它工作：

```
cmd.exe /c "`"$msdeploy`" -verb:sync -source:..." 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-07T14:57:01.977

尝试使用 $() 调用所有内容，如下所示：

```
$base_dir = resolve-path ..\  # this path has spaces in it 
$msdeploy = $($base_dir)\tools\msdeploy\msdeploy.exe

cmd.exe /c $("$($msdeploy) -verb:sync -source:....") 
```

编辑：我将整个命令移到 $msdeploy 变量中，并通过转义引号来调用 $msdeploy。我发现[这个](https://stackoverflow.com/questions/6471320/how-to-call-cmd-exe-from-powershell-with-a-space-in-the-specified-commands-dire)链接有类似的问题，所以我调整了你的代码以匹配那里的工作。

```
$base_dir = resolve-path ..\
$msdeploy = $("`"" + $base_dir.Path + "\tools\msdeploy\msdeploy.exe`" -verb:sync -source:....")

cmd.exe /c "`"$msdeploy`"" 
```

# visual-studio-2010 - 是否有解决方案范围的方法来取消整个文件的选项卡

> ID：11846090
> 
> 赞同：19
> 
> 时间：2012-08-07T12:33:16.440
> 
> 标签：visual-studio-2010, refactoring

我已经下载了一个项目，它都使用 Tab ，但我总是使用 Space。有“编辑->高级->取消标签”选项，但是我必须一个一个地选择文件并为所有文件执行此操作，所以我想知道是否有一种方法可以将 thzt 应用于整个文件在项目中。我正在使用 C# 和 VS2010 Pro。我还安装了 Resharper，以防它有帮助。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-10-03T21:47:02.593

最好的办法是使用文件中的查找和替换 (ctrl-shift-h)。打开正则表达式，搜索 \t 并替换为空格。您可以将文件过滤器设置为 *.cs 或您需要清理的任何文件类型。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2019-06-07T10:23:55.890

我创建了一个简单的控制台应用程序，它取消了基目录中的所有文件。

[https://github.com/idenardi/TabsToSpace](https://github.com/idenardi/TabsToSpace)

这是代码：

```
using System;
using System.Collections.Generic;
using System.IO;
using System.Linq;

namespace TabToSpaces
{
    class Program
    {
        static void Main(string[] args)
        {
            var root = args[0];
            var filePaths = Directory.GetFiles(root, "*.cs", SearchOption.AllDirectories);

            int updated = 0;
            foreach (var path in filePaths)
            {
                var content = File.ReadAllLines(path);
                string[] newfile = new string[content.Length];

                int i = 0;
                var bChanged = false;

                foreach (var line in content)
                {
                    newfile[i] = ReplaceTabs(line, out var bChangedLine);
                    i++;

                    if (bChangedLine)
                        bChanged = true;
                }

                if (bChanged)
                {
                    ++updated;
                    Console.WriteLine("fixing " + path);
                    File.WriteAllLines(path, newfile, System.Text.Encoding.UTF8);
                }
            }

            Console.WriteLine("fixed {0} files", updated);
            var x = Console.ReadKey();
        }

        public static string ReplaceTabs(string line, out bool bChanged)
        {
            bChanged = false;
            var i = 0;
            var lstIndex = new List<int>();

            foreach(char c in line)
            {
                if (c == ' ')
                    continue;
                else if (c == '\t')
                    lstIndex.Add(i);
                else
                    break;

                i++;
            }

            var lstIndexOrdered = lstIndex.OrderByDescending(c => c);
            foreach (var index in lstIndexOrdered)
            {
                line = line.Remove(index, 1).Insert(index, "    ");
                bChanged = true;
            }

            return line;
        }
    }
} 
```

要进行转换，您需要调用此应用程序，并将基目录作为第一个参数传递：

TabToSpace.exe C:\Projects\MyBaseDirectory

# jquery - 如何在 jQuery 周历中设置特定主题？

> ID：11846091
> 
> 赞同：1
> 
> 时间：2012-08-07T12:33:18.677
> 
> 标签：jquery, jquery-plugins

如何在 jQuery 周历中设置特定主题

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T12:43:04.170

[https://github.com/robmonie/jquery-week-calendar/wiki/](https://github.com/robmonie/jquery-week-calendar/wiki/)

看起来它似乎没有“主题”，更多的是你必须自己进行 css/etc 更改。

`"I have entertained the thought of making the calendar jquery-ui theme compatible but I don’t think the design elements in the calendar completely fit with those provided by the theme builder so probably wouldn’t work out."`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T08:32:16.743

```
$('#switcher').themeswitcher(
            {loadTheme:'Dark Hive',
            cookieName: 'Dark Hive'});
          }); 
```

html

```
<div id="switcher" style="display:none"></div> 
```

# php - 使用包含后不需要的（文本）

> ID：11846092
> 
> 赞同：-5
> 
> 时间：2012-08-07T12:33:19.783
> 
> 标签：php, css, include

我有一个 index.php 和一个 header.php 将
在使用后 包含在 index.php 中

```
include('header.php') 
```

一个不需要的“”将出现在 html 源代码中。
header.php 包含纯 html，但具有 .php 扩展名。
它将在标题上方放置一个不需要的 20px 高度可用空间。
请帮我删除它。

这是来源：
![在此处输入图像描述](../Images/34f223d6c2feb74d5eb131e15dd872fa.png)

这是风格：
![在此处输入图像描述](../Images/2fd78c13a8332c532899f6d6bb1db953.png)

最后是 header.php：

```
<div id="logo"></div>
<div id="header_top">
    <div id="search">
        <a href="main.html">main</a><span class="verbarheader_padding">|</span>
        <a href="history.html">history</a>
    </div>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T12:36:31.403

html文本上方是否有间距？

您也可以尝试`echo`文本（这将解决您的间距问题）。

但不要忘记逃避不需要的字符

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T12:38:35.077

如果您已注释掉包含且未显示单引号，那么追踪它的快速方法是临时回显一个短字符串，例如`echo 'z';`. 继续重新定位它并重新加载浏览器，最终您会注意到在单引号*之后*输出了“z”字符，并且您将在生成输出的位置进行分区。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-07T13:24:47.770

对于 header.php（或任何包含的文件），使用“UTF-8 without BOM”编码而不是“UTF-8”解决了这个问题。我不明白为什么那 5 个人将我的问题标记为垃圾邮件！！！管他呢。

# php - 如何解析从 SRU 检索到的 XML 文档？

> ID：11846095
> 
> 赞同：0
> 
> 时间：2012-08-07T12:33:22.247
> 
> 标签：php, xml, parsing

以前有人在这里发布过类似的问题，但不幸的是没有人能给出足够的答案：[Parse XML (SRU) with php](https://stackoverflow.com/questions/5875491/parse-xml-sru-with-php) I want to use an XML file, which is generated by SRU, and parse it with PHP to获取此 XML 文件的特定内容。我对 PHP 和 SRU 完全陌生，所以也许你可以在这里帮助我解决一些初学者的问题。

首先，我想通过 URL 获取 SRU 生成的 XML 文件：

```
<?php
 $datasource='http://pub.uni-bielefeld.de/sru';
 $fh = simplexml_load_file($datasource);
 print_r($fh);
 echo ("<br /> <br />");
 ?> 
```

这给了我一个带有 SimpleXMLElement 的输出，这仍然很好。此外，我检查 $fh 是否已设置且不为空：

```
<?php
 if (empty($fh)) {
      echo "fh is empty or isn't set.";
 }
 else {
       echo "fh contains a value.\n";
 }

 if (isset($fh)) {
     echo "fh is set.\n";
 }
 else {
 echo "fh is not set.\n";
 }
 ?> 
```

这给了我预期的输出，即 $fh 包含一个值，并且它被设置为可以从生成输出的事实中看出。之后我想获取这个 $fh 的一个元素，但它不能这样工作：

```
<?php
$var1 = $fh->explainResponse->record->recordSchema;
echo "$var1";
?> 
```

我还检查了 $var1 与 isset 和空，就像我在上面的示例中检查 $fh 并发现 $var1 没有设置并且它也是空的。尝试运行脚本时，我在尝试将内容填充到 $var1 时收到错误消息：

```
Notice: Trying to get property of non-object in /var/www/testsite/sru_parse.php on line        
27 
```

也许这是一个非常简单的错误，它破坏了我的脚本。即使您只是指出我可能忘记的内容，我也非常感谢您的帮助。

哦，是的，关于 xml 文件结构：

```
 <explainResponse xmlns="http://www.loc.gov/zing/srw/">
      <version>1.1</version>
      <record>
         <recordSchema>http://explain.z3950.org/dtd/2.0/</recordSchema>
         <recordPacking>xml</recordPacking>
            <recordData> .....
            ....
          </recordData>
          </record>
         <echoedExplainRequest/>
    </explainResponse> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T12:38:54.860

也许只有

`$var1 = $fh->record->recordSchema;`

你已经有了`explainResponse`变量`$fh`。

# c# - Active Directory UserPrincipal.Current.GetGroups() 在本地而不是 Web 服务器上返回组

> ID：11846097
> 
> 赞同：3
> 
> 时间：2012-08-07T12:33:39.963
> 
> 标签：c#, asp.net, active-directory

以下在我的本地开发框中非常有用。但是，当我将它移动到 Web 服务器时，它会失败，甚至不会记录错误：

```
public static List<string> getAuthorizationGrps(string userName)
    {
        List<string> grps = new List<string>();

        try
        {
            PrincipalSearchResult<Principal> groups = UserPrincipal.Current.GetGroups();
            IEnumerable<string> groupNames = groups.Select(x => x.SamAccountName);
            foreach (var name in groupNames)
            {
                grps.Add(name.ToString());
            }
            return grps;
        }
        catch (Exception ex)
        {
            Log.WriteLog("Error in retriving form data: " + ex.Message);
        }
    } 
```

我是否必须在网络服务器上设置权限才能查询组？我可以在本地和 Web 服务器上毫无问题地获取当前用户。

任何想法将不胜感激，我已经为此奋斗了 2 天。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T02:06:42.630

大约 6 个月前，我们遇到了类似的问题。我们的代码调用 UserPrincipal.Current.GetGroups() 并在 foreach 循环中枚举对象。在测试和生产中工作正常，直到一天早上 1 同事在执行代码时不断出现异常。枚举 groupNames 对象开始引发 IndexOutOfRangeException。一个小时后无法弄清楚出了什么问题，所以我添加了一个 kludge，称为一个进行 ADSI 调用的存储过程，类似于[这里](https://stackoverflow.com/questions/1766061/tsql-how-to-get-a-list-of-groups-that-a-user-belongs-to-in-active-diretory)的第二个答案。它不漂亮，但它从来没有一个问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T05:29:32.873

我假设这是你的环境

```
Web browser --> Web Server --> Domain Controller 
```

除非您在同一台机器上运行`Web Browser and Web Server`or ，否则`Web Server and Domain Controller`您需要设置 Kerberos 委托以使上述代码工作。我猜你的开发盒正在工作，因为你在同一台机器上运行 Web 浏览器和 Web 服务器。

您可以从 Google 轻松找到大量文章，教您如何为 IIS 和 ASP.NET 配置 Kerberos 委派。这是[一个例子](http://support.microsoft.com/kb/810572)。我不会在这里详细介绍。关键是您的 ASP.NET 应用程序正在模拟客户端凭据并尝试使用该客户端凭据来查询 Active Directory。如果您没有正确设置委派，Windows 会认为您的模拟凭据无法访问网络。在您的情况下，您无法访问域控制器。这是一种安全措施。这只是为了确保服务器不能代表网络上的最终用户做事，除非它被明确授予这样做的权限。

另一种解决方案是更改您的代码。因此，在调用 GetGroups 之前，您将撤消模拟并再次成为 IIS AppPool 帐户。如果您的 AppPool 帐户被配置为域帐户，并且具有足够的权限来读取 Active Directory，那么您可以查询 Active Directory 中的用户组。

这是一个讨论这个的[blob 。](http://weblogs.asp.net/avnerk/archive/2004/09/22/232967.aspx)这是我认为无需任何 Kerberos 委托设置即可工作的代码。虽然我没有测试它。

```
public static List<string> getAuthorizationGrps(string userName)          
{          
    List<string> grps = new List<string>();          

    try          
    {
        var currentUser = UserPrincipal.Current;
        RevertToSelf();             
        PrincipalSearchResult<Principal> groups = currentUser.GetGroups();          
        IEnumerable<string> groupNames = groups.Select(x => x.SamAccountName);          
        foreach (var name in groupNames)          
        {          
            grps.Add(name.ToString());          
        }          
        return grps;          
    }          
    catch (Exception ex)          
    {          
        Log.WriteLog("Error in retriving form data: " + ex.Message);          
    }          
} 
```

# haskell - 与 yesod 博客示例中的预期类型不匹配

> ID：11846105
> 
> 赞同：1
> 
> 时间：2012-08-07T12:34:00.283
> 
> 标签：haskell, types, yesod

我正在尝试运行博客示例，但是某些处理程序函数中的类型存在问题，我不知道如何修复它。

我正在尝试运行的示例发布在此处： [Yesod 博客示例](http://www.yesodweb.com/blog/2012/01/blog-example) 我对其进行了一些更改，我将类型添加到 defaultLayout 函数并使其成为 Yesod 的实例以摆脱双重定义。

```
defLayout :: GWidget a Blog () -> GHandler a Blog RepHtml
defLayout inside = do
  mmsg <- getMessage
  pc <- widgetToPageContent $ do
      toWidget [lucius|
body {
width: 760px;
margin: 1em auto;
font-family: sans-serif;
}
textarea {
width: 400px;
height: 200px;
}
#message {
color: #900;
}
|]
      inside 
  hamletToRepHtml [hamlet|
$doctype 5
<html>
    <head>
        <title>#{pageTitle pc}
        ^{pageHead pc}
    <body>
        $maybe msg <- mmsg
            <div #message>#{msg}
        ^{pageBody pc}
|]

instance Yesod Blog where
    approot = ApprootStatic "http://localhost:3000"
    defaultLayout = defLayout 
```

这些是给我带来问题的功能：

```
getBlogR :: Handler RepHtml
getBlogR = do
  muser <- maybeAuth
  entries <- runDB $ selectList [] [Desc EntryPosted]
  ((_, entryWidget), enctype) <- generateFormPost entryForm
  defaultLayout $ do
             setTitleI MsgBlogArchiveTitle
             [whamlet|
$if null entries
    <p>_{MsgNoEntries}
$else
    <ul>
        $forall Entity entryId entry <- entries
            <li>
                <a href=@{EntryR entryId}>#{entryTitle entry}
$maybe Entity _ user <- muser
    $if isAdmin user
        <form method=post enctype=#{enctype}>
              ^{entryWidget}
              <div>
                  <input type=submit value=_{MsgNewEntry}>
$nothing
    <p>
         <a href=@{AuthR LoginR}>_{MsgLoginToPost}
|]

getEntryR :: EntryId -> Handler RepHtml
getEntryR entryId = do
  (entry, comments) <- runDB $ do
          entry <- get404 entryId
          comments <- selectList [] [Asc CommentPosted]
          return (entry, map entityVal comments)
  muser <- maybeAuth
  ((_, commentWidget), enctype) <- generateFormPost (commentForm entryId)
  defaultLayout $ do
    setTitleI $ MsgEntryTitle $ entryTitle entry
    [whamlet|
<h1>#{entryTitle entry}
<article>#{entryContent entry}
    <section .comments>
        <h1>_{MsgCommentsHeading}
        $if null comments
            <p>_{MsgNoComments}
        $else
             $forall Comment _entry posted _user name text <- comments
                 <div .comment>
                      <span .by>#{name}
                      <span .at>#{show posted}
                      <div .content>#{text}
        <section>
            <h1>_{MsgAddCommentHeading}
            $maybe _ <- muser
                <form method=post enctype=#{enctype}>
                    ^{commentWidget}
                    <div>
                        <input type=submit value=_{MsgAddCommentButton}>
            $nothing
                <p>
                    <a href=@{AuthR LoginR}>_{MsgLoginToComment}
|] 
```

这是我尝试运行它时得到的输出：

```
blog.hs:147:4:
    Couldn't match expected type `GWidget Blog Blog ()'
                with actual type `(t0, t1)'
    In the pattern: (_, entryWidget)
    In the pattern: ((_, entryWidget), enctype)
    In a stmt of a 'do' block:
      ((_, entryWidget), enctype) <- generateFormPost entryForm

blog.hs:202:4:
    Couldn't match expected type `GWidget Blog Blog ()'
                with actual type `(t0, t1)'
    In the pattern: (_, commentWidget)
    In the pattern: ((_, commentWidget), enctype)
    In a stmt of a 'do' block:
      ((_, commentWidget), enctype) <- generateFormPost
                                         (commentForm entryId) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-07T13:14:39.073

自博客文章以来，类型发生`generateFormPost`了变化，它曾经是

```
generateFormPost :: RenderMessage master FormMessage =>
                    (Html -> MForm sub master (FormResult a, xml)) ->
                    GHandler sub master ((FormResult a, xml), Enctype) 
```

在[yesod-form-0.4.*](http://hackage.haskell.org/package/yesod-form-0.4.2.1)但[现在](http://hackage.haskell.org/packages/archive/yesod-form/1.0.0.4/doc/html/Yesod-Form-Functions.html#v%3agenerateFormPost)是

```
generateFormPost :: RenderMessage master FormMessage => 
                    (Markup -> MForm sub master (FormResult a, xml)) -> 
                    GHandler sub master (xml, Enctype) 
```

`yesod-form < 1`如果您使用或替换，类型错误应该 [我认为，从未使用过 yesod] 消失

```
((_, entryWidget), enctype) <- generateFormPost entryForm 
```

和

```
(entryWidget, enctype) <- generateFormPost entryForm 
```

来反映类型的变化`generateFormPost`。

# c# - 如何使用鼠标悬停事件更改列表视图选定的行背景色

> ID：11846106
> 
> 赞同：0
> 
> 时间：2012-08-07T12:34:03.590
> 
> 标签：c#, asp.net, listview, select, listitem

我有一个 ASP.NET 应用程序并使用`ListView`. 这`ListView`有行和列。这些列是名字、姓氏、电子邮件等...其中的每一个`Control`都是.`ListView``LinkButton`

我的点子：

如果用户将鼠标移到 a 上`LinkButton`，我希望他们`BackroundColor`在该行上看到不同的内容。

例如：

![在此处输入图像描述](../Images/0e62bf1f32dee299733b49aa573ca760.png)

我的代码：

aspx：

```
<body>
    <form id="form1" runat="server">
    <div class="header">
        <br />
        <table id="SuchTabelle" runat="server" border="0">

            <tr>
                <th><asp:Label ID="id_SearchUser" runat="server" Text="lblSearchUser"></asp:Label></th>
                <th><asp:TextBox ID="txtBenutzer" runat="server" Width="250px"></asp:TextBox></th>
                <th></th>
            </tr>
            <tr>
                <th><asp:Label ID="id_location" runat="server" Text="lblLocation"></asp:Label></th>
                <th><asp:DropDownList ID="dropWerk" runat="server" Width="250px" /></th>
                <th><asp:Button ID="Button2" runat="server" Text="Suchen" 
                                onclick="btnBenutzerSuchen_Click" Width="250" /></th>
            </tr>

        </table>

        <br />
        <br />
       <b>&nbsp;&nbsp;&nbsp; Info:</b> 
        <asp:Label ID="lbMeldung" runat="server" 
            Text="Geben Sie den Kontakt ein, nachdem gesucht werden soll..."></asp:Label>
        <br />
      <br />
      </div>

      <div class="bodyList">

        <asp:ListView runat="server" ID="myListView">

        <LayoutTemplate>
            <table id="UserTable" runat="server" border="0">
                <tr id="Tr1" style="background-color:#E5E5FE">
                    <th runat="server"><asp:LinkButton ID="lnkBenutzer" runat="server" >id_Benutzer</asp:LinkButton></th>
                    <th runat="server"><asp:LinkButton ID="lnkemail" runat="server" >id_Email</asp:LinkButton></th>
                    <th runat="server"><asp:LinkButton ID="lnkVorname" runat="server" >id_Vorname</asp:LinkButton></th>
                    <th runat="server"><asp:LinkButton ID="lnkNachname" runat="server" >id_Nachname</asp:LinkButton></th>
                    <th runat="server"><asp:LinkButton ID="lnkTelefon" runat="server" >id_Telefon</asp:LinkButton></th>
                </tr>
                <tr runat="server" id="ItemPlaceholder">
                </tr>
            </table>
        </LayoutTemplate>

        <ItemTemplate>

            <tr>    
                <td align="left" ><asp:LinkButton CssClass="MyLink" OnCommand="Button1_Command" CommandName="Select" CommandArgument='<%# Container.DataItemIndex %>' ID="Label1" Text='<%# Eval("Benutzername") %>' runat="server" /></td>
                <td align="left"><asp:LinkButton CssClass="MyLink" OnCommand="Button1_Command" CommandName="Select" CommandArgument='<%# Container.DataItemIndex %>' ID="Label2" Text='<%# Eval("eMail") %>' runat="server" /></td>
                <td align="left"><asp:LinkButton CssClass="MyLink" OnCommand="Button1_Command" CommandName="Select" CommandArgument='<%# Container.DataItemIndex %>' ID="Label3" Text='<%# Eval("Vorname") %>' runat="server" /></td>
                <td align="left"><asp:LinkButton CssClass="MyLink" OnCommand="Button1_Command" CommandName="Select" CommandArgument='<%# Container.DataItemIndex %>' ID="Label4" Text='<%# Eval("Nachname") %>' runat="server" /></td>
                <td align="left"><asp:LinkButton CssClass="MyLink" OnCommand="Button1_Command" CommandName="Select" CommandArgument='<%# Container.DataItemIndex %>' ID="Label5" Text='<%# Eval("Telefonnummer") %>' runat="server" /></td>

              <td align="left"><asp:Label ID="Label6" Text='<%# Eval("GUID") %>' runat="server" Visible="False" /></td>

            </tr>

        </ItemTemplate>

        <AlternatingItemTemplate>

            <tr style="background-color:#EFEFEF"> 

                <td align="left" ><asp:LinkButton CssClass="MyLink" OnCommand="Button1_Command" CommandName="Select" CommandArgument='<%# Container.DataItemIndex %>' ID="Label1" Text='<%# Eval("Benutzername") %>' runat="server" /></td>
                <td align="left"><asp:LinkButton CssClass="MyLink" OnCommand="Button1_Command" CommandName="Select" CommandArgument='<%# Container.DataItemIndex %>' ID="Label2" Text='<%# Eval("eMail") %>' runat="server" /></td>
                <td align="left"><asp:LinkButton CssClass="MyLink" OnCommand="Button1_Command" CommandName="Select" CommandArgument='<%# Container.DataItemIndex %>' ID="Label3" Text='<%# Eval("Vorname") %>' runat="server" /></td>
                <td align="left"><asp:LinkButton CssClass="MyLink" OnCommand="Button1_Command" CommandName="Select" CommandArgument='<%# Container.DataItemIndex %>' ID="Label4" Text='<%# Eval("Nachname") %>' runat="server" /></td>
                <td align="left"><asp:LinkButton CssClass="MyLink" OnCommand="Button1_Command" CommandName="Select" CommandArgument='<%# Container.DataItemIndex %>' ID="Label5" Text='<%# Eval("Telefonnummer") %>' runat="server" /></td>

                <td align="left"><asp:Label ID="Label6" Text='<%# Eval("GUID") %>' runat="server" Visible="False" /></td>

            </tr>

        </AlternatingItemTemplate>

        </asp:ListView>

        <br />
        <br />

    </div>

    </form>
</body> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T12:50:20.007

您可以使用 CSS：

```
<LayoutTemplate>
    <table id="UserTable" runat="server" class="myClass">
        <tr id="Tr1" class="myClass">
            <th id="Th1" runat="server">
                <asp:LinkButton ID="lnkBenutzer" runat="server" Text="id_Benutzer" />
            </th>
            <th id="Th2" runat="server">
                <asp:LinkButton ID="lnkemail" runat="server" Text="id_Email" />
            </th>
            <th id="Th3" runat="server">
                <asp:LinkButton ID="lnkVorname" runat="server" Text="id_Vorname" />
            </th>
            <th id="Th4" runat="server">
                <asp:LinkButton ID="lnkNachname" runat="server" Text="id_Nachname" />
            </th>
            <th id="Th5" runat="server">
                <asp:LinkButton ID="lnkTelefon" runat="server" Text="id_Telefon" />
            </th>
        </tr>
        <tr runat="server" id="ItemPlaceholder">
        </tr>
    </table>
</LayoutTemplate> 
```

在 *.css 文件中：

```
.myClass
{

}

.myClass:hover
{
background-color: Green;
} 
```

# android - Android 将位图保存到 SD 卡

> ID：11846108
> 
> 赞同：21
> 
> 时间：2012-08-07T12:34:26.193
> 
> 标签：android, image, bitmap, alert

我有一个按钮，当我点击它时，我希望图像被保存到 sd 卡（或内部存储，如 htc one x 我们没有像 sd 卡这样的外部存储）

这是我的代码：

```
 sd.setOnClickListener(new View.OnClickListener() {

            public void onClick(View v) {
                // TODO Auto-generated method stub
                MpClick.start();
                File myDir=new File("/sdcard/Saved_images");
                myDir.mkdirs();
                Random generator = new Random();
                int n = 10000;
                n = generator.nextInt(n);
                String fname = "Image-"+ n +".jpg";
                File file = new File (myDir, fname);
                if (file.exists ()) file.delete (); 
                try {
                       FileOutputStream out = new FileOutputStream(file);
                       bitMapToShare.compress(Bitmap.CompressFormat.JPEG, 600, out);
                       out.flush();
                       out.close();

                } catch (Exception e) {
                       e.printStackTrace();
                }
            }
        }); 
```

以及如何让一条消息出现在其中，上面写着“您的图像已保存”。像警报一样，但持续 2 秒然后消失

* * *

## 回答 #1

> 赞同：92
> 
> 时间：2012-08-07T12:37:06.507

试试这个

```
private void SaveImage(Bitmap finalBitmap) {

   String root = Environment.getExternalStorageDirectory().toString();
   File myDir = new File(root + "/saved_images");    
   myDir.mkdirs();
   Random generator = new Random();
   int n = 10000;
   n = generator.nextInt(n);
   String fname = "Image-"+ n +".jpg";
   File file = new File (myDir, fname);
   if (file.exists ()) file.delete (); 
   try {
       FileOutputStream out = new FileOutputStream(file);
       finalBitmap.compress(Bitmap.CompressFormat.JPEG, 90, out);
       out.flush();
       out.close();

   } catch (Exception e) {
       e.printStackTrace();
   }
} 
```

并将其添加到清单中

```
 <uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" /> 
```

看看这个答案[Android将文件保存到外部存储](https://stackoverflow.com/a/7887114/964741)

**编辑**：通过使用此行，您可以在图库视图中查看保存的图像。

```
sendBroadcast(new Intent(
Intent.ACTION_MEDIA_MOUNTED,
        Uri.parse("file://" + Environment.getExternalStorageDirectory()))); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-07T12:37:02.990

使用**Toast 消息**

像

```
Toast.makeText(Your_class_name.this,
                    "Your image is saved to this folder", Toast.LENGTH_LONG)
                    .show(); 
```

# android - 无法使用 eclipse 在 Android 4.0 mini PC 上安装应用程序

> ID：11846114
> 
> 赞同：0
> 
> 时间：2012-08-07T12:34:35.400
> 
> 标签：android, eclipse

我想在 Android 4.0 迷你电脑上安装我的应用程序。问题是当我通过 USB 将它连接到我的笔记本电脑时，笔记本电脑找不到任何新设备。太好了，我无法上传我的应用程序。

我还检查了是否启用了 USB 调试以及是否有任何驱动程序，但我找不到任何有用的东西。

也许有人遇到过和我一样的问题，可以帮忙吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T13:17:35.597

您可以通过 wifi 使用 adb。在 Android ICS+ 中，它通常是内置的，因此无需下载第三方应用程序即可通过 wifi 连接 adb。只需检查设置中的开发人员选项。然后记下您的本地 IP 地址并运行：

```
adb connect <your ip adress> 
```

这应该有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T22:24:53.460

嗨有同样的问题

找到两个答案：

1）更换USB线（不是我的问题，但已知可以工作）

2）安装从[博客中找到的](http://colonelzap.blogspot.co.nz/2012/01/allwinner-a10-adb-drivers.html)[32](http://www.kmods.net/android/download_file2.php?pid=18) [位64位](http://www.kmods.net/android/download_file2.php?pid=17)驱动程序（这个对我有用）

希望这可以帮助

# hibernate - Hibernate 多对多关系：如何修复 org.hibernate.exception.GenericJDBCException：无法初始化集合异常？

> ID：11846117
> 
> 赞同：0
> 
> 时间：2012-08-07T12:34:50.057
> 
> 标签：hibernate, many-to-many, associations

我正在使用休眠站点上的 hibernate_reference.pdf 使用休眠多对多关联。我正在使用文档中描述的相同实体 Event.java 和 Person.java。

我看到许多人面临“无法初始化集合异常”并且许多人解决了这个问题，但堆栈溢出帖子中提到的解决方案都没有解决我的问题。可能是这些解决方案不适用于多对多关联，或者我的配置有问题。以下是我的 hbm.xml 文件：

事件.hbm.xml：

```
<?xml version="1.0"?>
<!DOCTYPE hibernate-mapping PUBLIC 
    "-//Hibernate/Hibernate Mapping DTD 3.0//EN"
    "http://hibernate.sourceforge.net/hibernate-mapping-3.0.dtd">

<hibernate-mapping package="roseindia.tutorial.hibernate">
    <class name="Event" table="EVENTS">

        <id name="id" column="EVENT_ID">
            <generator class="native" />
        </id>

        <property name="date" type="timestamp" column="EVENT_DATE" />
        <property name="title" type="string" />
        <property name="location" type="string" column="LOC" />

        <set name="participants" table="PERSON_EVENT" inverse="true" lazy="false" cascade="all" >
            <key column="EVENT_ID" not-null="true" />
            <many-to-many column="PERSON_ID" class="Person" />
        </set>
    </class>
</hibernate-mapping> 
```

事件.java

```
public class Event implements java.io.Serializable {
    private long id;
    private String title;
    private Date date;
    private String location;

    public Event() {
        //participants = new HashSet<Person>(0);
    }

    private Set participants = new HashSet(0);

    public Set getParticipants() {
        return participants;
    }

    public void setParticipants(Set participants) {
        this.participants = participants;
    }

    @Override
    public int hashCode() {
        final int prime = 31;
        int result = 1;
        result = prime * result + ((date == null) ? 0 : date.hashCode());
        //result = prime * result + (int) (id ^ (id >>> 32));
        result = prime * result
                + ((location == null) ? 0 : location.hashCode());
        //result = prime * result + ((participants == null) ? 0 : participants.hashCode());
        result = prime * result + ((title == null) ? 0 : title.hashCode());
        return result;
    }

    @Override
    public boolean equals(Object obj) {
        if (this == obj)
            return true;
        if (obj == null)
            return false;
        if (getClass() != obj.getClass())
            return false;
        Event other = (Event) obj;
        if (date == null) {
            if (other.date != null)
                return false;
        } else if (!date.equals(other.date))
            return false;

        if (location == null) {
            if (other.location != null)
                return false;
        } else if (!location.equals(other.location))
            return false;

        if (title == null) {
            if (other.title != null)
                return false;
        } else if (!title.equals(other.title))
            return false;
        return true;
    }

    @SuppressWarnings("unchecked")
    public void addToParticipants(Person person) {
        this.getParticipants().add(person);
        //person.addToEvent(this);
        person.getEvents().add(this);
    }

    public void removeFromParticipants(Person person) {
        this.getParticipants().remove(this);
        person.getEvents().remove(person);
    }

    public long getId() {
        return id;
    }

    private void setId(long id) {
        this.id = id;
    }

    public Date getDate() {
        return date;
    }

    public void setDate(Date date) {
        this.date = date;
    }

    public String getTitle() {
        return title;
    }

    public void setTitle(String title) {
        this.title = title;
    }

    public String getLocation() {
        return this.location;
    }

    public void setLocation(String location) {
        this.location = location;
    }
} 
```

人.hbm.xml：

```
<?xml version="1.0"?>
<!DOCTYPE hibernate-mapping PUBLIC 
    "-//Hibernate/Hibernate Mapping DTD 3.0//EN"
    "http://hibernate.sourceforge.net/hibernate-mapping-3.0.dtd">
<hibernate-mapping package="roseindia.tutorial.hibernate">
    <class name="Person" table="PERSON">
        <id name="id" column="PERSON_ID">
            <generator class="native" />
        </id>
        <property name="age" />
        <property name="firstname" />
        <property name="lastname" />

        <set name="events" table="PERSON_EVENT" inverse="false" lazy="true" cascade="all" >
            <key column="PERSON_ID" not-null="true" />
            <many-to-many column="EVENT_ID" class="Event" />
        </set>

        <set name="emailAddresses" table="PERSON_EMAIL_ADDR">
            <key column="PERSON_ID" />
            <element type="string" column="EMAIL_ADDR" />
        </set>
    </class>
</hibernate-mapping> 
```

人.java

```
import java.util.HashSet;
import java.util.Set;

public class Person implements java.io.Serializable {
    private Set events = new HashSet<Event>();
    private Set emailAddresses = new HashSet();

    public Set getEmailAddresses() {
        return emailAddresses;
    }

    public void setEmailAddresses(Set emailAddresses) {
        this.emailAddresses = emailAddresses;
    }

    public void addToEvent(Event event) {
        this.getEvents().add(event);
        //event.addToParticipants(this);
        event.getParticipants().add(this);
    }

    public void removeFromEvent(Event event) {
        this.getEvents().remove(event);
        //event.removeFromParticipants(this);
        event.getParticipants().remove(this);
    }

    public Set getEvents() {
        return events;
    }

    public void setEvents(Set events) {
        this.events = events;
    }

    public Long getId() {
        return id;
    }

    public void setId(Long id) {
        this.id = id;
    }

    public int getAge() {
        return age;
    }

    @Override
    public int hashCode() {
        final int prime = 31;
        int result = 1;
        result = prime * result + age;
        result = prime * result
                + ((firstname == null) ? 0 : firstname.hashCode());
        result = prime * result
                + ((lastname == null) ? 0 : lastname.hashCode());
        return result;
    }

    @Override
    public boolean equals(Object obj) {
        if (this == obj)
            return true;
        if (obj == null)
            return false;
        if (getClass() != obj.getClass())
            return false;
        Person other = (Person) obj;
        if (age != other.age)
            return false;

        if (firstname == null) {
            if (other.firstname != null)
                return false;
        } else if (!firstname.equals(other.firstname))
            return false;

        if (lastname == null) {
            if (other.lastname != null)
                return false;
        } else if (!lastname.equals(other.lastname))
            return false;
        return true;
    }

    public void setAge(int age) {
        this.age = age;
    }

    public String getFirstname() {
        return firstname;
    }

    public void setFirstname(String firstname) {
        this.firstname = firstname;
    }

    public String getLastname() {
        return lastname;
    }

    public void setLastname(String lastname) {
        this.lastname = lastname;
    }

    private Long id;
    private int age;
    private String firstname;
    private String lastname;

    public Person() {
    }
} 
```

ManyToManyExample.java

```
public class ManyToManyExample {

    /**
     * @param args
     */
    public static void main(String[] args) {
        Session session = null;
        try {
            SessionFactory sessionFactory = new Configuration().configure().buildSessionFactory();
            session = sessionFactory.openSession();
            Transaction tx1 = session.beginTransaction();

            System.out.println("Loading Record");
            Event theEvent = (Event) session.get(Event.class, new Long(1));
            session.refresh(theEvent);
            Person person = new Person();
            person.setAge(31);
            person.getEvents().add(theEvent);
            person.setFirstname("RRRRRR");
            person.setLastname("NNNNNN");
            person.getEmailAddresses().add("RRRRRR@yahoo.com");

            theEvent.getParticipants().add(person); // Adding person ref. to event for many to many relation

            session.save(theEvent);
            session.save(person);
            tx1.commit(); 

            System.out.println("Done...");

        } catch (Exception e) {
            e.printStackTrace();
        } finally {
            session.flush();
            session.close();
        }
    }
} 
```

运行上述示例时出现以下错误：INFO DefaultLoadEventListener:129 - Error execution load command org.hibernate.exception.GenericJDBCException: could not initialize a collection: [roseindia.tutorial.hibernate.Event.participants#1] at org.hibernate .exception.SQLStateConverter.handledNonSpecificException(SQLStateConverter.java:82) at org.hibernate.exception.SQLStateConverter.convert(SQLStateConverter.java:70) at org.hibernate.exception.JDBCExceptionHelper.convert(JDBCExceptionHelper.java:43) at org. hibernate.loader.Loader.loadCollection(Loader.java:1351) at org.hibernate.loader.collection.CollectionLoader.initialize(CollectionLoader.java:101) at org.hibernate.persister.collection.AbstractCollectionPersister.initialize(AbstractCollectionPersister.java: 484）在org.hibernate.event.def。DefaultInitializeCollectionEventListener.onInitializeCollection(DefaultInitializeCollectionEventListener.java:60) at org.hibernate.impl.SessionImpl.initializeCollection(SessionImpl.java:1346) at org.hibernate.collection.AbstractPersistentCollection.forceInitialization(AbstractPersistentCollection.java:269) at org.hibernate.engine .PersistenceContext.initializeNonLazyCollections(PersistenceContext.java:745) 在 org.hibernate.loader.Loader.doQueryAndInitializeNonLazyCollections(Loader.java:208) 在 org.hibernate.loader.Loader.loadEntity(Loader.java:1255) 在 org.hibernate。 loader.entity.EntityLoader.load(EntityLoader.java:139) 在 org.hibernate.loader.entity.EntityLoader.load(EntityLoader.java:124) 在 org.hibernate.persister.entity.BasicEntityPersister.load(BasicEntityPersister.java: 2453）在org.hibernate.event.def。DefaultLoadEventListener.loadFromDatasource(DefaultLoadEventListener.java:387) at org.hibernate.event.def.DefaultLoadEventListener.doLoad(DefaultLoadEventListener.java:368) at org.hibernate.event.def.DefaultLoadEventListener.load(DefaultLoadEventListener.java:166) at org .hibernate.event.def.DefaultLoadEventListener.load(DefaultLoadEventListener.java:140) 在 org.hibernate.event.def.DefaultLoadEventListener.proxyOrLoad(DefaultLoadEventListener.java:249) 在 org.hibernate.event.def.DefaultLoadEventListener.onLoad(DefaultLoadEventListener .java:123) 在 org.hibernate.impl.SessionImpl.get(SessionImpl.java:561) 在 org.hibernate.impl.SessionImpl.get(SessionImpl.java:556) 在roseindia.tutorial.hibernate.ManyToManyExample.main( ManyToManyExample.java:24) 引起：java.sql.SQLException:[Microsoft][ODBC SQL Server 驱动程序]在 sun.jdbc.odbc.JdbcOdbc.standardError(JdbcOdbc.java:7113) 在 sun.jdbc.createSQLException(JdbcOdbc.java:6956) 在 sun.jdbc 的描述符索引无效.odbc.JdbcOdbc.SQLGetDataDouble(JdbcOdbc.java:3656) 在 sun.jdbc.odbc.JdbcOdbcResultSet.getDataDouble(JdbcOdbcResultSet.java:5574) 在 sun.jdbc.odbc.JdbcOdbcResultSet.getLong(JdbcOdbcResultSet.java:632) 在 sun. jdbc.odbc.JdbcOdbcResultSet.getLong(JdbcOdbcResultSet.java:650) at org.hibernate.type.LongType.get(LongType.java:26) at org.hibernate.type.NullableType.nullSafeGet(NullableType.java:77) at org .hibernate.type.NullableType.nullSafeGet(NullableType.java:68) 在 org.hibernate.persister.collection.AbstractCollectionPersister.readKey(AbstractCollectionPersister.java:612) 在 org.hibernate.loader.Loader。readCollectionElement(Loader.java:545) at org.hibernate.loader.Loader.readCollectionElements(Loader.java:344) at org.hibernate.loader.Loader.getRowFromResultSet(Loader.java:299) at org.hibernate.loader.Loader .doQuery(Loader.java:384) at org.hibernate.loader.Loader.doQueryAndInitializeNonLazyCollections(Loader.java:203) at org.hibernate.loader.Loader.loadCollection(Loader.java:1344) ... 还有 20 个

我创建人员对象并通过使用 session.get(...) 获取事件来添加事件。对于多对多关系，在将每个对象添加到人员的事件列表之后，我正在做其他事情并将人员添加到事件对象的参与者列表中，这会引发异常。任何有帮助或指导都深表感谢！

我使用 SQL Server 2008 作为数据库。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T12:55:10.333

尝试更改jdbc驱动包，可以使用jtds-1.2.jar，并将驱动类设置为net.sourceforge.jtds.jdbc.Driver

# c++ - 表达式：map/set 迭代器不可递增

> ID：11846119
> 
> 赞同：1
> 
> 时间：2012-08-07T12:34:53.650
> 
> 标签：c++, map, iterator

当程序执行这个私有方法时

```
map<char*, vector<MAILPACK>>::iterator mit;
vector<MAILPACK>::iterator dit;
for(mit=funcs.begin(); mit!=funcs.end(); mit++) {
    TRACE tr;
    tr.crc32 = crc32;
    strncpy(tr.name, (*mit).first, sizeof(tr.name));
    int i = 0;
    for(dit=(*mit).second.begin(); dit!=(*mit).second.end(); dit++){
        tr.nodes[i++] = dit->dwAddr;
    }       
} 
```

我收到如下错误：`Expression:map/set iterator not incrementable`

此函数遍历私有地图`std::map<char*, std::vector<MAILPACK>> funcs;`

我哪里错了？谢谢

PS哦，发现保存地址到tr.nodes的时候没有控制边界。但这不是重点……

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T13:07:34.817

有些`typedef`人不会误入歧途。并*预先增加*您的迭代器，避免无用的迭代器对象副本。

```
typedef vector<MAILPACK> Mailpacks;
typedef map<char*, Mailpacks> MailpackMap;

for(MailpackMap::iterator mit=funcs.begin(); mit!=funcs.end(); ++mit) 
{
  TRACE tr;
  tr.crc32 = crc32;
  strncpy(tr.name, (*mit).first, sizeof(tr.name));
  int i = 0;
  Mailpacks& mail = (*mit).second;
  for(Mailpacks::iterator dit= mail.begin(); dit!=mail.end(); ++dit)
  {
    tr.nodes[i++] = dit->dwAddr;
  }       
} 
```

我同意@Chowlett 的观点，并认为您正在超越您的`tr.nodes`界限并超越您的一个迭代器。由于您在循环期间实例化您的`TRACE`对象，因此很有可能发生这种情况。**当您的迭代器已*****失效***时，您通常会收到`Expression:map/set iterator not incrementable`错误消息。

 *有什么理由你的`tr.nodes`会员也不能成为矢量吗？

```
tr.nodes.push_back(dit->dwAddr); 
```

我可能是错的，更多信息总是有帮助的。*

# jquery - 使用 jQuery 切换图像

> ID：11846124
> 
> 赞同：0
> 
> 时间：2012-08-07T12:35:00.447
> 
> 标签：jquery, image

我发现这是我需要的，但我需要能够在最后一次单击时切换回第一个原始图像。

所以我有第一张图片，我点击改变它，然后我需要再次点击它来显示第一张图片。

这是小提琴 [http://jsfiddle.net/maniator/Sevdm/的链接](http://jsfiddle.net/maniator/Sevdm/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T12:40:07.340

您可以利用可以在 JS 元素上存储任意属性的事实，例如：

```
$(function() {
    $('.menulink').on('click', function() {
        var img = document.getElementById('bg');
        if (img.old) {  // restore the original
            img.src = img.old;
            delete img.old;
        } else {        // store original, and change
            img.old = img.src;
            img.src = 'http://.../';
        }
        return false;
     });
 }); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-07T12:42:03.217

您可以将旧`src`值存储在变量中：

```
$(function() {
    var old_img = '';
     $('.menulink').click(function(e){
        e.preventDefault();
         if(old_img == '') {
            old_img = $("#bg").attr('src');                   
            $("#bg").attr('src',"http://placehold.it/333/3ef/img/picture1.jpg");
         } else {
             $("#bg").attr('src', old_img );
             old_img = '';      
         }
     });
}); 
```

[jsFiddle](http://jsfiddle.net/samsamX/Sevdm/136/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-07T12:54:28.927

另一种解决方案，这让您将所有图像保留在 html 中并根据需要添加更多图像：

```
<a href="" title="Switch" class="menulink">switch me</a>
<img src="http://placehold.it/333/3ef/img/picture1.jpg"/>
<img src="http://placehold.it/333/fe3/img/picture2.jpg"/>​ 
```

还有javascript（这不是很可扩展，但它是一个不错的起点）：

```
$(function() {
    var currentImage = 0;
    $('img').not(':first').hide(0);

    $('.menulink').click(function(e){
        e.preventDefault();
        $('img').eq(currentImage).hide(0);
        currentImage = currentImage >= $('img').length-1 ? 0 : currentImage+1
        $('img').eq(currentImage).show(0);  
    });
}); 
```

见小提琴：http: [//jsfiddle.net/e95K5/](http://jsfiddle.net/e95K5/)

# sql-server - 如何全面了解旧版 SQL 数据库？

> ID：11846127
> 
> 赞同：1
> 
> 时间：2012-08-07T12:35:05.557
> 
> 标签：sql-server

我预计将对 Microsoft SQL Server 2008 上的旧 SQL 应用程序进行（小）更改。它使用多个数据库、许多存储过程、函数和一些 CLR 程序集。

没有*大的文档*，只有周围人头脑中的一些*常识*。

*当您搜索调用存储过程的所有位置*时，您使用什么工具？我不是经验丰富的 SQL 开发人员。我的经验更适合源代码存储在文本文件而不是数据库中的编程语言。

您会推荐哪些工具来学习旧版 SQL 应用程序的内容？

谢谢，彼得

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-07T12:39:30.560

对于具体问题：

> 调用存储过程的所有地方？

您可以使用蛮力，但这会导致一些误报，其中过程名称很简单并且可能自然地出现在代码中（甚至作为另一个对象名称的一部分）或注释中：

```
SELECT OBJECT_SCHEMA_NAME([object_id]), OBJECT_NAME([object_id])
  FROM sys.sql_modules
  WHERE definition LIKE '%your_procedure_name%'; 
```

这也不会捕获对使用动态 SQL 构建的过程的调用，但我认为无论如何都没有完美的包罗万象的解决方案。您还可以发现作业正在调用存储过程的情况：

```
SELECT j.name FROM msdb.dbo.sysjobs AS j
  INNER JOIN msdb.dbo.sysjobsteps AS s
  ON j.job_id = s.job_id
  WHERE s.command LIKE '%your_procedure_name%'; 
```

（对于误报和动态 SQL 存在同样的警告，以及即使它们相关也不会被捕获的嵌套过程调用。）

其他一些想法：

*   Red-Gate 有一个名为[SQL Search](http://www.red-gate.com/products/sql-development/sql-search/)的免费工具，或者更恰当地说，是[SQL Dependency Tracker](http://www.red-gate.com/products/sql-development/sql-dependency-tracker/)。
*   [SQL Digger](http://www.sqldigger.com/)有免费版，但存储过程需要专业版。
*   [您可以在 Management Studio](http://msdn.microsoft.com/en-us/library/bb630261%28v=sql.100%29.aspx)中尝试依赖查看器，但[我并不真正信任底层数据](https://sqlblog.org/2008/09/09/keeping-sysdepends-up-to-date-in-sql-server-2008)。

# wpf - 具有名称绑定的上下文菜单

> ID：11846128
> 
> 赞同：0
> 
> 时间：2012-08-07T12:35:08.317
> 
> 标签：wpf, data-binding, icommand

我正在尝试按名称将元素绑定到 ContextMenu 中的 MenuItem。要绑定的元素：

```
<UserControl x:Class="ATCheckerView.TestsPropagate"
         x:Name="TestPropagateRoot" ... 
```

工作版本：

```
 <HierarchicalDataTemplate x:Key="SchemTemplate">
            <Button Command="{Binding ElementName=TestPropagateRoot, Path=DataContext.vclient.OpenInViewer}" />               
        </HierarchicalDataTemplate> 
```

非工作：

```
 <HierarchicalDataTemplate x:Key="SchemTemplate">                
            <TextBlock Text="{Binding path}">
                <TextBlock.ContextMenu>
                    <ContextMenu>
                        <MenuItem Header="{Binding ElementName=TestPropagateRoot}"
                                  Command="{Binding ElementName=TestPropagateRoot, Path=DataContext.vclient.OpenInViewer}"
                                  CommandParameter="{Binding}" />
                    </ContextMenu>
                </TextBlock.ContextMenu>
            </TextBlock>
        </HierarchicalDataTemplate> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T12:49:00.323

[这](https://stackoverflow.com/questions/2617122/wpf-menuitem-command-binding-to-elementname-results-to-system-windows-data-error?rq=1)是一个类似的问题和一个很好的答案，它展示了如何处理上下文菜单绑定的一些方法。

顺便说一句，大多数时候使用 PlacementTarget Binding，例如

```
 <TextBlock Text="{Binding path}">
            <TextBlock.ContextMenu>
                <ContextMenu>
                    <MenuItem Header="Test"
                              Command="{Binding Path=PlacementTarget.DataContext.vclient.OpenInViewer, 
                                                RelativeSource={RelativeSource AncestorType=ContextMenu}}"
                              CommandParameter="{Binding}" />
                </ContextMenu>
            </TextBlock.ContextMenu>
        </TextBlock> 
```

编辑：如果您使用 .net4.0，{x:Reference TestPropagateRoot} 也可能是一个选项

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T14:12:10.997

我的解决方案是：

```
<HierarchicalDataTemplate x:Key="SchemTemplate">
            <TextBlock Text="{Binding path}" 
                       Tag="{Binding DataContext, RelativeSource={RelativeSource Mode=FindAncestor, AncestorType={x:Type local:TestsPropagate}}}">
                <TextBlock.ContextMenu>
                    <ContextMenu>
                        <MenuItem Header="Открыть для просмотра"
                                  Command="{Binding Path=PlacementTarget.Tag.vclient.OpenInViewer, 
                            RelativeSource={RelativeSource Mode=FindAncestor, AncestorType=ContextMenu}}"
                                  CommandParameter="{Binding}" />                                    
                    </ContextMenu>
                </TextBlock.ContextMenu>
            </TextBlock>
 </HierarchicalDataTemplate> 
```

# c# - 在 ToolStripTextBox (C#) 中检测剪贴板中的粘贴

> ID：11846130
> 
> 赞同：4
> 
> 时间：2012-08-07T12:35:16.253
> 
> 标签：c#, clipboard, paste, wndproc

我需要检测用户是否将剪贴板中的文本粘贴到 ToolStripTextBox 中。因此，我创建了一个继承自 ToolStripTextBox 的自定义控件。然后我想重写 WndProc 以捕获 WM_PASTE 消息，但我注意到没有要重写的 WndProc。对于标准 TextBox，所描述的方法可以正常工作。

有什么建议可以从 ToolStripTextBox 上的剪贴板检测粘贴吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T13:33:29.207

`WndProc`in`ToolStripTextBox`似乎遥不可及。出于好奇，我进行了一些搜索，发现了那个答案-https: [//stackoverflow.com/a/4688745/168719](https://stackoverflow.com/a/4688745/168719)

如果 using`ToolStripControlHost`不是一个选项，对于需要自定义处理 WndProc 的场景，还有其他巧妙的解决方案：

[http://bytes.com/topic/c-sharp/answers/279168-toolstriptextbox-右键单击](http://bytes.com/topic/c-sharp/answers/279168-toolstriptextbox-right-click)

> Nicholas Paldino [.NET/C# MVP]
> 
> 我只是注意到了。为了解决这个问题，您可以通过调用 TextBox 属性来获取托管的 TextBox。然后，您应该能够创建一个派生自 NativeWindow 的类，该类覆盖 WndProc 方法以忽略上下文菜单消息[或拦截 WM_PASTE，显然...] 当您获取文本框属性时，获取句柄并分配句柄到您覆盖的 NativeWindow 类。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T12:53:35.607

如果您在 Windows[Windows forms / WPF] 中，您可以使用剪贴板来检测数据。

```
if (Clipboard.GetDataObject().GetDataPresent(DataFormats.Text))
            {

            richTextBox1.Paste();
            MessageBox.Show("You have data in clipboard")

            } 
```

（编辑为包括 WPF）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-07T13:31:00.523

ToolStripTextBox 是一个包含标准文本框的宿主控件，您需要按照您的描述进行操作，但将 ToolStripTextBox.TextBox 替换为您的文本框，不幸的是它是一个只读属性。

因此，您需要从 ToolStripControlHost 派生一个 MyToolStripTextBox 才能更改它托管的控件类型。

# sql - 为什么图遍历比连接快？SQL中的规范化数据有什么教训吗？

> ID：11846131
> 
> 赞同：3
> 
> 时间：2012-08-07T12:35:16.723
> 
> 标签：sql, graph, nosql

由此[，](http://www.google.com/url?sa=t&rct=j&q=&esrc=s&source=web&cd=10&ved=0CGYQFjAJ&url=http://www.manning.com/partner/Neo4J_meap_ch01.pdf&ei=f_8gUJTtMsPKrAfAwIDQAg&usg=AFQjCNE3RPzexxskQs3_oNgJU4DgvTOjHQ)图形数据库执行相当于多表连接的速度要快得多。其次，无论表的大小如何，等价连接的速度都是相同的。

```
depth   seconds records
2         0.016 ~2,500 --mysql
3        30.267 ~125,000
4     1,543.505 ~600,000

2         0.010 ~2,500 --neo4j
3         0.168 ~110,000
4         1.359 ~600,000 
```

我知道 SQL 使用**笛卡尔连接，它实际上与****表的大小和跳数**相乘。我所听到的关于图数据库的所有信息都是“一流的关系结构”。

什么是数据结构+算法，无论跳数和表大小如何，都可以快速遍历图形数据库？

如何在 RDBMS 系统中实现它？我在想左连接和嵌套查询。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T08:28:25.213

图遍历通常比连接快，因为图中的每个节点都会计算其邻居并将其计数添加到结果中。这可以通过多线程等轻松优化。

我认为您不能在 SQL 中执行此操作，但您可以执行一些（递归）代码。这可能会导致大量查询，从而损害您的性能。

所以如果你真的想处理图形数据，你应该使用图形数据库。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-10T08:22:50.773

首先，让我们假设我们正在讨论导致与`ON`仅包含相等条件（例如`a JOIN b ON a.id = b.id`）的子句进行连接的简单查询。我相信这些是图遍历掌握的查询类型。

连接速度较慢，因为它们使用二分搜索来查找满足连接`ON`子句的对，而图遍历则完全避免了这些搜索。图数据库中的一条边链接（存储）它连接的节点的*内存地址*。类似地，节点存储其边缘的内存地址。想要找到连接到节点 1 的节点吗？转到节点 1 的所有边（在内存中/磁盘上），然后对于每个边，只需转到它的另一个节点（在内存中/磁盘上）。瞧！（免责声明：我不确定。我没有看过源代码。但我有一种非常强烈的预感）。

我有一个想法来模拟 RDBMS 中使用哈希索引的图遍历速度，因为哈希索引的相等查找是 O(1)（而不是二进制搜索的 O(log n)）。希望我会带着一些测试结果回到这篇文章。

# java - 切换 Eclipse 版本时生成路径错误

> ID：11846132
> 
> 赞同：2
> 
> 时间：2012-08-07T12:35:24.397
> 
> 标签：java, eclipse, classpath

我最近从 Eclipse Indigo 切换到 Eclipse Juno。我的想法是我可以将它指向我在 Indigo 中使用的同一个工作区。这确实有助于引入我的项目（在多个包中分配），但是我现在收到 176 个错误，主要是这两个：

```
The project cannot be built until build path errors are resolved

Unbound classpath variable:'M2_REPO/com/some_path/some.jar' in project 'my_project' 
```

关于如何解决这个问题的任何想法？我真的更喜欢使用朱诺。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-07T12:39:33.153

## 什么是 M2_REPO 变量？

**[从这里](https://stackoverflow.com/a/4517576/325742)**摘录：

> M2_REPO 是一个变量，用于定义 maven 存储库在磁盘上的位置

## 检查 Maven 设置

我建议您检查您的 Maven 安装是否设置正确。您是否曾经在旧的 eclipse 中使用过 m2e 插件？如果是这样，可能值得检查一下 Juno 中是否有相同的内容。您在首选项中看到“Maven”选项吗？如果是这样，请检查以下内容`Preferences -> Maven -> Installations`：

![马文](../Images/0e3fda51c45df3d501d5a5b44ccce89b.png)

如果该插件存在并且设置正确，您应该已经有一个 M2_REPO 变量。如果没有，请尝试添加您拥有的当前 Maven 安装。

## 手动添加 M2_REPO

如果 maven 设置一切正常，可以手动添加 M2_REPO 类路径变量，如下所示。

`Preferences -> Java -> Build Path -> Classpath Variables`通过单击转到并添加一个新条目`New`，然后输入以下详细信息：

```
Name = M2_REPO 
Path = C:\Users\jindala\.m2\repository 
```

一旦你这样做了，你的 Classpath Variables 对话应该是这样的：

![添加工作区变量](../Images/9f7436a9b4ebf0475bfd1d5ebfe53811.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T12:44:00.100

如果您在 Eclipse Indigo 中一切正常，那么只需打开 Eclipse Indigo 并将首选项导出（文件->导出->常规-首选项选择全部导出）到文件（name.epf）并通过文件将它们导入新的 Eclipse 版本->导入->General_Preferences

# .net - 如何在 Windows 8 .net Metro Style 应用程序上将 gridview 中特定数量的项目显示为不同的屏幕尺寸？

> ID：11846134
> 
> 赞同：1
> 
> 时间：2012-08-07T12:35:29.713
> 
> 标签：.net, windows, xaml, windows-8

如何在 Windows 8 .net Metro Style 应用程序上将 gridview 中特定数量的项目显示为不同的屏幕尺寸？

我尝试使用 VariableSize Wrapgrid “MaximumRowsorColumns”，但这只限制了网格视图项的行，我见过一些应用程序，当有 2 行时，它们每组显示 4 个项目 - 当有 3 行时（因为更大的屏幕。），它们每组显示 8 个项目。但那些是 .JS 应用程序。

是否可以根据当前在屏幕上显示的行显示项目的数量？

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T13:37:33.477

Metro Framework 应该会在不同的屏幕尺寸上自动调整项目的大小。也就是说，如果您将 UI 设计为流利的。如果它是静态的，那么无论您的屏幕尺寸是多少，它都会看起来像这样。如果您注意到屏幕尺寸较小，则启动屏幕的 GridViewItem 最多只能显示 3 行，但如果屏幕尺寸（分辨率）较大，则最多需要 4 行。

回答你的问题：是的，这是可能的。

# r - 改进 R 函数中的 for 循环

> ID：11846135
> 
> 赞同：0
> 
> 时间：2012-08-07T12:35:30.667
> 
> 标签：r, function, loops

我已经构建了一个基本函数来从我对几个变量感兴趣的 3 个模型中提取 AIC 和 BIC 值。但是，当它运行时，我的计算机经常停止并说它无法为向量分配 200MB（我正在使用一个大型数据集 - 超过 500K 案例，是的，我已将内存限制增加到最大 4000）。

如果我一次选择几个变量，我实际上已经设法运行它。我有兴趣一口气实际运行该函数，但也改进了我的函数代码，这样我就不必在运行它之前删除其他所有内容，也可能不必等待 30 分钟。我可能会使用修改后的 AIC 和 BIC 公式并添加其他内容，所以我宁愿保持 AIC 和 BIC 向量化不变，而不是切换到其他逻辑回归函数。我已经玩过它并添加了诸如 rm(model1) 之类的东西，但它可能几乎没有什么区别。您能否建议解决内存分配问题并可能加快功能的代码？

非常感谢

*功能：*

```
myF<-function(mydata,TotScore,group){
  BIC2<-BIC1<-BIC0<-AIC2<-AIC1<-AIC0<-rep(NA,length(ncol(mydata)))
  for (i in (1:ncol(mydata))){
    M0<-glm(mydata[,i] ~ TotScore,family=binomial,data=mydata,x=F,y=F,model=F)
    AIC0[i]<-extractAIC(M0)[2]
    BIC0[i]<-extractAIC(M0,k=log(length(M0$fitted.values)))[2]
    rm(M0)
    M1<-glm(mydata[,i] ~ TotScore+group,family=binomial,data=mydata,x=F,y=F,model=F)
    AIC1[i]<-extractAIC(M1)[2]
    BIC1[i]<-extractAIC(M1,k=log(length(M1$fitted.values)))[2]
    rm(M1)
    M2<-glm(mydata[,i] ~ TotScore+group+TotScore*group,family=binomial,data=mydata,x=F,y=F,model=F)
    AIC2[i]<-extractAIC(M2)[2]
    BIC2[i]<-extractAIC(M2,k=log(length(M2$fitted.values)))[2]
    rm(M2)
  }
  Results<-cbind(AIC0,AIC1,AIC2,BIC0,BIC1,BIC2)
  rownames(Results)<-names(mydata)
  return(Results) 
} 
```

PS该模型可以尝试使用

```
##Random dataset example
v1<-sample(0:1, 500000, replace=TRUE, prob=c(.80,.20))
v2<-sample(0:1, 500000, replace=TRUE, prob=c(.85,.15))
v3<-sample(0:1, 500000, replace=TRUE, prob=c(.95,.05))
mydata<-as.data.frame(cbind(v1,v2,v3))
TotScore=rowSums(mydata)
group<-(rep (1:5,100000))
myF(mydata,TotScore,group) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T15:41:55.783

具有离散预测变量的二项式数据的好处是您可以聚合数据而不会丢失信息

```
set.seed(12345)
v1<-sample(0:1, 500000, replace=TRUE, prob=c(.80,.20))
v2<-sample(0:1, 500000, replace=TRUE, prob=c(.85,.15))
v3<-sample(0:1, 500000, replace=TRUE, prob=c(.95,.05))
mydata<-as.data.frame(cbind(v1,v2,v3))
mydata$TotScore <- rowSums(mydata)
mydata$group <- rep (1:5,100000)

library(reshape)
myFun2 <- function(Y, dataset){
  tmp <- as.data.frame(table(TotScore = dataset$TotScore, group = dataset$group, Response = dataset[, Y]))
  levels(tmp$Response) <- c("Failure", "Succes")
  tmp <- cast(TotScore + group ~ Response, data  = tmp, value = "Freq")
  tmp$TotScore <- as.numeric(levels(tmp$TotScore))[tmp$TotScore]
  output <- rep(NA, 6)
  names(output) <- paste(rep(c("AIC", "BIC"), 3), rep(0:2, each = 2), sep = "")
  m <- glm(cbind(Succes, Failure) ~ TotScore, data = tmp, family = binomial,
           model = FALSE, x = FALSE, y = FALSE)
  output[1:2] <- c(AIC(m), BIC(m))
  m <- glm(cbind(Succes, Failure) ~ TotScore + group, data = tmp, family = binomial,
           model = FALSE, x = FALSE, y = FALSE)
  output[3:4] <- c(AIC(m), BIC(m))
  m <- glm(cbind(Succes, Failure) ~ TotScore * group, data = tmp, family = binomial,
           model = FALSE, x = FALSE, y = FALSE)
  output[5:6] <- c(AIC(m), BIC(m))
  output
}

system.time({
  sapply(colnames(mydata)[1:3], myFun, dataset = mydata)
})
   user  system elapsed 
  3.10    0.06    3.15 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T13:24:32.237

```
library(difR)
data(verbal)
verbal$TotScore <- rowSums(verbal[, c(1:24)])
verbal$group <- with(verbal, factor(Gender):factor(Anger > 20))

myFun <- function(Y, dataset){
  output <- rep(NA, 6)
  names(output) <- paste(rep(c("AIC", "BIC"), 3), rep(0:2, each = 2), sep = "")
  m <- glm(as.formula(paste(Y, "~ TotScore")), data = dataset, family = binomial,
      model = FALSE, x = FALSE, y = FALSE)
  output[1:2] <- c(AIC(m), BIC(m))
  m <- glm(as.formula(paste(Y, "~ TotScore + group")), data = dataset, 
     family = binomial, model = FALSE, x = FALSE, y = FALSE)
  output[3:4] <- c(AIC(m), BIC(m))
  m <- glm(as.formula(paste(Y, "~ TotScore * group")), data = dataset, 
      family = binomial, model = FALSE, x = FALSE, y = FALSE)
  output[5:6] <- c(AIC(m), BIC(m))
  output
}

sapply(colnames(verbal)[1:2], myFun, dataset = verbal) 
```

# android - 如何使用 Android 模拟器模拟旋转设备？

> ID：11846137
> 
> 赞同：9
> 
> 时间：2012-08-07T12:35:35.790
> 
> 标签：android, android-emulator

我通过 Ubuntu 上的 SDK 模拟器运行 Android。当您旋转某些设备时，它们会重置布局以匹配（从纵向到横向，或从横向到纵向）。如何在模拟器上模拟这个？

（这与[模拟加速度计是否相同，例如使用 OpenIntents 的 SensorSimulator](https://stackoverflow.com/questions/3921467/how-can-i-simulate-accelerometer-in-android-emulator)，还是还有更多？）

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-08-07T12:37:46.003

您可以使用 KEYPAD_7、Ctrl-F11、KEYPAD_9 或 Ctrl-F12 移动到下一个方向

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-07T12:38:31.677

我想，你需要的是：

**`Ctrl`+`F11`**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-05-07T15:03:42.540

`Ctrl`+`Left`和`Ctrl`+`Right`是你的朋友

# php - magento中付款信息下的google checkout单选按钮

> ID：11846138
> 
> 赞同：0
> 
> 时间：2012-08-07T12:35:37.153
> 
> 标签：php, magento, google-checkout, magento-1.6

我正在使用magento 1.6.2。

我需要在 magento 的付款信息下添加 google checkout 单选按钮，因为我需要它在这里工作，就像 paypal 单选按钮一样.....

默认情况下，magento 中已提供 Google checkout api，但在从后端启用后，google checkout 按钮仅显示在购物车中，而不是付款信息部分下的一页结帐（步骤 4）

我在第 59 行的 methods.phtml 文件中应用以下代码：

```
<?php echo $this->getLayout()->createBlock('googlecheckout/link')->setTemplate('googlecheckout/link.phtml')->toHtml(); ?> 
```

路径：\app\design\frontend\base\default\template\checkout\onepage\payment\methods.pthml

它显示了简单的按钮，但按钮不起作用，并且没有重定向到带有所选产品的谷歌结帐页面我认为它需要表单元素......

谁能告诉我如何在这里插入像贝宝这样的单选按钮而不是谷歌结帐按钮......

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T03:32:02.627

在后端启用 googlecheckout；

找到`Payment.php`in`Model`文件夹，将值设置`$_canUseCheckout`为`true`；

现在你会得到一台收音机，但会有很多问题，好好享受吧。

# django - 对大量数据进行 Django 分页

> ID：11846139
> 
> 赞同：0
> 
> 时间：2012-08-07T12:35:39.653
> 
> 标签：django, django-templates, django-views, django-pagination

我正在使用一个模板来显示一个包含多行的表格。`2000`但是在此实现 django 分页会使它变得太慢，因为数据太多。什么是最好的方法来解决这个问题。或者我怎样才能使分页加载每页 200 行，使页面更快。我怎样才能使页面加载更快

```
 {% extends "base/admin_base.html" %}
   {% load pagination_tags %}

         {% autopaginate response_dict.taggeddata 100 %}
           <div align="right">{% paginate %}</div>
  <form action="/users/saveuser/" method="post">{% csrf_token %}
  <b>
        <table>

         <tr><td><font>*</font>Select Category group for tagging</td><td> 
         <select id="cgroup" onchange="getcategory('1');">
         <!--<option value="-1">Select Category group</option>   -->
         {% for group in response_dict.categorygroup %}
                  <option value="{{group.id}}">{{group.name}}</option> 
         {% endfor %}
         </select>  
         </td></tr>

        </table>
        </b>
        <table  id="box-table-a">
        <colgroup>
        <col class="vzebra-odd">
        <col class="vzebra-even">
        <col class="vzebra-odd">
        <col class="vzebra-even">
        <col class="vzebra-odd">
        <col class="vzebra-even">
        <col class="vzebra-odd">
        <col class="vzebra-even">
        </colgroup>
        <thead>
         <tr><th id="vzebra-comedy" scope="col">Field1</th><th id="vzebra-adventure" scope="col">Field2</th><th id="vzebra-comedy" scope="col">Field3</th><th id="vzebra-adventure" scope="col">Field4</th><th id="vzebra-comedy" scope="col">Field5</th><th id="vzebra-adventure" scope="col">Field6</th><th id="vzebra-comedy" scope="col">Tag</th><th id="vzebra-adventure" scope="col">Actions</th><thead></tr>
        <tbody>  
         {% for td in response_dict.taggeddata %}
           <tr id="{{td.id}}">
           <td width="20%">{{td.field1}}</td>
           <td>{{td.field2}}</td>
           <td>{{td.field3}}</td>
           <td>{{td.field4}}</td>
           <td>{{td.field5}}</td>
           <td>{{td.field6}}</td>
           <td class="tg">Select category</td>
           <td ><img src="/media/img/cancel.png" alt="delete" height="20" width="20" onclick="delete_row('{{td.id}}')"></td>
           </tr>
         {% endfor %}
        </tbody>
        </table>
         <input type="button" value="Add" id="addbtn" onclick="validate();"/>

  </form> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T13:32:02.327

使用基于类的视图， paginate_by ：参见 django.views.generic.list.BaseListView 。此外，如果性能很重要，请使用 ajax 并使用 json 将数据传递到前端。另外我建议您使用 Model.objects.values_list()

像这样的东西：

```
class MovieLandingJSON(JSONResponseMixin, BaseListView):
    """
    Movie landing page movie covers in json format.
    """
    paginate_by = 5
    context_object_name = 'movies'
    queryset = Movie.objects.all()
    values_list = ['id', 'title', 'slug']

    def get_queryset(self):
    """
    Filters  queryset on request
    """
        queryset = super(MovieLandingJSON, self).get_queryset()

        if self.values_list:
            queryset = queryset.values_list(*self.values_list)
        return queryset

from django.core.serializers import serialize
from django.utils.simplejson import dumps, loads, JSONEncoder
from django.db.models.query import QuerySet
from django.utils.functional import curry

class DjangoJSONEncoder(JSONEncoder):
    def default(self, obj):
        if isinstance(obj, QuerySet):
            # `default` must return a python serializable
            # structure, the easiest way is to load the JSON
            # string produced by `serialize` and return it
            return loads(serialize('json', obj))
        return JSONEncoder.default(self,obj)

dumps = curry(dumps, cls=DjangoJSONEncoder)

class JSONResponseMixin(object):
    """
    A mixin that can be used to render a JSON response.
    """
    response_class = HttpResponse

    def render_to_response(self, context, **response_kwargs):
        """
        Returns a JSON response, transforming QuerySet to json.
        """
        response_kwargs['content_type'] = 'application/json'
        return self.response_class(
            self.convert_queryset_to_json(context['object_list']),
            **response_kwargs
        )

    def convert_queryset_to_json(self, queryset):
        if self.values_list:
            return simplejson.dumps(list(queryset))
        else:
            return dumps(queryset) 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-07T15:05:28.790

我在 Django 中使用多达 400 万个数据集的分页。工作没有任何性能问题...

# java - 休眠无法重新连接到 mysql 数据库

> ID：11846144
> 
> 赞同：2
> 
> 时间：2012-08-07T12:35:54.440
> 
> 标签：java, mysql, spring, hibernate, jakarta-ee

在我的 spring-hibernate 应用程序中，我们`org.apache.tomcat.jdbc.pool.DataSource`用于连接池。当我们启动服务器时，我们可以看到与数据库的连接已建立，并且在 mysql 服务停止后服务器开始抛出错误，提示连接丢失。当mysql服务再次启动时，我们是否必须重新启动服务器才能重新建立与数据库的连接？因为即使提供了 autoReconnect=true 参数，应用程序也无法建立与数据库的连接。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-28T19:31:02.580

尝试添加以下参数：

```
validationQuery="SELECT 1"
testOnBorrow="true" 
```

它是如何工作的：连接池在返回连接之前尝试运行validationQuery。如果validationQuesry 失败，dbcp 会丢弃连接，创建一个新连接并将其返回。

这是一个例子：

```
<Resource   name="jdbc/cooldatabase"
            description="Strandls.com license database"
            auth="Container"
            type="javax.sql.DataSource"
            factory="org.apache.tomcat.dbcp.dbcp.BasicDataSourceFactory"
            driverClassName="com.mysql.jdbc.Driver"
            url="jdbc:mysql://localhost:3306/cooldatabase?autoReconnect=true"
            username="cooluser"
            password="coolpassword"
            initialSize="0"
            maxActive="20"
            maxIdle="10"
            minIdle="0"
            maxWait="-1"
            validationQuery="SELECT 1"
            testOnBorrow="true"
            poolPreparedStatements="true"
            removeAbandoned="true"
            removeAbandonedTimeout="60"
            logAbandoned="true"/> 
```

完整详情：[http ://amitcodes.com/2008/07/26/16/](http://amitcodes.com/2008/07/26/16/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-14T17:02:04.367

我尝试使用 dbcp 和 c3p0。我在 dbcp 中发现了某些问题，但 c3p0 工作正常。

```
autoReconnect=true 
```

现在我的应用程序能够自动重新连接到 MySQL DB。

# c - 给定迭代次数，如何检索双 for 循环的索引？

> ID：11846145
> 
> 赞同：1
> 
> 时间：2012-08-06T16:02:12.583
> 
> 标签：c, loops

假设我有一个双 for 循环。

 `````
/*Just a double for loop
*/    
for(int i = 0; i<IMAX; i++){
 for(int j = 0; j<JMAX; j++){
   count++;
   recover_loop_indices(count,IMAX,JMAX); /*this is not real world code.Just to illustrate what I mean*/
 }
} 
````  `我的问题是，给定和`count`，是否可以恢复唯一的循环索引 i 和 j？`IMAX``JMAX`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-06T16:15:46.620

是的，基于计数：

```
i = floor(count / JMAX);
j = count % JMAX; 
```

你根本不需要IMAX。事实上，这通常是人们可以从一系列像素流中重建图像的方式，只要给定流的宽度即可。

编辑：

我假设您想在 count++*之前恢复 i 和 j 的值。*要在 count++ 之后恢复它，请使用 (count-1)。``

# c++ - 将资源包含到 EXE 文件中

> ID：11846152
> 
> 赞同：-1
> 
> 时间：2012-08-07T12:36:16.303
> 
> 标签：c++, visual-studio, mfc

我目前正在使用 MFC 和 VS2012 开发 C++ 软件。里面有很多图片。所有图片都位于“图片”文件夹中，程序在启动时加载它们。

所以问题是当我想创建它的发布时，我必须在其中包含文件夹“图片”，这很荒谬。该程序有点专业，并且提供一个包含所有图片的文件夹不是专业的。

所以我想加载我程序资源中的所有图片。然后所有的图片都将在exe文件中。

我还需要更改图片的加载（我的意思是在窗口中的单个插槽中使用多张图片）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T13:45:31.323

您需要将图像添加为资源，然后您可以加载它们：

```
CBitmap::LoadBitmap(LPCTSTR lpszResourceName)
CBitmap::LoadBitmap(UINT nIDResource) 
```

将从 BITMAP 资源加载图像。

如果您的图像不是 BITMAP，那么创建它们会更容易。否则，您可以查看[此代码项目页面](http://www.codeproject.com/Articles/3537/Loading-JPG-PNG-resources-using-GDI)以加载 JPG 和 PNG。

# silverlight - 将 ListBox 绑定到集合 在 Silverlight 中可能吗？

> ID：11846157
> 
> 赞同：0
> 
> 时间：2012-08-07T12:36:26.283
> 
> 标签：silverlight, binding, silverlight-4.0, listbox, itemsource

在 silverlight 中是否`collection<*>`允许数据绑定？因为我做了以下，没有任何反应

```
<SilverlightToolkit:Accordion Name="ToolboxCategories" SelectionMode="ZeroOrMore">
                <SilverlightToolkit:Accordion.ItemTemplate>
                    <DataTemplate>
                        <TextBlock Text="{Binding Name}"></TextBlock>
                    </DataTemplate>
                </SilverlightToolkit:Accordion.ItemTemplate>
                <SilverlightToolkit:Accordion.ContentTemplate>
                    <DataTemplate>
                        <ListBox x:Name="CategoryControls" ItemsSource="{Binding States}" BorderThickness="0">
                            <ListBox.ItemTemplate>
                                <DataTemplate>
                                    <Canvas>
                                        <TextBlock Text="{Binding Name}"></TextBlock>
                                    </Canvas>
                                </DataTemplate>
                            </ListBox.ItemTemplate>
                        </ListBox>
                    </DataTemplate>
                </SilverlightToolkit:Accordion.ContentTemplate>
            </SilverlightToolkit:Accordion> 
```

`Country`包含类型为 States 属性的类在哪里`Collection<State>`

### 国家

```
Public Class Country
{
  Public Collection<State> States;

  Public string Name{get;set;}
} 
```

### 状态

```
Public Class State
{
  Public string Name{get;set;}
} 
```

### Xaml.cs

```
List<Country> countries = DAL.GetCountries();

ToolboxCategories.ItemSource = countries; 
```

**注意：** 我看到手风琴标题在每个手风琴标题中显示国家名称，但是列表框没有与状态数据绑定。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T05:18:49.210

请让States 成为完整的财产，这将起作用。

```
 public class Country
{
    public Collection<State> States { get; set; }

    public string Name { get; set; }
} 
```

因为当您在内部设置 Binding 时，它会查找对象的 get_Property 方法，并且您没有将 state 作为属性，这就是它不显示的原因。我希望这能帮助你摆脱这个问题。

干杯! 维诺德

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T09:35:42.743

在处理作为 silverlight 中数据绑定控件的数据源的类时。有时您必须使用以下代码进行数据绑定

`ItemsSource="{Binding States,BindsDirectlyToSource=True}"`

# opengl-es-2.0 - 3D 模型和纹理创建

> ID：11846159
> 
> 赞同：1
> 
> 时间：2012-08-07T12:36:27.657
> 
> 标签：opengl-es-2.0, textures, texture-mapping, blender-2.61

我已经尝试解决这个问题一段时间了，似乎我没有在寻找正确的关键字，因为我还没有找到解决方案。我的问题是我想创建一个香蕉风格的纹理 [https://github.com/HBehrens/obj2opengl/blob/master/banana.jpg](https://github.com/HBehrens/obj2opengl/blob/master/banana.jpg) 我在 Blender 中有一个包含各种对象、表面和纹理的 3D 模型我想为这个 3D 对象创建一个单一的纹理，以将其映射到通过将 .obj 导出到头文件而创建的 OpenGL ES 2.0 3D 对象上。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T09:15:52.060

好像您正在寻找渲染烘焙： http:
[//www.blender.org/development/release-logs/blender-243/render-baking](http://www.blender.org/development/release-logs/blender-243/render-baking)

# eclipse-rcp - RCP 运行我的视图部分而不是默认视图

> ID：11846162
> 
> 赞同：0
> 
> 时间：2012-08-07T12:36:33.023
> 
> 标签：eclipse-rcp

我是 RCP 的新手，我已经使用视图运行了 RCP 应用程序，并且根据我的需要创建了一个新视图。问题是当我以前运行程序时它运行默认视图，我应该怎么做才能运行我的视图？？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T16:24:50.873

您是否创建了一个透视图并将其设置为默认值？

# ckeditor - 在 Webcontent 中创建指向 liferay 页面的链接

> ID：11846163
> 
> 赞同：0
> 
> 时间：2012-08-07T12:36:34.500
> 
> 标签：ckeditor, liferay

我是 Liferay 的新手。我正在使用 Liferay 6.0.5 CE。

我创建了一些页面，每个页面都有一些网络内容。

我想在指向另一个页面的 web 内容中创建一个链接。

在网页内容编辑器中，我找到了链接创建器，但我只能选择图像和文档，而不是页面。或者创建指向外部站点的链接，使用它们的绝对 URL。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T14:11:48.610

您可以在“浏览服务器”掩码中执行此操作，请参见屏幕截图：

![在此处输入图像描述](../Images/36597cf4573c80ff216d74e0a36481d4.png)

# perl - 我如何从列表中检查更大的数字？

> ID：11846165
> 
> 赞同：-1
> 
> 时间：2012-08-07T12:36:40.127
> 
> 标签：perl

样本数据是这样的，我可以找到更大的数字，只要第一个和最后一个数字假设为 0？

```
 '3.268160E-02',

                                           '2.433833E-02',

                                           '2.473959E-01',

                                           '4.960246E-06',

                                           '1.470189E-05',

                                           '1.527312E-05',

                                           '8.997553E+01',

                                           '8.981999E+01',

                                           '2.700648E+02',

                                           '2.656095E+02',

                                           '2.719822E+02',

                                           '2.695895E+02' 
```

例如我有 2,4,3 我想检查 2 是否大于 0，或者 2 是否大于 4 我想检查 4 是否大于 2，或者 4 是否大于 3 我想检查 3 是否大于 4，或 3 大于 0

如何？请帮助我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T12:45:11.323

如果您想将它们视为数字，那就去做吧。Perl 会自动完成。您可以对它们进行简单排序：

```
my @sorted_list = sort { $a <=> $b } @numbers; 
```

但是请记住，如果您只想要最大值，排序是昂贵的并且成本太高。

或者您可以使用它[`List::Util`](http://perldoc.perl.org/List/Util.html)来查找最大值或最小值。

```
use List::Util qw(max min);
say max (@numbers);
say min (@numbers); 
```

# java - 使用 DataNucleus 3.x 对 1-N 关系进行片状加载

> ID：11846170
> 
> 赞同：0
> 
> 时间：2012-08-07T12:37:04.270
> 
> 标签：java, mongodb, jdo, datanucleus

我正在使用 DataNucleus 3.0.0-release JDO 实现将我的 Java 应用程序连接到 MongoDB。

我的 CLASSPATH 中的相关 JAR 如下：

*   datanucleus-api-jdo-3.0.0-release.jar
*   datanucleus-core-3.0.0-release.jar
*   datanucleus-jdo-query-3.0.0-release.jar
*   datanucleus-mongodb-3.0.0-release.jar
*   mongo-java-driver-2.5.2.jar

**更新**：这个问题也出现在 3.1 版中，并且与 DataNucleus 的 Level2 缓存有关。请参阅下面的答案以获取解决方法。

我要加载的类如下：

```
@PersistenceCapable(detachable = "true")
public class UserProfile implements Serializable, Cacheable<String> {

    private static final long serialVersionUID = 7132595253084641884L;

    @PrimaryKey
    @Persistent(defaultFetchGroup = "true")
    private String username;

    @Persistent(defaultFetchGroup = "true")
    private String name;

    @Persistent(defaultFetchGroup = "true")
    private String surname;

    @Persistent(embeddedElement = "true", defaultFetchGroup = "true")
    private Map<String, UserProfileSummary> connections;

    ...
} 
```

以下是 UserProfileSummary 类：

```
@PersistenceCapable(embeddedOnly = "true")
public class UserProfileSummary implements Serializable {

    private static final long serialVersionUID = 6120670018375572406L;

    @Persistent(defaultFetchGroup = "true")
    private String username;

    @Persistent(defaultFetchGroup = "true")
    private String fullName;
    ...
} 
```

以下是我尝试加载类型的存储对象的方式`UserProfile`：

```
PersistenceManager pm = MyPersistenceManagerFactory.get().getPersistenceManager();

UserProfile profile = null;
try {
    profile = pm.getObjectById(UserProfile.class, username);
}
catch (JDOObjectNotFoundException onfe) {
    // handle
}
catch (Exception e) {
    // handle
} 
```

问题是有时会正确加载`connections`字段，但有时会像调用. 该字段被标记为在 中，因此每次都应该加载它。`UserProfile``null``getObjectById()``defaultFetchGroup`

**这可能是 DataNucleus 错误（竞争条件？）？还有其他人遇到同样的问题吗？**

*注意：我知道 DataNucleus 3.1.0-release 可用，但我不能使用它，因为[它的增强器有问题](https://stackoverflow.com/questions/11823840/nullpointerexception-running-datanucleus-enhancer-3-1-0-release)。*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T14:32:19.670

我已经关闭了 DataNucleus 二级缓存，从初步测试来看，这个问题似乎已经消失了。

要关闭二级缓存，将以下行添加到您的 jdoconfig.xml：

```
<jdoconfig xmlns="http://java. ... .xsd">
    <persistence-manager-factory name="MyPMF">
        ...
        <property name="datanucleus.cache.level2.type" value="none" />
    </persistence-manager-factory>
</jdoconfig> 
```

# c - 通过引用其他函数来传递缓冲区

> ID：11846171
> 
> 赞同：0
> 
> 时间：2012-08-07T12:37:04.983
> 
> 标签：c, function, pointers

我想将缓冲区指针和缓冲区长度传递给其他函数，然后对这些数据进行操作并打印它。但是当我尝试在函数中打印它时是不可能的。

这是我的代码的一部分：

```
 void process(KOCTET**bufferlist,KUINT16*lenlist){
        KOCTET * Buffer,*temp;
        KUINT16 BufferSize=5000;
        KUINT16 WritePos=0;
        KUINT16 total_bytes;
        Buffer=(KOCTET*)malloc(5000*sizeof(KOCTET));

        total_bytes = stream.CopyIntoBuffer( Buffer, BufferSize, WritePos);

        bufferlist=(KOCTET**)malloc(sizeof(KOCTET*));
        bufferlist=&Buffer;
        lenlist=(KUINT16*)malloc(sizeof(KUINT16));
        lenlist=&total_bytes;

           //Print Buffer in Hexadecimal
           int z=0;
           temp=Buffer;
           while (z<total_bytes){
              printf(" %02X",(unsigned char)*temp);
              temp++;
              z++;
           }
           printf("\n");
    }

    void function ()
    {
         KOCTET**bufferlist;
         KUINT16*lenlist;

         process(bufferlist,lenlist);

         //Print Buffer in Hexadecimal
           int z=0;
           temp=*bufferlist;
           while (z<(*lenlist)){
              printf(" %02X",(unsigned char)*temp);
              temp++;
              z++;
           }
           printf("\n");
    } 
```

谢谢，

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-07T12:43:12.750

以下行有几个问题：

```
bufferlist=(KOCTET**)malloc(sizeof(KOCTET*));
bufferlist=&Buffer;
lenlist=(KUINT16*)malloc(sizeof(KUINT16));
lenlist=&total_bytes; 
```

前两个分配内存，然后用指向局部变量的指针*覆盖*指针，当函数返回时将无效。接下来的两行也是如此。因此，在这四行中，您有两个内存泄漏（分配内存然后更改指向该内存的指针，因此它不再可用）以及当您将指针设置为指向堆栈上仅在内部有效的位置时导致*未定义行为*的原因功能。

要解决这些问题，请更改为以下内容：

```
*bufferlist = Buffer;
*lenlist = total_bytes; 
```

**编辑：**我还注意到你调用这个函数是错误的：

```
KOCTET**bufferlist;
KUINT16*lenlist;

process(bufferlist,lenlist); 
```

这应该改为：

```
KOCTET *bufferlist;
KUINT16 lenlist;

process(&bufferlist, &lenlist); 
```

这将变量声明为指向`KOCTET`和 a的指针`KUINT16`。然后将这些变量的地址传递给`process`，制作它们的指针（即在 的情况下指向指针的指针，`KOCTET`在 的情况下指向`bufferlist`指针）。`KUINT16``lenlist`

现在您不需要`lenlist`在循环中使用取消引用：

```
while (z < lenlist) {
    printf(" %02X", (unsigned char) *temp);
    temp++;
    z++;
} 
```

这个循环现在实际上可以重写为：

```
for (z = 0; z < lenlist; z++)
    printf(" %02X", (unsigned char) bufferlist[z]); 
```

**编辑 2：解释指针和指针运算符**（我希望）

让我们来看看这个示例程序：

```
#include <stdio.h>

int main()
{
    int a = 5;  /* Declares a variable, and set the value to 5 */

    int *p = &a;  /* Declares a pointer, and makes it point to the location of `a` */
    /* The actual value of `p` is the address of `a` */

    printf("Value of a: %d\n", a);  /* Will print 5 */
    printf("Value of p: %d\n", p);  /* Will print a large number */

    printf("The address of a: %d\n", &a);  /* Prints the same large number as `p` above */
    printf("The contents p: %d\n", *p);  /* Prints 5 */

    return 0;
} 
```

`&`我希望这个简单的程序可以帮助你更多地理解指针，特别是和运算符之间的区别`*`。

# php - 使用 .htaccess 重定向不起作用的预定义页面

> ID：11846176
> 
> 赞同：0
> 
> 时间：2012-08-07T12:37:19.607
> 
> 标签：php, .htaccess, redirect

我有一些页面将进入 404 页面，我必须将其中一些页面重定向到其他页面而不是 404。例如。我有页面，我需要将其从 www.site.com/somelink/link 重定向到 www.site.com/?q=somelink

我已经尝试过这种方式：`Redirect 301 www.site.com/somelink/link http://www.site.com/?q=somelink`在 htaccess 中，但这并没有给我结果。我错在哪里？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T13:17:15.253

您需要使用`mod_rewrite`假设您正在使用`apache`：

```
Options +FollowSymLinks
RewriteEngine on
RewriteRule (/somelink/link) http://www.site.com/?q=$1 [R=301,L] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T13:01:13.790

由于我自己的误解，我不得不使用`Redirect 301 /somelink/link http://www.site.com/?q=somelink`

# php - mod_rewrite 和 php $_SERVER['SCRIPT_NAME']

> ID：11846177
> 
> 赞同：0
> 
> 时间：2012-08-07T12:37:23.633
> 
> 标签：php, macos, apache, mod-rewrite

我正在使用 mod_rewrite 创建一个重定向到“代理”脚本，每个请求都会通过。

```
RewriteRule ^(.*\.php)$ dispatcher.php [QSA,L] 
```

重写后，我想知道 dispatcher.php 中最初请求的 URL 的文件路径。因此，我正在使用该`$_SERVER['SCRIPT_NAME']`变量。到目前为止在带有 apache 2.2.16 的 linux 机器上工作，但不能在带有 apache 2.2.22 的 osx 10.8 上工作。

有人知道为什么吗？

# c# - N音频播放位置

> ID：11846183
> 
> 赞同：3
> 
> 时间：2012-08-07T12:37:49.727
> 
> 标签：c#, naudio

我有一个显示音频波形的 GUI 组件。我也可以在这个组件上显示一个光标。问题：如何从 NAudio 接收当前正在发送到声卡/驱动程序的样本？我唯一的想法是在发送样本后从 IWaveProvider 引发一个事件（在 Read 方法中），但由于刷新率低，这种方法不好。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2018-06-16T15:46:29.313

你的问题是从 2012 年开始的，有点老了，但我现在也有同样的问题。我找到了解决方案 - 问题是，`WaveOut`或者`WaveOutEvent`只有一个`PlaybackStopped`事件。

但是您可以使用单独`Thread`的来处理此问题。`Thread`用一个`Loop`和一个`Sleep-Interval`用**一秒**创建一个；在这里您可以跟踪每秒的当前播放时间。

```
this.Thread = new Thread(new ThreadStart(Run)); // Tracking the Audio-Data on `Run` Method
this.Thread.Start(); 
```

在您的`Run`方法中，您可以处理音频数据，例如：

```
 private void Run() {
        while(true) { // Create an infinite loop
            System.Diagnostics.Debug.WriteLine("PlaybackState: " + this.Wrapper.PlaybackState);

            if(this.Wrapper.PlaybackState == PlaybackState.Playing) {
                System.Diagnostics.Debug.WriteLine("Bytes played: " + this.Wrapper.GetPosition());

                double ms = this.Wrapper.GetPosition() * 1000.0 / this.Wrapper.OutputWaveFormat.BitsPerSample / this.Wrapper.OutputWaveFormat.Channels * 8 / this.Wrapper.OutputWaveFormat.SampleRate;

                System.Diagnostics.Debug.WriteLine("Milliseconds Played: " + ms);
            }

            Thread.Sleep(1000); // Sleep for 1 second
        }
    } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-07T15:51:44.903

如果您正在使用`WaveOut`，您可以将`GetPosition`哪些调用调用到`waveOutGetPosition`函数中，返回已写入 WaveOut 的字节数。由此您可以计算出您的确切位置，但您可能需要考虑重新定位，因为 WaveOut 不会知道这一点。

# php - 在 PHP 中从 jQuery 获取多个 post 值

> ID：11846186
> 
> 赞同：0
> 
> 时间：2012-08-07T12:37:54.020
> 
> 标签：php, javascript, jquery, post

给定以下**jquery**：

```
$.post(path, {one:'alex', two:'thomas'}, function (response) {
    alert(response);
}); 
```

以及以下**PHP**：

```
<?php
  $first = $_POST['one'];
  echo $first;
?> 
```

我如何让它返回响应？

如果我只发送一个变量，它工作正常：

```
$.post(path, 'one=alex', function (response) {
    alert(response);
}); 
```

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-07T12:39:16.297

使用 json。

```
$response = array(
    'first' => $response1,
    'second' => $response2
);
echo json_encode($response);

$.post(path, 'one=alex', function (response) {
    response = JSON.parse(response );
    alert(response.first);
}); 
```

# c# - 如何从form2 c#调用webbrowser

> ID：11846188
> 
> 赞同：0
> 
> 时间：2012-08-07T12:38:04.587
> 
> 标签：c#, webbrowser-control

我在我的程序中采用了两种形式（form1 和 form2）。在form1中，我使用了一个按钮，而在form2中，我使用了一个网络浏览器。

我想通过单击 form1 按钮在 form2 上运行 webbrowser。

但我的程序不工作。

请帮助我，目前如何执行此操作。

这是我的程序代码：

```
public partial class Form1 : Form
{

    public Form1()
    {
        InitializeComponent();
    }

    private void progressBar1_Click(object sender, EventArgs e)
    {

    }

    private void button1_Click(object sender, EventArgs e)
    {
        try 
        {
            webBrowser1.Navigate(textBox1.Text);
        }
        catch(Exception)
        {
            MessageBox.Show("Connect to Internet First","Error",MessageBoxButtons.OK,MessageBoxIcon.Error);
        }
    }

    private void Form1_Load(object sender, EventArgs e)
    {

    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T13:11:11.090

首先，在 form1.designer 中，更改这行代码：

```
private System.Windows.Forms.WebBrowser webBrowser1; 
```

至：

```
public System.Windows.Forms.WebBrowser webBrowser1; 
```

现在，在 form1 button_click 中：

```
 Form2 f = new Form2();
    f.webBrowser1.Navigate("http://www.google.com");
    f.Show(this); 
```

解决方案二：在form1中：

```
private void button1_Click(object sender, EventArgs e)
{
    Form2 f = new Form2();
    f.Url = "http://www.google.com";
    f.Show(this);
} 
```

在表格 2 中：

```
public string Url { get; set; }

    private void Form2_Load(object sender, EventArgs e)
    {
        this.webBrowser1.Navigate(this.Url);
    } 
```

# gwt - gwt项目之间如何建立共享项目？

> ID：11846191
> 
> 赞同：0
> 
> 时间：2012-08-07T12:38:07.640
> 
> 标签：gwt

我有一个 GWT 游戏项目。我想将一些基类提取到一个可以与我所有其他 GWT 游戏项目共享的项目中。就像是：

*   FarmFrenzyFinale (gwt 游戏项目)
*   AcesOverNewYork（gwt 游戏项目）
*   mylib（以上两个可以导入的共享项目）

项目“mylib”将包含一些通用的东西，比如欧几里德距离方法，也可能是其他一些在 GWT 特定类上运行的方法，比如将标签添加到 RootPanel。

在阅读了很多关于这个主题的帖子之后，似乎如果我们希望“mylib”包含在 GWT 客户端代码中，我们需要有特定的包命名和一个 projectname.gwt.xml 文件。应该看起来像：

```
 |- com.me.mylib
 |    |---- mylib.gwt.xml // not sure of the contents here
 |
 |- com.me.mylib.client
 |    |---- classes you want included clientside go here. 
```

以上是正确的吗？如果是这样，在eclipse中创建项目时，我们是只创建一个新的“java项目”，还是应该创建一个新的“Web应用程序”项目？一个新的“web 应用程序”项目将为我们创建一个独立的 gwt 项目，所以我猜我们可以只做一个普通的旧“java 项目”，只要我们设置上面的结构就可以了。

然后在上述设置完成后，我们可以将“mylib”添加到游戏的类路径中（farm frenzy 等）。只需右键单击项目，属性 -> java 构建路径 -> 项目 -> 添加？

谢谢

- - - - 更新 - - - - - - - -

这是我的项目目前的样子：

```
AcesOverNewYork
    |-- com.me.acesovernewyork
    |      |-- acesovernewyork.gwt.xml
    |-- com.me.acesovernewyork.client
           |-- all java files here, great.

mylib (not a gwt project, just a java project)
    |-- com.me.mylib.client
           |-- Foo.java 
```

现在 AcesOverNewYork (AONY) 在类路径中添加了“mylib”作为项目（在 Eclipse 中，右键单击 AONY，属性 -> Java 构建路径 -> 项目 -> 添加 -> “mylib”。

我在 AONY 中使用 Foo 类，编译得很好。当我尝试运行 AONY 时，出现运行时错误：

```
"No source code is available for type com.me.mylib.client.Foo; 
 did you forget to inherit a required module?" 
```

我的 acesovernewyork.gwt.xml 文件包含以下内容：

```
<source path='client'/> 
```

嗯，我在这里还缺少什么？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T14:13:05.833

不知道你有没有听说过maven。实际上这并不重要，但 maven 有一个关于设置多项目 GWT 的教程。即使您不使用 maven，您也应该检查它，因为它包含有用的信息。

[http://mojo.codehaus.org/gwt-maven-plugin/user-guide/multiproject.html](http://mojo.codehaus.org/gwt-maven-plugin/user-guide/multiproject.html)

不打算使用maven的可以跳过POM部分，其余代码都是纯GWT

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T14:24:29.633

*   对于库项目，您可以使用简单的 Java 项目。
*   您不需要“mylib.gwt.xml”
*   是的，您只需右键单击项目，属性-> java 构建路径-> 项目-> 添加

如果您将游戏的 .gwt.xml 文件放入“com.me”（在他们的项目中）并添加`<source path='client' />`，那么您所要做的就是在您的游戏项目中创建一个“com.me.client”包，并在您的库项目中。

# database - html5 数据库在 LIKE 语句中传递变量

> ID：11846196
> 
> 赞同：1
> 
> 时间：2012-08-07T12:38:31.340
> 
> 标签：database, html, variables

我想在 html5 数据库中传递变量进行搜索。贝娄是我想要的例子：

```
var sear= "Hello World"   // for example 
var test = sear.split(" ");
var test3 = "\"%"+ test.join('%\", \"%')+"%\"";

var test4 = [];  

for (var i=2; i<=test.length; i++) {  
    test4[i] = " OR (D_Indications LIKE ?)";  
} 
var test5="SELECT * FROM DEMO WHERE (D_Indications LIKE ?)"+ test4.join(" "); 
```

现在我希望它通过“Hello OR World”搜索数据库，它的代码是。

```
tx.executeSql(test5, [test3],function (tx, results) {
    // display from database
}); 
```

但是当我将变量传递给它时它没有搜索，而是当我输入时它找到了`tx.executeSql(test5, ["%Hello%", "%World%"]`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T10:06:56.610

这个页面应该有帮助.... [http://rickosborne.org/blog/2010/03/html5-in-browser-sql-database-storage/](http://rickosborne.org/blog/2010/03/html5-in-browser-sql-database-storage/)

基本上用 % 包围搜索词变量，然后使用 LIKE 和 ? 作为参数传递给 SQL 引用变量。

所以像这样的事情......

```
var searchWords = "%words%";

tx.executeSql("SELECT * from table WHERE (name LIKE ?);",[searchWords],renderFunction,errorFunction; 
```

# c - 在c中使用递归查找数组的元素

> ID：11846204
> 
> 赞同：0
> 
> 时间：2012-08-07T12:38:57.487
> 
> 标签：c, function, recursion

我想使用递归找到数组的一个元素。该函数接受一个数组和目标值。递归函数检查它是否是给定数组的元素。但不幸的是，我无法在其上设置此代码。该函数始终返回 '1' 。我在哪里犯错？

```
#include <stdio.h>

int isElement(int *a, int target) ;

int main()
{

  int a[] = {3,5,6,4,2,32,15} ;
  int target = 12 ,res  ;

  res = isElement( a, target) ;

  if(res==1)
    printf("its an element of the array\n");

  if(res==0) 
    printf("its not an element of the array\n");

  return 0 ;
}

int isElement(int *a, int target)
{
  int son=0  ;

  printf("array = %d\n",a[0] );

  if(a[1] == '\0')
      son = 0 ;

  else if(target == a[0])
    son = 1 ; 

  else
    son = isElement(&a[1] ,target);

  return son ;

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-07T12:42:54.407

a 不是字符串，因此没有空终止符 ('\0')。你需要传递一个数组长度，否则这个函数将永远在内存中继续存在（直到它找到它）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T12:43:37.983

您的终止条件是 when `a[1] == '\0'`。但是，您的数组不会以 0 结束。因此，您要在堆栈的其余部分之外搜索`target` **数组的边界。**这是**未定义的行为**，所以任何事情都可能发生（你不能抱怨）。但是，在您的特定情况下，它恰好`target`位于`a`堆栈之后，因此一旦您退出`a`，您会看到您正在寻找的相同值，因此始终返回 1。

您应该做的是将定义更改`a`为：

```
int a[] = {3,5,6,4,2,32,15, 0} ;
                           ^^^ 
```

另外，条件：

```
if(a[1] == '\0')
      son = 0 ; 
```

在这样的例子中会给你错误的结果：

```
int a[] = {12, 0};
int target = 12; 
```

因为在检查之前`a[0] == target`，您将此案例标记为失败。因此，您应该将条件更改为：

```
 vvv
if (a[0] == 0)
    son = 0; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-07T12:43:53.610

'a' 不是以空字符结尾的字符串，所以这里的测试：

```
if(a[1] == '\0')
  son = 0 ; 
```

是错的。

您的函数返回 1，因为它一直在读取数组末尾之后调用未定义的行为。在另一台计算机上，我编译并运行它，函数返回 0。在我的机器上，程序找不到 12。但是在你的机器上它的行为不同。这是未定义行为的结果。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-07T12:50:47.620

错误的线路：

```
 if(a[1] == '\0')
      son = 0 ; 
```

int a[] 不以符号 '\0' 结尾，因此您的代码将访问非法内存。

for int a[], for function 应该定义如下：

```
int isElement(int *a, int arraylength, int target) ; 
```

并且在每个递归循环中，arraylength -1。

结束的比较应该是：

```
if(arraylength == 1 && a[0] != target)
son = 0; 
```

# jqgrid - 为什么内联编辑会添加新行？

> ID：11846205
> 
> 赞同：0
> 
> 时间：2012-08-07T12:38:58.423
> 
> 标签：jqgrid

在内联模式下，我添加一个新行，编辑新值，然后单击“保存”按钮到服务器和本地。但是，当我继续单击“编辑”按钮来编辑新行而不是编辑该行时，它会添加一个新行。例如，首先我添加了一个新行 : `{ aa,bb,cc}`，然后想`{ aaaa,bb,cc}`通过单击“编辑”按钮并对其进行编辑来将其更改为，但是 jqGrid 向`oper=add`服务器发送了一个，这导致添加了一个新行。我不明白为什么？

代码如下：

```
<%@ page language="java" import="java.util.*" pageEncoding="UTF-8"%>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0   Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<title>ddddd</title>
<link
href="/education2/jqGrid4.4/themes/redmond/jquery-ui-1.8.2.custom.css"
rel="Stylesheet" />
<link href="/education2/jqGrid4.4/themes/ui.jqgrid.css" rel="Stylesheet" />
<script src="/education2/jqGrid4.4/js/jquery-1.7.2.js"
type="text/javascript"></script>
<script type="text/javascript"
src="/education2/jqGrid4.4/js/jquery-ui-1.8.2.custom.min.js"></script>
<script type="text/javascript"
src="/education2/jqGrid4.4/js/i18n/grid.locale-cn.js"></script>

<script src="/education2/jqGrid4.4/js/jquery.jqGrid.src.js"
type="text/javascript"></script>

<script type="text/javascript">
jQuery(document).ready(function() {
    jQuery("#gridTable").jqGrid({
        url : '/education2/json/searchStudent',
        mtype : "POST",
        datatype : "json",
        colNames : [ 'studentId','studentNo', 'name', 'class'],
        colModel : [ {
            name : 'studentId',
            index : 'studentId',
            width : 55,
            hidden : true,
            hidedlg : true
            key : true,
            editable : true
        }, {
            name : 'studentNo',
            index : 'studentNo',
            width : 150,
            editable : true         
        }, {
            name : 'studentName',
            index : 'studentName',
            width : 150,
            align : "right",
            editable : true
        }, {
            name : 'className',
            index : 'className',
            width : 150,
            align : "right",
            editable : true,
            edittype : 'select',
            editoptions : {
                dataUrl : "/education2/json/classNameStudent"
            }   
        }],
        jsonReader : {
            root : "gridModel",
            records : "record",
            repeatitems : false
        },
        prmNames : {
            search : "search",
            id : "id" 
        },
        rowNum : 10,
        rowList : [ 10, 20, 30 ],
        height : 400,
        //          multiselect : true,
        //          multiboxonly : true,
        pager : jQuery('#gridPager'),
        sortname : 'studentId',
        viewrecords : true,
        altRows : true,
        sortorder : "desc",
        editurl : "/education2/json/editStudent",
        caption : "student"
    });

    jQuery("#gridTable").jqGrid('navGrid', "#gridPager", {
        edit : false,
        add : false,
        del : true
    }, {}, {}, {}, {
        caption : "find",
        Find : "find",
        closeAfterSearch : true
    });

    jQuery("#gridTable").jqGrid('inlineNav', "#gridPager", {

        editParams : {
            successfunc : succesfunc1,
            restoreAfterError : false
        }
    });
});

var succesfunc1 = function(response) {
    var result = eval('(' + response.responseText + ')');
    if (result.success == true) {
        alert("success!");
        return true;
    } else {
        alert(result.message);
        return false;
    }
};

};
</script>
</head>
<body>

<table id="gridTable"></table>
<div id="gridPager"></div>
<br />

</body>
</html> 
```

**更新**

我`$('#'+$.jgrid.jpID(rowid).attr('id', result1.new_id)`用来刷新新行的行 ID（来自@oleg 的想法“如何在 jqGrid 中内联添加后更新列”），并在我`oper=new && id !="new_row"`用来决定它应该是编辑还是添加新行的服务器上。它运行良好，但我必须添加一个 aftersavefunc 方法。

上面的问题我不是很理解。我所做的只是绕过这个问题。

我的问题是我：添加一个新行然后更改它，jqgrid 不更改它，jqgrid 向`"oper=add"`服务器发送一个，这意味着服务器将添加一个新行。

另一个问题是：

```
jQuery("#gridTable").jqGrid('inlineNav', "#gridPager", {

    addParams : {
        addRowParams : {
            keys : true,
            url : '/education2/json/editStudent1?inlinePoer=add'
        }
    },
    editParams : {
        url : '/education2/json/editStudent?inlinePoer=edit',
    }
}); 
```

与我预期的不同，每当我点击内联导航器中的添加、编辑或保存按钮时，只会`'/education2/json/editStudent?inlinePoer=edit'`触发 url : 。似乎 url :`'/education2/json/editStudent1?inlinePoer=add'`不能被解雇，为什么？有人可以帮我吗？

我使用萤火虫和IE。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T14:02:20.050

我认为您缺少的是在下一行中给出 edit:true

```
jQuery("#gridTable").jqGrid('inlineNav', "#gridPager", {

        editParams : {
            successfunc : succesfunc1,
            restoreAfterError : false
        }
    }); 
```

检查这个链接

[http://www.trirand.com/jqgridwiki/doku.php?id=wiki:inline_editing#inlinenav](http://www.trirand.com/jqgridwiki/doku.php?id=wiki:inline_editing#inlinenav)并查看这里的参数。我不确定它只是尝试将编辑视为真实，如果它工作正常，那就太好了......否则当我完成我的办公室工作时，我会查看你的代码。

# android - 在android中创建带边框的动态TableView？

> ID：11846206
> 
> 赞同：2
> 
> 时间：2012-08-07T12:39:00.673
> 
> 标签：android

我想创造这样的。![在此处输入图像描述](../Images/b0fd0fc92ba22890b5aa1f17278ab821.png)

我的代码是..

```
void fillCountryTable() {
  TableRow row;
  TextView tv_lession, tv_price, tv_line;
  CheckBox chkbox;

  int dip = (int) TypedValue.applyDimension(TypedValue.COMPLEX_UNIT_DIP,
    (float) 1, getResources().getDisplayMetrics());

  for (int current = 0; current < lession.size(); current++) {
   row = new TableRow(this);

   TableRow.LayoutParams llp = new TableRow.LayoutParams(
     );
   llp.setMargins(2, 2, 2, 2);// 2px right-margin

   // New Cell
   LinearLayout cell = new LinearLayout(this);

   cell.setBackgroundColor(Color.BLUE);
   cell.setLayoutParams(llp);// 2px border on the right for the cell

   tv_lession = new TextView(this);
   tv_lession.setTextColor(getResources().getColor(color.darker_gray));
   tv_price = new TextView(this);
   tv_price.setTextColor(getResources().getColor(color.darker_gray));
   chkbox = new CheckBox(this);
   chkbox.setId(current);

   tv_lession.setText(lession.get(current));
   tv_price.setText(price.get(current));

   tv_lession.setTypeface(null, 1);
   tv_price.setTypeface(null, 1);

   tv_lession.setTextSize(15);
   tv_price.setTextSize(15);

   tv_lession.setWidth(50 * dip);
   tv_price.setWidth(150 * dip);
   chkbox.setWidth(50 * dip);
   tv_lession.setPadding(20 * dip, 0, 0, 0);

   cell.addView(tv_lession);
   cell.addView(tv_price);
   cell.addView(chkbox);

   // row.setBackgroundColor(color.black);
   row.addView(cell);

   ((TableLayout) findViewById(R.id.course_outline_table)).addView(
     row, new TableLayout.LayoutParams(LayoutParams.FILL_PARENT,
       LayoutParams.WRAP_CONTENT));

   chkbox.setOnCheckedChangeListener(new OnCheckedChangeListener() {

    public void onCheckedChanged(CompoundButton buttonView,
      boolean isChecked) {
     if (isChecked) {
      subTotal += Integer.parseInt(price.get(buttonView
        .getId()));
      total = subTotal + tax;
     } else {
      subTotal -= Integer.parseInt(price.get(buttonView
        .getId()));
      total = subTotal + tax;
     }

     ((TextView) findViewById(R.id.tv_subTotal))
       .setText(subTotal + "");
     ((TextView) findViewById(R.id.tv_total))
       .setText(total + "");
    }
   });

  }
 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T05:41:10.067

**检查此解决方案**：

```
 TableRow row;

        shoppingCardDetails = new ArrayList<ShoppingCardDetails>();

        SoapObject courseOutlineObject = (SoapObject) ParserClass.ResponseVector
                .elementAt(3);

        final Vector courseOutline = (Vector) courseOutlineObject
                .getProperty(0);
        //System.out.println(courseOutline);
        //System.out.println("check record" + courseOutline.size());
        for (int current = 0; current < courseOutline.size(); current++) {

            try {

                row = (TableRow) LayoutInflater.from(this).inflate(
                        R.layout.table_row, null);
                chkbox = (CheckBox) row.findViewById(R.id.chkBox);
                chkbox.setId(current);

                ((TextView) row.findViewById(R.id.coursename))
                        .setText(((SoapObject) courseOutline.elementAt(current))
                                .getProperty("tocName").toString());

                ((TextView) row.findViewById(R.id.tvcourseprice))
                        .setText(((SoapObject) courseOutline.elementAt(current))
                                .getProperty("tocPrice").toString());

                /*
                 * if ((((SoapObject) courseOutline.elementAt(current))
                 * .getProperty("tocLevel") + "").equalsIgnoreCase("0")) {
                 * 
                 * ((LinearLayout) row.findViewById(R.id.llrow))
                 * .setBackgroundColor(Color.parseColor("#F2F5A9"));
                 * 
                 * }
                 */
                if ((((SoapObject) courseOutline.elementAt(current))
                        .getProperty("tocEnrollStatus") + "")
                        .equalsIgnoreCase("true")) {

                    chkbox.setVisibility(View.INVISIBLE);
                    ((TextView) row.findViewById(R.id.tvEnrolled))
                            .setVisibility(View.VISIBLE);
                    ((TextView) row.findViewById(R.id.tvcourseprice))
                            .setVisibility(View.VISIBLE);

                }

                ((TableLayout) findViewById(R.id.course_outline_table))
                        .addView(row);

                chkbox.setOnCheckedChangeListener(new OnCheckedChangeListener() {

                    @overide
                    public void onCheckedChanged(CompoundButton buttonView,
                            boolean isChecked) {

                        try {
                            ShoppingCardDetails shoppingdetails = new ShoppingCardDetails();

                            if (isChecked) {

                                subTotal += 1;
                                total = subTotal;
                                shoppingdetails.name = ((SoapObject) courseOutline
                                        .elementAt(buttonView.getId()))
                                        .getProperty("tocName").toString();
                                shoppingdetails.price = ((SoapObject) courseOutline
                                        .elementAt(buttonView.getId()))
                                        .getProperty("tocPrice").toString();
                                shoppingCardDetails.add(shoppingdetails);

                            } else {
                                subTotal -= 1;
                                total = subTotal;

                                shoppingCardDetails.remove(total);

                            }

                            ((TextView) findViewById(R.id.btnRightHeader))
                                    .setText("" + total);

                            ((TextView) findViewById(R.id.btnRightHeader))
                                    .setPadding(30, 0, 0, 15);
                            ((TextView) findViewById(R.id.btnRightHeader))
                                    .setTextColor(Color.WHITE);

                        } catch (Exception e) {
                            // TODO: handle exception
                        }
                    }
                });
            } catch (Exception e) {
                // TODO: handle exception
            }

        } 
```

# ios - 断开用户与游戏中心的连接

> ID：11846207
> 
> 赞同：1
> 
> 时间：2012-08-07T12:39:00.787
> 
> 标签：ios, game-center, gamekit

我正在使用 Apple 的 GameCenterManager，我想知道是否有办法断开游戏中心认证用户的连接...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-07T12:46:27.903

Apple documentation says that,

> After authenticating their account on a device, that player remains connected on that device, even when the player switches to other applications or reboots the device. A player only disconnects from Game Center only by launching the Game Center application and explicitly signing out.

See : [Apple Doc.](http://developer.apple.com/library/ios/#DOCUMENTATION/NetworkingInternet/Conceptual/GameKit_Guide/Users/Users.html)

So I guess no, User must switch to Game Centre and disconnect their self from there.

* * *

**Potential reason** : Game centre serves to all game apps which supports game centre feature. So, it's better to centralise a gamer's id. Same id for all different games. Now in order to do that they must authenticate gamer from one gaming device and maintain the id in all other application as well.

Now, if you explicitly disconnect from game centre from your app, the user will get confuse when he/she goes to another app and try to upload the score.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-26T04:35:22.087

你必须继续设置。他们单击隐私并查看游戏中心图标。其余的都是不言自明的。只需选择该选项并阻止游戏中心。脾脏

# css - 带有 CSS3 渐变的大块

> ID：11846208
> 
> 赞同：3
> 
> 时间：2012-08-07T12:39:10.117
> 
> 标签：css, canvas, background, gradient, radial

有什么方法可以用 CSS3 径向渐变实现良好的性能大块？就像在这个网站上一样。[http://www.medora.ca/wp-content/themes/medora/images/bgNoise4.jpg](http://www.medora.ca/wp-content/themes/medora/images/bgNoise4.jpg) (3200x1600)

Canvas - 在图像生成期间阻止 JS 并创建超时。

CSS3 - FF 13 因大渐变 (3200x1600) 而过载，当添加该渐变时，即使是简单的 CSS3 标签过渡也非常缓慢。

SVG - 经验太低，不要测试太多，图像质量低于 CSS3

VML——对于IE，没有经验

我提到对于 Chrome 添加这么大的带有径向 CSS3 渐变的块，具有良好的性能。

你知道 CSS3 或画布的任何令人讨厌的技术，可以在没有可见径向线的情况下制作径向渐变吗？

如果您能提供一些示例链接，我将不胜感激。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T16:12:47.970

这就是我想出的。还没有在一个大块上尝试过，但是在这个块上，我看不到可见的径向线：

**HTML：**

```
<div id="gradient_div"></div> 
```

**CSS：**

```
#gradient_div {
  margin: 0 auto;
  border-radius: 20px;
  width: 500px;
  height: 500px;    
  background-color:rgba(171, 171, 171, 0.1);
  background-image: -moz-radial-gradient(50% 0%, circle cover, rgba(171, 171, 171, 0.3), #242bff 50%);
  background-image: -webkit-radial-gradient(50% 0%, circle cover, rgba(171, 171, 171, 0.3), #242bff 50%);
  background-image: -o-radial-gradient(50% 0%, circle cover, rgba(171, 171, 171, 0.3), #242bff 50%);
  background-image: -ms-radial-gradient(50% 0%, circle cover, rgba(171, 171, 171, 0.3), #242bff 50%);
  background-image: radial-gradient(50% 0%, circle cover, rgba(171, 171, 171, 0.3), #242bff 50%);
} 
```

这是一个 JSFiddle 版本，您可以随意使用：http: [//jsfiddle.net/Hz8ME/](http://jsfiddle.net/Hz8ME/)

# php - 缩放，滚动和更新来自谷歌地图等数据库的图像

> ID：11846212
> 
> 赞同：0
> 
> 时间：2012-08-07T12:39:22.233
> 
> 标签：php, jquery, html

我正在开发一个显示来自数据库的图像的应用程序。我想在我的应用程序中添加地图的功能。喜欢

1.  我创建了一个不可见的网格并在该网格中显示来自数据库的图像。数据库中的每个图像都有地址（行，列）。我想在各自的网格 ID 中显示所有图像。

2.  滚动（它应该在滚动时将请求发送到服务器并使用新图像更新页面。）

3.  缩放（它应该放大或缩小，并将请求发送到服务器并使用新图像更新页面，大小取决于放大或缩小值。）

4.  我不想下载所有图像，我只想更新特定区域以防缩放、滚动等。

以下是我的代码，我用于显示和滚动。

```
 <!DOCTYPE html>
 <html>
 <head>
 <style type="text/css">

#overscroll { width: 500px; height: 500px; overflow: hidden; border: solid 1px #000; margin: 30px auto; position: relative; }
#overscroll ul { width: 2500px; margin:0; padding: 0; }
#overscroll li { display: block; float: left; width: 100px; height: 100px; background-color: #FFF; }
#overscroll li.alt { background-color: #C00; }
#overscroll li.no-drag { background-color: #000; color: #FFF; }
#overscroll li.last { clear: both; visibility: hidden; height: 0; padding: 0; }
  </style>

 </head>
 <body>
 <?php
 $dbCon = mysql_connect("localhost", "root", "");
 $db = mysql_select_db("db");
 $sql = "SELECT * FROM images";
 $result = mysql_query ($sql);
 $rows = 3;
 $cols = 3;
 $zoom = 1;

 echo "<div id='overscroll'>";
 echo "<table width='600px' border='1'>";
 for ($i=1; $i<=$rows; $i++){

echo "<tr>";
for ($j=1; $j<=$cols; $j++){
    $data = mysql_fetch_array($result);
    if ($data[3] != '')
        echo "<td align='center'><img src='{$data[3]}' width=100 height=100></td>";
    else
    echo "<td align='center'><img src='abc.jpg' width=100 height=100></td>";    
    }
echo "</tr>";
 }  

 ?>
</div>
<script src="http://code.jquery.com/jquery-latest.js"></script>
<script src="jquery.overscroll.js"></script>
<script>
    $(function(o){  
        o = $("#overscroll").overscroll({
            cancelOn: '.no-drag',
            //hoverThumbs: true,
            //persistThumbs: true,
            //showThumbs: false,
            scrollLeft: 200,
            scrollTop: 100
        }).on('overscroll:dragstart overscroll:dragend overscroll:driftstart overscroll:driftend', function(event){
            console.log(event.type);
        });
        $("#link").click(function(){
            if(!o.data("dragging")) {
                console.log("clicked!");
            } else {
                return false;
            }
        });
    });
</script>
</body>
</html> 
```

我正在使用一个 javascript 插件。

我应该使用 html5 画布吗？对于那种应用程序，如果是，那么任何人都可以给我一些开源参考。我怎样才能完成这项任务？我已经检查了 ajax-zoom 和其他地图 api，但它不是适合我的解决方案。我无法在地理服务器上工作。

请帮忙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T12:45:13.690

使用[http://openlayers.org/进行调查](http://openlayers.org/)

# ruby-on-rails - Ruby on Rails Gem 一般信息

> ID：11846219
> 
> 赞同：1
> 
> 时间：2012-08-07T12:39:53.520
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.1

我想知道什么是宝石？来自 C++、Java，它们似乎是构成类或插件的包，我应该说。

*   但它们是如何工作的？它们中的大多数都在 github 上进行共享，但是当我将它们放在我的 gemfile 中并运行 bundle install 时会发生什么？

*   我是否将当前版本放入本地主机中的临时文件中，或者他的服务器一直从 github 获取信息？7

*   如果他们在服务器上，我可以以某种方式修改 gem 吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T13:21:12.900

宝石是图书馆；Ruby 文件、描述符、测试以及库拥有的任何其他内容的集合。

当您执行`bundle install`.

用于`bundle show [gem_name]`查看 gem 的安装位置。

不过，我建议使用[rvm](https://rvm.io/)或等效工具来管理不同的宝石/红宝石集。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T13:43:02.600

[Ruby Toolbox](https://www.ruby-toolbox.com/)是寻找适合您项目的 gem 的好地方。这个免费[的 railscasts 剧集](http://railscasts.com/episodes/201-bundler)将教您如何管理您的项目 gem。

# ruby-on-rails - 如何检查 params[:some][:field] 是否为零？

> ID：11846227
> 
> 赞同：10
> 
> 时间：2012-08-07T12:40:13.783
> 
> 标签：ruby-on-rails, params, null

我尝试了代码，这增加了很多人 -[如何测试 rails 中是否存在参数](https://stackoverflow.com/questions/5629402/how-to-test-if-parameters-exist-in-rails)，但它不起作用（）：

```
 if ( params.has_key?([:start_date]) && params.has_key?([:end_date]) ) 
```

我认为，那是因为复杂的参数，如果我写这个：

```
 if ( params.has_key?([:report][:start_date]) && params.has_key?([:report][:end_date]) ) 
```

给我错误

```
 can't convert Symbol into Integer 
```

这也不起作用：

```
 if ( params[:report][:start_date] && params[:report][:end_date] ) 
```

给我错误：

```
 undefined method `[]' for nil:NilClass 
```

它总是进入 else 语句。

这是我的参数：

```
 report: 
    start_date: 01/08/2012
    end_date: 10/08/2012 
```

有人能帮我吗 ？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-07T12:47:44.503

```
 if params[:report] && params[:report][:start_date] && params[:report][:end_date] 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2015-12-31T19:26:24.927

[从这里](https://stackoverflow.com/questions/5429790/is-there-a-clean-way-to-avoid-calling-a-method-on-nil-in-a-nested-params-hash/34550819#34550819)交叉发布答案：

[Ruby 2.3.0 使用#dig](http://ruby-doc.org/core-2.3.0_preview1/Hash.html#method-i-dig)使这变得非常容易。

```
h = { foo: {bar: {baz: 1}}}

h.dig(:foo, :bar, :baz)           #=> 1
h.dig(:foo, :zot, :baz)           #=> nil 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2015-11-27T04:48:38.030

我也一直在寻找更好的解决方案。我找到了这个：

[有没有一种干净的方法可以避免在嵌套的参数哈希中调用 nil 上的方法？](https://stackoverflow.com/questions/5429790/is-there-a-clean-way-to-avoid-calling-a-method-on-nil-in-a-nested-params-hash)

```
params[:some].try(:[], :field) 
```

你得到这个值，或者`nil`它不存在。

所以我想让我们使用`try`不同的方式：

```
params[:some].try(:has_key?, :field) 
```

不算太差。如果没有设置，你会得到`nil`vs .。`false`如果`true`参数设置为`nil`.

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2012-08-07T12:47:23.500

看来您需要以下内容

```
 params[:report].present? 
```

或者

```
 params[:report].nil? 
```

或者

```
 params[:report].empty? 
```

取决于您要检查的内容

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-12-09T10:56:11.563

这适用于：

```
if params[:report].has_key?(:start_date) 
```

也许添加这个，以便您还检查它是否不为空：

```
&& !params[:report][:start_date].empty? 
```

# php - 在 Subversion 设置中运行 PHP (wordpress)

> ID：11846228
> 
> 赞同：-1
> 
> 时间：2012-08-07T12:40:19.930
> 
> 标签：php, wordpress, svn, webserver, dreamhost

我正在尝试为团队 Web 开发设置颠覆...我能够将其设置为 svn.mydomain.com（使用 dreamhost），但是当我尝试使用浏览器访问它时（查看网站的结果）全部我看到的是文件列表... PHP 没有被执行。

有什么我做错了吗？我知道 SVN 设置正在工作，因为我能够提交、导入、导出等。

另外，我想知道在 FTP 上我应该能够看到实际文件的位置；svn.mydomain.com 的文件夹是空的。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-08-07T12:44:17.820

您必须签出颠覆项目

在 ubuntu 中：`svn checkout svn.mydomain.com ./`

# hibernate - 如果为空，则休眠填充表

> ID：11846229
> 
> 赞同：3
> 
> 时间：2012-08-07T12:40:22.267
> 
> 标签：hibernate, auto-populate

我有一个实体类，我希望hibernate用一些常量值填充数据库中的相应表：有一些数据的几行（如果其中没有值，或者替换......）我怎样才能让hibernate做到这一点（理想情况下带有注释）？

我正在使用休眠 3.2 和 spring 3.1。

提前致谢！！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T13:26:40.383

默认情况下，如果类路径的根目录中存在此类文件，Hibernate 会尝试加载文件“import.sql”（或由属性 hibernate.hbm2ddl.import_files 指定的文件）的内容。因此，一种“解决方案”是创建一个只包含一个值并具有唯一约束的表。当 Hibernate 尝试加载文件时，由于唯一性约束，它会第二次加载失败。我没有对此进行测试，但我认为它应该可以工作。

现在，如果这听起来对您不利（对我来说确实如此），那么我建议您查看 Hibernate 用于导入此文件的代码：

[https://github.com/hibernate/hibernate-orm/blob/4.1.5.Final/hibernate-core/src/main/java/org/hibernate/tool/hbm2ddl/SchemaExport.java#L432](https://github.com/hibernate/hibernate-orm/blob/4.1.5.Final/hibernate-core/src/main/java/org/hibernate/tool/hbm2ddl/SchemaExport.java#L432)

我将其实现为@Singleton @Startup EJB，或作为上下文侦听器，或类似的东西。这个想法是在每次应用程序启动时运行它。然后代码将检查数据库是否为空，并在需要时导入 SQL 文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T12:52:06.503

您希望何时填充表格？

[我们在应用程序启动时检查数据库状态，并使用 Spring ContextLoaderListener](http://static.springsource.org/spring/docs/3.1.x/javadoc-api/org/springframework/web/context/ContextLoaderListener.html)填充一些表是否为空 - 如下所示：

```
public class ExampleContextLoaderListener extends ContextLoaderListener {
    private static Log LOG = LogFactory.getLog("ContextLoaderListener");

    public void contextInitialized(final ServletContextEvent event) {

        super.contextInitialized(event);

        final DBService dbService =
            getCurrentWebApplicationContext().getBean(DBService.class);
        if (!db.initalized()) {
            LOG.info("DB empty ... adding new data");
            // etc.
        } else {
            LOG.info("DB already initalized.")
        }

    }
} 
```

另请参阅[如何测试表是否为空](https://stackoverflow.com/questions/2932628/how-to-test-if-a-table-is-empty-using-hibernate)。

# python - 处理带有空格的目录 Python subprocess.call()

> ID：11846232
> 
> 赞同：14
> 
> 时间：2012-08-07T12:40:26.893
> 
> 标签：python, subprocess, directory

我正在尝试创建一个扫描文本文件并将参数传递给子进程的程序。一切正常，直到我得到路径中有空格的目录。

我的 split 方法，它分解了参数在空格上绊倒：

```
s = "svn move folder/hello\ world anotherfolder/hello\ world"

task = s.split(" ")
process = subprocess.check_call(task, shell = False) 
```

做，要么我需要函数来解析正确的参数，要么我将整个字符串传递给子进程而不先分解它。

不过我有点失落。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-08-07T12:44:29.113

请改用列表：

```
task = ["svn",  "move",  "folder/hello world", "anotherfolder/hello world"]
subprocess.check_call(task) 
```

如果您的文件包含整个命令，而不仅仅是路径，那么您可以尝试[shlex.split()](http://docs.python.org/library/shlex)：

```
task = shlex.split(s)
subprocess.check_call(task) 
```

# java - sipdroid - 另一个来电在继续时不显示

> ID：11846236
> 
> 赞同：10
> 
> 时间：2012-08-07T12:40:38.727
> 
> 标签：java, android, sip, voip, sipdroid

我已经安装了**SIPDROID**。我在 sip2sip 创建了三个帐户。之后，我使用该帐户之一配置了应用程序。应用程序工作正常。

**问题是：**如果我使用 SIP 对同一部电话进行多次呼叫，是否可以同时处理所有呼叫？
继续第一个通话时，另一个来电未显示在手机屏幕上。
第一个电话被接听，但在第一个电话期间打来的第二个电话呢？
甚至第二个电话也没有显示在屏幕上。使困惑 ！！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-18T05:36:20.800

我开始使用[Sipdroid ，但在对其进行研究和开发人员评论之后，我发现该应用程序缺少一些功能，例如多次呼叫和转移呼叫等......](http://code.google.com/p/sipdroid/)

我不知道，但可能谁是**sip 堆栈专家或有时间做**可以实现缺少的功能，但我不是其中之一，所以我希望获得一个具有所有这些功能的应用程序并通过修改它我可以集成到我的应用程序和[csipsimple](http://code.google.com/p/csipsimple/)就是答案。

然而，将 csipsimple 构建到 Windows 环境中并不容易，但有一些技巧可以做到。因此，请仔细阅读其关于将项目构建到窗口环境中的[wiki 。](http://code.google.com/p/csipsimple/wiki/HowToBuild#For_Windows)

根据 wiki，您可以[构建本机库](http://code.google.com/p/csipsimple/wiki/HowToBuild#Build_native_library)，也可以[不构建本机库](http://code.google.com/p/csipsimple/wiki/HowToBuild#Without_building_the_native_library)继续进行。我建议 Windows 用户在 [不构建本机库](http://code.google.com/p/csipsimple/wiki/HowToBuild#Without_building_the_native_library)的情况下使用。

如果您已经阅读过 wiki，那么在*“不构建本机库”*部分的最后一行就像

> "*要获取 .so 文件，请从 nightly build 网站下载最新的 nightly build 并解压缩 apk 文件（apk 文件只是 zip 文件）。然后获取 lib/ARCH/.so 文件并将其复制到 CSipSimple libs/ARCH/.so* "

**我必须澄清一件重要的事情：**
首先获取csipsimple 的[.apk](http://nightlies.csipsimple.com/trunk/)文件。***.apk***文件的版本必须与您的[csipsimple 源代码的下载版本相同。](http://code.google.com/p/csipsimple/source/browse/trunk/CSipSimple).

在这里，您可以看到源代码版本。下载相同版本的[.apk](http://nightlies.csipsimple.com/trunk/)并按照 wiki 中的说明进行进一步操作。
![在此处输入图像描述](../Images/449e99fc5870164f83b66b96378ad830.png)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-15T10:00:06.703

SipDroid 始终**只支持一条*线路***。这意味着您不能进行电话会议。所以对于这个问题：

> 如果我使用 SIP 对同一部电话进行多次呼叫，是否可以同时处理所有呼叫？

不，您不能同时处理同时呼叫。幸运的是，还有另一个支持多行的开源 SIP 客户端 - [IMSDroid](http://code.google.com/p/imsdroid/)。尽管您可以扩展 SipDroid 以支持多条线路，但这需要付出很多努力。为了支持多条线路，您必须注意的主要对象是： `UserAgent`，`SipProvider`（请注意，它旨在支持 SIP 消息的复用/解复用），`JAudioLauncher`以及`Call`对象。

您在第二个电话未显示时描述的错误不是我亲眼目睹的。这可能是由于您的设备设置，或者由于对原始代码执行的自定义...

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-08-21T14:12:13.563

您可以在 linux 操作系统中轻松构建 csipsimple ...您只需将下载源链接粘贴到 linux commanpropmt 中，对于 Windows，您必须拥有最新的 cygwin 软件才能下载或构建本机库...更好的选择是仅适用于 linux 操作系统...

# css - 更少的变量范围/上下文

> ID：11846237
> 
> 赞同：1
> 
> 时间：2012-08-07T12:40:42.333
> 
> 标签：css, less

我的较少代码是这样的：

```
body {
  @var: white;

  &.blue { @var: blue; }
  &.red { @var: red; }
  &.abc { @var: #badass; }

  background-color: @var;
} 
```

我希望的是，如果`body`有类`.abc`，变量的值`@var`是`#badass`，如果你有类`.blue`，值是`blue`等等。但这不是发生的事情，变量的值不会独立于它们的剩余类而改变。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T12:46:36.263

You need to create a parametric mixin for that:

```
.bg(@color){
  background-color:@color;
} 
```

and then the following code will work:

```
body {
  .bg("white");

  &.blue{ .bg("blue");  }
  &.red { .bg("red");   }
  &.abc { .bg(#bada55); }

} 
```

What you are doing isn't working, because you are reassigning the variable - which works perfectly, but not writing the new value to the class. (It would make absolutely no sense if LESS created new rules, every time you are just reassigning a variable.) Also, like any other programming language, LESS has scope, thus at the time it reaches `background-color: @var;` `@var` has the value `white` assigned to it and creates the rule accordingly. This following will work (but makes no sense of course):

```
body {
  @var: white;

  &.blue{ @var: blue;    background-color: @var;}
  &.red { @var: red;     background-color: @var;}
  &.abc { @var: #bada55; background-color: @var;}
  background-color: @var;
} 
```

# c# - Windows 8 中 WebView 的滚动问题

> ID：11846239
> 
> 赞同：4
> 
> 时间：2012-08-07T12:40:43.623
> 
> 标签：c#, windows-8, windows-runtime, windows-store-apps, winrt-xaml

我正在寻找一种在 Windows 8 应用程序中可靠地滚动高 HTML 页面的方法。我正在制作的应用程序从包中的 XML 文件中获取一些 HTML 格式的文本，并且当前将其显示在 SplitPage 一侧的 WebView 中。

这一切都很好，但是由于 WebView 的工作方式，我在滚动焦点时遇到了问题。首次加载包含 WebView 的 SplitPage 时，WebView 具有滚动焦点（使用滚轮）并按预期工作，但包含其他项目的 ListView 不使用滚轮滚动，即使单击它也是如此。当用户返回主屏幕，然后返回到同一个 SplitPage 时，WebView 无法使用滚轮滚动。

我看过使用 WebViewBrush，但从我尝试过的情况来看，我认为它不会对我有用。似乎没有任何方法可以在屏幕外渲染 WebView 或折叠，然后在屏幕上的 Rectangle 上绘制 WebViewBrush。

对于以另一种方式显示数据或让 WebView 或 WebViewBrush 发挥出色的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T23:25:21.157

似乎 webview 控件在根页面上正常工作，但在多个导航场景中难以保持焦点。这是我用来解决问题的解决方法。

首先，我创建了一个新类作为导航参数传递。

```
class DetailPayload
{
    public Frame DetailFrame { get; set; }
    public string Title { get; set; } // may not be important to your software
} 
```

当我导航到有问题的 web 视图的页面并传递一个 DetailPayload 对象时，我创建了一个新的根框架。

```
DetailPayload dpl = new DetailPayload();
dpl.DetailFrame = this.Frame;
dpl.Title = itemTitle;

Frame rootFrame = new Frame();
rootFrame.Navigate(typeof(DetailPage), dpl);

Window.Current.Content = rootFrame;
Window.Current.Activate(); 
```

我将旧框架存储在要导航到的页面中的“Frame backFrame”中。

```
DetailPayload dpl = (DetailPayload)navigationParameter;
this.backFrame = dpl.Frame; 
```

我更改后退按钮控件以触发不同的事件并删除禁用它的部分（如果它是根框架）。

```
<Button x:Name="backButton" Style="{StaticResource BackButtonStyle}" Click="backButton_Click"/> 
```

然后我在 backButton_Click 函数中调用它返回上一页。

```
Window.Current.Content = this.backFrame;
Window.Current.Activate(); 
```

似乎我必须为每个带有 webview 的页面执行此操作，因为它不是实际控件，因此缺少 .Focus() 方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T16:38:06.763

如果这不起作用并且您的 html 不是任意的，您可以尝试解析 html 并使用 XAML 平台的本机控件重建它。不确定是否有开箱即用的项目，但也许[HTML Agility Pack](http://htmlagilitypack.codeplex.com/)可以提供帮助。

# jaxb - 是否可以在 JAXB Binding 类中使用内置的 ServletContext Annotation？

> ID：11846246
> 
> 赞同：2
> 
> 时间：2012-08-07T12:41:11.990
> 
> 标签：jaxb, jaxb2

**下面是我在 JAXB 解组过程中使用的 JAXB 绑定类。**

```
package com;

@XmlRootElement(name = "request")
@XmlAccessorType(XmlAccessType.FIELD)
public class CustAcct {

    @XmlAttribute
    private String cust;

    @XmlAttribute
    private String acct;

    public CustAcct() {

        super();
    }

    public String getCust() {

        return cust;
    }

    public void setCust(String s) {

        cust = s;
    }

    public String getAcct() {

        return acct;
    }

    public void setAcct(String s) {

        acct = s;
    }

} 
```

**现在我的问题是，我无法在上面的类中包含注释@Context ServletContext。**

```
public class CustAcct {

    @XmlAttribute
    private String cust;

    @XmlAttribute
    private String acct;

                @Context
    ServletContext cont ; 
```

我收到 Exception ，带有此消息

```
javax.servlet.servletcontext is an interface and jaxb can't handle interfaces 
```

请让我知道是否可以在 JAXB 绑定类中使用内置的 ServletContext 注释？

提前致谢 。

**我试过这样，**

```
@XmlRootElement(name = "request")
@XmlAccessorType(XmlAccessType.FIELD)
public class CustAcct {

    @XmlAttribute
    private String acct;

    @XmlTransient
    @Context
    ServletContext con;

    public CustAcct() {

        super();
    }

    public String getAcct() {
    return acct;
    }

    public void setAcct(String s) {
    acct = s;
    }

} 
```

但是当我尝试在 Jersey 服务中访问它时出现以下异常

```
SEVERE: The RuntimeException could not be mapped to a response, re-throwing to the HTTP container
java.lang.NullPointerException 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T13:16:21.917

您可以使用 注释该字段`@XmlTransient`。这可以防止您的 JAXB (JSR-222) 实现将其视为映射数据。

**了解更多信息**

*   [http://blog.bdoughan.com/2011/06/using-jaxbs-xmlaccessortype-to.html](http://blog.bdoughan.com/2011/06/using-jaxbs-xmlaccessortype-to.html)

# java - struts 2拦截器与hibernate拦截器不同吗？

> ID：11846250
> 
> 赞同：0
> 
> 时间：2012-08-07T12:41:22.927
> 
> 标签：java, hibernate, jakarta-ee, struts2, interceptorstack

我有一个使用 struts2 和 hibernate 的应用程序。用于限制用户访问未经授权的页面。我尝试实现 struts 拦截器。但是在 struts.xml 文件中提到拦截器标签后，我的 java 页面中的 httpsession 对象开始抛出`java.lang.NullPointerException`. 我想知道使用休眠时是否不能使用struts拦截器？或者是否有任何称为休眠拦截器的东西来实现我的目标。

**堆栈跟踪**

```
java.lang.NullPointerException
    at com.uac.dao.RoleDaoImpl.listRoles(RoleDaoImpl.java:308)
    at com.uac.biz.RoleAction.viewRoles(RoleAction.java:193)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source)
    at com.opensymphony.xwork2.DefaultActionInvocation.invokeAction(DefaultActionInvocation.java:440)
    at com.opensymphony.xwork2.DefaultActionInvocation.invokeActionOnly(DefaultActionInvocation.java:279)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:242)
    at com.opensymphony.xwork2.interceptor.DefaultWorkflowInterceptor.doIntercept(DefaultWorkflowInterceptor.java:163)
    at com.opensymphony.xwork2.interceptor.MethodFilterInterceptor.intercept(MethodFilterInterceptor.java:87)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:236)
    at com.opensymphony.xwork2.validator.ValidationInterceptor.doIntercept(ValidationInterceptor.java:249)
    at org.apache.struts2.interceptor.validation.AnnotationValidationInterceptor.doIntercept(AnnotationValidationInterceptor.java:68)
    at com.opensymphony.xwork2.interceptor.MethodFilterInterceptor.intercept(MethodFilterInterceptor.java:87)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:236)
    at com.opensymphony.xwork2.interceptor.ConversionErrorInterceptor.intercept(ConversionErrorInterceptor.java:122)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:236)
    at com.opensymphony.xwork2.interceptor.ParametersInterceptor.doIntercept(ParametersInterceptor.java:195)
    at com.opensymphony.xwork2.interceptor.MethodFilterInterceptor.intercept(MethodFilterInterceptor.java:87)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:236)
    at com.opensymphony.xwork2.interceptor.ParametersInterceptor.doIntercept(ParametersInterceptor.java:195)
    at com.opensymphony.xwork2.interceptor.MethodFilterInterceptor.intercept(MethodFilterInterceptor.java:87)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:236)
    at com.opensymphony.xwork2.interceptor.StaticParametersInterceptor.intercept(StaticParametersInterceptor.java:148)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:236)
    at org.apache.struts2.interceptor.CheckboxInterceptor.intercept(CheckboxInterceptor.java:93)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:236)
    at org.apache.struts2.interceptor.FileUploadInterceptor.intercept(FileUploadInterceptor.java:235)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:236)
    at com.opensymphony.xwork2.interceptor.ModelDrivenInterceptor.intercept(ModelDrivenInterceptor.java:89)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:236)
    at com.opensymphony.xwork2.interceptor.ScopedModelDrivenInterceptor.intercept(ScopedModelDrivenInterceptor.java:128)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:236)
    at org.apache.struts2.interceptor.ProfilingActivationInterceptor.intercept(ProfilingActivationInterceptor.java:104)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:236)
    at org.apache.struts2.interceptor.debugging.DebuggingInterceptor.intercept(DebuggingInterceptor.java:267)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:236)
    at com.opensymphony.xwork2.interceptor.ChainingInterceptor.intercept(ChainingInterceptor.java:126)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:236)
    at com.opensymphony.xwork2.interceptor.PrepareInterceptor.doIntercept(PrepareInterceptor.java:138)
    at com.opensymphony.xwork2.interceptor.MethodFilterInterceptor.intercept(MethodFilterInterceptor.java:87)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:236)
    at com.opensymphony.xwork2.interceptor.I18nInterceptor.intercept(I18nInterceptor.java:148)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:236)
    at org.apache.struts2.interceptor.ServletConfigInterceptor.intercept(ServletConfigInterceptor.java:164)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:236)
    at com.opensymphony.xwork2.interceptor.AliasInterceptor.intercept(AliasInterceptor.java:128)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:236)
    at com.opensymphony.xwork2.interceptor.ExceptionMappingInterceptor.intercept(ExceptionMappingInterceptor.java:176)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:236)
    at org.apache.struts2.impl.StrutsActionProxy.execute(StrutsActionProxy.java:52)
    at org.apache.struts2.dispatcher.Dispatcher.serviceAction(Dispatcher.java:468)
    at org.apache.struts2.dispatcher.ng.ExecuteOperations.executeAction(ExecuteOperations.java:77)
    at org.apache.struts2.dispatcher.ng.filter.StrutsPrepareAndExecuteFilter.doFilter(StrutsPrepareAndExecuteFilter.java:76)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:233)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:191)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:127)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:293)
    at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:859)
    at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:602)
    at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:489)
    at java.lang.Thread.run(Unknown Source) 
```

**Struts.xml**

```
<interceptors>
     <interceptor name="authentication" class="com.uac.biz.AuthenticationInterceptor">  </interceptor>  
    <interceptor-stack name="uac_auth">
        <interceptor-ref name="authentication" ></interceptor-ref>  
        <interceptor-ref name="defaultStack"></interceptor-ref>  
     </interceptor-stack>
</interceptors>......
......................
<action name="addUserRedirect" class="com.uac.biz.RoleAction" method="viewRoles">
    <interceptor-ref name="uac_auth" />
    <result name="success">/addUser.jsp</result>
</action> 
```

**使用会话对象的一段代码**

```
roleList=new ArrayList();
System.out.println("XXXXXXXXXXXXXXXXXXXXXXXXXX-----enterd into listRoleeees");
//Criteria roles=session.createCriteria(RolePojo.class);
**Query query= session.createQuery(" from RolePojo");**
result=roles.list();
System.out.println("XXXXXXXXXXXXXXXXXXXXXXXXXX-----after seesion");
for(Iterator it=result.iterator();it.hasNext();){
RolePojo rolepojo=(RolePojo) it.next();
roleList.add(new Pojo(rolepojo.getRoleId(),rolepojo.getRoleName())); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T13:28:43.740

您当然可以同时使用 Struts2 和 Hibernate。Struts2 拦截器是处理您正在寻找的访问安全性的好方法。

在下面链接的问题中，我提供了一个答案，该答案应该为您提供如何使用拦截器来提供此功能的起点。

[struts2 应用程序中的会话](https://stackoverflow.com/questions/5509606/sessions-in-struts2-application/5517526#5517526)

至于您遇到的 NullPointerException，您需要提供堆栈跟踪和 struts.xml 的代码示例，即发生 NPE 的 Java 代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T05:32:12.553

最后我们可以解决这个问题。我们从 [http://www.mkyong.com/hibernate/hibernate-error-an-annotationconfiguration-instance-is-required-to-use/找到了解决方案](http://www.mkyong.com/hibernate/hibernate-error-an-annotationconfiguration-instance-is-required-to-use/)

我们手动创建了 sessionfactory 对象，而不是 @session。

SessionFactory sessionfactory = new AnnotationConfiguration().configure().buildSessionFactory();

谢谢大家。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-08-07T12:46:28.857

You can try Servlet Filter to filter request URL

# android - 通过 Textview 个性化罢工

> ID：11846253
> 
> 赞同：2
> 
> 时间：2012-08-07T12:41:29.307
> 
> 标签：android, textview, text-size

我用它来通过 textView

> textView.setPaintFlags(textView.getPaintFlags() | Paint.STRIKE_THRU_TEXT_FLAG);

但现在我想个性化颜色并将其旋转 45° 以适应内容的对角线。

我绑的东西：

我虽然关于扩展 textview 小部件并覆盖 onDraw 方法..但我在设计方面非常初学者......

那么如何在 textView 上绘制红色（颜色）旋转线有什么帮助吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T15:23:25.057

> 增加玛雅尼的回应

```
@Override
protected void onDraw(Canvas canvas) {
    Paint paint = new Paint();
    paint.setColor(strikeThroughColor);
    paint.setStyle(Paint.Style.FILL);
    paint.setFakeBoldText(true);
    paint.setStrikeThruText(true);
    paint.setStrokeWidth(strikeThroughWidth);
    paint.setFlags(Paint.ANTI_ALIAS_FLAG);
    super.onDraw(canvas);
    float width = getWidth();
    float height = getHeight();
    canvas.drawLine(width / 10, height / 10, (width - width / 10), (height - height / 10), paint);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T12:46:37.723

For that, follow the below steps:

1.  Create a **custom TextView** by extending `View` class
2.  Declare this custom textview inside XML layout same like we do for TextView, Button widgets.

For example:

```
 class CustomTextView extends View {
        private int mColor;
        private int mRotationAngle, mRotationW, mRotationH;

            private String mText;
         public CustomTextView(Context context) { 
            super(context);
            // set default parameters
            mColor = Color.WHITE;
            mRotationAngle = 0;
         }

         public void SetColor(int newcolor) {
            mColor = newcolor;
            this.invalidate();
         } 

       public void SetRotation(int newangle, int neww, int newh) {
        mRotationAngle = newangle;
        mRotationW = neww;
        mRotationH = newh;
        this.invalidate();
    }

       public void SetText(String newtext) {
            mText = newtext;
            this.invalidate();
        }

    @Override 
        protected void onDraw(Canvas canvas) { 
            Paint paint = new Paint(); 
            paint.setStyle(Paint.Style.FILL); 
            canvas.rotate(mRotationAngle,mRotationW,mRotationH);
            canvas.drawText(mText, 0, 0, paint);
            super.onDraw(canvas); 
        } 
    } 
```

**Update:**

Check for [Specifying “strikethrough” on a section of TextView text](https://stackoverflow.com/questions/4301453/specifying-strikethrough-on-a-section-of-textview-text)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-12-20T06:17:04.227

使用以下方法，您可以实现此功能而不会弄乱 Java 代码中的 UI：

```
 <RelativeLayout
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_alignParentStart="true"
                    android:layout_centerVertical="true">

                    <TextView
                        android:id="@+id/textview1"
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:layout_alignParentStart="true"
                        android:text="$99"
                        android:textSize="12sp" />

                    <View
                        android:layout_width="0dp"
                        android:layout_height="1dp"
                        android:layout_centerVertical="true"
                        android:layout_alignLeft="@+id/textview1"
                        android:layout_alignRight="@+id/textview1"
                        android:background="@color/fav_dark_red_color" />
                </RelativeLayout> 
```

# objective-c - 处理自定义 UIView 子类上的手势识别器

> ID：11846257
> 
> 赞同：1
> 
> 时间：2012-08-07T12:41:36.113
> 
> 标签：objective-c

我正在将手势识别器添加到我自己的 UIView 子类中。在识别器处理方法中，我可以访问recognizer.view。

如何将其转换为我自己的 UIView 子类，以便我可以从该方法中访问其自定义属性？

我正在像这样添加识别器

```
UIPanGestureRecognizer *panRecognizer = [[UIPanGestureRecognizer alloc]initWithTarget:self action:@selector(handlePan:)];
panRecognizer.delegate = self; 
```

方法存根是

```
- (void)handlePan:(UIPanGestureRecognizer *)panRecognizer {
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T12:44:59.693

```
MyCustomView *recognizerView = (MyCustomView *) [panRecognizer view]; 
```

# jquery - 如何访问不同页面中的phonegap 数据库？

> ID：11846258
> 
> 赞同：2
> 
> 时间：2012-08-07T12:41:40.133
> 
> 标签：jquery, sqlite, cordova

我已经使用数据库创建了一个数据库并显示在列表视图中，但是我想在另外两个页面中使用相同的数据库，那么如何在多个页面中访问相同的数据库？请通过我的代码..

```
 var db = window.openDatabase("Mydatabase", "1.0", "Just a My DB", 200000); //will create database Mydatabase or open it
    function onDeviceReady(){
        db.transaction(populateDB, errorCB, successCB);
    }
    function populateDB(tx) {
        tx.executeSql('CREATE TABLE IF NOT EXISTS ALLWORDS (id INTEGER PRIMARY KEY AUTOINCREMENT, Word TEXT NOT NULL, Type_Of_Word TEXT NOT NULL)');

    }
    function errorCB(err) {
        alert("error in database : "+err);
    }

    function successCB() {
        alert("successs!");
        db.transaction(queryDB,errorCB);
    }

    function queryDB(tx){
        tx.executeSql('SELECT * FROM ALLWORDS',[],querySuccess,errorCB); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T06:25:12.650

重要的一行是：

```
 var db = window.openDatabase("Mydatabase", "1.0", "Just a My DB", 200000); 
```

如果数据库不存在，它将创建它，如果存在，它将返回到该数据库的连接。

所以你可以把这一行放在一个单独的 js 文件中，我们称之为 global.js，然后将它包含在你需要的每个页面中，之后包含的所有脚本都会知道该变量，例如：

**global.js**

```
...
var db = window.openDatabase("Mydatabase", "1.0", "Just a My DB", 200000); //should be defined in the script itself, not inside of a function.
... 
```

**脚本.js**

```
//in the HTML this is included after the global.js so it knows the db variable
function onDeviceReady(){
        db.transaction(populateDB, errorCB, successCB);
    } 
```

**HTML**

```
//global should always come first
<script src="global.js" type="text/javascript"></script>
<script src="script.js" type="text/javascript"></script> 
```

这样，您只需要定义一次。当然，在全局中，您应该放置许多文件将使用的所有其他函数/变量。

# php - 在 footer.php 中并行显示标题

> ID：11846259
> 
> 赞同：0
> 
> 时间：2012-08-07T12:41:45.463
> 
> 标签：php, html, css

我正在使用以下代码行在`footer`我的`html`页面中显示一些内容：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html>
<body>
    <div class="linksc" id="link_container" style="text-align:left;padding:20px 0;width:940px;margin-right:1000px;margin-left:10px;">
            <div class="links">
                <u>
                    <li>Site Navigation</li>
                    <ul>
                        <li><a href="#">About Us</a></li>
                        <li><a href="#">Contact Us</a></li>
                        <li><a href="#">FAQ's</a></li>
                        <li><a href="#">Privacy Policy</a></li>
                        <li><a href="#">Sell on ULTABUY</a></li>
                        <li><a href="#">Testimonials</a></li>
                        <li><a href="#">Blog</a></li>
                    </ul>
                </ul>
            </div>
            <div class="links" style="text-align:left;padding:20px 0;width:940px;position:relative;left:300px; top:20px">
                <ul>
                    <li>How Site Works</li>
                    <ul>
                        <li><a href="#">How Does ULTABUYWork?</a></li>
                        <li><a href="#">FAQ</a></li>
                        <li><a href="#">Shipment and Delivery</a></li>
                        <li><a href="#">Returns and Warranties</a></li>
                        <li><a href="#">My Account</a></li>
                        <li><a href="#">Payment Methods and Security</a></li>
                        <li><a href="#">Protection and Prevention</a></li>
                        <li><a href="#">Technical Information</a></li>
                    </ul>
                </ul>
            </div>
        </div>

</body>
</html>
<?php

    echo "<p>Copyright &copy 2012</p>";
?> 
```

我想并行显示链接`Site Navigation`（`How Site Works`目前它们显示为一个在另一个下方）。我该怎么做？谢谢并恭祝安康。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T12:44:48.687

添加到第一个 div 和第二个`float:left`的样式。`float:right`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T12:54:31.940

```
display:inline-block;
float:left; 
```

[小提琴](http://jsfiddle.net/jYARF/)

编辑：

这里没有浮动：

[新小提琴](http://jsfiddle.net/jYARF/1/)

# c# - 播放 M3U 或 PLS 文件

> ID：11846260
> 
> 赞同：0
> 
> 时间：2012-08-07T12:41:51.367
> 
> 标签：c#, stream, radio, naudio

我真的需要能够从 C# 播放 M3U 或 PLS 文件。我正在尝试播放这些文件，因为我正在创建一个 Internet 广播应用程序，并且许多 Internet 广播电台为您提供这些类型的文件，可以使用 iTunes、Winamp 等打开这些文件。那么我该如何实现呢？我只想播放、暂停和继续。而已。

提前致谢。

PS我也尝试过NAudio，但它似乎不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T07:07:13.573

您链接到的 M3U 文件中的流是 ShoutCast，当前形式的 NAudio Demo 无法播放。但是，最近有人给我发了一些代码，展示了如何在 NAudio 中播放 ShoutCast 音频。我还没有机会亲自测试它，但这里有一个更新的 NAudioDemo 文件的[链接。](https://gist.github.com/3301840)

# java - Java 中 XSL:FO 到 DOCX 的转换

> ID：11846266
> 
> 赞同：1
> 
> 时间：2012-08-07T12:42:00.587
> 
> 标签：java, xml, openxml, xsl-fo, docx

我需要找到一个用于将 XSL:FO *.fo 文件转换为 OOXML *.docx 格式的 java API 工具。我了解 *.fo -> *.docx 转换由于 OOXML 规范而非常困难。
我找不到任何有效的免费软件解决方案。
我准备花相当多的钱购买全球企业许可证。到目前为止，我发现：

*   [XMLmind XSL-FO 转换器](http://www.xmlmind.com/foconverter/)
*   Ecrion 的[XF 渲染服务器](https://www.ecrion.com/ecrion-develop)
*   myfop - 来自 myfop.blogspot.com 的基于 Apache FOP 的方法 - 下载不起作用...

您是否知道任何其他具有执行 *.fo -> *.docx 转换的 java API 的工具？有免费软件解决方案吗？

由于 OOXML 规范的复杂性，我不想开发新的处理器。我正在寻找免费软件和商业解决方案，但到目前为止我只找到了两个提到的。

类似的问题（未回答） -[如何在 Java 中将 xsl-fo 转换为 docx（Office Open XML）？](https://stackoverflow.com/questions/4372043/how-to-convert-xsl-fo-to-docx-office-open-xml-in-java)

# asterisk - 将文件播放到 confbridge（星号）中的特定频道，以便会议中的其他频道听不到

> ID：11846268
> 
> 赞同：1
> 
> 时间：2012-08-07T12:42:07.507
> 
> 标签：asterisk

我在 confRoom 中有 3 个通道（在星号中使用 confbridge），现在我将 2 个通道静音，以便一次只有一个通道可以说话，现在我希望所有静音的通道通过播放任何文件得到耳语或通知他们被静音了。

confbridge 'toggle_mute' 中有一个选项，当通道在 confbridge 中静音时播放 conf-mute 文件，但这仅适用于 dtmf 事件，我不会在任何 dtmf 事件上使通道静音，因此它对我没有用。请建议我任何其他方式，以便我可以将文件播放到 confbridge 中的特定频道，以便其他频道无法听到该文件。

我将非常感谢任何形式的建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T00:33:00.327

我假设您可以控制这些呼叫..因此您可以延迟触发它们并依次静音。否则另一种方法是使用 BackgroundDetect/WaitForNoise 并在静音后等待特定的噪音事件..和静音可以以基于时间的方式完成

# java - 如何使用 JSON Jersey 从字符串格式中解组嵌套对象

> ID：11846271
> 
> 赞同：0
> 
> 时间：2012-08-07T12:42:13.937
> 
> 标签：java, json, jersey, marshalling, jackson

我知道有类似的问题，但其中任何一个对我有用（或似乎有用）。

我需要执行以下语句：

```
ClassA a = new ClassA(); 
String JSON_str = objectMapper.writeValueAsString(a);

ClassA a1 = (ClassA)objectMapper.readValue(JSON_str, ClassA.class);
ClassB b = (ClassB)a1.getAttribute1(); 
```

如果我执行上面的代码，我会收到以下错误：

“ **java.util.LinkedHashMap 不能转换为 ClassB** ”

方法 getAttribute1 返回定义为“对象属性 1”的 ClassA 属性 1。它将在运行时使用 B 类的对象进行初始化。

请帮助我^^。

先感谢您。莱昂纳多

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T12:52:54.610

正如错误提示的那样，`a1.getAttribute1()`返回一个 type 的对象`java.util.LinkedHashMap`。因此，要么将您的代码更改为：

```
ClassA a1 = (ClassA)objectMapper.readValue(JSON_str, ClassA.class);
java.util.LinkedHashMap b = (java.util.LinkedHashMap)a1.getAttribute1(); 
```

或者检查 ClassA 中填充此字段的代码，并尝试了解它为什么不使用`ClassB`实例填充对象。

# css - 在另一个 div 中重叠一个 div

> ID：11846276
> 
> 赞同：1
> 
> 时间：2012-08-07T12:42:36.047
> 
> 标签：css, html, z-index

我有一个实现为一堆 div 的 HTML 表格（用于制作可滚动表格）。

在其中一个单元格（一个 div）中，我想显示一个与其他单元格重叠的弹出窗口。

像这样：

[http://jsfiddle.net/pFx6m/](http://jsfiddle.net/pFx6m/)

我的标记：

```
<div class="dataRow">
    <div class="firstCell">lalala</div>
    <div class="secondCell">lululu</div>
    <div class="thirdCell">
        <div id="someBigContent"></div>  
        <div class="clearRight"></div></div>
    </div>

<div class="dataRow">
    <div class="firstCell">lalala</div>
    <div class="secondCell">lululu</div>
    <div class="thirdCell">

    </div>
</div>
<div class="dataRow">
    <div class="firstCell">lalala</div>
    <div class="secondCell">lululu</div>
    <div class="thirdCell">lilili</div>
</div>​ 
```

我的 CSS：

```
.dataRow {
    height: 30px;    
    width:300px;
    max-height: 30px;
}

.dataRow > div {
    display: table-cell;
    height: 30px;
    z-index: 0;
    overflow:hidden;
}

.firstCell {
    width: 100px;
    height: 10px;
    background-color: blue;
}

.secondCell {
    width: 100px;
    height: 10px;
    background-color: red;
}

.thirdCell {
    width: 100px;
    height: 10px;
    background-color: yellow;
}

.clearRight {
    clear: right;
}

#someBigContent {
    height:100px;
    width:250px;
    background-color: #000;
    position: relative;
    top: 0px;
    left: -50px;
    float:right;

    z-index: 999;
}
​ 
```

现在我做错了，因为它没有与`someBigContent`（单元格一和二）左侧的单元格重叠，并且它使一些行比他们应该的要大。

有关情况的概述，请参见[this fiddle 。](http://jsfiddle.net/pFx6m/)

我怎样才能让单元格重叠（可能还有下面的内容——不仅仅是表格）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T13:14:40.537

看到一个用 div 做的表是很奇怪的...

但尝试在 CSS 中添加

```
max-width: 100px !important; 
```

对于爆发的 div/table 事情？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-07T15:13:09.267

使用该 CSS 块`#someBigContent`将不会影响行或单元格的大小：

```
.dataRow {
    height: 30px;    
    width:300px;
    max-height: 30px;
}

.dataRow > div {
    display: relative;
    float: left;
    height: 30px;
    z-index: 0;
}

.firstCell {
    width: 100px;
    height: 10px;
    background-color: blue;
}

.secondCell {
    width: 100px;
    height: 10px;
    background-color: red;
}

.thirdCell {
    width: 100px;
    height: 10px;
    background-color: yellow;
}

.clearRight {
    clear: right;
}

#someBigContent {
    height:100px;
    width:250px;
    background-color: #000;
    position: absolute;
    top: 10px;
    left: 10px;        
    z-index: 999;
} 
```

现在您可以调整此块相对于父单元格的位置。

# c++ - 有 2 个类，我如何在上面的类中使用下面类的对象？

> ID：11846280
> 
> 赞同：0
> 
> 时间：2012-08-07T12:42:39.640
> 
> 标签：c++, oop

例如，我有 2 个按以下顺序定义的类...

```
class A
{
     int value;

     printValue(B b)
     {
        cout << b.value
     }
};

class B  
{
   int value;

   printValue(A a)
   {
      cout << a.value;
   }

} 
```

我如何在 A 中使用 B 对象，因为 B 定义如下？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-07T12:45:15.910

您可以将类的声明和实现分开，在声明头文件中前向声明它们，并在函数中使用引用。

档案啊

```
class B; // forward declaration
class A {
  public:
     int value;
     void printValue(const B& b) const; // pass by reference
}; 
```

文件 Bh

```
class A; // forward declaration
class B  {
  public:
   int value;
   void printValue(const A& a) const; // pass by reference
}; 
```

然后，有单独的实现文件。例如，`A`的实现文件`A.cpp`：

```
#include "A.h"
#include "B.h"

void A::printValue(const B& b) const {
   std::cout << b.value;
} 
```

同样对于`B.cpp`.

请注意，我已经修复了`printValue`函数缺少的返回类型，并制作了这些函数`const`。

# javascript - 完全关闭后重新启动应用程序的 EventListener

> ID：11846284
> 
> 赞同：0
> 
> 时间：2012-08-07T12:43:05.620
> 
> 标签：javascript, event-handling, titanium-mobile, appcelerator-mobile

什么是 Ti.App.addEventListener 当应用程序从完全关闭启动时（iPhone：双击主页按钮并从以后台模式运行的应用程序中删除）。我需要一个监听器来监听这个应用程序的新/全新启动。'resume' 在这种情况下不起作用。希望有人知道。

我要求一个 eventListener 检测到应用程序已被关闭以在后台模式下运行ala：

> Ti.App.addEventListener('resume', function(e)

在这种情况下，所有人都“恢复”不是正确的。恢复和暂停不做这项工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T17:52:06.677

您可以直接从 app.js 简单地触发您的应用启动功能。这只会在应用启动期间而不是在应用恢复期间进行评估。

# c# - 为什么在 WPF 中运行一个简单的文本块应用程序而一个带有按钮的简单应用程序会失败

> ID：11846286
> 
> 赞同：0
> 
> 时间：2012-08-07T12:43:12.753
> 
> 标签：c#, wpf, silverlight, silverlight-4.0, wpf-controls

伙计们，当我将下面的代码粘贴到记事本中并保存为 test.xaml 并运行它时，我看到下面的代码给出了运行时错误。

```
<Page xmlns = "http://schemas.microsoft.com/winfx/2006/xaml/presentation"
  xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml">
    <TextBlock Text="Hi Ramakrishnan, good morning"/>
    <Button x:Name=”blueButton”
        Width=”100”
        Height=”40”
        Background=”Blue”
        Content=”Click Me” />
</Page> 
```

但是下面的代码没有给出任何错误，而是在浏览器中非常正确地显示了文本块内容。有什么想法吗 ？我还检查了包括一个文本框来代替上面的按钮，仍然是同样的错误。

```
<Page xmlns = "http://schemas.microsoft.com/winfx/2006/xaml/presentation"
  xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml">
    <TextBlock Text="Hi Ramakrishnan, good morning"/>
</Page> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-07T12:47:38.523

您需要将 TextBlock/Button 包装在 StackPanel 或其他允许其内容中包含多个控件的控件中。

```
<StackPanel Orientation="Horizontal">
        <TextBlock Text="Hi Ramakrishnan, good morning"/>
        <Button x:Name="blueButton"
        Width="100"
        Height="40"
        Background="Blue"
        Content="Click Me" />
    </StackPanel> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-07T12:46:45.873

Your pasted code is using "smart quotes" instead of "normal quotes" on the button.

```
<TextBlock Text="Hi Ramakrishnan, good morning"/>  <-- normal quotes
<Button x:Name=”blueButton”                        <-- smart quotes 
```

Have you edited or saved or pasted this through MSWord, perhaps?

(If this isn't the problem then it's possible that what you've pasted in your question isn't exactly what you have in your Xaml file, in which case you should update your question...)

# python - 字符串和 and 运算符：最佳实践，与 + 的区别

> ID：11846287
> 
> 赞同：12
> 
> 时间：2012-08-07T12:43:14.217
> 
> 标签：python

对于我的一个站点，我需要检查多个类属性是否已定义且不为空。到目前为止，我很高兴地使用`if self.attr:`了 ，在我看来它是 的简写`if self.attr is not None and self.attr is not '':`，或者属性的未定义值是什么。

这很好用，但在检查多个字符串属性时会产生令人惊讶的行为。`'' and ''`不是`False`（如我所料），而是`''`.

这就引出了一个问题：是否存在其他类型的`and`运算符不强制类型转换的类型`bool`？我想不出一个例子，这种行为差异会导致 - 子句的实际结果不同`if`（毕竟，`''`仍然评估为`False`），但我直觉认为存在可能是陷阱的边缘情况。

最后，我很想知道是否有人知道为什么要这样实施？我认为 Python 的 Zen 鼓励一种方式，而且只鼓励一种方式，而`+`运算符似乎已经是字符串连接的直观方式。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-07T12:49:19.257

`and`从不类型转换为 bool。相反，`if`调用`bool()`表达式的结果。

使用`and`(and `or`，就此而言)的表达式，当它可以确定表达式不会根据第一个操作数计算为 True 或 False 时会短路，并返回最后一个计算值：

```
>>> 0 and 'string'
0
>>> 1 and 'string'
'string'
>>> 'string' or 10
'string'
>>> '' or 10
10 
```

这种“副作用”经常用在 python 代码中。请注意，它`not` *确实*返回一个布尔值。有关详细信息，请参阅[有关布尔运算符的 python 文档](http://docs.python.org/reference/expressions.html#boolean-operations)。

该文档还解释了各种类型的 a`True`或等价物的构成，例如 ,和空容器 being ，而大多数其他内容都等价于.`False``None``0``''``False``True`

对于自定义类，您需要定义[`.__nonzero__()`方法](http://docs.python.org/reference/datamodel.html#object.__nonzero__)（返回`True`或`False`）或[`.__len__()`方法](http://docs.python.org/reference/datamodel.html#object.__len__)（返回一个 int，其中`0`is`False`和其他所有内容是`True`），以影响它们的布尔等效项，否则它们将始终默认为`True`.

# c++ - 如何从 char[] 字符串中提取数据

> ID：11846288
> 
> 赞同：3
> 
> 时间：2012-08-07T12:43:16.760
> 
> 标签：c++, character-encoding, char, arduino

目前我有一个连接到我的 Arduino 芯片的 GPS，它每秒输出几行。我想从某些行中提取特定信息。

> $ÇÐÇÇÁ,175341.458,3355.7870,Ó,01852.4251,Å,1,03,5.5,-32.8,Í,32.8,Í,,0000*57

（注意字符）

如果我将这一行读入 a `char[]`，是否可以从中提取`3355.7870`和提取`01852.4251`？（很明显它是，但是如何？）

我是否需要计算逗号，然后在逗号 2 之后开始将数字放在一起并在逗号 3 处停止并对第二个数字做同样的事情，还是有其他方法？一种拆分数组的方法？

另一个问题是识别这条线，因为它的开头有奇怪的字符 - 我如何检查它们，因为它们不正常并且行为奇怪？

我想要的数据始终是形式的`xxxx.xxxx`，`yyyyy.yyyy`并且在该形式中是唯一的，这意味着我可以搜索所有数据而不关心它在哪一行并提取该数据。几乎就像一场预赛，但我不知道如何使用`char[]`.

任何提示或想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T12:47:09.060

[您可以使用strtok](http://linux.die.net/man/3/strtok)标记（拆分）逗号上的字符串，然后使用[sscanf](http://linux.die.net/man/3/sscanf)解析数字。

编辑：C示例：

```
void main() {
    char * input = "$ÇÐÇÇÁ,175341.458,3355.7870,Ó,01852.4251,Å,1,03,5.5,-32.8,Í,32.8,Í,,0000*57";

    char * garbage = strtok(input, ",");
    char * firstNumber = strtok(NULL, ",");
    char * secondNumber = strtok(NULL, ",");
    double firstDouble;
    sscanf(firstNumber, "%lf", &firstDouble);
    printf("%f\n", firstDouble);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T13:10:56.050

如果字符串的开头有奇怪的字符，那么你应该从末尾开始解析它：

```
char* input = get_input_from_gps();
// lets assume you dont need any error checking
int comma_pos = input.strrchr(',');
char* token_to_the_right = input + comma_pos;
input[comma_pos] = '\0';
// next strrchr will check from the end of the part to the left of extracted token
// next token will be delimited by \0, so you can safely run sscanf on it 
// to extract actual number 
```

# crystal-reports - 针对 OLAP / XMLA / SimbaO2X 服务器的 Crystal Reports

> ID：11846290
> 
> 赞同：0
> 
> 时间：2012-08-07T12:43:22.397
> 
> 标签：crystal-reports, connection, database-connection, olap, xmla

我正在尝试将一些旧的 Excel 报表转换为 Crystal Reports。excel 工作表使用 OLAP 多维数据集，并使用 XMLA 连接通过 SimbaO2X 驱动程序连接到数据库。我只是不知道要在 Crystal Reports 中使用哪些连接设置才能连接到数据库。
我已经尝试过 XML 和 OLAP 连接，但无法获得数据库连接。

任何有关连接设置的帮助将不胜感激！

**编辑：**数据库有点像黑匣子；它*可能是*一个 Oracle 数据库（在最终用户前端被 Java 重写之前，它是一个 Oracle 数据库。他们也可以更改数据库。）但是，无论是 Oracle 服务器还是 Microsoft OLE DB for Oracle 连接方法，我都没有成功.

我今天早上还在 OLE DB 文件夹下找到了一个 SimbaO2X 提供程序。虽然没有工作，但它是迄今为止最好的——它接受用户名和密码并让我选择要连接的数据库，但随后失败并出现 ADO 错误代码：0x80040e73（初始化字符串的格式不符合 OLE DB 规范。）至少我还有事要做。

如果有人需要知道，我正在运行 Crystal Reports XI。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T12:02:46.390

部分解决方案：

*   将 Crystal Reports XI 升级到版本 2，服务包 4。
*   从 Service Pack 4 更新到 Service Pack 6。

可以从[SAP Community Network下载升级和更新](http://service.sap.com/sap/bc/bsp/spn/bobj_download/main.htm "SAP Crystal 解决方案下载")

现在可以与 SimbaO2X OLE DB 驱动程序建立连接。此解决方案还应该解决与其他一些数据库的连接问题。

但是，向报告中添加表格会导致 0x800a0cc1 错误（在与请求的名称或序号对应的集合中找不到项目）

# google-drive-api - 响应中未填充权限资源的值属性

> ID：11846293
> 
> 赞同：4
> 
> 时间：2012-08-07T12:43:29.523
> 
> 标签：google-drive-api

看着：

[https://developers.google.com/drive/v2/reference/permissions#resource](https://developers.google.com/drive/v2/reference/permissions#resource)

API 不返回包含 ACL 的电子邮件地址值的 values 属性。目前尚不清楚为什么不返回该值，我认为这是一个隐私问题，但这意味着 Drive SDK 不支持文档迁移（从一个 Google 帐户到另一个）旧文档列表 API v3 可以的用例：

[https://developers.google.com/google-apps/documents-list/#retrieving_the_acl_for_a_document_file_or_collection](https://developers.google.com/google-apps/documents-list/#retrieving_the_acl_for_a_document_file_or_collection)

现在我正在考虑为我的项目添加 Drive API 和 Docs v3 API 范围，并且只使用 Docs API 调用来检索 ACL，但理想情况下我可以只使用 Drive API 调用。我错过了什么吗？是否可以向 Drive API 添加一个允许 ACL 电子邮件地址检索的特殊范围，或者是否有其他方法来处理这个问题？

周杰伦

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T13:40:50.377

感谢您的问题杰伊，感谢您的回答阿里阿夫沙尔！

不幸的是，我不明白 Google 认为如果没有用户的电子邮件地址，以下场景应该如何工作：

在 Documents List API v3 中，您可以将文件 A 复制到文件 B，检索文件 A 的 ACL 信息（包括用户电子邮件地址）并将它们作为 ACL 添加到文件 B。

使用 Drive API，您可以检索几乎相同的权限信息，但没有用户电子邮件地址，仍然需要将文件 B 重新共享给相同的用户。

作为旁注：如果您使用 GAS DefaultService DocsList，您仍然可以使用 getEditors() 或 getViewers() 接收编辑器/查看器。如果您手动共享文件，您还可以查看所有电子邮件地址。

所以如果你问我，隐私问题是一个有价值的论点，但它根本不适用于这里。

简

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-07T14:31:30.817

您是绝对正确的，电子邮件地址是为了隐私而隐藏的。用户应该看到有权访问该文件的所有其他用户的电子邮件地址是不对的。但我不确定我是否完全明白这个问题。您是使用服务帐户进行迁移，还是由用户单独授权迁移？

权限供稿中的值对于每个用户都是一致的，并且该值在用户的关于供稿中可用。我假设您知道用户的电子邮件地址，因此您可以为每个用户授权一个服务帐户，并且您可以迁移数据。

您不需要 Drive API 范围和 Docs v3 API 范围，它们几乎是相同的范围。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-21T10:13:07.817

同样复活这个旧线程，我在迁移文档时遇到了同样的问题。

```
A workaround:
- Create a temporary folder
- Insert a permission for the user 
- retrieve the id from the permission 
```

不好，但对我有用。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-07-30T12:22:53.537

自发布此问题以来，Drive API 已更新为允许`permissionId`在[permissions.insert()](https://developers.google.com/drive/v2/reference/permissions/insert)（`id`属性）上发送。这允许迁移 ACL，而无需知道电子邮件地址（只需将权限 ID 直接复制到新文件中）。

此外：

*   [permissions.getIdForEmail()](https://developers.google.com/drive/v2/reference/permissions/getIdForEmail) API 调用提供了一种快速获取给定电子邮件地址 ID 的方法

*   [当使用permissions.get() 或 permissions.insert()](https://developers.google.com/drive/v2/reference/permissions)返回文件的权限时，将包含该属性，该`domain`属性应有助于确定 ACL 是否引发安全问题。

我相信这些功能涵盖了需要实际 ACL 电子邮件地址检索的大多数用例。

# r - 如何为构面添加不同的线

> ID：11846295
> 
> 赞同：50
> 
> 时间：2012-08-07T12:43:33.720
> 
> 标签：r, ggplot2, facet

我有数据可以查看两种不同物种的单一培养和混合培养之间的生长差异。此外，我制作了一个图表以使我的数据清晰。

我想要一个带有误差线的条形图，整个数据集当然更大，但是对于这张图，这是条形图`data.frame`的手段。

```
plant           species     means
Mixed culture   Elytrigia   0.886625
Monoculture     Elytrigia   1.022667
Monoculture     Festuca     0.314375
Mixed culture   Festuca     0.078125 
```

使用这些数据，我在 中制作了一个图表`ggplot2`，其中`plant`x 轴和`means`y 轴上的 ，我使用了一个刻面来划分物种。

这是我的代码：

```
 limits <- aes(ymax = meansS$means + eS$se, ymin=meansS$means - eS$se)
    dodge <- position_dodge(width=0.9)

    myplot <- ggplot(data=meansS, aes(x=plant, y=means, fill=plant)) + facet_grid(. ~ species) 
    myplot <- myplot + geom_bar(position=dodge) + geom_errorbar(limits, position=dodge, width=0.25)
    myplot <- myplot + scale_fill_manual(values=c("#6495ED","#FF7F50"))
    myplot <- myplot + labs(x = "Plant treatment", y = "Shoot biomass (gr)")  
    myplot <- myplot + opts(title="Plant competition")
    myplot <- myplot + opts(legend.position = "none")
    myplot <- myplot + opts(panel.grid.minor=theme_blank(), panel.grid.major=theme_blank()) 
```

到目前为止还好。但是，我想在两个方面添加两条不同的水平线。为此，我使用了以下代码：

```
 hline.data <- data.frame(z = c(0.511,0.157), species = c("Elytrigia","Festuca")) 
    myplot <- myplot + geom_hline(aes(yintercept = z), hline.data) 
```

但是，如果我这样做，我会得到一个情节，如果有两个额外的方面，则绘制两条水平线。相反，我希望将水平线绘制在带有条形的刻面中，而不是制作两个新刻面。任何人都知道如何解决这个问题。

我认为如果我把我现在创建的图表放在上面会更清楚：

![在此处输入图像描述](../Images/8bf50adb738c43a6e9b9928b4ab7d27a.png)

* * *

## 回答 #1

> 赞同：78
> 
> 时间：2012-08-07T13:36:11.247

确保两个数据集中的变量种类相同。如果它是其中一个因素，那么它也必须是另一个因素

```
library(ggplot2)
dummy1 <- expand.grid(X = factor(c("A", "B")), Y = rnorm(10))
dummy1$D <- rnorm(nrow(dummy1))
dummy2 <- data.frame(X = c("A", "B"), Z = c(1, 0))
ggplot(dummy1, aes(x = D, y = Y)) + geom_point() + facet_grid(~X) + 
    geom_hline(data = dummy2, aes(yintercept = Z)) 
```

![在此处输入图像描述](../Images/6bcf80300ded1b1f282fcb330c7638d0.png)

```
dummy2$X <- factor(dummy2$X)
ggplot(dummy1, aes(x = D, y = Y)) + geom_point() + facet_grid(~X) + 
    geom_hline(data = dummy2, aes(yintercept = Z)) 
```

![在此处输入图像描述](../Images/1ec2df35ed32ec526454c0ae132acac4.png)

# mysql - 使用mysql获取两个日期之间的记录

> ID：11846301
> 
> 赞同：-1
> 
> 时间：2012-08-07T12:43:55.260
> 
> 标签：mysql

我想获取日期之间的数据。我有一些从开始到现在的记录。现在我想使用日期检查该记录。

```
Employee  Leave_from_date  Leave_to_date Leave_Type
001       06-10-2012       07-10-2012    Casual 
```

我想使用这样的选择语句

```
 Select * from leave_request where fldempid=001 as L on fldfromdate
     >= 06-10-2012 and fldtodate<='06-10-2012' 
```

如果我使用 07-10-2012 表示再次显示上述记录。

请帮我创建这个...

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-07T12:47:27.387

`between`反转子句中值和列的通常位置：

```
select * 
from leave_request 
where fldempid = 001
and '06-10-2012' between fldfromdate and fldtodate 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T12:57:38.287

我建议先将日期转换为 unix 时间戳，以便您可以使用`<=` `>=`运算符安全地进行比较

例如

```
SELECT
Employee, Leave_Type  
UNIX_TIMESTAMP(fldfromdate) AS Leave_from_date, 
UNIX_TIMESTAMP(fldtodate) as Leave_to_date 
FROM 
leave_request
where 
fldempid=001 as L on 
Leave_from_date>=1349481600 and Leave_to_date<=1349481600; 
```

没有尝试过上述方法，但应该与一些 tweeking 一起工作......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-07T12:52:31.027

试试这个：

```
SELECT Employee, Leave_from_date, Leave_to_date, Leave_Type 
FROM  leave_request 
WHERE fldempid = 001 AND 
      DATE('06-10-2012') between fldfromdate and fldtodate 
```

# asp.net - 停止索引用户控件

> ID：11846303
> 
> 赞同：0
> 
> 时间：2012-08-07T12:44:01.063
> 
> 标签：asp.net, html, user-controls, indexing, robot

为了遵守 cookie 法，我创建了一个用户控件，该控件被添加到 asp.net 的各个页面中。用户控件基本上是出现在 div 中的 cookie 消息。问题是 google 和其他搜索引擎正在索引用户控件，现在 cookie 消息出现在搜索结果中。我试图通过在用户控件本身中应用元数据来阻止这种情况。

```
<meta name="robots" content="noindex"/> 
```

然而，这已经停止了谷歌索引大部分网站，我想要的只是阻止用户控件被索引。这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T13:09:15.867

没有办法阻止用户控件被索引，因为它是页面的一部分。您是对的，让元标记停止索引将对您的网站的索引方式产生不利影响。

为什么不采取不同的方法，例如在您的网站上设置一个页面，通过子导航上的链接详细说明 cookie 政策，或者通过 JavaScript 显示一个弹出窗口，例如[http://www.cookieconsent.com/](http://www.cookieconsent.com/)？

如果您使用 JavaScript 根目录，您可以使用 jQuery AJAX 动态拉入您的 cookie 策略文本，以填充您希望在页面加载时显示消息的 HTML。由于 HTML 将通过 AJAX 填充，因此 Google 不会索引此内容。

# ezpublish - EZ 发表文章

> ID：11846306
> 
> 赞同：0
> 
> 时间：2012-08-07T12:44:14.823
> 
> 标签：ezpublish

我使用 EZ Publish 已经有一段时间了，但我仍然对文章、文章（子页面）和文章（主页）内容类之间的区别感到有些困惑。

只是想知道这些是在什么情况下使用的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T17:49:48.077

如果您使用其中一种内置设计（例如 ezwebin），文章通常用于单页文章，文章（主页面）和文章（子页面）将用于构建多页文章。

使用主页作为容器并填充子页面（文章的每一页一个），模板应该添加一个文章索引，其中包含指向文章每一页的链接。

如果您希望文章仅显示为单个页面，请使用普通的 Article 类。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T02:13:12.253

eZ Publish 中的内容类数不胜数。eZ Publish 附带了一堆“默认”内容类，但您不需要使用所有这些类。例如，在我工作的网站中，我通常会去掉文章的子页面和主页版本，然后修改文章类以更好地满足我的需要。这是 eZ Publish 最强大的属性之一，能够在管理区域创建自定义类，然后只需编写自定义模板来提供内容。[可以在此处](http://bit.ly/NmSFBY)找到有关 eZ Publish Class 的完整文档。记得访问[eZ Publish Share 网站](http://bit.ly/J867cR)，这是 eZ Publish 开发人员分享问题和答案的地方。

# php - SmsStatusCallback 和 StatusCallback 之间的 Twilio 区别

> ID：11846308
> 
> 赞同：1
> 
> 时间：2012-08-07T12:44:23.317
> 
> 标签：php, twilio

twilio上的页面[解释](http://www.twilio.com/docs/api/rest/applications)了 SmsStatusCallback 和 StatusCallback。两者都将 URL 作为他们发布响应的输入。

它说 SmsStatusCallback 应该给我状态，但它没有。StatusCallback 在哪里可以很好地发布数据。

那么它们之间有什么区别以及为什么 SmsStatusCallback 不发布任何数据，它确实提供了数据。

```
$sms = $client->account->sms_messages->create($twilioNumber, $number, "Test message", array("SmsStatusCallback" => $posturl) ); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T15:16:41.380

我终于想通了，在这里分享，所以可能对其他人也有用。

SmsStatusCallback 是为从 twilio 构建的应用程序制作的（它们在仪表板上为您提供了创建应用程序的选项）。因此，使用 SmsStatusCallback 将数据发布到 twilio 应用程序，而不是发布 url。

StatusCallback 直接将数据发布到发布网址。

简而言之，SmsStatusCallback 用于 twilio 应用程序，而 StatusCallback 用于将数据发布到指定的任何特定 URL。

# jquery - 如何使用 jQuery 选择具有非字母数字 id 的元素？

> ID：11846311
> 
> 赞同：9
> 
> 时间：2012-08-07T12:44:27.497
> 
> 标签：jquery

Axl Rose 的 wiki 页面包含一个带有 id 的元素：

```
1983.E2.80.931986:_Early_years 
```

我`$('#1983.E2.80.931986:_Early_years')`用来获取这个元素但失败了。

如果我想通过 id 选择这个元素，正确的选择器是什么？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-08-07T12:46:49.180

直接来自[文档](http://api.jquery.com/category/selectors/)：

> 如果您希望使用任何元字符（例如 `!"#$%&'()*+,./:;<=>?@[\]^&a{|}~`）作为名称的文字部分，则必须使用两个反斜杠转义该字符：`\\.`例如，如果您有一个带有 的元素`id="foo.bar"`，则可以使用选择器`$("#foo\\.bar")`。

推论：

```
jQuery.escapeSelector = function(str) {
  return str.replace(/[!"#$%&'()*+,./:;<=>?@\[\\\]^`{|}~]/g, "\\$&");
}

// ...

$('#' + $.escapeSelector('1983.E2.80.931986:_Early_years')) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-07T12:47:53.593

由于有这些类型的字符，我个人发现最简单和最易读的方法是通过 ID 本身进行搜索，例如：

`$('[id*="1983.E2.80.931986:_Early_years"]')​​​​​​​ // will search for the ID anywhere`

比必须转义字符等更容易且更少混乱的方式。*特别是*因为如果您以某种方式更改 ID 名称，您不必担心它的命名。

如果您从后端代码*动态*构建此 ID，这是最有意义的，它将始终正确预置并工作。

[http://jsfiddle.net/Yt8D9/](http://jsfiddle.net/Yt8D9/)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-07T12:48:51.053

你可以为此使用javascript

document.getElementById('1983.E2.80.931986:_Early_years')

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-07T12:46:29.270

逃避`:`和`.`

```
$('#1983\\.E2\\.80.931986\\:_Early_years') 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-07T12:47:00.797

:中断选择，因为它是由 css 伪类保留的（例如 :hover）**。**尝试反斜杠**：**

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-08-07T12:49:34.170

使用 '\\'[转义它：](http://docs.jquery.com/Frequently_Asked_Questions#How_do_I_select_an_element_by_an_ID_that_has_characters_used_in_CSS_notation.3F)

```
$('#1983\\.E2\\.80\\.931986\\:_Early_years') 
```

# stored-procedures - 使用带参数的存储过程删除行

> ID：11846314
> 
> 赞同：2
> 
> 时间：2012-08-07T12:44:43.673
> 
> 标签：stored-procedures, sql-server-2008-r2

我正在使用 SQL Server 2008 R2，并且我想创建一个使用参数（id）从两个表中删除的存储过程。

这是存储过程：

```
CREATE PROCEDURE [dbo].[sp_deleteDecision]
@ID int
AS

DELETE FROM [dbo].[tblDecisionInvolvement] as di
WHERE di.DecisionId = @ID
DELETE FROM [dbo].[tblDecision] as d
WHERE d.Id =@ID

GO 
```

这是我尝试创建它时遇到的错误：

> 消息 156，级别 15，状态 1，过程 sp_deleteDecision，第 6 行
> 关键字“as”附近的语法不正确。
> 消息 156，级别 15，状态 1，过程 sp_deleteDecision，第 8 行
> 关键字“as”附近的语法不正确。

请注意，`DELETE FROM`将

```
SELECT * FROM 
```

有用。

甚至可以使用参数删除一些东西吗？

泰。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-07T12:46:16.960

You aren't allowed to introduce an alias at that part of a `DELETE` statement - nor do you need one in this case:

```
USE ChessDb01
GO
CREATE PROCEDURE [dbo].[sp_deleteDecision]
@ID int

AS

DELETE FROM [dbo].[tblDecisionInvolvement]
WHERE DecisionId = @ID
DELETE FROM [dbo].[tblDecision]
WHERE Id =@ID

GO 
```

For a more complex query, you might want to use an alias, but note that (confusingly), the [`DELETE`](http://msdn.microsoft.com/en-us/library/ms189835.aspx) will have *two* `FROM` clauses - and you can only introduce the alias in the second one:

```
DELETE FROM di
FROM [dbo].[tblDecisionInvolvement] di
            inner join
      AnotherTable tab
           on
              di.Column = tab.Column2
WHERE tab.Column99 = @Value 
```

# java - JAXB Annotation to retrieve object as XML

> ID：11846337
> 
> 赞同：0
> 
> 时间：2012-08-07T12:45:57.320
> 
> 标签：java, jaxb

I am trying to use JAXB annotation `@XmlElement` on function which returns a object.

Function is:

```
@XmlElement(name= "properties")
public Object getX(XType x){
   return new ListimplementClass(x.getList());
} 
```

Its returning only `<properties/>`, not the content inside.

Could you please help me in resolving this issue?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T14:25:19.683

看看[XmlSeeAlso](http://docs.oracle.com/javase/6/docs/api/javax/xml/bind/annotation/XmlSeeAlso.html)注释，因为这可能会有所帮助。您的 ListimplementClass 还必须具有适当的 JAXB 注释。

# ifstream - converting a windows shell IStream to std::ifstream/std::get_line

> ID：11846338
> 
> 赞同：0
> 
> 时间：2012-08-07T12:45:58.537
> 
> 标签：ifstream, windows-shell, getline

We have a lot of code written that makes use of the standard template library. I would like to integrate some of our apps into the windows shell, which should provide a better experience for our users.

One piece of integration involves a Shell Preview provider, the code is very straight forward, however, I’m stuck on the best way to implement something.

The shell is giving me, via my preview handler, an IStream object and I need to convert/adapt it to an std::ifstream object, primarily so that std::getline can get called further down the callstack.

I was wondering if there was a “standard” way of doing the adapting or do I need to role up my sleeves and code?

TIA.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T11:22:09.453

纠结了一阵子：

```
std::stringstream buff;
BYTE ib[2048];
ULONG totread=0, read=0, sbuff = 2048;
HRESULT hr;
do {
    hr = WinInputStream->Read(ib, sbuff, &read);
    buff.write(ib, read);
    totread+=read;
} while((sbuff == read) && SUCCEEDED(hr));

if(totread == 0) return false;
ifstream i;
TCHAR* ncbuff = const_cast<TCHAR*>(buff.str().c_str());
i.rdbuf()->pubsetbuf(ncbuff, buff.str().length()); 
```

但不喜欢将其全部读入内存，以便再次处理。

所以我使用 IInitializeWithFile 实现了我的预览处理程序。

# selenium - 当前选定的框架关闭时，Chrome WebDriver 挂起

> ID：11846339
> 
> 赞同：2
> 
> 时间：2012-08-07T12:45:58.700
> 
> 标签：selenium, tinymce, webdriver, frame, selenium-chromedriver

我正在为一些 Web 应用程序创建自动化测试。这个应用程序非常复杂。事实上，它是特定内容的文本编辑器。作为功​​能的一部分，它有一些弹出框。你可以打开这个弹窗吗？进行一些更改并保存它们 - 关闭当前帧。可能的问题是，位于框架内的关闭按钮将被取消。这迫使 Chrome WebDriver 挂起。我的第一次尝试是这样的：

```
 driver.findElement(By.xpath("//input[@id='insert']")).click();
    driver.switchTo().defaultContent(); 
```

但它在执行单击命令后挂在第一行，因为该命令关闭框架。然后我改成这个（我在页面上有 JQuery）：

```
 driver.executeScript("$(\"input#insert\").click()");
    driver.switchTo().defaultContent(); 
```

但这会导致相同的结果。然后我使用这个解决方案：

```
 driver.executeScript("setTimeout(function(){$(\"input#insert\").click()}, 10)");
    driver.switchTo().defaultContent(); 
```

它挂在第二行。只有这个解决方案有效：

```
 driver.executeScript("setTimeout(function(){$(\"input#insert\").click()}, 100)");
    driver.switchTo().defaultContent(); 
```

但前提是你不考虑它是不稳定的——可能会出现一些时间问题。

那么可能会质疑是否有更清洁和更稳定的方式从封闭框架中切换出来？

PS：executeScript - 自定义函数以减少代码量。它只是在页面上执行一些 js。

更新：

我意识到我错了。此问题不适用于所有 iframe。当使用 tinyMCE 弹出窗口时会发生这种情况。情况和[这个话题](http://code.google.com/p/selenium/issues/detail?id=2703)一模一样。所以我怀疑我会在这里找到答案，但谁知道呢。上述解决方案会有所帮助，但时间很短，这意味着几秒钟后 chromedriver 将挂起下一个命令。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T20:52:03.623

这就是我在 Ruby 中的做法，希望你可以为 java 更改它

```
$driver.find_element(:xpath, "//input[@id='insert']").click
$wait.until {$driver.window_handles.size < 2} #this will "explicitly wait" for the window to close
handles = $driver.window_handles #get available window handles
$driver.switch_to.window(handles[0]) #navigate to default in this case the First window handle 
```

希望这可以帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T10:13:52.213

问题出在这行 tinyMCEPopup 代码中：

```
 DOM.setAttrib(id + '_ifr', 'src', 'javascript:""'); // Prevent leak 
```

在页面上执行此脚本修复挂起问题（但可能会产生泄漏:)）：

```
(function() {
var domVar;
if (window.tinymce && window.tinymce.DOM) {
    domVar = window.tinymce.DOM 
}
else if (window.tinyMCE && window.tinyMCE.DOM) {
    domVar = window.tinyMCE.DOM 
}
else {
    return;
}
var tempVar = domVar.setAttrib;console.log(123)
domVar.setAttrib = function(id, attr, val) {
    if (attr == 'src' && typeof(val)== 'string' &&(val + "").trim().match(/javascript\s*:\s*("\s*"|'\s*')/)) {
        console.log("Cool");
        return;
    }
    else {
        tempVar.apply(this, arguments);
    }
}

}()); 
```

[此处](http://code.google.com/p/selenium/issues/detail?id=2703)还描述了错误和解决方案 注意。上面的代码应该添加到父框架，而不是弹出框架。

# jira - jira 需要哪些改进

> ID：11846340
> 
> 赞同：-1
> 
> 时间：2012-08-07T12:46:02.003
> 
> 标签：jira

现在大多数 IT 公司都在使用 jira。因为它是一个庞大而复杂的应用程序。但它仍然需要一些改进。有人可以分享 jira 需要哪些改进或您在使用 jira 时遇到的任何问题吗？

我问这个是因为在上次采访中我被问到这个问题，这是我没想到的，因为我没有使用过 jira，所以我不太了解。我需要你的帮助，所以我会为以后的面试做好准备。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T17:04:35.210

该列表很长，取决于您计划使用 Jira 的目的，例如：

*   谁使用它？（客户、开发人员、支持、销售）
*   你需要 svn/git 支持吗？
*   计划使用敏捷？
*   你想如何打开问题？

同样，虽然您可能会发现很多东西丢失了，但使用 Jira 的最大好处是您可以编写自己的代码来实现几乎所有功能。

根据我们的需要，我们发现缺少以下内容：

*   对问题进行排序的能力
*   为非 Jira 用户发送电子邮件
*   保存邮件模板
*   24小时发出通知
*   敏捷支持（需要购买greenhoper才能真正支持）
*   用于创建问题的前端 Web 表单

您还可以查看[Jira 的新功能请求](https://jira.atlassian.com/secure/IssueNavigator.jspa?reset=true&jqlQuery=project%20=%20JRA%20AND%20resolution%20=%20Unresolved%20AND%20issuetype%20=%20%22New%20Feature%22%20ORDER%20BY%20priority%20DESC&mode=hide) 和[改进](https://jira.atlassian.com/secure/IssueNavigator.jspa?reset=true&jqlQuery=project%20=%20JRA%20AND%20resolution%20=%20Unresolved%20AND%20issuetype%20=%20Improvement%20ORDER%20BY%20priority%20DESC&mode=hide)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T22:22:09.760

Atlassian 跟踪用户在他们自己的公共 JIRA 实例上投票的内容。这是他们所有未解决的 JIRA 问题的[链接](https://jira.atlassian.com/secure/IssueNavigator.jspa?reset=true&jqlQuery=project%20=%20JRA%20and%20status%20=%20Open%20order%20by%20votes)，按票数排序。或者，您可以阅读 JIRAAAARGH！在我的书《[实用 JIRA 管理](http://shop.oreilly.com/product/0636920020196.do)》中的一章。

〜马特

# asp.net-4.0 - 使用 .NET 的 SFTP

> ID：11846342
> 
> 赞同：1
> 
> 时间：2012-08-07T12:46:07.930
> 
> 标签：asp.net-4.0, sftp

我想使用 .NET 通过 SFTP 访问文件。我在 Stack Overflow 上看到过有关此问题的其他问题，例如[SFTP question](https://stackoverflow.com/questions/179569/net-open-source-code-for-sftp)，但这些问题相当陈旧，从那时起事情就会继续发展。我的问题是，.NET 现在是否支持 SFTP（当被问到这个问题时它没有回来）。如果没有，我可以使用任何好的开源 SFTP 库吗？

谢谢，

萨钦

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T07:13:45.710

不，.NET 不支持 SFTP。你最好的开源选择是 SharpSSH。

我们自己的商业 .NET SFTP 库[edtFTPnet/PRO](http://www.enterprisedt.com/products/edtftpnetpro/overview.html "edtFTPnet/PRO")建立在开源 SSH 库 Granados 之上，这可能是另一种选择。

# emacs - 在 Emacs Verilog 模式下的 if 语句后插入“begin”

> ID：11846345
> 
> 赞同：1
> 
> 时间：2012-08-07T12:46:12.600
> 
> 标签：emacs, verilog, emacs24

一段时间以来，我一直在使用 Emacs 创建和修改 Verilog 代码。但是，在 Verilog 模式下，当我尝试使用 emacs 命令插入“if”语句时遇到了一个小问题：

`C-c C-t ?`

以下是在上述场景中如何创建语句的示例：

```
if (a<b) begin
// the rest of the code 
```

但是我需要emacs在下一行插入“开始”，如下所示：

```
if (a<b)
begin
//rest of the code 
```

在挖掘了可用的 Verilog 自定义选项之后，我发现了一个名为的选项 `Verilog Indent Begin After If`，我认为它应该会产生上述效果。然而切换这个选项并没有给我任何可见的变化。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-07T13:01:42.957

查看代码，您将看到该功能：

```
(define-skeleton verilog-sk-if
  "Insert a skeleton if statement."
  > "if (" '(verilog-sk-prompt-condition) & ")" " begin" \n
  > _ \n
  > (- verilog-indent-level-behavioral) "end " \n ) 
```

实际上定义了一个骨架。只需复制粘贴并添加另一个换行符：

```
(define-skeleton my-verilog-sk-if
  "Insert a skeleton if statement."
  > "if (" '(verilog-sk-prompt-condition) & ")" \n " begin" \n
  > _ \n
  > (- verilog-indent-level-behavioral) "end " \n ) 
```

现在我们只需要在 verilog 模式下将我们的函数与旧函数挂钩：

```
(add-hook 'verilog-mode-hook
          '(lambda ()
             ;; this is quite the hack because we don't respect
             ;; the usual prefix of verilog-mode but sufficient for us
             (define-key verilog-mode-map "\C-c\C-t?"
                         'my-verilog-sk-if))) 
```

# c# - Acting on a boolean value in an Ajax jQuery call in ASP.NET

> ID：11846349
> 
> 赞同：2
> 
> 时间：2012-08-07T12:46:22.607
> 
> 标签：c#, jquery, asp.net, ajax, web-services

i have the following jQuery function in my project

```
$.ajax({
            url: "WebServices/BrowserType.asmx/IsIE",
            contentType: "application/json; charset=utf-8",
            dataType: "text",
            type: "POST",
            data: {},
            success: function (msg) {
                If(msg.d== 'false')
                {
                    $("#Test2").html(msg);
                }
            },
            error: function (err) {
                alert("Error" + err.toString());
            }
        }); 
```

What i intend to do is to get a boolean value from my webservice and then act on the result on my jquery success option.

I had tried the following:

*   I set the dataType to boolean (of course, i changed my method return type to bool) and in the success function of the jquery, i had

    ```
    success:function(){if (msg.d){$("#Test2").html(msg);}} 
    ```

but an error was thrown. (Object. That's the error.)

*   I tried setting the dataType to **text** (this time i changed my method return type to string) and in the success function of the jquery, i did it as in the above main code. This time there was no error but the success function seems not to work. However, when i removed the **If** statement from the above code, the success code worked.

Please how do i go about this. I had tried what i know. I intend to act on a boolean value. My web service returns either true or false and i want to act on the boolean value returned. The issue is how can i determine if the value returned is true or false in the success function of my ajax?

Your contribution is highly appreciated. I have edited this post to make it clearer.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T13:09:24.343

你试过用

if (returnData.d==true){//做点什么}else{//别做}

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T13:20:06.473

如果您的结果是文本，请尝试将其转换为布尔值。看一下这个：

[如何在 JavaScript 中将字符串转换为布尔值？](https://stackoverflow.com/questions/263965/how-can-i-convert-a-string-to-boolean-in-javascript)

# spring-integration - Spring-integration File reading and convert to String

> ID：11846351
> 
> 赞同：0
> 
> 时间：2012-08-07T12:46:23.347
> 
> 标签：spring-integration

I am very new in Spring-integration , can any one help me plz,

Q-How to read a text file from "D:/file/" , show that content in a string variable and write in "D:/fileout/" directory.

using spring-integration tag base approach. plz any one post the code and step by step process to compile.

Thanks in Advance.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T13:13:33.413

在此处查看文件示例（在基本下）

[https://github.com/SpringSource/spring-integration-samples](https://github.com/SpringSource/spring-integration-samples)

# .net - 相当于在 VB.NET 中将 T 的对象添加到 List(of T)

> ID：11846357
> 
> 赞同：1
> 
> 时间：2012-08-07T12:46:33.100
> 
> 标签：.net, vb.net, ienumerable

这是我的课

```
Public Class DBServer
    Public  ServerId  As Integer
    Public  ServerName As String
End Class 
```

和变量：

```
Dim serverList As New List(Of DBServer) 
```

在 C# 中。我可以这样添加：

`serverList.Add(new DBServer{ ServerId=1,ServerName="Server1"});`

如何在 VB.NET 中实现这一点。我正在使用 .NET 4.0。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-07T12:49:59.870

对于直接端口，请尝试

```
serverList.Add(new DBServer With { .ServerId=1,.ServerName="Server1"}) 
```

有关更多信息，请参阅[对象初始化器：命名和匿名](http://msdn.microsoft.com/en-us/library/bb385125.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-07T12:59:56.460

这是 C# 的正确直接翻译，假设它`ServerName` **实际上**`Servername`是发布的字符串数组（注意初始化程序周围的额外花括号）：

```
serverlist.Add(New DBServer() With {.ServerId = 1, .ServerName = {"foo"}}) 
```

如果 Servername**不是**字符串数组，实际上是字符串，那么 @Binary Worrier 有正确的解决方案：

```
serverlist.Add(New DBServer() With {.ServerId = 1, .ServerName = "foo"}) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-07T13:20:27.163

您可以使用 Enumerable (http://msdn.microsoft.com/en-us/library/fkbw11z0) 初始化列表

```
 Dim serverList As New List(Of DBServer)({New DBServer With {.ServerId = 1, .ServerName = "Server One"},
                                             New DBServer With {.ServerId = 2, .ServerName = "Server Two"},
                                             New DBServer With {.ServerId = 3, .ServerName = "Server Three"}}) 
```

# cordova - Application Preferences setting bundle for username and password in phonegap(iphone)

> ID：11846366
> 
> 赞同：2
> 
> 时间：2012-08-07T12:46:48.027
> 
> 标签：cordova

I am using phonegap framework for ios development using Jquery+html+css.

I need to save my username and password in iphone default setting, for one time login.

I have implemented (window.plugins. applicationPreferences.set) and (window.plugins.applicationPreferences.get) in my js file, but phonegap plugins not supporting (windows,plugins) instead of , I directely call the protocol (applicationPreferences.prototype.set) and (applicationPreferences.prototype.get).

When i call protocol method its working(alert message) but, i need to access (window.plugins.applicationPreferences.set). I'm still having issues with this plugin.

I have tried a few things but it doesn't seem to work. It would be really helpful if somebody could suggest me what I am doing wrong.

Anyone having luck using Application Preferences plugin for phonegap bundle setting.

Please guide me .Thanks in advance.

# java - 在java中，我如何引用嵌套bxml的“bxml：id ...”中的实例定义

> ID：11846371
> 
> 赞同：0
> 
> 时间：2012-08-07T12:46:59.360
> 
> 标签：java, xml, apache, namespaces, pivot

我是 apache pivot 的新手。最近我在 Eclipse 下工作，使用这个 Pivot 和 Java prog 为独立应用程序建立 IHM。我在这里遇到问题，

我定义了一个“main” bxml tabPane.bxml，在其中我使用了一个嵌套的 bxml 并在代码中“包含”，

```
bxml:include bxml:id="shipPanel" src="shipping.bxml" Accordion.headerData="params"/> 
```

然后在 shipping.bxml 代码中，我声明

```
<PushButton bxml:id="nextButton" xxxxx 
```

现在我想`nextButton`在我的 java 代码中使用该实例，我像以前一样通过获取命名空间来做到这一点`nextButton`：

```
nextButton = (PushButton)namespace.get("nextButton"); 
```

但是当我运行编时，它总是出现这个错误：

```
java.lang.NullPointerException 
```

好像没认出来`nextButton`。

然后我做了一个测试，我在主bxml中声明了一个PushButton，命名它`id = nextButton`，这种情况下，它编译得很好。

所以我的问题是，当我的实例在嵌套 bxml 中定义时（使用 main bxml 中的包含），我以后如何在 java 代码中引用它？

任何机构都可以提供帮助吗？谢谢！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T07:30:58.823

所以我从它的邮件列表论坛中得到了解决方案。

事实上，在包含嵌套 bxml 文件的位置的属性中添加一句“inline = “true””就足够了。通过这种方式，在 java 中它可以识别您在主 bxml 代码或嵌套 bxml 代码中定义的所有那些 id。感谢来自枢轴邮件列表论坛的专家，他们提供了很好的建议。

结束！！！

# java - 如何在 Spring Security 的登录页面访问资源包？

> ID：11846375
> 
> 赞同：0
> 
> 时间：2012-08-07T12:47:16.467
> 
> 标签：java, spring-mvc, spring-security

我在互联网上尝试了很多解决方案，但我无法访问 login.jsp 文件中的资源包。我的应用程序配置了弹簧安全性。

我试图通过 spring 控制器路由登录页面，以便我可以访问我的 JSP 中的资源包，但是我得到了无限循环..

这是我的 spring-security.xml 文件

```
<sec:global-method-security pre-post-annotations="enabled" />

    <sec:http pattern="/css/**" security="none"/>
    <sec:http pattern="/images/**" security="none"/>
    <sec:http pattern="/js/**" security="none"/>
    <sec:http pattern="/index.jsp" security="none"/>
    <!-- <sec:http pattern="/app/addNewUser.json" security="none"/> -->
    <sec:http pattern="/app/login.jsp" security="none"/>
    <sec:http use-expressions="true">

        <!--
             Allow all other requests. In a real application you should
             adopt a whitelisting approach where access is not allowed by default
          -->
        <sec:intercept-url pattern="/**" access="isAuthenticated()" />
        <sec:form-login login-page='/app/login.jsp'
          authentication-failure-url="/app/login.jsp?login_error=1"
          default-target-url="/index.jsp" />
        <sec:logout logout-success-url="/app/login.jsp" delete-cookies="JSESSIONID"/>
        <sec:remember-me /> 
```

我正在尝试使用访问资源包，`<spring:message code="login.name" />`但出现错误

```
No message found under code 'login.name' for locale 'en_US'. 
```

这是 web.xml 条目

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns="http://java.sun.com/xml/ns/javaee" xmlns:web="http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd" xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd" id="WebApp_ID" version="2.5">
  <display-name>Spring3MVC</display-name>
  <context-param>
        <param-name>contextConfigLocation</param-name>
        <param-value>
            /WEB-INF/spring-rootcontext.xml
            /WEB-INF/spring-security-no-cas.xml
        </param-value>
    </context-param>
       <filter>
        <filter-name>springSecurityFilterChain</filter-name>
        <filter-class>org.springframework.web.filter.DelegatingFilterProxy</filter-class>
    </filter>

    <filter-mapping>
      <filter-name>springSecurityFilterChain</filter-name>
      <url-pattern>/*</url-pattern>
    </filter-mapping> 

    <!--
      - Loads the root application context of this web app at startup.
    -->
    <listener>
        <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
    </listener>

  <welcome-file-list>
    <welcome-file>index.jsp</welcome-file>
  </welcome-file-list>

  <servlet>
    <servlet-name>spring</servlet-name>
    <servlet-class>
            org.springframework.web.servlet.DispatcherServlet
        </servlet-class>
    <load-on-startup>1</load-on-startup>
  </servlet>
  <servlet-mapping>
    <servlet-name>spring</servlet-name>
    <url-pattern>/app/*</url-pattern>
  </servlet-mapping>
 <filter>
       <filter-name>CAS Single Sign Out Filter</filter-name>
       <filter-class>org.jasig.cas.client.session.SingleSignOutFilter</filter-class>
    </filter>
 <filter-mapping>
       <filter-name>CAS Single Sign Out Filter</filter-name>
       <url-pattern>/*</url-pattern>
    </filter-mapping>
    <listener>
        <listener-class>org.jasig.cas.client.session.SingleSignOutHttpSessionListener</listener-class>
    </listener>

</web-app> 
```

让我知道任何解决方案..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T21:09:56.920

将登录重定向到由 Spring MVC 解析的页面，例如；/login.htm - 假设“htm”映射到 Spring MVC 调度程序。

```
...
<sec:form-login login-page='/login.htm'
      authentication-failure-url="/login.htm?login_error=1"
      default-target-url="/index.htm" />
<sec:logout logout-success-url="/login.htm" delete-cookies="JSESSIONID"/>
... 
```

然后为该 URL 定义一个视图解析器到 JSP

```
<mvc:view-controller path="/login.htm" view-name="<where-jsp-are-stored>/app/login.jsp"/> 
```

您应该能够解析消息。

# php - Are there any characters that don't work for _GET variables in a browser?

> ID：11846376
> 
> 赞同：1
> 
> 时间：2012-08-07T12:47:20.503
> 
> 标签：php, html, url, get

This is a little out of the blue and it's mostly curiosity. I hope it's not a waste pf time and space. I was writing a little script to validate accounts with a link so I decided to send an email with a link to the php script and in the link I would put two variables to get with the _GET array. A key and the email. Then I would just search the database with that email and key and change it's activated status to true... No prob. Easy enough even though it may not be very elegant..

I used a script for the generation of the key that I used elsewhere in the site for generating a new password (to reset it for instance) but sometimes it didn't work and after a lot of tries I noticed (and I felt stupid then) that the array my password generation function drew from was this:

> '0123456789_!@#$%&*()-=+abcdfghjkmnpqrstvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ'

So naturally I deleted the & character that is used for separating variables in the url... Then in another try I noticed that the link in the email was not recognized whole and stopped after the '#' character as well which I then remembered is used for references in an html so I deleted that as well. In the end I decided to leave only alphanumeric characters to be sure but I am curious; Are ther any more characters that are not 'valid' for url's using utilizing _GET and is there any way to use those characters anyway (maybe ulr encode or somwething)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T12:49:28.027

有很多无效的字符。用于[`urlencode`](http://php.net/urlencode)将它们转换为 URL 安全编码。（始终在您插入 URL的任何*数据*上运行该函数）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T12:49:47.237

您必须`urlencode()`在将值发送到`$_GET`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-07T12:50:22.723

你可以使用`url_encode`，`url_decode`但我会远离`& # ?`这些是正常的 URL 字符。

同样，当涉及到密码时：不要强调算法，使用`sha1` `crypt`或类似的东西`salt`。这些算法将比您自制的算法强大得多。

# xml - 在 XPATH 中使用多个命名空间

> ID：11846379
> 
> 赞同：2
> 
> 时间：2012-08-07T12:47:24.017
> 
> 标签：xml, xpath, xquery, marklogic

有 2 个具有不同命名空间的 xml 文档，例如

```
declare namespace ml1 = "urn:schemas-com:ml1";
declare namespace ml2 = "urn:schemas-com:ml2"; 
```

但具有相同的结构。我可以选择仅使用这些命名空间而不使用 * 的一些节点吗？我的意思是这样的：

```
fn:doc($uri)/(ml1 or ml2):root 
```

**更新：** 谢谢。所有建议都有效，但对我没有用。因为可以有3个或更多的命名空间，xpath表达式会很大。有什么建议么？

**结论：** 感谢您的回答。我同意@MichaelKay 的观点，即我应该处理所有 xml 所有文档。问题解决了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-07T13:10:16.963

**一种可能的表达方式是**：

```
 doc($uri)/(ml1:root|ml2:root) 
```

**另一个是**：

```
 doc($uri)/*[self::ml1:root or self::ml2:root] 
```

**如果可以有无限数量的形式前缀`"mlNNNNN""`，请使用：**

```
 doc($uri)/*[matches(substring-before(name(), ':'), '^ml\d+')] 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-07T13:12:15.423

您可以使用谓词

```
fn:doc($uri)/*[local-name() = "root" and (namespace-uri() = "urn:schemas-com:ml1" or namespace-uri() = "urn:schemas-com:ml2")] 
```

如果您的命名空间 URI 都有一个共同的前缀（正如您提供的示例所建议的那样），那么您可以使用类似的结构

```
..../*[starts-with(namespace-uri(), "urn:schemas-com:") ...] 
```

如果您有许多命名空间，并且可以在另一个 XML 文件中将它们全部列出：

```
<namespaces>
  <uri>urn:schemas-com:ml1</uri>
  <uri>urn:schemas-com:ml2</uri>
  <!-- ... -->
</namespaces> 
```

然后是谓词

```
*[namespace-uri() = fn:doc("namespaces.xml")/namespaces/uri] 
```

如果正在测试的节点的命名空间*URI*与`namespaces.xml`.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-07T14:35:26.803

```
let $qnames :=
  for $ns in ("urn:schemas-com:ml1", "urn:schemas-com:ml2")
  return QName($ns, 'root')
return doc($uri)/*[node-name(.) = $qnames] 
```

查找应使用`node-name`索引。

或者您可以使用字符串操作来构建路径，然后调用`xdmp:unpath`来评估它：[http ://docs.marklogic.com/5.0doc/docapp.xqy#display.xqy?fname=http://pubs/5.0doc/ apidoc/ExsltBuiltins.xml&category=扩展&function=xdmp:unpath](http://docs.marklogic.com/5.0doc/docapp.xqy#display.xqy?fname=http://pubs/5.0doc/apidoc/ExsltBuiltins.xml&category=Extension&function=xdmp:unpath)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-07T15:00:12.493

当您遇到此问题时，最好的解决方案是从规范化命名空间开始：也就是说，进行转换以使所有文档都采用通用格式，然后将 XPath 表达式应用于规范化表单。

# objective-c - 只有某些 Youtube url 会在 ios 中播放

> ID：11846380
> 
> 赞同：0
> 
> 时间：2012-08-07T12:47:25.277
> 
> 标签：objective-c, xcode

我正在解析 iphone 中的 youtube json 提要。我在 webview 中播放视频。因为 youtube 视频没有 MPMovieplayerController.i 使用 webView 播放视频，但问题是只有某些视频正在播放，而某些其他视频没有。下面是代码

```
 - (void)embedYouTube:(NSString*)url frame:(CGRect)frame {  
NSString* embedHTML = @"\ 
<html><head>\ 
<style type=\"text/css\">\ 
body {\ 
    background-color: transparent;\ 
color: white;\ 
}\ 
</style>\ 
</head><body style=\"margin:0\">\ 
<embed id=\"yt\"src=\"%@\" type=\"application/x-shockwave-flash\"\ 
width=\"%0.0f\" height=\"%0.0f\"></embed>\ 
</body></html>";  
NSString* html = [NSString stringWithFormat:embedHTML, url, frame.size.width, frame.size.height];  

[youTubeWebView loadHTMLString:html baseURL:nil];  
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T12:58:59.287

可以在 youtube 视频设置中为移动用户启用/禁用视频。

来源：[http ://productforums.google.com/forum/#!topic/youtube/3_LkO_ap0_Q](http://productforums.google.com/forum/#!topic/youtube/3_LkO_ap0_Q)

这是指向 Google 的链接，解释有关[分发设置的常见问题](http://support.google.com/youtube/bin/answer.py?hl=en&answer=2453875)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T12:53:36.700

至少在浏览时，某些视频无法在移动设备上播放。它可能是错误的格式，用户在上传时阻止了 iPhone，或者被 Apple 阻止了 iPhone。

# c# - 二进制模式比较快捷方式/C# 中最快的实现

> ID：11846384
> 
> 赞同：1
> 
> 时间：2012-08-07T12:47:30.937
> 
> 标签：c#, .net, binary, bit-manipulation, biginteger

我需要检查给定字节或一系列字节的特定位序列，如下所示：

*   可以从零个或多个`0s`.
*   可以从零个或多个`1s`.
*   最后必须至少包含一个`0`。

换句话说，如果 bytes 的值不是`0`，那么我们只对包含连续`1s`后跟至少一个`0`结尾的值感兴趣。

我编写了以下代码来做到这一点，但想确保它高度优化。我觉得 if 分支中的多项检查可以优化，但不确定如何。请指教。

```
// The parameter [number] will NEVER be negative.
public static bool ConformsToPattern (System.Numerics.BigInteger number)
{
    byte [] bytes = null;
    bool moreOnesPossible = true;

    if (number == 0) // 00000000
    {
        return (true); // All bits are zero.
    }
    else
    {
        bytes = number.ToByteArray();

        if ((bytes [bytes.Length - 1] & 1) == 1)
        {
            return (false);
        }
        else
        {
            for (byte b=0; b < bytes.Length; b++)
            {
                if (moreOnesPossible)
                {
                    if
                    (
                        (bytes [b] == 1) // 00000001
                        || (bytes [b] == 3) // 00000011
                        || (bytes [b] == 7) // 00000111
                        || (bytes [b] == 15) // 00001111
                        || (bytes [b] == 31) // 00011111
                        || (bytes [b] == 63) // 00111111
                        || (bytes [b] == 127) // 01111111
                        || (bytes [b] == 255) // 11111111
                    )
                    {
                        // So far so good. Continue to the next byte with
                        // a possibility of more consecutive 1s.
                    }
                    else if
                    (
                        (bytes [b] == 128) // 10000000
                        || (bytes [b] == 192) // 11000000
                        || (bytes [b] == 224) // 11100000
                        || (bytes [b] == 240) // 11110000
                        || (bytes [b] == 248) // 11111000
                        || (bytes [b] == 252) // 11111100
                        || (bytes [b] == 254) // 11111110
                    )
                    {
                        moreOnesPossible = false;
                    }
                    else
                    {
                        return (false);
                    }
                }
                else
                {
                    if (bytes [b] > 0)
                    {
                        return (false);
                    }
                }
            }
        }
    }

    return (true);
} 
```

**重要提示：**发送给函数的参数 [number]**永远不会**是负数，因此无需检查符号位。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T03:06:11.803

我要说的是，这些答案都没有解释

```
00000010
00000110
00001110
00011110
00111110
01111110    
00000100
00001100
00011100
00111100
01111100 
```

等等等等等等。

这是我的字节数组方法：

```
public static bool ConformsToPattern(System.Numerics.BigInteger number)
{
    bool foundStart = false, foundEnd = false;
    int startPosition, stopPosition, increment;

    if (number.IsZero || number.IsPowerOfTwo)
        return true;
    if (!number.IsEven)            
        return false;
    byte[] bytes = number.ToByteArray();

    if(BitConverter.IsLittleEndian)
    {
        startPosition = 0;
        stopPosition = bytes.Length;
        increment = 1;
    }
    else
    {
        startPosition = bytes.Length - 1;
        stopPosition = -1;
        increment = -1;
    }

    for(int i = startPosition; i != stopPosition; i += increment)
    {
        byte n = bytes[i];      
        for(int shiftCount = 0; shiftCount < 8; shiftCount++)       
        {           
            if (!foundEnd)
            {
                if ((n & 1) == 1)
                    foundEnd = true;
                n = (byte)(n >> 1);
                continue;      
            }
            if (!foundStart)
            {
                if ((n & 1) == 0)   
                    foundStart = true;
                n = (byte)(n >> 1);
                continue;                
            }
            if (n == 0)
                continue;
            return false;
        }
    }
    if (foundEnd)
        return true;
    return false;
} 
```

这是我的 BigInteger 方法：

```
public static bool ConformsToPattern(System.Numerics.BigInteger number)
{
    bool foundStart = false;
    bool foundEnd = false;
    if (number.IsZero || number.IsPowerOfTwo)
        return true;
    if (!number.IsEven)            
        return false;
    while (!number.IsZero)
    {
        if (!foundEnd)
        {
            if (!number.IsEven)
                foundEnd = true;
            number = number >> 1;
            continue;                
        }
        if (!foundStart)
        {
            if (number.IsEven)                
                foundStart = true;
            number = number >> 1;
            continue;                
        }
        return false;
    }
    if (foundEnd)
        return true;
    return false;
} 
```

选择更适合您的。到目前为止，字节数组更快。BigIntegers 代码是 100% 准确的参考。

如果您不担心本机字节顺序，请删除该部分代码，但将其保留在其中将确保可移植到 x86 系统以外的其他系统。`BigIntegers`已经给了我`IsZero`,`IsEven`和`IsPowerOfTwo`，所以这不是额外的计算。我不确定这是否是最快的右移方法，因为有一个`byte`要转换的方法`int`，但是现在，我找不到另一种方法。至于使用`byte`vs `short`vs `int`vs `long`for 循环操作，如果您觉得它会更好地工作，则由您更改。我不确定您将发送什么样的 BigIntegers，所以我认为`int`会是安全的。您可以修改代码以删除`for loop`并复制粘贴代码 8 次，它可能会更快。或者您可以将其放入静态方法中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-07T13:34:37.600

这样的事情怎么样？如果你找到一个，那么之后唯一的事情可能是 1，直到找到一个 0。之后，只有 0s。这看起来会更快一点，因为它不会做不必要的或条件。

```
// The parameter [number] will NEVER be negative.
public static bool ConformsToPattern (System.Numerics.BigInteger number)
{
    byte [] bytes = null;
    bool moreOnesPossible = true;
    bool foundFirstOne = false;

    if (number == 0) // 00000000
    {
        return (true); // All bits are zero.
    }
    else
    {
        bytes = number.ToByteArray();

        if ((bytes [bytes.Length - 1] & 1) == 1)
        {
            return (false);
        }
        else
        {
            for (byte b=0; b < bytes.Length; b++)
            {
                if (moreOnesPossible)
                {
                    if(!foundFirstOne)
                    {
                        if
                        (
                            (bytes [b] == 1) // 00000001
                            || (bytes [b] == 3) // 00000011
                            || (bytes [b] == 7) // 00000111
                            || (bytes [b] == 15) // 00001111
                            || (bytes [b] == 31) // 00011111
                            || (bytes [b] == 63) // 00111111
                            || (bytes [b] == 127) // 01111111
                            || (bytes [b] == 255) // 11111111
                        )
                        {
                            foundFirstOne = true;
                            // So far so good. Continue to the next byte with
                            // a possibility of more consecutive 1s.
                        }
                        else if
                        (
                            (bytes [b] == 128) // 10000000
                            || (bytes [b] == 192) // 11000000
                            || (bytes [b] == 224) // 11100000
                            || (bytes [b] == 240) // 11110000
                            || (bytes [b] == 248) // 11111000
                            || (bytes [b] == 252) // 11111100
                            || (bytes [b] == 254) // 11111110
                        )
                        {
                            moreOnesPossible = false;
                        }
                        else
                        {
                            return (false);
                        }
                    }
                    else
                    {
                        if(bytes [b] != 255) // 11111111
                        {
                            if
                            (
                                (bytes [b] == 128) // 10000000
                                || (bytes [b] == 192) // 11000000
                                    || (bytes [b] == 224) // 11100000
                                || (bytes [b] == 240) // 11110000
                                || (bytes [b] == 248) // 11111000
                                || (bytes [b] == 252) // 11111100
                                || (bytes [b] == 254) // 11111110
                            )
                            {
                                moreOnesPossible = false;
                            }
                        }                            
                    }
                }
                else
                {
                    if (bytes [b] > 0)
                    {
                        return (false);
                    }
                }
            }
        }
    }

    return (true);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-08T19:40:29.587

这是我自己写的方法。不是很优雅但很快。

```
/// <summary>
/// Checks to see if this cell lies on a major diagonal of a power of 2.
/// ^[0]*[1]*[0]+$ denotes the regular expression of the binary pattern we are looking for.
/// </summary>
public bool IsDiagonalMajorToPowerOfTwo ()
{
    byte [] bytes = null;
    bool moreOnesPossible = true;
    System.Numerics.BigInteger number = 0;

    number = System.Numerics.BigInteger.Abs(this.X - this.Y);

    if ((number == 0) || (number == 1)) // 00000000
    {
        return (true); // All bits are zero.
    }
    else
    {
        // The last bit should always be 0.
        if (number.IsEven)
        {
            bytes = number.ToByteArray();

            for (byte b=0; b < bytes.Length; b++)
            {
                if (moreOnesPossible)
                {
                    switch (bytes [b])
                    {
                        case 001: // 00000001
                        case 003: // 00000011
                        case 007: // 00000111
                        case 015: // 00001111
                        case 031: // 00011111
                        case 063: // 00111111
                        case 127: // 01111111
                        case 255: // 11111111
                        {
                            // So far so good.
                            // Carry on testing subsequent bytes.

                            break;
                        }
                        case 128: // 10000000
                        case 064: // 01000000
                        case 032: // 00100000
                        case 016: // 00010000
                        case 008: // 00001000
                        case 004: // 00000100
                        case 002: // 00000010

                        case 192: // 11000000
                        case 096: // 01100000
                        case 048: // 00110000
                        case 024: // 00011000
                        case 012: // 00001100
                        case 006: // 00000110

                        case 224: // 11100000
                        case 112: // 01110000
                        case 056: // 00111000
                        case 028: // 00011100
                        case 014: // 00001110

                        case 240: // 11110000
                        case 120: // 01111000
                        case 060: // 00111100
                        case 030: // 00011110

                        case 248: // 11111000
                        case 124: // 01111100
                        case 062: // 00111110

                        case 252: // 11111100
                        case 126: // 01111110

                        case 254: // 11111110
                        {
                            moreOnesPossible = false;

                            break;
                        }
                        default:
                        {
                            return (false);
                        }
                    }
                }
                else
                {
                    if (bytes [b] > 0)
                    {
                        return (false);
                    }
                }
            }
        }
        else
        {
            return (false);
        }
    }

    return (true);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-07T13:06:13.310

我是正则表达式的忠实粉丝，所以我想简单地将字节转换为字符串并针对正则表达式进行测试。但是，仔细定义模式很重要。通过阅读您的问题，我想出了这个问题：

```
^(?:1*)(?:0+)$ 
```

请检查一下：

```
 public static bool ConformsToPattern(System.Numerics.BigInteger number)
    {
        byte[] ByteArray = number.ToByteArray();

        Regex BinaryRegex = new Regex("^(?:1*)(?:0+)$", RegexOptions.Compiled);

        return ByteArray.Where<byte>(x => !BinaryRegex.IsMatch(Convert.ToString(x, 2))).Count() > 0;
    } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-07T13:34:18.927

如果我理解正确，您必须只有 1 个连续的 1 系列，后跟连续的 0。

所以如果它必须以零结尾，它必须是偶数。中间的所有字节都必须全为 1，第一个和最后一个字节是您唯一的特殊情况。

```
 if (number.IsZero)
            return true;

         if (!number.IsEven)
            return false;

         var bytes = number.ToByteArray();

         for (int i = 0; i < bytes.Length; i++)
         {
            if (i == 0)  //first byte case
            {
               if (!(
                     (bytes[i] == 1) // 00000001 
                     || (bytes[i] == 3) // 00000011 
                     || (bytes[i] == 7) // 00000111 
                     || (bytes[i] == 15) // 00001111 
                     || (bytes[i] == 31) // 00011111 
                     || (bytes[i] == 63) // 00111111 
                     || (bytes[i] == 127) // 01111111 
                     || (bytes[i] == 255) // 11111111 
                    ))
               {
                  return false; 
               }
            }
            else if (i == bytes.Length) //last byte case
            {
               if (!(
                  (bytes[i] == 128) // 10000000 
                        || (bytes[i] == 192) // 11000000 
                        || (bytes[i] == 224) // 11100000 
                        || (bytes[i] == 240) // 11110000 
                        || (bytes[i] == 248) // 11111000 
                        || (bytes[i] == 252) // 11111100 
                        || (bytes[i] == 254) // 11111110 
                    ))
               {
                  return false;
               }
            }
            else //all bytes in the middle
            {
               if (bytes[i] != 255)
                  return false;
            }

         } 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-07T20:05:00.853

不确定这是否会比你已经拥有的更快或更慢，但这是可以尝试的（希望我没有搞砸逻辑）......

```
public bool ConformsToPattern(System.Numerics.BigInteger number) {
    bool moreOnesPossible = true;
    if (number == 0) {
        return true;
    }
    else {
        byte[] bytes = number.ToByteArray();
        if ((bytes[bytes.Length - 1] & 1) == 1) {
            return false;
        }
        else {
            for (byte b = 0; b < bytes.Length; b++) {
                if (moreOnesPossible) {
                    switch (bytes[b]) {
                        case 1:
                        case 3:
                        case 7:
                        case 15:
                        case 31:
                        case 63:
                        case 127:
                        case 255:
                            continue;
                        default:
                            switch (bytes[b]) {
                                case 128:
                                case 192:
                                case 224:
                                case 240:
                                case 248:
                                case 252:
                                case 254:
                                    moreOnesPossible = false;
                                    continue;
                                default:
                                    return false;
                            }
                    }
                }
                else {
                    if (bytes[b] > 0) { return (false); }
                }
            }
        }
    }
    return true;
} 
```

# machine-learning - 在 Q 学习中具有两个以上动作的玻尔兹曼探索

> ID：11846387
> 
> 赞同：1
> 
> 时间：2012-08-07T12:47:44.870
> 
> 标签：machine-learning, reinforcement-learning, q-learning

我在 Q-learning 中使用 Boltzman 探索，每个状态至少有 10 个动作。我知道只有两个动作，玻尔兹曼探索可以非常简单地应用如下：

1.  使用玻尔兹曼探索方程计算两个动作的 pr1 和 pr2。
2.  生成一个随机数*r*
3.  假设pr1>pr2。如果 r<=pr1，采取对应概率 pr1 的动作。如果 r>pr1，则采取对应于 pr2 的动作。

但是，我怎样才能用 10 个动作做到这一点？在每个决策步骤，我都会更新所有动作的概率。这给了我最佳动作概率最高的所有动作的概率分布。在这种情况下如何使用玻尔兹曼探索来选择动作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T14:10:47.190

也许有更好的方法来做到这一点，但主要思想是：

```
def weighted_choice(weights):
    r = uniform(0, sum(weights))
    for i, weight in enumerate(weights):
        r -= weight
        if(r < 0):
            return i 
```

其中 weights 是 pr1,pr2,.. 的列表，返回值是获胜动作的索引

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T20:14:13.930

以下是关于加权随机抽样的精彩讨论：[飞镖、骰子和硬币](http://www.keithschwarz.com/darts-dice-coins/)。

这是我对 Vose 的 Alias 方法的实现：

```
class WeightedRandom
{
    private alias : array[int];
    private prob  : array[double];

    private random : Random;

    public this(p : array[double], random : Random)
    {
        this.random = random;

        def n = p.Length;

        alias = array(n);
        prob  = array(n);

        def small = Queue(n);
        def large = Queue(n);

        def p = p.Map(_ * n : double);

        foreach (x in p with i)
            (if (x < 1.0) small else large).Enqueue(i);

        while (!small.IsEmpty && !large.IsEmpty)
        {
            def s = small.Dequeue();
            def l = large.Dequeue();
            prob[s]  = p[s];
            alias[s] = l;
            p[l] = p[l] + p[s] - 1;
            (if (p[l] < 1.0) small else large).Enqueue(l);
        }

        while (!large.IsEmpty)
            prob[large.Dequeue()] = 1.0;

        while (!small.IsEmpty)
            prob[small.Dequeue()] = 1.0;
    }

    public NextIndex() : int
    {
        def i = random.Next(prob.Length);
        if (random.NextDouble() < prob[i])
            i;
        else
            alias[i];
    }
} 
```

# database - 使用 mono 为数据库生成类

> ID：11846390
> 
> 赞同：0
> 
> 时间：2012-08-07T12:48:01.613
> 
> 标签：database, mono

所以我找到了一个关于如何为我的数据库生成类的教程。我为 windows 安装了 Mono，我得到了 DbLinq 和 Npgsql，但我在理解如何生成类时遇到了一点问题。

该教程说我应该在单声道中使用它

```
mono DbMetal.exe /conn:"server=localhost;user id=user;\
password=password; database=db" /provider=PostgreSQL \
/code:db.cs /pluralize 
```

如果我将其写入 Mono，我会收到此消息

```
Reading schema from DBML file '\'
DbMetal : Access to the Path '\' is denied 
```

应该有什么路径？教程没有具体说明。

这是教程：[http ://romain.blogreen.org/blog/2009/07/linq-postgresql-and-mono/](http://romain.blogreen.org/blog/2009/07/linq-postgresql-and-mono/)

我应该怎么做才能解决这个问题？

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T22:54:58.857

如果您在 Windows 上，为什么要使用 Mono？首先使用 .NET 进行测试，如果可行但 Mono 不可行，请提交错误。

此外，我不会对 Mono for Windows 上的某些事情可能会失败感到惊讶。Mono 在非 Windows 平台上得到更好的支持（因为这是它存在的主要原因）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T02:04:04.313

在 Windows/.NET 上，您应该使用 SqlMetal，

[http://msdn.microsoft.com/en-us/library/bb386987.aspx](http://msdn.microsoft.com/en-us/library/bb386987.aspx)

根据 DbMetal 的页面，它相当于 SqlMetal，

[http://code.google.com/p/dblinq2007/wiki/DbMetal](http://code.google.com/p/dblinq2007/wiki/DbMetal)

您关注的文章是从 Mono/Linux 编写的，因此它可能无法演示您应该在 Windows 上使用哪些参数。

# android - 滚动选项卡而不是 ActionBar 中的固定选项卡

> ID：11846396
> 
> 赞同：0
> 
> 时间：2012-08-07T12:48:25.090
> 
> 标签：android, android-actionbar, android-scrollview

是否可以使 ActionBar 中的选项卡看起来像滚动选项卡，例如：

![](../Images/4739145fce31985cc9ca576b315fd927.png)

因为我能得到的只是固定的标签，比如：

![](../Images/42abca7cd49b4257a289481f0ea6f555.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T13:52:39.913

您要实现的不是滚动选项卡，而是 ViewPager。仅使用选项卡将无法获得所需的外观。

看看 ViewPager 上的好教程：[http ://android-developers.blogspot.co.uk/2011/08/horizo​​ntal-view-swiping-with-viewpager.html](http://android-developers.blogspot.co.uk/2011/08/horizontal-view-swiping-with-viewpager.html)

实现这一点的最佳方法是使用 Fragments，以及 用于顶部页面列表的库[ViewPageIndicator 。](http://viewpagerindicator.com/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T12:52:20.350

请检查：http: [//developer.android.com/training/implementing-navigation/lateral.html#swipe-tabs](http://developer.android.com/training/implementing-navigation/lateral.html#swipe-tabs)

# php - UTF-8 适用于数据库，但不适用于数据库中的字符串

> ID：11846397
> 
> 赞同：0
> 
> 时间：2012-08-07T12:48:25.933
> 
> 标签：php, mysql, utf-8

我对 utf-8 编码很陌生，从那时起就一直使用 htmlentities()，但现在想更改为在数据库中使用 utf-8。我认为这可能会派上用场，因为我正在编程的网站是德语，所以我使用了很多变音符号。

但是，我突然想到我有一个我无法解释的问题。在 html 头中，我说

```
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/> 
```

为了测试，如果我输入一个普通的“ö”并在 html 中硬编码，它显示得很好。

现在出现了奇怪的事情：在我的数据库中，我有一个条目“Köln” - 在数据库中它看起来完全像这样。但是，当我使用 php 从表中获取字符串并将其回显时，它会回显为“K�ln”。

另一方面，如果我输入变音符号并使用 ajax 将其发送到表中，“Köln”——我输入的字符串——在数据库中变为“Köln”。

我为此使用以下代码：

```
//Change city
$('#newcitybutton').click(function(){
//Get id and city
var id=encodeURIComponent($('#id').html()); //This does not seem to be the problem - if I leave that out, I still does the same thing
var city=$('#newcity').val();

//Call script to change city
$.ajax({
    type: 'POST',
    url: 'action/changecity.php',
    data: 'id='+id+'&city='+city+'&kind='+kind,
    success: function(feedback){
        var json=$.parseJSON(feedback);
        if(json.success=='false'){
            $('#newcityfeedback').css('color','red').html(json.message).hide().fadeIn(200);
        }else if(json.success=='true'){
            $('#newcity').hide();
            $('#newcitybutton').hide();
            $('#'+kind+'city').html(decodeURIComponent(city));
            $('#newcityfeedback').css('color','green').html(json.message).hide().fadeIn(200).delay(2000).fadeOut(200);
        }
    }
});
}); 
```

改变城市.php：

```
//Save in vars
$id=$_POST['id'];
$city=$_POST['city'];
$kind=$_POST['kind'];

//Update city
$query="UPDATE ".$kind."s SET city='$city' WHERE id=$id";
mysql_query($query); 
```

我想当我`$city=utf8_decode($city);`在放入数据库之前使用时，它会正确保存在那里。但后来我需要使用 utf8_encode 在页面上正确显示。

我在这里做错了什么？我只是无法弄清楚错误来自我的代码还是数据库。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T12:52:51.637

尝试使用带有“UTF8”作为参数的 PHP 函数 mysql_set_charset()。

[http://php.net/manual/en/function.mysql-set-charset.php](http://php.net/manual/en/function.mysql-set-charset.php)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-07T12:53:16.280

您还需要设置 MySQL 用于当前连接的编码。

使用**PDO**，将以下选项传递给 PDO 类构造函数：

```
$pdoOptions = array(
    PDO::MYSQL_ATTR_INIT_COMMAND => 'SET NAMES utf8'
); 
```

使用**已弃用的 MySQL 扩展**，在创建连接后立即执行以下查询：

```
mysql_query("SET NAMES utf8"); 
```

检查这个stackoverflow问题以获取更多信息：[SET NAMES utf8 in MySQL?](https://stackoverflow.com/questions/2159434/set-names-utf8-in-mysql)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-07T12:50:49.683

您可以在数据库连接后设置名称编码 - 遵循本教程：[http ://www.oreillynet.com/onlamp/blog/2006/01/turning_mysql_data_in_latin1_t.html/](http://www.oreillynet.com/onlamp/blog/2006/01/turning_mysql_data_in_latin1_t.html/)

# java - 使用 POI 解析 Excel 但出现异常“Invalid Header Signature”

> ID：11846398
> 
> 赞同：2
> 
> 时间：2012-08-07T12:48:35.677
> 
> 标签：java, excel, apache-poi

我试图使用 Apache POI（版本 3.6）来解析 Excel .xls 文件，但只有异常：

```
java.io.IOException: Invalid header signature; read 0x07B1FD124BEDF108, expected 0xE11AB1A1E011CFD0 
```

我用谷歌搜索了一些结果，基本上说“该文件实际上不是有效的 excel 文件（即 .csv 等），但以后缀 .xls 结尾”。但我很确定我的 excel 文件是有效的（Excel97-2003 格式）。

出于保密考虑，我无法发布我的 excel，但是当我使用 emacs hexl-mode 查看这个二进制 excel 文件时，标题是：

```
D0CF 11E0 A1B1 1AE1 
```

我认为这正是 POI 所期望的（`E11AB1A1E011CFD0`，但在大端）。但为什么我得到了例外？

顺便说一句，如果我使用带有命令 %!xxd 的 vim 来查看相同的 excel 文件，我会得到一个与 eamcs 不同的标题：

```
C390 C38F 11C3 A0C2 
```

整个二进制文件似乎完全不同。我无法理解。

感谢您的任何帮助！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-07T15:20:53.683

如果您遇到该异常，那么您的文件确实不是真正的 .xls 文件。相反，它将是其他文件，重命名为具有 .xls 扩展名，或者是损坏的文件。

我建议您尝试在 Excel 中打开文件，然后另存为。这可能会给您有关文件类型的提示。如果没有，请另存为 Excel .xls，然后您就可以打开该文件

我不知道您的文件是什么（我不认识标头），但我可以向您保证，它不是有效的 .xls 文件所具有的 OLE2 标头。

[Apache Tika](http://tika.apache.org/)可能能够确定它是哪种二进制文件，因此您可以随时尝试使用 Tika-App jar

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-01T11:05:08.273

只是一个想法，如果您使用 Maven，请确保在资源标签过滤中设置为 false。否则，maven 往往会在 pom.xml 中的复制阶段损坏 xls 文件

# c# - 发送 UDP 数据包，不使用 ARP，已知 IP 和 MAC

> ID：11846408
> 
> 赞同：2
> 
> 时间：2012-08-07T12:48:54.000
> 
> 标签：c#, udp, ip, ethernet, osi

我正在尝试通过网络将 UDP 发送到微控制器。微控制器已经剥离了几乎所有的 IP 堆栈以保持精简，因此无法参与 ARP。微控制器正在输出广播数据包，我可以接收到它，所以我知道它的 IP 地址和 MAC 地址。我可以向它发送广播UDP数据包，它接收良好，但是当我尝试使用它的IP地址发送数据包时，我可以在wireshark中看到ARP消息，“谁有192.168.1.205？告诉192.168.1.18”，205是微，18是我的电脑。微不响应其 MAC 地址，所以我无法发送数据包，但我知道微发送的数据包中的 MAC 地址。

所以我的问题是我可以使用 UdpClient 指定 IP 和 MAC 地址，因此它不需要使用 ARP .. 还有什么我不考虑的吗？

有效的广播方法如下所示：

```
myUdpClient.EnableBroadcast = true;
myUdpClient.Connect(IPAddress.Broadcast, port);
myUdpClient.Send(dataBytes, dataBytes.Length); 
```

目前不起作用的固定IP方法看起来像这样

```
IPEndPoint ep = new IPEndPoint("192.168.1.205", port);
myUdpClient.Send(dataBytes, dataBytes.Length, ep); 
```

我看过使用类似的东西

```
myUdpClient.Client.SendTo(dataBytes, SocketFlags.DontRoute, ep); 
```

但这不起作用，并且仍然没有使用微控制器MAC地址..我的应用程序知道并且需要使用（我认为）。我还希望网络上的一些 ARP 表能够知道 MAC 地址在哪里看到，因为带有此信息的数据包正在从它发送..

作为说明，我想将广播保持在最低限度，以减少网络上其他微控制器的负载。

在此先感谢，加雷斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T13:02:53.887

据我所知，你有两个选择，我相信其他人有更多；

*   在启动应用程序之前在操作系统中设置静态 ARP 条目。**arp -s <ip> <mac>**或类似的将在大多数操作系统上设置它并绕过 ARP 以进一步请求 IP。

*   使用 Jpcap 完全绕过 IP 堆栈，构建和发送您自己的原始数据包。

# java - Java：阅读的循环是如何逃脱的？

> ID：11846416
> 
> 赞同：0
> 
> 时间：2012-08-07T12:49:29.697
> 
> 标签：java, sockets, readline

通过一些关于套接字的教程，我不断遇到这样的代码：

```
 while(true){ 
    socket.receive(packet); 
    String message = new String(packet.getData(),0,packet.getLength(), TEXT_ENCODING); 
    System.out.println(message); 
  } 
```

问题是：这个循环是怎么留下的？仅通过捕获，一旦接收（）完成？

更准确地说，这是我所做的：

```
while(true) {
        try {
            socket.receive(answer);
            resultString = new String(answer.getData(), 0, answer.getLength(), "ASCII");

            if (isMyIdentifier(resultString)) {
                gatewayIP =  answer.getAddress().getHostAddress();
                return true;
            } else {
                return false;
            }
        }
        catch (SocketTimeoutException e) {
            throw new GatewayNotReachableException();
        }
    } 
```

但是我一直想出一个超时异常，尽管读取是正确的。所以我想知道，如果例外是“预期”的离开方式。尽管我严重怀疑...并且 socket.receive(packet) 是抛出异常的地方。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-07T12:52:09.197

信不信由你，您不希望所有循环都终止。

一个典型的例子是一个 web 服务器，它有一个简单的循环来监听请求，处理请求，然后再次返回等待 - “永远”。这基本上就是您的代码示例。

答案是“没有留下这个循环”，这就是你想要的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T12:52:49.633

循环永远不会离开，这是服务器保持正常运行的全部目的。

还是您希望服务器接收一个客户端调用然后关闭？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-07T12:53:23.300

除非内部发生错误，否则循环永远不会中断。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-07T13:00:20.360

这两个代码块暗示了一种非常不同的功能意义。

第一个似乎在说，“我希望我的请求处理程序无限期地运行，直到我自己手动退出程序！” 这是一个合理的说法。

但是第二个代码块完全不同。你进入了循环，但永远不会超过一次，因为要么`isMyIdentifier(resultString)`是真的，在这种情况下你会退出方法（当然还有循环），或者不是在这种情况下你*仍然*退出方法. 在这种情况下，循环根本没有做任何事情。

此外，是的，异常处理为您的第二个代码块提供了另一种退出循环的方法。至于*为什么*抛出异常，那是另一个问题。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-07T13:00:42.783

在下面的代码中有一个**连续** `while loop`的，这似乎是一个合适的实现，但是有些服务器倾向于**保持监听**，并同时处理请求。

**这个while循环永远不会退出！**

```
while(true){ 
    socket.receive(packet); 
    String message = new String(packet.getData(),0,packet.getLength(), TEXT_ENCODING); 
    System.out.println(message); 
  } 
```

# php - 如何将日期时间字符串转换为 UTC 字符串？

> ID：11846423
> 
> 赞同：0
> 
> 时间：2012-08-07T12:49:51.223
> 
> 标签：php, datetime, utc, dst

我有一个这样的日期时间字符串：

```
`2012-09-03 22:00 Central USA Time`. 
```

我想将其转换为 UTC 时区。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T12:52:39.977

使用`gmdate()`和`strtotime()`：

```
date_default_timezone_set('America/New_York');
echo gmdate('Y-m-d H:i', strtotime('2012-09-03 22:00')); 
```

而不是`Central USA Time`，使用支持的时区：[http ://www.php.net/manual/en/timezones.php](http://www.php.net/manual/en/timezones.php)

该`date_default_timezone_get()`功能将始终为您提供正确的时区

# php - beforeFind 函数中添加的 cakePHP 条件对分页没有影响

> ID：11846424
> 
> 赞同：1
> 
> 时间：2012-08-07T12:49:52.167
> 
> 标签：php, cakephp-2.0

我正在尝试过滤查询结果。用户只能看到与他的 company_group_id 相同的公司，所以我很难在模型的 beforeFind 函数中添加该条件。

```
function beforeFind($queryData) {
    App::uses('CakeSession', 'Model/Datasource');
    $user = CakeSession::read('Auth.User');
    $queryData['conditions']['Company.company_group_id'] = $user['company_group_id'];
    parent::beforeFind($queryData);
} 
```

当我 pr() 我的 $queryData 时，我可以看到这种情况出现

```
Array
(
[conditions] => Array
    (
        [Company.company_group_id] => 2
    )

) 
```

不幸的是，当我调用分页时产生的查询忽略了这个条件

```
SELECT `Company`.`id`, ... WHERE 1 = 1 GROUP BY `Company`.`id` ORDER BY `Company`.`name` asc LIMIT 10

```

我这样做正确吗？还是有其他方法可以向用户显示正确的记录？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T13:10:22.573

您必须在控制器的操作中配置分页行为（更多信息请参见[此处](http://book.cakephp.org/2.0/en/core-libraries/components/pagination.html)）：

```
//obtaining the company_group_id
$user = CakeSession::read('Auth.User');
$id = $user['company_group_id'];

//setting the pagination conditions (similar to a find())
$this->paginate = array(
    'conditions' => array('Company.company_group_id' => $id),
);

$data = $this->paginate('Company');
$this->set('data', $data); 
```

# mysql - 当值来自同一列时获取映射表 ID 的值

> ID：11846429
> 
> 赞同：0
> 
> 时间：2012-08-07T12:50:20.000
> 
> 标签：mysql, join, mapping

我真的很难理解应该简单的事情，

我有两张表，一张包含记录，另一张是映射表。

记录

```
ID  Title      Description
1   record 1   desc 1
2   record 2   desc 2
3   record 3   desc 3
4   record 4   desc 4 
```

映射表

```
ID1    ID2
 1      3
 2      4 
```

我想要做的是获取映射表中每一行的两个标题。所以上面会输出

```
record 1  record 3
record 2  record 4 
```

我错过了一些非常明显的东西，尝试多个连接会导致尝试链接同一个表两次时出错。

以下返回 NULL

```
SELECT records.title FROM mapping
    LEFT JOIN records 
    ON mapping.ID1 = records.id
     AND mapping.ID2 = records.id 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T12:58:31.163

试试这个：（**未**测试）

```
SELECT  b.Title as TitleA,
        c.Title as TitleB
FROM    mapping a
            INNER JOIN records b
                on a.ID1 = b.ID
            INNER JOIN records c
                on a.ID2 = c.ID 
```

# c# - 如何在 asp.net mvc3 中使用缓存？

> ID：11846432
> 
> 赞同：0
> 
> 时间：2012-08-07T12:50:32.940
> 
> 标签：c#, asp.net-mvc-3, caching

我的 asp.net mvc3 应用程序中的缓存有问题。

**我的代码**

```
using System.Web.Caching;
...
class RegularCacheProvider : ICacheProvider
{
    Cache cache ;

    public object Get(string name)
    {
        return cache[name];
    }

    public void Set(string name, object value)
    {
        cache.Insert(name, value);
    }

    public void Unset(string name)
    {
        cache.Remove(name);
    }
} 
```

我使用单例来为其赋予价值：

```
School schoolSettings = (School)CacheProviderFactory.Cache.Get("SchoolSettings");
            if (schoolSettings == null)
            {
                CacheProviderFactory.Cache.Set("SchoolSettings", someObject);
            } 
```

所以在第一次使用它不起作用并且给我一个错误`cache[name]`是空的。

我做错了什么？

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T13:01:27.303

您从来没有给出`cache`任何价值……请注意，如果您希望将其分开，*常规*的网络缓存可能不是您的最佳选择；也许

```
MemoryCache cache = new MemoryCache(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-07T12:56:25.463

使用 HttpRuntime.Cache 怎么样，这个例子会缓存一个小时？

```
HttpRuntime.Cache.Add("SchoolSettings", someObject, null, DateTime.Now.AddHours(1),
                       System.Web.Caching.Cache.NoSlidingExpiration,
                       System.Web.Caching.CacheItemPriority.Normal, null); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-07T15:04:48.480

试试下面的代码。它适用于我的项目

```
 using System.Runtime.Caching;

    public class RegularCacheProvider : ICacheProvider
        {
            private ObjectCache Cache { get { return MemoryCache.Default; } }

            object ICacheProvider.Get(string key)
            {
                return Cache[key];
            }

            void ICacheProvider.Set(string key, object data, int cacheTime = 30)
            {
                var policy = new CacheItemPolicy {AbsoluteExpiration = DateTime.Now + TimeSpan.FromMinutes(cacheTime)};
                Cache.Add(new CacheItem(key, data), policy);
            }

            void ICacheProvider.Unset(string key)
            {
                Cache.Remove(key);
            }
        } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-07T13:01:35.370

更改检查值的代码，如下所示：

> SchoolschoolSettings = CacheProviderFactory.Cache.Get("SchoolSettings") as (School);

请注意，我使用的是“as”而不是强制转换对象。如果值为 null，Cast 会爆炸，而“as”只会给你一个你期望的 null 值。

# database - JPA 中类似 Twitter 的关系

> ID：11846433
> 
> 赞同：3
> 
> 时间：2012-08-07T12:50:36.373
> 
> 标签：database, database-design, jpa

我遇到了 JPA 的问题。我正在尝试实现一个允许用户关注其他用户并被关注的数据库。我想我需要（总结）这样的东西：

```
USER_TABLE: id | userName
RELATIONSHIP_TABLE: id | follower | followed | acceptation 
```

我有两个实体（也总结了）：

```
@Entity
public class User implements Serializable {

@Id
private Long id;

private String userName;

@OneToMany
private Collection<Relationship> followings;

}

@Entity
public class Relationship implements Serializable {

@Id
private Long id;

private User follower;

private User followed;

private boolean accepted;

} 
```

我的问题是我不确定是否可以这样做，因为我获得了比我需要的两个表更多的表。

有谁能够帮我？谢谢和对不起我的英语。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-07T12:56:16.153

您获得了更多表，因为您没有使关联成为双向的。如果您不告诉，JPA 无法知道那`Relationship.follower`是另一面：`User.followings`

```
@Entity
public class User implements Serializable {

    @OneToMany(mappedBy = "follower")
    private Collection<Relationship> followings;

    // ...
}

@Entity
public class Relationship implements Serializable {

    @ManyToOne
    @JoinColumn(name = "follower")
    private User follower;

    @ManyToOne
    @JoinColumn(name = "followed")
    private User followed;

    // ...
} 
```

[当然，文档](http://docs.jboss.org/hibernate/core/3.6/reference/en-US/html_single/#collections-bidirectional)解释了它是如何工作的。

# php - 使用 mssql 方法（Mac OS X 上的 FreeTDS、PHP 和 Apache）

> ID：11846438
> 
> 赞同：3
> 
> 时间：2012-08-07T12:50:45.187
> 
> 标签：php, macos, apache, freetds

我已经在我的 Mac 上安装了 FreeTDS，但我在使用`mssql_connect`.

首先，当我运行 tsql -CI 时，看到 freetds.conf 目录列为`/opt/local/etc/freetds`. 我在这个目录中有一个 freetds.conf 文件。

接下来，如果我这样连接：

```
$connect = mssql_connect('IP_ADDRESS', 'username', 'password'); 
```

然后一切都按预期工作。也就是说，我可以从我选择的任何数据库中检索、更新、插入数据`mssql_select_db()`。

如果我尝试这样连接：

```
$connect = mssql_connect('DSN_NAME', 'username', 'password'); 
```

where`DSN_NAME`匹配我的 freetds.conf 文件中指定的数据源，然后我收到一个错误，`unable to connect to server: DSN_NAME`它告诉我 PHP 没有正确看到我的 freetds.conf 文件的路径。

但是，如果在我打电话之前我添加：

```
putenv("FREETDSCONF=/opt/local/etc/freetds/freetds.conf"); 
```

然后一切都按预期工作。这告诉我我的 freetds.conf 文件格式正确。

我已经搜索了所有关于如何找到 PHP*认为*freetds.conf 文件所在的路径，但我找不到。

最后，有一些原因我不想在我的连接中直接使用 IP 地址，以及为什么我不想被迫使用`putenv()`指定目录的方法。

有任何想法吗？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T03:40:44.390

当我安装 FreeTDS 时，我最初使用的是 MacPorts。我相信这给了我一些关于 freetds.conf 应该在哪里的冲突。即使运行时 freetds.conf`tsql -C`的路径是我尝试使用的实际路径，但当我使用该路径编译 mssql.so 扩展时，PHP 无法识别它。

解决方案是忘记 MacPorts for FreeTDS，只从源代码安装 FreeTDS。然后从 PHP 源安装 mssql.so 扩展，并确保使用与系统上相同的版本（我的是 OS X Mountain Lion 下的 5.3.13）。

如果您完全[按照此博客中的说明进行操作，](https://web.archive.org/web/20140415005236/http://blog.benjaminwalters.net/?p=10)则不会有任何问题。

最后几件事：

*   即使说明中提到了它，我也没有运行 MAMP，因此无论哪种方式都无关紧要。
*   如果您已经通过 MacPorts 安装了 FreeTDS，请使用：卸载`sudo port uninstall freetds +odbc`，然后使用`sudo port uninstall unixODBC`. 确保卸载所有 FreeTDS 实例。如果您有多个，您会在运行卸载时收到通知，您需要指定要卸载的版本。

# sharepoint-2010 - 具有多个批准的 Sharepoint 工作流

> ID：11846441
> 
> 赞同：0
> 
> 时间：2012-08-07T12:50:51.330
> 
> 标签：sharepoint-2010, sharepoint-designer, sharepoint-workflow

我正在尝试在具有多个批准的 sharepoint 中创建一个工作流。

因此，有条件逻辑表明，如果 A 接受提案，则继续向 B 批准，如果 B 批准，则继续向 C 等转移。

我对工作流应该如何运行有我的逻辑，但我遇到了 SharePoint Designer 2010 的问题。显然，您添加到工作流的每个审批流程都会增加 1100 个复杂节点。sharepoint 默认设置设置为我认为 5000 个节点。我的工作流程有 12 个审批流程，因此不会发布。我已经运行了一些 powershell 脚本，这些脚本应该会增加 sharepoint 允许的工作流的复杂性，但它仍然无法正常工作。

有没有办法在没有这么多审批流程的情况下做到这一点，我真的不想做一个自定义流程，但如果这是我唯一的选择，我可能不得不这样做。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T19:13:41.910

我在开发工作流程时遇到了同样的问题。我想出的唯一解决方案是等待批准状态等于“已批准”，然后在列表中设置一列以指示它已完成。即名为first_approval_complete 的列。

当您的第一次批准达到“已批准”状态时，将该列设置为“是”

然后将另一个工作流设置为“在项目更改时运行”，该工作流以 if 语句开头，该语句检查 first_approval_complete 是否等于“YES”。

有点笨重，并且使每个工作流程有点慢，但如果它们都是连续的，您可以获得无限数量的批准。

# image - openGL 图像质量（模糊）

> ID：11846443
> 
> 赞同：1
> 
> 时间：2012-08-07T12:51:11.007
> 
> 标签：image, opengl, sdl

我使用 openGL 创建幻灯片应用程序。不幸的是，与gnome 图像查看器相比，使用**openGL渲染的图像看起来很模糊。**

这是2个屏幕截图

(opengl) [http://tinyurl.com/dxmnzpc](http://tinyurl.com/dxmnzpc)

（图像查看器）[http://tinyurl.com/8hshv2a](http://tinyurl.com/8hshv2a)

这是基本图像： [http ://tinyurl.com/97ho4rp](http://tinyurl.com/97ho4rp)

该图像具有我的屏幕的本机尺寸。(2560x1440)

```
#include <GL/gl.h>
#include <GL/glu.h>
#include <GL/freeglut.h>
#include <SDL/SDL.h>
#include <SDL/SDL_image.h>
#include <unistd.h>

GLuint text = 0;

GLuint load_texture(const char* file) {
        SDL_Surface* surface = IMG_Load(file);

        GLuint texture;
        glPixelStorei(GL_UNPACK_ALIGNMENT,4);
        glGenTextures(1, &texture);
        glBindTexture(GL_TEXTURE_2D, texture);
        SDL_PixelFormat *format = surface->format;
        printf("%d %d \n",surface->w,surface->h);
        if (format->Amask) {
                gluBuild2DMipmaps(GL_TEXTURE_2D, 4,surface->w, surface->h, GL_RGBA,GL_UNSIGNED_BYTE, surface->pixels);
        } else {
                gluBuild2DMipmaps(GL_TEXTURE_2D, 3,surface->w, surface->h, GL_RGB, GL_UNSIGNED_BYTE, surface->pixels);
        }
        SDL_FreeSurface(surface);

        return texture;
}

void display(void) {
        GLdouble offset_x = -1;
        GLdouble offset_y = -1;

        int p_viewport[4];
        glGetIntegerv(GL_VIEWPORT, p_viewport); 

        GLfloat gl_width = p_viewport[2];//width(); // GL context size
        GLfloat gl_height = p_viewport[3];//height();

        glClearColor (0.0,2.0,0.0,1.0);
        glClear (GL_COLOR_BUFFER_BIT);

        glLoadIdentity();
        glEnable( GL_TEXTURE_2D );
        glTranslatef(0,0,0);

        glBindTexture( GL_TEXTURE_2D, text);

        gl_width=2; gl_height=2;

        glBegin(GL_QUADS);
        glTexCoord2f(0, 1); //4
        glVertex2f(offset_x, offset_y);

        glTexCoord2f(1, 1); //3
        glVertex2f(offset_x + gl_width, offset_y);

        glTexCoord2f(1, 0); // 2
        glVertex2f(offset_x + gl_width, offset_y + gl_height);

        glTexCoord2f(0, 0); // 1
        glVertex2f(offset_x, offset_y + gl_height);
        glEnd();

        glutSwapBuffers();
}

int main(int argc, char **argv) {
        glutInit(&argc,argv);
        glutInitDisplayMode (GLUT_DOUBLE);

        glutGameModeString("2560x1440:24");
        glutEnterGameMode();       
        text = load_texture("/tmp/raspberry/out.jpg");

        glutDisplayFunc(display);
        glutMainLoop();
} 
```

**更新尝试**

```
void display(void)                                                                                                         
{                                                                                                                          
        GLdouble texture_x = 0;                                                                                            
        GLdouble texture_y = 0;                                                                                            
        GLdouble texture_width = 0;                                                                                        
        GLdouble texture_height = 0;                                                                                       

        glViewport(0,0,width,height);                                                                                      

        glClearColor (0.0,2.0,0.0,1.0);                                                                                    
        glClear (GL_COLOR_BUFFER_BIT);                                                                                     
        glColor3f(1.0, 1.0, 1.0);                                                                                          

        glMatrixMode(GL_PROJECTION);                                                                                       
        glLoadIdentity();                                                                                                  
        glOrtho(0, width, 0, height, -1, 1);                                                                               

        //Do pixel calculatons                                                                                             
        texture_x = ((2.0*1-1) / (2*width));                                                                               
        texture_y = ((2.0*1-1) / (2*height));                                                                              
        texture_width=((2.0*width-1)/(2*width));                                                                           
        texture_height=((2.0*height-1)/(2*height));                                                                        

        glMatrixMode(GL_MODELVIEW);                                                                                        
        glLoadIdentity();                                                                                                  
        glTranslatef(0,0,0);                                                                                               

        glEnable( GL_TEXTURE_2D );                                                                                         
        glBindTexture( GL_TEXTURE_2D, text);                                                                               

        glBegin(GL_QUADS);                                                                                                 
        glTexCoord2f(texture_x, texture_height); //4                                                                       
        glVertex2f(0, 0);                                                                                                  

        glTexCoord2f(texture_width, texture_height); //3                                                                   
        glVertex2f(width, 0);                                                                                              

        glTexCoord2f(texture_width, texture_y); // 2                                                                       
        glVertex2f(width,height);                                                                                          

        glTexCoord2f(texture_y, texture_y); // 1                                                                           
        glVertex2f(0,height);                                                                                              
        glEnd();                                                                                                           

        glutSwapBuffers();                                                                                                 
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-08T13:20:12.017

您遇到的是*栅栏问题*的一种变体，它源于 OpenGL 如何处理纹理坐标。OpenGL 不处理纹理的像素（纹素），而是使用图像数据作为插值的支持，这实际上覆盖了比图像像素更广的范围。因此，纹理坐标 0 和 1 不会击中最左/最下和最右/最上的像素，但实际上会更进一步。

假设纹理是 8 像素宽：

```
 | 0 | 1 | 2 | 3 | 4 | 5 | 6 | 7 |
 ^   ^   ^   ^   ^   ^   ^   ^   ^
0.0  |   |   |   |   |   |   |  1.0
 |   |   |   |   |   |   |   |   |
0/8 1/8 2/8 3/8 4/8 5/8 6/8 7/8 8/8 
```

数字表示纹理的像素，条形表示纹理的边缘，并且在最近过滤像素之间的边界的情况下。但是，您想击中像素的中心。所以你对纹理坐标感兴趣

(0/8 + 1/8)/2 = 1 / (2 * 8)

(1/8 + 2/8)/2 = 3 / (2 * 8)

...

(7/8 + 8/8)/2 = 15 / (2 * 8)

或更一般地，对于 N 宽纹理中的像素 i，正确的纹理坐标是

(2i + 1)/(2N)

但是，如果您想将纹理与屏幕像素完美对齐，请记住您指定的坐标不是四边形的像素，而是边缘，根据投影，边缘可能与屏幕像素边缘对齐，而不是中心，因此可能需要其他纹理坐标。

请注意，如果您遵循这一点，那么无论您的过滤模式和 mipmap 是什么，您的图像都将始终看起来清晰明快，因为插值恰好符合您的采样支持，即您的输入图像。切换到另一种过滤模式，如 GL_NEAREST 乍一看可能看起来不错，但实际上是不正确的，因为它会给您的样本起别名。*所以不要这样做。*

* * *

您的代码也几乎没有其他问题，但它们并不是一个大问题。首先，您选择了一种相当神秘的方式来查看视口尺寸。您（可能没有进一步考虑）发现默认 OpenGL 视口是创建上下文的窗口的大小这一事实。您正在使用 SDL，它具有副作用，只要您坚持使用 SDL-1，这种方法就不会对您不利。但是切换到任何其他框架，它可能会通过代理绘制创建上下文，并且您遇到了问题。

规范的方法通常是从窗口系统（在您的情况下为 SDL）检索窗口大小，然后在显示函数中的第一个操作中*设置视口。*

另一个问题是您使用`gluBuildMipmaps`，因为 a) 您不想使用 mipmap 和 b) 由于 OpenGL-2 您可以上传任意大小的纹理图像（即您不限于尺寸的 2 次方），其中完全消除了对 gluBuildMipmaps 的需求。所以不要使用它。只需直接使用 glTexImage2D 并切换到非 mipmapping 过滤模式即可。

### 由于问题更新而更新

您计算纹理坐标的方式仍然看起来不正确。看起来你从 1 开始计数。纹理像素的基础索引为 0，所以……</p>

这就是我的做法：

假设投影映射视口

```
 glMatrixMode(GL_PROJECTION);                                                                                       
    glLoadIdentity();                                                                                                  
    glOrtho(0, win_width, 0, win_height, -1, 1);   

    glViewport(0, 0, win_width, win_height); 
```

我们计算纹理坐标为

```
 //Do pixel calculatons      
    glBindTexture( GL_TEXTURE_2D, text);                                                                                           
    GLint tex_width, tex_height;
    glGetTexLevelParameteriv(GL_TEXTURE_2D, 0, GL_TEXTURE_WIDTH,  &tex_width);
    glGetTexLevelParameteriv(GL_TEXTURE_2D, 0, GL_TEXTURE_HEIGHT, &tex_height);

    texture_s1 = 1\. / (2*width);  // (2*0-1
    texture_t1 = 1\. / (2*height);                        
    texture_s2 = (2.*(tex_width -1) + 1) / (2*width);
    texture_t2 = (2.*(tex_height-1) + 1) / (2*height); 
```

请注意，tex_width 和 tex_height 给出了每个方向上的像素*数*，但坐标是基于 0 的，因此您必须从它们中减去 1 以进行纹理坐标映射。因此，我们还在 s1, t1 坐标的分子中使用常数 1。

鉴于您选择的投影，其余的看起来还可以

```
 glEnable( GL_TEXTURE_2D );                                                                                         

    glBegin(GL_QUADS);                                                                                                 
    glTexCoord2f(s1, t1); //4                                                                       
    glVertex2f(0, 0);                                                                                                  

    glTexCoord2f(s2, t1); //3                                                                   
    glVertex2f(tex_width, 0);                                                                                              

    glTexCoord2f(s2, t2); // 2                                                                       
    glVertex2f(tex_width,tex_height);                                                                                          

    glTexCoord2f(s1, t2); // 1                                                                           
    glVertex2f(0,tex_height);                                                                                              
    glEnd(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T13:00:47.837

我不确定这是否真的是问题，但我认为你不需要/想要这里的 mipmap。您是否尝试过使用[`glTexImage2D`](http://www.opengl.org/sdk/docs/man/xhtml/glTexImage2D.xml)而不是`gluBuild2DMipmaps`与最近邻过滤（[`glTexParameteri( GL_TEXTURE_2D, GL_TEXTURE_MIN`/`MAG_FILTER, GL_NEAREST);`](http://www.opengl.org/sdk/docs/man/xhtml/glTexParameter.xml)）结合使用？

# objective-c - 操作错误：在 Objective-C 中查询 ldap_search_ext_s 时

> ID：11846444
> 
> 赞同：0
> 
> 时间：2012-08-07T12:51:12.300
> 
> 标签：objective-c, active-directory, ldap, openldap

如此链接中所述，我正在使用 ldap 进行用户身份验证。 [http://www-archive.mozilla.org/directory/csdk-docs/writing.htm](http://www-archive.mozilla.org/directory/csdk-docs/writing.htm) 在这里我在 ldap_search_ext_s 调用时收到“操作错误”。谁能告诉我为了从 Active Directory 获取用户信息需要做哪些更改。

注意：我不想在绑定时输入 dc 名称和密码。由于机器将在域中没有管理员凭据的普通用户帐户（域用户）下运行。请让我知道在这种情况下如何进行绑定。

我的机器详细信息：Mac Lion，64 位。我正在尝试连接到 Windows Active Directory。

谢谢，陶西夫。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T12:54:39.727

在大多数情况下，连接到 Windows Active Directory 服务器时，您需要使用有效的用户名和密码进行绑定。

当你执行你的`ldap_simple_bind_s()`，这两个`NULL`参数需要被替换——第一个`DN`是执行绑定的用户的，第二个是那个的密码`DN`。

[此答案](https://stackoverflow.com/questions/11133752/ldap-search-with-winldap-h-on-ad-server/11134799#11134799)中有更多链接详细信息

# php - 使用 php 以特定顺序从数据库中检索和显示数据

> ID：11846446
> 
> 赞同：0
> 
> 时间：2012-08-07T12:51:14.833
> 
> 标签：php, mysql, sql

我有一个数据（表格形式），如下所示

```
1 2 3

     4     

5 0 6

8 
```

此表包含三列四行和 12 个单元格。但所有单元格都没有值。我已将此表中的数据存储到数据库中，在空单元格的位置输入零。但这会导致数据库中大量空间的浪费。我只需要在我的数据库中输入非零值，并且在检索时必须显示为上表。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T12:53:47.640

这看起来很简单：

将`row`和`column`值存储在它们自己的单独列中，以及`value`保存单元格值的列中。

您永远不会输入非零或空白的数据库值。

检索值时，将它们填充到多维数组中：

```
$table[ $row['row'] ][ $row['col'] ] = $row['value']; 
```

# vb.net - vb.net 动态类型列表

> ID：11846451
> 
> 赞同：1
> 
> 时间：2012-08-07T12:51:37.137
> 
> 标签：vb.net, list, generics, dynamic, types

我正在为我的程序的一部分构建一个 MVC 结构。

我已经完成了 5-10 个表的模型，它们的共同点只是构造函数。（采用recordset.fields）

这是我填充这些对象的函数：

```
Public Function reqTable(ByVal pTable As String, ByVal pType As Type, ByVal pNoProjet As Integer, Optional ByVal strAdditionnalConditions As String = "") As List(Of Object)
    Dim lstRetour As List(Of Object) = New List(Of Object)

    rsRequestCSV = conSQL.Execute("SELECT * FROM " & pTable & " WHERE NoProjet = " & pNoProjet & " " & strAdditionnalConditions)
    With rsRequestCSV
        While Not .EOF
            lstRetour.Add(Activator.CreateInstance(pType, New Object() {rsRequestCSV.Fields})) 'New clsTable(rsRequestCSV.Fields))
            .MoveNext()
        End While
    End With
    Return lstRetour
End Function 
```

我无法实现的是返回 List(Of pType) 而不是 List(Of Object)。

我想要这个的原因是在我的数据网格视图中有标题，即使它们是空的。

那么有没有办法返回 List(Of MyModel'sType) ？

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T13:32:03.350

只需使用`As pType`代替`As Object`（但考虑使用常规类型参数名称，即`T`代替`pType`），删除现在已过时的`pType`参数，并使用以下内容创建和添加实例：

```
Public Function ReqTable(Of T)(ByVal table As String, ByVal noProject As Integer, Optional ByVal additionalConditions As String = "") As List(Of T)
    Dim result As New List(Of T)()

    ' Where is this declared?! It probably should be declared here.
    request = conSQL.Execute( _
        String.Format("SELECT * FROM {0} WHERE NoProjet = {1} {2}", _
                      table, noProjet, additionnalConditions))

    While Not request.EOF
        result.Add( _
            CType(Activator.CreateInstance( _
                    GetType(T), New Object() {request.Fields}), _
                T))
        request.MoveNext()
    End While

    Return result
End Function 
```

`GetTpe(T)` gets you a `System.Type` instance representing the type argument. Since VB, unlike Java, has [reified generic types](https://stackoverflow.com/q/1927789/1968) you can thus create instances from type argument.

Apart from that, pay attention that .NET has different code style conventions than Java; for instance, all methods should use PascalCase, not camelCase. And like in Java, use of Hungarian notation is discouraged. Use concise but descriptive names. And, as Rene noted, your code suffers from an SQL injection vulnerability.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-07T13:07:34.850

忽略 SQL 注入问题，试试这个：

```
Public Function reqTable(of T)(ByVal pTable As String, ByVal pNoProjet As Integer, Optional ByVal strAdditionnalConditions As String = "") As List(Of T)
    Dim lstRetour As New List(Of T)

    rsRequestCSV = conSQL.Execute("SELECT * FROM " & pTable & " WHERE NoProjet = " & pNoProjet & " " & strAdditionnalConditions)
    With rsRequestCSV
        While Not .EOF
            lstRetour.Add(Activator.CreateInstance(T, New Object() {rsRequestCSV.Fields})) 'New clsTable(rsRequestCSV.Fields))
            .MoveNext()
        End While
    End With
    Return lstRetour
End Function 
```

# vba - Word 2010 VBA 将文档标记为未编辑

> ID：11846453
> 
> 赞同：1
> 
> 时间：2012-08-07T12:51:41.243
> 
> 标签：vba, ms-word

我有一个 Word 2010 宏，可以在打开文档时更新文档中的字段 - LASTSAVEDBY、FILENAME 和 DATESAVED。这是 Microsoft 在其知识库文章中推荐的宏[在 Word 中打开文档时，文件名字段不会自动更新](http://support.microsoft.com/?kbid=832897)

这很好用，但是当文档打开然后关闭时，它总是提示保存更改，无论是否进行了更改。

是否有任何代码可以添加到宏中，立即将文档标记为未编辑，以便仅在进行进一步编辑时出现保存提示？

否则，每次有人阅读文档时，他们最终可能会将其与他们的详细信息一起保存，而不是最后一次编辑它的人。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-07T13:30:58.400

使用 Document.Saved 属性。例如在 VBA 中：ActiveDocument.saved = true

# php - 包含文件的根路径

> ID：11846458
> 
> 赞同：-1
> 
> 时间：2012-08-07T12:51:59.483
> 
> 标签：php, file, path, include, root

我怎样才能得到“包含文件的根路径”？

```
d:\projects\project1\incs\inc.php : 
```

在这个文件下面的行给了我`"d:\projects\project1\incs"`

```
<?php echo __DIR_; ?> 
```

我想得到`"/projects/project1"`

我用那个

```
str_replace("\\","/", str_replace(dirname(dirname(dirname(dirname(__DIR__)))), '', __DIR__)) 
```

但它是如此复杂......

我想使用：

```
<img src="<?php echo ROOT_DIR ?>/images/image.jpg" /> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T12:53:48.693

如果你在谈论 web-root，你可以使用：

```
$_SERVER['DOCUMENT_ROOT'] 
```

**编辑：**我刚刚注意到您的编辑，并且`$_SERVER['DOCUMENT_ROOT']`是您网站相对于文件系统的根目录。它不是您要在 html 中使用的值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T12:54:23.410

您可能正在寻找[`pathinfo()`](http://php.net/manual/en/function.pathinfo.php)，但如果您希望能够在页面上显示图像，则需要使用 URL 而不是文件路径。在这种情况下，您需要使用`"http://" . $_SERVER['SERVER_NAME']`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-07T12:56:45.670

您可以使用

```
<img src="<?php echo $_SERVER['DOCUMENT_ROOT'];?>/images/image.jpg" /> 
```

# asp.net - Listview 中的 ItemTemplate - 布局问题

> ID：11846459
> 
> 赞同：0
> 
> 时间：2012-08-07T12:52:02.627
> 
> 标签：asp.net, css, itemtemplate

我的 aspx 页面中有以下 Listview

```
<asp:ListView ID="ListView1" GroupItemCount="4" runat="server" 
     DataKeyNames="contentid" DataSourceID="sqldsPhotos">
<LayoutTemplate>
    <asp:Placeholder
    id="groupPlaceholder"
    runat="server" />
</LayoutTemplate>
<GroupTemplate>
    <div>
    <asp:Placeholder
    id="itemPlaceholder"
    runat="server" />
    </div>
</GroupTemplate>
<ItemTemplate>

    <asp:Image id="picAlbum" runat="server" 
         ImageUrl='<%# "ShowImage.ashx?id=" + Convert.ToString(Eval("contentid")) %>'   
         Height="108" Width="192" />
    <asp:LinkButton ID="LinkButton1" runat="server">LinkButton</asp:LinkButton>
    </ItemTemplate>
<EmptyItemTemplate>           

</EmptyItemTemplate>
</asp:ListView> 
```

生成的网页显示我的图像，旁边有链接按钮。我想要的是每个项目下方居中的链接按钮的图像。

有人可以用必要的 html 或 css 帮助我实现这一目标。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T12:59:52.003

在里面试试下面的html`ItemTemplate`

```
<div style="float: left; margin-left: 10px; text-align:center;width: 192; ">
    <asp:Image id="picAlbum" runat="server" 
         ImageUrl='<%# "ShowImage.ashx?id=" + Convert.ToString(Eval("contentid")) %>'   
         Height="108" Width="192" />
    <asp:LinkButton ID="LinkButton1" runat="server"
         style="display: block; clear: both;">LinkButton</asp:LinkButton>
</div> 
```

上面的代码将并排显示 div。因此，为了在列表视图中显示 4 个 div 添加 (800px) 到您的项目。

如果您没有在中心获得链接按钮，请添加一些`margin-left`以将其显示在中心。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T13:03:38.143

尝试这个：

```
<div style="width: 192px; text-align:center;">
    <asp:Image id="picAlbum" runat="server" 
         ImageUrl='<%# "ShowImage.ashx?id=" + Convert.ToString(Eval("contentid")) %>'   
         Height="108" Width="192" /><br/>
    <asp:LinkButton ID="LinkButton1" runat="server">LinkButton</asp:LinkButton>
</div> 
```

# android - 应用重启期间的 ANR

> ID：11846463
> 
> 赞同：0
> 
> 时间：2012-08-07T12:52:11.130
> 
> 标签：android

前提：

安卓 4.0.3。

重现步骤：

打开应用程序，按返回键。

错误被复制一次。

这个错误是android错误还是我的应用程序。漏洞？

```
 "InputDispatcher" prio=10 tid=31 TIMED_WAIT
  | group="main" sCount=1 dsCount=0 obj=0x4165e6c0 self=0x23cfa8
  | sysTid=1916 nice=-8 sched=0/0 cgrp=[no-cpu-subsys] handle=2017576
  | schedstat=( 22339660675 10841338980 166402 ) utm=1041 stm=1192 core=1
  at java.lang.Object.wait(Native Method)
  - waiting on <0x41f3e5d8> (a com.android.server.am.ActivityManagerService$4)
  at java.lang.Object.wait(Object.java:401)
  at com.android.server.am.ActivityManagerService.dumpStackTraces(ActivityManagerService.java:2980)
  at com.android.server.am.ActivityManagerService.dumpStackTraces(ActivityManagerService.java:2958)
  at com.android.server.am.ActivityManagerService.appNotResponding(ActivityManagerService.java:3195)
  at com.android.server.am.ActivityRecord.keyDispatchingTimedOut(ActivityRecord.java:757)
  at com.android.server.am.ActivityRecord$Token.keyDispatchingTimedOut(ActivityRecord.java:243)
  at com.android.server.wm.InputMonitor.notifyANR(InputMonitor.java:108)
  at com.android.server.wm.InputManager$Callbacks.notifyANR(InputManager.java:608)
  at dalvik.system.NativeStart.run(Native Method) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T13:12:29.093

不要检查 InputDispatcher 线程，检查你的应用程序的主线程的堆栈。这就是知道实际 ANR 原因的地方。– nandeesh 2 分钟前

这是一个正确的解决方案

# php - 我的 Facebook 应用程序如何向我发送收件箱或电子邮件？

> ID：11846464
> 
> 赞同：-1
> 
> 时间：2012-08-07T12:52:16.980
> 
> 标签：php, javascript, facebook, heroku

我正在使用 heroku、php 和 javascript，我是一个完整的新手。

我有一个 Facebook 应用程序，它会询问用户的姓名、生日和电子邮件地址。我希望通过电子邮件或收件箱将此信息发送给我，或者更好地在我的 xxxbirthdays 日历上创建一个活动？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T12:59:30.630

Facebook 无法为您发送电子邮件。您必须在服务器端代码中实现发送电子邮件。最容易使用内置的[php`mail()`函数](http://php.net/manual/en/function.mail.php)。

朋友的生日已经出现在您的日历上，但这里是创建活动的文档 -

*   代表用户 - [https://developers.facebook.com/docs/reference/api/user/#events](https://developers.facebook.com/docs/reference/api/user/#events)
*   代表页面 - [https://developers.facebook.com/docs/reference/api/page/#events](https://developers.facebook.com/docs/reference/api/page/#events)

# javascript - 将带有 nsIDOMGlobalPropertyInitializer 的对象注入特定页面

> ID：11846466
> 
> 赞同：0
> 
> 时间：2012-08-07T12:52:23.193
> 
> 标签：javascript, firefox-addon, xpcom

我需要使用 nsIDOMGlobalPropertyInitializer在**具有特定 URL**的页面上注入一个名为“smth”的对象。有什么方法可以实现吗？如果 window.smth 在其他页面上返回 undefined 就可以了。

```
// currently
init: function(aWindow) {
    let self = this;
    let window = XPCNativeWrapper.unwrap(aWindow);

    if (window.location.href !== pageURL) {
        return;
    }

    return {
            // ...
    }
} 
```

现在 window.smth 在其他页面上返回 XPCOM 包装的 nsISupports 对象:(

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T03:46:55.150

我不知道如果使用这种方法怎么可能，但您至少可以收听“content-document-global-created”通知：[https ://developer.mozilla.org/en-US/ docs/Observer_Notifications#Documents](https://developer.mozilla.org/en-US/docs/Observer_Notifications#Documents)并且只注入全局

```
observe: function(subject, topic, data) {
    if (topic === 'content-document-global-created' && 
        subject instanceof Ci.nsIDOMWindow) {
        if (!subject.location.href.match(/http:\/\/example.com/)) {return;}
        XPCNativeWrapper.unwrap(subject).myGlobal = {};
    }
} 
```

# iphone - iphone中的嵌套滚动视图

> ID：11846476
> 
> 赞同：0
> 
> 时间：2012-08-07T12:52:53.640
> 
> 标签：iphone, objective-c, xcode, ipad, ios5

我是 iphone 开发新手。谁能告诉我如何在水平滚动视图中添加垂直滚动视图。我浏览了许多样本，但无法清楚地了解它。我希望我的视图可以在垂直和水平方向上滚动。任何帮助表示赞赏。

这是我的滚动代码：

编辑：这是我的滚动代码

```
 self.firstScroll.pagingEnabled=YES;

 self.firstScroll.clipsToBounds=YES;

   int numberOfViews=3;

 for(int i=0;i<numberOfViews;i++){

    CGFloat xOrigin=self.view.frame.size.width*i;

    UIView *awesomeView=[[UIView alloc] initWithFrame:CGRectMake(xOrigin, 0,        self.view.frame.size.width, self.view.frame.size.height)];
    awesomeView.backgroundColor=[UIColor colorWithRed:0.5/i green:0.5 blue:0.5 alpha:1];
    [self.firstScroll addSubview:awesomeView];
 }
self.firstScroll.contentSize=CGSizeMake(self.view.frame.size.width*numberOfViews,     self.view.frame.size.height);
[self.view addSubview:firstScroll];

self.nextVerticalScroll.pagingEnabled=YES;
for(int i=0;i<numberOfViews ;i++){
    CGFloat yOrigin=self.view.frame.size.height * i;
    UIView *verticalView=[[UIView alloc]initWithFrame:CGRectMake(0, yOrigin, self.view.frame.size.width, self.view.frame.size.height)];
  verticalView.backgroundColor=[UIColor colorWithRed:0.5/i green:0.5 blue:0.5 alpha:1];
    [self.nextVerticalScroll addSubview:verticalView];
}
self.nextVerticalScroll.contentSize=CGSizeMake(self.view.frame.size.width, self.view.frame.size.height*numberOfViews);
[self.view addSubview:nextVerticalScroll]; 
```

谢谢，

拉吉

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T15:14:05.163

您可能不希望在滚动视图中有滚动视图，因为您无法控制哪个获得水平手势和哪个获得垂直手势（至少没有很多麻烦）。拥有一个`contentSize`水平和垂直方向比`bounds`滚动视图本身更大的滚动视图要容易得多，例如：

```
- (void)configureScrollView
{
    NSInteger rows = 4;
    NSInteger cols = 5;

    CGFloat width = self.scrollView.bounds.size.width;
    CGFloat height = self.scrollView.bounds.size.height;

    // configure my scroll view itself

    self.scrollView.contentSize = CGSizeMake(width * cols, height * rows);
    self.scrollView.pagingEnabled = YES;
    self.scrollView.backgroundColor = [UIColor darkGrayColor];

    // now let's add the labels to the scrollview

    for (NSInteger row = 0; row < rows; row++)
    {
        for (NSInteger col = 0; col < cols; col++)
        {
            // making my label just a little smaller than the scrollview's bounds so I can easily see the scrolling/paging

            CGRect frame = CGRectMake((width * col) + 20.0, (height * row) + 20.0, width - 40.0, height - 40.0); 

            // create and configure the label

            UILabel *label = [[UILabel alloc] initWithFrame:frame];
            label.text = [NSString stringWithFormat:@"%1.0f", row * cols + col + 1.0];
            label.textAlignment = UITextAlignmentCenter;
            label.backgroundColor = [UIColor lightGrayColor];

            // add it to my scrollview

            [self.scrollView addSubview:label];
        }
    }
} 
```

我只是用 20 个不同的文本标签填充我的滚动视图（并且滚动视图的背景与标签的颜色不同，因此我可以看到它们），但它展示了基本思想。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-31T12:09:27.230

如果您在 XIB 中添加了分页，请删除它...我认为它会对您有所帮助。

# eclipse-plugin - 无法访问依赖插件的包范围字段

> ID：11846480
> 
> 赞同：1
> 
> 时间：2012-08-07T12:53:08.183
> 
> 标签：eclipse-plugin, eclipse-rcp

我有一个插件 A，它导出包 foo.bar。在包 foo.bar 中有一个抽象类 FooBar 具有默认范围成员。在插件 BI 中，喜欢在同一个包中扩展 FooBar 并访问默认范围字段。

插件 A 清单：

```
.
Bundle-SymbolicName: A    
Export-Package: foo.bar
. 
```

插件 B 清单：

```
.
Bundle-SymbolicName: B    
Require-Bundle: A
. 
```

插件 A 中的类 FooBar：

```
package foo.bar;

public abstract class FooBar{
  int min = -1;
} 
```

插件 B 中的 MyFooBar 类：

```
package foo.bar;

public class MyFooBar extends FooBar{
  public void setMin(int min){
   this.min = min;
  }
} 
```

结果：
..引起：java.lang.IllegalAccessError：试图从类 foo.bar.MyFooBar 访问字段 foo.bar.FooBar.min

在普通的 java 环境中，如果我在同一个包中定义我的类，我可以访问包范围的成员。显然这在 OSGI 环境中不是这样，是吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T13:22:19.630

你是对的，OSGI 插件与 java 包不同。如果您真的想`min`在两个插件中共享相同的值，最好的选择是通过扩展点共享它。扩展点是在插件之间共享数据和代码的 OSGI 方式。这导致了一种不会导致插件之间紧密耦合的解决方案。

如果插件 B 真的必须访问`min`插件 A 中的值，这可能表明这两个类应该在同一个插件中。

也看到[这个问题](https://stackoverflow.com/questions/2457117/global-variables-in-eclipse-rcp)

更多关于扩展点的信息可以在[这里找到](http://www.vogella.com/articles/EclipseExtensionPoint/article.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T13:28:12.297

Eclipse 插件/OSGi 包都有自己独立的类加载器（因此也有命名空间）。包私有意味着相同的包和类加载器。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-08T10:18:58.070

尝试使捆绑 B 成为 A 的片段（如果可能的话）。比 B 可以访问*包私有*类，因为有相同的包名和类加载器。

阅读下面的文章[拆分包——一个 OSGi 的噩梦](http://nirmalsasidharan.wordpress.com/2010/09/02/split-packages-an-osgi-nightmare/)——它清楚地解释了这个问题。

# javascript - 每个对象？

> ID：11846484
> 
> 赞同：127
> 
> 时间：2012-08-07T12:53:18.960
> 
> 标签：javascript, jquery

我在 JavaScript 中有对象：

```
var object = someobject;

Object { aaa=true, bbb=true, ccc=true } 
```

我该如何使用每个？

```
 object.each(function(index, value)) {
      console.log(value);
 } 
```

不工作。

* * *

## 回答 #1

> 赞同：319
> 
> 时间：2012-08-07T12:56:18.677

javascript 对象没有标准的 .each 函数。jQuery 提供了一个函数。请参阅[http://api.jquery.com/jQuery.each/](http://api.jquery.com/jQuery.each/)下面应该工作

```
$.each(object, function(index, value) {
    console.log(value);
}); 
```

另一种选择是使用 vanilla Javascript，使用`Object.keys()`和 Array`.map()`函数，如下所示

```
Object.keys(object).map(function(objectKey, index) {
    var value = object[objectKey];
    console.log(value);
}); 
```

请参阅[https://developer.mozilla.org/nl/docs/Web/JavaScript/Reference/Global_Objects/Object/keys](https://developer.mozilla.org/nl/docs/Web/JavaScript/Reference/Global_Objects/Object/keys)和[https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects /阵列/地图](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/map)

这些通常比使用普通的 Javascript for 循环要好，除非你真的理解使用普通 for 循环的含义，并了解它的特定特征的用途，比如在属性链上循环。

但通常情况下，for 循环并不比`jQuery`or更好`Object.keys().map()`。我将在下面使用普通的 for 循环讨论两个潜在问题。

* * *

对，所以在其他答案中也指出，一个普通的 Javascript 替代方案是

```
for(var index in object) { 
    var attr = object[index]; 
} 
```

这有两个潜在的问题：

1\. 您想检查您找到的属性是否来自对象本身，而不是来自原型链。这可以用这样的`hasOwnProperty`函数来检查

```
for(var index in object) { 
   if (object.hasOwnProperty(index)) {
       var attr = object[index];
   }
} 
```

有关更多信息，请参阅[https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/hasOwnProperty](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/hasOwnProperty)。

`jQuery.each`和`Object.keys`函数会自动处理这个问题。

2\. 普通 for 循环的另一个潜在问题是作用域和非闭包问题。这有点复杂，但以下面的代码为例。我们有一堆 ID 为 button0、button1、button2 等的按钮，我们想在它们上设置一个 onclick 并执行`console.log`以下操作：

```
<button id='button0'>click</button>
<button id='button1'>click</button>
<button id='button2'>click</button>

var messagesByButtonId = {"button0" : "clicked first!", "button1" : "clicked middle!", "button2" : "clicked last!"];
for(var buttonId in messagesByButtonId ) { 
   if (messagesByButtonId.hasOwnProperty(buttonId)) {
       $('#'+buttonId).click(function() {
           var message = messagesByButtonId[buttonId];
           console.log(message);
       });
   }
} 
```

如果一段时间后，我们单击任何按钮，我们将始终得到“最后一次点击！” 在控制台中，从不“先点击！” 或“点击中间！”。为什么？因为在onclick函数执行的时候，会`messagesByButtonId[buttonId]`使用*那个时刻*`buttonId`的变量来显示。并且由于此时循环已经完成，变量仍将是“button2”（它在最后一次循环迭代期间的值），因此也将是，即“最后一次点击！”。*`buttonId``messagesByButtonId[buttonId]``messagesByButtonId["button2"]`*

 *有关闭包的更多信息，请参阅[https://developer.mozilla.org/en-US/docs/Web/JavaScript/Closures](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Closures)。尤其是该页面的最后一部分，涵盖了我们的示例。

再次，`jQuery.each`自动`Object.keys().map()`为我们解决这个问题，因为它为我们提供了一个`function(index, value)`（有闭包的），所以我们可以安全地使用索引和值，并确保它们具有我们期望的值。

* * *

## 回答 #2

> 赞同：77
> 
> 时间：2012-08-07T12:56:21.250

```
for(var key in object) {
   console.log(object[key]);
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-08-07T12:56:48.803

```
var object = { "a": 1, "b": 2};
$.each(object, function(key, value){
  console.log(key + ": " + object[key]);
});
```

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.0.0/jquery.min.js"></script>
```

```
//output
a: 1
b: 2 
```*

# installation - 将文件从当前文件夹复制到由 Installscript 项目安装的 .exe 文件夹

> ID：11846486
> 
> 赞同：0
> 
> 时间：2012-08-07T12:53:22.270
> 
> 标签：installation, installshield

我正在使用 InstallShield 2011 创建 installscript 项目，现在的问题是我想将一些 ini 文件从文件夹复制到我的 .exe 将安装的路径。

这是场景——

我会给我们的客户一个包含两件事的文件夹

*   安装程序
*   ini 文件夹，其中包含 .ini 文件。

现在我希望在执行 setup.exe 时所有 .ini 文件都将复制到安装程序的安装位置。

我现在正在使用——

```
CopyFile (PACKAGE_LOCATION ^ "ini\\*.ini" , szSDKDirectory ); 
```

但是当我调试**PACKAGE_LOCATION**时包含空字符串。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T02:07:11.357

如果您的媒体类型是 CD-ROM，则可以使用 SRCDIR。

PACKAGE_LOCATION 仅适用于网络图像媒体类型。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-07-31T15:25:18.700

如果您的媒体类型是 EXE，您也可以使用 SETUPEXEDIR

# android - 仅在联想 A750 中无法从相机拍照

> ID：11846489
> 
> 赞同：1
> 
> 时间：2012-08-07T12:53:35.153
> 
> 标签：android, android-intent, camera, android-camera, android-camera-intent

我尝试以这种方式从相机拍照：

```
private void photo() {

        String storageState = Environment.getExternalStorageState();
        if (storageState.equals(Environment.MEDIA_MOUNTED)) {
            Intent intent = new Intent(MediaStore.ACTION_IMAGE_CAPTURE);    
            String directory = Environment.getExternalStorageDirectory()
                    .getName() + File.separatorChar + "app/photo/";    
            mPushFilePath = directory + System.currentTimeMillis() + ".jpg";
            File imageFile = new File(mPushFilePath);
            Uri mImageFileUri = Uri.fromFile(imageFile);
            intent.putExtra(android.provider.MediaStore.EXTRA_OUTPUT,
                    mImageFileUri);    
            startActivityForResult(intent, CAMERA_RESULT);
        }    
    } 
```

`onActivityResult`我从路径中的方法中拍照`mPushFilePath` 在所有设备中，这段代码都能完美运行。但是在**Lenovo A750**中，当我尝试获取图片时，按钮**v**（或**ok**）不起作用。请帮我解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T13:09:25.000

我是这样解决的：当需要调用摄像头的时候，如果设备联想，我调用自己制作的自定义摄像头。如果没有，一切都和以前一样。

# gps - 近似和内插 GPS 轨迹

> ID：11846491
> 
> 赞同：4
> 
> 时间：2012-08-07T12:53:36.597
> 
> 标签：gps, interpolation, approximation, kalman-filter

我有一系列 gps 值，每个值都包含：`timestamp, latitude, longitude, n_sats, gps_speed, gps_direction, ...`（[NMEA 数据](http://www.gpsinformation.org/dale/nmea.htm)的某个子集）。我不确定方向和速度值的质量。此外，我不能指望序列在时间戳上是均匀分布的。我想在均匀的时间步长上获得平滑的轨迹。

我读过卡尔曼滤波器是此类任务的首选工具。真的是这样吗？

我找到了一些用于 Python 的卡尔曼滤波器的实现：

*   [http://www.scipy.org/Cookbook/KalmanFiltering](http://www.scipy.org/Cookbook/KalmanFiltering)
*   [http://ascratchpad.blogspot.de/2010/03/kalman-filter-in-python.html](http://ascratchpad.blogspot.de/2010/03/kalman-filter-in-python.html)

然而，这些似乎假设有规则间隔的数据，即*迭代*。整合对不规则间隔观测的支持需要什么？

我能想象的一件事是重复/调整预测步骤以适应基于时间的模型。你能为这个应用推荐这样的模型吗？是否需要考虑 NMEA 速度值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-02-15T16:11:35.610

您还可以尝试运动学插值，看看结果是否符合您的预期。

这是其中一种算法的 Python 实现：[https ://gist.github.com/talespaiva/128980e3608f9bc5083b](https://gist.github.com/talespaiva/128980e3608f9bc5083b)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-02-04T14:32:40.320

在寻找有关卡尔曼滤波器的可理解资源后，我强烈推荐这个：[https ://github.com/rlabbe/Kalman-and-Bayesian-Filters-in-Python](https://github.com/rlabbe/Kalman-and-Bayesian-Filters-in-Python)

对于您关于不规则间隔观察的特定问题：请参阅上面参考资料中的第 8 章，以及“非平稳过程”标题下。总而言之，您需要为每次迭代使用不同的状态转换函数并处理噪声协方差。这些是您在每次迭代中唯一需要更改的内容，因为它们是唯一依赖于 delta t 的组件。

# javascript - 如何在使用 JavaScript 创建元素时添加 onclick 事件？

> ID：11846492
> 
> 赞同：1
> 
> 时间：2012-08-07T12:53:40.757
> 
> 标签：javascript, javascript-events

我有一个脚本，我将元素附加到列表中。我需要当我单击元素时调用一个函数，并且对于这个函数，在创建 li 时需要一个变量的值（它是`li`内容）。

我已经检查了像添加这样的解决方案`newLi.onclick = function(){...}`。

这个解决方案的问题是我没有在函数中得到正确的值，我得到了列表中另一个元素的值。

现在这就是我创建元素的方式：

```
var ULlist = document.getElementById('ULid');
for(i=0;i<data.length;i++){
   var Value = data[i] //function to get data
   var newLi = document.createElement('li');
   newLi.appendChild(elements.createTextNode(Value));
   newLi.onclick = function(){alert(Value)} //not displaying the right value
   ULlist.appendChild(newLi);
} 
```

所以问题是，有没有办法创建 te onclick 事件，为元素提供正确的变量值？

编辑：我添加了更多代码。正在创建 Li，并且信息显示正确，唯一的问题是在尝试创建事件时它没有给出正确的值，这应该是在`li`

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-07T13:25:30.530

您可以通过在内部创建函数并将值保持在该函数的范围内来实现这一点。

```
var data = [10, 20, 30, 40, 50, 60, 70];
addItems = function() {
    var list = document.getElementById("list");
    for (var i = 0; i < data.length; i++) {
        var newLi = document.createElement("li");
        newLi.innerHTML = i + 1;
        list.appendChild(newLi);
        (function(value){
        newLi.addEventListener("click", function() {
           alert(value);
        }, false);})(data[i]);
    }

}​ 
```

jsfiddle：http: [//jsfiddle.net/Qf5JZ/1/](http://jsfiddle.net/Qf5JZ/1/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-07T12:56:36.793

使用[DOM2 事件监听器](http://www.w3.org/TR/DOM-Level-2-Events/events.html)，特别是[element.addEventListener](https://developer.mozilla.org/en-US/docs/DOM/element.addEventListener) API：

```
function clickHandlerFor(data) {
    return function(event) {
        var li = event.target;
        // do something with data and li.
    };
}

for (...) {
    var Data = ... //function to get data
    var newLi = elements.createElement('li');
    newLi.appendChild(elements.createTextNode(Data));
    newLi.addEventListener("click", clickHandlerFor(Data), false);
    ULlist.appendChild(newLi);
} 
```

另一种选择要简单得多：在处理程序中使用 TextNode 值：

```
function handler(event) {
    var dataValue = event.target.firstChild.nodeValue; // value of TextNode created by elements.createTextNode(Data)
    // handle dataValue
}

newLi.addEventListener("click", handler, false); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-07T13:06:42.830

当我遇到这个问题时，我是这样解决的：

```
var ULlist = document.getElementById('ULid');
for(var i=0; i<data.length; i++){
   var index = i;
   (function() {
   var Value = data[index] //function to get data
   var newLi = document.createElement('li');
   newLi.appendChild(elements.createTextNode(Value));
   newLi.onclick = function() { ... };
   ULlist.appendChild(newLi);
   }());
} 
```

编辑：今天，我记得关于范围的另一件事。将参数“i”发送到循环内运行是另一种解决方案：

```
var ULlist = document.getElementById('ULid');
for(var i=0; i<data.length; i++){
   (function(index) {
       var Value = data[index] //function to get data
       var newLi = document.createElement('li');
       newLi.appendChild(elements.createTextNode(Value));
       newLi.onclick = function() { ... };
       ULlist.appendChild(newLi);
   }(i));
} 
```

试试这个，让我知道它是否有效。

# java - 将项目tomcat移动到jboss出现错误

> ID：11846494
> 
> 赞同：0
> 
> 时间：2012-08-07T12:53:46.247
> 
> 标签：java, jboss, tomcat7

我正在用 JSF 和 Spring 构建一个项目。我的项目在 tomcat 7 中运行良好。但是当我尝试在 Jboss 上部署我的项目时，出现错误 ::
java.lang.ArrayStoreException: sun.reflect.annotation.TypeNotPresentExceptionProxy

如果我搬到 JBoss，谁能告诉我需要做哪些改变。我正在使用 netbeans IDE。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T13:25:00.467

您可能会发现两个有趣的结果：

*   [https://issues.jboss.org/browse/JBREFLECT-137?focusedCommentId=12542909&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12542909](https://issues.jboss.org/browse/JBREFLECT-137?focusedCommentId=12542909&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12542909)
*   [https://community.jboss.org/message/736634#736634](https://community.jboss.org/message/736634#736634)

所以我相信这是一个部署问题。希望这可以帮助！

# excel - 并排配置错误 - Excel

> ID：11846496
> 
> 赞同：0
> 
> 时间：2012-08-07T12:53:47.637
> 
> 标签：excel, configuration

嗨，

我最近打开了一个 Excel 文件，从那时起，每当我打开 Excel 时，它都会向我抛出一个错误“并排配置”。我尝试了许多在互联网上找到的解决方案，但都没有成功（.Net 框架、注册表、MS Visual C++）。

请帮忙，谢谢，问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T05:21:00.773

我想通了：我将 excel.exe.manifest 文件从另一台计算机复制到我的计算机上，它工作正常！

问候

# c# - C# - 从 DataGridView 更新 MS Access 表时并发访问冲突

> ID：11846503
> 
> 赞同：2
> 
> 时间：2012-08-07T12:54:03.430
> 
> 标签：c#, ms-access, datagridview

我在从 DataGridView 更新 Access 表时遇到了一些问题。令我困惑的是，下面的代码适用于一个表而不是另一个表，但它们都具有完全相同的结构。

# 桌子

我有两个包含多个（相同）字段的表，其中主键是一个名为 "Number" 的字段；此字段是自动增量的，并且在两个表中都没有重复索引。所以我读到缺少主键是并发违规的根源，但这似乎不是这里的问题。

# 编码

这是我的代码的相关部分，汇总在一起：

### 初始化

```
BindingSource BS = new BindingSource();
DbDataAdapter adapter;
DataTable table = new DataTable();
OdbcCommand command = new OdbcCommand(query, odbcConnection);
OdbcDataAdapter adapter = new OdbcDataAdapter(command);
adapter.AcceptChangesDuringUpdate = true; // Attempt to fix the issue
adapter.AcceptChangesDuringFill = true; // same
DbCommandBuilder commandBuilder = new OdbcCommandBuilder(adapter);
dgv.DataSource = BS;
BS.DataSource = table;
adapter.Fill(table); 
```

### 保存更改

```
OdbcCommandBuilder builder = new OdbcCommandBuilder((OdbcDataAdapter)adapter);
adapter.UpdateCommand = builder.GetUpdateCommand(); // Fix attempt
adapter.Update(table); // Where the exception is thrown 
```

考虑到我的问题根据使用的数据库随机发生，我认为它与数据库相关，但它们具有相同的结构，并且两者都没有使用（复制到我的本地驱动器上）所以我真的不知道发生了什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T11:19:42.980

可能存在与其他表定义的关系，这可能会阻止某个字段的更新。

此外，表可能包含用于检查数据有效性的索引或表达式，这会阻止更新表。

你检查过这些可能性吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T07:59:04.237

所以我改变了企业类来使用 OleDb 而不是 Odbc，就像一个魅力！`DataGridView`除了`OdbcCommand`变得`OleDbCommand`和`OdbcDataAdapter`变得之外，关于 的代码保持完全相同`OleDbDataAdapter`。

# html - 如何在 JSF 中获取 HTML 元素的 id？

> ID：11846505
> 
> 赞同：0
> 
> 时间：2012-08-07T12:54:18.150
> 
> 标签：html, jsf

有新闻标题。用户点击这些标题。浏览器转到包含该标题新闻的页面。我想从数据库中获取数据，其中 id 等于被点击的元素 id。元素从数据库中获取 id，所以我不事先不知道身份证。

```
<ui:repeat value="#{controller.sql.yenilikler}" var="list">
  <a href="xeberShekil.xhtml" id="#{list.id}}">
    #{list.basliq}
  </a>
<br/>
</ui:repeat> 
```

所以我应该

1.获取被点击元素的id

2.将此id发送到java类中的一个变量中

3.发送查询，即从数据库中获取数据，其中 id= 元素的 id

```
int id;
ResultSet rs= statement.executeQuery("select * from tableName where id="+id); 
```

如果有其他算法建议请分享。Tnx 很多

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T13:14:25.660

使用 f:param、f:setPropertyActionListner 将值传递给托管 bean，或者使用 commandbutton 的 action="#{bean.someAction(value)}" 直接传递值

有关代码片段，请参阅[JSF-2 操作参数](https://stackoverflow.com/questions/3599948/jsf2-action-parameter)。

编辑为代码

数据表

```
 <h:dataTable value="#{someManagedBean.categories}" var="cat">
                <h:column>
                        <h:commandButton action="#{someManagedBean.edit(cat.id)}"
                </h:column>

        </h:dataTable> 
```

托管豆

```
 public void edit(id) {
                doYourDBThing(id);

        } 
```

您还可以使用 f:param 和 f:setPropertyActionListner。请参阅上面的链接。

# android - 在android中计算蓝牙设备之间的距离

> ID：11846506
> 
> 赞同：21
> 
> 时间：2012-08-07T12:54:21.330
> 
> 标签：android, bluetooth

我想从 android 手机计算蓝牙配对设备的距离。我是 Android 蓝牙概念的新手，任何人都可以建议我在 android sdk 中可能或不可能。如果可能发布任何代码或教程链接！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-07T13:37:32.750

[蓝牙信号强度](http://developer.android.com/reference/android/bluetooth/BluetoothDevice.html#EXTRA_RSSI)距离关系取决于设备（内置蓝牙设备、天线、设备的实际方向）、人们持有设备的当前方式、中间的物体......您可以为一对设备测量这一点给定的情况并使用这些信息。

一个更大、更通用的解决方案将包含一个外部蓝牙网络。[蓝牙三角测量](http://cseweb.ucsd.edu/classes/fa06/cse237a/finalproj/almula.pdf)是基本概念，这将有所帮助。该链接将深入了解通过这种设置可以实现的确定性。以 is 作为上限，设备到设备的方法会更糟。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2018-04-05T13:42:16.137

EE Stack Exchange 网站有一个[更完整的答案](https://electronics.stackexchange.com/a/310370/116328)，其中提到 Apple 使用 802.11v 来确定 Apple Watch 是否接近 MacBook。

> 蓝牙使用无线电，无线电以光速传播。1厘米的往返将花费不到100ps。给这么短的时间计时会很棘手，可能你会想要一个 10GHz 的时钟，尽管还有其他选择。但即便如此，蓝牙也不是为了立即回显无线电信息而设计的。如果您接收、处理并重新发送消息，则处理延迟将比飞行时间长得多，并且会随机变化至少与蓝牙芯片一起使用的时钟周期。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-07T13:13:40.170

你不能。也许，您可以从信号指示器中获得近似值，但由于环境原因，它的主题太多了 - 连接的设备之间是否有东西，一些反射表面等。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-11-07T19:11:44.663

有一种方法可以研究，就是编写响应时间。只需计算以纳秒为单位的蓝牙响应时间，物理测量设备之间的距离并制定树规则......与 GPS 的概念相同。这是一项实验室工作。我有一个项目，我必须开发它，按计划，我将在一个月内完成。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-11-12T23:53:37.190

OFC，有可能。它只需要超精确的应用程序，构建来计算两个对象之间的“ping”——有点像 ekko 定位或激光距离测量——它关于特定信号来回传播的时间。

# makefile - 包括来自 config.m4 的 Makefile

> ID：11846508
> 
> 赞同：1
> 
> 时间：2012-08-07T12:54:27.107
> 
> 标签：makefile, autoconf, php-extension

我正在编写一个 PHP 扩展。`config.m4`生成 Makefile，但我想在此 Makefile 的开头包含另一个 Makefile。（例如：）`"-include Makefile.local"`。

我不想自己做`Makefile`，因为`configure`会重新创建它并在调用时删除我的更改。

我该怎么做`config.m4`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T16:52:30.833

试试这个`config.m4`：

```
AC_CONFIG_COMMANDS_PRE([cat >Makefile.tmp <<EOF
-include MyInclude1
-include MyInclude2
EOF
cat Makefile >> Makefile.tmp
mv -f Makefile.tmp Makefile]) 
```

你`Makefile`现在应该看起来像：

```
-include MyInclude1
-include MyInclude2
srcdir = /path/to/source/dir
... 
```

...运行后`configure`。

# c++ - dll的new和delete运算符重载

> ID：11846511
> 
> 赞同：5
> 
> 时间：2012-08-07T12:54:36.030
> 
> 标签：c++, window, new-operator

如何为. `new`_ 我已经编写了重载运算符作为 dll 的一部分，但是与此链接的客户端不使用`delete``dll``dll``overloaded new and delete`

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-07T14:26:45.470

以下是 C++ 标准在第 17.6.4.6/3 节中对此的说明：

> 使用程序的定义（新 / 删除运算符）而不是实现提供的默认版本。这种替换发生在程序启动之前。程序的定义不应指定为`inline`. 不需要诊断。

如果您仔细阅读，它准确地解释了您遇到的麻烦。这里发生了一种“catch 22”。

一方面，您不能在 DLL 中编译 new/delete 运算符的定义，因为无法动态链接重载的 new/delete（这是因为在加载 DLL 之前，在静态初始化期间可能需要 new/delete，所以在加载 DLL 之前和之后，您将有不一致的 new/delete 运算符，这是未定义的行为）。

另一方面，您不能只将 new/delete 运算符定义放在 DLL 头文件中，因为它们需要被标记`inline`以满足单一定义规则 (ODR)，而后者又不满足上述条款。`inline`可能存在不标记它们的要求，因为标记的函数定义`inline`“没有链接”，导致每个翻译单元使用它自己的编译版本（或作为内联扩展），这通常是可以的，但不适用于动态内存分配。

上述两个问题的动机是，为了正确性，通常需要保证分配的内存使用`new`相应的`delete`运算符释放（即“一起编译”，可以这么说，或两者都默认）。例如，如果您的 new/delete 运算符依赖于底层 malloc/free 调用，那么您依赖于调用 new/delete 运算符的翻译单元使用的堆，在 DLL 和可执行文件之间，不能保证此堆将是相同的（实际上，在 Windows 中，尤其是，这两个模块使用两个单独的堆进行动态内存分配）。

因此，正如 Rook 所说，解决问题的方法是“不要那样做”。不要为 DLL 对象重载 new/delete 运算符，因为没有正确的方法可以正确执行此操作，无论您以何种方式扭曲和转动代码，它总是归结为上述相同的问题。

相反，您可以并且应该做的是为您的 DLL 对象使用工厂函数模式，并返回一个带有自定义删除器的智能指针（例如 a `std::shared_ptr`），该删除器依赖于将删除动态分派回创建对象的站点. 这是受到[乍得奥斯汀](http://chadaustin.me/cppinterface.html)技术的启发。[我在这里](https://github.com/mikael-s-persson/ReaK/blob/master/src/ReaK/core/base/shared_object_base.hpp)做了非常相似的事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-10-23T13:36:20.803

您可以尝试编写自己的 malloc 和 delete 函数，然后创建一个 C 定义，该定义基本上包含重写 new 和 delete 并调用这些自定义 malloc 和 delete 函数的代码。

这样你就可以做一些事情，比如

```
MODULE_START()
// CODE HERE

MODULE_END() 
```

这应该工作顺利。

# jquery - Jquery：选择器和隐藏

> ID：11846516
> 
> 赞同：0
> 
> 时间：2012-08-07T12:54:41.063
> 
> 标签：jquery, css-selectors, children

我有一些输入，我想用从文本中获得的值填充它们。这是我的代码：

```
$( "#dialog-test fieldset" ).hide();
$( "#dialog-test fieldset:eq("+j+")" ).show();
$(this).children(".testValue").each(function(k,item) {
    $( "#dialog-test fielset:visible input").eq(k).val($(this).text());
});
$( "#dialog-test" ).dialog( "open" ); 
```

这不起作用，因为 #dialog-test 被隐藏，因此 :visible 不返回任何内容。这有效，但只有在我完成更改所有值后我才能打开我的对话框：

```
$( "#dialog-test fieldset" ).hide();
$( "#dialog-test fieldset:eq("+j+")" ).show();
$( ".ui-dialog:eq(2) .ui-button-text:first" ).text("Modifier le test");
$( "#dialog-test" ).dialog( "open" );
$(this).children(".testValue").each(function(k,item) {
    $( "#dialog-test fieldset:visible input").eq(k).val($(this).text());
}); 
```

我会使用第一个解决方案，但无法设法找到流程以便 :visible 工作。

非常感谢你的帮助，蒂姆

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T12:59:38.027

这里：

```
var $inputs = $( 'fieldset', '#dialog-test' ).hide().eq( j ).show().find( 'input' );

$( this ).children( '.testValue' ).each(function ( i, val ) {
    $inputs.eq( i ).val( $( this ).text() );
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T13:01:58.050

您可以尝试使用 eq 过滤器通过索引来选择相应的输入：

```
$(this).children(".testValue").each(function(k,item) {
    alert($(this).text());
    $( "#dialog-test input:visible").eq(k).val($(this).text());
}); 
```

问候

艾蒂安

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-07T13:08:55.160

试试这个。

```
var visible_inputs = $('#dialog-test input:visible');
var i =0;
$(this).children('.testValue').each(function(){
    $((visible_inputs)[i++]).val($(this).text());
}); 
```

# android - Android如何保持和取消保持活动电话

> ID：11846518
> 
> 赞同：1
> 
> 时间：2012-08-07T12:54:54.157
> 
> 标签：android, phone-call, telephonymanager

任何人都可以让我知道如何保持和取消保持活动电话吗？我正在尝试使用`ITelephony.aidl`但无法保持通话。这是我试图保持活动通话的代码

```
TelephonyManager tm = (TelephonyManager) CallholdddActivity.this.getSystemService(Context.TELEPHONY_SERVICE);

                try{
                Class<?> c = Class.forName(tm.getClass().getName());
                Method m = c.getDeclaredMethod("getITelephony");
                m.setAccessible(true);
                com.android.internal.telephony.ITelephony telephonyService = (ITelephony) m.invoke(tm);
                telephonyService = (ITelephony) m.invoke(tm);
                //telephonyService.silenceRinger();
                // here what should i write , i dont know 
                //System.out.println(a);
                }
                catch (Exception e) {
                    // TODO: handle exception
                }
            } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-01T10:04:49.957

使用 ITelephony.aidl 获得持有选项是完全不可能的，因为没有这样的方法。最好使用任何使用音频管理器的方法来查找呼叫是否处于活动状态。但缺点是音频管理器也可以被其他应用程序使用。所以，要知道Mode就会进退两难了！！

# iphone - 解雇孩子后，父 UIViewController 的方向不应该改变

> ID：11846524
> 
> 赞同：3
> 
> 时间：2012-08-07T12:55:20.693
> 
> 标签：iphone, xcode, ios5, presentmodalviewcontroller

假设我有三个 UI 控制器（A、B、C）。

A 是我的根控制器，在 ShouldAutoRotate 方法中我返回 YES。我从A到B（B =>在我返回Portrait的ShouldAutoRotate方法中）做presentModalView，然后从BI做presentModal到C（C应该能够旋转到任何方向）。

现在在 C 内部我可以将模拟器旋转到任何方向，并且整个 View 可以完美旋转。问题是，当 C 是 Landscape 并且我将其关闭时，B 内部的所有对象都会变得混乱！！同样的事情也发生在 A 身上。

我只需要在 C 上进行轮换！！

感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-02-27T18:47:15.513

在应用程序委托

```
@interface AppDelegate : UIResponder <UIApplicationDelegate>
@property (nonatomic) BOOL shouldRotate;
@end

- (NSUInteger)application:(UIApplication *)application supportedInterfaceOrientationsForWindow:(UIWindow *)window{
    if (self.shouldRotate == YES) {
        return UIInterfaceOrientationMaskLandscapeLeft | UIInterfaceOrientationMaskLandscapeRight | UIInterfaceOrientationMaskPortrait;
    }
    return UIInterfaceOrientationMaskPortrait;
} 
```

在 viewController A,B

```
- (void)viewWillAppear:(BOOL)animated{
    [super viewWillAppear:animated];
    ((AppDelegate *)[[UIApplication sharedApplication] delegate]).shouldRotate = NO;
    [self supportedInterfaceOrientations];

    [self shouldAutorotate:UIInterfaceOrientationPortrait];

    [[UIApplication sharedApplication] setStatusBarOrientation:UIInterfaceOrientationPortrait animated:NO];
}

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation {
    // Return YES for supported orientations
    return (interfaceOrientation == UIInterfaceOrientationPortrait);
}

- (BOOL)shouldAutorotate:(UIInterfaceOrientation)interfaceOrientation{
    // Return YES for supported orientations
    return (interfaceOrientation == UIInterfaceOrientationPortrait);
}

-(NSUInteger)supportedInterfaceOrientations{
    return UIInterfaceOrientationMaskPortrait;
} 
```

在视图控制器 C

```
- (void)viewWillAppear:(BOOL)animated{
    [super viewWillAppear:animated];
    ((AppDelegate *)[[UIApplication sharedApplication] delegate]).shouldRotate = YES;

}

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation {
    return YES;
}

- (BOOL)shouldAutorotate:(UIInterfaceOrientation)interfaceOrientation{
    return YES;

}

-(NSUInteger)supportedInterfaceOrientations{
    return UIInterfaceOrientationMaskPortrait|UIInterfaceOrientationMaskLandscapeLeft | UIInterfaceOrientationMaskLandscapeRight;
}

- (IBAction)closeVC:(id)sender {
    NSNumber *value = [NSNumber numberWithInt:UIInterfaceOrientationPortrait];
    [[UIDevice currentDevice] setValue:value forKey:@"orientation"];
    AppDelegate *appDelegate = (AppDelegate *)[[UIApplication sharedApplication] delegate];
    appDelegate.shouldRotate = NO;

    [self supportedInterfaceOrientations];

    [self shouldAutorotate:UIInterfaceOrientationPortrait];

    [self dismissViewControllerAnimated:YES completion:nil];
} 
```

希望这能解决你的问题

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-03T05:48:17.970

您需要允许项目信息中的所有方向

![在此处输入图像描述](../Images/e72e25f4da7e45f277ece17accf5f6c1.png)

然后在每个视图控制器中覆盖实现所有这些方法以针对 iOS 6 + 启用和禁用方向。

```
supportedInterfaceOrientations

shouldAutorotate

shouldAutorotateToInterfaceOrientation 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-03-03T06:36:55.330

在您关闭它之前强制将 C 旋转到纵向

```
[[UIApplication sharedApplication] setStatusBarOrientation:UIInterfaceOrientationPortrait animated:NO]; 
```

# icefaces - 如何在同一页面中使用多个 ace:fileEntry 标签？

> ID：11846526
> 
> 赞同：-1
> 
> 时间：2012-08-07T12:55:30.927
> 
> 标签：icefaces, icefaces-3

我有一个页面应该包含两个`ace:fileEntry`标签：一个用于上传音频文件，另一个用于上传图像文件。该页面还应该有一个保存按钮。单击保存按钮时，我想检查是否同时选择了要上传的音频文件和图像文件。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-11T01:39:15.130

[http://jforum.icesoft.org/JForum/posts/list/21126.page](http://jforum.icesoft.org/JForum/posts/list/21126.page)

这是 ICEfaces 论坛上回答这个问题的地方。

# c# - 将正则表达式结果传递给函数

> ID：11846528
> 
> 赞同：1
> 
> 时间：2012-08-07T12:55:37.010
> 
> 标签：c#

我试图在运行时根据一组大括号中的内容替换字符串中的值。

```
// this.LinkUrl = "/accounts/{accountId}"
this.LinkUrl = Regex.Replace(account.Company.LinkUrl, @"\{(.*?)\}", "$1");
// this.LinkUrl = "/accounts/accountId" 
```

到目前为止，它按预期工作并移除了大括号。但是我怎样才能将 $1 值传递给函数，就像这样

```
this.LinkUrl = Regex.Replace(account.Company.LinkUrl, @"\{(.*?)\}", this.GetValueForFieldNamed("$1")); 
```

那么“accountid”被函数返回的值替换了吗？例如“/accounts/56”

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-07T13:14:09.250

您可以将委托传递给`Regex.Replace`接受 a`Match`并返回字符串的方法，例如定义替换函数：

```
string GetValueForFieldNamed(Match m){
    string res = m.Groups[1].Value;
    //do stuff with res
    return res;
} 
```

然后这样称呼它：

```
LinkUrl = Regex.Replace(account.Company.LinkUrl, @"\{(.*?)\}", GetValueForFieldNamed); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-07T13:13:36.853

您的模式中的正`1st`则表达式组将是`ID`您想要的，因此您希望首先将其存储在一个变量中，然后使用您的`GetValueForFieldNamed()`函数并将其替换`id`为返回值：

```
var match = Regex.Match(account.Company.LinkUrl, @"\{(.*?)\}");
if (match.Success) {
    string id = match.Groups[1].Value;
    this.LinkUrl = Regex.Replace(account.Company.LinkUrl, String.Format(@"\{({0})\}", id), this.GetValueForFieldNamed(id));
} 
```

# ms-office - 传输规则 - 签名修改

> ID：11846531
> 
> 赞同：0
> 
> 时间：2012-08-07T12:55:43.097
> 
> 标签：ms-office, exchange-server, signature, office365

我试图在我的公司标准化签名。

```
<html xmlns="http://www.w3.org/1999/xhtml"  >
<head>
<style type="text/css">
h1 {font-size: 14pt; font-family: "Segoe UI", Arial,sans-serif; color:#F79646;margin-bottom:0;font-weight:normal;}
h2 {font-size: 11pt; font-family: "Segoe UI", Arial,sans-serif;margin-bottom:1em;margin-top:0;font-weight:normal;}
.email {font-size: 10pt; font-family: "Segoe UI", Arial, sans-serif; color:blue;text-decoration:underline;}
p {font-size: 10pt; font-family: "Segoe UI", Arial, sans-serif; margin-bottom:0;margin-top:0;}
.nazwafirmy {font-size:12pt; font-family: 'Segoe UI', Arial, sans-serif; margin-bottom:0;margin-top:0; color:#F79646;}
a {text-decoration:underline; color:blue;}
.danefirmy {color:#A6A6A6;}
.danefirmy b {color:gray; font-weight:normal;}
.infoprawne {font-size:8pt; color:#A6A6A6;}
</style>
</head>
<body>
<br /><br />
<p>Pozdrawiam,</p>
<h1>%%displayname%%</h1>
<h2>%%title%%</h2>
<p class="email">%%email%%</p>
<p>%%mobilenumber%%</p><br />
</p>
</body>
 </html> 
```

一切正常，并且在发送消息时添加了信息。但是有一个问题：当我发送第一封电子邮件时，签名是可以的——它在电子邮件的底部。当有人向我发送消息并且我回复时，签名将添加在该消息的底部——而不是在发送给我的消息的上方。

例子：

```
<My answer.>

-----------------------------------------

<Message sent to me.>
<Email Signature>

-----------------------------------------

<My signature answer.> 
```

我尝试使用“Prepend”，但结果如下：

```
<SIGNATURE>
<Message> 
```

是否有任何解决方案来配置传输规则，以便在我回复电子邮件时将签名添加到我回复的消息上方而不是下方？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T19:43:10.847

不，没有办法做到这一点。我会查看第三方应用程序，例如 Exclaimer - [http://www.exclaimer.com/products/signature-manager/default.aspx](http://www.exclaimer.com/products/signature-manager/default.aspx)。

# c# - 使用无效名称访问动态对象？

> ID：11846536
> 
> 赞同：-1
> 
> 时间：2012-08-07T12:56:09.913
> 
> 标签：c#, json, dynamic

使用 JsonFX 我正在将 json 流加载到我的应用程序中。json 使用其中一个对象的 URL，因此，使用默认的动态访问对象的方式不起作用，因为 URL 中的某些字符对于成员名称无效。
[http://opendatacommunities.org/doc/geography/lsoa/E01004700.json](http://opendatacommunities.org/doc/geography/lsoa/E01004700.json)

```
{
   'http://opendatacommunities.org/id/geography/lsoa/E01004700': {
      'http://data.ordnancesurvey.co.uk/ontology/spatialrelations/easting': [
         {
            type: 'literal',
            value: '526252',
            datatype: 'http://www.w3.org/2001/XMLSchema#integer'
         }
      ],
      'http://www.w3.org/2003/01/geo/wgs84_pos#lat': [
         {
            type: 'literal',
            value: '51.51349',
            datatype: 'http://www.w3.org/2001/XMLSchema#decimal'
         }
      ],
      'http://statistics.data.gov.uk/def/administrative-geography/district': [
         {
            type: 'uri',
            value: 'http://statistics.data.gov.uk/id/local-authority-district/00BK'
         }
      ],
      'http://opendatacommunities.org/def/geography#boundaryAsJSON': [
         {
            type: 'uri',
            value: 'http://opendatacommunities.org/lsoa_boundaries/E01004700.json'
         }
      ],
      'http://data.ordnancesurvey.co.uk/ontology/spatialrelations/northing': [
         {
            type: 'literal',
            value: '180964',
            datatype: 'http://www.w3.org/2001/XMLSchema#integer'
         }
      ],
      'http://www.w3.org/2003/01/geo/wgs84_pos#long': [
         {
            type: 'literal',
            value: '-0.18198',
            datatype: 'http://www.w3.org/2001/XMLSchema#decimal'
         }
      ],
      'http://www.w3.org/2004/02/skos/core#notation': [
         {
            type: 'literal',
            value: 'E01004700'
         }
      ],
      'http://www.w3.org/1999/02/22-rdf-syntax-ns#type': [
         {
            type: 'uri',
            value: 'http://opendatacommunities.org/def/geography#LSOA'
         }
      ],
      'http://www.w3.org/2000/01/rdf-schema#label': [
         {
            type: 'literal',
            value: 'Westminster 016E'
         }
      ],
      'http://www.w3.org/2002/07/owl#sameAs': [
         {
            type: 'uri',
            value: 'http://statistics.data.gov.uk/id/statistical-geography/E01004700'
         }
      ]
   }
} 
```

有没有办法可以访问这个对象？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T03:21:42.137

你可以用我的课。或者去 Json.net 。

```
 /// <summary>
/// Class Name：JSONConvert
/// Description：JSON Class as JAVA's
/// Authors：ppgame (The deserialization part is by ppgame. The serialization part is from http://www.mzwu.com/)
/// Email: ppgame.mit@gmail.com
/// Date：2012-08-07
/// </summary>
public static class JSONConvert
{
    #region Global Variables
    private static char[] _charary;
    private static int _aryend;

    #endregion

    #region JSON Deserialization

    /// <summary>
    /// Convert string to JSONObject
    /// </summary>
    /// <param name="text"></param>
    /// <returns></returns>
    private static JSONObject DeserializeSingletonObject(ref int left)
    {
        JSONObject localjson = new JSONObject();
        while (left <= _aryend)
        {
            char c = _charary[left];
            if (c == ' ' || c == '\r' || c == '\n' || c == '\t')  //skip empty char
            {
                left++;
                continue;
            }
            if (c == ',')
            {
                left++;
                continue;
            }
            char r = '\0';
            if (c == '\"' || c == '\'')     //beginning of key
            {
                left++;
                r = c;
            }
            else if (c == '}')      //end of JSONObject
            {
                left++;
                break;
            }
            int column = left;
            while (!((_charary[column] == r || r == '\0') && _charary[column - 1] != '\\' && _charary[column + 1] == ':')) column++;
            if (r == '\0') column++;
            string key = new string(_charary, left, column - left);         //get the key
            if (r == '\0')
                left = column + 1;
            else
                left = column + 2;
            c = _charary[left];
            while (c == ' ' || c == '\r' || c == '\n' || c == '\t')  //skip empty char
            {
                left++;
                c = _charary[left];
            }
            if (c == '\"' || c == '\'')     //if value is string
            {
                left++;
                int strend = left;
                while (_charary[strend] != c || _charary[strend - 1] == '\\') strend++;
                localjson[key] = new string(_charary, left, strend - left);
                left = strend + 1;
            }
            else if (c == '{') // JSONObject
            {
                left++;
                localjson[key] = DeserializeSingletonObject(ref left);
            }
            else if (c == '[')     //JSONArray
            {
                left++;
                localjson[key] = DeserializeSingletonArray(ref left);
            }
            else
            {
                //other class, such as boolean, int
                //all are converted to string, it can be enriched if in need
                int comma = left;
                char co = _charary[comma];
                while (co != ',' && co != '}')
                {
                    comma++;
                    co = _charary[comma];
                }
                int em = comma - 1;
                co = _charary[em];
                while (co == ' ' || co == '\r' || co == '\n' || co == '\t')
                {
                    em--;
                    co = _charary[em];
                }
                localjson[key] = new string(_charary, left, em - left + 1);
                left = comma;
            }
        }
        return localjson;
    }

    /// <summary>
    /// Convert string to JSONArray
    /// </summary>
    /// <param name="text"></param>
    /// <returns></returns>
    private static JSONArray DeserializeSingletonArray(ref int left)
    {
        JSONArray jsary = new JSONArray();
        while (left <= _aryend)
        {
            char c = _charary[left];
            if (c == ' ' || c == '\r' || c == '\n' || c == '\t')  //skip empty char
            {
                left++;
                continue;
            }
            if (c == ',')
            {
                left++;
                continue;
            }
            if (c == ']')
            {
                left++;
                break;
            }
            if (c == '{') //JSONObject
            {
                left++;
                jsary.Add(DeserializeSingletonObject(ref left));
            }
            else if (c == '[')     //JSONArray
            {
                left++;
                jsary.Add(DeserializeSingletonArray(ref left));
            }
            else if (c == '\"' || c == '\'')            //string
            {
                left++;
                int strend = left;
                while (_charary[strend] != c || _charary[strend - 1] == '\\') strend++;
                jsary.Add(new string(_charary, left, strend - left));
                left = strend + 1;
            }
            else
            {
                //other class, such as boolean, int
                //all are converted to string, it can be enriched if in need
                int comma = left;
                char co = _charary[comma];
                while (co != ',' && co != ']')
                {
                    comma++;
                    co = _charary[comma];
                }
                int em = comma - 1;
                co = _charary[em];
                while (co == ' ' || co == '\r' || co == '\n' || co == '\t')
                {
                    em--;
                    co = _charary[em];
                }
                jsary.Add(new string(_charary, left, em - left + 1));
                left = comma;
            }
        }
        return jsary;
    }

    #endregion

    #region Public Interface

    /// <summary>
    /// Get a JSONObject instance from char[]
    /// </summary>
    /// <param name="text"></param>
    /// <returns></returns>
    public static JSONObject DeserializeCharToObject(char[] input)
    {
        _charary = input;
        _aryend = _charary.Length - 1;
        while (_aryend > 0)
            if (_charary[_aryend] != '}')
                _aryend--;
            else
                break;
        int start = 0;
        while (start < _aryend)
            if (_charary[start] != '{')
                start++;
            else
                break;
        start++;
        if (_aryend < start + 1)
            return null;
        return DeserializeSingletonObject(ref start);
    }

    /// <summary>
    /// Get a JSONObject instance from string
    /// </summary>
    /// <param name="text"></param>
    /// <returns></returns>
    public static JSONObject DeserializeObject(string input)
    {
        return DeserializeCharToObject(input.ToCharArray());     //The first char must be '{'
    }

    /// <summary>
    /// Get a JSONArray instance from char[]
    /// </summary>
    /// <param name="text"></param>
    /// <returns></returns>
    public static JSONArray DeserializeCharsToArray(char[] input)
    {
        _charary = input;
        _aryend = _charary.Length - 1;
        while (_aryend > 0)
            if (_charary[_aryend] != ']')
                _aryend--;
            else
                break;
        int start = 0;
        while (start < _aryend)
            if (_charary[start] != '[')
                start++;
            else
                break;
        start++;
        if (_aryend < start + 1)
            return null;
        return DeserializeSingletonArray(ref start);
    }

    /// <summary>
    /// Get a JSONArray instance from string
    /// </summary>
    /// <param name="text"></param>
    /// <returns></returns>
    public static JSONArray DeserializeArray(string input)
    {
        return DeserializeCharsToArray(input.ToCharArray());
    }
    /// <summary>
    /// Serialize a JSONObject instance
    /// </summary>
    /// <param name="jsonObject"></param>
    /// <returns></returns>
    public static string SerializeObject(JSONObject jsonObject)
    {
        StringBuilder sb = new StringBuilder();
        sb.Append("{");
        foreach (KeyValuePair<string, object> kvp in jsonObject)
        {
            if (kvp.Value is JSONObject)
            {
                sb.Append(string.Format("\"{0}\":{1},", kvp.Key, SerializeObject((JSONObject)kvp.Value)));
            }
            else if (kvp.Value is JSONArray)
            {
                sb.Append(string.Format("\"{0}\":{1},", kvp.Key, SerializeArray((JSONArray)kvp.Value)));
            }
            else if (kvp.Value is string)
            {
                sb.Append(string.Format("\"{0}\":\"{1}\",", kvp.Key, kvp.Value));
            }
            else
            {
                sb.Append(string.Format("\"{0}\":\"{1}\",", kvp.Key, ""));
            }
        }
        if (sb.Length > 1)
            sb.Remove(sb.Length - 1, 1);
        sb.Append("}");
        return sb.ToString();
    }

    /// <summary>
    /// Serialize a JSONArray instance
    /// </summary>
    /// <param name="jsonArray"></param>
    /// <returns></returns>
    public static string SerializeArray(JSONArray jsonArray)
    {
        StringBuilder sb = new StringBuilder();
        sb.Append("[");
        for (int i = 0; i < jsonArray.Count; i++)
        {
            if (jsonArray[i] is JSONObject)
            {
                sb.Append(string.Format("{0},", SerializeObject((JSONObject)jsonArray[i])));
            }
            else if (jsonArray[i] is JSONArray)
            {
                sb.Append(string.Format("{0},", SerializeArray((JSONArray)jsonArray[i])));
            }
            else if (jsonArray[i] is string)
            {
                sb.Append(string.Format("\"{0}\",", jsonArray[i]));
            }
            else
            {
                sb.Append(string.Format("\"{0}\",", ""));
            }

        }
        if (sb.Length > 1)
            sb.Remove(sb.Length - 1, 1);
        sb.Append("]");
        return sb.ToString();
    }
    #endregion
}

/// <summary>
/// Class Name：JSONObject
/// Description：JSON Class
/// Author：dnawo
/// Website：http://www.mzwu.com/
/// Date：2010-01-06
/// Version：1.1.0
/// </summary>
public class JSONObject : Dictionary<string, object>
{
    public void put(string key, string value)
    {
        this[key] = value;
    }

    public void put(string key, int value)
    {
        this[key] = value.ToString();

    }

}

/// <summary>
/// Class Name：JSONArray
/// Description：JSONArray Class
/// Author：dnawo
/// Website：http://www.mzwu.com/
/// Date：2010-01-06
/// Version：1.1.0
/// </summary>
public class JSONArray : List<object>
{ } 
```

# macos - osx山狮上的端口安装颠覆失败

> ID：11846538
> 
> 赞同：0
> 
> 时间：2012-08-07T12:56:15.903
> 
> 标签：macos, macports, osx-mountain-lion

我无法在山狮上使用 MacPorts 安装颠覆。安装 db46 失败，这里是日志：

更新：我还在 macports 开了一张票：[https ://trac.macports.org/ticket/35570](https://trac.macports.org/ticket/35570)

```
:debug:main db46 has no conflicts
:debug:main Executing org.macports.main (db46)
:debug:main changing euid/egid - current euid: 0 - current egid: 0
:debug:main egid changed to: 501
:debug:main euid changed to: 502
:debug:main Skipping completed org.macports.archivefetch (db46)
:debug:main Privilege de-escalation not attempted as not running as root.
:debug:main Skipping completed org.macports.fetch (db46)
:debug:main Privilege de-escalation not attempted as not running as root.
:debug:main Skipping completed org.macports.checksum (db46)
:debug:main Privilege de-escalation not attempted as not running as root.
:debug:main Skipping completed org.macports.extract (db46)
:debug:main Privilege de-escalation not attempted as not running as root.
:debug:main Skipping completed org.macports.patch (db46)
:debug:main Privilege de-escalation not attempted as not running as root.
:debug:main Skipping completed org.macports.configure (db46)
:debug:main Privilege de-escalation not attempted as not running as root.
:debug:build build phase started at Tue Aug  7 14:51:37 CEST 2012
:notice:build --->  Building db46
:debug:build Executing org.macports.build (db46)
:debug:build Environment: CPATH='/opt/local/include' CC_PRINT_OPTIONS_FILE='/opt/local/var/macports/build/_opt_local_var_macports_sources_rsync.macports.org_release_ports_databases_db46/db46/work/.CC_PRINT_OPTIONS' LIBRARY_PATH='/opt/local/lib' CC_PRINT_OPTIONS='YES' MACOSX_DEPLOYMENT_TARGET='10.8'
:debug:build Assembled command: 'cd "/opt/local/var/macports/build/_opt_local_var_macports_sources_rsync.macports.org_release_ports_databases_db46/db46/work/db-4.6.21/build_unix" && /usr/bin/make -j4 -w all'
:debug:build Executing command line:  cd "/opt/local/var/macports/build/_opt_local_var_macports_sources_rsync.macports.org_release_ports_databases_db46/db46/work/db-4.6.21/build_unix" && /usr/bin/make -j4 -w all 
:info:build make: Entering directory `/opt/local/var/macports/build/_opt_local_var_macports_sources_rsync.macports.org_release_ports_databases_db46/db46/work/db-4.6.21/build_unix'
:info:build /bin/sh ./libtool --mode=compile /usr/bin/clang -c -pipe -O2 -arch x86_64  -I../dist/.. -I/opt/local/include ../dist/../db_dump185/db_dump185.c
:info:build /bin/sh ./libtool --mode=link /usr/bin/clang -pipe -O2 -arch x86_64  -o db_upgrade -L/opt/local/lib -arch x86_64 \
:info:build         db_upgrade.lo util_sig.lo libdb-4.6.la -lpthread
:info:build /bin/sh ./libtool --mode=compile /usr/bin/clang -c -I. -I../dist/.. -I/opt/local/include -pipe -O2 -arch x86_64  ../dist/../db_verify/db_verify.c
:info:build  /usr/bin/clang -c -pipe -O2 -arch x86_64 -I../dist/.. -I/opt/local/include ../dist/../db_dump185/db_dump185.c  -fno-common -DPIC -o .libs/db_dump185.o
:info:build  /usr/bin/clang -c -I. -I../dist/.. -I/opt/local/include -pipe -O2 -arch x86_64 ../dist/../db_verify/db_verify.c  -fno-common -DPIC -o .libs/db_verify.o
:info:build ../dist/../db_dump185/db_dump185.c:211:13: warning: implicit declaration of function 'dbopen' is invalid in C99 [-Wimplicit-function-declaration]
:info:build         if ((dbp = dbopen(argv[0], O_RDONLY, 0, DB_BTREE, NULL)) == NULL) {
:info:build                    ^
:info:build ../dist/../db_dump185/db_dump185.c:211:11: warning: incompatible integer to pointer conversion assigning to 'DB *' (aka 'struct __db *') from 'int'; 
:info:build         if ((dbp = dbopen(argv[0], O_RDONLY, 0, DB_BTREE, NULL)) == NULL) {
:info:build                  ^ ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
:info:build ../dist/../db_dump185/db_dump185.c:212:12: warning: incompatible integer to pointer conversion assigning to 'DB *' (aka 'struct __db *') from 'int'; 
:info:build                 if ((dbp =
:info:build                          ^
:info:build ../dist/../db_dump185/db_dump185.c:228:24: error: no member named 'seq' in 'struct __db'
:info:build                 while (!(rval = dbp->seq(dbp, &key, &data, R_NEXT))) {
:info:build                                 ~~~  ^
:info:build ../dist/../db_dump185/db_dump185.c:228:46: error: use of undeclared identifier 'R_NEXT'
:info:build                 while (!(rval = dbp->seq(dbp, &key, &data, R_NEXT))) {
:info:build                                                            ^
:info:build ../dist/../db_dump185/db_dump185.c:233:24: error: no member named 'seq' in 'struct __db'
:info:build                 while (!(rval = dbp->seq(dbp, &key, &data, R_NEXT))) {
:info:build                                 ~~~  ^
:info:build ../dist/../db_dump185/db_dump185.c:233:46: error: use of undeclared identifier 'R_NEXT'
:info:build                 while (!(rval = dbp->seq(dbp, &key, &data, R_NEXT))) {
:info:build                                                            ^
:info:build ../dist/../db_dump185/db_dump185.c:261:18: error: no member named 'internal' in 'struct __db'
:info:build         hash185p = dbp->internal;
:info:build                    ~~~  ^
:info:build ../dist/../db_dump185/db_dump185.c:263:19: error: no member named 'internal' in 'struct __db'
:info:build                 hash186p = dbp->internal;
:info:build                            ~~~  ^
:info:build ../dist/../db_dump185/db_dump185.c:288:13: error: no member named 'internal' in 'struct __db'
:info:build         btp = dbp->internal;
:info:build               ~~~  ^
:info:build 3 warnings and 7 errors generated.
:info:build make: *** [db_dump185.lo] Error 1
:info:build make: *** Waiting for unfinished jobs....
:info:build  /usr/bin/clang -c -I. -I../dist/.. -I/opt/local/include -pipe -O2 -arch x86_64 ../dist/../db_verify/db_verify.c -o db_verify.o >/dev/null 2>&1
:info:build /usr/bin/clang -pipe -O2 -arch x86_64 -o .libs/db_upgrade -arch x86_64 .libs/db_upgrade.o .libs/util_sig.o  -L/opt/local/lib ./.libs/libdb-4.6.dylib -lpthread 
:info:build creating db_upgrade
:info:build /bin/sh ./libtool --mode=execute true db_upgrade
:info:build make: Leaving directory `/opt/local/var/macports/build/_opt_local_var_macports_sources_rsync.macports.org_release_ports_databases_db46/db46/work/db-4.6.21/build_unix'
:info:build Command failed:  cd "/opt/local/var/macports/build/_opt_local_var_macports_sources_rsync.macports.org_release_ports_databases_db46/db46/work/db-4.6.21/build_unix" && /usr/bin/make -j4 -w all 
:info:build Exit code: 2
:error:build org.macports.build for port db46 returned: command execution failed
:debug:build Error code: CHILDSTATUS 4210 2
:debug:build Backtrace: command execution failed
    while executing
"system -nice 0 $fullcmdstring"
    ("eval" body line 1)
    invoked from within
"eval system $notty $nice \$fullcmdstring"
    invoked from within
"command_exec build"
    (procedure "portbuild::build_main" line 8)
    invoked from within
"$procedure $targetname"
:info:build Warning: targets not executed for db46: org.macports.activate org.macports.build org.macports.destroot org.macports.install
:notice:build Please see the log file for port db46 for details:
    /opt/local/var/macports/logs/_opt_local_var_macports_sources_rsync.macports.org_release_ports_databases_db46/db46/main.log
admins-MacBook-Pro:config admin$ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T21:37:59.667

/opt/local/include/ 中有旧版本的 db.h。删除文件后，问题得到解决。

# linux - MongoDB C 驱动程序

> ID：11846541
> 
> 赞同：1
> 
> 时间：2012-08-07T12:56:22.877
> 
> 标签：linux, mongodb, gcc

我成功编译了 MongoDB C 驱动程序并运行了测试脚本，但我无法编译我自己编写的脚本。

以下是命令及其错误输出。

```
$ gcc -Isrc --std=c99 ./src/*.c -I ./src/ tutorial.c -o tutorial -D_POSIX_C_SOURCE=200112L

./src/env_win32.c:27:53: fatal error: ws2tcpip.h: No such file or directory
compilation terminated. 
```

我发现目录`ws2tcpip.h`中没有文件名`/usr/include`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T02:13:34.340

取出`./src/*.c`, 告诉 gcc 编译 /src 目录中的所有 c 程序，其中包括一些仅限 Windows 的程序。

对我有用的是告诉 gcc 包括在`libmongoc.so`构建驱动程序时构建的内容。

以下命令对我有用。我的驱动程序在目录“mongo-c-driver”中。

```
gcc --std=c99 -I mongo-c-driver/src -o tutorial tutorial.c mongo-c-driver/libmongoc.so 
```

在我看来，mongodb C API 文档在这方面有点问题。此外，最新的头文件与教程中显示的源代码不匹配。例如`mongo-insert`在 v0.6 标头中需要 4 个参数，但本教程仅显示 2 个参数。

在研究这个问题并尝试通过自己安装 mongoDB 和 C 驱动程序来重新创建它时，我发现驱动程序的 v0.6 通过添加对函数`write_concern`的第四个参数`mongo_insert`（可以设置为`null`)。目录中提供的`example.c`程序`docs/examples`在 v0.6 中无法编译。此错误记录在 github 中的[c-driver补丁](https://github.com/mongodb/mongo-c-driver)[CDRIVER-157](https://github.com/mongodb/mongo-c-driver/commit/6166e8a12b4350e7ea10b9adcfb399a7c28fdad4)中。

# php - php中的std类

> ID：11846547
> 
> 赞同：-1
> 
> 时间：2012-08-07T12:56:37.277
> 
> 标签：php, arrays, std

我有这个字符串

```
array(8) {
    [2]=> object(stdClass)#871 (2) {
        ["access"]=> int(0)
        ["value"]=> string(4) "Male"
    }
    [3]=> object(stdClass)#872 (2) {
        ["access"]=> int(0)
        ["value"]=> string(2) "21"
    }
    [4]=> object(stdClass)#874 (2) {
        ["access"]=> int(0)
        ["value"]=> string(4) "sdad"
    }
    [10]=> object(stdClass)#861 (2) {
        ["access"]=> int(0)
        ["value"]=> string(0) ""
    }
    [11]=> object(stdClass)#873 (2) {
        ["access"]=> int(0)
        ["value"]=> string(11) "fds"
    }
    [17]=> object(stdClass)#875 (2) {
        ["access"]=> int(0)
        ["value"]=> string(11) "aaa"
    }
    [19]=> object(stdClass)#876 (2) {
        ["access"]=> int(0)
        ["value"]=> string(4) "this!!!"
    } [29]=> object(stdClass)#878 (2) {
        ["access"]=> int(0)
        ["value"]=> string(3) "sda"
    }
} 
```

如何获取值为'this!!!'的字符串？我想将那个地方的价值保存到数据库中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T12:59:44.327

首先，让我们弄清楚一件事。你没有字符串。你有一个对象数组。（在 PHP 中）不可能将对象或数组转换为字符串。

如果您需要数组特定索引处的值，请使用`$array[$index];`.

如果您想要对象的特定属性的值，只需使用`$object->attribute;`，或者如果您想要函数的返回值，请使用`$object->function();`。

**在你的情况下：**

为了论证起见，假设您要保存at 10的`value`属性。那里的值是`object``array index`

```
[10]=> object(stdClass)#861 (2) {
    ["access"]=> int(0)
    ["value"]=> string(0) ""
} 
```

因此，为了访问该`value`对象属性的字符串值，您可以编写：

```
$val = $array[10]->value; 
```

或者，如果您想要所有对象的属性的字符串值`value`，您可以`array`使用`foreach`

```
foreach($array as $obj) {
    $val = $obj->value;
    $access = $obj->access;

    // do something with $val and/or $access
} 
```

# iphone - 如何创建像 Ipod 中的播放列表一样的可编辑列表？

> ID：11846550
> 
> 赞同：1
> 
> 时间：2012-08-07T12:56:47.623
> 
> 标签：iphone, ios, xcode, list, uitableview

在我的 Iphone 应用程序中，这是一个使用 arc 和故事板的多视图应用程序，我想创建一个可编辑的列表，就像 iphone 集成 ipod 中的播放列表一样。当我单击编辑按钮时，项目文本左侧应该有一个小的红色“-”图像，并且导航栏上也应该出现一个“+”按钮，我可以在其中将新项目添加到列表中。

您会看到它应该类似于 ipod 中的播放列表。有没有人知道任何关于那个或其他东西的教程？我用谷歌搜索了 2 个小时，但一无所获-.-

如果你能帮我解决这个问题，我会很高兴

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T16:15:43.687

“+”和“-”符号是`tableViewCell`. 所以要设置它们，你需要设置`accessoryType`. `UITablewViewCell`如果您查看类参考，就会有一个列表，包括按钮。我还要做的是为每个单元格设置一个布尔值，并根据布尔值设置为`accessoryType`“+”或“-”，并且每次用户触摸单元格时值本身都会发生变化。这样，每次触摸单元格时标志都会切换，最后您可以根据其布尔值遍历并保存或丢弃每个单元格中的内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T13:01:49.307

如果您使用的是最新的 Xcode，请尝试制作“Master Detail”应用程序。

这应该为您提供`UITableView`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-07T13:07:21.920

使用`UITableView`, 代表小的 '-' 和 '+' 您可以创建带有预期任务的按钮作为操作。如果您想要特定的红色“-”按钮，那么我认为它们在 ios sdk 中可用。

# iphone - iOS 从 iPhone 获取照片路径为 f://localhost/...filename.jpg

> ID：11846558
> 
> 赞同：1
> 
> 时间：2012-08-07T12:57:14.030
> 
> 标签：iphone, ios, cordova, phonegap-plugins, alassetslibrary

我正在使用 PhoneGap 开发 iPhone。尝试`FileTransfer.upload(filePath, "http...")`从库中获取照片。

过程是这样的：

首先，我从画布（HTML5）中获取一个 imageURL 作为 base64 字符串。然后，将 base64 字符串发送到用 Objective-C 编写的插件。插件将文件写入 iPhone 照片库，然后插件返回 iPhone 上照片的路径。用 Objective-C 编写的 Plugin 使用 Assets Library 返回照片路径。问题是它返回如下路径：

```
assets-library://asset/asset.JPG?id=10000000002&ext=JPG 
```

PhoneGap 不接受该路径作为 FileTransfer.Upload(filePath) 的文件路径。

我需要的是一种将带有 assets-library://... 的返回路径转换为 ​​PhoneGap 可以理解的路径的方法。或者直接从插件返回路径，例如：

```
file://localhost/.../filename.jpg 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T13:58:49.427

您无法获取照片的实际文件 URL。照片库（作为操作系统的其余部分）是沙盒的。您需要做的是获取 ALAsset 对象的表示，然后调用该表示的 getBytesMethod 以获取资产的数据。然后，您可以将该数据传递给电话间隙（希望如此）。

# .net - ASP.NET MVC 4 自定义属性

> ID：11846559
> 
> 赞同：0
> 
> 时间：2012-08-07T12:57:22.693
> 
> 标签：.net, asp.net-mvc

我有一个具有一个属性的模型： public string UserName {get;set;}

在我的数据库中，我有一个需要添加到此属性的属性列表。我根据属性名称（“用户名”）从数据库中获取属性名称和属性值的字典 如何将这些自定义属性添加到属性中？

谢谢，克鲁维

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T13:04:53.260

假设你有一个`Dictionary`这样的

```
Dictionary<string, string> dict = new Dictionary<string, string>();
dict.Add("UserID", "1");
dict.Add("UserName", "Jon");
dict.Add("Age", "58"); 
```

如果你想用 获取字典中 Item 的值`Keyname` `"UserName"`，你可以像这样使用 get it

```
 if (dict.ContainsKey("UserName"))
   {
       string userName=dict["UserName"];
   } 
```

为什么要将数据从数据库加载到 Dictionary ？为什么不直接加载到您的域对象？

# flash - AS 2.0 ExternalInterface.call 不调用 javascript 函数

> ID：11846560
> 
> 赞同：0
> 
> 时间：2012-08-07T12:57:23.730
> 
> 标签：flash, actionscript-2, externalinterface

```
import flash.external.ExternalInterface;

//ExternalInterface.call("alert", "what");
ExternalInterface.call("show_alert"); 
```

代码

```
<script type="text/javascript">
function show_alert() {
 alert('no');   
}
</script>

<div id="flashContent">
        <object classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000" width="550" height="400" id="test" align="middle">
            <param name="movie" value="test.swf" />
            <param name="quality" value="high" />
            <param name="bgcolor" value="#999900" />
            <param name="play" value="true" />
            <param name="loop" value="true" />
            <param name="wmode" value="window" />
            <param name="scale" value="showall" />
            <param name="menu" value="true" />
            <param name="devicefont" value="false" />
            <param name="salign" value="" />
            <param name="allowScriptAccess" value="sameDomain" />
            <!--[if !IE]>-->
            <object type="application/x-shockwave-flash" data="test.swf" width="550" height="400">
                <param name="movie" value="test.swf" />
                <param name="quality" value="high" />
                <param name="bgcolor" value="#999900" />
                <param name="play" value="true" />
                <param name="loop" value="true" />
                <param name="wmode" value="window" />
                <param name="scale" value="showall" />
                <param name="menu" value="true" />
                <param name="devicefont" value="false" />
                <param name="salign" value="" />
                <param name="allowScriptAccess" value="sameDomain" />
            <!--<![endif]-->
                <a href="http://www.adobe.com/go/getflash">
                    <img src="http://www.adobe.com/images/shared/download_buttons/get_flash_player.gif" alt="Get Adobe Flash player" />
                </a>
            <!--[if !IE]>-->
            </object>
            <!--<![endif]-->
        </object>
    </div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T06:50:33.747

如果您使用 AS2 创建文件，请尝试以下操作：_root.getURL("javascript:show_alert();"); 而不是 ExternalInterface.call("show_alert");

如果您使用的是 AS3，那么代码是完美的，无需更改。

由于某些安全功能，Flash Player 无法在本地与 javascript 通信。如果您在实时服务器或本地主机上运行相同的文件，它将起作用。

# sql - 在查询中获取自动增量作为变量在另一个查询中使用

> ID：11846563
> 
> 赞同：2
> 
> 时间：2012-08-07T12:57:38.550
> 
> 标签：sql, oracle, coldfusion

我正在插入两个表。第一个表中有一个新的“项目”。有很多字段，但为简单起见，我只会向您展示我需要的内容。这是我的coldfusion页面：

```
<cfquery>
    INSERT INTO my_item_table (itemid, a bunch of other stuff)
    VALUES (itemid_sequence.nextval, a bunch of other stuff)
</cfquery> 
```

我的问题是我想将该自动递增的 itemid 作为值插入到另一个表中，即文件附件表。相同的冷融合页面：

```
<cfquery>
    INSERT INTO my_attachments_table (attachno, itemid, filename)
    VALUES (attachment_sequence.nextval, **AUTO-INCREMENT VALUE HERE**, '#url.fileName#')
</cfquery> 
```

我知道我可以在 item 表中查询刚刚输入到第一个表中的值，但即使不太可能，用户输入也有可能不是唯一的，这意味着对相同字段的查询可能会返回更多比一排。在这种情况下，我无法获得 itemid。在查询中创建的 itemid 是唯一的唯一标识符。

我的问题是：有没有办法将 auto=increment 设置为查询内部的值，以便我可以在外部使用它？如果没有，你会如何建议我的 itemid？谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-07T13:12:17.937

如果您在 ColdFusion 8/9/10 中执行插入操作，它会在标签的结果属性中返回插入行（或行）的 ID。例如，如果您使用的是 SQL Server，则 result_name.IDENTITYCOL 是对插入行 ID 的引用。如果您使用的是 MySQL，则为 result_name.GENERATED_KEY。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-07T13:03:03.590

您可以首先使用如下查询将下一个序列值检索到变量中：

```
SELECT itemid_sequence.nextval FROM DUAL 
```

（DUAL 是 Oracle 中的虚拟表）。然后，您可以继续在两个 INSERT 查询中使用此变量。

另一种选择：在数据库中创建一个存储过程，它将为您触发两个查询。

# mysql - 将相似的查询结果合并为一行

> ID：11846567
> 
> 赞同：0
> 
> 时间：2012-08-07T12:58:11.520
> 
> 标签：mysql

我有

```
ID username group
1  philip   football
2  george   baseball
3  alice    football
4  ani      football
5  george   football 
```

并试图做到这一点

```
username   group
philip     football
george     baseball, football
alice      football
ani        football 
```

换句话说，我想将 grop idetms 组合成一个字符串，例如“baysboll, football”

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-07T12:58:52.783

你需要这个`GROUP_CONCAT`功能

```
 select username, GROUP_CONCAT(group) FROM table GROUP BY Username 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-07T13:01:42.703

不要忘记`Group`用反引号转义列以避免语法错误。`GROUP`是一个**[保留关键字](http://dev.mysql.com/doc/refman/5.0/en/reserved-words.html)**。

```
SELECT username, GROUP_CONCAT(`group`) 
FROM table
GROUP BY userName 
```

# html - HTML：当位置为绝对时，相对于父元素设置元素大小

> ID：11846569
> 
> 赞同：3
> 
> 时间：2012-08-07T12:58:23.707
> 
> 标签：html, css

有没有办法做到这一点？

如果我这样做：

```
<div id="container" style="width:500px;">
    <div id="content" style="position:absolute;width:100%;">
    </div>
</div> 
```

然后内容 div 将具有浏览器窗口的宽度，而不是父容器 div 的 500px。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-07T13:01:48.613

总是给出**位置：相**对于`parent`它是否`child`有**位置：绝对；**. 给出**位置：相**对于您的`#container`DIV。像这样写：

```
<div id="container" style="width:500px;position:relative">
    <div id="content" style="position:absolute;width:100%;">
    </div>
</div> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-07T13:03:56.577

只需将`position`#container 设置为`relative`. [查看这个 jsFiddle](http://jsfiddle.net/YDrpa/)的演示。

# php - Facebook 页面选项卡 - 应用程序

> ID：11846572
> 
> 赞同：-1
> 
> 时间：2012-08-07T12:58:33.423
> 
> 标签：php, facebook, api, sdk

我创建了一个 Facebook 页面，添加了一个带有应用程序的新选项卡。

现在我想做这些步骤：

1.  查看用户是否喜欢该页面 // 正在运行
2.  请求发布状态的权限 // 不起作用
3.  结束。

这是我使用的代码：

```
$permissions = array (
    'email',
    'user_status',
    'publish_stream',
    'status_update'
);

public function __construct($app_id, $secret, $perm)
{

        $this->facebook = new Facebook(array(
            'appId'  => $app_id,
            'secret' => $secret,
            'cookie' => true
        ));
        $this->perm = $perm;
}

        public function checkPermissions()
        {
            $allPerm = true;
            $permissions = $this->facebook->api("/me/permissions");
            foreach($this->perm as $value)
            {
                if(!array_key_exists($value, $permissions['data'][0]) ) {
                    $allPerm = false;
                }
            }
            return $allPerm;
        }

        public function RequestPermissions()
        {
            header( "Location: " . $this->facebook->getLoginUrl($this->GenerateScope()) );
        }

    public function GenerateScope()
    {
        $scope = null;
        $last_key = array_keys($this->perm);
        $last_key = end($last_key);
        foreach ($this->perm as $key => $value) {
            if ($key == $last_key) {
                $scope .= $value;
            } else {
                $scope .= $value . ',';
            }
        }
        return array("scope" => $scope);
    } 
```

所以，我检查权限，如果没有全部设置，我想询问它们。 `$this->facebook->getLoginUrl($this->GenerateScope())`.

但是当我显示链接或重定向到它时，什么都没有（真的什么都没有）发生？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T13:08:16.870

您的选项卡应用程序在 facebook.com 上的 iframe 元素中运行。要将用户重定向到不同的 URL，您必须更改最顶部框架的位置。使用 JavaScript 可以做到这一点，因此您所要做的就是让您的 PHP 代码回显此 JavaScript 代码 -

```
$url = $facebook->getLoginUrl(...your_params...);

echo "<script language=javascript>";
echo "top.location.href ='".$url."';";
echo "</script>";
exit(); 
```

这将为您的用户执行重定向。

# php - 一栏只显示一个字段，其余根据所有适用记录计算

> ID：11846574
> 
> 赞同：1
> 
> 时间：2012-08-07T12:58:39.197
> 
> 标签：php, mysql

恐怕又要回来了！

我有这个 SQL 查询 - 填充一个表。

```
echo SQLResultTable("SELECT SalesExec, COUNT(SalesExec)AS 'Total<br/> Checks', $AverageScore, `SUM(Autofails) AS 'Total <br/>AutoFails', $AverageAutofails FROM Data_Table WHERE BranchManager = '$BM'");` 
```

在数据库中，我目前有 3 条记录。2 代表销售执行人员 A，1 代表销售执行人员 2。

上面的输出形式是在表格中生成一行。只有 Sales Exec1 的名字。然而，所有其他字段都在加起来/平均等，所有 3 条记录值。

如何让表格生成我需要的正确的 2 行，其中平均值/计数/总和等仅适用于与该 Sales Exec 相关的记录？

为了使表格正常工作，我从另一个站点获取了此功能，除了这个问题之外，它似乎很可爱。

```
function SQLResultTable($Query)
{
    $host = "localhost";
$user = "root";
$pass = "";
$db = "Quality_Monitoring";
    $link = mysql_connect($host, $user, $pass) or die('Could not connect: ' . mysql_error());      //build MySQL Link
    mysql_select_db($db) or die('Could not select database');        //select database
    $Table = "";  //initialize table variable

    $Table.= "<table border='1' style=\"border-collapse: collapse; text-align: center; font-size: small; cellspacing: 5px; \">"; //Open HTML Table

    $Result = mysql_query($Query); //Execute the query
    if(mysql_error())
    {
        $Table.= "<tr><td>MySQL ERROR: " . mysql_error() . "</td></tr>";
    }
    else
    {
        //Header Row with Field Names
        $NumFields = mysql_num_fields($Result);
        $Table.= "<tr style=\"background-color: #000066; text-align: center; color: #FFFFFF;\">";
        for ($i=0; $i < $NumFields; $i++)
        {     
            $Table.= "<th>" . mysql_field_name($Result, $i) . "</th>"; 
        }
        $Table.= "</tr>";

        //Loop thru results
        $RowCt = 0; //Row Counter
        while($Row = mysql_fetch_assoc($Result))
        {
            //Alternate colors for rows
            if($RowCt++ % 2 == 0) $Style = "background-color: #00CCCC;";
            else $Style = "background-color: #CCCCCC;";

            $Table.= "<tr style=\"$Style\">";
            //Loop thru each field
            foreach($Row as $field => $value)
            {
                $Table.= "<td>$value</td>";
            }
            $Table.= "</tr>";
        }
       // $Table.= "<tr style=\"background-color: #000066; color: #FFFFFF;\"><td colspan='$NumFields'>Query Returned " . mysql_num_rows($Result) . " records</td></tr>";
    }
    $Table.= "</table>";

    return $Table;

}

?> 
```

任何帮助表示赞赏，干杯！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T13:03:07.697

SQL 语句使用聚合函数`COUNT(), SUM()`，但没有`GROUP BY`. `GROUP BY SalesExec`. 因为 MySQL 对子句的存在和内容是宽松的`GROUP BY`，所以它会返回一行，可能是第一行`SalesExec`，但聚合计算在*all* `SalesExec`上，这不是一个有意义的结果。

```
echo SQLResultTable("
  SELECT SalesExec, COUNT(SalesExec)AS 'Total<br/> Checks', $AverageScore, `SUM(Autofails) AS 'Total <br/>AutoFails', $AverageAutofails 
  FROM Data_Table 
  WHERE BranchManager = '$BM' 
  GROUP BY SalesExec
");` 
```

# mysql - 为什么初始化文件不填充 MySQL 中的内存表？

> ID：11846576
> 
> 赞同：0
> 
> 时间：2012-08-07T12:58:43.170
> 
> 标签：mysql, init

为了优化系统性能，我们在 RAM 上存储了一些静态表（它们的副本也存在于硬盘驱动器上——在 MyISAM 上）。现在，众所周知，当服务器重新启动时，RAM 上的所有数据都会被删除。因此，为了避免我们创建了一个包含 4 个 SQL 语句的 init 文件。

请注意，每条 SQL 语句都位于单独的行中，以分号 (;) 结尾，并且任何地方都没有注释 --- 因此，根据我有限的知识，我相信我已经避免了一些基本错误。但是，当我从命令行手动重新启动 MySQL 进行测试时，我看到内存表是空的。初始化文件本身没有问题，因为当我从命令行手动执行初始化文件时，数据被填充而没有任何问题。

在解决此问题方面的任何帮助将不胜感激！

谢谢！

乌达扬

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T13:27:19.117

这有些不对劲。

只是为了检查，我尝试使用 /etc/init.d/mysql restart 重新启动我的本地 mysql 服务器。并且，它由 mysql 用户（不是 root）启动。

因此，我们将需要以下内容来尝试解决这个问题，因为我几乎可以肯定问题是文件具有错误的权限，或者它位于运行 mysqld 的用户无权访问的位置。

*   你运行的是什么版本的 Linux？
*   您安装的 mySQL 版本是多少？
*   'init-file=' 在 my.cnf 的右侧部分吗？
*   'ps -ef | 的输出是什么？grep mysqld'?
*   'ls -lrt /tmp/initfile.sql' 的输出是什么？
*   'initfile 本身没有问题，因为当我从命令行手动执行 initfile 时，数据被填充而没有任何问题。'是什么意思？

我不禁认为这是一个权限问题。所以第四和第五个答案是我最感兴趣的。

您应该将所有这些答案添加到您的问题中 - 以便人们拥有帮助您解决问题所需的一切。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T05:19:34.423

感谢您的所有建议，但我已经弄清楚了问题所在。

1.  在 SQL 文件中，我需要提及该初始化文件应该填充哪个数据库。

2.  我在 SQL 语句中有尾随分号——显然这不是一个好主意。

一旦我做了这两个小改动，一切都开始正常了。

再次感谢指点！

乌达扬

# java - 方法提取、泛型、反射

> ID：11846577
> 
> 赞同：1
> 
> 时间：2012-08-07T12:58:44.763
> 
> 标签：java, generics, reflection, refactoring

第一个代码：

```
 Bond[] bonds = null;
    try
    {
        JSONArray jsonArray = new JSONArray(result);
        bonds = new Bond[jsonArray.length()];
        for (int i = 0; i < jsonArray.length(); i++)
        {
            JSONObject json = jsonArray.getJSONObject(i);
            bonds[i] = new Bond(json);
        }
    }
    catch (JSONException e)
    {
        e.printStackTrace();
    } 
```

第二：

```
 Announcement[] announcements = null;
    try
    {
        JSONArray jsonArray = new JSONArray(result);
        announcements = new Announcement[jsonArray.length()];
        for (int i = 0; i < jsonArray.length(); i++)
        {
            JSONObject json = jsonArray.getJSONObject(i);
            announcements[i] = new Announcement(json);
        }
    }
    catch (JSONException e)
    {
        e.printStackTrace();
    } 
```

我正在考虑提取一种涵盖这两个代码的方法。我认为该方法应该或多或少像这样：

```
static Object[] getObjectsArray(String jsonString, Class<?> cls)
{
    Object[] objects = null;
    try
    {
        JSONArray jsonArray = new JSONArray(jsonString);
        objects = (Object[]) Array.newInstance(cls, jsonArray.length());
        for (int i = 0; i < jsonArray.length(); i++)
        {
            JSONObject json = jsonArray.getJSONObject(i);
            objects[i] = new Announcement(json); // FIXME: How to pass "json" arg to the constructor with cls.newInstance()?
        }
    }
    catch (JSONException e)
    {
        e.printStackTrace();
    }
    return objects;
} 
```

所以稍后我可以调用而不是第一个代码`Bond[] bonds = (Bond[]) getObjectsArray(jsonArray, Bond)`。

这是最有问题的一行：

```
objects[i] = new Announcement(json); // FIXME: How to pass "json" arg to the constructor with cls.newInstance()? 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T13:01:45.200

您可以使用以下语法来使用带参数的构造函数（我假设构造函数的参数是 a`JSONObject`并且构造函数是公共的 - 如果不是，请使用该`getDeclaredConstructor`方法）：

```
Class<Announcement> cls = Announcement.class; //the second argument of your method
objects[i] = cls.getConstructor(JSONObject.class).newInstance(json); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-07T13:17:50.447

您可以使用泛型来提供类型安全并避免强制转换，但您必须返回一个 List。

```
static <T> List<T> getObjectsArray(String jsonString, Class<T> cls) {
        ... 
} 
```

如果您在*Announcement*和*Bound*之间有一个公共类型（接口），那么像这样绑定泛型类型会很好：

```
static <T extends YourSuperType> ... 
```

# java - 可以使用 Mockito 来模拟 org.jibx.runtime.BindingDirectory 吗？

> ID：11846578
> 
> 赞同：0
> 
> 时间：2012-08-07T12:58:49.070
> 
> 标签：java, mockito

我正在为我的 Java 应用程序编写单元测试，我需要为可能引发的潜在 JiBX 异常编写测试。我正在测试的方法调用来自另一个类的方法，其中可能会引发 JiBX 异常。这是我正在测试的类（我们称之为 A 类）：

```
@Inject
private CommonDAL commonDAL;

@Async
public Future<String> getTransactionalXXXAvailability(
        List<XXXAvailRequestEntry> requestEntries, TravelWindow travelWindow) {
    if (requestEntries.size() == 0)
        return null;
    XXXAvailRqAccessor requestAccessor = new XXXAvailRequestBuilder().buildRequest(requestEntries, travelWindow);
    logger.info(requestAccessor.marshalRequest());
    String responseAsXml = null;
    try {
        responseAsXml = getResponse(requestAccessor.getRequest());
    } catch (JiBXException e) {
        logger.error("Problem unmarshaling the XXX avail response: ", e);
    }

    logger.info(responseAsXml);
    return new AsyncResult<String>(responseAsXml);
}

private String getResponse(OTAXXXAvailRQ request) throws JiBXException {
    HbsiConnectionInfo connectionInfo = new HbsiConnectionInfo();
    connectionInfo.useConnectionInfoFromContext();

    HBSIXML4OTAWebserviceSoap hbsiSoap = getHbsiSoapService(connectionInfo);

    InterfacePayload header = new InterfacePayload();
    header.setChannelIdentifierId("XXXXXXXXX");
    header.setVersion("2005B");
    header.setInterface("HBSI XML 4 OTA");

    ComponentInfo componentInfo = new ComponentInfo();
    XXXAvailRqAccessor requestAccessor = new XXXAvailRqAccessor(request);
    componentInfo.setId(requestAccessor.getFirstXXXCode());
    componentInfo.setUser( connectionInfo.getUsername() );
    componentInfo.setPwd( connectionInfo.getPassword() );
    componentInfo.setComponentType(EComponentType.XXX);

    Login login = new Login();
    login.setComponentInfo(componentInfo);

    Message body = new Message();
    // todo: this needs to be unique for every request.
    // todo: hook up to logging
    body.setRequestId(UUID.randomUUID().toString());
    body.setTransaction(ETransaction.XXX_AVAIL_RQ);

    body.setXML(requestAccessor.marshalRequest());

    return hbsiSoap.getSoapRequest(header, body, login);
}

HBSIXML4OTAWebserviceSoap getHbsiSoapService(HbsiConnectionInfo connectionInfo) {
    HBSIXML4OTAWebservice ws = new HBSIXML4OTAWebservice( connectionInfo.getWsdlLocation() );

    HBSIXML4OTAWebserviceSoap hbsiSoap = ws.getHBSIXML4OTAWebserviceSoap();
    Map<String, Object> requestContext = ((BindingProvider)hbsiSoap).getRequestContext();
    String readTimeout = commonDAL.getPropertyValue(new PropertyKey(Section.HBSI,
            Property.HBSI_WS_READ_TIMEOUT));
    requestContext.put(BindingProviderProperties.REQUEST_TIMEOUT, Integer.parseInt(readTimeout));
    String connectionTimeout = commonDAL.getPropertyValue(new PropertyKey(Section.HBSI,
            Property.HBSI_WS_CONNECTION_TIMEOUT));
    requestContext.put(BindingProviderProperties.CONNECT_TIMEOUT, Integer.parseInt(connectionTimeout));
    return hbsiSoap;
} 
```

抛出错误的方法如下（来自另一个类，我们称之为B类）：

```
public String marshalRequest() {
    StringWriter requestAsXml = new StringWriter();

    try {
        IBindingFactory bindingFactory = BindingDirectory.getFactory(PROTECTEDCLASSNAME.class);
        IMarshallingContext marshalingContext = bindingFactory.createMarshallingContext();
        marshalingContext.setIndent(2);
        marshalingContext.setOutput(requestAsXml);
        marshalingContext.marshalDocument(request);

    } catch (JiBXException e) {
        logger.error("Problem marshaling PROTECTEDCLASSNAME.", e);
    }

    return requestAsXml.toString();
} 
```

当“body.setXML(requestAccessor.marshalRequest());” 被调用，另一个类（requestAccessor）被测试访问，它的方法 .marshalRequest 是应该抛出 JiBX 异常的地方。我正在编写测试的目的是让这个 A 类的单元测试覆盖率达到 100&，但是被测系统至少由两个类组成，因为我无法模拟名为 requestAccessor 的 XXXAvailRqAccessor 对象。由于以下原因，我无法进行任何测试来产生此错误。

*   名为 requestAccessor 的 XXXAvailRqAccessor 对象在我正在测试的方法中实例化，因此我不能使用模拟来引发异常。

*   无法模拟传递给 .getResponse() 的 OTAXXXAvailRQ 参数，因为它是由 XXXAvailRqAccessor 的构建器创建的。

*   我尝试监视 IBindingFactory，但没有成功。我在 B 类中创建了一个方法，该方法将实例化一个 IBindingFactory，以便我可以监视它，但这不起作用。

*   我还尝试使用 PowerMock 在实例化时返回模拟 XXXAvailRqAccessor，但是当我尝试为 .getRequest 模拟 JiBXExceptioin 时，Mockito 说“检查的异常对于此方法无效”。如果我不能让 Mockito 抛出这个错误，我不知道是否可以操纵关联的对象来抛出它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T13:09:00.717

不是真的，或者我至少不知道这种方式。如果您真的想这样做（我反对），您可以在该类中创建这样的方法：

```
IBindingFactory getBindingFactory() {
    return BindingDirectory.getFactory(PROTECTEDCLASSNAME.class);
} 
```

并替换这一行：

```
IBindingFactory bindingFactory = BindingDirectory.getFactory(PROTECTEDCLASSNAME.class); 
```

和：

```
IBindingFactory bindingFactory = getBindingFactory(); 
```

然后你可以 spy() （如果你不熟悉它，你可以阅读文档中的 Mockito.spy() ）这个对象并使这个方法返回一个模拟。从那时起，它是一帆风顺的。

但不建议使用这种方法，因为：

1.  您正在创建一种新方法（无用的方法）只是为了测试
2.  所述方法必须对测试可见，因此您不能将其标记为私有...
3.  总的来说，我不是间谍的忠实粉丝

问题仍然存在：如何**正确**测试此类案例。好吧，在大多数情况下，我会尝试尽可能多地进行重构，有时它会有所帮助。在其他情况下......好吧，我仍然没有想出更好的解决方案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T11:15:27.367

正如我在评论中所说，我完全支持 Mateusz 的解决方案。但有一个替代方案。在具有该`marshalRequest`方法的类中，有一个类型为 的私有 final 字段`IBindingFactory`。同样在这个类中，有一个带有一个额外参数的包私有构造函数，即`IBindingFactory`to 设置。普通的构造函数将调用`BindingDirectory.getFactory( ... )`然后调用新的构造函数。因此，如果标准构造函数只有一个`String`参数，则该类可能如下所示。

```
public class MyClass{
    private String name;
    private IBindingFactory bindingFactory;

    public MyClass(String name){
        this(name, BindingDirectory.getFactory(PROTECTEDCLASSNAME.class));
    }

    MyClass(String name, IBindingFactory bindingFactory){
        this.name = name;
        this.bindingFactory = bindingFactory;
    }

    public String marshalRequest() {
        StringWriter requestAsXml = new StringWriter();

        try {
            IMarshallingContext marshalingContext = bindingFactory.createMarshallingContext();
            marshalingContext.setIndent(2);
            marshalingContext.setOutput(requestAsXml);
            marshalingContext.marshalDocument(request);

        } catch (JiBXException e) {
            logger.error("Problem marshaling PROTECTEDCLASSNAME.", e);
        }

        return requestAsXml.toString();
    }
} 
```

这样做的原因是，在您的类的测试中，您可以创建一个 mock`IBindingFactory`并将其传递给 package-private 构造函数。

# image-processing - OpenCV：如何获得黑白物体的轮廓？

> ID：11846582
> 
> 赞同：0
> 
> 时间：2012-08-07T12:59:00.003
> 
> 标签：image-processing, opencv, contour

我在获取图片中对象的轮廓时遇到问题。

为了删除所有噪音，我使用`adjustROI()`and `Canny()`。

我也试过`erode()`and `dillate()`, `Laplacian()`, `GaussianBlur()`, `Sobel()`... 我什至发现了这个代码片段来锐化图片：

```
GaussianBlur(src, dst_gaussian, Size(0, 0), 3);

addWeighted(src, 1.5, dst_gaussian, -0.5, 0, dst); 
```

但我的结果总是一样的：我的对象充满了黑白颜色（就像电视屏幕上的噪点），所以不可能用`findContours()`（`findContours()`找到一百万个轮廓，但不是整个轮廓中的一个）对象。我用`drawContours()`) 检查这个。

我使用 C++，并将图片加载为灰度 Mat（对于 Canny，它必须是灰度的）。我的对象在每张图片上都有不同的形状，但它总是在图片的中间。

我要么需要找到一种方法来通过图像处理获得更好的彩色对象 - 但我不知道还能尝试什么 - 或者在图像处理后如何用颜色填充对象（没有它的轮廓，因为这是我到底想要什么）。

欢迎任何想法。先感谢您。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T09:33:05.333

我找到了一个在大多数情况下都有效的解决方案。我使用概率霍夫变换填充我的对象`HoughLinesP()`。

```
vector<Vec4i> lines;
HoughLinesP(dst, lines, 1, CV_PI/180, 80, 30, 10);
for(size_t i = 0; i < lines.size(); i++)
{
    line(color_dst, Point(lines[i][0], lines[i][1]), Point(lines[i][2], lines[i][3]), Scalar(0,0,255), 3, 8);
} 
```

这是来自 OpenCV 文档提供的一些示例代码。

在使用一些边缘检测算法（如`Canny()`）后，概率霍夫变换在二进制图片中找到对象。该算法找到线条，如果绘制线条，则表示整个对象。当然，某些参数必须针对某种图片进行调整。

我不确定这是否适用于每张图片或每个物体，但就我而言，它确实有效。

# java - Java Swing 的循环进度条不起作用

> ID：11846589
> 
> 赞同：6
> 
> 时间：2012-08-07T12:59:38.620
> 
> 标签：java, swing, java-7, paintcomponent, jlayer

我从 Oracle 站点发现了这个[测试项目](http://docs.oracle.com/javase/tutorial/uiswing/misc/jlayer.html#animating)，因为我想在我的项目中添加一个圆形进度条。

我正在使用 Netbeans 开发应用程序，当我启动应用程序时，圆圈应该在的 JPanel.... disappaer。

我已经删除了所有对解决这个问题没有用的代码，我得到了这个代码：

```
import java.awt.*;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.beans.PropertyChangeEvent;
import javax.swing.*;
import javax.swing.plaf.LayerUI;

public class Loading_Test extends javax.swing.JFrame
{
    static final WaitLayerUI layerUI = new WaitLayerUI();
    public Loading_Test()
    {

        JPanel panel = new JPanel();
        JLayer<JPanel> jlayer = new JLayer<>(panel, layerUI);
        add(jlayer);

        initComponents();
    }

    @SuppressWarnings("unchecked")
    private void initComponents() {

        setDefaultCloseOperation(javax.swing.WindowConstants.EXIT_ON_CLOSE);

        javax.swing.GroupLayout layout = new javax.swing.GroupLayout(getContentPane());
        getContentPane().setLayout(layout);
        layout.setHorizontalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGap(0, 400, Short.MAX_VALUE)
        );
        layout.setVerticalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGap(0, 300, Short.MAX_VALUE)
        );

        pack();
    }

    public static void main(String args[])
    {
        java.awt.EventQueue.invokeLater(new Runnable()
        {

            @Override
            public void run()
            {                
                JFrame frame = new Loading_Test();
                frame.setVisible(true);
                layerUI.start();
            }
        });
    }
}
class WaitLayerUI extends LayerUI<JPanel> implements ActionListener
{

    private boolean mIsRunning;
    private boolean mIsFadingOut;
    private Timer mTimer;
    private int mAngle;
    private int mFadeCount;
    private int mFadeLimit = 15;

    @Override
    public void paint(Graphics g, JComponent c)
    {
        int w = c.getWidth();
        int h = c.getHeight();

        // Paint the view.
        super.paint(g, c);

        if (!mIsRunning)
        {
            return;
        }

        Graphics2D g2 = (Graphics2D) g.create();

        float fade = (float) mFadeCount / (float) mFadeLimit;
        // Gray it out.
        Composite urComposite = g2.getComposite();
        g2.setComposite(AlphaComposite.getInstance(AlphaComposite.SRC_OVER, .5f * fade));
        g2.fillRect(0, 0, w, h);
        g2.setComposite(urComposite);

        // Paint the wait indicator.
        int s = Math.min(w, h) / 5;
        int cx = w / 2;
        int cy = h / 2;
        g2.setRenderingHint(RenderingHints.KEY_ANTIALIASING, RenderingHints.VALUE_ANTIALIAS_ON);
        g2.setStroke(new BasicStroke(s / 4, BasicStroke.CAP_ROUND, BasicStroke.JOIN_ROUND));
        g2.setPaint(Color.white);
        g2.rotate(Math.PI * mAngle / 180, cx, cy);
        for (int i = 0; i < 12; i++)
        {
            float scale = (11.0f - (float) i) / 11.0f;
            g2.drawLine(cx + s, cy, cx + s * 2, cy);
            g2.rotate(-Math.PI / 6, cx, cy);
            g2.setComposite(AlphaComposite.getInstance(
                    AlphaComposite.SRC_OVER, scale * fade));
        }

        g2.dispose();
    }

    @Override
    public void actionPerformed(ActionEvent e)
    {
        if (mIsRunning)
        {
            firePropertyChange("tick", 0, 1);
            mAngle += 3;
            if (mAngle >= 360)
            {
                mAngle = 0;
            }
            if (mIsFadingOut)
            {
                if (--mFadeCount == 0)
                {
                    mIsRunning = false;
                    mTimer.stop();
                }
            }
            else if (mFadeCount < mFadeLimit)
            {
                mFadeCount++;
            }
        }
    }

    public void start()
    {
        if (mIsRunning)
        {
            return;
        }

        // Run a thread for animation.
        mIsRunning = true;
        mIsFadingOut = false;
        mFadeCount = 0;
        int fps = 24;
        int tick = 1000 / fps;
        mTimer = new Timer(tick, this);
        mTimer.start();
    }

    public void stop()
    {
        mIsFadingOut = true;
    }

    @Override
    public void applyPropertyChange(PropertyChangeEvent pce, JLayer l)
    {
        if ("tick".equals(pce.getPropertyName()))
        {
            l.repaint();
        }
    }
} 
```

如果您“按原样”运行此代码，您应该遇到与我相同的问题，JPanel 未显示。

但我发现，如果我删除与布局相关的行（27~36），进度条就会开始工作。

您还必须手动设置窗口大小添加

```
setSize(300, 300); 
```

后

```
pack(); 
```

因为布局线是由 Netbeans 自动生成的，所以我试图了解如何解决这个问题，因为 Netbeans 编辑器阻止了这些特定的代码行进行编辑。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-07T16:01:53.033

> I've lost one day and it still not working.... I'll use an animated gif on JLabel.... End of story!

@Robin has important info, and seems like as you limited by usage of GuiBulder..., then I'm don't want to comment something, result is

![enter image description here](../Images/293e57d01c7c30e4e98dcff408218852.png)

from little bit modified code

```
import java.awt.*;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.beans.PropertyChangeEvent;
import javax.swing.*;
import javax.swing.plaf.LayerUI;

public class Loading_Test {

    static final WaitLayerUI layerUI = new WaitLayerUI();
    JFrame frame = new JFrame("JLayer With Animated Gif");

    public Loading_Test() {
        JPanel panel = new JPanel() {

            @Override
            public Dimension getPreferredSize() {
                return new Dimension(400, 300);
            }
        };
        JLayer<JPanel> jlayer = new JLayer<>(panel, layerUI);
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.add(jlayer);
        frame.pack();
        frame.setVisible(true);
        layerUI.start();
    }

    public static void main(String args[]) {
        java.awt.EventQueue.invokeLater(new Runnable() {

            @Override
            public void run() {
                Loading_Test loading_Test = new Loading_Test();

            }
        });
    }
}

class WaitLayerUI extends LayerUI<JPanel> implements ActionListener {

    private boolean mIsRunning;
    private boolean mIsFadingOut;
    private Timer mTimer;
    private int mAngle;
    private int mFadeCount;
    private int mFadeLimit = 15;

    @Override
    public void paint(Graphics g, JComponent c) {
        int w = c.getWidth();
        int h = c.getHeight();
        super.paint(g, c); // Paint the view.
        if (!mIsRunning) {
            return;
        }
        Graphics2D g2 = (Graphics2D) g.create();
        float fade = (float) mFadeCount / (float) mFadeLimit;
        Composite urComposite = g2.getComposite(); // Gray it out.
        g2.setComposite(AlphaComposite.getInstance(AlphaComposite.SRC_OVER, .5f * fade));
        g2.fillRect(0, 0, w, h);
        g2.setComposite(urComposite);
        int s = Math.min(w, h) / 5;// Paint the wait indicator.
        int cx = w / 2;
        int cy = h / 2;
        g2.setRenderingHint(RenderingHints.KEY_ANTIALIASING, RenderingHints.VALUE_ANTIALIAS_ON);
        g2.setStroke(new BasicStroke(s / 4, BasicStroke.CAP_ROUND, BasicStroke.JOIN_ROUND));
        g2.setPaint(Color.white);
        g2.rotate(Math.PI * mAngle / 180, cx, cy);
        for (int i = 0; i < 12; i++) {
            float scale = (11.0f - (float) i) / 11.0f;
            g2.drawLine(cx + s, cy, cx + s * 2, cy);
            g2.rotate(-Math.PI / 6, cx, cy);
            g2.setComposite(AlphaComposite.getInstance(
                    AlphaComposite.SRC_OVER, scale * fade));
        }
        g2.dispose();
    }

    @Override
    public void actionPerformed(ActionEvent e) {
        if (mIsRunning) {
            firePropertyChange("tick", 0, 1);
            mAngle += 3;
            if (mAngle >= 360) {
                mAngle = 0;
            }
            if (mIsFadingOut) {
                if (--mFadeCount == 0) {
                    mIsRunning = false;
                    mTimer.stop();
                }
            } else if (mFadeCount < mFadeLimit) {
                mFadeCount++;
            }
        }
    }

    public void start() {
        if (mIsRunning) {
            return;
        }
        mIsRunning = true;// Run a thread for animation.
        mIsFadingOut = false;
        mFadeCount = 0;
        int fps = 24;
        int tick = 1000 / fps;
        mTimer = new Timer(tick, this);
        mTimer.start();
    }

    public void stop() {
        mIsFadingOut = true;
    }

    @Override
    public void applyPropertyChange(PropertyChangeEvent pce, JLayer l) {
        if ("tick".equals(pce.getPropertyName())) {
            l.repaint();
        }
    }
} 
```

*   have to add two `JButtons`, one for start and second for stop (show and hide animated Gig)

*   don't forger that `JPanel` has implemented `FlowLayout`, that pretty accepting `PreferredSize` came from its childs,

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-08T11:47:04.843

[使用SwingLabs](http://swingx.java.net/)的 Swing Components Extension 找到更好的简单（且有效）解决方案

**JXBusyLabel**

它的编辑器有一个与 NetBeans 完全集成的插件，因此使用起来非常简单

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-07T14:16:47.910

从您的问题和评论看来，您`JLayer`在 Netbeans 中实施时遇到了问题，我建议您宁愿选择一个[`CardLayout`](http://docs.oracle.com/javase/tutorial/uiswing/layout/card.html)允许您在 normal`JPanel`和带有*spinner*之间切换的方法。

这是一个简单的教程：[CardLayout With Netbeans](http://vincentramdhanie.blogspot.com/2009/11/cardlayout-with-netbeans.html)

# c# - 在 C# 中对任意大的正整数进行位计数

> ID：11846590
> 
> 赞同：3
> 
> 时间：2012-08-07T12:59:40.347
> 
> 标签：c#, .net, optimization, bit-manipulation, bitcount

有很多位计数的实现，但就我而言，我需要测试一个任意大的数字是否最多包含两个设置位。

我编写了以下函数来完成这项工作，而且看起来速度相当快，但我想知道它是否可以针对 C# 进一步优化。这个函数在循环中被调用了几百万次。

```
public static byte [] BitCountLookupArray = new byte []
{
    0, 1, 1, 2, 1, 2, 2, 3, 1, 2, 2, 3, 2, 3, 3, 4, 1, 2, 2, 3, 2, 3, 3, 4, 2, 3, 3, 4, 3, 4, 4, 5, 1, 2, 2, 3, 2, 3, 3, 4, 2, 3, 3, 4, 3, 4, 4, 5, 2, 3, 3, 4, 3, 4, 4, 5, 3, 4, 4, 5, 4, 5, 5, 6, 1, 2, 2, 3, 2, 3, 3, 4, 2, 3, 3, 4, 3, 4, 4, 5, 2, 3, 3, 4, 3, 4, 4, 5, 3, 4, 4, 5, 4, 5, 5, 6, 2, 3, 3, 4, 3, 4, 4, 5, 3, 4, 4, 5, 4, 5, 5, 6, 3, 4, 4, 5, 4, 5, 5, 6, 4, 5, 5, 6, 5, 6, 6, 7, 1, 2, 2, 3, 2, 3, 3, 4, 2, 3, 3, 4, 3, 4, 4, 5, 2, 3, 3, 4, 3, 4, 4, 5, 3, 4, 4, 5, 4, 5, 5, 6, 2, 3, 3, 4, 3, 4, 4, 5, 3, 4, 4, 5, 4, 5, 5, 6, 3, 4, 4, 5, 4, 5, 5, 6, 4, 5, 5, 6, 5, 6, 6, 7, 2, 3, 3, 4, 3, 4, 4, 5, 3, 4, 4, 5, 4, 5, 5, 6, 3, 4, 4, 5, 4, 5, 5, 6, 4, 5, 5, 6, 5, 6, 6, 7, 3, 4, 4, 5, 4, 5, 5, 6, 4, 5, 5, 6, 5, 6, 6, 7, 4, 5, 5, 6, 5, 6, 6, 7, 5, 6, 6, 7, 6, 7, 7, 8
};

// The parameter [number] will NEVER be negative.
public static bool HasSetBitCountOfLessThenThree (System.Numerics.BigInteger number)
{
    int sum = 0;
    byte [] bytes = null;

    bytes = number.ToByteArray();

    for (int i=0; i < bytes.Length; i++)
    {
        sum += BitCountLookupArray [bytes [i]];
    }

    return (sum < 3);
} 
```

**重要提示**：发送给函数的参数 [number]**永远不会**是负数。

我想到的几点是：

*   使函数静态。完毕。
*   使用静态查找数组。完毕。
*   使用指针而不是数组索引，因为字节数经常超过 100,000。不确定这会有多大帮助。
*   强制使用 .NET 中无法保证的内联函数。

接受其他建议。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-07T13:05:22.577

这样你可以进一步优化它

```
for (int i=0; i < bytes.Length; i++)
{
    sum += BitCountLookupArray [bytes [i]];
    if(sum >= 3)
    {
         return false   // This will stop the execution of unnecessary lines  
                        // as we need to know whether sum is less than 3 or not.                         
    }
}

return true; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-07T15:50:01.250

由于您只需要知道您的设置位是否少于 3 个，因此我建议您这样做：

```
// remove two bits
number &= number - 1;
number &= number - 1;
// if number != 0, then there were 3 or more bits set
return number.IsZero; 
```

当然 Rain 的方法也有效，我不确定哪种策略会更快。

选择：

```
//remove one bit
number &= number - 1;
// if the number of bits left is 0 or 1, there were < 3 bits set
return number.IsZero || number.IsPowerOfTwo; 
```

首先测试可能会更快，然后再删除该位：

```
return number.IsZero ||        // zero bits?
    number.IsPowerOfTwo ||     // one bit?
    (number & (number - 1)).IsPowerOfTwo;  // two bits? 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-07T13:05:49.007

最明显的优化是尽快退出循环`sum == 3`，因为超过该点的任何进一步匹配都是无关紧要的。

也无需设置`bytes`两次；简单地使用`byte [] bytes = number.ToByteArray();`，但这里的好处是微乎其微的。

# java - Log4J 动态更改文件路径

> ID：11846593
> 
> 赞同：13
> 
> 时间：2012-08-07T12:59:43.940
> 
> 标签：java, dynamic, properties, log4j

我想动态更改我的 log4j 日志文件的路径和文件名。

我已经阅读了很多页面，几乎每个页面都告诉我应该使用像这里这样的系统属性： [如何动态更改 log4j 日志文件？](https://stackoverflow.com/questions/7006476/how-to-change-the-log4j-log-file-dynamically)

所以我的 log4j.properties 文件看起来像这样：

```
log4j.logger.JDBC_LOGGER=INFO,jdbcTests
log4j.additivity.JDBC_LOGGER = false

log4j.appender.jdbcTests=org.apache.log4j.FileAppender
log4j.appender.jdbcTests.File=${my.log}
log4j.appender.jdbcTests.layout=org.apache.log4j.PatternLayout
log4j.appender.jdbcTests.append = false
log4j.appender.jdbcTests.layout.ConversionPattern=%d{yyyy mm dd HH:mm:ss} %5p %C:Line %L - %m%n 
```

在我的主要方法中，我将设置我的新系统属性：

```
System.setProperty("{my.log", "C:/logfile.log"); 
```

但我只是得到一个错误：

```
log4j:ERROR setFile(null,false) call failed.
java.io.FileNotFoundException: 
    at java.io.FileOutputStream.open(Native Method).... 
```

当我尝试使用以下命令读取我设置的系统属性时：

```
System.out.println(System.getProperty("my.log")); 
```

它返回空值。我做错了什么？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-07T13:03:34.290

我认为您的意思是“my.log”而不是“{my.log”

```
System.setProperty("my.log", "C:/logfile.log"); 
```

我不认为您可以在日志记录开始后更改此设置，因此您需要尽早在程序中进行设置。

顺便说一句：您可以对 FileAppender 进行子类化，以使其以您喜欢的方式运行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-07T13:04:50.207

你有一个拼写错误：“{my.log”而不是“my.log”

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-27T10:08:20.407

只需在实例化记录器之前设置属性，一旦你初始化记录器设置该属性将不值得。就像下面这样：

```
System.setProperty("my.log", "C:\\src\\com\\web\\automation\\logs\\Application.log");
PP_LOGS = Logger.getLogger("devpinoyLogger"); 
```

# c - 如何以编程方式在我的 char 设备上设置权限

> ID：11846594
> 
> 赞同：11
> 
> 时间：2012-08-07T12:59:43.737
> 
> 标签：c, permissions, linux-device-driver

我最近在工作中继承了一些代码，这是旧的 2.4.X linux 内核驱动程序，我的任务是让它们在更新的 2.6 或更高版本的内核上工作。我在带有 3.1.10 内核的 OpenSUSE 12.1 上运行。

我已将 register_chrdev() 中的原始代码更新为使用 class_create()/device_create() 调用，我可以看到我的设备正确显示在 /dev 中。我当前的问题是我的设备的权限被设置为 r/w 仅供用户使用：

```
crw-------  1 root root    244,   0 Aug  7 07:57 gcanain 
```

我知道我可以通过命令行“chmod”文件，或者我可以设置 udev 权限......但是无论如何可以通过编程方式执行此操作，这样当我发出 insmod 命令时，dev 将安装正确的规则已经到位了吗？

是否有任何可能存在的 API 可以调用来执行此操作，这些创建 API 之一中缺少的任何选项？

澄清一下，我不想使用 udev 规则的部分原因是我不提前知道设备驱动程序的名称。设备驱动程序是在循环中生成的，因此名称会附加一个数字，nNumDevs 几乎可以是任何东西：

```
for (i = 0; i < nNumDevs; i++) {
  strcpy(Modname,GC_ANAIN_MODULE_NAME);
  strcat(Modname,"%d");
  device_create(c1, NULL, MKDEV(nMajor, GC_ANAIN_MINOR_VERSION+i), NULL, Modname, i);
} 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2016-03-02T15:03:03.033

这是[TTY 驱动程序](https://github.com/torvalds/linux/blob/v4.6/drivers/tty/tty_io.c#L3594)在创建时将权限设置为 0666 的方法：

```
static char *tty_devnode(struct device *dev, umode_t *mode)
{
        if (!mode)
                return NULL;
        if (dev->devt == MKDEV(TTYAUX_MAJOR, 0) ||
            dev->devt == MKDEV(TTYAUX_MAJOR, 2))
                *mode = 0666;
        return NULL;
}

static int __init tty_class_init(void)
{
        tty_class = class_create(THIS_MODULE, "tty");
        if (IS_ERR(tty_class))
                return PTR_ERR(tty_class);
        tty_class->devnode = tty_devnode;
        return 0;
} 
```

devnode 属性[`struct class`](https://www.kernel.org/doc/htmldocs/device-drivers/API-struct-class.html)有一个参数指针`mode`，允许您设置权限。

当心，`mode`可能是`NULL`当设备被破坏时。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-07T14:15:11.733

尝试这个： `#include <sys/stat.h>`

`int chmod(const char *path, mode_t mode);` 或者 `int fchmod(int fd, mode_t mode);`

来源： man -s 2 chmod

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-07T14:17:57.377

udev 有权限规则，需要在下面创建`/etc/udev/rules.d`

首先试试这个：

在文件`/etc/udev/udev.conf`中，添加以下行：

```
# My default permissions
default_mode="0660" 
```

如果这不起作用，请在 /etc/udev/rules.d 中添加规则，更多信息请参见：[http ://www.reactivated.net/writing_udev_rules.html](http://www.reactivated.net/writing_udev_rules.html)

# sql - 用一个 FK 删除表 A 和 B 中的许多记录到表 B

> ID：11846596
> 
> 赞同：1
> 
> 时间：2012-08-07T12:59:49.860
> 
> 标签：sql, sql-server, nhibernate

我有 2 张桌子：`A`和`B`

`A`包含以下列：

```
Id [uniqueIdentifier] -PK
checkpointId [numeric(20,0)] 
```

`B`包含以下内容：

```
Id [uniqueIdentifier] – PK
A_id (FK, uniqueIdentifier) 
```

`B`有`A`来自`A_id`列 (FK)的引用

问题：我想从表`A`中删除所有`checkpoint_id`小于的记录`X`：

```
delete from CheckpointStorageObject where checkpointIdentifierIdentifier <= 1000 
```

但我不能这样做，因为`"The primary key value cannot be deleted because references to this key still exist"`

我试图先从`B`没有连接的表中删除：

```
DELETE FROM CheckpointToProtectionGroup 
WHERE EXIST (SELECT * from CheckpointStorageObject 
             WHERE CheckpointStorageObject.CheckpointIdentifierIdentifier <= 1000) 
```

但它没有用。

我该怎么做？是否可以使用一个执行命令从两个表中删除？

结果删除的记录可能非常大 - 每个表中有超过 30K 的记录。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-07T13:08:27.500

试试这个：

首先从tableB中删除：

```
delete from tableB where A_id IN (Select Id from tableA where checkpointId <= 1000) 
```

然后从tableA中删除：

```
delete from tableA where checkpointId <= 1000 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-07T13:13:37.593

您首先必须从表 B 中删除条目

```
delete from tableB where A_id IN (Select Id from tableA where checkpointIdentifierIdentifier <= 1000) 
```

完成后，您可以通过检查不再在表 B 中的 ID 从表 A 中删除

```
delete from tableA where Id not in (select A_id from tableB) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-07T13:37:57.850

您的第二个查询有一些缺陷：

*   它是`EXISTS`而不是`EXIST`

*   您需要指定 2 个表之间的连接条件。在像这样的相关子查询中，您在`WHERE`子句中添加这个条件

*   为表设置别名也是有用的，以减少代码并使其更具可读性，尤其是对于这么长的名称

*   将 2 个语句包含在事务中，这样您就可以确定它要么成功 - 并从两个表中删除 - 要么失败并且不删除任何内容。如果您不使用事务，则第二次删除可能不会成功，如果在两次删除之间的一小段时间内，在表 B 中插入一行并引用表 A 中您第二条语句将尝试删除的行.

因此，首先从表 B ( ) 中删除`CheckpointToProtectionGroup`：

```
BEGIN TRANSACTION

    DELETE FROM CheckpointToProtectionGroup AS b
    WHERE EXISTS                                  --- EXISTS
          ( SELECT * 
            FROM CheckpointStorageObject AS a
            WHERE a.id = b.A_id                   --- join condition
              AND a.CheckpointId <= 1000
          ) ; 
```

然后从表 A ( `CheckpointStorageObject`) 中：

```
 DELETE FROM CheckpointStorageObject
    WHERE CheckpointId <= 1000 ;

COMMIT TRANSACTION ; 
```

# javascript - jQuery 简单对话框事件

> ID：11846597
> 
> 赞同：1
> 
> 时间：2012-08-07T12:59:51.907
> 
> 标签：javascript, jquery, jquery-ui, jquery-mobile, jquery-ui-dialog

我有一个 simpledialog2 框，它功能齐全，但我试图找出一种在加载时调用函数的方法。

例如我有

```
$('<div>').simpledialog2({
    mode : 'blank',
    animate : false,
    transition : 'none',
    // dialogAllow : true,
    // dialogForce : true,
    headerText : 'Statement Metadata',
    blankContent : "HTML HERE"

}); 
```

加载 HTML HERE 后会触发什么事件？或者一旦 simpledialog2 完全准备好，我该如何调用 javascript？

类似于 pageshow 事件处理程序...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T13:04:24.713

尝试以下操作：

```
$('<div>').simpledialog2({
    mode : 'blank',
    animate : false,
    transition : 'none',
    // dialogAllow : true,
    // dialogForce : true,
    headerText : 'Statement Metadata',
    blankContent : "HTML HERE",
    callbackOpen: function() {
         var me = this;
         alert('opened');
         setTimeout(function() {me.close();},2000);
    }
}); 
```

小提琴：

[http://jsfiddle.net/ykHTa/62/](http://jsfiddle.net/ykHTa/62/)

# rest - .NET MVC - 将 POST 和 GET 路由到同一个控制器，但方法不同

> ID：11846601
> 
> 赞同：3
> 
> 时间：2012-08-07T13:00:06.467
> 
> 标签：rest, post, methods, get, .net

我在 RouteConfig.cs 中有这个路由配置：

```
// notes for a receipt
routes.MapHttpRoute(
        name: "Get Notes for a receipt",
        routeTemplate: "receipt/{ReceiptID}/notes",
        defaults: new { 
                controller = "Receipt",
                action = "GetNotes",
                ReceiptID = RouteParameter.Optional
        }
); 
```

对匹配 URL 的所有 GET 请求都将路由到此方法：

```
/// <summary>
/// retrieve notes for a receipt
/// </summary>
/// <param name="ReceiptID">receipt guid</param>
/// <returns>list of notes</returns>
[HttpGet]
public List<NoteDTO> GetNotes(Guid ReceiptID)
{
        try
        {
                IEnumerable<tNotes> Notes = Retriever.GetNotes(ReceiptID);
                return ObjectMapper.MapNotes(Notes);
        }
        catch (Exception)
        {
                // TODO more granular error handling
                throw new HttpResponseException(Request.CreateResponse(HttpStatusCode.NotFound));
        }
} 
```

这工作正常。但是，我希望能够将 POST 请求发送到完全相同的 URL，然后调用不同的方法。但是我收到 405 Method Not Allowed：“请求的资源不支持 http 方法 'POST'。”

我已将 [HttpPost] 注释添加到要调用的方法中，但我缺少将 Http 请求类型添加到路由配置的方法。

我想我正在寻找这样的东西：

```
defaults: new { 
    controller = "Receipt",
    httpMethod = "POST, // specify http method 
    action = "GetNotes",
    ReceiptID = RouteParameter.Optional
} 
```

# .net - System.OutOfMemoryException VB6

> ID：11846602
> 
> 赞同：0
> 
> 时间：2012-08-07T13:00:10.910
> 
> 标签：.net, vb6, .net-2.0, out-of-memory

我正在维护一个 VB6 应用程序，它工作正常，直到今天早上`System.OutOfMemoryException`被抛出。这是场景：

EXE 是一个 VB6 应用程序，它为某些方法（主要是验证方法）使用 .NET 2.0 DLL。

当它在同一个 if 语句中调用两个验证方法时，我遇到了这个问题：

```
If oCommon.IsHWHeat(Model) And oCommon.IsEHeat(Model) then ... 
```

但是，如果我单独调用每个验证方法，则没有问题。

不知道如何使它工作。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T14:26:07.403

显然问题出在 Windows 7 上。我决定手动删除 .NET dll，重新粘贴它，然后重新注册它，然后它就可以正常工作了。我认为由于我之前所做的只是将它从构建目录复制到我的 VB6 应用程序的引用目录（覆盖已经存在的文件）然后注册它，Windows 出于某种原因没有进行完全覆盖，因此文件已损坏.

谢谢，克里斯

PS这个问题似乎很模糊，因为错误非常模糊。鉴于我掌握的信息，我尽可能地解释了它。

# sql - SQL：搜索和替换条目，其中包含指向另一个表中特定其他条目的链接

> ID：11846604
> 
> 赞同：0
> 
> 时间：2012-08-07T13:00:14.093
> 
> 标签：sql, sqlite

所以想象一下，我有两个表，Car 和 Driver，分别具有以下结构：

```
(hash TEXT PRIMARY_KEY, brand TEXT, driver INTEGER) 
```

和

```
(id INTEGER PRIMARY_KEY, name TEXT) 
```

所以现在让我们填充我们的表格并想象我们将这些表格插入到 `("abcdefghi", "Honda",125)`in`Car`和 in`Driver` `(125,"Marc").`

我正在寻找的是一个指令，`Renault`它`Marc`可以有效地更新我的表格以转换`("abcdefghi", "Honda",125)`为`("abcdefghi, "Renault",125)`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T13:10:37.937

```
UPDATE     Car
SET        brand = 'Renault'
FROM       Car c
INNER JOIN Driver d ON c.driver = d.id
WHERE      d.Name = 'Marc' 
```

如果您计划使用不同的值频繁运行此代码，您可能希望将“Renault”和“Marc”更改为变量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T13:07:08.830

这是你要找的吗？

```
update car
set
    brand = 'Renault'
from
    car
where 
    driver in (Select id from driver where name='Marc') 
```

# c# - 如何从工作流历史中获取审批状态？

> ID：11846609
> 
> 赞同：0
> 
> 时间：2012-08-07T13:00:22.843
> 
> 标签：c#, tridion, tridion-2011

我正在尝试获取工作流过程历史记录项的每个活动的批准状态，如下所示。

```
var status = csClient.Read(activitiydetails.Id, readoption) as ApprovalStatusData;
logdetails("Activity Approval Status--->" + status.Title.ToString()); 
```

我收到“对象引用错误”

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-07T13:43:43.313

当您使用`As`运算符强制转换为 时`ApprovalStatusData`，您应该期望如果从返回的对象`csClient.Read()`不是一个`ApprovalStatusData`，它的值将为空。当您尝试在以下行中使用它时，您将收到对象引用错误。

从您的变量称为 [sic] 的事实看来`activitiydetails`，您不应该期望`ApprovalStatusData`返回 an 。

如果您使用正确的 Cast 运算符编写代码，则当您尝试强制转换时代码将失败，并抛出 InvalidCastException。

```
var status = (ApprovalStatusData)csClient.Read(activitiydetails.Id, readoption);
logdetails("Activity Approval Status--->" + status.Title.ToString()); 
```

# icefaces - 如何自定义内部服务器错误弹出窗口？

> ID：11846610
> 
> 赞同：0
> 
> 时间：2012-08-07T13:00:25.823
> 
> 标签：icefaces, icefaces-3

我想用将用户转发到错误页面来替换内部服务器错误弹出窗口，该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-28T00:11:45.777

在您的 web.xml 中放置此上下文参数：

```
<context-param>
  <param-name>com.icesoft.faces.connectionLostRedirectURI</param-name>
  <param-value>connectionLost.iface</param-value>
</context-param>

<context-param>
  <param-name>com.icesoft.faces.sessionExpiredRedirectURI</param-name>
  <param-value>connectionLost.iface</param-value>
</context-param> 
```

# css - css左边一个div变亮了？

> ID：11846612
> 
> 赞同：3
> 
> 时间：2012-08-07T13:00:30.363
> 
> 标签：css, html, colors

我有一个 div，它是我的半个网站的包装，左侧有一个类别列表。包装本身是灰色的。

我想要的是它会从灰色切换到白色。这是我希望的示例图像：

![在此处输入图像描述](../Images/d0a5d2229162f6ac30022a86601963b1.png)

有针对这个的解决方法吗？

**编辑**

如果它有任何帮助，这里是我的包装器的 css：

```
#wrapper{
width: 980px;
margin: 0 auto;
background: #f3f3f3;
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-07T13:04:22.420

如果我理解正确，您正在寻找一种添加渐变的方法。在下面，您可以找到从左到右渐变的 CSS，颜色`#FFFFFF`为`#F3F3F3`.

请注意，渐变尚未标准化，许多浏览器都有自己的实现。这就是为什么有多个指令的原因（前缀 -o- 代表 Opera，-moz- 代表 Mozilla 等）：

```
#wrapper {
    ...
    background-image: 
        linear-gradient(left , rgb(255,255,255) 35%, rgb(243,243,243) 84%);
    background-image: 
        -o-linear-gradient(left , rgb(255,255,255) 35%, rgb(243,243,243) 84%);
    background-image: 
        -moz-linear-gradient(left , rgb(255,255,255) 35%, rgb(243,243,243) 84%);
    background-image: 
        -webkit-linear-gradient(left , rgb(255,255,255) 35%, rgb(243,243,243) 84%);
    background-image: 
        -ms-linear-gradient(left , rgb(255,255,255) 35%, rgb(243,243,243) 84%);

    background-image: -webkit-gradient(
        linear,
        left top,
        right top,
        color-stop(0.35, rgb(255,255,255)),
        color-stop(0.84, rgb(243,243,243))
    );
} 
```

这是一个方便的[CSS 渐变生成器](http://gradients.glrzad.com/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-07T13:04:51.727

你需要的是渐变。
试试[这个生成器](http://www.colorzilla.com/gradient-editor/)或只是阅读它们

# entity-framework - EF CF：如何删除 FK 引用约束？

> ID：11846614
> 
> 赞同：0
> 
> 时间：2012-08-07T13:00:39.750
> 
> 标签：entity-framework, ef-code-first, foreign-key-relationship

每个人。我需要无条件删除一些实体。一切都由代码处理。

但是EF不允许我这样做。我可以通过 SSMS 手动删除 FK 引用约束，但是如何在创建数据库时设置它？

谢谢。

# javascript - 暂停视频不会停止 html5 视频标签中的音频

> ID：11846617
> 
> 赞同：12
> 
> 时间：2012-08-07T13:00:46.043
> 
> 标签：javascript, html, firefox, google-chrome, html5-video

我正在使用它的`pause()`方法暂停视频..问题是音频继续播放...我还尝试从 Firefox 的 Javascript 控制台暂停它...没有任何反应。该视频为 .ogg 格式，甚至无法在 Chrome 中播放（因为我认为它不受支持）。我在 Amazon S3 上托管了视频，它完美地流式传输。我正在动态创建元素，从 JSON 请求中加载其信息。这是一些代码：

```
function showVideo() {
        var video = videodata;

        var videobox = $('#videobox').first();
        var videoplayer = document.getElementById('videoplayer');

        if (video.Enabled) {
            if ((videoplayer != null && videoplayer.currentSrc != video.Location) || videoplayer == null) {
                console.log('Creating video elem');
                videobox.empty();
                videobox.append('<video id="videoplayer" preload="auto" src="' +
                  video.Location + '" width="100%" height="100%" autoplay="autoplay" loop="loop" />');
                videobox.show();
            }
        } else {
            if (videoplayer != null) {
                videoplayer.pause();
                console.log('Pausing video...');
            }
            console.log('Deleting video elem');
            videobox.hide();
            videobox.empty();
        }
    } 
```

我之前已经发布了一个类似的问题......但现在我正在使用其他浏览器，所以我想我必须创建一个新问题。

* * *

这是工作代码（感谢用户*h​​eff*！）

```
function showVideo() {
    var video = videodata;

    var videobox = $('#videobox').first();
    var videoplayer = document.getElementById('videoplayer');

    if (video.Enabled) {
        if ((videoplayer.src != video.Location) || videoplayer.src == '') {
            console.log('Playing video: ' + video.Location);
            videoplayer.src = video.Location;
            videoplayer.load();
            videoplayer.play();
            videobox.show();
        }
    } else {
        if (videoplayer.src != '') {
            console.log('Pausing video...');
            videoplayer.pause();
            videoplayer.src = '';
            videobox.hide();
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2016-03-16T19:04:29.527

我有一个类似的问题，用非常棒的编码器解决了。看看这篇文章。它可能很有用。[HTML5 视频控件不起作用](https://stackoverflow.com/questions/36039259/html5-video-controls-do-not-work/36040300?noredirect=1#comment59736178_36040300)

如果您使用的是 html 属性：

```
<video id="yourvideoID" poster="Pic.jpg" loop autoplay controls width="100%">
<source src="//example.website/InnovoThermometer.mp4" type="video/mp4">        
</video>
```

删除自动播放。

然后使用 jquery 来使用自动播放：

```
$(document).ready(function() { $("#bigvid3").get(0).play(); });
```

至于来源有多个位置： [html5 视频播放两次（音频加倍）与 JQuery .append()](https://stackoverflow.com/questions/5927573/html5-video-playing-twice-audio-doubled-with-jquery-append)

和

[使用 jQuery 在 Dom Load 上自动播放 HTML5 视频](https://stackoverflow.com/questions/15842308/auto-play-an-html5-video-on-dom-load-using-jquery)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-08T00:50:07.193

我的猜测是 showVideo 以某种方式被调用了两次，并创建了两个副本，其中一个即使在您调用另一个暂停后仍会继续播放。

在您的代码中，videoplayer var 不会引用您稍后使用 append 创建的视频标签，它将指向之前具有该 id 的任何内容，我假设当您清空盒子时它会被删除，但可能会留在内存中（并继续播放声音）。

只是我最好的猜测，但无论哪种方式，最好使用视频元素的 API 来设置源和其他参数，而不是清空盒子并重建标签。

```
videoplayer.src = video.Location;
videoplayer.autoplay = true;
// etc. 
```

此外，100% 不是宽度/高度属性的有效值。您需要使用 CSS 使视频拉伸以填充一个区域。

# r - 向量元素之和

> ID：11846620
> 
> 赞同：2
> 
> 时间：2012-08-07T13:01:06.653
> 
> 标签：r, vector, sum

是否可以避免使用 do 和 while 循环来计算向量的元素之和，直到出现最后一个正元素或最后一个负元素。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-07T13:06:59.810

尝试以下操作：

```
x <- 5:-5
# sum until last positive:
sum(x[1:max(which(x > 0))])

x <- -5:5
# sum until last negative:
sum(x[1:max(which(x < 0))]) 
```

解释：

`Which(x > 0)`给出 x 大于 0 的索引号向量。取其最大值给出最后一个这样的索引. 然后剩下的就是从 1 到这个元素的 x 相加。我希望这有帮助。

# r - xts(new.x, x.index) 中的错误：order.by 需要适当的基于时间的对象

> ID：11846621
> 
> 赞同：0
> 
> 时间：2012-08-07T13:01:09.253
> 
> 标签：r, finance, xts

我知道这篇文章中已经提出了这个问题（[xts error - order.by 需要一个适当的基于时间的对象](https://stackoverflow.com/questions/9757430/xts-error-order-by-requires-an-appropriate-time-based-object)），但问题似乎仍未解决。

我正在处理与此处相同的代码：[R：xts-order.by 中的错误](https://stackoverflow.com/questions/6596994/r-error-in-xts-order-by)，一切正常，计算完美，直到我重新启动计算机，我现在面临这个问题：

我没有生成代码，我在这本书上找到了它：[http ://www.amazon.com/Data-Mining-Learning-Knowledge-Discovery/dp/1439810184/ref=sr_1_1?ie=UTF8&qid=1344349381&sr=8 -1&keywords=数据+挖矿+with+r](https://rads.stackoverflow.com/amzn/click/com/1439810184)

这是可重现的示例：

```
# Packages needed :
library(xts)
library(TTR)
library(randomForest)
library(DMwR)

# Time Series :
myTimeSeries <-
  structure(c(2787, 2800, 2788, 2803, 2815, 2815, 2812, 2807, 2810, 
  2829, 2830, 2837, 2841, 2840, 2843, 2839, 2835, 2841, 2834, 2838, 
  2827, 2821, 2831, 2811, 2796, 2808, 2814, 2811, 2815, 2803, 2788, 
  2778, 2772, 2777, 2776, 2760, 2732, 2711, 2709, 2707, 2700, 2706, 
  2706, 2690, 2684, 2654, 2637, 2656, 2655, 2670, 2652, 2649, 2621, 
  2622, 2599, 2612, 2632, 2653, 2668, 2654, 2637, 2633, 2639, 2648, 
  2641, 2663, 2657, 2655, 2639, 2639, 2645, 2658, 2658, 2669, 2664, 
  2658, 2667, 2671, 2679, 2670, 2693, 2708, 2715, 2704, 2695, 2697, 
  2688, 2706, 2716, 2719, 2707, 2705, 2706, 2698, 2693, 2699, 2701, 
  2699, 2713, 2716, 2721, 2714, 2710, 2706, 2701, 2691, 2663, 2658, 
  2692, 2694, 2704, 2706, 2714, 2702, 2698, 2688, 2677, 2682, 2677, 
  2688, 2669, 2667, 2674, 2684, 2673, 2682, 2694, 2690, 2691, 2695, 
  2703, 2697, 2699, 2694, 2696, 2679, 2688, 2687, 2688, 2691, 2799, 
  2801, 2804, 2822, 2820, 2819, 2814, 2816, 2836, 2836, 2838, 2846, 
  2842, 2847, 2847, 2842, 2844, 2842, 2840, 2840, 2833, 2834, 2832, 
  2815, 2810, 2819, 2814, 2818, 2815, 2815, 2789, 2779, 2782, 2781, 
  2778, 2764, 2740, 2720, 2713, 2709, 2709, 2707, 2706, 2697, 2688, 
  2661, 2657, 2660, 2672, 2682, 2662, 2651, 2629, 2623, 2614, 2650, 
  2657, 2670, 2671, 2658, 2640, 2640, 2650, 2654, 2664, 2674, 2660, 
  2656, 2646, 2641, 2663, 2663, 2678, 2676, 2664, 2672, 2677, 2684, 
  2689, 2698, 2727, 2723, 2716, 2717, 2703, 2708, 2707, 2726, 2722, 
  2727, 2711, 2713, 2707, 2704, 2705, 2708, 2705, 2704, 2718, 2729, 
  2727, 2719, 2715, 2713, 2704, 2691, 2680, 2698, 2699, 2712, 2711, 
  2710, 2714, 2714, 2705, 2689, 2685, 2685, 2694, 2690, 2677, 2680, 
  2693, 2685, 2689, 2690, 2694, 2704, 2700, 2706, 2704, 2702, 2702, 
  2698, 2697, 2690, 2690, 2690, 2693, 2695, 2785, 2777, 2784, 2802, 
  2808, 2811, 2806, 2805, 2802, 2823, 2828, 2832, 2835, 2837, 2838, 
  2824, 2834, 2826, 2830, 2827, 2816, 2814, 2798, 2796, 2796, 2807, 
  2806, 2808, 2800, 2787, 2768, 2763, 2770, 2772, 2756, 2729, 2709, 
  2694, 2698, 2699, 2697, 2689, 2690, 2653, 2651, 2635, 2634, 2649, 
  2633, 2648, 2632, 2615, 2618, 2597, 2599, 2612, 2632, 2645, 2647, 
  2631, 2627, 2616, 2636, 2630, 2640, 2655, 2652, 2635, 2634, 2622, 
  2643, 2641, 2658, 2658, 2652, 2656, 2664, 2666, 2667, 2652, 2689, 
  2707, 2704, 2703, 2694, 2685, 2686, 2699, 2711, 2704, 2693, 2697, 
  2681, 2689, 2690, 2697, 2696, 2695, 2709, 2707, 2705, 2707, 2683, 
  2689, 2687, 2652, 2655, 2657, 2690, 2691, 2703, 2702, 2700, 2693, 
  2687, 2668, 2669, 2675, 2675, 2658, 2655, 2664, 2674, 2667, 2673, 
  2676, 2677, 2689, 2691, 2694, 2696, 2697, 2693, 2692, 2676, 2678, 
  2686, 2686, 2688, 2690, 2799, 2787, 2803, 2814, 2816, 2812, 2808, 
  2810, 2830, 2830, 2836, 2841, 2840, 2840, 2839, 2836, 2841, 2834, 
  2838, 2827, 2821, 2831, 2811, 2797, 2808, 2813, 2810, 2813, 2803, 
  2788, 2778, 2772, 2777, 2776, 2759, 2732, 2712, 2709, 2706, 2699, 
  2705, 2691, 2690, 2684, 2654, 2637, 2655, 2654, 2671, 2652, 2649, 
  2622, 2622, 2599, 2611, 2646, 2653, 2668, 2654, 2636, 2634, 2639, 
  2648, 2642, 2664, 2658, 2655, 2638, 2640, 2624, 2658, 2659, 2669, 
  2665, 2659, 2667, 2671, 2678, 2670, 2693, 2707, 2715, 2704, 2706, 
  2696, 2688, 2706, 2716, 2720, 2708, 2705, 2705, 2697, 2693, 2699, 
  2701, 2699, 2702, 2716, 2721, 2714, 2710, 2706, 2701, 2690, 2663, 
  2658, 2692, 2694, 2705, 2706, 2708, 2702, 2697, 2688, 2677, 2681, 
  2677, 2687, 2670, 2667, 2674, 2685, 2674, 2682, 2689, 2690, 2691, 
  2696, 2703, 2698, 2699, 2694, 2697, 2680, 2687, 2687, 2690, 2691, 
  2695), .Dim = c(140L, 4L), .Dimnames = list(NULL, c("price.Open", 
  "price.High", "price.Low", "price.Close")), index = structure(c(1265097599, 
  1265101199, 1265104796, 1265108399, 1265111999, 1265115597, 1265119198, 
  1265122799, 1265126399, 1265129992, 1265133591, 1265137199, 1265140797, 
  1265144399, 1265183999, 1265187599, 1265191199, 1265194799, 1265198398, 
  1265201999, 1265205599, 1265209199, 1265212799, 1265216399, 1265219999, 
  1265223580, 1265227194, 1265230799, 1265270399, 1265273999, 1265277595, 
  1265281198, 1265284798, 1265288397, 1265291998, 1265295599, 1265299199, 
  1265302799, 1265306399, 1265309997, 1265313586, 1265317199, 1265356799, 
  1265360399, 1265363999, 1265367599, 1265371199, 1265374799, 1265378399, 
  1265381999, 1265385599, 1265389199, 1265392798, 1265396399, 1265399984, 
  1265403599, 1265615999, 1265619593, 1265623195, 1265626785, 1265630396, 
  1265633999, 1265637599, 1265641199, 1265644799, 1265648398, 1265651994, 
  1265655599, 1265659198, 1265662799, 1265702399, 1265705999, 1265709599, 
  1265713199, 1265716798, 1265720398, 1265723995, 1265727598, 1265731199, 
  1265734799, 1265738399, 1265741975, 1265745594, 1265749199, 1265788799, 
  1265792399, 1265795999, 1265799599, 1265803197, 1265806799, 1265810399, 
  1265813999, 1265817599, 1265821196, 1265824795, 1265828380, 1265831990, 
  1265835598, 1265875199, 1265878799, 1265882399, 1265885999, 1265889599, 
  1265893199, 1265896797, 1265900399, 1265903998, 1265907586, 1265911187, 
  1265914799, 1265918356, 1265921999, 1265961596, 1265965199, 1265968798, 
  1265972399, 1265975998, 1265979599, 1265983196, 1265986798, 1265990399, 
  1265993997, 1265997598, 1266001197, 1266004796, 1266008399, 1266220799, 
  1266224399, 1266227999, 1266231598, 1266235187, 1266238799, 1266242399, 
  1266245996, 1266249598, 1266253195, 1266256799, 1266260385, 1266263956, 
  1266267599), tzone = "", tclass = c("POSIXct", "POSIXt")),
  tclass = c("POSIXct", "POSIXt"), tzone = "", class = c("xts", "zoo"),
  .indexCLASS = c("POSIXct", "POSIXt"), .indexTZ = "")

T.ind <- function(quotes,tgt.margin=0.005,n.days=5){   
  v <- apply(HLC(quotes),1,mean)    

  r <- matrix(NA,ncol=n.days,nrow=NROW(quotes))   
  for(x in 1:n.days) r[,x] <- Next(Delt(v,k=x),x)    

  x <- apply(r,1,function(x) sum(x[x > tgt.margin | x < -tgt.margin]))   
  if (is.xts(quotes)) xts(x,time(quotes)) else x 
} 

# Candle Chart and new indicator created above :
candleChart(last(myTimeSeries,"2 days"))
avgPrice<-function(p) apply(HLC(p),1,mean)
addAvgPrice<-newTA(FUN=avgPrice,col=1,legend="Average Price")
addT.indicator<-newTA(FUN=T.indicator,col="red",legend="Target")
addAvgPrice(on=1)
addT.indicator() 
```

和 R sessionInfo() ：

```
R version 2.15.0 (2012-03-30)
Platform: i386-pc-mingw32/i386 (32-bit)

locale:
[1] LC_COLLATE=French_France.1252  LC_CTYPE=French_France.1252    LC_MONETARY=French_France.1252 LC_NUMERIC=C                   LC_TIME=French_France.1252    

attached base packages:
[1] splines   grid      stats     graphics  grDevices utils     datasets  methods   base     

other attached packages:
 [1] boot_1.3-4           car_2.0-12           nnet_7.3-4           dynamo_0.1.3         fda_2.2.8            Matrix_1.0-6         Formula_1.1-0        gstat_1.0-13         lmtest_0.9-30        spatial_7.3-3        spacetime_0.7-1      sp_0.9-99            sm_2.2-4.1           tseries_0.10-28     
[15] quadprog_1.5-4       DMwR_0.2.3           lattice_0.20-6       cluster_1.14.2       abind_1.4-0          rpart_3.1-52         class_7.3-3          ROCR_1.0-4           gplots_2.11.0        KernSmooth_2.23-7    caTools_1.13         bitops_1.0-4.1       gdata_2.11.0         gtools_2.7.0        
[29] quantmod_0.3-17      Defaults_1.1-1       randomForest_4.6-6   fExtremes_2100.77    fTrading_2100.76     fGarch_2110.80.1     fBasics_2160.81      timeSeries_2160.94   TTR_0.21-1           fractal_1.1-1        scatterplot3d_0.3-33 akima_0.5-7          wmtsa_1.1-1          sapa_1.1-0          
[43] ifultools_1.1-2      MASS_7.3-17          splus2R_1.1-1        chron_2.3-42         RTAQ_0.2             timeDate_2160.95     xts_0.8-6            zoo_1.7-7            rattle_2.6.20       

loaded via a namespace (and not attached):
[1] stabledist_0.6-4 tools_2.15.0 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-07T13:56:50.550

你的`for`循环没有意义：

```
for (x in 1:n.periods) {
  r[, x] <- Next(Delt(v, k = x), x)
  x <- apply(r, 1, function(x) {sum(x[x > target | x < -target])})
} 
```

`x`是迭代器，*您*要分配给的对象，*调用*中匿名函数的参数，`apply`调用中要设置子集的*对象*，*以及*要比较的对象。我什至不想考虑这可能是如何工作的。`sum`*`target`*

 *简而言之，您需要更好的变量名称/定义。

如果您试图更改`x`（迭代器）的值，则不能。请参阅 的详细信息部分的第三段`?"for"`。

更新：

这是你说你正在使用的 Luis 代码中的函数。您在 for 循环周围添加了额外的大括号，然后在 for 循环中包含函数的倒数第二行...

```
T.ind <- function(quotes,tgt.margin=0.025,n.days=10) {
  v <- apply(HLC(quotes),1,mean)

  r <- matrix(NA,ncol=n.days,nrow=NROW(quotes))
  for(x in 1:n.days) r[,x] <- Next(Delt(v,k=x),x)

  x <- apply(r,1,function(x) sum(x[x > tgt.margin | x < -tgt.margin]))
  if (is.xts(quotes)) xts(x,time(quotes)) else x
} 
```*

# javascript - 我们如何动态地将值设置为 div

> ID：11846625
> 
> 赞同：0
> 
> 时间：2012-08-07T13:01:23.177
> 
> 标签：javascript

谁能告诉我剧院我如何将值设置为 DIV TAG DYNAMICALLY USING javascript

```
<div class="sD" style="width:55px;" id="CYearHold">
    Here i have to display Current year
</div>      
<select id="CYear" class="inputControl simple" style="width:55px;" name="currentYear" onChange="setYear1(this);">
</select> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T13:04:38.100

您可以使用innerHTML：

```
document.getElementById('CYearHold').innerHTML = 'something'; 
```

如果要将选定的年份放在 div 中，可以这样做：

```
var e = document.getElementById("CYear");
var strYear = e.options[e.selectedIndex].value;
document.getElementById('CYearHold').innerHTML = strYear; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T13:13:53.367

获取当前年份

```
select = document.getElementById("CYear");
year = select.options[select.selectedIndex].innerHTML; 
```

将其设置在您的 div 中

```
document.getElementById("div.sd").innerHTML=year; 
```

# c++ - 为什么没有分段元组构造？

> ID：11846634
> 
> 赞同：40
> 
> 时间：2012-08-07T13:01:48.180
> 
> 标签：c++, c++11, tuples, piecewise

标准模板`std::pair`和`std::array`是 的特例`std::tuple`，按理说它们应该有一组非常相似的功能。

然而，在这三者中唯一的是`std::pair`允许*分段构造*。也就是说，如果类型`T1`和`T2`可以由一组参数`a1, a2, ...`和构造`b1, b2, ...`，那么从道德上讲我们可以组成一对

```
"pair<T1, T2> p(a1, a2, ..., b1, b2, ...)" 
```

直接地。实际上，这被拼写成这样：

```
std::pair<T1, T2> p(std::piecewise_construct,
                    std::forward_as_tuple(a1, a2, ...),
                    std::forward_as_tuple(b1, b2, ...)); 
```

**问题：**为什么数组和元组不存在相同的分段可构造性？有什么深刻的原因，还是这是一个明显的遗漏？例如，最好有：

```
std::tuple<T1, T2, T3> t(std::piecewise_construct,
                         std::forward_as_tuple(a1, a2, ...),
                         std::forward_as_tuple(b1, b2, ...),
                         std::forward_as_tuple(c1, c2, ...)); 
```

有没有理由不能这样做？[*编辑*：还是我完全误解了分段构造的目的？]

（我确实有一种情况，我想用一个默认元素值初始化一个元组向量，我宁愿直接从参数构造它，而不用再次拼出每个元组元素类型。）

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2014-07-22T13:02:15.847

> **问题：**为什么数组和元组不存在相同的分段可构造性？

我的回忆是，添加分段构造`std::pair`仅出于一个原因：支持对元素的使用分配器构造，即如果它们支持使用分配器进行构造，则允许提供分配器并有条件地传递给元素（参见 [allocator .uses] 在标准中）。

在 C++0x 过程中的某个时刻，`std::pair`构造函数的数量是现在的两倍，每个构造函数都有一个相应的“分配器扩展”版本，采用一个`std::allocator_arg_t`和一个分配器参数，例如

```
template<class T, class U>
  struct pair {
    pair();
    pair(allocator_arg_t, const Alloc&);
    template<class TT, class UU>
      pair(TT&&, UU&&);
    template<class Alloc, class TT, class UU>
      pair(allocator_arg_t, const Alloc&, TT&&, UU&&);
    // etc. 
```

关于`std::pair`. 将分配器传递给元素的支持已从 删除`std::pair`并移至`std::scoped_allocator_adaptor`，它负责检测是否应使用分配器构造元素（请参阅[allocator.adaptor.members] 中`construct`采用指针的重载）。`std::pair`

分段构造的一个很好的结果是您可以对对元素进行“放置”样式初始化，允许成对的不可移动、不可复制的类型，但据我所知，这不是设计的目标。

所以`tuple`不支持它的原因是该功能是为了简化而发明的，`pair`它已经从 C++03 中的一个非常简单的类型膨胀到 C++0x 中的笑柄，但这样做`tuple`并不被认为是重要的（无论如何，它对于 C++11 来说是新的）。此外，扩展`scoped_allocator_adaptor`以处理任意数量元素的元组会使该适配器**更加**复杂。

至于，这是一个聚合类型（因为原因），所以如果不使其成为非聚合，就不可能`std::array`添加构造函数。`piecewise_construct_t`

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-08-07T14:18:34.397

我不确定为什么它不存在。以前，我认为考虑到当前的 varad 模板语法，实现是不可能的，但我意识到如果它被分解成碎片是可以完成的。

如果他们定义了这样的接口：

```
template<typename... T>
tuple(piecewise_construct, T&&... t); 
```

并要求参数是可以`std::get<N>`用来访问参数的东西（基本上是元组、对、数组）。必须进行额外的检查来验证给定的参数数量与元组中的元素数量之间是否存在不匹配。

编辑：自从我阅读它以来，这个问题一直困扰着我。我创建了以下类，它派生自`std::tuple`，并且没有数据成员，因此您可以将其分配给元组并且切片是无害的。当前版本要求元素是可移动或可复制的，因为它会创建一个临时的，然后将其插入到元组中。如果您是元组实施者，则应该可以消除该动作。

```
namespace detail
{
template<int ... N>
struct index {
    typedef index<N..., sizeof...(N)> next;
};
template<int N>
struct build_index {
    typedef typename build_index<N - 1>::type::next type;
};

template<>
struct build_index<0> {
    typedef index<> type;
};

template<typename T>
struct tuple_index {
    typedef typename build_index<
            std::tuple_size<typename std::remove_reference<T>::type>::value>::type type;

};
}
template<typename ... Elements>
class piecewise_tuple: public std::tuple<Elements...>
{
    typedef std::tuple<Elements...> base_type;

    template<int Index, typename ... Args, int ... N>
    static typename std::tuple_element<Index, base_type>::type 
    construct(std::tuple<Args...>&& args, detail::index<N...>)
    {
        typedef typename std::tuple_element<Index, base_type>::type result_type;
        return result_type(std::get<N>(std::move(args))...);
    }

    template<int ...N, typename ArgTuple>
    piecewise_tuple(detail::index<N...>, ArgTuple&& element_args)
    : base_type( construct<N>( std::get<N>(std::forward<ArgTuple>(element_args)),
                 typename detail::tuple_index< typename std::tuple_element<N, typename std::remove_reference<ArgTuple>::type >::type >::type() )...)
    {

    }

public:

    piecewise_tuple() = default;

    // For non-piecewise constructors, forward them
    template<typename... Args>
    piecewise_tuple(Args&&... args) : base_type(std::forward<Args>(args)...) {}

    template<typename... T>
    piecewise_tuple(std::piecewise_construct_t, T&&... args) :
    piecewise_tuple(typename detail::tuple_index<base_type>::type(),    
                    std::forward_as_tuple(std::forward<T>(args)...))
    {

    }

};

// Usage example
int main()
{
   int i = 5;
   std::unique_ptr<int> up(new int(0));

   piecewise_tuple<std::pair<int, int>, double, std::unique_ptr<int>, int& >
   p(std::piecewise_construct,
    std::forward_as_tuple(1,2),
    std::forward_as_tuple(4.3),
    std::forward_as_tuple(std::move(up)),
    std::forward_as_tuple(i));
   return 0;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-08-20T16:04:18.853

这是我对元组分段的实现（它还允许使用`omit`“关键字”省略值）。零开销（无复制/移动 - 直接构建）：

[http://coliru.stacked-crooked.com/a/6b3f9a5f843362e3](http://coliru.stacked-crooked.com/a/6b3f9a5f843362e3)

```
#include <tuple>
#include <utility>
#include <typeinfo>

struct Omit{} omit;

template <class Field, class ...Fields>
struct TupleHolder{
    using fieldT = Field;
    using nextT = TupleHolder<Fields...>;

    Field field;
    TupleHolder<Fields...> next;

    TupleHolder(){}

    template <class ...ValuesRef>
    TupleHolder(Omit, ValuesRef&& ... values)
            : next( std::forward<ValuesRef>(values)... )
    {}

    template <std::size_t ...ids, class FieldValue, class ...ValuesRef>
    TupleHolder(std::index_sequence<ids...>, FieldValue&& field, ValuesRef&& ... values)
            :
            field( std::get<ids>(std::forward<FieldValue>(field))... ),
            next( std::forward<ValuesRef>(values)... )

    {};

    template <class FieldValue, class ...ValuesRef>
    TupleHolder(FieldValue&& field, ValuesRef&& ... values)
            : TupleHolder(
            std::make_index_sequence<
                    std::tuple_size< std::decay_t<FieldValue> >::value
            >(),
            std::forward<FieldValue>(field),
            std::forward<ValuesRef>(values)...
    )
    {}

};

template <class Field>
struct TupleHolder<Field>{
    using fieldT = Field;
    Field field;    // actually last

    TupleHolder(){}
    TupleHolder(Omit){}

    template <std::size_t ...ids, class FieldValue>
    TupleHolder(std::index_sequence<ids...>, FieldValue&& field)
            :
            field( std::get<ids>(std::forward<FieldValue>(field))... )
    {}

    template <class FieldValue>
    TupleHolder(FieldValue&& field)
            : TupleHolder(
            std::make_index_sequence<
                    std::tuple_size< std::decay_t<FieldValue> >::value
            >(),
            std::forward<FieldValue>(field)
    )
    {}
};

template <int index, int target_index, class T>
struct GetLoop{
    using type = typename T::nextT;

    constexpr static decltype(auto) get(T& data) noexcept{
        return GetLoop<index+1, target_index, typename T::nextT>::get(
                data.next
        );
    }

    constexpr static decltype(auto) get(const T& data) noexcept{
        return GetLoop<index+1, target_index, typename T::nextT>::get(
                data.next
        );
    }

    constexpr static decltype(auto) get(T&& data) noexcept{
        return GetLoop<index+1, target_index, typename T::nextT>::get(
                std::forward<type>(data.next)
        );
    }
};

template <int target_index, class T>
struct GetLoop<target_index, target_index, T>{
    using type = typename T::fieldT;

    constexpr static type& get(T& data) noexcept{
        return data.field;
    }

    constexpr static const type& get(const T& data) noexcept{
        return data.field;
    }

    constexpr static type&& get(T&& data) noexcept{
        return std::forward<type>(data.field);
    }
};

// ----------------------------------------------------------------------------------
//                          F R O N T E N D
// ----------------------------------------------------------------------------------

template<class ...FieldTypes>
struct TuplePiecewise{
    using fieldsT = TupleHolder<FieldTypes...>;
    TupleHolder<FieldTypes...> data;

    TuplePiecewise(){}

   // allow copy constructor
   TuplePiecewise(TuplePiecewise& other)
            : TuplePiecewise(static_cast<const TuplePiecewise&>(other)) {}

    template <class ...ValuesRef>
    explicit constexpr TuplePiecewise(ValuesRef&& ... values) noexcept
            : data( std::forward<ValuesRef>(values)... ){}

    TuplePiecewise( const TuplePiecewise& other ) = default;
    TuplePiecewise( TuplePiecewise&& other ) = default;

    static constexpr const std::size_t size = sizeof...(FieldTypes);
};

template<int index, class ...FieldTypes>
constexpr decltype(auto) get(TuplePiecewise<FieldTypes...> &&list) noexcept {
    return GetLoop<0, index, typename TuplePiecewise<FieldTypes...>::fieldsT >::get(  std::move(list.data) );
}

template<int index, class ...FieldTypes>
constexpr decltype(auto) get(TuplePiecewise<FieldTypes...> &list) noexcept {
    return GetLoop<0, index, typename TuplePiecewise<FieldTypes...>::fieldsT >::get(  list.data );
}

template<int index, class ...FieldTypes>
constexpr decltype(auto) get(const TuplePiecewise<FieldTypes...> &list) noexcept {
    return GetLoop<0, index, typename TuplePiecewise<FieldTypes...>::fieldsT >::get(  list.data );
} 
```

用法：

```
TuplePiecewise< CopyTest, int&, string, int >
list (forward_as_tuple(45,63), forward_as_tuple(i), forward_as_tuple("hghhh"), omit );
decltype(auto) o = get<2>(list);
cout << o; 
```

元组内的元组（零开销）：

```
TuplePiecewise< string, TuplePiecewise<int,int> > list4(forward_as_tuple("RRR"), forward_as_tuple(forward_as_tuple(10), forward_as_tuple(20))); 
```

# php - PHP 会话问题

> ID：11846637
> 
> 赞同：0
> 
> 时间：2012-08-07T13:01:48.897
> 
> 标签：php, session

我正在构建一个使用会话来管理用户登录状态的 PHP 应用程序。我有一个问题。我在登录时开始一个会话和一些`$_SESSION`变量。然后将用户重定向到他/她的仪表板。该代码根据会话变量正确显示用户的信息，但如果单击访问他/她的个人资料的链接，则似乎会话结束。在我调用的每个页面上`session_start()`，然后检查是否设置了电子邮件会话变量。在我离开仪表板后，后者总是返回 false。我试图返回仪表板以查看这是否只是个人资料页面的问题，但仪表板检查正在设置的电子邮件也返回 false。谁能指出我正确的方向？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T13:15:44.080

我之前遇到过`register_globals`设置问题。

也尝试打印出`$_SESSION`变量

```
echo '<pre>';
var_dump($_SESSION);
echo '</pre>'; 
```

# javascript - 动态创建id

> ID：11846642
> 
> 赞同：0
> 
> 时间：2012-08-07T13:02:08.550
> 
> 标签：javascript, jquery, mootools

我正在动态创建一个元素，我将如何给它一个 id？

```
_addQuestionElement : function() {
        var el = new Element('div');
        el.addClass('dg-question-label');
        el.set('html', this._getCurrentQuestion().label);
        $(this.html.el).adopt(el);
    }, 
```

我正在使用 moo 工具和 jquery。

非常感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T13:12:03.373

您的代码看起来像 Mootools，这就是我的做法（稍微清理了您的代码）

```
_addQuestionElement: function() {
    var el = new Element('div', {
        'class': 'dg-question-label',
        html: this._getCurrentQuestion().label,
        id: 'yourId'
    });
    $(this.html.el).adopt(el);
} 
```

如果您多次生成相同的元素，则您的 id 每次都需要以某种方式唯一。

您也可以不使用该 el 变量（当然，除非它在您未包含的函数中进一步使用）

```
_addQuestionElement: function() {
    $(this.html.el).adopt(new Element('div', {
        'class': 'dg-question-label',
        html: this._getCurrentQuestion().label,
        id: 'yourId'
    }));
}​ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-07T13:04:13.033

只需通过以下方式分配 id（如果您使用 new Element() 创建了元素）：

```
var yourCustomId = "myId";
el.id = yourCustomId; 
```

或者使用 Mootools 属性设置功能：

```
var yourCustomId = "myId";
el.setProperty("id", yourCustomId); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-07T13:04:06.787

你可以这样给

```
var uniqueNumber = 1; //define uniqueNumber globally and increament at each element creation 
```

使用 javascript

```
el.id = 'idprefix' + uniqueNumber++) 
```

使用 jQuery

```
$(el).attr('id','idprefix' + uniqueNumber++); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-07T13:05:41.220

在 jQuery 中，要创建一个带有 ID 的 div，您可以执行以下操作：

```
function createDiv(id) {
    $("body").append("<div id=" + id + "></div>");
}

createDiv("myNewDivId"); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-07T13:08:17.800

`_addQuestionElement`，我认为您需要为每个问题元素生成一个唯一的 id。

```
变量 ID = 0;
var pfx = "id_";

_addQuestionElement：函数（）{
   ...
   el.attr("id", pfx + ++IDs);

```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-07T13:13:58.657

```
var el = $('<div />') .attr('id', myVal); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-08-07T15:34:08.380

无论如何， MooTools 创建或访问的所有元素都会自动获得一个唯一的`uid`（对于 DOM），从而使您不必自己保持状态（如果您想自动执行此操作）。

`console.log( Slick.uidOf( new Element('div') ) )`

所以...

```
_addQuestionElement: function() {
    var el = new Element('div.dg-question-label', {
        html:  this._getCurrentQuestion().label
    });

    // prefix number with uid-
    el.set('id', 'uid' + Slick.uidOf(el)).inject(this.html.el);    
}, 
```

通过组合元素构造函数给它一个 id，它是：

`var el = new Element('div#someid.dg-question-label')`或将其添加到传递给构造函数的属性中：

`new Element('div', { id: 'foo' })`

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-07-14T15:54:17.143

您可以使用 jQuery 插件[idfy](https://github.com/pigulla/jQuery.idfy)。

*完全披露*：我写了那个插件:)

# bash - sed 命令在行首添加空格

> ID：11846647
> 
> 赞同：1
> 
> 时间：2012-08-07T13:02:35.373
> 
> 标签：bash, sed

我正在尝试使用 sed 程序使用 bash 变量替换配置文件中的两行文本，行替换有效，但是行首有一个额外的空间。

我的命令如下：

```
replacement="computer_id = $server_ref" 
```

（其中 $server_ref 是用户输入的变量）

进而：

```
sed "/computer_id/c \ ${replacement}" -i slapos.cfg 
```

被替换的另一行仅使用相同的命令，只是更改了配置文件中的不同变量。

这种变化的输出看起来像

```
 computer_id = something 
```

什么时候应该

```
computer_id = something 
```

这会导致使用配置的程序崩溃，因为它不排除该空间。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-07T13:07:41.650

这样做可能会更好：

```
sed -i "s/^\\(computer_id = \\).*/\\1${server_ref}/" slapos.cfg 
```

如果额外的空白使读取配置文件的程序崩溃，那么读取配置文件的程序就不是很健壮。

# java - JSF自动完成忽略空值

> ID：11846648
> 
> 赞同：0
> 
> 时间：2012-08-07T13:02:38.033
> 
> 标签：java, jsf, autocomplete, null

我对 jsf 自动完成元素有疑问。我希望我的页面有一个自动完成元素，并且在用户从字段中选择一个值后，会自动创建另一个字段。自动完成字段的最大数量为 3，因此在第 3 个之后，第 4 个被禁用：

```
<h:outputLabel for="fieldsOfStudy" value="#{amsg.fieldsOfStudy}"/>

<p:outputPanel id="fieldsOfStudy" autoUpdate="true" layout="block">
     <ui:repeat value="#{cc.attrs.offer.fieldsOfStudy}" var="studyField" varStatus="status">

          <h:panelGroup id="studyField" layout="block">
              <h:outputText value="#{amsg.handleGetObject(enumHelper.toMessageKey(studyField))}"/>
              <p:commandLink action="#{cc.attrs.offer.removeFieldOfStudy(status.index)}" process="@this"
                       update="@([id$=fieldsOfStudyAutocomplete])" styleClass="ui-icon ui-icon-close"/>
          </h:panelGroup>

     </ui:repeat>
</p:outputPanel>

<h:message for="fieldsOfStudy" errorClass="error"/>

<h:panelGroup id="fieldsOfStudyAutocomplete">
     <p:autoComplete value="#{offerBean.selectedFieldOfStudy}" dropdown="true" required="#{empty cc.attrs.offer.fieldsOfStudy}"
                       completeMethod="#{offerBean.completeFieldsOfStudy}" disabled="#{cc.attrs.offer.fieldsOfStudy.size() &gt;= 3}"
                       itemValue="#{p}" var="p" itemLabel="#{amsg.handleGetObject(enumHelper.toMessageKey(p))}" styleClass="xLargeInput">
              <p:ajax event="itemSelect" process="@this" update="@this"/>
     </p:autoComplete>
</h:panelGroup> 
```

一切都像这样工作得很好，但问题是每次用户按下保存按钮时，如果“学习领域”列表中有 1 个从自动完成中选择的元素，列表中就会有另一个具有空值的元素。如果有 2 个选定的“研究领域”，第三个也将被创建，但它有一个空值。如果有 3 个选定的“研究领域”，则列表中不会有任何第 4 个元素。

有什么办法可以设置自动完成以忽略空字段？换句话说，如果用户没有从自动完成中选择任何内容，如何不将空值传递给 DTO？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T10:09:59.343

我找到了一个方法。在 bean 中设置值时，您可以轻松地放置这样的 if 语句：

```
public void setSelectedFieldOfStudy(FieldOfStudy selectedFieldOfStudy) {
    if (selectedFieldOfStudy != null) {
        this.emptyOffer.getFieldsOfStudy().add(selectedFieldOfStudy);
    }
} 
```

# objective-c - Objective-C 中的发送者

> ID：11846659
> 
> 赞同：1
> 
> 时间：2012-08-07T13:03:27.070
> 
> 标签：objective-c, oop

我是新手，所以这个问题可能听起来很傻。但是我怎么知道 Objective-C 中方法的发送者呢？在某些情况下，例如 Target/Action，sender 是显而易见的（一个 UIControl 对象）。但是 viewDidLoad 呢？

虽然方法的接收者通常是显而易见的，但发送者并非如此。例如，我必须阅读文档才能知道 dealloc 的发件人是运行时且仅运行时。有没有办法更容易地知道方法的发送者？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T13:07:50.293

如果您没有从呼叫者那里获得信息，那么这并不重要；这代表所有编程语言；方法随数据/对象一起提供，调用该方法无关紧要。这使得该方法更有用。

你没有说为什么知道发件人是谁很重要；如果只是好奇，那么您可以设置断点并检查调试器中的堆栈跟踪。

# javascript - 是否有任何函数可以帮助转义 jquery 选择器中包含的所有元字符？

> ID：11846661
> 
> 赞同：1
> 
> 时间：2012-08-07T13:03:35.287
> 
> 标签：javascript, jquery

直接来自 jquery docs：

如果您希望使用任何元字符（例如`!"#$%&'()*+,./:;<=>?@[\]^&a{|}~)`名称的文字部分，您必须使用两个反斜杠转义该字符：\。例如，如果您有一个带有 的元素`id="foo.bar"`，您可以使用选择器`$("#foo\\.bar")`。

我想知道有没有什么函数可以帮助我摆脱那些元字符？</p>

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-07T13:06:28.070

看看[这个](http://channel9.msdn.com/Events/aspConf/aspConf/Exterminating-Common-jQuery-Bugs?format=html5)关于 jQuery 错误的视频，作者有一个他写的函数，它使用正则表达式来正确地转义所有 jQuery 选择器@52:18。旁注：视频很棒，每个使用 jQuery 的开发人员都应该观看。

为后人抄录：

```
String.prototype.escapeSelector = function () {
    return this.replace(
        /([$%&()*+,./:;<=>?@\[\\\]^\{|}~])/g,
        '\\$1'
    );
}; 
```

你会这样使用它：

```
$('#' + 'foo.bar'.escapeSelector()); 
```

# c# - C# - 范围混淆

> ID：11846670
> 
> 赞同：0
> 
> 时间：2012-08-07T13:04:03.200
> 
> 标签：c#, scope

在我的代码中，我有 3 个部分，但是在 3 个部分中的 2 个部分中，代码几乎相同，我想知道是否有人可以帮助我正确地构造它们，这样我只需要在一个范围内编写一次，以便它可以两个部分都可以看到，所以我不需要那么多代码。（框架 3.5）

```
public static void FakeDriveInfo()
{
    List<DriveInfo> driveList = DriveInfo.GetDrives().Where(x => x.IsReady).ToList<DriveInfo>();

    Server server = new Server();

    Console.WriteLine();
    Console.ForegroundColor = ConsoleColor.White;
    Console.WriteLine("Server ID :      {0}", server.ServerID = 0);
    Console.WriteLine("Server Name :    {0}", server.ServerName = string.Concat(System.Environment.MachineName));
    Console.WriteLine();

    for (int i = 0; i < driveList.Count; i++)
    {
        ServerDrive serverDrives = new ServerDrive();

        Console.WriteLine("Drive Letter:    {0}", driveList[i].Name);
        Console.WriteLine("Total Size:      {0}", FormatBytes(driveList[i].TotalSize));
        Console.WriteLine("Volume Label:    {0}", driveList[i].VolumeLabel);
        Console.WriteLine("Free Space:      {0}", FormatBytes(driveList[i].TotalFreeSpace));
        Console.WriteLine("Drive Format:    {0}", driveList[i].DriveFormat);
        Console.ReadLine();
    }
}

public static void RealDriveInfo()
{
    //Create the server object - You will need create a list of the server objects.
    Server server = new Server();

    //Get all drives information
    List<DriveInfo> driveList = DriveInfo.GetDrives().Where(x => x.IsReady).ToList<DriveInfo>();

    //Insert information of one server - You will need get information of all servers
    server.ServerID = 0; //Here is necessery put PK key. I recommend doing the SQL server will automatically generate the PK.
    server.ServerName = string.Concat(System.Environment.MachineName);

    //Inserts information in the newServers object
    for (int i = 0; i < driveList.Count; i++)
    {
        ServerDrive serverDrives = new ServerDrive();

        //Put here all the information to obeject Server                
        serverDrives.DriveLetter = driveList[i].Name;
        serverDrives.TotalSpace = driveList[i].TotalSize;
        serverDrives.DriveLabel = driveList[i].VolumeLabel;
        serverDrives.FreeSpace = driveList[i].TotalFreeSpace;
        serverDrives.DriveType = driveList[i].DriveFormat;

        //      server.ListServerDrives.Add(serverDrives);
        server.ServerDrives.Add(serverDrives);
    }

    //Add the information to an SQL Database using Linq.
    DataClasses1DataContext db = new DataClasses1DataContext(@"sqlserver");
    //   db.Servers.InsertAllOnSubmit(server);
    db.Servers.InsertOnSubmit(server);
    db.SubmitChanges();
} 
```

我想要做的是将代码底部的 SQL to Linq 部分移到它自己的部分中。但要做到这一点，我也必须拥有整个`RealDriveInfo`部分..

我想做的另一部分是制作它，`List<DriveInfo> driveList = DriveInfo.GetDrives().Where(x=>x.IsReady).ToList<DriveInfo>();`以便 FakeDriveInfo 和 RealDriveInfo 可以看到它。

任何反馈将不胜感激，谢谢。

EDIT : At the moment I am calling two methods, FakeDriveInfo(); = Executing the console app and showing me the info it is going to submit. Name, Letter, Label, Server Name, ID, etc. RealDriveInfo(); = Connecting to the SQL Server and inserting the information into the two tables.

I want to have a third method WriteInToDB(); = The DB Writing code would be taken from the RealDriveInfo Method and moved here instead.

At the moment I have two methods that practically look identical due to the scope. I want the scope shifted so that I can put the List part of the code into the Main() Method and both FakeDriveInfo and RealDriveInfo can use it from there instead of having the code duplicated.

Hopefully this adds a bit more sense to it all :)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T13:35:53.107

Create a method:

```
public static List<DriveInfo> GetDrives {
    return DriveInfo.GetDrives().Where(x => x.IsReady).ToList<DriveInfo>();
} 
```

Call it in both places:

```
public static void FakeDriveInfo()
{
    List<DriveInfo> driveList = GetDrives();
    // ...
}

public static void RealDriveInfo()
{
    List<DriveInfo> driveList = GetDrives();
    // ....
} 
```

This is one of the basic **Refactorings**. It's called **Extract Method** and has been described by [Martin Fowler over here](http://www.refactoring.com/catalog/extractMethod.html).

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-07T13:31:54.487

I hope I captured your functionality correctly. 3 regions, create, output, persist. You can ofcourse take each section and create reusable methods. You can move the output section to the `ToString()` method of `Server`.

```
 #region create graph

        var server = new Server()
        {
            ServerID = 0,
            ServerName = string.Concat(Environment.MachineName),
            ServerDrives = DriveInfo.GetDrives()
                                    .Where(x => x.IsReady)
                                    .Select(di => new ServerDrive()
                                    {
                                        DriveLetter = di.Name,
                                        TotalSpace = di.TotalSize,
                                        DriveLabel = di.VolumeLabel,
                                        FreeSpace = di.TotalFreeSpace,
                                        DriveType = di.DriveFormat
                                    })
                                    .ToList()
        };

        #endregion

        #region output graph

        Console.WriteLine();
        Console.ForegroundColor = ConsoleColor.White;
        Console.WriteLine("Server ID :      {0}", server.ServerID);
        Console.WriteLine("Server Name :    {0}", server.ServerName);
        Console.WriteLine();

        server.ServerDrives.ForEach(sd =>
        {
            Console.WriteLine("Drive Letter:    {0}", sd.DriveLetter);
            Console.WriteLine("Total Size:      {0}", sd.TotalSpace);
            Console.WriteLine("Volume Label:    {0}", sd.DriveLabel);
            Console.WriteLine("Free Space:      {0}", sd.FreeSpace);
            Console.WriteLine("Drive Format:    {0}", sd.DriveType);
            Console.ReadLine();
        });

        #endregion

        #region persist graph

        DataClasses1DataContext db = new DataClasses1DataContext(@"sqlserver");
        db.Servers.InsertOnSubmit(server);
        db.SubmitChanges();

        #endregion 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-07T13:39:21.580

I've taken the approach of creating a new method, `ProcessDriveInfo`, which is called by your two original methods. These two methods fetched a list of drives, created a server, did something with the server, and did something for each drive. I moved the first two steps into the `ProcessDriveInfo`, and passed in actions for the last two steps.

The first action (i.e. method) does something with the server, and the second action does something for a single `driveInfo`.

n.b. I've "answered" the question in that it removes the duplication, but it could be argued that it is less readable.

```
 public Server ProcessDriveInfo(Action<Server> initialAction, Action<Server, DriveInfo> driveInfoAction)
    {
        var driveList = DriveInfo.GetDrives().Where(x => x.IsReady).ToList();
        var server = new Server();

        initialAction(server);
        driveList.ForEach(dl => driveInfoAction(server, dl));

        return server;
    }

    public void FakeDriveInfo()
    {
        ProcessDriveInfo(WriteServerToConsole, WriteDriveInfoToConsole);
    }

    private void WriteServerToConsole(Server server)
    {
        Console.WriteLine();
        Console.ForegroundColor = ConsoleColor.White;
        Console.WriteLine("Server ID :      {0}", server.ServerID = 0);
        Console.WriteLine("Server Name :    {0}", server.ServerName = string.Concat(System.Environment.MachineName));
        Console.WriteLine();
    }

    private void WriteDriveInfoToConsole(Server server, DriveInfo t)
    {
        Console.WriteLine("Drive Letter:    {0}", t.Name);
        Console.WriteLine("Total Size:      {0}", FormatBytes(t.TotalSize));
        Console.WriteLine("Volume Label:    {0}", t.VolumeLabel);
        Console.WriteLine("Free Space:      {0}", FormatBytes(t.TotalFreeSpace));
        Console.WriteLine("Drive Format:    {0}", t.DriveFormat);
        Console.ReadLine();
    }

    public void RealDriveInfo()
    {
        var server = ProcessDriveInfo(InitialiseServer, WriteDriveInfoToServer);

        //Add the information to an SQL Database using Linq.
        var db = new DataClasses1DataContext(@"sqlserver");
        //   db.Servers.InsertAllOnSubmit(server);
        db.Servers.InsertOnSubmit(server);
        db.SubmitChanges();
    }

    private static void InitialiseServer(Server server)
    {
        // Insert information of one server - You will need get information of all servers
        server.ServerID = 0;
        // Here is necessery put PK key. I recommend doing the SQL server will automatically generate the PK.
        server.ServerName = Environment.MachineName;
    }

    private static void WriteDriveInfoToServer(Server server, DriveInfo t)
    {
        var serverDrives = new ServerDrive
                               {
                                   DriveLetter = t.Name,
                                   TotalSpace = t.TotalSize,
                                   DriveLabel = t.VolumeLabel,
                                   FreeSpace = t.TotalFreeSpace,
                                   DriveType = t.DriveFormat
                               };

        server.ServerDrives.Add(serverDrives);
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-08T11:49:12.840

After pain-stakeingly realising, the answer was in method and class scope..

Just incase anyone would like to see what I did ::

```
public class Program
{
    List<DriveInfo> driveList = DriveInfo.GetDrives().Where(x => x.IsReady).ToList<DriveInfo>(); //Get all the drive info
    Server server = new Server();  //Create  the server object
    ServerDrive serverDrives = new ServerDrive();

    public void Main()
    {
        Program c = new Program();
        c.FakeDriveInfo();
        c.RealDriveInfo();
        c.WriteInToDB();
    }

    public static string FormatBytes(long bytes)
    {
        const int scale = 1024;
        string[] orders = new string[] { "GB", "MB", "KB", "Bytes" };
        long max = (long)Math.Pow(scale, orders.Length - 1);
        foreach (string order in orders)
        {
            if (bytes > max)
            {
                return string.Format("{0:##.##} {1}", Decimal.Divide(bytes, max), order);
            }

            max /= scale;
        }
        return "0 Bytes";
    }

    public void FakeDriveInfo()
        {

            Console.WriteLine();
            Console.ForegroundColor = ConsoleColor.White;
            Console.WriteLine("Server ID :      {0}", server.ServerID = 0);
            Console.WriteLine("Server Name :    {0}", server.ServerName = string.Concat(System.Environment.MachineName));
            Console.WriteLine();

            for (int i = 0; i < driveList.Count; i++)
            {

                Console.WriteLine("Drive Letter:    {0}", driveList[i].Name);
                Console.WriteLine("Total Size:      {0}", FormatBytes(driveList[i].TotalSize));
                Console.WriteLine("Volume Label:    {0}", driveList[i].VolumeLabel);
                Console.WriteLine("Free Space:      {0}", FormatBytes(driveList[i].TotalFreeSpace));
                Console.WriteLine("Drive Format:    {0}", driveList[i].DriveFormat);
                Console.ReadLine();
            }
        }

    public void RealDriveInfo()
         {

            //Insert information of one server - You will need get information of all servers
            server.ServerID = 0; //Here is necessery put PK key. I recommend doing the SQL server will automatically generate the PK.
            server.ServerName = string.Concat(System.Environment.MachineName);

            //Inserts information in the newServers object
            for (int i = 0; i < driveList.Count; i++)
            {

                //Put here all the information to obeject Server                
                serverDrives.DriveLetter = driveList[i].Name;
                serverDrives.TotalSpace = driveList[i].TotalSize;
                serverDrives.DriveLabel = driveList[i].VolumeLabel;
                serverDrives.FreeSpace = driveList[i].TotalFreeSpace;
                serverDrives.DriveType = driveList[i].DriveFormat;
                server.ServerDrives.Add(serverDrives);

            }
         }

    public void WriteInToDB()
    {
        //Add the information to an SQL Database using Linq.
        DataClasses1DataContext db = new DataClasses1DataContext(@"cspsqldev");
        //   db.Servers.InsertAllOnSubmit(server);
        db.Servers.InsertOnSubmit(server);
        db.SubmitChanges();
    } 
```

Simply by moving the parts I wanted to be seen by all methods, into the Class scope it now works.

Thanks for your feedback guys :)

# javascript - javascript 闭包和返回数组元素

> ID：11846676
> 
> 赞同：0
> 
> 时间：2012-08-07T13:04:25.117
> 
> 标签：javascript

我正在尝试学习 javascript 以使用 node.js，但显然并没有完全关闭。我尝试逐行读取文件，解析行并将结果放入数组并返回数组。这是我所拥有的（不太好用）：

```
var fs = require('fs'), Lazy = require('lazy');

function parseMyFile (filename) {
    var myArray= [];
    var lazy = new Lazy (fs.createReadStream(filename));

    lazy
        .lines
        .map(function(line){
            var parts = line.toString().split('|');

            var item = {
              bucket:   parts[1],
              uri:      parts[2].substring(2),
              token:    parts[0],
              fileDate: parts[3]
           };          

           myArray.push (item);
        });

     console.log(myArray);  // empty

         return myArray;
};

var myItems = parseMyFile ('Tokens.csv'); 
```

我确信这与闭包有关，只是不太明白。任何帮助，将不胜感激。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T13:11:33.663

这是一个**惰性列表**。它是异步行为的包装器。你试图在列表被填写之前检查它，所以它当然不起作用。

这个问题与闭包无关。这都是关于异步行为的。

我在那个惰性列表代码中看不到任何允许通用“完成时”回调的内容。

# javascript - 在 javascript 字符串中写入双引号

> ID：11846677
> 
> 赞同：0
> 
> 时间：2012-08-07T13:04:25.960
> 
> 标签：javascript, regex, string, replace, double-quotes

我正在使用一种方法来迭代地执行字符串中的替换。

```
function replaceAll(srcString, target, newContent){
  while (srcString.indexOf(target) != -1)
  srcString = srcString.replace(target,newContent);
  return srcString;
} 
```

但它不适用于我想要的目标文本，主要是因为我想不出如何正确编写该文本：我要删除的字面意思是`"\n"`, （包括逗号和引号），那又如何作为第二个参数传递以使其正常工作？

提前致谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-07T13:06:13.523

如果您对第一个参数使用双引号，则需要转义引号`replace`

`'some text "\n", more text'.replace("\"\n\",", 'new content');`

或者你可以做

`'some text "\n", more text'.replace('"\n",', 'new content');`

请注意，在第二个示例中，要替换的第一个参数使用单引号来表示字符串，因此您不需要转义双引号。

最后，另一种选择是在`replace`调用中使用正则表达式

`'some text "\n", more text "\n",'.replace(/"\n",/g, 'new content');`

最后的“g”使替换成为全部替换（全局）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-07T13:06:15.863

要删除`"\n"`，只需使用`String.replace`：

```
srcString.replace(/"\n"[,]/g, "") 
```

您可以使用正则表达式替换`/"\n"[,]/g`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-07T13:07:06.720

不需要这样的功能。replace 函数有一个额外的参数`g`，它替换所有出现而不是第一个：

```
'sometext\nanothertext'.replace(/\n/g,''); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-07T13:12:50.243

无论字符串中的引号是否被转义：

```
 var str = 'This string has a "\n", quoted newline.'; 
```

或者

```
var str = "This string has a \"\n\", escaped quoted newline."; 
```

解决方案是相同的（将 '!!!' 更改为您要替换`"\n",`的内容：

```
 str.replace(/"\n",/g,'!!!'); 
```

[**jsFiddle 演示**](http://jsfiddle.net/87eHu/)

# android - 谷歌地图航点更新

> ID：11846687
> 
> 赞同：1
> 
> 时间：2012-08-07T13:04:53.793
> 
> 标签：android, google-maps, android-mapview, android-maps

> **可能重复：**
> [谷歌地图输出=公里损坏？](https://stackoverflow.com/questions/11680872/google-maps-output-kml-broken)

我想通过使用坐标系来使用路线系统：

[https://maps.google.com/maps?saddr=39.951217,32.835406&daddr=39.908288,32.776308&sll=39.951217,32.835406&dirflg=w&hl=en&ie=UTF8&z=14&output=kml](https://maps.google.com/maps?saddr=39.951217,32.835406&daddr=39.908288,32.776308&sll=39.951217,32.835406&dirflg=w&hl=en&ie=UTF8&z=14&output=kml)

但谷歌已在 7 月 27 日进行了更新，我想我必须使用这种格式：

[http://maps.googleapis.com/maps/api/directions/json?origin=Boston,MA&destination=Concord,MA&waypoints=Charlestown,MA|列克星敦,MA&sensor=false](http://maps.googleapis.com/maps/api/directions/json?origin=Boston,MA&destination=Concord,MA&waypoints=Charlestown,MA|Lexington,MA&sensor=false)

有没有办法使用旧系统，因为我不认为通过给出地址我会得到精确的结果？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T13:07:25.680

这种通过解析 KML 文件从 Google 中提取 Google 路线的方式自 2012 年 7 月 27 日起不再可用（因为 Google 改变了检索 Google 路线的结构，现在您只能通过 JSON 或 XML 来获取），是时候将您的代码迁移到 JSON 而不是 KML。

请注意，起点和终点参数可以是纬度和经度，而无需使用航路点。

[在我自己的问题中查看](https://stackoverflow.com/a/11745316/1230123)答案。

# iis - 在 Windows Azure 网站中使用 SVG

> ID：11846689
> 
> 赞同：52
> 
> 时间：2012-08-07T13:05:05.523
> 
> 标签：iis, azure, svg, azure-web-app-service

有谁知道是否可以将 SVG mime 类型添加到 Windows Azure 网站？我尝试使用 web.config 文件，但这只会破坏我的网站。

这是当前预览的限制还是我遗漏了什么？

感谢您的帮助！

* * *

## 回答 #1

> 赞同：103
> 
> 时间：2012-08-07T13:21:17.973

您可以在 Windows Azure 网站（在 web.config 级别）中执行的操作非常有限，但[应该](http://blog.maartenballiauw.be/post/2012/07/09/Tweaking-Windows-Azure-Web-Sites.aspx)允许您在**staticContent**下添加 mime 类型：

```
<configuration>
   <system.webServer>
      <staticContent>
         <remove fileExtension=".svg"/>
         <mimeMap fileExtension=".svg" mimeType="image/svg+xml" />
      </staticContent>
   </system.webServer>
</configuration> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-07-18T12:09:55.723

像我这样的其他人可能已经到达这里，但由于其他相关文件类型而没有解决相同的问题，在我的情况下，我还需要`.eot`和`.woff`mime 映射。

```
<system.webServer>
    <staticContent>
        <remove fileExtension=".svg" />
        <remove fileExtension=".eot" />
        <remove fileExtension=".woff" />
        <mimeMap fileExtension=".svg" mimeType="image/svg+xml"  />
        <mimeMap fileExtension=".eot" mimeType="application/vnd.ms-fontobject" />
        <mimeMap fileExtension=".woff" mimeType="application/x-woff" />
    </staticContent>
</system.webServer> 
```

# c# - 如何创建链接以显示所有数据

> ID：11846691
> 
> 赞同：0
> 
> 时间：2012-08-07T13:05:10.893
> 
> 标签：c#, asp.net, html, visual-studio-2010, linq

我想做一个任务如下：将数据显示为链接，我一开始只显示 3 行，所以我 Take(3)。然后，我想要一个“显示全部”链接，当我点击它时，它将显示其余数据。

我不知道该怎么做。谁能帮我。提前致谢。

详细信息.aspx.cs

```
vertragsnehmer.DataSource = vertrag.Vertragsnehmer.Take(3).Select(x=> new { x.Id, Name = x.GetFullName(), Typ = x.GetType().Name });
vertragsnehmer.DataBind(); 
```

详细信息.aspx

```
<asp:Repeater ID="vertragsnehmer" runat="server">
   <ItemTemplate>
      <tr>
         <td>
             <asp:HyperLink NavigateUrl='<%# "~/Redirect.aspx?Id=" + Eval("Id") + "&Typ=" + Eval("Typ") %>' Text='<%# Eval("Name") %>' runat="server"></asp:HyperLink>  
         </td>
         <td>&nbsp;</td>
     </tr>
   </ItemTemplate> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T13:12:07.127

您可以使用 onCLick 事件中的所有内容进行 showAll 按钮回发并重新绑定网格吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T13:21:32.450

尝试这个：

在 apsx 页面上放置链接按钮：

```
<asp:LinkButton ID="ShowALL" runat="server" onclick="ShowAll_Click">Show All</asp:LinkButton> 
```

在 .cs 文件上：

```
protected void ShowAll_Click(object sender, EventArgs e)
{
  vertragsnehmer.DataSource = vertrag.Vertragsnehmer.Select(x=> new { x.Id, Name = x.GetFullName(), Typ = x.GetType().Name });
  vertragsnehmer.DataBind();

} 
```

# ruby-on-rails - 如何为多个角色建立关联？

> ID：11846695
> 
> 赞同：4
> 
> 时间：2012-08-07T13:05:26.527
> 
> 标签：ruby-on-rails

我正在构建一个具有多个角色的 Rails 应用程序。我不能对用户模型使用继承，因为每个角色都有非常不同的属性和行为（即 - 登录后不同的页面访问和能力）。所以我决定为每个角色（即客户、服务提供商、客户代表等）建立单独的模型。

这些协会将如何运作？我想出了以下内容，但角色类对我来说看起来很糟糕。如果用户可以拥有多个角色，那也不会那么糟糕，但由于他们只有一个角色，我必须在角色中编写一个自定义验证，以确保只选择一个角色。你们有什么感想？

```
class User < ActiveRecord::Base
  has_one :role
end

class Role < ActiveRecord::Base
  has_one :customer
  has_one :service_provider
  has_one :customer_representative
end

class Customer < ActiveRecord::Base
end

class ServiceProvider < ActiveRecord::Base
end

class CustomerRepresentative < ActiveRecord::Base
end 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-07T21:36:39.927

我认为这里的问题在于您的“角色”模型。角色实际上不是物理的东西，而是其他对象应该遵守的接口。因此，它是一种多态关系。

```
class User < ActiveRecord::Base
  belongs_to :role, polymorphic: true
end

class Customer < ActiveRecord::Base
  has_one :user, as: :role
end

class ServiceProvider < ActiveRecord::Base
  has_one :user, as: :role
end

class CustomerRepresentative < ActiveRecord::Base
  has_one :user, as: role
end 
```

然后您需要将`role_id`and添加`role_type`到您的用户表中。

我相信这应该得到你想要的。

乔

# shipping - 在 Shopify 中动态切换运费

> ID：11846696
> 
> 赞同：2
> 
> 时间：2012-08-07T13:05:28.587
> 
> 标签：shipping, shopify

我正在计划一个新的 Shopify 项目，该网站需要不同的运费，具体取决于邮政编码的邮政区域（例如 SE1、N7）。计划是在 Shopify 中手动添加不同的运输选项，然后是 AJAX GET /cart/shipping_rates.json，并通过将名称与邮政区域匹配来手动过滤到正确的运费。

但我的问题是 - 有没有办法将此运输方式作为选定选项结转到结帐，并从结帐中隐藏运输方式下拉菜单以防止他们选择不同的运输成本？

...或者，理想情况下，有没有办法让我通过 API 直接覆盖运费？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-06-02T10:04:25.083

我不知道任何可以促进这一点的板载功能。

但是有一个非常老套的解决方法，我用它来过滤结帐页面中的运费。

通过“Additional Google Analytics Javascript”字段，您可以在商店的每个页面（包括结帐）上偷偷插入一个 JS。在这里，您基本上可以随心所欲地操纵运费。

在您的情况下，代码必须知道 shipping_address 邮政编码。您可以尝试在第一个结帐页面上设置 cookie，然后在第二个页面读取相同的 cookie。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T19:53:39.603

不幸的是，Shopify 现有的结账功能无法做到这一点。

# php - 用空格定义类变量

> ID：11846697
> 
> 赞同：1
> 
> 时间：2012-08-07T13:05:28.890
> 
> 标签：php

我正在尝试创建一个对象名称之间有空格的类。这样我就可以像这样访问它们：

```
$object->{'Var name with spaces'}; 
```

我[在这里阅读了这个主题](https://stackoverflow.com/questions/6649410/mysql-php-return-object-value-with-space-in-key)，现在知道如何访问这些变量，但我不确定如何使用这些变量创建一个类。我已经尝试过这样的事情，但我无法让它工作：

```
class Hotel
{
    public ${'Var name with spaces'} = 'Some value'; // Fails
} 
```

我将如何在包含空格的类定义中创建变量？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-07T13:08:23.387

我很确定您必须在构造函数中执行此操作，因为类属性不需要运行时评估。

```
class Hotel {
    public function __construct() {
        $this->{'Var name with spaces'} = 'Some value';
    }
} 
```

[你可以在这个演示](http://viper-7.com/MzBxUc)中看到它的工作原理，但我认为这些评论已经充分说明了你为什么不应该这样做。`:)`

# jquery-ui - 如何使用 jquery 从 outerHTML 中获取值？

> ID：11846702
> 
> 赞同：1
> 
> 时间：2012-08-07T13:05:50.983
> 
> 标签：jquery-ui, jquery-selectors

我有一个要求，我需要使用 jquery 从 outerHTML 中获取值。下面是我的js函数

![在此处输入图像描述](../Images/d31cde4b2b8070779219916d6471a0aa.png)

event.outerHTML 将包含在哪里

```
 <INPUT id=307 onclick=addremoveartifact(this,4); CHECKED type=checkbox flag="false" stkrvwrqrd="" arttype="Other" docId="" ppArtId="1516" appBy="suman.sathyanandam@hp.com" status="Approved"> 
```

如何获取“状态”的值。有人请帮忙

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-24T19:10:46.417

我正在做的一个项目也有类似的问题。这就是我的建议：

`var status = $($(event)[0]).attr('status');`

# c# - 从域中获取 SPF 记录

> ID：11846705
> 
> 赞同：12
> 
> 时间：2012-08-07T13:06:02.873
> 
> 标签：c#, asp.net, spf

检查域上的 SPF 记录的方法有哪些？

有一个网站，我可以手动使用 - [http://www.mxtoolbox.com/SuperTool.aspx](http://www.mxtoolbox.com/SuperTool.aspx)

我如何通过 ASP.NET 和 C# 来实现？基本上，如果域支持自己的邮件 Web 服务器，我想验证/检查域上的 SPF 记录。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-08-09T13:03:26.157

我有同样的问题，并设法找到~~两个~~三个解决方案：

### 解决`nslookup`方案

您可以通过在命令行中键入以下命令来获取 SPF：

```
nslookup -type=TXT <hostname> 
```

您可以在 C# 中使用 自动执行此操作[`System.Diagonstics.Process`](http://msdn.microsoft.com/en-us/library/system.diagnostics.process.aspx)，如[本博文](http://www.robertsindall.co.uk/blog/getting-dns-txt-record-using-c-sharp/)中所述。

### DNS.NET 解析器项目

我找到了这篇关于 DNS 解析的[CodeProject 文章。](http://www.codeproject.com/Articles/23673/DNS-NET-Resolver-C)它带有演示项目。我运行该项目并得到以下结果`stackexchange.com`：

![DNS 挖掘截图](../Images/44e4bea29d626bf4cf6af18cf51ffd97.png)

***注意：***确保*QType*字段设置为*TXT*，然后再按*发送*按钮

以黄色突出显示的部分代表 SPF 记录。我还没有深入研究代码以了解它是如何完成的，但这似乎是上述解决方案的一个很好的替代`nslookup`方案。

### [更新] ARSoft.Tools.Net 项目

如果您只需要检查域是否支持邮件服务器，则可以使用[ARSoft.Tools.Net](http://arsofttoolsnet.codeplex.com/)库（也可作为[NuGet 包](http://nuget.org/packages/ARSoft.Tools.Net)提供）。

安装软件包后，我设法使用以下代码执行 SPF 检查：

```
var spfValidator = new ARSoft.Tools.Net.Spf.SpfValidator();

var mailIpAddress = IPAddress.Parse("X.X.X.X");
var domain = "example.com";
var senderAddress = "sender@example.com";

ARSoft.Tools.Net.Spf.SpfQualifier result = 
    spfValidator.CheckHost(mailIpAddress, domain, senderAddress); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-09T13:08:21.847

尽管 .NET 对网络有很多支持，包括进行主机名到地址映射，但它缺乏查询 DNS 的通用方法。

但是，您可以使用 P/Invoke 直接调用[DnsQuery 函数](http://msdn.microsoft.com/en-us/library/windows/desktop/ms682016%28v=vs.85%29.aspx)。API 有点麻烦，但根据您的要求创建正确的 P/Invoke 签名并非不可能。

SPF 记录在 DNS 中存储为 TXT 记录。您必须使用的相应结构是[DNS_TXT_DATA 结构](http://msdn.microsoft.com/en-us/library/windows/desktop/ms682109%28v=vs.85%29.aspx)。如果您可以找到[查询 MX 记录的示例，](http://www.pinvoke.net/default.aspx/dnsapi.dnsquery)您可以重用代码并`DNS_TYPE_TEXT`用于查询类型并将数据解组到`DNS_TXT_DATA`结构中。

或者您可以只使用以下代码：

```
using System.ComponentModel;
using System.Runtime.InteropServices;

public String DnsGetTxtRecord(String name) {
  const Int16 DNS_TYPE_TEXT = 0x0010;
  const Int32 DNS_QUERY_STANDARD = 0x00000000;
  const Int32 DNS_ERROR_RCODE_NAME_ERROR = 9003;
  const Int32 DNS_INFO_NO_RECORDS = 9501;
  var queryResultsSet = IntPtr.Zero;
  try {
    var dnsStatus = DnsQuery(
      name,
      DNS_TYPE_TEXT,
      DNS_QUERY_STANDARD,
      IntPtr.Zero,
      ref queryResultsSet,
      IntPtr.Zero
    );
    if (dnsStatus == DNS_ERROR_RCODE_NAME_ERROR || dnsStatus == DNS_INFO_NO_RECORDS)
      return null;
    if (dnsStatus != 0)
      throw new Win32Exception(dnsStatus);
    DnsRecordTxt dnsRecord;
    for (var pointer = queryResultsSet; pointer != IntPtr.Zero; pointer = dnsRecord.pNext) {
      dnsRecord = (DnsRecordTxt) Marshal.PtrToStructure(pointer, typeof(DnsRecordTxt));
      if (dnsRecord.wType == DNS_TYPE_TEXT) {
        var lines = new List<String>();
        var stringArrayPointer = pointer
          + Marshal.OffsetOf(typeof(DnsRecordTxt), "pStringArray").ToInt32();
        for (var i = 0; i < dnsRecord.dwStringCount; ++i) {
          var stringPointer = (IntPtr) Marshal.PtrToStructure(stringArrayPointer, typeof(IntPtr));
          lines.Add(Marshal.PtrToStringUni(stringPointer));
          stringArrayPointer += IntPtr.Size;
        }
        return String.Join(Environment.NewLine, lines);
      }
    }
    return null;
  }
  finally {
    const Int32 DnsFreeRecordList = 1;
    if (queryResultsSet != IntPtr.Zero)
      DnsRecordListFree(queryResultsSet, DnsFreeRecordList);
  }
}

[DllImport("Dnsapi.dll", EntryPoint = "DnsQuery_W", ExactSpelling = true, CharSet = CharSet.Unicode, SetLastError = true)]
static extern Int32 DnsQuery(String lpstrName, Int16 wType, Int32 options, IntPtr pExtra, ref IntPtr ppQueryResultsSet, IntPtr pReserved);

[DllImport("Dnsapi.dll")]
static extern void DnsRecordListFree(IntPtr pRecordList, Int32 freeType);

[StructLayout(LayoutKind.Sequential, CharSet = CharSet.Unicode)]
struct DnsRecordTxt {
  public IntPtr pNext;
  public String pName;
  public Int16 wType;
  public Int16 wDataLength;
  public Int32 flags;
  public Int32 dwTtl;
  public Int32 dwReserved;
  public Int32 dwStringCount;
  public String pStringArray;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-07-04T09:23:43.643

基于[Martin Liversage 的回答](https://stackoverflow.com/a/11884174/358336)，我添加了一些注释来解释发生了什么，并调整为返回多个记录（如果存在）。

我的示例还连接 TXT 记录中的多个字符串，而不是用换行符分隔。

`if (dnsRecord.wType == DNS_TYPE_TEXT)`考虑到约束在函数的参数中，我不知道该行是否真的有必要`DnsQuery`，但无论如何我还是从马丁的回答中保留了它。

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Runtime.InteropServices;
using System.Text;

namespace Util
{
    /// <summary>
    /// Based on https://stackoverflow.com/a/11884174 (Martin Liversage)
    /// </summary>
    class DnsInterop
    {
        private const short DNS_TYPE_TEXT = 0x0010;
        private const int DNS_QUERY_STANDARD = 0x00000000;
        private const int DNS_ERROR_RCODE_NAME_ERROR = 9003;
        private const int DNS_INFO_NO_RECORDS = 9501;

        public static IEnumerable<string> GetTxtRecords(string domain)
        {
            var results = new List<string>();
            var queryResultsSet = IntPtr.Zero;
            DnsRecordTxt dnsRecord;

            try
            {
                // get all text records
                // pointer to results is returned in queryResultsSet
                var dnsStatus = DnsQuery(
                  domain,
                  DNS_TYPE_TEXT,
                  DNS_QUERY_STANDARD,
                  IntPtr.Zero,
                  ref queryResultsSet,
                  IntPtr.Zero
                );

                // return null if no records or DNS lookup failed
                if (dnsStatus == DNS_ERROR_RCODE_NAME_ERROR
                    || dnsStatus == DNS_INFO_NO_RECORDS)
                {
                    return null;
                }

                // throw an exception if other non success code
                if (dnsStatus != 0)
                    throw new Win32Exception(dnsStatus);

                // step through each result
                for (
                    var pointer = queryResultsSet; 
                    pointer != IntPtr.Zero; 
                    pointer = dnsRecord.pNext)
                {
                    dnsRecord = (DnsRecordTxt)
                        Marshal.PtrToStructure(pointer, typeof(DnsRecordTxt));

                    if (dnsRecord.wType == DNS_TYPE_TEXT)
                    {
                        var builder = new StringBuilder();

                        // pointer to array of pointers
                        // to each string that makes up the record
                        var stringArrayPointer = pointer + Marshal.OffsetOf(
                            typeof(DnsRecordTxt), "pStringArray").ToInt32();

                        // concatenate multiple strings in the case of long records
                        for (var i = 0; i < dnsRecord.dwStringCount; ++i)
                        {
                            var stringPointer = (IntPtr)Marshal.PtrToStructure(
                                stringArrayPointer, typeof(IntPtr));

                            builder.Append(Marshal.PtrToStringUni(stringPointer));
                            stringArrayPointer += IntPtr.Size;
                        }

                        results.Add(builder.ToString());
                    }
                }
            }
            finally
            {
                if (queryResultsSet != IntPtr.Zero)
                {
                    DnsRecordListFree(queryResultsSet, 
                        (int)DNS_FREE_TYPE.DnsFreeRecordList);
                }
            }

            return results;
        }

        [DllImport("Dnsapi.dll", EntryPoint = "DnsQuery_W", 
            ExactSpelling = true, CharSet = CharSet.Unicode, 
            SetLastError = true)]
        static extern int DnsQuery(string lpstrName, short wType, int options, 
            IntPtr pExtra, ref IntPtr ppQueryResultsSet, IntPtr pReserved);

        [DllImport("Dnsapi.dll")]
        static extern void DnsRecordListFree(IntPtr pRecordList, int freeType);

        [StructLayout(LayoutKind.Sequential, CharSet = CharSet.Unicode)]
        struct DnsRecordTxt
        {
            public IntPtr pNext;
            public string pName;
            public short wType;
            public short wDataLength;
            public int flags;
            public int dwTtl;
            public int dwReserved;
            public int dwStringCount;
            public string pStringArray;
        }

        enum DNS_FREE_TYPE
        {
            DnsFreeFlat = 0,
            DnsFreeRecordList = 1,
            DnsFreeParsedMessageFields = 2
        }
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-07T17:01:24.980

你基本上需要做一个 DNS 请求，询问域的 MX/SPF 记录。有一些在 C# 中执行此操作的示例。[http://mailsystem.codeplex.com/](http://mailsystem.codeplex.com/)上有一个库，其中有一个`Validator`类`GetMxRecords`可以执行此操作，您可能会发现它很有用

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-02-25T01:25:20.850

值得一提的是——MailBee 的 .NET 对象也支持这一点。我之所以这么说，是因为我们已经拥有了这个组件，当我发现这个好东西已经融入我们所拥有的东西时，我正要实现其他东西。

[http://www.afterlogic.com/mailbee-net/docs/filter_spam_with_dns.html](http://www.afterlogic.com/mailbee-net/docs/filter_spam_with_dns.html)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-07-11T05:22:56.627

基于 DnsDig 项目，我创建了一个 DLL，可用于任何 .net（vb、c#、forms、web.等）项目

[https://devselz.com/software/devselz_dnsdig_dns-txt-etc-query-domain-register.zip](https://devselz.com/software/devselz_dnsdig_dns-txt-etc-query-domain-register.zip)

下载 DLL ，解压缩并添加为项目的引用（如果网站位于根/bin 文件夹中）：

### DnsDig.dll

### nunit.framework.dll

（共 126KB）

然后将此示例用作 ASP.Ne 网站（vb.net 代码）

```
Imports DnsDig
Imports Heijden.DNS
Partial Class lib_u_l_Default
    Inherits System.Web.UI.Page
    Public Resolver As Resolver
    Protected Sub Page_Load(sender As Object, e As EventArgs) Handles Me.Load
        Resolver = New Resolver
        Dim SW As New System.Diagnostics.Stopwatch
        SW.Start()
        Dim DNSResponse As Heijden.DNS.Response = Resolver.Query(Request.QueryString("d"), QType.SPF, QClass.ANY)
        SW.Stop()
        If DNSResponse.header.ANCOUNT > 0 Then
            For Each answerRR As AnswerRR In DNSResponse.Answers
                Response.Write("<br/>" & answerRR.ToString)
            Next
        End If
    End Sub

End Class 
```

结果： [https ://yourwebsiteusingabovedlls.com/anyplacewhereabovecode/?d=goodyes.com](https://yourwebsiteusingabovedlls.com/anyplacewhereabovecode/?d=goodyes.com)

将会写

goodyes.com。3535 IN TXT“google-site-verification=IMw-tL0VWgMJbtcRgt_bu5UaVwpbNb94dvcOSObooa4”goodyes.com。第3535章

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-09-02T07:50:51.927

我们尝试使用@martin-liversage 的答案，但在数百个域上运行一段时间后，它在一些内存问题上失败了。（也许有一些无效/其他类型的 DNS 记录？）所以我研究了这个案例中使用的确切的 WINAPI 函数和结构，并相应地编辑了解决方案。

*代码中包含指向 WINAPI 文档的链接。*

所以这是我们**改进的代码**，即使在我们的例子中也可以 100% 工作：

```
public String GetSpfRecord(String domain)
{
    // Definition of DNS params
    const Int16 DNS_TYPE_TXT = 0x0010;
    const Int32 DNS_QUERY_STANDARD = 0x00000001;
    const Int32 DNS_ERROR_RCODE_NAME_ERROR = 9003;
    const Int32 DNS_INFO_NO_RECORDS = 9501;

    DnsRecordA dnsRecord;
    var queryResultsSet = IntPtr.Zero;

    try
    {
        var dnsStatus = DnsQuery(
          domain,
          DNS_TYPE_TXT,
          DNS_QUERY_STANDARD,
          IntPtr.Zero,
          ref queryResultsSet,
          IntPtr.Zero
        );

        if (dnsStatus == DNS_ERROR_RCODE_NAME_ERROR || dnsStatus == DNS_INFO_NO_RECORDS)
            return null;

        if (dnsStatus != 0)
            throw new Win32Exception(dnsStatus);

        for (IntPtr pointer = queryResultsSet; pointer != IntPtr.Zero; pointer = dnsRecord.pNext)
        {
            // Copies data from memory (size of DnsRecordA) from adress pointer to new alocated memory and creates instance of pointer to this place.
            dnsRecord = (DnsRecordA)Marshal.PtrToStructure(pointer, typeof(DnsRecordA));

            // pokud se jedná o typ TXT
            if (dnsRecord.wType == DNS_TYPE_TXT)
            {
                // get pointer to informations in "Data" property (https://docs.microsoft.com/en-us/windows/win32/api/windns/ns-windns-dns_recorda)
                var dataPointer = pointer + Marshal.SizeOf(typeof(DnsRecordA));

                // Get the txtData
                var txtData = (DNS_TXT_DATAA)Marshal.PtrToStructure(dataPointer, typeof(DNS_TXT_DATAA));
                if (txtData.dwStringCount >= 1)
                {
                    string line = Marshal.PtrToStringUni(txtData.pStringArray[0]);

                    // only if record starts with "v=spf" (Getting only SPF records)
                    // Getting only first (here is always maximum of 1 record) and returning whole line
                    if (line.StartsWith("v=spf") && string.IsNullOrEmpty(result))
                    {
                        return line;
                    }
                }
            }
        }

        // no SPF record - returning null
        return null;
    }
    finally
    {
        const Int32 DnsFreeRecordList = 1;

        // always release the memory alocated for list of dns records
        if (queryResultsSet != IntPtr.Zero)
            DnsRecordListFree(queryResultsSet, DnsFreeRecordList);
    }
}

// https://docs.microsoft.com/en-us/windows/win32/api/windns/nf-windns-dnsquery_a
[DllImport("Dnsapi.dll", EntryPoint = "DnsQuery_W", ExactSpelling = true, CharSet = CharSet.Unicode, SetLastError = true)]
static extern Int32 DnsQuery(String lpstrName, Int16 wType, Int32 options, IntPtr pExtra, ref IntPtr ppQueryResultsSet, IntPtr pReserved);

// https://docs.microsoft.com/en-us/windows/win32/api/windns/nf-windns-dnsrecordlistfree
[DllImport("Dnsapi.dll")]
static extern void DnsRecordListFree(IntPtr pRecordList, Int32 freeType);

// https://docs.microsoft.com/en-us/windows/win32/api/windns/ns-windns-dns_recorda
[StructLayout(LayoutKind.Sequential, CharSet = CharSet.Unicode)]
struct DnsRecordA
{
    public IntPtr pNext;
    public String pName;
    public Int16 wType;
    public Int16 wDataLength;
    public Int32 flags;
    public Int32 dwTtl;
    public Int32 dwReserved;

    // Commented, because i'm getting this value dynamicaly (it can also be another structure type which might cause some problems)
    //public DNS_TXT_DATA Data;
}

// https://docs.microsoft.com/en-us/windows/win32/api/windns/ns-windns-dns_txt_dataa
[StructLayout(LayoutKind.Sequential)]
struct DNS_TXT_DATAA
{
    /// DWORD->unsigned int
    public uint dwStringCount;

    /// PSTR[1]
    [MarshalAs(UnmanagedType.ByValArray, SizeConst = 1, ArraySubType = UnmanagedType.SysUInt)]
    internal IntPtr[] pStringArray;
} 
```

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2014-07-09T10:55:59.293

有趣的是所有网站都有这个错误

SPF 不是 TXT

您可以有没有 SPF 的 txt 记录和没有 TXT 的 SPF，因此 TXT 查找不会显示 SPF

# java - 无法从 Guava MultiMap 获取密钥

> ID：11846710
> 
> 赞同：2
> 
> 时间：2012-08-07T13:06:13.173
> 
> 标签：java, guava

我有以下代码：

```
@Override
public boolean putAll(Multimap<? extends Index, ? extends V> multimap) {
    for (Index index : multimap.keySet()) {
        putAll(index, multimap.get(index));
    }
} 
```

`multimap.get(index)`编译错误在哪里：

> Multimap 类型中的方法 get(capture#5-of ? extends Index) 不适用于参数 (Index)

我是否偶然发现了一个著名的仿制药陷阱？我不知道问题出在哪里。

旁注：我正在构建一个扩展 SetMultiMap 的类，因为我有特定的键匹配要求

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T13:11:07.790

假设你输入一个`Multimap<FooIndex, Integer>`. 然后你有：

```
Multimap<FooIndex, Integer> map = ...;
Index plainIndex = ...;
Integer value = map.get(plainIndex); 
```

这是一个类型失败，因为`Multimap.get`需要一个`Key`. 我怀疑你需要使这个方法通用：

```
@Override
public <Key extends Index> boolean putAll(Multimap<Key, ? extends V> multimap) {
    for (Key index : multimap.keySet()) {
        putAll(index, multimap.get(index));
    }
} 
```

（我还没有测试过，但这更有意义，IMO。）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-07T13:13:35.660

get方法的签名是

```
get(K key) 
```

您的 Multimap 声明为

```
Multimap<? extends Index, ? extends V> multimap 
```

所以你不知道密钥的类型。你知道它是或者它 extends `Index`，但你不知道它的类型。所以传递一个实例`Index`是无效的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-07T20:19:42.657

您是否尝试仅使用常规`Multimap`和`Equivalence.wrap`-ing 您的密钥？

# javascript - 突出显示与 perl 正则表达式匹配的 HTML 部分 - 在服务器端 perl 或客户端 javascript 中执行吗？

> ID：11846711
> 
> 赞同：0
> 
> 时间：2012-08-07T13:06:13.730
> 
> 标签：javascript, html, regex, perl, web-applications

Perl CGI 应用程序正在提供搜索功能。应用程序将匹配的片段写入 HTML 页面。现在我想突出显示片段中的匹配项。我可以使用类似的东西

```
s/($searchregex)/<span class="highlight">$1<\/span>/gi 
```

突出比赛。这适用于纯文本情况，但有时会因包含自身 HTML 标记的片段而中断，例如链接或带有引用的图像。在失败的情况下，上述替换是通过在 href 值中插入 span 标签来破坏 HTML 链接。

目前我看到了三种可能的解决方案：

1.  编写一个不替换 html 标记内匹配项的正则表达式，例如在 <> 内。我不知道如何为这种情况编写替换正则表达式。是否有允许这种替换的 perl 正则表达式以及它的外观如何？

2.  编写一个正则表达式来替换上述替换的所有错误替换。这将修复 href 中错误的 span 标签。

3.  使用 Javascript 突出显示生成的 DOM 树中的匹配项。使用 jQuery 的可能方式在[带有匹配文本的高亮 html](https://stackoverflow.com/questions/11187532/highlight-html-with-matching-text)中进行了概述。即使是普通的 Javascript 也可能足够[JavaScript 的 Regular Expression Flavor](http://www.regular-expressions.info/javascript.html)了。也有特殊的 jQuery 插件用于高亮[高亮正则表达式](http://beatgates.blogspot.de/2011/07/extend-jqueryhighlight-to-highlight.html)。我是 Javascript 的新手，因此也欢迎提供更多建议。

最好的解决方案是什么？最好的方法是 1\. - 但这似乎是不可能的。所以剩下的问题是：在服务器端以丑陋的方式完成工作，或者在客户端引入 Javascript 以更简洁的方式解决问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T13:39:38.007

您可以在服务器端使用 HTML 解析器，这是您正在做的工作的正确工具。

或者您可以按照您所说的使用 javascript 来完成，我更喜欢我自己，因为它更通用，并且可以带来更多的交互性，尽管您可能会面临与您现在所面临的类似的问题（只是您已经移动了它到客户端）。

这实际上是一个比最初看起来更复杂的问题。没有更多信息，就不可能尝试提出更好的解决方案。

一个好的解决方案是遍历 DOM 树并匹配每个文本节点，但是您会遇到一个问题，即您不会匹配跨越多个文本节点的文本 - 例如“John *the Con* Johnson”将不匹配搜索“ John the Con”，因为它们将位于不同的节点中。这对您来说可能是也可能不是问题，具体取决于您的用例。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-07T14:45:31.257

在 perl 中带有前瞻模式

```
s/($searchregex)(?=[^>]*<)/<span class="highlight">$1<\/span>/gi 
```

或更短

```
s/$searchregex(?=[^>]*<)/<span class="highlight">$&<\/span>/gi 
```

但也许您需要读取字符串中的整个文件或将输入记录分隔符 ($/) 更改为 '<'，因为如果正则表达式后跟除 '>' 和 ' 之外的任何字符序列，则它与模式匹配<' 因为将不匹配 if ($/="\n" 并且在模式和下一个 '<' 之间有一个换行符。

# symfony - 何时在 Symfony2 中使用实体管理器

> ID：11846718
> 
> 赞同：15
> 
> 时间：2012-08-07T13:06:29.283
> 
> 标签：symfony, doctrine-orm, entitymanager

目前我正在学习如何使用 Symfony2。我到了他们解释如何使用 Doctrine 的地步。

在给出的示例中，他们有时使用实体管理器：

```
$em = $this->getDoctrine()->getEntityManager();
$products = $em->getRepository('AcmeStoreBundle:Product')
        ->findAllOrderedByName(); 
```

在其他示例中，不使用实体管理器：

```
$product = $this->getDoctrine()
        ->getRepository('AcmeStoreBundle:Product')
        ->find($id); 
```

所以我实际上尝试了第一个示例而没有获取实体管理器：

```
$repository = $this->getDoctrine()
        ->getRepository('AcmeStoreBundle:Product');
$products = $repository->findAllOrderedByName(); 
```

并得到相同的结果。

那么我什么时候真正需要实体管理器，什么时候可以一次访问存储库？

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-08-07T13:40:34.483

查看等于 的一个实例。注册表提供：[`Controller`](http://api.symfony.com/2.0/Symfony/Bundle/FrameworkBundle/Controller/Controller.html) `getDoctrine()``$this->get('doctrine')`[`Symfony\Bundle\DoctrineBundle\Registry`](http://api.symfony.com/2.0/Symfony/Bundle/DoctrineBundle/Registry.html)

*   `getEntityManager()`返回[`Doctrine\ORM\EntityManager`](http://www.doctrine-project.org/api/orm/2.1/class-Doctrine.ORM.EntityManager.html)，这反过来提供`getRepository()`
*   `getRepository()`返回[`Doctrine\ORM\EntityRepository`](http://www.doctrine-project.org/api/orm/2.1/class-Doctrine.ORM.EntityRepository.html)

因此，`$this->getDoctrine()->getRepository()`等于`$this->getDoctrine()->getEntityManager()->getRepository()`。

当您想要保留或删除实体时，实体管理器很有用：

```
$em = $this->getDoctrine()->getEntityManager();

$em->persist($myEntity);
$em->flush(); 
```

如果您只是获取数据，则只能获取存储库：

```
$repository = $this->getDoctrine()->getRepository('AcmeStoreBundle:Product');
$product    = $repository->find(1); 
```

或者更好的是，如果您使用的是自定义存储库，请封装`getRepository()`一个控制器函数，因为您可以从 IDE 获得自动完成功能：

```
/**
 * @return \Acme\HelloBundle\Repository\ProductRepository
 */
protected function getProductRepository()
{
    return $this->getDoctrine()->getRepository('AcmeHelloBundle:Product');
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-07T13:16:32.563

我认为这`getDoctrine()->getRepository()`只是`getDoctrine()->getEntityManager()->getRepository()`. 没有检查源代码，但对我来说听起来很合理。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-08-30T16:04:38.287

如果您计划对实体管理器执行多项操作（例如获取存储库、持久化实体、刷新等），则首先获取实体管理器并将其存储在变量中。否则，您可以从实体管理器获取存储库，并在一行中调用存储库类上所需的任何方法。两种方式都会奏效。这只是编码风格和您的需求的问题。

# objective-c - Cocoa xcode 4.3 全局变量

> ID：11846721
> 
> 赞同：2
> 
> 时间：2012-08-07T13:06:39.297
> 
> 标签：objective-c, cocoa-touch, xcode4.3

我正在使用全局变量从一个视图控制器访问值到另一个，我面临的问题是在 viewdidload 下调用全局变量它将返回 null，但是如果我在 (ibaction) 下使用全局变量，它可以正常工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T13:14:35.377

问题很可能与评估顺序有关：有问题的变量在 时尚未初始化`viewDidLoad:`，但在执行操作时，初始化已完成。

您可以尝试通过从稍后发生的另一个回调访问您的全局来调整时间`viewDidLoad:`，但为了完全避免这个问题，您可以使用全局单例而不是全局变量。创建一个单独的类，在其中保留全局状态，在需要使用它的地方包含其标题，并调用其类方法来访问全局变量，如下所示：

标题：

```
@interface Globals
+(MyGlobal*)global;
@end 
```

执行：

```
@implementation Globals
+(MyGlobal*)global {
    static MyGlobal* _global;
    static dispatch_once_t onceToken;
    dispatch_once(&onceToken, ^{
        _global = [[MyGlobal alloc] init];
    });
    return _global;
}
@end 
```

用法：

```
MyGlobal *g = [Globals global]; 
```

# scala - Scala文件读取添加空格

> ID：11846723
> 
> 赞同：0
> 
> 时间：2012-08-07T13:06:45.023
> 
> 标签：scala, io

我正在使用 scala 读取文件

```
def fileToString(that:String):String= {
    var x:String="" 
    for(line <- Source.fromFile(that).getLines){ 
        x += line + "\n"
    }
  x
  } 
```

这适用于 scala 文件。但是在 txt 文件中，它会在每个字符之间添加空格。例如。我读了一个 .txt 文件并得到了这个：

C 所有事件日志 (E rror $ , E rr N um , E rr O bj )

' 结束错误处理块。

结束订阅

我读入了程序的scala文件，它正常出现

编辑：这似乎与编码有关。当我将其更改为 UTF-16 时，它会读取 .txt 文件，而不是 scala 文件。有没有办法让它普遍工作？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-07T13:46:05.457

不，它不适用于所有文件。要读取/解释文件/数据，您需要知道格式/编码，除非您将其视为二进制 blob。

以通常的 unicode 格式 (UTF-8) 保存所有文件，或者在读取文件时指定编码。
`FromFile`采用隐式编解码器，您可以显式传递它。

```
io.Source.fromFile("123.txt")(io.Codec("UTF-16")) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-07T13:49:07.497

通常，如果您从文件中读取，则需要知道其编码才能正确读取字符。我不确定 Scala 假定的默认编码是什么，可能是 UTF8，但您可以将 a 传递`Codec`给`fromFile`，或将编码指定为字符串：

```
io.Source.fromFile("file.txt", "utf-8") 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-07T13:49:48.317

很难确定，但听起来这两个文件是用不同的编码编写的。在任何 Unix 系统（包括 Mac）上，您都可以使用该命令`od`查看文件中的实际字节。

UTF-8 是大多数系统上普通文本文件的标准，但如果您混合使用 UTF-8 和 UTF-16，则必须知道对哪些文件使用哪种编码并正确指定编码。

或者在创建文件时要更加小心，以确保它们都采用相同的格式。

# windows - Windows 服务无法访问共享位置

> ID：11846725
> 
> 赞同：3
> 
> 时间：2012-08-07T13:06:50.080
> 
> 标签：windows, service, windows-services, shared

我有一个使用本地帐户运行的 Windows 服务，比如说**"servername\User1"**。当我在服务器上使用此用户登录时，我可以打开一个共享位置，比如说**"\SharedServer\Dir1"**。但是当服务运行时，它无法访问相同的位置并出现错误

> “登录失败：未知用户名或密码错误。”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T14:41:14.273

尝试在正常工作的用户帐户中运行该服务：

[http://www.coretechnologies.com/WindowsServices/FAQ.html#AppNotWorkingFromService](http://www.coretechnologies.com/WindowsServices/FAQ.html#AppNotWorkingFromService)

# actionscript-3 - StageText / NativeText 的 as3 动态名称

> ID：11846728
> 
> 赞同：0
> 
> 时间：2012-08-07T13:07:01.667
> 
> 标签：actionscript-3

有谁知道如何在我尝试构建动态界面而不是硬编码时为 NativeText / StageText 动态分配名称，任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T15:16:59.893

您应该保留对动态创建的 StageText 实例的引用，因为您无法通过查询显示列表来获取它（因为它不在显示列表中）。你可以有 StageText 的向量

```
var m_vStageTextInstances:Vector<StageText>; 
```

然后在你将迭代这个向量之后。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T13:58:25.267

这是一些示例代码，可以在 iterate-function 中执行您想要的操作

```
public class IterationTest extends Sprite {

    public function IterationTest() {
        createObjects();
        iterate();
    }

    private function createObjects():void {
        for (var i:int = 0; i < 1000; i++) {
            addChild(new TextField());
            addChild(new MovieClip());
        }
    }

    private function iterate():void {
        var numTextObjects:int = 0;
        for (var i:int = 0; i < this.numChildren; i++) {
            var child:DisplayObject = getChildAt(i);
            if (child is TextField) {
                //do your stuff here
            }
        }
    }

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-25T13:12:32.703

如果有人试图用 NativeText 一个 StageText 包装器返回文本值。他们需要编辑；

[https://github.com/cantrell/StageTextExample/blob/master/src/NativeText.as](https://github.com/cantrell/StageTextExample/blob/master/src/NativeText.as)

添加公共获取功能 -

```
public function get text():String {
return this.st.text;
} 
```

那么您可以正常返回 NativeText 值 -

```
nt.text 
```

# android - Android Web 驱动程序在为示例googletest 代码运行 android 测试时为 android sdk 2.3 和 2.2 提供错误

> ID：11846732
> 
> 赞同：0
> 
> 时间：2012-08-07T13:07:14.210
> 
> 标签：android, eclipse, selenium, sdk, webdriver

我正在尝试运行简单的代码以在模拟器中打开谷歌，输入一些键并提交它。但是每次测试都失败了。我已经使用 SDK 2.3 和 SDK 2.2 进行了尝试。对于这两个 SDK，我在相同的代码中遇到了不同的错误。

SDK 2.3 的错误是：测试运行失败：检测运行因“进程崩溃”而失败。SDK 2.2 的错误是：java.lang.NosuchmethodError（此错误发生在 driver.sendkeys()）。

以下是 SDK 2.2 的错误日志：

```
 08-07 17:51:02.767: E/AndroidRuntime(3556): FATAL EXCEPTION: main
08-07 17:51:02.767: E/AndroidRuntime(3556): java.lang.NoSuchMethodError: android.view.MotionEvent.setSource
08-07 17:51:02.767: E/AndroidRuntime(3556):     at org.openqa.selenium.android.EventSender$1.run(EventSender.java:55)
08-07 17:51:02.767: E/AndroidRuntime(3556):     at android.os.Handler.handleCallback(Handler.java:587)
08-07 17:51:02.767: E/AndroidRuntime(3556):     at android.os.Handler.dispatchMessage(Handler.java:92)
08-07 17:51:02.767: E/AndroidRuntime(3556):     at android.os.Looper.loop(Looper.java:123)
08-07 17:51:02.767: E/AndroidRuntime(3556):     at android.app.ActivityThread.main(ActivityThread.java:4627)
08-07 17:51:02.767: E/AndroidRuntime(3556):     at java.lang.reflect.Method.invokeNative(Native Method)
08-07 17:51:02.767: E/AndroidRuntime(3556):     at java.lang.reflect.Method.invoke(Method.java:521)
08-07 17:51:02.767: E/AndroidRuntime(3556):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
08-07 17:51:02.767: E/AndroidRuntime(3556):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
08-07 17:51:02.767: E/AndroidRuntime(3556):     at dalvik.system.NativeStart.main(Native Method) 
```

以下是打开google的示例代码：

```
public void testGoogleWorks() 
    {

        System.out.println("in test google works");
        driver.get("http://www.google.com");
        System.out.println("after driver . get");
        WebElement searchBox = driver.findElement(By.name("q"));

        System.out.println("after search box");

        searchBox.sendKeys("Cheese!");
        System.out.println("after sendkeys");
        searchBox.submit();
        System.out.println("after submit");

        String title = driver.getTitle();
        System.out.println("after driver . gettitle");
        assertTrue("Got title: " + title, title.contains("Google"));
        assertTrue(driver.findElements(By.name("Testing")).size() > 1);
} 
```

谢谢 。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T13:12:14.207

蜂窝中引入了 MotionEvent.setSource 方法。我相信您正在以前的 sdks 上运行 3.0 + 的示例。

# windows-phone-7 - 空列表框消息 wp7

> ID：11846745
> 
> 赞同：0
> 
> 时间：2012-08-07T13:07:42.050
> 
> 标签：windows-phone-7, listbox, message

我一直在研究，并且一直在尝试不同的方式在我的列表框为空时显示消息。

已经按照这篇文章 [WPF Listbox - Empty List Display Message](https://stackoverflow.com/questions/2446903/wpf-listbox-empty-list-display-message)

没有运气在我的视图模型和我的文本块锁中添加​​了代码，如下所示：

```
<TextBlock Text="{Binding EmptyMessage}" Visibility="{Binding Converter={StaticResource VisibilityConverter}, Path=allToDoItemsListBox.Count}" FontSize="{StaticResource PhoneFontSizeExtraLarge}" IsHitTestVisible="False" /> 
```

还制作了一个看起来像这样的转换器：

公共类 VisibilityConverter : IValueConverter {

```
public object Convert(object value, Type targetType, object parameter, CultureInfo culture)
{
    if (value != null && (int)value > 0)
        return "Collapsed";
    else
        return "Visible";
}

public object ConvertBack(object value, Type targetType, object parameter, CultureInfo culture)
{
    throw new NotImplementedException();
} 
```

}

我错过了什么，应该可以工作，但不能。已将 app.xanl 中的转换器添加为资源

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T16:01:31.880

我不认为返回的值是“折叠”或“可见”。不应该是 System.Windows.Collapsed 和 System.Windows.Visible 吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-07T16:38:23.667

试试这个代码：

```
 public object Convert(object Value, Type TargetType, object Parameter, CultureInfo Culture)
    {
        if (value != null && (int)value > 0)
        {
            return Visibility.Collapsed;
        }
        return Visibility.Visible;
    }

    public object ConvertBack(object value, Type targetType, object parameter, CultureInfo culture)
    {
         throw new NotImplementedException();
    } 
```

为此，请检查您是否有以下使用声明

```
using System.Windows; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-08T09:19:21.727

您需要将 textBlock Visibility 绑定到如下属性：

```
public System.Windows.Visibilty EmptyMessageVisibility
{
    get { return itemList.Count == 0 ? Visibility.Collapsed : Visibility.Visible; }
} 
```

# javascript - 使用带有 RequireJS 的条件注释仅加载 IE7/8 jQuery

> ID：11846747
> 
> 赞同：3
> 
> 时间：2012-08-07T13:07:47.833
> 
> 标签：javascript, jquery, html, requirejs, require

我在我的项目中使用 Require JS，它正在加载 jQuery 和其他一些与整个站点和所有浏览器相关的 JavaScript 文件。

但是，我需要在 Internet Explorer 7 和 8 上使用一些条件 jQuery，我尝试将它放在页面的头部，脚本似乎无法找到 jQuery，我假设这是因为它是在 jQuery 之前加载。

```
 <script data-main="/@ViewBag.ScriptsFolder/main" src="/scripts/require.js" type="text/javascript"></script>
    <!--[if (gte IE 6)&(lte IE 8)]>
        <script type="text/javascript" src="/Scripts/ie.js"></script>
    <![endif]--> 
```

有没有办法纠正这个问题？我也在尝试以这种方式加载 Selectivizr，但由于同样的问题而无法正常工作。

谢谢

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-08-07T13:13:32.610

您可以在元素上使用条件 IE 特定类`html`，然后检查它并在现有`main`脚本中加载 IE 依赖项。因此，文档的顶部看起来像：

```
<!--[if lt IE 7]> <html class="ie lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
<!--[if IE 7]>    <html class="ie lt-ie9 lt-ie8"> <![endif]-->
<!--[if IE 8]>    <html class="ie lt-ie9"> <![endif]-->
<!--[if gt IE 8]> <html class="ie"> <![endif]-->
<html> 
```

然后在里面`main.js`，你可以使用：

```
if ($('html.lt-ie9').size()) {
    require(['/Scripts/ie'], function(ieScript) {
        // ... do stuff
    });
} 
```

您不能使用您描述的方法，因为 require.js 会查找单个`data-main`属性来指定“入口点” - 任何后续调用`require`都应在 Javascript 中完成。

# jakarta-mail - Javamail：如何获取自特定日期以来修改的消息

> ID：11846749
> 
> 赞同：1
> 
> 时间：2012-08-07T13:07:59.170
> 
> 标签：jakarta-mail

我正在编写一个从 IMAP 服务器同步电子邮件（仅限收件箱）的应用程序。为此，我正在使用 javamail，但我遇到了性能问题。当我想刷新我的电子邮件时，我会在收件箱中获取所有消息，这需要几分钟。:( 所以我只想获取自上次刷新电子邮件以来修改过的消息。我发现了如何获取自某个日期以来接收或发送的消息，但我想做的略有不同。可以更改非常旧的消息的状态（未读到已读）。在这种情况下，修改日期是最近的，但接收或发送日期是旧的。

任何的想法 ？

问候，昆汀

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T17:43:15.513

您无法更改旧邮件的内容，但可以更改标志。您可以获取所有消息的所有标志并将它们与标志的缓存副本进行比较。（有 IMAP 扩展对此有所帮助，但许多 IMAP 服务器不支持它们，JavaMail 也不支持它们。）

使用 Folder.fetch 方法在一个操作中获取所有标志，然后遍历 Message 对象并比较标志。

# c# - 如何在 C# 中处理 DLL 文件

> ID：11846750
> 
> 赞同：1
> 
> 时间：2012-08-07T13:08:09.187
> 
> 标签：c#, dll

我想通过使用应用程序旁边的 dll 文件或使用操作系统的库来改进我的程序。

那么如何在 C# 中将类打包到**dll文件中呢？**

以及如何从**dll**文件中调用方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-07T13:11:44.630

> 那么如何在 C# 中将类打包到 dll 文件中呢？

从 Visual Studio 项目模板创建一个**库项目。**当您编译它时，您将在输出文件夹（可能是**调试**文件夹）中获得 dll。

> 如何从 dll 文件中调用方法？

在您要使用*库*(dll) 并使用其类的位置添加此项目的引用。不要忘记导入**命名空间**以更轻松。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-07T13:11:48.237

如果要制作自己的托管 DLL，可以在 Visual Studio 中制作*类库项目。*这将创建一个您可以从其他项目中引用的 DLL。

如果要从托管代码调用 DLL 中的本机代码，可以使用[DllImport](http://msdn.microsoft.com/en-us/library/system.runtime.interopservices.dllimportattribute.aspx)属性。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-07T13:14:04.420

使用 Visual Studio 类库项目类型：

请参阅[MSDN](http://msdn.microsoft.com/en-us/library/d11h6832%28v=vs.71%29.aspx)。

# php - PHP删除字符串中的多次出现并合并剩余的

> ID：11846757
> 
> 赞同：2
> 
> 时间：2012-08-07T13:08:41.330
> 
> 标签：php, regex

我有一组从谷歌草图导出的坐标，带有我一直试图用正则表达式去除的额外绒毛。我认为将 3D 绘图从例如 SketchUp 快速获取到画布和 .xsi 文件中真的很有趣。是一个变量中的多个数据集实例：

```
$str = 'SI_NurbsCurve Edge1 {
        1、
        0,
        0,
        4、
        0,0,1,1,
        2、
        870.243,1229.35,143.395,1
        927.537,1323.53,103.842,1
        }

        SI_NurbsCurve Edge2 {
        1、
        0,
        0,
        4、
        0,0,1,1,
        2、
        899.54,1217.88,116.255,1
        870.243,1229.35,143.395,1
        }';
```

我尝试使用此正则表达式从多个实例中删除除坐标数据之外的所有内容：

```
$reg = '#SI_NurbsCurve 边[^"]* {
        1、
        0,
        0,
        4、
        0,0,1,1,
        2,#';  
$rep="";
$str=preg_replace($reg,$rep,$str);
```

但是，这只会回显在字符串中找到的最后一个坐标集，在此示例中仍保留以下内容：

```
899.54,1217.88,116.255,1
870.243,1229.35,143.395,1
```

除此之外，我试图去掉每行坐标上出现的最后一个数字“1”，所以整个例子最终看起来像这样：

```
870.243,1229.35,143.395,
927.537,1323.53,103.842,

899.54,1217.88,116.255,
870.243,1229.35,143.395,
```

我将非常感谢您的时间和专业知识！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T13:17:16.030

我认为您正在寻找 $str = substr($str,0,-1)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T13:20:55.390

您的第一个问题（仅获取最后一个值）可​​能是由以下原因引起的：

```
#SI_NurbsCurve Edge[^"]* 
```

您将需要一个非贪婪的正则表达式，或者如果后面的值`Edge`只是数字：

```
#SI_NurbsCurve Edge[0-9]* 
```

之后，您可以截取剩余每一行的最后两个字符。

您可能还需要转义`{`字符：`\{`并在每组之后考虑`}`和空格/换行符，因此第一行应该类似于：

```
$str = '#(\}\s+)?SI_NurbsCurve Edge[0-9]* \{ 
```

[请参阅Codepad](http://codepad.org/C0T0DTZL)上的工作示例（每行的最后 2 个字符除外...）。

为了摆脱`,1`每行末尾的剩余部分，您可以使用以下命令更改`preg_replace`行：

```
$str=preg_replace(array($reg, '#,1\r#'),array($rep,"\r"),$str); 
```

这至少适用于[键盘](http://codepad.org/inUBXLrW)，但可能取决于换行符的编码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-07T13:50:58.167

无论如何，这不是一个完美的解决方案，但是，使用可用的测试数据，以下将返回所需的输出：

```
$str = 'SI_NurbsCurve Edge1 {
        1,
        0,
        0,
        4,
        0,0,1,1,
        2,
        870.243,1229.35,143.395,1
        927.537,1323.53,103.842,1
        }

        SI_NurbsCurve Edge2 {
        1,
        0,
        0,
        4,
        0,0,1,1,
        2,
        899.54,1217.88,116.255,1
        870.243,1229.35,143.395,1
        }';

function stripExtra( $inElem ){
  return !preg_match( '/^(?:(?:[0124](?:,0,1,1)?\,)|(?:\})|(?:SI_NurbsCurve Edge.+ \{))$/' , $inElem );
}

$arr2 = array_filter( array_map( 'trim' , explode( "\n" , preg_replace( "/\,1\s+\n/" , ",\n" , $str ) ) ) , 'stripExtra' );

var_dump( $arr2 );

# Returns
# array(5) {
#   [7]=>
#   string(25) "870.243,1229.35,143.395,"
#   [8]=>
#   string(25) "927.537,1323.53,103.842,"
#   [10]=>
#   string(0) ""
#   [18]=>
#   string(24) "899.54,1217.88,116.255,"
#   [19]=>
#   string(25) "870.243,1229.35,143.395,"
# } 
```

遍历解决方案...

```
function stripExtra( $inElem ){
  return !preg_match( '/^(?:(?:[0124](?:,0,1,1)?\,)|(?:\})|(?:SI_NurbsCurve Edge.+ \{))$/' , $inElem );
} 
```

此函数将匹配呈现的字符串。根据提供的字符串是否与特定模式匹配，它将返回 true 或 false。这将允许我们在稍后阶段删除不需要的行。此处使用的模式将匹配以下行：

```
SI_NurbsCurve Edge1 {
0,
1,
2,
4,
0,0,1,1,
} 
```

注意：仅当这些行没有以一个或多个空格为前缀时，它才会匹配这些行。但是，由于您的最终输出已经剥离了所有空间，所以这没什么大不了的。

因此，为了可读性，我将在这里将我的单行奇迹转换为多行，以便更好地解释它。

```
$arr2 = preg_replace( "/1\s+\n/" , "\n" , $str ); 
```

这将根据要求仅用逗号替换行末尾的任何“，1”实例。

```
$arr2 = explode( "\n" , $arr2 ); 
```

这会根据换行符拆分字符串，创建一个数组，每行形成一个新元素。

```
$arr2 = array_map( 'trim' , $arr2 ); 
```

这使用`array_map()`函数 ( [PHP Documentation](http://au2.php.net/manual/en/function.array-map.php) ) 将`trim()`函数 ( [PHP Documentation](http://au2.php.net/manual/en/function.trim.php) ) 应用于每个元素，从每个元素中删除任何前导和/或尾随空格。

```
$arr2 = array_filter( $arr2 , 'stripExtra' ); 
```

还记得我们上面写的那个函数吗？现在我们遍历数组，并测试每个元素。如果它们与上述行不匹配，则将它们保留在数组中。如果它们与上面不需要的行匹配，则从数组中删除该元素。

# java - MyEclipse 10 未启动“Java 已启动但返回退出代码 13”

> ID：11846758
> 
> 赞同：9
> 
> 时间：2012-08-07T13:08:45.143
> 
> 标签：java, eclipse, myeclipse

我看到很少有主题具有相同的例外，但解决方案对我来说不起作用。

我的规格：

*   视窗 7 64 位
*   已安装 Java 1.6.0_33 64 位（已设置路径变量）
*   安装了 MyEclipse 10

几天前它工作得很好。现在我想启动它，然后它显示以下错误。可悲的是，由于我的声誉低下，我无法在此处附上图片。但出现错误“Java 已启动但返回退出代码 13”

这是 myeclipse.ini 的内容

```
#utf8 (do not remove)
-clean
-startup
../Common/plugins/org.eclipse.equinox.launcher_1.2.0.v20110502.jar
--launcher.library
../Common/plugins/org.eclipse.equinox.launcher.i18n.win32.win32.x86_64_4.2.0.v201201111650
-install
k:\devel\Genuitec\MyEclipse 10
-vm
c:\java\bin\javaw.exe
-configuration
k:\devel\Genuitec\MyEclipse 10\configuration
-vmargs
-Xmx768m
-XX:MaxPermSize=256m
-XX:ReservedCodeCacheSize=96m
-Dosgi.nls.warnings=ignore
-Dfile.encoding=UTF8 
```

自从上次工作以来我所做的唯一一件事就是安装了 python 并更新了路径变量。我读到路径变量可能是原因，但我检查了它并没有看到任何不好的东西。有人知道可能是什么原因。

谢谢

*   路径变量的内容：C:\Program Files (x86)\ImageMagick-6.7.5-Q16;c:\Program Files (x86)\ImageMagick-6.7.5-Q16;%SystemRoot%\system32;%SystemRoot%; %SystemRoot%\System32\Wbem;C:\Program Files (x86)\Common Files\Roxio Shared\DLLShared\;C:\Program Files (x86)\Common Files\Roxio Shared\9.0\DLLShared\;%SYSTEMROOT%\ System32\WindowsPowerShell\v1.0\;%ANT_HOME%\bin;C:\Program Files (x86)\gs\gs8.70\bin;C:\Program Files (x86)\gs\gs8.70\lib;% M2%;%JAVA_HOME%\bin;C:\Program Files (x86)\gs\gs8.70\bin;C:\Program Files (x86)\gs\gs8.70\lib;C:\Program Files (x86 )\TC UP\PLUGINS\Library;C:\Program Files (x86)\gs\gs8.70\bin;C:\Program Files (x86)\gs\gs8.70\lib;C:\Program Files (x86 )\Common Files\Adobe\AGL;C:\Program Files\SlikSvn\bin\;C:\strawberry\c\bin;C:\strawberry\perl\site\bin;C:\strawberry\perl\bin;C ：\Program Files (x86)\Microsoft SQL Server\100\Tools\Binn\VSShell\Common7\IDE\;C:\Program Files (x86)\Microsoft SQL Server\100\Tools\Binn\;C:\Program Files\ Microsoft SQL Server\100\Tools\Binn\;C:\Program Files (x86)\Microsoft SQL Server\100\DTS\Binn\;C:\Program Files\TortoiseSVN\bin;%GROOVY_HOME%/bin;%PYTHON_HOME% ;%PYTHON_HOME%/脚本

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-08-07T13:17:31.090

## 这个错误的原因是什么？

从**[这里](http://www.ehow.com/how_4784069_terminated-exit-code-error-eclipse.html)**：

> 当您尝试使用错误版本的 Java 虚拟机 (JVM) 启动 Eclipse 时会导致此错误。

## 可能的修复/问题

### 1.

尝试使用硬编码的 64 位 JVM 启动 eclipse，如下所示：

`eclipse -vm C:/java/jre/bin/server/jvm.dll`

* * *

### 2.

**从[这里](https://stackoverflow.com/questions/4587518/eclipse-error-on-startup-windows-7)** 从 eclipse.ini 中删除 launcher.library。从 eclipse.ini 中删除以下位：

```
--launcher.library
../Common/plugins/org.eclipse.equinox.launcher.i18n.win32.win32.x86_64_4.2.0.v201201111650 
```

* * *

### 3.

**从[这里](https://stackoverflow.com/questions/4587518/eclipse-error-on-startup-windows-7)** 尝试使用 jvm.dll 的完整路径而不是 exe 文件，如下所示：

```
-vm 
C:/Prog/Java/jdk1.6.0_21/jre/bin/server/jvm.dll 
```

* * *

### 4.

使用带有 x64 JDK 的 x86 Eclipse 时出现**[问题。](https://stackoverflow.com/questions/3781124/eclipse-helios-not-launching)**
**修复**只需在 eclipse.ini 文件中指向与 Eclipse 具有相同架构的 JDK，例如：

```
-vm
c:/java/jdk1.6.0_25_x86/jre/bin/javaw.exe 
```

请通过键入来检查路径中的 JDK 版本`java -version`。在带有 JDK 1.6.0_30 的 64 位 Windows 7 上，我得到以下输出：

![在此处输入图像描述](../Images/18db2979a369971b0c96f854212ac165.png)

注意`64-Bit Server VM`最后一行的。你明白了吗？

请参阅此页面： [无法启动 Eclipse - Java 已启动但返回退出代码 = 13](https://stackoverflow.com/questions/11461607/cant-start-eclipse-java-was-started-but-returned-exit-code-13)

* * *

### 5.

如果您的 Eclipse 文件夹位于带有空格的路径上，请尝试将其移动到简单路径，例如直接移动到 c:/eclipse。

从这里：[https ://stackoverflow.com/a/8843744/325742](https://stackoverflow.com/a/8843744/325742)

> 我的桌面上有 eclipse 文件夹，它给了我这个错误
> 
> 我只是将 eclipse 文件夹移动到程序文件中，它可以工作，不知道为什么

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-03-01T19:08:06.427

以下两件事对我有用。

1）确保您的 JAVA_HOME 路径设置为 JDK，并且 JAVA_HOME 包含在 PATH 中。

2) 在 STS.ini 中添加以下前两行代码。它应该如下所示。

```
-vm
C:\Program Files\Java\jdk1.7.0_03\bin\javaw.exe
-startup
plugins/org.eclipse.equinox.launcher_1.3.0.v20130327-1440.jar
--launcher.library
plugins/org.eclipse.equinox.launcher.win32.win32.x86_1.1.200.v20130807-1835-product
org.eclipse.epp.package.standard.product
--launcher.defaultAction
openFile
--launcher.XXMaxPermSize
256M
-showsplash
org.eclipse.platform
--launcher.XXMaxPermSize
256m
--launcher.defaultAction
openFile
--launcher.appendVmargs
-vmargs
-Dosgi.requiredJavaVersion=1.6
-Xms40m
-Xmx512m 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-23T12:25:29.413

我遇到了同样的问题。在我下载并安装 jre7 并将 -vm 指向 eclipse.ini -vm C:\Program Files\Java\jre7\bin\javaw.exe 中的 javaw.exe 后，我的问题得到了解决

我有 Windows 7。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-09-14T17:44:56.057

我尝试更改 .ini 文件中的参数，但仍然无效。只需安装 32 位和 64 位版本的 JDK 即可。

注意：我的eclipse文件夹在c:/

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-11-30T06:42:02.713

[**这**](https://stackoverflow.com/questions/4945178/cannot-run-eclipse-jvm-terminated-exit-code-13) 确实对我有用。有一种方法可以配置 eclipse.ini 文件，这在您将在该帖子中看到的第一个答案中进行了解释。

阿尔伯特。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-03-25T20:37:20.240

我通过为“EclipseLuna”下载正确的 JDK 解决了这个问题。希望它有所帮助：[JDK_FROM_ORACLE](http://www.oracle.com/technetwork/java/javase/downloads/index.html)

然后您必须选择适合您机器的版本。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-04-20T13:39:41.483

我有

```
"Java was started but returned exit code 13" error code; 
```

对我来说，这个问题是在安装另一个版本的 jdk 后开始的。我在配置文件夹中看到了 eclipse 日志文件：

错误如下：

```
java.lang.UnsatisfiedLinkError: Cannot load 64-bit SWT libraries on 32-bit JVM 
```

我从类路径中删除了 java 路径，并且 eclipse runts 成功；路径是这样的：

```
C:\ProgramData\Oracle\Java\javapath 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2016-06-08T06:06:56.493

@Harshit 解决方案对我有用。

1）确保您的 JAVA_HOME 路径设置为 JDK，并且 JAVA_HOME 包含在 PATH 中。

2）但我在 AppceleratorStudio.ini 中添加以下前两行代码，而不是在 STS.ini 中。它应该如下所示。

 *-vm

*C:\Program Files\Java\jdk1.7.0_03\bin\javaw.exe**

# android - GridView 中的 URL 图像

> ID：11846760
> 
> 赞同：0
> 
> 时间：2012-08-07T13:08:47.283
> 
> 标签：android, android-imageview, android-gridview, android-image

我正在尝试创建一个网格视图并将一些图像从 URL 加载到该网格视图，但是在加载图像时出现问题，但我找不到它，有人可以帮忙吗？

```
package com.images;
import java.io.InputStream;
import java.net.URL;

import android.content.Context;
import android.graphics.drawable.Drawable;
import android.view.View;
import android.view.ViewGroup;
import android.widget.BaseAdapter;
import android.widget.GridView;
import android.widget.ImageView;

import com.coboltforge.slidemenuexample.MainActivity;
import com.coboltforge.slidemenuexample.R;

public class ImageAdapter extends BaseAdapter {
    private Context mContext;

    // Keep all Images in array
    public Integer[] mThumbIds = new Integer [27];

    // Constructor
    public ImageAdapter(Context c) {
        mContext = c;
    }

    @Override
    public int getCount() {
        return mThumbIds.length;
    }

    @Override
    public Object getItem(int position) {
        return mThumbIds[position];
    }

    @Override
    public long getItemId(int position) {
        return 0;
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {
        /*
         * ImageView imageView = new ImageView(mContext);
         * imageView.setImageResource(mThumbIds[position]);
         * imageView.setScaleType(ImageView.ScaleType.CENTER_CROP);
         * imageView.setLayoutParams(new GridView.LayoutParams(130, 130));
         * return imageView;
         */
        ImageView imageView;
        if (convertView == null) {
            imageView = new ImageView(mContext);
            imageView.setLayoutParams(new GridView.LayoutParams(150, 150));
            imageView.setAdjustViewBounds(false);
            imageView.setScaleType(ImageView.ScaleType.CENTER_CROP);
            imageView.setPadding(8, 8, 8, 8);
        } else {
            imageView = (ImageView) convertView;
        }
        for (int i = 0; i < MainActivity.presentersImages.size(); i++) {
            imageView
                    .setImageDrawable(LoadImageFromWebOperations(MainActivity.presentersImages
                            .get(i) + position));

        }
        return imageView;
    }

    protected Drawable LoadImageFromWebOperations(String url) {
        try {
            InputStream is = (InputStream) new URL(url).getContent();
            Drawable d = Drawable.createFromStream(is, "src name");
            return d;
        } catch (Exception e) {
            System.exit(0);
            return null;
        }
    }
} 
```

MainActivity.presentersImages 是一个字符串数组列表，包含图像的 url

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T13:17:05.440

检查以下链接并下载对您有帮助的示例应用程序

[https://github.com/nostra13/Android-Universal-Image-Loader](https://github.com/nostra13/Android-Universal-Image-Loader)

# android - android如何查找一个人是否正在通话？

> ID：11846767
> 
> 赞同：2
> 
> 时间：2012-08-07T13:09:04.537
> 
> 标签：android, broadcastreceiver

我正在开发一个安卓应用程序。我想在通话中添加一个时间计。拨出电话时，我不知道该怎么做。我必须以某种方式知道我打电话的人接听了电话。这该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T13:44:19.793

据我所知，在正在进行的通话中不可能有命令，也不能自动断开通话。Telephone API 不提供任何方法来在人们与某人交谈时进行任何更改。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-07T14:02:36.693

您将需要创建一个广播接收器，如下所示

```
public class CallListner extends BroadcastReceiver {
    @Override
    public void onReceive(Context context, Intent intent) {
        if (intent.getAction().equals(Intent.ACTION_NEW_OUTGOING_CALL)) {
                //user making call
                }
     }
} 
```

您需要在 AndroidManifest.xml 上添加权限

```
<uses-permission android:name="android.permission.CALL_PHONE" /> 
```

# c++ - QT 代码的组织

> ID：11846771
> 
> 赞同：1
> 
> 时间：2012-08-07T13:09:17.723
> 
> 标签：c++, qt, code-organization

我正在写一个中等大小的应用程序。我将有许多 gui 组件和许多类。但是，我很难组织代码，分离逻辑，......例如，假设我按下一个按钮来创建一个类的对象并对该对象执行计算。退出按钮的槽函数后，这个本地对象就被销毁了。如果我稍后在另一个函数中需要它怎么办？在头文件中将所有内容定义为全局变量对我来说并不是一件好事。所以我在想一个静态类，它以某种方式包含指向我以后需要的所有对象的指针。有人有更好的主意吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T07:44:19.740

如何在应用程序中管理对象始终是一个棘手的问题。Qt 走的是一条非常面向对象的路线，几乎所有东西都使用通过指针实现的引用语义。为了避免繁琐的手动内存管理，Qt 将所有内容组织到 [Object Trees](http://qt-project.org/doc/qt-4.8/objecttrees.html)中。Qt 自己的 [对象模型](http://qt-project.org/doc/qt-4.8/object.html)增强了这一点，增加了一些动态功能。

如果你想走这条路，坚持 Qt 提供的一切。它比通常的 C++ 方法更类似于 Java，并且可能更适合初学者，并且可能适合您的应用程序领域。它将您的代码与 Qt 紧密联系在一起，并且很难从中分离出来。

另一种方法意味着简单地放弃所有 Qt 东西并制定应用程序的核心逻辑。用纯 C++ 开发它，而不是有一个薄层，通过信号和槽将此逻辑与您的 Qt 应用程序联系起来。在这种方法中，您会选择使用更多的价值语义。

对于您创建算法并保留它的具体示例。Qt 方法：

```
class MyAlgo : public QObject {
  Q_OBJECT
public:
    MyAlgo(QObject* o) : QObject(o) { }

    virtual compute();
};

// use it in a mainwindow slot

void MainWindow::executeAlgorithm(const QString& name) {
   MyAlgo* algo = this->findChild<MyAlgo*>(name);
   if(!algo) {
     // not found, create
     algo = new MyAlgo(this); // make mainwindow the parent of this algo
     algo->setName(name); // QObject name property
   }

   algo->compute();
} 
```

# javascript - HTML5、Javascript 和 KineticJS 可点击网格

> ID：11846775
> 
> 赞同：1
> 
> 时间：2012-08-07T13:09:40.933
> 
> 标签：javascript, jquery, html, kineticjs

我使用 HTML5 和 Javascript/JQuery 开发了一个游戏。本游戏是基于 Tile 的游戏，使用多维数组保存当前关卡的地图。当前数组看起来类似于下面第一级的代码：

```
var map = [[1, 1, 1, 1, 1, 1, 1, 1, 1, 1],
           [1, 3, 0, 0, 0, 0, 2, 4, 0, 1],
           [1, 1, 1, 1, 1, 1, 1, 1, 1, 1]]; 
```

只是让你知道：

```
0 = Floor
1 = Wall
2 = Block
3 = Player
4 = Goal 
```

渲染后的地图如下所示：

![在此处输入图像描述](../Images/6ee7b1ce6eeb08ba13cfcbd5a0f62973.png)

所以基本上我想做的是为用户创建一个 Map Creator。

我希望上图中的每个块都是可点击的，当用户点击方块时，它会循环播放游戏中可能的块（例如 0、1、2、3 或 4）。

我一直在尝试使用 KineticJS 库让它工作，但没有运气。

谁能给我任何关于使用什么的建议或任何关于我如何使用 KineticJS 做到这一点的信息。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-07T14:06:34.990

我无法评论它的 KineticJS 方面，但你不能这样做：确定相对于画布的点击坐标，将其除以每个轴的块大小（并向下舍入），然后你会知道点击了哪个块。编辑您的值`map`并在画布上重绘该块？

这就是我的意思：

```
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Maker</title>
<style>
#can{display:block; background-color:#666;}
</style>
</head>

<body onload="init();">
<canvas id="can"></canvas>
</body>
<script>
var blocksize=30;
var map=[[1,1,1,1,1,1,1,1,1,1],[1,3,0,0,0,0,2,4,0,1],[1,1,1,1,1,1,1,1,1,1]];
var can=document.getElementById('can')
if(can){ctx=can.getContext('2d');}
function init(){
    can.width=map[0].length*blocksize; //adjusts canvas size to fit map
    can.height=map.length*blocksize;
    for(y=0;y<map.length;y++){
        for(x=0;x<map[y].length;x++){
            draw(y,x);
        }
    }
    can.addEventListener('click',builder);
}

function builder(e){
    if (e == null) {e = window.event;}
    x = e.clientX; //where the click was
    y = e.clientY;
    offsetX = ExtractNumber(can.offsetLeft)-window.scrollX;//where the canvas is
    offsetY = ExtractNumber(can.offsetTop)-window.scrollY;
    x_grid=Math.floor((x-offsetX)/blocksize); //which block in the canvas was clicked
    y_grid=Math.floor((y-offsetY)/blocksize);
    map[y_grid][x_grid]++;
    if(map[y_grid][x_grid]>4){map[y_grid][x_grid]=0;}
    draw(y_grid,x_grid);
}

function draw(y,x){
    kind=map[y][x];
    switch(kind){
        case 0:
            ctx.drawImage(floorimg,x*blocksize,y*blocksize);
        break;
        case 1:
            ctx.drawImage(wallimg,x*blocksize,y*blocksize);
        break;
        case 2:
            ctx.drawImage(blockimg,x*blocksize,y*blocksize);
        break;
        case 3:
            ctx.drawImage(playerimg,x*blocksize,y*blocksize);
        break;
        case 4:
            ctx.drawImage(goalimg,x*blocksize,y*blocksize);
        break;
    }
}

function ExtractNumber(value){
    var n = parseInt(value);
    return n == null || isNaN(n) ? 0 : n;
}
var floorimg=new Image();
floorimg.src='data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAIAAAC0Ujn1AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAE5JREFUeNpiNDU1ZaANYAHiadOmEaM0KysLSOaCSYJg8rRpTAw0A6NGjxo9avQIMJqRdiUfDV3NQlI5SVIJPJpCRo0eNXrU6EFaqAIEGABIow4bXRyDLQAAAABJRU5ErkJggg==';
var wallimg=new Image();
wallimg.src='data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAIAAAC0Ujn1AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAEFJREFUeNpirK+vZ8AGGhsbcUkRqYaJgWZg1Gj6AUZIFFOeHjDVjEbjcEoho2XIaAoZLUNGU8hoGTKaQmgAAAIMAJeMK58/yjg2AAAAAElFTkSuQmCC';
var blockimg=new Image();
blockimg.src='data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAIAAAC0Ujn1AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAABrFJREFUeNpUVkluJMcVjTnHmimySRMtQw0I1koLH8v38Cl8Je+8lQWpW252iWRNOcScfj+LgtsJgixmZf74/00R/B9//5t1vjB6YkxJkadJCsE5jylzNgn6LOi3EIyxaZoY51JKISWbrynn6H3Ome7kjCIu5dGG291KFWVZ1PVcgrOvLsP+70JRPl9U/ev7jOV5vRAjluHKWGubuoopilM3GlN0g00p4dHr+28NfnVdb+Y/buLD9cJ9XRSmLJvFEj9loXe7DZYpi0qtFvWlG1jKMSbng9FGSkwvU4rGGHqbTUBAa42KKaaJFp2BYvyPaZhUKoY4iQnYACOtVJ6yCs41bfvx0yHsu5Rz4lpI9fNvz6UWVWnu73b9YEPKt5u268fR+d1qobVic7Mp5eB8fzkLXbRN+Xy8PN5uyrrVAstydSVku6w7yc7nS1Ho7bL90+3qeOlHF3fb9aZ1Uom6afZPXyrFNpsVA5FCoJYPPoSoJCsLw2RRW4dplOS9ZSYlBXKvAwZnN+tVmjJNmSej1ekyvhxOy7oQmaFBQAoUoCJTFEphOCES3g0Yn0tjtDYssQzCeF2RCESeFUPqEeLL4RwCiqM6A8vfvb/DEK/nDgMA5aZtcOGrGAMhh26Ch7DwvJGgJAwJwFSA3lsLTYo4i2ax3k5SdwPmi81yCShBS3BhXZd1WR268fXUMbBVlG8SmSnks1SkkgqExzzzjNeCLktMSUYoihLgsRQA0+HcnY/Hq7Bo3JzbUi6aMgQs5EEM7qQYoWe4CJ4AeCnEDGSLAtq4eurNZigNtdEiSq+bwpjy9dj1fU9PCO6806ZY1cAuH4/d6XDAk1LpWZTQWcQQXEkfMmhgJFoyqrMWHxVKj+MowUNRAHEm8826/fnj5/tbcXNzg69AL8R+tys7F/p+yJNjxCBPUfsQm8pAZ6iLNaboSeaMQZcYjkprBaoxIPfel8ag35v1ooea98+STaYwIBq14CLo9PU8DKO7f3czW0nHnGEoF6ZS5WVbQTlXLqh9/ME4oBVTwBpKsNKowqjdqr0MPuZptO50OiODIO13d998eH9fN/WX56OzLieqC0qrUiK10PHHT7/hDtwP9N9oBE7aaGgHDXIJKHlZN4/vdvBtYJJLBYN3l0t3OUM3KXqkwunSR9IxiXUOnMk6JzSIzVQaajZa/y/GggdoyuhZWPhQbDerQgk+Jec8kIU2vHOllusFmsiHw8tgHcWeD3hjDKTFa8CRQiIQJK9PwJppkFldc4fwZVNVFrff3NgkziNQRYskCaUUMsz2fWfjMNih70mFKCcptSZSLGlcXeP8mpuuu4RCAVauNOIRlQAOF2y3rIB7pjGRbR4FEISrtnI+wjD7l1etpKlqzclAWAJap/BAi9bZq2gCiVtByAit/ecnKA8uRhsotF41pqwuNgz9AIApHrhoF43Kbrtd//NfP9lhID8S8LmuGkAn4iYJ0gmcxDRPgMm7kcFimTCBJLEmCmHW2+0SMWuRP1Kn4FEkeA8EFc9//fGH/zyfl4tm9GnG821LIw9RDcTKBAFN6BqwXTcUNw4wQ103aBz/t22D947nHhsVlabACIA+uPFmu/rl0xM0DwAz5jRGzHagrg2ykb/tVRiBcmAOg0RXpK0W03GBBIdv9y9H9PW22wHalOw4fvtwezxe8Az4nuYo5d0JecSQXmRZQbVyCuCZWJo5EErNoTNpMWH8zbJdLlcztAyYIDvRVlsZ7+1fPjzgKIAihCVSHhlIpwPv4d00G2zeZLnBG3PRRIKOmJRxOErUVbFb1UoXL10gbrsuzKOVRTFeLnjXWoQS9kuhyAWlRtdYbQw4V4TexTwn70hxrJ2zeBQIHA8XTAqpAcVVWwO4f//6ebOsX49nZcpge9UsYAnUwURgIGpucLb56dfPz4czqPHIpf3vcODgArIfEGMW0I4tresHnHxoTK1lHPFk1bQnz+4267HvFosFOI8h6aL0zqphbeuhhou///PD99+9BwIY5cO390DfOgTqgNIQDKCHOTeLGoOTiQUdGhaVXjUFghNCN7yhjPN0/b7fLzdbRZZgEqWtD2Kiw5gkqVxPUpQkHLscI3dl2kgnHE7KqppTgo4C866dJzWhfTJLSudueHh8/OXTFwXekOHL1fLw8enx4Q46pN1yThlgXTA6GZA8rhvi9VQzax4yYtcwouMOtEz5B7qR2iBvu14ozAP+X/bP68Y875/Q1Jy20YZsNMSM3MBJISK4Z7ExaMvi7CE4nkO5MJGKkVToBy5Am4xjk4T5yv8KMAAKNJRh2Lhx4QAAAABJRU5ErkJggg==';
var playerimg=new Image();
playerimg.src='data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAIAAAC0Ujn1AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAATdJREFUeNpiNDU1ZaANYAHiadOm4ZLGZfGi+fPxmzt52jQWPNJAc/8rKSGLMN679//+ThBD0Z2g6UwMNAM0NJqFVA3AoCAmrAkbDQxcUiOQgNGQhGHc+QpTKi5RjMgEw4LVXKyGQgBE6my5GFwNkF1VW9vc0MDMzIwvGvGbi2wB0EQ4+8mTJ4kpKTRJIRDXFJWU4DSaSCdjOhzCffP2bVxiIk3SNZqzaJxlsrKyqGjiZFhhR2NX58JcjRwJZANIEQ0MiSFS8iGnRXSjgUUBmjR+g5BTG0Tj6dOnqexqiLknTpzAFyBEOhyteAKSJ0+eRCueWLCWkJCSE2umh1uM7ALkcCBQXkPKX6xFM1ZTyKllMGt0SC1BjAUk142wxoIpQdOHX2MBGJmMGKUKpLFATFgz0q45CRBgAHQ6gQd/qFgwAAAAAElFTkSuQmCC';
var goalimg=new Image();
goalimg.src='data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAIAAAC0Ujn1AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAFtJREFUeNpilJSUZKANYAFiGRkZqpv75MkTJgaagWFv9BMwGA2QUaNHttEsmPmCYMbBJYVWzNHR1XgKWIh7iS+BR1PIqNEjIaPjAaQ2V0bDGktYk9S6IB4ABBgADi4U6URvDncAAAAASUVORK5CYII=';
</script>
</html> 
```

# c# - 申请关闭异常

> ID：11846776
> 
> 赞同：0
> 
> 时间：2012-08-07T13:09:43.383
> 
> 标签：c#, wpf, invalidoperationexception

我开发了一个 WPF 应用程序，在关闭应用程序时遇到问题。

仅在 Windows 2003 PC 上，应用程序在关闭时会引发以下异常。但它似乎并没有从我的代码中抛出，因为我无法获得调用堆栈。

这就是为什么我不能发布任何进一步的细节。

你知道我可以从哪里开始研究它吗？

```
System.InvalidOperationException was unhandled
  Message=Handle is not initialized.
  Source=mscorlib
  StackTrace:
       at System.WeakReference.set_Target(Object value)
       at System.Windows.Threading.Dispatcher.FromThread(Thread thread)
       at MS.Win32.HwndSubclass.SubclassWndProc(IntPtr hwnd, Int32 msg, IntPtr wParam, IntPtr lParam)
       at MS.Win32.UnsafeNativeMethods.IntDestroyWindow(HandleRef hWnd)
       at MS.Win32.HwndWrapper.DestroyWindow(Object args)
       at MS.Win32.HwndWrapper.Dispose(Boolean disposing, Boolean isHwndBeingDestroyed)
       at MS.Win32.HwndWrapper.Finalize()
  InnerException: 
```

谢谢你的想法。

**编辑** 我发现哪些代码行导致失败。但是我该如何解决呢？

这是以下代码行：

```
 try
        {
            return DesignerProperties.GetIsInDesignMode(new DependencyObject());
        }
        catch (Exception)
        {
            return true;
        } 
```

我正在使用它来检查代码是否在设计器中运行。但是在关闭此代码时失败，尽管我发现了异常。

检查设计模式的任何其他想法？谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T06:44:51.393

要回答我自己的问题...

我可以通过为 IsInDesignMode 属性实现一个支持字段来解决这个问题。**支持字段现在将设置在 ViewModel 的构造函数**中，而不是我之前在每个方法调用上检查 DesignMode 的解决方案。

这意味着，即使在 Dispose 方法中，也可以检查应用程序是否在设计模式下运行。

# php - php 等效于 nginx 的“virtual()”函数

> ID：11846778
> 
> 赞同：4
> 
> 时间：2012-08-07T13:09:48.827
> 
> 标签：php, nginx

nginx 是否有任何 php 函数，其工作方式与 apache 的“virtual()”相同？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-07T13:12:09.717

不，那里没有。与 Apache 不同，nginx 不使用模块与 PHP 通信。虽然这是一件好事，但它也有诸如此类的负面影响。

我可以推荐使用`include`or`file_get_contents`代替吗？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-07T13:16:40.957

来自 PHP virtual() 文档：

*Virtual() 是一个特定于 Apache 的函数，类似于 mod_include 中的函数。它执行 Apache 子请​​求。它对于包含 CGI 脚本或 .shtml 文件或您将通过 Apache 解析的任何其他文件很有用。请注意，对于 CGI 脚本，该脚本必须生成有效的 CGI 标头。*

这应该是[http://wiki.nginx.org/HttpSsiModule](http://wiki.nginx.org/HttpSsiModule)

*该模块提供了一个过滤器，用于处理输入中的服务器端包含 (SSI)。SSI 支持的命令列表当前不完整。*

# javascript - 制作可滚动的灯箱

> ID：11846780
> 
> 赞同：0
> 
> 时间：2012-08-07T13:09:58.700
> 
> 标签：javascript, jquery, html

对于一个新项目，我需要制作一个 scroable 灯箱，就像点击 pinterest 上的任何图像后打开的灯箱一样。要求是：

1.  灯箱必须支持 HTML 内容。
2.  内容可能比显示器屏幕更多（固定宽度但没有高度限制）。
3.  灯箱不应有其独立的滚动条，但必须使用浏览器的滚动条，如 pinterest。
4.  当灯箱打开时，滚动事件应该只滚动灯箱而不是背景。
5.  只有纯 Javascript 和/或 JQuery 和/或 HTML5/CSS3 解决方案是可接受的。

我经历了很多灯箱 JS 甚至是 JQuery 插件。似乎大多数支持单屏灯箱。

是否有人知道任何可用的 JS/JQuery 插件来实现上述要求。如果没有，是否有任何教程可以帮助制作自定义插件来实现上述要求。

提前致谢，

卡皮尔。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T03:40:46.247

您正在查看的内容只能通过 HTML/CSS 实现。只需使用任何 Javascript 库即可轻松使用，而 JS/JS Lib 取决于个人喜好。

在主要逻辑方面，在 pintrest 中，滚动功能是通过 CSS 属性 'overflow-y:scroll' 实现的。对于叠加层（灯箱背景），没有定义宽度/高度，但 CSS 属性（顶部：0；底部：0；左侧：0；右侧：0；）会发挥作用。

有了上面的 CSS 属性（显然很少有其他的设计），灯箱的滚动功能就会出现。但是，您会注意到两个垂直滚动条；一个用于机身，另一个用于灯箱。这里的诀窍是让正文滚动条消失。这可以通过在灯箱打开时将 CSS 属性 ('overflow: hidden') 赋予 body 并在灯箱关闭时将其删除来完成，这可以通过 JS/JS-lib 轻松完成。因此，我们将有两个滚动条，但一次只显示一个会获得所需的效果。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T13:19:38.583

使用 fancybox（与 jQuery 一起）： http: [//www.fancyapps.com/fancybox/](http://www.fancyapps.com/fancybox/)

```
var options = {/* options*/};
$(".links").fancybox(options); 
```

如果您有一个指向 html 内容的链接，如下所示：

```
<a href='#inline' class='links'>Open fancybox</a> 
```

它将打开带有#inline 内容的fancybox，例如：

```
<div id='inlines' style='display: none'>
My brilliant fancybox content.
</div> 
```

它使用标准滚动条，如果你把它做得足够大，其他内容就无法滚动。

# cuda - 哪个更好，原子之间的竞争：单个 Warp 的线程或不同 Warp 的线程？

> ID：11846784
> 
> 赞同：1
> 
> 时间：2012-08-07T13:10:12.713
> 
> 标签：cuda, synchronization, gpgpu

哪个更好，单个Warp的线程之间的原子竞争（并发）或一个块中不同Warp的线程之间的竞争？我认为，当您访问共享内存时，一个经线的线程相互竞争比不同经线的线程少。相反，如果访问全局内存，一个块的不同warp的线程竞争比单个warp的线程少，不是吗？

我需要它知道如何更好地解决竞争（并发）以及如何更好地分离存储：单个经线中的线程之间或经线之间。

顺便说一句，团队 __syncthreads(); 同步它在一个块中的扭曲而不是一个扭曲的线程？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T15:19:58.120

如果块中的大量线程对相同的值执行原子更新，则性能会很差，因为这些线程必须全部序列化。在这种情况下，通常最好让每个线程将其结果写入单独的位置，然后在单独的内核中处理这些值。

如果 warp 中的每个线程对相同的值执行原子更新，则 warp 中的所有线程都在相同的时钟周期内执行更新，因此它们必须在原子更新点都被序列化。这可能意味着 warp 被安排 32 次以得到所有线程的服务（非常糟糕）。

另一方面，如果块中每个 warp 中的单个线程对相同的值执行原子更新，则影响会较小，因为 warp 对（两个 warp 调度程序在每个时钟处理的两个 warp）是偏移的及时（一个时钟周期），因为它们在处理管道中移动。所以你最终只有两个原子更新（来自两个warp中的一个），在一个周期内发布并且需要立即序列化。

因此，在第二种情况下，情况更好，但仍然存在问题。原因是，根据共享值的位置，您仍然可以在 SM 之间进行序列化，这可能非常慢，因为每个线程可能必须等待更新一直到全局内存，或者至少要等待L2，然后返回。可以重构算法，使块内的线程对共享内存 (L1) 中的值执行原子更新，然后让每个块中的一个线程对全局内存 (L2) 中的值执行原子更新）。

原子操作可以成为完整的救生员，但它们往往会被 CUDA 新手过度使用。使用并行缩减或并行流压缩算法的单独步骤通常会更好（请参阅 参考资料`thrust::copy_if`）。

# c++ - 如何在 C++ 中创建一个指向 int 的多维数组的指针？

> ID：11846791
> 
> 赞同：5
> 
> 时间：2012-08-07T13:10:43.990
> 
> 标签：c++, arrays, pointers, multidimensional-array, int

我知道如何创建一个多维度数组标准方式：

```
const int m = 12;
const int y = 3;
int sales[y][n]; 
```

而且我知道如何创建一个指向一维数组的指针：

```
int * ms = new int[m]; 
```

但是是否可以创建一个指向多维数组的指针？

```
int * sales = new int[y][m];   // doesn't work
int * mSales = new int[m];    // ok
int * ySales = new int[y];    // ok
mSales * ySales = new mSales[y];    // doesn't work, mSales is not a type 
```

如何创建这样的指针？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-07T13:34:25.603

该表达式`new int[m][n]`创建一个`array[m] of array[n] of int`. 由于它是一个新数组，因此返回类型被转换为指向第一个元素的指针：`pointer to array[n] of int`。这是你必须使用的：

```
int (*sales)[n] = new int[m][n]; 
```

当然，你真的不应该使用 array new 。这里的_best_solution是写一个简单的`Matrix`类， `std::vector`用于内存。根据您对此事的感受，您可以重载`operator()( int i, int j )`并`(i, j)` 用于索引，或者您可以重载`operator[]( int i )`以返回定义`operator[]`进行第二次索引的帮助器。（提示： `operator[]`在 上定义`int*`；如果您不想打扰边界检查等，`int*`将作为代理完成工作。）

或者，类似：

```
std::vector<std::vector<int> > sales( m, n ); 
```

会做这项工作，但从长远来看，这`Matrix`门课是值得的。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-07T13:13:00.620

当然，这是可能的。

您将创建一个指向 int 指针的指针，语法就像听起来一样：

```
int** ptr = sales; 
```

你可能看到的例子比你想象的要多，因为当人们传递字符串数组时（就像你在 main() 中的 argv 中所做的那样），你总是传递一个字符数组的数组。

当然，我们都希望尽可能使用 std::string :)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-07T13:14:12.720

我记得是这样的：

```
int** array = new int*[m];
for(int i=0; i<m; i++) {
    array[i] = new int[n];
} 
```

# ruby-on-rails - 如何在shopify前端显示rails应用程序

> ID：11846800
> 
> 赞同：1
> 
> 时间：2012-08-07T13:11:11.277
> 
> 标签：ruby-on-rails, heroku, frontend, shopify

我有一个部署到 Heroku 的 Rails 应用程序，我可以从我的 shopify 商店的后端访问它。但是如何在前端显示它的任何内容（至少是 helloController 的视图）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-07T13:19:09.537

您可能想查看应用程序代理。这些在您的应用程序的设置中可用。例如，这将允许您将“/a/hello”映射到 HelloController#index。

（为了在本地进行测试，您可能需要使用 PageKite 为应用程序建立隧道。）

# regex - 如何在结果字符串中精确地重复 n 个匹配的模式

> ID：11846801
> 
> 赞同：7
> 
> 时间：2012-08-07T13:11:20.683
> 
> 标签：regex, vim

如何在结果字符串中精确重复 n 个匹配模式？

例如，如果我有以下文本：

```
++ '[' -f /etc/bashrc ']'
++ . /etc/bashrc
+++ '[' '[\u@\h \W]\$ ' ']'
+++ '[' -z 'printf "\033]0;%s@%s:%s\007" "${USER}" "${HOSTNAME%%.*}" "${PWD/#$HOME/~}"' ']'
+++ shopt -s checkwinsize
+++ '[' '[\u@\h \W]\$ ' = '\s-\v\$ ' ']'
+++ shopt -q login_shell
+++ '[' 506 -gt 199 ']'
++++ id -gn 
```

现在我想用每个 '+' 替换 3 个空格，但它只能发生在模式的开头。我会使用`:<range>s/^<pattern>` `:%s/+/ /g`，但如果文本的其余部分有一个“+”，我只会把它搞砸。

问题：如何在开始时匹配每个 + 并在结果字符串中重复相同的找到 + 计数？预期的：

```
^   ++$  -> ^         $
^   +++$ -> ^            $
^   +$   -> ^      $ 
```

谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-07T13:26:06.243

尝试这个：

```
:%s/^+*/\=repeat('   ',strlen(submatch(0)))/ 
```

`submatch(0)`包含行首的所有匹配项`+`，`strlen`计算它们。因此，对于行首的每个加号，使用 . 插入三个空格`repeat`。

了解更多信息：

```
:help sub-replace-expression
:help repeat()
:help submatch()
:help strlen() 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-07T14:29:02.390

对于这种情况，一个优雅的替换命令如下：

```
:%s/\%(^+*\)\@<=+/   /g 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-07T13:22:40.237

我认为你必须多次运行一个表达式，如果这是可以接受的......

你会想要运行这样的东西（减去用于显示空格的单引号）：

```
'^(\s*)+' 
```

替换为（再次减去单引号）

```
'$1   ' 
```

不是每个可以用正则表达式解决的问题都可以只用一个正则表达式来解决——我很确定这是其中一种情况

对于加号最多的行开头的每个加号，此表达式/替换对将需要运行一次（在上面的示例中，这将是四次）注意：如所写，这将弄乱任何行应该以空格和加号开头，所以我希望这不会发生在任何地方......

# wpf - 允许 xaml 中的文本框使用非 0 uint - WPF

> ID：11846807
> 
> 赞同：0
> 
> 时间：2012-08-07T13:11:45.830
> 
> 标签：wpf, xaml, c#-4.0

我在 xaml 中有一个文本框，这里是 .cs 文件中的代码：

```
public static readonly DependencyProperty dp =
            DependencyProperty.Register(
                "result", typeof( uint ), typeof( ui ),
                new FrameworkPropertyMetadata( ( uint )100, new PropertyChangedCallback( ResultChanged ) ) );

private static void ResultChanged(
            DependencyObject d, DependencyPropertyChangedEventArgs e )
        {
            var input = ( ui )d;
            var value = ( uint )e.NewValue;
        } 
```

上面的代码效果很好，它不允许在文本框中输入任何字母或无效字符。但是我怎样才能改变上面的代码，使用户不能在文本框中输入“0”呢？所以基本上允许除 0 之外的所有 uint。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T20:20:21.733

有很多方法可以做到这一点....最简单和最简单的就是使用扩展 WPF 工具包中的 NumericUpDown 控件....设置最小/最大范围并进行排序。

[http://wpftoolkit.codeplex.com/wikipage?title=NumericUpDown](http://wpftoolkit.codeplex.com/wikipage?title=NumericUpDown)

* * *

如果您确实想自己做逻辑，那么......

您可以根据您的需要/要求在依赖属性的寄存器中指定“强制回调”和/或“验证回调”，即您是否需要将值固定在一个范围内，或者向用户显示错误指示器？

“强制”是您将值调整为其他值的地方，例如在这种情况下，您可能决定将任何值 0 调整为 1（或可能为 null）。

“验证”是检查值的地方，你说它是否正确（通过返回真或假）......如果你返回假......那么就会引发异常。

您在与 DependencyProperty 的绑定上使用 ValidatesOnException，以便以显示 ErrorTemplate 的方式将该“错误”传播到用户界面（默认显示控件周围的红色边框）。

*   [http://www.shujaat.net/2010/07/wpf-validation-validatevaluecallback.html](http://www.shujaat.net/2010/07/wpf-validation-validatevaluecallback.html)

*   [http://msdn.microsoft.com/en-us/library/ms745795.aspx](http://msdn.microsoft.com/en-us/library/ms745795.aspx)

*   [http://wpf.2000things.com/2010/11/11/122-validating-a-dependency-property/](http://wpf.2000things.com/2010/11/11/122-validating-a-dependency-property/)

*   [http://wpf.2000things.com/2010/11/12/123-coercing-a-dependency-property/](http://wpf.2000things.com/2010/11/12/123-coercing-a-dependency-property/)

*   [http://wpf.2000things.com/2010/12/09/150-an-example-of-using-propertychanged-and-coercevalue-callbacks/](http://wpf.2000things.com/2010/12/09/150-an-example-of-using-propertychanged-and-coercevalue-callbacks/)

在这种情况下，我将展示仅使用强制回调...因为我假设您不希望在 TextBox 内等待无效值。如果您想要验证...然后查看上面的链接。（您不需要 Changed 回调，因此将其设置为 null）。

```
public static readonly DependencyProperty dp =
    DependencyProperty.Register(
        "result", typeof( uint ), typeof( ui ),
        new FrameworkPropertyMetadata(
            ( uint )100, 
            null,
            new CoerceValueCallback( ResultCoerceValue )
        )
    );

private static object ResultCoerceValue 
    (DependencyObject depObj, object baseValue)
{
    uint coercedValue = (uint)baseValue;

    if ((uint)baseValue == 0)
        coercedValue = 1; // might be able to set to null...but not sure on that.

    return coercedValue;
} 
```

* * *

您还可以使用不同的技术，例如 ValidationRules、可能是 MaskedTextBox，以及使用 PreviewTextInput。

*   [http://social.msdn.microsoft.com/Forums/en/wpf/thread/990c635a-c14e-4614-b7e6-65471b0e0e26](http://social.msdn.microsoft.com/Forums/en/wpf/thread/990c635a-c14e-4614-b7e6-65471b0e0e26)

*   [如何让 TextBox 只接受 WPF 中的数字输入？](https://stackoverflow.com/questions/1268552/how-do-i-get-a-textbox-to-only-accept-numeric-input-in-wpf)

*   [http://weblogs.asp.net/monikadyrda/archive/2009/06/24/wpf-textbox-validation.aspx](http://weblogs.asp.net/monikadyrda/archive/2009/06/24/wpf-textbox-validation.aspx)

# c# - Windows 8 中的摄像头检测

> ID：11846811
> 
> 赞同：3
> 
> 时间：2012-08-07T13:11:53.757
> 
> 标签：c#, windows-8

我正在 Windows 8 中开发一个需要相机来捕捉图片的应用程序。所以我需要做什么才能知道是否存在摄像头（假设桌面没有网络摄像头，而 Windows 8 平板电脑有摄像头），所以我只需要显示控件以在设备上存在摄像头时显示摄像头。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-07T16:39:33.950

您需要使用此 API：JS：

```
Windows.Devices.Enumeration.DeviceInformation.findAllAsync(Windows.Devices.Enumeration.DeviceClass.videoCapture).done(yourHandler); 
```

C＃：

```
var interfaces = await DeviceInformation.FindAllAsync(selector, null); 
foreach(DeviceInformation devInfo in interfaces) { /* stuff */ } 
```

[这](http://msdn.microsoft.com/en-us/library/windows/apps/windows.devices.enumeration.deviceinformation.aspx)包含有关此 API 其他方面的更多信息

由于您使用的是 c#，[因此此](http://code.msdn.microsoft.com/windowsapps/Device-Enumeration-Sample-a6e45169/sourcecode?fileId=44728&pathId=410862369)示例将更加具体。

# grails - 在 Grails 上的 src/java 文件中动态更改枚举值

> ID：11846825
> 
> 赞同：0
> 
> 时间：2012-08-07T13:12:33.180
> 
> 标签：grails

我在 Grails 项目的 src/java 上有一个枚举文件。

这个枚举在代码上定义了它的值，我可以动态更改这个值吗？

```
public enum Status
{
    value_one, value_two, value_three;

    public String getOtherString()
    {
        switch (this)
        {
        case value_one:
            return "value one";
        case value_two:
            return "value two";
        case value_three:
            return "value three";
        default:
            return "problem";
        }
    }

    @Override
    public String toString()
    {
        switch (this)
        {
        case value_one:
            return "VALUE 1";
        case value_two:
            return "VALUE 2";
        case value_three:
            return "VALUE 3";
        default:
            return "problem happens";
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T14:29:45.200

您可以在使用前使用[metaClass](http://groovy.codehaus.org/JN3525-MetaClasses)进行扩展。例如通过添加到`BootStrap.init()`：

```
Status.metaClass.getValueOne = {
   Status val = delegate
   switch (val) {
        case Status.value_one:
        // read from database
   }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T13:22:35.080

我找到了一种使用服务的方法。

我将枚举转换为 .groovy 文件，并使用服务方法返回值。

所有作品！

# rally - Rally App2.0 - 检索特定故事

> ID：11846828
> 
> 赞同：2
> 
> 时间：2012-08-07T13:12:42.400
> 
> 标签：rally, agile-central

我掌握了 2.0 的窍门，但有点卡在看似简单的东西上。

基本上，我为我的团队创建了一个新的应用程序（感谢大家的帮助）。我认为有一种方法可以将消息添加到仪表板会很酷。

我决定完成此任务的最简单方法是创建一个故事，然后在我的代码中简单地查询那个故事，获取描述并在应用程序中显示它。听起来很容易对吧？

我有一点时间很简单，抓住描述字段并显示它。我知道这听起来很奇怪，但它看起来很复杂。我试过这种方式

```
 showMessage: function (message) {
                debugger;
                this.add({
                    xtype: 'label',
                    html: message
                });
            },

            getMessage: function () {
                var defectStore = Ext.create('Rally.data.WsapiDataStore', {
                    model: 'UserStory',
                    fetch: ['Description'],
                    filters: [{
                        property: 'FormattedID',
                        operator: '=',
                        value: 'US13258'
                    }],
                    autoLoad: true,
                    listeners: {
                        load: function (store, records) {
                            debugger;
                            if (records)
                                return records[0].get("Description");
                        }
                    }
                });
            }, 
```

但似乎陷入了事件意大利面。当然有更简单的方法:)

只想去获取一个特定的故事描述字段......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T15:32:09.867

您可以使用模型的加载方法来执行此操作：

```
var storyOid = 12345;

//Get the story model
Rally.data.ModelFactory.getModel({
    type: 'UserStory',
    success: function(model) {

        //Load the specific story
        model.load(storyOid, {
            fetch: ['Description']
            success: function(record) {

                //success!
                var description = record.get('Description');
            }
        });
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T18:42:19.583

我不确定您为什么要尝试使用侦听器来执行此操作，但我只会调用 load 并在成功时获得结果，如下所示：

```
getMessage: function (storyID) {
    var defectStore = Ext.create('Rally.data.WsapiDataStore', {
        model: 'UserStory',
        fetch: ['Description'],
        filters: [{
            property: 'FormattedID',
            operator: '=',
            value: storyID
        }],
        autoLoad: true
    });

    defectStore.load({scope: this, callback: function(records, operation, success) {
        if(success){
            console.log(records[0].get('Description')); // additional logic here
        } else {
            console.log('You ruined the store. Jerk.');
        }
    }});
} 
```

不过，我认为您可能会遇到一些问题，除非您在检查成功后调用 showMessage，因为 extJS 是异步操作的。

# c# - asp.net 基本身份验证

> ID：11846829
> 
> 赞同：4
> 
> 时间：2012-08-07T13:12:42.773
> 
> 标签：c#, asp.net, authentication, basic-authentication

我有一个具有基本身份验证的 Intranet 站点。

是否可以只有一页不要求提供凭据？就像只允许一页访问任何人一样？

可以在 web.config 中为单页设置一些东西吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-07T13:15:59.857

将以下元素添加到`configuration`您的 web.config 节点：

```
<location path="aFolder/aPageToExclude.aspx">
     <system.web>
        <authorization>
            <allow users="*"/>
        </authorization>
    </system.web>
</location> 
```

有关更多信息和用法，请查看 MSDN 文档：[Location Element (ASP.NET Settings Schema)](http://msdn.microsoft.com/en-us/library/b6x6shw7.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-05-05T15:05:28.737

我所做的是我不使用 ASP.Net 身份验证。我所做的是当用户输入他们的用户名和密码时，我检查数据库是否存在具有该用户名和密码的行。

您可以使用`objDataSet.Tables[0].Rows.Count > 0`. 您可以将其置于“if”条件下，然后获取用户名并将其放入会话中。你这样做：

`Session["username"] = (Username Variable Here)`. 然后，您创建两个母版页，一个用于只有登录人员才能访问的页面，另一个用于任何人都可以访问的页面。在只允许登录的人访问的母版页中，您可以检查会话数据是否为空。如果为空，您可以将该人重定向回登录页面。LoggedIn 母版页可以保持原样。如果您已经有一个母版页，那么您可以复制它并添加该条件。如果您还没有实现母版页，您可以将条件放在需要用户登录才能访问该页面的每个页面的页面加载中。因为您使用的是会话而不是 cookie，所以用户更难侵入该系统。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-07T14:15:19.247

您需要覆盖您的 web.config 文件设置。
您需要创建一个文件夹并在该文件夹中再创建一个 web.config 文件。
然后将 Page.aspx 放在该文件夹中。
然后修改 web.config 文件代码，如下所示：

```
<authentication mode="Forms">
</authentication> 
```

笔记：

1）您不必提及 users=* 它会自动允许所有用户访问该文件夹下的那些页面。

或者

您可以做的是，如果您已经在为页面使用目录结构，那么您可以将该 page.aspx 保持在您拥有登录页面的同一级别。

# jquery - 使用与 jquery 没有冲突

> ID：11846830
> 
> 赞同：0
> 
> 时间：2012-08-07T13:12:42.663
> 
> 标签：jquery

我需要在我的网站中使用 noconflict，但我认为有问题。这是我的代码：

```
calling... src="jquery-1.7.2.min.js" 
var jQuery_1_7_2 = jQuery.noConflict(true);

(function($){
    $(window).load(function () {
        $("#content_1").mCustomScrollbar({
            advanced:{
                updateOnContentResize: true
            },
            scrollButtons: {
                enable: true
            }                                          
        });
    });
})(jQuery_1_7_2); 
```

我哪里错了？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T13:22:06.680

我注意到您`mCustomScrollbar`在代码中使用了插件。

该插件必须安装在与函数中使用的相同的 jQuery 实例中，因此必须*在*调用`.noConflict`.

在实践中，您将需要这样的东西：

```
<script src="jquery-1.3.2.js"> </script>
<script src="module-needing-1.3.2"> </script>
<script>
   var jq132 = jQuery.noconflict(true);  // move jQuery 1.3.2 out of the way
</script>
<script src="jquery-1.7.2.js"> </script>
<script src="module-needing-1.7.2"> </script>
<script>
   var jq172 = jQuery.noconflict(false); // leave 1.7.2 as the default...
</script> 
```

# javascript - 将 require.js 与 FB SDK 一起使用

> ID：11846831
> 
> 赞同：12
> 
> 时间：2012-08-07T13:12:49.420
> 
> 标签：javascript, facebook-javascript-sdk, requirejs

我想使用 require.js 加载 FB SDK。

我的测试用例是这样的：

**测试.js**：

```
require([        
     'libs/facebook/fb'
     ], function(FB){
     FB.api("/me", function(){});
)); 
```

我想让 test.js 仅在加载 FB SDK 后运行，并为它准备好 FB。

关于如何实现这一点的任何想法？我的包装器（libs/facebook/fb.js）应该有什么？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-08T07:51:23.983

FB API 似乎不是 AMD 模块，因此它没有以 RequireJS 习惯的方式定义自己。您需要使用 require.config 填充 FB API。我假设 test.js 是您作为 RequireJS 的数据主值提供的脚本。

```
require.config({
    shim: {
        'facebook' : {
            exports: 'FB'
        }
    },

    paths: {
        'facebook' : 'libs/facebook/fb'
    }
});

require(['facebook'], function(FB){
    FB.api('/me', function(){});
}); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-07-19T23:49:30.157

这是来自 Facebook 的文档： [https ://developers.facebook.com/docs/javascript/howto/requirejs/](https://developers.facebook.com/docs/javascript/howto/requirejs/)

```
require.config({
  shim: {
    'facebook' : {
      export: 'FB'
    }
  },
  paths: {
    'facebook': '//connect.facebook.net/en_US/all'
  }
})
require(['fb']); 
```

然后像这样添加模块：

```
define(['facebook'], function(){
  FB.init({
    appId      : 'YOUR_APP_ID',
    channelUrl : '//yourdomain.com/channel.html'
  });
  FB.getLoginStatus(function(response) {
    console.log(response);
  });
}); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-15T13:01:29.127

或者将初始化代码包装在一个模块中（示例使用 Dojo）：

```
define( 'facebook', 
    [ 'dojo/dom-construct', 
      'dojo/_base/window', 
      'https://connect.facebook.net/en_US/all/debug.js' ], // remove "/debug" in live env
    function( domConstruct, win ) 
    {

        // add Facebook div
        domConstruct.create( 'div', { id:'fb-root' }, win.body(), 'first' );

        // init the Facebook JS SDK
        FB.init( {
            appId: '1234567890', // App ID from the App Dashboard
            channelUrl: '//' + window.location.hostname + '/facebook-channel.html', // Channel File for x-domain communication
            status: true, // check the login status upon init?
            cookie: true, // set sessions cookies to allow your server to access the session?
            xfbml: true // parse XFBML tags on this page?
        } );

        // Additional initialization code such as adding Event Listeners goes here
        console.log( 'Facebook ready' );

        return FB;
    } 
); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-09T16:05:32.450

基于[voidstate](https://stackoverflow.com/a/13398031/363701)和[Dzulqarnain Nasir 的](https://stackoverflow.com/a/11860033/363701)答案，这是我最终在我的项目中使用的代码。

最让我失望的部分`FB.init()`显然是异步的。在尝试调用`callback()`（不带`FB.getLoginStatus`）时，`FB`尚未初始化，并且出现“ `An active access token must be used to query information about the current user.`”错误。

**RequireJS Shim 配置**

```
require.config({
    // paths: { 'facebookSDK': '//connect.facebook.net/en_US/all/debug' }, // development
    paths: { 'facebookSDK': '//connect.facebook.net/en_US/all' }, // production
    shim: { 'facebookSDK': { exports: 'FB' } }
}); 
```

**AMD 模块初始化 Facebook JS SDK**

```
define(['facebookSDK'], function (FB) {
    'use strict';

    return function (settings, callback) {
        var args = {
            appId: settings.appId,
            channelUrl: settings.channelUrl,
            status: true,
            cookie: true,
            xfbml: true
        };

        console.log('Calling FB.init:', args);
        FB.init(args);

        if (callback && typeof (callback) === "function") {
            // callback() // does not work, FB.init() is not yet finished
            FB.getLoginStatus(callback);
        }            
    };

}); 
```

这仍然不能完全解决原始问题的预期用途。

OP 的代码可以重写为：

```
require(['libs/facebook/fb'], // where fb.js holds my above Module
   function(FBinit){
     FBinit({
       appId: appId, 
       channelUrl: channelUrl
     }, function(){
       FB.api("/me", function(){});
     });
   }
); 
```

这不是 cleanas OP 的原始概念，但它是我能想到的最好的。如果有人有任何意见，我希望得到一些关于如何改进我的方法的反馈或建议。我对 RequireJS 还是很陌生。

# c++ - CppUnit 和 CMake：.cpp 文件被编译两次

> ID：11846833
> 
> 赞同：4
> 
> 时间：2012-08-07T13:13:00.317
> 
> 标签：c++, cmake, cppunit

我目前正在使用 CMake 来构建我的项目并使用 CppUnit 来测试它。在我的 CMake 文件中，我创建了两个可执行文件。`sample`是编译源本身。和`sample_test`我一起运行测试。如果我

这是我的一部分`CMakeLists.txt`

```
SET(SAMPLE_ROOT_PATH ${PROJECT_BINARY_DIR})
SET(SAMPLE_SOURCE_PATH ${SAMPLE_ROOT_PATH}/src)
SET(SAMPLE_TEST_SOURCE_PATH ${SAMPLE_ROOT_PATH}/test)
SET(SAMPLE_BIN_PATH ${SAMPLE_ROOT_PATH}/bin)
SET(SAMPLE_EXEC_NAME sample)
SET(SAMPLE_TEST_EXEC_NAME sample_test)

SET(EXECUTABLE_OUTPUT_PATH ${SAMPLE_BIN_PATH})

FILE(GLOB_RECURSE SAMPLE_SOURCE_FILES ${SAMPLE_SOURCE_PATH}/*.cpp)
FILE(GLOB_RECURSE SAMPLE_TEST_SOURCE_FILES ${SAMPLE_TEST_SOURCE_PATH}/*.cpp)
SET(SAMPLE_TEST_SOURCE_FILES ${SAMPLE_TEST_SOURCE_FILES} ${SAMPLE_SOURCE_FILES}
)
LIST(REMOVE_ITEM SAMPLE_TEST_SOURCE_FILES ${SAMPLE_SOURCE_PATH}/main.cpp)

SET(CMAKE_CXX_FLAGS "-g -Wall")

ADD_EXECUTABLE(${SAMPLE_EXEC_NAME} ${SAMPLE_SOURCE_FILES})
ADD_EXECUTABLE(${SAMPLE_TEST_EXEC_NAME} ${SAMPLE_TEST_SOURCE_FILES}) 
```

这是的输出`make`

```
[  8%] Building CXX object CMakeFiles/sample.dir/src/KeyBuffer.cpp.obj
[ 12%] Building CXX object CMakeFiles/sample.dir/src/main.cpp.obj
[ 20%] Building CXX object CMakeFiles/sample.dir/src/Object.cpp.obj
[ 45%] Building CXX object CMakeFiles/sample.dir/src/World.cpp.obj
Linking CXX executable bin/sample.exe
[ 45%] Built target sample
[ 50%] Building CXX object CMakeFiles/sample_test.dir/test/KeyBufferTest.cpp.obj

[ 54%] Building CXX object CMakeFiles/sample_test.dir/test/ObjectTest.cpp.obj
[ 66%] Building CXX object CMakeFiles/sample_test.dir/src/KeyBuffer.cpp.obj
[ 75%] Building CXX object CMakeFiles/sample_test.dir/src/Object.cpp.obj
[100%] Building CXX object CMakeFiles/sample_test.dir/src/World.cpp.obj
Linking CXX executable bin/sample_test.exe 
```

如您所见`Object.cpp`，编译两次`World.cpp`！`KeyBuffer.cpp`我该如何预防？或者有没有更好的方法来使用 CMake 处理 CppUnit 测试？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-07T14:14:20.480

从概念上讲，CMake 将每个目标（即可执行文件或库）视为一个单独的构建单元。生成的构建系统将为属于目标的每个源文件生成一个目标文件。默认情况下，CMake 不会避免对多个目标中使用的源文件进行冗余编译，即使编译设置（编译标志、预处理器定义......）完全相同。

CMake 2.8.8 引入了一个名为target 的[新特性](http://www.cmake.org/cmake/help/v2.8.8/cmake.html#command%3aadd_library)`OBJECT_LIBRARY`来解决避免冗余编译的问题：

要生成对象库，请使用`add_library`：

```
FILE(GLOB_RECURSE SAMPLE_SOURCE_FILES ${SAMPLE_SOURCE_PATH}/*.cpp)
ADD_LIBRARY(sample_objects OBJECT EXCLUDE_FROM_ALL ${SAMPLE_SOURCE_FILES}) 
```

其他目标创建`add_library`或`add_executable`可能使用以下形式的表达式引用对象`$<TARGET_OBJECTS:objlib>`：

```
ADD_EXECUTABLE(${SAMPLE_EXEC_NAME} $<TARGET_OBJECTS:sample_objects>)

FILE(GLOB_RECURSE SAMPLE_TEST_SOURCE_FILES ${SAMPLE_TEST_SOURCE_PATH}/*.cpp)
ADD_EXECUTABLE(${SAMPLE_TEST_EXEC_NAME} $<TARGET_OBJECTS:sample_objects> ${SAMPLE_TEST_SOURCE_FILES}) 
```

与使用常规静态库避免冗余编译相比，对象库的优点是不需要链接。最重要的是，它不能被导入、导出或安装。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-07T13:52:51.913

每个目标可能配置了不同的编译器标志，因此如果将一个源文件添加到两个目标，则需要从这一个源文件为两个目标生成单独的目标文件。

通常的解决方案是将共享源文件编译成一个静态库，然后将其链接到两个应用程序目标。

```
add_library(base STATIC ${shared_SOURCES}) # except e.g. foo_main.cpp

add_executable(foo ${foo_only_SOURCES})
target_link_libraries(foo base)

add_executable(bar ${bar_only_SOURCES})
target_link_libraries(bar base) 
```

# sip - pjsua 调用失败

> ID：11846839
> 
> 赞同：1
> 
> 时间：2012-08-07T13:13:33.223
> 
> 标签：sip, voip, pjsip

我在使用 pjsua 通话时遇到问题。在服务器上注册总是成功的，但大多数时候我尝试打电话给我的手机，通话状态永远是 CALLING 并且什么都没有发生，或者我收到错误 406（不可接受）。仅在少数情况下（约 20 次中的 1 次）通话成功。当我尝试使用提供商的软电话拨打电话时，一切正常。但是，我的工作需要命令行界面。

这些是我从我的 sip 提供商那里获得的信息：

```
SIP port: 5060
Proxy: viphone.sk
Use Outbound Proxy: yes
Outbound Proxy: sip.break.viphone.sk
Register: yes
User ID: AAAAA
User Auth ID: YES
Password: Authenticate Password: XXXXX
Auth ID: AAAAA
Prefered Codec: G729a
Use Prefered Codec Only: no 
```

这些是启动 pjsua 时使用的选项：

```
--registrar  sip:viphone.sk
--id         sip:AAAAA@viphone.sk
--proxy      sip:viphone.sk;lr
--outbound   sip:sip.break.viphone.sk;lr
--realm      *
--username   AAAAA
--password   XXXXX 
```

我正在像这样运行 pjsua： pjsua --config-file conf sip:myMobNumber@viphone.sk

我的配置有什么问题或遗漏吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-03T13:34:26.560

我的解决方案是将选项添加`--no-tcp`到配置中，从而避免使用 TCP。我不确定它为什么会尝试，因为无论如何它应该默认使用 UDP ......

希望这可以帮助！

免责声明：我知道这是一个旧帖子，它可能不应该属于这里，但我一直在寻找相同的答案一段时间，并且那里没有很多资源。这个一直出现在谷歌搜索中，所以它可能真的对某人有帮助。

# android - 科尔多瓦和 iframe

> ID：11846847
> 
> 赞同：0
> 
> 时间：2012-08-07T13:13:47.940
> 
> 标签：android, cordova

我有一个与cordova一起使用的sencha-touch应用程序。所有工作查找（本地文件、本地存储、ajax、json ...）

当我附加到一个面板时

> html: <iframe src=http://foo.com>

所有工作查找：如果 foo.com 可访问，则页面显示在 iframe 中。

但是，如果 foo.com 停止/无法访问，我会收到“应用程序错误”警报，然后应用程序退出！

控制台显示：

> CordovaWebViewClient.onReceivedError: 错误代码=-6 描述=Echec de connexion...

科尔多瓦 1.9.0

煎茶触摸2.0

Android SDK 3.1，到 Galaxy Note Android 4.0.3

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-09T17:25:50.927

尝试在您的活动中处理 onReceivedError。

```
public void onReceivedError( int errorCode, String description, String failingUrl)
{
    super.loadUrl("file:///android_asset/www/noConnection.html");
    return;

} 
```

这是一个链接：[http ://tech.sarathdr.com/featured/how-to-get-url-not-reached-error-in-anodroid-phonegap](http://tech.sarathdr.com/featured/how-to-get-url-not-reached-error-in-anodroid-phonegap)

希望能帮助到你！

# java - 对 Hibernate HQL 语句的复杂 SQL 查询

> ID：11846858
> 
> 赞同：0
> 
> 时间：2012-08-07T13:14:37.150
> 
> 标签：java, sql, hibernate, hql

以下 SQL 查询：

```
select distinct hotel.country 'Country', hotel.id 'Hotel ID', hotel.Name'Name', room.id 'Room ID'
from room, stay, reservation, hotel
where
(stay.roomid = room.id) 
and (stay.reservationid = reservation.id) 
and (reservation.status != 'Booked' AND reservation.status != 'CheckedIn')
and (reservation.arrivaldate >= '2012-08-08')
and (reservation.leavedate <= '2012-08-15')
and (room.hotelid = hotel.id)
order by hotel.country, hotel.id, hotel.name, room.id asc 
```

这将为我提供每个国家/地区每家酒店的可用客房列表。现在我必须把它放在 HQL 中，但因为这个我不能这样做：

```
Query query = session.createQuery("from room, stay, reservation, hotel where stay.roomid = room.id"); 
```

这不起作用，因为`stay.roomid`它是一个 Room 对象，而`room.id`它只是一个整数。我对 Hibernate/HQL 很陌生，参考手册并没有真正带我去任何地方......我如何“转换”（可怕的词，我知道这不涉及实际转换）这个 SLQ 查询到 HQL 语句? 谢谢。

**更新**

使用连接会导致同样的问题

```
Query query = session.createQuery("" +
                    "from Stay stay " +
                    "join stay.ReservationID reservation " +
                    "join stay.RoomID room " +
                    "join room.HotelID hotel " +
                    "where (stay.RoomID = room.ID)"); 
```

我真的在这里错过了一些东西（可能非常合乎逻辑）......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T13:19:53.227

您尚未显示您的实体，但是，就像在 SQL 中使用联接一样，您需要在 HQL 中使用联接：

```
select ...
from Stay stay
join stay.reservation reservation
join stay.room room
join rom.hotel hotel
where (reservation.status != 'Booked' AND reservation.status != 'CheckedIn')
and (reservation.arrivaldate >= '2012-08-08')
and (reservation.leavedate <= '2012-08-15') 
```

Hibernate 文档有一整章是关于 HQL 的，本章中有一节是关于 HQL 中的[关联的](http://docs.jboss.org/hibernate/core/3.6/reference/en-US/html_single/#queryhql-joins)。

# c# - 如何获取 Visual Studio 命令列表？

> ID：11846864
> 
> 赞同：10
> 
> 时间：2012-08-07T13:14:41.370
> 
> 标签：c#, visual-studio-2010, vsix, visual-studio-extensions

我们正在开发一个 VS 扩展，它需要一个 Visual Studio 命令列表，如此屏幕截图中的命令：

![Visual Studio 2010 的屏幕截图，工具 > 选项 > 键盘](../Images/f548ef352c32f6b3dfa5c5600c6c36aa.png)

例子：

*   操作.添加
*   Action.Add.NETFrameworkLaunchCondition
*   Action.AddAction
*   ... ETC。

我们在哪里可以找到或如何访问此列表？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-10T02:45:40.680

您可以通过 DTE 接口访问它。通过（或其他适当的机制）获取 EnvDTE.DTE 接口`GetService(typeof(SDTE))`，然后：

```
EnvDTE.DTE dte = ...;
var commands = dte.Commands.Cast<EnvDTE.Command>();

foreach (var command in commands.OrderBy(c => c.Name))
{
    Console.WriteLine(command.Name);
} 
```

我应该提到这可能会很慢，所以如果可以的话最好避免......

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-07T13:17:39.057

Visual Studio 包含此列表`...\Microsoft Visual Studio 9.0\Common7\IDE\*.vsk`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-05-17T08:29:27.543

[这](https://github.com/ligershark/VoiceExtension/blob/master/src/Resources/commands.txt)是 Mads Kristensen 为他的 VS VoiceExtension 编译的一个方便的 VS 命令列表。

# iphone - UITableView 单元格内容视图中的 UIImageView 未更新

> ID：11846865
> 
> 赞同：0
> 
> 时间：2012-08-07T13:14:45.093
> 
> 标签：iphone, uitableview, uiimageview

在我的 iPhone 应用程序中，我有`UITableView`一个 UIImageView、按钮和标签。我正在根据来自服务器的值更新我的数据库并更新表格视图中的详细信息。如果我第二次运行该应用程序，在服务器上进行一些修改后，图像视图没有得到更新。按钮和标签正在更新。当我从数据库中检查图像的本地路径时，它会在文档文件夹中显示新图像，但表格单元格仍显示旧图像。要查看更新的图像，我应该重新安装该应用程序。我应该怎么做才能解决这个问题？

这是我所做的工作流程：

1.  从数据库加载新值，并将所有值保存在数组中
2.  删除表格视图
3.  再次创建表视图
4.  重新加载表格视图。

**Edit** //为表格视图创建自定义单元格以显示不同的对象

```
- (UIMenuItemCell *) getCellContentView:(NSString *)cellIdentifier {

    CGRect CellFrame = CGRectMake(0, 0, 150, 60);
    CGRect Label1Frame = CGRectMake(20, 23, 98, 30);
    CGRect imgFrame = CGRectMake(20, 48, 110, 123);
    CGRect btnFrame = CGRectMake(25, 136, 100, 30);

    UILabel *lblTemp;
    UIImageView *itemImg;
    UIButton *itemBtn;

    UIMenuItemCell *cell = [[UIMenuItemCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:cellIdentifier];
    cell.frame = CellFrame;

    //Initialize Label with tag 1\.  
    lblTemp = [[UILabel alloc] initWithFrame:Label1Frame];
    lblTemp.tag = 1;
    lblTemp.textColor=[UIColor colorWithRed:139.0f/255.0f green:69.0f/255.0f blue:19.0f/255.0f alpha:1.0f];
    lblTemp.textAlignment = UITextAlignmentCenter;
    lblTemp.backgroundColor = [UIColor clearColor];
    lblTemp.font = [UIFont systemFontOfSize:13.0];
    [cell.contentView addSubview:lblTemp];
    [lblTemp release];

    //Initialize ImageView
    itemImg = [[UIImageView alloc]initWithFrame:imgFrame];
    itemImg.tag = 2;
    [cell.contentView addSubview:itemImg];
    [itemImg release];

    //Initialize Button
    itemBtn = [[UIButton alloc]initWithFrame:btnFrame];
    itemBtn.frame = btnFrame;
    itemBtn.tag = 3;
    itemBtn.titleLabel.textColor = [UIColor blueColor];
    itemBtn.titleLabel.font = [UIFont systemFontOfSize:9.0];
    [cell.contentView addSubview:itemBtn];
    [itemBtn release];

    return cell;
} 
```

// 自定义表格视图单元格的外观。

```
 - (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
    {

        NSString *CellIdentifier = [NSString stringWithFormat:@"Cell%d", indexPath.row];

        UIMenuItemCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

        if(cell == nil){
            cell = [self getCellContentView:CellIdentifier];

            cell.transform = CGAffineTransformMakeRotation(M_PI_2);
            cell.selectionStyle = UITableViewCellSelectionStyleNone;

            cell.cellItemName = (UILabel *)[cell viewWithTag:1];
            cell.cellitemImage = (UIImageView *)[cell viewWithTag:2];
            cell.cellItemButton = (UIButton *)[cell viewWithTag:3];

            DataBaseClass *itemObj = [appDelegate.itemArray objectAtIndex:indexPath.row];

            NSString *imageLocalFilePath = nil;
            if ([[tempitemStatusArray objectAtIndex:indexPath.row] isEqualToString:@"NotAvailable"]) {
                cell.cellItemProgress.hidden = YES;
                cell.cellItemButton.hidden = NO;
                imageLocalFilePath = [NSString stringWithFormat:@"%@",[tempItemLocalNotAvailPath objectAtIndex:indexPath.row]];
                NSString *date = [self changeDateFormat:itemObj.itemReleaseDate];          
                [cell.cellItemButton setTitle:date forState:UIControlStateNormal]; 
                cell.cellItemButton.userInteractionEnabled = NO;
                cell.userInteractionEnabled = NO;
                [cell.cellItemButton removeTarget:nil action:NULL forControlEvents:UIControlEventAllEvents];
                [cell.cellItemButton setBackgroundImage:[UIImage imageNamed:@"not_available_bttn_bck_img"] forState:UIControlStateNormal];
            }else if ([[tempitemStatusArray objectAtIndex:indexPath.row] isEqualToString:@"Available"]){
                cell.cellItemButton.userInteractionEnabled = YES;
                cell.userInteractionEnabled = YES;
                cell.cellItemProgress.hidden = YES;
                [cell.cellItemButton setTitle:@"" forState:UIControlStateNormal];
                [cell.cellItemButton setBackgroundImage:[UIImage imageNamed:@"available_bttn_img_normal"] forState:UIControlStateNormal];
                [cell.cellItemButton setBackgroundImage:[UIImage imageNamed:@"available_bttn_img_pressed"] forState:UIControlStateHighlighted];
                [cell.cellItemButton removeTarget:nil action:NULL forControlEvents:UIControlEventAllEvents];
                [cell.cellItemButton addTarget:self action:@selector(confirmationAlert:) forControlEvents:UIControlEventTouchUpInside];
                imageLocalFilePath = [NSString stringWithFormat:@"%@",[tempItemLocalAvailPath objectAtIndex:indexPath.row]];
            }
            if ([imageLocalFilePath isEqualToString:@""]) {
                [cell.cellitemImage setImage:[UIImage imageNamed:@"item01.png"]];
            }else {
                [cell.cellitemImage setImageWithURL:[NSURL fileURLWithPath:imageLocalFilePath] placeholderImage:[UIImage imageNamed:@"item01.png"]];
            }        
            cell.cellItemName.text = [NSString stringWithFormat:@"%@",[tempItemNameArray objectAtIndex:indexPath.row]];
        }

        return cell;
    } 
```

请帮忙。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-21T06:36:19.987

我发现了问题，在`cellForRowAtIndexPath`设置图像的方法中，我使用了代码

`[cell.cellitemImage setImageWithURL:[NSURL fileURLWithPath:imageLocalFilePath] placeholderImage:[UIImage imageNamed:@"item01.png"]];`

我使用外部类调用`ImageLoading`来加载图像，并且该类包含一些缓存方法，这导致了问题。所以我把那条线改成

```
[cell.cellitemImage setImage:[UIImage imageWithContentsOfFile:imageLocalFilePath]]; 
```

解决了这个问题。

谢谢你的支持 ：）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T14:09:11.497

我先看了你的代码，发现了这个“错误”：

```
 NSString *CellIdentifier = [NSString stringWithFormat:@"Cell%d", indexPath.row]; 
```

所以......它不会给你任何错误，它有效......

但这与表格的工作方式背道而驰：这样做您正在为数组/数据库的每个项目创建并分配一个新单元格，这意味着如果您需要滚动查看 1.000 个项目，则创建 1.000 个单元格！！！

它不应该是这样的。

通常，表格只创建需要在屏幕/显示器上显示的单元格

这意味着如果您的表格区域的高度为 300 像素，并且每个单元格的高度为 30 像素，那么您可能只需要 11 个单元格，并且您应该只使用/分配 11 个单元格，而不是 1.000

单元格的神奇之处在于当用户将单元格滚动出屏幕（例如向上）时重用单元格，用新的项目数据设置它的数据和图像并将其再次放在屏幕上（例如向下）

这就是 CellIdentifier 通常用于的用途，并且对于表中的所有单元格应该是相同的（至少如果所有单元格都相似，但包含的数据，并且您不需要不同的单元格）

如果您管理太多项目，分配太多单元格可能会给您带来记忆问题......

ps

我可能没有回答您的问题，您的代码中可能还有其他问题，正如我所说，我只是匆忙阅读

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-07T13:37:07.087

应该有一个 `}`

行后

```
cell.cellItemButton = (UIButton *)[cell viewWithTag:3]; 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-08-07T13:28:17.707

您将不得不在从数据库中加载数据和重新加载表格视图之间保留一些时间延迟。然后，您将能够看到更新的图像。

# java - EJB 注入错误

> ID：11846866
> 
> 赞同：5
> 
> 时间：2012-08-07T13:14:53.437
> 
> 标签：java, glassfish, ejb, weblogic, java-ee-6

我有一个 EAR 文件 (JEE6)，其中包含一个 ejb-jar (sample-ejb) 文件和一个 war 文件 (sample-web)。这是结构：

```
sample-ear
         |----sample-ejb.jar
         |         |---TestEjb.java (@Singleton)
         |
         |----sample-web
                   |---StartupEjb.java (@Singleton,@Startup)
                   |---TestListener.java (@WebListener) 
```

当我想将 TestEjb 注入 StartupEjb 或 TestListener 时：

```
@EJB
private TestEjb testEjb; 
```

我收到以下错误：

玻璃鱼：

```
Caused by: com.sun.enterprise.container.common.spi.util.InjectionException: Exception attempting to inject Remote ejb-ref name=com.sample.StartupEjb/testEjb,Remote 3.x interface =com.sample.TestEjb,ejb-link=null,lookup=,mappedName=,jndi-name=com.sample.TestEjb,refType=Session into class com.sample.StartupEjb: Lookup failed for 'java:comp/env/com.sample.StartupEjb/testEjb' in SerialContext[myEnv={java.naming.factory.initial=com.sun.enterprise.naming.impl.SerialInitContextFactory, java.naming.factory.state=com.sun.corba.ee.impl.presentation.rmi.JNDIStateFactoryImpl, java.naming.factory.url.pkgs=com.sun.enterprise.naming} 
```

网络逻辑：

```
Caused By: weblogic.application.naming.ReferenceResolutionException: [J2EE:160200]Error resolving ejb-ref "com.sample.StartupEjb/testEjb" from module "sample-web-1.0-SNAPSHOT.war" of application "com.sample_sample-ear_ear_1.0-SNAPSHOT". The ejb-ref does not have an ejb-link and the JNDI name of the target bean has not been specified. Attempts to automatically link the ejb-ref to its target bean failed because no EJBs in the application were found to implement the "com.sample.TestEjb" interface. Link or map this ejb-ref to its target EJB and ensure the interfaces declared in the ejb-ref are correct. 
```

Glassfish 和 Weblogic 都找不到 TestEjb！

顺便说一句，当我为 TestEjb 创建一个远程接口并将其用于注入时，它运行良好！但我不想定义远程接口，我想使用没有接口的 EJB。我不认为我必须为这个简单的用例定义一个远程接口！

您可以从这里下载源代码：[https ://dl.dropbox.com/sh/63hn3n9y3p5ypvi/SsG9iZIvx9/sample.zip?dl=1](https://dl.dropbox.com/sh/63hn3n9y3p5ypvi/SsG9iZIvx9/sample.zip?dl=1)

这是一个使用 NetBeans 创建的简单 Maven 项目。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-07T14:00:43.483

你通常必须定义一个本地接口，例如

```
@Singleton
@Local(PublicInterface.class)
public class MyBean implements PublicInterface {
  ...
} 
```

如果您明确避免使用此接口，则必须将您的 bean 标记为 @LocalBean：

```
@Singleton
@LocalBean
public class MyBean {
  ...
} 
```

PS：代码未经测试，但应该有所帮助。

# html - 用鼠标指针绑定拖动的图像

> ID：11846867
> 
> 赞同：0
> 
> 时间：2012-08-07T13:14:57.610
> 
> 标签：html, drag-and-drop, dom-events

我想实现这样一个功能，即在 mousedown 光标越过某个边界时，拖动图像与光标绑定，并且在 mouseup 时发生 ondrop 事件。我怎样才能实现这样的功能？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T14:55:46.900

这是通过使用鼠标指针添加一个 img 元素来完成的。

# javascript - 使用javascript拆分句子并将其存储到数组中

> ID：11846868
> 
> 赞同：0
> 
> 时间：2012-08-07T13:15:19.013
> 
> 标签：javascript, regex

我正在尝试拆分一个长字符串，它是 html 标签和普通单词和符号的组合。

例如，考虑，

```
var k= '<html><div id="test">it is interesting, but I love you.</div></html>' 
```

我正在尝试拆分此字符串并将其存储到数组中，例如

```
<html>
<div id="test">
it
is
interesting
,
but 
I 
love 
you
.
</div>
</html> 
```

我知道如何分隔 html 标签和名称，但我在使用下划线、句号、逗号和分号等符号时遇到了问题。

我的代码看起来像这样

```
var k,a,rg=/(<.*?>)|(\S+?(?=[\s<]))/g;

k='<html><div id="test"> it is interesting</div></html>';
a=k.match(rg);
console.log(a); // ["<html>", "<div id="test">", "it", "is", "interesting", "</div>", "</html>"] 
```

我如何用正则表达式分隔符号？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T13:16:23.193

你试过[split](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/String/split) () 命令吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T13:18:49.727

有趣的是有人问这个问题，这是我昨天写的一个小提琴，应该可以满足你的要求：

```
function GetInnerTextAsArray(text) {
    var arr,
        tmp = document.createElement("DIV");

        tmp.innerHTML = text;
        text = tmp.textContext||tmp.innerText;

    arr = text.split(/[\s,;]);
    return arr;    
}​ 
```

# mongodb - 使用 centerSphere - MongoDB 获取最近的数据

> ID：11846875
> 
> 赞同：1
> 
> 时间：2012-08-07T13:16:07.663
> 
> 标签：mongodb

我正在尝试从以下数据中获取最接近的数据

```
> db.points.insert({name:"Skoda" , pos : { lon : 30, lat : 30 } }) 
> db.points.insert({name:"Honda" , pos : { lon : -10, lat : -20 } }) 
> db.points.insert({name:"Skode" , pos : { lon : 10, lat : -20 } }) 
> db.points.insert({name:"Skoda" , pos : { lon : 60, lat : -10 } }) 
> db.points.insert({name:"Honda" , pos : { lon : 410, lat : 20 } }) 

> db.points.ensureIndex({ loc : "2d" }) 
```

然后我尝试了

```
> db.points.find({"loc" : {"$within" : {"$centerSphere" : [[0 , 0],5]}}}) 
```

这次我得到了不同的错误

```
error: {
    "$err" : "Spherical MaxDistance > PI. Are you sure you are using radians?",
    "code" : 13461 
```

然后我尝试了

```
> db.points.find({"loc" : {"$within" : {"$centerSphere" : [[10 , 10],2]}}})
error: {
    "$err" : "Spherical distance would require wrapping, which isn't implemented yet",
    "code" : 13462 
```

如何完成这项工作？我只想根据 GEO 点的给定半径获取最接近的数据。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T17:08:41.677

有几点需要注意。首先，您将坐标存储在名为“pos”的字段中，但您正在对名为“loc”的字段进行查询（并已创建索引）。

$centerSphere 采用一组坐标和一个以弧度为单位的值。因此 $centerSphere: [[10, 10], 2] 在 2 *（地球半径）= 12,756 公里的圆中搜索 [10, 10] 周围的项目。$centerSphere 运算符不是为在这么大的区域内搜索文档而设计的（环绕地球两极很棘手）。尝试使用较小的值，例如 0.005。

最后，将坐标存储为数组中的元素可能是一个更好的主意，因为某些驱动程序可能不会保留文档中字段的顺序（并且交换纬度和经度会导致地理位置完全不同）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T07:28:19.393

希望这可以帮助：

地球的半径约为 3963.192 英里或 6378.137 公里。

1英里：

```
db.places.find( { loc: { $centerSphere: [ [ -74, 40.74 ] ,
                                    1 / 3963.192 ] } } ) 
```

# sql-server - 如何为计算列中的不同值使用生成 ID？

> ID：11846877
> 
> 赞同：0
> 
> 时间：2012-08-07T13:16:20.230
> 
> 标签：sql-server

我有一个大查询（已根据我的需要排序），其中一列被计算（查询中其他列的 varchar 组合）。我需要一个增量整数来标识此计算列（重复项应具有相同的 id）。我不能使用排名，因为我需要递增数字的顺序使用了另一个标准，而不是用于生成计算列的标准。

这就是我需要的：

```
OrderByColumn              CalculatedColumn          GeneratedId
    1                        ggg                       1
    1                        aaa                       2
    1                        ggg                       1
    1                        fff                       3
    2                        vvv                       4
    2                        ddd                       5
    3                        ggg                       1
    4                        rrr                       6
    5                        aaa                       2
    5                        ooo                       7
    5                        kkk                       8
    8                        vvv                       4
    9                        aaa                       2 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-07T13:17:44.350

利用

```
ROW_NUMBER() OVER (PARTITION BY XXX ORDER BY YYY) 
```

假设您使用的是 SQL2005 或更高版本

[http://msdn.microsoft.com/en-us/library/ms186734.aspx](http://msdn.microsoft.com/en-us/library/ms186734.aspx)

——尽管就像你说的那样，这并不能解决你的具有相同 ID 的骗局——啊哈！给我一点时间 - 应该可以很容易地做到这一点

编辑：

干得好 -

[http://sqlfiddle.com/#!3/2f014/2](http://sqlfiddle.com/#!3/2f014/2)

```
-- Select stuff:
select vals.val as genid, ord.* from ord
-- Join back to a distinct list of CalculatedColumn with a row_number() to id them
inner join
(select calculatedcolumn, row_number() over (order by calculatedcolumn) as val  from ord group by calculatedcolumn) as vals on vals.calculatedcolumn = ord.calculatedcolumn
order by ord.orderbycolumn 
```

当然，这是在子查询中使用计算列 - 因此您需要重新计算，除非您将值存储在临时表或表变量中

# java - java-log4j-找不到类

> ID：11846881
> 
> 赞同：2
> 
> 时间：2012-08-07T13:16:38.350
> 
> 标签：java, log4j

我在 Java Web 应用程序中使用 Log4j。

现在，当我运行该 Web 应用程序的 servlet 时，这是我得到的错误消息——

描述 服务器遇到一个内部错误 () 阻止它完成这个请求。

例外

```
javax.servlet.ServletException: Servlet execution threw an exception

root cause

java.lang.NoClassDefFoundError: org/apache/log4j/Logger
com.test.ConfigHelper.<clinit>(ConfigHelper.java:45)
com.test.runsinglecrawljob.doGet(runsinglecrawljob.java:126)
javax.servlet.http.HttpServlet.service(HttpServlet.java:621)
javax.servlet.http.HttpServlet.service(HttpServlet.java:722)

root cause

java.lang.ClassNotFoundException: org.apache.log4j.Logger
org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1688)
org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1533)
com.test.ConfigHelper.<clinit>(ConfigHelper.java:45)
com.test.runsinglecrawljob.doGet(runsinglecrawljob.java:126)
javax.servlet.http.HttpServlet.service(HttpServlet.java:621)
javax.servlet.http.HttpServlet.service(HttpServlet.java:722) 
```

现在 ConfigHelper.java 中的代码行（第 45 行）如下 ---

```
protected static final Logger log = Logger.getLogger(ConfigHelper.class); 
```

我检查了 Java 构建路径——log4j 的 JAR 文件已添加到构建路径中。

我在这里做错了什么？如何让 log4j 正常工作？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-07T13:19:14.950

> 我检查了 Java 构建路径——log4j 的 JAR 文件已添加到构建路径中。

仅仅作为*构建*路径的一部分是不够的——你需要确保它在*执行*时可用，例如将它放在`WEB-INF/lib`你的 web 应用程序的目录中，或者可能放在你的 servlet 容器的库路径中。

# sql - 我可以清理这个 XML 查询吗？

> ID：11846883
> 
> 赞同：2
> 
> 时间：2012-08-07T13:16:42.767
> 
> 标签：sql, sql-server, xml

这是我目前使用的查询：

```
DECLARE @Index AS INT
SET @Index = 1
SELECT
  auditId,
  parameters.value('(params/param[position()=sql:variable("@Index")]/node())[1]', 'nvarchar(256)') AS value,
  parameters.value('(params/param[position()=sql:variable("@Index")]/@entityId)[1]', 'nvarchar(256)') AS entityId,
  parameters.value('(params/param[position()=sql:variable("@Index")]/@entityType)[1]', 'bigint') AS entityType,
  parameters.value('(params/param[position()=sql:variable("@Index")]/@localizable)[1]', 'bit') AS localizable
FROM
  audit 
```

我的审计表包含一个看起来像这样的参数 XML 节点：用户名计算机名

我想知道是否有办法摆脱多余的`parameters.value('(params/param[position()=sql:variable("@Index")]`部分，也许可以作为一个连接来做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-07T13:38:27.347

您可以使用`cross apply`.

```
SELECT
  auditId,
  T.N.value('.', 'nvarchar(256)') AS value,
  T.N.value('@entityId', 'nvarchar(256)') AS entityId,
  T.N.value('@entityType', 'bigint') AS entityType,
  T.N.value('@localizable', 'bit') AS localizable
FROM audit
  CROSS APPLY parameters.nodes('/params/param[sql:variable("@Index")]') AS T(N) 
```

# javascript - jQuery 的 slideUp()/slideDown() 上的输入字段清空

> ID：11846887
> 
> 赞同：0
> 
> 时间：2012-08-07T13:17:00.570
> 
> 标签：javascript, jquery

我有一个带有一些文本的输入字段，我正在尝试切换它的可见性。我遇到的问题是在字段上切换幻灯片动画后，它的文本是不可见的。但是，当该字段成为焦点时，文本再次可见。

我已经在 Safari/IE/FF 上对此进行了测试，并且输入文本仍然可见，但我无法弄清楚 Chrome 为何如此奇怪。

[http://jsfiddle.net/f63Et/1/](http://jsfiddle.net/f63Et/1/)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-07T13:29:35.103

问题是 jQuery 将输入的显示设置为`inline-block`它执行的时间`.slideDown()`，这使得 Chrome 不正确地呈现它。

您有几个选项，例如[将输入包装在 div](http://jsfiddle.net/f63Et/7/)中，或[将显示设置为阻止](http://jsfiddle.net/f63Et/6/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T13:20:34.557

您可以尝试通过放入 slideDown() 的回调来手动聚焦它：

```
$(this).focus() 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-07T13:28:01.653

这并不能回答为什么 Chrome 行为异常的问题，但是，作为一种解决方法，如果您将输入包含在 div 中：

```
<div id="text"><input type="text" /></div> 
```

然后`slideToggle`是 div：

```
$(document).on('click', '#slide', function() {
    $('#text').slideToggle();
}); 
```

这似乎在 Chrome 中有效。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-07T13:31:46.570

作为变体，您可以使用`$('input').toggle('slow')`

# c# - 添加 表单周围的标签禁止 Razor 代码填充输入元素

> ID：11846891
> 
> 赞同：0
> 
> 时间：2012-08-07T13:17:11.693
> 
> 标签：c#, html, asp.net-mvc, forms

我正在为 Event 数据模型创建一个编辑表单，其中输入元素填充有用于编辑的 Event 属性。在我完成填充字段并格式化页面后，我意识到我忘记了表单标签。添加它们后，我的 Razor 代码完全停止工作，所有输入元素都为空。我尝试禁用代码的各个部分，包括所有 javascript 和 css，除了删除表单标签之外，似乎没有任何东西可以重新填充字段。

这是代码：

```
@model Objects.Models.Event.Event

@using EventSignup.Extensions

@{
    ViewBag.Title = "Edit";
}

<script src="@Url.Content("~/Scripts/jquery-ui-1.8.22.min.js")" type="text/javascript"></script>
<link href="@Url.Content("~/Content/themes/base/jquery.ui.all.css")" rel="stylesheet" type="text/css" />
<script src="@Url.Content("~/Javascript/jquery-ui-timepicker-addon.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Javascript/Edit.js")" type="text/javascript" ></script>

<h2>Edit</h2>

<div class="hero-unit">
<form action="" id="event_form" method="post">
    <label for="name">Event Name:</label>
    <input type="text" name="name" id="name" value="@Model.EventName" /><br />

    <label for="tickets"># of Tickets:</label>
    <input type="text" name="tickets" id="tickets" value="@Model.Tickets" /><br />

    <label for="location">Location:</label>
    <select name="location" id="location">        
        @foreach (var Element in ViewBag.Buildings as List<EventSignup.ViewModels.SelectElement>)
        {
            <option value="@Element.ID" @((Model.TicketsLocation.ID == @Element.ID) ? "selected='selected'" : "")>@Element.DisplayName</option>
        }
    </select><br />

    <label for="dates">Dates/Times:</label>
    @foreach (var EventInfo in Model.Dates)
    {
        <input type="text" class="date" name="dates" id="dates@(Model.Dates.IndexOf(EventInfo)+1)" value="@EventInfo.DateTime.ToDateTimePickerString()"/><br />
        if (EventInfo != Model.Dates.Last())
        {
            <label></label>
        }
    }
    <div id="date_inputs">
    </div>
    <label></label>
    <span id="new_date" class="fauxlink" onclick="newDate()">New Date/Time</span><br /><br />
    <input type="hidden" id="num_dates" value="@Model.Dates.Count" />

    <input type="submit" id="submit" value="Submit" /><br />
</form>
</div> 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-07T13:18:43.507

不要直接使用表单元素 - 使用[`BeginForm`](http://msdn.microsoft.com/en-us/library/system.web.mvc.html.formextensions.beginform.aspx)HTML 助手：

```
@using (Html.BeginForm())
{

} 
```

您还应该为不同的模型属性使用模板编辑器：

```
@Html.EditorFor(model => model.EventName) 
```

* * *

更新：

我通常发现如果标记无效（`"`属性末尾缺失、未正确关闭的元素等），Visual Studio/Razor 将停止工作（例如没有智能感知）。仔细检查你的标记，看看你在哪里有这样的错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-07T13:21:34.893

您应该考虑使用 Asp.net mvc 3 助手来构建表单而不是常规的 html 标记，并基于模型构建表单。这也会对您的表单输入进行编码，并允许您验证 AntiFrogery 令牌：

```
@using (Html.BeginForm("actionhere", ..other arguments))
{
    @Html.DropDownFor(x => x.ModelProperty, Model.List);
} 
```

# objective-c - 从 .m (Objective-C) 文件生成 .c 源代码

> ID：11846898
> 
> 赞同：0
> 
> 时间：2012-08-07T13:17:30.340
> 
> 标签：objective-c, gcc, clang

是否可以使用 GCC 或 Clang（或其他工具）从 Objective-C 源文件（.m）生成 C 源文件（.c）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T14:09:56.023

不，但您可能对 C++ 重写器感兴趣。给定一个objective-C文件，假设：

```
#import <stdio.h>
int main() {
    void (^blk)(void) = ^{
        printf("hi");
    };
    blk();
    return 0;
} 
```

你可以得到一个 C++ 版本

```
clang -rewrite-objc main.c 
```

很高兴看到 Objective-C 是如何实现的。大部分文件将只是 C.

一些结果表达式是密集的。您需要耐心、C 知识和[Objective-C 运行时参考](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/ObjCRuntimeRef/Reference/reference.html)。[http://cdecl.org/](http://cdecl.org/)有助于处理小块。

# objective-c - 在可可的 try/catch 中传播错误

> ID：11846899
> 
> 赞同：0
> 
> 时间：2012-08-07T13:17:34.773
> 
> 标签：objective-c, cocoa, exception, exception-handling, try-catch

我想在方法的 catch 块内引发异常，并在调用早期方法的另一个方法的 catch 中处理它。我试过这个逻辑-

```
method B()
{
    @try{
        .......
        // calling method where is probable chance of exception

    method A();
    }
    catch(NSException e)
    {
        //catching the exception thrown in the method B()
        NSString* theError=[e reason];
        NSLog(@"the error is == %@",theError);
    }
}

method A()
{
    @try{
        .............
        //throw an exception incase of some condition
        throw e;
    }
    catch(NSException e)
    {
        //rethrowing the exception, want to catch in the method from where this method is called.  
        throw e;
    }
} 
```

但是方法 B() 的 catch 块永远无法访问。控件永远不会返回到方法 B() 的 catch 块。请建议。

谢谢， 苏丹苏

* * *

这是一些代码。我正在从 MyController 调用 TableController 的方法（populateData）。异常应该发生在 TableController(initializeTest) 的另一个方法中，我将它扔到 FinderCompleted 方法的 try 块中。在相同方法的 catch 块中，重新抛出异常，因为我不想在这里处理它。控件仅限于方法的最里面的 catch 块 - (void)FinderCompleted:(id)args NSLog 打印如下 - m here 1 在错误内部你的存储桶中什么都没有：D 第一次抛出异常 Gotcha- -第一次异常，第二次抛出错误是==发生了意外的事情--EXCEPTION

在那之后，我不知道控制在哪里。我希望控件去捕获调用 FinderCompleted 方法的外部方法的块，并打印其他日志，例如 - Gotcha--第 2 次异常，第 3 次抛出 Gotcha--第 3 次异常 第 4 次抛出异常 Gotcha--第 4 次异常错误是发生了意外的事情--EXCEPTION

* * *

```
in MyController.m

- (IBAction)fetchResults:(id)sender
{
    NSArray *tableColumnArray = ...............;//some values initialized
    NSArray *identifierArray = ................;//some values initialized
    NSArray *bindVariableArray = ................;//some values initialized
    TableController *pTC = [[TableController alloc] init];
    @try
    {
        [pTC populateData :tableColumnArray :identifierArray :bindVariableArray];// calling populate DataForMD method defined in  TableController class
        [pTC release];
    }
    @catch (NSException * e)
    {
        NSLog(@"Gotcha--4th time exception");
        //want to handle the exception here 
        NSString* theError=[e reason];
        NSLog(@"the error is %@",theError);
    }
} 
```

* * *

在 TableController.m 中

```
-(void)populateData:(NSArray *)tableColumnArray:(NSArray *)identifierArray:(NSArray *)bindVariableArray
{
    [self setTableColumnArray:tableColumnArray];
    [self setColumnIdentifierArray:identifierArray];
    [self setBindVarArray:bindVariableArray];
    @try
    {
        NSLog(@"m here 1");
        [self initializeTest];// calling initializeTest method 
    }
    @catch (NSException * e)
    {
        //Do not want to handle it here 
        NSLog(@"Gotcha--3rd time exception");
        NSLog(@"Throwing exception for the 4th time");
        @throw e;
    }
}

-(void)initializeTest
{
    @try
    {
        ISTQuery* theQuery = (ISTQuery*)[ISTQueryGenerator getQueryByName:[self queryClassName]];
        ..........
        ...........//some loc here
        [theQuery run];
        .................//some loc here
        if(theQuery)
        {
            //Calling FinderCompleted method 
            //supposed to get error here
            [[self modelFinder] startWithRecipient:self andNotificationSelector:@selector(FinderCompleted:)];
        }
    }
    @catch(NSException *e) 
    {
        NSLog(@"Gotcha--2st time exception, throwing it 3rd time");
        //Do not want to handle it here 
        @throw e; // rethrows e implicitly
    }
}

- (void)FinderCompleted:(id)args
{
    @try
    {   //getting some error while back-end transaction 
        NSString* theError = [ISTModelFinder errorMessageFromFinderArgs:args];
        if (theError)
        {
            NSLog(@"Inside the error");
            NSLog(@"You got nothing in ur bucket :D");
            NSException *e = [NSException
                              exceptionWithName:@"InternalErrorException"
                              reason:@"Something unexpected happened --EXCEPTION"
                              userInfo:nil];
            NSLog(@"Throwing exception for the 1st time");
            @throw e;
        }       
        else
        {
            //do sth else
        }
    }   
    @catch(NSException *e) 
    {
        NSLog(@"Gotcha--1st time exception , throwing it 2nd time");
        NSString* theError=[e reason];
        //Do not want to handle it here 
        NSLog(@"the error is == %@",theError);
        @throw e; // rethrows e implicitly
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T14:13:52.227

在 Cocoa 或 iOS 编程中，您不能使用异常进行流控制。异常纯粹是为了识别不可恢复的错误，通常情况下，程序会在此后不久故意崩溃。（此规则有少数例外情况，其中大多数都有针对他们的错误，以弃用和消除相关的 API。）

使用该`NSError`模式来管理用户可恢复的错误。

目前尚不清楚为什么您的代码不起作用。但这看起来不像真正的代码。你试过什么？

* * *

> 我已经添加了代码片段，请建议如何实现该功能。

您要做的第一件事是*不要使用异常*。

使用 NSError 模式。您需要重构代码才能做到这一点。这是值得的。

[请参阅有关cocoa](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/ErrorHandlingCocoa/ErrorHandling/ErrorHandling.html)中错误处理的文档。

# android - 从 SQLite 在 achartengine 中创建图形

> ID：11846903
> 
> 赞同：0
> 
> 时间：2012-08-07T13:17:45.637
> 
> 标签：android, sqlite, graph

我正在尝试`achartengine`使用我的 SQLite 数据库中的数据构建一个图表。从数据库中获取数据是可行的，但它总是只构建一个点而不是图形。我究竟做错了什么？

**这是我的代码：**

```
public String getValue1(long l) {
String[] columns = new String[]{ KEY_Value1, KEY_Value2 };
Cursor c = Database.query(DATABASE_TABLE, columns, KEY_ROWID + "=" + l, null, null, null, null);
if (c != null){
c.moveToFirst();
String value1 = c.getString(0);
return value1;
}
return null;
}

public String getValue2(long l) {
String[] columns = new String[]{ KEY_Value1, KEY_Value2 };
Cursor c = Database.query(DATABASE_TABLE, columns, KEY_ROWID + "=" + l, null, null, null, null);
if (c != null){
c.moveToFirst();
String value2 = c.getString(1);
return value2;
}
return null;
} 
```

* * *

```
DB getData = new DB(this);
getData.open();
for (int i = 1; value1 == null; i++) {
Stirng value1 = getData.getValue1(i);
String value2 = getData.getValue2(i);
}
getData.close();

x = Double.parseDouble(value1);
y = Double.parseDouble(value2);

mCurrentSeries.add(x, y);

if (mChartView != null) {
mChartView.repaint();
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T13:24:21.030

编辑此代码的第二部分：

```
DB getData = new DB(this);
getData.open();
for (int i = 1; value1 == null; i++) {
String value1 = getData.getValue1(i);
String value2 = getData.getValue2(i);

x = Double.parseDouble(value1);
y = Double.parseDouble(value2);

mCurrentSeries.add(x, y); //*** this has to be inside the loop in order to draw more than one point ***

}
getData.close();

if (mChartView != null) {
mChartView.repaint();
}
} 
```

# c - 使用 LuaJIT 调用标准打开对话框会导致访问冲突

> ID：11846910
> 
> 赞同：1
> 
> 时间：2012-08-07T13:18:22.910
> 
> 标签：c, winapi, lua, ffi, luajit

使用 LuaJIT 的 FFI遵循[MSDN 的 GetOpenFileName 示例。](http://msdn.microsoft.com/en-us/library/windows/desktop/ms646829%28v=vs.85%29.aspx#open_file)我一直试图让这个工作两天，不仅对话框没有打开，而且整个事情都崩溃了。

当使用 OllyDdb 进行调试时，它会在*comdlg32.dll*的某处引发丑陋的访问冲突。

这是仅包含基本代码的概念证明。如果我指定结构大小为零，它会毫无问题地退出，*GetLastError()*会抛出**87** (ERROR_INVALID_PARAMETER)

所以我认为问题与结构或 FFI 有关。

如果有人能够在这里阐明一些光...谢谢。

```
ffi = require"ffi"
bit = require"bit"

collectgarbage("stop")

ffi.cdef[[
  static const int OFN_FILEMUSTEXIST             = 0x1000;
  static const int OFN_NOCHANGEDIR               = 8;
  static const int OFN_PATHMUSTEXIST             = 0x800;

  typedef bool BOOL;
  typedef char CHAR;

  typedef unsigned short WORD; 
  typedef unsigned long DWORD;

  typedef void *PVOID;
  typedef void *LPVOID;
  typedef void *LPOFNHOOKPROC;

  typedef unsigned long HANDLE;
  typedef HANDLE HWND;
  typedef HANDLE HINSTANCE;

  typedef const char *LPCSTR;
  typedef const char *LPCTSTR;

  typedef char *LPSTR;
  typedef char *LPTSTR;

  typedef unsigned long LPARAM;

  typedef struct {
    DWORD         lStructSize;
    HWND          hwndOwner;
    HINSTANCE     hInstance;
    LPCTSTR       lpstrFilter;
    LPTSTR        lpstrCustomFilter;
    DWORD         nMaxCustFilter;
    DWORD         nFilterIndex;
    LPTSTR        lpstrFile;
    DWORD         nMaxFile;
    LPTSTR        lpstrFileTitle;
    DWORD         nMaxFileTitle;
    LPCTSTR       lpstrInitialDir;
    LPCTSTR       lpstrTitle;
    DWORD         flags;
    WORD          nFileOffset;
    WORD          nFileExtension;
    LPCTSTR       lpstrDefExt;
    LPARAM        lCustData;
    LPOFNHOOKPROC lpfnHook;
    LPCTSTR       lpTemplateName;

    LPVOID        pvReserved;
    DWORD         dwReserved;
    DWORD         flagsEx;

  }OPENFILENAME;

  BOOL GetSaveFileNameA( OPENFILENAME lpofn );
  BOOL GetOpenFileNameA( OPENFILENAME lpofn );
]]
com=ffi.load("comdlg32")

ffi.cdef[[
  DWORD GetLastError(void);
]]
krnl=ffi.load("kernel32")

function OpenDialog()
  Ofn=ffi.new("OPENFILENAME")
  ffi.fill(Ofn,ffi.sizeof(Ofn)) --zero fill the structure

  local szFile        = ffi.new("char[260]","\0")
  local hwnd          = ffi.new("HWND",0)

  Ofn.lStructSize     = ffi.sizeof(Ofn)
  Ofn.hwndOwner       = hwnd

  Ofn.lpstrFile       = szFile
  Ofn.nMaxFile        = ffi.sizeof(szFile)

  Ofn.lpstrFilter     = "All\0*.*\0Text\0*.TXT\0"
  Ofn.nFilterIndex    = 1

  Ofn.lpstrFileTitle  = nil
  Ofn.nMaxFileTitle   = 0

  Ofn.lpstrInitialDir = nil
  Ofn.flags           = bit.bor(com.OFN_PATHMUSTEXIST, com.OFN_FILEMUSTEXIST, com.OFN_NOCHANGEDIR)

  print("displaying...")

  if com.GetOpenFileNameA(Ofn) then --luajit converts bool automatically
    print("file->",ffi.string(Ofn.lpstrFile, Ofn.nMaxFile))
  end

  print("lasterror->",krnl.GetLastError())
end

OpenDialog() 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-07T21:06:44.550

这些 C 函数采用指向结构的指针。正确的声明是：`GetOpenFilenameA(OPENFILENAME *lpofn)`等。

# java - 意外的顶级异常：非法参数异常

> ID：11846911
> 
> 赞同：0
> 
> 时间：2012-08-07T13:18:28.260
> 
> 标签：java, android, exception

我正在尝试运行我在 Eclipse 中设置的 tcp 服务器，但是当我尝试运行它时，我在控制台中遇到了以下问题。如果我需要添加除我包含的文件之外的任何其他 Java 文件，请告诉我。

```
[2012-08-07 09:13:16 - com.Proto1] Dx 
UNEXPECTED TOP-LEVEL EXCEPTION:
java.lang.IllegalArgumentException: already added: Leneter/messaging/dataprocessing/messagequeueing/MessageQueue$1;
    at com.android.dx.dex.file.ClassDefsSection.add(ClassDefsSection.java:123)
    at com.android.dx.dex.file.DexFile.add(DexFile.java:163)
    at com.android.dx.command.dexer.Main.processClass(Main.java:486)
    at com.android.dx.command.dexer.Main.processFileBytes(Main.java:455)
    at com.android.dx.command.dexer.Main.access$400(Main.java:67)
    at com.android.dx.command.dexer.Main$1.processFileBytes(Main.java:394)
    at com.android.dx.cf.direct.ClassPathOpener.processArchive(ClassPathOpener.java:245)
    at com.android.dx.cf.direct.ClassPathOpener.processOne(ClassPathOpener.java:131)
    at com.android.dx.cf.direct.ClassPathOpener.process(ClassPathOpener.java:109)
    at com.android.dx.command.dexer.Main.processOne(Main.java:418)
    at com.android.dx.command.dexer.Main.processAllFiles(Main.java:329)
    at com.android.dx.command.dexer.Main.run(Main.java:206)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source)
    at com.android.ide.eclipse.adt.internal.build.DexWrapper.run(DexWrapper.java:180)
    at com.android.ide.eclipse.adt.internal.build.BuildHelper.executeDx(BuildHelper.java:703)
    at com.android.ide.eclipse.adt.internal.build.builders.PostCompilerBuilder.build(PostCompilerBuilder.java:577)
    at org.eclipse.core.internal.events.BuildManager$2.run(BuildManager.java:728)
    at org.eclipse.core.runtime.SafeRunner.run(SafeRunner.java:42)
    at org.eclipse.core.internal.events.BuildManager.basicBuild(BuildManager.java:199)
    at org.eclipse.core.internal.events.BuildManager.basicBuild(BuildManager.java:321)
    at org.eclipse.core.internal.events.BuildManager.build(BuildManager.java:396)
    at org.eclipse.core.internal.resources.Project$1.run(Project.java:618)
    at org.eclipse.core.internal.resources.Workspace.run(Workspace.java:2344)
    at org.eclipse.core.internal.resources.Project.internalBuild(Project.java:597)
    at org.eclipse.core.internal.resources.Project.build(Project.java:124)
    at com.android.ide.eclipse.adt.internal.project.ProjectHelper.doFullIncrementalDebugBuild(ProjectHelper.java:1000)
    at com.android.ide.eclipse.adt.internal.launch.LaunchConfigDelegate.launch(LaunchConfigDelegate.java:147)
    at org.eclipse.debug.internal.core.LaunchConfiguration.launch(LaunchConfiguration.java:855)
    at org.eclipse.debug.internal.core.LaunchConfiguration.launch(LaunchConfiguration.java:704)
    at org.eclipse.debug.internal.ui.DebugUIPlugin.buildAndLaunch(DebugUIPlugin.java:1047)
    at org.eclipse.debug.internal.ui.DebugUIPlugin$8.run(DebugUIPlugin.java:1251)
    at org.eclipse.core.internal.jobs.Worker.run(Worker.java:54)
[2012-08-07 09:13:16 - com.Proto1] Dx 1 error; aborting
[2012-08-07 09:13:16 - com.Proto1] Conversion to Dalvik format failed with error 1 
```

爪哇

```
import eneter.messaging.diagnostic.EneterTrace;
import eneter.messaging.endpoints.typedmessages.*;
import eneter.messaging.messagingsystems.messagingsystembase.*;
import eneter.messaging.messagingsystems.tcpmessagingsystem.TcpMessagingSystemFactory;
import eneter.net.system.EventHandler;
import android.app.Activity;
import android.os.Bundle;
import android.os.Handler;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.*;

public class AndroidNetCommunicationClientActivity extends Activity {
    // Request message type
    // The message must have the same name as declared in the service.
    // Also, if the message is the inner class, then it must be static.
    public static class MyRequest {
        public String Text;
    }

    // Response message type
    // The message must have the same name as declared in the service.
    // Also, if the message is the inner class, then it must be static.
    public static class MyResponse {
        public int Length;
    }

    // UI controls
    private Handler myRefresh = new Handler();
    private EditText myMessageTextEditText;
    private EditText myResponseEditText;
    private Button mySendRequestBtn;

    // Sender sending MyRequest and as a response receiving MyResponse.
    private IDuplexTypedMessageSender<MyResponse, MyRequest> mySender;

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.tcp_server);

        // Get UI widgets.
        myMessageTextEditText = (EditText) findViewById(R.id.messageTextEditText);
        myResponseEditText = (EditText) findViewById(R.id.messageLengthEditText);
        mySendRequestBtn = (Button) findViewById(R.id.sendRequestBtn);

        // Subscribe to handle the button click.
        mySendRequestBtn.setOnClickListener(myOnSendRequestClickHandler);

        try {
            openConnection();
        } catch (Exception err) {
            EneterTrace.error("Open connection failed.", err);
        }
    }

    @Override
    public void onDestroy() {
        // Stop listening to response messages.
        mySender.detachDuplexOutputChannel();
    }

    private void openConnection() throws Exception {
        // Create sender sending MyRequest and as a response receiving
        // MyResponse
        IDuplexTypedMessagesFactory aSenderFactory = new DuplexTypedMessagesFactory();
        mySender = aSenderFactory.createDuplexTypedMessageSender(
                MyResponse.class, MyRequest.class);

        // Subscribe to receive response messages.
        mySender.responseReceived().subscribe(myOnResponseHandler);

        // Create TCP messaging for the communication.
        // Note: 10.0.2.2 is a special alias to the loopback (127.0.0.1)
        // on the development machine
        IMessagingSystemFactory aMessaging = new TcpMessagingSystemFactory();
        IDuplexOutputChannel anOutputChannel = aMessaging
                .createDuplexOutputChannel("tcp://10.0.2.2:8060/");

        // Attach the output channel to the sender and be able to send
        // messages and receive responses.
        mySender.attachDuplexOutputChannel(anOutputChannel);
    }

    private void onSendRequest(View v) {
        // Create the request message.
        MyRequest aRequestMsg = new MyRequest();
        aRequestMsg.Text = myMessageTextEditText.getText().toString();

        // Send the request message.
        try {
            mySender.sendRequestMessage(aRequestMsg);
        } catch (Exception err) {
            EneterTrace.error("Sending the message failed.", err);
        }
    }

    private void onResponseReceived(Object sender,
            final TypedResponseReceivedEventArgs<MyResponse> e) {
        // Display the result - returned number of characters.
        // Note: Marshal displaying to the correct UI thread.
        myRefresh.post(new Runnable() {
            public void run() {
                myResponseEditText.setText(Integer.toString(e
                        .getResponseMessage().Length));
            }
        });
    }

    private EventHandler<TypedResponseReceivedEventArgs<MyResponse>> myOnResponseHandler

    = new EventHandler<TypedResponseReceivedEventArgs<MyResponse>>() {
        public void onEvent(Object sender,
                TypedResponseReceivedEventArgs<MyResponse> e) {
            onResponseReceived(sender, e);
        }
    };

    private OnClickListener myOnSendRequestClickHandler = new OnClickListener() {
        public void onClick(View v) {
            onSendRequest(v);
        }
    };
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T15:26:25.663

我从构建路径中删除了一个无效的 jar 文件，我的问题得到了解决。

# javascript - 如何使用 jQuery 获取 url 的最后两个字符？

> ID：11846913
> 
> 赞同：1
> 
> 时间：2012-08-07T13:18:31.510
> 
> 标签：javascript, jquery, html

我有一个格式如下的网址：

```
base/list.html?12 
```

我想创建一个变量，该变量将等于页面 url 中问号后的数字。就像是：

```
var xxx = anything after the ? ; 
```

然后我需要使用这个函数将动态数据加载到该页面中：

```
if(document.URL.indexOf(xxx) >= 0){ 
alert('Data loaded!');
} 
```

我怎样才能做到这一点？上面的代码是否正确？

谢谢

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-07T13:20:15.873

之后可以使用`split`获取字符吗？在网址中

```
var xxx = 'base/list.html?12';
var res = xxx.split('?')[1]; 
```

或当前页面网址

```
var res = document.location.href.split('?')[1]; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-07T13:22:10.570

```
res = document.location.href.split('?')[1]; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-07T13:23:06.320

重复[6644654](https://stackoverflow.com/questions/6644654/parse-url-with-jquery-javascript)。

```
function parseUrl( url ) {
    var a = document.createElement('a');
    a.href = url;
    return a;
}

var search = parseUrl('base/list.html?12').search;
var searchText = search.substr( 1 ); // removes the leading '?' 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-08-07T13:25:03.000

`document.location.search.substr(1)`也可以

# c++ - 如何将 CS_DROPSHADOW 应用于 CDialog 的子类

> ID：11846914
> 
> 赞同：2
> 
> 时间：2012-08-07T13:18:37.530
> 
> 标签：c++, mfc, dropshadow, cdialog

`MyDialog`我有一个派生自的 c++ 类，`CDialog`我在其中删除了 Windows 框架，从而删除了 Windows 生成的阴影。

我想再次添加阴影，而不添加框架。我发现有一种`CS_DROPSHADOW`可以应用的类风格。但我找不到如何应用它。

我找到了一种方法`ModifyStyle`，但它只修改`WS_...`样式，而不是`CS_...`样式。

如何应用课堂风格`CS_DROPSHADOW`？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-07T15:45:21.280

我的同事帮我注册了一个班级风格是这样的：

```
 WNDCLASS wndClass;
    GetClassInfo(NULL, WC_DIALOG, &wndClass);
    wndClass.style |= CS_DROPSHADOW;
    wndClass.lpszClassName = TEXT("MyDialog");
    RegisterClass(&wndClass); 
```

`WC_DIALOG`常规课程在哪里`CDialog`。

然后在定义我的对话框的资源文件中使用此类：

```
IDD_MYDIALOGEX 54, 22, 264, 95
STYLE DS_SETFONT | DS_CENTER | WS_POPUP
CLASS "MyDialog"
FONT 8, "Microsoft Sans Serif", 0, 0, 0x0
BEGIN
    // Contents ...
END 
```

这增加了一个阴影，这很好。但不是我正在寻找的航空阴影。 ![在此处输入图像描述](../Images/50158a482ca38cbd9ebfbcbaf62197b1.png)

欢迎更多答案！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-07T17:49:46.460

您可能能够保留框架样式，但响应让`WM_NCCALCSIZE`客户端覆盖整个窗口，从而有效地使边框为零宽度。

# symfony - 如何安全地检查节点是否为空？（Symfony 2 爬虫）

> ID：11846918
> 
> 赞同：26
> 
> 时间：2012-08-07T13:18:46.003
> 
> 标签：symfony, web-crawler

当我尝试从页面中获取一些不存在的内容时，我发现了这个错误：

```
The current node list is empty.
500 Internal Server Error - InvalidArgumentException 
```

如何安全地检查此内容是否存在？这里有一些不起作用的例子：

```
if($crawler->filter('.PropertyBody')->eq(2)->text()){
    // bla bla
}

if(!empty($crawler->filter('.PropertyBody')->eq(2)->text())){
    // bla bla
}
if(($crawler->filter('.PropertyBody')->eq(2)->text()) != null){
    // bla bla
} 
```

谢谢，我帮助自己：

```
$count = $crawler->filter('.PropertyBody')->count();
if($count > 2){
    $marks = $crawler->filter('.PropertyBody')->eq(2)->text();
} 
```

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2016-11-13T17:59:59.707

```
$marks = $crawler->filter('.PropertyBody')->count()
    ? $crawler->filter('.PropertyBody')->eq(2)->text() 
    : ''; 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-08-07T13:21:31.657

你有没有尝试过这样的事情？

```
$text = null;
if (!empty($body = $crawler->filter('.PropertyBody'))) {
    if (!empty($node = $body->eq(2))) {
        $text = $node->text();
    }
}

$this->assertContains('yourText', $text); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-11-25T11:16:17.850

```
try {
    $text = $crawler->filter('.PropertyBody')->eq(2)->text();
} catch (\InvalidArgumentException $e) {
    // Handle the current node list is empty..
} 
```

# php - 从 PHP 中的对象获取属性

> ID：11846922
> 
> 赞同：0
> 
> 时间：2012-08-07T13:18:51.183
> 
> 标签：php, wordpress

必须做一些 php 编码，但我对它完全陌生。问题是我试图从名为 $mgm_member 的对象中获取属性值，该对象来自记录网站成员信息的 wordpress 插件。首先我使用：

```
var_dump(get_object_vars($mgm_member)); 
```

结果表明，这个对象有37个属性，并且都有值。比我尝试使用

```
var_dump($mgm_member->phone); 
```

结果为空。我尝试了许多其他属性，但只有该对象的第一个属性具有价值。谁能帮我？非常感谢。

好吧，我想如果“电话”的范围是私有的 var_dump 将无法访问和查看它，是吗？就我而言，我可以使用 var_dump() 函数查看所有属性及其值，但是当我尝试获取一个属性时，它就不起作用了。但是，我可以使用相同的代码获取第一个属性“id”

```
echo $mgm_member->id; 
```

这真的很奇怪。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T13:42:14.950

由于该属性是“私有的”，您需要**创建一个函数来访问并返回它**。

转储可能会显示它们，但您将无法直接访问“私有”属性。

```
class .... {

    public function getPhone()
    {
        return ($this->phone);
    }

} 
```

然后：

```
echo $mgm_member->getPhone(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T13:22:46.427

`var_dump(get_object_vars($mgm_member));`显示对象变量。如果您使用这行代码获取数据，那么您的对象中有数据。

您可以访问代码中变量的属性`$mgm_member->phone`- 为什么不这样做呢？

如果要将数据放入变量中，可以使用以下内容：

```
$myVar=$mgm_member->phone; 
```

但这违背了 OOP 的目的。`$mgm_members->phone`为什么不在你的代码中完全引用它呢？

编辑：正如您所指出的，该属性是`private`意味着只有对象本身可以使用它。你*可以*通过修改对象来解决这个问题，但这可能是一种讨厌的方法——它是私有的，这是有原因的。您不能使用对象中的函数来显示值吗？或者，您可以在对象中使用一个函数来返回具有不同属性属性的对象的克隆吗？

# objective-c - 如何在 iOS 中创建类似于 Pic Jointer / Diptic 应用程序的可调整 UIView

> ID：11846923
> 
> 赞同：4
> 
> 时间：2012-08-07T13:18:49.793
> 
> 标签：objective-c, ios, uiview, uiimageview

我正在开发像[Pic Jointer](http://itunes.apple.com/in/app/pic-jointer/id509987785?mt=8) / [Diptic](http://itunes.apple.com/in/app/diptic/id377989827?mt=8)这样的应用程序。我成功地创建了两个可单独调整大小的单独视图，但我想实现一个可调整的视图，如[Pic Jointer](http://itunes.apple.com/in/app/pic-jointer/id509987785?mt=8)和[Diptic](http://itunes.apple.com/in/app/diptic/id377989827?mt=8)应用程序。

我已经尝试了很多来制作类似于某些示例应用程序的 UIView，但是我未能实现这种功能。我还成功地创建了两个可以调整大小和拖动的独立 UIView。

谁能指导我如何实现这种功能？教程，链接，解释，开源库，什么？

这需要什么样的功能，以及如何使用 UIImageView 和/或 UIView 来实现它？

# asp.net - 站点在 Visual Studio 测试中工作，但在 IIS 服务器中不工作 - aspx

> ID：11846924
> 
> 赞同：1
> 
> 时间：2012-08-07T13:18:55.050
> 
> 标签：asp.net, visual-studio, iis, web-config, http-status-code-404

出于某种我无法弄清楚的原因，我正在处理的 aspx 站点在我的 Visual Studio 临时测试服务器中运行良好，但是当我将它全部复制到 IIS 时，它就不起作用了。我没有编写网站，只了解它的工作原理的一半，但这就是正在发生的事情......

每个页面都使用一个模板。该页面在标签之间包含自己的内容，`<asp:Content ContentPlaceHolderID="MainContent" runat="Server">`并且这些标签之间的所有内容都应该替换`<asp:ContentPlaceHolder ID="MainContent" runat="server">`模板中的标签。

但是，每次我尝试转到除索引之外的任何页面时，它都会加载（自定义）404 页面，即使我知道页面在那里。但是，当我尝试加载图像时，它不是 404。索引页面是奇怪的部分。它使用与其他页面不同的模板，当您访问它时，它不会加载 404 页面，而是加载它自己的模板。但是，内容全部消失了——它只加载了模板。

404 页面的有趣之处在于它使用与其他页面相同的模板，并且错误消息的显示方式与其他所有页面相同`<asp:Content...`，但在这种情况下，它可以正常工作。

那么，可能会发生什么？

我猜它与服务器设置有关，因为它在 Visual Studio 以及实时服务器上都可以正常工作，只是在 IIS 中不行。如果它是相关的，以前，我无法在网站上加载任何图像，但从*Web.config*`runAllManagedModulesForAllRequests='true'`中的`<modules>`标记中删除该行修复了该问题，但 aspx 文件仍然无法加载（正确）。

 *有任何想法吗？*

# solr - 如何在类路径中添加 mysql jdbc 连接器

> ID：11846925
> 
> 赞同：0
> 
> 时间：2012-08-07T13:18:54.490
> 
> 标签：solr, classpath

我已经升级到 solr 3.6 到 SOLR 4.0。我正在使用 dataimporthandler 从数据库中提取数据。我已将 mysql-connector-java-5.1.20-bin.jar 复制到 apache-solr-4.0.0-ALPHA/example/lib 文件夹中。

我还使用 cmd 在类路径中添加了它

```
export CLASSPATH=.:$JAVA_HOME/lib/classes.zip:/usr/solr4/apache-solr-4.0.0-ALPHA/example/lib/mysql-connector-java-5.1.20-bin.jar 
```

当我浏览 solr/admin 页面并单击 java 属性时，它会显示 java.class.path 中 solr-home/lib 文件夹中的所有 .jar 文件，但不添加 mysql-connector-java-5.1.20-bin.jar

mysql-connector-java-5.1.20-bin.jar 没有被添加到 java 类路径中的原因是什么？

让我知道我是否遗漏了什么。

# html - 伪元素 :before 或 :after 在图像元素上

> ID：11846931
> 
> 赞同：0
> 
> 时间：2012-08-07T13:19:21.877
> 
> 标签：html, css, pseudo-element

据我所知，您不能将 :before 或 :after 与图像元素上的文本内容一起使用？它是否正确？我错过了什么吗？

[http://jsfiddle.net/rcztz/](http://jsfiddle.net/rcztz/) _

我知道在语义上这是不正确的，我正在使用，因为我使用 js 将 src 附加到图像，但如果没有 src 我想显示替代内容（我可以使用另一个 div，但它会是很高兴只使用 :after 或 :before)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T13:20:02.127

这是对的。您不能在图像上使用伪元素

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-07T13:21:41.097

正如 lnrbob 所说，您不能在图像上使用伪元素。但是，在图像上放置一个类并使用背景图像，您将完成同样的事情。

# javascript - 如何在 jQuery 验证器中使用 AJAX 检查值是否已存在？

> ID：11846933
> 
> 赞同：0
> 
> 时间：2012-08-07T13:19:25.113
> 
> 标签：javascript, jquery

```
$.validator.addMethod("noanon", function(value) {
return ajaxFunction();
}, 'Username already exists.'); 
```

addMethod 函数接受 3 个参数。名称，实际运行的逻辑，最后，用于失败的默认消息。

```
name: {
 required: true,
 minlength: 2,
 noanon: true
}, 
```

现在，如果我使用 ajaxFunction，似乎会出现一些错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T13:45:07.493

您可以使用`remote`方法：

```
rules: {
    name: {
        remote : "script.php"
    }
},
messages: {
    name: {
        remote : "Page with this name is exists"
    }
} 
```

在 PHP 中，您采用`$_GET['name']`.

附加信息[在这里](http://docs.jquery.com/Plugins/Validation/Methods/remote)

# javascript - cordova.exec() 正在破坏我的应用程序代码

> ID：11846934
> 
> 赞同：1
> 
> 时间：2012-08-07T13:19:32.567
> 
> 标签：javascript, jquery-mobile, cordova

我正在使用 HTML5、Javascript/JQuery Mobile 和 Cordova/Phonegap 开发一个 Ipad 应用程序。它的功能之一是构建和发送电子邮件，我正在使用[EmailComposer](https://github.com/phonegap/phonegap-plugins/tree/master/iPhone/EmailComposer)执行此操作，问题是在 emailcomposer 的屏幕运行并返回应用程序后，许多列表视图（由 Jquery Mobile 生成）停止工作。

调试我发现当函数 cordova.exec() 运行时会发生这种情况。我试图传递空参数，认为可能有些冲突，但问题仍然存在。

```
cordova.exec(null, null, "EmailComposer", "showEmailComposer", [args]); 
```

知道是什么原因造成的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T14:14:35.577

我不认为这个问题与具体有关`cordova.exec`- 这只是对任何本机功能的方法调用。

听起来更像是您的视图的一部分正在被重绘，而不是被 jQuery Mobile 增强。当您返回您的应用程序时，您可以在 jQuery Mobile 上触发`create`或事件。`refresh`

请参阅此页面底部的更新列表部分[http://jquerymobile.com/test/docs/lists/docs-lists.html](http://jquerymobile.com/test/docs/lists/docs-lists.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T11:51:53.163

我也遇到了同样的问题，但现在我解决了：

在“cordova.plist”中写入`Key:EmailComposer`和`value:EmailComposer`.

而已！

# db2 - 用于 COBOL 表读取/插入程序的 JCL

> ID：11846939
> 
> 赞同：0
> 
> 时间：2012-08-07T13:19:50.520
> 
> 标签：db2, cobol, jcl

运行 COBOL 程序需要哪些 JCL EXEC 和 DD 语句

*   读取和插入 DB2 表
*   具有良好运行和异常终止的 PCLog

我不需要实际的代码，但我想知道 exec 语句需要什么。如果可能的话，高管的 DD 也会很方便。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T14:21:00.030

EXEC PGM=IKJEFT01
此实用程序允许您

*   在 COBOL 中执行 DB2 程序
*   绑定到 DB2
*   卸载 DB2 数据

# firefox - Firefox iMacros 循环直到找不到值

> ID：11846943
> 
> 赞同：0
> 
> 时间：2012-08-07T13:20:06.433
> 
> 标签：firefox, loops, imacros

我正在[为 Firefox 使用 iMacros](https://addons.mozilla.org/en-US/firefox/addon/imacros-for-firefox/)，我想循环直到找不到值，因为每个页面都不同。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T02:03:42.897

你不能在 Imacros 中这样做。LOOP 必须有一个最大值，它不能永远存在。用 while 循环编写一个 javascript，并在该循环内使用您搜索的值启动 Imacro 脚本并使其返回结果。

```
var searchValue = "blabla"
var found = false;
while(!found)
var ret;
ret = iimSet("searchValue", searchValue);
ret = iimPlay("myScript.iim");
/* Check for error */
if (ret = 1) {
 /* if no error we found it*/   
 found = true;}
else {
err = iimGetLastError();
/* we check if it is different than the error for Tag not found -921; else we go*/
    if (err !== -921) alert("Other error");
}; 
```

# php - 尽管设置了默认值，但数据库中没有显示任何值

> ID：11846950
> 
> 赞同：0
> 
> 时间：2012-08-07T13:20:21.970
> 
> 标签：php, mysql, html

```
 <p>Special Meal Request:<br />
      <label>
      <input type="checkbox" name="dietaryveg" value="yes" />Vegetarian
      </label>
      <label><input type="checkbox" name="dietaryglut" value="yes" />Gluten-Free
      </label> 
```

这就是我决定为我创建的表单使用的内容。我没有使用单选按钮，因为我只想要一个复选框；我没有给复选框赋予相同的名称，因为它们是数据库中的不同列，因为用户可能需要素食餐和无麸质餐。

但是，当我在 mysql 工作台中打开我的数据库时，未选中的框仍然显示在列中没有值。然后我尝试放置一个值为 no 的隐藏复选框，它是默认选中的，等等。但是两个值在数据库中都显示为 no。

现在，我意识到 php 只关心一个选中的框值，而不是一个未选中的框值——但我认为如果我的数据库中有一个默认值，那应该在那里，就像一个 NULL，不会它？

我真的不想有一个完全独立的表格，只是为了一排排的食物偏好——我敢肯定，我只是缺少一些东西。

我可以就处理这个问题的最佳方法获得一些建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T13:23:51.617

如果您正在执行类似 :`(isset($_POST['dietarygut']))`的操作并且未设置，则该值将被`NULL`上传到数据库。发布您的 PHP 脚本

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T13:28:27.460

你认为什么是你的默认值？对于 HTML 复选框，该`value`属性并不*表示*默认值，而是表示复选框被选中时将发送的值。如果检查了一个不是/无，则不会发送值“是”。

就像 mlishn 在他的回答中所说的那样，您需要以编程方式检查是否设置了一个/两个框，如果是，则插入这些值。

# django - 在 django 的表单集中跨表单使用单选按钮

> ID：11846954
> 
> 赞同：5
> 
> 时间：2012-08-07T13:20:32.660
> 
> 标签：django, django-forms, radio-button

我有一个页面，我在其中使用表单集显示不同的表单。

这些是我的模型：

```
class Phone(models.Model):
    mac = models.CharField()

class PhoneLine(models.Model):
    phone = models.ForeignKey(Phone)
    voicemail = models.BooleanField("Voice Mail", default=False) 
```

一部电话可以有多条线路（电话线），但只有一条电话线可以启用语音信箱。

默认情况下，当我使用 formset 显示电话线时，语音邮件字段显示为一个复选框，如下所示。（根据要求，我在 formset 中添加了前缀）

```
form1 of the formset
<input type="checkbox" name="phone_client_line_1-0-voicemail" id="id_phone_client_line_1-0-voicemail">

form2 of the formset
<input type="checkbox" name="phone_client_line_1-1-voicemail" id="id_phone_client_line_1-1-voicemail"> 
```

（复选框的选中和取消选中会更新后端）

基于这个线程，[Django - Show BooleanField in a formset as a group of radio buttons](https://stackoverflow.com/questions/9759306/django-show-booleanfield-in-a-formset-as-one-group-of-radio-buttons)，我修改了我的电话线表单的**init**和 add_prefix 方法，现在将语音邮件字段显示为单选按钮..

```
class PhoneLineForm(ModelForm):

def __init__ (self, *args, **kwargs):
    super(PhoneLineForm, self).__init__(*args, **kwargs)
    self.fields['voicemail'] = BooleanField( widget = RadioSelect(choices=((self.prefix+"-"+str("voicemail"), 'Voicemail LIne'),)))

def add_prefix(self, field):
    if field == 'voicemail': return ('%s_%s') %(field, self.instance.phone.id)
    else: return self.prefix and ('%s-%s' % (self.prefix, field)) or field 
```

这会将 html 输出修改为以下内容：

```
form1 of the formset
<input type="radio" id="id_voicemail_1_0" value="phone_client_line_1-0-voicemail" name="voicemail_1">

form2 of the formset
<input type="radio" id="id_voicemail_1_0" value="phone_client_line_1-1-voicemail" name="voicemail_1"> 
```

如您所见，现在对于无线电字段 voicemail_1，我有所选电话线的值。如果我提交此表单，在我选择了 voicemail_1 收音机后，它不会更新数据库。

如何捕获提交时选择的电话线的值？如果我覆盖 phonelineform 的保存方法，它应该包含什么......？

对此的任何指示将不胜感激。谢谢！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-10-16T23:32:10.993

我实际上建议简化这一点，并依赖 JavaScript（如果他们选择了多个带有语音邮件的电话线，你总是可以验证服务器端并向用户显示一条消息，因为他们没有启用 JavaScript）。

这比试图破解字段名称和值更简单。Django 表单集在最好的时候是足够难缠的野兽，所以增加服务器端的复杂性通常不值得麻烦，特别是当问题可以通过一点明智的 jQuery 工作以一种不太优雅的方式解决时.

```
$('input[name^="voicemail_"]').on('click',
    function() {
        $('input[name^="voicemail_"]').not($(this)).prop('checked', false);
    }
); 
```

只是一个粗略的建议；希望它有用。

# android - EditTextPreference 中有多个 EditText

> ID：11846957
> 
> 赞同：4
> 
> 时间：2012-08-07T13:20:44.243
> 
> 标签：android

`EditText`正如标题所说，我想知道是否有可能在 a中有多个`EditTextPreference`并将这些 EditText 字段的内容保存在 a 内的单独“键”中`SharedPreference`

![在此处输入图像描述](../Images/6053b16350be361b5d9160c1d353c51d.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-07T13:29:56.143

我猜你只能调用一次 onAddEditTextToDialogView ？简单的方法是尝试调用它两次。但是，它可能只会覆盖您已有的内容。文档没有说明多次调用此方法时会发生什么。

EditTextPreference 来自 DialogPreference。您可以使用多个 TextField 创建自己的 DialogPreference，然后单击 OK 将它们从相应的首选项中保存。这应该是要走的路。

EditTextPreference 内部还有一个 onBindDialogView(View)。您可能可以尝试在此处添加第二个 EditText，但这可能会出现问题。最后一招。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-07T13:31:16.353

是的，有可能。希望这会给你的想法：

```
 LayoutInflater factory = LayoutInflater.from(OptionList.this);            
 final View textEntryView = factory.inflate(R.layout.newgroup, null);
 AlertDialog.Builder alert = new AlertDialog.Builder(OptionList.this); 

  alert.setTitle("Add Group"); 
  alert.setMessage("Enter Group Name"); 
  // Set an EditText view to get user input  
  alert.setView(textEntryView); 
  AlertDialog loginPrompt = alert.create();

  final EditText input1 = (EditText) textEntryView.findViewById(R.id.et1);
  final EditText input2 = (EditText) textEntryView.findViewById(R.id.et2);

  alert.setPositiveButton("Create", new DialogInterface.OnClickListener() { 
  public void onClick(DialogInterface dialog, int whichButton) { 

              //Logic Here

 }); 

  alert.setNegativeButton("Cancel", new DialogInterface.OnClickListener() { 
  public void onClick(DialogInterface dialog, int whichButton) { 
              dialog.cancel();
                  } 
  }); 

  alert.show(); 

} 
```

# cassandra - astyanax 突变批处理失败处理

> ID：11846963
> 
> 赞同：1
> 
> 时间：2012-08-07T13:20:57.363
> 
> 标签：cassandra, astyanax

我需要了解对 MutationBatch.execute() 的调用是否/如何防止运行代码的服务器出现故障。

看看下面的代码（从 Astyanax 示例中复制）。我打算使用此代码修改 2 个不同列族中的 2 行。我需要确保（100%）如果执行此代码的服务器在执行期间的任何时候崩溃/失败： - Cassandra 数据存储中没有任何更改 -*所有*更改（2 行）都应用于 Cassandra 数据存储

我特别关心“OperationResult result = m.execute();”这一行。我假设这会转化为：将所有修改写入 Cassandra 中的提交日志，然后自动触发要在 Cassandra 内部执行的更改（并且 Cassandra 保证在某些服务器上执行）。

对此的任何帮助都非常感谢。

谢谢，斯文。

代码：

```
MutationBatch m = keyspace.prepareMutationBatch();

long rowKey = 1234;

// Setting columns in a standard column
m.withRow(CF_STANDARD1, rowKey)
    .putColumn("Column1", "X", null)
    .putColumn("Column2", "X", null);

m.withRow(CF_STANDARD1, rowKey2)
    .putColumn("Column1", "Y", null);

try {
    OperationResult<Void> result = m.execute();
} catch (ConnectionException e) {
    LOG.error(e);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T11:46:48.983

[http://www.datastax.com/docs/0.8/dml/about_writes](http://www.datastax.com/docs/0.8/dml/about_writes)

*在 Cassandra 中，写入在行级别是原子的，这意味着插入或更新给定行键的列将被视为一次写入操作。Cassandra 不支持将多行更新捆绑到一个全有或全无操作中的事务。*

这意味着，没有办法 100% 确定，该突变将更新两个不同的行或不更新。但是自从 Cassandra 0.8 以来，您至少在单行内将有这样的保证 - 在单行内修改的所有列都将成功或不成功 - 仅此而已。

您可以将不同行上的突变视为单独的事务，它们在单个突变调用中发送的事实不会改变任何事情。Cassandra 内部会将所有操作按行键组合在一起，并将每个行突变作为单独的原子操作执行。

在您的示例中，您可以确保`rowKey`( `Column1`, `Column2`) 或`rowKey2`( `Column1`) 被持久化，但绝不会同时存在。

您可以启用提示切换写入，这会增加写入的可能性，写入会随着时间传播，但同样，这不是 ACID DB

# java - 如果字段是另一个类，则在 jstl 中访问类的字段

> ID：11846970
> 
> 赞同：0
> 
> 时间：2012-08-07T13:21:17.050
> 
> 标签：java, jsp, jstl

我有一个豆类：

```
public class Event{
    private Customer customer
    private String stringdate

    public Event(){}

    /*all getters and setters here*/
}

public class Customer{
    private int custId
    private String custname

    public Customer(){}

    /*all getters and setters here*/
} 
```

有没有办法使用 JSTL 在 jsp 页面上显示内容？

编辑： eventsView 是从 servlet 传入的事件列表。当它是一个 int 字段时，我可以显示“cust”变量，但是当我将它更改为自定义类 Customer 时，我无法显示它，因为我得到下面的异常。

```
<c:forEach items="${ eventsView }" var="events" varStatus="index">
                    <tr>
                        <td>${ index.count }</td>
                        <td>${ events.customer.custid }</td>
                        <td>${ events.stringdate }</td>

                    </tr>
</c:forEach> 
```

谢谢

堆栈跟踪：

```
SEVERE: Servlet.service() for servlet [jsp] in context with path [/CaspinolCustTest] threw exception [An exception occurred processing JSP page /event.jsp at line 32

29:         <c:forEach items="${ eventsView }" var="events" varStatus="index">
30:                             <tr>
31:                         <td>${ index.count }</td>
32:                         <td>${ events.customer.custId }</td>
33:                         <td>${ events.stringdate }</td>   

Stacktrace:] with root cause
java.lang.NumberFormatException: For input string: "customer"
    at java.lang.NumberFormatException.forInputString(NumberFormatException.java:65)
    at java.lang.Integer.parseInt(Integer.java:481)
    at java.lang.Integer.parseInt(Integer.java:514)
    at javax.el.ArrayELResolver.coerce(ArrayELResolver.java:166)
    at javax.el.ArrayELResolver.getValue(ArrayELResolver.java:46)
    at javax.el.CompositeELResolver.getValue(CompositeELResolver.java:67)
    at org.apache.el.parser.AstValue.getValue(AstValue.java:169)
    at org.apache.el.ValueExpressionImpl.getValue(ValueExpressionImpl.java:189)
    at org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate(PageContextImpl.java:985)
    at org.apache.jsp.event_jsp._jspx_meth_c_005fforEach_005f0(event_jsp.java:148)
    at org.apache.jsp.event_jsp._jspService(event_jsp.java:100)
    at org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:70)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
    at org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:432)
    at org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:390)
    at org.apache.jasper.servlet.JspServlet.service(JspServlet.java:334)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:224)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:169)
    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:168)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:98)
    at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:927)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
    at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:987)
    at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:579)
    at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:309)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
    at java.lang.Thread.run(Thread.java:679) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T14:51:53.170

JSTL 使用公共 getter 方法。您需要公共方法：Event 类中的 getCustomer()、getStringDate() 和 Customer 类中的 getCustId()。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-07T13:35:35.073

```
<c:forEach items="${ class2List }" var="element" varStatus="index">
    <tr>
        <td>${ index.count }</td>
        <td>${ element.test1.foo }</td> <%-- calls element.getTest1().getFoo() --%>
        <td>${ element.test2.bar.baz }</td> <%-- calls element.getTest2().getBar().getBaz() --%>
    </tr>
</c:forEach> 
```

请注意，我重命名`list`为`element`，因为该变量是 Class2 的实例，而不是列表。另请注意，与 Java 中不同（会导致 NullPointerException），EL 将自动评估表达式，就`null`好像链中的 bean 之一为空一样。

# javascript - 如何在fullcalendar的列中拆分一天？

> ID：11846973
> 
> 赞同：5
> 
> 时间：2012-08-07T13:21:19.813
> 
> 标签：javascript, jquery, fullcalendar

我想在多列中拆分一天的 Fullcalendar 视图。像这样的东西。我怎样才能做到这一点？ ![在此处输入图像描述](../Images/fc12b72d737719f994ac4747751bc2a6.png)

这个问题与这个[Fullcalendar 部分相关 - 限制为一天](https://stackoverflow.com/questions/7071943/fullcalendar-limit-selectable-to-a-single-day)

谢谢，任何形式的帮助将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2015-06-10T08:12:41.767

我刚刚在[https://github.com/mherrmann/fullcalendar-columns](https://github.com/mherrmann/fullcalendar-columns)上发布了我的解决方案。它目前不允许使用标签（屏幕截图中的“Joe Bloggs”、“Alan Black”等），但它的优点是它*不是*FullCalendar 的克隆，因此您可以更自由地使用您喜欢的 FullCalendar 版本。目前它非常基础，但欢迎提出功能请求。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-29T20:08:45.617

我通过这个链接在这里找到了一些帮助： [http ://code.google.com/p/fullcalendar/issues/detail?id=490](http://code.google.com/p/fullcalendar/issues/detail?id=490)

这导致我

[https://github.com/AbleTech/fullcalendar](https://github.com/AbleTech/fullcalendar)

我使用了 fullcalendar 的这个分支，能够替换我正在使用的 1.5.3，然后使用 resourceDay 视图。

# oracle - 从 oracle 转储导入时，表的顺序是否相关？

> ID：11846974
> 
> 赞同：2
> 
> 时间：2012-08-07T13:21:22.180
> 
> 标签：oracle, oracle11g, dump, imp

我正在尝试从 oracle 转储中导入特定表，为了避免找不到任何父键异常，我想按照一定的顺序导入表。例如，如果表 X 依赖于表 A 和 B，我想先导入 A 和 B：

```
imp user/pass@dbName tables=(A,B,X) rows=y ignore=Y 
```

这个命令会保证 A 和 B 在 X 之前被导入吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-07T14:57:04.223

```
exp userid=ronr tables=COMM_SCHEDULE_DELIVERY,COMM_SCHEDULE_DETAIL,COMM_SCHEDULE_HEADER file=z.dmp
...
...

imp userid=imp fromuser=ronr touser=imp tables=COMM_SCHEDULE_HEADER,COMM_SCHEDULE_DETAIL,COMM_SCHEDULE_DELIVERY file=z.dmp
Import: Release 11.2.0.3.0 - Production on Tue Aug 7 16:53:34 2012

Copyright (c) 1982, 2011, Oracle and/or its affiliates.  All rights reserved.

Password: 

Connected to: Oracle Database 11g Enterprise Edition Release 11.2.0.3.0 - 64bit Production
With the Partitioning, Real Application Clusters, Automatic Storage Management, OLAP,
Data Mining and Real Application Tes

Export file created by EXPORT:V11.02.00 via conventional path

Warning: the objects were exported by RONR, not by you

import done in US7ASCII character set and AL16UTF16 NCHAR character set
import server uses AL32UTF8 character set (possible charset conversion)
. importing RONR's objects into IMP
. . importing table       "COMM_SCHEDULE_DELIVERY"          0 rows imported
. . importing table         "COMM_SCHEDULE_DETAIL"          0 rows imported
. . importing table         "COMM_SCHEDULE_HEADER"          0 rows imported
Import terminated successfully without warnings. 
```

不，在 imp 上指定的顺序并不能保证导入表的顺序，它是按照它们导出的顺序完成的。

# javascript - 用于匹配类似 twitter 的主题标签的 Javascript 正则表达式

> ID：11846975
> 
> 赞同：8
> 
> 时间：2012-08-07T13:21:22.927
> 
> 标签：javascript, regex

我需要一些帮助来找出用于识别“主题标签”的 JS 正则表达式，它们应该匹配以下所有内容：

1.  通常的推特风格标签：`#foobar`
2.  带有文字的标签：`abc123#xyz456`
3.  带有*空格*的标签，表示为：（`#[foo bar]`即 [] 用作标签的分隔符）

对于 1 和 2，我使用了以下形式：

```
var all_re =/\S*#\S+/gi; 
```

我似乎无法弄清楚如何将其扩展到 3。我不擅长正则表达式，请帮忙？

谢谢！

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-08-07T13:25:26.333

所以它必须匹配所有非空格字符或（包括）`[`和之间的任何字符`]`：

```
\S*#(?:\[[^\]]+\]|\S+) 
```

解释：

```
\S*                # any number of non-white space characters
#                  # matches #
(?:                # start non-capturing group
    \[             # matches [
    [^\]]+         # any character but ], one or more
    \]             # matches ]
    |              # OR
    \S+            # one or more non-white space characters
)                  # end non-capturing group 
```

**参考**：[交替](http://www.regular-expressions.info/alternation.html)，[否定字符类](http://www.regular-expressions.info/charclass.html)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-07T13:24:48.293

这个怎么样？

```
var all_re =/(\S*#\[[^\]]+\])|(\S*#\S+)/gi; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-27T10:15:59.513

我遇到了类似的问题，但只想在字符串以主题标签开头和结尾时匹配。如此类似的问题，希望其他人可以使用我的解决方案。

这个匹配“#myhashtag”，但不匹配“gfd#myhashtag”或“#myhashtag”。

`/^#\S+$/`

`^ #start of regex
\S #Any char that is not a white space
+ #Any number of said char
$ #End of string`

就那么简单。

# c# - 如何在运行时为停靠窗口设置背景色？

> ID：11846982
> 
> 赞同：0
> 
> 时间：2012-08-07T13:21:45.470
> 
> 标签：c#, winforms, docking

我在 csharp 中创建了一个停靠窗口程序，我想在执行 exe 后更改该选项卡的颜色。因为这些选项卡将在运行时添加。我可以更改 TabText，但我无法设置值

```
 dockContainer1.ActiveDocument.DockHandler.TabText = "Welcome"

            |Tab1|Welcome|Tab3|
            |                     |
            |                     |
            |                     |
            |                     |
            |_____________________| 
```

我想在运行时更改背景颜色...怎么做..？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T13:42:44.100

有点困惑，但你的意思是......

```
yourTab.BackColor = System.Drawing.Color.TheColourYouWant 
```

如果没有，请尝试并解释更多，但这是您在设计和运行时更改选项卡背景颜色的方式。

# database - joomla 的 akeeba 正在备份我数据库上的所有表

> ID：11846983
> 
> 赞同：0
> 
> 时间：2012-08-07T13:21:49.937
> 
> 标签：database, joomla, backup

我有一个数据库 my_db；我有一个 joomla 站点 my_joomla_site，它在那里存储它的表。但是，my_db 也有其他与 my_joomla_site 无关的表。

当我使用 Akeeba Backup 备份 my_joomla_site 时，Akeeba 会打包 my_db 中的所有表。当然，我只希望它打包/压缩适当的表格。

有没有办法告诉 Akeeba 只打包合适的桌子？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T13:23:20.613

Akeeba Backup 具有数据库表排除功能。请参阅他们的文档以获取答案：

[https://www.akeebabackup.com/documentation/akeeba-backup-documentation/database-tables-exclusion.html](https://www.akeebabackup.com/documentation/akeeba-backup-documentation/database-tables-exclusion.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-11T14:28:55.267

Akeeba Backup Professional 还具有用于正则表达式过滤数据库表的选项。告诉它只备份使用 Joomla! 的 db 表名前缀的表就像给它一个 RegEx 规则一样简单！@^#__@ 这意味着“不要备份任何名称不以当前配置的数据库表名前缀”。它也在文档中。如果你不想花钱支持我的软件编写工作，就像 Hanley 上面写的那样，没有必要重新发明轮子。您可以自己编写一个 .php 正则表达式过滤器文件。只需查看 administrator/components/com_akeeba/akeeba/filters 和 administrator/components/com_akeeba/akeeba/abstract/filter.php 了解更多信息。

# ruby-on-rails - 数组分离数组 ruby on rails

> ID：11846988
> 
> 赞同：0
> 
> 时间：2012-08-07T13:22:02.877
> 
> 标签：ruby-on-rails, arrays, haml, loops, enumerator

我有以下代码，它旨在循环遍历一个数组，每个对象后面都有一个逗号，期望最后一个想法

```
-if is_manager(team)
   - is_manager(team).map(&:fullname).each.join(',') do |name|
   = "#{name}" 
```

似乎代码正在尝试执行，但由于某种原因 .join 元素导致它出现如下错误

```
undefined method `join' for #<Enumerator: ["Tom Garcia", "Paul McGuane"]:each> 
```

我需要做什么才能让这个工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T13:26:33.847

摆脱“每个”部分；join 将直接在数组上调用，并应返回一个字符串。

意味着以下内容就足够了：

```
is_manager(team).map(&:fullname).join(',') 
```

编辑：似乎您正在使用 HAML，因此您需要“=”作为输出，请尝试以下操作：

```
-if is_manager(team)
   = is_manager(team).map(&:fullname).join(',') 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-07T13:30:50.960

```
-if is_manager(team)
   = is_manager(team).map(&:fullname).join(',') 
```

# javascript - 在地图上旋转多边形坐标（Google Map API）

> ID：11846994
> 
> 赞同：1
> 
> 时间：2012-08-07T13:22:20.150
> 
> 标签：javascript, google-maps, geometry, polygon

我在数组中有一组纬度和经度坐标。当在 Google 地图中绘制为多边形上的点时，它们大致形成一个从西向东指向的不规则椭圆。

我想以最左（西）轴附近的一个点作为原点将多边形旋转到任意度数。

对我来说重要的是保留了总距离 - 应保留以英里为单位的多边形的总长度和宽度，即使多边形的大小（以像素为单位）由于地图投影而明显不同。

我花了很多时间在这个网站上搜索和搜索这个问题的答案，但一直找不到。严格来说，这不是谷歌地图的问题——它只是一个与地图投影上的旋转多边形相关的几何问题。

到目前为止，或多或少是我一直在玩的东西（为了简单起见，有些东西被删除/重命名）：

```
function transpose_poly() {
//the polygon I'm transposing; these are actually in lng,lat not lat,lng
var poly = [
    [165.2467094000077,11.90511591102683],[165.1960646350092,11.8776472999036],[165.163749733589,11.84385698549516],[165.1260503052001,11.79105209544025],[165.1174590975139,11.73721064669002],[165.1239723221977,11.68443896599666],[165.1455712453083,11.62322111902237],[165.1628352566873,11.60212814234246],[165.2801792409835,11.57112282455308],[165.3469838984795,11.55321856612457],[165.4267372080734,11.49929306693537],[165.565122175408,11.43334434041074],[165.7036021721537,11.37198352732909],[165.7982543390455,11.32757670668951],[165.942446703552,11.2660302522167],[166.0435044916007,11.23207374453692],[166.1628753311194,11.19161490039798],[166.3468035041342,11.13537294275959],[166.432786256031,11.11077339082378],[166.6460225244011,11.09603091173615],[166.9054486129032,11.10353634871533],[167.0953310801652,11.11920326808891],[167.2738338244123,11.14546202299651],[167.5299835821322,11.20017441185735],[167.7587090824888,11.25007287877568],[168.0532186132958,11.32987818697488],[168.3030699093596,11.40339603540862],[168.592055474493,11.49329084618948],[168.8894586866613,11.59767488596071],[169.1097084341002,11.70426500697907],[169.3388671138959,11.8464629880637],[169.47335151263,11.96284699062962],[169.4987805640997,12.00051052731504],[169.5113979458664,12.04997756596092],[169.496674063518,12.07975001861134],[169.4439862794831,12.10473302818016],[169.3792705121883,12.11718325976015],[169.2053586392944,12.12366910168141],[169.0210976722354,12.12171866909852],[168.7390558752391,12.08703266811138],[168.4733370821476,12.04764814638675],[168.1055698159765,12.00021651042535],[167.8745488025422,11.97152786285725],[167.5955303201492,11.94724207538445],[167.1571321566584,11.94152529858467],[166.8673995936747,11.95771709621411],[166.6698153277294,11.98911065050636],[166.4432968316392,12.03361885637251],[166.2604579582592,12.0693923391982],[166.0834945953367,12.09610600014998],[165.9206278637858,12.10688793842689],[165.7421018997999,12.1070118835482],[165.6244752224984,12.09489163127243],[165.4939687494391,12.0642833194958],[165.4055155587918,12.02521842289156],[165.3386147079753,11.97769336095395],[165.278157772496,11.92168821285675],[165.2467094000077,11.90511591102683],
    ];

    var pos = marker.getPosition(); //where it transposes it to
    var marker_lat = pos.lat(); 
    var marker_lng = pos.lng();
    var angle = document.getElementById("poly_angle").value; //rotational angle

    var original_lat = 11.697222; //the original lat/lng of the polygon coordinates above
    var original_lng = 165.27194399999996; //used to move the general polygon to a new set of coords as an offset

    var new_poly = []; //the transformed polygon

//iterate over polygon array, create new array of Google Maps LatLng objects that are transposed and rotated
    for(var i=0; i<poly.length; i++) {
        new_poly.push( rotateLatLng( (poly[i][1]-original_lat)+marker_lat,(poly[i][0].lng()-original_lng)+marker_lng,angle));

    }

    // plot the polygon on the map
    poly_obj = new google.maps.Polygon({
        paths: poly_new,
        strokeColor: "#ff763b",
        strokeOpacity: 1,
        strokeWeight: 1,
        fillColor: "#ff763b",
        fillOpacity: 0.25,
        map: map,
        visible: true
    });

}

//this rotating function is cobbled together from code I found... it doesn't really work. It somewhat rotates it but distorts it terribly and gives really bizarre results
function rotateLatLng (pointLat,pointLng,angle) {
    var pos = marker.getPosition();
    var theX = pointLat;
    var theY = pointLng;
    var rotationTheta = angle;
    var rotationThetaRad = rotationTheta*(Math.PI/180);
    var rotationOriginX = pos.lat();
    var rotationOriginY = pos.lng();

    var newX;
    var newY;

    if (rotationOriginX == 0 && rotationOriginY == 0) {
        newX = theX * Math.cos(rotationThetaRad) - Math.sin(rotationThetaRad) * theY;
        newY = theX * Math.sin(rotationThetaRad) + Math.cos(rotationThetaRad) * theY;
    } else {
        newX = (theX - rotationOriginX) * Math.cos(rotationThetaRad) - (theY - rotationOriginY) * Math.sin(rotationTheta) + rotationOriginX;
        newY = (theX - rotationOriginX) * Math.sin(rotationThetaRad) + (theY - rotationOriginY) * Math.cos(rotationTheta) + rotationOriginY;
    }

  return new google.maps.LatLng(newX,newY);
} 
```

我认为上述方法根本不一定是正确的方法。任何指针都会有所帮助。

**这个问题的一个更简化的版本**是说，如果我有一个 lat1,lng1 的原点和 lat2,lng2 的另一个目标点，我如何计算 lat3,lng3 被定义为 lat1 之间的相同距离,lng1 和 lat2,lng2 但在任意角度？因为如果我知道如何做到这一点，那么将其应用于整个多边形应该很容易。