# StackOverflow 问答 12350000-12350999

# c# - 使用asp.net c#绑定数据时如何用数据库刷新GridView

> ID：12350000
> 
> 赞同：0
> 
> 时间：2012-09-10T10:41:37.260
> 
> 标签：c#, asp.net, gridview

我正在使用`GridView`并已使用 asp.net 在前端绑定到 SQL。在 button_Click 之前，我确保绑定到的我的数据库表的值`GridView`被重置，但它没有反映在`GridView`button_Click 之后。

这是我的asp代码`GridView`：

```
<Columns>
    <asp:BoundField DataField="Profiles" HeaderText="Profiles" ReadOnly="true" SortExpression="Profiles" />
    <asp:BoundField DataField="Location_Profile" HeaderText="Location_Profile" SortExpression="Location_Profile" />
</Columns> 
```

数据源asp代码为：

```
<asp:SqlDataSource ID="SqlDataSource1" runat="server" 
        ConnectionString="<%$ ConnectionStrings:TouchPadConnectionString %>"
        InsertCommand="INSERT INTO [Loc_Pro_Grid] ([Profiles], [Location_Profile]) VALUES (@Profiles, @Location_Profile)"
        SelectCommand="SELECT * FROM [Loc_Pro_Grid]" 
        UpdateCommand="UPDATE Loc_Pro_Grid SET Location_Profile = @Location_Profile WHERE (Profiles = @Profiles)">
    <InsertParameters>
        <asp:Parameter Name="Profiles" Type="String" />
        <asp:Parameter Name="Location_Profile" Type="Int32" />
    </InsertParameters>
    <UpdateParameters>
        <asp:Parameter Name="Location_Profile" />
        <asp:Parameter Name="Profiles" />
    </UpdateParameters>
</asp:SqlDataSource> 
```

我的 .cs 代码是：

```
 protected void Save_Click(object sender, EventArgs e)
    {

// I am doing some operations here then I am resetting the table as below

com = new SqlCommand("UPDATE Loc_Pro_Grid SET Location_Profile = 0 WHERE Profiles='" + ListBox1.Items[i].ToString() + "' ", con);
}
                    con.Open();
                    com.ExecuteNonQuery();
                    con.Close(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T10:45:20.320

致电`grdFoo.DataBind()`您的`button_Click`活动。

```
protected void Save_Click(object sender, EventArgs e)
{
     // I am doing some operations here then I am resetting the table as below
      com = new SqlCommand("UPDATE Loc_Pro_Grid SET Location_Profile = 0 WHERE Profiles='" +        ListBox1.Items[i].ToString() + "' ", con);
      con.Open();
      com.ExecuteNonQuery();
      con.Close();   
      // Call DataGrid's bind method here..for example
      grdFoo.DataBind()
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T10:43:10.263

您可以调用 GridView 的 DataBind 方法来刷新网格。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-10T10:57:08.337

您应该再次刷新和绑定数据，如**Mayak**所示，或者您可以使用更新面板，`gridview`再次更新数据并绑定。

# asp.net-mvc - 如何在剃刀视图中执行此操作

> ID：12350001
> 
> 赞同：-1
> 
> 时间：2012-09-10T10:41:38.953
> 
> 标签：asp.net-mvc, razor

我想在 MVC razor 视图上有这样的结构：

```
 if(model.x!=null)
 {
     <div> 
      someComplexView
  }
  someOtherComplexView
  if(model.x!=null)
 {
     </div> 
 } 
```

但它不起作用，因为 **div**不在一个 if 块内。不使用 partialView 怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T10:43:18.070

用于`<text>`包装您的 div 部分。

```
<text><div></text> 
```

...

```
<text></div></text> 
```

另请参阅[为什么 Razor 不喜欢这样？](https://stackoverflow.com/questions/8040482/why-does-razor-not-like-this)

您还可以查看使用`<div>`包装器的原因。`model.x != null`仅更改 div 包装器的类 when并使用它来设置结果的样式就足够了吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T10:48:23.997

你的代码的目的是什么？看起来逻辑上是错误的，你得到了两次相同的 `if(model.x!=null)`结果，你想做什么？
它应该更像是：

```
 if(model.x!=null)
 {
     <div> 
      someComplexView
     </div> 
 }
 someOtherComplexView 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-10T10:44:56.317

```
 @if(model.x!=null)
 {
    <text> <div> </text> 
      someComplexView
 }
  someOtherComplexView
 @if(model.x!=null)
 {
     <text></div></text> 
 } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-10T11:07:50.447

从你[在这里说的](https://stackoverflow.com/questions/12350001/how-to-do-this-in-razor-view#comment16582458_12350103)

> 我想在两个复杂视图周围都有一个 div，当 X 不为空时，但当 X 为空时，只显示一个视图，周围没有 div。

你可以这样做

```
if(model.x!=null)
 {
     <div> 
      someComplexView
     someOtherComplexView
     </div> 
 }
 else
 {
    someOtherComplexView
 } 
```

所以通过这种方式，只有当你的 model.x 不为空时，才会使用 div，否则不会使用 div。

# unix - 如何将 onesed 命令的输出附加到另一个 sed 命令

> ID：12350004
> 
> 赞同：0
> 
> 时间：2012-09-10T10:41:51.860
> 
> 标签：unix

我有以下内容：

`sed -n '/* Query Data Source Name/,/$/p' < XTRWFRLS.txt > XTRWFRLS.out`

`sed -n '/* WHERE Clause/,/$/p' < XTRWFRLS.txt > XTRWFRLS.out`

当我运行第一个命令时，它显示了一些输出，而在运行第二个命令时，它覆盖了第一个输出。如何将第二个命令的输出附加到第一个命令的输出？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T10:44:44.340

使用`>> XTRWFRLS.out`而不是`> XTRWFRLS.out`追加而不是覆盖。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-10T11:17:48.243

您可以使用

sed -n '/* 查询数据源名称/,/$/p' <XTRWFRLS.txt > XTRWFRLS.out

sed -n '/* WHERE 子句/,/$/p' < XTRWFRLS.txt >> XTRWFRLS.out

# android - Android - 无法显示在图库中下载的图像

> ID：12350005
> 
> 赞同：0
> 
> 时间：2012-09-10T10:42:00.480
> 
> 标签：android, image

以下代码将图像从 Amazon S3 下载到设备中，然后我尝试将图像加载到图库中。我的问题与设备（Nexus 7）和模拟器不同。我下面的代码是阅读stackoverflow答案的累积。

1）在模拟器DDMS中，我在设备中的/data/data/myprojectname/file/test.jpg下找到文件test.jpg文件的大小是正确的。但是，当我尝试使用下面的意图方法加载图像时，它会显示“不幸的是相机已停止工作”。

2) 对于 Nexus 7，图库只是显示没有图像。我真的无法使用 Astro 文件管理器找到图像“test.jpg”，为什么会这样？

另外，为什么模拟器和设备会有不同的行为？

这让我发疯，提前感谢您的帮助。

码头。

```
showInGallery.setOnClickListener(new View.OnClickListener() {
        @Override
        public void onClick(View v) {
            try {
                // Ensure that the image will be treated as such.
                ResponseHeaderOverrides override = new ResponseHeaderOverrides();
                override.setContentType( "image/jpeg" );

                // Generate the presigned URL.
                Date expirationDate = new Date( System.currentTimeMillis() + 3600000 );   // Added an hour's worth of milliseconds to the current time.
                GeneratePresignedUrlRequest urlRequest = new GeneratePresignedUrlRequest( Constants.getPictureBucket(), Constants.PICTURE_NAME );
                urlRequest.setExpiration( expirationDate );
                urlRequest.setResponseHeaders( override );

                URL url = s3Client.generatePresignedUrl( urlRequest );
                /* Open a connection to that URL. */
                File file = new File(PATH + Constants.PICTURE_NAME);
                URLConnection ucon = url.openConnection();

                /*
                * Define InputStreams to read from the URLConnection.
                */
                InputStream is = ucon.getInputStream();
                BufferedInputStream bis = new BufferedInputStream(is);

                /*
                * Read bytes to the Buffer until there is nothing more to read(-1).
                */
                ByteArrayBuffer baf = new ByteArrayBuffer(50);
                int current = 0;
                while ((current = bis.read()) != -1) {
                    baf.append((byte) current);
                }

                /* Convert the Bytes read to a String. */
                String fileName = "test.jpg";
                //FileOutputStream fos = new FileOutputStream(fileName);
                FileOutputStream fos = openFileOutput(fileName, Context.MODE_PRIVATE);
                fos.write(baf.toByteArray());
                fos.close();

                /* read the file */
                File filePath = getFileStreamPath(fileName);

                Intent intent = new Intent();
                intent.setAction(Intent.ACTION_VIEW);
                intent.setDataAndType(Uri.parse(filePath.toString()), "image/*");
                startActivity(intent);

            }
            catch ( Exception exception ) {
                S3UploaderActivity.this.displayAlert( "Browser Failure", exception.getMessage() );
            }
        }
    }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T11:11:45.300

你应该考虑使用延迟加载，看看这个项目：

[https://github.com/thest1/LazyList](https://github.com/thest1/LazyList)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T09:16:40.003

我不得不修改 LazyList 中的 ImageLoader 以适应我的使用。以下代码调用 Amazon S3，由于签名不同，每次调用的 url 都不同。

```
 // Generate the presigned URL.
        Date expirationDate = new Date( System.currentTimeMillis() + 3600000 );   // Added an hour's worth of milliseconds to the current time.
        GeneratePresignedUrlRequest urlRequest = new GeneratePresignedUrlRequest( Constants.PICTURE_BUCKET, menuItemArray[position].getImageFileName() );
        urlRequest.setExpiration( expirationDate );
        urlRequest.setResponseHeaders( override );
        URL url = s3Client.generatePresignedUrl( urlRequest );
        imageLoader.DisplayImage(url.toString(), holder.image); 
```

所以这就是我修改 ImageLoader 的方式，基本上是将 url 截断为 jpeg（假设所有调用都是针对 jpeg 文件的），并在放置它并从内存缓存中检索时丢弃其余部分。希望这可以帮助某人:)

```
package com.suite.android.menu;

import java.io.File;
import java.io.FileInputStream;
import java.io.FileNotFoundException;
import java.io.FileOutputStream;
import java.io.InputStream;
import java.io.OutputStream;
import java.lang.OutOfMemoryError;
import java.lang.Runnable;
import java.lang.String;
import java.lang.Throwable;
import java.net.HttpURLConnection;
import java.net.URL;
import java.util.Collections;
import java.util.Map;
 import java.util.WeakHashMap;
 import java.util.concurrent.ExecutorService;
import java.util.concurrent.Executors;
import android.app.Activity;
import android.content.Context;
import android.graphics.Bitmap;
import android.graphics.BitmapFactory;
import android.widget.ImageView;

public class ImageLoader {

MemoryCache memoryCache=new MemoryCache();
FileCache fileCache;
private Map<ImageView, String> imageViews=Collections.synchronizedMap(new WeakHashMap<ImageView, String>());
ExecutorService executorService; 

public ImageLoader(Context context){
    fileCache=new FileCache(context);
    executorService=Executors.newFixedThreadPool(5);
}

final int stub_id=R.drawable.stub;
public void DisplayImage(String url, ImageView imageView)
{

    String truncURL = truncateJPEG(url); // required as every amazon s3 call slightly different
    imageViews.put(imageView, truncURL);
    Bitmap bitmap=memoryCache.get(truncURL);
    if(bitmap!=null)
        imageView.setImageBitmap(bitmap);
    else
    {
        queuePhoto(url, imageView);
        imageView.setImageResource(stub_id);
    }
}

private String truncateJPEG(String s)
{
    int pos = s.indexOf("jpeg");
    String newURL = s.substring(0, pos+4);   //account for jpeg
    return newURL;
}

private void queuePhoto(String url, ImageView imageView)
{
    PhotoToLoad p=new PhotoToLoad(url, imageView);
    executorService.submit(new PhotosLoader(p));
}

private Bitmap getBitmap(String url) 
{
    File f=fileCache.getFile(url);

    //from SD cache
    Bitmap b = decodeFile(f);
    if(b!=null)
        return b;

    //from web
    try {
        Bitmap bitmap=null;
        URL imageUrl = new URL(url);
        HttpURLConnection conn = (HttpURLConnection)imageUrl.openConnection();
        conn.setConnectTimeout(30000);
        conn.setReadTimeout(30000);
        conn.setInstanceFollowRedirects(true);
        InputStream is=conn.getInputStream();
        OutputStream os = new FileOutputStream(f);
        Utils.CopyStream(is, os);
        os.close();
        bitmap = decodeFile(f);
        return bitmap;
    } catch (Throwable ex){
       ex.printStackTrace();
       if(ex instanceof OutOfMemoryError)
           memoryCache.clear();
       return null;
    }
}

//decodes image and scales it to reduce memory consumption
private Bitmap decodeFile(File f){
    try {
        //decode image size
        BitmapFactory.Options o = new BitmapFactory.Options();
        o.inJustDecodeBounds = true;
        BitmapFactory.decodeStream(new FileInputStream(f),null,o);

        //Find the correct scale value. It should be the power of 2.
        final int REQUIRED_SIZE=70;
        int width_tmp=o.outWidth, height_tmp=o.outHeight;
        int scale=1;
        while(true){
            if(width_tmp/2<REQUIRED_SIZE || height_tmp/2<REQUIRED_SIZE)
                break;
            width_tmp/=2;
            height_tmp/=2;
            scale*=2;
        }

        //decode with inSampleSize
        BitmapFactory.Options o2 = new BitmapFactory.Options();
        o2.inSampleSize=scale;
        return BitmapFactory.decodeStream(new FileInputStream(f), null, o2);
    } catch (FileNotFoundException e) {}
    return null;
}

//Task for the queue
private class PhotoToLoad
{
    public String url;
    public ImageView imageView;
    public PhotoToLoad(String u, ImageView i){
        url=u; 
        imageView=i;
    }
}

class PhotosLoader implements Runnable {
    PhotoToLoad photoToLoad;
    PhotosLoader(PhotoToLoad photoToLoad){
        this.photoToLoad=photoToLoad;
    }

    @java.lang.Override
    public void run() {
        if(imageViewReused(photoToLoad))
            return;
        Bitmap bmp=getBitmap(photoToLoad.url);
        String newURL = truncateJPEG(photoToLoad.url);  // every amazon s3 call different so need to do this
        memoryCache.put(newURL, bmp);
        if(imageViewReused(photoToLoad))
            return;
        BitmapDisplayer bd=new BitmapDisplayer(bmp, photoToLoad);
        Activity a=(Activity)photoToLoad.imageView.getContext();
        a.runOnUiThread(bd);
    }
}

boolean imageViewReused(PhotoToLoad photoToLoad){
    String tag=imageViews.get(photoToLoad.imageView);
    if(tag==null || !tag.equals(truncateJPEG(photoToLoad.url)))
        return true;
    return false;
}

//Used to display bitmap in the UI thread
class BitmapDisplayer implements Runnable
{
    Bitmap bitmap;
    PhotoToLoad photoToLoad;
    public BitmapDisplayer(Bitmap b, PhotoToLoad p){bitmap=b;photoToLoad=p;}
    public void run()
    {
        if(imageViewReused(photoToLoad))
            return;
        if(bitmap!=null)
            photoToLoad.imageView.setImageBitmap(bitmap);
        else
            photoToLoad.imageView.setImageResource(stub_id);
    }
}

public void clearCache() {
    memoryCache.clear();
    fileCache.clear();
}

} 
```

# ruby - 正则表达式在大字符串中查找一个或多个子字符串

> ID：12350007
> 
> 赞同：0
> 
> 时间：2012-09-10T10:42:11.967
> 
> 标签：ruby, regex

嗨，我希望正则表达式在大字符串中找到一个或多个子字符串匹配某些条件，例如。

```
 "I have done my best to document all the [switches] and characters that I can  locate.Regular expressions [allow] you to group like [parts] of the substring into" 
```

结果应该像这些子字符串

```
 switches,allow,parts 
```

在这种情况下

```
 "I have done my best to document all the [switches] and character. 
```

结果应该是唯一的“开关”

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-10T10:49:46.160

你需要字符串#scan：

```
str = "I have done my best to document all the [switches] and characters that I can  locate.Regular expressions [allow] you to group like [parts] of the substring into"
str.scan /\[.+?\]/   # => ["[switches]", "[allow]", "[parts]"]
# or use lookahead and lookbehind pattern
str.scan /(?<=\[).+?(?=\])/ # => ["switches", "allow", "parts"] 
```

Regexp 将匹配 '[' 和 ']' 之间的任何字符。模式 .+? 意味着不要贪婪地做这件事。当匹配一个“]”时，这部分就结束了。否则，如果我们使用 [.*] ，匹配将返回 [switches......parts]。

# wpf - 从资源字典加载 DataTemplate

> ID：12350013
> 
> 赞同：1
> 
> 时间：2012-09-10T10:42:33.017
> 
> 标签：wpf, image, data-binding, menuitem, hierarchicaldatatemplate

在 WPF 客户端应用程序中，我在使用分层数据模板加载数据绑定菜单项时遇到了一些困难。

首先，我创建了 ViewModel，其中包含菜单项的基本属性：标题、命令、ImageSource（用于图标属性的图像的路径）和子项。

然后，我在 XAML 窗口中创建了视图以显示我的菜单。为了绑定我的集合，考虑到子项，我将分层数据模板用于菜单项模板。

这是 ItemTemplate 的 XAML 代码：

```
<HierarchicalDataTemplate DataType="{x:Type vm:MenuItemViewModel}" ItemsSource="{Binding Path=Items}">
    <HierarchicalDataTemplate.ItemContainerStyle>
        <Style TargetType="MenuItem">
            <Style.Resources>
                <Image x:Key="ItemImage" Source="{Binding ImageSource}" Width="16" Height="16" x:Shared="false" />
            </Style.Resources>
            <Style.Setters>
                <Setter Property="Command" Value="{Binding Command}" />
                <Setter Property="CommandParameter" Value="{Binding CommandParameter}" />
                <Setter Property="Icon" Value="{StaticResource ItemImage}" />
            </Style.Setters>
        </Style>
    </HierarchicalDataTemplate.ItemContainerStyle>
    <StackPanel Orientation="Horizontal">
        <TextBlock Text="{Binding Title}" />
    </StackPanel>
</HierarchicalDataTemplate> 
```

当我初始化菜单并显示窗口时，一切看起来都很好。

之后，我尝试将菜单项模板放入资源字典中，以便能够在我的应用程序中的任何位置将其作为默认模板重用。当我这样做时，我抛出了一个异常：

> 命名空间“http://schemas.microsoft.com/winfx/2006/xaml”中的共享属性只能在编译的资源字典中使用。

在花了这么多时间寻找解决方案之后，我终于制作了一个测试项目（可[在此处](https://dl.dropbox.com/u/46417456/WpfMenuItemTester.zip)获得）来演示该问题。

我不知道如何使我的资源字典成为编译资源字典......有人可以帮助我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T06:46:01.083

找到了解决方案，实现了一个转换器：

```
public class MenuIconConverter : IValueConverter
{
    #region IValueConverter Members

    public object Convert(object value, Type targetType, object parameter, System.Globalization.CultureInfo culture)
    {
        if (value == null) return Binding.DoNothing;

        string imageUri = value.ToString();

        if (string.IsNullOrEmpty(imageUri)) return Binding.DoNothing;

        BitmapImage bitmapImage = new BitmapImage(new Uri(imageUri, UriKind.RelativeOrAbsolute)) { DecodePixelHeight = 16, DecodePixelWidth = 16 };

        return new Image() { Height = 16, Width = 16, Source = bitmapImage, SnapsToDevicePixels = true, UseLayoutRounding = true };
    }

    public object ConvertBack(object value, Type targetType, object parameter, System.Globalization.CultureInfo culture)
    {
        return Binding.DoNothing;
    }

    #endregion
} 
```

要使用转换器，应修改 DataTemplate：

```
<converter:MenuIconConverter x:Key="MenuIconConverter" />

<HierarchicalDataTemplate x:Key="MenuItemTemplate" DataType="{x:Type vm:MenuItemViewModel}" ItemsSource="{Binding Path=Items}">
    <HierarchicalDataTemplate.ItemContainerStyle>
        <Style TargetType="MenuItem">
            <Style.Setters>
                <Setter Property="Command" Value="{Binding Command}" />
                <Setter Property="CommandParameter" Value="{Binding CommandParameter}" />
                <Setter Property="Icon" Value="{Binding ImageSource, Converter={StaticResource MenuIconConverter}, Mode=OneWay}" />
            </Style.Setters>
        </Style>
    </HierarchicalDataTemplate.ItemContainerStyle>
    <TextBlock Text="{Binding Title}" />
</HierarchicalDataTemplate> 
```

有了这个，一切正常。我期待没有代码的解决方案，但这似乎是不可能的:(

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T11:06:48.030

尝试`x:Shared="false"`从`<Image>`元素中删除

# clickonce - 是否可以使用 Click Once 部署来部署 BHO

> ID：12350014
> 
> 赞同：1
> 
> 时间：2012-09-10T10:42:33.777
> 
> 标签：clickonce, bho

是否可以使用 Click Once 技术来部署 Browser Helper Objects (BHO)？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T17:10:43.967

我认为浏览器帮助对象需要在

```
HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Windows\CurrentVersion\Explorer\Browser Helper Objects 
```

注册表的一部分。它们可能还需要安装在 Windows 或 Program Files 目录下。

ClickOnce 在沙箱中运行，因此允许它安装在管理员权限不可用的机器上。此沙箱可防止访问注册表或系统目录（在用户配置文件之外）。

因此，对于 Browser Helper Objects，我认为您不太可能使用 ClickOnce 来部署一个。

# c# - StringBuilder的AppendFormat方法创建表

> ID：12350015
> 
> 赞同：5
> 
> 时间：2012-09-10T10:42:36.317
> 
> 标签：c#, asp.net

我对 StringBuilder 类的 AppendFormat 方法有疑问。我正在创建表格并在字符串构建器对象中附加数据以将其作为邮件发送，但是当我看到我发送的邮件时，它看起来不像表格，它的标题和相应的内容被错放。我希望表格由 Lines 分隔，因为它通常存在于 microsoft word 的表格中。我怎样才能实现它..我正在使用以下代码： Body is a StringBuilder Object

```
if (  dic1 != null )
{
     //Body.AppendFormat("Client: " + cl + " Success. " + dic1.Count + " :");
     Body.AppendFormat("<br/><table>");
     Body.AppendFormat("<h1><tr><td>#</td><td>Files Name</td></tr></h1>");
     int count = 1;
      foreach ((KeyValuePair<string, string> pair in  dic1)
               {
                    if (!String.IsNullOrEmpty(pair.Key))
                     {

                      Body.AppendFormat("<tr><td>"+count.ToString()+"</td><td>" + pair.Key + "</td><td> " + pair.Value + "</td></tr>");
                        count++;
                        //Body.Append( );
                    }
                }

                Body.AppendFormat("</table>"); 
```

以下是我在收件箱中收到的输出。

```
 # File Name Error 
 1 txt1.txt Loading File 'txt1.txt' failed: The specified File already exists in the system 
 2 txt2.txt Loading File 'txt2.txt' failed: The specified File already exists in the system 
 3 txt3.txt Loading File 'txt3.txt' failed: The specified File already exists in the system 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-10T11:03:31.900

希望你可以使用这个例子来理解它应该是怎样的。如果没有，请告诉我。会帮助你。

```
System.Text.StringBuilder sb = new System.Text.StringBuilder();

sb.Append("<table>");
sb.AppendFormat("<tr><td>Request Name:</td><td>{0}</td></tr>", txtBugName.Text.Trim());
sb.AppendFormat("<tr><td>Category:</td><td>{0}</td></tr>", ddlModule.SelectedValue);
sb.AppendFormat("<tr><td>Sub-Category:</td><td>{0}</td></tr>", ddlPage.SelectedValue);
sb.AppendFormat("<tr><td>Description:</td><td>{0}</td></tr>", txtComments.Text.Trim());
sb.AppendFormat("<tr><td>Email is:</td><td>{0}</td></tr>", txtemail.Text.Trim());
sb.Append("<table>"); 
```

然后我假设 IsBodyHtml 属性为真，因为您已经在使用 HTML

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T11:03:15.197

做这样的事情

```
 String to, subject, message;
    bool isHtml;
    isHtml = true;
    StringBuilder sbEmail = new StringBuilder();

    to = "abc@abc.com";
   // string url = "xxxxx";

    //  string refurl = Request.UrlReferrer.ToString();
    subject = "Some subject";

    // Keep Option for Otehr Language also by defining predefined 
    // Hidden Labels for Message in L1, L2, L3, L4, L5 --
    // Also add dir tag to the Table
    sbEmail.Append("<table><tr><td style='font-family: Arial; font-size: 10pt;'>");
    sbEmail.Append("Hello,");
    sbEmail.Append("<br><br>");
    sbEmail.Append("");
    sbEmail.Append("Following Comments has been posted");
    sbEmail.Append("<br><br>");
    sbEmail.Append(strComment);
    sbEmail.Append("<br><br>");
    sbEmail.Append("Article Title :");
    sbEmail.Append("<br>");
    sbEmail.Append(strArticleTitle);
    sbEmail.Append("<br><br>");
    sbEmail.Append("Name : " + strName);
    sbEmail.Append("<br>");
    sbEmail.Append("Country : " + strCountry);
    sbEmail.Append("<br><br>");
    sbEmail.Append("Please logon to admin section of website to activate this comments");
    sbEmail.Append("<br>");
    sbEmail.Append("http://xxxxx");
    sbEmail.Append("</td></tr></table>");
    message = sbEmail.ToString(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-08-28T17:42:27.223

要获得所需的边框，您应该在表格和标签上合并一个内联样式。 `<table cellpadding='5' cellspacing='2' style='border:1px solid black;'> <td style='border: 1px solid black;'>` 这应该给出预期的风格。

# php - 我有一个从数据库中的二进制字符串生成的 pdf，它总是通过 PHP 返回为损坏

> ID：12350017
> 
> 赞同：0
> 
> 时间：2012-09-10T10:42:43.180
> 
> 标签：php, pdf

二进制字符串从数据库返回，然后通过 PHP 使用正确的标头更改传递给浏览器。返回的文件总是以损坏的形式返回，但是当我在记事本中查看实际文件时，它的第一部分似乎确实是正确的，但随后文本变得有点疯狂。我已经上传了文件，所以你可以明白我的意思。任何关于为什么浏览器会错误地解释二进制文件的迹象都会非常感激。

[https://dl.dropbox.com/u/3435192/apdf44-3.pdf](https://dl.dropbox.com/u/3435192/apdf44-3.pdf)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T11:30:36.873

好的，答案与 mssql 连接有关。从 mssql 返回到 php 的 blob 的默认“最大文本大小”为 66KB。您可以在 php.ini 中更改它。该文件没有损坏，由于文件大小限制，它只是不完整。一旦增加了文本大小限制，整个文件就会被下载并且它可以正常工作

# jquery - 在创建帖子期间如何使用 JQuery-File-Upload 在一个页面上上传多个图像？

> ID：12350019
> 
> 赞同：9
> 
> 时间：2012-09-10T10:42:58.320
> 
> 标签：jquery, ruby-on-rails, ruby-on-rails-3, carrierwave

我意识到，当创建帖子以添加多个图像时，没有使用 jQuery-File-Upload 和 Carrierwave 或 Dragonfly 的解决方案来实现在一个页面上的能力。我有两个模型一个帖子有很多图像。我想在添加后立即上传图片，并可以选择在保存整个新帖子之前取消它。我的代码不起作用所以我没有在这里粘贴它，也许有人有例子，这个概念对于 jQuery-File-Upload 是否可行？如果不是，也许还有其他方法可以保存多张照片并保持引导视图？我发现了很好的例子，它们代表了与预期功能相似的功能，但使用 Upladify: [FormFly](https://github.com/rdetert/FormFly)或仅使用 Carrierwave 和 nested_form: [carrierwave-nested_form](https://github.com/lucapette/carrierwave-nested_form)。关于 jQuery-File-Upload git [wiki](https://github.com/blueimp/jQuery-File-Upload/wiki/Rails-setup-for-V6)是如何在 Rails 中仅使用一个模型的教程。

我想得到这样的东西： ![在此处输入图像描述](../Images/8dccfbafca2bd250c9b3beac52bbde79.png)

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-18T23:15:18.047

所有这一切的主要问题是*“如何与不存在的对象建立关联？”* . 好吧，你不能。你能做的是下一个最好的事情，智胜它。我将通过 3 个简单的步骤向您展示如何做到这一点。我故意不发布任何代码，因为该过程本身应该相当清晰，并且适用于各种方法（不仅限于 jQuery-File-Upload 和 Carrierwave 或 Dragonfly）。

**步骤1**

将关系的每个部分设置为正常的，独立的。使用脚手架（或其他）生成新帖子。在帖子表单的正下方，照常实施您的照片上传解决方案。我会像往常一样使用每个对象自己的控制器和部分，以防止这些东西不可磨灭地混合在一起。暂时不要担心关系关联代码。

**第2步**

将您的关系代码添加到模型中。不用担心界面没有正确关联它们。

**第 3 步** *（有趣的部分）*

现在，把它们绑在一起。我们正在创建图像，但它们不属于任何帖子。我们还创建了没有任何图像的帖子。我们需要一些方法来完成这个关联。解决方案相当简单。您需要在帖子表单中创建一个隐藏文本字段，以包含要与帖子关联的图像的 ID。然后，您的图像创建响应，在将新图像添加到页面的同时将新图像的 ID 添加到文本字段。类似地，在后控制器中，只需循环隐藏字段中的 ID 并在保存之前关联目标对象。您可能希望向取消按钮添加类似的逻辑，例如在从页面中删除图像时从数组中删除 ID。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-10T13:21:09.897

我发现了一个小例子，在带有carrierwave的rails中使用JqueryFileUpload上传多个图像。

我目前正在研究一个更好的解决方案来使用 JqueryFileUpload 实现多文件上传，但这个主题并不那么容易。

[在这个例子中](https://github.com/jalagrange/bootstrap_uploader)

当您在图片控制器新操作中设置新帖子对象的实例时，生成带有 body:string 的帖子脚手架，您可以在图片/新视图中为帖子实现表单。

```
<%= form_for(@post) do |f| %>
  <div class="field">
    <%= f.label :body %><br />
    <%= f.text_field :body %>
  </div>
  <div class="actions">
    <%= f.submit %>
  </div>
<% end %> 
```

# visual-studio-2012 - 将新的 GUID 插入到 Visual Studio 2012

> ID：12350028
> 
> 赞同：24
> 
> 时间：2012-09-10T10:43:32.900
> 
> 标签：visual-studio-2012, visual-studio-extensions

是否可以创建代码片段或类似的东西来自动化生成 GUID 并将其插入到 Visual Studio 2012 中的文本编辑器的过程？我经常需要生成新的 GUID（例如 WiX 安装程序，以及我们自己的内部框架）。

我曾经使用宏来执行这项工作，创建一个新的 GUID，然后将其插入到当前的 ActiveDocument 中。我会将宏绑定到 Shift-Ctrl G，这样我就可以快速插入一个新 ID，而无需启动 Create Guid 工具并从那里复制。

宏功能现在已从 Visual Studio 2012 中删除，因此我需要一种替代方法，我认为可以使用扩展，但我不熟悉开发扩展，而且这种方法似乎有点笨拙！

任何建议都将不胜感激，否则将不胜感激任何关于需要什么样的扩展来与文本窗口交互和插入文本的信息的指针。然后我可以进行扩展并将其发布到 Visual Studio Gallery 上。

谢谢，安东尼

编辑以添加 - 提出的任何解决方案都需要从键盘快捷键“触发”。如上所述，我将宏绑定到 Ctrl Shift G，因为它在编写代码时很容易记住和按下。

* * *

## 回答 #1

> 赞同：52
> 
> 时间：2012-09-10T13:28:42.697

[ReSharper](http://www.jetbrains.com/resharper/)允许您通过键入“nguid”并按 Tab 来插入新的 guid。

显然，这对于生成 Guid 的能力来说有点昂贵，但是 ReSharper 有许多其他有用的功能可能值得考虑。

* * *

## 回答 #2

> 赞同：39
> 
> 时间：2012-09-21T19:18:19.130

您可以编写一个 Visual Studio 2012 扩展来完成此任务！
如果您以前从未编写过插件，这是一个简单的入门指南！

以下是创建此类加载项的步骤：

1.  在 Visual Studio 2012 中创建**新项目**
2.  选择**模板**->**其他项目类型**->**可扩展性**-> Visual Studio 插件
3.  命名您的项目，单击确定。
4.  按照加载项向导步骤操作。出现提示时，选中以下框：“是的，创建一个‘工具’菜单项。” （可选）我还选中“我的加载项永远不会显示模态 UI...”
5.  完成向导并在**Exec(...)中实现以下代码**

    ```
    public void Exec(string commandName, vsCommandExecOption executeOption, ref object varIn, ref object varOut, ref bool handled)
    {
        handled = false;
        if(executeOption == vsCommandExecOption.vsCommandExecOptionDoDefault)
        {
            if (commandName == this.GetType().Namespace + ".Connect." + this.GetType().Namespace)
            {
                if (_applicationObject.ActiveDocument != null)
                {
                    TextSelection objSel = (EnvDTE.TextSelection)(_applicationObject.ActiveDocument.Selection);

                    objSel.Insert(Guid.NewGuid().ToString());
                }

                handled = true;
                return;
            }
        }
    } 
    ```

6.  构建项目，并将**AddInName.dll**、**AddInName.AddIn**和**AddInName.xml**部署到*c:\users\username\documents\Visual Studio 2012\Addins*。[如果 Addins 文件夹不存在，则创建它]

7.  在 Visual Studio 2012 中，在**Tools** -> **Addin Manager**下，选中左侧*AddInName*旁边的框。
8.  重新启动 Visual Studio 2012
9.  您现在应该看到在工具下列出的*AddInName*。[可能是笑脸！]
10.  当您单击它时，它应该在您的光标位置插入一个新的 GUID。
11.  通过导航到**Tools** -> **Options** -> **Environment** -> **Keyboard**将其映射到热键，搜索*AddInName*并将热键绑定到它。

瞧！热键 GUID 生成和一点点 Visual Studio 插件知道如何。:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-18T22:09:30.803

我的[SCLAssist](http://visualstudiogallery.msdn.microsoft.com/fe9471ae-d6b5-49fd-b141-d3212e3d9c2a)扩展程序具有此功能。您可以将“粘贴 GUID”绑定到键映射。SCLAssist 是免费的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-06-23T11:20:24.597

看起来他们把它带回来了——在 VS 2015 中（我使用的是社区版本）有一个**工具**>**创建 GUID**选项。

# mysql - Mysql选择查询组concat

> ID：12350029
> 
> 赞同：1
> 
> 时间：2012-09-10T10:43:33.673
> 
> 标签：mysql, group-by, group-concat, mysql-select-db

我有一个选择查询要构建，但无法正常工作。我希望从更高级的 MySQL 开发人员那里得到一些建议。所以我的桌子是：

```
 CREATE TABLE IF NOT EXISTS `gv` ( 
`id` int(11) NOT NULL AUTO_INCREMENT,
`option_id` int(11) NOT NULL,
`group_id` int(11) NOT NULL,
PRIMARY KEY (`id`)
) ENGINE=InnoDB  DEFAULT CHARSET=latin1 AUTO_INCREMENT=7 ;

INSERT INTO `gv` (`id`, `option_id`, `group_id`) VALUES
(1, 1, 1),
(2, 2, 2),
(3, 3, 2),
(4, 4, 3),
(5, 5, 4),
(6, 6, 4); 

CREATE TABLE IF NOT EXISTS `igv` (
 `id` int(11) NOT NULL AUTO_INCREMENT,
 `item_id` int(11) NOT NULL,
 `gv_id` int(11) NOT NULL,
 PRIMARY KEY (`id`)
) ENGINE=InnoDB  DEFAULT CHARSET=latin1 AUTO_INCREMENT=9 ;

INSERT INTO `igv` (`id`, `item_id`, `gv_id`) VALUES
(1, 1, 1),
(2, 1, 3),
(3, 2, 1),
(4, 2, 2),
(6, 3, 5),
(7, 4, 2),
(8, 2, 6); 

CREATE TABLE IF NOT EXISTS `items` (
  `item_id` int(11) NOT NULL AUTO_INCREMENT,
  PRIMARY KEY (`item_id`)
) ENGINE=InnoDB  DEFAULT CHARSET=latin1 AUTO_INCREMENT=6 ;

INSERT INTO `items` (`item_id`) VALUES
(1),
(2),
(3),
(4),
(5); 
```

现在我将解释这些表的作用：

1.  gv 来自 group_values。组就像一个项目的属性。例如：颜色。

    *   每行保存一个组的值。例如：组颜色 ( group_id ) 的红色 ( option_id )。
2.  igv 来自项目组值。项目是我项目中的主要实体，就像产品一样。

    *   每行包含项目和 group_values 之间的关系。例如：一件带有红色的物品。
    *   它通过 gv_id ( igv.gv_id = gv.id ) 链接到 gv 表。
3.  items 来自 items :) 我已将此示例简化为只有一列 item_id。

我需要查询的内容：

好吧，在我的应用程序中，我有一个选定的项目（ my_item ）（附加了 0 个或多个组值）。我需要定义了完全相同的 group_values 的所有项目，或者没有为 my_item 组指定值。在 php 中，我可以将所有附加的组提取为带有 id 的数组，也可以提取所有 group_values。但是我没有办法从这个数据库中选择我需要的东西。我将非常感谢为这个庞大的耗时选择提供的任何输入。

谢谢！

一个简短的草图示例。在左侧，我们有匹配所有正确项目的项目（用逗号分隔）。 ![在此处输入图像描述](../Images/64c01cdb576b0b2f95eb2b9a8d5d082c.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-12T11:13:58.227

好的，所以首先我们需要找到与另一个项目匹配的组的所有项目：

```
SELECT igv.item_id, sigv.item_id FROM igv
  INNER JOIN gv ON igv.gv_id = gv.id
  INNER JOIN gv sgv ON gv.group_id = sgv.group_id
  INNER JOIN igv sigv ON sigv.gv_id = sgv.id
  WHERE igv.item_id = items.item_id
    AND sigv.item_id = similar.item_id 
```

**然后，我们只在选项不**匹配时才感兴趣：

```
SELECT igv.item_id, sigv.item_id dissimilar FROM igv
  INNER JOIN gv ON igv.gv_id = gv.id
  INNER JOIN gv sgv ON gv.group_id = sgv.group_id
  INNER JOIN igv sigv ON sigv.gv_id = sgv.id
  WHERE igv.item_id = items.item_id
    AND sigv.item_id = similar.item_id
    AND gv.option_id != sgv.option_id 
```

那么我们只对上面**没有**选择的项目感兴趣。这可以使用`NOT EXISTS`或来完成`LEFT JOIN`。以下是如何做到这一点`NOT EXISTS`：

```
SELECT items.item_id, similar.item_id similar_id
  FROM items similar
  INNER JOIN items
  WHERE items.item_id != similar.item_id
    AND NOT EXISTS (
    SELECT igv.item_id, sigv.item_id dissimilar FROM igv
      INNER JOIN gv ON igv.gv_id = gv.id
      INNER JOIN gv sgv ON gv.group_id = sgv.group_id
      INNER JOIN igv sigv ON sigv.gv_id = sgv.id
      WHERE sigv.item_id = similar.item_id
        AND igv.item_id = items.item_id
        AND gv.option_id != sgv.option_id
    ) 
```

结果：

```
ITEM_ID SIMILAR_ID
1       3
1       5
2       4
2       5
3       1
3       4
3       5
4       2
4       3
4       5
5       1
5       2
5       3
5       4 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-10T11:47:13.647

更新：

根据您评论中的逻辑，**如果我理解正确**的话，以及您的测试数据，下表显示了您想要为查询提供的 item_id 的结果。

```
id_provided | result
--------------------
1             2 & 5
2             1 & 4 & 5
3             5
4             2 & 5
5             - 
```

如果这是正确的，以下查询会给出所需的结果：

```
SELECT 
COALESCE(i2.item_id, i.item_id)
FROM
items i
LEFT JOIN igv ON igv.item_id = i.item_id
LEFT JOIN gv ON igv.gv_id = gv.id
LEFT JOIN gv gv2 ON gv.group_id = gv2.group_id AND gv.option_id = gv2.option_id
LEFT JOIN igv igv2 ON gv2.id = igv2.gv_id
LEFT JOIN items i2 ON igv2.item_id = i2.item_id
WHERE i.item_id = $yourItemId
AND i2.item_id != i.item_id OR i2.item_id IS NULL 
```

~~我不确定我是否理解您想要什么，并且我不确定以下查询是否得到您想要的，因为您没有说明预期的输出是什么并且您的测试数据不足。无论如何，这是我的镜头：~~

 ~~```
SELECT DISTINCT
i.item_id
FROM
items i
LEFT JOIN igv ON igv.item_id = i.item_id
LEFT JOIN gv ON igv.gv_id = gv.id
GROUP BY i.item_id
HAVING 
GROUP_CONCAT(CONCAT(COALESCE(gv.option_id, 0), COALESCE(gv.group_id, 0)) ORDER BY gv.option_id, gv.group_id SEPARATOR ':')
=
(
SELECT
GROUP_CONCAT(CONCAT(COALESCE(sq_gv.option_id, 0), COALESCE(sq_gv.group_id, 0)) ORDER BY sq_gv.option_id, sq_gv.group_id SEPARATOR ':')
FROM
items sq_i
LEFT JOIN igv sq_igv ON sq_igv.item_id = sq_i.item_id
LEFT JOIN gv sq_gv ON sq_igv.gv_id = sq_gv.id
WHERE sq_i.item_id = $yourItemId /*insert the item_id here*/
GROUP BY sq_i.item_id
) 
```~~

# ruby - Ruby 1.8.7 中方法的可选参数数量

> ID：12350031
> 
> 赞同：3
> 
> 时间：2012-09-10T10:43:42.840
> 
> 标签：ruby, ruby-on-rails-3.1

不确定是否有答案，但希望有人知道。我正在尝试获取 Ruby 1.8.7 中方法的可选参数的数量。`Method#arity`将不起作用，因为它返回`-n-1`，其中`n`是方法所需参数的数量。我需要的是可选参数的数量？例如

```
def foo(a,b,c=4,d=3)
  # ...
end 
```

如何确定有*2 个可选参数*？请记住，这是**Ruby 1.8.7**

**更新**

道歉问题不清楚，在调用该方法之前我需要知道可选参数的数量。例如

```
method_def = self.instance_method(:foo)
# check for number of args
# call method if it meets some kind of criteria 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T10:53:42.943

您可以定义您的方法，如：

```
def foo(a,b,*p)
  number_of_arguments = p.size

  c = p[0]
  d = p[1]      
end 
```

更多信息可以[在](http://www.skorks.com/2009/08/method-arguments-in-ruby/)“可选参数”下找到。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-10T11:46:09.693

我不认为你可以。事实上，我认为这是`{Proc, Method, UnboundMethod}#parameters`在 Ruby 1.9 中引入的原因之一：

```
instance_method(:foo).parameters.count {|type,| type == :opt }
# => 2 
```

# mysql - 在 WHERE 子句中访问自定义列（别名）

> ID：12350032
> 
> 赞同：0
> 
> 时间：2012-09-10T10:43:43.203
> 
> 标签：mysql, alias, where-clause

我遇到了一些麻烦，因为我无法访问 Where 子句中的自定义列。在许多尝试中，只能在`HAVING`子句上进行（较慢且我想避免的事情）。是否可以访问 on`WHERE`子句？我举个例子：

```
SELECT (...) IF(table1.x="bla",table1.date,table2.date) as date
FROM (...)
WHERE UNIX_TIMESTAMP(date)>1321401600 
```

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T11:36:26.167

不管你怎么改写，我想你的服务器会发现很难优化那个特定的表达式，所以你总是会发现你的查询很慢，但我想最好的办法是测试每个人的答案，看看哪个一个是最快的。所以考虑到这一点，这是我的建议：

```
WHERE (table1.x = "bla" AND UNIX_TIMESTAMP(table1.date) > 1321401600)
  OR (table1.x != "bla" AND UNIX_TIMESTAMP(table2.date) > 1321401600) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T10:48:35.303

如果您想在您的中使用别名，`WHERE`则可以将查询包装在 a`SELECT`中以使用别名：

```
SELECT *
FROM
(
   SELECT (...) IF(table1.x="bla",table1.date,table2.date) as date
   FROM (...)
) x
WHERE UNIX_TIMESTAMP(date)>1321401600 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-10T10:48:56.003

在这种情况下，您需要对两个表执行时间戳检查。

例如

```
SELECT ... FROM table1
     JOIN table2 ON table2.date > x
WHERE table1.date > x 
```

# c# - Securepay支付网关集成问题

> ID：12350043
> 
> 赞同：2
> 
> 时间：2012-09-10T10:44:35.117
> 
> 标签：c#, asp.net, cryptography, payment-gateway, sha

我正在与我的 ASP.NET 网页进行 Securepay 集成，根据他们的文档，我从以下信息生成 SHA1：

指纹是上述字段的 SHA1 哈希加上 SecurePay 交易密码，按此顺序使用管道分隔符“|”：

1.  EPS_MERCHANTID
2.  交易密码（由 SecurePay 支持提供）
3.  EPS_TXNTYPE（为 0）
4.  EPS_REFERENCEID（用于测试目的 123）
5.  EPS_AMOUNT（用于测试目的 100.00）
6.  EPS_TIMESTAMP（用于测试目的 20120910203805）

尽管我已按照上述说明进行操作，但每当我付款时，它都会显示“***指纹无效***”。示例代码：

```
FormsAuthentication
  .HashPasswordForStoringInConfigFile("xxx|xxx|0|123|100.00|201‌20910203805","sha1")
  .ToLower();` 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T11:21:21.197

检查您是否正确地结束了该行，或者使用尾随“|” 或删除不必要的尾随“|”。

还要检查您使用的方法是否没有在方法中添加任何会扭曲您所期望的内容的其他内容。（我正在考虑基于您所使用的特定机器的盐，不知道它是否这样做）

我一直在尝试使用这里[http://shagenerator.com/](http://shagenerator.com/)生成哈希：

```
ABC|password|1|Te‌​st Reference|1.00|20120912123421 
```

给出：

```
25a1804285bafc078f45e41056bcdc42e0508b6f 
```

您可以使用我的输入获得与您的代码相同的密钥吗？

更新：

你可以试试这个方法，而不是`HashPasswordForStoringInConfigFile()`看看你是否更接近：

```
private string GetSHA1String(string text)
{
    var UE = new UnicodeEncoding();
    var message = UE.GetBytes(text);

    var hashString = new SHA1Managed(); 
    var hex = string.Empty;

    var hashValue = hashString.ComputeHash(message); 
    foreach (byte b in hashValue)
    { 
        hex += String.Format("{0:x2}", b);
    } 

    return hex;
} 
```

更新 2：

**检查您的编码，我发现我可以将哈希输出与：**

```
var UE = new UTF8Encoding(); 
```

更新 3：

以下代码在控制台应用程序中为我工作，我看到哈希生成相同的值，并且我还能够将输出与[http://shagenerator.com/](http://shagenerator.com/)进行比较：

```
using System;
using System.Security.Cryptography;
using System.Text;
using System.Web.Security;

namespace SecurepayPaymentGatewayIntegrationIssue
{
    class Program
    {
        static void Main(string[] args)
        {
            var text = @"ABC|password|1|Te‌​st Reference|1.00|20120912123421";
            Console.WriteLine(GetSHA1String(text));

            Console.WriteLine(FormsAuthentication.HashPasswordForStoringInConfigFile(text, "sha1").ToLower());

            Console.ReadKey();
        }

        private static string GetSHA1String(string text)
        {
            var UE = new UTF8Encoding();// ASCIIEncoding(); // UnicodeEncoding();
            var message = UE.GetBytes(text);

            var hashString = new SHA1Managed();
            var hex = string.Empty;

            var hashValue = hashString.ComputeHash(message);
            foreach (byte b in hashValue)
            {
                hex += String.Format("{0:x2}", b);
            }

            return hex;
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-10T07:27:50.067

我有同样的问题，我使用以下方法解决了这个问题：

```
 private string GetSHA1HashData(string data)
        {   

            SHA1 sha1 = new SHA1CryptoServiceProvider();

            //convert the input text to array of bytes
            byte[] hashData = sha1.ComputeHash(Encoding.Default.GetBytes(data));

            //create new instance of StringBuilder to save hashed data
            StringBuilder returnValue = new StringBuilder();

            //loop for each byte and add it to StringBuilder
            for (int i = 0; i < hashData.Length; i++)
            {                
                returnValue.Append(hashData[i].ToString("x2"));
            }

            // return hexadecimal string
            return returnValue.ToString();
        } 
```

在页面加载中，我将此返回值转换为小写。因为上面的方法返回值是大写的

```
string VAL="ABC|password|1|Te‌​st Reference|1.00|20120912123421";
fingerPrint = GetSHA1HashData(VAL); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-10-25T00:33:32.897

现在使用时间作为UTC： `string epsTimestamp = DateTime.UtcNow.ToString(@"yyyyMMddHHmmss");`

并确保您已使用 sha1 进行加密：

```
string data = EpsMerchant + "|" + EpsPassword + "|" + EpsTxnType + "|" + 
EpsReferenceId + "|" + EpsAmount + "|" + epsTimestamp;
string epsFingerprint = GetSha1String(data); 
```

下面是获取sha1的代码

```
string GetSha1String(string input)
        {
            StringBuilder stringBuilder = new StringBuilder();
            foreach (byte b in GetHash(input))
                stringBuilder.Append(b.ToString("X2"));
            return stringBuilder.ToString();
        }

    public static byte[] GetHash(string inputString)
    {
        HashAlgorithm obj = SHA1.Create();
        return obj.ComputeHash(Encoding.UTF8.GetBytes(inputString));
    } 
```

# html - 如何将元素水平放置在div中

> ID：12350044
> 
> 赞同：2
> 
> 时间：2012-09-10T10:44:39.747
> 
> 标签：html, css

我有一个 div，我希望 div 内的元素水平放置。

这是我的小代码

```
<div>
    <g:Label>Legal Name </g:Label>
    <g:TextBox> </g:TextBox>
</div> 
```

我的 div 中有这 2 个元素，我想将它们放在一行中，但是我得到了一个标签，然后在下一行我得到了文本框，知道如何将它们放在一行中。

显示：内联有效..但是

这不可能吗..？

```
 <div className="test">

    <g:Label>Legal Name </g:Label>
    <g:TextBox ui:field="txtLegalName"></g:TextBox>

    </div> 
```

CSS：

```
 .test{
display:inline-block; 
```

}

我实际上想减少我的代码，不想把这种风格放在 div 的每个小部件上，因为会有很多元素进入这个 div

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-10T10:46:48.280

定义**float**或**display:inline-block**给它。像这样写：

```
label,input{display:inline-block} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T10:46:51.500

使用`float:left`和`float:right`财产。

在这里演示[http://jsfiddle.net/suw8R/4/](http://jsfiddle.net/suw8R/4/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-10T10:49:39.350

如果您要求元素在一行中，则需要使用 CSS`white-space`属性强制父级不要换行：

```
parentElementSelector {
    white-space: nowrap;
}

parentElementSelector childElements {
    display: inline;
    /* or:
    display: inline-block;
    */
} 
```

如果仅使用该`display`属性，则元素将在其父容器中到达行尾时换行，而`nowrap`强制行继续。您可能还希望根据您的设计/要求为父元素（ 等）指定行为`overflow`。`hidden``overflow-x`

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-09-10T10:48:00.200

```
<g:HorizontalPanel>
    <g:Label>Legal Name </g:Label>
    <g:TextBox> </g:TextBox>
</g:HorizontalPanel> 
```

# c# - 字符串搜索引擎 - 返回最佳结果？

> ID：12350049
> 
> 赞同：0
> 
> 时间：2012-09-10T10:44:44.103
> 
> 标签：c#, string, algorithm, search, mathematical-optimization

我正在申请，我有一个问题。

描述应用程序：用户写，让我们在文本框中说一个句子，然后点击进入。该应用程序应搜索文本文件文件夹中的句子并根据该句子返回最相关的文本文件的标题。

那么，我应该根据什么标准选择包含该句子或该句子一部分的最佳文件？我有一些想法，基于出现次数，我正在搜索的文本文件的长度等。这是一个非常有趣的问题。

在互联网上，我找到的最佳链接是：[http](http://www.seomoz.org/blog/search-engine-algorithm-basics) ://www.seomoz.org/blog/search-engine-algorithm-basics 。

请帮忙提供一些想法...

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T10:47:34.483

传统的方法是使用[tf-idf 模型](http://en.wikipedia.org/wiki/Tf%2aidf)来确定关键字（术语）与文档的相关程度。

这个想法是：如果它多次出现在文档中 - 文档会得到提升。但是，非常常用的词 - 会被降低（对文档的分数不太重要），因为它们很可能出现在所有文档中。

您还想看看[Lucene.NET](http://incubator.apache.org/lucene.net/)，它是[lucene](http://lucene.apache.org/core/)的 .NET 版本，它是一个常用的开源搜索引擎。

您可能还想阅读有关[信息检索](http://en.wikipedia.org/wiki/Information_retrieval)的信息。我推荐斯坦福大学的[信息检索导论](http://nlp.stanford.edu/IR-book/)作为学习该领域的良好来源。

# c# - 使用 StringFormat 格式化 C# 字符串中的一组数字（不是货币或数字）

> ID：12350050
> 
> 赞同：1
> 
> 时间：2012-09-10T10:44:47.583
> 
> 标签：c#, wpf, xaml, string-formatting

我正在使用 WPF 和 C#，我想`StringFormat`用`TextBlock`.

示例：（`456321789`字符串）

我想以`TextBlock`类似的方式展示它`456 321 789`。

这个例子不起作用：

```
<TextBlock Text="{Binding Number, StringFormat=000 000 000"/>

<TextBlock Text="{Binding Number, StringFormat=### ### ###"/>

<TextBlock Text="{Binding Number, StringFormat={}{0:000 000 000}"/>

<TextBlock Text="{Binding Number, StringFormat={}{0:### ### ###}"/> 
```

前段时间我尝试格式化一组 7 位数字，例如`5432-123`. 而我没有成功。

我尝试了很多例子，并注意到作品。我做错了什么？

注意：我能做到这一点的唯一方法是如果我有一组数字作为整数。但我想了解为什么我不能用字符串来做。

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T10:49:44.400

根据[文档](http://msdn.microsoft.com/en-us/library/0c899ak8.aspx)，您使用的字符串格式仅适用于整数。因此，为了获得所需的格式，您必须绑定到一个数字。不是字符串。

如果你想一想，这背后是有原因的：像数字分组这样的格式只对数字感兴趣，而不是像“helloworld”这样的通用字符串。所以没有人关心为通用字符串实现这种格式。

对此感到抱歉。

（除了一个问题：如果您的数据保证是数字的字符串表示形式，为什么不将值保留为`int`then 呢？）

# java - javax.servlet.Filter.doFilter(ServletRequest req, ServletResponse res) 什么时候会用 HttpServletRequest/Response 以外的任何东西调用？

> ID：12350053
> 
> 赞同：16
> 
> 时间：2012-09-10T10:44:59.770
> 
> 标签：java, servlets

多年来我一直在编写 servlet 和过滤器，这总是让我有点恼火——检查和转换`ServletRequest`and`ServletResponse`参数到`HttpServletRequest`and `HttpServletResponse`，尤其是过滤器，因为没有标准的`HttpFilter`基类来为你做这件事——不像 servlet .

问题是——你什么时候会看到其他的东西`HttpServletRequest`/`HttpServletResponse`被传递给你的servlet/过滤器，如果你这样做了你应该怎么做？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-09-10T11:31:04.737

在一些尚未实现的世界中，除了 HttpServlet 之外还有其他 servlet 类型。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-12-29T18:03:07.107

根据我对 API 的理解，servlet 规范是专门为 HTTP/web 使用而创建的 servlet 框架。

servlet 规范的参考部分中提到的协议都只与 HTTP 相关，即。 *RFC 1945 超文本传输​​协议 (HTTP/1.0)* *RFC 2616 超文本传输​​协议 (HTTP/1.1)* *RFC 2617 HTTP 身份验证：基本和摘要身份验证* *RFC 2324 超文本咖啡壶控制协议 (HTCPCP/1.0) -- 这是基于 HTTP* 所有这些是 HTTP 协议。 规范也要求这样做：

> 所有 servlet 容器都必须支持 HTTP 作为请求和响应的协议，但也可能支持其他基于请求/响应的协议，例如 HTTPS（HTTP over SSL）。

拥有 GenericServlet -> HttpServlet 的原因是在 API 的 API 结构中具有泛化 -> 向专业化类型的层次结构。

# ios - 在 cocos2d for iOS 中添加颜色

> ID：12350057
> 
> 赞同：1
> 
> 时间：2012-09-10T10:45:27.110
> 
> 标签：ios, cocos2d-iphone, ccsprite

我正在尝试使用 cocos2d 做类似 RGB 圆圈的事情：

![在此处输入图像描述](../Images/aaeb57b52d8e4dec8784b8d592fcff96.png)

我有可移动的圆圈（一个用于 R，另一个用于 B，另一个用于 G），我想自动计算相交圆圈的颜色（而不用新颜色在特定区域上创建一些东西 - 这是我正在使用的解决方案）。

有没有办法自动添加颜色？

**我现在在做什么？**

目前我在 a 中使用 1x1 空白 png（作为纹理），`CCSprite`然后更改`CCSprite`'s 颜色（`sprite.color = ccc3(r, g, b)`对于每个圆圈）。

**我尝试了什么？**

我尝试在我的精灵中使用不同的混合模式，`mySprite.blendFunc = (ccBlendFunc) { GL_DST_COLOR, GL_ONE_MINUS_SRC_ALPHA };` 甚至添加了一些不透明度（直接在精灵中或使用模式在纹理中 `[CCTexture2D setDefaultAlphaPixelFormat:kCCTexture2DPixelFormat_RGBA8888]`），但我无法获得我想要的效果。

我试图在[网站上找到具有多种混合模式](http://www.andersriggelsen.dk/glblendfunc.php)的组合，但没有找到有效的组合。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T20:25:05.667

不建议使用 1x1 像素纹理。我认为旧设备甚至不会显示它们。至少使用 2x2 或更好的 4x4。不确定哪个是最小值。

如果您打算每个像素有一个 Sprite，请记住每个 sprite 大约 400 字节（取决于 cocos2d 版本）。这意味着用精灵像素填充整个 320x480 屏幕将消耗近 60 MB 的内存！

我认为仅使用混合模式无法获得与图片相同的结果。[你可以在这里做实验](http://www.andersriggelsen.dk/glblendfunc.php)。您必须编写一个着色器程序，或者以其他方式将每个子部分渲染为填充多边形，其颜色由每个重叠精灵的基色确定。

由于您只能将混合模式应用于整个精灵（在本例中为圆形），因此混合模式可能对一个交点是正确的，但它也会与您不想要的背景混合。我不是 100% 确定，但我认为这种 RGB 颜色添加不适用于混合模式是有技术原因的。也许对 OpenGL ES 渲染有更好技术理解的人可以提供帮助。

# c# - 使用 DateTimePicker 关闭对话框

> ID：12350060
> 
> 赞同：0
> 
> 时间：2012-09-10T10:45:31.183
> 
> 标签：c#, .net, windows, winforms

我们需要在自动注销期间关闭表单。我们通过迭代表单来关闭对话框`Application.OpenForms`

如果对话框具有日期时间控件 ( ) 并且日历窗口处于活动状态，则我们无法关闭对话框`DateTimePicker`，如下图所示

[http://ww.functionx.com/vcnet/controls/images/Calendar4.gif](http://ww.functionx.com/vcnet/controls/images/Calendar4.gif)

我试图通过调用`Close`Method 来关闭表单。它没有用。

然后我在枚举窗口后发送 WM_CLOSE 消息关闭日历窗口，如下所示，然后`Close`在表单上调用。在这种情况下，日历窗口关闭。但是表格没有关闭

```
if (sb.ToString() == "SysMonthCal32")
{
    SendMessage(hWnd, 0x0010, IntPtr.Zero, IntPtr.Zero);             
} 
```

在这两种情况下，如果我单击对话框，它就会关闭。

如何关闭表格？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T22:11:11.370

我无法复制您的问题，这是对 form.Close() 的调用导致表单关闭，无论日期选择器控件是否打开。（通过使用 PostMessage WM_CLOSE 形成的 hwnd 也得到了相同的结果）

我确实发现我可以通过调用其 Hide 然后 Show 方法使日期选择器控件“关闭”：

```
dateTimePicker1.Hide();
dateTimePicker1.Show(); 
```

这还具有不破坏任何窗口对象的优点，就像关闭（或 WM_CLOSE）可能做的那样。

# c++ - 使用带有继承的 boost::make_shared

> ID：12350061
> 
> 赞同：0
> 
> 时间：2012-09-10T10:45:32.910
> 
> 标签：c++, inheritance, make-shared

考虑两个类

```
class A{
public:
    int i;
    A(){}
    explicit A(const int ii):i(ii){}
    virtual ~A(){
        cout<<"~A - "<< i <<endl;
    }
    virtual void inc(){
        i++;
        cout<<"i: "<<i<<endl;
    }
};

class B: public A{
public:
    int j;
    B(){}
    explicit B(const int jj, const int ii=-1):A(ii), j(jj){}
    ~B(){
        cout<<"~B - "<<i<<", "<<j<<endl;
    }
    void inc(){
        A::inc();
        j++;
        cout<<"j: "<<j<<endl;
    }
}; 
```

现在我们可以这样做`main()`：

```
A *pa = new B();
//...
pa->inc(); // implements B::inc(); 
```

现在使用`boost`库的版本

```
boost::shared_ptr<A> pa = boost::make_shared<B>(2);
//...
pa->inc(); // implements B::inc(); 
```

我的问题是，在使用该`boost`版本时，是否可以使用这种方式，即两个版本都可以以相同的方式使用，还是我需要做一些额外的事情（我不太了解 boost 的内部原理）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-10T11:18:06.177

有几件事你不能用智能指针做：

*   您不能将智能指针作为参数传递给需要普通指针的函数。
*   您不能将普通指针分配给智能指针。

除此之外，您可以像处理任何其他指针一样处理智能指针，包括调用虚函数并且会发生正确的事情。

PS. If possible, I recommend you to migrate to the C++11 smart pointers instead. They were "inspired" (i.e. more or less copied straight) by the Boost smart pointers, so all you really have to do is include the `<memory>` header file and change e.g. `boost::shared_ptr` to `std::shared_ptr`. See e.g. [this reference site](http://en.cppreference.com/w/cpp/memory).

# winapi - 我可以查明 Windows 2000 中是否没有 WinAPI 功能吗？

> ID：12350063
> 
> 赞同：2
> 
> 时间：2012-09-10T10:45:36.077
> 
> 标签：winapi, windows-2000

MSDN 通常只将 Windows XP 列为“最低支持客户端”，可能是因为 Windows 2000 和更早版本已达到其生命周期的终点。但是，我们的一些用户在 Windows 2000 机器上使用我们的软件，如果可以避免的话，我不想破坏这种兼容性。我能否查明 Windows API 函数在 Windows 2000 中是否不可用（无需测试该系统上的每个函数）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-10T14:51:05.243

“Platform SDK for Windows Server 2003 R2”中的帮助包含可追溯到 Windows 95 和 Windows NT 3.1 的平台信息。我最近下载了它，但目前在 microsoft.com 上找不到它。我不知道这是暂时的故障还是已经消失了。

[Windows Server 2003 SP1 Platform SDK](http://www.microsoft.com/en-us/download/details.aspx?id=6510)中的帮助可能类似，但我没有看过。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-10T11:49:26.703

不幸的是，Microsoft 已从最新 MSDN 的“支持的操作系统”列表中删除了对早于 XP 的任何内容的引用。如果您仍然有 MSDN 的旧副本（我有 MSDN6a），那么他们仍然会将真正的“支持的客户端”列出回 Windows 9x。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-10T11:18:52.623

从理论上讲`#define NTDDI_VERSION NTDDI_WIN2K`，如果它依赖于较新的 API，您的程序将无法编译，但不幸的是，这并不总是有效。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-10T11:10:54.860

[您可以在 Win 2000 系统中使用Dependency Walker](http://www.dependencywalker.com/)打开您的二进制文件，它会以红色显示缺少的功能。当然，前提是您静态链接到它们，这可能就足够了 - 至少对于初学者来说它是简单、容易和高效的。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-10T11:06:25.673

MSDN 通常也会提到较旧的操作系统。请参阅：http: [//msdn.microsoft.com/en-us/library/windows/desktop/ms724211%28v=vs.85%29.aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/ms724211%28v=vs.85%29.aspx)

如果它没有提到windows 2000，你必须测试它，它很可能不可用。您可以使用较旧的编译器（例如 Visual Studio 6）来查看其库中是否提供该功能。如果有这个功能，那么Windows 2000应该也有。

# php - 如何从从mysql查询生成为数组的结果发送电子邮件

> ID：12350071
> 
> 赞同：0
> 
> 时间：2012-09-10T10:46:19.027
> 
> 标签：php, mysql, email, html-email

我正在使用以下查询：-

```
$qry=mysql_query("SELECT item,quantity,price,(quantity * price) as total FROM saleitems_T WHERE invoice = '$inv' "); 
```

我正在尝试在邮件正文中使用 while 循环，但它不起作用。以下是代码。

```
$to="someone@somewhere.com";
$headers="Content-type: text/html\r\n";
$body = '
<html> <body>
Invoice details are as follows.<br />
'.while($row = mysql_fetch_array($qry)){
echo "<table><tr><td>";
echo $row['item'];
echo "</td><td>";
echo $row['quantity'];
echo "</td><td>";
echo $row['price'];
echo "</td><td>";
echo $row['total'];
echo "</td></tr>";} .'
</table></body></html>';

mail($to,$body,$headers); 
```

检索到的行数因每张发票而异。现在我想将结果作为电子邮件发送。任何有关示例代码的帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T15:18:57.330

```
$to = "someone@somewhere.com";
$headers = "Content-type: text/html\r\n";
$body = '<html><body>Invoice details are as follows.<br />';
foreach( mysql_fetch_array($qry) as $v ) {
$body .= "<table><tr><td>{$v['item']}</td>"    
         . "<td>{$v['quantity']}</td>"     
         . "<td>{$v['price']}</td>"  
         . "<td>{$v['total']}</td></tr></table></body></html>";       
}

mail($to,$body,$headers); 
```

# iphone - 保存登录凭据 Xcode

> ID：12350072
> 
> 赞同：2
> 
> 时间：2012-09-10T10:46:22.330
> 
> 标签：iphone, objective-c, ios, xcode, ipad

我正在实现一个应用程序，第一个视图是登录视图。它包含 3 个文本字段帐户名、用户名和密码。我想让应用程序保存登录信息，以免用户每次打开应用程序时都写下来。并在他/她注销时被删除。

怎么做？以及如何读/写文件？

谢天谢地

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-09-10T10:56:48.153

使用钥匙串存储登录密码。下面是简单的代码

储藏：

```
KeychainItemWrapper *keychain = 
 [[KeychainItemWrapper alloc] initWithIdentifier:@"MyAppLoginData" accessGroup:nil];
[keychain setObject:loginStr forKey:(id)kSecAttrAccount];
[keychain setObject:pwdStr forKey:(id)kSecValueData]; 
```

查询：

```
NSString *login = [keychain objectForKey:(id)kSecAttrAccount];
NSString *pwd = [keychain objectForKey:(id)kSecValueData]; 
```

删除：

```
[keychain resetKeychainItem]; 
```

您需要先在项目中添加 KeychainItemWrapper.h 和 KeychainItemWrapper.m（[此处](http://developer.apple.com/library/ios/#samplecode/GenericKeychain/Listings/Classes_KeychainItemWrapper_h.html)）。

使用钥匙串存储数据的另一个重要方面是

1.  即使在应用程序卸载-安装后数据仍然存在
2.  数据可以在您的应用程序之间共享（需要具有相同的捆绑种子 ID，从 [此处](http://shaune.com.au/ios-keychain-sharing-data-between-apps/)读取）。考虑所有应用的单点登录。
3.  仅在设备重置时从设置中删除数据。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-10T10:48:49.743

这种敏感数据通常存储在钥匙串中。类似的问题[在这里](https://stackoverflow.com/questions/5247912/saving-email-password-to-keychain-in-ios)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-10T10:50:01.353

检查[keychainServConcepts](https://developer.apple.com/library/ios/#documentation/security/Conceptual/keychainServConcepts/iPhoneTasks/iPhoneTasks.html)以保存所需的数据

检查[STUtils](https://github.com/ldandersen/STUtils)以安全地保存用户名和密码。

U 也可以使用 NSUserDefault 将数据保存为 userName，并在需要时删除。

* * *

## 回答 #4

> 赞同：-7
> 
> 时间：2012-09-10T10:52:29.200

```
To Save:

    [[NSUserDefaults standardUserDefaults] setValue:AccountTxtField.text forKey:@"Account"];
    [[NSUserDefaults standardUserDefaults] setValue:UserTxtField.text forKey:@"Username"];
    [[NSUserDefaults standardUserDefaults] setValue:passwordTxtField.text forKey:@"password"];
    [[NSUserDefaults standardUserDefaults] synchronize];

To Read:

    NSString * _Account = [[NSUserDefaults standardUserDefaults] stringForKey:@"Account"];
    NSString * _UserName = [[NSUserDefaults standardUserDefaults] stringForKey:@"Username"];
    NSString * _password = [[NSUserDefaults standardUserDefaults] stringForKey:@"password"]; 
```

logOut ：设置所有值为空。

# php - TinyMCE 将 html 标签添加到数据库

> ID：12350074
> 
> 赞同：-1
> 
> 时间：2012-09-10T10:46:29.360
> 
> 标签：php, tinymce

我在集成了 TinyMCE 的网页上有一个表单。我将文本框中的内容发布到数据库中。但是 tinyMCE 会将所有 html 标签发布到数据库中。我使用了 php strip_tags，但如果我使用它，我将失去 tinymce 输出的颜色和粗体文本的功能。

有没有办法允许在输出中保留 tinyMCE 功能（如彩色文本等）但保持数据库与 html 标签无关？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T10:52:29.777

使用`strip_tags`- 功能。您可以定义允许的标签：

```
strip_tags($text, '<b><a>'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T10:55:32.243

最好将 TinyMCE 配置为仅允许您想要的元素：

```
tinyMCE.init({
    ...
    valid_elements : "strong/b,em/i,font"
}); 
```

或类似的东西。

对于 mroe 信息：[http ://www.tinymce.com/wiki.php/Configuration:valid_elements](http://www.tinymce.com/wiki.php/Configuration:valid_elements)

# vb.net - vb.net 在不使用 windows 媒体播放器的情况下播放声音

> ID：12350075
> 
> 赞同：0
> 
> 时间：2012-09-10T10:46:34.303
> 
> 标签：vb.net, audio

有没有办法在不使用 windows 媒体播放器的情况下在 vb.net 中播放声音。

我已经尝试过 my.computer.audio.play 但这似乎无济于事。我试过 axshockwaveflash.loadmovie（找不到音频）.play

我似乎找不到另一种选择，请问有人有什么建议吗

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-10T10:57:52.243

使用 My.Computer.Audio.Play() 应该可以工作 - 您是否尝试过传入 WAV 文件的完整（绝对）文件名以查看这是否有效。如果您想尝试另一种播放声音的方式，您也可以查看这篇 CodeProject 文章[http://www.codeproject.com/KB/audio-video/soundplayerbug.aspx](http://www.codeproject.com/KB/audio-video/soundplayerbug.aspx)，尽管没有必要去这些长度，除非您遇到文章中提到的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T21:10:33.160

我想避免向项目添加任何额外的 dll 依赖项，所以我现在的工作是调用 Process.run(file);

因为这会调用 Windows 自己的 shell 并运行该程序，如果存在任何程序来运行它，如果没有，它会为用户提供使用它做任何他们想做的任何事情的选项。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-04T14:46:38.040

如果您有 swish-max 软件，您所要做的就是打开它的环境，然后通过单击左侧的添加脚本按钮创建一个脚本，选择声音并选择播放声音方法。在脚本环境中单击导入以选择声音。然后单击声音属性，激活“播放时不再播放”，然后降低音量再次播放并单击确定按钮。

在您的项目中，创建一个Shock_wave 对象的实例，右键单击它以访问其属性，在其Movie 属性上，指定在swish_max 中创建的电影的路径，然后运行您的程序。

或者

如果您不想在设计中这样做，则创建一个按钮名称 play 并在其下添加以下代码

private sub buttonPlay_Click(Byval sender as object , Byval e as sysyem.eventArgs) 处理 _bttonplay.click

Axtshockwave1.movi​​e="把你的电影的路径放在这里引用它"

结束子

# android - 使用 webview 的 Android 应用程序在按钮单击 url 时提供 html 代码

> ID：12350080
> 
> 赞同：0
> 
> 时间：2012-09-10T10:46:52.947
> 
> 标签：android, httpclient, android-webview

我想开发一个可以在 webView 中打开 url 的 android 应用程序，使用 webViewClient 中的 shouldInterceptRequest 方法。我必须使用 HttpClient 获取数据。所以我构建了应用程序，但是当我运行应用程序时，main.xml 被加载，然后当我单击按钮时，它会给出 url 的 html 代码。

主.xml：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
          android:orientation="vertical"
          android:layout_width="fill_parent"
          android:layout_height="fill_parent"
    >
<Button
        android:id="@+id/buttonurl"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:text="visit     www.stackoverflow.com"
        />

</LinearLayout> 
```

webview.xml

```
<?xml version="1.0" encoding="utf-8"?>

<WebView xmlns:android="http://schemas.android.com/apk/res/android"
          android:id="@+id/webView1"
          android:layout_width="fill_parent"
          android:layout_height="fill_parent"/> 
```

AndroidManifest.xml

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
      package="com.example"
      android:versionCode="1"
      android:versionName="1.0">
<uses-sdk android:minSdkVersion="16"/>
<application android:label="@string/app_name" android:icon="@drawable/ic_launcher">
    <activity android:name="MyActivity"
              android:label="@string/app_name">
        <intent-filter>
            <action android:name="android.intent.action.MAIN"/>
            <category android:name="android.intent.category.LAUNCHER"/>
        </intent-filter>
    </activity>
    <activity android:name=".WebViewActivity" android:label="@string/app_name">
        <intent-filter android:label="@string/app_name">
            <action android:name="android.intent.action.SEND" />
            <action android:name="android.intent.action.VIEW"/>
            <action android:name="android.intent.action.GET_CONTENT"/>
            <category android:name="android.intent.category.DEFAULT" />
            <!--    <data android:mimeType="image/png" /> -->
        </intent-filter>

    </activity>
</application>

<uses-permission android:name="android.permission.INTERNET"></uses-permission>
</manifest> 
```

我的活动.java

```
package com.example;

import android.app.Activity;
import android.content.Context;
import android.content.Intent;
import android.net.Uri;
import android.os.Bundle;
import android.view.View;
import android.widget.Button;

public class MyActivity extends Activity {

private Button button;

//String strURL="www.facebook.com";

/**
 * Called when the activity is first created.
 */
@Override
public void onCreate(Bundle savedInstanceState) {

    final Context context=this;
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    button =(Button) findViewById(R.id.buttonurl);

    button.setOnClickListener(new View.OnClickListener() {
        @Override
        public void onClick(View view) {
            Intent intent = new Intent(context,WebViewActivity.class);
            startActivity(intent);
        }
    });

}
} 
```

WebViewActivity.java

```
package com.example;

import android.app.Activity;
import android.os.Bundle;

import android.webkit.WebView;
public class WebViewActivity extends Activity{

  String url="http://www.stackoverflow.com";
public void onCreate(Bundle savedInstanceState){

    super.onCreate(savedInstanceState);
setContentView(R.layout.webview);

    WebView webView=  (WebView)findViewById(R.id.webView1);

    //MyWebViewClient myWebViewClient=new MyWebViewClient();
    webView.setWebViewClient(new MyWebViewClient());

    webView.loadUrl(url);

   // myWebViewClient.shouldOverrideUrlLoading(webView,url);

}
} 
```

MyWebViewActivity.java

```
package com.example;

import android.webkit.WebResourceResponse;
import android.webkit.WebViewClient;
import android.webkit.WebView;
import android.net.Uri;
import android.content.Intent;
import android.app.Activity;
import android.widget.Toast;
import org.apache.http.client.HttpClient;
import org.apache.http.impl.client.DefaultHttpClient;
import org.apache.http.client.methods.HttpGet;
import org.apache.http.HttpResponse;
import org.apache.http.HttpEntity;
import java.io.*;
import org.apache.http.protocol.BasicHttpContext;
import org.apache.http.protocol.HttpContext;
import org.apache.http.client.ClientProtocolException;

public class MyWebViewClient extends WebViewClient {

                    public InputStream httpcall(WebView view,String url) {

                    HttpClient httpClient = new DefaultHttpClient();
                    HttpContext localContext = new BasicHttpContext();
                    HttpGet httpGet = new HttpGet("http://www.stackoverflow.com");

                    BufferedReader reader = null;
                    String result = null;
                    try {
                        HttpResponse response = httpClient.execute(httpGet, localContext);
                        result = "";

                        reader = new BufferedReader(
                                new InputStreamReader(
                                        response.getEntity().getContent()
                                )
                        );

                        String line = null;
                        while ((line = reader.readLine()) != null) {
                            result += line + "\n";
                        }
                    } catch (ClientProtocolException e) {
                        // TODO Auto-generated catch block
                        e.printStackTrace();

                    } catch (IOException e) {
                        // TODO Auto-generated catch block
                        e.printStackTrace();

                    } finally {
                        if (reader != null) {
                            try {
                                reader.close();
                            } catch (IOException e) {
                                // TODO Auto-generated catch block
                                e.printStackTrace();
                            }
                        }
                    }
                        ByteArrayInputStream byteArrayInputStream = new ByteArrayInputStream( result.getBytes());

                        return byteArrayInputStream;

                    //String webData = result.toString();

                     //   return webData;
                    //view.loadDataWithBaseURL("http://www.stackoverflow.com", webData, "text/html", "UTF-8", "about:blank");

                }

    @Override
   public WebResourceResponse shouldInterceptRequest(WebView view,String url){

       return new WebResourceResponse("text/json","utf-8",httpcall(view,url));
   }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T10:55:33.927

实际上，我认为在您的**WebViewActivity**`webView`中为**null**

 **因为你忘了调用`setContentView(R.layout.webview);`onCreate();

就像是，

```
public void onCreate(Bundle savedInstanceState){
    super.onCreate(savedInstanceState);
    setContentView(R.layout.webview);
    WebView webView=  (WebView)findViewById(R.id.webView1);
    //MyWebViewClient myWebViewClient=new MyWebViewClient();
    webView.setWebViewClient(new MyWebViewClient());
    webView.loadUrl(url);
   // myWebViewClient.shouldOverrideUrlLoading(webView,url);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-10T11:20:18.707

请将此`setContentView(R.layout.webview);`行添加到您的 WebViewActivity 类之前`WebView webView= (WebView)findViewById(R.id.webView1);`并写而不是 ，它将解决您的问题。

并更改您活动的下方。

```
String url="http://www.stackoverflow.com" 
```**

# java - 朱尼特。如何测试在方法中调用其他类构造函数的方法

> ID：12350084
> 
> 赞同：0
> 
> 时间：2012-09-10T10:47:05.427
> 
> 标签：java, junit

请帮助我测试以下场景

```
public class Myproject {
 Teacher tescher;
 public Teacher test(teacher teach){
     String name="A";
     String sub="b";
     tescher= new Teacher(name,sub);
     return tescher;

 }
} 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T11:13:35.427

```
@Test
public void test(){
Myproject myProject = new Myproject();
Teacher teacher = myProject.test(new Teacher("some","thing")); // Assuming Teacher don'thave default constuctor
assertEquals("A",teacher.getName()); //assuming static import 
assertEquals("b",teacher.getSub());

} 
```

我建议您应该在代码中包含以下内容：

```
tescher= new Teacher(teacher.getName(),teacher.getName()); 
```

代替

```
 tescher= new Teacher(name,sub); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T11:13:26.203

在这种情况下，您只需调用该方法并检查

1.  返回具有正确属性集的教师实例。

2.  该字段设置为该教师实例。可能通过在使用该字段的类中使用其他方法。

在更复杂的情况下，如果您负担不起实际创建的其他对象，或者您无法轻松验证它是否具有正确的属性，[PowerMock](http://code.google.com/p/powermock/)可能会很有用。

# magento - 正常价格 - 不含税 magento

> ID：12350090
> 
> 赞同：1
> 
> 时间：2012-09-10T10:47:29.280
> 
> 标签：magento, magento-1.7

我们在店外显示包括和不包括税在内的价格，尽管不包括税是主要价值。

我们有这个代码：

```
 <p class="old-price">
            <span class="price-label"><?php echo $this->__('Was:') ?></span>
            <span class="price" id="old-price-<?php echo $_id ?><?php echo $this->getIdSuffix() ?>">
                <?php echo $_coreHelper->currency($_regularPrice,true,false) ?>
            </span>
        </p> 
```

如果有“特价”来显示正常价格，则使用该选项。正常价格显示包括税。关于我们如何让它排除 TAX 的任何建议？

谢谢。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-17T21:52:24.150

我可以建议一个更好的解决方案：

*   避免手工计算
*   返回真实的最终价格，包括特价和目录价格规则

```
<?php
$product = Mage::getModel('catalog/product')->load('YOUR_PRODUCT_ID');
$finalPriceExcludingTax = $this->helper('tax')->getPrice($product, $product->getFinalPrice(), false );
?> 
```

（参见[Magento 文档](http://docs.magentocommerce.com/Mage_Tax/Mage_Tax_Helper_Data.html#getPrice)）

而且，如果您希望您的价格被格式化（使用货币符号、零、正确的逗号等......）：

```
<?php
$formattedPrice = Mage::helper('core')->currency($finalPriceExcludingTax);
?> 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-11T09:59:11.590

弄清楚了：

```
 <?php 
    $price_with_tax = $_regularPrice;
    $tax_rate = $_product->getData('tax_percent');
    $divided_value = 1+($tax_rate/100);
    $price_without_tax = $price_with_tax/$divided_value;
    echo $_coreHelper->currency($price_without_tax); 
    ?> 
```

以防万一它对任何人有用。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-10T13:23:40.433

划分价格：

`$price_without_tax = $price_with_tax / (1 + (taxpercent/100));`

例如，如果您的价格为 12 美元。我们知道这个价格我们有20%的税，你可以得到的不含税价格：

`$pricewithouttax = $12 / 1.20`

因为对于 20% 的税，我们计算：`$12 / (1+(20/100))`

# radio-button - 代码隐藏获取错误的 RadioButton 值

> ID：12350094
> 
> 赞同：0
> 
> 时间：2012-09-10T10:47:41.393
> 
> 标签：radio-button, webforms

就像我在标题中所写的那样，当我尝试更改 RadioButton 的选择时，代码隐藏会得到错误的值。

**困境.aspx：**

```
<asp:RadioButtonList ID="rbList" runat="server">
    <asp:ListItem Text="Yes, please." />
    <asp:ListItem Text="No, thanks." />
    <asp:ListItem Text="Ummm... maybe." />
</asp:RadioButtonList>
<asp:Button ID=""btnChoose" runat="server" text="OK" OnClick="btnChoose_Click" /> 
```

**困境.aspx.cs：**

```
protected void Page_Load(object sender, EventArgs e)
{
    int initialIndex = GetInitialIndex(); // Simplified for sake of question.
    rbList.SelectedIndex = initialIndex; // This works.
}

protected void btnChoose_Click(object sender, EventArgs e)
{
    int selection = rbList.SelectedIndex; // This gets it wrong!
} 
```

代码隐藏不是获取新选择的 RadioButton，而是仍然认为所选索引是初始索引。

为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T12:18:51.580

```
protected void Page_Load(object sender, EventArgs e)
{
    if (!Page.IsPostBack)
    {
        int initialIndex = GetInitialIndex(); // Simplified for sake of question.
        rbList.SelectedIndex = initialIndex; // This works.
    }
} 
```

有人发布了这个答案，但由于某种原因将其删除。
不管是谁在我面前发布了这个答案——它有效！

# git - 在 hooks 中使用 SmartGit 的 SSH 客户端

> ID：12350097
> 
> 赞同：1
> 
> 时间：2012-09-10T10:47:58.057
> 
> 标签：git, ssh, smartgit

使用 git 存储库挂钩时，如何使用 SmartGit 的内部 SSH 客户端？

当使用带有`scp`操作的钩子时，我收到一个`Permission Denied: (publickey)`错误。

SmartGit 知道凭据，它们在`Edit > Preferences > Commands > Authentication`从存储库中提取时列在 下。

我需要一个 commit-msg 挂钩来生成 Change-Id: 提交消息中的标签，这是正确运行 gerrit 所必需的（使用[Mahara 开发人员贡献指南](https://wiki.mahara.org/index.php/Developer_Area/Contributing_Code)进行设置）：

```
#!/bin/sh
scp -p -P 29418 username@reviews.mahara.org:hooks/commit-msg .git/hooks/ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T10:56:21.197

这是不可能的。当 SmartGit 调用 Git 二进制文件时，它会将`GIT_SSH`环境变量设置为其内部客户端，仅针对某些命令，例如`push`and `pull`，但不针对`commit`. 因此，如果您真的认为在提交时需要连接到远程存储库（恕我直言，这不是必需的），您将不得不手动配置您的 SSH 客户端。

# wpf - 编译时检查绑定？

> ID：12350109
> 
> 赞同：6
> 
> 时间：2012-09-10T10:48:37.847
> 
> 标签：wpf, silverlight, xaml, mvvm, binding

我对 MVVM 比较陌生，并且我了解 MVVM 相对于 xaml 背后的简单代码的一些好处（例如 VM 的可测试性）。我们正在使用 Caliburn Micro 来执行一些绑定，但这有点无关紧要，我可以使用特定绑定 {binding ...} 我的问题或多或少保持不变。

我理解如果一切都正确完成，VM应该对V一无所知的逻辑，但似乎因为我们在V和VM之间使用动态运行时绑定，编译器无法检查每个绑定的合法性表达。例如，如果我有一个名为 UserName 的 UI 组件，则 Caliburn 将尝试在运行时将其绑定到名为 UserName 的 VM 属性（类似于执行 Value="{binding UserName}" 之类的操作）。但是，如果我重命名我的 VM 属性或拼错 UI 组件名称或绑定表达式，我们直到运行时才得到问题的指示。

在我看来，能够告诉 xaml 一个 UI 组件或页面将绑定到一个特定的界面，这样编译器就可以完成一些原本必须完成的工作，这将是非常好的（并重做）由测试部门（我经常这样做）。

有没有办法告诉 xaml 我们正在绑定到接口或对象类型？是否有一些工具可以插入 xaml 应用程序来验证绑定？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-10T11:32:53.767

虽然编译器不支持 XAML 的编译时检查，但您可以通过编写自定义构建任务来实现大致相同的结果，该任务通过[XAMLReader](http://msdn.microsoft.com/en-us/library/system.windows.markup.xamlreader.aspx)类实例化每个 XAML 文件，然后使用[自定义 TraceListener](http://www.switchonthecode.com/tutorials/wpf-snippet-detecting-binding-errors)来侦听绑定错误。

除此之外，如果您准备使用代码进行数据绑定，则可以创建直接引用属性名的绑定。类似于以下内容（未经测试）

```
Binding createBinding<TProperty>(Expression<Func<TProperty>> property, object source)
{
    MemberExpression me = property.Body as MemberExpression;
    if (me == null || me.Expression != property.Parameters[0]
          || me.Member.MemberType != MemberTypes.Property) {
        throw new InvalidOperationException(
            "Now tell me about the property");
    }
    Binding b = new Binding(me.Member.Name);
    b.Source = source;

    return b;
}

// sample code
Binding b = createBinding(()=>this.FontSize, this);
textBlock1.SetBinding(TextBlock.FontSizeProperty, b); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-06T15:29:46.437

这篇文章给出了一个简洁的例子，说明如何消除绑定中的魔术字符串。它不会进行编译时类型检查，但至少编译器会发现拼写错误。

[Wpf Binding Path={x:Static <propertypath>} 的性能影响？](https://stackoverflow.com/questions/3674426/performance-impact-of-wpf-binding-path-xstatic-propertypath)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-06-27T23:55:23.600

您问“是否有一些工具可以插入 xaml 应用程序以验证绑定？”。

是的，您可以使用`Snoop`它在运行时检测不良绑定。它不是编译时间 - 但它同样有效。

有关完整说明，请参阅`Solution 8`ReSharper [WPF error: "Cannot resolve symbol "MyVariable" due to unknown DataContext"](https://stackoverflow.com/questions/25549826/resharper-wpf-error-cannot-resolve-symbol-myvariable-due-to-unknown-datacont)。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-09-10T10:53:37.607

您可以通过在运行时在输出窗口中查找绑定错误来轻松检查是否有任何绑定失败。您可能需要设置调试信息以绑定到详细。

# ios - 如何获取视图的按钮方面的框架？

> ID：12350115
> 
> 赞同：3
> 
> 时间：2012-09-10T10:48:55.410
> 
> 标签：ios, uiview, mkmapview

我正在创建一个应用程序，需要让按钮的框架尊重视图。

我有一个带注释的地图视图。选择注释时，它会显示一个标注气泡。那有一个按钮作为右辅助视图。我有一个选择器，当我点击该按钮时会调用它。

现在我想获取按钮相对于视图边界的框架。我想知道按钮在视图中的位置？

为此，我尝试了：

```
[self.view convertRect:btn.frame fromView:self.view]; 
```

和

```
[self.view convertRect:btn.frame toView:self.view]; 
```

我没有得到正确的结果。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T13:18:06.313

是相对于它的`btn.frame`（按钮的）超级视图，所以传递不会给出预期的结果，因为`self.view`它不是按钮的超级视图（在注释标注按钮的情况下）。所以该代码应该是：`fromView``self.view`

```
CGRect rect = [self.view convertRect:btn.frame fromView:btn.superview]; 
```

同样在`toView`调用中，需要在按钮的超级视图上调用该方法，因为`btn.frame`它是相对于它的（不是`self.view`）：

```
CGRect rect = [btn.superview convertRect:btn.frame toView:self.view]; 
```

# phpunit - phpunit 似乎加载了不正确的包含路径

> ID：12350116
> 
> 赞同：1
> 
> 时间：2012-09-10T10:49:06.080
> 
> 标签：phpunit, pear, php, include-path

我正在尝试使用 MAMP 在我的 os x Lion 上安装 phpunit。我已经在 /Applications/MAMP/bin/php/php5.4.4/lib/php 安装了 phpunit。

当我在终端中运行 phpunit 时，出现此错误：

> 警告：require_once(File/Iterator/Autoload.php)：无法打开流：第 45 行的 /usr/lib/php/pear/PHPUnit/Autoload.php 中没有这样的文件或目录
> 
> 致命错误：require_once()：无法在第 45 行的 /usr/lib/php/pear/PHPUnit/Autoload.php 中打开所需的 'File/Iterator/Autoload.php' (include_path='.:')

我注意到包含路径是“。” 所以我在终端中运行它来查找正在加载的 php.ini 文件“php --ini”并得到这个

```
Loaded Configuration File:         /Applications/MAMP/bin/php/php5.4.4/conf/php.ini 
```

php.ini 文件中的包含路径是

```
include_path = ".:/Applications/MAMP/bin/php/php5.4.4/lib/php:/usr/lib/php/pear:/usr/bin/phpunit" 
```

那么为什么它会以“。”的形式出现。在终端中运行 phpunit 时？

作为检查，我使用以下代码创建了一个 php 文件：

```
echo get_include_path(); 
```

当我在终端中运行该文件时，它会在 php.ini 文件中输出包含路径。

我还添加`echo get_include_path();`到 /Applications/MAMP/bin/php/php5.4.4/lib/php/PHPUnit/Autoload.php 的顶部。当我在终端中运行 phpunit 时，输出的包含路径是“.:”

似乎 phpunit 正在加载需要修复的不同包含路径。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-24T08:45:44.657

对我来说最简单的方法是直接从[https://phar.phpunit.de/phpunit.phar](https://phar.phpunit.de/phpunit.phar)下载最新版本，然后在终端中找到文件的下载位置，然后：

```
machine:~ username$ chmod +x phpunit.phar

machine:~ username$ mv phpunit.phar /usr/local/bin/phpunit 
```

调整您的 PATH，例如在 .profile 中：

```
machine:~ username$ pico .profile 
```

确保您有这一行，如果没有，只需包括：

```
export PATH=/usr/local/bin/:$PATH 
```

退出并重新打开终端或：

```
machine:~ username$ source .profile 
```

现在

```
machine:~ username$ phpunit --version 
```

应该显示最新安装的版本

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T08:57:06.643

可能是您安装了 2 个 PHPUnit，一个`/usr/lib/php/pear/`在您的 MAMP 目录中。你得到第一个执行。

如果是这种情况，那么您应该将您`$PATH`的 MAMP php bin 目录更改为第一个位置。

# java - 为什么有些时候java没有捕捉到错误？

> ID：12350122
> 
> 赞同：0
> 
> 时间：2012-09-10T10:49:27.223
> 
> 标签：java, error-handling

我有一个代码片段，例如，

```
try{
    Util.getType(Id);
}catch (DataServiceFault e){
    log.error(e.getMessage(), e);

        %>
            <script type="text/javascript">
                location.href = 'developer.jsp';
            </script>
        <%
} 
```

有时它会捕获此异常，有时则不会。这是为什么？所有时间日志都显示存在 DataServiceFault。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T11:12:59.377

如果异常名称相同并且您没有到达 catch 块，则可能是类加载器问题。如果两个类具有相同的包并且名称由不同的类加载器加载，则运行时不相等。

# python - 文件上传：Trim-last-few-Characters-Save Extension

> ID：12350124
> 
> 赞同：1
> 
> 时间：2012-09-10T10:49:34.143
> 
> 标签：python, django, file-upload

我的模型允许上传的“文件名”最大为 255 个字符。如果它不止于此，它会崩溃。我需要的是“类似省略号的东西，即在大约 225 个字符之后的三个点 (...)，然后‘显示文件的扩展名’。”

这是我的模型文件中的一小段代码，我觉得这是影响的重点：

```
class Attachment(models.Model):
file = models.FileField(upload_to=get_upload_path, max_length=256,
        storage=AttachmentsStorage() if AttachmentsStorage else None) 
```

任何帮助将不胜感激。谢谢 ：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T10:56:02.273

用于[`os.path.splitext()`](http://docs.python.org/library/os.path.html#os.path.splitext)拆分扩展：

```
if len(path) > 255:
    path, ext = os.path.split(path)
    path = path[:252-len(ext)] + '...' + ext 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-10T12:41:28.747

我认为解决您的问题的一个好方法是重载方法[`AttachmentsStorage. get_valid_name`](https://docs.djangoproject.com/en/1.4/howto/custom-file-storage/#get-valid-name-name)，它负责转换文件名。

# iphone - 如何在 iPad 中显示条形图？

> ID：12350139
> 
> 赞同：1
> 
> 时间：2012-09-10T10:50:09.670
> 
> 标签：iphone, ipad, fullscreen, core-plot, bar-chart

目前我正在开发一个 iPad 应用程序，我正在使用 Core-Plot 在我的 iPhone 应用程序中开发条形图，然后我修改了 iPad 的框架大小以在 iPad 应用程序中导入相同的东西，但是条形图显示得很小在屏幕上，但我想在 iPad 上全屏显示，如何解决？请帮我

提前致谢

我试过这个

苹果手机

```
-(void) drawBarChart
{

        NSLog(@"iPhone Bar chart");

        double xAxisLength = [barValuesArray count];

        barGraph = [[CPTXYGraph alloc] initWithFrame:CGRectMake(0, 50, 320, 350)];

        barGraph.paddingLeft = 0.0f;
        barGraph.paddingRight = 0.0f;
        barGraph.paddingTop = 0.0f;
        barGraph.paddingBottom = 0.0f;

        barGraph.plotAreaFrame.paddingLeft = 60.0;
        barGraph.plotAreaFrame.paddingTop = 40.0;
        barGraph.plotAreaFrame.paddingRight = 10.0;
        barGraph.plotAreaFrame.paddingBottom = 40.0;

        if ([selectedName isEqualToString:@"(null)"] || [selectedName isEqualToString:@""] || [selectedName isEqualToString:@"NULL"] || selectedName == @"(null)" || selectedName == NULL || selectedName == @"null" || selectedName == nil) 
        {
            barGraph.title = [namesArray objectAtIndex:0];
        }
        else
        {
            barGraph.title = selectedName;
        }

        hostingView = [[CPTGraphHostingView alloc] initWithFrame:CGRectMake(0, 10, 320, 400)];
        hostingView.hostedGraph = barGraph;

        CPTMutableTextStyle *textStyle = [CPTTextStyle textStyle];
        textStyle.color = [CPTColor blackColor];
        textStyle.fontSize = 16.0f;
        textStyle.textAlignment = CPTTextAlignmentCenter;
        barGraph.titleTextStyle = textStyle;
        barGraph.titleDisplacement = CGPointMake(0.0f, -10.0f);
        barGraph.titlePlotAreaFrameAnchor = CPTRectAnchorTop; 

        CPTXYAxisSet *axisSet = (CPTXYAxisSet *)barGraph.axisSet;
        CPTXYAxis *x = axisSet.xAxis;
        //    x.axisLineStyle = nil;
        //    x.majorTickLineStyle = nil;
        //    x.minorTickLineStyle = nil;
        x.majorIntervalLength = CPTDecimalFromString(@"70");
        x.orthogonalCoordinateDecimal = CPTDecimalFromString(@"0");
        x.title = @"Names";
        x.titleLocation = CPTDecimalFromFloat(7.5f);
        x.titleOffset = 50.0f; //25.0f;
        x.labelRotation = M_PI/5;
        x.labelingPolicy = CPTAxisLabelingPolicyNone;

        NSArray *customTickLocations = [NSArray arrayWithObjects: [NSDecimalNumber numberWithInt:1], [NSDecimalNumber numberWithInt: 5], [NSDecimalNumber numberWithInt:9], [NSDecimalNumber numberWithInt:13], nil];

        //    NSArray *xAxisLabels = [NSArray arrayWithObjects:@"Smoke", @"Nicotine", @"Tar", @"", nil];
        //    NSUInteger labelLocation = 0;
        //    
        //    NSMutableArray *customLabels = [NSMutableArray arrayWithCapacity:[xAxisLabels count]];
        //    for (NSNumber *tickLocation in customTickLocations) 
        //    {
        //        CPTAxisLabel *newLabel = [[CPTAxisLabel alloc] initWithText: [xAxisLabels objectAtIndex:labelLocation++] textStyle:x.labelTextStyle];
        //        newLabel.tickLocation = [tickLocation decimalValue];
        //        newLabel.offset = x.labelOffset + x.majorTickLength;
        //        newLabel.rotation = M_PI/xAxisLength;
        //        [customLabels addObject:newLabel];
        //        [newLabel release];
        //    }
        //    
        //    x.axisLabels =  [NSSet setWithArray:customLabels];

        CPTXYAxis *y = axisSet.yAxis;
        //    y.axisLineStyle = nil;
        //    y.majorTickLineStyle = nil;
        //    y.minorTickLineStyle = nil;
        y.majorIntervalLength = CPTDecimalFromString(@"100");
        y.orthogonalCoordinateDecimal = CPTDecimalFromString(@"0");
        //    y.title = @"Work Status";
        //    y.titleOffset = 40.0f;
        //    y.titleLocation = CPTDecimalFromFloat(150.0f);

        CPTXYPlotSpace *plotSpace = (CPTXYPlotSpace *) barGraph.defaultPlotSpace;
        plotSpace.xRange = [CPTPlotRange plotRangeWithLocation:CPTDecimalFromDouble(0.0f) length:CPTDecimalFromDouble(15.0f)];
        plotSpace.yRange = [CPTPlotRange plotRangeWithLocation:CPTDecimalFromDouble(0.0f) length:CPTDecimalFromDouble(1000.0f)];

        CPTBarPlot *barPlot = [CPTBarPlot tubularBarPlotWithColor:[CPTColor blueColor] horizontalBars:NO];
        barPlot.plotRange = [CPTPlotRange plotRangeWithLocation:CPTDecimalFromDouble(0.0) length:CPTDecimalFromDouble(13)];//xAxisLength
        barPlot.barOffset = CPTDecimalFromFloat(1.0f);
        barPlot.baseValue = CPTDecimalFromString(@"0");
        barPlot.barWidth = CPTDecimalFromFloat(3.0f);
        barPlot.cornerRadius = 2.0f;
        barPlot.dataSource = self;
        [barGraph addPlot:barPlot];

        [self.view addSubview:hostingView];

} 
```

iPad条形图：

```
-(void) drawBarChart
{

        NSLog(@"iPAD");

        double xAxisLength = [barValuesArray count];

        barGraph = [[CPTXYGraph alloc] initWithFrame:CGRectMake(0, 50, 700, 1000)];

        barGraph.paddingLeft = 0.0f;
        barGraph.paddingRight = 0.0f;
        barGraph.paddingTop = 0.0f;
        barGraph.paddingBottom = 0.0f;

        barGraph.plotAreaFrame.paddingLeft = 60.0;
        barGraph.plotAreaFrame.paddingTop = 40.0;
        barGraph.plotAreaFrame.paddingRight = 10.0;
        barGraph.plotAreaFrame.paddingBottom = 40.0;

        if ([selectedName isEqualToString:@"(null)"] || [selectedName isEqualToString:@""] || [selectedName isEqualToString:@"NULL"] || selectedName == @"(null)" || selectedName == NULL || selectedName == @"null" || selectedName == nil) 
        {
            barGraph.title = [namesArray objectAtIndex:0];
        }
        else
        {
            barGraph.title = selectedName;
        }

        hostingView = [[CPTGraphHostingView alloc] initWithFrame:CGRectMake(0, 10, 700, 1000)];
        hostingView.hostedGraph = barGraph;

        CPTMutableTextStyle *textStyle = [CPTTextStyle textStyle];
        textStyle.color = [CPTColor blackColor];
        textStyle.fontSize = 16.0f;
        textStyle.textAlignment = CPTTextAlignmentCenter;
        barGraph.titleTextStyle = textStyle;
        barGraph.titleDisplacement = CGPointMake(0.0f, -10.0f);
        barGraph.titlePlotAreaFrameAnchor = CPTRectAnchorTop; 

        CPTXYAxisSet *axisSet = (CPTXYAxisSet *)barGraph.axisSet;
        CPTXYAxis *x = axisSet.xAxis;
        //    x.axisLineStyle = nil;
        //    x.majorTickLineStyle = nil;
        //    x.minorTickLineStyle = nil;
        x.majorIntervalLength = CPTDecimalFromString(@"70");
        x.orthogonalCoordinateDecimal = CPTDecimalFromString(@"0");
        x.title = @"Names";
        x.titleLocation = CPTDecimalFromFloat(7.5f);
        x.titleOffset = 50.0f; //25.0f;
        x.labelRotation = M_PI/5;
        x.labelingPolicy = CPTAxisLabelingPolicyNone;

        NSArray *customTickLocations = [NSArray arrayWithObjects: [NSDecimalNumber numberWithInt:1], [NSDecimalNumber numberWithInt: 5], [NSDecimalNumber numberWithInt:9], [NSDecimalNumber numberWithInt:13], nil];

        //    NSArray *xAxisLabels = [NSArray arrayWithObjects:@"Smoke", @"Nicotine", @"Tar", @"", nil];
        //    NSUInteger labelLocation = 0;
        //    
        //    NSMutableArray *customLabels = [NSMutableArray arrayWithCapacity:[xAxisLabels count]];
        //    for (NSNumber *tickLocation in customTickLocations) 
        //    {
        //        CPTAxisLabel *newLabel = [[CPTAxisLabel alloc] initWithText: [xAxisLabels objectAtIndex:labelLocation++] textStyle:x.labelTextStyle];
        //        newLabel.tickLocation = [tickLocation decimalValue];
        //        newLabel.offset = x.labelOffset + x.majorTickLength;
        //        newLabel.rotation = M_PI/xAxisLength;
        //        [customLabels addObject:newLabel];
        //        [newLabel release];
        //    }
        //    
        //    x.axisLabels =  [NSSet setWithArray:customLabels];

        CPTXYAxis *y = axisSet.yAxis;
        //    y.axisLineStyle = nil;
        //    y.majorTickLineStyle = nil;
        //    y.minorTickLineStyle = nil;
        y.majorIntervalLength = CPTDecimalFromString(@"100");
        y.orthogonalCoordinateDecimal = CPTDecimalFromString(@"0");
        //    y.title = @"Work Status";
        //    y.titleOffset = 40.0f;
        //    y.titleLocation = CPTDecimalFromFloat(150.0f);

        CPTXYPlotSpace *plotSpace = (CPTXYPlotSpace *) barGraph.defaultPlotSpace;
        plotSpace.xRange = [CPTPlotRange plotRangeWithLocation:CPTDecimalFromDouble(0.0f) length:CPTDecimalFromDouble(15.0f)];
        plotSpace.yRange = [CPTPlotRange plotRangeWithLocation:CPTDecimalFromDouble(0.0f) length:CPTDecimalFromDouble(1000.0f)];

        CPTBarPlot *barPlot = [CPTBarPlot tubularBarPlotWithColor:[CPTColor blueColor] horizontalBars:NO];
        barPlot.plotRange = [CPTPlotRange plotRangeWithLocation:CPTDecimalFromDouble(0.0) length:CPTDecimalFromDouble(13)];//xAxisLength
        barPlot.barOffset = CPTDecimalFromFloat(1.0f);
        barPlot.baseValue = CPTDecimalFromString(@"0");
        barPlot.barWidth = CPTDecimalFromFloat(3.0f);
        barPlot.cornerRadius = 2.0f;
        barPlot.dataSource = self;
        [barGraph addPlot:barPlot];

        [self.view addSubview:hostingView];
} 
```

![在此处输入图像描述](../Images/1aaaae7985fa6b898ab77646d8791591.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T11:03:32.290

尝试这种方式可能会对您有所帮助：

```
CPTGraphHostingView *hostingView = [[CPTGraphHostingView alloc] initWithFrame:CGRectMake(10, 70, 768, 1004)];
    hostingView.tag=1;
    [self.view addSubview:hostingView];
//  [hostingView addSubview:OptionBtn];
    barChart = [[CPXYGraph alloc] initWithFrame:self.view.bounds];
    //barChart.backgroundColor = [UIColor colorWithPatternImage: [UIImage imageNamed:@"FinalGraph.png"]];
    hostingView.hostedGraph = barChart; 
```

# javascript - jquery onclick 过早触发（？）

> ID：12350141
> 
> 赞同：2
> 
> 时间：2012-09-10T10:50:23.787
> 
> 标签：javascript, jquery, setinterval, clearinterval

我有以下脚本 - 我有一个菜单，当用户单击“关于”时，菜单消失，并且出现一些动画 div，当用户单击任何我希望动画 div 消失的地方，菜单重新出现. 动画使用 x = setinterval(blabla) 重新启动，如果 x 不为 0，则应该在 document.click 任意位置停止。

问题是它显示了一秒钟并在单击“关于”后立即停止

jsfiddle - [http://jsfiddle.net/EgtqF/](http://jsfiddle.net/EgtqF/)

这里：

```
 $('#about').click(function(){
        $('#menu div').fadeToggle(1000);
        $('#credits').fadeToggle(1000);
        refreshId = setInterval(function(){
            $('#credits').animate({'bottom':'100%'},5000,'linear',
                function(){
                    $('#credits').css({'bottom':'0%'})})},
            1000);
    });

    $(document).click(function(){
            if(refreshId != 0){
                clearInterval(refreshId);
                $('#credits').fadeToggle(100);
                $('#menu div').fadeToggle(100);
                refreshId = 0;
            }
        }); 
```

我怎样才能让它工作？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-10T10:54:05.647

`event.stopPropagation()`从您的点击处理程序发出一个`#about`以确保`click`事件不会冒泡到您的`document`对象。

```
$('#about').click(function(e){
   e.stopPropagation();
   // ...
   return false;
}); 
```

# sql - 存储过程临时表上的错误

> ID：12350142
> 
> 赞同：0
> 
> 时间：2012-09-10T10:50:29.133
> 
> 标签：sql, sql-server, stored-procedures

这是我的SP：

```
 USE [x]
GO
/****** Object:  StoredProcedure [dbo].[sp_CopyCompanyContent]    Script Date: 09/10/2012 12:35:29 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
ALTER Procedure [dbo].[sp_CopyCompanyContent]
(
        @intCopyFromCompanyID Int,
        @intNewCompanyID Int
)

As

Begin
    /*
        RaisError If any of Odl/New Company ID's are 0
    */

    If (@intCopyFromCompanyID = 0 Or @intNewCompanyID = 0)
        Begin
            RaisError('New Company ID or Old Company ID can not be 0', 16, 1)
            Return
        End

    /*
        Create Temp Table For the Content Sections
    */

    If Object_ID('tempdb..#ContentSections') IS Not Null
        Begin 
            Drop Table dbo.#ContentSections
        End 

    /*
        Have to get all the existing data for the Old company we are copying from.
        Have to also add the Max(ContentSectionID) From ContentSection. Max(ContentSectionID) + 
        The Identity (Added further down due to laziness) will be our seed for the ContentID
    */

    Select      CS.ContentID,
                CS.SectionID,
                CS.MenuOrder,
                @intNewCompanyID NewCompanyID,
                CS.CompanyID OldCompanyID,
                CS.SubMenu,
                CS.Link,
                CS.HeaderMenu,
                CS.ParentContentID,
                CRS.*

    Into        dbo.#ContentSections

    From        dbo.Company COMP
    Join        dbo.ContentSection CS
    On          COMP.Company_id = CS.CompanyID  
    Join        dbo.Content CONT
    On          CONT.ContentID = CS.ContentID

    Cross Join  (
                    Select  MAx(ContentSectionID) MaxContentSectionID
                    From    dbo.ContentSection CONT
                ) crs

    Where       COMP.Company_id  = @intCopyFromCompanyID
    Order By    COMP.Company_id

    /*
        We now need to create a table for the existing content for the old company.
        Also have to create the seed. Same principle as above.
    */

    If Object_ID('tempdb..#Content') IS Not Null
        Begin 
            Drop Table dbo.#Content
        End 

    Select  CONT.*, 
            CRS.*

    Into    dbo.#Content

    From    dbo.Company COMP
    Join    dbo.ContentSection CS
    On      COMP.Company_id = CS.CompanyID  
    Join    dbo.Content CONT
    On      CONT.ContentID = CS.ContentID

    Cross Join  (
                    Select  MAx(ContentID) MaxContentID
                    From    dbo.Content CONT
                ) crs

    Where   COMP.Company_id  = @intCopyFromCompanyID
    Order By COMP.Company_id

    /*  
        Add Identity to each of the tables we have created above. The ID fields will add to 
        the Max of each table to mimic what the future seeds will be.
    */

exec('Alter table #ContentSections Add ID Int Identity(1,1)')
exec('Alter table #Content Add ID Int Identity(1,1)')

    /*
        Add content data from the temp table.
    */

    Insert  Into dbo.Content
    (
            Title,
            Content
    )   
    Select  Title,
            Content 
    From    dbo.#Content

    /*
        Have to the Content table up to the content sections table
        as this contains what ID has been add to the Content Table. 
    */

    Insert Into dbo.ContentSection
    (
            ContentID,
            SectionID,
            MenuOrder,
            CompanyID,
            SubMenu,
            Link,
            HeaderMenu,
            ParentContentID
    )

    Select  C.MaxContentID + C.ID,
            CS.SectionID,
            CS.MenuOrder,
            CS.NewCompanyID,
            CS.Submenu,
            CS.Link,
            CS.HEaderMEnu,
            CS.ParentContentID
    From    dbo.#Content C
    Join    dbo.#ContentSections CS
    On      C.ID = CS.ID

End 
```

当我运行它时，我得到以下信息：

例如：

（41 行受影响）

（41 行受影响）

消息 207，级别 16，状态 3，过程 sp_CopyCompanyContent，第 122 行无效的列名称“ID”。消息 207，级别 16，状态 3，过程 sp_CopyCompanyContent，第 122 行无效的列名称“ID”。消息 207，级别 16，状态 3，过程 sp_CopyCompanyContent，第 122 行无效的列名称“ID”。

（1 行受影响）

谁能看到为什么它说无效的列 ID？它应该完美地加入和填充内容..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T11:06:11.870

尝试替换代码：

```
 Alter table #ContentSections Add ID Int Identity(1,1)
 Alter table #Content Add ID Int Identity(1,1) 
```

和

```
exec('Alter table #ContentSections Add ID Int Identity(1,1)')
exec('Alter table #Content Add ID Int Identity(1,1)') 
```

或添加到您的“选择进入”身份列，如下所示：

```
SELECT  ID=IDENTITY (int, 1, 1) ....
INTO    #Table
FROM    Table 
```

例如：

```
 Select         ID=IDENTITY (int, 1, 1),
                CS.ContentID,
                CS.SectionID,
                CS.MenuOrder,
                @intNewCompanyID NewCompanyID,
                CS.CompanyID OldCompanyID,
                CS.SubMenu,
                CS.Link,
                CS.HeaderMenu,
                CS.ParentContentID,
                CRS.*

    Into        dbo.#ContentSections

    From        dbo.Company COMP
    Join        dbo.ContentSection CS
    On          COMP.Company_id = CS.CompanyID  
    Join        dbo.Content CONT
    On          CONT.ContentID = CS.ContentID

    Cross Join  (
                    Select  MAx(ContentSectionID) MaxContentSectionID
                    From    dbo.ContentSection CONT
                ) crs

    Where       COMP.Company_id  = @intCopyFromCompanyID
    Order By    COMP.Company_id 
```

# c# - WriteLine 不打印所有文本

> ID：12350145
> 
> 赞同：0
> 
> 时间：2012-09-10T10:50:32.740
> 
> 标签：c#, .net, console.writeline

我正在研究将有用数据提取到平面文件的 ac# 程序。

源中的数据格式如下：

* * *

主题：每日警报

范围：全球

类型：每周
日期：04/05/2012 16.03.03
数量：388

类型：每周
日期：04/05/2012 16.03.03
数量：567

* * *

输出应包含两行：

* * *

```
Daily Alarm|Global|weekly|05042012160303|388
Daily Alarm|Global|weekly|05042012160303|567 
```

* * *

我完成了编码，Console.WriteLine 正在打印所需的输出

但是当我使用

```
System.IO.StreamWriter output = new System.IO.StreamWriter("D:\\SHARPE\\multirow\\destination.txt"); 
```

output.WriteLine 正在产生这样的结果

* * *

```
Daily Alarm|Global|weekly|05042012160303|388
Daily Alarm|Globa 
```

* * *

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-10T10:54:26.517

你是在调用 StreamWriter.Close() 还是 Flush()？

编辑：

您应该始终将流编写器包装在 using 块中：

```
using (StreamWriter writer = new StreamWriter(@"somefile.txt"))
{

} 
```

# jquery - 在 MVC4 中使用 jquery 进行客户端验证

> ID：12350147
> 
> 赞同：-2
> 
> 时间：2012-09-10T10:50:34.487
> 
> 标签：jquery, asp.net-mvc-4, asp.net-4.0

我对 ASP.NET 4 和 MVC 4 非常陌生。我需要使用 jQuery 进行客户端验证。有人可以帮助我实现客户端验证的非常基本的代码，例如验证已经注册的用户名，但也可以针对其他验证进行定制。我真正希望它有一个方法，说 TestForValidation() 在我的项目中定义的某处将表单中当前提供的值与数据库中已经存在的数据进行比较。我希望在客户端调用此函数并在客户端呈现验证。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T10:52:47.653

您可以使用该[`[Remote]`](http://msdn.microsoft.com/en-us/library/gg508808%28v=vs.98%29.aspx)属性。我链接到的文档包含有关如何实现它的分步指南。

# php - 数组映射 + 类方法/函数作为回调 + call_user_func

> ID：12350148
> 
> 赞同：0
> 
> 时间：2012-09-10T10:50:35.753
> 
> 标签：php, arrays, class, map, array-map

我不知道我在下面的代码中做错了什么，但它不起作用。

```
if($_data_count = count($_csv_raw_array) > 0){
            foreach($_csv_raw_array as $_csv_row){
                array_push($this->_data, array_map(call_user_func(array($this, 'replace')), $_csv_row));
            }
            return $this->result(true, 'CSV parsing done.', '', $this->_data);
        } 
```

// 而替换函数是：

```
 private function replace($_value){
    return preg_match('/(\r\n|\n|\r)/', $_value) ? '' : $_value;
} 
```

但我不知道为什么它不起作用并引发异常：

遇到 PHP 错误

严重性：警告

消息：Import::replace() 缺少参数 1

文件名：库/Import.php

行号：116

基本上我想要在这里导入一个我已经导入的 CSV 文件，现在我想替换数组中存在的任何换行符以替换为空（无）。但是每次我执行这段代码时，它都会抛出一个异常。你们那里的人可以建议吗？请。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T12:00:31.133

正如评论中指出的那样，根据您的代码判断，您将要删除 that `call_user_func`，因为这会导致该函数被立即调用，而这似乎不是您想要的，我认为这是过滤掉其中的所有元素每次迭代中的 $_csv_row：

```
if($_data_count = count($_csv_raw_array) > 0){
    foreach($_csv_raw_array as $_csv_row){
        array_push($this->_data, array_map(array($this, 'replace'), $_csv_row));
    }
    return $this->result(true, 'CSV parsing done.', '', $this->_data);
} 
```

我们只能猜测您的意图是什么，您可能希望提供一个示例 csv 和所需的输出，以便我们可以更准确地了解您在寻找什么，如果这不能解决问题。

# php - 值不会输入到数据库中

> ID：12350149
> 
> 赞同：0
> 
> 时间：2012-09-10T10:50:41.757
> 
> 标签：php, mysql

也许这听起来很奇怪，但我感觉我的代码做错了。我确实在本地对其进行了测试，并且工作正常，但是，当我尝试在线发送数据时，它没有输入到数据库中。我现在不知道自己做错了什么，也看不到错误（可能对代码或类似的东西看起来太多了）。有时，焕然一新的外观可能会有所帮助。

的HTML：

```
<form method="post" class="signin" action="inc/actions/processing.php">
        <fieldset class="textbox">
            <label class="username">
                <span>Username</span>
                <input id="username" name="username" value="" type="text" autocomplete="off" placeholder="username">
            </label>
            <label class="charactername">
                <span>Charactername</span>
                <input id="charactername" name="charactername" value="" type="text" autocomplete="off" placeholder="Your character's first name">
            </label>
            <label class="password">
                <span>Password</span>
                <input id="password" name="password" value="" type="password" placeholder="Password">
            </label>
            <button class="submit button" name="RegisterUser" type="submit">Register User</button> 
        </fieldset>
  </form> 
```

PHP，处理部分：

```
if(isset($_POST['RegisterUser'])){
        $Username = $_POST['username'];
        $Pass_nomdf5 = $_POST['password'];
        $Password = md5($Pass_nomdf5);
        $Charactername = $_POST['charactername'];       
        RegisterMember($Charactername,$Username,$Password);
        CloseConnection();
        header( "Location: http://" . strip_tags( $_SERVER ['HTTP_HOST'] ) . "/newHolo/" );
        exit;           
} 
```

该`RegisterMember`函数的PHP：

```
function RegisterMember($Charactername,$Username,$Password){
    $query = "INSERT INTO User(CharacterFname,Username,Password) VALUES ('".$Charactername."','".$Username."','".$Password."');";
    SendQuery($query);
} 
```

我运行了很多次，但我觉得这是我数据库中的一个设置让我感到困惑。我将所有的`NOT_NULL`s 都切换为`NULL`s，除了 ID 字段（参见下面的数据库表图片）。

![在此处输入图像描述](../Images/1910fe791cdd96c10e272977b453c19c.png) 我只是不确定我的错误在哪里，因为在我上传之前它在本地运行良好。虽然我确实在旧版本的 PHP 上运行过，但我感觉它也可能与此有关。有谁可以帮我离开这里吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T11:32:58.693

正如我上面所说，这是一个 sql 错误，并且确实与我的代码无关。当我注意到我还没有在 Sgroup 的数据字段中填写任何数据时，我清除了错误消息。

```
 #1452 - Cannot add or update a child row: a foreign key constraint fails (darktide_newdarktide/User, CONSTRAINT User_ibfk_1 FOREIGN KEY (SgroupId) REFERENCES Sgroup (SgroupId)) 
```

哑巴，我应该知道，如果我对某个字段有约束，它至少应该填充数据。所以，我填满了那张桌子，瞧，这成功了。感谢您输入的人。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T11:09:58.637

我看不到您连接到 MySQL 数据库的位置！

我用：

```
$mysqli = mysqli_connect("localhost", "username", "password", "database"); 
```

创建一个指向我的 MySQL 数据库的链接——我希望你把它排除在你的问题之外！

如果代码在本地工作，那么我会检查“连接”是否工作——也许你有不同的密码或用户名，因为如果代码在本地工作，它应该在你的服务器上工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-10T11:28:04.323

我已经在本地对其进行了测试，它对我有用。（但请注意，我**没有设置**任何外键。）

只要我能看到，代码本身似乎没有什么问题，而是类似**连接**之类的东西。

**连接**是否正常，是否选择**了****数据库**？

 **```
mysql_connect("servername", "username", "password");
mysql_select_db("dababase/schema"); 
```

另一方面，是否有外键约束失败？**

# python - Python循环似乎没有迭代

> ID：12350151
> 
> 赞同：0
> 
> 时间：2012-09-10T10:51:01.447
> 
> 标签：python, loops, if-statement

下面的代码对我来说没有按预期运行。

```
class stateClass:
  state = 0

states = []
states.append(stateClass)
states.append(stateClass)

def populateStates(states):
  for s in states:
    if s.state == 0
      print 'populating'
      s.state = 1

populateStates(states) 
```

输出是

```
states array length: 2
populating 
```

这是第二次失败

```
for s in states:
  if s.state == 0 
```

如果条件第二次失败，尽管它是数组中的不同索引，因此 s.state 应该已初始化为 0。所以我认为循环没有正确迭代。

有谁知道怎么了？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-10T10:54:48.150

你不需要`;`'s - 这不是C和co。ETC...

```
class stateClass: 
    state = 0 
```

在这里，您正在创建一个`class level attribute`- 即，`state`由`stateClass`.

您正在附加到您的列表`stateClass`本身 - 即类的定义，而不是类的实际实例......

一旦您更改`state`其中之一， now 的所有实例`stateClass`都具有该更改的值。

您很可能希望创建实例：

```
class State(object):
    def __init__(self, number):
        self.state = number

Hawaii = State(50)  
Kentucky = State(23) # (making state numbers up here...) 

my_states = []
my_states.append(Hawaii)
my_states.append(Kentucky) 
```

然后显示状态，请执行以下操作：

```
print Hawaii.state 
```

如果你想要一个`property`所以它避免来自类外部的显式设置，那么：

```
class State(object):
    def __init__(self, number):
        self._state = number
    @property
    def state(self):
        return self._state 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-10T10:53:38.003

Python 不是 Java。循环很好，问题是类。

`state`是类变量，而不是实例变量。它由类的所有实例共享。而且您实际上根本没有实例化该类。

改为这样做：

```
class stateClass(object):
  def __init__(self):  
    self.state = 0

states.append(stateClass()) 
```

而且你不需要分号。

# php - Sqlite3：显示错误数据库已锁定

> ID：12350153
> 
> 赞同：0
> 
> 时间：2012-09-10T10:51:15.550
> 
> 标签：php, sqlite, pdo

我的 sqlite3 数据库显示此错误：

```
Array (
  [0] => HY000
  [1] => 5
  [2] => "database is locked"
) 
```

我已使用 php PDO 连接 sqllite3 数据库。我已成功从数据库中读取，但无法更新/插入数据库。它总是显示上述错误。

我已经尝试了 777 对数据库的权限并对其进行了测试，但得到了相同的结果。

我已经使用`$db->beginTransaction();`和解决了上述问题`$dbhandle->commit();`

现在的问题是我在更新查询之前使用了 begintransaction 并在执行查询之后提交。查询每次都返回 true 但不影响数据库。有什么想法吗？

**注意：**查询需要很长时间才能显示错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T04:56:10.430

我已经解决了我的问题。

sqlite3 数据库中的问题。我在 Ubuntu 10.04 上使用了 sqlite3 3.6.22，这个 sqlite3 不支持多线程，所以我在 sqlite3 3.7.7 版本上进行了测试，并使用从[http://www.sqlite.org/wal 读取的 Pragma 命令。 .html](http://www.sqlite.org/wal.html) _

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T17:16:58.467

确保数据库文件所在的目录对 db 的用户具有写权限。写入数据库时​​会创建一个临时文件。

希望能帮助到你。

# php - 需要帮助下载带有 PHP 的 NSIS Inetc 插件的 zip

> ID：12350155
> 
> 赞同：0
> 
> 时间：2012-09-10T10:51:16.820
> 
> 标签：php, download, zip, nsis

所以我一直在尝试让 NSIS 的 Inetc 插件从以下地址[http://www.hjhappel.de/dlmonitor/download.php?t=d&i=2](http://www.hjhappel.de/dlmonitor/download.php?t=d&i=2)下载 zip 文件 mp3splitter20.zip但我是没有运气。我之前尝试了 Nsisdl 插件并让文件开始下载，但我一直收到以下错误

> 下载失败：服务器未指定内容长度

我读到使用 Inetc 会更好，因为它允许使用 HTTP1.1。我尽力在[此处的 NSIS inetc wiki 页面](http://nsis.sourceforge.net/Inetc_plug-in)上理解文档，但我不知道应该如何通过 HEADER 合并所需的 PHP 命令来下载我的 zip 文件。现在，当我尝试使用标头时，出现以下错误：

> 下载失败：连接错误

这让我相信我犯了一个非常简单的错误。

轻推一些示例或适当的 NSIS PHP 文档将不胜感激。在此先感谢和干杯

这是我试图开始工作的代码部分。

```
!define file_name "mp3splitter20.zip"
!define file_size "294KB"

Section "F7immersion"
   SetOutPath $INSTDIR
   ;these files must be in the main folder
   inetc::get /HEADER 'Content-type: application/zip' 'Content-Disposition: attachment; filename="'${file_name}.'"' "Content-length: ${file_size}"  "http://www.hjhappel.de/dlmonitor/download.php?t=d&i=2" "$INSTDIR\mp3splitter20.zip" /END
   Pop $R0 ;Get the return value
   StrCmp $R0 "success" +3
   MessageBox MB_OK "Download failed: $R0"
   Quit
   nsisunz::Unzip "$INSTDIR\mp3splitter20.zip" "$INSTDIR"
   Pop $R0
   StrCmp $R0 "success" +2
   DetailPrint "$R0" ;print error message to log
   File /r *.ahk
   File /r *.txt
   File /r *.nsi
   File /r *.exe
   File /r *.ico
   File /r *.ini
SectionEnd 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T11:14:18.913

您不应该在请求中发送这些标头，服务器将在回复中发送这些标头。（请参阅[HTTP 标头字段列表](http://en.wikipedia.org/wiki/List_of_HTTP_header_fields)）

要从“普通”服务器下载文件，您只需要`inetc::get "http://example.com/somefile.xyz" "$instdir\thefile.xyz" /END`

# mysql - DATEDIFF() 函数

> ID：12350159
> 
> 赞同：0
> 
> 时间：2012-09-10T10:51:46.443
> 
> 标签：mysql, datediff

我必须找到两个日期的差异（日期必须从字符串转换为日期格式）。我正在使用以下 mysql 查询

```
SELECT DATEDIFF
(
        (SELECT STR_TO_DATE(create_date, '%e %b %Y  %k:%i') AS create_date FROM booking) AS date1
        ,
        (SELECT STR_TO_DATE(start_date, '%e %b %Y  %k:%i') AS start_date FROM booking) AS date2
) diff 
```

单独的内部查询成功地工作。日期格式正确转换，例如从`5 Mar 1985 2:33`到`1985-03-05 02:33:00`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T10:54:07.840

是什么阻止你

```
SELECT
  DATEDIFF( 
    STR_TO_DATE(create_date, '%e %b %Y  %k:%i'),
    STR_TO_DATE(start_date, '%e %b %Y  %k:%i')
  ) AS diff
FROM booking 
```

# yii - 删除/隐藏 CButtonColumn 的图像标签

> ID：12350162
> 
> 赞同：1
> 
> 时间：2012-09-10T10:51:59.027
> 
> 标签：yii, cbuttoncolumn

我正在使用`CGridview`and in`CButtonColumn`并且我正在使用 css 来设置按钮图像。是否可以隐藏/删除按类生成的图像标签？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-12T15:54:05.557

您还可以将 xButtonImageUrl 设置`false`为避免呈现 img 标签：

```
array(
    'class'=>'CButtonColumn',
    'deleteButtonImageUrl'=>false,
    'updateButtonImageUrl'=>false,
    'viewButtonImageUrl'=>false
) 
```

检查文档中的[此部分](http://www.yiiframework.com/doc/api/1.1/CButtonColumn#deleteButtonImageUrl-detail)：

> 删除按钮的图像 URL。如果未设置，将使用集成图像。您可以将此属性设置为 false 以呈现文本链接。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T13:21:44.327

你试过通过css来做吗？

```
.buttonClass {
    display: none;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-01-30T08:19:20.737

这个问题可能很老了。但仍然对某人有用。只需注释掉`imageUrl`数组元素。

```
'delete' => array
            (
                'label'=>'Delete',
                //'imageUrl'=>'',
                'url'=>'Yii::app()->createUrl("users/delete",array("id"=>$data->id))',                  
            ) 
```

# authentication - 验证 SAML 令牌

> ID：12350164
> 
> 赞同：0
> 
> 时间：2012-09-10T10:52:05.797
> 
> 标签：authentication, saml, sts-securitytokenservice

我正在使用 Axis2 和壁垒编写客户端和服务 我也将控制的第三方身份验证器将向客户端发出令牌，客户端将在该令牌中发送到服务问题是我不知道如何验证此令牌，我被告知它超出了 SAML 的范围有没有办法在不联系第三方身份验证器或不使用公钥的情况下验证令牌

任何帮助是极大的赞赏

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T14:28:39.587

检查这个[Apache WSS4J的例子](http://ws.apache.org/wss4j/xref-test/org/apache/ws/security/saml/SamlTokenTest.html)（我相信它与壁垒兼容，我自己没有使用过壁垒）。他们使用[`CustomSamlAssertionValidator`](http://ws.apache.org/wss4j/xref-test/org/apache/ws/security/common/CustomSamlAssertionValidator.html)似乎只是将 SAML 令牌中的发行者名称与预定义值进行比较。

# iphone - 跟踪 iphone 相机移动

> ID：12350165
> 
> 赞同：1
> 
> 时间：2012-09-10T10:52:07.450
> 
> 标签：iphone, opencv

我想管理我的 iphone 相机移动以获取全景视图。想知道用户是否旋转相机正确的方向以获得相似的图像。

是否有可能的 OpenCV iphone 框架或任何其他可用的库？

帮助是非常可观的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T15:02:12.747

是的，你想要 iphone 特定的库[Core Motion](http://developer.apple.com/library/ios/#documentation/CoreMotion/Reference/CoreMotion_Reference/_index.html)。 [这个](https://stackoverflow.com/questions/5053793/iphone-core-motion-relative-rotation)SO question 应该很有用，[这里](http://developer.apple.com/library/ios/#documentation/EventHandling/Conceptual/EventHandlingiPhoneOS/MotionEvents/MotionEvents.html)是图书馆本身的一些解释

# php - 如何在 C 中实现 Php call_user_func

> ID：12350177
> 
> 赞同：0
> 
> 时间：2012-09-10T10:52:51.090
> 
> 标签：php, c, function-pointers

php call_user_func() 中有一个函数，它接受一个字符串名称，并回调一个具有相似名称的函数。同样，我想在 C 中做。我想编写一个程序，提示用户输入最小值或最大值，并根据用户输入的字符串调用函数 min 或 max。我尝试了以下但由于明显的原因没有工作。谁能建议我需要做的更正

```
int max(int a, int b)
{
    return a > b ? a : b ;
}

int min(int a, int b)
{
    return a < b ? a : b ;
}

int main()
{
    int (*foo)(int a, int b);
    char *str;
    int a, b;
    str = (char  *)malloc(5);
    printf("Enter the what you want to calculate min or max\n");
    scanf("%s", str);
    printf("Enter the two values\n");
    scanf("%d %d", &a, &b);

    foo = str;

    printf("%d\n", (*foo)(a, b));
    return 0;

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T11:01:19.387

尝试这样的事情：

```
int max(int a, int b)
{
    return a > b ? a : b ;
}

int min(int a, int b)
{
    return a < b ? a : b ;
}

typedef struct {
    int (*fp)(int, int);
    const char *name;
} func_with_name_t;

func_with_name_t functions[] = {
    {min, "min"},
    {max, "max"},
    {NULL, NULL}    // delimiter   
};

int main()
{
    char *str;
    int a, b, i;
    str = (char  *)malloc(5);
    printf("Enter the what you want to calculate min or max\n");
    scanf("%s", str);
    printf("Enter the two values\n");
    scanf("%d %d", &a, &b);

    for (i = 0; functions[i].name != NULL; i++) {
        if (!strcmp(str, functions[i].name)) {
            printf("%d\n", functions[i].fp(a, b));
            break;
        }
    }

    return 0;
} 
```

# ios - 关于 iOS 定位的问题

> ID：12350179
> 
> 赞同：0
> 
> 时间：2012-09-10T10:53:08.280
> 
> 标签：ios, uiinterfaceorientation, uiwindow, uideviceorientation

我正在开发一个仅支持在我的 Info.plist 文件中写入的纵向的应用程序。但是当我旋转设备时，状态栏会旋转，但视图不会。我不使用 InterfaceBuilder 来设置我的视图和初始窗口，我以编程方式编写：

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions {
   self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];

   self.window.rootViewController = myRootViewController;

   [self.window makeKeyAndVisible];
   return YES;
} 
```

在我所有的观点中，有一个方法：

```
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
     return (interfaceOrientation == UIInterfaceOrientationPortrait);
} 
```

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T11:14:51.753

我通过在 Info.plist 文件的“支持的界面方向”字段中设置“纵向（底部主页按钮）”来做到这一点。

另一种方法是`shouldAutorotateToInterfaceOrientation:`从所有视图控制器中删除默认实现。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T11:17:12.980

尝试添加这个：

```
[[UIApplication sharedApplication] setStatusBarOrientation:UIInterfaceOrientationPortrait]; 
```

给你的：`- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions`

在 AppDelegate 中。

希望这可以帮助 ！

# php - 如何将文件下载到php中的指定目录？

> ID：12350183
> 
> 赞同：-1
> 
> 时间：2012-09-10T10:53:26.100
> 
> 标签：php, download

如何将 csv 文件下载到指定目录中。？现在我使用了这段代码，

```
header("Location:uploads/".$dire);
header("Content-type: application/x-msdownload");
header("Content-Disposition: attachment; filename=".$nn);
header("Pragma: no-cache");
header("Expires: 0"); 
```

这里，`$dire`是上传文件夹的子目录，`$nn`是csv文件名。我想下载这个`$nn`文件并保存在指定的目录`$dire`中。但它显示一个错误

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-10T10:54:26.113

您无法控制客户端（网络浏览器）的这种行为。

# php - MVC - 此代码是否属于模型、控制器或视图？

> ID：12350195
> 
> 赞同：3
> 
> 时间：2012-09-10T10:54:09.743
> 
> 标签：php, model-view-controller, codeigniter, codeigniter-2

我在我的网站通知中，类似于 facebook。但我只有 3 种类型的通知：

*   [昵称] 给你发了一个新的测验 [测验名称]
*   [昵称] 将您添加到他的群组 [群组名称]。接受 | 否定
*   您今天获得了 100 美元的登录积分。

表通知

通知ID | 类型 | item_id | from_id | to_id | 创建 | 通知

item_id 代表 quize_id 或 group_id。我进行了额外的连接以获取所有数据。

我遇到的一个问题是如何显示每个通知取决于类型。选项之一是组织字符串以在控制器中显示：

```
foreach($results as $key => $result){
  switch($result['type']){
    case 1:
    $string = "<a href=".baseUrl()."/users/$result['userId']>$result['nickname']</a> "._("wants you to take a quize")." <a href='".baseUrl()."/quize/$result['rel']'>$result['quizeName']</a>";
    break;
    case 2:
    $string = "<a href=".baseUrl()."/users/$result['userId']>$result['nickname']</a> "._("added you to his group")." <a href='".baseUrl()."/group/$result['rel']'>$result['groupName']</a>";
    break;
    case 3:
    $string = _("You received 100 credit for log in today");
  }
  $notifications[$key]['string'] = $string;
}

$data['notifications'] = $notifications;

$this->load->view('views/notifications/last_notification_view', $data); 
```

该方法的问题在于视图的一部分在控制器内部。我可以发送粗略的数据来查看，但问题是我需要在视图中制作类似的 php 代码。那么哪种方法更好呢？或者还有其他方法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-10T11:02:44.993

我自己的个人意见是，您应该将 $results 传递给视图，并让循环获取结果并在视图内打印出链接。你应该在控制器中有这个：

```
$data['notifications']=$results;
$this->load->view('views/notifications/last_notification_view', $data); 
```

鉴于此：

```
foreach($data['notifications'] as $key => $result){
  switch($result['type']){
    case 1:
    echo "<a href=".baseUrl()."/users/$result['userId']>$result['nickname']</a> "._("wants you to take a quize")." <a href='".baseUrl()."/quize/$result['rel']'>$result['quizeName']</a>";
    break;
    case 2:
    echo "<a href=".baseUrl()."/users/$result['userId']>$result['nickname']</a> "._("added you to his group")." <a href='".baseUrl()."/group/$result['rel']'>$result['groupName']</a>";
    break;
    case 3:
    echo _("You received 100 credit for log in today");
  }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-10T11:44:22.710

最好的选择是创建一个真实的视图而不是使用[模板](http://codeangel.org/articles/simple-php-template-engine.html)。

这段代码显然是表示逻辑的一部分，它在 MVC 设计模式中的视图范围内。不幸的是，CodeIgniter 使用的是类似 Rails 的架构，这意味着您将不得不使用[helpers](http://codeigniter.com/user_guide/general/helpers.html)，从而使您远离受 MVC 启发的设计模式。

# android - 获取 GCM 的 API 密钥

> ID：12350201
> 
> 赞同：0
> 
> 时间：2012-09-10T10:54:30.793
> 
> 标签：android, api, key, api-key, google-cloud-messaging

我试图将 Google Cloud Messaging 用于 Android 应用程序。在文档中，据说我必须创建新的服务器密钥，并且在这里我被阻止了。我应该输入什么 IP 地址来获取我的 API KEY？我现在使用免费的虚拟主机，所以我没有服务器端应用程序的公共 IP 地址。

我可以改用创建新的浏览器密钥吗？虽然它不会要求 IP 地址。你能建议点什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T11:22:32.397

好的，这是您的服务器的 IP 地址，您将在其中运行服务器端代码以保存所有 registeration_id 的列表并将短信发送到这些 registeration_id。

# c# - VS 2012 中的 SQLite

> ID：12350202
> 
> 赞同：0
> 
> 时间：2012-09-10T10:54:31.527
> 
> 标签：c#, .net, database, entity-framework, sqlite

好吧，花了太多时间敲我的头：）

我需要在不使用完整数据库服务器的情况下在 Windows 上的会话之间保留少量（低于 1000 个）项目集合。项目是具有十几个字符串属性的简单对象。数据库/集合/任何东西都应该存储在一个可以在运行时通过代码创建的文件中。

从 SQL server CE 开始，然后切换到 SQLite，但现在我被告知 Entity 是一种方法。我不介意学习实体，但对于简单的存储来说似乎开销太大了。

我该怎么办？（如果有人仍然实际编写 Windows 小型数据库）

1.  抛弃实体，直接通过命令访问 SQLite。
2.  将实体与 SQLite 一起使用（希望链接以正确的方式在运行时创建数据库）
3.  抛弃数据库的整个概念（我放这个是因为以前每本书都有一个关于数据库的章节，现在我没有一本书提到它。互联网上也没有多少新东西，所以人们可能会感动关于其他一些概念）

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T14:43:08.663

听起来像结构化的文本数据——十几个字符串属性。

我会使用 XML

[XDocument 类](http://msdn.microsoft.com/en-us/library/system.xml.linq.xdocument.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T11:16:29.860

我会使用带有 SQL CE 的数据上下文，它不仅仅是你描述的工作。

唯一的问题是您只能将其备份到本地 C: 驱动器上。因此，如果该磁盘死了，您将失去一切。

对于您需要做的事情，无需转移到实体。

如果它确实成为您想要多次访问的东西，那么您将不得不重新考虑这一点。

希望这可以帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-19T07:39:38.790

实际上，我不知何故走的是与您 [VS2012/WPF4] 相同的道路，我发现 Dapper+Sqlite 的组合对我来说效果很好。
的`System.Data.SQLite`设计时支持不会在 2012 年 11 月之前准备好，因此 EF5 将从我的选项中删除。
查看 Dapper：
[http](http://code.google.com/p/dapper-dot-net/) ://code.google.com/p/dapper-dot-net/ 这扩展了`IDbConnection`，您只需要打开到您想要的任何数据库的连接。

编辑：使用 Dapper，我无法自动化数据绑定......

# sql - 从其他表检查列验证

> ID：12350207
> 
> 赞同：0
> 
> 时间：2012-09-10T10:54:43.803
> 
> 标签：sql, sql-server, sql-server-2008

我必须以这样一种方式编写 SQL 查询，即 where 列名应该来自我提到的列列表的其他表：

前任：

```
SELECT * FROM myTable WHERE <Column Name> = NULL 
```

现在这些列名来自另一个表：

```
Column Name
 Product Name
 Customer Name 
```

如何一次使用所有这些列来检查它们是否为 NULL。

另一个具有列名的表是动态的，动态的意思是可以添加新列。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T11:04:24.290

如果表具有动态添加的列，那么您可能必须编写一个过程来查找新列..

您可以从系统表中找到表的列名

```
select name 
from sys.columns 
where object_id=object_id('your_table') 
```

最后你可以像这样加入表格

```
SELECT * 
FROM myTable m
JOIN otherTable o ON m.id = o.id
WHERE o.<Column Name> = NULL 
```

# javascript - 铸造/初始化主干模型的子模型

> ID：12350218
> 
> 赞同：6
> 
> 时间：2012-09-10T10:55:04.297
> 
> 标签：javascript, backbone.js

我想我有一个非常简单的问题，很难说，因此很难找到解决方案。设置：

*   PathCollection 是一个 Backbone.Collection 的路径
*   Path 是一个 Backbone.Model，它包含 NodeCollection（它是一个 Backbone.Collection）和 EdgeCollection（它是一个 Backbone.Collection）。

当我获取 PathCollection

```
paths = new PathCollection()
paths.fetch() 
```

显然，路径被实例化。但是，我错过了允许 Path 从属性哈希实例化其子模型的地方。我真的不能使用解析，对吧？基本上，当模型实例化并设置属性时，我正在寻找模型的入口点。我觉得必须有一些约定。

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-09-10T14:42:55.023

所以我写了几个关于使用`parse()`和`set()`实例化和填充子模型和子集合（嵌套数据）的答案。但是，我还没有看到一个真正全面的答案来整合我所看到的许多实践中的一些。当我写很多东西时，我倾向于漫不经心，所以我可能会离题一点，但这可能对遇到类似问题的人有用。

有几种方法可以做到这一点。使用`parse()`是一个。操纵`set()`是另一回事。在你的实例化这些`initialize()`是另一个。在路径模型之外做这一切是另一个（例如`path = new Path(); path.nodes = new NodeCollection();`等）

第二个考虑是这个。您希望节点和边集合成为模型属性吗？还是模型属性？

哦，这么多选择。很多自由，但有时（令我们沮丧的是）这使得确定“正确的方式”变得更加困难。

由于这种情况经常出现，因此我将发表一篇长文并一一介绍。所以请耐心等待我继续更新这个答案。

**在模型之外进行 - 简单直接**

当您只需要在特定模型或集合上添加嵌套模型和集合时，这通常是一种简单的方法。

```
path = new PathModel();

path.nodes = new NodeCollection();
path.edge = new EdgeCollection();

// Continue to set up the nested data URL, etc. 
```

这是最简单的方法，当您处理不需要定义的一次性模型和集合时效果很好。尽管您可以在对它进行任何操作之前通过构造该对象的某种方法（例如视图方法）轻松生成这些模型。

**在每个模型中使用`initialize()`子模型/集合**

如果您知道某个模型的每个实例总是有一个子模型或子集合，那么最简单的设置方法就是使用该`initialize()`函数。

例如，以您的 Path 模型为例：

```
Path = Backbone.Model.extend({
    initialize: function() {
        this.nodes = new NodeCollection();
        this.paths = new PathCollection();

        // Maybe assign a proper url in relation to this Path model
        // You might even set up a change:id listener to set the url when this
        // model gets an id, assuming it doesn't have one at start.
        this.nodes.url = this.id ? 'path/' + this.id + '/nodes' : undefined;
        this.paths.url = this.id ? 'path/' + this.id + '/paths' : undefined;
    }
}); 
```

现在您的子集合可以像这样被获取`path.nodes.fetch()`，它会路由到正确的 URL。十分简单。

**用于`parse()`实例化和设置子数据**

如果你不想假设每个模型都有一个节点和边缘集合，也许它会变得有点棘手。`fetch()`也许只有在发回此类数据时才需要嵌套模型/集合。这就是使用`parse()`可以派上用场的情况。

问题是它需要任何 json 服务器响应，并且可以在将其传递给模型函数`parse()`之前正确命名空间和处理它。`set()`因此，我们可以检查是否包含模型或集合原始数据并在将响应减少到父模型属性之前对其进行处理。

例如，也许从我们的服务器我们得到这个响应：

```
// Path model JSON example with nested collections JSON arrays
{
    'name':'orange site',
    'url':'orange.com',
    'nodes':[
        {'id':'1', 'nodeColor':'red'},
        {'id':'2', 'nodeColor':'white'},
        {'id':'3', 'nodeColor':'blue'}
    ],
    'edge':[
        {'id':'1', 'location':'north'},
        {'id':'1', 'location':'south'},
        {'id':'1', 'location':'east'}
    ]
} 
```

使用默认的`parse()`Backbone 将吞噬它，并为您的路径模型属性“nodes”和“edge”分配一个数据数组（而不是集合）。所以我们要确保我们能`parse()`适当地处理这个问题。

```
parse: function(response) {

    // Check if response includes some nested collection data... our case 'nodes'
    if (_.has(response, 'nodes')){

         // Check if this model has a property called nodes
        if (!_.has(this, 'nodes')) {  // It does not...
            // So instantiate a collection and pass in raw data
            this.nodes = new NodeCollection(response.nodes);
        } else {
            // It does, so just reset the collection
            this.nodes.reset(response.nodes);
        }

        // Assuming the fetch gets this model id
        this.nodes.url = 'path/' + response.id + '/nodes';  // Set model relative URL

        // Delete the nodes so it doesn't clutter our model attributes
        delete response.nodes;
    }

    // Same for edge...

    return response;
} 
```

你也可以使用自定义`set()`的来处理你的子数据。经过多次来回哪个更好，操纵`set()`或这样做后，`parse()`我决定我喜欢使用`parse()`更多。但我愿意接受其他人对此的看法。

**用于`set()`处理您的子数据**

虽然`parse()`依赖于获取数据或使用选项将数据传递到集合中，但`parse:true`有些人发现更改`set()`函数更可取。同样，我不确定是否有正确的选择，但这就是它的工作方式。

```
set: function(attributes, options) {
    // If we pass in nodes collection JSON array and this model has a nodes attribute
    // Assume we already set it as a collection
    if (_.has(attributes, 'nodes') && this.get("nodes")) {
        this.get('nodes').reset(attributes.nodes);
        delete attributes.nodes;
    } else if (_.has(attributes, 'nodes') && !this.get('nodes')) {
        this.set('nodes', new NodeCollection(attributes.nodes));
        delete attributes.nodes;
    }

    return Backbone.Model.prototype.set.call(this, attributes, options);
} 
```

因此，如果我们已经有一个属性并且它是一个集合，我们就使用`reset()`它。如果我们有一个属性但它不是一个集合，我们就实例化它。在将子数据的 JSON 数组传递给原型之前，确保将其正确转换为集合非常重要`set()`。Backbone，不会将 JSON 数组解释为一个集合，您只会得到一个直接的数组。

所以简而言之，你有很多关于如何去做的选择。`initialize()`同样，当我知道某些东西总是有那些子模型/集合并且`parse()`情况只需要调用可能的嵌套数据时，我现在更喜欢混合使用`fetch()`。

**关于你的那个问题......（哦，是的，有一个问题）**

您可以允许 Path 以多种方式从散列中实例化子模型。我刚刚给了你 4。如果你愿意，你可以使用 parse，如果你知道你将成为`fetch()`路径模型，或者甚至可能是 pathCollection...`pathCollection.fetch({parse:true})`有约定吗？也许也许不是。我喜欢根据我认为我将使用模型/集合的上下文来使用多种方式。

我非常愿意讨论其中的一些做法，以及它们是好是坏。它们只是我在 Stack 上遇到的许多解决方案，并融入了我自己的工作习惯，它们似乎对我来说效果很好。:-)

**给自己喝杯咖啡，拍拍背，那是一篇长篇大论。**

# vim - 如何在 Vim 中生成 GUID？

> ID：12350222
> 
> 赞同：6
> 
> 时间：2012-09-10T10:55:12.610
> 
> 标签：vim, powershell, guid

Vim 没有内置的 GUID 生成器。

对于我正在处理的项目，我可以依赖 Powershell 可用，因此以下为我提供了一个 GUID 字符串：

```
[guid]::NewGuid().ToString() 
```

我将其称为替换，如下所示：

```
%s/foo/\=system('[guid]::NewGuid().ToString()')[:2]/ 
```

虽然这有效，但它会为每个替换闪现一个窗口，而且速度很慢。

我真正想要的是一种在 Vim 中可移植且快速地生成 GUID 的方法。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-10T11:10:31.053

如果你可以依赖 Vim 的 Python 脚本支持

```
:py import uuid
:%s/foo/\=pyeval('str(uuid.uuid4())')/ 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-10T11:34:30.287

如果你不想/不能使用 Vim 语言包装（例如 Python 或 Perl），你必须为 Win32`UuidCreate()`函数编写一个 DLL 包装器，并通过`libcall()`. （帮助说您不能直接调用 Windows 系统 DLL，因为调用约定不匹配。）

包装器可能简单且易于编写，但您仍然需要编译一个 DLL 并将其安装在每个系统上。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-11T06:29:33.993

我猜你只是想`foo`用随机十六进制替换。如果是这样，你可以这样做：

百万美元的窗户：

```
%s/foo/\=printf("%04X",libcallnr("msvcrt.dll","rand",localtime()))[:2]/ 
```

对于 Unix：

```
%s/foo/\=printf("%04X",libcallnr("libc.so.6","rand",localtime()))[:2]/ 
```

这将比任何其他 shell 命令快得多。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-09-10T11:01:25.127

代替

```
'[guid]::NewGuid().ToString()' 
```

和

```
'powershell.exe -command "[guid]::NewGuid().ToString()"' 
```

这有帮助吗？

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-10T11:17:16.193

在 Windows 上，该`system()`命令会弹出一个命令窗口（不过通常在后台）。避免这种情况的一种方法是使用编译到 Vim 中的语言绑定，例如 Python：

```
:python import uuid, vim; vim.command("let g:uuid = '" + str(uuid.uuid1()) + "' 
```

这既更快又避免了弹出窗口，但确实需要安装 Python 和支持 Python 的 Vim；如果出于某种原因您更喜欢另一种语言，您可能会想出类似的 Perl 或 Ruby 实现。不幸的是，还没有 PowerShell 语言绑定。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2017-11-13T13:57:33.803

我来到这里是因为问题标题询问如何创建 UUID，但问题文本实际上想用新创建的 UUID 替换现有的文本块。

[Marius Gedminas 的回答](https://stackoverflow.com/a/12350432/460741)让我走得很远，如果其他人需要创建和插入 UUID，方法如下：

```
function! Guid()
python << EOF
import uuid, vim
vim.command("normal i" + str(uuid.uuid4()) )
EOF
endfunction 
```

如果要将其映射到`<alt+G>`：`map <m-g> :call Guid() <cr>`

（如果您的 Gvim 在调用 Python 时崩溃，[请阅读此内容](https://stackoverflow.com/questions/35597157/gvim-crashes-when-running-python)）

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2020-12-02T23:27:55.207

假设您`python`的路径中有，以下是在光标处插入或附加 UUID 的一些映射。它应该与平台无关。

```
" Insert GUID
nnoremap <silent><leader>ig "=system('python -c "import uuid; print(uuid.uuid4(), end=\"\");"')<CR>P

" Append GUID
nnoremap <silent><leader>ag "=system('python -c "import uuid; print(uuid.uuid4(), end=\"\");"')<CR>p 
```

这个怎么运作：

*   `python -c "import uuid; print(uuid.uuid4(), end=\"\");"'``python`- 使用和`uuid`模块将 UUID 打印到 STDOUT 的外壳单行器，无需换行符。
*   `"=`-`"`告诉 vim 将下一个值分配给指定的寄存器，在本例中为表达式寄存器：`=`
*   `system(...)`- 这将输出并重定向输出以用于分配到寄存器
*   `<CR>P`或`<CR>p`- 在光标处计算和粘贴寄存器（分别插入、追加）

# ruby - 将数组分配给不同的变量

> ID：12350224
> 
> 赞同：2
> 
> 时间：2012-09-10T10:55:16.143
> 
> 标签：ruby, metaprogramming

我有一个分配多个数组的简单要求。现在我正在做类似的事情。

```
 employees = Array.new
      projects = Array.new
      practices = Array.new
      entities = Array.new
      categories = Array.new
      groups = Array.new
      external_inputs = Array.new
      payrolls = Array.new 
```

我希望`employees, projects, practices, entities ...payrolls`所有内容都应分配`Array.new`在一行中请提出一些更好更干净的方法。也许通过元编程。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-10T11:06:53.960

```
employees, projects, practices, entities, categories, groups, external_inputs, payrolls = 
  8.times.map { [] } 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-10T11:34:19.463

> 我想要 , `employees`, `projects`, `practices`, `entities`...,`payrolls`都应该`Array.new`在一行中分配

给你：

```
employees = Array.new; projects = Array.new; practices = Array.new; entities = Array.new; categories = Array.new; groups = Array.new; external_inputs = Array.new; payrolls = Array.new 
```

瞧，单行，正如你所要求的。

现在，为什么你有一个需要 8 个局部变量的大而复杂的方法完全是另一个问题。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-10T11:07:39.437

丑陋但满足要求：

```
employees, projects, practices, entities, categories, groups, external_inputs, payrolls = Array.new(8) { [] } 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-10T11:02:17.630

好吧，这不是一条线，但使用起来更干净：

```
employees        = []
projects         = []
practices        = []
entities         = []
categories       = []
groups           = []
external_inputs  = []
payrolls         = [] 
```

但是，如果你想更“聪明”地做到这一点，你可以尝试：

```
employees = projects = practices = entities = categories = groups = external_inputs = payrolls = nil
%w(employees projects practices entities categories groups external_inputs payrolls).each {|v| eval "#{v} = []" } 
```

也就是说，将值收集到哈希中可能更容易。

```
Hash[*%w(employees projects practices entities categories groups external_inputs payrolls).map {|k| [k, []] }.flatten(1)]

# Result
# {"employees"=>[], "projects"=>[], "practices"=>[], "entities"=>[], "categories"=>[], "groups"=>[], "external_inputs"=>[], "payrolls"=>[]} 
```

# wkhtmltopdf - 使用 wkhtmltopdf 创建正确的 pdf 文件以进行打印

> ID：12350226
> 
> 赞同：1
> 
> 时间：2012-09-10T10:55:25.287
> 
> 标签：wkhtmltopdf

在[**wkhtmltopdf**](http://code.google.com/p/wkhtmltopdf/)的文档中，我找不到有关如何更改打印边框的任何提示。我在下图中用绿线标记了它。

我有

```
body {
    margin:0px;
    padding:0px;
} 
```

所有的桌子都是`100%`宽度。桌子周围的包装纸是`26cm`宽度。任何想法如何减少内容周围的空白？

![在此处输入图像描述](../Images/13a0deb585f129ef599c52e2b809f7b2.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T08:08:28.143

这是 wkhtmltopdf 的一个非常复杂的问题。获得绝对 100% 宽的内容是不可能的，目前您总是在右侧和底部出现（小于 1 毫米）边框。我建议玩弄这些设置，看看你可以通过哪种方式让它为你工作。我很想看看你在这个问题上的进展情况（也想看看是否还有其他印刷问题，比如 CMYK 战斗）。

您用于转换文件的 wkhtmltopdf 命令是什么？你在那里指定了边距吗？尝试类似的命令`wkhtmltopdf.exe -B 0 -R 0 -L 0 -T 0 content.html 3.pdf`。您可能还想要`--disable-smart-shrinking`.

内容如

```
<html>
    <head />
    <body bgcolor="red" style="margin:0; padding:0;">
        <table style="width: 100%; background-color:cyan; margin:0; padding:0;">
            <tr><td>MAGICAL PONIES</td></tr>
        </table>
        <p>bla</p>
    </body>
</html> 
```

你得到像这样的输出

![转换后的pdf截图](../Images/f37cb6c2f5c3b978bdaa3a95caf30bbd.png)

祝你好运，玩得开心:)

# c++ - 独立于平台的 C++ DLL

> ID：12350230
> 
> 赞同：0
> 
> 时间：2012-09-10T10:55:38.960
> 
> 标签：c++, ios, dll

我用 c++ 编写了一个在 c# 应用程序上完美运行的 dll。是这样的

```
#include "stdafx.h"
#include "fun.h"

extern "C" __declspec(dllexport)double Add(double a, double b,double k);
extern double Add(double a, double b,double k) 
{ 
    return a+b+k;
} 
```

现在我想在 MAC 应用程序上运行相同的 DLL。我需要在当前的 DLL 中进行哪些更改？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-10T10:57:49.527

您不能创建在 Windows 和 Mac 上都加载的 DLL。您需要为 Mac 重新编译代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T10:59:08.310

你不能在mac上运行任何dll。Mac 有它自己的动态加载库。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-10T12:07:26.457

如果您坚持使用 c#，我相信您有 2 个选择。第一个选项是查看您的代码是否会在 mac 上以单声道运行。为此，您将创建 macintosh 可执行文件和动态库。

[http://www.mono-project.com/Mono:OSX](http://www.mono-project.com/Mono:OSX)

[http://lipsky.me/2012/7/21/calling-a-dynamic-library-from-monomac-part-1](http://lipsky.me/2012/7/21/calling-a-dynamic-library-from-monomac-part-1)

第二种是使用 .NET 2.0 或更低版本，看看您的应用程序是否可以在 macintosh 上的 wine 下运行。不要在代码中使用任何 .NET 3.X 或更高版本，因为 .NET 3.X 或更高版本将无法安装或在 wine 中存在很多问题。

[http://appdb.winehq.org/objectManager.php?sClass=version&iId=3754](http://appdb.winehq.org/objectManager.php?sClass=version&iId=3754)

# apache - 我们可以在 Java 中获取服务器集群的真实路径吗

> ID：12350231
> 
> 赞同：0
> 
> 时间：2012-09-10T10:55:38.297
> 
> 标签：apache, tomcat, servlets, cluster-computing

我的 Web 应用程序部署在 tomcat 集群上。我创建了一个 servlet，可以在服务器启动时将 pdf 转换为图像。

这些图像存储在战争本身内部的服务器文件系统上，这不是共享位置。我将这些图像用作战争资源的一部分。

在开发环境中访问这些图像工作正常，因为它是非集群环境。

现在在生产环境中使用集群服务器。在转换过程中，图像并非在每个集群上都可用。

# javascript - 无法选择 Dijit 树的节点

> ID：12350233
> 
> 赞同：1
> 
> 时间：2012-09-10T10:55:50.697
> 
> 标签：javascript, jquery, dojo

我创建了一个简单的 dijit 树，如下所示：

```
var myDataStore = new dojo.data.ItemFileWriteStore(
         {data: { identifier: 'id', label : 'label', items: myData }});

var myModel = new dijit.tree.ForestStoreModel({ store: myDataStore });

new dijit.Tree({ model: myModel,
         showRoot: false,
       }, "myTree" ); 
```

myData 是 JSON 格式，例如 { id : '1' label : 'nodeName'}

树已成功创建。但是我无法选择一个节点。一旦我将鼠标从节点上移开，它就会被取消选择。我需要选择一个节点并根据所选节点执行操作

我错过了什么

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T13:49:22.930

添加

```
onClick: function(item){
    //perform operation based on selected node
} 
```

到你的`dijit.Tree`.

# ruby-on-rails - 如何在 Ruby on Rails 中获取人类可读的类名？

> ID：12350234
> 
> 赞同：9
> 
> 时间：2012-09-10T10:55:57.917
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, humanize

我正在使用 Ruby 1.9.3 和 Rails 3.0.9 构建应用程序

我有一个像下面这样的课程。

```
module CDA
  class Document
    def humanize_class_name
      self.class.name.gsub("::","")
    end
  end
end 
```

我想要像“CDADocument”这样的类名。

我的 humanize_class_name 方法是实现此目的的正确方法吗？

或者

Rails 还有其他可用的内置方法吗？

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-12-11T15:42:46.747

如果您使用`i18n`，您可以调用`Model.model_name.human`以获取本地化模型名称。

例如：`Event.model_name.human`返回我的本地化名称。

文档：[http ://api.rubyonrails.org/classes/ActiveModel/Name.html#method-i-human](http://api.rubyonrails.org/classes/ActiveModel/Name.html#method-i-human)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-10T11:07:05.990

我认为Rails可能有类似的东西，但是由于您想要的形式很奇特，因此您必须自己设计方法。你定义它的位置是错误的。您必须为每个班级都这样做。相反，您应该在 Class 类中定义它。

```
class Class
    def humanize_class_name
      name.delete(":")
    end
end
some_instance.class.humanize_class_name #=> the string you want 
```

或者

```
class Object
    def humanize_class_name
        self.class.name.delete(":")
    end
end
some_instance.humanize_class_name #=> the string you want 
```

# android - ListView 如何在内部工作

> ID：12350238
> 
> 赞同：0
> 
> 时间：2012-09-10T10:56:20.557
> 
> 标签：android, listview

我对android listview有点困惑，对于数据绑定，我们使用适配器。据我所知，`getView()`根据我们试图在listView中绑定的项目的长度来调用。所以如果数据长度为4，那么`getView()`将被调用有时它会在列表视图中绑定数据。现在我的问题是，我正在尝试打印日志，`getView()`所以当数据绑定时，这个日志应该打印但它没有发生，在滚动列表视图时，这个日志正在打印。所以我对此列表视图感到困惑。请建议我。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T10:59:07.767

AFAIK，getView 在需要时被调用。因此，仅在需要显示视图时才创建视图。

这样拥有 100 个项目的 ListView 会更快。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T11:09:20.960

您需要从 google io 2010 观看此视频，非常有帮助：[http ://www.youtube.com/watch?v=wDBM6wVEO70](http://www.youtube.com/watch?v=wDBM6wVEO70)

# iphone - iphone/设备进入睡眠状态或锁定时继续播放音频

> ID：12350241
> 
> 赞同：0
> 
> 时间：2012-09-10T10:56:23.717
> 
> 标签：iphone, ios, xcode4, core-audio, background-audio

当 iPhone/iPod 进入睡眠或锁定状态时，我正在使用以下代码继续播放音频。

```
mv = [[MPMoviePlayerController alloc] initWithContentURL:[NSURL URLWithString:@"http://myurl/myMusic.mp3"]];
mv.movieSourceType = MPMovieSourceTypeUnknown;
[self.view addSubview:mv.view];
[mv play];

UInt32 sessionCategory = kAudioSessionCategory_MediaPlayback;
AudioSessionSetProperty (kAudioSessionProperty_AudioCategory, sizeof (sessionCategory), &sessionCategory); AudioSessionSetActive(true); 
```

通过使用此代码，我的设备不会进入睡眠模式，但我想要的是，设备应该进入睡眠模式，但音频不应该停止播放。
我已经在我的文件 中添加了`Required background modes`和。`App plays audio``info.plist`

请建议我我错在哪里？为什么设备没有进入睡眠模式/锁定？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T06:16:41.160

在 viewdidload 中使用此代码：

```
NSError *setCategoryErr = nil;
NSError *activationErr  = nil;
[[AVAudioSession sharedInstance] setCategory: AVAudioSessionCategoryPlayback error: &setCategoryErr];
[[AVAudioSession sharedInstance] setActive: YES error: &activationErr];
[[UIApplication sharedApplication] beginReceivingRemoteControlEvents];
UIBackgroundTaskIdentifier newTaskId = UIBackgroundTaskInvalid;
newTaskId = [[UIApplication sharedApplication] beginBackgroundTaskWithExpirationHandler:NULL]; 
```

它对我来说很好。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-10T11:22:51.557

首先，将这些框架包含到您的项目中：AudioToolbox、CoreAudio、MediaPlayer 和 AVFoundation。将它们全部导入到放置播放器的 viewController 中。分配并开始播放音频后，插入以下代码：

```
UInt32 sessionCategory = kAudioSessionCategory_MediaPlayback;
AudioSessionSetProperty (kAudioSessionProperty_AudioCategory, sizeof (sessionCategory), &sessionCategory);
AudioSessionSetActive(true); 
```

最后，转到您的应用程序 Info.plist 文件并添加名为 UIBackgroundModes 的行。新行将是一个数组，将包含 1 个项目，即项目 0。为此，您只需将值设置为音频。你完成了！享受你的背景音频播放应用程序！

希望能帮助到你。快乐编码:)

# c# - c# webbrowser 无法读取西里尔文

> ID：12350244
> 
> 赞同：0
> 
> 时间：2012-09-10T10:56:48.330
> 
> 标签：c#, winforms, encoding

当我写

```
richTextBox1.Text = wb.DocumentText; 
```

它显示像这样的俄语字母������

我可以做什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T10:58:37.053

使用[`WebClient`](http://msdn.microsoft.com/en-us/library/system.net.webclient.aspx)，您可以设置编码以检索 HTML 并正确编码。

未经测试的例子：

```
var wc = new WebClient();
wc.Encoding = Encoding.GetEncoding("windows-1251");

richTextBox1.Text = wc.DownloadString(myURL); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T10:58:12.317

您必须将西里尔字体安装到您的浏览器才能查看标准类型以外的字符。

如果它是一个桌面应用程序，您必须查找您的字体文件夹中是否存在所需的字体。

或者确保您的所有编码都符合 UTF-8 标准。

# jquery - jQuery 帮助 - 将 XML 解析为数组

> ID：12350245
> 
> 赞同：1
> 
> 时间：2012-09-10T10:56:57.517
> 
> 标签：jquery, xml, arrays, http, parsing

我目前正在开发一个 HTML 游戏，用户可以通过该游戏将项目拖放到正确的类别中。类别及其项目在 XML 文档中定义。

我的 XML 格式：

```
<config>
<game>
    <title>Dementia</title>
        <cat>
            <catTitle>Mild</catTitle>
            <item>mild-1</item>
            <item>mild-2</item>
            <item>mild-3</item>
        </cat>
        <cat>
            <catTitle>Moderate</catTitle>
            <item>Moderate-1</item>
            <item>Moderate-2</item>
            <item>Moderate-3</item>
        </cat>
        <cat>
            <catTitle>Severe</catTitle>
            <item>Severe-1</item>
            <item>Severe-2</item>
        </cat>
</game> 
```

我想使用 jQuery 将这个 XML 文件解析为基于它们的类别的单独数组。

例如：

> array1 = [轻度 1，轻度 2，轻度 3]
> 
> array2 = [中等 1，中等 2，中等 3] 等等...

这将允许我根据类别数组检查删除的项目的属性是否正确。

如果您对如何做到这一点有任何其他想法，请提出建议。

先感谢您。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-10T11:22:13.073

试试，像这样：

```
$(document).ready(function() {
    var arr = [];
    $(xml).find("cat").each(function(idx, v) {
        arr[idx] = [];
        $(v).find("item").each(function( i , vi) {
            arr[idx].push( $(vi).text() );
        });             
    });
    console.log( arr );
}); 
```

将返回如下响应：

```
[
    ["mild-1", "mild-2", "mild-3"]
, 
    ["Moderate-1", "Moderate-2", "Moderate-3"]
, 
    ["Severe-1", "Severe-2"]
] 
```

因此，您可以访问单个数组，

```
console.log( arr[0] ); //for first, and so on.. 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-10T11:04:33.103

试试这样：

```
$("cat", xml).each(function () {
   $("item", this).toArray();
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-09-19T11:21:45.793

```
$($.parseXML(xml)).find("cat").each(function (idx, v) {
  arr[idx] = [];
  $(v).find("item").each(function (i, vi) {
     arr[idx].push($(vi).text()
  );
 }); 
```

因为`$(xml)`在 IE 中不起作用（请参阅这`jQuery.find()`不会在 IE 中返回数据，但在 Firefox 和 Chrome 中会返回）。

# c# - OBD2 给我一个总线初始化错误

> ID：12350247
> 
> 赞同：0
> 
> 时间：2012-09-10T10:57:13.303
> 
> 标签：c#, winforms, string, bus, obd-ii

我正在使用 C# 构建一个与其他 OBD2 阅读器应用程序类似的应用程序。

我已经测试了一个通过蓝牙端口连接到我的 PC 的 OBD2 适配器。我正在使用以下程序“ [Torque](http://torque-bhp.com/software/torque-android-obd2-adapters/) ”测试此适配器，我必须说该程序运行得非常好。我正在阅读所有参数。我什至正在使用在 PC 上创建虚拟 COM 端口并具有循环的程序对其进行测试，该循环为我提供了一些不同的状态和消息，并且我的程序可以正常工作而没有错误。

因此，当我从车上收到第一条消息时，我的问题就出现了。

这部分代码实际上是从汽车中获取[PID 。](http://en.wikipedia.org/wiki/OBD-II_PIDs)在这个例子中，我得到的 PID 是这种格式：**010D Bus..init 错误**（我确定这是一条消息，但我不确定这是否是原始格式，可能或多或少一个点）。

```
private string GetValue(string pid)
        {
            sp.Write(pid + "\r");
            System.Threading.Thread.Sleep(100);
            const int buffSize = 1024;
            bool cont = true;
            int count = 0;
            byte[] bff = new byte[buffSize];
            string retVal = string.Empty;
            while (cont)
            {
                count = sp.Read(bff, 0, buffSize);
                retVal += System.Text.Encoding.Default.GetString(bff, 0, count);
                if (retVal.Contains(">"))
                {
                    cont = false;
                }
            }
            return retVal.Replace("\n", "");
        } 
```

然后我进入这个函数：

```
public int? GetSpeedKmh()
        {
            CheckSerialPort();
            const string obdMessage = "010D";
            if (OnGetSpeedInit != null)
                OnGetSpeedInit(new OBDIIEngineEventArgs(null, obdMessage));
            string data = GetValue(obdMessage);
            int? retVal = (data.Contains("NO DATA")) ? null : (int?)Convert.ToInt32(data.Split(' ')[2].Replace("\r>", string.Empty), 16);
            if (OnGetSpeedDone != null)
                OnGetSpeedDone(new OBDIIEngineEventArgs(retVal, obdMessage, data.Contains("NO DATA")));
            return retVal;
        } 
```

现在此行中发生错误： `int? retVal = (data.Contains("NO DATA")) ? null : (int?)Convert.ToInt32(data.Split(' ')[2].Replace("\r>", string.Empty), 16);`

因为我收到一个总线初始化错误消息，它无法确定写入的内容。

那么我能做些什么来纠正这个程序呢？有没有人有类似的问题？我确信 OBD2 适配器正在工作，COM 端口正在获取数据，并且我已经用其他程序对其进行了测试，它正在读取我需要的所有数据。

我试图用谷歌搜索它，但找不到任何可以解决我问题的东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T15:40:18.667

I see you've got a call to:

```
System.Threading.Thread.Sleep(100); 
```

in your code.

I don't know anything about interfacing with an OBD2 adapter but it seems like an assumption is being made here that 100ms is enough time to for that `sp.Write(pid + "\r")` call to take place. What happens if you bump that up to 200ms? 500ms?

Seems like your code is relying upon things happening within a given amount of time and that might, in fact, not be long enough for that action to take place.

# java - FileWriter和BufferedWriter之间的Java区别

> ID：12350248
> 
> 赞同：75
> 
> 时间：2012-09-10T10:57:31.443
> 
> 标签：java, file-io, java-io

它们之间有什么区别？我只是在学习 Java ATM，但似乎我可以双向写入文件，即（我没有在这里复制 try-catch 块。）

```
FileWriter file = new FileWriter("foo.txt");
file.write("foobar");
file.close(); 
```

和

```
FileWriter file = new FileWriter("foo.txt");
BufferedWriter bf = new BufferedWriter(file);
bf.write("foobar");
bf.close(); 
```

我理解首先缓冲数据的概念，这是否意味着第一个示例将字符一个一个地写入，第二个示例将其缓冲到内存并写入一次？

* * *

## 回答 #1

> 赞同：87
> 
> 时间：2012-09-10T11:05:53.503

如果您使用 BufferedWriter 会更高效

*   在刷新/关闭之间有多次写入
*   与缓冲区大小相比，写入很小。

在您的示例中，您只有一次写入，因此 BufferedWriter 只会增加您不需要的开销。

> 这是否意味着第一个示例一个接一个地写入字符，第二个示例将其缓冲到内存并写入一次

在这两种情况下，都会立即写入字符串。

如果您只使用 FileWriter 您的 write(String) 调用

```
 public void write(String str, int off, int len) 
        // some code
        str.getChars(off, (off + len), cbuf, 0);
        write(cbuf, 0, len);
 } 
```

这会进行一次系统调用，每次调用 write(String)。

* * *

BufferedWriter 提高效率的地方在于多次小写。

```
for(int i = 0; i < 100; i++) {
    writer.write("foorbar");
    writer.write(NEW_LINE);
}
writer.close(); 
```

如果没有 BufferedWriter，这可能会进行 200 (2 * 100) 次系统调用并写入磁盘，这是低效的。使用 BufferedWriter，这些都可以一起缓冲，并且由于默认缓冲区大小为 8192 个字符，因此这只需 1 个系统调用即可写入。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-09-10T11:01:53.730

你说的对。以下是外观`write()`方法：`BufferedWriter`

```
public void write(int c) throws IOException {
    synchronized (lock) {
        ensureOpen();
        if (nextChar >= nChars)
            flushBuffer();
        cb[nextChar++] = (char) c;
    }
} 
```

如您所见，它确实检查缓冲区是否已满 ( `if (nextChar >= nChars)`) 并刷新缓冲区。然后它将新字符添加到缓冲区（`cb[nextChar++] = (char) c;`）。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-09-10T11:00:18.630

BufferedWriter 效率更高。如果内存正确地为我服务，它会保存小写入并写入一个更大的块。如果你正在做很多小写，那么我会使用 BufferedWriter。调用操作系统的写入调用速度很慢，因此通常需要尽可能少的写入。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-10T11:04:54.900

来自 Java API 规范：

[文件编写器](http://docs.oracle.com/javase/1.4.2/docs/api/java/io/FileWriter.html)

> 编写字符文件的便利类。此类的构造函数假定默认字符编码和默认字节缓冲区大小是可以接受的。

[缓冲写入器](http://docs.oracle.com/javase/1.4.2/docs/api/java/io/BufferedWriter.html)

> 将文本写入字符输出流，缓冲字符，以便高效写入单个字符、数组和字符串。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-10T11:05:14.273

[http://docs.oracle.com/javase/1.5.0/docs/api/java/io/BufferedWriter.html](http://docs.oracle.com/javase/1.5.0/docs/api/java/io/BufferedWriter.html)

> 通常，Writer 将其输出立即发送到底层字符或字节流。除非需要快速输出，否则建议将 BufferedWriter 包装在任何 write() 操作可能代价高昂的 Writer 周围，例如 FileWriters 和 OutputStreamWriters。例如，
> 
> PrintWriter out = new PrintWriter(new BufferedWriter(new FileWriter("foo.out")));
> 
> 将 PrintWriter 的输出缓冲到文件中。如果没有缓冲，每次调用 print() 方法都会导致字符转换为字节，然后立即写入文件，这可能非常低效。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-05-11T17:53:04.017

在无缓冲的输入/输出（FileWriter，FileReader）中，读取或写入请求由底层操作系统直接处理。[https://hajsoftutorial.com/java/wp-content/uploads/2018/04/Unbuffered.gif](https://hajsoftutorial.com/java/wp-content/uploads/2018/04/Unbuffered.gif)

这会使程序的效率大大降低，因为每个这样的请求通常都会触发磁盘访问、网络活动或其他一些相对昂贵的操作。为了减少这种开销，Java 平台实现了缓冲 I/O 流。BufferedReader 和 BufferedWriter 类提供内部字符缓冲区。写入缓冲写入器的文本存储在内部缓冲区中，并且仅在缓冲区填满或刷新时才写入底层写入器。 [https://hajsoftutorial.com/java/wp-content/uploads/2018/04/bufferedoutput.gif](https://hajsoftutorial.com/java/wp-content/uploads/2018/04/bufferedoutput.gif)

更多[https://hajsoftutorial.com/java-bufferedwriter/](https://hajsoftutorial.com/java-bufferedwriter/)

# visual-studio-2010 - 有没有办法自动修复 .csproj 文件中的版本化引用？

> ID：12350250
> 
> 赞同：1
> 
> 时间：2012-09-10T10:57:36.127
> 
> 标签：visual-studio-2010, msbuild, csproj

请问有谁知道是否有办法自动修复包含版本化引用的 Visual Studio 2010 .csproj 文件（例如，通过删除版本）？上下文是我正在尝试构建一些第三方代码的 1000 个历史提交，并且对于某些提交，.csproj 文件包含不应该引用的版本，例如：

```
[ERROR] Found versioned reference on line: <Reference Include="<...>, Version=1.2.34567.89012, Culture=neutral, PublicKeyToken=<...>, processorArchitecture=MSIL" /> in <...>. Versioned references are not allowed. 
```

我可以想象编写一个脚本来执行此操作，但这似乎有点痛苦（特别是因为该脚本仅对这一特定任务有用，并且之后无用） - 我理想地寻找例如`msbuild`我可以运行的命令.csproj 文件来修复它们。有没有这样的机会存在（不太有希望）？:) 显然，为 1000 次提交手动修复 .csproj 文件不是一种选择，所以看起来就是这样或编写脚本。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-15T00:19:25.763

`System.Xml.Linq`与通过或使用 some搜索现有任务相比，将一次性控制台应用程序放在一起会更快`Microsoft.Build.Evaluation`，类似于 [解决不正确的项目引用 GUID](https://stackoverflow.com/questions/10817857/resolving-incorrect-project-reference-guids)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-14T19:26:30.060

如果您倾向于使用 msbuild 执行此操作并安装了 .net 4.0 - 您可以使用 C# 快速编写自己的内联任务。我发布[了 msbuild 内联任务的示例](https://gist.github.com/3724080)及其[用法](https://gist.github.com/3724103)。

如果您不限于 msbuild - 我认为 powershell 脚本可以在几行中完成相同的工作。

# ruby - 使用 libxml-ruby 解析 xml 文件

> ID：12350257
> 
> 赞同：1
> 
> 时间：2012-09-10T10:58:11.867
> 
> 标签：ruby, libxml-ruby

我正在使用 rails 2.3.9、ruby 1.9.3、rubygems 1.8.24 和 windows 7 Ultimate

我安装了 libxml-ruby gem，希望得到我想要的输出。我有一个总共超过 150 个节点的 xml 文件，我想要的只是获取每个节点的值。

```
require 'xml'
my_file = 'invoice3.xml'
parser = XML::Parser.file(my_file)
document = parser.parse
terminalId_node = document.find('//terminalId').first
terminalId = terminalId_node.content
puts terminalId 
```

我已经能够得到 terminalId 的值，但我想循环文件以节省编码时间。任何帮助，将不胜感激。

更新：示例 XML 输入 这只是实际 xml 文件的一部分

```
<invoice>
<terminalId>68</terminalId>
<transId>8</transId>
<docDate>2012-08-06 18:55:57</docDate>
<status>P</status>
<siteId>19</siteId>
<transCode>REL</transCode>
<typeCode>POS</typeCode>
<TotalQuantity>1</TotalQuantity>
<VATRate>12</VATRate>
<amountGrossVAT>0</amountGrossVAT>
<amountGrossNonVAT>100</amountGrossNonVAT>
<amountGrossZeroRated>0</amountGrossZeroRated>
<amountGross>100</amountGross>
<amountItemDiscount>0</amountItemDiscount>
<amountOverallDiscount>0</amountOverallDiscount>
<percentOverAllDiscount>0</percentOverAllDiscount>
<OverallDiscountText></OverallDiscountText>
<amountSeniorCitizenDiscount>0</amountSeniorCitizenDiscount>
<AmountOriginalSeniorCitizenDiscount>0</AmountOriginalSeniorCitizenDiscount>
<AmountCustomerPromoDiscount>0</AmountCustomerPromoDiscount>
<amountHeaderDiscount>0</amountHeaderDiscount>
<percentHeaderDiscount>0</percentHeaderDiscount>
<invoice-details>
    <invoice-detail>    
    <amountTotalDiscount>0</amountTotalDiscount>
<percentTotalDiscount>0</percentTotalDiscount>
<amountNetVAT>0</amountNetVAT>
<amountNetNonVat>100</amountNetNonVat>
<amountNetZeroRated>0</amountNetZeroRated>
<amountNet>100</amountNet>
<AmountVatExempt>0</AmountVatExempt>
<amountDue>100</amountDue>
    <invoice-detail>
<invoice-details>
</invoice> 
```

我想通过迭代提取**所有数据。**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-11T14:24:52.793

以下行检索文档中的所有 terminalId 元素并返回包含其内容的数组：

```
contents = document.find('//terminalId').to_a.map(&:content) 
```

这相当于：

```
contents = document.find('//terminalId').to_a.map { |e| e.content } 
```

与您的示例相比，唯一的区别是我们不使用 first()，它只请求第一个找到的元素，而是使用 to_a() 来检索所有结果。

# jquery - jQuery UI 中可拖动对象的原始位置？

> ID：12350259
> 
> 赞同：2
> 
> 时间：2012-09-10T10:58:25.033
> 
> 标签：jquery, jquery-ui, jquery-ui-draggable, droppable

发生下降时，我需要恢复可拖动的原始位置：

```
$('.article').droppable( {

    drop: function(even, ui){

        // ui.draggable.???
    }
}); 
```

由于我的可拖动对象上有一个“revert:”invalid“属性，我假设原始位置存储在某个地方。我怎样才能找到它？

谢谢，

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-10T11:32:49.213

您可以使用：`ui.helper.position()`

## *[jsBin 演示](http://jsbin.com/atagax/2/edit)*

```
var startPos;
$( ".article" ).draggable({
    revert: "invalid",
    start: function(evt, ui){
        startPos = ui.helper.position();
    }
});

$(".parent").droppable({
    drop: function(evt, ui){
        // NOW RETRIEVE COORDINATES STORED BY THE DRAGGABLE :START
        var x = startPos.left;
        var y = startPos.top;
        alert(x+' '+y);
    }
}); 
```

# rest - WSO2 ESB 和 REST 服务安全性

> ID：12350260
> 
> 赞同：2
> 
> 时间：2012-09-10T10:58:26.300
> 
> 标签：rest, wso2, wso2esb, esb

我有几个必须通过 WSO2 ESB 使用的后端 REST 服务。我为后端使用基本授权标头。我已经在 ESB 中创建了该服务，当我通过 firefox RESTClient 插件调用它时它工作正常。这是配置：

```
<proxy name="ADocumentLibraryAuth" transports="https http" startOnLoad="true" trace="disable">
    <target>
        <inSequence>
            <property name="Authorization" expression="fn:concat('Basic ', base64Encode('xxx:xxx'))" scope="transport"/>
            <send>
                <endpoint name="test">
                    <address uri="http://xxxxxx:8080/alfresco/s/slingshot/datalists/lists/xx/xx/xx"/>
                </endpoint>
            </send>
        </inSequence>
        <outSequence>
            <send/>
        </outSequence>
    </target>
</proxy> 
```

现在我想通过 ESB 保护这个服务（例如使用 usernameToken 安全性）。我可以轻松启用此功能，但我不知道如何调用/使用此服务。我应该为此生成 wsdl 客户端并调用它吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T07:20:07.120

默认情况下，您创建的代理服务是 SOAP 服务，因此当您添加任何类型的 WS-Security 时，您可以通过使用 WSDL 生成客户端来调用它。WSDL 附加了应用的安全策略。

问候，/女娲

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-05T00:01:29.330

您几乎没有选择，例如使用代理作为 REST 适配器，但它具有最少的功能 init，但您可以轻松地将 REST EP 与 REST API 元素集成，这使您可以集成安全场景参考 [1]，以及如果您需要了解有关 REST API 功能的更多信息，请参阅 [2]

[1] [http://malalanayake.wordpress.com/2013/04/05/apply-oauth2-0-base-security-for-rest-endpoint-with-wso2esb-4-6-0-and-wso2is-4 -1-1-阿尔法/](http://malalanayake.wordpress.com/2013/04/05/apply-oauth2-0-base-security-for-rest-endpoint-with-wso2esb-4-6-0-and-wso2is-4-1-1-alpha/)

[2] [http://docs.wso2.org/wiki/display/ESB460/REST+Support](http://docs.wso2.org/wiki/display/ESB460/REST+Support)

# iphone - 如何将转换后的 UIImageview 的图像分配给其他一些 UIImageview？

> ID：12350262
> 
> 赞同：-1
> 
> 时间：2012-09-10T10:58:30.307
> 
> 标签：iphone, uiimageview, uiimage, cgaffinetransform

在我的应用程序中，我应用了不同类型的转换，例如向左旋转、向右旋转、垂直翻转、水平翻转到`UIImageview`. 应用这些操作后，位置发生了`UIImageview`变化。我希望将此更改后的图像分配给其他视图，而不是原始图像。当我分配`imageview.image`给另一个视图时，它正在分配原始图像。我该如何纠正这个问题？

正如大卫所建议的那样。我正在为左旋转应用以下代码

```
//rotation left;
        int x1=ivPhoto.frame.origin.x;
        int y1=ivPhoto.frame.origin.y;

        UIGraphicsBeginImageContext(ivPhoto.image.size);

        CGAffineTransform transform = CGAffineTransformMakeRotation(DEGREES_TO_RADIANS(degrees2));        

        CGContextConcatCTM(UIGraphicsGetCurrentContext(), transform);
         [ivPhoto.image drawInRect:CGRectMake(x1,y1,ivPhoto.frame.size.width, ivPhoto.frame.size.height)];

        UIImage *newImage = UIGraphicsGetImageFromCurrentImageContext();

        ivPhoto.image=newImage; 
```

但我没有得到旋转的图像。图像处于原始位置

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T11:06:32.680

转换完成后，像这样捕获更新的图像：

```
CGSize fittingSize = yourImgView.frame.size;
UIGraphicsBeginImageContext(fittingSize);
[yourImgView.layer renderInContext:UIGraphicsGetCurrentContext()];
UIImahe *capImage = UIGraphicsGetImageFromCurrentImageContext();
UIGraphicsEndImageContext(); 
```

现在将这些 capImage 分配给另一个具有转换图像的 UIImageView

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T11:07:38.513

您应该在上下文中进行更改，并在完成后将其保存到 UIImage 中。然后在 imageview 中设置该图像：

```
UIGraphicsBeginImageContext(sizeOfImage);

    CGAffineTransform transform = CGAffineTransformIdentity; 
```

等等等等

```
 CGContextConcatCTM(UIGraphicsGetCurrentContext(), transform);
[imageView.image drawInRect:CGRectMake(position.x, position.y, size.width, size.height)];
UIImage *newImage = UIGraphicsGetImageFromCurrentImageContext(); 
```

# php - PHP PDF 生成器建议

> ID：12350265
> 
> 赞同：10
> 
> 时间：2012-09-10T10:58:47.780
> 
> 标签：php, pdf

任何人都可以建议与 PHP 一起使用的最佳 PDF 生成器类/库吗？最好是维护的。

我知道这是以下问题的重复，但是，接受的答案已超过 3 年，我想知道从那时起答案是否发生了变化。

[哪一个是 PHP 的最佳 PDF-API？](https://stackoverflow.com/questions/1648715/best-pdf-generator-in-php-mpdf-or-fpdf)

谢谢

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-10T11:08:08.233

试试 TCPDF，有很好的功能 [http://www.tcpdf.org/examples.php](http://www.tcpdf.org/examples.php)

也是简单的 HTML 到 PDF 转换器 API（PHP、C#、ASP.net C#、ASP VB.net、JAVA、...）

来自“PDF CROWD” [http://pdfcrowd.com/html-to-pdf-api/](http://pdfcrowd.com/html-to-pdf-api/)

使用非常简单，但我认为即使他们提供免费的测试帐户，这个 API 也可能需要购买..

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-08-30T19:33:05.467

你试过[http://www.PDFnow.com](http://www.PDFnow.com)吗？

提供强大的模板引擎，并且非常易于使用。

支持复杂的布局、多页布局、分布不同页面的发票、页码、页眉、页脚等。绝对比 fpdf 好得多。

您可以通过以下方式简单地将其集成到您的 PHP 代码中：

```
generatePdf(<templateName>, <ParameterArray>); 
```

非常简单。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-28T05:29:59.407

看看[http://wkhtmltopdf.org/](http://wkhtmltopdf.org/)使用 WebKit 引擎将 HTML 转换为 PDF。它可以很容易地从 PHP 中使用。例如，Symfony2 有一个捆绑包：http: [//knpbundles.com/KnpLabs/KnpSnappyBundle](http://knpbundles.com/KnpLabs/KnpSnappyBundle)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-09-24T12:29:35.940

最好的一个是**TCPDF**

[http://www.tcpdf.org/](http://www.tcpdf.org/)

从不使用**DOMPDF**

# jquery - 使用jquery延迟回调函数

> ID：12350274
> 
> 赞同：0
> 
> 时间：2012-09-10T10:59:21.617
> 
> 标签：jquery, html

嗨，我使用 jquery 回调函数来删除类，现在我想用这个函数附加延迟。我的功能是

```
$(function(){
$('a').click(function(){
$('.mydiv').find('.div1').addClass('jmnew').show('slow', function(){
$('.mydiv').find('.jmnew').removeClass('jmnew');
});
});
}); 
```

HTML//

```
<div class="mydiv">
<div class="div1" style="display:none">
abc
</div>
<a href="#">click me</a>
</div> 
```

[小提琴](http://jsfiddle.net/QAHYW/)链接

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T11:08:27.043

你应该使用`setTimeout`

```
$(function(){
    $('a').click(function(){
        $('.mydiv').find('.div1').addClass('jmnew').show('slow', function(){
            setTimeout(function() {
                $('.mydiv').find('.div1').removeClass('jmnew')
            },2000);
        });
    });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T11:02:59.900

您将需要使用`setTimeout`函数，因为 jQuery`delay()`仅适用于队列效果。

```
$(function() {

    $('a').click(function() {
        $('.mydiv').find('.div1').addClass('jmnew').show('slow', function() {

            setTimeout(function() {
                $('.mydiv').find('.jmnew').removeClass('jmnew')
            }, 1000);
        })
    })
})​ 
```

见[演示](http://jsfiddle.net/uqkLc/)。

# android - 从 Activity 外部更新数据和发出通知

> ID：12350275
> 
> 赞同：0
> 
> 时间：2012-09-10T10:59:25.160
> 
> 标签：android, service, notifications, autostart

我想解决以下问题：

应用程序`WebView`通过`Activity`.

问题是：即使用户可能还没有再次启动应用程序，我如何不断检查更新？这是否可能，因为我认为您无法在手机启动或类似的东西时启动服务 - 如果你们中有任何想法，我会很高兴听到它。

干杯!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T11:13:59.340

没错，你回答了我们自己的问题。你可以为它服务。是的，服务可以在启动时启动。您需要做的就是创建一个`BroadcastReceiver`并注册它来接收`ACTION_BOOT_COMPLETED`。您还需要`RECEIVE_BOOT_COMPLETED`许可。例子 ：

**显现：**

```
<receiver android:name=".MyReceiver " android:enabled="true" android:exported="false">
    <intent-filter>
        <action android:name="android.intent.action.BOOT_COMPLETED"/>
    </intent-filter>
</receiver> 
```

**代码：**

```
public MyReceiver extends BroadcastReceiver {   

    @Override
    public void onReceive(Context context, Intent intent) {

        Intent myIntent = new Intent(context, YourService.class);
        context.startService(myIntent);
    }
} 
```

# c# - 将多行组合成对象属性

> ID：12350277
> 
> 赞同：0
> 
> 时间：2012-09-10T10:59:43.350
> 
> 标签：c#, asp.net-mvc, json, linq

我有一个 SQL 查询，它从使用日志中返回行，例如：

```
ActionID    ActionType      ActionDetail    ActionDetailValue
1           SEARCH          Query           jones
1           SEARCH          ResultCount     156
2           DOCUMENT_VIEW   Title           All About Mister Jones
2           DOCUMENT_VIEW   DocumentID      EKDJF34 
```

即，用户采取的每个操作可能有多行，其中包含有关所采取操作的不同详细信息。目前，这在 C# 中表示为：

```
IEnumerable<ActionItem>

public class ActionItem
{
    public int ActionID { get; set; }
    public string ActionType { get; set; }
    public string ActionDetail { get; set; }
    public string Value { get; set; }
} 
```

我需要以某种方式组合具有相同 id 和类型的行。最终，我将希望返回一个 JSON 对象，如下所示：

```
var trailItems = {"trailitems": [
    {"ActionID": "1", "ActionType": "SEARCH", "Query": "jones", "ResultCount" : "156"},
    {"ActionID": "2", "ActionType": "DOCUMENT_VIEW", "Title": "All About Mister Jones", "DocumentID" : "EKDJF34"}
]}; 
```

看起来像是 LINQ 的工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T12:17:26.930

我不会过多地开发 Json 部分，我认为当您拥有足够好的数据结构时，您将能够处理它。你可以试试这个：

```
var grouped = 
    from a in actions
    group a by new { a.ActionID, a.ActionType } 
    into g
    select new 
    { 
        g.Key.ActionID, 
        g.Key.ActionType, 
        Values = 
            (from x in g
             select new KeyValuePair<string, string>(x.ActionDetail, x.Value))
            .ToDictionary()
    }; 
```

如果您尝试从中构建 json 而不进行进一步处理，您将获得如下内容：

```
[
    {"ActionID":1,"ActionType":"SEARCH","Values":{"Query":"jones","ResultCount":"156"}},
    {"ActionID":2,"ActionType":"DOCUMENT_VIEW","Values":{"Title":"All About Mister Jones","DocumentID":"EKDJF34"}}
] 
```

这不完全是您正在寻找的东西，但它非常接近，也许处理起来会更好，因为它将“键”与值分开。

# php - 在 PHP 中使用编码调用未定义的函数

> ID：12350278
> 
> 赞同：-5
> 
> 时间：2012-09-10T10:59:54.800
> 
> 标签：php

我收到`Call to undefined function basr64_encode()`PHP 错误，是否缺少一些库？或任何扩展？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-10T11:00:59.497

它`base64_encode`不是 basr64_encode [http://php.net/manual/en/function.base64-encode.php](http://php.net/manual/en/function.base64-encode.php)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-10T11:01:36.720

我认为您的意思是[base64_encode](http://php.net/manual/en/function.base64-encode.php)。

# android - 如何从手机图库中读取图像文件

> ID：12350280
> 
> 赞同：0
> 
> 时间：2012-09-10T10:59:58.380
> 
> 标签：android, android-layout, android-intent, android-widget

我对这段代码有疑问，实际上我试图从手机的图库中仅读取文件名 image2.jpg image3.jpg ... 等等，但是这段代码给了我错误

这是代码：

```
 public static Uri getRandomImage(ContentResolver resolver) {

    String secondo = "image2.jpg";
    String terzo = "image3.jpg";
    String quarto = "image4.jpg";
    String quinto = "image5.jpg";
    String sesto = "image6.jpg";
    String settimo = "image7.jpg";
    String ottavo = "image8.jpg";

    String[] projection = new String[] {
        BaseColumns._ID,
        MediaColumns.DATA,

    };

    Uri uri = Media.EXTERNAL_CONTENT_URI;

    Cursor cursor =  Media.query(resolver, uri, projection, null, MediaColumns._ID);
    if (cursor == null || cursor.getCount() <= 0) {
            return null;
    }

    cursor.moveToPosition(new Random().nextInt(cursor.getCount()));

    String completefilepath = cursor.getString(cursor.getColumnIndex(MediaColumns.DATA));
    if(completefilepath == secondo || completefilepath == terzo || completefilepath == quarto ||
            completefilepath == quinto || completefilepath == sesto || completefilepath == settimo ||
            completefilepath == ottavo){

        string = cursor.getString(1);

    }
    return Uri.withAppendedPath(uri, string);
} 
```

这是 LOGCAT：

```
E/AndroidRuntime(9147): FATAL EXCEPTION: main
E/AndroidRuntime(9147): java.lang.IllegalStateException: Unknown URL: content://media/external/images/media/null
E/AndroidRuntime(9147):     at android.os.Parcel.readException(Parcel.java:1268)
E/AndroidRuntime(9147):     at android.database.DatabaseUtils.readExceptionFromParcel(DatabaseUtils.java:160)
E/AndroidRuntime(9147):     at android.database.DatabaseUtils.readExceptionWithFileNotFoundExceptionFromParcel(DatabaseUtils.java:125)
E/AndroidRuntime(9147):     at android.content.ContentProviderProxy.openAssetFile(ContentProviderNative.java:538)
E/AndroidRuntime(9147):     at android.content.ContentResolver.openAssetFileDescriptor(ContentResolver.java:467)
E/AndroidRuntime(9147):     at android.content.ContentResolver.openFileDescriptor(ContentResolver.java:380)
E/AndroidRuntime(9147):     at it.bisemanuDEV.slidepuzzle.TileView.getImageFromUri(TileView.java:559)
E/AndroidRuntime(9147):     at it.bisemanuDEV.slidepuzzle.TileView.newGame(TileView.java:156)
E/AndroidRuntime(9147):     at it.bisemanuDEV.slidepuzzle.SlidePuzzleActivity.onOptionsItemSelected(SlidePuzzleActivity.java:377)
E/AndroidRuntime(9147):     at android.app.Activity.onMenuItemSelected(Activity.java:2762)
E/AndroidRuntime(9147):     at com.android.internal.policy.impl.PhoneWindow.onMenuItemSelected(PhoneWindow.java:730)
E/AndroidRuntime(9147):     at com.android.internal.view.menu.MenuItemImpl.invoke(MenuItemImpl.java:143)
E/AndroidRuntime(9147):     at com.android.internal.view.menu.MenuBuilder.performItemAction(MenuBuilder.java:855)
E/AndroidRuntime(9147):     at com.android.internal.view.menu.IconMenuView.invokeItem(IconMenuView.java:532)
E/AndroidRuntime(9147):     at com.android.internal.view.menu.IconMenuItemView.performClick(IconMenuItemView.java:122)
E/AndroidRuntime(9147):     at android.view.View$PerformClick.run(View.java:8819)
E/AndroidRuntime(9147):     at android.os.Handler.handleCallback(Handler.java:603)
E/AndroidRuntime(9147):     at android.os.Handler.dispatchMessage(Handler.java:92)
E/AndroidRuntime(9147):     at android.os.Looper.loop(Looper.java:123)
E/AndroidRuntime(9147):     at android.app.ActivityThread.main(ActivityThread.java:4627)
E/AndroidRuntime(9147):     at java.lang.reflect.Method.invokeNative(Native Method)
E/AndroidRuntime(9147):     at java.lang.reflect.Method.invoke(Method.java:521)
E/AndroidRuntime(9147):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
E/AndroidRuntime(9147):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
E/AndroidRuntime(9147):     at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T11:15:38.400

```
Intent photoPickerIntent = new Intent(Intent.ACTION_PICK);
                photoPickerIntent.setType("image/*");
                startActivityForResult(photoPickerIntent, int requestCode); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T11:21:54.837

您可以参考此内容并根据需要进行更改！

XML::

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:orientation="vertical"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent">
    <ImageView
        android:id="@+id/imgView"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_weight="1"></ImageView>
    <Button
        android:id="@+id/buttonLoadPicture"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_weight="0"
        android:text="Load Picture"
        android:layout_gravity="center"></Button>
</LinearLayout> 
```

类文件::

```
import android.app.Activity;
import android.content.Intent;
import android.database.Cursor;
import android.graphics.BitmapFactory;
import android.net.Uri;
import android.os.Bundle;
import android.provider.MediaStore;
import android.view.View;
import android.widget.Button;
import android.widget.ImageView;

public class ImageGalleryDemoActivity extends Activity {

    private static int RESULT_LOAD_IMAGE = 1;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        Button buttonLoadImage = (Button) findViewById(R.id.buttonLoadPicture);
        buttonLoadImage.setOnClickListener(new View.OnClickListener() {

            @Override
            public void onClick(View arg0) {

                Intent i = new Intent(
                        Intent.ACTION_PICK,
                        android.provider.MediaStore.Images.Media.EXTERNAL_CONTENT_URI);

                startActivityForResult(i, RESULT_LOAD_IMAGE);
            }
        });
    }

    @Override
    protected void onActivityResult(int requestCode, int resultCode, Intent data) {
        super.onActivityResult(requestCode, resultCode, data);

        if (requestCode == RESULT_LOAD_IMAGE && resultCode == RESULT_OK && null != data) {
            Uri selectedImage = data.getData();
            String[] filePathColumn = { MediaStore.Images.Media.DATA };

            Cursor cursor = getContentResolver().query(selectedImage,
                    filePathColumn, null, null, null);
            cursor.moveToFirst();

            int columnIndex = cursor.getColumnIndex(filePathColumn[0]);
            String picturePath = cursor.getString(columnIndex);
            cursor.close();

            ImageView imageView = (ImageView) findViewById(R.id.imgView);
            imageView.setImageBitmap(BitmapFactory.decodeFile(picturePath));

        }

    }
} 
```

# qt - 如何从 matlab 调用 Qtproject？

> ID：12350282
> 
> 赞同：2
> 
> 时间：2012-09-10T11:00:11.620
> 
> 标签：qt, matlab

我在 matlab 中有一个函数，它编写了我在我的 qt 项目中使用的 file.txt。

所以，

当我得到一个使用 unix() 运行的 qt 编译可执行文件时，我有一个 Matlab 文件，但是我收到了一个错误。

编码：

```
unix('/home/matt/Desktop/PlaneVolumeFinal/PlaneVolumeGui'); 
```

错误：

```
/home/matt/Desktop/PlaneVolumeFinal/PlaneVolumeGui: symbol lookup error: /home/matt/Desktop
/PlaneVolumeFinal/PlaneVolumeGui: undefined symbol: _ZN9QListData7detach3Ev 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-12T17:39:37.410

正如@grungetta 所指出的，问题可能与MATLAB 本地库路径没有看到您的Qt 库有关，例如`libQtMultimedia.so`，它通常应该在任何shell 会话中通过`LD_LIBRARY_PATH`var 可见的路径中。

解决此问题的一种方法是`LD_LIBRARY_PATH`在 MATLAB 运行会话中显式设置 from 的值（如果需要继续，则重新存储它）。您的 MATLAB 脚本的示例命令集可能是：

```
%*** save local (MATLAB's) LIBRARY PATH
libPathLocal = getenv('LD_LIBRARY_PATH');  

%*** set your global LIBRARY PATH 
PATH_LD_LIBRARY = '/usr/lib/' % or any string containing library files required 
setenv('LD_LIBRARY_PATH', PATH_LD_LIBRARY); 

%*** call binary through 'unix' or 'system'
system('/home/matt/Desktop/PlaneVolumeFinal/PlaneVolumeGui'); 

%*** restore session's MATLAB's library path
setenv('LD_LIBRARY_PATH', libPathLocal); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T18:28:28.070

我不完全确定您想以何种方式*调用 Qt 项目*；但是，MATLAB[系统](http://www.mathworks.com/help/techdoc/ref/system.html)命令可能会有所帮助。该命令用于执行操作系统命令并返回结果。

因此，如果您只是想从 MATLAB 启动一个可执行文件，这可能就是您想要的。

此外，[dos](http://www.mathworks.com/help/techdoc/ref/dos.html)和[unix](http://www.mathworks.com/help/techdoc/ref/unix.html)是两个相关的 MATLAB 命令，根据您的情况可能更合适。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-13T09:39:34.913

我没有任何使用 Matlab 的经验，但这是我的 2 美分。

1.  If /home/matt/Desktop/PlaneVolumeFinal/PlaneVolumeGui works OK from command prompt then it seems that MatLab is not able to find the libQtCore.so (I am not exactly sure about how the library is named, but I am referring to QtCore library). In that case copy the Qt's Core library to one of the MatLab's search locations and try. If it gives you same error from the command prompt then it means that Qt's libraries are not in search path. May be you can add PATH_TO_QTLIBS in LD_LIBRARY_PATH.

2.  One other reason could be that you might have more than one versions of Qt on your system and the loader is trying to reference a different version when you try running the application.

Hope this helps.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-13T13:43:12.250

It could be a problem with library versions. The binary was compiled with a QT version different from the QT on system? How many library versions are in system? What output gives when executing "ldd /home/matt/Desktop/PlaneVolumeFinal/PlaneVolumeGui"?

# java - 使用 gson 解析 Json，其中 ID 是整数

> ID：12350284
> 
> 赞同：0
> 
> 时间：2012-09-10T11:00:21.837
> 
> 标签：java, android, json, youtube, gson

我想用 Java 解析以下 Json 文件。但我无法解析它，因为标签是一个整数。请提出一种解析以下数据的方法：

```
content:
{ 
    1: "rtsp://v6.cache3.c.youtube.com/CiILENGUgZ2aWRlb3MM/0/0/0/video.3gp",
    5: "https://www.youtube.com/v/VWDc9oyBj5Q?version=3&f=videos&app=youtube_gdata",
    6: "rtsp://v8.cache7.c.youtube.com/CiILENZ2aWRlb3MM/0/0/0/video.3gp"
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T11:25:00.163

如果您在尝试解析它的对象中创建如下字段，会发生什么情况：

```
@SerializedName("1") 
public String number_1; 
```

我假设你使用 gson。

# php - 上移 Yii 站点后出现禁止错误

> ID：12350286
> 
> 赞同：0
> 
> 时间：2012-09-10T11:00:23.450
> 
> 标签：php, yii, http-status-code-403

我不得不将我所有的网站都移到它的父网站上。改动前：

```
/
/yii
/new
    /css
    /js
    /img
    /protected
    /... 
```

在此更改之后：

```
/
/yii
/css
/js
/img
/protected
/... 
```

我更改了 index.php 文件以指向 yii 的正确路径。但是，当我调用任何控制器时，它现在会显示此错误：

> **禁止的**
> 
> 您无权访问此服务器上的 /admin。

其中 /admin 可以是我站点中的任何控制器或模块。我的 .htaccess，现在也是 root，如下：

```
RewriteEngine on

# if a directory or a file exists, use it directly
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d

# otherwise forward it to index.php
RewriteRule . index.php 
```

在我向上移动网站之前，它运行良好。有人遇到过这种情况吗？感谢您抽出宝贵时间。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T19:57:10.203

我在这里做了一些测试，一切对我来说都很好。

也许您应该尝试启用日志记录以获取有关此限制的更多信息。此外，您应该检查您的 Apache 指令`AllowOverride`是否设置`All`为根目录

[http://www.yiiframework.com/doc/blog/1.0/en/final.logging](http://www.yiiframework.com/doc/blog/1.0/en/final.logging)

# php - yii-rights 模块表表示

> ID：12350288
> 
> 赞同：0
> 
> 时间：2012-09-10T11:00:39.607
> 
> 标签：php, authentication, yii, yii-extensions

我已经安装了[yii-rights](http://www.yiiframework.com/extension/rights/)模块。我试图了解模块创建的每个表的作用。在我看来

*   tbl_authitem：存储角色、任务和操作的内容。
*   tbl_authitemchild：存储角色、任务和操作之间的关系。
*   tbl_authassignment：存储分配给用户的角色、任务和操作。

但是，我不知道表 tbl_rights 的作用。任何人都可以对此有所了解吗？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T10:37:32.100

前三个表是 Yii RBAC 的标准表。“权限”是权限模块的内部表。显然它在界面中记录了项目的重量，但每当我使用权利时，它总是保持空白。它应该对管理授权没有任何影响，因此您可以忽略它。

# php - 更好的代码建议？

> ID：12350291
> 
> 赞同：0
> 
> 时间：2012-09-10T11:00:54.677
> 
> 标签：php, oop

有人可以让我的代码更好/更简单吗？我认为现在编码很糟糕。

我想调用一个`INSERT MYSQLI`命令函数如下：

```
DatabaseHandler::__i('TABLENAME', array('username' => 'foobar', 'password' => 'world')); 
```

我现在正在使用它，但它不起作用，我认为有更好的机会。

```
public function __i($table, $arr) { $c=$this->connection;
   foreach ( $arr as $name => $val):
      $param1.=$name . ",";
      $param2.="?,";
   endforeach;

   $PARAM1 = substr_replace($param1, '', -1);
   $PARAM2 = substr_replace($param2, '', -1);

   $query = 'INSERT INTO '.$table.' ('.$PARAM1.') VALUES ('.$PARAM2.')';

   foreach ( $arr as $name => $val):
    if ( is_int($val)) :
         $param = 'i';
      endif;

      if ( is_string($val)) :
         $param = 's';
      endif;

      if ( is_double($val)) :
         $param = 'd';
      endif;
      $binds.=$param;
      $values.="'".$arr[$name]."',";

    endforeach;

    $values = substr_replace($values, '', -1);

   if ( $s = $c->prepare($query)):

      $args = $binds + $values;
      call_user_func_array(array($s, 'bind_param'), array($binds, $values));
      $s->execute();
      $s->close();
   endif;

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T11:20:14.503

很难说什么不起作用，**你应该自己找出来**，但我会这样写：

```
<?php

/**
 * Prepares and executes an 'INSERT' query
 * 
 * @param string $table
 * @param array $arr
 */
public function __i( $table, $arr ) {

    $c = $this -> connection;

    foreach ( $arr as $name => $val ) {
        $param1 .= $name . ",";
        $param2 .= "?,";
    }

    $PARAM1 = substr_replace( $param1, '', -1 );
    $PARAM2 = substr_replace( $param2, '', -1 );

    $query = 'INSERT INTO ' . $table . ' (' . $PARAM1 . ') VALUES (' . $PARAM2 . ')';

    foreach ( $arr as $name => $val ) {

        switch ( gettype( $val ) ) {
            case 'integer': $param = 'i'; break;
            case 'string': $param = 's'; break;
            case 'double': $param = 'd'; break;
        }

        $binds .= $param;
        $values .= "'" . $arr[$name] . "',";

    }

    $values = substr_replace( $values, '', -1 );

    if ( $s = $c -> prepare( $query ) ) {

        $args = $binds + $values;
        call_user_func_array( array( $s, 'bind_param' ), array( $binds, $values ) );
        $s -> execute();
        $s -> close();
    }

}

?> 
```

# java - 类型、属性、实例和值之间的关系

> ID：12350294
> 
> 赞同：2
> 
> 时间：2012-09-10T11:01:01.567
> 
> 标签：java, hibernate, database-design

我正在开发一个 Java 应用程序，它通过 Hibernate 将其数据存储在数据库中。

此应用程序的一个功能是定义模板（如类型等）以供重用。例如，类型具有属性，您可以创建具有属性值的类型的实例。

问题是，我不知道如何确保只能分配类型定义的属性值。在我的解决方案中存在导致问题的冗余，但我不知道如何删除它。

我目前的（和有问题的）方法如下所示：

```
@Entity
class Type
{
    @Id
    @Generated
    private Long id;

    @OneToMany(mappedBy="type")
    private List<Attribute> attributes;

    //...
}

@Entity
class Attribute
{
    @Id
    @Generated
    private Long id;

    @ManyToOne
    private Type type;

    //...
}

@Entity
class Instance
{
    @Id
    @Generated
    private Long id;

    @ManyToOne
    private Type type;

    //...
}

@Entity
class AttributeValue
{

    @Id
    @Embedded
    private ResourceAttributValueId id;

    @Column(name="val")
    private String value;

    //...
}

@Embeddable
public class ResourceAttributValueId implements Serializable
{
    @ManyToOne
    private ResourceStateImpl resource;

    @ManyToOne
    private ResourceAttributeImpl attribute;

    //...
} 
```

那里的类​​型定义是多余的：可以通过 AttributeValue->Attribute->Type 和 AttributeValue->Instance->Type 来访问类型

另一个想法是使用类型 + 属性名称作为属性的 id，使用实例 + 属性名称作为属性值的 id，但这并不能解决我的问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T11:29:21.873

像这样正确建模“菱形”依赖关系的关键是识别关系的使用：

![在此处输入图像描述](../Images/e8651cc1a60165583b7a8395c82cd5d5.png)

*（我冒昧地稍微重命名了你的实体，我认为这是一个更一致的命名方案。）*

请注意我们如何从钻石的顶部**迁移**到`TYPE_ID`两侧，一直到底部，然后将其**合并**到那里。因此，由于只有一个`ATTRIBUTE_INSTANCE.TYPE_ID`字段并且在两个 FK 中都涉及，因此我们永远不会有一个属性实例，其属性类型的类型与实例的类型不同。

虽然这避免了“不匹配”的属性，但它仍然不能确保属性实例的*存在*（如果您支持“必需属性”的概念），最好在应用程序级别执行。从理论上讲，您可以使用循环延迟 FK 在数据库级别强制执行它，但并非所有 DBMS 都支持它，我怀疑它是否能很好地与 ORM 配合使用。

不幸的是，我没有足够的 Hibernate 经验来回答这是否可以在那里映射以及如何映射。

也可以看看：

*   [从多个候选键中选择](https://stackoverflow.com/a/9082972/533120)
*   [如何在“菱形”关系系统中保持外键关系一致](https://stackoverflow.com/a/12299547/533120)

# tsql - 使用 Xquery 从 XMLAttribute 检索数据的性能问题

> ID：12350299
> 
> 赞同：0
> 
> 时间：2012-09-10T11:01:20.503
> 
> 标签：tsql, xquery-sql

我有一个历史表，其中包含主表的交易记录信息，在该表中我使用 XML 列来存储该交易信息。带有数据的表结构如下所示，

![表信息](../Images/87b01fce9637064c9e5aff05cc0aebd5.png)

在内容 XML 数据存储为 XML，如下所示。

```
 <Answers>
      <AnswerSet>
        <Answer questionId="ProductCode">S3404</Answer>
        <Answer questionId="ProductName">Parabolic Triple</Answer>
        <Answer questionId="LegacyOptionID" selectedvalue="1389">1389</Answer>
        <Answer questionId="LegacyContentID" selectedvalue="624">624</Answer>
        <Answer questionId="LegacyPageID" selectedvalue="355">355</Answer>
        <Answer questionId="LegacyParentID" selectedvalue="760">760</Answer>
     </AnswerSet>
    </Answers> 
```

在所有行中，结构相同，但答案节点中的数据不同，我想获取 ProductCode="S3404" 且 CreatedDate 为新的数据。

我创建了类似的查询

```
select n2.* from nodehistory n2 CROSS APPLY 
n2.content.nodes('Answers/AnswerSet') T(c) WHERE 
c.value('./Answer[@questionId="ProductCode"][1]','varchar(100)') ='J154' 
```

ProductCode 对每个 nodeid 都有唯一的数据，但是对于同一个 nodeid，这会返回多于一行，因为这是事务表，因此可以多次存储相同的 XML，为此需要像 Createddate desc 的 order 这样的条件，但执行此查询需要我认为由于 XML 处理需要更多时间。

我们可以先得到

```
Select Top 1 nodeid from NodeHistory order by CreatedDate desc 
```

然后搜索 XML 部分。

关于更合适的视图以获得更好的性能的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T13:59:30.927

如果您没有对 XML 数据做太多其他事情，那么 .exist 应该比 .value 更有效。我认为 BOL 中有关于此的说明。您还可以使用 sql:variable 使其更通用，例如：

```
declare @produceCode varchar(20) = 'S3404'

select n2.* 
from nodehistory n2 
    inner join ( select max(id) id from #nodehistory group by nodeId ) maxId ON n2.id = maxId.id
where n2.content.exist('Answers/AnswerSet/Answer[@questionId="ProductCode"][.=sql:variable("@produceCode")]') = 1 
```

我使用子查询将结果集限制为每个 nodeId 的 max(id)。您的要求可能略有不同，但您明白了。

在性能方面，XML 索引可以转换 SQL/XML 查询，但要付出一定的代价。对于存储，您将需要原始表大小的 2-5 倍，因此您必须用数据权衡它。如果您决定使用 XML 索引，那么 PROPERTY 索引应该有助于这种类型的查询，例如

```
-- create the primary XML index
CREATE PRIMARY XML INDEX xmlidx_nodehistory ON nodehistory(content)
GO

CREATE XML INDEX xmlprpidx_nodehistory ON nodehistory(content)
USING XML INDEX xmlidx_nodehistory FOR PROPERTY
go

declare @produceCode varchar(20) = 'S3404'

select n2.* 
from nodehistory n2 
    inner join ( select max(id) id from nodehistory group by nodeId ) maxId ON n2.id = maxId.id
where n2.content.exist('Answers/AnswerSet/Answer[@questionId="ProductCode"][.=sql:variable("@produceCode")]') = 1 
```

有关更多 SQL XML 性能调优想法，请参阅这些精彩文章：

SQL Server 2005 中 XML 数据类型的性能优化

[http://msdn.microsoft.com/en-us/library/ms345118.aspx](http://msdn.microsoft.com/en-us/library/ms345118.aspx)

SQL Server 2005 中的 XML 索引

[http://msdn.microsoft.com/en-us/library/ms345121(SQL.90).aspx](http://msdn.microsoft.com/en-us/library/ms345121(SQL.90).aspx)

# c++ - 这是在 std::vector 中存储、迭代和删除指针的好方法吗？

> ID：12350301
> 
> 赞同：0
> 
> 时间：2012-09-10T11:01:24.613
> 
> 标签：c++, pointers, functor, stdvector, erase-remove-idiom

```
#include <iostream>
#include <cstdlib>
#include <ctime>
#include <algorithm>
#include <vector>
using namespace std;

struct delete_ptr
{
    template<typename T>
    void operator()(T*& t)
    {
        delete t;
        t = 0;
    }
};

struct is_null_ptr
{
    template<typename T>
    bool operator()(T*& t)
    {
        return t == 0;
    }
};

struct A
{
    static void removeDead(A*& a)
    {
        if(a and a->dead)
            delete_ptr()(a);
    }

    static void killSome(A* a)
    {
        if(a and a->isDead() == false and rand()%100 == 0)
        {
            static int counter = 0;
            cout << "Kill___" << ++counter << endl;
            a->kill();
        }
    }

    static void reviveSome(A* a)
    {

        if(a and a->isDead() and rand()%3 == 0)
        {
            static int counter = 0;
            cout << "Revive___" << ++counter << endl;
            a->revive();
        }
    }

    A():dead(false)
    {

    }

    virtual ~A()
    {
        static int counter = 0;
        cout << "Dtor___" << ++counter << endl;
    }

    bool isDead(){return dead;}
    void kill(){dead = true;}
    void revive(){dead = false;}

    bool dead;
};

int main()
{
    srand(time(0));
    vector<A*> as;
    for(int i = 0; i < 200; ++i)
    {
        A* a = new A;
        as.push_back(a);
    }

    for_each(as.begin(),as.end(),A::killSome);
    for_each(as.begin(),as.end(),A::reviveSome);

    for_each(as.begin(),as.end(),A::removeDead);
    as.erase( std::remove_if(as.begin(),as.end(),is_null_ptr()),as.end());
    cout << as.size() << endl;

    for_each(as.begin(),as.end(),delete_ptr());
    as.clear();

    return 0;
} 
```

它分配它们，并打印正确的输出，但我不确定这是我正在做的正确事情。我只是想在向量中使用指针并在发生某种情况时删除它们，而不使用 boost 或 c++11。那么你怎么看呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T12:59:47.830

由于当前 STL (auto_ptr) 中存在的唯一智能指针不能在容器中使用，我会说你的方式在给定条件下是一种很好的方式。

但是，您可以考虑实现自己的 unique_ptr 或 shared_ptr。

PS：使用指针代替容器中的实际对象有很多原因，一个是多态性。另一个是实际对象已经存储在其他地方（想想已经存储对象的索引结构）。

# joomla - 如何在 joomla 2.5 中制作模块

> ID：12350303
> 
> 赞同：0
> 
> 时间：2012-09-10T11:01:26.127
> 
> 标签：joomla, module

我正在制作一个 joomla 网站我是 joomla 的新手，所以在工作中发现了一些问题。

我已经为我的 joomla 2.5 模板完成了滑块现在我有一个问题我必须制作三个我已经在下面给出的 html css 链接中制作的框

[http://uttaraclick.com/malta/](http://uttaraclick.com/malta/)

谁能告诉我这个问题的最佳解决方案是什么，我不知道模块是如何工作的，但我读到定制模块是可能的。

请帮忙

我已经读过这个[http://docs.joomla.org/Developing_a_Model-View-Controller_(MVC)_Component_for_Joomla!2.5__-_Part_01](http://docs.joomla.org/Developing_a_Model-View-Controller_(MVC)_Component_for_Joomla!2.5_-_Part_01) 和下一个

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-10T11:23:11.867

我个人认为最好的方法是为您的模板创建 3 个自定义模块位置，然后使用 3 个自定义 HTML 模块，允许您输入内容等等。

这也将允许您仅将模块分配给主页。

有关创建自定义模块位置的更多信息，请阅读以下内容：

[http://docs.joomla.org/How_do_you_add_a_new_module_position%3F](http://docs.joomla.org/How_do_you_add_a_new_module_position%3F)

* * *

要生成一个基本模块以节省您的时间，您可以试试这个：

[http://agjoomla.com/en/tools/mvc-module-generator.html](http://agjoomla.com/en/tools/mvc-module-generator.html)

确保选择 Joomla 1.6 版本，下载后打开 XML 文件并更改`version="1.6"`为`version="2.5"`

* * *

至于设计，没有什么不同。您可以为这些框分配一个类，然后在 css 文件中为该类赋予相同的样式。

希望这可以帮助。

# javascript - node.js/javascript/couchdb 视图到关联数组似乎不起作用

> ID：12350304
> 
> 赞同：0
> 
> 时间：2012-09-10T11:01:26.767
> 
> 标签：javascript, node.js, couchdb

我正在尝试在 node/couchdb/windows 堆栈上创建一个 webapp，但由于缺乏经验而感到非常痛苦。

在数据库中，有一个视图返回所有具有密码的用户。根据[博客](http://howtonode.org/bogart-couchdb)教程，我尝试通过节点代码访问视图。

每当我调查 users 或 users 变量的结构时，我都会得到一个未定义的对象。

对 getDatabase() 的调用已经在其他地方进行了测试，至少可以用于创建新文档。

```
function GetUser(login) 
{
    var users = GetUsers();
    return users[login];
}

function GetUsers() {
    var db = getDatabase();
    var usersByEmail = [];
    db.view("accounts", "password_by_email")
        .then(function (resp) {
            resp.rows.forEach(function (x) { usersByEmail[x.key] = x.value});
        });
    //usersByEmail['test'] = 'test';
    return usersByEmail; 
```

}

我知道在最终产品中使用非散列密码以及从数据库中读取所有用户都是禁止的——以防万一有人对此发表评论。

如果我访问视图的方式有问题：我正在使用名为“_design/accounts”的设计文档，视图名称为“password_by_email”。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T21:20:41.927

您的调用`db.view`是异步的，因此当您点击`return usersByEmail`对象时尚未填充。您根本无法从异步代码中返回值；您需要让它进行回调，以执行依赖于结果的代码。

# sql - 如何向 DB2 中的现有表添加 PK？

> ID：12350305
> 
> 赞同：0
> 
> 时间：2012-09-10T11:01:29.713
> 
> 标签：sql, db2

我面临一个问题。我已经在 DB2 中创建了一个表。

```
CREATE TABLE "DDL12"
(
 "D4_1" decimal(10,0),
 "D4_2" decimal(10,0),
); 
```

我正在尝试在此表上创建一个 PK：-

```
ALTER TABLE "DDL12" ADD CONSTRAINT "Key4" PRIMARY KEY ("D4_1"); 
```

但是在运行命令时，我收到错误说 D4_1 是 NULLABLE。

现在，我怎样才能在这张桌子上创建一个 PK？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T12:04:52.023

是的，这是因为您的数据库现在“可能”在该非 PK 列中具有 NULL 值的行。

因此，首先将列设置为 NOT NULL（+ 确保在所有行中具有唯一值），然后使用上面的命令设置主键。

您可以像这样将列更改为非 NULL：

```
ALTER TABLE "DDL12"
 MODIFY "D4_1"   decimal(10,0)     NOT NULL; 
```

# asp.net-mvc - 如何在 Telerik 网格中使用条件

> ID：12350308
> 
> 赞同：1
> 
> 时间：2012-09-10T11:01:45.987
> 
> 标签：asp.net-mvc, telerik-grid

我的 MVC 3.0 应用程序中有一个 telrik 网格。在网格中，我想根据日期禁用我的列之一。

```
{Html.Telerik().Grid(Model.PostedDocument)
.Name("PostedDocumentsGrid")
.HtmlAttributes(new { @class = "grid scroll-pane" }) 
.Columns(columns =>
{
columns.Bound(o => o.DocumentLabel).Title(ResourceHelper.GetMessage("Posted_DocumentName")).Template(@<text><a href="@Url.Action("DownloadDocument", "ConsentAndDocument", new { documentId = @item.DocumentId })">@item.DocumentLabel</a></text>).Width(180) 
```

我在模型中有一个属性，它从数据库中获取到期日期，如果到期日期小于或今天的日期已超过到期日期（即 DateTime.Now），则需要禁用上述列的链接或其中的数据列（即链接）需要被禁用，它不会被点击

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T11:51:35.963

```
.ClientTemplate("<#if(condition){#><a href=\"WaitingApprove/<#= LatestVersionId #>\">" + "if link" + "</a><# }
 else{#><a href=\"Edit/<#= Id #>\">" + "else link" + "</a> <# } #>") 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-28T12:55:48.877

```
 cols.Bound(col => col.isAvailable)
      .ClientTemplate("<# if(isAvailable) { #> in stock <#} else { #> no <# } #>")
      .Title("Available")
      .HtmlAttributes(new { @title="Is available now?" }); 
```

This is working and tested example.

# c# - 无法加载文件或程序集“__App_Code”或其依赖项之一

> ID：12350313
> 
> 赞同：1
> 
> 时间：2012-09-10T11:02:00.530
> 
> 标签：c#, asp.net, web-applications, .net-4.0

> 无法加载文件或程序集“__App_Code”或其依赖项之一。找到的程序集的清单定义与程序集引用不匹配。（来自 HRESULT 的异常：0x80131040）

我刚刚将我的网站项目转换为 Web 应用程序项目，但无法通过 IIS 或 Visual Studio 的开发服务器运行该网站，尽管它已成功构建...

两种情况都提示相同的错误。有人可以帮我吗？

我尝试将我的 App_Code 文件夹重命名为“CodeFiles”只是为了检查，但问题仍然存在。我也尝试清空 Temporary Internet Files 文件夹，但无济于事...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T05:22:20.833

我在[Aamir](https://stackoverflow.com/users/30341/aamir)的帮助下解决了这个问题。这很明显。该条目位于`csproj`__App_Code 的文件中。删除该条目有效...

# mysql - 插入 ... 在重复密钥更新时

> ID：12350314
> 
> 赞同：1
> 
> 时间：2012-09-10T11:02:04.550
> 
> 标签：mysql, insert-update

我正在使用 API 从不同的服务器获取记录并插入到我的本地数据库中，但是当特定字段说`apiserverID`重复时，我只想更新字段。我的问题是我的表结构为

*   我的主键
*   apiserverID
*   **……**
*   **......**
*   **......**
*   更新日期

现在我想要简单的程序来更新行，如果`apiserverID`是重复的。我知道的唯一解决方案是我必须检查（SELECT）密钥 apiserverID 是否存在，然后更新其他插入。但我不想为此进行编程，这在一个查询中是否可行

**编辑**：主要问题是 INSERT ... ON DUPLICATE KEY UPDATE 不适用于特定字段，它包括检查重复性的所有键

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-11T09:16:31.903

如果有一个**多列**唯一索引，则更新使用（似乎使用）更新查询中的（唯一索引的）所有列。

因此，如果`UNIQUE(a,b)`示例中的表存在约束，则 INSERT 等效于以下 UPDATE 语句：

`UPDATE table SET c=c+1 WHERE a=1 AND b=2;`

**（而不是“a=1 OR b=2”）**

但在你的情况下，它会按预期工作，因为第一个是你的主键，它永远不会与服务器重复，所以只有可以重复的东西是你的`apiserverID`，所以当发现重复时，它会更新行，否则总是一个新的插入被执行

# android - SDK 管理器未显示需要安装的软件包

> ID：12350322
> 
> 赞同：0
> 
> 时间：2012-09-10T11:02:26.843
> 
> 标签：android, sdk

我下载了 Android SDK Manager 最新版本并安装（Windows 32 位），然后我打开 SDK 管理器来安装开发应用程序所需的所有其他软件包，除了 SDK 管理器安装的 SDK 工具外，没有任何帮助。安装所有其他软件包？？注意：同样作为管理员，没有防火墙，也没有杀毒软件。（内网连接）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T14:39:55.053

如果您使用代理，您可以通过工具/选项在您的 SDK 管理器中设置它。但由于某种原因，如果您从 Eclipse 启动 SDK Manager，您将不会在工具菜单下找到“选项”，因此您必须从开始菜单或快捷方式启动 SDK Manager。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T06:22:27.143

我终于通过更改代理设置解决了我的 SDK Manager 问题，感谢大家的帮助。

# database - 使用 db2batch 的 db2 过程 SYSPROC.ADMIN_DROP_SCHEMA

> ID：12350323
> 
> 赞同：6
> 
> 时间：2012-09-10T11:02:31.150
> 
> 标签：database, db2

从 DB2 CMD 成功调用以下命令，

```
SYSPROC.ADMIN_DROP_SCHEMA('TESTSCHEMA', NULL, 'ERRORSCHEMA', 'ERRORTABLE') 
```

输出参数值

```
Parameter Name : ERRORTABSCHEMA
Parameter Value : TESTSCHEMA

Parameter Name : ERRORTAB
Parameter Value : ERRORTABLE

Return Status = 0 
```

但是当使用 db2batch 通过 Perl 脚本运行相同的命令时，会出现以下错误，

```
CLI error in preparing the SQL statement:
(-469): [IBM][CLI Driver][DB2/NT] SQL0469N  The parameter mode OUT or INOUT is n
ot valid for a parameter in the routine named "ADMIN_DROP_SCHEMA" with specific
name "ADMIN_DROP_SCHEMA" (parameter number "3", name "ERRORTABSCHEMA").  SQLSTAT
E=42886 
```

任何指针？仅在过去几天从事 DB2 工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2017-09-22T15:08:33.060

参数`ERRORTABSCHEMA`和`ERRORTAB`是 INOUT 变量，在使用它们之前需要声明它们。

您可以改为创建存储过程并调用存储过程：

```
CREATE OR REPLACE PROCEDURE sample.delete_schema() BEGIN
    declare varErrSchema varchar(128) default 'ERRORSCHEMA';
    declare varErrTable varchar(128) default 'ERRORTAB';
    call sysproc.admin_drop_schema ('SCHEMANAME', NULL, varErrSchema, varErrTable);
END@ 
```

然后可以调用存储过程调用sample.delete_schema()

# c# - 从 ReflectedType 获取枚举

> ID：12350325
> 
> 赞同：1
> 
> 时间：2012-09-10T11:02:33.990
> 
> 标签：c#, reflection

> **可能重复：**
> [通过反射获取枚举值](https://stackoverflow.com/questions/3565310/getting-enum-value-via-reflection)

有了`mytype.ReflectedType.GetFields()`我可以得到在 ac# 类中定义的常量。

如何在**运行时**`mytype.ReflectedType.XXX`使用我在 c# 类中定义的某个枚举？

 *** * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T11:08:17.787

枚举实际上并不是类的成员，它只是在类的范围内声明。您可以使用该`GetNestedType`方法获取在另一个内部声明的类型。例子：

```
public class Demo {
  public enum Values { Apha, Beta }
}

Type t = typeof(Demo).GetNestedType("Values"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T11:09:40.140

嗯，你可以试试

```
(int)((reflectedType.GetEnumValues()
                    .Zip(reflectedType.GetEnumNames(), (v, n) => new { v, n })
                    .Where(p => p.n == FieldName)
                    .Single()).v) 
```

这将为您提供枚举常量的数值。但是，您无法获得枚举值，因为这需要在编译时知道真正的枚举类型。**

# sql - 选择没有工作组的用户，只有活动用户

> ID：12350345
> 
> 赞同：1
> 
> 时间：2012-09-10T11:04:26.593
> 
> 标签：sql, oracle, oracle11g

我试图弄清楚如何选择所有没有`workgroup`集合的活动用户。

我有`user`带有 col `active`(1=true) 的表来查看用户是否处于活动状态。但是，一个用户在系统中可以有多个“角色”，每个角色都有一组设置。

`Workgroup`是 userrolesetting 中的一个设置，它的 ID 是 1000。我想获取所有缺少工作组或工作组为空的用户。

我试着去：

```
SELECT *
FROM user U
INNER JOIN userrole R
ON R.uid = U.uid
INNER JOIN userrolesetting S
ON R.rid = S.rid
WHERE U.active = 1 
```

这完全是胡说八道，但我真的很困惑如何攻击它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-10T11:16:52.717

尝试以下操作：

```
SELECT *
  FROM USER u
  INNER JOIN USERROLE r
    ON (r.UID = u.UID)
  LEFT OUTER JOIN USERROLESETTING s
    ON (s.RID = r.RID AND
        s.ID = 1000)  -- may be the wrong column name - change as needed
  WHERE u.ACTIVE = 1 AND
        s.RID IS NULL 
```

分享和享受。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T11:23:01.913

没有测试，但是这个怎么样：

```
select * from user u
where u.active = 1
and exists(select 'x' from userrole r
            where u.uid = r.uid
              and not exists(select 'x' from userrolesetting s
                          where r.rid = s.rid
                            and s.settingid = 1000)); 
```

我不知道您的数据模型，所以，我不确定您所说的“或工作组在哪里为空”是什么意思？

“工作组”是settingid = 1000的地方，对吗？

如果您可以显示所有三个表的完整描述，则可能更容易理解您所追求的。上面的查询应该返回所有的用户，这些用户的角色没有 userrolesettings 的 settingid=1000。

希望有帮助。

# c# - 如何在反应式扩展中避免这种竞争条件

> ID：12350347
> 
> 赞同：2
> 
> 时间：2012-09-10T11:04:34.007
> 
> 标签：c#, system.reactive

我在方法中有这样的代码：

```
ISubject<Message> messages = new ReplaySubject<Message>(messageTimeout);

public void HandleNext(string clientId, Action<object> callback)
{
    messages.Where(message => !message.IsHandledBy(clientId))
            .Take(1)
            .Subscribe(message =>
                       {
                           callback(message.Message);
                           message.MarkAsHandledBy(clientId);
                       });
} 
```

rx'y 编码它的方式是什么，以便在多个并发调用时不会发生`MarkAsHandledBy()`和之间的竞争？`IsHandledBy()``HandleNext()`

编辑：

这是用于长轮询。`HandleNext()`为每个 Web 请求调用。请求只能处理一条消息，然后返回给客户端。下一个请求接受下一条消息，依此类推。

完整的代码（当然仍在进行中）是这样的：

```
public class Queue
{
    readonly ISubject<MessageWrapper> messages;

    public Queue() : this(TimeSpan.FromSeconds(30)) {}

    public Queue(TimeSpan messageTimeout)
    {
        messages = new ReplaySubject<MessageWrapper>(messageTimeout);
    }

    public void Send(string channel, object message)
    {
        messages.OnNext(new MessageWrapper(new List<string> {channel}, message));
    }

    public void ReceiveNext(string clientId, string channel, Action<object> callback)
    {
        messages
            .Where(message => message.Channels.Contains(channel) && !message.IsReceivedBy(clientId))
            .Take(1)
            .Subscribe(message =>
                       {
                           callback(message.Message);
                           message.MarkAsReceivedFor(clientId);
                       });
    }

    class MessageWrapper
    {
        readonly List<string> receivers;

        public MessageWrapper(List<string> channels, object message)
        {
            receivers = new List<string>();
            Channels = channels;
            Message = message;
        }

        public List<string> Channels { get; private set; }
        public object Message { get; private set; }

        public void MarkAsReceivedFor(string clientId)
        {
            receivers.Add(clientId);
        }

        public bool IsReceivedBy(string clientId)
        {
            return receivers.Contains(clientId);
        }
    }
} 
```

编辑2：

现在我的代码如下所示：

```
public void ReceiveNext(string clientId, string channel, Action<object> callback)
{
    var subscription = Disposable.Empty;
    subscription = messages
        .Where(message => message.Channels.Contains(channel))
        .Subscribe(message =>
                   {
                       if (message.TryDispatchTo(clientId, callback))
                           subscription.Dispose();
                   });
}

class MessageWrapper
{
    readonly object message;
    readonly List<string> receivers;

    public MessageWrapper(List<string> channels, object message)
    {
        this.message = message;
        receivers = new List<string>();
        Channels = channels;
    }

    public List<string> Channels { get; private set; }

    public bool TryDispatchTo(string clientId, Action<object> handler)
    {
        lock (receivers)
        {
            if (IsReceivedBy(clientId)) return false;
            handler(message);
            MarkAsReceivedFor(clientId);
            return true;
        }
    }

    void MarkAsReceivedFor(string clientId)
    {
        receivers.Add(clientId);
    }

    bool IsReceivedBy(string clientId)
    {
        return receivers.Contains(clientId);
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T03:20:00.810

在我看来，你正在为自己做一场 Rx 噩梦。Rx 应该提供一种非常简单的方法来将订阅者连接到您的消息。

我喜欢这样一个事实，即你有一个自包含的类来保存你的`ReplaySubject`- 它可以阻止你的代码中的其他地方是恶意的并且`OnCompleted`过早地调用。

但是，该`ReceiveNext`方法没有为您提供任何删除订阅者的方法。至少是内存泄漏。您对客户端 ID 的跟踪`MessageWrapper`也是潜在的内存泄漏。

我建议您尝试使用这种功能，而不是`ReceiveNext`：

```
public IDisposable RegisterChannel(string channel, Action<object> callback)
{
    return messages
        .Where(message => message.Channels.Contains(channel))
        .Subscribe(message => callback(message.Message));
} 
```

这是非常 Rx 的。这是一个很好的纯查询，您可以轻松取消订阅。

由于`Action<object> callback`毫无疑问与我直接相关，因此`clientId`我会考虑将逻辑放置在其中以防止重复的消息处理。

现在你的代码是非常程序化的，不适合 Rx。似乎您还没有完全了解如何最好地使用 Rx。这是一个好的开始，但您需要更多地考虑功能（如在函数式编程中）。

* * *

如果您必须按原样使用您的代码，我建议您进行一些更改。

在`Queue`这样做：

```
public IDisposable ReceiveNext(
    string clientId, string channel, Action<object> callback)
{
    return
        messages
            .Where(message => message.Channels.Contains(channel))
            .Take(1)
            .Subscribe(message =>
                message.TryReceive(clientId, callback));
} 
```

并`MessageWrapper`摆脱`MarkAsReceivedFor`&`IsReceivedBy`并改为这样做：

```
 public bool TryReceive(string clientId, Action<object> callback)
    {
        lock (receivers)
        {
            if (!receivers.Contains(clientId))
            {
                callback(this.Message);
                receivers.Add(clientId);
                return true;
            }
            else
                return false;
        }
    } 
```

我真的不明白您为什么会有这种`.Take(1)`情况，但是这些更改可能会根据其原因减少竞争条件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-10T20:42:33.137

我不确定像这样使用 Rx 是一个好习惯。Rx 定义了流的概念，它要求没有并发通知。

也就是说，要回答您的问题，为了避免竞争条件，请在`IsReceivedBy`and`MarkAsReceivedFor`方法中放置一个锁。

至于更好的方法，您可以放弃整个处理业务，在接收请求时使用[ConcurrentQueue](http://msdn.microsoft.com/en-us/library/dd267265.aspx)和`TryDequeue`消息（您只是在做`Take(1)`- 这适合队列模型）。Rx 可以帮助您为每条消息提供 TTL 并将其从队列中删除，但您也可以在传入请求时执行此操作。

# mapping - 如何在自己的 extbase 扩展中映射 tt_content？

> ID：12350348
> 
> 赞同：0
> 
> 时间：2012-09-10T11:04:48.797
> 
> 标签：mapping, typo3, extbase

我得到了一个模型，它具有一些属性，并且与同一扩展中的第二个模型具有 1:1 的关系，我想将第二个模型完全映射到 tt_content。所以用户可以在我的第一个模型中插入一个 tt_content 对象。

BE没有问题。我可以从第一个模型中插入对象，并在其中插入一个 tt_content 对象。在数据库中，我的第一个模型得到了 tt_content 对象的 uid 所在的“内容”列，所以我认为一切都是正确的......

但是到了控制器……我什么也没得到……只是“内容”属性上的一个空值……

这就是我测试“内容”属性的方式：

```
$contentBoxes = $this->contentBoxRepository->findAll();
print(gettype($contentBoxes->current()->getContent())); 
```

它只返回“NULL”

aaaaaand 这里是关于第一个模型 whitch 包含 tt_content 对象的一些信息：

第一个模型：

```
class Tx_PlusbSlidingcontent_Domain_Model_ContentBox extends Tx_Extbase_DomainObject_AbstractEntity {

    /**
     * Content
     *
     * @var Tx_PlusbSlidingcontent_Domain_Model_Content
     */
    protected $content;

...........

    /**
     * Returns the content
     *
     * @return Tx_PlusbSlidingcontent_Domain_Model_Content $content
     */
    public function getContent() {
        return $this->content;
    }

    /**
     * Sets the content
     *
     * @param Tx_PlusbSlidingcontent_Domain_Model_Content $content
     * @return void
     */
    public function setContent(Tx_PlusbSlidingcontent_Domain_Model_Content $content) {
        $this->content = $content;
    }

...............
} 
```

第二种型号：

```
class Tx_PlusbSlidingcontent_Domain_Model_Content extends Tx_Extbase_DomainObject_AbstractEntity {

} 
```

第一个模型的 TCA 中的“内容”部分：

```
 'content' => array(
        'exclude' => 0,
        'label' => 'LLL:EXT:plusb_slidingcontent/Resources/Private/Language/locallang_db.xml:tx_plusbslidingcontent_domain_model_contentbox.content',
        'config' => array(
            'type' => 'inline',
            'foreign_table' => 'tt_content',
            'minitems' => 0,
            'maxitems' => 1,
            'appearance' => array(
                'collapseAll' => 0,
                'levelLinksPosition' => 'top',
                'showSynchronizationLink' => 1,
                'showPossibleLocalizationRecords' => 1,
                'showAllLocalizationLink' => 1
            ),
        ),
    ), 
```

在 TS 设置中，我在“持久性”中添加了这个：

```
classes {
         Tx_PlusbSlidingcontent_Domain_Model_Content {
             mapping {
                 tableName = tt_content
                 columns {
                 }
             }
         }
     } 
```

我只是不知道该配置中的错误在哪里......存储库/模型/任何东西都必须用第二个模型的对象自动填充第一个模型上的内容属性吗？至少一个空的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-01-28T21:44:24.053

（由 OP 在问题编辑中回答。转换为社区 wiki 答案。请参阅[没有答案的问题，但问题在评论中解决（或在聊天中扩展）](https://meta.stackoverflow.com/questions/251597/question-with-no-answers-but-issue-solved-in-the-comments)）

OP写道：

> 好吧，谜团解开了……
> 
> extension_builder 添加了一个名为“ext_typoscript_setup.txt”的文件。在该文件中有 tt_content 致命的“recordType”定义......删除了它，瞧......一切正常

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-07-24T04:22:41.657

是的，将 tt_content 字段集成到您的扩展中非常容易。

如果要在 tt_content 记录中设置第二个标题字段，则必须在 ext_table.php 中设置以下脚本

```
$tempColumns = array(
    'subtitle' => array(
        'exclude' => 0,
        'label' => 'title2',
        'config' => array(
            'type' => 'input'
        )
    )
); 
```

然后你必须加载 tt_content TCA 文件

```
#This is for EXTBASE Extension
\TYPO3\CMS\Core\Utility\GeneralUtility::loadTCA('tt_content');

OR

#This is for PI Base Extension
t3lib_div::loadTCA("tx_dam_cat"); 
```

以下字段将用于特定扩展，然后使用以下脚本。

```
$TCA["tt_content"]["types"]["list"]["subtypes_excludelist"]["abc_pqr"]="layout,select_key,pages";
$TCA["tt_content"]["types"]["list"]["subtypes_addlist"]["abc_pqr"]="subtitle;;;;1-1-1"; 
```

有关这方面的更多信息，请访问

[https://jainishsenjaliya.wordpress.com/2014/08/25/how-to-use-tt_content-fields-in-custom-plugin-of-typo3/](https://jainishsenjaliya.wordpress.com/2014/08/25/how-to-use-tt_content-fields-in-custom-plugin-of-typo3/)

# c# - 在 NHibernate 中引用会导致更多的内存消耗

> ID：12350353
> 
> 赞同：0
> 
> 时间：2012-09-10T11:05:06.943
> 
> 标签：c#, nhibernate, memory, relationship

我正在尝试通过在其网站上找到的教程学习 Fluent-NHibernate：[https ://github.com/jagregory/fluent-nhibernate/wiki/Getting-started](https://github.com/jagregory/fluent-nhibernate/wiki/Getting-started)

在此代码中，您可以看到对 Store 对象的引用：

```
public class Employee
{
   public virtual int Id { get; private set; }
   public virtual string FirstName { get; set; }
   public virtual string LastName { get; set; }
   public virtual Store Store { get; set; }//<-- here
}

public class Store
{
  public virtual int Id { get; private set; }
  public virtual string Name { get; set; }
  public virtual IList<Product> Products { get; set; }
  public virtual IList<Employee> Staff { get; set; }
} 
```

假设我将拥有 10000 名员工（或更多），并且每个人都会引用存储实例。如果我们只有一个商店并且对它有很多引用，会发生什么。每个元素是否只存储对存储对象内存的引用，还是全部存储单个对象导致占用大量内存？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T12:11:23.703

这取决于您如何使用 ISession。在单个 ISession 中，您只会获得一个`Store`. 不同的 ISession 会有不同的`Store`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T11:59:57.167

是的。每个 Employee 实例只有一个引用实例。

# ajax - 在javascript中解析xml文件

> ID：12350355
> 
> 赞同：0
> 
> 时间：2012-09-10T11:05:13.210
> 
> 标签：ajax

AM 使用 AJAX 和 servlet 开发自动完成或建议框。我的问题是如何在 java 脚本中解析 XML 响应以将其显示在 div 标签中。我的 xml 响应就像包含一个父标签 RESULTS ，它包含多个称为 RESULT 的子标签。

如何在 java 脚本变量中获取结果值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T11:09:43.020

看看这个线程：[Parse XML from XMLHttpRequest](https://stackoverflow.com/questions/5410796/parse-xml-from-xmlhttprequest)

我认为它包含您需要的信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-10T11:13:29.630

你可以使用[jQuery.parseXML来做到这一点](http://api.jquery.com/jQuery.parseXML/)

# c# - SQL Server：INNER JOIN 两次写出东西

> ID：12350359
> 
> 赞同：2
> 
> 时间：2012-09-10T11:05:22.353
> 
> 标签：c#, asp.net, sql, database, inner-join

这是我的 SQL 查询

```
select 
    tblUnderKategori.fldKategori, 
    tblUnderKategori.fldNavn,  
    tblUnderKategori.fldBillede, 
    tblKategori.fldId, 
    tblKategori.fldKategoriNavn 
from 
    tblUnderKategori
inner join 
    tblKategori on tblUnderKategori.fldKategori=2 
```

正如你所看到的，我需要 my 的所有内容，`fldKategori = 2`它确实如此，但它会写出 x2 次。

这是我需要显示的地方的后端代码

```
katFac objKat = new katFac();
protected void Page_Load(object sender, EventArgs e)
{
    if (!IsPostBack && !string.IsNullOrEmpty(Request.QueryString["id"]))
    {
        foreach (DataRow item in objKat.GetUnderkatByKat(Convert.ToInt32(Request.QueryString["id"])).Rows)
        {
            litUnderkategori.Text += item["fldNavn"].ToString() + "<br /><br />";
        }
    }
} 
```

我只是似乎无法弄清楚问题，所以请任何人帮忙

先感谢您！:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T11:10:34.587

您在这里创建了一个 karthesian 产品，因为您的连接缺少实际将两个表连接在一起的条件。
尝试使用这个：

```
select  
    tblUnderKategori.fldKategori,  
    tblUnderKategori.fldNavn,   
    tblUnderKategori.fldBillede,  
    tblKategori.fldId,  
    tblKategori.fldKategoriNavn  
from  
    tblUnderKategori 
        inner join tblKategori  
            on tblUnderKategori.fldKategori = tblKategori.fldId
where tblUnderKategori.fldKategori=2 
```

这假定`tblUnderKategori.fldKategori`包含父类别的 ID。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-10T11:11:05.193

A`JOIN`连接两个表，您必须提供公共列。如果您还想过滤掉某些值，请在`WHERE`之后添加一个子句。`SELECT`此外，如果您以后不想明确阅读它们，则实际上不必使用用于匹配和加入的字段。

```
select 
   tblUnderKategori.fldNavn,  
   tblUnderKategori.fldBillede, 
   tblKategori.fldKategoriNavn
from tblUnderKategori join tblKategori
   on tblUnderKategori.fldKategori = tblKategori.fldId
where
   tblUnderKategori.fldKategori = 2 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-10T11:12:14.383

ON 子句指定表应该在哪个列上连接，条件应该包含在 WHERE 子句中。尝试这样的事情：

```
SELECT
   tblUnderKategori.fldKategori, 
   tblUnderKategori.fldNavn, 
   tblUnderKategori.fldBillede,
   tblKategori.fldId,        
   tblKategori.fldKategoriNavn    
FROM tblUnderKategori           
   INNER JOIN tblKategori    
   ON tblUnderKategori.[some key column] = tblKategori.[corresponding key column]        
WHERE tblUnderKategori.fldKategori=2 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-10T11:13:28.650

您的 SQL 语句缺少`JOIN`表上的字段。它应该是这样的：

```
select u.fldKategori, 
    u.fldNavn,  
    u.fldBillede, 
    k.fldId, 
    k.fldKategoriNavn 
from tblUnderKategori u
inner join tblKategori k
  on u.fldKategori = k.fldId
where u.fldKategori=2 
```

然后，您将在`WHERE`子句中应用您的过滤器。

# jquery - 将点击事件添加到动态生成的手风琴 jquery

> ID：12350360
> 
> 赞同：0
> 
> 时间：2012-09-10T11:05:28.140
> 
> 标签：jquery, jquery-ui-tabs, jquery-ui-accordion

我有一个由动态生成的选项卡组成的小部件。每个选项卡由 7 个手风琴组成。当我动态生成选项卡时，我也动态添加了手风琴。不，我需要的是一个单击处理程序，它有一个事件参数，指定单击了哪个手风琴，以便我可以将相应的数据添加到该手风琴的 div。代码看起来有点像这样

```
 <div class='tab' id='idCallDetailTab'>
        <ul>
            <?php $i=0; foreach ($this->Asp as $item) { $i++; ?>
            <li><a href="#etabs-<?php echo $i; ?>"><?php echo $item['asp']; ?></a></li>
            <?php } ?>
        </ul>
        <?php $i=0; foreach ($this->Asp as $item) { $i++;  ?>
            <div id="etabs-<?php echo $i; ?>" >
            </div>

            <script type="text/javascript">
                var accordian = '<div class="accordion"><h4><a href="#">CallLogin</a></h4><div id="acclogin-<?php echo $i; ?>"></div><h4><a href="#">Call Allocate</a></h4><div id="accallocate-<?php echo $i; ?>"></div><h4><a href="#">Call Attend</a></h4><div id="accattend-<?php echo $i; ?>"></div><h4><a href="#">Call Dispatched</a></h4><div id="accdispatched-<?php echo $i; ?>"></div><h4><a href="#">Call Part Indent</a></h4><div id="accindent-<?php echo $i; ?>"></div><h4><a href="#">Call transfer</a></h4><div id="acctransfer-<?php echo $i; ?>"></div><h4><a href="#">Call Part Recieved</a></h4><div id="accreceived-<?php echo $i; ?>"></div></div>';                 

                $('#etabs-<?php echo $i; ?>').html(accordian);
                $('#acclogin-<?php echo $i; ?>').html('100');
                $('#accallocate-<?php echo $i; ?>').html('200');
                $('#accattend-<?php echo $i; ?>').html('300');
                $('#accdispatched-<?php echo $i; ?>').html('400');
                $('#accindent-<?php echo $i; ?>').html('500');
                $('#acctransfer-<?php echo $i; ?>').html('600');
                $('#accreceived-<?php echo $i; ?>').html('700');
            </script>

        <?php } ?>
    </div > 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-12T07:52:31.583

**在选项卡单击上调用 Ajax**：
仅设置选项卡的**href**属性，它为特定选项卡 div 调用 Ajax url。

[http://jqueryui.com/demos/tabs/ajax.html](http://jqueryui.com/demos/tabs/ajax.html)

```
<div id="tabs">
    <ul>
        <li><a href="#tabs-1">Preloaded</a></li>
        <li><a href="ajax/content1.html">Tab 1</a></li>
        <li><a href="ajax/content2.html">Tab 2</a></li>
        <li><a href="ajax/content3-slow.php">Tab 3 (slow)</a></li>
        <li><a href="ajax/content4-broken.php">Tab 4 (broken)</a></li>
    </ul>
    <div id="tabs-1">
        <p>Proin elit arcu, rutrum commodo, vehicula tempus, commodo a, risus. Curabitur nec arcu. Donec sollicitudin mi sit amet mauris. Nam elementum quam ullamcorper ante. Etiam aliquet massa et lorem. Mauris dapibus lacus auctor risus. Aenean tempor ullamcorper leo. Vivamus sed magna quis ligula eleifend adipiscing. Duis orci. Aliquam sodales tortor vitae ipsum. Aliquam nulla. Duis aliquam molestie erat. Ut et mauris vel pede varius sollicitudin. Sed ut dolor nec orci tincidunt interdum. Phasellus ipsum. Nunc tristique tempus lectus.</p>
    </div>
</div> 
```

您可以在此处使用选项自定义更多。
[http://jqueryui.com/demos/tabs/](http://jqueryui.com/demos/tabs/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T07:07:20.883

找到了更好的方法。我没有在同一个文件中添加手风琴，而是将它们添加到另一个 html 文件中，并通过 ajax 将该 HTML 的内容加载到我的选项卡中（JQuery 处理了所有 ajax 加载）。我唯一需要添加的是将手风琴应用于选项卡的加载事件以维护手风琴 UI

# javascript - Android 在 HTML 容器内滚动，具有 CSS 溢出属性

> ID：12350361
> 
> 赞同：1
> 
> 时间：2012-09-10T11:05:37.940
> 
> 标签：javascript, android, html, css

我在页面上有一个容器，它有一个巨大的溢出-x。在 iPad 上，用户可以简单地向左滑动滚动，就像他们在向下滚动页面时垂直滚动一样。

在 PC 上，滚动条是可见的，因此用户可以左右滚动。

但是，在 Android 上，没有滚动条出现，我不能像在 iPad 上那样向左滑动。

这里需要一些特殊的 CSS 和 JS 吗？有谁知道*为什么*会这样？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T11:10:33.320

在 Android 3.0 之前的 Android 设备中，溢出属性无法正常工作。但它是从Android 3.0或更高版本解决的。

我在开发应用程序时也遇到了这个问题。

此问题已通过使用按钮和动画元素的 margin-top 属性得到解决，以便将其更改为负值，从而创建滚动效果。

# jquery - 在jquery中动态创建选择框

> ID：12350362
> 
> 赞同：0
> 
> 时间：2012-09-10T11:05:39.810
> 
> 标签：jquery, html, json, jquery-ui

我正在研究 wijmo 网格，我想在网格中添加选择框，其数据来自 JSON。

这是我尝试过的代码，但它没有在框中显示选项数据。

```
<script type="text/javascript">
$.ajax({ 
    url: "DeviceType",
    type: "GET",
    dataType: "json",
    contentType : "application/json",
    success: function (responce) { 
        if (responce.listResponse.items.length > 0) {
            $.each(responce.listResponse.items, function (i, entity) {                   
                $('#devicetype').append(
                    $('<select/>', {
                        'id': 'deviceType' + entity.paramCode,
                        'type': 'select', 
                        'name':         'deviceType', 
                        'value': entity.paramValue
                    }),
                    $('<options />', {
                        'for': 'deviceType' + entity.paramValue, 
                        'text':         entity.paramValue
                        }).click(function() {
                        alert(entity.paramCode);
                    })  
                    );                  
            });
        }
    }
});
</script>
<body>  
<div id="devicetype" name="deviceType" ></div>
</body> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T11:18:31.383

您将选项附加到`#devicetype`，但您需要将它们附加到选择：

```
/* not tested */
$( '#devicetype' ).append(
    $( '<select/>', {
        'id': 'deviceType' + entity.paramCode,
        'type': 'select',
        'name': 'deviceType',
        'value': entity.paramValue
    } ).append(
        $( '<option />', {
            'for': 'deviceType' + entity.paramValue,
            'text': entity.paramValue
        } )
    ).click( function() {
        alert( entity.paramCode );
    } )
); 
```

**更新**：哦——正如 tpaksu 在上面的评论中所说，你拼错了`option`。也许你应该首先在一个单独的循环中编译所有选项——当前版本只适用于一个选项。

# mysql - Rails 表与 ENUM 列的关联

> ID：12350366
> 
> 赞同：0
> 
> 时间：2012-09-10T11:06:00.510
> 
> 标签：mysql, ruby-on-rails, activerecord

`uploads`给定包含 4 个不同应用程序和用户之间关系的表：

```
field    type
dogTag   int (foreign key to dvd)
app      enum
uploader int (foreign key to user)
mod      string
... 
```

和表`dvds`：

```
dogTag  int (primary key)
title   string
... 
```

和表`users`：

```
id    int (primary key)
... 
```

如果它依赖于 ENUM 列，如何在 Rails中正确构建`dvds`表和表之间的模型关系？`uploads`

使用 sql 我只需执行以下操作：

```
JOIN uploads ON uploads.dogTag = dvds.dogTag
WHERE uploads.app = 'dvd' 
```

但是不知道如何在 Rails 中创建这种关系，也没有找到很多这方面的信息。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T11:18:47.673

我对如何创建与枚举列的关系没有太多想法，但如果它是您的应用程序中的四个模型，并且有一个上传模型，那么您可以使用`polymorphic association`，ryan 有很好的[railscasts](http://railscasts.com/episodes/154-polymorphic-association)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T11:25:36.500

那么您可以重新组织您的数据库以使枚举类型成为查找表，您可以创建一个非持久模型来实现它。

问题是，如果你从模型而不是数据库开始，你就不会接近 mysql 的枚举类型，这就是为什么你很难找到很多东西，你已经把它放在了低音上。

我的建议是摆脱它...

# java - Java如何生成xml文件？

> ID：12350367
> 
> 赞同：1
> 
> 时间：2012-09-10T11:06:03.243
> 
> 标签：java, xml

我必须通过 Java 生成巨大且相当复杂的 xml 文件。我必须从 Oracle 数据库中获取数据。我真的不知道这是一种正确可靠的方法吗？我当然可以创建一个字符串并连接所有标签、属性和数据，但感觉不对。我想这是一个很常见的任务，Java 有很多既定的方法。我的问题是最好的方法是什么？你的建议是什么？谢谢你的任何线索...

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-10T11:11:01.133

您可以使用[JAXB](http://www.oracle.com/technetwork/articles/javase/index-140168.html)从作为查询数据存储的结果的结构化对象构建 XML。

如果您的对象层次结构并不复杂，您可以使用[Oracle 的功能以 XML 格式生成结果](http://docs.oracle.com/cd/B19306_01/appdev.102/b14259/xdb13gen.htm)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-10T11:24:43.123

转换有多种选择`object to xml`。

*   [贾克斯](https://www.google.com/search?q=jaxb&ie=utf-8&oe=utf-8&aq=t&rls=org.mozilla%3aen-US%3aofficial&client=firefox-a)
*   [萨克斯分析器](https://www.google.com/search?q=sax&ie=utf-8&oe=utf-8&aq=t&rls=org.mozilla%3aen-US%3aofficial&client=firefox-a#hl=en&client=firefox-a&hs=Vfi&rls=org.mozilla%3aen-US%3aofficial&sclient=psy-ab&q=saxparser&oq=saxparser&gs_l=serp.3...3580.3580.3.3866.1.1.0.0.0.0.0.0..0.0.les;..0.0...1c.1.njRwS5zxXuA&pbx=1&bav=on.2,or.r_gc.r_pw.r_qf.&fp=ac26b312fb52f5b8&biw=1366&bih=639)
*   [dom解析器](https://www.google.com/search?q=dom&ie=utf-8&oe=utf-8&aq=t&rls=org.mozilla%3aen-US%3aofficial&client=firefox-a#hl=en&sugexp=les;&gs_nf=1&pq=dom&cp=6&gs_id=l&xhr=t&q=dom%20parser&pf=p&client=firefox-a&hs=o0N&rls=org.mozilla%3aen-US%3aofficial&sclient=psy-ab&oq=dom%20pa&gs_l=&pbx=1&bav=on.2,or.r_gc.r_pw.r_qf.&fp=ac26b312fb52f5b8&biw=1366&bih=639)

我个人建议`JAXB`易于使用和`saxparser`以性能为中心的应用程序。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-10T11:26:10.950

您可以使用 JAXP（用于 XML 解析的 Java API）来创建 XML 结构。这具有您想要的所有功能。

# google-maps - GoogleMaps API watchPosition

> ID：12350368
> 
> 赞同：0
> 
> 时间：2012-09-10T11:06:06.097
> 
> 标签：google-maps

我有代码：

```
var watchID;
        var geoLoc;

        var geoService = navigator.geolocation;
        if (geoService) {
            geoService.getCurrentPosition(showCurrentLocation,errorHandler,{enableHighAccuracy: true});
        } else {
            alert("Your Browser does not support GeoLocation.");
        }

        function showCurrentLocation(position){
            var latLng = new google.maps.LatLng(position.coords.latitude,position.coords.longitude);

            //Google Map options
            var myOptions = {zoom: 16,
                             center: latLng,
                             mapTypeId: google.maps.MapTypeId.ROADMAP
                            };

            var map = new google.maps.Map(document.getElementById("map_canvas"), myOptions);

            var usermarker = new google.maps.Marker({position: latLng, map: map, title: "You are here!"});

            map.setCenter(latLng);
            usermarker.setPosition(latLng);
            getLocationUpdate(usermarker, latLng)
        }

        function errorHandler(error){
              alert("Error while retrieving current position. Error code: " + error.code + ",Message: " + error.message);
        }

        function getLocationUpdate(usermarker, latLng){
           if(navigator.geolocation){
              var options = {timeout:60000};
              geoLoc = navigator.geolocation;
              watchID = geoLoc.watchPosition(showLocation, 
                                             errorHandler,
                                             options);
           }else{
              alert("Sorry, browser does not support geolocation!");
           }
        }

        function showLocation(position){
            op = document.getElementById("output");
            var latitude = position.coords.latitude;
            var longitude = position.coords.longitude;

            op.innerHTML = "Latitude : " + latitude + "<br />Longitude: " + longitude;
        } 
```

它设置了地图并获取了我当前的位置。我正在尝试使地图居中并移动标记。getLocationUpdate 当前触发 watchLocation 但我不知道如何更新标记和地图中心。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T13:48:00.297

您以错误的方式将位置设置为标记，请尝试：

```
position: new google.maps.LatLng(latLng) 
```

您可以使用以下命令更新标记的位置：

```
newLatlng = new google.maps.LatLng(position.coords.latitude, position.coords.longitude);
marker.setPosition(newLatlng); 
```

在 showLocation(position) 内部调用

希望能帮助到你...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T09:09:49.790

尝试这个：

`map.panTo(new google.maps.LatLng(position.coords.latitude, position.coords.longitude));`

它以“移动地图”为中心......

# c# - 保存/使用图像而不分配 300mb 内存

> ID：12350371
> 
> 赞同：0
> 
> 时间：2012-09-10T11:06:17.823
> 
> 标签：c#, .net, visual-studio-2010, image, memory

我正在.net 4.0 c# 中构建一个 Windows 项目。

我现在将图像保存到硬盘驱动器，这根本不占用任何内存，因为我只在我想查看它时才加载图像。但现在我需要删除在硬盘驱动器中创建图像并以其他方式创建它。就像创建内存流并将其保存到对象并将其序列化到硬盘驱动器一样。重要的部分是我不能在硬盘驱动器中看到图像，它们必须加密或在对象或其他东西中。

所以....当我尝试将它放入内存流并将其保存到列表中然后将其序列化到驱动器时​​，我得到了一个巨大的程序内存分配，因为对于我创建的每个图像，并保存为我的内存流清单，我分配了那个内存，我的程序变得超过 2-300 mb。

我真的不知道如何做到这一点，我可以以某种方式将其保存到内存流中而不是在程序中分配该内存吗？或者可以以其他方式保存它而不让图片在硬盘驱动器中作为图像完全可见？

正如我所说，主要的事情是，我不能将图像作为普通图像保存在硬盘上，如果没有应用程序，用户一定不能查看它们。而且我需要找到一种不分配所有计算机内存的方法。

先感谢您！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T11:10:48.657

> 将其保存到内存流中，而不是在程序中分配该内存

不，如果它在内存流中，它显然在 RAM 中。

因此，您需要将图像完全存储在 RAM 中，或者将其保存到磁盘。

如果您不希望它在磁盘上可见，那么您需要对文件进行加密，以便用户无法在您的应用程序之外查看它。加密的强度取决于您希望破解的难度。如果您不太在意，那么非常基本的 XOR 加密将非常快并且不会增加文件的大小。如果您确实关心，那么您想使用 3DES 之类的东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T11:18:33.887

*文件访问是建立在流*的原理上的，可以串在一起。您可以做的是，不是通过文件流直接从磁盘读取/写入图像，而是[`CryptoStream`](http://msdn.microsoft.com/en-us/library/system.security.cryptography.cryptostream.aspx)在它之间插入一个。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-10T11:36:28.453

您可以使用 GZIPStream 和 CryptoStream 使图片更小和加密。

本文向您展示了具体方法；

[http://www.liensberger.it/web/blog/?p=33](http://www.liensberger.it/web/blog/?p=33)

# javascript - 如何获取 iframe 的父 div 的 ID？

> ID：12350375
> 
> 赞同：2
> 
> 时间：2012-09-10T11:06:45.160
> 
> 标签：javascript, iframe

我有一个看起来像这样的页面：

```
 <div class="myclass" id="div1"><iframe id="frame1" src="myiframe.html"></div>
 <div class="myclass" id="div2"><iframe id="frame2" src="myiframe.html"></div> 
```

在 my`iframe`中，我需要知道其父节点的 div 的 id，但我不知道如何。我搜索了一个没有 jquery 的解决方案，但我发现的只是一些`getElementById`东西，我实际上是在搜索 id。

有人能帮我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T11:19:38.710

你要知道，就你的iFrame里面的JS代码而言，window*就是*iFrame，document就是那个iFrame的内容。这里有一个对你有用的小功能，为了父母的文件：

```
var parentDoc = window;
while(parentDoc !== parentDoc.parent)
{
    parentDoc = parentDoc.parent;
}
parentDoc = parentDoc.document;
var iFrames = parentDoc.getElementsByTagName('iframe');
var divs = [];
for(var i=0;i<iFrames.length;i++)
{
    divs.push(iFrames[i].parentNode);//assuming the first parent is the div
} 
```

这应该够了吧

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-10T11:12:43.063

试试这样：

```
parent.document.getElementById("div id")

var parentDivOfIfame1 = $("#frame1", parent.document).parent(); 
```

# ios - 使用单个视图启动应用程序然后导航到选项卡视图？

> ID：12350383
> 
> 赞同：0
> 
> 时间：2012-09-10T11:07:19.753
> 
> 标签：ios, xcode, uiviewcontroller, uinavigationcontroller, uitabbarcontroller

我可以使用单个视图启动我的应用程序并使用`UIViewController`和添加选项卡式界面 ( `UITabBarController`) 在视图中导航吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-13T06:01:42.730

如果您的项目在 Xcodes Interface Buidler 中使用 StoryBoard，而不是简单地将 UIView 设计为新场景，然后选择此场景并在菜单中单击**Editor / Embed in / Navigation Controller**或使用**Editor / Embed in / Tab Bar Controller**。

然后将这个新的选项卡栏控制器或导航控制器与“初始启动场景”中的按钮操作连接起来。

很酷的是：如果你有一个导航控制器，你可以再次“嵌入到标签栏控制器”。或者如果你有一个标签栏控制器，那么你可以再次“嵌入到导航控制器”中。

之后它可能看起来像这样： ![单视图触发 TabBar / NavBar](../Images/ad2f5ee72e8926621c411ebd909744ac.png)

希望这可以帮助。如果是：不要忘记标记问题已解决。

# javascript - 将选项值附加到隐藏字段？

> ID：12350384
> 
> 赞同：2
> 
> 时间：2012-09-10T11:07:21.023
> 
> 标签：javascript, jquery

只需按一下按钮，我就可以遍历选择中的选项列表。我希望将所有这些选项（选项的值）附加到隐藏字段，由管道分隔`|`。到目前为止，我已经想出了这个，但是，它只是将选项的最后一个值放在隐藏字段的选择中？

```
//Select all cities
$jq("input#checkcities").click(function () {

    $jq(".select-cities > option").each(function () {
        var zipCodeValue = $jq(this).val();

        $jq(".select-cities option").attr("selected", "selected");
        $jq(".select-cities option").appendTo(".chosen-cities");

        //Put value of cities in hidden field.
        $jq('.hiddenFieldChosenCities').val(zipCodeValue);

    });
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-10T11:10:29.200

您可以使用`map`方法：

```
var zipCodeValues = $jq(".select-cities > option").map(function () {
                          return this.value;
                    }).get().join('|');

$jq('.hiddenFieldChosenCities').val(zipCodeValues); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T11:10:10.510

您需要添加值：

```
$jq('.hiddenFieldChosenCities').val($jq('.hiddenFieldChosenCities').val() + '|' + zipCodeValue); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-10T11:11:07.393

*   创建字符串`zipvalues`
*   循环遍历城市并将城市附加到`zipvalues`
*   最后将隐藏字段值设置为`zipvalues`。

    ```
    // Select all cities
    $jq("input#checkcities").click(function () {
        var zipvalues = "";

        $jq(".select-cities > option").each(function () {
            var zipCodeValue = $jq(this).val();

            $jq(".select-cities option").attr("selected", "selected");
            $jq(".select-cities option").appendTo(".chosen-cities");

            zipvalues += "|" + zipCodeValue;
        });

        //Put value of cities in hidden field.
        $jq('.hiddenFieldChosenCities').val(zipvalues);
    }); 
    ```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-10T11:11:38.310

像这样试试

```
$jq('.hiddenFieldChosenCities').val($jq('.hiddenFieldChosenCities').val() + '|' + zipCodeValue); 
```

# css - 使用媒体查询来调整流体网格每一行的图像数量

> ID：12350386
> 
> 赞同：0
> 
> 时间：2012-09-10T11:07:27.173
> 
> 标签：css, media-queries

我正在使用下面的代码，以便我的图像排列从连续 5 个调整到 4 个，然后根据容器的不同宽度调整到 2 个。

在第一个实例中，它正确设置每 5 个图像（每行的最后一个），因此它没有右边距。当它缩小到每个图像上的 4 个图像时，它会发生变化，因此每个第 4 个图像都没有右边距，但由于某种原因，第 5 个仍然没有右边距。此外，当它捕捉到每行 2 个图像时，第 5 个仍然没有右边距。

我需要改变什么来阻止这种情况的发生？在此先感谢您的帮助。

```
@media (max-width: 1200px) {
  #photos img {
  /* 5 images wide */
  width: 18% ; margin: 0 2.5% 2.5% 0;
  }
  #photos img:nth-child(5n) { margin: 0 0 2.5% 0; }
}

@media (max-width: 800px) {
  #photos img {
  /* 4 images wide */
  width: 22% ; margin: 0 4% 4% 0;
  }
  #photos img:nth-child(4n) { margin: 0 0 4% 0; }
}

@media (max-width: 400px) {
  #photos img {
  /* 2 images wide */
  width: 48% ; margin: 0 4% 4% 0;
  }
  #photos img:nth-child(2n) { margin: 0 0 4% 0; }
} 
```

编辑：这是一个[JSFiddle](http://jsfiddle.net/AndyMP/2zND2/8/) - 我添加的媒体查询比下面列出的多，但问题仍然相同。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T11:21:31.057

您为 max-width:1200px 定义的属性同时用于 max-width:800px 和 400px。

你必须重新定义你的`:nth-child(5n)`

```
@media (max-width: 800px) {
  #photos img {
  /* 4 images wide */
  width: 22% ; margin: 0 4% 4% 0;
  }
  #photos img:nth-child(5n) { margin: 0 4% 4% 0; }
  #photos img:nth-child(4n) { margin: 0 0 4% 0; }
} 
```

也许最好在查询中定义一个最小宽度

```
@media (min-width:800px) and (max-width: 1200px) {
  #photos img:nth-child(5n) { margin: 0 0 2.5% 0; }
} 
```

因此，当屏幕尺寸介于 1200 和 800 之间时，仅应用边距。

# c# - 在 Windows 服务中，如何从多个线程将记录插入数据库？

> ID：12350394
> 
> 赞同：-2
> 
> 时间：2012-09-10T11:07:51.643
> 
> 标签：c#, asp.net, windows-services

我有一个 Windows 服务，它有五个线程。每个线程将生成不同的 Excel 文件，然后读取 excel 行并插入数据库。是否可以并行插入？目前我正在使用**带锁**的单类进行插入。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T11:11:50.663

如果您正在插入并且 DBMS 为您创建了密钥，那么应该没有问题，并且不需要锁定。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T11:12:46.333

这取决于您的数据库。如果您的数据库能够处理多个连接（现在应该放弃）。

但是，它与您进行插入的课程无关。那里的任何锁定都不是必需的（当然，除非您的数据库不支持多个连接，我对此表示严重怀疑）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-10T11:12:55.427

确保它在事务中，并摆脱锁定！您应该没问题...假设您使用的任何数据库都支持事务。

大多数现代数据库将支持多次写入，使用事务更安全，以防另一个出错。

# qt - Qt 商业许可证

> ID：12350399
> 
> 赞同：4
> 
> 时间：2012-09-10T11:08:11.293
> 
> 标签：qt, licensing

我们想知道是否有人对 Qt 许可证的工作方式有经验。我们想开发一个封闭源代码的专有许可应用程序（静态链接到 Qt 库），它将安装到多台计算机（> 100）。我们可能会考虑购买商业许可证，但我们不确定许可证费用是否为：

1.  每个开发者
2.  每个工作站
3.  每家公司
4.  每次安装
5.  每队
6.  还要别的吗？

有人有这方面的经验吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T11:31:53.930

很久以前，当我使用它时，许可证是“每个开发人员”。据我所知，这种情况现在已经改变了。看看这个： [QT商业与非商业许可证初学者](https://stackoverflow.com/questions/3095136/qt-commercial-vs-non-commercial-license-for-beginner)和 [https://stackoverflow.com/questions/2945612/qt-lgpl-licencing-for-a-free-application-with-closed-source](https://stackoverflow.com/questions/2945612/qt-lgpl-licencing-for-a-free-application-with-closed-source)

# yii - 使用 Yii 的 CActiveDataProvider 从多个表中进行选择

> ID：12350400
> 
> 赞同：1
> 
> 时间：2012-09-10T11:08:15.177
> 
> 标签：yii

我有 3 个表：`Topics`和`Users`（`Details`这些是自定义论坛的一些表）

`Topics`包含（在其他常用字段中）创建主题的用户的 id (FK)。 `Users`包含 nick/pass 和 id (PK) `Details`包含（在其他常用字段中）用户的 id (FK)。

关系：一个用户可以有一个 1 详细信息。一个用户可以有多个主题，但一个主题只能由一个用户创建。

话题关系：

```
return array(
'user' => array(self::BELONGS_TO, 'User', 'User_iduser'),
); 
```

用户关系：

```
return array(
    'details' => array(self::HAS_ONE, 'Details', 'User_iduser'),
); 
```

我正在尝试获取包含主题和用户详细信息的列表（例如，主题名称和用户名）。

目前我有这个：

```
$dataProvider=new CActiveDataProvider('Topic', array(
    'criteria'=>array(
    'with'=>array('user.details')
    )
)); 
```

但正如您可以想象的那样，它不起作用（读作它没有从 tbles 用户或详细信息中选择任何内容）。

我的代码有什么问题？

+++++++++++++++++

此代码从表用户（和主题表）中选择字段：

```
Topic::model()->with('user')->findAll(); 
```

但这不会从详细信息、用户和主题中选择：

```
Topic::model()->with('user.details')->findAll(); 
```

另外，我需要一个`CActiveDataProvider`解决方案，因为我需要 zii 小部件（意味着，即使对`Topic::model()->with()....`代码进行某种修改以从 3 个表中进行选择，它也不会真正有帮助）

编辑：（来自 Yii 的 SQL 日志）

```
Querying SQL: SELECT COUNT(DISTINCT `t`.`idtema`) FROM `tema` `t`  LEFT
OUTER JOIN `usuario` `usuarioIdusuario` ON
(`t`.`Usuario_idusuario`=`usuarioIdusuario`.`idusuario`)  LEFT OUTER JOIN
`detallesusuario` `detallesusuario` ON
(`detallesusuario`.`Usuario_idusuario`=`usuarioIdusuario`.`idusuario`) 

Querying SQL: SELECT `t`.`idtema` AS `t0_c0`, `t`.`Usuario_idusuario` AS
`t0_c1`, `t`.`Categoria_idcategoria` AS `t0_c2`, `t`.`tema` AS `t0_c3`,
`t`.`fecha_hora` AS `t0_c4`, `usuarioIdusuario`.`idusuario` AS `t1_c0`,
`usuarioIdusuario`.`nick` AS `t1_c1`, `usuarioIdusuario`.`contrasena` AS
`t1_c2`, `usuarioIdusuario`.`email` AS `t1_c3`,
`detallesusuario`.`Usuario_idusuario` AS `t2_c0`,
`detallesusuario`.`nombre` AS `t2_c1`, `detallesusuario`.`apellidos` AS
`t2_c2`, `detallesusuario`.`cumpleanos` AS `t2_c3`,
`detallesusuario`.`telefono1` AS `t2_c4`, `detallesusuario`.`telefono2` AS
`t2_c5` FROM `tema` `t`  LEFT OUTER JOIN `usuario` `usuarioIdusuario` ON
(`t`.`Usuario_idusuario`=`usuarioIdusuario`.`idusuario`)  LEFT OUTER JOIN
`detallesusuario` `detallesusuario` ON
(`detallesusuario`.`Usuario_idusuario`=`usuarioIdusuario`.`idusuario`) 
LIMIT 10 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T12:32:57.137

试试这个

```
$dataProvider=new CActiveDataProvider('Topic', array(
    'criteria'=>array(
    'with'=>array('user'=>array('alias'=>'user','with'=>array('details'=>array('alias'=>'details'))))
    )
)); 
```

和

```
Topic::model()->with(array('user'=>array('alias'=>'user','with'=>array('details'=>array('alias'=>'details')))))->findAll(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-04-14T15:44:47.567

而不是线

```
'with'=>array('user.details') 
```

采用

```
'with'=>array('user') 
```

然后加

```
$criteria->compare( 'user.details', $query, true );
$criteria->together = true;
} 
```

*其中 $query 是一个将在列详细信息中搜索的变量

# javascript - 谷歌地图自动调整（自动居中和自动缩放）不起作用

> ID：12350413
> 
> 赞同：18
> 
> 时间：2012-09-10T11:09:08.453
> 
> 标签：javascript, google-maps, google-maps-api-3, google-maps-markers

我在使用`fitBounds`地图方法的地图上遇到问题，它应该提供适当的缩放并将地图居中，并为其提供一个纬度数组。这是代码：

```
<script type="text/javascript"
    src="http://maps.googleapis.com/maps/api/js?sensor=false">
</script>

<div id="map_canvas">

<script type="text/javascript">
    var map;
    var bounds = new google.maps.LatLngBounds(null);

    function initialize() {
        var mapOptions = {       

            mapTypeId: google.maps.MapTypeId.ROADMAP
        };

        map =  new google.maps.Map(document.getElementById("map_canvas"), mapOptions);

        <?php
        foreach ($this->getProductCollection() as $_e):
            $event = Mage::getModel('catalog/product')->load($_e->getId());
            ?>
                var loc = new google.maps.LatLng("<?php echo $event->getEventLocationLatitude(); ?>","<?php echo $event->getEventLocationLongitude(); ?>");
                 bounds.extend(loc);
                addMarker(loc, '<?php echo $event->getName(); ?>', "active");
                bounds.extend(loc);

        <?php endforeach; ?>

        map.fitBounds(bounds);
        map.panToBounds(bounds);

    }

function addMarker(location, name, active) {          
    var marker = new google.maps.Marker({
        position: location,
        map: map,
        title: name,
        status: active
    });

}

jQuery.noConflict();

jQuery(document).ready(function(){
    initialize();
});
</script> 
```

标记已正确放置在地图上，但我得到了可用的最大缩放：

![在此处输入图像描述](../Images/2189aa0f34a6a5b6432c413911ad8439.png)

有什么帮助吗？

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-09-10T11:56:10.200

我在这里更新了你的小提琴：http: [//jsfiddle.net/KwayW/1/](http://jsfiddle.net/KwayW/1/)

它现在按预期工作。

这是完整的代码（将其保存为 test.html 并在浏览器中打开）：

```
<style>#map_canvas { width:500px; height: 400px; }</style>
<script src="http://maps.googleapis.com/maps/api/js?sensor=false"></script>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.8.1/jquery.min.js"></script>

<div id="map_canvas"></div>

<script>
var map;
var markersArray = [];
var image = 'img/';
var bounds = new google.maps.LatLngBounds();
var loc;

function init(){
    var mapOptions = { mapTypeId: google.maps.MapTypeId.ROADMAP };
    map =  new google.maps.Map(document.getElementById("map_canvas"), mapOptions);

    loc = new google.maps.LatLng("45.478294","9.123949");
    bounds.extend(loc);
    addMarker(loc, 'Event A', "active");

    loc = new google.maps.LatLng("50.83417876788752","4.298325777053833");
    bounds.extend(loc);
    addMarker(loc, 'Event B', "active");

    loc = new google.maps.LatLng("41.3887035","2.1807378");
    bounds.extend(loc);
    addMarker(loc, 'Event C', "active");

    map.fitBounds(bounds);
    map.panToBounds(bounds);    
}

function addMarker(location, name, active) {          
    var marker = new google.maps.Marker({
        position: location,
        map: map,
        title: name,
        status: active
    });
}

$(function(){ init(); });
</script> 
```

# java - Axis2 Web 服务客户端应用程序

> ID：12350415
> 
> 赞同：2
> 
> 时间：2012-09-10T11:09:16.300
> 
> 标签：java, eclipse, web-services, axis2

我正在尝试在 Eclipse 中使用 Axis2 创建 Web 服务应用程序。当我为我的班级生成 Web 服务时，我制作了向导来为我的 Web 服务生成客户端应用程序。有 `"Generate a JUnit test case to test the service"`复选框。

向导生成客户端应用程序和单元测试类的框架。

但是，如果我向我的 Web 服务添加新方法或更改现有方法的定义怎么办？但是测试用例已经可以被某人修改，并且可以有很多手工制作的逻辑。

有没有一种方法可以对客户端应用程序和单元测试框架进行某种“更新”，以适应 Web 服务应用程序中的更改，而无需重写现有的框架？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T08:28:48.983

我自己找到了解决方案。这个问题实际上并不完全是一个问题。

我担心 Web 服务生成向导会重写我对生成的单元测试的更改。但经过几次检查后，我看到该向导重写了 Web 服务的存根类和代理类。这正是我所需要的。

谢谢大家

# mongodb - 为什么在 MongoDB 中更新 DateTime 会得到错误的值？

> ID：12350418
> 
> 赞同：2
> 
> 时间：2012-09-10T11:09:26.313
> 
> 标签：mongodb, datetime, nosql

我有一个具有 DateUpdated DateTime 属性的模型。

在我更新该模型之前，我的模型信息是

![更改前](../Images/46dac9567a849e0c4cdccf333148d9b4.png)

在我更新我的模型信息之后

![更改后](../Images/1c1b0ddc1b291586b1607cf2d2b4289d.png)

为什么 MongoDB 存储错误的 DateUpdated 值？我用调试器尝试了几次，看起来每次更改该值但日期时间错误。

我正在使用 C# 驱动程序。

我的更新功能是

```
var query = Query.EQ("_id", p.UserID);
var update = MongoDB.Driver.Builders.Update.Replace(p);
SafeModeResult success =  MongoRepository.Profiles().Update(query, update); 
```

SafeModeResult 总是成功的。

我的 DateUpdated Bson 属性是

```
[BsonElement("da")]
[BsonDateTimeOptions(Representation = BsonType.Document)]
public DateTime DateUpdated{ get; set; } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-10T19:37:17.247

MongoDB 以 UTC 存储 DateTime 值。您看到的是本地时间到 UTC 的转换。

处理时区的最佳方法是将所有数据保存在 UTC（包括数据模型中，而不仅仅是数据库中），并且仅在您向用户显示值时转换为本地时间。

# database - 如何在 Flex 中访问 sqlite

> ID：12350419
> 
> 赞同：0
> 
> 时间：2012-09-10T11:09:37.250
> 
> 标签：database, sqlite, actionscript-3, apache-flex

我的客户端有一个 Sqlite 数据库文件，里面有不同的表，我还可以从不同的 sqlite 查看器查看这些表中的数据。这个数据库文件不是在 Flex 中创建的。它的扩展名是 sqlite ( `fileName.sqlite`)。

但是，当我尝试通过来自 Flex（操作脚本）的查询访问这些表时，会引发错误：

> 3115 未找到表

即使表的名称在数据库中是 100% 正确的。

在 flex 中创建的 sqlite 文件可以在 flex 中访问，但我必须使用不是在 flex 中创建的那个 sqlite 文件。

谁能告诉我如何在 FLEX 中使用 sqlite 数据库文件？

//////////////////////////////////////////////// 下边是我的代码在这里。

```
private var _sqlconnection:SQLConnection
    private var getPageFromAyatStatement:SQLStatement;
    public function connect():void { 
        _sqlconnection =new SQLConnection();
        _sqlconnection.addEventListener(SQLEvent.OPEN,onOpenDB);
        _sqlconnection.addEventListener(SQLErrorEvent.ERROR,handlerSqlOpenError);
        var dbFile:File = File.applicationStorageDirectory.resolvePath("abc.sqlite");
        _sqlconnection.openAsync(dbFile); 
    }

    private function onOpenDB(e:SQLEvent):void {
        getPageFromAyat();
    }

    private function getPageFromAyat():void {
        getPageFromAyatStatement = new SQLStatement;
        getPageFromAyatStatement.sqlConnection =_sqlconnection;
        var sql:String = "SELECT * FROM Ayat"
        getPageFromAyatStatement.text=sql;
        getPageFromAyatStatement.addEventListener(SQLEvent.RESULT,ayatStatementResult);
        getPageFromAyatStatement.addEventListener(SQLErrorEvent.ERROR,selectDbPathError);
        getPageFromAyatStatement.execute();
    }
    private function ayatStatementResult(event:SQLEvent):void {
        var sqlResult:SQLResult = getPageFromAyatStatement.getResult();
        if(sqlResult.data != null)
        {
            trace(sqlResult.toString())
        }
    }
    private function selectDbPathError(event:SQLErrorEvent):void  { 
    }

    private function handlerSqlOpenError(e:SQLErrorEvent):void {
    } 
```

它正确打开数据库文件，甚至还正确运行 getPageFromAyatStatement 但显示错误“没有这样的表：Ayat”但我可以从 sqlite 查看器中看到 Ayat 表中的所有数据。

# java - 如何访问从另一个类引发的异常

> ID：12350420
> 
> 赞同：0
> 
> 时间：2012-09-10T11:09:38.033
> 
> 标签：java

我的要求是在出现异常时发送自动邮件

```
public Connection dbConnect(String dbconnectionstring,String userid,String userpassword)
{
    Connection connection = null;
    System.out.println();
  try {
     Class.forName("com.microsoft.sqlserver.jdbc.SQLServerDriver").newInstance();
     connection = DriverManager.getConnection(dbconnectionstring,userid,userpassword);
     System.out.println("connected to" + dbconnectionstring );

    } catch (InstantiationException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (IllegalAccessException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (ClassNotFoundException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (SQLException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }

  return connection; 
```

现在在另一个类中，如果我想访问异常 e 的内容（如果引发任何异常），应该在我的代码中编写什么来知道是否引发了任何异常？如果出现异常，则应邮寄 e 的内容。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T11:11:54.627

重新抛出相同的异常，或将其包装在特定于应用程序的异常类中（我的偏好）：

```
 ...
} catch (InstantiationException e) {
    ...
    throw new MyAppException(e);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-10T11:19:42.513

这取决于“其他”是什么。如果它是您的`doConnect()`方法的调用者，请不要捕获异常，而是将它们抛出并在调用者方法中捕获：

```
public void doConnect(....) throws InstantiationException, IllegalAccessException, .......{
}

public void theCaller() {
    try {
    doConnect(......)
    } catch(InstantiationException e) {
    }
    } catch(IllegalAccessException e) {
    }
/// etc
} 
```

顺便说一句，在 java 7 中，您可以在一个块中捕获所有异常：

`} catch(IllegalAccessException | InstantioationException | SqlException e)`

或者，您可以使用可以检查或未检查（运行时）的其他异常来包装特定异常，例如

```
public Connection dbConnect(String dbconnectionstring,String userid,String userpassword)
{
    Connection connection = null;
    System.out.println();
  try {
     Class.forName("com.microsoft.sqlserver.jdbc.SQLServerDriver").newInstance();
     connection = DriverManager.getConnection(dbconnectionstring,userid,userpassword);
     System.out.println("connected to" + dbconnectionstring );

    } catch (InstantiationException | IllegalAccessException  | ClassNotFoundException  | SQLException e) {
        throw new IllegalStateException("Connection failure", e);
    }

  return connection;
} 
```

现在调用者可以捕获`IllegalStateException`并提取其原因。

但是，如果您需要某种管理所有异常的异步侦听器，您可以实现一个类`ExceptionManager`，当异常发生时，其他类正在更新该类。可能是单例的`ExceptionManager`，所以代码如下所示：

```
public void doConnect() {
    try {
       doConnect(......)
    catch(IllegalAccessException | InstantiationException | SqlException e)
        ExceptionManager.getInstance().exceptionThrown(e);
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-10T11:14:07.243

你可以把它设计成一个日志管理器：获取你的报表类的应用级实例，并在异常处理中，让它处理异常。

或者您可以重新抛出异常并在应用程序的最高级别捕获它，它可以处理任何意外异常（在 Swing 应用程序中使用以避免关闭简单的 NPE）。

# ruby - 使用定义创建字符串然后在不同的定义中使用它？（红宝石，水）

> ID：12350427
> 
> 赞同：1
> 
> 时间：2012-09-10T11:10:02.583
> 
> 标签：ruby, watir

我想知道是否有人可以帮助我存储一个字符串，然后在这里以不同的定义使用它。

例如，让我们说，

```
<html>
     <body>
          <div id="example">
               143453
          </div>
     </body>
</html> 
```

如何将数字 143453 存储为字符串，以便在其他地方使用它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T11:29:08.420

只需询问元素的文本并将其存储在变量中：

```
number = browser.div(:id, "example").text 
```

另一种方法是使用 HTML 解析器，例如 Nokogiri。如果您进行大量解析，这可能会提供[额外的速度](http://zeljkofilipin.com/watir-nokogiri/)。你需要的地方`require 'nokogiri'`然后你可以这样做：

```
number = Nokogiri::HTML(browser.html).at_css("div#example").text 
```

# ios - 在 Phonegap 中获取当前 UIViewController

> ID：12350437
> 
> 赞同：1
> 
> 时间：2012-09-10T11:10:40.393
> 
> 标签：ios, cordova, uiviewcontroller, viewcontroller, parentviewcontroller

我正在通过 PhoneGap 插件加载应用程序（通过嵌入式框架）。
现在，我试图将当前 UIViewController 传递给*FlashizFacade对象的***parentViewController**属性。 当我执行我的应用程序时，我在分配*self*时在调试控制台中收到此错误：

 **> > 2012-09-10 13:01:43.663 gTicketSales[2805:16a03]-[FlashizPlugin navigationController]：无法识别的选择器发送到实例 0x91925e0
> > 
> > 2012-09-10 13:01:43.665 gTicketSales[2805:16a03] ***WebKit 在 webView:decidePolicyForNavigationAction:request:frame:decisionListener:delegate: `<NSInvalidArgumentException>`-[FlashizPlugin navigationController]: 发送到实例 0x91925e0 的无法识别的选择器中丢弃了一个未捕获的异常

分配*self.viewController*时：

> > > 2012-09-10 14:31:21.455 gTicketSales[3693:16a03] ***WebKit 在 webView:decidePolicyForNavigationAction:request:frame:decisionListener:delegate 中丢弃了一个未捕获的异常：`<Wrong parentViewController specified>`使用非模态显示时，parentViewController 必须是分配了有效导航控制器的 UIViewController 实例

我试过了：

```
facade.parentViewController = self;
facade.parentViewController = self.viewController; 
```

### 我的 .h 文件

```
#import <Cordova/CDVPlugin.h>
#import <FlashizPaymentLib/FlashizFacade.h>

@interface FlashizPlugin : CDVPlugin <FlashizPaymentDelegate> {}

@property (nonatomic, retain) FlashizFacade* flashizFacade;
- (void) openFlashiz:(NSMutableArray*)arguments withDict:(NSMutableDictionary*)options;

@end 
```

### 我的 .m 文件

```
#import "FlashizPlugin.h"
@implementation FlashizPlugin
@synthesize flashizFacade;

- (void) openFlashiz:(NSMutableArray*)arguments withDict:(NSMutableDictionary*)options     {

NSLog(@"Flashiz Payment Opening...");

NSString *callbackId = [arguments pop];
NSString *invoiceId = [arguments objectAtIndex:0];

FlashizFacade* facade = [[FlashizFacade alloc] initWithEnvironment:FE_TEST];
facade.parentViewController = self;
facade.delegate = self;
self.flashizFacade = facade;
[facade executePaymentForInvoiceId:invoiceId];
[facade release];

CDVPluginResult *result;

result = [CDVPluginResult resultWithStatus:CDVCommandStatus_OK messageAsString:@"Flashiz Payment Executed..."];
[self writeJavascript:[result toSuccessCallbackString:callbackId]];

}

@end 
```

提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-11T11:52:45.277

在 AppDelegate.h

```
@property (nonatomic, strong) UINavigationController *navigationController; 
```

在 AppDelegate.m 上更改此行`application didFinishLaunchingWithOptions`

```
self.window.rootViewController = self.viewController; 
```

为了这

```
 UINavigationController *aNavigationController = [[UINavigationController alloc]                                                  initWithRootViewController:self.viewController];
    self.navigationController = aNavigationController;
    self.window.rootViewController = self.navigationController; 
```

在我的项目中因为我没有`ConnectionViewController`，所以我认为我没有正确包含框架，因为我不知道如何处理 Resources 文件夹，但我认为它应该适合你。

编辑：我刚刚包含了资源文件夹，它正在工作！！！

如果您不想将 phonegap 的视图控制器上的导航栏`viewDidLoad`放在`MainViewController.m`

```
self.navigationController.navigationBar.hidden = YES; 
```**

# mysql - 将 2 个或更多结果合并在一起？

> ID：12350438
> 
> 赞同：0
> 
> 时间：2012-09-10T11:10:44.517
> 
> 标签：mysql, sql, database

请参阅以下 SQL：

```
SELECT M.username, count(*) as Total, date(status_date) as Date FROM com_result
   LEFT JOIN members as M on M.member_id = com_result.member_id 
GROUP BY date(status_date), com_result.member_id  Order By status_date DESC 
```

`DATE`这将显示基于和的记录总数`member_id`

示例结果：

```
+----------+-------+------------+
| username | Total | DATE       |
+----------+-------+------------+
| bx7      |     3 | 2012-09-10 |
| bx2      |    25 | 2012-09-04 |
| bx2      |   401 | 2012-09-03 |
| bx1      |   703 | 2012-09-02 |
| bx4      |  1075 | 2012-09-02 |
+----------+-------+------------+ 
```

它工作得很好，现在我想合并/联合到另一个相同且相同的表结构。 **第二条 SQL：**

```
SELECT M.username, count(*) as Total, date(status_date) as Date FROM com_result_b
   LEFT JOIN members as M on M.member_id = com_result_b.member_id 
GROUP BY date(status_date), com_result_b.member_id  Order By status_date DESC 
```

假设结果`com_result`是：

```
| bx2   |    25 | 2012-09-04 | 
```

结果`com_result_b`是：

```
 | bx2   |    50 | 2012-09-04 | 
```

所以当它合并/联合时 - 我希望结果如下：

```
 | bx2   |    75 | 2012-09-04 | 
```

如您所见，`Total`从两个表中的同一日期增加的值。怎么可能呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T11:18:24.887

```
SELECT
  username,
  IF(q1.Total IS NULL,0,q1.Total)+IF(q2.Total IS NULL,0,q2.Total) AS Total,
  q1.Date
FROM (
  SELECT member_id, M.username, count(*) as Total, date(status_date) as Date 
  FROM com_result
  LEFT JOIN members as M on M.member_id = com_result.member_id 
  GROUP BY date(status_date), com_result.member_id  
) AS q1
LEFT JOIN (
  SELECT member_id, M.username, count(*) as Total, date(status_date) as Date 
  FROM com_result_b
  LEFT JOIN members as M on M.member_id = com_result_b.member_id 
  GROUP BY date(status_date), com_result_b.member_id
) AS q2 ON q1.member_id=q2.member_id AND q1.Date=q2.Date
ORDER BY q1.Date DESC 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-10T11:15:46.103

有一个总和

```
select username,SUM(Total) , DATE
(
    SELECT M.username, count(*) as Total, date(status_date) as Date FROM com_result_b 
       LEFT JOIN members as M on M.member_id = com_result.member_id  
    GROUP BY date(status_date), com_result.member_id  
   UNION ALL
   SELECT M.username, count(*) as Total, date(status_date) as Date FROM com_result_b   
      LEFT JOIN members as M on M.member_id = com_result_b.member_id    
   GROUP BY date(status_date), com_result_b.member_id 
) v

group by username, date 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-10T11:15:54.463

```
SELECT X.username, SUM(X.Total)  AS TOTAL , X.Date
FROM( SELECT ... FROM com_result Union Select .. From com_result_b)X
GROUP BY X.username,  X.Date 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-10T11:15:33.533

试试这个：

最简单的方法是：

您只需将两个结果都放入带有 union all 运算符的派生表中

```
 SELECT username,SUM(Total),Date
FROM   (
        SELECT M.username, count(*) as Total, date(status_date) as Date 
        FROM com_result
        LEFT JOIN members as M on M.member_id = com_result.member_id 
        GROUP BY date(status_date), com_result.member_id   
        union all
        SELECT M.username, count(*) as Total, date(status_date) as Date 
        FROM com_result_b
        LEFT JOIN members as M on M.member_id = com_result_b.member_id 
        GROUP BY date(status_date), com_result_b.member_id )a
GROUP BY username,Date
ORDER BY Date DESC 
```

# php - mysql 浏览量减少

> ID：12350439
> 
> 赞同：0
> 
> 时间：2012-09-10T11:10:45.547
> 
> 标签：php, mysql, image, views

我拥有一个图像托管网站，我使用 php 和 mysql 捕获图像视图。

我使用以下代码来计算视图。

```
include 'mysql.php';

$result = mysql_query("SELECT * FROM DB WHERE ID='$id'");
$row = mysql_fetch_array($result);
$views=$row['views'];

$query = "UPDATE DB SET views=$views+1 WHERE ID='$id'";
$result2 = mysql_query($query);

mysql_close($con); 
```

views 是*mediumint(9)*类型的字段。

我注意到视图每天都在减少。谁能说出问题所在并提供解决方案。

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-10T11:12:39.807

您应该使用它来更新：

```
$query = "UPDATE DB SET views=views+1 WHERE ID='$id'"; 
```

如果一个页面需要很长时间才能执行，您可以让一个查询覆盖另一个查询。同样使用它，您甚至可能不需要运行第一个查询 - 除非您想从中获取其他信息。

您收到错误的原因是一个脚本正在读取数据并获取值，然后根据它存储的值更新它 - 但同时其他脚本可能正在更新该行。你可以通过使用事务来避免它，但这对于你正在做的事情来说似乎太过分了。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-10T11:12:47.293

您需要停止使用`mysql_*`，因为这些功能已被弃用

您无需进行 2 次查询即可将字段增加 1：

```
$query = "UPDATE DB SET views=views+1 WHERE ID='$id'"; 
```

和`PDO`例子：

```
$db = new PDO('mysql:host=localhost;dbname=mydb;charset=UTF-8', 'username', 'password', array(PDO::ATTR_EMULATE_PREPARES => false, PDO::ATTR_ERRMODE => PDO::ERRMODE_EXCEPTION));
$stmt = $db->prepare("UPDATE DB SET views=views+1 WHERE ID=:id");
$stmt->execute(array(':id' => $id)); 
```

阅读有关[准备好的语句和 PDO的更多信息](http://wiki.hashphp.org/PDO_Tutorial_for_MySQL_Developers)

# macos - 在山狮中安装 gcc

> ID：12350444
> 
> 赞同：3
> 
> 时间：2012-09-10T11:11:07.097
> 
> 标签：macos, gcc, llvm, osx-mountain-lion, rbenv

我需要 GCC 来获取一些 Ruby 宝石。我还需要 LLVM 来使用 Xcode 4.4 进行 iOS 开发。我已经通过 Xcode 安装了 LLVM。

如何在不影响任何 LLVM 二进制文件的情况下在 Mountain Lion 中安装 GCC？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-19T19:57:06.857

事实是，因为你有 Xcode，所以你的系统上**已经**安装了 GCC。如果您尝试从终端运行 GCC 并得到“找不到命令”，那么原因是，从 OS X 10.8（Mountain Lion）开始，Xcode 默认不安装 GCC“命令行工具”。安装过程取决于您的 OS X 和 Xcode 版本：

在 OS X 10.8 (Xcode 4.4) 中安装 GCC 命令行工具：
Xcode -> Preferences -> Download -> Components -> Command Line Tools -> install

在 OS X 10.9 (Xcode 5.02) 中安装 GCC 命令行工具：
我自己没有尝试过这些说明，但如果有人尝试它们并且它们有效，我会将它们移到这里：http:
[//osxdaily.com/2014/02/ 12/安装-命令行-工具-mac-os-x/](http://osxdaily.com/2014/02/12/install-command-line-tools-mac-os-x/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-13T03:33:12.457

升级到 Mountain Lion 后遇到同样的问题。

我的修复，我在`/Developer/usr/bin`.

```
setenv PATH $PATH":/Developer/usr/bin" 
```

将它们放回路径中。

哦，是的，我在 Xcode 3.x 上。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-10T11:16:35.233

安装[macports](http://macports.org)并运行：

```
$ sudo port install gcc 
```

从命令行。大约有[20 种不同版本的 gcc 作为 Macports 可用](http://www.macports.org/ports.php?by=name&substr=gcc)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-10T12:48:50.730

我有自制的。所以我做了这个。

```
brew install --enable-all-languages https://raw.github.com/Homebrew/homebrew-dupes/master/gcc.rb 
```

有效！

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-05-15T18:35:55.827

在 Mac 上安装任何东西的最简单方法是使用[Homebrew](http://mxcl.github.io/homebrew/)。为此目的有一个软件包：

```
brew tap homebrew/dupes
brew install apple-gcc42 
```

# c# - 慢速 ASP.NET 映射处理程序 - 编译 ASP.NET

> ID：12350449
> 
> 赞同：3
> 
> 时间：2012-09-10T11:11:18.307
> 
> 标签：c#, asp.net, performance, iis

**我对ASP.NET Map Handler**有性能问题。我有两个带有 .aspx 页面的文件夹。当计算机重新启动（启动）后首次加载应用程序时，用户在第一个文件夹中的一个页面到第二个文件夹中的另一个页面之间切换 - 这需要很长时间（图像上为 8 秒）。我使用始终预编译的 ASP.NET Web 应用程序项目。调试模式是发布。为什么在图像上运行**ASP.NET 编译**（性能监视器）？？？

![性能监视器](../Images/eed5c5b59f28c40d84d3a91f733ed70b.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T08:31:58.560

The results you are seeing are basically in line with the behaviour I expect from ASP.NET. 8 seconds startup is pretty standard for the first request at application start.

You may wish to look into [ASP.NET Precompilation](http://msdn.microsoft.com/en-us/library/bb398860%28v=vs.100%29.aspx) which may or may not help you - you'll have to try (I've experienced variable results).

# rest - 无法在 Swagger 中使用 REST 注释

> ID：12350450
> 
> 赞同：0
> 
> 时间：2012-09-10T11:11:23.067
> 
> 标签：rest, swagger, api-doc

我已经下载了 swagger ui 并在本地进行了实验。它在 "path"、"body" 和 "query" 等场景中运行良好。但是我的大多数用例都使用了其余注释。

即 /resourcePath/;tags 用于检索特定资源标签的 URI。

当我尝试这个时，添加分号时 UI 会变得混乱，并且排序的 UI 格式不正确，并且不能超出此范围。

那么这是一个已知的限制吗？有没有办法实现这个目标？感谢对此的任何输入..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T04:27:16.540

Swagger 期望您`path`在大括号中指定参数，例如`{tags}`，并将参数查询为逗号分隔，例如`id=1,2,3,4`. 一些框架使用分号作为分隔符，但 swagger 喜欢逗号。

你能用一个更具体的例子来描述你想要做什么吗？根据设计，对 api 的注释属于操作的`description`和`notes`字段，请参阅[swagger-core wiki](https://github.com/wordnik/swagger-core/wiki)了解详细信息。

[Swagger codegen](https://github.com/wordnik/swagger-codegen)项目有一个验证器，可用于验证您的规范是否正确格式化。

# html - 风格化 在非 FF 浏览器上显示的边框半径大于定义的高度

> ID：12350452
> 
> 赞同：1
> 
> 时间：2012-09-10T11:11:30.133
> 
> 标签：html, firefox, css, cross-browser

我`<hr>`在`<span>`. 在 FF 上，该行是 2px 高，如预期和 CSS 中所声明的那样。然而，当我在 Safari、Chrome 或 IE9 上查看它时，这条线看起来要粗得多。事实上，当`<hr>`使用 Safari 的 Firebug 等效项进行检查时，它会将其视为**4px**。

`border-radius`这是 Firefox 上不明显的 CSS 属性的问题吗？我希望它看起来像我如何构建标记和 CSS 以及它在 Firefox 中的显示方式，但我不确定标记有什么问题。

这是它在 Firefox 上的外观：

![Firefox 上的 HR](../Images/8a76bbbe354503a274eabec59f6ac52e.png)

这是它在 Safari（和 IE9/Chrome）上的外观：

![Safari 上的 HR](../Images/5e93fbee3fcc96ef6db3dea4d2d7b96b.png)

我的标记：

```
<span id="course_divider"><hr></span> 
```

我的 CSS：

```
#course_divider {
    left: 0;
    padding-top: 40px;
    position: absolute;
    top: 27px;
    width: 25px;
}

#course_divider hr {
    background-color: #000000;
    border: 1px solid black;
    border-radius: 7px 7px 7px 7px;
    height: 2px;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-10T11:16:44.300

`height`从_

```
#course_divider hr {
    background-color: #000000;
    border: 1px solid black;
    border-radius: 7px 7px 7px 7px;
    height: 2px;
} 
```

你会得到你的解决方案:-)

演示 [http://jsfiddle.net/kMhEv/2/](http://jsfiddle.net/kMhEv/2/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-10T11:52:56.807

这只是你的css与盒子模型相关的问题。

您的高度为 2 像素，边框宽度为 1 像素。

因此，在顶部/右侧/底部/左侧创建了 1px 的盒子模型。

所以你 2px 高度加上 1px 顶部 + 底部边框宽度 = 4px 高度。

删除 2px 的高度，它应该一切都好。

您的背景颜色也不是必需的。

```
#course_divider hr {
 border: 1px solid black;
 border-radius: 7px 7px 7px 7px;
} 
```

# javascript - 动态添加文本以指向 highcharts.js 中的弹出窗口

> ID：12350456
> 
> 赞同：1
> 
> 时间：2012-09-10T11:11:44.297
> 
> 标签：javascript, highcharts

我遇到了在点出现的弹出窗口中包含文本的问题，这是示例的[链接](http://jsfiddle.net/tGguS/1/)。我想在每个弹出点放置我自己的名为 myText 的数组中的文本。有什么建议么？

链接到[jsFiddle](http://jsfiddle.net/tGguS/1/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-10T11:28:11.813

试试这个作为格式化函数：

```
tooltip: {
    formatter: function() {
        return '<b>'+ myText[this.point.x] +'</b>';
    }
} 
```

jsFiddle在这里：http: [//jsfiddle.net/tGguS/2/](http://jsfiddle.net/tGguS/2/)

# java - 使用 Morphia 和 Mongodb 持久化和检索地图地图

> ID：12350458
> 
> 赞同：6
> 
> 时间：2012-09-10T11:11:45.483
> 
> 标签：java, mongodb, map, multidimensional-array, morphia

我希望能够持久保存和检索 MongoDB 集合中的地图地图等。我正在使用 Java 通过 Morphia 访问 MongoDB。

我在下面使用的示例是一个集合，其中包含详细说明各种汽车所有者的文档。在此示例中，特定品牌和型号的车辆数量存储在地图中

大多数属性都可以正常工作，没有遇到任何问题，但是对于属性是按以下方式定义的映射的映射的情况：

```
@Property("vehicles")
private Map<String, Map<String, Integer> vehicles = new HashMap<String, HashMap<String, Integer>>(); 
```

该对象被创建（一些值插入到地图中）并保存到 Mongo 数据库中，正如人们所期望的那样：

```
"vehicles" : {
    "FORD" : {
        "FIESTA" : 1
    },
    "TOYOTA" : {
        "COROLLA" : 1,                  
        "PRIUS": 1
    },
    "BMW" : {
        "SLK" : 1
    }
} 
```

但是，当通过 java 代码检索对象时（MongoDB 控制台上的查询按预期工作））以下列方式...

```
Query<Owner> q = ds.find(Owner.class);    
System.out.println(q.countAll());
Iterable<Owner> i = q.fetch();
for (Owner o : i) {
    System.out.println(o);
} 
```

...代码在 q.fetch() 行上以一种可怕的方式死亡。

请帮忙 ：）

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-11T08:18:51.007

问题源于 Map（作为接口）没有默认构造函数，并且当 Morphia 正确地为外部 Map 上的具体 HashMap 分配构造函数时，它未能解析内部 Map 的构造函数。这导致了 NullPointerException。

经过大量调试和尝试这个和那个，最终我（在同事的帮助下）偶然发现了解决方案。

*   不要使用@Property 注释，而是使用@Embedded。和
*   使用具体的 HashMap 声明地图，而不使用 Map 接口

    ```
    @Embedded("vehicles")
    private HashMap<String, HashMap<String, Integer>> vehicles = new HashMap<String, HashMap<String, Integer>>(); 
    ```

对于那些想知道的人......在@Property 或@Embedded 注释中指定具体类对解决内部HashMap 的构造函数没有任何帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-06-10T11:15:52.643

由于我们以这种方式使用我们自己的数据类型

```
private HashMap<String, HashMap<String, OwnDataType>> vehicles = new HashMap<String, HashMap<String, OwnDataType>>(); 
```

以前的所有建议都不起作用；唯一使 morphia 正确读取数据的方法是将 OwnDataType 转换为复数形式，即在 OwnDataType 本身内保留一个地图，而不是在地图内使用地图：

```
private HashMap<String, OwnDataTypes> vehicles = new HashMap<String, OwnDataTypes>(); 
```

现在一切正常。

# ivy - 如何对同一个 jar 进行两次修订？

> ID：12350459
> 
> 赞同：1
> 
> 时间：2012-09-10T11:11:44.990
> 
> 标签：ivy

我有同一个 jar 的两个版本（3.2 和 2.2.1）我需要同时使用它们，但 ivy 会驱逐旧版本。如何配置ivy取两个版本？

```
 <dependency org="asm" name="asm-all" rev="3.2">
      <artifact name="asm-all" type="jar"/>
    </dependency>

    <dependency org="asm" name="asm-all" rev="2.2.1">
    <artifact name="asm-all" type="jar"/>
    </dependency> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T17:56:05.923

您需要使用[常春藤配置](http://ant.apache.org/ivy/history/latest-milestone/ivyfile/configurations.html)。这是一种非常灵活的机制来管理任意组的依赖关系。

下面的示例将每个版本的 jar 放置到单独的配置中。稍后可以使用 ivy [cachepath](http://ant.apache.org/ivy/history/latest-milestone/use/cachepath.html)任务来创建两个类路径。

# 例子

## 常春藤.xml

```
<ivy-module version="2.0">
    <info organisation="com.myspotontheweb" module="demo"/>

    <configurations>
        <conf name="compile1" description="Required to compile application1"/>
        <conf name="compile2" description="Required to compile application2"/>
    </configurations>

    <dependencies>
        <!-- compile1 dependencies -->
        <dependency org="asm" name="asm-all" rev="3.2" conf="compile1->master"/>

        <!-- compile2 dependencies -->
        <dependency org="asm" name="asm-all" rev="2.2.3" conf="compile2->master"/>
    </dependencies>

</ivy-module> 
```

**笔记：**

*   [Maven Central 中不存在](http://search.maven.org/#search%7Cgav%7C1%7Cg:%22asm%22%20AND%20a:%22asm-all%22)版本 2.2.1
*   注意配置映射“??? -> master”。在 Maven 中，远程*主*配置映射解析为没有依赖关系的主模块工件。（[见](https://stackoverflow.com/questions/7104364/how-are-maven-scopes-mapped-to-ivy-configurations-by-ivy/7116577#7116577)）

## 构建.xml

```
<project name="demo" default="init" xmlns:ivy="antlib:org.apache.ivy.ant">

    <target name="init" description="Use ivy to resolve classpaths">
        <ivy:resolve/>

        <ivy:report todir='build/ivy' graph='false' xml='false'/>

        <ivy:cachepath pathid="compile1.path" conf="compile1"/>
        <ivy:cachepath pathid="compile2.path" conf="compile2"/>
    </target>

    <target name="clean" description="Clean built artifacts">
        <delete dir="build"/>
    </target>

    <target name="clean-all" depends="clean" description="Additionally purge ivy cache">
        <ivy:cleancache/>
    </target>

</project> 
```

**笔记：**

*   生成常春藤报告总是一个好主意。它会告诉你哪些依赖项存在于哪个 ivy 配置上。
*   此示例显示了 ivy 管理 ANT 路径。在组装 webapp WAR 文件之类的文件时，您还可以使用 ivy 配置和 ivy 检索任务来填充本地“lib”目录。

# iphone - 将 drupal-ios-sdk 与 iPhone 应用程序集成的问题

> ID：12350464
> 
> 赞同：2
> 
> 时间：2012-09-10T11:11:55.283
> 
> 标签：iphone, ios, drupal, drupal-modules

[我从github](https://github.com/workhabitinc/drupal-ios-sdk)下载了 Drupal-iOS-SDK， 还[从这里](https://github.com/workhabitinc/drupal-ios-sdk)下载了 AFNetworking 文件。

然后我将文件添加到我的项目中，但它显示了一个奇怪的错误

> 不兼容的块指针类型将“void (^)(NSInteger, NSInteger, NSInteger)”发送到“void (^)(NSInteger, long long, long long)”类型的参数

对于这段代码：

```
AFHTTPRequestOperation *operation = [[AFHTTPRequestOperation alloc] initWithRequest:request];
[operation setUploadProgressBlock:^(NSInteger bytesWritten, NSInteger totalBytesWritten, NSInteger totalBytesExpectedToWrite) {
        NSLog(@"Sent %d of %d bytes", totalBytesWritten, totalBytesExpectedToWrite);
    }]; 
```

有谁知道这意味着什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T11:20:10.510

您将三个`NSInteger`s 作为参数发送到`setUploadProgressBlock`预期的一个`NSUInteger`（无符号整数）和两个`long long`参数

`totalBytesWritten`并且`totalBytesExpectedToWrite`需要是类型`long long`，因为这是它们的定义方式，而不是`NSInteger's。您的代码应如下所示：

```
AFHTTPRequestOperation *operation = [[AFHTTPRequestOperation alloc] initWithRequest:request];
[operation setUploadProgressBlock:^(NSUInteger bytesWritten, long long totalBytesWritten, long long totalBytesExpectedToWrite) {
    NSLog(@"Sent %d of %d bytes", totalBytesWritten, totalBytesExpectedToWrite);
}]; 
```

您可能还想相应地修改您的 NSLog，因为它已设置为，`long long`因此编译器不会抱怨。

```
NSLog(@"Sent %lld of %lld bytes", totalBytesWritten, totalBytesExpectedToWrite); 
```

# php - symfony 2 版本的 LdapBundle 错误

> ID：12350465
> 
> 赞同：0
> 
> 时间：2012-09-10T11:11:55.593
> 
> 标签：php, symfony

我正在使用这个[`LdapBundle`](https://github.com/BorisMorel/LdapBundle)。我已经安装了它，但我发现一个错误：

> 致命错误：`Symfony\Bundle\SecurityBundle\DependencyInjection\SecurityExtension::addSecurityListenerFactory()`在第 41 行调用 C:\wamp\www\trainingboard\src\IMAG\LdapBundle\IMAGLdapBundle.php 中的未定义方法

我知道我必须将我的 Symfony 版本更改为 2.1。我试图在供应商中更改文件夹 Symfony，但之后我又遇到了另一个错误。所以，我不能这么简单地改变 Symfony。你能给我建议该怎么做吗？

PS现在我用的是2.0.9版本的Symfony

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T13:25:31.463

IMGLdapBundle 仅适用于 Symfony 2.0.x

相反，您可以尝试 FR3DLdapBundle 1.6.x

# c++ - 在完全专用的模板函数中实例化一个类的对象

> ID：12350466
> 
> 赞同：0
> 
> 时间：2012-09-10T11:11:57.730
> 
> 标签：c++, visual-studio-2010, templates, friend-function

我不知道为什么我不能在一个完全专门的函数中实例化 B 类的对象，尽管在 B 类中声明该函数为朋友。请帮助。我不知道这是否是一个愚蠢的怀疑但我是第一次学习 C++ 模板。我收到以下错误：

```
1>c:\users\google drive\learnopencv\learningc\templateexample.cpp(12): error C2065: 'B' : undeclared identifier
1>c:\users\google drive\learnopencv\learningc\templateexample.cpp(12): error C2062: type 'int' unexpected
1>
1>Build FAILED.
1>
1>Time Elapsed 00:00:00.37
========== Build: 0 succeeded, 1 failed, 0 up-to-date, 0 skipped ==========

#include "stdafx.h"
    using namespace std;
    template<typename V>
    void DoSomething(V v) //Generic Function
    {
        B<char> s;
        s.data=1;
    };
    template<>
    void DoSomething<int>(int cv) //Specialized Function
    {
        B<int> b1l; // not able to instantiate an object of class B
    };
    template<typename T>                  //Template class B
    class B
    {
        int data;
        template<class X1>
        friend void DoSomething<X1>(X1);
    };

    int main(int argc,char *argv[])
    {
        int x=12;
        DoSomething(x);

        return 0;
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T11:14:31.763

当你定义

```
template<typename V>
void DoSomething(V v) //Generic Function
{
    B<char> s;
    s.data=1;
}; 
```

`B`尚未定义，因此您会收到错误消息。没有什么是重新排序无法解决的：

```
using namespace std;
template<typename T>                  //Template class B
class B
{
    int data;
    template<class X1>
    friend void DoSomething(X1);
};
template<typename V>
void DoSomething(V v) //Generic Function
{
    B<char> s;
    s.data=1;
};
template<>
void DoSomething<int>(int cv) //Specialized Function
{
    B<int> b1l; // not able to instantiate an object of class B
}; 
```

# tfs - TFS 构建错误“删除二进制目录失败，目录不为空”

> ID：12350467
> 
> 赞同：2
> 
> 时间：2012-09-10T11:11:58.323
> 
> 标签：tfs, tfsbuild

我有一个夜间构建规则，它“随机”失败并显示“目录不为空”（抱歉无法发布图像，但这是日志的输出）

> 总体构建过程
> 00:51 更新内部版本号 00:00 创建放置位置
> 00:00 在代理上运行（保留的构建代理...）
> 00:50 删除测试结果目录
> 00:00 删除二进制目录
> 00:02 ！目录不为空

我目前有 2 个构建代理用于这个特定的夜间构建，我看到它在两个代理上都失败了。我可以在早上手动排队这个构建并且它构建没有问题（我再次在两个代理上都看到了这个）

我找不到与此问题相关的任何特定帖子（仅是 MSBuild 无法删除二进制目录的问题，但这不是 MSBuild）或网络上的任何内容。

有谁知道是什么原因造成的？

在构建时没有用户登录到构建 PC 或代理中打开的任何目录。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T09:12:53.710

如果我也通过计算机上的管理员共享打开目录，我已经看到此错误发生。\构建服务器\c$

# hadoop - 我可以通过将 itemid 列与 userid 交换来使用基于 item 的 Hadoop 实现来实现基于用户的实现吗？

> ID：12350468
> 
> 赞同：0
> 
> 时间：2012-09-10T11:12:02.877
> 
> 标签：hadoop, mahout, recommendation-engine

我想使用基于用户的推荐做一个基准测试。`itemID`那么我可以只交换and的列值`userID`吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T11:47:34.020

不完全的。您可以交换用户和项目，但您是在向用户推荐项目，而不是向用户推荐项目。但是是的，它将基于用户与用户的相似性，因为您将用户用作项目。

Hadoop 本身没有基于用户相似性的实现。

# ruby-on-rails - 在 Rails 控制器中解析 JSON 数据

> ID：12350472
> 
> 赞同：0
> 
> 时间：2012-09-10T11:12:39.713
> 
> 标签：ruby-on-rails, json, routing

显然，这个问题有点像 Rails 初学者问题，但对我来说至关重要。

我正在尝试获取多个变量（不止一个 id，参数如**username**，**versionNo**），没有具体的。我想了解的是，我正在编写移动应用程序的后端，当客户端向我发送带有 post 的 JSON 变量时，我应该在其中尝试对其进行序列化，以便将其用于数据库查询等操作. 我假设它将在控制器上，但仍然只是想确定一下。

同样在预定义的 7 种方法中，我假设**index**方法是最适合进行数据库查询等操作的函数。由于有多个参数，我认为**show**操作不可行。但是这里同样有大量的 Rails 专家。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T11:51:05.513

根据 CRUD，POST 请求应该等于控制器中的 create 方法。在这里阅读更多：http: [//guides.rubyonrails.org/routing.html#crud-verbs-and-actions](http://guides.rubyonrails.org/routing.html#crud-verbs-and-actions)

# c# - 找不到图片路径文件

> ID：12350474
> 
> 赞同：3
> 
> 时间：2012-09-10T11:12:40.727
> 
> 标签：c#, .net, winforms, visual-studio-2010, filenotfoundexception

我花了很长时间试图解决这个问题，但无济于事。我已经搜索了 stackoverflow 和 Google，但无法解决我的（看似）简单的问题。

我在以下行中收到 FileNotFoundException：

```
Image.FromFile("\\Resources\\Icons\\key-icon.png"); 
```

文件夹和图像确实在那里，我看不出问题出在哪里。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-10T11:21:57.920

您应该考虑它是从“yourproject/bin/Release”开始的，因此您需要向上 2 个目录。做这个：

```
Image.FromFile("..\\..\\Resources\\Icons\\key-icon.png"); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-10T11:19:47.860

尝试使用绝对路径而不是相对路径...即

```
Image.FromFile(Server.MapPath(@"~\Resources\Icons\key-icon.png")); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-10T11:50:59.150

```
Image.FromFile(Path.Combine(AppDomain.CurrentDomain.BaseDirectory,
                            @"Resources\\Icons\\key-icon.png")) 
```

基目录结合你的文件名

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-10T11:14:51.507

您可能缺少前导“。”：

```
Image.FromFile(".\\Resources\\Icons\\key-icon.png"); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-10T11:22:32.010

在内部，`Image.FromFile`用于`File.Exists`检查文件是否存在。此方法在以下情况下返回`false`：

*   该文件不存在（有意义）
*   当前进程标识没有读取文件的权限

可能是第二个选项是您的问题。

还有另一种可能：是`Resources`网络共享吗？在这种情况下，您应该使用以下内容：

```
Image.FromFile("\\\\Resources\\Icons\\key-icon.png"); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-03-26T15:28:33.727

对于这种情况，我发现 sikuli 不会自动检测项目的根文件夹。对于这种情况，您应该做的是使用命令指定文件夹`System.getProperty("user.dir");`

```
import org.sikuli.script.*;

public class Test {

    public static void main(String[] args) {
            Screen s = new Screen();
            try{
                    String pathYourSystem = System.getProperty("user.dir") + "\\";
                    s.click(pathYourSystem + "imgs/spotlight.png");
                    //s.wait(pathYourSystem + "imgs/spotlight-input.png");
                    //s.click();
                    s.write("hello world#ENTER.");
            }
            catch(FindFailed e){
                    e.printStackTrace();
            }
    }
} 
```

# java - 具有 Java 和平台独立性的 openssl

> ID：12350475
> 
> 赞同：0
> 
> 时间：2012-09-10T11:12:41.400
> 
> 标签：java, openssl, platform-independent

如果我将 openssl 与 java 一起使用，我会失去代码的平台独立性吗？我希望我的代码在 linux 和 windows 中都能工作。

# java - 安卓语言本地化

> ID：12350486
> 
> 赞同：1
> 
> 时间：2012-09-10T11:13:15.017
> 
> 标签：java, android, eclipse

我为 es、en、it 和 fr 正确设置了语言和文件夹。现在我需要为加泰罗尼亚语设置值文件夹，我将其设置为“values-ca-rES”。但是，eclipse 创建了一个名为 strings.out.xml 的文件并生成了一个错误。我错过了什么？谢谢你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T11:15:37.970

在 Eclipse 中，当您单击图标运行时，它将运行您在包资源管理器中选择的文件。

![在此处输入图像描述](../Images/e577d3eba10772e5a14c0965894ae65e.png)

只需删除“strings.out.xml”并确保您在运行应用程序时从包资源管理器中单击了您的根文件夹（项目名称）。

您正在使用这样的 String.xml 选择来运行项目

![在此处输入图像描述](../Images/a5dc88ff83eb88745224907a70031af6.png)

因此，只需选择根文件夹（在我的情况下为 SimpleDemo）。 ![在此处输入图像描述](../Images/7c779e677fec1a2fea6f6a777428deba.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T11:18:27.347

当有人试图通过 XML 文件运行应用程序时，Eclipse 会自动生成 *.out.xml 文件。

确保从项目目录中删除生成的 out.xml 文件并在选择 .java 文件后运行您的应用程序。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-10T11:26:46.850

我面临同样的问题

这是 Eclipse 中的一个错误，您应该从 Java 文件而不是 xml 运行您的应用程序。

只需删除 .out 文件，然后再次尝试运行。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-10T12:23:24.643

当我们运行 XML 文件时会出现此错误。删除 main.out。文件（从左侧）。单击相应的 java 文件并运行它。现在它可以正常工作了。注意：始终运行 Java 文件。

# extjs4 - EXTJS 中同一个按钮的一个视图和多个控制器操作

> ID：12350489
> 
> 赞同：1
> 
> 时间：2012-09-10T11:13:27.857
> 
> 标签：extjs4, extjs, extjs-mvc

我的 EXTJS 应用程序中有一个删除按钮。单击按钮时，我会打开一个确认表单，询问用户他们是否确定要删除该项目。删除按钮是我的应用程序中许多表单的一部分。无论使用何种形式，我都会打开确认窗口。

在确认窗口中单击“是”按钮时，我想做一些操作。但是这些操作必须特定于首先打开的表单。所以，我很困惑如何使用相同的视图、相同的按钮，但不同的操作取决于打开的第一个表单。

查看：这是在任何表单中单击删除按钮时打开的窗口

```
 Ext.define('app.view.GenMessageWin', {
extend : 'Ext.panel.Panel',
alias : 'widget.genmessagewin',

  var fp = {
        xtype : 'panel',
        itemId : 'MSGPANEL',
        width : Width,
        height : 150,
        cls : 'msg effect1',
        layout : 'form',
        border : false,
        items : [{
            xtype : 'panel',
            //cls : 'winTitle',
            html : msgTxt,
            border : 0
        }, {
            xtype : 'form',
            itemId : 'MSGFORM',
            border : false,
            title : '',
            buttonAlign : 'center',
            fieldDefaults : {
                msgTarget : 'side',
                labelWidth : 110,
                size : 30
            },

            buttons : [{
                text : LANG.BTYES,
                iconCls : 'icon-tick-tb',
                iconAlign : 'right',
                cls : 'tip-btn',
                action : 'delete',
                id : 'BTYES'
            }, {
                text : LANG.BTNO,
                iconCls : 'icon-cross-tb',
                iconAlign : 'right',
                cls : 'tip-btn',
                action : 'notDelete',
                id : 'BTNO'
            } ] 
```

控制器

```
 init : function() {

         this.control({

        'button[action = delete]' : {
            click : this.delete
        },
        'button[action = notDelete]' : {
            click : this.notDelete
        }, 
```

因此，在删除动作中，我们首先要确定打开了哪个表单，然后相应地删除数据。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T11:34:47.997

您有 3 个选项：

1）使选择器更具体：

```
'form1 button[action=delete]': {
    click: this.form1Delete
},

form1Delete: function(){
    this.showMsg(function() {
        // form 1 delete
    });
} 
```

2）回溯组件层次结构，找到打开的表单

```
onDelete: function(btn) {
    var form = btn.up('form'); // find an xtype form or subclass
    if (form.someCondition) {
       //foo
    } else {
        //bar
    }
} 
```

3) 正如德米特里所建议的那样。您需要将其转换为“MVC 样式”。

```
Ext.define('ConfirmButton', {
    extend: 'Ext.button.Button',

    title: '',
    msg: '',

    requires: ['Ext.window.MessageBox'],

    initComponent: function(){
        this.callParent();
        this.on('click', this.handleClick, this);
    },

    handleClick: function(){
        Ext.MessageBox.confirm(this.title, this.msg, this.checkResponse, this);
    },

    checkResponse: function(btn){
        if (btn == 'yes') {
            this.fireEvent('confirm', this);
        }
    }
});

Ext.onReady(function(){

    var btn = new ConfirmButton({
        renderTo: document.body,
        text: 'Foo',
        title: 'Should I',
        msg: 'Are you sure'
    });

    btn.on('confirm', function(){
        console.log('Do something');
    })

}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-10T11:38:17.730

我认为您应该在按钮中嵌入“确认”功能，即创建您自己的`ConfirmButton`类，只有当对话框以“是”退出时，才会在按下并执行传递的处理程序时首先触发一个对话框。

这是示例实现：

```
Ext.define('My.ConfirmButton',  {
    extend: 'Ext.button.Button',
    alias: 'widget.confirmbutton',

    dlgConf: {
        title: 'Are you sure?',
        msg: 'Are you sure you want to delete this?',
        buttons: Ext.Msg.YESNO,
        closable: false
    },

    initComponent: function() {
        this.callParent(arguments);
        // remember the originally passed handler
        this.origHandler = this.handler;
        this.origScrope = this.scope;

        // override current handler to fire confirmation box first
        this.handler = this.confirmHandler;
        this.scope = this;
    },

    confirmHandler: function(me, e) {
        // show dialog and call the original handler only on 'yes'
        Ext.Msg.show(Ext.applyIf({
            fn: function(buttonId) {
                if(buttonId == 'yes') {
                    me.origHandler && me.origHandler.call(me.origScope || me, me, e)
                }
            },
            scope: me
        }, this.dlgConf))
    },

    // Method used to dynamically reassign button handler
    setHandler: function(handler, scope) {
        // remember the originally passed handler
        this.origHandler = this.handler;
        this.origScrope = this.scope;

        // override current handler to fire confirmation box first
        this.handler = this.confirmHandler;
        this.scope = this;

        return this;
    },
}); 
```

这是示例用法：

```
Ext.create('My.ConfirmButton', {
    text: 'Delete me',
    renderTo: Ext.getBody(),
    handler: function() {
        alert('Aww, you deleted something! :(')
    }
}); 
```

如您所见，确认逻辑对外界是隐藏的，您使用此按钮的方式与使用常规 Ext.Button 完全相同（通过将 a 传递`handler`给它）。此外，您可以覆盖按钮触发的对话框的配置（您可能希望根据需要对其进行调整，例如允许将记录名称传递给对话框以获得更友好的 UI）。

请注意，代码未经过彻底测试，某些情况可能未被发现。

UPD。您需要在组件类定义中添加一个`alias`(former `xtype`)，以便您可以在控制器代码的 ComponentQuery 中使用它，例如

```
this.control({
    'confirmbutton[action = delete]' : {
        click : this.delete
    },
    'confirmbutton[action = notDelete]' : {
        click : this.notDelete
    }
}) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-10T11:32:37.357

我正在做类似的事情；我只是使用原生的 Ext.Msg 类

控制器代码

```
,onDelete: function() {
    var me = this;
    Ext.Msg.show({
        title:'Really shure?',
        msg: 'Really wanna do this?',
        buttons: Ext.Msg.YESNO,
        icon: Ext.Msg.QUESTION,
        closable: false,
        fn: function(btn) {
            if (btn == 'yes') {
                me.deleteRecord();
            }
        },
        scope: me
    });
}
,deleteRecord: function() {
    var me = this,
        store = Ext.StoreMgr.lookup('datastore');
    store.remove(me.selectedRecord);
    store.sync();
} 
```

我建议您将所有与此相关的逻辑保留在控制器中。在你的情况下，这似乎没问题，因为你只是捕捉按钮事件。如果您使用完全相同的窗口，您的问题可能是所有控制器都捕获了这些。

例如，您可以通过在创建窗口时动态创建操作属性值来解决此问题。喜欢`action='onDeleteCar'`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-19T09:23:51.767

我使用的最终解决方案是使用全局命名空间声明变量，以便可以从任何地方访问它们。在打开第一个表单时，我使用记录变量从表单中获取数据，并为它们分配一个全局名称，例如

```
App1.Var1 = record.data.id; 
```

并且，在打开删除窗口时，单击按钮时 App1.Var1 可以访问这些变量。

# java - Big O for 2D for 循环

> ID：12350495
> 
> 赞同：2
> 
> 时间：2012-09-10T11:13:34.757
> 
> 标签：java, algorithm, big-o

我必须写下我必须为我的作业想出的算法的大 O 表示法。

我可以说下面的代码是`O(n^2)`. 因为对于每一个 x，我都必须经历所有的 y，随着世界变得越来越大，它变得越来越慢。

```
int[][] world = new world[20][20];
for (int x = 0; x < 20; x++)
{
    for (int y = 0; y < 20; y++)
    {
        ..
    }
} 
```

但是，对于另一个问题，我必须经过世界的下半部分，所以我的 y 循环减半。

```
int[][] world = new world[20][20];
for (int x = 0; x < 20; x++)
{
    for (int y = 10; y < 20; y++)
    {
        ..
    }
} 
```

我不太确定什么大 O 表示法适用于上述循环，是否仍然`O(n^2)`是因为世界越大它仍然变得越慢？还是`O(log n)`因为 y 减半了？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-10T11:15:05.463

简单地说`O(n*n/2)=O(n^2)`，因为在大 O 中没有考虑常量。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-10T11:16:08.287

因为`O(n^2)`y 仍然是 n 的函数，即`O(n^2/2)`仍然是`O(n^2)`。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-09-10T11:28:49.457

您的两种算法实际上都是 O(n) （假设 n 是输入中的位数，这是常见的定义）。第一个触摸世界数组中的每个“像素”一次，所以很容易看出它是 O(n)。第二个触摸了一半的像素，但仍然是 O(n)，因为 O(n/2) = O(n)。在这两种情况下，将世界数组的大小加倍或多或少都会使执行时间加倍，这是 O(n) 算法的典型特征。

# c - 无法建立网络

> ID：12350507
> 
> 赞同：2
> 
> 时间：2012-09-10T11:14:45.600
> 
> 标签：c, visual-c++, python-2.7

我正在尝试为 Windows 构建 python netifaces。我正在使用 microsoft visual c++ express 2010 版。当我运行命令 python setup.py install 我得到以下日志和错误：

```
running install
running bdist_egg
running egg_info
writing netifaces.egg-info\PKG-INFO
writing top-level names to netifaces.egg-info\top_level.txt
writing dependency_links to netifaces.egg-info\dependency_links.txt
reading manifest file 'netifaces.egg-info\SOURCES.txt'
writing manifest file 'netifaces.egg-info\SOURCES.txt'
installing library code to build\bdist.win32\egg
running install_lib
running build_ext
building 'netifaces' extension
c:\Program Files\Microsoft Visual Studio 10.0\VC\BIN\cl.exe /c /nologo /Ox /MD /
W3 /GS- /DNDEBUG -DWIN32=1 -DNETIFACES_VERSION=0.8 -Ic:\python27\include -Ic:\py
thon27\PC /Tcnetifaces.c /Fobuild\temp.win32-2.7\Release\netifaces.obj
netifaces.c
netifaces.c(410) : error C2275: 'PyObject' : illegal use of this type as an expr
ession
        c:\python27\include\object.h(108) : see declaration of 'PyObject'
netifaces.c(411) : error C2275: 'PyObject' : illegal use of this type as an expr
ession
        c:\python27\include\object.h(108) : see declaration of 'PyObject'
netifaces.c(720) : error C2275: 'PyObject' : illegal use of this type as an expr
ession
        c:\python27\include\object.h(108) : see declaration of 'PyObject'
netifaces.c(720) : error C2065: 'dict' : undeclared identifier
netifaces.c(722) : error C2065: 'dict' : undeclared identifier
netifaces.c(722) : warning C4047: '=' : 'int' differs in levels of indirection f
rom 'PyObject *'
netifaces.c(724) : error C2065: 'dict' : undeclared identifier
netifaces.c(734) : error C2065: 'dict' : undeclared identifier
netifaces.c(734) : warning C4047: 'function' : 'PyObject *' differs in levels of
 indirection from 'int'
netifaces.c(734) : warning C4024: 'PyDict_SetItemString' : different types for f
ormal and actual parameter 1
netifaces.c(736) : error C2065: 'dict' : undeclared identifier
netifaces.c(736) : warning C4047: 'function' : 'PyObject *' differs in levels of
 indirection from 'int'
netifaces.c(736) : warning C4024: 'PyDict_SetItemString' : different types for f
ormal and actual parameter 1
netifaces.c(738) : error C2065: 'dict' : undeclared identifier
netifaces.c(738) : warning C4047: 'function' : 'PyObject *' differs in levels of
 indirection from 'int'
netifaces.c(738) : warning C4024: 'PyDict_SetItemString' : different types for f
ormal and actual parameter 1
netifaces.c(744) : error C2065: 'dict' : undeclared identifier
netifaces.c(744) : warning C4047: 'function' : 'PyObject *' differs in levels of
 indirection from 'int'
netifaces.c(744) : warning C4024: 'add_to_family' : different types for formal a
nd actual parameter 3
error: command '"c:\Program Files\Microsoft Visual Studio 10.0\VC\BIN\cl.exe"' f
ailed with exit status 2 
```

抱歉格式不好我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T21:33:07.353

将 netifaces.c 重命名为 netifaces.cpp（并相应地更新 setup.py）。

原因是使用 .c 扩展名时，MSVC 将这些文件解释为遵循 C89，而 netifaces.c 不遵循；更多信息在这里： [错误C2275：非法使用这种类型作为表达式](https://stackoverflow.com/questions/9903582/error-c2275-illegal-use-of-this-type-as-an-expression)

# c# - 无法使用 feck 将消息从 javascript 发送到 c#

> ID：12350508
> 
> 赞同：0
> 
> 时间：2012-09-10T11:14:46.793
> 
> 标签：c#, javascript, websocket

所以我有一个问题。我想使用 feck 将一些消息从 javascript 发送到我的 c# 服务器。我在我的应用程序中启动了一个服务器，如下所示：

```
 var allSockets = new List<IWebSocketConnection>();
        var server = new WebSocketServer("ws://localhost:8081");
        server.Start(socket =>
        {
            socket.OnOpen = () => allSockets.Add(socket);
            socket.OnClose = () => allSockets.Remove(socket);
            socket.OnMessage = message =>
            {
                foreach (var s in allSockets.ToList())
                    s.Send(message);
            };
        }); 
```

在我的 javascript 方面，我有：

```
 function sendPodatke(){
        document.write('send!');
        socket.send("javascript");
        document.write('aftersend!');
    }

    function connect(){
    document.write('connect!');
      socket = new WebSocket('ws://localhost:8081');
      socket.onmessage = function(mess) {
        animateCharacter(mess.data);
      };

    };

    connect();
    sendPodatke(); 
```

所以我得到了写连接！，发送！但不是 afterSend。I在我的 c# 服务器上，我看到连接已完成，但我更新了一个 onMessage 调用..

有任何想法吗？

提前谢谢大家！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T12:35:15.613

websocket 握手是一个异步操作。您可以`onopen`在客户端中注册回调，并且只应在此运行后将数据从客户端发送到服务器。有关详细信息，请参阅[websocket API 文档](http://dev.w3.org/html5/websockets/#the-websocket-interface)。

# sql - 将所有外键的长度与其在 Oracle 中的 PK 匹配

> ID：12350509
> 
> 赞同：0
> 
> 时间：2012-09-10T11:14:47.633
> 
> 标签：sql, plsql

我们知道 PK 和 FKs 类型必须相同，Oracle 中的大小可以不同

1.  找到所有的外键，
2.  找到它们所引用的所有 PK
3.  比较长度
4.  如果 FK 很短，则使用 PK 的长度作为标准。

有人拿到剧本了吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T13:49:53.743

你可以试试这个（检查一个模式）：

```
select mcols.table_name , mcols.column_name, mcols.data_type, mcols.data_length, mcols.data_precision, mcols.data_scale, dcols.table_name, dcols.column_name, dcols.data_length, dcols.data_precision, dcols.data_scale
from user_tab_cols mcols, user_cons_columns mc, user_constraints dt, user_cons_columns dc, user_tab_cols dcols
where dt.constraint_type = 'R'  -- Referential constraints, i.e. foreign keys
and dt.r_constraint_name = mc.constraint_name
and dc.constraint_name = dt.constraint_name
and mc.position = dc.position
and mcols.table_name = mc.table_name
and mcols.column_name = mc.column_name
and dcols.table_name = dc.table_name
and dcols.column_name = dc.column_name
-- Filter to list only columns that differ
and (mcols.data_type <> dcols.data_type      -- Check for CHAR vs VARCHAR2
  or mcols.data_length <> dcols.data_length  -- Check length (for varchar columns)
  or nvl(mcols.data_precision, 0) <> nvl(dcols.data_precision, 0) -- Check precision (for number columns)
  or nvl(mcols.data_scale, 0) <> nvl(dcols.data_scale, 0)  -- Check scale (for number columns)
);
; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T16:15:18.263

```
SELECT cc.table_name,
       CC.COLUMN_NAME,
       TCF.DATA_TYPE || '(' || TCF.DATA_PRECISION || ',' || TCF.DATA_SCALE || ')' DTYPE1,
       rcc.table_name AS r_table_name,
       RCC.COLUMN_NAME AS R_COLUMN_NAME,
       TCP.DATA_TYPE || '(' || TCP.DATA_PRECISION || ',' || TCP.DATA_SCALE || ')' DTYPE2,
       cc.position
FROM   user_constraints c
       JOIN user_cons_columns cc ON c.owner = cc.owner AND c.constraint_name = cc.constraint_name
       JOIN USER_CONS_COLUMNS RCC ON C.OWNER = RCC.OWNER AND C.R_CONSTRAINT_NAME = RCC.CONSTRAINT_NAME AND CC.POSITION = RCC.POSITION
       JOIN USER_TAB_COLS TCF ON TCF.TABLE_NAME = CC.TABLE_NAME AND TCF.COLUMN_NAME = CC.COLUMN_NAME
       JOIN USER_TAB_COLS TCP ON TCP.TABLE_NAME = RCC.TABLE_NAME AND TCP.COLUMN_NAME = RCC.COLUMN_NAME
WHERE TCF.DATA_TYPE || '(' || TCF.DATA_PRECISION || ',' || TCF.DATA_SCALE || ')' != TCP.DATA_TYPE || '(' || TCP.DATA_PRECISION || ',' || TCP.DATA_SCALE || ')'
ORDER BY c.constraint_name, cc.table_name, cc.position; 
```

# linux - 如何在二进制模式下使用 wget 下载 - linux

> ID：12350515
> 
> 赞同：7
> 
> 时间：2012-09-10T11:15:13.940
> 
> 标签：linux, wget

我需要`*.tar.gz`从服务器下载文件，但是当我这样做时，我得到一个错误

```
ERROR: The ./files.tic seems to be corrupted. 
```

我想是因为它已经以ASCII模式下载，我需要以二进制模式下载。
如何以`wget`二进制模式运行？或任何其他命令来获取二进制文件。

这个文件来自`http`，不是`ftp`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T11:21:00.137

AFAIK 文件的 MIME 类型不会更改其内容。所以你应该已经得到了它的正确表示。HTTP 协议没有数据的文本/二进制类型。数据就是数据:)

有关详细信息，请参阅[http://en.wikipedia.org/wiki/Hypertext_Transfer_Protocol#Response_message](http://en.wikipedia.org/wiki/Hypertext_Transfer_Protocol#Response_message)。

# android - 显示闪屏的类

> ID：12350518
> 
> 赞同：0
> 
> 时间：2012-09-10T11:15:22.460
> 
> 标签：android, android-layout

我想创建一个“Flash”类来显示一个白色的 Flash 屏幕（200 毫秒），就像烤面包一样容易，像这样：

```
Flash.create(context).show(); 
```

*   该层应立即出现然后逐渐消失（alpha 过渡）
*   它不能捕获事件
*   它必须适应屏幕旋转
*   它可以从任何活动创建

我通过 WindowManager 寻找解决方案，但遇到了一些困难。您推荐什么解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T13:06:53.213

这样做有一些问题，因为您必须将 Activity 而不仅仅是 Context 传递到“Flash”屏幕中。因此屏幕旋转的处理会很棘手。

我创建并开源了一个[名为 Crouton 的小型库](https://github.com/neofoniemobile/Crouton)，它可以为您提供帮助。目前，在显示面包块时，它仍在努力解决方向变化的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T18:22:39.670

因此，如果它可以帮助任何人，我会给出自己的解决方案......（自从我的第一篇文章以来，我将调用更改为 flash 方法）

```
public class Flasher {

    private final static int DURATION_OFFSET = 300;
    private final static int DURATION_FADEIN = 50;
    private final static int DURATION_FADEOUT = 200;
    private Animation fadein;
    private Animation fadeout;
    private RelativeLayout flash;
    private RelativeLayout view;
    private Toast toast;
    private int count;

    public Flasher(Context context) {
        fadein = new AlphaAnimation(0, 1);
        fadein.setStartOffset(DURATION_OFFSET);
        fadein.setDuration(DURATION_FADEIN);
        fadein.setAnimationListener(new AnimationListener() {
            @Override public void onAnimationStart(Animation anim) {}
            @Override public void onAnimationRepeat(Animation anim) {}
            @Override public void onAnimationEnd(Animation anim) {
                flash.startAnimation(fadeout);
            }
        });
        fadeout = new AlphaAnimation(1, 0);
        fadeout.setDuration(DURATION_FADEOUT);
        fadeout.setAnimationListener(new AnimationListener() {
            @Override public void onAnimationStart(Animation anim) {}
            @Override public void onAnimationRepeat(Animation anim) {}
            @Override public void onAnimationEnd(Animation anim) {
                if(count > 1) {
                    flash(count - 1);
                } else {
                    cancel();
                }
            }
        });
        LayoutParams params = new LayoutParams(-1, -1);
        flash = new RelativeLayout(context);
        flash.setLayoutParams(params);
        flash.setBackgroundColor(0xffffffff);
        flash.setVisibility(View.INVISIBLE);
        view = new RelativeLayout(context);
        view.setLayoutParams(params);
        view.addView(flash);
        toast = new Toast(context);
        toast.setView(view);
        toast.setGravity(Gravity.FILL, 0, 0);
    }

    public final void flash(int count) {
        toast.show();
        this.count = count;
        flash.startAnimation(fadein);
    }

    public final void cancel() {
        toast.cancel();
    }

} 
```

* * *

用于测试的 MainActivity：

```
public class MainActivity extends Activity {

    private static Flasher flasher;

    @Override
    public void onCreate(Bundle state) {
        super.onCreate(state);
        View layout = getLayoutInflater().inflate(R.layout.activity_main, null);
        setContentView(layout);
        if(flasher == null) {
            flasher = new Flasher(this);
        }
        layout.setOnClickListener(new OnClickListener() {
            @Override public void onClick(View v) {
                flasher.flash(1);
            }
        });
    }

    @Override protected void onDestroy() {
        if(isFinishing()) {
            flasher = null;
        }
        super.onDestroy();
    }

} 
```

感谢键盘冲浪者的帮助！

* * *

编辑：不满足约束：Toast 不调度触摸事件：

```
flasher.flash(10); 
```

MainActivity 在闪烁效果期间不可触摸如果有人有解决问题的方法......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-13T15:28:07.013

经过几个小时的搜索，似乎不可能将事件从一个窗口委托给另一个窗口。所以我找到的最终功能解决方案是扩展一个活动，使其实现这种闪光效果。对于那些对此感兴趣的人，这是我的子类：

```
public class FlmActivity extends Activity {

    private final static int DURATION_FADEIN = 50;
    private final static int DURATION_FADEOUT = 200;
    private final static int DURATION_INTERVAL = 200;
    private View view;
    private AnimationSet anim;
    private int count;

    public FlmActivity() {
        super();
    }

    @Override protected void onPostCreate(Bundle state) {
        super.onPostCreate(state);
        view = new View(this) {{
            setBackgroundColor(0xffffffff);
            setVisibility(View.INVISIBLE);
        }};
        anim = new AnimationSet(false) {{
            addAnimation(new AlphaAnimation(0, 1) {{
                setDuration(DURATION_FADEIN);
            }});
            addAnimation(new AlphaAnimation(1, 0) {{
                setStartOffset(DURATION_FADEIN);
                setDuration(DURATION_FADEOUT);
            }});
            addAnimation(new Animation() {{
                setStartOffset(DURATION_FADEIN + DURATION_FADEOUT);
                setDuration(DURATION_INTERVAL);
                setAnimationListener(new AnimationListener() {
                    @Override public void onAnimationStart(Animation anim) {}
                    @Override public void onAnimationRepeat(Animation anim) {}
                    @Override public void onAnimationEnd(Animation anim) {
                        flash(count - 1);
                    }
                });
            }});
        }};
        addContentView(view, getWindow().getAttributes());
    }

    @Override protected void onDestroy() {
        ((ViewGroup) view.getParent()).removeView(view);
        super.onDestroy();
    }

    public final void flash(int count) {
        if((this.count = count) > 0) {
            view.startAnimation(anim);
        }
    }

} 
```

在扩展活动中调用闪光效果的代码：

```
flash(10); 
```

通过这个实现，事件通过层

# c# - 在同一服务器上使用来自另一个网站的 c# 类文件

> ID：12350519
> 
> 赞同：0
> 
> 时间：2012-09-10T11:15:22.040
> 
> 标签：c#, asp.net, visual-studio-2010, class, web

希望这是一个快速的。如果我在 WebsiteA.com 上有 c# 类文件 - 我可以在 WebsiteB.com 中引用它们吗？两个站点都在同一台服务器上，所以我希望在静态地址上引用它们？(d:/inetpub/wwwroot/websiteA-com/app_code/MyClass.cs)

这可能吗？或者 - 我是否必须将类文件复制到 WebsiteB.com 并简单地使用它？

当我需要进行任何更改时，我只想避免重复 - 避免更改两个站点。

我已经使用 Visual Studio 2010 Express 在 .net 4 中构建了这两个站点。

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-10T11:19:05.590

如果我是你，我会获取两个网站所需的所有类并创建一个类库项目 (DLL)。然后在每个网站中引用该项目并使用这些类。这意味着每个站点都将使用相同的 DLL 进行部署，但您将拥有一个用于公共类的项目。

希望这会有所帮助（我知道这不是严格的答案）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T11:19:41.843

你当然可以。

不过，我认为从 IIS 文件夹的应用程序池中添加类并不是一个好主意。

我相信这是一种更好的做法，尽管将类库作为一个单独的项目称为 Shared 并在两个项目中引用它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-10T18:30:54.673

在 Visual Studio 中，您可以“添加现有”，然后选择“链接”选项以添加来自另一个项目的源代码

这比共享类库更容易管理——你甚至可以在完全不同的项目中包含相同的代码（紧凑框架、不同版本的 dot net 等）

# ruby-on-rails - 自定义类中的asset_path

> ID：12350529
> 
> 赞同：1
> 
> 时间：2012-09-10T11:15:53.343
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我创建了一个像这样的用户助手：

```
module UserHelper

  def user_photo user, size = 30
    image_tag user_avatar_url(user, size), :height => size, :width => size, :title => user_name(user), :alt => '' if user
  end

  alias :user_avatar :user_photo

  def user_avatar_url user, size = 30
    user.image ? user.image.thumb("#{size}x#{size}#").url : asset_path('icons/unknown-user-icon.png')
  end
end 
```

但是，我收到一个错误：

```
undefined method `asset_path' for #<UserProfileHtmlTemplater:0x0000000680aad8> 
```

目前我有以下内容：

```
class UserProfileHtmlTemplater < CompanyTextTemplater

  include Rails.application.routes.url_helpers
  include ActionView::Helpers::UrlHelper
  include ActionView::Helpers::OutputSafetyHelper 
  include ActionView::Helpers::AssetTagHelper 
  include ActionView::Helpers::TagHelper 
  include UserHelper

....
  def prepare_locals_for(user)
    Hash.new.tap do |locals|
      locals[:first_name] = user.first_name
      locals[:last_name] = user.last_name
      locals[:email] = user.email

      locals[:photo]   = raw user_photo(user, '200x200>')
      user.profile.visible_fields.each do |field|
        locals[field.label] = field.value
    end
  end
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T14:48:30.137

`asset_path`问题可能在于 Sprockets ( ) 中定义的事实，`Sprockets::Helpers::RailsHelper`而不是您包含的帮助程序。

我宁愿建议使用在您的情况下定义的`image_path`helper （或其别名），而不是包含另一个助手，并且在您的情况下应该开箱即用。`path_to_image``AssetTagHelper`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T18:37:35.740

尝试添加这个：

```
include Sprockets::Helpers::RailsHelper
include Sprockets::Helpers::IsolatedHelper 
```

它将解决您的问题。

# jira - Jira 标记中的“注释掉”

> ID：12350531
> 
> 赞同：3
> 
> 时间：2012-09-10T11:16:01.610
> 
> 标签：jira, markup

这似乎是一个简单的问题，但我已经给了它强制性的 30 分钟谷歌搜索，但我什么也没想到。

我们对 Jira 票证有非常严格的格式要求，但这些票证是从各种我们无法控制的自动化来源进入 Jira 的。我正在整合一个使用 API 检查 Jira 票证的服务，并在必要时应用正确的格式。这将为我们省去很多烦人的劳动。

如果我可以将不可见的评论放在评论文本的正文中，这将*非常有用，既可以用于审核目的，也可以用于操作文本。*我找不到任何官方/合法的方式来做到这一点。除了我非常专业的需求外，我真的不认为会有太多的需求。

那么是否有人对 Jira 文本标记技巧有任何想法，这些技巧可以以原始文本形式提供可读的注释，但一旦应用标记就不会明显呈现？我将采取适度的面向未来的 hacky kludge。简单地更改文本颜色不是一种选择。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-11T09:11:44.673

我最终解决这个问题的方法是使用锚：

```
{anchor: this text will not appear in the marked-up text in Jira} 
```

这并不理想，但它可以完成工作，并且不应该在 Jira 的未来版本中删除。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T02:57:05.310

*   我会创建一个新角色。将评论的可见性设置为该特定角色。
*   要使用 REST 进行设置，请查看[此处](https://developer.atlassian.com/display/JIRADEV/JIRA+REST+API+Example+-+Add+Comment#JIRARESTAPIExample-AddComment-Examplealsosettingthesecuritylevel)。
*   对于必须看到此评论的用户，应为他们分配[此处](https://confluence.atlassian.com/display/JIRA/Managing+Project+Role+Membership)记录的特定角色。
*   这应该保证您的更新不会被 JIRA 升级删除。

# c++builder - graphics32 是否适用于 c++ builder XE2？

> ID：12350533
> 
> 赞同：2
> 
> 时间：2012-09-10T11:16:05.947
> 
> 标签：c++builder, c++builder-xe2, graphics32

我已经安装了graphics32 1.9.1 1581，编译并添加了GR32_DSGN_RSXE2包。但它没有 .h 文件，并且您的组件和组件文件夹仅在 Delphi 项目中可见。它对 C++ 的实现在 builder 6 中停止了吗？有没有办法在 cbuilder XE2 中使用它？有替代品吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T21:27:12.560

如果您只获得软件包而不是完整的源代码，那么您就不走运了。另一方面，如果它们提供源代码，您通常可以使用正确的设置重新构建它们以生成 c++ 所需的文件。

# php - 投票按钮的数据库设计

> ID：12350538
> 
> 赞同：1
> 
> 时间：2012-09-10T11:16:20.040
> 
> 标签：php, mysql, database, zend-framework, database-design

我正在做一个项目，其中我有类似于 StackOverFlow 的上下投票选项。我在数据库设计方面没有太多经验，因此我遇到了以下问题，

首先，这是我的投票表结构：

1.  **voteId** -----带有主键的AUTO_INCREMENT。
2.  **mediaId** ----用户投赞成票/反对票的媒体。
3.  **userId** -----投票的用户。
4.  **voteMode** ---1 表示赞成票，0 表示反对票。这是一个整数字段。

在这种情况下，如果我有 100 个用户和 100 个媒体，那么我将在此表中总共有 100x100 条记录。

这里出现的问题是数据库正在处理大量记录，而投票按钮现在反应迟钝。这让我的客户不高兴，让我陷入困境。

**谁能建议我一个更好的模型来避免这个巨大的桌子？**

我正在使用**jQuery.ajax 将**我的投票发布到服务器。此外，该项目基于**PHP 和 Zend Framework 1.11**。因此，当我单击 UP 图标时，需要一些时间来响应。Mozilla 曾经崩溃过某些时候。**我通过包含大量垃圾记录（大约 15000 条）的循环进行了插入测试**。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T11:43:44.040

您可以尝试这些表模式的升级：

```
//All id's are now unsigned , As you do not need any sign 
ALTER TABLE `voting` 
CHANGE `voteid` `voteid` INT(11) UNSIGNED NOT NULL AUTO_INCREMENT, 
CHANGE `mediaId` `mediaId` INT(11) UNSIGNED NOT NULL, 
CHANGE `userId` `userId` INT(11) UNSIGNED NOT NULL, 
//ENUM datatype as you need only 2 type of value
CHANGE `voteMode` `voteMode` ENUM('1' , '2') NOT NULL ; 

//Adding index , it will surely increase some speed
//Do **not use** index in **columns you do not need**
ALTER TABLE  `voting` ADD INDEX (  `mediaId` ,  `userId` ) ; 
```

浏览[Mysql Index](http://dev.mysql.com/doc/refman/5.0/en/create-index.html)以了解有关索引的更多信息。

如果您使用的是[MyISAM 存储引擎](http://dev.mysql.com/doc/refman/5.0/en/myisam-storage-engine.html)，那么我建议您使用[InnoDB 存储引擎](http://dev.mysql.com/doc/refman/5.0/en/innodb-storage-engine.html)。[它](http://www.mysql.com/why-mysql/white-papers/mysql_5.5_perf_myisam_innodb.php)可以帮助您决定应该使用哪个引擎。

其他一些可能对您有帮助的技巧是：

1.  [MySQL 查询缓存](http://dev.mysql.com/doc/refman/5.1/en/query-cache-operation.html)
2.  [php中的准备语句](http://php.net/manual/en/mysqli.quickstart.prepared-statements.php)
3.  [列分区](http://dev.mysql.com/doc/refman/5.5/en/partitioning-columns-range.html)

有关 MySql 数据库优化的一些资源：

1.  [MySQL 调优](http://www.slideshare.net/FordAntiTrust/my-sql-tuning)
2.  [mysql优化](http://www.slideshare.net/renato_shira/mysql-optimization)
3.  [真实世界的可扩展性 MySQL](http://www.slideshare.net/techdude/real-world-scalability-mysql)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-10T11:41:37.817

好的，有两件事。15k 条记录不算什么，因此几乎不会造成问题。我正在使用具有 150M 行的表，并且查询在 0.005 秒内仍然表现良好

1.  我怀疑您使用的是 MyIsam 而不是 InnoDB。使用 MyIsam，每次插入（或更新）都会锁定整个表。因此，当有人投票时，表格被锁定，其他人无法从中读取。如果您有成千上万的用户，这可能会成为一个问题。

2.  确保你有正确的索引。我不确定哪些查询很慢（以及有多慢！），但请确保您在搜索的列上有一个索引（可能是 mediaId）。

如果您想要更好的建议，请发布速度较慢的查询。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-10T11:29:45.023

如果您想跟踪哪些用户为 x 媒体投票，并且每个用户都投票，那么您的最小数据量为`users * media`.

如果你想拥有更少的数据，你必须做出让步。也许让用户匿名注册和投票？如果可以从投票行为中提炼出个人偏好，大多数用户都不会很高兴。

# c++ - 复杂类型的容器实现

> ID：12350540
> 
> 赞同：1
> 
> 时间：2012-09-10T11:16:27.153
> 
> 标签：c++

我正在尝试提出一个容器包装器，它存储以下类型的数据：bool、int、double、std::string。此外，我有一个复杂的类型需要存储在容器中。让我们称之为Foo。为了简单起见，我们会说 Foo 包含一个整数列表。

我的容器类目前包装了我从 ac api 获得的丑陋而复杂的容器类型。当我完成对容器中数据的操作后，我需要将其复制回 api。它使用联合和链表。例如，我可以将这些数据复制到 std::list 中，但这可能会导致性能问题，这些问题会在以后出现。因此，我的容器类不依赖于数据在内存中的实际存储方式。

这是我的容器外观的快速想法：

```
template <class T>
class Cont
{
public:
    Cont(ISetter<T>* setter)
        : _setter(setter)
    {
    }

    void sillyFunction(T t)
    {
        (*_setter)(t,0);
    }

private:
    ...
    ISetter<T>* _setter;
}; 
```

所以我使用了一个辅助设置器类来处理内存的细节。我有很多这样的课程，但 ISetter 会让您了解我在做什么。

为了处理 Foo 类型，它也是由 c api 以一种相当奇怪的方式存储的，我来到了下面的 setter。同样，这只是一个粗略的例子。

```
class IFoo
{
public:
    virtual int getMember() = 0;
};

class Foo2: public IFoo
{
public:
    virtual int getMember(){ return 1;} // dummy 
};

template<typename T> class ISetter{};
template<> class ISetter<IFoo*>
{
public:
    virtual void operator()(IFoo* value, int index) = 0;
};

template<typename T> class Setter{};
template<> class Setter2<Foo2*>: public ISetter<IFoo*>
{
public:
    virtual void operator()(IFoo* value, int index)
    {
        _list[index] = dynamic_cast<Foo2*>(value);
    }

private:
    std::vector<Foo2*> _list;
}; 
```

所以我将我的 Foo 作为一个名为 IFoo 的接口来处理。Setter2 实现处理我的 Foos 列表中的设置。下面缺少的 Setter1 处理丑陋的 c api 内存。

以下是这些类在实践中的想法：

```
Foo2* f = new Foo2();
ISetter<IFoo*>* setter = new Setter2<Foo2*>();
Cont<IFoo*>* container = new Cont<IFoo*>(setter);
container->sillyFunction(f); 
```

例如，在处理整数时，我会这样做：

```
int i = 10;
ISetter<int>* setter = new Setter1<int>();
Cont<int>* container = new Cont<int>(setter);
container->sillyFunction(i); 
```

所以，我的问题是，如果您认为这是一个好方法，以及您可能会推荐哪些改进。

我使用共享指针而不是原始指针。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T13:10:10.410

我将创建一个简单的`Foo`包装类，它可以从 C API 中查找成员数据，并将其呈现为一个连贯的类。无需为此搞乱接口、虚函数或继承。只需一节课就可以了。

因此，对于 C API 中的每个“Foo”条目，您都创建了一个 Foo 包装器。

然后你就有了一个简单的、表现良好的类型，它代表了存储在你的 C 库中的数据的各个实例。

现在只需将其放入`std::vector`.

```
struct Foo {
    Foo(<handle-or-pointer-to-library-data>);

    // member functions for retrieving member data from the C API
};

std::vector<int>
std::vector<bool>
std::vector<std::string>
std::vector<Foo> 
```

据我了解您的问题，这将是一个简单有效的解决方案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-10T15:01:09.743

我会稍微改变一下。考虑从您的代码中删除所有这些 Setter 虚拟主义。引入模板的目标之一是替代虚拟主义：

```
template <class T, class Setter>
class Cont
{
public:
    Cont(Setter setter = Setter())
        : _setter(setter)
    {
    }

    void sillyFunction(T t)
    {
        _setter(t,0);
    }

private:
    ...
    Setter _setter;
}; 
```

及其简单的用法：

```
template <class IType, class Type>
class Setter2_Virtual
{
public:
    void operator()(IType* value, int index)
    {
        _list[index] = dynamic_cast<Type*>(value);
    }

private:
    std::vector<Type*> _list;
};

Cont<IFoo*, Setter2_Virtual<IFoo, Foo2> > container;
container.sillyFunction(f); 
```

我专注于 Setters——但也许你也可以对 IFoo/Foo 的东西做同样的事情。

只是一个想法 - 毕竟你没有义务使用它。

# javascript - 从Javascript中的选定行获取特定单元格的值

> ID：12350544
> 
> 赞同：0
> 
> 时间：2012-09-10T11:16:45.493
> 
> 标签：javascript, variables, grid, selection, cells

我从网格中的选定行中有以下代码......

```
var selected_rows = grid.getSelectionModel().getSelections();
    Ext.each(selected_rows,function(item) {

    var left_thumbnail_jpeg_name =item.data.left;

    var right_thumbnail_jpeg_name = //select second cell along row 
```

有人可以告诉我如何将行中的第二个单元格值设置为变量吗？

詹姆士

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T14:49:53.160

请注意，您的标签不包含 ExtJS，这有点误导。

至于您的问题，由于您的网格绑定到记录存储，您只需更改记录值即可将其立即呈现到网格。

在您的情况下，它将是：

```
item.set('right', YOUR NEW VALUE); 
```

假设下一列的名称是正确的并且您具有新的新值。

# java - JavaCompiler 无法正确编译文件

> ID：12350549
> 
> 赞同：2
> 
> 时间：2012-09-10T11:16:55.500
> 
> 标签：java, javac, java-compiler-api

我正在尝试习惯 JavaCompiler 并尝试使用它编译程序，我可以成功编译包含单个文件的程序，但是当我尝试编译具有多个文件的项目时。我在编译实现其他类的文件以及该类在何处使用已实现类中的方法时遇到错误。

这是我用来编译java代码的代码

```
private final String  directoryForBin = "C:/TempBINfolder/bin";

public List doCompilation(String sourceCode, String locationOfFile) {
   List<String> compile = new ArrayList<>();

    SimpleJavaFileObject fileObject = new DynamicJavaSourceCodeObject(locationOfFile, sourceCode);
    JavaFileObject javaFileObjects[] = new JavaFileObject[]{fileObject};

    JavaCompiler compiler = ToolProvider.getSystemJavaCompiler();

    StandardJavaFileManager stdFileManager = compiler.getStandardFileManager(null, Locale.getDefault(), null);

    Iterable<? extends JavaFileObject> compilationUnits = Arrays.asList(javaFileObjects);

    // creates a Temp BIN foler on the C: drive to add .class files for compiling      
    new File(directoryForBin).mkdirs();

    String[] compileOptions = new String[]{"-d", directoryForBin, "-classpath", System.getProperty("java.class.path")};
    Iterable<String> compilationOptions = Arrays.asList(compileOptions);

    DiagnosticCollector<JavaFileObject> diagnostics = new DiagnosticCollector<JavaFileObject>();

    CompilationTask compilerTask = compiler.getTask(null, stdFileManager, diagnostics, compilationOptions, null, compilationUnits);

    boolean status = compilerTask.call();

    if (!status) {//If compilation error occurs 
        // Iterate through each compilation problem and print it
        for (Diagnostic diagnostic : diagnostics.getDiagnostics()) { 
            compile.add(diagnostic.getKind().toString()+" on line  "+ diagnostic.getLineNumber() +"\nIn file:  \n"+ diagnostic.toString()+"\n\n");
        }
    }
    try {
        stdFileManager.close();//Close the file manager
    } catch (IOException e) {
        e.printStackTrace();
    }

    return compile;
} 
```

这是我正在尝试编译的类之一的示例

```
 public class IntegerComparator 
             implements Comparator<Integer>
{
   public IntegerComparator(){}

   public int compare(Integer a, Integer b)
   {  int aValue = a.intValue();
      int bValue = b.intValue();
      return (aValue - bValue);
   }

} 
```

有谁知道这里出了什么问题以及为什么我的代码没有找到实现的类，即使它与实现它的类在同一个文件夹中？

是不是因为包不在程序的顶部？

**编辑：这是上述示例的输出错误**

```
ERROR on line  8
In file:  
/projects/Compiler/Studentfilestotest/LAB3/aroc1/a3/IntegerComparator.java:8: error: cannot find symbol
             implements Comparator<Integer>
                        ^
  symbol: class Comparator 
```

这就是`System.getProperty("java.class.path")`返回的内容

```
C:\projects\Compiler\Compiler\Jar Files\jsyntaxpane-0.9.5-b29.jar;
C:\projects\Compiler\Compiler\Jar Files\jtar-1.1.jar;
C:\projects\Compiler\Compiler\Jar Files\sqlitejdbc-v056.jar;
C:\Program Files\NetBeans 7.1.2\java\modules\ext\beansbinding-1.2.1.jar;
C:\Program Files\NetBeans 7.1.2\java\modules\ext\AbsoluteLayout.jar;
C:\projects\Compiler\Compiler\Jar Files\junit-4.11-SNAPSHOT-20120416-1530.jar;
C:\projects\Compiler\Compiler\Jar Files\commons-io-2.4-bin.zip;
C:\projects\Compiler\Compiler\Jar Files\commons-io-2.4\commons-io-2.4.jar;
C:\projects\Compiler\Compiler\Jar Files\poi-3.8\poi-3.8-20120326.jar;
C:\projects\Compiler\Compiler\Jar Files\javamail-1.4.5\mail.jar;
C:\projects\Compiler\Compiler\build\classes 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T12:30:22.267

很可能，这与编译器无关。我的猜测是这是因为源文件中的错误。你记得[导入适当的类和接口](http://docs.oracle.com/javase/tutorial/java/package/usepkgs.html)吗？

您的`IntegerComparator.java`文件需要包含导入：

```
import java.util.Comparator; // <--- Import!

public class IntegerComparator 
      implements Comparator<Integer>{

   public IntegerComparator(){}

   public int compare(Integer a, Integer b){
      int aValue = a.intValue();
      int bValue = b.intValue();
      return (aValue - bValue);
   }
} 
```

忘记导入适当的类通常会导致“找不到符号”错误消息。

# iphone - 应用通过后是否可以更改应用图标

> ID：12350551
> 
> 赞同：0
> 
> 时间：2012-09-10T11:17:06.793
> 
> 标签：iphone, ios, ipad

我已经提交了一个应用程序，现在我想通过更改应用程序图标来更新它。那么应用通过后是否可以更改应用图标？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T03:57:10.743

您可以使用新图标更新应用程序。创建应用的新版本，更新应用图标并再次提交。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-10T11:25:00.063

不。

您将不得不再次提交应用程序。但是，我建议您尝试请求[加急审核](https://developer.apple.com/appstore/contact/appreviewteam/index.html)，说明唯一改变的是图标并说明您的原因。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-10T12:06:04.153

**不** ，只有你可以更改升级版本

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-10T11:21:58.093

您是否查看过[iTunes Connect 开发人员指南](https://itunesconnect.apple.com/docs/iTunesConnect_DeveloperGuide.pdf)？如果您不想再次通过审核流程，您可以尝试使用**iTunes Connect中的****联系我们**表格，与 Apple 的审核人员取得联系。也许您会获得更改 App Store 图标的规定。

# css - CSS 布局：垂直扩展页面

> ID：12350554
> 
> 赞同：3
> 
> 时间：2012-09-10T11:17:20.900
> 
> 标签：css, html

这是我现在正在处理的页面：http: [//jsfiddle.net/0xsven/hycRx/](http://jsfiddle.net/0xsven/hycRx/)

我希望页面垂直扩展以填满整个屏幕，以便页脚始终位于最底部。我不是在寻找粘性页脚！[我希望页面像这张图片](http://i48.tinypic.com/25q4p79.jpg)一样扩展到底部。

知道这是否可能吗？

* * *

## 更新

我使用了一些令人困惑的词，所以我试图澄清我的问题：

我希望我的页面始终垂直填充视口，即使没有足够的内容。只要有足够的内容来扩展视口，页面就应该是可滚动的。在我的测试中，粘性页脚总是停留在视口底部，覆盖其他元素，这是我不希望发生的。

我想出的一种解决方案是使用 jquery 操作/调整填充/边距，使其适合视口。但我不喜欢在这些事情上使用 javascript。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T08:24:17.170

您试图模仿的行为是传统的 CSS Sticky Footer。

[这是一个简单的例子](http://www.cssstickyfooter.com/)：

**HTML**

```
<div id="wrap">
    <div id="main">
    </div>
</div>

<div id="footer">
</div> 
```

**CSS**

```
html, body {height: 100%;}
#wrap {min-height: 100%; *display:table; *height:100%}
#main {overflow:auto; padding-bottom: 150px;}  /* must be same height as the footer */
#footer {
    position: relative;
    margin-top: -150px; /* negative value of footer height */
    height: 150px;
    clear:both;
} 

/*Opera Fix*/
body:before {
    content:"";
    height:100%;
    float:left;
    width:0;
    margin-top:-32767px;/
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T11:40:42.410

```
#footer{
    position: fixed;
    bottom: 0;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-10T11:20:37.100

您可以尝试使用 position 属性，如下所示：

```
#footer{
    background-color: #222;
    position: relative;
    bottom: 0;
} 
```

# android - 从 URL 获取 HTML 源

> ID：12350555
> 
> 赞同：2
> 
> 时间：2012-09-10T11:17:26.897
> 
> 标签：android, html, url, get

我有这个网址，[http://www.google.com/ig/calculator?hl=en&q=1USD %3D%3FINR](http://www.google.com/ig/calculator?hl=en&q=1USD%3D%3FINR)

它以文本形式返回当前的 USD->INR 转换率。

屏幕上显示的文本是页面 HTML 源代码中的唯一文本。

我一直在努力获取 HTML 源代码，因为我尝试过的很多东西都返回了异常。

例如：

```
public static String getHtml(String url)
throws ClientProtocolException, IOException
{

    HttpClient httpClient = new DefaultHttpClient();
    HttpContext localContext = new BasicHttpContext();
    HttpGet httpGet = new HttpGet(url);
    HttpResponse response = httpClient.execute(httpGet, localContext);
    String result = "";

    BufferedReader reader = new BufferedReader(new InputStreamReader(
            response.getEntity().getContent()));

    result = reader.readLine();
    return result;
} 
```

调用时返回异常

```
try {
String test = getHtml("google.com/ig/calculator?hl=en&q=1USD%3D%3FINR");
    Log.d("ASDADS", test);
    } catch (Exception e) {
        Log.d("ASDASD", "FAILED");
    } 
```

另外，我在 Manifest 中添加了 INTERNET 权限，我的网络也正常工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T11:19:03.180

使您的网址类似于，

```
"http://www.google.com/ig/calculator?hl=en&q=1USD%3D%3FINR" 
```

它的结果也是**JSON**而不是**HTML** ..所以像JSON一样解析结果..

# ruby - Sinatra heroku 数据库访问

> ID：12350561
> 
> 赞同：1
> 
> 时间：2012-09-10T11:18:03.060
> 
> 标签：ruby, heroku, console, sinatra

我在 heroku 中有一个 sinatra ruby​​ 应用程序。我正在尝试通过控制台访问数据库。当我运行时`heroku run console`，我收到以下错误。

```
Running console attached to terminal... up, run.10
    /app/vendor/ruby-1.9.2/lib/ruby/1.9.1/irb/init.rb:281:in `require':LoadError: no such file to load -- ./console. 
```

当我尝试使用以下命令访问记录时，出现以下错误：

```
irb(main):001:0> Setting.first
NameError: uninitialized constant Object::Setting
    from (irb):1
    from bin/irb:12:in `<main>' 
```

任何人都可以帮助我完成需要做的事情。我错过了一些文件还是有不同的方式来访问heroku中的表？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-12T15:46:13.377

这`heroku console`对 Rails 应用程序来说是一个旧的 hack，但它不会在其他地方工作。从输出中可以看出，它正在尝试加载一个名为`./console`. 因此，在您的项目根目录上创建一个`console`文件，并在连接到数据库后从中调用 IRB。例如：

```
#!/usr/bin/env ruby                                                                                                

require 'irb'                                                                                                      
require 'irb/completion'                                                                                           

require 'rubygems'                                                                                                 
require 'bundler/setup'                                                                                            

# require something that connects to your database
# or just connect here using ENV['DATABASE_URL']
require 'your_project_setup'

IRB.start 
```

# asp.net-mvc - 从 mvc3 中的多个动态控件获取数据

> ID：12350565
> 
> 赞同：0
> 
> 时间：2012-09-10T11:18:17.177
> 
> 标签：asp.net-mvc, asp.net-mvc-3, razor

我创建了一个局部视图

```
@model chPayroll.Models.HREducation.HRInfo
 @{
      var list = (IEnumerable<SelectListItem>)TempData["PassedDivision"];
      var list1 = (IEnumerable<SelectListItem>)TempData["Country"];
 }
 <table >
       @Html.HiddenFor(x => x.StaffId)
   <tr>
    <td>@Html.DropDownListFor(x => x.Country, list1, "-select-",null)</td>
    <td>@Html.TextBoxFor(x => x.Board)</td>
    <td>@Html.TextBoxFor(x => x.Level)</td>
    <td>@Html.TextBoxFor(x => x.PassedYr)</td>
    <td>@Html.DropDownListFor(x => x.PassedDivision, list, "-selected-",null)</td>
    <td><input type="file" name="file" /></td>
   </tr>
</table> 
```

我从控制器多次调用这个局部视图

```
[HttpGet]
        public ActionResult BlankEditorRow(string search)
        {
            HRInfo aa = new HRInfo();
            TempData["PassedDivision"] = extract.getDivision();
            TempData["Country"] = extract.getCountry();
            aa.StaffId=(Convert.ToInt16(search));
            return PartialView("ViewUserControl1",aa);

        }
   [HttpPost]
   public ActionResult BlankEditorRow(HRInfo ob)
   {
     extract.SaveEdu(ob);
    } 
```

我可以一次获得一个值，即当局部视图被调用时，它工作正常。但是当我必须从两个或多个局部视图中获取值时它不起作用。有没有办法一次获取多个数据？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-22T02:05:05.413

I'm using this in some of my codes, wish it can help:

```
@Html.TextBox(Model.ID + ".Country", Model.Country)
... 
```

so when i want to get value from multi values, just use the UpdateModel(myModel, Model.ID.ToString()).

Is that what u need?

# android - Android 共享首选项名称

> ID：12350567
> 
> 赞同：2
> 
> 时间：2012-09-10T11:18:24.743
> 
> 标签：android, sharedpreferences

我可以通过以下方式获得 SharedPreferences：

```
getSharedPreferences("someName", ...) 
```

如何在我的应用程序中获取所有共享首选项名称的列表？

如果通过代码无法实现，有没有办法通过 adb （没有 root）来实现？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T08:50:45.813

看起来没有API，唯一的方法是列出目录中的文件`shared_prefs`。就像是：

```
File sharedPrefsDir = new File(getFilesDir(), "../shared_prefs");
File[] files = sharedPrefsDir.listFiles(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-10T11:21:26.000

您可以从中获取所有的preferences.xml`/data/data/(package)/shared_prefs/(package)_preferences.xml`

# encryption - 独立的java程序来解密密码

> ID：12350569
> 
> 赞同：1
> 
> 时间：2012-09-10T11:18:28.707
> 
> 标签：encryption

我必须编写一个独立的 java 程序来从文件中解密密码，使用对称密钥进行密码解密。我之前没有使用加密和解密。任何人都可以提出任何建议我该怎么做。我需要你的指导。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T11:35:23.660

也许你需要这样的东西

```
 private static final String ALGORITHM = "AES";
    ....
    ....
    Key key = new SecretKeySpec(new String("here is your symmetric key").getBytes(), ALGORITHM);
    Cipher c = Cipher.getInstance(ALGORITHM);
    //dencript mode (passes the key)
    c.init(Cipher.DECRYPT_MODE, key);
    //Decode base64 to get bytes 
    byte[] encBytes  = new BASE64Decoder().decodeBuffer(encryptedValue);
    // Decrypt 
    byte[] plainTxtBytes  = c.doFinal(encBytes);
    // Decode
    String decryptedValue = new String(plainTxtBytes , "UTF-8"); 
```

以下是一些资源：

1.  [http://www.javamex.com/tutorials/cryptography/symmetric.shtml](http://www.javamex.com/tutorials/cryptography/symmetric.shtml)

2.  [http://www.java2s.com/Code/Java/Security/EncryptionandDecryptionusingSymmetricKeys.htm](http://www.java2s.com/Code/Java/Security/EncryptionandDecryptionusingSymmetricKeys.htm)

3.  [http://www.flexiprovider.de/examples/ExampleCrypt.html](http://www.flexiprovider.de/examples/ExampleCrypt.html)（这也使用文件）

# json - 如何更改 Jackson 中的全局类型信息格式？

> ID：12350571
> 
> 赞同：1
> 
> 时间：2012-09-10T11:18:29.393
> 
> 标签：json, jackson

我正在使用 Jackson 进行 json 序列化/反序列化。

我正在使用类型信息的全局配置来支持多态性。

```
objectMapper.enableDefaultTyping(); 
```

它包含类型信息作为每个对象的包装数组，这对我来说很好。

唯一的事情是我想改变包含信息的格式，想使用下面提到的键：值对。

```
{@type:com.....xyz} 
```

其中@type 是键，XYZ 是类名，类似这样。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T20:47:28.603

您不能将“作为属性”包含用于默认类型，因为并非所有值都是对象类型（列表、数组、标量值）。但是您可以使用`@JsonTypeInfo`为您拥有的 POJO 指定该样式；并且您应该能够将其与默认类型混合使用，这样任何属性不起作用的东西都将使用默认类型。

# shell - 用于调用 JBoss 5x JMX 的 MBean 的 Linux Shell 脚本

> ID：12350580
> 
> 赞同：0
> 
> 时间：2012-09-10T11:18:50.077
> 
> 标签：shell, jmx, jboss5.x, mbeans

我想用 linux shell 脚本调用 JBoss 5x JMX 的 mbeans。有没有用 Linux shell 脚本调用 JBoss 5x JMX 的 mbean？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T12:51:28.420

Jboss 自带 twiddle 脚本，可以从 jmx-console 获取 Mbeans 列表，通过 twiddle 查询/调用，如

```
$JBOSS_HOME/twiddle.sh -s 127.0.0.1 invoke "jboss.system:type=ServerInfo" listMemoryPools "True"  
$JBOSS_HOME/twiddle.sh -s 127.0.0.1 get "jboss.system:type=ServerInfo" 
```

你也可以使用[nagios-jmx-plugin](http://snippets.syabru.ch/nagios-jmx-plugin/usage.html)

```
java -jar check_jmx.jar -U service:jmx:rmi://127.0.0.1/jndi/rmi://127.0.0.1:1090/jmxconnector --username admin --password admin -O "jboss.system:type=ServerInfo" -A FreeMemory 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T11:22:49.123

只能通过编写一个 Java 程序来调用从 shell 脚本与 MBeans 对话。

# algorithm - 将 2d 多边形优化细分（即镶嵌/分割）成更小的多边形的算法？

> ID：12350581
> 
> 赞同：4
> 
> 时间：2012-09-10T11:18:52.153
> 
> 标签：algorithm, polygon, partitioning, plane, tessellation

我有一些 2D 多边形，每个都是顺时针坐标的列表。多边形很 [简单](http://en.wikipedia.org/wiki/Simple_polygon)（即它们可能是凹的，但它们不会相互交叉）并且它们不会相互重叠。

我需要将这些多边形细分为更小的多边形以适应大小限制。就像原始多边​​形一样，较小的多边形应该很简单（非自相交），并且约束是它们每个都应该适合一个“单位正方形”（为了简单起见，我可以假设为 1x1）。

问题是，我需要尽可能高效地执行此操作，其中“高效”意味着可能产生的（小）多边形数量最少。计算时间并不重要。

有一些智能算法吗？起初我考虑递归地细分每个多边形（将它分成两半，水平或垂直哪个方向较大），但我似乎没有得到非常理想的结果。有任何想法吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-10T12:05:08.217

以初始多边形的初始点之一和所需长度约束的半径绘制一个圆。

圆将在两点与至少两条线相交。现在你有了尽可能大的第一个三角形。然后选择这些交叉点作为下一个目标。一直做，直到外面没有初始点。你的三角形尽可能大（尽可能少）

*   不要将已创建的三角形边视为交点。
*   生成的多边形并不总是三角形，它们也可以是四边形。也许更大的点数呢！
*   它们都几乎等于所需的大小。

![在此处输入图像描述](../Images/1b6ca8dd9272cb638ec7b9482af5bea1.png)![在此处输入图像描述](../Images/5044b073c8852168557e59c724a1182e.png)![在此处输入图像描述](../Images/d22b09250ee322238cbd764b1a5deb32.png)![在此处输入图像描述](../Images/198a838bf96efb3e33f88f7317993675.png)![在此处输入图像描述](../Images/0b4e12aa711429fbebeff6806d750cd8.png)![在此处输入图像描述](../Images/e64f45d50d70bd34ab566644331d2f1d.png)![在此处输入图像描述](../Images/1a7f4d5e98fd60824760c8b3a1219c5d.png)![在此处输入图像描述](../Images/d87c296068a36c1cc579a137d4191a45.png)![在此处输入图像描述](../Images/4dddb6be81e77d3644f45097cc295ea7.png)![在此处输入图像描述](../Images/3d5f115a8737689576cdc8dfd611f196.png)![在此处输入图像描述](../Images/48cabc737b66840673ff40d5f9a0b948.png)

微调内部零件需要一些计算。

![在此处输入图像描述](../Images/2bd48de64141031cc8d147059065d548.png)

![在此处输入图像描述](../Images/3a8b46af48e67cbb82c5bb106e78356f.png)

![在此处输入图像描述](../Images/2e375205782fe2978b8b89adec54ab3d.png)

![在此处输入图像描述](../Images/f66c3e0db5d6a0d55984fb000163f1ac.png)

![在此处输入图像描述](../Images/0f4731e5e770de06318e0a80a9bdd81b.png)

![在此处输入图像描述](../Images/7c300bd5b3dd9408784fc53509cd7b5c.png)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-10T12:05:17.540

我建议您使用以下内容：

1.  对多边形进行三角剖分，例如使用扫描线算法。

2.  确保所有三角形不违反约束。如果违反了约束，首先尝试边缘翻转来修复它，否则在最长的边上细分。

3.  使用动态编程连接三角形，同时保持约束并仅连接相邻的多边形。

# android - 如何在没有数据库锁的情况下并行执行线程并在sqlite数据库中插入相应的数据？

> ID：12350582
> 
> 赞同：3
> 
> 时间：2012-09-10T11:18:51.090
> 
> 标签：android, multithreading, sqlite

我需要调用多个 api，每个都在单独的线程中执行，并将相应的数据从响应中插入到 sqlite 数据库，而不会导致锁定。任何人都可以通过我可以参考的工作示例在这方面帮助我。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-10T11:49:58.667

> 我需要调用多个 api，每个都在单独的线程中执行，并将相应的数据从响应中插入到 sqlite 数据库，而不会导致锁定。

你不需要做任何特别的事情。多个线程可以使用同一个`SQLiteDatabase`对象，而无需您在应用程序级别进行锁定。Sqlite 在幕后有自己的锁定。您永远不应该遇到死锁，但一个线程将不得不等待另一个线程完成插入。

请参阅这些问题/答案：

*   [两个 AsyncTask 可以共享同一个 SQLiteDatabase 对象吗？](https://stackoverflow.com/questions/8446585/can-two-asynctasks-share-the-same-sqlitedatabase-object/8446624#8446624)

*   [Android 上 SQLite 的最佳实践是什么？](https://stackoverflow.com/questions/2493331/what-are-the-best-practices-for-sqlite-on-android/3689883#3689883)

Android下的Sqlite是单线程的。即使多个线程使用同一个数据库连接，我的理解是它们会被阻止并发运行。没有办法绕过这个限制。如果您打开到同一个数据库的两个连接，这会损坏数据库，因为数据库更新不会被协调。

# php - 为什么我们应该总是从函数返回值？

> ID：12350585
> 
> 赞同：7
> 
> 时间：2012-09-10T11:18:56.467
> 
> 标签：php, function, return

我不是一个编程大佬，但我经常听程序员说我们应该总是从函数中返回值。我想知道原因。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-10T11:45:48.513

一个函数不需要返回任何东西......如果你看一下 C(++) 函数，它们中的许多都没有（嗯，没有明确地）：

```
void nonReturningFunction(const int *someParam);
int main()
{
    int i = 12;
    nonReturningFunction(&i);
    return 0;
}
void nonReturningFunction(const int *someParam)
{
    printf("I print the value of a parameter: %d",someParam);
} 
```

后者什么也不返回，好吧，它返回一个空。main 函数确实返回了一些东西: `0`，这通常是给系统的一个信号，让它知道程序已经完成，并且完成得很好。

相同的逻辑适用于 PHP 或任何其他编程语言。有些函数的返回值是相关的，另一个函数可能不需要返回任何东西。一般来说，函数会返回值，因为它们与程序的流程相关。

以上课为例：

```
<?php
    class Foo
    {
        private $foo,$bar;
        public function __construct()
        {
            $this->foo = 'bar';
        }
        public function getFoo()
        {
            return $this->foo;//<-- getter for private variable
        }
        public function getBar()
        {
            return $this->foo;//<-- getter for private variable
        }
        public function setBar($val = null)
        {
            $this->bar = $val;
            return $this;//<-- return instance for fluent interfacing
        }
        public function setFoo($val = null)
        {
            $this->foo = $val;
            return $this;
        }
    }
    $f = new Foo();
    $f->setFoo('foo')->setBar('bar');//<-- fluent interface
    echo $f->getFoo();
?> 
```

如果 setter 函数没有返回任何内容，则必须编写：

```
$f->setFoo('foo');
$f->setBar('Bar'); 
```

所以在这种情况下，返回值是相关的。另一个无关紧要的例子：

```
function manipulateArray(array &$arr)//<-- pass by reference
{
    sort($arr);
}
$arr = range('Z','A');
manipulateArray($arr);
var_dump($arr);//array is sorted 
```

相对于：

```
function manipulateArray(array $arr)//<-- pass by copy
{
    sort($arr);
    return $arr;
}
$arr = range('Z','A');
manipulateArray($arr);
var_dump($arr);//array is not sorted!
$arr = manipulateArray($arr);//<-- requires reassign 
```

在许多情况下，通过引用传递被认为是有风险的，这就是为什么后一种方法通常被认为更好的原因。所以在许多情况下，函数不需要返回值，但它们的作用都是一样的，因为它使代码整体更安全。
这可能就是为什么您认为函数必须*始终*返回一个值的原因。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-09-10T11:32:39.930

这是旧编程的遗产。在像 Fortran 这样的旧语言中，您总是必须返回类型为 int、float、bool 等的东西。由于 C，您可以使用“void”类型返回，如果您不指定，这是大多数 C 函数中的默认值return 语句，它以 void 结尾返回。例如，在 Java 中，您必须指定返回类型，然后以该类型返回。如果您不想返回任何内容，请使用 'void' 类型：

```
//This works
public void boo() {
   return;
}

//This gets you an error
public int boo() {
   return;
}

//This gets you an error too, because you must specify a type for any function in Java
public boo() {
   return;
} 
```

所以这更像是 Lix 所说的，如果你有东西要回来，你就去做。在大多数函数式程序中，您的函数可以返回数据，也可以返回 true/false 标记成功或失败。在许多系统中，函数可以返回一个指示成功或失败的 int，如“1”或“-1”。Unix shell 程序使用它。

在 PHP 等其他语言中，您不需要返回任何内容，但在后台 PHP 仍然将“void”类型作为返回值附加到您的函数，您不必显式编写它。

希望这可以帮助

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-09-10T11:21:41.750

这样做是为了使函数有一个确定的终点。它主要是为了增加可读性并帮助未来的程序员理解你想要做什么。

不应该假设函数返回什么。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-09-10T11:25:12.963

有这么多原因...

这对你的架构更好：一个函数接受参数，使用它们并返回预期的结果。通过这种方式，您可以重用它并安排您的代码。

这对于[单元测试](http://en.wikipedia.org/wiki/Unit_testing)更好，您可以非常轻松地检查您的函数是否返回预期结果。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-09-10T11:30:20.807

一般来说，在计算机编程中，函数是一个可重用的代码单元，它接受一些输入（不包括任何内容）并返回一个值。

一些语言具有与称为过程的函数类似的构造，这些是可重用的代码片段，它们接受一些输入（包括任何内容）并执行一些活动但不返回结果。

然而，有些语言可能没有后者作为句法结构，并且可能使用函数来实现过程。因此，您在这里获得忽略结果的功能。此外，某些语言可能不需要实际强制代码从函数返回某些内容（即它们使用函数实现过程）。

因此，如果您只有后者作为您的选择，那么您可以像 @lix 那样争论从函数返回内容是一种好习惯。主要原因是尽管该函数可以像过程一样使用 - 调用者可能会像函数一样调用它并期望使用结果。请记住，测试代码是主要用例，它可能是遵循此约定的唯一原因。

我个人认为约定是答案。做最适合你的事情，但尽量做同样的事情，如果你需要分歧——想办法让用户知道。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-09-10T11:32:32.017

还有：灵活性。考虑从函数内部`echo`ing vs ing。`return`例如，使用返回的`true`或`false`来自函数的方法，您可以根据需要以多种方式修改事物在视图中的显示方式。回显字符串不会给您这种灵活性。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2018-02-09T15:44:22.277

一些早期的语言具有过程和功能。程序什么也没返回（他们只是做了一些事情）。函数返回了一些东西。我猜有人认为没有必要同时拥有这两者，因为函数可能只是无效的（如 C 中所用）。我刚刚写了一个快速函数来将数据存储在数据库中。由于数据在多个级别中进行了过滤，因此错误的可能性可以忽略不计，尽管如此，我在函数中包含了一个警报，它会在错误时回显，因此甚至不需要返回错误警报。（这是一个内部站点，不会供公众使用）因此完全没有必要让函数返回任何内容。

由于问题是为什么我们应该总是返回一个值，这不是为什么有时返回一个值是好的，而是有什么理由要求我们应该总是返回一个值，并且没有正当理由总是从一个功能。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2019-03-27T13:50:03.627

我总是取决于具体情况。例如，一个静态方法，应该总是返回一些东西，因为它们不能修改对象；但是，如果您将对象的引用传递给方法，则无论如何都可以这样做；像引用变量（像 C++ 上的指针），或者只是一个对象（像在 PHP 中那样作为隐式引用传递）。后面的做法不是一个好方法，就好像你的方法接收引用并修改定义方法的同一个类，为什么不使方法非静态？如果您想拥有一个被各种类（可能是派生类或抽象类）重用的方法，则后者并不总是正确的。同样，现在对于 IDE 来说，声明返回的变量类型会更好，因此解释器或编译器会在编译时而不是运行时捕获很多错误。我认为，

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2019-05-02T16:49:56.980

在编写记录到数据库的函数时，我想到了同样的问题。我不需要返回任何东西。我注意到在调用日志记录函数时它返回 null。经过一番调查，我发现，如果一个函数没有返回，则在 PHP 的情况下，默认情况下它返回 null。我还在 php 文档中找到了这个：

[关于函数默认值的 PHP 文档](https://www.php.net/manual/en/functions.returning-values.php)

所以我想 - 代替返回 null，我应该返回一些有用的消息，然后我返回一个字符串，上面写着“错误记录成功”

# java - Java 任务执行与反射

> ID：12350586
> 
> 赞同：0
> 
> 时间：2012-09-10T11:19:01.453
> 
> 标签：java, reflection, task

我有这样的代码..

1) 使用反射调用 updatedb 方法...

```
for (String uniqueSym : activeSymbolsSet) {
    futureTaskUtil.submiteTask(new Helper(),
    Helper.class.getDeclaredMethod("updateDb", 
           new Class<?>[] { String.class }), new Object[] { uniqueSym }, 60);
} 
```

**- 未来任务工具：**

2）我的问题是这个 updatedb 是作为运行时任务执行的......

```
public Object submiteTask(final Object obj, final Method method, final Object[] params, int timeoutSeconds) throws Exception {
    if (null != obj && method != null) {
        Callable<Object> task = new Callable<Object>() {
        public Object call() {
            try {
                method.setAccessible(true);
                Object resultObj = method.invoke(obj, params);
                return resultObj;
            } catch (Exception e) {
                logger.fatal("Exception occured while invoking future task.", e);
            }
            return null;
        }
    };
    Future<Object> future = executor.submit(task);
    try {
        Object result = null;
        if (timeoutSeconds < 0) {
            result = future.get(timoutsec, TimeUnit.SECONDS);
        } else {
            result = future.get(timeoutSeconds, TimeUnit.SECONDS);
        }
        logger.info("Result of method execution is  :: " + result);
        return result;
    } catch (TimeoutException e) {
    } catch (Exception e) {
        logger.fatal("Exception occured while executing future tas : " + obj, e);
    } finally {
        future.cancel(true); // may or may not desire this
    }
}
return null;
} 
```

有人可以解释为什么这是作为一项单独的任务执行并调用该方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T11:39:15.107

如果方法永远不会返回怎么办？然后应用程序将在此时挂起。使用此包装器，该方法将在 60 秒后取消。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T11:31:21.907

`Future<Object> future = executor.submit(task);`这是你的罪魁祸首您可以[在此处阅读有关 Executer 框架的信息](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/concurrent/Executor.html)

# c# - 如何通过给定函数计算C#中的拐点

> ID：12350589
> 
> 赞同：0
> 
> 时间：2012-09-10T11:19:07.163
> 
> 标签：c#, math, statistics, regression

我的函数总是如下所示：`y = beta1 / (1 + exp(beta2 + beta3 * x))`. 有了它可以获得的数据，它总是看起来像一个镜像（它从高值开始，然后减小）![在此处输入图像描述](../Images/0ef97c70fa4f8bb2746f63f6fabe4b5f.png) 我有 beta1、beta2 和 beta3 的值。现在我需要计算**拐点**。我想我可以用算法来做到这一点，但是我可以使用库提供的任何功能吗？（目前我不能使用 Accord.NET，因为我还有 C# 3.5，它只支持 4.+）

**更新**我可以用一种方法来获取导数；）

最好的祝福

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T11:29:26.670

你需要的是二次推导，如果函数只是常量不同，你可以在某处预先计算，然后只填写常量。

你在这里：[wolfram](http://www.wolframalpha.com/input/?i=%28a%20/%20%281%20%2b%20exp%28b%20%2b%20c%20%2a%20x%29%29%29%27%27)

没有为您派生的*标准*库函数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-10-27T11:19:43.267

无需编写算法：x = - beta2 / beta3 的二阶导数为零。这个问题有一个接近的解决方案。

# vba - 如何使用vba在范围内使用变量

> ID：12350590
> 
> 赞同：0
> 
> 时间：2012-09-10T11:19:07.717
> 
> 标签：vba, excel

您好，我已经编写了使用 vba 生成图形的代码。一切正常，但问题是我想使用变量来选择特定列，代码是：

```
Set x = Range("$CF$2", Range("$CF$2").End(xlDown))
Set y = Range("$CG$2", Range("$CG$2").End(xlDown))
Dim c As Chart
Set c = ActiveWorkbook.Charts.Add
Set c = c.Location(Where:=xlLocationAsObject, Name:=assume)
With c
.ChartType = xlXYScatterLines

' set other chart properties

With .Parent
.Top = Range("cl1").Top
.Left = Range("cl12").Left
.Name = "c"
End With
End With

Dim s As Series
Set s = c.SeriesCollection(1)
With s
.Values = y
 .XValues = x
' set other series properties

End With 
```

我想`COLs`在第一行使用变量来排列它们

```
Set x = Range("$CF$2", Range("$CF$2").End(xlDown))
Set y = Range("$CG$2", Range("$CG$2").End(xlDown)) 
```

`COLs`是字符串的变量

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T12:22:17.110

我不确定我是否理解，但如果你想要一个`Range`基于字符串的对象，为什么不试试这个：

```
Option Explicit

Sub TestRange()

    '***** Declare variables
    Dim oX As Range
    Dim sCOLs As String

    '***** Select column
    sCOLs = "A"

    '***** Set Range based on column from sCOLs
    Set oX = Range(sCOLs & "2", Range(sCOLs & "2").End(xlDown))

    '***** Do something with oX
    Debug.Print TypeName(oX)

    '***** Clean up
    Set oX = Nothing

End Sub 
```

您也可以尝试将整个范围作为字符串，也许是更简洁的代码？

```
Dim sRange as String

sRange = "A2"

Set oX = Range(sRange, Range(sRange).End(xlDown)) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-28T08:27:07.477

您还可以使用 Inputbox 让用户单击某个单元格。然后，这将创建一个变量“UserRange”，其中包含您可以使用的单元格引用。

```
Sub test()

Dim UserRange As Range

Set UserRange = Application.InputBox(Prompt:="Please Select Range", Title:="Range Select", Type:=8)
UserRange.Value = "Test"

End Sub 
```

# ruby - 在 ruby -gem 中包含操作指南/文档的最常见方法是什么？

> ID：12350594
> 
> 赞同：0
> 
> 时间：2012-09-10T11:19:38.613
> 
> 标签：ruby, documentation, gem, rdoc

我看到如果安装了 gem，也会生成 rdoc，您可以通过以下方式访问 rdoc

```
gem server #->localhost:8808 
```

我正在考虑如何描述 ruby​​ 开发人员如何使用已安装的 gem 的最常见方法。我来自（java）的apidocs / howtos例如已经包含在罐子中。

我看到有一种 README.rdoc 文件 -convention(?) 并想也许这就是 ruby​​-developer 在下载 gem 后开始寻找的地方？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T12:28:35.760

这取决于开发商。

如果 README 被大量标记（例如，大量的 Markdown 或 RDoc），通常最方便使用`gem server`从本地 gem 文档服务器访问 Gem 文档。

或者按照 gem 服务器列表中的 www 链接，或者手动读取文件。

其他文档源通常包含在`doc`目录中，使用普通 Ruby 工具（rake 和/或 rdoc）构建。

不过，我不*完全*确定你在问什么。首先，Java 库通常*不*包含 API 文档或源代码，它们通常是单独捆绑的，尤其是在您使用 Maven 时。Gems 包含源代码，因此始终可以生成 RDoc。

在 Java 中，仅当 (a) 开发人员（IMO 滥用）Javadocs 通过在 API 文档中包含示例，或 (b) 示例包含在源代码中并且您拥有源代码时，才会出现示例。下载的 Java 库中很少有“howtos”，除非它是使用 Maven 开发的，您将站点打包，并且该站点包含超出正常 API 报告的使用页面。

# matlab - 如何在 Unix 上的 Matlab 中访问内存信息 - 相当于用户 view.MaxPossibleArrayBytes

> ID：12350598
> 
> 赞同：6
> 
> 时间：2012-09-10T11:19:45.213
> 
> 标签：matlab, unix, memory

我在 matlab 中寻找与 Windows 平台上的内存返回的数据等效的数据。

我知道使用 unix('vm_stat') 的可能性，但我需要的特定信息部分是最大的连续空闲内存块。

此信息由内存返回，如下所示：

```
[userview, ~] = memory;
a = userview.MaxPossibleArrayBytes 
```

有没有人不知道如何编写一个可以返回相同信息的 unix 命令？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-10T11:24:07.737

调用命令“free”并解析结果。这适用于linux

```
[r,w] = unix('free | grep Mem');
stats = str2double(regexp(w, '[0-9]*', 'match'));
memsize = stats(1)/1e6;
freemem = (stats(3)+stats(end))/1e6; 
```

输出以 GB 为单位。最后一个免费返回的数字是操作系统使用的“缓存”内存，例如动态库。它通常可以使用，但您可以决定不使用它，只使用免费报告作为“免费” - 输出中的第三个数字字段。

**编辑**在 Linux 上，MATLAB 中的内存分配 mxMalloc/mxCalloc 很可能只是调用 malloc 和朋友。为了得到提示，请执行以下实验。在 mex 文件中，使用以下代码分配一个数组，并将其返回给 MATLAB：

```
 rout = calloc(sizeof(Double),M*N);
  pargout[0] = mxCreateNumericMatrix(0,0,mxDOUBLE_CLASS,mxREAL);
  mxSetM(pargout[0], m);
  mxSetN(pargout[0], n);
  mxSetData(pargout[0], rout);
  mexMakeMemoryPersistent(rout); 
```

您通常可以使用 MATLAB 中返回的变量。您甚至可以清除它 - 这不会导致任何问题。如果 MATLAB 确实只使用 malloc，那么我不知道它们可以强制执行物理上连续的内存。

我知道你不能在 Windows 上运行上面的代码。此代码使 MATLAB 崩溃。当然，你不应该在你的代码中这样做。它只是说明了这一点。

# linux - 参数在 pthread 中传递错误

> ID：12350602
> 
> 赞同：2
> 
> 时间：2012-09-10T11:19:53.797
> 
> 标签：linux, multithreading, parameters, pthreads, arguments

我编写了一个代码来打印字符串：使用 pthread 的“线程 0”到“线程 4”。

这是我的代码：

## 情况1：

```
#include <stdio.h>
#include <stdlib.h>
#include <pthread.h>

void *print_message_function(void* parameter) {
    long *i = (long *)parameter;
    printf("Thread %ld\n", *i);
    pthread_exit(0);
}

int main(int argc, char *argv[]) {
    pthread_t threads[5];
    long i = 0;
    for (i = 0; i < 5; i++) {
        pthread_create(&threads[i], 0, print_message_function, (void *)&i);
    }

    pthread_exit(NULL);
} 
```

但结果是：

```
Thread 2
Thread 3
Thread 3
Thread 4
Thread 5 
```

或者：

```
Thread 0
Thread 0
Thread 0
Thread 0
Thread 0 
```

当我再次运行它时它改变了。所以我不知道为什么我传递的值是（2到5）或全部（0）或.....（很多情况下）。我认为我通过的论点是从 0 到 4。

## **案例二：**

当我更改为新代码时：

```
#include <stdio.h>
#include <stdlib.h>
#include <pthread.h>

void *print_message_function(void *parameter);

int main(int argc, char *argv[]) {
    pthread_t threads[5];
    int i = 0;
    for (i = 0; i < 5; i++) {
        char *msg = (char*)malloc(sizeof(char));
        sprintf(msg, "Thread %d", i);
        pthread_create(&threads[i], 0, print_message_function, (void *)msg);
    }
}

void *print_message_function(void *parameter) {
    printf("%s\n", (char *)parameter);
} 
```

结果是：

```
Thread 1
Thread 0
Thread 3
Thread 2
Thread 4
Thread 4 
```

这意味着循环运行 6 次！为什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-10T11:25:29.703

**将案例 1**更改为：

```
#include <stdio.h>
#include <stdlib.h>
#include <pthread.h>

void *print_message_function(void* parameter) {
    long i = (long)parameter;  // <<<
    printf("Thread %ld\n", i); // <<<
    pthread_exit(0);
}

int main(int argc, char *argv[]) {
    pthread_t threads[5];
    long i = 0;
    for (i = 0; i < 5; i++) {
        pthread_create(&threads[i], 0, print_message_function, (void *)i); // <<<
    }

    pthread_exit(NULL);
} 
```

您之前看到不一致结果的原因是因为您将一个指针传递给每个线程，其中每个指针都指向同一个局部变量，然后您正在修改该局部变量。

在**案例 2**中，您`malloc`只输入一个字符，然后尝试向其写入字符串。它应该很容易修复。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-10T11:27:55.137

您的*案例 2*方法是有效的，但是您需要修复该`malloc`部分以分配足够的字节。将其更改为

```
char *msg = (char*)malloc(sizeof(char) * (strlen("Thread ") + 10));
// assuming i will take at most 9-digits (unlikely case) 
```

对于您的*案例 1*，您传递的地址为`i`. 但是`i`更改线程函数的值将在尝试打印时获得该位置的任何值。另请注意，`i`在线程函数执行时，地址可能无效，因为它分配在堆栈上，并且在`main`函数返回时会消失。

# search - Solr Ping 查询导致异常：未定义字段文本

> ID：12350606
> 
> 赞同：6
> 
> 时间：2012-09-10T11:20:02.877
> 
> 标签：search, solr

我试图在我的服务器上做一些工作，但遇到了问题。当我尝试通过管理面板 ping 服务器时，我收到此错误，我认为这可能是导致问题的原因：

> 服务器遇到内部错误（Ping 查询导致异常：未定义字段文本 org.apache.solr.common.SolrException：Ping 查询导致异常：未定义字段文本在 org.apache.solr.handler.PingRequestHandler.handleRequestBody(PingRequestHandler.java: 76) 在 org.apache.solr.handler.RequestHandlerBase.handleRequest(RequestHandlerBase.java:129) 在 org.apache.solr.core.SolrCore.execute(SolrCore.java:1376) 在 org.apache.solr.servlet.SolrDispatchFilter .execute(SolrDispatchFilter.java:365) 在 org.apache.solr.servlet.SolrDispatchFilter.doFilter(SolrDispatchFilter.java:260) 在 org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235) 在 org. org.apache.catalina.core 中的 apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)。StandardWrapperValve.invoke(StandardWrapperValve.java:233) 在 org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:191) 在

谁能给我一些指导，看看可能出了什么问题？我正在使用 Solr 3.6。我认为这可能与 schema.xml 中定义的“文本”有关？

这是我目前的架构：[https ://gist.github.com/3689621](https://gist.github.com/3689621)

任何帮助将非常感激。

詹姆士

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-09-10T11:34:27.560

根据错误，我猜测 /admin/ping requestHandler 中定义的查询正在搜索名为 的字段`text`，而您没有在架构中定义该字段。

这是一个典型的 ping requestHandler 部分

```
<requestHandler name="/admin/ping" class="solr.PingRequestHandler">
  <lst name="invariants">
    <str name="q">solrpingquery</str>
  </lst>
  <lst name="defaults">
    <str name="qt">standard</str>
    <str name="echoParams">all</str>
    <str name="df">text</str>
  </lst>
</requestHandler> 
```

注意如何`<str name="df">text<str>`设置。这是 ping 将执行搜索的默认字段。您应该将其更改为在您的架构中定义的字段，也许，`title`或者`description`基于您的架构。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-11-14T14:39:58.860

在您的 schema.xml 中添加这一行

```
<field name="text" type="text_general" indexed="true" stored="false" multiValued="true"/> 
```

# twitter - 在 wordpress 中设置 Transient 以获取推文

> ID：12350607
> 
> 赞同：1
> 
> 时间：2012-09-10T11:20:10.070
> 
> 标签：twitter, wordpress

我正在按照教程在 [此处嵌入推文](http://www.problogdesign.com/wordpress/how-to-use-the-twitter-api-in-wordpress/)

但没有运气，结果`No tweets found.`

我只是将用户名更改为我的，我做错了什么？

需要在functions.php或数据库中配置一些东西吗？

或设置`set_transient();`？

（我把代码放在页脚）

请帮忙

# backbone.js - Chaplin.js 路线

> ID：12350614
> 
> 赞同：0
> 
> 时间：2012-09-10T11:20:33.753
> 
> 标签：backbone.js, routes, coffeescript, chaplinjs

js / chaplin.js 并且我在查找有关卓别林路线的文档时遇到了一些困难。

我有以下代码（cofeescript），它在 chrome 中工作，但在 Firefox 中，它尝试导航到服务器的请求并返回 404 错误。服务器端是一个 ASP MVC 3 项目。

路由定义 -> 'use strict' (match) -> match '', 'page#home' match 'Home', 'page#home' match 'Services', 'page#services'

页面控制器

```
define [
  'controllers/base/controller',
  'views/home_view',
  'views/services_view'
], (Controller, HomeView, ServicesView) ->
  'use strict'

  class PageController extends Controller

    historyURL: (params) ->
      ''
    home: (params) ->
      @view = new HomeView()
      return

    services: (params) ->
      @view = new ServicesView()
      return 
```

导航栏 (HTML)

```
 <a href="Home">Home</a>
  <a href="Services">Services</a> 
```

PS：我想知道的另一件事是，当控制器被调用时：

```
define [
  'controllers/base/controller',
  'views/home_view',
  'views/services_view'
], (Controller, HomeView, ServicesView) ->
  'use strict' 
```

这是使用 AJAX 加载主页和服务视图我只想加载实际调用的视图？

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T15:14:52.810

[已经在https://github.com/chaplinjs/chaplin/issues/180](https://github.com/chaplinjs/chaplin/issues/180)上回答

# sql-server - 将当前表列更新为标识列

> ID：12350620
> 
> 赞同：3
> 
> 时间：2012-09-10T11:20:43.427
> 
> 标签：sql-server, identity-column

> **可能重复：**
> [在列上设置标识](https://stackoverflow.com/questions/5181304/set-identity-on-the-column)

我有一个表，假设列名为 Serno 的消息。Serno 保留每条消息的序列号。但是系统非常旧，并使用 max(serno) 命令创建此序列号。现在，我正在尝试将此列更改为一个标识，但我不想丢失每条消息的当前序列号。

有没有办法解决这个问题。

我已经尝试创建一个新的标识列并从那里复制 serno 的值，但它不起作用。创建一个新的表格作为数据库都不会为每条消息提供新的序列号，我不希望这样。

欢迎任何想法。

提前致谢

嘛

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T11:32:29.447

您是否尝试过在设计视图中打开表格，选择列并将其设置`IdentitySpecification`为`Yes`（如果您有很多行，这可能需要一段时间，因为它会在内部生成表格的完整副本）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-10T11:46:52.647

您不能更改现有列并将其作为标识列。

您需要创建一个临时表并将值插入其中。最后，您必须删除实际表并将临时表重命名为实际表

```
CREATE TABLE dbo.NewTable(ID int IDENTITY(1, 1),<other columns>)

SET IDENTITY_INSERT dbo.NewTable ON

INSERT  INTO dbo.NewTable ( Id, <other columns>)
SELECT  Id,  <other columns> FROM    <actual_table>
go

SET IDENTITY_INSERT dbo.NewTable OFF
go

DROP TABLE your_table
go

Exec sp_rename 'NewTable', 'actual_table' 
```

# math - 如何计算像素着色器深度以将在点精灵上绘制的圆渲染为与其他对象相交的球体？

> ID：12350624
> 
> 赞同：17
> 
> 时间：2012-09-10T11:21:02.863
> 
> 标签：math, 3d, directx, shader, hlsl

我正在编写一个着色器来通过绘制阴影圆圈在点精灵上渲染球体，并且需要编写深度分量和颜色，以便彼此靠近的球体正确相交。

我正在使用类似于[Johna Holwerda](http://www.johanholwerda.nl/blog/2010/12/sphere-renderer-2/)编写的代码：

```
void PS_ShowDepth(VS_OUTPUT input, out float4 color: COLOR0,out float depth : DEPTH)
{
   float dist = length (input.uv - float2 (0.5f, 0.5f)); //get the distance form the center of the point-sprite
   float alpha = saturate(sign (0.5f - dist));
   sphereDepth = cos (dist * 3.14159) * sphereThickness * particleSize; //calculate how thick the sphere should be; sphereThickness is a variable.

   depth = saturate (sphereDepth + input.color.w); //input.color.w represents the depth value of the pixel on the point-sprite
   color = float4 (depth.xxx ,alpha ); //or anything else you might need in future passes
} 
```

该链接上的视频很好地了解了我所追求的效果：在点精灵上绘制的那些球体正确相交。我在下面添加了图片来说明。

我可以很好地计算点精灵本身的深度。但是，我不确定要**计算球体在像素处的厚度，**以便将其添加到精灵的深度，从而给出最终的深度值。（上面的代码使用一个变量而不是计算它。）

我已经断断续续地研究了几个星期，但还没有弄明白——我敢肯定这很简单，但这是我的大脑还没有动过的东西。

Direct3D 9 的点精灵大小以像素为单位计算，我的精灵有几种大小 - 都是由于距离造成的衰减（我实现了与在我的顶点着色器中[用于点大小计算的旧固定函数管道相同的算法](http://msdn.microsoft.com/en-us/library/windows/desktop/bb147281%28v=vs.85%29.aspx)）以及由于什么精灵代表。

**如何从像素着色器中的数据（精灵位置、精灵深度、原始世界空间半径、屏幕上的像素半径、相关像素到精灵中心的标准化距离）转换为深度值？****简单地将精灵大小与深度坐标中的球体厚度** 的部分解决方案很好 - 可以通过与中心的归一化距离进行缩放以获得像素处的球体厚度。

我使用 Direct3D 9 和 HLSL 以及着色器模型 3 作为 SM 上限。

## 在图片中

为了演示该技术，以及我遇到问题的地方：

从两个点精灵开始，在像素着色器中在每个精灵上画一个圆圈，使用[剪辑](http://msdn.microsoft.com/en-us/library/windows/desktop/bb204826%28v=vs.85%29.aspx)删除圆圈边界之外的片段：

![在此处输入图像描述](../Images/43eb83a97c17dddf944c29433bace62e.png)

一个将渲染在另一个之上，因为它们毕竟是平面。

现在，使着色器更高级，并绘制圆形，就好像它是一个球体一样，带有照明。请注意，即使平面精灵看起来是 3D 的，它们仍然会完全在另一个之前绘制，因为这是一种错觉：它们仍然是平面的。

![在此处输入图像描述](../Images/c518791358c4c52bb9968f4da571c172.png)

（以上很简单；这是我遇到问题的最后一步，我正在询问如何实现。）

现在，像素着色器不再只写颜色值，它也应该写深度：

```
void SpherePS (...any parameters...
    out float4 oBackBuffer : COLOR0,
    out float oDepth : DEPTH0 <- now also writing depth
   )
{ 
```

请注意，现在当球体之间的距离小于它们的半径时，球体相交：

![在此处输入图像描述](../Images/a034ed8a5b19dd65f9b7da6373a82b6d.png)

如何计算正确的深度值以完成最后一步？

## 编辑/注释

一些人评论说，真实的球体会因透视而变形，这在屏幕边缘可能特别明显，所以我应该使用不同的技术。首先，感谢您指出这一点，这不一定是显而易见的，对未来的读者有好处！其次，我的目标不是渲染透视正确的球体，而是快速渲染数百万个数据点，并且在视觉上我认为类似球体的对象看起来比平面精灵更好，并且也更好地显示空间位置。轻微的失真或没有失真都没有关系。如果您[观看演示视频](http://www.johanholwerda.nl/blog/2010/12/sphere-renderer-2/)，您可以看到它是一个有用的可视化工具。我不想渲染实际的球体网格，因为与简单的硬件生成的点精灵相比，三角形数量众多。我真的很想使用点精灵的技术，我只是想扩展[现有的演示技术](http://www.johanholwerda.nl/blog/2010/12/sphere-renderer-2/)以计算正确的深度值，在演示中它是作为变量传入的，没有来源说明它是如何派生的。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-18T13:47:30.610

我昨天想出了一个解决方案，它运行良好，并且产生了在精灵上绘制的球体的预期结果，具有正确的深度值，与场景中的其他对象和球体相交。它可能比它需要的效率低（例如，它计算和投影每个精灵的两个顶点）并且在数学上可能不完全正确（它需要捷径），但它会产生视觉上很好的结果。

## 技术

为了写出“球体”的深度，您需要在深度坐标中计算球体的半径 - 即半个球体的厚度。然后，当您写出球体上的每个像素时，可以根据距球体中心的距离来缩放此数量。

要计算深度坐标中的半径：

*   **顶点着色器：**在未投影的场景坐标中，通过球体中心（即表示点精灵的顶点）从眼睛投射光线并添加球体的半径。这为您提供了一个位于球体表面上的点。投影精灵顶点和新的球体表面顶点，并计算每个顶点的深度 (z/w)。不同的是您需要的深度值。

*   **像素着色器：**要绘制一个圆，您已经计算出到精灵中心的标准化距离，`clip`用于不绘制圆外的像素。由于它是标准化的 (0-1)，因此将其乘以球体深度（即半径的深度值，即球体中心的像素）并添加到平面精灵本身的深度。这使得球体中心处的最厚深度为 0，而边缘则紧随球体表面。（根据你需要的精确度，使用余弦来获得弯曲的厚度。我发现线性给出了完美的外观。）

## 代码

这不是完整的代码，因为我的效果是为我的公司准备的，但是这里的代码是从我的实际效果文件中重写的，省略了不必要的/专有的东西，并且应该足够完整以演示该技术。

**顶点着色器**

```
void SphereVS(float4 vPos // Input vertex,
   float fPointRadius, // Radius of circle / sphere in world coords
   out float fDXScale, // Result of DirectX algorithm to scale the sprite size
   out float fDepth, // Flat sprite depth
   out float4 oPos : POSITION0, // Projected sprite position
   out float fDiameter : PSIZE, // Sprite size in pixels (DX point sprites are sized in px)
   out float fSphereRadiusDepth : TEXCOORDn // Radius of the sphere in depth coords
{
    ...
   // Normal projection
   oPos = mul(vPos, g_mWorldViewProj);

   // DX depth (of the flat billboarded point sprite)
   fDepth = oPos.z / oPos.w;

   // Also scale the sprite size - DX specifies a point sprite's size in pixels.
   // One (old) algorithm is in http://msdn.microsoft.com/en-us/library/windows/desktop/bb147281(v=vs.85).aspx
   fDXScale = ...;
   fDiameter = fDXScale * fPointRadius;

   // Finally, the key: what's the depth coord to use for the thickness of the sphere?
   fSphereRadiusDepth = CalculateSphereDepth(vPos, fPointRadius, fDepth, fDXScale);

   ...
} 
```

所有标准的东西，但我把它包括在内是为了展示它是如何使用的。

关键方法和问题的答案是：

```
float CalculateSphereDepth(float4 vPos, float fPointRadius, float fSphereCenterDepth, float fDXScale) {
   // Calculate sphere depth.  Do this by calculating a point on the
   // far side of the sphere, ie cast a ray from the eye, through the
   // point sprite vertex (the sphere center) and extend it by the radius
   // of the sphere
   // The difference in depths between the sphere center and the sphere
   // edge is then used to write out sphere 'depth' on the sprite.
   float4 vRayDir = vPos - g_vecEyePos;
   float fLength = length(vRayDir);
   vRayDir = normalize(vRayDir);
   fLength = fLength + vPointRadius; // Distance from eye through sphere center to edge of sphere

   float4 oSphereEdgePos = g_vecEyePos + (fLength * vRayDir); // Point on the edge of the sphere
   oSphereEdgePos.w = 1.0;
   oSphereEdgePos = mul(oSphereEdgePos, g_mWorldViewProj); // Project it

   // DX depth calculation of the projected sphere-edge point
   const float fSphereEdgeDepth = oSphereEdgePos.z / oSphereEdgePos.w;
   float fSphereRadiusDepth = fSphereCenterDepth - fSphereEdgeDepth; // Difference between center and edge of sphere
   fSphereRadiusDepth *= fDXScale; // Account for sphere scaling

   return fSphereRadiusDepth;
} 
```

**像素着色器**

```
void SpherePS(
   ...
    float fSpriteDepth : TEXCOORD0,
    float fSphereRadiusDepth : TEXCOORD1,
    out float4 oFragment : COLOR0,
    out float fSphereDepth : DEPTH0
   )
{
   float fCircleDist = ...; // See example code in the question
   // 0-1 value from the center of the sprite, use clip to form the sprite into a circle
   clip(fCircleDist);    

   fSphereDepth = fSpriteDepth + (fCircleDist * fSphereRadiusDepth);

   // And calculate a pixel color
   oFragment = ...; // Add lighting etc here
} 
```

此代码省略了照明等。要计算像素与精灵中心的距离（获取`fCircleDist`），请参见问题中的示例代码（计算' `float dist = ...`'），它已经画了一个圆圈。

最终的结果是……

## 结果

![使用点精灵相交球体](../Images/e920951976ea59dac9fa518b27a8af6f.png)

瞧，点精灵绘制球体。

## 笔记

*   精灵的缩放算法也可能需要缩放深度。我不确定那条线是否正确。
*   它在数学上并不完全正确（走捷径），但您可以看到结果在视觉上是正确的
*   在使用数百万个精灵时，我仍然获得了不错的渲染速度（在 VMWare Fusion 模拟 Direct3D 设备上，对于 300 万个精灵，每帧 <10 毫秒）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-14T05:51:32.930

第一个大错误是真实的 3d 球体在透视 3d 投影下不会投影到圆形。

这是非常不直观的，但是看一些图片，尤其是大视野和偏离中心的球体。

其次，我建议不要在一开始就使用点精灵，这可能会使事情变得比必要的更难，尤其是考虑到第一点。只需在你的球体周围画一个宽大的边界四边形，然后从那里开始。

在您的着色器中，您应该将屏幕空间位置作为输入。由此，视图变换和投影矩阵可以得到眼睛空间中的一条线。您需要将这条线与眼睛空间中的球体相交（光线跟踪），获取眼睛空间交点，并将其转换回屏幕空间。然后输出 1/w 作为深度。我不是在这里为你做数学，因为我有点醉酒和懒惰，而且我认为这不是你真正想做的事情。虽然这是线性代数的一个很好的练习，所以也许你应该尝试一下。:)

您可能尝试做的效果称为深度精灵，通常仅与正交投影和存储在纹理中的精灵的深度一起使用。只需将深度与您的颜色一起存储在 Alpha 通道中，然后输出 eye.z+(storeddepth-.5)*depthofsprite。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-16T19:17:10.037

一般情况下，球体不会投影成圆形。这是解决方案。

这种技术被称为`spherical billboards`。可以在本文中找到深入的描述： [球形广告牌及其在渲染爆炸中的应用](http://sirkan.iit.bme.hu/~szirmay/firesmoke.pdf)

您将点精灵绘制为四边形，然后对深度纹理进行采样，以便找到每像素 Z 值与当前 Z 坐标之间的距离。采样 Z 值和当前 Z 之间的距离会影响像素的不透明度，使其在与基础几何体相交时看起来像一个球体。该论文的作者建议使用以下代码来计算不透明度：

```
float Opacity(float3 P, float3 Q, float r, float2 scr)
{
   float alpha = 0;
   float d = length(P.xy - Q.xy);
   if(d < r) {
      float w = sqrt(r*r - d*d);
      float F = P.z - w;
      float B = P.z + w;
      float Zs = tex2D(Depth, scr);
      float ds = min(Zs, B) - max(f, F);
      alpha = 1 - exp(-tau * (1-d/r) * ds);
   }
   return alpha;
} 
```

这将防止您的广告牌与场景几何体发生尖锐的交叉。

如果点精灵管道难以控制（我只能说关于 OpenGL 而不是 DirectX），最好使用 GPU 加速的广告牌：你提供 4 个与粒子中心匹配的相等的 3D 顶点。然后将它们移动到顶点着色器中适当的广告牌角落，即：

```
if ( idx == 0 ) ParticlePos += (-X - Y);
if ( idx == 1 ) ParticlePos += (+X - Y);
if ( idx == 2 ) ParticlePos += (+X + Y);
if ( idx == 3 ) ParticlePos += (-X + Y); 
```

这更面向现代 GPU 管道，并且粗略适用于任何非退化透视投影。

# iphone - 如何在 Xcode 4.2 下开发具有不同图形集的 iOS 应用程序？

> ID：12350625
> 
> 赞同：0
> 
> 时间：2012-09-10T11:21:03.597
> 
> 标签：iphone, ios, xcode

我有这个带有一整套图像的应用程序，但我想添加例如个性化的图形集。有没有一种简单的方法来组织和开发源代码，并且在这些图像集之间切换时不会迷路？

我看到它的一种方法是在我的硬盘驱动器上有两个带有图形的文件夹，然后在使用个性化设置发布项目当前图像替换之前......有更好的方法吗？

我正在为这个应用程序使用 Xcode 4.2 和 iOS 5.0。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T13:04:55.443

就维护而言，最简单和最可靠的可能是编写自己的图像访问函数或 marco，它在全局控制在一个地方。然后在您希望对不同图像具有灵活性的所有情况下使用它，例如像这样。我刚刚习惯了这种分配图像的方式，`stretchableImageWithLeftCapWidth`因为它可以很好地调整大小。

当然你可以使用任何其他方式来分配你的图像，比如直接不使用`stretchableImageWithLeftCapWidth`

无论如何，这是我的建议：

```
 NSString *s = [NSString stringWithFormat:@"%s%i",@"imageName",CONST_VERSION];
   UIImage *theImage = [UIImage imageNamed:s];
   myImageView.image = [theImage stretchableImageWithLeftCapWidth:12 topCapHeight:0]; 
```

你可以做

```
 #define CONST_VERSION 1 // or 2 
```

然后将您的图像命名为：

```
myImage1.png 
```

> `and`

```
myImage2.png 
```

# java - 是否可以为相同的 xs:simpleContent 元素创建单个类映射？

> ID：12350627
> 
> 赞同：2
> 
> 时间：2012-09-10T11:21:09.870
> 
> 标签：java, jaxb2, xjc, xjb

我有一个外部提供的 XSD，它有许多相同的元素，并且代表具有可选货币属性的价格。

```
<xs:complexType name="someType">
  <xs:sequence>
    <xs:element name="rrp" minOccurs="0">
      <xs:complexType>
        <xs:simpleContent>
          <xs:extension base="xs:decimal">
            <xs:attribute name="currency" type="xs:string"/>
          </xs:extension>
        </xs:simpleContent>
      </xs:complexType>
    </xs:element>
    <xs:element name="whs" minOccurs="0">
      <xs:complexType>
        <xs:simpleContent>
          <xs:extension base="xs:decimal">
            <xs:attribute name="currency" type="xs:string"/>
          </xs:extension>
        </xs:simpleContent>
      </xs:complexType>
    </xs:element>
  </xs:sequence>
</xs:complexType> 
```

我希望将其转换为通用类而不是大量静态类，这可以通过 XJB 映射文档实现吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T15:56:17.040

我不知道如何使用 JAXB 注释来做到这一点，但这并不是说这是不可能的。也许有人会在那里给你一个更好的答案。

解决这个问题的理想方法显然是更改 XSD，以便您有一个“PriceWithcurrency”xs:complexType 定义，并且每个元素都被声明为该类型。但你说你不能改变它。

不过，我会尝试创建一个 XSD 的变体来执行此操作，为其保留相同的命名空间定义并生成 jaxb 类。它应该与使用原始 XSD 生成的 XML 文档实例一起工作。

# c# - 如何在 J2ME 中使用和获取 WCF 返回 Json 的正确数据

> ID：12350639
> 
> 赞同：0
> 
> 时间：2012-09-10T11:21:52.077
> 
> 标签：c#, wcf, java-me, utf-8

我创建了一个 WCF 服务，然后在 J2ME 中使用了这个服务。我的 WCF 服务是：

```
IService:
        [OperationContract]
                [WebInvoke(Method = "GET", UriTemplate = "/GetByCity/Limit={limit}", BodyStyle = WebMessageBodyStyle.WrappedRequest,
    RequestFormat = WebMessageFormat.Json, ResponseFormat = WebMessageFormat.Json)]
                ItemList GetByCity(string limit);

Service.CS :

public ItemList GetByCity(string limit)
        {           
            DataTable City = ds.Tables["City"];
                var items = WithHTML(City, limit);
                return new ItemList { Items = items };
        }
 public List<Item> WithHTML(DataTable City, string limit)
        {
            var items = (from d in City.AsEnumerable()
                         where d.Field<string>("strMainHin") != string.Empty
                         orderby d.Field<DateTime>("dtPosted")
                         select new Item
                         {
                             ItemId = d.Field<Int32>("intId").ToString(),
                             ItemLine = htmlEscapes(d.Field<string>("strMainHin")),
                             Photo = @"http://192.168.1.17:801/ImageById/" + d.Field<Int32>("intId") + ".jpg"
                         }).Take(Convert.ToInt32(limit)).ToList();

            return items;
        }
 public string htmlEscape(string input)
        {            var output = Regex.Replace(input, @"&#([0-9]*);", x => new String((char)int.Parse(x.Groups[1].Value), 1));
            return output;
        } 
```

现在这个服务在 URL 中的输出`http://192.168.1.17:803/Patrika/Service.svc/GetByCity/Limit=2` 是：

```
{"Items":[{"ItemLine":"डेढ़ करोड़ का क्रिकेट सट्टा पकड़ा","ItemId":"821745","Photo":"http:\/\/192.168.1.17:801\/ImageById\/821745.jpg"},{"ItemLine":"पार्किग का इंतजाम नहीं, तो जब्त होंगे वाहन","ItemId":"824837","Photo":"http:\/\/192.168.1.17:801\/ImageById\/824837.jpg"}]} 
```

但是当我通过此链接在 J2ME 中使用此服务时：'http://192.168.1.17:803/Patrika/Service.svc/GetByCity/Limit=2' Unicode 或 UTF-8 我在 J2ME 中给出的返回响应是：

```
{"ItemLine":"à¤¡à¥‡à¤¢à¤¼ à¤•à¤°à¥‹à¤¡à¤¼ à¤•à¤¾ à¤•à¥?à¤°à¤¿à¤•à¥‡à¤Ÿ à¤¸à¤Ÿà¥?à¤Ÿà¤¾ à¤ªà¤•à¤¡à¤¼à¤¾"} 
```

一切都很好，但只有这个带有一些 unicode 的字符串给出了错误的输出。然后我尝试只发送一个数据：

```
{"ItemLine":"डेढ़ करोड़ का क्रिकेट सट्टा पकड़ा"} 
```

然后在 J2ME 结束时，我将此字符串放入 JSON 对象并将其放入如下标签中：

```
Label l1=new Label("ItemLine");
this.component.add(l1); 
```

但输出与上面那个错误的 json 字符串相同。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T05:46:20.920

服务：

```
 [OperationContract]
                [WebInvoke(Method = "GET", UriTemplate = "/GetByCity/Limit={limit}", BodyStyle = WebMessageBodyStyle.WrappedRequest,
    RequestFormat = WebMessageFormat.Json, ResponseFormat = WebMessageFormat.Json)]
                ItemList GetByCity(string limit); 
```

服务.CS：

```
public ItemList GetByCity(string limit)
        {           
            DataTable City = ds.Tables["City"];
                var items = WithHTML(City, limit);
                return new ItemList { Items = items };
        }
 public List<Item> WithHTML(DataTable City, string limit)
        {
            var items = (from d in City.AsEnumerable()
                         where d.Field<string>("strMainHin") != string.Empty
                         orderby d.Field<DateTime>("dtPosted")
                         select new Item
                         {
                             ItemId = d.Field<Int32>("intId").ToString(),
                             ItemLine = htmlEscapes(d.Field<string>("strMainHin")),
                             Photo = @"http://192.168.1.17:801/ImageById/" + d.Field<Int32>("intId") + ".jpg"
                         }).Take(Convert.ToInt32(limit)).ToList();

            return items;
        }
 public string htmlEscape(string input)
        {            var output = String.Join("", WebUtility.HtmlDecode(input).Select(x => "\\u" + ((int)x).ToString("X4")));
            return output;
        } 
```

在 Last 方法中输入是：

```
&#2351;&#2369;&#2357;&#2340;&#2368; &#2325;&#2366; &#2309;&#2343;&#2332;&#2354;&#2366; &#2358;&#2357; &#2350;&#2367;&#2354;&#2366; 
```

输出是：

```
\\\u0921\\\u0947\\\u0922\\\u093C \\\u0915\\\u0930\\\u094B\\\u0921\\\u093C \\\u0915\\\u093E \\\u0915\\\u094D\\\u0930\\\u093F\\\u0915\\\u0947\\\u091F \\\u0938\\\u091F\\\u094D\\\u091F\\\u093E \\\u092A\\\u0915\\\u0921\\\u093C\\\u093E 
```

在这个输出中，我得到了额外的“\”，所以这不是在 J2ME 中呈现的。

所以在客户端意味着在 J2ME 端我拆分了我得到的字符串，然后转换`\\\`为`\\`.

这就是我得到的印地语字体：*युवती का अधजला शव मिला*。

感谢@Codo，他帮了我很多。

# java - Play2 - 表单 -> objectId

> ID：12350644
> 
> 赞同：0
> 
> 时间：2012-09-10T11:22:02.583
> 
> 标签：java, playframework-2.0, morphia, objectid

我对 play2 中的表格有疑问。

模型：

```
@Id private ObjectId id; 
```

形式

```
<input name="id" id="id" type="hidden" value="@guidesForm.field("id").value()"> 
```

我无法初始化 id 字段，`bindFromRequest()`它总是为空的。而且我只能使用 ObjectId 而不是字符串进行查询。

```
ObjectId id = new ObjectId(form().bindFromRequest().get("id")); 
```

这是 objectid 的正确构造函数。如您所见，这是我不使用的解决方法，`guideForm.bindFromRequest();`我只需要直接绑定它。

这感觉有点hacky。是我可以使用正常绑定的解决方案吗？

```
Form<Myclass> guideForm = form(Myclass.class);
Form<Myclass> filledForm = guideForm.bindFromRequest(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T11:45:06.377

尝试在[全局对象](http://www.playframework.org/documentation/2.0.3/JavaGlobal)的 onStart() 中注册一个自定义 DataBinder ：

```
Formatters.register(ObjectId.class, new SimpleFormatter<ObjectId>() {

    @Override
    public ObjectId parse(String input, Locale l) throws ParseException {

        return ...; // create the object from the input of the form
    }

    @Override
    public String print(ObjectId objectId, Locale l) {
        return String.valueOf(objectId.id);
    }

}); 
```

该文档位于本页末尾：[http ://www.playframework.org/documentation/2.0.3/JavaForms](http://www.playframework.org/documentation/2.0.3/JavaForms)

# sql - 如何告诉 T-SQL 查询不要转义给定的字符串/查询结果

> ID：12350647
> 
> 赞同：1
> 
> 时间：2012-09-10T11:22:18.777
> 
> 标签：sql, sql-server, sql-server-2008-r2

这是一个示例查询

```
select *
from tablename
where tableid in (<sub query>); 
```

这里`<sub query>`返回 null 或一串模式`'id1','id2','id3'`

我`<sub query>`是这样的：

```
select xml_data.value('(/Node/SubNode)[1]', 'varchar(max)'))
from tablename
where tableid = '9944169f-95a6-4570-89d7-b57a3fe1b693' 
```

**问题**：
我的子查询返回正确的数据（`'id1','id2','id3'`），但父查询将完整的结果视为一个字符串，因此总是返回 0 行。

如何告诉 SQL Server 不要转义子查询结果中存在的单引号？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T12:33:31.703

目前尚不清楚您的子查询是否适用于与第一个查询相同的表，但这应该向您展示大体方向

```
declare @x xml = '<Node><SubNode>t1</SubNode><SubNode>t2</SubNode></Node>'

declare @t  table (v varchar(20))
insert @t values ('t1'),('t3')

select table1.*
from
    @t table1
        inner join 
    @x.nodes('/Node/SubNode') t(x)
        on table1.v = t.x.value('.','varchar(100)') 
```

# javascript - 当上面的 Div 填充时移动 Div

> ID：12350648
> 
> 赞同：0
> 
> 时间：2012-09-10T11:22:19.747
> 
> 标签：javascript, html, css

我有 2 个具有相对位置用户的 div 按钮填充第一个 Div(innerHTML) 我希望第二个 Div 在第一个 Div 填充时向下移动

显示下面的链接 [演示](http://jsfiddle.net/IfaCompany/3NP6F/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T11:32:44.717

像这样？[jsFiddle](http://jsfiddle.net/3NP6F/1/)

```
<!DOCTYPE html>
<html>
<head>
</head>
<body>
    <input type='button' value='Add' onclick='AddEl()' />
    <div style='position:relative;background-color:Red'>
    01
    <div id='Content' style='position:relative;background-color:Green'>
    </div>
    </div>
    <div style='position:relative;background-color:Blue'>
    Hagh
    <div>
<script>
function AddEl()
{
document.getElementById('Content').innerHTML='Ya';
}
</script>

</body>
</html>
​ 
```

您在`<div>`s 中的嵌套错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T11:41:51.600

真的很难理解你的问题，下次请写完整的句子。但我想我理解你想要达到的目标。
你不能只保持打开的 div，你必须关闭它们。在 div 之后只写`</div>`.
如果你在一个 div 中打开一个 div，至少有一些样式或其他内容，在内部 div 旁边，在父 div 内部。
修复这些，它会为你工作。

这是固定代码：

```
<!DOCTYPE html>
<html>
<head>
</head>

<body>
<input type='button' value='Add' onclick='AddEl()' />
<div style='position:relative;background-color:Red'>
01
</div>
<div id='Content' style='position:relative;background-color:Green'>
</div>
<div style='position:relative;background-color:Blue'>
Hagh
</div>
</body>
<script>
function AddEl()
{
document.getElementById('Content').innerHTML='Ya';
}
</script>
</html> 
```

# jsf - 是什么让我的 Richfaces 组合框在第一次使用后无法工作？

> ID：12350649
> 
> 赞同：1
> 
> 时间：2012-09-10T11:22:24.490
> 
> 标签：jsf, richfaces, jsf-1.2

我目前正在使用 JSF 1.2 和 Richfaces 3.3.3。

我在 rich:datatable 中的组合框出现了一个非常奇怪的错误：我第一次单击并选择一个值时，它正在工作，并且通过 ajax:support，它会根据需要更新页面。但是，如果我尝试更改组合框中的值，似乎“被阻止”......字段不可编辑，箭头不可“点击”。如果我单击页面的另一个字段，然后返回，通常效果更好（但并非总是如此）。

这是代码：

```
 <rich:column style="border:none;" id="KitCol">
        <f:facet name="header">
            <h:outputText value="Kit"/>
        </f:facet>
        <rich:comboBox id="kit" value="#{deployItem.kit}" 
            directInputSuggestions="true" defaultLabel="Enter kit name >
            <f:selectItems value="#{deployItem.kits}" />
            <a4j:support event="onchange" action="#{deployItem.kitChanged}"
                reRender="deployActions, deployTable">
                <f:setPropertyActionListener value="true" target="#{deployController.atLeastOneItem}" />
            </a4j:support>
        </rich:comboBox>
    </rich:column> 
```

有人知道如何解决这个问题吗？

提前致谢。

# spring-security - spring 石英作业 - 访问 spring-security 安全 bean 方法

> ID：12350653
> 
> 赞同：3
> 
> 时间：2012-09-10T11:22:40.063
> 
> 标签：spring-security, quartz-scheduler

我使用石英将 cronjobs 添加到 spring 应用程序。

在这些工作中，我想从另一个应用程序访问 spring-security 安全 bean 方法。

这是我的应用程序结构。

| - 核心
| - 网络应用
| - 工作应用程序

webapp 和 jobsapp 都使用核心服务。jobsapp 不是网络应用程序。它只是有石英工作。

如果我尝试访问使用 SpringSecurity global-method-security 保护的 bean，则在作业中出现异常`{org.springframework.security.AuthenticationCredentialsNotFoundException}"org.springframework.security.AuthenticationCredentialsNotFoundException: An Authentication object was not found in the SecurityContext"`

如果我使用 SecurityContextHolder.getContext().setAuthentication 将上下文设置为高级用户，它就可以工作。

但是，我必须为所有工作都这样做。

有没有办法让所有的工作都以特定用户的身份运行？可能是某处的一些配置？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T11:28:09.217

你有两个选择：

*   向上移动`@Secured`注释，从服务到 Web 层。如果我理解正确，您的 Quartz 作业直接访问服务 bean（绕过 Web 层），那么您也将绕过安全性

*   就像您描述的那样，实现 Run-As 功能。它不必是那个手册。尝试模板方法模式或一些 AOP + 注释。它会变得相当干净。

我们尝试了这两种方法，将安全性转移到 Web 层效果稍好一些。这是可能的，因为服务层很好地映射到 Spring MVC 控制器方法。

# .htaccess - Vanity URL But with settings

> ID：12350654
> 
> 赞同：0
> 
> 时间：2012-09-10T11:22:48.533
> 
> 标签：.htaccess

Just a quick question,

I am making user profiles for my website and would like to include vanity URLS, but the page has a lot of separate information which gets loaded, e.g Followers tab, uploads tab, and each of these have some kind of setting that can be applied like ASC DESC, New/old results etc. What would be the best way to have vanity urls but keep the functionality i require?

[http://www.site.com/user.php?id=1&content=Followers&Order=(Different](http://www.site.com/user.php?id=1&content=Followers&Order=(Different) settings for each result)

But i am wondering if it would be better if i should just name the content differently if someone wanted to search for followers + a limitation, for example

[http://www.site.com/user.php?id=1&content=NewestFollowers](http://www.site.com/user.php?id=1&content=NewestFollowers),

rather than

[http://www.site.com/user.php?id=1&content=Followers&Order=Newest](http://www.site.com/user.php?id=1&content=Followers&Order=Newest)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T11:48:24.317

You typically want to construct the vanity URL so that it directly maps to query string parameters to the ugly URL. So if you have:

```
http://www.site.com/user.php?id=1&content=Followers&Order=Newest 
```

You can make your vanity URL look like:

```
http://www.site.com/u/1/Followers/Newest/ 
```

But the `/1/` bit is a little ugly, and not exactly vanity, so if you can pass a username through that query string parameter, it would look better:

```
http://www.site.com/u/jonlin/Followers/Newest/ 
```

Then you'd just put some mod_rewrite rules in an htaccess file in your document root that internally rewrites the vanity URL back to the ugly one:

```
RewriteEngine On
RewriteRule ^u/([^/]+)/([^/]+)/([^/]+)/?$ /user.php?id=$1&content=$2&Order=$3 [L,QSA]
RewriteRule ^u/([^/]+)/([^/]+)/?$ /user.php?id=$1&content=$2 [L,QSA]
RewriteRule ^u/([^/]+)/?$ /user.php?id=$1 [L,QSA] 
```

# qt - Qt 如何使用 x() 和 y() 位置在小部件上查找对象

> ID：12350658
> 
> 赞同：10
> 
> 时间：2012-09-10T11:22:56.763
> 
> 标签：qt

我有一个主窗口。在 MainWindow 我有多个 Qlabel。现在，我需要找到点击的 QLabel。使用 MousePressEvent，我可以获得鼠标点击的 X() 和 Y() 位置。

我如何使用这个坐标来识别 QLabel？

QT 中是否有任何函数可以使用 X() 和 Y() 坐标找到单击的对象？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-09-10T11:34:06.290

由于 QLabel 是 QWidget 的子类，您可以在 QLabel::mousePressEvent 中处理鼠标按下事件

```
virtual void mousePressEvent ( QMouseEvent * ev ) 
```

但是在 QMainWindow 中，您可以使用 childAt 来获取 x,y 处的子小部件

```
QWidget * QWidget::childAt ( int x, int y ) const

QLabel* label= static_cast<QLabel*>(mainWindow->childAt(x,y)); 
```

阅读更多： [http ://doc.qt.io/qt-5/qwidget.html#childAt](http://doc.qt.io/qt-5/qwidget.html#childAt)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-06-28T08:37:49.653

在 Qt5 这也有效

```
QTabBar *widget =(QTabBar*) qApp->widgetAt(QCursor::pos()); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-10T11:32:15.417

除了尝试从鼠标坐标中识别单击了哪个标签，您还可以使用标签的[`mousePressEvent()`](http://qt-project.org/doc/qt-4.8/qlabel.html#mousePressEvent)方法。

例如，创建自己的重载标签类，并在`mousePressEvent()`发出`clicked()`信号时将其绑定到插槽。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-10T11:29:08.287

使用`widgetAt`里面的函数`QApplication`

```
QWidget *widget = qApp->widgetAt(x,y); 
```

然后你可以`dynamic_cast`进入`QLabel`.

# r - 在双边案例交叉设计中创建控制日期

> ID：12350661
> 
> 赞同：3
> 
> 时间：2012-09-10T11:23:07.817
> 
> 标签：r, sas, stata

我计划研究空气污染对急诊室就诊的影响，并打算使用双边病例交叉设计。对于每个案例（医院就诊），我想创建 4 个对照日期（就诊前后的 7 天和 14 天）。例如，如果一个人在 2012 年 9 月 10 日访问诊所，我的控制将是 8 月 27 日、9 月 3 日、9 月 17 日和 9 月 24 日。以下示例说明了我拥有什么以及我想要实现什么。

任何关于如何在 SAS、Stata 或 R 中进行此操作的想法将不胜感激

样本数据（均为访问日期）

```
id  date  
-------------
1   04-jan-05
2   05-jan-05
3   05-jan-05
4   06-jan-05
5   06-feb-05 
```

我想要实现的目标（每个`id`都有一个案例和 4 个控件）

```
id  date        outcome
---------------------------
1   21-Dec-04   control
1   28-Dec-04   control
1   04-Jan-05   case
1   11-Jan-05   control
1   18-Jan-05   control
2   22-Dec-04   control
2   29-Dec-04   control
2   05-Jan-05   case
2   12-Jan-05   control
2   19-Jan-05   control
3   22-Dec-04   control
3   29-Dec-04   control
3   05-Jan-05   case
3   12-Jan-05   control
3   19-Jan-05   control
4   23-Dec-04   control
4   30-Dec-04   control
4   06-Jan-05   case
4   13-Jan-05   control
4   20-Jan-05   control
5   23-Jan-05   control
5   30-Jan-05   control
5   06-Feb-05   case
5   13-Feb-05   control
5   20-Feb-05   control 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-10T11:46:32.707

一个简单的循环将产生您想要的输出。

```
data have;
input id  date :date10.;
format date date9.;
datalines;
1   04-jan-05
2   05-jan-05
3   05-jan-05
4   06-jan-05
5   06-feb-05
;
run;

data want (drop=i date rename=(date1=date));
set have;
format date1 date9.;
length outcome $8;
do i=-14 to 14 by 7;
    date1=date+i;
    outcome=ifc(i=0,'case','control');
    output;
end;
run; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-10T12:28:58.150

这是一个 R 解决方案：

```
# Your data
visits <- read.table(header=TRUE, text = "id  date  
1   04-jan-05
2   05-jan-05
3   05-jan-05
4   06-jan-05
5   06-feb-05")

# Convert $date to a date format
visits$date <- as.Date(visits$date, format="%d-%b-%y") 
```

要将您的输出作为列表（在某些情况下可能很有用）：

```
lapply(1:nrow(visits), 
       function(x) 
         data.frame(id = visits$id[x], 
                    dates = visits$date[x] + seq(-14, 14, 7), 
                    outcome = c("control", "control", "case", 
                                "control", "control"))) 
```

或者，如果您更喜欢单个`data.frame`，则相同，再加上`do.call(rbind, ...)`：

```
do.call(rbind, 
        lapply(1:nrow(visits), 
               function(x) 
                 data.frame(id = visits$id[x], 
                            dates = visits$date[x] + seq(-14, 14, 7), 
                            outcome = c("control", "control", "case", 
                                        "control", "control")))) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-11T03:06:18.973

状态解决方案：

```
input byte id str9 sdate 
  1   04-jan-05
  2   05-jan-05
  3   05-jan-05
  4   06-jan-05
  5   06-feb-05
end 
generate long ndate = date(sdate,"DMY",2050)
expand 5
bysort id: replace ndate = ndate + (_n-3)*7
generate byte case = (ndate == date(sdate,"DMY",2050)) 
```

# iphone - 如何在 iPhone 应用程序中找到至少一个字符的 NSString？

> ID：12350665
> 
> 赞同：1
> 
> 时间：2012-09-10T11:23:22.260
> 
> 标签：iphone, ios, nsstring, special-characters

正在开发基于消息的 iPhone 应用程序。`a-z and A-Z`如果 k 像我一样提醒用户省略数字中的字母，我必须将数字传递给 Webservice 。我怎样才能找到`NSString value having a-z and A-Z letters`它？任何人请帮助我。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T11:35:01.347

如果您只想检查字符串中是否有任何字符，请使用以下内容：

```
if ([yourString length] > 0) {
    // nice feature here is, this will also work when yourString is nil! :D
} 
```

**---**

如果要进行更复杂的检查，则必须使用[正则表达式](http://en.wikipedia.org/wiki/Regular_expression)。像这样使用[NSRegularExpression](https://developer.apple.com/library/ios/#documentation/Foundation/Reference/NSRegularExpression_Class/Reference/Reference.html)类：

```
NSRegularExpression *regex = [NSRegularExpression regularExpressionWithPattern:@"^[A-Za-z]+$" options:0] error:NULL];
NSUInteger numberOfMatches = [regex numberOfMatchesInString:yourString
                                                    options:0
                                                      range:NSMakeRange(0, [string length])];
if (numberOfMatches > 0) {
    // yourString does only consist of multiple letters
} 
```

`^[a-zA-Z]+$`仅匹配仅由一个或多个字母组成的字符串（`^`并`$`分别标记字符串的开头和结尾）。`^[0-9]+$`仅匹配数字。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-10T11:35:05.203

应该是这样的:)

```
NSCharacterSet *alphaSet = [NSCharacterSet letterCharacterSet];
BOOL valid = [[yourString stringByTrimmingCharactersInSet:alphaSet] isEqualToString:@""]; 
```

它会从您的字符串中删除所有字母，如果还有任何内容，`valid`则为`NO`.

希望有帮助！:)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-10T11:36:46.717

做这个：

```
NSCharacterSet *alphabetSet = [[NSCharacterSet characterSetWithCharactersInString:@"abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLKMNOPQRSTUVWXYZ"] invertedSet];

if ([yourString rangeOfCharacterFromSet:alphabetSet].location == NSNotFound) {
  if(yourString.length >= 1)
  {
    // has aleast one character
  }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-10T11:36:49.157

据我了解，您希望输入电话号码

首先，您可以将要添加数字的 UITextView 的键盘设置为 UIKeyboardTypePhonePad 或 UIKeyboardTypeNumberPad。

**或者**

将文本传递给此函数

```
-(BOOL) checkForPhoneNumber:(NSString *) string
{
    NSPredicate *confidenceTest = [NSPredicate predicateWithFormat:@"SELF MATCHES %@",NUMBER_REGEX]; 
    return [confidenceTest evaluateWithObject:string]?YES:NO;
} 
```

在哪里

```
#define NUMBER_REGEX @"^[0-9]10?$" 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-10T11:50:51.710

NSString * regexName = @"[a-zA-Z] * ";

```
NSString *testString = @"your string";

NSPredicate *predicate;
predicate = [NSPredicate predicateWithFormat:@"SELF MATCHES %@",regexName];

if ([predicate evaluateWithObject:testString]) {
    NSLog(@"true");        
} 
```

else{NSLog"字符串包含数字或特殊字符" ;}

# sql - 如何在 Oracle sqlplus 中编写 for 循环？

> ID：12350666
> 
> 赞同：8
> 
> 时间：2012-09-10T11:23:23.923
> 
> 标签：sql, oracle

我正在尝试在 Oracle sqlplus 接口中编写一个 for 循环。编写循环语句按回车时，出现错误：

```
SQL> for i in 1..10 loop
SP2-0734: unknown command beginning "for i in 1..." - rest of line ignored.
SQL> 
```

我的 for 循环子句有问题吗？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-09-10T11:29:46.123

For 循环是一个 PL/SQL 结构。尝试将您的 PL/SQL 包装在 BEGIN/END 块中。

如果需要声明变量，请从 DECLARE 开始。像这样的东西：

```
set serveroutput on
begin
  for a in 1..10 loop
    dbms_output.put_line('a='||to_char(a));
  end loop;
end;
/ 
```

希望有帮助。

PS 请注意，set serveroutput on 是 SQL*Plus 命令，而不是 PL/SQL 的一部分。它只是打开输出，因此您将看到 dbms_output.put_line() 函数的输出。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-09-10T11:27:10.943

sqlplus 不是一种语言，而是 Oracle 的一个接口，您可以在其中输入 SQL 或 PL/SQL。

在这种情况下，使用一个简单的 pl/sql 匿名块

```
begin
  for i in 1..10
  loop
    -- some great stuff goes here

  end loop;
end
/ 
```

# c# - 使用 windows 帐户访问目录的应用程序

> ID：12350667
> 
> 赞同：0
> 
> 时间：2012-09-10T11:23:25.833
> 
> 标签：c#, active-directory, user-accounts

file_server上有一个目录，可以从AD account -> TRacc访问，

我正在尝试编写一个将在 application_server 上运行并使用 TRacc 帐户访问此目录并将一些文件放入其中的应用程序。

那么如何将 windows 帐户与 ac# 应用程序相关联

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T11:35:14.170

有两种方法可以做到这一点。

1）。在 C# 中构建您的应用程序，当您启动它时，按住“Shift”并右键单击 *.exe 文件并选择“运行方式”。系统将提示您输入您的用户名、密码和域。使用 Tracc 帐户详细信息，您的应用程序将正常运行。

2）。在您的应用程序中创建一个流程。提供进程的用户名、安全密码和域。

我会选择选项 1。因为将密码详细信息硬编码到您的应用程序中意味着运行它的任何人都可以执行任务，这并不好。

希望这可以帮助。

# php - 调用未定义的方法 Doctrine\DBAL\Configuration::getFilterSchemaAssetsExpression()

> ID：12350669
> 
> 赞同：-1
> 
> 时间：2012-09-10T11:23:37.953
> 
> 标签：php, mysql, symfony, doctrine-orm, vendor

我在 symfony2 上更新了我的供应商，在我开始收到此错误后，我不知道为什么会出现

> uan@juan-VirtualBox:/var/www/msw-web$ php app/console dictionary:migrations:diff PHP 警告：Xdebug 必须在第 0 行的 Unknown 中作为 Zend 扩展加载
> 
> PHP 致命错误：调用 /var/www/msw-web/vendor/doctrine-migrations/lib/Doctrine/DBAL/Migrations/Tools/Console/Command/DiffCommand 中未定义的方法 Doctrine\DBAL\Configuration::getFilterSchemaAssetsExpression()。 php on line 85 PHP Stack trace: PHP 1\. {main}() /var/www/msw-web/app/console:0 PHP 2\. Symfony\Component\Console\Application->run() /var/www/ msw-web/app/console:22 PHP 3\. Symfony\Bundle\FrameworkBundle\Console\Application->doRun() /var/www/msw-web/vendor/symfony/src/Symfony/Component/Console/Application.php :118 PHP 4\. Symfony\Component\Console\Application->doRun() /var/www/msw-web/vendor/symfony/src/Symfony/Bundle/FrameworkBundle/Console/Application.php:75 PHP 5\. Symfony\组件\控制台\命令\命令->运行（）/var/www/msw-web/vendor/symfony/src/Symfony/Component/Console/Application.php:194 PHP 6。Symfony\Bundle\DoctrineMigrationsBundle\Command\MigrationsDiffDoctrineCommand->execute() /var/www/msw-web/vendor/symfony/src/Symfony/Component/Console/Command/Command.php:224 PHP 7\. Doctrine\DBAL\Migrations \Tools\Console\Command\DiffCommand->execute() /var/www/msw-web/vendor/bundles/Symfony/Bundle/DoctrineMigrationsBundle/Command/MigrationsDiffDoctrineCommand.php:46
> 
> 致命错误：调用 /var/www/msw-web/vendor/doctrine-migrations/lib/Doctrine/DBAL/Migrations/Tools/Console/Command/DiffCommand.php 中未定义的方法 Doctrine\DBAL\Configuration::getFilterSchemaAssetsExpression()在第 85 行
> 
> 调用堆栈：0.0003 328524 1\. {main}() /var/www/msw-web/app/console:0 0.0210 1930264 2\. Symfony\Component\Console\Application->run() /var/www/msw-web /app/console:22 0.0289 2110852 3\. Symfony\Bundle\FrameworkBundle\Console\Application->doRun() /var/www/msw-web/vendor/symfony/src/Symfony/Component/Console/Application.php:118 0.1349 7697284 4\. Symfony\Component\Console\Application->doRun() /var/www/msw-web/vendor/symfony/src/Symfony/Bundle/FrameworkBundle/Console/Application.php:75 0.1422 7697284 5\. Symfony\ Component\Console\Command\Command->run() /var/www/msw-web/vendor/symfony/src/Symfony/Component/Console/Application.php:194 0.1432 7697828 6\. Symfony\Bundle\DoctrineMigrationsBundle\Command\ MigrationsDiffDoctrineCommand->execute() /var/www/msw-web/vendor/symfony/src/Symfony/Component/Console/Command/Command.php:224 0.1767 11022484 7\. Doctrine\DBAL\Migrations\Tools\Console\Command\DiffCommand->执行（）/var/www/msw-web/vendor/bundles/Symfony/Bundle/DoctrineMigrationsBundle/Command/MigrationsDiffDoctrineCommand.php:46
> 
> juan@juan-VirtualBox:/var/www/msw-web$

我不确定问题是否来自 Doctrine。

* * *

我试图更新教义 dbal，我在 mi 文件 deps 上使用过

```
doctrine-common
    git=http://github.com/doctrine/common.git
    version=2.2.1

doctrine-dbal
    git=http://github.com/doctrine/dbal.git
    version=2.2.1

doctrine
    git=http://github.com/doctrine/doctrine2.git
    version=2.2.1 
```

但我得到了同样的错误，因为当我重新安装供应商时，它下载了 2.1.X 版本

我能做些什么？

问候。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T14:11:24.883

在 deps 文件中设置提交版本值

```
[doctrine-migrations]
    git=http://github.com/doctrine/migrations.git
    version=b86b4cc0a39714f0aa53b908d495beacfa0e4011 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-10T12:14:57.660

你应该检查你有哪个版本的 Doctrine/DBAL。可能你有 DoctrineMigrations 和 DoctrineDBAL 的不兼容版本。

在 2.2 IIRC 中添加了方法“getFilterSchemaAssetsExpression”。看到那个[提交](https://github.com/doctrine/dbal/commit/d9f8cd1f7eb43a965eeb9ae7df33e55699831771)

# c# - 如何提取从 HttpWebResponse 收到的压缩文件？

> ID：12350670
> 
> 赞同：3
> 
> 时间：2012-09-10T11:23:38.230
> 
> 标签：c#, httpwebrequest, zip, gzip

我把`url`浏览器的地址栏和它下载 zip 文件到高清。压缩文件的大小在其属性中是 386 字节。

当我使用`UnZipFiles`方法来提取文件时 - 它可以工作。但是，我想以编程方式下载并将其提取到内存中。我使用`GetResultFromServer`方法来获取压缩内容。如标题所示，内容的大小与保存在 HD 上的压缩文件的大小相同：

```
content-disposition: attachment; filename=emaillog-xml.zip
Content-Length: 386
Cache-Control: private
Content-Type: application/zip
Date: Mon, 10 Sep 2012 08:28:28 GMT
Server: Microsoft-IIS/7.5
X-AspNet-Version: 4.0.30319
X-Powered-By: ASP.NET 
```

我的问题是如何提取返回的内容`GetResultFromServer`？我尝试了以下方法：

```
var ms = new MemoryStream(Encoding.Unicode.GetBytes(res))
var s = new ZipInputStream(ms); 
```

但我明白了`Unable to read from this stream`。

**更新**

我试过`var zipStream = new System.IO.Compression.GZipStream(response.GetResponseStream(), CompressionMode.Decompress)`但我得到`The magic number in GZip header is not correct`错误

**代码**

```
private string GetResultFromServer(ElasticLogParams elasticLogParams)
{        
    var webRequest = (HttpWebRequest)WebRequest.Create(url);            
    var response = webRequest.GetResponse();

    using (var reader = new StreamReader(response.GetResponseStream()))
    {
        var res = reader.ReadToEnd();
        var headers = response.Headers.ToString();              

        return res;
    }
}

public static void UnZipFiles(string zippedFilePath, Stream stream = null)
{
    var s = new ZipInputStream(stream ?? File.OpenRead(zippedFilePath));

    ZipEntry theEntry;
    while ((theEntry = s.GetNextEntry()) != null)
    {
        using (var streamWriter = File.Create(@"D:\extractedXML.xml"))
        {
            var size = 2048;
            var data = new byte[size];
            while (true)
            {
                size = s.Read(data, 0, size);
                if (size > 0)
                {
                    streamWriter.Write(data, 0, size);
                }
                else
                {
                    break;
                }
            }
            streamWriter.Close();
        }
    }
    s.Close();
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-10T11:45:30.947

试一试：

```
var response = webRequest.GetResponse() as HttpWebResponse;
var stream = response.GetResponseStream();
var s = new ZipInputStream(stream); 
```

我相信你非常接近并且你使用了正确的方法——你可以使用[这篇文章](http://social.msdn.microsoft.com/Forums/en/csharpgeneral/thread/96b41fa7-415a-4674-a8d0-9fb136ed4f4c)来支持它——他们的代码非常相似。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T11:42:17.933

我正在使用[http://dotnetzip.codeplex.com/](http://dotnetzip.codeplex.com/) 我没有用它来下载东西，而是提取人们上传到我的服务器的东西。我认为它也应该反过来完美地工作。

我也试过微软的内置 zip，但也有问题。所以我放弃了，换了。

# java - 如何在 HTTPUnit 中获取具有特定属性的 webLinks

> ID：12350672
> 
> 赞同：1
> 
> 时间：2012-09-10T11:23:41.873
> 
> 标签：java, http-unit

我们有用于获取所有 WebLinks 的 API，称为 response.getLinks() 假设您已获取 WebResponse 作为响应。看到问题是我只想获取那些具有特定属性的锚标记，例如所有具有数据类属性且值为 true 的锚标记。

```
<a href="#" data-class="true"></a> //Qualify
<a href="#">?</a> // Does not qualify 
```

可以获取所有链接并遍历它们并识别感兴趣的锚点。但我不想做这个漫长的过程。

是否存在任何简短的方法来获取在 HTTPUnit 中具有特定属性的网络链接？

# java - Spring XSD 的访问错误

> ID：12350673
> 
> 赞同：7
> 
> 时间：2012-09-10T11:23:46.213
> 
> 标签：java, spring, exception, spring-mvc, xsd

我正在尝试运行一个前雇员在我的工作中留下的系统，但我遇到了问题。

如果 XSD 通过远程访问运行：

```
<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns:aop="http://www.springframework.org/schema/aop"
    xmlns:context="http://www.springframework.org/schema/context"
    xmlns:tx="http://www.springframework.org/schema/tx"
    xsi:schemaLocation="http://www.springframework.org/schema/beans 
                           http://www.springframework.org/schema/beans/spring-beans.xsd
                           http://www.springframework.org/schema/context  
                           http://www.springframework.org/schema/context/spring-context-3.0.xsd
                           http://www.springframework.org/schema/aop 
                           http://www.springframework.org/schema/aop/spring-aop-3.0.xsd
                           http://www.springframework.org/schema/tx
                           http://www.springframework.org/schema/tx/spring-tx.xsd"> 
```

它给出了一个未找到的异常：

```
Failed to read schema document 'http://www.springframework.org/schema/context/spring-context-3.0.xsd', because 1) could not find the document; 2) the document could not be read; 3) the root element of the document is not <xsd:schema>. 
```

如果 XSD 通过本地访问运行：

```
<beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xmlns:aop="http://www.springframework.org/schema/aop"
       xmlns:context="http://www.springframework.org/schema/context"
       xmlns:tx="http://www.springframework.org/schema/tx"
       xsi:schemaLocation="http://www.springframework.org/schema/beans
           classpath:org/springframework/beans/factory/xml/spring-beans-3.0.xsd
           http://www.springframework.org/schema/tx
           classpath:org/springframework/transaction/config/spring-tx-3.0.xsd
           http://www.springframework.org/schema/context  
           classpath:org/springframework/context/config/spring-context-3.0.xsd
           http://www.springframework.org/schema/tool
           classpath:org/springframework/beans/factory/xml/spring-tool-3.0.xsd"> 
```

它给出了这个例外：

```
C:\Users\claudiomazur>java -jar c:\temp\fin\c.jar  
0 [AWT-EventQueue-0] INFO support.ClassPathXmlApplicationContext  - Refreshing org.springframework.context.support.ClassPathXmlApplicationContext@4fa52fdf: startup date [Thu Sep 06  
11:22:59 BRT 2012]; root of context hierarchy  
45 [AWT-EventQueue-0] INFO xml.XmlBeanDefinitionReader  - Loading XML bean definitions from class path resource [context.xml]  
Exception in thread "AWT-EventQueue-0" org.springframework.beans.factory.parsing.BeanDefinitionParsingException: Configuration problem: Unable to locate Spring NamespaceHandler for  
XML schema namespace [http://www.springframework.org/schema/context]  
Offending resource: class path resource [context.xml]  

        at org.springframework.beans.factory.parsing.FailFastProblemReporter.error(FailFastProblemReporter.java:68) 
```

解决这个问题的一些想法？

大大的拥抱！！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-10T12:00:47.773

Spring XDS 是随 Spring jar 一起定义和交付的！例如`spring-context.jar`包含`spring-context-3.0.xsd`. （见`spring-context.jar`/META-INF/spring.schema）

所以检查你的项目中是否有这个 jar。

所以你所说的“远程”并不是真正的远程！而且我从来没有看到你所谓的“本地访问”，所以我会尝试检查为什么“远程”（不是远程）的东西适用于所有 xsd，但弹簧上下文。

* * *

如果它是一个桌面程序，并且您使用包含所有其他已分解 jar 的单个 jar，那么您需要注意单个`spring.handlers`和`spring.schames`来自不同 spring-xxx.jar 的文件的内容在（二）中组合“亨格”文件。这样最终这（两个）文件包含所有模式名称和处理程序名称。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-07-10T06:55:17.703

确实，SPRING XSD 是与罐子一起发货的。

这些 XSD 的存储信息：

1.  假设在 XML 文件中，我们使用了 beans 命名空间，我们需要查看

    ```
    xsi:schemaLocation="http://www.springframework.org/schema/beans
    http://www.springframework.org/schema/beans/spring-beans.xsd 
    ```

2.  请检查 META-INF 文件夹中的文件“spring-schemas”spring-beans-4.0.1.RELEASE.jar。此文件中的示例上下文应为：

    ```
    http\://www.springframework.org/schema/beans/spring-beans-4.0.xsd 
    =org/springframework/beans/factory/xml/spring-beans-4.0.xsd

    http\://www.springframework.org/schema/beans/spring-beans.xsd 
    =org/springframework/beans/factory/xml/spring-beans-4.0.xsd 
    ```

3.  因此

    ```
     http\://www.springframework.org/schema/beans/spring-beans.xsd  is mapped to      
         org/springframework/beans/factory/xml/spring-beans-4.0.xsd 
    ```

    在你的罐子里

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-10T12:01:34.583

尝试运行 wget [http://www.springframework.org/schema/context/spring-context-3.0.xsd](http://www.springframework.org/schema/context/spring-context-3.0.xsd)。

```
should be something like: wget http://www.springframework.org/schema/context/spring-context-3.0.xsd
--2012-09-10 15:56:05--  http://www.springframework.org/schema/context/spring-context-3.0.xsd
Resolving www.springframework.org... 205.140.197.88
Connecting to www.springframework.org|205.140.197.88|:80... connected.
HTTP request sent, awaiting response... 200 OK
Length: 19651 (19K) [text/xml]
Saving to: “spring-context-3.0.xsd”

100%[=====================================================================>] 19,651      24.6K/s   in 0.8s    

2012-09-10 15:56:06 (24.6 KB/s) - “spring-context-3.0.xsd” saved [19651/19651] 
```

如果您在获取 xsd 架构时遇到问题，则很难使用继承此架构的 xml 文件。

在第二种情况下，您在类路径中根本没有任何 spring-*-3.0.xsd 文件。

# ios - 多次使用配置文件

> ID：12350676
> 
> 赞同：1
> 
> 时间：2012-09-10T11:24:02.027
> 
> 标签：ios, xcode, provisioning-profile

我即将帮助一家公司在内部分发一个应用程序。他们已经设置了另一个应用程序正在使用的配置文件。我可以使用相同的配置文件还是必须创建另一个配置文件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T11:27:11.290

您可以为多个应用程序使用配置文件，但这意味着第一个应用程序将在第二个应用程序安装时自动删除。假设您在 iPad 上安装了 App1，然后您将安装 App2，并且 App2 的构建是使用相同的 prov 配置文件进行的。iPad 将用 App2 替换 App1。所以：取决于，想做什么:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-10T11:33:19.713

分发供应配置文件是为特定的应用程序 ID 创建的，即为一个应用程序。所以在我看来这是不可能的。

# solr - Solr QueryParserPlugin 中的分析器

> ID：12350681
> 
> 赞同：0
> 
> 时间：2012-09-10T11:24:34.243
> 
> 标签：solr

我写了一个看起来有点像 Lucene 的 QueryParser `QueryParser`。我写了一个简单`QParser`的和一个`QParserPlugin`我可以使用我的 QueryParser 的。

*剩下的一个问题是：*我在哪里可以获得`Analyzer`对 Solr 模式中配置的引用？或者我如何将它注入到我的查询解析器的[构造函数](http://lucene.apache.org/core/3_6_1/api/core/org/apache/lucene/queryParser/QueryParser.html#QueryParser%28org.apache.lucene.util.Version,%20java.lang.String,%20org.apache.lucene.analysis.Analyzer%29)中使用分析器？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T12:37:21.270

这是我在 Java 中的（简化）解决方案，用于使用`MyQueryParser`.

```
public class MyParserPlugin extends QParserPlugin {
    @Override
    public QParser createParser(String qstr, SolrParams localParams, SolrParams params, SolrQueryRequest req) {
        return new MyQParser(qstr, localParams, params, req);
    }
}

class MyQParser extends QParser {
    public MyQParser(String qstr, SolrParams localParams, SolrParams params, SolrQueryRequest req) {
        super(qstr, localParams, params, req);
    }

    @Override
    public Query parse() throws ParseException {
        // Getting info from the schema
        String field = this.getReq().getSchema().getDefaultSearchFieldName();
        Analyzer analyzer = this.getReq().getSchema().getQueryAnalyzer();

        // Here we go
        MyQueryParser parser = new MyQueryParser(Version.LUCENE_36, field, analyzer);
        return parser.parse(this.qstr);
    }
} 
```

# magento - Magento：如何在某些其他 JS 文件之后自动添加 JS 文件？

> ID：12350682
> 
> 赞同：3
> 
> 时间：2012-09-10T11:24:33.667
> 
> 标签：magento, magento-1.7

我需要在某些其他 JavaScript 文件之后包含一个 JavaScript 文件。通常，我会使用如下语法将其包含在 XML 文件中：

```
<action method="addJs"><script>myfile.js</script></action> 
```

或者

```
<action method="addItem"><type>js</type><name>myfile.js</name></action> 
```

以正确的顺序，因此文件以我想要的方式包含在内。

不过，关键是，我不知道我必须包含多少次我的文件。为了更具体，我试图在 jquery*.js 文件的每个实例之后包含一个带有 jQ​​uery.noConflict() 的文件。我正在开发的网站仍在开发中，可能还会添加一些新的扩展，包括他们自己的 jquery 库（我什至可能没有意识到这一点，因为我不是唯一参与该项目的人）。

在前端渲染布局时是否有包含 js 文件的事件，或者我可以重写一些方法以达到预期的效果？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-05T11:45:29.813

在每次包含脚本 Y 之后添加包含脚本 X 的唯一方法是修改执行添加的函数。

打开app/code/core/Mage/Page/Block/Html/Head.php，修改getCssJsHtml函数。像这样：

```
public function getCssJsHtml()
{
    // separate items by types
    $lines  = array();
    foreach ($this->_data['items'] as $item) {
        if (!is_null($item['cond']) && !$this->getData($item['cond']) || !isset($item['name'])) {
            continue;
        }
        $if     = !empty($item['if']) ? $item['if'] : '';
        $params = !empty($item['params']) ? $item['params'] : '';
        switch ($item['type']) {
            case 'js':        // js/*.js
            case 'skin_js':   // skin/*/*.js
            case 'js_css':    // js/*.css
            case 'skin_css':  // skin/*/*.css
                $lines[$if][$item['type']][$params][$item['name']] = $item['name'];
                if(stripos($item['name'], 'jquery') !== false)$lines[$if][$item['type']][$params]['2_'.$item['name']] = $yourfilename;
                break;
            default:
                $this->_separateOtherHtmlHeadElements($lines, $if, $item['type'], $params, $item['name'], $item);
                break;
        }
    }
... 
```

你看我已经添加了一个检查来查看正在添加的文件是否是 jquery( `stripos($item['name'], 'jquery') !== false`)，如果是，则在它之后添加一个带有 path 的新项目`$yourfilename`。

Magento 应该已经有能力对皮肤文件进行排序，但是 a) 依赖于每个人提供排序属性，并且 b) 从一开始就没有真正正常工作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-02-23T11:00:38.120

嗨，

默认情况下，Magento 不允许您这样做，为了能够以特定顺序（标题中的 css 或 javascript）添加文件，您必须自定义核心。

创建一个自定义模块，在其中重写 page/html_head 块：

```
<?xml version="1.0"?>
<config>
    <modules>
        <Koncz_Utility>
            <version>1.0.0</version>
        </Koncz_Utility>
    </modules>
    <global>
        <blocks>
            <class>Koncz_Utility_Block</class>
            <page>
                <rewrite>
                    <html_head>Koncz_Utility_Block_Page_Html_Head</html_head>
                </rewrite>
            </page>          
        </blocks>
    </global>
</config> 
```

并添加 2 个自定义函数：**addItemFirst**和**addItemAfter**

```
class Koncz_Utility_Block_Page_Html_Head extends Mage_Page_Block_Html_Head {
/*
 * Adds a head element into the first position, usage same as for addItem ;)
 */

public function addItemFirst($type, $name, $params = null, $if = null, $cond = null) {
    if ($type === 'skin_css' && empty($params)) {
        $params = 'media="all"';
    }

    $firstElement = array();
    $firstElement[$type . '/' . $name] = array(
        'type' => $type,
        'name' => $name,
        'params' => $params,
        'if' => $if,
        'cond' => $cond,
    );

    $this->_data['items'] = array_merge($firstElement, $this->_data['items']);

    return $this;
}

/*
* Adds a custom css, or js file after the $type, if it was found! $type=js/jquery/jquery.js  <= or skin_js/path 
*/
public function addItemAfter($after, $type, $name, $params = null, $if = null, $cond = null) {
    if ($type === 'skin_css' && empty($params)) {
        $params = 'media="all"';
    }

    $firstElement = array();
    $firstElement[$type . '/' . $name] = array(
        'type' => $type,
        'name' => $name,
        'params' => $params,
        'if' => $if,
        'cond' => $cond,
    );

    if (array_key_exists($after, $this->_data['items'])) :
        // get the position 
        $pos = 1;
        foreach ($this->_data['items'] as $key => $options) :
            if ($key == $after) :
                break;
            endif;
            $pos +=1;
        endforeach;

        array_splice($this->_data['items'], $pos, 0, $firstElement);

    endif;

    return $this;
} 
```

}

在您的 local.xml 之后，您可以使用以下内容：（这将在第一个位置添加 jquery.js，在第二个位置添加 jquery 之后的 jquery.no-conflict.js）。{{ 另外值得一提的是，您的 skin_js 文件将在 js 类型之后添加！所以使用 js 而不是 skin_js 作为基础 js 文件。

```
<?xml version="1.0"?>
<layout version="0.1.0">
    <default>        
        <update handle="add_jquery_elegant_way" />
    </default>
    <add_jquery_elegant_way>
        <reference name="head">
            <action method="addItemFirst"><type>js</type><script>jquery/jquery.js</script></action>
            <action method="addItemAfter">
                <after>js/jquery/jquery.js</after>
                <type>js</type>
                <script>jquery/jquery.no-conflict.js</script>
            </action>
        </reference>
    </add_jquery_elegant_way>
</layout> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-21T08:26:37.493

最简单的方法是编辑 jquery*.js，并将其添加到文件末尾：

```
$jq=jQuery.noConflict(); 
```

那么您只需使用 $jq 来访问 jQuery 对象，并且当包含 jquery.js 时，它会自动设置为 noConflict 模式。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-09-10T15:00:27.633

您可以将说明手动放在 header.phtml 上。应用程序/设计/前端/您的站点/路径/模板/页面/html/header.phtml。在你包含 js 之后，你放在那里的内容会转到 html。

# asp.net - 我的 ASP.Net MVC 3 应用程序是否一个接一个地处理所有传入请求

> ID：12350690
> 
> 赞同：1
> 
> 时间：2012-09-10T11:25:01.700
> 
> 标签：asp.net, asp.net-mvc, asp.net-mvc-3

我的一位同事说，MVC 3 应用程序一次处理所有传入请求。

因此，当我从网页对我的应用程序进行两次 AJAX 调用时，asp.net MVC / IIS 首先处理第一个请求，然后返回结果，然后处理第二个请求。

他有来自 MSDN 证据的这一行文档[(http://msdn.microsoft.com/en-us/library/ee728598(v=vs.98).aspx](http://msdn.microsoft.com/en-us/library/ee728598%28v=vs.98%29.aspx) )

> 您可以对长时间运行的非 CPU 绑定请求使用异步操作方法。这样可以避免在处理请求时阻止 Web 服务器执行工作

它说“异步操作方法”不会阻塞，所以“正常”控制器操作会阻塞。

他还说，他看到在他的页面上（在浏览器调试工具中，查看发送的请求），第一个 ajax 请求已被处理，然后，即使它与第一个 ajax 请求同时被触发浏览器，第二个。

我很难相信 IIS 每个应用程序一次只能处理一个请求？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T11:31:37.717

如果您在*同一个*会话中，那么 AJAX 查询将被序列化（一次一个）。

您可以将控制器更改为无会话。请参阅[在 ASP.NET MVC3 中拥有无会话控制器的一些场景是什么？](https://stackoverflow.com/q/4139428/1583).

# java - 在 writeToParcel 方法中写入 Parcel 中的对象

> ID：12350692
> 
> 赞同：1
> 
> 时间：2012-09-10T11:25:06.607
> 
> 标签：java, android

嗨，伙计，我有一个类必须实现 Parcelable 以允许将这种新类型放入包中 我的类有 2 个属性私有 int pid；私有对象数据；我必须实现 writeToParcel 方法：但我不知道要写入属性数据

```
 @Override
public void writeToParcel(Parcel dest, int flags) {
dest.writeInt(pid);
dest.?

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T11:28:30.633

查看[Parcelable 的文档](https://developer.android.com/reference/android/os/Parcelable.html)。它显示了添加和检索原始值的示例。

如果要将对象添加到 Parcelable，则要添加的对象必须实现 Parcelable 或 Serializable。

# python - matplotlib中的反转颜色标记

> ID：12350693
> 
> 赞同：1
> 
> 时间：2012-09-10T11:25:12.327
> 
> 标签：python, matplotlib

我`matplotlib`用来绘制具有许多不同颜色的条形图。我还在散点图上绘制了许多标记。

由于我已经为条形使用了许多不同的颜色，因此我不想为标记使用单独的对比色，因为这会给我可以从中选择条形的颜色空间增加很大的限制。

因此，问题是是否有可能有分散绘制标记，不是用给定的颜色，而是用与任何给定标记后面的颜色相反的颜色，无论它放置在哪里。

此外，请注意，标记可能完全重叠条形、部分重叠条形或根本不重叠条形。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T06:14:23.173

我在这里发布了一个示意图方法，如何在没有任何真正的 Python 代码的情况下解决您的问题，但它可能会有所帮助。
在实际绘图时，您需要将所有内容存储在某种类型的两个列表中，以便您以后访问它们。

*   对于每个元素、条形和标记，您可以获得颜色。
*   对于每个标记，您可以找到它是否重叠或在条内，例如，您可以使用`nxutils.pntpoly()`matplotlib 本身的 [point in polygon test]。
*   现在你可以决定最好的颜色。如果您知道 RGB 格式的条形颜色，您可以使用您可以定义的一些简单规则来计算标记的完成颜色。
*   当您获得颜色时，请使用方法 set_color() 或对象具有的适当方法。

# c# - 调整包含包装 TextBlocks 的 DataGrid 的大小问题

> ID：12350695
> 
> 赞同：0
> 
> 时间：2012-09-10T11:25:13.037
> 
> 标签：c#, wpf, layout, datagrid

我对 .NET 4.0 DataGrid 有一个非常令人不安的问题。我有比例模板列，其中包含启用了 textWrapping 的 TextBlock。

问题是，DataGrid 的高度在加载时不正确（它的大小就像文本块都被最大包装一样。）并且在调整大小时不会更新它们的大小。这似乎是一个布局问题（当比例大小未解决时，似乎调用了 MeasureOverride 和 ArrangeOverride ，之后未调用......）但我无法解决它。

这是显示问题的简化代码：

**主窗口.xaml**

```
<Window x:Class="WpfApplication1.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    Title="MainWindow" Height="700" Width="525">
<StackPanel Width="500">
    <Button Content="Add DataGrid" Click="Button_Click" />
    <ItemsControl x:Name="itemsControl">
        <ItemsControl.ItemContainerStyle>
            <Style>
                <Setter Property="Control.Margin" Value="5" />
            </Style>
        </ItemsControl.ItemContainerStyle>
    </ItemsControl>
</StackPanel> 
```

**主窗口.xaml.cs**

```
using System.Windows;
using System.Windows.Controls;
using System.Windows.Data;
using System.Windows.Media;

namespace WpfApplication1
{
public partial class MainWindow : System.Windows.Window
{
    public MainWindow()
    {
        InitializeComponent();
    }

    private void Button_Click(object sender, RoutedEventArgs e)
    {
        itemsControl.Items.Add(CreateDataGrid()); 
    }

    private DataGrid CreateDataGrid()
    {
        var dataGrid = new DataGrid() { HeadersVisibility = DataGridHeadersVisibility.Column };
        dataGrid.MaxWidth = 500;
        dataGrid.Background = Brushes.LightSteelBlue;
        dataGrid.Columns.Add(GetDataGridTemplateColumn("Label", "Auto"));
        dataGrid.Columns.Add(GetDataGridTemplateColumn("Value", "*"));
        dataGrid.Items.Add(new Entry() { Label = "Text Example 1", Value = "Some wrapped text" });
        dataGrid.Items.Add(new Entry() { Label = "Text Example 2", Value = "Some wrapped text" });
        return dataGrid;
    }

    private DataGridTemplateColumn GetDataGridTemplateColumn(string bindingPath, string columnWidth)
    {
        DataGridTemplateColumn result = new DataGridTemplateColumn() { Width = (DataGridLength)(converter.ConvertFrom(columnWidth))};
        FrameworkElementFactory cellTemplateframeworkElementFactory = new FrameworkElementFactory(typeof(TextBox));
        cellTemplateframeworkElementFactory.SetValue(TextBox.NameProperty, "cellContentControl");
        cellTemplateframeworkElementFactory.SetValue(TextBox.TextProperty, new Binding(bindingPath));
        cellTemplateframeworkElementFactory.SetValue(TextBox.TextWrappingProperty, TextWrapping.Wrap);
        result.CellTemplate = new DataTemplate() { VisualTree = cellTemplateframeworkElementFactory };
        return result;
    }

    private static DataGridLengthConverter converter = new DataGridLengthConverter();
}

public class Entry
{
    public string Label { get; set; }
    public string Value { get; set; }
} 
```

}

![在此处输入图像描述](../Images/47aae2b8d1c5167dfe0f18f59d0a1276.png)

![在此处输入图像描述](../Images/7abd588457f199b15c0ddc058f1eb27c.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T09:49:51.013

我终于想出了一个相当肮脏的解决方案，但至少它有效：我通过计算自己的正确值来手动更新网格的高度，同时考虑到行高度、网格填充、网格边框和 ColumnHeaderRow 高度。我需要在 OnPropertyChanged（用于填充和网格边框）、DataGridColumn.SizeChanged、DataGridColumn.RowUnloaded、ColumnHeaderPresenter.SizeChanged 和其他一些上更新它。

唯一的问题是它可以与默认的 DataGrid ControlTemplate 一起正常工作，但如果模板要更改网格渲染，它将不再正确。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T07:55:34.157

终于找到了解决方案：在 DataGrid 上将 CanContentScroll 设置为 false 解决了这个问题。

```
<Setter Property="ScrollViewer.CanContentScroll" Value="False" /> 
```

# pdf-generation - 如何在 fpdf 中使用 SetAutoPageBreak

> ID：12350696
> 
> 赞同：2
> 
> 时间：2012-09-10T11:25:14.010
> 
> 标签：pdf-generation, fpdf

如果要启用它，如何在 fpdf 中使用 SetAutoPageBreak？在网上我发现了各种各样的变种：

```
$p->SetAutoPageBreak(1,20);
$p->SetAutoPageBreak(true,20);
$p->SetAutoPageBreak('true',20);
$p->SetAutoPageBreak(on,20);
$p->SetAutoPageBreak('on',20);
$p->SetAutoPageBreak('on','20'); 
```

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-10T11:33:59.027

[SetAutoPageBreak](http://www.fpdf.org/en/doc/setautopagebreak.htm)的第一个参数接受一个布尔值，因此您显示的所有示例都是有效的。

有关将哪些值评估为真/假的详细信息，请参阅[PHP 手册](http://php.net/manual/en/language.types.boolean.php)。就个人而言，我会使用 true 或可能 1。当您将来查看代码时，它会清晰易懂。

您是在输出时遇到问题还是只是一个好奇的问题？

编辑：

[MultiCell](http://www.fpdf.org/en/doc/multicell.htm)就是这样，它有多个单元格，以允许换行等。只有当其中一个单元格超出限制时才会发生分页符，即使那样它也会中断该单元格。因此，实际上多行的一段文本可能会分成两页，但页面上的最后一行不会超出边距限制。

您可能需要考虑使用[单元格，或者使用](http://www.fpdf.org/en/doc/cell.htm)[AddPage](http://www.fpdf.org/en/doc/addpage.htm)强制分页。

# node.js - Express.js 中间件中传递的参数被缓存？

> ID：12350697
> 
> 赞同：0
> 
> 时间：2012-09-10T11:25:15.943
> 
> 标签：node.js, express, closures, middleware

我一直在使用 express.js 构建我的第一个 node.js 应用程序。这很有趣 :) 我一定有某种误解，所以就这样吧。

我有一些这样定义的路线：

```
app.all('/account/summary', apiPOST('AccountSummary', {FromDate: 'default', ToDate: 'default'}), function(req, res){

  var data=req.apiJSON;
  console.log(data);
  res.render('accountsummary', {locals: data, layout: 'layouts/layout'});

}); 
```

apiPOST() 定义如下：

```
apiPOST = function (operation, postParams) {

  return function (req, res, next){

    console.log('RIGHT AT START');
    console.log(postParams);
    console.log('END');

    var currentDate = new Date();
    var day = ('0'+currentDate.getDate()).slice(-2);
    var month = ('0'+(currentDate.getMonth() + 1)).slice(-2);
    var year = ('0'+currentDate.getFullYear()).slice(-4);
    console.log('BEFORE DATES');
    console.log(postParams);
    if (typeof(postParams.FromDate)!='undefined' && (postParams.FromDate=='default' || postParams.FromDate=='')){
      postParams.FromDate=year+'-'+month+'-'+day;
    }

    if (typeof(postParams.ToDate)!='undefined' && (postParams.ToDate=='default' || postParams.ToDate=='')){
      postParams.ToDate=year+'-'+month+'-'+day;
    }

    //automatically add all posted data to postParams
    if (typeof(req.body)!='undefined'){
      for (var key in req.body){
        if (req.body.hasOwnProperty(key)){
          postParams[key]=req.body[key];
        }
      }
    }

    // here is do some talking to an XML web service and convert it to JSON;
    // we use our postParams variable to POST
    next();

  }
} 
```

首先，这很好用。当通过 GET 请求到达页面时，它将 FromDate 和 ToDate 都默认为今天。此页面有一个表单，您可以发布该表单以指定新的 FromData 和 ToDate。发布的数据会自动添加到 postParams 并且也可以正常工作。

我遇到的问题是，下次用户使用 GET 访问页面时，之前发布的数据仍然存在，因此它默认为该数据，而不是今天。

我无法弄清楚为什么这些数据仍然可用。从外观上看，它并没有被发布，而是在 postParams 中被记住。postParams 现在是全球性的吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T13:21:45.827

发生的情况是，在调用配置该路由的过程中，您`apiPOST`只调用了一次，`app.all`并且一次调用创建了一个`postParams`参数对象，所有未来调用`apiPOST`的返回函数都将共享该对象。

# javascript - 为什么 $.get() 似乎没有触发 .ajaxStart()？

> ID：12350699
> 
> 赞同：1
> 
> 时间：2012-09-10T11:25:26.187
> 
> 标签：javascript, jquery, css

我有以下代码：

```
$("body")
    .ajaxStart(function () {
        $(this).css({ 'cursor': 'progress !important' })
    })
    .ajaxStop(function () {
        $(this).css({ 'cursor': 'default !important' })
    }); 
```

当我发出此代码时，代码有效，但似乎不会触发光标更改：

```
 $.get(href)
            .success(function (content) {
               // code here
            })
            .fail(function (ajaxContext) {
               // code here
            }); 
```

我是否需要专门使用 $.ajax 来触发 .ajaxStart ？

更新：我刚改成！important。

# javascript - 在 MVVM 视图模型中处理应用程序范围的元素

> ID：12350705
> 
> 赞同：2
> 
> 时间：2012-09-10T11:25:47.717
> 
> 标签：javascript, mvvm, knockout.js

在使用 MVVM 进行 Web 开发时，我一直在尝试寻找一些关于如何处理应用程序范围元素的良好资源。我正在使用淘汰赛。

应用程序范围内的元素是指站点导航等元素。也许每个页面都有一个登录框、搜索框、页脚等。

这些应该进入单独的视图模型吗？还是应该从包含这些的基本视图模型中派生每个页面的视图模型？还是应该将这些属性一起排除在视图模型之外？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T12:52:29.377

考虑像对待业务组件一样对待所有支持组件（菜单、页脚等）。此外，我建议每个 UI 组件都有单独的视图模型，无论 UI 组件的类型如何。这使您的组件高度松散耦合。

例如，菜单可能有自己的视图模型（不属于任何全局视图模型）。现在您可以使用 PubSub 库来实现发布者/订阅通知，以便在不同的 UI 组件（视图模型）之间进行松散耦合的通信，您的业务组件可以根据事件请求显示/隐藏自己。

但特别是为了实现一个菜单组件，我建议使用一个可以响应 URL 变化的路由器库（URL 的标签部分）。然后，当用户在主菜单（简单的锚标记）上导航时，您可以简单地更改 URL，您的组件将被路由器库激活/停用。这将使您可以添加书签并使用浏览器历史记录按钮。

查看[http://boilerplatejs.org](http://boilerplatejs.org)，它是大规模 JavaScript 开发的参考架构。它已经在它的示例应用程序上实现了上述所有功能。它使用 UrlController 根据 URL 更改激活/停用组件，而 DomController 用于将组件静态放置在 DOM 本身上（例如，用于菜单、页脚、标题）。它对大多数示例 UI 组件使用了 knockoutjs。

免责声明：我是 BoilerplateJS 的创始人

# jenkins - Windows 中的 Jenkins 以俄语显示 UI

> ID：12350707
> 
> 赞同：72
> 
> 时间：2012-09-10T11:26:00.147
> 
> 标签：jenkins

我来自乌克兰。
当我在浏览器中打开 Jenkins 时，我看到所有的用户界面都是俄语的。
我在 Windows 上运行 Jenkins。

但是 - Windows 配置“区域和设置”中没有俄语。格式 - 英语（美国）。地点 - 美国。只有时区是乌克兰语 - UTC +02:00。

是否可以强制 Jenkins 以英语显示 UI？

PS。我以前对哈德逊没有这样的问题。

[语言环境插件](https://wiki.jenkins-ci.org/display/JENKINS/Locale+Plugin)帮助将默认语言环境更改为英语。

我更改了 Chrome 配置中的语言，现在 Jenkins 是英文的 :)

* * *

## 回答 #1

> 赞同：122
> 
> 时间：2016-04-28T12:59:30.900

默认情况下，Jenkins 使用浏览器的默认语言（如果已设置）。要更改它，您可以执行以下操作。

**1\. 下载并安装语言环境插件：**

1.  从 Jenkins 的主页，转到 Manage Jenkins -> Manage Plugins
2.  点击可用
3.  检查“区域设置插件”并单击“立即下载并在重新启动后安装”。

*如果没有安排作业，Jenkins 将下载插件并重新启动。*

**2.设置语言：**

*安装插件后，使用以下步骤更改语言：*

1.  在 Jenkins 的主页上，转到管理 Jenkins -> 配置系统。

2.  在区域设置下，将有一个名为“默认语言”的字段。输入新语言。它可以是“en”或“ENGLISH”。

3.  在文本框下，选中名为“忽略浏览器首选项并强制所有用户使用此语言”的复选框。

[![在此处输入图像描述](../Images/3ffcda2a759a0fcaf39dd7b38b76e92f.png)](https://i.stack.imgur.com/jjuJ4.png)

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2012-09-10T12:50:44.020

[语言环境插件](https://wiki.jenkins-ci.org/display/JENKINS/Locale+Plugin)帮助将默认语言环境更改为 en。

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2019-11-19T15:20:50.137

一个更好、更简单的解决方案是从 Chrome 中删除俄语。

换句话说，更改浏览器语言设置。

例如对于 Chrome，转到 Chrome 设置 -> 语言 -> 删除所选语言。

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2019-11-27T11:15:02.417

[![在此处输入图像描述](../Images/7e67a4557c8cae0b1803aa7e00f03faa.png)](https://i.stack.imgur.com/je48d.png)

您必须安装已经可用但默认未安装的 Locale 插件，然后在 Manage System > Locale 下以 java 样式插入“Locale.ENGLISH”。

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2016-12-19T18:11:04.773

也许你可以试试这个
`$ sudo languagesetup`

并选择`1) Use English for the main language`改回来。

参考，
[https://support.apple.com/en-us/HT202036](https://support.apple.com/en-us/HT202036)

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2020-01-04T21:00:55.680

默认情况下，Jenkins 采用您的浏览器语言。要更改它，您需要安装[Locale](https://wiki.jenkins.io/display/JENKINS/Locale+Plugin)插件并设置适当的语言以忽略浏览器首选项。转到管理 Jenkins -> 配置系统，找到默认语言并设置您需要的内容。您可以查看视频[https://youtu.be/UiikMY1uW1w](https://youtu.be/UiikMY1uW1w)

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2019-02-19T16:15:42.153

似乎 chrome 在这方面存在问题， 尽管英语被设置为列表中的首选语言（Chrome 设置 > 语言） ，
但它一直将希伯来语作为
`Accept-Language`标题中的第一个选项发送

**解决方案**
只有在我添加了一些其他语言（例如俄语）并将其设置为“顶部”然后将英语设置为“顶部”之后，它才解决了！

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-06-23T06:01:53.413

您需要做的就是更改浏览器的语言设置并将英语放在首位。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2018-03-16T10:52:56.417

我的操作系统是 Windows 10。我想为 Jenkins UI 使用英语。对于区域和语言，我添加了土耳其语和英语，我的默认设置是英语，但是，Jenkins UI 是土耳其语。如果我删除土耳其语 Jenkins UI 看起来不错，它会打开英语。

[![地区和语言](../Images/4ef1b85c0fb484d2ab2caa97a9282323.png)](https://i.stack.imgur.com/XhYr9.jpg)

# javascript - Javascript 嵌套 if

> ID：12350708
> 
> 赞同：-1
> 
> 时间：2012-09-10T11:26:04.100
> 
> 标签：javascript

大家好，当一个选项按钮选择另一个选项按钮出现时，我正在尝试做。It works but when the other option button is selected I wanna display text but it does not work here is my code:

```
<html>
  <head>
    <script type="text/javascript" src="http://code.jquery.com/jquery-1.4.4.js"></script>
    <script type="text/javascript">
      $(document).ready(function() {

        $(".select-box").change(function() {
          if ($(".select-box option[value='3']").attr('selected')) {
           document.getElementById("demo").innerHTML="<select class='select-box'><option value='4'>a</option><option value='5'>b</option></select>";
          if ($(".select-box option[value='5']").attr('selected')) {
          document.write("Hello")
          }
          }

        }); 

      });
    </script>
  </head>
  <body>
    <select class="select-box">
      <option>Select an option</option>
      <option value="1">no alert</option>
      <option value="2">no alert too</option>
      <option value="3">alert</option>
    </select> 
    <p></br>
    <div id="demo"></div>
  </body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T11:37:13.610

*   使用当前版本的 jQuery。
*   是的，你不应该嵌套你的`if`- 语句
*   该`option`元素永远不会有“ `selected`”属性。当您选择某些内容时，不会更改属性，只会更改 DOM 对象的属性。改为使用`.prop()`。
*   根本不检查`option`元素的选择性（除非您有多选），只需使用元素的`value`属性（使用 jQuery）。`select``.val()`
*   不要使用`document.write`. 一旦加载文档（完全解析），这将用新的文档覆盖当前文档。并且您的代码在 DOMready 上执行，甚至在用户事件上也是如此*。*
*   一旦第一个条件匹配，您就想更改公式。这没关系，但你不能指望新表单已经选择了一些值 - 你再次需要挂钩一个`change`事件

# iphone - 如何从 iPhone 应用程序中获取下载的 zip 文件

> ID：12350709
> 
> 赞同：2
> 
> 时间：2012-09-10T11:26:07.990
> 
> 标签：iphone, file-sharing, nsdocumentdirectory

我正在开发一个应用程序。在该应用程序中，我正在下载 zip 文件并解压缩该文件。当我将 iphone 连接到 PC 时，用户是否有机会从 PC 获取下载的文件或解压缩文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T11:33:33.713

是的，使用[IExplorer](http://www.macroplant.com/iexplorer/)软件，您可以（几乎）从 iOS 设备中检索任何文件。

# android - 如何根据其内容更改列表项呈现？

> ID：12350711
> 
> 赞同：0
> 
> 时间：2012-09-10T11:26:11.513
> 
> 标签：android, android-layout, colors, android-listview, android-xml

我正在使用 a`ListFragment`来`CursorAdapter`显示项目列表。XML 布局非常简单：它只包含标题、描述和评论数量。

![简单的列表项布局](../Images/30edb1dd4c761dc4f7da389a83b3ab2f.png)

相反，我想**在右侧显示评论的数量**。如果可能的话，我想添加一个图像或一个彩色框作为**背景框架**。此外，我想**根据评论的数量更改图像/颜色**。

![列表项布局](../Images/f828b165bd0b887abba635bf6be141ca.png)

这是我目前使用的布局文件。

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent" android:layout_height="fill_parent"
    android:orientation="vertical" android:padding="@dimen/padding_small" >

    <TextView
        android:id="@+id/title"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content" >
    </TextView>

    <TextView
        android:id="@+id/description"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content" >
    </TextView>

    <TextView
        android:id="@+id/comments_count"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content" >
    </TextView>

</LinearLayout> 
```

这里是我使用的 CursorAdapter ...

```
public class CustomCursorAdapter extends CursorAdapter {

    private LayoutInflater mInflater;

    public CustomCursorAdapter(Context context, Cursor cursor, int flags) {
        super(context, cursor, flags);
        mInflater = LayoutInflater.from(context);
    }

    public void bindView(View view, Context context, Cursor cursor) {
        ViewHolder holder = (ViewHolder)view.getTag();
        if (holder == null) {
            holder = new ViewHolder();
            holder.title = (TextView)view.findViewById(R.id.title);
            holder.comments_count = (TextView)view.findViewById(R.id.comments_count);
            view.setTag(holder);
        }
        String title = cursor.getString(cursor.getColumnIndex(TITLE));
        holder.title.setText(title);
        int comments_count = cursor.getInt(cursor.getColumnIndex(COMMENTS_COUNT));
        holder.comments_count.setText(comments_count + "");
    }

    @Override
    public View newView(Context context, Cursor cursor, ViewGroup parent) {
        return mInflater.inflate(R.layout.list_item, parent, false);
    }

    private static class ViewHolder {
        TextView title;
        TextView comments_count;
    }

} 
```

这是我根据 Thiago Moreira Rocha 的示例实现准备的**颜色函数...**

```
if (comments_count == 0) {
    holder.comments_count.getParent().setBackgroundColor(Color.WHITE);
}
else if (comments_count != 0) {
    float saturation = (comments_count * 15) / 100.f;
    // The value gets pinned if out of range.
    int color = Color.HSVToColor(new float[] {110f , saturation, 1f});
    holder.comments_count.getParent().setBackgroundColor(color);
} 
```

您将如何实现布局和上下文相关行为？

* * *

**笔记：**

我创建了第二个问题来讨论[使评论框可点击](https://stackoverflow.com/questions/12431592/android-how-to-attach-multiple-touch-actions-to-a-single-list-item)的选项。如果您想向该主题添加信息，请参阅新帖子。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T13:01:59.157

在适配器的`getView`方法中（在您的情况下，`bindView`）获取将被绑定的视图的父级并使用`View.setBackGroundColor`!

```
public void bindView(View view, Context context, Cursor cursor) {
   //usual stuff
   //...
   Color newColor = colorFunction(comments_count);//calculate your new color
   View v = (View)view.getParent();
   v.setBackgroundColor(newColor);
} 
```

在此示例中，我使用**NAME**`ArrayAdapter`创建了一个列表，后跟一个随机**NUMBER**。我将这个数字包裹在 a中，并根据它的值更改他的父布局。****`LinearLayout`****

 ****检查下面的示例。

```
public class MainActivity extends ListActivity {

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setListAdapter(new ColorAdapter(this, R.layout.row, mockData));
}

String[] mockData = { "Item 1", "Item 2", "Item 3", "Item 4", "Item 5", "Item 6",
        "Item 7", "Item 8", "Item 9", "Item 10", "Item 11", "Item 12" };

public class ColorAdapter extends ArrayAdapter<String> {

    public ColorAdapter(Context context, int textViewResourceId,
            String[] objects) {
        super(context, textViewResourceId, objects);

    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {

        View row = convertView;

        if (row == null) {
            LayoutInflater inflater = getLayoutInflater();
            row = inflater.inflate(R.layout.row, parent, false);
        }

        TextView label = (TextView) row.findViewById(R.id.title);
        label.setText(mockData[position]);

        TextView desc = (TextView) row.findViewById(R.id.description);
        desc.setText("Description: "+ mockData[position]);

        TextView value = (TextView) row.findViewById(R.id.comments_count);

        //Here is the object you need to change the colors.
        LinearLayout background = (LinearLayout) value.getParent();

        Random random_number = new Random();
        int comments_count = random_number.nextInt(256);

        value.setText(comments_count+"");

        //Calculates a random color
        int newBackgroundColor = colorFunction(comments_count); 

        //Set the new background color on the comments_count parent
        background.setBackgroundColor(newBackgroundColor);

        return row;
    }

    private int colorFunction(int commentsNumber) {
        if (commentsNumber == 0) {
            return Color.WHITE;
        }
        else if(commentsNumber < 0) {
            return new Random().nextInt(256);
        }
        else {
            int color;
            Random rnd = new Random(); 
            color = Color.argb(commentsNumber, rnd.nextInt(commentsNumber), rnd.nextInt(256), rnd.nextInt(commentsNumber));

            return color;
        }
    }
} 
```

}

**行.xml**：

```
<?xml version="1.0" encoding="utf-8"?>
    <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:gravity="center"
    android:orientation="horizontal"
    android:padding="10dip" >

    <RelativeLayout
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:layout_weight="0.7" >

        <TextView
            android:id="@+id/title"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentLeft="true"
            android:layout_centerVertical="true"
            android:text="Large Text"
            android:textAppearance="?android:attr/textAppearanceLarge" />

        <TextView
            android:id="@+id/description"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentLeft="true"
            android:layout_below="@+id/title"
            android:ellipsize="end"
            android:lines="1"
            android:text="Small Text"
            android:textAppearance="?android:attr/textAppearanceSmall" />
    </RelativeLayout>

    <LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_centerHorizontal="true"
        android:layout_centerVertical="true"
        android:layout_weight="1"
        android:background="@drawable/border"
        android:orientation="vertical" >

        <LinearLayout
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:orientation="vertical" >

            <TextView
                android:id="@+id/comments_count"
                android:layout_width="fill_parent"
                android:layout_height="fill_parent"
                android:gravity="center"
                android:padding="10dip"
                android:text="Large Text"
                android:textAppearance="?android:attr/textAppearanceLarge" />
        </LinearLayout>
    </LinearLayout>

</LinearLayout> 
```

**边框.xml**

```
<?xml version="1.0" encoding="utf-8"?>
    <shape xmlns:android="http://schemas.android.com/apk/res/android">
    <stroke android:width="4dp" android:color="#000000" />
    <solid android:color="#ffffff" />
    <padding android:left="15dp" android:top="15dp"
            android:right="15dp" android:bottom="15dp" />
    <corners android:radius="4dp" /> 
</shape> 
```

结果列表（纵向和横向）如下。

![纵向列表](../Images/c6024ad1d73b9cf78e1eccffe64491b1.png)

![横向列表](../Images/344bb5a480e6551c578b5ad8926d8949.png)****

# c# - 将数字写入csv文件时如何格式化xy等数字

> ID：12350712
> 
> 赞同：0
> 
> 时间：2012-09-10T11:26:12.247
> 
> 标签：c#, csv

我有一个这样的数据结构：

```
Data
   Request Detailed Number (RequestNumber - Request Line Item Number)
   Request Explanation
   Price
   ... 
```

**例子**

```
Request Number  Explanation  Price
          10-5  Lorem Ipsum  15$ 
```

打开在 cvs 文件中写入数据的文件后，10-5 显示为日期时间。

如何使该列显示其纯粹的性质 10-5？

任何帮助将不胜感激...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T11:35:51.690

使用前面的单引号（ASCII 代码 39）导出/写入它。Excel 会将其视为字符串。但请注意：这是 Excel 的一项功能。任何其他打开 CSV 的程序都会“看到”单引号作为数据的一部分。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T11:32:40.393

在双引号前加上一个 '=' 将完成你想要的。它强制数据为文本。

例如。="2008-10-03",="更多文字"

# html - Firefox 中的 CSS 列数

> ID：12350713
> 
> 赞同：1
> 
> 时间：2012-09-10T11:26:19.083
> 
> 标签：html, firefox, css

我想对`column-count`块内的 div 使用 CSS。但是，由于某些浏览器（例如 IE 9）不支持`column-count`，我想为`float:left`块内的 div 设置。

但是，如果我这样做，`column-count`会在 Firefox 中以一种奇怪的方式表现。如果我不使用`float:left`它，它在 Firefox 中运行良好，而在有和没有 的 Chrome 中运行良好`float`。请看附图。

![在此处输入图像描述](../Images/503cbbe7e8e2611943269db9669eec89.png)

那么，我怎样才能将`column-count`and`float:left`一起使用。

这是`JSFiddle`链接：http: [//jsfiddle.net/V8KV6/1/](http://jsfiddle.net/V8KV6/1/)

这是代码：

**HTML：**

```
 <div class="block">
       <div class="column"></div>
       <div class="column"></div>
       <div class="column"></div>
       <div class="column"></div>
       <div class="column"></div>
   </div> 
```

**CSS：**

```
.block{
    width: 300px;
   -webkit-column-count:3;
    -moz-column-count:3;     
}

.column{
    background: orange;
    width: 100px;
    height: 100px;
    margin-bottom: 20px;
    float: left;      
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-10T11:39:32.097

您可以使用 IE 条件语句：

[http://www.quirksmode.org/css/condcom.html](http://www.quirksmode.org/css/condcom.html)

```
<!--[if IE]>
 According to the conditional comment this is IE
<![endif]--> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-10T11:41:01.567

如果需要 IE 支持，则必须使用 JavaScript，例如：

[http://welcome.totheinter.net/columnizer-jquery-plugin/](http://welcome.totheinter.net/columnizer-jquery-plugin/)

```
.block{
width: 300px;
height:220px;
-webkit-column-count:3;
-moz-column-count:3;
 column-count:3; 
```

}

```
.column{
background: orange;
width: 100px;
height: 100px;
margin-bottom:10px;
float: left; 
```

}

检查小提琴[http://jsfiddle.net/V8KV6/21/](http://jsfiddle.net/V8KV6/21/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-10T11:29:06.733

[http://jsfiddle.net/V8KV6/2/](http://jsfiddle.net/V8KV6/2/)

检查jsfiddle。

```
.column{
    background: orange;
    width: 100px;
    height: 100px;
    margin-bottom: 20px;
    display:inline-block;     
} 
```

删除`float`并添加`display:inline-block`

# iphone - 将多行字幕添加到 MKAnotationView Xcode

> ID：12350715
> 
> 赞同：2
> 
> 时间：2012-09-10T11:26:23.390
> 
> 标签：iphone, objective-c, ios, xcode, ipad

我在 Xcode 4.2 中显示多行 MKAnnotaion 时遇到问题

这是我的代码，它显示注释的单行字幕。

```
 -(MKAnnotationView *)mapView:(MKMapView *)mV viewForAnnotation:
    (id <MKAnnotation>)annotation {
    MKPinAnnotationView *pinView = nil; 
    if(annotation != mapView.userLocation) 
    {

        static NSString* MyAnnotationIdentifier = @"MyAnnotationIdentifier";
        MKPinAnnotationView* customPinView = [[[MKPinAnnotationView alloc]
                                               initWithAnnotation:annotation     reuseIdentifier:MyAnnotationIdentifier] autorelease];        
        //--- adding pin color and animation
        customPinView.pinColor = MKPinAnnotationColorRed;
        customPinView.animatesDrop = YES;
        customPinView.canShowCallout = YES;              
        return customPinView;
    }
    else
    {
        pinView.annotation = annotation;
    }
    return pinView;
} 
```

那么如何添加多行字幕呢？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T11:52:08.840

```
- (MKAnnotationView *)mapView:(MKMapView *)mapView viewForAnnotation:(id <MKAnnotation>)annotation
{   
    MKAnnotationView *annotationView = [[MKPinAnnotationView alloc] initWithAnnotation:annotation reuseIdentifier:@"loc"];

    // Button
    UIButton *button = [UIButton buttonWithType:UIButtonTypeCustom];
button.frame = CGRectMake(0, 0, 23, 23);
button.contentVerticalAlignment = UIControlContentVerticalAlignmentCenter;
button.contentHorizontalAlignment = UIControlContentHorizontalAlignmentCenter;

[button setImage:[UIImage imageNamed:yourImageName] forState:UIControlStateNormal];
[advertButton addTarget:self action:@selector(buttonPress:) forControlEvents:UIControlEventTouchUpInside];

annView.rightCalloutAccessoryView = button;

    // Image and two labels
    UIView *leftCAV = [[UIView alloc] initWithFrame:CGRectMake(0,0,23,23)];
    [leftCAV addSubview : yourImageView];
    [leftCAV addSubview : yourFirstLabel];
    [leftCAV addSubview : yourSecondLabel];
    annotationView.leftCalloutAccessoryView = leftCAV;

    annotationView.canShowCallout = YES;

    return pin;
} 
```

另请参阅此链接以获取详细信息

[如何为 MKAnnotation 的字幕显示 2 行文本并更改右侧按钮的图像？](https://stackoverflow.com/questions/5831382/how-to-display-2-lines-of-text-for-subtitle-of-mkannotation-and-change-the-image)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-08-26T06:10:57.560

请使用这个

```
 - (MKAnnotationView *) mapView:(MKMapView *)mapView viewForAnnotation:(id<MKAnnotation>)annotation {

        if ([annotation isKindOfClass:[MKUserLocation class]])
            return nil;
        if ([annotation isKindOfClass:[CustomAnnotation class]]) {
            CustomAnnotation *customAnnotation = (CustomAnnotation *) annotation;

            MKAnnotationView *annotationView = [mapView dequeueReusableAnnotationViewWithIdentifier:@"CustomAnnotation"];

            if (annotationView == nil)
                annotationView = customAnnotation.annotationView;
            else
                annotationView.annotation = annotation;

            //Adding multiline subtitle code 

            UILabel *subTitlelbl = [[UILabel alloc]init];
            subTitlelbl.text = @"sri ganganagar this is my home twon.sri ganganagar this is my home twon.sri ganganagar this is my home twon.  ";

            annotationView.detailCalloutAccessoryView = subTitlelbl;

            NSLayoutConstraint *width = [NSLayoutConstraint constraintWithItem:subTitlelbl attribute:NSLayoutAttributeWidth relatedBy:NSLayoutRelationLessThanOrEqual toItem:nil attribute:NSLayoutAttributeNotAnAttribute multiplier:1 constant:150];

             NSLayoutConstraint *height = [NSLayoutConstraint constraintWithItem:subTitlelbl attribute:NSLayoutAttributeHeight relatedBy:NSLayoutRelationGreaterThanOrEqual toItem:nil attribute:NSLayoutAttributeNotAnAttribute multiplier:1 constant:0];
            [subTitlelbl setNumberOfLines:0];
            [subTitlelbl addConstraint:width];
            [subTitlelbl addConstraint:height];

            return annotationView;
        } else
            return nil;
    } 
```

[![在此处输入图像描述](../Images/b3264af3a3778c965cbc631dcccafd0a.png)](https://i.stack.imgur.com/LovHa.png)

# header - JPEG 标头丢失/损坏

> ID：12350716
> 
> 赞同：2
> 
> 时间：2012-09-10T11:26:24.377
> 
> 标签：header, jpeg

我有一个 130kb 的 jpeg 图像，无法打开任何东西，我需要修复它。从我使用的各种图像恢复软件中，我得到的只是“图像头损坏/丢失”。当我查看文件的属性时，我什至没有得到任何东西，没有尺寸等，只有文件大小。一旦图像的标头丢失，是否可以恢复图像？我不想再使用任何恢复软件了。我从一位同事那里得到一个想法来解析 jpeg 并查找与工作 jpeg 相比的异常情况。还有其他想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T11:32:32.440

我能想到的唯一方法是使用十六进制编辑器查看 JPEG，并检查其内容是否符合[JPEG 规范](http://www.w3.org/Graphics/JPEG/itu-t81.pdf)。祝你好运。

# phing - phing 是否支持带有键和值的数组？

> ID：12350718
> 
> 赞同：2
> 
> 时间：2012-09-10T11:26:37.163
> 
> 标签：phing

在 phing 我可以设置这个：

```
<property name="build.myArray" value="something1, something2, something3" /> 
```

然后像这样检索每个值：

```
<foreach list="${build.myArray}" param="replace.me" target="build:create-vhost" />

<target name="build:create-vhost">
    <filterchain>
        <replacetokens begintoken="@" endtoken="@">
            <token key="REPLACE_ME" value="${replace.me}" />
        </replacetokens>
    </filterchain>
</target> 
```

我的问题是我可以这样做但使用带有键和值的数组吗？像这样的东西：

```
<property name="build.myArray" value="myKey = something1, myKey2 => something2, myKey3 => something3" /> 
```

并稍后使用该键名

有可能做到吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T08:02:58.753

不，您不能将属性用作 phing 中的数组。

# java - Joda Time：如何将一个时期划分为多个区间？

> ID：12350719
> 
> 赞同：3
> 
> 时间：2012-09-10T11:26:43.733
> 
> 标签：java, jodatime

我是 Joda Time 的新手，想从已知时间段创建相等 (x) 数量的间隔。我怎样才能做到这一点？

举个例子。我有 3 小时的时间，想创建 3 个间隔。每个间隔将是一个小时。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-10T11:43:59.873

```
 int x = //...
  DateTime dateFrom = new DateTime(/* ... */);
  DateTime dateTo = new DateTime(/* ... */);
  long singlePart = (dateTo.getMillis() - dateFrom.getMillis()) / x;
  List<Interval> result = new ArrayList<Interval>();

  for (int i = 0; i < x; i++)
  {
     result.add(new Interval(dateFrom.plusMillis((int) singlePart * i), dateFrom.plusMillis((int) singlePart * (i + 1))));      
  } 
```

# asp.net - 回发和视图状态（数据网格）之间的关系

> ID：12350721
> 
> 赞同：0
> 
> 时间：2012-09-10T11:26:46.493
> 
> 标签：asp.net, gridview, postback, viewstate

在这篇文章[http://www.devx.com/vb2themax/Tip/18714](http://www.devx.com/vb2themax/Tip/18714) “使用 EnableViewState 属性提高性能”中，我看不到他们在哪里将 EnableViewState 设置为 false。他们只是做

```
If Not Me.IsPostBack() Then
...
DataGrid1.DataBind() 
```

Postback 和 ViewState 一样吗？

为什么不在数据网格控件上做 EnableViewState = false 呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T11:41:46.147

文章明确指出，第一个示例（您要退出的部分）通常在启用“ViewState”的情况下完成。由于只有第一个 get-request 需要将网格绑定到数据源 ( `IF Not Me.IsPostBack()`)，因为连续的回发会从保存的 ViewState 中恢复网格数据。

Page_Load 方法的第二个示例假定 ViewState 已在 .aspx 文件中被禁用，并在每次加载页面时将网格绑定到数据源。

调用`Me.IsPostBack`只检查表单是否通过 http post 访问，而 ViewState 是一个对象，它保存与 ASP.NET 服务器控件的可视化表示有关的所有信息。所以，不，它们不一样！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T11:45:15.457

网格控件充当许多控件的容器。每个控件都在 ViewState 中存储了大量信息。

默认情况下，ViewState 存储在隐藏控件中。这意味着它会在每个页面请求上发送到客户端。为了避免这种开销，您可以将 EnableViewState 设置为 false。

```
<asp:GridView ID="GridView1" runat="server" EnableViewState="false"> 
```

ViewState 和 PostBack 是两个完全不相关的实体。ViewState 存储控件想要保留的任何信息。PostBack 仅指用户将信息发送回页面。

然而，ViewState 对于记住用户在上次 PostBack 中输入的值也非常有用。如果您的 ViewState 非常大，并且您不想将其发送给用户，请考虑将其保存在 Session 中。您可以通过将 PageStatePersister 设置为[SessionPageStatePersister来做到这一点](http://msdn.microsoft.com/en-us/library/aa479403.aspx)

> SessionPageStatePersister 利用与浏览器会话关联的服务器会话来存储数据。使用会话而不是隐藏字段避免了发送到浏览器和从浏览器发送的页面大小的增加。在许多情况下，页面状态是整个标记的重要组成部分。但是，将这些数据存储在会话中会消耗宝贵的服务器资源。

# wcf - 从 WCF 向客户端返回 CookieContainer(Windows Phone7.1)

> ID：12350730
> 
> 赞同：0
> 
> 时间：2012-09-10T11:27:26.557
> 
> 标签：wcf, windows-phone-7.1

我是 WCF 的新手。我不知道如何将 CookieContainer 对象从 wcf 服务返回到客户端，即 windows phone 7.1。

我有两个解决方案

测试（Windows 手机），WcfService1

如何返回 CookieContainer？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T11:59:08.330

看看这里： [http ://social.msdn.microsoft.com/Forums/en-US/wcf/thread/26935056-c4dc-4764-b1d3-38893ea53026/](http://social.msdn.microsoft.com/Forums/en-US/wcf/thread/26935056-c4dc-4764-b1d3-38893ea53026/)

或在这里：

[如何在 WCF / REST 服务中向响应中添加多个 cookie](https://stackoverflow.com/questions/2444022/how-to-add-multiple-cookies-to-response-in-wcf-rest-service)

您不返回 CookieContainer，只需设置 cookie 标头作为响应。WCF 客户端将解析这些 cookie 并将它们添加到它的 CookieContainer 中。

# java - 地图中的并发修改问题

> ID：12350735
> 
> 赞同：2
> 
> 时间：2012-09-10T11:27:40.290
> 
> 标签：java, concurrentmodification

我正在使用结构的**并发哈希图**

```
Map<Set<Date>, Map<String, Object>> SampleMap 
```

在给定的 map ( `Map<String, Object>`) 中使用的 Map 也是一个并发的 hashmap，但 set 是唯一的`TreeSet`类型。

当我在日志中添加以下行时，我仍然得到并发修改异常，

```
logger.debug("sampleMap.keySet() + ". Size is " + sampleMap.keySet().size()"); 
```

以及处理此地图的同一类的其他一些部分。

此映射在批处理过程中被多个线程广泛用于在映射中放置和删除值，使用的 java 版本是 1.5。

我认为异常是由于 Treeset 造成的，而且我发现对于 Set 类型没有类似的并发处理集合实现。

如果有人确认我对给定问题的思考是否正确，那将是很好的，也请建议解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-10T11:32:35.977

由于您需要能够“修改”密钥，因此您需要遵循此模式

```
// lock the collection
Map<String, Object> values = map.remove(key);
key = new TreeSet<String>(key);
// modify copy of key
map.put(key, values);
// unlock the collection. 
```

当您执行 ConcurrentMap 不支持的操作时，您必须使用自己的锁定。您可以使用带同步或 ReentrantReadWriteLock 的普通 HashMap 或 LinkedHashMap。

* * *

您可以使用创建并发集

```
// Added in Java 1.6
Set<String> set = Collections.newSetFromMap(new ConcurrentHashMap<String, Boolean>());
// or to be sorted
Set<String> set = Collections.newSetFromMap(new ConcurrentSkipListMap<String, Boolean>()); 
```

但是，您不能更改密钥的内容，因此您应该使用的是

```
Set<String> key = Collections.unmodifiableSet(treeSet);
// or to be sure its not modified
Set<String> key = Collections.unmodifiableSet(new TreeSet<String>(treeSet)); 
```

* * *

一个简单的例子，说明为什么在 Map 中使用后无法更改键。

```
Set<String> key1 = new TreeSet<String>();
Map<Set<String>, Boolean> map = new ConcurrentHashMap<Set<String>, Boolean>();
map.put(key1, true);
System.out.println("Is the map ok? "+map.containsKey(key1));
key1.add("hello");
System.out.println("Is the map ok? "+map.containsKey(key1)); 
```

印刷

```
Is the map ok? true
Is the map ok? false 
```

常见的行为是它不再能看到地图中的键。这是因为地图根据其 hashCode 将密钥放入存储桶中。如果 hashCode 发生变化，它可能在错误的存储桶中，所以当它查找它时，它找不到它。

# matlab - Matlab变量编辑器中的不同数据

> ID：12350737
> 
> 赞同：0
> 
> 时间：2012-09-10T11:27:57.543
> 
> 标签：matlab

我正在阅读 Matlab 中的一些数据，我的答案结果与“变量编辑器”视图中的结果不同。例如：

变量编辑器：

128 128 128 128 128 128 128 128 127

答案控制台：

128 128 128 128 128 128 128 128 128

知道为什么吗？我正在用 C++ 开发一些东西，我得到与“变量编辑器”相同的输出，但与实际控制台输出的值不同..

PS matlab函数：

```
function f = returnData(filename)
rawdata = wavread('FILE_NAME');
f = rawdata;
end 
```

然后我所做的就是“运行文件”，输出显示在控制台上。谢谢

# php - 文本格式不会出现在使用 TinyMCE 格式化并使用 SwiftMailer 发送的电子邮件中

> ID：12350742
> 
> 赞同：2
> 
> 时间：2012-09-10T11:28:16.453
> 
> 标签：php, tinymce, swiftmailer, email-client

我在我的 PHP 脚本中使用[SwiftMailer](http://swiftmailer.org/)来发送电子邮件，并使用[TinyMCE](http://www.tinymce.com/)作为文本编辑器来编写和格式化消息正文。问题是，当我发送消息时，它在所有电子邮件客户端（gmail、yahoo 和 hotmail）中都没有任何格式显示，甚至链接也不显示为链接，它们显示为普通文本，但显示为蓝色。那么问题是什么？

这是我用来发送电子邮件的代码：

```
<?php

require_once 'path/to/SwiftMailer/lib/swift_required.php';

$transport = Swift_MailTransport::newInstance();
# Create the Mailer using your created Transport
$mailer = Swift_Mailer::newInstance($transport);
# Create the message
$msg = Swift_Message::newInstance();
# Give the message a subject
$msg->setSubject($_POST['subject']);
# Set the From address with an associative array
$msg->setFrom(array($_POST['sender_email'] => $_POST['sender_name']));
# Give it a body
$msg->setBody($_POST['message'], 'text/html');

$failedRecipients = array();
$numSent = 0;
$to = array(
    'recipient_1@gmail.com',
    'recipient_2@yahoo.com' => 'Recipient 2',
    'recipient_3@hotmail.com',
    'recipient_4@gmail.com' => 'Recipient 4',
    'recipient_5@yahoo.com'
);

foreach ($to as $address => $name) {
    if (is_int($address)) {
        $msg->setTo($name);
    } else {
        $msg->setTo(array($address => $name));
    }

    $numSent += $mailer->send($msg, $failedRecipients);
}

echo $numSent > 0 ? 'SUCCESS' : 'FAILURE';

?> 
```

请注意，它`$_POST['message']`包含我使用 TinyMCE 编写和格式化的消息正文。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-12T08:04:55.900

我已经尝试了很多事情直到我弄明白，问题是格式化消息正文中的特殊字符被转义（在每个特殊字符的前面添加了一个反斜杠）我不知道为什么，我不知道不知道是哪一个（TinyMCE 或 SwiftMailer）做到了这一点。所以我需要做的就是在通过 SwiftMailer 发送消息之前从消息正文中去除斜杠。我只需要更改此行：

```
$msg->setBody($_POST['message'], 'text/html'); 
```

成为：

```
$msg->setBody(stripslashes($_POST['message']), 'text/html'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T11:43:25.360

之前没有使用过 Swiftmailer，但作为一个起点，它看起来像是在发送之前从内容中剥离（而不是转义）HTML 标签。您是否可以发布您的代码，因为它可能是您正在做的事情或者 swift mailer 本身正在做的事情。

快速浏览一下 swiftmailer，它似乎支持 html 消息，因此也可能是您没有使用正确的 MIME 类型。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-10T12:29:04.543

我想问题是您的 html 电子邮件不包含您的 tinymce 编辑器中可用的样式表。确保将相同的样式表应用于您的电子邮件内容。

# locale - 带有 Locale.getDefault() 的数字格式未给出预期结果

> ID：12350747
> 
> 赞同：0
> 
> 时间：2012-09-10T11:28:31.477
> 
> 标签：locale, default, number-formatting

我有这个代码：

```
public double stringToDouble(String s) {

       NumberFormat nf = NumberFormat.getInstance(Locale.getDefault());

    try {

        return nf.parse(s).doubleValue();
    } catch (java.text.ParseException e) {
        return 0.0;
    }
} 
```

它工作正常，但是对于某些值，例如 60.0，它给出 600.0，我不知道为什么，对于 60，它给出 60.0

有什么建议么？提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-21T14:43:36.127

发生这种情况是因为您的机器 (JVM) 上的默认语言环境将点解释为分组字符（3 位分组，如 1.000.000,00），并且小数分隔符很可能是逗号字符。

我使用默认的英国语言环境在我的机器上运行您的代码

`System.out.println(stringToDouble("60.0"));` `System.out.println(stringToDouble("60"));` `System.out.println(stringToDouble("60,0"));`

它打印： `60.0` 和 `60.0` 和 `600.0`

为了可移植性，不要设置默认值，而是设置特定的语言环境。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T13:30:22.763

好的，答案是使用以下代码：

```
public double stringToDouble(String s) {

       NumberFormat nf = NumberFormat.getInstance(Locale.getDefault());
    nf.setGroupingUsed(false);
    ParsePosition parsePosition = new ParsePosition(0);
    Number n = nf.parse(s, parsePosition);
    if (n == null || parsePosition.getErrorIndex() >= 0 || parsePosition.getIndex() < s.length())
    {
      /* not a valid number */
    }
    return n.doubleValue();
} 
```

用这个代替 Double.parseDouble();

# java - JavaWebStart 以及图像和文件等资源

> ID：12350749
> 
> 赞同：0
> 
> 时间：2012-09-10T11:28:36.510
> 
> 标签：java, image, import, report, java-web-start

我有个疑问。我在一个摇摆项目中使用 javawebstar。在我的应用程序中，我有一些用于改进设计的图像和一个用于显示报告的 .xls 文件。我正在使用该方法`getClass().getResource("")`来定位图像，并且我意识到我的应用程序尝试使用以下内容在 Web 服务器中查找资源：jar:http://www...。我认为所有资源都将在安装应用程序的本地计算机中查找。难道我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T00:31:16.137

该应用程序。将在需要时下载资源并将它们缓存在本地磁盘上。

出于*安全原因*，控制台中显示的 URL 将*始终指向服务器*，即使对于受信任的应用程序也是如此。缓存所有资源。

# css - 如何使元素在div内对齐

> ID：12350760
> 
> 赞同：0
> 
> 时间：2012-09-10T11:29:10.883
> 
> 标签：css

我有一个元素很少的 div ，我的标签和 div 内的文本框没有很好地对齐，你可以看到截图 .. 对齐这些合法名称和企业名称和文本框的任何想法，所以所有文本框应该从同一点开始

谢谢

![在此处输入图像描述](../Images/c42756b35407d6ce685097bfa870e3d0.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T11:33:41.657

`width`为您的标签和输入设置：

```
.the-label {
    width: 160px;
}

.the-input {
    width: 220px;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T11:34:15.110

这是您可以做到的一种方法：

[http://jsfiddle.net/FmKfP/](http://jsfiddle.net/FmKfP/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-10T11:34:24.937

您可以使用不可见的表格对齐它们。

```
<table border="0">
<tr><td>Legal Name:</td><td><input type="text"></td></tr>
<tr><td>Business Name:</td><td><input type="text"></td></tr>
</table> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-10T12:14:17.850

您将不得不问自己哪个更糟：使用表格或使用足够的标记使其看起来像表格，但使用 spans/divs 而不是 trs/tds。我认为在这种情况下表格很好（如果您使用过关系数据库，那么很多只有 2 列的表格并不少见），其他人会向您保证这是邪恶的。

您可以像已经建议的那样在标签元素上使用宽度，或者您可以使用稍微不那么邪恶的 CSS 表格。

```
div.pseudo-row { display: table-row }
/* input might need to go in a container and have the container set to table-cell instead */
div.pseudo-row label, div.pseudo-row input { display: table-cell }

<div class="pseudo-row">
<label for="first-item">First item</label>
<input type="text" id="first-item" />
</div>

<div class="pseudo-row">
<label for="second-item">Second item</label>
<input type="text" id="second-item" />
</div> 
```

[http://www.vanseodesign.com/css/tables/](http://www.vanseodesign.com/css/tables/)

作为记录，我将只在此实例中使用表格并将 CSS 表格显示属性保存到另一天。

# php - 给定日期后如何下载文件

> ID：12350765
> 
> 赞同：-3
> 
> 时间：2012-09-10T11:29:26.140
> 
> 标签：php

我知道 PHP 文件上传和下载的基本功能。我需要一些关于如何将文件上传到特定日期并在选择该日期时下载的想法。

我需要将每日报告上传到服务器。当用户想要查看报告时，他需要选择日期。因此，将列出该日期上传的报告，用户可以下载该报告。谁能帮助我如何使用 php 做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T12:10:10.897

上传记录时，您应该在数据库中添加日期字段并使用 php [date('dmy')] 中的日期函数插入日期。

所以在下载记录时，可以根据日期选择文件来获取记录：

```
 SELECT * FROM `table_name` WHERE `date`= input from user; 
```

这将获取特定日期的记录。

# citrix - 在 Citrix 上使用 Dynamics AX 2012 时，某些标签是不可见的

> ID：12350766
> 
> 赞同：0
> 
> 时间：2012-09-10T11:29:28.293
> 
> 标签：citrix, axapta, dynamics-ax-2012

我通过 Citrix 连接到 Dynamics AX 2012。一切正常，但在某些屏幕中，控件没有文本。标题为空。

我认为很少有用户遇到这个问题，但我问这个问题是为了获得有助于解决问题的想法。

请帮忙，提前谢谢你。

更新：控件是由代码生成的，它们仅在我们需要时可见。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T23:51:37.827

仅在 Citrix 环境中出现的显示问题通常是由使用的各种挂钩之一引起的。有许多不同的钩子，但多显示器钩子将是主要的罪魁祸首。

您可以禁用特定进程的挂钩，如下所示：

[http://support.citrix.com/article/CTX107825](http://support.citrix.com/article/CTX107825)

另请查看有关禁用多显示器挂钩的这篇文章：

[http://support.citrix.com/article/CTX129712](http://support.citrix.com/article/CTX129712)

# java - REST 如何将包含“/”的值作为 URI 中的路径参数传递？

> ID：12350768
> 
> 赞同：1
> 
> 时间：2012-09-10T11:29:33.520
> 
> 标签：java, rest, get

我正在使用 Java 中的 HttpClient 开发客户端来访问 REST 应用程序。在这个我想传递两个参数 name(value="Kiran") 和 address(Value="5th Corner/Road") 作为路径参数。

```
Sample url:-http://localhost:port/rest/name/Kiran/address/5th Corner/Road 
```

但由于地址包含“/”作为值，它不取实际值。从 Java 访问 REST 应用程序时有没有办法处理“/”。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T11:31:13.907

使用[java.net.URLEncoder](http://docs.oracle.com/javase/7/docs/api/java/net/URLEncoder.html)对查询参数进行编码。

# javascript - 在 Javascript 中复制 C# 服务器端验证

> ID：12350769
> 
> 赞同：5
> 
> 时间：2012-09-10T11:29:37.100
> 
> 标签：javascript, validation

我的页面上基本上有以下验证 - 它是一个单词规则，即文本框中的描述不能超过 3 个单词，不包括单词“and”。我已经在 C# 中实现了以下服务器端验证，它工作正常

```
if (Desc.Trim().ToString() != "")
{
    MatchCollection collection = Regex.Matches(Desc.Replace("and", ""), @"[\S]+");

    if (collection.Count > 3)
    {
        ErrorMsg.Append("Description should contain at most 3 words(excluding 'and').");
        ErrorMsg.Append("\\n");
    }
} 
```

但是我很难在 Javascript 中进行相同的工作。我已经尝试了以下方法，但到目前为止它还没有工作，所以希望对 Javascript 有更好了解的人可以看到错误。请注意 if 是在页面上触发的更大验证功能的一部分 - 警报只是在那里查看它是否进入这个 if （它没有） - 当这个块被删除时，页面上的其余 JS 是工作正常。

```
if (Desc.val().trim() != "")
{
    alert('1');
    !regexWordRule.test(Desc.val());
    alert('2');

    if (Desc.val().match(regexWordRule).length > 3)
    {
        errorText += "Description should contain at most 3 words(excluding 'and').";
    }

    valid = false;
} 
```

下面是我在 js 文件最顶部定义的 regexWordRule。

```
var regexWordRule = /[\S]+/; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T12:15:06.097

您可以找到更好的解决方案，但是我想到了这种方法，所以我将其发布：

```
var input = "and lorem and ipsum";

// remove ands
var deandizedinput = input.replace(/\band\b/g, ' ');

// replace all white spaces with a single space
var normalizedinput = deandizedinput.replace(/\s+/g, ' ');

// split the input and count words
var wordcount = normalizedinput.trim().split(' ').length; 
```

[在这里](http://jsfiddle.net/GDcv4/)拉小提琴。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-10T13:01:15.430

如果您使用的是 MVC3，则可以在模型上使用远程验证 (RemoteAttribute)。或者您可以使用 ajax 请求手动进行此类验证。

这将防止您的代码重复。

# hibernate - 使用 Hibernate 标准获取两个对象的属性

> ID：12350771
> 
> 赞同：0
> 
> 时间：2012-09-10T11:29:44.573
> 
> 标签：hibernate, hibernate-criteria

使用 Criteria API 运行查询时出现异常

```
 org.hibernate.QueryException: could not resolve property: com of: com.data.Collage        at org.hibernate.persister.entity.AbstractPropertyMapping.propertyException(AbstractPropertyMapping.java:44)
    at org.hibernate.persister.entity.AbstractPropertyMapping.toType(AbstractPropertyMapping.java:38)
    at org.hibernate.persister.entity.AbstractEntityPersister.toType(AbstractEntityPersister.java:1362)
    at org.hibernate.loader.criteria.CriteriaQueryTranslator.getPathEntityName(CriteriaQueryTranslator.java:204)
    at org.hibernate.loader.criteria.CriteriaQueryTranslator.createCriteriaEntityNameMap(CriteriaQueryTranslator.java:191)
    at org.hibernate.loader.criteria.CriteriaQueryTranslator.<init>(CriteriaQueryTranslator.java:81)
    at org.hibernate.loader.criteria.CriteriaLoader.<init>(CriteriaLoader.java:58)
    at org.hibernate.impl.SessionImpl.list(SessionImpl.java:1550)
    at org.hibernate.impl.CriteriaImpl.list(CriteriaImpl.java:283) 
```

类定义如下

```
class Collage {
int id;
String collageName;
List lstStudent;
}

class Student{
String studentName;
int id;
} 
```

已完成上述类的映射。

现在我正在尝试在我有 collageID 和 StudentID 的单个查询中获取拼贴名称和学生姓名。为此使用了 Criteria API。

```
Criteria cr = session.createCriteria("com.data.Collage","collageAlias");
cr.createAlias("com.data.Student","studentAlias");
cr.add(Restrictions.eq("collageAlias.id", "402882c2369bc53901369bc95d5f0137"));
cr.add(Restrictions.eq("studentAlias.id","ff80808134cbe5a10134d14ff20300a9"));

ProjectionList properties = Projections.projectionList();
properties.add(Projections.property("collageAlias.collageName"));
properties.add(Projections.property("studentAlias.studentName"));

cr.setProjection(properties);
List collage_student = cr.list(); 
```

我尝试使用 Collage.class，删除了 collage 的别名作为标准 API 的默认类，但它没有用。

有什么建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T11:43:18.280

当你这样做

```
cr.createAlias("com.data.Student","studentAlias"); 
```

Hibernate 自动认为 Student 是`Collage`类的一个字段，因为标准是建立在该类上的。通过创建别名，您会自动在该特定实体上进行连接。

由于您的`Collage`班级没有名为“com.data.Student”的属性，因此会导致您的错误。

您应该考虑稍微重构一下您的代码。如果要`Collage`处理`Student`实体列表，请更改`List lstStudent`为`List<Student> lstStudent`. 现在，您可以映射类，以便告诉 Hibernate 2 个实体之间的关系：

```
@Entity
class Collage {
    int id;
    String collageName;
    List<Student> lstStudent;
}

@Entity
class Student{
    String studentName;
    Collage collage;
    int id;
} 
```

在getter`Collage`课程中，您将拥有：`List<Student> lstStudent`

```
@OneToMany(fetch = FetchType.LAZY, mappedBy = "collage")
public List<Student> getStudents() {
    return this.lstStudents;
} 
```

，而在你`Student`的吸气剂课程中，`Collage`你将拥有：

```
@ManyToOne(fetch = FetchType.LAZY)
public Collage getCollage(){
    return this.collage;
} 
```

这基本上允许您在`Collage`类上创建一个 Criteria 并使用别名直接访问其列表`Students`：

```
cr.createAlias("lstStudent", "studentsAlias"); 
```

# java - 无法使用 ApachePOI 打开 excel - 出现异常

> ID：12350775
> 
> 赞同：1
> 
> 时间：2012-09-10T11:29:49.410
> 
> 标签：java, apache-poi

在尝试使用 ApachePOI 打开 excel 时，我得到了

`org.apache.poi.openxml4j.exceptions.InvalidOperationException: Can't open the specified file: 'C:\Users\mdwaipay\AppData\Local\Temp\poifiles\poi-ooxml-1570030023.tmp'`

我检查了。没有创建这样的文件夹。我正在使用 Apache POI 3.6 版。

有什么帮助吗？类似的代码在不同的工作区中运行良好。在这里无所适从。

代码：

```
public Xls_Reader(String path) {
  this.path=path; 
  try { 
      fis = new FileInputStream(path); 
      workbook = new XSSFWorkbook(fis); 
      sheet = workbook.getSheetAt(0); 
      fis.close(); 
  }
  catch (Exception e) 
  { e.printStackTrace(); 
  } 
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-14T08:45:22.873

你为什么要拿一个非常好的文件，把它包装在一个`InputStream`.，然后要求 POI 必须为你缓冲整个文件，以便它可以进行随机访问？如果您直接将文件传递给 POI，生活会更好，因此它可以根据需要跳过！

如果您想同时使用 XSSF (.xlsx) 和 HSSF (.xls)，请将您的代码更改为

```
public Xls_Reader(String path)  { 
  this.path = path; 
  try { 
    File f = new File(path);
    workbook = WorkbookFactory.create(f); 
    sheet = workbook.getSheetAt(0); 
  } catch (Exception e) {
    e.printStackTrace();
  } 
} 
```

如果您只需要 XSSF 支持，和/或您需要完全控制资源何时关闭，请执行类似的操作

```
OPCPackage pkg = OPCPackage.open(path);
Workbook wb = new XSSFWorkbook(pkg);

// use the workbook

// When you no longer needed it, immediately close and release the file resources
pkg.close(); 
```

# android - ListView 的上下文菜单

> ID：12350778
> 
> 赞同：0
> 
> 时间：2012-09-10T11:30:06.687
> 
> 标签：android

我的`ListView`应用程序中有一个自定义适配器。我想添加一个`ContextMenu`用于删除其中的项目`ListView`

在我的`onCreate`方法中，我注册了`Context Menu`：

```
registerForContextMenu(lastCases); 
```

其中参数是我的 ListView

这应该调用这个方法：

```
@Override
public void onCreateContextMenu(ContextMenu menu, View v, ContextMenuInfo menuInfo) {
    super.onCreateContextMenu(menu, v, menuInfo);
    Log.i("onCreateContextMenu: ", "Inside"); 
    MenuInflater inflater = getMenuInflater();
    inflater.inflate(R.menu.stock_file_menu, menu);
} 
```

如您所见，每当调用此方法时，我都会使用 Logger 记录信息。但它不会向 输出任何内容`LogCat`，这表明该方法永远不会被触发。

另外我应该提到我`ListView`的充满了这种方法的信息：

```
private void RefreshCaseList() {

    lastTenCases = db.getAllCases(10);
    if (lastTenCases.size() > 0)
        error.setText("");

    lastCases.setAdapter(new CustomAdapter(myClass.this, lastTenCases));

} 
```

此方法从数据库中获取一些对象，并用这些对象填充，但在我注册in`ListView`之前调用此方法。`context menu``OnCreate`

没有发生错误，所以我没有更多信息可以帮助我。任何人都知道如何使用定制适配器制作一个`Context Menu`for a吗？`ListView`

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T11:59:30.660

**解决方案**

在我的 BaseAdapter 中，我必须这样做：

```
convertView.setLongClickable(true); 
```

# android - android listview中的应用程序闪烁问题

> ID：12350781
> 
> 赞同：0
> 
> 时间：2012-09-10T11:30:28.013
> 
> 标签：android, listview, flicker

我的应用程序中有一个列表视图，列表视图的每一行都有一个框架布局，其中有一个图像视图和一个图像视图上方的按钮，当通过触摸图像滚动列表时，列表会正常滚动，但是当我通过触摸图像上方的按钮滚动列表视图时列表视图闪烁并且行为异常。有人请帮助解决这个问题

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T11:35:45.570

这可能会帮助你

```
listview.setSmoothScrollbarEnabled(true); 
```

# r - 查找 R 中子集的最大值/平均值/最小值

> ID：12350783
> 
> 赞同：0
> 
> 时间：2012-09-10T11:30:37.753
> 
> 标签：r, subset

一个简单的问题，但我似乎无法弄清楚。我想在我的数据框的一个子集中找到最大值。

据我所知，它看起来像：

```
max(data.frame$vector1)[data.frame$vector2=="1",] 
```

但我收到维度数不正确的错误消息。

然后该文本应该用作另一个下标中的逻辑测试

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-10T11:35:11.893

您的索引命令是错误的。尝试

```
 max( dataframe[ , "vector1" ] )                              ## all of vector1 
```

对于所有人，和

```
 max( dataframe[ dataframe[,"vector2"]==1 , "vector1" ] )     ## subset 
```

你可以写成长*格式*

```
 sdfind <- dataframe[,"vector2"]==1
 max( dataframe[sdfind, "vector1"]) 
```

您还可以使用该`subset()`函数，或创建一个临时变量，甚至可以将该函数应用于、 或 ..`summary()`的所有值。`vector2`

# javascript - 是否可以定义中缀函数？

> ID：12350790
> 
> 赞同：12
> 
> 时间：2012-09-10T11:31:04.737
> 
> 标签：javascript, functional-programming, coffeescript, infix-operator

是否可以在 CoffeeScript（或纯 JavaScript）中定义我自己的中缀函数/运算符？例如我想打电话

```
a foo b 
```

或者

```
a `foo` b 
```

代替

```
a.foo b 
```

或者，当 foo 是全局函数时，

```
foo a, b 
```

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2017-01-28T18:58:47.737

ES6 启用了一种非常 Haskell/Lambda 演算的做事方式。

给定一个乘法函数：

```
const multiply = a => b => (a * b) 
```

您可以使用部分应用程序定义一个加倍函数（省略一个参数）：

```
const double = multiply (2) 
```

你可以用它自己组合双重函数，创建一个四重函数：

```
const compose = (f, g) => x => f(g(x))
const quadruple = compose (double, double) 
```

但实际上，如果您更喜欢中缀符号怎么办？正如 Steve Ladavich 所说，您确实需要扩展原型。

但我认为使用数组表示法而不是点表示法可以做得更优雅。

让我们使用函数组合的官方符号“∘”：

```
Function.prototype['∘'] = function(f){
  return x => this(f(x))
}

const multiply = a => b => (a * b)
const double = multiply (2)
const doublethreetimes = (double) ['∘'] (double) ['∘'] (double)

console.log(doublethreetimes(3));
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-09-10T11:46:30.433

实际上将其添加为答案：**不**，这是不可能的。

[在 vanilla JS 中是不可能的](https://stackoverflow.com/questions/4700085/can-i-define-custom-operator-overloads-in-javascript)。

[在 CoffeeScript 中是不可能的](https://github.com/jashkenas/coffee-script/issues/1429)。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-04-07T16:26:51.117

你可以使用 sweet.js。看：

1.  [http://sweetjs.org/doc/main/sweet.html#infix-macros](http://sweetjs.org/doc/main/sweet.html#infix-macros)
2.  [http://sweetjs.org/doc/main/sweet.html#custom-operators](http://sweetjs.org/doc/main/sweet.html#custom-operators)

Sweet.js 使用宏扩展了 Javascript。

它就像一个预处理器。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2017-05-21T13:04:54.797

Javascript 不包含用于部分应用的函数或部分的中缀表示法。但它附带了更高阶的函数，这让我们几乎可以做所有事情：

```
// applicator for infix notation
const $ = (x, f, y) => f(x) (y);

// for left section
const $_ = (x, f) => f(x);

// for right section
const _$ = (f, y) => x => f(x) (y);

// non-commutative operator function
const sub = x => y => x - y;

// application

console.log(
  $(2, sub, 3),   // -1
  $_(2, sub) (3), // -1
  _$(sub, 3) (2)  // -1
);
```

如您所见，在这种情况下，我更喜欢视觉名称`$`和`$_`文本`_$`名称。这是你能得到的最好的——至少对于纯 Javascript/ES2015。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2016-09-19T04:08:56.903

这绝对不是中缀符号，但它有点接近**：/**

```
let plus = function(a,b){return a+b};

let a = 3;
let b = 5;
let c = a._(plus).b // 8 
```

我认为没有人真正想要使用这个“符号”，因为它非常难看，但我认为可能可以进行一些调整以使其看起来不同或更好（可能[在这里使用这个答案](https://stackoverflow.com/a/3929877/5776618)来“调用函数" 不带括号）。

**中缀函数**

```
// Add to prototype so that it's always there for you
Object.prototype._ = function(binaryOperator){

  // The first operand is captured in the this keyword
  let operand1 = this; 

  // Use a proxy to capture the second operand with "get"
  // Note that the first operand and the applied function
  //   are stored in the get function's closure, since operand2
  //   is just a string, for eval(operand2) to be in scope,
  //   the value for operand2 must be defined globally
  return new Proxy({},{
    get: function(obj, operand2){
        return binaryOperator(operand1, eval(operand2))
    }
  })
} 
```

另请注意，第二个操作数作为字符串传递并评估`eval`以获取其值。正因为如此，我认为只要操作数（又名“b”）的值未在全局范围内定义，代码就会中断。

# xml - perl：xml到对象并准确返回

> ID：12350791
> 
> 赞同：0
> 
> 时间：2012-09-10T11:31:04.883
> 
> 标签：xml, perl

是否有任何 XML 到对象转换器可以再次转换回来，以确保文件完全重复？我在 CPAN 上找不到任何可以确保文件可以完全按照制作的方式进出的内容。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-10T11:41:02.770

这在任何语言中都是不可能的，因为 XML 有不同的方式来表示相同的数据。

包含 xml 实体的文本数据可以通过转义实体或将内容包装在 CDATA 部分中来表示。

空标签可以表示为`<tag/>`或`<tag></tag>`。

一些空白是微不足道的，可能会被改变。

由于多个文本 xml 表示可以表示相同的 DOM 结构，因此无法保证将 xml 文本读取到 DOM 中，再次将其写出来并获得完全相同的结果。

# sql - SQL Server JOIN ON 值 ELSE NULL

> ID：12350793
> 
> 赞同：1
> 
> 时间：2012-09-10T11:31:12.893
> 
> 标签：sql, sql-server

我正在努力处理需要加入数据的查询。我有一张包含各种状态消息的表格。它们有一个 failureBitNr，例如“a1_1”。然后我有第二个表，将“a1_1”翻译成人类可读的文本（lng_English）。默认情况下，第二个表具有“a1_1”的翻译。但这也可以被另一个特定的翻译覆盖，例如当 failureBitNr 用于其他状态而不是标准时。

所以我需要将状态表与 failureBitNr 上的转换表连接起来。这并不难。

但是我如何将它加入到覆盖基本翻译的翻译中？

表 2 如下所示：

```
id   fileProjectNr MachineNr failureBitNr  lng_English
905  2203456       2         a6_1          This message overwrites the standard
205  NULL          NULL      a6_1          Standard message for a6_1
204  NULL          NULL      a1_1          Standard message for A1_1
203  NULL          NULL      a1_2          Standard message for A1_2 
```

请注意，覆盖现有消息的消息包含一个不为 NULL 的 fileProjectNr。所有标准消息都有一个 fileProjectNr NULL

因此，仅在 FailureBitNr 上加入将返回两行（905 和 205）。但我需要加入 failureBitNr 并做一些不是 fileProjectNr 的 NULL 的事情。

所以我这样做了：

```
DECLARE @ProjectNr int = 123456

SELECT
    t1.*,
t2.*
FROM
    Table1 AS t1
LEFT JOIN
    Table2 AS t2
ON
(t1.failureBitNr = t2.failureBitNr)
AND
    (t2.fileProjectNr LIKE
    CASE WHEN t2.fileProjectNr = @ProjectNr THEN
        @ProjectNr
    ELSE
        NULL
    END
)
WHERE
    {where statement} 
```

这将返回 ID 905，但是如果在 failureBitNr a1_1 和 a1_2 上也有连接，则这些都将返回为“NULL”而不是“ax_x 的标准消息”。

有人知道如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T11:52:52.273

我的第一个想法：

```
SELECT     t1.*, t2.* FROM     Table1 AS t1 
    LEFT JOIN  Table2 AS t2 (t1.failureBitNr = t2.failureBitNr)
    where t2.fileProjectNr is not NULL
union all               
    SELECT     t1.*, t2.* FROM     Table1 AS t1 
    LEFT JOIN  Table2 AS t2 (t1.failureBitNr = t2.failureBitNr) and 
    where t1.failureBitNr not in (select failureBitNr from Table2 where fileProjectNr is not NULL) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-10T11:49:06.857

而不是**join**，使用`UNION ALL`and 然后`GROUP BY`by`failureBitNr`和`SELECT` `lng_English`by`MAX(fileProjectNr)`或`MAX`by`fileProjectNr`

# apache-pig - MR 作业的 Pig 文档

> ID：12350798
> 
> 赞同：0
> 
> 时间：2012-09-10T11:31:22.677
> 
> 标签：apache-pig

有谁知道任何列出所有操作员（如分组、流式处理等）的 Apache pig 文档以及 PIG 采取的相应操作，即操作员导致的 MR 作业类型/计数？

我对流方面特别感兴趣，它如何映射到 MR 作业。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-16T17:23:59.243

然而，这还不是一个完整的列表，但我认为值得阅读以下文章/部分：

在 Map-Reduce 之上构建高级数据流系统：Pig 体验
（第 4 节。MapReduce 的编译）
[http://infolab.stanford.edu/~olston/publications/vldb09.pdf](http://infolab.stanford.edu/~olston/publications/vldb09.pdf)

Pig Latin: A Not-So-Foreign Language for Data Processing
(Chapter 4.2 Map-Reduce Plan Compilation)
[http://infolab.stanford.edu/~olston/publications/sigmod08.pdf](http://infolab.stanford.edu/~olston/publications/sigmod08.pdf)

此外，您始终可以在脚本上发出[EXPLAIN](http://pig.apache.org/docs/r0.10.0/test.html#explain)或[ILLUSTRATE](http://pig.apache.org/docs/r0.10.0/test.html#illustrate)以查看幕后发生的情况。

# android - Android：如何在 SharedPreferences for android 中存储字符串数组

> ID：12350800
> 
> 赞同：4
> 
> 时间：2012-09-10T11:31:34.860
> 
> 标签：android, search-engine, sharedpreferences, android-browser

我正在构建一个使用搜索引擎搜索网络的应用程序。我的应用程序中有一个编辑文本，用户将从中搜索网络。我想像浏览器历史记录一样保存搜索关键字。我可以使用最后一个关键字保存并显示它，但我无法增加搜索结果的数量。我想显示最后 5 个搜索。这是我的代码：

```
public class MainActivity extends Activity implements OnClickListener {

Button insert;
EditText edt;
TextView txt1, txt2, txt3, txt4, txt5;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    edt = (EditText) findViewById(R.id.search_word);

    txt1 = (TextView) findViewById(R.id.txt1);
    txt1.setOnClickListener(this);

    insert = (Button) findViewById(R.id.insert);
    insert.setOnClickListener(new OnClickListener() {

        public void onClick(View v) {
            if ((edt.getText().toString().equals(""))) {
                Toast.makeText(
                        getBaseContext(),
                        "Whoa! You haven't entered anything in the search box.",
                        Toast.LENGTH_SHORT).show();

            } else {
                SharedPreferences app_preferences = PreferenceManager
                        .getDefaultSharedPreferences(MainActivity.this);
                SharedPreferences.Editor editor = app_preferences.edit();
                String text = edt.getText().toString();
                editor.putString("key", text);
                editor.commit();
                Toast.makeText(getBaseContext(), text, Toast.LENGTH_LONG)
                        .show();
            }

        }
    });
}

@Override
protected void onStart() {
    // TODO Auto-generated method stub
    super.onStart();

    SharedPreferences app_preferences = PreferenceManager
            .getDefaultSharedPreferences(this);
    String text = app_preferences.getString("key", "null");
    txt1.setText(text);
}

public void onClick(View v) {
    String text = txt1.getText().toString();
    Toast.makeText(getBaseContext(), text, Toast.LENGTH_SHORT).show();

} 
```

}

请帮助我克服这个问题。

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-09-10T11:36:13.063

保存数组

```
public boolean saveArray(String[] array, String arrayName, Context mContext) {   
    SharedPreferences prefs = mContext.getSharedPreferences("preferencename", 0);  
    SharedPreferences.Editor editor = prefs.edit();  
    editor.putInt(arrayName +"_size", array.length);  
    for(int i=0;i<array.length;i++)  
        editor.putString(arrayName + "_" + i, array[i]);  
    return editor.commit();  
} 
```

负载阵列

```
public String[] loadArray(String arrayName, Context mContext) {  
    SharedPreferences prefs = mContext.getSharedPreferences("preferencename", 0);  
    int size = prefs.getInt(arrayName + "_size", 0);  
    String array[] = new String[size];  
    for(int i=0;i<size;i++)  
        array[i] = prefs.getString(arrayName + "_" + i, null);  
    return array;  
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-07-17T10:38:32.380

使用 Gson 库将您的数组或对象转换为 Json，并将您的数据以 json 格式存储为字符串。

节省;

```
SharedPreferences sharedPrefs = PreferenceManager.getDefaultSharedPreferences(context);
Editor editor = sharedPrefs.edit();
Gson gson = new Gson();

String json = gson.toJson(arrayList);

editor.putString(TAG, json);
editor.commit(); 
```

读;

```
SharedPreferences sharedPrefs = PreferenceManager.getDefaultSharedPreferences(context);
Gson gson = new Gson();
String json = sharedPrefs.getString(TAG, null);
Type type = new TypeToken<ArrayList<ArrayObject>>() {}.getType();
ArrayList<ArrayObject> arrayList = gson.fromJson(json, type); 
```

原始答案：[在 SharedPreferences 中存储数组列表对象](https://stackoverflow.com/questions/22984696/storing-array-list-object-in-sharedpreferences/22985657#22985657)

# c# - 检查字符串是否有无效字符？最聪明的方法？

> ID：12350801
> 
> 赞同：9
> 
> 时间：2012-09-10T11:31:36.593
> 
> 标签：c#, .net, list, char

我想检查一些字符串是否有无效字符。对于无效字符，我的意思是不应该存在的字符。这些是什么角色？这是不同的，但我认为那不是那么重要，重要的是我应该如何做到这一点，最简单和最好的方法（性能）是什么？

假设我只想要包含**'AZ'、'empty'、'.'、'$'、'0-9' 的字符串**

所以如果我有一个像“ ***HELLO STaCKOVERFLOW*** ”这样的字符串=>无效，因为'a'。好的，现在该怎么做？我可以制作一个`List<char>`并将每个不允许的字符放入其中，并使用此列表检查字符串。也许不是一个好主意，因为那时有很多字符。但是我可以制作一个包含所有允许字符的列表，对吗？接着？对于字符串中的每个字符，我必须比较`List<char>`? 有任何智能代码吗？还有一个问题：如果我将 AZ 添加到`List<char>`我必须手动添加 25 个字符，但这些字符在 ASCII 表中是我知道的 65-90，我可以更轻松地添加它们吗？有什么建议么？谢谢

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-09-10T11:33:15.540

您可以为此使用正则表达式：

```
Regex r = new Regex("[^A-Z0-9.$ ]$");
if (r.IsMatch(SomeString)) {
    // validation failed
} 
```

* * *

要创建一个字符列表，`A-Z`或者`0-9`您将使用一个简单的循环：

```
for (char c = 'A'; c <= 'Z'; c++) {
    // c or c.ToString() depending on what you need
} 
```

但是您不需要使用 Regex - 几乎每个 regex 引擎都了解范围语法 ( `A-Z`)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-07T21:48:40.343

我刚刚写了这样一个函数，以及一个扩展版本，在需要时限制第一个和最后一个字符。原始函数仅检查字符串是否仅包含有效字符，扩展函数在检查第一个和最后一个字符时将要跳过的列表开头的有效字符数添加两个整数，实际上它只是调用原始函数 3 次，在下面的示例中，它确保字符串以字母开头并且不以下划线结尾。

```
StrChr(String, "_0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"));
StrChrEx(String, "_0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ", 11, 1));

BOOL __cdecl StrChr(CHAR* str, CHAR* chars)
{
 for (int s = 0; str[s] != 0; s++)
 {
     int c = 0;

    while (true)
    {
        if (chars[c] == 0)
        {
             return false;
        }
         else if (str[s] == chars[c])
         {
            break;
         }
        else
         {
            c++;
         }
     }
 }

return true;
}

BOOL __cdecl StrChrEx(CHAR* str, CHAR* chars, UINT excl_first, UINT excl_last)
{
char first[2]   = {str[0], 0};
char last[2]    = {str[strlen(str) - 1], 0};

if (!StrChr(str, chars))
{
    return false;
}

if (excl_first != 0)
{
    if (!StrChr(first, chars + excl_first))
    {
        return false;
    }
}

if (excl_last != 0)
{
    if (!StrChr(last, chars + excl_last))
    {
        return false;
    }
}

return true;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-11-18T15:05:32.023

如果您对正则表达式不太擅长，那么在 C# 中还有另一种方法可以解决这个问题。这是我编写的用于测试名为 notifName 的字符串变量的代码块：

```
var alphabet = "a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z";
var numbers = "0,1,2,3,4,5,6,7,8,9";
var specialChars = " ,(,),_,[,],!,*,-,.,+,-";
var validChars = (alphabet + "," + alphabet.ToUpper() + "," + numbers + "," + specialChars).Split(',');
for (int i = 0; i < notifName.Length; i++)
{
    if (Array.IndexOf(validChars, notifName[i].ToString()) < 0) {
        errorFound = $"Invalid character '{notifName[i]}' found in notification name.";
        break;
        }
} 
```

您可以根据需要更改添加到数组中的字符。Array IndexOf 方法是整个事情的关键。当然，如果您希望逗号有效，那么您需要选择不同的拆分字符。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-05-27T20:09:08.467

如果您使用的是 c#，则可以使用 List 和 contains 轻松完成此操作。您可以使用单个字符（在字符串中）或多字符字符串来执行此操作

```
 var pn = "The String To ChecK";      
  var badStrings = new List<string>()
  {
  " ","\t","\n","\r"
  };
  foreach(var badString in badStrings)
  {
    if(pn.Contains(badString))
    {
     //Do something
    }
  } 
```

# php - godady 帐户中不支持我的 .htaccess 文件

> ID：12350803
> 
> 赞同：-2
> 
> 时间：2012-09-10T11:31:44.003
> 
> 标签：php, .htaccess

我已经设置了新的 webhos [http://www.godaddy.com/](http://www.godaddy.com/)并将我的网站上传到这个`godaday`主机。现在的问题是我`.htaccess`的不工作。

只有 404 错误页面正在处理`.htaccess`

我的 .htacces 文件代码是：

```
RewriteEngine on
RewriteRule ^(.)web(.).html /webdetail.php?t=$1&webid=$2 [L]
RewriteRule ^c/([^/\.]+)/?$ catagory.php?cat=$1 [L]
RewriteRule ^c/(.)/(.) /catagory.php?page=$1&cat=$2 [L]
RewriteRule ^c-p/(.) /catagory.php?page=$1 [L]
RewriteRule ^c/ catagory.php
RewriteRule ^statep/(.)/(.)/(.) /state.php?state=$1&cat=$2&page=$3 [L]
RewriteRule ^statep/(.)/(.) /state.php?state=$1&page=$2 [L]
RewriteRule ^state/(.)/(.) /state.php?state=$1&cat=$2 [L]
RewriteRule ^state/(.) /state.php?state=$1 [L]
RewriteRule ^statep /state.php
RewriteRule ^cityp/(.)/(.)/(.) /city.php?city=$1&cat=$2&page=$3 [L]
RewriteRule ^cityp/(.)/(.) /city.php?city=$1&page=$2 [L]
RewriteRule ^city/(.)/(.) /city.php?city=$1&cat=$2 [L]
RewriteRule ^city/(.) /city.php?city=$1 [L]
RewriteRule ^cityp /city.php
RewriteRule ^recentvisit/(.) /recentvisit.php?page=$1 [L]
RewriteRule ^mostvisited/(.) /mostvisited.php?page=$1 [L]
RewriteRule ^allcategorys/(.) /allcategorys.php?page=$1 [L]
RewriteRule ^recentvisit recentvisit.php
RewriteRule ^mostvisited mostvisited.php
RewriteRule ^allcategorys allcategorys.php
RewriteRule ^sms/(.) /sms.php?cat=$1 [L]
RewriteRule ^webs/(.)/(.) /webdetail.php?webid=$1&t=$2 [L]
RewriteRule ^mailwebs/(.)/(.) /mailtocompany.php?webid=$1&t=$2 [L]
RewriteRule ^contactus contactus.php
RewriteRule ^(.)state(.)/(.) /state.php?state=$1&cat=$2&page=$3 [L]
RewriteRule ^(.)state/(.) /state.php?state=$1&page=$2 [L]
RewriteRule ^(.)-state(.).html /state.php?state=$1&cat=$2 [L]
RewriteRule ^(.)state.html /state.php?state=$1 [L]
RewriteRule ^(.)-city(.)/(.) /city.php?city=$1&cat=$2&page=$3 [L]
RewriteRule ^(.)city/(.) /city.php?city=$1&page=$2 [L]
RewriteRule ^(.)-city(.).html /city.php?city=$1&cat=$2 [L]
RewriteRule ^(.)-city.html /city.php?city=$1 [L]
RewriteRule ^(.)-tag/(.) /catagory.php?cat=$1&page=$2 [L]
RewriteRule ^(.)-tag.html /catagory.php?cat=$1 [L]
ErrorDocument 404 http://www.mydomain.com/error.php 
```

我正在使用 php

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T22:14:40.720

尝试将以下内容添加到您的 .htaccess 以帮助设置正确的默认值：

```
 RewriteBase / 
     ErrorDocument 404 default
     Options +FollowSymLinks 
```

# file-upload - 将 swfupload 与 Playframework 和 Mac 一起使用

> ID：12350805
> 
> 赞同：0
> 
> 时间：2012-09-10T11:31:53.080
> 
> 标签：file-upload, playframework, swfupload

我正在尝试使用 Play 实现 SWFUpload！框架和 Mac。使用 Mac 时出现 302 错误（上传错误：302）。我认为，这似乎来自通过获取 Play 的上传页面而发生的重定向！框架（因为它是从路由文件翻译而来的？）。

它在 Windows 上的 IE 上运行良好。

我搜索了很多，阅读了很多，但没有找到是否有特定的解决方案。有没有关于如何实现这个的建议，或者对另一个简单的文件上传器有什么建议（对于大领域，有进展）？

**编辑：**

我已经在我的 Macbook 上尝试了 Safari 和 Firefox，并且都以状态返回 302 上传错误。我用 IE 在 Windows 上再次尝试，它工作正常。

html（样式表）代码：

```
#{extends 'main.html' /}
#{set title: 'Upload Media File' /}

<script type="text/javascript" src="/public/swfupload/swfupload.js"></script>
<script type="text/javascript" src="/public/swfupload/swfupload.queue.js"></script>
<script type="text/javascript" src="/public/swfupload/fileprogress.js"></script>
<script type="text/javascript" src="/public/swfupload/handlers.js"></script>

<script type="text/javascript">
    var swfu;

    window.onload = function() {
    var settings = {
    flash_url : "/public/swfupload/swfupload.swf",
    flash9_url : "/public/swfupload/swfupload_fp9.swf",
    upload_url: "doUpload",
    file_post_name: "data",
    post_params: {"article.id" : "${article?.id}"},
    file_size_limit : "1000 MB",
    file_types : "*.*",
    file_types_description : "All Files",
    file_upload_limit : 1,
    file_queue_limit : 0,
    custom_settings : {
    progressTarget : "fsUploadProgress",
    cancelButtonId : "btnCancel"
    },
    debug: false,

    // Button settings
    button_image_url: "/public/swfupload/TestImageNoText_65x29.png",
    button_width: "65",
    button_height: "29",
    button_placeholder_id: "spanButtonPlaceHolder",
    button_text: '<span>Start</span>',
    button_text_style: ".theFont { font-size: 16; }",
    button_text_left_padding: 12,
    button_text_top_padding: 3,

    // The event handler functions are defined in handlers.js
    swfupload_preload_handler : preLoad,
    swfupload_load_failed_handler : loadFailed,
    file_queued_handler : fileQueued,
    file_queue_error_handler : fileQueueError,
    file_dialog_complete_handler : fileDialogComplete,
    upload_start_handler : uploadStart,
    upload_progress_handler : uploadProgress,
    upload_error_handler : uploadError,
    upload_success_handler : uploadSuccess,
    upload_complete_handler : uploadComplete,
    queue_complete_handler : queueComplete  // Queue plugin event
    };

    swfu = new SWFUpload(settings);
    };

</script>

<h2 class="title">#{get 'title' /}</h2>
<div style="clear: both;">&nbsp;</div>
#{form @index(), id:'uploadForm', enctype:'multipart/form-data'}
<div class="entity">
    <p>This page demonstrates a simple usage of SWFUpload.  It uses the Queue Plugin to simplify uploading or cancelling all queued files.</p>

    <div class="fieldset flash" id="fsUploadProgress">
        <span class="legend">Upload Queue</span>
    </div>
    <div id="divStatus">0 Files Uploaded</div>
    <div>
        <span id="spanButtonPlaceHolder"></span>
        <input id="btnCancel" type="button" value="Cancel All Uploads" onclick="swfu.cancelQueue();" disabled="disabled" style="margin-left: 2px; font-size: 8pt; height: 29px;" />
    </div>
</div>
#{/form} 
```

路由文件中的入口（Articles.upload 是屏幕，doUpload 由 swfupload 调用）：

```
GET     /admin/articles/{id}/upload             Articles.upload
POST    /admin/articles/doUpload                Articles.doUpload 
```

**编辑 2：** 我也尝试了 Uploadify，它返回相同的错误。有没有人知道 Play 的解决方法！框架或与 Play 一起使用的上传器！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T17:32:51.663

如果您在没有任何 /path/to/something 的情况下拨`/admin/articles/{id}/upload`打电话，那么您在错误的“目录”中。`doUpload`可能是您在本地测试 Windows，但远程测试 MacOS？

无论如何，这个问题很可能与操作系统无关，而是与其他东西有关。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T11:26:20.383

[在http://www.uploadify.com](http://www.uploadify.com)有一个 html 5 上传器，可以 5 美元下载，到目前为止它对我来说是完美的。

# python - SQLAlchemy 中的 Model.query 和 session.query(Model) 有什么区别？

> ID：12350807
> 
> 赞同：63
> 
> 时间：2012-09-10T11:32:03.793
> 
> 标签：python, sqlalchemy

我是 SQLAlchemy 的初学者，发现查询可以通过 2 种方法完成：

方法一：

```
DBSession = scoped_session(sessionmaker())
class _Base(object):
    query = DBSession.query_property()

Base = declarative_base(cls=_Base)

class SomeModel(Base):
    key   = Column(Unicode, primary_key=True)
    value = Column(Unicode)

# When querying
result = SomeModel.query.filter(...) 
```

方法二

```
DBSession = scoped_session(sessionmaker())
Base = declarative_base()

class SomeModel(Base):
    key   = Column(Unicode, primary_key=True)
    value = Column(Unicode)

# When querying
session = DBSession()
result = session.query(SomeModel).filter(...) 
```

它们之间有什么区别吗？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-01-28T00:25:57.017

在上面的代码中，没有区别。这是因为，在第一个示例的第 3 行：

*   该`query`属性明确绑定到`DBSession`
*   没有自定义`Query`对象传递给`query_property`

[正如@petr-viktorin 在此处](https://stackoverflow.com/a/14553324/1648762)的答案中指出的那样，在第一个示例中定义模型之前，必须有一个可用的会话，这可能会根据应用程序的结构而存在问题。

但是，如果您需要一个自定义查询来自动向所有查询添加额外的查询参数，那么只有第一个示例允许这样做。继承自的自定义查询类`sqlalchemy.orm.query.Query`可以作为参数传递给`query_property`. [这个问题](https://stackoverflow.com/questions/920724/the-right-way-to-auto-filter-sqlalchemy-queries)显示了该模式的一个示例。

即使模型对象上定义了自定义查询属性，使用 查询时也不会使用该属性`session.query`，如第二个示例的最后一行所示。如果您需要自定义查询类，这意味着类似于第一个示例的唯一选项。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2015-09-09T09:47:17.087

一个不同的 SQLAlchemy 问题的答案（[这里](https://stackoverflow.com/a/11557211/1243435)）可能会有所帮助。这个答案开始于：

> 您可以使用`Model.query`, 因为`Model`（或通常是它的基类，尤其是在使用声明性扩展的情况下）已分配`Session.query_property`。在这种情况下`Model.query`相当于`Session.query(Model)`。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-27T22:59:16.060

我看到这些缺点[`query_property`](https://docs.sqlalchemy.org/en/13/orm/contextual.html#sqlalchemy.orm.scoping.scoped_session.query_property)：

*   您不能在与您配置的会话不同的会话上使用它（尽管`session.query`那时您总是可以使用）。
*   在定义架构之前，您需要一个可用的会话对象。

例如，当您想编写测试时，这些可能会咬您一口。

此外，`session.query`更适合 SQLAlchemy 的工作方式；`query_property`看起来它只是为了方便而添加在顶部（或与其他系统相似？）。我建议你坚持`session.query`。

# c# - System.AccessViolationException openfiledialog win7

> ID：12350808
> 
> 赞同：2
> 
> 时间：2012-09-10T11:32:09.213
> 
> 标签：c#, windows-7, openfiledialog

> **可能重复：**
> [试图读取或写入受保护的内存。当我调用 openfileDialog 的 showDialog 方法时](https://stackoverflow.com/questions/8428574/attempted-to-read-or-write-protected-memory-when-i-call-showdialog-method-of-op)

我的项目是在winxp中创建的，现在迁移到windows7。在我的项目中单击 openfiledialog 图标时，我遇到了一个奇怪的异常，之后应用程序崩溃了。这只发生在我创建发布版本并在 Windows 7 中安装该版本时。

该设置也是在 Windows 7 中创建的。在调试模式下运行代码时，我没有收到此异常。

我将 openfiledialog 的初始目录属性设置为桌面目录。

下面是我在 Windows 事件查看器中捕获的异常跟踪。

```
Application: projectname.exe
Framework Version: v4.0.30319
Description: The process was terminated due to an unhandled exception.
Exception Info: System.AccessViolationException
Stack:
at System.Windows.Forms.UnsafeNativeMethods.GetOpenFileName(OPENFILENAME_I)
at System.Windows.Forms.OpenFileDialog.RunFileDialog(OPENFILENAME_I)
at System.Windows.Forms.FileDialog.RunDialogOld(IntPtr)
at System.Windows.Forms.FileDialog.RunDialog(IntPtr)
at System.Windows.Forms.CommonDialog.ShowDialog(System.Windows.Forms.IWin32Window)
at System.Windows.Forms.CommonDialog.ShowDialog()
at companyname.projectname.MainForm.processFileOperation(FileOperationType)
at companyname.projectname.MainForm.fileOpenMenuItem_Click(System.Object, System.EventArgs)
at companyname.projectname.MainForm.toolBar_ButtonClick(System.Object, System.Windows.Forms.ToolBarButtonClickEventArgs)
at System.Windows.Forms.ToolBar.OnButtonClick(System.Windows.Forms.ToolBarButtonClickEventArgs)
at System.Windows.Forms.ToolBar.WmReflectCommand(System.Windows.Forms.Message ByRef)
at System.Windows.Forms.ToolBar.WndProc(System.Windows.Forms.Message ByRef)
at System.Windows.Forms.Control+ControlNativeWindow.OnMessage(System.Windows.Forms.Message ByRef)
at System.Windows.Forms.Control+ControlNativeWindow.WndProc(System.Windows.Forms.Message ByRef)
at System.Windows.Forms.NativeWindow.Callback(IntPtr, Int32, IntPtr, IntPtr)
at System.Windows.Forms.UnsafeNativeMethods.SendMessage(System.Runtime.InteropServices.HandleRef, Int32, IntPtr, IntPtr)
at System.Windows.Forms.Control.SendMessage(Int32, IntPtr, IntPtr)
at System.Windows.Forms.Control.ReflectMessageInternal(IntPtr, System.Windows.Forms.Message ByRef)
at System.Windows.Forms.Control.WmCommand(System.Windows.Forms.Message ByRef)
at System.Windows.Forms.Control.WndProc(System.Windows.Forms.Message ByRef)
at System.Windows.Forms.ScrollableControl.WndProc(System.Windows.Forms.Message ByRef)
at System.Windows.Forms.Form.WndProc(System.Windows.Forms.Message ByRef)
at System.Windows.Forms.Control+ControlNativeWindow.OnMessage(System.Windows.Forms.Message ByRef)
at System.Windows.Forms.Control+ControlNativeWindow.WndProc(System.Windows.Forms.Message ByRef)
at System.Windows.Forms.NativeWindow.Callback(IntPtr, Int32, IntPtr, IntPtr)
at System.Windows.Forms.UnsafeNativeMethods.CallWindowProc(IntPtr, IntPtr, Int32, IntPtr, IntPtr)
at System.Windows.Forms.NativeWindow.DefWndProc(System.Windows.Forms.Message ByRef)
at System.Windows.Forms.Control.DefWndProc(System.Windows.Forms.Message ByRef)
at System.Windows.Forms.Control.WmMouseUp(System.Windows.Forms.Message ByRef, System.Windows.Forms.MouseButtons, Int32)
at System.Windows.Forms.Control.WndProc
(System.Windows.Forms.Message ByRef)
at System.Windows.Forms.ToolBar.WndProc(System.Windows.Forms.Message ByRef)
at System.Windows.Forms.Control+ControlNativeWindow.OnMessage(System.Windows.Forms.Message ByRef)
at System.Windows.Forms.Control+ControlNativeWindow.WndProc(System.Windows.Forms.Message ByRef)
at System.Windows.Forms.NativeWindow.Callback(IntPtr, Int32, IntPtr, IntPtr)
at System.Windows.Forms.UnsafeNativeMethods.DispatchMessageW(MSG ByRef)
at System.Windows.Forms.Application
+ComponentManager.System.Windows.Forms.UnsafeNativeMethods.IMsoComponentManager.FPushMessageLoop(IntPtr, Int32, Int32)
at System.Windows.Forms.Application+ThreadContext.RunMessageLoopInner(Int32, System.Windows.Forms.ApplicationContext)
at System.Windows.Forms.Application+ThreadContext.RunMessageLoop(Int32, System.Windows.Forms.ApplicationContext)
at System.Windows.Forms.Application.Run(System.Windows.Forms.Form)
at companyname.projectname.MainForm.Main(System.String[]) 
```

# c++ - 如何校准直观的指向机制

> ID：12350810
> 
> 赞同：2
> 
> 时间：2012-09-10T11:32:17.430
> 
> 标签：c++, math, 3d, calibration

我正在尝试实现一种直观的指向机制，用户可以用手直接指向屏幕上的对象。我已经准备好了大部分，除了我不确定如何写最后一部分。

基本上，我有一个校准点列表，如下所示：

```
typdef struct {
    Point2D pointOnScreen, // gives an x/y pixel screen position
    Point3D pointingFinger, // gives the position of the user's pointing finger, in space
    Point3D usersEyes // gives the position of the user's eyes, in space
} CalibrationPoint;

std::vector<CalibrationPoint> calibrationPoints; 
```

现在，我的想法是我可以使用这些`calibrationPoints`来编写一个看起来像这样的函数：

```
Point2D whereIsTheUserPointing(Point3D pointingFinger, Point3D usersEyes) {
     return the corresponding point on screen; // this would need to be calibrated
                                               // somehow using the calibrationPoints
} 
```

但我很难弄清楚如何做到这一点。基本思想是，当您指向时，您将手指对齐，以便`your eyes`- `finger`-`object you're pointing at`对齐在一条直线上。但是，由于我没有 3D 屏幕的位置，我想我可以获取校准点并从中推断出用户指向的位置。我将如何编写`whereIsTheUserPointing()`函数和校准系统？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T11:42:00.740

我正在理想化，但也许这将是一个开始：

*   我假设您可以获得眼睛和指尖的通用 3D 坐标。

*   3D 空间中的三个点跨越一个平面。如果我们可以确定屏幕上的三个点，我们就可以在 3D 空间中定位屏幕平面。为了安全起见，让我们定位所有四个角，这样我们不仅知道平面，还知道它的边界。

*   相交的两条 3D 直线确定 3D 中的唯一点。

因此，为了找到屏幕的四个角，产生四对直线，两条线穿过每个角。这可以通过要求用户指向四个角，移动，然后再次指向四个角来完成。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T11:47:04.517

设眼睛的坐标为 (a,b,c)，手指末端的坐标为 (x,y,z)。您可以轻松地在 3D 中可视化连接线。您现在需要做的就是延长线直到它与屏幕的“平面”相交。

在您的情况下，线的参数坐标将是：

```
(a + T(x-a), b + T(y-b), c + T(z-c))

with:

eye at (a,b,c) and finger at (x,y,z). 
```

当 T = 0 时，您将获得眼睛的坐标。使用 T=1，您将获得手指末端的坐标。你可以用 T>1 来“扩展”这条线。

假设您有屏幕平面的 z 坐标，您可以`T`使用以下公式轻松获得 的值：

```
T = (Z_VALUE_OF_PLANE-c)/(z-c) 
```

代入此 T 值以获得其他两个坐标 (x,y)。

2D 平面上的最终坐标为：

```
X = a + ((Z_VALUE_OF_PLANE-c)/(z-c))*(x-a)
Y = b + ((Z_VALUE_OF_PLANE-c)/(z-c))*(y-b) 
```

# java - 使用 Cardlayout 切换到特定的 JPanel

> ID：12350812
> 
> 赞同：4
> 
> 时间：2012-09-10T11:32:27.917
> 
> 标签：java, swing, netbeans, jpanel, cardlayout

我已经开始使用 netbeans 开发 Java 桌面应用程序。我有 7 个不同的屏幕，我正在使用`JPanel`. 一个 JPanel 代表它们中的每一个，一个包含所有它们（命名为 mainPanel），它位于 JFrame 内。mainPanel`Cardlayout`用于在屏幕之间切换（JPanels）。我使用 netbeans ui 小部件（即拖放）构建了所有这些界面。

**布局**

```
JFrame
    mainPanel (Jpanel) CardLayout
        Child1 (JPanel)
        Child2 (JPanel)
        .
        .
        .
        .
        Childn (Jpanel) 
```

我知道可以使用`JPanel.next()`和切换屏幕`Jpanel.previous`。但它们只能在连续屏幕之间进行切换时使用，即如果您必须切换到直接邻居。还有一种方法`JPanel.show()`可以转到特定屏幕，但问题是它需要一个参数，当您使用函数将其添加到 mainPanel 时，该参数`name`是您关联的。我已经使用拖放添加了所有内容，所以我不知道关联的是什么，如果有的话。虽然它看起来很原始，而且我已经完成了，但这次，Cardlayout 是一个要求。`String``JPanel.add()``String``Cardlayout`

帮助将不胜感激

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-10T11:38:42.137

本[例](https://stackoverflow.com/a/6432291/230513)使用 a`JComboBox`来换卡。该示例扩展`JPanel`为添加名称，但`Component`具有`getName()`和`setName()`方法作为替代。另请参阅此相关[答案](https://stackoverflow.com/a/5657106/230513)。

![图片](../Images/86688ad610e4212185048cbd5ac97216.png)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-10T11:56:08.960

嗯...我得到了答案。问题是，当你通过界面添加一些东西时，它的代码是自动生成的，默认情况下是隐藏的。因此，我不得不查看关联字符串的自动生成代码。默认为card1、card2、card3等。

垃圾神回答的例子正是我想要的，但不是我想要的方式。它已手动关联自定义 Jpanel 中的字符串。但这让我想到了研究自动生成的代码。所以，非常感谢你:)

现在我需要做的是

```
 mainPanel.show (gameHome, "Card3"); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-10T13:08:23.827

作为替代方案，使用[ViewSwitcher](http://fhmp-java.blogspot.co.nz/2012/06/ive-come-across-many-answers-on.html)

它更适合您在这里尝试做的事情。

# c# - 如何使用c#获取元素值

> ID：12350827
> 
> 赞同：3
> 
> 时间：2012-09-10T11:33:12.733
> 
> 标签：c#, xml, xml-parsing

XML 文件：

```
<?xml version="1.0" encoding="utf-8" standalone="yes"?>    
<content>
      <FingerPrintUserDetails>
        <UserID>e57645</UserID>
        <UserName>Jill</UserName>
        <FPData>AQAAABQAAAD0AAAAAQASAAEAWgAAAAAA8AAAAHfrWpB6BHZBL10voxpdxu2Km5XVNh*oUNC80Rvpql3RhlqOiBPeet6iRPwb/BdN1fCF4Y/WHbQ40*mqoUKqilgN7bUqNuXP7M299HUWtoAGEO3nDKXXAnHd7dgytZbmHVv*mRBPJDSRw9VY/R1yOIu2cCDlLM*F8Q1lvTfMFDdfwNZynI0e2ZauCF58f0UX56XLFBallaAauxP5mvvhUmcmc6ITg7RhH9wc4181kgPjCuZg38pQepE5U07XIa3hQP8fwxPzdprifXECgB1Z3pTXWQP0q4ZD0Inlbq6Gszo1ucPrhQA0jYQRXtJUVuyBeg</FPData>
        <Address>Pune</Address>
        <ContactNo>848488484884</ContactNo>
      </FingerPrintUserDetails>

      <FingerPrintUserDetails>
        <UserID>444</UserID>
        <UserName>John</UserName>
        <FPData>AQAAABQAAADkAAAAAQASAAEAZAAAAAAA4AAAAPLnmQ8FymAAHWYutR5pdtYvfDVmjsqLeli8tOSTFAtw6AkfA0r8XwrMzp9jFZJI7DlBk4G94BMq55gPEG7uBLZUNYrvhv0jDlDFMOjWGJ9RoWekFveTC*oZ7Tq/xmxuvY6FzLHVo*xzdKQI73Y0f9/eeMC0OgqnbQ3I0IP6cTkkKnTUZJOXKr7IFPHkjJAvCDmU7ec4vG50JHdBJIObmbzVcO0huTUQyE7CR1qYkUjmNFKgVKWPLRupEk4l/Ek0BuAba*9JlhBVUHzZuKbDQLc9lTFwevAgDuuAwxfZaLS*</FPData>
        <Address>nagpur</Address>
        <ContactNo>464645763</ContactNo>
      </FingerPrintUserDetails>

      <FingerPrintUserDetails>
        <UserID>5555</UserID>
        <UserName>Jack</UserName>
        <FPData>AQAAABQAAAAEAQAAAQASAAEAZAAAAAAA9AAAAPz5mQO3uTeXLfU5Mb74XbCX5rERGZFPQMVG1vPpX87306O5oURlYiIe5dasJ2S8NlBZu2UU3zaUpNnB7viYDB6*wfFlgtopn/WdbXW0Yhik3hj8nDreEmaK12To8qfAJx2ooq43i0wBIL*0Jkba*QpHIprSajrhnCg1PjOLMP37sEauJUwXJaoDR/PPQYIxTFE5kf8xzGlJmqiGejD*Y8R3ewU9yIrxkdQ0S//LCdacULt2QvS/I3APo/j0FAgSCOU3SBLdDL6UBPD4fLeEzo7uUIW8gUMThzZX*u2iUuNwJdqWC2NsFtWkUWt03sz3xYQpR8pLA4vrsUmldzUMWe8</FPData>
        <Address>beed</Address>
        <ContactNo>5745745747</ContactNo>
      </FingerPrintUserDetails>

    </content> 
```

C＃：

```
XmlDocument doc = new XmlDocument();
doc.Load("E://BioEnable_Project//fp_project_using_xml//fp_project_using_xml//Capture_Data.xml");
XmlElement root = doc.DocumentElement;
XmlNodeList nodes = root.SelectNodes("FPData");
foreach(XmlElement node in nodes)
{
    MessageBox.Show(node.Value);
} 
```

我必须检查每个节点上的 FPData 值..我使用上面的代码但没有得到..

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-10T11:37:06.117

在您的 XPath 中，提供节点的*完整*路径。

```
XmlNodeList nodes = root.SelectNodes("/content/FingerPrintUserDetails/FPData"); 
```

发生的事情是文档根目录下没有*直接节点。* `FPData`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-10T11:36:06.993

```
XmlNodeList nodes = root.SelectNodes("content/FingerPrintUserDetails"); 
```

它将返回 FingerPrintUserDetails 数组，然后在其中找到 FPData

```
XmlNodeList res = nodes[index].SelectNodes("FPData"); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-10T11:41:06.990

使用 LINQ to XML：

```
 XDocument doc = XDocument.Load("XmlFilePath");
 var selectors = from elements in doc.Elements("content").Elements("FingerPrintUserDetails")
                 select elements;

foreach (var element in selectors)
 {
    MessageBox.Show(element.Element("FPData").Value);
 } 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-10T11:41:17.683

```
XmlDocument doc = new XmlDocument();
doc.Load("E://BioEnable_Project//fp_project_using_xml//fp_project_using_xml//Capture_Data.xml");
XmlNodeList lst =  doc.GetElementsByTagName("FingerPrintUserDetails");

foreach (XmlElement elem in lst)
{
    XmlNode pfData = doc.GetElementsByTagName("FPData")[0];
    MessageBox.Show(pfData.Value);
} 
```

# php - 2 个不同的站点在一个地方

> ID：12350832
> 
> 赞同：0
> 
> 时间：2012-09-10T11:33:27.030
> 
> 标签：php

我试图在一个地方有 2 个不同的站点，第一个站点使用 wordpress，第二个站点没有 wordpress，当访问者来自affiliate.webmediamagazine.com 来加载 wordpress，并直接加载另一个自定义索引时，我正在使用代码以下：

[http://affiliate.webmediamagazine.com/index.php](http://affiliate.webmediamagazine.com/index.php)

```
<form action='http://www.webmediamagazine.com' method='post' name='frm'>
<input type='hidden' name="affiliate" value="yes">
</form>
<script language="JavaScript">
document.frm.submit();
</script> 
```

[http://webmediamagazine.com/index.php](http://webmediamagazine.com/index.php)

```
<?php 
$affiliate = $_POST['affiliate'];
if ($affiliate == yes) {include 'indexwp.php';} 
else {include 'indexcustom.php';}
?> 
```

indexwp.php 是 wordpress 默认的 index.php indexcustom.php 是一个简单的 php 脚本。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T11:36:59.580

这应该在您的服务器（Apache？Nginx？...？）配置文件中配置为虚拟主机。

[Apache 的示例](http://httpd.apache.org/docs/2.2/vhosts/examples.html)

**编辑：**

例如，在共享主机上，您可以将 wordpress 文件放在`~/www/wordpress/`文件夹中。

然后让子域 ( `affiliate.webmediamagazine.com`) 指向该目录。大多数情况下，它可以在您的主机提供的管理面板中完成。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-10T11:40:58.540

如果您真的是这样的意思***...当访问者来自...时***，只需使用简单的重定向：

```
<?

switch ( $_SERVER['HTTP_REFERER'] ) {
    default:
      header( 'Location: /indexcustom.php' ); die;
    break;
    case 'affiliate.webmediamagazine.com':
      header( 'Location: /indexwp.php' ); die;
    break;
}

?> 
```

或者使用**$_SERVER['HTTP_HOST']**，如果您需要知道`domain`访问者所在的位置。

但正如其他人已经说过的那样，在这种情况下，最好将其全部配置为在`apache`干净的 WordPress 安装中使用不同的目录。

*编辑*

你确定你没有忘记代码中的*yes*`'`这个词吗？

 *```
<?php 
    $affiliate = $_POST['affiliate'];
    if ($affiliate == 'yes') { include 'indexwp.php'; } 
    else {include 'indexcustom.php';}
?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-16T18:50:23.963

我现在做到了，使用 php cookie 来存储，但不是从子域存储，而是从目录存储。*

# uml - 如何转换.eap 文件？

> ID：12350833
> 
> 赞同：3
> 
> 时间：2012-09-10T11:33:31.687
> 
> 标签：uml, converter, enterprise-architect, xmi, staruml

我这里有一个情况：

我有一个`.eap`文件，我有一个可用的工具，即**StarUML**。我需要将`.eap`文件内容导入 StarUML。

基本上，我需要知道如何将其转换`.eap`为某种格式以导入**StarUML**。（StarUML 采用`.mfg`并`.xmi`作为导入）

提前致谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-10T15:20:28.563

`.eap`我熟悉的文件是[Enterprise Architect](http://www.sparxsystems.com.au/)。

可能还有另一种方法，但我怀疑您需要获取 EA 的副本并打开您的文件。无论里面有什么模型，打开每个模型并右键单击模型，你会看到一个`Import/Export`菜单。然后您可以导出`.xmi`格式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-05-31T11:28:30.330

**您可以使用MS Access**打开和编辑 eap 文件。

对于在 EA 版本 12.1 中创建的 EAP 文件，它是 Access 2007。

[这](https://leanpub.com/InsideEA/read)是内部结构的概述。

# ios - 刷新子视图？

> ID：12350836
> 
> 赞同：0
> 
> 时间：2012-09-10T11:33:45.967
> 
> 标签：ios, ios5, view, subview, uisegmentedcontrol

我有一个`UISegmentedControl`四段。其中一些`subviews`存在于两个部分中。现在单击一个段，我希望所有子视图都刷新到它们的默认状态。

为了更清楚，如果我有一个带有默认标题的按钮`FootyApps`，在两个段之间共享，并且如果我将一个段中的按钮标题设置为`Hello`，那么在单击 0f 第二段时，我希望按钮显示`FootyApps`而不是“你好” .

这可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T11:35:18.777

您必须手动将其重新设置。没有为您的视图保存“初始”状态。没有办法自动返回。

# magento - magento：onepagecheckout，停留在计费信息上

> ID：12350850
> 
> 赞同：0
> 
> 时间：2012-09-10T11:34:30.877
> 
> 标签：magento, magento-1.7

Magento：onepagecheckout，停留在计费信息上

这是我们得到的回应：

当我查看@ [http://baleinen.com/checkout/onepage/](http://baleinen.com/checkout/onepage/)中的代码时，我找不到一个名为 shipping-method 的块。

任何想法如何解决？（这是 Sentana 模板，我几乎无法想象这以前没有用过）

```
{"goto_section":"shipping_method","update_section":{"name":"shipping-method","html":"    <dl class=\"sp-methods\">
<dt>Betaal en verzendkosten (PostNL)<\/dt>
<dd>
<ul>
<li>
<span class=\"no-display\"><input name=\"shipping_method\" type=\"radio\" value=\"flatrate_flatrate\" id=\"s_method_flatrate_flatrate\" checked=\"checked\" \/><\/span>
<label for=\"s_method_flatrate_flatrate\">NL                                                                        <span class=\"price\">\u20ac\u00a01,25<\/span>                                                <\/label>
<\/li>
<\/ul>
<\/dd>
<\/dl>
<script type=\"text\/javascript\">
\/\/<![CDATA[
var shippingCodePrice = {'flatrate_flatrate':1.25};

$$('input[type=\"radio\"][name=\"shipping_method\"]').each(function(el){
Event.observe(el, 'click', function(){
if (el.checked == true) {
var getShippingCode = el.getValue();
var newPrice = shippingCodePrice[getShippingCode];
if (!lastPrice) {
lastPrice = newPrice;
quoteBaseGrandTotal += newPrice;
}
if (newPrice != lastPrice) {
quoteBaseGrandTotal += (newPrice-lastPrice);
lastPrice = newPrice;
}
checkQuoteBaseGrandTotal = quoteBaseGrandTotal;
return false;
}
});
});
\/\/]]>
<\/script>
"},"allow_sections":["shipping"],"duplicateBillingInfo":"true"} 
```

[http://baleinen.com/checkout/onepage/](http://baleinen.com/checkout/onepage/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-12-26T23:37:44.380

我遇到了 OnePage Checkout 未完成的类似问题。

我必须进行以下更改：

app/design/frontend/base/default/template/checkout/onepage/payment.phtml

找到以下部分：

```
<form action="" id="co-payment-form">
    <fieldset>
        <?php echo $this->getChildHtml('methods') ?>
    </fieldset>
</form> 
```

并向 fieldset 元素添加一个 id：

```
<form action="" id="co-payment-form">
   <fieldset id="checkout-payment-method-load">
        <?php echo $this->getChildHtml('methods') ?>
    </fieldset>
</form> 
```

现在我的结帐进行正常。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-12T17:41:13.230

问题是 Magento JS 试图找到 col-right，但实际上并没有。

这是 col-left 并报告为一个小缺陷，因为它是我在 JS 中硬编码的

# android - 如果可用，请尝试访问 android.os.Build.SERIAL

> ID：12350852
> 
> 赞同：2
> 
> 时间：2012-09-10T11:34:43.233
> 
> 标签：android

下面是一些我用来访问`Build.SERIAL`静态字段的代码，但是在 Android 1.6 上运行时它会崩溃！

```
// introduced in Android 2.3(API Level 9)
if (Integer.parseInt(android.os.Build.VERSION.SDK) >= android.os.Build.VERSION_CODES.GINGERBREAD) {
            deviceID = android.os.Build.SERIAL; //cannot execute here if runs on Android 1.6!!!
} 
```

那是崩溃日志：

```
 DexOpt: couldn't find static field
 W/dalvikvm( 1098): VFY: unable to resolve static field 37 (SERIAL) in Landroid/os/Build;
 W/dalvikvm( 1098): VFY: rejecting opcode 0x62 at 0x0001
 W/dalvikvm( 1098): VFY: rejected Lcom/opera/mini/android/DisplayNotificationService;.getDeviceSerialID ()Ljava/lang/String;
 W/dalvikvm( 1098): Verifier rejected class Lcom/opera/mini/android/DisplayNotificationService;
 W/dalvikvm( 1098): Class init failed in newInstance call (Lcom/opera/mini/android/DisplayNotificationService;)
 D/AndroidRuntime( 1098): Shutting down VM
 W/dalvikvm( 1098): threadid=3: thread exiting with uncaught exception (group=0x4001da10)
 E/AndroidRuntime( 1098): Uncaught handler: thread main exiting due to uncaught exception` 
```

那么如何解决这个问题呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T11:43:02.807

如果您查看 Android[文档](http://developer.android.com/reference/android/os/Build.VERSION_CODES.html#GINGERBREAD)，`android.os.Build.VERSION_CODES.GINGERBREAD`则从 API 级别 9 (Gingerbread) 开始支持。从 If 条件中删除它并以另一种方式进行检查。例如，检查 SDK 是否大于 DONUT，然后执行其他操作来获取串行。

**更新：** 我的意思是这样尝试，例如：

```
if (Integer.parseInt(android.os.Build.VERSION.SDK) >= 9) {
             deviceID = android.os.Build.SERIAL;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-03T08:58:53.930

使用`Build.VERSION.SDK_INT`而不是`Integer.parseInt(android.os.Build.VERSION.SDK)`然后通过数字检查它`Build.VERSION.SDK_INT>9`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-11T13:43:31.260

使用 SDK_INT 而不是 SDK，因为它是整数而不是字符串，并消除了您遇到的比较问题。

这对我有用：

```
if(Build.VERSION.SDK_INT >= 9){
        deviceID = android.os.Build.SERIAL;  
} 
```

# objective-c - 需要有关从石英 2d 中心开始和缩小圆圈的帮助

> ID：12350855
> 
> 赞同：0
> 
> 时间：2012-09-10T11:34:56.993
> 
> 标签：objective-c, ios, quartz-2d

我目前正在开发绘图应用程序，其中有一个滑块来增加和减少线宽。我只想做一个简单的事情，就是在滑块前面放一个圆圈来表示宽度。我很容易做到了，但它没有从中心增长和收缩，它从顶部 x，y 增长和收缩，这是代码

```
- (UIImage *)circleOnImage:(int)size
{
    UIGraphicsBeginImageContext(CGSizeMake(25, 25));

    CGContextRef ctx = UIGraphicsGetCurrentContext();

    [[UIColor blackColor] setFill];

        CGContextTranslateCTM(ctx, 12, 12);//also try to change the coordinate but didn't work

    CGRect circleRect = CGRectMake(0, 0, size, size);

    CGContextFillEllipseInRect(ctx, circleRect);

    UIImage *retImage = UIGraphicsGetImageFromCurrentImageContext();

    UIGraphicsEndImageContext();

    return retImage;
} 
```

![在此处输入图像描述](../Images/bd3532eea88dac314e79e6278e0fb903.png)

![在此处输入图像描述](../Images/96ed9491ef6b82528957ee75cf435e53.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T11:40:50.783

尝试

```
CGContextTranslateCTM(ctx, 12.5, 12.5);
CGRect circleRect = CGRectMake(-size/2., -size/2., size, size); 
```

# ubuntu-11.10 - 在 Ubuntu 上使用缓存和日志配置 Squid3 代理服务器

> ID：12350856
> 
> 赞同：0
> 
> 时间：2012-09-10T11:35:00.350
> 
> 标签：ubuntu-11.10, squid

我有一台 ubuntu 11.10 机器。安装 Squid3。当我将 squid 配置为 http_access allow all 时，一切正常。我目前的配置大多默认如下：

```
2012/09/10 13:19:57| Processing Configuration File: /etc/squid3/squid.conf (depth 0)
2012/09/10 13:19:57| Processing: acl manager proto cache_object
2012/09/10 13:19:57| Processing: acl localhost src 127.0.0.1/32 ::1
2012/09/10 13:19:57| Processing: acl to_localhost dst 127.0.0.0/8 0.0.0.0/32 ::1
2012/09/10 13:19:57| Processing: acl SSL_ports port 443
2012/09/10 13:19:57| Processing: acl Safe_ports port 80     # http
2012/09/10 13:19:57| Processing: acl Safe_ports port 21     # ftp
2012/09/10 13:19:57| Processing: acl Safe_ports port 443        # https
2012/09/10 13:19:57| Processing: acl Safe_ports port 70     # gopher
2012/09/10 13:19:57| Processing: acl Safe_ports port 210        # wais
2012/09/10 13:19:57| Processing: acl Safe_ports port 1025-65535 # unregistered ports
2012/09/10 13:19:57| Processing: acl Safe_ports port 280        # http-mgmt
2012/09/10 13:19:57| Processing: acl Safe_ports port 488        # gss-http
2012/09/10 13:19:57| Processing: acl Safe_ports port 591        # filemaker
2012/09/10 13:19:57| Processing: acl Safe_ports port 777        # multiling http
2012/09/10 13:19:57| Processing: acl CONNECT method CONNECT
2012/09/10 13:19:57| Processing: http_access allow manager localhost
2012/09/10 13:19:57| Processing: http_access deny manager
2012/09/10 13:19:57| Processing: http_access deny !Safe_ports
2012/09/10 13:19:57| Processing: http_access deny CONNECT !SSL_ports
2012/09/10 13:19:57| Processing: http_access allow localhost
2012/09/10 13:19:57| Processing: http_access deny all
2012/09/10 13:19:57| Processing: http_port 3128
2012/09/10 13:19:57| Processing: coredump_dir /var/spool/squid3
2012/09/10 13:19:57| Processing: refresh_pattern ^ftp:      1440    20% 10080
2012/09/10 13:19:57| Processing: refresh_pattern ^gopher:   1440    0%  1440
2012/09/10 13:19:57| Processing: refresh_pattern -i (/cgi-bin/|\?) 0    0%  0
2012/09/10 13:19:57| Processing: refresh_pattern (Release|Packages(.gz)*)$      0       20%     2880
2012/09/10 13:19:57| Processing: refresh_pattern .      0   20% 4320
2012/09/10 13:19:57| Processing: http_access allow all
2012/09/10 13:19:57| Processing: cache_mem 512 MB
2012/09/10 13:19:57| Processing: logformat squid3 %ts.%03tu %6tr %>a %Ss/%03>Hs %<st %rm %ru
2012/09/10 13:19:57| Processing: access_log /home/panshul/squidCache/log/access.log squid3 
```

当我启用以下行时，问题就开始了：

```
access_log /home/panshul/squidCache/log/access.log 
```

我开始进入`proxy server is refusing connections error`浏览器。在我的配置中注释掉上述行后，一切恢复正常。

当我将以下行添加到我的配置时，第二个问题开始了：

```
cache_dir ufs /home/panshul/squidCache/cache 100 16 256 
```

squid 服务器无法启动。

任何建议我在配置中缺少什么。请帮忙。！！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-16T00:53:17.787

尝试在 access_log 指令的末尾添加“squid”。

```
access_log /home/panshul/squidCache/log/access.log squid 
```

解决方案在这里可能... [Ubuntu 论坛 - Squid 配置解决方案](http://ubuntuforums.org/showthread.php?t=1419364)

# node.js - 使用 mongoDB 创建递增的数字

> ID：12350862
> 
> 赞同：0
> 
> 时间：2012-09-10T11:35:13.907
> 
> 标签：node.js, mongodb, auto-increment

我们有一个订单系统，其中每个订单都有一个 ID。出于会计目的，我们需要一种方法来生成具有递增数字的发票。不使用 sql 数据库的最佳方法是什么？我们正在使用节点来实现应用程序。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-10T11:40:10.033

[http://www.mongodb.org/display/DOCS/How+to+Make+an+Auto+Incrementing+Field](http://www.mongodb.org/display/DOCS/How+to+Make+an+Auto+Incrementing+Field)

第一种方法是将计数器保存在辅助文档中：

> 可以将当前 _id 的计数器保存在边文档中，在专用于计数器的集合中。然后使用 FindAndModify 原子地获取一个 id 并递增计数器。

另一种方法是乐观地循环并通过继续并增加碰撞边缘情况的 id 来处理 11000 的 dup key 错误代码。除非对特定集合进行高并发写入，否则效果很好。

> 可以通过乐观并发“如果不存在则插入”循环来做到这一点。

但请注意该页面上的警告：

> 通常在 MongoDB 中，不会对 _id（或其他字段）使用自动增量模式，因为这在大型数据库集群上不能很好地扩展。相反，通常使用对象 ID。

其他需要考虑的事项：

*   [时间戳](http://www.mongodb.org/display/DOCS/Timestamp+data+type)- 唯一长但不递增（基于纪元）
*   混合方法 - 应用程序不一定要选择一种存储选项。
*   根据您生成和处理冲突的客户、日期/时间部分等内容提出您的 id 机制。根据方案，冲突的可能性要小得多。不一定是递增的，但它是唯一的，并且具有明确定义的可读模式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-06-04T20:04:00.987

我没有找到任何可行的解决方案，所以我在 node.js 中实现了“乐观循环”来获取自动递增的整数 ID 字段。使用 async 模块实现 while 循环。

```
// Insert the document to the targetCollection. Use auto-incremented integer IDs instead of UIDs. 
function insertDocument(targetCollection, document, callback) {
    var keepRunning = true;
    var seq = 1;
    // $type 16/18: Integer Values
    var isNumericQuery = {$or : [{"_id" : { $type : 16 }}, {"_id" : { $type : 18 }}]};
    async.whilst(testFunction, mainFunction, afterFinishFunction);
    // Called before each execution of mainFunction(). Works like the stop criteria of a while function.
    function testFunction() { 
        return keepRunning; 
    }
    // Called each time the testFunction() passes. It is passed a function (next) which must be called after it has completed.
    function mainFunction(next) {
        findCursor(targetCollection, findCursorCallback, isNumericQuery, { _id: 1 });
        function findCursorCallback(cursor) {
            cursor.sort( { _id: -1 } ).limit(1);
            cursor.each(cursorEachCallback);
        }
        function cursorEachCallback(err, doc) {
            if (err) console.error("ERROR: " + err);
            if (doc != null) {
                seq = doc._id + 1;
                document._id = seq;
                targetCollection.insert(document, insertCallback);
            }
            if (seq === 1) {
                document._id = 1;
                targetCollection.insert(document, insertCallback);
            }
        }
        function insertCallback(err, result) {
            if (err) {
                console.dir(err);
            }
            else {
                keepRunning = false;
            }
            next();
        }
    }
    // Called once after the testFunction() fails and the loop has ended. 
    function afterFinishFunction(err) {
        callback(err, null);
    }
}

// Call find() with optional query and projection criteria and return the cursor object.
function findCursor(collection, callback, optQueryObject, optProjectionObject) {
    if (optProjectionObject === undefined) {
        optProjectionObject = {};
    }
    var cursor = collection.find(optQueryObject, optProjectionObject);
    callback(cursor);
} 
```

打电话给

`insertDocument(db.collection(collectionName), documentToSave, function() {if(err) console.error(err);});`

# model - 获取系统型号 # -- 带有擦除的硬盘驱动器

> ID：12350867
> 
> 赞同：0
> 
> 时间：2012-09-10T11:35:26.443
> 
> 标签：model, dos, mode

我正在尝试制作一个 Symantec Ghost 启动盘版本，它会自动检查系统型号，并选择该型号所需的 NIC 驱动程序。除了获取实际模型#，我一切正常。即使硬盘驱动器已被完全擦除，我也需要能够获取它，因为它是从 dos 启动盘运行的。

我已经尝试了几个命令——wmic、systeminfo——所有这些在windows中都可以正常工作，但我需要一个可以在dos模式下运行的命令，显然这些不能。

关于可以帮助我的实用程序和/或命令的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T11:43:13.400

您也许可以编写一小段代码并直接调用 BIOS API。

有关（古代）示例，请参见[http://www.cs.ubbcluj.ro/~forest/HtmlFolder/AC/NG/ng897c4.html ：](http://www.cs.ubbcluj.ro/~forest/HtmlFolder/AC/NG/ng897c4.html)

```
INT 15h,  C0h (192)      Return System Configuration                     many

    Reports the machine model number, sub-model number, BIOS revision
    level, and other hardware-specific attributes.

       On entry:      AH         C0h

       Returns:       Carry      Set if error, else cleared
                      AH         0
                      ES:BX      Pointer to a System Descriptor Table

  --------------------------------------------------------------------------

       Notes:         This service is not available for the PC, PCjr, XT
                      dated 11/08/82, and the AT dated 1/10/84\. Use the
                      return state of AH to determine if the service is
                      returning valid information.

  System Descriptor Table

          Description              Length (byte)      Value
          Table length                   1              8
          System model number            1              ?
          Sub-model number               1              ?
          Bios Revision level            1              ?
          Feature Information            1              ?
          Reserved                       4              0 
```

这是[所有调用的维基百科列表](http://en.wikipedia.org/wiki/BIOS_interrupt_call)，我很确定在选择的编译器（例如 Turbo C 等）中也会有一个函数来执行此操作。

# javascript - 为什么这个 jQuery 像小提琴一样工作，但不在我的网页上？

> ID：12350868
> 
> 赞同：0
> 
> 时间：2012-09-10T11:35:29.060
> 
> 标签：javascript, jquery, jsfiddle

我已经为这个小提琴（[http://jsfiddle.net/hgGfw/](http://jsfiddle.net/hgGfw/)），我一直在关注一个滑块教程，这就是我得到的代码。它使用了一个自调用函数（我认为这就是它的名字？？）。无论如何，它适用于在小提琴上设置为“onLoad”的 jQuery，但是当它在我的服务器上时，它什么也不做，直到它被包装在 $(document).ready(.... 脚本中。为什么会这样？JSLint 也抱怨这;

```
( direction === 'next' ) ? ++current : --current; 
```

知道为什么吗？我的 PHP 还不错，所以我知道该语句的语法，而且它看起来不错。

谢谢，丹。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T11:40:01.613

如果您将 javascript / jquery 放入[http://jsfiddle.net](http://jsfiddle.net)`JavaScript`的面板中，它会自动将您的代码放入一个块中（当框架下拉菜单设置为和一个选项时）。`$(window).load(function(){ }``onLoad``jQuery`

如果您查看结果窗格的**框架源**，您应该会看到这种情况。

至于为什么 JSLint 不喜欢这个命令，我*猜*它期待一个赋值（尽管你正在对`current`变量进行递增/递减）。

如果将值分配给变量，JSLint 会很高兴。IE..

```
var tempVar = ( direction === 'next' ) ? ++current : --current; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-10T11:46:02.833

我怀疑 JSLint 抱怨是因为三元运算符旨在为表达式选择一个值，而不是选择一个执行路径。

在这里，您将它用作“if”语句的简写，这将起作用，但有点不寻常。

# filtering - 在 Dynamics CRM 2011 中按关系过滤子网格

> ID：12350872
> 
> 赞同：0
> 
> 时间：2012-09-10T11:35:47.263
> 
> 标签：filtering, dynamics-crm-2011, crm, microsoft-dynamics, subgrid

这是一个测试项目。我有一个名为“教室”的实体，还有一个名为“学生”的实体。

我在 Classroom with Students 中定义了“1-N”关系。

课堂上的表格有一个由学生填充的子网格。

我愿意做的是只用那个班级的学生填充子网格。目前所有学生都出现在子网格中。有没有办法做到这一点？

提前感谢您在 Google 搜索中错过的任何解释或教程链接。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T11:46:40.163

在它下面选择“仅相关字段”似乎可以解决问题。这不是一个完美的解释，只是将问题标记为已关闭。希望这对将来的某人有所帮助。

# mongodb - MongoDB中唯一索引的优势

> ID：12350879
> 
> 赞同：11
> 
> 时间：2012-09-10T11:36:15.583
> 
> 标签：mongodb, unique-index, mongodb-indexes

我试图搜索 Mongo 文档，但无法真正找到有关唯一索引查询是否比非唯一索引查询更快的任何详细信息（给定相同的数据）

所以我理解唯一索引将具有高选择性和良好的性能。但是，给定两个连接唯一的字段，非唯一复合索引的执行速度会比唯一复合索引慢吗？

我假设唯一索引可以减慢插入速度，因为必须验证唯一性。但是，唯一索引的读取性能提升（如果有的话）真的值得吗？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-09-10T11:51:17.993

源树的快速 grep 似乎表明唯一索引仅在插入时使用，因此在返回一个文档的查询之间不应该有任何性能优势或损害，无论索引是否唯一。

MongoDB 索引是作为 btree 实现的，因此无论索引是否唯一，它们执行任何不同的操作都没有任何逻辑意义。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-25T13:08:07.233

我对那个主题做了自己的小研究。我在一个集合中生成了 500,000 条记录（随机生成的字符串），并使用 explain() 语句尝试了几个查询。![没有索引的 db.test.find()](../Images/8b4b7e6347735855d809c5c4227cc6e6.png)

然后我确保了一个唯一的索引，并再次尝试了一些其他查询：![具有唯一索引的 db.test.find()](../Images/63c9d942dd121f8e20d1517895eaabd9.png)

如您所见，添加索引后，时间消耗从 ~276ms 减少到 0ms！所以看起来即使索引是唯一的，它也会（以积极的方式）影响查找查询。

# android - 在 Android ICS 中插入日历项目

> ID：12350880
> 
> 赞同：4
> 
> 时间：2012-09-10T11:36:22.200
> 
> 标签：android, calendar, android-contentprovider

对于我的一个应用程序，我们必须在日历中插入一个事件。

```
long calID = 3;
long startMillis = 0; 
long endMillis = 0;     
Calendar beginTime = Calendar.getInstance();
beginTime.set(2012, 8, 10, 7, 30);
startMillis = beginTime.getTimeInMillis();
Calendar endTime = Calendar.getInstance();
endTime.set(2012, 8, 10, 8, 45);
endMillis = endTime.getTimeInMillis();
ContentResolver cr = getContentResolver();
ContentValues values = new ContentValues();
values.put(Events.DTSTART, startMillis);
values.put(Events.DTEND, endMillis);
values.put(Events.TITLE, "Jazzercise");
values.put(Events.DESCRIPTION, "Group workout");
values.put(Events.CALENDAR_ID, calID);
values.put(Events.EVENT_TIMEZONE, "America/Los_Angeles");
Uri uri = cr.insert(CalendarContract.Calendars.CONTENT_URI, values);
// get the event ID that is the last element in the Uri
long eventID = Long.parseLong(uri.getLastPathSegment());
Log.d("MainActivity", "addCalendarEvents :: " + "eventID :: "+eventID);

Cursor cursor = cr.query(Events.CONTENT_URI, null, Events.TITLE +"='Jazzercise'", null, null);
Log.d("MainActivity", "addCalendarEvents :: " + "cursor :: "+cursor.getCount()); 
```

在[http://developer.android.com/guide/topics/providers/calendar-provider.html](http://developer.android.com/guide/topics/providers/calendar-provider.html)上提供 但是，首先它给了我一个错误

```
 Failed to get type for: content://com.android.calendar (Unknown URL content://com.android.calendar) 
```

游标计数也为零。当我尝试使用标题搜索时。注意：我尝试使用意图服务添加事件，但是我不希望用户在添加事件时自行决定。

我已经在 Galaxy Nexus (4.1) 和 Nexus S(4.1) 上对其进行了测试。

对要与 ICS 一起使用的正确 UI 有任何帮助吗？

BR，杰​​希尔

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-06-15T14:32:02.443

我已经想通了。该行：

```
Failed to get type for: content://com.android.calendar (Unknown URL content://com.android.calendar) 
```

**是一个完全的红鲱鱼（即无关紧要）。**它只是一些执行基础设施工作的框架代码，[如此处所示](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android-apps/4.0.4_r1.2/com/android/providers/calendar/CalendarProvider2.java#4454)。

* * *

问题出在文档中——如果你像我一样，你可能希望`long calID = 3;`得到一些有效的日历 ID。**它不是一个有效的 ID，它是一个用于记录的占位符**。

如果您使用的是空模拟器，那么您对上面的代码所做的就是将一个条目插入到一个不存在的日历中，即无处可见。

你需要的是：

1.  [查询并选择现有日历](http://developer.android.com/guide/topics/providers/calendar-provider.html#query)。再一次 -**在模拟器上，没有默认日历**。
2.  使用获取的实际日历 ID 插入事件。

简而言之 - 文档和调试消息不够白痴；）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T12:03:05.620

您在 Manifest 文件中是否拥有正确的权限？

```
<uses-permission android:name="android.permission.READ_CALENDAR" />
<uses-permission android:name="android.permission.WRITE_CALENDAR" /> 
```

这可能是您看到的错误的部分原因。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-28T10:38:25.497

```
content://com.android.calendar - problem is here. 
```

它的日历。

试试这个代码：

```
Uri mCalendarsUri;
if (Build.VERSION.SDK_INT >= 8) {
    mCalendarsUri = Uri.parse("content://com.android.calendar/calendars");
} else {
    mCalendarsUri = Uri.parse("content://calendar/calendars");
} 
```

# android - 在由 BroadcastReceiver 启动的 IntentService 中使用 Handler

> ID：12350884
> 
> 赞同：0
> 
> 时间：2012-09-10T11:36:30.257
> 
> 标签：android, handler

我想使用 a `IntentService`（从 a 开始`BroadcastReceiver`）从 Internet 下载文件，但我想通知用户文件是否下载成功以及是否已下载以解析文件。`handleMessage`在我的内部使用处理程序`IntentService`是一个很好的解决方案吗？从我读到`IntentServices`的是简单的工作线程在处理意图后过期，那么处理程序是否有可能不处理消息？

```
private void downloadResource(final String source, final File destination) {
    Thread fileDownload = new Thread(new Runnable() {
        @Override
        public void run() {
            try {
                URL url = new URL(source);
                HttpURLConnection urlConnection = (HttpURLConnection)
                                               url.openConnection();
                urlConnection.setRequestMethod("GET");
                urlConnection.setDoOutput(true);
                urlConnection.connect();

                FileOutputStream fileOutput = new FileOutputStream(destination);
                InputStream inputStream = urlConnection.getInputStream();

                byte[] buffer = new byte[1024];
                int bufferLength;

                while ((bufferLength = inputStream.read(buffer)) > 0) {
                    fileOutput.write(buffer, 0, bufferLength);
                }
                fileOutput.close();

                // parse the downloaded file ?
            } catch (Exception e) {
                e.printStackTrace();
                destination.delete();
            }
        }
    });
    fileDownload.start();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T11:41:15.093

如果您只想创建一个通知来通知用户，那么您可以在 IntentService 中下载后执行此操作（请参阅[在 Android 中从服务发送通知](https://stackoverflow.com/questions/1207269/sending-a-notification-from-a-service-in-android)）

如果您想显示更详细的 UI（通过 Activity），那么您可能希望使用 startActivity() 方法启动您的应用程序的一个活动（请参阅[android start activity from service](https://stackoverflow.com/questions/3606596/android-start-activity-from-service)）

如果您不需要任何 UI 内容，只需`IntentService`在下载后在右侧进行解析即可。

# clearcase - 可以制作指向不同分支的 Clearcase 配置规范吗？

> ID：12350885
> 
> 赞同：2
> 
> 时间：2012-09-10T11:36:45.390
> 
> 标签：clearcase

我们正在尝试建立一个复杂的项目，并且我们正在尝试限制视图和分支的数量。
我们在 UCM ClearCase 中工作，其中不同的组独立工作，然后在一切通过测试后合并到一个合并分支中。

是否有可能将我们的新视图的配置规范指向几个不同的分支？
如果是这样，我们需要考虑什么吗？
也许有人可以发布他们创建的示例？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T11:55:47.680

UCM 视图始终与*一个*Stream 相关，因此使用*一个*分支（如果该 Stream 包含可修改的组件）

一个基本的 ClearCase 视图可以配置为监视多个分支，但只有一个规则（可以应用于给定文件版本的最后一个规则）将占上风，即只选择一个分支。

所以这是不可能的。

# java - Ant Build 使用 itext jar 时出错

> ID：12350889
> 
> 赞同：1
> 
> 时间：2012-09-10T11:36:52.810
> 
> 标签：java, swing, ant

```
 [javac] symbol  : method setDocumentFromString(java.lang.String)
    [javac] location: class org.xhtmlrenderer.pdf.ITextRenderer
    [javac]         renderer.setDocumentFromString(html);
    [javac]                 ^
    [javac] Note: Some input files use or override a deprecated API.
    [javac] Note: Recompile with -Xlint:deprecation for details.
    [javac] Note: Some input files use unchecked or unsafe operations.
    [javac] Note: Recompile with -Xlint:unchecked for details.
    [javac] 1 error 
```

我得到这个错误.im使用带有ant build的itext jars

de.huxhorn.lilith.3rdparty.flyingsaucer.core-renderer-8RC1.jar / itext-2.0.8.jar

这适用于 PSVM ...并且在 ide 中没有显示编译错误.. 但是当我运行 ANt 构建时，出现此错误..

为什么会这样？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T11:44:07.620

依赖 jar 可能未正确添加到您的构建类路径中，并且您的 IDE 将其包含在构建路径中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-10T11:44:47.547

看起来由 Ant 构建解析的 jar 中的 org.xhtmlrenderer.pdf.ITextRenderer 类不包含方法“setDocumentFromString”

你能看看你的罐子并确保该方法确实存在吗？

# wcf - Windows 8 App 和 WCF REST 服务之间的安全连接

> ID：12350894
> 
> 赞同：0
> 
> 时间：2012-09-10T11:37:05.623
> 
> 标签：wcf, ssl, azure, windows-8

我有一个托管在 Windows Azure 上的 WCF 服务和一个 Windows 8 应用程序，该应用程序当前使用来自其他基于 WCF 服务的数据。

该服务托管在 abc.cloudapp.net 上，尽管目前任何人都可以访问它，但我想限制对我的应用程序用户的访问。

我不能要求用户输入用户名和密码，也不能在应用程序中存储加密数据，因为我不能确定我的 Windows 8 应用程序是否会被混淆。

SSL 似乎是唯一的方法——但是 SSL 证书的设置需要一个 CSR，我认为它不能应用于托管在 azure 上的服务。

我正在寻找一个分步指南来保护应用程序和服务之间的通信以及防止未经授权的访问。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T11:57:36.257

REST 服务使用 HTTP 标准。SSL 是确保数据传输安全的默认机制。身份验证是一个实现问题。

两个链接可帮助您进行开发：

[Azure 上的 SSL](http://msdn.microsoft.com/en-us/library/windowsazure/ff795779.aspx)

[基于 REST 的身份验证](http://www.berenddeboer.net/rest/authentication.html)

问候。

# paypal - paypal遇到10481错误

> ID：12350900
> 
> 赞同：5
> 
> 时间：2012-09-10T11:37:27.690
> 
> 标签：paypal

有谁知道“单方面和非凭据身份验证不允许PaymentAction of Authorization”是什么意思？我在尝试使用贝宝实施授权和捕获交易时遇到此错误。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-05-29T13:07:13.140

当 SUBJECT 电子邮件地址属于已注册的 Paypal 帐户时，会发生这种情况，但 SUBJECT 帐户不允许授权。

*背景：* 让我们拥有已知 API 凭证的账户 A 和属于第三方商家的账户 B，账户 A 代表其调用 API 操作。为了完成授权，您使用 A 的 API 凭据和 B 的电子邮件作为 SUBJECT 调用 DoExpressCheckoutPayment 方法。除非您允许账户 A 授权向账户 B 付款，否则此操作将失败。

*如何启用授权和获取权限：* 登录账户B，选择“我的账户”选项卡，点击“个人资料”子选项卡。有一个名为“帐户信息”的列，其中选择“API 访问链接”。然后单击“添加或编辑 API 权限”。在这里您可以添加新的第三方。键入帐户电子邮件作为“第三方许可用户名”并选中“授权并捕获您的 PayPal 交易”。最后点击“添加”保存。确保您还检查了授权之前的必要操作，例如“使用 Express Checkout 处理付款”。现在 A 可以授权向 B 付款 :)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-10T20:28:57.033

你在设置“主题”吗？
如果是这样，则“SUBJECT”中的电子邮件地址不属于现有的 PayPal 帐户。

# jquery - Jquery .ajax 成功更新动态 div

> ID：12350901
> 
> 赞同：0
> 
> 时间：2012-09-10T11:37:35.293
> 
> 标签：jquery, html, ajax, forms

我有一个页面，其中包含从数据库生成的许多不同表单。每个表单在底部都有一个 div 用于加载数据。这些具有动态 ID：tempdiv_1 tempdiv_2 等。

我正在尝试让 jquery 工作以根据 this.input.val 之类的内容更新 div，这是带有部分 ID 的隐藏输入。

### 代码：

```
<script type="text/javascript">
$('#formdataAddForm').live('submit' , function() { // catch the form's submit event
   $.ajax({ // create an AJAX call...
        data: $(this).serialize(), // get the form data
        type: $(this).attr('method'), // GET or POST
        url: $(this).attr('action'), // the file to call
        success: function(response,data) { // on success..
            $.fancybox({
            maxWidth    : 800,
            maxHeight   : 200,
            fitToView   : false,
            width       : '70%',
            height      : '70%',
            autoSize    : false,
            closeClick  : false,
            openEffect  : 'none',
            closeEffect : 'none',
            content     : response
        });
        $('#tempdiv_'+(('input[id="formdataSection"]', form).val())).load('/page/list.php');
    }
});
return false; // cancel original event to prevent form submitting
});
</script> 
```

我无法开始工作的地方是这样的：

```
 $('#tempdiv_'+(('input[id="formdataSection"]', form).val())).load('/page/list.php'); 
```

如何让 jquery 更新动态 div？这些表格都有相同的 ID，所以我不能调用表格 ID。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T11:56:30.547

试试这个代码：

```
 <script type="text/javascript">
   $('#formdataAddForm').live('submit' , function() { // catch the form's submit event
   var form = $(this)
   $.ajax({ // create an AJAX call...
        data: $(this).serialize(), // get the form data
        type: $(this).attr('method'), // GET or POST
        url: $(this).attr('action'), // the file to call
        success: function(response,data) { // on success..
            $.fancybox({
            maxWidth    : 800,
            maxHeight   : 200,
            fitToView   : false,
            width       : '70%',
            height      : '70%',
            autoSize    : false,
            closeClick  : false,
            openEffect  : 'none',
            closeEffect : 'none',
            content     : response
        });
        $('#tempdiv_'+($('input[id="formdataSection"]', form).val())).load('/page/list.php');
    }
});
return false; // cancel original event to prevent form submitting
});
</script> 
```

如果您问题中的代码与您尝试运行的代码相同 - 这应该会有所帮助。在您的代码表单变量中未定义，您在此行中错过了 $：`$('#tempdiv_'+($('input[id="formdataSection"]', form).val())).load('/page/list.php');`

此外，如果您将使用`name`属性而不是`id`用于存储 div id 的输入，那会更好。ID 必须是唯一的，并且名称 - 否。假设表单上下文（中的第二个参数`$('input[id="formdataSection"]', form)`）应该有助于找到正确的值（我记得，我一直在成功地尝试类似的方法），但名称更可靠和有效。

# python - unittest - 导入错误

> ID：12350907
> 
> 赞同：1
> 
> 时间：2012-09-10T11:38:10.723
> 
> 标签：python, testing, selenium, web2py

我正在关注web2py 上的本[教程，您可以在其中创建一个测试驱动的环境。](http://killer-web-development.com/section/4/3)但是，当我尝试使用 unittest, selenium 运行测试时，我收到此错误：

```
$ python functional_tests.py
running tests
Traceback (most recent call last):
  File "functional_tests.py", line 56, in <module>
    run_functional_tests()
  File "functional_tests.py", line 46, in run_functional_tests
    tests = unittest.defaultTestLoader.discover('fts')
  File "/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/unittest/loader.py", line 202, in discover
    raise ImportError('Start directory is not importable: %r' % start_dir)
ImportError: Start directory is not importable: 'fts' 
```

这就是functional_tests.py 的样子：

```
#!/usr/bin/env python
try: import unittest2 as unittest #for Python <= 2.6
except: import unittest
import sys, urllib2
sys.path.append('./fts/lib')
from selenium import webdriver
import subprocess
import sys
import os.path

ROOT = 'http://localhost:8001'

class FunctionalTest(unittest.TestCase):

    @classmethod
    def setUpClass(self):
        self.web2py = start_web2py_server()
        self.browser = webdriver.Firefox()
        self.browser.implicitly_wait(1)

    @classmethod    
    def tearDownClass(self):
        self.browser.close()
        self.web2py.kill()

    def get_response_code(self, url):
        """Returns the response code of the given url

        url     the url to check for 
        return  the response code of the given url
        """
        handler = urllib2.urlopen(url)
        return handler.getcode()

def start_web2py_server():
    #noreload ensures single process
    print os.path.curdir    
    return subprocess.Popen([
            'python', '../../web2py.py', 'runserver', '-a "passwd"', '-p 8001'
    ])

def run_functional_tests(pattern=None):
    print 'running tests'
    if pattern is None:
        tests = unittest.defaultTestLoader.discover('fts')
    else:
        pattern_with_globs = '*%s*' % (pattern,)
        tests = unittest.defaultTestLoader.discover('fts', pattern=pattern_with_globs)

    runner = unittest.TextTestRunner()
    runner.run(tests)

if __name__ == '__main__':
    if len(sys.argv) == 1:
        run_functional_tests()
    else:
        run_functional_tests(pattern=sys.argv[1]) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T12:02:14.827

我通过用完整路径替换 fts 解决了这个问题，即 /home/simon/web2py/applications/testapp/fts

希望这可以帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T05:10:50.737

我遇到了同样的问题，并且基于一篇[使用 web2py 进行单元测试](http://web2py.com/AlterEgo/default/show/260)的优秀文章，我通过执行以下操作来实现这一点：

1.  在 tukker 目录下创建一个测试文件夹
2.  将修改后的代码（如下）复制/保存到测试文件夹中作为 alt_functional_tests.py
3.  将 start_web2py_server 函数中的 web2py 路径更改为您自己的路径
4.  要运行，输入命令：python web2py.py -S tukker -M -R applications/tukker/tests/alt_functional_tests.py

我不是专家，但希望这也对你有用。

* * *

```
import unittest

from selenium import webdriver

import subprocess

import urllib2

execfile("applications/tukker/controllers/default.py", globals())

ROOT = 'http://localhost:8001'

def start_web2py_server():
    return subprocess.Popen([
        'python', '/home/alan/web2py/web2py/web2py.py', 'runserver',
         '-a "passwd"', '-p 8001' ])

class FunctionalTest(unittest.TestCase):

    @classmethod
    def setUpClass(self):
        self.web2py = start_web2py_server()
        self.browser = webdriver.Firefox()
        self.browser.implicitly_wait(1)

    @classmethod    
    def tearDownClass(self):
        self.browser.close()
        self.web2py.kill()

    def get_response_code(self, url):
        """Returns the response code of the given url
        url     the url to check for 
        return  the response code of the given url
        """
        handler = urllib2.urlopen(url)
        return handler.getcode()

    def test_can_view_home_page(self):
        # John opens his browser and goes to the home-page of the tukker app
        self.browser.get(ROOT + '/tukker/')
        # He's looking at homepage and sees Heading "Messages With 300 Chars"
        body = self.browser.find_element_by_tag_name('body')
        self.assertIn('Messages With 300 Chars', body.text)

suite = unittest.TestSuite()
suite.addTest(unittest.makeSuite(FunctionalTest))
unittest.TextTestRunner(verbosity=2).run(suite) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-24T18:46:51.210

首先，您必须对 fts/functional_tests.py 中的错误路径进行一些更改

搜索

```
'python', '../../web2py.py', 'runserver', '-a "passwd"', '-p 8001' 
```

并将其更改为

```
'python', '../../../web2py.py', 'runserver', '-a "passwd"', '-p 8001' 
```

然后

```
tests = unittest.defaultTestLoader.discover('fts') 
```

到

```
tests = unittest.defaultTestLoader.discover('.') 
```

然后

```
tests = unittest.defaultTestLoader.discover('fts', pattern=pattern_with_globs) 
```

到

```
tests = unittest.defaultTestLoader.discover('.', pattern=pattern_with_globs) 
```

和

```
sys.path.append('fts/lib') 
```

到

```
sys.path.append('./lib') 
```

# avr - 如何读取 atmega 32 签名行？

> ID：12350914
> 
> 赞同：1
> 
> 时间：2012-09-10T11:38:29.397
> 
> 标签：avr, avr-gcc, atmega, avr-studio5

我试图读取 atmega32 的签名行，`boot_signature_byte_get(0);`但出现此错误：`'SIGRD' undeclared (first use in this function)`这似乎是因为我们只能使用 SPMCR 中具有 SIGRD 位的 AVR 读取签名（我想！）。
这是正确的吗？那么我该如何以另一种方式阅读签名行？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T22:14:05.727

早在 2007 年，任何头部都没有读取签名字节的功能，然后在同年推出。但看起来，它仍然存在一些问题。

数据表说：

```
All Atmel microcontrollers have a three-byte signature code which identifies the device.
This code can be read in both serial and parallel mode, also when the device is locked.
The three bytes reside in a separate address space. 
```

这意味着 ATMEGA32 可以读取该字节。同样在数据表中，它指定了如何读取该字节。在他们的大多数 MCU 中，它的读取方式相同，但由于某种原因，`SIGRD`一些头文件中缺少定义号，包括 ATMEGA32 之一。

但是，作为一种解决方法，我们可以`SIGRD`手动定义。我们只需要知道它的价值。当我在头文件中做一些`findstr`（或`grep`）搜索这个定义时，一致认为它的值为 5。

因此，解决方法是：

```
#define SIGRD 5
#include <avr/boot.h> 
```

我编译成功了，但我只是尝试在模拟软件上测试程序，因为我现在没有 ATMEGA32。它返回一个字节，所以现在由您决定这是否是正确的字节......

关于你说的SPMCR这件事，好像签名行是在另外一个地址空间（据我了解，不知道对不对我无法确认），获取方式是使用一些指令, 同样当我们将一些程序上传到 MCU 时。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-08-24T00:02:53.190

当我今晚面临同样的问题时，我想加强一点并说明弗拉维奥的答案。

> 那么我该如何以另一种方式阅读签名行？

Flavio 的解决方法做得很好：

```
#define SIGRD 5
#include <avr/boot.h>

void read_signature_row(uint8_t sr[3])
{
  sr[0] = boot_signature_byte_get(0x0000);
  sr[1] = boot_signature_byte_get(0x0002);
  sr[2] = boot_signature_byte_get(0x0004);
}

void setup()
{
  Serial.begin(9600);
  delay(100);

  uint8_t sr[3] = {0xcc, 0xcc, 0xcc};
  read_signature_row(sr);

  char buff[100];
  snprintf(buff, sizeof buff, "Device signature: %02X %02X %02X", sr[0], sr[1], sr[2]);
  Serial.println(buff);
}

void loop()
{} 
```

我没有 ATmega32，尽管此方法为我的 ATmega328P (1E 95 0F) 和 ATmega168PA (1E 94 0B) 检索正​​确的签名。

> 似乎这是因为我们只能使用 SPMCR 中具有 SIGRD 位的 AVR 读取签名（我想！）。这是正确的吗？

不，它实际上在调用 LPM 之前将 SIGRD 设置为 SPMCR，如下所示`avr/boot.h`：

```
#define __BOOT_SIGROW_READ (_BV(__SPM_ENABLE) | _BV(SIGRD))
#define boot_signature_byte_get(addr) \
(__extension__({                      \
      uint8_t __result;                         \
      __asm__ __volatile__                      \
      (                                         \
        "sts %1, %2\n\t"                        \
        "lpm %0, Z" "\n\t"                      \
        : "=r" (__result)                       \
        : "i" (_SFR_MEM_ADDR(__SPM_REG)),       \
          "r" ((uint8_t)(__BOOT_SIGROW_READ)),  \
          "z" ((uint16_t)(addr))                \
      );                                        \
      __result;                                 \
})) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-09-27T11:32:10.313

**我相信 atmega32 不支持读取用户程序中的签名字节。**

**atmega32** Datasheet 显示该**器件在其寄存器 SPMCR 中没有称为 SIGRD**的位，该寄存器的第五位保留并标记为只读。

atmega640 **/1280/2560**处理器**有一个类似的寄存器**，称为**spmcSr**，它有这个**位 SIGRD (Bit 5)**。但数据表说明不应使用此位，因为此操作保留供将来使用（尽管如此，此处解释了读取签名的过程）。

您的编译器可以正常工作，因为 atmega32 没有此 SIGRD 位。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-04-04T02:59:27.433

SIGRD 存在并可用于**ATmega164A/164PA/324A/324PA/644A/644PA/1284/1284P**处理器。“保留供将来使用”备注仅适用于除 SPMCSR 的五个最低位之外的任何 SPM 指令，请参见第 285 页，第 26.9.1 节。

# antlr - ANTLR AST 语法问题不匹配的令牌异常

> ID：12350915
> 
> 赞同：1
> 
> 时间：2012-09-10T11:38:37.167
> 
> 标签：antlr

我真正的语法要复杂得多，但我可以解决我的问题。所以这是语法：

```
grammar test2;
options {language=CSharp3;}

@parser::namespace { Test.Parser }
@lexer::namespace { Test.Parser }

start   : 'VERSION' INT INT project;

project :   START 'project' NAME TEXT END 'project';

START: '/begin';
END: '/end';

WS  :   ( ' '
        | '\t'
        | '\r'
        | '\n'
        ) {$channel=HIDDEN;}
    ;

    INT :   '0'..'9'+;

    NAME:   ('a'..'z' | 'A'..'Z')+;

    TEXT  :  '"'  ( '\\' (.) |'"''"' |~( '\\' | '"' | '\n' | '\r' ) )* '"';

    STARTA 
        :   '/begin hello'; 
```

我想解析这个（例如）：

> 版本 1 1
> 
> /开始项目
> 
> 测试项目“描述在这里”
> 
> /结尾
> 
> 项目

现在它不会像这样工作（不匹配的令牌异常）。如果我删除最后一个令牌 STARTA，它就可以工作。但为什么？我不明白。

非常感谢您的帮助。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T12:52:23.557

当词法分析器*看到*输入`"/begin "`（包括空格！）时，它会提交到规则`STARTA`。当它无法匹配所述规则时，因为输入中的下一个字符是`"p"`(from `"project"`) 而不是`"h"`(from `"hello"`)，它会尝试匹配另一个可以匹配`"/begin "`的规则（包括空格！）。但是没有这样的规则，会产生错误：

> `mismatched character 'p' expecting 'h'`

并且词法分析器**不会**放弃空间并匹配`START`规则。

记住最后一部分：一旦词法分析器匹配了某些东西，它就不会放弃它。它可能会尝试匹配相同输入的其他规则，但它不会回溯匹配匹配较少字符的规则！

这就是词法分析器在 ANTLR 3.x 中的工作方式，无法绕过它。

# git - 如何更改使用--bare 克隆的git 存储库以匹配使用--mirror 克隆的git 存储库？

> ID：12350918
> 
> 赞同：9
> 
> 时间：2012-09-10T11:38:43.683
> 
> 标签：git, version-control, git-push

这个问题与[git 不同 - 如何从其他仓库镜像文件](https://stackoverflow.com/questions/7427413/git-how-to-mirror-file-from-other-repo)或[如何更新我的裸仓库？](https://stackoverflow.com/questions/3382679/git-how-do-i-update-my-bare-repo)

由于克隆的存储库`--mirror`是一个裸存储库，我可以使克隆的存储库与克隆的存储库`--bare`一样`--mirror`吗？可以通过简单地修改配置文件来完成吗？

如果没有，是否有其他方法可以将裸存储库转换为镜像存储库？

另一个问题，**为什么我不能在镜像仓库中使用 git push --all**，而这个命令可以在裸仓库中运行？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2014-02-10T22:07:47.727

要将克隆的存储库更改为`git clone --bare`与 a 匹配的存储库`git clone --mirror`，请执行以下操作：

```
$ git config remote.origin.fetch "+refs/*:refs/*" 
$ git config remote.origin.mirror true 
```

然后做一个`git fetch`，一切都应该是最新的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-10T11:51:55.263

如果您已使用 克隆您的存储库[`git clone --mirror`](http://git-scm.com/docs/git-clone)，则 a 将[`git push --all`](http://git-scm.com/docs/git-push)遵循[默认的`matching`推送策略](https://stackoverflow.com/questions/4586687/what-is-the-result-of-git-push-origin/9749477#9749477)，将所有本地分支推送到远程存储库。

但是，如果您的远程存储库已作为远程引用添加到本地存储库（即您的本地存储库已从*另一个*远程存储库克隆），那么`git push --all secondRemoteRepo`除非您先获取这些分支，否则不会找到许多匹配的分支来推送。
所以这应该工作：

```
git fetch secondRemoteRepo
git push --all secondRemoteRepo 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-07-14T14:34:24.637

如今：

```
git remote add --mirror=fetch origin <url> 
```

然后

```
git fetch 
```

# c# - WMI 递归远程注册表读取

> ID：12350920
> 
> 赞同：0
> 
> 时间：2012-09-10T11:38:49.493
> 
> 标签：c#, recursion, registry, wmi

我正在尝试列出域上的远程注册表文件夹。我能够列出密钥，但不能递归地使用 WMI 或 OpenRemoteBaseKey。我想获取 x32 和 x64 的注册表文件夹和子文件夹上的键名、值、类型，最好使用 WMI，因为我需要有关客户端的其他信息。

这实际上是我的代码，但需要改进：

```
 foreach (string strComputer in arrComputers)
            {
                Console.WriteLine("==========================================");
                Console.WriteLine("  Computer: " + strComputer);
                Console.WriteLine("==========================================");

                ManagementClass classInstance = 
                    new ManagementClass("\\\\" + strComputer + "\\root\\DEFAULT", 
                    "StdRegProv", null);

                ManagementBaseObject inParams = 
                    classInstance.GetMethodParameters("EnumValues");

                inParams["sSubKeyName"] =  "SOFTWARE\\IPS";

                ManagementBaseObject outParams = 
                    classInstance.InvokeMethod("EnumValues", inParams, null);

                Console.WriteLine("Out parameters:");
                Console.WriteLine("ReturnValue: " + outParams["ReturnValue"]);
                Console.WriteLine("sNames: " + outParams["sNames"]);
                Console.WriteLine("Types: " + outParams["Types"]);
            } 
```

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T20:26:31.637

我在您的代码中看不到任何递归。这是一个例子。ParseKey 将在递归所有子子键之前使用“ParseChildValues”转储值。

```
using Microsoft.Win32;
...

/// <summary>
/// This method returns a list of registry values from a given key in .reg format.
/// </summary>
/// <param name="key">Registry key from which to obtain values.</param>
/// <returns>A CR-separated list of all the registry values for a given key.</returns>
private static string ParseChildValues(RegistryKey key)
{
    if (key.IsNull())
        return string.Empty;
    StringBuilder sb = new StringBuilder();

    foreach(string val in key.GetValueNames())
    {
        sb.AppendFormat("{0}=\"{1}\"", string.IsNullOrEmpty(val) ? "@" : val, key.GetValue(val));
        sb.AppendLine();
    }

    return sb.ToString();
}

/// <summary>
/// Parses the SubKeys of a given RegistryKey.
/// </summary>
/// <param name="key">A registry key</param>
/// <returns>Lots of important data!</returns>
private static string ParseKey(RegistryKey key)
{
    if (key.IsNull())
        return string.Empty;
    StringBuilder sb = new StringBuilder();
    sb.AppendLine();
    sb.AppendFormat("[{0}]", key.Name);
    sb.AppendLine();
    sb.Append(ParseChildValues(key));
    foreach (var subKey in key.GetSubKeyNames())
    {
        sb.Append(ParseKey(key.OpenSubKey(subKey)));
    }
    return sb.ToString();
}

static void Main(string[] args)
{
    // Dump the contents of HKEY_CLASSES_ROOT\*
    Console.WriteLine("Getting the contents of HKCR\\* on the local machine");
    RegistryKey localHKCR = Registry.ClassesRoot.OpenSubKey("*", RegistryKeyPermissionCheck.ReadSubTree);
    Console.WriteLine(ParseKey(localHKCR));

    // Dump the contents of HKEY_CLASSES_ROOT\* on a remote machine.
    Console.WriteLine();
    Console.WriteLine("Getting the contents of HKCR\\* via OpenRemoteBaseKey");
    RegistryKey remoteHKCR = RegistryKey.OpenRemoteBaseKey(RegistryHive.ClassesRoot, "MACHINENAME");
    Console.WriteLine(ParseKey(remoteHKCR.OpenSubKey("*", RegistryKeyPermissionCheck.ReadSubTree)));
} 
```

# python - Python PyQt：我无法在外部程序的 lineedit 中显示数据

> ID：12350925
> 
> 赞同：0
> 
> 时间：2012-09-10T11:39:14.127
> 
> 标签：python, pyqt

我正在尝试在 lineedit 中显示来自 EPICS（包）的运行时数据。我可以通过我的程序接收和发送我的数据，但是当我无法显示数据时。函数 pv.get() 将 EPICS 中的数据提供给 Python。请建议我进行更改，因为连接中的 SIGNAL 函数给出了错误

```
import sys
from PyQt4.QtGui import *
from PyQt4.QtCore import *
import epics
from epics import *

class MyFrame(QWidget):
    def __init__(self, parent=None):
            QWidget.__init__(self)

            self.lineedit = QLineEdit(self)
            self.lineedit.setGeometry(QRect(250,450,75,28))

            pv=epics.PV('calc:sum.VAL')
            self.lineedit=pv.get()

            self.connect(self.lineedit, SIGNAL("textChanged()"), self.changedata)
            self.color = QColor(Qt.blue)

            self.show()

    def changedata (self):

            pv=epics.PV('calc:sum.VAL')
            self.lineedit=pv.get()
            text=pv.get()

            self.update()

app=QApplication(sys.argv)
f=MyFrame()
f.show()
app.exec_() 
```

`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T23:50:11.167

*感谢@ivica 的建议。我看到这是 11 个小时没有答案，所以我想我会贡献*

您正在用您返回`QLineEdit`的任何数据替换您的小部件`pv.get()`。您要做的实际上是将数据设置到小部件上。

```
class MyFrame(QWidget):
    def __init__(self, parent=None):
        QWidget.__init__(self)

        self.lineedit = QLineEdit(self)
        self.lineedit.setGeometry(QRect(250,450,75,28))

        pv=epics.PV('calc:sum.VAL')
        self.lineedit.setText(pv.get())

        # new-style signal slot connections
        self.lineedit.textChanged.connect(self.changedata)
        self.color = QColor(Qt.blue)

    def changedata (self):

        pv=epics.PV('calc:sum.VAL')
        self.lineedit.setText(pv.get()) 
```

**更新**

更仔细地检查您的代码示例，我发现了更多潜在问题。

尽管我使用的是新样式的信号连接，但在您的旧样式中，您缺少正确的签名：

```
self.connect(self.lineedit, SIGNAL("textChanged()"), self.changedata)
# should be
self.connect(self.lineedit, SIGNAL("textChanged(QString)"), self.changedata) 
```

现在，话虽这么说......我不明白你为什么要将文本字段的更改连接到一个插槽，然后更改文本字段。它将导致几个递归触发器。如果您要做的是捕捉文本的编辑，而是调用您的史诗库并从中设置文本，那么您应该使用在`textEdited`以编程方式更改字段时不会发出的信号。

```
# new style
self.lineedit. textEdited.connect(self.changedata)
# old style
self.connect(self.lineedit, SIGNAL("textEdited(QString)"), self.changedata) 
```

# javascript - 是否可以在 JavaScript 中显示等效的文件夹对话框？

> ID：12350929
> 
> 赞同：0
> 
> 时间：2012-09-10T11:39:33.370
> 
> 标签：javascript, folderbrowserdialog

我正在编写一个 MVC3/Razor 应用程序，其中一个要求是通过单击按钮生成和保存文件。

生成文件并将它们作为 FileResult 返回到浏览器是没有问题的，对于单个文件，这是我的首选方法 - 因为它允许用户根据自己的选择打开或保存文件。

在 JavaScript 中提示（）用户键入保存文件夹位置也不是问题……但是，这依赖于他们正确键入完整的路径名……这可以是 UNC 共享！

但是，我希望能够生成一整套文件并传入应该保存它们的路径。$.ajax(..) 调用正在工作，我可以从文本框或提示符中传递路径……但我希望这是某种文件夹浏览器。

```
$(document).ready(function () {
        $('#reportlink').click(function () {

        //REPLACE THIS V
        path = prompt('Please enter the path', 'd:\\');
        //REPLACE THIS ^

            $.blockUI({ message: '<div class="reportloading"><span class="reportloadingtext">Loading Report...</span></div>' });
            $.ajax({
                url: 'Report/All',
                type: 'POST',
                dataType: 'text/json;',
                data: { path: path },
                success: function (valid) {
                    if (valid) { alert('valid') }
                    else { alert('invalid') }
                }
            });
            $.unblockUI();
        });
    }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T11:53:54.467

不幸的是，使用 Javascript 是不可能的。

请看这些讨论...

[如何在文本框中写入要上传的文件的路径？](https://stackoverflow.com/questions/4640082/how-to-write-the-path-of-a-file-to-upload-in-a-text-box)

[上传文件时无法获取完整地址](https://stackoverflow.com/questions/1676035/cant-get-the-complete-address-while-uploading-a-file)

[如何从 Firefox 3 中的 HTML 输入表单中获取文件路径](https://stackoverflow.com/questions/81180/how-to-get-the-file-path-from-html-input-form-in-firefox-3)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-10T11:48:32.990

JavaScript 不可能有文件夹浏览输入。

# excel - 没有宏的新行的单元格的默认值（Excel）

> ID：12350935
> 
> 赞同：1
> 
> 时间：2012-09-10T11:40:15.710
> 
> 标签：excel, row, default-value

我想在我的工作表中的特定单元格中插入一个默认值，但是这个默认值应该处理在工作表中插入的新行。

我**不能**为此使用宏。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T13:20:05.780

您可以向单元格添加验证，这可以帮助您将数字强制输入特定单元格，但如前面的答案中所述，数据库更适合默认值。

在我看来，您正在尝试在 Excel 中创建数据库，我不建议这样做，因为 excel 非常擅长原型算法，但是在构建表格时它可能会很快失败。

至少使用 MS Access，即它带有一个数据库。替代方案是快速原型制作工具，例如 Eclipse 或 Netbeans，或者如果您的预算可以延伸到那么远的 Visual Studio。将 RAD 工具与 MySql 结合起来（即易于使用和社区许可良好的事实），系统应该是稳定的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T13:00:33.737

也许我错了，但我想不出任何办法，一个人就能做到。这更像是一个典型的数据库功能。如果没有宏，您将不得不使用函数或格式。函数，如值，不会通过插入新行来复制 - 只有格式会，所以这缩小了范围。

顺便说一句，我将您的问题解释为“插入新行的默认值”，而不是“在现有清除行中写入数据时的默认值”。

因此，作为一种“默认值行为”，您可以使用用户定义的单元格格式。

即`;;'x';`用作用户格式并用它格式化您的单元格或列。这不会用“x”填充空单元格，但是，只要您输入“0”，它就会变为“x”。

但是，如果有更好的解决方案，我很感兴趣。

# c# - 如何将新项目添加到现有列表 c#？

> ID：12350936
> 
> 赞同：0
> 
> 时间：2012-09-10T11:40:30.600
> 
> 标签：c#, asp.net, asp.net-mvc, entity-framework, linq-to-entities

我正在上传一个 Excel 文件，并在读取该文件后得到结果。

```
 var data = from c in excel.Worksheet<QuestionMaster>()
            select new
            {
              c.Questionname,
              c.Answer1,
              c.Answer2,
              c.Answer3,
              c.Answer4,
              c.CorrectAnswer,
            }; 
```

现在我需要检查上传数据中的任何列都不应该为**空**

为此我的代码是：
**问题大师是模型类**

```
QuestionMaster questions = new QuestionMaster();
QuestionMaster temp = new QuestionMaster();
List<QuestionMaster> ques = new List<QuestionMaster>();//
  foreach (var item in data)
   {
      int i = 0;
     if (item.Questionname == null || item.Answer1 == null || item.Answer2 == null ||   item.Answer3 == null || item.Answer4 == null || item.CorrectAnswer == null)
      {
          if (item.Questionname != null)
           temp.Questionname = item.Questionname.Trim();                            
         else
           temp.Questionname = "Question Name not Found in Uploaded Excel File";                            
         if (item.Answer1 != null)
           temp.Answer1 = item.Answer1.Trim();                            
         else
           temp.Answer1 = "Answer 1 Not Found in Uploaded Excel File";                            
                       \\Some more Couple of If-Else Conditions

ques.Add(temp);
      } 
```

现在的问题是：
假设我得到三个不同的行，其中它们是一些空列，并且上述条件成立。

当**ques.add(temp)****第 2 次或第 3 次**运行时，它会**覆盖**其他先前添加的列表项，但列表中添加的项目数保持不变。**这意味着它正在用temp**
中的当前数据覆盖整个列表。

 **请告诉我哪里出错了。

提前致谢！！！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-10T11:45:18.713

您每次都需要在循环中创建一个新对象，目前它在您的循环之外，因此原始对象不断变化

```
 foreach (var item in data)
   {
     QuestionMaster temp = new QuestionMaster();

   } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-10T11:43:32.150

```
if (ques.Contains(temp))
{
    //todo replace item
}
else
{
    ques.Add(temp);
} 
```

并在循环中重新创建参考

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-10T11:48:04.113

您的列表包含 QuestionMaster 的对象：

```
List<QuestionMaster> ques = new List<QuestionMaster>(); 
```

数据列表有匿名类型的对象，尝试在数据中创建 QuestionMaster 对象而不是任何类型的对象。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-02-24T09:24:37.153

试试这个，它会在最后添加一个新项目到现有列表中，

列表作者 = 新列表
{
新作者 { 名称 = “Mahesh Chand”，书籍 = “ADO.NET 编程”，价格 = 49.95 }，
新作者 { 名称 = “Neel Beniwal”，书籍 = “Jump Ball”，价格 = 19.95 },
new Author { Name = "Chris Love", Book = "Practical PWA", Price = 29.95 }
};
// 向列表中添加更多项目
authors.Add(new Author { Name = "Mahesh Chand", Book = "Graphics with GDI+", Price = 49.95 });
authors.Add(new Author { Name = "Mahesh Chand", Book = "Mastering C#", Price = 54.95 });
authors.Add(new Author { Name = "Mahesh Chand", Book = "Jumpstart Blockchain", Price = 44.95 });

关联

> [https://www.codegrepper.com/code-examples/csharp/add+object+to+generic+list+c%23](https://www.codegrepper.com/code-examples/csharp/add+object+to+generic+list+c%23)**

# android - 带有（半和或）可隐藏标题的 ListView

> ID：12350938
> 
> 赞同：3
> 
> 时间：2012-09-10T11:40:48.923
> 
> 标签：android, android-listview, custom-controls, google-play

我的问题是，我什至不知道要搜索什么。

我想要一个列表视图。此 ListView 有一些具有“粘性”状态的元素。

如果我在设备上向下滚动列表，我希望所有状态为“粘性”的 ListElements 都粘在列表顶部（不可滚动），直到有另一个“将其推开”。其余元素应该正常滚动。

我在 Google Market 中看到过这种列表。如果您有一个大屏幕，您可以在左侧任何应用程序的 Detailview 上看到该列表，或者如果您有 android JB，则在 google now 应用程序中的 google 搜索栏上也有相同的效果。

图一：您可以在左侧看到正常的 ListView [图 1 http://www.android-hilfe.de/attachments/android-app-entwicklung/120884d1347256368-suche-stichwort-fuer-suche-nach-spezieller-listview -liste1.png](http://www.android-hilfe.de/attachments/android-app-entwicklung/120884d1347256368-suche-stichwort-fuer-suche-nach-spezieller-listview-liste1.png)

图二：你可以看到正常的 ListView 向上滚动了一点 [图 2 http://www.android-hilfe.de/attachments/android-app-entwicklung/120885d1347256368-suche-stichwort-fuer-suche-nach-spezieller-listview -liste2.png](http://www.android-hilfe.de/attachments/android-app-entwicklung/120885d1347256368-suche-stichwort-fuer-suche-nach-spezieller-listview-liste2.png)：

图三：你可以看到，我真正想要的是什么。视图向上滚动，但“粘性”价格并未消失。而不是所有其他元素，进入“粘性”一个 [图像3 http://www.android-hilfe.de/attachments/android-app-entwicklung/120886d1347256368-suche-stichwort-fuer-suche-nach-spezieller- listview-liste3.png](http://www.android-hilfe.de/attachments/android-app-entwicklung/120886d1347256368-suche-stichwort-fuer-suche-nach-spezieller-listview-liste3.png)：

我怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T12:30:29.257

我认为你的意思是做一些“同步滚动”。

有一篇很棒的帖子解释了他们在 Google Play 上的表现：

[http://www.pushing-pixels.org/2011/07/18/android-tips-and-tricks-synchronized-scrolling.html](http://www.pushing-pixels.org/2011/07/18/android-tips-and-tricks-synchronized-scrolling.html)

希望这就是你要找的..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T12:00:12.727

我相信这是一个单独的组件，与 ListView 没有任何关系。

只需创建标题，让它成为一个RelativeLayout 或LinearLayout，然后用设置为fill_parent 的ListView 填充区域的其余部分。然后，当您滚动 ListView 时，“标题”将保持粘性（因为它是一个单独的组件），并且列表将向下滚动。

# ajax - 在 grails remotefunction 中添加一个新函数

> ID：12350951
> 
> 赞同：0
> 
> 时间：2012-09-10T11:41:26.477
> 
> 标签：ajax, grails, gsp

在下面的代码中，我在更改组合框时在 div 上加载模板。我应该将模板附加到先前选择的模板上，而不是相应地替换 div 内容。

```
 <g:select id="paymentTypeUid" 
                         name='paymentTypeUid' 
                         value="${paymentTypeDesc}" 
                         from='${paymentType}'
                         optionKey="paymentTypeDesc" 
                         optionValue="paymentTypeDesc"
                         onchange="${ remoteFunction( 
                        controller :'payment',
                     action:'selectedPaymentType',                  
                      update:'divBeneIns',                               
                    params:'\'paymentType=\'+this.value',
                    after: 'welcome();',
                    onSuccess: 'reinitialiseScrollPane();'                                                      
                   )}"                           
                   /> 
```

任何帮助表示赞赏。

谢谢

# c# - 一键单击多个相互依赖的查询

> ID：12350952
> 
> 赞同：0
> 
> 时间：2012-09-10T11:41:28.800
> 
> 标签：c#, sql-server-2008

在我的应用程序中，我有一个表单，我必须在单击一个按钮时执行多个数据库事务，即当我单击按钮时

查询 1 >>> 将指定值插入指定表

查询2.>>选择查询以获取最后输入的名称的主键....即上述插入查询插入的自动编号

query 3 >> inset data into another table with the primary key recvd from above

查询 4 ​​.>> 用上面的主键更新另一个表

如果任何查询失败或发生任何异常其他人不应该工作

现在我正在尝试使用 try catch 并在发生异常时删除 prevoius 插入来做到这一点......

我是 sql server 2008 的新手，有什么好的想法吗

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T11:50:56.480

正如其他人评论的那样，将所有这些操作包装到一个事务中，而不是为每个事务使用单独的事务。[事务的ACID](http://en.wikipedia.org/wiki/ACID)属性的“原子性”部分将确保所有操作或不成功，并且您永远不会有部分结果。

如果您使用的是 ADO.NET，您将为此使用[BeginTransaction](http://msdn.microsoft.com/en-us/library/system.data.common.dbconnection.begintransaction%28v=vs.100%29.aspx)和[Commit](http://msdn.microsoft.com/en-us/library/system.data.common.dbtransaction.commit%28v=vs.100%29)。

顺便说一句，您不应该执行步骤 2 - 如果并发客户端在您的步骤 1 之后但在您有机会执行步骤 2 之前插入一行（并提交）怎么办？你会得到错误的PK。最好[直接获取](https://stackoverflow.com/a/42655/533120)第一步生成的PK。

# c# - 绑定文本框以使用实体框架插入数据

> ID：12350960
> 
> 赞同：1
> 
> 时间：2012-09-10T11:41:53.580
> 
> 标签：c#, .net, wpf, entity-framework-4

我想从表单数据库（与实体框架一起使用）插入数据，直到我使用如下手动方式的那一天。

```
var member = new MorEntities();
Person one_person = new Person
{
   First_Name=txt_F_N.Text,
   Family_Name = txt_L_N.Text,
}
member.People.AddObject(one_person);
member.SaveChanges(); 
```

在WPF中最好理解，在XAML（绑定）中有一种方法，我在网上查了一下，无法理解，任何人都可以举一个小例子，我将继续

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T11:50:14.577

您可以将所谓的属性与公共 getter 和 setter 一起使用，并将其绑定到文本框

```
public class MainViewModel : NotificationObject
{
    public MainViewModel()
    {
        Person = new Person();
        SaveCommand = new DelegateCommand(SaveExecuted);
    }

    // Properties
    public Person Person { get; set; }

    // Commands
    public ICommand SaveCommand { get; set; }
    private void SaveExecuted()
    {
        // Do some save logic here!
    }

}

public class Person
{
    public string FirstName { get; set; }

    public string LastName { get; set; }

    public int Age { get; set; }
} 
```

在你的文本框 XAML

```
<TextBox Text="{Binding Person.FirstName}" />
<Button Command="{Binding SaveCommand}" Content="Save"/> 
```

在代码隐藏中添加这一行

```
public MainWindow()
{
   InitializeComponent();
   DataContext = new MainViewModel(); //Add this line
} 
```

类似的东西不要忘记将 View 的 DataContext 设置为自身或要使用其属性的另一个公共对象。

也看看[MVVM](http://msdn.microsoft.com/en-us/magazine/dd419663.aspx) nice way to use WPF and use separation of conserns

在您的视图上创建一个名为 Save 的按钮并将此按钮绑定到一个 [命令](http://www.codeproject.com/Articles/274982/Commands-in-MVVM)，就像您对其他属性所做的一样，并在 Execute 方法中保存到数据库或更新。

NotificationObject 和 DelegateCommand 来自[Prism 4](http://compositewpf.codeplex.com/)

# iphone - 如何在滚动视图中找出以编程方式添加的文本字段

> ID：12350964
> 
> 赞同：-1
> 
> 时间：2012-09-10T11:42:12.480
> 
> 标签：iphone, ios, ios5, ios4

在我的滚动视图中，我通过单击“添加”按钮以编程方式添加 uitextfields。文本字段的数量取决于我在添加按钮中按了多少。它可以是“N”个文本字段。在此字段编辑之后，我如何将所有文本字段中的值放入数组中。如果一旦我编辑了文本字段，就有可能删除其中的条目。那么在单击保存按钮时在所有文本字段中保存值的方法是什么。我附上我的截图。提前致谢 ![以编程方式添加 Textfields 示例预览](../Images/4e65dececfe70c957f20e6ddf71a640a.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-10T11:47:40.430

使用快速枚举。

```
NSMutableArray *arr = [NSMutablearray....];
for (UIView *subV in self.view.subviews){
     if([subV isKindOfClass:[UITextField class]]){
        //store it in a NSDictionary, so later can still know which 
        //textField your text belongs,
         NSDictionary *tempDic = [NSDictionary dictionaryWithObjectAndKey:subV.txt 
                           ,subV.tag,/*or subVw.placeholder*/,nil];
        [arr addObject:tempDic];

   }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T11:48:06.720

您可以通过遍历滚动视图的子视图数组来获取所有文本字段

```
for (UIView *subView in scrollview) {
    //check if the subView is a textfield by for example matching a certain tag
    //save text of textfield
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-10T11:51:38.777

当您创建 textField 时，将 tagValue 分配给每个 textField，然后使用标签值访问 textField...。

```
UITextField *txtField = (UITextField *) [scrollView viewWithTag:tag]; 
```

# c# - 动态 Linq 和 ICompare

> ID：12350965
> 
> 赞同：3
> 
> 时间：2012-09-10T11:42:14.507
> 
> 标签：c#, linq, dynamic, sql-order-by

我正在尝试使用 James McCormack's guide to using a custom IComparer with Dynamic Linq。- 见[http://zootfroot.blogspot.co.uk/2009/10/dynamic-linq-orderby.html?showComment=1347276236930#c11348033278810583](http://zootfroot.blogspot.co.uk/2009/10/dynamic-linq-orderby.html?showComment=1347276236930#c11348033278810583)

我使用查询来拉回一个可枚举的字符串值：

```
.Select("fieldname").Distinct() 
```

然后尝试使用

```
.OrderBy(item=>item.GetReflectedPropertyValue("fieldname"),new myComparer()) 
```

GetReflectedPropertyValue 是 James 定义的辅助方法

```
public static string GetReflectedPropertyValue(this object subject, string field)
{
object reflectedValue = subject.GetType().GetProperty(field).GetValue(subject, null);
return reflectedValue != null ? reflectedValue.ToString() : "";
} 
```

但是得到错误“'System.Collections.Generic.IEnumerable'不包含'OrderBy'的定义和最佳扩展方法重载'System.Linq.Dynamic.DynamicQueryable.OrderBy(System.Linq.IQueryable, string, params object [])' 有一些无效参数"

有任何想法吗？我对此很陌生，只是想在我有时间真正经历并正确学习它之前让一些东西发挥作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T12:47:13.437

仅根据您发布的内容很难判断，`OrderBy`因为`myConverter`. 但是，由于`GetReflectedPropertyValue`返回`string`，`myConverter`必须实现`IConverter<String>`才能与`OrderBy`. 如果它没有，并且它实现了类似的东西，`IComparer<MyItem>`那么编译器真的在寻找一个`OrderBy(this IEnumerable<object>, Func<object,string>, IComparer<MyItem>)`不存在的方法并吐出那个错误。

如果不清楚，请提供详细信息，`myConverter`我可以更具体。

如果您使用的是未实现的东西，那么您可以用实现的东西`IComparer<T>`包装，使其与. 例如：`IComparer``IComparable<string>``Orderby`

```
public class MyStringComparer : IComparer<String>
{
    readonly IComparer comparer = new MyComparer();
    public int Compare(string x, string y)
    {
        return comparer.Compare(x, y);
    }
} 
```

# ruby-on-rails - 从一个表单将多条记录插入到一 个表中

> ID：12350968
> 
> 赞同：1
> 
> 时间：2012-09-10T11:42:26.550
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.2

通常，如果我们只能创建 1 条记录，例如从表单中一次创​​建 1 个用户。但是如果我想从一个表单创建多个用户呢？与其他模型没有关联。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-10T12:02:20.693

您必须使用一组用户参数制作一个表单。例如

```
<%= from_tag '/users/create_multiple' do %>
 <%= text_field_tag "users[][name]" %>
 <%= text_field_tag "users[][name]" %>
<% end %> 
```

在用户控制器中：

```
def create_multiple
 params[:users].each do |user|
  user = User.create(user)
 end
end 
```

您可以根据自己的意愿添加验证代码，请访问此处如何为多条记录传递表单参数[http://guides.rubyonrails.org/form_helpers.html#basic-structures](http://guides.rubyonrails.org/form_helpers.html#basic-structures)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-10T12:01:37.010

一种选择是，为每个模型编写尽可能多的表单，然后使用 Jquery 提交所有表单。

此链接将帮助您提交多个表格

[Rails 中的多个提交按钮/表单](https://stackoverflow.com/questions/461790/multiple-submit-buttons-forms-in-rails)

# python - 使用两个数组的线性插值

> ID：12350969
> 
> 赞同：0
> 
> 时间：2012-09-10T11:42:28.057
> 
> 标签：python, numpy

我有以下数组：

```
List_CD = [2410.412434205376, 2287.6750893063017, 2199.2602314650626, 2124.4647889960825, 2084.5846633116403, 2031.9053600816167, 1996.2844020790524, 1957.1098650203032, 1938.4110044030583, 1900.0783178367647, 1877.6396548046785, 1868.2902104714337, 1844.9165996383219, 1816.8682911816766]
List_Dose = [10.0, 12.0, 14.0, 16.0, 18.0, 20.0, 22.0, 24.0, 26.0, 28.0, 30.0, 32.0, 34.0, 36.0] 
```

我想做的是使用以下方法进行简单的插值：

```
dsize = numpy.interp(2000., List_CD, List_Dose) 
```

预期的结果在 20.0 和 22.0 之间，但我一直得到 10.0 的值

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-10T11:44:29.307

```
xp : 1-D sequence of floats
    The x-coordinates of the data points, must be increasing. 
```

你`List_CD`的没有增加。

您可以按以下方式对其进行排序：

```
d = dict(zip(List_CD, List_Dose))
xp = sorted(d)
yp = [d[x] for x in xp]
numpy.interp(2000., xp, yp)
# returns 21.791381359216665 
```

或者：

```
order = numpy.argsort(List_CD)
numpy.interp(2000., np.array(List_CD)[order], np.array(List_Dose)[order]) 
```

# mysql - 在临时表上使用内联选择

> ID：12350970
> 
> 赞同：0
> 
> 时间：2012-09-10T11:42:35.140
> 
> 标签：mysql, sql

我在报告工具中使用 mysql。我有一个临时表，我正在填写一些查询，然后显示临时表中的数据。

我的表结构是

```
Prim_key    starttime             endtime          timediff
1       2012-07-20 00:00:0    2012-07-22 10:55:32   39332
2       2012-07-20 04:50:13   2012-07-22 10:55:32   158719
3       2012-07-20 10:00:00   2012-07-22 00:00:05   5 
```

我需要显示一个时间百分比 < 30 ，介于 30-45 和 > 45 之间的表。我编写了以下查询，但出现**状态 1137 错误 - 无法重新打开表：'t_results'**

```
Expected result:

|   % of less than 30 min   | % of between 30 - 45 |    % of greater than 45 mins | 
```

查询是

```
SELECT prim_key key, (
  SELECT count(*)*100 / (
      SELECT count(*)
      FROM t_results 
      WHERE timediff > 0 )
  FROM   t_results 
  WHERE  (timediff /60)  < 30
  ) less30, (
  SELECT count(*)*100 / (
     SELECT count(*)
     FROM t_results 
     WHERE timediff > 0 )
  FROM   t_results 
  WHERE  (timediff /60)  >=  30  and (timediff /60)  <=  45 
  ) bet3045, 
  (SELECT count(*)*100 / (
      SELECT count(*)
      FROM t_results 
     WHERE timediff > 0 ) 
  FROM t_results 
  WHERE  (timediff /60)  > 45 
 )  great45 
FROM t_results 
WHERE 1 = 1 AND 1 =1 
GROUP BY prim_key 
```

有没有别的写法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T11:45:55.783

临时表不能在同一个查询中被引用两次。

[http://bugs.mysql.com/bug.php?id=10327](http://bugs.mysql.com/bug.php?id=10327)

**编辑**

实际上，稍微思考一下（因为您需要一个支点），我相信您的查询将采用以下形式

（第二次编辑，格式为百分比）

```
SET @numRows := (SELECT COUNT(*) FROM t_results WHERE timediff > 0 );
SELECT COUNT(CASE WHEN (timediff /60)  < 30 THEN timediff ELSE NUll END) * 100 /@numRows  less30, 
    COUNT(CASE WHEN (timediff /60)  >=  30  and (timediff /60)  <=  45  THEN timediff ELSE NUll END) * 100 /@numRows bet3045, 
    COUNT(CASE WHEN (timediff /60)  > 45  THEN timediff ELSE NUll END) * 100 /@numRows great45 
FROM t_results WHERE timediff > 0 
```

应该做的伎俩。除非我犯了一个相当愚蠢的错误。我通常这样做:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-10T12:10:37.260

@user1051643 是对的，您不能在查询中多次使用临时表。可惜，迟钝等，但就是这样。

也就是说，你想用你的查询来实现什么？令我感到非常奇怪的是，您的主要查询执行 GROUP BY prim_key。假设 prim_key 是主键，并且您的查询没有连接，这似乎是多余的，因为 GROUP BY 查询结果的概念主键始终由 GROUP BY 列表中的列精确定义。即您的 GROUP BY 是多余的。

然后在您的 SELECT 列表中，您对 t_results 执行了一堆聚合查询，但它们似乎都与主查询的当前行无关。这意味着您可以轻松地将其重写为一系列单独的查询，而不会损失任何性能。但最重要的是，它让我觉得你没有足够精确地定义你想要解决的问题。

更新：

```
select 100 * sum(
                 if (timediff < 30*60, 1, 0)
             ) / count(timediff)  
       AS "% of less than 30 min"
,      100 * sum(
                 if (timediff between 30*60 and 45*60, 1, 0)
             ) / count(timediff)  
       AS "% of between 30 - 45"
,      100 * sum(
                 if (timediff > 45*60, 1, 0)
             ) / count(timediff) 
       AS "% of greater than 45 mins"
from   t_results 
```

# jquery - 通过 scrollTop 值缩小标题高度

> ID：12350972
> 
> 赞同：0
> 
> 时间：2012-09-10T11:42:47.327
> 
> 标签：jquery, header, height, scrolltop, shrink

你好！

简单的问题：我有一个固定的标题，高度根据`window scrollTop`-value 缩小到其高度的一半。

到目前为止我所拥有的：

**HTML**

```
<div id="header">
    <img src="http://yckart.com/ph?text=scroll down" alt>
</div> 
```

**CSS**

```
body{padding-top:200%} /* not really needed */

#header {
    position:fixed;
    top:0;
    left:0;
    right:0;
    height:200px;

    color:#eee;
    background:#222
}

#header img {height:100%; width:auto} 
```

**JS**

```
var header = $('#header'),
    headerH = header.height();

$(window).scroll(function() {
    if ($(this).scrollTop() <= headerH / 2) {
        header.css({
            height: -($(this).scrollTop() - headerH)
        });
    }
}).scroll(); 
```

这是一个**[小提琴](http://jsfiddle.net/ARTsinn/dnz5x/)**。

到目前为止运作良好。但是，如果用户向下滚动到底部并重新加载页面，则 if 语句不起作用。

任何想法如何解决它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T12:31:05.030

if 语句没有错。当初始滚动状态处于底部时，您需要添加一个 else 语句。例如：

```
 var header = $('#header'),
    headerH = header.height();

$(window).scroll(function() {
    if ($(this).scrollTop() <= headerH / 2) {
        header.css({
            height: -($(this).scrollTop() - headerH)
        });
    } else {
      header.css({
            height: headerH / 2
        });
    }
}).scroll(); 
```

# iphone - 拍摄整个 UIView 的快照/屏幕截图 - iPhone

> ID：12350979
> 
> 赞同：2
> 
> 时间：2012-09-10T11:43:38.290
> 
> 标签：iphone, uiview, uiimage, uiimagejpegrepresentation

我正在尝试截取 UIView 的屏幕截图/快照。我可以使用以下代码获取当前可见视图的屏幕截图 - 但我关注的是整个视图。

该视图是一个滚动视图，因此下面的内容是不可见的，我想被包含在内

我如何扩展此代码以考虑不可见的视图？

```
UIGraphicsBeginImageContext(activityView.frame.size);

[self.activityView.layer renderInContext:UIGraphicsGetCurrentContext()];

UIImage *fullScreenshot = UIGraphicsGetImageFromCurrentImageContext();

UIGraphicsEndImageContext();

UIImageWriteToSavedPhotosAlbum(fullScreenshot, nil, nil, nil); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-11-01T06:38:15.817

iOS 7 为类引入了一种新方法`UIView`。

```
- (UIView *)snapshotViewAfterScreenUpdates:(BOOL)afterUpdates;
 - (UIView *)resizableSnapshotViewFromRect:(CGRect)rect afterScreenUpdates:(BOOL)afterUpdates withCapInsets:(UIEdgeInsets)capInsets; 
```

您可以使用此方法截取当前视图的屏幕截图。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-10T11:47:05.640

尝试这个：

```
CGSize fittingSize = [yourScrollView sizeThatFits:CGSizeZero];
UIGraphicsBeginImageContext(fittingSize);
[yourScrollView.layer renderInContext:UIGraphicsGetCurrentContext()];
UIImage *capImage = UIGraphicsGetImageFromCurrentImageContext();
UIGraphicsEndImageContext(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-10T11:46:24.860

试试这个方法可能对你有帮助

```
 UIImage *screenshotImage;
        UIGraphicsBeginImageContext(self.view.bounds.size);
        [self drawLayer:self.view.layer inContext:UIGraphicsGetCurrentContext()];
        [self.view.layer renderInContext:UIGraphicsGetCurrentContext()];
        screenshotImage = UIGraphicsGetImageFromCurrentImageContext();
        img.image=screenshotImage;
        UIGraphicsEndImageContext();
        CGImageRef cgImg = CGImageCreateWithImageInRect(screenshotImage.CGImage, CGRectMake(0, 0, 320, 460));
        UIImage* part = [UIImage imageWithCGImage:cgImg];
        UIImageView* iv = [[UIImageView alloc] initWithImage:part];

        UIImageWriteToSavedPhotosAlbum(screenshotImage, nil, nil, nil); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-10T11:59:31.580

我发现了问题。滚动视图是我正在拍摄快照的视图的子视图。为了修复它，我深入研究了正确的视图。

```
UIGraphicsBeginImageContext(activityView.scrollView.scrollableView.frame.size);

[self.activityView.scrollView.scrollableView.layer renderInContext:UIGraphicsGetCurrentContext()];

UIImage *fullScreenshot = UIGraphicsGetImageFromCurrentImageContext();

UIGraphicsEndImageContext();

UIImageWriteToSavedPhotosAlbum(fullScreenshot, nil, nil, nil); 
```

# mysql - 来自mysql的ocaml哈希

> ID：12350982
> 
> 赞同：2
> 
> 时间：2012-09-10T11:43:44.897
> 
> 标签：mysql, csv, hashtable, ocaml

我有一个大型数据库（大约 150 000 条记录），我想将它嵌入到名为 compute.ml 的 OCaml 源代码中。我正在尝试（没有成功）将这些表转换为哈希表并将这些哈希表嵌入到一个函数`compute`中，以便让二进制程序快速运行，而无需对外部 sql 数据库进行查询。

我有两个问题：

*   有没有办法将一个 mysql 表导出到一个关联数组 (Hashtbl) 中，该数组可以被我的 OCaml 函数访问（甚至嵌入）`compute`（它本身被编译并用作二进制文件）？
*   这个哈希表是永久加载在函数中还是每次在二进制文件中调用函数时都要重新启动它？

我有一个包含 142741 条记录的 mysql 表，以 CSV 格式导出，如下所示：

```
"1";"27";"10";"coco";"0";"730";"1641025";"1641053";"foo";"1";"S";"0"
"2";"27";"11";"kiki";"0";"730";"1641054";"1641083";"bar";"1";"S";"0"
"3";"27";"12";"toto";"0";"730";"1641084";"1641113";"foofoo";"1";"S";"0"
"4";"27";"1";"tata";"0";"730";"1641114";"1641142";"barbar";"1";"S";"0"
...
"142741";"5";"7";"chotto";"0";"1347";"1971472";"1971500";"lastrecord";"1";"S";"0" 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T11:55:02.327

我会有一个 .csv 文件`data.csv`，其中包含您的 mysql 表，导出为 csv 格式。然后在 OCaml 中，我会在程序启动时读取并解析这个文件一次：

```
let data = read_csv("data.csv") 
```

`data`因此是一个变量，类型为`Hashtbl.t`，包含您的 150K 记录。然后，一个 OCaml 函数（`compute`在您的问题中调用）使用此变量：

```
let compute x =
  let foo = Hashtbl.find data x in
  ... 
```

这样，就不会调用 MySQL 服务器，在启动程序时只读取一次数据，然后对函数的每次调用都`compute`使用已经在内存中的变量`data`。

如果您担心读取和解析 csv 文件，您可能会查看`Marshal`模块，以存储变量的二进制版本`data`。

请注意，`read_csv`它不在标准库中，但例如[http://csv.forge.ocamlcore.org/](http://csv.forge.ocamlcore.org/)。

# .net-4.0 - Redgate Datacompare 10 API 的 Not Null 问题

> ID：12350984
> 
> 赞同：1
> 
> 时间：2012-09-10T11:43:53.407
> 
> 标签：.net-4.0, sql-server-2008-r2, vb.net-2010

需要一些关于我使用 redgate 比较 SDK 10 的持续集成项目的指示，因为我把头发拉出 atm :-(

我有三个数据库，我们称它们为 SourceDB1、SourceDB2 和 Target。

Target 和 SourceDB2 将具有完全相同的架构，而 SourceDB1 将缺少某些列

我想运行数据比较，以便在 SourceDB1 中存在列的地方使用该数据，在不存在列的地方我从 SourceDB2 获取数据。

我不能只运行两个单独的数据比较，就好像 SourceDB1 中不存在的任何列都不是空列，代码将失败。

对此的任何指示将不胜感激，因为我有点粘滞:-)

谢谢

# winsxs - WinSxS 安装

> ID：12350985
> 
> 赞同：-2
> 
> 时间：2012-09-10T11:43:55.863
> 
> 标签：winsxs

哪个安装程序在我的系统`Windows\Winsxs`文件夹中安装了以下文件？

```
C:\Windows\winsxs\x86_microsoft.vc80.crt_1fc8b3b9a1e18e3b_8.0.50727.4940_none_10b2f55f9bffb8f8\msvcm80.dll
C:\Windows\winsxs\x86_microsoft.vc80.crt_1fc8b3b9a1e18e3b_8.0.50727.4940_none_10b2f55f9bffb8f8\msvcp80.dll
C:\Windows\winsxs\x86_microsoft.vc80.crt_1fc8b3b9a1e18e3b_8.0.50727.4940_none_10b2f55f9bffb8f8\msvcr80.dll 
```

我是否需要版本 8.0.50727.5592 或更高版本的相同文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T06:56:25.730

浏览*[C 运行时库 WinSxS](http://social.msdn.microsoft.com/Forums/en-US/vcmfcatl/thread/c1dc12ae-f032-4c20-9ff9-c16ea531ca08?prof=required)*。

# cloudbees - 在 cloudbees 构建上使用受许可限制的依赖项

> ID：12350990
> 
> 赞同：1
> 
> 时间：2012-09-10T11:44:07.923
> 
> 标签：cloudbees

为了使我的构建在 DEV@Cloud 上的 Jenkins 实例下工作，我需要访问 Oracle JDBC 驱动程序 maven 依赖项，但由于版权限制，在标准 Maven 存储库中找不到该依赖项，因此我们之前的过程是手动安装该依赖项. 我可以在哪里以及如何安装该依赖项，以便 Jenkins 构建能够成功？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T11:44:07.923

您可以将此依赖项部署到 cloudbees forge 上的发布存储库，该存储库已添加到您的默认 maven 设置中以进行依赖项解析（因此您不必更改 pom.xml）

有关部署到此存储库的详细信息，请参阅[http://wiki.cloudbees.com/bin/view/DEV/CloudBees+Private+Maven+Repository 。](http://wiki.cloudbees.com/bin/view/DEV/CloudBees+Private+Maven+Repository)注意：由于 maven3 不包含 WebDav 连接器，我建议您将存储库安装为远程驱动器并使用 file:// URL 运行 deploy:deploy-file。

# javascript - 所需的 jQuery 验证引擎阻止了我的自定义所需验证器

> ID：12350995
> 
> 赞同：1
> 
> 时间：2012-09-10T11:44:27.310
> 
> 标签：javascript, jquery, jquery-validate

我有一个带有 2 个文本输入和 2 个单选按钮的表单。一个单选按钮是当客户希望所有未来的通信都通过纸质邮件进行时，另一个按钮是当客户希望通过电子邮件进行通信时。

当用户选择电子邮件时，用户需要用他的电子邮件地址填写其中一个输入文本框。当用户选择邮政时，他必须在另一个框中填写邮政地址。

为此，我有一个自定义的 jquery 验证引擎功能：

```
function checkBillRoutePostalAddressConflict(field, rules, i, options){
  var fieldValue = field.val();
  var accountIdR = field.attr('id').match(/\d+$/);
  var radioButton = jQuery('#postalBillsDestination_' + accountIdR);
  if(!fieldValue && radioButton.attr("checked")){
    alert('options.allrules.checkBillRoutePostalAddressConflict.alertText') // for debugging
    return options.allrules.checkBillRoutePostalAddressConflict.alertText;
  }
} 
```

验证器与类一起添加到我的输入文本字段中`class="validate[funcCall[checkBillRoutePostalAddressConflict]]"`

问题是它不起作用。显示调试警报消息，这意味着条件正确。如果我用我的其他自定义验证器之一替换它，那么一切正常。

有人告诉我，如果您将自定义验证函数写入一个不应该为空的字段，则不会显示该消息，因为 jQuery 希望您使用 validate[required]。

如果这是真的，有没有人知道某种不太老套的解决方法？

一种选择是`showPrompt`直接使用，但也许有更清洁更好的东西？
谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T09:06:10.037

元素的规则不仅可以是真或假，还可以是一个函数。该函数可以检查是否选中了电子邮件复选框并返回 true（否则返回 false）：

```
$('#form').validate({
    'rules': {
        'email_text_field': {
            'required': function() { return $('#email-radio').is(':checked'); }
        }
    }           
}); 
```

这里使用默认`required`验证器。

# php - gethostbyaddr 和 checkdnsrr 没有给出任何输出

> ID：12350999
> 
> 赞同：0
> 
> 时间：2012-09-10T11:44:32.987
> 
> 标签：php, linux, dns

我正在运行一个返回 DNS 服务器地址的 php 脚本，并且我正在使用以下代码。

```
echo $hostname = gethostbyaddr($_SERVER['REMOTE_ADDR']);
print_r (checkdnsrr ($hostname)); 
```

我的服务器是基于 Linux 的。为什么这不返回任何东西？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T11:49:14.563

当我在我的服务器上运行它时，你的代码工作正常。

问题一定出在你系统的某个地方！它可能是：

*   你在 NAT 后面
*   没有针对您的 IP 的反向 DNS 查找。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-10T11:47:33.693

添加更多调试输出（或使用[调试器](http://docs.php.net/debugger)）以找出...

```
<?php
ini_set('display_errors', true);
error_reporting(E_ALL);
echo '$_SERVER[REMOTE_ADDR]=', $_SERVER['REMOTE_ADDR'], "<br />\n";
$hostname = gethostbyaddr($_SERVER['REMOTE_ADDR']);
echo '$hostname=', $hostname, "<br />\n";
$result = checkdnsrr($hostname);
var_dump($result);
echo "<br />\ndone."; 
```