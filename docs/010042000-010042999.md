# StackOverflow 问答 10042000-10042999

# html - 在 IE9 中为表设置修复（冻结）标题时出现问题？

> ID：10042000
> 
> 赞同：0
> 
> 时间：2012-04-06T10:04:43.940
> 
> 标签：html, css

我创建了具有固定标题和可滚动内容的表格。并将 css 作为 thead 的 fixedHeader 和 tbody 的 scrollContent：

```
thead.fixedHeader tr {
    position: relative;
}
html > body thead.fixedHeader tr {
    display: block;
}

html > body tbody.scrollContent {
    display: block;
    overflow: auto;
} 
```

这适用于除 IE 之外的 mozilla firefox、Chrome 和 safari。这个问题如何在 IE 中解决。

问候， 吉里什

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-06T10:07:47.260

你试过设置z-index吗？这将使标题始终保持在顶部。 [http://www.w3schools.com/cssref/pr_pos_z-index.asp](http://www.w3schools.com/cssref/pr_pos_z-index.asp)

# sql - SQL 查询问题总和

> ID：10042002
> 
> 赞同：1
> 
> 时间：2012-04-06T10:04:59.993
> 
> 标签：sql, zoho

我正在使用 sum 查询并使用它来汇总两个表中的不同列，但它返回的值是预期的两倍。你能不能紧急解释一下为什么会发生这里的查询：

```
SELECT SUM("A")+ SUM ("A-1")
FROM "Testing101" ,"Testing102" 
```

顺便说一句，我正在使用 ZOHO Reports 软件来创建这些查询

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T10:06:37.467

您正在执行交叉连接，因此您将多次计算每个表中的元素。

尝试使用子选择：

```
SELECT
    (SELECT SUM("A") FROM "Testing101") +
    (SELECT SUM("A-1") FROM "Testing102") 
```

# image - 未终止的字符串常量脚本错误

> ID：10042003
> 
> 赞同：0
> 
> 时间：2012-04-06T10:05:06.627
> 
> 标签：image

我的页面中有以下关闭按钮图像标签。 `img src="@@@HtmlEncode(LanguagePath)@@@/img/header/HEADER_SIGN_IN_POPIN_CLOSE.gif" id="quit_sign_in" alt="@@HTMLEncodeText(LOC_SW_LOGIN_CLOSE)@@" title="@@HTMLEncodeText(LOC_SW_LOGIN_CLOSE)@@"` 每当页面加载时，我都会收到“未终止的字符串常量”错误。如果将鼠标悬停在错误消息上，则它指向 HEADER_SIGN_IN_POPIN_CLOSE.gif。

有人可以告诉我可能是什么原因吗？如何解决这个问题？它纠缠了我5个多小时。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-06T10:23:32.483

很可能问题出在其他地方（在您的html代码中）。当浏览器给出未终止的字符串错误时，这意味着您在某处打开了双引号/单引号并且没有终止它。我的建议是使用 firefox 的 Firebug 来调试问题。

# php - 如何将这些内容一一放入变量中，然后输出呢？

> ID：10042009
> 
> 赞同：1
> 
> 时间：2012-04-06T10:05:45.373
> 
> 标签：php, arrays

假设有一个名为`name.txt`. 其中有一些内容如下：

```
Michal Guiles,Tanika Mcall,Jerry Sanipasi,Fallon Mcgillivray,Kurtis Bouras,Maria Teschner,Jerry Barbot,Earnestine 
```

如何将所有名称放入名为的变量中`$name`；然后逐一输出`$comment->setname("$name");`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-06T10:08:54.423

**阅读文件：**

```
$file_handle = fopen("myfile.text", "r");
while (!feof($file_handle)) {
   $line = fgets($file_handle);
}
fclose($file_handle); 
```

**拆分零件：**

```
$parts = explode(",",$line); 
```

**一张一张打印出来：**

```
foreach ($parts as $part)
{
    echo "$part<br/>";
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-06T10:31:46.533

您一次询问多件事。只做一件接一件的事：

1.  阅读文件：（见[`file_get_contents`](http://php.net/file_get_contents)）

    ```
    $text = file_get_contents('name.txt'); 
    ```

2.  检索名称：（参见[`explode`](http://php.net/explode)）

    ```
    $names = explode(',', $text); 
    ```

3.  遍历名称：（参见[`foreach`](http://php.net/foreach)）

    ```
    foreach ($names as $name)
    {
        $comment->setname($name);
    } 
    ```

# asp.net-mvc-3 - 如何将 2 列从 WEBGRID 传递到 AJAX 调用

> ID：10042013
> 
> 赞同：0
> 
> 时间：2012-04-06T10:06:03.983
> 
> 标签：asp.net-mvc-3

我有一个包含 2 列的 WEBGRID。

然后，我使用 Jquery 和 Ajax 使一行可点击。我可以将 1 个值传递给 AJAX 调用，这是 webgrid 中的第一列，这很好用。但我无法将 2 个值传递给 AJAX 调用。

我怎样才能做到这一点 ？

VIEW() .cshtml 中的 WEGRID 代码：

```
 @grid.GetHtml(columns: grid.Columns(
                        grid.Column("projectCode", "Project Code", canSort: true),
                        grid.Column("spUserName", "Provider Name", canSort: true)),
        tableStyle: "webgrid",
        headerStyle: "webgrid-header",
        footerStyle: "webgrid-footer",
        selectedRowStyle: "webgrid-selected-row",
        rowStyle: "webgrid-row-style") 
```

JavaScript/AJax 在同一个 VIEW() .cshtml 中调用：

```
 <script type="text/javascript">
            $(function () {
            $('tbody tr').live('hover', function () {
                $(this).toggleClass('clickable');
            }).live('click', function () {  
                $.ajax(
                            {
                                type: "POST",
                                url: "/Projects/OtherProjectHeaderSP",                              
                                data : { projectCode: $(this).find('td:first').text(),
                                         spUserName: $(this).find('td:second').text()},
                                success: function (data) {
                                        $('#container1').html (data);                         
                                    }
                            });
            });
        });
        </script> 
```

问题是它没有获取 spUserName: $(this).find('td:second).text()}，即 rthe spUserName。如果我只传入 $(this).find('td:first').text()，它将 100% 工作，并将 projectCode 发送到控制器。但是通过添加第二个，它会导致失败。

如何从 WEBGRID 传入 2 个值？

另一种选择是使用 JSON。但是我已经尝试并且无法将 td 值分配给 JSON 对象。

请提供任何帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T16:46:17.523

`td:first`是另一种说法`td:eq(0)`。使用它，如果您将其更改为`td:second`，`td:eq(1)`您可以获得第二列

# android - 如何在android中的基本名称值对中传递arralylist

> ID：10042015
> 
> 赞同：0
> 
> 时间：2012-04-06T10:06:36.267
> 
> 标签：android

您好先生，我想将数据列表发送到 php 服务器我使用以下代码是否正确请告诉我

```
 i try this code
           ArrayList<String>list1=new ArrayList<String>();
    for(int i=0;i<json.length();i++)
    {
        JSONObject e = json.getJSONObject(i);
        list1.add(e.getString("menuname"));
    }

    ArrayList<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>();
    nameValuePairs.add(new BasicNameValuePair("menuname",list1.toString()));

        HttpClient httpclient = new DefaultHttpClient();
        HttpPost httppost = new HttpPost("http://192.168.0.103/update.php");
        // "http://192.168.1.12/addnotes.php");
                //url+"Notes/addnotes.php");
        httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));
        HttpResponse response = httpclient.execute(httppost);
        HttpEntity entity = response.getEntity();
        is = entity.getContent();
        Toast.makeText(getApplicationContext(),
                "Saved Sucessfully", Toast.LENGTH_SHORT).show() 
```

请看上面的代码是否正确..请告诉我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-06T10:31:02.993

我认为您想正确获取 String 中的内容而不是使用它

```
String mResponseText = EntityUtils.toString(entity); 
```

插入

```
 is= entity.getContent(); 
```

可以帮助你吗

# css - css 缩放图像

> ID：10042021
> 
> 赞同：1
> 
> 时间：2012-04-06T10:07:38.217
> 
> 标签：css, image, scale

假设我有一张 1000x1000 的图片。

有没有办法为在页面加载时缩放或缩放的 300x300 表格设置背景图像，以便它以 2000 x 2000 大小而不是 1000 x 1000 显示该图像的特定部分？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-06T10:12:09.770

你可以使用[CSS3 background-size 属性](http://www.w3schools.com/cssref/css3_pr_background-size.asp)

但并非所有浏览器都支持它：[http ://caniuse.com/#search=background-image%20options](http://caniuse.com/#search=background-image%20options)

# android - 如何创建 Facebook 密钥哈希？

> ID：10042022
> 
> 赞同：6
> 
> 时间：2012-04-06T10:07:42.927
> 
> 标签：android, facebook, facebook-android-sdk

在 Facebook android 教程中，我们被告知使用以下代码来创建密钥哈希：

> keytool -exportcert -alias androiddebugkey -keystore ~/.android/debug.keystore | openssl sha1 -二进制 | openssl base64

这是在所有情况下都可以使用的确切代码吗？例如，而不是 `~/.android/debug.keystore`应该像`C:/folderone/foldertwo/.android/debug.keystore`?

如您所见，我不确定是否需要逗号，是否需要完整路径！

有人能提供一个真实世界的例子吗？

请参阅
[https://developers.facebook.com/docs/mobile/android/build/#sso](https://developers.facebook.com/docs/mobile/android/build/#sso)

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-04-16T11:50:25.400

尝试

```
try {
PackageInfo info = getPackageManager().getPackageInfo("com.eatapp", PackageManager.GET_SIGNATURES);
for (Signature signature : info.signatures) {
    MessageDigest md = MessageDigest.getInstance("SHA");
    md.update(signature.toByteArray());
    Log.e("MY KEY HASH:", Base64.encodeToString(md.digest(), Base64.DEFAULT));
}
} catch (NameNotFoundException e) {

} catch (NoSuchAlgorithmException e) {

} 
```

在您的主要活动中:-) 这是适用于 Android SDK 3.0 的唯一解决方案

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-04-16T17:04:04.953

你可以这样创建

```
keytool -exportcert -alias androiddebugkey -keystore c:\Users\<your windows default user>\.android\debug.keystore | openssl sha1 -binary | openssl base64 
```

输入密钥库密码：android

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-09-05T09:09:27.900

```
 /**
     * Generates the hash key used for Facebook console to register app. It can also be used for other sdks) Method copied from: https://developers.facebook.com/docs/android/getting-started/
     */
    public static String printHashKey(Context ctx) {
        // Add code to print out the key hash
        try {
            PackageInfo info = ctx.getPackageManager().getPackageInfo(ctx.getPackageName(), PackageManager.GET_SIGNATURES);
            for (Signature signature : info.signatures) {
                MessageDigest md = MessageDigest.getInstance("SHA");
                md.update(signature.toByteArray());
                return Base64.encodeToString(md.digest(), Base64.DEFAULT);
            }
        } catch (NameNotFoundException e) {
            return "SHA-1 generation: the key count not be generated: NameNotFoundException thrown";
        } catch (NoSuchAlgorithmException e) {
            return "SHA-1 generation: the key count not be generated: NoSuchAlgorithmException thrown";
        }

        return "SHA-1 generation: epic failed";
    } 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-04-16T16:58:24.233

在eclipse中，**window** -> **preferences** -> **Android** -> **build** -> **default debug keystore**，复制路径替换`~/.android/debug.keystore`

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2016-10-26T13:41:46.453

当日志中出现错误时，当尝试登录 Facebook 时，查找如下所示的内容：

```
Invalid key hash. The key hash *** does not match any stored key hashes. Configure your app key hashes at http://developers.facebook.com/apps/565561836797777 
```

其中“***”是您需要使用的密钥。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2014-11-07T06:42:02.633

一种蛮力选择是继续尝试从您的应用程序中分享一些东西。然后，我的应用程序会显示一个 Facebook 页面，其中包含它尝试匹配的密钥。然后，您只需复制此密钥并将其放入您的 Facebook 开发人员 Facebook 帐户的“设置”页面。

不理想，但在紧要关头它可能会有所帮助。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-05-27T09:20:30.797

keytool -exportcert -alias androiddebugkey -keystore "debug.keystore 路径" | openssl sha1 -二进制 | openssl base64

如果您没有为 open ssl 和 java sdk 设置环境变量，则将 jdk 的 bin 文件夹路径代替 keytool 并将您的 openssl 路径代替 openssl 并且不要忘记为您的路径添加双引号

ex-"C:\Program Files\Java\jdk1.5.0_11\bin" -exportcert -alias androiddebugkey -keystore "C:\Users\amin.android\debug.keystore" | "F:\openssl\binsha1\openssl.exe" -二进制 | "F:\openssl\binsha1\openssl.exe" base64

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2012-04-18T08:24:40.320

我遇到了同样的问题，我花了几个小时寻找解决方案，但实际上 Facebook SDK 自己提供了解决方案。

在 DialogListener 类中，我修改了 onFacebookError 方法：

```
@Override 
public void onFacebookError(FacebookError error) {
   Log.d("myTag",error.getmessage); 
 } 
```

执行应用程序（使用我在市场上使用的相同密钥进行签名），LogCat 上将在此标签下显示一条消息，并带有正确的密钥。

我们还创建了一个简单的项目，它可以完成所有工作，并在警报框和 LogCat 上返回正确的密钥。您可以在[我们的博客](http://www.quintostdio.com/blog/archives/957)上找到它。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2020-09-14T07:07:50.517

有两种方法可以为 Facebook 生成 Hashkey。

1.  您可以使用以下代码片段

    ```
     try {
         PackageInfo info = getPackageManager().getPackageInfo(getPackageName(), PackageManager.GET_SIGNATURES);
         for (Signature signature : info.signatures) {
             MessageDigest messageDigest= MessageDigest.getInstance("SHA");
             messageDigest.update(signature.toByteArray());
             String hashKey = new String(Base64.encode(messageDigest.digest(), 0));
             Log.i("Hash Key ", "value is " + hashKey);
         }
     } catch (NoSuchAlgorithmException e) {
         Log.e("Exception ", "is ", e);
     } catch (Exception e) {
         Log.e("Exception ", "is ", e);
     } 
    ```

2.  [您可以通过在此链接](http://tomeko.net/online_tools/hex_to_base64.php)上粘贴您的 SHA1 来为 Facebook Online 创建 Hashkey

快乐编码:)

# java - 如何在eclipse中将外部jar打包到输出jar文件中

> ID：10042027
> 
> 赞同：0
> 
> 时间：2012-04-06T10:07:57.233
> 
> 标签：java, eclipse, eclipseme

我目前正在 Eclipse 上通过 Mobile Tools for Java (MTJ) 使用 J2me。我的程序需要通过 RSA 加密 SMS 消息，所以我尝试使用 bouncycastle 库。我下载 bouncycatle 1.47 版并添加到我的构建路径中。构建项目时不会出现问题。但是当我尝试在模拟器上运行时，我得到了这个错误：

```
TRACE: <at java.lang.NoClassDefFoundError: org/bouncycastle/crypto/engines/RSAEngine>, startApp threw an Exception 
```

这是一个常见的问题，NoClassDefFound。为了解决这个问题，我知道我必须在类路径中包含 bouncycastle 的类文件。但是问题来了，我无法将 bouncycastle 类文件打包到 MTJ 创建的 jar 中。对于常规项目，我需要做的就是勾选“订购和导出”选项卡中的复选框，以将“勾选”引用库中的所有类文件打包到输出 jar 中。我在这里做同样的事情，但是在我创建包之后，我检查了新的 jar 文件并且里面没有 bouncycastle 类（使用 WinRar 检查）。我做了一些我使用的是 Eclipse Indigo Release 2，build-id：20120216-1857， MTJ 版本 1.1.2。我也尝试通过 eclipse Pulsar 1.3.1 创建包，但问题仍然存在。有什么建议吗？这是一个错误吗？

问候。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T12:56:55.360

“订购和出口”并没有像您想象的那样工作。如果您有两个项目 - ProjectA 和 ProjectB 并且 ProjectA 依赖于 ProjectA，那么如果 ProjectA 需要 some.jar 并且您发现 ProjectB 也需要 some.jar，那么 ProjectA 中该 jar 的“订购和导出”使其“可见”也适用于 ProjectB。

对于 JAR 文件，您不能将另一个 jar 添加到 JAR 文件中（它适用于 WAR 和 EAR）。如何解决这个问题有两种可能

1.  您可以解压缩所需的 JAR 并将类文件添加到您的 jar 中，`jar -u`可以帮助您（这似乎很困难，但如果您使用的是 ant 或 maven，您将配置一次）
2.  您可以尝试使用[MANIFEST 标头](http://docs.oracle.com/javase/tutorial/deployment/jar/downman.html)

# android - 从 android 手机摄像头拍照并将其上传到 facebook 群组

> ID：10042029
> 
> 赞同：1
> 
> 时间：2012-04-06T10:08:10.557
> 
> 标签：android, facebook

我正在使用来自 hackbook 的代码进行 android 教程，并且我已经能够将图片上传到我的墙上。我现在想要的是上传一张从我的相机拍摄的照片，并将其上传到某个群组的某个相册中。

我认为需要修改的部分代码是这样的：

```
 /*
* Source Tag: upload_photo You can upload a photo from the media
* gallery or from a remote server How to upload photo:
* https://developers.facebook.com/blog/post/498/
*/
            case 3: {
                if (!Utility.mFacebook.isSessionValid()) {
                    Util.showAlert(this, "Warning", "You must first log in.");
                } else {
                    dialog = ProgressDialog.show(Hackbook.this, "",
                            getString(R.string.please_wait), true, true);
                    new AlertDialog.Builder(this)
                            .setTitle(R.string.gallery_remote_title)
                            .setMessage(R.string.gallery_remote_msg)
                            .setPositiveButton(R.string.gallery_button,
                                    new DialogInterface.OnClickListener() {
                                        @Override
                                        public void onClick(DialogInterface dialog, int which) {
                                            Intent intent = new Intent(Intent.ACTION_PICK,
                                                    (MediaStore.Images.Media.EXTERNAL_CONTENT_URI));
                                            startActivityForResult(intent,
                                                    PICK_EXISTING_PHOTO_RESULT_CODE);
                                        }

                                    })
                            .setNegativeButton(R.string.remote_button,
                                    new DialogInterface.OnClickListener() {
                                        @Override
                                        public void onClick(DialogInterface dialog, int which) {
                                            /*
* Source tag: upload_photo_tag
*/
                                            Bundle params = new Bundle();
                                            params.putString("url",
                                                    "http://www.facebook.com/images/devsite/iphone_connect_btn.jpg");
                                            params.putString("caption",
                                                    "FbAPIs Sample App photo upload");
                                            Utility.mAsyncRunner.request("me/photos", params,
                                                    "POST", new PhotoUploadListener(), null);
                                        }

                                    }).setOnCancelListener(new DialogInterface.OnCancelListener() {
                                @Override
                                public void onCancel(DialogInterface d) {
                                    dialog.dismiss();
                                }
                            }).show();
                }
                break;
            } 
```

那么你能帮我解决这个问题吗：1）有可能吗？或者我必须先把照片拍下来，把它存放在某个地方，然后再找到它。我想避免这种情况（我的意思是来自用户——如果它可以通过编程方式完成，那么就没有问题了）。2）我需要改变哪些论点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T11:43:37.900

这是可能的。在相机方面，您应该参考[Android 开发人员网站](http://developer.android.com/training/camera/photobasics.html)，从他们提供的网站中，您可以弄清楚如何临时存储数据并将图片上传到 Facebook 我使用以下代码

```
private void upload_FB(Bitmap photo2) {
    // TODO Auto-generated method stub
    Calendar c = Calendar.getInstance();
    String name = c.getTime().toString()+" Vai vajadzētu iegādāties?";

    AsyncFacebookRunner fruner = new AsyncFacebookRunner(facebook);
    Log.d("adr", mCurrentPhotoPath);
    if(photo2!=null && mCurrentPhotoPath!=null){
        ByteArrayOutputStream baos = new ByteArrayOutputStream();
        photo2.compress(Bitmap.CompressFormat.JPEG, 100, baos);
        byte[] bMapArray = baos.toByteArray();
        Bundle params = new Bundle();
        params.putByteArray("photo",bMapArray);
        params.putString("caption", name);
        params.putString("comments", ed1.getText().toString());
        fruner.request("me/photos",params,"POST",new PhotoUploadListener(),null);

    }
} 
```

祝你好运 ：）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-06T11:04:12.457

试试看 -

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    this.imageView = (ImageView)this.findViewById(R.id.imageView1);
    Button photoButton = (Button) this.findViewById(R.id.button1);
    photoButton.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View v) {
            Intent cameraIntent = new Intent(android.provider.MediaStore.ACTION_IMAGE_CAPTURE); 
            startActivityForResult(cameraIntent, CAMERA_REQUEST); 
        }
    });
}

protected void onActivityResult(int requestCode, int resultCode, Intent data) {  
    if (requestCode == CAMERA_REQUEST) {  
        Bitmap bmp = intent.getExtras().get("data");
        ByteArrayOutputStream stream = new ByteArrayOutputStream();

        bmp.compress(Bitmap.CompressFormat.PNG, 100, stream);
        byte[] byteArray = stream.toByteArray(); // convert camera photo to byte array
    }  
} 
```

你的 facebook 课程 -

```
public void onClick(DialogInterface dialog, int which) {
     Bundle params = new Bundle();

     params.putByteArray("picture", <image in bytes>);
     params.putString("message", "Have fun");

     mAsyncRunner.request("me/photos", bundle, "POST", new SampleUploadListener());
} 
```

# javascript - 哪个是最适合测量报告 Web 应用程序的 javascript 小部件库？

> ID：10042030
> 
> 赞同：1
> 
> 时间：2012-04-06T10:08:27.343
> 
> 标签：javascript, jquery, extjs, dojo

我正在启动一个新的 Web 应用程序，用于向工程师报告测量结果。我需要的主要组件是：

*   网格
*   图表
*   地图

我调查了以下 javascript 解决方案：

*   分机
*   道场
*   jQuery

Dojo 似乎是一个很好的一体化解决方案，但我想知道为什么它没有被广泛使用？为这些组件中的每一个（网格、地图、图表）建议了哪些小部件库？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-06T17:59:45.877

它通常取决于您的应用程序的性质 - 它是 Intranet/企业还是消费者？与基于企业/Intranet 的应用程序相比，高流量的全球网站具有不同的要求，特别是从性能和占用空间的角度来看。

假设您的应用程序是企业/非消费者市场应用程序，那么 extjs 和 Dojo 都会做得很好，因为您希望数据网格和图表它们在小部件的方法上是相似的（数据和视图的分离、封装、小部件类、继承等） . 我建议查看 dojo 夜间测试和 extjs 演示，以确保您选择的库具有您需要的功能。Dojo nightly 和演示： http: [//archive.dojotoolkit.org/nightly/dojotoolkit/](http://archive.dojotoolkit.org/nightly/dojotoolkit/) extjs：[http ://dev.sencha.com/deploy/ext-4.0.7-gpl/examples/](http://dev.sencha.com/deploy/ext-4.0.7-gpl/examples/)

extjs 是商业许可的（因此它更加精致），而 Dojo 是由社区努力驱动的完全开源的。Dojo 正在积极发展，dojo 1.7 有一些不错的增强功能，例如 AMD 虽然有很多 Dojo 文档，但您应该准备好查看多个地方以获取答案 - dojocampus、文档、夜间测试、小部件源代码等当然，stackoverflow :-) - 我发现学习整个系统并回馈社区很有趣，好消息是小部件系统可以通过许多扩展点进行扩展，因此您可以覆盖和自定义您想要的内容。

我们在我的大型企业公司的许多部门中广泛使用 Dojo，事实证明它是一个很好的整体解决方案。Dojo 也得到 IBM 的支持和支持。此外，Sitepen 为 Dojo 提供商业支持，并在其团队中有关键的 dojo 提交者。

JQuery 非常适合进行 DOM 操作、转换等，而且轻量且快速。Jquery UI 提供小部件并且有很多可用的插件 - 但您需要弄清楚许可模型，因为插件通常是单独许可的，并且还愿意彻底测试和修改它们/创建新插件/小部件以确保它们适合您的需要.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-06T13:17:19.747

[http://square.github.com/crossfilter/](http://square.github.com/crossfilter/)

也许这个？几周前它刚刚开源。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-06T15:29:01.210

您可以使用的另一个免费**JavaScript库：**

[Paper.js](http://paperjs.org/)

[拉斐尔.js](http://raphaeljs.com/)

它们都应该为您的需求提供足够的功能。

# javascript - Jquery $.ajax statusCode Else

> ID：10042040
> 
> 赞同：23
> 
> 时间：2012-04-06T10:09:28.693
> 
> 标签：javascript, jquery, ajax, http-status-codes

在 jquery Ajax 调用中，我目前正在处理 200 和 304 的状态代码。但我也定义了“错误”以捕获任何可能返回的错误。

如果有相关的验证消息，我们会返回状态码 400 - Bad Request。

然后在落入我定义的statusCode“400”函数之前落入“错误”函数。这意味着发生了两个动作。

理想情况下，我不想定义“错误”和“成功”，而只定义“状态代码”但我需要的是有一个“其他”，这样我就不需要声明只存在 2-3 的每个状态代码我想以不同的方式处理。

```
$.ajax({
        type: 'POST',
        contentType: "application/json",
        url: "../API/Employees.svc/" + EmployeeId + "/Company/" + CompanyId,
        data: jsonString,
        statusCode: {
            200: function () { //Employee_Company saved now updated

                hideLoading();
                ShowAlertMessage(SaveSuccessful, 2000);
                $('#ManageEmployee').dialog('close');

            },
            304: function () { //Nothing to save to Employee_Company

                hideLoading();
                $('#ManageEmployee').dialog('close');

                if (NothingToChange_Employee) {
                    ShowAlertMessage(NothingToUpdate, 2000);
                } else {
                    ShowAlertMessage(SaveSuccessful, 2000);
                }
            }
        },
        error: function (XMLHttpRequest, textStatus, errorThrown) {
            AjaxError(XMLHttpRequest, textStatus, errorThrown);
        }
    }); 
```

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-04-06T10:16:54.367

由于总是触发“完成”事件，您可以简单地从那里获取状态代码并忽略成功和错误功能

```
complete: function(e, xhr, settings){
    if(e.status === 200){

    }else if(e.status === 304){

    }else{

    }
} 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-12-16T19:55:14.667

这就是我要使用的：

```
error: function (xhr, textStatus, errorThrown) {
    switch (xhr.status) {
        case 401:
           // handle unauthorized
           break;
        default:
           AjaxError(xhr, textStatus, errorThrown);
           break;
    }
} 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2014-07-19T09:24:21.313

jQuery AJAX 响应`complete`, `success`,`error`已被弃用。用`.done`, `.fail`, `.always`promise 代替更新版本。

成功`.always`时签名为`.done`，失败时签名更改为`.fail`。使用`textStatus`您可以获取正确的变量并返回正文内容。

```
var jqxhr = $.ajax( {
    type: frm.attr('method'),
    url: frm.attr('action'),
    data: frm.serialize(),
    dataType: 'json',
    } )

    .done(function( data, textStatus, jqXHR ) {
        alert( "success" );
    })
    .fail(function( jqXHR, textStatus, errorThrown ) {
        alert( "error" );
    })

    .always(function( data_jqXHR, textStatus, jqXHR_errorThrown ) {

        if (textStatus === 'success') {
            var jqXHR = jqXHR_errorThrown;
        } else {
            var jqXHR = data_jqXHR;
        }
        var data = jqXHR.responseJSON;

        switch (jqXHR.status) {
            case 200:
            case 201:
            case 401:
            default:
                console.log(data);
                break;
        }   

});

jqxhr.always(function() {
    alert( "second complete" );
}); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-01-07T18:25:14.643

为了使该方法与您的初始逻辑相似，我将继续传递一个 statusCode 对象。但是，您仍然知道“else”将属于 4xx 或 5xx 类型的错误代码。

所以我会将您的原始代码更新为：

```
var statusCodeResponses = {
    200: function () { //Employee_Company saved now updated

        hideLoading();
        ShowAlertMessage(SaveSuccessful, 2000);
        $('#ManageEmployee').dialog('close');

    },
    304: function () { //Nothing to save to Employee_Company

        hideLoading();
        $('#ManageEmployee').dialog('close');

        if (NothingToChange_Employee) {
            ShowAlertMessage(NothingToUpdate, 2000);
        } else {
           ShowAlertMessage(SaveSuccessful, 2000);
        }
    }
};

var genericElseFunction = function(response){
    // do whatever other action you wanted to take
};

for(var badResponseCode=400; badResponseCode<=599; badResponseCode++){
     statusCodeResponses[badResponseCode] = genericElseFunction;
}

$.ajax({
    type: 'POST',
    contentType: "application/json",
    url: "../API/Employees.svc/" + EmployeeId + "/Company/" + CompanyId,
    data: jsonString,
    statusCode: statusCodeResponses,
    error: function (XMLHttpRequest, textStatus, errorThrown) {
        AjaxError(XMLHttpRequest, textStatus, errorThrown);
    }
}); 
```

# c++ - 如何在启用自动隐藏的 Windows 中检测任务栏的高度和方向？

> ID：10042041
> 
> 赞同：5
> 
> 时间：2012-04-06T10:09:33.083
> 
> 标签：c++, windows, qt, taskbar

我正在使用 Qt，我想做的是在 Windows 系统托盘中的图标上显示自定义弹出窗口。我可以通过使用geometry() 和任务栏高度通过查找screenGeometry() 和availableGeometry() 之间的差异来获取图标坐标。因此，弹出窗口可以正确对齐，并且不会与不同任务栏方向的任务栏重叠（例如，当任务栏位于左侧或屏幕顶部时）。

当任务栏的自动隐藏打开时，问题就开始了，然后显然 availableGeometry 返回与 screenGeometry 相同的值，我再也找不到任务栏的高度了。这会导致弹出窗口与任务栏重叠，甚至显示在错误的位置。

我的问题是：启用自动隐藏后，如何正确检测 Windows 中任务栏的方向和大小？我应该使用一些 winapi 功能，还是可以纯粹在 Qt 中使用（首选）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-06T10:40:39.227

[1）自动隐藏您使用此检查的状态：http: //msdn.microsoft.com/en-us/library/bb787947](http://msdn.microsoft.com/en-us/library/bb787947(v=vs.85).aspx) (v=vs.85) .aspx 2）并使用此查找宽度/高度/方向：[http:// /msdn.microsoft.com/en-us/library/bb787953(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/bb787953(v=vs.85).aspx)

希望这可以帮助。是的，这是 WinAPI 函数，所以你应该只在“#ifdef Q_OS_WINDOWS”中使用这个代码——如果你也想在 Linux 上编译的话。

# mysql - MySQL自动增量ID突然跳到MAXINT，可能是什么原因？

> ID：10042042
> 
> 赞同：4
> 
> 时间：2012-04-06T10:09:58.560
> 
> 标签：mysql, auto-increment

我有一个包含大约 2,000,000 个条目的 mysql 表，主键是自动递增的。然而，在某一时刻，自动增量值突然从原来的值（大约 2,000,000）跃升至最大整数值（2,147,483,647）。不用说，所有后续插入该表的操作都失败了。当我注意到它时，我将主键类型从 int 更改为 bigint，所以它现在可以正常工作。

所以我的问题是，为什么会发生这种情况？是否有任何预防措施可以避免将来发生这种情况？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-06T10:12:07.030

插入失败仍会导致自动增量列增加。如果您的程序陷入无限循环的失败，可能会导致达到限制。

也可以通过编程将自动增量设置为特定值。

```
ALTER TABLE yourtable AUTO_INCREMENT = 12345; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-06T11:18:40.713

造成这种情况的一个原因可能是——

如果您在自动增量栏中输入了随机数，则可能是因为`auto_increment`只能按升序排列。因此，当您插入接近最大限制的数字时，它很快就达到了最大限制，您无法输入其他任何内容。

# php - eclipse环境中的Javascript调试器

> ID：10042043
> 
> 赞同：0
> 
> 时间：2012-04-06T10:10:06.047
> 
> 标签：php, javascript, eclipse-plugin, zend-debugger

如何在所有环境都停止工作的情况下安装一个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T10:28:21.530

不。使用 Chorme 中的开发人员工具（包括调试器）或 Firefox 的 Firebug 插件。

`Run`您可以做的是在→中设置 Chrome 或 Firefox，`External tools`以便在其中轻松测试您的代码。看这里：

*   [http://www.avajava.com/tutorials/lessons/how-do-i-open-a-browser-window-via-eclipse.html?page=1](http://www.avajava.com/tutorials/lessons/how-do-i-open-a-browser-window-via-eclipse.html?page=1)

# backbone.js - Require.js 按顺序加载 Backbone 视图

> ID：10042044
> 
> 赞同：0
> 
> 时间：2012-04-06T10:10:13.707
> 
> 标签：backbone.js, requirejs

我在使用 RequireJS 加载主干视图集合时遇到问题 - 因为它们没有按正确的顺序加载。

下面是我想要实现的一个简单示例 - 一个页面循环通过一组小部件，并使用它的“模板”属性，获取它的主干视图。这些按顺序显示至关重要，并且它们当前以随机顺序显示。

**page.js**

```
collection.each(function(widget) {
    require(['order!views/widgets/' + widget.get('template')], function(WidgetView) {
        WidgetView.render();
    })
} 
```

**小部件/widgetView.js（通用视图）**

```
define(['underscore','backbone'], function(_, Backbone) {
    var WidgetView = Backbone.View.extend({
        render: function() {
            // .. show view
        }
    });
   return WidgetView;
}); 
```

我知道顺序！RequireJS 的插件，但它似乎没有完成它的工作。有什么我做错了吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T11:30:49.143

据我所知，发出多个`require`调用将以异步模式获取依赖项。您可能需要构建视图数组，然后才需要它们。例如，

```
var widgets=[];
collection.each(function(widget) {
    widgets.push('order!views/widgets/' + widget.get('template'));
});

require(widgets, function() {
    var viewclass, view;
    for (var i=0, l=arguments.length; i<l; i++) {
        viewclass=arguments[i];
        view=new viewclass();
        view.render();
    }   
}); 
```

# .net - 在 Silverlight 4 Datagrid 中选择多个单元格

> ID：10042046
> 
> 赞同：0
> 
> 时间：2012-04-06T10:10:22.343
> 
> 标签：.net, silverlight-4.0, datagrid

我在 Silverlight 4 Datagrid 中有一些 6 列。在数据网格中的每个单元格上，我们都显示了一些自定义控件。现在我应该允许用户从每一列中选择一个控件。一旦他们从每一列中选择一个控件，然后将去并单击“确定”按钮以执行一些工作。需要注意的是，他可能会从不同的列中选择不同的单元格。他们可能不在同一行。

我们如何在网格中实现这种功能。关于我们应该如何处理这个问题的任何建议。有没有办法在 Silverlight 4 Datagrid 中选择多个单元格？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T10:34:20.180

```
 <DataGrid ItemsSource="{Binding}" AutoGenerateColumns="False" SelectionMode="Extended" SelectionUnit="CellOrRowHeader" /> 
```

# extjs - Extjs checkcolumn 禁用某些行，基于值

> ID：10042052
> 
> 赞同：16
> 
> 时间：2012-04-06T10:10:38.263
> 
> 标签：extjs, datagrid, checkbox, extjs4

我有一个网格，带有校验列。例如，它的 dataIndex 是“已检查”。

我想禁用或隐藏某些行的复选框，其中另一个值（例如“can_be_checked”）为假/空。

渲染器已经在 checkcolumn 中定义，弄乱它会破坏复选框的生成。

我该怎么做？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-04-06T10:40:53.953

您可以在渲染器中隐藏复选框，例如：

```
column.renderer = function(val, m, rec) {
    if (rec.get('can_be_checked') == 'FALSE'))
        return '';
    else
        return (new Ext.ux.CheckColumn()).renderer(val);
}; 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-05-30T23:24:59.670

我一直在寻找解决方案并遇到了这个问题，但是在任何地方都没有可行的解决方案来显示禁用的复选框，而不是其他答案中涵盖的 NO 复选框。这有点涉及，但这是我所做的（对于 4.1.0）：

1.  我发现使用的*extjs\examples\ux\css\CheckHeader.css*文件`Ext.ux.CheckColumn`没有禁用的类，因此我不得不将其修改为更像*ext-all.css*中包含的标准复选框样式（其中确实包括一个禁用的复选框类）。

2.  我必须扩展`Ext.ux.CheckColumn`以防止事件被禁用的复选框触发。

3.  最后，我必须提供自己的渲染器来根据我的逻辑应用禁用的类。

代码如下。

**修改 CheckHeader.css：**

```
.x-grid-cell-checkcolumn .x-grid-cell-inner {
    padding-top: 4px;
    padding-bottom: 2px;
    line-height: 14px;
}
.x-grid-with-row-lines .x-grid-cell-checkcolumn .x-grid-cell-inner {
    padding-top: 3px;
}

.x-grid-checkheader {
    width: 13px;
    height: 13px;
    background-image: url('../images/checkbox.gif');
    background-repeat: no-repeat;
    background-color: transparent;
    overflow: hidden;
    padding: 0;
    border: 0;
    display: block;
    margin: auto;
}

.x-grid-checkheader-checked {
    background-position: 0 -13px;
}

.x-grid-checkheader-disabled {
    background-position: -39px 0;
}

.x-grid-checkheader-checked-disabled {
    background-position: -39px -13px;
}

.x-grid-checkheader-editor .x-form-cb-wrap {
    text-align: center;
} 
```

上面的背景图片 url 指向这个通常随 extjs 4.1.0 一起提供的图片：*extjs\resources\themes\images\default\form\checkbox.gif*。

![extjs\resources\themes\images\default\form\checkbox.gif](../Images/97f3b1635c656f54c3ae4d79bd3e4fdf.png)

**扩展的 Ext.ux.CheckColumn 类，以便事件不会从禁用的检查列中触发：**

```
Ext.define('MyApp.ux.DisableCheckColumn', {
    extend: 'Ext.ux.CheckColumn',
    alias: 'widget.disablecheckcolumn',

    /**
     * Only process events for checkboxes that do not have a "disabled" class
     */
    processEvent: function(type, view, cell, recordIndex, cellIndex, e) {
        var enabled = Ext.query('[class*=disabled]', cell).length == 0,
            me = this;

        if (enabled) {
            me.callParent(arguments);
        }
    },

}); 
```

**使用自定义渲染器实现根据我自己的逻辑应用禁用的类：**

```
column = {
    xtype: 'disablecheckcolumn',
    text: myText,
    dataIndex: myDataIndex,
    renderer: function(value, meta, record) {
        var cssPrefix = Ext.baseCSSPrefix,
            cls = [cssPrefix + 'grid-checkheader'],
            disabled = // logic to disable checkbox e.g.: !can_be_checked

        if (value && disabled) {
            cls.push(cssPrefix + 'grid-checkheader-checked-disabled');
        } else if (value) {
            cls.push(cssPrefix + 'grid-checkheader-checked');
        } else if (disabled) {
            cls.push(cssPrefix + 'grid-checkheader-disabled');
        }

        return '<div class="' + cls.join(' ') + '">&#160;</div>';

    }
}; 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-11-12T09:33:28.103

使用 extjs 5 更容易在渲染器方法中为目标复选框返回 defaultRenderer，为其他复选框返回 ''。

```
renderer: function (value, metaData, record) {
    return (record.isLeaf()) ? '' : this.defaultRenderer(value, metaData);
} 
```

这样不会呈现复选框本身，但将保留所有事件（即 checkchange、itemclick 等）。如果你也不想要它们，你可以在 beforesmth 事件中禁用它们，例如

```
onBeforeCheckRequestsChange: function(me, rowIndex, checked, eOpts) {
    var row = me.getView().getRow(rowIndex),
        record = me.getView().getRecord(row);
    return !record.isLeaf();
}, 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-09-29T20:24:39.583

我找到了使用 Aniketos 代码时无法单击复选框问题的解决方案，您必须确保在列的代码中指定 xtype: 'checkcolumn，这样可以解决问题

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-01-15T23:16:32.383

我也遇到了这个问题，为了更进一步，我需要在复选框上显示一个工具提示。这是我想出的解决方案，它似乎对现有的 checkcolumn 小部件侵入性最小......

```
renderer: function (value, metaData, record) {
    // Add a tooltip to the cell
    metaData.tdAttr = (record.get("someColumn") === "") ? 'data-qtip="A tip here"' : 'data-qtip="Alternate tip here"';

    if (record.get("someColumn") === "") {
        metaData.tdClass += " " + this.disabledCls;
    }

    // Using the built in defaultRenderer of the checkcolumn
    return this.defaultRenderer(value, metaData);
} 
```

# javascript - 点击后输入文本恢复默认值

> ID：10042057
> 
> 赞同：1
> 
> 时间：2012-04-06T10:11:09.417
> 
> 标签：javascript, html

下面的表格可以按我的意愿工作，除了一件事。当我单击“添加”链接时，所有文本框的文本都会返回到其默认值，如图像中所示。我该如何解决？谢谢。

点击前：

![第一张图片](../Images/c852c66ab6a38256f1cdc40a95167dec.png)

点击“添加”后：

![第二张图片](../Images/5b576e5449a547b9bf4334bcd428512f.png)

代码：

```
function addSection() {
    var str = '<div>' + 
                '<input type="text" name="composer" value="Compositor" />' + 
                '<input type="text" name="peca" value="Peca" size="40" />' + 
                '<input type="button" value="x" style="width: 26px" onclick="delSection(this)" /><br />' + 
            '</div>';

    document.getElementById("programa").innerHTML += str;
}

function delSection(field) {
    field.parentNode.outerHTML = "";
}

window.onload = addSection;

</script>
<fieldset>
    <legend>Programa</legend>
    <div id="programa">
    </div>
    <a href="#" onclick="addSection()" >Add</a><br />
</fieldset>
<input type="submit" value="Inscrever Aluno" name="submit" /> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T10:27:20.577

你可以克服这个，使用`appendChild()`

JS

```
function newSet() {
    var div = document.createElement("div");   

    var composer = document.createElement("input");
    composer.type="text";
    composer.value = "Compositer";

    var peca = document.createElement("input");
    peca.type = "text";
    peca.value = "Peca";

    var button = document.createElement("input");
    button.type = "submit"

    div.appendChild(composer);
    div.appendChild(peca);
    div.appendChild(button);

    return div
}

function addSection() {    
    document.getElementById("programa").appendChild(newSet());
} 
```

### [演示](http://jsfiddle.net/Starx/sK8MR/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-06T10:29:21.057

这是插入新元素的正确 JS：

```
function addSection() {
    var newDiv = document.createElement('div');
    var str =   '<input type="text" name="composer" value="Compositor" />' + 
                '<input type="text" name="peca" value="Peca" size="40" />' + 
                '<input type="button" value="x" style="width: 26px" onclick="delSection(this)" /><br />';
    newDiv.innerHTML = str;
    document.getElementById("programa").appendChild(newDiv);
} 
```

您需要找到命名（或识别）元素的解决方案，以便您可以使用`delSelection(field)`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-06T10:19:39.237

创建一个名称，例如`name="composer[]"`和`name="peca[]"`

如果您不了解如何实现上述代码，请转到

[http://www.randomsnippets.com/2008/02/21/how-to-dynamically-add-form-elements-via-javascript/](http://www.randomsnippets.com/2008/02/21/how-to-dynamically-add-form-elements-via-javascript/)

# javascript - 如何创建一个屏幕键盘来显示当前正在键入的键？

> ID：10042058
> 
> 赞同：1
> 
> 时间：2012-04-06T10:11:09.727
> 
> 标签：javascript, typing

我有一个在线打字程序，我想为他们创建一个屏幕键盘，就像他们在打字程序中所做的那样，例如 Keyblaze Typing Tutor。那么有没有办法创建一个 JavaScript 程序来显示用户当前正在键入的键（呈现美学无关紧要）？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-06T10:13:51.397

尝试扩展这个[例子](http://jsfiddle.net/AHPaY/6/)

jQuery：

```
$(function () {
  $("#input").keydown(function (event) {
      $("#" + String.fromCharCode(event.which)).addClass("trigger");
  }).keyup(function (event) {
      $("#" + String.fromCharCode(event.which)).removeClass("trigger");
  });
});​ 
```

您可以使用纯 HTML 和 CSS 创建键盘。看看这个[漂亮的例子](http://jsfiddle.net/jackdent/NED76/embedded/result/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-14T05:38:11.683

[您可以在此站点](http://mottie.github.com/Keyboard/)上的 Screen Keyboard Plugin 上找到不错的 jQuery 。也阅读文档。

![在此处输入图像描述](../Images/332610819df132ebb59bedf88737d71d.png)

看起来像这样...

# javascript - 访问使用 ajax 动态插入的内容

> ID：10042063
> 
> 赞同：0
> 
> 时间：2012-04-06T10:11:30.067
> 
> 标签：javascript, jquery

这是用 ajax 插入的代码片段：

```
<form>
    <label for = "task-name">Name</label>
    <input type = "text" id = "task-name" />

    <label for = "task-description">Description</label>
    <input type = "text" id = "task-description" />

    <input type = "hidden" id = "task-col" />
    <input type = "hidden" id = "task-row" />

    <input type = "submit" id = "add-task" onclick="return false" value="Add" />

</form> 
```

这是在 DOM 中插入前一个元素的 JS 代码：

```
$('html').on('click', '.task-pop', function(){
    var pos = $(this).parent().parent().attr('class').split("-");
    ajaxObj = getXmlHttpObject();
    ajaxObj.onreadystatechange = function(){
        if(ajaxObj.readyState == 4 && ajaxObj.status == 200){
            $('#pop-hold').html(ajaxObj.responseText);
            $('#task-col').val(pos[0]);
            $('#task-row').val(pos[1]);
        }
    };
    ajaxObj.open("GET","resources/component/newTask.jsp");
    ajaxObj.send(null);

    $('#pop-blk').css('display','block');
    $('#pop').show("fast");
}); 
```

如您所见，我正在尝试向隐藏的输入`#task-row`和`#task-col`动态添加的内容添加一些值。

该页面已正确显示并且没有引发错误，但从未访问过这两个字段。我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T10:17:41.750

改变

```
$('#pop-hold').html(ajaxObj.responseText);
$('#task-col').val(pos[0]);
$('#task-row').val(pos[1]); 
```

和

```
var html = $(ajaxObj.responseText);
html.find('#task-col').val(pos[0]);
html.find('#task-row').val(pos[1]);
$('#pop-hold').html('').append(html); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-06T10:32:36.070

你应该使用**jQuery** ajax()，这样你会更容易处理整个 Ajax 的事情：

```
$('html').on('click', '.task-pop', function(){
    var pos = $(this).parent().parent().attr('class').split("-");

    $.ajax({
      url: 'resources/component/newTask.jsp',
      type: 'GET', // Default value is GET but I included it for you
      success: function(data) {
            $('#pop-hold').empty().append(data);
            $('#task-col').val(pos[0]);
            $('#task-row').val(pos[1]);
      }
    });

    $('#pop-blk').css('display','block');
    $('#pop').show("fast");
}); 
```

只是解决方案的一部分，希望对您有所帮助^^

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-06T10:48:04.513

输入被隐藏这一事实并不能阻止您使用`val()`. 当您像这样调用 val 函数时`$('#task-col').val(pos[0]);`，请确保：

*   #task-col 元素存在
*   pos[0] 不是未定义的（您可以通过替换来`pos[0]`测试`"test"`）
*   您实际上正在执行此行（您可以通过在前面放置`altet("test")`一行来进行测试）

当你使用 jQuery 时，不要像@Ethenyl 所说的那样乱用 getXmlHttpObject 。改用[$.ajax](http://api.jquery.com/jQuery.ajax/)。

# c# - 在 ViewModel 中处理对话框的最佳方法是什么？

> ID：10042067
> 
> 赞同：4
> 
> 时间：2012-04-06T10:11:39.153
> 
> 标签：c#, wpf, mvvm

**跟进 IDialogService 方法：**

`System.Windows.MessageBoxResult`枚举呢？将其排除在接口之外并仅将其包含在实现中的更好方法是什么？

**我为`System.Windows.MessageBoxResult`枚举**选择的方法：

我在 IDialogInterface 旁边添加了一个枚举，包括 Yes、NO、Ok、Cancel：

```
namespace Foo.Bar.Dialogs
{
    public enum DialogResult { Ok, Yes, No, Cancel }

    public interface IDialogService
    {
        void ShowErrorBox(string error_message);

        DialogResult ShowQuestionBox(string question_message);

        DialogResult ShowQuestionBox(string question_message, string caption);

        DialogResult ShowQuestionBox(string question_message, string caption, bool allow_cancel);

        DialogResult ShowQuestionBox(string question_message, string caption, bool allow_cancel, bool show_as_error);

        void ShowWarningBox(string message, string caption = "");

        void ShowInformationBox(string message);

        void ShowInformationBox(string message, string caption);
    }
} 
```

**最初的问题：**

我正在将所有命令从我的 .asmx.cs 文件移动到某个应用程序主窗口的 ViewModel 中。

现在我必须弄清楚如何处理要求用户确认的命令。

*现在*我只需要在我的 ViewModel 中引入必要的类型来直接启动我的对话框。我很确定这不是最好或*最干净*的方法。

我发现这篇[文章](http://andrewtokeley.net/archive/2010/07/25/mvvm-and-confirmation-dialogs.aspx)采用了一种有趣且更简洁的方法。它使用 IDialogService 接口：

```
public interface IDialogService
{
    int Width { get; set; }
    int Height { get; set; }
    void Show(string title, string message, Action<DialogResult> onClosedCallback);
} 
```

我还发现这篇[文章](http://code.msdn.microsoft.com/How-to-implement-MVVM-71a65441)似乎更好，因为它在尝试使用之前检查 IDialogInterface 是否为空：

```
private void PerformAddNewCustomer() 
{ 
    CustomerList.Add(new Customer { Name = "Name" + i }); 
    i++; 

    if (dialogService != null) 
    { 
        dialogService.Show("Customed added"); 
    } 
} 
```

这是将对话框与 ViewModel 分开的最佳方法，还是有更好的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T10:28:12.923

我会说您发布的链接中的方法是一种很好的方法，并且非常普遍（来源：我正在查看网络上的代码；））。它使用起来相当简单，它通过在单元测试中使用虚拟服务使对话框可测试，并简化了重构对话框的过程。

就个人而言，我的`DialogService`方法签名需要一个列表，`Tuple<string, Action>`并基于该列表创建对话窗口的按钮。它允许`ViewModel`从对话窗口请求一些特殊功能，而不必每次我的需要不仅仅是一个`Ok`或`YesNo`消息框时向我的服务添加新方法（而我确实将这些方法作为方法单独使用以方便使用）。

所以这是一种可靠的方法，在这一点上，我认为你不会找到更好的东西，只有你可能更个人喜欢的东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-06T10:20:33.310

您发现的文章是处理 MVVM 中对话窗口的好方法，它确实可重用，并且使用 DI 很容易在您的视图中使用。

我确实使用了不同的东西，大多数时候我使用 MVVM 轻工具包，它有一个信使，我使用信使向一个单独的类发送消息，然后它为我打开了我想显示的对话框，结果是回消息，以便我可以根据用户的选择采取行动。

# c# - C# ICMPv6 校验和计算

> ID：10042069
> 
> 赞同：1
> 
> 时间：2012-04-06T10:11:51.440
> 
> 标签：c#, checksum

我需要计算 ICMPv6 校验和。我在 RFC 2460 中找到了正确的手册，并用 c# 编写了代码，粘贴在下面。在代码中，您可以看到我添加到校验和源 IP、数据包的目标 IP，而不是 ICMPv6 消息长度（邻居广告为 32 个字节），然后我添加下一个标头 ID，即 ICMPv6 的 58。然后是 FOR 循环，它将整个 ICMPv6 消息添加到校验和（我相信它以消息类型开头，例如 88 00 ... 用于邻居广告）。比我计算和补充校验和，但它是错误的。我正在尝试为真实嗅探的邻居广告计算此校验和，该校验和也在下方，但我无法获得相同的校验和。我的代码可能有什么问题？

```
static void Main(string[] args)
    {

        ICaptureDevice device = new OfflineCaptureDevice("icmp.pcap");
        device.Open();

        device.OnPacketArrival += new SharpPcap.PacketArrivalEventHandler(device_OnPacketArrival);
        device.Capture();

        Console.ReadKey();
    }

    private static void device_OnPacketArrival(object sender, SharpPcap.CaptureEventArgs e)
    {
        try
        {
            //packet conversions
            var packet = PacketDotNet.Packet.ParsePacket(e.Packet);
            var ethernetPacket = ((PacketDotNet.EthernetPacket)packet);
            int dlzka_packetu = e.Packet.Data.Length;
            string eth = BitConverter.ToString(ethernetPacket.Bytes);

            //now its in string field format - one string item is one byte, e.g. FF
            string[] eth_final2 = eth.Split('-');
            foreach (string bytes in eth_final2) { Console.Write(bytes + " "); }
            Console.WriteLine();

            //taking out source IP
            IPAddress src_ip = IPAddress.Parse(eth_final2[22]+eth_final2[23]+":"+eth_final2[24]+eth_final2[25]+":"+eth_final2[26]+eth_final2[27]+":"+eth_final2[28]+eth_final2[29]+":"+eth_final2[30]+eth_final2[31]+":"+eth_final2[32]+eth_final2[33]+":"+eth_final2[34]+eth_final2[35]+":"+eth_final2[36]+eth_final2[37]);

            //destination IP
            IPAddress dst_ip = IPAddress.Parse(eth_final2[38] + eth_final2[39] + ":" + eth_final2[40] + eth_final2[41] + ":" + eth_final2[42] + eth_final2[43] + ":" + eth_final2[44] + eth_final2[45] + ":" + eth_final2[46] + eth_final2[47] + ":" + eth_final2[48] + eth_final2[49] + ":" + eth_final2[50] + eth_final2[51] + ":" + eth_final2[52] + eth_final2[53]);

            Console.WriteLine(src_ip);
            Console.WriteLine(dst_ip);
            int icmpv6_length = 32;
            int next_header = 58;
            Console.WriteLine();

            string icmp_payload = "";

            //taking out ICMPv6 message
            for (int i = 54; i < 54 + 32; i++)
            {
                if (i == 56 || i == 57) { icmp_payload += "00"; }
                else icmp_payload += eth_final2[i];
            }

            Console.WriteLine(icmp_payload);
            byte[] icmp_bytes = GetStringToBytes(icmp_payload);

            //CALLING THE FUNCTION ICMPchecksum
            ushort sum = ICMPchecksum(src_ip.GetAddressBytes(), dst_ip.GetAddressBytes(), BitConverter.GetBytes(icmpv6_length), BitConverter.GetBytes(next_header), icmp_bytes);

            Console.WriteLine(sum.ToString("X"));

        }
        catch (Exception ex)
        {
            Console.WriteLine("ERROR");
        }

    }

    static byte[] GetStringToBytes(string value)
    {
        SoapHexBinary shb = SoapHexBinary.Parse(value);
        return shb.Value;
    }

    static ushort ICMPchecksum(byte[] src_ip, byte[] dst_ip, byte[] length, byte[] next, byte[] payload)
    {
        ushort checksum = 0;

        //length of byte fields
        Console.WriteLine("src_ip: "+src_ip.Length+" dst_ip: "+dst_ip.Length+" length: "+length.Length+" next_header: "+next.Length+" payload: "+payload.Length);

        //display all fields, which will be used for checksum calculation
        Console.WriteLine(BitConverter.ToString(src_ip));
        Console.WriteLine(BitConverter.ToString(dst_ip));
        Console.WriteLine(BitConverter.ToString(length));
        Console.WriteLine(BitConverter.ToString(next));
        Console.WriteLine(BitConverter.ToString(payload));

        //ADDS SOURCE IPv6 address
        checksum += BitConverter.ToUInt16(src_ip, 0);
        checksum += BitConverter.ToUInt16(src_ip, 2);
        checksum += BitConverter.ToUInt16(src_ip, 4);
        checksum += BitConverter.ToUInt16(src_ip, 6);
        checksum += BitConverter.ToUInt16(src_ip, 8);
        checksum += BitConverter.ToUInt16(src_ip, 10);
        checksum += BitConverter.ToUInt16(src_ip, 12);
        checksum += BitConverter.ToUInt16(src_ip, 14);

        //ADDS DEST IPv6 address
        checksum += BitConverter.ToUInt16(dst_ip, 0);
        checksum += BitConverter.ToUInt16(dst_ip, 2);
        checksum += BitConverter.ToUInt16(dst_ip, 4);
        checksum += BitConverter.ToUInt16(dst_ip, 6);
        checksum += BitConverter.ToUInt16(dst_ip, 8);
        checksum += BitConverter.ToUInt16(dst_ip, 10);
        checksum += BitConverter.ToUInt16(dst_ip, 12);
        checksum += BitConverter.ToUInt16(dst_ip, 14);

        //ADDS LENGTH OF ICMPv6 packet
        checksum += BitConverter.ToUInt16(length, 0);
        checksum += BitConverter.ToUInt16(length, 2);

        //ADDS NEXT HEADER ID = 58
        checksum += BitConverter.ToUInt16(next, 0);
        checksum += BitConverter.ToUInt16(next, 2);

        //ADDS WHOLE ICMPv6 message
        for (int i = 0; i < payload.Length; i = i + 2)
        {
            Console.WriteLine(i);
            checksum += BitConverter.ToUInt16(payload, i);
        }

        checksum += (ushort)(checksum >> 16);

        return (ushort)~checksum;
    } 
```

这是数据包屏幕。

唯一链接：http: [//img831.imageshack.us/img831/7237/icmpv6.png](http://img831.imageshack.us/img831/7237/icmpv6.png)

加上链接，您可以在其中下载文件，我正在使用该链接进行测试：

[http://www.2shared.com/file/wIETWTWB/icmp.html](http://www.2shared.com/file/wIETWTWB/icmp.html)

感谢帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T20:32:20.757

> 有效负载用于 ICMPv6 消息，因为它已在我的问题中发布的图片中签名

至少这是错误的。计算校验和时，应首先将表示校验和本身的字节替换为 0。

## 更新

根据您的 icmp.pcap，我创建了一个独立程序来计算校验和。有关完整来源，请参见下文。

最重要的错误是：

```
 ushort checksum = 0; 
```

虽然校验和是 16 位的，但该算法需要至少 32 位的临时值：

```
 uint checksum = 0; 
```

校验和计算需要[一个补码算法](http://en.wikipedia.org/wiki/Ones%27_complement)，其中加法的进位环绕。为了提高性能，所有的包装都在最后完成；

```
checksum += (ushort)(checksum >> 16); 
```

但这只有在校验和超过 16 位时才有可能。否则这条线将毫无用处。

但是还有其他一些事情需要考虑。BitConverter.ToUInt16 取决于处理器的[字节序](http://en.wikipedia.org/wiki/Endianness)，可能是小字节序。那将产生结果`A5AB`。这可能不是您所期望的，但是如果您切换字节，您会得到正确的版本。[我从这里](http://snipplr.com/view/15179/adapt-systembitconverter-to-handle-big-endian-network-byte-ordering-in-order-to-create-number-types-from-bytes-and-viceversa/)插入了一个函数来解决这个问题。那将产生结果`ABA5`。另一方面，如果在计算之前没有将校验和设置为 0，那么如果校验和有效，ICMPchecksum 将始终[返回 0](https://stackoverflow.com/a/7460075/33499)。另请注意，您的函数无法处理奇数长度的有效负载。

```
class Program {
    static void Main (string [] args)
    {
        byte[] src_ip = new byte[]
                            {
                                0xfe, 0x80, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
                                0x02, 0x19, 0x55, 0xff, 0xfe, 0x27, 0x27, 0xd0
                            };

        byte[] dst_ip = new byte[]
                            {
                                0xfe, 0x80, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
                                0x02, 0x22, 0x75, 0xff, 0xfe, 0xd6, 0xfe, 0x50
                            };
        byte[] length = new byte[] {0, 0, 0, 32};
        byte [] next = new byte [] { 0, 0, 0, 58 };
        byte[] payload = new byte[]
                             {
                                 0x88, 0x00, 0xab, 0xa5, 0xe0, 0x00, 0x00, 0x00, 
                                 0xfe, 0x80, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
                                 0x02, 0x19, 0x55, 0xff, 0xfe, 0x27, 0x27, 0xd0,
                                 0x02, 0x01, 0x00, 0x19, 0x55, 0x27, 0x27, 0xd0
                             };
#if true
        payload [2] = 0;
        payload [3] = 0;
#endif

        ushort checksum = ICMPchecksum(src_ip, dst_ip, length, next, payload);

        Console.WriteLine (checksum.ToString ("X"));
        Console.ReadKey ();
    }

    public static ushort BitConverterToUInt16 (byte [] value, int startIndex)
    {
#if false
            return System.BitConverter.ToUInt16 (value, startIndex);
#else
            return System.BitConverter.ToUInt16 (value.Reverse ().ToArray (), value.Length - sizeof (UInt16) - startIndex);
#endif
    }

    static ushort ICMPchecksum (byte [] src_ip, byte [] dst_ip, byte [] length, byte [] next, byte [] payload)
    {
        uint checksum = 0;

        //length of byte fields
        Console.WriteLine ("src_ip: " + src_ip.Length + " dst_ip: " + dst_ip.Length + " length: " + length.Length + " next_header: " + next.Length + " payload: " + payload.Length);

        //display all fields, which will be used for checksum calculation
        Console.WriteLine (BitConverter.ToString (src_ip));
        Console.WriteLine (BitConverter.ToString (dst_ip));
        Console.WriteLine (BitConverter.ToString (length));
        Console.WriteLine (BitConverter.ToString (next));
        Console.WriteLine (BitConverter.ToString (payload));

        //ADDS SOURCE IPv6 address
        checksum += BitConverterToUInt16 (src_ip, 0);
        checksum += BitConverterToUInt16 (src_ip, 2);
        checksum += BitConverterToUInt16 (src_ip, 4);
        checksum += BitConverterToUInt16 (src_ip, 6);
        checksum += BitConverterToUInt16 (src_ip, 8);
        checksum += BitConverterToUInt16 (src_ip, 10);
        checksum += BitConverterToUInt16 (src_ip, 12);
        checksum += BitConverterToUInt16 (src_ip, 14);

        //ADDS DEST IPv6 address
        checksum += BitConverterToUInt16 (dst_ip, 0);
        checksum += BitConverterToUInt16 (dst_ip, 2);
        checksum += BitConverterToUInt16 (dst_ip, 4);
        checksum += BitConverterToUInt16 (dst_ip, 6);
        checksum += BitConverterToUInt16 (dst_ip, 8);
        checksum += BitConverterToUInt16 (dst_ip, 10);
        checksum += BitConverterToUInt16 (dst_ip, 12);
        checksum += BitConverterToUInt16 (dst_ip, 14);

        //ADDS LENGTH OF ICMPv6 packet
        checksum += BitConverterToUInt16 (length, 0);
        checksum += BitConverterToUInt16 (length, 2);

        //ADDS NEXT HEADER ID = 58
        checksum += BitConverterToUInt16 (next, 0);
        checksum += BitConverterToUInt16 (next, 2);

        //ADDS WHOLE ICMPv6 message
        for (int i = 0; i < payload.Length; i = i + 2) {
            Console.WriteLine (i);
            checksum += BitConverterToUInt16 (payload, i);
        }

        checksum += (ushort)(checksum >> 16);

        return (ushort)~checksum;
    }
} 
```

# iphone - 动态创建 UIButtons - 逻辑错误

> ID：10042071
> 
> 赞同：0
> 
> 时间：2012-04-06T10:11:54.580
> 
> 标签：iphone, objective-c

我有一个`NSMutableArray`，并且我在其中保存了一些字符串值。的大小`NSMutableArray`可以在 2-5 之间变化（这意味着它可能存储了 2 -5 个字符串值）。

根据`NSMutableArray`我需要初始化 UIBUttons 的数量，然后将存储在 init 的字符串的值设置为按钮标题。

```
int numberOfButtonsToBeInitialize= [mutableArr count];// we are finding the number of buttons to be initialize and we assign it to a variable. 
```

现在我需要创建按钮（无论返回的数字是多少 `numberOfButtonsToBeInitialize`）

我怎样才能做到这一点 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T10:18:25.497

```
 for(int i=0;i<numberOfButtonsToBeInitialize;i++){
  //init the button
  UIButton *bout = [UIButton buttonWithType:UIButtonTypeRoundedRect];
        //set the title 
        [bout setTitle:[mutableArr objectAtIndex:i] forState:UIControlStateNormal];
        [bout addTarget:self action:@selector(event:) forControlEvents: UIControlEventTouchUpInside];
        [self.view addSubview:bout ];
        //then you can set the position of your button
        [bout setFrame:CGRectMake(70,3, 40,40)];} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-06T10:20:39.383

尝试这个：

```
NSMutableArray *myButtonsArray = [[NSMutableArray alloc] initWithCapacity:0];
UIButton *tmpButton;
for (NSString *bTitle in mutableArr)
{
    tmpButton = [UIButton buttonWithType:UIButtonTypeRoundedRect];
    [tmpButton setTitle:bTitle forState:UIControlStateNormal];
    // Any additional  setup goes here
    [myButtonsArray addObject:tmpButton];
} 
```

现在你有了一个包含所有按钮的数组。您可以迭代此数组并将任何按钮添加为主视图中的子视图。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-06T10:21:48.860

你需要一个`for`循环。例如：

```
float buttonWidth=50;
float margin=5;
for (int index=0; index<numberOfButtonsToBeInitialize;index++)
{
    UIButton* button=[UIButton buttonWithType:UIButtonTypeRoundedRect];
    NSString* buttonTitle=[mutablearr objectAtIndex:index];
    [button setTitle:buttonTitle forState:UIControlStateNormal];
    [button setFrame:CGRectMake(0+(buttonWidth+margin)*index, 0, buttonWidth, 30)];
    [button setTag:100+index];
    [button addTarget:self action:@selector(buttonPressed:) forControlEvents:UIControlEventTouchUpInside];
    [self.view addSubview:button];
} 
```

在这种情况下，我们将按钮排成一行（水平）。根据自己的喜好进行调整

# excel - Excel条件格式

> ID：10042073
> 
> 赞同：0
> 
> 时间：2012-04-06T10:12:03.007
> 
> 标签：excel, formatting, conditional

我知道我可能会突破极限，但是 Excel 中有没有办法识别单元格中的字母并相应地格式化？这意味着如果我在一个单元格中键入“TAT 12 hello”并在另一个单元格中键入“TAT 12 bye”，那么两个单元格都应该变成红色，与两个单元格中的代码“TAT 12”匹配。它发生在使用条件格式的重复值的情况下。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-06T13:19:55.750

这可以使用`Conditional Formatting`.

假设您要将包含该字符串的任何单元格设为红色，`TAT 12`并假设您的所有条目都在 A 列的行中。

尝试以下操作：

1.  选择 A 列
2.  现在使用菜单栏**格式 > 条件格式...**
3.  在对话框中`Formula Is`的第一个下拉菜单中选择
4.  现在添加公式`=ISNUMBER(FIND("TAT 12",A1))`
5.  如果满足条件，选择红色作为字体

简而言之，该公式用于在单元格中`Find`进行检查。`TAT 12`

# javascript - 使用 Javascript 设置样式时防止“显示”的样式继承

> ID：10042077
> 
> 赞同：0
> 
> 时间：2012-04-06T10:12:29.590
> 
> 标签：javascript, html, css

我想使用还包含属性的 Javascript 来切换大部分 HTML 的可见`display: <value>`性。

问题是使用 Javascript 设置外部显示属性也会设置内部显示属性。

给定以下 CSS：

```
.zapfenintermeddivisionrow {
    vertical-align:top;
    display:none;
}

.divisionColumn[data-division=true][data-boxed=true] {
    border: 1px solid black;
    display: inline-block;
    float: left;
} 
```

HTML：

```
<tr class='zapfenintermeddivisionrow'>
<td class='zapfendividendintermed'>
<div class="divisionColumn" data-division="true" data-boxed="true">7<br />3<br /><br /><br /><br /><br /><br /></div>
<div class="divisionColumn" data-division="true" data-boxed="true">2<br />2<br />0<br /><br /><br /><br /><br /></div>
<div class="divisionColumn" data-division="true" data-boxed="true">5<br /><br />5<br />1<br /><br /><br /><br /></div>
<div class="divisionColumn" data-division="true" data-boxed="true">7<br /><br /><br />7<br />1<br /><br /><br /></div>
<div class="divisionColumn" data-division="true" data-boxed="true">6<br /><br /><br /><br />6<br />0<br /><br /></div>
<div class="divisionColumn" data-division="true" data-boxed="true">0<br /><br /><br /><br /><br />0<br />0<br /></div>

</td><td>:</td><td>4</td><td>=</td><td>181440</td>
</tr> 
```

和 Javascript：

```
function changeIntermediate() {
  var items = document.getElementsByClassName('zapfenintermeddivisionrow');
  for(i = 0; i < items.length; i++) {
    items[i].style.display = (getComputedStyle(items[i]).getPropertyValue('display') == 'none') ? 'inline' : 'none';
  }
}

document.getElementById('toggleallintermedsteps').addEventListener('click', changeIntermediate); 
```

Javascript 将 .divisionColumn 的嵌套样式（具有 display: inline-box）更改为“inline”。似乎该值被继承给子元素。

为什么设置外部类的显示值传播到内部类，当它被CSS排除时？我该如何防止这种情况？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-06T10:29:54.147

> 为什么设置外部类的显示值传播到内部类，当它被CSS排除时？

它不是。

[从规范](http://www.w3.org/TR/CSS21/visuren.html#display-prop)：

> 该值导致元素不出现在格式化结构中（即，在视觉媒体中，元素不生成框并且对布局没有影响）。后代元素也不生成任何框；元素及其内容完全从格式化结构中删除。不能通过在后代上设置 'display' 属性来覆盖此行为。
> 
> 请注意，显示“无”不会创建不可见的框；它根本没有创建任何盒子。CSS 包括使元素能够在格式化结构中生成影响格式化但本身不可见的框的机制。有关详细信息，请参阅可见性部分。

* * *

> 我该如何防止这种情况？

之一：

*   不使用`display: none`（如规范所说，`visibility`可能是更好的选择）
*   通过移动要显示的元素，使它们不是要隐藏的元素的后代
*   更改您隐藏的元素（例如，选择数量的元素，这些元素既是您当前隐藏的元素的后代，又是您要显示的元素的兄弟姐妹）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-06T16:22:06.817

我应该补充一下，我正在使用 FF11。也许我发现了一个错误、缺点或“遗留问题”，但诀窍如下：

1.  'zapfenintermeddivisionrow' 类（最初包含 display:none）被分配给一个 TR，一个表格行。
2.  有 display:table-row 属性[http://www.w3schools.com/cssref/pr_class_display.asp](http://www.w3schools.com/cssref/pr_class_display.asp)，以前从未听说过。
3.  通过在 'none' 和 'table-row' 之间切换 items[i].style.display，它现在正在做我认为应该做的事情。

正如@powerbuoy 正确指出的那样，样式属性不会自动传播给孩子。在元素是 TR 的情况下，FF 的行为很奇怪，例如。块被分配。

# c# - 动态创建的链接按钮上的单击事件不起作用

> ID：10042078
> 
> 赞同：1
> 
> 时间：2012-04-06T10:12:40.527
> 
> 标签：c#, asp.net

我想提供上传多个文件然后下载的选项。我正在动态创建链接按钮，例如：

```
 private void AddLinkButtons()
{
    string[] fileNames = (string[])Session["fileNames"];
    string[] fileUrls = (string[])Session["fileUrls"];
    if (fileNames != null)
    {
        for (int i = 0; i < fileUrls.Length - 1; i++)
        {
            LinkButton lb = new LinkButton();

            phLinkButtons.Controls.Add(lb);
            lb.Text = fileNames[i];
            lb.CommandName = "url";
            lb.CommandArgument = fileUrls[i];
            lb.ID = "lbFile" + i;

            //lb.Click +=this.DownloadFile;
            lb.Attributes.Add("runat", "server");
            lb.Click += new EventHandler(this.DownloadFile);
            ////lb.Command += new CommandEventHandler(DownloadFile);

            phLinkButtons.Controls.Add(lb);
            phLinkButtons.Controls.Add(new LiteralControl("<br>"));

        }
    } 
```

我的 DownloadFile 事件是：

```
protected void DownloadFile(object sender, EventArgs e)
{
    LinkButton lb = (LinkButton)sender;
    string url = lb.CommandArgument;

    System.IO.FileInfo file = new System.IO.FileInfo(url);
    if (file.Exists)
    {
        try
        {
            Response.Clear();
            Response.AddHeader("Content-Disposition", "attachment; filename=" + file.Name);
            Response.AddHeader("Content-Length", file.Length.ToString());
            Response.ContentType = "application/octet-stream";
            Response.WriteFile(file.FullName);
            Response.End();
        }
        catch (Exception ex)
        {

        }
    }
    else
    {
        Response.Write("This file does not exist.");
    }
} 
```

我在屏幕上获得了链接按钮，但点击后从不调用 DownloadFile 事件。我尝试了所有评论的选项，但它不起作用。代码有什么问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-06T12:05:54.693

何时何地调用 AddLinkBut​​tons()？

它应该在您的页面初始化期间，在每次回发时调用。

根据您页面的逻辑，您的 OnInit 应该如下所示

```
 protected override void OnInit(EventArgs e)
    {
        base.OnInit(e);
        AddLinkButtons();

    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-06T10:22:49.210

代码看起来不错..

不明白 AddLinkBut​​tons() 方法中的 lbTest 是什么。

请从 AddLinkBut​​tons() 方法中删除此行。

```
lb = (LinkButton)lbTest; 
```

希望这会奏效...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-09T03:58:31.307

设置属性后添加链接按钮。您的代码正在添加 2 磅按钮

```
 phLinkButtons.Controls.Add(lb); //------1
        lb.Text = fileNames[i];
        lb.CommandName = "url";
        lb.CommandArgument = fileUrls[i];
        lb.ID = "lbFile" + i;

        //lb.Click +=this.DownloadFile;
        lb.Attributes.Add("runat", "server");
        lb.Click += new EventHandler(this.DownloadFile);
        ////lb.Command += new CommandEventHandler(DownloadFile);

        phLinkButtons.Controls.Add(lb); //-------------------2 
```

删除第一行

# c# - 从 Xml 解码字符串的问题

> ID：10042080
> 
> 赞同：0
> 
> 时间：2012-04-06T10:12:44.800
> 
> 标签：c#, .net, xml, html-encode

我收到了大量的 Xml，我需要从中提取部分文本元素并将其重新用于其他目的。（我正在使用 XDocument 来提取 Xml 数据）。

但是，如何解码元素中包含的文本？这里使用的格式是什么？几个例子：

```
"What is the meaning of this&amp;reg; asks Sonny."
"The big centre cost 1&amp;#190; million pounds"
"... lost it. &amp;#174; The next ..." 
```

我试过`HttpUtility.HtmlDecode`了，但这并没有成功。如果我解码两次“®” 变成一个显然不正确的®。

看起来像 ® 是换行符。＆reg; 可能是问号。190的，我也不知道。也许是一个点或逗号？

任何想法都会受到欢迎。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-06T10:20:39.297

您显示的字符串似乎已经过 HTML 编码，然后是 XML 编码（或再次编码为 HTML）。

*正确*的是- `&amp;reg;`> `&reg;`-> `®`（注册商标符号）每个[ISO Latin-1 实体](http://msdn.microsoft.com/en-us/library/aa752007%28v=vs.85%29.aspx)-`&amp;#174;`应该以相同的方式表现

同样`&amp#190;`会变成代表四分之三的分数。

# java - Java中的屏幕捕获不捕获整个屏幕

> ID：10042086
> 
> 赞同：4
> 
> 时间：2012-04-06T10:13:10.040
> 
> 标签：java, macos, screen, awt, awtrobot

我有一小段代码用于记录时间 - 非常简单，它每四分钟拍一张我的桌面照片，以便稍后我可以回顾我白天所做的事情 - 效果很好, 除非我连接到外接显示器 - 此代码仅拍摄我的笔记本电脑屏幕的屏幕截图，而不是我正在使用的更大的外接显示器 - 任何想法如何更改代码？我正在运行 OSX，以防万一……

```
import java.awt.AWTException;
import java.awt.Robot;
import java.awt.Rectangle;
import java.awt.Toolkit;
import java.awt.image.BufferedImage;
import java.io.*;
import javax.imageio.ImageIO;

class ScreenCapture {
    public static void main(String args[]) throws
        AWTException, IOException {
            // capture the whole screen
int i=1000;
            while(true){
i++; 
                BufferedImage screencapture = new Robot().createScreenCapture(
                        new Rectangle(Toolkit.getDefaultToolkit().getScreenSize()) );

                // Save as JPEG
                File file = new File("screencapture"+i+".jpg");
                ImageIO.write(screencapture, "jpg", file);
try{
Thread.sleep(60*4*1000);
}
catch(Exception e){
e.printStackTrace();
}

            }
        }
} 
```

按照给出的解决方案，我做了一些改进，对于那些感兴趣的人，代码正在[https://codereview.stackexchange.com/questions/10783/java-screengrab进行代码审查](https://codereview.stackexchange.com/questions/10783/java-screengrab)

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-06T10:31:50.003

有一个教程[Java 多显示器屏幕截图](http://whileonefork.blogspot.co.uk/2011/02/java-multi-monitor-screenshots.html)显示了如何做到这一点。基本上你必须迭代所有屏幕：

```
GraphicsEnvironment ge = GraphicsEnvironment.getLocalGraphicsEnvironment();
GraphicsDevice[] screens = ge.getScreenDevices();

for (GraphicsDevice screen : screens) {
 Robot robotForScreen = new Robot(screen);
 ... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-02-06T12:58:42.780

我知道这是一个老问题，但在接受的答案上链接的解决方案可能不适用于某些多显示器设置（肯定是在 Windows 上）。

如果您以这种方式设置显示器，例如：[3] [1] [2]

这是正确的代码：

```
public class ScreenshotUtil {

    static public BufferedImage allMonitors() throws AWTException {
        GraphicsEnvironment ge = GraphicsEnvironment.getLocalGraphicsEnvironment();
        GraphicsDevice[] screens = ge.getScreenDevices();
        Rectangle allScreenBounds = new Rectangle();
        for (GraphicsDevice screen : screens) {
            Rectangle screenBounds = screen.getDefaultConfiguration().getBounds();
            allScreenBounds = allScreenBounds.union(screenBounds);
        }
        Robot robot = new Robot();
        return robot.createScreenCapture(allScreenBounds);;
    }
} 
```

# ios - iOS：逆 UIBezierPath (bezierPathWithOvalInRect)

> ID：10042087
> 
> 赞同：0
> 
> 时间：2012-04-06T10:13:19.053
> 
> 标签：ios, image, core-graphics, transparency, uibezierpath

我有一个 jpg 图像，矩形中有一个圆形物体，并且想让圆形物体的环境透明......

![例子](../Images/a07f290f8ce674752278a38e191919a1.png)

（去除本例中的红色区域）

在这个[iOS 的帮助下，使 UIImage 的一部分变得透明](https://stackoverflow.com/questions/8305285/ios-make-part-of-an-uiimage-transparent)和“UIBezierPath bezierPathWithOvalInRect”我取得了一点成功，但这在我的对象周围创建了一条路径，我需要反转它，以使外部而不是内部路径透明..

我不确定我必须在哪里更改我的代码才能获得正确的结果..

这是我的代码：

```
//BezierPath
UIBezierPath *bezierPath = [UIBezierPath bezierPathWithOvalInRect:CGRectMake(0, 0, 100, 100)];  

// Create an image context containing the original UIImage.
UIGraphicsBeginImageContext(_imgTemp.image.size);
[_imgTemp.image drawAtPoint:CGPointZero];

// Clip to the bezier path and clear that portion of the image.
CGContextRef context = UIGraphicsGetCurrentContext();
CGContextAddPath(context,bezierPath.CGPath);
CGContextClip(context);
CGContextClearRect(context,CGRectMake(0,0,self._imgTemp.image.size.width,self._imgTemp.image.size.height));

// Build a new UIImage from the image context.
UIImage *newImage = UIGraphicsGetImageFromCurrentImageContext();
UIGraphicsEndImageContext();
self._imgTemp.image = newImage; 
```

有人解决了吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-06T10:31:34.777

要仅在黑色圆圈内绘制，您应该移至`[_imgTemp.image drawAtPoint:CGPointZero];`之后`CGContextClip(context);`，然后`CGContextClearRect( ... )`完全删除呼叫：

```
//BezierPath
UIBezierPath *bezierPath = [UIBezierPath bezierPathWithOvalInRect:CGRectMake(0, 0, 100, 100)];  

// Create an image context containing the original UIImage.
UIGraphicsBeginImageContext(_imgTemp.image.size);

// Clip to the bezier path and clear that portion of the image.
CGContextRef context = UIGraphicsGetCurrentContext();
CGContextAddPath(context,bezierPath.CGPath);
CGContextClip(context);

// Draw here when the context is clipped
[_imgTemp.image drawAtPoint:CGPointZero];

// Build a new UIImage from the image context.
UIImage *newImage = UIGraphicsGetImageFromCurrentImageContext();
UIGraphicsEndImageContext();
self._imgTemp.image = newImage; 
```

# c# - 创建注册表项时出现 UnauthorizedAccessException

> ID：10042095
> 
> 赞同：4
> 
> 时间：2012-04-06T10:14:24.313
> 
> 标签：c#, registry

我正在研究如何在我的应用程序中添加 Windows 上下文菜单中的*快捷方式。*我偶然发现了[这篇](http://www.codeproject.com/Articles/10104/Add-a-context-menu-to-the-Windows-Explorer)文章并尝试了它。这是它用于在注册表中创建密钥的代码。

```
private void btnAddMenu_Click(object sender, System.EventArgs e)
{
    RegistryKey regmenu = null;
    RegistryKey regcmd = null;
    try
    {
        regmenu = Registry.ClassesRoot.CreateSubKey(MenuName);
        if(regmenu != null)
            regmenu.SetValue("",this.txtName.Text);
        regcmd = Registry.ClassesRoot.CreateSubKey(Command);
        if(regcmd != null)
                regcmd.SetValue("",this.txtPath.Text);
    }
    catch(Exception ex)
    {
        MessageBox.Show(this,ex.ToString());
    }
    finally       
    {
        if(regmenu != null)
            regmenu.Close();
        if(regcmd != null)
            regcmd.Close();
    }        
} 
```

问题是如果我通过我的管理员帐户运行它，它工作正常。但是，当我通过没有管理员权限的其他帐户执行此操作时，它会引发此异常。

```
system.unauthorizedaccessexception access to the registry key is denied 
```

现在，如果我要在自己的一个应用程序中使用此代码在上下文菜单中创建快捷方式，我不能确定每个用户都会以管理员身份运行它，对吧？

在创建注册表项时，C# 中是否有任何方法可以*提升用户权限？*

如果您知道将项目添加到 Windows 上下文菜单的任何其他方式，我也会对它们感兴趣。

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-06T11:41:47.190

你不能像这样升级权限（至少我想知道它，但似乎还不可能），但你需要运行/启动你的应用程序（嵌入清单）提升。
请查看这些条目...
[如何强制我的 .NET 应用程序以管理员身份运行？](https://stackoverflow.com/questions/2818179/how-to-force-c-sharp-app-to-run-as-administrator-on-windows-7)
[以编程方式提升进程特权？](https://stackoverflow.com/a/573150/417747)
我会建议评论所说的，从设置中运行。或者让您的应用从一开始就以管理员身份运行，或者可能在需要时从您的应用中快速启动提升的进程（例如，运行您的另一个具有正确清单的 exe）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-06T10:22:45.303

您可以像安装程序一样升级您的权限。这将需要用户交互，因为这就是操作系统的设计方式（而且是正确的）——你无法绕过它。

# php - 如何使用 mongodb 在内部数组中搜索字符串？

> ID：10042097
> 
> 赞同：2
> 
> 时间：2012-04-06T10:14:32.797
> 
> 标签：php, mongodb

如何在多维数组中搜索值，例如我想`example`在mongodb的以下数据中搜索关键字我曾经从命令中获取所有数据

`>db.info.find()`

```
{
    "_id" : ObjectId("4f74737cc3a51043d26f4b90"),
    "id" : "12345",
    "info" : [
            {
                    "sno" : 1,
                    "name" : "ABC",
                    "email" : "abc@example.com"
            },
            {
                    "sno" : 2,
                    "name" : "XYZ",
                    "email" : "xyz@example.com"
            },
            {
                    "sno" : 3,
                    "name" : "XYZ",
                    "email" : "xyz@demo.com"
            },
            {
                    "sno" : 4,
                    "name" : "ABC",
                    "email" : "abc@demo.com"
            },
            {
                    "sno" : 5,
                    "name" : "Rohan",
                    "email" : "rohan@example.com"
            }
    ]
} 
```

现在，要查找`example`我使用命令的数据

`>db.info.find({"info.email":"example"})` 它给了

```
{
    "_id" : ObjectId("4f74737cc3a51043d26f4b90"),
    "id" : "12345",
    "info" : [
            {
                    "sno" : 1,
                    "name" : "ABC",
                    "email" : "abc@example.com"
            },
            {
                    "sno" : 2,
                    "name" : "XYZ",
                    "email" : "xyz@example.com"
            },
            {
                    "sno" : 3,
                    "name" : "XYZ",
                    "email" : "xyz@demo.com"
            },
            {
                    "sno" : 4,
                    "name" : "ABC",
                    "email" : "abc@demo.com"
            },
            {
                    "sno" : 5,
                    "name" : "Rohan",
                    "email" : "rohan@example.com"
            }
    ]
} 
```

但我只想要 5 个子行中的 3 个，例如

```
{
    "_id" : ObjectId("4f74737cc3a51043d26f4b90"),
    "id" : "12345",
    "info" : [
            {
                    "sno" : 1,
                    "name" : "ABC",
                    "email" : "abc@example.com"
            },
            {
                    "sno" : 2,
                    "name" : "XYZ",
                    "email" : "xyz@example.com"
            },
            {
                    "sno" : 5,
                    "name" : "Rohan",
                    "email" : "rohan@example.com"
            }
    ]
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-06T10:33:18.793

Rohan，MongoDB 总是返回您正在搜索的*整个*文档。您不能只让它返回找到关键字的数组元素。如果你想这样做，那么你需要确保“信息”字段中的所有嵌入文档都在它们自己的集合中。这可能意味着您需要将它们链接回“信息”集合中的原始文档。也许是这样的：

```
{
    "sno" : 1,
    "name" : "ABC",
    "email" : "abc@example.com"
    "info_id" : "12345",
}, 
```

或者，您当然可以在 PHP 中进行后处理以仅获取您想要的行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-27T05:49:19.983

我尝试了 Map Reduce Function，它适用于此类问题，代码如下所示：

编写地图函数

```
 map=function () 
  {
      filter = [];
      this.info.forEach(function (s) {if (/example/.test(s.email)) {filter.push(s);}});
      emit(this._id, {info:filter});
  } 
```

写一个reduce函数

```
 reduce=function(key, values) { return values;} 
```

MapReduce 函数

```
 res=db.info.mapReduce(map,reduce,{out:{inline:1}}) 
```

输出看起来像：

```
"results" : [
    {
            "_id" : ObjectId("4f9a2de0ea4a65c3ab85a9d3"),
            "value" : {
                    "info" : [
                            {
                                    "sno" : 1,
                                    "name" : "ABC",
                                    "email" : "abc@example.com"
                            },
                            {
                                    "sno" : 2,
                                    "name" : "XYZ",
                                    "email" : "xyz@example.com"
                            },
                            {
                                    "sno" : 5,
                                    "name" : "Rohan",
                                    "email" : "rohan@example.com"
                            }
                    ]
            }
    }
    ],
    "timeMillis" : 1,
    "counts" : {
            "input" : 3,
            "emit" : 3,
            "reduce" : 0,
            "output" : 3
    },
    "ok" : 1, 
```

现在您可以从以下位置找到您的搜索数据

```
 printjson(res.results) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-06T10:23:32.797

也许这是个好主意？ [http://php.net/manual/en/class.mongoregex.php](http://php.net/manual/en/class.mongoregex.php)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-11-07T07:17:03.297

你试过$（投影）吗？

```
db.info.find({"info.email":"example"}, {"info.email.$":1}) 
```

[文档](http://docs.mongodb.org/manual/reference/operator/projection/positional/#proj._S_)

# php - 在哪里可以找到适用于 Windows 的预编译 v8js dll？

> ID：10042099
> 
> 赞同：4
> 
> 时间：2012-04-06T10:14:38.523
> 
> 标签：php, javascript, v8

在哪里可以找到适用于 Windows 的预编译 v8js dll？我搜索，但我只找到来源！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-06T10:52:29.067

[项目下载页面上](http://code.google.com/p/v8cgi/downloads/list)提供了 v8 Windows 版本

# makefile - cmake错误：找不到QCA2

> ID：10042105
> 
> 赞同：1
> 
> 时间：2012-04-06T10:15:08.417
> 
> 标签：makefile, cmake

在 Mac 上 cmake-ing libjreen 时遇到以下消息。

```
$ cmake ..
-- checking for module 'qca2'
--   package 'qca2' not found
CMake Error at /opt/local/share/cmake-2.8/Modules/FindPackageHandleStandardArgs.cmake:91 (MESSAGE):
  Could NOT find QCA2 (missing: QCA2_LIBRARIES QCA2_INCLUDE_DIR)
Call Stack (most recent call first):
  /opt/local/share/cmake-2.8/Modules/FindPackageHandleStandardArgs.cmake:252 (_FPHSA_FAILURE_MESSAGE)
  cmake/FindQCA2.cmake:44 (find_package_handle_standard_args)
  CMakeLists.txt:22 (FIND_PACKAGE)

-- Configuring incomplete, errors occurred! 
```

我该如何继续安装 qca2？

**更新**我已经通过macports安装了qca，没有任何运气。看来我需要 macports 上不存在的 libqca2-devel。如何安装 libqca2-devel？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-08T17:21:17.230

嗯，这个问题解决了。我必须从源代码安装 qca2 以便 cmake 可以获取它

# mysql - SQL DELETE 在同一语句中从两个表中删除

> ID：10042107
> 
> 赞同：2
> 
> 时间：2012-04-06T10:15:08.840
> 
> 标签：mysql, sql

我将从 2 个表中删除数据。我会这样做：

```
 DELETE FROM dc_mail_users u, dc_mail_user_data d WHERE u.i_id_pk = 3 AND d.i_id_ut = u.i_id_pk 
```

但这会返回 SQL 语法错误。如何通过 SQL AS 语句解决此问题？就像下面的例子一样。

```
SELECT first_name.last_name AS name WHERE name="John Doe" 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-06T10:21:13.750

```
DELETE u, d
FROM dc_mail_users u
INNER JOIN dc_mail_user_data d
    ON d.i_id_ut = u.i_id_pk
WHERE u.i_id_pk = 3 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-06T10:20:47.620

```
delete u, d
FROM dc_mail_users u
join dc_mail_user_data d
on d.i_id_ut = u.i_id_pk
and u.i_id_pk = 3 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-06T21:01:58.317

您的原始语句也是正确的如果您添加表的别名，一个示例[SQL Fiddle](http://www.sqlfiddle.com/#!2/a7990/6)

# c# - 我可以使用更通用的接口来简化我的类以使用命令模式吗？

> ID：10042112
> 
> 赞同：1
> 
> 时间：2012-04-06T10:15:29.863
> 
> 标签：c#, oop, class, design-patterns, interface

我正在尝试使我正在设计的应用程序更通用，并在其中实现命令模式以使用管理器类来调用接口公开的方法。

我有几个类，其中有`GetItem()`和`GetList()`方法，**有些是重载的**。当我尝试使用依赖注入时，它们接受不同的参数，并且它们返回不同的类型。这里有几个例子：

```
 class DatastoreHelper
    {
        public Datastore GetItem(string DatastoreName)
        {
            // return new Datastore(); from somewhere
        }
        public Datastore GetItem(int DatastoreID)
        {
            // return new Datastore(); from somewhere
        }
        public List<Datastore> GetList()
        {
           // return List<Datastore>(); from somewhere
        }
        public List<Datastore> GetList(HostSystem myHostSystem)
        {
           // return List<Datastore>(); from somewhere
        }

    }
    class HostSystemHelper
    {
        public HostSystem GetItem(int HostSystemID)
        {
          //  return new HostSystem(); from somewhere
        }
        public List<HostSystem> GetList(string ClusterName)
        {
            //return new List<HostSystem>(); from somewhere
        }
    } 
```

我试图弄清楚我是否可以为这两种方法使用通用接口，以及一个可以有效地作为控制器的管理器类。这样做会增加我的经理类的重用能力。

```
 interface IGetObjects
    {
        public object GetItem();
        public object GetList();
    }

class GetObjectsManager
{
    private IGetObjects mGetObject;
    public GetObjectsManager(IGetObjects GetObject)
    {
        this.mGetObject = GetObject;
    }
    public object GetItem()
    {
        return this.mGetObject.GetItem();
    }
    public object GetList()
    {
        return this.GetList();
    }
} 
```

我知道我必须放弃将参数传递给方法本身并使用类属性，但我会失去依赖注入。我知道我必须将调用代码中的返回对象转换为它们应该是的。所以我的助手类看起来像这样：

```
class DatastoreHelper
{
    public string DatastoreName { get; set; }
    public string DatastoreID { get; set; }
    public object GetItem()
    {
        // return new Datastore(); from somewhere
    }
    public List<object> GetList()
    {
       // return List<Datastore>(); from somewhere
    }

}
class HostSystemHelper
{
    public int HostSystemID { get; set; }
    public string ClusterName {get; set;}
    public object GetItem()
    {
      //  return new HostSystem(); from somewhere
    }
    public List<object> GetList()
    {
        //return new List<HostSystem>(); from somewhere
    }
} 
```

但以上是一个好主意，还是我试图在不属于它的地方适应模式？

**编辑：**我添加了一些更多的重载方法来说明我的类很复杂并且包含许多方法，有些方法根据不同的输入参数重载了很多次。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-06T11:29:49.703

如果我正确理解了这个概念，那么这样的设计是一个非常糟糕的主意：

```
class DatastoreHelper
{
    public string DatastoreName { get; set; }
    public string DatastoreID { get; set; }
    public object GetItem()
    {
        // return new Datastore(); from somewhere
    }
    public List<object> GetList()
    {
       // return List<Datastore>(); from somewhere
    }
} 
```

原因是现在获取结果将是一个两步过程：首先设置属性，然后调用方法。这带来了一系列问题：

*   不直观（每个人都习惯于在方法调用中提供参数）
*   将参数绑定从调用站点移开（当然，这可能意味着“将它们移动到上一个 LOC”，但仍然如此）
*   哪个方法使用哪个属性值不再明显
*   取这个对象的一个​​实例，然后添加几个线程来立即获得乐趣

建议：

1.  使两者都`IGetObjects`通用`GetObjectsManager`，这样您就不会失去类型安全性。这使您失去了以多态方式对待不同经理的能力，但这有什么意义呢？每个管理器最终都将专门用于特定类型的对象，除非您知道该类型是什么，否则您无法真正使用 getter 方法的返回值。那么，通过将管理者视为“未知的管理者”，你能获得什么？
2.  考虑重写您的`GetX`方法以接受`Expression<Func<T, bool>>`而不是裸值。通过这种方式，您可以使用 lambda 谓词，这将使您的代码更加灵活而不会真正丢失任何内容。例如：

    ```
    helper.GetItem(i => i.DataStoreID == 42);
    helper.GetList(i => i.DataStoreName.Contains("Foo")); 
    ```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-06T11:37:37.413

It is not a good idea. Based on these examples you would be better off with a generic interface for the varying return type and parameters of GetItem/GetList. Though honestly the prevalence of Managers, the use of something cas vague as GetItem in multiple places and trying to fit your solution into design patterns (rather than defining the solution in terms of the patterns) are huge code smells to me for the wider solution.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-06T17:28:24.440

第一个代码示例看起来与存储库模式非常相似。我认为这就是您要申请的内容。最后一个样本不好，Jon 告诉你原因。但是，不要重新发明轮子，而是阅读一些关于存储库的内容（关于它的很多问题），因为如果我理解正确，这就是你真正想要的。

关于重用，可重用的东西并不多，尤其是持久化接口。有一个通用存储库模式（我认为它是一种反模式）试图实现这一点，但实际上，所有应用程序都需要相同的持久性接口吗？

作为一般准则，当你设计一个对象时，设计它以满足特定应用程序的需求，如果它碰巧被重用，那是一个奖励，但这不是一个对象的主要目的。

# java - 在 Sonatype Nexus 和 EclipseLink Maven Repo 代理方面需要帮助

> ID：10042114
> 
> 赞同：1
> 
> 时间：2012-04-06T10:15:36.903
> 
> 标签：java, jakarta-ee, maven, eclipselink

我已经为此困扰了太久，所以我真的需要一些专家的帮助，他们可以解决这个问题。

我已经安装了 Sonatype Nexus 2.0.3 版，并将它作为我的 JavaEE、Glassfish 类应用程序的开发存储库，并配置了 maven settings.xml 以从 nexus 存储库中读取。其他所有 jar 都已正确下载和缓存，但每次涉及 org.eclipse.persistence.xxx 上的 jar 时，结果都失败了：

```
[WARNING] The POM for org.eclipse.persistence:eclipselink:jar:2.3.2 is missing, no dependency information available
[WARNING] The POM for org.eclipse.persistence:javax.persistence:jar:2.0.3 is missing, no dependency information available
[WARNING] The POM for org.eclipse.persistence:org.eclipse.persistence.jpa.modelgen.processor:jar:2.3.2 is missing, no dependency information available
[WARNING] The POM for org.eclipse.persistence:org.eclipse.persistence.core:jar:2.2.0-RC4 is missing, no dependency information available
[WARNING] The POM for org.eclipse.persistence:org.eclipse.persistence.jpa:jar:2.2.0-RC4 is missing, no dependency information available
[WARNING] The POM for org.eclipse.persistence:org.eclipse.persistence.jpa.modelgen:jar:2.2.0-RC4 is missing, no dependency information available
[WARNING] The POM for org.eclipse.persistence:org.eclipse.persistence.oracle:jar:2.2.0-RC4 is missing, no dependency information available
[WARNING] The POM for org.eclipse.persistence:org.eclipse.persistence.antlr:jar:2.2.0-RC4 is missing, no dependency information available
[WARNING] The POM for org.eclipse.persistence:org.eclipse.persistence.asm:jar:2.2.0-RC4 is missing, no dependency information available
...
[ERROR] Failed to execute goal on project xxx-ejb: Could not resolve dependencies for project xxx:xxx-ejb:ejb:1.0-SNAPSHOT: The following artifacts could not be resolved: org.eclipse.persistence:eclipselink:jar:2.3.2, org.eclipse.persistence:javax.persistence:jar:2.0.3, org.eclipse.persistence:org.eclipse.persistence.jpa.modelgen.processor:jar:2.3.2, org.eclipse.persistence:org.eclipse.persistence.core:jar:2.2.0-RC4, org.eclipse.persistence:org.eclipse.persistence.jpa:jar:2.2.0-RC4, org.eclipse.persistence:org.eclipse.persistence.jpa.modelgen:jar:2.2.0-RC4, org.eclipse.persistence:org.eclipse.persistence.oracle:jar:2.2.0-RC4, org.eclipse.persistence:org.eclipse.persistence.antlr:jar:2.2.0-RC4, org.eclipse.persistence:org.eclipse.persistence.asm:jar:2.2.0-RC4: Failure to find org.eclipse.persistence:eclipselink:jar:2.3.2 in http://localhost:8993/nexus/content/groups/myrepo/ was cached in the local repository, resolution will not be reattempted until the update interval of MyRepo has elapsed or updates are forced -&gt; [Help 1]
[ERROR] 
[ERROR] To see the full stack trace of the errors, re-run Maven with the -e switch.
[ERROR] Re-run Maven using the -X switch to enable full debug logging.
[ERROR] 
[ERROR] For more information about the errors and possible solutions, please read the following articles:
[ERROR] [Help 1] http://cwiki.apache.org/confluence/display/MAVEN/DependencyResolutionException
[ERROR] 
[ERROR] After correcting the problems, you can resume the build with the command
[ERROR]   mvn &lt;goals&gt; -rf :xxx-ejb 
```

这是我配置 nexus 存储库（开源版本）的方式：

**我创建了 EclipseLink 的代理：**
存储库名称：EclipseLink Maven 存储库
类型：代理
存储库 ID：eclipselink
策略：快照
远程存储位置：[http://download.eclipse .org/rt/eclipselink/maven.repo/](http://download.eclipse.org/rt/eclipselink/maven.repo/)
下载Remote Indexes: False
Repository Path URL: [http://localhost:8993/nexus/content/repositories/ecliselink/](http://localhost:8993/nexus/content/repositories/ecliselink/)

**至于使用maven的repo，我自己创建了一个组以汇总必要的存储库：**
组名称：我的存储库
组 ID：myrepo
在有序组存储库列表中，我有
：- Apache 快照
：- 中央
:- Codehaus Snapshots
:- EclipseLink Maven Repository (指的是之前创建的 EclipseLink 代理)

在我的 pom.xml 中，依赖的片段如下：

```
 <dependency>
            <groupId>org.eclipse.persistence</groupId>
            <artifactId>eclipselink</artifactId>
            <version>2.3.2</version>
            <scope>provided</scope>
        </dependency>
        <dependency>
            <groupId>org.eclipse.persistence</groupId>
            <artifactId>javax.persistence</artifactId>
            <version>2.0.3</version>
            <scope>provided</scope>
        </dependency>
        <dependency>
            <groupId>org.eclipse.persistence</groupId>
            <artifactId>org.eclipse.persistence.jpa.modelgen.processor</artifactId>
            <version>2.3.2</version>
            <scope>provided</scope>
        </dependency>
        <dependency>
            <groupId>org.glassfish.appclient</groupId>
            <artifactId>gf-client</artifactId>
            <version>3.1</version>
            <type>pom</type>
            <scope>test</scope>
        </dependency>
        <dependency>
            <groupId>javaee</groupId>
            <artifactId>javaee-api</artifactId>
            <version>5</version>
            <scope>provided</scope>
        </dependency> 
```

在 maven settings.xml 文件中，镜像定义为：

```
 <mirror>
        <id>MyRepo</id>
        <name>My Repository</name>
        <url>http://localhost:8993/nexus/content/groups/myrepo/</url>
        <mirrorOf>*</mirrorOf>
    </mirror> 
```

只是为了测试其中一个罐子是否存在，我直接调用[这不是链接]http://download.eclipse.org/rt/eclipselink/maven.repo/org/eclipse/persistence/eclipselink/2.3.2 /eclipselink-2.3.2.jar 在浏览器中，jar 就在那里。但是，当我尝试从 [这不是链接]http://localhost:8993/nexus/content/repositories/eclipselink/org/eclipse/persistence/eclipselink/2.3.2/eclipselink-2.3 处的 nexus 获取 jar 时。 2.jar，它的404？！

我已经更新并修复了索引，但所有这些都无济于事。任何帮助都非常感谢。

谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-03T09:48:33.960

我找到了一个适用于“Nexus”的 Maven 存储库 URL：

```
http://maven.eclipse.org/nexus/content/repositories/Sonatype/ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-06T10:27:20.530

EclipseLink 存储库的根会给出 404 错误（不是在链接特定 jar 时）。这种奇怪的行为可能是问题的根源，Nexus 无法索引存储库。

尝试使用这样的镜子：

[http://linorg.usp.br/eclipse/rt/eclipselink/maven.repo/](http://linorg.usp.br/eclipse/rt/eclipselink/maven.repo/)

并检查这个相关的问题

[EclipseLink/Maven 存储库去了哪里？（再次）](https://stackoverflow.com/questions/8254417/where-did-the-eclipselink-maven-repository-go-to-again)

# java - 比较 XML 文件时 Java 代码中的异常

> ID：10042116
> 
> 赞同：0
> 
> 时间：2012-04-06T10:15:47.163
> 
> 标签：java, xml

ExamXML.compareXMLString(s1, s2) 行中的异常；

片段代码是

```
static public void main(String[] argv) throws IOException {

    String s1 = readFile("src/main/resources/file1.xml");
    String s2 = readFile("src/main/resources/file2.xml");

    String s = ExamXML.compareXMLString(s1, s2);
    System.out.println(s);

} 
```

运行结果是：

```
java.lang.ClassCastException: org.apache.xerces.parsers.AbstractSAXParser$LocatorProxy cannot be cast to org.xml.sax.ext.Locator2
    at com.a7soft.examxml.ExamXMLHandler.setDocumentLocator(ExamXMLHandler.java:215)
    at org.apache.xerces.parsers.AbstractSAXParser.startDocument(Unknown Source)
    at org.apache.xerces.impl.xs.XMLSchemaValidator.startDocument(Unknown Source)
    at org.apache.xerces.impl.dtd.XMLDTDValidator.startDocument(Unknown Source)
    at org.apache.xerces.impl.XMLDocumentScannerImpl.startEntity(Unknown Source)
    at org.apache.xerces.impl.XMLVersionDetector.startDocumentParsing(Unknown Source)
    at org.apache.xerces.parsers.XML11Configuration.parse(Unknown Source)
    at org.apache.xerces.parsers.XML11Configuration.parse(Unknown Source)
    at org.apache.xerces.parsers.XMLParser.parse(Unknown Source)
    at org.apache.xerces.parsers.AbstractSAXParser.parse(Unknown Source)
    at com.a7soft.examxml.ExamXMLHandler.loadXML(ExamXMLHandler.java:111)
    at com.a7soft.examxml.ExamXML.loadXML(ExamXML.java:246)
    at com.a7soft.examxml.ExamXML.parseXMLTags(ExamXML.java:262)
    at com.a7soft.examxml.ExamXML.compareXMLString(ExamXML.java:281)
    at com.happyelements.odin.monster.Main.main(Main.java:55)

null 
```

我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-06T10:22:09.513

我有这个问题的解决方案。

```
System.setProperty("javax.xml.parsers.SAXParserFactory",
        "com.sun.org.apache.xerces.internal.jaxp.SAXParserFactoryImpl"); 
```

谢谢！

# virtualization - 如何确保 xen DomU 是 HVM 或 PV

> ID：10042119
> 
> 赞同：3
> 
> 时间：2012-04-06T10:16:05.453
> 
> 标签：virtualization, xen

我使用 virt-install 创建了 DomU 映像，但我无法确定创建的 DomU 是 HVM 还是 PV ......有人有什么想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-03-10T18:01:11.183

在 Citrix XenServer 6.2 上，查看 VM 的所有参数，您会看到对 PV 或 HVM 的引用：

```
# xe vm-list name-label=myVM params=all|grep PV-[kd]
                     PV-kernel ( RW): 
            PV-drivers-version (MRO): major: 6; minor: 2; micro: 0; build: 70442
         PV-drivers-up-to-date ( RO): true 
```

事实证明，如果是 linux VM，您可以查看其 PV：

```
[myVM]$ dmesg | egrep "Booting|Xen ver"
Booting paravirtualized kernel on Xen
Xen version: 4.1.5 (preserve-AD) 
```

我不太确定为什么 PV-kernel 没有反映这一点。有关更多详细信息，请参阅 [确定-哪个来宾正在运行-on-xen-hvm-or-pv-guest](https://serverfault.com/questions/511923/determine-which-guest-is-running-on-xen-hvm-or-pv-guest)和 [is-there-an-os-command-i-can-run-to-determine-if-running- inside-a-xen-based-virt](https://stackoverflow.com/questions/3490995/is-there-an-os-command-i-can-run-to-determine-if-running-inside-a-xen-based-virt)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-14T20:46:28.683

跑

```
virsh edit VM_NAME 
```

然后在元素内部寻找元素。如果值为 linux 则为 PVM。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-04T06:56:28.277

如果你的 Dom0 是一台 linux 机器，你能检查一下命令“ps -eaf | grep qemu”的输出吗？它应该说明在其上运行的客户机的类型（如果正在使用的是 xen 虚拟机管理程序）。

对应于 pv 客户机的输出将以“-M xenpv”结尾，对应于 hvm/pvhvm 客户机的输出应以“-M xenfv”结尾。这就是我在我的情况下发现的。

```
 # ps -eaf | grep qemu

    /usr/lib/xen/bin/qemu-dm -d 419 -serial pty -domain-name pvm_guest -videoram 4 -vnc 0.0.0.0:0 -vncunused -M xenpv

    /usr/lib/xen/bin/qemu-dm -d 429 -domain-name hvm_guest -videoram 4 -k en-us -vnc 0.0.0.0:0 -vncunused -vcpus 1 -vcpu_avail 0x1 -boot c -serial pty -acpi -net nic,vlan=1,macaddr=00:16:3e:40:94:4f,model=rtl8139 -net tap,vlan=1,ifname=tap429.0,bridge=br0 -M xenfv 
```

# jquery - 为在用户输入文本时保持可见的输入创建 html 水印文本

> ID：10042122
> 
> 赞同：2
> 
> 时间：2012-04-06T10:16:13.053
> 
> 标签：jquery, html

我正在构建一个允许企业通过 theirname.mydomain.com 访问其业务的应用程序。我现在正在构建注册表单来做到这一点。

无论如何，我今天遇到了 squarespace，他们有一个实际上像我想要的注册表单。如果您浏览到[squarespaces 网站](http://www.squarespace.com/)并单击“免费试用”，他们会在模式弹出窗口中显示其注册表单。

弹出窗口看起来像。用户名的输入框有 username.squarespace.com 的占位符文本

当您开始输入用户名时，.squarespace.com 仍然可见。

我如何复制这种行为？

![在此处输入图像描述](../Images/e4d54a0429c0b7fc7c6c72c8567f9da7.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T10:25:01.543

他们可能会在您键入用户名时动态地将 .squarespace.com 添加到用户名中。

您可以尝试使用**[onKeyUp](http://www.w3schools.com/jsref/event_onkeyup.asp)**事件向您的文本框添加文本，如下所示：

```
<input type="text" id="fname" onkeyup="this.value = this.value.replace('.hello.com', '') + '.hello.com'" /> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-06T11:49:45.447

如果有人遇到同样的问题，请设置为答案:) 并供将来参考，因为您似乎最终可能会使用该解决方案：http: [//jsfiddle.net/NXAWW/](http://jsfiddle.net/NXAWW/)

这将像其他页面中的示例一样在文本框中保留部分水印！祝你有个好的一天，

**关键是这个**

```
.keyup(function(){
    var $input = $(this);
    if ($input.val().trim() != '') {
        $placeholder.val($input.val().trim() + $input.attr('placeholder').replace('test',''));
        //$placeholder.val('');
    } else {
        $placeholder.val($input.val().trim() + $input.attr('placeholder').replace('test',''));
    }
}); 
```

**完整的 Jquery 代码**

```
// Create placeholder input to serve as background
var $test = $('#test');
var $placeholder = $test.clone().removeAttr('id').removeAttr('placeholder').addClass('placeholder').val($test.attr('placeholder'));
var $container = $('<span class="placeholder-container"></span>');
$container.insertAfter($test).append($test).append($placeholder);

// Basic styling
$container.css({
   position: 'relative'
});
$test.css({
    position: 'absolute',
    left: 0,
    top: 0,
    zIndex: 100,
    backgroundColor: 'transparent',
    borderColor: 'transparent'
});
$placeholder.css('color', 'transparent');

// Behavior for focus and blur to achieve the visual effect
$test.focus(function(){
   var $input = $(this);
   var $placeholder = $('.placeholder', $input.parent());
   $placeholder.css('color', '#e0e0e0');
}).blur(function(){
   var $input = $(this);
   var $placeholder = $('.placeholder', $input.parent());
   if ($input.val() == '')
       $placeholder.css('color', 'transparent');
}).keyup(function(){
    var $input = $(this);
    if ($input.val().trim() != '') {
        $placeholder.val($input.val().trim() + $input.attr('placeholder').replace('test',''));
        //$placeholder.val('');
    } else {
        $placeholder.val($input.val().trim() + $input.attr('placeholder').replace('test',''));
    }
});
​ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-06T10:28:41.830

当您键入您的用户名时，初始文本覆盖被替换为第二个，它会在您键入时动态定位。只需添加一个`onkeyup`事件处理程序，它计算当前输入文本的宽度并相应地定位覆盖。

不过，该`css`网站的内容并不是很精彩，看看当你输入一个更大的用户名时会发生什么：

![创建您的网站](../Images/f2ff4eee2d76ae95e9b046899ed5f33b.png)

但这可以通过添加`overflow: hidden`到父元素来轻松解决。

# java - 我使用httpclient爬取页面，但是为什么它被阻止了

> ID：10042123
> 
> 赞同：2
> 
> 时间：2012-04-06T10:16:40.980
> 
> 标签：java, httpclient

```
method = new GetMethod(strUrl);
log.info("Befor execueteMechod");
statusCode = client.executeMethod(method);
log.info("After execueteMechod"); 
```

* * *

我写这个java代码来抓取网页，它在服务器上运行。几天后，今天我很失望地发现爬虫线程被阻止了。从日志中我可以说它在**executeMethod**方法中被阻止。有人可以告诉我如何处理这个问题。

而且，它报告了两次 504 或 503 警告，当第三次抓取此页面时，出现问题，线程被阻塞，我不想要这个。

# backbone.js - Backbone.js 全局事件

> ID：10042124
> 
> 赞同：20
> 
> 时间：2012-04-06T10:16:41.540
> 
> 标签：backbone.js

关于 Backbone 中的事件的一个快速问题 - 有没有办法定义一组全局事件，可以在不同的视图中重复使用？

例如 - 假设我有几个在页面上呈现的视图。每个视图都有一个用于展开菜单的按钮。还有其他几个通用元素和事件。如果不将此事件逻辑放入每个视图中，是否有办法让这些视图中的每一个都可以继承或从全局事件定义中提取这些事件？通过在一个地方定义这些通用事件，它肯定会节省时间并成为更清洁的解决方案。

我见过诸如事件聚合器和工厂模式之类的术语 - 但不确定最佳方法（或者它们是否会实现我所追求的）。

* * *

## 回答 #1

> 赞同：52
> 
> 时间：2012-04-06T12:12:55.020

您基本上是在描述事件聚合器或调度程序，是的。我有几篇关于在 Backbone 中构建和使用它们的文章：

[http://lostechies.com/derickbailey/2011/07/19/references-routing-and-the-event-aggregator-coordinating-views-in-backbone-js/](http://lostechies.com/derickbailey/2011/07/19/references-routing-and-the-event-aggregator-coordinating-views-in-backbone-js/)

[http://lostechies.com/derickbailey/2012/04/03/revisiting-the-backbone-event-aggregator-lessons-learned/](http://lostechies.com/derickbailey/2012/04/03/revisiting-the-backbone-event-aggregator-lessons-learned/)

网上还有很多文章可以对 Backbone 和其他 pub/sub 库做同样的事情。

在 Backbone 中执行此操作非常简单：

```
 vent = _.extend({}, Backbone.Events); 
```

现在您有了一个`vent`对象，可以在您的应用程序的所有视图和其他对象中用作事件聚合器。

```
 vent.on("some:event", function(){
  console.log("some event was fired");
});

vent.trigger("some:event"); 
```

# sql - 匹配由一个空格字符分隔的两个单词组成的所有字符串的 SQL 模式

> ID：10042129
> 
> 赞同：2
> 
> 时间：2012-04-06T10:17:26.977
> 
> 标签：sql, pattern-matching, wildcard

我在我的 LIKE 语句中写什么，以便它匹配由两个单词组成的所有字符串，这些单词由一个空格分隔？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-06T10:19:07.547

你可以试试这个：

```
WHERE x LIKE '%_ _%'
  AND x NOT LIKE '% % %' 
```

请注意，它会很慢！如果您的桌子可能很大并且您需要经常这样做，您可能需要重新考虑您的设计。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-06T10:24:12.480

一般来说，您可以尝试匹配“[零个或多个charactersInYourString][space][zero or more charactersInYourString]”。

例如

`"[a-zA-Z0-9]*[[:space:]][a-zA-Z0-9]*"`

对于由小写字母、大写字母和数字组成的字符串，由空格分隔。

# c++ - 安装 GMP 时出错

> ID：10042132
> 
> 赞同：0
> 
> 时间：2012-04-06T10:17:41.817
> 
> 标签：c++, gmp

我在 OSX Lion 上使用 TextMate 编写我的 C++ 程序。我想处理一些大数字，因此尝试安装 GMP。这就是我所做的。

1.  我从 gmplib.org 安装了 gmp 5.0.4
2.  下载后，我导航到终端中的目录并执行./configure。输出： http: [//pastebin.com/2M4AEgR6](http://pastebin.com/2M4AEgR6)
3.  执行制作。输出： http: [//pastebin.com/8TrjST2D](http://pastebin.com/8TrjST2D)

我尝试查阅[安装 GMP 手册](http://gmplib.org/manual/Installing-GMP.html)，这就是它所说的。g++ 在我的电脑上运行良好。可能出了什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-06T11:20:31.897

从评论：

> 等一下。我想到了。我所要做的就是打开导致`Operation not permitted`错误的文件，然后单击`allow`打开的对话框。

# symfony - Symfony2：我如何在 sonataAdminBundle 中集成分页？

> ID：10042136
> 
> 赞同：0
> 
> 时间：2012-04-06T10:18:01.753
> 
> 标签：symfony, pagination, admin, symfony-sonata

我需要在我的后端集成分页。我正在使用奏鸣曲AdminBundle。有这个 Sonata\AdminBundle\Admin\Admin 类，它有一个名为 $maxPerPage = 25; 的属性。

那么我如何覆盖这个类，以便我所有的其他管理类可以在不重复代码的情况下进行分页。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-15T11:38:46.793

使用依赖注入。在 services.xml 文件中，您可以添加在创建管理服务时必须调用的任何方法。

**文件：../YourAdminBundle/Resources/config/services.xml：**

```
<?xml version="1.0" ?>
<container xmlns="http://symfony.com/schema/dic/services" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://symfony.com/schema/dic/services http://symfony.com/schema/dic/services/services-1.0.xsd">

    <parameters>
        <!-- You define the maxpage only once -->
        <parameter key="admin_max_per_page_number">10</parameter>
    </parameters>
    <services>

        <service id="xyz_admin" class="Abc\Bundle\YourAdminBundle\Admin\XyzAdmin">
            <tag name="sonata.admin" manager_type="orm" group="xyz_group" label="Xyz"/>
            <argument />
            <argument>Abc\Bundle\YourAdminBundle\Entity\Xyz</argument>
            <argument>SonataAdminBundle:CRUD</argument>

            <call method="setMaxPerPage">
                <argument>%admin_max_per_page_number%</argument>
            </call>
        </service>

        <!-- ... another admin services... -->
    </services>
</container> 
```

# java - 你如何调整公历日期，使其在使用 HOUR_OF_DAY 之前的 24、48 和 78 小时

> ID：10042140
> 
> 赞同：2
> 
> 时间：2012-04-06T10:18:40.873
> 
> 标签：java, time, gregorian-calendar

我想在 Java 中调整 3 个公历日期，其中一个是 24 小时之前，另一个是 48 小时之前和最后 78 小时之前。我一直在使用 Calendar.HOUR 并将其更改为 Calendar.HOUR_OF_DAY。

自从我这样做后，我的代码就停止了工作。我正在使用一种方法将调整后的日期与其原始值进行比较，该方法使用 date1.before(date2) 和 date1.after(date2) 来获取一个可以是 1 或 0 的比较标志，然后我在我的代码中使用它。

我想知道如何在我的日期中调整 HOUR_OF_DAY 以实现上述目标。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-06T10:25:07.793

一些代码会很好。但如果我正确理解问题：

来自日历的 javadoc：

```
HOUR is used for the 12-hour clock. E.g., at 10:04:15.250 PM the HOUR is 10.
HOUR_OF_DAY is used for the 24-hour clock. E.g., at 10:04:15.250 PM the HOUR_OF_DAY is 22. 
```

从日期添加/减去小时数时：

```
Calendar cal = Calendar.getInstance();
cal.add(Calendar.HOUR, -24);
cal.add(Calendar.HOUR_OF_DAY, -24); 
```

这应该具有相同的效果。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-02-01T04:53:07.270

# android - 哪个 API 版本适用于 Android 2.3.6？

> ID：10042141
> 
> 赞同：24
> 
> 时间：2012-04-06T10:18:52.317
> 
> 标签：android, android-sdk-2.3

我需要为 android 2.3.6 制作一个应用程序。我应该使用哪个 SDK？SDK Manager 仅将 2.3.3 API 10 显示为最高版本。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-04-06T10:21:27.283

[Android API 级别列表](https://developer.android.com/guide/appendix/api-levels.html)显示您可以用于 2.3.6 的最高 API 级别是 API 级别 10。下一个更高级别 11 至少需要 Android 3.0。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-04-06T10:25:33.857

使用完全满足您要求的 2.3.6 API 10

如果您使用 2.2 或 2.1，它还可以帮助您使其与较低版本兼容

# android - 如何在父视图的触摸监听器中使用子视图的触摸事件？

> ID：10042142
> 
> 赞同：19
> 
> 时间：2012-04-06T10:19:00.817
> 
> 标签：android, view, touch

在我的应用程序中，我想在我的父视图中获取所有子视图的触摸事件，`onTouchListener`但我无法得到这个。

**例子：**

在我的活动视图中，我有一个框架布局，其中包含一些按钮和编辑文本。因此，每当我触摸按钮或编辑文本时，我都想在**framlayout 的** `onTouchListeners`.

这是我的代码..

**活动：**

```
private FrameLayout rootView;
    @Override
    public void onCreate(Bundle savedInstanceState)
    {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        rootView = (FrameLayout) findViewById(R.id.rootview);
        rootView.setOnTouchListener(new OnTouchListener()
        {
            @Override
            public boolean onTouch(View v, MotionEvent event)
            {
                Log.e("Touch Event: ", " X: " + event.getX() + " Y: " + event.getY());
                return false;
            }
        });
         } 
```

**主.xml：**

```
<?xml version="1.0" encoding="utf-8"?>
<FrameLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:padding="10dip"
    android:id="@+id/rootview">

<LinearLayout 
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:background="@android:color/white"
    android:orientation="vertical"
    android:layout_gravity="center" 
    android:padding="10dip">

     <TextView
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_gravity="center"
                    android:padding="4dp"
                    android:text="Login"
                    android:textColor="@android:color/black"
                    android:textSize="16dp"
                    android:textStyle="bold" />

                <TextView
                    android:layout_width="fill_parent"
                    android:layout_height="wrap_content"
                    android:layout_marginTop="10dp"
                    android:text="Username"
                    android:textColor="@android:color/black"
                    android:textSize="14dp"
                    android:textStyle="bold" />

                <EditText
                    android:id="@+id/edttextusername"
                    android:layout_width="fill_parent"
                    android:layout_height="wrap_content"
                    android:imeOptions="flagNoExtractUi"
                    android:singleLine="true" />

                <TextView
                    android:layout_width="fill_parent"
                    android:layout_height="wrap_content"
                    android:layout_marginTop="10dp"
                    android:text="Password"
                    android:textColor="@android:color/black"
                    android:textSize="14dp"
                    android:textStyle="bold" />

                <EditText
                    android:id="@+id/edttextpassword"
                    android:layout_width="fill_parent"
                    android:layout_height="wrap_content"
                    android:imeOptions="flagNoExtractUi"
                    android:password="true" />

                <LinearLayout
                    android:layout_width="fill_parent"
                    android:layout_height="wrap_content"
                    android:layout_gravity="center"
                    android:gravity="center"
                    android:orientation="horizontal"
                    android:padding="10dp" >

                    <Button
                        android:id="@+id/btnlogin"
                        android:layout_width="0dip"
                        android:layout_height="40dip"
                        android:layout_marginRight="5dp"
                        android:layout_weight="1"
                        android:enabled="false"
                        android:text="Login"
                        android:padding="5dip"
                        android:textColor="@android:color/black"
                        android:textStyle="bold" 
                        />

                    <Button
                        android:id="@+id/btncall"
                        android:layout_width="0dip"
                        android:layout_height="40dip"
                        android:layout_marginLeft="5dp"
                        android:layout_weight="1"
                        android:padding="5dip"
                        android:text="Cancel"
                        android:textColor="@android:color/black"
                        android:textStyle="bold" />
                </LinearLayout>

</LinearLayout>

    </FrameLayout> 
```

**问题：**所以每当我触摸按钮或编辑文本时，我都无法在我的框架布局的 onTouchListener 中获得触摸坐标（它没有被调用）。

**注意：**我不想为所有 childViews 添加单独的 onTouchListener。

提前致谢。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-11-27T00:01:32.657

您可以通过[`dispatchTouchEvent`](http://developer.android.com/reference/android/view/ViewGroup.html#dispatchTouchEvent(android.view.MotionEvent))在布局中覆盖来实现这一点。

```
public class MyFrameLayout extends FrameLayout {
    @Override
    public boolean dispatchTouchEvent(MotionEvent e) {
        // do what you need to with the event, and then...
        return super.dispatchTouchEvent(e);
    }
} 
```

然后使用该布局代替通常的 FrameLayout：

```
<com.example.android.MyFrameLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:padding="10dip"
    android:id="@+id/rootview">
  ... 
```

如果您需要阻止子视图接收事件，您也可以完全跳过超级调用，但我认为这很少见。如果您需要重新创建一些（但不是全部）默认功能，则需要重写很多内容：

[http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/4.1.1_r1/android/view/ViewGroup.java#ViewGroup.dispatchTouchEvent%28android.view.MotionEvent% 29](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/4.1.1_r1/android/view/ViewGroup.java#ViewGroup.dispatchTouchEvent%28android.view.MotionEvent%29)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-24T12:04:06.167

我已经尝试过类似的设计（在根 FrameLayout 上只有一个 onTouch 侦听器）并且它有效。只要 onTouch 返回 true 而不是 false，我就能得到所有的分数。否则，我只得到第一点。我找不到这个“退货”问题的原因，因为我预计会有相反的行为。

但是，根据我的经验，如果您将任何子视图设置为可点击，则其父视图的 onTouch 将不起作用。如果您有其他解决方案并且可以分享，那就太好了。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-07-05T08:17:06.420

2个解决方案：

1.  [**在**](https://developer.android.com/training/gestures/viewgroup.html)ViewGroup 上使用[**onInterceptTouchEvent**](https://developer.android.com/reference/android/view/ViewGroup.html#onInterceptTouchEvent(android.view.MotionEvent))，如下所示[](https://developer.android.com/training/gestures/viewgroup.html)

***   避免让布局处理触摸事件，并拥有一个覆盖其整个大小的布局的子视图来处理触摸事件。

    它不像扩展类那么有效，但它更容易并且不需要创建新的文件/类。

    例子：

    只需将触摸事件添加到视图中，它将处理它们而不是任何其他视图。** 

 *** * *

## 回答 #4

> 赞同：-3
> 
> 时间：2016-11-04T08:46:08.530

它可以通过使用“onInterceptTouchEvent”来实现。请试试这个，它可能有效

```
@Override
public boolean onInterceptTouchEvent(MotionEvent ev) {
     onTouchEvent(ev);
     return  false;
} 
```**

# c# - MSI 安装程序不会创建空目录

> ID：10042148
> 
> 赞同：1
> 
> 时间：2012-04-06T10:19:27.337
> 
> 标签：c#, windows-installer

在 MSI 安装程序设置项目中。我在文件系统\应用程序文件夹\我的目录中添加了一个空目录。我建立项目。

对于 project.msi 时的应用程序安装，没有“我的目录”，因为我的目录是空的。

我需要通过代码创建空目录吗？这是 MSI 安装程序的限制。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-09-22T13:24:36.813

MSI 支持通过其**[CreateFolder 表](https://msdn.microsoft.com/en-us/library/windows/desktop/aa368053(v=vs.85).aspx)**创建空文件夹。即使您用于编译 MSI 的工具不支持创建空文件夹，您仍然可以使用 Orca 直接编辑表，您应该会看到您的空文件夹已正确创建。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-09-22T09:42:27.997

我正在使用 Visual Studio 2015 Windows Installer Template 。我找到了如何创建空文件夹。

1.  将所有文件夹（包括空文件夹）添加到您的 Windows 安装程序项目中。

2.  编译你的项目

3.  通过 Windows 资源管理器打开您的项目并打开文件名 {ProjectName}.vdproj

4.  编辑这个文件，找到你要创建的空文件夹名称，将“AlwaysCreate”=“11:FALSE”替换为“AlwaysCreate”=“11:True”

    它对我有用:)

# mysql - 如何访问 Amazon EBS 上的 mysql 数据

> ID：10042153
> 
> 赞同：0
> 
> 时间：2012-04-06T10:19:52.310
> 
> 标签：mysql, amazon-web-services, amazon-ec2, amazon-ebs

我已经安装了卷，但我不知道如何从本地机器访问 EBS mysql 数据？非常感谢您的任何建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T17:38:23.250

When you start `mysqld`, you need to tell it where data files are to be stored.

Assuming your EBS device is mounted at `/mnt/data`, the following my.cfg(or my.ini) file entry would do the trick for

InnoDB files:

> innodb_data_file_path=/mnt/data

[http://dev.mysql.com/doc/refman/5.5/en/innodb-configuration.html](http://dev.mysql.com/doc/refman/5.5/en/innodb-configuration.html)

For MyISAM:

> datadir=/mnt/data

[http://dev.mysql.com/doc/refman/5.5/en/server-options.html#option_mysqld_datadir](http://dev.mysql.com/doc/refman/5.5/en/server-options.html#option_mysqld_datadir)

# python - 无法使用 ctypes 将参数传递给 dll (Python)

> ID：10042155
> 
> 赞同：4
> 
> 时间：2012-04-06T10:19:55.270
> 
> 标签：python, dll, ctypes

使用 ctypes 时遇到一些问题

我有一个带有以下界面的testdll

```
extern "C"
{
    // Returns a + b
    double Add(double a, double b);
    // Returns a - b
    double Subtract(double a, double b);
    // Returns a * b
    double Multiply(double a, double b);
    // Returns a / b
    double Divide(double a, double b);
} 
```

我也有一个 .def 文件，所以我有“真实”的名字

```
LIBRARY "MathFuncsDll"
EXPORTS

 Add
 Subtract
 Multiply
 Divide 
```

我可以通过 ctype 从 dll 加载和访问函数，但我无法传递参数，请参阅 python 输出

```
>>> from ctypes import *
>>> x=windll.MathFuncsDll
>>> x
<WinDLL 'MathFuncsDll', handle 560000 at 29e1710>
>>> a=c_double(2.12)
>>> b=c_double(3.4432)
>>> x.Add(a,b)

Traceback (most recent call last):
  File "<pyshell#76>", line 1, in <module>
    x.Add(a,b)
ValueError: Procedure probably called with too many arguments (16 bytes in excess)
>>> 
```

但是我可以在没有参数的情况下添加函数？！？！？！？！

```
>>> x.Add()
2619260 
```

有人可以指出我正确的方向吗？我想忘记一些明显的事情，因为我可以从其他 dll 调用函数（例如 kernel32）

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-06T20:39:31.870

`ctypes`除非您另外指定，否则为参数和返回值假定`int`和类型。导出的函数通常也默认为 C 调用约定（ctypes 中的 CDLL），而不是 WinDLL。试试这个：`pointer``int`

```
from ctypes import *
x = CDLL('MathFuncsDll')
add = x.Add
add.restype = c_double
add.argtypes = [c_double,c_double]
print add(1.0,2.5) 
```

### 输出

```
3.5 
```

# c++ - 如何避免使用 Google Mock 指针？

> ID：10042156
> 
> 赞同：1
> 
> 时间：2012-04-06T10:19:59.283
> 
> 标签：c++, pointers, googletest, googlemock

在我们的项目中，我们使用 Google Mock，但在多个地方，我们在生产代码中进行构造，只是为了确保类是“可模拟的”。我们这样做是因为我们希望获得 Google Mock 的好处，但另一方面我们更希望拥有更优化的生产代码。以下情况是我们经常做的事情，并且想摆脱。

```
class A{
  public:
    void doSomething(); //Does something with _someB
    void setSomeB(B* mockedB); //This is only here for GMock
  private:
    B* _someB; //This should not be a pointer, it is a pointer only for GMock
} 
```

如您所见，这只是一个简化的示例，我省略了细节。基本上我们想摆脱 B 作为指针。我们将它作为指针的原因是我们可以在我们的测试代码中继承 B（模拟它）并使用该 setter 设置它。

有没有办法避免这种情况？我们不能让 B 在班级范围内吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T19:37:25.933

如果您真的不想`_someB`将其保留为指针，则可以选择将其声明包装在预处理器命令中：

```
#ifdef MOCK_TEST
    B _someB;
#else
    MockB _someB;
#endif 
```

如果您不这样做，则没有简单的方法可以将 gmock 期望和/或断言放在 上`_someB`，因为它不会是模拟对象的实例。除了丑陋之外，它还有一个缺点，就是需要`Class A`编译两次所在的库，一次有`MOCK_TEST`定义，一次没有。然而，它确实消除了对 setter 的需要`_someB`。

即使您选择保留`_someB`为指针，也许比创建公共设置器更好的选择是将测试类声明为的朋友类，`A`以允许测试直接设置和访问`_someB`。

顺便说一句，使用前导下划线命名变量 通常[被认为是一种糟糕的形式。](https://stackoverflow.com/questions/228783/what-are-the-rules-about-using-an-underscore-in-a-c-identifier)

# ios - 在具有 MapKit 框架的 Xcode 中运行项目时出现编译器错误

> ID：10042160
> 
> 赞同：0
> 
> 时间：2012-04-06T10:20:13.417
> 
> 标签：ios

![Xcode 错误截图](../Images/6aa63e7c68d4f62ff651e18428c93f15.png)

我遇到了严重的麻烦。我使用 mapkit 框架创建了一个测试项目，它可以正常工作。现在的问题是，当我将相同的代码与我的原始项目集成时，我在 BUILD 之后得到了这些错误。“忽略文件 /Users/*****projFolderPath*****/MapKit.framework/MapKit，文件是为不受支持的文件格式构建的，该文件格式不是被链接的体系结构 (i386)”

我已经添加了 MapKit 的框架并完成了在我的测试项目中工作的确切事情。

我什至删除了构建并尝试了更多的东西，但没有任何成功。

如何解决这个错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T11:43:18.607

原因是因为模拟器。在设备上运行它，它将完美运行

# c++ - 通过代理进行客户端-服务器编程

> ID：10042166
> 
> 赞同：1
> 
> 时间：2012-04-06T10:20:47.160
> 
> 标签：c++, sockets, proxy

在我的客户端-服务器案例中，客户端通过代理服务器向服务器发送文件。我经常使用 FTP 客户端-服务器，但不知道如何通过代理。

**客户端 <-> 代理服务器 <-> 服务器**

这是客户端的代码：

```
 SOCKET Connect;
Connect= socket(AF_INET, SOCK_STREAM, NULL);

SOCKADDR_IN addrss;
int addrss_length = sizeof(addrss);
addrss.sin_addr.s_addr = inet_addr("127.0.0.1");
addrss.sin_family = AF_INET;
addrss.sin_port = htons(6783);

connect(Connect, (SOCKADDR*) &addrss, sizeof(addrss));... 
```

这是服务器的代码：

```
SOCKADDR_IN addrss;
int addrss_length = sizeof(addrss);
addrss.sin_addr.s_addr = inet_addr("127.0.0.1");
addrss.sin_family = AF_INET;
addrss.sin_port = htons(6783);

SOCKET Listen = socket(AF_INET, SOCK_STREAM,NULL);
SOCKET Connect = socket(AF_INET, SOCK_STREAM,NULL);

bind(Listen, (SOCKADDR*) &addrss, addrss_length);

listen(Listen,5); 
```

# c# - ((i % 2 == 0) && (i % i == 0)) 此技术不适用于生成素数 c#

> ID：10042172
> 
> 赞同：0
> 
> 时间：2012-04-06T10:21:19.983
> 
> 标签：c#, .net

你好！我正在尝试生成一个素数，但我的情况`i%i`正在产生错误。

我收到错误“尝试除以零”。

我将如何解决这个问题？

```
int a, n, i;

Console.WriteLine("Enter ur number");

n = Convert.ToInt32(Console.ReadLine());

for (i = 0; i <= n; i++)
{
    if ((i % 2 == 0) && (i % i == 0))
    {
        a = i;
        Console.WriteLine("The prime numbers are", a);
    }
}

Console.ReadLine(); 
```

希望能尽快听到你的...

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-04-06T10:23:33.993

当`i`为零时，您正在执行的第一次循环会`0 % 0`导致除以零错误。

至于您的功能要做什么，我不知道。我在这里看不到任何与质数相关的东西。您只是找出所有小于 的偶数`n`。

让我们看一下`if`测试：

```
if ((i % 2 == 0) && (i % i == 0)) 
```

第二部分，`i % i == 0`只要`i`不是，就永远是真的`0`。所以那部分是虚假的。并`i % 2 == 0`简单地测试是否`i`是偶数。

您的代码实际上打算做什么？您是否正在尝试测试一个数字是否是素数？如果是这样，最简单的方法是这样的：

```
static bool isPrime(int n)
{
    Debug.Assert(n>0);
    for (int i=2; i<n; i++)
        if (n % i == 0) // n is exactly divisible by i, so n is not prime
            return false;
    return true; // we could not find a factor, so n must be prime
} 
```

您当前的代码无法输出任何数字，因为您的调用`Console.WriteLine`不完全正确。你的意思是：

```
Console.WriteLine("The prime numbers are: {0}", a); 
```

要说明的另一点是您的代码版本将素数测试与 I/O 代码混合在一起。将它们混合在一个大例程中会使您更难理解和调试代码。正如我在此处说明的那样，将素性测试拆分为一个单独的函数，您可以更轻松地检查其正确性。一旦你知道它是正确的，你就可以从你的 IO 代码中使用它。然后你可以专注于让你的 IO 代码正确。这可能看起来像这样：

```
Console.Write("Enter your number: ");
int n = Convert.ToInt32(Console.ReadLine());
Console.WriteLine("The prime numbers are:");
for (int i = 1; i <= n; i++)
    if (isPrime(i))
        Console.WriteLine(i);
Console.ReadLine(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-06T10:23:30.670

改变

```
for (i = 0; i <= n; i++) 
```

至

```
for (i = 1; i <= n; i++) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-06T10:24:16.800

好吧，当 i 为 0 时，您正在尝试计算`0%0`，这确实是尝试除以零。

无论如何，除非 i 为 0，否则 i%i*始终*为 0。这几乎不是计算素数的方法。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-06T10:31:52.903

`%`是模运算符。它给出了两个数字之间除法的余数。

```
(i % 2) == 0 
```

将测试是否`i`是偶数。

```
(i % i) == 0 
```

将永远返回`true`，`i > 0`因为`i / i = 1 remainder 0`。何时`i`是`0`，您将获得除以零异常，因为您正在尝试评估`0 / 0`。

（另见：http: [//msdn.microsoft.com/en-us/library/0w4e0fzs.aspx](http://msdn.microsoft.com/en-us/library/0w4e0fzs.aspx)）

要确定是否`i`是素数，您需要确保它`i`不能*被*`2`从到的所有整数整除`floor(i / 2)`。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-06T10:25:11.073

很明显，因为您从 0 开始循环，所以您应该从 1 开始循环。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-06T10:46:16.637

一个在 C 中寻找素数的儿童程序是

```
#include<stdio.h>

main()
{
   int n, c = 2;

   printf("Enter a number to check if it is prime\n");
   scanf("%d",&n);

   for ( c = 2 ; c <= n - 1 ; c++ )
   {
      if ( n%c == 0 )
      {
         printf("%d is not prime.\n", n);
     break;
      }
   }
   if ( c == n )
      printf("%d is prime.\n", n);

   return 0;
} 
```

当您检查素数时：检查这是什么[素数](http://en.wikipedia.org/wiki/Prime_number)。

```
Prime number are those which will not divided by any number except 1 and itself. 
```

**根据声明，您的支票号码应从 2 到 N-1 开始。**

```
 bool isPrime = true;
            int number = Convert.ToInt32(Console.Read());
            int i = 2;
            while (i < number)
            {
                if (number % i == 0)
                {
                    isPrime = false;
                    break;
                }
                i++;
            }

            if (isPrime)
            {
                //Prime number
            }
            else
            {
                //Not Prime No
            } 
```

检查[这个](http://www.programmingsimplified.com/c/source-code/c-program-for-prime-number)以了解如何在某个范围 1 - 100 等之间生成素数，因此您必须将素数检查循环放在另一个计数器循环中。

# ubuntu - 仅对某些选定命令绕过 Sudo

> ID：10042178
> 
> 赞同：-1
> 
> 时间：2012-04-06T10:21:55.367
> 
> 标签：ubuntu

如何在使用时绕过 sudo

> 挂载 /dev/nbd0p1 mnt

和

> qemu -nbd /dev/nbd0 /desktop/xyz.vdi

仅上述命令，我们该怎么做，如果您有任何想法，请不吝赐教。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-06T10:26:45.573

您可以通过编辑`/etc/sudoers`文件来做到这一点：将此行添加到文件中：

```
your-username ALL=NOPASSWD: your-command 
```

绕过所有用户的所有命令，添加这个

```
 ALL ALL=(ALL) NOPASSWD:ALL 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T22:17:34.017

实际上，您可以在 sudoers 文件中指定，在发出这两个特定命令时不需要密码，如下所示：

用户主机 = (root) NOPASSWD: /sbin/shutdown 用户主机 = (root) NOPASSWD: /sbin/reboot

这是来源

[https://askubuntu.com/questions/159007/how-do-i-run-specific-sudo-commands-without-a-password](https://askubuntu.com/questions/159007/how-do-i-run-specific-sudo-commands-without-a-password)

# python - networkx代码python的解释

> ID：10042181
> 
> 赞同：1
> 
> 时间：2012-04-06T10:22:09.690
> 
> 标签：python, networkx

我是python编码的新手。我希望修改此代码以开发二分两种模式版本。它是来自 networkx 的代码，用于制作几何随机图。我必须掌握这个功能的大部分内容，但我无法准确理解第 94 到 99 行在做什么。我理解 while, zip 和 nodes.pop() 但其他部分让新手感到困惑。任何人都可以帮助解释这部分代码所做的比给出的一般 # 描述更多吗？

```
G=nx.Graph()
G.name="Random Geometric Graph"
G.add_nodes_from(range(n)) 
if pos is None:
    # random positions
    for n in G:
        G.node[n]['pos']=[random.random() for i in range(0,dim)]
else:
    nx.set_node_attributes(G,'pos',pos) 
# connect nodes within "radius" of each other
# n^2 algorithm, could use a k-d tree implementation
nodes = G.nodes(data=True)
while nodes:             #line94
    u,du = nodes.pop()
    pu = du['pos']
    for v,dv in nodes:
        pv = dv['pos']
        d = sum(((a-b)**2 for a,b in zip(pu,pv))) #line99
        if d <= radius**2:
            G.add_edge(u,v)
return G 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-06T10:36:01.857

```
nodes = [some list]
while nodes:
  a = nodes.pop()
  for b in nodes:
    # do something 
```

这段代码是一个非常常见的习惯用法，将每个节点与每个其他节点仅组合*一次*（因此，对于该部分中执行的操作，顺序`a`和`b`应该无关紧要`# do something`）。

它之所以有效，是因为空列表在循环条件下被认为是假值`while`，而非空列表被认为是布尔真。

```
d = sum(((a-b)**2 for a,b in zip(pu,pv))) 
```

这条线计算两个向量和的[欧几里得距离](http://en.wikipedia.org/wiki/Euclidean_distance)的平方。最好将其拆开来证明这一点：`pu``pv`

```
>>> pu = (6,6,6)
>>> pv = (1,3,7)
>>> zip(pu, pv)
[(6, 1), (6, 3), (6, 7)]
>>> [(a-b) for a,b in zip(pu, pv)]
[5, 3, -1]
>>> [(a-b)**2 for a,b in zip(pu, pv)]
[25, 9, 1]
>>> sum((a-b)**2 for a,b in zip(pu, pv))
35 
```

在最后一步中，我们不再使用列表推导，因为我们不需要列表。`sum`只需要某种可迭代形式的值，所以我们使用生成器表达式。

# jquery - jQuery 文件上传：是否可以使用提交按钮触发上传？

> ID：10042184
> 
> 赞同：27
> 
> 时间：2012-04-06T10:22:34.943
> 
> 标签：jquery, jquery-plugins

我正在为基于 AJAX 的上传使用[jQuery 文件上传](https://github.com/blueimp/jQuery-File-Upload "jQuery文件上传主页")。它总是在选择文件后开始上传。是否可以更改行为以使用“提交”按钮？我知道[问题 #35](https://github.com/blueimp/jQuery-File-Upload/issues/35)，但该选项`beforeSend`似乎已被删除。

我使用的是[Basic Plugin](https://github.com/blueimp/jQuery-File-Upload/wiki/Basic-plugin)，而不是完整版。

也许我应该按照那里的建议切换到基于纯 XHR 的上传：[jQuery Upload Progress 和 AJAX file upload](https://stackoverflow.com/questions/4856917/jquery-upload-progress-and-ajax-file-upload)。

* * *

## 回答 #1

> 赞同：49
> 
> 时间：2013-04-16T21:58:32.590

如果你有按钮

```
<button id="up_btn">Upload</button> 
```

你可以试试

```
$('#fileupload').fileupload({
    dataType: 'json',
    add: function (e, data) {            
        $("#up_btn").off('click').on('click', function () {
            data.submit();
        });
    },
}); 
```

编辑：根据评论，一个更好的答案考虑`off`避免重复的请求。（也可以`unbind`，我不检查是否是`bind`，`unbind`但 jquery 团队从 1.7 开始推荐`on`和`off` [链接）](http://blog.jquery.com/2011/11/03/jquery-1-7-released/)

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2016-07-07T01:25:20.233

这些答案都不适用于多个文件上传。我的案例涉及在评论线程中允许多个附件。所以我需要先保存评论获取id，然后上传并保存所有附件。这似乎是一件微不足道的事情，但是有了这个插件，它就不是那么直观了。我的解决方案在 jQuery 中使用自定义事件，效果很好。

当前接受的答案绑定到“添加”回调中按钮的单击事件，但“添加”回调为每个文件调用一次。如果您每次都取消绑定所有事件，则只会上传最后一个文件。

```
$('#fileupload').fileupload({
    dataType: 'json',
    add: function (e, data) {
        $("#up_btn").on('customName', function (e) {
            data.submit();
        });
    },
}); 
```

通过将提交按钮绑定到自定义名称，我们可以在提交图像之前进行任何我们想要的预处理。就我而言，它涉及提交评论并取回我在单独调用中所做的评论 ID。这段代码只是响应点击，但你可以在触发事件之前做任何你想做的事情。

```
$("#up_btn").on('click', function (e) {
    e.preventDefault();
    $("#up_btn").trigger( "customName");
}); 
```

您可以在触发事件时传递您想要的任何数据，因此它确实使您可以完全控制您的表单。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2014-03-23T20:58:48.843

您还可以在**jquery.fileupload.js中找到**

第 142 行有一个**“自动上传”**选项。

```
uploadedBytes: undefined,
// By default, failed (abort or error) file uploads are removed from the
// global progress calculation. Set the following option to false to
// prevent recalculating the global progress data:
recalculateProgress: true,
// Interval in milliseconds to calculate and trigger progress events:
progressInterval: 100,
// Interval in milliseconds to calculate progress bitrate:
bitrateInterval: 500,
// By default, uploads are started automatically when adding files:
autoUpload: true    // <<---------- here 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2014-12-04T10:28:19.973

您可以通过挂钩*添加*事件来做到这一点。在那里，您可以阻止上传者执行其默认行为。*jquery-file-upload* -docs 解释了这一点，但有点难找。

以下内容写在[blueimp 基本上传器教程](https://github.com/blueimp/jQuery-File-Upload/wiki/Basic-plugin#how-to-start-uploads-with-a-button-click)中：

```
$(function () {
    $('#fileupload').fileupload({
        dataType: 'json',
        add: function (e, data) {
            data.context = $('<button/>').text('Upload')
                .appendTo(document.body)
                .click(function () {
                    data.context = $('<p/>').text('Uploading...').replaceAll($(this));
                    data.submit();
                });
        },
        done: function (e, data) {
            data.context.text('Upload finished.');
        }
    });
}); 
```

实际上非常重要的是，您创建的提交按钮不在表单内！

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2014-08-28T14:33:48.710

确保不要在每次添加文件时附加事件来堆叠事件。这样表单将被多次提交。

我会做这样的事情

```
$('#fileupload').fileupload({
    dataType: 'json',
    add: function (e, data) {            
        $("#up_btn").off('click').on('click', function () {
            data.submit();
        });
    },
}); 
```

注意 off() 方法删除所有以前的附加事件。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2014-10-31T20:18:15.407

使用添加模板跟随显示上传和下载必须这样做

```
$('#fileupload').fileupload({
    dataType: 'json',
    add: function (e, data) {
        var that = this;
	    $.blueimp.fileupload.prototype.options.add.call(that, e, data);
        $("#up_btn").on('click', function () {
            data.submit();
        });
    },
});
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-04-06T10:56:23.960

在下载的示例 Navigate to`js/jquery.fileupload-ui.js`中，您将拥有默认`autoUpload`设置的“继续”并将其设置为“ ”，然后您可以使用提交行为。`true``false`

***编辑：***

试试这个基本实现：

```
 <script>
    /*global $ */
    $(function() {

        $('.file_upload').fileUploadUI({
            url: 'FileUpload.ashx',
            method: 'POST',
            uploadTable: $('#files'),
            downloadTable: $('#files'),
            buildUploadRow: function (files, index) {
                return $('<tr><td>' + files[index].name + '<\/td>' +
                    '<td class="file_upload_progress"><div><\/div><\/td>' +
                    '<\/td><\/tr>');
            },
            buildDownloadRow: function(file) {
            return $('<tr id="file_'+file.name+'"><td>' + file.name + '<\/td>'
                + '<td class="file_uploaded">' +
                '<span class="ui-icon ui-icon-check"><\/span>' +
                '<\/td><\/tr>');

            }, beforeSend: function(event, files, index, xhr, handler, callBack) {
                if (files[index].size > 500000) {
                    handler.uploadRow.find('.file_upload_progress').html('<span class="ui-icon ui-icon-alert"><\/span>FILE TOO BIG!');
                    setTimeout(function() {
                        handler.removeNode(handler.uploadRow);
                    }, 10000);
                    return;
                }
                callBack();
            }
        });
    });
</script> 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2017-01-18T21:29:37.370

以下是我使用按钮实现文件上传的方式：

这是按钮：

```
 <button id="cmdSave" type="button" class="btn btn-primary" onclick="SaveInfo();">Save</button> 
```

这是输入元素：

```
 <input id="fileupload" type="file" name="files[]" style="display: none;"> 
```

这是 SaveInfo() 函数：

```
 //use this function to save Info with Attached file
    function SaveInfo() {
        // setup our wp ajax URL
        var action_url = document.location.protocol + '//' + document.location.host + '/SaveInfo';

        $('body').addClass('waiting');
        //get the file(s)
        var filesList = $('input[type="file"]').prop('files');

        //Initialize the file uploader
        $('#Editor').fileupload();           //Editor is the Id of the form

        //Along with file, this call internally sends all of the form data!!!
        $('#Editor').fileupload('add', {
            files: filesList,
            url: action_url
        })

        $('#Editor').bind('fileuploaddone', function (e, data) {
            e.preventDefault(); //stop default behaviour!
            if (data.result.status == 1) {  //saved!
                 //do something useful here...
            }
            $('body').removeClass('waiting');
        });

        // Callback for failed (abort or error) uploads:
        $('#Editor').bind('fileuploadfail', function (e, data) {
            e.preventDefault(); //stop default behaviour!
            $('body').removeClass('waiting');
        });
    } 
```

注意：它可能不是很优雅，但它对我有用。这也会将表单中的所有字段发送到服务器。如果文件也在上传，这只会发送表单中的字段。如果文件不存在，则不会将表单数据发送到服务器！虽然我没有用多个文件对其进行测试，但这种方法也可以扩展为多个文件。当我尝试时，我会用信息更新这篇文章。

# jquery - 显示自动完成结果 Jquery 的问题

> ID：10042187
> 
> 赞同：0
> 
> 时间：2012-04-06T10:22:41.953
> 
> 标签：jquery, json, jquery-ui, jsonp

我有这个脚本，它以以下格式返回查询结果。例如对于查询“fb”，结果如下

```
 ["fb",["fb","fbi","fbi most wanted","fbi jobs","fb banners","fbook","fb covers","fbanners","fbisd","fbop",],[],[]] 
```

我正在使用以下 Jquery 代码

```
$( "#city" ).autocomplete({
        source: function( request, response ) {
            $.ajax({
                url: "s.php",
                dataType: "json",
                data: {
                    "q" : request.term
                },
                success: function( data ) {
                    response(data[1]);
                }
            });
        },
        minLength: 2
    });
}); 
```

它没有向我显示结果。你能纠正我吗，我哪里错了！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-06T10:33:13.443

[http://jsfiddle.net/zFdWZ/](http://jsfiddle.net/zFdWZ/)

似乎：您的响应数据实际上等于 ["fb"]。

为什么？

[http://jqueryui.com/demos/autocomplete/](http://jqueryui.com/demos/autocomplete/)查看**预期数据格式**：

> 来自本地数据、url 或回调的数据可以有两种变体：
> 
> ```
> An Array of Strings:
> [ "Choice1", "Choice2" ]
> An Array of Objects with label and value properties:
> [ { label: "Choice1", value: "value1" }, ... ] 
> ```

# php - 如何使 PHP 函数根据百分比显示频率？

> ID：10042190
> 
> 赞同：0
> 
> 时间：2012-04-06T10:23:01.513
> 
> 标签：php, random, frequency

这里是示例案例..

我想根据访问者点击率按百分比随机显示横幅。例如，我想在 70% 的访问者点击率中显示广告。问题是我们不知道有多少访问者。

如果它更容易我们设置百分比 10%, 20%, 30% ... 100%

*   如果我们每 100 次点击保存计数器并重置，也许也有可能

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-06T10:37:05.083

几乎和我对横幅所做的一样，随机抽样。

```
$freq_banners = array(
    5  => 'banner_3',
    10 => 'banner_1',
    85 => 'banner_2',
);
$use_banner = null;
$sum = 0;
$key = rand(1,100);
foreach ( $freq_banners as $banner_freq => $banner ) {
    $sum += $banner_freq;
    if ( $key <= $sum ) {
        $use_banner = $banner;
        break;
    }
} 
```

干杯

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-06T10:26:06.457

你不需要知道有多少访客。只需在 1 到 100 之间取一个随机数，如果是 70 或更低，则在这 70% 范围内。

最终这会成功，并向 70% 的人展示横幅：

```
if (rand(1,100) <= 70) {
    display_banner();
} 
```

如果你想保留这个数字，并在所有页面视图中显示给用户，然后将它存储在某种类型的 $_SESSION 变量中，并基于该值显示横幅。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-06T10:29:08.897

我相信

```
$percentageVisitors  =  ceil(($currentVisitors / $totalVisitors) * 100) ; 
```

解决方案

```
if( $percentageVisitors >= 70)
 {
    showRandomAdvert();
 } 
```

我希望这有帮助

比

# c++ - 如何使用 C/C++ 编写/创建大于 2GB 的文件

> ID：10042191
> 
> 赞同：2
> 
> 时间：2012-04-06T10:23:01.827
> 
> 标签：c++, c, large-files

我尝试使用 write() 函数将一大块内存写入文件（超过 2GB）但从未成功。有人可以告诉我该怎么做吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-06T10:30:30.713

假设 Linux :)

[https://users.suse.com/~aj/linux_lfs.html](https://users.suse.com/%7Eaj/linux_lfs.html)

*   定义`_FILE_OFFSET_BITS`为 64。 ( `gcc -D_FILE_OFFSET_BITS=64`)
*   定义`_LARGEFILE_SOURCE`和`_LARGEFILE_SOURCE64`。
*   使用`O_LARGEFILE`带有 open 的标志对大文件进行操作

还有一些信息： [http ://www.gnu.org/software/libc/manual/html_node/Opening-Streams.html#index-fopen64-931](http://www.gnu.org/software/libc/manual/html_node/Opening-Streams.html#index-fopen64-931)

如今，您系统上的文件系统将支持开箱即用的大文件。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-06T13:04:04.403

添加`-D_FILE_OFFSET_BITS=64`到您的编译器命令行（又名`CFLAGS`），它会工作。这在任何 64 位系统上都不是必需的，如今在某些（但不是全部）32 位系统上也是不必要的。

避免建议在您的源代码中进行写作等`O_LARGEFILE`。`open64`这是不可移植的，而且很简单，丑陋。

**编辑：**实际上，我认为我们都误读了您的问题。如果您在 32 位系统上，内存中最大可能的单个对象是 2GB-1 字节（即`SSIZE_MAX`）。根据 POSIX，未定义`write`不适合的 for size 参数的行为；`ssize_t`这是因为`write`返回类型`ssize_t`，如果它更大，则无法表示写入的字节数。或许更重要的是，实现允许对象太大以至于它们的大小不适合是很危险的`ptrdiff_t`，因为这会造成指针算术可能引发整数溢出并因此导致未定义行为的情况。您可能已经能够创建如此大的对象`mmap`（我认为这是您系统内核或 libc 中的错误），但这是一个非常糟糕的主意，会导致各种错误。如果您需要大于 2GB 的单个对象，您确实需要在 64 位机器上运行以使其安全且无错误。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-06T10:27:32.183

它取决于操作系统、处理器、文件系统。在 Linux/x86-64 系统（带有 ext3 文件系统）上，这很简单。只需使用通常的库函数（在 C++`std::ofstream`中，在 C 中`<stdio.h>`，`fopen`&&`fprintf`等）或底层系统调用（打开，写入）。

# c++ - 用于控制 Linux 守护进程的 API

> ID：10042192
> 
> 赞同：0
> 
> 时间：2012-04-06T10:23:08.487
> 
> 标签：c++, linux

我需要的是通过某种 API 来控制 Linux 守护进程的可能性，例如检查某个守护进程是否正在运行、启动/停止/重新启动它等。

是否有任何提供此功能的 Linux 库？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T10:57:07.177

您也可以使用[D-Bus](http://dbus.freedesktop.org/doc/dbus-tutorial.html)或[SNMP](http://en.wikipedia.org/wiki/Simple_Network_Management_Protocol)。然而，大多数守护进程只是将它们的 PID 写入到下面的某个文件中`/var/run/`并接受`SIGTERM`停止`SIGHUP`信号和重新加载其配置文件的信号（通常在 下`/etc/`）。

请注意，如果您采用通常的约定，即您的守护程序`mydprog`正在将其 pid 写入`/var/run/mydprog.pid`其他程序中，则可以在那里读取该 pid 并使用带有 0 信号的[kill(2)来检查守护进程是否正在运行。](http://man7.org/linux/man-pages/man2/kill.2.html)`/proc/1234/`您还可以访问（其中 1234 是守护进程的 pid）下的一些伪文件，特别是`/proc/1234/status`，请参阅[proc(5)](http://man7.org/linux/man-pages/man5/proc.5.html)了解更多信息。

您还可以设计您的守护程序，以便它通过提供状态信息来回答某些查询，例如在某些[unix(7)](http://man7.org/linux/man-pages/man7/unix.7.html)或[tcp(7)套接字上使用某些](http://man7.org/linux/man-pages/man7/tcp.7.html)[JSONRPC](http://jsonrpc.org/)协议。您可能会考虑通过一些 HTTP 服务器库（如[libonion](http://coralbits.com/libonion/)）或任何其他消息传递或远程过程调用协议来使用一些 HTTP 协议[。](https://en.wikipedia.org/wiki/Hypertext_Transfer_Protocol)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-06T10:34:48.640

简短的回答是否定的。
一些守护进程可能有一个 api，但这将是特定于该守护进程的。
您可以运行`/etc/init.d/<daemon_name> start|stop|status`以启动停止或获取大多数守护程序的状态

# c++ - 计算加泰罗尼亚数 mod 素数

> ID：10042195
> 
> 赞同：8
> 
> 时间：2012-04-06T10:23:15.807
> 
> 标签：c++, c, 32-bit

以下是问题描述：

让我们`c[n]`成为加泰罗尼亚数`n`并且`p`是一个大素数，例如。`1000000007`

我需要计算范围`c[n] % p`从`n``{1,2,3,...,1000}`

我遇到的问题是，在 32 位机器上，当你为这么大的整数计算加泰罗尼亚数时，你会溢出。我熟悉模运算。还

```
(a.b) % p = ((a % p)(b % p)) % p 
```

这个公式可以帮助我分别解决分子中的溢出问题，但我不知道如何处理分母。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-06T18:25:57.230

对于 1000000007 的模数，仅使用 32 位整数避免溢出是很麻烦的。但是任何体面的 C 实现都提供 64 位整数（任何体面的 C++ 实现也提供），所以这不是必需的。

然后处理分母，一种可能性是，正如 KerrekSB 在他的评论中所说，计算分母模数的模逆`p = 1000000007`。[您可以使用扩展的欧几里得算法](http://en.wikipedia.org/wiki/Extended_Euclidean_algorithm)或等效的 的连分数展开来计算模逆`k/p`。然后，不是在计算中除以`k`，而是乘以它的模逆。

另一种选择是对加泰罗尼亚数使用 Segner 的递推关系，它给出了没有除法的计算：

```
C(0) = 1
         n
C(n+1) = ∑ C(i)*C(n-i)
         0 
```

由于您只需要 的加泰罗尼亚数字`C(k)`，`k <= 1000`您可以预先计算它们，或在程序启动时快速计算它们并将它们存储在查找表中。

* * *

如果与预期相反，没有可用的 64 位整数类型，您可以通过将因子拆分为低 16 位和高 16 位来计算模积，

```
a = a1 + (a2 << 16)    // 0 <= a1, a2 < (1 << 16)
b = b1 + (b2 << 16)    // 0 <= b1, b2 < (1 << 16)
a*b = a1*b1 + (a1*b2 << 16) + (a2*b1 << 16) + (a2*b2 << 32) 
```

计算`a*b (mod m)`，`m <= (1 << 31)`减少四个产品中的每一个模`m`，

```
p1 = (a1*b1) % m;
p2 = (a1*b2) % m;
p3 = (a2*b1) % m;
p4 = (a2*b2) % m; 
```

合并这些变化的最简单方法是

```
for(i = 0; i < 16; ++i) {
    p2 *= 2;
    if (p2 >= m) p2 -= m;
} 
```

`p3`和 32 次迭代相同`p4`。然后

```
s = p1+p2;
if (s >= m) s -= m;
s += p3;
if (s >= m) s -= m;
s += p4;
if (s >= m) s -= m;
return s; 
```

这种方式不是很快，但是对于这里需要的少数乘法，它已经足够快了。应通过减少班次数来获得小幅加速；首先计算`(p4 << 16) % m`，

```
for(i = 0; i < 16; ++i) {
    p4 *= 2;
    if (p4 >= m) p4 -= m;
} 
```

那么所有的`p2`,`p3`的当前值`p4`需要乘以 2 ^(16)模`m`,

```
p4 += p3;
if (p4 >= m) p4 -= m;
p4 += p2;
if (p4 >= m) p4 -= m;
for(i = 0; i < 16; ++i) {
    p4 *= 2;
    if (p4 >= m) p4 -= m;
}
s = p4+p1;
if (s >= m) s -= m;
return s; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-12T10:02:52.997

如果您使用动态编程存储结果并且在填充查找表时，您可以在每个步骤中使用 MODULO 除法。它将处理 1000 个加泰罗尼亚人的溢出问题，并且比 BigDecimal/BigInteger 更快。

## 我的解决方案：

```
public class Catalan {

private static long [] catalan= new long[1001];
private static final int MOD=1000000007;

public static void main(String[] args) {

    precalc();
    for (int i=1;i<=1000;i++){
        System.out.println("Catalan number for "+i+" is: "+catalan[i]);
    }
}

private static void precalc(){

    for (int i=0;i<=1000;i++){
        if (i==0 || i==1){
            catalan[i]=1;
        }
        else{
            long sum =0;long left, right;
            for (int k=1;k<=i;k++){
                left = catalan[k-1] % MOD;
                right= catalan[i-k] % MOD;
                sum =(sum+ (left * right)%MOD)%MOD;
            }
            catalan[i]=sum;
        }
    }

}

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-06T10:27:04.023

使用大整数库怎么样？尝试谷歌搜索它...

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-06T18:39:45.513

```
#include <stdio.h>
#include <stdlib.h>

/*
C(n) = (2n)!/(n+1)!n!
     = (2n)(2n-1)(2n-2)..(n+2)/n!
*/
int p = 1000000007;

int gcd(int x, int y){
    while(y!=0){
        int wk = x % y;
        x = y;
        y = wk;
    }
    return x;
}

int catalanMod(n){
    long long c = 1LL;
    int i;
    int *list,*wk;
    //make array [(2n),(2n-1),(2n-2)..(n+2)]
    wk = list = (int*)malloc(sizeof(int)*(n-1));
    for(i=n+2;i<=2*n;++i){
        *wk++ = i;
    }
    wk=list;
    //[(2n),(2n-1),(2n-2)..(n+2)] / [1,2,3,..n]
    //E.g C(10)=[13,17,19,4]
    for(i=2;i<=n;++i){
        int j,k,w;
        for(w=i,j=0;j<n-1;++j){
            while(1!=(k = gcd(wk[j], w))){
                wk[j] /= k;
                w /= k;
            }
            if(w == 1) break;
        }
    }
    wk=list;
    //Multiplication and modulo reduce 
    for(i=0;i<n-1;++i){
        if(wk[i]==1)continue;
        c = c * wk[i] % p;
    }
    free(list);
    return c;
} 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2017-10-27T13:10:44.843

简单地说，使用属性，(a * b) % mod = (a % mod) * (b % mod)

# javascript - jQuery function show divs with display: none

> ID：10042206
> 
> 赞同：0
> 
> 时间：2012-04-06T10:24:00.470
> 
> 标签：javascript, jquery, html, css, pagination

I have some jQuery code, which attempts to show the first 6 divs on page load and hide all of the others. It is littered with errors, but ideally I am trying to create a function that shows the next six divs on an event, ultimately when the user scrolls to the bottom. I know my code is not great, but I have done my best to make it as easy to follow as possible.

The code is [here](http://jsfiddle.net/jackdent/gRzPF/4/), and any help would be much appreciated! Thanks in advance

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T10:31:45.927

replace

```
for (i = contentNumber, i < constraintNumber, i++;) { 
```

by

```
for (i = contentNumber; i < constraintNumber; i++) { 
```

in javascript (and C), `;` must separate the 3 elements of a `for` statement

in jsfiddle, you have 'JSLint' button to verify code error !! Use it !

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-06T10:42:35.403

Here [http://jsfiddle.net/gRzPF/7/](http://jsfiddle.net/gRzPF/7/) I modified your code, now it seems to work :)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-06T10:46:46.777

I think this is what you wanted:

[http://jsfiddle.net/gRzPF/8/](http://jsfiddle.net/gRzPF/8/)

If I understand correctly every time you get to the bottom of the window you want to show the next 6 divs. My edit achieves that.

You just needed to use semi-colons in your `for` statement, wrap a function around it and move your `constraintNumber` variable inside that function.

# android - Android标签栏，哪个活动项目与相邻项目重叠（见图）

> ID：10042213
> 
> 赞同：1
> 
> 时间：2012-04-06T10:24:15.117
> 
> 标签：android, tabbar, overlapping

我需要制作以下设计的标签栏： ![在此处输入图像描述](../Images/1f6f93ca64690b937b7f210a6da4d7ce.png)

其活动项目与相邻项目重叠。我的问题是我不知道如何使不同的选项卡相互重叠（据我所知，不可能以编程方式更改视图的 z 顺序）。怎么做？

PS 顺便说一句，我没有必要特别使用 tabbar。例如，可以是水平线性布局中的 3 个按钮或允许制作标签栏功能的任何其他视图组合。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T17:03:10.217

我通过创建 3 个带圆角的按钮、带圆角的大容器（仅顶部显示在我的图像上）和上述视图的线性布局来制作这个，它填充了任何 2 个相邻按钮的底部角度之间的空间。

这种线性布局由 4 个部分组成，它们在按钮的 onclicklistener 中动态更改其背景颜色以适合一个（3 个按钮相同）。

阴影是通过按钮的背景可绘制对象（具有 3 个形状项目的图层列表 - 背景形状、填充阴影形状和再次填充背景形状）中的黑色渐变（具有不同的 alpha）实现的。

# c# - 对 CollectionViewSource 感到困惑（SelectedItem 不能组合使用）

> ID：10042217
> 
> 赞同：6
> 
> 时间：2012-04-06T10:24:29.063
> 
> 标签：c#, wpf, combobox, selecteditem, collectionviewsource

我有一堆组合，它们都有相同的可用选择。这些选择在我的 ViewModel 公开的集合中提供。一切都很好，花花公子。

我现在想要对这些选择进行排序，所以我决定`ICollectionView`从我的 ViewModel 中公开一个而不是我通常的`ReadonlyObservableCollection<T>`，并在我的 ViewModel 中对集合视图进行排序。

```
class EditStuffViewModel : ViewModelBase
{
    public EditStuffViewModel (ObservableCollection<Choice> choices)
    {
        Choices = new CollectionViewSource() { Source = choices }.View;
        Choices.SortDescriptions.Add(new SortDescription("Name", ListSortDirection.Ascending));
    }

    public ICollectionView Choices
    {
        get;
        private set;
    }

    //snip other properties
} 
```

这一切都很好，除了现在**我所有的组合现在同步他们的选择**。

这不是我想要的。我希望共享选择，但选择要与其正常绑定。我想我知道我的 CollectionView 正在跟踪选择，但我认为这是每个控件都选择加入的行为。

我已经尝试`IsSynchronizedWithCurrentItem="False"`在我的组合上显式设置，它成功地将它们解耦，但是我的绑定`SelectedItem`从未在组合中选择（调用 ViewModel 的绑定 getter，但从未选择结果）。选择一个项目似乎可以正确更新我的 ViewModel 的设置器。

我显然错过了 CollectionView 应该如何工作的一些基本知识。任何人都可以启发我吗？

**编辑**：我的错，这**确实**适用于`IsSynchronizedWithCurrentItem="False"`. 有关详细信息，请参阅我的答案。

干杯。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-06T12:16:30.063

很抱歉浪费了大家的时间，但设置`IsSynchronizedWithCurrentItem="False"`确实有效。我还添加了一个过滤器以及排序，默认选择的值不在过滤的项目列表中。哎呀。

至于为什么我需要明确关闭 IsSynchronizedWithCurrentItem 当我通常不会在标准集合上这样做时，[MSDN上的亮点](http://msdn.microsoft.com/query/dev10.query?appId=Dev10IDEF1&l=EN-US&k=k%28SYSTEM.WINDOWS.CONTROLS.PRIMITIVES.SELECTOR.ISSYNCHRONIZEDWITHCURRENTITEM%29;k%28VS.XAMLEDITOR%29;k%28TargetFrameworkMoniker-%22.NETFRAMEWORK,VERSION=V4.0%22%29&rd=true)

> **如果 SelectedItem 始终与 ItemCollection 中的当前项同步，则为**true ；**如果 SelectedItem 从未与当前项目同步，则为**false ；****仅当 Selector 使用 CollectionView 时，如果 SelectedItem 与当前项同步，则什么都没有。默认值为无。****

 **因此，换句话说，如果您`CollectionView`在普通集合上显式使用而不是使用默认视图，您将获得选择同步。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-06T10:30:38.143

我有一段时间没有接触 WPF，但我认为您需要`CollectionViewSource`为每个组合框使用不同的实例来维护所选项目。

我认为这是因为该`SelectedItem`属性被绑定到`CollectionViewSource`对象的选定项状态属性（我猜该`View`对象具有它）并且 ComboBoxes 都共享相同的源实例，因此它们的选定项现在已同步。

`CollectionViewSource`因此，只需为每个组合框使用不同的实例。您仍然可以共享相同的来源选择。您只需要不同的虚拟机，因为您的组合框应该彼此分开运行。

* * *

像这样的东西（未经测试）：

```
class EditStuffViewModel : ViewModelBase
{
    public EditStuffViewModel (ObservableCollection<Choice> choices)
    {
        ChoiceViews = new List<ICollectionView>();

        for (var i = 0; i < 10; i++) {
            var viewSource = new CollectionViewSource() { Source = choices };
            viewSource.SortDescriptions.Add(new SortDescription("Name", ListSortDirection.Ascending));

            ChoiceViews.Add(viewSource.View);
        }
    }

    public IList<ICollectionView> ChoiceViews
    {
        get; private set;
    }

    //snip other properties
} 
```

然后将您的 ComboBoxes 绑定更改为绑定到的元素`ChoiceViews`。**

# android - json 字符串转 int

> ID：10042220
> 
> 赞同：0
> 
> 时间：2012-04-06T10:24:45.677
> 
> 标签：android, json, parsing

我想知道如何获得 Json 值？（从下面的 JSOn 我想获得产品的“价格”，以便我可以加起来。非常感谢。

```
{ "StatusCode": 0
, "StatusInfo": "Processed and Logged OK"
, "PageNumber": 0
, "TotalPageCount": 1
, "TotalProductCount": 1
, "PageProductCount": 1
, "Products": [
  { "BaseProductId": "54158094"
  , "EANBarcode": "3068320055008"
  , "CheaperAlternativeProductId": ""
  , "HealthierAlternativeProductId": ""
  , "ImagePath": "http://img.tesco.com/Groceries/pi/008/3068320055008/IDShot_90x90.jpg"
  , "MaximumPurchaseQuantity": 99
  , "Name": "UNAVAILABLE: Evian Natural Mineral Water 500 Ml"
  , "OfferPromotion": ""
  , "OfferValidity": ""
  , "OfferLabelImagePath": ""
  , "Price": 0.51
  , "PriceDescription": "(Unavailable)"
  , "ProductId": "258247301"
  , "ProductType": "QuantityOnlyProduct"
  , "UnitPrice": 0.004
  , "UnitType": "100ml" } ] } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-06T10:41:09.183

您可以使用[`JSONObject.getDouble()`](http://developer.android.com/reference/org/json/JSONObject.html#getDouble%28java.lang.String%29)方法或[`JSONObject.getInt()`](http://developer.android.com/reference/org/json/JSONObject.html#getInt%28java.lang.String%29)方法。

```
JSONObject obj = new JSONObject("{ \"StatusCode\": 0, \"StatusInfo\": \"Pr...");

JSONArray products = obj.getJSONArray("Products");
JSONObject prod = products.getJSONObject(0);

double price = prod.getDouble("Price"); 
```

总结价格，只需遍历`JSONArray`实例。

```
double sum = 0.0;
for(int i = 0; i < products.length(); i++) {
    sum += products.getJSONObject(i).getDouble("Price");
} 
```

……

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-06T10:43:42.207

`Price`标签值不是`int`它的两倍，所以`double`如果你愿意，请使用 ,,`int`

然后`getInt`从 jsonobject 但它返回`0`.due`0.5` 值...

```
 try {
                    String str="{ \"StatusCode\": 0....";
            JSONObject objJsonObject = new JSONObject(str);
            JSONArray array = objJsonObject.getJSONArray("Products");

               Double d =array.getJSONObject(0).getDouble("Price");
               System.out.print(d);
            }

        } catch (JSONException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } 
```

# android - 多个应用程序使用一项服务

> ID：10042221
> 
> 赞同：1
> 
> 时间：2012-04-06T10:24:46.790
> 
> 标签：android, service

我有两个应用程序 - A 应用程序和 B 应用程序（或更多），当用户添加新应用程序时，我希望我的所有应用程序都将应用程序上传到用户的手机中。

我所有的应用程序都有一个名为 MyService 的服务。在MyService中有一个Intent.ACTION_PACKAGE_ADDED的BroadcastReceiver，当A app先安装在用户手机中，再安装B app。只有应用程序中的 MyService 会在安装应用程序时运行并接收 Intent.ACTION_PACKAGE_ADDED，就像 AccountAuthenticator 服务一样。

我的问题是，当 A 应用程序被删除时，如何在 B 应用程序中启动 MyService？（如果 A 应用程序被删除，我无法听，因为将来我可能会有 C 应用程序）。

对不起我的英语不好...

# xml - 使用 xslt 将节点重命名为与其索引连接的节点名称

> ID：10042222
> 
> 赞同：1
> 
> 时间：2012-04-06T10:24:56.863
> 
> 标签：xml, xslt, xls

我使用下面的 xslt 来转换 xmls，它遍历 Receipt/Process 节点并向节点添加类型属性。根据节点的值，它将是 string/int/float。那部分工作正常。

我还应该将“节点”节点重命名为与其索引连接的“节点”，并添加一个属性，该属性应该是“名称”节点的值。

我可能有多个“节点”，我想将其转换为如下内容：

“Cuda3DLut”来自的第一个节点`<Name>Cuda3DLut</Name>`

```
<Node1 type="Cuda3DLut" >
<Input  type="ToolLink" role="Input" format="red,green,blue">Source</Input>
<Lut type="string">Identity</Lut>
<Output type="ToolLink" role="Output" format="red,green,blue">RESULT1</Output>
<bypass type="int">0</bypass>
<nodeRole type="string">viewing</nodeRole>
<nodeShortName type="string">LUT</nodeShortName>
</Node1> 
```

第二个节点

```
<Node2 type="CudaTool" >
...
</Node2> 
```

如果它是“MainMedia”到“Source”，我也想将“Input”节点的值更改为“Source”，但只有这样。

非常感谢。

```
Source XML:

<Receipt>

  <Process>
    <Node>
      <Name>Cuda3DLut</Name>
      <Input>MainMedia</Input>
      <Lut>Identity</Lut>
      <Output>RESULT1</Output>
      <bypass>0</bypass>
      <nodeRole>viewing</nodeRole>
      <nodeShortName>LUT</nodeShortName>
    </Node>
   <Node>
      <Name>CudaTool</Name>
      <Input>MainMedia</Input>
      <Lut>Identity</Lut>
      <Output>RESULT1</Output>
      <bypass>0</bypass>
      <nodeRole>viewing</nodeRole>
      <nodeShortName>LUT</nodeShortName>
    </Node>
  </Process>

  <Encode>
    <Job>
     ...
    </Job>
  </Encode>

</Receipt>

xslt: 

<?xml version="1.0"?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">

  <xsl:output method="xml" version="1.0" encoding="UTF-8" indent="yes"/>

  <xsl:template match="/">
      <cut>
        <xsl:apply-templates/>        
    </cut>
 </xsl:template>

  <xsl:template match="Process">

      <xsl:for-each select="Node/*">

        <xsl:choose>

            <xsl:when test="name() = 'Input'">

              <xsl:copy>
                <xsl:attribute name="type">ToolLink</xsl:attribute>
                <xsl:attribute name="role">Input</xsl:attribute>
                <xsl:attribute name="format">red,green,blue</xsl:attribute>
                <xsl:apply-templates select="@*|node()" />
              </xsl:copy>              

            </xsl:when>

            <xsl:when test="name() = 'Output'">
              <xsl:copy>
                <xsl:attribute name="type">ToolLink</xsl:attribute>
                <xsl:attribute name="role">Output</xsl:attribute>
                <xsl:attribute name="format">red,green,blue</xsl:attribute>
                <xsl:apply-templates select="@*|node()" />
              </xsl:copy>              

            </xsl:when>

          <xsl:otherwise>

            <!-- Add type attribute to the node based on its value -->
            <xsl:choose>
            <xsl:when test="number(.) = .">
              <xsl:choose>
                <xsl:when test="contains(., '.')">
                <xsl:copy>
                  <xsl:attribute name="type">float</xsl:attribute>
                  <xsl:apply-templates select="@*|node()" />
                </xsl:copy>
              </xsl:when>
              <xsl:otherwise>
                <xsl:copy>
                  <xsl:attribute name="type">int</xsl:attribute>
                  <xsl:apply-templates select="@*|node()" />
                </xsl:copy>
              </xsl:otherwise>
             </xsl:choose>                                      
            </xsl:when>
            <xsl:otherwise>
              <xsl:copy>
                <xsl:attribute name="type">string</xsl:attribute>
                <xsl:apply-templates select="@*|node()" />
              </xsl:copy>            
            </xsl:otherwise>            
          </xsl:choose>

        </xsl:otherwise>            
        </xsl:choose>

      </xsl:for-each>

  </xsl:template>

  <xsl:template match="Encode">    
  </xsl:template>

</xsl:stylesheet> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T13:26:45.560

**这种转变**：

```
<xsl:stylesheet version="1.0"
 xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>
 <xsl:strip-space elements="*"/>

 <xsl:template match="Node">
     <xsl:element name="Node{position()}">
       <xsl:attribute name="type">
         <xsl:value-of select="Name"/>
       </xsl:attribute>
       <xsl:apply-templates select="*[not(self::Name)]"/>
     </xsl:element>
 </xsl:template>

 <xsl:template match="Node/*" priority="-1">
  <xsl:copy>
    <xsl:attribute name="type">string</xsl:attribute>
    <xsl:value-of select="."/>
  </xsl:copy>
 </xsl:template>

 <xsl:template match="Node/Input">
   <Input  type="ToolLink" role="Input" format="red,green,blue">Source</Input>
 </xsl:template>

 <xsl:template match="Output">
   <Output  type="ToolLink" role="Output" format="red,green,blue">
     <xsl:value-of select="."/>
   </Output>
 </xsl:template>

 <xsl:template match="bypass">
  <bypass type="int"><xsl:value-of select="."/></bypass>
 </xsl:template>
</xsl:stylesheet> 
```

**应用于提供的 XML 文档时**：

```
<Receipt>
    <Process>
        <Node>
            <Name>Cuda3DLut</Name>
            <Input>MainMedia</Input>
            <Lut>Identity</Lut>
            <Output>RESULT1</Output>
            <bypass>0</bypass>
            <nodeRole>viewing</nodeRole>
            <nodeShortName>LUT</nodeShortName>
        </Node>
        <Node>
            <Name>CudaTool</Name>
            <Input>MainMedia</Input>
            <Lut>Identity</Lut>
            <Output>RESULT1</Output>
            <bypass>0</bypass>
            <nodeRole>viewing</nodeRole>
            <nodeShortName>LUT</nodeShortName>
        </Node>
    </Process>
    <Encode>
        <Job>      ...     </Job>
    </Encode>
</Receipt> 
```

**产生想要的正确结果：**

```
<Node1 type="Cuda3DLut">
   <Input type="ToolLink" role="Input" format="red,green,blue">Source</Input>
   <Lut type="string">Identity</Lut>
   <Output type="ToolLink" role="Output" format="red,green,blue">RESULT1</Output>
   <bypass type="int">0</bypass>
   <nodeRole type="string">viewing</nodeRole>
   <nodeShortName type="string">LUT</nodeShortName>
</Node1>
<Node2 type="CudaTool">
   <Input type="ToolLink" role="Input" format="red,green,blue">Source</Input>
   <Lut type="string">Identity</Lut>
   <Output type="ToolLink" role="Output" format="red,green,blue">RESULT1</Output>
   <bypass type="int">0</bypass>
   <nodeRole type="string">viewing</nodeRole>
   <nodeShortName type="string">LUT</nodeShortName>
</Node2> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-06T11:06:03.800

我认为您可以使用`<xsl:element/>`和`position()`功能生成您的节点。

```
<xsl:template match="Receipt/Process/Node">
    <xsl:variable name="nodename">
        <xsl:text>Node</xsl:text>
        <xsl:value-of select="position()"/>
    </xsl:variable>
    <xsl:element name="{$nodename}">
        ...
    </xsl:element>
</xsl:template> 
```

# wcf - 将新对象添加到实体模型时处理导航属性

> ID：10042223
> 
> 赞同：2
> 
> 时间：2012-04-06T10:24:57.377
> 
> 标签：wcf, entity-framework, ado.net-entity-data-model

我有以下数据模型：

![在此处输入图像描述](../Images/9e9d6dd5f5bb53318b2413e8a9c894f9.png)

我正在编写一个需要支持添加新报告的 WCF 服务：

```
 public bool CreateNewReport(Report report)
    {
        MyEntities context = new MyEntities();
        context.AddToReports(Report);
        context.SaveChanges();
    } 
```

因此，我的方法获取在客户端上生成的报表对象，并通过数据上下文将其添加到数据库中。（所有成员都包含在 DataContract 中）

我的问题是关于导航属性。

1.  客户端是否还需要创建一个用户对象并在发送之前将其放入新的报表对象中？
2.  解决这个问题的最佳方法是什么？我想到的一种方法是`UserId`在`ReportEntity`
3.  插入新报告时，如何使用新报告更新 UserEntity Report nav 属性？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T10:54:50.000

如果您导入数据库，生成导航属性（图片中的属性）和外部 id 属性（例如，您的报表类中有 User 和 UserID 属性）。这样，您可以在客户端中设置 UserID 并将其发送到服务器并添加`AddToReports`...如果您发送整个用户对象，则必须将其附加到实体上下文，否则将再次创建用户...

附上引用的用户：（但最好只通过id发送用户）

```
public bool CreateNewReport(Report report)
{
    using (MyEntities context = new MyEntities())
    {
         context.AddToReports(Report);
         context.Users.Attach(report.User);
         context.SaveChanges();
    }
} 
```

要更改用户的报告：

```
public bool ChangeUserToNewReport(int userid, Report newReport)
{
    using (MyEntities context = new MyEntities())
    {
         var user = context.Users.Single(u => u.ID = userid);
         user.Report = newReport;
         context.SaveChanges();
    }
} 
```

对于现有报告：

```
public bool ChangeUserReport(int userid, Report existingReport)
{
    using (MyEntities context = new MyEntities())
    {
         context.Reports.Attach(existingReport);
         var user = context.Users.Single(u => u.ID = userid);
         user.Report = existingReport;
         context.SaveChanges();
    }
} 
```

这是您的模型应该是什么样子的示例。双击关联线打开对话框。可以看到`Person`和`PersonID`属性是一样的。如果您像这样创建模型，VS 应该会生成正确的 SQL。 ![在此处输入图像描述](../Images/0de68eafca098cb734b59c9ecb9ffa55.png)

# iphone - 如何在视频播放器中播放 NSData

> ID：10042225
> 
> 赞同：2
> 
> 时间：2012-04-06T10:25:07.223
> 
> 标签：iphone

我写了一个异步调用来下载 mp4 格式的视频。响应结果是一个 NSData。如何在 IOS 3 应支持的任何视频播放器框架中打开 NSData。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-06T12:59:00.320

NSData 基本上是一个容器对象，因此不是您可以在视频播放器中播放的格式。在没有看到任何代码或数据结果的情况下，您可以从数据创建一个 NSString

```
NSString *dataString = [[NSString alloc] initWithData:data encoding:NSUTF8StringEncoding]; 
```

现在你有了一个字符串，你可以创建一个 NSURL

```
NSURL *movieURL = [NSURL URLWithString:dataString]; 
```

从那里，您应该能够将其传递给 MPMoviePlayerController

```
MPMoviePlayerController *moviePlayer = [[MPMoviePlayerController alloc] initWithContentURL:movieURL]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-01-20T06:56:47.300

不能直接将 NSData 播放到 AVPlayer 中。您可以做的是将数据下载到 Document 文件夹中，然后获取文件路径并将该路径提供给 AVPlayer。

# css - Safari中标题标签的CSS文本定位不同

> ID：10042238
> 
> 赞同：0
> 
> 时间：2012-04-06T10:26:19.437
> 
> 标签：css

![文字高度](../Images/bf67a6b9d6954fef411d73a126cc5434.png)

请看附图

此 CSS 不会以 Safari 和 Firefox 以及 IE 中相同的方式生成要排列的文本。Safari（右侧）显示高约 2 像素。

```
h2{
font-size:18px;
color:#000;
display:inline-block;
font-family:Arial, Helvetica, sans-serif;
background-image:url(bkg.gif);
background-repeat:no-repeat;
padding-left:14px;
padding-top:4px;
height:28px;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T14:35:56.780

这就是浏览器呈现文本的方式。如果您对此很在意，请提供专门用于 Safari 的样式表并进行适当的调整。

# android - 持续运行服务与定期在 Android 中启动服务

> ID：10042240
> 
> 赞同：0
> 
> 时间：2012-04-06T10:26:43.320
> 
> 标签：android, android-service

我希望在特定时间间隔（可能大约 2-5 分钟）后从服务中进行数据轮询（通知）。所以我写了一个从服务器获取数据的服务。那么从以下选项的性能角度来看，最好的方法是什么。

1.  每次使用警报管理器进行轮询时启动服务
2.  或使用警报管理器在启动完成时启动服务，并在服务中保留另一个警报管理器，该服务在每个特定时间间隔执行任务。

谢谢大家。。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T11:03:59.853

我认为第一个选项更好。使用警报管理器启动 IntentService。IntentService 将接收 Intent，启动工作线程，并酌情停止服务。

请参阅：http: [//developer.android.com/reference/android/app/IntentService.html](http://developer.android.com/reference/android/app/IntentService.html)

# php - 使用 PHP 从 Mongodb 下载大文件

> ID：10042245
> 
> 赞同：1
> 
> 时间：2012-04-06T10:27:02.573
> 
> 标签：php, mongodb, gridfs

我使用 php 在 Mongodb 中存储了超过 250MB 的压缩文件。但我无法取回它。它只显示“0”数字。下面是我的代码。

```
$id = $_GET['id'];
require 'dbconnection.php';

$mongo = DBConnection::instantiate();
$gridFS = $mongo->database->getGridFS();

$object = $gridFS->findOne(array('_id' => new MongoId($id)));
header("Content-Transfer-Encoding: binary");
header('Content-type: '.$object->file['filetype']);
header('Expires: 0');

header("Content-disposition: attachment; filename=".$object->file['filename']);
//header('Content-name: '.$object->file['filename']);
  header('Content-Type:application-x/force-download'); 
echo $object->getBytes(); 
```

核实。这适用于小于 100MB 的文件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-06T10:58:23.053

阅读文档，[http ://php.net/manual/en/mongogridfsfile.getbytes.php](http://php.net/manual/en/mongogridfsfile.getbytes.php)

> 警告：这会将文件加载到内存中。如果文件大于您的内存，这将导致问题！

所以你需要将大文件存储在块中，然后循环并回显这些块，我搜索了谷歌并找到了这个（3.展示了如何基于块访问文件）：

[http://blog.hardkap.com/index.php/posts/00069/MongoDB---GridFS](http://blog.hardkap.com/index.php/posts/00069/MongoDB---GridFS)

# facebook - 使用服务器端流自动刷新过期的访问令牌

> ID：10042249
> 
> 赞同：1
> 
> 时间：2012-04-06T10:27:21.083
> 
> 标签：facebook, facebook-graph-api, facebook-oauth

好吧，这个话题似乎有点混乱，我正在努力得到一个明确的答案，所以这是我的问题......

我正在使用服务器端流程来获取我的 Web 应用程序的访问令牌，我之前使用了 offline_access，现在正在折旧，因此我需要一种在以下情况下刷新令牌的方法：

1) 用户更改 FB 密码 2) 令牌自然过期

我的应用程序将结果发布到用户 FB 墙，因此我们的服务器需要自动完成刷新（没有 cookie 或 OAuth 对话框）

我想我可以尝试使用这里描述的新端点

[http://developers.facebook.com/roadmap/offline-access-removal/](http://developers.facebook.com/roadmap/offline-access-removal/)

，使用以下代码（Java）：

```
public static String refreshFBAccessToken(String existingAccessToken)
        throws Exception{
    //Currently not working
    String refreshUrl = "https://graph.facebook.com/oauth/access_token?
        client_id="+FacebookApp.appId+"
        &client_secret="+FacebookApp.appSecret+"
        &grant_type=fb_exchange_token
        &fb_exchange_token="+existingAccessToken;
    URL url = new URL(refreshUrl);
    URI uri = new URI(url.getProtocol(), url.getHost(), url.getPath(),
            url.getQuery(), null);
    String result = readURL(uri.toURL());
    String[] resultSplited = result.split("&");
    return resultSplited[0].split("=")[1];
} 
```

但这似乎不起作用（我得到一个响应 400），当我重新阅读文档时，似乎这个端点仅用于使用客户端流获得的令牌......

那么服务器端流程呢......？

有人可以告诉我上述方法是否正确还是有其他方法？

非常感谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-11T12:26:48.177

据我了解，刷新令牌没有服务器端流程。

刷新令牌调用需要包含用户身份验证过程的响应，这是一个短暂的令牌。

您需要将刷新令牌过程作为用户登录流程的一部分包含在内，或者如果这对您的设置不起作用，您需要向用户发送电子邮件，要求他们回来！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-06T20:40:26.290

我不懂java，但语法很像C#，所以我可以说，你做的一切都是对的。

但我怀疑这个功能`readURL`是做什么的？

如果它像`get_file_contents()`php 一样工作（即，如果它执行 HTTP 获取），我想那不是正确的做法。

根据我对谷歌刷新令牌方法的经验，我认为你应该对给定的 url 执行 HTTP POST 而不是 HTTP GET。

# objective-c - 在Objective c中就地调用函数

> ID：10042251
> 
> 赞同：1
> 
> 时间：2012-04-06T10:27:30.030
> 
> 标签：objective-c, cocoa

我想就地定义一个选择器。我该怎么做？

即我想做这样的事情：

```
 [self performSelector:@selector( function() {variable = 3;} ) withObject:self afterDelay:3]; 
```

其中`variable`是调用该函数的类的 int。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-06T10:44:08.887

考虑使用[块](http://developer.apple.com/library/ios/#documentation/cocoa/Conceptual/Blocks/Articles/bxGettingStarted.html#//apple_ref/doc/uid/TP40007502-CH7-SW1)：

```
int multiplier = 7; 
int (^myBlock)(int) = ^(int num) 
{
    return num * multiplier;
};

printf("%d", myBlock(3));
// prints "21" 
```

Apple 为许多操作提供了基于块的 API，在这些操作中，@selector 回调是过去唯一的选择。请注意，块仅在 iOS 4.0 和更高版本中可用（尽管存在[一些解决方案](https://stackoverflow.com/questions/2529973/are-blocks-supported-in-iphone-os-3-1-3)允许在旧 iOS 版本中使用基于块的代码）。

编辑：添加了在给定时间后调用块的更“真实”示例：

```
dispatch_time_t  delay = dispatch_time(DISPATCH_TIME_NOW, 3 * NSEC_PER_SEC);
dispatch_queue_t queue = dispatch_get_main_queue();
dispatch_after(delay, queue, ^{variable = 3}); 
```

请注意，此示例使用了仅适用于 iOS 4.0 和更高版本的[大型中央调度。](https://developer.apple.com/library/mac/#documentation/Performance/Reference/GCD_libdispatch_Ref/Reference/reference.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-06T11:25:45.743

对于这种不平凡的任务与 GCD 相关的额外工作，您不妨创建一个单独的方法：

```
- (void) setVariable:(NSNumber *) value
{
    variable = [value intValue];
}

- (void) someOtherMethod
{
    [self performSelector:@selector(setVariable:) withObject:[NSNumber numberWithInt:3] afterDelay:3.0];
} 
```

您*可以*使用块或 GCD，但这为您提供了一个解决方案*以及*向后兼容性。唯一的缺点是它`performSelector:withObject:afterDelay:`没有最好的分辨率（例如它可能在 3.2 秒后执行，等等）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-06T11:44:04.807

**尝试这个 ：**

```
[[NSOperationQueue mainQueue] addOperationWithBlock:^{
    // Insert code here
}]; 
```

# c# - c# asp.net 当我单击gridview中的按钮时，如何更改按钮的图像url（它的类型是图像）

> ID：10042252
> 
> 赞同：0
> 
> 时间：2012-04-06T10:27:30.980
> 
> 标签：c#, asp.net, gridview

我创建了一个 gridview 它有最喜欢的按钮，当我点击它时我想更改它的 url。我该怎么做？

```
 <asp:GridView ID="GridView1" runat="server" AutoGenerateColumns="False" 
            DataSourceID="SqlDataSource1" Width="446px" AllowPaging="True" 
            onrowcommand="GridView1_RowCommand1" 
            onselectedindexchanged="GridView1_SelectedIndexChanged">
                <Columns>
                    <asp:ImageField AlternateText="Add To Favorites" Visible=false 
                        DataImageUrlFormatString="&quot;~/images/favorites.png&quot;" 
                        FooterText="Add To Favorites" HeaderText="Add To Favorites">
                        <FooterStyle Width="10px" />
                    </asp:ImageField>
                    <asp:ButtonField CommandName="AddComment" ButtonType="Image" HeaderText="Comment" ImageUrl="~/images/commentt.png" Text="Comment" ItemStyle-HorizontalAlign="Center" >
                     <ItemStyle HorizontalAlign="Center"></ItemStyle>
                    </asp:ButtonField>
                    <asp:ButtonField CommandName="Share"  ButtonType="Image" HeaderText="Share with Friends" ImageUrl="~/images/openshare.png" ItemStyle-HorizontalAlign="Center" Text="Share" >
                    <ItemStyle HorizontalAlign="Center"></ItemStyle>
                    </asp:ButtonField>
                     <asp:ButtonField CommandName="ShareGroups"  ButtonType="Image" HeaderText="Share with Groups"   ImageUrl="~/images/openshare.png" ItemStyle-HorizontalAlign="Center" Text="Share" >
                    <ItemStyle HorizontalAlign="Center"></ItemStyle>
                    </asp:ButtonField>
                  <asp:ButtonField ButtonType="Image" HeaderText="Favorites" 
                        ImageUrl="~/images/StarEmpty.png" CommandName="Favorite" 
                        Text="Add to Favorites" ItemStyle-HorizontalAlign="Center">
                    <FooterStyle Height="20px" />
                    <HeaderStyle Width="3px" />
                    <ItemStyle HorizontalAlign="Center"></ItemStyle>
                    </asp:ButtonField>
                    <asp:ButtonField  ButtonType="Image"  CommandName="Mail" HeaderText="Send Mail" 
                        ImageUrl="~/images/email-icon.png.jpg" Text="Send Mail" 
                        ItemStyle-HorizontalAlign="Center" InsertVisible="False" >

                            <ItemStyle HorizontalAlign="Center"></ItemStyle>

                    </asp:ButtonField>
                    <asp:ButtonField CommandName="View" Text="View Rss" 
                        HeaderText="View Rss" ItemStyle-HorizontalAlign="Center" >
                    <HeaderStyle Width="50px" />
                    <ItemStyle Width="15px" />

                    </asp:ButtonField>
                     <asp:BoundField DataField="RSS_Title" HeaderText="RSS_Title"
                        SortExpression="RSS_Title" />
                   <asp:TemplateField>
            <ItemTemplate>
                <asp:HiddenField ID="HiddenField1" runat="server" 
                    Value='<%#Eval("RSS_ID")%>'/>

            </ItemTemplate>

            </asp:TemplateField>
                </Columns>
            </asp:GridView> 
```

我的 C# 代码如下

```
 if (e.CommandName == "Favorite")
        {
           //GridView1.Rows[rowIndex].Cells[2].

            string sValue = ((HiddenField)GridView1.Rows[rowIndex].FindControl("HiddenField1")).Value;
            int id = Convert.ToInt32(sValue);
            Session["SelectedRSS"] = sValue;

            DBConnection db = new DBConnection();
            bool res = db.CheckFavorites(id, User_Name);

            // if favorite rss  doesnot exist
            if (!res)
            {
                Boolean result = db.addFavorite(id, User_Name);

        DataSet selectedRSS = db.getRSS(id);
        DataTable dt = selectedRSS.Tables[0];
        DataRow row = null;

        for (int i = 0; i < dt.Rows.Count; i++)
        {
            row = dt.Rows[i];
            countOfFavorite = Convert.ToInt32(row[3].ToString());

        }
        countOfFavorite++;

                Boolean result1 = db.increaseFavoriteCount(id, countOfFavorite);

                // rssi favori olarak user dosyasına kaydet;

            }

        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-06T10:51:22.530

首先，为收藏按钮字段分配一个 ID（在我的例子中是**favBtn**），如下所示：

```
asp:ButtonField ID="favBtn" ButtonType="Image" HeaderText="Favorites" 
                    ImageUrl="~/images/StarEmpty.png" CommandName="Favorite" 
                    Text="Add to Favorites" ItemStyle-HorizontalAlign="Center">

if (e.CommandName == "Favorite")
{
    // ...
    // Code Updated here
    int index = Convert.ToInt32(e.CommandArgument);
    GridViewRow row = GridView1.Rows[index];
    ImageButton ib = (ImageButton)row.Controls[0].Controls[0];
    ib.ImageUrl = "~/images/something.png"; // change to your new image

    // ...
} 
```

它应该工作，但不能保证。:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-06T10:34:46.377

您是否尝试`src`在 onclick 事件中设置属性？

```
onclick="this.src = 'http://mysite.com/images/differentimage.jpg'" 
```

在服务器端代码中，您将执行以下操作：

```
myImageButton.ClientClick = "this.src = '" + ResolveUrl("~/images/someotherimage.jpg") + "';"; 
```

在服务器端 HTML 标记中，您可以执行以下操作：

```
<asp:Button OnClientClick="this.src='http://mysite.com/images/someotherimage.jpg" /> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-06T11:09:15.967

修改您喜欢的列如下

```
<asp:ButtonField ButtonType="Image" HeaderText="Favorites" ImageUrl='<%# GetCorrectImg(Convert.ToBoolean(Eval("IsFavirated"))) %>'
            CommandName="Favorite" Text="Add to Favorites" ItemStyle-HorizontalAlign="Center">
            <FooterStyle Height="20px" />
            <HeaderStyle Width="3px" />
            <ItemStyle HorizontalAlign="Center"></ItemStyle>
        </asp:ButtonField> 
```

在此函数 GetCorrectImg(IsFavirated) 中，您可以设置值，通过这些值您可以设置需要设置图像的逻辑。在后面的代码中定义以下函数

```
public string GetActiveInactiveImg(Boolean IsFavirated)
    {
        string retVal = "~/images/buttons/StarEmpty.png";

        if (IsFavirated == true)
        {
            retVal = "~/images/buttons/ChangeImage.gif";
        }
    else 
        {
            retVal = "~/images/buttons/StarEmpty.png";
        }

        return retVal;
    } 
```

触发 ItemCommand 事件后再次绑定网格。

希望这会有所帮助。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2014-11-18T20:26:40.750

you Must to Create new Folder and R.Click in the new Folder add select Exist item , choice the Pictures and make image & Button , double Click into the Button write this Code ( image1.imageurl="example.jpg"; , then run the Web click the button the image will change to the another Picture .

# android - 将顶点添加到 libgdx 网格

> ID：10042255
> 
> 赞同：1
> 
> 时间：2012-04-06T10:27:34.243
> 
> 标签：android, libgdx

标题基本上。

创建网格时，您可以保留比您需要的更多

```
mesh = new Mesh(false, 100, 0, new VertexAttribute(Usage.Position, 3, "a_position")); 
```

但是没有添加顶点的方法。您可以获取 FloatBuffer 并添加到其中，但我得到了奇怪的结果。我还尝试了带有偏移量的 mesh.setVertices ，但这也不起作用。

我用绘图点调试。在我尝试以任何方式添加顶点之前一直有效（即使我调整偏移量以在一个顶点中考虑 3 个浮点数）

复制的代码段：

```
mesh.setVertices(new float[] {
                -0.5f, -0.5f, 0,
                0.5f, -0.5f, 0/*,
                -0.5f,0.5f,0.f*/});//works if I uncoment this
mesh.setVertices(new float[]{-0.5f,0.5f,0.f}, 6, 3);//but comment this out 
```

我也试过

```
squareMesh.setVertices(new float[]{-0.5f,0.5f,0.f}, 2, 3); 
```

谢谢 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-16T16:08:48.930

添加是一个坏主意，因为必须重新创建底层缓冲区，这会占用大量时间。相反，应该批量分配网格并仅渲染当前使用的内容。

例如`mesh.render(GL10.GL_TRIANGLES,0,num_triangles);`

至于更新缓冲区：

```
FloatBuffer fbuftmp = mesh.getVerticesBuffer(); 
BufferUtils.copy(buf,fbuftmp,fbuftmp.capacity(),0); 
```

`buf`浮点数组在哪里。

[出于此处](http://www.badlogicgames.com/wiki/index.php/Direct_Bulk_FloatBuffer.put_is_slow)解释的原因使用 BufferUtils.copy

# java - 返回第一个/主要活动而不重新加载它

> ID：10042257
> 
> 赞同：6
> 
> 时间：2012-04-06T10:27:43.117
> 
> 标签：java, android, android-intent

我正在开发一个安卓应用程序。我需要在不重新加载的情况下调用我的 MainActivity，因为它从 Internet 获取大量数据。

假设，我现在正在进行第三个活动，我想回到 MainActivity。

如果我使用：

```
Intent i = new Intent(Third.this,Main.class);
i.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
startActivity(i); 
```

它会加载 MainActivity 但我不想重新加载它。就像我打电话的第二个活动一样`finish()`，它确实想要我需要。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2014-01-31T15:15:38.707

这是如何做到的：

```
Intent i = new Intent(this, MainActivity.class);
i.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP | Intent.FLAG_ACTIVITY_SINGLE_TOP);
startActivity(i); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-06T11:09:13.973

在你的**AndroidManifest.xml**文件中提及它

```
<activity android:name=".MyActivity"

              android:configChanges="keyboardHidden|orientation"> 
```

在方法内部什么也不做`onResume()`，`onstart()`当回到这个活动时

并尝试`intent.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);`代替`addFlags()`方法

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-06T10:42:09.070

在第三个活动中，当您想进入第一个活动时，将 finish() mwthod 放在那里。

在第二个活动中，在 onCreate() 方法之后，放置 @Override public void onResume(){ super.onResume(); 结束（）; }

我认为这段代码对你有用，试试吧。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-06T10:45:24.780

尝试将此添加到您的清单中：

```
 android:configChanges="keyboard|keyboardHidden|orientation"> 
```

将此行添加到清单中的活动中，如下所示：

```
 <activity android:name=".Main"
              android:label="@string/app_name"
              android:configChanges="keyboard|keyboardHidden|orientation">
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />
            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>

    </activity> 
```

# r - 从整数序列生成表达式文字列表

> ID：10042258
> 
> 赞同：4
> 
> 时间：2012-04-06T10:27:43.677
> 
> 标签：r, plot, expression

我想将整数序列映射到表达式文字序列，以便将后者用作绘图中的刻度线标签，例如

```
lbls <- lapply(-2:2, function(i) expression(i * pi))
plot(...)
axis(1, at=seq(-2,2)*pi, labels=lbls) 
```

到目前为止，我已经尝试了所有我能想到的,等变体`bquote`，但显然我一定错过了一些东西。此外，FAQ 和相关的 SO 问题和答案并没有为我完全解决这个问题。`substitute``expression`

我将如何正确地做到这一点（我想`axis`呈现`pi`为希腊字母并在上面的示例中替换为`-2`... ）？`2``i`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-06T10:33:44.530

尝试这个：

```
lbls <- do.call("expression", lapply(-2:2, function(i) substitute(X * pi, list(X = i))))
plot(-10:10, -10:10, xaxt="n")
axis(1, at=seq(-2,2)*pi, labels=lbls) 
```

![在此处输入图像描述](../Images/270b58993c9eb0a0910ec55500b28e98.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-06T10:48:02.783

尝试这个：

```
lbls <- parse(text = paste(seq(-2, 2), "pi", sep = "*")) 
```

# php - 获取当月和当年到今天的天数

> ID：10042268
> 
> 赞同：1
> 
> 时间：2012-04-06T10:29:07.380
> 
> 标签：php, date

如何获取本月已经过去的天数和本年已经过去的天数，例如，如果今天是 4 月 6 日。我应该得到 6 本月，我应该得到 97今年

有没有办法我可以得到相同的不包括星期天

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-06T10:31:17.747

看一下php[`date()`](http://php.net/manual/en/function.date.php)函数。在您的情况 97 中，它有一个参数`'z'`，即一年中的哪一天：

```
echo date('z'); 
```

与月份中的某天相同：

```
echo date('j'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-06T10:33:22.793

您需要使用[getdate](http://ua.php.net/manual/en/function.getdate.php)功能

```
var_dump( getdate() ); 
```

将输出：

```
array(11) {
  ...
  ["mday"]=>
  int(6)
  ...
  ["yday"]=>
  int(96)
  ...
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-06T10:31:41.407

PHP 对此有很好的文档：

[http://php.net/manual/en/function.date.php](http://php.net/manual/en/function.date.php)

可以用 php 中的当前月份来检索，`date("n")`并且一年中的当前日期是`date("z")`（从零开始）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-06T10:32:11.500

```
 $dayNumber = date("z") + 1; 
```

date("z") 从 0 开始计数

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-11-30T07:17:04.673

```
this will surely help you    
<?php
        $dt = new DateTime;
        if(isset($_GET['year']) && isset($_GET['week'])) {
        $dt->
        setISODate($_GET['year'], $_GET['week']);}
        else {
        $dt->setISODate($dt->format('o'), $dt->format('W'));
        }
        $year = $dt->format('o');
        $week = $dt->format('W');
        ?>
        <a href="<?php echo $_SERVER['PHP_SELF'].'?week='.($week-  1) .   
        '&year='.$year; ?             >">Pre Week</a> 
        <a href="<?php echo $_SERVER['PHP_SELF'].'?week='.  
        ($week+1).'&year='.$year;  
        ?  >">Next Week</a>
        <table>
        <tr>
        <td>Employee</td>
        <?php
        do{
        echo "<td>" . $dt->format('l') . "<br>" . $dt->format('d M Y') . "      
        </td>\n";
        $dt->modify('+1 day');
        }while ($week == $dt->format('W'));
        ?> 
```

# ruby-on-rails-3 - Rails 3 在多个日期范围内查询

> ID：10042270
> 
> 赞同：4
> 
> 时间：2012-04-06T10:29:09.813
> 
> 标签：ruby-on-rails-3, activerecord, active-relation

假设我们有一些日期范围，例如：

```
ranges = [
          [(12.months.ago)..(8.months.ago)],
          [(7.months.ago)..(6.months.ago)],
          [(5.months.ago)..(4.months.ago)],
          [(3.months.ago)..(2.months.ago)],
          [(1.month.ago)..(15.days.ago)]
         ] 
```

和一个`Post`具有`:created_at`属性的模型。

我想查找`created_at`值在此范围内的帖子，因此目标是创建如下查询：

```
SELECT * FROM posts WHERE created_at 
    BETWEEN '2011-04-06' AND '2011-08-06' OR
    BETWEEN '2011-09-06' AND '2011-10-06' OR
    BETWEEN '2011-11-06' AND '2011-12-06' OR
    BETWEEN '2012-01-06' AND '2012-02-06' OR
    BETWEEN '2012-02-06' AND '2012-03-23'; 
```

如果您只有一个这样的范围：

```
range = (12.months.ago)..(8.months.ago) 
```

我们可以做这个查询：

```
Post.where(:created_at => range) 
```

和查询应该是：

```
SELECT * FROM posts WHERE created_at 
    BETWEEN '2011-04-06' AND '2011-08-06'; 
```

有没有办法使用这样的符号进行此查询`Post.where(:created_at => range)`？

构建此查询的*正确方法是什么？*

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-05T16:38:22.740

它对paren有点咄咄逼人，但准备潜入rel兔子洞

```
ranges = [
          ((12.months.ago)..(8.months.ago)),
          ((7.months.ago)..(6.months.ago)),
          ((5.months.ago)..(4.months.ago)),
          ((3.months.ago)..(2.months.ago)),
          ((1.month.ago)..(15.days.ago))
         ]
table = Post.arel_table
query = ranges.inject(table) do |sum, range|
  condition = table[:created_at].in(range)
  sum.class == Arel::Table ? condition : sum.or(condition)
end 
```

然后， query.to_sql 应该等于

```
(((("sessions"."created_at" BETWEEN '2011-06-05 12:23:32.442238' AND '2011-10-05 12:23:32.442575' OR "sessions"."created_at" BETWEEN '2011-11-05 12:23:32.442772' AND '2011-12-05 12:23:32.442926') OR "sessions"."created_at" BETWEEN '2012-01-05 12:23:32.443112' AND '2012-02-05 12:23:32.443266') OR "sessions"."created_at" BETWEEN '2012-03-05 12:23:32.443449' AND '2012-04-05 12:23:32.443598') OR "sessions"."created_at" BETWEEN '2012-05-05 12:23:32.443783' AND '2012-05-21 12:23:32.443938') 
```

你应该可以只做 Post.where(query)

编辑

* * *

您还可以执行以下操作：

```
range_conditions = ranges.map{|r| table[:created_at].in(r)}
query = range_conditions.inject(range_conditions.shift, &:or) 
```

让它更简洁一点

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-06T10:41:51.660

我建议你尝试纯字符串形式：

```
# e.g. querying those in (12.months.ago .. 8.months.ago) or in (7.months.ago .. 6.months.ago)
Post.where("(created_at <= #{12.months.ago} AND created_at >= #{8.months.ago} ) OR " + 
  "(created_at <= #{7.months.ago} AND created_at >= #{6.months.ago} )" ) 
```

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2012-10-14T12:42:23.630

在你的情况下，我建议使用 mysql IN 子句

```
Model.where('created_at IN (?)', ranges) 
```

# ios - 我可以以编程方式更改应用程序图标吗

> ID：10042275
> 
> 赞同：13
> 
> 时间：2012-04-06T10:29:40.327
> 
> 标签：ios, icons

我有两个内置的应用程序图标（免费和高级），是否可以在应用内购买成功完成后以编程方式将免费图标替换为高级图标？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2017-01-25T11:06:23.403

针对这种情况有一个新的解决方案。

您可以使用

```
setAlternateIconName(_:completionHandler:) 
```

iOS 10.3 与 xcode 8.3 一起发布。

[10.3+](https://developer.apple.com/reference/uikit/uiapplication/2806818-setalternateiconname)

更新：

用法很简单，关键是要找出 plist 的用法并注意不能从 xcassets 加载资产（至少对我不起作用）。您需要将您的图标文件添加到项目中，并且更喜欢 180x180 的图像质量。

您需要使用“图标文件（iOS 5）”，新的图标文件不起作用。

最后一件事，当您更改按钮上的图标时，单击它会弹出一个警报窗口，上面写着“您已更改“IcoTest”的图标。

[![在此处输入图像描述](../Images/ae9ebc8691a27160063de84756ce3d3f.png)](https://i.stack.imgur.com/8Ipp9.png)

```
//ViewController.swift
@IBAction func ico1Click(_ sender: Any) {
    if UIApplication.shared.supportsAlternateIcons{
        UIApplication.shared.setAlternateIconName("Icon2", completionHandler: { (error) in
            print(error ?? "")
        })
    }else{
        print("NO NO")
    }
}

//Info.plist
<key>CFBundleIcons</key>
<dict>
    <key>CFBundleAlternateIcons</key>
    <dict>
        <key>Icon1</key>
        <dict>
            <key>CFBundleIconFiles</key>
            <array>
                <string>alternater1_180x180</string>
            </array>
            <key>UIPrerenderedIcon</key>
            <false/>
        </dict>
        <key>Icon2</key>
        <dict>
            <key>CFBundleIconFiles</key>
            <array>
                <string>alternater2_180x180</string>
            </array>
        </dict>
    </dict>
</dict> 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-04-06T10:31:31.920

不，图标是在应用程序包中指定的，您不得更改。如果您更改它，您的应用程序签名将变为无效（不是相同的校验和），因此您的应用程序将不再运行。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-11-19T22:44:42.010

不，绝对不是。应用程序包的那部分是只读的，也是代码签名的。

关于 TapOne 应用程序的答案是完全不同的。它为网站或电话号码创建“网络剪辑”。例如，要为您的网站创建一个 iPhone 图标，您可以在网页标题中添加如下内容：

```
<link rel="apple-touch-icon" href="/your-custom-icon.png"/> 
```

这里有更多信息：[https ://developer.apple.com/library/ios/documentation/AppleApplications/Reference/SafariWebContent/ConfiguringWebApplications/ConfiguringWebApplications.html](https://developer.apple.com/library/ios/documentation/AppleApplications/Reference/SafariWebContent/ConfiguringWebApplications/ConfiguringWebApplications.html)

TapOne 和网络剪辑不会以编程方式更改应用程序包中的图标。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2017-04-06T15:40:39.530

更新：从 iOS 10.3 开始，您可以通过在 info.plist 中定义备用图标来更新应用程序图标。

[在Apple 文档](https://developer.apple.com/reference/uikit/uiapplication/2806818-setalternateiconname)中查看更多信息

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-06T10:35:27.223

这是不可能的。应用程序图标不是动态的，只能通过 iTunes Connect 向您的应用程序提交新更新来更新它们。有关更多信息，请阅读 iTunes Connect 开发人员指南。[https://itunesconnect.apple.com/docs/iTunesConnect_DeveloperGuide.pdf](https://itunesconnect.apple.com/docs/iTunesConnect_DeveloperGuide.pdf)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-06T10:31:49.153

恐怕不是; 可以肯定的是，不允许有条件地更改应用程序图标。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-04-06T10:31:51.700

如果没有越狱的手机，我认为这是不可能的。应用程序图标包含在应用程序包中，您不能对其进行写入。

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2013-06-12T08:08:27.673

我不同意上面的所有答案。请尝试应用程序“OneTap”，它可以让您制作自己的新应用程序图标。OneTap 应用在 Itune 上是免费的。

# installation - Flash Builder 4.6 Mac 安装程序失败

> ID：10042283
> 
> 赞同：0
> 
> 时间：2012-04-06T10:30:54.107
> 
> 标签：installation, flash-builder, flash-builder4.5

我今晚尝试安装 Flash Builder 4.6，但安装程序失败。根据在线说明，我首先卸载了 FB 4.5。现在我无法让 4.6 安装程序或 4.5 安装程序工作。两者都失败并出现无法描述的错误“安装程序遇到导致安装失败的错误。请联系软件制造商寻求帮助。”

Mac OS 10.7.3

有什么建议么？

更新：我有一个带有 SSD 的双启动系统，它在我的 MacBookPro 的内部驱动器上共享一个主文件夹。今晚我将主文件夹移到 SSD 上，这样它现在是一个带有自己主文件夹的普通启动驱动器。现在安装程序运行没有任何错误，并说文件已成功安装，但没有安装任何内容。至少我找不到任何 Flash Builder 的踪迹。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T19:48:37.137

Adobe TS 解决了我的问题。我下载了错误的安装程序。我的安装程序是 Akamai 安装程序。不知道我是怎么弄错安装程序的。TS 让我去之前去过的地方，只是这次下载了正确的安装程序。

请注意，如果您是从 4.​​5 升级。4.5 安装程序不再在线可用。除非您将安装程序放在磁盘上或存档在某个地方，否则您将无法返回。

# forms - 使用 Zend_Form_Element_File 和 HTML5 的 multiple 属性上传多个文件

> ID：10042287
> 
> 赞同：1
> 
> 时间：2012-04-06T10:31:14.350
> 
> 标签：forms, html, zend-framework

我想使用`Zend_Form_Element_File`HTML 属性上传多张图片`multiple`。设置元素很直观：

```
$form->addElement(new Zend_Form_Element_File(
    'images',
    array('label' => 'Images:', 'multiple' => 'multiple')
)); 
```

当我在上传页面中获得对输入字段的引用并执行 a`$input->receive()`时，它只保存一个选定的文件。

当我搜索“Zend_Form_Element_File 多个文件”之类的内容时，我只得到显示使用的结果`Zend_Form_Element_File::setMultiFile()`，这不是我想要的。

有什么建议么？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-06T12:37:32.277

刚刚找到了我自己问题的答案：

**您必须将输入元素上的 'isArray' 设置为 true，无论是在构造元素时的选项数组中 ( `new Zend_Form_Input_File('images', array('isArray' => true))`) 还是通过 isArray() 方法 ( `$input->setIsArray(true)`)。**

一些背景信息以及我最终如何找到此解决方案：

首先，我意识到我必须在元素名称后面加上方括号才能使多个文件上传工作，例如`images[]`. 我不知道这是 HTML 规范还是 PHP 需要的东西，但在这种情况下它应该是这样工作的。

我的下一个问题是`Zend_Form_Element`当我尝试使用`name`属性设置括号时会删除括号。最后，我偶然发现了[Matthew Weier O'Phinney](http://zend-framework-community.634137.n4.nabble.com/Zend-Form-and-square-brackets-in-elements-name-td661888.html)自己的答案：为你`isArray`附加`[]`。

# .net - 用于单元测试 api 控制器的示例代码

> ID：10042290
> 
> 赞同：18
> 
> 时间：2012-04-06T10:31:26.287
> 
> 标签：.net, unit-testing, asp.net-web-api

是否有显示单元测试从 api 控制器继承的控制器的示例代码？我正在尝试对 POST 进行单元测试，但它失败了。我相信我需要设置 HttpControllerContext 进行测试，但不知道如何谢谢

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-07T14:55:59.640

此代码应演示后测试的基础知识。假设您有一个存储库注入到控制器中。如果您使用的是 Beta，我在这里使用的是 MVC 4 RC 而不是 Beta，Request.CreateResponse(... 有点不同，所以请给我留言...

给定控制器代码有点像这样：

```
public class FooController : ApiController
{
    private IRepository<Foo> _fooRepository;

    public FooController(IRepository<Foo> fooRepository)
    {
        _fooRepository = fooRepository;
    }

    public HttpResponseMessage Post(Foo value)
    {
        HttpResponseMessage response;

        Foo returnValue = _fooRepository.Save(value);
        response = Request.CreateResponse<Foo>(HttpStatusCode.Created, returnValue, this.Configuration);
        response.Headers.Location = "http://server.com/foos/1";

        return response;
    }
} 
```

单元测试看起来有点像这样（NUnit 和 RhinoMock）

```
 Foo dto = new Foo() { 
            Id = -1,
            Name = "Hiya" 
        };

        IRepository<Foo> fooRepository = MockRepository.GenerateMock<IRepository<Foo>>();
        fooRepository.Stub(x => x.Save(dto)).Return(new Foo() { Id = 1, Name = "Hiya" });

        FooController controller = new FooController(fooRepository);

        controller.Request = new HttpRequestMessage(HttpMethod.Post, "http://server.com/foos");
        //The line below was needed in WebApi RC as null config caused an issue after upgrade from Beta
        controller.Configuration = new System.Web.Http.HttpConfiguration(new System.Web.Http.HttpRouteCollection());

        var result = controller.Post(dto);

        Assert.AreEqual(HttpStatusCode.Created, result.StatusCode, "Expecting a 201 Message");

        var resultFoo = result.Content.ReadAsAsync<Foo>().Result;
        Assert.IsNotNull(resultFoo, "Response was empty!");
        Assert.AreEqual(1, resultFoo.Id, "Foo id should be set"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-03-05T14:25:54.940

使用[AutoFixture](https://github.com/AutoFixture/AutoFixture)，我通常会这样做：

```
[Theory, AutoCatalogData]
public void PostToCollectionReturnsCorrectResponse(
    CategoriesController sut,
    CategoryRendition categoryRendition)
{
    HttpResponseMessage response = sut.Post(categoryRendition);

    Assert.Equal(HttpStatusCode.Created, response.StatusCode);
} 
```

有关此方法的更多详细信息，请参阅[this other SO answer](https://stackoverflow.com/a/20723447/126014)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-10-19T03:50:15.603

在 C# 中使用异步基金对 API 控制器进行单元测试的示例代码

1.  准备测试模型：

    ```
     using System;
            namespace TestAPI.Models
            {
                public class TestResult
                {
                    public DateTime Date { get; set; }
                    public bool Success { get; set; }
                    public string Message { get; set; }
                }      
            } 
    ```

2.  准备测试控制器

    ```
     using TestAPI.Models;
            using System;
            using System.Net;
            using System.Threading.Tasks;
            using System.Web.Http;
            using System.Web.Http.Description;

            namespace TestAPI.Controllers
            {   
                public class TestController : ApiController
                {       
                    public TestController()
                    {           
                    }

                    [HttpPost]
                    [ResponseType(typeof(TestResult))]
                    [Route("api/test/start")]
                    public async Task<IHttpActionResult> StartTest()
                    {                                
                        DateTime startTime = DateTime.Now;
                        var testProcessor = new TestAsync();
                        await testProcessor.StartTestAsync();                                     

                        HttpStatusCode statusCode = HttpStatusCode.OK;
                        return Content(statusCode, new TestResult
                        {
                            Date = DateTime.Now,
                            Success = true,
                            Message = "test"
                        }); 
                    }       

                }
            } 
    ```

3.  单元测试异步控制器，从响应中检查结果

    ```
     using Microsoft.VisualStudio.TestTools.UnitTesting;
            using TestAPI.Controllers;
            using TestAPI.Models;
            using System.Web.Http;
            using System.Threading.Tasks;
            using System.Net;
            using System.Web.Script.Serialization;

            namespace Unit.Tests.Controllers
            {
                /// <summary>
                /// Summary description for ControllerTest
                /// </summary>
                [TestClass]
                public class ControllerTest
                {
                    private TestController _testController;       
                    [TestInitialize]
                    public void estAPI_Initializer()
                    {
                        _testController = new TestController();
                        var configuration = new HttpConfiguration();
                        System.Net.Http.HttpRequestMessage request = new System.Net.Http.HttpRequestMessage();
                        request.Headers.Add("Authorization", "Bearer 1232141241");
                        request.Headers.Add("ContentType", "application/json");
                        _testController.Request = request;
                        _testController.Configuration = configuration;            
                    }

                    [TestCategory("Unit test")]
                    [TestMethod]
                    public async Task API_Async_Controller_Test()
                    {
                        IHttpActionResult asyncResponse = await _testController.StartTest();
                        var cToken = new System.Threading.CancellationToken(true);           
                        var rResult = asyncResponse.ExecuteAsync(cToken);                      
                        Assert.IsNotNull(rResult);
                        Assert.IsNotNull(rResult.Result);
                        Assert.AreEqual(rResult.Result.StatusCode, HttpStatusCode.OK);
                        Assert.IsNotNull(rResult.Result.Content);
                        var rContent = rResult.Result.Content;

                        string data = await rContent.ReadAsStringAsync();
                        Assert.IsNotNull(data);
                        JavaScriptSerializer JSserializer = new JavaScriptSerializer();
                        var finalResult = JSserializer.Deserialize<TestResult>(data);

                        Assert.IsNotNull(finalResult);
                        Assert.IsTrue(finalResult.Success);
                    }        
                }
            } 
    ```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-03-05T12:06:53.327

我已经创建了一个通用的解决方案来调用一些动作并获取它`HttpResponseMessage`，`Dictionary`这非常方便使用。

首先是一些扩展`dictionary`：

```
public static class DictionaryExtensions
{
    public static void AddRange<T, S>(this Dictionary<T, S> source,
                                      Dictionary<T, S> collection) 
    {
        if (collection == null)
        {
            throw new NullReferenceException("Collection is null");
        }

        foreach (var item in collection)
        {
            source.Add(item.Key, item.Value);
        }
    }
} 
```

现在请求创建部分：

```
public class RequestCreator
{
    protected static void FirstPart(ApiController controller,
                                    HttpMethod method,String actionUrl)
    {
        // Creating basic request message with message type and requesting 
        // url example : 'http://www.someHostName/UrlPath/'
        controller.Request = new HttpRequestMessage(method, actionUrl);

        // Adding configuration for request
        controller.Request.Properties.
          Add(HttpPropertyKeys.HttpConfigurationKey,new HttpConfiguration());                                         
    }

    protected static Dictionary<String, Object> SecondPart
                                                 (HttpResponseMessage response)
    {
        // Adding basic response content to dictionary
        var resultCollection = new Dictionary<String, Object>
        {
            {"StatusCode",response.StatusCode},
            {"Headers",response.Headers},
            {"Version",response.Version},
            {"RequestMessage",response.RequestMessage},
            {"ReasonPhrase",response.ReasonPhrase},
            {"IsSuccessStatusCode",response.IsSuccessStatusCode}
        };

        var responseContent = response.Content;
        // If response has content then parsing it and 
        // getting content properties
        if (null != responseContent)
        {
            var resultMessageString = response.Content.
                                               ReadAsStringAsync().Result;
            resultCollection.AddRange((new JavaScriptSerializer()).
                                       DeserializeObject(resultMessageString) 
                                               as Dictionary<String, Object>);
        }

        return resultCollection;
    }       
} 
```

最后是对字典转换器的响应消息`class`：

```
public class HttpResponseModelGetter : RequestCreator
{
    public Dictionary<String, Object>
                 GetActionResponse(ApiController controller,HttpMethod method,
                          String actionUrl,Func<HttpResponseMessage> callBack)
    {
        FirstPart(controller, method, actionUrl);
        var response = callBack();
        return SecondPart(response);
    }
}

public class HttpResponseModelGetter<T> : RequestCreator
{
    public Dictionary<String, Object> 
             GetActionResponse(ApiController controller,HttpMethod method,
                String actionUrl,Func<T,HttpResponseMessage> callBack,T param) 
    {
        FirstPart(controller, method, actionUrl);
        var response = callBack(param);
        return SecondPart(response);
    }
}

public class HttpResponseModelGetter<T1,T2> : RequestCreator
{
    public Dictionary<String, Object> 
        GetActionResponse(ApiController controller,HttpMethod method, 
             String actionUrl,Func<T1,T2,HttpResponseMessage> callBack,
             T1 param1,T2 param2)

    {
        FirstPart(controller, method, actionUrl);
        var response = callBack(param1,param2);
        return SecondPart(response);
    }
} 
//and so on... 
```

和用法：

```
var responseGetter = new HttpResponseModelGetter();
var result = responseGetter.GetActionResponse(controller,HttpMethod.Get,
                    "http://localhost/Project/api/MyControllerApi/SomeApiMethod",
                                              controller.SomeApiMethod);

Boolean isComplete = Boolean.Parse(result["isComplete"].ToString()); 
```

# php - 如何在此 PHP 函数中设置比特率以合并音频文件

> ID：10042309
> 
> 赞同：1
> 
> 时间：2012-04-06T10:32:48.147
> 
> 标签：php, wav, audio-streaming, file-conversion, bitrate

我正在通过此功能合并多个音频文件（.wav），但现在我想指定输出文件的比特率。我应该怎么办？

```
function joinwavs($wavs) {
    $fields = join('/', array('H8ChunkID', 'VChunkSize', 'H8Format',
        'H8Subchunk1ID', 'VSubchunk1Size',
        'vAudioFormat', 'vNumChannels', 'VSampleRate',
        'VByteRate', 'vBlockAlign', 'vBitsPerSample'));
    $data = '';
    foreach ($wavs as $wav) {
        $wav = str_replace('http://example.com/', '', $wav);
        $fp = fopen($wav, 'rb');
        $header = fread($fp, 36);
        $info = unpack($fields, $header);
        // read optional extra stuff
        if ($info['Subchunk1Size'] > 16) {
            $header .= fread($fp, ($info['Subchunk1Size'] - 16));
        }
        // read SubChunk2ID
        $header .= fread($fp, 4);
        // read Subchunk2Size
        $size = unpack('vsize', fread($fp, 4));
        $size = $size['size'];
        // read data
        $data .= fread($fp, $size);
    }
    return ($header . pack('V', strlen($data)) . $data);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-06T17:39:58.383

为此使用[FFMPEG 。](http://ffmpeg.org/download.html)不要直接编辑音频文件，尤其是当您做的不仅仅是连接文件时。

您可以直接执行[FFMPEG](http://ffmpeg.org/download.html)，也可以使用[PHP 扩展](http://ffmpeg-php.sourceforge.net/)。就个人而言，我发现这[`exec()`](http://php.net/manual/en/function.exec.php)条路线要容易得多。

# android - 如何在调用Location onchanged方法时计算两个给定纬度和经度之间的距离

> ID：10042315
> 
> 赞同：0
> 
> 时间：2012-04-06T10:33:32.473
> 
> 标签：android

我对使用谷歌路线图有一些疑问，目前我在Android中工作，我正在开发的应用程序使用谷歌地图，实际上是我用于汽车租赁的应用程序，假设客户端发送皮卡添加和目的地添加，现在司机将得到那里是一个接送请求的请求，现在假设当前司机在其他位置（A），他的接送请求来自位置（B），不，我必须计算司机位置（A）和取货地点 (B)，我尝试使用 Android Location 中给出的方法，但我没有得到正确的距离我使用了该方法

```
float[] result=new float[5];  
myLocation.distanceBetween(ServerData.LATITUDE,ServerData.LONGITUDE, latitude,longitude,result);  
String distance=Float.toString(result[0]); 
```

这里

```
ServerData.LATITUDE----> when the driver login sends it current location
ServerData.LONGITUDE

latitude--- > is the location moving towards the pickup point
 longitude 
```

有人能建议我怎么做吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-06T11:08:08.287

由于该函数需要双精度，因此您最好使用双精度，也许在您从中获取坐标的地方添加一条线

```
lat = Double.parseDouble(coordinates[0]);

 long = Double.parseDouble(coordinates[0]); 
```

并且如上所述检查`result[1]`。

# android - 在 Android OpenGL ES 应用程序上保留游戏状态

> ID：10042316
> 
> 赞同：0
> 
> 时间：2012-04-06T10:33:36.080
> 
> 标签：android, opengl-es

我不太确定如何保留在适用于 Android 的 OpenGL ES 应用程序上初始化的所有变量。我的应用程序初始化很慢，如果我不保留初始化的变量，每次我关闭并再次打开屏幕，或者按主页键并返回应用程序时，所有初始操作都会重新开始，并且这会导致游戏缓慢返回，并回到游戏的第一个状态。如果将应用程序置于后台，如何保留应用程序状态以返回它而无需再次初始化所有内容？我必须修改`onSaveInstanceState`功能吗？

编辑：我想要的是应用程序不会重新加载上下文，并且返回它不会像第一次启动时那样持续

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T12:48:49.117

您需要使用 onSaveInstanceState 和 onRestoreInstanceState 来保存和加载变量，

我认为[使用 Save Instance State 保存 Android Activity 状态](https://stackoverflow.com/questions/151777/how-do-i-save-an-android-applications-state)是您所需要的

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-07T08:15:24.377

I still do not *really* comprehend your question. Anyway: you will have no other choice, depending on what state is thrown away. As in my comment above, there are at least 3 types of state:

1.  (Game) state that can be recreated from assets.
2.  (Game) state that represents the current users view (see answer from @AndrewWilkinson)
3.  The OpenGL context.

Have a look at an [Activity's lifecycle](http://developer.android.com/reference/android/app/Activity.html#ActivityLifecycle). When the process is not kicked out of memory, states 1\. and 2\. are preserved, and you need not worry. *Bad thing is*, you cannot know, so you need to prepare the app from being kicked out of memory and later recreated. So you need to preserve state 2\. at anytime.

For state 3.: On each call to `GLSurfaceView.Renderer.onSurfaceCreated`, you can be sure there is no OpenGL context anymore. You need to upload everything that is needed for displaying again. Setting the [preserve flag](http://developer.android.com/reference/android/opengl/GLSurfaceView.html#setPreserveEGLContextOnPause%28boolean%29) might help, but you cannot be sure.

If loading takes too long, consider to show a simple pause screen that does not take too long loading and keeps the user happy. Consider doing stuff in a more lazy fashion, s.t. some content is loaded on-demand and not eagerly.

# windows-phone-7 - Windows Phone 应用程序按钮需要按两次才能触发其操作

> ID：10042318
> 
> 赞同：1
> 
> 时间：2012-04-06T10:33:50.667
> 
> 标签：windows-phone-7

我在堆栈面板中有一个按钮，必须按两次才能执行其操作。这只发生在我隐藏堆栈面板并再次显示它时。

首先，我按下按钮并隐藏堆栈面板，隐藏按钮。我按下另一个按钮，使堆栈面板返回。我点击按钮，不起作用。再次单击，它可以工作。

这发生在模拟器和手机中。

这是我拥有的 xaml：

```
<StackPanel Grid.Row="1" Name="myPanel">
      <Button Content="{Binding LocalizedResources.ButtonX, Source={StaticResource Localization}}" Name="btnX" Click="btnX_Click" />
</StackPanel> 
```

在代码中，我只是控制可见性，如下所示：

```
myPanel.Visibility = Visibility.Collapsed; 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-06T10:46:31.583

`Focus`返回页面时提供堆栈面板。双击来自这样一个事实，即第一次单击给予控件`Focus`，然后第二次单击允许激活您的嵌入式控件。

我希望这有帮助。

# wcf - 多租户教程，例如？

> ID：10042321
> 
> 赞同：-1
> 
> 时间：2012-04-06T10:34:18.317
> 
> 标签：wcf, entity-framework, multi-tenant

我正在构建一个需要为每个客户创建一个数据库的应用程序。我为此使用 wcf 和 EF。但是我找不到关于多租户设计的像样的示例或教程。

现在我正在考虑在 wcf 中做这样的事情：

```
public product(int id,LicenseID)
{
  dal = new dal(LicenseID)  <--create connection with DB from a specific License
  dal.getProduct(id) <-- getProduct from that database 
} 
```

我在这里做的是正确的事情，还是实现这一目标的标准更好的方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-06T16:18:37.120

Rowan Miller（Microsoft ADO.NET Entity Framework 团队的项目经理）的博客上有一篇文章，其中包含多租户示例

[http://romiller.com/2011/05/23/ef-4-1-multi-tenant-with-code-first](http://romiller.com/2011/05/23/ef-4-1-multi-tenant-with-code-first)

# codeigniter-datamapper - 在数据映射器 ORM 中保存多对多关系 - Codeigniter

> ID：10042327
> 
> 赞同：0
> 
> 时间：2012-04-06T10:34:48.907
> 
> 标签：codeigniter-datamapper

我是初学者。在这里我想问大家，我怎样才能将多对多关系保存到三个表（表A，表Ab，表B）中？现在我正在尝试将具有新 ID 的新记录保存到表 A 中，并且我有一些表 B 的 ID，我想将它们保存到中间表 AB 取决于表 A 的 ID。如果有人有这方面的经验，请请分享。例子：

```
$a = new modelA();
$a->name = ‘new name’;
$a->des = ‘something to say’;

$b = new modelB();
$IDs = new array(1,2,3); //IDs of records in table B

$a->save(array($IDs=>$b)); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T20:22:05.777

不支持传递 ID，Datamapper 需要能够关联的对象。

如果您有一个 ID 数组，您可以使用 where_in() 查询获取对象，然后使用

```
$a->save($b->all); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-07T08:36:51.877

我有一些从帖子表单中获得的值，例如：

*   '新名字'
*   '新描述'
*   数组（'val1'，'val2'，'val3'）

在我的控制器中，我想将一条新记录保存到表 A 中：-'新名称'-'新描述'和数组（'val1'，'val2'，'val2'）我从表 B 中获得了它们的 ID多对多与表 A（要保存的新记录）。

所以当我保存到表A时，表B的ID也保存到中间表AB，表AI的新ID只是保存。如何保存？

# java - 在 Java 中验证电子邮件

> ID：10042329
> 
> 赞同：3
> 
> 时间：2012-04-06T10:34:54.863
> 
> 标签：java, jsp, spring-mvc

我有一个包含姓名、电子邮件和密码的注册表。注册时会向用户的电子邮件地址发送确认链接。但在发送链接之前，我需要验证电子邮件地址。我用了：

```
public static boolean verifyEmailAddress(String regEmail) {
    boolean result = true;
    try {
        InternetAddress emailAddr = new InternetAddress(regEmail);
        emailAddr.validate();
    } catch (AddressException ex) {
        result = false;
    }
    return result;
} 
```

它显示有效的任何电子邮件，例如`yutr6767868@huymail.com`，`k999////@sdmail.com`

我从中获取的电子邮件`request.getParameter`并将其存储在`regEmail`.

我到底需要做什么才能让它工作？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-06T10:53:22.047

使用[Apache Commons 验证器](http://commons.apache.org/validator/)。检查[电子邮件验证器](http://commons.apache.org/validator/apidocs/org/apache/commons/validator/routines/EmailValidator.html)

你可以像这个例子一样使用它：

```
 EmailValidator validator = EmailValidator.getInstance();
 boolean validEmail = validator.isValid(email); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-06T10:46:20.100

好的这里有 3 个例子 [http://www.mkyong.com/regular-expressions/how-to-validate-email-address-with-regular-expression/](http://www.mkyong.com/regular-expressions/how-to-validate-email-address-with-regular-expression/)

我想你需要的是

```
package com.mkyong.regex;

import java.util.regex.Matcher;
import java.util.regex.Pattern;

public class EmailValidator{

  private Pattern pattern;
  private Matcher matcher;

  private static final String EMAIL_PATTERN = 
               "^[_A-Za-z0-9-]+(\\.[_A-Za-z0-9-]+)*@
               [A-Za-z0-9]+(\\.[A-Za-z0-9]+)*(\\.[A-Za-z]{2,})$";

  public EmailValidator(){
      pattern = Pattern.compile(EMAIL_PATTERN);
  }

  /**
   * Validate hex with regular expression
   * @param hex hex for validation
   * @return true valid hex, false invalid hex
   */
  public boolean validate(final String hex){

      matcher = pattern.matcher(hex);
      return matcher.matches();

  } 
```

}

整个组合是指，电子邮件地址必须以“_A-Za-z0-9-”开头，可选后跟“.[_A-Za-z0-9-]”，并以“@”符号结尾。电子邮件的域名必须以“A-Za-z0-9”开头，后跟第一级 Tld (.com, .net) “.[A-Za-z0-9]”，可选后跟第二级 Tld ( .com.au, .com.my) “\.[A-Za-z]{2,}”，其中二级 Tld 必须以点“.”开头 并且长度必须等于或大于 2 个字符。

例子

```
package com.mkyong.regex;

import java.util.regex.Matcher;
import java.util.regex.Pattern;

public class EmailValidator{

  private Pattern pattern;
  private Matcher matcher;

  private static final String EMAIL_PATTERN = 
               "^[_A-Za-z0-9-]+(\\.[_A-Za-z0-9-]+)*@
               [A-Za-z0-9]+(\\.[A-Za-z0-9]+)*(\\.[A-Za-z]{2,})$";

  public EmailValidator(){
      pattern = Pattern.compile(EMAIL_PATTERN);
  }

  /**
   * Validate hex with regular expression
   * @param hex hex for validation
   * @return true valid hex, false invalid hex
   */
  public boolean validate(final String hex){

      matcher = pattern.matcher(hex);
      return matcher.matches();

  } 
```

}

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-04-06T11:09:48.393

公共域中有许多电子邮件验证器。

如前所述，[来自 apache commons 的电子邮件验证器](https://github.com/apache/commons-validator/blob/trunk/src/main/java/org/apache/commons/validator/EmailValidator.java)被大量使用。

[apache wicket codebase 上](https://github.com/apache/wicket/blob/master/wicket-extensions/src/main/java/org/apache/wicket/extensions/validation/validator/RfcCompliantEmailAddressValidator.java)有一个非常有趣的代码，它显然非常好，因为它是一个**81**行的正则表达式。只是为了好玩，我将复制并粘贴整个内容。

```
private static final String EMAIL_PATTERN = "(?:(?:\\r\\n)?[ \\t])*(?:(?:(?:[^()<>@,;:\\\".\\[\\] \\000-\\031]+(?:(?:(?:\\r\\n)?[ \\t]"
    + ")+|\\Z|(?=[\\[\"()<>@,;:\\\".\\[\\]]))|\"(?:[^\\\"\\r\\\\]|\\\\.|(?:(?:\\r\\n)?[ \\t]))*\"(?:(?:"
    + "\\r\\n)?[ \\t])*)(?:\\.(?:(?:\\r\\n)?[ \\t])*(?:[^()<>@,;:\\\".\\[\\] \\000-\\031]+(?:(?:("
    + "?:\\r\\n)?[ \\t])+|\\Z|(?=[\\[\"()<>@,;:\\\".\\[\\]]))|\"(?:[^\\\"\\r\\\\]|\\\\.|(?:(?:\\r\\n)?[ "
    + "\\t]))*\"(?:(?:\\r\\n)?[ \\t])*))*@(?:(?:\\r\\n)?[ \\t])*(?:[^()<>@,;:\\\".\\[\\] \\000-\\0"
    + "31]+(?:(?:(?:\\r\\n)?[ \\t])+|\\Z|(?=[\\[\"()<>@,;:\\\".\\[\\]]))|\\[([^\\[\\]\\r\\\\]|\\\\.)*\\"
    + "](?:(?:\\r\\n)?[ \\t])*)(?:\\.(?:(?:\\r\\n)?[ \\t])*(?:[^()<>@,;:\\\".\\[\\] \\000-\\031]+"
    + "(?:(?:(?:\\r\\n)?[ \\t])+|\\Z|(?=[\\[\"()<>@,;:\\\".\\[\\]]))|\\[([^\\[\\]\\r\\\\]|\\\\.)*\\](?:"
    + "(?:\\r\\n)?[ \\t])*))*|(?:[^()<>@,;:\\\".\\[\\] \\000-\\031]+(?:(?:(?:\\r\\n)?[ \\t])+|\\Z"
    + "|(?=[\\[\"()<>@,;:\\\".\\[\\]]))|\"(?:[^\\\"\\r\\\\]|\\\\.|(?:(?:\\r\\n)?[ \\t]))*\"(?:(?:\\r\\n)"
    + "?[ \\t])*)*\\<(?:(?:\\r\\n)?[ \\t])*(?:@(?:[^()<>@,;:\\\".\\[\\] \\000-\\031]+(?:(?:(?:\\"
    + "r\\n)?[ \\t])+|\\Z|(?=[\\[\"()<>@,;:\\\".\\[\\]]))|\\[([^\\[\\]\\r\\\\]|\\\\.)*\\](?:(?:\\r\\n)?["
    + " \\t])*)(?:\\.(?:(?:\\r\\n)?[ \\t])*(?:[^()<>@,;:\\\".\\[\\] \\000-\\031]+(?:(?:(?:\\r\\n)"
    + "?[ \\t])+|\\Z|(?=[\\[\"()<>@,;:\\\".\\[\\]]))|\\[([^\\[\\]\\r\\\\]|\\\\.)*\\](?:(?:\\r\\n)?[ \\t]"
    + ")*))*(?:,@(?:(?:\\r\\n)?[ \\t])*(?:[^()<>@,;:\\\".\\[\\] \\000-\\031]+(?:(?:(?:\\r\\n)?["
    + " \\t])+|\\Z|(?=[\\[\"()<>@,;:\\\".\\[\\]]))|\\[([^\\[\\]\\r\\\\]|\\\\.)*\\](?:(?:\\r\\n)?[ \\t])*"
    + ")(?:\\.(?:(?:\\r\\n)?[ \\t])*(?:[^()<>@,;:\\\".\\[\\] \\000-\\031]+(?:(?:(?:\\r\\n)?[ \\t]"
    + ")+|\\Z|(?=[\\[\"()<>@,;:\\\".\\[\\]]))|\\[([^\\[\\]\\r\\\\]|\\\\.)*\\](?:(?:\\r\\n)?[ \\t])*))*)"
    + "*:(?:(?:\\r\\n)?[ \\t])*)?(?:[^()<>@,;:\\\".\\[\\] \\000-\\031]+(?:(?:(?:\\r\\n)?[ \\t])+"
    + "|\\Z|(?=[\\[\"()<>@,;:\\\".\\[\\]]))|\"(?:[^\\\"\\r\\\\]|\\\\.|(?:(?:\\r\\n)?[ \\t]))*\"(?:(?:\\r"
    + "\\n)?[ \\t])*)(?:\\.(?:(?:\\r\\n)?[ \\t])*(?:[^()<>@,;:\\\".\\[\\] \\000-\\031]+(?:(?:(?:"
    + "\\r\\n)?[ \\t])+|\\Z|(?=[\\[\"()<>@,;:\\\".\\[\\]]))|\"(?:[^\\\"\\r\\\\]|\\\\.|(?:(?:\\r\\n)?[ \\t"
    + "]))*\"(?:(?:\\r\\n)?[ \\t])*))*@(?:(?:\\r\\n)?[ \\t])*(?:[^()<>@,;:\\\".\\[\\] \\000-\\031"
    + "]+(?:(?:(?:\\r\\n)?[ \\t])+|\\Z|(?=[\\[\"()<>@,;:\\\".\\[\\]]))|\\[([^\\[\\]\\r\\\\]|\\\\.)*\\]("
    + "?:(?:\\r\\n)?[ \\t])*)(?:\\.(?:(?:\\r\\n)?[ \\t])*(?:[^()<>@,;:\\\".\\[\\] \\000-\\031]+(?"
    + ":(?:(?:\\r\\n)?[ \\t])+|\\Z|(?=[\\[\"()<>@,;:\\\".\\[\\]]))|\\[([^\\[\\]\\r\\\\]|\\\\.)*\\](?:(?"
    + ":\\r\\n)?[ \\t])*))*\\>(?:(?:\\r\\n)?[ \\t])*)|(?:[^()<>@,;:\\\".\\[\\] \\000-\\031]+(?:(?"
    + ":(?:\\r\\n)?[ \\t])+|\\Z|(?=[\\[\"()<>@,;:\\\".\\[\\]]))|\"(?:[^\\\"\\r\\\\]|\\\\.|(?:(?:\\r\\n)?"
    + "[ \\t]))*\"(?:(?:\\r\\n)?[ \\t])*)*:(?:(?:\\r\\n)?[ \\t])*(?:(?:(?:[^()<>@,;:\\\".\\[\\] "
    + "\\000-\\031]+(?:(?:(?:\\r\\n)?[ \\t])+|\\Z|(?=[\\[\"()<>@,;:\\\".\\[\\]]))|\"(?:[^\\\"\\r\\\\]|"
    + "\\\\.|(?:(?:\\r\\n)?[ \\t]))*\"(?:(?:\\r\\n)?[ \\t])*)(?:\\.(?:(?:\\r\\n)?[ \\t])*(?:[^()<>"
    + "@,;:\\\".\\[\\] \\000-\\031]+(?:(?:(?:\\r\\n)?[ \\t])+|\\Z|(?=[\\[\"()<>@,;:\\\".\\[\\]]))|\""
    + "(?:[^\\\"\\r\\\\]|\\\\.|(?:(?:\\r\\n)?[ \\t]))*\"(?:(?:\\r\\n)?[ \\t])*))*@(?:(?:\\r\\n)?[ \\t]"
    + ")*(?:[^()<>@,;:\\\".\\[\\] \\000-\\031]+(?:(?:(?:\\r\\n)?[ \\t])+|\\Z|(?=[\\[\"()<>@,;:\\\\"
    + "\".\\[\\]]))|\\[([^\\[\\]\\r\\\\]|\\\\.)*\\](?:(?:\\r\\n)?[ \\t])*)(?:\\.(?:(?:\\r\\n)?[ \\t])*(?"
    + ":[^()<>@,;:\\\".\\[\\] \\000-\\031]+(?:(?:(?:\\r\\n)?[ \\t])+|\\Z|(?=[\\[\"()<>@,;:\\\".\\["
    + "\\]]))|\\[([^\\[\\]\\r\\\\]|\\\\.)*\\](?:(?:\\r\\n)?[ \\t])*))*|(?:[^()<>@,;:\\\".\\[\\] \\000-"
    + "\\031]+(?:(?:(?:\\r\\n)?[ \\t])+|\\Z|(?=[\\[\"()<>@,;:\\\".\\[\\]]))|\"(?:[^\\\"\\r\\\\]|\\\\.|("
    + "?:(?:\\r\\n)?[ \\t]))*\"(?:(?:\\r\\n)?[ \\t])*)*\\<(?:(?:\\r\\n)?[ \\t])*(?:@(?:[^()<>@,;"
    + ":\\\".\\[\\] \\000-\\031]+(?:(?:(?:\\r\\n)?[ \\t])+|\\Z|(?=[\\[\"()<>@,;:\\\".\\[\\]]))|\\[(["
    + "^\\[\\]\\r\\\\]|\\\\.)*\\](?:(?:\\r\\n)?[ \\t])*)(?:\\.(?:(?:\\r\\n)?[ \\t])*(?:[^()<>@,;:\\\""
    + ".\\[\\] \\000-\\031]+(?:(?:(?:\\r\\n)?[ \\t])+|\\Z|(?=[\\[\"()<>@,;:\\\".\\[\\]]))|\\[([^\\[\\"
    + "]\\r\\\\]|\\\\.)*\\](?:(?:\\r\\n)?[ \\t])*))*(?:,@(?:(?:\\r\\n)?[ \\t])*(?:[^()<>@,;:\\\".\\"
    + "[\\] \\000-\\031]+(?:(?:(?:\\r\\n)?[ \\t])+|\\Z|(?=[\\[\"()<>@,;:\\\".\\[\\]]))|\\[([^\\[\\]\\"
    + "r\\\\]|\\\\.)*\\](?:(?:\\r\\n)?[ \\t])*)(?:\\.(?:(?:\\r\\n)?[ \\t])*(?:[^()<>@,;:\\\".\\[\\] "
    + "\\000-\\031]+(?:(?:(?:\\r\\n)?[ \\t])+|\\Z|(?=[\\[\"()<>@,;:\\\".\\[\\]]))|\\[([^\\[\\]\\r\\\\]"
    + "|\\\\.)*\\](?:(?:\\r\\n)?[ \\t])*))*)*:(?:(?:\\r\\n)?[ \\t])*)?(?:[^()<>@,;:\\\".\\[\\] \\0"
    + "00-\\031]+(?:(?:(?:\\r\\n)?[ \\t])+|\\Z|(?=[\\[\"()<>@,;:\\\".\\[\\]]))|\"(?:[^\\\"\\r\\\\]|\\\\"
    + ".|(?:(?:\\r\\n)?[ \\t]))*\"(?:(?:\\r\\n)?[ \\t])*)(?:\\.(?:(?:\\r\\n)?[ \\t])*(?:[^()<>@,"
    + ";:\\\".\\[\\] \\000-\\031]+(?:(?:(?:\\r\\n)?[ \\t])+|\\Z|(?=[\\[\"()<>@,;:\\\".\\[\\]]))|\"(?"
    + ":[^\\\"\\r\\\\]|\\\\.|(?:(?:\\r\\n)?[ \\t]))*\"(?:(?:\\r\\n)?[ \\t])*))*@(?:(?:\\r\\n)?[ \\t])*"
    + "(?:[^()<>@,;:\\\".\\[\\] \\000-\\031]+(?:(?:(?:\\r\\n)?[ \\t])+|\\Z|(?=[\\[\"()<>@,;:\\\"."
    + "\\[\\]]))|\\[([^\\[\\]\\r\\\\]|\\\\.)*\\](?:(?:\\r\\n)?[ \\t])*)(?:\\.(?:(?:\\r\\n)?[ \\t])*(?:["
    + "^()<>@,;:\\\".\\[\\] \\000-\\031]+(?:(?:(?:\\r\\n)?[ \\t])+|\\Z|(?=[\\[\"()<>@,;:\\\".\\[\\]"
    + "]))|\\[([^\\[\\]\\r\\\\]|\\\\.)*\\](?:(?:\\r\\n)?[ \\t])*))*\\>(?:(?:\\r\\n)?[ \\t])*)(?:,\\s*("
    + "?:(?:[^()<>@,;:\\\".\\[\\] \\000-\\031]+(?:(?:(?:\\r\\n)?[ \\t])+|\\Z|(?=[\\[\"()<>@,;:\\\\"
    + "\".\\[\\]]))|\"(?:[^\\\"\\r\\\\]|\\\\.|(?:(?:\\r\\n)?[ \\t]))*\"(?:(?:\\r\\n)?[ \\t])*)(?:\\.(?:("
    + "?:\\r\\n)?[ \\t])*(?:[^()<>@,;:\\\".\\[\\] \\000-\\031]+(?:(?:(?:\\r\\n)?[ \\t])+|\\Z|(?=["
    + "\\[\"()<>@,;:\\\".\\[\\]]))|\"(?:[^\\\"\\r\\\\]|\\\\.|(?:(?:\\r\\n)?[ \\t]))*\"(?:(?:\\r\\n)?[ \\t"
    + "])*))*@(?:(?:\\r\\n)?[ \\t])*(?:[^()<>@,;:\\\".\\[\\] \\000-\\031]+(?:(?:(?:\\r\\n)?[ \\t"
    + "])+|\\Z|(?=[\\[\"()<>@,;:\\\".\\[\\]]))|\\[([^\\[\\]\\r\\\\]|\\\\.)*\\](?:(?:\\r\\n)?[ \\t])*)(?"
    + ":\\.(?:(?:\\r\\n)?[ \\t])*(?:[^()<>@,;:\\\".\\[\\] \\000-\\031]+(?:(?:(?:\\r\\n)?[ \\t])+|"
    + "\\Z|(?=[\\[\"()<>@,;:\\\".\\[\\]]))|\\[([^\\[\\]\\r\\\\]|\\\\.)*\\](?:(?:\\r\\n)?[ \\t])*))*|(?:"
    + "[^()<>@,;:\\\".\\[\\] \\000-\\031]+(?:(?:(?:\\r\\n)?[ \\t])+|\\Z|(?=[\\[\"()<>@,;:\\\".\\[\\"
    + "]]))|\"(?:[^\\\"\\r\\\\]|\\\\.|(?:(?:\\r\\n)?[ \\t]))*\"(?:(?:\\r\\n)?[ \\t])*)*\\<(?:(?:\\r\\n)"
    + "?[ \\t])*(?:@(?:[^()<>@,;:\\\".\\[\\] \\000-\\031]+(?:(?:(?:\\r\\n)?[ \\t])+|\\Z|(?=[\\[\""
    + "()<>@,;:\\\".\\[\\]]))|\\[([^\\[\\]\\r\\\\]|\\\\.)*\\](?:(?:\\r\\n)?[ \\t])*)(?:\\.(?:(?:\\r\\n)"
    + "?[ \\t])*(?:[^()<>@,;:\\\".\\[\\] \\000-\\031]+(?:(?:(?:\\r\\n)?[ \\t])+|\\Z|(?=[\\[\"()<>"
    + "@,;:\\\".\\[\\]]))|\\[([^\\[\\]\\r\\\\]|\\\\.)*\\](?:(?:\\r\\n)?[ \\t])*))*(?:,@(?:(?:\\r\\n)?["
    + " \\t])*(?:[^()<>@,;:\\\".\\[\\] \\000-\\031]+(?:(?:(?:\\r\\n)?[ \\t])+|\\Z|(?=[\\[\"()<>@,"
    + ";:\\\".\\[\\]]))|\\[([^\\[\\]\\r\\\\]|\\\\.)*\\](?:(?:\\r\\n)?[ \\t])*)(?:\\.(?:(?:\\r\\n)?[ \\t]"
    + ")*(?:[^()<>@,;:\\\".\\[\\] \\000-\\031]+(?:(?:(?:\\r\\n)?[ \\t])+|\\Z|(?=[\\[\"()<>@,;:\\\\"
    + "\".\\[\\]]))|\\[([^\\[\\]\\r\\\\]|\\\\.)*\\](?:(?:\\r\\n)?[ \\t])*))*)*:(?:(?:\\r\\n)?[ \\t])*)?"
    + "(?:[^()<>@,;:\\\".\\[\\] \\000-\\031]+(?:(?:(?:\\r\\n)?[ \\t])+|\\Z|(?=[\\[\"()<>@,;:\\\"."
    + "\\[\\]]))|\"(?:[^\\\"\\r\\\\]|\\\\.|(?:(?:\\r\\n)?[ \\t]))*\"(?:(?:\\r\\n)?[ \\t])*)(?:\\.(?:(?:"
    + "\\r\\n)?[ \\t])*(?:[^()<>@,;:\\\".\\[\\] \\000-\\031]+(?:(?:(?:\\r\\n)?[ \\t])+|\\Z|(?=[\\["
    + "\"()<>@,;:\\\".\\[\\]]))|\"(?:[^\\\"\\r\\\\]|\\\\.|(?:(?:\\r\\n)?[ \\t]))*\"(?:(?:\\r\\n)?[ \\t])"
    + "*))*@(?:(?:\\r\\n)?[ \\t])*(?:[^()<>@,;:\\\".\\[\\] \\000-\\031]+(?:(?:(?:\\r\\n)?[ \\t])"
    + "+|\\Z|(?=[\\[\"()<>@,;:\\\".\\[\\]]))|\\[([^\\[\\]\\r\\\\]|\\\\.)*\\](?:(?:\\r\\n)?[ \\t])*)(?:\\"
    + ".(?:(?:\\r\\n)?[ \\t])*(?:[^()<>@,;:\\\".\\[\\] \\000-\\031]+(?:(?:(?:\\r\\n)?[ \\t])+|\\Z"
    + "|(?=[\\[\"()<>@,;:\\\".\\[\\]]))|\\[([^\\[\\]\\r\\\\]|\\\\.)*\\](?:(?:\\r\\n)?[ \\t])*))*\\>(?:("
    + "?:\\r\\n)?[ \\t])*))*)?;\\s*)"; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-09-18T22:02:49.700

尝试这个：

```
public boolean isEmail(String s) {
    return s.matches("^[-0-9a-zA-Z.+_]+@[-0-9a-zA-Z.+_]+\\.[a-zA-Z]{2,4}");
} 
```

如果您需要电子邮件在@ 字符之前有一定的长度。例如5：

```
s.matches("^[-0-9a-zA-Z.+_]{5}+@[-0-9a-zA-Z.+_]+\\.[a-zA-Z]{2,4}") 
```

表达式中的 {5} 验证长度。

# iphone - 重置 Facebook 权限 iOS SDK

> ID：10042332
> 
> 赞同：4
> 
> 时间：2012-04-06T10:35:18.567
> 
> 标签：iphone, ios, xcode, facebook, permissions

完成我的项目后，我想以 *.ipa 的形式分享它。在此之前，我想检查 Facebook 登录是否有效。

到目前为止，我始终使用我的 Facebook 帐户登录。

那么：有没有办法重置我的 iPhone 的 Facebook 权限，我可以在我的 iPhone 上模拟全新安装？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T14:06:26.807

您可以通过调用以下方法来重置权限。

```
- (void)fbDidLogout {

NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];
[facebook invalidateSession];
[defaults removeObjectForKey:@"FBAccessTokenKey"];
[defaults removeObjectForKey:@"FBExpirationDateKey"];
[defaults synchronize]; 
```

}

这可能会迫使用户重新登录 facebook。

# android - 用于 libGDX 的 AnalogOnScreenController 或操纵杆

> ID：10042335
> 
> 赞同：4
> 
> 时间：2012-04-06T10:35:28.910
> 
> 标签：android, andengine, libgdx

有人在 libGdx 的屏幕控制器上实现了吗？类似于 AndEngine [AnalogOnScreenController](https://github.com/nicolasgramlich/AndEngine/blob/GLES2/src/org/andengine/engine/camera/hud/controls/AnalogOnScreenControl.java)

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-21T17:08:42.623

For joystick you have touchpad in libgdx. [http://libgdx.badlogicgames.com/nightlies/docs/api/com/badlogic/gdx/scenes/scene2d/ui/Touchpad.html](http://libgdx.badlogicgames.com/nightlies/docs/api/com/badlogic/gdx/scenes/scene2d/ui/Touchpad.html)

# java - 从一个类中获取一个字符串以写入前屏幕类

> ID：10042336
> 
> 赞同：1
> 
> 时间：2012-04-06T10:35:30.087
> 
> 标签：java

我正在创建一个空中交通管制系统，它会生成随机数量的燃料和随机数量的飞机。我已经完成了这两个元素，但问题是，在输出框中，它都显示并完美运行。我的问题是我要告诉它，如果没有飞机进来就调用字符串 no planes，如果有飞机，那么 KLM。我无法让它用所有前端写入主类。

当我使用 Netbeans 拖放前端时，我已经编辑了屏幕中的一些编码：

```
enter public void StartSimulation()
{
     Start pointer = new Start();
     Plane incoming = new Plane();

        //Needs a condition in here that checks if the plane and fuel has been
     //Generated and also loop to keep up with the constant generated planes and fuel
         jTextArea1.setText(incoming.planeName); 
```

我试过条件如下：

`if (incoming.nextPlaneLanding != 167)`这会在输出框中一遍又一遍地生成第一件事。我也尝试在平面类中设置一个布尔值，但同样，即使在它周围有以下条件，它也没有任何效果。`if (incoming.completed = true)`

这是我在飞机课上的东西：

```
class Plane 
 extends TimerTask
{
    public int nextPlaneLoop = 0;
    public int planes;
    public int fuel;
    public String planeName;
@Override
public void run()
{
    if(nextPlaneLoop <=167)
    {
        //Currently only running 1 or 0 planes...
        planes = (int) (Math.random()*((2-1)+1));
        System.out.println("Random generated plane amount: "+planes);
        System.out.println("Method called, one whole day loop");
        //Adds to the plane in the airspace loop
        nextPlaneLoop++;
        System.out.println("Loop incrementing: "+nextPlaneLoop);

        if(planes == 0)
        {
        System.out.println("No fuel is required as no planes are coming in");
        planeName = "No incoming plane";
        System.out.println("Planes name is: "+planeName);
        System.out.println(" ");
        }

        else
        {
       //Amount of fuel
        fuel = 30 + (int)(Math.random()*((120-30)+1));
        System.out.println("Random fuel: "+fuel);
        planeName = "KLM AirFrance";
        System.out.println("Planes name is: "+planeName);
        System.out.println(" ");
        }
    }
    else
     {
        this.cancel();
        System.out.println("Not in loop any more. End of day");
      }
}
} 
```

任何人都可以建议必须如何将名称显示在屏幕上，以便我可以尝试将它们添加到实际机场类的队列中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-06T10:42:11.193

我认为[观察者](http://en.wikipedia.org/wiki/Observer_pattern)模式可能对你很有效。在 Java 中，这是通过[`Observer`](http://docs.oracle.com/javase/6/docs/api/java/util/Observer.html)和实现的[`Observable`](http://docs.oracle.com/javase/6/docs/api/java/util/Observable.html)。

# java - 如何将焦点设置在 SWT TableItem 上

> ID：10042337
> 
> 赞同：1
> 
> 时间：2012-04-06T10:35:51.823
> 
> 标签：java, eclipse, swt

我有一个添加按钮，它将行添加到 SWT 表中，并且我实现了 TableEditor 来编辑行。

```
Button button = new Button(composite, SWT.NONE);
  button.addSelectionListener(new SelectionAdapter() {
     @Override
     public void widgetSelected(SelectionEvent e) {
        TableItem item = new TableItem(table, SWT.NONE);
                }
  }); 
```

这是创建表的一段代码

```
table = new Table(composite, SWT.BORDER | SWT.FULL_SELECTION);
  table.setBounds(0, 0, 240, 160);
  toolkit.adapt(table);
  toolkit.paintBordersFor(table);
  table.setHeaderVisible(true);
  table.setLinesVisible(true); 
```

当用户点击添加按钮时，会创建一个允许用户编辑的行。但是从用户的角度来看，是否创建了行是不可见的，除非他选择了该行并且启用了编辑器。

那么您能否建议如何将焦点放在新添加的 TableItem 上？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-06T14:02:35.250

请参阅 Table.setSelection() 和 Table.showItem() API。

# javascript - 如何使用 jQuery 将所有相似的 id 放入一个数组中？

> ID：10042342
> 
> 赞同：1
> 
> 时间：2012-04-06T10:36:17.013
> 
> 标签：javascript, jquery, coffeescript

一般来说，我对 JavaScript 很陌生，所以遇到了麻烦。使用 Rails / jQuery / CoffeeScript。我正在向表单添加批量添加选项。批量添加有效，但我也在尝试保存手动填写的任何字段。这是我到目前为止的代码：

```
window.insert_bulk_fields = (text)->
  site = $('#website_link').val()
  links = text.split('\n').join('&links[]=').replace(/\s+/g, '')
  input_links = $("input[type=text][id^='website_rentals_attributes']").val()
  other_links = '&links[]=' + input_links.split(',').join('&links[]=')
  window.location.href = './new?links[]=' + links + other_links + '&site=' + site 
```

一切正常，除了

```
input_links = $("input[type=text][id^='website_rentals_attributes']").val() 
```

它只返回第一个实例，而不是所有这些字段的数组。

我在stackoverflow上遇到了类似的问题，但我无法完成这项工作。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-06T10:37:37.897

在处理集合时，您应该为此使用[map()](http://api.jquery.com/map/)

```
input_links = $("input[type=text][id^='website_rentals_attributes']").map(function(){
    return this.value;
}).get() 
```

# jquery - jquery动画高度弹跳

> ID：10042343
> 
> 赞同：1
> 
> 时间：2012-04-06T10:36:45.453
> 
> 标签：jquery, css, height, jquery-animate, slide

我制作了一个脚本，将内容动态加载到 div 中，每当内容使 div 的高度变大或变小时，它都会将高度设置为实际高度。

问题是它不仅向上/向下滑动，而且总是向上滑动一点，然后向下滑动到所需的高度。

我想让它直接在所需的高度滑动而没有“弹跳”。

这是脚本的一部分： main_content.html(html);

```
main_content.css("height", "auto");
var newContentHeight = main_content.height();
loader_div.hide();
main_content.height(prevContentHeight);
main_content.fadeIn("fast", function() {
    main_content.animate({
        "height": newContentHeight
        }, 300);
    }); 
```

该脚本有效，唯一的问题是动画不会将 div 向上或向下滑动到所需的高度，它总是将其向上滑动一点，然后再向下滑动到所需的高度。

使用动画高度时是某种想要的动画还是有什么问题？谢谢

编辑：控制台记录 newContentHeight（div 的最终高度）它看起来像收集了 2 个高度，然后动画首先到达其中一个高度，然后到达另一个高度，这就是它看起来像弹跳的原因。正在努力。

编辑2：是的，问题肯定存在，我清理了所有代码，一切正常，除了我使用console.log从newContentHeight获取2个属性看起来隐藏的内容div有2个高度，这2个高度传递给.animate 这就是它先升后降的原因……有点奇怪

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T12:40:41.707

我认为问题不是脚本，而是运行脚本的系统。更换时间要慢一点

```
main_content.animate({
"height": newContentHeight
}, 3000); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-08T15:31:15.597

无法解决问题，我修改了下面的脚本，现在一切正常。 [http://css-tricks.com/dynamic-page-replacing-content/](http://css-tricks.com/dynamic-page-replacing-content/) 它具有我正在寻找的确切动画（除了几个易于实施的步骤）。

# ruby-on-rails - Rails 3.2 引擎布局

> ID：10042348
> 
> 赞同：18
> 
> 时间：2012-04-06T10:37:13.053
> 
> 标签：ruby-on-rails, ruby-on-rails-3, rails-engines

我很难理解 Rails 3.2 在使用可安装引擎时如何应用布局。

场景：我正在构建一个引擎，它本身具有仪表板视图和用于各种管理功能的管理视图。我希望仪表板的布局可以被基本应用程序覆盖（如果用户愿意），但管理员应该始终使用自己的布局。

这是我目前在引擎中拥有的东西；

application_controller.rb

```
module Myengine
  class ApplicationController < ActionController::Base 
```

管理员/dashboard_controller.rb

```
module Myengine                                                                                                          
  class Admin::DashboardController < ApplicationController 
```

现在我的引擎 application.html.erb 应用了可怕的红色背景，而基础应用程序 application.html.erb 使用了令人愉悦的黄色背景，因此我可以区分正在应用哪个应用程序布局。

在这种情况下，如果我首先访问基本应用程序，我会看到我的黄色背景（来自基本应用程序），如果我同时访问引擎和引擎管理路径，黄色背景仍然存在。

如果我重新启动服务器并首先访问引擎，那么我会看到引擎和引擎管理路径的红色背景，而基本应用程序显示黄色背景。

如果我修改我的 admin/dashboard_controller.rb 如下；

```
module Myengine
  class Admin::DashboardController < ApplicationController
    layout 'myengine/application' 
```

我希望仅适用于引擎/管理控制器 - 但如果我重新启动服务器并访问引擎/管理路径，我会看到红色背景，而引擎的根视图使用基本应用程序黄色布局。

如果我再次重新启动服务器并访问已安装引擎的根目录，我会应用红色背景，该背景也会保留在引擎管理路径上。

啊啊啊啊啊啊！

根据首先访问应用程序的哪个路径，预期的行为是否会使用不同的应用程序布局？确定不是？？我一定做错了什么！

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-04-17T22:42:59.070

我已经调试了这个问题，实际上它不是引擎中的错误。问题是由加载 rails 依赖项的方式引起的。

此代码在您展示的 2 个场景中的行为会有所不同：

```
module Enginedemo
  class DashboardController < ApplicationController
  end
end 
```

如果`ApplicationController`已经加载，rails 将假定我们只想使用它，而您实际上不会继承`Enginedemo::ApplicationController`自`ApplicationController`. 在另一种情况下，当你第一次加载引擎的控制器时，`ApplicationController`它还没有加载，所以 Rails 做了正确的事情。

值得庆幸的是，此问题仅发生在开发环境中，因为在应用程序启动时会加载生产控制器。

我不确定这是否可以在 Rails 依赖项中轻松修复，我会看看它。

现在，请明确要求应用程序控制器：

```
require 'enginedemo/application_controller'

module Enginedemo
  class DashboardController < ApplicationController
  end
end 
```

# python - python正则表达式匹配逗号

> ID：10042350
> 
> 赞同：6
> 
> 时间：2012-04-06T10:37:30.100
> 
> 标签：python, regex

在以下字符串中，如何匹配包括逗号在内的单词

1.  --

    ```
    process_str = "Marry,had ,a,alittle,lamb"
    import re

    re.findall(r".*",process_str)
    ['Marry,had ,a,alittle,lamb', ''] 
    ```

2.  --

    ```
    process_str="192.168.1.43,Marry,had ,a,alittle,lamb11"

    import re
    ip_addr = re.findall(r"\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}",l)          
    re.findall(ip_addr,process_str1) 
    ```

    如何查找ip地址后面的单词只排除第一个逗号ie，outout再次预计为`Marry,had ,a,alittle,lamb11`

3.  在上面的第二个示例中，如何查找字符串是否以数字结尾。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-06T10:44:53.253

在第二个示例中，您只需要捕获（使用`()`）跟随 ip 的所有内容：

```
 import re

 s = "192.168.1.43,Marry,had ,a,alittle,lamb11"
 text = re.findall(r"\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3},(.*)", s)[0]
 // text now holds the string Marry,had ,a,alittle,lamb11 
```

要确定字符串是否以数字结尾，您可以使用以下命令：

```
re.match(".*\d$", process_str) 
```

也就是说，您匹配整个字符串 ( `.*`)，然后回溯以测试最后一个字符（使用`$`，它匹配字符串的结尾）是否是数字。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-06T10:46:01.050

找到包括逗号在内的单词，这就是我对这句话的理解：

```
>>> re.findall("\w+,*", process_str)
['Marry,', 'had', 'a,', 'alittle,', 'lamb'] 
```

以 didgit 结尾：

```
"[0-9]+$" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-06T10:50:04.447

唔。这些例子不是很清楚，但似乎在例子#2中，你只想匹配文本、逗号、空格字符并忽略数字？这个怎么样：

```
re.findall('(?i)([a-z, ]+), process_str) 
```

我不太明白“如果字符串以数字结尾”。这是否意味着您只想匹配 'Mary...' 如果它以数字结尾？然后看起来像这样：

```
re.findall('(?i)([a-z, ]+)\d+, process_str) 
```

# windows - 如何在 Windows 7 中使用批处理脚本获取本地连接名称

> ID：10042354
> 
> 赞同：3
> 
> 时间：2012-04-06T10:37:43.830
> 
> 标签：windows, batch-file

我正在编写一个简单的批处理脚本来检索 Windows 上的所有网络接口。但我只需要本地连接名称。本地连接接口名称不是默认的。有没有办法使用批处理脚本仅检索本地连接名称作为字符串？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-06T19:24:26.030

不完全确定您在问什么，但我认为您的问题是您想要获取网络接口的所有友好名称。

像这样的东西：

```
wmic nic where "netconnectionid like '%'" get netconnectionid 
```

返回（在我的笔记本电脑上）

```
NetConnectionID
Local Area Connection
Wireless Network Connection
Bluetooth Network Connection
VirtualBox Host-Only Network 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-04-18T09:58:31.960

对于现在积极连接的人：

```
C:\>wmic.exe nic where "NetConnectionStatus=2" get NetConnectionID |more +1
Local Area Connection 8 
```

为了更好地理解上述内容，请尝试：

```
C:\>wmic.exe nic > 1.txt

C:\>1.txt 
```

# map - 使用 GeoTools 在 JMapFrame 中显示 POSTGIS 数据

> ID：10042355
> 
> 赞同：2
> 
> 时间：2012-04-06T10:37:45.303
> 
> 标签：map, geometry, postgis, geotools

**编辑**：有关信息：使用 StyleLab 示例创建样式，它将显示您想要的内容。

我正在尝试使用 GeoTools 显示 POSTGIS 数据 我做了以下示例： [http://docs.geotools.org/stable/userguide/examples/](http://docs.geotools.org/stable/userguide/examples/)：使用 QueryLab 我可以显示 POSTGIS 数据的选项卡 使用 QuickStart 我可以显示shapefile (.shp) 的映射

但是我没有成功将这些源代码与我的 postgis 数据混合显示地图

关于错误消息，它可能来自缺少样式定义。尽管如此，它非常适合shapefile，所以我不明白。此外，我没有找到如何创建适当的样式来解决这个问题。

如何将 POSTGIS 几何图形显示到地图中？有谁知道如何解决这个问题或有任何想法？

这是我的源代码和消息错误：

```
package org.geotools.tuto;

import java.io.IOException;
import java.util.HashMap;
import java.util.Map;

import javax.swing.JFrame;
import javax.swing.WindowConstants;

import org.geotools.data.DataStore;
import org.geotools.data.DataStoreFinder;
import org.geotools.data.FeatureSource;
import org.geotools.data.Query;
import org.geotools.map.*;
import org.geotools.swing.JMapPane;

public class test {
    public test() throws IOException{
        Map params = new HashMap();
        params.put("dbtype", "postgis");  //must be postgis
        //the name or ip address of the machine running PostGIS
        params.put("host", "localhost");
        //the port that PostGIS is running on (generally 5432)
        params.put("port", new Integer(5432));
        //the name of the database to connect to.
        params.put("database", "***");
        params.put("user", "***");         //the user to connect with
        params.put("passwd", "***");               //the password of the user.

        FeatureSource fsBC = null;
        DataStore pgDatastore;
        try {
            pgDatastore = DataStoreFinder.getDataStore(params);

            fsBC = pgDatastore.getFeatureSource("pumas_sections");
            System.out.println("bc count: " + fsBC.getCount(Query.ALL));
            } catch (IOException e) {
            e.printStackTrace();
        }

        MapContext map = new DefaultMapContext();
        map.setTitle("Quickstart");
        map.addLayer(fsBC, null);

        //...
    }

    public static void main(String[] args) throws Exception {
            test t = new test();
    }
} 
```

错误：

```
Exception in thread "main" java.lang.UnsupportedOperationException: No
style method for com.vividsolutions.jts.geom.Geometry
        at org.geotools.styling.SLD.createSimpleStyle(SLD.java:1967)
        at org.geotools.styling.SLD.createSimpleStyle(SLD.java:1923)
        at org.geotools.map.DefaultMapContext.checkStyle(DefaultMapContext.java:389)
        at org.geotools.map.DefaultMapContext.addLayer(DefaultMapContext.java:222)
        at org.geotools.tuto.test.<init>(test.java:45)
        at org.geotools.tuto.test.main(test.java:52) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-04-03T03:57:59.127

我确实尝试了您的代码，并且它有效。我用的是geotools 10，得到fsBC后，我用的是MapContent。

```
Style style = SLD.createSimpleStyle(fsBC.getSchema());
Layer layer = new FeatureLayer(fsBC, style);
MapContent map =new MapContent();
map.addLayer(layer); 
```

希望这有用。

# c++ - 调用 delete [] 时出现 C++ HEAP 错误

> ID：10042357
> 
> 赞同：1
> 
> 时间：2012-04-06T10:38:03.987
> 
> 标签：c++, arrays, heap-memory, delete-operator

我不断收到 VS 2100 中的错误“CRT 检测到应用程序在堆缓冲区开始之前写入内存”

任何人都可以帮忙吗？我的 int Main 一直在底部。`delete []`在 operator= 函数上运行命令时发生错误

```
#include "intset.h"
const int MAXINITIALSIZE = 5;
int IntSet::numOfArray = 0;

IntSet::IntSet(int a, int b, int c, int d, int e)
{
    numOfArray++;
    int tempArray[] = {a, b, c, d, e};
    size = determineHighest(tempArray) + 1; //determines largest int
    cout << "size is " << size << endl;

    arrayPtr = new bool[size]; //creates array of bool

    for (int i = 0; i < size; i++) //fill bool array 
    {
        arrayPtr[i]= false;  //arrayptr is a bool pointer created in the header
    }   

    for (int i = 0; i < MAXINITIALSIZE; i++)
    {
        arrayPtr[tempArray[i]]= true;
    }

        for (int i = 0; i < size; i++)
    {
        cout << &arrayPtr[i] << endl;
    }
}
IntSet::IntSet(const IntSet &intsetObject)
{
    numOfArray++;
    size = intsetObject.size;

    arrayPtr = new bool[size];

    for (int i = 0; i < size; i++)
    {
        if (intsetObject.arrayPtr[i])
            arrayPtr[i] = intsetObject.arrayPtr[i];
    }
}
IntSet::~IntSet()
{
    --numOfArray;
    delete [] arrayPtr;     
    arrayPtr = NULL;
}

int IntSet::determineHighest(int tempArray[])
{
    int temp = tempArray[0];    
    for (int i = 1; i < MAXINITIALSIZE; i++)
    {
        if (tempArray[i] > temp)
            temp = tempArray[i];
        else
            continue;       
    }
    return temp;
}

IntSet& IntSet::operator=(const IntSet &intsetObject) //ask about IntSet&
{
    cout << "inside operator=" << endl;
    if (&intsetObject != this)
    {
        for (int i = 0; i < size; i++)
        {
            cout << &arrayPtr[i] << endl;
        }
        delete [] arrayPtr;   //HEAP ERROR HERE!
        for (int i = 0; i < size; i++)
        {
            cout << &arrayPtr[i] << endl;
        }
        size = intsetObject.size
        arrayPtr = new bool[size]();
        for (int i = 0; i < size; i++)
        {
            if (intsetObject.arrayPtr[i])
                arrayPtr[i] = intsetObject.arrayPtr[i];
        }
    }
    return *this;
}
ostream& operator<<(ostream &output, const IntSet &intsetObject)
{
    output << "{ ";
    for (int i = 0; i < intsetObject.size; i++)
    {
        if (intsetObject.arrayPtr[i] == true)
        {
            output << i << " ";
        }
        else 
            continue;
    }
    output << "}";
    return output;
}

//main

#include "intset.h"

int main() {

    IntSet object2(9);   

    IntSet object4(3,6);

    object4 = object2;

   return 0;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-06T10:48:52.907

仅当使用负索引访问 arrayPtr 时才会发生这种情况。我怀疑您的 a,b,c,d,e 的默认值在 for 的声明中为 -1 `IntSet::IntSet`，因此它在 set-true 循环中写入 arrayPtr[-1] 。检查`tempArray[i] >= 0`那里。

此外，删除后无法打印数组，因此您应该在删除后删除这些行，尽管它们应该是“无害的”，因为只会打印垃圾，但谁知道 - 操作系统可以释放页面包含数组，它可能会导致您的程序出现段错误。

最后，您不应该`if (intsetObject.arrayPtr[i])`在复制 &`=`运算符中进行测试。否则，源数组中的所有“假”元素在目标数组中**都未**`new bool[size]`初始化（不会将数组初始化为 all ）。**`false`**

# java - 如何从 Java EE Web 应用程序运行外部应用程序？

> ID：10042360
> 
> 赞同：2
> 
> 时间：2012-04-06T10:39:09.293
> 
> 标签：java, windows, tomcat, service, external

我一直在开发一个仅供 Intranet 使用的 Web 应用程序。我使用 Apache 7 和 Windows Server 2003。

在我的一个页面中，我需要打开一个外部应用程序，我们可以在 C:/Program Files/etc... 中找到它，其中一些参数已经初始化。当然，用户必须使用服务器上的 Web 应用程序才能使其工作（就是这种情况）。

要打开应用程序，我使用`ProcessBuilder`对象。

**问题：**

当我在本地使用 Eclipse 并手动运行服务器时，它运行良好。任何应用程序都可以从网页打开自己。但是当我使用 tomcat windows 服务（这就是我们想在服务器上使用的）时，它永远不会启动。或者更具体地说，它直接启动和停止应用程序。没有抛出 java 错误并且`process.waitFor()`退出值为 0。事实是我们可以通过 Web 应用程序运行进程（我尝试运行简单的批处理文件），但是当涉及 UI 时，它永远不会出现。

同样，这次在服务器上，如果我通过双击或 cmd 启动 tomcat7.exe（我们可以在 %CATALINA_HOME%/bin 目录中找到），将出现 Web 应用程序中的 UI。如果我使用 services.msc 或 tomcat7w.exe 或`tomcat7 start`通过 cmd 启动它，它不会。

我想到了几件事：

*   使用另一个用户启动服务
*   更改服务的启动方式（StartMode：jvm，java。我没有成功使用 exe）我多次阅读[Tomcat 7 Windows Service How-To ，但没有找到任何解决问题的方法。](http://tomcat.apache.org/tomcat-7.0-doc/windows-service-howto.html)

你知道发生了什么，以及如何解决这个问题吗？将tomcat作为服务运行和从命令行运行之间的最大区别是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T09:15:56.977

选项 1 如果您打开服务的属性窗口，请转到“登录”选项卡，然后选中“允许服务与桌面交互”复选框，您将获得所需的行为。此外，根据您要运行的应用程序，您可能需要更改登录帐户。

## 请参阅[从 Windows 服务启动 GUI 应用程序 - 窗口不出现](https://stackoverflow.com/questions/1109271/launching-gui-app-from-windows-service-window-does-not-appear)

选项 2 您是否尝试启动 cmd 并使用 start /c "c:\path to\exe"

在 cmd.exe 中输入帮助开始

* * *

选项 3

您将需要一个不作为服务运行的守护程序服务。Windows 对服务应用程序施加了某些限制。

这个睡眠应用可以由tomcat或其他你自己启动。它可以在端口上侦听或轮询文件夹以获取新文件，并且当它有工作要做时，它会启动您想要的应用程序。通过端口或文本文件，您可以发送参数。

# nhibernate - 如何使用 NHibernate 自动映射？

> ID：10042361
> 
> 赞同：0
> 
> 时间：2012-04-06T10:39:31.897
> 
> 标签：nhibernate, automapper

我正在寻找可以在 nhibernate 中为我进行映射的软件。我查看了这个，但我发现的唯一东西是流利的工具。我找不到任何清洁 nhibernate 的东西。

他们是这样的工具吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T10:56:21.797

Nhiberante 3.2 具有内置映射[功能](http://fabiomaulo.blogspot.com/2011/04/nhibernate-32-mapping-by-code_13.html)。

另一种方法是使用[符合库](http://code.google.com/p/codeconform/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-06T15:35:42.540

只是为了补充其他答案，有诸如[Visual Nhibernate](http://www.slyce.com/VisualNHibernate/)之类的工具可以检查您的数据库并生成您的映射，同时为您提供自定义代码生成过程的钩子。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-06T13:10:45.350

您可能还想看看[NHibernate Mapping Generator](http://nmg.codeplex.com/)

# c - 请就我应该使用哪种数据结构提供建议

> ID：10042366
> 
> 赞同：2
> 
> 时间：2012-04-06T10:40:36.357
> 
> 标签：c, data-structures, struct

代码在 C 中。我有两种类型的对象 ( `structs`) 具有父子关系，一种父类型可以有`0`或多个子类型，一个子不能有自己的子。我需要`O(1)`父查找（通过`uID`结构成员）和子查找（也通过`uID`struct member) 不知道谁是它的父级。一旦我有一个指向父母的指针，我希望能够遍历它的孩子。当我有一个指向孩子的指针时，我希望能够知道谁是它的父母。在程序执行期间，可以删除或插入任何子项或任何父项，并且子项可以更改其父项。当父母被移除时，它的孩子也应该被移除。所有这一切都应该在多线程环境中完成，所以我需要线程安全的读取（我将使用只读锁进行密钥搜索，使用读写锁进行插入/删除/重新设置）。你会推荐什么数据结构？

添加：

目前我正在尝试使用 uthash 库（[http://uthash.sourceforge.net/](http://uthash.sourceforge.net/)）来实现它：

```
struct parent
{
    uint64_t uid;
    time_t mtime;
    struct ldata data;
    struct child *first_child;
    UT_hash_handle hh;
};

struct child
{
    uint64_t uid;
    time_t mtime;
    struct ldata data;
    struct parent *parent;
    UT_hash_handle hh;
};

struct parent *parents_list = NULL;
struct child *children_list = NULL; 
```

问题是当一个新孩子到来时，它最终会被排在后面，并且与它的“兄弟”没有联系。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T10:55:22.840

怎么样：

1.  父母的哈希表。
2.  一个单独的儿童哈希表。
3.  每个孩子都有一个到其父母的链接。
4.  每个孩子中的一个链接到它的下一个和上一个兄弟姐妹（双链表）。
5.  每个父级到其第一个子级的链接。

哈希表可能不是完全 O(1) 查找，但它们会很接近。您可能可以为它们使用现有的、完善的库。

在线程安全方面，您可以为哈希（用于项目插入/删除）设置互斥锁，在每个父级中也可以使用互斥锁，以便在操作它或其任何子级时使用。当然要当心死锁：例如，如果更改孩子的父母需要同时锁定新父母和新父母，请确保按照一致的顺序进行操作！

当然，找到无锁结构会更好，但我不能在那里给你真正的建议，除了研究，看看你是否能找到任何似乎合适的结构。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-06T10:49:06.903

如果我理解正确：

```
struct child;  /* Forward declaration */

struct parent {
    int child_count;
    /* Other info */
    struct child child[];  /* Flex array, must be the last field */
};

struct child {
    struct parent *parent;
    /* Other info */
};

struct parent *parent_registry;  /* Array of parents, index is the ID */
struct child *child_registry;  /* Array of children, index is the ID */ 
```

也许这太简单了，特别是在重新设置父级时，因为您必须移动数组切片，但这可能是一个好的开始。或者您可以预先分配（即摊销分配）并将所有空闲数组位置链接在一起（通过数组索引）以最小化内存移动。

# python - Python：（带替换采样）：从集合中提取 DISSIMILAR N 元组的有效算法

> ID：10042375
> 
> 赞同：0
> 
> 时间：2012-04-06T10:41:17.443
> 
> 标签：python, algorithm, big-o

我有一组项目，我想从中选择 DISSIMILAR 元组（稍后将详细介绍不同元组的定义）。该集合可能包含数千个项目，但通常仅包含数百个。

我正在尝试编写一个通用算法，该算法将允许我从原始集合中选择 N 个项目来形成一个 N 元组。新的一组选定的 N 元组应该是**DISSIMILAR**。

当**且**仅**当**：

 ***   出现在 A 中的每一对（2 元组）都不会出现在 B 中

注意：对于这个算法，如果一个 2 元组（对）包含相同的元素，则认为它是 SIMILAR/IDENTICAL，即 (x,y) 被认为与 (y,x) 相同。

这是经典[Urn Problem](http://en.wikipedia.org/wiki/Urn_problem)的（可能的变体） 。该算法的简单（伪代码）实现将类似于以下内容

```
def fetch_unique_tuples(original_set, tuple_size):
    while True:
        # randomly select [tuple_size] items from the set to create first set
        # create a key or hash from the N elements and store in a set
        # store selected N-tuple in a container
        if end_condition_met:
            break 
```

我认为这不是最有效的方法——虽然我不是算法理论家，但我怀疑这个算法运行的时间不是***O(n)*** ——事实上，它可能更有可能是***O （n！）***。我想知道是否有更有效的方法来实现这种算法，最好是减少时间到***O(n)***。

实际上，正如 Mark Byers 所指出的，还有第二个变量`m`，即被选择元素数量的大小。这个（即`m`）通常在 2 到 5 之间。

关于示例，这将是一个典型的（尽管缩短了）示例：

```
original_list = ['CAGG', 'CTTC', 'ACCT', 'TGCA', 'CCTG', 'CAAA', 'TGCC', 'ACTT', 'TAAT', 'CTTG', 'CGGC', 'GGCC', 'TCCT', 'ATCC', 'ACAG', 'TGAA', 'TTTG', 'ACAA', 'TGTC', 'TGGA', 'CTGC', 'GCTC', 'AGGA', 'TGCT', 'GCGC', 'GCGG', 'AAAG', 'GCTG', 'GCCG', 'ACCA', 'CTCC', 'CACG', 'CATA', 'GGGA', 'CGAG', 'CCCC', 'GGTG', 'AAGT', 'CCAC', 'AACA', 'AATA', 'CGAC', 'GGAA', 'TACC', 'AGTT', 'GTGG', 'CGCA', 'GGGG', 'GAGA', 'AGCC', 'ACCG', 'CCAT', 'AGAC', 'GGGT', 'CAGC', 'GATG', 'TTCG']

# Select 3-tuples from the original list should produce a list (or set) similar to:

    [('CAGG', 'CTTC', 'ACCT')
     ('CAGG', 'TGCA', 'CCTG')
     ('CAGG', 'CAAA', 'TGCC')
     ('CAGG', 'ACTT', 'ACCT')
     ('CAGG', 'CTTG', 'CGGC')
     ....
     ('CTTC', 'TGCA', 'CAAA')
    ] 
```

**[[编辑]]**

实际上，在构建示例输出时，我已经意识到我之前给 UNIQUENESS 的定义是不正确的。由于这一发现，我更新了我的定义并引入了一个新的 DISSIMILARITY 指标。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T12:08:30.237

这是算法的简单实现。我也不是理论家，但我喜欢算法。我认为这个简单的实现是 O(n^m)，其中 m 是组合的维度 + 一些东西，应该小于 O(n!)。

```
def combine(elements,n=3):
    from itertools import combinations,product,ifilter

    hashes=[]
    combs=[]
    for p in combinations(elements,n):
        if len(set(p)) == 3 and not any(i in hashes for i in [sorted(i) for i in combinations(p,2)]):
            combs.append(p)
            hashes.extend([sorted(i) for i in combinations(p,2)])
    return combs

elements = ['CAGG', 'CTTC', 'ACCT', 'TGCA', 'CCTG', 'CAAA', 'TGCC', 'ACTT', 'TAAT', 'CTTG', 'CGGC', 'GGCC', 'TCCT', 'ATCC', 'ACAG', 'TGAA', 'TTTG', 'ACAA', 'TGTC', 'TGGA', 'CTGC', 'GCTC', 'AGGA', 'TGCT', 'GCGC', 'GCGG', 'AAAG', 'GCTG', 'GCCG', 'ACCA', 'CTCC', 'CACG', 'CATA', 'GGGA', 'CGAG', 'CCCC', 'GGTG', 'AAGT', 'CCAC', 'AACA', 'AATA', 'CGAC', 'GGAA', 'TACC', 'AGTT', 'GTGG', 'CGCA', 'GGGG', 'GAGA', 'AGCC', 'ACCG', 'CCAT', 'AGAC', 'GGGT', 'CAGC', 'GATG', 'TTCG']
print combine(elements) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-06T19:26:03.890

我尝试了另一种方法——组合组合。它似乎工作得很快：

```
def fetch_unique_tuples(original_set, tuple_size):
    from itertools import combinations

    good = []
    used = []
    for i in combinations(original_set,tuple_size):
        lst = list([tuple(sorted(j)) for j in combinations(i,2)])
        if not any(l in used for l in lst):
            used.extend(lst)
            good.append(tuple(sorted(i)))
    return sorted(good)

elements = ['CAGG', 'CTTC', 'ACCT', 'TGCA', 'CCTG', 'CAAA', 'TGCC', 'ACTT', 'TAAT', 'CTTG', 'CGGC', 'GGCC', 'TCCT', 'ATCC', 'ACAG', 'TGAA', 'TTTG', 'ACAA', 'TGTC', 'TGGA', 'CTGC', 'GCTC', 'AGGA', 'TGCT', 'GCGC', 'GCGG', 'AAAG', 'GCTG', 'GCCG', 'ACCA', 'CTCC', 'CACG', 'CATA', 'GGGA', 'CGAG', 'CCCC', 'GGTG', 'AAGT', 'CCAC', 'AACA', 'AATA', 'CGAC', 'GGAA', 'TACC', 'AGTT', 'GTGG', 'CGCA', 'GGGG', 'GAGA', 'AGCC', 'ACCG', 'CCAT', 'AGAC', 'GGGT', 'CAGC', 'GATG', 'TTCG']
uniques = fetch_unique_tuples(elements, 3)
print len(uniques) 
```

如果您愿意失去 len() 的功能，可以轻松转换为生成器。

*编辑*：添加了额外的 sorted() 以使所有元组和最终列表 alpha。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-06T21:07:23.523

假设您的意思是 M N 元组的集合必须成对不同，似乎使用图表来跟踪“禁止”对是要走的路。

```
import random
def select_tuples(original, N, M):
  used = {}
  first = random.sample(original, N)
  updateUsed(used, first)
  answer = [first]
  for i in xrange(M):
    notFound = True
    while notFound:
      remaining = set(original)
      thisTuple = []
      for j in xrange(N):
        if not remaining:
          break
        candidate = random.choice(remaining)
        remaining.remove(candidate)
        for adjacent in used[candidate]:
          remaining.remove(adjacent)
      else:
        notFound = False
    answer.append(thisTuple)
    updateUsed(used, thisTuple)
  return answer

def updateUsed(used, selected):
  for x in selected:
    if x not in used:
      used[x] = []
    for y in selected:
      if y != x:
        used[x].append(y) 
```

这和`O(MN^2)` 我想的一样。我怀疑你能不能做得比这更好，因为对于`M`你引入的每个`N*(N-1)/2`你不能再使用的禁止对的元组。**

# ruby-on-rails-3 - Rails 3路由错误与命名空间和不可数名词一起

> ID：10042380
> 
> 赞同：1
> 
> 时间：2012-04-06T10:42:06.350
> 
> 标签：ruby-on-rails-3, routing, namespaces, restful-url

好吧，这是我第一次这样做。在 routes.rb 我有以下内容：

```
namespace :admin do
  resources :news
end 
```

我在 rake 路线之后有这个：

```
admin_news_index GET /admin/news(.:format) admin/news#index
                 POST /admin/news(.:format) admin/news#create
  new_admin_news GET /admin/news/new(.:format) admin/news#new
 edit_admin_news GET /admin/news/:id/edit(.:format) admin/news#edit
      admin_news GET /admin/news/:id(.:format) admin/news#show
                 PUT /admin/news/:id(.:format) admin/news#update
                 DELETE /admin/news/:id(.:format) admin/news#destroy 
```

如您所见，“new”操作的路径是 new_admin_news_path，不幸的是，当我访问该路径时，弹出如下内容：

```
No route matches {:action=>"show", :controller=>"admin/news", :id=>#<News id: nil, news_type_id: nil, title: nil, content: nil, views: nil, status: nil, start_date: nil, end_date: nil, created_at: nil, updated_at: nil, news_key: nil>} 
```

我在想“新闻”是一个不可数名词，这可能是问题所在。所以我将 config/initializers/inflections.rb 更改为：

```
ActiveSupport::Inflector.inflections do |inflect|
   inflect.uncountable %w( fish sheep news )
end 
```

显然，它不起作用......

我应该怎么办？有什么建议么？

# linux - 将html转换为图像的程序

> ID：10042388
> 
> 赞同：15
> 
> 时间：2012-04-06T10:42:27.153
> 
> 标签：linux, html-rendering

是否有现成的程序，我可以从我的 Web 应用程序运行，将 HTML 文件转换为图像？最好使用Webkit，还是其他成熟的浏览器引擎？

我试过[wkhtmltoimage](http://code.google.com/p/wkhtmltopdf/downloads/list)，但它不能正确渲染背景（而 wkhtmltopd 工作正常）。有没有一个有效的？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-04-07T12:16:32.483

**方法A**

使用[phantomjs](http://phantomjs.org/)

```
$ phantom rasterize.js http://www.google.com google.png 
```

[下载并解压缩[二进制存档](https://phantomjs.org/download.html)。`rasterize.js`在`example`目录中。]

**方法B**

使用[chrome](https://developers.google.com/web/updates/2017/04/headless-chrome#screenshots)（在 上测试`MacOSX`，应该可以在其他平台上使用）

```
$ alias chrome='/Applications/Google\ Chrome.app/Contents/MacOS/Google\ Chrome'
$ chrome --headless --disable-gpu --screenshot=google.png http://www.google.com 
```

**方法 C**

使用[webkit2png](http://www.paulhammond.org/webkit2png/)（仅限 macOS）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2020-07-27T15:49:24.530

只需使用Firefox

```
firefox --headless --screenshot google.com 
```

或访问[这里](https://support.mozilla.org/en-US/kb/firefox-screenshots)

# parsing - 解析速度整数时出现 NumberFormatException

> ID：10042389
> 
> 赞同：0
> 
> 时间：2012-04-06T10:42:33.827
> 
> 标签：parsing, velocity

`//$colspan`是字符串中的数字（例如`$colspan="5"`）。解析时，有时会给出**NumberFormatException**。任何帮助将不胜感激。

```
#set($Integer=0)       
#if($Integer.parseInt($colspan)>1)
 //some code here.....
#end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-06T16:04:58.617

为什么不使用 VelocityTools 项目中的 MathTool 或 NumberTool。

# objective-c - 多线程从网站下载数据

> ID：10042391
> 
> 赞同：0
> 
> 时间：2012-04-06T10:42:40.707
> 
> 标签：objective-c, multithreading, grand-central-dispatch

我正在做一个应用程序，它通过对网站的请求下载信息，给我返回 HTML 并解析这些数据，我获得了我的应用程序信息。为了下载我正在使用的这些数据，使用带有请求最后需要的所有参数的 url。

```
NSData *data = [NSData dataWithContentsOfURL:url];

NSString* htmlString;
htmlString = [[NSString alloc] initWithData:data encoding:NSASCIIStringEncoding];
[self parserHTML:htmlString];  // here I fill a NSArray with the info parsed
[self searchSomething:htmlString];  // continue filling the NSArray

... 
```

下载数据和解析 HTML 的任务需要很长时间。

我能做些什么来加快速度？中央大调度？如果是这样，我该如何使用它，因为我正在使用它并且它不起作用，因为 NSSArray 是空的：

```
dispatch_queue_t downloadQueue = dispatch_queue_create("pharmacy downloader", NULL);
dispatch_async(downloadQueue, ^{ 
    NSData *data = [NSData dataWithContentsOfURL:urlReal];

    NSString* htmlString;
    htmlString = [[NSString alloc] initWithData:data encoding:NSASCIIStringEncoding];
    [self parserHTML:htmlString];  // here I fill a NSArray with the info parsed
    [self searchSomething:htmlString];  // continue filling the NSArray
});
dispatch_release(downloadQueue); 
```

如果我不使用 GCD，它可以工作。可能是什么问题？

谢谢你的帮助。我彻底迷路了！！！:S

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-06T10:50:53.417

请改用[NSURLDownload](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSURLDownload_Class/Reference/Reference.html)或[NSURLConnection](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/nsurlconnection_Class/Reference/Reference.html)。

对于一些示例代码，您可以查看[QuickLookDownloader](https://developer.apple.com/library/mac/#samplecode/QuickLookDownloader/Introduction/Intro.html#//apple_ref/doc/uid/DTS40009082)

# combobox - SEAM 参数化输入文本

> ID：10042393
> 
> 赞同：1
> 
> 时间：2012-04-06T10:43:04.533
> 
> 标签：combobox, seam, textinput, parameterized

我有一个问题`<h:inputText>`。特别是我在 xhtml 页面上有一系列输入文本、组合框、日历。

它们中的每一个都具有诸如 follow `value="#{myBean.first}"`、等的 value 属性`value="#{myBean.second}"`。

这样，myBean 必须有大量的 setter 和 getter。我只需要使用一个 setter 和一个 getter，如下所示：

```
public void setValue(String theId, String theValue){}
public String getValue(String theId){} 
```

因此，在这两种方法中，我使用由用户插入的带有 key=theId 和 value=theValue 的 Map。

我的问题是如何在 xhtml 页面中做到这一点？
这就是价值标签的方式吗？将参数传递给 setter/getter 是否有特别注意事项？

请注意，添加到 inputText 的“参数”可能是一个对象。

我能怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T15:41:43.050

如果要将键/值对存储在 Map 中，可以直接在 UI 组件中引用该映射。假设你的 backing bean 有这个：

```
public Map<String, Object> getDataMap() { return dataMap; }
public void setDataMap(Map<String,Object> dataMap) { this.dataMap = dataMap; } 
```

您的 xhtml 可能如下所示：

```
<h:inputText value="#{myBean.dataMap['first']}" />

<h:inputText value="#{myBean.dataMap['second']}" /> 
```

# linux - 插孔音频以生成虚拟声卡并在其中输入

> ID：10042394
> 
> 赞同：2
> 
> 时间：2012-04-06T10:43:16.480
> 
> 标签：linux, audio, alsa, jack

我在插孔中通过网络接收 4 通道输入。并喜欢将此路由到不是插孔客户端的程序。在程序设置中可以选择要读取的声卡。所以要将音频从插孔路由到这个程序，我需要一个中间声卡。我觉得这一定是可能的，不是吗？

# .net - 从 .net Web 应用程序访问 Outlook Web 服务的凭据

> ID：10042397
> 
> 赞同：0
> 
> 时间：2012-04-06T10:43:46.850
> 
> 标签：.net, outlook

从部署在 Intranet 上的 .net Web 应用程序中：

```
<authentication mode="Windows" />
<identity impersonate="true" /> 
```

在 web.config 中，我需要能够让用户输入日期和时间以及电子邮件地址，并将日期和时间作为约会添加到电子邮件地址的日历中。

为了让事情开始，我想我会尝试访问一个邮箱并获取 10 条消息的主题：

```
ExchangeService myService = new ExchangeService(ExchangeVersion.Exchange2007_SP1);

myService.Credentials = new WebCredentials("jsmith", "mypassword");

myService.AutodiscoverUrl("fred.bloggs@mycompany.com");

FindItemsResults<Item> myResults = myService.FindItems(WellKnownFolderName.Inbox, new ItemView(10)); 
```

什么样的作品。我得到了一个包含 10 个电子邮件主题的列表 - 但是，无论我将谁的电子邮件地址作为 AutodiscoverUrl 方法的参数输入 - 我最后 10 封电子邮件的 10 个主题总是被返回。我怎样才能访问 Fred Bloggs 的电子邮件，当我做到这一点时，访问他的日历（这是我真正需要做的）并输入约会？谢谢你的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-06T14:03:09.180

您作为参数提供的电子邮件`myService.AutodiscoverUrl`仅用于查找服务。因此，对于所有电子邮件，您可能会为来自同一域的所有电子邮件获得相同的服务。要访问其他用户的收件箱，您需要转到他们的文件夹（如果您有适当的权限）。

```
Microsoft.Exchange.WebServices.Data.FolderId _cal = new Microsoft.Exchange.WebServices.Data.FolderId(WellKnownFolderName.Inbox, new Mailbox("fred.bloggs@mycompany.com"));
Folder rootfolder = Folder.Bind(myService,  _cal);
FindItemsResults<Item> myResults = rootfolder.FindItems(new ItemView(10)); 
```

# ruby-on-rails - 动态 f.collection_select 我如何调用 javascript 函数

> ID：10042400
> 
> 赞同：0
> 
> 时间：2012-04-06T10:44:06.137
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

这是我的代码，在此我想在某些条件下调用 java 脚本函数，例如如果 a = 1 比调用 hi() 函数和 a = 2 比调用 hello() 函数

```
<%= f.collection_select :ser_id, @ser, :id, :name, :prompt => true -%> 
```

Javascript函数是

```
function hi()
{
alert("hi");
}

function hello()
{
alert("hello");
} 
```

所以现在给我一些想法，我怎样才能根据给定的条件调用这些函数。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T10:51:11.780

尝试 ：

```
<% fun_name = "" %>
<% fun_name = (a==1 ? "eval('hi()')" : "eval('hello()')") if a==1 || a==2 %>
<%= f.collection_select :ser_id, @ser, :id, :name, :prompt => true, {:onchange => fun_name } -%> 
```

# java - 安卓字符串提取

> ID：10042403
> 
> 赞同：1
> 
> 时间：2012-04-06T10:44:23.130
> 
> 标签：java, android

我有一个抽象类，其中包含设置标题文本的方法。看起来像：

```
TextView header = (TextView) findViewById(R.id.hTitle);
header.setText(getString(this.getHeaderStringID())); 
```

此时，覆盖抽象 getHeaderStringID() 的方法返回整数，例如 0x7f040001。1 我想知道是否有办法利用串联或类似的方法来实现这一点：

```
header.setText(getString(R.string.!getHeaderStringID!)); 
```

在所需的情况下，getHeaderStringID 将返回类似“sAboutHeader”的字符串

2 我是 Java 新手 - 我可以摆脱创建标头对象。如果我不这样做，eclipse 验证器会说找不到合适的方法并且不允许我启动应用程序。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T10:58:59.410

如果我理解正确，我认为你应该使用反射：

```
try {
        Field idField = R.String.class.getDeclaredField(getHeaderStringID());
        int value = idField.getInt(idField);
    } catch (Exception e) {
        e.printStackTrace();
        return -1;
    } 
```

value 变量可以作为 getString() 函数的输入。

# c# - 将对象设置为 null 而不将其作为 ref 传递

> ID：10042406
> 
> 赞同：1
> 
> 时间：2012-04-06T10:44:30.400
> 
> 标签：c#

以下行为的 C# 语言规范是什么。属性的值被保留，但新实例（null 或新对象）不会更新为实际参数。除了更改它指向的对象外，它基本上起到 ref 的作用。

主函数中的对象保持不变（非空），但字符串属性已更改为“Hello World”

```
class Program
{
    class MyClass
    {
        public string str;
    }

    static void MyMethod(MyClass obj)
    {
        obj.str = "Hello World";
        obj = null;
    }

    static void Main(string[] args)
    {
        MyClass o = new MyClass();
        o.str = "Hello";
        Console.WriteLine(o.str);
        MyMethod(o);

        Console.WriteLine(o.str); // prints "Hello World"
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-06T10:54:51.500

在 .NET 语言中，对象引用是按值传递的。

那么这是什么意思？从概念上讲，您的代码与此相同，但指针明确：

```
static void MyMethod(MyClass *obj)
{
    obj->str = "Hello World";
    obj = NULL;
}

static void Main(string[] args)
{
    MyClass *o = new MyClass();
    o->str = "Hello";
    Console.WriteLine(o->str);
    MyMethod(o);

    Console.WriteLine(o->str); // prints "Hello World"
} 
```

传递给的参数`MyMethod`是指针的值`o`，指向一个`MyClass`实例。您可以取消引用指针来设置 的值`str`，但将实际指针值设置为 null 不会影响调用方法中的变量。

您可以通过以下方式通过引用传递引用：

以下行为的 C# 语言规范是什么。属性的值被保留，但新实例（null 或新对象）不会更新为实际参数。除了更改它指向的对象外，它基本上起到 ref 的作用。

```
class Program
{
    class MyClass
    {
        public string str;
    }

    static void MyMethod(ref MyClass obj)
    {
        obj.str = "Hello World";
        obj = null;
    }

    static void Main(string[] args)
    {
        MyClass o = new MyClass();
        o.str = "Hello";
        Console.WriteLine(o.str);
        MyMethod(ref o);

        Console.WriteLine(o.str); // throws NullReferenceException, o is now null
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-06T10:54:02.103

您正在通过引用传递对象值。这允许您更改对象中属性的值，并且更改将在调用方法中看到。`obj`但是，在调用方法中不会看到对变量所指内容的更改。

如果您希望在整个过程中更改变量引用，则需要通过引用传递引用。为此，您应该将方法声明更改为：

```
static void MyMethod(ref MyClass obj){...} 
```

参考文档可以在[这里找到](http://msdn.microsoft.com/en-us/library/14akc2c7%28v=vs.110%29.aspx)

# string - powershell：删除 System.String 的实例？

> ID：10042407
> 
> 赞同：0
> 
> 时间：2012-04-06T10:44:36.307
> 
> 标签：string, variables, powershell

如何删除 System.String 变量的实例？

$Servers = "服务器","本地主机"

我想删除本地主机，有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-06T10:59:27.453

您可以设置为`$null`Array 条目（您必须知道索引）：

```
$Servers.Set(1, $NULL) 
```

如果您需要的返回值`[string]` 不是`[objtect[]]`

```
[string]$Servers = $Servers[0] # need always knowing the indexs 
```

如果数组计数 > 2，您需要执行以下操作：

```
$Servers = $servers | ? { $_ -ne "localhost" } 
```

或简而言之

```
$servers = $servers -ne "localhost" 
```

或者您可以转换为`ArrayList`：

```
[System.Collections.ArrayList]$servers = $servers
$servers.Remove("localhost") 
```

# opengl - glEnable(GL_DEPTH_TEST) - 没有渲染

> ID：10042412
> 
> 赞同：18
> 
> 时间：2012-04-06T10:44:56.817
> 
> 标签：opengl

在 OpenGL 中，我展示了一个简单的模型。当我启用深度缓冲区时，

```
glEnable(GL_CULL_FACE);
glEnable(GL_DEPTH_TEST);
glDepthMask(GL_TRUE); 
```

一切都消失了。我阅读[了这个](http://www.opengl.org/archives/resources/faq/technical/depthbuffer.htm)OpenGL 常见问题解答，但它对我没有帮助。

我的透视设置是：`angle=45deg`, `near=1`, `far=40`, 我把模型放在`(0,0,0)`, 我把眼睛放在`(0,0,4)`. 没有 Z 缓冲区，我*可以*看到模型。

有什么问题？

* * *

## 回答 #1

> 赞同：56
> 
> 时间：2012-04-06T12:03:52.980

你确定你清除了深度缓冲区吗？

```
glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT);
                              ^^^^^^^^^^^^^^^^^^^ 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2016-11-26T08:39:51.083

如果其他答案不起作用，请尝试[评论](https://stackoverflow.com/questions/10042412/glenablegl-depth-test-nothing-rendered/40816523#comment47079174_10043242)中提到的[user886079](https://stackoverflow.com/users/886079/user886079)

> 如果上述方法不起作用，请在 gluPerspective、glFrustum 或 glOrtho 函数中检查您的近平面。如果设置为 0，深度缓冲似乎不起作用。

我几乎尝试了所有方法，但无法解决重叠问题。我已经把接近值 0.0f。我将其更改为 0.01f，现在的结果就是它需要的样子。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-03-08T00:26:34.090

如果上述以下答案不起作用，请尝试以下操作：

*   如果您`GL_CULL_FACE`启用了检查模型顶点的缠绕顺序。`(LH)`与`(RH)`。
*   如果`GL_DEPTH_TEST`启用；然后根据模型视图投影矩阵以及相机的位置和视图方向检查平截头体的平面。
*   如果`GL_BLEND`启用；检查对象的渲染顺序与`z-buffer`.

# html - 如何将“表格”放置在网页中间？

> ID：10042413
> 
> 赞同：5
> 
> 时间：2012-04-06T10:45:06.583
> 
> 标签：html, css, webpage

我有一个非常基本的表格结构放置在网页的中间/中心。我在下面有一个代码，我知道它是不完整的，因为我在构建 HTML 部分时很糟糕，请帮助我

```
<div align="center" style="vertical-align:bottom">
<div align="center" style="vertical-align:bottom">
<table>
<tr><td colspan="2"></td></tr>
<tr><td>Name</td><td>J W BUSH</td></tr>
<tr><td>Proficiency</td><td>PHP</td></tr>
<tr><td>COmpany</td><td>BLAH BLAH</td></tr>
</table>
</div>
</div> 
```

还请解释在实现这种结构化时应用属性和 CSS 背后的概念。以便我可以在进一步的学习中使用它......

我在 HTML-CSS 的使用方面完全是新手和笨蛋......所以我请求所有技术人员和极客们忍受我关于 HTML-CSS 结构的愚蠢问题......请不要留下让我士气低落的评论继续学习“这是作业吗……”或“去补习班”等……

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-04-06T11:02:11.867

最短和最简单的答案是：您不应该在网页中垂直居中。创建 HTML 和 CSS 时根本没有考虑到这一点。它们是文本格式语言，而不是用户界面设计语言。

也就是说，这是我能想到的最好的方法。但是，这在 Internet Explorer 7 及更低版本中不起作用！

```
<style>
  html, body {
    height: 100%;
  }
  #tableContainer-1 {
    height: 100%;
    width: 100%;
    display: table;
  }
  #tableContainer-2 {
    vertical-align: middle;
    display: table-cell;
    height: 100%;
  }
  #myTable {
    margin: 0 auto;
  }
</style>
<div id="tableContainer-1">
  <div id="tableContainer-2">
    <table id="myTable" border>
      <tr><td>Name</td><td>J W BUSH</td></tr>
      <tr><td>Proficiency</td><td>PHP</td></tr>
      <tr><td>Company</td><td>BLAH BLAH</td></tr>
    </table>
  </div>
</div> 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-04-06T10:50:59.257

试试这个 ：

```
<style type="text/css">
        .myTableStyle
        {
           position:absolute;
           top:50%;
           left:50%; 

            /*Alternatively you could use: */
           /*
              position: fixed;
               bottom: 50%;
               right: 50%;
           */

        }
    </style> 
```

# lambda - 如何强制python3按值传递？

> ID：10042419
> 
> 赞同：1
> 
> 时间：2012-04-06T10:46:15.747
> 
> 标签：lambda, python-3.x, immutability

我的意图是创建一个字典，其中的键是原语，其值是返回字符串的零参数函数。（这是实现 VM 的更大项目的一部分。）其中某些功能非常重要，需要手动创建和分配。那些工作正常。然而，其他人似乎适合自动生成。

我的第一次尝试失败了：

```
>>> regs = ['a', 'b', 'c', 'x', 'y', 'z']
>>> vals = {i : lambda: r for i, r in enumerate(regs)}
>>> [(k, vals[k]()) for k in vals.keys()]
[(0, 'z'), (1, 'z'), (2, 'z'), (3, 'z'), (4, 'z'), (5, 'z')] 
```

好的; lambda 函数在被调用之前不会读取 r。我又试了一次，试图自己隔离一个值：

```
>>> from copy import copy
>>> vals = {}
>>> i = 0
>>> for reg in regs:
...     r = copy(reg)  # (1)
...     vals[i] = lambda: r
...     i += 1
...
>>> [(k, vals[k]()) for k in vals.keys()]
[(0, 'z'), (1, 'z'), (2, 'z'), (3, 'z'), (4, 'z'), (5, 'z')] 
```

(1) 我认为这一步会创建一个独立变量，当 reg 发生时不会改变。事实证明并非如此。

所以这种尝试显然没有奏效。也许复制，在一个字符串上，是一个 noop？

```
>>> 's' is 's'
True
>>> a = 's'
>>> b = copy(a)
>>> a is b
True
>>> from copy import deepcopy
>>> b = deepcopy(a)
>>> a is b
True 
```

对。复制，在一个字符串上，是一个 noop。Deepcopy 不能解决这个问题。因此，lambda 仍然有对在每个循环中更新的变量的引用，从而导致了这个错误。

我们需要一种不同的方法。如果我将我想要的变量保存到临时函数的静态变量中怎么办？如果每个临时函数都有自己的身份，那应该可以工作......

```
>>> vals = {}
>>> i = 0
>>> for reg in regs:
...     def t():
...             return t.r
...     t.r = reg
...     vals[i] = t
...     i += 1
...
>>> [(k, vals[k]()) for k in vals.keys()]
[(0, 'z'), (1, 'z'), (2, 'z'), (3, 'z'), (4, 'z'), (5, 'z')] 
```

没有。在这一点上，我即将手动处理这一切：

```
>>> vals = {}
>>> vals[0] = lambda: 'a'
>>> vals[1] = lambda: 'b' 
```

……等等。然而，这感觉就像放弃，而且会非常乏味。有没有合适的 Pythonic 方法来完成这项任务？毕竟，我通常喜欢 python 的原因之一是我可以远离手动指针管理；我从没想过我会希望它包含一整套指针工具！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-06T11:24:56.350

闭包*从不*复制，它们既不复制值也不复制引用。相反，他们记住了他们使用的范围和变量，并且总是回到那里。在其他几种语言中也是如此，例如 C#、JavaScript、IIRC Lisp 等等。在其他几种语言中也是如此。这对于一些高级用例很重要（基本上每次你想要几个闭包共享状态时），但它可能会咬一个。例如：

```
x = 1
def f(): return x
x = 2
assert f() == 2 
```

由于 Python 只为函数（以及类和模块，但这并不重要）创建新的作用域，循环变量`reg`只存在一次，因此所有闭包都引用同一个变量。因此，当在循环之后调用时，它们会看到变量假定的最后一个值。

也是如此，只是这一次`t`是共享的——你确实创建了 N 个单独的闭包，每个闭包在其`r`属性中都有正确的值。但是当被调用时，它们会`t`在封闭范围内查找，因此总是会获得对您创建的最后一个闭包的引用。

有几种解决方法。一个是将闭包创建推入一个单独的函数中，这会强制每个闭包引用一个新的专用范围：

```
def make_const(x):
    def const():
        return x
    return const 
```

另一种可能性（更简洁但更模糊）是（ab-）使用默认参数在定义时绑定的事实：

```
for reg in regs:
    t = lambda reg=reg: reg 
```

在其他情况下，您可以使用`functools`，但它似乎不适用于这里。

# c++ - c++ 中是否有类似 java 的 timer 和 timertask 之类的东西？

> ID：10042422
> 
> 赞同：0
> 
> 时间：2012-04-06T10:46:21.630
> 
> 标签：c++, linux, timer, timertask

我不是经验丰富的 C++ 程序员。所以我只想知道如何像java在C++中那样实现定时器和定时器任务。我已经尝试`timer_create`了 timer_create 手册页中的示例，但它没有按照我的要求工作。我希望在特定时间跨度之后触发事件，如果满足特定条件，则应取消计时器。

任何帮助将不胜感激。谢谢，尤维。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2018-03-03T16:05:00.140

我也在寻找类似 TimerTask 的 Java，但是当我遇到这个问题时，我需要一个用于 Windows C++ 的 Java。经过一天的主要研究 SO 和学习传递类成员函数后，我能够整理出一个似乎对我很有效的解决方案。我意识到我回答这个问题已经晚了好几年，但也许仍在寻找这个解决方案的人会发现这很有用。

这是一个仅限 Windows 的解决方案，我使用 Visual Studio C++ 在 Windows 10 上进行了测试。我还在学习 C++，所以如果我违反了任何规则，请保持温和。我意识到例外是基本的，但它们很容易根据您的需要进行定制。我创建了一个类似于 Java 类的 TimerTask 类。您需要从 TimerTask 类派生一个新的用户类，并创建一个“任务”函数，其中包含您希望定期执行的代码。这是 TimerTask 类：

```
--TimerTask.h--
#pragma once
#include <thread>

class TimerTask {
    HANDLE timeoutEvent;
    DWORD msTimeout;
    bool exit = false;
    void* pObj;

    static void taskWrapper(TimerTask* pObj) {
        while (!pObj->exit) {
            DWORD waitResult = WaitForSingleObject(pObj->timeoutEvent, pObj->msTimeout);
            if (pObj->exit)
                break;
            pObj->task();
        }
    }

public:

    TimerTask::TimerTask() {
        timeoutEvent = CreateEvent(NULL, FALSE, FALSE, NULL);
        if (!timeoutEvent) {
            throw "TimerTask CreateEvent Error: ";
        }
    }

    TimerTask::~TimerTask() {
        CloseHandle(timeoutEvent);
    }

    // Derived class must create task function that runs at every timer interval.
    virtual void task() = 0;

    void start(void* pObj, DWORD msTimeout) {
        this->pObj = pObj;
        this->msTimeout = msTimeout;

        std::thread timerThread(taskWrapper, (TimerTask*)pObj);
        timerThread.detach();
    }

    void stop() {
        exit = true;
        if (!SetEvent(timeoutEvent))
            throw "TimerTask:stop(): Error: ";
    }
}; 
```

这是一个使用示例。为简洁起见，我没有包括错误检查。

```
--Test.cpp--
#include "Windows.h"
#include <iostream>
#include "TimerTask.h"

using namespace std;

class KeepAliveTask : public TimerTask {
public:
    void task() {
        cout << "Insert your code here!\n";
    }
};

int main()
{
    cout << "Hello, TimerTask!\n";

    KeepAliveTask keepAlive;
    keepAlive.start(&keepAlive, 1000);  // Execute once per second

    Sleep(5100);    // Pause 5.1s to give time for task thread to run.
    keepAlive.stop();
    Sleep(1000);    // Pause another sec to give time for thread to stop.

    return 0;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-06T11:21:29.610

这通常是一个非常困难的问题，因为您本质上要求一些并发处理，或者至少是异步处理。

最简单的单线程解决方案是使用类似 Posix 的`alarm(2)`. 这将导致在指定时间后向您的进程发送*信号。*您需要注册一个信号处理程序（例如使用`signal(2)`），但您会受到它的所有限制（例如您只能在处理程序中调用异步安全函数）。

第二个单线程选项是使用`select`-style（或`epoll`-style）I/O 循环并使用内核计时器文件描述符。不过，这是最新的 Linux 功能，因此可用性会有所不同。

最后，典型的通用解决方案是使用多个线程：为计时器创建一个专用线程，其唯一目的是在设定的时间跨度内休眠，然后执行一些代码。为此，您将不得不承担并发编程职责的全部重量，例如处理共享数据、保证不存在竞争等。

一旦您决定走多线程路线，一些更高级别的库（如 Boost.ASIO 和新标准库）会提供一些不错的计时机制。

# python - 分段错误 Python

> ID：10042429
> 
> 赞同：2
> 
> 时间：2012-04-06T10:46:51.343
> 
> 标签：python, segmentation-fault, enthought

我安装了 Enthought Python 发行版。在此之前我安装了 Python2.7 并安装了其他模块（例如 opencv）。Enthought 将自己确立为默认的 python。叫7.2，其实是2.7。现在，如果我想在 Enthought Python 中导入 cv，它总是会给我 Segmentation fault 错误。无论如何要在 Enthought Python 中导入 cv 吗？那将是真棒。同样将任何新模块安装到 Enthought 中，似乎也有同样的错误。任何解决方案都会很棒。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-06T12:18:26.053

Python 仅 SEGFAULTs if

*   加载的本机扩展 DLL 代码中存在错误

*   虚拟机有错误（它没有）

在 -vvv 模式下运行 Python 以查看有关导入问题的更多信息。

您可能需要针对您正在使用的 Python 构建重新编译所需的模块。Python 主要版本和体系结构（32 位与 64 位）本机扩展在版本之间不兼容。

您还可以使用 gdb 提取所需的 C 堆栈跟踪，以提供确切的数据崩溃的位置和原因。

只有提示您应该做什么；因为该问题仅针对您的配置，不可重复人们只能为您提供如何进一步解决问题的信息。因为这里给出的解决问题的方法很可能过于先进，所以我只建议重新安装所有内容。

# c# - 仅从字符串中获取数字并放入数组中

> ID：10042430
> 
> 赞同：2
> 
> 时间：2012-04-06T10:47:18.337
> 
> 标签：c#, string

好的，我发现这是为了从字符串中删除所有不是数字的“垃圾”

```
TextIN = " 0 . 1 ,2 ; 3 4 -5 6 ,7 ,8; 9 "

string justNumbers = new String(textIN.Where(Char.IsDigit).ToArray()); 
```

=“0123456789”

这会从我的字符串中删除所有“垃圾”，只留下数字，但我仍然可以修改它，所以我可以在我的数字之间至少有一个分隔符，例如“0,1,2,3 ,4,5,6,7,8,9" 因为我需要分隔这个数字，这样我就可以将它们放在一个整数数组中并使用它们，而且并不总是只有一个数字我可能有 105、85692 等..有什么帮助吗？！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-06T11:04:01.770

您还可以像这样转换为数值：

```
int[] numbers = Regex.Matches(textIN, "(-?[0-9]+)").OfType<Match>().Select(m => int.Parse(m.Value)).ToArray(); 
```

@LB：同意，但也可能有负值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-06T10:50:13.110

```
string test = string.Join(",", textIN.Where(Char.IsDigit)); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-06T11:01:39.887

对于 n 位数字，您可以使用正则表达式。

```
string s = String.Join(",",
                  Regex.Matches(textIN,@"\d+").Cast<Match>().Select(m=>m.Value)); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-06T10:52:22.887

```
string justNumbers = new String(textIN.Where(Char.IsDigit).ToArray()); = "0123456789"
string[] words = justNumbers.Split(','); 
```

将字符串分隔成一个数字数组，用逗号分隔。

# c# - SharpDevelop：无法更改我的应用显示名称

> ID：10042432
> 
> 赞同：0
> 
> 时间：2012-04-06T10:47:35.350
> 
> 标签：c#, sharpdevelop

我正在使用 SharpDevelop 创建一个 C# 应用程序。SD以项目名称命名我的应用程序，我不知道现在要手动更改它。我到处搜索，仍然没有运气。将不胜感激您的建议！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-06T11:55:10.753

在您的项目中应该有一个名为 AssemblyInfo.cs 的文件。打开它并尝试了解其中定义的属性是什么。

# android - 从asp到java类的反序列化字符串json

> ID：10042434
> 
> 赞同：0
> 
> 时间：2012-04-06T10:47:48.100
> 
> 标签：android, asp.net, json

当我开发我的项目时，我在 android 活动中遇到了错误

从 asp web 方法返回的 json 字符串正确返回，但是当将 json 转换为类时，该类等于 null（我通过 google json jar 2.1 将其转换）

```
 android code:

        //to call my service and get data

        ServiceCall call = new ServiceCall();

    String jsonuserdata = call.getUserData("abced@myservice.com")
            .toString();

    Toast.makeText(getApplicationContext(), jsonuserdata,Toast.LENGTH_SHORT).show();

        //this Toast message is print data correctly 

         Gson gson = new Gson();

    Type userType = new TypeToken<UserData>(){}.getType();

    UserData user = gson.fromJson(jsonuserdata,userType);

    Toast.makeText(getApplicationContext(), "" + user.userid.toString(),
            Toast.LENGTH_SHORT).show(); 
```

问题是当我将 json 字符串转换为类时

asp.net web 方法返回一个有效的 json 字符串给 android 方法

```
 [WebMethod]
        public string getUserData(string email)
        {
            UserData user = new UserData();

            user = DataBase.getUserData(email);

            JavaScriptSerializer js = new JavaScriptSerializer();

            string strJSON = js.Serialize(user);

            return strJSON;
        } 
```

这是我的java课

```
public class UserData {

    public static Class<UserData> USERDATA_CLASS = UserData.class;

    public String getUserid() {
        return userid;
    }

    public void setUserid(String userid) {
        this.userid = userid;
    }

    public String getUsername() {
        return username;
    }

    public void setUsername(String username) {
        this.username = username;
    }

    public String getEmail() {
        return email;
    }

    public void setEmail(String email) {
        this.email = email;
    }

    public String getPassword() {
        return password;
    }

    public void setPassword(String password) {
        this.password = password;
    }

    String username;

    String email;

    String password;

    String userid;

    public UserData() {

    }

    public UserData(String id, String name, String age, String weight,
            String height, String calorie, String status, String gender,
            String idealweight, String minidealweight, String maxidealweight,
            String email, String password, String country, String report,String accountstatus) {

        this.userid = id;
        this.username = name;

        this.email = email;
        this.password = password;

    }

    public UserData(UserData user) {

        this.userid = user.userid;
        this.username = user.username;

        this.email = user.email;
        this.password = user.password;

    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-06T12:20:36.117

您可以简单地通过以下方式解析类的实例：

```
Type userType = new TypeToken<UserData>(){}.getType();
UserData user = gson.fromJson(jsonuserdata,userType); 
```

->

```
UserData user = gson.fromJson(jsonuserdata, UserData.class); 
```

**编辑**添加解释：

取自[这里](http://google-gson.googlecode.com/svn/tags/1.2.3/docs/javadocs/com/google/gson/Gson.html#fromJson%28java.lang.String,%20java.lang.reflect.Type%29)：

> 如果指定的对象是泛型类型，此方法很有用。对于非泛型对象，请改用 fromJson(String, Class)。

所以你不应该使用类型参数，而是使用类。

# c++ - Qt：heightForWidth 用于自动换行文本

> ID：10042439
> 
> 赞同：0
> 
> 时间：2012-04-06T10:48:06.350
> 
> 标签：c++, qt, fonts

我有一个不同宽度的框和一个自动换行的文本。每次用户更改框的宽度时，我都需要设置新的高度。该框由 QPainter 在**paintEvent(QPaintEvent *)**函数中显示。有几种解决方案，例如当前的（不是很聪明，我在**resizeEvent(QResizeEvent *)**中这样做）：

```
unsigned new_height = 0; // the height i want to find out.
unsigned given_width = width();
QPainter painter (this); // i need painter, because i want to ask it's default font.
QLabel lab;              // the widget that can do word-wrap.
lab.setText( "A word wrapped text" ); // the text
lab.setFont( painter.font() );        // set QPainter's default font.
lab.setWordWrap( true );              // enable word-wrap
new_height = lab.heightForWidth( given_width ); // tada! :) 
```

但是代码有点矫枉过正：
1）在paintEvent（QPaintEvent *）之外创建QPainter不好；
2）但我需要 QPainter 来请求它默认使用什么字体来询问该字体的指标。

我应该更改我的代码并在**paintEvent(QPaintEvent *)**函数内的[QPainter::boundingRect()的帮助下执行此操作吗？](http://qt-project.org/doc/qt-4.8/qpainter.html#boundingRect)但我想减少**paintEvent（QPaintEvent *）**内的CPU消耗并仅在宽度改变时计算新高度，而不是每次显示时计算新高度。

 ****针对主题的其他解决方案是什么？QFontMectircs？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T13:43:03.060

我认为你有正确的想法使用`QFontMetrics`. 这门课的整个想法是帮助你在这里遇到的情况。看一眼[`QFontMetricsF::boundingRect()`](http://qt-project.org/doc/qt-4.8/qfontmetricsf.html#boundingRect-3)

使用您的目标绘制矩形作为输入矩形，但将高度设置为您的小部件高度的最大值。为了确定，我只是在里面放了一些类似 INT_MAX 的东西。:)****

# ios - 使后退按钮的图像适合整个按钮

> ID：10042447
> 
> 赞同：0
> 
> 时间：2012-04-06T10:48:49.287
> 
> 标签：ios, objective-c, iphone, mobile, mobile-application

我正在开发一个我使用的应用程序`UINavigationController`。我想为后退按钮设置图像。我使用下面的代码执行此操作。

```
UIBarButtonItem *backButton = [[UIBarButtonItem alloc] initWithImage:[UIImage imageNamed:@"backArrow.png"] style:UIBarButtonItemStyleBordered target:nil action:nil];
self.navigationItem.backBarButtonItem = backButton; 
```

但是图像只出现在后退按钮的中间。如何将图像设置为跨越整个后退按钮？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-06T11:06:24.843

对于中的后退按钮`UINavigationBar`，如果添加图像，它将仅在后按钮的中心显示图像。您也不能在其中添加图像。因此，不要这样做，而是隐藏您的`backbutton`代码并在您的方法中添加此代码`viewDidload`以为其添加图像，看起来就像您需要的那样。

```
 self.navigationItem.hidesBackButton = YES;
 UIButton *button = [UIButton buttonWithType: UIButtonTypeCustom]; 
    [button setBackgroundImage:[UIImage imageNamed:@"back_normal"] forState:UIControlStateNormal];  
    [button setBackgroundImage:[UIImage imageNamed:@"back_pressed"] forState:UIControlStateSelected];
    [button addTarget: nil action:@selector(popViewControllerAnimated:) forControlEvents:UIControlEventTouchUpInside]; 
    button.frame = CGRectMake(0, 0, 50, 30);  
    self.navigationItem.leftBarButtonItem = [[UIBarButtonItem alloc] initWithCustomView: button]; 
```

# javascript - 如何替换Mongo中所有文档中的字符串

> ID：10042450
> 
> 赞同：27
> 
> 时间：2012-04-06T10:48:55.693
> 
> 标签：javascript, mongodb, mongodb-query

我需要替换某些文档中的字符串。我已经用谷歌搜索了这段代码，但不幸的是它并没有改变任何东西。我不确定下面这行的语法：

```
pulpdb = db.getSisterDB("pulp_database");
var cursor = pulpdb.repos.find();
while (cursor.hasNext()) {
  var x = cursor.next();
  x['source']['url'].replace('aaa', 'bbb'); // is this correct?
  db.foo.update({_id : x._id}, x);
} 
```

我想添加一些调试打印以查看值是什么，但我没有使用 MongoDB Shell 的经验。我只需要替换这个：

```
{ "source": { "url": "http://aaa/xxx/yyy" } } 
```

和

```
{ "source": { "url": "http://bbb/xxx/yyy" } } 
```

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2012-04-06T11:00:08.553

它通常不正确：如果你有字符串`http://aaa/xxx/aaa`（`yyy`等于`aaa`），你最终会得到`http://bbb/xxx/bbb`. 但是，如果您对此表示满意，则代码将起作用。

添加调试信息使用`print`功能：

```
var cursor = db.test.find();
while (cursor.hasNext()) {
  var x = cursor.next();
  print("Before: "+x['source']['url']);
  x['source']['url'] = x['source']['url'].replace('aaa', 'bbb');
  print("After: "+x['source']['url']);
  db.test.update({_id : x._id}, x);
} 
```

*（顺便说一句，如果你想打印出物体，也有`printjson`功能）*

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-11-08T08:01:07.430

如果您使用的是 MongoDB 2.6 或更新版本，最好的方法是使用该方法循环游标对象，并使用[“批量”](https://docs.mongodb.org/manual/reference/method/Bulk/#Bulk)[`.forEach`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/forEach)操作更新每个文档以获得最大效率。

```
var bulk = db.collection.initializeOrderedBulkOp();
var count = 0;

db.collection.find().forEach(function(doc) {
    print("Before: "+doc.source.url);
    bulk.find({ '_id': doc._id }).update({
        '$set': { 'source.url': doc.source.url.replace('aaa', 'bbb') }
    })
    count++;
    if(count % 200 === 0) {
        bulk.execute();
        bulk = db.collection.initializeOrderedBulkOp();
    }

// Clean up queues
if (count > 0) 
    bulk.execute(); 
```

* * *

从[MongoDB 3.2](https://docs.mongodb.org/manual/release-notes/3.2/#mongo-shell-and-crud-api)开始，不推荐使用[Bulk()](https://docs.mongodb.org/manual/reference/method/Bulk/#Bulk) API 及其相关[方法](https://docs.mongodb.org/manual/release-notes/3.2-reference/#db.collection.bulkWrite)，您将需要使用该[`db.collection.bulkWrite()`](https://docs.mongodb.org/manual/release-notes/3.2-reference/#db.collection.bulkWrite)方法。

您将需要循环游标，动态构建查询并将[`$push`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/push)每个操作构建到一个数组。

```
var operations = [];
db.collection.find().forEach(function(doc) {
    print("Before: "+doc.source.url);
    var operation = {
        updateOne: { 
            filter: { '_id': doc._id }, 
            update: { 
                '$set': { 'source.url': doc.source.url.replace('aaa', 'bbb') }
            }
        }
    };
    operations.push(operation);
})
operations.push({ 
    ordered: true, 
    writeConcern: { w: "majority", wtimeout: 5000 } 
})

db.collection.bulkWrite(operations); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2020-02-22T11:26:57.187

如今，

*   开始`Mongo 4.2`，[`db.collection.updateMany`](https://docs.mongodb.com/master/reference/method/db.collection.updateMany/index.html)（的别名`db.collection.update`）可以接受一个聚合管道，最后允许根据自己的值更新一个字段。
*   开始`Mongo 4.4`，新的聚合运算符[`$replaceOne`](https://docs.mongodb.com/master/reference/operator/aggregation/replaceOne/#exp._S_replaceOne)使得替换字符串的一部分变得非常容易。

```
// { "source" : { "url" : "http://aaa/xxx/yyy" } }
// { "source" : { "url" : "http://eee/xxx/yyy" } }
db.collection.updateMany(
  { "source.url": { $regex: /aaa/ } },
  [{
    $set: { "source.url": {
      $replaceOne: { input: "$source.url", find: "aaa", replacement: "bbb" }
    }}
  }]
)
// { "source" : { "url" : "http://bbb/xxx/yyy" } }
// { "source" : { "url" : "http://eee/xxx/yyy" } } 
```

*   第一部分 ( `{ "source.url": { $regex: /aaa/ } }`) 是匹配查询，过滤要更新的文档（包含 的文档`"aaa"`）
*   第二部分 ( `$set: { "source.url": {...`) 是更新聚合管道（注意方括号表示使用聚合管道）：
    *   [`$set`](https://docs.mongodb.com/master/reference/operator/aggregation/set/#pipe._S_set)是一个新的聚合运算符 ( `Mongo 4.2`)，在这种情况下它替换了字段的值。
    *   使用 new 运算符计算新值[`$replaceOne`](https://docs.mongodb.com/master/reference/operator/aggregation/replaceOne/#exp._S_replaceOne)。请注意如何`source.url`直接根据其自身的值 ( `$source.url`) 进行修改。

请注意，这是完全处理的服务器端，不允许您执行问题的调试打印部分。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-12-26T19:47:37.170

MongoDB 可以通过 mapreduce 进行字符串搜索/替换。是的，你需要有一个非常特殊的数据结构——你不能在顶部键中有任何东西，但你需要将所有内容存储在`value`. 像这样：

```
{
    "_id" : ObjectId("549dafb0a0d0ca4ed723e37f"),
    "value" : {
            "title" : "Top 'access denied' errors",
            "parent" : "system.admin_reports",
            "p" : "\u0001\u001a%"
    }
} 
```

一旦你有这个整齐的设置，你可以做：

```
$map = new \MongoCode("function () {
  this.value['p'] = this.value['p'].replace('$from', '$to');
  emit(this._id, this.value);
}");
$collection = $this->mongoCollection();
// This won't be called.
$reduce = new \MongoCode("function () { }");
$collection_name = $collection->getName();
$collection->db->command([
  'mapreduce' => $collection_name,
  'map' => $map,
  'reduce' => $reduce,
  'out' => ['merge' => $collection_name],
  'query' => $query,
  'sort' => ['_id' => 1],
]); 
```

# android - 如何为移动应用制作艺术？

> ID：10042451
> 
> 赞同：1
> 
> 时间：2012-04-06T10:48:59.427
> 
> 标签：android, mobile

我开始构建我的第一个 Android 应用程序。我已经到了需要开始添加自定义图形和艺术以使其看起来不错的地步。然而，我也意识到我在这方面完全没有技能或知识。

程序员可以采取哪些实际步骤来开发必要的基本技能来绘制/渲染适合移动设备的小型低分辨率艺术品（我不希望能够绘制完整的绘画或任何东西）？

我对任何可能有帮助的工具特别感兴趣，无论是软件还是绘图板等设备，以及指南和教程。

注意：我知道这不是一个严格的编程问题，并且可能还有其他艺术论坛，但我想特别听听其他处于类似情况的程序员如何获得制作移动艺术的技能。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-06T11:01:34.817

在工具和软件方面，没有什么比 Adob​​e Photoshop 更好的了（它非常昂贵，但您现在可以在有限的时间内免费下载 CS6 beta）和 Wacom 平板电脑（Bamboo 在这里就足够了，如果你有太多的话， Intuos 就足够了钱）。

颜色非常重要，对于初学者来说调色板很难做到。这不仅仅是组合两个或三个六边形的问题。查看[Adob​​e Kuler](http://kuler.adobe.com/)和[ColourLovers](http://www.colourlovers.com/)以获得一些帮助。

此外，如果您不喜欢从头开始工作，还有很多 PSD 模板，就像[这个](http://www.teehanlax.com/downloads/android-gui-psd-high-density/).

没有感觉，看起来什么都不是，所以UX（用户体验）非常重要，它也是一门艺术:)。[我个人认为Android 设计指南](http://developer.android.com/design/index.html)中的提示非常有用，即使它们主要涵盖 ICS 功能。您可以将大部分功能复制到 Honeycomb 之前的应用程序。[SmashingMagazine](http://www.smashingmagazine.com/)中也有很多关于 UX 的提示。

# iphone - 在 xcode 中创建一个新项目，选项与我预期的不同

> ID：10042456
> 
> 赞同：0
> 
> 时间：2012-04-06T10:49:19.360
> 
> 标签：iphone, ios, xcode

我已经下载了 Xcode 的最新版本。我看到的所有创建新 ios 应用程序项目的教程，都提到创建基于视图的应用程序。

但我没有看到那个选项。因此，无论我选择什么，接下来我都看不到示例后面提到的文件夹。（例如，我在项目中看不到资源文件夹）

我在创建新项目时看到的图片是这样的： ![在此处输入图像描述](../Images/ab010ec51b6fdc52d78a7b05d03e91d4.png)

该怎么办？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-06T10:52:05.180

“单一视图应用程序”与旧的“基于视图的应用程序”相同

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-06T10:52:31.640

在新的 X 代码中，您将找不到基于窗口的应用程序选项。如果需要，请选择

**空应用程序**选项。你也不会在这里找到 MainWindow.xib。您必须在 Appdelegate 文件中进行编码才能加载初始 viewController。

如果您像安东尼奥所说的那样选择**单视图应用程序**，您将在情节提要中拥有所有视图控制器。这是在新的 iOS 5 中引入的。

您可以创建新文件夹并将其命名为资源。

# java - 为什么java不支持重启线程

> ID：10042457
> 
> 赞同：1
> 
> 时间：2012-04-06T10:49:24.883
> 
> 标签：java, multithreading, restart

> **可能重复：**
> [如何在 Java 中启动/停止/重新启动线程？](https://stackoverflow.com/questions/1881714/how-to-start-stop-restart-a-thread-in-java)

1.如果您在正在运行的线程上调用 start()，则会出现错误 2.如果您在已停止的线程上调用 start()，则不会发生任何事情。

不支持对同一对象重新启动的原因是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T11:14:51.023

我认为设计者这样做是因为操作系统级别的线程通常以这种方式运行 - 它们被创建，它们可能运行，然后它们被销毁并且操作系统执行清理。因此，Java 设计者可能希望 Java 中的线程概念接近于大多数操作系统中的线程。这些方法`start()`并不`stop()`意味着暂停线程（我们为此进行了同步），只是为了让它运行并销毁对象。也许名字有​​点混乱。请注意，`stop()`它已被弃用且不应使用，因此如果我们消除`stop()`，该名称`start()`就不会再令人困惑了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-06T11:12:04.827

由于 Thread.run() 方法背后的想法。这个想法是每个线程都有生命周期，如果它过期（完成 run() 方法块），线程就会死掉。如果你想在一段时间内停止线程然后再次运行它，常见的方法是实现 Runnable 接口（或扩展 Thread 类）并在里面得到一个布尔标志。这是一个简单的代码：

```
public class MyThread implements Runnable {
    private Thread t;
    private boolean isRestarted;
    private boolean isInterrupted;

    public MyThread() {
           t = new Thread(this);
           isInterrupted = false;
           isRestarted = false;
           t.start();
    }

    public void run() {
       //Do somework
       while(true) {
         if(isInterrupted) break;
         if(isRestarted) run();
       }
    }

    public void restart() { isRestarted = true; }
    public void interupt() { isInterrupted = true; }
 } 
```

现在，当线程没有被中断时，它将等待重新启动。当您中断它时，它无法再重新启动。

# javascript - 在javascript中动态更改函数名称

> ID：10042461
> 
> 赞同：3
> 
> 时间：2012-04-06T10:49:36.363
> 
> 标签：javascript, jquery

```
$('a').live('click',function(e){
    e.preventDefault();
    var id = $(this).attr('id');
    infowindow2.open(map, marker2); // I need instead of 2 to print the value of variable id
}); 
```

如何将数字 2 动态更改为变量 ID ？

谢谢你的帮助

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-06T11:00:28.067

不要使用`eval`，使用哈希：

```
var markers = {
    "key1": function(){},
    "key2": function(){},
    "key3": function(){}
};

$('a').live('click',function(e){
    e.preventDefault();
    var id = this.id; //Use this.id instead of attr
    infowindow2.open(map, markers[id]);
}); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-04-06T11:00:21.337

而不是使用`eval`, - 更好地改变你的数据结构：

```
var  markers = {
    '1': function () { doStuff(); },
    '2': function () { doOtherStuff(); },
}
$('a').live('click',function(e){
    e.preventDefault();
    var id = $(this).attr('id');
    infowindow2.open(map, markers[id]);
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-06T11:01:14.280

### EVAL 应该永远是最后的选择

为了在函数名称中使用动态名称，您可以使用 windows 对象。

这是一个例子：

```
var id = '2';
function map2() {
    alert('me called');
}
window["map"+id](); 
```

### [演示](http://jsfiddle.net/Starx/qvJzv/)

你的用法会是这样的

```
$('a').on('click',function(e){
    e.preventDefault();
    var id = $(this).attr('id');
    infowindow2.open(map, window['map'+id]()); 
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-06T11:01:17.687

我认为用开关编写新功能会更容易。我不推荐使用 eval。

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2012-04-06T10:55:05.427

```
$('a').live('click',function(e){
    e.preventDefault();
    var id = $(this).attr('id');
    infowindow2.open(map, eval('marker' + id)); 
}); 
```

**[现场演示](http://jsfiddle.net/FVaNf/)**

**笔记：**

*   `eval`已弃用，**您应该寻找更好的设计。**
*   所以`live`......你应该`on`改用。

# c++ - 运算符重载 c++ 建议

> ID：10042462
> 
> 赞同：0
> 
> 时间：2012-04-06T10:49:38.883
> 
> 标签：c++, operators, operator-overloading

我正在努力解决操作员超载问题。在这种情况下，我拥有的 + 运算符和我尝试过的示例，任何帮助将不胜感激。

我收到一个错误，上面写着“'class Matrix'的使用无效我不确定如何解决这个问题如何将这两个 Matrix 对象添加在一起？

```
Matrix Matrix::operator+(const Matrix& rhs){
return Matrix(Matrix + rhs.Matrix());
}

   Matrix::Matrix(int MM, int NN){
                  M = MM;
                  N = NN;
                  data = new double[M * N];
                  for ( int i =0; i < M; i++)
                  {
                      for (int j = 0; j < N; j++)
                      {
                          data[i* N+j] = (double) 1000 + i*N+j;
                    //      cout << data[i*N+j] <<"\t";
                      }
                      //cout <<"\n";
                  }

       cout << "Matrix Constructor... (code to be implemented here!!!)\n";} 
```

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-06T10:55:56.553

1.  rhs*是*一个`Matrix`
2.  像方法一样调用构造函数是非常非法的
3.  in `Matrix + rhs`,`Matrix`不是标识符
4.  一旦你理顺了你的标识符，`*this + rhs`就相当于`this->operator+(rhs)`. 很明显，您在这里所做的只是创建了一个无限递归。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-06T11:07:17.087

jpm的答案非常重要。一旦你修复了这些东西，你可以看看我的。

本质上，运算符重载与任何其他函数没有什么不同。

因此，在以下情况下：

```
Matrix Matrix::operator+(const Matrix& rhs) 
```

你真正做的是说：将 rhs 添加到当前矩阵，并返回一个新矩阵。您的重载不应改变当前矩阵。帮助自己并使用常量：

```
Matrix Matrix::operator+(const Matrix& rhs) const 
```

像这样的矩阵加法应该首先检查矩阵是否具有相同的维度，以便您可以将它们添加在一起，然后遍历所有“单元格”并添加它们，并从中创建一个矩阵。为此，我猜您需要第二个构造函数，例如：

```
Matrix::Matrix(int MM, int NN, double values[])
{
    M = MM;//TODO: change to width
    N = NN;//TODO: change to height
    data = new double[M*N];
    for(int i < 0; i < M; i++)
        for(int j < 0; j < N; j++)
            data[i * N+j] = values[i * N+j];
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-06T12:26:21.283

```
return Matrix(Matrix + rhs.Matrix());
              ^^^^^^       ^^^^^^ 
```

您在`Matrix`应该有表达式的地方使用类型名称 ( ) - 这就是编译器所抱怨的。您还尝试在现有对象上调用构造函数，这是无效的（且无意义的）。您似乎还试图以`operator+`它自称的方式实现；如果您确实以某种方式使其编译，那么它将由于无限递归而导致堆栈溢出。

实现加法的最简单方法可能是实现`operator+=`将一个矩阵添加到现有矩阵，然后按照以下方式实现`operator+`：

```
Matrix & Matrix::operator+=(Matrix const & rhs) {
    // Perform addition here
    for (int i = 0; i < N*M; ++i) {
        data[i] += rhs.data[i];
    }
    return *this;
}

// This can be a non-member function
// Pass "lhs" by value to get a copy, then modify and return that.
Matrix operator+(Matrix lhs, Matrix const & lhs) {
    return lhs += rhs;
}

// Or if you really want a member function for some reason
Matrix Matrix::operator+(Matix const & rhs) const {
    return Matrix(*this) += rhs;
} 
```

这确实需要您有一个正确的复制构造函数 - 因为您自己在构造函数中分配内存，并且可能在析构函数中释放它，所以您**必须**实现一个复制构造函数来正确分配新内存（根据[三规则](https://stackoverflow.com/questions/4172722)），否则复制矩阵后会出现双重删除。

# php - 使用 Internet Explorer 进行 UTF-8 编码 %u20AC 到 €

> ID：10042465
> 
> 赞同：3
> 
> 时间：2012-04-06T10:49:56.107
> 
> 标签：php, internet-explorer, encoding, utf-8, tinymce

我目前正在使用 TinyMCE 作为 CMS 用户的 html 编辑器。不知何故，欧元符号 (€) 被 IE (any) 转换为 %u20AC。

经过短暂的搜索，我找到[了这个](http://www.fileformat.info/info/unicode/char/20ac/index.htm)。它为 UTF-8 欧元符号提供了很多不同的编码，但不是 %u20AC，带有百分比图标。

我已经为 UTF-8 提供了正确的标题，所以我猜 IE 只是粗鲁地以自己的方式做事......

是否有 PHP 函数可以捕获这种奇怪的编码并将其转换为正常的 htmlentity（十六进制、十进制或命名）。我可以只`string_replace()`使用一个问题符号，但我宁愿一次解决所有可能的冲突。

或者我应该简单地替换`%u`为`&#x`禁用 %u 的正常使用？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-06T11:03:27.283

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-06T10:59:10.563

# python - Django 1.4 静态文件问题并且不在我项目的其他 url 上呈现

> ID：10042469
> 
> 赞同：3
> 
> 时间：2012-04-06T10:50:05.510
> 
> 标签：python, django, static-files, django-staticfiles, django-1.4

这是我的设置：

```
STATIC_ROOT = "/home/tony/Documents/mysite/mysite/"

STATIC_URL = '/static/'

STATICFILES_DIRS = (
"/home/tony/Documents/mysite/mysite/static/",
) 
```

在这里我参考了我的样式表（这给了我一个错误）：

```
<link rel="stylesheet" type="text/css" href="{{ STATIC_URL }}/css/reset.css" />
<link rel="stylesheet" type="text/css" href="{{ STATIC_URL }}/css/style.css" /> 
```

以及日志中的错误：

```
[06/Apr/2012 13:36:09] "GET /css/reset.css HTTP/1.1" 404 2193
[06/Apr/2012 13:36:09] "GET /css/style.css HTTP/1.1" 404 2193 
```

我认为我如何解决它：

```
<link rel="stylesheet" type="text/css" href="{{ STATIC_URL }}static/css/reset.css" />
<link rel="stylesheet" type="text/css" href="{{ STATIC_URL }}static/css/style.css" /> 
```

它一直有效，直到我提出另一个观点 - ：

```
from django.shortcuts import render_to_response
from django.template import RequestContext

def test(request):
    return render_to_response('test.html') 
```

在模板中我添加了 {% extends 'base/base.html' %} 我在日志中得到了什么？这：

```
[06/Apr/2012 13:46:55] "GET /test/ HTTP/1.1" 200 964
[06/Apr/2012 13:46:55] "GET /test/static/css/style.css HTTP/1.1" 404 2229
[06/Apr/2012 13:46:55] "GET /test/static/css/reset.css HTTP/1.1" 404 2229 
```

注意 /test/? 它不加载css。
知道为什么吗？（​​我从来没有遇到过 django1.3 的这个问题）

提前致谢 ：）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-06T11:14:57.577

首先，以下内容不能解决您的问题，因为`STATIC_URL`应该包含`/static/`，您不想自己在任何地方编写它：

```
"{{ STATIC_URL }}static/css/reset.css" 
```

现在，如果您`{{ STATIC_URL }}`的模板中有但`/static/`没有显示在模板中，那么我认为您缺少`STATIC_URL`.

添加`'django.core.context_processors.static'`到您的`TEMPLATE_CONTEXT_PROCESSORS`设置中。例如，像这样：

```
TEMPLATE_CONTEXT_PROCESSORS = (
   'django.core.context_processors.static',
) 
```

如果`TEMPLATE_CONTEXT_PROCESSORS`已经在您的设置文件中，那么您应该将其添加到已经存在的文件中。

另外，请注意`STATIC_URL`以斜杠结尾，因此您需要在`{{ STATIC_URL }}`此处删除第一个斜杠：

```
<link rel="stylesheet" type="text/css" href="{{ STATIC_URL }}/css/reset.css" /> 
```

* * *

最后，你`STATIC_ROOT`很可能不是你想要的。它应该是：

```
"/home/tony/Documents/mysite/mysite/static/" 
```

`collectstatic`这是运行命令时放置静态文件的位置。请参阅Django 文档中的[管理静态文件](https://docs.djangoproject.com/en/dev/howto/static-files/)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-06T11:44:36.013

您没有使用`RequestContext`来呈现您的模板，因此上下文处理器没有运行，因此`STATIC_URL`是空的。

# c++ - std::map 访问冲突，在 64 位应用程序上使用 VS 2010

> ID：10042470
> 
> 赞同：0
> 
> 时间：2012-04-06T10:50:09.913
> 
> 标签：c++, access-violation, stdmap

有时，std::map 会发生访问冲突，我不知道为什么！我在 64 位应用程序上使用 VS 2010。如果有人有想法？

**这是我的调用堆栈：**

> std::_Tree >,0> >::_Lbound(const pureCore::Core::DependencyProperty * const & _Keyval=0x0000000002514244) 第 1745 行 + 0xa 字节 C++ std::_Tree >,0> >::lower_bound(const pureCore: :Core::DependencyProperty * const & _Keyval=0x0000000002514244) 第 1450 行 + 0xf 字节 C++ std::_Tree >,0> >::find(const pureCore::Core::DependencyProperty * const & _Keyval=0x0000000002514244) 第 1424 行 + 0x1a字节 C++

**这是我的代码：**

```
AnyObject value = AnyNull;
if (_propertiesValues.find(property) != _propertiesValues.end())
  value = _propertiesValues[property]; 
```

它在以下行的文件“xtree”中崩溃：“while (!this->_Isnil(_Pnode))”。我认为没有什么特别的......这段代码大部分时间都可以工作......但有时（很少）它会崩溃！

> _Nodeptr _Lbound(const key_type& _Keyval) { // 找到不小于 _Keyval 的最左边节点 _Nodeptr _Pnode = _Root(); _Nodeptr _Wherenode = this->_Myhead; // end() 如果搜索失败
> 
> ```
>  while (!this->_Isnil(_Pnode))           if (_DEBUG_LT_PRED(this->comp, 
> ```
> 
> this->_Key(_Pnode), _Keyval)) _Pnode = this->_Right(_Pnode); // 下降右子树 else { // _Pnode 不小于 _Keyval，记住它 _Wherenode = _Pnode; _Pnode = this->_Left(_Pnode); // 下降左子树 }
> 
> ```
>  return (_Wherenode);    // return best remembered candidate         } 
> ```

# database - 清理大文本文件 - 修复自由文本字段

> ID：10042472
> 
> 赞同：0
> 
> 时间：2012-04-06T10:50:19.923
> 
> 标签：database, excel, ms-access, ms-access-2007

这个问题从之前的帖子继续。这篇文章是为了重新提出问题并尝试另一种方法。

**较早的帖子：**

[清理大文本文件](https://stackoverflow.com/questions/9912524/cleaning-a-large-text-file)

**问题：**

大文本文件包含由竖线 (|) 分隔的记录。

一个字段包含自由文本。一些记录包含回车或换行符（这些特殊特征中的一个或多个）。

一种去除各种特殊字符组合的建议方法并未成功去除所有问题。

**建议的解决方案：**

运行 VB 脚本以逐条记录文件。将每个字段存储在一个数组中。清理问题字段。然后输出到新文件中。

对于字段 1 - 只需存储在数组中。（从最后一条记录到第一个管道的起始位置为 +1）

对于字段 2 - 删除任何出现的特殊字符。（从最后一个字段到下一个管道的起始位置为 +1）。**在小情况下，此字段可能包含管道 - 因此解决方案可能需要考虑解决方法。**

对于字段 3 - 存储在数组中。（起始位置从最后一个字段到（回车）+1）

**示例文件：（** 方括号代表特殊字符 - 换行符或回车）

```
FIELD_NAME1 |    FREE_TEXT1                          |    FIELD_NAME3
 John       |    He likes food                       |    1002
 Jake       |    He eats food and [][] likes swimming|    1003
 Jake       |    He eats food and [][] likes swimming|    1003
 Jake       |    He eats food and                    |    1006
 John       |    He likes [] food                    |    1007 
```

.

# c# - C# 在运行时编译 finalize 方法？

> ID：10042476
> 
> 赞同：0
> 
> 时间：2012-04-06T10:50:42.673
> 
> 标签：c#, .net, .net-4.0, clr

当我阅读 3 本关于 GC 的书籍时，我注意到一些奇怪的事实：

*C# 通过 CLR*

`CriticalFinalizerObject`：*CLR 以一种非常特殊的方式对待这个类和从它派生的类*

![在此处输入图像描述](../Images/78f856990943cf58ef20de281b8c8f1e.png)

什么 ？？？

“没有找到足够的内存来**编译一个方法？** ”恕我直言 - 代码应该已经编译了......不是吗？

当我编写 c# 代码时 - 整个代码在运行之前被编译为 IL ......不是吗？但根据文本 - 在*运行*时- 他*可能会发现编译内存不足*......

帮助 ？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-06T11:26:00.177

JIT 编译器仅在第一次执行时将方法从 IL 编译为本机代码。如您所料，这需要额外的内存。因此，普通的终结器仅在它们被清理线程执行之前被编译。

派生的对象`CriticalFinalizerObject`立即编译它的终结器，因此在程序关闭时执行它不需要额外的内存。这适用于*必须*尽可能执行终结器的对象（即使断电或类似情况）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-06T10:53:58.737

我认为它是“编译器”的后端。从 IL 到机器码。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-06T11:21:42.607

使用编译器是 JIT 编译器，旨在急切地编译您的终结器方法，而不是在执行前不久延迟其编译。

其背后的更深层原因是，在执行所有正常的终结器之后，在应用程序关闭期间会调用这些终结器。但是 CLR 确实执行所有挂起的终结器，超时时间为 2 秒（至少从那时起 .NET 2.0 就没有检查过）。然后执行关键终结器。

关键终结器很少使用，例如在任何情况下都需要关闭的句柄。但是您也可以使用它们来保持资源打开，直到所有终结器都被执行以启用例如[跟踪，甚至在终结](http://geekswithblogs.net/akraus1/archive/2006/06/12/81629.aspx)器内部。

# asp.net - NHibernate 抛出“无效操作。连接已关闭。” 例外

> ID：10042477
> 
> 赞同：0
> 
> 时间：2012-04-06T10:50:50.723
> 
> 标签：asp.net, database, nhibernate, session, logging

我有一段代码可以在 Global.asax 的 Session_End 事件中记录用户数据。它正在工作，但有时会抛出“无效操作。连接已关闭”异常。我未能在开发服务器上复制这种情况。它只发生在应用程序服务器上。怎么了？谢谢。

```
 protected void Session_End(object sender, EventArgs e)
    {
        try
        {
            userlog = UserLog.LoadBySessionAndLogoutTime(NHibernateHTTPModule.CurrentSession, Session.SessionID, null);
            userlog.LogoutTime = DateTime.Now;
            UserLog.Update(NHibernateHTTPModule.CurrentSession, userlog);
        }
        catch (Exception exception)
        {
            Mail.SendMail("Error", error);
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T13:56:45.793

如果你解释你在哪里打开和关闭你的 nhibernate 会话会有所帮助。除非您说相反，否则我会假设您使用“在视图中打开会话”模式。

用户会话在请求范围之外结束，因此如果您在每个请求上打开一个休眠会话，则在您尝试登录时它将不可用。

您应该在登录之前验证您是否打开了休眠会话。如果没有一个处于活动状态，您需要打开一个新的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-06T15:39:12.610

有可能在您的代码中某处引发了与 NHibernate 操作相关的异常。*任何*NHibernate 异常都会使会话无效。

因此，应用程序服务器上的某些条件与您的开发环境不同，会导致错误。您可以尝试将其记录在应用程序服务器上：

```
protected void Application_Error()
{
    Exception myError = null;
    if(HttpContext.Current.Server.GetLastError() != null)
    {
        // log error
        myError = Server.GetLastError();
        ....
    }
} 
```

在 global.asax 中将拦截所有错误，以便您记录它们。

# iphone - iOS升级后应用程序屏幕变形

> ID：10042482
> 
> 赞同：0
> 
> 时间：2012-04-06T10:51:19.940
> 
> 标签：iphone, ios4

在 4.0.1 上运行流畅的应用程序在 4.2.1 上运行时会产生扭曲的屏幕，即屏幕稍微向左移动了 20%。安装了 iOS 4.0.1 和 4.2.1 的手机是 2 部不同的手机。可能是什么问题呢？

我们观察到，无论我们添加为子视图，这个问题都会发生。

谢谢，萨蒂什

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-06T10:56:13.060

根据您的描述，我认为要么是您没有正确设置正确`view.autoresizingMask`，要么是视图的布局方式发生了微妙的变化。

尝试设置显式移动的视图框架，看看会发生什么。

```
[view setFrame:CGRectMake(0, 0, 320, 460)] 
```

一些相关的代码和/或屏幕截图肯定会有所帮助。另外，它是 UIKit 应用程序还是 Cocos2D 游戏？

* * *

**编辑：**由于您无法提供代码（或精简的示例版本），我将发布一些我一直在使用的代码。

通常，当我添加子视图以“填充”父视图时，我必须执行以下操作：

```
UIView *parent = nil; // find parent view
UIView *child = nil; // child view to add to parent

[parent addSubview:child];

CGRect frame = [parent frame];
frame.origin.x = 0;
frame.origin.y = 0;
[child setFrame:frame]; 
```

如果你这样做了，但它仍然不起作用，我相信问题可能出在其他地方（即你有没有被`layoutSubviews`任何机会覆盖？或者手机越狱了？）

我非常怀疑这将是一个 UIKit 错误，但这是完全可能的。

# php - 如何在 PHP 中以印度编号格式显示货币？

> ID：10042485
> 
> 赞同：34
> 
> 时间：2012-04-06T10:51:42.140
> 
> 标签：php, currency, number-formatting, converters, money-format

我有一个关于格式化卢比货币（印度卢比 - INR）的问题。

例如，这里的数字表示为：

```
1
10
100
1,000
10,000
1,00,000
10,00,000
1,00,00,000
10,00,00,000 
```

参考[印度编号系统](http://en.wikipedia.org/wiki/Indian_numbering_system)

我必须用它做PHP。

我看到了这个问题[Displaying Currency in Indian Numbering Format](https://stackoverflow.com/questions/5379231/displaying-currency-in-indian-numbering-format)。但是我的问题无法为 PHP 获取它。

# 更新：

如何以印度货币格式使用[money_format() ？](http://php.net/manual/en/function.money-format.php)

* * *

## 回答 #1

> 赞同：60
> 
> 时间：2012-04-06T11:03:47.620

您有很多选择，但[`money_format`](http://php.net/manual/en/function.money-format.php)可以为您解决问题。

例子：

```
$amount = '100000';
setlocale(LC_MONETARY, 'en_IN');
$amount = money_format('%!i', $amount);
echo $amount; 
```

输出：

```
1,00,000.00 
```

笔记：

> 仅当系统具有 strfmon 功能时才定义函数**money_format() 。**例如，Windows 没有，因此**money_format()**在 Windows 中是未定义的。

纯 PHP 实现 - 适用于任何系统：

```
$amount = '10000034000';
$amount = moneyFormatIndia( $amount );
echo $amount;

function moneyFormatIndia($num) {
    $explrestunits = "" ;
    if(strlen($num)>3) {
        $lastthree = substr($num, strlen($num)-3, strlen($num));
        $restunits = substr($num, 0, strlen($num)-3); // extracts the last three digits
        $restunits = (strlen($restunits)%2 == 1)?"0".$restunits:$restunits; // explodes the remaining digits in 2's formats, adds a zero in the beginning to maintain the 2's grouping.
        $expunit = str_split($restunits, 2);
        for($i=0; $i<sizeof($expunit); $i++) {
            // creates each of the 2's group and adds a comma to the end
            if($i==0) {
                $explrestunits .= (int)$expunit[$i].","; // if is first value , convert into integer
            } else {
                $explrestunits .= $expunit[$i].",";
            }
        }
        $thecash = $explrestunits.$lastthree;
    } else {
        $thecash = $num;
    }
    return $thecash; // writes the final format where $currency is the currency symbol.
} 
```

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2019-02-09T06:56:14.507

```
$num = 1234567890.123;

$num = preg_replace("/(\d+?)(?=(\d\d)+(\d)(?!\d))(\.\d+)?/i", "$1,", $num);

echo $num;

// Input : 1234567890.123

// Output : 1,23,45,67,890.123

// Input : -1234567890.123

// Output : -1,23,45,67,890.123 
```

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2013-04-19T11:01:38.763

```
echo 'Rs. '.IND_money_format(1234567890);

function IND_money_format($money){
    $len = strlen($money);
    $m = '';
    $money = strrev($money);
    for($i=0;$i<$len;$i++){
        if(( $i==3 || ($i>3 && ($i-1)%2==0) )&& $i!=$len){
            $m .=',';
        }
        $m .=$money[$i];
    }
    return strrev($m);
} 
```

**注意：：它没有针对浮点值进行测试，仅适用于整数**

* * *

## 回答 #4

> 赞同：11
> 
> 时间：2012-04-06T11:15:27.493

您[链接](https://stackoverflow.com/questions/5379231/displaying-currency-in-indian-numbering-format)的示例正在使用[intl Extension ^(*Docs 中 PHP 提供的 ICU 库*)](http://www.php.net/manual/en/book.intl.php)：

```
$fmt = new NumberFormatter($locale = 'en_IN', NumberFormatter::CURRENCY);
echo $fmt->format(10000000000.1234)."\n"; # Rs 10,00,00,00,000.12 
```

或者也许更适合您的情况：

```
$fmt = new NumberFormatter($locale = 'en_IN', NumberFormatter::DECIMAL);
echo $fmt->format(10000000000)."\n"; # 10,00,00,00,000 
```

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2014-02-15T19:23:01.260

检查此代码，它适用于十进制格式的印度卢比格式 100%。您可以使用以下数字：

123456.789 123.456 123.4 123 和 1,2,3,4,5,6,7,8,9,.222

```
function moneyFormatIndia($num){

$explrestunits = "" ;
$num = preg_replace('/,+/', '', $num);
$words = explode(".", $num);
$des = "00";
if(count($words)<=2){
    $num=$words[0];
    if(count($words)>=2){$des=$words[1];}
    if(strlen($des)<2){$des="$des";}else{$des=substr($des,0,2);}
}
if(strlen($num)>3){
    $lastthree = substr($num, strlen($num)-3, strlen($num));
    $restunits = substr($num, 0, strlen($num)-3); // extracts the last three digits
    $restunits = (strlen($restunits)%2 == 1)?"0".$restunits:$restunits; // explodes the remaining digits in 2's formats, adds a zero in the beginning to maintain the 2's grouping.
    $expunit = str_split($restunits, 2);
    for($i=0; $i<sizeof($expunit); $i++){
        // creates each of the 2's group and adds a comma to the end
        if($i==0)
        {
            $explrestunits .= (int)$expunit[$i].","; // if is first value , convert into integer
        }else{
            $explrestunits .= $expunit[$i].",";
        }
    }
    $thecash = $explrestunits.$lastthree;
} else {
    $thecash = $num;
}
return "$thecash.$des"; // writes the final format where $currency is the currency symbol.

} 
```

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2018-09-21T05:23:13.733

只需使用以下函数来格式化 INR。

```
function amount_inr_format($amount) {
    $fmt = new \NumberFormatter($locale = 'en_IN', NumberFormatter::DECIMAL);
    return $fmt->format($amount);
} 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2017-09-04T18:33:00.620

当 money_format 不可用时：

```
function format($amount): string
{
    list ($number, $decimal) = explode('.', sprintf('%.2f', floatval($amount)));

    $sign = $number < 0 ? '-' : '';

    $number = abs($number);

    for ($i = 3; $i < strlen($number); $i += 3)
    {
        $number = substr_replace($number, ',', -$i, 0);
    }

    return $sign . $number . '.' . $decimal;

} 
```

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2018-01-18T07:39:17.540

```
<?php
$amount = '-100000.22222';    // output -1,00,000.22 
//$amount = '0100000.22222';  // output 1,00,000.22 
//$amount = '100000.22222';   // output 1,00,000.22 
//$amount = '100000.';       // output 1,00,000.00 
//$amount = '100000.2';     // output 1,00,000.20
//$amount = '100000.0';    // output 1,00,000.00 
//$amount = '100000';      // output 1,00,000.00 

echo $aaa = moneyFormatIndia($amount);

function moneyFormatIndia($amount)
    {

        $amount = round($amount,2);

        $amountArray =  explode('.', $amount);
        if(count($amountArray)==1)
        {
            $int = $amountArray[0];
            $des=00;
        }
        else {
            $int = $amountArray[0];
            $des=$amountArray[1];
        }
        if(strlen($des)==1)
        {
            $des=$des."0";
        }
        if($int>=0)
        {
            $int = numFormatIndia( $int );
            $themoney = $int.".".$des;
        }

        else
        {
            $int=abs($int);
            $int = numFormatIndia( $int );
            $themoney= "-".$int.".".$des;
        }   
        return $themoney;
    }

function numFormatIndia($num)
    {

        $explrestunits = "";
        if(strlen($num)>3)
        {
            $lastthree = substr($num, strlen($num)-3, strlen($num));
            $restunits = substr($num, 0, strlen($num)-3); // extracts the last three digits
            $restunits = (strlen($restunits)%2 == 1)?"0".$restunits:$restunits; // explodes the remaining digits in 2's formats, adds a zero in the beginning to maintain the 2's grouping.
            $expunit = str_split($restunits, 2);
            for($i=0; $i<sizeof($expunit); $i++) {
                // creates each of the 2's group and adds a comma to the end
                if($i==0) {
                    $explrestunits .= (int)$expunit[$i].","; // if is first value , convert into integer
                } else {
                    $explrestunits .= $expunit[$i].",";
                }
            }
            $thecash = $explrestunits.$lastthree;
        } else {
            $thecash = $num;
        }
        return $thecash; // writes the final format where $currency is the currency symbol.
    }
?> 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2014-05-26T11:03:15.753

```
$amount=-3000000000111.11;
$amount<0?(($sign='-').($amount*=-1)):$sign=''; //Extracting sign from given amount
$pos=strpos($amount, '.'); //Identifying the decimal point position
$amt=  substr($amount, $pos-3); // Extracting last 3 digits of integer part along with fractional part
$amount=  substr($amount,0, $pos-3); //removing the extracted part from amount
for(;strlen($amount);$amount=substr($amount,0,-2)) // Now loop through each 2 digits of remaining integer part
    $amt=substr ($amount,-2).','.$amt; //forming Indian Currency format by appending (,) for each 2 digits
echo $sign.$amt; //Appending sign 
```

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2012-04-06T10:57:58.920

因此，如果我没看错，印度编号系统将千位分开，那么一百的每一个幂？唔...

也许是这样的？

```
function indian_number_format($num) {
    $num = "".$num;
    if( strlen($num) < 4) return $num;
    $tail = substr($num,-3);
    $head = substr($num,0,-3);
    $head = preg_replace("/\B(?=(?:\d{2})+(?!\d))/",",",$head);
    return $head.",".$tail;
} 
```

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2020-01-08T04:33:46.737

我认为这是一个快速和简单的解决方案：-

```
 function formatToInr($number){
        $number=round($number,2);
        // windows is not supported money_format
    if(setlocale(LC_MONETARY, 'en_IN')){
         return money_format('%!'.$decimal.'n', $number);
         }
     else {
        if(floor($number) == $number) {
            $append='.00';
        }else{
            $append='';
        }
        $number = preg_replace("/(\d+?)(?=(\d\d)+(\d)(?!\d))(\.\d+)?/i", "$1,", $number);
        return $number.$append;
        }
    } 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2012-04-07T09:08:57.017

我对 money_format() 使用了不同的格式参数作为输出。

```
setlocale(LC_MONETARY, 'en_IN');
if (ctype_digit($amount) ) {
     // is whole number
     // if not required any numbers after decimal use this format 
     $amount = money_format('%!.0n', $amount);
}
else {
     // is not whole number
     $amount = money_format('%!i', $amount);
}
//$amount=10043445.7887 outputs 1,00,43,445.79
//$amount=10043445 outputs 1,00,43,445 
```

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2012-04-06T11:04:07.733

您应该检查 number_format 函数。[链接在这里](http://php.net/manual/en/function.number-format.php)

用逗号分隔数千将看起来像

```
$rupias = number_format($number, 2, ',', ','); 
```

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2014-07-18T00:18:52.357

完成任务是我自己的职责

```
function bd_money($num) {
    $pre = NULL; $sep = array(); $app = '00';
    $s=substr($num,0,1);
    if ($s=='-') {$pre= '-';$num = substr($num,1);}
    $num=explode('.',$num);
    if (count($num)>1) $app=$num[1];
    if (strlen($num[0])<4) return $pre . $num[0] . '.' . $app;
    $th=substr($num[0],-3);
    $hu=substr($num[0],0,-3);
    while(strlen($hu)>0){$sep[]=substr($hu,-2); $hu=substr($hu,0,-2);}
    return $pre.implode(',',array_reverse($sep)).','.$th.'.'.$app;
} 
```

每个 THOUSAND 查询需要 0.0110 秒，而 number_format 只需要 0.001 秒。仅当性能是目标问题时，始终尝试使用 PHP 原生函数。

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2015-04-06T13:21:37.733

```
$r=explode('.',12345601.20);

$n = $r[0];
$len = strlen($n); //lenght of the no
$num = substr($n,$len-3,3); //get the last 3 digits
$n = $n/1000; //omit the last 3 digits already stored in $num
while($n > 0) //loop the process - further get digits 2 by 2
{
    $len = strlen($n);
    $num = substr($n,$len-2,2).",".$num;
    $n = round($n/100);
}
echo "Rs.".$num.'.'.$r[1]; 
```

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2014-11-13T06:20:00.390

使用这个功能：

```
function addCommaToRs($amt, &$ret, $dec='', $sign=''){
    if(preg_match("/-/",$amt)){
        $amts=explode('-',$amt);
        $amt=$amts['1'];
        static $sign='-';
    } 
    if(preg_match("/\./",$amt)){
        $amts=explode('.',$amt);
        $amt=$amts['0'];
        $l=strlen($amt);
        static $dec;
        $dec=$amts['1'];
    } else {
        $l=strlen($amt);
    }
    if($l>3){
        if($l%2==0){
            $ret.= substr($amt,0,1);
            $ret.= ",";
            addCommaToRs(substr($amt,1,$l),$ret,$dec);
        } else{
            $ret.=substr($amt,0,2);
            $ret.= ",";     
            addCommaToRs(substr($amt,2,$l),$ret,$dec);
        }
    } else {
        $ret.= $amt;
        if($dec) $ret.=".".$dec;
    }
    return $sign.$ret; 
} 
```

像这样称呼它：

```
$amt = '';
echo addCommaToRs(123456789.123,&$amt,0); 
```

这将返回`12,34,567.123`。

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2013-10-05T05:50:22.320

以上函数不适用于十进制

```
$amount = 10000034000.001;
$amount = moneyFormatIndia( $amount );
echo $amount;

function moneyFormatIndia($num){
        $nums = explode(".",$num);
        if(count($nums)>2){
            return "0";
        }else{
        if(count($nums)==1){
            $nums[1]="00";
        }
        $num = $nums[0];
        $explrestunits = "" ;
        if(strlen($num)>3){
            $lastthree = substr($num, strlen($num)-3, strlen($num));
            $restunits = substr($num, 0, strlen($num)-3); 
            $restunits = (strlen($restunits)%2 == 1)?"0".$restunits:$restunits; 
            $expunit = str_split($restunits, 2);
            for($i=0; $i<sizeof($expunit); $i++){

                if($i==0)
                {
                    $explrestunits .= (int)$expunit[$i].","; 
                }else{
                    $explrestunits .= $expunit[$i].",";
                }
            }
            $thecash = $explrestunits.$lastthree;
        } else {
            $thecash = $num;
        }
        return $thecash.".".$nums[1]; 
        }
    } 
```

答案：10,00,00,34,000.001

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2018-01-09T18:03:10.467

```
<?php
    function moneyFormatIndia($num) 
    {
        //$num=123456789.00;
        $result='';
        $sum=explode('.',$num);
        $after_dec=$sum[1];
        $before_dec=$sum[0];
        $result='.'.$after_dec;
        $num=$before_dec;
        $len=strlen($num);
        if($len<=3) 
        {
            $result=$num.$result;
        }
        else
        {
            if($len<=5)
            {
                $result='Rs '.substr($num, 0,$len-3).','.substr($num,$len-3).$result;
                return $result;
            }
            else
            {
                $ls=strlen($num);
                $result=substr($num, $ls-5,2).','.substr($num, $ls-3).$result;
                $num=substr($num, 0,$ls-5);
                while(strlen($num)!=0)
                {
                    $result=','.$result;
                    $ls=strlen($num);
                    if($ls<=2)
                    {
                        $result='Rs. '.$num.$result;
                        return $result;
                    }
                    else
                    {
                        $result=substr($num, $ls-2).$result;
                        $num=substr($num, 0,$ls-2);
                    }
                }
            }
        }
    }
?> 
```

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2015-07-30T15:46:38.530

如果您不想在我的情况下使用任何内置函数，我在 iis 服务器上执行所以无法使用 php 中的一个函数，所以这样做了

```
$num = -21324322.23;

moneyFormatIndiaPHP($num);
function moneyFormatIndiaPHP($num){
    //converting it to string 
    $numToString = (string)$num;

    //take care of decimal values
    $change = explode('.', $numToString);

    //taking care of minus sign
    $checkifminus =  explode('-', $change[0]);

    //if minus then change the value as per
    $change[0] = (count($checkifminus) > 1)? $checkifminus[1] : $checkifminus[0];

    //store the minus sign for further
    $min_sgn = '';
    $min_sgn = (count($checkifminus) > 1)?'-':'';

    //catch the last three
    $lastThree = substr($change[0], strlen($change[0])-3);

    //catch the other three
    $ExlastThree = substr($change[0], 0 ,strlen($change[0])-3);

    //check whethr empty 
    if($ExlastThree != '')
        $lastThree = ',' . $lastThree;

    //replace through regex
    $res = preg_replace("/\B(?=(\d{2})+(?!\d))/",",",$ExlastThree);

    //main container num
    $lst = '';

    if(isset($change[1]) == ''){
        $lst =  $min_sgn.$res.$lastThree;
    }else{
        $lst =  $min_sgn.$res.$lastThree.".".$change[1];
    }

    //special case if equals to 2 then 
    if(strlen($change[0]) === 2){
        $lst = str_replace(",","",$lst);
    }

    return $lst;
} 
```

* * *

## 回答 #20

> 赞同：0
> 
> 时间：2017-05-29T05:38:26.893

**这适用于整数和浮点值**

```
 function indian_money_format($number)
    {

        if(strstr($number,"-"))
        {
            $number = str_replace("-","",$number);
            $negative = "-";
        }

        $split_number = @explode(".",$number);

        $rupee = $split_number[0];
        $paise = @$split_number[1];

        if(@strlen($rupee)>3)
        {
            $hundreds = substr($rupee,strlen($rupee)-3);
            $thousands_in_reverse = strrev(substr($rupee,0,strlen($rupee)-3));
            $thousands = '';
            for($i=0; $i<(strlen($thousands_in_reverse)); $i=$i+2)
            {
                $thousands .= $thousands_in_reverse[$i].$thousands_in_reverse[$i+1].",";
            }
            $thousands = strrev(trim($thousands,","));
            $formatted_rupee = $thousands.",".$hundreds;

        }
        else
        {
            $formatted_rupee = $rupee;
        }

        if((int)$paise>0)
        {
            $formatted_paise = ".".substr($paise,0,2);
        }else{
            $formatted_paise = '.00';
        }

        return $negative.$formatted_rupee.$formatted_paise;

    } 
```

* * *

## 回答 #21

> 赞同：-3
> 
> 时间：2015-02-12T07:37:10.547

```
declare @Price decimal(26,7)
Set @Price=1234456677
select FORMAT(@Price,  'c', 'en-In') 
```

**结果：**

```
1,23,44,56,677.00 
```

* * *

## 回答 #22

> 赞同：-3
> 
> 时间：2013-09-03T15:38:44.013

这是你可以做的简单的事情，

```
 float amount = 100000;

 NumberFormat formatter = NumberFormat.getCurrencyInstance(new Locale("en", "IN"));

 String moneyString = formatter.format(amount);

 System.out.println(moneyString); 
```

输出将为 100,000.00 卢比。

# java - Android - 从 url 获取图像作为 JSON 并在画廊视图中显示它们

> ID：10042488
> 
> 赞同：0
> 
> 时间：2012-04-06T10:52:10.747
> 
> 标签：java, android, eclipse, android-sdk-2.3

我需要使用 JSON 获取位于 url 上的一些图像，然后在图库视图中显示它们。有没有例子，或者至少有人可以描述我的确切步骤吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-06T10:55:47.290

1.  发出网络请求
2.  获取 JSON 响应并解析它
3.  使用它们的 URL 加载图像

使用此库将图像加载到您的图库视图中：**[Android Universal Image Loader](https://github.com/nostra13/Android-Universal-Image-Loader)**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-06T12:02:31.170

这是一个示例，可以根据需要为您提供完整的演示。

[阅读并学习它。](http://code.google.com/p/molokoloco-coding-project/wiki/AndroidJsonList)

Paresh Mayani 先生给你的步骤是一样的。

# wcf - wcf 肥皂服务 web.config 错误

> ID：10042491
> 
> 赞同：0
> 
> 时间：2012-04-06T10:52:26.503
> 
> 标签：wcf, soap

嗨，我想创建一个肥皂服务。当我运行它时，服务正常启动，但我无法从 php 连接到它，因为我收到以下错误：

**致命错误：第****6**行**C:\xampp\htdocs\soaptest\soaptest.php**中的最大执行时间超过 30 秒

 **第 6 行是： $client = new SoapClient('http://localhost:1741/TopicService.svc?wsdl'); 这是我的 web.config

```
<system.web>
    <compilation debug="true" targetFramework="4.0" />
    <trace enabled="false"/>
    <httpRuntime maxRequestLength="100000000" />
</system.web>

<system.serviceModel>

    <services>
        <service name="PptxToTopicWebService.TopicService">
            <endpoint address="soap" behaviorConfiguration="PptxToTopicWebService.ITopicService" binding="basicHttpBinding" bindingConfiguration="basicHttpBinding1" contract="PptxToTopicWebService.ITopicService" />
        </service>
    </services>
    <behaviors>
        <endpointBehaviors>
            <behavior name="PptxToTopicWebService.ITopicService">
            </behavior>
        </endpointBehaviors>
        <serviceBehaviors>
            <behavior name="">
                <dataContractSerializer maxItemsInObjectGraph="2147483647" />
                <serviceMetadata httpGetEnabled="true"  />
                <serviceDebug includeExceptionDetailInFaults="true" />
            </behavior>
        </serviceBehaviors>
    </behaviors>
    <serviceHostingEnvironment multipleSiteBindingsEnabled="true" aspNetCompatibilityEnabled="true" minFreeMemoryPercentageToActivateService="0" />
    <bindings>
        <basicHttpBinding>
            <binding name="basicHttpBinding1" maxReceivedMessageSize="10000000" maxBufferSize="10000000">
                <readerQuotas maxDepth="2147483647" maxStringContentLength="2147483647" maxArrayLength="2147483647" maxBytesPerRead="2147483647" maxNameTableCharCount="2147483647"/>
            </binding>
        </basicHttpBinding>
    </bindings>
</system.serviceModel> 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-06T10:55:47.317

如下所述修改您的终点。它会起作用的。似乎服务需要更多时间来响应。

```
<bindings>
                <basicHttpBinding>
                    <binding name="basicHttpBinding1" maxReceivedMessageSize="10000000" maxBufferSize="10000000" closeTimeout="00:10:00" openTimeout="00:10:00" receiveTimeout="00:10:00" sendTimeout="00:10:00">
                        <readerQuotas maxDepth="2147483647" maxStringContentLength="2147483647" maxArrayLength="2147483647" maxBytesPerRead="2147483647" maxNameTableCharCount="2147483647"/>
                    </binding>
                </basicHttpBinding>
            </bindings> 
```**

# android - 如何使用 android mobine 检测速度

> ID：10042494
> 
> 赞同：0
> 
> 时间：2012-04-06T10:52:48.410
> 
> 标签：android

我想在我用安卓设备开车时检测车速。我该怎么写？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-06T11:07:35.483

这很简单。了解如何使用 LocationManager 和 LocationListener -[从这里开始](http://developer.android.com/guide/topics/location/index.html)。[当侦听器为您提供结果位置时，您可以使用getSpeed()](http://developer.android.com/reference/android/location/Location.html#getSpeed%28%29)找出速度。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-06T11:06:35.480

它只是一个开始。还有很多事情要做。
`Vehicle measurements are accessed through an Android service. Your application connects to an in-process VehicleService which handles reading fresh data from the vehicle.`
有关详细信息，请参阅链接。
[http://openxcplatform.com/developers/android/library-usage.html](http://openxcplatform.com/developers/android/library-usage.html)

# c++ - Qt Sqlite 表列似乎消失了

> ID：10042495
> 
> 赞同：0
> 
> 时间：2012-04-06T10:53:11.280
> 
> 标签：c++, qt, sqlite, qt4

```
QSqlDatabase db = QSqlDatabase::addDatabase("QSQLITE");
db.setDatabaseName(":temp:");

if (!db.open()) {
    qDebug() << "Database open error." << db.lastError();
    return;
}

QSqlQuery query(db);
query.prepare("create table if not exists dew (id int, title varchar(255) not null)");
if (!query.exec()) {
    qDebug() << "Query exec error. " << query.lastError();
    return;
}
qDebug() << "Insert query exec OK";

if (!query.exec("insert into dew(id, title) values (1, 'hello')")) qDebug() << query.lastError(); 
```

将输出显示为

```
Insert query exec OK 
QSqlError(1, "Unable to execute statement", "table dew has no column named id") 
Insertion finished. 
```

表创建似乎没问题。但是**id**字段在哪里？我对这段代码感到困惑。我测试 **query.record().contains("id");** 这是**错误的**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T15:16:27.010

`":temp:"`不是临时数据库的有效名称，这会在磁盘上创建一个常规数据库，该数据库在数据库连接关闭后仍然存在。

要创建一个不会保存到文件的临时或内存中的 sqlite 数据库，您需要分别传递一个空字符串 (*) 或特殊字符串`":memory:"`作为数据库名称。

[http://www.sqlite.org/inmemorydb.html](http://www.sqlite.org/inmemorydb.html)

[Qt 不允许使用空`QString`作为数据库名称，但以 a`QString`开头的`'\0'`应该可以：`db.setDatabaseName(QChar(0));`]

# node.js - 从模块中使用 socket.io

> ID：10042505
> 
> 赞同：6
> 
> 时间：2012-04-06T10:54:09.017
> 
> 标签：node.js, socket.io

我`sio = require('socket.io').listen(app)`在我的 server.js 文件中，但我正在调用库中的一个方法，该方法想向客户端推送消息......说`api.user.pushToClient()`

我怎样才能`sio.sockets`从那里访问？也许我的结构不正确？

**文件夹结构：**

`server.js`

`api`

`|--user.js`

`|--another.js`

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-04-06T11:29:40.453

`server.js`附加这一行

```
module.exports.sio = sio; 
```

在`api/user.js`

```
sio = require('../server').sio;
sio.sockets.on ... 
```

还是我误解了这个问题？

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2015-11-27T13:31:06.400

我从问题中了解到的是您想知道如何将 socketIO 与 node 模块一起使用。根据我的理解，您可以按如下方式使用它：首先使用 npm 在本地安装 socketIO 模块，方法是为 windows 运行“$npm install socket.io”命令.

将脚本添加到您的 HTML 页面：

```
<script src="/socket.io/socket.io.js"></script> 
```

现在添加 var io = require('socket.io'); 到您将要使用它的服务器或 js 文件。

然后，您可以让服务器启动代码监听该服务器，并在连接时执行任何事件的选项。

```
var listener = io.listen(server);
listener.sockets.on('connection', function(socket) {
    socket.on('locationClick', function(data) {
        // perform the function on receving locationClick event.
    }
} 
```

# iphone - iPhone摄像头直播

> ID：10042506
> 
> 赞同：3
> 
> 时间：2012-04-06T10:54:12.747
> 
> 标签：iphone, ffmpeg, avfoundation, decoding

我已经下载了 ffmpeg lib 文件并为 armv7 编译了它。我在我的项目中成功添加了 ffmpeg lib 文件。我能够使用 AVFoundation 获得 iphone 相机实时流。

现在的问题是我将如何将 iphone 相机流输出转换为 ffmpeg 的输入进行解码？检查我的代码

```
- (void)captureOutput:(AVCaptureOutput *)captureOutput didOutputSampleBuffer:(CMSampleBufferRef)sampleBuffer fromConnection:(AVCaptureConnection *)connection {

CMBlockBufferRef bufferData = CMSampleBufferGetDataBuffer(sampleBuffer);
size_t lengthAtOffset;
size_t totalLength; char* data; 
```

> if(CMBlockBufferGetDataPointer(bufferData, 0, &lengthAtOffset, &totalLength, &data) != noErr ){ NSLog(@"error!"); } }

请建议我使用 ffmpeg lib 的哪个函数进行解码，我将如何将`CMBlockBufferRef`其作为输入？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T05:13:47.320

您可以使用 OPenTok 进行实时视频流传输

[https://github.com/opentok/opentok-ios-sdk](https://github.com/opentok/opentok-ios-sdk)

# c# - 如何在access数据库中插入string[]数据，如何取回这些数据

> ID：10042508
> 
> 赞同：-1
> 
> 时间：2012-04-06T10:54:37.410
> 
> 标签：c#, ms-access, ms-access-2007, multiline, arrays

我有一张放电影的桌子。有一个简短描述的字段。

在 Access 中使用**MEMO**字段（正确吗？）。
然后我从具有**多行的****TextBox**添加一些信息。 添加没有错误后，但在**DataGridview**的这个字段中只有**System.String[]**。 怎么了？ 以及如何从该字段将数据返回到多行文本框？

 ******* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T11:20:20.077

MEMO 字段需要单个值，而不是数组。然后使用默认`ToString()`实现，它将返回`"System.String[]"`.

您可以通过加入每个数组成员来存储单个字符串值：

```
string singleString = string.Join("\r\n", textboxLines); 
```

但可能 TextBox 也有一个属性，可以将数据作为单个字符串返回。******

# jquery - jquery中的下拉菜单

> ID：10042512
> 
> 赞同：1
> 
> 时间：2012-04-06T10:54:56.037
> 
> 标签：jquery

`mouseeneter(`你好朋友，我使用) 和`mouseout()`jQuery设计了一个下拉菜单。问题是当我`mouseout()`从主菜单中时，下拉链接向上滑动。我不知道如何设置条件请帮忙。我的代码是

jQuery

```
<script>
$(document).ready(function(){
    //alert('hi');
    $('#link-detail').css('display','none');
    $('#hover-detail').mouseenter(function(){
        $('#link-detail').css({position:'absolute',top:'20px',left:'0px',zindex:'99999'});
        $('#link-detail').slideDown();
        });
        $('#hover-detail').mouseout(function(){
        $('#link-detail').slideUp();
        });

    })
</script> 
```

html

```
<div class="link-detail-wrap"><div id="hover-detail">hover me</div>
<div>
  <ul id="link-detail">
    <li><a href="#">link 1</a></li>
    <li><a href="#">link 1</a></li>
    <li><a href="#">link 1</a></li>
    <li><a href="#">link 1</a></li>
    <li><a href="#">link 1</a></li>
  </ul>
</div></div>
<div>hihihih</div> 
```

CSS

```
.link-detail-wrap
{
    float:left;
    width:100%;
    position:relative;
    }

ul#link-detail 
{
    margin:0;
    padding:0;
    border:solid 1px #666;
    border-bottom:none;

    }
ul#link-detail  li
{
    list-style:none;
    margin:0;
    padding:0;
    display:inline;

    }
ul#link-detail  li a
{
    text-decoration:none;
    color:#333;
    padding:2px 50px 2px 10px;
    background:#F0F0F0;
    border-bottom:1px solid #666;
    /*line-height:25px;*/
    font:12px "Trebuchet MS", Arial, Helvetica, sans-serif;
    text-transform:capitalize;
    display:block;
    }
ul#link-detail  li a:hover
{
    background:#CCC;
    } 
```

您也可以在[http://jsfiddle.net/36CXK/上看到它](http://jsfiddle.net/36CXK/)

请帮忙

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T11:33:52.603

一种方法是使用具有一定延迟的超时在鼠标离开时向上滑动菜单。每次悬停菜单时都可以清除此超时，以防止动画发生。

我创建一个对象`Dropdown`来控制超时：

```
var Dropdown = {
    timer: 0,
    hide: function(callback, delay){
        this.timer = setTimeout(function() {
            return callback.call(this, arguments);
        }, delay);
    },
    reset: function(){
        this.timer && clearTimeout(this.timer);
    }
}; 
```

您可以重构代码以使用它：

```
$('#link-detail').css('display', 'none');

$('#hover-detail').hover(function() {
    Dropdown.reset();
    $('#link-detail').css({
        position: 'absolute',
        top: '20px',
        left: '0px',
        zindex: '99999'
    });
    $('#link-detail').slideDown();
}, function() {
    Dropdown.hide(function(){
        $('#link-detail').slideUp();
    }, 200);
});

$('#link-detail').hover(function() {
    Dropdown.reset();
}, function(){
    Dropdown.hide(function(){
        $('#link-detail').slideUp();
    }, 200);
}); 
```

这是[一个工作小提琴](http://jsfiddle.net/Y3ymB/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-06T11:14:39.617

在您的脚本区域中使用此脚本

```
<script type="text/javascript">
$(document).ready(function(){
        //alert('hi');
        $('#link-detail').css('display','none');

            $("#hover-detail").hover(
  function () {
    $('#link-detail').css({position:'absolute',top:'20px',left:'0px',zindex:'99999'});
            $('#link-detail').slideDown();
  }, 
  function () {
    // do nothing
  }
);

$(".relation").hover(
  function () {
   // do nothing
  }, 
  function () {
    $('#link-detail').slideUp();
  }
);
 })
</script> 
```

并在额外的 CSS 类上创建

```
.relation {
    position:relative;
    top:-20px;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-06T11:00:23.730

只需注释掉该`$('#link-detail').slideUp();`行。

看这里：

[http://jsfiddle.net/36CXK/1/](http://jsfiddle.net/36CXK/1/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-06T11:02:10.920

为什么不使用已经可用的 jQuery 下拉列表插件之一：

*   [http://www.filamentgroup.com/lab/jquery_ui_selectmenu_an_aria_accessible_plugin_for_styling_a_html_select/](http://www.filamentgroup.com/lab/jquery_ui_selectmenu_an_aria_accessible_plugin_for_styling_a_html_select/)
*   [http://www.devirtuoso.com/2009/08/styling-drop-down-boxes-with-jquery/](http://www.devirtuoso.com/2009/08/styling-drop-down-boxes-with-jquery/)
*   [http://www.devirtuoso.com/2009/08/styling-drop-down-boxes-with-jquery/](http://www.devirtuoso.com/2009/08/styling-drop-down-boxes-with-jquery/)
*   [http://www.adamcoulombe.info/lab/jquery/select-box/](http://www.adamcoulombe.info/lab/jquery/select-box/)
*   [http://www.queness.com/post/204/25-jquery-plugins-that-enhance-and-beautify-html-form-elements](http://www.queness.com/post/204/25-jquery-plugins-that-enhance-and-beautify-html-form-elements)

它们很容易设计，所有的功能都已经实现了。您需要做的就是根据您的喜好设置下拉菜单的样式。

# c# - 多态性：正确

> ID：10042513
> 
> 赞同：2
> 
> 时间：2012-04-06T10:55:02.573
> 
> 标签：c#, .net, inheritance, polymorphism

我试图弄清楚 C# 中的多态性/继承情况。

我现在拥有的是这些课程：

```
Lease (the base class containing the general data)
PrivateLease (inheriting from the Lease class)
BusinessLease (inheriting from the Lease class) 
```

我想要实现的是：

```
Lease lease = new PrivateLease(); 
```

这目前有效，但在执行此操作时我无法访问`PrivateLease`对象的属性。至少在没有先将对象转换为`Lease`对象的情况下并非如此`PrivateLease`。

我希望该`Lease`对象成为 a`PrivateLease`或`BusinessLease`object 的一般对象，该对象包含其中一个对象的所有数据。然后，在向数据库插入/更新/删除时，我会先询问它是哪种类型，以确定将数据插入到哪些表中。

我有一种奇怪的感觉，上面不是解决这个问题的正确方法。有人对此有任何提示吗？:-) 我在谷歌上搜索并阅读了我的编程书籍，每个人都建议这种方法拥有一个基类，然后从它继承到其他类。

非常感谢任何帮助/提示！

提前致谢。

**编辑**

应该从一开始就详细说明这一点，我很抱歉！

上面提到的类只是从我的 ASP.NET 解决方案的 UI 中保存数据，以通过数据访问层对数据库执行 CRUD 操作。所以基本上这些类只包含一堆保存数据的属性。IE：

```
public class Lease
{
    public int Id { get; set; }
    public bool IsActive { get; set; }
    public string TypeOfRental { get; set; }
    public string RentalPeriod { get; set; }
    public DateTime TakeoverDate { get; set; }        
}

public class PrivateLease : Lease
{
    public string Floor { get; set; }
    public string Side { get; set; }
    public int FloorSize { get; set; }
    public int NumberOfRooms { get; set; }
} 
```

ETC..

`PrivateLease`和类是不同的`BusinessLease`，因为现实世界中存在不同的租赁变量:-)

基本上我可以只使用两个单独的`PrivateLease`and`BusinessLease`对象，但是由于模型规定一个`Address`对象可以容纳一个或多个`Lease`s，所以这不是一个选择。

对我来说，似乎我将在 ASP.NET 前端和 DAL 上经历一次重大的铸造地狱？：-/

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-06T11:03:46.797

不要在消费者层决定（选择逻辑），而是让类自己决定：

```
// or you ILease interface if a parent class will not contain any shared logic
abstract class Lease
{
    public abstract void Do();

    // example of shared logic
    protected void Save(Lease l) { }
}

class PrivateLease : Lease
{
    public override void Do() { // private logic here }
}

class BusinessLease : Lease
{
    public override void Do() { // business logic here }
} 
```

用法：

```
Lease l = ...
l.Do(); // execute the logic 
```

* * *

您可能希望为对象创建创建工厂：

```
static class LeaseFactory<T> where T : Lease, new() // constraint to require default constructor existence
{
    public static Leas Create()
    {
        return new T();
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-06T10:58:35.870

您在拥有基类的基本方法上是正确的。

您需要做的是将任何*公共*属性放在基类中。然后，如果您有不同的业务规则，则可以使用虚函数来实现这些规则，并以多态方式调用它们。

```
abstract class Lease
{
  public int MonthlyCost {get;set;}

  public string CustomerName {get;set;}

  // Declare that all Leases have to have an IncreaseCost method.
  public abstract void IncreaseCost();
}

class PrivateLease : Lease
{
  // Private leases are incremented by an absolute number (10).
  public override void IncreaseCost()
  {
    MonthlyCost += 10;
  }
}

class BusinessLease : Lease
{
  // Business leases are incremented by 10%.
  public override void IncreaseCost()
  {
    MonthlyCost *= 1.10;
  }
}

// Somewhere in your code...
Lease lease = new PrivateLease();

// This call is polymorphic. It will use the actual type of the lease object.
lease.IncreaseCost(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-06T11:03:34.640

在现代 OOD 中，您可以使用`interfaces`, 来应对这种情况。

**编辑：**

在我看来，为了避免强制转换，您可以有多个接口用于多种用途。然后可以实施适当的`PrivateLease`。`BusinessLease`

```
interface IWrite
{
    string Data { get; set; }
    void Write();
}

interface IRead
{
    string Data { get; set; }
    void Read();
}

public class Lease
{
    //..
}

public class PrivateLease : Lease, IWrite, IRead
{
    // other implementations
    public string Data { get; set; }
    public void Read()
    {
        //..
    }
    public void Write()
    {
        //..
    }
}
public class BusinessLease : Lease, IRead
{
    // other implementations
    public string Data { get; set; }
    public void Read()
    {
        //..
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-06T16:19:57.443

在 Lease 类中添加名为 DBUpdate 的虚拟方法，并在两个派生类中**覆盖它。**

假设某个 Utility 类具有 LeaseDBOperation 方法，如下所示：

```
public static void LeaseDBOperation (Lease anylease)
{

  anyleaase.DBUpdate();
} 
```

您可以将此方法称为：

```
var pl = new PrivateLease();
..set all the properties of **pl**
//call this for db operations  :
Utility.LeaseDBOperation(pl) 
```

这里在 LeaseDBOperation 方法中，如果根据类型 send ，将调用所需类的 DBUpdate 方法。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-04-06T10:59:59.780

```
Lease l = (Lease)sth;

if (l is PrivateLease)
{
    PrivateLease p = (PrivateLease)l;    
    //do private logic here
}
else if (l if BussinessLease)
{    
    BussinessLease b = (BunessinessLease)l;
    //do bussiness logic here
} 
```

# function - MATLAB 中二维函数的着色区域/不等式

> ID：10042516
> 
> 赞同：1
> 
> 时间：2012-04-06T10:55:28.583
> 
> 标签：function, matlab, plot, region

我已经用两个输入参数定义了我自己的函数（称之为 z(x,y) 说）并设法生成了一个等高线图。我现在想做的是对区域进行阴影处理，例如 z > 5。主要问题是 z 太复杂而无法自己推断出对 x,y 的限制。有什么简单的方法可以做到这一点吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-06T11:31:02.523

您是否尝试使用 NaN？

```
z(condition) = nan; 
```

在调用 contour() 之前，条件可以是 z、x、y 的任意组合，生成二进制矩阵，例如：

```
z(abs(z) > x - y) = nan; 
```

# php - Facebook 不显示所有打开的图形图像

> ID：10042523
> 
> 赞同：1
> 
> 时间：2012-04-06T10:56:17.630
> 
> 标签：php, html, facebook, facebook-opengraph

我有一个网页，其中包含一些用于 Facebook 的标准[开放图形](https://developers.facebook.com/docs/opengraph/)元标记。我的问题是，如果我在 facebook 状态消息中放置一个指向该页面的链接，它只会显示 5 个图像中的 2 个。2\. 和 3\. 但不是其他的。

我的第一个想法是：我做错了什么，所以我用[FB 调试器](https://developers.facebook.com/tools/debug)检查了页面，但它显示了所有图像。我现在等了一个星期，但问题并没有自行解决。

对此有什么想法吗？

这个错误可能是相关的，但它也没有解决方案：[https ://developers.facebook.com/bugs/107341092730662](https://developers.facebook.com/bugs/107341092730662)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-19T08:37:54.967

该问题与您提供的图像尺寸有关。饲料中未出现的图像是边比大于 3:1 的图像。

您提供的页面有5张图片（比例大于3的将不会被Like Button使用）：

```
250 × 67 -> ratio 3.73
250 × 186 -> ratio 1.34 (this image will work)
250 × 166 -> ratio 1.5 (this image will work)
251 × 59 -> ratio 4.25
172 × 54 -> ratio 3.18 
```

有一点是要避免使用太长或太宽的图像，这些图像可能不适合在 Feed 中以小尺寸显示。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-04T22:49:12.217

我看到关于图像是否必须为 50px x 50px 或 200px x 200px 的相互矛盾的信息。截至今天（2012 年 9 月 9 日），根据经验和 FB 自己的文档，我很清楚：

**图形的最小尺寸必须为 200px x 200px，才能成功用作 og:image。**

否则，我相信纵横比和格式信息与以前的海报所指出的并没有什么不同。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-16T18:02:53.713

我发现如果描述末尾有空格，就会出现这个警告。

# android - Android视图寻呼机几秒钟后自动换页

> ID：10042526
> 
> 赞同：13
> 
> 时间：2012-04-06T10:56:40.923
> 
> 标签：android, android-viewpager, android-sdk-2.1

我现在使用 android view pager 来显示图像和文本我想要的是，如果用户没有更改图像，那么它应该在几秒钟后开始自动更改图像，当用户再次开始使用他的手指然后图像不应该自动改变吗？

我尝试使用处理程序来创建延迟，但它对我不起作用？

请帮助任何人

```
public class SimpleImageViewerActivity  extends Activity implements ViewPager.OnPageChangeListener{
    private Handler handler;
    ViewPager myPager;
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.imageslideshow);
        MyPagerAdapter adapter = new MyPagerAdapter();
        myPager = (ViewPager) findViewById(R.id.slideShowPager);
        myPager.setAdapter(adapter);
        myPager.setCurrentItem(0);

        handler = new Handler();
    myPager.setOnPageChangeListener(this);
    }

    private class MyPagerAdapter extends PagerAdapter {

        public int getCount() {
            return 5;
        }

        public Object instantiateItem(View collection, int position) {

            LayoutInflater inflater = (LayoutInflater) collection.getContext()
                    .getSystemService(Context.LAYOUT_INFLATER_SERVICE);

            int resId = 0;
            switch (position) {
            case 0:
                resId = R.layout.farleft;
                break;
            case 1:
                resId = R.layout.left;
                break;
            case 2:
                resId = R.layout.middle;
                break;
            case 3:
                resId = R.layout.right;
                break;
            case 4:
                resId = R.layout.farright;
                break;
            }

            View view = inflater.inflate(resId, null);

            ((ViewPager) collection).addView(view, 0);

            return view;
        }

        @Override
        public void destroyItem(View arg0, int arg1, Object arg2) {
            ((ViewPager) arg0).removeView((View) arg2);

        }

        @Override
        public void finishUpdate(View arg0) {
            // TODO Auto-generated method stub

        }

        @Override
        public boolean isViewFromObject(View arg0, Object arg1) {
            return arg0 == ((View) arg1);

        }

        @Override
        public void restoreState(Parcelable arg0, ClassLoader arg1) {
            // TODO Auto-generated method stub

        }

        @Override
        public Parcelable saveState() {
            // TODO Auto-generated method stub
            return null;
        }

        @Override
        public void startUpdate(View arg0) {
            // TODO Auto-generated method stub

        }

    }

    @Override
    public void onPageScrollStateChanged(int arg0) {
        // TODO Auto-generated method stub

    }

    @Override
    public void onPageScrolled(int arg0, float arg1, int arg2) {
        // TODO Auto-generated method stub

        updateUI(arg2);
    }

    @Override
    public void onPageSelected(int arg0) {
        // TODO Auto-generated method stub
        //updateUI(arg0);

    }

    public void onNothingSelected(AdapterView<?> adapterView) {    
        final int i =0;
        adapterView.postDelayed(new Runnable(){

            @Override
            public void run() {
                // TODO Auto-generated method stub
                updateUI(i);            
            }

        }, 5000);
        Toast.makeText(this, "In nothing selected method",Toast.LENGTH_SHORT).show();

    }

    private void updateUI(final int fi) {
           /* handler.post(new Runnable() {
                public void run() {
                    gallery.setSelection(i);
                    viewPager.setCurrentItem(i);

                    //textView.setText("Photo #" + i);
                }
            });*/
            handler.postDelayed(new Runnable() {
                public void run() {
                    int i=fi;
                    int j = i;
                    myPager.setCurrentItem(j++);
                    System.out.println("Hello");             

                }
            },1000);
        }   

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-06T11:12:16.013

使用 javautil timer 并设置一个，在计时器结束时您可以使用

```
class UpdateTimeTask extends TimerTask {
   public void run() {
    //Code for the viewPager to change view
  }
 }

 // Code to schedule the timer
 timer = new Timer();
 timer.schedule(new UpdateTimeTask(), 100, 200); 
```

希望这会有所帮助，请使用 android 文档进行准确的 API 调用

```
<ViewPager>.setCurrentitem(i++%<MaxViews>) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-29T13:36:22.860

就 UI 更新而言，您可以通过处理程序来完成，因此在 timertask 类中调用处理程序，您可以执行以下操作：

```
Timer timer=null;
static int time_tomove = 0;

class UpdateTimeTask extends TimerTask {
       public void run() {
        //Code for the viewPager to change view
           System.out.println("The value of the time_tomove ");
           time_tomove++;
           Message msg = handler_timer.obtainMessage();
            Bundle b = new Bundle();
            b.putInt("time", time_tomove);
            msg.setData(b);
            handler_timer.sendMessage(msg);
      }
     }

public static Handler handler_timer = new Handler(){
    @Override
    public void handleMessage(Message msg) {
        super.handleMessage(msg);
    magazineHolder.setCurrentItem(time_tomove);
    }
}; 
```

完成此操作后，您可以在 onresume 或 oncreate() 方法中调用以下两行

```
timer = new Timer();
         timer.schedule(new UpdateTimeTask(), 100, 2000); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-01-22T17:54:35.170

## 科特林方式

这是来自 Fragment 上下文，`requireActivity()`如果您在 Activity中，请删除

```
private var timer: Timer? = null
private var page = 0
private var maxPages = 4

   // Use this method to setup your viewpager in your onCreate() or onActivityCreated() methods
   fun setupViewPager(){
    viewPager2.adapter = MyAdapter()
    viewPager2.isUserInputEnabled = false
    pageSwitcher(5)
}

fun pageSwitcher(seconds: Int) {
    timer = Timer()
    timer!!.scheduleAtFixedRate(RemindTask(), 0, seconds * 1000.toLong())
}

class RemindTask:TimerTask(){

        override fun run() {
            requireActivity().runOnUiThread {
                if(page == maxPages){
                    page = 0
                }else{
                    viewPager2.setCurrentItem(page++,true)
                }
            }
        }
    } 
```

# git - 如何在我的托管 Web 服务器上签出 git 标签

> ID：10042527
> 
> 赞同：2
> 
> 时间：2012-04-06T10:56:46.020
> 
> 标签：git, github, web-hosting

我一直在开发一个 Web 应用程序并在项目中使用 git。到目前为止，我一直在本地机器上运行它。现在我想在我的托管 Web 服务器上查看它，我想创建一个标签。所以使用`git tag -a v0.1 -m 'version0.1'`它的命令。命令`git tag`列出了我刚刚创建的标签。现在的问题是我如何在我的网络服务器上拥有（结帐）这个标签？

我的托管网络服务器理解 git 命令。我想知道在我的服务器上有这个标签的命令或过程。服务器上不会有任何开发。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-06T11:57:57.553

我了解您希望将 git tag 本地存储库副本复制到您的托管 Web 服务器上。您还提到您的托管 Web 服务器已设置为理解 git 命令。

现在在您的本地机器上，为远程网络服务器定义一个名称并推送标签：

```
$ git remote add myHostedWebServer ssh://server.example.org/path/toyour/website.git

$ git push --tags myHostedWebServer 
```

希望这可以帮助

**更新：** 按照我理解您的问题的方式，您希望将本地更改直接推送到托管的 Web 服务器。如果是这样，您可以按照上述步骤进行操作。但是，既然您已经提到您在 github 上有您的代码，并且希望从您的 github 更新您的 Web 主机服务器，那么有几种方法，其中之一是：

*   在您的本地机器上执行：`$git push myDefinedName master`
*   正如您所提到的，您的主机服务器理解 git 命令并假设您有 git init --bare 来创建存储库，导航到与 git 关联的托管 Web 服务器目录并执行以下操作：

    `$git pull myDefinedName master`

    `$git checkout <tag name>`

    或者，您可以使用接收后挂钩。[您可以在此处](http://toroid.org/ams/git-website-howto)获取更多详细信息

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-09T16:02:04.707

我想出了一个简单的方法。无需定义新的遥控器。

*   第 1 步：在本地机器上（提交代码后）只需执行以下操作：

```
    $ git tag -a vx.xx -m "版本 xxx"
    $ git push --tags

```

*   第 2 步：然后在托管服务器上，导航到您必须结帐的文件夹，然后执行：

```
    $ git clone git@github.com:username/proj.git
    $ cd项目
    $ git checkout vx.xx

```

现在，如果您必须为下一个版本创建另一个标签，比如说 xxy，然后重复上面的步骤 1，将 xxx 替换为 xxy，并将步骤 2 替换为以下内容。

*   第 2 步：在托管服务器上执行以下操作。

```
    $ cd项目
    $ git fetch --tags
    $ git checkout vx.xy

```

# hibernate - 这个 HQL 有什么问题？“返回空值以在连接查询中选择实体”

> ID：10042531
> 
> 赞同：1
> 
> 时间：2012-04-06T10:57:28.673
> 
> 标签：hibernate, null

```
session.createQuery("select ccrd.createdDate , s1 "
+  "from  CrComponentRelDependency ccrd "   
+  "left outer join ccrd.crComponentDependencyDtls s1 "   
+  "where ccrd.crComponent.componentSeq= :COMPONENT_SEQ " 
+  "and (ccrd.referencedComponentVer IS NULL) "
 .setParameter("COMPONENT_SEQ", componentId); 
```

此查询为*ccrd.createdDate*提供有效值，但它为*s1*实体返回 NULL。***我已经定义了CrComponentRelDependency***和***crComponentDependencyDtls***之间的一对一关系。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T13:30:25.170

HQL 为您完成所有连接，因此*不要*显式连接表。尝试这个：

```
session.createQuery("select createdDate, crComponentDependencyDtls "
+  "from CrComponentRelDependency ccrd "   
+  "where crComponent.componentSeq = :COMPONENT_SEQ " 
+  "and referencedComponentVer IS NULL")
 .setParameter("COMPONENT_SEQ", componentId); 
```

还要注意从 HQL 中删除不必要的限定和括号。

# ruby-on-rails - 活动模型中的 RSPEC 关联

> ID：10042532
> 
> 赞同：1
> 
> 时间：2012-04-06T10:57:31.137
> 
> 标签：ruby-on-rails, rspec

如何在 rspec 中测试外键关联，

这是代码

```
has_one :store, :foreign_key => "seller_id", :class_name => "Store" 
```

如何为此代码编写 rspec

请告诉我一些建议

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-06T11:19:02.420

Model.new.build_store.class.should eql Store

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-06T15:41:15.973

答案是 shoulda-matchers gems。看看这个：[https ://github.com/thoughtbot/shoulda-matchers](https://github.com/thoughtbot/shoulda-matchers)

```
describe Post do
  it { should belong_to(:user) }
  it { should have_many(:tags).through(:taggings) }
end

describe User do
  it { should have_many(:posts) }
end 
```

# qt - QMainWindow 忽略点击，将它们传递给后台窗口

> ID：10042533
> 
> 赞同：7
> 
> 时间：2012-04-06T10:57:45.737
> 
> 标签：qt

我想创建一个不妨碍用户其他活动的半透明信息窗口。窗口上的任何点击都应该像窗口不存在一样通过。

你会如何建议实施这种行为？有没有一种简单的方法可以做到这一点，还是我必须遵循一个笨拙的解决方法？我正在考虑隐藏窗口，重新执行单击，然后使窗口再次可见。但这仍然会搞砸拖放手势。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-06T11:38:54.793

Take a look at an enum value of [Qt::WidgetAttribute](http://qt-project.org/doc/qt-5/qt.html#WidgetAttribute-enum): `Qt::WA_TransparentForMouseEvents`:

> When enabled, this attribute disables the delivery of mouse events to the widget and its children. Mouse events are delivered to other widgets as if the widget and its children were not present in the widget hierarchy; mouse clicks and other events effectively "pass through" them. This attribute is disabled by default.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-06T17:18:36.930

我对“鼠标事件透明度”做了更多研究（不知道确切的术语），我发现[了这个](http://www.qtcentre.org/threads/35684-How-pass-part-of-the-mouse-events-through-a-top-level-window-to-the-windows-below?p=164778#post164778)。

> 我认为您的问题没有通用且简单的方法。您可能必须深入研究本机 API。一旦事件到达一个应用程序，它们就不会自行转发到其他应用程序。

你们有什么感想？我注定要使用每个操作系统的原生 API 吗？

# android - 安卓 SIP 客户端

> ID：10042534
> 
> 赞同：1
> 
> 时间：2012-04-06T10:57:57.407
> 
> 标签：android, sip, voip

这是使用任何外部库为 android 启动 SIP 客户端的更好方法。因为本机内置 SIP 库仅适用于高于 2.3.1 的版本。寻找更好、更简单的解决方案来为较低版本的 android 构建 SIP 客户端.任何人都可以帮助解决这个问题...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T10:35:30.703

我使用了与 WiFi、EDGE 和 GPRS 配合使用的[IMSDroid 。](http://code.google.com/p/imsdroid/)但是apk文件大约15-20MB。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-06T11:13:45.403

要开始实施软件 SIP 客户端，您需要第 3 方 SIP 实施堆栈。查看[此线程](https://stackoverflow.com/q/9787556/1007273)以获取 sip 实现堆栈的列表。

要找什么：

*   评估您需要的功能和 sip-stack 提供的功能（它们的区别主要在于支持的音频/视频编解码器和会议音频/视频通话支持）
*   注意 sip stack 实现的最新发布日期。“最近的发布日期”通常意味着更好的支持和更好的功能。

您还将看到使用这些 SipStacks 的流行开源软件客户端，这意味着源代码就在那里，您可以看到它们如何与 sipstacks 结合。

# windows-8 - AppFabric 1.1 和 Windows 8 消费者预览版

> ID：10042536
> 
> 赞同：5
> 
> 时间：2012-04-06T10:58:11.103
> 
> 标签：windows-8, appfabric

我为我的工作买了一台新笔记本电脑，并且正在考虑安装 Win8 CP 作为我的主要操作系统，我喜欢它，所以我尝试在 VM 中进行一些测试，看看 AppFabric 缓存是否可以在 Win8 CP 中工作。MS的官方回应是“Win8不支持AppFabric，我们会在Win8发布时告诉你如何运行它”当然这对我来说不是一个好的答案，所以我尝试了......但失败了......

在安装 .Net 3.5SP1 和最新更新后，AppFabric 缓存在我的 Win8 机器上安装和配置没有任何问题，使用我的本地用户和共享文件夹中的 XML 提供程序，我授予了该文件夹的权限和所有内容......

第一个问题是缓存管理员控制台在我每次打开它时都会回复此消息：

```
Use-CacheCluster : ErrorCode<ERRCAdmin040>:SubStatus<ES0001>:Failed to connect
to hosts in the cluster At line:1 char:46
   + Import-Module DistributedCacheAdministration;Use-CacheCluster
   +                                              ~~~~~~~~~~~~~~~~
   + CategoryInfo          : NotSpecified: (:) [Use-CacheCluster], DataCacheException
   + FullyQualifiedErrorId : Microsoft.ApplicationServer.Caching.DataCacheException,Microsoft.ApplicationServer.Caching.Commands.UseCacheClusterCommand

PS C:\Windows\system32> 
```

嗯，看起来有些不对劲……让我们尝试启动缓存集群

```
PS C:\Windows\system32> start-cachecluster

HostName : CachePort Service Name            Service Status Version Info
-------------------- ------------            -------------- ------------
win8:22233           AppFabricCachingService UP             0 [0,0][0,0]

PS C:\Windows\system32> 
```

版本信息答案根本不正确，因此创建新缓存可能会失败

```
PS C:\Windows\system32> new-cache IPE
New-Cache : Object reference not set to an instance of an object.
At line:1 char:1
+ new-cache IPE
+ ~~~~~~~~~~~~~
    + CategoryInfo          : NotSpecified: (:) [New-Cache], NullReferenceExce
   ption
    + FullyQualifiedErrorId : System.NullReferenceException,Microsoft.Applicat
   ionServer.Caching.Commands.NewCacheCommand

PS C:\Windows\system32> 
```

几乎就是这样……

我尝试了所有在互联网上可以找到的东西：

*   启动遥控器
*   注册表服务修改 windows/system32/drivers/etc/host 中的主机文件以将显式条目放置到 localhost 和我的机器名称
*   检查权限
*   在安装更新
*   打开防火墙规则

（对于防火墙规则，我尝试了类似的方法）

```
netsh advfirewall firewall set rule group="Windows Server AppFabric: AppFabric Caching Service" new enable=Yes
netsh advfirewall firewall set rule name="Remote Service Management (RPC)" profile=domain new enable=Yes
netsh advfirewall firewall set rule name="Remote Service Management (RPC-EPMAP)" profile=domain new enable=Yes
netsh advfirewall firewall set rule name="Remote Service Management (NP-In)" profile=domain new enable=Yes 
```

仍然遇到同样的问题......我不知道从哪里开始或继续解决问题......我真的很感激任何帮助，是的，我真的很难等到 Win8 正式发布。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-29T19:00:50.913

启动远程注册表服务（如果未启动）。AppFabric 甚至使用此服务连接到您的本地机器 [链接](http://social.msdn.microsoft.com/Forums/en-US/velocity/thread/e977c98d-32e6-4b58-8947-6248cdcf5020)

# azure - 了解 Milton WebDAV 服务器与云环境负载均衡器一起使用

> ID：10042537
> 
> 赞同：1
> 
> 时间：2012-04-06T10:58:11.493
> 
> 标签：azure, cloud, load-balancing, webdav, milton

我们希望使用 Milton WebDav 在我们的 Web 应用程序中传输文件，最终将作为 IaaS 部署在云环境（很可能是天蓝色）上。现在我们知道 WebDAV 标准是无状态的，因此它不应该对云负载均衡器造成任何问题，但是我们对 Milton 不确定并且有几个问题：

1.) Milton 是否按原样实施 WebDAV，是否所有通信都保持无状态？我假设它通过每个请求传递身份验证令牌，但我不确定令牌存储在服务器的什么位置？它是否将其存储在数据库或某种缓存等中？

2.) 如果使用负载平衡并且有 5-6 台服务器来处理负载，锁定机制是否工作正常？再次，Milton 服务器将 Lock Token 存储在哪里？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T00:33:25.043

抱歉迟到的评论，影响负载平衡的 webdav 的两个最重要方面是摘要身份验证令牌（Nonce 值）和锁定令牌。

作为资源实现者，您可以控制这两者。锁定令牌通常存储在数据库中（您必须在 LockableResource 上实现将执行持久性的方法），因此将在服务器之间共享，尽管使用基于内存的锁定令牌并不少见，在这种情况下，您需要找到一些方法来跨服务器共享该信息。

仅当您实现了 DigestResource 时，才需要考虑摘要随机数。默认的 NonceProvider 使用简单的 HashMap，因此不会在服务器之间共享。但是接口很简单，因此您可以轻松实现数据库存储。如果您的负载平衡解决方案使用粘性会话，那么这将不是问题，因为客户端将转到具有其 nonce 的服务器。

请注意，Tomcat 会话复制对上述问题没有帮助，因为 webdav 客户端通常不支持 cookie，因此没有 Servlet 会话。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-07T13:09:36.413

我以前从未使用过 Milton WebDAV，但从外观上看，它用于修改和编辑服务器上的文件。

但是 Azure 的本地存储不共享。每个实例都是一个完全独立的服务器。如果您在一台服务器上修改文件，它将不会被复制到下一台服务器。

Azure 通过上传部署包来工作。当需要启动一个新实例时，它会使用部署包并启动一个全新的服务器。

从你的角度来看，他们没有任何共同点。因此，您永远不会知道您正在访问哪个服务器。

如果您背后有共享文件存储系统，那么情况可能就不同了。但是，从使用 Azure 来看，这种情况看起来很奇怪。不过，带有共享 EBS 的 Amazon EC2 可能会这样做。

# iphone - 应用程序在加载图像时显示内存不足警告和崩溃？

> ID：10042542
> 
> 赞同：1
> 
> 时间：2012-04-06T10:58:41.043
> 
> 标签：iphone, memory-management, uiimage

我正在使用以下代码使用以下代码从服务器加载图像。当我滚动 UITableView 应用程序崩溃时。

AsynchrhousImageView 类 .m 文件

```
- (void)dealloc {
[connection cancel]; //in case the URL is still downloading
[connection release];
[data release]; 
[_imageView release];
[_activityIndicator release];
[super dealloc];
}

- (void)loadImageFromURL:(NSURL*)url 
   defaultImageName:(NSString *)defaultImageName 
   showDefaultImage:(BOOL)defaultImageIsShown 
   showActivityIndicator:(BOOL)activityIndicatorIsShown 
   activityIndicatorRect:(CGRect)activityIndicatorRect
   activityIndicatorStyle:(UIActivityIndicatorViewStyle)activityIndicatorStyle {

if (connection!=nil) { [connection release]; }  if (data!=nil) { [data release]; }

 if ([[self subviews] count]>0) {
    [[[self subviews] objectAtIndex:0] removeFromSuperview]; // }

 if (defaultImageIsShown) {
      self.imageView = [[[UIImageView alloc] initWithImage:[UIImage imageNamed:defaultImageName]] autorelease];
} else {
    self.imageView = [[[UIImageView alloc] init] autorelease];
}

[self addSubview:_imageView];
_imageView.frame = self.bounds;
[_imageView setNeedsLayout];   
[self setNeedsLayout];

if (activityIndicatorIsShown) {

    self.activityIndicator = [[[UIActivityIndicatorView alloc] initWithActivityIndicatorStyle:activityIndicatorStyle] autorelease];
    [self addSubview:_activityIndicator];
    _activityIndicator.frame = activityIndicatorRect;
    _activityIndicator.center = CGPointMake(_imageView.frame.size.width/2, _imageView.frame.size.height/2);
    [_activityIndicator setHidesWhenStopped:YES];
    [_activityIndicator startAnimating];
}

NSURLRequest* request = [NSURLRequest requestWithURL:url cachePolicy:NSURLRequestUseProtocolCachePolicy timeoutInterval:60.0];
connection = [[NSURLConnection alloc] initWithRequest:request delegate:self]; 
 }

- (void)connection:(NSURLConnection *)theConnection didReceiveData:(NSData  *)incrementalData {
if (data==nil) { data = [[NSMutableData alloc] initWithCapacity:2048]; } 
[data appendData:incrementalData];
  }

  - (void)connectionDidFinishLoading:(NSURLConnection*)theConnection {
  [connection release];
  connection=nil;

   _imageView.image = [UIImage imageWithData:data];

if (_activityIndicator) {
    [_activityIndicator stopAnimating];
}

[data release];     data=nil;
}

- (UIImage*) image {
UIImageView* iv = [[self subviews] objectAtIndex:0];
return [iv image];
} 
```

在加载图像的 ViewController 类中

```
- (UITableViewCell *)tableView:(UITableView *)tV cellForRowAtIndexPath:(NSIndexPath *)indexPath
{

static NSString *reuseIdentifier =@"CellIdentifier";
    ListCell *cell = (ListCell *)[tableView dequeueReusableCellWithIdentifier:reuseIdentifier];
    if (cell==nil) {
        cell = [[ListCell alloc]initWithStyle:UITableViewCellStyleDefault reuseIdentifier:reuseIdentifier];
        NSMutableDictionary *dicResult = [arrResults objectAtIndex:indexPath.row];

    NSURL *url=[NSURL URLWithString:[dicResult objectForKey:@"Image"]];
    AsynchronousImageView *asyncImageView = [[AsynchronousImageView alloc] initWithFrame:CGRectMake(5, 10,80,80)];
    [asyncImageView loadImageFromURL:url
                    defaultImageName:@"DefaultImage.png"
                    showDefaultImage:NO
               showActivityIndicator:YES
               activityIndicatorRect:CGRectMake(5, 10,30,30)
              activityIndicatorStyle:UIActivityIndicatorViewStyleGray]; // load our image with URL asynchronously

    [cell.contentView addSubview:asyncImageView];   
    // cell.imgLocationView.image = [UIImage imageNamed:[dicResult valueForKey:@"Image"]];
    [asyncImageView release];

}

if([arrResults count]==1)

{
    UITableViewCell *cell1=[tableView dequeueReusableCellWithIdentifier:reuseIdentifier];
    if(cell1==nil)
        cell1=[[[UITableViewCell alloc]initWithStyle:UITableViewCellStyleDefault reuseIdentifier:reuseIdentifier] autorelease];
    NSMutableDictionary *dicResult = [arrResults objectAtIndex:0];
    cell1.textLabel.text=[dicResult valueForKey:@"NoResults"];
    return cell1;
}
else
{
NSMutableDictionary *dicResult = [arrResults objectAtIndex:indexPath.row];
NSString *title = [NSString stringWithFormat:@"%@ Bedrooms-%@", [dicResult valueForKey:KEY_NUMBER_OF_BEDROOMS],[dicResult valueForKey:KEY_PROPERTY_TYPE]];
NSString *strAddress = [dicResult valueForKey:KEY_DISPLAY_NAME];
NSString *address = [strAddress stringByReplacingOccurrencesOfString:@", " withString:@"\n"];
NSString *price = [dicResult valueForKey:KEY_PRICE];
NSString *distance = [dicResult valueForKey:KEY_DISTANCE];
cell.accessoryType = UITableViewCellAccessoryDisclosureIndicator;

        cell.lblTitle.text = title;
cell.lblAddress.text = address;
if ([price length]>0) {
    cell.lblPrice.text = [NSString stringWithFormat:@"£%@",price];
}else{
    cell.lblPrice.text = @"";
}
if ([distance length]>0) {
    cell.lblmiles.text = [NSString stringWithFormat:@"%.2f miles",[distance floatValue]];
}else{
    cell.lblmiles.text = @"";
}

}
return cell;
} 
```

我该如何解决这个问题？我附上了它的heapshot分析屏幕截图。这里非对象消耗了这么多内存那是什么？![堆射击分析](../Images/d1002bdd4c7903d3d4456c6ed8e585c3.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-06T11:10:34.627

这是错误：

```
NSString *reuseIdentifier = [NSString stringWithFormat:@"%d",indexPath.row]; 
```

看来您不是在重用单元格，而是为表格的每一行创建一个新单元格！！！这样，如果您需要查看 100 或 1000 行，则创建/分配 100 或 1000 个对象单元格。

这不是 UITableView 的正确使用。UITableView 的“魔力”在于它重用单元格，它只是创建和分配所需的少量单元格......

例如，考虑您的表格有 480 像素的垂直空间，并且您的单元格高度为 100 像素，那么您只需要 5 个单元格，无需创建 1000 个单元格，您一次只能看到 5 个单元格...

所以神奇的是当你向上滚动它并离开屏幕时重用已经分配的单元格，并重置它的内容（图像和文本）并将其用于用户将要看到的新呼叫......

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-06T12:51:24.130

虽然细胞重用不是问题，但泄漏细胞是：

```
cell = [[ListCell alloc]initWithStyle:UITableViewCellStyleDefault reuseIdentifier:reuseIdentifier]; 
```

你忘记了`autorelease`这一点，所以你很快就会泄漏细胞。你确实记得 autorelease `cell1`。

# java - AWS Elastic Beanstalk 中的容器选项

> ID：10042545
> 
> 赞同：0
> 
> 时间：2012-04-06T10:59:10.137
> 
> 标签：java, jvm, amazon-web-services, amazon-elastic-beanstalk

我们在 Elastic Beanstalk 中部署了一个 Java Web 应用程序，其最小实例数为 1，最大实例数为 2，用于 Autoscaling。我们使用的自定义 AMI 是带有 Sun JDK 6 的 c1.medium。

环境状态变为黄色，然后变为红色。从快照日志中检查日志文件后，我们发现了一个异常 - 原因：java.lang.OutOfMemoryError: Java heap space。假设这可能是环境失败的可能原因之一。我们在 Environment Container 选项中配置的设置是

初始 JVM 堆大小 (MB) - 256M

最大 JVM 堆大小 (MB) - 512m Java 虚拟机将使用的最大堆大小，在 JVM 启动命令行上使用 -Xmx 指定。

最大 JVM 永久生成大小 (MB) - 512m

我应该将堆大小从 512m 增加到更大还是可以。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-23T09:12:32.950

我认为您的最大 JVM Permanent Generation Size 太大了。这是[AWS 的文档](http://docs.amazonwebservices.com/elasticbeanstalk/latest/dg/create_deploy_Java.container.console.html)：

> JVM 选项
> 
> Java 虚拟机中的堆大小会影响在垃圾收集（管理应用程序内存的过程）之前可以在内存中创建多少对象。您可以指定初始堆大小和最大堆大小。较大的初始堆大小允许在垃圾收集发生之前创建更多对象，但这也意味着垃圾收集器将花费更长的时间来压缩堆。最大堆大小指定在繁重活动期间扩展堆时 JVM 可以分配的最大内存量。
> 
> 在 Edit Configuration 窗口中，您可以使用 Initial JVM Heap Size (MB) 和 Maximum JVM Heap Size (MB) 框设置初始和最大 JVM 堆大小。可用内存取决于 Amazon EC2 实例类型。有关适用于您的 AWS Elastic Beanstalk 环境的 Amazon EC2 实例类型的更多信息，请转到 Amazon EC2 用户指南中的实例系列和类型。
> 
> 永久代是 JVM 堆的一部分，用于存储类定义和关联的元数据。要修改永久代的大小，请在最大 JVM 永久代大小 (MB) 框中键入新大小

我发现这篇[Rimuhosting how-to 文章](http://rimuhosting.com/knowledgebase/linux/java/-Xmx-settings)在解释 Xmx 设置方面非常好。

# scala - 结构类型和原语

> ID：10042548
> 
> 赞同：5
> 
> 时间：2012-04-06T10:59:31.390
> 
> 标签：scala, structural-typing

当我发现对我来说看起来像一个错误时，我正在玩 Scala 的结构类型。这是我的代码：

```
type toD = { def toDouble: Double }
def foo(t: toD) = t.toDouble
foo(5) 
```

我得到了这个错误：

```
java.lang.NoSuchMethodException
at scala.runtime.BoxesRunTime.toDouble(Unknown Source)
at .foo(<console>:9)
at .<init>(<console>:11)
at .<clinit>(<console>)
at .<init>(<console>:11)
at .<clinit>(<console>)
at $print(<console>)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
at java.lang.reflect.Method.invoke(Unknown Source)
at scala.tools.nsc.interpreter.IMain$ReadEvalPrint.call(IMain.scala:704)
at scala.tools.nsc.interpreter.IMain$Request$$anonfun$14.apply(IMain.scala:920)
at scala.tools.nsc.interpreter.Line$$anonfun$1.apply$mcV$sp(Line.scala:43)
at scala.tools.nsc.io.package$$anon$2.run(package.scala:25)
at java.lang.Thread.run(Unknown Source) 
```

首先，我不知道为什么这不起作用。其次，奇怪的是代码编译得很好，并在运行时抛出异常，说该方法实际上并不存在。

有人对此有解释吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-06T11:17:53.133

我只是玩了一下这个，它似乎真的是一个错误。但是，当您将返回类型设置为 Any 时，它会起作用：

```
type toD = { def toDouble: Any } 
```

我认为这可能与自动装箱和处理原语的方式有关。

编辑：

我刚刚找到了一个解决方法：

```
type toD[A] = { def toDouble: A }
def foo[A](x: toD[A])(implicit y: A =:= Double) = x.toDouble 
```

这确保了 toDouble (A) 的返回值为 Double

# linux - preempt_rt 的缺点

> ID：10042550
> 
> 赞同：16
> 
> 时间：2012-04-06T10:59:35.540
> 
> 标签：linux, operating-system, real-time, xenomai, preempt-rt

> 目标硬件平台的马力有限，和/或您希望实时作业在您的系统上施加尽可能小的开销。这就是双内核通常比原生抢占系统更好的地方。

从这里：[http ://www.xenomai.org/index.php/Xenomai:Roadmap#Xenomai_3_FAQ](http://www.xenomai.org/index.php/Xenomai:Roadmap#Xenomai_3_FAQ)

Preempt_rt 确实抢占了整个 Linux。抢占 Linux 以何种方式给系统增加负载？

与 Xenomai 相比，FAQ 那里讨论了 preempt_rt。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-04-09T10:57:56.073

**CONFIG_PREEMPT_VOLUNTARY** -
该选项引入检查内核代码中长延迟的最常见原因，以便内核可以自愿将控制权交给等待执行的更高优先级任务。据说这个选项在很大程度上减少了长延迟的发生，但它仍然不能完全消除它们。

**CONFIG_PREEMPT_RT** -
此选项使所有在自旋锁保护区域（由 raw_spinlock_t 创建）之外的内核代码有资格被更高优先级的内核线程进行非自愿抢占。由 spinlock_t 和 rwlock_t 创建的自旋锁和中断也可以在启用此选项的情况下被抢占。使用此选项，最坏情况下的延迟降至（大约）个位数毫秒。

**缺点**-
普通的 Linux 内核仅在执行用户空间代码时才允许更高优先级的任务抢占任务。

为了减少延迟，CONFIG_PREEMPT_RT 补丁强制内核在更高优先级的内核任务到达时非自愿地抢占手头的任务。这势必会导致系统整体吞吐量的降低，**因为会有多个上下文切换，而且优先级较低的任务也不会有太多机会通过**。

来源： [https ://rt.wiki.kernel.org/index.php/Frequently_Asked_Questions](https://rt.wiki.kernel.org/index.php/Frequently_Asked_Questions)

* * *

***使用的技术术语说明****：*

什么是**延迟**？
在计算机系统上发出需求和对同一需求开始响应之间经过的时间称为延迟或响应时间。
各种延迟：

*   **中断延迟**：
    从产生中断到开始执行相应的中断处理程序之间经过的时间。
    示例：当硬件设备执行任务时，它会产生中断。此中断包含有关要执行的任务和要执行的中断处理程序的信息。然后中断处理程序执行特定任务。
*   **调度延迟**：
    它是从发出事件发生的唤醒信号到内核调度程序有机会调度等待唤醒发生（响应）的线程之间的时间。调度延迟也称为调度延迟。
*   **最坏情况延迟**：
    在计算机系统上发出需求和开始响应同一需求之间可以流逝的最长时间。

什么是**吞吐量**？
计算机在给定时间内可以完成的工作量称为吞吐量。

什么是**上下文切换**？
上下文切换是 CPU 从一个进程/线程切换到另一个。上下文切换只能在内核模式下发生。这是保存进程当前执行状态（用于稍后恢复执行），并加载新进程/线程的保存状态以执行的过程。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2018-05-04T23:57:46.013

添加到最高投票答案“较低优先级的任务不会有太多机会通过”

这就是重点（尽管在 4+ 核心系统上，这些低优先级任务仍然可以运行，只要它们被禁止做会干扰关键任务的事情 - 这是能够确保所有当运行关键线程的应用程序想要访问它们时，连接的外围设备不会阻塞）。关键位（例如，如果考虑开发一个有用的系统来及时处理外部输入或测试与实时数据而不是模型的数据转换行为），是有一种方法告诉内核时间关键输入来自哪里.

当前的问题，例如。Windows 系统是你可能是一个“严肃的游戏玩家或严肃的音乐家”，会注意到诸如 150 微秒的抖动之类的事情。如果您无法指定键盘、鼠标或其他人机界面设备应被视为关键优先级，那么所有类型的“Windows 更新”等都可能出现并执行其操作，这反过来可能会触发 USB 中的某些活动控制器具有比与执行输入相关的线程更高的优先级。

我读到一个案例，通过添加第二个 USB 控制器来解决音频故障，除了输入设备之外什么都没有。在便携式设置中，您实际上需要 Thunderbolt PCIe 直通来添加专用集线器（或 fpga），该集线器可以与驱动程序一起覆盖系统上的所有其他内容。这就是为什么市场上没有多少 USB 产品能够为音乐家提供足够好的性能的原因。（2 毫秒往返延迟，全天最大抖动 150 微秒，无丢包）

# c++ - c++中.erase()的问题

> ID：10042552
> 
> 赞同：1
> 
> 时间：2012-04-06T10:59:46.260
> 
> 标签：c++, visual-studio-2010, vector, erase

我正在构建一个游戏库，我希望用户能够删除游戏。我正在尝试使用 .erase() 函数，但我在某处犯了错误。我正在研究我的代码好几天，但我找不到答案。为什么？因为我才 15 岁，而且没有其他程序员都有的那种编程头脑。这就是为什么我不称自己为程序员而只是一个有野心的少年。请帮我。（对不起我的拼写）

这是我的代码：

```
int main()
{
    vector<string>::const_iterator myIterator;
    vector<string>::const_iterator iter;             
                                            vector<string> games;                                
    games.push_back("Crysis2");
    games.push_back("GodOfWar3");
    games.push_back("FIFA12");

    cout <<"Welcome to your Games Library.\n";
    cout <<"\nWarning!!! Don't type spaces, put ecerything together!!!\n";
    cout <<"\nThese are your games:\n";
    for (iter = games.begin(); iter != games.end(); ++iter)
    {
        cout <<*iter <<endl;
    }
    //the loop!
    string action;
    string newGame;

    cout <<"\n-Type 'exit' if you want to quit.\n-Type 'add' if you want to add a game.\n-Type 'delete' if you want to delete a game.\n-Type 'find' if you want to search a game.\n-Type 'game' if you don't know what game to play. ";

    while (action != "exit")
    {

        cout <<"\n\nWhat do you want to do: ";
        cin >> action;

        if (action == "add")
        {
            cout <<"\nType the name of the game you want to add: ";
            cin >> newGame;

            games.push_back(newGame);

            for (iter = games.begin(); iter != games.end(); ++iter)
            {
                cout <<*iter <<endl;
            }

            continue;
        }
        else if (action == "delete")
        {
            cout <<"Type the name of the game you want to delete: ";
            cin >> newGame;

            iter = find(games.begin(), games.end(), newGame);

            if(iter != games.end())
            {
                games.erase(newGame);
            }
            else
            {
                cout<<"\nGame not found.";
            }

            continue;
        }
        else if (action == "find")
        {
            cout <<"Which game you want to look for in your library: ";
            cin >> newGame;

            iter = find(games.begin(), games.end(), newGame);

            if (iter != games.end())
            {
                cout << "Game found.\n";
            }
            else
            {
                cout << "Game not found.\n";
            }

            continue;
        }
        else if (action == "game")
        {
            srand(static_cast<unsigned int>(time(0)));
            random_shuffle(games.begin(), games.end());
            cout << "\nWhy don't you play " <<games[0];

            continue;
        }
        else if (action == "quit")
        {
            cout <<"\nRemember to have fun while gaming!!\n";
            break;
        }
        else
        {
            cout <<"\nCommand not found";
        }
    }
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-06T11:05:25.357

您只是传递了错误的参数来擦除。编码

```
if(iter != games.end())
{
    games.erase(newGame);
} 
```

应该

```
if(iter != games.end())
{
    games.erase(iter);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-06T11:03:12.133

`erase()`采用迭代器（在这种情况下，是 的结果`find`，即`iter`），而不是字符串（如`newGame`）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-06T11:03:25.580

```
iterator erase ( iterator position );
iterator erase ( iterator first, iterator last ); 
```

尝试替换`games.erase(newGame);`为`games.erase(iter);`

# asp.net - 如何为 Azure 应用程序创建可搜索的文档存储库？

> ID：10042559
> 
> 赞同：1
> 
> 时间：2012-04-06T11:00:27.143
> 
> 标签：asp.net, asp.net-mvc, azure, full-text-search, azure-sql-database

我们有客户要求将文档（Word Doc 和可能的 PDF）上传到我们的 Azure 托管应用程序，并对文档进行全文搜索。

我的理解是 SQL Azure 不支持全文索引，所以我不能只将它们存储在数据库中。

有没有人做过类似的事情？如果有怎么办？当我创建它时，是否有任何 Nuget 包或东西可以安装到 Azure 角色等中？blob 存储是否可搜索/可索引？

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-06T13:12:26.547

我建议将 Lucene.NET 与您的数据一起使用。看一眼：

[http://code.msdn.microsoft.com/windowsazure/Azure-Library-for-83562538](http://code.msdn.microsoft.com/windowsazure/Azure-Library-for-83562538)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-11-13T11:46:51.343

如果您现在正在执行此操作并且您正在使用 Azure。最好将此与[Azure Search Service](https://azure.microsoft.com/en-gb/services/search/)结合使用。它具有大量功能，您可以添加文本和元数据以实现快速搜索。它有各种选项选项索引 blob 等[blob 索引](https://docs.microsoft.com/en-us/azure/search/search-howto-indexing-azure-blob-storage)

# html - 需要 ul 的中心对齐 向左浮动

> ID：10042562
> 
> 赞同：0
> 
> 时间：2012-04-06T11:00:49.263
> 
> 标签：html, css, css-float

```
 <style>
   body{
       margin:0;
       padding:0;
      }
    #module_footerLink li{
        float:left;
        list-style:none;
        margin:0 5px;
    }
    .clear{
        clear:both;
    }
    .wrap{
        border:1px solid #ccc;
        width:900px;
            text-align:center;
    }
    </style>
<body>
<div class="wrap">
    <ul id="module_footerLink">
      <li><a id="id_home" href="home"><span>Home</span></a></li>
      <li><a id="id_the_resort" href="article-AboutUs"><span>The Resort</span></a> </li>
      <li><a id="id_facilities" href="article-facilities"><span>Facilities</span></a></li>
      <li><a id="id_tariff" href="article-tariff"><span>Tariff</span></a></li>
      <li><a id="id_media" href="article-media"><span>Media</span></a></li>
      <li><a id="id_links" href="article-links"><span>Links</span></a></li>
      <li><a id="id_contact_us" href="contact"><span>Contact Us</span></a></li>
       <li class="clear"></li>
    </ul>
    <div class="clear"></div>
    </div>
</body> 
```

在这里，我希望 li 位于类为 wrap 的 div 中间。有谁知道我该怎么做？我试过中心对齐，但它不起作用......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T11:14:37.870

```
body{
       margin:0;
       padding:0;
      }
    #module_footerLink li{
    display: inline-block;
        list-style:none;
        margin:0 5px;
        /* For IE 7 */
        zoom: 1;
        *display: inline;
    }
    .clear{
        clear:both;
    }
    .wrap{
        border:1px solid #ccc;
        width:900px;
            text-align:center;
    }​ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-06T11:57:25.590

查看更新的CSS：-

```
<style>
body {
margin: 0;
padding: 0;
}

#module_footerLink {
margin:auto;
width:450px;
}

#module_footerLink li {
float: left;
list-style: none;
margin: 0 5px;
background:red;
}

.clear {
clear: both;
}

.wrap {
border: 1px solid #ccc;
width: 900px;
text-align: center;
background:blue;
}

</style> 
```

我认为你看起来像这样：- [http://jsfiddle.net/eHyuZ/2/](http://jsfiddle.net/eHyuZ/2/)

**更新**

现在你可以根据你的要求添加 li ......它不会去任何地方实际上你的方法是不正确的，这就是为什么你现在面临问题我已经做了一些改变并以正确的方式使其导航

查看更新的链接：http: [//jsfiddle.net/eHyuZ/7/](http://jsfiddle.net/eHyuZ/7/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-06T11:12:12.190

你必须使用 margin:0 auto;

```
.wrap{
    border:1px solid #ccc;
    width:900px;
    margin:0 auto;
    text-align:center;
} 
```

[http://www.w3schools.com/css/css_align.asp](http://www.w3schools.com/css/css_align.asp)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-06T11:15:55.910

由[评论编辑](http://%5Bhttps://stackoverflow.com/questions/10042562/#comment-12847782%5D)

尝试添加

```
#module_footerLink {
display:inline-block;
/*IE7*/
zoom:1;
*display:inline;
} 
```

[http://jsfiddle.net/DEmTh/1/](http://jsfiddle.net/DEmTh/1/)

但在 IE7 中它不起作用

# .htaccess - 在浏览器窗口中打开图像时显示不同的图标

> ID：10042568
> 
> 赞同：2
> 
> 时间：2012-04-06T11:01:29.147
> 
> 标签：.htaccess

我有一个网站，它只是在没有页面代码的浏览器中打开图像：

```
www.mysite.com/images/pic.jpg 
```

当图片在浏览器窗口中打开时，我想添加一个不同的图标。

我尝试将以下内容放在 /images 文件夹中，但没有运气：

```
RewriteEngine On
RewriteRule ^favicon\.ico$ /images/favicon2.ico 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T20:12:10.240

浏览器总是`favicon.ico`在根目录中检查。

告诉浏览器使用另一个文件的唯一方法是放入`<link rel="shortcut icon" href="/otherfavicon.ico">`html。所以这只适用于html文档。

因此，打开图片时`favicon.ico`显示，但打开网页时`otherfavicon.ico`显示。

# android - Android：如何处理日/夜主题

> ID：10042569
> 
> 赞同：3
> 
> 时间：2012-04-06T11:01:32.617
> 
> 标签：android, android-layout, android-resources

我正在构建一个 Android 应用程序，我需要为白天和夜间模式设置两个不同的主题：不同的颜色和不同的可绘制对象。

最好的方法是什么？

我注意到一个名为 UiModeManager 的服务，但我不确定它的行为是否符合我的预期。我在 drawable-mdpi 和 drawable-night-mdpi 中放置了两个不同的位图（同名），并创建了一个显示该位图的 Activity。

我试图通过放入 onCreate() 来切换日/夜模式：

```
 UiModeManager uiManager = (UiModeManager) getSystemService(Context.UI_MODE_SERVICE);
    uiManager.setNightMode(UiModeManager.MODE_NIGHT_YES); 
```

但Android总是显示“日”版本。

任何建议或提示将不胜感激。

谢谢，毛里齐奥

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T11:28:17.507

[HoneycombGallery 示例](http://developer.android.com/resources/samples/HoneycombGallery/index.html)有一个用于主题（背景 + 可绘制对象等）的日/夜切换器。他们只定义了两个主题并通过`setTheme()`. 也许这对你有帮助

编辑：根据文档[setNightMode()](http://developer.android.com/reference/android/app/UiModeManager.html#setNightMode%28int%29) “更改夜间模式仅在设备上启用汽车或桌面模式时有效。”

# python - 从 Python 字典键创建变量

> ID：10042578
> 
> 赞同：2
> 
> 时间：2012-04-06T11:02:23.440
> 
> 标签：python, dictionary

我有一个用于 url 及其标题的容器类，资源：

```
class Resource(object):
    def __init__(self, url, headers):
        self.url = url
        self.content-length = headers['content-length']
        self.content-type = headers['content-type']

        # etc.... 
```

该方法的`headers`参数需要从 的方法`__init__`返回的字典。我认为这将是一种更易读的打包资源 url 和标头的方式。一遍又一遍地打字让我想知道是否有某种方法可以像这样从字典键自动创建变量。这可能吗？`getinfo()``urllib2.urlopen()``self.someheader = headers['someheader']`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-06T11:05:01.460

Python 标识符中不能有`-`符号！`_`所以我们可以在键中替换它。
将键更改为小写使它们看起来像一个传统的变量名，并且非常重要的是，消除了大写/小写混淆（因为标头通常与大写键一起发送）。

```
for k, v in headers.items():
    setattr(self, k.lower().replace('-', '_'), v) 
```

如果您使用的是 Python 2，`iteritems`这里会更好，因为它不会创建新的项目列表，而只是让您迭代它们，Python 3 默认会这样做。

将这些密钥存储在“私有”*字典*（例如`self._headers`）中可能是个好主意。然后，您可以使用 对流程进行更多控制[`__getattr__`](http://docs.python.org/reference/datamodel.html#object.__getattr__)，[`__setattr__`](http://docs.python.org/reference/datamodel.html#object.__setattr__)例如，在尝试设置无效密钥期间可能会引发异常。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-06T11:38:57.710

考虑使用如下类

```
class ADict(dict):
    def __getattr__(self, field):
        return self.get(field) 
```

这将允许您简单地将标题包装在其中。正如其他人所指出的那样，这仍然不允许您访问包含破折号的属性，但是您可以使用`getattr`instaed 访问这些属性。考虑以下包含在 中的标头`ADict`：

```
header = {'content-type': 'text/javascript', 'content-length': 30, 'accept': 'text/html'}
aheader = ADict(header) 
```

可以使用熟悉的点语法访问诸如接受之类的属性，而可以通过以下方式访问无效的标识符属性`getattr`

```
>>>> aheader.accept
'text/html'
>>>> getattr(aheader, 'content-length')
30 
```

# ruby - 意外的正则表达式行为

> ID：10042581
> 
> 赞同：1
> 
> 时间：2012-04-06T11:02:34.203
> 
> 标签：ruby, regex

在 ruby​​ 中运行以下代码时：

```
string = "\begin{theorem}[blaat] \label{thm:foo}"
pattern = /^\\begin\{(theorem|definition)\}(\[.+\])?\s\\label\{(thm|def):.+\}$/
if string =~ pattern then
    puts "match"    
else
    puts "no match"
end 
```

我得到一个“不匹配”的输出。

但是，当在[rubular](http://rubular.com/)上使用相同的模式和字符串时，我得到了匹配。将上述代码与模式一起使用时，违规行为已经开始：

```
/^\\begin/ 
```

和字符串`\begin`。这与使用上述代码段不匹配，但它在 rubular.com 上匹配

我正在使用 Ruby 1.9.1

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-06T11:06:22.240

问题在于您的输入字符串。你有一个退格字符`"\b"`。尝试使用单引号字符串：

```
string = '\begin{theorem}[blaat] \label{thm:foo}' 
```

# ruby - 空终止的 ASCII 字符串的正则表达式可能是什么？

> ID：10042583
> 
> 赞同：0
> 
> 时间：2012-04-06T11:03:03.550
> 
> 标签：ruby, regex, null, terminate

我正在使用 Ruby 读取一个文件，并且能够过滤掉以固定大小格式存储的字符串。但我想使用一些正则表达式或其他东西过滤我最后留下的可变大小字符串。

现在我正在使用以下行扫描字符串

```
s.scan(/(.{4})(.{4})(.{4})(.{4})(.{4})(.{4})(.{4})(.{4})(.{4})(.*)/).each do |f,g,h,i,j,k,l,m,n,p| 
```

但仍希望通过从中分离空终止的字符串来过滤字符串的这个 (. *) 部分。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-06T11:45:23.257

我真的不明白为什么你的正则表达式是这样的，但它是正则表达式中`\0`使用的空字节（或者`\x00`如果你更喜欢十六进制代码）。基本上：

```
"foo\x00bar".split(?\x00)
=> ["foo", "bar"]

"foo\x00bar" =~ /\0/
=> 3 
```

# ios - KVO 用于手动实现的属性

> ID：10042588
> 
> 赞同：6
> 
> 时间：2012-04-06T11:03:32.103
> 
> 标签：ios, key-value-observing

根据[确保 KVC 合规性](http://developer.apple.com/library/ios/#documentation/Cocoa/Conceptual/KeyValueCoding/Articles/Compliant.html)，

> 对于属性或一对一关系的属性，这要求您的类：
> 
> *   实现一个名为`-<key>`,的方法`-is<Key>`，或者有一个实例变量`<key>`or `_<key>`。

**将观察者添加到如下“FAKE”属性的最佳方法是什么？**

```
@property (nonatomic, readonly) BOOL shortlisted; 

#pragma mark - Fake properties

- (BOOL)shortlisted
{
    return [self.provider isJobShortlisted:self];
} 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-04-06T11:09:08.940

## 依赖键

如果您只有一个键依赖于*同一对象的另一个键，则*可以覆盖[`+keyPathsForValuesAffectingValueForKey:`](http://developer.apple.com/library/ios/documentation/cocoa/Reference/Foundation/Protocols/NSKeyValueObserving_Protocol/Reference/Reference.html#//apple_ref/occ/clm/NSObject/keyPathsForValuesAffectingValueForKey:)。（另请参阅[这篇文章](http://www.notesfromandy.com/2011/06/15/keypathsforvaluesaffectingvalueforkey-doing-it-wrong/)了解常见的陷阱。）

KVO 文档包含有关依赖于*其他对象*的键的信息，但不幸的是，它看起来仅在 OS X（而不是 iOS）上具有内置支持。

## 手动通知

如果您要实现完全自定义的属性，KVO 文档中的[**手动更改通知部分包含您需要的所有信息。**](http://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/KeyValueObserving/Articles/KVOCompliance.html#//apple_ref/doc/uid/20002178-SW1)关键点是（引用文档）：

*   > 实现手动通知的类必须覆盖 NSObject 的实现[`automaticallyNotifiesObserversForKey:`](http://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Protocols/NSKeyValueObserving_Protocol/Reference/Reference.html#//apple_ref/occ/clm/NSObject/automaticallyNotifiesObserversForKey:)。...对于执行手动通知的属性，`automaticallyNotifiesObserversForKey:`应返回的子类实现`NO`。

*   > 要实现手动观察者通知，请 [`willChangeValueForKey:`](http://developer.apple.com/library/mac/documentation/Cocoa/Reference/Foundation/Protocols/NSKeyValueObserving_Protocol/Reference/Reference.html#//apple_ref/occ/instm/NSObject/willChangeValueForKey:)在更改值之前和[`didChangeValueForKey:`](http://developer.apple.com/library/mac/documentation/Cocoa/Reference/Foundation/Protocols/NSKeyValueObserving_Protocol/Reference/Reference.html#//apple_ref/occ/instm/NSObject/didChangeValueForKey:)更改值之后调用。

    （如果您更改多个属性，您可以嵌套这些调用。）

*   > 在有序对多关系的情况下，您不仅必须指定更改的键，还必须指定更改的类型和所涉及对象的索引。

    For this you use the methods [`willChange:valuesAtIndexes:forKey:`](http://developer.apple.com/library/mac/documentation/Cocoa/Reference/Foundation/Protocols/NSKeyValueObserving_Protocol/Reference/Reference.html#//apple_ref/occ/instm/NSObject/willChange:valuesAtIndexes:forKey:) and [`didChange:valuesAtIndexes:forKey:`](http://developer.apple.com/library/mac/documentation/Cocoa/Reference/Foundation/Protocols/NSKeyValueObserving_Protocol/Reference/Reference.html#//apple_ref/occ/instm/NSObject/didChange:valuesAtIndexes:forKey:).

# c - 使用变量访问通用结构成员

> ID：10042590
> 
> 赞同：2
> 
> 时间：2012-04-06T11:03:38.357
> 
> 标签：c, struct

不完全确定我的问题标题描述了我想做什么，但想不出如何更好地表达它！我正在使用 C，也许下面的伪代码将描述我正在尝试做的事情：

```
typedef struct obj
{
    char *str1;
    char *str2;
    char *str3;
} object;

/* global variable */
object *glob;

void black_box_function(local, member) ????
{
    /* Do something with glob->member and local->member */
}

void main()
{
    object *ob1, *ob2;

    /* Initialise glob, ob1 and ob2 somewhere */

    black_box_function(ob1, str1);
    black_box_function(ob2, str3);

} 
```

希望你能看到我正在尝试做的事情。我有一个“黑盒”功能，可以对特定成员执行某些操作，并且我需要能够告诉黑盒功能使用哪个成员。

我不想只将成员直接传递给函数，就像在这段代码中一样，因为这不会很容易地融入我的代码的其余部分。

```
black_box_function(ob1->member, glob->member) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-06T11:15:42.720

也许您可以为您的结构创建访问器函数并将这些访问器作为函数指针参数传递，而不是直接传递成员

```
typedef struct
{
    int a;
    int b;
} foo;

typedef int* (*accessor)(foo*);

int* get_a(foo* f) { return &f->a; }
int* get_b(foo* f) { return &f->b; }

void black_box_function(foo* object, accessor fn)
{
    int* p = fn(object);
}

int main(void)
{
    foo bar1;
    foo bar2;

    black_box_function(&bar1, get_a);
    black_box_function(&bar2, get_b);

    return 0;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-06T11:22:51.487

您可以执行以下魔术（使用 GCC 扩展）：

```
#define black_box(local, member)  black_box_function((local), __builtin_offsetof(object, member))

void black_box_function(object *local, int offset)
{
    char *lmember = ((void *)local) + offset;
    char *gmember = ((void *)global) + offset;
    /* do stuff */
} 
```

但是，您必须事先知道您的会员类型。请记住，C 不是动态类型语言，因此您根本没有运行时自省。

**编辑：**您可以`offsetof()`在不借助 GCC 扩展的情况下实现功能，如下所示：

```
#define offsetof(type, field) ((int) (unsigned long) &((type *) 0)->field) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-06T11:19:04.500

由于都是 char*，因此您可以重新定义结构，如：

```
typedef struct obj
{
    char **str; // Array of c
} object; 
```

然后，您可以发送`str`要使用的 from main 的索引：

```
black_box_function(obj1, index) 
```

所以你可以像`obj1->str[i]`在你的黑匣子里一样。

顺便说一句，`black-box_function`不会编译。

附带说明：关于您的黑盒功能和可编译代码的更多信息/代码可以更好地了解您正在尝试做什么。

# java - EC2 上 Openfire 服务器的不可靠行为

> ID：10042601
> 
> 赞同：1
> 
> 时间：2012-04-06T11:04:32.247
> 
> 标签：java, amazon-ec2, xmpp, openfire, heap-memory

我们在 Amazon Ec2 linux 实例上使用 openfire server 3.7.1 作为聊天应用程序。

目前，我们处于初始开发阶段，我们正在使用 4 或 5 个并发用户对其进行测试。现在，然后我们遇到了 openfire 服务器的问题：

1) Java 堆空间异常。

2) java.net.BindException: 地址已经在使用中

3）它们都导致 5222 端口未侦听，而 9090 的 openfire 管理控制台工作正常

最终，当我停止所有 openfire 进程然后重新启动它时，它再次恢复正常。

我想知道，这是 openfire 3.7.1 版中的错误还是 EC2 在打开端口 5222 时存在一些问题。当 1000 名用户同时使用 Openfire 服务器时，我真的很担心 Openfire 服务器的性能？

**解决者：**

1.  禁用 PEP。

2.  增加 Openfire JVM 参数

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T12:21:35.167

Java堆空间异常对Openfire来说很常见，你可以检查你的JVM参数并增加参数。根据我的经验，有几个案例导致了这些情况：

*   使用 Empathy 的客户。
*   一些提供好友名单/白/黑名单等的插件（必须对用户的名单做一些事情）。

您需要确保在 EC2 防火墙设置中打开端口 5222 和 5223（某些客户端可能使用旧的 SSL 端口）。

如果您计划拥有数千个用户，我建议您获取静态 IP 地址（您不要提及您当前的配置是什么）。还结帐[jabberd](http://jabberd.org/) - 被证明比 openfire 更可靠。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-06T18:30:11.780

[1000 多个并发](http://community.igniterealtime.org/message/167160#167160)用户对 Openfire 来说根本不是问题。它已经在测试中看到了 250K。尽管用户在做什么，但它始终是决定性的。

Openfire 中存在一个已知的[内存泄漏](http://community.igniterealtime.org/message/200953#200953)，已修复但尚未发布。它与 PEP 有关，如果对您可行，可以将其关闭以规避此问题。

# java - 在jsp中，如何使用http代理绕过URL

> ID：10042602
> 
> 赞同：0
> 
> 时间：2012-04-06T11:04:48.230
> 
> 标签：java, javascript, jsp

在我的 jsp 页面（比如 sample.jsp）中，它有一些链接，如 Google.com。如果我单击 Google.com 链接，它应该通过 http 代理连接到另一个 Web 服务器。如何实现这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-06T14:17:57.257

你不能。唯一的方法是让*您的服务器*成为代理。这就是 Google 和 Facebook 为获取有关您点击的链接的一些数据所做的工作。

例如，如果有 Google.com 链接，请将其[设为 http://yourserver.com/proxy.jsp?link=http://www.google.com](http://yourserver.com/proxy.jsp?link=http://www.google.com)之类的链接。

这样，您可以做任何您想做的事情，然后重定向到提供的链接。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-06T11:20:18.353

jsp 页面将使用您的浏览器代理设置。除非您从应用程序（而不是浏览器）点击链接，否则您无法定义自己的代理设置。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-06T13:09:51.357

该链接将使用浏览器中配置的代理设置。我知道如何为不同的 URL 使用不同的代理的唯一方法是设置一个 PAC 文件，该文件指定用于给定 URL 或 IP 范围的代理。PAC 文件托管在 Web 服务器上，并在您的浏览器网络配置中引用。

# javascript - 将 Javascript 数组传递给 ASP.NET MVC 控制器

> ID：10042608
> 
> 赞同：5
> 
> 时间：2012-04-06T11:05:15.857
> 
> 标签：javascript, asp.net-mvc

我有以下 javascript 类，我试图将其传递给 ASP.NET MVC 控制器

```
 var postParams = {

         attributes : [
                         {
                            name : '',
                            description: '',
                            attributeType : '',
                            value : ''
                        }
                      ]
    };

 postParams.attributes[0] = new Object();
 postParams.attributes[0].name = "test";
 postParams.attributes[0].description = "test";
 postParams.attributes[0].attributeType = "test";
 postParams.attributes[0].value = "test"; 
```

下面是我如何调用 Controller 方法：

```
 var actionURL = "@Url.Action("Save", "Catalog")";
  $.ajax({
                    type: "POST",
                    url: actionURL,
                    data:  postParams   ...... 
```

在控制器方面，我声明了一个 ViewModel，如下所示：

```
 public class AttributeViewModel
 {
    public string name { get; set; }
    public string description { get; set; }
    public string attributeType { get; set; }
    public string value { get; set; } 
 } 
```

我的控制器保存方法声明如下：

```
 public JsonResult Save(AttributeViewModel[] attributes) 
```

当我执行属性的值始终为空。

有任何想法吗？甚至不知道如何开始调试。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-06T11:16:30.817

您可以尝试[json.net](http://json.codeplex.com/)库来解决您的问题

```
 [JsonFilter(Param = "attributes", JsonDataType = typeof(AttributeViewModel[]))]
  public JsonResult Save(AttributeViewModel[] attributes) 
```

在客户端：

```
$.ajax({
        type: 'POST',
        url: url,
        async: true,
        data:  JSON.stringify(attributes), //!!! Here must be the same name as in controller method
        dataType: 'json',
        contentType: 'application/json; charset=utf-8',
        success: function (data) {

        },
        error: function (xhr, ajaxOptions, thrownError) {

        }
    }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-06T11:19:01.383

似乎您需要添加`traditional : true`到 ajax 调用。看看[这里](https://stackoverflow.com/questions/2515773/ajax-post-of-javascript-string-array-to-jsonresult-as-liststring-always-return)和[这里](https://stackoverflow.com/questions/2515773/ajax-post-of-javascript-string-array-to-jsonresult-as-liststring-always-return)

```
 $.ajax({ 
                traditional: true,
                type: "POST", 
                url: actionURL, 
                data:  postParams 
```

# java - 无法在 Java 中运行多线程服务器程序

> ID：10042609
> 
> 赞同：2
> 
> 时间：2012-04-06T11:05:18.890
> 
> 标签：java, sockets

这是服务器代码

```
package echoserver;

import java.net.*;
import java.io.*;

public class EchoServer {

    public static void main(String[] args) {
        try {

            //establish server socket
            ServerSocket s = new ServerSocket(1981);

            //Thread client connectionsincoming
            while (true) {
                //wait for incoming connection
                Socket incoming = s.accept();
                Runnable r = new ThreadedEchoHandler(incoming);
                Thread t = new Thread(r);
                t.start();
            }
        } catch (IOException e) {
            e.printStackTrace();
        }
    }
}

package echoserver;

import java.net.*;
import java.util.*;
import java.io.*;

class ThreadedEchoHandler implements Runnable {

    public ThreadedEchoHandler(Socket i) {
        //initializing socket
        incoming = i;
    }

    public void run() {
        try {
            try {
                //recieve input stream from socket
                InputStream inStream = incoming.getInputStream();

                //recieve output stream from socket
                OutputStream outStream = incoming.getOutputStream();

                //Create a scanner from input stream
                Scanner scan = new Scanner(inStream);

                //Create printer writer from output stream and enabled auto flushing
                PrintWriter out = new PrintWriter(outStream, true);

                //prompt users on how to exit program soon as a long in into the server
                out.println("Enter BYE to exit");

                boolean done = false;

                //while done is not true and scanner has next line loop
                while (!done && scan.hasNextLine()) {

                    //reading text that came in from the socket
                    String line = scan.nextLine();

                    //On the server print the ip address of where the text is coming from and the text they typed
                    System.out.println("Recieved from " + incoming.getInetAddress().getHostAddress() + ": " + line);

                    //Echo back the text the client typed to the client
                    out.println("Echo: " + line);

                    //if they type BYE in caps terminate there connection and I also trimmed whitespaces
                    if (line.trim().equals("BYE")) {
                        done = true;
                    }
                }
            } //finally close the socket connection
            finally {
                incoming.close();
            }
        } catch (IOException e) {
            e.printStackTrace();
        }
    }
    private Socket incoming;
} 
```

这是客户端的代码

```
package client;

import java.net.*;
import java.io.*;

public class Client {

    public static void main(String[] args) throws IOException {
        PrintWriter out = null;
        try {
            Socket s = new Socket(InetAddress.getLocalHost(), 1981);
            System.out.println("Connected to server on port 1981");
            out = new PrintWriter(s.getOutputStream());

            out.println("Hello");
            s.close();

        } catch (Exception ex) {
            System.err.println(ex.getMessage());
        }
    }
} 
```

Socktes 已成功创建，但是当控制转到 t.start() 方法调用时，它没有调用 ThreadedEchoHandler 类的 run() 方法。

为什么会这样？任何的想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-06T11:31:44.210

客户端写入`"Hello"`. `PrintWriter`到现在为止还挺好。

您可能希望`PrintWriter`将文本直接发送到套接字，但事实并非如此。构造函数的文档`PrintWriter(OutputStream)`说它创建了一个`PrintWriter` *没有自动行刷新*。这意味着您必须`out.flush()`在想要实际发送某些内容时打电话。

直到你调用`out.flush()`的文本只存在于一些内部缓冲区中，而服务器将无法看到它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-06T11:10:03.097

我的猜测是，由于没有客户端连接到服务器，因此 acept 语句将永远阻塞。您可以将 accept() 包装在打印件中以证明或反驳。

# java - 当前时间 IF 语句 GT ThrustLag

> ID：10042610
> 
> 赞同：0
> 
> 时间：2012-04-06T11:05:19.433
> 
> 标签：java, time, if-statement, long-integer

```
if(System.currentTimeMillis() >  _thrust_lag + _thrust_delay);
    {
        this._thrust3Position = new_Position;

        Log.w("Thrust Lag + Delay", Long.toString(_thrust_lag + _thrust_delay));
        Log.w("Current Time", Long.toString(System.currentTimeMillis()));

        _thrust_lag = System.currentTimeMillis();
    } 
```

输出为：推力滞后 + 延迟：1333710037096 当前时间：1333710027174

_thrust_delay = 10000 顺便说一句。

这应该返回 false 但不是，它一直在输出这个语句。有人有什么想法吗？还是我在这里遗漏了一些基本的东西？

此语句中的所有变量都是长整数，而且 _thrust_lag 仅在构造函数和此函数中设置一次，所以问题就在这里。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-06T11:13:06.207

`;`语句末尾的尾随`if`：删除它。

尾随`;`分号导致没有执行语句的分支：

```
if (...); 
```

等同于：

```
if (...)
{
} 
```

这意味着在发布的代码中，`{}`总是执行其中的语句。

# assembly - MIPS 和矩阵

> ID：10042611
> 
> 赞同：0
> 
> 时间：2012-04-06T11:05:20.963
> 
> 标签：assembly, matrix, mips, dot-product

我正在处理一个涉及 MIPS 和矩阵的学校项目。基本上我必须编写一个程序，通过输入给定一个 N 参数（这应该是我的方形 NxN 矩阵的大小）和里面的所有元素（再次，由用户输入插入）应该计算点积这两个矩阵，并将结果放入第三个矩阵。

我第一次看到这段代码，它做点积，但在两个静态矩阵之后。不是通过输入。两件事情。我应该如何更改它以便让用户插入两个矩阵（以及 N 大小），并且大多数情况下，我的矩阵初始化是否正确？我没有做这样的段落“[（i * num_columns + j）* 4]，我想知道我得到的是纯粹的运气而不是合理化。提前感谢任何愿意帮助我的人，对不起对于任何语言错误。

```
.data
v1:     .word 1,2,3,4

    .word 5,6,7,8

    .word 9,10,11,12

v2:     .word 10,20,30,40

    .word 10,10,10,10

    .word 10,10,10,10

v3:     .word 0:12

c: .word 4

space: .asciiz "\n"

.text

main:

li $t0, 0
li $t2, 12
la $t9, c
li $t8, 0

loop:
lw $t3, v1($t0)
lw $t4, v2($t0)

mul $t3, $t3, $t4
addi $t2, $t2, -1

li $v0, 1
move $a0, $t3
syscall

li $v0, 4
la $a0, space
syscall

sw $t3, v3($t0)
addi $t0, $t0, 4
addi $t8, $t8, 1
bne $t2, $zero, loop

li $v0, 10
syscall 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-06T18:27:17.660

除了指导您更好地学习语言之外，没有什么可以向您展示如何完成您的作业。当您遇到麻烦时，请发布您的问题和问题，有人会提供帮助。这是一个可以帮助阐明如何开始的骨架。

```
 .text
main:   
    #call prompt_size       
    #s0 = return val = N

    #a0 = s0: arg = N
    #call new_matrix
    #s1 = return val = address of matrix

    #repeat that two more times

    #call fill_matrix 3 times, sending each matrix address
    #calcuate dot product
    #exit
prompt_size:
    #output prompt
    #read integer
    #return 
new_matrix:
    #t0 = (arg)^2
    #call sbrk(t0)
    #return
fill_matrix:
    #for each byte, prompt for an integer, and insert it
prompt_matrix_element:
    #output_prompt
    #read integer
    #return
exit:
    #exit 
```

# asp.net - 动态覆盖 Asp 表单操作 URL

> ID：10042612
> 
> 赞同：0
> 
> 时间：2012-04-06T11:05:22.240
> 
> 标签：asp.net, forms

我在覆盖表单操作 URL 时遇到问题

我有一个类来覆盖表单操作。

```
<html>
<head>
</head>
<body>
       <form id="form1" runat="Server"  action="https://www.test.com">
        <div style="">
            <asp:button runat="Server" onclick="PostMe" Text="Post"/>
        </div>

        <asp:HiddenField runat="server"  ID="test" value="0" />
        <asp:HiddenField runat="server"  ID="test2" value="0" />

    </form>
</body>
</html>

<script runat="server">

    void PostMe(Object sender,EventArgs e){

        RemotePost2 myremotepost =  new RemotePost2();
        myremotepost.Url = "https://www.test.com";
        myremotepost.Add("field1","Tom");
        myremotepost.Add("field2","Sawyer");
        myremotepost.Post();
    }

    public class RemotePost2{
            private System.Collections.Specialized.NameValueCollection Inputs = new System.Collections.Specialized.NameValueCollection();

            public string Url = "";
            public string Method = "post";
            public string FormName = "forms";

            public void Add(string name,string value){
                Inputs.Add(name,value);
            }

            public void Post(){
                System.Web.HttpContext.Current.Response.Clear();

                System.Web.HttpContext.Current.Response.Write("<html><head>");
                System.Web.HttpContext.Current.Response.Write(string.Format("</head><body onload=\"document.{0}.submit()\">",FormName));
                System.Web.HttpContext.Current.Response.Write(string.Format("<form name=\"{0}\" method=\"{1}\" action=\"{2}\" >",FormName,Method,Url));
                for(int i=0;i< Inputs.Keys.Count;i++){
                    System.Web.HttpContext.Current.Response.Write(string.Format("<input name=\"{0}\" type=\"hidden\" value=\"{1}\">",Inputs.Keys[i],Inputs[Inputs.Keys[i]]));
                }
                System.Web.HttpContext.Current.Response.Write("</form>");
                System.Web.HttpContext.Current.Response.Write("</body></html>");

                System.Web.HttpContext.Current.Response.End();
            }
    } 
```

问题是我不能发布 field1 和 field2 而是表单发布 test 和 test2 值。当我使用 postBackUrl 属性时，它仍然会发布 test 和 test2。

我想要做的是在表单操作不为空时发布 field1 和 field2。因为当没有操作时它工作正常，我无法修改代码上的操作。

您的帮助将不胜感激 干杯

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-06T11:24:36.227

您可以将以下代码添加到加载功能后面的代码中

myButton.Attributes.Add("onClick", "javascript: document.forms[0].action='http://otherserver.com/theirpage.html';");

其中 myButton 将是您的按钮的 id。

# ios - iOS NSJSONSerialization 返回 null

> ID：10042616
> 
> 赞同：2
> 
> 时间：2012-04-06T11:05:43.160
> 
> 标签：ios, json

我正在开发的应用程序需要解析一个非常大的 Json 文件（17.5 MB 或 1700 万个字符）。

我已经使用较小的 Json 文件对应用程序进行了编码和测试，并且成功进行了解析，只有当我使用该 17.5 MB 文件进行测试时，它才会返回空对象。

我正在使用 iOS 5.1 并使用 iOS 5.0 的 JSON 阅读器 API 以及 JSONKIT，它们都返回相同的响应，NULL。

任何建议将不胜感激

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-06T11:19:16.770

如果它真的是一个大小问题，你可能会在一些自然边界上将它分成几块。我过去曾使用大型 xml 文件做到这一点，效果很好。

但正如@Alladinian 在评论中提到的那样，确实验证了它是一个有效的 JSON 文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-22T21:58:27.973

fwiw，我最近发现了一个错误，当被解析的 JSON 文件大小 > 32k 时，NSJSONSerialization 失败。当我们修剪源 JSON 时，相同的代码路径就可以正常工作。

# java - HQL - 两个相同的查询 - 对象类型的差异

> ID：10042618
> 
> 赞同：1
> 
> 时间：2012-04-06T11:05:52.163
> 
> 标签：java, hibernate, hql, iteration

`Object[]`如果我选择特定列，为什么我必须使用打印列表：

```
Session session = DaoSF.getSessionFactory().openSession();
List<Object[]> list = new ArrayList<Object[]>(); /* Object[] */

Query criteria = session.createQuery(
  "select test.col1, test.col2, test.col3
  "from Test test " +
  "group by test.col1, test.col2, test.col3");

list = criteria.list();

for (Object[] item : list)
{
  System.out.println(item[1] + ", " + item[2] + ", " + item[3]); 
} 
```

为什么可以使用原始 Test 对象迭代相同的选择（选择 * - 而不是特定的列）？

```
List<Test> list = new ArrayList<Test>(); /* Test */
Query criteria = session.createQuery(
  "from Test test " +
  "group by test.col1, test.col2, test.col3");

list = criteria.list();

for (Test item : list)
{
  System.out.println(item.getCol1 + ", " + item.getCol2 + ", " + item.getCol3); 
} 
```

是否可以“转换”`Object[]`为`Test`对象？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T11:22:16.413

试试这种方法；首先在你的类中创建一个*构造函数*`Test`：

```
public Test(Col1Type col1, Col2Type2 col2, Col3Type col3) {
  this.col1 = col1;
  this.col2 = col2;
  this.col3 = col3;
} 
```

现在在查询中，您可以说：

```
select new Test(t.col1, t.col2, t.col3) 
from Test t 
```

这将为 Hibernate 提供一个所谓的行映射器构造函数，从中可以构造`Test`. 然后你会有一个`List<Test>`from `query.list()`。这种方法有一个问题，即您应该在*默认*构造函数之外为不同的可能查询提供不同的构造函数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-06T11:32:52.773

在您的第一个查询中，您返回一行（如列表），由您选择的“测试”对象的几个属性组成。
它不是“测试”对象，所以你不能这样迭代。

在您的第二个查询中，您返回“测试”对象：“测试”对象列表，因此您可以迭代为“测试”对象。

# jsf-2 - 被另一个 JSF/primefaces 隐藏的组件

> ID：10042620
> 
> 赞同：0
> 
> 时间：2012-04-06T11:06:01.590
> 
> 标签：jsf-2, primefaces

你好，

我正在使用 JSF/primefaces 2.0 我的问题是我在页面中看不到“添加用户”按钮，我认为问题是由应答器 **p:fileUpload**引起的， 因为当我删除它时，我可以看到按钮！ ！

```
 <table border="1" align="center" cellpadding="0" cellspacing="0" width="1000" heighth="1800">
            <tr>
                <td>
                    <h:form>

                      <table border="0" align="center" cellpadding="0" cellspacing="0" width="600">
                         <tr> <td>  <h:outputLabel style="font-size: 13px" value="Nom" /> </td><td><h:inputText value="#{AddPerson.nom}" /></td></tr>
                         <tr><td>   <h:outputLabel value="Files"/></td><td><p:fileUpload fileUploadListener="#{AddPerson.fileUpload}"   update="messages"   sizeLimit="500000"    allowTypes="/(\.|\/)(gif|jpe?g|png)$/"/> </td></tr> 

                         <tr><td>  <h:commandButton action="#{AddPerson.addUserDB}"  value="Add User" /> </td></tr>  

                     </table>     
                 </h:form>             
             </td>
         </tr>
  </table> 
```

整个代码：

```
<body>
        <table  border="1" style='width:auto;height:100px;' align="center" cellpadding="0" cellspacing="0"  >
            <tr><td>
                    <table  border="1" style='width:auto;height:100px;' align="center" cellpadding="0" cellspacing="0" >
            <tr  >
                <td><h:graphicImage width="100" url="/ONST.jpg"/> </td>
                <td >                   
                    <h:graphicImage width="900" url="/banner_home.jpg"  />   
                </td>
            </tr>
        </table>
    <br></br><br></br><br></br>
   <table border="1" align="center" style='width:auto;height:100px;' cellpadding="0" cellspacing="0" >
        <tr>
            <td>
                <h:form>

                        <table border="1" style='width:auto;height:100px;' align="center" cellpadding="1" cellspacing="1" >

                            <tr> <td>  <h:outputLabel style="font-size: 13px" value="Nom" /> </td><td><h:inputText value="#{AddPerson.nom}" /></td></tr>
                            <tr> <td> <h:outputLabel value="Prenom"/></td><td> <h:inputText value="#{AddPerson.prenom}" /></td></tr>

                            <tr> <td>  <h:outputLabel value="Etat Civil"/></td>
                                <td> <h:selectOneMenu id="etatcivil" value="#{AddPerson.etatCivil}">
                                    <f:selectItem itemValue="Monsieur" itemLabel="M"/>
                                    <f:selectItem itemValue="Madam" itemLabel="Mme"/>
                                    <f:selectItem itemValue="Madmoiselle" itemLabel="Mlle"/>
                                </h:selectOneMenu>
                                </td></tr>
                                <tr>
                                    <td><h:outputLabel value="Date de naissance "/>      </td>
                                <td>

                                      <h:selectOneMenu id="jour" value="#{AddPerson.jour}">
                                      <f:selectItem itemValue="00" itemLabel=""/>
                                    <f:selectItem itemValue="01" itemLabel="01"/> <f:selectItem itemValue="02" itemLabel="02"/><f:selectItem itemValue="03" itemLabel="03"/>
                                    <f:selectItem itemValue="04" itemLabel="04"/><f:selectItem itemValue="05" itemLabel="05"/><f:selectItem itemValue="06" itemLabel="06"/>
                                    <f:selectItem itemValue="07" itemLabel="07"/><f:selectItem itemValue="08" itemLabel="08"/><f:selectItem itemValue="09" itemLabel="09"/>
                                    <f:selectItem itemValue="10" itemLabel="10"/><f:selectItem itemValue="11" itemLabel="11"/><f:selectItem itemValue="12" itemLabel="12"/>
                                    <f:selectItem itemValue="13" itemLabel="13"/><f:selectItem itemValue="14" itemLabel="14"/><f:selectItem itemValue="15" itemLabel="15"/>   
                                    <f:selectItem itemValue="16" itemLabel="16"/><f:selectItem itemValue="17" itemLabel="17"/><f:selectItem itemValue="18" itemLabel="18"/>  
                                    <f:selectItem itemValue="19" itemLabel="19"/><f:selectItem itemValue="20" itemLabel="20"/><f:selectItem itemValue="21" itemLabel="21"/>   
                                    <f:selectItem itemValue="22" itemLabel="22"/><f:selectItem itemValue="23" itemLabel="23"/><f:selectItem itemValue="24" itemLabel="24"/>    
                                    <f:selectItem itemValue="25" itemLabel="25"/><f:selectItem itemValue="26" itemLabel="26"/><f:selectItem itemValue="27" itemLabel="27"/>     
                                    <f:selectItem itemValue="28" itemLabel="28"/><f:selectItem itemValue="29" itemLabel="29"/><f:selectItem itemValue="30" itemLabel="30"/>
                                    <f:selectItem itemValue="31" itemLabel="31"/>
                                         </h:selectOneMenu>

                                <h:selectOneMenu id="mois" value="#{AddPerson.mois}">
                                    <f:selectItem itemValue="00" itemLabel=""/>
                                    <f:selectItem itemValue="01" itemLabel="Janvier"/> <f:selectItem itemValue="02" itemLabel="Fevrier"/><f:selectItem itemValue="03" itemLabel="Mars"/>
                                    <f:selectItem itemValue="04" itemLabel="Avril"/><f:selectItem itemValue="05" itemLabel="May"/><f:selectItem itemValue="06" itemLabel="Juin"/>
                                    <f:selectItem itemValue="07" itemLabel="Juillet"/><f:selectItem itemValue="08" itemLabel="Aout"/><f:selectItem itemValue="09" itemLabel="Septembre"/>
                                    <f:selectItem itemValue="10" itemLabel="Octobre"/><f:selectItem itemValue="11" itemLabel="Novembre"/><f:selectItem itemValue="12" itemLabel="Decembre"/>
                                 </h:selectOneMenu>

                                 <h:selectOneMenu  id="annee" value="#{AddPerson.annee}" >
                                    <f:selectItem itemValue="1940" itemLabel="1940"/> <f:selectItem itemValue="1941" itemLabel="1941"/><f:selectItem itemValue="1942" itemLabel="1942"/><f:selectItem itemValue="1943" itemLabel="1943"/><f:selectItem itemValue="1944" itemLabel="1944"/><f:selectItem itemValue="1945" itemLabel="1945"/><f:selectItem itemValue="1946" itemLabel="1946"/><f:selectItem itemValue="1947" itemLabel="1947"/><f:selectItem itemValue="1948" itemLabel="1948"/><f:selectItem itemValue="1949" itemLabel="1949"/>
                                    <f:selectItem itemValue="1950" itemLabel="1950"/><f:selectItem itemValue="1951" itemLabel="1951"/><f:selectItem itemValue="1952" itemLabel="1952"/><f:selectItem itemValue="1953" itemLabel="1953"/><f:selectItem itemValue="1954" itemLabel="1954"/><f:selectItem itemValue="1955" itemLabel="1955"/><f:selectItem itemValue="1956" itemLabel="1956"/><f:selectItem itemValue="1957" itemLabel="1957"/><f:selectItem itemValue="1958" itemLabel="1958"/><f:selectItem itemValue="1959" itemLabel="1959"/>
                                    <f:selectItem itemValue="1960" itemLabel="1960"/><f:selectItem itemValue="1961" itemLabel="1961"/><f:selectItem itemValue="1962" itemLabel="1962"/><f:selectItem itemValue="1963" itemLabel="1963"/><f:selectItem itemValue="1964" itemLabel="1964"/><f:selectItem itemValue="1965" itemLabel="1965"/><f:selectItem itemValue="1966" itemLabel="1966"/><f:selectItem itemValue="1967" itemLabel="1967"/><f:selectItem itemValue="1968" itemLabel="1968"/><f:selectItem itemValue="1969" itemLabel="1969"/>
                                    <f:selectItem itemValue="1970" itemLabel="1970"/><f:selectItem itemValue="1971" itemLabel="1971"/><f:selectItem itemValue="1972" itemLabel="1972"/><f:selectItem itemValue="1973" itemLabel="1973"/><f:selectItem itemValue="1974" itemLabel="1974"/><f:selectItem itemValue="1975" itemLabel="1975"/><f:selectItem itemValue="1976" itemLabel="1976"/><f:selectItem itemValue="1977" itemLabel="1977"/><f:selectItem itemValue="1978" itemLabel="1978"/><f:selectItem itemValue="1979" itemLabel="1979"/>
                                    <f:selectItem itemValue="1980" itemLabel="1980"/><f:selectItem itemValue="1981" itemLabel="1981"/><f:selectItem itemValue="1982" itemLabel="1982"/><f:selectItem itemValue="1983" itemLabel="1983"/><f:selectItem itemValue="1984" itemLabel="1984"/><f:selectItem itemValue="1985" itemLabel="1985"/><f:selectItem itemValue="1986" itemLabel="1986"/><f:selectItem itemValue="1987" itemLabel="1987"/><f:selectItem itemValue="1988" itemLabel="1988"/><f:selectItem itemValue="1989" itemLabel="1989"/>
                                    <f:selectItem itemValue="1990" itemLabel="1990"/><f:selectItem itemValue="1991" itemLabel="1991"/><f:selectItem itemValue="1992" itemLabel="1992"/><f:selectItem itemValue="1993" itemLabel="1993"/><f:selectItem itemValue="1994" itemLabel="1994"/><f:selectItem itemValue="1995" itemLabel="1995"/><f:selectItem itemValue="1996" itemLabel="1996"/><f:selectItem itemValue="1997" itemLabel="1997"/><f:selectItem itemValue="1998" itemLabel="1998"/><f:selectItem itemValue="1999" itemLabel="1999"/>
                                    <f:selectItem itemValue="2000" itemLabel="2000"/><f:selectItem itemValue="2001" itemLabel="2001"/><f:selectItem itemValue="2002" itemLabel="2002"/><f:selectItem itemValue="2003" itemLabel="2003"/><f:selectItem itemValue="2004" itemLabel="2004"/><f:selectItem itemValue="2005" itemLabel="2005"/><f:selectItem itemValue="2006" itemLabel="2006"/><f:selectItem itemValue="2007" itemLabel="2007"/><f:selectItem itemValue="2008" itemLabel="2008"/><f:selectItem itemValue="2009" itemLabel="2009"/>
                                    <f:selectItem itemValue="2010" itemLabel="2010"/><f:selectItem itemValue="2011" itemLabel="2011"/><f:selectItem itemValue="2012" itemLabel="2012"/> 
                                 </h:selectOneMenu>

                                </td>
                                </tr>

                            <tr><td><h:outputLabel value="email"/></td><td><h:inputText value="#{AddPerson.email}" /></td></tr>
                            <tr><td>    <h:outputLabel value="numTelephone"/></td><td><h:inputText value="#{AddPerson.numTelephone}" /></td></tr>
                            <tr> <td>  <h:outputLabel value="mobile"/></td><td><h:inputText value="#{AddPerson.mobile}" /></td></tr>
                            <tr><td>   <h:outputLabel value="fax"/></td><td><h:inputText value="#{AddPerson.fax}" /></td></tr>
                              <tr><td>  <h:outputLabel value="profession"/></td><td><h:inputText value="#{AddPerson.profession}" /></td></tr>
                              <tr><td>  <h:outputLabel value="adresse"/></td><td><h:inputText value="#{AddPerson.adresse}" /></td></tr>
                               <tr><td> <h:outputLabel value="code Postal"/></td><td><h:inputText value="#{AddPerson.codePostal}" /></td></tr>
                               <tr><td> <h:outputLabel value="Ville"/></td><td><h:inputText value="#{AddPerson.ville}" /></td></tr>
                               <tr><td> <h:outputLabel value="Pays"/></td><td><h:inputText value="#{AddPerson.pays}" /></td></tr>

                               <tr><td> <h:outputLabel value="Domaine de Competence"/></td>
                                   <td>   <h:selectOneMenu  value="#{AddPerson.domain}" id="domaine" >
                                    <f:selectItem itemLabel="-- Select Domaine de Competence-- " itemValue="0"/> 
                                    <f:selectItems value="#{AddPerson.listDomaine}" />
                                       </h:selectOneMenu></td></tr>

                                 <tr><td><h:outputLabel value="login"/></td><td><h:inputText value="#{AddPerson.login}" /></td></tr>
                              <tr><td>  <h:outputLabel value="password"/></td><td><h:inputText value="#{AddPerson.password}" /></td></tr>

                              <tr><td>   <h:outputLabel value="Files"/></td> <td> <h:panelGroup style="display:inline-block"> <p:fileUpload fileUploadListener="#{AddPerson.fileUpload}"   update="messages"   sizeLimit="500000"    allowTypes="/(\.|\/)(gif|jpe?g|png)$/" /></h:panelGroup></td></tr>
                    <tr><td>  </td><td>  <h:commandButton type="submit" value="Add User" action="#{AddPerson.addUserDB}"  /> </td></tr>  
                     </table> 

             </h:form>  

         </td>
     </tr>
  </table> 
    </td></tr></table>
 </body> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-06T18:27:21.240

抱歉，我无法重现您的问题。

这是您给定代码在 FF 11 中的外观（在 IE9 和 Chrome 18 中类似）：

![火狐 11 截图](../Images/9f16d800d33a9dafed21d7f61d6bb57c.png)

也许您在页面的其他地方包含了一个样式表，它以某种方式隐藏了按钮..

# .net - MVVM Light - 简单的 IoC + CommonServiceLocator？试图理解目的

> ID：10042628
> 
> 赞同：1
> 
> 时间：2012-04-06T11:06:51.150
> 
> 标签：.net, mvvm, inversion-of-control, ioc-container

所以我知道 CommonServiceLocator 是一个中介联系，允许您切换不同的 IoC 容器，但是查看 MVVM Light 的示例代码，特别是 ViewModelLocator，在某种意义上似乎很有趣

您将 SimpleIoC 注册为默认定位器，但同时您在 SimpleIoc 默认实例上调用 Register。

因此，如果您将来要拆除 SimpleIoC，是不是意味着您需要更新所有注册调用？

另一个问题是，过去使用 Castle Windsor，并且它支持通过 .config 文件配置类型来加载类型，它在 Windows 8 场景中如何工作？

我仍在尝试找到现在使用 IoC 有意义的场景？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-06T12:16:40.640

Common Service Locator 实现保证您不需要替换 getter 调用（GetInstance、GetAllInstances 等），但它们停在那里。注册是使 IOC 容器独一无二的原因；例如，正如您提到的，有些支持使用配置文件进行配置（SimpleIoc 不支持）。所以是的，当您用您选择的另一个 IOC 容器替换 SimpleIoc 时，您通常会替换注册部分。请注意，这通常是可以的，因为这些调用通常分组在一个公共位置，因此它们很容易替换。

有关更多信息，请查看[http://commonservicelocator.codeplex.com/](http://commonservicelocator.codeplex.com/)页面。

请注意，我将 SimpleIoc 添加到 MVVM Light 的目的并不是提供一个全能的 IOC 容器。事实上，我向现有的（Castle Windsor、StructureMap、Unity 等）鞠躬。相反，我想提供一个简单的实现来吸引 IOC 容器世界中没有经验的用户。这个想法是，当他们需要更高级的功能时，他们将转向另一个更复杂的实现。

希望这是有道理的！洛朗

# perl - 使用 Perl Mechanize 从网页中删除文本

> ID：10042633
> 
> 赞同：1
> 
> 时间：2012-04-06T11:07:32.820
> 
> 标签：perl, web-crawler

我试图从设置有一组 ​​div、标签等的网页中只抓取测试信息。我只想从特定的 div 类中提取信息，并且再次只提取标签内的信息。

```
<div class="col col60 moduledetail"><table cellspacing="2" cellpadding="0" border="0" id="moduleDetail"><tr><th class="moduleCode">test<small>CRN: 33413</small></th><th>test</th></tr><tr><td class="label"><nobr>Campus</nobr></td><td><a target="_blank" href="test/">test</a></td></tr><tr><td class="label"> 
```

以上是网页中包含的内容的片段。我获取页面内容的尝试完全按照它所说的去做，它从网页中获取所有内容，我怎样才能将其缩小到这个类以及标签中的文本信息。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-06T11:24:38.160

使用 HTML 解析器。这是一个使用示例[`HTML::TreeBuilder`](http://search.cpan.org/perldoc?HTML%3a%3aTreeBuilder)：

```
 use WWW::Mechanize;
 use HTML::TreeBuilder;

 my $mech = WWW::Mechanize->new;
 $mech->get($url);

 my $tree = HTML::TreeBuilder->new_from_content($mech->content);

 if (my $div = $tree->look_down(_tag => "div", class => "col col60 moduledetail")) {
     print $div->as_text(), "\n";
 }
 $tree->delete(); 
```

# emacs - “已保存并设置。（不匹配）”（特别是“不匹配”部分）在 emacs 自定义中是什么意思？

> ID：10042639
> 
> 赞同：3
> 
> 时间：2012-04-06T11:08:42.943
> 
> 标签：emacs, customization, dot-emacs

我只是想`org-mode`在 emacs 中自定义一些导出设置，所以我做了`M-x``customize-group``org-export-html`. 这是由自定义缓冲区提出的，除其他外，我着手将其更改`org-export-html-postamble-format`为更符合我喜好的东西。

可能相关：在此过程中，我使用了几个`C-o`' 来打开新行，因此该值在屏幕上对我来说看起来不错，并且我可以知道我在做什么。满意后，我单击`State`按钮，然后选择`Save for Future Sessions`。因为（我认为）`C-o`换行符，所以它说：

`CHANGED outside Customize; operating on it here may be unreliable. (mismatch)`

所以，然后我选择了`Reset to Saved`，它摆脱了它，但用这个代替了它：

`SAVED and set. (mismatch)`

好的，所以......一切都很好......除了......在这两行中，是什么`(mismatch)`意思？我的 emacs 初始化文件中保存的内容与我正在查看的内容不匹配？之间存在不匹配......好吧，进一步环顾四周，我什至看到一些自定义条目说：

`STANDARD. (mismatch)`

标准*和*不匹配？（顺便说一句，还有其他人只是说`STANDARD.`。）

我想了解“不匹配”是什么意思。有什么提示吗？

谢谢！

* * *

**附录**：

我只是去挖掘了一点`cus-edit.el`，并在评论中找到了这个：

```
;; 8\. mismatch

;;    The widget value is not valid member of the :type specified for the
;;    option. 
```

这有点帮助......它只是意味着`org-mode`'s 类型说明符是错误的吗？看着那个 (in `org-html.el`)，它指定了`:type 'string`，但实际上它似乎是一个 plist （甚至它的默认值也是这种形式`'(("en" "[data here]"))`。）这只是清洁度不`org-mode`好吗？但是，即使这里的另一个变量也说“不匹配”，但在逻辑上似乎有一个有意义的值。值是`t`（我检查了我的 emacs init，它只是符号`t`，没有引号或任何东西），其类型说明符是：

`:type '(choice (const :tag "No postamble" nil) (const :tag "Auto preamble" 'auto) (const :tag "Default formatting string" t) (string :tag "Custom formatting string") (function :tag "Function (must return a string)")))`

...这似乎与第三行相匹配。不？不是`'(choice ...`有效值`:type`吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-06T12:58:11.233

它看起来像两个错误：

*   org-html.el 中为该变量声明的一个微不足道的`:type 'string`变量，即使变量的值不是字符串。

*   在这种不匹配的情况下，自定义中的一个错误会显示“更改外部自定义”，即使不匹配实际上直接来自自定义而不是自定义之外。

请用 报告`M-x report-emacs-bug`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-06T11:23:12.423

> 因为（我推测）是 Co 换行符，所以它说：在自定义之外更改；在这里对其进行操作可能不可靠。（不匹配）

我从未研究过细节，但我认为“在自定义之外更改”几乎可以肯定意味着在您的配置中的某处该`org-export-html-postamble-format`变量是直接在代码中设置的。错误的文本当然并不表明它可能是由于变量只是通过自定义界面设置的。

# android - 以编程方式设置按钮对齐

> ID：10042643
> 
> 赞同：1
> 
> 时间：2012-04-06T11:09:13.673
> 
> 标签：android, button, xamarin.android

我正在动态创建大约 50 个按钮。
文本设置如下：

```
btn.Text=result.Rows[i]["Col1"].ToString()+"\n"+result.Rows[i]["Col2"].ToString()
+"\n"+result.Rows[i]["Col3"].ToString(); 
```

&是按钮`result`的对象。`DataTable``btn`

现在的问题是一些按钮没有正确显示。

参考下面的截图，

在 img1 - 第一行之后显示了一个不必要的空白行。
在 img2 - 文本未居中对齐。
在 img3 中 - *TATAMOTORS*没有显示在单行中，即使按钮两侧都有空格。

请注意，我**没有设置填充**，这可能是造成这种情况的原因。

知道如何解决这个问题吗？
另外，如何以**编程**方式设置按钮文本的对齐方式？

我知道这不是最好的问题，但是在花了几个小时之后，我无法破解它。

*任何帮助表示赞赏...*

![截屏](../Images/dc7e273e8eb0eac7cf7c2bc8fb2e64c5.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-06T15:44:12.167

您可以设置按钮的重力来自定义文本的对齐方式。这是通过使用`Gravity`属性在按钮上公开的。从[文档](http://docs.mono-android.net/?link=P%3aAndroid.Widget.TextView.Gravity)：

> 设置文本的水平对齐方式和在 TextView 中存在超出文本本身所需空间的额外空间时将使用的垂直重力。

您可以分配的值可以在[GravityFlags 枚举](http://docs.mono-android.net/?link=T%3aAndroid.Views.GravityFlags)中找到。例如：

```
button.Gravity = GravityFlags.Center; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-06T13:56:42.823

可以使用 .setGravity(int) 设置按钮内容的对齐方式

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-10-30T00:17:12.837

在最初的问题中，我想知道源文本是否包含一些额外的空格字符？这将解释 img1 和 img2。

无论如何，我需要左对齐按钮中的文本，这使我进入了这个页面，这是我最终得到的解决方案，基于 Alix Bloom 的回答：

```
Button myButton = new Button(getActivity());
myButton(Gravity.LEFT); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-08-15T11:33:50.427

```
Button myButton = new Button();
myButton.setGravity(Gravity.RIGHT);   //LEFT 
```

希望这对您有所帮助。为我工作（我也为这个问题苦苦挣扎了一段时间）

# mysql - 在 MY SQL 中插入带有多个选择语句的表

> ID：10042647
> 
> 赞同：0
> 
> 时间：2012-04-06T11:09:37.927
> 
> 标签：mysql

我有如下查询的结果：

```
+------------------+------------+
| meta_key         | meta_value |
+------------------+------------+
| Destination Name | Shivapuri  |
| Destination Date | 26/03/2012 |
+------------------+------------+ 
```

我正在尝试编写一个选择语句，其列名称为目标名称和目标日期，其各自的值为 Shivapuri 和 '26/03/2012'。这怎么可能与 MY SQL 中的查询有关？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T11:44:26.900

沿着这些思路应该做的事情 -

```
SELECT
    GROUP_CONCAT(IF(meta_key = 'Destination Name', meta_value, NULL)) AS `Destination Name`,
    GROUP_CONCAT(IF(meta_key = 'Destination Date', meta_value, NULL)) AS `Destination Date`
FROM tbl_name
GROUP BY record_identifier 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-06T11:48:27.933

```
SELECT 
    (CASE WHEN meta_key = 'Destination Name' THEN meta_value END) as name,
    (CASE WHEN meta_key = 'Destination Date' THEN meta_value END) as date
FROM `yourtable` 
```

# multithreading - node.js 中的“生成线程”行为

> ID：10042648
> 
> 赞同：5
> 
> 时间：2012-04-06T11:09:40.107
> 
> 标签：multithreading, node.js

我想将一些管理实用程序添加到一个小的 Web 应用程序中，例如“备份数据库”。用户将单击一个按钮，HTTP 响应将立即返回，尽管可能长时间运行的进程已在后台启动。

在 Java 中，这可能通过生成一个独立线程来实现，在 Scala 中通过使用 Actor 来实现。但是在 node.js 中什么是合适的习语？（代码片段赞赏）

我现在正在重新阅读文档，这确实看起来是一个节点 101 问题，但这几乎就是我在这个问题上的位置......无论如何，澄清这是基本场景：

```
function onRequest(request, response) {
    doSomething();
    response.writeHead(202, headers);
    response.end("doing something");
}

function doSomething(){
     // long-running operation
} 
```

我希望响应立即返回，让 doSomething() 在后台运行。

好的，考虑到节点的单线程模型，如果不产生另一个 OS 级 ChildProcess，这似乎是不可能的。我的误解。

在我的代码中，我需要的备份主要是基于 I/O，因此节点应该以一种很好的异步方式处理它。我想我要做的是将doSomething移到response.end之后，看看它的行为如何。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-08T22:30:08.953

正如 supertopi 所说，您可以查看[Child process](http://nodejs.org/api/all.html#all_child_process)。但我认为这会损害您服务器的性能，如果这种情况连续发生很多。那么我认为你应该将它们排队。我认为你应该看看[异步消息队列](http://www.phpscaling.com/2009/06/10/doing-the-work-elsewhere-asynchronous-message-queues/)来离线处理你的工作（分布式）。消息队列的一些（仅举两例）示例是[beanstalkd](http://kr.github.com/beanstalkd/)、[gearman](http://en.wikipedia.org/wiki/Gearman)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-18T12:24:49.503

我没有看到问题。您需要做的就是`doSomething()`启动一个异步操作。它会立即返回，您`onRequest`将写回响应，客户端将收到他们的“OK，I started”消息。

```
function doSomething() {
    openDatabaseConnection(connectionString, function(conn) {
        // This is called some time later, once the connection is established.
        // Now you can tell the database to back itself up.
    });
} 
```

`doSomething`不会只是坐在那里直到建立数据库连接，或者等待您告诉它备份。它会立即返回，注册一个稍后会运行的回调。在幕后，您的数据库库可能正在为您创建一些线程，以使异步按应有的方式工作，但您的代码不需要担心它；您只需立即返回，立即将响应发送给客户端，异步代码继续异步运行。

(It's actually more work to make this run synchronously -- you would have to pass your `response` object into `doSomething`, and have `doSomething` do the `response.end` call inside the innermost callback, after the backup is done. Of course, that's not what you want to do here; you want to return immediately, which is exactly what your code will do.)

# iphone - 在设备上拖动/调整 UIImage 的大小

> ID：10042649
> 
> 赞同：1
> 
> 时间：2012-04-06T11:09:46.657
> 
> 标签：iphone, ios, cocos2d-iphone, uikit

我想让用户在某种画布上添加一个形状（这只是一个 UIImage），然后在屏幕上移动并调整它的大小，但我不知道该怎么做。理想情况下，我想要一个绘图应用程序的基础知识，它可以使用来自用户设备的图像。每个形状都有相关的位置、大小和 z-index。

我唯一不确定的是如何创建一个边界框（带有四个蓝点以允许调整大小/移动的边界框）。我有使用 UIKit 的经验，并且希望暂时保留大部分应用程序，但我觉得这种类型的东西可能更适合 Cocos2D 或类似的框架。

如果有人有任何指针/开源代码，我将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T11:29:11.610

我认为您应该研究 CALayer，甚至 CAShapeLayer。我刚刚开始使用它们，但我很确定您可以轻松获得所需的功能。在图层的`drawLayer:inContext:`. 查看[Quartz2d Guide 路径绘图部分](https://developer.apple.com/library/mac/#documentation/graphicsimaging/conceptual/drawingwithquartz2d/dq_paths/dq_paths.html#//apple_ref/doc/uid/TP30001066-CH211-TPXREF101)了解您需要的功能。

# wsdl - 哪些 WSDL 标签可以有文档标签？

> ID：10042652
> 
> 赞同：4
> 
> 时间：2012-04-06T11:10:01.930
> 
> 标签：wsdl

我正在尝试使用一些统计信息进行 WSDL 解析（使用 c#.net）。我的统计数据取决于 WSDL 中的文档标签。我想知道可以包含文档标记以检查它们的 wsdl 标记列表。

我试图阅读 WS-I 基本配置文件，我发现：

* * *

5.1.10 WSDL 文档元素

WSDL 1.1 模式和 WSDL 1.1 规范在 wsdl:documentation 元素的放置位置方面是不一致的。

R2020 wsdl:documentation 元素可以作为DESCRIPTION 中的wsdl:import 元素的子元素出现。WSDL20

R2021 wsdl:documentation 元素可以作为DESCRIPTION 中的wsdl:part 元素的子元素出现。WSDL20

R2024 wsdl:documentation 元素可以作为 wsdl:definitions 元素的第一个子元素出现在说明中。WSDL20

* * *

但是，此配置文件是在 2004 年制作的，所以他们是否应用了更改？文档标签可以是当前标签的任何内部子标签的一部分吗？

谢谢 Kawthar almatori

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-07T17:33:37.490

正如[WS-I 基本概要 2.0所述，](http://ws-i.org/profiles/basicprofile-2.0-2010-11-09.html) [WSDL 1.1 规范](http://www.w3.org/TR/wsdl)和[WSDL 1.1 模式](http://schemas.xmlsoap.org/wsdl/)之间存在一些不一致之处。根据架构`<wsdl:documentation>`，允许元素作为以下元素的*第一*个子元素：

```
/definitions
/definitions/binding
/definitions/binding/operation
/definitions/binding/operation/fault
/definitions/binding/operation/input
/definitions/binding/operation/output
/definitions/import
/definitions/message
/definitions/message/part
/definitions/portType
/definitions/portType/operation
/definitions/portType/operation/fault
/definitions/portType/operation/input
/definitions/portType/operation/output
/definitions/service
/definitions/service/port
/definitions/types 
```

WSDL 1.1 规范在以下方面有所不同：

*   如果存在，它将元素放在`/definitions/documentation`元素之后`/definitions/import`。
*   它不允许`<wsdl:documentation>`在`/definitions/import`or元素上使用子`/definitions/message/part`元素。

WS-I 基本概要中的语句基本上重申了 WSDL 1.1 模式，允许使用*and*`/definitions/import`元素`/definitions/message/part`，并指定`<wsdl:documentation>`允许作为*`/definitions`*

# asp.net-mvc - MVC Razor 分组显示数据

> ID：10042657
> 
> 赞同：0
> 
> 时间：2012-04-06T11:10:33.317
> 
> 标签：asp.net-mvc, functional-programming, procedural-programming

在分组显示数据时，我一直在使用过程编程，我确信一定有更好的方法。你的意见？

```
//Example: Sales by Region

@{
    string _Region = "";
    bool _FirstRecordFlag = false;
    }

    @foreach(DataRow Row in dataset.Tables["MonthlySales"].Rows)
    {
        if(_Region != Row["Region"].ToString())
        {
           if(_FirstRecordFlag)
            {
                @:</fieldset>
                _FirstRecordFlag = true;
            }
            @:<fieldset>
            @:  <legend>@Row["Region"]</legend>
            _Region = Row["Region"].ToString())
        }
            <div>
                Display Sales data here...
            </div>
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-06T11:12:38.763

> 在分组显示数据时，我一直在使用过程编程，我确信一定有更好的方法

当然，还有更好的方法。由于您的问题被标记为`mvc`，因此您应该使用视图模型并在控制器中执行所有此类分组以填充将传递给视图的视图模型。Razor 视图应该尽可能地笨拙——它只会显示来自视图模型的信息。在 Razor 视图中使用 DataSet 和 DataRows 绝对是解决此问题的错误方法。您的视图将类似于一些可怕的意大利面条代码。

因此，请考虑您希望如何在视图上呈现信息。基于这种想法，您将能够提出一个反映这种结构的视图模型。然后，您在控制器操作中所要做的就是将您的域模型（在您的情况下为数据集）映射到将传递给视图的相应视图模型。

如果这不是一个 ASP.NET MVC 应用程序，而是一个只有 View 部分的 WebMatrix 站点，您仍然应该定义一个视图模型，并让剃须刀页面的*代码隐藏*部分将域模型映射到视图模型然后将由 Razor 模板的视图部分操作。

# jquery - jQuery 验证扩展 - 警告、忽略选项、特定于操作

> ID：10042661
> 
> 赞同：0
> 
> 时间：2012-04-06T11:10:56.797
> 
> 标签：jquery, validation, jquery-validate

我喜欢 jQuery 验证的简单性和可扩展性。不过，在我最近的一些用例中，它似乎已经达到了极限。我缺少一些功能。我的问题：是否有支持这些功能的开源库，或者在开发中是否有什么了不起的东西？或者，您对如何扩展/使用验证框架来涵盖这些功能有任何巧妙的提示吗？

错过的功能：

*   对于某些领域，我需要定义“警告”规则而不是错误。如果它们评估为假，则应该显示一条消息，但它应该包含一个“忽略”链接，允许用户关闭规则（类似于 MS Word 的拼写检查器，用户可以选择忽略拼写错误）。如果验证阻止发送表单，理想情况下，当用户单击“忽略”时立即发送表单。

*   规则应该取决于我想用表单执行的操作。虽然对于一个操作，这些字段不是必需的，但执行另一操作可能需要它们。

作为这两种情况的示例，采用“发送电子邮件”表单：

*   “主题”字段不一定是必需的，但如果它为空，用户可能会错过它。理想情况下，验证框架会阻止发送表单并显示一条消息，例如“您错过了主题。忽略”。通过单击“忽略”，消息被禁用并发送表单。
*   发送电子邮件肯定需要“收件人”字段。但如果表单提供了“保存草稿”按钮，则不应强迫用户填写此字段以保存草稿。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T13:26:00.113

对于第二名来说，这非常容易。您不仅可以提交，还可以让每个按钮调用一个在完成时提交的函数。在该函数中，您设置一个 jquery 变量来告诉您它来自哪个按钮，并在`jQuery.validator.addClassRules()`确定是否应用验证要求的调用部分中使用该变量的内容。第一个比较棘手，但您可以设置验证文本 - 这意味着您应该能够在其中包含一个链接。让链接触发一个函数，该函数再次更改应用/不应用逻辑使用的变量（并可能重新提交 - 或者，如果您的页面包含多个这些变量，则重新验证（从而删除错误消息) 并允许他们稍后使用不同的按钮提交）。

关于 addClassRules 可能是什么样子的快速示例。

```
jQuery.validator.addClassRules("toField",
{
    required: {
        depends: function(element)
        {
            return $submitNotSave;
        }
    }
}); 
```

# android - 代码块只在 OnItemClickListener 内运行一次

> ID：10042662
> 
> 赞同：0
> 
> 时间：2012-04-06T11:11:00.293
> 
> 标签：android, codeblocks

```
lstviewBlockedVenues.setOnItemClickListener(new OnItemClickListener() {

        public void onItemClick(AdapterView<?> obj, View arg1, int pos,
                long arg3) {

            Data.currVenueInfo = (VenueInfo) obj.getItemAtPosition(pos);
            String venueList = "";

            if(swipeDetector.swipeDetected())
            {

                try {
                    Button btnBlock = (Button) arg1.findViewById(R.id.btnBlockVen); 
                    Toasts.pop(getApplicationContext(), "Swiped");
                    System.out.println(btnBlock.getVisibility());

                        if(btnBlock.getVisibility() != View.VISIBLE)
                        {
                            btnBlock.setVisibility(View.VISIBLE);
                        }
                        else
                        {
                            btnBlock.setVisibility(View.GONE);                                                                          
                        }

                    System.out.println("Inside swipe");
                } catch (Exception e) {

                    e.printStackTrace();
                }

            }
        }
    }); 
```

在上面的代码中，当用户滑动该行时，我试图在单行上显示一个按钮。最初按钮的可见性消失了。当我第一次在任何行上滑动时，它可以完美运行，并且该行的按钮变得可见。但是，如果我再次滑动同一行，那么按钮应该按照我编写的代码消失，但是当我下次滑动该行时，检测到滑动事件但代码不执行:(。但如果我删除行`btnBlock.setVisibility(View.VISIBLE); and btnBlock.setVisibility(View.VISIBLE);`然后显示吐司味精和logcat味精。我不知道为什么它第二次不起作用。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-06T13:05:06.540

将该按钮的可聚焦更改为 FALSE，因为它不允许列表视图行获得焦点。

# php - 如何在 Google plus 样式弹出框的复选框中显示选中的值？

> ID：10042672
> 
> 赞同：1
> 
> 时间：2012-04-06T11:12:54.617
> 
> 标签：php, ajax, checkbox, google-plus

[在将鼠标悬停在缩略图上时，](https://stackoverflow.com/questions/8157266/google-plus-popup-box-when-hovering-over-thumbnail)阅读有关 Stackoverflow 谷歌加弹出框的这篇文章后 ？我受到启发将其添加到我的网站上。

我设法做到了，脚本将联系人添加到我的数据库中。到目前为止太棒了！

但是，我的问题（也出现在示例中）是它不显示“检查”值......所以用户永远不会知道他们是否已经将它们添加到他们的列表中。

使用 PHP 显示检查值的正确方法是什么？

这是我的html代码：

```
<ul style="list-style: none;padding:2px;">
<li style="padding:5px 2px;">
<input type="checkbox" id="Friends" name="circles" value="Friends" '.$checked1.'/>
            Friends
</li>
<li style="padding:5px 2px;">
<input type="checkbox" id="Following" name="circles" value="Following" '.$checked2.'/>Following
</li>
<li style="padding:5px 2px;">
<input type="checkbox" id="Family" name="circles" value="Family" '.$checked3.'/>
            Family
</li>
<li style="padding:5px 2px;">
<input type="checkbox" id="Acquaintances" name="circles" value="Acquaintances" '.$checked4.'/>
            Acquaintances
</li>
</ul> 
```

我的PHP代码是：

```
if($circle_check_friends>0) {
$ckecked1='checked=""';
} else if ($circle_check_following>0) {
$ckecked2='checked=""';
} else if ($circle_check_family>0) {
$ckecked3='checked=""';
} else if ($circle_check_acquaintances>0) {
$ckecked4='checked=""';
} else if ($circle_check_friends=0) {
$ckecked1='';
} else if ($circle_check_following=0) {
$ckecked2='';
} else if ($circle_check_family=0) {
$ckecked3='';
} else if ($circle_check_acquaintances=0) {
$ckecked4='';
} 
```

我迷路了，因为这没有给我想要的结果......即根据用户的选择显示检查的值。

非常感谢您的帮助

谢谢大家

乔治

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-06T11:26:02.610

尝试这个：

```
$checked1 = ($circle_check_friends == 1) ? 'checked=""' : false;
$checked2 = ($circle_check_following == 1) ? 'checked=""' : false;
$checked3 = ($circle_check_family == 1) ? 'checked=""' : false;
$checked4 = ($circle_check_acquaintances == 1) ? 'checked=""' : false; 
```

# .net - 获取结果类型为自定义派生 UserPrincipal 的 AD 组的成员

> ID：10042673
> 
> 赞同：4
> 
> 时间：2012-04-06T11:13:04.677
> 
> 标签：.net, active-directory, directoryservices, userprincipal

我创建了自己的派生 UserPrincipal 类型，用于获取一些扩展的 AD 属性。这工作正常。

现在我正在寻找一种方法来使用 groupprincipal 对象的 GetMembers() 方法来返回我的自定义 UserPrincipal 类型的列表。

FindByIdentityWithType 在 UserPrincipal 上的工作方式有点相同，其中有一个重载，您可以在其上指定自己的 PrincipalType。

有没有办法在 GetMembers 方法上做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-03T20:40:16.067

我最终使用 AdvancedSearchFilter 来构造 LDAP memberof 查询，而不是 GroupPrincipal.GetMembers。

```
 static void Main(string[] args)
    {
        using (var context = new PrincipalContext(ContextType.Domain))
        {
            var group = GroupPrincipal.FindByIdentity(context, IdentityType.Name, "Group Name");

            UserPrincipalEx qbe = new UserPrincipalEx(context);
            qbe.AdvancedSearchFilter.MemberOf(group);
            PrincipalSearcher searcher = new PrincipalSearcher(qbe);

            var all = searcher.FindAll().OfType<UserPrincipalEx>().ToList();

            foreach (var member in all)
            {
                Console.WriteLine(member.DisplayName);
            }
        }
    }

    public class UserPrincipalExSearchFilter : AdvancedFilters
    {
        public UserPrincipalExSearchFilter(Principal p) : base(p) { }

        public void MemberOf(GroupPrincipal group)
        {
            this.AdvancedFilterSet("memberof", group.DistinguishedName, typeof(string), MatchType.Equals);
        }
    }

    [DirectoryRdnPrefix("CN")]
    [DirectoryObjectClass("User")]
    public class UserPrincipalEx : UserPrincipal
    {
        private UserPrincipalExSearchFilter searchFilter;

        public UserPrincipalEx(PrincipalContext context)
            : base(context)
        {

        }

        public UserPrincipalEx(PrincipalContext context,
                             string samAccountName,
                             string password,
                             bool enabled)
            : base(context,
                   samAccountName,
                   password,
                   enabled)
        {
        }

        public new UserPrincipalExSearchFilter AdvancedSearchFilter
        {
            get
            {
                if (null == searchFilter)
                    searchFilter = new UserPrincipalExSearchFilter(this);

                return searchFilter;
            }
        }
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T07:52:38.507

我没有找到一种从 GetMembers 函数返回自定义用户主体的简单方法。我什至无法将返回的 UserPrincipal 转换为我的自定义 userprincipal。

最后，我通过使用 PrincipalSearcher 对象上的 FindAll 方法从我的 OU 中获取所有用户并将其查询过滤器设置为我的自定义 userprincipal 的新类型，从而解决了这个问题。

然后使用基本 userprincipal 类的 GetGroups 方法检查每个用户是否是组的成员。

# c# - 如何在 WPF 应用程序中配置 StructureMap？

> ID：10042675
> 
> 赞同：2
> 
> 时间：2012-04-06T11:13:10.693
> 
> 标签：c#, wpf, structuremap

我正在 WPF 中开发一个应用程序，我想知道如何开始配置 StructureMap。我来自 MVC 背景，我通常会在 Global.asax 中配置 StructureMap。

下面这篇文章建议我把配置放在`main()`方法里

[http://structuremap.net/structuremap/ConfiguringStructureMap.htm](http://structuremap.net/structuremap/ConfiguringStructureMap.htm)

但在 WPF 中，该`main()`方法位于`App.g.i.cs`和状态

> 此代码是由工具生成的，对此文件的更改可能会导致不正确的行为，并且如果重新生成代码将会丢失。

在 WPF 中似乎没有合适的 Global.asax 等价物，那么配置应该放在哪里？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-06T11:23:20.187

为此使用 App.xaml.cs。

```
public partial class App : Application
{
    protected override void OnStartup(StartupEventArgs e)
    {
        base.OnStartup(e);

        //Do your stuff here
    }
} 
```

# tomcat - 将文件放在 glassfish 服务器上的位置

> ID：10042679
> 
> 赞同：7
> 
> 时间：2012-04-06T11:13:27.953
> 
> 标签：tomcat, glassfish

我们可以将我们的文件说 one.txt 放在 tomcat->webapp 文件夹中的 txt 文件夹中。现在我们可以使用下面的 url 在浏览器中访问这个文件：

```
http://localhost:8080/txt/one.txt 
```

我是 glassfish 服务器的新手。谁能告诉我如何在 glssfish 服务器中和在 tomcat 服务器中做同样的事情？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-06T19:33:22.173

GlassFish 具有非常相似的功能。

有一个默认应用程序提供来自使用 Glassfish 定义的域的 docroot 中的静态内容。

您可以执行以下操作以查看其工作原理。

假设您已通过解压缩其中一个发行版将[GlassFish 3.1.2](http://dlc.sun.com.edgesuite.net/glassfish/3.1.2/release/)安装到名为 /foo（或 C:\FOO）的目录中。

您将能够创建一个目录 /foo/glassfish3/glassfish/domains/domain1/docroot/txt 并将文件 one.txt 放入该目录。

使用命令启动 domain1`asadmin start-domain domain1`

然后，您将能够通过 URL [http://localhost:8080/txt/one.txt 访问 one.txt](http://localhost:8080/txt/one.txt)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-06T11:20:53.327

根据定义，ROOT 应用程序是在服务器的根 URL（例如[http://locahost:8080/](http://locahost:8080/)）下可用的应用程序。

您唯一需要做的就是定义一个应该在根上下文下部署的应用程序。可以在[这里](https://web.archive.org/web/20150919025059/https://blogs.oracle.com/alexismp/entry/glassfish_tip_have_your_application)找到如何在 glassfish 中执行此操作。

# php - PHP：包含或所需文件中未定义的变量

> ID：10042680
> 
> 赞同：0
> 
> 时间：2012-04-06T11:13:32.720
> 
> 标签：php, variables, undefined, include-path

嗨，我有一个未设置变量的问题。如果我使用的是相对路径，它可以正常工作，但是当使用绝对路径时，php 说它没有设置。

```
<?php
define('DS', DIRECTORY_SEPARATOR);
define('SITE_ROOT', 'G:' . DS . 'htdocs' . DS . 'www');
define('LAYOUT_PATH', SITE_ROOT . DS . 'layout');
require('function.php');    

$user = new User();
$user->set_username('johndoe');

require_layout_template('header.php');
?> 
```

在我的里面`header.php`：

```
<?php
//if ( isset($user) ) {
    echo $user->get_username();
//}
?> 
```

上面的结果是这个错误： `Notice: Undefined variable: user in G:\htdocs\www\layout\header.php`

但是，如果我使用相对路径，一切都很好。

我在 Windows 环境中的本地主机上运行并在 PHP 版本 5.3.5 中运行。

## 更新：

我的错是我没有包含`require_layout_template`. 我包含了这个函数`function.php`来处理需要的必要细节。

```
<?php
    //function.php
    function require_layout_template($template) {
        global $user; // added this to solve the problem.
        require(LAYOUT_PATH . DS . $template);
    }
?> 
```

我已经为变量添加了必要的全局变量`$user`。

谢谢@strkol 的想法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-06T11:39:05.593

The best way in general is to define the root directory on the site that is directly called by the user. So all index sites, that are supposed to by directly addressed by the user, but not in other .php files, that are included or classes and so on.

```
index.php:
$rootdir = '../';

require_once($rootdir.'dir/other.php); 
```

# c++ - C++ 中 BigInt 库的问题

> ID：10042681
> 
> 赞同：1
> 
> 时间：2012-04-06T11:13:33.140
> 
> 标签：c++, bigint

所以我正在尝试这个 bigint 库：[https](https://mattmccutchen.net/bigint/) ://mattmccutchen.net/bigint/ on OSX Lion。

我尝试使用他们网站上的示例制作一个简单的文件。

```
#include <iostream>
#include <bigint/BigIntegerLibrary.hh>
using namespace std;

int main(){
  BigInteger a;
  int b=5;
  a=b;
  cout<<a;
return 0;
} 
```

当我在 textmate 中编译它时，输出是：

```
Undefined symbols for architecture x86_64:
  "BigInteger::BigInteger(int)", referenced from:
      _main in ccl9yNN5.o
  "BigInteger::operator=(BigInteger const&)", referenced from:
      _main in ccl9yNN5.o
  "operator<<(std::basic_ostream<char, std::char_traits<char> >&, BigInteger const&)", referenced from:
      _main in ccl9yNN5.o
ld: symbol(s) not found for architecture x86_64
collect2: ld returned 1 exit status 
```

谁能告诉我出了什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-22T08:18:34.637

以防万一有人仍在寻找答案。我发现您必须深入研究 Makefile 并弄清楚如何使用 Makefile 手动链接程序。我所做的是在 bigint 文件夹中，我运行了一次“make library”，然后，我按照 Makefile 末尾的示例将库文件链接在一起。这是我试图解决[SPOJ 问题的](http://www.spoj.com/problems/JULKA/)[Makefile](https://raw.github.com/lhr0909/SPOJ/101bedc4e0d38b007b3e41126d311f3621ca48dd/Makefile)：

# xml - xslt 转换

> ID：10042682
> 
> 赞同：2
> 
> 时间：2012-04-06T11:13:39.380
> 
> 标签：xml, xslt

我正在开发一个应用程序，我需要转换如下所示的 XML 文档：

```
<?xml version='1.0' encoding='ISO-8859-1'?>
<!DOCTYPE markables SYSTEM "markables.dtd">
<markables>
<markable id="markable_1" mmax_level="coref" span="word_1..word_4"> </markable>
<markable id="markable_2" mmax_level="coref" span="word_6..word_7"> </markable>
<markable id="markable_3" mmax_level="coref" span="word_10..word_24"> </markable>
</markables> 
```

使用 XSLT 样式表。我希望转换的结果是（在这种情况下）`word_1 word_6 word_10`，这是我正在使用的 XSL：

```
<?xml version='1.0' encoding='ISO-8859-1'?>

<xsl:transform version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">

<xsl:template match="markable">
  <html>
  <body>
    <tr>
      <td><xsl:value-of select="@span"/></td>
    </tr>
  </body>
  </html>
</xsl:template>

</xsl:stylesheet> 
```

结果是`word_1..word_4 word_6..word_7 word_10..word_24`。我必须在 XSLT 中进行哪些更改？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-06T11:19:15.900

您需要使用 XSLT 函数，即`fn:substring-before(@span, '..')`

# hook - 如何修复 me51n 用户出口 EXIT_SAPLMEREQ_010？

> ID：10042684
> 
> 赞同：2
> 
> 时间：2012-04-06T11:13:59.083
> 
> 标签：hook, abap, sap-erp

我对 me51n 有疑问。我在 EXIT_SAPLMEREQ_010 中有一个包含一堆代码，我们用它来接收错误。我的问题是；

- 当我使用所需数据（材料编号、数量等）运行 me51n 时，我收到一些错误，其中还包括我第一次预期的错误，但是当我终止 me51n 并以相同的方式再次运行它时数据，我没有得到我的错误。我已经对其进行了调试，并在 EXIT_SAPLMEREQ_010 中的包含上放置了一个断点，但它在第二次运行时永远不会到达我的断点。（它在第一次运行时到达断点，但不是第二次）。

我不知道如何，但是使用相同的材​​料，它在第一次之后再次正常工作，但第二次仍然无法再次出现错误。

谁能帮我解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T06:12:41.160

基本上问题是从一开始的开发系统（叹气-_-）。虽然有其他错误而不是我的错误，但我认为我的错误有时会因为标准 SAP 程序而被卡住并且永远不会弹出。因此，在测试系统 (QA) 中，当我试图只遇到错误时，me51n 可以完美运行。

感谢任何真正尝试提供帮助的人，我希望这可能对将来的某个人有用。

塔尔哈

# mobile - 将用户重定向到网站的移动版本

> ID：10042686
> 
> 赞同：0
> 
> 时间：2012-04-06T11:14:14.007
> 
> 标签：mobile, redirect, user-agent

如何将使用旧设备的用户重定向到移动站点 [m.site.com] 的简化（无 css）版本，以及将 Iphone 或三星 Galaxy 等较新设备重定向到更现代的设备？[sp.site.com]

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T11:41:47.807

我会推荐特征检测。

测试“较新设备”所需的功能，如果缺乏支持，则重定向到较旧的设备。

[您可以使用Modernizr](http://modernizr.com/)测试功能

重定向很简单：

```
<script type="text/javascript">
<!--
    window.location = "m.site.com"
//-->
</script> 
```

# android - 在 xml 提要中获取描述

> ID：10042688
> 
> 赞同：0
> 
> 时间：2012-04-06T11:14:32.847
> 
> 标签：android, rss

我正在使用以下链接并解析 xml 字段并在列表视图中显示标题。我的问题是描述包含 html 标签。

```
<description><![CDATA[<p>We had one of our best episodes yet talking about how to monetize apps through advertisements and how to create custom ones. In addition we taught how to implement analytics in your app and how important analytics are to improving user experience. Our special guest for the show was Scott Mountenay, a web developer who has entered the Android ecosystem. He speaks about his experience, opinions, and favourite things about developing for Android. Join us in another two weeks on April 5th for another great episode.</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p style="text-align: center;"><object classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000" width="480" height="296" id="utv206642" name="utv_n_61348"><param name="flashvars" value="loc=%2F&amp;autoplay=false&amp;vid=13501464&amp;locale=en_US&amp;hasticket=false&amp;id=13501464&amp;v3=1" /><param name="allowfullscreen" value="true" /><param name="allowscriptaccess" value="always" /><param name="src" value="http://www.ustream.tv/flash/viewer.swf" /><embed flashvars="loc=%2F&amp;autoplay=false&amp;vid=13501464&amp;locale=en_US&amp;hasticket=false&amp;id=13501464&amp;v3=1" width="480" height="296" allowfullscreen="true" allowscriptaccess="always" id="utv206642" name="utv_n_61348" src="http://www.ustream.tv/flash/viewer.swf" type="application/x-shockwave-flash" /></object></p>
<p style="text-align: center;"><object classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000" width="480" height="296" id="utv418087" name="utv_n_63775"><param name="flashvars" value="loc=%2F&amp;autoplay=false&amp;vid=13502856&amp;locale=en_US&amp;hasticket=false&amp;id=13502856&amp;v3=1" /><param name="allowfullscreen" value="true" /><param name="allowscriptaccess" value="always" /><param name="src" value="http://www.ustream.tv/flash/viewer.swf" /><embed flashvars="loc=%2F&amp;autoplay=false&amp;vid=13502856&amp;locale=en_US&amp;hasticket=false&amp;id=13502856&amp;v3=1" width="480" height="296" allowfullscreen="true" allowscriptaccess="always" id="utv418087" name="utv_n_63775" src="http://www.ustream.tv/flash/viewer.swf" type="application/x-shockwave-flash" /></object></p>]]></description> 
```

我将如何只显示有意义的数据。同样在单击列表视图时，显示此文本的最佳布局是什么以及我将如何创建它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T11:28:27.023

通常解析器`CDATA`会根据定义忽略，但在 android 中，您可以使用`nexttoken()`函数找到它，然后 gettext 检索其中的文本来获取它。

您可以在此页面上阅读它：http: [//developer.android.com/reference/org/xmlpull/v1/XmlPullParser.html](http://developer.android.com/reference/org/xmlpull/v1/XmlPullParser.html)

# android - 如何将相机结果作为数据文件夹中的 uri 获取？

> ID：10042695
> 
> 赞同：66
> 
> 时间：2012-04-06T11:15:11.337
> 
> 标签：android, android-camera, android-contentprovider

我正在创建一个应用程序，我想在其中捕获图像，然后我想将该图像作为附件发送到电子邮件中。

我正在使用`android.provider.MediaStore.ACTION_IMAGE_CAPTURE`意图操作打开相机，并将文件的 Uri 作为参数`EXTRA_OUTPUT`传递以将图像返回到文件中。`external storage uri`这工作得很好，如果我使用as a ，我可以获取捕获的图像，`EXTRA_OUTPUT`但如果我使用数据文件夹 uri，它就不起作用，相机没有关闭，它的所有按钮都不起作用。

这是我在外部存储目录中获取结果的代码

```
Intent i = new Intent(android.provider.MediaStore.ACTION_IMAGE_CAPTURE);
File out = Environment.getExternalStorageDirectory();
out = new File(out, imagename);
i.putExtra(MediaStore.EXTRA_OUTPUT, Uri.fromFile(out));
startActivityForResult(i, CAMERA_RESULT); 
```

此代码用于获取数据文件夹中的图像

```
Intent i = new Intent(android.provider.MediaStore.ACTION_IMAGE_CAPTURE);
File out = getFilesDir();
out = new File(out, MyPharmacyOptions.PRESCRIPTION_IMAGE_NAME);
i.putExtra(MediaStore.EXTRA_OUTPUT, Uri.fromFile(out));
startActivityForResult(i, CAMERA_RESULT); 
```

我知道**第三个应用程序无法访问数据文件夹，**所以这可能会导致问题，所以我创建了一个内容提供程序来共享文件。

这是我的内容提供类

```
public class MyContentProvider extends ContentProvider {
    private static final String Tag = RingtonContentProvider.class.getName();
    public static final Uri CONTENT_URI = Uri
            .parse("content://x.y.z/");
    private static final HashMap<String, String> MIME_TYPES = new HashMap<String, String>();

    static {
        MIME_TYPES.put(".mp3", "audio/mp3");
        MIME_TYPES.put(".wav", "audio/mp3");
        MIME_TYPES.put(".jpg", "image/jpeg");
    }

    @Override
    public boolean onCreate() {
        return true;
    }

    @Override
    public String getType(Uri uri) {
        String path = uri.toString();

        for (String extension : MIME_TYPES.keySet()) {
            if (path.endsWith(extension)) {
                return (MIME_TYPES.get(extension));
            }
        }

        return (null);
    }

    @Override
    public ParcelFileDescriptor openFile(Uri uri, String mode)
            throws FileNotFoundException {
        File f = new File(getContext().getFilesDir(), uri.getPath());

        if (f.exists()) {
            return (ParcelFileDescriptor.open(f, ParcelFileDescriptor.MODE_READ_ONLY));
        }

        throw new FileNotFoundException(uri.getPath());
    }

    @Override
    public Cursor query(Uri url, String[] projection, String selection,
            String[] selectionArgs, String sort) {
        throw new RuntimeException("Operation not supported");
    }

    @Override
    public Uri insert(Uri uri, ContentValues initialValues) {
        File file = new File(getContext().getFilesDir(), uri.getPath());
        if(file.exists()) file.delete();
        try {
            file.createNewFile();
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }

        return Uri.fromFile(file);
    }

    @Override
    public int update(Uri uri, ContentValues values, String where,
            String[] whereArgs) {
        throw new RuntimeException("Operation not supported");
    }

    @Override
    public int delete(Uri uri, String where, String[] whereArgs) {
        File f = new File(getContext().getFilesDir(), "image1.jpg");
        if(f.exists()) f.delete();
        f = new File(getContext().getFilesDir(), "image2.jpg");
        if(f.exists()) f.delete();

        getContext().getContentResolver().notifyChange(CONTENT_URI, null);

    }
} 
```

因此，要使用此内容提供我正在使用以下代码将 uri 传递给相机活动

```
Intent i = new Intent(android.provider.MediaStore.ACTION_IMAGE_CAPTURE);
Uri uri = MyContentProvider.CONTENT_URI;
uri = Uri.withAppendedPath(uri, imagename);
getContentResolver().insert(uri, null);
getContentResolver().notifyChange(RingtonContentProvider.CONTENT_URI, null);
Log.d(Tag, uri.toString());
i.putExtra(MediaStore.EXTRA_OUTPUT, uri);

startActivityForResult(i, CAMERA_RESULT); 
```

现在，如果我通过外部存储目录以外的 url，相机正在打开，但它没有在模拟器中关闭，但在设备中，相机将关闭，但我没有得到结果。

我已在清单文件中声明此内容提供

```
<provider
android:name=".contentproviders.MyContentProvider"
android:authorities="x.y.z" /> 
```

此外，我已授予**写入外部存储**和**使用相机**的权限。

我可以使用外部存储捕获图像，但我想将图像存储在数据目录而不是外部存储中，因为如果外部存储不可用，我想捕获图像并想发送邮件。

如果我创建内容提供，那么我还可以将我的图像分享到电子邮件应用程序。

**如果我们不提供带有相机意图的附加功能，它将在活动结果中将图像作为字节 [] 作为数据附加功能返回，但这是出于缩略图的目的，因此我无法使用这种方式获得高分辨率图像.**

* * *

## 回答 #1

> 赞同：71
> 
> 时间：2012-04-19T13:34:22.847

有两种方法可以解决这个问题。

**1\. 保存您从 onActivityResult 方法收到的位图**

您可以使用以下代码通过意图启动相机以捕获照片

```
Intent cameraIntent=new Intent(android.provider.MediaStore.ACTION_IMAGE_CAPTURE);
startActivityForResult(cameraIntent, CAMERA_REQUEST); 
```

拍摄照片后，您将在 onActivityResult 方法中获得位图

```
if (requestCode == CAMERA_REQUEST) {  
    Bitmap photo = (Bitmap) data.getExtras().get("data"); 
 } 
```

现在您可以简单地将此位图保存到内部存储

**注意：这里的位图对象由拇指图像组成，它不会有全分辨率图像**

**2\. 使用内容提供程序将位图直接保存到内部存储**

在这里，我们将创建内容提供者类以允许本地存储目录对相机活动的权限

示例提供程序示例如下

```
public class MyFileContentProvider extends ContentProvider {
    public static final Uri CONTENT_URI = Uri.parse
                                    ("content://com.example.camerademo/");
    private static final HashMap<String, String> MIME_TYPES = 
                                     new HashMap<String, String>();

    static {
        MIME_TYPES.put(".jpg", "image/jpeg");
        MIME_TYPES.put(".jpeg", "image/jpeg");
    }

    @Override
    public boolean onCreate() {

        try {
            File mFile = new File(getContext().getFilesDir(), "newImage.jpg");
            if(!mFile.exists()) {
                mFile.createNewFile();
            }
            getContext().getContentResolver().notifyChange(CONTENT_URI, null);
            return (true);
        } catch (Exception e) {
            e.printStackTrace();
            return false;
        }

    }

    @Override
    public String getType(Uri uri) {
        String path = uri.toString();

        for (String extension : MIME_TYPES.keySet()) {
            if (path.endsWith(extension)) {
                return (MIME_TYPES.get(extension));
            }
        }
        return (null);
    }

    @Override
    public ParcelFileDescriptor openFile(Uri uri, String mode)
    throws FileNotFoundException {

        File f = new File(getContext().getFilesDir(), "newImage.jpg");
        if (f.exists()) {
            return (ParcelFileDescriptor.open(f,
                    ParcelFileDescriptor.MODE_READ_WRITE));
        }
        throw new FileNotFoundException(uri.getPath());
    }
} 
```

之后，您可以使用以下代码简单地使用 URI 传递给相机活动

```
Intent i = new Intent(android.provider.MediaStore.ACTION_IMAGE_CAPTURE);
i.putExtra(MediaStore.EXTRA_OUTPUT, MyFileContentProvider.CONTENT_URI);
startActivityForResult(i, CAMERA_RESULT); 
```

如果您不想创建自己的提供程序，则可以使用support-library-v4 中的[FileProvider](https://developer.android.com/reference/android/support/v4/content/FileProvider.html)。如需详细帮助，您可以查看[此帖子](https://stackoverflow.com/questions/10042695/how-to-get-camera-result-as-a-uri-in-data-folder/27234908#27234908)

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2014-12-01T18:35:33.590

我找到的最佳解决方案是：FileProvider（需要 support-library-v4）它使用内部存储！ [https://developer.android.com/reference/android/support/v4/content/FileProvider.html](https://developer.android.com/reference/android/support/v4/content/FileProvider.html)

1.  在应用程序元素的清单中定义您的 FileProvider：

    ```
    <provider
          android:name="android.support.v4.content.FileProvider"
          android:authorities="your.package.name.fileprovider"
          android:exported="false"
          android:grantUriPermissions="true" >
          <meta-data
                     android:name="android.support.FILE_PROVIDER_PATHS"
                     android:resource="@xml/image_path" />
    </provider> 
    ```

2.  在清单根元素中添加权限：

    ```
    <uses-permission android:name="android.permission.CAMERA" />
    <uses-feature android:name="android.hardware.camera" android:required="false" /> 
    ```

3.  在例如 res/xml/image_path.xml 中定义您的图像路径：

    ```
    <paths xmlns:android="http://schemas.android.com/apk/res/android">
    <files-path name="captured_image" path="your/path/"/>
    </paths> 
    ```

4.  爪哇：

    ```
    private static final int IMAGE_REQUEST_CODE = 1;
    // your authority, must be the same as in your manifest file 
    private static final String CAPTURE_IMAGE_FILE_PROVIDER = "your.package.name.fileprovider"; 
    ```

4.1 捕获意图：

```
 File path = new File(activity.getFilesDir(), "your/path");
    if (!path.exists()) path.mkdirs();
    File image = new File(path, "image.jpg");
    Uri imageUri = FileProvider.getUriForFile(activity, CAPTURE_IMAGE_FILE_PROVIDER, image);
    Intent intent = new Intent(MediaStore.ACTION_IMAGE_CAPTURE);
    intent.putExtra(MediaStore.EXTRA_OUTPUT, imageUri);
    startActivityForResult(intent, IMAGE_REQUEST_CODE); 
```

4.2 onActivityResult()：

```
 @Override
    public void onActivityResult(int requestCode, int resultCode, Intent intent) {
        if (requestCode == IMAGE_REQUEST_CODE) {
            if (resultCode == Activity.RESULT_OK) {
                File path = new File(getFilesDir(), "your/path");
                if (!path.exists()) path.mkdirs();
                File imageFile = new File(path, "image.jpg");
                // use imageFile to open your image
            }
        }
        super.onActivityResult(requestCode, resultCode, intent);
    } 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-04-18T12:51:45.647

有意来电拍照，

```
Intent cameraIntent = new Intent(android.provider.MediaStore.ACTION_IMAGE_CAPTURE);  
startActivityForResult(cameraIntent, CAMERA_REQUEST); 
```

然后把位图放进去`ActivityResult`

```
 if (requestCode == CAMERA_REQUEST) {   
            Bitmap photo = (Bitmap) data.getExtras().get("data");  
 } 
```

然后将其写入内部存储器，[看到这个](https://stackoverflow.com/questions/4135927/copy-image-to-internal-memory)

```
// The openfileOutput() method creates a file on the phone/internal storage in the context of your application  
final FileOutputStream fos = openFileOutput("my_new_image.jpg", Context.MODE_PRIVATE); 

// Use the compress method on the BitMap object to write image to the OutputStream 
bm.compress(CompressFormat.JPEG, 90, fos); 
```

然后下次读取那个文件，

```
Bitmap bitmap = BitmapFactory.decodeFile(file); 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-04-06T11:35:56.480

首先将照片保存在您的外部存储中并尝试一下 -

```
@Override
public void onCreate(Bundle savedInstanceState) {
   super.onCreate(savedInstanceState);
   setContentView(R.layout.main);
   this.imageView = (ImageView)this.findViewById(R.id.imageView1);
   Button photoButton = (Button) this.findViewById(R.id.button1);
   photoButton.setOnClickListener(new View.OnClickListener() {

    @Override
    public void onClick(View v) {
        Intent cameraIntent = new Intent(android.provider.MediaStore.ACTION_IMAGE_CAPTURE); 
        startActivityForResult(cameraIntent, CAMERA_REQUEST); 
    }
});
}

protected void onActivityResult(int requestCode, int resultCode, Intent data) {  
   if (requestCode == CAMERA_REQUEST) {  
        Bitmap bmp = intent.getExtras().get("data");
        ByteArrayOutputStream stream = new ByteArrayOutputStream();

         bmp.compress(Bitmap.CompressFormat.PNG, 100, stream);
         byte[] byteArray = stream.toByteArray(); // convert camera photo to byte array

         // save it in your external storage.
        FileOutputStream fo = new FileOutputStream(new File(Environment.getExternalStorageDirectory() + "/_camera.png"));

        fo.write(byteArray);
        fo.flush();
        fo.close();
   }  
} 
```

下一个目标——

```
File cameraFile = new File(Environment.getExternalStorageDirectory() + "/_camera.png");                 
startActivityForResult(Intent.createChooser(new Intent(Intent.ACTION_SEND)
        .setType("image/jpg")
        .putExtra(Intent.EXTRA_SUBJECT, "Subject")
        .putExtra(Intent.EXTRA_STREAM, Uri.fromFile(cameraFile))
        .putExtra(Intent.EXTRA_TEXT, textBody), "Send your message using"), Constant.EMAIL); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-10-19T03:18:31.397

您也可以在不需要内容提供商的情况下执行此操作，因为无论如何您都需要 sd 卡来打开相机图像捕获意图。您当然可以破解 sd 卡的存在，但不能使用相机意图捕获....所以您正在检查外部存储，但此时需要它....仅供参考，您还应该查看一个裁剪库，如裁剪图像而不是使用本机，因为它在设备之间没有得到很好的支持。

```
File mediaStorageDir;
String photoFileName = "photo.jpg";

    public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    // page = getArguments().getInt("someInt", 0);
    // title = getArguments().getString("someTitle");
    // Get safe storage directory for photos
        mediaStorageDir = new File(
                Environment                          .getExternalStoragePublicDirectory(Environment.DIRECTORY_PICTURES),
                APP_TAG);
        // Create the storage directory if it does not exist
        if (!mediaStorageDir.exists() && !mediaStorageDir.mkdirs()) {
            Log.d(APP_TAG, "Directory exists: " + mediaStorageDir.isDirectory());
            Log.d(APP_TAG, "Directory exists: " + mediaStorageDir.getPath());
            Log.d(APP_TAG,
                    "Directory exists: "
                            + Environment.getExternalStorageState());
            Log.d(APP_TAG, "failed to create directory");
        }

} 
```

在您的“拍照”代码中：

```
 Intent intent = new Intent(MediaStore.ACTION_IMAGE_CAPTURE);
            intent.putExtra(MediaStore.EXTRA_OUTPUT, getPhotoFileUri(photoFileName)); 
```

...

```
public Uri getPhotoFileUri(String fileName) {

    return Uri.fromFile(new File(mediaStorageDir.getPath() + File.separator
            + fileName));
} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2015-10-14T16:01:22.593

在研究了这个错误一段时间后，我注意到调用相机意图的活动只有在手机内存不足时才会重新启动。因此，因为重新启动了活动，所以保存捕获图像的路径或 Uri 的对象被刷新（为空）

所以我建议您在 onActivityResult 中捕获/检测空对象，并提示用户释放设备上的空间或重新启动手机以进行快速临时修复。

# c# - 重定向标准错误/标准输出

> ID：10042696
> 
> 赞同：1
> 
> 时间：2012-04-06T11:15:16.370
> 
> 标签：c#, .net, console-output, console-redirect

我有一个 C# 应用程序，我在其中尝试将一些写入到 stderror 的文本重定向。写入 stderror 的文本实际上是通过调用其他 dll 中存在的函数来编写的。我已经使用`CreatePipe`,`SetStdHandle`和`ReadFile`（按此顺序）来实现上述功能。虽然我可以使用 Console.SetError 重定向在同一个 C# 文件中写入的任何文本，但由其他 dll 写入 stderr 的文本仍会写入本机 stderr 并且不会被重定向。

有什么方法可以捕获/重定向此文本？谢谢。

# iphone - glBlendFuncSeparate 在 iOS 上更透明

> ID：10042699
> 
> 赞同：0
> 
> 时间：2012-04-06T11:15:45.127
> 
> 标签：iphone, ios, opengl-es, blending

我正在使用

```
glBlendFuncSeparate(GL_SRC_ALPHA, GL_ONE_MINUS_SRC_ALPHA, GL_ONE, GL_ONE); 
```

并使用绘制此帧缓冲区

```
glBlendFunc(GL_SRC_ALPHA, GL_ONE_MINUS_SRC_ALPHA); 
```

在使用 OpenGL 的 Mac、Window 和 Linux 上一切正常，但在使用 OpenGL ES 的 iOS 上，生成的帧缓冲区更加透明。

我可能做错了什么，我该如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T17:10:18.040

好的修好了。这是我自己犯的一个愚蠢的错误；）

我不小心添加`#define glBlendFuncSeparate`了我的一个头文件，
导致`glBlendFuncSeparate`什么都不做；）

# android-activity - 哪个活动应该首先出现？定义为启动器？

> ID：10042702
> 
> 赞同：3
> 
> 时间：2012-04-06T11:16:08.763
> 
> 标签：android-activity, android-intent, launcher

如果我有一个登录屏幕，然后是显示我的应用程序主要功能的活动。

哪一个应该被视为 default=launcher 活动？

如果用户名/密码存在于首选项中，我是否应该将登录屏幕作为启动器将被跳过？或者我应该将我的主要活动作为启动器，如果不存在用户/密码，它应该启动登录活动？

我找到了以下谷歌指导方针：http: [//developer.android.com/guide/practices/design/seamlessness.html](http://developer.android.com/guide/practices/design/seamlessness.html)

看标题：不要超载单个活动屏幕

我不确定我是否理解正确，但如果我理解了，那么这意味着登录屏幕应该是启动器屏幕。

我对么？你有什么建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T16:49:24.100

这是常识怎么办。

成功登录后，将用户名和密码保存在 sqlite 数据库中或保存在`SharedPreferences`. 并检查侧`oncreate()`方法 og Login Activity中是否已存在数据

如果**用户名**和**密码**存在于`SharedPreferences`或 sqlite 数据库中。开始您拥有主要功能的活动。

# vb.net - 属性访问必须分配给属性或使用它的值 vb

> ID：10042703
> 
> 赞同：0
> 
> 时间：2012-04-06T11:16:11.397
> 
> 标签：vb.net, datagridview

我收到此错误，“属性访问必须分配给属性或使用其值”我试图将 texbox 和组合框中的值分配给单个变量，但它给出了错误。我的任务线是`feditForm.textbox.Text & "-" & feditForm.comboBox.Text = fnum`。 `fnum`是保存从 datagridview 单元格获得的值的变量。它被定义为`Dim fnum As String = Me.regFarmGrd.SelectedRows(0).Cells("NUMBER").Value`。可能有什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-06T17:39:58.437

根据猜测，尝试：

```
fnum = feditForm.textbox.Text & "-" & feditForm.comboBox.Text 
```

# c - 如果文件指针在 C 中返回 NULL，我如何确定文件是否不存在或访问权限不存在？

> ID：10042707
> 
> 赞同：0
> 
> 时间：2012-04-06T11:16:37.013
> 
> 标签：c, linux, file-io

如果文件指针在 C 中返回 NULL，我如何确定文件是否不存在或访问权限不存在？我正在Linux中编写代码。并且文件无权访问，但文件存在，那么我如何返回文件不存在或文件无权访问的不同状态。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T11:18:30.493

检查`errno`尝试打开文件后的值：

```
if (NULL == (fp = fopen("myfile.txt", "r")))
{
    if (ENOENT != errno)
    {
        fprintf(stderr, "Failed to open file: %s\n", strerror(errno));
    }
    else
    {
        fprintf(stderr, "file does not exist\n");
    }
} 
```

# drupal-7 - Drupal 7，如何在我的网站上添加“最后更新”功能？

> ID：10042708
> 
> 赞同：0
> 
> 时间：2012-04-06T11:16:41.620
> 
> 标签：drupal-7

我希望在我的网站上添加“上次更新”（自动显示我的网站内容上次更新时间的文本）。

我在 Drupal 论坛上找到了一些答案，不幸的是他们都关注 Drupal 6，我根本无法让他们在 Drupal 7 上工作......

由于我对 PHP 一无所知，并且我相信它需要添加一些 PHP 代码，如果答案可以“尽可能简单”并且非常“逐步”，则非常感谢：o)

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T15:22:53.150

根据穆罕默德的回答，我能够让它在 Drupal 6 中工作。我只需要稍微修改一下。

```
<?php print "Last modified date: " . format_date($node->changed, $type = 'small'); ?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-08T08:11:40.250

您可以使用 node.tpl.php 模板并使用以下行

```
<?php
    print "Last modified date: " . format_date($node->changed, "short");
?> 
```

希望这会有所帮助……穆罕默德。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-02T05:17:18.330

并非所有模板文件都始终在范围内具有`$node`对象（例如`page.tpl.php`，在用于呈现用户页面时没有）。

例如，如果您希望将“上次修改日期”行添加`page.tpl.php`到页脚中，则需要确保仅在范围内`format_date`有`$node`对象时调用。

这就是 Drupal 7 的样子：

```
<?php
if (isset($node->changed)) {
  print "Last modified date: " . format_date($node->changed);
}
?> 
```

# wcf - WCF 服务 ContextMode=PerSession 和 ConcurrencyMode=Multiple

> ID：10042711
> 
> 赞同：-2
> 
> 时间：2012-04-06T11:17:22.253
> 
> 标签：wcf

我有一个 WCF 服务，并希望在**PerSession 模式和并发模式下使用 Multiple**，但是在使用时我正在使用单线程获取新的服务实例。下面是测试结果。

**每个会话/并发模式 - 多个** ============== 队列名称：1111，创建的服务调用服务实例：1，线程：19 时间：4/6/2012 4:01:55下午===============

============== 队列名称：1111，创建的服务调用服务实例：2，线程：19 时间：2012 年 4 月 6 日下午 4:01:59====== ========

============== 队列名称：1111，创建的服务调用服务实例：3，线程：19 时间：2012 年 4 月 6 日下午 4:02:03====== ========

============== 队列名称：1111，创建的服务调用服务实例：4，线程：19 时间：2012 年 4 月 6 日下午 4:02:07====== ========

============== 队列名称：1111，创建的服务调用服务实例：5，线程：19 时间：2012 年 4 月 6 日下午 4:02:11====== ========

**PerCall /并发模式 - 单**

============== 队列名称：10006，创建的服务调用服务实例：1，线程：13 时间：2012 年 4 月 6 日下午 2:06:22====== ========

============== 队列名称：10006，创建的服务调用服务实例：1，线程：13 时间：2012 年 4 月 6 日下午 2:06:26====== ========

============== 队列名称：10006，创建的服务调用服务实例：1，线程：13 时间：2012 年 4 月 6 日下午 2:06:30====== ========

============== 队列名称：10006，创建的服务调用服务实例：1，线程：13 时间：2012 年 4 月 6 日下午 2:06:34====== ========

============== 队列名称：10006，创建的服务调用服务实例：1，线程：6 时间：2012 年 4 月 6 日下午 2:06:38====== ========

**PerCall 并发模式 - 多个** ============== 队列名称：10007，对于创建的服务 CallServ 实例：1，线程：6 时间：4/6/2012 2:08:32 PM= ==============

============== 队列名称：10007，创建的服务调用服务实例：1，线程：6 时间：2012 年 4 月 6 日下午 2:08:36====== ========

============== 队列名称：10007，创建的服务调用服务实例：1，线程：6 时间：2012 年 4 月 6 日下午 2:08:40====== ========

============== 队列名称：10007，创建的服务调用服务实例：1，线程：6 时间：4/6/2012 2:08:44 PM====== ========

============== 队列名称：10007，创建的服务调用服务实例：1，线程：6 时间：2012 年 4 月 6 日下午 2:08:48====== ========

给我一个解决方案。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T13:54:24.657

在 PerCall 实例中，并发性无关紧要，因为每条消息都由一个新的服务实例处理。

在会话实例化中，并发是相关的。在多个并发的情况下，应该编写线程安全的代码。请分享您的代码。

# mysql - 访问 localhost/htdocs 下的文件夹有些工作，有些不工作

> ID：10042716
> 
> 赞同：0
> 
> 时间：2012-04-06T11:18:12.137
> 
> 标签：mysql, apache, mysql-management

我在我的 Win7 笔记本电脑上安装了 apache2.2 和 php5.3。我可以在 htdocs 文件夹以及名为 htdocs/myzftest/public/index.php 的文件夹下毫无问题地运行 html 和 php 文件。

我刚刚安装了 MySQL，它似乎工作正常。然后我将 phpMyAdmin 下载到 htdocs/phpMyAdmin 并尝试从那里运行 index.php 但我得到了在此服务器上找不到请求的 URL /phpMyAdmin/index.php。

为什么我可以访问一个子文件夹下的 index.php 而不能访问另一个子文件夹？

我看到了一些关于 .htaccess 文件的帖子，但我不知道如何/在哪里使用它。

谢谢丹

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-06T11:50:45.777

1.  我想首先建议您将自定义的 Apache + PHP 5.3 + MySQL 安装替换为已经集成和配置的 WAMP (www.wampserver.com/en/)。

2.  它还带有预构建的 phpMyAdmin，因此您也不需要下载或配置它。

3.  我假设您将在看到 zftest 的项目中使用 Zend Framework，您可以按照这里的步骤[在 Wamp 服务器中设置 Zend](https://stackoverflow.com/questions/9616903/setting-up-zend-in-wamp-server/9617284#9617284)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T12:03:58.240

我的猜测是，您的一个 conf 文件（例如 httpd.conf）中有一个 phpadmin 的别名。例如，我在 httpd-xampp.conf 中有这个：

```
Alias /phpmyadmin "C:/Program Files/xampp/phpMyAdmin/"
<Directory "C:/Program Files/xampp/phpMyAdmin">
AllowOverride AuthConfig
</Directory> 
```

这将对 phpMyAdmin 的调用重定向到目录`C:/Program Files/xampp/phpMyAdmin`而不是`C:/Program Files/xampp/htdocs/phpMyAdmin`

# c++ - 使用 EM_AUTOURLDETECT 时，有什么方法可以修改 Rich Edit 控件识别的默认协议方案？

> ID：10042717
> 
> 赞同：1
> 
> 时间：2012-04-06T11:18:23.993
> 
> 标签：c++, winapi, url, tortoisesvn

我正在尝试确定是否有任何方法可以修改富编辑控件在使用 EM_AUTOURLDETECT 时的默认协议方案集，如下所述：

[http://msdn.microsoft.com/en-us/library/windows/desktop/bb787991(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/bb787991(v=vs.85).aspx)

换句话说，当 EM_AUTOURLDETECT 消息被发送到控件并且 LPARAM 为 NULL 时，以下一组协议方案被识别并显示为超链接：

*   拨电至
*   文件
*   ftp
*   地鼠
*   http
*   https
*   邮寄
*   消息
*   笔记
*   ntp
*   一个笔记
*   外表
*   繁荣
*   电话
*   远程登录
*   怀斯
*   网络日历

我的问题是是否可以更改（添加到）此列表？

它是硬编码的还是可能存储在注册表中的某个地方？

我意识到可以通过 LPARAM 显式指定列表，但我正在寻找一种无需修改现有代码（为 LPARAM 传递 NULL）即可完成此任务的方法。

更具体地说，我试图找到一种方法来让 TortoiseSVN 的日志视图对话框识别不在此列表中的 URL 协议，而无需修改代码。以下是相关代码的链接：

[http://code.google.com/searchframe#XJa9F1p-bAg/trunk/src/TortoiseProc/LogDialog/LogDlg.cpp&q=EM_AUTOURLDETECT%20package:http://tortoisesvn%5C.googlecode%5C.com&ct=rc&cd=1&sq=](http://code.google.com/searchframe#XJa9F1p-bAg/trunk/src/TortoiseProc/LogDialog/LogDlg.cpp&q=EM_AUTOURLDETECT%20package:http://tortoisesvn%5C.googlecode%5C.com&ct=rc&cd=1&sq=)

这可能更像是一个超级用户的问题，但由于它与 EM_AUTOURLDETECT 的工作方式有关，我希望这里有人可能知道答案。

有谁知道 Rich Edit 控件的源代码是否在任何地方都可用？

# c# - 当对象实现隐式运算符时，可以测试对 PropertyInfo.PropertyType 的强制转换吗？

> ID：10042720
> 
> 赞同：0
> 
> 时间：2012-04-06T11:18:36.790
> 
> 标签：c#, reflection, casting, operator-keyword, propertyinfo

我有一个特定类型 ( `SpecialImage`) 的对象，它实现了对另一种类型 ( ) 的*隐式运算符*`Image`。

`SpecialImage`不**衍生**自`Image`。但是，可以通过操作员进行以下操作：

```
var someImage = new Image();
(SpecialImage)someImage; 
```

我有一个带有属性的对象，我通过反射和一个`Image`对象循环遍历：

**`info.PropertyType`在尝试设置值之前是否可以检查对象是否可转换？**

```
var someImage = new Image();

foreach(PropertyInfo info in someOjbect.GetType().GetProperties()) {
    //info.PropertyType == typeof(SomeImage);

    //Is it possible to check if the object is castable to 
    //info.PropertyType before trying to set the value?
    info.SetValue(someObject, someImage, null);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T11:51:31.143

你可以试试这样的

如果我们有这些课程

```
class T1
{
}

class T2
{
    public static implicit operator T1(T2 item) { return new T1(); }
} 
```

我们可以使用

```
if(typeof(T2).GetMethods().Where (
    t => t.IsStatic && t.IsSpecialName && 
         t.ReturnType == typeof(T1) && t.Name=="op_Implicit").Any())
{
    // do stuff
} 
```

# iphone - 我可以用 CGPDF 解析 CGPDFArrayRef

> ID：10042723
> 
> 赞同：1
> 
> 时间：2012-04-06T11:18:46.903
> 
> 标签：iphone, objective-c, ios, ipad, iostream

请我有一个问题，我尝试解析我的 pdf 文件，我可以找到密钥和值，但是我想显示孩子们的价值的问题我能做什么？我只能显示桌子的数量

```
 case kCGPDFObjectTypeArray: {
            CGPDFArrayRef value  = NULL;

            CGPDFDictionaryRef contentDict = (CGPDFDictionaryRef)info;
            CGPDFDictionaryGetArray(contentDict, key, &value);
            NSLog(@"pdf array is %lu",CGPDFArrayGetCount(value));

             CGPDFArrayRef objectArray;
             if (CGPDFObjectGetValue(object, kCGPDFObjectTypeArray, &objectArray)) 
             {

             NSLog(@"pdf array value: %zu", CGPDFArrayGetCount(objectArray)); 

             }
        }

3 0 obj
<<
 /Type /Pages
 /Kids [4 0 R]
 /Count 1
>>
endobj 
```

# javascript - ResponseXML 返回 NULL

> ID：10042733
> 
> 赞同：1
> 
> 时间：2012-04-06T11:19:42.670
> 
> 标签：javascript, xml, html, dom

> **可能重复：**
> [responseXML 为空](https://stackoverflow.com/questions/6973202/responsexml-is-null)

我最近开始研究javascript。我正在尝试使用 XMLHttprequest 解析 RSS 提要。responseXML 没有返回任何数据，responseText 正在返回数据。我正在为 GET 方法传递一个 URL，必须从该 URL 形成 DOM。即使我尝试在本地传递一个放置 xml 文件代替 url，即使这样也不起作用。我对此表示怀疑跨域不兼容，但不确定。谁能给我一些线索。如果这是跨域请求的问题（就像我一样在 localhost 中运行我的代码并传递的 url 在另一个域上），那么如何测试此代码是否正常工作？也有人可以分享一些示例 JS 代码来解析 XML，并将 DOM 存储在 HTML5 的 LocalStorage 中。任何帮助都会很棒。

谢谢

# spring - @Service 中的 @Autowired ServletContext

> ID：10042734
> 
> 赞同：5
> 
> 时间：2012-04-06T11:20:05.310
> 
> 标签：spring, annotations

我正在实现一个读取 .properties 文件的 Properties bean。此类被注入到控制器中，因此它们可以获取属性。

```
@Service
public class PropertiesUtils {

    @Autowired
    private ServletContext context;

    private Properties properties;

    public PropertiesUtils() {
        this.properties = new Properties();
        try {
            **this.properties.load(new FileInputStream(this.context.getRealPath("/WEB-INF/context.properties")));**
        } catch (Exception ex) {
            ex.printStackTrace();
        }
    }

   ...
} 
```

* * *

但是，当我启动应用程序时，Apache 抛出异常：

```
java.lang.NullPointerException
    at com.destrozatumente.utils.PropertiesUtils.<init>(PropertiesUtils.java:29)
    at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
    at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:57)
    at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)
    at java.lang.reflect.Constructor.newInstance(Constructor.java:525)
    at org.springframework.beans.BeanUtils.instantiateClass(BeanUtils.java:126)
    at org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:74)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateBean(AbstractAutowireCapableBeanFactory.java:958)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:911)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:485)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:456)
    at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:293)
    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:222)
    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:290)
    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:192)
    at org.springframework.beans.factory.support.DefaultListableBeanFactory.findAutowireCandidates(DefaultListableBeanFactory.java:848)
    at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:790)
    at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:707)
    at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.inject(AutowiredAnnotationBeanPostProcessor.java:480)
    at org.springframework.beans.factory.annotation.InjectionMetadata.inject(InjectionMetadata.java:84)
    at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.postProcessPropertyValues(AutowiredAnnotationBeanPostProcessor.java:285)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1074)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:517)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:456)
    at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:293)
    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:222)
    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:290)
    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:192)
    at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1075)
    at org.springframework.web.servlet.handler.AbstractUrlHandlerMapping.registerHandler(AbstractUrlHandlerMapping.java:383)
    at org.springframework.web.servlet.handler.AbstractUrlHandlerMapping.registerHandler(AbstractUrlHandlerMapping.java:362)
    at org.springframework.web.servlet.handler.AbstractDetectingUrlHandlerMapping.detectHandlers(AbstractDetectingUrlHandlerMapping.java:82)
    at org.springframework.web.servlet.handler.AbstractDetectingUrlHandlerMapping.initApplicationContext(AbstractDetectingUrlHandlerMapping.java:58)
    at org.springframework.context.support.ApplicationObjectSupport.initApplicationContext(ApplicationObjectSupport.java:119)
    at org.springframework.web.context.support.WebApplicationObjectSupport.initApplicationContext(WebApplicationObjectSupport.java:72)
    at org.springframework.context.support.ApplicationObjectSupport.setApplicationContext(ApplicationObjectSupport.java:73)
    at org.springframework.context.support.ApplicationContextAwareProcessor.invokeAwareInterfaces(ApplicationContextAwareProcessor.java:109)
    at org.springframework.context.support.ApplicationContextAwareProcessor.postProcessBeforeInitialization(ApplicationContextAwareProcessor.java:88)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.applyBeanPostProcessorsBeforeInitialization(AbstractAutowireCapableBeanFactory.java:394)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1413)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:519)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:456)
    at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:293)
    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:222)
    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:290)
    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:192)
    at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:585)
    at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:895)
    at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:425)
    at org.springframework.web.servlet.FrameworkServlet.createWebApplicationContext(FrameworkServlet.java:467)
    at org.springframework.web.servlet.FrameworkServlet.createWebApplicationContext(FrameworkServlet.java:483)
    at org.springframework.web.servlet.FrameworkServlet.initWebApplicationContext(FrameworkServlet.java:358)
    at org.springframework.web.servlet.FrameworkServlet.initServletBean(FrameworkServlet.java:325)
    at org.springframework.web.servlet.HttpServletBean.init(HttpServletBean.java:127)
    at javax.servlet.GenericServlet.init(GenericServlet.java:160)
    at org.apache.catalina.core.StandardWrapper.initServlet(StandardWrapper.java:1228)
    at org.apache.catalina.core.StandardWrapper.loadServlet(StandardWrapper.java:1147)
    at org.apache.catalina.core.StandardWrapper.load(StandardWrapper.java:1043)
    at org.apache.catalina.core.StandardContext.loadOnStartup(StandardContext.java:4957)
    at org.apache.catalina.core.StandardContext$3.call(StandardContext.java:5284)
    at org.apache.catalina.core.StandardContext$3.call(StandardContext.java:5279)
    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:334)
    at java.util.concurrent.FutureTask.run(FutureTask.java:166)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
    at java.lang.Thread.run(Thread.java:722) 
```

为什么找不到 ServletContext.getRealPath()？，解决方案？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-06T13:05:11.357

可能会被抛出，因为您在构造函数内部`NullPointerException`引用。`this.context`必须在`@Autowired`设置任何 -properties 之前调用构造函数（因为它们是对象的成员，因此需要首先构造对象），因此`context`-property 在构造函数中为 null。也许试试这个：

```
@Service
public class PropertiesUtils {

    private ServletContext context;

    private Properties properties;

    @Autowired 
    public PropertiesUtils(ServletContext context) {
        this.context = context;
        this.properties = new Properties();
        try {
            **this.properties.load(new FileInputStream(this.context.getRealPath("/WEB-INF/context.properties")));**
        } catch (Exception ex) {
            ex.printStackTrace();
        }
    }

   ...
} 
```

# php - 类在没有声明变量的情况下工作？

> ID：10042736
> 
> 赞同：3
> 
> 时间：2012-04-06T11:20:07.257
> 
> 标签：php, oop

我将 php 作为函数式和过程语言来学习。现在尝试开始学习目标导向并得到一个重要的问题。

我有代码：

```
class car {

    function set_car($model) {
        $this->model = $model;
    }

    function check_model()
    {
        if($this->model == "Mercedes") echo "Good car";
    }

}

$mycar = new car;
$mycar->set_car("Mercedes");

echo $mycar->check_model(); 
```

为什么它在没有声明 $model 的情况下工作？

`var $model;`一开始？

因为在 php 中为任何变量工作“自动声明”？我被困住了

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-06T11:25:44.540

PHP 中的每个对象都可以获取成员而无需声明它们：

```
$mycar = new car;
$mycar->model = "Mercedes";
echo $mycar->check_model(); # Good car 
```

这是 PHP 的默认行为。那些是公开的。见[手册](http://php.net/object)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-06T11:26:30.827

是的，如果它不存在，PHP 会即时为您声明它。

无论如何定义它更优雅，并且在使用扩展时建议使用它，因为如果您的扩展将使用相同的 varnames 并且不将其定义为私有、受保护或公共，您可能会遇到奇怪的情况。

更多信息： [http ://www.php.net/manual/en/language.oop5.visibility.php](http://www.php.net/manual/en/language.oop5.visibility.php)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-06T11:29:15.507

PHP 类成员可以随时创建。这样，它将被视为**公共**变量。要声明**私有变量**，您需要声明它。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-06T11:26:28.740

是的。但是这种方式变量将是公开的。并且不推荐使用声明类变量为“var” - 使用公共、受保护或私有。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-06T11:24:05.107

不，这是因为 $model 是函数 set_car 的参数。参数并不完全是变量，而是调用函数（或类方法）时将设置的变量或值的占位符（引用）。例如，$model 在调用 set_car 时取值“Mercedes”。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-02-04T21:35:40.693

我认为这种行为会导致错误。让我们考虑一下这个代码有一个印刷错误

```
declare(strict_types=1);

class A
{
    public float $sum;
    public function calcSum(float $a, float $b): float
    {
        $this->sum = $a;
        $this->sums = $a + $b; //misprinted sums instead of sum
        return $this->sum;
    }
}

echo (new A())->calcSum(1, 1); //prints 1 
```

即使我使用 PHP 7.4+ 类型提示等等，编译器和带有代码检查器的 IDE 都找不到这个错字。

# json - 使用 JSON 协议处理版本控制的最佳方法是什么？

> ID：10042742
> 
> 赞同：49
> 
> 时间：2012-04-06T11:20:40.627
> 
> 标签：json, serialization, binary, versioning

我通常在 C# 中编写代码的所有部分，并且在编写序列化协议时，我使用 FastSerializer 快速高效地序列化/反序列化类。它也很容易使用，并且相当直接地进行“版本控制”，即处理不同版本的序列化。我通常使用的东西是这样的：

```
public override void DeserializeOwnedData(SerializationReader reader, object context)
{
    base.DeserializeOwnedData(reader, context);
    byte serializeVersion = reader.ReadByte(); // used to keep what version we are using

    this.CustomerNumber = reader.ReadString();
    this.HomeAddress = reader.ReadString();
    this.ZipCode = reader.ReadString();
    this.HomeCity = reader.ReadString();
    if (serializeVersion > 0)
        this.HomeAddressObj = reader.ReadUInt32();
    if (serializeVersion > 1)
        this.County = reader.ReadString();
    if (serializeVersion > 2)
        this.Muni = reader.ReadString();
    if (serializeVersion > 3)
        this._AvailableCustomers = reader.ReadList<uint>();
} 
```

和

```
public override void SerializeOwnedData(SerializationWriter writer, object context)
{            
    base.SerializeOwnedData(writer, context);
    byte serializeVersion = 4; 
    writer.Write(serializeVersion);

    writer.Write(CustomerNumber);
    writer.Write(PopulationRegistryNumber);            
    writer.Write(HomeAddress);
    writer.Write(ZipCode);
    writer.Write(HomeCity);
    if (CustomerCards == null)
        CustomerCards = new List<uint>();            
    writer.Write(CustomerCards);
    writer.Write(HomeAddressObj);

    writer.Write(County);

    // v 2
    writer.Write(Muni);

    // v 4
    if (_AvailableCustomers == null)
        _AvailableCustomers = new List<uint>();
    writer.Write(_AvailableCustomers);
} 
```

所以很容易添加新东西，或者如果选择完全改变序列化。

但是，我现在想使用 JSON 的原因与这里无关 =) 我目前正在使用**DataContractJsonSerializer**，我现在正在寻找一种方法来获得与使用上面的 FastSerializer 相同的灵活性。

所以问题是；创建 JSON 协议/序列化并能够如上所述详细说明序列化的最佳方法是什么，这样我就不会因为另一台机器尚未更新其版本而中断序列化？

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2012-12-19T03:26:18.357

对 JSON 进行版本控制的关键是始终添加新属性，而不是删除或重命名现有属性。这类似于[协议缓冲区处理版本控制](https://stackoverflow.com/questions/8519381/how-does-protocol-buffer-handle-versioning)的方式。

例如，如果您从以下 JSON 开始：

```
{
  "version": "1.0",
  "foo": true
} 
```

并且您想将`"foo"`属性重命名为`"bar"`，而不仅仅是重命名它。相反，添加一个新属性：

```
{
  "version": "1.1",
  "foo": true,
  "bar": true
} 
```

由于您永远不会删除属性，因此基于旧版本的客户端将继续工作。这种方法的缺点是 JSON 会随着时间的推移而变得臃肿，并且您必须继续维护旧属性。

向您的客户清楚地定义您的“边缘”案例也很重要。假设您有一个名为 的数组属性`"fooList"`。该`"fooList"`属性可以采用以下可能的值：不存在/未定义（该属性实际上不存在于 JSON 对象中，或者它存在并设置为`"undefined"`）`null`、空列表或具有一个或多个值的列表。客户了解如何表现非常重要，尤其是在未定义/空/空的情况下。

我还建议阅读[语义版本控制](http://semver.org/)的工作原理。如果您在版本号中引入语义版本控制方案，则可以在次要版本边界上进行向后兼容的更改，而可以在主要版本边界上进行重大更改（客户端和服务器都必须就相同的主要版本达成一致）。虽然这不是 JSON 本身的属性，但它对于传达版本更改时客户端应该期望的更改类型很有用。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2012-04-06T11:34:17.410

Google 的基于 java 的[gson 库](https://sites.google.com/site/gson/gson-user-guide#TOC-Versioning-Support)对 json 具有出色的版本控制支持。如果您正在考虑采用 Java 方式，它可能会非常方便。

[这里](http://bethecoder.com/applications/tutorials/json/google-gson/versioning.html)有很好的简单教程。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-12-19T12:23:55.263

不管你使用什么序列化协议，版本 API 的技术通常是相同的。

一般你需要：

1.  消费者向生产者传达它接受的 API 版本的一种方式（尽管这并不总是可能的）
2.  生产者将版本控制信息嵌入到序列化数据中的一种方式
3.  处理未知字段的向后兼容策略

在 Web API 中，消费者接受的 API 版本通常嵌入在 Accept 标头中（例如`Accept: application/vnd.myapp-v1+json application/vnd.myapp-v2+json`，意味着消费者可以处理您的 API 的版本 1 和版本 2）或不太常见的 URL（例如`https://api.twitter.com/1/statuses/user_timeline.json`）。这通常用于主要版本（即向后不兼容的更改）。如果服务器和客户端没有匹配的 Accept 标头，则通信失败（或在尽力而为的基础上继续进行或回退到默认基线协议，具体取决于应用程序的性质）。

然后，生产者在请求的版本之一中生成序列化数据，然后将此版本信息嵌入到序列化数据中（例如，作为名为 的字段`version`）。消费者应使用数据中嵌入的版本信息来确定如何解析序列化数据。数据中的版本信息还应包含次要版本（即用于向后兼容的更改），通常消费者应该能够忽略次要版本信息并仍然正确处理数据，尽管了解次要版本可能允许客户端对应该如何处理数据。

处理未知字段的常用策略是如何解析 HTML 和 CSS。当消费者看到未知字段时，他们应该忽略它，并且当数据缺少客户端期望的字段时，它应该使用默认值；根据通信的性质，您可能还需要指定一些必填字段（即缺少字段被视为致命错误）。在次要版本中添加的字段应始终是可选字段；次要版本可以添加可选字段或更改字段语义，只要它向后兼容即可，而主要版本可以删除字段或添加必填字段或以向后不兼容的方式更改字段语义。

在可扩展的序列化格式（如 JSON 或 XML）中，数据应该是自描述的，换句话说，字段名称应该始终与数据一起存储；您不应依赖特定职位上可用的特定数据。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2012-12-18T08:15:49.190

不要使用 DataContractJsonSerializer，顾名思义，通过这个类处理的对象必须：

a) 标有 [DataContract] 和 [DataMember] 属性。

b) 严格遵守已定义的“合同”，即其所定义的不多也不少。任何额外或缺失的 [DataMember] 都会使反序列化抛出异常。

如果您想足够灵活，那么如果您想选择便宜的选项，请使用 JavaScriptSerializer ......或者使用这个库：

[http://json.codeplex.com/](http://json.codeplex.com/)

这将使您对 JSON 序列化有足够的控制。

想象一下，你有一个早期的物体。

```
public class Customer
{ 
    public string Name;

    public string LastName;
} 
```

序列化后将如下所示：

{名称：“约翰”，姓氏：“Doe”}

如果您更改对象定义以添加/删除字段。如果您使用例如 JavaScriptSerializer，反序列化将顺利进行。

```
public class Customer
{ 
    public string Name;

    public string LastName;

    public int Age;
} 
```

如果您尝试将最后一个 json 反序列化为这个新类，则不会引发错误。问题是您的新字段将设置为默认值。在此示例中：“年龄”将设置为零。

您可以在自己的约定中包含所有对象中存在的字段，该字段包含版本号。在这种情况下，您可以区分空字段或版本不一致。

所以让我们说：你有你的类 Customer v1 序列化：

```
{ Version: 1, LastName: "Doe", Name: "John" } 
```

您想反序列化为 Customer v2 实例，您将拥有：

```
{ Version: 1, LastName: "Doe", Name: "John", Age: 0} 
```

您可以以某种方式检测对象中的哪些字段以某种方式可靠，哪些不可靠。在这种情况下，您知道您的 v2 对象实例来自 v1 对象实例，因此不应信任字段 Age。

我记得您还应该使用自定义属性，例如“MinVersion”，并用支持的最低版本号标记每个字段，因此您会得到如下内容：

```
public class Customer
{ 
    [MinVersion(1)]
    public int Version;

    [MinVersion(1)]
    public string Name;

    [MinVersion(1)]
    public string LastName;

    [MinVersion(2)]
    public int Age;
} 
```

然后稍后您可以访问此元数据并使用它做任何您可能需要的事情。

# arrays - php多维数组作为名称值对

> ID：10042743
> 
> 赞同：0
> 
> 时间：2012-04-06T11:20:42.297
> 
> 标签：arrays, multidimensional-array, paypal-nvp

对于电子商务，预期的名称值对我有以下批准的代码：

功能 create_example_purchase() {

```
set_credentials();
$purchase = array(
    'name'        => 'Digital Good Purchase Example',
    'description' => 'Example Digital Good Purchase',
    'amount'      => '12.00', // sum of all item_amount
    'items'       => array(
        array( // First item
            'item_name'        => 'First item name',
            'item_description' => 'a description of the 1st item',
            'item_amount'      => '6.00',
            'item_tax'         => '0.00',
            'item_quantity'    => 1,
            'item_number'      => 'XF100',
        ),
        array( // Second item
            'item_name'        => 'Second Item',
            'item_description' => 'a description of the 2nd item',
            'item_amount'      => '3.00',
            'item_tax'         => '0.00',
            'item_quantity'    => 2,
            'item_number'      => 'XJ100',
        ),
    )
);

return new Purchase( $purchase); 
```

}

我想从运输车中动态获取关联 $purchase 数组中的 $items 数组。

有没有办法在上面生成完全相同的输出？

我的肮脏解决方案是将 $purchase 数组编写为字符串，将生成的 $items 数组包含在文件中，然后将其包含在被调用的脚本中。

帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-06T11:26:07.663

```
$itemsArray = function_that_returns_your_2d_item_array();

$purchase['items'] = $itemsArray; 
```

或者如果`function_that_returns_your_2d_item_array()`返回一个由“items”索引的二维数组，你可以这样做：

```
$purchase = array_merge($purchase, $itemsArray); 
```

# c++ - Lua、元表和全局变量

> ID：10042744
> 
> 赞同：4
> 
> 时间：2012-04-06T11:20:44.507
> 
> 标签：c++, lua

我正在努力改进我们在[Bitfighter](http://bitfighter.org)中为机器人玩家处理 Lua 脚本的方式。目前，每个机器人都有自己的 L 实例，我们正试图通过交换环境表让它们共享一个。请注意，机器人可能是完全不同的脚本。

我意识到这种方法在 Lua 5.2 中已被弃用，但我们目前使用的是 lua-vec，它仍然使用 Lua 5.1。游戏是用 C++ 编写的。

所以...

首先我们创建一个环境，并将其命名为：

```
// Create a table with room for 0 array and 1 non-array elements
lua_createtable(L, 0, 1);                 // -- tab

// Set the globals table to handle any requests that the 
// script's environment can't
lua_pushstring(L, "__index");             // -- tab, "__index"
lua_pushvalue(L, LUA_GLOBALSINDEX);       // -- tab, "__index", _G

// Set table["__index"] = _G, pops top two items from stack
lua_settable(L, -3);                      // -- tab

// Store the new table in the retistry for future use
lua_setfield(L, LUA_REGISTRYINDEX, name); // -- <<empty stack>> 
```

稍后，我们加载一些 Lua 代码，并调用环境表：

```
luaL_loadfile(L, "luascripts.lua");

lua_getfield(L, LUA_REGISTRYINDEX, name); // -- function, table 
lua_setfenv(L, -2);                       // -- function 
```

然后运行加载的代码：

```
lua_pcall(L, 0, 0, 0); 
```

当加载的 Lua 尝试使用基本功能时，例如 print，它会失败并出现错误：

```
attempt to call global 'print' (a nil value) 
```

但是，该脚本*可以*执行以下操作：

```
__index["print"](12) 
```

那么......为什么我们不能直接访问打印？我们缺少什么？或者有没有更好的方法在同一个 Lua 实例中运行多个脚本？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-06T14:21:36.563

您的代码接近正确，但包含几个问题 - 您正在尝试做一些不起作用的事情，并且您的尝试以错误的方式做了错误的事情..

您正在将函数的函数环境设置为如下所示的表：

```
{__index = _G} 
```

自然，当您尝试访问时`print`，在此表中找不到它。

从您的评论中，我推断实际上是想设置环境表`__index`的*元表字段。*也就是说，您想让环境表如下`t`例所示：

```
t = {}
setmetatable(t, {__index = _G}) 
```

（这个的 C++ 翻译相当简单）。

不要这样做。它将解决您眼前的问题，但它不会提供足够的沙盒。例如，考虑这样的脚本：

```
table.sort = 10 
```

`"table"`将由`_G`元表事件处理程序找到。`sort`只是`table`表格的一个元素，因此可以用有罪不罚代替。现在，其他脚本将无法使用`table.sort`.

* * *

执行这种分离的一种方法是通过某种（可能是递归的）用户数据和相关元表事件的手写处理程序来调解对所有全局值的访问。（这种方式可能具有最大的性能和控制潜力，但可能难以实施）。

另一种方法是为每个脚本创建一个环境表，并将全局表中的安全/沙盒元素复制到该环境表中（这样每个脚本都具有全局表中所有可变元素的完全独立版本）。

*很抱歉，我没有时间正确解释我为您的问题提出的解决方案。我希望我给了你一个开始的地方。随时回来编辑它以包含您最终使用的解决方案。*

# javascript - 从头开始创建 JQuery UI 小部件

> ID：10042745
> 
> 赞同：1
> 
> 时间：2012-04-06T11:20:44.623
> 
> 标签：javascript, jquery-ui

目前 JQuery UI 小部件工厂[http://wiki.jqueryui.com/w/page/12138135/Widget%20factory](http://wiki.jqueryui.com/w/page/12138135/Widget%20factory)提供了构建自定义小部件的所有信息但是我想知道在哪里可以找到如何从头开始创建小部件直到绘制必要时小部件。这让我想到了一个问题，各种 JQuery UI 小部件是否也是从头开始构建的，我们用来附加它们的各种 html 标签是否仅用于功能目的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T06:13:50.250

jQuery UI 小部件通常在具有小部件基本需求的现有 DOM 元素上调用，这取决于小部件是什么，甚至可以是一个空元素，比如一个空 DIV。

小部件经常以它为基础，并创建许多子元素来正确呈现自己。除非您调用`destroy`小部件，否则它们将保留在那里，您甚至可以随时覆盖它们的样式等。

一个完美的例子是滑块小部件。您可以将所有参数传递给小部件并在空 DIV 左右调用它，它确实创建了所有必需的子元素，如句柄和其他部分，并且 jQuery UI 的 CSS 框架已经为这些创建的元素提供了样式（基于在小部件创建它们时添加到它们的 CSS 类上）。

因此，在官方[滑块示例页面](http://jqueryui.com/demos/slider/)中，这是：

```
<style>
    #demo-frame > div.demo { padding: 10px !important; }
    </style>
    <script>
    $(function() {
        $( "#slider" ).slider();
    });
    </script>

<div class="demo">

<div id="slider"></div>

</div> 
```

生成：

```
<div class="demo">

<div id="slider" class="ui-slider ui-slider-horizontal ui-widget ui-widget-content ui-corner-all"><a class="ui-slider-handle ui-state-default ui-corner-all" href="#" style="left: 0%; "></a></div>

</div> 
```

# iphone - 如何添加新的设备开发人员门户并将其添加到现有的临时分发中以进行测试

> ID：10042746
> 
> 赞同：0
> 
> 时间：2012-04-06T11:20:51.233
> 
> 标签：iphone, xcode

我有一个临时发行版，其中添加了 iPhone 设备，可以很好地进行测试，但我想添加另一个 iPad 设备并在其上运行代码，所以我可以这样做。我已在临时门户上添加了我的设备，但如何使用它进行测试

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T12:07:49.063

因此，即使您说您添加了 iPad，我仍将在此处重复该步骤以保持完整性。

您需要做的是登录您的 Apple Developer 帐户，然后转到[Provisioning Portal](https://developer.apple.com/ios/manage/overview/index.action)，该门户应该可以在页面右侧访问。

到达此处后，单击左侧导航中的“设备”以显示“设备”部分。正如您所说，您已经在此处添加了 iPad。您可以上传列出许多设备的文件，或手动添加。

现在您需要更新您的 Ad Hoc Distribution Provisioning Profile。单击左侧导航中的“配置”，然后单击“分发”选项卡。您应该会在此处看到您的 Ad Hoc 分发配置文件。对于 Ad Hoc 配置文件，单击“编辑”按钮，然后在出现的弹出窗口中单击“修改”。这将显示添加到您的开发者帐户的所有设备的列表。勾选新 iPad 设备旁边的复选框，然后单击保存。这将带您回到供应门户。刷新页面，“下载”按钮应出现在 Ad Hoc Profile 旁边。下载配置文件，并将其拖到 Xcode 中的管理器中。您可能需要先从管理器中删除旧的个人资料，然后再添加更新的个人资料，然后在您的“

# asp.net-mvc-3 - MVC3 无法使用外键显示其他表值

> ID：10042749
> 
> 赞同：1
> 
> 时间：2012-04-06T11:21:03.143
> 
> 标签：asp.net-mvc-3, linq

我正在尝试使用两个外键在实体中显示两个值。

我有三张桌子；表之一是产品表。

两个表是用于显示这些值“名称”和“模型名称”的类别和模型。

当我使用 LINQ 时，我在添加模型实体之前使用了这种编码。

```
var product = from a in db.Product.Include(a => a.Category)
                      select a; 
```

如何在此处添加模型实体？

如

```
var product = from a in db.Product.Include(a => a.Category, a => a.Model)
                      select a; 
```

可以写吗？

这是我的模型。

```
--Prodruct.cs--

public class Product
{
    [Key] public int productId { get; set; }

    [Required(ErrorMessage = "Please select category")]
    public int categoryId { get; set; }

    [Required(ErrorMessage = "Please select model")]
    public int modelId { get; set; }

    [DisplayName("Model name")]
    public String model { get; set; }

    public virtual Category Category { get; set; }
    public virtual Model Model { get; set; }
}

--Category.cs--
public class Category
{
    [Key] public int categoryId { get; set; }
    public String name { get; set; }
}

--Model.cs--
public class Model
{
    [Key] public int modelId { get; set; }
    public String name { get; set; }
}

--RentalDB.cs--
public class rentalDB : DbContext
{
    public DbSet<Product> Product { get; set; }
    public DbSet<Model> Model { get; set; }
    public DbSet<Customer> Customer { get; set; }
    public DbSet<Order> Order { get; set; }
    public DbSet<Cart> Cart { get; set; }
    public DbSet<Category> Category { get; set; }
    public DbSet<OrderDetails> OrderDetails { get; set; }

    protected override void OnModelCreating(DbModelBuilder modelBuilder)
    {
        modelBuilder.Conventions.Remove<PluralizingTableNameConvention>();
    }
} 
```

请让我知道如何在 LINQ 中放置内部连接（？）。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T11:54:00.133

我认为您可能需要以下内容，因为 Include 返回 IQueryable：

```
var product = from a in db.Product.Include(a => a.Category).Include(a => a.Model)
                  select a; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-06T13:10:46.427

这是您在 ProductController.cs 中需要的吗？...

```
 public ViewResult index(int param_categoryId, int param_modelId)
    {
        List<Product> locvar_CollectionOfProduct
            = getCollectionOfProduct(param_categoryId, param_modelId);

        return View("index", locvar_CollectionOfProduct);
    }

    private List<Product> getCollectionOfProduct(int param_categoryId, int param_modelId)
    { 
        return db.Product.Where(a => a.categoryId == param_categoryId && a.modelId == param_modelId).ToList();
    }

    public void Product_Save(List<Product> param_CollectionOfProduct)
    {
        if (Model.IsValid)
        {
            foreach (Product i_Product in param_CollectionOfProduct)
            {
                Product locvar_Product = null;

                if (i_Product.productId == null || i_Product.productId == 0)
                {
                    locvar_Product = new Product();
                }
                else
                {
                    locvar_Product = new Product{productId = i_Product.productId};
                    db.Product.Attach(locvar_Product)
                }

                locvar_Product.categoryId = i_Product.categoryId;
                locvar_Product.modelId = i_Product.modelId;

                if (i_Product.productId == null || i_Product.productId == 0)
                {
                    db.Product.Add(locvar_Product);
                }
            }

            db.SaveChanges();
        }
    } 
```

然后在您的“Views\Product\index.cshtml”视图中，您可以遍历这些。我会为你把它们放在一张桌子上：

```
 @using insert_entity_reference_here.Models;
    @model List<Product>

    @{
        List<Product> param_CollectionOfProduct = Model;
    }

    @using (Ajax.BeginForm("Product_Save", "Product", null, new AjaxOptions { HttpMethod = "POST" }))
    {

    <table style="width:100%">

        <tr>
            <th>
                Category Name
            </th>
            <th>
                Model Name
            </th>
        </tr>

        @if(Model.Count() > 0)
        {

            for( i_Product = 0 ; i_Product < Model.Count() ; i_Product++ )
            {

                @Html.HiddenFor(modelItem => param_CollectionOfProduct[i_Product].productId)

                <tr>
                    <td>
                        @Html.HiddenFor(modelItem => param_CollectionOfProduct[i_Product].Category.categoryId)
                        @Html.EditorFor(modelItem => param_CollectionOfProduct[i_Product].Category.Name, new { style="width:100%" })
                        @Html.ValidationMessageFor(modelItem => param_CollectionOfProduct[i_Product].Category.Name)
                    </td>
                    <td>
                        @Html.HiddenFor(modelItem => param_CollectionOfProduct[i_Product].Model.modelId)
                        @Html.EditorFor(modelItem => param_CollectionOfProduct[i_Product].Model.Name, new { style="width:100%" })
                        @Html.ValidationMessageFor(modelItem => param_CollectionOfProduct[i_Product].Model.Name)
                    </td>
                </tr>
            }
        }

    </table>

    <input type="submit">Save</input>

    } 
```

让我知道我是否走在正确的轨道上。如果是这样，我应该可以为您提供更多帮助。

最好的问候，尼克

# ruby-on-rails - 在引擎中使用观察者

> ID：10042758
> 
> 赞同：1
> 
> 时间：2012-04-06T11:21:54.183
> 
> 标签：ruby-on-rails, observer-pattern, rails-engines

我创建了一个基本上用于我们所有项目的引擎。

现在我要做的是为`before_create`这个引擎中的所有模型添加一个回调。

经过一番搜索，我发现观察者是要走的路。

所以，我创建了这个观察者：

```
# app/models/baco/auth/auth_observer

class Baco::Auth::AuthObserver < ActiveRecord::Observer

  def before_create( record )
    p record
  end

end 
```

现在我需要将它添加到应用程序中，但是在我的引擎中当然没有 application.rb 这样的文件，所以我将它放在我的引擎中：

```
# lib/baco/auth/engine.rb

require 'rails'
require 'devise'

module Baco
  module Auth
    class Engine < Rails::Engine

      engine_name 'baco_auth'
      config.active_record.observers = :auth_observer

    end
  end
end 
```

但是在启动服务器时出现以下错误：

```
.../.rvm/gems/ruby-1.9.3-p125/gems/activesupport-3.2.1/lib/active_support/inflector/methods.rb:229:in `block in constantize': uninitialized constant AuthObserver (NameError) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-06T11:25:30.643

在引擎中，而不是`application.rb`你应该使用`lib/[engine_name]/engine.rb`

此外，如果您在引擎中创建观察者，则需要为其命名。

# asp.net - 创建一个继承自文本框并可以在单击时显示日历的类

> ID：10042763
> 
> 赞同：0
> 
> 时间：2012-04-06T11:22:18.800
> 
> 标签：asp.net, inheritance, textbox, calendar

我正在尝试构建一个在您单击文本框（在 asp.net 中）时弹出的日历；对于这个任务，我构建了一个从文本框继承的新类，并在新类构造函数中放置了日历实例，但问题是，当我创建新类时，我只得到文本框控件，点击时我没有得到日历。有没有人有想法或者我该如何解决这个问题？我的代码是：

```
public class TextBoxCalendar : TextBox
{
public TextBoxCalendar( int id)
{
      this.ID = id.toString();
      initCalender();        
}

    private void initCalender()
    {        
        CalendarExtender ce = new CalendarExtender();
        ce.ID = "calender";
        ce.TargetControlID = this.ID;                                        
    } 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-06T12:31:03.903

您必须重写 TextBox 的 OnInit 方法并在其中编写 initCalender 代码。

```
 protected override void OnInit(EventArgs e) {
    CalendarExtender ce = new CalendarExtender();
    ce.ID = "calender";
    ce.TargetControlID = this.ID;     
 } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-06T14:04:22.147

除了初始化控件之外，您还需要在渲染过程中的某个时间点将其添加到控件集合中：

```
protected override void Render(HtmlTextWriter writer)
{
    CalendarExtender ce = new CalendarExtender();
    ce.ID = "calender";
    ce.TargetControlID = this.ID;  
    Controls.Add(ce);

    //render the contents to the screen
    RenderContents(writer);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-06T16:23:52.240

您可以使用[Jquery Datepicker](http://jqueryui.com/demos/datepicker/#default)。

# c# - 如何在 C# 中向 PSObject 添加成员？

> ID：10042764
> 
> 赞同：3
> 
> 时间：2012-04-06T11:22:51.060
> 
> 标签：c#, .net, powershell, mocking, moles

我正在使用 Microsoft Moles 来模拟一种方法。

此方法调用另一个调用 PowerShell 脚本并返回的方法

> 收藏`<PSObject>`

所以我想模拟它以返回一个自定义的 PSObject。它将有两个属性，ID 和 Name。

但是当我尝试使用

```
PSObject obj = new PSObject();
obj.Members.Add(new PSMemberInfo( 
```

我发现构造函数受到保护。

如何添加属性？

谢谢你。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-06T11:34:48.547

`PSMemberInfo`是一个抽象类，所以不能直接做一个实例，而是选择它的子类

在页面中：http: [//msdn.microsoft.com/en-us/library/system.management.automation.pspropertyinfo](http://msdn.microsoft.com/en-us/library/system.management.automation.pspropertyinfo(v=vs.85).aspx) (v=vs.85).aspx您可以在下面找到：

```
System.Object 
   System.Management.Automation.PSMemberInfo
    System.Management.Automation.PSPropertyInfo
       System.Management.Automation.PSAliasProperty
       System.Management.Automation.PSCodeProperty
       System.Management.Automation.PSNoteProperty
       System.Management.Automation.PSProperty
       System.Management.Automation.PSScriptProperty 
```

选择你的类，并初始化它。

# java - JPA - 来自休眠的 LobCreator 的模拟？

> ID：10042766
> 
> 赞同：7
> 
> 时间：2012-04-06T11:22:52.217
> 
> 标签：java, hibernate, jakarta-ee, jpa

在纯休眠中我可以做到：

```
Blob blob= Hibernate.getLobCreator(sessionFactory.getCurrentSession()).createBlob(inputStream, len); 
```

如何在 jpa 中执行此操作（使用休眠作为提供者）？

在纯休眠中，我为blob创建了用户类型，它使用了`setBinaryStream`准备好的语句。这个解决方案非常适合我，我正在寻找一种将它移植到 JPA 的方法。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-06T15:11:50.583

您可以`@Lob`在持久属性 ( [Annotation Lob](http://www.objectdb.com/api/java/jpa/Lob) ) 上使用注释：

```
@Entity
public class MyEntity {

private byte[] content;
...

@Lob
public byte[] getContent() {
return content;
}

public void setContent(byte[] newContent) {
this.content = newContent;
}
} 
```

在您的代码中，您可以使用如下代码转换 byte[] 中的流：

```
@Transient
public void setContentFromInputStream(InputStream is) throws IOException 
{
    ByteArrayOutputStream baos = new ByteArrayOutputStream();

    byte[] buff = new byte[1024];
    int l = 0;
    do {
        l = is.read(buff);
        if (l > 0)
        {
            baos.write(buff, 0, l);
        }
    } while (l > 0);

    is.close();
    baos.flush();
    baos.close();

    content = baos.toByteArray();
} 
```

`@Lob`注释也可以与 String 一起使用，在这种情况下，您将在 DB 上获得一个CLOB

你必须注意`byte[]`避免的大小`OutOfMemoryError`。

要仅使用流，您必须依赖特定的 jdbc 供应商实现。例如，如果您使用的是 Hibernate >= 3.6，您可以将 MyEntity.content 的类型更改为 Blob 并编写：

```
MyEntity entity = new MyEntity();
Session session = (Session)entityManager.getDelegate(); 
Blob newContent = session.getLobHelper().createBlob(inputStream, len); 
entity.setContent(newContent); 
```

我希望这可以帮助你

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T18:35:57.667

If what you want is to save any serialized object into a column, set the column type in the database as blob, use the SerializationHelper class provided by Hibernate, and put this code in yout bean class.

```
class MyBean{

    @Column
    private byte[] object;

    @Transient
    public Object getObjectDeserialized() throws IOException, ClassNotFoundException {
        if(this.object == null)
            return new String(); // or another type
        return SerializationHelper.deserialize(this.object);
    }

    byte[] getObject() {
        return this.object;
    }

    void setObject(byte[] object) {
        this.object = object;
    }

    @Transient
    public void setObject(Object obj) throws IOException {
        if(obj != null)
            this.object = SerializationHelper.serialize((Serializable) obj);
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-14T13:35:59.863

xxxx也许你可以转移你想做的事。

类 XXXBean{

```
@Column
private byte[] object;

@Transient
public Object getObjectDeserialized() throws IOException, ClassNotFoundException {
    if(this.object == null)
        return new String(); // or another type
    return SerializationHelper.deserialize(this.object);
}

byte[] getObject() {
    return this.object;
}

void setObject(byte[] object) {
    this.object = object;
}

@Transient
public void setObject(Object obj) throws IOException {
    if(obj != null)
        this.object = SerializationHelper.serialize((Serializable) obj);
} 
```

}

# c++ - 绑定 C++ 成员变量：getter/setter 还是原始指针？

> ID：10042767
> 
> 赞同：1
> 
> 时间：2012-04-06T11:23:08.940
> 
> 标签：c++, binding

我目前正在尝试设计一个属性系统，将几个类的成员变量绑定到序列化程序，并且我想为每个绑定编写尽可能少的代码，但要灵活。

我认为 getter/setter 在大多数情况下并不是真正需要的，所以它们只会在它们实际触发某些东西时使用。这些类将提供变量名称列表，以及指向变量的指针，或者指向 getter/setter 的指针。

我的问题是：

*   通过指针绑定实际上是危险的，甚至是道德的吗？
*   这些类可以在不知道它们的实际实例的情况下给出这些指针吗？（即为每个类的所有实例获取一次绑定信息，并将其存储在某处）。AFAIK，Boost::bind 不允许这样做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T12:02:07.220

您应该考虑使用 boost::property_map

[http://www.boost.org/doc/libs/1_49_0/libs/property_map/doc/property_map.html](http://www.boost.org/doc/libs/1_49_0/libs/property_map/doc/property_map.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-06T12:03:54.030

危险的是，不道德的。您可以使这些类成为序列化程序的朋友，并为凡人隐藏绑定的东西以提高安全性，然后您就有一组相关的类，它们在道德上被允许了解彼此的内部结构。

该类绝对可以返回绑定信息，例如作为字节偏移量。如果该类拥有该类的“原型”对象（即其自身类型的静态成员），这可能是最简单的。然后通过将原型字段的地址作为 a`const char *`并从原型的地址中减去也作为 a`const char *`得到该字段的字节偏移量。

当然，您需要确保您知道该字段是什么类型，这样您才能正确操作给定字节偏移量的数据（例如，转换回正确的指针类型）。

然而，实现这样的东西有很多陷阱，主要围绕确保在序列化时具有正确的指针类型，而不是指向对象中某个子对象的指针。

# php - 我想使用 phpmyadmin 从数据库中导出单个表

> ID：10042771
> 
> 赞同：2
> 
> 时间：2012-04-06T11:23:25.510
> 
> 标签：php, mysql

我只有使用此脚本的 ftp 凭据

```
$r="mysqldump $dbuser $dbpass $dbname wp_posts > table1.sql";

system($r); 
```

但不幸的是，我在 table1.sql 中得到了一个空白结果

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-06T11:26:42.017

您需要在命令中添加选项开关，请参阅[mysqldump 手册](http://dev.mysql.com/doc/refman/5.1/en/mysqldump.html)，如下所示

```
$r="mysqldump -u $dbuser -p $dbpass $dbname wp_posts > table1.sql"; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-09T07:49:49.667

最后我得到了解决方案，这是我的代码：

```
<?php
$username = "abc";
$password = "xyz";
$hostname = "domain.com";
$database = "test_db";
$username =escapeshellcmd($username);
$password =escapeshellcmd($password);
$hostname =escapeshellcmd($hostname);
$database =escapeshellcmd($database);
$backupFile='url'.date("Y-m-d-H-i-s").$database.'.sql.tgz';

 $command = "mysqldump -u$username -p$password -h$hostname $database wp_posts > $backupFile";
system($command, $result);
echo $result;
?> 
```

感谢您的支持，非常感谢。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-06T11:26:09.423

如果用户有权限试试这个：

```
mysqldump -u$dbuser -p$dbpass $dbname wp_posts > table1.sql 
```

指定参数（哪个是用户，哪个是密码）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-06T11:27:14.670

我想这是

```
mysqldump -u $dbuser -p $dbpass $dbname wp_posts 
```

Apache 用户需要有权限写入 table1.sql 并执行 mysqldump 命令。如果在共享主机上，这是值得怀疑的。

# java - 如何在 Spring 中获取带有事务的对象？

> ID：10042779
> 
> 赞同：1
> 
> 时间：2012-04-06T11:24:32.183
> 
> 标签：java, spring

我有一个这样的服务类：

```
@Service
public class CompanyServiceImpl implements CompanyService {

    @Autowired
    private CompanyDAO companyDAO;

    @Transactional
    public void addOrUpdateCompany(Company company) {
        companyDAO.addOrUpdateCompany(company);
    }

} 
```

通常，我可以通过以下方式从 Spring 获得 CompanyService 的实例：

```
@Autowired
CompanyService companyService; 
```

但是，在某些情况下，我想在没有 @Autowired 的情况下创建/获取 CompanyService 的安装，如下所示：

```
CompanyService companyService  = XXX.getxxx("CompanyService"); 
```

有什么方法可以做到这一点吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-06T11:33:20.463

如果我理解正确，您的意思是像 - [**ServiceLocatorFactoryBean**](http://static.springsource.org/spring/docs/2.5.x/api/org/springframework/beans/factory/config/ServiceLocatorFactoryBean.html) 这样的东西，您可以调用类似`MyService getService(String id))`.

另一种方法是实现某种控制器服务，它将所有其他服务自动连接到它，并将保存从它们的字符串 id 到实际实例的映射。

在我看来，第二种选择更好，因为它更易于管理和清晰。

希望对您有所帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-06T11:55:50.127

另一种方式是

```
 @Component
public class ContextHolder implements ApplicationContextAware {
    private static ApplicationContext CONTEXT;

    public void setApplicationContext(ApplicationContext applicationContext) {
        CONTEXT = applicationContext;
    }

    public static ApplicationContext getContext() {
        return CONTEXT;
    }
} 

```

进而

```
CompanyService service = ContextHolder.getContext().getBean(CompanyService.class); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-06T11:35:08.107

你能行的。您需要实例化应用程序上下文，然后继续。

```
Resource res = new FileSystemResource("beans.xml");
XmlBeanFactory factory = new XmlBeanFactory(res); 
```

或者

```
ClassPathResource res = new ClassPathResource("beans.xml");
XmlBeanFactory factory = new XmlBeanFactory(res); 
```

或者

```
ClassPathXmlApplicationContext appContext = new ClassPathXmlApplicationContext(
    new String[] {"applicationContext.xml", "applicationContext-part2.xml"});
// of course, an ApplicationContext is just a BeanFactory
BeanFactory factory = (BeanFactory) appContext; 
```

并使用：

```
MyObject my = (MyObject)factory.getBean(NAME_OF_YOUR_BEAN); 
```

# android - 如何使 android 2.2 应用程序在 android 4 中运行？

> ID：10042784
> 
> 赞同：0
> 
> 时间：2012-04-06T11:24:55.560
> 
> 标签：android, android-4.0-ice-cream-sandwich

如何使 android 2.2 应用程序在 android 4 中运行？这是一项伟大的重构工作吗？还是只是在项目中更改一些 sdk 设置？

顺便说一句：哪种情况更好：-适用于 android 4 的适用于 android 2.2 的应用程序？- 带有来自 google 的兼容性包的 android 4 应用程序？

提前致谢？

编辑：我问这个是因为我的应用程序在 android 2.2 和 2.3 中运行良好，但在 android 4 中崩溃。

堆栈跟踪 ：

```
E/AndroidRuntime(  660): FATAL EXCEPTION: main
E/AndroidRuntime(  660): java.lang.RuntimeException: Unable to start activity ComponentInfo{vex.android/vex.android.controllers.ControllerLoginView}: java.lang.NullPointerException
E/AndroidRuntime(  660):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1956)
E/AndroidRuntime(  660):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1981)
E/AndroidRuntime(  660):    at android.app.ActivityThread.access$600(ActivityThread.java:123)
E/AndroidRuntime(  660):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1147)
E/AndroidRuntime(  660):    at android.os.Handler.dispatchMessage(Handler.java:99)
E/AndroidRuntime(  660):    at android.os.Looper.loop(Looper.java:137)
E/AndroidRuntime(  660):    at android.app.ActivityThread.main(ActivityThread.java:4424)
E/AndroidRuntime(  660):    at java.lang.reflect.Method.invokeNative(Native Method)
E/AndroidRuntime(  660):    at java.lang.reflect.Method.invoke(Method.java:511)
E/AndroidRuntime(  660):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
E/AndroidRuntime(  660):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
E/AndroidRuntime(  660):    at dalvik.system.NativeStart.main(Native Method)
E/AndroidRuntime(  660): Caused by: java.lang.NullPointerException
E/AndroidRuntime(  660):    at vex.android.layout.layout_titleheader.setButtonVisibility(layout_titleheader.java:163)
E/AndroidRuntime(  660):    at vex.android.layout.layout_titleheader.setButtonVisibility(layout_titleheader.java:155)
E/AndroidRuntime(  660):    at vex.android.controllers.ControllerLoginView.Initialize(ControllerLoginView.java:58)
E/AndroidRuntime(  660):    at vex.android.definition.VexActivity.onStart(VexActivity.java:154)
E/AndroidRuntime(  660):    at android.app.Instrumentation.callActivityOnStart(Instrumentation.java:1133)
E/AndroidRuntime(  660):    at android.app.Activity.performStart(Activity.java:4475) 
E/AndroidRuntime(  660):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1929)
E/AndroidRuntime(  660):    ... 11 more 
```

layout_titleheader.java ：

```
 package vex.android.layout;

    import vex.android.R;
    import vex.android.controllers.ControllerInfo;
    import vex.android.definition.VexLayout;
    import vex.android.definition.iVexParentable;
    import vex.android.definition.intentCode;
    import android.app.Activity;
    import android.app.Instrumentation;
    import android.content.Context;
    import android.content.Intent;
    import android.os.Handler;
    import android.os.SystemClock;
    import android.util.AttributeSet;
    import android.view.KeyEvent;
    import android.view.MotionEvent;
    import android.view.View;
    import android.widget.Button;
    import android.widget.ImageButton;
    import android.widget.ImageView;

    public class layout_titleheader extends VexLayout
    {
        /*** CONTROL POINTERS ***/
        Button nextButton;
        Button prevButton;
        ImageView infoButton;
        ImageButton upButton;
        ImageButton downButton;

        private Handler handler = new Handler(); 
        private Runnable upTask = new Runnable() { 
            public void run() {
                if(getContext() instanceof iVexParentable) {
                    ((iVexParentable)getContext()).onUpButton();
                }
                handler.postAtTime(this, SystemClock.uptimeMillis() +  100); 
            } 
        };
        private Runnable downTask = new Runnable() { 
            public void run() {
                if(getContext() instanceof iVexParentable) {
                    ((iVexParentable)getContext()).onDownButton();
                }
                handler.postAtTime(this, SystemClock.uptimeMillis() +  100); 
            } 
        };

        /**** CONSTRUCTORS ****/
        public layout_titleheader(Context context)
        {
            super(context);
            ((Activity)getContext()).getLayoutInflater().inflate(R.layout.layout_titleheader, this);
        }
        public layout_titleheader(Context context, AttributeSet attrs) {
            super(context, attrs);
            ((Activity)getContext()).getLayoutInflater().inflate(R.layout.layout_titleheader, this);
        }

        /**** INITIALIZERS ****/
        @Override
        public void Initialize()
        {
            infoButton.setOnTouchListener(new OnTouchListener(){
                @Override
                public boolean onTouch(View v, MotionEvent event) {
                    if(event.getAction() == MotionEvent.ACTION_DOWN) 
                    {
                        showInfo();
                    }
                    return true;
                }
            });

            prevButton.setOnTouchListener(new OnTouchListener(){
                @Override
                public boolean onTouch(View v, MotionEvent event) {
                    if(event.getAction() == MotionEvent.ACTION_DOWN)
                    {
                        new Thread(new Runnable() {
                            @Override
                            public void run() {
                                Instrumentation i = new Instrumentation();
                                i.sendKeyDownUpSync(KeyEvent.KEYCODE_BACK);
                            }
                        }).start();
                    }
                    return true;
                }
            });

            nextButton.setOnTouchListener(new OnTouchListener(){
                @Override
                public boolean onTouch(View v, MotionEvent event) {
                    if(event.getAction() == MotionEvent.ACTION_DOWN)
                    {
                        if(getContext() instanceof iVexParentable)
                        {
                            ((iVexParentable)getContext()).onEditButton();
                        }
                    }
                    return true;
                }
            });
            upButton.setOnTouchListener(new OnTouchListener() {
                public boolean onTouch(View view, MotionEvent motionevent) {
                    int action = motionevent.getAction();
                    if (action == MotionEvent.ACTION_DOWN) {
                        handler.removeCallbacks(upTask);
                        handler.postAtTime(upTask, SystemClock.uptimeMillis() + 100);
                    } else if (action == MotionEvent.ACTION_UP) {
                        handler.removeCallbacks(upTask);
                    }
                    return false;
                }
            });

            downButton.setOnTouchListener(new OnTouchListener(){
                @Override
                public boolean onTouch(View v, MotionEvent motionevent) {
                    int action = motionevent.getAction();
                    if (action == MotionEvent.ACTION_DOWN) {
                        handler.removeCallbacks(downTask);
                        handler.postAtTime(downTask, SystemClock.uptimeMillis() + 100);
                    } else if (action == MotionEvent.ACTION_UP) {
                        handler.removeCallbacks(downTask);
                    }
                    return false;
                }
            });
        }

        @Override
        public void InitializeControls()
        {
            infoButton = (ImageView)findViewById(R.id.infoButton);
            prevButton = (Button)findViewById(R.id.prevButton);
            nextButton = (Button)findViewById(R.id.nextButton);
            upButton = (ImageButton)findViewById(R.id.upButton);
            downButton = (ImageButton)findViewById(R.id.downButton);
        }

        /**** LOCAL METHODS ****/
        public void showInfo()
        {
            if(getContext() instanceof Activity)
            {
                Intent intent = new Intent(getContext(), ControllerInfo.class);
                ((Activity)getContext()).startActivityForResult(intent, intentCode.INFO_DOSTART);
            }
        }
        public void setButtonVisibility( int previousButton, int editButton, int helpButton)
        {
            setButtonVisibility(previousButton, editButton, helpButton, View.INVISIBLE, View.INVISIBLE);
        }

        public void setButtonVisibility( int previousButton, int editButton, int helpButton, int upButtonVisibility, int downButtonVisibility)
        {
            if (View.VISIBLE == previousButton) {// fixes issue of translation not correctly displayed
                prevButton.setText(getContext().getString(R.string.Back));
            }
            prevButton.setVisibility(previousButton);
            nextButton.setVisibility(editButton);
            infoButton.setVisibility(helpButton);
            upButton.setVisibility(upButtonVisibility);
            downButton.setVisibility(downButtonVisibility);
        }

        public void setPreviousButtonText(int id) {
            prevButton.setText(getContext().getString(id));
        }

        public void setEditButtonName(int resId)
        {
            nextButton.setText(resId);
        }
    } 
```

经过一番挖掘，我发现在运行 android 4 时不会调用在 VexLayout 中覆盖的 View 类的 onFinishInflate() 。知道吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T11:29:19.533

Android 平台一般是向前兼容的。这意味着您可以为 SDK 8 (2.2) 编写您的应用程序，它将在 4.0 上运行。

**更新：** 尝试检查视图之一（例如`prevButton`或`nextButton`）是否等于 null，`getContext`或`Context.getString(int)`在方法 setButtonVisibility(int, int, int, int, int) 中返回 null

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-06T11:28:30.063

Android 具有向后兼容性，因此为 android 2.2 编写的应用程序应该可以在 android 4 上运行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-06T11:29:16.523

有可能的。我想如果你尝试在 android 4 中安装它，它会正常安装。但是如果你反过来尝试，那就不可能了。因为 android 4 提供了许多高级更改。

# html - 如何为 LinkedIn 成功实施 og:image

> ID：10042786
> 
> 赞同：52
> 
> 时间：2012-04-06T11:25:02.793
> 
> 标签：html, share, facebook-opengraph, linkedin

**问题：**

*   我正在尝试在站点上实现开放图形图像，但没有取得多大成功：http: [//www.guarenty-group.com/cz/](http://www.guarenty-group.com/cz/)
*   主页完全绕过了 og:image 标记，内部页面正在读取站点中的所有图像，并将 og:image 作为最后一个选项。
*   其他社交网络在内部页面和主页上都运行良好。

* * *

**配置：**

*   我没有分享按钮或类似的东西，我想要的只是能够通过我的个人资料分享链接。
*   图片超过 300x300 像素：http: [//guarenty-group.com/img/gg_seal.png](http://guarenty-group.com/img/gg_seal.png)
*   这是我的头部标签的样子：

    ```
    <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
    <html xmlns="http://www.w3.org/1999/xhtml">
    <head>
            <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
            <title>Guarenty Group : Pojištění pro nájemce a pronajímatelé</title>

            <meta name="keywords" content="" />
            <meta name="description" content="Guarenty Group pojišťuje příjem z nájmu pronajímatelům, kauci nájemcům - aby nemuseli platit velkou částku v hotovostí předem - a dále nájemcům pojišťuje příjmy, aby měli na nájem při nemoci, úrazu či nezaměstnání." />
            <meta name="image_src" content="http://guarenty-group.com/img/gg_seal.png" />
            <meta name="image_url" content="http://guarenty-group.com/img/gg_seal.png" />

            <meta property="og:title" content="Pojištění pro nájemce a pronajímatelé" />
            <meta property="og:url" content="http://guarenty-group.com/cz/" />
            <meta property="og:image" content="http://guarenty-group.com/img/gg_seal.png" />
            <meta property="og:description" content="Guarenty Group pojišťuje příjem z nájmu pronajímatelům, kauci nájemcům - aby nemuseli platit velkou částku v hotovostí předem - a dále nájemcům pojišťuje příjmy, aby měli na nájem při nemoci, úrazu či nezaměstnání [...]" />
            ...
    </head> 
    ```

* * *

**测试结果：**

为了欺骗缓存，我使用[http://www.guarenty-group.com/cz/?try=N](http://www.guarenty-group.com/cz/?try=N)测试了该站点，我每次都更改了 N。奇怪的是，为不同的 N 值找到的图像是不同的。有时没有图像，有时有 1、2 或 3 个图像，但每次都有不同的图像集。但是，无论如何我都找不到 og:graph 中指定的图像！

* * *

**我的问题：**

1.  [https://developer.linkedin.com/documents/setting-display-tags-shares](https://developer.linkedin.com/documents/setting-display-tags-shares)说一件事，支持论坛的人员说“超过300”有谁知道图片的官方最小尺寸是多少（ w和h）？
2.  图片可以太大吗？
3.  我应该使用 xmlns，我应该不使用 xmlns 还是没关系？
4.  og:title 和 og:description 标签的最大（和最小）长度是多少？

当然欢迎任何其他建议:)

先谢谢了，加油~

* * *

## 回答 #1

> 赞同：49
> 
> 时间：2014-08-02T08:44:30.170

我在[LinkedIn](https://developer.linkedin.com/forum/attempts-share-url-linkedin-ignore-open-graph-tags)论坛上找到的这个答案可能对你有帮助：

> 伙计们，我花了一整天的时间尝试不同的事情。对我有用的是使用 mata [sic] 标签，如下所示：
> 
> ```
> <meta prefix="og: http://ogp.me/ns#" property="og:title" content="{Your content}" />
> <meta prefix="og: http://ogp.me/ns#" property="og:type" content="{Your content}" />
> <meta prefix="og: http://ogp.me/ns#" property="og:image" content="{Your content}" />
> <meta prefix="og: http://ogp.me/ns#" property="og:url" content="{Your content}" /> 
> ```
> 
> 只需尝试为每个标签（而不是 html 标签）添加前缀，然后使用您的 LI 帐户重新登录以清除缓存...发布您的结果。

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2017-10-09T08:10:02.483

我发现这个简单的修复程序在许多复杂的解决方案不起作用后对我有用：

**领英**

“清除”LinkedIn 共享预览缓存的唯一方法是诱使 LinkedIn 认为您的页面是一个不同的（和新的）页面。

这是通过向链接添加一个虚构的参数来完成的。它不会影响您的网页，但会强制重新获取元数据。

例子：

原文链接：//beantin.se/consultant-resume “新”链接：//beantin.se/consultant-resume?1

* * *

## 回答 #3

> 赞同：16
> 
> 时间：2018-08-11T13:22:53.443

我昨晚也有同样的问题。花了几个小时研究解决方案，我尝试了这篇文章中其他人推荐的解决方案，但无济于事。最后我就这个问题联系了LinkedIn，他们立即回复了。他们的开发团队实施了一个名为“Post Inspector”的新工具，可以让您优化内容共享。从字面上看，这在短短几分钟内就真正奏效了。

您所要做的就是输入您的 URL，他们会完成所有繁忙的工作，即验证图像、作者、标题、描述、发布日期等属性的正确代码。他们不仅会验证，还会告诉您要使用什么代码包括，缺少什么以及如何修复它。

这是使用 Post Inspector 的网站：

[https://www.linkedin.com/post-inspector/](https://www.linkedin.com/post-inspector/)

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2018-04-20T10:35:07.057

LinkedIn 也在缓存预览。如果 OpenGraph 图像在之前的某个时间被错误地缓存，请尝试使用共享链接上的查询参数来取消缓存，例如`https://your-website.com/?1`.

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2020-01-07T07:44:42.803

只是有点晚了，哈哈

但我遇到了这个确切的问题，发现linkedIn正在从最终*登陆页面*中提取元标记。

我试图链接到的我的网站有一个即时重定向，将 og 标签添加到它被重定向到解决问题的页面。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2018-01-27T15:31:20.270

如果您不想向您的 LinkedIn URL 添加虚假查询字符串参数（如[@Kym 的回答](https://stackoverflow.com/a/46641594/3025856)中所建议的那样），一个简单的解决方案就是退出然后重新登录。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2019-03-11T17:32:54.687

确保您的`og:`标签是标签的一部分`head`。

* * *

我最近遇到了这个问题，花了很多时间在上面所有类型的解决方案上工作。我正在使用其他人的 HTML，最后发现**html 只是缺少`head`tag**，而它确实有 head 的结束标签。

Linked In 显然不是为 og 标签扫描页面文本，而是处理页面 dom，如果 dom 对象没有正确编码，它们将不会处理。如果您对不匹配的标签或未封闭的标签有问题，如果其他一切都不起作用，这可能是您的问题。

修复 html 后，我不需要向元标记添加前缀或添加 og 图像高度和宽度标记。修复 html 后，Linked In 处理得很好。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2019-10-21T12:29:02.313

经过一天的研究，我发现`property`应该使用带有属性的元标记而不是`name`.

```
<!doctype html>
<html prefix="og: http://ogp.me/ns#">
<head>
     <meta property="og:type" content="website" />
     ... 
```

参考：[https ://ogp.me/](https://ogp.me/)

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2018-11-14T12:25:43.090

对我来说，解决方案是将所有`<meta>`标签（不带`prefix`）放在`<head>`标签内。

对于其他社交网络，如*Facebook*、*Twitter*或*Google*，您甚至不需要`<head>`标签。（因为它在[HTML5](https://google.github.io/styleguide/htmlcssguide.html#Optional_Tags)规范中是可选的）

PS。有一种新的好方法可以`<meta>`在您的网站上测试标签：[https ://metatags.io/](https://metatags.io/)

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2019-02-23T19:18:01.307

就我而言，我确实做到了这一点，并且效果很好（当然在我的页面上）。

把这四行放在头上：

```
<title> aanalytics </title>
<meta data-react-helmet="true" property="og:image" content="/photos/s5.jpg">
<meta data-react-helmet="true" property="og:type" content="website">
<meta data-react-helmet="true" property="og:url" content="https://www.aanalytics.de"> 
```

但是，请注意，如果您的页面中有多个头部，则需要将这些行插入第一个头部，否则它将不起作用。

我在 html 中也有 prefix="og: [http://ogp.me/ns# "](http://ogp.me/ns#)

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2021-04-21T23:55:55.850

这是`worked`给我的。

**如果您没有正确设置打开的图形标签，就会以某种方式发生此问题。**

而不是这个：

```
<meta name="image" property="og:image" content="{content}" /> 
```

尝试这个：

```
<meta name="image" property="og:image" content="{content}" />
<meta property="og:image:secure_url" content="{content}" /> 
<meta property="og:image:width" content="640" /> 
<meta property="og:image:height" content="442" /> 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2020-09-30T12:19:59.857

通过添加完整的图像路径，我终于让它工作了：

`<meta name="image" property="og:image" content="https://hasan.life/images/preview.png">`

# svn - 如何从 Subversion 生成修订的文本日志文件

> ID：10042787
> 
> 赞同：0
> 
> 时间：2012-04-06T11:25:09.427
> 
> 标签：svn, version-control, tortoisesvn, ankhsvn

我需要为特定时期内所做的所有修订生成一个文本日志文件。我们在服务器和客户端 AnkhSVN 和 TortoiseSVN 上使用 Collabnet Subversion。

我必须知道它可以通过 svn log 命令生成，我尝试过，但它们都没有在客户端机器和服务器上工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-06T11:48:24.337

要显示一段时间内创建的修订，您必须[`svn log`](http://svnbook.red-bean.com/en/1.7/svn-book.html#svn.ref.svn.c.log)与 shell 命令一起使用。如果您查看 的选项`svn log`，您会看到没有按日期定义的范围，您只能指定修订号的范围。

如果您查看 TortoiseSVN，可以选择按日期定义范围。执行以下步骤：

*   在 Windows 资源管理器中选择您对其所做的修订感兴趣的目录。如果您没有签出位置，请改为打开存储库浏览器。
*   从上下文菜单`TortoiseSVN > Show log`或存储库资源管理器中打开`Show log`。
*   在顶部，您可以选择日期范围。 ![在此处输入图像描述](../Images/169ec58a030a644957c1f06cda435a74.png)

因此，您可以定义修订范围，然后必须明确您感兴趣的日志信息。

# c# - 无法将类型“char*”隐式转换为“bool”

> ID：10042788
> 
> 赞同：0
> 
> 时间：2012-04-06T11:25:20.623
> 
> 标签：c#

下面的程序来自 Gayle Laakmann McDowell 的《Cracking the coding interview》一书。

原始代码是用 C 编写的。

这是原始代码：

```
void reverse(char *str) {
    char * end = str;
    char tmp;
    if (str) {
        while (*end) {
            ++end;
        }
        --end;
        while (str < end) {
            tmp = *str; 
            *str++ = *end; 
            *end-- = tmp;  
        }
    }
} 
```

我正在尝试将其转换为 C#。在通过谷歌研究并使用代码之后，下面是我所拥有的。我是一个初学者，真的卡住了。我没有得到我期望的价值。有人可以告诉我我做错了什么吗？

```
class Program
{        
    unsafe void reverse(char *str)
    {
        char* end = str;
        char tmp;
        if (str) // Cannot implicitly convert type 'char*' to 'bool'
        { 
            while(*end) // Cannot implicitly convert type 'char*' to 'bool'
            {
                ++end;
            }
            --end;
            while(str < end)
            {
                tmp = *str;
                *str += *end;
                *end -= tmp;
            }
        }
    }

    public static void Main(string[] args)
    {
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-06T23:39:33.483

正如您所发现的，如果您使用`unsafe`关键字，则可以在 C# 中使用指针。但是，只有在真正必要并且您真正知道自己在做什么时，您才应该这样做。如果您刚开始使用该语言，那么您当然不应该使用指针。

现在，对于您的实际问题：给您一个字符串，并且您想要反转它。C# 中的字符串表示为`string`类。并且`string`是不可变的，所以你不能修改它。但是您可以在 a`string`和字符数组 ( `char[]`) 之间进行转换，并且可以对其进行修改。[您可以使用静态方法`Array.Reverse()`](http://msdn.microsoft.com/en-us/library/d3877932.aspx)反转数组。因此，编写方法的一种方法是：

```
string Reverse(string str)
{
    if (str == null)
        return null;

    char[] array = str.ToCharArray();  // convert the string to array
    Array.Reverse(array);              // reverse the array
    string result = new string(array); // create a new string out of the array
    return result;                     // and return it
} 
```

如果您想编写实际执行反转的代码，您也可以这样做（作为练习，我不会在生产代码中这样做）：

```
string Reverse(string str)
{
    if (str == null)
        return null;

    char[] array = str.ToCharArray();

    // use indexes instead of pointers
    int start = 0;
    int end = array.Length - 1;

    while (start < end)
    {
        char tmp = array[start]; 
        array[start] = array[end];
        array[end] = tmp;
        start++;
        end--;
    }

    return new string(array);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-06T11:37:40.743

Try making it more explicit what you are checking in the conditions: if(str != null) while(*end != '\0')

You might also want to watch out for that character swapping code: it looks like you've got a +/- in there. If that's supposed to update your pointer positions, I'd suggest making those separate operations.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-06T11:40:07.033

I can't really remember if this ever worked in C#, but I am quite certain it should not work now.

To start off by answering your question. There is no automatic cast between pointers and bool. You need to write

```
if(str != null) 
```

Secondly, you can't convert char to bool. Moreover, there is no terminating character for C# strings, so you can't even implement this. Normally, you would write:

```
while(*end != '\0') // not correct, for illustration only 
```

But there is no '\0' char, or any other magic-termination-char. So you will need to take an int param for length.

Going back to the big picture, this sort of code seems like a terribly inappropriate place to start learning C#. It's way too low level, few C# programmers deal with pointers, chars and unsafe contexts on a daily basis.

... and if you must know how to fix your current code, here's a working program:

```
unsafe public static void Main(string[] args)
{
    var str = "Hello, World";
    fixed(char* chr = str){
    reverse(chr, str.Length);
    }
}

unsafe void  reverse(char *str, int length)
    {
        char* end = str;
        char tmp;
        if (str != null) //Cannot implicitly convert type 'char*' to 'bool'
        { 
        for(int i = 0; i < length; ++i) //Cannot implicitly convert type 'char*' to 'bool'
        {
            ++end;
        }
        --end;
            while(str<end)
            {
                tmp = *str;
                *str = *end;
                *end = tmp;
                --end;
                ++str;
            }
        }
    } 
```

Edit: removed a couple of .Dump() calls, as I was trying it out in LINQPad :)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-06T11:31:17.660

C# 与 C 不同，因为您不能将整数值用作隐式布尔值。您需要手动转换它。一个例子：

```
if (str != 0)
while (*end != 0) 
```

一句警告：如果你是从 C 语言迁移的，那么在这样的程序中会有一些事情会让你绊倒。主要的`char`是2字节。字符串和字符是 UTF-16 编码的。的 C# 等效项`char`是`byte`. 当然，您应该使用`string`而不是 C 字符串。

另一件事：如果您`char*`通过将 normal 转换为 a`string`来获得您的`char*`，请忘记您的整个代码。这不是 C。字符串不是以空值结尾的。

除非这是家庭作业，否则你宁愿做这样的事情：

```
string foo = "Hello, World!";
string bar = foo.Reverse(); // bar now holds "!dlroW ,olleH"; 
```

# eclipse - 安装 Eclipse e4 工具后无法启动 Eclipse 4.1.2

> ID：10042790
> 
> 赞同：1
> 
> 时间：2012-04-06T11:25:36.100
> 
> 标签：eclipse, eclipse-plugin

[从更新站点](http://download.eclipse.org/e4/downloads/drops/S-0.12M6-201203151300/repository/)安装`Eclipse e4 Tools`到我的 Eclipse 4.1.2之后。启动 eclipse.exe " 时出现错误。文件内容为：`An error has occurred. See the log file <my_workspace_path>\.metadata\.log"``.log`

```
!SESSION 2012-04-06 16:00:01.609 -----------------------------------------------
eclipse.buildId=M20120223-0900
java.fullversion=J2RE 1.6.0 IBM J9 2.4 Windows XP x86-32 jvmwi3260sr5-20090519_35743 (JIT enabled, AOT enabled)
J9VM - 20090519_035743_lHdSMr
JIT  - r9_20090518_2017
GC   - 20090417_AA
BootLoader constants: OS=win32, ARCH=x86, WS=win32, NL=en_US
Command-line arguments:  -os win32 -ws win32 -arch x86 -clean -console

!ENTRY org.eclipse.osgi 4 0 2012-04-06 16:00:17.343
!MESSAGE Application error
!STACK 1
java.lang.ArrayIndexOutOfBoundsException: Array index out of range: 1
    at org.eclipse.emf.common.util.URI.segment(URI.java:1731)
    at org.eclipse.e4.ui.internal.workbench.ReflectionContributionFactory.getBundle(ReflectionContributionFactory.java:135)
    at org.eclipse.e4.ui.internal.workbench.ReflectionContributionFactory.doCreate(ReflectionContributionFactory.java:61)
    at org.eclipse.e4.ui.internal.workbench.ReflectionContributionFactory.create(ReflectionContributionFactory.java:53)
    at org.eclipse.e4.ui.internal.workbench.E4Workbench.processHierarchy(E4Workbench.java:196)
    at org.eclipse.e4.ui.internal.workbench.E4Workbench.init(E4Workbench.java:122)
    at org.eclipse.e4.ui.internal.workbench.E4Workbench.<init>(E4Workbench.java:73)
    at org.eclipse.e4.ui.internal.workbench.swt.E4Application.createE4Workbench(E4Application.java:293)
    at org.eclipse.ui.internal.Workbench$3.run(Workbench.java:534)
    at org.eclipse.core.databinding.observable.Realm.runWithDefault(Realm.java:332)
    at org.eclipse.ui.internal.Workbench.createAndRunWorkbench(Workbench.java:520)
    at org.eclipse.ui.PlatformUI.createAndRunWorkbench(PlatformUI.java:149)
    at org.eclipse.ui.internal.ide.application.IDEApplication.start(IDEApplication.java:123)
    at org.eclipse.equinox.internal.app.EclipseAppHandle.run(EclipseAppHandle.java:196)
    at org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.runApplication(EclipseAppLauncher.java:110)
    at org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.start(EclipseAppLauncher.java:79)
    at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:344)
    at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:179)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:37)
    at java.lang.reflect.Method.invoke(Method.java:599)
    at org.eclipse.equinox.launcher.Main.invokeFramework(Main.java:622)
    at org.eclipse.equinox.launcher.Main.basicRun(Main.java:577)
    at org.eclipse.equinox.launcher.Main.run(Main.java:1410) 
```

我也尝试`eclipse.exe -clean`启动它但得到同样的错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T08:16:22.053

您不应该在 4.1.2 中安装 0.12 版本，请使用 4.2 版本

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T07:11:43.363

可能使用错误的更新站点导致了此问题。但是为了解决这个问题，我手动删除了eclipse目录中的所有`plug-ins`命名。然后我使用选项启动了 Eclipse，它启动时没有出现我之前遇到的错误。`org.eclipse.e4.tools*.*.jar``plugins``-clean`

# c# - C# Performancecounter 冻结 ui

> ID：10042794
> 
> 赞同：1
> 
> 时间：2012-04-06T11:25:59.037
> 
> 标签：c#, backgroundworker, performancecounter

好吧，我的程序中有一个性能计数器来计算 CPU 使用率。它工作得很好，没有错误等......但是！每当性能计数器加载时，我的 UI 就会冻结。

我在后台工作人员中加载了性能计数器，所以我不知道为什么它会冻结 UI ......

有任何想法吗？如果是这样，谢谢！

**代码**

```
private void backgroundWorker1_DoWork(object sender, System.ComponentModel.DoWorkEventArgs e)
    {
        try
        {
            SetPerformanceCounters();
            timerUpdateGUIControls.Start();
        }
        catch (Exception ex)
        {
            Console.WriteLine(ex);
        }
    }

    private void SetPerformanceCounters()
    {
        performanceCounterCPU.CounterName = "% Processor Time";
        performanceCounterCPU.CategoryName = "Processor";
        performanceCounterCPU.InstanceName = "_Total";

        performanceCounterRAM.CounterName = "% Committed Bytes In Use";
        performanceCounterRAM.CategoryName = "Memory";
    }
    private void timerUpdateGUIControls_Tick(object sender, EventArgs e)
    {
        try
        {
            SystemStatusprogressbarCPU.Value = (int)(performanceCounterCPU.NextValue());
            SystemStatuslabelCPU.Text = "CPU: " + SystemStatusprogressbarCPU.Value.ToString(CultureInfo.InvariantCulture) + "%";

            var phav = PerformanceInfo.GetPhysicalAvailableMemoryInMiB();
            var tot = PerformanceInfo.GetTotalMemoryInMiB();
            var percentFree = ((decimal)phav / tot) * 100;
            var percentOccupied = 100 - percentFree;
            SystemStatuslabelRAM.Text = "RAM: " + (percentOccupied.ToString(CultureInfo.InvariantCulture) + "%").Remove(2, 28);
            SystemStatusprogressbarRAM.Value = Convert.ToInt32((percentOccupied));
        }
        catch (Exception ex)
        {
            Console.WriteLine(ex);
        }
    } 
```

获取 RAM 值的类：

```
public static class PerformanceInfo
{
    [DllImport("psapi.dll", SetLastError = true)]
    [return: MarshalAs(UnmanagedType.Bool)]
    public static extern bool GetPerformanceInfo([Out] out PerformanceInformation PerformanceInformation,
                                                 [In] int Size);

    [StructLayout(LayoutKind.Sequential)]
    public struct PerformanceInformation
    {
        public int Size;
        public IntPtr CommitTotal;
        public IntPtr CommitLimit;
        public IntPtr CommitPeak;
        public IntPtr PhysicalTotal;
        public IntPtr PhysicalAvailable;
        public IntPtr SystemCache;
        public IntPtr KernelTotal;
        public IntPtr KernelPaged;
        public IntPtr KernelNonPaged;
        public IntPtr PageSize;
        public int HandlesCount;
        public int ProcessCount;
        public int ThreadCount;
    }

    public static Int64 GetPhysicalAvailableMemoryInMiB()
    {
        var pi = new PerformanceInformation();
        if (GetPerformanceInfo(out pi, Marshal.SizeOf(pi)))
        {
            return Convert.ToInt64((pi.PhysicalAvailable.ToInt64() * pi.PageSize.ToInt64() / 1048576));
        }
        return -1;
    }

    public static Int64 GetTotalMemoryInMiB()
    {
        var pi = new PerformanceInformation();
        if (GetPerformanceInfo(out pi, Marshal.SizeOf(pi)))
        {
            return Convert.ToInt64((pi.PhysicalTotal.ToInt64() * pi.PageSize.ToInt64() / 1048576));
        }
        return -1;
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-06T11:35:46.157

您在后台工作程序的 DoWork 中创建性能计数器。但这只是创作，而不是实际的工作。您应该将内容`timerUpdateGUIControls_Tick`从`backgroundWorker1_DoWork`

```
struct SystemStatus
{
    public int CpuLoad;
    public decimal OccupiedPercentage;
}

private void SetPerformanceCounters()
{
    performanceCounterCPU.CounterName = "% Processor Time";
    performanceCounterCPU.CategoryName = "Processor";
    performanceCounterCPU.InstanceName = "_Total";

    performanceCounterRAM.CounterName = "% Committed Bytes In Use";
    performanceCounterRAM.CategoryName = "Memory";
}

private void backgroundWorker1_DoWork(object sender, System.ComponentModel.DoWorkEventArgs e)
{
    try
    {
        SetPerformanceCounters();       

        while (!backgroundWorker1.CancellationPending)
        {
            SystemStatus status = new SystemStatus();
            status.CpuLoad = (int)(performanceCounterCPU.NextValue())       

            var phav = PerformanceInfo.GetPhysicalAvailableMemoryInMiB();
            var tot = PerformanceInfo.GetTotalMemoryInMiB();
            var percentFree = ((decimal)phav / tot) * 100;
            status.OccupiedPercentage = 100 - percentFree;

            backgroundWorker1.ReportProgress(0, status);

            Thread.Sleep(500); //set update frequency to 500ms
        }
    }
    catch (Exception ex)
    {
        Console.WriteLine(ex);
    }
}

private void backgroundWorker1_ProgressChanged(object sender, ProgressChangedEventArgs e)
{
    SystemStatus status = e.UserState as SystemStatus;

    SystemStatusprogressbarCPU.Value = status.CpuLoad;
    SystemStatuslabelCPU.Text = "CPU: " + Sstatus.CpuLoad.ToString(CultureInfo.InvariantCulture) + "%";

    SystemStatuslabelRAM.Text = "RAM: " + (status.OccupiedPercentage.ToString(CultureInfo.InvariantCulture) + "%").Remove(2, 28);
    SystemStatusprogressbarRAM.Value = Convert.ToInt32(status.OccupiedPercentage);
} 
```

不要忘记将 ProgressChanged 函数添加到 backgroundworker1：

```
backgroundWorker1.ProgressChanged += new ProgressChangedEventHandler(backgroundWorker1_ProgressChanged); 
```

# refinerycms - finerycms 2.0.3，如何只在主页添加一个字段

> ID：10042799
> 
> 赞同：0
> 
> 时间：2012-04-06T11:26:08.610
> 
> 标签：refinerycms

在炼油厂 2.0.3 中，我只想在主页上添加一个字段（文本）。

[我在 Refinery CMS 中](https://stackoverflow.com/questions/8097176/custom-fields-in-refinery-cms)找到了自定义字段，但如果我理解，该字段将应用于所有页面。

有人有想法吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T18:52:30.230

在你的`/config/initializers/refinery/pages.rb`

取消注释`# config.new_page_parts = false`

进入`config.new_page_parts = true`.

重新启动您的服务器，然后您可以在后端页面编辑器中看到，除了现有的 body/sidebody 选项卡字段之外，您现在可以根据需要添加任意数量的新内容字段。因此，您`home.html.erb`可以在新创建的字段中调用`<%= @page.content_for(:newpart) %>`

希望这可以帮助。

# vb.net - 如何检查 Shell32.Folder.CopyHere() 何时完成

> ID：10042801
> 
> 赞同：7
> 
> 时间：2012-04-06T11:26:13.353
> 
> 标签：vb.net, asynchronous, zip, shell32

我需要使用 Shell32 解压缩应用程序中的一些文件。现在，我用它 `srcFolder.CopyHere(destFolder.Items())`来实现这一点。但是，我的下一行代码需要新制作的 ZIP 文件。但是由于该`CopyHere`方法是异步的，我如何检查它何时完成？现在我使用了`Thread.Sleep`大约 500 毫秒的时间，这足以让我的计算机完成创建 ZIP 文件，但它不是很好的代码 imo。

有任何想法吗？

如有必要，可以提供更多信息/代码。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-05-17T07:37:25.533

这是另一个等待完成复制的

```
'Wait until the File/Folder has finished writing to zip file...
Do Until Shell.NameSpace(Filename).Items.Count = Shell.NameSpace(Input).Items.Count
    System.Threading.Thread.Sleep(200)
    System.Diagnostics.Debug.Print("Waiting...")
Loop 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-04-06T12:30:27.723

我找到了它，使用了这样的东西：

```
 srcFolder.CopyHere(destFolder.Items())

            While FileInUse(FILEPATH & "BudgetJaarOverzichtSMB.zip")
                Thread.Sleep(100)
            End While

    Private Function FileInUse(ByVal FilePath As String) As Boolean
        Try
            FileOpen(1, FilePath, OpenMode.Input)
            FileClose(1)
            Return False    ' File not in use
        Catch ex As Exception
            Return True     ' File in use
        End Try
    End Function 
```

不是很完美，但会比我的第一种方法浪费更少的时间。

# javascript - 动态创建元素后点击事件不起作用

> ID：10042806
> 
> 赞同：0
> 
> 时间：2012-04-06T11:26:43.950
> 
> 标签：javascript, jquery

我将此用于按钮的单击事件

```
$(document).on("click", "#feed_show_more_button", function() { 
    var a = $("#feed_show_more_button").attr("name");
    show_more(a);
}); 
```

然后在动态创建按钮后，我想将其用作假点击

```
$("#feed_show_more_button").click(); 
```

但它不起作用。

编辑：我意识到 show_more 函数不会触发，除非它包含在 ajax 结果中。我怎样才能使这个功能像全局一样？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-06T17:02:41.857

我怀疑诊断，因为当我将此代码粘贴到 javascript 控制台（萤火虫）时，控制台会记录“foo my button”

```
$(document).on("click", "#feed_show_more_button", function() { 
    var a = $("#feed_show_more_button").attr("name");
    console.log("foo",a)
    //show_more(a);
});

$("body").html("<div name='my button' id='feed_show_more_button' style='border:1px solid red;height:100px;width:100px'></div>");

$("#feed_show_more_button").click() 
```

顺便说一句，巧妙的把戏。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-06T11:36:11.837

而不是假电话：

```
$("#feed_show_more_button").click(); 
```

你可以简单地写：

```
show_more( $("#feed_show_more_button").attr("name") ); 
```

如果`show_more`可以访问（在范围内可见）当然。

# ruby - Ruby module_function，调用模块的私有方法，在模块上以类方法样式调用显示错误

> ID：10042807
> 
> 赞同：8
> 
> 时间：2012-04-06T11:26:57.523
> 
> 标签：ruby, module, private-methods

**test_module.rb**

```
 module MyModule
    def module_func_a
      puts "module_func_a invoked"
      private_b
    end

    module_function :module_func_a

    private
    def private_b
      puts "private_b invoked"
    end
  end

  class MyClass
    include MyModule
    def test_module
      module_func_a
    end
  end 
```

**从类调用模块函数**

```
 c = MyClass.new
  c.test_module 
```

**输出 1：**

```
$ ruby test_module.rb 
 module_func_a invoked
 private_b invoked 
```

**以类方法风格在模块上调用模块函数**

```
ma = MyModule.module_func_a 
```

**输出 2：**

```
 module_func_a invoked
 test_module.rb:5:in `module_func_a': undefined local variable or method `private_b' for MyModule:Module (NameError)
 from test_module.rb:31 
```

从输出 1 和输出 2 可以看出，*当在类中包含模块时，从模块函数调用模块的私有方法时不会出现问题，而在类方法样式中直接调用模块上的模块函数时未找到从模块函数调用的模块私有方法。*

任何人都可以让我理解上述行为背后的原因以及在类方法样式中调用模块函数（进而调用模块的私有方法）是否可能？如果可能的话，那么我的代码中需要哪些更正才能做到这一点？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-06T11:34:59.847

当您将模块包含在一个类中时，它会起作用，因为然后模块的所有方法都包含在该类中（`self`in`module_func_a`指向`MyClass`，它也具有该`private_b`方法）。

在另一种情况下 self 指向`MyModule`，它没有 private_b 方法。如果您希望它以两种方式工作，则必须同时声明`private_b`为模块方法，或者只需将行添加`extend self`到`MyModule`，以便它的所有方法都将成为模块方法。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-06T11:32:50.330

`module_function`确实将您复制`module_func_a`到元类中，但不复制它的依赖项。

所以当`module_func_a`从一个对象调用时，你会得到另一个方法`private_b`。但是在模块本身上调用它会失败，因为`private_b`它不是模块函数。

您也应该使用 module_function `private_b`，它应该可以工作。

# php - 创建一个包含 while 循环的函数

> ID：10042814
> 
> 赞同：0
> 
> 时间：2012-04-06T11:28:13.263
> 
> 标签：php, function, while-loop

我是 PHP 新手，并试图通过创建一个包含我所有工作的数据库来学习它（我是一名自由设计师）。我已经创建了下面的代码来生成一个表格来显示描述包含徽标的所有作业，该徽标可以正常工作并生成几行......

```
<?php
$logojobs = mysql_query("SELECT *  FROM hlgd_projects WHERE description LIKE '%logo%'", $connection);
?>

<a href="index.php?report=logo">View logo jobs</a>

<?php
if ($report == 'logo') {         
echo "<h1>Logo jobs</h1>";
echo "<table id='report'>
    <tr>
     <th></th>
     <th>Status</th>
     <th>Lead</th>
     <th>Start</th>
     <th colspan='2'>Codes</th>
     <th>Client</th>
     <th>Description</th>
     <th>Fee</th>
     <th>Contact</th>
     <th colspan='2'>Invoice</th>
     <th>Paid</th>
    </tr>";
 while ($logojob = mysql_fetch_array($logojobs)) { 
    echo "<tr>
        <td class='id'>" . $logojob['id'] . "</td>
        <td>" . $logojob['status_id'] . "</td>
        <td>" . $logojob['lead_id'] . "</td>
        <td>" . $logojob['date_start'] . "</td>
        <td>" . $logojob['code_lead'] . "</td>
        <td>" . $logojob['code_hlgd'] . "</td>
        <td>" . $logojob['client'] . "</td>
        <td>" . $logojob['description'] . "</td>
        <td>&pound;" . $logojob['fee'] . "</td>
        <td>" . $logojob['contact'] . "</td>
        <td>" . $logojob['invoice'] . "</td>
    <td>" . $logojob['date_inv'] . "</td>
        <td>" . $logojob['date_paid'] . "</td>      
    </tr>";             
 }  
 echo "</table>";        
}
?> 
```

但是，我希望能够为许多不同的事物生成报告，因此希望创建一个函数来生成表格并每次传递相关参数。我已经这样做了，但它只生成第一行，所以我认为它忽略了一段时间？谁能告诉我哪里出了问题或者如何更好地将上面的代码放入一个函数中？

```
<?php
function report_bytype($title,$job_set,$job_name) {
  $reporthead = "<h1>$title</h1>
    <table id='report'>
    <tr>
     <th></th>
     <th>Status</th>
     <th>Lead</th>
     <th>Start</th>
     <th colspan='2'>Codes</th>
     <th>Client</th>
     <th>Description</th>
     <th>Fee</th>
     <th>Contact</th>
     <th colspan='2'>Invoice</th>
     <th>Paid</th>
    </tr>";
  while ($job_name = mysql_fetch_array($job_set)) { 
    $reportrows = "
        <tr>
        <td class='id'>" . $job_name['id'] . "</td>
        <td>" . $job_name['status_id'] . "</td>
        <td>" . $job_name['lead_id'] . "</td>
        <td>" . $job_name['date_start'] . "</td>
        <td>" . $job_name['code_lead'] . "</td>
        <td>" . $job_name['code_hlgd'] . "</td>
        <td>" . $job_name['client'] . "</td>
        <td>" . $job_name['description'] . "</td>
        <td>&pound;" . $job_name['fee'] . "</td>
        <td>" . $job_name['contact'] . "</td>
        <td>" . $job_name['invoice'] . "</td>
        <td>" . $job_name['date_inv'] . "</td>
        <td>" . $job_name['date_paid'] . "</td>     
    </tr>";             
  }                             
  $reportfoot = "</table>"; 
  $reporttable = $reporthead . $reportrows . $reportfoot;
  echo $reporttable;
  return $reporttable; 
}
?>

<?php
if($report == 'logo') {
report_bytype("logo",$logojobs,$logojob);
}
if($report == 'stationery') {
report_bytype("stationery",$stationeryjobs,$stationeryjob);
}
?> 
```

非常感谢，海伦

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-06T11:33:47.547

问题是这一行：

```
while ($job_name = mysql_fetch_array($job_set)) { 
    $reportrows = "lots of html"
} 
```

每次循环 $reportrows 都设置为该行的 html。

使用`$reportrows .= "some html";`它将每一行添加到 $reportrows 而不是用该行替换 $reportrows。

编辑：替换`+=`为`.=`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-06T11:35:51.337

我可以看到为什么你有错误你不是`concatenating`你的结果

请参阅[http://php.net/manual/en/language.operators.string.php](http://php.net/manual/en/language.operators.string.php)以获得更详细的解释

代替

```
$reportrows = " 
```

和

```
$reportrows .= " 
```

完整脚本

```
function report_bytype($title, $job_set, $job_name) {
    $reporthead = "<h1>$title</h1>
    <table id='report'>
    <tr>
    <th></th>
    <th>Status</th>
    <th>Lead</th>
    <th>Start</th>
    <th colspan='2'>Codes</th>
    <th>Client</th>
    <th>Description</th>
    <th>Fee</th>
    <th>Contact</th>
    <th colspan='2'>Invoice</th>
    <th>Paid</th>
    </tr>";

    $reportrows = "";
    while ( $job_name = mysql_fetch_array ( $job_set ) ) {
        $reportrows .= "
    <tr>
    <td class='id'>" . $job_name ['id'] . "</td>
    <td>" . $job_name ['status_id'] . "</td>
    <td>" . $job_name ['lead_id'] . "</td>
    <td>" . $job_name ['date_start'] . "</td>
    <td>" . $job_name ['code_lead'] . "</td>
    <td>" . $job_name ['code_hlgd'] . "</td>
    <td>" . $job_name ['client'] . "</td>
    <td>" . $job_name ['description'] . "</td>
    <td>&pound;" . $job_name ['fee'] . "</td>
    <td>" . $job_name ['contact'] . "</td>
    <td>" . $job_name ['invoice'] . "</td>
    <td>" . $job_name ['date_inv'] . "</td>
    <td>" . $job_name ['date_paid'] . "</td>
    </tr>";
    }
    $reportfoot = "</table>";
    $reporttable = $reporthead . $reportrows . $reportfoot;
    echo $reporttable;
    return $reporttable;
} 
```

谢谢

# c# - 使用 ASP.Net 用动态值填充 PDF 表单

> ID：10042816
> 
> 赞同：0
> 
> 时间：2012-04-06T11:28:25.230
> 
> 标签：c#, asp.net, pdf-generation

我被困在这里。实际上，我正在尝试使用 asp.net 填写 PDF 表单。我得到了一些帮助并编写了以下代码：

```
private void fillForm()
{
    try
    {
        string formFile = Server.MapPath("") + @"\Forms\fw4.pdf";
        string savepath = Server.MapPath("") + @"\Forms\new_fw4.pdf";
        PdfReader pdfReader = new PdfReader(formFile);
        using (FileStream stream = new FileStream(savepath, FileMode.Create))
        {
            PdfStamper pdfStamper = new PdfStamper(pdfReader, stream);
            AcroFields formFields = pdfStamper.AcroFields;

            foreach (DictionaryEntry de in formFields.Fields)
             {
                 formFields.SetField("field name", "field value");
             }            
            pdfStamper.FormFlattening = true;
            pdfStamper.Close();
        }
    }
    catch
    {
    }
} 
```

我希望程序显示列表中的所有字段。我无法使用 foreach 循环迭代所有可用字段。它给了我这个错误：

无法将类型转换`System.Collections.Generic.KeyValuePair<string,iTextSharp.text.pdf.AcroFields.Item>`为`System.Collections.DictionaryEntry`

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-06T12:21:55.047

当您更新 KeyValuePair 尝试使用 item.Key & item.Value

# javascript - 如何使用javascript将文件保存在相对路径中

> ID：10042819
> 
> 赞同：3
> 
> 时间：2012-04-06T11:28:33.480
> 
> 标签：javascript, html, json, save, filepath

我想使用 javascript 将 .json 文件保存在应用程序路径中。我使用以下代码保存文件。但它保存在物理路径中。不在应用程序路径中。 **我的代码是：**

```
 var fso = new ActiveXObject("Scripting.FileSystemObject");
 var s = fso.CreateTextFile("E:\\Model.json", true);
 s.WriteLine(json);
 s.Close(); 
```

在服务器端可以使用**Server.MapPath** 但我不知道如何保存在 Javascript 中。请朋友们指导我，提前谢谢..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-06T11:34:44.587

您不能只剥离驱动器前缀并使用相对路径吗？

```
 var fso = new ActiveXObject("Scripting.FileSystemObject");

 var s = fso.CreateTextFile("MyFolder\\Model.json", true);

 s.WriteLine(json);
 s.Close(); 
```

而且，通过查看[FSO 文档](http://msdn.microsoft.com/en-us/library/aa711216%28v=vs.71%29.aspx)，有几种方法可以获取当前目录路径并自己计算路径。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-06T11:31:54.523

我认为您正在通过 Windows Scripting Host 或类似的方式运行它。

只需使用相对路径：

```
var s = fso.CreateTextFile("Model.json", true); 
```

注意我离开了`E:\\`。

我不知道您所说的“*应用程序路径*”是什么意思，但这会将文件保存在运行脚本/应用程序的当前目录中。如果您想相对于“特殊”Windows 文件夹之一执行此操作，请使用[`FileSystemObject#GetSpecialFolder`](http://msdn.microsoft.com/en-us/library/a72y2t1c%28v=vs.85%29.aspx)获取特殊文件夹的路径，然后将您的路径附加到它。

# java - 将数据库连接作为方法参数传递

> ID：10042826
> 
> 赞同：0
> 
> 时间：2012-04-06T11:29:24.897
> 
> 标签：java, oracle, jdbc

有一个 Web 应用程序和一个 jar 应用程序。我正在 Web 应用程序中创建一个连接对象，并将其作为方法参数传递给 jar 的类，并尝试基于 jar 中传递的连接执行存储过程。

但是当调用Stmt.executeUpdate() 时，存储过程的执行会停止

你能在我犯错误的地方说明一下吗？

谢谢

更多补充——

1.  我没有得到任何异常。它只是停止了。

2.  在网络应用程序中，我正在这样做- `jar_common_class().deductMoney(Id,paidAmt,vle,cardno,pin,username,Service ,connection ,"");`

3.  然后在罐子里我这样做 - `public String[] deductMoney(String ID, double amount, String uni, String cardNo, String pin, String username, String service, Connection externalCon, String aff)`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-06T13:37:52.450

我感觉很通灵，所以在没有任何信息的情况下，我将依赖经验......

我的猜测是存储过程正在更新网络应用程序正在使用的相同数据，并且存储过程试图锁定目标数据，但不能因为网络应用程序对数据持有某种锁定永远不要放手。所以存储过程只是（正确地）等待网络应用程序释放它的锁。

要对此进行测试，请直接从命令行调用您的存储过程 java 应用程序，然后它应该停止，然后终止您的 Web 应用程序 - 查看存储过程是否继续并完成。

如果*是*这种情况，请查看每个应用程序请求哪种锁（例如，Web 应用程序的隔离级别可能是“可重复读取”，这通常是一个糟糕的选择）和/或检查何时释放锁等

# java - 在 Josso 中，如何使用“josso_assertion_id”获取用户详细信息

> ID：10042828
> 
> 赞同：0
> 
> 时间：2012-04-06T11:29:27.723
> 
> 标签：java, josso

如何使用成功登录后获取的“josso_assertion_id”获取用户凭据。

他们是否有任何 API 调用来获取 JOSSO 中的用户凭据。

任何帮助将非常感激。

克里希纳

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-06T16:28:55.670

是的，

获取后`assertion_id`，需要调用`SSOIdentityProvider`web服务和方法`resolveAuthenticationAssertion`

它将给出`session_id`指向用户的那个。然后，您可以使用`session_id`它对 Web 服务执行任何类型的请求

看看[http://josso_server_url/josso/services](http://josso_server_url/josso/services)

获得可用服务的列表

# javascript - 数字，悬停（等）效果在 Ajax 加载后不起作用更多

> ID：10042832
> 
> 赞同：0
> 
> 时间：2012-04-06T11:29:50.690
> 
> 标签：javascript, jquery, drupal

我正在使用 Drupal 7 并通过页面上的 View 模块获取我的内容。而我的寻呼机视图加载更多模块。还有我的缩略图效果悬停，阴影等。使用此代码的图像悬停：

```
var hoverImg = '<div class="hoverimg"></div>';

$(".thumb").each(function(){
    $(this).children("div").each(function(){
        $(this).find("a").append(hoverImg);
    });
});

$(".thumb div").hover(function() {
    $(this).find(".hoverimg").animate({ opacity: 'toggle' });
});

$(".thumb").hover(function() {
    $(this).find("div").each(function(){
        $(this).find(".shadow").fadeOut(500);
    });
}); 
```

并在我当前的缩略图上获取数字。这段代码：

```
var c = '';
var d = '';
$('.view-content div.views-row').each(function(){
    c = 0;
    d = 0;
    var i = 1;
    d = $(this).find('.thumbimg').length;
    $(this).find('.thumbimg').each(function(){
        sayi=i++;
        $(this).append('<div class="img_no">0'+sayi+'</div>');
    });
}); 
```

一切都好。起始页上的所有效果。但是当点击加载更多按钮时，我的效果不能在另一个页面上工作。

我该如何解决这个问题？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T11:46:08.663

它停止工作的原因是悬停功能（以及您的其他脚本/功能）仅适用于现有元素。因此，如果您使用 ajax 添加某些内容，除非您在 ajax 加载后重新加载脚本，否则它不会适用。

另一种选择是使用 live() 或 on() （用于悬停部分。On 是新版本的 live，在 jQuery 1.7 中添加）。Live and on 聆听任何现有或未来的元素。

实时脚本看起来像这样：

```
 $(".yourElement").live({
                mouseenter:
                function () {
                    // Do something
                },
                mouseleave:
                function () {
                    // Do something
                },
                mousemove:
                function () {
                   // Do something
                }
            }); 
```

# java - JSF 重定向异常

> ID：10042834
> 
> 赞同：0
> 
> 时间：2012-04-06T11:30:26.237
> 
> 标签：java, jsf, jsf-1.2

当从我的门户的登录页面导航到索引页面时，根据某些事实，用户可以被**外部**重定向，如下所示：

```
if (!(marketVo.getAbsoluteUrl() != null && marketVo.getAbsoluteUrl().equals(absoluteUrlToRedirect))) {
logger.info("---WILL REDIRECT TO ABS URL: " + absoluteUrlToRedirect);
final FacesContext context = FacesContext.getCurrentInstance();
context.responseComplete();
try {
    final HttpServletResponse response = (HttpServletResponse) context.getExternalContext().getResponse();

    if (context.getViewRoot() != null) {
        // this step will clear any queued events
        context.getViewRoot().processDecodes(context);
    }
    response.sendRedirect(absoluteUrlToRedirect);

} catch (final Exception e) {
    // TODO Auto-generated catch block
    e.printStackTrace();
} 
```

}

好吧，它抛出了一个异常：

```
 14:24:35,579 INFO  [CmwSessionHelperBean] ---WILL REDIRECT TO ABS URL: http://hi
tachi.mygravitant.com
14:24:35,580 ERROR [STDERR] java.lang.IllegalStateException
14:24:35,582 ERROR [STDERR]     at org.apache.catalina.connector.ResponseFacade.
sendRedirect(ResponseFacade.java:435)
14:24:35,590 ERROR [STDERR]     at com.example.cloud.common.jsf.core.beans.Cmw
SessionHelperBean.createCmwUserSession(CmwSessionHelperBean.java:269) 
```

你能给我一个建议来避免这种异常的发生吗？请注意，重定向已完成，但由于此异常，当我回到我的门户时，它不再正常工作......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-06T12:24:20.427

您应该使用[`ExternalContext#redirect()`](http://docs.oracle.com/javaee/5/api/javax/faces/context/ExternalContext.html#redirect%28java.lang.String%29)JSF 安全的方式执行重定向。

```
public void createCmwUserSession() throws IOException {

    if (!(marketVo.getAbsoluteUrl() != null && marketVo.getAbsoluteUrl().equals(absoluteUrlToRedirect))) {
        logger.info("---WILL REDIRECT TO ABS URL: " + absoluteUrlToRedirect);
        FacesContext.getCurrentInstance().getExternalContext().redirect(absoluteUrlToRedirect);
    }
} 
```

这个方法也会隐式调用`FacesContext#responseComplete()`，你不需要自己做。

此外，您需要确保您没有在同一个响应上多次调用重定向方法，或者在之后执行导航。

# windows - 如何告诉“git tag -s ..”（或 -u）我的私钥在哪里（Windows 7）？

> ID：10042836
> 
> 赞同：1
> 
> 时间：2012-04-06T11:30:45.917
> 
> 标签：windows, git

我成功地将我的私钥放在了 git 连接到 github 时找到它的地方。（像这样[https://serverfault.com/questions/194567/how-to-i-tell-git-for-windows-where-to-find-my-private-rsa-key/198691#198691](https://serverfault.com/questions/194567/how-to-i-tell-git-for-windows-where-to-find-my-private-rsa-key/198691#198691)）

但是当我尝试签署一个标签时，这个默认魔法似乎并不适用。精彩的[git 社区书谈到](http://shafiulazam.com/gitbook/3_git_tag.html)了一个`gpg-key-id`.，但我用 puttygen 创建了我的密钥，并且似乎没有这样的 id。

那么，我如何告诉 git 一台 Windows 机器它应该使用的密钥位于 ~/.ssh/id_rsa ？

谢谢你，法尔科

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-06T11:38:50.033

To sign a tag you need a GPG/PGP ID and not a SSH id. The SSH id is used to encrypt the connection and identify yourself to the server.

The GPG works in general similar how ever there is a kind of "profile" linked to your public gpg key. To get started on with GPG on windows [gpg3win](http://www.gpg4win.org/ "gpg4win") is a good place to look. Also the Wikipedia entries on [GPG](http://en.wikipedia.org/wiki/GNU_Privacy_Guard "Wikipedia: GPG") and [PGP](http://en.wikipedia.org/wiki/Pgp "Wikipedia: PGP") are good places to get some insight regarding this topic.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-06T11:51:18.713

> 我如何告诉 git 一台 Windows 机器它应该使用的密钥位于 ~/.ssh/id_rsa

您需要定义`~`, ie `HOME`（这不是 Windows 上默认定义的变量。`HOMEPATH`或者`USERPROFILE`是）。
参见例如“ [Auth failed on Windows XP with git and tortoisegit](https://stackoverflow.com/questions/5318590/auth-fails-on-windows-xp-with-git-and-tortoisegit/5322335#5322335) ”，其中`HOME`定义为完整的非默认路径（即不是`HOMEPATH`）

# python - 连接 FTP 后删除所有文件和文件夹

> ID：10042838
> 
> 赞同：4
> 
> 时间：2012-04-06T11:30:52.167
> 
> 标签：python, ftp, ftplib

我想通过 FTP 连接到一个地址，然后删除所有内容。目前我正在使用这段代码：

```
from ftplib import FTP
import shutil
import os

ftp = FTP('xxx.xxx.xxx.xxx')
ftp.login("admin", "admin")

for ftpfile in ftp.nlst():
    if os.path.isdir(ftpfile)== True:
        shutil.rmtree(ftpfile)
    else:
        os.remove(ftpfile) 
```

我的问题是，当他尝试删除第一个文件时，我总是会收到此错误：

```
 os.remove(ftpfile)
WindowsError: [Error 2] The system cannot find the file specified: somefile.sys 
```

任何人都知道为什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-06T14:17:46.343

```
for something in ftp.nlst():
    try:
        ftp.delete(something)
    except Exception:
        ftp.rmd(something) 
```

还有其他方法吗？

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2019-01-07T10:29:39.063

此函数递归删除任何给定路径：

```
# python 3.6    
from ftplib import FTP

def remove_ftp_dir(ftp, path):
    for (name, properties) in ftp.mlsd(path=path):
        if name in ['.', '..']:
            continue
        elif properties['type'] == 'file':
            ftp.delete(f"{path}/{name}")
        elif properties['type'] == 'dir':
            remove_ftp_dir(ftp, f"{path}/{name}")
    ftp.rmd(path)

ftp = FTP(HOST, USER, PASS)
remove_ftp_dir(ftp, 'path_to_remove') 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2021-10-16T18:07:11.550

```
from ftplib import FTP
import shutil
import os

ftp = FTP("hostname")

ftp.login("username", "password")

def deletedir(dirname):

    ftp.cwd(dirname)

    print(dirname)

    for file in ftp.nlst():

        try:
            ftp.delete(file)

        except Exception:
            deletedir(file)

    ftp.cwd("..")
    ftp.rmd(dirname)

for ftpfile in ftp.nlst():

    try:

        ftp.delete(ftpfile)

    except Exception:

        deletedir(ftpfile) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-06T11:58:55.413

```
ftp.nlst() 
```

上面的语句返回一个**文件名列表**。

```
os.remove() 
```

上面的语句需要一个**文件路径**。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-11-07T18:46:03.050

```
from ftplib import FTP
#--------------------------------------------------
class FTPCommunicator():

    def __init__(self):

        self.ftp = FTP()
        self.ftp.connect('server', port=21, timeout=30)
        self.ftp.login(user="user", passwd="password")

    def getDirListing(self, dirName):

        listing = self.ftp.nlst(dirName)

        # If listed a file, return.
        if len(listing) == 1 and listing[0] == dirName:
            return []

        subListing = []
        for entry in listing:
            subListing += self.getDirListing(entry)

        listing += subListing

        return listing

    def removeDir(self, dirName):

        listing = self.getDirListing(dirName)

        # Longest path first for deletion of sub directories first.
        listing.sort(key=lambda k: len(k), reverse=True)

        # Delete files first.
        for entry in listing:
            try:
                self.ftp.delete(entry)
            except:
                pass

        # Delete empty directories.
        for entry in listing:
            try:
                self.ftp.rmd(entry)
            except:
                pass

        self.ftp.rmd(dirName)

    def quit(self):

        self.ftp.quit()
#--------------------------------------------------
def main():

    ftp = FTPCommunicator()
    ftp.removeDir("/Untitled")
    ftp.quit()
#--------------------------------------------------
if __name__ == "__main__":
    main()
#-------------------------------------------------- 
```

# javascript - 在循环中使用 javascript 生成 1000 个随机 10 位数字

> ID：10042844
> 
> 赞同：2
> 
> 时间：2012-04-06T11:31:27.020
> 
> 标签：javascript, loops, random

我想在循环中使用 javascript 生成至少 1000 个具有 10 位数字的唯一随机数。这可能吗？或者 Javascript 这样做是错误的吗？

**更新：**您将如何确保不创建重复项？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-06T11:59:27.067

这是我的做法：

```
var arr = [],
    track = [],
    min = 1000000000,
    max = 9999999999,
    qty = 1000,
    ii = 0,
    rnd;

while (ii < qty) {
    rnd = Math.floor(Math.random() * (max - min + 1)) + min;
    if (!track[rnd]) {
        arr[ii] = track[rnd] = rnd;
        ii += 1;
    }
} 
```

这是一个工作示例：http: [//jsfiddle.net/mTmEs/](http://jsfiddle.net/mTmEs/)

现在，如果出现问题`Math.random`并且由于某种原因会生成大量重复项，则此代码可能需要很长时间才能完成。尽管当您谈论大量唯一随机数时，我认为没有任何方法可以解决这种潜在问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-06T11:35:45.567

是的，这是可能的。

1.  用于`Math.random`生成伪随机数。`Math.random`返回一个大于或等于`0`且小于的伪随机数`1`，因此要获得一个 10 位数字（我假设是一个整数），您可以将其乘以 1,000,000,000 并用`Math.round`or将其四舍五入`Math.floor`。（如果您需要它们*全部*为 10 位数，请进行相应调整 - 添加一个基本金额，乘以一个更高的数字等）

2.  使用一个对象来跟踪它们，所以`var obj = {};`开始吧。

3.  将数字作为键存储在对象中，例如`obj[number] = true`.

4.  测试对象是否有生成的数字使用`if (obj[number])`

5.  循环直到你有正确数量的唯一数字。

我使用对象来存储数字的原因是 JavaScript 对象本质上是映射，并且引擎经过优化可以快速从对象中检索属性。在幕后，一个实现可以做它喜欢做的事，但可能会使用哈希表或类似的东西。

请注意，为此使用“数组”是不必要的；[JavaScript 数组并不是真正的数组](http://blog.niftysnippets.org/2011/01/myth-of-arrays.html)，它们只是具有一些特殊功能的对象。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-06T11:36:52.107

You could do this in JS, but you would have to check the array to see if it contains the currently generated random number. This would obviously degrade performance.

See if these answers help.

[Random number generator that fills an interval](https://stackoverflow.com/questions/2280725/random-number-generator-that-fills-an-interval)

[Generate unique random numbers between 1 and 100](https://stackoverflow.com/questions/2380019/generate-8-unique-random-numbers-between-1-and-100)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-06T12:52:31.790

生成 n 个长度为 l 的随机数的通用函数可能是：

```
// Generate n unique random numbers of length l
// l should be less than 15
function genNRandLen(n, l) {

  // Make sure l and n are numbers
  n = Number(n);
  l = Number(l);

  // Protect against bad input
  if (isNaN(l) || isNaN(n)) return;

  var o = {}, a = [], num;
  var min = l == 1? 0 : Math.pow(10, l-1);
  var r = Math.pow(10, l) - min;

  // Protect against endless loop
  if (n >= (r)) return;

  while (n--) {
    do {
      num = Math.floor(min + (Math.random()*r));
    } while (o[num])

    o[num] = true;
    a[n] = num;
  }
  return a.sort();
} 
```

排序只是为了便于在测试时查看重复项，如果不需要则删除或首选随机顺序。

如果需要超过 15 位的数字，可以通过连接较短随机数的字符串并修剪到所需长度来创建它们。以下将生成任意长度的随机数：

```
// Generate random number of length l
function randLen(l) {
  var n = '';
  while (n.length < l) {
    n += String(Math.random()).replace(/^0\.0*/,'');
  }
  return n.substring(0, l);
} 
```

它必须返回一个字符串，因为转换为数字会弄乱结果。哦，所有的数字都是整数。

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2012-04-06T11:36:32.820

为什么不？这是代码：

```
var a=[]; 
for (var i=1000; i--;) 
 a.push(Math.random()*10000000000) 
```

# c# - 如果我在 Windows Phone 7 中使用联合，如何按类别对提要进行排序？

> ID：10042849
> 
> 赞同：0
> 
> 时间：2012-04-06T11:31:44.897
> 
> 标签：c#, silverlight, windows-phone-7, expression-blend

我正在写一个 Rss 阅读器。我的问题是：如果我使用 syndicationfeed，我可以按类别排序吗？这个想法是当提要显示在列表框中时已经排序。仅对 1 个预定义类别进行排序和显示。

我是一名新程序员，所以我正在研究这个 MSDN 示例： http: [//msdn.microsoft.com/en-us/library/hh487167 (v=vs.92).aspx](http://msdn.microsoft.com/en-us/library/hh487167(v=vs.92).aspx)

我使用的 RSS 提要是：[http ://www.zimo.co/feed/](http://www.zimo.co/feed/)

* * *

**更新：**

我的新尝试解决但失败了：

```
private void UpdateFeedList(string feedXML)
    {
        StringReader stringReader = new StringReader(feedXML);
        XmlReader xmlReader = XmlReader.Create(stringReader);
                                                              //problem below (I do not get sort method)
        SyndicationFeed feed = SyndicationFeed.Load(xmlReader).Categories.sort();

        Deployment.Current.Dispatcher.BeginInvoke(() =>
        {
           //binding listbox with feed items
            ls_text.ItemsSource = feed.Items;

        });
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-06T13:43:30.517

**更新** 我对此进行了更深入的研究。首先，对我来说，仅仅因为每个项目都有多个类别就按类别排序项目是没有意义的。正如您在下面指出的，您对过滤感兴趣。以下是我的做法（代码进入 UpdateFeedList 事件）：

```
//same code as in the example
SyndicationFeed feed = SyndicationFeed.Load(xmlReader);

//I pull out the distinct list of categories from the entire feed
//You might want to bind this list to a dropdown on your app
//so that users can select what they want to see:
List<string> cats = new List<string>();
foreach (SyndicationItem si in feed.Items)
    foreach(SyndicationCategory sc in si.Categories)
       if (!cats.Contains(sc.Name))
          cats.Add(sc.Name);

//Here I imagined that I want to see all items categorized as "Trendy"
SyndicationCategory lookingFor = new SyndicationCategory("Trendy");

//and I create a container where I could copy all "Trendy" items:
List<SyndicationItem> coll = new List<SyndicationItem>();

//And then I start filtering all items by the selected tag:
foreach (SyndicationItem si in feed.Items)
{
     foreach (SyndicationCategory sc in si.Categories)
         if (sc.Name == lookingFor.Name)
         {
                    coll.Add(si);
                    break;
         }
}

Deployment.Current.Dispatcher.BeginInvoke(() =>
{
    // Bind the filtered of SyndicationItems to our ListBox.
       feedListBox.ItemsSource = coll;

       loadFeedButton.Content = "Refresh Feed";
}); 
```

**以下内容不正确**

```
yoursyndicationfeed.Categories.Sort() 
```

我个人不会按日期降序对 RSS 提要进行排序（它应该已经排序），因为 RSS 提要以与它们发布的相反顺序为我提供网站内容的更新，并且我如何最人们习惯于看到它:)

另一个更新（也不正确:)）

好的，所以我面前仍然没有该应用程序的代码，但是围绕文档（我在评论中提到）进行挖掘，您可以执行以下操作：

```
SyndicationFeed feed = SyndicationFeed.Load(xmlReader); 
feed.Items.OrderBy(x => x.Category); 
```

这个想法是 feed.Items 是您的元素列表。所以把它当作一个列表，按照你需要的属性对其进行排序。

哦，另外，我在RSS阅读器上看到了你的另一个问题，你必须使用样本吗？Scott Guthrie[为 Windows Phone 7 编写了一个 RSS 客户端](http://weblogs.asp.net/scottgu/archive/2010/03/18/building-a-windows-phone-7-twitter-application-using-silverlight.aspx)，他的实现似乎更简单一些。当然，这取决于您的需求。

# xml - 如何使用 weburl 而不是命令行 post.sh 方法更新 solr 中的 xml 数据？

> ID：10042850
> 
> 赞同：0
> 
> 时间：2012-04-06T11:31:45.227
> 
> 标签：xml, solr, salesforce

我在销售人员中使用 Apex 在字符串变量中生成运行时的 xml。我想借助 webUrl 将此生成的 xml 发送到 solr 服务器。意味着我直接想在没有命令行帮助的情况下将我的 xml 数据发布到 solr。

任何人都可以请建议我如何做到这一点。？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T13:07:14.367

[您可以将 XML 直接发送到 Solr](http://wiki.apache.org/solr/UpdateXmlMessages)。例如

```
curl http://<hostname>:<port>/solr/update -H "Content-Type: text/xml" --data-binary '<add>
<doc boost="2.5"> <field name="employeeId">05991</field>
<field name="office" boost="2.0">Bridgewater</field> </doc> </add>' 
```

# python - Python - 列表中的值减法

> ID：10042851
> 
> 赞同：6
> 
> 时间：2012-04-06T11:31:51.173
> 
> 标签：python, list, nested-lists

我是 Python 新手，我在使用列表时遇到了困难。我希望从列表中的所有值中减去 1，但值 10.5 除外。下面的代码给出了 x3 列表分配索引超出范围的错误。到目前为止的代码：

```
x2=[10.5, -6.36, 11.56, 19.06, -4.37, 26.56, 9.38, -33.12, -8.44, 0.31, -13.44, - 6.25, -13.44, -0.94, -0.94, 19.06, 0.31, -5.94, -13.75, -23.44, -51.68, 10.5]
x3=[]
i=0
while (i<22):
 if x2[i]==10.5:
    x3[i]=x2[i]
else:
    x3[i]=x2[i]-1
break
#The result I want to achieve is:
#x3=[10.5, -7.36, 10.56, 18.06, -5.37, 25.56, 8.38, -34.12, -9.44, -1.31, -14.44, -7.25, -14.44, -1.94, -1.94, 18.06, -1.31, -6.94, -14.75, -24.44, -52.68, 10.5] 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-06T11:37:14.540

Try the following:

```
x3 = [((x - 1) if x != 10.5 else x) for x in x2] 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-06T11:38:46.120

```
x2 = [10.5, -6.36, 11.56, 19.06, -4.37, 26.56, 9.38, -33.12, -8.44, 0.31, -13.44, - 6.25, -13.44, -0.94, -0.94, 19.06, 0.31, -5.94, -13.75, -23.44, -51.68, 10.5]
x3 = map(lambda x: x if x == 10.5 else x - 1, x2) 
```

Python being elegant.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-06T11:38:32.340

Python's built-in function map is pretty much exactly for the situation you have in hand, using that and an anonymous function solving the problem becomes a one-liner:

```
map(lambda x: x if x == 10.5 else x - 1, x2) 
```

Or if you are not comfortable in using lambda functions, you can define the function separately:

```
def func(x):
    if x == 10.5:
        return x
    else:
        return x - 1

map (func, x2) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-06T11:36:18.917

```
x2=[10.5, -6.36, 11.56, 19.06, -4.37, 26.56, 9.38, -33.12, -8.44, 0.31, -13.44, - 6.25, -13.44, -0.94, -0.94, 19.06, 0.31, -5.94, -13.75, -23.44, -51.68, 10.5]
x3=[]
for value in x2:
    if value != 10.5:
        value -= 1
    x3.append(value) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-06T11:45:21.527

Map 是最好的选择，但如果你想与众不同，请使用 reduce :D

```
>>> x2 = [10.5, -6.36, 11.56, 19.06, -4.37, 26.56, 9.38, -33.12, -8.44, 0.31, -13.44, - 6.25, -13.44, -0.94, -0.94, 19.06, 0.31, -5.94, -13.75, -23.44, -51.68, 10.5]
>>> reduce(lambda x,y: x+[y if y==10.5 else y-1], x2, [])  
[10.5, -7.36, 10.56, 18.06, -5.37, 25.56, 8.38, -34.12, -9.44, -0.69, -14.44, -7.25, -14.44, -1.94, -1.94, 18.06, -0.69, -6.94, -14.75, -24.44, -52.68, 10.5] 
```

# python - msgpack-python 无法分配内部缓冲区

> ID：10042853
> 
> 赞同：3
> 
> 时间：2012-04-06T11:31:55.270
> 
> 标签：python, django, serialization, uwsgi, msgpack

我在带有 python2.7.2 的 uwsgi 服务器中使用了 msgpack-python 0.1.12 。

运行一段时间后，服务器会抛出很多异常，如下：

文件“_msgpack.pyx”，第 171 行，在 msgpack._msgpack.packb (msgpack/_msgpack.c:2356)

文件“_msgpack.pyx”，第 58 行，在 msgpack._msgpack.Packer 中。**cinit ( msgpack** /_msgpack.c:803)

MemoryError：无法分配内部缓冲区。

任何帮助将不胜感激。

# ios - 在 ios 中将图像转换为卡通

> ID：10042857
> 
> 赞同：20
> 
> 时间：2012-04-06T11:32:19.673
> 
> 标签：ios, xcode, image, image-processing, opengl-es

![在此处输入图像描述](../Images/6ef2cb08416432bd4267e8d0a5a4f51a.png) ios中是否有任何过滤器可以将图像转换为卡通图像，就像上图一样？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-04-06T15:00:23.927

对于比 ImageMagick 更快的解决方案，您可以使用我的[GPUImage](https://github.com/BradLarson/GPUImage)框架中的 GPUImageToonFilter：

![香椿过滤](../Images/67d238464c25f3ed606c4f16c86be586.png)

它将 Sobel 边缘检测与图像的分色相结合，以提供良好的卡通感。正如在这个框架中实现的那样，它的速度足以在来自 iPhone 摄像头的实时视频上运行，并且可能至少比 ImageMagick 中的类似功能快一个数量级。我的框架也比 ImageMagick 更容易与 iOS 项目集成。

如果您希望图像具有更多抽象外观，GPUImageKuwaharaFilter 会将图像转换为油画风格，如我在[此答案](https://stackoverflow.com/a/9402041/19679)中所示。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-06T11:34:32.867

尝试在 iOS 上使用 imagemagick [http://www.imagemagick.org/download/iOS/](http://www.imagemagick.org/download/iOS/) 当然你需要一些时间来为 iOS 使用 imagemagick。但是你也应该看看：[http ://www.fmwconcepts.com/imagemagick/cartoon/index.php](http://www.fmwconcepts.com/imagemagick/cartoon/index.php)

也可能在： [http ://www.imagemagick.org/discourse-server/viewtopic.php?f=1&t=11140&start=0&st=0&sk=t&sd=a](http://www.imagemagick.org/discourse-server/viewtopic.php?f=1&t=11140&start=0&st=0&sk=t&sd=a)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-06T11:41:05.160

iOS 开发库中的这个[Core Image 过滤器部分](http://developer.apple.com/library/ios/#DOCUMENTATION/GraphicsImaging/Conceptual/CoreImaging/ci_tasks/ci_tasks.html#//apple_ref/doc/uid/TP30001185-CH203-TPXREF101)，可能与 Jonas 引用的脚本和一点运气相结合，可能会让你到达你要去的地方。不确定，从未使用过这两种技术。

# android - 如何将 libgdx 渲染对象添加到当前 layout.xml 视图中

> ID：10042858
> 
> 赞同：0
> 
> 时间：2012-04-06T11:32:28.460
> 
> 标签：android

如何将 libgdx 渲染视图添加到当前的 android xml 布局中

例如

线性布局>

```
 <com.libgdxView.obj
            android:id="@+id/sheet"
            android:layout_width="1152dp"
            android:layout_height="576dp"
            android:layout_centerInParent="true" 
            /> 
```

/线性布局>

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-06T11:33:54.350

```
<com.libgdxView.obj.**YourClassName**
        android:id="@+id/sheet"
        android:layout_width="1152dp"
        android:layout_height="576dp"
        android:layout_centerInParent="true" 
        /> 
```

尝试这个

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-07T10:14:44.990

终于找到解决办法了...

// 创建布局 RelativeLayout layout = new RelativeLayout(this);

```
 // Do the stuff that initialize() would do for you
    requestWindowFeature(Window.FEATURE_NO_TITLE);
    getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN, 
                    WindowManager.LayoutParams.FLAG_FULLSCREEN);
    getWindow().clearFlags(WindowManager.LayoutParams.FLAG_FORCE_NOT_FULLSCREEN);

    // Create the libgdx View
    View gameView = initializeForView(new YouSpinMeRound(), false);
    // Add the libgdx view
    layout.addView(gameView); 
```

# objective-c - 滚动 MKMapView 时淡出弹出框

> ID：10042864
> 
> 赞同：0
> 
> 时间：2012-04-06T11:32:50.890
> 
> 标签：objective-c, ios, mkmapview, fade, uipopover

我有一个带有按钮栏的基于 MKMapView 的应用程序，当用户在地图视图上选择注释时，一个按钮可用于显示按钮栏中的弹出框。

弹出框只覆盖地图视图的一部分我想要做的是当用户滚动弹出框后面的地图视图的可见部分时我希望弹出框淡出以显示它后面的地图视图，当用户停止滚动我希望弹出框在一秒钟左右后再次淡入。

我知道我可以定义在弹出窗口结束时我仍然希望能够与之交互的视图，但是处理淡入淡出的最佳方法是什么？

谢谢，马克

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T03:44:10.450

要知道用户何时拖动地图，您需要[MKMapView 上的委托](http://developer.apple.com/library/ios/#documentation/MapKit/Reference/MKMapViewDelegate_Protocol/MKMapViewDelegate/MKMapViewDelegate.html)，并响应 regionWillChangeAnimated 和 regionDidChangeAnimated。文档声称这些可能在拖动过程中被多次调用，但我没有看到这种情况发生。

但是，请参阅[有关这些委托方法未被可靠调用的讨论](https://stackoverflow.com/questions/4118596/mkmapview-regiondidchangeanimated-not-always-called)。

**编辑**：我原来的答案建议使用核心动画来淡化弹出框，但这是不可行的。见评论。即使你得到了 popover 的`contentViewController`, 并得到它的`view`, 并改变了 view 的`alpha`, popover 也会留下阴影，除非你通过层层次结构进行搜索。如果可能的话，`dismiss`用`present`弹出框代替。这可能不如 Core Animation 方便，因为您可能需要`NSTimer`在恢复之前控制延迟。

对于地图视图顶部的其他视图，一旦您知道何时发生拖动，请使用 Core Animation 淡出您的弹出框并再次淡入。调整视图的持续时间、延迟和名称以适应淡化。

```
- (void)mapView:(MKMapView *)mapView regionWillChangeAnimated:(BOOL)animated;
{
    [UIView animateWithDuration:0.25 delay:0.0 options:UIViewAnimationOptionAllowUserInteraction animations:^
    {
        [[self viewOnTopOfMapView] setAlpha:0.0];
    }
    completion:nil];
}

- (void)mapView:(MKMapView *)mapView regionDidChangeAnimated:(BOOL)animated;
{
    [UIView animateWithDuration:0.25 delay:2.0 options:UIViewAnimationOptionAllowUserInteraction animations:^
    {
         [[self viewOnTopOfMapView] setAlpha:1.0];
    }
    completion:nil];
} 
```

# asp.net-mvc - 我可以更改 MVC 用于在我的网格中显示详细数据的文件的名称吗？

> ID：10042866
> 
> 赞同：0
> 
> 时间：2012-04-06T11:32:59.823
> 
> 标签：asp.net-mvc, asp.net-mvc-3, razor

我有以下代码用于在网格中显示详细信息行：

```
 foreach (var item in Model)
        {
            @Html.DisplayFor(model => item)
        } 
```

我的模型是一个集合，`IList<ContentDetail>`它使用

> 显示项目时共享 > DisplayTemplates > ContentDetail.cshtml 文件。

我可以让它使用不同的文件吗？我希望有不止一种显示细节的方式，所以我需要有多个文件。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-06T12:27:53.560

如果您查看 Visual Studio 中的 Intellisense，则`@Html.DisplayFor`and`@Html.DisplayForModel`都可以将 a`string TemplateName`作为重载，其中 TemplateName 是用于呈现该属性或集合的局部视图的名称。正确的语法是：

```
@Html.DisplayForModel("MyTemplateToUse") 
```

或者

```
@Html.DisplayFor(model=>item, "MyTemplateToUse") 
```

这应该允许你使用不同的文件来渲染你的东西。

# android - 在 Eclipse 中使用 SQLite 数据库中的方面进行 Android 编程

> ID：10042868
> 
> 赞同：0
> 
> 时间：2012-04-06T11:33:11.667
> 
> 标签：android, eclipse, sqlite

我编写了一个应用程序，该应用程序利用了作为 Android SDK 一部分的 SQLite 数据库，它们都功能齐全且工作正常。

但是，我并不太确定数据库代码的每个方面的用途，我想知道当我转移到比这个更大的项目（我的第一个 android 项目）时更好地理解。

以下是我不确定它们到底做了什么的部分：

*   帮手
*   语境
*   执行SQL
*   “数据库版本”

我知道它们是如何使用的，我只是不知道如何解释它们的作用以及具体如何？其中之一！

干杯!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-06T12:13:59.040

[http://www.vogella.de/articles/AndroidSQLite/article.html](http://www.vogella.de/articles/AndroidSQLite/article.html)可能会有所帮助

但基本上：

Helper Class - 此类包含您最可能需要的 onCreate 等方法，因此您可以覆盖这些方法

上下文 - 它是应用程序当前状态的上下文，因此当您创建一个新对象时，您可以使用它来获取有关程序其他部分的信息

execSQL - 用于在您的数据库上运行 SQL 语句 myDB.execSQL("Insert into " + TABLE + " VALUES (1,0)");

数据库版本 - 您可以使用它来检查数据库是否是最新的，如果不是使用 onUpdate 方法更新它

# c# - 如何在图像控件中单击 url？

> ID：10042870
> 
> 赞同：-7
> 
> 时间：2012-04-06T11:33:35.457
> 
> 标签：c#, asp.net

我正在使用 itextsharp dll 将 pdf 文档转换为图像，在我要求图像控件内的可点击 url 中，如何单击图像控件内的 url。如何处理这个...

谢谢，西兰

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-06T11:38:05.393

You can have image inside of anchor tag, something like this :

```
<a title="href Title" href="url.html">
  <img src="image.jpeg" alt="image alt desc">
</a> 
```

# google-maps-api-3 - Earth API for Maps v3 中的 parseKML

> ID：10042875
> 
> 赞同：1
> 
> 时间：2012-04-06T11:34:06.253
> 
> 标签：google-maps-api-3

我是地图 v3 的新手，正在为以下项目寻求帮助：

1.  努力在谷歌地图 v3 中找到 parseKML 的示例。代码游乐场上有一个适用于 Earth API 的类似示例。 [http://code.google.com/apis/ajax/playground/#parse_kml](http://code.google.com/apis/ajax/playground/#parse_kml)。我也尝试过 geoxml3 库，但它似乎只支持 URL 输入而不支持实际的 XML 内容。

2.  我有一个从网络覆盖服务中提取点数据的 KML 文件。此服务即时返回 KML，我将其显示在 Earth API 上。我一直在地图 v3 上测试此功能，但它不起作用。我尝试在 maps.google.com 上打开 KML 文件，但只有在切换到地球界面时才会显示内容。这是 Maps v3 API 的限制吗，因为我应该做一些不同的事情。

[http://maps.google.com/maps?q=http:%2F%2Fwww.mde.state.md.us%2Fprograms%2FAir%2FAirQualityMonitoring%2FDocuments%2FDomain3.kml&hl=en&ll=38.369651,-77.064842&spn=3.303117 ,3.724365&sll=37.0625,-95.677068&sspn=52.815565,59.589844&t=m&z=8](http://maps.google.com/maps?q=http:%2F%2Fwww.mde.state.md.us%2Fprograms%2FAir%2FAirQualityMonitoring%2FDocuments%2FDomain3.kml&hl=en&ll=38.369651,-77.064842&spn=3.303117,3.724365&sll=37.0625,-95.677068&sspn=52.815565,59.589844&t=m&z=8)

非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T17:08:43.813

您是否尝试过在交互式采样器上验证您的 KML。如果它可以在 Google Earth 上运行，那么它也应该可以在 google maps 上运行。

[https://kml-samples.googlecode.com/svn/trunk/interactive/index.html](https://kml-samples.googlecode.com/svn/trunk/interactive/index.html)

# php - jquery @mention 使输出成为链接

> ID：10042877
> 
> 赞同：1
> 
> 时间：2012-04-06T11:34:14.193
> 
> 标签：php, javascript, ajax, json, jquery-plugins

嘿伙计们，我正在使用 Hawkee 的这个[插件](http://jsfiddle.net/Hawkee/vq6MH/1/)。就像推特一样，您可以在其中@提及某人。我的输出有问题。这种方法：

```
updateHidden: function() {
        var trigger = this.options.trigger;

        var contents = this.element.val();
        for(var key in this.id_map) {
            var regex = trigger+key;
            regex = regex.replace(/[!@#\$%\^&\*\(\)\+=-\[\]\\';,\.\/\{\}\|":<>\?~_]/g, '\\$&');
            regex = new RegExp(regex, "g");
            //contents = contents.replace(regex, trigger+'['+this.id_map[key]+']');
            //I changed the code above to:
            contents = contents.replace(regex, '@[' + this.id_map[key] +':' + key + ']');
        }
        $(this.options.hidden).val(contents);
    } 
```

上面的代码将被输出到影响其**值**的隐藏标签，其中

*输出：* **@[123:peterwateber]** *//格式为@[]。*

我使用 PHP 作为我的后端。我的问题是**我想将输出转换为**

```
<a href="www.something.com/profile?pid=123">peterwateber</a> 
```

我对这里的代码有很大的问题，因为我不擅长 RegEx。我想出了代码：

```
 //THIS CODE SHOULD GET 1234,peterwateber,88,hi.

    $string = "@[1231:peterwateber] sdfsdfsdfsdfsdfsdf@[88:hi]sddsf";
    preg_match_all("^\[(.*?)\]^",$string,$matches,PREG_PATTERN_ORDER);
    foreach ($matches[1] as $match) {
        echo $match.'<br/>'; //outputs 1231:peterwateber, 88:hi
    }

    preg_match_all("^\[([\w\d]+):(.*?)\]^",$string,$aw,PREG_PATTERN_ORDER);
    foreach ($aw[1] as $match) {
        echo $match.'<br/>'; //sad to say this code outputs the text '1231 and 88'
    } 
```

此外，为了能够获得输出，我有这种形式：

```
<form class="form-horizontal" data-post="request" method="post">
  <div class="control-group boxTextAreaHolder">
    <textarea placeholder="What are you thinking?" class="UITextarea" title="What are you thinking?" name="statuspost" id="statuspost" tag-status="this"></textarea>
    <input type="hidden" name="tags" id="tag-post" />
  </div>
</form> 
```

提交后，输出将被处理到此函数。此函数不允许任何 htmlspecialchars 并检测类似的 url`"http://stackoverflow.com"`

```
private static function validate_text($text = '') {
    // This method is used internally as a FILTER_CALLBACK
    if (mb_strlen($text, 'utf8') < 1)
        return false;
    // Encode all html special characters (<, >, ", & .. etc) and convert
    //$str = nl2br(htmlspecialchars($text));
    $str = htmlspecialchars($text);
    // the new line characters to <br> tags:
    // Remove the new line characters that are left
    $str = str_replace(array(chr(10), chr(13)), '', $str);
    $text = preg_replace('#(script|about|applet|activex|chrome):#is', "\\1:", $str);
    $ret = ' ' . $text;
    $ret = preg_replace("#(^|[\n ])([\w]+?://[\w\#$%&~/.\-;:=,?@\[\]+]*)#is", "\\1<a href=\"\\2\" target=\"_blank\">\\2</a>", $ret);
    $ret = preg_replace("#(^|[\n ])((www|ftp)\.[\w\#$%&~/.\-;:=,?@\[\]+]*)#is", "\\1<a href=\"http://\\2\" target=\"_blank\">\\2</a>", $ret);
    $ret = preg_replace("#(^|[\n ])([a-z0-9&\-_.]+?)@([\w\-]+\.([\w\-\.]+\.)*[\w]+)#i", "\\1<a href=\"mailto:\\2@\\3\">\\2@\\3</a>", $ret);
    //$ret = preg_replace("#^*@([)([0-9-])(])#is", "\\1<a href=\"http://\\2\" target=\"_blank\">\\2</a>", $ret);
    $ret = substr($ret, 1);
    return $ret;
} 
```

现在的问题是我不知道如何将 @[1234:peterwateber] 转换为`**<a href="www.something.com/profile?pid=123">peterwateber</a>**`以及如何从*htmlspecialchars中排除***锚标签**

 ** * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-06T11:40:17.853

正则表达式取 1231 - peterwateber 和 88 - hi 是

```
preg_match_all("#@\[(\w+)\:(\w+)\]#', $str); 
```

这取决于您的输入字符串中有哪些类型的字符。`\w`假设您只有“单词”字符（字母和数字）。

```
$hidden_input = '@[123:web]hello world!';

preg_match('#@\[(\w+)\:(\w+)\]\s*(.*)$#', $hidden_input, $m);

echo '<a href="'.m[1].'">'.$m[2].'</a>'.$m[3];

function validate_text($text = '') {
    // This method is used internally as a FILTER_CALLBACK
    if (mb_strlen($text, 'utf8') < 1)
        return false;
    // Encode all html special characters (<, >, ", & .. etc) and convert
    //$str = nl2br(htmlspecialchars($text));
    $str = htmlspecialchars($text);
    // the new line characters to <br> tags:
    // Remove the new line characters that are left
    $str = str_replace(array(chr(10), chr(13)), '', $str);
    $text = preg_replace('#(script|about|applet|activex|chrome):#is', "\\1:", $str);
    $ret = ' ' . $text;
    $ret = preg_replace("#(^|[\n ])([\w]+?://[\w\#$%&~/.\-;:=,?@\[\]+]*)#is", "\\1<a href=\"\\2\" target=\"_blank\">\\2</a>", $ret);
    $ret = preg_replace("#(^|[\n ])((www|ftp)\.[\w\#$%&~/.\-;:=,?@\[\]+]*)#is", "\\1<a href=\"http://\\2\" target=\"_blank\">\\2</a>", $ret);
    $ret = preg_replace("#(^|[\n ])([a-z0-9&\-_.]+?)@([\w\-]+\.([\w\-\.]+\.)*[\w]+)#i", "\\1<a href=\"mailto:\\2@\\3\">\\2@\\3</a>", $ret);
    //$ret = preg_replace("#^*@([)([0-9-])(])#is", "\\1<a href=\"http://\\2\" target=\"_blank\">\\2</a>", $ret);
    $ret = substr($ret, 1);
    return $ret;
}

var_dump(validate_text('@[123:peterwateber] fsdfsdfdsf')); 
```

在这里`string(30) "@[123:peterwateber] fsdfsdfdsf"`输入代码*

# javascript - 从提交的表单中获取所有输入

> ID：10042880
> 
> 赞同：0
> 
> 时间：2012-04-06T11:34:28.710
> 
> 标签：javascript, jquery

我有一个没有 id 的表单，没有任何类。我需要获取其中的所有输入，我有一个脚本，但无论它们是否在我的表单中，它都会获取所有输入。

当然，我可以在我的表单中添加类、id，但是有没有什么方法可以在不向表单中添加标识符的情况下做我想做的事情？

在我的情况下，它会遍历我页面上的每个输入是合乎逻辑的，但是我如何确保它只会遍历当前表单上的每个输入？

```
$('form').submit(function(e){
    e.preventDefault();

    $('input, textarea').each(function(){
        alert('a'); // Alerts on every input, not just inside this form...
    });
}); 
```

小提琴：http: [//jsfiddle.net/dsN43/](http://jsfiddle.net/dsN43/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-06T11:37:35.783

您可以将`this`上下文（第二个参数）传递给 jQuery 函数以仅在当前元素内进行搜索。

```
$('form').submit(function(e){
    e.preventDefault();

    $('input, textarea', this).each(function(){
        alert('a'); // Alerts on every input inside this form.
    });
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-06T11:36:59.887

```
$('form').submit(function(e){
    e.preventDefault();

    $(this).find('input, textarea').each(function(){
        alert('a'); // Alerts on every input, just inside this form
    });
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-06T11:44:04.777

您可以像这样使用 jQuery [find()](http://api.jquery.com/find/)方法：（最好调试打印元素的 tagName / name 属性，以确保找到正确的）

```
$(document).ready(function(){
    $('form').submit(function(e){
        e.preventDefault();

        $(this).find('input, textarea').each(function(){
            alert(this.nodeName + ' ' + $(this).attr('name'));
        });
    });
});​ 
```

[jsFiddle 示例](http://jsfiddle.net/dsN43/4/)

# java - 使用 Apache POI 和 docx4j 读取 doc 文件

> ID：10042881
> 
> 赞同：0
> 
> 时间：2012-04-06T11:34:32.607
> 
> 标签：java, android, apache-poi, .doc

使用 Apache POI 和 docx4j 读取 doc 文件。

我已经使用 docx4j 甚至使用 Apache POI 阅读了 doc 文件，但问题是当我从中提取数据时它只返回**TEXT**而不是**Images**。甚至我没有任何新段落开始或段落结束的符号..

有什么解决办法吗。。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-06T11:39:36.010

从我读到的问题来看，从文档返回的数据只是文本（字符串类型），这是因为在位图中输入的数据也是一个字符数组。

您可能想要使用一个解析器来识别字符序列并将其呈现为位图扩展。

# android - 禁用和启用的自定义按钮颜色

> ID：10042892
> 
> 赞同：5
> 
> 时间：2012-04-06T11:35:28.423
> 
> 标签：android, layout

我有一个 android 应用程序，它有一个按钮，当它被禁用时，我希望它具有黑色文本和背景，然后在启用它时具有白色书写的绿色背景。

我已经启用和禁用工作，但是如果我更改颜色，无论其状态如何，按钮都会保持不变。

我读过我需要使用自定义选择器来手动设置颜色，这就是我到目前为止所得到的：

res/drawable 中的 continuebutton.xml：（绿色在 /res/values/colors.xml 中声明）

```
<selector xmlns:android="http://schemas.android.com/apk/res/android">
<item 
android:state_enabled="false"
    android.textColor ="@android:color/black"
    android:drawable="@android:color/black" />
<item 
    android:state_enabled="true"
    android.textColor ="@android:color/white"
    android:drawable="@color/green" /> 
```

布局 xml 文件中的 continuebutton：

```
 android:id="@+id/continueButton"
   android:layout_width="200dp"
    android:layout_height="55dp"  android:layout_gravity="center" android:paddingTop="10dp" android:textSize="18dp" 
    android:text="@string/continueButton" android:background="@drawable/continuebutton" /> 
```

我认为我在 continuebutton.xml 文件中做错了，但我不确定如何修复它。

任何帮助将不胜感激！

谢谢

**更新：**

我有背景改变颜色，最后一个问题是解决是无论按钮是禁用还是启用，文本颜色都保持黑色（启用时应该是白色）。

我需要在 res/drawable 中为文本颜色创建一个新的 xml 文件吗？

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T12:05:55.057

移除属性

```
android:src="@drawable/continuebutton" 
```

并使用

```
android:background="@drawable/continuebutton" 
```

在运行时，您可以通过

```
myButton.setBackgroundDrawable(getApplicationContext().getResources().getDrawable(R.drawable.myfirstbg));
myButton.setBackgroundDrawable(getApplicationContext().getResources().getDrawable(R.drawable.mysecondbg)); 
```

如果你想使用背景颜色删除这两个属性`

```
android:src="@drawable/continuebutton"
android:background="@drawable/continuebutton" 
```

并使用此更改背景颜色

```
myButton.setBackgroundColor(Color.BLUE);
myButton.setBackgroundColor(Color.GREEN); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-12-11T10:17:59.817

您必须将文件添加到文件`res/color`夹中。

您有一些可用的“状态”值。对于启用/禁用，请参阅`android:state_enabled`。

mybutton_color.xml 文件

```
<?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android">
    <item android:state_pressed="true" android:color="#fff"/> <!-- pressed -->
    <item android:state_focused="true" android:color="#fff"/> <!-- focused -->
    <item android:state_enabled="false" android:color="#000"/> <!-- disabled -->
    <item android:color="#fff"/> <!-- default -->
</selector> 
```

在您看来使用`android:textColor`

```
<Button
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:text="@string/button_text"
    android:textColor="@color/mybutton_color" /> 
```

正如这里提到的：[https ://developer.android.com/guide/topics/resources/color-list-resource](https://developer.android.com/guide/topics/resources/color-list-resource)

# java - 文本自动更正的动态算法

> ID：10042898
> 
> 赞同：9
> 
> 时间：2012-04-06T11:35:55.050
> 
> 标签：java, dynamic-programming, levenshtein-distance, autocorrect

我正在编写一个自动更正程序，该程序使用[levenshtein 距离](http://en.wikipedia.org/wiki/Levenshtein_distance)根据包含 8000 个单词的特定词典来更正不超过 64 个字符的短语。

字典的每一行都包含一对“Word word_frequency”。我使用 DictionarEntry 对象来存储这些对。类 Dictionar Entry 有两个字段： value ：存储单词字符串 freq ：存储频率 字典存储为 LinkedList。我从标准输入中读取了 64 个字符的字符串。在处理它之前，我删除了所有空格。“Cool lweather”->“Coolweather”我注意到除了计算每个前缀的 levenshtein 距离之外，在由 levenshtein 动态计算的矩阵的最后一行（参见维基百科示例）它返回所有前缀的距离。

函数 lev 返回一个向量，其中包含从第二个参数字符串到所有第一个前缀的 l.distance，包括它自己。

我的问题是我必须遵守一些额外的规则：min lev。distance -> min number of words -> maximum frequency sum -> minimum lexicographic 这可以解释为好像解的总数大于 1 我们取单词数最少的解。如果还有不止一个，我们遵循规则列表。

我正在应用的动态类似于背包动态。我不知道如何实现最小字数规则（最大频率一个很相似）

这是我迄今为止尝试过的失败的输入/输出示例：“保留”答案应该是保留的，我得到的实际上是保留的，我选择了这种方法，因为它更有效。Java 的时间限制为 2 秒。

更新：4 月 7 日。我找到了解决我的问题的方法，但是 cpu 时间太大，所以我需要优化它。它不应高于 2000 毫秒，目前约为 6000 毫秒。所以现在我的主要重点是优化它。

```
 public static String guess (String input, LinkedList<DictionarEntry> Dictionar){
       String curent = new String();
      String output = new String();

      int costMatrix[][][] = new int [input.length()][8000][input.length()];         
     int index[] = new int[128];
     int prev[]= new int[128];
        int d[]=new int  [128];
        int freq[]= new int[128];
        int wcount[]=new int[128];
        String values[] = new String[128];   
        for (int i=0 ; i < 128 ; i++){
                d[i]=127;
                freq[i]=0;
                wcount[i]=1;
                values[i]="";
        }           
     d[0]=0;
     freq[0]=0;

         for (int i = 0 ; i <input.length(); ++i){  

             curent=input.subSequence(i, input.length()).toString();
             long start =System.currentTimeMillis();
              for (int j = 0 ; j < Dictionar.size();++j){

                  costMatrix[i][j]=lev(Dictionar.get(j).value,curent);
                  for(int k=1;k<costMatrix[i][j].length;++k){

                      if(d[i]+costMatrix[i][j][k]<d[i+k]){
                          d[i+k]= d[i]+costMatrix[i][j][k];
                              values[i+k]=values[i]+Dictionar.get(j).value;
                              freq[i+k]=freq[i]+Dictionar.get(j).freq;
                              index[i+k]=j;
                              prev[i+k]=i;
                              wcount[i+k]=wcount[i]+1;
                      }
                       else if ((d[i]+costMatrix[i][j][k])==d[i+k])
                                        if((wcount[i]+1) <wcount[i+k]){
                              values[i+k]=values[i]+Dictionar.get(j).value;
                              freq[i+k]=freq[i]+Dictionar.get(j).freq;
                              index[i+k]=j;
                              prev[i+k]=i;
                              wcount[i+k]=wcount[i]+1;    
                                        }
                                        else if ((wcount[i]+1)==wcount[i+k])
                                         if((freq[i]+Dictionar.get(j).freq)>freq[i+k]){
                                             values[i+k]=values[i]+Dictionar.get(j).value;
                                             freq[i+k]=freq[i]+Dictionar.get(j).freq;
                                             index[i+k]=j;
                                             prev[i+k]=i;
                                             wcount[i+k]=wcount[i]+1;       
                                         }
                                         else if ((freq[i]+Dictionar.get(j).freq)==freq[i+k]){
                                             if((values[i]+Dictionar.get(j).value).compareTo(values[i+k])>0){
                                                 values[i+k]=values[i]+Dictionar.get(j).value;
                                              freq[i+k]=freq[i]+Dictionar.get(j).freq;
                                              index[i+k]=j;
                                              prev[i+k]=i;
                                              wcount[i+k]=wcount[i]+1;  
                                             }
                                         }
                  }     
              }
              long finished =System.currentTimeMillis();
                    System.out.println((finished-start)); 

      output="";

         } 

          int itr=input.length();
                   while(itr!=0){
      output = Dictionar.get(index[itr]).value + " " + output;
      itr=prev[itr]; 
  } 
     return output;
  } 
```

我应该在哪里实施规则以及如何实施（理想情况下以比使用矩阵更有效的方式）？

如果有任何问题或我留下了不清楚的地方，请随时提问

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T13:28:41.977

为什么你不能使用像[Apache Lucene](http://lucene.apache.org/core/)这样的现有库？它支持使用 Levenshtein 距离的[模糊查询。](http://lucene.apache.org/core/old_versioned_docs/versions/3_2_0/api/all/org/apache/lucene/search/FuzzyQuery.html)

除此之外，您可能需要考虑使用[后缀树](http://en.wikipedia.org/wiki/Suffix_tree)来加速部分字符串搜索

# android - 如何从sqlite中获取一条一条记录？

> ID：10042905
> 
> 赞同：1
> 
> 时间：2012-04-06T11:36:45.310
> 
> 标签：android, sqlite, record, fetch

我有两个表“TABLE_EXAM”和“TABLE_QUESTION”。我使用以下代码获取记录，
但它只显示一条记录。*单击下一步*按钮后，我需要一一显示所有记录。请 给我一些参考或提示。
我不明白如何通过单击“下一步”按钮逐个获取记录。
提前致谢。

AppearingExamActivity.java

```
db=new MySQLiteHelper(getBaseContext());
        db.getWritableDatabase();
        examId=db.getExamId(profile);

        final List<ObjectiveWiseQuestion> QuestionWiseProfile= db.getOneQuestion(examId);       

        for (final ObjectiveWiseQuestion cn : QuestionWiseProfile)
        {   
            db=new MySQLiteHelper(getBaseContext());
            db.getWritableDatabase();

            //db.close();
            txtQuestion.setText(cn.getQuestion());
            optionA.setText(cn.getOptionA());
            optionB.setText(cn.getOptionB());
            optionC.setText(cn.getOptionC());
            optionD.setText(cn.getOptionD());   
            correctOption=cn.getCorrectOption();

        }

    }
    btnNext.setOnClickListener(new View.OnClickListener()
    {           
        @Override
        public void onClick(View v)
        {
            try
            {
                db=new MySQLiteHelper(getBaseContext());
                db.getWritableDatabase();
                owq.getCorrectAnswer();
                owq.setExamId(examId);
                //owq.getExamId();
                owq.getQuestionId();
                db.addResultDetails(owq);
                db.close();

            }
            catch(Exception e)
            {
                e.printStackTrace();
            }

        }
    }); 
```

MySQLiteHelper.java

```
public List<ObjectiveWiseQuestion> getOneQuestion(int examId)
{
   // long index = 0;
    List<ObjectiveWiseQuestion>LocwiseProfileList=new ArrayList<ObjectiveWiseQuestion>();
     db = getReadableDatabase();

     String selectQuery=("select * from question where exam_id ='"+ examId +"'");
        Cursor cursor = db.rawQuery(selectQuery, null);

    if (cursor.moveToFirst())
    {
        do {
            ObjectiveWiseQuestion owq= new ObjectiveWiseQuestion();

            owq.setQuestionId(cursor.getInt(0));
            owq.setExamId(cursor.getInt(1));
            owq.setQuestion(cursor.getString(2));
            owq.setOptionA(cursor.getString(3));
            owq.setOptionB(cursor.getString(4));
            owq.setOptionC(cursor.getString(5));
            owq.setOptionD(cursor.getString(6));
            owq.setCorrectOption(cursor.getString(7));

            LocwiseProfileList.add(owq);
        } while(cursor.moveToNext());
        db.close();

    }

    return LocwiseProfileList;
} 
```

怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-06T11:39:49.123

在按钮上单击只是处理`cursor`位置就是这样。

内置光标具有移动其位置的能力。你有`moveNext()`, `movePrevious()`, `moveToPosition()`, `moveToFirst()`, `moveToLast()`. 除此之外，它还具有`getCount()`提供记录总数的功能。

[http://developer.android.com/reference/android/database/Cursor.html](http://developer.android.com/reference/android/database/Cursor.html)

```
String selectQuery=("select * from question where exam_id ='"+ examId +"'");
        Cursor cursor = db.rawQuery(selectQuery, null);

btnNext.setOnClickListener(new View.OnClickListener()
    {           
        @Override
        public void onClick(View v)
        {
            try
            {
               cursor.moveNext();
               //show on UI with cursor value
           }

        catch(Exception e)
        {
            e.printStackTrace();
        }

    }
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-06T11:45:55.017

这是您必须在 java 文件中编写的代码。

```
Cursor mCursor=null;
mCursor = DatabaseObject.getDefault(); // 
if (mCursor.getCount() >= 1) {
                mCursor.moveToFirst();
                try {
                    for (int i = 0; i < mCursor.getCount(); i++) {
                        profileName.setText(mCursor.getString(0).toString()); // You can Do your work Here 
                        firstName.setText(mCursor.getString(1).toString());
                        lastName.setText(mCursor.getString(2).toString());
                        email.setText(mCursor.getString(3).toString());

                     }
            }
} 
```

这是数据库的功能

```
public Cursor getDefault() throws SQLException {

    String getRT = "SELECT * from "+ PROFILE_TABLE+";";
    Cursor mCur = sqldb.rawQuery(getRT, null);
    return mCur;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-06T12:43:23.163

第一次触发查询

```
public Cursor Value_Of_Data(String string) throws SQLException {
        // TODO Auto-generated method stub

         Cursor mCursor = db.query(Normal_Scoring,
                  new String[] {
Columns1,Columns2,Columns3,Columns4,Columns5,Columns1
},
                  Game_Date +"<='" + string + "'",
                  null,null,null,null,null);

        if (mCursor != null)
        {
        mCursor.moveToFirst();
        }
        return mCursor;
    } 
```

现在接收端收到喜欢

```
 ArrayList<String> row1 = new ArrayList<String>();

          ArrayList<String> row2 = new ArrayList<String>();

          ArrayList<String> row3 = new ArrayList<String>();

          ArrayList<String> row4 = new ArrayList<String>();

          ArrayList<String> row5 = new ArrayList<String>();

          ArrayList<String> row6 = new ArrayList<String>();

    try{
            cursor1 = db.Nomal_Score_Data(dateFormat.format(dateis));
            cursor1.moveToFirst();   
            startManagingCursor(cursor1);

            for(int i=0;i<cursor1.getCount();i++){

            String rec1 = cursor1.getString(cursor1.getColumnIndex
                                ("Columns1"));

            String rec2 = cursor1.getString(cursor1.getColumnIndex
                ("Columns2"));

            String rec3 = cursor1.getString(cursor1.getColumnIndex
                ("Columns3"));

            String rec4 = cursor1.getString(cursor1.getColumnIndex
                ("Columns4"));

            String rec5 = cursor1.getString(cursor1.getColumnIndex
                    ("Columns5"));

            String rec6 = cursor1.getString(cursor1.getColumnIndex
                       ("Columns6"));

          row1.add(rec1);  

         row12.add(rec2);

          row3.add(rec3);

         row4.add(rec4);

         row5.add(rec5);

          row6.add(rec6);

}
        catch(Exception e)
        {
            Log.e("ERROR OF FETCHING ", e.toString());
            e.printStackTrace();

        } 
```

初始化一个计数器

```
int count = 0 ; 
```

和按钮点击显示像

```
@Override
    public void onClick(View v) {
        // TODO Auto-generated method stub

        switch(v.getId())
        {
        case R.id.goNext :

            // display

       text1.setText(row1.get(count));
       text2.setText(row2.get(count));
       text3.setText(row3.get(count));
       text4.setText(row4.get(count));
       text5.setText(row5.get(count));
       text6.setText(row6.get(count));

   count++;

             }

                     break; 

case R.id.goPrev :

            Toast.makeText(this, "Button Clicked goPrev",
                    Toast.LENGTH_LONG).show();

       text1.setText(row1.get(count));
       text2.setText(row2.get(count));
       text3.setText(row3.get(count));
       text4.setText(row4.get(count));
       text5.setText(row5.get(count));
       text6.setText(row6.get(count));

         count--;

                     break; 

}
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-21T09:09:42.197

最后我得到了答案...我计算记录数，然后只减 1。如果我有 10 条记录，那么我设置 counter=10 并在每次下次单击时将其减 1。
这是对我有帮助的简单功能。

```
public List<ObjectiveWiseQuestion> getOneByOneQuestion(int examId, int questionId)
{      
    List<ObjectiveWiseQuestion>LocwiseProfileList=new ArrayList<ObjectiveWiseQuestion>();
     db = getWritableDatabase(); 

     String selectQuery=("select * from question where exam_id ='" + examId + "' and question_id ='" + questionId +"'" );
        Cursor cursor = db.rawQuery(selectQuery, null);

    if (cursor.moveToFirst())
    {
        do {
            ObjectiveWiseQuestion owq= new ObjectiveWiseQuestion();

            owq.setQuestionId(cursor.getInt(0));
            owq.setExamId(cursor.getInt(1));
            owq.setQuestion(cursor.getString(2));
            owq.setOptionA(cursor.getString(3));
            owq.setOptionB(cursor.getString(4));
            owq.setOptionC(cursor.getString(5));
            owq.setOptionD(cursor.getString(6));
            owq.setCorrectOption(cursor.getString(7));

            LocwiseProfileList.add(owq);
        } while(cursor.moveToNext());
        cursor.moveToFirst();
        db.close();

    }

    return LocwiseProfileList;
} 
```

# bash - sed 删除第三次出现的分隔符

> ID：10042911
> 
> 赞同：1
> 
> 时间：2012-04-06T11:37:00.807
> 
> 标签：bash, sed

输入文件如下所示：

```
Jan 23 14:57:16 TCP 217.79.188.21:80 in 
```

我试过：

```
sed 's/:[^:]* in/ in/' 
```

但它不断删除 :16 而不是删除 :80

我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-06T11:40:01.543

尝试同时匹配 IP 和端口，并将其替换为仅 IP。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-06T11:54:35.527

```
sed -E -e 's/:[[:digit:]]{1,3} in/ in/' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-06T16:56:40.707

这可能对您有用：

```
echo "Jan 23 14:57:16 TCP 217.79.188.21:80 in" | sed 's/:..//3'
Jan 23 14:57:16 TCP 217.79.188.21 in 
```

或（更有可能是端口号可能是任何数字）：

```
echo "Jan 23 14:57:16 TCP 217.79.188.21:80 in" | sed 's/:[^ ]*//2'
Jan 23 14:57:16 TCP 217.79.188.21 in 
```

# c# - 当方法返回void时，是否与任务相同？

> ID：10042912
> 
> 赞同：8
> 
> 时间：2012-04-06T11:37:01.940
> 
> 标签：c#, asynchronous, async-ctp

我正在尝试异步 CTP，4.5 版允许使用异步方法而无需编写 Begin/End 方法。

我的第一个探测是执行一个返回 void 的异步方法。我看到了一些示例并执行以下操作：

```
private void btnAsync01_Click(object sender, RoutedEventArgs e)
{
    UpdateTxtLog("click button: " + System.DateTime.Now);
    method01Async();
    UpdateTxtLog("after ethod01Async: " + System.DateTime.Now);
}

private async void method01Async()
{
    await TaskEx.Run(() =>
    {
        UpdateTxtLog("Enter method01Async: " + System.DateTime.Now);
        Thread.Sleep(10000);
        UpdateTxtLog("exit method01Async: " + System.DateTime.Now);
    });
} 
```

在我的 WPF 项目中，我有一个用于查看结果的文本框和一个执行异步方法的按钮。

在异步方法中，我使用了等待，因为该方法是异步的，所以需要使用 TasEx.Run 来创建一个执行代码的新线程。

我的疑问就在这一点上。在我看到的几个关于如何创建返回 void 的异步方法的示例中，使用这种方式，Task.Run 或 TaskEx.Run。

如果我没记错的话，Task.Run 创建一个新线程来执行该方法。那为什么要使用异步方法，如果用Task，创建一个新线程，我得到我想要的，而不是阻塞主线程？

另外，如果异步方法访问一些共享变量，我必须小心并发，对吧？所以我不知道使用异步方法的好处，至少在这种情况下。

事实上，我在没有 async 和 await 的情况下使用相同的代码，结果是一样的，主程序没有阻塞，一切都按我的预期工作。方法是这样的：

```
private void method01Async()
{
    TaskEx.Run(() =>
    {
        UpdateTxtLog("Enter method01Async: " + System.DateTime.Now);
        Thread.Sleep(10000);
        UpdateTxtLog("Exit method01Async: " + System.DateTime.Now);
    });
} 
```

我的问题是，当方法返回 void 时，这是使用异步的正确方法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-06T14:34:30.867

> 如果我没记错的话，Task.Run 创建一个新线程来执行该方法。

不完全是。`Task.Run()`将在不同于 UI 线程的线程上运行代码（至少使用 default `TaskScheduler`）。但在大多数情况下它实际上不会*创建*一个新线程，它会重用`ThreadPool`.

> 那为什么要使用异步方法，如果用Task，创建一个新线程，我得到我想要的，而不是阻塞主线程？

在`async`UI 应用程序的上下文中，重点是能够在异步操作完成*后轻松地在 UI 线程上执行一些代码。*

所以，如果你让你的`method01Async`“等待”，也就是说，让它返回一个`Task`：

```
private async Task method01Async()
{
    await Task.Run(/* whatever */);
} 
```

然后，您可以从该`btnAsync01_Click`方法中等待它，如果您将其设为 `async:

```
private async void btnAsync01_Click(object sender, RoutedEventArgs e)
{
    UpdateTxtLog("click button: " + System.DateTime.Now);
    await method01Async();
    UpdateTxtLog("after method01Async: " + System.DateTime.Now);
} 
```

这样，方法的最后一行只有在`Task`in`method01Async`完成执行后才会执行。它将在 UI 线程上执行。

在 .Net 4.0 中，您可以使用`ContinueWith()`and实现类似的效果`Dispatcher.Invoke()`：

```
private void btnAsync01_Click(object sender, RoutedEventArgs e)
{
    UpdateTxtLog("click button: " + System.DateTime.Now);
    method01Async().ContinueWith(() =>
        Dispatcher.Invoke(
            new Action(() =>
                UpdateTxtLog("after method01Async: " + System.DateTime.Now)));
} 
```

我相信你会同意这更混乱且可读性更低。

> 另外，如果异步方法访问一些共享变量，我必须小心并发，对吧？

是的，你是对的。

> 事实上，我在没有 async 和 await 的情况下使用相同的代码，结果是一样的，主程序没有阻塞，一切都按我的预期工作。

结果肯定不是我认为你的代码应该做的。, 的最后一行`btnAsync01_Click`将在“method01Async 之后”执行，但它不会等到`Task`该方法中的启动完成。

* * *

作为旁注，没有必要`async`在你的`method01Async`. 直接返回`Task`（或者不返回，如果你想保持它`void`-returning），将同样工作：

```
private Task method01Async()
{
    return Task.Run(/* whatever */);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-06T12:53:19.883

在这两种情况下，您都没有真正使用异步，因为您没有等待原始呼叫。这是你应该如何做的：

```
private async void btnAsync01_Click(object sender, RoutedEventArgs e)
{
    UpdateTxtLog("click button: " + System.DateTime.Now);
    await method01Async();
    UpdateTxtLog("after ethod01Async: " + System.DateTime.Now);
}

private async Task method01Async()
{
    return await TaskEx.Run(() =>
    {
        UpdateTxtLog("Enter method01Async: " + System.DateTime.Now);
        Thread.Sleep(10000);
        UpdateTxtLog("exit method01Async: " + System.DateTime.Now);
    });
} 
```

一旦你把它改成这个（重要的部分是`await method01Async()`在你的按钮点击事件中，它会在它退出后跳回到那里，并且你的“在 ethod01Async 之后：”文本日志应该显示一个十秒的延迟，就像你的“退出 method01Async”日志一样在`method01Async`方法中。

# c# - how to create desktop sharing web conference through web application?

> ID：10042913
> 
> 赞同：-1
> 
> 时间：2012-04-06T11:37:06.983
> 
> 标签：c#

> **Possible Duplicate:**
> [is it possible to share desktop screen on web site through .net c#?](https://stackoverflow.com/questions/10042573/is-it-possible-to-share-desktop-screen-on-web-site-through-net-c)

I want to create a desktop sharing web conference like application where one user will demonstrate anything on its desktop and others will view what he is doing. Is any one having detailed steps about it?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-06T11:47:27.110

我认为您的问题是含糊其辞的是您还需要从事的项目吗？如果是这样，你可以做什么：

1 - 使应用程序初始化与另一台计算机的连接（都运行相同的应用程序）
2 - 使应用程序为运行的两个客户端（处理程序和查看器）分配不同的角色
3 - 使应用程序将当前屏幕的位图渲染到服务器目录（你想使用大约 15 fps） 4 - 创建一个方法来检查这些位图是否由查看器角色
呈现 5 - 如果成功呈现，则删除保存的位图。

这是一个占用大量 CPU 和带宽的解决方案，您可能希望在位图中添加一些过滤器以防止出现大文件。

# django - Django Admin 站点显示在 apache 和 django 服务器上有所不同

> ID：10042914
> 
> 赞同：0
> 
> 时间：2012-04-06T11:37:08.760
> 
> 标签：django, django-1.4

我最近安装了 Django-1.4。虽然 Django 服务器上的管理页面显示符合预期，但 apache 上的显示似乎令人惊讶。Apache 只在网页上显示文本，为什么？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-06T12:12:18.887

管理静态仅在 devserver 上自动提供。在生产中，遵循[The doc](https://docs.djangoproject.com/en/1.4/howto/deployment/wsgi/modwsgi/#serving-the-admin-files)。ADMIN_MEDIA_PREFIX 在 Django 1.4 中已被弃用，请改用 STATIC_ROOT。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-06T13:26:48.770

我会尝试为媒体文件设置别名。对我来说，这比符号链接更清晰、更明确。

# python - 在 Windows 上使用 Python 2.5 的 Pytables 2.3.1：错误 - 找不到本地 hdf5 安装

> ID：10042915
> 
> 赞同：1
> 
> 时间：2012-04-06T11:37:13.077
> 
> 标签：python, pytables

我正在尝试使用 Python 2.5 在 Windows XP 上安装 PyTables 2.3.1。我收到以下错误：

```
Could not find a local HDF5 installation.
You may need to explicitly state where your local HDF5 
headers and library can be found by setting the HDF5_DIR 
environment variable or by using the --hdf5 command-line option. 
```

我对 HDF5 库的安装有点困惑。`HDF5188-win32-shared.zip`我下载了从[HDF5 站点](http://www.hdfgroup.org/HDF5/release/obtain5.html)调用的 Windows 二进制文件，并运行了 zip 存档中的 .exe 文件。我现在在此文件夹中安装了 HDF5 库：

```
C:\Program Files\HDF Group\HDF5\1.8.8 
```

我已经尝试创建一个名为 HDF5_DIR 的环境变量指向这个文件夹，但仍然没有乐趣。我显然没有安装正确的 HDF5 库，但我不知道应该做什么。

请问有人有什么建议吗？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-06T12:16:33.003

从[文档](http://pytables.github.com/usersguide/installation.html#binaryinstallationdescr)中您可以尝试：放置 DLL 库（hdf5dll.dll 以及可选的 lzo1.dll 和 bzip2.dll）

> 在 PATH 环境变量中列出的目录中

. 如果找不到库，setup.py 安装程序将打印出一个警告。

定位

> hdf5dll.dll

并确保 dir containsig 它位于 PATH var 中，或者您可以尝试 --hdf5=path/to/ 命令

# php - 致命错误：使用 CakePHP 在非对象上调用成员函数 truncate()

> ID：10042917
> 
> 赞同：0
> 
> 时间：2012-04-06T11:37:21.337
> 
> 标签：php, cakephp, fatal-error

> **可能重复：**
> [调用非对象上的成员函数](https://stackoverflow.com/questions/54566/call-to-a-member-function-on-a-non-object)

这行代码有什么问题？

`$this->Post->saveField('slug', $this->Text->truncate(Inflector::slug($post['Post']['title']),25,array('exact'=>false,'html'=>false,'ending'=>'')));`

因为它给了我错误：`Fatal error: Call to a member function truncate() on a non-object in /nfs/c03/h01/mnt/12345/domains/jazz.com/html/app/Controller/PostsController.php on line 161`

我应该使用别的东西吗？像`$this->request->data['title'];`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T11:44:53.333

该错误意味着它`$this->Text`不是一个对象，并且您不能在其上调用`truncate`（或任何其他）方法。

`Text`应该是模特？如果你想在一个控制器中使用多个模型，你可以将它添加到`uses`数组中：

```
var $uses =  array('Post','Text'); 
```

如果它是一个组件，您应该将它添加到`components`数组中。

`String`如果您正在寻找`truncate`TextHelper 提供的方法，则可以使用该类。请参阅`String::truncate`此处给出的示例：http: [//book.cakephp.org/2.0/en/core-utility-libraries/string.html](http://book.cakephp.org/2.0/en/core-utility-libraries/string.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-06T11:44:23.533

只需添加一个条件来检查 $this->Text 是否可用

```
if ($this->Text) {
       $this->Post->saveField('slug', $this->Text->truncate(Inflector::slug($post['Post']['title']),25,array('exact'=>false,'html'=>false,'ending'=>'')));
} 
```

# java - java中具有动态参与方数量的障碍

> ID：10042918
> 
> 赞同：2
> 
> 时间：2012-04-06T11:37:21.720
> 
> 标签：java, java.util.concurrent, barrier

我想要一个在java中具有动态数量的参与者的障碍。我遇到了[Phaser](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/Phaser.html)，但这个解决方案适用于我无法使用的 java 7。

java 6是否有一些解决方案。我应该如何满足具有可变数量服务员的障碍的需求？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T16:50:45.040

您真的想使用移相器。您可以在 Java 6 中使用 Phaser 的反向端口。从[JSR 166y 反向端口下载它](http://gee.cs.oswego.edu/dl/jsr166/dist/jsr166y.jar)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-06T11:42:59.153

CyclicBarrier 怎么样？

就像Phaser中所说的：

> 功能类似于 CyclicBarrier 和 CountDownLatch，但支持更灵活的使用。

这些类中是否缺少一些您需要的功能？

编辑：经过一番谷歌搜索后，我没有看到这样的内容，不知道您的问题有多复杂，以及您应该如何同步屏障中的所有成员，但您可以实现一些与 CyclicBarrier 层次结构同步的简单方

# c - 宏参数的名称可以是关键字吗？

> ID：10042919
> 
> 赞同：2
> 
> 时间：2012-04-06T11:37:23.317
> 
> 标签：c, macros, keyword

我在编写代码时发现了一些有趣的东西。我在我的代码中定义了一个宏，并且不小心将关键字`int`用作该宏的参数的变量名。代码工作得很好，但我有点惊讶。我读过 C 中的关键字是保留字，不能用作变量名。

这是我的代码：

```
#include <stdio.h>

#define PRINT(int) printf("%d",int)

int main()
{
    int x=2;
    PRINT(x);
    return 0;
} 
```

谁能解释我为什么它工作正常？关键字是保留的，不能用作 C 中的变量名，或者这是 C 中宏的一些例外，这不是真的吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-06T11:38:42.880

在这种情况下，`int`is 不是一个变量（更正确：*参数*）名称，因为当然`PRINT`也不是一个函数——它是一个预处理器宏。

无论您作为宏定义的一部分编写的任何内容都只会被预处理器查看。到编译器看到已处理的源代码时，`"int"`名称就没有了。

这类似于函数的形式参数发生的情况：编译器可以看到这些名称，但是在完成源代码之后，编译代码中就没有它们的痕迹（因此您需要在调试器中加载调试符号以“获取此信息返回")。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-06T11:38:57.103

在`#define`C 编译器看到它之前，它被预处理器替换。编译器本身看到的是这样的：

```
int main()
{
int x=2;
printf("%s",x);
return 0;
} 
```

这是有效的 C 代码。使用关键字作为变量名确实会产生错误：

```
int main()
{
int float=2;
printf("%s",float);
return 0;
} 
```

这不会编译。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-06T11:38:52.063

在预处理阶段，关键字不存在，仅被视为普通标识符。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-06T11:46:14.173

C 标准第 5.1.1.2 节定义了 C 翻译的九个阶段。预处理阶段是第 4 阶段；关键字仅在第 7 阶段被识别；在该阶段之前，所有关键字都被视为常规*预处理标记*。有关详细信息，请参阅[标准](http://www.open-std.org/jtc1/sc22/wg14/www/docs/n1124.pdf)。

> 关键字：自动中断案例之一 [...]
> 
> 上述标记（区分大小写）保留（在翻译阶段 7 和 8 中）用作关键字，否则不得使用。

# android - 检查工作的 AsyncTask

> ID：10042922
> 
> 赞同：4
> 
> 时间：2012-04-06T11:37:36.563
> 
> 标签：android, multithreading, android-asynctask

我在另一个线程中有一些工作要做（通过doingAsyncTask）。当用户单击按钮时工作开始。但同时只有一个doingAsyncTask对象必须做这个工作，如果doingAsyncTask正在工作，那么点击按钮不能创建doingAsyncTask的新对象并执行它，它必须等到工作完成。我怎样才能检查它？

```
public class SearchActivity extends Activity {
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        //....
    }

    public void onclickButton(View view) {
        new doingAsyncTask().execute();
    }

    public class doingAsyncTask extends AsyncTask<Void, Void, Void> {
    protected Void doInBackground(Void... unused) {
        //doing something
        return(null);
    }

    protected void onProgressUpdate() {
    }
    protected void onPreExecute() {
    }
    protected void onPostExecute() {
    }
   }
} 
```

**解决** 了所有问题，它对我有用

```
 if(task.getStatus() == AsyncTask.Status.FINISHED)
            task=new ProgressBarShow();
        if(task.getStatus() == AsyncTask.Status.PENDING){
            //task=new ProgressBarShow();
            task.execute();
        } 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-06T11:42:08.360

检查此[AsyncTask.Status](http://developer.android.com/reference/android/os/AsyncTask.Status.html)

```
AsyncTask.Status    FINISHED    Indicates that onPostExecute(Result) has finished. 
AsyncTask.Status    PENDING     Indicates that the task has not been executed yet. 
AsyncTask.Status    RUNNING     Indicates that the task is running. 
```

**代码：**

```
if (doingAsyncTask().getStatus().equals(AsyncTask.Status.FINISHED))
     doingAsyncTask().execute();
else 
```

**编辑：**

```
public class SearchActivity extends Activity {
    doingAsyncTask asyncTask; 

    public void onCreate(Bundle savedInstanceState) {
       super.onCreate(savedInstanceState);             
       // ...
       asyncTask = new doingAsyncTask();   
    }
    public void onclickButton(View view) {
         if(ayncTask.getStatus().equals(AsyncTask.Status.FINISHED) || ayncTask.getStatus().equals(AsyncTask.Status.PENDING)) {
             asyncTask.execute();
         }
         else {
             // do something
         }
    }
    // ...
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-06T11:42:06.470

您可以检查 AsyncTask => [AsyncTask.Status的状态](http://developer.android.com/reference/android/os/AsyncTask.Status.html)

例如：

```
 myAsyncTask mtask = new myAsyncTask();
    mtask.execute();

   // write this wherever you want to check status
   if(mtask.getStatus() == AsyncTask.Status.FINISHED){
        // My AsyncTask is done and onPostExecute was called
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-06T11:43:20.787

在设置新任务之前使用AsyncTask 的**[getStatus()](http://developer.android.com/reference/android/os/AsyncTask.html#getStatus%28%29)**检查其状态

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-06T11:53:05.687

代码可能是这样的：

```
doingAsyncTask task;
public void onclickButton(View view) {
    if(task==null){
        task=new doingAsyncTask();
        task.execute();
    }
    else if(task.Status!=RUNNING){
        task=new doingAsyncTask();
        task.execute();
    }
} 
```

# java - junit testcase for test returning object

> ID：10042932
> 
> 赞同：0
> 
> 时间：2012-04-06T11:38:29.040
> 
> 标签：java, junit, junit4

I have a method in which the return type is Object. How can I create testcase for this? How to mention the result should be a object?

My exact method is here.

```
public Object getData(String type, String expression)
{
    // do something here
    return Object;
} 
```

How can I write a testcase for this method?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-06T13:06:09.330

您可以测试 Object 不为空。

对象是否属于您正在寻找的正确类型的测试。

或者...

让它返回一个具体的类。

保罗

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-06T11:55:31.903

最好重命名您的方法 createXXX 并给它一个更有趣的返回类型。然后您可以构建一些测试来构建特定类型的特定对象并测试它是否符合您的期望。

所有这些工厂方法都可以共享一个可以单独测试的通用内核。

对每种构建的类型都有一个特定的方法意味着对每个方法都有一个特定的测试，这对每个人来说都会更清楚，也更容易测试。

如果您的所有返回类型都具有可用于测试的共同行为，则将其放入接口并将返回类型设置为接口。

总而言之，拥有一个返回类型为 object 的方法会迫使每个调用者对结果进行子类化，或多或少地了解方法的内部工作，这是一个坏主意：当服务实习生发生变化时，客户将不得不改变。您最好提供更稳定的东西，例如返回具有给定接口的对象以与之交互。

# c# - C#- XML 文档在其他项目中不可用

> ID：10042934
> 
> 赞同：5
> 
> 时间：2012-04-06T11:38:37.140
> 
> 标签：c#, xml, comments

我正在开发一个 ASP.NET 网站。在解决方案中，我添加了另一个用作数据访问层 (DAL) 的项目。每当我构建项目时，dll 文件都会刷新为网站项目中的新文件。我在 DAL 的所有类中的每个方法之前都放置了 XML 注释。但是当我键入该层的方法名称时，它们不可用。但是，它们在他们自己的项目中是可见的。XML 文档是否只是内部的？如果是这样，我怎样才能看到其他类的 XML 注释？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-06T11:57:16.863

首先，您需要检查 XML 文档文件中的输出构建设置。（您项目的属性）。然后，您将生成另一个项目在您添加对它的引用时将使用的 xml 文档。

您可能有两种添加参考的方法。

1.）通过选择“添加参考”然后“项目”

*   这种方法应该可以工作......当您更新评论时，其他项目应该自动获取更改。

2.) 通过选择“添加参考”然后“浏览”...

*   如果您这样做了，那么每次 XML 文件更改时，您都需要卸载并重新加载项目以获取更改，或者您可以重新启动 Visual Studio，这将完成同样的事情。

**您应该使用版本 1... 添加参考 - >项目**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-09-24T05:29:26.870

如果您的项目文件和引用的项目文件在

```
<Project Sdk="Microsoft.NET.Sdk"> 
```

尝试将 GenerateDocumentationFile 添加到引用的项目

```
<PropertyGroup>
    <GenerateDocumentationFile>true</GenerateDocumentationFile>
</PropertyGroup> 
```

# json - asp.net webservice返回json类型

> ID：10042935
> 
> 赞同：0
> 
> 时间：2012-04-06T11:38:37.470
> 
> 标签：json, web-services

使用带有方法的 asp.net webservice：

```
[WebMethod(EnableSession = true)]
[ScriptMethod(ResponseFormat = ResponseFormat.Json)]
public List<MyObject> GetList()
{
    ....return new List of MyObject{ x =  .., y = .. , z = ..};
} 
```

使用该服务的客户端使用 JQuery Ajax 调用运行良好

```
$.ajax({
        type: "POST",
        url: url,
        data: data == null ? "{}" : data,
        contentType: "application/json; charset=utf-8",
        dataType: "json",
 ..... and so on ... 
```

但是对于萤火虫，我注意到响应是：

`{"d":[{"__type":"Common.MyObject","z":"2000","x":1500,"y":1000,"a":"0"},{"__type":"Common.MyObject","z":"2000","x":1455,"y":1199.57,"a":"1"} ...... and so on ]}`

1) 问题是为什么我需要这个 ""__type":"Common.MyObject" ？
2) 我想删除它，所以响应会更小，我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-06T14:47:33.100

当我像这样配置 Web 服务时，它对我来说很好：

```
[ServiceContract]
[AspNetCompatibilityRequirements(RequirementsMode = AspNetCompatibilityRequirementsMode.Allowed)]
[ServiceBehavior(InstanceContextMode = InstanceContextMode.PerCall)]
class MyObjectService
{
    [OperationContract]
    [WebGet(UriTemplate = "MyObjects", ResponseFormat = WebMessageFormat.Json)]
    public IEnumerable<MyObect> GetAlMylObjects()
    {
        MyObjectMgr objectMgr = new MyObjectMgr();
        return objectMgr.GetAll();
    }

} 
```

这是 MyObjectMgr 的代码：

```
public class MyObjectMgr
{
    public List<MyObect> GetAll()
    {
        List<MyObect> objList = new List<MyObect>();
        objList.Add(new MyObect { x = 1, y = 21, z = 33 });
        objList.Add(new MyObect { x = 4, y = 51, z = 66 });
        return objList;

    }
} 
```

这是响应的样子：

```
[{"x":1,"y":21,"z":33},{"x":4,"y":51,"z":66}] 
```

我使用的是 GET 而不是 POST，但我认为这不会有任何区别。如果您只是检索想要使用 GET 的信息，通常用于 REST API。

我已经停止将 WCF 用于 RESTful Web 服务，因为它难以配置且易怒。我已经开始使用[ASP.NET Web API](http://www.asp.net/web-api)，它是即将发布的 MVC 4.0 版本的一部分。设置 RESTful API 更容易。您不必指定在服务中是需要 JSON 还是 XML。客户端可以在 HTTP 标头中指定它，这就是它应该如何工作的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-07T22:21:07.437

好的，我使用 httpmodule 和 regex 来更改响应

[http模块： http](http://bloggingabout.net/blogs/adelkhalil/archive/2009/08/14/cross-domain-jsonp-with-jquery-call-step-by-step-guide.aspx#525423) ://bloggingabout.net/blogs/adelkhalil/archive/2009/08/14/cross-domain-jsonp-with-jquery-call-step-by-step-guide.aspx#525423

正则表达式： [https ://stackoverflow.com/a/6349813/1218546](https://stackoverflow.com/a/6349813/1218546)

它适用于所有服务方法

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-19T21:39:18.243

嘿抱歉回复晚了！我最近遇到了类似的问题。通过执行以下操作，我能够在不重写我的服务的情况下修复它：

*   转到您的 web.config 文件

*   定位行为。

    在我的例子中，行为被称为*“Project1.Services.DataTableAspNetAjaxBehavior”*，这可以在下面找到 `<system.serviceModel>`
    `<behaviors>`
    `<endpointBehaviors>`

图片： ![在此处输入图像描述](../Images/636356dc69968f9ec3295a35d5dc5ea3.png)

*   最后，添加`<webHttp defaultOutgoingResponseFormat="Json" />` 到您的行为中。

（注意：如果要保留包装器，请使用 add:
`<webHttp defaultBodyStyle="Wrapped" defaultOutgoingResponseFormat="Json" />`
或
`<webHttp defaultBodyStyle="WrappedResponse" defaultOutgoingResponseFormat="Json" />`

我希望这有帮助！快乐编码！

# active-directory - 如何在 Microsoft Active Directory 上的 OU 上进行 LDAP 搜索？

> ID：10042942
> 
> 赞同：1
> 
> 时间：2012-04-06T11:38:55.117
> 
> 标签：active-directory, ldap, ldap-query

我试图返回 LDAP 搜索，`OU=groups`因为我没有得到预期的结果（通常我什么也得不到），所以应该返回活动目录上的所有条目。

筛选：`(ou:dn:=groups)`

我知道通过正常方式搜索 DN 是不可能的，但在文件管理器中获取此信息的正确方法仍然是什么，一种适用于 Active Directory 的方法。

参考：

*   [如何进行 LDAP 查询，只返回所有级别的 OU=Groups 组？](https://stackoverflow.com/questions/10035030/how-can-i-make-a-ldap-query-that-returns-only-groups-having-ou-groups-from-all-l#comment12846551_10035030)
*   [http://confluence.atlassian.com/display/DEV/How+to+write+LDAP+search+filters](http://confluence.atlassian.com/display/DEV/How+to+write+LDAP+search+filters)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-06T12:25:16.217

我不认为你可以在一次搜索中做到这一点。您可以先查找名称为 OU=groups 的所有组织单位，然后搜索每个 OU。

它存在[ExtensibleMatch](http://ldapwiki.willeke.com/wiki/ExtensibleMatch)允许你想做的事情，但它在 Active-Directory 中[不受支持。](http://msdn.microsoft.com/en-us/library/cc223241%28v=prot.10%29.aspx)

这是[Microsft 支持的搜索过滤器语法的参考表格](http://msdn.microsoft.com/en-us/library/aa746475%28v=vs.85%29.aspx)

# c# - Set PDF table cell width

> ID：10042950
> 
> 赞同：0
> 
> 时间：2012-04-06T11:39:41.850
> 
> 标签：c#, itextsharp

![enter image description here](../Images/61ed37d42625962a33da862af0ab6376.png)I am trying to create a table using iTextSharp library in C#. What I want to set the width of the cell in the table.

I am using following code:

```
PdfPTable Ptbl_DetailsPerformance = new PdfPTable(7);
Ptbl_DetailsPerformance.SetWidths(new int[7] { 20, 8, 8, 8, 8, 8, 1 });

PdfPCell cellValue = new PdfPCell(); 
```

Now I want to dynamically set the width of cell but get error that "Width can't be set."

What should I do? Please help..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-06T11:59:48.237

好吧，您不能在单元格级别设置宽度，只能在表格中设置（宽度在 PdfPCell 级别没有设置器，如果我没记错的话）。

在不了解您的问题的情况下很难帮助您。您可以在 ITextSharp 中使用 colspan ，或者在表格级别计算您的“动态宽度”，但是......

你有什么需要？

编辑：itextsharp 2.050727 源（矩形类：PdfPCell 继承自矩形，并且不覆盖宽度）

```
public virtual float Width
    {
      get
      {
        return this.urx - this.llx;
      }
      set
      {
        throw new InvalidOperationException(MessageLocalization.GetComposedMessage("the.width.cannot.be.set"));
      }
    } 
```

# rsa - 软件钥匙

> ID：10042957
> 
> 赞同：0
> 
> 时间：2012-04-06T11:39:56.853
> 
> 标签：rsa, licensing, license-key

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-06T11:52:57.743

That's not how you should use Public/Private keys for a product key.

**Better Implementation**

You can create a XML Document describing the features that are enabled. Or just something simple with the Customer Name and Date.

```
<license>
    <name>Acme Co.</name>
    <expiration>20120304</expiration>
</license> 
```

You use the private key to sign the the XML document and store the hash and signature with the document. You can then verify the XML document in your product using the Public key you generated earlier.

Result of signing the document:

```
<license>
    <name>Acme Co.</name>
    <expiration>20120304</expiration>
    <signature>
        <hash>1230u4woeifhljksdkvh23p9</hash>
        <value>sdvrrvLJbmyscoVMg2pZZAtZJbBHsZFUCwE4Udv+u3TfiAms2HpLgN3cL
      NtRlxyQpvWt1FKAB/SCk1jr0IasdfeDOOHhTUTyiv2vMJgCRecC1PLcrmR9ABhqk
      itsjzrCt7V3eF5SpObdUFqcj+n9gasdfdQtlQeWcvKEcg=</value>
    </signature>
</license> 
```

If the user changes the contents of the license file then the signature will no longer match. They will also not be able to re-sign the document because they do not have access to your private key. This is important, you ship the PUBLIC key with your product not the private key.

**Short Key Implementation**

1.  Select a Product Code (Some random string to identify your product
2.  Add a known salt to the product code
3.  Create an encryption key based on the User Name. Checks to make sure it's valid.
4.  Encrypt the salt+product code with the new key
5.  Build human readable key from the encrypted results.

It will look like 1234-1234-1234-1234

**C# Solution:**

```
/// <summary>
/// Provides the ability to generate and validate license keys based
/// on a product code.
/// </summary>
public class LicenseKeyManager
{
    /// <summary>
    /// Construct a new LicenseKeyManager
    /// </summary>
    public LicenseKeyManager()
    {
        crypto = new DESCryptoServiceProvider ();
    }

    /// <summary>
    /// Set or get the product code. Once the product code
    /// is manually set it will no longer be automatically 
    /// generated for this instance. Suggested to not 
    /// set the product code unless generating keys.
    /// 
    /// In this instance the ProductCode is a string
    /// that identifies the machine that the license needs
    /// to be generated on. This prevents the distribution
    /// of keys among friends.
    /// </summary>
    public String ProductCode
    {
        set
        {
            productCode = value;
        }
        get
        {
            if (productCode == null)
                productCode = Ethernet.MacAddress.Replace (":", "");

            return productCode;
        }
    }

    /// <summary>
    /// A salt that can be added to the product code to ensure that
    /// different keys are generated for different products or
    /// companies. 
    /// Once set the salt cannot be retrieved from this object.
    /// </summary>
    public String Salt
    {
        set
        {
            salt = value;
        }
    }

    /// <summary>
    /// Validate a license key
    /// </summary>
    /// <param name="name">Name associated with the license key</param>
    /// <param name="key">The license key</param>
    /// <returns>True if the license key is valid</returns>
    public bool IsValidKey (String name, String key)
    {
        if (name == null || key == null) return false;
        String license = CreateLicense (name);
        return license.CompareTo (key) == 0;
    }

    /// <summary>
    /// Create a new license key associated with the given name. The key
    /// will be the same if this method is reinvoked with the same name and
    /// product code.
    /// </summary>
    /// <param name="name">Name to associate with the license key</param>
    /// <returns>New License Key</returns>
    public String CreateLicense (String name)
    {
        String licenseSource = ProductCode;

        if (salt != null)
            licenseSource = salt + licenseSource;

        byte[] license = Encrypt(licenseSource, name);

        if (license.Length > 16)
        {
            byte[] tmp = new byte[16];
            Array.Copy (license, tmp, 16);
            license = tmp;
        }
        else if (license.Length < 16)
        {
            byte[] tmp = 
                new byte[] {
                    36, 36, 36, 36, 36, 36, 36, 36,
                    36, 36, 36, 36, 36, 36, 36, 36};
            Array.Copy (license, tmp, license.Length);
            license = tmp;
        }

        StringBuilder sb = 
            new StringBuilder ();

        String base64License =          
            Convert.ToBase64String (license).ToUpper();
        base64License = base64License.Replace ('+', 'F');
        base64License = base64License.Replace ('/', 'A');

        // Format the license key in a human readable format.
        // We dont need all of the license key just enough
        // so that it isn't predictable. This key won't be
        // used in decrypting the license, only in comparision
        // similar to that when hasing passwords.
        sb.AppendFormat (
            "{0}{1}{2}{3}-{4}{5}{6}{7}-" +
            "{8}{9}{10}{11}-{12}{13}{14}{15}",
            base64License[0], base64License[1], 
            base64License[2], base64License[3], 
            base64License[4], base64License[5], 
            base64License[6], base64License[7], 
            base64License[8], base64License[9], 
            base64License[10],base64License[11], 
            base64License[12],base64License[13], 
            base64License[14],base64License[15]);

        return sb.ToString();
    }

    private byte[] GetLegalKey(string Key) 
    {
        string sTemp = Key;
        crypto.GenerateKey();
        byte[] bytTemp = crypto.Key;
        int KeyLength = bytTemp.Length;
        if (sTemp.Length > KeyLength)
            sTemp = sTemp.Substring(0, KeyLength);
        else if (sTemp.Length < KeyLength)
            sTemp = sTemp.PadRight(KeyLength, ' ');

        return ASCIIEncoding.ASCII.GetBytes(sTemp);
    }

    private byte[] Encrypt(string Source, string Key) 
    {
        // use UTF8 unicode conversion for two byte characters
        byte[] byteIn = UTF8Encoding.UTF8.GetBytes(Source);

        // set the private key
        crypto.Key = GetLegalKey(Key);
        crypto.IV = iv;

        // create an Encryptor from the Provider Service instance
        ICryptoTransform encryptor = crypto.CreateEncryptor();

        // convert into Base64 so that the result can be used in xml
        return encryptor.TransformFinalBlock (
                byteIn, 0, byteIn.Length);
    }

    private static byte[] iv = new byte[] {63,63,63,63,63,63,63,63};
    private String productCode;
    private String salt;
    private SymmetricAlgorithm crypto;
} 
```

# sql - 编写更新查询的更好方法是什么？

> ID：10042959
> 
> 赞同：1
> 
> 时间：2012-04-06T11:39:59.250
> 
> 标签：sql, database

以下两个查询实现了我想要对我的表执行的操作：

```
Update person_role_memberships, events
set person_role_id = 2
where person_role_id = 32 and event_name = events.name and events.date_2 = curdate() - 1
 ; 
```

-

```
 update person_role_memberships set person_role_id = 2
where person_role_id = 32 and event_name in 
    (select name from events where date_2 = curdate() -1
    ); 
```

我想知道在最优性、安全性（极端情况或副作用）或最佳实践方面哪种方法更好？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-06T11:51:49.710

第一个版本显然不是标准 SQL，因为之前的多个表`SET`是不允许的。

```
Update person_role_memberships, events SET 
```

“优化”也取决于您打算使用的实际产品和版本。但只要没有其他原因，我会尽可能使用标准 SQL。

作为改进的一个小想法（即你应该测试它）你可以`IN`用`EXISTS`

```
... and exists(select 1 from events where event_name = event.name and date_2 = curdate() -1) 
```

# c# - automatically calculate string mathematical expressing in C#

> ID：10042960
> 
> 赞同：-2
> 
> 时间：2012-04-06T11:40:01.650
> 
> 标签：c#

I have a C# string which is representation of a mathematical expression, something like this:

```
A = (B*0.25)+(D*0.25)+(1-W) 
```

how can I calculate value of A? should I manually parse all characters, then perform my calculation? Although it is possible but I think it would be time-consuming to write such a code, is there any way that C# can understand this string and calculate value of A (of course I would declare A, B, D & W as variables

thanks

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-06T11:45:28.760

.net 本身没有这样的东西，但是如果您只有主要操作，您可以解析输入字符串并找到相关值，为此您可以使用[分流场](http://en.wikipedia.org/wiki/Shunting_yard_algorithm)算法或[反向波兰表示法](http://en.wikipedia.org/wiki/Reverse_Polish_notation)，但您也可以使用[NCalc](http://ncalc.codeplex.com/)获得更多信息复杂的场景。

# firefox - 在 Mac 上的 Firefox 中带有标签的边界半径错误

> ID：10042966
> 
> 赞同：0
> 
> 时间：2012-04-06T11:40:49.987
> 
> 标签：firefox, css

 在 Firefox 中，当我`border-radius`添加`<a>`标签时，会出现一些小白线。出现在文本和元素边缘之间。如果我放大，它们就会消失。

我尝试将它放在 JSFiddle 上，但它没有复制问题。

有没有人在视觉上认识到这个问题？ 

整个页面在这里：[http](http://www.danblows.com/) ://www.danblows.com/ 。

添加边界半径的位是，但只是将相同的代码放在 JSFiddle 上并不会复制问题。

```
.cta, .cta:visited  {
    background-color:#000000;
    border-radius:5px;
    border:10px solid #000000;
    color:#FFFFFF;
} 
```

![问题截图](../Images/e46ab6b11861a14ac3c865c663c57282.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-06T12:01:18.437

链接无法正确显示块属性。给你的锚一个`display: inline-block;`

```
.cta { display: inline-block; } 
```

### 测试:)

# python - python将电子邮件ID与正则表达式匹配

> ID：10042971
> 
> 赞同：1
> 
> 时间：2012-04-06T11:41:11.540
> 
> 标签：python, regex

我正在尝试将电子邮件 ID 与正则表达式匹配，在下面我做错了什么，

```
 mail="something@redddf.com"
 >>> re.findall(r"\w+@.*",mail)
 ['something@redddf.com']

 >>> re.findall(r"\w+@\.\(com|in\)",mail)
 [] 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-06T11:47:47.780

几个问题

1.  使用 python regex 时不要转义括号
2.  您没有包含域名匹配项

应该是这样的

```
>>> re.findall(r"\w+@\w+\.(?:com|in)",mail)
['something@redddf.com']
>>> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-06T11:44:51.177

熟悉一些专门用于此任务的[站点。](http://regexlib.com/?AspxAutoDetectCookieSupport=1)

# c# - 如何使用 C# 将文本框值更新为绑定源？

> ID：10042972
> 
> 赞同：3
> 
> 时间：2012-04-06T11:41:11.777
> 
> 标签：c#, winforms, textbox, bindingsource

考虑这段代码：

```
txtLastModifyUserID.DataBindings.Add("Text", c_bsDataSetSource, "LastModifyUserID");
txtLastModifyUserID.Text = "1234"; 
```

为什么不能更新源？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-06T13:17:08.093

DataBinding 通常在控件开始失去焦点之后才*写入值。*由于您正在以编程方式更新 TextBox，因此 DataBinding 不知道有什么要更新的。

按照您编写代码的方式，您必须自己调用该`WriteValue()`方法（假设 TextBox 上仅存在 1 个数据绑定）：

```
txtLastModifyUserID.DataBindings.Add("Text", c_bsDataSetSource, "LastModifyUserID");
txtLastModifyUserID.Text = "1234";
txtLastModifyUserID.DataBindings[0].WriteValue(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T16:51:32.110

我想你快到了。只需将绑定更改为“值”而不是“文本”。当您以编程方式更改此设置时，只要更新数据源，人眼就会捕捉到更新。还要指定`DataSourceUpdateMode.OnPropertyChanged`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-06T11:43:46.417

我假设您必须指定`OnPropertyChanged`on `DataSourceUpdateMode`。

# c# - 检查存储在 DriveInfo.Name 中的字符串值

> ID：10042975
> 
> 赞同：0
> 
> 时间：2012-04-06T11:41:31.290
> 
> 标签：c#, .net, string

我使用的示例来自： http: [//msdn.microsoft.com/en-us/library/system.io.driveinfo (v=vs.80).aspx](http://msdn.microsoft.com/en-us/library/system.io.driveinfo(v=vs.80).aspx)

将驱动器信息打印到控制台窗口。我想检查 d.Name 是否包含“T”。如果是这样，我不想运行应用程序。如果它什么都不做。这是我一直在尝试的代码。（上面链接示例中的默认代码打印到命令窗口）

**(d.Name.IsLetter(T))**是我遇到问题的部分。任何人都可以建议吗？

```
DriveInfo[] allDrives = DriveInfo.GetDrives();

    foreach (DriveInfo d in allDrives)
    {
        Console.WriteLine("Drive {0}", d.Name);

         if (d.Name.IsLetter(T))
            {
                Console.WriteLine("Run App.");
                notePad.Start();
            }//end if
            else
            {
                Console.WriteLine("Do Nothing.");
            }//end else
        Console.WriteLine("  File type: {0}", d.DriveType);
        if (d.IsReady == true)
        {
            Console.WriteLine("  Volume label: {0}", d.VolumeLabel);
            Console.WriteLine("  File system: {0}", d.DriveFormat);
            Console.WriteLine(
                "  Available space to current user:{0, 15} bytes",
                d.AvailableFreeSpace);

            Console.WriteLine(
                "  Total available space:          {0, 15} bytes",
                d.TotalFreeSpace);

            Console.WriteLine(
                "  Total size of drive:            {0, 15} bytes ",
                d.TotalSize);
        }//end if
    }//end for

}//end main 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T11:44:23.673

你要`d.Name.Contains("T")`

有一种`Char.IsLetter()`方法，但只检查参数是否是“字母”（而不是数字或符号等）

# objective-c - 如何从图库中选择图像并将该图像放入我们的应用程序

> ID：10042976
> 
> 赞同：3
> 
> 时间：2012-04-06T11:41:41.897
> 
> 标签：objective-c

我在我们的应用程序中有任何源代码和建议相关显示图像的 iPhone 初学者，并从图库中挑选照片

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-04-06T11:57:24.190

你可以使用这个代码

```
- (IBAction)addImage:(id)sender {
    UIActionSheet *action = [[[UIActionSheet alloc] initWithTitle:@"Select image from"
                                                         delegate:self
                                                cancelButtonTitle:@"Cancel"
                                           destructiveButtonTitle:nil
                                                otherButtonTitles:@"From library",@"From camera", nil] autorelease];

    [action showInView:self.view];
}

#pragma mark - ActionSheet delegates

- (void)actionSheet:(UIActionSheet *)actionSheet clickedButtonAtIndex:(NSInteger)buttonIndex
{        
    if( buttonIndex == 0 ) {

        if ([UIImagePickerController isSourceTypeAvailable:UIImagePickerControllerSourceTypeCamera]) {
             UIImagePickerController *pickerView =[[UIImagePickerController alloc]init];
             pickerView.allowsEditing = YES;
             pickerView.delegate = self;
             pickerView.sourceType = UIImagePickerControllerSourceTypeCamera;
             [self presentViewController:pickerView animated:YES completion:nil];
        }
    }else if( buttonIndex == 1 ) {

        UIImagePickerController *pickerView = [[UIImagePickerController alloc] init];
        pickerView.allowsEditing = YES;
        pickerView.delegate = self;
        [pickerView setSourceType:UIImagePickerControllerSourceTypePhotoLibrary];
        [self presentViewController:pickerView animated:YES completion:nil];
    }
}

#pragma mark - PickerDelegates

- (void)imagePickerController:(UIImagePickerController *)picker didFinishPickingMediaWithInfo:(NSDictionary *)info{

    [self dismissViewControllerAnimated:YES completion:nil];

    UIImage * img = [info valueForKey:UIImagePickerControllerEditedImage];

    myImageView.image = img;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-06T11:44:08.357

该功能称为[UIImagePickerController](https://developer.apple.com/documentation/uikit/uiimagepickercontroller?language=objc)。

检查此以获取更多详细信息：[https ://zcentric.com/2008/08/28/using-a-uiimagepickercontroller/](https://zcentric.com/2008/08/28/using-a-uiimagepickercontroller/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-10-26T09:09:50.633

1.  将此添加到 Info.plist 以访问照片库。这是ios10的一个新特性。

    ```
     <key>NSPhotoLibraryUsageDescription</key>
     <string>$(PRODUCT_NAME) uses photos</string> 
    ```

2.  ```
    - (IBAction)profilePicAction:(id)sender {

      UIAlertController *alertController=[UIAlertController alertControllerWithTitle:@"" message:@"Change Profile image" preferredStyle:UIAlertControllerStyleActionSheet];

      UIAlertAction *takePhoto=[UIAlertAction actionWithTitle:@"Take Photo" style:UIAlertActionStyleDefault handler:^(UIAlertAction * _Nonnull action) {

          UIImagePickerController *picker = [[UIImagePickerController alloc] init];

          picker.delegate = self;

          picker.allowsEditing = YES;

          picker.sourceType = UIImagePickerControllerSourceTypeCamera;

          [self presentViewController:picker animated:YES completion:NULL];

          [alertController dismissViewControllerAnimated:YES completion:nil];
      }];
      [alertController addAction:takePhoto];

      UIAlertAction *choosePhoto=[UIAlertAction actionWithTitle:@"Select From Photos" style:UIAlertActionStyleDefault handler:^(UIAlertAction * _Nonnull action) {

          UIImagePickerController *pickerView = [[UIImagePickerController alloc] init];

          pickerView.allowsEditing = YES;

          pickerView.delegate = self;

          [pickerView setSourceType:UIImagePickerControllerSourceTypePhotoLibrary];

          [self presentModalViewController:pickerView animated:YES];

          [alertController dismissViewControllerAnimated:YES completion:nil];
      }];

      [alertController addAction:choosePhoto];

      UIAlertAction *actionCancel=[UIAlertAction actionWithTitle:@"Cancel" style:UIAlertActionStyleCancel handler:^(UIAlertAction * _Nonnull action) {

         [alertController dismissViewControllerAnimated:YES completion:nil];
      }];

      [alertController addAction:actionCancel];

      [self presentViewController:alertController animated:YES completion:nil];
    }

    - (void)imagePickerController:(UIImagePickerController *)picker didFinishPickingMediaWithInfo:(NSDictionary *)info {

        UIImage *chosenImage = info[UIImagePickerControllerEditedImage];

        self.profilePic.image = chosenImage;

        [picker dismissViewControllerAnimated:YES completion:NULL];
    }

    - (void)imagePickerControllerDidCancel:(UIImagePickerController *)picker {

        [picker dismissViewControllerAnimated:YES completion:NULL];
    } 
    ```

# xml - 为什么区分大小写和不区分大小写？

> ID：10042979
> 
> 赞同：0
> 
> 时间：2012-04-06T11:41:54.580
> 
> 标签：xml, html, programming-languages, case-sensitive

为什么像`HTML`不区分大小写和区分大小写这样的标记语言`xml`？使语言区分大小写或不区分大小写的基本思想是什么？为什么以及在什么基础上这样做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-06T11:45:33.393

简单地说：不区分大小写通常对人类来说更容易编写，而区分大小写对计算机来说更容易解析。此外，使用 unicode 编写的语言，弄清楚什么是“不同大小写的相同字母”变得不那么简单了。

基本上就是这样。即使将创建许多标识符，创建仅在大小写上有所不同的不同标识符也很少是好的做法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-06T18:16:48.933

区分大小写有好处，不区分大小写也有好处。因此，关于哪个最好的意见可能会有所不同，并且由于语言是由有意见的人设计的，因此语言会有所不同。

当您支持整个 Unicode 而不仅仅是 ASCII 时，不区分大小写会变得更加复杂：因为 HTML 标记名称都是 ASCII，而 XML 标记名称可以使用更广泛的曲目，这可以解释差异。

# jquery - 使用 if/else 在 Jquery 中切换/更改 CSS 的背景图像

> ID：10042984
> 
> 赞同：1
> 
> 时间：2012-04-06T11:42:57.093
> 
> 标签：jquery, image, if-statement

一直在它几个小时请帮助

```
 $("#NewsReel").click(function(){
   if( $(".block_news").css("background","url('/new_skool/images/news_1.jpg')no-repeat"))
   {
   $(".block_news").css("background","url('/new_skool/images/news(2).jpg')no-repeat");
   }
   else
   {
   if( $(".block_news").css("background","url('/new_skool/images/news(2).jpg')no-repeat"))
   {
   $(".block_news").css("background","url('/new_skool/images/news_1.jpg')no-repeat");
   }
   }
   }); 
```

谢谢你

它会更改图像一次，但不会触发第二个 if 语句。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-06T11:54:52.173

获取背景值不是以这种方式执行的。你需要使用：

```
if ($('element').css('background') == 'value') {
   ...
} 
```

此外，不能保证 jQuery 不会完全按照您设置的方式优化或设置背景。例如，它可能将值返回为：

```
no-repeat url('/new_skool/images/news(2).jpg') 
```

最好创建两个 CSS 类，然后使用[toggleClass()](http://api.jquery.com/toggleClass/)更改背景图像，例如在[**这个演示中**](http://jsfiddle.net/Lh6D5/)

### HTML

```
<ul id="NewsReel">
    <li class="block_news">news</li>
</ul>​ 
```

### CSS

```
li {
   background:url('http://lorempixel.com/25/25/abstract/1/') no-repeat;
}

li.clicked {
    background:url('http://lorempixel.com/25/25/abstract/2/') no-repeat;
} 
```

### JavaScript (jQuery)

```
$("#NewsReel").click(function() {
    $('.block_news').toggleClass('clicked');
    return false;
}); 
```

​</p>

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-06T11:50:45.857

使用 css 类通过 jQuery `addClass`//设置背景样式`removeClass`。`hasClass`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-06T12:00:46.647

此行/测试：

```
if( $(".block_news").css("background","url('/new_skool/images/news_1.jpg')no-repeat")) 
```

...将始终返回 true 的等效项（它返回一个 jQuery 对象）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-06T11:48:00.397

在所有情况下，您都设置了背景。要检索背景的值，请在 css 方法中丢失第二个参数。

# java - 如何让 Eclipse 看到 Play 中的变化！编译模板？

> ID：10042987
> 
> 赞同：22
> 
> 时间：2012-04-06T11:43:25.077
> 
> 标签：java, eclipse, scala, playframework-2.0

所以，我正在用 Eclipse 试用 Play 2。我创建了一个新项目，编译它，运行 eclipsify 并将其导入 Eclipse。到目前为止，一切都很好。

我遇到的问题是，当我在 Scala 模板中进行更改时，我的 Java 控制器看不到它，并且 Eclipse 将代码标记为无效。例如：

我在索引模板中添加了第二个参数

```
@(message: String, nesto:Integer) 
```

当我尝试从控制器渲染我的文件时，以下行显示错误，因为 Eclipse 仍然认为 index.render 需要一个字符串。

```
return ok(index.render("Your new application is ready.",2)); 
```

我在 Eclipse 中开启了工作区刷新，播放 eclipsify 自动将 classes_managed 目录添加到构建路径中。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-06T12:42:09.153

我做了以下事情：

1.  正如您所做的那样，我打开了工作区自动刷新（在设置中，常规 -> 工作区，然后选择“使用本机挂钩或池化刷新”）
2.  我从构建路径中删除了`classes_managed`生成的目录`play eclipsify`，并使用“添加外部类文件夹”手动添加了它

然后它对我有用。该命令似乎存在错误`eclipsify`。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-06T18:35:04.910

诀窍是让 Play 在后台自动构建（模板文件当前不是由 Eclipse 构建的，因此您需要 Play 为您翻译这些文件）。这一切都在这里详细解释：

[死链接] [http://scala-ide.org/docs/tutorials/play20scalaide20/index.html](http://scala-ide.org/docs/tutorials/play20scalaide20/index.html)

[试试这个] [http://scala-ide.org/docs/tutorials/play/index.html#installing-the-scala-ide-play2-plug-in](http://scala-ide.org/docs/tutorials/play/index.html#installing-the-scala-ide-play2-plug-in)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2014-01-09T16:41:21.810

1.  在命令行上运行“play eclipse”
2.  在 Eclipse 中，通过按 F5 刷新您的项目

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-02-08T15:57:15.023

对于带有 Eclipse Mars 的 Java Play Framework v2.4.6（激活器 v1.3.7）：

而不是`@(message: String, nesto:Integer)`，你试过这个`@(message: String)(nesto: Integer)`吗？

为了避免`index.render()`您的.`<classpathentry kind="lib" path="target/scala-2.11/classes"/>``.classpath``target/scala-2.11/classes`

# c# - 为什么 Win32 错误代码与方法签名不匹配？

> ID：10042990
> 
> 赞同：1
> 
> 时间：2012-04-06T11:43:48.817
> 
> 标签：c#, pinvoke

有人可以帮我理解为什么 Win32 错误代码与方法签名不匹配，以及处理此问题的正确方法是什么？

以[SCardReleaseContext 为例](http://msdn.microsoft.com/en-us/library/windows/desktop/aa379798%28v=vs.85%29.aspx)，根据 MSDN 文档，返回类型是`LONG`。根据[这篇 MSDN 文章](http://msdn.microsoft.com/en-us/magazine/cc164123.aspx#S6)，c# 的等价物`LONG`是`int`. 查看 SCardReleaseContext的一些 p/invoke[示例签名](http://www.pinvoke.net/default.aspx/winscard.scardreleasecontext)，返回类型也标记为`int`.

但是，[WinSCard 错误代码](http://msdn.microsoft.com/en-us/library/windows/desktop/aa374738%28v=vs.85%29.aspx)的定义与类型不匹配`int`，因为该值根本不适合`int`.

目前，在我的 c# 程序中，我必须将返回值和错误代码值定义为`uint`. 这样我的代码就可以编译和工作了。否则，编译器会抱怨无法将值转换为 int，例如 - `enum ErrorCodes : int { SCARD_E_CANCELLED = 0x80100002 }`。

我是否可以正确假设 c++ 编译器将采用值 0x80100001 （不适合 int），让它溢出，从而将值转换为一些适当的匹配负值？

另外，我是否正确地说 c# 编译器不允许编写这样的错误/错误/缺陷，并且处理这种（角落）情况的正确方法是有目的地“制动” p/invoke 签名并`uint`改为使用？

**编辑：**
修复了最后一个链接，这有点不正确，其中的值被强制转换为`DWORD`，恰好是`uint`. 将链接设置为指向 Microsoft 自己的站点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-06T12:27:41.327

winapi 旨在与 C 编译器一起使用。一种允许将无符号文字分配给有符号整数的语言。一些编译器会为此生成警告，但绝不会出错。你的 C# 编译器不是那么宽容。您需要应用两个二乘四来保持快乐：

```
 enum ErrorCodes : int { 
        SCARD_F_INTERNAL_ERROR = unchecked((int)0x80100001) 
    } 
```

更简洁的解决方案是让枚举从 uint 继承。

```
 enum ErrorCodes : uint { 
        SCARD_F_INTERNAL_ERROR = 0x80100001 
    } 
```

并更改 pinvoke 声明以返回 uint 而不是 int。隐藏在 pinvoke 声明中是一种非常常见的技术，尤其是对于采用 PVOID 或 LPARAM 的技术。当然，你必须知道后果。没有LONG to uint，类型大小相同，只是值解释不同。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-06T11:46:09.107

他们怎么不合适？例如。(DWORD) 0x80100006 适合 32 位。当然，在 .NET 中出现负数会令人困惑，但该值本身非常适合。您最简单的选择是将 P/Invoke 声明更改为 uint，是的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-06T11:49:01.350

我会说 MS 在实施时只是弄错了`SCardReleaseContext`，`SCardReleaseContext`应该声明为 return `DWORD`。如果我是你，我会简单地将你的 P/invoke 声明为 return `uint`。

# android - 如何在 Android 中查看日志消息？

> ID：10042991
> 
> 赞同：3
> 
> 时间：2012-04-06T11:43:50.710
> 
> 标签：android

我正在尝试使用日志消息调试我的 android 应用程序。当我使用 System.out.println 和 Log.i 并运行 android 应用程序时，我在控制台或 Logcat 中都看不到调试消息。如果我必须获取调试消息，我是否必须在调试模式下运行 android 应用程序

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T11:52:02.380

您*无需*在调试模式下运行您的应用程序即可查看日志消息。

要查看日志消息，您只需要在手机上启用 USB 调试，为您的设备安装 adb 驱动程序，以及一份 android 开发者工具的副本。听起来你有上述的东西，所以我会建议一些解决这个问题的步骤。

不要使用`System.out.println`，因为它不允许您指定`tag`. 确保为日志消息设置了一个好的标签。确认上述所有内容后，尝试在 eclipse 的 logcat 视图中查看日志消息。使用您正在使用的标签创建一个过滤器，因为会打印很多消息，并且可能很难找到您的。您还可以使用应用程序包的名称按应用程序进行过滤。

如果您已经尝试了所有这些，但仍然看不到日志消息，请尝试运行：

```
adb kill-server 
```

和

```
adb start-server 
```

如果没有运气，*请尝试重新启动 eclipse*。

*确认您的设备已插入！*

如果这些都不起作用，您还可以`ddms`从更可靠的 sdk 工具运行。

最后，如果这不起作用，您可以简单地`adb logcat`在命令行上发出一个。如果您有多个设备，您可以使用 、 或以其他方式解析设备或模拟器并列出它们并`adb devices`解析。`-d for the only connected device``-e for the emulator``-s serialno`

还有一些工具可以让您查看设备上的日志，例如[alogcat](https://play.google.com/store/apps/details?id=org.jtb.alogcat&hl=en)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-06T11:53:52.117

从 Eclipse 转到窗口 -> 打开透视图 -> 其他 -> 选择 DDMS。然后运行您的应用程序。然后从 DDMS 中选择您正在运行的设备。如果它没有解决您的问题，请在不关闭模拟器的情况下重新启动 eclipse，然后执行上述相同的步骤。恩乔伊，

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-06T12:03:43.650

有时您可能不会选择模拟器

另一种方法是

重启你的eclipse我也遇到过这个问题很多次

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-06T13:01:07.287

如果您使用的是 Eclipse，请确保：

1.  您在您的设备中启用了调试（或者您使用了模拟器），
2.  您的设备已正确连接 - 它应显示在“设备”视图中。如果您没有此视图，请从 Window->Show View->Devices 获取它，
3.  您已经在设备视图中选择了您的设备（只需单击它），
4.  您没有暂停 LogCat，也没有启用过滤器 - `All messages (no filters)`。