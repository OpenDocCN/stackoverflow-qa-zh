# StackOverflow 问答 10581000-10581999

# iphone - 在滚动条中显示多张照片

> ID：10581001
> 
> 赞同：1
> 
> 时间：2012-05-14T09:51:36.177
> 
> 标签：iphone, ios, image, memory-management, uiscrollview

在应用程序中，我需要显示否。滚动器中的图像（计数未知）。我将所有图像直接放在滚动条中。但是开始收到内存警告级别 2。请建议我该怎么做。有没有其他方法可以做到这一点？您还可以参考以下链接以更好地了解问题。

[https://www.dropbox.com/sh/h0vwnhhx1acfcb5/W2TQ638udh](https://www.dropbox.com/sh/h0vwnhhx1acfcb5/W2TQ638udh)

```
 -(void) getPortraitScrollReady
  {
    UIImageView *imageView;
    NSString *imageName;
    int x=0;
    for (NSNumber *numberObject in tagList)
    {
        imageName = [[NSString alloc] initWithFormat: @"%@", [self getImage:[numberObject intValue]]];
        imageView = [[UIImageView alloc ] initWithFrame: CGRectMake(x, 0, 320, 320)];
        imageView.image = [self thumbWithSideOfLength:320 pathForMain:imageName];   // a function that returns an image;

        [scrollPortrait addSubview:imageView];

        [imageName release];

        [imageView release];

        x+=320;
    }
    scrollPortrait.contentSize = CGSizeMake(x, 320);
    int pageNo =[self indexofObject:imageNo inArray:tagList]; 
    [scrollPortrait setContentOffset:CGPointMake(pageNo*320, 0) animated:NO];
 } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T10:52:00.690

根据方便，将所有图像保存在 Array/MutableArray 中。

使用 Scrollview，在滚动视图中使用 5-UIImageViews 来显示数组中的图像。将该 UIScrollView 的长度与 5-UIImageViews 匹配。

当在任何方向上完成滚动时，然后以相反的方向“释放” UIImageView 并在滚动方向上“分配”一个新的 UIImageVIew。

这就是我在我的项目中所做的。.h 文件内容

```
IBOutlet UIScrollView *scrlView;
UIImageView *imgView1;
UIImageView *imgView2;
UIImageView *imgView3;
UIImageView *imgView4;
UIImageView *imgView5;

NSMutableArray *imgGallery;
NSInteger mCount;
NSInteger centerImg;

CGFloat imgFrameHeight;
CGFloat imgView1X;
CGFloat imgView2X;
CGFloat imgView3X;
CGFloat imgView4X;
CGFloat imgView5X;

CGFloat previousOffsetX;
CGFloat currentOffsetX; 
```

.m 文件内容

```
- (void)photoGallery
{
    imgGallery = [[NSMutableArray alloc] initWithCapacity:10];
    [imgGallery addObject:[UIImage imageNamed:@"1.png"]];
    [imgGallery addObject:[UIImage imageNamed:@"2.png"]];
    [imgGallery addObject:[UIImage imageNamed:@"3.png"]];
    [imgGallery addObject:[UIImage imageNamed:@"4.png"]];
    [imgGallery addObject:[UIImage imageNamed:@"5.png"]];
    [imgGallery addObject:[UIImage imageNamed:@"6.png"]];
    [imgGallery addObject:[UIImage imageNamed:@"7.png"]];
    [imgGallery addObject:[UIImage imageNamed:@"8.png"]];
    [imgGallery addObject:[UIImage imageNamed:@"9.png"]];
}

- (void)photoScroller
{
    CGFloat appFrameHeight = self.view.frame.size.height;
    CGFloat navFrameHeight = self.navigationController.navigationBar.frame.size.height;
    CGFloat tabFrameHeight = self.tabBarController.tabBar.frame.size.height;
    imgFrameHeight = appFrameHeight - (navFrameHeight+tabFrameHeight);

    mCount = [imgGallery count];
    [scrlView setContentSize:CGSizeMake(320 * mCount, imgFrameHeight)];
    CGFloat offsetX = ((320 * mCount)/2) - 160;
    [scrlView setContentOffset:CGPointMake(offsetX, 0)];

    imgView1 = [[UIImageView alloc] initWithFrame:CGRectMake(offsetX - (320*2), 0, 320, imgFrameHeight)];
    imgView2 = [[UIImageView alloc] initWithFrame:CGRectMake(offsetX - 320, 0, 320, imgFrameHeight)];
    imgView3 = [[UIImageView alloc] initWithFrame:CGRectMake(offsetX, 0, 320, imgFrameHeight)];
    imgView4 = [[UIImageView alloc] initWithFrame:CGRectMake(offsetX + 320, 0, 320, imgFrameHeight)];
    imgView5 = [[UIImageView alloc] initWithFrame:CGRectMake(offsetX + (320*2), 0, 320, imgFrameHeight)];

    int center = mCount/2;
    int tmp = center * 2;
    int remainder = mCount - tmp;
    if (remainder != 0) {
        centerImg = center;
    } else {
        centerImg = center - remainder;
    }

    imgView1.image = [imgGallery objectAtIndex:(centerImg-2)];
    imgView2.image = [imgGallery objectAtIndex:(centerImg-1)];
    imgView3.image = [imgGallery objectAtIndex:centerImg];
    imgView4.image = [imgGallery objectAtIndex:(centerImg+1)];
    imgView5.image = [imgGallery objectAtIndex:(centerImg+2)];

    [scrlView addSubview:imgView1];
    [scrlView addSubview:imgView2];
    [scrlView addSubview:imgView3];
    [scrlView addSubview:imgView4];
    [scrlView addSubview:imgView5];
} 
```

下面是调整 UIImageViews 的代码

```
- (void)scrollViewWillBeginDragging:(UIScrollView *)scrollView
{
    imgView1X = imgView1.frame.origin.x;
    imgView2X = imgView2.frame.origin.x;
    imgView3X = imgView3.frame.origin.x;
    imgView4X = imgView4.frame.origin.x;
    imgView5X = imgView5.frame.origin.x;

    CGPoint previousOffset = [scrlView contentOffset];
    previousOffsetX = previousOffset.x;

}

- (void)scrollViewDidScroll:(UIScrollView *)scrollView
{
    //get the current offset
    CGPoint currentOffset = [scrollView contentOffset];
    currentOffsetX = currentOffset.x;

    //NSLog(NSStringFromCGPoint(currentOffset));

    //calculate offset X of RIGHT ImageView to be shifted
    CGFloat identifyRightIV = previousOffsetX +640;
    //calcualte new LEFT offset X for shifting the previously calcualted RIGHT ImageView
    CGFloat newLX = identifyRightIV - (320*5);
    //calculate offset X of LEFT ImageView to be shifted
    CGFloat identifyLeftIV = previousOffsetX -640;
    //calcualte new RIGHT offset X for shifting the previously calcualted LEFT ImageView
    CGFloat newRX = identifyLeftIV + (320*5);
    //index of new LEFT Image in an array imgGallery
    int newImageL = newLX / 320;
    //index of new RIGHT Image in an array imgGallery
    int newImageR = newRX / 320;

    //if scrolled to left
    if (newLX >= 0) // Is shifting is necessary? i.e. if new LEFT offsetX is greater than lowest offsetX(0) of scrollview
    {
        if (currentOffsetX == (previousOffsetX-320))
        {
            if (imgView1X == identifyRightIV) {
                imgView1.frame = CGRectMake(newLX, 0, 320, imgFrameHeight);
                imgView1.image = [imgGallery objectAtIndex:newImageL];
            }
            else if (imgView2X == identifyRightIV) {
                imgView2.frame = CGRectMake(newLX, 0, 320, imgFrameHeight);
                imgView2.image = [imgGallery objectAtIndex:newImageL];
            }
            else if (imgView3X == identifyRightIV) {
                imgView3.frame = CGRectMake(newLX, 0, 320, imgFrameHeight);
                imgView3.image = [imgGallery objectAtIndex:newImageL];
            }
            else if (imgView4X == identifyRightIV) {
                imgView4.frame = CGRectMake(newLX, 0, 320, imgFrameHeight);
                imgView4.image = [imgGallery objectAtIndex:newImageL];
            }
            else if (imgView5X == identifyRightIV) {
                imgView5.frame = CGRectMake(newLX, 0, 320, imgFrameHeight);
                imgView5.image = [imgGallery objectAtIndex:newImageL];
            }
        }
    }
    //if scrolled to right
    if (newRX < (mCount*320))   // Is shifting is necessary? i.e. if new RIGHT offsetX is less than highest offsetX of scrollview
    {
        if (currentOffsetX == (previousOffsetX+320))
        {
            if (imgView1X == identifyLeftIV) {
                imgView1.frame = CGRectMake(newRX, 0, 320, imgFrameHeight);
                imgView1.image = [imgGallery objectAtIndex:newImageR];
            }
            else if (imgView2X == identifyLeftIV) {
                imgView2.frame = CGRectMake(newRX, 0, 320, imgFrameHeight);
                imgView2.image = [imgGallery objectAtIndex:newImageR];
            }
            else if (imgView3X == identifyLeftIV) {
                imgView3.frame = CGRectMake(newRX, 0, 320, imgFrameHeight);
                imgView3.image = [imgGallery objectAtIndex:newImageR];
            }
            else if (imgView4X == identifyLeftIV) {
                imgView4.frame = CGRectMake(newRX, 0, 320, imgFrameHeight);
                imgView4.image = [imgGallery objectAtIndex:newImageR];
            }
            else if (imgView5X == identifyLeftIV) {
                imgView5.frame = CGRectMake(newRX, 0, 320, imgFrameHeight);
                imgView5.image = [imgGallery objectAtIndex:newImageR];
            }
        }

    }
} 
```

由于这一点，在整个生命周期中只有 5-UIImageViews 将在 App 中，所有图像在数组中都是安全的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-14T10:46:15.763

试试这个代码的第一个问题：

```
 scrl=[[UIScrollView alloc]initWithFrame:CGRectMake(10, 92, 300, 370)];
        //scrl.backgroundColor=[UIColor blackColor];
        scrl.delegate=self;
        scrl.showsHorizontalScrollIndicator=NO;
        scrl.showsVerticalScrollIndicator=NO;
            scrl.pagingEnabled=YES;
        scrl.layer.cornerRadius = 5.0f;
        scrl.layer.masksToBounds = YES;
        scrl.layer.borderWidth = 5;
        scrl.layer.borderColor = [UIColor blackColor].CGColor;

        int i, x=0,y=0;
        for (i=0; i<[imageName count]; i++) 
        {

            imagBack=[[UIImageView alloc] initWithFrame:CGRectMake(x,y,300, 370)];
            imagBack.image=[UIImage imageNamed:[imageName objectAtIndex:i]];
            [scrl addSubview:imagBack];

             x =x+300;
       }
        scrl.contentSize=CGSizeMake(x,370);

        [self.view addSubview:scrl]; 
```

-> 第二期，您使用要压缩的图像（.png 格式）图像是，试试这个：

```
 [self imageWithImage:image CovertToSize:CGSizeMake(46, 44)];

    NSData* imageData = UIImageJPEGRepresentation(image, 1.0f);//10 % quality compressed 
```

保存图像时调用此方法：

```
-(UIImage *)imageWithImage:(UIImage *)image CovertToSize:(CGSize)size {
    UIGraphicsBeginImageContext(size);
    [image drawInRect:CGRectMake(0, 0, size.width, size.height)];
    destImage = UIGraphicsGetImageFromCurrentImageContext();    
    UIGraphicsEndImageContext();
    return destImage;
} 
```

# ios - QLPreviewController 上的 PopOver 没有得到 Dismiss ，即使在返回之后

> ID：10581004
> 
> 赞同：0
> 
> 时间：2012-05-14T09:51:54.300
> 
> 标签：ios, popover, dismiss, qlpreviewcontroller

我已将 QLPreviewController 设置为我的 UIViewController 的父级。

我可以使用 QLPreviewController 在我的视图上显示任何文件。

现在，当我打开文件以查看时，内部有一个 ActionButton Sets，它为“Open In”、“Print”提供了选项。直到它工作正常，但是当我单击该 ActionButton 时，会显示一个 PopOver，然后如果我单击返回按钮，那么我的视图将导航到一个阶段，但 PopOver 仍然存在。然后我的应用程序崩溃。

QLPreviewController 的行为似乎很奇怪。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T21:22:21.773

我建议在您的 viewWillDisappear 方法中实现一些东西，该方法在消失/导航离开该控制器之前关闭弹出框。

# javascript - 为什么只写一个字段而不用它做任何事情？

> ID：10581006
> 
> 赞同：5
> 
> 时间：2012-05-14T09:52:00.857
> 
> 标签：javascript, mongoose

我正在阅读猫鼬的源代码，在[https://github.com/LearnBoost/mongoose/blob/master/lib/collection.js#L23](https://github.com/LearnBoost/mongoose/blob/master/lib/collection.js#L23)中找到这样的代码：

```
/**
 * The collection name
 *
 * @api public
 */

Collection.prototype.name; 
```

我不明白为什么这条线存在。它在这里只是为了生成文档吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-14T10:00:16.013

是的。

它可以帮助任何阅读代码的人知道该属性是公开访问的，并帮助文档生成器发出相同的信号。

# windows-services - 是否能够在 Windows 服务中发送服务总线消息

> ID：10581017
> 
> 赞同：0
> 
> 时间：2012-05-14T09:53:03.927
> 
> 标签：windows-services, azure-queues

是否能够在 Windows 服务中发送 Azure 服务总线消息？

最近，我构建了一个 Windows NT 服务来向 Azure 队列发送消息。但它失败了。我创建了两个测试控制台应用程序，一个使用与我的 Windows NT 服务相同的代码来发送服务总线消息，另一个用于接收消息。测试控制台应用程序成功发送和接收消息。在我的 Windows NT 服务中，它不会抛出任何消息或错误。

我想知道的是 Windows NT 服务是否支持 Azure 服务总线消息。

我的应用程序既不是工作角色也不是 Web 角色。它只是一个 Windows NT 服务。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T18:43:45.303

服务总线客户端代码在其他任何地方的工作方式都相同，包括 Windows 服务。

但！

NT 服务通常在您的计算机上作为本地服务或网络服务运行，并且根据您的网络设置，该帐户可能没有足够的权限与代理等中介进行对话。我们知道，在我们的一些客户中，IT 不允许机器帐户通过外部代理，因此机器帐户将无法工作。也就是说，如果通信不起作用，您应该并且将会看到抛出异常，因此您应该仔细检查您的代码和/或打开 WCF 跟踪。

克莱门斯

# node.js - 函数中的猫鼬不返回任何东西

> ID：10581022
> 
> 赞同：0
> 
> 时间：2012-05-14T09:53:16.080
> 
> 标签：node.js, mongodb, mongoose

我正在尝试查询我的数据库，但由于某种原因，当我知道我的数据库中有 3 个东西时，我永远不会得到结果。我做了这个功能：

```
function toJson()
{

  var test = [];

  async.series({
    rooms : function() { return Room.find(); }
  }
  , function(err, results) {

    test = results.rooms;

  });

  return test;

} 
```

这是怎么来的？我猜这与猫鼬他的方法（搜索）是异步的有关。

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-14T09:59:08.620

`toJson`立即返回，但`return test;`立即发生。你需要做`toJson`一个回调——你甚至不需要在`async.series`这里使用：

```
function toJson(callback) {
    Room.find(function(err, results) {
        callback(results);
    });
} 
```

这会做你想做的事——但你不应该`err`像你提议的那样忽视。

# php - php POST数据并保存

> ID：10581023
> 
> 赞同：0
> 
> 时间：2012-05-14T09:53:20.167
> 
> 标签：php, post

我的代码从我的 android 应用程序接收数据时出错。有人可以解决我的问题吗？我已经包含了我在发布数据时遇到的错误。

```
<?php

    $filename = "uploads/";

    $filename = $filename."data".date.".txt";

    file_put_contents($filename, $_POST) ;

?> 
```

错误日志：

> [14-May-2012 09:49:32 UTC] PHP 警告：file_put_contents(uploads/datadate.txt) [function.file-put-contents]：无法打开流：/home/kiwigami/ 中没有这样的文件或目录第 27 行的 public_html/upload.php

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T09:56:11.700

确保你有一个`uploads`目录`/home/kiwigami/public_html/`

# azure - Azure：使用 System.Diagnostics.PerformanceCounter

> ID：10581029
> 
> 赞同：0
> 
> 时间：2012-05-14T09:53:37.143
> 
> 标签：azure, system.diagnostics, performancecounter

我知道 Microsoft.WindowsAzure.Diagnostics 性能监控。我正在寻找更实时的东西，比如使用 System.Diagnostics.PerformanceCounter 这个想法是实时信息将根据 AJAX 请求发送。

使用 azure 中可用的性能计数器：http: [//msdn.microsoft.com/en-us/library/windowsazure/hh411520](http://msdn.microsoft.com/en-us/library/windowsazure/hh411520)

以下代码有效（或者至少在 Azure Compute Emulator 中，我没有在部署到 Azure 时尝试过）：

```
 protected PerformanceCounter FDiagCPU = new PerformanceCounter("Processor", "% Processor Time", "_Total");
    protected PerformanceCounter FDiagRam = new PerformanceCounter("Memory", "Available MBytes");
    protected PerformanceCounter FDiagTcpConnections = new PerformanceCounter("TCPv4", "Connections Established"); 
```

在 MSDN 页面的下方是我想使用的另一个计数器：Network Interface(*)\Bytes Received/sec

我尝试创建性能计数器：

```
protected PerformanceCounter FDiagNetSent = new PerformanceCounter("Network Interface", "Bytes Received/sec", "*"); 
```

但后来我收到一个异常，说“*”不是有效的实例名称。

这也不起作用：

```
protected PerformanceCounter FDiagNetSent = new PerformanceCounter("Network Interface(*)", "Bytes Received/sec"); 
```

直接在 Azure 中使用性能计数器是否令人不悦？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T10:47:04.883

您在这里遇到的问题与 Windows Azure 无关，而是与一般性能计数器有关。顾名思义，**Network Interface(*)\Bytes Received/sec**是特定网络接口的性能计数器。

要初始化性能计数器，您需要使用您希望从中获取指标的实例名称（网络接口）对其进行初始化：

```
var counter = new PerformanceCounter("Network Interface",
        "Bytes Received/sec", "Intel[R] WiFi Link 1000 BGN"); 
```

从代码中可以看出，我指定了网络接口的名称。在 Windows Azure 中，您不控制服务器配置（硬件、Hyper-V 虚拟网卡……），所以我不建议使用网络接口的名称。

这就是为什么枚举实例名称来初始化计数器可能更安全的原因：

```
var category = new PerformanceCounterCategory("Network Interface");
foreach (var instance in category.GetInstanceNames())
{
    var counter = new PerformanceCounter("Network Interface",
                                               "Bytes Received/sec", instance);
    ...
} 
```

# jquery - 如何在父 td 宽度内设置图像大小？

> ID：10581042
> 
> 赞同：1
> 
> 时间：2012-05-14T09:54:14.473
> 
> 标签：jquery, html, css

如何在父 td 宽度内设置图像大小？图像可能会动态变化。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-14T09:58:03.523

```
var imgs = $('img');

imgs.each(function() {
  var pwidth = $(this).parent('td').width();
  $(this).attr('width',pwidth);
}); 
```

您还可以使用 css：

```
img {width: 100%} 
```

这样图像会自动获取其父级的宽度

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-14T10:19:22.737

我想你已经有了这个代码[jsfiddle](http://jsfiddle.net/vbZEy/1/)。你能提供更多细节吗

# jquery - .post 添加新价值

> ID：10581043
> 
> 赞同：0
> 
> 时间：2012-05-14T09:54:21.327
> 
> 标签：jquery

我在互联网“投票系统”上找到了一些脚本，我想稍微修改一下，所以我有这段代码：

```
$.post(
    "voting/voting.php?value="+a, 
    { }, 
    function(response) {
        // now update box bar           
        $.post(
            "voting/update_box.php", 
            { }, 
            function(update){
                $('#update_count').html(unescape(update));              
            }
        );
        ////////////

        // now update tooltip count         
        $.post(
            "voting/update_tooltip.php", 
            { }, 
            function(updates){
                $('.tooltip3').html(unescape(updates));             
            }
        );
        ////////////
    }
); 
```

您在第一行中看到`voting/voting.php?value="+a`，我想在`video`其中添加另一个值 - 将存储`id`当前视频的位置，并将其`voting.php`与`value`.

我试过这个（我将视频存储`id`为带有类的 div 的 id `.tooltip`，我知道这有点奇怪，但我认为它应该可以工作）：

```
var b = $(".tooltip").attr("id");
$.post("voting/voting.php?video="+b+"&value="+a, { 
```

但这不起作用。有什么建议么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T09:57:16.783

```
$.post("voting/voting.php", {"value":a,"video":b },
function(response)... 
```

这将在`POST`方法中发送参数。

# java - 在每个项目上创建一个带有 onClick 侦听器的列表

> ID：10581046
> 
> 赞同：0
> 
> 时间：2012-05-14T09:54:47.357
> 
> 标签：java, android

我有一个`SQLite`数据库，我想在 ListView 中查看所有元素。但我想让每一行都可以点击。这个怎么做？这是代码：然后..另一个问题..我有一个可以通过选项菜单启动的活动，它从数据库中添加或删除数据..当我回到这个活动时，我想自动更新列表..如何更改代码？

```
public class WorkflowChoice extends Activity
{
    private static final int INIT_JADE_PROFILE = 0;
    private static final int MANAGE_DATABASE = 1;
    private static final int MODIFY_FILES = 2;
    private static final int CHANGE_THEME = 3;
    private static final int SHOW_OUTPUT_WORKFLOW = 4;
    private LinearLayout properties_container;
    private MyDatabase db;
    TextView wfsTv;
    ListView wfsLv;
    private Cursor c;
    public MyDatabase getDb()
    {
        return db;
    }
    @Override protected void onCreate(Bundle savedInstanceState)
    {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.choice);
        properties_container = (LinearLayout ) findViewById(R.id.properties_container);
        String host = (String) InitJadeProperties.retrieve(this, getString(R.string.main_container_host), getString(R.string.default_host));
        String port = (String) InitJadeProperties.retrieve(this, getString(R.string.main_container_port), getString(R.string.default_port));
        wfsTv=(TextView)findViewById(R.id.wfsTv);
        ListView wfsLv = (ListView)findViewById(R.id.wfsLv);
        db=new MyDatabase(getApplicationContext());
        db.open();
        //apriamo il db
        if(db.fetchWfs().getCount()==0)
        {
            //inserimento dati, solo se il db è vuoto
            db.insertWf("WF1", "class1");
            db.insertWf("WF2", "class2");
            db.insertWf("WF3", "class3");
            db.insertWf("WF4", "class4");
            db.insertWf("WF5", "class5");
        }
        c=db.fetchWfs();
        // query
        startManagingCursor(c);
        SimpleCursorAdapter adapter=new SimpleCursorAdapter( //semplice adapter per i cursor                 this,                  R.layout.wfs, 
        //il layout di ogni riga/prodotto c,new String[]
        {
            MyDatabase.WfMetaData.ID,MyDatabase.WfMetaData.WF_NAME_KEY,MyDatabase.WfMetaData.WF_CLASS_KEY
        }
        ,//questi colonne 
        new int[]{R.id.IDTv,R.id.nameTv,R.id.classTv }            );
        //in queste views 
        wfsLv.setAdapter(adapter);
        //la listview ha questo adapter //qui vediamo invece come reperire i dati e usarli, in questo caso li stampiamo in una textview
        int nameCol=c.getColumnIndex(MyDatabase.WfMetaData.WF_NAME_KEY);
        //indici delle colonne
        int classCol=c.getColumnIndex(MyDatabase.WfMetaData.WF_CLASS_KEY);
        if(c.moveToFirst())
        {
            //se va alla prima entry, il cursore non è vuoto         do
            {
                wfsTv.append("Wf Name:"+c.getString(nameCol)+", Class:"+c.getString(classCol)+"\n");
                //estrazione dei dati dalla entry del cursor
            }
            while (c.moveToNext());
            //iteriamo al prossimo elemento
        }
        db.close();
        getWindow().setFormat(PixelFormat.RGBA_8888);
        //visto che usiamo i gradient, usiamo questo trick (vedi snippet forum) getWindow().addFlags(WindowManager.LayoutParams.FLAG_DITHER);
        //wfsLv.setBackgroundDrawable(new GradientDrawable(GradientDrawable.Orientation.BOTTOM_TOP, new int[]
        {
            Color.RED,Color.parseColor("#f2bf26")
        }
        ));
        //wfsTv.setBackgroundDrawable(new GradientDrawable(GradientDrawable.Orientation.TOP_BOTTOM, new int[]
        {
            Color.RED,Color.parseColor("#f2bf26")
        }
        ));
        //definizione ed uso di gradient in modo programmatico //animazioni in modo programmatico (vedi snippet forum) Animation a1 = new TranslateAnimation(Animation.RELATIVE_TO_SELF, 0.0f, Animation.RELATIVE_TO_SELF, 0.0f, Animation.RELATIVE_TO_PARENT, 1.0f, Animation.RELATIVE_TO_SELF, 0.0f);
        a1.setDuration(1000);
        a1.setInterpolator(AnimationUtils.loadInterpolator(this, android.R.anim.decelerate_interpolator));
        wfsLv.startAnimation(a1);
        //entra da sotto Animation a2 = new TranslateAnimation(Animation.RELATIVE_TO_SELF, 0.0f, Animation.RELATIVE_TO_SELF, 0.0f, Animation.RELATIVE_TO_PARENT, -1.0f, Animation.RELATIVE_TO_SELF, 0.0f);
        a2.setDuration(1000);
        a2.setInterpolator(AnimationUtils.loadInterpolator(this, android.R.anim.decelerate_interpolator));
        wfsTv.startAnimation(a2);
        //entra da sopra wfsLv.setClickable(true);
        //e affidiamo la gestione del tap/click ad un apposito listener, che ci permetterà di agire sull’elemento cliccato e ricaricare la nostra lista wfsLv.setOnItemClickListener        (new AdapterView.OnItemClickListener()
        {
            public void onItemClick(AdapterView&lt;
            ?&gt;
            parent,           View v, int position, long id)
            {
                TextView txtId = (TextView)           v.findViewById(R.id.wfsTv);
                c.requery();
            }
        }
        );
        /*wfsTv.setOnClickListener(new View.OnClickListener()
        {
            @Override         public void onClick(View v)
            {
                CharSequence text = "Workflow scelto!";
                int duration = Toast.LENGTH_SHORT;
                Toast toast = Toast.makeText(getApplicationContext(), text, duration);
                toast.show();
            }
        }
        );
        */     TextView masterTv = (TextView)findViewById(R.id.masterTv);
        masterTv.setText("Master");
        masterTv.setOnClickListener(new View.OnClickListener()
        {
            @Override         public void onClick(View v)
            {
                startSubActivity();
            }
        }
        );
    }
    private void startSubActivity()
    {
        Intent intent = new Intent(this, ConfigChoice.class);
        startActivity(intent);
    }
} 
```

编辑

```
protected void onCreate(Bundle savedInstanceState) {

        super.onCreate(savedInstanceState);
        setContentView(R.layout.choice);

        properties_container = (LinearLayout ) findViewById(R.id.properties_container);

        String host = (String) InitJadeProperties.retrieve(this, getString(R.string.main_container_host), getString(R.string.default_host));
        String port = (String) InitJadeProperties.retrieve(this, getString(R.string.main_container_port), getString(R.string.default_port));

        wfsTv=(TextView)findViewById(R.id.wfsTv);
        ListView wfsLv = (ListView)findViewById(R.id.wfsLv);

        db=new MyDatabase(getApplicationContext());
        db.open();  //apriamo il db

        if(db.fetchWfs().getCount()==0){//inserimento dati, solo se il db è vuoto

                db.insertWf("WF1", "class1");
                db.insertWf("WF2", "class2");
                db.insertWf("WF3", "class3");
                db.insertWf("WF4", "class4");
                db.insertWf("WF5", "class5"); 

        }

        c=db.fetchWfs(); // query
        startManagingCursor(c);

        SimpleCursorAdapter adapter=new SimpleCursorAdapter( //semplice adapter per i cursor
                        this, 
                        R.layout.wfs, //il layout di ogni riga/prodotto 
                        c, 
                        new String[]{MyDatabase.WfMetaData.ID,MyDatabase.WfMetaData.WF_NAME_KEY,MyDatabase.WfMetaData.WF_CLASS_KEY},//questi colonne 
                        new int[]{R.id.IDTv,R.id.nameTv,R.id.classTv});//in queste views

        wfsLv.setAdapter(adapter); //la listview ha questo adapter

        adapter.notifyDataSetChanged();
        //qui vediamo invece come reperire i dati e usarli, in questo caso li stampiamo in una textview

        int nameCol=c.getColumnIndex(MyDatabase.WfMetaData.WF_NAME_KEY);  //indici delle colonne
        int classCol=c.getColumnIndex(MyDatabase.WfMetaData.WF_CLASS_KEY);       

        if(c.moveToFirst()){  //se va alla prima entry, il cursore non è vuoto
                do {

                        wfsTv.append("Wf Name:"+c.getString(nameCol)+", Class:"+c.getString(classCol)+"\n"); //estrazione dei dati dalla entry del cursor

                        } while (c.moveToNext());//iteriamo al prossimo elemento
        }

        db.close();
        getWindow().setFormat(PixelFormat.RGBA_8888);   //visto che usiamo i gradient, usiamo questo trick (vedi snippet forum)
        getWindow().addFlags(WindowManager.LayoutParams.FLAG_DITHER);  

        //wfsLv.setBackgroundDrawable(new GradientDrawable(GradientDrawable.Orientation.BOTTOM_TOP, new int[]{Color.RED,Color.parseColor("#f2bf26")}));
        //wfsTv.setBackgroundDrawable(new GradientDrawable(GradientDrawable.Orientation.TOP_BOTTOM, new int[]{Color.RED,Color.parseColor("#f2bf26")}));
        //definizione ed uso di gradient in modo programmatico

        //animazioni in modo programmatico (vedi snippet forum)
        Animation a1 = new TranslateAnimation(Animation.RELATIVE_TO_SELF, 0.0f, Animation.RELATIVE_TO_SELF, 0.0f, Animation.RELATIVE_TO_PARENT, 1.0f, Animation.RELATIVE_TO_SELF, 0.0f);
        a1.setDuration(1000);
        a1.setInterpolator(AnimationUtils.loadInterpolator(this, android.R.anim.decelerate_interpolator));
        wfsLv.startAnimation(a1);
        //entra da sotto

        Animation a2 = new TranslateAnimation(Animation.RELATIVE_TO_SELF, 0.0f, Animation.RELATIVE_TO_SELF, 0.0f, Animation.RELATIVE_TO_PARENT, -1.0f, Animation.RELATIVE_TO_SELF, 0.0f);
        a2.setDuration(1000);
        a2.setInterpolator(AnimationUtils.loadInterpolator(this, android.R.anim.decelerate_interpolator));
        wfsTv.startAnimation(a2);
        //entra da sopra

        wfsLv.setClickable(true);
        //e affidiamo la gestione del tap/click ad un apposito listener, che ci permetterà di agire sull’elemento cliccato e ricaricare la nostra lista

        wfsLv.setOnItemClickListener
               (new AdapterView.OnItemClickListener() {
        public void onItemClick(AdapterView<?> parent,
                  View v, int position, long id) {
         //TextView txtId = (TextView)v.findViewById(R.id.wfsTv); 
         CharSequence text = "Workflow scelto!";
            int duration = Toast.LENGTH_SHORT;

            Toast toast = Toast.makeText(getApplicationContext(), text, duration);
            toast.show();
         c.requery(); 
        }
               }); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-14T10:02:17.767

```
listview.setOnItemClickListener(new OnItemClickListener() {
   @Override
   public void onItemClick(AdapterView<?> arg0, View arg1, int arg2, long arg3) {
       //---> arg2 <-- will give you row number
       // your code goes here
    }
}); 
```

并更改数据

```
adapter.notifyDataSetChanged(); 
```

# c# - 如何在 Windows 窗体/WPF 中为数据库视图（带连接）创建编辑器？

> ID：10581047
> 
> 赞同：8
> 
> 时间：2012-05-14T09:54:52.480
> 
> 标签：c#, sql, winforms

在 WPF/WinForms 中为数据库中的某些数据创建快速编辑器的最简单方法是什么，其中数据由 SQL Server 数据库中的视图表示？

假设我有一个表`Person { id int, name nvarchar(max), GenderID int, CityID int}`，其中 GenderID 和 CityID 是对表 Gender 和 City 的引用。在编辑器中，Person 将显示为 name 文本框、gender 组合框（从 Gender 表中选择性别名称）和 city 列相同。

我可以做一些简单的事情吗？一些控制/代码会生成这个吗？如果我只想选择数据，那么 WinForms DataGridView 或 WPF DataGrid 可以为每个属性生成一列，并为集合中的每个对象显示一行。-

如果关系由外键定义，是否有某种类似的魔术控制可以为数据库视图执行此操作？

在我看来，成千上万的开发人员都面临过这种问题——快速创建一个 GUI 来编辑与其他表有关系的数据库行，因此应该有某种普遍接受的解决方案。还是每个人都在代码中这样做？或者，如果有其他语言的工具，不是 C#，不是 Windows 窗体 - 比如 dBase。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T18:25:17.557

您正在描述 Web 开发中所谓的脚手架。脚手架是一种为数据库中的每个表自动生成 UI 的方法。脚手架可让您创建一个功能性 UI，用于根据数据架构查看和编辑数据。以下是 WPF 脚手架的一些资源。

1.  Code Project 网站上有一篇 WPF 脚手架文章：[WPF CRUD Generator (Scaffolding)](http://www.codeproject.com/Articles/36975/WPF-CRUD-Generator-Scaffolding)
2.  还有一个 Codeplex 项目可能会有所帮助：[WPF Scaffolder](http://wpfscaffolder.codeplex.com)

享受！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T22:13:30.733

ASP .NET 动态数据使用模板为您自动生成一个 UI，该 UI 将代表您选择的数据库表/视图，包括您想要的自动生成的 CRUD 功能。

它甚至可以正确查找表并自动呈现下拉列表。

[http://msdn.microsoft.com/en-us/library/ee845452(v=vs.100).aspx](http://msdn.microsoft.com/en-us/library/ee845452(v=vs.100).aspx)

# iphone - 从后台恢复应用程序时 RestKit 崩溃

> ID：10581049
> 
> 赞同：3
> 
> 时间：2012-05-14T09:55:00.447
> 
> 标签：iphone, json, exception-handling, restkit

我正在为我的应用程序使用 RestKit 框架来服务器 JSON 通信。一切都很顺利，直到我按下主页按钮并尝试恢复我的应用程序。我在这个框架方法中得到了一个 exception_bad_access：

```
- (BOOL)shouldDispatchRequest {
if (nil == self.reachabilityObserver || NO == [self.reachabilityObserver isReachabilityDetermined]) {
    return YES;
}

return [self.reachabilityObserver isNetworkReachable]; 
```

}

在这一行：`if (nil == self.reachabilityObserver || NO == [self.reachabilityObserver isReachabilityDetermined]) {`

如果我第二次尝试重新打开我的应用程序，它会毫无问题地加载 - 但会丢失我所在的屏幕和后续信息。

关于解决这个问题的任何想法？

谢谢，克林顿

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T22:05:55.663

尝试用这个替换它：

```
- (BOOL)shouldDispatchRequest {
    if (nil != self.reachabilityObserver && YES == [self.reachabilityObserver isReachabilityDetermined]) {
        return [self.reachabilityObserver isNetworkReachable];
    }
}

return YES; 
```

# java - JNI：如何从 Java Native Method 调用 c++ 函数

> ID：10581052
> 
> 赞同：0
> 
> 时间：2012-05-14T09:55:11.573
> 
> 标签：java, c++, java-native-interface

我正在开发一些使用 jni 的 java 应用程序。那么现在我想**从 JNI 方法调用纯 C++ 函数**。好吧，我正在这样做，如下面的代码所示。这里创建了 dll，但是当我尝试运行时，我收到错误 **java.lang.UnsatisfiedLinkError: Can't finddependent library**。我正在 Visual Studio 中创建我的 dll。所以告诉我我在调用 c++ 函数时做错了什么。

这是我的 .cpp 文件的代码

```
#include "SensorDetect.h"
#include <stdio.h>
#include <windows.h>
// Include specific Tools header
#include "Tools.h"
   // Include IO_XRayUSB_MD_VC80 header
#include "IO_XRayUSB.h"

// Include IO_XRayUSB_MD_VC80 library
#pragma message ("Using : IO_XRayUSB_MD_VC80.lib")
#pragma comment(lib, "IO_XRayUSB_MD_VC80.lib")

//// Custom user Callback function which is called by IO_XrayUsb when a device is plugged or unplugged
void _stdcall DevicePlugUnplugCallback(XRay_CALLBACK * pCallBackInfo, int nCallBackCount)
{
    if (pCallBackInfo && (nCallBackCount > 0))
    {
        for (int nDeviceIndex = 0; nDeviceIndex < nCallBackCount; nDeviceIndex ++)
        {
            switch(pCallBackInfo[nDeviceIndex].nState)
            {
                case XRAY_USB_PLUGGED_DEVICE :
                    printf("\n=>Callback Device: %s has been Plugged...\n\n", pCallBackInfo[nDeviceIndex].pcDeviceName);
                    break;
                case XRAY_USB_UNPLUGGED_DEVICE :
                    printf("\n=>Callback Device: %s has been Unplugged...\n\n", pCallBackInfo[nDeviceIndex].pcDeviceName);
                    break;
                default:
                    break;
            }
        }
    }
}

extern "C"
JNIEXPORT void JNICALL Java_sensordetect_SensorDetect_getDevice(JNIEnv * env, jclass cl)
{

     const int nNbMaxDevices = 10;
    char pDeviceList[nNbMaxDevices][260];
    int nDeviceCount = 10;
    XRay_HANDLE hDevice;
    XRay_SENSOR_INFO SensorInfo;

    //int nTriggerMode = GetChoice(1, "Choose Trigger Mode:\t0:XVIS_detection    1:TWI_request_detection");
    char pcBuffer[100];
    int nKey;

        nKey=0;

            int nTriggerMode=nKey;

    try
    {
        // XRay_RegisterCallBackPlugDevice to be notified of device plug/unplug
**//This function call creates problem in loading dll. error:Can't find dependent libraries**
     BOOL bSuccess = XRay_RegisterCallBackPlugDevice(DevicePlugUnplugCallback);    

        //for (int nIndex = 0; nIndex < 1; nIndex ++)
            printf("\tFound device : %s\n", pDeviceList[0]);

    }
    catch (...) // catch own CMyException
        {
            //e.ShowReason();
        }

    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T10:01:32.120

依赖项之一或其中之一不在环境变量`IO_XRayUSB_MD_VC80.dll`中列出的目录之一中`PATH`，或者不存在于运行应用程序的同一目录中。

要获取 DLL 所依赖的 DLL 列表，您可以使用[`dumpbin.exe`](http://msdn.microsoft.com/en-us/library/c1h23y6c%28v=vs.90%29.aspx)：

> dumpbin.exe /DEPENDENTS C:\path\to\IO_XRayUSB_MD_VC80.dll

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-14T10:06:29.790

确保`-Djava.library.path=C:\path\to\DLLs`在启动程序时指定选项，和/或在 Windows 中包含 DLL 目录`PATH`。

# python - 让python每爬20页后休眠60秒

> ID：10581054
> 
> 赞同：0
> 
> 时间：2012-05-14T09:55:14.380
> 
> 标签：python, time, ip, sleep

我正在尝试从中国微博新浪微博收集转发数据，您可以看到以下代码。但是，我遇到了IP请求超出限制的问题。

为了解决这个问题，我必须为代码设置 time.sleep()。您可以看到我试图在代码中添加一行“time.sleep(10) # 来抑制 ip 请求限制”。因此，python 将在抓取一页转推后休眠 10 秒（一页包含 200 条转推）。

然而，它仍然不足以解决IP问题。

因此，我计划在每 20 页爬网后更系统地让 python 休眠 60 秒。您的想法将不胜感激。ids=[3388154704688495, 3388154704688494, 3388154704688492]

```
 addressForSavingData= "C:/Python27/weibo/Weibo_repost/repostOwsSave1.csv"    
        file = open(addressForSavingData,'wb') # save to csv file 

        for id in ids:
            if api.rate_limit_status().remaining_hits >= 205:  
                for object in api.counts(ids=id):
                    repost_count=object.__getattribute__('rt')
                    print id, repost_count
                    pages= repost_count/200 +2  # why should it be 2? cuz python starts from 0  
                    for page in range(1, pages):
                        time.sleep(10)  # to opress the ip request limit
                        for object in api.repost_timeline(id=id, count=200, page=page):  # get the repost_timeline of a weibo
                            """1.1 reposts"""
                            mid = object.__getattribute__("id")
                            text = object.__getattribute__("text").encode('gb18030')     # add encode here
                            """1.2 reposts.user"""
                            user = object.__getattribute__("user") # for object in user
                            user_id = user.id                                   
                            """2.1 retweeted_status"""
                            rts = object.__getattribute__("retweeted_status")
                            rts_mid = rts.id  # the id of weibo     
                            """2.2 retweeted_status.user"""
                            rtsuser_id = rts.user[u'id']                                                        
                            try:
                                w = csv.writer(file,delimiter=',',quotechar='|', quoting=csv.QUOTE_MINIMAL)
                                w.writerow(( mid,
                                            user_id, rts_mid,
                                            rtsuser_id, text)) # write it out   
                            except:  # Exception of UnicodeEncodeError
                                pass
            elif api.rate_limit_status().remaining_hits < 205:  
                sleep_time=api.rate_limit_status().reset_time_in_seconds # time.time()
                print sleep_time, api.rate_limit_status().reset_time
                time.sleep(sleep_time+2)
        file.close()
        pass 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T10:07:56.430

你能不只是调整脚本的节奏吗？

我建议让你的脚本在每个请求之间休眠，而不是同时发出一个请求。说一分钟多一点。这样你也可以避免任何洪水禁令，这被认为是好的行为。

如果服务器不会因为发送太多请求而超时，那么调整请求的速度还可以让您更快地完成任务。

* * *

如果对 IP 有限制，有时它们不是很好且简单的解决方案。例如，如果您运行 apache [http://opensource.adnovum.ch/mod_qos/](http://opensource.adnovum.ch/mod_qos/)会限制带宽和连接，特别是它会限制；

*   最大并发请求数
*   带宽限制，例如每秒对 URL 的最大允许请求数或每秒下载的最大/最小千字节数。
*   限制每秒请求事件的数量
*   通用请求行和标题过滤器以拒绝未经授权的操作。
*   请求体数据限制和过滤
*   来自单个 IP 源地址或动态保持活动控制的最大允许连接数。

你可能想从这些开始。您可以在请求中发送引荐来源网址，并且只建立单个连接，而不是多个连接。

你也可以参考这个[问题](https://stackoverflow.com/questions/131681/apache-rate-limiting-options)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-20T09:06:53.950

我想出解决方案：

# 首先，给一个整数，例如0

```
i = 0 
```

# 二、在for page循环中，添加如下代码

```
for page in range(1, 300):
    i += 1
    if (i % 25 ==0):
        print i, "find i which could be exactly divided by 25" 
```

# iphone - UIView里面的UIScrollView

> ID：10581056
> 
> 赞同：0
> 
> 时间：2012-05-14T09:55:19.297
> 
> 标签：iphone, objective-c, ios, xcode

我有一个项目，其中我在 UIView 中有一个 UIScrollView。在 UIScrollView 内必须看到 3 列和 X 行的按钮列表。我有显示按钮的代码，但没有插入 UIScrollView，它打印出来并且不滚动。除此之外，还要覆盖我在视图底部的 TabBar。

显示按钮的函数代码是

```
for (int y_axis=0; y_axis<=3; y_axis++)
    {
        for (int x_axis=0; x_axis<=2; x_axis++)
        {

            UIButton *btn=[[UIButton alloc] initWithFrame:CGRectMake(16+100*x_axis,100.0+115*y_axis,88.0 ,88.0)];
            btn.backgroundColor=[UIColor brownColor];
            [self.view addSubview:btn];

        }
    } 
```

如何在 UIScrollView 中显示它？谢谢！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T09:58:49.543

假设您有一个 UIScrollView 滚动器，您必须将最后一行更改为此；

```
[self.scroller addSubview:btn]; 
```

如果没有，您将其添加到视图中，而不是滚动条。此外，您必须更改滚动条内容大小，如果它包含多少，则为 X*Y。让它包含整个屏幕，仅此而已；

```
[self.scroller setContentSize:CGSizeMake(320, 480)]
                                         ^     ^ 
```

将其替换为您要滚动的宽度和高度。每次在新按钮下方添加按钮时，都应该更新 contentsize。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-14T09:59:14.907

这是因为您在视图上添加按钮而`[self.view addSubview:btn];`不是在`ScrollView`. 尝试使用所有按钮创建视图。并使用您的按钮设置您的`contentview`视图`scrollview`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-14T10:03:23.570

首先你需要`UIScrollViewDelegate`在你的 .h 文件中，然后检查按钮是否是 yourScrollView 的子视图，或者你在滚动视图中添加这个按钮，代码如下所示......

```
[yourScrollView addSubview:yourbuttonname]; 
```

之后在你的 viewDidLoad 方法中声明你的滚动视图的 contentsize 像这样......

```
yourScrollView.contentSize=CGSizeMake(320, anyheight);///here define height which you want to scroll the view... 
```

希望这对你有帮助.... :)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-14T10:04:03.660

尝试以下步骤：

```
 for loop
    {
        create buttons along with the desired frames;
        add those buttons to scrollview;
    }
    set the content size of the scrollview according to no of rows;
    add the scroll view to main view i.e. self.view; 
```

# c# - XML 命名空间中不存在该标记

> ID：10581060
> 
> 赞同：5
> 
> 时间：2012-05-14T09:55:34.583
> 
> 标签：c#, wpf, xaml

我在“FluidMoveBehavior”上看到以下错误。

```
The tag 'FluidMoveBehavior' does not exist in XML namespace
'http://schemas.microsoft.com/expression/2010/interactions'.
Line 22 Position 14. 
```

这是 XAML 文件：

```
<Window x:Class="GoogleMapProject.KinectOverlay"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:i="http://schemas.microsoft.com/expression/2010/interactivity"
        xmlns:ei="http://schemas.microsoft.com/expression/2010/interactions"
        xmlns:GoogleMapProject_Behaviors="clr-namespaces:GoogleMapProject.Behaviors"
        WindowState="Maximized" WindowStyle="None" Background="Transparent"
                     AllowsTransparency="True"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        mc:Ignorable="d"
        Height="300"
        Width="300"
        Title="KinectOverlay"
        DataContext="{Binding PoseViewModel,
                      Source={StaticResource MainViewModel}}">

    <Grid>
        <i:Interaction.Behaviors>
            <ei:FluidMoveBehavior AppliesTo="Children" Duration="0:0:0.5">
                <ei:FluidMoveBehavior.EaseX>
                    <SineEase EasingMode="EaseInOut"/>
                </ei:FluidMoveBehavior.EaseX>
                <ei:FluidMoveBehavior.EaseY>
                    <SineEase EasingMode="EaseInOut"/>
                </ei:FluidMoveBehavior.EaseY>
            </ei:FluidMoveBehavior>
        </i:Interaction.Behaviors>
        <Canvas Background="Transparent"
                DataContext="{Binding PoseViewModel,
                              Source={StaticResource MainViewModel}}">

            <!-- Left hand -->
            <Image Source="{Binding LeftHandImage}" x:Name="leftHand" Stretch="Fill"
                   Canvas.Left="{Binding LeftHandPosition.X, Mode=TwoWay}"  
                   Canvas.Top="{Binding LeftHandPosition.Y, Mode=TwoWay}"
                   Visibility="{Binding HandVisibility}" Opacity="0.75"
                   Height="118" Width="80" RenderTransformOrigin="0.5,0.5">
                <Image.RenderTransform>
                    <TransformGroup>
                        <ScaleTransform ScaleX="{Binding LeftHandScale}"
                                        ScaleY="{Binding LeftHandScale}"/>
                        <SkewTransform/>
                        <RotateTransform/>
                        <TranslateTransform X="-40" Y="-59"/>
                    </TransformGroup>
                </Image.RenderTransform>
            </Image>

            <!-- Right hand -->
            <Image x:Name="righthand" Source="{Binding RightHandImage}"
                   Stretch="Fill"
                   Canvas.Left="{Binding RightHandPosition.X, Mode=TwoWay}"  
                   Canvas.Top="{Binding RightHandPosition.Y, Mode=TwoWay}"
                   Visibility="{Binding HandVisibility}" Opacity="0.75"
                   Height="118" Width="80" RenderTransformOrigin="0.5,0.5">
                <Image.RenderTransform>
                    <TransformGroup>
                        <ScaleTransform ScaleX="{Binding RightHandScale}"
                                        ScaleY="{Binding RightHandScale}"/>
                        <SkewTransform/>
                        <RotateTransform/>
                        <TranslateTransform X="-40" Y="-59"/>
                    </TransformGroup>
                </Image.RenderTransform>
            </Image>

            <!-- Video -->
            <Image Canvas.Left="0" Canvas.Top="100" Width ="360"
                   Visibility="{Binding ShowVideo,
                          Converter={StaticResource booleanToVisibilityConverter}}">
                <i:Interaction.Behaviors>
                    <GoogleMapProject_Behaviors:DisplayVideoBehavior/>
                </i:Interaction.Behaviors>
            </Image>

            <!-- Shows last speech command -->
            <TextBlock Canvas.Left="10" Canvas.Top="500"
                       Text="{Binding LastCommand}" FontSize="36"
                       Foreground="#FF001900">
            </TextBlock>
        </Canvas>
    </Grid>
</Window> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-14T15:31:32.573

将程序集添加`microsoft.expression.interactions.dll`到您的项目引用中。

在这里免费提供：

[`http://www.microsoft.com/downloads/en/details.aspx?FamilyID=75e13d71-7c53-4382-9592-6c07c6a00207&displaylang=en`](http://www.microsoft.com/en-us/download/details.aspx?id=10801)

EULA 和重新分配在这里：

`C:\Program Files (x86)\Microsoft SDKs\Expression\Blend\.NETFramework\v4.0`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-15T13:30:39.403

对我来说正在工作。

我做了以下步骤

1）项目>属性>目标框架> 4.0

2）重新制作“System.Windows.Interactivity”的参考

我希望这个对你有用。

# django - 对象没有属性“actor_actions”（django-activity-stream）

> ID：10581062
> 
> 赞同：0
> 
> 时间：2012-05-14T09:55:39.517
> 
> 标签：django

我正在使用`django-activity-stream`应用程序并尝试[编写自定义流](http://justquick.github.com/django-activity-stream/streams.html#writing-custom-streams)。

帐户/managers.py

```
from datetime import datetime
from django.contrib.contenttypes.models import ContentType
from actstream.managers import ActionManager, stream
class MyActionManager(ActionManager):
    @stream
    def mystream(self, obj, verb='posted', time=None):
        if time is None:
            time = datetime.now()
        return obj.actor_actions.filter(verb = verb, timestamp__lte = time) 
```

视图.py

```
from actstream.models import Action
current_user = get_object_or_404(User, username=username)
current_user.actor_actions.mystream('commented') 
```

设置.py

```
ACTSTREAM_MANAGER = 'accounts.managers.MyActionManager' 
```

错误消息 >`'str' object has no attribute 'actor_actions'`和[完整的回溯](http://dpaste.org/ztHXE/)

多谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-30T06:38:42.900

我刚遇到这个问题，不知道什么时候开始发生。我前段时间更新到 Django 1.4，我刚开始看到这些问题。

我最终做的是还原查询

```
@stream
def my_stream(object, *args, **kwargs):
    ct = ContentType.objects.get_for_model(object.__class__)
    return self.model.objects.filter(actor_object_id=object.pk, 
        actor_content_type=ct, public=True, **kwargs) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T13:31:23.213

`django-activity-stream`最近 Django 1.4 对我来说已经被破坏了。[这是您在此问题](https://github.com/justquick/django-activity-stream/issues/92)上与某人分享的错误。您应该参与该页面，以便 justquick 可以修复看起来像错误的问题。

# c# - 运行 c# windows 应用程序时出错

> ID：10581067
> 
> 赞同：0
> 
> 时间：2012-05-14T09:55:57.030
> 
> 标签：c#, c#-3.0

我编写了 ac# windows 应用程序，我想在没有任何安装的情况下在其他计算机上运行它。

我设置了 netCFSetup v35，但是当我运行我的应用程序时，出现了这个错误：

应用程序无法初始化......

任何人都可以帮助我吗？...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T10:01:09.733

我认为您正在为您的应用程序安装错误的框架。

由于它是一个 Windows 应用程序，我建议您安装 .Net 桌面框架。您正在安装的是用于 Windows Mobile 6.5 或更早版本的 Compact Framework（文件名为 netCFSetup v35 中的 CF）。

如果您在 .Net 3.5 版本中创建了您的应用程序。安装这个版本

[http://www.microsoft.com/en-us/download/details.aspx?id=21](http://www.microsoft.com/en-us/download/details.aspx?id=21)

**要了解您的应用程序是在哪个版本的 .Net Framework 中编写的，请转到项目的属性部分。在那里你会得到你的版本号。**

# objective-c - ObjC：无法从外部访问自定义类的 ivar

> ID：10581068
> 
> 赞同：0
> 
> 时间：2012-05-14T09:55:59.980
> 
> 标签：objective-c, xcode, cocos2d-iphone, instance-variables, undeclared-identifier

我正在尝试在 cocos2d 中制作一个基本游戏，并且我已经到了尝试根据英雄精灵的位置滚动背景的地步。英雄是在一个名为 GameplayLayer 的类中与控件一起创建的，并且对于非滚动背景都可以正常工作。

我正在关注的书给了我一些示例代码，可以根据我的角色何时通过中点来进行滚动，这看起来很完美，但它没有执行，我相信这是因为它正在创建我的 Hero 的另一个实例类，并且该实例与屏幕上显示的实例之间没有链接。

我假设我可以通过从背景滚动类（称为 YrrasCoastBackgroundLayer）中访问我的英雄的工作实例来解决这个问题，但是我有一个脑块，无法让它看到它。我试过@property，但Xcode 只是在其他类中看不到它。

这是来自 GameplayLayer 类的 .h 文件，其中英雄被创建/连接到控件等：

```
#import "CCLayer.h"
#import "cocos2d.h"
#import "CommonProtocols.h"
#import "SneakyJoystick.h"
#import "SneakyButton.h"
#import "SneakyJoystickSkinnedBase.h"
#import "SneakyButtonSkinnedBase.h"
#import "HeroMale.h"
#import "GameCharacter.h"

@interface GameplayLayer : CCLayer <GameplayLayerDelegate> {
    CCSprite *playerSprite;
    SneakyJoystick *playerJoystick;
    SneakyButton *jumpButton;  
    CCSpriteBatchNode *sceneSpriteBatchNode;
    HeroMale *heroMale;
}

@property (nonatomic, readonly) SneakyJoystick *playerJoystick;
@property (nonatomic, readonly) SneakyButton *jumpButton;
@property (nonatomic, assign) HeroMale *heroMale;

@end 
```

YrrasCoastBackgroundLayer.h 文件肯定会导入 GameplayLayer.h，这是 YrrasCoastBackgroundLayer.m 文件中我希望能够访问该 *heroMale ivar 的方法的内容：

```
- (void) adjustLayer {
    float heroXPosition = heroMale.position.x;
    CGSize screenSize = [[CCDirector sharedDirector] winSize];
    float halfOfTheScreen = screenSize.width / 2.0f;
    CGSize levelSize = [[GameManager sharedGameManager] getDimensionsOfCurrentScene];

    if ((heroXPosition > halfOfTheScreen) && (heroXPosition < (levelSize.width - halfOfTheScreen))) {
        float newXPosition = halfOfTheScreen - heroXPosition;
        [self setPosition:ccp(newXPosition, self.position.y)];
    }
} 
```

我收到一条 Xcode 错误`float heroXPosition = heroMale.position.x`，指出 heroMale 是一个未声明的标识符。我怎样才能使它在这里可用，这甚至可以解决问题吗？

更新：

这是 YrrasCoastBackgroundLayer 的 .h 文件：

```
#import "CCLayer.h"
#import "cocos2d.h"
#import "HeroMale.h"
#import "GameplayLayer.h"

@interface YrrasCoastBackgroundLayer : CCLayer {
    // Web Tutorial
    CCParallaxNode *backgroundNode;
    CCSprite *backgroundImage;

    // Book Tutorial
    CCSpriteBatchNode *sceneSpriteBatchNode;
    CCParallaxNode *parallaxNode;
}

@property (nonatomic, assign) GameplayLayer *gameplayLayer;

@end 
```

这是 YrrasCoastBackgroundLayer.m：

```
#import "YrrasCoastBackgroundLayer.h"

@implementation YrrasCoastBackgroundLayer

@synthesize gameplayLayer;

- (id) init {
    self = [super init];

if (self != nil) {

    // Web Tutorial
    backgroundNode = [CCParallaxNode node];
    [self addChild:backgroundNode z: -1];

    backgroundImage = [CCSprite spriteWithFile:@"yrras-coast-ipad-hd.png"];

    CGPoint dustSpeed = ccp(0.1, 0.1);

    [backgroundNode addChild:backgroundImage z:0 parallaxRatio:dustSpeed positionOffset:ccp(1024, [[CCDirector sharedDirector]winSize].height / 2)];

    self.gameplayLayer = gameplayLayer;

    [self scheduleUpdate];

    }
    return self;
}

- (void)update:(ccTime)deltaTime {

    // Web Tutorial
    // CGPoint backgroundScrollVel = ccp(-1000, 0);
    // backgroundNode.position = ccpAdd(backgroundNode.position, ccpMult(backgroundScrollVel, deltaTime));

    CCArray *listOfGameObjects = [sceneSpriteBatchNode children];
    for (GameCharacter *tempChar in listOfGameObjects) {
        [tempChar updateStateWithDeltaTime:deltaTime andListOfGameObjects:listOfGameObjects];
    }
    [self adjustLayer];

}

// Book Tutorial
- (void) adjustLayer {
    float heroXPosition = gameplayLayer.heroMale.position.x;
    CCLOG(@"heroXPosition is %f", gameplayLayer.heroMale.position.x);
    CGSize screenSize = [[CCDirector sharedDirector] winSize];
    float halfOfTheScreen = screenSize.width / 2.0f;
    CGSize levelSize = [[GameManager sharedGameManager] getDimensionsOfCurrentScene];
    if ((heroXPosition > halfOfTheScreen) && (heroXPosition < (levelSize.width - halfOfTheScreen))) {
        float newXPosition = halfOfTheScreen - heroXPosition;
        [self setPosition:ccp(newXPosition, self.position.y)];
    }
}

@end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T10:01:57.493

您需要将您的实例`GameplayLayer`传递给`YrrasCoastBackgroundLayer`图层。

您可以在以下位置声明可分配属性`YrrasCoastBackgroundLayer`：

```
@property (nonatomic, assign) GameplayLayer gamplayLayer; 
```

当您初始化`YrrasCoastBackgroundLayer`通行证时，游戏层的实例并在您的`adjustLayer`方法中执行：

```
float heroXPosition = gameplayLayer.heroMale.position.x; 
```

**编辑 ：**

假设这是您创建场景的方式：

```
 MyScene *scene = [MyScene scene];
  gameplayLayer = [[GameplayLayer alloc] init];
  bgLayer = [[YrrasCoastBackgroundLayer alloc] init];
  bgLayer.gameplayLayer = gameplayLayer; // This is where you assign the gameplay Layer to the background layer;

  [scene addChild:bgLayer];
  [scene addChild:gameplayLayer];

  // Release both layers if you dont need them anymore here (scene addChild retains them when they are added)      
  [gameplayLayer release];
  [bgLayer release]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T10:10:02.347

我不确定如何访问 heroMale，因为它不是 YrrasCoastBackgroundLayer 的成员，而是 GameplayLayer 的成员。您必须拥有 GameplayLayer 类的对象/实例才能访问 heroMale。这就是您获得未声明标识符的原因（heroMale 不是 YrrasCoastBackgroundLayer 类的属性）。

亲切的问候，
博

# c# - 如何在 wpf 中模拟按下 F2 按钮并将键盘焦点放在树视图上？

> ID：10581070
> 
> 赞同：0
> 
> 时间：2012-05-14T09:56:05.023
> 
> 标签：c#, wpf, treeview, focus

我正在尝试以下操作：

```
// Key to send   
 var key = Key.F2;       
// Event to send                         
var routedEvent = Keyboard.KeyDownEvent; 
TreeControl.RaiseEvent(
               new KeyEventArgs(
                Keyboard.PrimaryDevice,
                PresentationSource.FromVisual(TreeControl),
                0,
                key) { RoutedEvent = routedEvent }
            ); 
```

但是我不能以这种方式以编程方式模拟 F2，虽然`TreeControl`有键盘焦点，如果我在手动后立即按 F2，它工作正常。请帮忙。

我试图在调用处理程序的那一刻调用此代码`OnItemSelected`（并非总是如此，必要时）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T16:36:22.680

这是我的代码：

```
// First: PreviewKeyDown
KeyEventArgs previewArgs = 
   new KeyEventArgs(Keyboard.PrimaryDevice, Keyboard.PrimaryDevice.ActiveSource, 
        0, Key.Down);
previewArgs.RoutedEvent = Keyboard.PreviewKeyDownEvent;
focusedTextBox.RaiseEvent(previewArgs);

// Second: KeyDown
IInputElement newFocusedElement = Keyboard.FocusedElement;
KeyEventArgs args = 
   new KeyEventArgs(Keyboard.PrimaryDevice, Keyboard.PrimaryDevice.ActiveSource, 
        0, Key.Down);
args.RoutedEvent = Keyboard.KeyDownEvent;
newFocusedElement.RaiseEvent(args); 
```

反正你的和我的差别不大。。。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T06:21:47.740

最初发布的代码是正确的，我发现它可以正确模拟 F2 按下树视图。只是另一个与此无关的问题阻止了我看到这一点。

当我尝试从`OnItemSelected`处理程序模拟 F2 单击时，它不起作用，但处理程序的相同操作`LayoutUpdated`可以正常工作。

因此树视图需要完全更新以准备好接受按键。

# jquery - jQuery 自动完成。从选项列表中加载 URL。使用本地数据集

> ID：10581072
> 
> 赞同：1
> 
> 时间：2012-05-14T09:56:10.977
> 
> 标签：jquery, autocomplete, datasource, local

所以，这就是需要。

我每天访问几个目录，我的桌面充满了快捷方式。我想消除这个。所以我想出了一个想法，我将使用一个简单的网页，该网页将有一个目录名称列表（这些名称将来自本地数据源），当我键入时会自动完成，当我点击它们时，它们应该打开目录。它更像是点击它打开一个 URL。你明白吗？

我使用了 jQuery UI 中的代码。

```
<!DOCTYPE html>
<html lang="en">
<head>

<meta charset="utf-8">
<title>jQuery UI Autocomplete - Default functionality</title>
<link rel="stylesheet" href="css/redmond/jquery-ui-1.8.20.custom.css">
<script src="js/jquery-1.7.2.min.js"></script>
<script src="js/jquery-ui-1.8.20.custom.min.js"></script>

<link rel="stylesheet" href="../demos.css">
<script>
$(function() {
var availableTags = [
"ActionScript",
"AppleScript",
"Asp",
"BASIC",
"C",
"C++",
"Clojure",
"COBOL",
"ColdFusion",
"Python",
"Ruby",
"Scala",
"Scheme"
];
$( "#tags" ).autocomplete({
source: availableTags
});
});
</script>
</head>
<body>

<div class="demo">
<div class="ui-widget">
<label for="tags">Tags: </label>
<input id="tags" />
</div>

</div><!-- End demo -->

</body>
</html> 
```

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T10:28:52.917

如果它是asp.net，那么我会这样做

标记：

```
<asp:TextBox runat="server" ID="txtFileS" ></asp:TextBox> 
```

查询：

```
$(document).ready(function() {
            $('#txtFileS').autocomplete({
                source: function(request, response) {
                    $.ajax({
                    url: "Default.aspx/GetFileList",
                        data: "{ 'query': '" + request.term + "' }",
                        dataType: "json",
                        type: "POST",
                        contentType: "application/json; charset=utf-8",
                        dataFilter: function(data) { return data; },
                        success: function(data) {
                            response($.map(data.d, function(item) {
                                return {
                                    value: item
                                };
                            }));
                        }
                    });
                }

            });
        }); 
```

服务器端方法：

```
 [WebMethod]
    public static string[] GetFileList(string query)
    {
        var s = Directory.GetFiles("C:\\").ToArray();
        return s;  // you need to filter the array according to the query. 
    } 
```

PS：您需要在键入时过滤查询。在服务器端代码中。

# android - 使用 ant 构建 Android 项目，其中一个库项目依赖于另一个库项目

> ID：10581074
> 
> 赞同：15
> 
> 时间：2012-05-14T09:56:15.990
> 
> 标签：android, ant

我可能有这个不太常见的设置：

（> = 依赖）
Android 项目 > Android 库项目 1 > Android 库项目 2
所以我有一个 Android 库项目，它依赖于另一个库项目。

当我在 Eclipse 中构建项目时，一切正常，但我无法让我的构建与 Ant 一起工作。

首先 Ant 编译 Android 库项目 2，该项目生成一个 classes.jar 并将此文件放入 bin 文件夹中。
然后 Ant 尝试编译 Android 库项目 1，但后来我收到错误，因为它缺少 Android 库项目 2 中的类。

好吧，这并不奇怪，因为 jar 文件不包含在 libs 文件夹中。但是在 project.properties 中，我已经对库项目 2 建立了依赖关系，那么为什么 Ant 不将 classes.jar 复制到库项目 1 的 libs 文件夹中呢？

好吧，我可以想到一个使用 Ant 任务将文件复制到 libs 文件夹的解决方案，但是我必须修改我不喜欢的 build.xml。

** 编辑

问题是缺少 R 类，当我查看 classes.jar 时，这个 java 文件不包含 R 类。所以我的解决方案将无法正常工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-10T11:47:52.227

此行为是由构建工具 R17 中的更改引起的：[http ://tools.android.com/recent/dealingwithdependenciesinandroidprojects](http://tools.android.com/recent/dealingwithdependenciesinandroidprojects)

简而言之：库的 R 文件不再打包在该库的 classes.jar 中。但是，由于父库（在您的示例中为 project1）的 parent.R 还包含“子”库（在您的示例中为 project2）的资源引用，因此您不必引用 child-R .

用 project1.R import 语句替换 project1 中的所有 project2.R-import 语句，你应该没问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-14T10:15:49.237

这听起来像是一个非常脆弱的设置——你可能有充分的理由这样做，但是你可以解耦库之间的依赖吗？

例如; 实现一个[桥接模式](http://en.wikipedia.org/wiki/Bridge_pattern)来转换两个库之间的调用，并使调用的 Android 项目附加它们。这样，您在任何一个库中都没有依赖于另一个库的代码，并且唯一需要处理依赖项设置的项目是您的主项目。

使用库的主要原因之一是使代码可重用，这种方法确保某人（您、同事、您的继任者......）可以只插入一个库并创建自己的另一个库的实现。

这是另一篇关于在 Java 中应用桥接模式的好文章：http: [//java.dzone.com/articles/design-patterns-bridge](http://java.dzone.com/articles/design-patterns-bridge)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-14T10:03:18.937

为了让 ant 编译在 ant.properties 中添加依赖。例如：

```
android.library.reference.1=../path/to/library 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-15T09:48:01.943

那么问题是缺少R类。
所以我删除了两个库项目之间的 R 类依赖关系。
我不知道这是否可以解决，但我认为无论如何都是不好的做法。

没有这种依赖，Ant 可以正常构建。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-11-25T20:32:03.530

老问题，但像我一样，其他人可能会在这个问题上猛烈抨击......

官方的回答是“做不到”，具体来说：

> 在构建时，这些库一次一个地与应用程序合并，从最低优先级到最高优先级。**请注意，一个库本身不能引用另一个库，并且在构建时，库在与应用程序合并之前不会相互合并**。

（摘自官方文档：[“Reference a Library Project”](http://developer.android.com/tools/projects/projects-cmdline.html#ReferencingLibraryProject "参考图书馆项目")）。

这意味着任何事情都会发生，因为使用工具没有“干净”的方法（并且肮脏的方法是有序的）。

希望能帮助到你

# php - WordPress nextgen 画廊插件替代品

> ID：10581076
> 
> 赞同：0
> 
> 时间：2012-05-14T09:56:29.180
> 
> 标签：php, wordpress

我正在寻找 wordpress 插件 nextgen 画廊的替代品，我发现很多错误和缺乏功能，所以我正在寻找稳定和灵活的画廊插件。你认识一个吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T09:58:09.423

找到两个相当不错的：

[http://wordpress.org/extend/plugins/lightbox-gallery/](http://wordpress.org/extend/plugins/lightbox-gallery/) http://wordpress.org/extend/plugins/flash-album-gallery/

# jquery - BlockUI 定位在页面而不是屏幕上

> ID：10581079
> 
> 赞同：1
> 
> 时间：2012-05-14T09:56:58.220
> 
> 标签：jquery, position, blockui

我以前使用过这个插件，但现在 blockui 没有在页面上正确定位。在**屏幕上**，从顶部算起 40% 还可以，但问题出在**页面上**。它一直滚动到顶部。

如果我在页面的模块中有一个按钮，然后单击它以启动 blockui，则页面将滚动回顶部。我不知道为什么

这是html：

```
<div class="btn" id="block">
   <a href="#"><span>to buy tickets</span></a>
</div>
<div id="blockmsg">
  <a href="#" id="x"><img src="images/x.png" alt="x to close the window"/></a>
  <div class="blockmsg">
    <a href="#" class="hadran"><span>hadran.co.il</span></a>
    <a href="#" class="opera"><span>opera house</span></a>
    <div style="clear: both;height: 15px;"></div>
    <div class="btnhand">
      <a href="#"><span>join facebook</span></a>
    </div>
  </div>
</div> 
```

的CSS：

```
div.btn{
  width: 266px;
  margin: 0 auto;
  height: 56px;
}
#blockmsg{
  position: relative;
  padding-top: 30px;
  display: none;
  width: 400px;
  z-index: 100000;
} 
```

jQuery：

```
$('#block').click(function() { 

  $.blockUI({ 
      message: $('#blockmsg'), 
      fadeIn: 700,
      fadeOut: 700,
      centerX: true,
      centerY: true,
      css: { 
      backgroundColor: 'transparent',
      border: 'none',
      cursor: 'default'

    } 
  }); 
  $('#x').attr('title','Click to unblock').click($.unblockUI);
  //setTimeout($.unblockUI, 2000); 

}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T09:58:29.340

尝试添加`return false;`到单击处理程序的末尾，以防止浏览器在单击链接时也执行默认操作，即转到`#`url。

即改变你的jQuery：

```
$('#block').click(function() { 

  $.blockUI({ 
    // ... (same as before) 
  }); 
  $('#x').attr('title','Click to unblock').click($.unblockUI);

  return false;    
}); 
```

# php - NUSoap - 使用类型化数组作为参数调用方法

> ID：10581086
> 
> 赞同：0
> 
> 时间：2012-05-14T09:57:21.027
> 
> 标签：php, wcf, soap, nusoap

我正在使用 NuSoap 库来调用 WCF Web 服务。

调用具有类型化数组作为参数之一的特定 Web 方法时，我被卡住了。

通过 SOAP UI 调用 Web 方法时。我有这样的东西（它有效）

```
<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:tem="http://tempuri.org/" xmlns:arr="http://schemas.microsoft.com/2003/10/Serialization/Arrays">
   <soapenv:Header/>
   <soapenv:Body>
      <tem:GetBalances>
         <tem:customerIds>
            <arr:guid>228B8C4E-D395-F87D-0000-00000013022F</arr:guid>           
         </tem:customerIds>
         <tem:brandName></tem:brandName>
         <tem:currencyCode>EUR</tem:currencyCode>
      </tem:GetBalances>
   </soapenv:Body>
</soapenv:Envelope> 
```

我试图像这样调用这个相同的请求 ussign NUSoap：

```
$params = array("customerIds" =>
            array(
                "guid" => '228B8C4E-D395-F87D-0000-00000013022F'
            ),
            "brandName" => "",
            "currencyCode" => "EUR"
        );

$result = $client->call('GetBalances', $params); 
```

但不幸的是，我没有得到任何结果。

知道应该如何构造 params 数组吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T14:07:11.400

我认为这是最好的方法：

```
$params = array(
             "guid" => "228B8C4E-D395-F87D-0000-00000013022F",
             "brandName" => "",
             "currencyCode" => "EUR"
);

$result = $client->call('GetBalances', $params); 
```

您需要根据需要添加如此多的 guid、brandName 和 currencyCode。

因此，您必须创建一个 ComplexType，然后创建一个 SOAP-Envelope 来处理多数组。

我希望这有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-17T17:23:54.467

我自己也遇到了这个......我发现将一个数组传递给一个键/值数组来工作。

```
$params = array(
    "customerIds" => array("guid" => array("228B8C4E-D395-F87D-0000-00000013022F")),
    "brandName" => "",
    "currencyCode" => "EUR"
); 
```

# matlab - 通过 Matlab 通过 wifi 发送值

> ID：10581087
> 
> 赞同：1
> 
> 时间：2012-05-14T09:57:21.527
> 
> 标签：matlab, wifi, communication

我需要将 int 和 double 值从一台计算机发送到另一台计算机。两台电脑连接到同一个无线网络，我得到的值是由 Matlab 代码生成的。这可以在 Matlab 中完成，还是我需要在两者之间使用媒介？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T10:39:42.817

通过 WiFi 发送数据与通过任何网络发送数据基本相同。您将需要另一台计算机的本地 IP 地址（在不同的操作系统上找到此地址的各种方法，[请咨询 google](https://www.google.com/search?&q=find+a+computer%27s+local+IP)）。您不想使用这样的外部 IP 地址[，](http://www.whatismyip.com)因为这通常需要您更改路由器上的某些设置（例如端口转发）。

一旦你有了本地 IP 地址，你就可以使用 Sockets - Loren has a good [blog post](http://blogs.mathworks.com/loren/2011/05/27/transferring-data-between-two-computers-using-matlab/)之类的东西。

# c# - 如何解决两个线程操作两个集合？

> ID：10581088
> 
> 赞同：0
> 
> 时间：2012-05-14T09:57:24.267
> 
> 标签：c#, multithreading, c#-4.0

我有两个类，每个类都有一个`private static List<int> list`, 和每个类中的方法来操作列表，它们采用以下形式：

```
public static void Add(int number)
{
  lock (list)
  {
    Monitor.Pulse(list);

    containers.Add(list);

    Monitor.Wait(list);
  }
} 
```

问题是，如果我有两个线程，并且 Thread1 在 Class1 的 Add() 方法中，而 Thread2 在 Class2 的 Add() 方法中，那么它们每个都会到达 Wait() 方法。但是因为它们在不同的等待队列中，所以 Pulse() 方法将不起作用（至少，这是我怀疑的。）我该如何解决这个难题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T10:01:26.830

如果它们都共享对相同基础列表的相同引用，那很好。如果您尝试使用 lock 关键字，则不需要使用 Monitor.wait 和 Monitor.pulseall，因为编译器会在看到 lock (...) { } 时自动执行此操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T10:01:41.713

如果您使用的是 .NET 4，则可能需要使用并发集合。

[有关 MSDN 的更多信息](http://msdn.microsoft.com/en-us/library/dd997305.aspx)

# objective-c - 在接口文件中导入类和前向声明（@class）有什么区别？

> ID：10581089
> 
> 赞同：1
> 
> 时间：2012-05-14T09:57:25.520
> 
> 标签：objective-c, ios

> **可能重复：**
> [@class 与 #import](https://stackoverflow.com/questions/322597/class-vs-import)
> [Cocoa：在标题中导入和在主文件中导入有什么区别？](https://stackoverflow.com/questions/1907571/cocoa-whats-the-difference-between-importing-in-the-header-and-importing-in-th)

我只是想知道在我们的接口文件中导入头文件和在我们的接口文件中使用@class有什么区别？而且我观察到，如果我们在接口文件中导入头文件，我们可以直接创建该类的实例。与导入头文件相反，我们在接口文件中使用@class并在实现文件中导入头文件？有人可以对此有所了解吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-14T10:02:08.133

@class 仅引用该类，而 import 对包含该类的方法及其实现的类具有强绑定。@class 还用于规避循环或闭环。@class 指令仅向编译器保证类存在，但没有告诉它更多关于类的信息，而 import 引用了类的每个成员，以便在运行时编译器可以知道。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-14T10:04:33.737

使用前向声明和仅在实现文件中导入您依赖的标头是最佳实践。如果在头文件中导入，则为编译器建立依赖关系。假设您在 bh 中导入 ah，然后在 ch 中导入 bh 现在，当您在 ah 中更改某些内容时，编译器也必须重新编译 cm，因为它的依赖关系已更改。

例如，如果您在预编译的头文件 (.pch) 中添加#define 或#import，则必须重新编译所有文件。

Objective-C 可以防止多次导入（比较#include），因此您不必检查同一个头文件的多次导入。

# jquery - 异步下载pdf

> ID：10581091
> 
> 赞同：8
> 
> 时间：2012-05-14T09:57:44.833
> 
> 标签：jquery, ruby-on-rails, download, amazon-s3, pdf-generation

当用户单击我的 Ruby on Rails 应用程序中的链接时，会在后台生成一个 PDF 文件。

该应用程序正在轮询服务器以了解 PDF 文件何时准备就绪，然后它应该要求用户下载它，就好像他单击了已经存在的 PDF 链接一样。

当 PDF 文件准备好时，我们使用隐藏`iframe`和更改属性来执行此操作。`src`

虽然它适用于 Firefox（有一个用于下载文件的本机弹出窗口），但它不适用于 safari/chrome。我该怎么做？我已经看到有一个[Content-Disposition](http://en.wikipedia.org/wiki/List_of_HTTP_headers#Responses) HTTP 标头，但是 PDF 文件存储在 S3 上，所以我认为我不能使用该方法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-14T10:19:07.337

您确实需要使用`Content-Disposition = 'attachment';`响应标头。

我并不完全了解 S3，所以如果这个答案不太正确，请告诉我，但您现在似乎**可以**在请求 URL 中设置内容标头，请参见[此处的示例。](http://docs.amazonwebservices.com/AmazonS3/latest/API/RESTObjectGET.html?r=7768#ExampleGetReqAlterResponseHeaders)

# java - 可迭代与迭代器作为返回行为（最佳实践？）

> ID：10581092
> 
> 赞同：4
> 
> 时间：2012-05-14T09:57:52.430
> 
> 标签：java, list, collections, iterator, iterable

我只想知道您对将所有 Collections 函数输出更改为 Iterable 类型的意见。

在我看来，这可能是当今 Java 中最常见的代码，每个人在 99% 的时间里总是返回一个 List/Set/Map，但不应该是返回类似的标准

```
 public final Iterable<String> myMethod() {
            return new Iterable<String>() {
                  @Override
                  public Iterator<String> iterator() {return myVar.getColl();}
            };
    } 
```

这很糟糕吗？你知道所有的 DAO 类，这些东西就像

```
 Iterable<String> getName(){}
    Iterable<Integer> getNums(){}
    Iterable<String> getStuff(){} 
```

代替

```
 List<String> getName(){}
    List<Integer> getNums(){}
    Set<String> getStuff(){} 
```

毕竟，99% 的时间你会在 for 循环中使用它……

你怎么看？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-14T10:00:24.203

这将是一个*非常糟糕的计划。*

我不会说 90% 的时间你*只是*在 for 循环中使用它。也许是 40-50%。其余时间，您需要更多信息：`size`、`contains`或`get(int)`。

此外，返回类型本身就是一种文档。返回 a`Set`保证元素是唯一的。返回`List`元素将保持一致顺序的文档。

我不建议返回特定的集合实现，例如`HashSet`or ，但如果选项可用`ArrayList`，我通常更喜欢返回 a `Set`or a`List`而不是 a `Collection`or an 。`Iterable`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-14T10:02:34.843

List、Set 和 Map 是接口，因此它们不依赖于特定的实现。所以它们是返回类型的好候选。

List/etc 和 Iterable/Iterator 的区别在于访问的类型。一种是随机访问，您可以直接访问所有数据，而 Iterable 避免了所有可用数据的需要。在您拥有大量数据并且将其全部到位的情况下是理想的选择。示例：迭代大型数据库结果集。

所以这取决于你正在访问什么。如果您的数据可能很大并且必须需要迭代以避免性能下降，那么请使用迭代器强制它。在其他情况下，列表是可以的。

**编辑：**返回一个迭代器意味着你唯一能做的就是在没有其他可能性的情况下循环遍历这些项目。如果您需要这种权衡以确保性能，可以，但如上所述，仅在需要时使用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-14T10:05:30.503

那么你编码的部分是正确的：

您需要测试以下项目的某些方法：

1.  `size`
2.  `contains()`
3.  `get(index)`
4.  `exists()`

因此，您应该重新考虑您的新架构或使用此方法覆盖它，以便每次都能满足您的需求。

# git - 在 git show / git diff 中将 tabwidth 设置为 4

> ID：10581093
> 
> 赞同：81
> 
> 时间：2012-05-14T09:57:56.830
> 
> 标签：git, bash, tabs, whitespace, spaces

在工作中，我们是几个开发人员，没有代码样式指南，一些开发人员使用制表符缩进，而另一些开发人员使用 4 个空格（幸运的是，没有人使用与 4 个空格不同的空格缩进）。一般来说，这不是（大）问题，因为在我们的编辑器中我们设置`tabwidth=4`了所有缩进似乎都是正确的。

但在`git diff`or`git show`那就是出现的情况：

```
diff --git a/mesclatabs.php b/mesclatabs.php
new file mode 100644
index 0000000..1986c91
--- /dev/null
+++ b/mesclatabs.php
@@ -0,0 +1,5 @@
+<?php
+function foo() {
+       echo "line with 1 tab\n";
+    echo "line with 4 spaces\n";
+} 
```

问题是每个选项卡出现`git diff`的`git show`宽度为 8 个空格（嗯，实际上显示为一个选项卡，而 shell（在我的情况下为 bash）将选项卡显示为 8 个空格。我想必须有一些 bash 配置要更改这个，但我想知道 git 是否可以选择将制表符输出为`diff`/中的 4 个空格`show`，因为一些开发人员使用`zsh`而不是`bash`.

有任何想法吗？

* * *

## 回答 #1

> 赞同：122
> 
> 时间：2012-05-14T13:25:44.870

我相信`git config --global core.pager 'less -x1,5'`

参考：

*   原文：（不再有效）[git-scm chp7-1](http://git-scm.com/book/ch7-1.html)
*   较新：
    *   [git-config#git-config-corepager](https://git-scm.com/docs/git-config#Documentation/git-config.txt-corepager)
    *   [自定义 Git](https://git-scm.com/book/en/v2/Customizing-Git-Git-Configuration)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-07-20T00:28:44.913

作为答案[https://stackoverflow.com/a/10584237/1850340](https://stackoverflow.com/a/10584237/1850340)对我不起作用，因为我的颜色设置我想出了以下解决方案：

```
TAB=$'\t' && git config --global core.pager "sed 's/$TAB/    /g' | less" && unset TAB 
```

这会将所有制表符替换为 4 个空格，然后再用更少的空格显示。（需要 TAB 解决方法来规避 shell 反斜杠转义）

# shell - 搜索文件参考

> ID：10581096
> 
> 赞同：2
> 
> 时间：2012-05-14T09:58:15.533
> 
> 标签：shell, unix

我在我的 Unix 机器上的一个目录中检查了代码>

我需要比较两个文件以查看它们是如何在整个代码中引用的。所以这将涉及搜索目录，然后搜索文件。

所以我有点喜欢那里

```
search through files within the folder structure | grep "myReference" | less 
```

问题是我不知道做第一个位的有效方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T10:00:34.367

`grep -nir 'myReference' .`| 较少的

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T10:03:37.917

```
 grep -nr "Search term" /path/to/files/ 
```

# sql-server-2008 - 如何使用触发器获取使用单个语句插入的行数？

> ID：10581097
> 
> 赞同：0
> 
> 时间：2012-05-14T09:58:16.390
> 
> 标签：sql-server-2008, triggers, insert, count

那可能吗？

明确的信息 abt 问题是 - 我正在使用一个插入语句从 excel 插入数据 - 一次插入多个语句。但就我的想法而言，触发器一次只针对一个语句引发。

是否可以计数意味着请就这个问题给我一个建议。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T11:01:29.510

在触发器中 - 如果您逐行插入数据，则不可能。您可能会做出一些解决方法，例如，您可以在某个临时表中插入，然后使用

```
Insert Into Table (...)
Select (...) From #tempTable 
```

但是如果你在excel端计算插入的记录会更好..

# ruby-on-rails - 使用 twitter-bootstrap 选项卡显示模型的索引视图

> ID：10581104
> 
> 赞同：0
> 
> 时间：2012-05-14T09:59:05.257
> 
> 标签：ruby-on-rails, twitter-bootstrap

我不确定如何使用 twitter 引导选项卡显示模型的索引视图。我有以下代码，但它给了我一个缺少模板的错误。谢谢。

应用程序.html.erb

```
<ul id="myTab" class="nav nav-tabs">
  <li class="active"><a href="#home" data-toggle="tab">Home</a></li>
  <li><a href="#profile" data-toggle="tab">Profile</a></li>
</ul>
<div id="myTabContent" class="tab-content">
  <div class="tab-pane fade in active" id="home">
    <p>Home...</p>
  </div>
  <div class="tab-pane fade" id="profile">
    <%= render :template => 'goals#index' %>
  </div>
</div> 
```

更新 1：显示 rake 路由的输出

```
 goals GET    /goals(.:format)                  goals#index
                        POST   /goals(.:format)                  goals#create
               new_goal GET    /goals/new(.:format)              goals#new
              edit_goal GET    /goals/:id/edit(.:format)         goals#edit
                   goal GET    /goals/:id(.:format)              goals#show
                        PUT    /goals/:id(.:format)              goals#update
                        DELETE /goals/:id(.:format)              goals#destroy 
```

更新 2：错误输出

缺少带有 {:locale=>[:en], :formats=>[:html], :handlers=>[:erb, :builder, :coffee]} 的模板 /goals#index。搜索：

干杯，阿兹伦

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T11:25:51.183

好吧，从我所看到的你想要呈现控制器的索引操作，所以我建议在相应的视图目录中创建一个 index.html.erb，它呈现关于缺少模板的错误的原因是因为它搜索模板在视图中>controller_name>action.html.erb

如果您使用的操作不是 CRUD(Create, Read, Update Destroy)，请确保将其添加到您的 routes.rb

```
resource :controller do
  collection do 
    get 'action'
    post 'action', path: "value"
  end
end 
```

# nginx - 在带有 SSI 的 HTML 页面中包含日志文件

> ID：10581108
> 
> 赞同：0
> 
> 时间：2012-05-14T09:59:08.620
> 
> 标签：nginx, ssi

我目前正在尝试一些东西，现在它正在尝试在 HTML 页面中显示日志文件的内容。

因此，我添加`ssi on;`了我的 Nginx`.conf`文件并将其添加到 HTML 页面：

```
<!--#include file="../../../../var/log/nginx/logs.access.log" --> 
```

路径很好，但我总是遇到这个错误：

> [处理指令时发生错误]

你有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T13:40:26.113

`<!--#include file=`在 nginx 中是一样的东西`<!--# include virtual=`，所以`../../../../var/log/nginx/logs.access.log`看起来不像是有效的请求。

但是您可以像这样添加位置：

```
location = /logs.access.log {
    internal;
    root /var/log/nginx;
} 
```

并`<!--#include file="/logs.access.log" -->`相应地使用。

# c# - 时间：2019-01-10 标签：c#browseforaimageonwebapplicationsanddisplay它

> ID：10581112
> 
> 赞同：1
> 
> 时间：2012-05-14T09:59:40.340
> 
> 标签：c#, asp.net

创建允许用户浏览图像然后显示它的 C# Web 应用程序的最佳方法是什么？相当于 Windows 应用程序中的 Picturebox，有点像

理想情况下，用户应该能够单击浏览，选择图片并在浏览器本身中查看

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T10:12:35.493

已经为 asp.net 准备了一些图像浏览器，包括源代码。

他们中有一些

[http://www.codeproject.com/Articles/17605/Thumbnail-Image-Viewer-Control-for-ASP-NET-2-0](http://www.codeproject.com/Articles/17605/Thumbnail-Image-Viewer-Control-for-ASP-NET-2-0)

[http://www.codeproject.com/Articles/29846/A-simple-ASP-NET-AJAX-image-browser](http://www.codeproject.com/Articles/29846/A-simple-ASP-NET-AJAX-image-browser)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-14T10:12:47.897

为此，用户需要选择将上传到服务器的图像，然后以 HTML 呈现或使用 AJAX 恢复。问题是您无法摆脱发送/接收，并且它可能会变慢。

您可以使用`FileUpload`允许直接或通过 AJAX 上传文件的任何其他组件（请查看[AjaxFileUpload](http://www.asp.net/ajaxLibrary/AjaxControlToolkitSampleSite/AjaxFileUpload/AjaxFileUpload.aspx) AjaxControlToolkit）。

然后您需要`<img>`通过完整的回发或使用任何其他方式（如 jQuery.Ajax）向您的页面添加一个。

# iphone - 如何在 iphone sdk 中的 roambi 应用程序中顺时针和逆时针旋转饼图

> ID：10581113
> 
> 赞同：1
> 
> 时间：2012-05-14T09:59:44.413
> 
> 标签：iphone, objective-c, ios, ipad, core-plot

我使用核心绘图库绘制了饼图。但问题是我想像在 Roambi 应用程序中那样以顺时针和逆时针方向旋转饼图。

谁能建议我我该怎么做。

任何人的帮助将不胜感激。

谢谢，莫尼什。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T10:32:40.427

```
CGAffineTransformMakeRotation(degreesToRadians(M_PI * 90 / 180.0)); // clockwise 
CGAffineTransformMakeRotation(degreesToRadians(-M_PI * 90 / 180.0)); // anti-clockwise 
```

# google-api - 谷歌折线图：我可以插入误差线吗？

> ID：10581115
> 
> 赞同：5
> 
> 时间：2012-05-14T09:59:51.463
> 
> 标签：google-api, google-visualization, linechart

祝大家欢呼。

我正在使用使用 Google API 创建的用于绘制图表（[此图表](https://developers.google.com/chart/interactive/docs/gallery/linechart)）的折线图。

它运行良好，但现在我遇到了问题。我必须插入一些**误差线**或类似的东西（例如，*variance*）。谷歌API可以做到吗？我该怎么做？

我的目标是拥有这样的[东西](http://www.think-cell.com/en/support/documentation/images/slideview/errorbars.png)。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-11T12:38:16.553

是的，这是可能的，折线图支持列角色，您正在寻找的是[区间](https://google-developers.appspot.com/chart/interactive/docs/roles)

# actionscript-3 - OpenOffice.org calc 无法使用 as3xls 读取 flex export xls

> ID：10581119
> 
> 赞同：0
> 
> 时间：2012-05-14T10:00:11.960
> 
> 标签：actionscript-3, flash, apache-flex, excel

我已经尝试使用 as3xls 库的 flex 数据网格导出 xls。当我使用 microsoft office 打开时，它可以正常打开。但是，如果我尝试从 openoffice.org calc 读取，则无法正常工作。我知道为什么不工作，所以任何人都知道从 flex 导出 xls 以读取 calc 的想法。请告诉我。我尝试了下面的导出 excel 代码。

```
var xls:ExcelFile = new ExcelFile();
xls.sheets.addItem(sheet);
var bytes:ByteArray = xls.saveToByteArray();
var fileReference:FileReference = new FileReference();
fileReference.addEventListener(Event.COMPLETE,fileReference_Complete);
fileReference.save(bytes, filename); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T05:08:17.057

我的 github 项目只读取 xlsx，但它应该可以与打开的 office 文件一起正常工作[https://github.com/childoftv/as3-xlsx-reader](https://github.com/childoftv/as3-xlsx-reader)

# php - 如何使用 JQuery 异步上传文件

> ID：10581126
> 
> 赞同：2
> 
> 时间：2012-05-14T10:00:29.887
> 
> 标签：php, jquery

我想使用 jQuery 异步上传文件 - 不使用任何插件。

JQuery 对我来说很新，在查看了各种论坛后，我最终得到了以下代码：

* * *

## HTML：

```
<html>
<head>
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.4.2/jquery.min.js"></script>
<script type="text/javascript" charset="utf-8">

$(document).ready(function(){

    $('#myform').submit(function() {

        var fileInput = document.getElementById('file');
        var file = fileInput.files[0];
        var formData = new FormData();
        formData.append('file', file);

        $.ajax({
            type: "POST",
            url: "upload.php",
            data: formData,
            processData: false,

            contentType: 'multipart/form-data',

                beforeSend: function (x) {
                        if (x && x.overrideMimeType) {
                            x.overrideMimeType("multipart/form-data");
                        }
                },

            success:function(msg){
                    //alert( "Data Uploaded: " + msg );
                document.getElementById('display').innerHTML = msg;

                }
            });

        return false;
    });

});

</script>
</head>

<body>
<form enctype="multipart/form-data" id="myform" name="myform" method="POST">
<input name="file" type="file" id="file" name="file"/>
<input type="text" name="txtValue" value="" id="txtValue">-->
<input type="submit" value="Upload" id="button" name="button"/>

<div id="display"></div>
</form>

</body>
</html> 
```

* * *

## PHP：

```
<?php

$uploaddir = './uploads/';
$file = $uploaddir . basename($_FILES['file']['name']);

if (move_uploaded_file($_FILES['file']['tmp_name'], $file)) {
  $value = "success";
} 
else {
    $value = "error";
}

echo $value; 

?> 
```

* * *

此代码不起作用，每次“显示”DIV 打印“错误”。请帮帮我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-25T19:23:28.307

使用[HTML5](http://en.wikipedia.org/wiki/HTML5)，您可以使用 Ajax 和 jQuery 进行文件上传。不仅如此，您还可以进行文件验证（名称、大小和 MIME 类型）或使用 HTML5 进度标记（或 div）处理进度事件。

的HTML：

```
<form enctype="multipart/form-data">
    <input name="file" type="file" />
    <input type="button" value="Upload" />
</form>
<progress></progress> 
```

如果需要，您可以进行一些验证。

```
$(':file').change(function(){
    var file = this.files[0];
    var name = file.name;
    var size = file.size;
    var type = file.type;
    //Your validation
}); 
```

现在通过单击按钮提交 Ajax：

```
$(':button').click(function(){
    var formData = new FormData($('form')[0]);
    $.ajax({
        url: 'upload.php',  //Server script to process data
        type: 'POST',
        xhr: function() {  // Custom XMLHttpRequest
            var myXhr = $.ajaxSettings.xhr();
            if(myXhr.upload){ // Check if upload property exists
                myXhr.upload.addEventListener('progress',progressHandlingFunction, false); // For handling the progress of the upload
            }
            return myXhr;
        },
        //Ajax events
        beforeSend: beforeSendHandler,
        success: completeHandler,
        error: errorHandler,
        // Form data
        data: formData,
        //Options to tell jQuery not to process data or worry about content-type.
        cache: false,
        contentType: false,
        processData: false
    });
}); 
```

现在，如果您想处理进度。

```
function progressHandlingFunction(e){
    if(e.lengthComputable){
        $('progress').attr({value:e.loaded,max:e.total});
    }
} 
```

`[**SOURCE**](https://stackoverflow.com/a/8758614/933633)`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-14T10:08:08.770

取一个隐藏的 div。在那个 div 里面取一个`iframe`并将表单设置`target`为 iframe 的 id。

在 jQuery 中。在文档就绪功能之后，将加载事件处理程序（例如 LEH）添加到 iframe。这样当提交表单并上传文件并加载 iframe 时，就会调用 LEH

这就像成功事件一样。

注意：您需要在第一次加载页面时进行微调，然后再加载 iframe。所以也会有第一次检查。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-14T11:14:02.127

您可以使用以下插件使用 ajax 上传文件：

1.  [jQuery 表单插件](http://malsup.com/jquery/form/#file-upload)

2.  [上传](http://www.uploadify.com/)

第一个链接中的插件提供了一些非常有用的回调。您可以在给定的链接中查看文档。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-14T15:06:06.563

我的项目中有用户 Jquery 表单插件。JQuery 原始 xhr 对象被包装在 jqXhr 对象中，该对象没有对 xhr 的新上传属性的任何引用。希望您可以从以下示例开始。html:

```
 <input type="file" class="text-input" size="50" id="file_upload" value=""  name="file_upload"/>

var formData = new FormData($('form')[0]);
$.ajax({
url: '/files/add_file',  //server script to process data
type: 'POST',
xhr: function() {  // custom xhr
 myXhr = $.ajaxSettings.xhr();
 if(myXhr.upload){ // check if upload property exists
    //myXhr.upload.addEventListener('progress',progressHandlingFunction, false); // for handling the progress of the upload
}
return myXhr;
},
dataType: 'JSON',
beforeSend: beforeSendHandler,
success: function(data) {
    if (data.error){
       showMessage(data.html, false, false);
        }
    else{
       showMessage(data.html, false, false);
setTimeout("window.location = 'path/to/after/uploading';",450)
}
},
error: function(data) {
    showMessage(data.html, false, false);
},
// Form data
data: formData,
   //Options to tell JQuery not to process data or worry about content-type
cache: false,
contentType: false,
processData: false
}); 
```

# java - 动态类重新加载仅在调试模式下有效，为什么/如何真正起作用？

> ID：10581127
> 
> 赞同：3
> 
> 时间：2012-05-14T10:00:30.863
> 
> 标签：java, jvm, classloader, dynamic-class-loaders

我有一个棘手的问题。

我的java程序正在循环中做这样的事情：

环形：

1.  将已编译的 java 类的外部文件读入 byte[] 数组。

2.  创建我自己的类加载器的新实例。

3.  setbytes 从读取的文件到这个类加载器实例。

4.  使用创建的类加载器从外部文件创建类对象的新实例。

5.  调用创建对象的任何方法。

问题出在哪里。

1.  当我在调试模式下运行这个程序时，它的行为与我预期的一样，所以如果外部文件更改类加载器加载新版本的类并执行新版本（如果文件没有改变它当然也会加载旧版本）。

2.  但是当我不在调试模式下运行这个程序时，它总是执行旧版本，尽管读取的文件已经改变。

也许对类加载问题和 JVM 行为有更深入了解的人可以向我解释这种行为。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T10:50:45.370

这是发生的事情的简化版本：

1.  JVM 从 CLASSPATH 环境变量中指定的目录或 Jars 将类和其他资源仅加载一次（除非在调试模式下运行）。
2.  为此，它使用 ClassLoaders
3.  一旦资源被 ClassLoader 实例加载，它会一直保留在内存中，直到 ClassLoader 被垃圾回收。

调试模式是 JVM 提供的一种特殊模式，类加载器会更加努力地为您提供最新版本的资源。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T10:19:27.413

不能用同一个类加载器重新加载同一个类

你可以在这里找到一篇写得很好的关于动态类重新/加载的[文章](http://tutorials.jenkov.com/java-reflection/dynamic-class-loading-reloading.html)

# c# - 在silverlight的应用程序中保存图像

> ID：10581128
> 
> 赞同：0
> 
> 时间：2012-05-14T10:00:33.227
> 
> 标签：c#, image, xaml, silverlight-4.0, webcam

我是银光 4 的新手。我需要从网络摄像头捕获图像并保存到名为“temp”的本地应用程序文件夹中。当我单击保存按钮时，快照应保存在该文件夹中。我在 Google 中搜索并获得了要保存在本地计算机中的样本，但没有保存在应用程序中。请朋友指导我。谢谢..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T10:59:05.880

您不能直接从 Silverlight 访问文件系统（至少在正常浏览器模式下）。这是防止其被滥用的安全预防措施。

隔离存储是个例外，它是为每个 Silverlight 应用程序留出的安全区域，可从中读取/写入。

此链接有一些您可以使用的示例：[http://www.silverlight.net/learn/graphics/file-and-local-data/isolated-storage-(silverlight-quickstart)](http://www.silverlight.net/learn/graphics/file-and-local-data/isolated-storage-%28silverlight-quickstart%29)

# asp.net - 在asp.net的下拉列表中选择后显示参数

> ID：10581130
> 
> 赞同：0
> 
> 时间：2012-05-14T10:00:38.063
> 
> 标签：asp.net

如果我们从下拉列表中选择一个值，例如 1 或 2 等，它应该显示特定产品的数量和尺寸。如果我们从下拉列表中选择 2，则数字和大小应显示两次。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T11:11:31.363

查看此示例 ASPX

```
 <%@ Page Language="C#" AutoEventWireup="true" CodeFile="Test.aspx.cs" Inherits="Test" %>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
    <title></title>
</head>
<body>
    <form id="form1" runat="server">
    <div>

        <asp:Label ID="Label1" runat="server" Text="No. of Products:"></asp:Label>
&nbsp;<asp:DropDownList ID="ddlItems" runat="server" AutoPostBack="True" 
            onselectedindexchanged="ddlItems_SelectedIndexChanged">
            <asp:ListItem Value="0">-Select-</asp:ListItem>
            <asp:ListItem Value="1">1</asp:ListItem>
            <asp:ListItem Value="2">2</asp:ListItem>
            <asp:ListItem>3</asp:ListItem>
        </asp:DropDownList>
&nbsp;<br />
        <asp:GridView ID="GridView1" runat="server">
        </asp:GridView>

    </div>
    </form>
</body>
</html> 
```

背后的代码

```
using System;
using System.Data;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.UI;
using System.Web.UI.WebControls;

public partial class Test : System.Web.UI.Page
{
    protected void Page_Load(object sender, EventArgs e)
    {

    }
    protected void ddlItems_SelectedIndexChanged(object sender, EventArgs e)
    {
        if (ddlItems.SelectedIndex > 0)
        {
            DataTable dt = new DataTable();
            int cntr=Convert.ToInt32(ddlItems.SelectedValue);

            dt.Columns.Add(new DataColumn("SNO",typeof(int)));
            dt.Columns.Add(new DataColumn("ProductName",typeof(string)));
            dt.Columns["SNO"].AutoIncrement=true;
            dt.Columns["SNO"].AutoIncrementSeed = 1;

            for(int i=1;i<=cntr;i++)
            {
                DataRow dr=dt.NewRow();
                dr["ProductName"]= " Sample Product Name for Item #"+ i;
                dt.Rows.Add(dr);
            }

            GridView1.DataSource=dt;
            GridView1.DataBind();
        }
    }
} 
```

# c++ - C++ 中的模板向量

> ID：10581131
> 
> 赞同：0
> 
> 时间：2012-05-14T10:00:41.853
> 
> 标签：c++, templates, vector

我一直在为矢量类使用模板时遇到问题。由于某种原因，marime（大小）被作为指针接收。我设法减轻了错误代码。一些帮助将受到欢迎。

```
#include <iostream>
#include <stdio.h>

using namespace std;

template <class T>
class Vector {
      private: int marime; T *vect;
      public: Vector (int marime = 0){vect = new T[marime];}
              ~Vector (){
                      if ( vect != NULL ) delete [] vect;
              }
              int getMarime();
              T getVect(int);
              void setMarime(int);
              void setVect(T,int);
              Vector <T> operator+ (Vector);
              Vector <T> operator= (Vector);
              template <class U> friend istream & operator >>(istream, Vector); 
              template <class U> friend ostream & operator <<(ostream, Vector); 
};

template <class T > 
istream & operator>> (istream & in, Vector<T> & v)
{
        T val;
        int marime = v.getMarime();
        for (int i=0;i<marime; i++) {
            in>>val;
            v.setVect(val,i);
            }
        return in;
}

template <class  T> 
ostream & operator<< (ostream& out, Vector<T> & v)
{
        for (int i=0;i<v.getMarime(); i++) 
            out<<v.getVect(i)<< " " ;
        return out; 
}

template <class T>
int Vector<T>::getMarime(){
   return marime;  
     }

template <class T>
T Vector<T>::getVect(int i){
   return vect[i];
}

template <class T>
void Vector<T>::setMarime(int n){
     this->marime = n;
}

template <class T>
void Vector<T>::setVect(T val, int i){
     this->vect[i] = val;
}

template <class T>
Vector<T> Vector<T>::operator +(Vector<T> vector){
          Vector<T> temp(marime + vector.marime);
          for (int i=0; i < marime; i++)
              temp.vect[i] = vect[i];
          for (int i=marime+1; i<temp.marime; i++)
              temp.vect[i] = vector.vect[i];
          return *temp;
}

template <class T>
Vector<T> Vector<T>::operator= (Vector<T> vector){
          Vector<T> temp(vector.marime);
          for (int i=0; i < vector.marime; i++) temp.vect[i] = vector.vect[i];
          return *temp;
}
int main() {

 int n=3;
 Vector <int> A(n);
 cin>>A;
 cout<<A;   
 return 0;   

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T10:12:42.643

您未能初始化`marime`. 你需要这样做：

```
 public: Vector (int marime = 0) : marime(marime) {vect = new T[marime];} 
```

否则它只包含一个基本上随机的值。

为避免混淆，最好不要将成员变量的名称用作构造函数参数名称。对成员变量使用命名约定是很常见的，例如以 开头`m_`或以下划线 ( `marime_`) 结尾。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-14T10:10:34.983

```
public: Vector (int marime = 0){vect = new T[marime];} 
```

不应该有`this->marine = marime`吗？

# maven - Maven 依赖：purge-local-repository 应该做什么？

> ID：10581132
> 
> 赞同：2
> 
> 时间：2012-05-14T10:00:47.983
> 
> 标签：maven, maven-dependency-plugin

我试图在启动释放项目之前清除项目依赖项的本地存储库，以确保所需的每个依赖项都在中央存储库上并从中下载。

在项目文件夹（包含 pom.xml）中，我启动以下命令：

```
mvn clean dependency:purge-local-repository -DreResolve=false -Dverbose=true 
```

该项目的 POM 非常简单，只声明了对 junit:junit:3.8.1 的依赖项

该命令的输出给我：

```
[INFO] Scanning for projects...
[INFO]
[INFO] ------------------------------------------------------------------------
[INFO] Building corelib-api 0.1.2-SNAPSHOT
[INFO] ------------------------------------------------------------------------
[INFO]
[INFO] --- maven-clean-plugin:2.4.1:clean (default-clean) @ corelib-api ---
[INFO] Deleting d:\Users\fpaillard\git-repositories\TEST_CORELIB\corelib-api\target
[INFO]
[INFO] ------------------------------------------------------------------------
[INFO] Building corelib-api 0.1.2-SNAPSHOT
[INFO] ------------------------------------------------------------------------
[INFO]
[INFO] --- maven-dependency-plugin:2.1:purge-local-repository (default-cli) @ corelib-api ---
[WARNING] Missing POM for junit:junit:jar:3.8.1
[INFO] Skipping: corelib-api. It cannot be resolved.
[INFO] Nothing to do for project: test:corelib-api:jar:0.1.2-SNAPSHOT
[INFO] ------------------------------------------------------------------------
[INFO] BUILD SUCCESS
[INFO] ------------------------------------------------------------------------
[INFO] Total time: 0.953s
[INFO] Finished at: Mon May 14 11:34:40 CEST 2012
[INFO] Final Memory: 6M/15M
[INFO] ------------------------------------------------------------------------ 
```

当我查看本地存储库（使用 选中的路径`mvn help:effetive-settings`）时，junit JAR 或 POM 仍在`.m2/repository/junit/junit/3.8.1`文件夹中。

不`dependency:purge-local-repository`应该删吗？

我不明白上面输出的警告。为什么 junit:junit:jar:3.8.1 POM 不见了？它仍然存在于`.m2/repository/junit/junit/3.8.1/junit-3.8.1.pom`

问题与 INFO 行有关`Skipping: corelib-api. It cannot be resolved.`吗？`corelib-api`是我运行的项目的工件名称`mvn dependency:purge-local-repository`。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-09-24T08:13:48.780

我知道这很旧，但我遇到了同样的问题，在命令行中添加**-DactTransitively=false**解决了这个问题。我无法说出它为什么有帮助，但它确实......

我希望这有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-06-23T20:37:33.267

查看文档，禁用 actTransitively 选项会导致清除目标仅清除 pom.xml 直接命名的依赖项。当需要构建时，Maven 不仅会自动将您的直接依赖项，而且还会将所有 TRANSITIVE 依赖项拉入您的本地存储库。

当清除目标正在寻找要删除的内容时，如果它在依赖项的 pom 中找到其他依赖项，它会遍历这些依赖项以找出可以清除的本地存储库中的整个树。为此，它至少需要传递项目的 pom.xml。如果在本地 repo 中找不到它，或者它认为可能有更新的版本需要分析，它会去外部存储库找到它。

我认为它实际上不会在开始清除之前尝试下载完整的项目内容。但是由于它至少会拉下项目的 pom.xml 文件，因此如果找不到文件，它会抱怨，就像它正在解决实际构建的依赖项时一样。

除了阻止 Maven 在清除时访问外部存储库之外，另一个实际原因是，如果您有两个具有相同传递依赖的项目，并且您不希望从一个项目中清除影响另一个项目的性能（因为后者会必须再次下载任何缺少的依赖项）。

另一方面，需要仔细考虑的一点是，如果您不允许清除考虑所有可能的传递依赖项，您就会将一组下游依赖项留在本地存储库中，否则您会想要删除这些依赖项。

我可以说你得到的输出要么是不必要的，要么是可以用另一个标志来预防的，比如“reportInaccessibleDependencies=false”。但除非它正在扼杀你的构建，否则我不会说这有什么可担心的。

# python - 在搅拌机中加载烘焙粒子系统缓存

> ID：10581133
> 
> 赞同：2
> 
> 时间：2012-05-14T10:00:51.210
> 
> 标签：python, blender, particle-system

我正在尝试以编程方式为搅拌机中的粒子系统加载烘焙文件。我设法加载了流体模拟没有问题的文件，但是粒子系统使用了不同的烘焙/缓存系统，我在尝试为此加载它时遇到了困难。

这是我正在使用的代码：

```
pts = []

for i in scn.objects:
    for j in i.modifiers:
        if j.__class__.__name__ == "ParticleSystemModifier":
            pts.append(j.particle_system)

file_start_particle = 'tt'
file_index = '00'

for m in pts:
    m.point_cache.filepath = bake_file_path
    m.point_cache.name = file_start_particle
    m.point_cache.index = int(file_index)
    m.point_cache.use_external = True
    m.point_cache.use_disk_cache = True 
```

但是，这会导致黑色图像。控制台上没有显示任何错误，并且渲染似乎正在做它的事情。

知道如何加载缓存文件以便使用它们并且渲染工作吗？

谢谢

# android - Android：设备管理员：从服务启动设备管理员

> ID：10581134
> 
> 赞同：4
> 
> 时间：2012-05-14T10:00:51.823
> 
> 标签：android, device-admin

我无法获得允许用户授予应用程序成为设备管理员工作权限的活动。

我的代码如下...

```
ComponentName comp = new ComponentName(this, CustomReceiver.class);

Intent i = new Intent(DevicePolicyManager.ACTION_ADD_DEVICE_ADMIN);

i.putExtra(DevicePolicyManager.EXTRA_DEVICE_ADMIN, comp);
i.putExtra(DevicePolicyManager.EXTRA_ADD_EXPLANATION, "Explanation");

startActivity(i); 
```

应用程序不会崩溃/报告异常。我可能做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T10:05:25.143

这样的事情会做

```
if (!mPolicy.isAdminActive()) {

    Intent activateDeviceAdminIntent =
        new Intent(DevicePolicyManager.ACTION_ADD_DEVICE_ADMIN);

    activateDeviceAdminIntent.putExtra(
        DevicePolicyManager.EXTRA_DEVICE_ADMIN,
        mPolicy.getPolicyAdmin());

    // It is good practice to include the optional explanation text to
    // explain to user why the application is requesting to be a device
    // administrator. The system will display this message on the activation
    // screen.
    activateDeviceAdminIntent.putExtra(
        DevicePolicyManager.EXTRA_ADD_EXPLANATION,
        getResources().getString(R.string.device_admin_activation_message));

    startActivityForResult(activateDeviceAdminIntent,
        REQ_ACTIVATE_DEVICE_ADMIN);
} 
```

可能你没有考虑

```
mPolicy.getPolicyAdmin() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-09-20T16:06:56.563

这是一个关于如何做到这一点的明确示例，（[此处](https://developer.android.com/guide/topics/admin/device-admin.html)和[此处](https://developer.android.com/work/device-management-policy.html#ActivateDeviceAdmin)的官方文档缺少一些上下文）

```
//class that implements DeviceAdminReceiver, defined in the Manifest 
ComponentName deviceAdminCN = new ComponentName(context, DeviceAdminReceiverImpl.class) 

...

Intent intent = new Intent(DevicePolicyManager.ACTION_ADD_DEVICE_ADMIN);
intent.putExtra(DevicePolicyManager.EXTRA_DEVICE_ADMIN, deviceAdminCN);
intent.putExtra(DevicePolicyManager.EXTRA_ADD_EXPLANATION, "your explanation for the user here");
startActivityForResult(intent, YOUR_REQUEST_CODE); 
```

[这是官方示例应用程序中使用的参考类。](https://android.googlesource.com/platform/development/+/b9c12ba27b639e8a932c1772cf3e50d699e1baac/samples/training/device-management-policy/src/com/example/training/deviceadmin/Policy.java)

# iphone - Xcode sdk 将参数传递给 NSURLRequest

> ID：10581137
> 
> 赞同：1
> 
> 时间：2012-05-14T10:01:06.690
> 
> 标签：iphone, xcode

对于我的 iphone 应用程序，我需要使用 url 中的参数向服务器发出请求。我是开发 ios 应用程序的新手，我不知道如何将我设置的值传递到 url。

我已经尝试过这样的事情，但它说 URLWITHString 的“参数太多”。我如何以正确的方式写下来？

```
 NSURLRequest *request = [NSURLRequest requestWithURL:[NSURL URLWithString:@"http://test.localhost/api/request.php?url=%@", passedValue] cachePolicy: NSURLRequestUseProtocolCachePolicy timeoutInterval:15.0];
NSURLConnection *connection = [[NSURLConnection alloc] initWithRequest:request delegate:self]; 
```

在此先感谢，尼克

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T10:09:09.750

```
NSString *urlString = [NSString stringWithFormat:@"http://test.localhost/api/request.php?url=%@", passedValue]; 
NSURLRequest *request = [NSURLRequest requestWithURL:[NSURL URLWithString:urlString] cachePolicy: NSURLRequestUseProtocolCachePolicy timeoutInterval:15.0]; 
```

编辑 -

```
NSURLRequest *request = [NSURLRequest requestWithURL:[NSURL URLWithString:[NSString stringWithFormat:@"http://test.localhost/api/request.php?url=%@", passedValue]] cachePolicy: NSURLRequestUseProtocolCachePolicy timeoutInterval:15.0]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-14T10:11:28.413

试试这个：-

```
NSString *tempURL = [NSString stringWithFormat:@"http://test.localhost/api/request.php?url=%@", passedValue]; 
NSURLRequest *request = [NSURLRequest requestWithURL:[NSURL URLWithString:tempURL] cachePolicy: NSURLRequestUseProtocolCachePolicy timeoutInterval:15.0];
NSURLConnection *connection = [[NSURLConnection alloc] initWithRequest:request delegate:self]; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-14T10:11:30.100

你必须给你的 urlwithstring 参数一个 NSString 对象

```
NSURLRequest *request = [NSURLRequest requestWithURL:[NSURL URLWithString:[NSString stringWithFormat:@"http://test.localhost/api/request.php?url=%@", passedValue]] cachePolicy: NSURLRequestUseProtocolCachePolicy timeoutInterval:15.0];
NSURLConnection *connection = [[NSURLConnection alloc] initWithRequest:request delegate:self]; 
```

# xcode - Xcode：需要帮助在屏幕范围内移动图像

> ID：10581138
> 
> 赞同：0
> 
> 时间：2012-05-14T10:01:08.093
> 
> 标签：xcode, image, drag, bounds

我遵循了有关使用手势识别器在屏幕上拖动多个图像的指南，但是我遇到了问题。我希望将图像拖到可能是 iPad 或 iPhone 的屏幕范围内。我正在使用的代码估计图像的中心，因此当到达边界时，一半的图像会离开屏幕。你能帮我解决这个问题吗？

```
- (IBAction)handlePan:(UIPanGestureRecognizer *)recognizer {

CGPoint translation = [recognizer translationInView:self.view];
recognizer.view.center = CGPointMake(recognizer.view.center.x + translation.x, 
                                     recognizer.view.center.y + translation.y);
[recognizer setTranslation:CGPointMake(0, 0) inView:self.view];

if (recognizer.state == UIGestureRecognizerStateEnded) {

    CGPoint velocity = [recognizer velocityInView:self.view];
    CGFloat magnitude = sqrtf((velocity.x * velocity.x) + (velocity.y * velocity.y));
    CGFloat slideMult = magnitude / 200; //original divider 200
    NSLog(@"magnitude: %f, slideMult: %f", magnitude, slideMult);

    float slideFactor = 0.1 * slideMult /4; // Increase for more of a slide (original doesn't have a divider)
    CGPoint finalPoint = CGPointMake(recognizer.view.center.x + (velocity.x * slideFactor), 
                                     recognizer.view.center.y + (velocity.y * slideFactor));
    finalPoint.x = MIN(MAX(finalPoint.x, 0), self.view.bounds.size.width);
    finalPoint.y = MIN(MAX(finalPoint.y, 0), self.view.bounds.size.height);

    [UIView animateWithDuration:slideFactor*2 delay:0 options:UIViewAnimationOptionCurveEaseOut animations:^{
        recognizer.view.center = finalPoint;
    } completion:nil];
  }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T09:27:44.680

好吧，我设法找到了解决我的问题的方法。我将图像的宽度和高度除以二。在我的情况下，结果是 100 和 70。其余的可以在代码框中看到：

```
finalPoint.x = MIN(MAX(finalPoint.x, 70), self.view.bounds.size.width-70);
finalPoint.y = MIN(MAX(finalPoint.y, 100), self.view.bounds.size.height-100); 
```

# objective-c - 如何获取uitableviewcell的superview

> ID：10581144
> 
> 赞同：1
> 
> 时间：2012-05-14T10:01:39.227
> 
> 标签：objective-c, uitableview

我想获取自定义创建的 uitableviewcell 的父视图。我尝试使用 self superview 来获取父 tableview ，但它没有用。

```
 - (id)initWithStyle:(UITableViewCellStyle)style reuseIdentifier:(NSString *)reuseIdentifier
{
    self = [super initWithStyle:style reuseIdentifier:reuseIdentifier];
    if (self) {
        // Initialization cod
        UITableView *tableView = (UITableView *)[self superview];
        NSIndexPath *indexPath = [tableView indexPathForCell:self];
        NSLog(@"%d %d", indexPath.section, indexPath.row);
...
} 
```

Nslog 输出的值完全为 0。

@jrturton 给出了 self superview 不能引用其父视图的原因。但下一个问题是我想在单元格初始时获取 indexPath。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-04-09T07:14:51.847

```
- (void)didTapButton:(id)sender {
    // Cast Sender to UIButton
    UIButton *button = (UIButton *)sender;

    // Find Point in Superview
    CGPoint pointInSuperview = [button.superview convertPoint:button.center toView:self.tableView];

    // Infer Index Path
    NSIndexPath *indexPath = [self.tableView indexPathForRowAtPoint:pointInSuperview];

    // Fetch Item
    NSDictionary *item = [self.dataSource objectAtIndex:indexPath.row];

    // Log to Console
    NSLog(@"%@", item[@"title"]);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T10:10:08.830

您必须遍历视图层次结构。 [这](https://stackoverflow.com/a/5745602/1169310) 将帮助你

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2012-05-14T10:34:39.980

尝试使用`[cell.contentView addSubview:imgTemp];`希望它会帮助你。

# android - Android：IntentService 在某些情况下会冻结我的 Activity 中的 UI。如何预防？

> ID：10581147
> 
> 赞同：3
> 
> 时间：2012-05-14T10:01:53.687
> 
> 标签：android, asynchronous, intentservice

当我第一次安装我的应用程序时，IntentService 工作正常且异步（从启动器 Activity 的“onCreate()”中调用“startService”不会冻结 Activity UI）。但是，当我在现有安装上再次安装它时，启动器 Activity 的 UI 会挂起，直到启动的 IntentService 的“onHandleIntent”完成（即使我将“startActivity”放在“AsyncTask doInBackground”或“Handler post”中）。是什么赋予了？我假设 IntentService 应该始终是异步的，但在这种情况下它不是。如何保证“onHandleIntent”始终异步执行并且不会阻塞调用它的 Activity 的 UI？当有人安装更新等时，这似乎会影响应用程序。

# jquery - 为触控手机添加滑动功能

> ID：10581149
> 
> 赞同：0
> 
> 时间：2012-05-14T10:01:57.127
> 
> 标签：jquery, iphone, ipad, touch, swipe

是否有我可以使用的独立插件允许我从触摸设备添加滑动功能？

所以我有一个 jQuery 插件，但我可以简单地下载一个为现有插件提供 sqipe 功能的附加组件吗？

如果不能，你能告诉我自己添加它的语法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T10:06:30.743

您可以通过简单地使用“jquery.mousewheel-3.0.4”并在水轮脚本中添加几行代码来添加鼠标滚轮控件。在“可选轮播控件的事件处理程序”下：

```
$(this).bind('mousewheel',this,function(event, delta) {
if (delta > 0) {
rotateCarousel(true,delta);
return false;
}
else
{
rotateCarousel(false,delta);
return false;
}
}); 
```

# asp.net-mvc - 通过 Amazon SES Api 发送不同的正文

> ID：10581150
> 
> 赞同：1
> 
> 时间：2012-05-14T10:01:57.610
> 
> 标签：asp.net-mvc, amazon-web-services, amazon-ses

我正在使用 Amazon-SES api 向客户发送电子邮件。这是非常成功的，但我必须为每个客户发送不同的正文。当我开始向大约 200.000 个客户发送邮件时，下面的代码是什么样的？它是循环 200.000 次还是我可以准备一个对象并发送一次（如 n:n 系统，现在是 1:n）。

```
var clientList=new List<String>(); //200.000 mail adress
foreach(var to in clientList)
{
        SendEmailRequest email = new SendEmailRequest();
        email.Message = new Message();
        email.Message.Body = new Body();
        email.Message.Body.Html = new Content(bodyhtml);
        email.Message.Subject = new Content(subject);

        email.WithDestination(new Destination() { ToAddresses = new List<String>() { to } })
        .WithSource("mysite@mysite.com")
        .WithReturnPath("mysite@mysite.com");

        SendEmailResponse resp = client.SendEmail(email); //that's 1:n
}

SendEmailResponse resp = client.SendEmail(emailList); //that's n:n but it's a wrong usage 
```

如何在 Amazon SES 中发送 n:n 算法？

应用程序是 Asp.net MVC 3。那么我可以使用异步控制器吗？这是个好主意吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T12:53:17.537

[假设您已经拥有Amazon SES](http://aws.amazon.com/ses/)的生产访问权限（请参阅[完成测试和评估 Amazon SES 后我应该做什么？ ），并且](http://aws.amazon.com/ses/faqs/#10)*发送配额*已足够增加以首先每天发送 200.000 封邮件（请参阅[Amazon SES 如何设置发送Limits](http://docs.amazonwebservices.com/ses/latest/DeveloperGuide/ManagingActivity.PlanningAhead.html) )，分别记录了[SendEmail](http://docs.amazonwebservices.com/ses/latest/APIReference/API_SendEmail.html)操作的限制：

> 消息的总大小不能超过 10 MB。
> 
> Amazon SES 对每封邮件的收件人总数有限制： **To:、CC: 和 BCC: 电子邮件地址的总和不能超过 50 个**。如果您需要将电子邮件发送给更多的受众，您可以将您的收件人列表分成 50 个或更少的组，然后反复调用 Amazon SES 以将消息发送到每个组。*[强调我的]*

**请注意**：强烈建议`Bcc:`仅用于这种群发邮件操作，否则您的用户将看到他们的邮件地址相互暴露，我保证他们不会被逗乐！

因此，您*可以一次*准备包含 50 个`Bcc:`收件人的邮件，将您的用例的出站邮件数量降至 4.000 左右，这已经是一个相当大的改进。**但是**，请注意 AWS 团队对[增加发送限制的相应回复以及常见问题解答](https://forums.aws.amazon.com/message.jspa?messageID=275868#275868)：

> 如果您要发送到多个 ISP [...]，我建议您一次发送到一个地址，因为**某些 ISP 对 BCC 上的多个地址很敏感：大量行**。*[强调我的]*

此警告是否适用取决于您的用例（例如，您可能能够通过 ISP 等对邮件进行分片）。

异步执行它很好并且可能有用，但您还需要确保保持在*最大发送速率*（邮件/秒）限制内。[这些限制在AWS 管理控制台](http://aws.amazon.com/console/)的 SES 选项卡中可见，但当然也可以通过 API 获得（有关详细信息，请参阅[监控您的发送限制](http://docs.amazonwebservices.com/ses/latest/DeveloperGuide/ManagingActivity.SendingLimits.html)）。

# java - java.io 的困境

> ID：10581153
> 
> 赞同：4
> 
> 时间：2012-05-14T10:02:04.940
> 
> 标签：java, filereader, inputstreamreader

java.io.Reader 和 java.io.InputStreamReader 类都具有具有完全相同签名的读取方法

```
public int read(char[] charbuf, int offset, int length) throws IOException 
```

现在根据 java 文档，类 java.io.FileReader 继承了上述**两个类的这****两个**read() 方法。

现在作为 FileReader 扩展 InputStreamReader 进一步扩展 Reader

```
(Reader <-- Inputstreamreader <-- FileReader) 
```

并且 read() 在两个类中具有相同的签名，难道不是 InputStreamReader 覆盖了 Reader 的 read() 并且 FileReader 继承了该覆盖的方法吗？或者我在这里错过了什么？

此外，由 FileReader 继承的两个 read() 功能略有不同（大约一个在等待输入时阻塞，而另一个则不阻塞）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-14T10:08:11.047

中的方法`InputStreamReader`提供了中*抽象*方法的实现`Reader`。`FileReader`不再覆盖该方法；它只是从`InputStreamReader`.

请注意，有*四个*签名可供读取：

```
public int read()
public int read(char[] cbuf, int offset, int length)
public int read(char[] cbuf)
public int read(CharBuffer target) 
```

`InputStreamReader`仅覆盖其中的前两个。也许这就是让你困惑的地方？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-14T10:09:31.740

好吧，让我们检查一下源代码好吗？

类[阅读器](http://www.docjar.com/html/api/java/io/Reader.java.html)：

```
abstract public int read(char[] cbuf,
    int off,
    int len) throws IOException 
```

所以，`abstract`这里没什么可看的。

类[InputStreamReader](http://www.docjar.com/html/api/java/io/InputStreamReader.java.html)：

```
public int read(char[] cbuf,
    int offset,
    int length) throws IOException 

{
        return sd.read(cbuf, offset, length);
} 
```

所以这里我们重写了 from 的方法`Reader`。

最后，[FileReader](http://www.docjar.com/html/api/java/io/FileReader.java.html)没有定义这样的方法，所以它只是从`InputStreamReader`.

# asp.net - 更改登录和注销asp.net的重定向

> ID：10581159
> 
> 赞同：1
> 
> 时间：2012-05-14T10:02:23.490
> 
> 标签：asp.net

我已将我的 Default.aspx 放在一个文件夹中，现在当我使用用户登录时，它会将我重定向到根文件夹（不存在）中的 Default.aspx，因此我收到资源未找到错误。此外，当我注销时，我只是被重定向到根文件夹。我该如何解决这个问题，以便我被重定向到正确的位置？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T10:12:09.210

如果您使用内置的 asp.net 成员身份验证，那么在您的 web.config 中，将有一个部分允许您指定登录或注销后`defaultUrl`的默认设置。`Redirect`

```
<authentication mode="Forms">
  <forms loginUrl="~/Account/Login.aspx" timeout="2880" defaultUrl="[Spefify Page Here]" />
</authentication> 
```

或者，您可以使用`Response.Redirect`在代码中指定页面。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-14T10:05:37.153

当`login`和`logout`，在各自的页面中，您可以使用`Response.Redirect`方法。

[http://msdn.microsoft.com/en-us/library/a8wa7sdt%28v=vs.80%29.aspx](http://msdn.microsoft.com/en-us/library/a8wa7sdt%28v=vs.80%29.aspx)

```
Response.Redirect("link_of_your_desired_location", false); 
```

# css - 隐藏在内容 IE7 后面的 CSS 下拉菜单

> ID：10581160
> 
> 赞同：3
> 
> 时间：2012-05-14T10:02:23.440
> 
> 标签：css, drop-down-menu, internet-explorer-7

我有一个下拉 CSS 菜单，当在 IE7 中查看时，它会隐藏在主页内容后面。我尝试更改 z-index 值但没有运气。我也尝试过这个网站的其他主题的建议，但没有一个奏效。

该页面可在此处找到：[www.melbournedodgeball.com.au/dodgeball2012/about](http://www.melbournedodgeball.com.au/dodgeball2012/about)

任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-14T10:18:29.790

CSS 规范关于 Z-index的[段落](http://www.w3.org/TR/CSS21/visuren.html#z-index)说，新的堆叠上下文仅针对具有 z-index 而非 auto 的定位内容创建。

您的`li`内部`#nav`带有`position:relative`，显然 IE 将其解释为新的堆叠上下文。

**试试这个：**

```
#nav li {
    display: block;
    position: relative;
    z-index: 1;         // force IE to recognize stack at this point
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-14T10:08:12.777

您需要添加

```
position:relative; 
```

给你的`<ul>`

Z-Index 是相对于同一堆叠上下文中的所有其他元素指定的。您可以将 Z-Index 设为 100，但如果元素属于完全不同的堆叠上下文，则不会有任何区别。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-14T10:34:16.420

我已经测试了这段代码，它肯定会工作 请将此 css 设置为仅用于 IE7

```
#menu {position:relative; z-index:100;} 
```

# regex - 用于从文件中提取特定数据的 Shell 脚本

> ID：10581162
> 
> 赞同：0
> 
> 时间：2012-05-14T10:02:27.437
> 
> 标签：regex, shell

给定一个包含以下形式的记录的文本文件：

```
.....

feGroup1Person1 Person ::= {

    id 1011,
    uniquename "name1",
    data 40,
    moredata 100

}

feGroup1Person2 Person ::= {

    id 5223,
    uniquename "name2",
    data 40,
    moredata 200

}

....... 
```

在 shell 脚本中，我如何才能为特定的唯一名称提取组 ID 和个人 ID？

例如：给定“name2”，我想提取“feGroup1Person2”。

我假设需要一些正则表达式，但我没有任何运气。

任何帮助表示赞赏

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T10:13:17.680

您不想为此使用 shell 脚本。您需要使用 Perl、VBScript、PowerShell 或许多其他更复杂的脚本语言之一。

您使用的主要取决于您的平台。在 Windows 上，尝试将 VBScript 作为首选。在 Linux 上，首先尝试 Perl。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-14T10:26:44.710

```
> awk '$0~/Person ::= \{/{x=$1; print x}' file
feGroup1Person1
feGroup1Person2
> 
```

如果您只想要组 ID，您可以在下面使用：例如，您希望组是名称为“name2”的人，那么：

```
awk '/name2/{print x2}{x2=x1;x1=x;x=$1}' file 
feGroup1Person2 
```

如果名称是“name1”

```
awk '/name1/{print x2}{x2=x1;x1=x;x=$1}' file
feGroup1Person1 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-14T10:20:18.860

不要试图完全根据正则表达式来制定解决方案。您的问题非常复杂，仅使用正则表达式并不是一个明智的工具选择。

通过一些操作，您可以使其看起来像[JSON 格式](http://en.wikipedia.org/wiki/JSON)的数据，然后使用 JSON 解析器对其进行解析。任何体面的编程语言（Python、Perl、Ruby...）都应该带有 JSON 解析器。

```
{    
    "feGroup1Person1" : {        
        "id" = 1011,
        "uniquename" = "name1",
        "data" =  40,
        "moredata" = 100
    }    
    "feGroup1Person2" :
    {        
        "id" : 5223,
        "uniquename" : "name2",
        "data" : 40,
        "moredata" : 200        
    }    
} 
```

# actionscript-3 - 如何从动作脚本中的给定字符串中检测并删除“\n”？

> ID：10581163
> 
> 赞同：2
> 
> 时间：2012-05-14T10:02:28.203
> 
> 标签：actionscript-3

我有以下代码，

```
public static function clearDelimeters(formattedString:String):String
{
    return formattedString.split("\n").join("").split("\t").join("");
} 
```

空格即“\t”被删除，但换行符“\n”没有从格式化字符串中删除。

我什至试过

```
public static function clearDelimeters(formattedString:String):String
{
    var formattedStringChar:String = "";
    var originalString:String = "";
    var j:int = 0;
    while((formattedStringChar = formattedString.charAt(j)) != "")
    {
        if(formattedStringChar == "\t" || formattedStringChar == "\n")
        {
            j++;
        }
        else
        {
            originalString = originalString + formattedString;
        }
        j++;
    }
    return originalString;
} 
```

这也没有奏效。
预期的帮助是不删除换行符分隔符的原因以及删除换行符的某种方法。
谢谢你的期待

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-05-14T10:18:45.730

在少数情况下，行尾标记可能是：CRLF、CR、LF、LFCR。可能您的字符串包含用于行尾的 CRLF，而不仅仅是 LF (\n)。因此，在删除了所有 LF 之后，一些文本编辑器仍会将 CR 视为行尾字符。

试试这个：

```
//this function requires AS3
public static function clearDelimeters(formattedString:String):String {     
  return formattedString.replace(/[\u000d\u000a\u0008\u0020]+/g,""); 
} 
```

请注意， \t 用于制表符，它不是空格。或者，如果您正在使用 HTML，<br> 和 <br/> 用于在 HTML 中进行换行，但它们不是行尾字符。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-14T11:20:48.943

正则表达式的答案是正确的，但我总是喜欢它更易读的版本（虽然不知道它对性能的影响）

```
result = string.split("\n\r").join(""); 
```

或者做 \n 和 \r 分开分开。\n\r 是所有操作系统的通用标准。检查维基百科以检查为什么将它们连接在一起（（CR + LF，'\r\n'，0x0D0A））。

[http://en.wikipedia.org/wiki/Newline#Representations](http://en.wikipedia.org/wiki/Newline#Representations)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-14T10:08:25.697

你确定它不是一个

```
<br> 
```

或者

```
</br>? 
```

或者

```
/r 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-11-08T05:32:04.733

```
// try this. it works for me!!! Wink-;^D
function removeNewLinesFrom(This){
nl='' + newline;
removed=''
for(i=0;i<=(This.length-1);i++){
if(This.charAt(i)!=nl){removed+=This.charAt(i)}
}
return(removed)
}
// Simplify the name of the function
rnlf=removeNewLinesFrom
// Wright a example
example='hello '+newline+'world'
// prompt the example
trace('prompt='+rnlf(example)) 
```

# facebook-like - 喜欢按钮问题

> ID：10581167
> 
> 赞同：0
> 
> 时间：2012-05-14T10:02:47.073
> 
> 标签：facebook-like, facebook-social-plugins

我在这个页面 www.vivopositivo.it/media/foto/guarda-chi-sorride-over-18-e-famiglie/ 上遇到了一个奇怪的问题，带有类似按钮。我正在使用 PrettyPhoto 来包含来自 Flickr 的图片并在灯箱中打开它们。每张图片都有自己的类似按钮，该按钮显示在灯箱中并使用特定的 URL，例如：

http://www.vivopositivo.it/media/foto/guarda-chi-sorride-over-18-e-famiglie/#prettyPhoto[pp_gal]/1/

其中#prettyPhoto[pp_gal]/1/ 中的数字是特定图像的键。

类似按钮包含在以下代码中：

iframe src="//www.facebook.com/plugins/like.php?locale=en_US&href={location_href}&layout=button_count&show_faces=true&width=500&action=like&font&colorscheme=light&height=23" scrolling="no" frameborder="0" 样式="边框：无；溢出：隐藏；宽度：500px；高度：23px；" allowTransparency="true" /iframe

其中 {location_href} 被替换为图像特定的 URL。

这适用于大多数图像，但对于其中一些图像不起作用！他们似乎得到了页面的类似计数器，因此，我得到了大约 10 张图像，它们显示了相同的 128 个类似计数器，这显然是错误的。这似乎完全随机..

您对如何解决此问题有任何想法吗？

干杯，安德里亚

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T12:02:24.027

这是因为 URL 中的 # 标识了图像。

请参阅[此帖子](https://stackoverflow.com/questions/3467296/facebook-like-buttons-and-url-strings)以获取更多说明。

# grep - Grepping stdin 和管道到 sed 似乎不起作用

> ID：10581170
> 
> 赞同：4
> 
> 时间：2012-05-14T10:03:12.007
> 
> 标签：grep, replace

我正在尝试过滤和替换标准输入，以便仅捕获根据我的口味调整的特定字符串。例如，假设标准输入字符串是

```
"KB: the system ran into a critical error" 
```

然后我会grep这一行，把“KB:”改成“###”，然后输出到STDOUT这样

```
"### the system ran into a critical error" 
```

我在 Fedora 12 中尝试过（实际上在许多其他版本中）

```
$ grep "KB:" - | sed -e 's/KB:/###/g'
KB: the system ran into a critical error <--- This is what I typed in manually.
                                         <--- Nothing is printed 
```

我创建了一个文本文件 text.txt，其中包含相同的示例字符串，然后`grep`从文件中读取，例如：

```
$ grep "KB:" text.txt | sed -e 's/KB:/###/g'
### the system ran into a critical error <--- Correctly displayed
$ 
```

从内部看出什么区别`grep/sed`以及为什么 STDIN 方法不起作用？我不想听到诸如 using 之类的替代方案`xargs`，而是想知道为什么我的尝试会失败。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-14T11:01:08.343

这对我有用：

`echo "KB: the system ran into a critical error" | grep "KB:" | sed -e 's/KB:/###/g'`

注意命令中`-`字符的排除。`grep`

在这里使用`grep`是没用的。您可以将代码缩减为大小：

`echo "KB: the system ran into a critical error" | sed -e 's/KB:/###/g'`
`### the system ran into a critical error`

# django - django-disqus 集成

> ID：10581171
> 
> 赞同：1
> 
> 时间：2012-05-14T10:03:12.910
> 
> 标签：django, disqus

1.  我在我的网站 villaint.ru 上安装了 django-disqus

    INSTALLED_APPS = ( ... 'disqus', )

    DISQUS_API_KEY = 'my_secret_api_key'
    DISQUS_WEBSITE_SHORTNAME = '恶棍'

2.  在模板中：

    {% 加载 disqus_tags %}
    {% disqus_show_comments %}

我在[http://villaint.ru/blog/entry/2/](http://villaint.ru/blog/entry/2/)页面上遇到错误：

```
Could not connect to URL: "http://villaint.ru/blog/entry/2/" (error was "[Errno -2] Name or service not known") 
```

在页面[http://www.villaint.ru/blog/entry/2/](http://www.villaint.ru/blog/entry/2/)我有以下错误：

```
Could not connect to URL: "http://www.villaint.ru/blog/entry/2/" (error was "HTTP Error 404: Not Found") 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T12:07:28.277

注意：这不是直接回答您在 django-disqus 上的问题，但如果您的唯一目标是在您的帖子中显示 disqus 评论，那么直接这样做很容易。

在您的模板中，只需输入：

```
<div id="disqus_thread"></div>

<script type="text/javascript">
    /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
    var disqus_shortname = 'your_disqus_shortname'; // required: replace example with your forum shortname

    // The following are highly recommended additional parameters. Remove the slashes in front to use.
    // var disqus_identifier = 'unique_dynamic_id_1234';
    // var disqus_url = 'http://example.com/permalink-to-page.html';

    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="http://disqus.com" class="dsq-brlink">blog comments powered by <span class="logo-disqus">Disqus</span></a> 
```

# c - 为什么与 -Wtraditional-conversion 结合使用 stdbool.h 会导致警告

> ID：10581173
> 
> 赞同：1
> 
> 时间：2012-05-14T10:03:14.393
> 
> 标签：c, gcc, gcc-warning

这是一个例子：

```
#include <stdbool.h>

void foo(bool b){};
void bar(bool b) {foo(b);}

int main() {
    bar(false);
} 
```

我编译：

```
gcc -Wtraditional-conversion test.c 
```

我收到这些警告：

```
test.c: In function 'bar':
test.c:4: warning: passing argument 1 of 'foo' with different width due to prototype
test.c: In function 'main':
test.c:7: warning: passing argument 1 of 'bar' with different width due to prototype 
```

为什么会出现这些警告？据我所见，参数都是相同的类型，所以应该是相同的宽度。在这段非常简单的代码中，-Wtraditional-conversion 做了什么来导致这些警告？

当我从使用自己的 bool typedef 切换到 stdbool.h def 时，我开始遇到这些错误。

我原来的定义是：

```
typedef enum {false, true} bool; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T08:54:03.610

这是不理解编译器警告标志的情况。

使用`-Wconversion`not`-Wtraditional-conversion`获取警告隐式转换的警告。`-Wtraditional-conversion`用于在没有原型的情况下警告转换。

`typdef enum`因为创建了一个默认的整数 bool 类型（通常为 32 位）而被抓住，其中 as`stdbool.h`将 bool 定义为 8 位，这与 C++ bool 兼容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T10:23:51.347

调用的警告`bar`是正确的，因为您要求编译器是悬而未决的。`false`展开为`int`常数`0`，所以它不是`bool`( 或`_Bool`)。

第一个警告是一个错误。

# input - 在 FORTRAN 77 中阅读带有注释的输入

> ID：10581176
> 
> 赞同：0
> 
> 时间：2012-05-14T10:03:25.957
> 
> 标签：input, comments, fortran

我有一个简单的输入文件，其中包含注释（以 # 开头的行）。示例数据如下所示：

```
#NDIM
 1
#NX   NY   NZ
 3001 1    1
#I_RXN
 2 
```

我想告诉代码，每次我在行首遇到字符 # 时都跳过该行并继续下一行。我必须在 FORTRAN 77 中执行此操作。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-14T10:22:14.260

您可以将这些行读入一个字符串，然后测试第一个字符是否为“#”。如果没有，请使用“内部读取”从字符串中读取数值。以前有关于这种技术的答案，例如，[Reading comment lines correct in an input file using Fortran 90](https://stackoverflow.com/questions/10259712/reading-comment-lines-correctly-in-an-input-file-using-fortran-90)

# forms - 用于多对多关系的 Symfony2 表单小部件

> ID：10581177
> 
> 赞同：7
> 
> 时间：2012-05-14T10:03:29.770
> 
> 标签：forms, symfony, many-to-many

在 Symfony 1 中有一个名为 admin_double_list 的表单小部件。它生成了两个名为 Unassociated 和 Associated 的选择字段。它还生成了将项目从一个列表添加到另一个列表的按钮。

在 Symfony2 中是否有任何简单的方法可以实现这一点？或者也许是其他一些用户友好的方式来编辑多对多关系？

在[文档](http://symfony.com/doc/current/reference/forms/types/choice.html)中，只有四个用于多对多关系的小部件，当有大量关系需要编辑时，它们都不是很好。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-05-14T14:09:24.063

[您可以使用实体表单字段](http://symfony.com/doc/current/reference/forms/types/entity.html)轻松管理多对多关系。例如，如果`User`作为与 的多对多关系`Group`，您可以简单地添加到构建器：

```
$builder->add('groups', 'entity', array(
    'multiple' => true,   // Multiple selection allowed
    'expanded' => true,   // Render as checkboxes
    'property' => 'name', // Assuming that the entity has a "name" property
    'class'    => 'Acme\HelloBundle\Entity\Group',
); 
```

这将生成一个复选框列表，其中关联的实体被标记（选中），而未关联的实体则没有。设置`expanded`为`false`您可以将其呈现为选择元素（多个）。

如果您需要自定义检索组的方式，您还可以传递一个`query_builder`选项，`QueryBuilder`实例或闭`$er`包`EntityRepository`

```
'query_builder' => function(\Doctrine\ORM\EntityRepository $er) {
    $qb = $er->createQueryBuilder('g');

    return $qb->orderBy('g.name', 'DESC);
} 
```

对于更复杂的场景，还请查看[集合表单类型](http://symfony.com/doc/current/reference/forms/types/collection.html)，但您必须处理 jQuery/Javascript。

# solr - 如何索引随时间变化的虚拟字段

> ID：10581178
> 
> 赞同：0
> 
> 时间：2012-05-14T10:03:34.897
> 
> 标签：solr, sunspot, sunspot-rails

我有一个虚拟字段`weight`，它根据现在和对象 created_at 时间之间的时间差而变化。我想每 2 小时在 Sunspot 中更新一次，所以我打算打电话给`Topic.solr_index`.

但是我认为 Sunspot 只会索引标记为脏的记录。所以我想这行不通。我的问题是：

*   如何在 Sunspot 中索引这种非脏的当前时间相关字段
*   如何`weight`在 solr admin 中检查是否已正确更新（或任何其他检查索引结果的方式）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T07:15:41.783

我的假设是错误的。

如果我有一个权重方法，它根据当前时间输出真/假（如果现在是早上，就说真），即使模型没有被标记为脏，Sunspot 仍然会每次都正确索引。

# android - Android：Device Admin：为什么Activity应该是DeviceAdminReceiver类的内部类？

> ID：10581183
> 
> 赞同：0
> 
> 时间：2012-05-14T10:03:39.547
> 
> 标签：android, device-admin

我读过的许多帖子都指出 Activity 应该是 DeviceAdminReceiver 的内部类，但我不明白为什么会这样。

android 文档也没有做出这样的声明，尽管他们的示例是这样的。

这是实际要求吗？如果是这样，这是否意味着不能使用服务调用它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T10:29:26.533

好的，找到了隐藏在示例应用程序[源代码中的答案。](http://developer.android.com/resources/samples/ApiDemos/src/com/example/android/apis/app/DeviceAdminSample.html)

```
/**
 * <p>UI control for the sample device admin.  This provides an interface
 * to enable, disable, and perform other operations with it to see
 * their effect.</p>
 *
 * **<p>Note that this is implemented as an inner class only keep the sample
 * all together; typically this code would appear in some separate class.**
 */ 
```

位于内部类（活动）的上方，表示它不必是内部类，建议将这两个类分开。

# python - 如果其中一个参数损坏，如何继续执行具有许多参数的函数？

> ID：10581185
> 
> 赞同：2
> 
> 时间：2012-05-14T10:03:43.570
> 
> 标签：python, with-statement

再会！我有以下代码：

```
def initial(*args):
    for arg in args:
        with open(arg) as f:
            print 'passed' 
```

它从此代码调用：

```
if __name__ == '__main__':
   initial('test_staff/1.txt', 'test_staff/d2.txt', 'test_staff/1.txt') 
```

我的问题是，如果第二个参数“test_staff/d2.txt”损坏（文件不存在），如何继续执行一个函数（第三个参数）？

我看到了几种方法：

1.  编写函数来传递存在
2.  使用 try, throw, finally。

但它如何与“来自 pep 的声明”一起执行？

谢谢！

**upd：函数名称从*_* _** *initial* ***_* _** () 更改为***initial*** ()

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-14T10:14:50.117

我建议检查文件是否存在或做一些尝试/除了

```
import os

def main(*args):
    for arg in args:
        if not os.path.exists(arg):
            continue

        with open(arg) as f:
            print("passed") 
```

否则你可以捕获异常 ( `IOError`)

```
def main(*args):
    for arg in args:
        try:
            with open(arg) as f:
                print("passed")
        except IOError:
            print("File doesn't exist") 
```

有些人说“Try and Catch”而不是做很多检查，还有一些人更喜欢检查而不是尝试和捕捉！恕我直言，他们俩都很好！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T10:06:19.743

```
def main(*args):
    for arg in args:
        try:
            f = open(arg)
            print 'passed'
            break
        except:
            pass
        else:
            with f:
                do_stuff_with(f) 
```

虽然看起来不是很好...

# scala - 展平相同类型的嵌套列表

> ID：10581192
> 
> 赞同：3
> 
> 时间：2012-05-14T10:04:21.897
> 
> 标签：scala, pattern-matching, review

假设我想展平相同类型的嵌套列表......例如

```
 ListA(Element(A), Element(B), ListA(Element(C), Element(D)), ListB(Element(E),Element(F))) 
```

`ListA`包含相同类型的嵌套列表 ( `ListA(Element(C), Element(D))`) 所以我想用它包含的值替换它，所以上面示例的结果应该如下所示：

```
ListA(Element(A), Element(B), Element(C), Element(D), ListB(Element(E),Element(F))) 
```

当前类层次结构：

```
abstract class SpecialList() extends Exp {
    val elements: List[Exp]
}

case class Element(name: String) extends Exp

case class ListA(elements: List[Exp]) extends SpecialList {
        override def toString(): String = "ListA("+elements.mkString(",")+")"
}

case class ListB(elements: List[Exp]) extends SpecialList {
        override def toString(): String = "ListB("+elements.mkString(",")+")"
}

object ListA{def apply(elements: Exp*):ListA = ListA(elements.toList)}
object ListB{def apply(elements: Exp*):ListB = ListB(elements.toList)} 
```

我已经提出了三种可行的解决方案，但我认为必须有更好的方法来实现这一点：

**第一个解决方案：**

```
def flatten[T <: SpecialList](parentList: T): List[Exp] = {
        val buf = new ListBuffer[Exp]

        for (feature <- parentList.elements) feature match {
            case listA:ListA if parentList.isInstanceOf[ListA] => buf ++= listA.elements
            case listB:ListB if parentList.isInstanceOf[ListB] => buf ++= listB.elements
            case _ => buf += feature
        }
        buf.toList
    } 
```

**第二种解决方案：**

```
def flatten[T <: SpecialList](parentList: T): List[Exp] = {
    val buf = new ListBuffer[Exp]

    parentList match {
        case listA:ListA => for (elem <- listA.elements) elem match {
                                case listOfTypeA:ListA => buf ++= listOfTypeA.elements
                                case _ => buf += elem
                            }

        case listB:ListB => for (elem <- listB.elements) elem match {
                                case listOfTypeB:ListB => buf ++= listOfTypeB.elements
                                case _ => buf += elem
                            }
    }

    buf.toList
} 
```

**第三个解决方案**

```
def flatten[T <: SpecialList](parentList: T): List[Exp] = parentList.elements flatMap {
    case listA:ListA if parentList.isInstanceOf[ListA] => listA.elements
    case listB:ListB if parentList.isInstanceOf[ListB] => listB.elements
    case other => List(other)
} 
```

我的问题是，是否有更好、更通用的方法来实现与所有上面三个解决方案相同的功能是否存在重复代码？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-10-16T18:17:40.687

真正实用的方式。不使用变量。

```
def flatten[A](list: List[A]): List[A] = list match {
   case Nil => Nil
   case (ls: List[A]) :: tail => flatten(ls) ::: flatten(tail)
   case h :: tail => h :: flatten(tail)
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T11:57:33.373

我更喜欢递归方式。一般来说，我会做这样的事情：

```
def flattenList[A](l: List[Any]): List[A] = {
  var acc = List[A]()
  l foreach ( entry => entry match {
    case a: List[Any] => acc = acc ::: flattenList(a)
    case b: A => acc = acc :+ b
  })
  acc
} 
```

`List(Element(A), Element(B), List(Element(C), Element(D), List(Element(E), Element(F))))`这会让你变平`List(Element(A), Element(B), Element(C), Element(D), Element(E), Element(F))`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-16T20:36:36.063

在理想的世界中，不存在可悲的类型擦除，你会做这样的事情：

```
// WON'T WORK
def flatten[T <: SpecialList](parentList: T): List[Exp] = parentList.elements flatMap {
    case x:T => x.elements
    case somethingElse => List(somethingElse)
} 
```

但在我看来，在这种情况下最好的解决方案是：

```
def flatten[T <: SpecialList](parentList: T): List[Exp] = parentList.elements flatMap {
    case x:SpecialList if x.getClass == parentList.getClass => x.elements
    case somethingElse => List(somethingElse)
} 
```

它比问题中提出的更通用一点，因为您无需担心参数是 ListA 还是 ListB，而且如果将来您要添加 ListC，它也将起作用。

但是，这不会解决您在任意深度展平的更普遍的问题，因为 flatten(ListA(...)) 最后还必须返回一个 ListA(...) - 在上述情况下，它返回一个 List失去了它的最初含义。这个问题的解决方案可能是：

```
abstract class SpecialList {
    val elements: List[Exp]

    def flatten: SpecialList = createAnother(elements flatMap {
        case x: SpecialList => {
            val flattenX = x.flatten
            if (flattenX.getClass == this.getClass) flattenX.elements else List(flattenX)
        }
        case somethingElse => List(somethingElse)
    })

    // Creates another special list of the same type
    def createAnother(elements: List[Exp]): SpecialList

}

case class ListA(elements: List[Exp]) extends SpecialList {
    override def toString: String = "ListA("+elements.mkString(",")+")"

    def createAnother(elements: List[Exp]) = ListA(elements)
}

case class ListB(elements: List[Exp]) extends SpecialList {
    override def toString: String = "ListB("+elements.mkString(",")+")"

    def createAnother(elements: List[Exp]) = ListB(elements)
} 
```

在这种情况下，问题在于该`createAnother`位是纯样板文件。另一方面，这个版本保持了上述解决方案的通用性。

第三个建议，可能涉及更多地重构您的代码，是完全删除 ListA 和 ListB 类型，因为在我看来，它们的目的是为 Exp 列表提供标记。所以考虑这个解决方案：

```
case class SpecialList(tag: Tag, elements: List[Exp]) extends Exp {
    def flatten: SpecialList = {
        val newElems = elements flatMap {
            case x: SpecialList => {
                val flattenX = x.flatten
                if (flattenX.tag == this.tag) flattenX.elements else List(flattenX)
            }
            case somethingElse => List(somethingElse)
        }
        SpecialList(tag, newElems)
    }

    override def toString = tag.toString ++ "(" + elements.mkString(",") + ")"

}

sealed abstract class Tag {

    // Syntactic sugar to maintain the notation used in the question
    def apply(elements: Exp*): SpecialList = SpecialList(this, elements.toList)

}

object ListA extends Tag { override val toString = "ListA" }
object ListB extends Tag { override val toString = "ListB" } 
```

从句法的角度来看，它几乎是一样的，因为你有

```
val x = ListA(Element(A), Element(B), ListA(Element(C), Element(D)), ListB(Element(E),Element(F), ListA(Element(C), ListA(Element(D)))))
x.flatten => ListA(Element(A),Element(B),Element(C),Element(D),ListB(Element(E),Element(F),ListA(Element(C),Element(D)))) 
```

但是，这可能不适合您的问题，如果我在那里偏离了轨道，很抱歉。

# android - 如何在 Java 代码中使用 String.Xml 文件中的颜色

> ID：10581193
> 
> 赞同：2
> 
> 时间：2012-05-14T10:04:23.783
> 
> 标签：android, paint

我的 String.xml 文件中有颜色，如下所示：

```
<?xml version="1.0" encoding="utf-8"?>
<resources>

      <string name="txtEmail">Email </string>
       <string name="txtPin">Pin Code</string>
       <string name="lblProtected"> Protected</string>

       <color name="MiscellaneousPercent">#ffff992b</color>
       <color name="MusicPercent">#ffffdd58</color>
       <color name="PicturesPercent">#ff48aa71</color>
       <color name="eBooksPercent">#ff00cff9</color>
       <color name="DocumentsPercent">#ff019df2</color>
</resources> 
```

我想在我的项目中使用这些颜色，以便通过代码迭代颜色。

```
 public class BreakDownBar extends View {

        public BreakDownBar(Context context, AttributeSet attrs) {
            super(context, attrs);
        }

            @Override
            protected void onDraw(Canvas canvas) {

                     for (int i = 0; i < 5; i++) {
            Paint paint = new Paint();
                        paint.setColor(/*I want to use the colors HERE*/); 
            }

                }
} 
```

如何使用上述`onDraw`方法中的颜色`SetColor()`？我可以将 String.XML 文件中的颜色放在一个数组中吗？谁能帮我？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-14T10:06:45.640

像这样使用

```
context.getResources().getColor(R.color.MusicPercent); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-14T10:06:31.960

您必须利用您的上下文，并以数组格式提供您的资源并使用它。

```
public class BreakDownBar extends View {

    Context context=null;
int res[]={R.color.black,R.color.blue,R.color.white,R.color.pink,R.color.grey};

        public BreakDownBar(Context context, AttributeSet attrs) {
            super(context, attrs);
            this.context=context;
        }

            @Override
            protected void onDraw(Canvas canvas) {

                     for (int i = 0; i < 5; i++) {
                       Paint paint = new Paint();
                       paint.setColor(res[i]));
            }

                }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-14T10:08:44.937

//你可以通过获取资源来使用

```
paint.setColor(context.getResources().getColor(R.color.custom_red)); 
```

# facebook - 是否有任何开源社交媒体监控工具？

> ID：10581194
> 
> 赞同：0
> 
> 时间：2012-05-14T10:04:29.433
> 
> 标签：facebook, social, social-media

我正在寻找一种工具，它可以查看 Facebook/Twitter 等社交媒体网站，并根据给定的搜索标准实时向我展示评论和社交媒体时间线。

我希望能够去修改这个工具中的代码，这样我就可以在工具的搜索结果上应用我自己的算法。

谢谢阿布舍克 S

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T19:57:24.260

你可以看看Apphera。它可能是最全面的开源社交媒体监控解决方案，Twitter 和 FB 参与将在大约 2 周内成为其中的一部分（包括评论跟踪等）

Github 上的Nikolai Manek [Apphera](https://github.com/nikoma/apphera)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-21T08:00:53.747

你可以试试这个： http: [//www.binpress.com/app/social-media-management-platform-for-codeigniter/1573](http://www.binpress.com/app/social-media-management-platform-for-codeigniter/1573)

它是开源 CodeIgniter 脚本

# github - 我在哪里上传拉取请求消息中使用的图像？

> ID：10581196
> 
> 赞同：20
> 
> 时间：2012-05-14T10:04:36.323
> 
> 标签：github

我想发出一个 GitHub 拉取请求，其中消息包含屏幕截图。我知道我可以使用以下标记：

```
![My screenshot](myscreenshot.png) 
```

但是我在哪里上传它们？GitHub 自己提供这项服务吗？

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2013-07-10T14:51:14.683

现在，github 提供图片托管，没有必要使用外部服务。您只需要将图像拖放到拉取请求中的评论框中即可：)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-14T11:27:43.947

> GitHub 自己提供这项服务吗？

不。

您必须使用**外部**图像托管服务提供商，例如

*   [http://imgur.com](http://imgur.com)
*   [http://imageshack.us/](http://imageshack.us/)
*   ...

然后使用标记中图像的完整 URL。

例如，使用`![notes marker](http://i.imgur.com/Mha8c.png)`会将以下图像嵌入到拉取请求的描述或评论中。

![笔记标记](../Images/50556ed742aacb53c2ad500e04abd6bf.png)

# c# - RestSharp 读取带有命名空间的特殊 XML 输出：“de.mydomain.ObjectName”

> ID：10581201
> 
> 赞同：0
> 
> 时间：2012-05-14T10:04:44.050
> 
> 标签：c#, wcf, xml-parsing, restsharp

我在删除/忽略/匹配 Web 服务以 XML 输出的命名空间时遇到问题。例子：

```
<list>
   <de.domain.MyClass>
   </de.domain.MyClass>
</list> 
```

该类如下所示：

```
namespace de.domain
{
  public class MyClass
  {
  }
} 
```

这就是我目前访问 XML 的方式：

```
IRestResponse<List<de.domain.MyClass>> response2 = client.Execute<List<de.domain.MyClass>>(request2); 
```

注意：我无法更改服务输出，因此我被这种类型的 XML 内容所困扰。

RestSharp 的 XMLDeserializer 目前只为“response2”中的整个“Data”字段返回 NULL。有没有办法解决这个问题，例如通过注释类？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T11:08:58.260

我确定您没有展示您正在做的事情的全部复杂性，但您是否考虑过仅使用 LINQ to XML 来解析它并投影您想要的对象？

# ajax - 使用 Ajax 加载 tiny_mce.js 并启动 TinyMCE

> ID：10581203
> 
> 赞同：1
> 
> 时间：2012-05-14T10:05:07.803
> 
> 标签：ajax, tinymce

我正在尝试使用 Ajax 加载 tinyMCE，原因是我不希望每个需要加载 tinyMCE 的访问者。

这是我正在使用的代码

```
$.ajax({
  type: "POST",
  url:settings.script+"lib/tiny_mce/tiny_mce.js",
  dataType: "script"
}).done(function() {
    rapport("tiny_mce.js loaded... trying to initiate..");        
    tinyMCE.init({
         mode : "textareas",
         theme : "advanced",
         other:"settings...",
         oninit:function() { console.log("editor initiated, running callback..."); }
        });
}).fail(function() { 
    errorRapport("failed loading tiny_mce.js");        
}); 
```

如果我用 console.log 检查 tinyMCE，我会使用该函数，但是当我尝试执行它时没有任何反应，并且我尝试了 mode:"exact" 和 mode:"exact" 并指向 dom 中的现有文本区域。我没有收到任何错误消息，并且从未执行回调，任何人都有解决方案如何包含 tiny_mce.js 并让编辑器使用 tiny_mce.js 的 Ajax 请求运行？

爱与流动~本都

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T08:56:09.113

[在这里](http://www.tinymce.com/wiki.php/How-to_load/save_with_Ajax_in_TinyMCE)，您将在 tinymce 文档中找到 Howto，它应该可以完全回答您的问题。

# powershell - PowerShell 中的布尔文字

> ID：10581206
> 
> 赞同：189
> 
> 时间：2012-05-14T10:05:33.453
> 
> 标签：powershell

PowerShell 中的布尔文字是什么？

* * *

## 回答 #1

> 赞同：211
> 
> 时间：2012-05-14T10:06:51.453

`$true`和`$false`。

不过，这些都是常数。布尔值没有语言级别的文字。

根据您需要它们的位置，您还可以使用任何*强制*为布尔值的东西，如果类型必须是布尔值，例如，在需要布尔值（并且没有冲突重载）的方法调用中，或者条件语句中。例如，大多数非空对象都是真的。`null`，空字符串，空数组和数字`0`是假的。

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2012-05-15T11:16:13.557

`[bool]1`并且`[bool]0`也有效。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2018-05-15T08:42:32.643

**要向现有答案添加更多信息**：布尔文字`$true`，并且`$false`在用作 PowerShell 脚本的命令行参数时也可以按原样工作。对于存储在名为的文件中的以下 PowerShell 脚本`installmyapp.ps1`：

```
param (
    [bool]$cleanuprequired
)

echo "Batch file starting execution." 
```

现在，如果我必须从 PowerShell 命令行调用这个 PowerShell 文件，我可以这样做：

```
installmyapp.ps1 -cleanuprequired $true 
```

或者

```
installmyapp.ps1 -cleanuprequired 1 
```

这里`1`和 `$true`是等价的。也，`0`和 `$false`是等价的。

**注意**：永远不要期望字符串文字`true`可以自动转换为布尔值。例如，如果我运行以下命令：

```
installmyapp.ps1 -cleanuprequired true 
```

它无法执行脚本并出现以下错误：

> 无法处理参数“cleanuprequired”的参数转换。无法将值“System.String”转换为类型“System.Boolean”。布尔参数仅接受布尔值和数字，例如 $True、$False、1 或 0。

# php - PHP PDO 和事务 - PHP 5.4 和 PHP 5.2.13 上的不同行为

> ID：10581207
> 
> 赞同：2
> 
> 时间：2012-05-14T10:05:36.407
> 
> 标签：php, pdo, php-5.2

对于以下代码，PHP 5.4 和 5.2.13 之间是否存在显着差异？它适用于 PHP 5.4 (& mysql 5.1.62)，不显示错误并执行查询。但是对于 5.2.13 (& mysql 5.1.3.0) 它没有显示任何错误（它不属于 catch 块）但数据没有插入到数据库中

```
 $db = new PDO(DHOST, DUSER, DPASS, array(PDO::ATTR_PERSISTENT => true, PDO::ATTR_EMULATE_PREPARES => true));
        $db->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_WARNING);

 try {
        $db->beginTransaction();
        $db->exec($insertString);
        $db->commit();
    } catch (Exception $e) {
        try {
            $db->rollBack();
            throwDbError($handler->errorInfo());
        } catch (Exception $e2) {
            ...
        }
    } 
```

`beginTransaction`如果我用and省略这些行`commit`，它也适用于 PHP 5.2，但我需要事务。mysql 数据库中的两个表都使用 InnoDB

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T10:41:59.457

错误模式未设置为抛出异常。改变：

```
$db->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_WARNING); 
```

到：

```
$db->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION); 
```

两个 PHP 版本之间应该没有明显的区别。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T10:34:12.427

你应该抓住`PDOException`，不是`Exception`。

# python - python分配变量混乱

> ID：10581213
> 
> 赞同：1
> 
> 时间：2012-05-14T10:05:51.397
> 
> 标签：python, syntax

我正在尝试编写一个脚本 1\. 列出目录的内容，创建它的列表（temp.txt），将列表转换为字符串并将其写入文件 2\. 打开另一个文本文件（t .txt) 并将打开文件的内容与之前保存的文件 (temp.txt) 进行比较并返回差异。这个想法是脚本将能够判断文件夹中是否有新文件。函数 dif 作为独立脚本工作得很好，但是当作为函数嵌套时，我收到以下错误消息：

```
Enter directory >  /users
Traceback (most recent call last):
  File "/Users/alkopop79/NetBeansProjects/comparefiles.py", line 33, in <module>
    dir()
  File "/Users/alkopop79/NetBeansProjects/comparefiles.py", line 12, in dir
    li.append(fname)
UnboundLocalError: local variable 'li' referenced before assignment 
```

和脚本：

```
import os

li = []
lu = []
le = []

def dir():
    dir = raw_input("Enter directory >  ")
    path=dir  # insert the path to the directory of interest
    dirList=os.listdir(path)
    for fname in dirList:
            li.append(fname)
    li = ','.join(str(n) for n in li)   
    targetfile = open("temp.txt", 'w')
    targetfile.write(li)
    targetfile.close() 
    print li

def open_file():
    txt = open('t.txt')
    li = txt.read()
    la = li.split()
    return la
    print len(li)

def open_another():
    txt = open('temp.txt')
    lu = txt.read()
    lo = lu.split()
    return lo
    print len(li)

dir()
a = open_file()
b = open_another()
print set(a) & set(b) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T10:10:15.647

`global li`在你的函数内部使用。据我了解，Python 解释器只有在本地找不到全局变量时才会在全局范围内查找全局变量。将它们设置在本地方法中的某个位置（即使是在可能的“读取”之后）足以让解释器将它们绑定到本地范围，从而忽略任何全局声明并导致您看到的错误。

例如：

```
a = 3

def b():
    print a
    a = 1 
```

将失败，即使在执行语句`a`时已全局定义。`print`在函数体的开头添加`global a`将使其工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T11:04:31.897

这里有许多概念问题。为了实际教一些东西，我已经完全检查了代码：

*   `print`无条件后的A`return`无法达到；我猜你有这些用于调试，但保留它们是没有意义的。（我假设`print li`from`dir`也不是真的需要。）

*   您的函数名称应该更好地表明该函数的实际作用。`open_file`是一个无用的名称，因为该函数实际上对文件的内容做了一些事情。

*   同样，变量名应该表明变量内容的含义。如果你不能想出一个好名字，这表明该变量是不必要的。另一个迹象是您存储了一次值，然后使用它一次；在这里涉及变量的唯一原因是分解表达式并给某些东西命名，但是在这里你有简单的表达式并且没有好名字。所以只写一个表达式。

*   您可能希望将目录列表写为行列表，因此请使用换行符而不是逗号将它们连接起来。

*   有比读取整个文件并拆分结果字符串更简单的方法来获取文件中的行列表。它们通常也会更有效率。实际上，您不需要先构造列表，然后再从列表中构建集合；您可以直接创建集合。

*   `open_file`并`open_another`执行相同的任务，因此是多余的。只需传入一个文件名并使用它。

*   尝试将功能的职责分成逻辑块。特别是，不要在进行计算的地方处理 I/O。

*   在现代 Python 中，我们使用`with`块来处理完成后自动关闭文件。

*   `os.listdir`已经创建了一个列表，因此没有理由循环将列表项附加到另一个列表。例如，您可以使用`+`;一次附加整个内容。但是您明显的意图是附加到一个空列表，因此您可以直接分配。事实上，不需要全局变量或赋值，所以我们`os.listdir`直接使用结果。

你的程序可以这么简单：

```
import os

def make_dirfile(directory):
    with open('temp.txt', 'w') as dirfile:
        dirfile.write('\n'.join(os.listdir(directory)))

def unique_lines_of(filename):
    with open(filename) as input_file:
        return set(input_file)

make_dirfile(raw_input("Enter directory >  "))
print unique_lines_of('temp.txt') & unique_lines_of('t.txt') 
```

（并且假设创建目录文件实际上是一个要求......）

# android - 从侦听器获取值——View.OnClickListener 类型的方法未定义

> ID：10581215
> 
> 赞同：0
> 
> 时间：2012-05-14T10:05:59.743
> 
> 标签：android, onclicklistener

我在 Android 中尝试了这个示例[：方法 OnClickListener() 未定义 View 类型](https://stackoverflow.com/questions/5466744/android-the-method-onclicklistener-is-undefined-for-the-type-view) ，但在 .getC() 处出现错误：

```
error at The method getC() is undefined for the type View.OnClickListener 
```

希望有人能帮我弄清楚。还是有另一种可能在侦听器中生成值？

```
 View.OnClickListener myListener = new View.OnClickListener() {
        double c;

        // in case you need to use C elsewhere
        public double getC() {
            return c;
        }

        @Override
        public void onClick(View v) {
            // get A and B values
            // then use either
            c = a - b;
            // or I guess use 
            c = c - b;
        }
    };

    myButton.setOnClickListener(myListener);

    int x= myListener.getC(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T10:12:36.243

您可以在匿名类中声明变量甚至公共方法，但是您无法引用它们，因为您的类无法被引用。

您应该将该匿名类更改为嵌套类，以便访问其中声明的成员和方法：

```
MyOnclickListener myListener = new MyOnclickListener();

private final class MyOnclickListener implements View.OnClickListener
{
    double c;

    // in case you need to use C elsewhere
    public double getC()
    {
        return c;
    }

    @Override
    public void onClick(View v)
    {
        // get A and B values
        // then use either
        c = a - b;
        // or I guess use
        c = c - b;
    }
} 
```

# git - Git checkout远程仓库的远程分支

> ID：10581217
> 
> 赞同：4
> 
> 时间：2012-05-14T10:06:03.643
> 
> 标签：git, refspec

当 git clone 某个存储库时，它会从中检索所有分支：

```
git clone https://github.com/android/platform_build.git build1
cd build1/ && git branch -a && cd .. 
```

然后，当我`build1`用作镜像并克隆它时，我看不到它的所有远程分支（我只看到`build1`本地主分支）

```
git clone build1 build2
cd build2 && git branch -a && cd .. 
```

如何远程结帐远程分支？

我知道我可以使用命令检查 build1 镜像中的所有远程分支

```
cd build1 && for remote in `git branch -r `; do git branch --track $remote; done 
```

[将所有远程 git 分支跟踪为本地分支](https://stackoverflow.com/questions/379081/track-all-remote-git-branches-as-local-branches) ，但如果我无权访问 build1 目录怎么办？

此外，还有`git ls-remote origin`显示所有远程参考的命令，但是有没有什么优雅的方法可以检查远程分支的远程？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T12:50:49.813

在您克隆`build1`到后`build2`，`build1`是，并且对`build2`是一无所知，这是“远程”分支所在的位置。一种解决方案可能是在. 添加一个远程调用：`origin``build2``https://github.com/android/platform_build.git``https://github.com/android/platform_build.git``build2``github`

```
git remote add github https://github.com/android/platform_build.git 
```

然后运行 ​​a`fetch`以获取远程分支：

```
git fetch github 
```

现在，当您运行时，`git branch -a`您应该会看到前缀为`remotes/github/`that 的分支与前缀为`remotes/origin`in 的分支相对应`build1`。

另一方面，`build2`应该为 中的每个本地分支都有一个远程分支`build1`，包括那些从`build1`的角度跟踪远程分支的分支。例如，如果`foo`在 github 上有一个名为的分支，它将显示`remotes/origin/foo`为`build1`. 如果您设置了一个本地分支来跟踪该远程分支，`build1`也称为`foo`，那么`build2`也应该有一个`remotes/origin/foo`。然后，当通过从 github 获取/合并更改进行`foo`更新时，这些更改应显示在/之后。`build1``foo``build2``fetch``pull`

# assembly - 为什么页面错误处理程序中的 iret 会生成中断 13（一般保护错误）和错误代码 0x18？

> ID：10581224
> 
> 赞同：8
> 
> 时间：2012-05-14T10:06:37.077
> 
> 标签：assembly, x86, kernel

我自己写了一个内核，在第一个页面错误中断处理程序之后，当IRET执行时，它会导致一个中断13（一般保护），错误代码是0x18。不知道怎么回事，压栈的内容来自cpu。

这是发生中断时的寄存器状态，以及存储寄存器的内存。**此外，IRET 从页面错误中断处理程序中返回。**

在 IRET 执行和中断发生之前，可以确定 %ESP 是相同的。

![在此处输入图像描述](../Images/3c0d77f6f15faa1394d3bc5b5078b0a6.png)

![在此处输入图像描述](../Images/583ff81467bc9696f8a505fb6196ff4f.png)

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-14T14:39:43.607

如果异常来自`IRET`自身，那么很可能`IRET`是无法恢复已保存的段寄存器之一，但值（8 或 0x18，顺便说一句？）在某种程度上是错误的。这可能是错误的，因为您从未在受保护模式下（重新）初始化寄存器，或者您的处理程序在执行之前将其设置为错误值`IRET`或 GDT 发生了什么事情......

**编辑**`ESP`：从图片中可以看出，页面错误处理程序在执行之前没有删除异常代码（地址 in 处的值 4 ） `IRET`。因此`IRET`将 4 解释为 的新值`EIP`，将 0x1000018解释为 的新值，将 0x23`CS`解释为 的新值`EFLAGS`，而这三个寄存器应该使用 0x1000018、0x23 和 0x3206。显然，无法加载数据段选择器（0x1000018 被解释为截断为 0x0018 之后）`CS`，这会导致#GP(0x18)。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2015-10-28T17:46:40.113

扩展 Alexey：

当某些中断发生（但不是其他）时，它们会自动将一个 4 字节的错误代码压入堆栈。页面错误就是其中之一。

此错误代码包含有关中断的额外信息。

[英特尔手册第 3 卷系统编程指南 - 325384-056US 2015 年 9 月](https://web.archive.org/web/20151025081259/http://www.intel.com/content/dam/www/public/us/en/documents/manuals/64-ia-32-architectures-software-developer-system-programming-manual-325384.pdf)表 6-1。“保护模式异常和中断”列的“错误代码”准确地告诉我们哪些中断会推送错误代码，哪些不会。

38.9.2.2 “页面错误错误代码”解释了错误的含义。

因此，您将需要：

```
pop %eax
/* Do something with %eax */
iret 
```

或者，如果您想忽略错误代码：

```
add $4, %esp
iret 
```

有关最小示例，请参阅[此页面处理程序](https://github.com/cirosantilli/x86-bare-metal-examples/blob/1f6af9021283dc01f2247efbb6aa9217363fbf07/page_fault.S#L47)并尝试注释掉`pop`.

将上述情况与不需要出栈的[除法错误异常进行比较。](https://github.com/cirosantilli/x86-bare-metal-examples/blob/1f6af9021283dc01f2247efbb6aa9217363fbf07/idt_zero_divide.S#L33)

请注意，如果您只是这样做`int $14`，则不会推送额外的字节：这只发生在实际异常中。

解决这个问题的一种巧妙方法是在堆栈上推送一个虚拟错误代码`0`，用于不这样做的中断以使事情统一。James Molloy 的教程[正是这样做的](https://github.com/cirosantilli/jamesmolloy-kernel-development-tutorials/blob/631106c09e02bae9b2da21999224bb2e2d5c4411/6_paging/interrupt.asm#L38)。

Linux 内核 4.2 似乎做了类似的事情。在[arch/x86/entry/entry64.S 下](https://github.com/torvalds/linux/blob/v4.2/arch/x86/entry/entry_64.S#L1078)，它模拟中断`has_error_code`：

```
trace_idtentry page_fault do_page_fault has_error_code=1 
```

然后在同一个文件上使用它：

```
.ifeq \has_error_code
pushq $-1 /* ORIG_RAX: no syscall to restart */
.endif 
```

什么时候推动`has_error_code=0`。

相关问题：[在从中断处理程序返回之前，我是否必须弹出某些异常推送到堆栈的错误代码？](https://stackoverflow.com/questions/491613/return-from-interrupts-in-x86)

# javascript - jQuerys“模糊”和“焦点”功能有什么替代品吗？

> ID：10581225
> 
> 赞同：0
> 
> 时间：2012-05-14T10:06:38.023
> 
> 标签：javascript, jquery, focus, onblur, onfocus

我的网站上有一个计数器，我希望在我的网站不集中时暂停。如果我使用模糊（有人离开焦点）并且有人单击在新选项卡中打开的链接然后关闭选项卡，焦点不会回到上一页？为什么它不起作用？有更好的方法吗？

```
$(document).blur(function(){
    pause=true;
});

$(document).focus(function(){
    //alert("test");
    pause=false;

    countdown(tmp,msg);
}); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-14T10:07:35.763

我认为它不依赖于`document`，而是`window`

```
$(window).focus(function(){...});
$(window).blur(function(){...}); 
```

我经常遇到的是原生 JS 版本[`window.onfocus`](https://developer.mozilla.org/en/DOM/window.onfocus)和[`window.onblur`](https://developer.mozilla.org/en/DOM/window.onblur). 我想这些也在 jQuery 中使用/抽象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-09-11T09:11:56.397

可以通过“点击”和外部点击使用以下代码进行管理

```
$(document).click(function() {
    //hide
});
$(document).keyup(function(e) {
    //manage tab event 
    if (e.target.id == "idName") {
        //show
    } else {
        //hide
    }
});

$(#idName).bind('click', function(e) {
    //show 
    e.stopPropagation();
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-07-04T11:29:27.457

本质上，除非有人单击或进入页面，否则您不会获得焦点，这就是焦点的工作原理。下面的工作代码： -

```
 $(function() {

    $(window).focus(function() {
        alert("in");
    });
     $(window).blur(function() {
        alert("out");
    });

}); 
```

您可以添加窗口鼠标输入/输出事件，但我不建议这样做，因为不支持触摸设备并且使用多个屏幕的人会遇到问题。

您的问题更多是软件问题，而不是 JS 问题。在这种情况下，您将受到浏览器的支配，尽管您返回到您想要的选项卡，但您仍处于模糊状态，直到您单击窗口本身。

# zebra-printers - 斑马 RW420 恢复出厂设置

> ID：10581231
> 
> 赞同：0
> 
> 时间：2012-05-14T10:06:58.387
> 
> 标签：zebra-printers

我需要知道如何对 RW420 Zebra 无线打印机执行硬重置（出厂默认设置）。

我阅读了所有指南，但似乎此功能未实现。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T17:56:04.640

根据 Zebra 网站，RW420 支持 ZPL。因此，您可以使用[ZPL 手册](http://www.zebra.com/id/zebra/na/en/documentlibrary/manuals/en/zpl_ii_programming2.html&ei=1NG7T83tD4KY8gTty73ACg&usg=AFQjCNHQub1MBc4D-wKXN3kXwbw4vSPC3A&sig2=ft0ttL5tr-oJmRKvJmH1dA)中的“配置更新”列表中的 ^JU 命令重新加载出厂设置。您可以通过将以下内容发送到打印机来重新加载出厂设置。

```
^XA
^JUF
^JUN
^JUS
^XZ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-06-15T15:07:15.470

我建议您使用 Zebra Setup Utilities。

*   首先，您需要连接到您的打印机。
*   在此之后，您可以转到打印机工具，在那里您将找到恢复出厂设置选项。

# java - 日期 JSON 序列化程序的 java.lang.reflect.InvocationTargetException 将列表转换为字符串

> ID：10581232
> 
> 赞同：1
> 
> 时间：2012-05-14T10:06:58.817
> 
> 标签：java, json, spring, getjson

当我尝试将我的列表 JSON 序列化程序转换为具有以下代码的字符串时

```
JSON jsonString = JSONSerializer.toJSON(myList); 
```

它给出以下异常

```
java.lang.reflect.InvocationTargetException  
java.lang.IllegalArgumentException  
java.sql.Date.getHours(Date.java:143) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T14:43:49.003

希望这可以帮助

[https://forums.oracle.com/forums/thread.jspa?threadID=83378](https://forums.oracle.com/forums/thread.jspa?threadID=83378)

解决方案是使用 java.sql.Time 而不是 java.sql.Date

# codeigniter - Codeigniter 使用连接表删除数据

> ID：10581239
> 
> 赞同：8
> 
> 时间：2012-05-14T10:07:20.133
> 
> 标签：codeigniter, join, activerecord, sql-delete

从逻辑上讲，在 SQL 中，我们可以使用 JOINS 从表中删除数据，例如

```
DELETE  clb_subscriber_group_mapping .* FROM clb_subscriber_group_mapping 
INNER JOIN clb_driver_group ON (clb_driver_group.id = clb_subscriber_group_mapping.driver_group_id)
INNER JOIN clb_company ON (clb_company.id = clb_driver_group.company_id)
WHERE clb_company.id = 256 AND clb_subscriber_group_mapping.subscriber_id = 1784; 
```

与上述查询等效的 CodeIgniter 是什么？

CodeIgniter 是否支持带连接的删除查询？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-14T10:14:43.090

你*必须*使用[Active Records](http://codeigniter.com/user_guide/database/active_record.html)吗？

下面的[查询](http://codeigniter.com/user_guide/database/queries.html)将执行其他操作。

```
$int_company_id = 256;
$int_subscriber_id = 1784;

$this->db->query("
DELETE  clb_subscriber_group_mapping .* FROM clb_subscriber_group_mapping 
INNER JOIN clb_driver_group ON (clb_driver_group.id = clb_subscriber_group_mapping.driver_group_id)
INNER JOIN clb_company ON (clb_company.id = clb_driver_group.company_id)
WHERE clb_company.id = ? AND clb_subscriber_group_mapping.subscriber_id = ?;

", array($int_company_id, $int_subscriber_id)); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-14T10:48:24.200

你不能用 CodeIgniter 的 Active Record 类来做到这一点。它不支持删除查询中的联接。您必须使用`$this->db->query()`Robin Castlin 提到的执行查询。

以下代码取自核心文件。它是生成`DELETE`查询的内部组件之一。

```
function _delete($table, $where = array(), $like = array(), $limit = FALSE)
{
    $conditions = '';

    if (count($where) > 0 OR count($like) > 0)
    {
        $conditions = "\nWHERE ";
        $conditions .= implode("\n", $this->ar_where);

        if (count($where) > 0 && count($like) > 0)
        {
            $conditions .= " AND ";
        }
        $conditions .= implode("\n", $like);
    }

    $limit = ( ! $limit) ? '' : ' LIMIT '.$limit;

    return "DELETE FROM ".$table.$conditions.$limit;
} 
```

如您所见，其中没有指定插入`JOIN`子句的任何内容。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-01-25T14:38:10.277

我有同样的问题，连接被忽略：

```
$r1 = $db->where("object2_type", $object_type)
->join($object_type, "$object_type.id = object1_id", "LEFT")
->where("$object_type.id IS NULL", null, false)
->delete("knots"); 
```

所以我这样做了：

```
$ids = $db->select("knots.id")
->where("object2_type", $object_type)
->join($object_type, "$object_type.id = object1_id", "LEFT")
->where("$object_type.id IS NULL", null, false)
->get("knots")->result_object();
/* my ow function which generates a string like '1','2','3' or 0 */    
$ids_csv = $this->mh()->get_flat_items_as_csv($ids);
$r = $db->where("knots.id IN ($ids_csv)", null, false)->delete("knots); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-03-17T09:36:40.450

您可以这样做，而不是重写整个 SQL：

```
// build query as usual...
$this->db
    ->from ('cookies')
    ->join ('recipes', 'recipes.cookie = cookies.id')
    ->where ('recipes.rating', 'BAD');

/* 
 * get the original DELETE SQL, in our case:
 * "DELETE FROM `cookies` JOIN `recipes` ON `recipes`.`cookie`=`cookies`.`id` WHERE `recipes`.`rating`='BAD'"
 */
$sql = $this->db->get_compiled_delete ('cookies');

/*
 * insert the target table in the SQL string, to get this:
 * "DELETE `cookies` FROM `cookies` JOIN `recipes` ON `recipes`.`cookie`=`cookies`.`id` WHERE `recipes`.`rating`='BAD'"
 */
$target = $this->db->escape_identifiers ('cookies'); // just to be safe
$sql = substr_replace ($sql, " $target", 6, 0); // note the prepended space

// now we can run the query
$q = $this->db->query ($sql); 
```

通过这种方式，您可以保留 Query Builder（也称为 Active Records）中的好东西，并拥有自定义的自由。我认为，这很安全，因为`$sql`字符串总是以`DELETE`. 当然，您可以将其包装到一个函数中作为快捷方式。

# css - 固定宽度页面布局

> ID：10581241
> 
> 赞同：0
> 
> 时间：2012-05-14T10:07:23.337
> 
> 标签：css

我的经理一直提到固定宽度的页面布局。我不知道他的意思，也不想问。他来到我的办公桌前，调整了我的浏览器宽度并咕哝了几句。我想问的是这个。

1.  什么是固定宽度的页面布局？
2.  什么是替代方案？
3.  为什么这有关系？

谢谢，

萨钦

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T10:11:58.650

固定宽度是指以绝对单位固定宽度样式的文档。

`px`是绝对单位的一个例子。

```
width: 100px; 
```

一种替代方法是使您的宽度相对，例如`%`.

```
width: 60%; 
```

这很重要的原因是因为不同的人会有不同的屏幕尺寸或以不同的方式使用他们的浏览器。

使用固定宽度意味着用户在较小的屏幕上或使用最小化的浏览器时，必须水平滚动，而不是根据浏览器窗口的大小调整页面宽度。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-14T10:13:16.943

我认为这是关于[流体设计](http://css-discuss.incutio.com/wiki/Fluid_Design)。这基本上意味着页面上的宽度是使用`%`而不是定义的`px`。当您以这种方式设置它时，视口变小时页面会缩放。尽管您必须注意，使用带有此功能的表可能会出现问题。

进一步实现这一点的另一种方法是使用[媒体查询](http://www.w3.org/TR/css3-mediaqueries/)。

最后一件事。你为什么不问问你的老板他是什么意思？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-14T10:24:13.427

我认为当您放大您设计的画布时，您正在使用表格进行设计开箱即用您应该使用 DIV 基础设计，这将代表您的屏幕进行调整。

# android - 如何在所有活动上放置注销按钮？

> ID：10581250
> 
> 赞同：1
> 
> 时间：2012-05-14T10:07:39.650
> 
> 标签：android, android-layout, android-ui

我正在构建一个应用程序，其中用户使用用户名和密码登录，除了 LoginActivity 之外的活动必须有一个注销选项。我已经在这里访问了几个关于它的线程，对如何以编程方式执行此操作有一些想法，但是我想不出**“在哪里放置这个注销按钮？”。**

我希望有一个导航或操作栏，如流行的活动，即适用于 Android 的 Facebook、适用于 Android 的 Twitter 或 Google Play 商店。因为将来在此操作/导航栏上添加附加功能会更容易。我应该如何进行？任何博客、教程或链接都会有很大帮助...

我的目标是 Android 2.1+ 设备。这是我已经阅读过的一些线程... [在所有活动中使用相同的注销功能](https://stackoverflow.com/questions/6123850/how-to-use-same-logout-function-to-all-the-activity-in-the-application)

[执行注销](https://stackoverflow.com/questions/5740727/how-to-perform-logout-in-my-application-in-android)

[如何注销](https://stackoverflow.com/questions/6826757/android-how-to-logout-from-the-application)等等... 结果对注销的后端逻辑（使用 Intent 和 Intent 过滤器等）有了一些想法，但无法弄清楚 UI 设计。

**编辑** 在某些答案中建议使用 ActionBar，但是据我所知，它仅在 3.0+ 之后可用，我如何为 2.1+ 提供此类功能，请帮助...任何教程、博客或指南都会有很大帮助..我不希望代码只是一些指针开始......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-14T10:10:18.493

一种解决方案是，在布局文件的包含标签中包含注销按钮以及与之关联的任何布局。像

```
<include> </include> 
```

有了这个，您至少不必多次创建它。

要调用它，在按钮的单击侦听器中，使用带有上下文的方法作为全局类中的参数。因此，您可以从所有活动中调用它，而无需再次重写代码。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-14T10:13:11.487

正如您在链接的帖子中已经说过的那样，`<incude></include>`在您的 layoutFiles 中使用 a 来包含一个小注销按钮或某事将是一个好主意。
此外，您可以尝试构建一个 BaseActivity，它`extends Activity`以及您的所有其他活动都是从 baseactivity 扩展的。（什么句子）。

为确保您不会泄漏任何上下文，您可以使用 applicationContext（通过`getApplicationContext()`任何 Activity 获取）

# java - JAVA 中的 RESTFul WebService 沿 servlet

> ID：10581252
> 
> 赞同：-1
> 
> 时间：2012-05-14T10:07:49.650
> 
> 标签：java, web-services, jsp, rest, servlets

我需要使用预先存在的 java servlet 开发一个 RESTFul Web 服务。这主要涉及调用 servlets 包中预先存在的函数。如何才能做到这一点 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T18:16:02.583

最快的方法是简单地添加一个 Web 服务层，作为 servlet 层的外观。为此，您可以使用第三方 JSR311 框架（例如 Jersey 框架（http://jersey.java.net））在 Java 中构建一组 RESTful Web 服务，然后只需让您的 Web 服务方法调用底层 servlet方法。

如果您有更多时间，最好的方法是将业务逻辑从您的 servlet 抽象到一个单独的业务逻辑层，甚至可能是一个单独的库，然后使用该库为新的业务逻辑提供您使用 JSR311 实现（如 Restlet 或 Jersey）创建的一组 Web 服务。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T05:44:31.897

servlet 不能用作 Restful 服务的后端。你可能需要 restful 后端，这可以使用 Jersey 或 restlet 来实现。参考这个问题 [Backbone.js with servlet as backend](https://stackoverflow.com/questions/8830681/backbone-js-with-servlet-as-backend)

# sql - 用于检索具有不同 where 子句的数据的单个 SQL 查询可能吗？

> ID：10581260
> 
> 赞同：1
> 
> 时间：2012-05-14T10:08:07.460
> 
> 标签：sql, db2

我必须生成一个 sql 查询，它从两个表中检索两列。
在 where 子句中，id 是`1,2,3,4 and 5`。
如何形成具有上述指定条件的单个查询。
我只需要 sql 查询而不需要游标或函数概念。
例如;

```
select column 1, column2 from table1, table2 where id=1  
select column 1, column2 from table1, table2 where id=2  
select column 1, column2 from table1, table2 where id=3  
select column 1, column2 from table1, table2 where id=4 
```

如何将这些多个查询变成一个查询？？？
提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-14T10:10:08.833

使用 wher in 子句将轻松解决您的问题...

### IN 运算符

IN 运算符允许您在 WHERE 子句中指定多个值。

```
select column 1, column2 from table1, table2 where id in (1,2,3,4,5) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-14T10:10:54.697

如果查询在每种情况下都相同，只需使用“in”

```
select column 1, column2 from table1, table2 where id in (1, 2, 3, 4, 5) 
```

您还可以在其他情况下使用 OR：

```
select column 1, column2 from table1, table2 where id = 1 OR name = 'XY' 
```

# mysql - 如何将搜索字符串coldfusion-loop转换为MySQL存储过程？

> ID：10581262
> 
> 赞同：0
> 
> 时间：2012-05-14T10:08:09.003
> 
> 标签：mysql, stored-procedures, loops, coldfusion

我继承了一个coldfusion8 站点，它使用了一些搜索功能。

我正在尝试将标准化的数据库查询存储到存储过程中。由于我是 Coldfusion 和 MySQL 的新手，我现在想知道我是否可以在 MySQL 中做到这一点：

```
<cfquery datasource="db" name="find_cats">
    SELECT wg.no, wg.type, wg.keywords, wg.lang
    FROM cats AS wg 
    <cfloop list="searchForm.cats_search_string" delimiters=", " item="tag">
      WHERE wg.keywords LIKE <cfqueryparam value='%#tag#%' cfsqltype='cf_sql_varchar'> AND
    </cfloop>
    wg.lang = <cfqueryparam value="#Session.lang#" cfsqltype="cf_sql_varchar">
</cfquery>
<cfset cond_cats = "AND (1=2">
    <cfoutput query="find_cats">
        <!--- check if found category belongs to either AAA or BBB classifcation --->
        <cfif wg.type is "AAA">
            <cfset cond_cats = cond_cats & " OR categoryID1 = #wg.no#">
        </cfif>
        <cfif wg.typ is "BBB">
            <cfset cond_cats = cond_cats & " OR categoryID2 = #wg.no#">
        </cfif>
    </cfoutput>
    <cfset cond_cats = cond_cats & ")"> 
```

搜索可以基于关键字或索引（AAA、BBB）。我仍在尝试了解发生了什么，但到目前为止，我认为如果用户输入如下字符串：

```
 string1, string2, string3 string4 
```

第一部分循环遍历四个字符串（分隔符逗号和空格）并查询数据库以查找匹配的关键字。然后它创建一个新的**cond_cats**变量，在实际搜索发生时使用该变量。我猜它用匹配的类别替换了搜索字符串，但我不确定这里，因为结果将是

```
AND (1=2 OR category1 = 12345 OR category2 = 88888 ) 
```

附加到实际的搜索查询中。

**我的问题：**
MySQL 中有没有办法拆分用户输入的搜索字符串，所以我可以运行循环？第二部分应该是存储过程的输出参数，不是吗？如果这在每次搜索之前运行，它应该是一个存储过程还是应该继续使用数据库查询？

感谢您的意见！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T04:19:32.393

根据您的描述，我没有看到将它包装在存储过程/函数中的好处。数据库并未真正针对字符串操作进行优化。虽然循环是可能的，但等效的 sql 代码通常远没有那么优雅。另外，它可能需要使用动态 sql（或临时表来安全地执行此操作）。

`cfloop`但是，查看您的代码，我相信您可以通过使用单个[`IN (....)`](http://www.w3schools.com/sql/sql_in.asp)子句而不是构造一系列`OR`条件来完全消除第二个。（两者是等价的。）

只需修改第一个查询以*仅*检索所需类型的类别，即“AAA”和“BBB”。

```
<cfquery datasource="db" name="find_cats">
    SELECT  wg.no
    FROM    cats AS wg 
    WHERE   wg.lang = <cfqueryparam value="#Session.lang#" cfsqltype="cf_sql_varchar">
    AND     wg.type IN ('AAA', 'BBB')
    AND  ( 1 = 2
         <cfloop list="#searchForm.cats_search_string#" delimiters=", " item="tag">
              OR wg.keywords LIKE <cfqueryparam value='%#tag#%' cfsqltype="cf_sql_varchar"> 
          </cfloop>
       )
</cfquery> 
```

然后使用[ValueList](http://help.adobe.com/en_US/ColdFusion/9.0/CFMLRef/WSc3ff6d0ea77859461172e0811cbec22c24-6d19.html)将结果提供给您的第二个查询。您甚至可以将两个查询合并为一个。但这一切都取决于您的搜索查询的复杂性。

```
WHERE categoryID1 IN 
( 
    <cfqueryparam value="#valueList(find_cats.no)#" list="true" ... > 
) 
```

* * *

**编辑：** 我认为你仍然可以使用 valueList。只需在第一个查询中添加一条`CASE`语句，将匹配的值分成两列：

```
SELECT  wg.no
        , CASE WHEN wg.type = 'AAA' THEN wg.no ELSE NULL END AS ID1Values
        , CASE WHEN wg.type = 'BBB' THEN wg.no ELSE NULL END AS ID2Values
... 
```

然后生成每列中的值列表：

```
 <cfset firstList  = valueList(find_cats.ID1Values)>
     <cfset secondList = valueList(find_cats.ID2Values)> 
```

最后在您的搜索查询中使用这些列表。

```
 WHERE 1 = 2

   <cfif listLen(firstList)>
         OR categoryID1 IN ( <cfqueryparam value="#firstList#" list="true" cfsqltype="cf_sql_integer"> )
   </cfif>

   <cfif listLen(secondList)>
         OR categoryID2 IN ( <cfqueryparam value="#secondList#" list="true" cfsqltype="cf_sql_integer"> )
   </cfif> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T11:57:39.627

我认为你应该在 mysql 中尝试“全文”索引。

# ruby-on-rails - 创建与多态关联

> ID：10581264
> 
> 赞同：0
> 
> 时间：2012-05-14T10:08:10.960
> 
> 标签：ruby-on-rails, polymorphic-associations

我有

```
class Question < ActiveRecord::Base
   has_many :tasks, :as => :task
end

class QuestionPlayer < Question
end

class QuestionGame < Question
end

class Tast < ActiveRecord::Base
  belongs_to :task, :polymorphic => true
end 
```

当我做

```
Task.create :task => QuestionPlayer.new
#<Task id: 81, ... task_id: 92, task_type: "Question"> 
```

为什么？如何使用 task_type = "QuestionPlayer" 获得任务？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T10:24:36.367

原因是您实际上并没有使用多态性，而是使用了 STI（单表继承）。您正在定义和设置两者，但仅*使用*STI。

外键的目的，即使是您定义的多态外键，也是为了引用数据库表中的另一条记录。活动记录必须存储主键和具有该记录的表名的类。这正是它正在做的事情。

也许您真正想做的是为每个 Question 对象使用具有不同类的 STI。在这种情况下，这样做，

```
class CreateQuestionsAndTasks < ActiveRecord::Migration
  def self.up
    create_table :questions do |table|
      table.string :type
    end
    create_table :tasks do |table|
      table.integer :question_id
    end
  end
end
class Question < ActiveRecord::Base
  has_many :tasks
end
class QuestionPlayer < Question
end
class QuestionGame < Question
end
class Task < ActiveRecord::Base
  belongs_to :question
end 
```

现在它会像你想象的那样工作。

# ios - 无需单击警报视图即可获得推送通知

> ID：10581269
> 
> 赞同：2
> 
> 时间：2012-05-14T10:08:20.843
> 
> 标签：ios, push-notification, apple-push-notifications

收到通知后，我没有点击警报视图。片刻之后，我点击应用程序图标启动应用程序，然后调用[`– applicationWillEnterForeground:`](http://developer.apple.com/library/ios/DOCUMENTATION/UIKit/Reference/UIApplicationDelegate_Protocol/Reference/Reference.html#//apple_ref/occ/intfm/UIApplicationDelegate/applicationWillEnterForeground%3a). 如果我现在想使用刚刚收到的通知，我在哪里可以得到它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-14T10:52:08.787

你不能。通知仅发送一次。如果您在 UIAlertView 打开时没有打开它，或者使用下拉通知中心打开它，您将无法以相同的方式打开它。

检查通知是否打开的一种方法是使用发送通知的服务器来执行此操作。当通知发送到设备时，将其保存在服务器端，“已打开”标志为 0。当应用程序启动时没有使用[`– application:didFinishLaunchingWithOptions:`](http://developer.apple.com/library/ios/DOCUMENTATION/UIKit/Reference/UIApplicationDelegate_Protocol/Reference/Reference.html#//apple_ref/occ/intfm/UIApplicationDelegate/application%3adidFinishLaunchingWithOptions%3a)AppDelegate 中的委托方法（将推送消息作为选项），它可以检查服务器如果有任何“未读”消息，则显示它们（如果有）。

这是我对您的问题的最佳建议。

# javascript - Crossroads.js - 路线选择

> ID：10581270
> 
> 赞同：1
> 
> 时间：2012-05-14T10:08:25.480
> 
> 标签：javascript, url-routing

有人可以帮我配置路由规则吗？我遇到了路由可选参数约束的问题。

应该为 /{region}/{category}/{title}/:page: url 模式调用名为“offerRegionCategoryTitle”的路由 - 这可以正常工作，

但是当我尝试调用 /{region}/{category}/:page: url (etc./pomorskie/programowanie/1) 时，会处理 'offerRegionCategoryTitle' 路由。

我认为问题出在路由规则配置中。有人可以帮我吗？

源代码：AppRouting：http: [//jsfiddle.net/kppfP/](http://jsfiddle.net/kppfP/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T14:24:58.217

问题是这两条路线基本上都匹配“相同”的字符串。您有 3 个动态段 (`{region}/{category}/:page:`或`{region}/{category}/{title}`)，并且没有足够的信息让路由器区分两者。如果`:page:`总是数字并且`{title}`不是，您可以添加更多规则以确保它不匹配错误的路线：

```
var catRoute = crossroads.addRoute('/{region}/{category}/:page:');
catRoute.rules = {
  page : /^\d+$/ // should be numeric
};

var titleRoute = crossroads.addRoute('/{region}/{category}/{title}/:page:');
titleRoute.rules = {
  title : function(val){
     return isNaN(val); // title can't be numeric (should contain at least one char)
  },
  page : /^\d+$/ // should be numeric
}; 
```

有关更多信息，请参阅[有关 Route.rules](http://millermedeiros.github.com/crossroads.js/#route-rules)和[示例页面](https://github.com/millermedeiros/crossroads.js/wiki/Examples)的文档。

# facebook - 如何从好友列表中选择好友？

> ID：10581272
> 
> 赞同：0
> 
> 时间：2012-05-14T10:08:29.727
> 
> 标签：facebook, facebook-graph-api

我创建了一个检索 facebook 用户好友列表的应用程序。此应用程序的代码如下：`$user = $facebook->getUser();

```
if ($user) {
    $user_profile = $facebook->api('/me');
    $friends = $facebook->api('/me/friends');

    echo '<ul>';
    foreach ($friends["data"] as $value) {
        echo '<li>';
        echo '<div class="pic">';
        echo '<img src="https://graph.facebook.com/' . $value["id"] . '/picture"/>';
        echo '</div>';
        echo '<div class="picName">'.$value["name"].'</div>'; 
        echo '</li>';
    }
    echo '</ul>';
}`<br> 
```

我必须使用这段代码。并且此代码工作正常并为所有用户提供朋友列表。但我想在所有朋友姓名上建立链接，并且我想从该列表中选择朋友。但我只给出我无法从中选择的文本。那我能做些什么呢？预先感谢。

# django - 从基于 django 的文档存储库中提供用户上传的文件

> ID：10581277
> 
> 赞同：1
> 
> 时间：2012-05-14T10:08:54.687
> 
> 标签：django, pdf

我正在构建一个基于 django 的数据库应用程序，允许用户上传支持文档。我们预计到项目结束时会有大约 100 万页的 pdf。存储库将分解为 3,000 - 5,000 个不同的文件夹（由客户指定）。我有一个记录这些文件的数据库表。该表包括文档的名称和存储文档的文件夹。

我正在寻找将这些文档备份给客户的最佳方式。我有一个基本的搜索工具，可以在 html 表中列出文档。我希望表格包含指向已上传文档的 html 链接。我只是不确定如何创建此链接。更具体地说，我不确定如何自己提供文件。我想使用 django 而不是直接通过 apache 为它们提供服务，因为我想使用 django 的权限系统。

我可以为此使用 staticfiles 应用程序吗？我担心 staticfiles 看起来像是想将文件从一个地方复制到另一个地方（考虑到存储库的大小，这可能不切实际）。我也不确定静态文件将如何处理动态文件夹结构。在文件实际上传之前，我们不会知道文件夹结构。最后，django 文档特别指出静态文件应用程序不是为用户上传的文档设计的。

也许我只需要某种 django 视图，但我无法让以下工作 -

```
def document(request, path, name):
    path = os.path.join(settings.DOCUMENT_ROOT, path, name)
    pdf = open(path, 'r')
    response = HttpResponse(pdf, mimetype='application/pdf')
    response['Content-Disposition'] = 'attachment; filename=' + name
    return response 
```

当 adobe reader 尝试打开附件时，它会告诉我文件已损坏（或不受支持）。任何投入将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T14:17:34.677

好吧，我暂时只使用一个简单的 django 视图-

```
@login_required
@permission_required('reporting.can_view_documents', raise_exception=True)
def document(request, path, name):
    path = os.path.join(settings.DOCUMENT_ROOT, path, name)
    pdf = open(path, 'rb')
    response = HttpResponse(pdf.read(), mimetype='application/pdf')
    response['Content-Disposition'] = 'attachment; filename=' + name
    return response 
```

# android - 更新数据库 sqlite android 设备

> ID：10581278
> 
> 赞同：0
> 
> 时间：2012-05-14T10:08:55.563
> 
> 标签：android, sqlite

我无法升级我的 android 数据库：

```
public class database extends SQLiteOpenHelper {

// Database creation sql statement
private static final String DATABASE_NAME = "myDatabase";
private static final String DATABASE_CREATE_login = "CREATE TABLE login (userJoomla INTEGER, idUSER INTEGER PRIMARY KEY, name varchar(20), email varchar(50))";
private static final String DATABASE_CREATE_position = "CREATE TABLE position(latitude VARCHAR(20), longitude VARCHAR(20), address VARCHAR(100), lastUpdate DATETIME)";
private static final String DATABASE_CREATE_favorites = "CREATE TABLE favorites(_id INTEGER PRIMARY KEY AUTOINCREMENT, idSPB INTEGER UNIQUE NOT NULL)";
private static final int DATABASE_VERSION = 2;

public database(Context context) {
    super(context, DATABASE_NAME, null, DATABASE_VERSION);
}

@Override
public void onCreate(SQLiteDatabase db) {
    // Create the table
    db.execSQL(DATABASE_CREATE_login);      
    db.execSQL(DATABASE_CREATE_position);   
    db.execSQL(DATABASE_CREATE_favorites);  

}

// Method is called during an upgrade of the database, e.g. if you increase
// the database version
@Override
public void onUpgrade(SQLiteDatabase database, int oldVersion,int newVersion) {
    Log.w(database.class.getName(),"Upgrading database from version " + oldVersion + " to " + newVersion + ", which will destroy all old data");
    database.execSQL("DROP TABLE IF EXISTS " + DATABASE_NAME);
    onCreate(database);
} 
```

}

我发现的例外是：

```
 Can't upgrade read-only database from version 1 to 2: 
```

我在这里读到它应该解决；

```
 db = fav.getWritableDatabase(); 
```

但现在我有这个错误：

```
table login already exists. 
```

我该怎么办？

先感谢您

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T10:14:07.133

您正在删除数据库而不是表。

```
database.execSQL("DROP TABLE IF EXISTS " + DATABASE_NAME); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-14T10:15:09.987

你正在做`database.execSQL("DROP TABLE IF EXISTS " + DATABASE_NAME);`，即：

```
DROP TABLE IF EXISTS myDatabase 
```

改为将其更改为正确的表名。

```
DROP TABLE IF EXISTS login 
```

# jakarta-ee - 使用 Jcodemodel 生成代码

> ID：10581280
> 
> 赞同：3
> 
> 时间：2012-05-14T10:09:00.673
> 
> 标签：jakarta-ee, maven, maven-plugin, maven-3, maven-release-plugin

我正在尝试在我的 maven 项目中使用 jcodemodel 生成 java 代码。我的 Maven 项目有三个模块。我已经在我的一个模块中编写了一个示例 jcodemodel 用于测试目的。但是当我执行它时，会在行中抛出错误。但是我创建了目录并进行了检查。我在简单的 Maven 项目中检查了这个例子，它可以工作。但是当我在 Maven 模块中给出它时，它会抛出错误。它在哪里检查构建文件？

```
codeModel.build(new File("src/main/java/check")); 
```

> java.io.IOException: src\main\java\check: com.sun.codemodel.writer.FileCodeWriter.(FileCodeWriter.java:73) 中的目录不存在

```
public class Consumer {

    /**
     * @param args
     * @throws JClassAlreadyExistsException 
     * @throws IOException 
     * @throws JAXBException 
     */
    public static void main(String[] args) throws JClassAlreadyExistsException, IOException, JAXBException {
            writeCodeModel("com.cts");
    }

    public static JType getTypeDetailsForCodeModel(JCodeModel jCodeModel, String type) {
        if (type.equals("Unsigned32")) {
            return jCodeModel.LONG;
        } else if (type.equals("Unsigned64")) {
            return jCodeModel.LONG;
        } else if (type.equals("Integer32")) {
            return jCodeModel.INT;
        } else if (type.equals("Integer64")) {
            return jCodeModel.LONG;
        } else if (type.equals("Enumerated")) {
            return jCodeModel.INT;
        } else if (type.equals("Float32")) {
            return jCodeModel.FLOAT;
        } else if (type.equals("Float64")) {
            return jCodeModel.DOUBLE;
        } else {
            return null;
        }
    }

    // Function to generate CodeModel Class
    public static void writeCodeModel(String factroyPackage) throws JAXBException {
        try {

            JCodeModel codeModel = new JCodeModel();
            JDefinedClass foo = codeModel._class( "Foo" ); //Creates a new class

            JMethod method = foo.method( JMod.PUBLIC, Void.TYPE, "doFoo" ); //Adds a method to the class
            method.body()._return( JExpr.lit( 42 ) ); //the return statement

            codeModel.build(new File("src/main/java/check"));

        } catch (Exception ex) {

            ex.printStackTrace();
        }
    }

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-14T11:28:25.007

异常消息似乎很清楚：

> java.io.IOException: src\main\java\check: com.sun.codemodel.writer.FileCodeWriter.(FileCodeWriter.java:73) 中**的目录不存在**

要创建目标目录，您可以像这样修改代码，生成源的首选文件夹位于`target/generated-sources/`.

```
File target = new File("target/generated-sources/java");
if (!target.mkdirs()) {
    throw new IOException("could not create directory");
}
codeModel.build(target); 
```

# registry - MSI“目标机器上的注册表”与 2008 WPF

> ID：10581285
> 
> 赞同：1
> 
> 时间：2012-05-14T10:09:14.933
> 
> 标签：registry, windows-installer, visual-studio-2008-sp1

我开发了一个 wpf 应用程序。我创建了一个安装项目。我试图在设置中添加一个注册表项的安装它不起作用。我不明白，因为我确定我的密钥是正确的路径，因为我首先尝试手动创建它，然后在我的设置中导入它，效果很好。然后我在我的注册表项中手动删除它以进行测试，但是当我运行我的设置时，注册表项没有安装。

谢谢你的帮助，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T11:11:47.397

您是在 x64 机器上安装软件包吗？如果是这样，您可能想要“Wow6432Node”注册表配置单元，这是放置由 x86 安装程序包创建的注册表项的位置。

# salesforce - 创建我自己的 API

> ID：10581287
> 
> 赞同：2
> 
> 时间：2012-05-14T10:09:21.357
> 
> 标签：salesforce, apex-code, visualforce

我在我的 force.com 应用程序中使用 Apex 类，其中许多具有相同的结构，我想制作一个 API 以在之后重用它。

例如，这是两个类：

```
//first class

public class insererActAct{

public List<Activites_actuelles__c> accts {get; set;}

public insererActAct(ApexPages.StandardController controller){
    accts = new List<Activites_actuelles__c>();
    accts.add(new Activites_actuelles__c());
}

public void addrow(){
    accts.add(new Activites_actuelles__c());

}

public PageReference deleteRow(){
   if (accts.size()>1)
   {
      accts.remove(accts.size()-1);
   }
   return null;
}

public PageReference save()
{
    insert accts;
    Assure__c theParent = new Assure__c(id=accts[0].Activites_actuelles__c);
    PageReference acctPage = new ApexPages.StandardController(theParent).view();
    acctPage.setRedirect(true);
    return acctPage;
}
}

//second class

public class insererEnfants{

public List<Enfants__c> accts {get; set;}

public insererEnfants(ApexPages.StandardController controller){
    accts = new List<Enfants__c>();
    accts.add(new Enfants__c());
}

public void addrow(){
    accts.add(new Enfants__c());

}

public PageReference deleteRow(){
   if (accts.size()>1)
   {
      accts.remove(accts.size()-1);
   }
   return null;
}

public PageReference save()
{
    insert accts;
    Assure__c theParent = new Assure__c(id=accts[0].Parent__c);
    PageReference acctPage = new ApexPages.StandardController(theParent).view();
    acctPage.setRedirect(true);
    return acctPage;
}
} 
```

谁能告诉我这可能与否，如果是，请问我该怎么做？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-14T13:12:12.447

你的意思是你想编写适用于不同类型对象的代码，而不是在代码中说明对象的类型？

可以通过使用 sObject 类型声明 sObject 变量来做到这一点，例如，而不是

```
public List<Activites_actuelles__c> accts {get; set;} 
```

你会放

```
public List<sObject> sObjects{get; set;} 
```

并通过使用 get 和 put 引用字段，例如，而不是

```
Account theAccount = new Account();
theAccount.name = 'Fred'; 
```

你会放

```
sObject theSObject = new SObject();
theSObject.put('name', 'Fred'); 
```

我没有尝试在控制器扩展中使用这样的代码，但理论上因为你可以传入任何标准控制器，你应该没问题。

您需要考虑如何在 save 方法中创建父对象，因为您需要传入要创建的类型。这很复杂，但可以接受一个表示对象类型的字符串（例如“帐户”）并创建一个该类型的新对象：

```
Schema.getGlobalDescribe().get('Account').newSObject() 
```

将为您提供一个新帐户。因此，您可以将“帐户”替换为作为参数传入的任何类型。

有关更多信息，请查看文档中的 Dynamic Apex、Dynamic SOQL 和 Dynamic DML。

一个警告：将对象类型和字段名称作为字符串传递意味着编译器将不知道代码中提到了这些类型。因此，如果您尝试删除自定义对象或重命名字段，Salesforce 不会警告您该对象或字段正在使用中，而是允许您进行删除。

另一个警告：虽然这允许代码重用并且这是一个好处，但您可能会发现它不值得。除非绝对必须，否则我会避免编写动态顶点。它比普通的 apex 复杂得多，因此难以调试和维护，尤其是在必须由您以外的人维护时。

# objective-c - 如何从文件系统中删除图像/文件？

> ID：10581291
> 
> 赞同：1
> 
> 时间：2012-05-14T10:09:47.847
> 
> 标签：objective-c, ios

我从 ios 中的文件系统中保存和加载的想法来自： [如何保存这个图像数组？](https://stackoverflow.com/questions/10099233/how-can-i-save-this-array-of-images)

谁能告诉我如何从文件系统中删除或删除它？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-14T10:12:11.500

您可以使用 NSDefaultManager

```
NSString *docDir = [NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES) objectAtIndex:0];

NSString *pngFilePath = [docDir stringByAppendingPathComponent:imageName];

NSError *error;
[[NSFileManager defaultManager] removeItemAtPath:pngFilePath error:&error]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T10:12:52.860

试试这个：

```
 [[NSFileManager defaultManager] removeItemAtPath: imagePath error: nil]; 
```

# android - 找不到方法

> ID：10581296
> 
> 赞同：0
> 
> 时间：2012-05-14T10:10:01.190
> 
> 标签：android

我有以下代码会给出 rdf 结果......但我遇到的问题是找不到方法......

```
package corese;

import static org.junit.Assert.assertEquals;
import android.app.Activity;
import android.os.Bundle;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.EditText;
import android.widget.TextView;

 import com.corese.andro.R;

 import fr.inria.acacia.corese.api.IDatatype;
 import fr.inria.acacia.corese.exceptions.EngineException;
 import fr.inria.edelweiss.kgram.core.Mappings;
 import fr.inria.edelweiss.kgraph.core.Graph;
 import fr.inria.edelweiss.kgraph.query.QueryProcess;
 import fr.inria.edelweiss.kgtool.load.Load;
 import fr.inria.edelweiss.kgtool.print.RDFFormat;
 import fr.inria.edelweiss.kgtool.print.ResultFormat;

  public class andro extends Activity implements View.OnClickListener{
  /** Called when the activity is first created. */

Graph graph;
Load ld;
Mappings map;
QueryProcess exec;
ResultFormat f;
RDFFormat f3;

Button runbtn;
Button clearbtn;
Button test;
Button triple;
EditText et1;
TextView tv1;

@Override
    public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.query);

    clearbtn = (Button) findViewById(R.id.clear) ;
    runbtn = (Button) findViewById(R.id.run);
   test = (Button) findViewById(R.id.test);
    triple = (Button) findViewById(R.id.rdf);

   tv1 = (TextView) findViewById(R.id.output); 
   et1 = (EditText) findViewById(R.id.input);

   clearbtn.setOnClickListener(new OnClickListener(){
       public void onClick(View v){
           et1.setText("");
           tv1.setText("");

       }
    });
      test.setOnClickListener(new OnClickListener(){
     //runbtn.setOnClickListener(new OnClickListener(){
      public void onClick(View v){

   /*     String op = et1.getText().toString();   
      tv1.setText(op);  
   */
   // graph = Graph.create();    
     graph = Graph.create(true);

      ld = Load.create(graph);
      ld.load("/path/Roy/Home/DownLoad/foaf.rdf");
     // ld.load("dataset.rdf");
     /* 
      try {
        ld.loadWE("dataset.rdf");
    } catch (LoadException e1) {
        // TODO Auto-generated catch block
        e1.printStackTrace();
    }
     */ 
     // String query = null;
      Mappings map = null;

      String query1 = "select more * (kg:similarity() as ?sim) where {" +
            "?x rdf:type c:Engineer " +
            "?x c:hasCreated ?doc " +
            "?doc rdf:type c:WebPage" +
            "}" +
            "order by desc(?sim)";

     exec = QueryProcess.create(graph);
     query1 = et1.getText().toString();
      try {
         map = exec.query(query1);
        IDatatype dt = getValue(map, "?sim");
        double sim = dt.getDoubleValue();

        assertEquals("Result", sim, .84, 1e-2);
            } catch (EngineException e) {
            // TODO Auto-generated catch block
            assertEquals("Result", true, e);
            e.printStackTrace();
        }
         f = ResultFormat.create(map);
        // f3 = TripleFormat.create(map);
         String f2 = f.toString();
         tv1.setText(f2);   
        // System.out.println(f);           

         }  
      });

   }  

protected IDatatype getValue(Mappings map2, String string) {
    // TODO Auto-generated method stub
    return null;
}

@Override
public void onClick(View v) {
    // TODO Auto-generated method stub

}
  } 
```

错误

```
05-14 09:50:47.364: I/dalvikvm(798): Could not find method  org.junit.Assert.assertEquals, referenced from method corese.andro$2.onClick
05-14 09:50:47.364: W/dalvikvm(798): VFY: unable to resolve static method 10020: Lorg/junit/Assert;.assertEquals (Ljava/lang/String;DDD)V
05-14 09:50:47.364: D/dalvikvm(798): VFY: replacing opcode 0x77 at 0x0059
05-14 09:50:47.364: I/dalvikvm(798): Could not find method org.junit.Assert.assertEquals, referenced from method corese.andro$2.onClick
05-14 09:50:47.364: W/dalvikvm(798): VFY: unable to resolve static method 10022: Lorg/junit/Assert;.assertEquals (Ljava/lang/String;Ljava/lang/Object;Ljava/lang/Object;)V
05-14 09:50:47.364: D/dalvikvm(798): VFY: replacing opcode 0x71 at 0x007b
05-14 09:50:47.364: D/dalvikvm(798): VFY: dead code 0x005c-0073 in Lcorese/andro$2;.onClick (Landroid/view/View;)V
05-14 09:50:47.374: D/dalvikvm(798): VFY: dead code 0x007e-0081 in Lcorese/andro$2;.onClick (Landroid/view/View;)V
05-14 09:50:49.004: W/System.err(798): log4j:WARN No appenders could be found for logger (fr.inria.edelweiss.kgtool.load.Load).
05-14 09:50:49.004: W/System.err(798): log4j:WARN Please initialize the log4j system properly.
05-14 09:50:49.004: W/System.err(798): log4j:WARN See http://logging.apache.org/log4j/1.2/faq.html#noconfig for more info.
05-14 09:50:49.104: D/AndroidRuntime(798): Shutting down VM
05-14 09:50:49.104: W/dalvikvm(798): threadid=1: thread exiting with uncaught exception (group=0x40015560)
05-14 09:50:49.104: E/AndroidRuntime(798): FATAL EXCEPTION: main
05-14 09:50:49.104: E/AndroidRuntime(798): java.lang.NullPointerException
05-14 09:50:49.104: E/AndroidRuntime(798):  at corese.andro$2.onClick(andro.java:101)
05-14 09:50:49.104: E/AndroidRuntime(798):  at android.view.View.performClick(View.java:2485)
05-14 09:50:49.104: E/AndroidRuntime(798):  at android.view.View$PerformClick.run(View.java:9080)
05-14 09:50:49.104: E/AndroidRuntime(798):  at android.os.Handler.handleCallback(Handler.java:587)
05-14 09:50:49.104: E/AndroidRuntime(798):  at android.os.Handler.dispatchMessage(Handler.java:92)
05-14 09:50:49.104: E/AndroidRuntime(798):  at android.os.Looper.loop(Looper.java:130)
05-14 09:50:49.104: E/AndroidRuntime(798):  at android.app.ActivityThread.main(ActivityThread.java:3683)
05-14 09:50:49.104: E/AndroidRuntime(798):  at java.lang.reflect.Method.invokeNative(Native Method)
05-14 09:50:49.104: E/AndroidRuntime(798):  at java.lang.reflect.Method.invoke(Method.java:507)
05-14 09:50:49.104: E/AndroidRuntime(798):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
05-14 09:50:49.104: E/AndroidRuntime(798):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
05-14 09:50:49.104: E/AndroidRuntime(798):  at dalvik.system.NativeStart.main(Native Method) 
```

有人可以解决为什么错误出现“找不到方法 org.junit.Assert.assertEquals .....”吗？？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T10:21:00.627

看起来您的代码中有两个问题：

1.  android 找不到 JUnit 库。检查 JUnit 库是否位于名为的文件夹中`libs`，并且该库是否位于您的类路径中
2.  有些东西在第 101 行抛出 NullPointer 异常。我怀疑

    ```
    IDatatype dt = getValue(map, "?sim"); 
    ```

正在返回 null 所以下一行

```
 double sim = dt.getDoubleValue(); 
```

正在抛出错误。

# node.js - 使用 node 开发 Json 服务

> ID：10581303
> 
> 赞同：1
> 
> 时间：2012-05-14T10:10:23.113
> 
> 标签：node.js, mongodb

用 mongodb 支持的 node.js 开发一个 rest 服务有意义吗？有没有一个框架可以让这件事变得像快递一样简单？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T10:48:42.523

为什么不能用快递？它通过以下方式实现所有 CRUD 方法：

```
app.get(...);
app.post(...);
app.put(...);
app.del(...); 
```

在这些函数调用中，您可以处理您的 mongodb 查询并将 JSON 对象发送回客户端（如果合适）。

我希望我能帮上忙！:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-14T12:39:32.993

就像 graydsl 所说的 express 已经支持[这些动词](http://expressjs.com/guide.html#http-methods)。要解析 JSON，您只需使用[JSON.parse](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/JSON/parse)并字符串化您将使用[JSON.stringify](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/JSON/stringify)。我会使用[Mongoose](https://github.com/LearnBoost/mongoose)与 mongodb 交谈。另外，为了帮助您编写干净的代码，我会使用[mocha](https://github.com/visionmedia/mocha)练习 TDD/BDD 。最后我认为你应该看看[underscore](http://documentcloud.github.com/underscore/)、[async](https://github.com/caolan/async)和[superagent](https://github.com/visionmedia/superagent)。

# windows - 在 MiniCPAN 镜像上运行 CPAN::Tarzip 的问题

> ID：10581304
> 
> 赞同：0
> 
> 时间：2012-05-14T10:10:25.443
> 
> 标签：windows, linux, perl, cpan, minicpan

我在 Linux 机器中使用 minicpan 创建了一个本地存储库，然后将其移至无法访问在线 CPAN 的 Windows。但是当我尝试使用它时收到此错误消息：

```
cpan> install PowerBuilder::ORCA
Reading 'C:\Perl\minicpan\authors\01mailrc.txt.gz'
Use of uninitialized value $command in concatenation (.) or string at C:\Perl\site\lib/CPAN/Tarzip.pm line 161.
"-qdt" no se reconoce como un comando interno o externo, programa o archivo por lotes ejecutable.
............................................................................DONE
Reading 'C:\Perl\minicpan\modules\02packages.details.txt.gz'
Use of uninitialized value $command in concatenation (.) or string at C:\Perl\site\lib/CPAN/Tarzip.pm line 161.
"-qdt" no se reconoce como un comando interno o externo, programa o archivo por lotes ejecutable.
Warning: Your C:\Perl\minicpan\modules\02packages.details.txt.gz does not contain a Line-Count header.
Please check the validity of the index file by comparing it to more than one CPAN mirror. I'll continue but problems seem likely to
happen.
Caught SIGINT, trying to continue
Warning: Your C:\Perl\minicpan\modules\02packages.details.txt.gz does not contain a Last-Updated header.
Please check the validity of the index file by comparing it to more than one CPAN mirror. I'll continue but problems seem likely to
happen.
Got another SIGINT
Reading 'C:\Perl\minicpan\authors\01mailrc.txt.gz'
Use of uninitialized value $command in concatenation (.) or string at C:\Perl\site\lib/CPAN/Tarzip.pm line 161.
"-qdt" no se reconoce como un comando interno o externo, programa o archivo por lotes ejecutable. 
```

我怀疑这可能是因为回车不同，但如果有人对为什么会这样有另一个想法，那就太好了。另外，如果是因为回车，您是否知道如何在不再次在 Windows 机器上下载整个存储库的情况下解决此问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T12:20:34.733

删除 CPAN 配置并再次运行其首次配置。

它仍然引用例如 Linux 路径`tar`，并使用 ANSI 终端转义来获取颜色。

# ruby-on-rails - 如何将集合传递给包含块的 Rails 部分？

> ID：10581307
> 
> 赞同：0
> 
> 时间：2012-05-14T10:10:38.970
> 
> 标签：ruby-on-rails

如何将集合传递给包含块的 Rails 部分。（或者，如何绕过 Rails 魔法）。

我有一种感觉，我从错误的角度考虑这个问题。谁能指出我正确的方向？

假设我有一个包含两个重复块的索引，如下所示：

```
<div class="content">
  <table>
    <thead>
      <tr>
        <th>COL1</th>
        <th>COL2</th>
        <th>COL3</th>
      </tr>
    </thead>
    <tbody>
      <% @collectionA.each do |a| %>
        <tr>
          <td><%= a.col1 %></td> 
          <td><%= a.col2 %></td>
          <td><%= a.col3 %></td>
        </tr>
      <% end %>
        <tr><%= will_paginate @collectionA %></tr>
    </tbody>
  </table>

  <br />

  <table>
    <thead>
      <tr>
        <th>COL1</th>
        <th>COL2</th>
        <th>COL3</th>
      </tr>
    </thead>
    <tbody>
      <% @collectionB.each do |b| %>
        <tr>
          <td><%= b.col1 %></td> 
          <td><%= b.col2 %></td>
          <td><%= b.col3 %></td>
        </tr>
      <% end %>
        <tr><%= will_paginate @collectionA %></tr>
    </tbody>
  </table>
</div> 
```

我的第一轮干燥可能看起来像这样。

```
...
<tbody>
  <%= render :partial => 'collections', :collection => @collectionA %>
</tbody>
<%= will_paginate @collectionA %>

...

<tbody>
  <%= render :partial => 'collections', :collection => @collectionb %>
</tbody>
<%= will_paginate @collectionB %>
... 
```

但是如果我也需要移动`will_paginate`到部分中，这样我就可以对其进行 ajaxify 处理。

如果我只有一个街区，我会做

```
<tbody>
  <%= render :partial => 'collection' %>
</tbody> 
```

并且在部分

```
<% @collection.each do |col| %>
  STUFF
<% end %>
<%= will_paginate @collection %> 
```

但是如果我有两个块，我怎样才能将@collection-A 和@collection-B 传递给部分？

还是我看错了？感谢您的任何指示。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-14T10:19:59.473

尝试：

```
<%= render :partial => 'collection', :locals => {:collection => collectionA} %> 
```

在部分只是删除`@`：

```
<% collection.each do |col| %>
  STUFF
<% end %>
<%= will_paginate collection %> 
```

# python - 使用python的二进制文件中的EOF

> ID：10581309
> 
> 赞同：1
> 
> 时间：2012-05-14T10:10:46.410
> 
> 标签：python, binary, eof

我编写了一个代码来读取二进制文件，如下所示：

```
file=open('myfile.chn','rb')  
i=0  
for x in file:  
   i=i+1  
   print(x)  
file.close() 
```

结果如下（其中一部分）：`b'\x00\x00\x80?\x00\x00\x00\x005.xx\x00S\xd4\n'`

如何检测此二进制文件的 EOF？假设我想在找到 EOF 后打印（）。我试过这个，但什么也没发生。

```
if (x=='\n'):
print() 
```

（更新）

@aix：假设文件有几行结果，就像示例一样，每行末尾都有'\ n'，我想在每行之间放置一个空格。

```
b'\x00\x00\x80?\x00\x00\x00\x005.xx\x00S\xd4\n'

b'\x82\x93p\x05\xf6\x8c4S\x00\x00\xaf\x07j\n' 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-14T10:13:08.727

一旦到达 EOF，`for x in file:`循环将终止。

```
with open('myfile.chn', 'rb') as f:
   i = 0
   for x in f:
      i += 1
      print(x)  
print('reached the EOF') 
```

我已经重命名了`file`变量，这样它就不会影响[内置的](http://docs.python.org/library/functions.html#file).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-08-11T10:23:20.533

NPE 的回答是正确的，但我觉得有必要进行一些额外的澄清。

您尝试使用类似的方法检测 EOF

```
if (x=='\n'):
    ... 
```

所以可能你和我直到今天一样困惑。

EOF 不是字符或字节。它不是存在于文件末尾的值，也不是可能存在于某些（甚至是二进制）文件中间的东西。在 C 世界中 EOF 有一些价值，但即使在那里，它的价值也不同于任何 char 的价值（甚至它的类型也不是 'char'）。但在 python 世界中，EOF 意味着“到达文件结尾”。“读取”函数的 Python 帮助说“......读取并返回所有数据，直到 EOF”，这并不意味着“直到找到 EOF 字节”。这意味着“直到文件结束”。

关于什么是“EOF”和什么不是“EOF”的更深入解释如下：http: //faq.cprogramming.com/cgi-bin/smartfaq.cgi?answer=1048865140&id= [1043284351](http://faq.cprogramming.com/cgi-bin/smartfaq.cgi?answer=1048865140&id=1043284351)

# string - GWT - 根据字符物理长度（不是字符数）拆分字符串

> ID：10581312
> 
> 赞同：1
> 
> 时间：2012-05-14T10:10:53.577
> 
> 标签：string, gwt

我有一个固定大小的 gwt 按钮。我想在上面显示一个文本，如果该文本超过按钮长度，我需要将它剪短并在最后加上“...”。我现在使用以下代码：

```
if(name.length() > 11){
    //limiting the size of the text presented on the button
    name = name.substring(0,10)+"...";
} 
```

我有一个此类按钮的列表，这种方法导致并非所有按钮的文本都具有相同的大小。

例如，问题是 10 个字符的“！” 比“A”的 10 个字符短得多。

谁能帮我解决这个问题？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-14T10:55:02.817

快速回答。尝试使用 HTML5/CSS3 属性。它正是这样做的：

[http://www.w3schools.com/cssref/css3_pr_text-overflow.asp](http://www.w3schools.com/cssref/css3_pr_text-overflow.asp)

如果您需要对非 CSS3 浏览器执行此操作，则需要制作某种假的。也许设置一个按钮 div 内容，溢出隐藏，并在右侧放置一个浮动“...”。但更难的是...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T10:46:20.427

您可以为所有这些按钮添加样式类并修复它们的大小。应该是这样的：

首先，为每个按钮添加样式类：

```
 Button button = new Button();
    button.addStyleName("buttonSizeStandard"); 
```

然后在css文件中添加一个匹配的样式：

```
 .buttonSizeStandard{ 
         width: 200px;      //change 200 to whatever 
    } 
```

# jquery - 这些 .find() 用法之间有什么区别？

> ID：10581315
> 
> 赞同：-2
> 
> 时间：2012-05-14T10:11:06.013
> 
> 标签：jquery, jquery-selectors, find

有什么区别

```
$data.find('select:selected'); 
```

和

```
$data.find('select').find(':selected'); 
```

?

假设`$data = $('#data')` ；

```
 <div id="data">
    <div>
    <select multiple>
    <option value="foo">foo</option>
    </select>
    </div>
    </div> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-14T10:12:36.243

```
$data.find('select').find(':selected'); 
```

基本上是一样的

```
$data.find('select :selected'); 
```

注意[后代选择器](http://api.jquery.com/descendant-selector)`select`（和之间的空格`:selected`）。这会找到`:selected`元素*内*的任何`select`元素。

另一方面，您的第一个选择器 find `select:selected`，它不起作用，因为[`:selected`仅适用于`option`元素](http://api.jquery.com/selected-selector)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T10:14:33.390

我猜第一个解析所有 DOM 一次并获取您的选择器。

第二个解析 dom 以获取您的选择器并解析检索到的 dom 对象以找到第二个选择器

结果相同，但它们之间的性能可能会发生变化？

# windows - Active Directory 如何在设置新密码时比较用户以前的密码？

> ID：10581316
> 
> 赞同：5
> 
> 时间：2012-05-14T10:11:06.747
> 
> 标签：windows, security, active-directory, passwords, password-protection

这是为了大学作业。在我们学院，他们使用 Microsoft 的 Active Directory 来运行他们的网络。

每个月我们都会被要求更改密码，当我们这样做时，它不会接受我们之前使用的五个密码或类似密码中的任何一个。例如，如果我的密码是“secretpassword1”，下个月我就不能使用“secretpassword2”了。

但是，我可以看到这样做的唯一方法是用于存储密码的散列算法是否存在缺陷；密码不是散列而是加密的；或更糟糕的是，它们以明文形式存储。

在快速的 Google-Fu 会话之后，Active Directory 似乎会将密码存储在常规 Windows 哈希中。那么有人可以解释一下吗？

干杯

PS这可能是我们的想象；也许您可以重复使用略有不同的密码？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T18:09:13.493

旧密码（以散列格式）存储在 AD 数据库中。作为密码更改过程的一部分，这将被检查和/或更新。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-10-13T06:51:51.780

如果您从新密码而不是旧密码生成变体，这很容易做到。

想象一个算法，它接受一个密码，并生成数百个简单的变体。因此，对于这样的输入，`password1`它会生成以下变体：

```
PASSWORD1
PasSSword1
password2
password
P@aaW0RD2
.... 
```

和其他几百人。（请注意，这些变体之一是`"password"`。）

密码破解者拥有类似的算法，并使用它们对单词字典进行猜测。

使用该算法，我们可以执行以下步骤：

1.  用户将他们的第一个密码设置为`"password"`。系统存储`hash("password")`，并在用户登录时使用此哈希进行比较。

2.  几周后，用户将密码更改为`"hunter2"`. 当前密码哈希更改为`hash("hunter2")`. `hash("password")`存储在 N 个历史密码哈希列表中。

3.  几周后，用户尝试将密码更改为`"password1"`. 在此更改尝试期间，将执行以下步骤。

3a) 新密码是明文可用的，因为用户刚刚输入了它。`"password1"`用作上述变体生成算法的输入。生成了数百个不同的密码（明文）。

`hash(variant)`3b) 对于每个变体密码，使用每个旧密码的盐值计算该密码的哈希值。如上所述， 的变体之一`"password1"`是`"password"`，因此在我们的变体哈希列表中，我们将拥有`hash("password")`。我们最终使用 V 变体哈希来测试每个旧密码，总共 V*N 哈希。

3c）针对当前散列和先前散列测试每个变体散列的正确加盐版本，以进行总共 V * N 二进制数组比较。

3d) 变体哈希`hash("password")`之一是 并且存储的 N 个历史哈希之一也是`hash("password")`。这些哈希完全匹配，因此密码被拒绝。

该技术需要生成 V*N 哈希，其中 V 约为 500，N 约为 10。这只需几秒钟（即使使用 PBKDF2、bcrypt 或 scrypt），并且无需访问磁盘即可轻松执行。

关于盐的注意事项：每当您更改用户密码时更改盐（您绝对应该这样做）确实会使事情变得更加困难，但您仍然只需要生成线性数量的哈希，无论您的盐有多大。

# jquery - 将多个值传递给：not() jQuery？

> ID：10581317
> 
> 赞同：4
> 
> 时间：2012-05-14T10:11:13.483
> 
> 标签：jquery

我想从 jQuery 中的事件中过滤多个值。

目前我有：

```
.filter(":not(.element)") 
```

我将如何添加更多内容进行过滤？我试过了：

```
.filter(":not(.element, .another, .etc)") 
```

和

```
.filter(":not(.element)").filter(":not(.another)").filter(":not(.etc)") 
```

和

```
.filter(":not(.element),:not(.another),:not(.etc)") 
```

没有运气。我需要做什么？

谢谢。

编辑：感谢您的回答 - 我找到了另一个解决我的问题的方法，避免了我在问题中提出的问题，但显然我没有在我的代码中正确地做一些事情，因为解决方案发布工作。我会将答案标记为正确，非常感谢。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-14T10:20:52.107

它正在工作，您只需要在`:not()`选择器中使用逗号 (,) 分隔每个元素。

您可以在此处查看示例：http: [//jsfiddle.net/LVUMs/](http://jsfiddle.net/LVUMs/)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-14T10:22:44.777

看起来它正在工作。[http://jsbin.com/uyayot/edit#javascript,html](http://jsbin.com/uyayot/edit#javascript,html)

我试过了：

```
$('div').not('#div2,#div4').each ( function () {
    alert ( $(this).attr ('id' ) );
  }); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-14T10:13:57.930

您可以通过链接使用[not() 。](http://api.jquery.com/not/)像这样

```
$('yourElement').not(':even').not('.SomeMore').not('.fewmore') 
```

# xml - plugin.xml 中的包名中的“%”和“$”是什么意思？

> ID：10581319
> 
> 赞同：0
> 
> 时间：2012-05-14T10:11:14.260
> 
> 标签：xml, eclipse, eclipse-plugin

这是一个标准 Eclipse 插件的 plugin.xml 文件

```
<!-- Extension points -->
<extension-point id="pluginContent" name="%expoint.pluginContent.name" schema="schema/pluginContent.exsd"/>
<extension-point id="newExtension" name="%expoint.newExtension.name" schema="schema/newExtension.exsd"/>
<extension-point id="templates" name="%expoint.templates.name" schema="schema/templates.exsd"/>
<extension-point id="samples" name="%expoint.samples.name" schema="schema/samples.exsd"/>
<extension-point id="targetProvisioners" name="%extension-point.name.0" schema="schema/targetProvisioners.exsd"/>
<extension-point id="launchShortcuts" name="%extension-point.name.1" schema="schema/launchShortcuts.exsd"/>

<!-- Extensions -->
<extension
     point="org.eclipse.ui.perspectives">
  <perspective
        name="%perspective.name"
        icon="$nl$/icons/eview16/plugins.gif"
        class="org.eclipse.pde.internal.ui.PDEPerspective"
        id="org.eclipse.pde.ui.PDEPerspective">
     <description>
        %perspective.description
     </description>
  </perspective>
</extension> 
```

请问，这些 % 和 $ 是什么意思？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T10:15:34.293

这是为了在 Eclipse UI 中实现字符串的国际化。[一篇关于 Eclipse](http://www.eclipse.org/articles/Article-Internationalization/how2I18n.html)的（相当老的）文章解释了它。

*   % 用于从插件清单之外的属性文件中获取这些字符串
*   $nl$ 用于自动选择依赖于语言环境的子目录（如果您有例如 html 文件，具体取决于语言）

# annotations - AspectJ - 检索带注释的参数列表

> ID：10581324
> 
> 赞同：2
> 
> 时间：2012-05-14T10:11:53.337
> 
> 标签：annotations, aspectj

从下面的上一个问题（[AspectJ - Presence of annotation in join point expression notrecognized](https://stackoverflow.com/questions/10554453/aspectj-presence-of-annotation-in-join-point-expression-not-recognized)），

我的目标：在一个方面，我希望能够从匹配函数中提取/检索所有带注释的参数，无论有多少。（然后应用一些处理，但这不是这个问题的范围）

所以目前，这就是我所做的（不工作）：

```
@Before("execution (* org.xx.xx.xx..*.*(@org.xx.xx.xx.xx.xx.Standardized (*),..))")
public void standardize(JoinPoint jp) throws Throwable {
    Object[] myArgs = jp.getArgs();
    getLogger().info("Here: arg length=" + myArgs.length);
    // Roll on join point arguments
    for (Object myParam : myArgs) {

        getLogger().info(
                    "In argument with " + myParam.getClass().getAnnotations().length
                                + " declaread annotations");
        getLogger().info("Class name is " + myParam.getClass().getName());
        // Get only the one matching the expected @Standardized annotation
        if (myParam.getClass().getAnnotation(Standardized.class) != null) {
            getLogger().info("Found parameter annotated with @Standardized");
            standardizeData(myParam.getClass().getAnnotation(Standardized.class), myParam);
        }
    }
} 
```

这是建议匹配的代码：

```
public boolean insertLog(@Standardized(type = StandardizedData.CLIPON) CliponStat theStat) {
    // ...
} 
```

以及由 junit 测试生成的跟踪：

```
INFO: ICI: arg lenght=1
INFO: In argument with 0 declaread annotations 
```

看起来它没有检测到注释

所以我的问题是：如何检测具有特定注释的参数？

有人知道怎么做吗？

在此先感谢您的帮助。

问候。

编辑：我发现这个线程[Pointcut matching methods with annotated parameters](https://stackoverflow.com/questions/3565718/pointcut-matching-methods-with-annotated-parameters/3567170#3567170)，讨论同一件事，并应用了给定的解决方案，但它不起作用..

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-05-15T07:02:29.067

我希望我理解你的正确。

`myParam.getClass().getAnnotations()`给你一个类的注释。就像是：

```
@Standardized(type = StandardizedData.CLIPON)
public class Main{...} 
```

也许这个切入点/建议可以帮助您：

```
@Before("execution (* org.xx.xx.xx..*.*(@org.xx.xx.xx.xx.xx.Standardized (*),..))")
public void standardize(JoinPoint jp) throws Throwable {
    Object[] args = jp.getArgs();
    MethodSignature ms = (MethodSignature) jp.getSignature();
    Method m = ms.getMethod();

    Annotation[][] parameterAnnotations = m.getParameterAnnotations();

    for (int i = 0; i < parameterAnnotations.length; i++) {
        Annotation[] annotations = parameterAnnotations[i];
        System.out.println("I am checking parameter: " + args[i]);
        for (Annotation annotation : annotations) {
            System.out.println(annotation);

            if (annotation.annotationType() == Standardized.class) {
                System.out.println("we have a Standardized Parameter with type = "
                        + ((Standardized) annotation).type());
            }
        }
    }
} 
```

这给了我以下输出：

```
I am checking parameter:  main.CliponStat@331f2ee1 
@annotation.Standardized(type=CLIPON)
we have a Standardized Parameter with type = CLIPON 
```

# python - pygame sprites 和 pygame.display.flip() 导致伪影

> ID：10581329
> 
> 赞同：2
> 
> 时间：2012-05-14T10:12:28.707
> 
> 标签：python, pygame, sprite

我正在为大学课程编写一个 python 俄罗斯方块克隆。只要我不试图改变落块的路线，它就像魅力一样。当我加速它们或向左或向右移动块时，我得到了工件，如下面的屏幕截图所示。

对于块的每次移动，代码都是相同的：

```
runningBlock.update()
runningBlock.draw(field)
screen.blit(field, (20, 20))
pygame.display.flip() 
```

而 update() 方法只是将移动对象的中心设置到一个新位置。screen 是屏幕截图上的灰色区域，field 是灰色屏幕顶部的白色游乐场。知道吗，我在这里缺少什么？

顺便说一句，帧速率设置为 30，应该不是问题，不是吗？

![截屏](../Images/f6ff36d29296cd85cade6d709a8be000.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T11:32:09.983

好，知道了。我只是在更新块之前重新填写了该字段：

```
field.fill((255, 255, 255))
runningBlock.update()
runningBlock.draw(field)
lyingBlocks.draw(field)
screen.blit(field, (20, 20))
pygame.display.flip() 
```

# android - 如何将 InputFilter 应用于 EditTextPreferences？

> ID：10581337
> 
> 赞同：1
> 
> 时间：2012-05-14T10:12:42.270
> 
> 标签：android, filter, preferences

我想将 InputFilter 应用于我的 EditTextPreferences...

在我使用 PreferenceActivity 之前，我有 EditTexts 和这样的过滤器：

```
 et1 = (EditText) findViewById(R.id.editText1);
            et2 = (EditText) findViewById(R.id.ETminsim);
            et3 = (EditText) findViewById(R.id.ETdelay);

            et1.setText(Integer.toString(PlotView.playlist_size), EditText.BufferType.EDITABLE);

            et2.setText(Integer.toString(conversorToInt(PlotView.min_sim)), EditText.BufferType.EDITABLE);
            et3.setText(Integer.toString(MusicService.getSeek()/1000), EditText.BufferType.EDITABLE);

            et1.setFilters(new InputFilter[]{ new InputFilterMinMax(1, 30)});
            et2.setFilters(new InputFilter[]{ new InputFilterMinMax(0, 100)});
            et3.setFilters(new InputFilter[]{ new InputFilterMinMax(0, 300)}); 
```

但是如何参考 EditTextPreference 的 EditTexts 来设置这些过滤器？

我的新代码：

```
public void onCreate(Bundle bundle) {
                 super.onCreate(bundle);

                 getPreferenceManager().setSharedPreferencesName(Singleton.PREFS_NAME);
                 addPreferencesFromResource(R.xml.prefs);

                 //TODO set InputFilter
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-11T00:26:31.987

[康斯坦丁](https://stackoverflow.com/a/10581576/910718)说得大部分是正确的。将他的答案与塞巴斯蒂安对他的答案的评论结合起来，你会得到

```
EditText editText1 = ((EditTextPreference) findPreference(preference_1_key))
                         .getEditText();
editText1.setFilters(new InputFilter[]{ new InputFilterMinMax(1, 30) }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T10:27:29.197

假设这是您的偏好活动，您可以通过 id 获取项目：

```
 EditTextPreference editTextPreference = findByViewId(R.id.editPref1);
        EditText editText = editTextPreference.getEditText();
        editText.setFilters(................); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-12-23T09:16:59.577

**这具有更大的灵活性。**

```
public class Utility {
public static void setEditTextInputFilter(EditText editText, final String blockCharacterSet) {
    InputFilter filter = new InputFilter() {

        @Override
        public CharSequence filter(CharSequence source, int start, int end, Spanned dest, int dstart, int dend) {

            if (source != null && blockCharacterSet.contains(("" + source))) {
                return "";
            }
            return null;
        }
    };

    editText.setFilters(new InputFilter[]{filter});
} 
```

}

**如何使用：**

exampleEditText 是要阻止输入“-”的editText。

```
Utility.setEditTextInputFilter(exampleEditText, "-"); 
```

# mysql - 如何防止 MySQL 数据文件的碎片化？

> ID：10581339
> 
> 赞同：3
> 
> 时间：2012-05-14T10:12:44.277
> 
> 标签：mysql, defragmentation

我认为这个问题被问了很多次，但是搜索它我只发现一些回复中的一些注释。
我知道文件通常由 OS+文件系统处理，但是有（或应该有）方法来改变它。其他大型数据库系统至少使用文件预分配并通过添加大块来增长。据我所知，MySQL 缺乏这种类型的功能（或者我的知识已经过时了？），它只能提供`OPTIMIZE TABLE`对文件内记录的*碎片整理*，但文件本身可能非常碎片化。

作为一个具体的问题，我有一个应该充当*堆栈*的表：很多`INSERT`s 和`DELETE`s，数据的生命周期很短（从几秒到几小时），*堆栈*的最大大小是已知的。表会经常被修改——每天数千次，而且还有其他*活动*表，所以这种情况会随着时间的推移导致磁盘布局非常碎片化。我目前的想法是预先分配整个*堆栈*表，然后使用*顶部索引*和`UPDATE`s。

无论如何，除了我的具体问题（如果有一个解决方案也很好），**有什么方法可以减少甚至消除 MySQL 数据文件的碎片整理（如果可能的话），MyISAM 和 InnoDB，最好是在 *nix 系统上?** *原始设备*至少是 InnoDB 的解决方案吗 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T07:57:32.463

如果您不需要堆栈以在服务器/mysql 重新启动后继续存在，并且它适合内存，请将表创建为 MEMORY 表。

--HHS

# security - 具有“完全控制权”的组不允许将用户添加到所有者组和客户组中

> ID：10581341
> 
> 赞同：0
> 
> 时间：2012-05-14T10:12:51.893
> 
> 标签：security, sharepoint-2010

我已更新“所有者组”权限级别，不允许所有者添加子站点。然后我添加了一个管理员组，该组具有开箱即用的“完全控制”。我的问题是“管理员组”和“所有者组”将能够管理成员组和“所有者组”。但是“所有者组”将无法管理“管理员组”中的用户。我只能看到一个组可以有一个“组所有者”。

这有办法解决，所以“管理员组”和“所有者组”可以管理相同的组？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T11:04:00.327

您可以创建一个自定义组并将该组用作“组所有者”

# php - 将 JSON 字符串转换为变量以回显

> ID：10581347
> 
> 赞同：1
> 
> 时间：2012-05-14T10:13:02.543
> 
> 标签：php, foreach, json

我有以下 JSON 字符串：

```
[{\"index\":0,\"date\":\" 20120030\",\"title\":\"afsa\"}] 
```

我需要将内容放入一个变量 foreach 中。

到目前为止，它是这样被捡起来的……

```
 $json_data_string = $_POST['hidden_event']; // sanitize however
 $array_data = json_decode($json_data_string);

 echo $json_data_string; 
```

我需要能够呼应每一个。例如：

```
 foreach {
   echo $date;
   echo $title;
 } 
```

提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T10:18:42.560

```
foreach($array_data as $data) {
  echo $data->date, PHP_EOL;
  echo $data->title, PHP_EOL;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-14T10:56:25.663

我想如果你想使用 jquery 来使用它，你会这样做： -

```
var recordList = [{\"index\":0,\"date\":\" 20120030\",\"title\":\"afsa\"}]

jQuery.each(recordList, function()
{
    alert(this.Name); // For example
    alert(this.date); // For example
}); 
```

或像这样：-

```
 $.ajax({
                          type: "POST",
                          url: URL,
                          cache:false,
                          data: values,
                          dataType:'json',
                          success: function(json)
           {
                                var date = json.date;
                                alert(date);
                                }       // end success function
                        }); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-14T10:21:38.957

您可以使用[`extract`](http://us.php.net/manual/en/function.extract.php)$array_data 上的函数来获取变量。

```
$array_data = json_decode($json_data_string); 
extract($array_data); 
echo $index; 
echo $date; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-14T10:18:33.940

```
$json_string = $_POST['hidden_event'];
$array = json_decode ( $json_data_string);

extract ($array);

echo $date;
echo $title; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-14T10:25:41.173

试试`var_dump`（[http://php.net/manual/en/function.var-dump.php](http://php.net/manual/en/function.var-dump.php)），这会让你知道`$array_data`它的结构。如果你这样做

```
echo '<pre>';
var_dump($array_data);
echo '</pre>'; 
```

你会得到更漂亮的转储。从那里很容易看出如何`echo`变量。

# c# - 将 wav 文件流式传输到 Ipad 和 Firefox

> ID：10581349
> 
> 赞同：0
> 
> 时间：2012-05-14T10:13:07.770
> 
> 标签：c#, ipad, html, audio, filestream

我正在尝试使用音频元素播放 wav 文件。当我直接引用文件时，这很有效，但是当我尝试通过 ac# FileStream 流式传输它时它停止工作。下面的代码非常适合 PC 上的 Chrome 和 Opera，但我正试图让它在 Ipad 和 Firefox 上工作。我正在使用 .net 框架 2.0 我必须使用 wav。

```
<audio id="audio" src="www.acme.com/streamer.aspx?music=test.wav" controls preload="auto"></audio> Not working
<audio id="audio" src="test.wav" controls preload="auto"></audio> Working 
```

下面的流函数：

```
string wavFileName = test.wav;
FileStream soundStream;
long FileSize;

soundStream = new FileStream(@"\\netshare\" + wavfileName, FileMode.Open, FileAccess.Read, FileShare.Read, 256);
FileSize = soundStream.Length;
byte[] Buffer = new byte[(int)FileSize];
int count = 0;
int offset = 0;
while ((count = soundStream.Read(Buffer, offset,
Buffer.Length)) > 0)
{
    Response.OutputStream.Write(Buffer, offset, count);
}
Response.Buffer = true;
Response.Clear();

Response.AddHeader("Content-Type", "audio/wave");
Response.AddHeader("Content-Disposition", "attachment;filename=" + wavfileName);
Response.ContentType = "audio/wave";
Response.BinaryWrite(Buffer);
if (soundStream != null)
{
    soundStream.Close();
}

Response.End(); 
```

（顺便说一句，这是我的第一篇文章，希望我没有违反任何规则）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T18:56:06.190

代码看起来不错。我认为您需要确保 wav 文件为写入 PCM 格式。某些浏览器在播放某些 PCM 时出现问题。我发现仅仅因为浏览（html5））支持wav文件并不意味着它实际上会播放所有wav类型。

您可能还想刷新响应。

# java - Windows 7 和 Java：获取磁盘标识符

> ID：10581351
> 
> 赞同：0
> 
> 时间：2012-05-14T10:13:09.787
> 
> 标签：java, windows, unique, disk, identifier

我有一个带有 4 个加密硬盘驱动器 (truecrypt) 的硬盘阵列。我最近从 5 年的 linux 切换回 Windows 7，我发现自己遇到了一个我找不到解决方案的问题。在 linux 下有一个名为“fdisk”的命令，它为您提供所有正在运行（未安装！）的硬盘驱动器以及一个不会更改的唯一磁盘标识符（例如：磁盘标识符：00x33f1a3c1）。我在 Windows 下需要相同的功能，最好用 java 编写代码。

干杯

编辑：//为了澄清，我需要磁盘ID而不安装磁盘！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T11:24:39.663

使用 VBS 的解决方案。

```
import java.io.File;
import java.io.FileWriter;
import java.io.BufferedReader;
import java.io.InputStreamReader;

public class DiskUtils {
  private DiskUtils() {  }

  public static String getSerialNumber(String drive) {
  String result = "";
    try {
      File file = File.createTempFile("realhowto",".vbs");
      file.deleteOnExit();
      FileWriter fw = new java.io.FileWriter(file);

      String vbs = "Set objFSO = CreateObject(\"Scripting.FileSystemObject\")\n"
                  +"Set colDrives = objFSO.Drives\n"
                  +"Set objDrive = colDrives.item(\"" + drive + "\")\n"
                  +"Wscript.Echo objDrive.SerialNumber";  
      fw.write(vbs);
      fw.close();
      Process p = Runtime.getRuntime().exec("cscript //NoLogo " + file.getPath());
      BufferedReader input =
        new BufferedReader
          (new InputStreamReader(p.getInputStream()));
      String line;
      while ((line = input.readLine()) != null) {
         result += line;
      }
      input.close();
    }
    catch(Exception e){
        e.printStackTrace();
    }
    return result.trim();
  }

  public static void main(String[] args){
    String sn = DiskUtils.getSerialNumber("C");
    javax.swing.JOptionPane.showConfirmDialog((java.awt.Component)
         null, sn, "Serial Number of C:",
         javax.swing.JOptionPane.DEFAULT_OPTION);
  }
} 
```

# javascript - Javascript：分隔未定义的数组定义值和未定义的数组值

> ID：10581353
> 
> 赞同：4
> 
> 时间：2012-05-14T10:13:13.640
> 
> 标签：javascript, undefined

我现在如何检查该值是否定义为未定义，或者它是否真的未定义？
例如。

```
var a = [];
a[0] = undefined;

// a defined value that's undefined
typeof a[0] === "undefined";

// and a value that hasn't been defined at all
typeof a[1] === "undefined"; 
```

有没有办法将这两者分开？可以使用 for-in 循环来遍历数组，但有没有更轻松的方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-14T10:20:22.827

您可以检查索引是否在给定数组中：

```
0 in a // => true
1 in a // => false 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-14T10:22:48.147

您可以使用`in`运算符检查给定索引是否存在于数组中，而不管其实际值如何

```
var t = [];
t[0] = undefined;
t[5] = "bar";

console.log( 0 in t ); // true
console.log( 5 in t ); // true
console.log( 1 in t ); // false
console.log( 6 in t ); // false

if( 0 in t && t[0] === undefined ) {
     // the value is defined as "undefined"
}

if( !(1 in t) ) {
    // the value is not defined at all
} 
```

# c# - 在我的存储库中使用 LINQ 的方法会出现空错误

> ID：10581356
> 
> 赞同：2
> 
> 时间：2012-05-14T10:13:16.897
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-3, linq, entity-framework

我的 LINQ 中有一个方法 基本上我的 LINQ 查询所做的是它从我的数据库中检索数据。

用户可以在两个日期之间进行选择并检索这两个日期之间的数据。但是，如果用户选择没有数据的日期范围，我会收到此错误：

> 转换为值类型“Double”失败，因为具体化值为 null。结果类型的泛型参数或查询必须使用可为空的类型

即使没有数据，用户也应该可以在两个日期之间进行搜索，它应该给出一条错误消息，指出这些日期之间没有数据，而不是我在 Visual Studio 中收到的这个错误。我首先使用 MVC 实体框架模型。

这是方法：

```
public List<CoreValueAndAverageGrade> GetAverageGradeForAllCoreValues(
    OfficeStatisticQueryViewModel model)
{
    var StartDate = DateTime.Parse(model.StartDate);
    var EndDate = DateTime.Parse(model.EndDate);

    return db.CoreValue
        .Where(v => v.CoreValueQuestion
            .Any(q => !q.SubjectType.Ignored_Statistic))
        .Select(coreValue => new CoreValueAndAverageGrade
        {
            CoreValue = coreValue,
            AverageGrade = coreValue.CoreValueQuestion
                .Where(q => !q.SubjectType.Ignored_Statistic)
                .Average(q => q.SelectedQuestions
                    .Where(s => 
                        s.GoalCardQuestionAnswer != null
                        && s.GoalCardQuestionAnswer.Grade.HasValue
                        && s.GoalCard.Completed_Date >= StartDate
                        && s.GoalCard.Completed_Date <= EndDate
                        )
                    .Average(s => s.GoalCardQuestionAnswer.Grade.Value))
        })
        .ToList();
} 
```

更新：等级是`Double`和可空的

非常感谢任何形式的帮助！

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T18:38:23.913

查看查询的最后一部分 - 如果在使用`where`子句过滤后没有返回任何行，那么`s.GoalCardQuestionAnswer.Grade.Value`肯定会抛出，因为您正在尝试访问为空的对象的属性。

我想如果你把代码改成这个，你会得到 0 作为最终值——那么你需要在你的代码中明确检查这个值。

```
.Average(s => s != null ? s.GoalCardQuestionAnswer.Grade.Value : 0) 
```

否则，分解查询将是一个好主意——它有助于代码的调试和可读性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T10:27:50.853

我会拆分查询并进一步调查。我的猜测是有一些不一致的数据。可能它发生在您将 a`double`与 a进行比较`double?`并且`double?`值为 null 的地方。也许检查你的记录是否有空值，实际上应该在那里。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-14T11:16:55.060

当您尝试将聚合运算符应用于没有记录的结果集时，通常会出现该错误。看看你在哪里使用 .Average ，我相信你有一个查询之前没有返回任何记录。

# java - 一段时间后重复调用webservice

> ID：10581361
> 
> 赞同：0
> 
> 时间：2012-05-14T10:13:35.327
> 
> 标签：java, android, timer

谁能告诉我如何在每个时间段内重复调用网络服务。（例如，我想每 5 分钟调用一次网络服务）。在我的应用程序中，我有一个微调器，允许用户选择在多少分钟后必须刷新网络服务。这是我使用倒数计时器编写的代码。

这里我写了逻辑，使得选择旋转器中的“donot刷新”时，应停止计时器。一旦我选择了除第一项以外的任何项目，然后如果我选择了第一项（即不刷新），则计时器不会停止。这里我在 onfinish() 方法中调用 ws 以重复调用。

```
 private String[] refreshtimes = { "do not refresh","1 minute Refresh",  "5minute           Refresh",
        "15 minute Refresh", "30 minute Refresh", "45 min Refresh",
        "60 minute Refresh" };

sp_refresh = (Spinner) findViewById(R.id.refresh);
ArrayAdapter<String> spdptr = new ArrayAdapter<String>(
            getApplicationContext(),    android.R.layout.simple_spinner_item,
            refreshtimes);
    sp_refresh.setAdapter(spdptr);

    sp_refresh.setOnItemSelectedListener(new OnItemSelectedListener() {

        @Override
        public void onItemSelected(AdapterView<?> parent, View v,
                int position, long id) {

            if(position!=0 )
            {
                int time=0;

            switch (position) {
            case 1:                 
                time=1;
                break;
            case 2:                 
                time=5;
                break;                  
            case 3:                 
                time=15;
                break;
            case 4:                 
                time=30;
                break;
            case 5:                 
                time=45;
                break;
            case 6:                 
                time=60;
                break;
            default:
                break;
            }
            counter = new MyCount(time*1000,1000);
            counter.start();
            }
            else if(position==0&&counter!=null)
            {   
                counter.cancel();
                counter=null;
                Toast.makeText(getApplicationContext(), "u r in    elsee",10000).show();
            }

        }
 public class MyCount extends CountDownTimer{

    public MyCount(long millisInFuture, long countDownInterval) {
    super(millisInFuture, countDownInterval);
    }

    @Override
    public void onFinish() {
   // tv.setText("done!");
        callservice();
        Toast.makeText(getApplicationContext(), "hi..",10000).show();
        //onCreate(savedInstanceState);

        this.start();
    }

    @Override
    public void onTick(long millisUntilFinished) {
   // tv.setText("”Left: " + millisUntilFinished/1000);
        Toast.makeText(getApplicationContext(), "Left: "       +                                 millisUntilFinished/1000,10000).show();
    }

    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T10:35:59.947

试试下面的代码

```
 package com.Test_dia;

import java.util.Timer;
import java.util.TimerTask;

import android.app.Activity;
import android.os.Bundle;
import android.view.View;
import android.widget.AdapterView;
import android.widget.AdapterView.OnItemSelectedListener;
import android.widget.ArrayAdapter;
import android.widget.Spinner;
import android.widget.Toast;

public class Test_diaActivity extends Activity {

    String[] refreshtimes = { "do not refresh", "1 minute Refresh",
            "5minute           Refresh", "15 minute Refresh",
            "30 minute Refresh", "45 min Refresh", "60 minute Refresh" };
    private Spinner Spi;
    private int time;

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        Spi = (Spinner) findViewById(R.id.spinner1);
        ArrayAdapter<String> spdptr = new ArrayAdapter<String>(
                getApplicationContext(), android.R.layout.simple_spinner_item,
                refreshtimes);
        Spi.setAdapter(spdptr);

        Spi.setOnItemSelectedListener(new OnItemSelectedListener() {

            @Override
            public void onItemSelected(AdapterView<?> arg0, View arg1,
                    int position, long arg3) {
                // TODO Auto-generated method stub
                if (position > 0) {

                    switch (position) {
                    case 1:
                        time = 1;
                        break;
                    case 2:
                        time = 5;
                        break;
                    case 3:
                        time = 15;
                        break;
                    case 4:
                        time = 30;
                        break;
                    case 5:
                        time = 45;
                        break;
                    case 6:
                        time = 60;
                        break;
                    default:
                        break;
                    }

                    call_timmer(time);

                }
            }

            @Override
            public void onNothingSelected(AdapterView<?> arg0) {
                // TODO Auto-generated method stub

            }
        });
    }

    private void call_timmer(int i) {
        // TODO Auto-generated method stub

        int t = i * 60000;

        Timer myt = new Timer();
        myt.schedule(new TimerTask() {

            @Override
            public void run() {
                // TODO Auto-generated method stub

                timerMethod();
            }
        }, 0, 60000);
    }

    private void timerMethod() {
        this.runOnUiThread(doSomething);
    }

    private Runnable doSomething = new Runnable() {
        public void run() {
            // Your code for doing something
            Toast.makeText(Test_diaActivity.this, "dhaval Sodha Parmar",
                    Toast.LENGTH_LONG).show();
        }
    };
} 
```

如果它是正确的，那就让它正确。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T10:24:13.740

您可以使用 java 类[TimerTask](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/TimerTask.html)来重复执行一个方法。

另请参阅：[Timer](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/Timer.html)，它使用 TimerTask 来安排任务。

# javascript - Jumi 插件似乎没有在 joomla 1.5 中加载 jQuery 和用 css 调用的图像

> ID：10581363
> 
> 赞同：1
> 
> 时间：2012-05-14T10:13:48.940
> 
> 标签：javascript, jquery, html, css, plugins

我有一个使用 html、css 和 js 设置样式的选择列表，它可以独立工作，但是一旦我将它加载到文章中，它就会显示默认的 html 选择列表。我尝试使用 Jumi 插件定位自定义的 select.html，它加载了大多数 css，但不知何故拒绝加载 css 中调用的图像。帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T10:25:58.517

首先，我上次使用 Joomla 时，它使用的是 Mootools。Mootools 和 jQuery 相处得并不融洽，因为它们争夺`$`命名空间并且大多数人`$`在 jQuery 代码中使用。

为防止这种情况，您应该

*   用于[`$.noConflict()`](http://api.jquery.com/jQuery.noConflict/)更改 jQuery 命名空间
*   在您的代码中使用`jQuery`而不是`$`
*   将您的代码封闭在一个闭包中：

    ```
    (function($){
        //use `$` safely in here
    }(jQuery)) 
    ```

# java - 同步，何时使用或不使用？

> ID：10581366
> 
> 赞同：16
> 
> 时间：2012-05-14T10:14:10.023
> 
> 标签：java, synchronized

我已经开始学习 Java 中的并发和线程。我知道同步的基础知识（即它的作用）。从概念上讲，我理解它提供了对具有 Java 中的多个线程的共享资源的互斥访问。但是当面对像下面这样的例子时，我很困惑让它同步是否是个好主意。我知道代码的关键部分应该同步，并且这个关键字不应该被过度使用，否则会影响性能。

```
public static synchronized List<AClass> sortA(AClass[] aArray) 
{
    List<AClass> aObj = getList(aArray);

    Collections.sort(aObj, new AComparator());

    return aObj;
}

public static synchronized List<AClass> getList(AClass[] anArray) 
{
    //It converts an array to a list and returns
} 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-05-14T10:17:57.460

假设每个线程传递**不同的数组**，则不需要同步，因为其余变量是本地的。

相反，如果您触发几个线程，所有线程都调用`sortA`并传递对同一数组的引用，那么如果没有，**您将遇到麻烦**`synchronized`，因为它们会相互干扰。

请注意，从示例中该`getList`方法似乎从数组返回一个新`List`的，这样即使线程传递相同的数组，您也会得到不同的`List`对象。这是误导。例如， using`Arrays.asList`创建一个`List`由给定数组支持的，但 javadoc 明确指出，`Changes to the returned list "write through" to the array.`所以要小心这一点。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-14T10:23:32.227

当您在多个调用之间共享数据时通常需要同步，并且可能会修改数据导致不一致。如果数据是只读的，那么您不需要同步。

在上面的代码片段中，没有共享数据。这些方法对提供的输入起作用并返回输出。如果多个线程调用您的方法之一，则每个调用都有自己的输入和输出。因此，任何地方都不存在不一致的可能性。因此，您在上述代码段中的方法不需要同步。

如果不必要地使用同步，由于所涉及的开销，肯定会降低性能，因此只有在需要时才应谨慎使用。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-14T10:17:15.680

您的静态方法不依赖于任何共享状态，因此不需要同步。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-14T10:17:57.560

没有定义诸如何时使用同步以及何时不使用的规则，当您确定并发线程不会访问您的代码时，您可以避免使用同步。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-05-14T10:19:48.320

您正确计算的同步会影响应用程序的吞吐量，并且还会导致线程不足。

所有 get 基本上都应该是非阻塞的，因为 concurrency 包下的 Collections 已经实现。

在您的示例中，所有调用线程都将传递自己的数组副本，`getList`不需要同步，`sortA`方法也是如此，因为所有其他变量都是本地的。

局部变量存在于堆栈中，每个线程都有自己的堆栈，因此其他线程无法干扰它。

当您更改其他线程应在一致状态下看到的对象的状态时，您需要同步，如果您的调用不更改您不需要同步的对象的状态。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-05-14T10:35:59.043

I wouldn't use `synchronized` on single threaded code. i.e. where there is no chance an object will be accessed by multiple threads.

This may appear obvious but ~99% of StringBuffer used in the JDK can only be used by one thread can be replaced with a StringBuilder (which is not synchronized)

# facebook - 如何将 Facebook 时间轴页面中的“其他人最近发布的帖子”帖子整合到我的网站？

> ID：10581371
> 
> 赞同：0
> 
> 时间：2012-05-14T10:14:40.313
> 
> 标签：facebook, plugins

我正在尝试从 Facebook 的时间轴页面获取“其他人最近的帖子”帖子（/提要）并集成到我的网站。
以前我尝试过 facebook 评论插件，然后我意识到这不是评论 :(。但我喜欢 facebook 评论插件，这很容易。
例如，[http://www.facebook.com/SPG](http://www.facebook.com/SPG)有“其他人最近的帖子”帖子, 我希望这些帖子添加到我的网站, 然后用户将有机会添加他们的帖子和评论。
我可以从那里看到帖子为 JSON: [https://graph.facebook.com/spg/posts](https://graph.facebook.com/spg/posts) (或 /spg /feed)
我真的不想处理 JSON 数据，也许 facebook 有一些插件或服务来显示这些帖子。你有什么建议吗？（最好，
谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T11:03:31.027

抱歉，但我认为没有这样的事情... Facebook 社交插件的完整列表记录[在这里](http://developers.facebook.com/docs/plugins/) 您可能必须使用 JSON...

# mysql - 我的 Sql 查询以更新它

> ID：10581373
> 
> 赞同：-5
> 
> 时间：2012-05-14T10:14:43.433
> 
> 标签：mysql

如何更新此查询

```
$sqlquery = UPDATE("conference", 
                    array('area_of_expertise' => $area_of_expertise_id1, 
                          'long_name' => $_POST['longname'], 
                          'short_name' => $_POST['shortname'], 
                          'description' => $_POST['textarea'], 
                          'creator_id' => $get_id
                          ) 
                   ); 
```

我在会议表中插入了所有需要的数据，同时确保它与用户选择的数据相同。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T10:23:39.223

您的 UPDATE 查询语法错误。您不是说要更新哪个表以及该表的哪一列。

你只是说更新。

语法应该是这样的：

UPDATE tableName SET column = value [ *WHERE someColumn = someValue* ]

参考： [http ://www.w3schools.com/php/php_mysql_update.asp](http://www.w3schools.com/php/php_mysql_update.asp)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T10:24:33.200

我假设您也在使用 PHP。'UPDATE' 是自定义函数吗？我以前从未遇到过。

```
$update = mysql_query("UPDATE conference SET area_of_expertise = '" . $area_of_expertise_id1 . "', long_name = '" . $_POST["longname"] . "', short_name = '" . $_POST["shortname"] . "', description = '" . $_POST["textarea"] . "' WHERE creator_id = " . $get_id); 
```

顺便说一下，我只是假设您的表名和列名。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-26T22:51:35.860

$query = "UPDATE 会议 SET area_of_expertise='$area_of_expertise_id1', long_name='$_POST['longname']', short_name='$_POST['shortname']', description='$_POST['textarea']' WHERE creator_id='$get_id'");

$update_value = mysql_query($query);

希望有帮助。

# ios - IOS 5.1 拖放

> ID：10581378
> 
> 赞同：1
> 
> 时间：2012-05-14T10:15:03.140
> 
> 标签：ios, drag-and-drop

我是IOS的菜鸟。搜索了很多，但没有找到任何关于IOS拖放的好教程。我刚读到不直接支持。是否可以将项目从滚动视图拖动到视图并传递一些信息？想象一下 MAIL 应用程序。我想将一封电子邮件拖到右侧的大视图中，并与它一起传递一些信息。有什么书或教程可以教我如何制作吗？

TKS！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-14T14:20:45.050

这只是使用手势识别器的问题（请参阅[事件处理程序指南](http://developer.apple.com/library/ios/#documentation/EventHandling/Conceptual/EventHandlingiPhoneOS/GestureRecognizers/GestureRecognizers.html)）。

实际的实现在一定程度上取决于你想怎么做。这是一个随机示例，其中我有一个拆分视图控件，我将左侧的 tableview 中的某些内容拖到右侧的视图中，整个拖放由长按触发（例如“点击并按住” ）。因此，我只是在 tableview 控制器的 viewDidLoad 中创建了一个手势识别器（在我的例子中，主视图控制器）：

```
UILongPressGestureRecognizer *longPress = [[UILongPressGestureRecognizer alloc] initWithTarget:self action:@selector(longPress:)];
[self.tableView addGestureRecognizer:longPress]; 
```

然后我定义了一个手势识别器处理程序来实现拖放，例如，

```
- (IBAction)longPress:(UIGestureRecognizer *)sender
{
    if (sender.state == UIGestureRecognizerStateBegan)
    {        
        // figure out which item in the table was selected

        NSIndexPath *indexPath = [self.tableView indexPathForRowAtPoint:[sender locationInView:self.tableView]];
        if (!indexPath)
        {
            inDrag = NO;
            return;
        }

        inDrag = YES;

        // get the text of the item to be dragged

        NSString *text = [NSString stringWithString:[[_objects objectAtIndex:indexPath.row] description]];

        // create item to be dragged, in this example, just a simple UILabel

        UIView *splitView = self.splitViewController.view;
        CGPoint point = [sender locationInView:splitView];
        UIFont *font = [UIFont systemFontOfSize:12];
        CGSize size = [text sizeWithFont:font];
        CGRect frame = CGRectMake(point.x - (size.width / 2.0), point.y - (size.height / 2.0), size.width, size.height);
        draggedView = [[UILabel alloc] initWithFrame:frame];
        [draggedView setFont:font];
        [draggedView setText:text];
        [draggedView setBackgroundColor:[UIColor clearColor]];

        // now add the item to the view

        [splitView addSubview:draggedView];
    }
    else if (sender.state == UIGestureRecognizerStateChanged && inDrag) 
    {
        // we dragged it, so let's update the coordinates of the dragged view

        UIView *splitView = self.splitViewController.view;
        CGPoint point = [sender locationInView:splitView];
        draggedView.center = point;
    }
    else if (sender.state == UIGestureRecognizerStateEnded && inDrag)
    {
        // we dropped, so remove it from the view

        [draggedView removeFromSuperview];

        // and let's figure out where we dropped it

        UIView *detailView = self.detailViewController.view;
        CGPoint point = [sender locationInView:detailView];

        UIAlertView *alert;
        if (CGRectContainsPoint(detailView.bounds, point))
            alert = [[UIAlertView alloc] initWithTitle:@"dropped in details view" message:nil delegate:nil cancelButtonTitle:@"Ok" otherButtonTitles:nil];
        else
            alert = [[UIAlertView alloc] initWithTitle:@"dropped outside details view" message:nil delegate:nil cancelButtonTitle:@"Ok" otherButtonTitles:nil];
        [alert show];
    }
} 
```

显然，如果您从滚动视图中拖动子视图，您将使用以下内容替换`indexPathForRowAtPoint`逻辑：

```
 UIView *objectToDrag = nil;
    CGPoint point = [sender locationInView:myView];
    for (UIView *control in myView.subviews)
        if (CGRectContainsPoint(control.frame, point))
            objectToDrag = control;

    if (!objectToDrag)
    {
        inDrag = NO;
        return;
    } 
```

这将帮助您确定要拖动的内容，但是从那里开始，逻辑非常相似（除了在我的示例中拖动 UILabel 之外，您将拖动 objectToDrag）。

# iphone - 以自定义时间间隔显示本地通知

> ID：10581388
> 
> 赞同：0
> 
> 时间：2012-05-14T10:15:48.793
> 
> 标签：iphone

我是 iphone 新手。我正在使用以下代码，这里本地通知不会在 10 秒内触发，并且重复间隔也不起作用，它不会每秒显示通知。在 1 分钟的触发呼叫和同样的方式重复间隔每分钟工作一次。如何将重复间隔设置为每 15 秒。如果有人知道这一点，请帮助我...

```
- (void)applicationDidEnterBackground:(UIApplication *)application {
    NSLog(@"1");

   NSTimeInterval interval = 10;
    NSDate *alertTime = [NSDate dateWithTimeIntervalSinceNow:interval];
    UIApplication* app = [UIApplication sharedApplication];
    UILocalNotification* notifyAlarm = [[UILocalNotification alloc] init];
    if (notifyAlarm){
        notifyAlarm.fireDate = alertTime;

        notifyAlarm.alertAction = @"Message";
        notifyAlarm.alertBody = @"Alert";
        notifyAlarm.hasAction = YES;
        notifyAlarm.timeZone = [NSTimeZone defaultTimeZone];

        notifyAlarm.repeatInterval = NSSecondCalendarUnit;
      //  timer = [[NSTimer alloc]initWithFireDate:alertTime interval:interval target:self selector:@selector(sendRequest) userInfo:nil repeats:YES];

        [app scheduleLocalNotification:notifyAlarm];

        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T10:24:42.733

您需要在 appDelegate 中实现这一点，以便在应用程序运行时通知工作。

```
- (void)application:(UIApplication *)application didReceiveLocalNotification:(UILocalNotification *)notification {
    //do something
} 
```

# python - RuntimeWarning: power 中遇到的无效值

> ID：10581390
> 
> 赞同：2
> 
> 时间：2012-05-14T10:15:52.953
> 
> 标签：python, numpy

这是我正在处理的代码的一部分。看最后一行。

```
def xyz2srgb(xyz):
    """Convert from XYZ colorspace to sRGB"""
    xyz = xyz.T
    srgb = N.zeros_like(xyz)
    srgb[0] = 3.241*xyz[0] - 1.5374*xyz[1] - 0.4986*xyz[2]
    srgb[1] = -0.9692*xyz[0] + 1.876*xyz[1] + 0.0416*xyz[2]
    srgb[2] = 0.0556*xyz[0] - 0.204*xyz[1] + 1.057*xyz[2]

    srgb /= float(srgb.max())

    a = 0.055
    srgb = N.where(srgb <= 0.0031308,
                12.92*srgb,
                (1+a)*srgb**(1/2.4)-a) 
```

它抛出一个错误：

```
 ./example.py:29: RuntimeWarning: invalid value encountered in power
  (1+a)*srgb**(1/2.4)-a) 
```

这是一些范围限制吗？我在 SO 上找到了一个类似的线程：[Numpy 错误：在电源中遇到无效值](https://stackoverflow.com/questions/9140744/numpy-error-invalid-value-encountered-in-power)

有什么线索吗？谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-14T11:29:25.037

您应该打印出`srgb`. 可能不是范围误差，是这里的负系数

```
srgb[0] = 3.241*xyz[0] - 1.5374*xyz[1] - 0.4986*xyz[2]
srgb[1] = -0.9692*xyz[0] + 1.876*xyz[1] + 0.0416*xyz[2]
srgb[2] = 0.0556*xyz[0] - 0.204*xyz[1] + 1.057*xyz[2] 
```

使元素的元素完全有可能`srgb`是负数，除非你已经在处理复数，否则当你掌权时你会发出警告：

```
>>> import numpy
>>> numpy.array([-2.0])
array([-2.])
>>> numpy.array([-2.0])**(1/2.4)
__main__:1: RuntimeWarning: invalid value encountered in power
array([ nan])
>>> numpy.array([-2.0+0j])**(1/2.4)
array([ 0.34548198+1.28935629j]) 
```

参数`where`将在传递之前进行评估，因此将在`srgb <= 0.0031308`条件分支划分值之前获取权力，并触发警告。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-11-18T13:04:37.700

对于这些错误，您可以使用指数中的浮点数。例如 ：

```
>>> test = np.linspace(0,10,1000);)

>>> expos = 2*np.power(test,**6.**)+2*np.power(test,**4.**) 
```

此致

# c++ - c++中的多平台内存使用

> ID：10581393
> 
> 赞同：1
> 
> 时间：2012-05-14T10:16:13.763
> 
> 标签：c++, windows, linux, macos, memory-management

> **可能重复：**
> [如何从进程内部确定 CPU 和内存消耗？](https://stackoverflow.com/questions/63166/how-to-determine-cpu-and-memory-consumption-from-inside-a-process)

在 C++ 中获取内存使用的最佳方式（多平台）是什么？也有可能获得 CPU 使用率？

# jquery - 扩展 jquery 1.2 以包含 index()

> ID：10581394
> 
> 赞同：0
> 
> 时间：2012-05-14T10:16:17.070
> 
> 标签：jquery, indexing, extend

我正在与一些第 3 方团队合作，无法升级到 jquery 1.4+，因此坚持使用 1.2。我想知道是否有办法扩展库以包含 index() 方法。我尝试编写一个快速函数，但没有运气。

```
function getIndex( $elm ) {
    var $this = $elm;
    var $parent = $elm.parent();
    var $index = 0;
    $parent.children().each(function(){
        if( $this.length == $(this).length && $this.length == $this.filter($(this)).length ) {
            return $index;
        }else{
            $index++;   
        }
    });
    return $index;
} 
```

非常感谢任何帮助。

问候

菲尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T10:21:01.110

啊，找到了方法，加进去了！

```
$.fn.index = function(elem){
    // No argument, return index in parent
    if ( !elem ) {
        return ( this[0] && this[0].parentNode ) ? this.prevAll().length : -1;
    }
    // index in selector
    if ( typeof elem === "string" ) {
        return jQuery.inArray( this[0], jQuery( elem ) );
    }
    // Locate the position of the desired element
    return jQuery.inArray(
        // If it receives a jQuery object, the first element is used
        elem.jquery ? elem[0] : elem, this );
} 
```

# ruby - pusher-client gem 使用 Presence-Channels 抛出 2 for 1 错误

> ID：10581398
> 
> 赞同：0
> 
> 时间：2012-05-14T10:16:43.987
> 
> 标签：ruby, pusher

pusher-client ruby​​gem 在订阅公共频道时工作正常，但是当我尝试订阅 Presence 或 Private Channel 时，它会抛出“ArgumentError：错误数量的参数（2 比 1）”。这会发生在其他人身上吗？

```
module PusherClientTest

  require 'pusher-client'

  PusherClient.logger = Logger.new(STDOUT)
  options = { :secret => '12345' }
  socket = PusherClient::Socket.new("54321", options)
  USER_ID = 1

  socket.subscribe('presence-TestChannel', USER_ID)

  socket.bind('remark') do |data|
    puts data
  end

  socket.connect
end 
```

### 结果是：

```
ree-1.8.7-2010.02 > PusherClientTest
ArgumentError: wrong number of arguments (2 for 1)
  from /Users/Dev/Sites/test_app/app/models/pusher_client_test.rb:16:in `subscribe'
  from /Users/Dev/Sites/test_app/app/models/pusher_client_test.rb:16
  from /Users/Dev/.rvm/gems/ree-1.8.7-2010.02@test_app/gems/activesupport-2.3.14/lib/active_support/dependencies.rb:406:in `load_without_new_constant_marking'
  from /Users/Dev/.rvm/gems/ree-1.8.7-2010.02@test_app/gems/activesupport-2.3.14/lib/active_support/dependencies.rb:406:in `load_file'
  from /Users/Dev/.rvm/gems/ree-1.8.7-2010.02@test_app/gems/activesupport-2.3.14/lib/active_support/dependencies.rb:547:in `new_constants_in'
  from /Users/Dev/.rvm/gems/ree-1.8.7-2010.02@test_app/gems/activesupport-2.3.14/lib/active_support/dependencies.rb:405:in `load_file'
  from /Users/Dev/.rvm/gems/ree-1.8.7-2010.02@test_app/gems/activesupport-2.3.14/lib/active_support/dependencies.rb:285:in `require_or_load'
  from /Users/Dev/.rvm/gems/ree-1.8.7-2010.02@test_app/gems/activesupport-2.3.14/lib/active_support/dependencies.rb:451:in `load_missing_constant'
  from /Users/Dev/.rvm/gems/ree-1.8.7-2010.02@test_app/gems/activesupport-2.3.14/lib/active_support/dependencies.rb:106:in `const_missing_not_from_s3_library'
  from /Users/Dev/.rvm/gems/ree-1.8.7-2010.02@test_app/gems/aws-s3-0.6.2/lib/aws/s3/extensions.rb:206:in `const_missing'
  from /Users/Dev/.rvm/gems/ree-1.8.7-2010.02@test_app/gems/activesupport-2.3.14/lib/active_support/dependencies.rb:118:in `const_missing'
  from (irb):1 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T21:00:33.040

需要指定 pusher-client repo 的 git URL 才能订阅存在和私有频道。似乎已发布的 pusher-client gem 尚未使用对 repo 的最新提交进行更新。

```
gem 'pusher-client', :git => "git://github.com/logankoester/pusher-client.git" 
```

除此之外，指定主 repo 的 fork 将使 :user_info 选项在订阅中传递：

```
gem 'pusher-client', :git => "git://github.com/agileanimal/pusher-client.git" 
```

# iphone - 如何更改标签栏选择颜色而不是蓝色？

> ID：10581400
> 
> 赞同：4
> 
> 时间：2012-05-14T10:16:45.713
> 
> 标签：iphone, ios, ipad

通常，iPhone 中的标签栏选择颜色为蓝色。相反，我想将颜色更改为棕色。如何更改标签栏选择颜色？我需要创建自定义标签栏控制器吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-08T15:19:32.810

如果您想使用图像：

> [self.tabBar setSelectionIndicatorImage:[UIImage imageNamed:@"selected_tab.png"]];

如果您想使用颜色：

> [self.tabBar setSelectedImageTintColor:[UIColor whiteColor]];

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-14T10:27:57.783

是的，如果您创建 customTabBar 控制器并切换 TabBar 控件的背景图像，那么它的工作就像系统 TabBar...您只需创建 5 个不同的图像并在您的 TabBar 委托方法上使用选定的选项卡设置它，这里如果您使用图形图像，那么它也可以工作.....意味着您在许多应用程序中全局使用此标签栏:)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-14T10:35:19.150

```
tabBar.tintColor = [UIColor redColor]; 
```

# xpath - 新手的复杂xpath

> ID：10581401
> 
> 赞同：0
> 
> 时间：2012-05-14T10:16:48.333
> 
> 标签：xpath

我有这段 html：

```
<tr>
  <td class="has-checkbox">
    <input id="abc" class=... value=...>
  </td>
  <td class="has-label">
    <label for="abc">Name1234</label>
  </td>
<tr> 
```

我需要根据标签中的内容创建一个 xpath 来获取输入元素，在本例中为 Name1234。

换句话说，对于这种情况，我需要输入元素的 xpath，并且路径必须包含 Name1234 作为其变量。

任何人都可以在这里帮助我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T11:34:52.423

`//input[@id = //label[. = 'Name1234']/@for]`选择属性值等于内容为的元素`input`的属性值的元素。`id``for``label``Name1234`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-05-22T09:46:18.547

您可以使用`/..`，此语法用于移回父节点。在你的情况下：

```
//label[.='Name1234']/../../td/input 
```

您必须向后移动 2 次，因为`input`标签是另一个标签的子`td`标签。

[以下](http://www.w3schools.com/xpath/xpath_syntax.asp)是有关您应该阅读的其他介绍和示例。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-04-14T16:28:38.710

它并没有你想象的那么复杂：

```
xpath=//tr[//label[.="Name1234"]]//input 
```

换句话说，您正在寻找包含带有文本“Name1234”的“标签”的“tr”。如果条件为真，您将获得“输入”元素

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-14T13:31:54.827

这是使用 Axes`parent`和的解决方案`preceding-sibling`：

`//label[.='Name1234']/parent::td/preceding-sibling::td/input`

# java - 在 Java 中访问基本包中的资源？

> ID：10581404
> 
> 赞同：1
> 
> 时间：2012-05-14T10:16:58.207
> 
> 标签：java, properties, resources

我不喜欢将我的属性文件放入`resources/mypackage/.../somepackage/resourcefile.properties`其中，而宁愿将它们放入`resources/resourcefile.properties`. 如果没有：

1.  被迫写作`MyApplication.class.getResourceAsStream("../../../../../../../../resources/resourcefile.properties")`或
2.  使用时它在Tomcat中不起作用`SomeClass.getClassLoader().getResourceAsStream("resourcefile.properties")`？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-14T10:21:36.380

放入前导斜杠以指定根包：

```
SomeClass.getClassLoader().getResourceAsStream("/resourcefile.properties") 
```

# c++ - 如何配置 boost 日志，用于旋转和追加写入？

> ID：10581405
> 
> 赞同：14
> 
> 时间：2012-05-14T10:17:01.313
> 
> 标签：c++, logging, boost

如何配置 boost 日志，用于旋转和追加写入？

并且重新启动程序后，不要清除日志文件。

```
int init_log()
{
    typedef sinks::synchronous_sink< sinks::text_file_backend > file_sink;
    boost::shared_ptr< file_sink > sink( new file_sink (
       keywords::file_name = "app.log", // only one files
       // keywords::open_mode = (std::ios::out | std::ios::app), // is not append
       keywords::open_mode = (std::ios::out | std::ios::app), // is not rotated
       keywords::rotation_size = 10 * 1024
     ));
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-12T14:58:05.273

请尝试一下（关键是使用某种*模式*添加日志名称，而不是像“app.log”那样固定其名称）这将启用 flre 轮换，并且数据将附加到每个创建的文件中。关于日志清除，只要您没有指定自定义 file_collector，您的日志应该保持原样:)

```
typedef sinks::synchronous_sink< sinks::text_file_backend > file_sink;
boost::shared_ptr< file_sink > sink( new file_sink(
        keywords::file_name     = "app%m%d%Y_%H%M%S_%5N.log",   // file name pattern
        keywords::rotation_size = 10*1024                       // rotation size, in characters
        )); 
```

# android - android中longClick菜单的关闭事件

> ID：10581407
> 
> 赞同：0
> 
> 时间：2012-05-14T10:17:23.157
> 
> 标签：android, events, onlongclicklistener

在我的 android 应用程序中，我需要在关闭 longClick 菜单后执行一些操作。我有下一个代码：

```
editText.setOnLongClickListener(new View.OnLongClickListener()
{
    @Override
    public boolean onLongClick (View v)
    {
         flag = "On";
         return false;
    }
}); 
```

它工作正常，但我需要`flag="Off"`longClick 菜单何时关闭。有可能赶上这个事件吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T10:19:25.493

你应该使用这个：

```
@Override
public void onOptionsMenuClosed(Menu menu) {
    flag = "off";
    super.onOptionsMenuClosed(menu);
} 
```

# c - 如何将字符串加载到结构中？

> ID：10581408
> 
> 赞同：0
> 
> 时间：2012-05-14T10:17:24.543
> 
> 标签：c, string, unix, struct, structure

我有一个客户端和一个服务器。我使用UDP。(C/Unix)

在服务器中，我确实有一个结构：

```
typedef struct Header {
int seqid;
int len;
char payload[100];
}
...
char test[100];
struct Header package;
package.seqid = 1;
package.len = 64;
strcpy(package.payload, test);
sendto(sockfd, &package, 100, 0, (struct sockaddr*)&cliaddr, sizeof(cliaddr)); 
```

在客户端我确实有相同的结构：

```
struct Header* myrepos;
...
recvfrom(sockfd, recvline, 100, 0, NULL, NULL);
//recvline is a char[100]
... 
```

我想将提交的结构（由服务器提交）加载到“myrepos”中。我怎样才能做到这一点？

用一个

```
*angel = (struct Header*)&recvline; 
```

导致编译器错误。

我不确定我的方法是否完全正确，或者它是否会发生。还有其他解决方案吗？

谢谢你！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T10:31:54.473

1：`sendto(sockfd, &package, sizeof(struct Header), 0, (struct sockaddr*)&cliaddr, sizeof(cliaddr));`

2：`recvline = new char [sizeof(struct Header)];`

3：`myrepos = (struct Header *)recvline;`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T10:48:12.670

我猜你在这里有几个问题。

1.  你为什么提到要发送的缓冲区大小为 100？它应该是 sizeof(struct Header) 假设您要始终发送 100 字节的有效负载。
2.  如果您在网络中发送整数变量而不在另一端接收和分配它们时将它们转换为“网络顺序”，那么您最终可能会得到不正确的值，除非两台机器具有相同的字节序。

因此，我的建议是您将它们全部转换为缓冲区并将其发送过去，并在接收到解码缓冲区时将其发送到结构中。

发送记录的示例方法：

```
char sbuf[100] = {0};
char test[100] = {"Test Message"};
char *p = sbuf;
int bytestobesent = 0;

p = htonl(1);
p = p+sizeof(long);
p = htonl(64);
p = p+sizeof(long);
memcpy(p, test, strlen(test));

bytestobesent = sizeof(long) + sizeof(long) + strlen(test);

sendto(sockfd, sbuf, bytestobesent , 0, (struct sockaddr*)&cliaddr, sizeof(cliaddr)); 
```

当您从网络接收缓冲区时，只需执行相反的操作。希望这可以帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-14T11:34:49.277

如果您想发送固定大小的包裹。那么这可能是解决方案：

服务器：

```
sendto(sockfd, &package, sizeof(package), 0, 
       (struct sockaddr*)&cliaddr, sizeof(cliaddr)); 
```

客户：

```
struct Header myrepos;
...
recvfrom(sockfd, &myrepos, sizeof(myrepos), 0, NULL, NULL); 
```

当然，您必须检查函数的返回码。

如果你想发送可变大小的包裹，它会更复杂。

# iphone - OpenAL alSourceUnqueueBuffers & alSourceUnqueueBuffers

> ID：10581409
> 
> 赞同：0
> 
> 时间：2012-05-14T10:17:25.963
> 
> 标签：iphone, core-audio, audio-streaming, openal

大家，我在使用 OpenAL Libaray 时遇到了一个关于 API 的问题——alSourceUnqueueBuffers。

我的问题如下：

1.我通过流媒体机制播放 pcm 音乐。

2.应用程序可以使用 alSourceQueueBuffers 将一个或多个缓冲区名称排队。

1.  当缓冲区被处理时。我想在我的函数中填充新的音频数据： getSourceState 。但是当我使用 OpenAL alSourceUnqueueBuffers 的 API 时。它返回一个错误 --- AL_INVALID_OPERATION 。我这样做是作为关于 OpenAL 的文档。所以我测试了一种方法来解决这个问题。我在 api alSourceUnqueueBuffers 之前使用 alSourceStop(source)，在我通过 alBufferData 和 alSourceQueueBuffers 填充新数据之后使用 alSourcePlay(source)。但这很糟糕。因为它破坏了音乐。

谁能帮我找到这个问题？

在哪里可以找到有关 openAL 的更多信息和方法？

我在等你的帮助。谢谢大家。

所以我的代码如下：

。H：

```
 @interface myPlayback : NSObject
    {
    ALuint                  source;
    ALuint              *   buffers;
    ALCcontext*             context;
    ALCdevice*              device;
    unsigned long long      offset;
    ALenum                  m_format;
    ALsizei                 m_freq;
    void*                   data;
    }

@end 
```

.m

```
 - (void)initOpenAL
    {
    ALenum          error;

    // Create a new OpenAL Device
    // Pass NULL to specify the system’s default output device
    device = alcOpenDevice(NULL);
    if (device != NULL)
    {
        // Create a new OpenAL Context
        // The new context will render to the OpenAL Device just created 
        context = alcCreateContext(device, 0);
        if (context != NULL)
        {
            // Make the new context the Current OpenAL Context
            alcMakeContextCurrent(context);

            // Create some OpenAL Buffer Objects

            buffers = (ALuint*)malloc(sizeof(ALuint) * 5);
            alGenBuffers(5, buffers);
            if((error = alGetError()) != AL_NO_ERROR) {
                NSLog(@"Error Generating Buffers: %x", error);
                exit(1);
            }

            // Create some OpenAL Source Objects
            alGenSources(1, &source);
            if(alGetError() != AL_NO_ERROR) 
            {
                NSLog(@"Error generating sources! %x\n", error);
                exit(1);
            }

        }
    }
    // clear any errors
    alGetError();

    [self initBuffer];  
        [self initSource];
}

    - (void) initBuffer
    {
    ALenum  error = AL_NO_ERROR;
    ALenum  format;
    ALsizei size;
    ALsizei freq;

    NSBundle*               bundle = [NSBundle mainBundle];

    // get some audio data from a wave file
    CFURLRef fileURL = (CFURLRef)[[NSURL fileURLWithPath:[bundle pathForResource:@"4" ofType:@"caf"]] retain];

    if (fileURL)
    {   
        data = MyGetOpenALAudioData(fileURL, &size, &format, &freq);
        CFRelease(fileURL);
        m_freq = freq;
        m_format = format;
        if((error = alGetError()) != AL_NO_ERROR) {
            NSLog(@"error loading sound: %x\n", error);
            exit(1);
        }

        alBufferData(buffers[0], format, data, READ_SIZE , freq);
        offset += READ_SIZE;
        alBufferData(buffers[1], format, data + offset, READ_SIZE, freq);
        offset += READ_SIZE;
        alBufferData(buffers[2], format, data + offset, READ_SIZE, freq);
        offset += READ_SIZE;
        alBufferData(buffers[3], format, data + offset, READ_SIZE, freq);
        offset += READ_SIZE;
        alBufferData(buffers[4], format, data + offset, READ_SIZE, freq);
        offset += READ_SIZE;

        if((error = alGetError()) != AL_NO_ERROR) {
            NSLog(@"error attaching audio to buffer: %x\n", error);
        }       
    }
    else
        NSLog(@"Could not find file!\n");
}

    - (void) initSource
    {
    ALenum error = AL_NO_ERROR;
    alGetError(); // Clear the error

    // Turn Looping ON
    alSourcei(source, AL_LOOPING, AL_TRUE);

    // Set Source Position
    float sourcePosAL[] = {sourcePos.x, kDefaultDistance, sourcePos.y};
    alSourcefv(source, AL_POSITION, sourcePosAL);

    // Set Source Reference Distance
    alSourcef(source, AL_REFERENCE_DISTANCE, 50.0f);

    alSourceQueueBuffers(source, 5, buffers);

    if((error = alGetError()) != AL_NO_ERROR) {
        NSLog(@"Error attaching buffer to source: %x\n", error);
        exit(1);
    }   
}

    - (void)startSound
        {
        ALenum error;

        NSLog(@"Start!\n");
        // Begin playing our source file
        alSourcePlay(source);
        if((error = alGetError()) != AL_NO_ERROR) {
            NSLog(@"error starting source: %x\n", error);
        } else {
            // Mark our state as playing (the view looks at this)
            self.isPlaying = YES;
        }

        while (1) {
            [self getSourceState];
        }
}
    -(void)getSourceState
    {
    int queued;
    int processed;
    int state;
    alGetSourcei(source, AL_BUFFERS_QUEUED, &queued);
    alGetSourcei(source, AL_BUFFERS_PROCESSED, &processed);
    alGetSourcei(source, AL_SOURCE_STATE, &state);
    NSLog(@"%d", queued);
    NSLog(@"%d", processed);

    NSLog(@"===================================");

    while (processed > 0) {
        for (int i = 0; i < processed; ++i) {
            ALuint buf;
            alGetError();
    //            alSourceStop(source);
            ALenum y = alGetError();
            NSLog(@"%d", y);
            alSourceUnqueueBuffers(source, 1, &buf);
            ALenum i = alGetError();
            NSLog(@"%d", i);
            processed --;
            alBufferData(buf, m_format, data + offset, READ_SIZE, m_freq);
            ALenum j = alGetError();
            NSLog(@"%d", j);
            alSourceQueueBuffers(source, 1, &buf);
            ALenum k = alGetError();
            NSLog(@"%d", k);
            offset += READ_SIZE;
//            alSourcePlay(source);
        }
    }

//    [self getSourceState];
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T05:02:09.003

我找到了问题的原因。

我打开循环的原因：alSourcei(source, AL_LOOPING, AL_TRUE);

如果你设置了这个，当源处理一个缓冲区时，你想填充新数据或从源中删除缓冲区。你会得到错误。

# android - 使用wifi ip定位

> ID：10581410
> 
> 赞同：3
> 
> 时间：2012-05-14T10:17:34.697
> 
> 标签：android

我试图找到我的网络的 ip 并使用该 ip 获取位置。但我的代码在连接到 2G 网络时返回正确的 ip(223.187.19.157)。但是当我连接到我的wifi时，它会返回这样的**fe80::7ad6:f0ff:fe2b:dca6%wlan0** ip 。谁能帮我找到正确格式的wifi ip。代码如下

```
public String getIpAddress() {
        try {
            for (Enumeration<NetworkInterface> en = NetworkInterface.getNetworkInterfaces(); en.hasMoreElements();) {
                NetworkInterface intf = en.nextElement();
                for (Enumeration<InetAddress> enumIpAddr = intf.getInetAddresses(); enumIpAddr.hasMoreElements();) {
                    InetAddress inetAddress = enumIpAddr.nextElement();
                    if (!inetAddress.isLoopbackAddress()) {
                        return inetAddress.getHostAddress().toString();
                    }
                }
            }
        } catch (SocketException ex) {
            ex.printStackTrace();
        }
        return null;
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T10:41:06.250

试试这个代码希望它会帮助你

```
import java.net.InetAddress;
import java.net.NetworkInterface;
import java.net.Socket;
import java.net.SocketException;
import java.util.ArrayList;
import java.util.Collection;
import java.util.Collections;
import java.util.Enumeration;
import java.util.Iterator;
import java.util.List;

import android.app.Activity;
import android.os.Bundle;
import android.util.Log;
import android.widget.TextView;

    public class WhatIsMyIP extends Activity {
            private static final String TAG = WhatIsMyIP.class.getSimpleName();

            @Override
            public void onCreate(Bundle savedInstanceState) {
                    super.onCreate(savedInstanceState);
                    setContentView(R.layout.main);

                    new Thread(new Runnable() {
                            public void run() {
                                    initUI();
                            }
                    }).run();
            }

            private List<String> getIpAddresses() {
                    List<String> ips = new ArrayList<String>();
                    try {
                            for (Enumeration<NetworkInterface> en = NetworkInterface.getNetworkInterfaces(); en
                                    .hasMoreElements();) {
                                    NetworkInterface intf = en.nextElement();
                                    for (Enumeration<InetAddress> e = intf.getInetAddresses(); e.hasMoreElements();) {
                                            InetAddress inetAddress = e.nextElement();
                                            if (!inetAddress.isLoopbackAddress()) 
                                                    ips.add(inetAddress.getHostAddress().toString());
                                    }
                            }
                    } catch (SocketException ex) {
                            Log.e(TAG, ex.toString(), ex);
                    }
                    return !ips.isEmpty() ? ips : Collections.<String> emptyList();
            }

            private String getSocketIPAdress() {
                    Socket conn = null;
                    String result = null;
                    try {
                            try {
                                    conn = new Socket("www.google.com", 80);
                                    result = conn.getLocalAddress().toString();
                            } finally {
                                    if (conn != null && !conn.isClosed()) 
                                            conn.close();
                            }
                    } catch (Throwable t) {
                            Log.i(TAG, t.getMessage(), t);
                    }
                    return result;
            }

            private void initUI() {
                    List<String> ips = getIpAddresses();
                    final String ipAddress = !ips.isEmpty() ? join(ips, ", ") : getSocketIPAdress();
                    runOnUiThread(new Runnable() {
                            public void run() {
                                    updateTextView(ipAddress);
                            }
                    });
            }

            private String join(Collection<?> s, String delimiter) {
                    StringBuffer buffer = new StringBuffer();
                    Iterator<?> iter = s.iterator();
                    while (iter.hasNext()) {
                            buffer.append(iter.next());
                            if (iter.hasNext()) {
                                    buffer.append(delimiter);
                            }
                    }
                    return buffer.toString();
            }

            private void updateTextView(String ipAddress) {
                    TextView textView = (TextView) findViewById(R.id.ip_address);
                    if (ipAddress != null) {
                            textView.setText(getString(R.string.ip_address) + ipAddress);
                    } else {
                            textView.setText(getString(R.string.ip_address) + getString(R.string.not_available));
                    }
            }

    } 
```

# ios - ios自定义进度条设计

> ID：10581413
> 
> 赞同：1
> 
> 时间：2012-05-14T10:17:55.153
> 
> 标签：ios, progress-bar

我想为我的应用程序创建一个自定义进度条。我是 iOS 开发的新手，发现很难理解 google 上的代码，这让我很困惑。我想要的是像增长动画进度条。例如：就像从小植物（到一棵完整的树）的树生长方面显示进度，这表示过程完成。

从哪里开始以及如何开始？Core Graphics 或 cocos2d 哪个更适合这个？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-14T10:26:08.847

如果你正在做一些图形化的事情，比如一棵树的生长，你是否已经有了想要用作一系列图像的动画？

如果是这样，您可以使用`UIImageView`. 每当您想更新进度条时，只需检查任务的进度，然后使用它来确定要显示的数字图像。因此，如果您有 12 张图像，您可以找到任务完成的百分比，除以 100，然后乘以 12（然后转换为`int`），得到您想要的图像编号。

完成后，只需获取适当命名的图像并将其放入图像视图中：

```
self.myImageView.image = [UIImage imageNamed:[NSString stringWithFormat:@"frame-%i", myImageNumber]]; 
```

至于何时进行进度检查，这取决于您正在执行的任务。有些任务有一个自然的地方可以注入回调来更新 UI，而对于其他任务，最好只使用计时器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-14T10:28:19.633

您不能在 uiprogressbar 中进行太多更改，而是可以使用 UISlide 表现得像 progressbar 。

您只能将进度条的框架更改为：-

```
UIProgressView *progressView = [[UIProgressView alloc] initWithProgressViewStyle
:UIProgressViewStyleBar];
[progressView setFrame:CGRectMake(0,0,320,10)]; 
```

您可以创建一个 uiSlider 并将其 ThumbImage 设为 nil,setMinimumTrackImage ans maxtrackImage 然后使用其上的自定义函数来显示进度

[自定义 UISlider](http://www.applausible.com/blog/?p=250)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-14T10:27:54.770

[https://github.com/jdg/MBProgressHUD](https://github.com/jdg/MBProgressHUD) 试试这个代码，它的modst被广泛使用的开源代码用于你的目的

# networking - 从任何地方访问 VSFTPD、Ubuntu 12.04

> ID：10581422
> 
> 赞同：-1
> 
> 时间：2012-05-14T10:18:21.733
> 
> 标签：networking, ftp, ip, vsftpd

我在家用 PC 上设置了 vsftpd。我使用带有路由器的 airtel 宽带连接，因此我有一个公共 IP 地址，然后是一个私有 IP 地址，它们都不是静态的。在本地，我可以通过我的私有 IP 地址访问我的 FTP，我想知道如何通过远程位置访问我的计算机。我很确定 `ftp://xx.xx.x.xx`// 我的公共 IP 不会工作

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T03:32:01.563

您必须进入路由器设置并为您的 PC 提供静态本地 IP 地址。然后告诉您的路由器，每个传入的 ftp 请求（通常是端口 21）都将被定向到该本地 IP 地址。

具体说明会很困难，因为每个路由器都是不同的，而且他们都有一个习惯，一有机会就会改变他们的 gui。

真的很惊讶还没有人回答这个问题。火箭科学不是。

# css - 旧浏览器的 CSS 转换验证错误和支持/解决方案

> ID：10581423
> 
> 赞同：0
> 
> 时间：2012-05-14T10:18:25.963
> 
> 标签：css, validation, cross-browser

请参阅我的网站[http://www.visioville.fi/en/](http://www.visioville.fi/en/)以供参考（visioville.fi/styles.css 以获取最新样式）

*   CSS3 过渡已在首页的新闻框和工作示例（或图库）中使用。它们在最新的浏览器上运行良好，但较旧的浏览器版本（例如 IE）呢？是否有可以分配给某些浏览器的代码（例如，我可以告诉旧的 IE 浏览器只弹出大画廊图片而没有任何“过渡”，以避免出现问题/损坏的画廊）？

*   我从 CSS Validator 收到所有转换的错误是否有问题，例如：

    ```
    .big ul li img Property transition doesn't exist : width 1s ease 
    ```

    我的代码说：

    ```
    .big ul li img { transition: width 1s ease; } 
    ```

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-02T07:15:05.940

因为oldrr浏览器不支持transition，他们会忽略它，并且样式改变会发生没有动画。

关于您的验证：我想这可能是因为您的验证器没有为 css3 验证？还要确保使用供应商前缀（例如 -webkit-）或像 -prefix-free 这样的脚本来动态添加它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-02T07:03:42.213

1.  要做到这一点，最好的方法是*通过渐进增强进行开发*。这意味着：在没有 JS 和 CSS3 的情况下对您的画廊进行编码（例如通过新窗口打开图片），然后应用 CSS3，然后应用 JS。

2.  你的css没有问题。过渡属性仍处于工作草案中，因此尚未正式完成。这就是为什么 w3c 验证器不知道新属性或验证器不知道这个 css 简写的原因。

# java - 未读取变量

> ID：10581426
> 
> 赞同：1
> 
> 时间：2012-05-14T10:18:30.143
> 
> 标签：java, variables, boolean

未读取 (cancel1 = 2) 布尔值“取消”的代码部分：

```
while (done !=0){
  pizzaChoice = readInt ("Choose the type of pizza you wish to order");
  double quantity = readInt ("How many " + type[pizzaChoice] + " pizzas do you wish to buy (Maximum pizzas per order is 5)");   

  if(quantity >= max){
    System.out.println("Sorry you cannot order more than five pizzas");

    if ((quantity - max) <= 0){
      double pizzasLeft = max - quantity;

      System.out.println("You can still order " + pizzasLeft + " pizzas");

      pizzasLeft2 = pizzasLeft2 - pizzasLeft; 
```

下一个 if 循环是问题所在

```
 if (pizzasLeft2 <= 0){
                boolean cancel = true;
                int cancel1 = readInt("Press 2 to cancel your order and start again"); 
                if(cancel1 == 2){
                  cancel = false;
                }

              }
            }
          }

          done= readInt ("Press 0 if you are done or press 1 to make another pizza order");
          double total1 = quantity*price[pizzaChoice];
          total2 = total2 + total1;
        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T10:26:48.917

相关的代码`cancel`对我来说似乎是正确的。
我建议您检查具有此值的块。首先进入`if`区块的条件是否满足？
一个提示是另一个取消全局变量可能会对其角色产生歧义。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-14T13:14:12.760

您在抱怨 Eclipse，或者您正在使用的任何 IDE 都在抱怨`cancel`从未使用过，对吗？发生这种情况是因为，即使您分配了取消变量值（true 和 false），您也永远不会使用它，例如：

```
if (cancel) {
    System.out.printLn("Thanks for visiting Java Pizza!");
} 
```

如果您在代码中以某种方式使用它，警告就会消失。或者，如果您将其从代码中删除，因为它本来就无用

# jpa - 简单的 JPA 2 条件查询“where”条件

> ID：10581429
> 
> 赞同：3
> 
> 时间：2012-05-14T10:18:34.877
> 
> 标签：jpa, jpa-2.0, criteria

我正在学习 jpa-hibernate 基础知识。

我有这个查询来获取所有用户：

```
CriteriaBuilder cb = getEntityManager().getCriteriaBuilder();
        CriteriaQuery cq = cb.createQuery();
        cq.select(cq.from(Utente.class));
        return getEntityManager().createQuery(cq).getResultList(); 
```

现在我想通过一个名为“ghost”的布尔字段进行过滤，它等于 true（或 false，这取决于）。

翻译：

> SELECT * FROM users WHERE ghost = 0;

我必须使用 cq.where() 吗？如何？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-14T10:31:45.687

是的，您必须使用`cq.where()`.

尝试这样的事情：

```
Root<Utente> utente = cq.from(Utente.class);
boolean myCondition = true;    // or false
Predicate predicate = cb.equal(utente.get(Utente_.ghost), myCondition);
cq.where(predicate); 
```

我使用了`Utente_`应该自动生成的规范元模型类。这避免了在键入字段名称时出错的风险，并增强了类型安全性。否则你可以使用

```
Predicate predicate = cb.equal(utente.get("ghost"), myCondition); 
```

# android - Android Socket 下载多个文件被触发？

> ID：10581433
> 
> 赞同：1
> 
> 时间：2012-05-14T10:18:45.990
> 
> 标签：android, sockets, http-protocols

我想从服务器下载多个图像。我打开套接字并下载第一个图像，当我想在这个套接字中下载第二个图像时，下载不继续，套接字关闭。我的代码如下...

公共类 ClientThread 实现 Runnable {

```
 public void run() {
        try {
            Log.d("ClientActivity", "C: Connecting...");
            SocketAddress sockaddr = new InetSocketAddress(serverIpAddress, SERVERPORT);
            socket = new Socket();
            socket.setKeepAlive(true);
            socket.connect(sockaddr, 5000);
            if (socket.isConnected()) {
                final DataInputStream input = new DataInputStream(socket.getInputStream());
                final PrintWriter output = new PrintWriter(new OutputStreamWriter(socket.getOutputStream()));

                output.println("GET /way/images/profile/1231 HTTP/1.1");
                output.println("Host: 192.168.1.2");
                output.println("User-Agent: Java");
                output.println("Accept: */*");
                output.println("Connection: Keep-Alive");
                output.println("");
                output.flush();

                String line;
                File file = new File("/sdcard/aaa.png");
                if (!file.exists()) {
                    file.createNewFile();
                }
                FileOutputStream fileOut = new FileOutputStream(file);
                System.out.println("Getting first file");
                while ( (line = input.readLine()) != null ) {
                    System.out.println(line);
                    fileOut.write(line.getBytes());
                }
                System.out.println("First file finished");
                fileOut.flush();
                fileOut.close();

                output.println("GET /way/images/profile/1231 HTTP/1.1");
                output.println("Host: 192.168.1.2");
                output.println("User-Agent: Java");
                output.println("Accept: */*");
                output.println("Connection: Keep-Alive");
                output.println("");
                output.flush();

                file = new File("/sdcard/aaa1.png");
                if (!file.exists()) {
                    file.createNewFile();
                }
                fileOut = new FileOutputStream(file);
                System.out.println("Getting second file");
                while ( (line = input.readLine()) != null ) {
                    System.out.println(line);
                    fileOut.write(line.getBytes());
                }
                System.out.println("Second file finished");

                fileOut.flush();
                fileOut.close();
                input.close();
                output.close();
                socket.close();
            }
            Log.d("ClientActivity", "C: Closed.");
        } catch (Exception e) {
            Log.e("ClientActivity", "C: Error", e);
            connected = false;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T10:59:33.133

您似乎正在使用 HTTP 下载图像文件，在这种情况下，使用[`HttpURLConnection`](http://developer.android.com/reference/java/net/HttpURLConnection.html).

`HttpURLConnection`可以在这篇博文中找到用于下载图像的代码示例：[在 Android 中下载图像](http://mobisys.in/blog/2012/01/downloading-image-in-android/)

您还可以在 Android 开发者博客中阅读有关[Android 的 HTTP 客户端的信息。](http://android-developers.blogspot.in/2011/09/androids-http-clients.html)

# ajax - 如何识别它在 Django 中是哪种 ajax 形式？

> ID：10581435
> 
> 赞同：0
> 
> 时间：2012-05-14T10:18:56.337
> 
> 标签：ajax, django, jquery

我有一个视图，它负责处理来自客户端的所有 Ajax 提交。为了区分它们，我使用了不同的提交按钮名称，例如这个

```
<input type="submit" value="Send" name="send_message"> 
```

从这个[问题](https://stackoverflow.com/questions/1395807/proper-way-to-handle-multiple-forms-on-one-page-in-django)建议。唯一的问题是，从视图方面它似乎没有携带`name`到服务器端，所以我不能使用下面的 if 语句

```
if 'send_message' in request.POST: 
```

如果我用新鲜的页面正常发送它，它就可以工作。但我想将它与 Ajax 一起使用。

我想出了一个技巧，你可以用 jQuery 添加这个名字。只需在`serializing()`您的数据之后，您就可以通过以下方式连接名称属性`data += "&send_message"`

然后 if 语句将起作用。但它似乎并不那么干净。所以我想知道是否有更好的方法来处理这个问题？或者我应该使用不同的视图来处理我拥有的不同 Ajax 调用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T10:37:20.430

您确实应该将每个表单发布到不同的 URL。

如果没有，您可以添加一个隐藏输入，并将表单名称作为值。

```
<input name="form_name" type="hidden" value="form_1" /> 
```

视图.py：

form_name = request.POST['form_name']

# r - grid.Call(L_textBounds, as.graphicsAnnot(x$label), x$x, x$y, 中的错误：未找到多边形边

> ID：10581440
> 
> 赞同：64
> 
> 时间：2012-05-14T10:19:22.467
> 
> 标签：r, ggplot2

我刚刚在 Mac OS X 版本 10.7.3 上安装了 RStudio。执行以下命令后

```
library(ggplot2)
qplot(mpg, wt, data=mtcars) 
```

我收到以下错误：

```
Error in grid.Call(L_textBounds, as.graphicsAnnot(x$label), x$x, x$y,  : 
  Polygon edge not found
In addition: Warning messages:
1: In grid.Call(L_textBounds, as.graphicsAnnot(x$label), x$x, x$y,  :
  no font could be found for family "Arial"
2: In grid.Call(L_textBounds, as.graphicsAnnot(x$label), x$x, x$y,  :
  no font could be found for family "Arial" 
```

我该如何解决？

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2012-06-13T22:05:01.077

这发生在我身上，我发现 arial 字体文件已被禁用。首先检查是否`Arial.ttf`已移动到禁用的字体目录。从终端：

```
ls /Library/Fonts\ Disabled 
```

如果是这样，请将其移回活动字体目录。

```
sudo mv /Library/Fonts\ Disabled/Arial.ttf /Library/Fonts 
```

注销，登录，然后打开“字体簿”应用程序。就我而言，之前存在 arial，但它是存储在`/Library/fonts/Microsoft/`. Font Book 现在可能会在字体名称旁边显示一个黄色三角形，表示存在多个字体副本。突出显示字体名称并从菜单中选择`Resolve Duplicates`命令。`Edit`这应该禁用 Microsoft 副本，您可以通过选择其中一个 arial 字体来确认（单击字体名称旁边的展开三角形），右键单击标记为 的字体`Off`，然后选择`Reveal in Finder`，这应该会打开一个 Microsoft 字体窗口目录。

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2015-07-18T20:12:17.800

所以我在几周前工作的代码遇到了同样的问题，并且没有对计算机上的任何内容进行大规模更新（也许除了操作系统，现在我开始考虑它......）。我解决它的方法是我通过调用强制图形窗口首先打开

```
quartz() 
```

在我的图表之前，它成功了。仍然不确定字体，我似乎有 Arial。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2019-01-06T06:29:25.897

经过几次试验，我认为这个“修复”可能会有所帮助。首先尝试运行它以确保字体确实存在：

```
loadfonts(dev="win") 
```

如果他们这样做，请调用以下命令以确保您调用的名称与 R 知道的名称相似：

```
windowsFonts() 
```

否则，请尝试以下操作：

```
library(extrafont)
extrafont::font_import() 
```

以上为我解决的问题。希望将来有人会得到同样的帮助。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2016-02-13T17:25:18.230

在一次又一次地遇到同样的问题并尝试不同的解决方案后，我决定从外部获取**Arial**字体并将其添加到*Font Book*。在这个练习之前，我有一些 MS Office 附带的字体，比如 Arial Black、Arial Narrow 等，所以没有但**没有**可见的纯**Arial字体。**我猜这可以通过 Mac 上的 MS 应用程序正在应用的奇怪字体策略来解释，[这里](http://www.officeformachelp.com/office/font-management/)有更详细的讨论。尽管如此，从外部添加字体似乎解决了这个问题。

[![所有字体](../Images/c6f07bf3979d87c68d177329cfd9762a.png)](https://i.stack.imgur.com/HkCdW.png)

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2018-06-05T11:38:55.067

正如其他人所引用的那样，这个问题似乎肯定与 Microsoft Office 升级有关（我的公司在问题浮出水面之前刚刚升级了软件）。

在尝试运行一个简单的 ggplot2 绘图后，我收到以下错误和警告：

```
Error in grid.Call(C_textBounds, as.graphicsAnnot(x$label), x$x, x$y,  : 
  polygon edge not found
Warning messages:
1: In grid.Call(C_stringMetric, as.graphicsAnnot(x$label)) :
  no font could be found for family "Arial" 
```

我通过执行以下操作解决了这个问题：

(1) 打开字体册

(2) 导航到 Arial 字体

(3) 右键->“恢复字体”

然后剧情完美呈现。

我希望这有帮助！

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2017-03-24T23:18:13.620

我向我的 qqplot() 函数添加了一个额外的参数，如下所示：

```
theme(text=element_text(family="Garamond", size=14)) 
```

果然 - 得到了一张图表。那么最终结果是：

```
ggplot(train, aes(x = pclass, fill = factor(survived))) +
  geom_bar() +
  xlab("Pclass") +
  ylab("Total Count") +
  labs(fill = "Survived") +
  theme(text=element_text(family="Garamond", size=14)) 
```

我确实打开了字体册，在我的系统（Mac OSX 10.12.3）上显示 Arial 已关闭。我确实安装了包括 MS Excel 在内的 Microsoft 应用程序，但此时我无法将禁用任何字体与安装任何 MS 应用程序关联起来。高温高压

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2018-05-29T04:53:10.900

对于 mac 操作系统，我尝试了很多选项，但最终以下工作。- 打开字体书并删除禁用（启用）arial 字体。- 重新启动计算机。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2021-01-11T12:03:19.583

我遇到了同样的问题，重置绘图区域（`dev.off()`）就足够了。

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2016-05-01T08:15:18.110

我通过转到字体书，转到文件 - > 恢复标准字体来解决。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2014-09-17T17:49:19.583

I ran into the same problem (interestingly, I received the error when calling the "spplot" function rather than any of the ggplot2 functions). Because I had recently installed MS Office for Mac, I tried disabling the MS duplicate Arial font as was previously suggested, but still received the error message repeatedly even after doing this. I ended up simply removing all MS Office duplicate fonts (Go-->Computer-->Macintosh HD--->Library-->Fonts and then move the Microsoft folder to the trash). I'm not sure what effect this will have on my MS applications, but it seems to have remedied my R issues, which is more important to me at this point anyway!

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2020-07-12T15:53:16.800

在 MacOS 上工作时，我收到了相同的错误消息，其中提到的警告不是 Arial，而是 Roboto Condensed 字体。所以我安装了那些，它删除了警告，但没有错误消息。

```
Error in grid.Call(C_textBounds, as.graphicsAnnot(x$label), x$x, x$y,  : 
  polygon edge not found 
```

然后我在[https://community.rstudio.com/t/still-fighting-with-grid-call-c-textbounds-as-graphicsannot-x-label-xxxy-polygon-edge-not-found-error/找到65559](https://community.rstudio.com/t/still-fighting-with-grid-call-c-textbounds-as-graphicsannot-x-label-x-x-x-y-polygon-edge-not-found-error/65559)重新安装 X11 的提示[https://www.xquartz.org](https://www.xquartz.org)。

之后错误消失了......但是当代码在 R 文件中时它仍然没有绘图。不过，当我在 RStudio 中从 R-markdown 文档中编织时，它确实有效。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2021-01-03T17:36:38.013

我在这方面并不是那么出色，以至于我可以不先问最基本的问题，请原谅我：slight_smile：

我知道 R 控制台作业和 Rstudio 都开始在他们的图形绘图任务中失败，现在当你运行琐碎的绘图请求时，你会收到失败错误，并且没有绘图。

你重置会话了吗？(Ctrl+Shift+F10) 有时会话毕竟会损坏。

或者，如果您想在该路线之前尝试其他东西，则可能值得停止图形设备。dev.off() 并再次尝试该基本情节。

当然，如果您的问题持续存在，直到新的会议，那么我肯定会放弃支持具有更多专业知识的其他人来考虑这个问题。

问候，尼尔

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2021-04-24T02:31:57.647

奇怪的错误。但对我来说，在 mac 上，解决方案很简单：只需更新 Xquartz。

`cmd`用+打开聚光灯搜索`space`，搜索 Xquartz

打开后，转到关于 -> 检查更新 -> 更新。

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2018-04-04T14:36:01.023

我在使用该函数时遇到了类似的问题：

```
ggarrange (ggpubr package) 
```

它是通过手动停用和激活包来解决的（通过单击“包”中的包）。也许这也对其他人有帮助:)

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2016-04-26T17:24:22.167

在更新我的操作系统和全新安装 MS Office 后，我遇到了同样的问题，这似乎是罪魁祸首。

由于我无法使用终端方法，我只是直接进入字体手册并手动启用禁用的字体（Arial、Times New Roman、Verdana）。重新启动后，现在一切似乎都工作正常。

这让我觉得这是最天真的解决方案，但它也最容易实现恕我直言。

* * *

## 回答 #16

> 赞同：-1
> 
> 时间：2021-05-27T23:02:49.960

作为快速测试此错误是否是字体相关问题的结果，您可以尝试不使用任何文本进行绘图（请参见下面的代码）。如果第二个无文本情节有效并且您在 Mac 上，我使用与其他人类似的方法并执行以下操作：

1.  点击 Command-Space 并键入`Font Book`以打开该应用程序
2.  右键单击 Arial 并选择`Disabled Arial`
3.  右键单击 Arial 并选择`Enable Arial`
4.  提示`Resolve Duplicates`选择时`Resolve Automatically`
5.  退出 RStudio 并重新打开 RStudio（我不需要重新启动计算机）
6.  重新运行一些绘图代码，它工作正常，没有错误

```
 # test whether error is being generated by a font issue

    library(ggplot2)

    # this fails with font issue
    mtcars %>% 
      ggplot() + 
        aes(x = wt, y = mpg) + 
        geom_point()

    # remove all fonts to test if issue is font-related
    mtcars %>% 
      ggplot() + 
        aes(x = wt, y = mpg) + 
        geom_point() + 
        theme(text = element_blank()) 
```

# python - 如何保存 etree xml 对象？保存加载 lxml etree 对象问题

> ID：10581444
> 
> 赞同：6
> 
> 时间：2012-05-14T10:19:31.580
> 
> 标签：python, lxml

我有一个名为 projectxml 的 etree 对象：

```
projetxml type <type 'lxml.etree._Element'> 
```

我需要将它保存在磁盘上，所以我将它转换为元素树：

```
savedxml=et.ElementTree(projetxml)
savedxml.write('/home/simon/Vysis.xml') 
```

另一个脚本必须加载 Vysis.xml 和其他两个同类文件：

```
vysis=et.parse('/home/simon/Vysis.xml')
asi=et.parse('/home/simon/ASI.xml')
psi=et.parse('/home/simon/PSI.xml') 
```

现在 asi、psi 和 vysis lxml 对象属于以下类型：

```
<lxml.etree._ElementTree object at 0xa7eaf8c> 
```

我的问题是我不能再做：

```
R=et.Element('DataBase')
R.append(asi)
R.append(psi)
R.append(vysis) 
```

由于错误：

```
R.append(asi)
  File "lxml.etree.pyx", line 697, in lxml.etree._Element.append (src/lxml  /lxml.etree.c:35471)
TypeError: Argument 'element' has incorrect type (expected lxml.etree._Element, got lxml.etree._ElementTree) 
```

我想我有两个解决方案。第一个可能是避免将 etree.Element 转换为 etree.ElementTree 并“直接”保存它，但我不知道如何。第二种解决方案是将 etree.ElementTree 转换为 etree.Element 类型...应该有一个干净的解决方案来保存/加载 xml 对象？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-14T11:01:51.557

[parse 函数](http://lxml.de/tutorial.html#the-parse-function)返回一个，而`ElementTree`不是一个`Element`。如果要使用`parse`as 元素的结果，则需要调用`getroot`.

```
vysis=et.parse('/home/simon/Vysis.xml').getroot()
asi=et.parse('/home/simon/ASI.xml').getroot()
psi=et.parse('/home/simon/PSI.xml').getroot()

R=et.Element('DataBase')
R.append(asi)
R.append(psi)
R.append(vysis) 
```

# c# - 向所有 TraceSources 添加/删除 TraceListener

> ID：10581448
> 
> 赞同：17
> 
> 时间：2012-05-14T10:20:04.313
> 
> 标签：c#, logging, .net-3.5, trace, tracelistener

我正在寻找一种为所有现有 TraceSources 添加和删除 TraceListener 的方法。

（我不确定我的方法在这里是否正确，我还可以使用哪些其他方法？基本上我想将所有跟踪输出记录到使用当前项目名称作为文件名的文件中。每当用户创建或重新打开项目时，我想将日志附加到正确的文件。一次只能打开一个项目。）

代码示例：

我在我的应用程序中创建了几个 TraceSource，每个类一个

```
public class Class1
{
    private static readonly System.Diagnostics.TraceSource trace = 
            new System.Diagnostics.TraceSource("Class1");
}

public class Class2
{
    private static readonly System.Diagnostics.TraceSource trace = 
            new System.Diagnostics.TraceSource("Class2");
} 
```

我现在想在运行时向我的所有 traceSources 添加或删除一个 traceListener，如下所示：

```
private System.Diagnostics.TextWriterTraceListener myListener;

private onProjectOpen()
{
    // user created a new project or opened an existing one
    myListener = new System.Diagnostics.TextWriterTraceListener("log-"+projectname+".log");
    ALL_TRACESOURCES.Add ( myListener) ; // <-- how to do this?
}

private onProjectClose()
{
    // user closed a project
    ALL_TRACESOURCES.Remove( myListener) ; // <-- how to do this?
    myListener.Flush();
    myListener.Close();
    myListener.Dispose(); // <-- not sure if all this is neccessary
} 
```

到目前为止，如果不公开我所有的 traceSources（似乎是个坏主意），然后像这样列出我的所有类，我发现没有办法做到这一点：

```
Class1.Trace.Add( myListener );
Class2.Trace.Add( myListener );
... 
```

这在几个层面上似乎是一个糟糕的设计选择。

或者

将我所有的 TraceSources 添加到每个类的构造函数中的自定义全局集合中（容易忘记/搞砸；全局变量不好）

有没有更好的办法？基本上我正在寻找一种方法来设置另一个默认监听器

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2015-07-16T19:21:23.300

基于[这个 StackOverflow 答案](https://stackoverflow.com/questions/3303126/how-to-get-the-value-of-private-field-in-c)和[这个答案](https://stackoverflow.com/questions/23664573/tracesource-and-tracelistener-quietly-fail-to-do-anything)

这是一种方法：

```
 private static void AttachToAllTraceSources(TraceListener yourListener)
    {
        TraceSource ts = new TraceSource("foo");
        List<WeakReference> list = (List<WeakReference>)GetInstanceField(typeof(TraceSource), ts, "tracesources");
        foreach(var weakReference in list)
        {
            if(weakReference.IsAlive)
            {
                TraceSource source = (weakReference.Target as TraceSource);
                if(source != null && source.Name != "foo")
                {
                    source.Listeners.Add(yourListener);
                }
            }
        }
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T17:41:22.463

在 .NET 4 及更高版本中，您可以在配置侦听器后使用[Lazy<>](http://msdn.microsoft.com/en-us/library/dd642331.aspx)延迟加载 TraceSource。请参阅以下工作示例程序：

```
public static class TraceSources
{
    public static TraceSource Create(string sourceName)
    {
        var source = new TraceSource(sourceName);
        source.Listeners.AddRange(Trace.Listeners);
        source.Switch.Level = SourceLevels.All;
        return source;
    }
}

public class Class1
{
    private static readonly Lazy<TraceSource> trace = new 
            Lazy<TraceSource>(() => TraceSources.Create("Class1"));

    public void DoSomething()
    {
        trace.Value.TraceEvent(TraceEventType.Information, 1, "Class1 speaking up");
    }
}

public class Class2
{
    private static readonly Lazy<TraceSource> trace = new
            Lazy<TraceSource>(() => TraceSources.Create("Class2"));

    public void DoSomethingElse()
    {
        trace.Value.TraceEvent(TraceEventType.Information, 2, "Class2 speaking out");
    }
}

public class Program
{
    static void Main(string[] args)
    {
        try
        {
            var listener = new TextWriterTraceListener(@"C:\trace.txt");
            Trace.Listeners.Add(listener);

            var classOne = new Class1();
            var classTwo = new Class2();
            classOne.DoSomething();
            classTwo.DoSomethingElse();
        }
        finally
        {
            Trace.Close();
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2021-05-29T05:39:20.190

好的，我参加这个聚会的时间太晚了——很难相信七年后，有人还在为获取系统中的所有跟踪源而苦苦挣扎（并且在任何地方都找不到好的答案）。

这是查找所有跟踪源的反射方法：

```
 /// <summary>
    /// Get all trace sources instantiated by the current process.
    /// </summary>
    /// <remarks>
    /// This is  reaching into a part of the .Net code that Microsoft haven't given public access to, that's not part of their API.
    /// Found from inspection of the .Net (4.8) reference source that the TraceSource class holds a static cache of all trace sources, and the names of the corresponding members.
    /// </remarks>
    /// <returns>List of all current trace sources</returns>
    public static List<TraceSource> GetAll()
    {
        var result = new List<TraceSource>(); 
        var privateStaticMethods = typeof(TraceSource).GetMethods(BindingFlags.Static | BindingFlags.NonPublic);
        var pruneMethod = privateStaticMethods.FirstOrDefault(m => m.Name == "_pruneCachedTraceSources");
        var privateStaticFields = typeof(TraceSource).GetFields(BindingFlags.Static | BindingFlags.NonPublic);
        var tracesourcesField = privateStaticFields.FirstOrDefault(f => f.Name == "tracesources");
        if (tracesourcesField != null)
        {
            var tracesourceValue = tracesourcesField.GetValue(null);
            var tracesources = tracesourceValue as List<WeakReference>;
            if (tracesources != null)
            {
                lock (tracesources)
                {
                    if (pruneMethod != null)
                    {
                        pruneMethod.Invoke(null, new object[] { });
                    }
                    for (int i = 0; i < tracesources.Count; i++)
                    {
                        var target = tracesources[i].Target;
                        TraceSource tracesource = target as TraceSource;
                        if (tracesource != null)
                        {
                            result.Add(tracesource);
                        }
                    }
                }
            }
        }
        return result;
    } 
```

目前使用 .Net Framework 4.8，它可以工作；我没有用 5 尝试过。也许值得注意的是，如果您管理自己的所有跟踪源列表，那么您将加倍。

使用它来获取所有跟踪源。也许过滤你想要的那些。然后将您的跟踪侦听器添加到所有这些侦听器中。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-09-03T01:46:01.257

我自己也遇到过这个问题。就我而言，我还在每个类中创建了跟踪源。app.config 中的侦听器可以毫无问题地添加到所有源中，但是我需要在运行时添加一个特定的侦听器。这当然只适用于添加监听器的跟踪源。我看到了两个选项 - 创建单个跟踪源并将其传递给应用程序的其余部分（糟糕），或者在其他所有引用的帮助程序类中拥有一个静态跟踪源。所以我有：

`public class LogHelper { /// /// The trace source logger for the application. /// public static readonly TraceSource Logger = new TraceSource("FruityBlergs", SourceLevels.All); }`

LogHelper 类还设置了侦听器和在运行时配置的各种其他过滤器。到目前为止，这对我来说效果很好。如果由于某种原因某个特定类需要不同的行为，您仍然可以在该类中创建跟踪源。

# c++ - 使用 OpenCv 检测图像中的矩形明亮区域

> ID：10581451
> 
> 赞同：5
> 
> 时间：2012-05-14T10:20:05.977
> 
> 标签：c++, algorithm, image-processing, opencv

我之前问过一个问题 [Marking an interest point in an image using c++](https://stackoverflow.com/questions/10476416/marking-an-interest-point-in-an-image-using-c). 我使用了相同的解决方案，并使用自适应阈值和[Blob 检测算法](http://geekblog.nl/entry/24)（生长区域）获得了所需的点。我有原始源图，我想在其中检测中心的矩形区域

# 原图：

![原始图像](../Images/77e69bff783d520072a7283decc7e761.png).但是在我使用算法之后，我得到了这样的东西（如果你在新标签中打开它，细节是可见的）

# 标记图像：

![在此处输入图像描述](../Images/8db3119753b9aa9dc1931fa87c17ec0c.png)除了矩形区域外，还可以看到明亮的日光照射点。我使用了双边过滤，但仍然无法检测到矩形区域。但是该算法适用于背景更暗的夜间图像。

有人可以建议我进行一些修改的相同算法是否足够或任何其他有效的方法可用..

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-14T18:59:53.793

使用*模糊*和*阈值*的简单组合，我设法得到了这个结果（调整大小以供查看）：

![](../Images/d94518354a836b3a83c0bfde50d49c3f.png)

之后，应用*侵蚀*和[squares.cpp 技术](https://stackoverflow.com/a/8863060/176769)（来自 OpenCV 的示例）输出：

![](../Images/07edec6c0706f4059ee3ad0fe959907e.png)

这几乎是您正在寻找的结果：矩形的底部已成功检测到。您需要做的就是**增加**检测到的矩形（红色正方形）的高度以适合您感兴趣的区域。

代码：

```
Mat img = imread(argv[1]);

    // Blur
Mat new_img = img.clone();
medianBlur(new_img, new_img, 5);

// Perform threshold
double thres = 210;
double color = 255;
threshold(new_img, new_img, thres, color, CV_THRESH_BINARY);
imwrite("thres.png", new_img);

// Execute erosion to improve the detection
int erosion_size = 4;   
Mat element = getStructuringElement(MORPH_CROSS,
                                   Size(2 * erosion_size + 1, 2 * erosion_size + 1),
                                   Point(erosion_size, erosion_size) );
erode(new_img, new_img, element);
imwrite("erode.png", new_img);

vector<vector<Point> > squares;
find_squares(new_img, squares);
std::cout << "squares: " << squares.size() << std::endl;

draw_squares(img, squares);

imwrite("area.png", img); 
```

**编辑**：

该`find_squares()`函数返回一个向量，其中包含图像中找到的所有正方形。因为它迭代图像的每个通道，所以在您的示例中，它成功检测到每个通道中的矩形区域，因此打印`squares.size()`输出`3`。

由于*正方形*可以被视为 4 (X,Y) 坐标的向量，OpenCV 将此概念表示为`vector<Point>`允许您访问坐标的 X 和 Y 部分。

现在，打印`squares`显示这些点是在逆时针方向检测到的：

```
1st ------ 4th
 |          |
 |          |
 |          |
2nd ------ 3rd 
```

按照这个例子，很明显，如果你需要增加矩形的高度，你需要改变第 1 点和第 4 点的 Y：

```
for (int i = 0; i < squares.size(); i++)
{
    for (int j = 0; j < squares[i].size(); j++)
    {
    //  std::cout << "# " << i << " " << squares[i][j].x << ","<< squares[i][j].y << std::endl;
        if (j == 0 || j == 3)
            squares[i][j].y = 0;
    }
} 
```

![](../Images/8acea4ef7eca30bba76094b81ec18aba.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-14T10:35:52.050

在上面显示的图像中，我建议

1.  正常的阈值操作应该可以很好地工作，或者

2.  逐行链码“计算”或

3.  在直方图中找到梯度。

会有很多其他的解决方案。如果这是一致的，我会考虑减去背景阴影。

# javascript - 为什么我的文字没有 改变？

> ID：10581455
> 
> 赞同：0
> 
> 时间：2012-05-14T10:20:21.233
> 
> 标签：javascript, jquery, html, query-string

我有一个函数，它从查询字符串中获取一个值并将其放入**p**元素中：

```
var globalCodice = querystring('codice');
var globalCodiceTesto = globalCodice.valueOf();
var myOfferta = $('#currentOfferta');

$('#currentOfferta').text(globalCodiceTesto); //THIS DOES NOT WORK 
```

其中**globalCodice**是从该方法获得的 queryString：

```
function querystring(key) {
   var re=new RegExp('(?:\\?|&)'+key+'=(.*?)(?=&|$)','gi');
   var r=[], m;
   while ((m=re.exec(document.location.search)) != null) r.push(m[1]);
   return r;
} 
```

标记：

```
<!-- header -->

    <div id='titleHeader' class='header'>
        <h3>Dettaglio Offerta</h3>
        <p id='currentOfferta' style='color:white !important'>OMFG</p>
    </div><!-- /header --> 
```

但最终文本永远不会改变。我尝试了不同的东西，但似乎没有任何效果。为了完成这项工作，有人有什么要与我分享的吗？

编辑： globalCodice 和 globalCodiceTesto 被正确检索，作为 p 元素。唯一不起作用的是 .text() 行。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-14T10:23:46.727

你有没有尝试过：

```
$(document).ready(function() {
  $('#currentOfferta').text(globalCodiceTesto);
}); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-14T10:29:18.813

做

```
typeof(globalCodiceTesto) 
```

返回`String`？如果你这样做会发生什么

```
$('#currentOfferta').text("af"); 
```

?

# javascript - Fabric.js 在初始化后将我的画布大小更改为 300x150

> ID：10581460
> 
> 赞同：53
> 
> 时间：2012-05-14T10:20:36.477
> 
> 标签：javascript, canvas, fabricjs

HTML：

```
 <div class="canvas-wrapper">
    <canvas id="myCanvas"></canvas>
  </div> 
```

CSS

```
.canvas-wrapper {
    width: 900px;
    min-height: 600px;
 }

 #myCanvas{
     border:1px solid red;
     position: absolute;
     top:22px;
     left:0px;
     height: 100%;
     width: 99%;
 } 
```

JS

```
var myCanvas = new fabric.Canvas('myCanvas'); 
```

我的画布在初始化后被调整为 300x150，为什么？

* * *

## 回答 #1

> 赞同：79
> 
> 时间：2013-01-09T10:51:43.627

在最新版本中，您必须执行以下操作：

```
var canvas = new fabric.Canvas('myCanvas');
canvas.setHeight(500);
canvas.setWidth(800); 
```

....你的代码....

```
canvas.renderAll(); 
```

对我来说很好..

对于动态改变大小，这也适用

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2012-05-15T10:38:51.750

初始化画布时，Fabric 读取画布元素上的宽度/高度属性或获取传入选项的宽度/高度。

```
var myCanvas = new fabric.Canvas('myCanvas', { width: 900, height: 600 }); 
```

或者：

```
<canvas width="900" height="600"></canvas>
...
var myCanvas = new fabric.Canvas('myCanvas'); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-10-05T19:17:13.710

这个问题的真正答案——不涉及新的静态大小，但实际上允许 CSS 有效——是以下选项之一：

1.  在 CSS 中，您可以覆盖单个属性并使用 !important; 跟随它们。这样做的缺点是任何进一步的定义也必须使用 !important 否则它们将被忽略：

```
[width], [height], [style]
{
  width:      100vw!important;
  min-height: 100vh!important;
} 
```

2.  使用 JQuery，您可以将内联属性值设置为空字符串。您大概可以在没有 JQuery 的情况下实现这一点，但我将把它作为练习留给您。

Javascript（JQuery）：

```
$('[style]').attr(  'style',  function(index, style){  return ''; });
$('[height]').attr( 'height', function(index, height){ return ''; });
$('[width]').attr(  'width',  function(index, height){ return ''; }); 
```

CSS：

```
*, *:before, *:after
{
  box-sizing: border-box;
}

body
{
  width:      100vw; 
  min-height: 100vh;
  padding:    0;
  margin:     0;
}

.canvas-container,
canvas
{
  width:      inherit; 
  min-height: inherit;
}

canvas.lower-canvas
{
  position: absolute;
  top:      0;
} 
```

之后，CSS 将按预期应用。

显然也有必要将更改告诉 Fabric：

```
function sizeCanvas()
{
  var width  = Math.max(document.documentElement.clientWidth,  window.innerWidth  || 0);
  var height = Math.max(document.documentElement.clientHeight, window.innerHeight || 0);
  canvas.setHeight( height )
  canvas.setWidth( width )
}

window.addEventListener('resize', draw, false);

function initDraw()
{
  // setup
}

function draw()
{  
  canvas.renderAll();  
}

sizeCanvas();
initDraw(); 
```

这会将 Fabric 配置为视口大小，并在调整大小时保持相应大小。

值得注意的是，这个问题的出现有两个原因：

1.  有人认为使用内联样式是一个好主意，应该受到严厉的谴责，因为在任何情况下这是不合适的做法。

2.  Fabric 更改了 DOM 排列并将原始画布嵌套在具有第二个嵌套画布的新 div 中，这可能会导致意外。

# jquery - 在Jquery的标题中添加图像

> ID：10581462
> 
> 赞同：-1
> 
> 时间：2012-05-14T10:20:46.210
> 
> 标签：jquery, image, header

我想在 Jquery 的标题中设置一个图像。这是我的源代码

```
that.setLanguageViewHeader = function() {

    str =   that.getRole();
    str +=  '<h2>The Unit</h2>' +
            '<ul>' +
            '  <li><a id="navMyAccount" >My Account</a><span>|</span></li>' +
            '</ul>' +
            '<div class="clearbth"></div>';
    $('#loggedInHeader').html(str);

}; 
```

不在这里我想设置一个图像而不是我的帐户链接。请告诉我该怎么做

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T10:22:32.667

用这个：

```
$('#loggedInHeader').html('<img src="..." />'); 
```

# c# - 使用 NEST C# 客户端搜索 ElasticSearch

> ID：10581464
> 
> 赞同：6
> 
> 时间：2012-05-14T10:20:56.820
> 
> 标签：c#, elasticsearch, nest

我开始四处寻找搜索引擎，经过阅读后我决定使用 ElasticSearch（这非常棒:)），我的项目在 C# 中，所以我四处寻找客户并开始使用[NEST](https://github.com/Mpdreamz/NEST)，一切都很简单，但我是在搜索部分有点困惑。

我想搜索**特定类型的****所有字段**，我想出的是以下代码：

 **```
elasticClient.Search<NewType>(s => s.Query(q => q.QueryString(d => d.Query(queryString)))); 
```

我看到很多字符串查询搜索已被弃用，并想确保上面是正确的方法（上面没有标记为不推荐使用......）而且对于一个简单的任务来说它有点长所以也许任何人知道另一种方法。

谢谢

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-14T11:18:04.087

我只使用字符串查询版本：使用 C# 匿名类型创建我的查询对象并将其序列化为 JSON。

这样，我可以直接从所有 JSON 查询示例中进行映射，无需转换为这个“查询 DSL”。

Elasticsearch 本身发展非常迅速，因此这种查询 DSL 必然会缺少一些特性。

编辑：示例：

```
var query = "blabla";
var q = new
        {
            query = new
            {
                text = new
                {
                    _all= query
                }
            }, 
            from = (page-1)*pageSize, 
            size=pageSize
        };
        var qJson = JsonConvert.SerializeObject(q);
        var hits = _elasticClient.Search<SearchItem>(qJson); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-04T20:51:30.720

只是为了确认

`elasticClient.Search<NewType>(s => s.Query(q => q.QueryString(d => d.Query(queryString))));`

是首选的搜索方式，而且感觉有点长的事实是因为您可以使用很多在这里没有使用的选项。我总是对缩短它的建议持开放态度！

字符串重载已被弃用，但不会从 NEST 中删除。我将更新过时的消息以明确提及这一点。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-08-24T16:57:32.840

如果上面的匿名类型不适合您，您可以使用 json.net 中的 JObjects 并以这种方式构建您的查询。然后你可以用上面同样的方式运行它。

```
JObject query = new JObject();
query["query"] = new JObject();
query["query"]["text"] = new JObject();
query["query"]["text"]["_all"] = searchTerm;
query["from"] = start;
query["size"] = maxResults;
string stringQuery = JsonConvert.SerializeObject(query);
var results = connectedClient.SearchRaw<SearchItem>(stringQuery); 
```

我更喜欢这种方式，因为 ES 中的 DSL 使用 C# 中的保留关键字，例如 bool，所以我不必进行任何转义。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-03-14T14:30:01.610

使用 ElasticSearch 2.0，我必须在 Search 方法中使用 SearchResponse<NewType>，如下所示：

```
var json = JsonConvert.SerializeObject(searchQuery);
var body = new PostData<object>(json);
var res = _elasticClient.Search<SearchResponse<NewType>>(body);
IEnumerable<NewType> result = res.Body.Hits.Select(h => h.Source).ToList(); 
```

希望它有所帮助。

注意：我发现关于 PostData 类及其泛型类型参数的文档很少**

# php - $GLOBALS = 数组（）；？

> ID：10581467
> 
> 赞同：1
> 
> 时间：2012-05-14T10:21:01.713
> 
> 标签：php

`$GLOBALS`简单地设置为空数组有什么问题吗？我想扭转`register_globals`它在哪里打开并且一个人无权访问`.ini`文件的效果，而不是遍历每个相关的超级全局变量并在必要时取消设置，跳过这样的元素`$GLOBALS['_POST']`，`$GLOBALS['_GET']`如通常所做的那样，我想知道是否可以将它们全部删除。

有没有可能由此产生的问题？我不打算引用`$GLOBALS`数组，因为任何与范围无关的变量要么设置在相关的超级全局（`$_GET`,`$_POST`等）中，要么存储为相关注册表类的属性。

有关信息，[http](http://www.php.net/manual/en/faq.misc.php#faq.misc.registerglobals) ://www.php.net/manual/en/faq.misc.php#faq.misc.registerglobals 上的常见问题解答具有以下模拟`register_globals = 0`：

```
<?php
// Emulate register_globals off
function unregister_GLOBALS()
{
    if (!ini_get('register_globals')) {
        return;
    }

    // Might want to change this perhaps to a nicer error
    if (isset($_REQUEST['GLOBALS']) || isset($_FILES['GLOBALS'])) {
        die('GLOBALS overwrite attempt detected');
    }

    // Variables that shouldn't be unset
    $noUnset = array('GLOBALS',  '_GET',
                     '_POST',    '_COOKIE',
                     '_REQUEST', '_SERVER',
                     '_ENV',     '_FILES');

    $input = array_merge($_GET,    $_POST,
                         $_COOKIE, $_SERVER,
                         $_ENV,    $_FILES,
                         isset($_SESSION) && is_array($_SESSION) ? $_SESSION : array());

    foreach ($input as $k => $v) {
        if (!in_array($k, $noUnset) && isset($GLOBALS[$k])) {
            unset($GLOBALS[$k]);
        }
    }
}

unregister_GLOBALS();

?> 
```

大概执行`unset($GLOBALS[$k]);`与执行相同，`$GLOBALS = array();`只是后者删除了*所有内容*并且只涉及一行代码。

那么问题是： unset `$GLOBALS['_GET']`,`$GLOBALS['_PUT']`等是否不好（“不应取消设置的变量”如示例所述——真的是这样吗？）？

**更新：**

我在下面自己回答了这个问题。愚蠢的我没有早点尝试。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T10:25:09.517

PHP[手册](http://at2.php.net/manual/en/reserved.variables.globals.php)说

```
$GLOBALS — References all variables available in global scope 
```

如果以典型的 PHP 方式使用“参考”一词，则设置`$GLOBALS=array()`对您没有帮助，您需要：

```
foreach ($GLOBALS as $k=>$v) unset($$k); 
```

**编辑：**这可以扩展到

```
foreach ($GLOBALS as $k=>$v) 
  if (substr($k,0,1)!='_')
    unset($$k); 
```

只是为了安全！（没试过）

**编辑2：**

正如 Karoly 的评论，如果你在一个类或函数中这样做，你需要

```
foreach ($GLOBALS as $k=>$v) {
  global $$k;
  unset($$k);
} 
```

**编辑 3 被编辑了**

..因为它包含胖手指 - 意外的结果来自一个错字！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T11:00:56.810

我自己已经回答~~了一部分~~。我很愚蠢没有早点尝试：

```
$var = 'Hello, world!';

unset($GLOBALS['var']);

echo $var; // Notice: Undefined variable: var

$var = 'Hello, world!';

$GLOBALS = array();

echo $var; // Hello, world! 
```

因此，简单地设置`$GLOBALS`为空数组不会取消设置全局变量。它们需要明确地取消设置。

**更新：**

使用`unset($GLOBALS['_GET']);`与使用相同，`unset($_GET)`这绝对不是我想要的。问题已回答。

# actionscript-3 - Flex 移动 - Spark Chechbox 错误

> ID：10581471
> 
> 赞同：0
> 
> 时间：2012-05-14T10:21:09.240
> 
> 标签：actionscript-3, apache-flex, mobile

我正在使用 Flex SDK 4.6，当我尝试在舞台上添加 spark 复选框时出现非常奇怪的错误：

```
var cb:CheckBox = new CheckBox();
optionsList.addElement(cb); 
```

> TypeError：错误 #1009：无法访问空对象引用的属性或方法。在 spark.skins.mobile::CheckBoxSkin/drawBackground()[E:\dev\4.y\frameworks\projects\mobiletheme\src\spark\skins\mobile\CheckBoxSkin.as:162] 在 spark.skins.mobile。 supportClasses::MobileSkin/updateDisplayList()[E:\dev\4.y\frameworks\projects\mobiletheme\src\spark\skins\mobile\supportClasses\MobileSkin.as:313] 在 mx.core::UIComponent/validateDisplayList( )[E:\dev\4.y\frameworks\projects\framework\src\mx\core\UIComponent.as:8999] 在 mx.managers::LayoutManager/validateDisplayList()[E:\dev\4.y\ frameworks\projects\framework\src\mx\managers\LayoutManager.as:736] 在 mx.managers::LayoutManager/doPhasedInstantiation()[E:\dev\4.y\frameworks\projects\framework\src\mx\managers \LayoutManager.as:819] 在 mx.managers::

在 MXML 中创建 chechbox 时没有问题，但我需要在 AS 中创建多个实例，然后将它们添加到阶段。

有人知道我做错了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T15:41:14.963

我发帖是为了澄清评论中的一个误解，我相信这是错误的根源。去引用：

> 当我在 creationComplete 上添加复选框时，我检查了它是否有效，但在我的情况下，复选框是在调用 updateDisplayList 时在 creationComplete 之后添加的。

updateDisplayList() 在组件的生命周期中可能会被调用很多次。每次屏幕上的某些内容需要自我更新时都会调用它。updateDisplayList() 在调用 creationComplete 事件之前至少被调用一次，但是在某些情况下，对于某些组件，它可能会被调用更多次。

您共享的代码有点脱离上下文，但是您最终会得到很多复选框；因为每次 updateDisplayList() 迭代后都会创建一个新的复选框。我强烈建议您将孩子的创建移至 createChildren() 方法，而不是 updateDisplayList()。

这里有一些关于[Spark Flex Component LifeCycle](http://help.adobe.com/en_US/flex/using/WS460ee381960520ad-2811830c121e9107ecb-7fff.html)的文档和一些关于[MX Component LifeCycle](http://help.adobe.com/en_US/flex/using/WS2db454920e96a9e51e63e3d11c0bf68641-7ff0.html)的文档。

# android - Android openGL es 2.0 触摸和对象位置错误...无能为力

> ID：10581473
> 
> 赞同：0
> 
> 时间：2012-05-14T10:21:30.453
> 
> 标签：android, opengl-es, touch, coordinate

我的应用程序是在 android 上使用 openGL ES 2.0 制作的，我在对象位置更新方面遇到了相当严重的问题。我的游戏循环是这样的，绘制所有对象 --> 更新游戏对象位置 --> 迭代。但是，我有两种不同的位置更新：一种是基于计算的，当一个值足够低或足够高时，它会改变方向。另一种是基于触摸的，当用户在任何位置触摸和/或滑动屏幕时，对象将跟随。

现在来解决问题。当用户触摸屏幕和/或滑动时，应该只响应触摸的对象也会获得基于计算的对象的不断变化的 x 值，我不知道为什么会这样，因为它们使用完全不同的位置变量.

下面的代码是 GLsurfaceView 的摘录，显示了触摸位置值是如何传递到 GL 渲染器的

```
 public boolean onTouchEvent(MotionEvent e){
    if(e != null){
        if(e.getAction() == MotionEvent.ACTION_DOWN){
            x = e.getX();
            y = e.getY();
            if(_renderer != null){
                queueEvent(new Runnable(){

                    @Override
                    public void run() {

                        _renderer.touchInput(x, y);
                    }

                });
                return true;
            }
        }
        if(e.getAction() == MotionEvent.ACTION_MOVE){
            x = e.getX();
            y = e.getY();
            if(_renderer != null){
                queueEvent(new Runnable(){

                    @Override
                    public void run() {

                        _renderer.touchInput(x, y);

                    }

                });

            }

        } 
```

下面的代码是 GL 渲染器的摘录，它显示了触摸值如何进入渲染器并转换为世界坐标。

```
public void touchInput(float x, float y){
    y = (float)_view[3] - y;
    GLU.gluUnProject(x, y, -1.5f, _ModelMatrix, 0, _ProjectionMatrix, 0, _view, 0, touch_to_world_coords, 0);

    _world_x = touch_to_world_coords[0] * touch_to_world_coords[3];
    _world_y = touch_to_world_coords[1] * touch_to_world_coords[3];
} 
```

接下来是计算非触摸对象的新位置的代码

```
public void updateObjectCoords(){
    _test_x += 0.05f;
            _test_y += 0.05f;
} 
```

最后是来自渲染器的 onDrawFrame，我将其用作游戏循环。

```
public void onDrawFrame(GL10 glContext) {
    //Tell OpenGL to use this program when rendering.
    GLES20.glUseProgram(_current_shaderProgramHandle);

    GLES20.glClear(GLES20.GL_DEPTH_BUFFER_BIT | GLES20.GL_COLOR_BUFFER_BIT);

    //Sets the active texture unit to texture unit 0
    GLES20.glActiveTexture(GLES20.GL_TEXTURE0);
    //Bind the texture to current unit
    GLES20.glBindTexture(GLES20.GL_TEXTURE_2D, _TextureDataHandle);

    //Tells texture uniform sampler to use this texture in the shader by binding it to unit 0
    GLES20.glUniform1i(_TextureUniformHandle, 0);

    //Draw square, gets coordinates from gluUnproject method
    Matrix.setIdentityM(_ModelMatrix, 0);
    Matrix.translateM(_ModelMatrix, 0, _world_x, _world_y, -1.0f);
    drawSquare();

    //Draw square, gets coordinates from updateObjectCoords method
    Matrix.setIdentityM(_ModelMatrix, 0);
    Matrix.translateM(_ModelMatrix, 0, _test_x, _test_y, -1.0f);
    drawSquare();

    //GLES20.glUseProgram(_point_shaderProgramHandle);
    //drawLight();
    updateObjectCoords();

} 
```

编辑：注意到我的错误解释，所以我添加了这个，以便更清楚时会发生什么:)

（当立方体 1 获得触摸输入并且立方体 2 从 updateObjectCoords 获得坐标时）： 应用程序启动：一切按预期工作，立方体 2（updateObjectCoords one）按预期移动。用户触摸屏幕：立方体 2 继续按预期移动，立方体 1（触摸控制）坐标数据似乎与立方体 2 混合，因为它的移动看起来是立方体 2 的两倍大并且朝向相同的方向，您仍然可以稍微操作它但是它不是很响应。

（Cube2 是静态的，但是 updateObjectCoords 仍然处于活动状态，并在每一帧上调用以更新 _test_x 和 _test_y 的值）： 应用程序启动：一切如预期用户触摸屏幕：一切正常

因此，似乎正是cube2的不断重新定位干扰了cube1的定位。

希望这让事情变得更清楚！:)

为什么要绘制的一个对象的坐标会影响所有其他 translateM 的坐标？为什么所有其他对象都不受触摸坐标的影响？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T16:16:08.677

我通过将 cube1 的绘图与 cube2 切换来解决此问题。这似乎解决了一切。假设最后绘制触摸控制对象将结束干扰：D

# c - 归档结构 / C

> ID：10581483
> 
> 赞同：1
> 
> 时间：2012-05-14T10:21:57.443
> 
> 标签：c, file, struct

填写信息后出现错误。我不知道我在哪里出错了。我想通过结构获取信息，然后保存在 biodata.txt 文件中。这只是为了启动我的程序，然后我将添加“删除编辑搜索”选项。

```
#include <stdio.h>
#include <conio.h>

struct biodata{
       int recno,age;
       char name[20],sex;
       float salary;
}obj;

int main(){
    int addData();
    int showRecord();
    char choice;

    while(1){
        printf("\n\n*****CHOOSE YOUR CHOICE*****\n");
        printf("1) ADD DATA\n");
        printf("2) SHOW RECORD\n");
        printf("Enter your choice : ");

        choice = getche();
        switch(choice){
            case '1' :  
                addData();
                break;
        }
    }
}

int addData(){
     FILE *fp;
     fp = fopen("biodata.txt","w+");

     printf("\n*****ADDING DATA*****\n");
     printf("\nEnter Record No : ");
     scanf("%d",&obj.recno);
     printf("Enter Name : ");

     scanf("%s",obj.name);
     printf("Enter age : ");
     scanf("%d",&obj.age);

     printf("Enter Sex : ");
     scanf("%s",obj.sex);

     printf("Enter Salary : ");
     scanf("%f",&obj.salary);
     fwrite(&obj,sizeof(obj),1,fp);

     fclose(fp);
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-14T10:24:23.337

你正在做：

```
printf("Enter Sex : ");
scanf("%s",obj.sex); 
```

但是 obj.sex 是 char 类型：

```
struct biodata{
        int recno,age;
        char name[20],sex;
        float salary;
}obj; 
```

将 scanf 更改为：

```
scanf("%c",&obj.sex); 
```

# ruby-on-rails - 特殊字符 & 被打印为 &

> ID：10581485
> 
> 赞同：3
> 
> 时间：2012-05-14T10:22:13.450
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, ruby-on-rails-3.1

在我的`index.html.erb`页面中，当从 MSSQL 查询数据时，它会显示为 `Me&amp;Mine`. 我试过这个：

```
$("#3").text("<%= escape_javascript(raw render(:partial => "var") %>"); 
```

但它不起作用。

index.html.erb ：

```
<%= link_to "Link", {:action => "AjaxView",:col => "colname"}, 
        :update => "Ajaxcall", :remote => true %>
<tr>
<td id="#3" style="height:25px">data displayed here</td> 
```

控制器：

```
def AjaxView
  @vars= Var.find(:all,:conditions => { :varName=> "one" },:select=>(params[:col]))
  respond_to do |format|
    format.js { render :layout=>false }
  end
end 
```

AjaxView.js.erb：

```
 if ( @col.to_s == "colName") {
   $("#3").text("<%= escape_javascript(render(:partial => "var") %>");
 }
 elsif ( @col.to_s == "colName1")
 {
   $("#2").text("<%= escape_javascript(render(:partial => "var") %>");
 } 
```

_var.html.erb：

```
<%= var.col1 %> 
```

我怎样才能显示`Me&Mine`而不是`Me&amp;Mine`？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-14T10:49:40.533

你试过在上面使用[html_safe](http://apidock.com/rails/String/html_safe)吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-02-21T10:27:25.893

转换这个：

```
$("#3").text("<%= escape_javascript(raw render(:partial => "var") %>"); 
```

到：

```
$("#3").html("<%= escape_javascript(raw render(:partial => "var") %>"); 
```

它会正常工作。

这是因为当您使用没有任何格式的纯文本“文本”时，它无法呈现“&”并打印其原始形式。但是使用 HTML 会用标记/格式呈现它。

# c# - 自定义日期时间格式

> ID：10581487
> 
> 赞同：1
> 
> 时间：2012-05-14T10:22:14.840
> 
> 标签：c#, .net, datetime, date-format, date-formatting

什么是日期时间格式`"2011-09-12T10:28:55Z"`？如何使用 ToString() 获取它？我在微软的文档中没有得到任何关于它的信息。没有类似的东西。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-14T10:24:22.740

您可以使用 ToString 来获得它：

```
var text = date.ToString("yyyy-MM-dd'T'HH:mm:ss'Z'",
                         CultureInfo.InvariantCulture); 
```

不幸的是，我不相信有一个标准的日期/时间格式可以涵盖这一点。

当然，如果它还不是 UTC 日期/时间，那么它就会撒谎（这就是“Z”位的含义）。当然，您可以调用`DateTime.ToUniversalTime()`转换它。

# java - 在语义 Web 应用程序中将 URI 作为请求参数处理

> ID：10581491
> 
> 赞同：3
> 
> 时间：2012-05-14T10:22:37.413
> 
> 标签：java, uri, semantic-web, jena

在过去几年中，在许多应用程序中，我使用 RDF 作为数据模型并使用 Jena 来管理和查询数据。对于新应用程序，我尝试将应用程序设计为 RESTful，并且应用程序中的 URL 通常在 RDF 中有一些表示。例如：

[http://example.com/foo/bar/1/](http://example.com/foo/bar/1/)

但是，有时您需要在请求参数中从 servlet 向下钻取或调用 URI：

[http://example.com/foo/bar/1/?id=http://example.com/foo/bar/xyz/](http://example.com/foo/bar/1/?id=http://example.com/foo/bar/xyz/)

URL 变得非常丑陋和不友好，尤其是在编码时：

[http://example.com/foo/bar/1/?id=http%3A%2F%2Fexample.com%2Ffoo%2Fbar%2Fxyz%2F](http://example.com/foo/bar/1/?id=http%3A%2F%2Fexample.com%2Ffoo%2Fbar%2Fxyz%2F)

设计中有最佳实践吗？我是否应该在可以查询的 RDF 中创建一个比 URI 更短的单独值？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-14T10:31:12.603

如果您有一组已知或已知的前缀，那么将 URI 缩写为 q-names 是我过去使用的一种模式：

```
http://example.com/foo/bar/1/?id=example:xyz 
```

在[链接数据 API](http://code.google.com/p/linked-data-api/wiki/Specification)中，可以在配置中声明实体的短名称，通常通过说明资源的哪个属性用于表示其短名称（例如：`rdfs:label`或`skos:notation`）。因此，该模式是使用少量配置信息通过 RDF 模型本身提供名称缩写。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-15T08:02:01.480

首先，在 answers.semanticweb.com 上查看类似的帖子：

*   [http://answers.semanticweb.com/questions/13756/passing-uris-as-parameters-best-practices](https://web.archive.org/web/20160524201820/http://answers.semanticweb.com:80/questions/13756/passing-uris-as-parameters-best-practices)

*   [http://answers.semanticweb.com/questions/16159/creating-dereferenceable-uris-for-new-resources](https://web.archive.org/web/20130831070750/http://answers.semanticweb.com/questions/16159/creating-dereferenceable-uris-for-new-resources)

*   [http://answers.semanticweb.com/questions/15037/tools-to-publish-dereferencable-linked-data](https://web.archive.org/web/20131011132837/http://answers.semanticweb.com:80/questions/15037/tools-to-publish-dereferencable-linked-data)

您可能需要考虑将资源存储在 SPARQL 端点中，使用以下重写规则使它们可取消引用：

```
RewriteCond %{HTTP_ACCEPT} (text/turtle|application/rdf+xml)
RewriteRule !^/sparql /sparql?query=CONSTRUCT\s{?s\s?p\s?o}\sWHERE\s{?s\s?p\s?o.\s<%{REQUEST_SCHEME}://%{HTTP_HOST}%{REQUEST_URI}%{QUERY_STRING}>\s?p\s?o} [L,R=303] 
```

我认为通常取消引用 URI 比将 URI 作为查询字符串传递要好得多。根据您的框架，您甚至可以使用 URI 作为域对象的主键（可能在 GRAILS 和 RAILS 上）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-14T10:31:41.917

不确定通常情况下您可以做很多事情。如果您对其他 Web 应用程序感兴趣，则已建立的标准是相对 URL，即针对请求 url 解析 id 参数：

```
http://example.com/foo/bar/1/?id=/foo/bar/xyz/
http://example.com/foo/bar/1/?id=../xyz/ 
```

（根据需要编码）

这有助于提供的示例，因为这两个 url 在同一个域中。否则我想你只需要接受完整的网址。

当然，前缀在 RDF 世界中是常用的，但除非您提供一种查找映射的方法，否则它感觉不是很 RESTful。

# javascript - GWT：在页面准备好之前开始运行（或者正文资源不会阻止运行 gwt）？

> ID：10581495
> 
> 赞同：5
> 
> 时间：2012-05-14T10:22:51.280
> 
> 标签：javascript, gwt

在我的 html 页面中有外部图像和闪光灯，有时它们加载缓慢。我的 gwt 应用程序总是在加载后开始运行。我使用**xsiframe**链接器。

在加载正文中的任何图像和资源之前，有什么方法可以开始运行 gwt？或者确保加载其他内容不会阻止启动 gwt。

编辑：我创建了一个重现问题的最小项目：

入口点：

```
public class MyEntryPoint implements EntryPoint {
    public void onModuleLoad() {
        Window.confirm("onModuleLoad");
    }
} 
```

html页面：

```
<html><head>
    <script type="text/javascript"src="nocache.js"></script>
</head><body>
    <!-- http://stackoverflow.com/questions/100841/artificially-create-a-connection-timeout-error -->
    <img src="http://10.255.255.1/timeout.gif" alt="timeout image" />
</body></html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T09:55:01.700

我能想到两种可能的解决方案：

### 1.xs链接器

您可以使用旧的“xs”链接器而不是“xsiframe”。这不是很好，特别是因为 xs 在开发模式下不起作用。但也许你可以在开发过程中使用 xsiframe，然后切换到 xs 进行真正的构建、测试和生产。

### 2.`<noscript>`标签技巧

`<noscript>`如果浏览器不支持 JavaScript，您可以将页面内容，尤其是缓慢加载的图像放入标签中。

但是，如果启用了 JavaScript，则在加载过程中会忽略该标记的内容。所以我们将在我们的 GWT 代码（可以再次使用 xsiframe 链接器）中将 noscript 标记的内容复制回真实页面。

这是一些快速代码：

```
<!doctype html>

<html>
  <head>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8">

    <script type="text/javascript" language="javascript"
            src="http://cdn.example.org/.../some.nocache.js"></script>
  </head>

  <body>

    <noscript>
      <p>A</p>
      <img src="http://10.255.255.1/timeout.gif" alt="timeout image" />
      <p>B</p>
    </noscript>

    <p>Test (should appear immediately if JavaScript is enabled)</p>
  </body>
</html> 
```

```
@Override
public void onModuleLoad() {

  final NodeList<Element> noscriptElems = 
      RootPanel.get().getElement().getElementsByTagName("noscript");

  final Element noscriptElem = noscriptElems.getItem(0);

  RootPanel.get().add(new Label("Here is GWT"));

  RootPanel.get().add(new HTMLPanel(noscriptElem.getInnerText()));
      /* Be careful of course, not to have bad html in your noscript elem */

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-22T06:10:52.557

首先，很抱歉当我对 GWT 不太了解时“回答”，并提出了一个非常丑陋的 hack。

现在，两个具有未定义结果的异步加载对我来说听起来像是一种竞争条件。所以我想说你需要“锁定”你的图像/闪存，直到应用程序加载并“解锁”它们。

一种方法可能是给所有资产一个虚拟属性而不是`src`，然后让应用程序将虚拟属性复制到真实的`src`. 它看起来像这样：

HTML 示例：

```
<img data-src="site.com/image.jpg" alt="loading..." /> 
```

入口点：

```
public class MyEntryPoint implements EntryPoint {
    public void onModuleLoad() {
        var images = document.getElementsByTagName('img');
        for(var i=0; i<images.length; ++i){
            var dataSrc = images[i].getAttribute('data-src');
            if(dataSrc) images[i].src = dataSrc;
        }
        // ... rest of your entry point code
    }
} 
```

也许你可以调整这样的东西来满足你的需要。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-23T09:55:35.810

~~由于您只遇到本地资源问题（呃！），我认为[使用 a`<base>`作为插件将是一个好主意](http://jsfiddle.net/ovfiddle/W6Zqm/1/)：~~

```
<head>
    <base id="src-plug" href="http://src-plug/"/>
    <script>
        function unplug(){
            setTimeout(function(){//or whatever; I guess ondomready
                var srcPlug = document.getElementById('src-plug');
                srcPlug.parentNode.removeChild(srcPlug);
            },5000);
        }
    </script>
</head> 
```

~~但显然在移除了基础之后，资源仍然需要重新加载一些愚蠢的东西~~

```
$('img').each(function(){
    $(this).attr('src',$(this).attr('src'));
}); 
```

大约在这一点之后，我意识到这个或**任何客户端解决方法都不是一个好主意**

相反，您为什么不通过不同的子域（类似于 CDN）来交付内容？为静态资源设置带有自定义缓存策略等的无 cookie 域通常是个好主意。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-09-12T16:58:09.487

我知道这是一个非常古老的问题，但在搜索此问题时，它仍然是谷歌的热门话题。

现在另一种解决方案就是将 loading="lazy" 添加到图像中。（不确定这是否适用于闪存）。

# ajax - 将值“”分配给 window.location.href

> ID：10581496
> 
> 赞同：0
> 
> 时间：2012-05-14T10:22:52.767
> 
> 标签：ajax, asp.net-mvc, url

我从 Ajax 调用一个方法。该方法返回字符串。方法完成后，我需要重定向 url。

```
success: function (data) {
                    window.location.href = data;
            } 
```

因此，一开始的 url 是 localhost:1111/Login/Index，如果 data != "" 一切正常。但是，如果 data = ""，那么我希望 window.location.href 是 localhost:1111/。现在，window.location.href 是 localhost:1111/Login。这该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T10:33:39.900

您可以按如下方式创建 URL：

```
success: function (data) {
    if (data == "") {
        data = window.location.protocol + "//" + window.location.host;
    }
    window.location.href = data;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T10:30:11.760

在没有主机的情况下发送 url，然后使用：

```
window.location.href = window.location.protocol + "//" + window.location.host +"/"+data 
```

# php - 获取从特定位置到字符串中最后出现的数字的子字符串

> ID：10581497
> 
> 赞同：0
> 
> 时间：2012-05-14T10:22:53.667
> 
> 标签：php, text-extraction

```
$str = "234 567 some text following"; 
```

如何从字符串中的第三个字符到最后一个数字获取子字符串？

```
$positionOfNewLeadingCharacter = 3; 
```

在上面的示例中，我希望`4 567`返回子字符串，而不是从第三个字符到字符串末尾。 `7`是样本字符串中最后出现的数字。

我实际应用程序中的字符串可能是文本和数字的混合。我需要将子字符串从已知位置提取到最后出现的数字的位置。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2021-10-16T07:41:50.600

你想要：

1.  通过指定应该成为新的第一个字符的字符的偏移量来从字符串的前面删除字符
2.  从字符串末尾删除零个或多个非数字字符。

这当然可以通过一次`preg_match()`调用来完成，但是该模式的人类可读性不是很好。

使用`substr()`是删除不需要的前导字符的好方法——只要确保起始偏移量永远不会小于零，否则你会得到意想不到的结果。我还没有在我的代码片段中构建多字节支持。

要从第 3 个字符开始，您必须从第 2 个偏移量开始减去 1。

至于从字符串末尾修剪零个或多个 ( `*`) 非数字字符 ( `\D`)，请使用字符串结尾锚 ( `$`)。

代码：（[演示](https://3v4l.org/kuXqb)）

```
$str = "234 567 some text following";

$start = 3;

var_export(
    preg_replace(
        '/\D*$/',
        '',
        substr($str, max($start, 1) - 1)
    )
); 
```

输出：

```
'4 567' 
```

更丑的`preg_match()`方式：（[演示](https://3v4l.org/sdjic)）

```
var_export(
    preg_match(
        '/.{' . max($start - 1, 0) . '}\K.*\d/',
        $str,
        $match
    )
    ? $match[0]
    : 'no match'
); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T10:24:49.657

你应该使用 substr 函数

```
substr($str, 2); 
```

编辑 ：

用正则表达式

```
$pattern = '/^[0-9]+/';
preg_match($pattern, substr($str, 2), $matches, PREG_OFFSET_CAPTURE, 3);
print_r($matches); 
```

EDIT2：经过测试并且可以正常工作

```
$pattern = '/^([0-9][ ]*)+/';
preg_match($pattern, substr($str, 2), $matches);
print_r($matches); 
```

EDIT3：没有看到你的最后一个编辑，建立一个新的^^

编辑4：

```
$str = "234 567 some text 123 22 following 12 something";
$pattern = '/^([ ]*([0-9][ ]*)*([a-zA-Z][ ]*)*[0-9]*)*[0-9]/';
preg_match($pattern, substr($str, 2), $matches);
echo $matches[0]; 
```

给我吗`4 567 some text 123 22 following 12`

这是你所期待的吗？

编辑 5：

又是新的^^

```
'/^([0-9 :._\-]*[a-zA-Z]*[:._\-]*)*[0-9]/' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-14T10:25:39.583

尝试这个：

```
substr($str,2,strlen($str)); 
```

编辑（**新答案**）：

此代码有效：

```
$str = preg_replace( "/\D/", "", $str);
echo substr($str,2); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-14T10:25:45.163

```
<?php
  $subStr = substr($str, 2);
?> 
```

默认情况下，长度（第三个参数）在省略时将默认为字符串的末尾。请注意，字符从 0 开始，因此第三个字符将位于位置 2。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-14T10:36:09.010

您可以通过在正则表达式中使用[负前瞻](http://www.regular-expressions.info/lookaround.html)来做到这一点。

```
<?php
    $lastNumber = getLastNumber("234 567 some text following");
    var_dump($lastNumber);

    function getLastNumber($string) {
        preg_match("/[0-9](?!.*[0-9])/", $string, $match);
        if (!empty($match[0])) return $match[0];
        return false;
    }
?> 
```

编辑：对不起，我看错了；以为你想要最后一个独立号码。

双重编辑：这似乎做你想做的事

```
<?php
    $string = substr("234 567 some text 123 22 following", 2);
    preg_match("/[0-9 ]+/", $string, $matches);
    if (!empty($matches)) {
        $number = intval(str_replace(" ", "", $matches[0]));
        var_dump($number);
    }
?> 
```

因为它返回“4567”。当然，如果您想要保留空间，只需使用`$matches[0]`而不是`$number`.

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-09-11T02:34:42.687

我只是偶然发现了这一点，并认为我会分享我的解决方案。

```
<?php
$string = "234 567 some text following";
$start = 2;
if(preg_match_all('/\d+/', $string, $sub)){
    $lastNumber = end($sub[0]);
    $newString = substr($string,$start, strrpos($string, $lastNumber) + strlen($lastNumber) - $start);
}
echo $newString; 
```

此行获取字符串中的所有数字

```
if(preg_match_all('/\d+/', $string, $sub)) 
```

在这里我们获取最后一个数字

```
$lastNumber = end($sub[0]); 
```

然后我们找到最后一次出现的数字，`strrpos`以防最后一个数字多次出现。然后，使用该位置提取从起始位置到最后一个数字的子字符串：

```
$newString = substr($string,$start, strrpos($string, $lastNumber) 
             + strlen($lastNumber) - $start); 
```

# javascript - 通过javascript从下拉列表中获取值而不使用表单

> ID：10581500
> 
> 赞同：0
> 
> 时间：2012-05-14T10:23:25.507
> 
> 标签：javascript, html

我有一个下拉文件，如下所示。

HTML 和 PHP

```
 <select id="selectform_0">
    <option value="0">1</option>
    <option value="1">2</option>
    <option value="2">3</option>
    <option value="3">4</option>
    <option value="4">5</option>
    </select>

<input type="button" onclick="selectValue(<?php echo $id; ?>)
"> 
```

和 Javascript

```
<script>
function selectValue(id)
{
  //take select value
  alert(selectvalue);
}
</script> 
```

无论如何，通过不使用**javascript来获取价值**`<form>`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T10:33:51.197

是的你可以。

**标记**

```
<select id='myselectform' name="selectform_0">
<option value="0">1</option>
<option value="1">2</option>
<option value="2">3</option>
<option value="3">4</option>
<option value="4">5</option>
</select> 
```

**JS**

```
 //If you want the values when an action takes place, say, onchange
    document.getElementById("myselectform").onchange = function(){
        alert(this.value)
    }
   //Or this way,
    var t = document.getElementById("myselectform");
    var selectedElem = t.options[t.selectedIndex].value;

   //Or if you just want the whole list of values then do something like this,
   var t = document.getElementById("myselectform").getElementsByTagName("option");

    for(var i=0,len=t.length; i<len; i++)
    {
      alert(t[i].getAttribute("value"))
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-14T10:44:43.053

试试这个

Javascript

```
<script>
function selectValue(id)
{ 
var obj = document.getElementById("selectform_"+id).options[document.getElementById("selectform_"+id).selectedIndex].value;
alert(obj);
}
</script> 
```

HTML

```
<select id="selectform_0">     
<option value="0">1</option>     
<option value="1">2</option>     
<option value="2">3</option>     
<option value="3">4</option>     
<option value="4">5</option>     
</select> 

<input type="button" onclick="selectValue(<?php echo $id; ?>) "> 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-05-14T10:35:56.593

你可以使用 jQuery

```
$("#myselectform").val(); 
```

或者

```
$("#myselectform").attr("selected"); 
```

# javascript - 如何基于引用者在外部域上使用 javascript 重定向页面和 js？

> ID：10581503
> 
> 赞同：0
> 
> 时间：2012-05-14T10:23:37.317
> 
> 标签：javascript, redirect, external, referer

我有一些网站`mysite1.com`, `mysite2.com`,....`mysiten.com`

全部`mysite1-n.com`使用外部javascript`myexternalsite.com/mainfile.js`

我想，

如果 ( `mysite1-n.com`) 访客来自`www.google.com`then 将重定向到`welcome.com`

如果 ( `mysite1-n.com`) 访客来自`www.yahoo.com`then 将重定向到`welcome2.com`

如果 ( `mysite1-n.com`) 访问者来自`www.anotherdomain.com`then 将调用 javascript`myexternalsite.com/file1.js`并使用此脚本工作

如果 ( `mysite1-n.com`) 访问者来自书签，则将调用 javascript`myexternalsite.com/file2.js`并使用此脚本工作

我应该使用什么样的脚本`myexternalsite.com/mainfile.js`？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T10:28:55.803

基本上你应该检查 document.referrer 值和 document.location.href 来实现你想要的。这与一堆正则表达式应该很容易做到这一点。

前任：

```
if( document.location.href.match(/^https?:\/\/mysite1-n.com/) ){
  if( document.referrer.match(/google.com/) ){
    window.location = 'http://welcome.com';
  }
  var s = document.createElement('script');
  s.src = 'myexternalsite.com/mainfile.js';
  document.head.appendChild(s);
} 
```

等等

# linux - 如何在 windows 环境下运行 Linux shell 脚本

> ID：10581506
> 
> 赞同：1
> 
> 时间：2012-05-14T10:23:48.257
> 
> 标签：linux, bash, shell, batch-file

我有在 Redhat 操作系统上运行的管家脚本。

我有一个要求，我想在 Windows 环境中运行相同的脚本。

所以我有3个选择

1.  为windows编写一个新脚本
2.  使用某些工具将 Linux 脚本转换为 Windows 脚本。
3.  使用 Cygwin 并运行脚本，而不对 linux 脚本进行任何更改。

所以我想知道什么是最好的选择。

提前感谢您的帮助

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-14T10:30:33.803

这取决于脚本的复杂程度、您是否要对它们进行更改以及现有脚本使用的实用程序。

如果脚本非常复杂，最好保留原始脚本并使用 Cygwin。

如果要来回维护脚本和端口更改，则需要使用原始版本（并使用 Cygwin）

如果脚本使用了一些尚未移植到 Cygwin 的 Unix 实用程序，您要么需要自己进行移植（以便能够保留原始脚本），要么将脚本转换为使用 Windows 等效（或类似）程序

所以我建议你在大多数情况下使用 Cygwin，除非脚本很容易转换为 Windows 批处理格式

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-14T10:27:00.550

你可以试试colinux

[http://www.colinux.org/](http://www.colinux.org/)

> Cooperative Linux 是第一个在 Microsoft Windows 上以最佳方式运行 Linux 的免费开源方法。更一般地说，Cooperative Linux（简称 coLinux）是 Linux 内核的一个端口，允许它与单个机器上的另一个操作系统协同运行。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-14T10:27:05.290

我会推荐选项 3，它是在 Windows 下运行相同脚本（假设脚本 = bash 脚本）的唯一方法。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-14T10:27:49.150

4：为windows安装一个BASH端口，例如[win-bash](http://win-bash.sourceforge.net/)
5：使用SUA/SFU，看[这个链接](http://www.suacommunity.com/SUA.aspx)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-14T10:28:58.797

如评论中所述，我想看看或知道脚本的作用。在 Windows 下，现在有几个脚本选项。（Powershell、vbscript、javascript、普通的旧批处理文件），但实际上这取决于原始脚本的作用。

恕我直言，安装整个 cygwin 或 bash 移植只是为了移动文件或执行其他琐碎任务，这简直是矫枉过正。

# php - Doctrine2 findOneBy 方法使用 JOINED 继承映射返回 null

> ID：10581509
> 
> 赞同：1
> 
> 时间：2012-05-14T10:23:56.977
> 
> 标签：php, inheritance, symfony, doctrine-orm

[我认为这可能是与这个问题](https://stackoverflow.com/q/9534162/713111)类似的问题，但我还不能发表评论，也不想通过提供无答案的答案来解决这个问题。

我正在制作一个评论 Symfony2 包，它允许我直接将评论与各种不同的实体类型相关联，所以我创建了一个抽象评论“线程”实体，然后由每个可以接收评论的对象类型的具体线程实体扩展.

例如，它需要可以评论 Story 实体，所以我创建了一个具体的 StoryThread 实体，它扩展了 Thread 并指定了一个链接到 Story 的 OneToOne 属性。这个想法是我可以做到`$storyThread->findOneBy('story', $story)->getComments();`。但是，findOneBy 始终返回 null。当我运行从调试中检索到的原始 SQL 并填写相关的 story_id 时，我确实得到了预期的结果。

这是抽象线程实体：

```
use Doctrine\ORM\Mapping as ORM;
use Gedmo\Mapping\Annotation as Gedmo;
use Doctrine\Common\Collections\ArrayCollection;

/**
 * @ORM\Entity(repositoryClass="Joe\Bundle\CommentBundle\Repository\ThreadRepository")
 * @ORM\Table(name="comment_threads")
 * @ORM\MappedSuperClass
 * @ORM\InheritanceType("JOINED")
 * @ORM\DiscriminatorColumn(name="thread_type", type="string")
 * @ORM\DiscriminatorMap( {"story" = "Joe\Bundle\StoryBundle\Entity\StoryThread"} )
 */
abstract class Thread
{
    /**
     * @ORM\Id
     * @ORM\Column(type="integer")
     * @ORM\GeneratedValue(strategy="AUTO")
     */
    protected $id;

    /**
     * @ORM\Column(type="boolean")
     */
    protected $enabled = true;

    /**
     * @var datetime $createdAt
     *
     * @Gedmo\Timestampable(on="create")
     * @ORM\Column(name="created_at", type="datetime")
     */
    protected $createdAt;

    /**
     * @ORM\OneToMany(targetEntity="Comment", mappedBy="thread_id", cascade={"persist"})
     * @param ArrayCollection $data
     */
    protected $comments;

    function __construct()
    {
        $this->comments = new ArrayCollection();
    } 
```

这是具体的 StoryThread 实体：

```
use Doctrine\ORM\Mapping as ORM;
use Joe\Bundle\CommentBundle\Entity\Thread as AbstractThread;

/**
 * @ORM\Entity(repositoryClass="Joe\Bundle\StoryBundle\Repository\StoryThreadRepository")
 * @ORM\Table(name="story_comment_threads")
 */
class StoryThread extends AbstractThread
{
    /**
     * @ORM\OneToOne(targetEntity="Story")
     * @ORM\JoinColumn(name="story_id", referencedColumnName="id")
     */
    protected $story;

    /**
     * @var datetime $createdAt
     */
    protected $createdAt;

    public function __construct()
    {
        $this->comments = new \Doctrine\Common\Collections\ArrayCollection();
    } 
```

最后，这是我尝试从给定 StoryThread 实体中检索 StoryThread 对象的方式：（getThreadEntityName 获取完全限定的 StoryThread 类名，getObjectColumn 返回用于将 ObjectThread 实体映射到它的对象的列的名称，所以在这个案例“故事”）

```
/**
 * @param CommentableInterface $object
 * @return AbstractThread
 */
public function findThreadByObject(CommentableInterface $object)
{
    /** @var $repository ThreadRepository */
    $repository = $this->em->getRepository($object->getThreadEntityName());

    $thread = $repository->findOneBy(array(
        $repository->getObjectColumn() => $object
    ));

    if (!$thread) {
        $thread = $this->createThread($object);
    }

    return $thread;
} 
```

这是在 findOneBy 方法中生成的 SQL：（当我将 ? 替换为实际的故事 ID 时，例如 1，我得到了一个我期望的结果）

`SELECT t1.id AS id2, t1.enabled AS enabled3, t1.created_at AS created_at4, t0.story_id AS story_id5, t1.thread_type FROM story_comment_threads t0 INNER JOIN comment_threads t1 ON t0.id = t1.id WHERE t0.story_id = ?`

谁能告诉我如何让 findOneBy 方法工作或另一种可行的方法？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T14:19:39.780

我原以为我需要提供对象，因为“故事”列指的是故事实体，但事实证明我只需要使用 id 代替：

```
$thread = $repository->findOneBy(array(
    $repository->getObjectColumn() => $object->getId()
)); 
```

# postgresql - Postgres 时态数据和 CREATE 表语法

> ID：10581510
> 
> 赞同：0
> 
> 时间：2012-05-14T10:24:04.853
> 
> 标签：postgresql, syntax, timestamp, precision, intervals

我有一个来自第 3 方的 CSV 文件，我想为其创建一个 Postgres 表。有几列带有时间戳样式信息，但精度不同。这是“已发布” 2012-05-07 04:04:05 “reportedtime” 2012-05-12 00:00:00.571395 两个字段的一些示例数据

还有另一个字段是“持续时间”，具有 90 天、0:00:00 之类的数据是否也有 Postgres 数据类型？

我需要使用这些字段创建表的语法是什么：

CREATE TABLE blah ( 发出 ????, 报告时间 ????, 持续时间 ??? );

注意：我已经熟悉这部分：

COPY blah (issued, reportingtime, duration) FROM path to file WITH DELIMITER ',' CSV HEADER;

只是不想在我运行时爆炸，因为存储的数据与表列类型不匹配。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T11:50:46.773

使用`timestamptz`和`interval`类型（[文档](http://www.postgresql.org/docs/current/interactive/datatype-datetime.html)）。我一直使用时区感知类型，它在以后的数据操作中提供了更多的自由。

```
CREATE TABLE blah (
    issued timestamptz,
    reportedtime timestamptz,
    duration interval);

COPY blah FROM stdin;
2012-05-07 04:04:05 2012-05-12 00:00:00.571395  90 days, 0:00:00
\.

SELECT * FROM blah; 
```

# networking - Kademlia p2p协议如何实现高效广播？

> ID：10581516
> 
> 赞同：5
> 
> 时间：2012-05-14T10:24:23.153
> 
> 标签：networking, p2p, network-protocols, kademlia

我目前正在研究[Kademlia](http://xlattice.sourceforge.net/components/protocol/kademlia/specs.html)点对点协议，我很好奇是否有人知道有效广播信息/消息的技术或方法？

有一篇论文[Effcient Broadcast in Structured P2P Networks](http://www.sics.se/~seif/Publications/paper3.pdf)描述了[Chord](http://en.wikipedia.org/wiki/Chord_%28peer-to-peer%29)中的一种广播方式。他们的想法是将网络分成两部分并将广播消息发送到每个分区中的第一个节点。被联系的节点再次划分它们的“子网”并执行相同的操作。使用这种技术，您可以通过网络在生成树上广播消息。但是，我在将它应用到 Kademlia 时遇到了问题，因为很难可靠地对 Kademlia 网络进行分区。

有人知道如何实现这一目标或存在哪些替代方法？

我不想大规模淹没网络，因为这会对网络负载产生不良影响并导致大量冗余流量。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-14T12:27:54.513

经过一些研究，我能够在本文中找到一个可能的解决方案：[基于 P2P 的入侵检测](http://www.hiradastechnika.hu/data/upload/file/2009/2009%20I/Pages_from_HT0901a_2.pdf)。事实证明，确实可以使用 Kademlia 中的网络拓扑对网络进行有效分区

# c# - 文件计数保存在哪里？

> ID：10581518
> 
> 赞同：4
> 
> 时间：2012-05-14T10:24:27.593
> 
> 标签：c#, windows, installation, wix

当我安装一个包含文件的应用程序时，`somet.txt`它会将其安装到某个位置`C:\temp`，并且 Windows 会记录它已安装 1 次。

如果另一个应用程序将具有相同 id 的相同文件安装到相同位置，则安装计数将增加到 2。

这样一来，如果您想完全删除该文件，则必须在删除该文件之前卸载这两个应用程序。

我正在寻找读取此计数/编辑此计数/等的能力。

有谁知道如何手动/通过wix/通过c#来做到这一点？

我找到了这个信息

> 安装程序增加组件密钥文件的共享 DLL 注册表中的引用计数

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-14T13:59:49.910

Windows 安装程序中有两种独立的引用计数机制，其他答案各自指代不同的：

1.  组件（不是文件）是按引用它们的已安装产品的数量来计算的。这要求组件在引用它的不同产品中具有相同的 GUID 和[keypath](http://www.google.be/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&ved=0CGIQFjAA&url=https://stackoverflow.com/questions/2003043/what-is-the-wix-keypath-attribute&ei=EQuxT8v2FYTU-gbUucjYCA&usg=AFQjCNGR565LQNkiHh5s9z1gxt_ji-EDBA&sig2=4-09Z9R-7Ye5Xbb0dnADqg)。

2.  还有一个**遗留** `SharedDllRefCount`机制*可以*为组件的 keypath 启用。这确实对文件路径进行了操作，因此即使组件 GUID 不匹配也可以使用。但是，产品**不需要**正确地增加/减少这个引用计数，所以不推荐使用它。wix 中的默认行为是仅在此引用计数已存在时才增加此引用计数。

这些引用计数在 Windows 安装程序内部使用：当它们都达到零时，组件被卸载。AFAIK [Windows Installer API](http://msdn.microsoft.com/en-us/library/windows/desktop/aa372860(v=vs.85).aspx)不会在任何地方公开此引用计数，因为您不需要直接阅读或编辑它们。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-14T10:50:55.130

这些文件包含在组件中。这些组件在产品中被引用。引用计数不存储为数字，但从产品到组件的引用被视为此计数。

要卸载包含您的文件的组件，您需要卸载引用该组件的所有产品。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-14T10:48:18.193

共享 DLL 注册表位于

> HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Windows\CurrentVersion\SharedDLLs

如果您编辑这将邀请未定义的行为。

# mysql - MySQL查询优化总和..案例

> ID：10581526
> 
> 赞同：0
> 
> 时间：2012-05-14T10:24:49.830
> 
> 标签：mysql, query-optimization

有没有办法优化下面的查询？

```
SELECT 
DATE_FORMAT(a.duedate,'%d-%b-%y') AS dte, 
duedate, 
SUM(CASE WHEN (typeofnotice='ddat' AND STATUS='open') THEN 1 ELSE 0 END) AS 'DDatOpen', 
SUM(CASE WHEN (typeofnotice='ddat' AND STATUS='closed') THEN 1 ELSE 0 END) AS 'DDatClosed', 
SUM(CASE WHEN (b.action='tagunchanged' AND STATUS='closed') THEN 1 ELSE 0 END) AS 'DDatUnchanged',
SUM(CASE WHEN (typeofnotice='rss' AND validindicator IS NULL AND STATUS='open') THEN 1 ELSE 0 END) AS 'RSSValidation', 
SUM(CASE WHEN (typeofnotice='rss' AND validindicator=1 AND STATUS='open') THEN 1 ELSE 0 END) AS 'RSSValidOpen', 
SUM(CASE WHEN (typeofnotice='rss' AND validindicator=1 AND STATUS='closed') THEN 1 ELSE 0 END) AS 'RSSValidClosed', 
SUM(CASE WHEN (typeofnotice='rss' AND validindicator=0) THEN 1 ELSE 0 END) AS 'RSSInvalid', 
SUM(CASE WHEN (typeofnotice='copernic' AND validindicator IS NULL AND STATUS='open') THEN 1 ELSE 0 END) AS 'CopernicValidation', 
SUM(CASE WHEN (typeofnotice='copernic' AND isaward=1 AND validindicator=1 AND STATUS='open') THEN 1 ELSE 0 END) AS 'CopernicValidAwardOpen', 
SUM(CASE WHEN (typeofnotice='copernic' AND isaward=1 AND validindicator=1 AND STATUS='closed') THEN 1 ELSE 0 END) AS 'CopernicValidAwardClosed', 
SUM(CASE WHEN (typeofnotice='copernic' AND isaward=1 AND validindicator=0) THEN 1 ELSE 0 END) AS 'CopernicInvalidAward', 
SUM(CASE WHEN (typeofnotice='copernic' AND isaward=0 AND validindicator=1 AND STATUS='open') THEN 1 ELSE 0 END) AS 'CopernicOpportunityValidOpen', 
SUM(CASE WHEN (typeofnotice='copernic' AND isaward=0 AND validindicator=1 AND STATUS='closed') THEN 1 ELSE 0 END) AS 'CopernicOpportunityValidClosed', 
SUM(CASE WHEN (typeofnotice='copernic' AND isaward=0 AND validindicator=0) THEN 1 ELSE 0 END) AS 'CopernicOpportunityInvalid', 
SUM(CASE WHEN (typeofnotice='copernic' AND STATUS='limited') THEN 1 ELSE 0 END) AS 'CopernicLimitation', 
SUM(CASE WHEN ((validindicator IS NULL OR validindicator = 1) AND STATUS='open') THEN 1 ELSE 0 END) AS 'TotalNotices', 
SUM(CASE WHEN (validindicator=1 AND STATUS='closed') THEN 1 ELSE 0 END) AS 'TotalCompleted', 
SUM(CASE WHEN (validindicator=0 AND (typeofnotice='wget' OR typeofnotice='copernic' OR typeofnotice='rss')) THEN 1 ELSE 0 END) AS 'TotalInvalid'
FROM tblNotices AS a LEFT JOIN tblTransactions AS b 
ON a.id = b.noticeid WHERE b.noticeid IS NOT NULL
WHERE duedate >= '2011-04-04 00:00:00'  AND  a.duedate <= '2012-05-08 24:00:00' 
GROUP BY dte 
ORDER BY dueDate ASC; 
```

tblTransactions 有 150 万行 tblNotices 有 900k 行。

查询运行大约 1 分钟。正常吗？有没有办法优化这个查询？

![描述“表”并解释选择](../Images/2acd2113eb17ceeae1d365128f57ca7e.png)

我认为`DATE_FORMAT`这里的功能真的会扼杀性能..这里有什么提示吗？它运行大约 58 秒。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T11:06:23.103

除了 SUM(IF()) 实例之外，查询看起来尽可能简单。

您的查询对事务有一个 LEFT-JOIN，但随后 b.noticeID 不为空。两者的组合导致双方都需要正常的“JOIN”或“INNER JOIN”含义。

至于您的 Where 子句，我会确保您在到期日有一个简单的索引。您的表显示“MUL”（多键）索引，我会确保到期日期是该键的第一部分，或者至少一个索引将到期日期作为第一个字段。

接下来，你的分组。由于您正在按截止日期的日期格式进行分组，因此我将仅根据截止日期（匹配表索引）离开分组。无论如何，视觉格式化的字符串都会跟随。而且由于您的 Order By 也是基于到期日期（而不是格式漂亮的字符串版本），所以应该很好。

至于查询本身的日期范围......提供的范围内有多少条记录。

***修订***

您可能能够利用查询中使用的元素的多部分索引，因此查询不必实际转到页面数据来查看整个记录中的各个元素。由于数据将是索引键的一部分，因此查询可以直接使用它而不需要转到页面。

尝试索引

INDEX on ...（DueDate、状态、IsAward、TypeOfNotice、ValidIndicator）

此外，为了澄清您的查询中的 alias.fields。有时您明确引用“a”。别名和其他时候，没有别名。对于在您之后进行查询的其他人，或其他试图提供帮助的人。它可以更轻松地显式引用具有正确别名的所有字段，以防止来自哪个表的哪些列不明确。是的，你在这里提供了你的表结构，但未来可能比必须继续回顾结构更容易。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T11:06:07.890

嗯，那个

```
FROM tblNotices AS a LEFT JOIN tblTransactions AS b 
ON a.id = b.noticeid WHERE b.noticeid IS NOT NULL 
```

是相同的

```
FROM tblNotices AS a INNER JOIN tblTransactions AS b 
ON a.id = b.noticeid 
```

第二个可能更快。

你为什么不按截止日期分组？然后你可以省略 DATE_FORMAT()，但我猜这只是小菜一碟。如果您省略它，`ORDER BY`则也没有必要，因为它与 GROUP BY 有牵连。

除此之外，您无能为力。

# c# - char 的数据合同反序列化问题 - C#

> ID：10581532
> 
> 赞同：2
> 
> 时间：2012-05-14T10:25:14.460
> 
> 标签：c#, serialization, datacontractserializer, xmlserializer

我的代码参考

```
var sample = DataContractDeserializeObject<MySample>(
                        "<MySample xmlns=\"http://schemas.datacontract.org/2004/07/Sample\"><Charecter>'D'</Charecter></MySample>");

When i run this code. i get this message "There was an error deserializing the object of type MySample. Content cannot be converted to the type Int. Line 1, position 129." 
```

我的反序列化代码

```
 public static T DataContractDeserializeObject<T>(string objectToDeserialize)
        {
            using (XmlReader reader = XmlReader.Create(new StringReader(objectToDeserialize)))
            {
                var serializer =
                    new DataContractSerializer(typeof(T));
                return (T)serializer.ReadObject(reader);
            }
        } 
```

我的数据合同

```
[DataContract]
    public class MySample
    {
        [DataMember]
        public char Charecter { get; set; }
    } 
```

如何反序列化 char。谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-14T10:30:35.210

我隐约记得由于某种原因将字符序列化为它们的 ascii 表示。不要尝试D，尝试104。

# android - 在文本字段下方显示 Android 中的键盘

> ID：10581534
> 
> 赞同：0
> 
> 时间：2012-05-14T10:25:19.073
> 
> 标签：android, jquery-mobile, rhomobile

> **可能重复：**
> [Android 软键盘覆盖了 edittext 字段](https://stackoverflow.com/questions/3295672/android-soft-keyboard-covers-edittext-field)

我的 Rhomobile 应用程序在 Android 三星平板电脑模拟器中成功运行。当表单有超过 2 个输入字段时，我在 Rhomobile 应用程序中显示键盘时遇到问题。键盘将文本字段完全隐藏在设备中。如何从键盘向上移动文本字段，以便所有字段都可以看到它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T11:03:54.750

您`android:configChanges="keyboardHidden|orientation"`在清单中使用吗？

# synchronization - 同步到 EncFS 分区时，为什么 Rsync 会失败并显示“文件存在 (17)”错误？

> ID：10581537
> 
> 赞同：2
> 
> 时间：2012-05-14T10:25:35.620
> 
> 标签：synchronization, rsync

`src`此命令成功地将所有文件与`dest`Windows`C:`驱动器上的文件夹同步。

```
$ rsync -av /cygdrive/c/src /cygdrive/c/dest 
```

但是，如果 dest 文件夹位于 EncFS 分区中，例如`X:`，我会收到错误消息。

```
"/cygdrive/x/dest/.a.txt.G5csoY" -> "src/a.txt": File exists (17) 
```

最后，文件被 rsync`a.txt`从文件夹中删除。`dest`因此`rsync`，使用相同的参数再次运行会成功复制文件。

如何通过只运行一次 rsync 来同步这两个目录？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-01T04:45:35.920

尝试使用类似的东西，临时文件的位置`--temp-dir="/cygdrive/C/"`在哪里。`C:\`我在这个邮件列表帖子中找到了这样做的理由，[“如果无法统计目标文件，rsync 将失败”](http://lists.samba.org/archive/rsync/2006-May/015641.html)。

# java - Java 1.6.0 中的 UnsupportedClassVersionError 异常

> ID：10581540
> 
> 赞同：0
> 
> 时间：2012-05-14T10:25:39.037
> 
> 标签：java, exception, unsupported-class-version

```
$ pwd
/home/tu/java/testpackage

$ cat Test.java 
package testpackage;

public class Test {
    public static void main(String[] args) {
        System.out.println("hi");
    }
}

$ javac -version
javac 1.7.0_147

$ java -version
java version "1.6.0_23"
OpenJDK Runtime Environment (IcedTea6 1.11pre) (6b23~pre11-0ubuntu1.11.10.2)
OpenJDK Client VM (build 20.0-b11, mixed mode, sharing)

$ cd ..
$ javac -cp . testpackage/Test.java

$ java -cp . testpackage.Test

Exception in thread "main"
java.lang.UnsupportedClassVersionError: testpackage/Test :
Unsupported major.minor version 51.0
at java.lang.ClassLoader.defineClass1(Native Method)
at java.lang.ClassLoader.defineClass(ClassLoader.java:634)
at java.security.SecureClassLoader.defineClass(SecureClassLoader.java:142)
at java.net.URLClassLoader.defineClass(URLClassLoader.java:277)
at java.net.URLClassLoader.access$000(URLClassLoader.java:73)
at java.net.URLClassLoader$1.run(URLClassLoader.java:212)
at java.security.AccessController.doPrivileged(Native Method)
at java.net.URLClassLoader.findClass(URLClassLoader.java:205)
at java.lang.ClassLoader.loadClass(ClassLoader.java:321)
at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:294)
at java.lang.ClassLoader.loadClass(ClassLoader.java:266)
Could not find the main class: testpackage.Test. Program will exit. 
```

在我的这个错误的情况下可能有什么问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T10:29:31.650

`java`实用程序不是编译器。它是JVM。

你应该先编译你的代码：

`javac -cp . testpackage/Test.java`

这将产生`Test.class`文件。现在你可以运行它了：

`java -cp . testpackage.Test`

请注意，当您运行程序时，您不必编写`.class`扩展名。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T10:28:15.660

从您的 java 命令中删除 .java。

您需要指定*完全限定的类名*，即“testPackage.Test”。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-14T10:29:10.543

从 /home/tu/java ：

爪哇-cp。testPackage.Test

（不要把'.java'放在最后）

# javascript - 视频结束时的youtube api调用功能

> ID：10581543
> 
> 赞同：4
> 
> 时间：2012-05-14T10:25:43.497
> 
> 标签：javascript, youtube-api, youtube-javascript-api

我需要找出嵌入的 youtube 视频何时通过 javascript 结束。

这是我的嵌入代码：

```
 <object id="ytplayer" height="35" width="560"><param name="movie" value="http://www.youtube.com/v/u8C-ZTQJIkU?version=3&enablejsapi=1&playerapiid=ytplayer&rel=0&fs=0&theme=light&showinfo=0&modestbranding=1&autohide=0&color=white">
    </param>
    <param name="allowFullScreen" value="false">

    </param>
    <param name="allowscriptaccess" value="always">

    </param>
    <embed src="http://www.youtube.com/v/u8C-ZTQJIkU?version=3&rel=0&fs=0&theme=light&showinfo=0&modestbranding=1&autohide=0&color=white" type="application/x-shockwave-flash" allowfullscreen="false" width="560" height="35" allowscriptaccess="always"></embed></object> 
```

* * *

这是到目前为止我要找出它何时结束但警报没有出现的代码。你能帮我找出问题所在吗？

```
 <script type="text/javascript" src="http://www.youtube.com/player_api"></script>
    <script type="text/javascript">
    function onYouTubePlayerReady(playerId) {
      ytplayer = document.getElementById("ytplayer");
      ytplayer.addEventListener("onStateChange", "onytplayerStateChange");
    }

    function onytplayerStateChange(newState) {
       alert("Player's new state: " + newState);
    }
    </script> 
```

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-14T11:05:27.563

您似乎只显示了部分代码。**object**标记应包含一个名为**id**的属性，该属性应设置为**ytplayer**。这是完整的工作代码：

```
 <object type="application/x-shockwave-flash" id="ytplayer" data="http://www.youtube.com/v/u8C-ZTQJIkU?enablejsapi=1&amp;playerapiid=ytplayer&amp;version=3" width="425" height="356"><param name="allowScriptAccess" value="always">
    <param name="allowScriptAccess" value="always">
</object>

</body>
</html>

<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/swfobject/2.1/swfobject.js"></script>    

<script type="text/javascript">

    function onYouTubePlayerReady(playerId) {
        var player = document.getElementById("ytplayer");
        player.addEventListener("onStateChange", "onytplayerStateChange");
    }

    function onytplayerStateChange(newState) {
        alert("New state " + newState); 
    }

</script> 
```

# windows-phone-7 - 学科 在处方中

> ID：10581544
> 
> 赞同：1
> 
> 时间：2012-05-14T10:25:43.483
> 
> 标签：windows-phone-7, system.reactive, reactive-programming

在 Rx 中，Subject 在现实生活中的用途是什么？我在 101 个样本中找到了一个样本，但我认为这并没有让我清楚地知道在哪里应用它。请任何人发布一些简单的示例来演示 Rx 中主题的工作。我在 Windows Phone 的上下文中使用它。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-14T17:51:11.433

`Subject<T>`是`List<T>`Rx 的 - 它只是一个 IObservable，您可以手动发出信号：

```
var subj = new Subject<int>();
subj.Subscribe(Console.WriteLine);

subj.OnNext(4);
subj.OnNext(5);
subj.OnCompleted();

>>>  4
>>>  5 
```

它对于“包装”使用非 Rx 模式的异步方法非常有用，例如回调或 APM。从我的书中查看[这个例子](https://github.com/ProgRx/Chapter-4/blob/master/AsyncMethods/AsyncMethods.cs#L42)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T13:58:50.920

当前的指导是您应该避免在代码库中使用主题。好吧，这就是我的意见，我最近让 Bart De Smet（Rx 的作者）口头同意了这一点。

大多数时候我看到主题的使用，它可以替换为 Observable.Create<T>(IObserver<T>) 或另一个工厂，例如 FromEventPattern、Timer、FromAPM 等...

请参阅我关于此事的博客文章：

[http://www.introtorx.com/Content/v1.0.10621.0/02_KeyTypes.html](http://www.introtorx.com/Content/v1.0.10621.0/02_KeyTypes.html)

[http://www.introtorx.com/Content/v1.0.10621.0/04_CreatingObservableSequences.html#CreationOfObservables](http://www.introtorx.com/Content/v1.0.10621.0/04_CreatingObservableSequences.html#CreationOfObservables)

[http://www.introtorx.com/Content/v1.0.10621.0/18_UsageGuidelines.html](http://www.introtorx.com/Content/v1.0.10621.0/18_UsageGuidelines.html)

本指南有两个很好的例外：

1.  如果您使用 BehaviorSubject<T> 作为属性的支持字段
2.  当您使用 MultiCast 运算符时，使用 Subjects 可以提供您正在寻找的功能集......或者您只需使用像 .Replay()、.PublishLast() 这样的内置功能集

# magento - 安装 Magento 连接管理器时出错

> ID：10581558
> 
> 赞同：0
> 
> 时间：2012-05-14T10:26:22.387
> 
> 标签：magento, plugins

当我通过 magento 连接管理器安装一些插件时，它显示了一些问题，如下所示：

```
WARNING: channel "connect.magentocommerce.com/community" has updated its protocols, use "channel-update connect.magentocommerce.com/community" to update 
downloading ZizioGroupSale-1.2.1.tgz ... 
Starting to download ZizioGroupSale-1.2.1.tgz (92,626 bytes) . . . . . . . . . . . . . . . . . . ...done: 92,626 bytes
ERROR: failed to mkdir /home/onlyforc/public_html/app/code/community/Zizio/Groupsale/Block/Adminhtml 
```

如何使它更容易？

![在此处输入图像描述](../Images/b5a06ca08b549e2de8a1269ba6d08795.png)

# java - 投射迭代器的最佳方式 to a Set , for instance Casting an Iterator to a Set <string>What would be the cleanest/best practice way?

> ID：10581561
> 
> 赞同：7
> 
> 时间：2012-05-14T10:26:38.600
> 
> 标签：java, generics, casting, iterator, set

Casting an `Iterator<Object>` to a `Set<String>`

What would be the cleanest/best practice way?

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-14T10:34:04.000

```
public Set<B> getBs(){
    Iterator<A> iterator = myFunc.iterator();
    Set<B> result = new HashSet<B>();
    while (iterator.hasNext()) {
        result.add((B) iterator.next();
    }
    return result;
} 
```

`A`但是当然，如​​果迭代器返回的所有s都不是s，它会失败`B`。

如果要过滤迭代器，请使用 instanceof：

```
public Set<B> getBs(){
    Iterator<A> iterator = myFunc.iterator();
    Set<B> result = new HashSet<B>();
    while (iterator.hasNext()) {
        A a = iterator.next();
        if (a instanceof B) {
            result.add((B) iterator.next();
        }
    }
    return result;
} 
```

使用番石榴，以上可以简化为

```
return Sets.newHashSet(Iterators.filter(myFunc.iterator(), B.class)); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-14T10:39:35.417

If we are talking about `iterators` and `collections` that need to use them, and you need the `iterater` to be generic enough so that it can be used by different `collections`.
Just use `if/else` with `instanceof` keyword as follows:

```
while(iterator.hasNext()) {
  Object obj = iterator.next();
  if (obj instanceof A) {
    collection.add((A) o);  
  } else if (obj instanceof B) {
    collection.add((B) o);  
  } else if ...etc
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-14T10:50:03.647

I'm still not 100% sure what you want, but check this out and see:

```
public static void main(String[] args) {
  final Iterator<?> it = Arrays.asList(new Object[] {"a", "b", "c"}).iterator();
  System.out.println(setFromIterator(it));
}

public static Set<String> setFromIterator(Iterator<?> it) {
  final Set<String> s = new HashSet<String>();
  while (it.hasNext()) s.add(it.next().toString());
  return s;
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-14T10:34:16.393

That's the only way, probably.

```
while(iterator.hasNext()) {
  Object o = iterator.next();
  if (o instanceof B) {
    collection.add((B) o);  
  }
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-08-02T11:50:32.803

`org.apache.commons.collections.IteratorUtils` can be used to do this.

Here is an example to convert iterator to set;

```
Set<String> mySet = new HashSet<String>(IteratorUtils.toList(myIterator)) 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-15T13:09:57.017

You **can not cast** the Iterator to Set directly. Iterator pattern provides the way to access the elements of an aggregate object sequentially without exposing its underlying presentation. The possible solution is to **travel each elements sequentially** and add each element to the set

```
while (iterator.hasNext()) {
    Object obj = iterator.next();
    set.add(obj.toString());
} 
```</string>

# macos - FIREMONKEY - 运行启动器以启动应用程序 (OSX)

> ID：10581562
> 
> 赞同：1
> 
> 时间：2012-05-14T10:26:38.847
> 
> 标签：macos, delphi, firemonkey

出于更新目的，我创建了一个启动器（Windows/OSX）来启动主应用程序。

在 Windows 下它工作正常，但在 OSX 下，主应用程序没有启动以下代码。

```
_system(PAnsiChar('open ' + UTF8String(ExtractFilePath(ParamStr(0))+ 'mainapp'))); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-15T08:38:33.327

您的字符串类型转换错误。这应该有效：

```
_system(PAnsiChar(UTF8String('open ' + ExtractFilePath(ParamStr(0))+ 'mainapp'))); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-06T01:04:47.073

如果文件名包含空格，我发现即使更正的类型转换也不充分，但我发现以下内容适用于 OSX：

`_system(PAnsiChar(UTF8String('open ' + QuotedStr(ExtractFilePath(ParamStr(0))+ 'mainapp'))));`

或者在我的情况下，确切的代码是

`_system(PAnsiChar(UTF8String('open ' + QuotedStr(SaveDialog.Filename))));`

# c# - 在 GUI 内容中设置阻止用户操作

> ID：10581566
> 
> 赞同：1
> 
> 时间：2012-05-14T10:27:01.643
> 
> 标签：c#, multithreading, user-interface, user-interaction

以下问题：

我想在程序中上传文件，用户应该可以进行设置。因为文件非常大，我想将它们加载到一个新线程中，以便用户可以在 GUI 中进行其他设置。（速度：快）

1.  用户选择文件
2.  程序启动一个新线程
3.  线程正在加载文件
4.  程序调用调度程序将文件设置到布局中

到目前为止一切顺利，第一步到第三步没有问题。

但在第 4 步中，我创建了一个 Dispatcher.Invoke。

```
private void SetNewContent(object newContent)
{
    _userControl.Dispatcher.Invoke(
        DispatcherPriority.Normal,
        new System.Action(
            delegate()
            {
                _userControl.SetContent(newContent);
            }
        )
    };
} 
```

_userControl.SetContent 方法很慢。10,000 个页面的方法大约需要 5 秒，这对于用户来说太长了。在此期间，用户无法更改 GUI 设置。

有没有可能阻止它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T10:39:39.197

您不应该一次渲染所有内容。仅显示可见内容。
如果“newContent”是一个集合（或可以包装到集合中），您可以通过“ItemsSource”属性将其绑定到任何 WPF 列表控件 - 它们是虚拟的，因此它们将仅呈现可见项目。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T10:44:02.487

我们有类似的问题，它归结为不使用我们使用的网格控件的“虚拟化”模式。在虚拟模式下，它只会为可见部分构建 UI 元素，并在稍后滚动时重用它（而不是一次性构建所有 10,000 个元素）

你使用什么样的控件（哪个供应商？即 Infragistics/Telerik/DevExpress）来显示日期？检查它是否支持虚拟化，现在大多数都支持。

# c - STM32 Discovery 嵌入式串行引导加载程序 USART、IAP

> ID：10581568
> 
> 赞同：0
> 
> 时间：2012-05-14T10:27:12.603
> 
> 标签：c, discovery, in-app-purchase, stm32

我有一个严重的问题，我想使用 usart 启动我的 stm32 发现板（STM32L152RBT6）。我尝试通过设置 BOOT0=HIGH 和 BOOT1=LOW 进入系统内存启动模式。然后我尝试使用超级终端发送我的 .BIN 文件（没有任何反应）。我还尝试了 ST 的 Flash loader 实用程序（它在检测目标时挂起）。

我还阅读了一些关于 In Application Programming 的数据表。我下载了 IAP 固件并烧录了它，但超级终端上什么也没有出现，可能是因为 usart 可能设置了一些不同的配置。

我只想使用usart对我的stm32发现板的闪存进行编程。请帮忙！启动到系统内存后，下一步是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-14T16:30:07.113

下载“STMicroelectronics Flash Loader”，据说这是用于使用 USART 进行编程的软件 - 我想是的 - 但我不够幸运，因为它无法连接到我的定制板

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-25T22:44:14.437

I think it only accepts comports 0-9 even though it lets you select >10, using device manager set your comport to <10 and try it again :)

I had the exact same problem and it was because i was trying to use a comport >9 :)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-12-05T06:42:15.577

嗨，我还没有在 stm32 上工作过。但如果使用 ST 提供的闪存引导加载程序软件。请启用引导加载程序选项字节。然后重置微控制器，您必须立即单击下一步。它会起作用的。

在我的 st 控制器中，它在位置 8000 中搜索 0x82 或 0xAC 字节。如果您清除位置 8000。那么它将仅保留在引导加载程序中。然后您可以测试它是否可以工作的闪存加载器软件。

# ios - 在 Core Data 中删除大量（10.000+）对象的最有效方法是什么？

> ID：10581569
> 
> 赞同：6
> 
> 时间：2012-05-14T10:27:14.373
> 
> 标签：ios, core-data

我试图删除多组 10.000+ NSManagedObjects 的方式太占用内存（大约 20MB 活动字节），并且我的应用程序正在被抛弃。下面是delete方法的实现：

```
+ (void)deleteRelatedEntitiesInManagedObjectContext:(NSManagedObjectContext *)context 
{
    NSFetchRequest *fetch = [[NSFetchRequest alloc] init];
    [context setUndoManager:nil];

    [fetch setEntity:[NSEntityDescription entityForName:NSStringFromClass(self) inManagedObjectContext:context]];
    [fetch setIncludesPropertyValues:NO];

    NSError *error = nil;
    NSArray *entities = [context executeFetchRequest:fetch error:&error];

    NSInteger deletedCount = 0;
    for (NSManagedObject *item in entities) {
        [context deleteObject:item];
        deletedCount++;

        if (deletedCount == 500) {
            [context save:&error];
            deletedCount = 0;
        }
    }

    if (deletedCount != 0) {
        [context save:&error];
    }
} 
```

我试过：-setFetchBatchSize，但使用的内存更多。

什么是更节省内存的方法来做到这一点？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-14T12:13:42.803

**编辑**：刚刚观看了 2015 年 WWDC “ *Core Data 中的新功能*”（它一直是我观看的第一个视频，但今年我一直很忙），他们宣布了一个新的 API：`NSBatchDeleteRequest`这应该比以前的任何解决方案都更有效率。

* * *

高效有多种含义，通常意味着某种权衡。在这里，我假设您只想在删除时包含内存。

Core Data 有*很多*性能选项，超出了任何单个 SO 问题的范围。

如何管理内存取决于 managedObjectContext 和 fetchRequest 的设置。查看文档以查看所有选项。但是，特别是，您应该牢记这些事情。

另外，请记住性能方面。这种类型的操作应该在单独的线程上执行。

另外，请注意，对象图的其余部分也将发挥作用（因为 CoreData 如何处理相关对象的删除。

关于内存消耗，MOC 有两个属性需要特别注意。虽然这里有很多，但绝不是全面的。如果您想实际查看发生了什么，请在每次保存操作之前和之后 NSLog 您的 MOC。特别是记录已注册对象和已删除对象。

1.  MOC 有一个已注册对象的列表。默认情况下，它不保留已注册的对象。但是，如果 retainsRegisteredObjects 为 YES，它将保留所有已注册的对象。

2.  特别是对于删除，setPropagatesDeletesAtEndOfEvent 告诉 MOC 如何处理相关对象。如果您希望它们与保存一起处理，则需要将该值设置为 NO。否则，它将等到当前事件完成

3.  如果您有非常大的对象集，请考虑使用 fetchLimit。虽然故障不会占用大量内存，但它们仍会占用一些内存，而且一次有数千个并非微不足道。这意味着更多的获取，但你会限制内存量

4.  还要考虑，任何时候你有很大的内部循环，你应该使用你自己的自动释放池。

5.  如果此 MOC 有父级，则保存只会将这些更改移动到父级。在这种情况下，如果你有一个父 MOC，你只是让那个 MOC 成长。

对于限制内存，请考虑这一点（不一定最适合您的情况 - 有*很多*Core Data 选项 - 只有您知道什么最适合您的情况，基于您在其他地方使用的所有选项。

我在 NSManagedObjectContext 上写了一个类别，当我想确保保存到后备存储时用于保存，与此非常相似。如果您不使用 MOC 层次结构，则不需要它，但是......确实没有理由不使用层次结构（除非您绑定到旧 iOS）。

```
- (BOOL)cascadeSave:(NSError**)error {
    __block BOOL saveResult = YES;
    if ([self hasChanges]) {            
        saveResult = [self save:error];
    }
    if (saveResult && self.parentContext) {
        [self.parentContext performBlockAndWait:^{
            saveResult = [self.parentContext cascadeSave:error];
        }];
    }
    return saveResult;
} 
```

我稍微修改了你的代码......

```
+ (void)deleteRelatedEntitiesInManagedObjectContext:(NSManagedObjectContext *)context 
{
    NSFetchRequest *fetch = [[NSFetchRequest alloc] init];
    [context setUndoManager:nil];

    [fetch setEntity:[NSEntityDescription entityForName:NSStringFromClass(self) inManagedObjectContext:context]];
    [fetch setIncludesPropertyValues:NO];
    [fetch setFetchLimit:500];

    NSError *error = nil;
    NSArray *entities = [context executeFetchRequest:fetch error:&error];
    while ([entities count] > 0) {
        @autoreleasepool {
            for (NSManagedObject *item in entities) {
                [context deleteObject:item];
            }
            if (![context cascadeSave:&error]) {
                // Handle error appropriately
            }
        }
        entities = [context executeFetchRequest:fetch error:&error];
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-15T06:47:33.527

在灵感的时刻，我删除了`[fetch setIncludesPropertyValues:NO];`，这很好。从文档：

> 在正常获取期间（includesPropertyValues 为 YES），Core Data 获取匹配记录的对象 ID 和属性数据，用信息填充行缓存，并将托管对象作为故障返回（请参阅returnsObjectsAsFaults）。这些故障是托管对象，但在触发故障之前，它们的所有属性数据仍驻留在行缓存中。当故障被触发时，Core Data 从行缓存中检索数据——无需返回数据库。

我设法将分配的活动字节减少到〜13MB，这更好。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-07-02T05:53:37.513

NSBatchDeleteRequest 为我工作；将删除托管对象的时间减少了 5 倍，并且没有内存峰值。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-14T11:25:09.313

我从来没有测试过它，但如果内存是你主要关心的问题，你可以尝试将那些 500 次删除的批次封装在额外的自动释放池中。context:save 可能会创建很多自动释放的对象，这些对象在您完成运行循环周期之前不会被释放。有 10 000 多条记录，它可以很好地加起来。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-14T11:34:32.290

如果您不想使用其他 API，请尝试 , 的其他功能`NSFetchRequest`，`fetchLimit`可能与`fetchOffset`. 我在 iTunes U iPad 课程之一中看到了这一点，该课程涉及使用 Core Data 进行大量数字运算的示例。

```
NSInteger limit = 500;
NSInteger count = [context countForFetchRequest:fetch error:nil];
[fetch setFetchLimit:limit];
for (int i=0; i < count/limit+1; i++) {
   // do the fetch and delete and save
} 
```

您可以调整`fetchLimit`以满足您的内存要求。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-14T11:00:54.307

这将是一个有趣的测试，尝试使用[Magical Record](http://www.google.com/search?q=magical%20record&safe=strict)。那里有一个 truncate 方法，应该非常有效（我已经在 3000 条记录的大数据集上使用它没有问题。看看它如何处理 10,000 条记录很有趣。

我不会仅将它用于该功能，如果您还没有尝试过，那么您应该这样做。它使处理 Core Data 变得更加容易，并且使用更少的代码。

希望这可以帮助。

# uac - 为 NSIS 安装程序设置 UAC 'Publisher' 字段

> ID：10581570
> 
> 赞同：19
> 
> 时间：2012-05-14T10:27:14.400
> 
> 标签：uac, nsis

当我打开我的安装程序（我使用 NSIS 创建的）时，会出现 UAC 对话框，其中包含有关我的安装程序的信息。*发布*者字段为“未知”。我听说过对应用程序进行数字签名，您知道如何在 NSIS 中执行此操作吗？

**如何将字段/属性*发布*者设置为“我的安装程序”或其他文本？**

我认为以下代码应该设置*Publisher*字段，但它没有，它仍然是“未知”：

```
InstallDir  "abc"
Name        "def"        
OutFile     "def.exe"

VIProductVersion                 "1.0.0.0"
VIAddVersionKey ProductName      "def"
VIAddVersionKey Comments         "MY DESCRIPTION"
VIAddVersionKey CompanyName      "My Installer"
VIAddVersionKey LegalCopyright   "MY COMPANYNAME"
VIAddVersionKey FileDescription  "MY DESCRIPTION"
VIAddVersionKey FileVersion      1
VIAddVersionKey ProductVersion   1
VIAddVersionKey InternalName     "def"
VIAddVersionKey LegalTrademarks  "PTY LTD"
VIAddVersionKey OriginalFilename "def.exe"

Section
    DetailPrint "Hello World"
SectionEnd 
```

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-05-14T16:11:39.993

您必须使用 Windows 信任的证书颁发机构对安装程序进行[Authenticode](http://msdn.microsoft.com/en-us/library/bb756995.aspx) [签名](https://knowledge.verisign.com/support/code-signing-support/index?page=content&id=AR190)（如果您想成为[Winqual](http://en.wikipedia.org/wiki/Winqual)的一部分，那么您需要一个特殊证书，MS 只允许您使用[VeriSign](https://products.verisign.com/orders/enrollment/winqualOrder.do)）因为该字段是从数字证书中提取的（如果一个存在）而不是来自PE版本信息。

要作为构建过程的一部分进行签名，您可以使用这个[hack](http://nsis.sourceforge.net/Run_Command_After_Compilation)，或者如果您使用的是 NSIS v3，那么您可以使用该`!finalize`命令。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2018-10-08T14:50:30.533

为了提供有关该命令的更多详细信息，这些是我在 NSIS 3.03 版本中使用该`!finalize`命令的行。

**重要提示：** 您需要在**passwd.txt文件中提供代码签名证书密码，该文件与您的****certificate.pfx**文件位于同一目录中。

```
!define PRODUCT_NAME "def"
!define PRODUCT_VERSION "1.0.0.0"
!define OutputFileName "def.exe"

Name "${PRODUCT_NAME} ${PRODUCT_VERSION}"
OutFile "${OutputFileName}"
InstallDir "abc"
ShowInstDetails show

!define /file OutFileSignPassword ".\CodeSign\passwd.txt"
!define OutFileSignCertificate ".\CodeSign\certificate.pfx"
!define OutFileSignSHA1   ".\CodeSign\signtool.exe sign /f ${OutFileSignCertificate} /p ${OutFileSignPassword} /fd sha1   /t  http://timestamp.comodoca.com /v" 
!define OutFileSignSHA256 ".\CodeSign\signtool.exe sign /f ${OutFileSignCertificate} /p ${OutFileSignPassword} /fd sha256 /tr http://timestamp.comodoca.com?td=sha256 /td sha256 /as /v" 

!finalize "PING -n 1 127.0.0.1 >nul"                                # Delay Next Step to ensure File isn't locked by previous Process 
!finalize "${OutFileSignSHA1} .\${OutputFileName}"                  # CodeSigning with SHA1/AuthentiCode 
!finalize "PING -n 5 127.0.0.1 >nul"                                # Delay Next Step to ensure File isn't locked by previous Process 
!finalize "${OutFileSignSHA256} .\${OutputFileName}"                # CodeSigning with SHA256/RFC 3161  

CRCCheck on

Section
    DetailPrint "Hello World"
SectionEnd 
```

之后，您将能够看到类似于以下几行的输出：

```
The following certificate was selected:
    Issued to: Your Company
    Issued by: COMODO RSA Code Signing CA
    Expires:   Sun Mar 15 00:59:59 2020
    SHA1 hash: 0A12223C465069798D940317273C4F56A9BCC6D9

Done Adding Additional Store
Successfully signed: .\def.exe

Number of files successfully Signed: 1

Number of warnings: 0

Number of errors: 0 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-09-20T06:53:43.633

用两个签名对安装程序文件进行签名似乎很重要，因为[svcabre](https://stackoverflow.com/users/4248238/svcabre)实现了它：

`sha1`一方面使用这两种算法

```
"c:\Program Files (x86)\Windows Kits\10\bin\x86\signtool.exe"
sign /f "YourCertificateFileHere.pfx" /p YourPasswordHere 
/fd sha1 /t http://timestamp.comodoca.com /v "YourInstallerFilePathHere" 
```

`sha256`另一方面_

```
"c:\Program Files (x86)\Windows Kits\10\bin\x86\signtool.exe" 
sign /f "YourCertificateFileHere.pfx" /p YourPasswordHere 
/fd sha256 /tr http://timestamp.comodoca.com?td=sha256 
/td sha256 /as /v "YourInstallerFilePathHere" 
```

使用此选项，Windows 10 也正确显示了证书持有者。

# javascript - 写在 HTML 页面上的 JavaScript 可以从 XML 中获取信息吗？

> ID：10581572
> 
> 赞同：1
> 
> 时间：2012-05-14T10:27:19.237
> 
> 标签：javascript, html, xml

假设我在 html 页面中有这个 javascript 代码

```
<script type="text/javascript">
$(document).ready(function(){ $('.info2').CreateBubblePopup({ position : 'left', align : 'center',
innerHtml: 'some text ',
innerHtmlStyle: { color:'#FFFFFF', 'text align':'center' },
themeName: 'all-black',
themePath: 'images/jquerybubblepopup-themes' }); }); 
</script> 
```

我想让这个脚本从我拥有的 xml 文件中获取“info2”和“一些测试”，我在其中添加了一个名为 <-INFOID-> 的“info2”标签和一个名为“< -INFODATA->（没有-，只是添加了它们，因为标签消失了）所以我使用下面的代码来连接xml并编写脚本

```
<script type="text/javascript">
if (window.XMLHttpRequest)
 {// code for IE7+, Firefox, Chrome, Opera, Safari
 xmlhttp=new XMLHttpRequest();
 }
else
  {// code for IE6, IE5
  xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
  }
xmlhttp.open("GET","scores.xml",false);
xmlhttp.send();
xmlDoc=xmlhttp.responseXML; 

document.write("<script type='text/javascript'>");
var x=xmlDoc.getElementsByTagName("GAME");
for (i=0;i<x.length;i++)
  { 
  document.write("$(document).ready(function(){ $('.");
  document.write(x[i].getElementsByTagName("INFOID")[0].childNodes[0].nodeValue);
  document.write("').CreateBubblePopup({ position : 'left', align : 'center',");
  document.write("innerHtml: '");
  document.write(x[i].getElementsByTagName("INFODATA")[0].childNodes[0].nodeValue);
  document.write("',");
  document.write("innerHtmlStyle: { color:'#FFFFFF', 'text-align':'center' },");
  document.write("themeName: 'all-black',");
  document.write("themePath: 'images/jquerybubblepopup-themes' }); });");

  }
document.write("</script>");
</script> 
```

我不知道 XML 是否适用于 Javascript 我只是试一试，但它没有用，那么 xml 是否适用于 javascript？如果是，我的代码有什么问题？

我的 score.xml 文件看起来：

```
<SCORES>
<GAME>
<DATE>14.5.2012 12:05</DATE>
<TIME>FT</TIME>
<HOMETEAM>Team1</HOMETEAM>
<SCORE>4 - 0</SCORE>
<AWAYTEAM>Team2</AWAYTEAM>
<OTHER> </OTHER>
<INFO><![CDATA[<img class='info1' src='images/info.png' width='14px' height='14px' border='0' />]]></INFO>
<INFOID>info1</INFOID>
<INFODATA>FIRST BUBBLE</INFODATA>
</GAME>

<GAME>
<DATE>14.5.2012 12:05</DATE>
<TIME>FT</TIME>
<HOMETEAM>Team3</HOMETEAM>
<SCORE>2 - 0</SCORE>
<AWAYTEAM>Team4</AWAYTEAM>
<OTHER> </OTHER>
<INFO><![CDATA[<img class='info2' src='images/info.png' width='14px' height='14px' border='0' />]]></INFO>
<INFOID>info2</INFOID>
<INFODATA>SECOND BUBBLE</INFODATA>
</GAME>
</SCORES> 
```

我在页面中使用的其他标签...最后 2 个标签用于配置此脚本，这是 lil img 的弹出气泡

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T10:41:16.233

查看 jQuery 的 XML 解析器：[http](http://api.jquery.com/jQuery.parseXML/) ://api.jquery.com/jQuery.parseXML/ 。

它还会为您进行 AJAX 检索，实际上可以立即处理 XML：http: [//api.jquery.com/jQuery.get/](http://api.jquery.com/jQuery.get/)

下面的示例（相对未经测试）：

```
<script type="text/javascript">
$(document).ready( function ( ) {
    // Get the XML data from your file
    $.get('demo.xml', function( data ) {

        // Because we've given jQuery the XML datatype, we can jump straight to finding the element.    
        $(data).find('GAME').each( function ( ) {

            // The current object now holds a single "GAME" - find the elements we need
            var game_id = $(this).find('INFOID').text( );
            var game_info = $(this).find('INFODATA').text( );

            // Create the popup.
            $('.'+game_id).CreateBubblePopup({
                    position : 'left', align : 'center',
                    innerHtml: game_info,
                    innerHtmlStyle: { color:'#FFFFFF', 'text align':'center' },
                    themeName: 'all-black',
                    themePath: 'images/jquerybubblepopup-themes'
            });
        }); // end of each
    }, 'xml'); // The 'xml' tells jQuery to expect XML back from the request
});
</script> 
```

# android - 在android中出现错误

> ID：10581580
> 
> 赞同：1
> 
> 时间：2012-05-14T10:27:51.097
> 
> 标签：android

我已经使用 sax 解析器成功解析了数据，并且输出在 logcat 中正确出现，但我必须系统地安排这些数据。但问题是我的问题长度和索引是 2，所以选项也来了 2。相反，每个问题都是 4。请建议

代码片段是

```
for (int i = 0; i < categorylist.getTitle().size(); i++) {

            TableRow tr = new TableRow(this);
            tr.setPadding(2, 2, 2, 2);

            TableLayout.LayoutParams tableRowParams=
                  new TableLayout.LayoutParams
                  (TableLayout.LayoutParams.FILL_PARENT,TableLayout.LayoutParams.FILL_PARENT);

            int leftMargin=0;
            int topMargin=2;
            int rightMargin=0;
            int bottomMargin=1;

            tableRowParams.setMargins(leftMargin, topMargin, rightMargin, bottomMargin);

            tr.setLayoutParams(tableRowParams);

            name[i]= new TextView(this);
            name[i].setText(categorylist.getTitle().get(i));
            name[i].setTextColor(Color.WHITE);
            name[i].setTextSize(12);
            name[i].setPadding(10,0,0,0);
            name[i].setLayoutParams(new LayoutParams(LayoutParams.FILL_PARENT,LayoutParams.WRAP_CONTENT));
            tr.addView(name[i]);
            t1.addView(tr, tableRowParams);

            LinearLayout.LayoutParams layoutParams = new RadioGroup.LayoutParams(
                    RadioGroup.LayoutParams.WRAP_CONTENT,
                    RadioGroup.LayoutParams.WRAP_CONTENT);

            rad1[i]= new RadioButton(this);
            rad1[i].setText(categorylist.getValue().get(i));    
            rad1[i].setTextColor(Color.WHITE);
            rad1[i].setTextSize(12);
            rad1[i].setPadding(10,0,0,0);
            rad1[i].setLayoutParams(new LayoutParams(LayoutParams.FILL_PARENT,LayoutParams.WRAP_CONTENT));
            rgrp.addView(rad1[i], 0, layoutParams);

        } 
```

和 xml 是

```
<Values>
<Question>

<Description><![CDATA[Some Question]]></Description>

                    <Options>

                        <option value="correct"><![CDATA[All of these]]></option>

                        <option value="incorrect"><![CDATA[Ok]]></option>

                        <option value="incorrect"><![CDATA[Fine]]></option>

                        <option value="incorrect"><![CDATA[Good one]]></option>

                    </Options>  

            </Question>

</Values> 
```

logcat 输出为：

```
05-14 15:22:27.228: INFO/This is the title:(559): Which of the following are called celestial bodies?
05-14 15:22:27.248: INFO/This is the option:(559): All of these
05-14 15:22:27.248: INFO/This is the option:(559): Sun
05-14 15:22:27.248: INFO/This is the option:(559): Planets
05-14 15:22:27.248: INFO/This is the option:(559): Moon 
05-14 15:22:27.258: INFO/This is the title:(559): In our solar system, _________ planets revolve around the Sun.
05-14 15:22:27.258: INFO/This is the option:(559): eight
05-14 15:22:27.258: INFO/This is the option:(559): five
05-14 15:22:27.258: INFO/This is the option:(559): ten
05-14 15:22:27.258: INFO/This is the option:(559): nine 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T11:48:43.467

我认为你应该有两个循环例如

```
int l;
    for (int i = 0; i < categorylist.getTitle().size(); i++){
    for(int j= 0; j < optionlist.size()/categorylist.getTitle().size(); j++){
    //add option to question
l=l++;
//use l;
    }
    } 
```

# php - PHP 命名空间和自动加载

> ID：10581583
> 
> 赞同：1
> 
> 时间：2012-05-14T10:28:04.430
> 
> 标签：php, namespaces, spl-autoload-register

我对 PHP 比较陌生，或者对至少有点复杂并且有很多类的项目更加指定新。到目前为止，使用 require_once 是可以的。然而，在一个新项目中，它变得有点混乱，包含大量并非总是需要的。

我正在创建的是一个复杂的公共 Web 服务的客户端（这不在我的控制范围内）。然后该客户端将在应用程序中使用。

我查看了 spl_autoload_register 但并没有真正让它工作。这个项目的目录是：

```
webServiceClient/src/path/same/as/namespaces 
```

假设将直接由使用的应用程序使用的客户端类在

```
webServiceClient/src/path/same 
```

该类必须“加载”所有可能的必需类。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T10:45:24.433

1.  创建自动加载功能
2.  将点 1 函数注册到`spl_autoload_register`. [关联](http://php.net/manual/en/function.spl-autoload-register.php)
3.  如果你只有`__autoload`as autoload 功能，你不必注册它。[关联](http://php.net/manual/en/function.autoload.php)
4.  编写你的自动加载函数

.

```
function __autoload($classname) {    
   $filename = ROOT."\\". $classname .".php"; //you can define ROOT by define('ROOT','dir path');    
   include_once($filename);    
} 
```

所以，当你声明

```
$myclass = new webServiceClient\src\path\same; 
```

自动加载将包括`ROOT.'webServiceClient\src\path\same.php'`

# yii - 如何在yii中上传和裁剪并保存图像

> ID：10581587
> 
> 赞同：2
> 
> 时间：2012-05-14T10:28:19.593
> 
> 标签：yii, crop, jcrop, image-upload

我正在尝试在 yii 中上传图片，然后裁剪上传的图片，然后保存。到目前为止，我所取得的成就是我可以在提交表单时上传，但我不明白如何裁剪或使用它`jcrop`，任何人都可以发送一些有用的教程，我在控制器中正在做的是

```
public function actionCreate()
{
    $model=new Userprofile;
    if(isset($_POST['Userprofile']))
    {
    $model->attributes=$_POST['Userprofile'];
    $model->profilePic=CUploadedFile::getInstance($model,'profilePic');
    $ext = $model->profilePic->getExtensionName();
    $imagename=date('dmy').time().rand();
    $pp=$model->profilePic;
    $model->profilePic=$imagename.'.'.$ext;
    if($model->save())
        mkdir('profilepics/'.$model->id,0777);
        $pp->saveAs('profilepics/'.$model->id.'/'.$imagename.'.'.$ext);
        $this->redirect(array('view','id'=>$model->id));
    }
    $this->render('create',array('model'=>$model,));
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-15T09:00:36.727

您可以使用 jquery 插件 imageAreaSelect 获取在客户端进行裁剪的坐标。这是现场示例[http://odyniec.net/projects/imgareaselect/](http://odyniec.net/projects/imgareaselect/)。

然后将坐标传递给模型的 beforeSave 并使用 Imagick::cropImage() 裁剪它（而不是 Imagick，您可以使用 GD 或您想要的任何其他库）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-04-22T04:53:48.997

NavaJcrop 扩展是上传和裁剪图像的最佳解决方案之一。这是扩展 [NavaJcrop 扩展的链接](http://www.yiiframework.com/extension/nava-jcrop/)

请按照它的步骤

# html - 垂直菜单中的活动项目

> ID：10581589
> 
> 赞同：0
> 
> 时间：2012-05-14T10:28:21.867
> 
> 标签：html, css, menu

style.css 中定义了垂直菜单。一旦用户选择了特定的菜单项，我想激活“活动”样式。我不能把它放在`class="active"`里面`<a`，因为这样该项目将始终处于活动状态。我想要的是在选择项目后应用“活动”样式。

```
<ul id = "vertmenu">
    <li>
        <img style='float: left; margin-right: 5px;' src='images/mailIcon.png'/>
        <a href="#" onclick="change_page('tables/111.php', 'col2')"><span>111</span></a>
    </li>
    <li>
        <img style='float: left; margin-right: 5px;' src='images/calendarIcon.png'/>
        <a href="#" onclick="change_page('tables/222.php', 'col2')"><span>222</span></a>
    </li>
    <li>
        <img style='float: left; margin-right: 5px;' src='images/contactsIcon.png'/>
        <a href="#" onclick="change_page('tables/333.php', 'col2')"><span>333</span></a>
    </li>
    <li>
        <img style='float: left; margin-right: 5px;' src='images/contactsIcon.png'/>
        <a href="#" onclick="change_page('tables/444.php', 'col2')"><span>444</span></a>
    </li>
</ul>

<!-- --------- CSS ----------- -->
    ul#vertmenu li a.active, ul#vertmenu li a.focus {
        background: none repeat scroll 0 0 #FFCF8B;
        outline-style: none;
        color: #AA0000;
        font-weight: bold;
        text-decoration: underline;
        }

    #vertmenu .active{
    background: none repeat scroll 0 0 #FFCF8B;
    outline-style: none;
    color: #AA0000;
    font-weight: bold;
    text-decoration: underline;
} 
```

更新 2；

```
<head>
            <script>  
 var links = document.getElementById("vertmenu").getElementsByTagName("a");

for(var i = 0; i < links.length; i++){
    links[i].onclick = function(event){
        for(var j = 0; j < links.length; j++){
            links[j].classList.remove('active');
        }
        event.target.parentNode.classList.add('active');
        change_page('tables/'+event.target.innerHTML+'.php','col2');
        return false;
    };
}​

            </script>
</head> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T10:50:30.260

这样的事情怎么样？[http://jsfiddle.net/49M49/](http://jsfiddle.net/49M49/)

```
var links = document.getElementById("vertmenu").getElementsByTagName("a");

for(var i = 0; i < links.length; i++){
    links[i].onclick = function(event){
        for(var j = 0; j < links.length; j++){
            links[j].classList.remove('active');
        }
        event.target.parentNode.classList.add('active');
        change_page('tables/'+event.target.innerHTML+'.php','col2');
        return false;
    };
}​ 
```

或在 jQuery 中：

```
$("#vertmenu a").each(function(){
    $(this).click(function(){
        $("#vertmenu a").removeClass('active');
        $(this).addClass('active');
        change_page('tables/'+$(this).find("span")[0].text()+'.php','col2');
    });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T10:39:05.533

```
ul#vertmenu li a:active
{
    /*Styling*/
} 
```

# mysql - 休眠查询语言中的 MySql date_sub() 函数并查找上周日期范围

> ID：10581590
> 
> 赞同：0
> 
> 时间：2012-05-14T10:28:25.187
> 
> 标签：mysql, hibernate, hql

如何进行以下 hql 查询以检索具有上周时间戳的记录？

`timestamp`在 MySQL`DATETIME`类型中（例如：05/07/2012 11:51:34）

```
select * from transaction
where timestamp between date_sub(now(),INTERVAL 1 WEEK) and now(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T10:41:37.263

HQL 意味着与数据库供应商完全无关，因此您不能真正直接在 HQL 中执行此操作。

您可以做的两件事是：

1.  在您的 java 代码中计算日期范围，而不是在数据库中。

2.  使用 Hibernate 的本机查询工具 - 请参阅[http://docs.jboss.org/hibernate/orm/3.3/reference/en/html/querysql.html](http://docs.jboss.org/hibernate/orm/3.3/reference/en/html/querysql.html)

# android - 壁纸上的 Android 文字

> ID：10581591
> 
> 赞同：1
> 
> 时间：2012-05-14T10:28:26.287
> 
> 标签：android, animation, text, wallpaper

我想在壁纸上绘制一些文字并使其移动，但在壁纸图像上。我知道如何`c.drawColor(int color)`在绘制移动文本之间进行操作，但是当我想在位图上绘制时我该怎么办？我应该可以使用`c.setBitmap(Bitmap mBitmap)`，但它不起作用。

有任何想法吗 ？

提前致谢 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T10:32:41.167

使用`Canvas.drawBitmap()`，先画位图，再画文字。

`Cnavas.setBitmap()`用于设置您使用在内存上创建的位图`Bitmap.createBitmap()`。

# .net - 如何确保 webclient 处理错误就像他们处理 200

> ID：10581595
> 
> 赞同：2
> 
> 时间：2012-05-14T10:28:57.017
> 
> 标签：.net, webclient

我在那里问了一个类似的问题，但针对 curl 和 webclient。

我找到了 curl 的答案：

[如何确保 webclient/curl 处理 503 错误，就像他们处理 200 一样](https://stackoverflow.com/questions/9062089/how-to-ensure-that-webclient-curl-process-503-error-like-they-process-200)

CURLOPT_FAILONERROR

我想要这样的东西，但对于 webclient 而不是 curl

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T23:54:52.130

询问每个问题的方式可能意味着该问题与该问题中链接的问题重复。无论如何，我在这里提供与在那里相同的答案：

因为`WebClient`您需要处理`WebException.Response`. 例如，这个 LINQPad 查询转储了我的 Web 服务器的“未找到”错误网页提供的 HTML：

```
Dim wc = New System.Net.WebClient
Try 
  Dim rd = wc.DownloadData(New Uri("http://localhost/test"))
  rd.Dump
Catch Ex As System.Net.WebException
 Dim rs = Ex.Response
 Call (New StreamReader(rs.GetResponseStream)).ReadToEnd.Dump
End Try 
```

# html - 为什么我的复选框标签在 iPad 上不可点击？

> ID：10581597
> 
> 赞同：2
> 
> 时间：2012-05-14T10:29:01.783
> 
> 标签：html, forms, ipad, checkbox, html-input

在使用 iPad 时，单击下面表单的复选框标签不会使复选框被选中。我认为这应该发生，因为输入在标签内。谢谢

```
 <fieldset>
        <label class="form-cont-my-sep first-my"><input type="checkbox" name="checkbox-1" />Any</label>
        <label class="form-cont-my-sep"><input type="checkbox" />1</label>
        <label class="form-cont-my-sep"><input type="checkbox" />2</label>
        <label class="form-cont-my-sep"><input type="checkbox" />3</label>
        <label class="form-cont-my-sep"><input type="checkbox" />4</label>
        <label class="form-cont-my-sep"><input type="checkbox" />5</label>
        <label class="form-cont-my-sep"><input type="checkbox" />6</label>
    </fieldset> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-14T10:46:30.807

原来这是一个[iOS 4 错误](https://stackoverflow.com/questions/5421659/html-label-command-doesnt-work-in-iphone-browser)。`onclick`在`fieldset`修复此问题时添加一个空白。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-14T10:30:57.657

您提供的代码确实有效。

另一种方法是通过 id 创建标签和复选框之间的关联。

这是通过`id`在复选框中添加一个并在`for`标签上的属性中引用它来完成的。

```
<label for="myCheckboxId">Foo</label><input type="checkbox" id="myCheckboxId" /> 
```

[这是两种方法的工作示例](http://jsfiddle.net/DYY3S/)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-14T10:43:00.977

如果你把它放在标签中，它应该是开箱即用的——在这种情况下，你不需要标签的“for”属性：

```
<label><input type="checkbox" />Any</label> 
```

如果你把它放在外面，那么你确实需要一个'for'属性：

```
<label for="myCheckBox">Any</label><input type="checkbox" id="myCheckBox" /> 
```

这是事物的 HTML 部分，但我看到了一个非常奇怪的问题，即生产服务器上的不可点击标签。

我不知道这是否是您的情况，但这就是我的“奇怪的复选框标签之谜”：它与 CakePHP 1.3 和 FormHelper 有关。经过一番摆弄，问题原来是 CentOS 的“与 perl 兼容的正则表达式”软件包的版本非常旧。升级到较新的修复它。我认为包名称是“pcre ...”。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-05-23T10:33:25.860

我也遇到过这个问题。在我的例子中，设计是一个自定义的复选框/收音机实现，这意味着原始的复选框/收音机被完全隐藏，让用户无法改变他们的选择。

我在标签内也有表单元素。上面的 Fieldset 解决方案什么也没做。使用将标签绑定到表单元素`for="<field-id>"`也不起作用。

起作用的是：

```
<label onclick="this.querySelector('input').click()">
    <input type="radio" />
</label> 
```

# c# - C# 表单 - 使用 Paint 方法？

> ID：10581599
> 
> 赞同：1
> 
> 时间：2012-05-14T10:29:10.743
> 
> 标签：c#, forms, drawing, polygon, graphic

在 c# 表单中，我创建了一个新的绘制方法：

```
private void thisPolygon(PaintEventArgs e)
{
    Pen clrBlue = new Pen(Color.Blue, 3);
    Point[] Wst = new Point[5];
    Wst[0] = new Point(20, 350);
    Wst[1] = new Point(110, 200);
    Wst[2] = new Point(200, 190);
    Wst[3] = new Point(210, 275);
    Wst[4] = new Point(190, 400);
    Wst[5] = new Point(50, 390);
    e.Graphics.DrawPolygon(clrBlue, Wst);
} 
```

现在，我该怎么称呼它？我不能让它工作，这不起作用：

```
private void Form1_Load(object sender, EventArgs e)
{
    thisPolygon(); ///I've tried adding some stuff in brackets area, failed.
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-14T10:37:12.547

你有几个不同的问题。

(1)**阵列容量**。您的阵列已初始化为 5 个存储位置，但您正尝试设置第六个值。

```
Point[] Wst = new Point[5]; // 5 indexes
...
Wst[5] = new Point(50, 390); // Tries to access a sixth, but is out of bounds 
```

将此更改为。

```
Point[] Wst = new Point[6]; 
```

请记住，数组是从零开始索引的。

(2)**不使用 OnPaint**。您正在调用`thisPolygon`该`OnLoad`方法，该方法不会保留您的绘图。将您的调用移至`OnPaint`表单的方法。

```
protected override void OnPaint(PaintEventArgs e) {
    base.OnPaint(e);
    thisPolygon();
} 
```

(3)**不通过 PaintEventArgs**。您没有将任何事件参数传递给您的`thisPolygon`方法，它甚至不会按原样编译。`OnPaint`从方法中传入绘画参数。

```
protected override void OnPaint(PaintEventArgs e) {
    base.OnPaint(e); // Pass in e
    thisPolygon();
} 
```

# android - 使用 android sprite 旋转图像

> ID：10581600
> 
> 赞同：0
> 
> 时间：2012-05-14T10:29:11.667
> 
> 标签：android, sprite

我正在建立一个效果与此相同的虚拟商店

[在此处输入链接描述](http://www.htc.com/au/smartphones/)

用户可以自由地从左到右和从上到下旋转图像，反之亦然。我想使用 sprite 2D 来实现该动画。我找到了一些教程，但是因为我对图形编程很陌生，所以任何人都可以指出我达到预期性能的正确方法。非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T14:36:36.257

如果您使用 2D，则需要一组从不同角度显示产品的图像。我建议你做一些 3D 建模，并将每一帧渲染到一个精灵表。

但是，这种方法并不占用内存。但我认为这是最有效的方法。

以谷歌为例：[https ://lh4.googleusercontent.com/zBSMnjLUDehX2xqqJwLb4wB6Ls4QMExlhum69K48fTNxPf71CJoYBg28DeAvNEYrQkkUdqRJAShD16BXVEXbfNoq9SBF9yINe5-nmQd8a3fGnt9KaJI](https://lh4.googleusercontent.com/zBSMnjLUDehX2xqqJwLb4wB6Ls4QMExlhum69K48fTNxPf71CJoYBg28DeAvNEYrQkkUdqRJAShD16BXVEXbfNoq9SBF9yINe5-nmQd8a3fGnt9KaJI)

# javascript - MVC 是否适用于 JavaScript Web 应用程序？

> ID：10581611
> 
> 赞同：2
> 
> 时间：2012-05-14T10:30:06.423
> 
> 标签：javascript, model-view-controller, web

我试图了解`MVC`（例如，它适用于 Java 桌面应用程序）是否适用于 JavaScript Web 应用程序。

`MVC`我的意思是：

*   *模型*是表示应用程序状态的数据。它不知道页面 DOM。
*   *View*是 DOM 树和函数，它监听 Model 的变化并更新 DOM
*   *控制器*监听用户手势（例如“按下按钮”），调用服务器，并更新*模型*而不是*视图*。

我浏览了几个 JavaScript 应用程序，发现了一些不同的东西。*它们在Model*和*View*之间没有明确的区别。也就是说，应用程序状态分散在 DOM 树上，而*控制器*（例如 ajax 回调）直接更新*视图*（DOM 树）。

现在我想知道`MVC`上面描述的是否真的适用于在浏览器中运行的 JavaScript 应用程序。你怎么看？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T10:37:04.313

带有 JavaScript 的 MVC 已经存在并且已经成为可能。那里有大量的图书馆。我给你一些资源来挖掘：

*   [http://addyosmani.com/toolsforjqueryapparchitecture/](http://addyosmani.com/toolsforjqueryapparchitecture/)
*   [http://codebrief.com/2012/01/the-top-10-javascript-mvc-frameworks-reviewed/](http://codebrief.com/2012/01/the-top-10-javascript-mvc-frameworks-reviewed/)
*   [https://gist.github.com/441889](https://gist.github.com/441889)
*   [http://peter.michaux.ca/articles/mvc-architecture-for-javascript-applications](http://peter.michaux.ca/articles/mvc-architecture-for-javascript-applications)
*   [http://addyosmani.com/blog/building-apps-spinejs/](http://addyosmani.com/blog/building-apps-spinejs/)

Addy Osmani 博客包含很多关于 JavaScript 设计模式的信息，特别是关于 MVC，你应该看看[http://addyosmani.com/blog/](http://addyosmani.com/blog/)。他还写了一本关于 Javascript 设计模式的书[http://addyosmani.com/resources/essentialjsdesignpatterns/book/](http://addyosmani.com/resources/essentialjsdesignpatterns/book/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-14T10:33:40.790

在 JavaScript 中，由于其动态特性，这些模式会有所不同，具体取决于构建它们的程序员和基于它构建的应用程序。而 MVC 只是[一大堆模式](http://addyosmani.com/resources/essentialjsdesignpatterns/book/)中的一种。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-14T10:34:55.657

您可以将 MVC 用于 JavaScript 应用程序，并且[不乏可提供帮助的框架](https://www.google.co.uk/search?sugexp=chrome,mod=19&sourceid=chrome&ie=UTF-8&q=javascript+mvc+frameworks)。

但是有很多应用程序不是这样（部分原因是 JavaScript 直到最近才被广泛认为是一种“严肃”的语言，所以这种开发实践对于大部分 JS 社区来说都是新的）。

# report - APEX：如何在交互式报告中更改链接列的位置？

> ID：10581620
> 
> 赞同：1
> 
> 时间：2012-05-14T10:30:46.440
> 
> 标签：report, oracle-apex, interactive

我想将**链接列**放置到其他位置，而不仅仅是作为报告中的第一列。怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T11:15:22.487

最新版本的 APEX (4.1) 显示了在查看列列表时如何移动列位置： ![在此处输入图像描述](../Images/51ba748fedd7ac8100d3c2846d9a64c2.png)

这也适用于旧版本，但提示未显示在列属性面板中。

但是，这不适用于 APEX 提供的特殊链接列。提示文本说：

> 链接列包含在报告中的第一列，用户无法隐藏。链接列可以导航到所选行的单行详细视图、应用程序中的另一个页面或提供的 URL。

所以看起来你不能改变它的位置——除非写一些漂亮的 Javascript 来修改 DOM。

不过，您不必使用 APEX 内置的链接列，您只需向查询中添加一个额外的列，并使用报告列的链接属性将其变为链接。然后，这将像所有其他列一样可移动。

# java - 使用java playframework在heroku中的应用程序错误

> ID：10581622
> 
> 赞同：3
> 
> 时间：2012-05-14T10:30:48.767
> 
> 标签：java, heroku, playframework

我正在尝试在 Heroku 中发布一个 Play 框架应用程序。我按照[这里](https://devcenter.heroku.com/articles/java)的说明进行操作。我也有以下依赖项

```
 java
   play framework 1.2.4
   mongolab
   morphia 1.6.2a 
```

当我使用命令“heroku open”在heroku中打开应用程序时。它显示错误如下..，

```
Oops, an error occured

This exception has been logged with id 6ac06o8hm. 
```

但是该项目在本地运行没有任何问题，指向本地 MongoDB 数据库。

例外

```
2012-05-14T10:17:30+00:00 app[web.1]:
2012-05-14T10:17:30+00:00 app[web.1]: NullPointerException occure
d : null
2012-05-14T10:17:30+00:00 app[web.1]:   at play.mvc.ActionInvoker
.invoke(ActionInvoker.java:231)
2012-05-14T10:17:30+00:00 app[web.1]: play.exceptions.JavaExecuti
onException
2012-05-14T10:17:30+00:00 app[web.1]:   at Invocation.HTTP Reques
t(Play!)
2012-05-14T10:17:30+00:00 app[web.1]:   at com.mongodb.CommandRes
ult.getException(CommandResult.java:64)
2012-05-14T10:17:30+00:00 app[web.1]: Caused by: java.lang.NullPo
interException
2012-05-14T10:17:30+00:00 app[web.1]:   at com.mongodb.DBPort.che
ckAuth(DBPort.java:308)
2012-05-14T10:17:30+00:00 app[web.1]:   at com.mongodb.DBTCPConne
ctor.call(DBTCPConnector.java:201)
2012-05-14T10:17:30+00:00 app[web.1]:   at com.mongodb.CommandRes
ult.throwOnError(CommandResult.java:116)
2012-05-14T10:17:30+00:00 app[web.1]:   at com.mongodb.DBApiLayer
$MyCollection.__find(DBApiLayer.java:303)
2012-05-14T10:17:30+00:00 heroku[router]: GET smooth-lightning-41
34.herokuapp.com/favicon.ico dyno=web.1 queue=0 wait=0ms service=
58ms status=500 bytes=417
2012-05-14T10:17:30+00:00 app[web.1]:   at com.mongodb.DBCursor._
hasNext(DBCursor.java:490)
2012-05-14T10:17:30+00:00 app[web.1]:   at com.mongodb.DBCursor._
check(DBCursor.java:360)
2012-05-14T10:17:30+00:00 app[web.1]:   at com.google.code.morphi
a.query.QueryImpl.asList(QueryImpl.java:255)
2012-05-14T10:17:30+00:00 app[web.1]:   at com.mongodb.DBCursor.h
asNext(DBCursor.java:515)
2012-05-14T10:17:30+00:00 app[web.1]:   at play.modules.morphia.M
odel$MorphiaQuery.asList(Model.java:1320) 
```

**更新**

```
-----> Heroku receiving push
-----> Fetching custom buildpack... done
-----> Play! app detected
-----> Installing Play! -.....
-----> Error installing Play! framework or unsupported Play! fram
ework version specified. Please review Dev Center for a list of s
upported versions.
 !     Heroku push rejected, failed to compile Play! app

To git@heroku.com:young-spring-3743.git
 ! [remote rejected] master -> master (pre-receive hook declined)

error: failed to push some refs to 'git@heroku.com:young-spring-3
743.git' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T10:42:33.373

查看日志我可以看到有一个空指针异常，所以下面的事情之一可能是原因：

1.  传递了一个未初始化的变量
2.  有一个未注册的错误
3.  对空集合有一个方法调用
4.  连接由空请求传递

您需要检查所有上述可能性。

# iphone - iOS 灵活布局

> ID：10581624
> 
> 赞同：3
> 
> 时间：2012-05-14T10:30:57.987
> 
> 标签：iphone, ios

我正在尝试创建一个简单的灵活布局：

![我的布局](../Images/8262c9026c313e20cb44a40aee8357a8.png)

我的应用程序有一个`UITextView`（红色框），其中包含可变数量的文本。下面是 a`UIRoundedRectButton`和 a `UILabel`。

我已经根据里面的内容拉伸了textview。我想知道如何实现灵活的布局，以便如果 textview 内部有很多内容，按钮/标签会自动向下轻推。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-14T10:39:42.003

1.  将所有内容放在另一个视图中，并在两个橙色视图上设置自动调整大小，使它们具有灵活的上边距，并在红色视图上设置灵活的下边距。当您的文本更改时调整容器视图的大小，使其足够容纳所有内容。

2.  使整个事物成为具有 2 种或更多不同类型单元格的 tableview。第一个单元格包含文本字段，其高度根据您的数据长度设置。下部单元格然后自动向下移动。如果您使用的是 iOS 5+，使用静态表格视图和插座很容易实现。您可以关闭滚动、分隔符等，使其看起来像一屏正常的内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T11:16:49.893

它在 yourViewController 委托方法中太简单`viewWillAppear`了

只需输入以下代码....

```
-(void)viewWillAppear:(BOOL)animated
{
 yourTextView.text=yourdata;//here your inserted data ie.. yourdata is string variable

    yourTextView.frame = CGRectMake(yourTextView.frame.origin.x, yourTextView.frame.origin.y, yourTextView.frame.size.width, yourTextView.contentSize.height);

float btnscreen = yourTextView.frame.origin.y + yourTextView.contentSize.height + 15;

yourButton.frame=CGRectMake(yourButton.frame.origin.x, btnscreen, yourButton.frame.size.width, yourButton.frame.size.height);

float lblscreen = yourButton.frame.origin.y + yourButton.frame.size.height + 10;

yourLable.frame=CGRectMake(yourLable.frame.origin.x, lblscreen, yourLable.frame.size.width, yourLable.frame.size.height);
} 
```

在这里，首先在您的 .m 文件中使用此代码后在 XIB 中创建您的视图.....是的，如果您的控件超出范围，请使用 UIScrollView 并将此控件放入您的滚动视图中，然后使用此代码进行工作好的...希望这对您有帮助... :)

# numpy - numpy 相当于 MATLAB spones

> ID：10581625
> 
> 赞同：3
> 
> 时间：2012-05-14T10:31:00.777
> 
> 标签：numpy, python-3.x, scipy

这是 MATLAB 内置函数的文档字符串`spones(S)`：

> 海绵
> 
> 用 1 替换非零稀疏矩阵元素。R = spones(S) 生成一个与 S 具有相同稀疏结构的矩阵，但在非零位置有一个。

我想使用 numpy/scipy 数据结构（例如，`scipy.sparse`来自 我怎样才能有效地做到这一点？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-14T10:42:41.673

```
x = ... some sparse matrix ...
y = x.copy().tocsr()
y.data.fill(1) 
```

# sql-server-2005 - SQL Server 2005 - 动态插入查询问题

> ID：10581627
> 
> 赞同：1
> 
> 时间：2012-05-14T10:31:06.190
> 
> 标签：sql-server-2005

我正在努力让这个语句运行

```
SET @SelectStatement = 'INSERT INTO [ArchiveProcessHistory] VALUES (' + @TableName + ',' + @TotalRowsSource +',' + @TotalRowsDestination + ',' + GetDate()') ' 
```

[我知道上述陈述有问题，我无法修复）

```
SET @FullStatement = @SelectStatement 
```

ArchiveProcessHistory 表结构为：

```
TableName - nvarch(5)
TotalRowsSource - integer
TotalRowsDestination - integer
DateofInsert - Date 
```

当我通过 sp_executesql 运行时，它给了我这个错误

> 消息 102，级别 15，状态 1，过程 usp_ArchiveTable，第 39 行 ')' 附近的语法不正确。

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T10:34:32.600

```
SET @SelectStatement = 'INSERT INTO [ArchiveProcessHistory] VALUES (' + @TableName + ',' + @TotalRowsSource +',' + @TotalRowsDestination + ',' + GetDate() + ') ' 
```

`+`后缺一个`getdate()`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-14T10:42:44.657

为避免潜在的 SQL 注入攻击，您可以改用[sp_executesql](http://msdn.microsoft.com/en-us/library/ms188001.aspx)。

```
declare @SelectStatement nvarchar(max)

set @SelectStatement = 
  'INSERT INTO [ArchiveProcessHistory] VALUES
    (@TableName, @TotalRowsSource, @TotalRowsDestination, GetDate())'

exec sp_executesql @SelectStatement,
                   N'@TableName nvarchar(5), @TotalRowsSource int, @TotalRowsDestination int',
                   @TableName = '123', 
                   @TotalRowsSource = 4, 
                   @TotalRowsDestination = 5 
```

您还应该看看[动态 SQL 的诅咒和祝福](http://www.sommarskog.se/dynamic_sql.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-14T10:41:00.787

在作为函数的插入语句中，不要使用 GetDate()，而是使用 current_timestamp。

```
SET @SelectStatement = 'INSERT INTO [ArchiveProcessHistory] VALUES (' + @TableName + ','   + @TotalRowsSource +',' + @TotalRowsDestination + ',' + current_timestamp + ') ' 
```

# php - 包装mysql事务

> ID：10581628
> 
> 赞同：0
> 
> 时间：2012-05-14T10:31:06.813
> 
> 标签：php, mysql, transactions

我有 3 个 mysql 查询要运行

```
mysql_query( "create temporary table here ");
mysql_query( "UPDATE Statement goes here ");
mysql_query( "DROP temporary table here  ") or die(mysql_error()) 
```

我如何将这些包装在交易中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T10:33:17.877

你没有。DDL 语句，例如`create temporary table here`从来不是 MySQL 中事务的一部分。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T10:34:21.867

你可以使用[mysqli_multi_query](http://php.net/manual/en/mysqli.multi-query.php)

```
mysqli_multi_query("CREATE ...;UPDATE Statement.. ; DROP temp "); 
```

注意; 查询之间。

# powershell - Powershell 脚本

> ID：10581632
> 
> 赞同：0
> 
> 时间：2012-05-14T10:31:21.637
> 
> 标签：powershell, batch-file

我有类似的问题，我想在 Win 7 上安装 Ciscoemail，但它根本不起作用。我已经使用此脚本通过组策略在 Win XP 上成功安装了它

```
md c:\ciscoemail

if not exist c:\ciscoemail\CiscoEmailSecurity_7-2-0-039.exe copy \\Domain Name\cisco\CiscoEmailSecurity_7-2-0-039.exe c:\ciscoemail /Y
if not exist c:\ciscoemail\response_file.iss copy \\Domain Name\cisco\response_file.iss c:\ciscoemail /Y
del c:\ciscoemail\setup.log /f /q

if not exist C:\PROGRA~2\Cisco\CISCOI~1\CISCOE~1.DLL c:\ciscoemail\CiscoEmailSecurity_7-2-0-039.exe /s /v /qn /f1"c:\ciscoemail\response_file.iss" 
```

有人可以协助将代码转换为 Powershell 代码。简单的步骤是：

1.  将目录制作到本地 c 驱动器。

2.  检查 ciscoemail 是否存在于本地 C 盘。

3.  如果文件夹不存在，则创建文件夹并将 ciscoemail\CiscoEmailSecurity_7-2-0-039.exe 和 ciscoemail\response_file.iss 复制到 C 盘

4.  .exe（安装文件）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T10:54:51.060

基本翻译：

```
# In PowerShell, md is an alias to mkdir which 
# is a function for creating folders
$folder = md c:\ciscoemail

# copy is an alias for Copy-Item
if( -not(Test-Path -Path c:\ciscoemail\CiscoEmailSecurity_7-2-0-039.exe))
{
    copy -Path \\Domain Name\cisco\CiscoEmailSecurity_7-2-0-039.exe -Destination $folder.FullName
}

if( -not(Test-Path -Path c:\ciscoemail\response_file.iss))
{
    copy -Path \\Domain Name\cisco\response_file.iss -Destination $folder.FullName
}

if( Test-Path -Path c:\ciscoemail\setup.log )
{
    # del is an alias to Remove-Item
    del -Path c:\ciscoemail\setup.log -ErrorAction SilentlyContinue -Force
}        

if( -not(Test-Path -Path "C:\PROGRA~2\Cisco\CISCOI~1\CISCOE~1.DLL"))
{
    c:\ciscoemail\CiscoEmailSecurity_7-2-0-039.exe /s /v /qn /f1"c:\ciscoemail\response_file.iss"
} 
```

# objective-c - 是否可以通过 IB 指定 UITextField 中的最大字符数

> ID：10581633
> 
> 赞同：1
> 
> 时间：2012-05-14T10:31:24.817
> 
> 标签：objective-c, ios, uitextfield

我一直想知道是否有一种方法可以通过 IB 指定 UITextField 中允许的最大字符数，而不必重写 UITextField 方法。

我已经成功使用

```
- (BOOL)textField:(UITextField *)textField shouldChangeCharactersInRange:(NSRange)range replacementString:(NSString *)string 
```

过去，我只是想知道我是否错过了 IB 中的复选框。

干杯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T10:46:03.293

IB（Interface Builder）不会为你做任何逻辑。因此，没有这样的功能。正如您自己描述的那样，这是使用[UITextFieldDelegate完成的。](http://developer.apple.com/library/ios/#DOCUMENTATION/UIKit/Reference/UITextFieldDelegate_Protocol/UITextFieldDelegate/UITextFieldDelegate.html)

# java - 根据对象名称对对象列表进行排序

> ID：10581634
> 
> 赞同：2
> 
> 时间：2012-05-14T10:31:24.910
> 
> 标签：java

我有一个**水果**模型类：

```
public class Fruit{
   private String name;
   private String color;

   public Fruit(String name, color){
     this.name = name;
     this.color = color;
   }
   public getName(){
      return name;
   }
   public getColor(){
      return color;
   }
} 
```

然后，我创建了一个列表`fruits`：

```
List<Fruit> fruits = new ArrayList<Fruit>();

fruits.add(new Fruit("Orange","orange"));
fruits.add(new Fruit("Strawberry","red"));
fruits.add(new Fruit("Apple","green"));
fruits.add(new Fruit("Banana","yellow")); 
```

现在，我想根据**水果名称****按字母顺序**`fruits`对元素进行排序。如何有效地对水果列表进行排序？

 ***** * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-14T10:33:40.273

您可以使用`Collections.sort()`，定义一个`Comparator`. 例如：

```
Collections.sort(
    fruits,
    new Comparator<Fruit>()
    {
        public int compare(Fruit f1, Fruit f2)
        {
            // Ignore case for alphabetic ordering.
            return f1.getName().compareToIgnoreCase(f2.getName());
        }
    }); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-14T10:33:38.093

使用以下

```
Collections.sort(fruits);

public class Fruit implements Comparable {

    public int compareTo(Object o) {            
        Fruit f = (Fruit) o;
        return this.getName().compareTo(f.getName());
    }

} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-14T10:35:19.243

在fruit类上实现`comparable`接口，使用`Collections.sort(list)` [http://docs.oracle.com/javase/6/docs/api/java/lang/Comparable.html](http://docs.oracle.com/javase/6/docs/api/java/lang/Comparable.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-14T10:37:25.703

```
public class Fruit implements Comparable<Fruit> {
{
   public int compareTo(Fruit f) {
       if (this.Name == f.Name)
           return 0;
       else if (this.Name > f.Name)
           return 1;
       else
           return -1;
    }
} 
```

像这样使用它：

```
Collections.sort(fruits); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-14T10:34:29.677

您可以使用比较器。有关文档，请查看 [http://docs.oracle.com/javase/7/docs/api/java/util/Comparator.html](http://docs.oracle.com/javase/7/docs/api/java/util/Comparator.html)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-14T10:43:42.207

```
public Comparator<Fruit> fruitComparator = new Comparator<Fruit>() {
        @Override
        public int compare(Fruit f1, Fruit f2) {

            return f1.getName().compareTo(f2.getName());
        }
    }; 
```

接着：

```
Collections.sort(fruits, fruitComparator ); 
```****

# drupal - 如何通过节点号阻止直接内容访问？

> ID：10581635
> 
> 赞同：0
> 
> 时间：2012-05-14T10:31:35.810
> 
> 标签：drupal, permissions

我在 Drupal 7 上安装了模块 Content Access 以阻止匿名用户查看内容类型。但我发现匿名用户可以通过 http...domain/?q=node/99 之类的 URL 来查看它们。

如何保护我的内容？

此致。

雨果

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T15:00:51.547

尝试重建权限（在状态报告部分）。如果这不起作用，[请关注](http://drupal.org/project/issues/content_access?text=&status=Open&priorities=All&categories=All&version=7.x&component=All)内容访问模块上的问题，因为它仍处于 D7 的测试阶段。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T15:05:06.883

看起来您使用内容访问模块做出了正确的选择。这将在内容类型配置下公开一组访问控制操作。（即 admin/structure/types/manage/page/access）如果这些标志设置正确，匿名用户应该不能输入 URL 和/或访问此内容。

我会查看您的所有标志，尤其是在您定义“每个节点”权限的情况下。您很可能配置错误的标志。

我还发现下面的链接有助于理解节点访问控制和我们作为 Drupal 用户的选项：

[http://www.palantir.net/blog/controlling-nodes-drupal-7](http://www.palantir.net/blog/controlling-nodes-drupal-7)

玩得开心！

尼克 www.nickgs.com

# mysql - php MYadmin mysql 错误（需要运行查询并忽略错误）

> ID：10581636
> 
> 赞同：1
> 
> 时间：2012-05-14T10:31:36.720
> 
> 标签：mysql, sql, phpmyadmin, mysqldump, mysql-management

我有 .sql 格式的补丁。我复制了查询并将其粘贴到 phpmy admin 中，在执行时，我的电脑由于电源故障而重新启动。现在这些 SQL 语句有一半被执行，一半没有执行，当我再次尝试运行这些语句时，我得到重复条目、表错误等。

> 有没有办法在忽略遇到的错误的情况下执行 .sql 文件。

有人告诉我这可以通过 mysql 提示符完成？有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T12:45:45.270

使用`mysql`的[`--force`选项](http://dev.mysql.com/doc/en/mysql-command-options.html#option_mysql_force)：

> ```
> --强制，-f
> ```
> 
> 即使发生 SQL 错误也要继续。

# jquery - jQuery 和 IE7 玩得不好

> ID：10581639
> 
> 赞同：-1
> 
> 时间：2012-05-14T10:31:47.420
> 
> 标签：jquery, ajax, internet-explorer-7

我看不出他的代码块有什么问题，但出于某种原因，IE7 让我很难过

```
$('.vote').live('click', function() {

        var post_url = base_url + 'ajax_vote' ;
        var mask_id = $(this).attr('id');
        var btn = $(this);

        $.ajax({
            type:   "POST",
            url:    post_url,
            data:   "mask_id=" + mask_id,
            }).done(function( msg ) {
                if( msg == 'pass' ){
                    get_votes(mask_id);
                    btn.replaceWith('<span class="success">Thanks for voting</span>');
                }
                else{
                    btn.replaceWith('<span class="error">You have already voted for this.</span>');
                }
            });

        return false;
    }); 
```

谁能看到我做了什么让它抱怨。运行 jQuery 1.6.2，它位于活动灯箱中，因此 .live

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T10:37:25.140

[`.live()`](http://jsperf.com/jquery-live-vs-delegate-vs-on)对于初学者来说，尽可能避免。

现在解决您的问题：

```
// this doesn't do what you think.
.done(function( msg ) { 
```

您应该[使用](http://api.jquery.com/jQuery.ajax/).`.ajax()`

# java - Android Java 代码格式化

> ID：10581642
> 
> 赞同：0
> 
> 时间：2012-05-14T10:31:57.933
> 
> 标签：java, android, formatting

我是 Android 开发和 Java 的新手。我正在做一个中等规模的项目。我想知道如何最好地组织代码。现在我有太多的类，所以我使用文件查找太多东西。我已经读到无法将例如图标存储在特定的子文件夹下。我也没有找到一种方法来用类来做到这一点。是否不能添加一个文件夹，然后将命名空间扩展到 my.project.com.foldername？我有很多课程，我想分组。例如，我会在文件夹中将类型数据库、布局等类别组合在一起。如果我创建一个新包，我将无法轻松访问公共类。或者我错过了什么。

是否有类似部分或区域的东西来将代码分组到一个类中？我想折叠代码并展开以查看区域，或者在 Java 中如何调用它。类似于方法的描述。但我想将例如 5 个公共方法放在一个公共区域中。因此，如果我知道它们是公开的，我会很快找到它。

请记住，我是 Java 和 Android 新手。所以我可能会错过一个明显的点。

此致，

帕特里克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T10:43:52.217

正确的方法是使用包。像这样分组你的类：

```
com.myservername.myapp.database 
com.myservername.myapp.layout 
```

为每个包创建一个新文件夹。Eclipse 会自动为您完成这项工作。要使用来自不同包的类的公共方法，您需要导入它：

```
import com.myservername.myapp.database.MyClass; 
```

Eclipse 再次成为您的朋友。键入 Ctrl+Shift+O（右键单击、来源、组织导入）以自动添加声明。

Eclipse 的编辑器不支持仅折叠公共或私有方法。但是您可以使用大纲在方法之间导航。公共方法用绿色圆圈表示，私有方法用红色方块表示。保持你的类小，你不应该有浏览代码的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T10:45:14.853

对于类：您可以将它们组织成所谓的[包](http://en.wikipedia.org/wiki/Java_package)。这将在磁盘上创建包含特定包类的文件夹。在您的 IDE 中右键单击您的基本包，应该有一个选项“添加包”或类似的东西。

图标：我通过名称的前缀来跟踪图标。例如，Android SDK 使用 ic_ 前缀作为菜单和 ActionBar 图标。

# windows-8 - Windows 8 中的列表视图（WinJS）中的动态模板

> ID：10581644
> 
> 赞同：4
> 
> 时间：2012-05-14T10:32:17.267
> 
> 标签：windows-8, winjs

我有一个 Windows 8 应用程序，在列表布局中有一个简单的列表视图。我已经获取了我的博客项目（联合），现在我想要实现的是添加一个动态项目，该项目将用作“加载更多”按钮。为此，我想为此项目指定一个不同的模板。我发现的示例使用了一个函数模板，它确实不是很通用，因为我必须使用 JavaScript 加载所有模板元素。有没有办法根据项目属性动态指定 WinJS.Binding.Template ？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-29T09:54:35.813

一篇关于这个主题的优秀文章

[http://stephenwalther.com/blog/archive/2012/05/23/metro-dynamically-switching-templates-with-a-winjs-listview.aspx](http://stephenwalther.com/blog/archive/2012/05/23/metro-dynamically-switching-templates-with-a-winjs-listview.aspx)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-14T14:15:40.637

我之前确实有同样的问题。我处理这个问题的方式如下：

```
function listItemTemplateRenderer(item) {

    //Get data from item.
    var data = item._value.data;

    // if it is a special item renderer, apply special template
    if (data.isSpecialItem) {
        return specialItemRenderer(data);
    }

    var itemElement = document.createElement('div');
    itemElement.className = "listItemTemplate";

    var placeHolder = document.createElement('div');
    placeHolder.className = "itemTemplateClass";
    placeHolder.id = data.id;

    var itemDetail = document.createElement('div');
    itemDetail.className = "itemDetailStyle";

    ... //whatever you wanna add to your template

    //Append child elements
    placeHolder.appendChild(itemDetail);
    itemElement.appendChild(placeHolder);

    return {
        element: itemElement
    };
}

// Template for the special item
function messageItemRenderer(item) {

    var itemElement = document.createElement('div');
    itemElement.className = "listItemTemplat";

    var placeHolder = document.createElement('div');
    placeHolder.className = "specialItemTemplate";
    placeHolder.id = item.id;

    var dataText = document.createElement('div');
    dataText.className = "dataText";
    dataText.innerText = item.text;
    placeHolder.appendChild(dataText);

    itemElement.appendChild(placeHolder);

    itemElement.onclick = item.clickHandler;

    return {
        element: itemElement
    };
} 
```

希望这可以帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-14T13:25:30.573

我认为本教程的最后一部分“**[使用函数显示项目](http://msdn.microsoft.com/en-us/library/windows/apps/hh700705.aspx)**”可以帮助您。在该函数中，您可以确定列表中有哪些项目并呈现不同的模板。也可以从您的 HTML 文件中加载不同的模板。

您可能拥有的另一个选项是将[pagesToLoad属性与](http://msdn.microsoft.com/en-us/library/windows/apps/br211839.aspx)[automaticLoadPages](http://msdn.microsoft.com/en-us/library/windows/apps/hh700671.aspx)属性结合使用。当用户滚动到列表框的末尾时，这将自动开始加载新项目。

# winapi - 在下拉组合框中更改时获取选定的项目文本

> ID：10581646
> 
> 赞同：1
> 
> 时间：2012-05-14T10:32:19.693
> 
> 标签：winapi

我用两个项目创建了一个简单的下拉组合框，它是工具栏上的一个子窗口。选择一个项目时，我想获取所选项目的文本。我在组合框上使用了 Spy++，但没有找到有用的消息来执行此操作。所以我将消息 CBN_SELCHANGE 用于工具栏的窗口过程。看起来像：

```
if (CBN_SELCHANGE == HIWORD(wParam))
    GetText(....) 
```

但问题是：假设这两项分别是“第一”和“第二”，而“第一”已经被选中。当我选择“第二”时，GetText 得到的文本仍然是“第一”。我发现在出现 CBN_SELCHANGE 消息时调用 GetText 为时过早。但我找不到调用 GetText 的好方法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-14T10:47:26.340

在确定当前选择后（例如使用[CB_GETCURSEL](http://msdn.microsoft.com/en-us/library/windows/desktop/bb775845%28v=vs.85%29.aspx "CB_GETCURSEL")），而不是调用`GetWindowText`使用消息[CB_GETLBTEXT 。](http://msdn.microsoft.com/en-us/library/windows/desktop/bb775862%28v=vs.85%29.aspx "CB_GETLBTEXT")

# php - 创建“通过电子邮件发送此页面”给某人链接的快速简便的方法？

> ID：10581649
> 
> 赞同：5
> 
> 时间：2012-05-14T10:32:29.280
> 
> 标签：php, html

有没有一种快速的方法来创建一个链接，当点击该链接时，用户可以通过 mailto 发送他们所在页面的链接？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-14T10:42:12.253

要发送您所在页面的链接，请尝试使用以下代码：

```
<a HREF="mailto:?subject=look at this website&body=Hi,I found this website
and thought you might like it <?php
$url="http://".$_SERVER['HTTP_HOST'].$_SERVER['REQUEST_URI'];
echo $url;
?>">Tell a friend!</a> 
```

php 将获取您当前所在页面的 url。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-14T10:35:03.037

为什么不使用 mailto HTML 链接？

```
<a href="mailto:?Subject=A%20page%20I%20found%20interesting&body=url_of_your_page">
    Mail this page to a friend
</a> 
```

不要忘记对您的主题/正文内容进行 urlencode，例如在 PHP 中使用[urlencode 。](http://us3.php.net/manual/en/function.urlencode.php)

# jquery - 以json格式发布

> ID：10581650
> 
> 赞同：0
> 
> 时间：2012-05-14T10:32:32.440
> 
> 标签：jquery, ajax, json, post

对不起英语不好:)

我试图以 json 格式为用 php/python 编写的 restapi 发布表单。如果我使用 json ，我将无法访问发布的数据。看下面的场景

非 json 帖子的代码

```
jQuery(document).ready(function($) {
     $.post(  
        "http://localhost:8000/api/v1/entry/?format=json",  
        {
        "body": "This will prbbly be my lst edited  post.",
        "pub_date": "2011-05-22T00:46:38",
        "slug": "another-post",
        "title": "Another Post",
        "username":"admin",
        "password":"admin"

        },  
        function(responseText){  
            $("#result").html(responseText);  
        },  
        "html"  
    );
  }) 
```

服务器响应

```
 Array
 (
 [body] => This will prbbly be my lst edited  post.
 [pub_date] => 2011-05-22T00:46:38
 [slug] => another-post
 [title] => Another Post
 [username] => admin
 [password] => admin
 ) 
```

Json Post 代码

```
 jQuery(document).ready(function($) {
   var data = JSON.stringify({
    "body": "This will prbbly be my lst edited  post.",
    "pub_date": "2011-05-22T00:46:38",
    "slug": "another-post",
    "title": "Another Post",
"username":"admin",
"password":"admin"

});

 $.post(  
        "testpost.php",  
        data,  
        function(responseText){  
            $("#result").html(responseText);  
        },  
        "html"  
    );
  }) 
```

服务器响应

```
Array
(
) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-14T10:34:51.430

好吧，您还没有将值分配给任何参数，因此 PHP 将无法填充`$_POST`数组。

将其分配给参数，例如`json`：

```
$.post("testpost.php", {json: data}, ...); 
```

然后，您将能够通过以下方式访问它：

```
$_POST['json']; 
```

或者如果你使用 PECL，你可以调用[`http_get_request_body` *^([docs])*](http://php.net/manual/en/function.http-get-request-body.php)来获取数据。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-14T10:39:15.110

这是正常响应，数据必须是键值对的数组/对象或正确编码的查询字符串，类似于 key=value&key2=value2 ...如果您想像在服务器端一样获取发布的数据，您应该阅读输入自己这样的东西：

```
$jsonDatas = file_get_contents('php://input') 
```

你可以在你的js中做更简单的方法：

```
data = { json: JSON.stringify({...}) } 
```

然后在 $_POST['json'] 服务器端获取结果。

如果你愿意，你可以在这里查看我的一个类来帮助你使用 php 服务器端的 json 服务：[http ://projects.jgotti.net/blog/15](http://projects.jgotti.net/blog/15)

# mysql - GroupBy 问题如何获取最后一个 id？

> ID：10581654
> 
> 赞同：0
> 
> 时间：2012-05-14T10:32:45.177
> 
> 标签：mysql, group-by

我有四个相关的表，并使用以下查询将它们与 4 个`LEFT JOIN`和 2 个`MAX()`聚合函数结合起来：

```
SELECT SQL_CALC_FOUND_ROWS
         id,
         cognome,
         nome,
         sesso,
         pr_sedute_complessive,
         presa_in_carico_data,
         cf,
         cnome,
         tdr_cognome,
         tdr_nome,
         COUNT(tbl_trattamenti.trt_id),
         MAX(tbl_trattamenti.data),
         pr_id
FROM     tbl_aziente p1
  LEFT JOIN comuni
         ON comuni.cid = p1.nascita_luogo 
  LEFT JOIN tbl_cartellaclinica
         ON tbl_cartellaclinica.pz_fk_id = p1.id 
  LEFT JOIN tbl_progetto
         ON tbl_progetto.cc_id_fk = tbl_cartellaclinica.cc_id 
  LEFT JOIN tbl_fisioterapista
         ON tbl_fisioterapista.tdr_id = tbl_progetto.pr_fisioterapista_fk 
  LEFT JOIN tbl_trattamenti
         ON tbl_progetto.pr_id = tbl_trattamenti.pr_fk_id 
WHERE    idoneo = 'y'
     AND p1.tipo_assistenza = 4
GROUP BY p1.id
LIMIT 0, 10 
```

这一切都很好，除了一件事：我想要`tbl_progetto`最高记录`id`而不是第一记录。我尝试使用`MAX(primaryKey)`，但我只得到了密钥 - 而不是具有该 pKey 的记录。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T11:31:25.990

基本原则是您需要引用`tbl_progetto` *两次*——一次在标识`id`感兴趣记录的子查询中，第二次获取该记录的其余部分。

假设 和 之间存在多对一关系`tbl_cartellaclinica`，`tbl_progetto`则子查询将是：

```
SELECT   tbl_cartellaclinica.pz_fk_id, MAX(tbl_progetto.pr_id) AS pr_id
FROM     tbl_cartellaclinica
    JOIN tbl_progetto
      ON tbl_progetto.cc_id_fk = tbl_cartellaclinica.cc_id
GROUP BY tbl_cartellaclinica.pz_fk_id 
```

因此，您修改后的查询将是：

```
SELECT SQL_CALC_FOUND_ROWS
         id,
         cognome,
         nome,
         sesso,
         pr_sedute_complessive,
         presa_in_carico_data,
         cf,
         cnome,
         tdr_cognome,
         tdr_nome,
         COUNT(tbl_trattamenti.trt_id),
         MAX(tbl_trattamenti.data),
         t.pr_id
FROM     tbl_aziente p1
  LEFT JOIN comuni
         ON comuni.cid = p1.nascita_luogo 
  LEFT JOIN tbl_cartellaclinica
         ON tbl_cartellaclinica.pz_fk_id = p1.id
  LEFT JOIN (
    SELECT   tbl_cartellaclinica.pz_fk_id, MAX(tbl_progetto.pr_id) AS pr_id
    FROM     tbl_cartellaclinica
        JOIN tbl_progetto
          ON tbl_progetto.cc_id_fk = tbl_cartellaclinica.cc_id
    GROUP BY tbl_cartellaclinica.pz_fk_id
  ) AS t ON t.pz_fk_id = tbl_cartellaclinica.pz_fk_id
  LEFT JOIN tbl_progetto
         ON tbl_progetto.cc_id_fk = tbl_cartellaclinica.cc_id
        AND tbl_progetto.pr_id = t.pr_id
  LEFT JOIN tbl_fisioterapista
         ON tbl_fisioterapista.tdr_id = tbl_progetto.pr_fisioterapista_fk 
  LEFT JOIN tbl_trattamenti
         ON tbl_progetto.pr_id = tbl_trattamenti.pr_fk_id 
WHERE    idoneo = 'y'
     AND p1.tipo_assistenza = 4
GROUP BY p1.id
LIMIT    0, 10 
```

# c# - 使用 WINMD 库会导致强名称验证异常

> ID：10581658
> 
> 赞同：0
> 
> 时间：2012-05-14T10:32:57.670
> 
> 标签：c#, .net, code-signing, windows-runtime, strongname

在 Windows 8 消费者预览版上使用 Visual Studio 11 测试版。

问题是：如果尝试使用输出类型设置为 WinMD 的类库中的类，我会收到一个安全异常，指出“强名称验证”失败（来自 HRESULT 的异常：0x8013141A）。我只是想使用 Visual Studio 运行（F5）一个小型测试应用程序。

如果我将输出类型设置为“类库”，问题就会消失。可以在此处找到一个小型（且相当琐碎）的测试项目：

[http://download.tallcomponents.com/WinRTApplication3.zip](http://download.tallcomponents.com/WinRTApplication3.zip)

我使用新生成的 .snk 文件（无密码）为类库设置了“签署程序集”标志。在生成的 ClassLibrary1.winmd 文件上运行 sn -vf 显示：

ClassLibrary1.winmd 是延迟签名或测试签名的程序集

所以也许问题基本上是输出没有“正确”签名？我只是不知道该怎么做才能解决这个问题，因为我已经指定了要签名的类库，我也不明白为什么只有在输出到 WinMD 文件时才会发生这种情况。我假设此时我不需要仅用于调试和测试的“官方”证书。

好吧，如果这是一个初学者问题，我很抱歉。我试图“谷歌”一个答案，但我主要得到了超过 2 年的点击率，谷歌建议“风”而不是 winmd……</p>

甚至不能在这里创建一个新标签“winmd”……（声望不够）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T05:00:21.200

如果您在 winmd 文件上遇到强名称验证错误，这通常是因为您使用的工具集不理解 .winmd 文件格式。

.winmd 文件不能进行强名称签名。

在这种情况下，问题可能是因为您尝试对组件库进行强名称签名 - C# 组件库生成包含 Windows 元数据和 C# IL 的混合 .winmd 文件。

为什么要对组件进行强名称签名？强名称签名主要用于将程序集放入 GAC 并且无法将 .winmd 文件插入 GAC 时。

# python - Twisted Cyclone - 请求完成后如何写入redis

> ID：10581659
> 
> 赞同：2
> 
> 时间：2012-05-14T10:32:57.760
> 
> 标签：python, twisted, cyclone

下面是我的基本处理程序。我只想提供一个图像，在请求完成后，我想写到 redis 但是当我运行下面的代码时，on_finish 没有被调用。

```
import cyclone.web
import cyclone.redis 
from twisted.internet import defer
from twisted.internet import reactor
tt = cyclone.redis.lazyConnectionPool()
class PixelHandler(cyclone.web.RequestHandler):
    @cyclone.web.asynchronous
    def get(self):
        qs = qs_decode(self.request.query)
        self.set_header('Content-Type', 'image/gif')
        self.write(pixel)
        redisPixelWrite(remote_ip)
        #self.finish()
    def on_finish(self):
        t = yield tt.multi()
        yield t.set('key', 'value')
        r = yield t.commit()
        print "commit=", repr(r) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T08:18:41.460

`on_finish`除非被调用，否则不会`self.finish()`被调用。我相信你已经知道了。在这种情况下的问题是 on_finish() 不支持`defer.inlineCallbacks`（你没有`on_finish()`用它装饰你的方法，但这样做没有帮助）。

我认为重写`on_finish()`以使用普通的旧延迟将使这项工作。尝试这样的事情：

```
 def on_finish(self):
        tt.multi().addCallback(
                lambda t: t.set('key', 'value').addCallback(
                    t.commit())) 
```

更好的方法是装饰您的`get()`方法`defer.inlineCallbacks()`并将其主体移动`on_finish()`到其中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-11T05:58:25.173

当前版本的旋风支持`on_finish`使用`inlineCallbacks`. 因此，修复代码很容易：

```
@defer.inlineCallbacks
def on_finish(self):
    ... 
```

# android - ImageButton 问题以及强制关闭 Android 中的项目

> ID：10581660
> 
> 赞同：0
> 
> 时间：2012-05-14T10:33:08.810
> 
> 标签：android, button, imagebutton, forceclose

我面临这个问题，即在给定背景时，android 中的按钮不可点击。所以，我使用了 ImageButton。 **在 Java 文件中如何声明 ImageButtons？** 我在文本视图中有一个红色的 otification 徽章，我想将它放在 ImageButton 的右上角。但是**textView 在按钮上不可见，即它在按钮后面隐藏了一半。解决方案是什么？**

另一个问题是我的项目面临强制关闭问题。**日志猫显示：**

```
05-11 04:13:29.508: D/(3913): 在定义意图之后

05-11 04:13:29.678: D/AndroidRuntime(3913): 关闭虚拟机

05-11 04:13:29.678: W/dalvikvm(3913): threadid=1: 线程退出未捕获异常 (group=0x4001d800)

05-11 04:13:29.688：E/AndroidRuntime（3913）：致命异常：主要

05-11 04:13:29.688: E/AndroidRuntime(3913): java.lang.RuntimeException: 无法启动活动组件信息
{phone.activities/phone.activities.leave}：java.lang.NullPointerException

05-11 04:13:29.688: E/AndroidRuntime(3913): 在 android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2663)

05-11 04:13:29.688: E/AndroidRuntime(3913): 在 android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2679)

05-11 04:13:29.688: E/AndroidRuntime(3913): 在 android.app.ActivityThread.access$2300(ActivityThread.java:125)

05-11 04:13:29.688: E/AndroidRuntime(3913): 在 android.app.ActivityThread$H.handleMessage(ActivityThread.java:2033)

05-11 04:13:29.688: E/AndroidRuntime(3913): 在 android.os.Handler.dispatchMessage(Handler.java:99)

05-11 04:13:29.688: E/AndroidRuntime(3913): 在 android.os.Looper.loop(Looper.java:123)

05-11 04:13:29.688: E/AndroidRuntime(3913): 在 android.app.ActivityThread.main(ActivityThread.java:4627)

05-11 04:13:29.688: E/AndroidRuntime(3913): 在 java.lang.reflect.Method.invokeNative(Native Method)

05-11 04:13:29.688: E/AndroidRuntime(3913): 在 java.lang.reflect.Method.invoke(Method.java:521)

05-11 04:13:29.688: E/AndroidRuntime(3913): 在 com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)

05-11 04:13:29.688: E/AndroidRuntime(3913): 在 com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)

05-11 04:13:29.688: E/AndroidRuntime(3913): at dalvik.system.NativeStart.main(Native Method)

05-11 04:13:29.688: E/AndroidRuntime(3913): 由: java.lang.NullPointerException 引起

05-11 04:13:29.688: E/AndroidRuntime(3913): 在 phone.activities.leave.onCreate(leave.java:33)

05-11 04:13:29.688: E/AndroidRuntime(3913): 在 android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)

05-11 04:13:29.688: E/AndroidRuntime(3913): 在 android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2627)

05-11 04:13:29.688: E/AndroidRuntime(3913): ... 11 更多

```

**强制关闭的原因是什么？**

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:layout_gravity="right"
android:orientation="vertical" android:clickable="true">

<LinearLayout
    android:id="@+id/linearLayout1"
    android:layout_width="match_parent"
    android:layout_height="wrap_content" >

    <TextView
        android:id="@+id/textView1"
        android:layout_width="wrap_content"
        android:layout_height="match_parent"
        android:gravity="center"
        android:paddingLeft="90dp"
        android:paddingRight="58dp"
        android:text="eApproval"
        android:textAppearance="?android:attr/textAppearanceLarge"
        android:textSize="22dp"
        android:textStyle="bold"
        android:typeface="sans" />
</LinearLayout>

<TableLayout
    android:id="@+id/tableLeft"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:gravity="left"
    android:paddingLeft="20dp"
    android:paddingRight="30dp"
    android:paddingTop="25dp" >

    <TableRow
        android:layout_width="match_parent"
        android:layout_height="match_parent">
<RelativeLayout android:layout_marginLeft="10dp">

    <Button
        android:id="@+id/buttonLeave"
        android:layout_width="70dp"
        android:layout_height="70dp"
        android:layout_alignParentLeft="true"
        android:layout_alignParentTop="true"
        android:layout_marginBottom="5dp"
        android:layout_marginLeft="20dp"
        android:layout_marginTop="10dp"
        android:clickable="true"
      />

 <TextView
 android:id="@+id/textOne"
 android:layout_width="30dp"
 android:layout_height="30dp"
 android:layout_marginLeft="70dp"
 android:background="@drawable/picture1"
 android:gravity="center"
 android:text="5"
 android:textColor="#FFF"
 android:textSize="14dp"
 android:textStyle="bold"
 android:typeface="sans" />

</RelativeLayout>       
<RelativeLayout android:paddingLeft="20dp" android:layout_marginLeft="10dp">
<Button
        android:id="@+id/buttonTime"
        android:layout_width="70dp"
        android:layout_height="70dp"
        android:layout_marginBottom="5dp"
        android:layout_marginLeft="25dp"
        android:clickable="true"

        android:height="60dp"
        android:width="30dp" 
        android:layout_alignParentLeft="true"
        android:layout_alignParentTop="true" android:layout_marginTop="10dp" />

<TextView
android:id="@+id/textTwo"
android:layout_width="30dp"
android:layout_height="30dp"
android:layout_marginLeft="80dp"
android:background="@drawable/picture1"
android:gravity="center"
android:text="4"
android:textColor="#FFF"
android:textSize="14dp"
android:textStyle="bold"
android:typeface="sans" />

</RelativeLayout>

    </TableRow>
    <TableRow >
        <TextView
            android:id="@+id/textLeave"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="Leave Requests"
            android:textAppearance="?android:attr/textAppearanceMedium"
            android:textSize="15dp"
            android:textStyle="normal|bold"
            android:typeface="sans"
            android:width="90dp" android:layout_marginLeft="20dp"
android:padding="5dp"
android:gravity="center"/>

         <TextView
            android:id="@+id/textTime"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="Time Booking"
            android:textAppearance="?android:attr/textAppearanceMedium"
            android:textSize="15dp"
            android:textStyle="bold"
            android:typeface="sans"
            android:width="90dp" android:layout_marginLeft="50dp" android:padding="5dp" 
android:gravity="center"/>
   </TableRow>

    <TableRow
        android:layout_width="match_parent"
        android:layout_height="match_parent" >
<RelativeLayout android:layout_marginLeft="10dp">

    <Button
        android:id="@+id/buttonCart"
        android:layout_width="70dp"
        android:layout_height="70dp"
        android:layout_marginBottom="5dp"
        android:layout_marginLeft="20dp"

        android:height="60dp"
        android:width="30dp" 
        android:layout_alignParentLeft="true"
        android:layout_alignParentTop="true" android:layout_marginTop="10dp" 
android:clickable="true"/>

 <TextView
 android:id="@+id/textThree"
 android:layout_width="30dp"
 android:layout_height="30dp"
 android:layout_marginLeft="70dp"
 android:background="@drawable/picture1"
 android:gravity="center"
 android:text="2"
 android:textColor="#FFF"
 android:textSize="14dp"
 android:textStyle="bold"
 android:typeface="sans" />

</RelativeLayout>       
<RelativeLayout android:paddingLeft="20dp" android:layout_marginLeft="10dp">
<Button
        android:id="@+id/buttonInvoice"
        android:layout_width="70dp"
        android:layout_height="70dp"
        android:layout_marginBottom="5dp"
        android:layout_marginLeft="25dp"

        android:height="60dp"
        android:width="30dp" 
        android:layout_alignParentLeft="true"
        android:layout_alignParentTop="true" android:layout_marginTop="10dp" 
android:clickable="true"/>

<TextView
android:id="@+id/textFour"
android:layout_width="30dp"
android:layout_height="30dp"
android:layout_marginLeft="80dp"
android:background="@drawable/picture1"
android:gravity="center"
android:text="3"
android:textColor="#FFF"
android:textSize="14dp"
android:textStyle="bold"
android:typeface="sans" />

</RelativeLayout>

    </TableRow>
      <TableRow >
        <TextView
            android:id="@+id/textCart"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:clickable="false"
            android:text="Shopping Cart"
            android:textAppearance="?android:attr/textAppearanceMedium"
            android:textSize="15dp"
            android:textStyle="bold"
            android:typeface="sans"
            android:width="90dp" android:layout_marginLeft="20dp" android:padding="5dp" 
android:gravity="center"/>

         <TextView
            android:id="@+id/textInvoice"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:clickable="false"
            android:text="Invoice"
            android:textAppearance="?android:attr/textAppearanceMedium"
            android:textSize="15dp"
            android:textStyle="bold"
            android:typeface="sans"
            android:width="90dp" android:layout_marginLeft="50dp" android:padding="5dp" 
android:gravity="center"/>
   </TableRow>

    <TableRow
        android:layout_width="match_parent"
        android:layout_height="match_parent" >
<RelativeLayout android:layout_marginLeft="10dp">

    <Button
        android:id="@+id/buttonPurchase"
        android:layout_width="70dp"
        android:layout_height="70dp"
        android:layout_marginBottom="5dp"
        android:layout_marginLeft="20dp"

        android:height="60dp"
        android:width="30dp" 
        android:layout_alignParentLeft="true"
        android:layout_alignParentTop="true" android:layout_marginTop="10dp" 
android:clickable="true"/>

 <TextView
 android:id="@+id/textFive"
 android:layout_width="30dp"
 android:layout_height="30dp"
 android:layout_marginLeft="70dp"
 android:background="@drawable/picture1"
 android:gravity="center"
 android:text="4"
 android:textColor="#FFF"
 android:textSize="14dp"
 android:textStyle="bold"
 android:typeface="sans" />

</RelativeLayout>

<RelativeLayout android:paddingLeft="20dp" android:layout_marginLeft="10dp">

<Button
    android:id="@+id/buttonTravel"
    android:layout_width="70dp"
    android:layout_height="70dp"
    android:layout_alignParentLeft="true"
    android:layout_alignParentTop="true"
    android:layout_marginBottom="5dp"
    android:layout_marginLeft="25dp"
    android:layout_marginTop="10dp"

    android:clickable="true"
    android:height="60dp"
    android:width="30dp" />

<TextView
    android:id="@+id/textSix"
    android:layout_width="30dp"
    android:layout_height="30dp"
    android:layout_marginLeft="80dp"
    android:background="@drawable/picture1"
    android:gravity="center"
    android:text="7"
    android:textColor="#FFF"
    android:textSize="14dp"
    android:textStyle="bold"
    android:typeface="sans" />

</RelativeLayout>

    </TableRow>

    <TableRow >
        <TextView
            android:id="@+id/textPurchase"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:clickable="false"
            android:text="Purchase Order"
            android:textAppearance="?android:attr/textAppearanceMedium"
            android:textSize="15dp"
            android:textStyle="bold"
            android:typeface="sans"
            android:width="90dp" android:layout_marginLeft="20dp" android:padding="5dp" 
android:gravity="center"/>

         <TextView
            android:id="@+id/textTravel"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:clickable="false"
            android:text="Travel Approval"
            android:textAppearance="?android:attr/textAppearanceMedium"
            android:textSize="15dp"
            android:textStyle="bold"
            android:typeface="sans"
            android:width="90dp" android:layout_marginLeft="50dp" android:padding="5dp"
android:gravity="center"/>
   </TableRow>
</TableLayout>

</LinearLayout> 
```

onCreate 方法是：package phone.activities；

```
import phone.activities.R;
import phone.activities.R.id;
import phone.activities.R.layout;

import android.app.Activity;
import android.content.ComponentName;
import android.content.Intent;
import android.os.Bundle;
import android.util.Log;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;

public class EApprovalActivity extends Activity implements OnClickListener {
private static final String TAG = null;

/** Called when the activity is first created. */
@Override

public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    Button leaveButton;
    leaveButton = (Button)findViewById(R.id.buttonLeave);
    leaveButton.setOnClickListener(this);

    Button timeButton;
    timeButton = (Button)findViewById(R.id.buttonTime);
    timeButton.setOnClickListener(this);

    Button cartButton;
    cartButton = (Button)findViewById(R.id.buttonCart);
    cartButton.setOnClickListener(this);

    Button invoiceButton;
    invoiceButton = (Button)findViewById(R.id.buttonInvoice);
    invoiceButton.setOnClickListener(this);

    Button purchaseButton;
    purchaseButton = (Button)findViewById(R.id.buttonPurchase);
    purchaseButton.setOnClickListener(this);

    Button travelButton;
    travelButton = (Button)findViewById(R.id.buttonTravel);
    travelButton.setOnClickListener(this);

}

public void onClick(View v) {
    ComponentName cn;
    switch(v.getId())
    {
    case R.id.buttonLeave:
        Intent leaveIntent = new Intent(EApprovalActivity.this,
leave.class); 
        startActivity(leaveIntent);                 
        break;

    case R.id.buttonTime:
        Intent timeIntent = new Intent(EApprovalActivity.this,
time.class); 
        startActivity(timeIntent);                  
        break;

    case R.id.buttonCart:
        Intent cartIntent = new Intent(EApprovalActivity.this, 
cart.class); 
        startActivity(cartIntent);                  
        break;

    case R.id.buttonInvoice:
        Intent invoiceIntent = new Intent(EApprovalActivity.this, 
invoice.class); 
        startActivity(invoiceIntent);                   
        break;

    case R.id.buttonPurchase:
        Intent purchaseIntent = new Intent(EApprovalActivity.this, 
purchase.class); 
        startActivity(purchaseIntent);                  
        break;

    case R.id.buttonTravel:
        Intent travelIntent = new Intent(EApprovalActivity.this, 
travel.class); 
        startActivity(travelIntent);                    
        break;

    } Log.d(TAG,"after defining intent");
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T10:40:50.627

> 在 Java 文件中如何声明 ImageButtons？

```
ImageButton ib = findByViewId(R.id.yourImageButtonId); 
```

> textView 在按钮上不可见，即它在按钮后面隐藏了一半。解决方案是什么？

您可以将 Text 设置为按钮，而无需在其上放置 textview。

你也可以给一个简单的按钮一个`android:drawableOnTop`属性，给定的资源出现在顶部。

对于您的另一个问题：

检查 onCreate() 方法中的第 33 行。如果您无法自己找到 NullPointer，请发布它。

# regex - 正则表达式查找和替换 url 不起作用或如何使其起作用

> ID：10581664
> 
> 赞同：1
> 
> 时间：2012-05-14T10:33:32.570
> 
> 标签：regex, wordpress, url, replace

在这里使用[Regex Hero](http://regexhero.net/tester/)是输入：

正则表达式：`/category/*`

替换字符串：`/experiment/$0`

目标字符串：`http://google.co.in/blah_blah_blah/domainname.com/category/wp/`

最终字符串：`http://google.co.in/blah_blah_blah/domainname.com/experiment//category/wp/`

### 预期网址

`http://google.co.in/blah_blah_blah/domainname.com/experiment/wp/`

我如何获得预期的 URL，我的正则表达式有问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T10:39:46.967

尝试正则表达式：

```
/category/(.*) 
```

在正则表达式`.`中是通配符并且`*`是“0 或更多”限定符。因此，在正斜杠后匹配 0 个或多个 ( `*`) 字符 ( `.`) 应表示为`.*`

替代品：

```
/experiment/$1 
```

$0 是保存整个匹配的“伪组”，即“/category/...”。您需要使用括号来定义其他组，以便您可以在替换模式中引用这些组，因此`(.*)`是正则表达式中的部分。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-14T10:41:11.147

您需要更改正则表达式：

`/category/([^/]+)`

这将使所有内容与下一个斜杠匹配。请注意，我也将它包裹在括号中`capture`。或者，如果您只想要`/category/`使用后的所有内容：

`/category/(.*)`

然后，您需要将替换更改为：

`/experiment/$1`

`$1`是第一场比赛。

这导致：

`http://google.co.in/blah_blah_blah/domainname.com/experiment/wp/`

# php - 使用 Ajax + JQuery + MySql + PHP 将表单保存为进度

> ID：10581670
> 
> 赞同：0
> 
> 时间：2012-05-14T10:33:40.353
> 
> 标签：php, jquery, mysql, ajax, forms

我想知道设置跟随的最佳方法。

我有一个动态表单，一旦用户完成添加他们的数据，它可能会变得很长。我希望设置的是一个后台进程，它将他们拥有的数据保存到数据库中。

我设置的是一个 settimer 函数，它会检查问题是否处于已保存状态，如果未将其添加到要保存的问题列表中。然后它会触发一个使用 php 发布到我的数据库的 ajax 调用。第一次发生这种情况时，ajax 将返回提交的 id，以便表单知道将这些发布到哪里。

第二次运行 set timer 函数时，它会传递这个 id。

我最大的问题是我不希望用户知道表 ID。我只是在想有人可以弄乱 javascript 并很容易地将他们的结果提交给其他 id。

我只是想知道是否有更好的方法来实现这一目标？甚至一些例子？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T10:44:21.577

一般来说，您应该将服务器端的 ID 保存在一个`$_SESSION`变量中，并且永远不要让它靠近客户端。或者，表格可能包含足够可识别的信息，以便能够根据某些`UNIQUE`索引确定相关记录。

但是，如果您愿意，您还可以添加一些加密身份验证来证明该 ID 未被用户更改。例如，除了 ID 本身之外，还向客户端返回 ID 的安全散列和一些秘密；当客户端将 ID 和该哈希都发回您的服务器时，您可以与重新计算的哈希版本进行比较，以检查是否只有知道秘密的人（即您）才能向客户端提供该 ID。

为了击败更复杂的攻击，您可能需要添加一些盐：

```
$salt = some_random_string();
$hash = md5( md5($secret) . md5($id) . md5($salt) ) 
```

*然后将哈希、ID和*盐发送给客户端；所有这三个它将返回给您进行验证。

# php - 与 php 的 isset 混淆

> ID：10581672
> 
> 赞同：2
> 
> 时间：2012-05-14T10:33:45.707
> 
> 标签：php, arrays, isset

目前我正在清理一些会产生大量 php 警告的代码。我有以下代码：

```
if(isset($info[1])) {
        list($artist, $song) = explode(" - ", trim(strip_tags($info[1])));
        $fullname = trim(strip_tags($info[1]));
    } 
```

所以我只想执行这个块是设置索引1。但是在执行脚本时，我仍然在这一行得到“注意：未定义的偏移量：1 in ....”。

那么检查数组中指定索引处是否有值的正确方法是什么？

编辑：我尝试了你的解决方案，但它仍然没有按我的预期工作。我添加了一些调试内容，这增加了我的困惑：我添加了以下内容进行测试：

```
echo "<pre>";
print_r($info);
echo "</pre>";
echo ".";
die(); 
```

结果是：

```
Array
(
   [0] => 
)
.
Played @
[1] => Song Title 
```

现在我真的不知道如何解释输出......你能给我一个提示吗！？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-14T10:38:08.383

您必须首先检查是否`$info`真的是一个数组：

```
if (is_array($info) && isset($info[1])) { 
    // ...
} 
```

或者如果你只有数字键，你可以使用[count](http://us.php.net/manual/en/function.count.php)：

```
if (count($info) > 1) { 
    // ...
} 
```

或者你也可以使用[array_key_exists](http://us.php.net/manual/en/function.array-key-exists.php)：

```
if (array_key_exists(1, $info)) {
    // ...
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-14T10:38:17.030

首先，您可能需要确保`$info`存在：

```
if (isset($info, $info[1])) 
```

但我的猜测是，修剪后没有' - '匹配`$info[1]`，并且在那里只返回一个元素（因此，`list()`会抱怨没有 1 索引）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-14T10:42:12.007

它应该是这样的：

```
if( isset($info) && count($info) > 0 ) {
    if ( isset($info[1]) && !empty($info[1]) ) {
        ... your code goes here ...
    }
} 
```

希望对你有帮助 ：）

# ipad - iPad+检测是前置摄像头还是后置摄像头拍摄的图像

> ID：10581674
> 
> 赞同：0
> 
> 时间：2012-05-14T10:33:52.443
> 
> 标签：ipad, ios5, camera

我正在为 iPad 开发一个应用程序，在该应用程序中我使用摄像头捕捉图像，但在从后置摄像头捕捉图像时遇到问题（它们正在被反转），否则在从前​​置摄像头捕捉时，它工作得很好。请提出解决方案。谢谢提前：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T14:10:57.147

你的意思是你有来自前置摄像头的镜像？检查此[iPhone - 镜像从前置摄像头拍摄的照片](https://stackoverflow.com/questions/5505422/iphone-mirroring-back-a-picture-taken-from-the-front-camera)

# mongodb - MapReduce 和 iReport / Jasperserver (MongoDB)？

> ID：10581675
> 
> 赞同：2
> 
> 时间：2012-05-14T10:33:59.793
> 
> 标签：mongodb, jasper-reports, mapreduce, ireport, jasperserver

iReport 支持 MapReduce 吗？（使用 MongoDB） ![简单查询](../Images/1dc96d00d9a4ba5bc2f7b332aa8185fe.png) 我想知道是否可以在此窗口中放置 Map Reduce 查询，或者是否不能在 jasperserver 上的报告中（当您上传 .jrxml 时，您有一个“查询”选项卡）

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-15T06:35:27.317

是的，它确实。例如：

```
{
  collectionName : 'dataByZipCode',
  sort : {
    'value.population' : -1,
  },
  mapReduce : {
    map : 'function () {
               emit (this.state, {population : this.pop});
             }',
    reduce : 'function (key, values) {
                  var total = 0;
                  for( var index = 0; index < values.length; index ++) {
                    total += values[index].population;
                  }
                  return {population : total}
               }',
    out : 'totalPopulation'
  }
} 
```

请参阅[Jaspersoft MongoDB 连接器查询参考](http://jasperforge.org/plugins/mwiki/index.php/Bigdatareportingfornosqlandhadoop/Jaspersoft_MongoDB_Query_Language)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-14T11:38:58.233

查看 Jasperforge 论坛，根据此更新，它似乎支持 Windows 中的 MapReduce 查询 -

[http://jasperforge.org/plugins/espforum/view.php?group_id=83&forumid=101&topicid=96980](http://jasperforge.org/plugins/espforum/view.php?group_id=83&forumid=101&topicid=96980)

我自己没有对此进行测试，但看起来 iReport 允许您运行任何您想要的 Mongo 查询。

# c - 当 get 函数在 C 中运行时转到另一条语句

> ID：10581678
> 
> 赞同：1
> 
> 时间：2012-05-14T10:34:03.953
> 
> 标签：c, sockets, network-programming, chat

我正在用 C 编写一个用于 LAN 聊天的程序。对于一个聊天应用程序，我们需要在他发送后立即接收 clints 聊天。但问题是我使用gets（）函数从一侧输入聊天，并且在gets运行时，如果聊天来自另一端，直到我将聊天发送到另一端才会收到. 这是我用于在服务器端发送和接收聊天的代码。我已经删除了我使用的所有条件，因为它们都被证明毫无价值。请告诉我一种在发送后立即从另一端显示聊天的方法，无论当前执行的是哪个语句。提前致谢。这是我目前发送和接收部分的代码：

```
while(1)
{
     printf("\n");
     gets(send_data);
     send(connected, send_data,strlen(send_data), 0);
     bytes_recieved = recv(connected,recv_data,1024,0);
     recv_data[bytes_recieved] = '\0';
     printf("Client Says: %s " , recv_data);
     fflush(stdout);
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-14T10:38:49.617

而不是`gets`您将需要使用非阻塞 I/O 或使用线程来启用并行计算并同时侦听多个客户端

这是非阻塞 I/O的[介绍页面](http://www.kegel.com/dkftpbench/nonblocking.html)

# php - 智能标记项目mysql php

> ID：10581680
> 
> 赞同：0
> 
> 时间：2012-05-14T10:34:04.803
> 
> 标签：php, mysql, tags

我正在使用 mysql 和 php 创建一个照片标记项目，它不仅向照片添加标签，而且还返回我存储在数据库中的相关标签。我几乎完成了我的项目（有点），只是停留在我上传照片时必须返回相关标签的部分。

我的数据库称为标记器，我有两个表“图像”（ImageId，Name，TagId）和“tag”（ID，Tag）。

我有 3 个 php 页面 database.php、index.php（我在其中上传带有标签的图像）和 show.php 我上传带有标签的图像没有问题，但我也想以返回相关标签的方式制作它. 例如，如果我上传了一张婴儿照片，并在上传时添加了标签“婴儿微笑”，它会在“婴儿微笑儿童笑”旁边写上。我不知道该怎么做。

这是我的 show.php 代码：

```
<?
require_once('/database.php');
$dbconnect = NEW DB_Class('tagger', 'root', '');
$query = "SELECT * FROM image, tag WHERE image.TagID = tag.ID";
$result = $dbconnect->fetch($query);
echo "<table border='2'>";
foreach ($result as $record) 
{ 
echo "<tr>";
echo "<td>";
echo "<a href='images/".$record['Name']."' target='_blank'>
<img src='images/".$record['Name']."' alt='SSsss' height='120' width='120' /></a>";
echo "</td>";
echo "<td>";
echo $record['Tag'];
echo "</td>";
echo "</tr>";
}
echo "</table>";
?>

<form name="newad" method="post" enctype="multipart/form-data"  
action="">

<table align="center" >
<tr>
<td> <h2>Image to upload: </h2> </td>
<td><input type="file" name="image"></td>
</tr>
<tr>
<td><h2>Tags:</h2></td>
<td><input type="text" name="tags"/></td>
</tr>
<tr>
<td></td>

<td><input name="Submit" type="submit" value="Upload image" style="width 120px;       height: 70px;font-size:20px"></td>
</form>
</tr>
<br/>
</table>

</form> 
```

例如，我是否必须添加一个名为“同义词”的全新表格？我完全迷路了，任何帮助将不胜感激。如果你们需要查看其他两页的代码，我也会展示这些代码。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T11:20:16.730

您的数据库架构看起来只能为图像添加一个标签，但您在描述中使用“标签”。让我们假设这是您的表模式 Image：（ImageId，Name）和 Tag（TagId，ImageId，Tag）。如有必要，进行适当的修改。

现在将同义词表创建为缓存表，可以作为 cron 作业进行更新。

```
SELECT rel.Tag as related_tag, tag.Tag as tag, COUNT(tag.Tag) as connections 
FROM tags rel
LEFT JOIN tags tag ON tag.ImageId = rel.ImageId
GROUP BY tag.Tag
WHERE COUNT(tag.Tag) > 5 -- Use $image_count/10 or 100 or other appropriate value 
```

然后将行插入缓存的表中。如果您没有很多图像，您可以每次都调用此查询。

所以如果你的桌子看起来像这样

```
1, 1, baby
2, 2, car
3, 1, smile
4, 1, laugh
5, 1, child
6, 2, baby
7, 2, child 
```

您的结果将是：（标签，相关标签，连接）

```
baby, smile, 1
baby, laugh, 1
baby, child, 2
smile, baby, 1
smile, laugh, 1
... 
```

这样，您可以创建一个表格，显示哪些标签一起出现在 5 个或更多图像中。

# python - 在非常大的文件中引用 CSV 记录

> ID：10581682
> 
> 赞同：1
> 
> 时间：2012-05-14T10:34:11.567
> 
> 标签：python, csv

我有两个 csv 文件，它们存储一个 id 和一些我需要匹配的相关字段。目前，在 Python 2.4 中，我将 csv 文件加载到记录对象的字典中，其中字典键作为记录 ID。然后我遍历一个并匹配另一个中的键并进行一些处理。

这一切都很好，而且效果很好，但这是在相对较小的 csv 文件上，大约有 60,000 条记录。我很快将需要处理数百万条记录，可能还有多个 csv 文件。我担心使用当前方法的内存负载。

我最初是在考虑在 csv 阅读器中进行一个简单的循环，根本不费心将它们加载到内存中，但是当为其他文件中的数百万条记录中的每一条循环数百万条记录时，我们在这里谈论的效率极低。

那么，关于这样做的好方法有什么想法吗？我被困在 python 2.4 中，我无法真正从 csv 文件进行更改，如果可能的话，我想避免使用 sql。谢谢

编辑：作为一个大概的数字，我正在查看多达 20 个 200MB 的文件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T11:05:16.203

您想避免使用 SQL 的原因是什么？

您*真的*想切换到使用某种数据库。我建议从 SQLite 开始；[`sqlite3`它作为模块](http://docs.python.org/library/sqlite3.html)被烘焙到 Python 中。. 它没有其他依赖项，使用普通文件（或 RAM）进行数据存储 - 无需网络/服务器设置 - 并且非常容易上手。

您要切换到数据库的原因包括：

*   要编写的代码要少得多。不必编写循环来查找特定元素，您只需编写`SELECT`查询即可。
*   数据库知道如何以您从未想过的方式优化查询。它通常比您在 Python 中滚动的任何伪数据库都要快得多。
*   您可以进行更复杂的查询。您可以选择满足特定条件的行 ( `SELECT * FROM table WHERE...`)，将一个表中的记录与另一表中的记录相关联 ( `SELECT * FROM table1 JOIN table2...`)，等等。

# javascript - 使用交叉过滤器，是否可以在实例化后销毁/删除它？

> ID：10581689
> 
> 赞同：3
> 
> 时间：2012-05-14T10:34:32.603
> 
> 标签：javascript, crossfilter

我指的是用于 javascript 的方形交叉过滤器插件

[https://github.com/square/crossfilter](https://github.com/square/crossfilter)

在我的应用程序中，用户可以选择特定的日期范围，并且每次更改日期时，ajax 请求都会创建一个 json 对象，该对象会被输入 crossfilter。

我希望能够删除现有的交叉过滤器（屏幕上的对象以及事件）并使用新创建的 json 对象开始一个新的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-15T14:23:30.943

根据文档，您应该可以通过应用撤消过滤器

```
.filter(null) 
```

或者

```
.filterAll() 
```

到你的对象。

但是，我发现这不一定有效，因此最好的办法是将新过滤器应用于新的交叉过滤器对象。

如果您可以提供一些代码以获得更好的上下文，那将很有帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T21:14:46.377

您需要重置从交叉过滤器派生的*所有维度上的过滤器以重置它。*例如，如果您应用了以下过滤器

```
payments_by_quantity.filter([1, Infinity]);
payments_by_total.filter(90);
payments_by_tip.filter(0);
payments_by_type.filter("tab"); 
```

您需要重置每一个以返回原始状态：

```
payments_by_quantity.filter(null);
payments_by_total.filter(null);
payments_by_tip.filter(null);
payments_by_type.filter(null); 
```

这是有道理的，因为它允许您有选择地激活/停用您定义的维度上的过滤器。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-10T14:22:59.177

```
if(crossFilter.size() > 0) {
     // Need to apply filter to all first
     dc.filterAll(); 
     // Then call remove
     crossFilter.remove();
 } 
```

# javascript - Requirejs，我该如何处理baseUrl

> ID：10581690
> 
> 赞同：1
> 
> 时间：2012-05-14T10:34:33.520
> 
> 标签：javascript, requirejs

我使用 require.js 只是为了加载`not third party javascripts modules`。
所以`baseUrl`会指向这个目录。
假设我还想动态加载一个 extLib，
它位于不同的目录中。

如何在不重写当前的情况下解决此问题`baseUrl`？

```
baseUrl: "js"

define([
   "myLib1",
   "myLib2",
   "extLib" // <-- lib which is located in a different baseDir 
], function () {
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T14:26:29.390

使用路径配置设置 extLib 的路径： [http: //requirejs.org/docs/api.html#config](http://requirejs.org/docs/api.html#config)

# android - 安卓屏幕尺寸

> ID：10581697
> 
> 赞同：0
> 
> 时间：2012-05-14T10:34:58.187
> 
> 标签：android, android-layout

我已经在 android 中创建了一个应用程序，但是当我在不同屏幕尺寸的 android 手机上测试我的应用程序时，外观和感觉不稳定。

我的问题是如何为所有安卓手机设置你的应用程序显示？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T11:30:22.553

```
 Android has included support for three screen-size “buckets” since 1.6,
based on these “dp” units: “normal” is currently the most popular device format (originally 320x480, more recently higher-density 480x800); 
“small” is for smaller screens, and “large” is for “substantially larger” screens. 
Devices that fall in the “large” bucket include the Dell Streak and original 7” Samsung Galaxy Tab. 
Android 2.3 introduced a new bucket size “xlarge”, in preparation for the approximately-10” tablets (such as the Motorola Xoom) that Android 3.0 was designed to support.

xlarge screens are at least 960dp x 720dp.

large screens are at least 640dp x 480dp.

normal screens are at least 470dp x 320dp.

small screens are at least 426dp x 320dp.
(Android does not currently support screens smaller than this.) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T04:17:17.297

最好的方法是使用相对布局而不是像 layout_height = "20dp" 这样的硬编码值，或者使用两种类型的布局 1 分别用于横向和纵向，这应该可以解决您的最大问题。但是还有另一种方法可以通过动态设置视图属性来使每个屏幕都完全相同...这是

DisplayMetrics 指标 = new DisplayMetrics(); getWindowManager().getDefaultDisplay().getMetrics(metrics);

```
 int height = metrics.heightPixels;
    int width = metrics.widthPixels;

    Button Button1 = (Button) findViewById(R.id.button1);
    Button Button2 = (Button) findViewById(R.id.button2);
    Button1.setWidth(width / 2);
    Button2.setWidth(width / 2); 
```

# android - 设计以下屏幕的想法

> ID：10581702
> 
> 赞同：0
> 
> 时间：2012-05-14T10:35:19.700
> 
> 标签：android, android-layout, android-screen

![登录界面](../Images/0fa1db9f6181cfabed527ab040cc99fc.png)

我知道如何添加页脚，但如何在屏幕中间添加页眉（登录框）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T10:42:13.590

1.  使用**相对布局**
2.  为登录框使用**透明图像**
3.  **以及更多在Dialog**中添加此布局将为您的应用提供良好的外观

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T10:43:49.213

将此属性用于 xml 中的相对布局

```
android:layout_alignParentTop="true"
android:layout_gravity="center" 
```

# java - 使用 TomEE 并打开 JPA，我收到以下错误：严重：未安装 JAVA 代理

> ID：10581714
> 
> 赞同：0
> 
> 时间：2012-05-14T10:36:10.447
> 
> 标签：java, jakarta-ee, openjpa, javaagents, apache-tomee

使用 TomEE 和 JPA 时出现以下错误：

```
SEVERE: JAVA AGENT NOT INSTALLED. 
The JPA Persistence Provider requested installation of a ClassFileTransformer which requires a JavaAgent.  
See http://openejb.apache.org/3.0/javaagent.html 
```

openJPA 是否需要 Java 代理才能正常运行？（特别是“openjpa.jdbc.SynchronizeMappings”需要它）

如果是这样，我如何在eclipse中正确安装它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-14T14:57:48.073

```
-javaagent:openejb-javaagent-3.0-beta-2.jar 
```

将其添加到 Eclipse 运行配置中的 VM 参数中。

# php - 读取 Java Script / PHP 类似文件 / 缺少换行符

> ID：10581715
> 
> 赞同：0
> 
> 时间：2012-05-14T10:36:27.717
> 
> 标签：php, javascript, line-breaks

我来自非常 C/Java 类型的背景。在移动到有效声明语句的新行之前，我习惯于在页面上可能不超过 150 个奇数字符的文本。

目前我正在尝试打开一个 Javascript 文件，特别是这次它来自这个包：http: [//baymard.com/labs/country-selector](http://baymard.com/labs/country-selector)

当我在几乎任何编辑器记事本/文本板/IntelliJ 中打开文件时，它几乎没有换行符，并且在页面上最多有 500 个字符。

现在我知道我并不真正了解 Javascript，但如果没有换行符，它对我来说似乎是不可读的。真的是这样吗还是我需要一个特殊的编辑器？！

我之前已经看过几次了，每次都围绕着实际尝试理解其中的代码的问题。在尝试读取 PHP 文件时，我也看到了同样的情况。它只是作为一大堆文本打开，我发现我无法开始理解。

我试过用谷歌搜索这个问题的答案，但很少出现。

我错过了什么？！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T10:44:10.390

您的意思是在此处找到的源代码：[https](https://github.com/JamieAppleseed/selectToAutocomplete) ://github.com/JamieAppleseed/selectToAutocomplete ？

好吧，在 jquery.js 和 jquery-ui-autocomplete.js 中，源代码被缩小了，所以是的，这是有意的。但是几乎每个 IDE 都应该支持按照您想要的方式自动格式化源代码，以便它再次变得更好可读。但是，如果您查看 jQuery-Website，应该也有可用的非缩小版 jQuery。

查看 jquery.select-to-autocomplete.js 文件，它没有被缩小并包含作者实际编写的源代码（其他只是他使用的库，因此它们被缩小了）。您会注意到它的可读性要好得多。

# python - 用于添加/编辑/删除主体的 Kerberos python lib？

> ID：10581716
> 
> 赞同：1
> 
> 时间：2012-05-14T10:36:28.763
> 
> 标签：python, linux, kerberos, principal

我发现`python-kerberos`和`pykadm5`。 `python-kerberos`可以对用户进行身份验证，但没有用于添加/编辑/删除主体的 api。 `pykadm5`很久没有更新了。我无法使用它连接到 KDC。谁能指出我添加/编辑/删除主体的python库？我的操作系统是 Ubuntu；我的 Python 版本是 2.6。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-03-13T06:40:51.980

您可以参考存储库[https://github.com/russjancewicz/python-kadmin/](https://github.com/russjancewicz/python-kadmin/)，也许这篇文章可以让您有所了解：

```
def create_test_prinicipal():
  data = None
  if not os.path.isfile(TEST_KEYTAB):
    command = '''
      spawn kadmin.local -p root@EXAMPLE.COM
      expect "kadmin.local:" {{ send "ank {0}\r" }}
      expect "Enter password for principal" {{ send "{1}\r" }}
      expect "Re-enter password for principal" {{ send "{1}\r" }}
      expect "kadmin.local:" {{ send "cpw {0}\r" }}
      expect "Enter password for principal" {{ send "{1}\r" }}
      expect "Re-enter password for principal" {{ send "{1}\r" }}
      expect "kadmin.local:" {{ send "ktadd -kt {2} -norandkey {0}\r"}}
      expect "kadmin.local:" {{ exit 1 }}
    '''.format(TEST_PRINCIPAL, TEST_PASSWORD, TEST_KEYTAB)

    expect = subprocess.Popen(['expect'], shell=True, stdin=subprocess.PIPE, stdout=subprocess.PIPE, stderr=subprocess.PIPE)

    expect.communicate(command.encode())
    expect.wait() 
```

# mysql - Netbeans 存储过程实体

> ID：10581717
> 
> 赞同：0
> 
> 时间：2012-05-14T10:36:29.477
> 
> 标签：mysql, stored-procedures, netbeans

有没有办法将 MySQL 存储过程的结果映射到类中？我正在考虑类似于 Visual Studio 的实体模型功能。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T13:20:19.853

它在 Java 中称为 JPA。它可能与您要查找的内容不完全匹配，因为它基于表创建实体。您可以根据表在 Netbeans 中生成类。然后，您将操作这些类以从数据库中添加新记录、删除和更新记录。它为您处理 SQL 部分。如果您愿意，可以在 JPA 中调用存储过程。

请参阅本教程。[http://platform.netbeans.org/tutorials/nbm-crud.html](http://platform.netbeans.org/tutorials/nbm-crud.html)。JPA 是一个 ORM 或对象关系映射工具。希望有帮助。

# wcf - Java 客户端到 WCF Web 服务 - 删除 2d 数组参数的第一个元素

> ID：10581720
> 
> 赞同：1
> 
> 时间：2012-05-14T10:36:57.030
> 
> 标签：wcf, axis2, java-ws

**更新**

我已经发布了由 java WCF 客户端生成的肥皂。WCF 工作正常。还发布了来自用于生成两个客户端的 WSDL 方法的消息模式。java 客户端的一个潜在用途是它看起来应该为外部数组使用 ArrayOfArrayOfRequestParameter 而不是 ArrayOfRequestParameter。

客户端由似乎运行 wsimport 实用程序的 eclispe 生成。在java端，我可以看到参数requests在requests[0]和requests[1]中都有2个元素，但是服务器在requests[0]中得到一个空数组，在requests[1]中得到2个元素。我猜这与数组边界的解释方式有关——也许我可以在 WCF 数据合同中设置一些属性？

该方法的签名如下：

```
[OperationContract]
Response[] SendMultiPartRequest(string serviceName, RequestParameter[][] requests); 
```

这是 RequestParameter 的数据协定：

```
[DataContract]
public class RequestParameter
{
    private string _key;
    private string _value;

    public RequestParameter()
    {
    }

    [DataMember]
    public string Key
    {
        get { return _key; }
        set { _key = value; }
    }

    [DataMember]
    public string Value
    {
        get { return _value; }
        set { _value = value; }
    }
} 
```

这是网络服务配置

```
<services>
  <service behaviorConfiguration="FooServiceBehaviour" name="FooService.WebService">
    <endpoint address="" binding="basicHttpBinding" bindingConfiguration="basicConfig" contract="FooService.IFooService"
        bindingNamespace="http://foo.com/FooService"
    />
    <endpoint address="mex" binding="mexHttpBinding" contract="IMetadataExchange" />
    <host>
      <baseAddresses>
        <add baseAddress="http://localhost:10000/FooService"/>
      </baseAddresses>
    </host>
  </service>
</services>

<bindings>
   <basicHttpBinding>
      <binding name="basicConfig" useDefaultWebProxy="true" 
         maxBufferSize="2147483647" maxReceivedMessageSize="2147483647">
      </binding>
   </basicHttpBinding>
</bindings>

<!-- For debugging purposes set the includeExceptionDetailInFaults attribute to true -->
<behaviors>
  <serviceBehaviors>
    <behavior name="FooServiceBehaviour">
      <serviceMetadata httpGetEnabled="True"/>
      <serviceDebug includeExceptionDetailInFaults="True"/>
      <dataContractSerializer maxItemsInObjectGraph="2147483647" />
    </behavior>
  </serviceBehaviors>
</behaviors> 
```

这是java客户端生成的soap请求：

```
<?xml version="1.0" encoding="UTF-8"?>
<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
<soapenv:Body>
  <SendMultiPartRequest xmlns="http://foo.com/FooService">
    <serviceName>uploadTrade</serviceName>
      <requests>
        <ArrayOfRequestParameter>
            <ArrayOfRequestParameter>
                <Key>a</Key>
                <Value>100</Value>
            </ArrayOfRequestParameter>
            <ArrayOfRequestParameter>
                <Key>b</Key>
                <Value>200</Value>
            </ArrayOfRequestParameter>
        </ArrayOfRequestParameter>
        <ArrayOfRequestParameter>
            <RequestParameter>
                <Key>a</Key>
                <Value>100</Value>
            </RequestParameter>
            <RequestParameter>
                <Key>b</Key>
                <Value>200</Value>
            </RequestParameter>
        </ArrayOfRequestParameter>
    </requests>
  </SendMultiPartRequest>
</soapenv:Body>
</soapenv:Envelope> 
```

这是适用于服务器的 WCF 客户端的肥皂。

```
<s:Envelope xmlns:s="http://schemas.xmlsoap.org/soap/envelope/">
<s:Body>
    <SendMultiPartRequest xmlns="http://foo.com/FooService">
    <serviceName>service1</serviceName>
    <requests xmlns:i="http://www.w3.org/2001/XMLSchema-instance">
    <ArrayOfRequestParameter>
        <RequestParameter>
            <Key>a</Key>
            <Value>100</Value>
        </RequestParameter>
        <RequestParameter>
            <Key>b</Key>
            <Value>200</Value>
        </RequestParameter>
    </ArrayOfRequestParameter>
    <ArrayOfRequestParameter>
        <RequestParameter>
            <Key>a</Key>
            <Value>100</Value>
        </RequestParameter>
        <RequestParameter>
            <Key>b</Key>
            <Value>200</Value>
        </RequestParameter>
    </ArrayOfRequestParameter>
</requests>
</SendMultiPartRequest>
</s:Body>
</s:Envelope> 
```

这是定义函数消息的 wsdl 片段

```
<element name="SendMultiPartRequest">
    <complexType>
        <sequence>
            <element minOccurs="0" name="serviceName" nillable="true" type="xs:string"/>
            <element minOccurs="0" name="requests" nillable="true" type="tns:ArrayOfArrayOfRequestParameter"/>
        </sequence>
    </complexType>
</element> 
```

# archive - google 是否发布了 side-wiki 浏览器插件的源代码？

> ID：10581721
> 
> 赞同：1
> 
> 时间：2012-05-14T10:37:01.533
> 
> 标签：archive, deprecated

我使用一个名为[zotero](https://www.zotero.org/)的工具来收集研究参考资料。它是一个浏览器插件，可用于为学术目的“添加书签”和注释网站。Firefox 只有一个“完全开发”的版本。

我记得 google [side-wiki](https://developers.google.com/sidewiki/)也有类似的前提，即为网站提供注释，并为 Internet Explorer 和 google chrome 提供插件。我认为它会成为任何有趣的基础，或者为开发人员提供 Internet Explorer 版本的插件的参考。

我可以找到到 google side wiki 的链接都指向“该项目已弃用”。

google 是否将源代码发布到 sidewiki 的浏览器插件部分？在某处的某个存档中仍然可用吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T17:43:09.387

不幸的是，Google Sidewiki 不能作为开源提供。已经有一些开源网络注释系统，但我不确定它们中的任何一个是否能满足您的需求。维基百科上有一个相当不错的列表：[http ://en.wikipedia.org/wiki/Web_annotation](http://en.wikipedia.org/wiki/Web_annotation)

# python - 为什么不能显示 HTML 代码？

> ID：10581723
> 
> 赞同：1
> 
> 时间：2012-05-14T10:37:06.447
> 
> 标签：python

在 test.txt 中，我有 2 行句子。

```
The heart was made to be broken.
There is no surprise more magical than the surprise of being loved. 
```

在代码中：

```
import urllib2
file = open('/Users/name/Desktop/textfile.txt','r')
data = file.readlines()
file.close()
countline = 0
for line in data:
    countline = countline + 1
    line_replace = line.replace(" ", "+")
    line_url = 'http://sentistrength.wlv.ac.uk/results.php?text=' + line_replace + '&submit=Detect+Sentiment'
    requesturl = urllib2.Request(line_url)
    openurl = urllib2.urlopen(requesturl)
    readurl = openurl.read()
    print readurl 
```

我正在尝试打印出 HTML 代码。如果 Textfile 中只有 1 个句子。一切正常，但是当文本文件中有 2 个句子时出现错误（我想显示两个句子的 html 代码。）有什么可能的方法来解决这个问题？

错误：

```
URLError: <urlopen error no host given> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T10:44:28.760

也许文件中的换行符在这里有问题，请尝试：

```
line_replace = line.replace(" ", "+").strip("\n") 
```

# python - 如何使用 Cyclone 和 Redis 进行身份验证

> ID：10581725
> 
> 赞同：2
> 
> 时间：2012-05-14T10:37:14.980
> 
> 标签：python, redis, twisted, cyclone

我正在使用 redis 客户端进行旋风分离。

不用密码就可以连接到服务器真是太好了，但是我怎样才能用密码连接到 redis？如何修改以下代码以进行身份​​验证？

```
t = cyclone.redis.lazyConnectionPool(host,port,db)

@cyclone.web.asynchronous
def on_finish(self):

    t = yield tt.multi()
    yield t.set('key', 'value')
    r = yield t.commit()
    print "commit=", repr(r) 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T10:52:04.087

旋风 redis 客户端有一个`auth`方法，您可以发送密码到，已将密码设置在`redis.conf`

```
def auth(self, password):
    """
    Simple password authentication if enabled
    """
    return self.execute_command("AUTH", password) 
```

但是在使用 redis auth 之前要非常小心。它并不是真正被认为是安全的（按设计），并且应该主要用于保护实例免受导致客户端连接到错误数据库的配置错误，而不是作为一种安全方法。

来自 redis 配置文档：

```
# This should stay commented out for backward compatibility and because most
# people do not need auth (e.g. they run their own servers).
#
# Warning: since Redis is pretty fast an outside user can try up to
# 150k passwords per second against a good box. This means that you should
# use a very strong password otherwise it will be very easy to break. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T06:13:47.677

cyclone 中的 redis 驱动程序是[txredisapi](https://github.com/fiorix/txredisapi)，它确实支持身份验证（以及许多其他功能）。这里提到：[https ://github.com/fiorix/txredisapi/blob/master/README.md#authentication](https://github.com/fiorix/txredisapi/blob/master/README.md#authentication)

但是，它不能很好地与自动重新连接一起使用，因为该`Connection`方法中没有实现身份验证。这意味着它不会在重新连接后自动重新验证。

它可以实现，但人们似乎没有使用它。

# java - 寻找嵌入式浏览器

> ID：10581731
> 
> 赞同：-1
> 
> 时间：2012-05-14T10:37:22.507
> 
> 标签：java, browser, cross-platform, webbrowser-control, embedded-browser

我正在寻找可以嵌入到我的 java 应用程序中的嵌入式浏览器。它应该是一个可以使用现有操作系统浏览器的框架。它应该提供通过 java 代码访问各种浏览器控件（返回、刷新、停止...）的设施。它应该适用于window和linux。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T10:45:49.067

你总是可以使用硒。它不是像 IE 这样的“嵌入式浏览器”，您可以将画布嵌入到另一个应用程序中。但是，它将允许您为您选择的浏览器（即 firefox、chrome 等）打开实际的浏览器窗口，并使用 selinium webdriver api 控制它。

不确定这是否符合您的标准。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T10:54:35.603

Java 桌面集成组件项目有这个 - [http://java.net/projects/jdic](http://java.net/projects/jdic)

几年前我用过它，不幸的是，它看起来已经有 2 或 3 年没有更新了，但它可能仍然可以正常工作。

我当时评估的另一个选项是[http://www.webrenderer.com](http://www.webrenderer.com) 它看起来非常好，显然仍然是一个可行的、受支持的产品。我工作的公司根本不想为此付费，而是选择了免费但有点逊色（恕我直言）的 JDIC 实施。

如果您只是希望能够启动本机浏览器而不嵌入它，请查看 JDK 6 或 7 中的 java.awt.Destop.browse()

# asp.net-mvc-3 - 如何使用 MVC Razor 进行分页？

> ID：10581733
> 
> 赞同：1
> 
> 时间：2012-05-14T10:37:25.393
> 
> 标签：asp.net-mvc-3, razor, pagination

如何使用 MVC Razor 进行分页？推荐使用页面助手。但在我的可视化 Web 开发人员中不显示为扩展（nuget）。如何在没有 Page Helper 的情况下进行分页？

# iphone - 在 iPhone 上使用从上到下的幻灯片效果打开视图

> ID：10581735
> 
> 赞同：0
> 
> 时间：2012-05-14T10:37:29.353
> 
> 标签：iphone

我正在为 iPhone 制作一个应用程序，我希望当我触摸一个按钮时，当你从屏幕的顶部到底部触摸时，它会打开一个带有幻灯片效果的视图。该视图与按钮位于同一个 XIB 文件中...提前谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T10:46:17.083

你可以试试这个简单的动画——

```
UIView *myView = [[UIView alloc] initWithFrame:self.view.frame];
myView.backgroundColor = [UIColor blueColor];
[self.view addSubview:myView];

[myView setFrame:CGRectMake(0, 480, 320, 480)];
[myView setBounds:CGRectMake(0, 0, 320, 480)];

[UIView beginAnimations:nil context:NULL];
[UIView setAnimationDuration:1.0];
[UIView setAnimationDelegate:self];
[myView setFrame:CGRectMake(0, 0, 320, 480)];
[UIView commitAnimations]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T10:54:47.043

你需要使用下面的代码，你的要求很简单`GestureRecognizer`

```
- (void)viewDidLoad
{

    CATransition *animation = [CATransition animation];
    [animation setDelegate:self];   
    [animation setType:kCATransitionFade];
    [animation setDuration:0.5];
    [animation setTimingFunction:[CAMediaTimingFunction functionWithName:
                                  kCAMediaTimingFunctionEaseInEaseOut]];
    [[self.view layer] addAnimation:animation forKey:kAnimationKey];

    UISwipeGestureRecognizer *swipeGesture = [[[UISwipeGestureRecognizer alloc] initWithTarget:self action:@selector(addCustomBottomBar)] autorelease];
    swipeGesture.numberOfTouchesRequired = 1;
    swipeGesture.direction = (UISwipeGestureRecognizerDirectionDown);
    [yourDownViewController.view addGestureRecognizer:swipeGesture];
    UISwipeGestureRecognizer *swipeGestureTop = [[[UISwipeGestureRecognizer alloc] initWithTarget:self action:@selector(addCustomBottomBar)] autorelease];
    swipeGestureTop.numberOfTouchesRequired = 1;
    swipeGestureTop.direction = (UISwipeGestureRecognizerDirectionUp);
    [yourUpViewController.view addGestureRecognizer:swipeGestureTop];
 } 
```

在这里，您只需使用以下`addCustomBottomBar`方法在此视图控制器上设置框架...

```
-(void)addCustomBottomBar{

    [UIView beginAnimations:nil context:NULL];
    [UIView setAnimationDuration:0.5];
    [UIView setAnimationTransition:UIViewAnimationTransitionNone forView:self.window cache:YES];

    yourUpViewController.view.frame=CGRectMake(0, 430, 320, 70);//here you can also switch two ViewWith some flag otherwise create another method for anotherView....

    [UIView commitAnimations];
} 
```

2.如果你想用按钮点击ViewController动画然后使用下面的代码.....

```
-(void)btnClicked{

    [UIView beginAnimations:nil context:NULL];
    [UIView setAnimationDuration:0.5];
    [UIView setAnimationTransition:UIViewAnimationTransitionNone forView:self.view cache:YES];

    if (yourflag) {

       yourViewController.view.frame=CGRectMake(0, 430, 320, 70);
    }
    else{
        yourflag=YES;
        yourViewController.view.frame=CGRectMake(0, 210, 320, 270);
        [self.view bringSubviewToFront:yourViewController.view];
    }
    [UIView commitAnimations];
} 
```

希望，这对你有帮助..... :)

# java - 使用多种编程语言（Python Java C#）构建用于开发 Web 应用程序的基础架构

> ID：10581737
> 
> 赞同：1
> 
> 时间：2012-05-14T10:37:51.070
> 
> 标签：java, python, architecture

我在不同的地方搜索过这个，但我没有找到详尽的答案。假设我们有用不同语言编写的单独模块，每个模块都实现了逻辑的某些部分。我们无权将它们重新编译为某种语言（例如使用 JPython）。

我是这部分编程的真正新手，所以很难找到描述这个问题的词。似乎我试图找到像 Maven 这样的东西，但是对于多种语言和附加模块可能是预编译的。

这在理论上可行吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T10:41:46.653

我不确定我是否正确理解了问题，但我假设您想在多种语言上构建 Web 应用程序。我的第一个猜测是面向服务的编程。您在多种语言上构建服务，它们可以通过 JSON 或 XML 进行通信

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-14T10:42:59.603

这当然是可能的。例如，我使用以下组合开发了 Web 应用程序：

*   Java（用于后端接口、API 和性能敏感代码）
*   Clojure（用于服务器端的主要 Web 应用程序）
*   JavaScript（用于浏览器中的客户端代码）

总体而言，这非常有效，因为您可以使用每种语言来发挥其特定优势。尽管应该警告您，它确实需要您精通所有语言才能有效，并且确实需要对环境进行更多配置才能使一切顺利进行

我发现有用的技巧：

*   非常清楚**您使用每种语言的原因**。例如，JavaScript 可能仅限于浏览器中的客户端代码。
*   如果语言**在同一平台上运行，**这将大有帮助。例如，Clojure 和 Java 都在 JVM 中运行，这使得互操作性变得更加容易，因为您不需要任何额外的代码来连接两者。
*   使用支持您打算使用的所有语言的**IDE （在我的情况下为 Eclipse）**
*   **使用具有多语言支持**的良好构建系统。您希望能够进行包含*所有*语言的“一键构建”。恕我直言 Maven 是最好的工具（特别是如果您使用 Eclipse 插件之类的东西与 IDE 集成）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-14T11:32:06.357

我认为 rocco337 的面向服务编程确实是一个好主意。但是这种特殊方法有一个轻微的缺点。由于所有这些 HTTP 请求，您的服务之间的流量。我听说亚马逊为此受苦，但我想他们做到了，因为他们是巨人。

这个也有它自己的缺点。只是认为这个是肮脏和快速的选择。

我最近构建的 Web 应用程序基于 python、php 和一堆 C 模块。

我混合它们的方式是使用简单的命令行和 shell 脚本。python 作为一种胶水语言真的很棒。

所以基本上你要做的是。

A. 异步方法。（当你的模块需要几秒钟才能完成它的工作时）

1.  打开一个线程
2.  运行命令行应用程序（用 java、C# 编写）
3.  在等待结果时显示您想要查看的内容。
4.  当您从命令行获取结果时，让用户重新加载或使用 ajax 以结果刷新您的视图。

B. 同步方法。（工作相当简单）

1.  运行命令行应用程序
2.  等到你得到结果。
3.  显示来自 2 的结果的用户结果视图

祝你的项目好运！

# url - 当 Yii urlManager 将 urlFormat 设置为 'path' 时，如何解析 GET 样式参数？

> ID：10581738
> 
> 赞同：2
> 
> 时间：2012-05-14T10:37:52.240
> 
> 标签：url, yii

我的应用程序是为使用 Yii 干净的 url 而编写的。urlManager 将 urlFormat 设置为路径，因此应用程序需要格式为“/home/login/12”的参数。

我的问题是我正在使用第三方 API 类，它期望以“/api/login?user_id=12&foo=234234&bar=xyzzy”的形式进行回调。这些参数在 $_GET 中不可用，因为 Yii 不会将它们解释为单独的参数。

如何告诉 urlManager为这个控制器使用**get urlFormat？**

更新：

我的 urlManager 配置选项：

```
'urlManager'=>array(
    'urlFormat'=>'path',
    'rules'=>array(
        // Other paths
        '/' => 'home/index',
        '<controller:\w+>/<id:\d+>'=>'<controller>/view',
        '<controller:\w+>/<action:\w+>/<id:\d+>'=>'<controller>/<action>',
        '<controller:\w+>/<action:\w+>'=>'<controller>/<action>',
    ),
), 
```

我的测试查询字符串：

```
http://localhost/testcontroller/testaction?id=x&blah=y
http://localhost/testcontroller/testaction/?id=x&blah=y 
```

我使用的是 Yii 版本 1.1.10.r3566。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T11:55:09.487

[正如dInGd0nG](https://stackoverflow.com/users/1362777/dingd0ng)所指出的，问题存在于我们的重写规则中。

他们是这样的：

```
RewriteEngine On
RewriteCond %{SCRIPT_FILENAME} !-f
RewriteCond %{SCRIPT_FILENAME} !-d
RewriteRule ^(.*)$ index.php?req=$1 
```

当他们应该是这样的：

```
RewriteEngine On
RewriteCond %{SCRIPT_FILENAME} !-f
RewriteCond %{SCRIPT_FILENAME} !-d
RewriteRule . index.php 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-05-09T14:26:16.670

确实。我正在使用 Nginx 并且遇到了同样的问题。原来我原来的 nginx 设置是错误的：

```
 location / {
            # Redirect everything that isn't a real file to index.php
            try_files $uri $uri/ /index.php?r=$uri;
    } 
```

我将其更改为以下内容并显示参数。

```
 location / {
            # Redirect everything that isn't a real file to index.php
            try_files $uri $uri/ /index.php?r=$uri&$args;
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-14T13:10:51.667

“我如何告诉 urlManager 为这个控制器使用获取 urlFormat？”

您最好的选择可能是覆盖 UrlManager 和 createUrl / parseUrl 函数，以便您可以以自己的自定义方式处理这一路线。

# python - Python - Office Communicator API - 尽管有限制，是否可以发送消息

> ID：10581740
> 
> 赞同：4
> 
> 时间：2012-05-14T10:38:04.720
> 
> 标签：python, api, office-communicator

我在 Python 中使用 win32com 处理了许多 Office 程序。

Excel 一直很有用，Outlook 很简单，可以满足我的基本使用需求。

我有 Microsoft Lync，但我无法使用它。

我知道有限制，但我想做的是；发送消息，检测收到的消息并回复。

我使用以下代码打开了一个新窗口：

```
import win32com.client

msg = win32com.client.Dispatch('Communicator.UIAutomation')
msg.InstantMessage('me@me.com') 
```

这可以很好地打开信使窗口，但任何发送消息的方法通常都会引发“未实现”错误。我知道 api 受到限制，但我想知道是否有可能以这种方式发送消息或检测收到的消息，或者是否有另一种与 Communicator 通信的方式？

我真的不想使用 SendKeys 方法来写消息。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-14T12:19:41.597

与其尝试驱动 Communicator GUI 程序，不如考虑实现底层聊天协议的接口。

Communicator 可以使用[XMPP 协议](http://en.wikipedia.org/wiki/Extensible_Messaging_and_Presence_Protocol)- 与 Google Talk、Facebook Chat 等相同。

来自维基百科：

> 此外，一些本机不使用 XMPP 的企业 IM 软件产品仍然包含 XMPP 网关，包括：
> 
> *   IBM Lotus Sametime
> *   Microsoft Lync Server（以前称为 Microsoft Office Communications Server – OCS）

您应该能够实现自己的 XMPP 客户端。[Pidgin](http://www.pidgin.im/)[`libpurple`](http://developer.pidgin.im/wiki/WhatIsLibpurple)背后的聊天协议库，实现XMPP；如果你愿意，你可以使用它。

# jms - ActiveMQ的JMeter点对点测试

> ID：10581743
> 
> 赞同：0
> 
> 时间：2012-05-14T10:38:08.417
> 
> 标签：jms, activemq, jmeter

我正在尝试使用 JMeter 的点对点功能来测试 ActiveMQ。我正在关注[这里](http://jmeter.apache.org/usermanual/build-jms-point-to-point-test-plan.html)的文档。

在此页面中，针对“请求响应”的沟通方式有以下内容：

> 这意味着您至少需要一个响应请求的服务。

获取响应请求的服务有哪些选择？是否可以配置 ActiveMQ 来执行此操作，或者更改 JMeter 的点对点面板中的 JMS 属性以使其自动执行此操作？如果没有，是否有任何简单的应用程序可以回复消息并将回复发送到另一个队列？

我正在使用 ActiveMQ 5.5.1 和 JMeter 2.6。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T15:36:01.190

我不相信 ActiveMQ 提供自动响应请求的服务。ActiveMQ 只是一个代理/消息路由器。JMeter 是您的“客户”。所以你仍然需要一个服务器（这是提到的“服务”）。由于您正在测试点对点，因此您将需要一个使用队列而不是主题的 JMS 服务器。您对服务器的选择是编写自己的代码或查找一些同步 JMS 服务器代码/测试工具，例如：http: [//activemq.apache.org/how-should-i-implement-request-response-with- jms.html](http://activemq.apache.org/how-should-i-implement-request-response-with-jms.html)

在该示例代码中，您必须更改`message.getJMSReplyTo()`为某个队列名称，然后您将`JNDI Name Reply Queue (Q.RPL)`在以下行的 JMeter 字段中使用该名称：

```
this.replyProducer.send(message.getJMSReplyTo(), response); 
```

在 JMeter 中，您需要设置为该示例代码中设置`JNDI Name Request Queue (Q.REQ)`的任何内容。`messageQueueName`默认为`client.messages`

# css - 无法在 Visual Studio 2008 中查看 CSS 文件

> ID：10581745
> 
> 赞同：0
> 
> 时间：2012-05-14T10:38:49.197
> 
> 标签：css

我无法通过 Visual Studio 打开项目中的 CSS 文件。文件详细信息完好无损。如果我尝试打开它，显示的错误消息是无法完成操作。未指定的错误。我使用 VS 2008

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T14:56:14.013

我将首先验证文件是否存在并且可以打开（notepad++ 或类似的）。如果文件存在：尝试从解决方案/项目中删除文件，保存解决方案，关闭 IDE，打开 IDE 并再次添加文件。

# netbeans - Netbeans 设置同步

> ID：10581748
> 
> 赞同：4
> 
> 时间：2012-05-14T10:39:01.100
> 
> 标签：netbeans, synchronization, settings

有什么方法可以跨多个工作站（即 PC 和笔记本电脑）同步 Netbeans 设置。它关于项目设置（FTP 帐户）、已安装的插件和其他设置（如颜色）。

你有什么想法和经历？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T22:51:07.923

您可以将设置导出到 zip 文件并在其他位置导入。

出口：（**`Tools -> Options -> Export`**进口同理）。

# multidimensional-array - 如何以伪代码将文本文件读入多维数组？

> ID：10581750
> 
> 赞同：0
> 
> 时间：2012-05-14T10:39:06.557
> 
> 标签：multidimensional-array, text-files, pseudocode

我有多维数组： `Sales (Town, Month, Product)`

我有一个包含以下内容的文本文件：

> “ABC” 6 月 50 日 “DEF” 4 月 100 日 “HIJ” 6 月 90 日 “KLM” 6 月 55 日 “NOP” 6 月 65 日

第一个词是城镇，第二个词是月份，第三个词是产品。然后重复 4-6 个单词、7-9 个单词等。

如何以伪代码将我的文本文件读入多维数组？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T10:46:57.130

1.  创建销售**列表**。
2.  读一个词并保存为**城镇**
3.  读一个单词并保存为**月份**
4.  读取一个单词并将其保存为**产品**
5.  从第 2、3 和 4 步读取的**城镇**、**月份**和**产品**创建**销售对象。**
*******   将此**销售对象**添加到销售**列表***   如果尚未到达*文件末尾，*请转到第 2 步。******

 ***** * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T10:42:37.490

我会使用结构/类的数组/列表/其他集合，而不是多维数组（强调*结构*和*类*）。

使用适当的结构，您可以将输入读取为一系列结构，而不是多维数据。这也将有助于可选字段，并使您的代码和数据处理更有条理****

# java - GeoToolkit：从 GPS 转换为 Lambert Conformal Conic

> ID：10581753
> 
> 赞同：0
> 
> 时间：2012-05-14T10:39:35.063
> 
> 标签：java, geolocation, gis, coordinate-transformation

我必须将 GPS 坐标（纬度和经度）转换为 Lambert Conformal Conic 投影。地图指的是意大利。由于我不是这个主题的专家，我发现（谷歌搜索）Java 的最佳库之一是 GeoToolkit。不幸的是，我没有找到任何示例或文档（只有 Javadoc）。这里的投影参数（proj=Lcc Lat_2=45 Lat_1=40 Lat_0=42.5 Lon_0=9.2 x_0=600000 y_0=2200000）：

```
PARAM_MT["Lambert_Conformal_Conic_2SP", 
PARAMETER["semi_major", 6378137.0], 
PARAMETER["semi_minor", 6356752.314], 
PARAMETER["central_meridian", 9.2], 
PARAMETER["latitude_of_origin", 42.5], 
PARAMETER["false_easting", 600000.0], 
PARAMETER["false_northing", 2200000.0], 
PARAMETER["standard_parallel_2", 45.0], 
PARAMETER["standard_parallel_1", 40.0]] 
```

有谁知道比 GeoToolkit 更好的库？

我编写了以下代码来转换坐标：

```
// 1\. Get the MathTransform Factory
MathTransformFactory factory;

FactoryRegistry registry = new FactoryRegistry(
        MathTransformFactory.class);

factory = registry.getServiceProvider(MathTransformFactory.class, null,
        null, Hints.MATH_TRANSFORM_FACTORY);

// 2\. Define source and target coord reference systems
GeographicCRS sourceCRS = DefaultGeographicCRS.WGS84;

ParameterValueGroup parameters = factory
        .getDefaultParameters("Lambert_Conformal_Conic_2SP");
parameters.parameter("semi_major").setValue(WGS84_AXIS_MAJOR);
parameters.parameter("semi_minor").setValue(WGS84_AXIS_MINOR);
parameters.parameter("central_meridian").setValue(9.2);
parameters.parameter("latitude_of_origin").setValue(42.5);
parameters.parameter("standard_parallel_1").setValue(40.0);
parameters.parameter("standard_parallel_2").setValue(45.0);
parameters.parameter("false_easting").setValue(600000);
parameters.parameter("false_northing").setValue(2200000);

// 3\. Create the MathTransform with the given parameters
Conversion conversion = new DefiningConversion("GPS to Lambert",
        parameters);

CRSFactory crsFactory = FactoryFinder.getCRSFactory(null);
Map<String, ?> properties = Collections.singletonMap(
        ProjectedCRS.NAME_KEY, "LatLon2Lambert");
ProjectedCRS targetCRS = crsFactory.createProjectedCRS(properties,
        sourceCRS, conversion, DefaultCartesianCS.GENERIC_2D);

MathTransform tr = CRS.findMathTransform(sourceCRS, targetCRS);

DirectPosition sourcePt = new DefaultDirectPosition(DefaultGeographicCRS.WGS84);
sourcePt.setOrdinate(0, 45.0);
sourcePt.setOrdinate(1, 8.0);

DirectPosition targetPt = tr.transform(p.getValue(), null); 
```

但是，它不起作用。我哪里错了？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T06:49:56.260

提供的代码是正确的。唯一的问题是输入：GeoToolkit 使用位置符号来识别纬度和经度。它要求第一个参数是经度。例如，在上述代码的末尾，您可以执行转换。

下面是一个例子：

```
DirectPosition sourcePt = new GeneralDirectPosition(DefaultGeographicCRS.WGS84);
sourcePt.setOrdinate(0, Double.parseDouble(8.751426)); // longitude
sourcePt.setOrdinate(1, Double.parseDouble(45.12478)); // latitude

DirectPosition targetPt = tr.transform(p.getValue(), null); 
```

在 targetPt 变量中，您在 Lambert 中有正确的坐标。

# sql-server - TDataSetProvider 和死锁

> ID：10581759
> 
> 赞同：0
> 
> 时间：2012-05-14T10:39:51.617
> 
> 标签：sql-server, delphi, delphi-2009, database-deadlocks

您能否列出 TDataSetProviders 中死锁的条件是什么？

我们得到了复杂的代码，并且死锁诅咒主要在桌子上的循环上。

更糟糕的是，我在 IDE 中调试时无法重现死锁，只能在午餐时重现。

你能提示在哪里看吗？

# android - 在指南针中添加文本视图

> ID：10581765
> 
> 赞同：0
> 
> 时间：2012-05-14T10:40:13.520
> 
> 标签：android, textview, compass-geolocation

我必须提出一个指南针指示西点的应用程序。这是我的代码

```
public class CustomCompassActivity extends Activity implements SensorEventListener {

Float azimut;  // View to draw a compass

public class CustomDrawableView extends View {
Paint paint = new Paint();
TextView t1;

public CustomDrawableView(Context context) {
  super(context);
  paint.setColor(0x8a2be2);
  paint.setStyle(Style.STROKE);
  paint.setStrokeWidth(4);
  paint.setAntiAlias(true);
};

protected void onDraw(Canvas canvas) {
  int width = getWidth();
  int height = getHeight();
  int centerx = width/2;
  int centery = height/2;
  // Rotate the canvas with the azimut      
  if (azimut != null)
    canvas.rotate(-azimut*360/(2*3.14159f), centerx, centery);
  Bitmap bmp = BitmapFactory.decodeResource(getResources(), R.drawable.rose4);
  canvas.drawBitmap(bmp,centerx- bmp.getWidth()/2,centery - bmp.getHeight()/2, paint);

  canvas.drawText("W", centerx-0, centery-55, paint);
  paint.setColor(0xffd02090);

  }
  }

  CustomDrawableView mCustomDrawableView;
  private SensorManager mSensorManager;
   Sensor accelerometer;
  Sensor magnetometer;

 protected void onCreate(Bundle savedInstanceState) {

super.onCreate(savedInstanceState);
mCustomDrawableView = new CustomDrawableView(this);
setContentView(mCustomDrawableView);    // Register the sensor listeners
mSensorManager = (SensorManager)getSystemService(SENSOR_SERVICE);
  accelerometer = mSensorManager.getDefaultSensor(Sensor.TYPE_ACCELEROMETER);
magnetometer = mSensorManager.getDefaultSensor(Sensor.TYPE_MAGNETIC_FIELD);

 }

  protected void onResume() {
  super.onResume();
 mSensorManager.registerListener(this, accelerometer, SensorManager.SENSOR_DELAY_UI);
 mSensorManager.registerListener(this, magnetometer, SensorManager.SENSOR_DELAY_UI);
  }

 protected void onPause() {
 super.onPause();
  mSensorManager.unregisterListener(this);
 }

 public void onAccuracyChanged(Sensor sensor, int accuracy) {  }

   float[] mGravity;
  float[] mGeomagnetic;
 public void onSensorChanged(SensorEvent event) {
  if (event.sensor.getType() == Sensor.TYPE_ACCELEROMETER)
   mGravity = event.values;
  if (event.sensor.getType() == Sensor.TYPE_MAGNETIC_FIELD)
  mGeomagnetic = event.values;
 if (mGravity != null && mGeomagnetic != null) {
  float R[] = new float[9];
  float I[] = new float[9];
  boolean success = SensorManager.getRotationMatrix(R, I, mGravity, mGeomagnetic);
  if (success) {
    float orientation[] = new float[3];
    SensorManager.getOrientation(R, orientation);
    azimut = orientation[0]; // orientation contains: azimut, pitch and roll
   }
  }
 mCustomDrawableView.invalidate();
  }
  } 
```

我需要添加textview。但我既不能添加xml，也不能在程序中使用textview。如何在指南针的上层添加textview？

# macos - 如何解决mac上的多播问题？

> ID：10581766
> 
> 赞同：1
> 
> 时间：2012-05-14T10:40:20.913
> 
> 标签：macos, multicast, oracle-coherence

我刚刚开始使用 oracle-coherence。我在设置它时遇到了问题。谷歌搜索后，我知道要使用 oracle-coherence 多播需要启用。

我测试了我的系统上是否启用了多播。

```
multicast-test.sh -ttl 0 
```

此命令的结果：

```
Sent packet 1 containing 1468 bytes.
Sent packet 2 containing 1468 bytes.
Sent packet 3 containing 1468 bytes.
Sent packet 4 containing 1468 bytes.
Sent packet 5 containing 1468 bytes.
Sent packet 6 containing 1468 bytes.
Sent packet 7 containing 1468 bytes.
Sent packet 8 containing 1468 bytes.
Sent packet 9 containing 1468 bytes. 
```

这仅仅意味着我的系统只是发送但不接收这些字节。现在如何进行？

**我试过的**

```
ifconfig 
```

`UP,BROADCAST,SMART,RUNNING,SIMPLEX,MULTICAST`为 en0显示

```
netstat -nr 
```

显示路由表。早些时候，没有 228.0.0.X 的条目。我在路由表中添加了 228.0.0.4。

但即使是现在，多播测试也显示出相同的结果。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T14:08:29.560

尝试在启动 JVM 时包含系统属性 -Djava.net.preferIPv4Stack=true。

# silverlight - 将滑块绑定到滚动查看器 silverlight

> ID：10581768
> 
> 赞同：2
> 
> 时间：2012-05-14T10:40:23.737
> 
> 标签：silverlight

我想将滑块绑定到滚动查看器控件。每当滑块移动时，滚动查看器应该反映它，反之亦然。请帮忙。（银光）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T11:16:33.463

[在这里](http://www.codeproject.com/Articles/95746/Exposing-and-Binding-to-a-Silverlight-ScrollViewer)你可以看到一个附加的行为，`ScrollViewer`它暴露了垂直和水平偏移，所以你可以像这样绑定它们：

```
<ScrollViewer 
     local:ScrollViewerBinding.VerticalOffset="{Binding Value, ElementName=Slider, Mode=TwoWay}">
     ...
</ScrollViewer> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-04T08:31:05.290

我想您可以通过以下方式简单地将滑块绑定到您的scrollviewer。当滚动条的滚动事件触发时，您可以获得滚动条位置的值，然后将其反映在滑块中。滑块到 sdcrollviewer 也是如此。我认为这解决了你的问题，不是吗？

# jquery - 删除具有 z-index 位置的图层

> ID：10581769
> 
> 赞同：0
> 
> 时间：2012-05-14T10:40:30.070
> 
> 标签：jquery, popup, z-index

我有一个弹出窗口下有一个空白层。空白层的 z-index 的数量总是比 popup 少一个数字。当用户单击弹出窗口中的关闭按钮时，我应该删除弹出层和空白层。我可以轻松删除弹出层，但如何删除空白层？

这是我用于删除弹出窗口的 jQuery 代码：

```
 var curZIndex = $(this).closest('.popup').css('z-index');
        $(this).closest('.popup').remove(); 
```

更新：

```
<div style="width: 1263px; height: 756px; opacity: 0.8; background-color: black; position: absolute; top: 0px; z-index: 103;"></div>

<div style="width: 1263px; height: 756px; opacity: 0.8; background-color: black; position: absolute; top: 0px; z-index: 100;"></div>

<div style="width: 1263px; height: 756px; opacity: 0.8; background-color: black; position: absolute; top: 0px; z-index: 95;"></div>

 ... ANOTHER TAGS ...

<div class="popup" style="left: 144.5px; top: 100px; z-index: 104; width: 957px;">
  <div class="popup_bc_top">
    <div class="popup_bc_tl"></div>
    <div class="popup_bc_tm"></div>
    <div class="popup_bc_tr"></div>
  </div>
  <div class="popup_bc_middle">
    <div class="popup_bc_ml">
      <div class="popup_bc_mr">
        <div class="popup_bc_cnt" style="height: 590px;">
          <div class="inner_popup" style="z-index: 102; width: 951px;">
            <div class="inner_popup_bc_top">
              <div class="inner_popup_bc_tl"></div>
              <div class="inner_popup_bc_tm"><a class="closeIcon" href="#closePanel">X</a></div>
              <div class="inner_popup_bc_tr"></div>
            </div>
            <div class="inner_popup_bc_middle">
              <div class="inner_popup_bc_ml">
                <div class="inner_popup_bc_mr">
                  <div class="inner_popup_bc_cnt" style="height: 550px;">
                    CONTENT
                  </div>
                </div>
              </div>
            </div>
            <div class="inner_popup_bc_bottom">
              <div class="inner_popup_bc_bl"></div>
              <div class="inner_popup_bc_bm"></div>
              <div class="inner_popup_bc_br"></div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
  <div class="popup_bc_bottom">
    <div class="popup_bc_bl"></div>
    <div class="popup_bc_bm"></div>
    <div class="popup_bc_br"></div>
  </div>
</div> 
```

更新 2：

我有不止一个空白层，所以我不能使用`$('#hideLayer').remove();` ，但是只有一层的 z-Index 比我的弹出层少一个数字。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T10:56:24.360

**行后：**

```
$(this).closest('.popup').remove(); 
```

**对背景层调用相同的过程：**

```
$("#hideLayer").remove(); 
```

* * *

**请注意**，您正在从文档中删除这些元素！它们稍后将不可用！

如果您需要它们可用于重用，您应该使用[.hide()](http://api.jquery.com/hide/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T10:52:37.087

我想你所需要的就是：

```
$('#hideLayer').hide(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-14T10:52:44.807

只需使用其 id 删除空白层：

```
$('#hideLayer').remove() 
```

# objective-c - 应用程序最初运行缓慢？

> ID：10581771
> 
> 赞同：0
> 
> 时间：2012-05-14T10:40:34.783
> 
> 标签：objective-c, ios, uiview, subview

在我目前正在开发的一个应用程序中，它在最初的几秒钟内运行非常缓慢。我几乎 100% 确定这是因为它将大背景平铺到视图上。我试图通过检查所有子视图是否存在来加载视图，然后再将其放在屏幕上。但是，此值始终为 168（加载后应有的子视图数），这意味着正在添加子视图，但它们并未以某种方式完全加载。有人知道这是为什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T10:46:59.137

正如保罗·皮伦建议的那样；在后台执行。Grand Central Dispatch 是平铺图像的绝佳资源。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T10:59:03.327

这是一个教程如何在后台执行操作[Ray Wenderlich:Multithreading and Grand Central Dispatch on iOS for Beginners Tutorial](http://www.raywenderlich.com/4295/multithreading-and-grand-central-dispatch-on-ios-for-beginners-tutorial)。

# sql-server - 如何将逗号分隔的值拆分为列

> ID：10581772
> 
> 赞同：164
> 
> 时间：2012-05-14T10:40:38.180
> 
> 标签：sql-server, sql-server-2008, csv

我有一张这样的桌子

```
Value   String
-------------------
1       Cleo, Smith 
```

我想将逗号分隔的字符串分成两列

```
Value  Name Surname
-------------------
1      Cleo   Smith 
```

我只需要两个固定的额外列

* * *

## 回答 #1

> 赞同：147
> 
> 时间：2012-05-14T10:43:39.273

您的目的可以使用以下查询来解决 -

```
Select Value  , Substring(FullName, 1,Charindex(',', FullName)-1) as Name,
Substring(FullName, Charindex(',', FullName)+1, LEN(FullName)) as  Surname
from Table1 
```

sql server中没有现成的Split函数，所以我们需要创建自定义函数。

```
CREATE FUNCTION Split (
      @InputString                  VARCHAR(8000),
      @Delimiter                    VARCHAR(50)
)

RETURNS @Items TABLE (
      Item                          VARCHAR(8000)
)

AS
BEGIN
      IF @Delimiter = ' '
      BEGIN
            SET @Delimiter = ','
            SET @InputString = REPLACE(@InputString, ' ', @Delimiter)
      END

      IF (@Delimiter IS NULL OR @Delimiter = '')
            SET @Delimiter = ','

--INSERT INTO @Items VALUES (@Delimiter) -- Diagnostic
--INSERT INTO @Items VALUES (@InputString) -- Diagnostic

      DECLARE @Item           VARCHAR(8000)
      DECLARE @ItemList       VARCHAR(8000)
      DECLARE @DelimIndex     INT

      SET @ItemList = @InputString
      SET @DelimIndex = CHARINDEX(@Delimiter, @ItemList, 0)
      WHILE (@DelimIndex != 0)
      BEGIN
            SET @Item = SUBSTRING(@ItemList, 0, @DelimIndex)
            INSERT INTO @Items VALUES (@Item)

            -- Set @ItemList = @ItemList minus one less item
            SET @ItemList = SUBSTRING(@ItemList, @DelimIndex+1, LEN(@ItemList)-@DelimIndex)
            SET @DelimIndex = CHARINDEX(@Delimiter, @ItemList, 0)
      END -- End WHILE

      IF @Item IS NOT NULL -- At least one delimiter was encountered in @InputString
      BEGIN
            SET @Item = @ItemList
            INSERT INTO @Items VALUES (@Item)
      END

      -- No delimiters were encountered in @InputString, so just return @InputString
      ELSE INSERT INTO @Items VALUES (@InputString)

      RETURN

END -- End Function
GO

---- Set Permissions
--GRANT SELECT ON Split TO UserRole1
--GRANT SELECT ON Split TO UserRole2
--GO 
```

* * *

## 回答 #2

> 赞同：58
> 
> 时间：2013-02-27T09:30:02.983

```
;WITH Split_Names (Value,Name, xmlname)
AS
(
    SELECT Value,
    Name,
    CONVERT(XML,'<Names><name>'  
    + REPLACE(Name,',', '</name><name>') + '</name></Names>') AS xmlname
      FROM tblnames
)

 SELECT Value,      
 xmlname.value('/Names[1]/name[1]','varchar(100)') AS Name,    
 xmlname.value('/Names[1]/name[2]','varchar(100)') AS Surname
 FROM Split_Names 
```

并查看下面的链接以供参考

[http://jahaines.blogspot.in/2009/06/converting-delimited-string-of-values.html](http://jahaines.blogspot.in/2009/06/converting-delimited-string-of-values.html)

* * *

## 回答 #3

> 赞同：47
> 
> 时间：2013-06-19T07:32:22.557

基于xml的答案简单而干净

参考[这个](http://social.msdn.microsoft.com/Forums/sqlserver/en-US/4126a010-6885-4eb0-b79c-c798c90edb85/how-to-split-comma-delimited-string)

```
DECLARE @S varchar(max),
        @Split char(1),
        @X xml

SELECT @S = 'ab,cd,ef,gh,ij',
       @Split = ','

SELECT @X = CONVERT(xml,' <root> <myvalue>' +
REPLACE(@S,@Split,'</myvalue> <myvalue>') + '</myvalue>   </root> ')

SELECT  T.c.value('.','varchar(20)'),              --retrieve ALL values at once
  T.c.value('(/root/myvalue)[1]','VARCHAR(20)')  , --retrieve index 1 only, which is the 'ab'
  T.c.value('(/root/myvalue)[2]','VARCHAR(20)')
 FROM @X.nodes('/root/myvalue') T(c) 
```

* * *

## 回答 #4

> 赞同：42
> 
> 时间：2014-06-20T05:39:27.113

我觉得这很酷

```
SELECT value,
    PARSENAME(REPLACE(String,',','.'),2) 'Name' ,
    PARSENAME(REPLACE(String,',','.'),1) 'Surname'
FROM table WITH (NOLOCK) 
```

* * *

## 回答 #5

> 赞同：30
> 
> 时间：2015-05-13T17:23:19.570

交叉申请

```
select ParsedData.* 
from MyTable mt
cross apply ( select str = mt.String + ',,' ) f1
cross apply ( select p1 = charindex( ',', str ) ) ap1
cross apply ( select p2 = charindex( ',', str, p1 + 1 ) ) ap2
cross apply ( select Nmame = substring( str, 1, p1-1 )                   
                 , Surname = substring( str, p1+1, p2-p1-1 )
          ) ParsedData 
```

* * *

## 回答 #6

> 赞同：23
> 
> 时间：2015-06-11T09:18:52.690

有多种方法可以解决这个问题，并且已经提出了许多不同的方法。最简单的方法是使用`LEFT`/`SUBSTRING`和其他字符串函数来实现所需的结果。

**样本数据**

```
DECLARE @tbl1 TABLE (Value INT,String VARCHAR(MAX))

INSERT INTO @tbl1 VALUES(1,'Cleo, Smith');
INSERT INTO @tbl1 VALUES(2,'John, Mathew'); 
```

**使用字符串函数，如`LEFT`**

```
SELECT
    Value,
    LEFT(String,CHARINDEX(',',String)-1) as Fname,
    LTRIM(RIGHT(String,LEN(String) - CHARINDEX(',',String) )) AS Lname
FROM @tbl1 
```

如果字符串中有更多 2 项，则此方法将失败。在这种情况下，我们可以使用拆分器，然后使用`PIVOT`或将字符串转换为`XML`和使用`.nodes`来获取字符串项。`XML`aads 和 bvr 在他们的解决方案中详细说明了基于解决方案的解决方案。

这个问题的答案使用拆分器，所有使用`WHILE`拆分效率低下。检查此[性能比较](http://sqlperformance.com/2012/07/t-sql-queries/split-strings)。周围最好的分离器之一是`DelimitedSplit8K`由 Jeff Moden 创建的。[你可以在这里](http://www.sqlservercentral.com/articles/Tally+Table/72993/)阅读更多关于它的信息

**分流器`PIVOT`**

```
DECLARE @tbl1 TABLE (Value INT,String VARCHAR(MAX))

INSERT INTO @tbl1 VALUES(1,'Cleo, Smith');
INSERT INTO @tbl1 VALUES(2,'John, Mathew');

SELECT t3.Value,[1] as Fname,[2] as Lname
FROM @tbl1 as t1
CROSS APPLY [dbo].[DelimitedSplit8K](String,',') as t2
PIVOT(MAX(Item) FOR ItemNumber IN ([1],[2])) as t3 
```

**输出**

```
Value   Fname   Lname
1   Cleo    Smith
2   John    Mathew 
```

**`DelimitedSplit8K`**通过杰夫摩登

```
CREATE FUNCTION [dbo].[DelimitedSplit8K]
/**********************************************************************************************************************
 Purpose:
 Split a given string at a given delimiter and return a list of the split elements (items).

 Notes:
 1\.  Leading a trailing delimiters are treated as if an empty string element were present.
 2\.  Consecutive delimiters are treated as if an empty string element were present between them.
 3\.  Except when spaces are used as a delimiter, all spaces present in each element are preserved.

 Returns:
 iTVF containing the following:
 ItemNumber = Element position of Item as a BIGINT (not converted to INT to eliminate a CAST)
 Item       = Element value as a VARCHAR(8000)

 Statistics on this function may be found at the following URL:
 http://www.sqlservercentral.com/Forums/Topic1101315-203-4.aspx

 CROSS APPLY Usage Examples and Tests:
--=====================================================================================================================
-- TEST 1:
-- This tests for various possible conditions in a string using a comma as the delimiter.  The expected results are
-- laid out in the comments
--=====================================================================================================================
--===== Conditionally drop the test tables to make reruns easier for testing.
     -- (this is NOT a part of the solution)
     IF OBJECT_ID('tempdb..#JBMTest') IS NOT NULL DROP TABLE #JBMTest
;
--===== Create and populate a test table on the fly (this is NOT a part of the solution).
     -- In the following comments, "b" is a blank and "E" is an element in the left to right order.
     -- Double Quotes are used to encapsulate the output of "Item" so that you can see that all blanks
     -- are preserved no matter where they may appear.
 SELECT *
   INTO #JBMTest
   FROM (                                               --# & type of Return Row(s)
         SELECT  0, NULL                      UNION ALL --1 NULL
         SELECT  1, SPACE(0)                  UNION ALL --1 b (Empty String)
         SELECT  2, SPACE(1)                  UNION ALL --1 b (1 space)
         SELECT  3, SPACE(5)                  UNION ALL --1 b (5 spaces)
         SELECT  4, ','                       UNION ALL --2 b b (both are empty strings)
         SELECT  5, '55555'                   UNION ALL --1 E
         SELECT  6, ',55555'                  UNION ALL --2 b E
         SELECT  7, ',55555,'                 UNION ALL --3 b E b
         SELECT  8, '55555,'                  UNION ALL --2 b B
         SELECT  9, '55555,1'                 UNION ALL --2 E E
         SELECT 10, '1,55555'                 UNION ALL --2 E E
         SELECT 11, '55555,4444,333,22,1'     UNION ALL --5 E E E E E 
         SELECT 12, '55555,4444,,333,22,1'    UNION ALL --6 E E b E E E
         SELECT 13, ',55555,4444,,333,22,1,'  UNION ALL --8 b E E b E E E b
         SELECT 14, ',55555,4444,,,333,22,1,' UNION ALL --9 b E E b b E E E b
         SELECT 15, ' 4444,55555 '            UNION ALL --2 E (w/Leading Space) E (w/Trailing Space)
         SELECT 16, 'This,is,a,test.'                   --E E E E
        ) d (SomeID, SomeValue)
;
--===== Split the CSV column for the whole table using CROSS APPLY (this is the solution)
 SELECT test.SomeID, test.SomeValue, split.ItemNumber, Item = QUOTENAME(split.Item,'"')
   FROM #JBMTest test
  CROSS APPLY dbo.DelimitedSplit8K(test.SomeValue,',') split
;
--=====================================================================================================================
-- TEST 2:
-- This tests for various "alpha" splits and COLLATION using all ASCII characters from 0 to 255 as a delimiter against
-- a given string.  Note that not all of the delimiters will be visible and some will show up as tiny squares because
-- they are "control" characters.  More specifically, this test will show you what happens to various non-accented 
-- letters for your given collation depending on the delimiter you chose.
--=====================================================================================================================
WITH 
cteBuildAllCharacters (String,Delimiter) AS 
(
 SELECT TOP 256 
        'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789',
        CHAR(ROW_NUMBER() OVER (ORDER BY (SELECT NULL))-1)
   FROM master.sys.all_columns
)
 SELECT ASCII_Value = ASCII(c.Delimiter), c.Delimiter, split.ItemNumber, Item = QUOTENAME(split.Item,'"')
   FROM cteBuildAllCharacters c
  CROSS APPLY dbo.DelimitedSplit8K(c.String,c.Delimiter) split
  ORDER BY ASCII_Value, split.ItemNumber
;
-----------------------------------------------------------------------------------------------------------------------
 Other Notes:
 1\. Optimized for VARCHAR(8000) or less.  No testing or error reporting for truncation at 8000 characters is done.
 2\. Optimized for single character delimiter.  Multi-character delimiters should be resolvedexternally from this 
    function.
 3\. Optimized for use with CROSS APPLY.
 4\. Does not "trim" elements just in case leading or trailing blanks are intended.
 5\. If you don't know how a Tally table can be used to replace loops, please see the following...
    http://www.sqlservercentral.com/articles/T-SQL/62867/
 6\. Changing this function to use NVARCHAR(MAX) will cause it to run twice as slow.  It's just the nature of 
    VARCHAR(MAX) whether it fits in-row or not.
 7\. Multi-machine testing for the method of using UNPIVOT instead of 10 SELECT/UNION ALLs shows that the UNPIVOT method
    is quite machine dependent and can slow things down quite a bit.
-----------------------------------------------------------------------------------------------------------------------
 Credits:
 This code is the product of many people's efforts including but not limited to the following:
 cteTally concept originally by Iztek Ben Gan and "decimalized" by Lynn Pettis (and others) for a bit of extra speed
 and finally redacted by Jeff Moden for a different slant on readability and compactness. Hat's off to Paul White for
 his simple explanations of CROSS APPLY and for his detailed testing efforts. Last but not least, thanks to
 Ron "BitBucket" McCullough and Wayne Sheffield for their extreme performance testing across multiple machines and
 versions of SQL Server.  The latest improvement brought an additional 15-20% improvement over Rev 05\.  Special thanks
 to "Nadrek" and "peter-757102" (aka Peter de Heer) for bringing such improvements to light.  Nadrek's original
 improvement brought about a 10% performance gain and Peter followed that up with the content of Rev 07\.  

 I also thank whoever wrote the first article I ever saw on "numbers tables" which is located at the following URL
 and to Adam Machanic for leading me to it many years ago.
 http://sqlserver2000.databases.aspfaq.com/why-should-i-consider-using-an-auxiliary-numbers-table.html
-----------------------------------------------------------------------------------------------------------------------
 Revision History:
 Rev 00 - 20 Jan 2010 - Concept for inline cteTally: Lynn Pettis and others.
                        Redaction/Implementation: Jeff Moden 
        - Base 10 redaction and reduction for CTE.  (Total rewrite)

 Rev 01 - 13 Mar 2010 - Jeff Moden
        - Removed one additional concatenation and one subtraction from the SUBSTRING in the SELECT List for that tiny
          bit of extra speed.

 Rev 02 - 14 Apr 2010 - Jeff Moden
        - No code changes.  Added CROSS APPLY usage example to the header, some additional credits, and extra 
          documentation.

 Rev 03 - 18 Apr 2010 - Jeff Moden
        - No code changes.  Added notes 7, 8, and 9 about certain "optimizations" that don't actually work for this
          type of function.

 Rev 04 - 29 Jun 2010 - Jeff Moden
        - Added WITH SCHEMABINDING thanks to a note by Paul White.  This prevents an unnecessary "Table Spool" when the
          function is used in an UPDATE statement even though the function makes no external references.

 Rev 05 - 02 Apr 2011 - Jeff Moden
        - Rewritten for extreme performance improvement especially for larger strings approaching the 8K boundary and
          for strings that have wider elements.  The redaction of this code involved removing ALL concatenation of 
          delimiters, optimization of the maximum "N" value by using TOP instead of including it in the WHERE clause,
          and the reduction of all previous calculations (thanks to the switch to a "zero based" cteTally) to just one 
          instance of one add and one instance of a subtract. The length calculation for the final element (not 
          followed by a delimiter) in the string to be split has been greatly simplified by using the ISNULL/NULLIF 
          combination to determine when the CHARINDEX returned a 0 which indicates there are no more delimiters to be
          had or to start with. Depending on the width of the elements, this code is between 4 and 8 times faster on a
          single CPU box than the original code especially near the 8K boundary.
        - Modified comments to include more sanity checks on the usage example, etc.
        - Removed "other" notes 8 and 9 as they were no longer applicable.

 Rev 06 - 12 Apr 2011 - Jeff Moden
        - Based on a suggestion by Ron "Bitbucket" McCullough, additional test rows were added to the sample code and
          the code was changed to encapsulate the output in pipes so that spaces and empty strings could be perceived 
          in the output.  The first "Notes" section was added.  Finally, an extra test was added to the comments above.

 Rev 07 - 06 May 2011 - Peter de Heer, a further 15-20% performance enhancement has been discovered and incorporated 
          into this code which also eliminated the need for a "zero" position in the cteTally table. 
**********************************************************************************************************************/
--===== Define I/O parameters
        (@pString VARCHAR(8000), @pDelimiter CHAR(1))
RETURNS TABLE WITH SCHEMABINDING AS
 RETURN
--===== "Inline" CTE Driven "Tally Table" produces values from 0 up to 10,000...
     -- enough to cover NVARCHAR(4000)
  WITH E1(N) AS (
                 SELECT 1 UNION ALL SELECT 1 UNION ALL SELECT 1 UNION ALL 
                 SELECT 1 UNION ALL SELECT 1 UNION ALL SELECT 1 UNION ALL 
                 SELECT 1 UNION ALL SELECT 1 UNION ALL SELECT 1 UNION ALL SELECT 1
                ),                          --10E+1 or 10 rows
       E2(N) AS (SELECT 1 FROM E1 a, E1 b), --10E+2 or 100 rows
       E4(N) AS (SELECT 1 FROM E2 a, E2 b), --10E+4 or 10,000 rows max
 cteTally(N) AS (--==== This provides the "base" CTE and limits the number of rows right up front
                     -- for both a performance gain and prevention of accidental "overruns"
                 SELECT TOP (ISNULL(DATALENGTH(@pString),0)) ROW_NUMBER() OVER (ORDER BY (SELECT NULL)) FROM E4
                ),
cteStart(N1) AS (--==== This returns N+1 (starting position of each "element" just once for each delimiter)
                 SELECT 1 UNION ALL
                 SELECT t.N+1 FROM cteTally t WHERE SUBSTRING(@pString,t.N,1) = @pDelimiter
                ),
cteLen(N1,L1) AS(--==== Return start and length (for use in substring)
                 SELECT s.N1,
                        ISNULL(NULLIF(CHARINDEX(@pDelimiter,@pString,s.N1),0)-s.N1,8000)
                   FROM cteStart s
                )
--===== Do the actual split. The ISNULL/NULLIF combo handles the length for the final element when no delimiter is found.
 SELECT ItemNumber = ROW_NUMBER() OVER(ORDER BY l.N1),
        Item       = SUBSTRING(@pString, l.N1, l.L1)
   FROM cteLen l
;

GO 
```

* * *

## 回答 #7

> 赞同：22
> 
> 时间：2016-09-07T18:20:38.327

使用 SQL Server 2016，我们可以使用 string_split 来完成此操作：

```
create table commasep (
 id int identity(1,1)
 ,string nvarchar(100) )

insert into commasep (string) values ('John, Adam'), ('test1,test2,test3')

select id, [value] as String from commasep 
 cross apply string_split(string,',') 
```

* * *

## 回答 #8

> 赞同：19
> 
> 时间：2019-02-28T13:34:01.397

```
CREATE FUNCTION [dbo].[fn_split_string_to_column] (
    @string NVARCHAR(MAX),
    @delimiter CHAR(1)
    )
RETURNS @out_put TABLE (
    [column_id] INT IDENTITY(1, 1) NOT NULL,
    [value] NVARCHAR(MAX)
    )
AS
BEGIN
    DECLARE @value NVARCHAR(MAX),
        @pos INT = 0,
        @len INT = 0

    SET @string = CASE 
            WHEN RIGHT(@string, 1) != @delimiter
                THEN @string + @delimiter
            ELSE @string
            END

    WHILE CHARINDEX(@delimiter, @string, @pos + 1) > 0
    BEGIN
        SET @len = CHARINDEX(@delimiter, @string, @pos + 1) - @pos
        SET @value = SUBSTRING(@string, @pos, @len)

        INSERT INTO @out_put ([value])
        SELECT LTRIM(RTRIM(@value)) AS [column]

        SET @pos = CHARINDEX(@delimiter, @string, @pos + @len) + 1
    END

    RETURN
END 
```

* * *

## 回答 #9

> 赞同：15
> 
> 时间：2015-04-14T18:42:14.163

```
SELECT id,
       Substring(NAME, 0, Charindex(',', NAME))             AS firstname,
       Substring(NAME, Charindex(',', NAME), Len(NAME) + 1) AS lastname
FROM   spilt 
```

* * *

## 回答 #10

> 赞同：15
> 
> 时间：2016-12-27T21:16:57.063

试试这个（将 ' ' 的实例更改为 ',' 或您要使用的任何分隔符）

```
CREATE FUNCTION dbo.Wordparser
(
  @multiwordstring VARCHAR(255),
  @wordnumber      NUMERIC
)
returns VARCHAR(255)
AS
  BEGIN
      DECLARE @remainingstring VARCHAR(255)
      SET @remainingstring=@multiwordstring

      DECLARE @numberofwords NUMERIC
      SET @numberofwords=(LEN(@remainingstring) - LEN(REPLACE(@remainingstring, ' ', '')) + 1)

      DECLARE @word VARCHAR(50)
      DECLARE @parsedwords TABLE
      (
         line NUMERIC IDENTITY(1, 1),
         word VARCHAR(255)
      )

      WHILE @numberofwords > 1
        BEGIN
            SET @word=LEFT(@remainingstring, CHARINDEX(' ', @remainingstring) - 1)

            INSERT INTO @parsedwords(word)
            SELECT @word

            SET @remainingstring= REPLACE(@remainingstring, Concat(@word, ' '), '')
            SET @numberofwords=(LEN(@remainingstring) - LEN(REPLACE(@remainingstring, ' ', '')) + 1)

            IF @numberofwords = 1
              BREAK

            ELSE
              CONTINUE
        END

      IF @numberofwords = 1
        SELECT @word = @remainingstring
      INSERT INTO @parsedwords(word)
      SELECT @word

      RETURN
        (SELECT word
         FROM   @parsedwords
         WHERE  line = @wordnumber)

  END 
```

示例用法：

```
SELECT dbo.Wordparser(COLUMN, 1),
       dbo.Wordparser(COLUMN, 2),
       dbo.Wordparser(COLUMN, 3)
FROM   TABLE 
```

* * *

## 回答 #11

> 赞同：13
> 
> 时间：2015-12-23T09:51:14.277

我认为 PARSENAME 是用于此示例的简洁函数，如本文所述：[http ://www.sqlshack.com/parsing-and-rotating-delimited-data-in-sql-server-2012/](http://www.sqlshack.com/parsing-and-rotating-delimited-data-in-sql-server-2012/)

PARSENAME 函数在逻辑上设计为解析四部分对象名称。PARSENAME 的好处是它不仅限于解析 SQL Server 的四部分对象名称——它会解析任何由点分隔的函数或字符串数​​据。

第一个参数是要解析的对象，第二个参数是要返回的对象块的整数值。这篇文章正在讨论解析和旋转分隔数据 - 公司电话号码，但它也可用于解析姓名/姓氏数据。

例子：

```
USE COMPANY;
SELECT PARSENAME('Whatever.you.want.parsed',3) AS 'ReturnValue'; 
```

本文还介绍了使用名为“replaceChars”的公用表表达式 (CTE) 来针对分隔符替换的值运行 PARSENAME。CTE 对于返回临时视图或结果集很有用。

之后，使用 UNPIVOT 函数将一些列转换为行；SUBSTRING 和 CHARINDEX 函数用于清理数据中的不一致，最后使用了 LAG 函数（SQL Server 2012 的新功能），因为它允许引用以前的记录。

* * *

## 回答 #12

> 赞同：10
> 
> 时间：2014-03-26T10:42:15.433

我们可以像这样创建一个函数

```
CREATE Function [dbo].[fn_CSVToTable] 
(
    @CSVList Varchar(max)
)
RETURNS @Table TABLE (ColumnData VARCHAR(100))
AS
BEGIN
    IF RIGHT(@CSVList, 1) <> ','
    SELECT @CSVList = @CSVList + ','

    DECLARE @Pos    BIGINT,
            @OldPos BIGINT
    SELECT  @Pos    = 1,
            @OldPos = 1

    WHILE   @Pos < LEN(@CSVList)
        BEGIN
            SELECT  @Pos = CHARINDEX(',', @CSVList, @OldPos)
            INSERT INTO @Table
            SELECT  LTRIM(RTRIM(SUBSTRING(@CSVList, @OldPos, @Pos - @OldPos))) Col001

            SELECT  @OldPos = @Pos + 1
        END

    RETURN
END 
```

然后，我们可以使用 SELECT 语句将 CSV 值分隔到我们各自的列中

* * *

## 回答 #13

> 赞同：9
> 
> 时间：2017-08-28T07:32:48.387

我认为以下功能对您有用：

## 您必须首先在 SQL 中创建一个函数。像这样

```
CREATE FUNCTION [dbo].[fn_split](
@str VARCHAR(MAX),
@delimiter CHAR(1)
)
RETURNS @returnTable TABLE (idx INT PRIMARY KEY IDENTITY, item VARCHAR(8000))
AS
BEGIN
DECLARE @pos INT
SELECT @str = @str + @delimiter
WHILE LEN(@str) > 0 
    BEGIN
        SELECT @pos = CHARINDEX(@delimiter,@str)
        IF @pos = 1
            INSERT @returnTable (item)
                VALUES (NULL)
        ELSE
            INSERT @returnTable (item)
                VALUES (SUBSTRING(@str, 1, @pos-1))
        SELECT @str = SUBSTRING(@str, @pos+1, LEN(@str)-@pos)       
    END
RETURN
END 
```

您可以调用此函数，如下所示：

```
select * from fn_split('1,24,5',',') 
```

## 执行：

```
Declare @test TABLE (
ID VARCHAR(200),
Data VARCHAR(200)
)

insert into @test 
(ID, Data)
Values
('1','Cleo,Smith')

insert into @test 
(ID, Data)
Values
('2','Paul,Grim')

select ID,
(select item from fn_split(Data,',') where idx in (1)) as Name ,
(select item from fn_split(Data,',') where idx in (2)) as Surname
 from @test 
```

## 结果将是这样的：

[![在此处输入图像描述](../Images/4281dddda109fd9b9038d3986c09407e.png)](https://i.stack.imgur.com/wBdhz.png)

* * *

## 回答 #14

> 赞同：8
> 
> 时间：2017-07-09T08:54:06.287

您可以使用**表值**函数`STRING_SPLIT`，该函数仅在兼容级别 130 下可用。如果您的数据库兼容级别低于 130，SQL Server 将无法找到并执行该`STRING_SPLIT`函数。您可以使用以下命令更改数据库的兼容性级别：

```
ALTER DATABASE DatabaseName SET COMPATIBILITY_LEVEL = 130 
```

句法

```
SELECT * FROM STRING_SPLIT ( string, separator ) 
```

[在此处查看文档](https://docs.microsoft.com/en-us/sql/t-sql/functions/string-split-transact-sql)

* * *

## 回答 #15

> 赞同：7
> 
> 时间：2015-03-18T04:36:22.143

使用 Parsename() 函数

```
with cte as(
    select 'Aria,Karimi' as FullName
    Union
    select 'Joe,Karimi' as FullName
    Union
    select 'Bab,Karimi' as FullName
)

SELECT PARSENAME(REPLACE(FullName,',','.'),2) as Name, 
       PARSENAME(REPLACE(FullName,',','.'),1) as Family
    FROM cte 
```

结果

```
Name    Family
-----   ------
Aria    Karimi
Bab     Karimi
Joe     Karimi 
```

* * *

## 回答 #16

> 赞同：7
> 
> 时间：2016-03-14T11:47:23.717

尝试这个：

```
declare @csv varchar(100) ='aaa,bb,csda,daass';
set @csv = @csv+',';

with cte as
(
    select SUBSTRING(@csv,1,charindex(',',@csv,1)-1) as val, SUBSTRING(@csv,charindex(',',@csv,1)+1,len(@csv)) as rem 
    UNION ALL
    select SUBSTRING(a.rem,1,charindex(',',a.rem,1)-1)as val, SUBSTRING(a.rem,charindex(',',a.rem,1)+1,len(A.rem)) 
    from cte a where LEN(a.rem)>=1
    ) select val from cte 
```

* * *

## 回答 #17

> 赞同：6
> 
> 时间：2017-12-19T14:55:21.320

此功能最快：

```
CREATE FUNCTION dbo.F_ExtractSubString
(
  @String VARCHAR(MAX),
  @NroSubString INT,
  @Separator VARCHAR(5)
)
RETURNS VARCHAR(MAX) AS
BEGIN
    DECLARE @St INT = 0, @End INT = 0, @Ret VARCHAR(MAX)
    SET @String = @String + @Separator
    WHILE CHARINDEX(@Separator, @String, @End + 1) > 0 AND @NroSubString > 0
    BEGIN
        SET @St = @End + 1
        SET @End = CHARINDEX(@Separator, @String, @End + 1)
        SET @NroSubString = @NroSubString - 1
    END
    IF @NroSubString > 0
        SET @Ret = ''
    ELSE
        SET @Ret = SUBSTRING(@String, @St, @End - @St)
    RETURN @Ret
END
GO 
```

示例用法：

```
SELECT dbo.F_ExtractSubString(COLUMN, 1, ', '),
       dbo.F_ExtractSubString(COLUMN, 2, ', '),
       dbo.F_ExtractSubString(COLUMN, 3, ', ')
FROM   TABLE 
```

* * *

## 回答 #18

> 赞同：5
> 
> 时间：2015-07-14T09:42:52.287

我遇到了一个类似的问题，但很复杂，因为这是我发现的关于该问题的第一个线程，所以我决定发布我的发现。我知道这是一个简单问题的复杂解决方案，但我希望我可以帮助其他去这个线程寻找更复杂解决方案的人。我必须拆分一个包含 5 个数字的字符串（列名：levelsFeed），并在单独的列中显示每个数字。例如： 8,1,2,2,2 应显示为：

```
1  2  3  4  5
-------------
8  1  2  2  2 
```

解决方案 1：使用 XML 函数：此解决方案是迄今为止最慢的解决方案

```
SELECT Distinct FeedbackID, 
, S.a.value('(/H/r)[1]', 'INT') AS level1
, S.a.value('(/H/r)[2]', 'INT') AS level2
, S.a.value('(/H/r)[3]', 'INT') AS level3
, S.a.value('(/H/r)[4]', 'INT') AS level4
, S.a.value('(/H/r)[5]', 'INT') AS level5
FROM (            
    SELECT *,CAST (N'<H><r>' + REPLACE(levelsFeed, ',', '</r><r>')  + '</r> </H>' AS XML) AS [vals]
    FROM Feedbacks 
)  as d
CROSS APPLY d.[vals].nodes('/H/r') S(a) 
```

解决方案2：使用Split函数和pivot。（split 函数将字符串拆分为列名为 Data 的行）

```
SELECT FeedbackID, [1],[2],[3],[4],[5]
FROM (
    SELECT *, ROW_NUMBER() OVER (PARTITION BY feedbackID ORDER BY (SELECT  null)) as rn 
FROM (
    SELECT FeedbackID, levelsFeed
    FROM Feedbacks 
) as a
CROSS APPLY dbo.Split(levelsFeed, ',')
) as SourceTable
PIVOT
(
    MAX(data)
    FOR rn IN ([1],[2],[3],[4],[5])
)as pivotTable 
```

解决方案 3：使用字符串操作函数 - 比解决方案 2 快一点

```
SELECT FeedbackID,
SUBSTRING(levelsFeed,0,CHARINDEX(',',levelsFeed)) AS level1,
PARSENAME(REPLACE(SUBSTRING(levelsFeed,CHARINDEX(',',levelsFeed)+1,LEN(levelsFeed)),',','.'),4) AS level2,
PARSENAME(REPLACE(SUBSTRING(levelsFeed,CHARINDEX(',',levelsFeed)+1,LEN(levelsFeed)),',','.'),3) AS level3,
PARSENAME(REPLACE(SUBSTRING(levelsFeed,CHARINDEX(',',levelsFeed)+1,LEN(levelsFeed)),',','.'),2) AS level4,
PARSENAME(REPLACE(SUBSTRING(levelsFeed,CHARINDEX(',',levelsFeed)+1,LEN(levelsFeed)),',','.'),1) AS level5
FROM Feedbacks 
```

因为levelsFeed包含5个字符串值，所以我需要对第一个字符串使用子字符串函数。

我希望我的解决方案能帮助其他进入该线程的人寻找更复杂的拆分列方法

* * *

## 回答 #19

> 赞同：5
> 
> 时间：2015-09-30T08:36:00.330

使用字符串函数:)

```
select Value, 
       substring(String,1,instr(String," ") -1) Fname,  
       substring(String,instr(String,",") +1) Sname 
from tablename; 
```

使用了两个函数，
1\. `substring(string, position, length)` ==> 返回从位置到长度的字符串
2\. `instr(string,pattern)`==> 返回模式的位置。

如果我们不在子字符串中提供长度参数，它会返回到字符串结尾

* * *

## 回答 #20

> 赞同：4
> 
> 时间：2017-01-07T14:31:58.880

**这对我有用**

```
CREATE FUNCTION [dbo].[SplitString](
    @delimited NVARCHAR(MAX),
    @delimiter NVARCHAR(100)
) RETURNS @t TABLE ( val NVARCHAR(MAX))
AS
BEGIN
    DECLARE @xml XML
    SET @xml = N'<t>' + REPLACE(@delimited,@delimiter,'</t><t>') + '</t>'
    INSERT INTO @t(val)
    SELECT  r.value('.','varchar(MAX)') as item
    FROM  @xml.nodes('/t') as records(r)
    RETURN
END 
```

* * *

## 回答 #21

> 赞同：3
> 
> 时间：2014-12-29T22:30:56.443

表：

```
Value  ColOne
--------------------
1      Cleo, Smith 
```

如果没有太多列，以下应该可以工作

```
ALTER TABLE mytable ADD ColTwo nvarchar(256);
UPDATE mytable SET ColTwo = LEFT(ColOne, Charindex(',', ColOne) - 1);
--'Cleo' = LEFT('Cleo, Smith', Charindex(',', 'Cleo, Smith') - 1)
UPDATE mytable SET ColTwo = REPLACE(ColOne, ColTwo + ',', '');
--' Smith' = REPLACE('Cleo, Smith', 'Cleo' + ',')
UPDATE mytable SET ColOne = REPLACE(ColOne, ',' + ColTwo, ''), ColTwo = LTRIM(ColTwo);
--'Cleo' = REPLACE('Cleo, Smith', ',' + ' Smith', '') 
```

结果：

```
Value  ColOne ColTwo
--------------------
1      Cleo   Smith 
```

* * *

## 回答 #22

> 赞同：3
> 
> 时间：2012-05-14T10:43:56.293

您可能会在*[SQL User Defined Function to Parse a Delimited String](http://www.codeproject.com/KB/database/SQL_UDF_to_Parse_a_String.aspx)*中找到有用的解决方案（来自[The Code Project](http://en.wikipedia.org/wiki/The_Code_Project)）。

这是此页面的代码部分：

```
CREATE FUNCTION [fn_ParseText2Table]
  (@p_SourceText VARCHAR(MAX)
  ,@p_Delimeter VARCHAR(100)=',' --default to comma delimited.
  )
 RETURNS @retTable
  TABLE([Position] INT IDENTITY(1,1)
   ,[Int_Value] INT
   ,[Num_Value] NUMERIC(18,3)
   ,[Txt_Value] VARCHAR(MAX)
   ,[Date_value] DATETIME
   )
AS
/*
********************************************************************************
Purpose: Parse values from a delimited string
  & return the result as an indexed table
Copyright 1996, 1997, 2000, 2003 Clayton Groom (<A href="mailto:Clayton_Groom@hotmail.com">Clayton_Groom@hotmail.com</A>)
Posted to the public domain Aug, 2004
2003-06-17 Rewritten as SQL 2000 function.
 Reworked to allow for delimiters > 1 character in length
 and to convert Text values to numbers
2016-04-05 Added logic for date values based on "new" ISDATE() function, Updated to use XML approach, which is more efficient.
********************************************************************************
*/

BEGIN
 DECLARE @w_xml xml;
 SET @w_xml = N'<root><i>' + replace(@p_SourceText, @p_Delimeter,'</i><i>') + '</i></root>';

 INSERT INTO @retTable
     ([Int_Value]
    , [Num_Value]
    , [Txt_Value]
    , [Date_value]
     )
     SELECT CASE
       WHEN ISNUMERIC([i].value('.', 'VARCHAR(MAX)')) = 1
       THEN CAST(CAST([i].value('.', 'VARCHAR(MAX)') AS NUMERIC) AS INT)
      END AS [Int_Value]
    , CASE
       WHEN ISNUMERIC([i].value('.', 'VARCHAR(MAX)')) = 1
       THEN CAST([i].value('.', 'VARCHAR(MAX)') AS NUMERIC(18, 3))
      END AS [Num_Value]
    , [i].value('.', 'VARCHAR(MAX)') AS [txt_Value]
    , CASE
       WHEN ISDATE([i].value('.', 'VARCHAR(MAX)')) = 1
       THEN CAST([i].value('.', 'VARCHAR(MAX)') AS DATETIME)
      END AS [Num_Value]
     FROM @w_xml.nodes('//root/i') AS [Items]([i]);
 RETURN;
END;
GO 
```

* * *

## 回答 #23

> 赞同：3
> 
> 时间：2016-03-16T07:40:44.247

这很简单，您可以通过以下查询来获取它：

```
DECLARE @str NVARCHAR(MAX)='ControlID_05436b78-04ba-9667-fa01-9ff8c1b7c235,3'
SELECT LEFT(@str, CHARINDEX(',',@str)-1),RIGHT(@str,LEN(@str)-(CHARINDEX(',',@str))) 
```

* * *

## 回答 #24

> 赞同：3
> 
> 时间：2016-08-10T13:10:47.207

```
DECLARE @INPUT VARCHAR (MAX)='N,A,R,E,N,D,R,A'
DECLARE @ELIMINATE_CHAR CHAR (1)=','
DECLARE @L_START INT=1
DECLARE @L_END INT=(SELECT LEN (@INPUT))
DECLARE @OUTPUT CHAR (1)

WHILE @L_START <=@L_END
BEGIN
    SET @OUTPUT=(SUBSTRING (@INPUT,@L_START,1))
    IF @OUTPUT!=@ELIMINATE_CHAR
    BEGIN
        PRINT @OUTPUT
    END
    SET @L_START=@L_START+1
END 
```

* * *

## 回答 #25

> 赞同：3
> 
> 时间：2018-05-22T09:17:21.323

```
ALTER function get_occurance_index(@delimiter varchar(1),@occurence int,@String varchar(100))
returns int
AS Begin
--Declare @delimiter varchar(1)=',',@occurence int=2,@String varchar(100)='a,b,c'
Declare @result int
 ;with T as (
    select 1 Rno,0 as row, charindex(@delimiter, @String) pos,@String st
    union all
    select Rno+1,pos + 1, charindex(@delimiter, @String, pos + 1), @String
    from T
    where pos > 0
)
select  @result=pos 
from T 
where pos > 0   and rno = @occurence 
return isnull(@result,0)
ENd

declare @data as table (data varchar(100))
insert into @data values('1,2,3') 
insert into @data values('aaa,bbbbb,cccc') 
select top  3 Substring (data,0,dbo.get_occurance_index( ',',1,data)) ,--First Record always starts with 0
Substring (data,dbo.get_occurance_index( ',',1,data)+1,dbo.get_occurance_index( ',',2,data)-dbo.get_occurance_index( ',',1,data)-1) ,
Substring (data,dbo.get_occurance_index( ',',2,data)+1,len(data)) , -- Last record cant be more than len of actual data
data 
From @data 
```

* * *

## 回答 #26

> 赞同：2
> 
> 时间：2015-04-28T03:17:23.917

我发现使用上面的 PARSENAME 会导致任何带有句点的名称都为空。

因此，如果名称中有首字母或标题，后跟一个点，则返回 NULL。

我发现这对我有用：

```
SELECT 
REPLACE(SUBSTRING(FullName, 1,CHARINDEX(',', FullName)), ',','') as Name,
REPLACE(SUBSTRING(FullName, CHARINDEX(',', FullName), LEN(FullName)), ',', '') as Surname
FROM Table1 
```

* * *

## 回答 #27

> 赞同：2
> 
> 时间：2019-11-22T21:45:40.790

问题很简单，但问题很热门:)

所以我为**string_split()**创建了一些包装器，它以更通用的方式**旋转**结果。它是返回值 (nn, value1, value2, ... , value50) 的表函数 - 对于大多数 CSV 行来说已经足够了。如果有更多值，它们将换行到下一行 - **nn**表示行号。设置第三个参数*@columnCnt = [yourNumber]*在特定位置换行：

```
alter FUNCTION fn_Split50
(   
    @str varchar(max),
    @delim char(1), 
    @columnCnt int = 50
)
RETURNS TABLE 
AS
RETURN 
(
    SELECT * 
    FROM (SELECT 
            nn = (nn - 1) / @columnCnt + 1, 
            nnn = 'value' + cast(((nn - 1) % @columnCnt) + 1 as varchar(10)), 
            value
        FROM (SELECT 
            nn = ROW_NUMBER() over (order by (select null)),
            value
            FROM string_split(@str, @delim) aa
            ) aa
        where nn > 0
    ) bb
    PIVOT  
    (  
    max(value) 
    FOR nnn IN (    
        value1, value2, value3, value4, value5, value6, value7, value8, value9, value10,
        value11, value12, value13, value14, value15, value16, value17, value18, value19, value20,
        value21, value22, value23, value24, value25, value26, value27, value28, value29, value30,
        value31, value32, value33, value34, value35, value36, value37, value38, value39, value40,
        value41, value42, value43, value44, value45, value46, value47, value48, value49, value50        
     )  
    ) AS PivotTable 
) 
```

使用示例：

```
select * from dbo.fn_split50('zz1,aa2,ss3,dd4,ff5', ',', DEFAULT) 
```

[![结果 1](../Images/4f01d8ec71e814ffb26a0c9e0c4f02b0.png)](https://i.stack.imgur.com/cgUEs.png)

```
select * from dbo.fn_split50('zz1,aa2,ss3,dd4,ff5,gg6,hh7,jj8,ww9,qq10', ',', 3) 
```

[![在此处输入图像描述](../Images/12963e5e50e93c10cb3c7e525572cd7f.png)](https://i.stack.imgur.com/wDtfb.png)

```
select * from dbo.fn_split50('zz1,11,aa2,22,ss3,33,dd4,44,ff5,55,gg6,66,hh7,77,jj8,88,ww9,99,qq10,1010', ',',2) 
```

[![在此处输入图像描述](../Images/4656db487a314943b0560b7b276f69e8.png)](https://i.stack.imgur.com/IxQEm.png)

希望，它会有所帮助:)

* * *

## 回答 #28

> 赞同：2
> 
> 时间：2017-03-08T13:28:34.090

```
Select distinct PROJ_UID,PROJ_NAME,RES_UID from E2E_ProjectWiseTimesheetActuals
where   CHARINDEX(','+cast(PROJ_UID as varchar(8000))+',', @params) > 0 and  CHARINDEX(','+cast(RES_UID as varchar(8000))+',', @res) > 0 
```

* * *

## 回答 #29

> 赞同：2
> 
> 时间：2019-04-15T19:36:10.073

我重写了上面的答案并使它变得更好：

```
CREATE FUNCTION [dbo].[CSVParser]
(
  @s        VARCHAR(255),
  @idx      NUMERIC
)
RETURNS VARCHAR(12)
BEGIN
    DECLARE @comma int
    SET @comma = CHARINDEX(',', @s)
    WHILE 1=1
    BEGIN
        IF @comma=0
            IF @idx=1
                RETURN @s
            ELSE
                RETURN ''

        IF @idx=1
        BEGIN
            DECLARE @word VARCHAR(12)
            SET @word=LEFT(@s, @comma - 1)
            RETURN @word
        END

        SET @s = RIGHT(@s,LEN(@s)-@comma)
        SET @comma = CHARINDEX(',', @s)
        SET @idx = @idx - 1
    END
    RETURN 'not used'
END 
```

示例用法：

```
SELECT dbo.CSVParser(COLUMN, 1),
       dbo.CSVParser(COLUMN, 2),
       dbo.CSVParser(COLUMN, 3)
FROM   TABLE 
```

* * *

## 回答 #30

> 赞同：2
> 
> 时间：2016-12-08T18:51:52.040

```
select distinct modelFileId,F4.*
from contract
cross apply (select XmlList=convert(xml, '<x>'+replace(modelFileId,';','</x><x>')+'</x>').query('.')) F2
cross apply (select mfid1=XmlNode.value('/x[1]','varchar(512)')
,mfid2=XmlNode.value('/x[2]','varchar(512)')
,mfid3=XmlNode.value('/x[3]','varchar(512)')
,mfid4=XmlNode.value('/x[4]','varchar(512)') from XmlList.nodes('x') F3(XmlNode)) F4
where modelFileId like '%;%'
order by modelFileId 
```

* * *

## 回答 #31

> 赞同：0
> 
> 时间：2019-11-27T13:02:05.757

您可以使用 SQL Server 的“STRING_SPLIT”函数：

STRING_SPLIT（字符串，分隔符）

* * *

## 回答 #32

> 赞同：0
> 
> 时间：2021-04-07T06:36:15.387

这是一个老问题，但如果升级到 SQL Server 2017+ 是可能的，那么基于 JSON 的方法也是一种选择。这个想法是进行适当的转换：

*   将存储在`String`列中的文本转换为有效的 JSON 数组 ( `Cleo, Smith`into `["Cleo"," Smith"]`) 并使用`JSON_VALUE()`.

*   将存储在`String`列中的文本转换为有效的嵌套 JSON 数组 ( `Cleo, Smith`into ) 并使用显式模式（列定义）`[["Cleo"," Smith"]]`解析该数组。`OPENJSON()`

桌子：

```
SELECT [Value], [String]
INTO Data
FROM (VALUES
   (1, 'Cleo, Smith'),
   (2, 'John, Smith'),
   (3, 'Marian')
) v ([Value], [String]) 
```

声明使用`JSON_VALUE()`：

```
SELECT 
   [Value], 
   TRIM(JSON_VALUE(CONCAT('["', REPLACE(STRING_ESCAPE([String], 'json'), ',', '","'), '"]'), 'lax $[0]')) AS Name,
   TRIM(JSON_VALUE(CONCAT('["', REPLACE(STRING_ESCAPE([String], 'json'), ',', '","'), '"]'), 'lax $[1]')) AS Surname
FROM Data 
```

声明使用`OPENJSON()`：

```
SELECT d.[Value], TRIM(j.[Name]) AS [Name], TRIM(j.[Surname]) AS [Surname]
FROM Data d
OUTER APPLY OPENJSON(CONCAT('[["', REPLACE(STRING_ESCAPE(d.[String], 'json'), ',', '","'), '"]]')) WITH (
   Name varchar(100) 'lax $[0]',
   Surname varchar(100) 'lax $[1]'
) j 
```

结果：

```
Value  Name   Surname
---------------------
1      Cleo   Smith
2      John   Smith
3      Marian 
```

作为附加说明，使用此技术，您可以通过添加适当的 JSON 轻松解析具有两列以上的文本`path`。

* * *

## 回答 #33

> 赞同：0
> 
> 时间：2017-01-09T12:30:58.517

您可以使用拆分功能。

```
SELECT 
(select top 1 item from dbo.Split(FullName,',') where id=1 ) as Name,
(select top 1 item from dbo.Split(FullName,',') where id=2 ) as Surname,
FROM MyTbl 
```

* * *

## 回答 #34

> 赞同：0
> 
> 时间：2015-10-16T09:29:30.317

```
CREATE FUNCTION [dbo].[fnSplit](@sInputList VARCHAR(8000), @sDelimiter VARCHAR(8000) = ',')
RETURNS @List TABLE (item VARCHAR(8000))
BEGIN

    DECLARE @sItem VARCHAR(8000)
    WHILE CHARINDEX(@sDelimiter, @sInputList, 0) <> 0
    BEGIN

        SELECT @sItem = RTRIM(LTRIM(SUBSTRING(@sInputList, 1, CHARINDEX(@sDelimiter, @sInputList,0) - 1))),
               @sInputList = RTRIM(LTRIM(SUBSTRING(@sInputList, CHARINDEX(@sDelimiter, @sInputList, 0) + LEN(@sDelimiter),LEN(@sInputList))))

        -- Indexes to keep the position of searching
        IF LEN(@sItem) > 0

        INSERT INTO @List SELECT @sItem

    END

    IF LEN(@sInputList) > 0
    BEGIN

        INSERT INTO @List SELECT @sInputList -- Put the last item in

    END

    RETURN

END 
```

* * *

## 回答 #35

> 赞同：-1
> 
> 时间：2018-05-11T10:59:56.883

试试下面：

```
USE TRIAL
GO
CREATE TABLE DETAILS
(
  ID INT,
  NAME VARCHAR(50),
  ADDRESS VARCHAR(50)
)

INSERT INTO DETAILS
VALUES (100, 'POPE-JOHN-PAUL','VATICAN CIT|ROME|ITALY')
,(240, 'SIR-PAUL-McARTNEY','NEWYORK CITY|NEWYORK|USA')
,(460,'BARRACK-HUSSEIN-OBAMA','WHITE HOUSE|WASHINGTON|USA')
,(700, 'PRESIDENT-VLADAMIR-PUTIN','RED SQUARE|MOSCOW|RUSSIA')
,(950, 'NARENDRA-DAMODARDAS-MODI','10 JANPATH|NEW DELHI|INDIA') 
```

询问：

```
select [ID]
,[NAME]
,[ADDRESS]
,REPLACE(LEFT(NAME, CHARINDEX('-', NAME)),'-',' ') as First_Name
,CASE 
WHEN CHARINDEX('-',REVERSE(NAME))+ CHARINDEX('-',NAME) < LEN(NAME)
THEN  SUBSTRING(NAME, CHARINDEX('-', (NAME)) + 1, LEN(NAME) - CHARINDEX('-', REVERSE(NAME)) - CHARINDEX('-', NAME))
ELSE 'NULL'
END AS Middle_Name
,REPLACE(REVERSE( SUBSTRING( REVERSE(NAME), 1, CHARINDEX('-',REVERSE(NAME)))), '-','') AS Last_Name 
,REPLACE(LEFT(ADDRESS, CHARINDEX('|', ADDRESS)),'|',' ') AS Locality
,CASE 
WHEN CHARINDEX('|',REVERSE(ADDRESS))+ CHARINDEX('|',ADDRESS) < LEN(ADDRESS) 
THEN SUBSTRING(ADDRESS, CHARINDEX('|', (ADDRESS))+1, LEN(ADDRESS)-CHARINDEX('|', REVERSE(ADDRESS))-CHARINDEX('|',ADDRESS))
ELSE 'Null' 
END AS STATE
,REPLACE(REVERSE(SUBSTRING(REVERSE(ADDRESS),1 ,CHARINDEX('|',REVERSE(ADDRESS)))),'|','') AS Country
FROM DETAILS

SELECT CHARINDEX('-', REVERSE(NAME)) AS LAST,CHARINDEX('-',NAME)AS FIRST, LEN(NAME) AS LENGTH
FROM DETAILS

SELECT SUBSTRING(NAME, CHARINDEX('-', (NAME))+1, LEN(NAME) -CHARINDEX('-', REVERSE(NAME)) - CHARINDEX('-', NAME))
FROM DETAILS 
```

如果您对代码有任何疑问，请告诉我

* * *

## 回答 #36

> 赞同：-1
> 
> 时间：2020-03-27T10:59:52.837

试试这个

```
CREATE FUNCTION [dbo].[Split]  
(  
 @ListOfValues varchar(max),   
 @ValueSeparator varchar(10)  
)  
RETURNS @ListOfValuesInRows TABLE  
(  
 Value varchar(max)  
)  
AS  
BEGIN  

 IF Len(@ListOfValues) = 0  
  RETURN   

 if @ValueSeparator <> ' '  
 Begin  
  WHILE CHARINDEX(@ValueSeparator, @ListOfValues) > 0  
  BEGIN  

   INSERT INTO @ListOfValuesInRows   
   SELECT LTRIM(RTRIM(SUBSTRING(@ListOfValues, 1, CHARINDEX(@ValueSeparator, @ListOfValues)-1)))  

   SET @ListOfValues = SubString(@ListOfValues, CharIndex(@ValueSeparator, @ListOfValues)+Len(@ValueSeparator), Len(@ListOfValues))  

  END  

  INSERT INTO @ListOfValuesInRows  
  SELECT LTRIM(RTRIM(@ListOfValues))  
 End  
 Else  
 BEGIN  
  DECLARE @xml XML;  
  SET @xml = N'<t>' + REPLACE(@ListOfValues, @ValueSeparator, '</t><t>') + '</t>';  
  INSERT INTO @ListOfValuesInRows (Value)  
  SELECT LTRIM(RTRIM(r.value( '.', 'varchar(MAX)' ))) AS item  
  FROM @xml.nodes( '/t' ) AS records( r )  

 END  

RETURN  

END 
```

* * *

## 回答 #37

> 赞同：-2
> 
> 时间：2021-03-06T05:34:29.963

选择字符串。LEFT(STRING,Charindex(",",STRING)-1 as SURE Name RIGHT(STRING,LEN(STRING)-CHARINDEX(","STRING)) AS ]NAME FROM TABLE NAME

* * *

## 回答 #38

> 赞同：-2
> 
> 时间：2016-06-12T06:59:08.230

```
ALTER FUNCTION [dbo].[StringListTo] (@StringList Nvarchar(max),@Separators char(1),@start int, @index int )
RETURNS nvarchar(max)
AS
BEGIN
declare @out Nvarchar(max)
declare @i int
declare @start_old int
set @start=@start+1
set @i=1
while(@i<=@index)
begin
    set @start_old=@start
    set @start=CHARINDEX('.',@StringList,@start+1)
    if (@start>0)
    begin
        set @out=Substring(@StringList,@start_old+1,@start-@start_old-1)
    end
else
begin
    set @out=Substring(@StringList,@start_old+1,len(@StringList)-1)
end
set @i=@i+1
end
RETURN @out
END; 
```

# xcode - Xcode 需要完全重建

> ID：10581773
> 
> 赞同：0
> 
> 时间：2012-05-14T10:40:42.190
> 
> 标签：xcode

Xcode 一直要求我在更改一行代码后进行完全重建。否则，代码根本不会编译到应用程序中。

有没有人有任何想法可能导致这种情况？

# c# - 表单身份验证问题 - 身份验证后无法从登录页面重定向到主页

> ID：10581776
> 
> 赞同：0
> 
> 时间：2012-05-14T10:40:51.740
> 
> 标签：c#, .net, sharepoint-2010, forms-authentication

在 Sharepoint 2010 中，我们创建了一个具有经典身份验证的 Web 应用程序并开始开发它。稍后，我们想要对我们的项目实施表单身份验证，因此我创建了一个启用了基于表单的身份验证的新 SharePoint Web 应用程序。我备份了旧站点（经典身份验证）并恢复到新站点（fba）。我通过以下链接实现了表单身份验证：

[使用 IIS7 为 SharePoint 2010 配置基于表单的身份验证](http://donalconlon.wordpress.com/2010/02/23/configuring-forms-base-authentication-for-sharepoint-2010-using-iis7/)

我创建了一个自定义登录页面。输入有效凭据后，用户不会被重定向到主页。身份验证正常进行，但未重定向到主页。当我单击登录按钮时，它再次加载相同的登录页面。请找到以下用于身份验证和重定向到主页的代码：

```
protected void btnLogin2_Click(object sender, EventArgs e)
{
  if (Membership.ValidateUser(txtUserId.Value, txtPassword.Value))
  {
    string link = "http://ejudnam:36414/sites/Prototype/Dashboard/Pages/default.aspx");

    Response.Redirect(link);

    //I tried with the below line also but it is of no use
    // SPUtility.Redirect(link, SPRedirectFlags.Default, this.Context);
  }  
  else
  {
    lblMessage.Text = "Login Failed.";
  }
} 
```

我们无法弄清楚这个问题。我尝试了很多解决方案，但它们没有用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T11:14:37.320

请使用[SPClaimsUtility](http://msdn.microsoft.com/en-us/library/microsoft.sharepoint.identitymodel.spclaimsutility.authenticateformsuser.aspx)在基于声明的应用程序中授权用户。

> 从 .\assembly\GAC_MSIL\Microsoft.SharePoint.IdentityModel\14.0.0.0__71e9bce111e9429c \Microsoft.SharePoint.IdentityModel.dll添加**Microsoft.SharePoint.IdentityModel** DLL 引用以访问 SPClaimsUtility

比试试这个：

```
 SPSecurity.RunWithElevatedPrivileges(delegate()
        {
           bool status = SPClaimsUtility.AuthenticateFormsUser(Context.Request.UrlReferrer, txtUserId.Value, txtPassword.Value);
           if (status)
              {
               string link = "http://ejudnam:36414/sites/Prototype/Dashboard/Pages/default.aspx";
              Response.Redirect(link);
              }
        }); 
```

# oracle - 如何在 Code First EF 查询中包含 SQL 函数？

> ID：10581778
> 
> 赞同：0
> 
> 时间：2012-05-14T10:41:00.447
> 
> 标签：oracle, entity-framework, ef-code-first

我有一个简单的问题。

是否可以在“EF 代码优先”代码中包装 SQL 函数，以便我可以将其作为其他 LINQ -> EF 查询的一部分执行？

我们有一个 SQL 函数，可以在数据库上完成一些核心工作。我们给它一个参考号，它会根据参考返回一个格式良好的字符串。我想要做的是将它添加到数据库查询中，但我不知道如何去做。

对于信息，这将是我将使用的 SQL（更简单）：

```
select t.ref, getrefstring(t.ref) from transactions t; 
```

我不想手动编写 SQL 并使用 SQLQuery 命令，因为实际的 SQL 是广泛的，我真的不想回到使用 SQL，因为当我必须将所有字段映射回来时会变得混乱再次进入 C#。

有没有人有任何想法？

干杯，尼克

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T11:20:02.047

如何创建视图：

```
create view transactions_view as
select t.ref, getrefstring(t.ref), ... (other cols you may want)
from transactions t; 
```

# visual-studio-2010 - 在 Visual Studio 2010 路径长度中将新项目添加到解决方案时出错

> ID：10581784
> 
> 赞同：22
> 
> 时间：2012-05-14T10:41:18.880
> 
> 标签：visual-studio-2010

我有点困惑。我正在创建一个新的解决方案，其中包含一些与我目前正在工作的框架一致的命名空间。

添加新项目时，总字符数比 255 低 150 个。

添加项目时为什么会出现此错误？

“您正在创建的解决方案、项目或项目的完整路径长度超过了系统允许的最大长度。您必须减少名称或位置的长度”

规则是什么？我真的可以使用多少个字符？

谢谢

**编辑**

刚刚找到一个链接，上面写着计算路径：请参阅链接 [http://social.msdn.microsoft.com/forums/en-US/csharpide/thread/d614d0ba-eea2-444b-9be8-7fe4fb85a226/](http://social.msdn.microsoft.com/forums/en-US/csharpide/thread/d614d0ba-eea2-444b-9be8-7fe4fb85a226/)

```
 Path length + 1 (separator) +

  Solution name length + 1 (separator) +

  Project name length + 1 (separator) +

  Project name length +

  80 (Reserved space) 
```

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-11-10T07:21:12.620

我发现创建项目后，我可以将项目更改为更长的名称。项目名称更改似乎没有这个字符数限制。

-- 2018 年 3 月 7 日的更新 -- 在 Windows 10 中，您实际上可以禁用最大路径长度限制。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-01-14T13:47:27.570

这只是@Kelvin 答案的一种变体，但您可以在路径较短的位置创建一个新项目，例如 c:\temp。然后将项目文件夹树移动到您正在处理的框架中。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-12-11T18:16:12.690

VS 2013 似乎也有同样的限制。但是，我能够：

1.  取消选中“为解决方案创建目录”
2.  完成输入完整的解决方案名称
3.  再次选中该框

工作！

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-12-07T10:29:52.840

VS2010 在现有解决方案中添加新项目时存在同样的问题。最简单的解决方案是

*   使用可接受的名称（比期望的短）创建项目，
*   关闭解决方案，
*   通过根据需要重命名项目文件夹和项目 .csproj 文件，将项目移动到所需位置
*   手动更新 .sln 以修复上面的项目名称/文件夹（它只是一个 ASCII 文件，项目路径很容易找到和更新）
*   重新打开解决方案（项目应该加载良好）并转到项目属性以修复命名空间和程序集名称。

这大致是其他答案中建议的解决方案，但在这里我将逐步解释它并提供更多详细信息。

# jquery - 创建一个jQuery滑块动态

> ID：10581785
> 
> 赞同：1
> 
> 时间：2012-05-14T10:41:22.520
> 
> 标签：jquery, slider

我在页面中使用了简单的滑块，但我想在同一页面中放置另一个滑块。现在我有问题，如果我使用具有相同 ID 或类的 div 它不起作用。

例子：-

```
 <div class="slider">
    <ul>        
      <li><a href="#"><img src="images/02.jpg" alt="Css Template Preview" /></a></li>
      <li><a href="#"><img src="images/04.jpg" alt="Css Template Preview" /></a></li>
      <li><a href="#"><img src="images/05.jpg" alt="Css Template Preview" /></a></li>      
    </ul>
  </div> 
```

如果我在同一页面中使用相同的类，它就不起作用。请帮助我如何在同一页面中多次管理相同的滑块。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T10:48:03.017

如果您在 JavaScript 代码中使用此方法，

```
$("#slider").easySlider({
     auto: true,
     continuous: true 
}); 
```

然后创建

```
<div id="slider" class="slider">
  <ul>        
    <li><a href="#"><img src="images/02.jpg" alt="Css Template Preview" /></a></li>
    <li><a href="#"><img src="images/04.jpg" alt="Css Template Preview" /></a></li>
    <li><a href="#"><img src="images/05.jpg" alt="Css Template Preview" /></a></li>      
  </ul>
</div>
<div id="slider_new" class="slider">
  <ul>        
    <li><a href="#"><img src="images/02.jpg" alt="Css Template Preview" /></a></li>
    <li><a href="#"><img src="images/04.jpg" alt="Css Template Preview" /></a></li>
    <li><a href="#"><img src="images/05.jpg" alt="Css Template Preview" /></a></li>      
  </ul>
</div> 
```

然后添加两次幻灯片 JavaScript，例如，

```
$("#slider").easySlider({
    auto: true,
    continuous: true 
});
$("#slider_new").easySlider({
    auto: true,
    continuous: true 
}); 
```

这应该有效。我假设你正在使用[这个](http://cssglobe.com/post/5780/easy-slider-17-numeric-navigation-jquery-slider)

# mysql - 从一个表中复制列并插入另一个表

> ID：10581792
> 
> 赞同：0
> 
> 时间：2012-05-14T10:41:54.517
> 
> 标签：mysql

我有 2 张桌子：`publications`和`books.`

目前，该表`publications`是空的。

我需要选择“书籍”表中卷为“26”的所有书籍并将其插入出版物表中。我还应该`publications.component`用“thesorus”填充该列

我尝试了下面的 sql，但它似乎不正确：

```
INSERT INTO publications (book_fk, component) VALUES (SELECT book_id FROM books WHERE volume = 26, "thesorus"); 
```

任何建议都非常感谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-14T10:44:41.723

正确的语法是：

```
INSERT INTO publications (book_fk, component) SELECT book_id, 'thesorus' FROM books WHERE volume = 26 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-14T10:45:34.623

```
INSERT INTO publications (book_fk, component) SELECT book_id, 'thesorus' FROM books WHERE volume = 26; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-26T12:31:32.120

```
Insert into (field1,field2) select field1, field2 from table1 
```

# android - 如何在低于 3.0 的 android 版本中使用 view.setX() 方法

> ID：10581797
> 
> 赞同：3
> 
> 时间：2012-05-14T10:42:17.167
> 
> 标签：android

我想实现拖放功能，但设备版本是 2.2.1，所以应用程序无法正常工作我使用 onTouch 方法并使用 setx() 和 setY() 设置坐标，但此方法不适用于我的设备版本请告诉我提前感谢的替代方式

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T11:14:04.360

不幸的是，Android 支持包不包含来自 API 11 (Android 3.0) 的新 Drag-n-Drop，可能是因为它需要平台端的更改。

基本上，您可以在 Android 2.1 源代码中找到[Launcher](https://github.com/android/platform_packages_apps_launcher)的示例。但这有点复杂。使用拖放检查此自定义组件的[实现](https://sites.google.com/site/ericbharlow/sample-code/DragNDrop.zip)。`ListView`当我有同样的任务时，它帮助了我很多。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-30T09:28:53.237

Android 在版本 < 3.0 中不支持此方法，但如果您想实现此方法，则需要更改布局参数。

希望这对你有用

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-14T10:50:58.420

使用这个 jar 文件可以使用到版本 4 的所有版本的功能。

[http://www.java2s.com/Code/Jar/a/Downloadandroidsupportv4jar.htm](http://www.java2s.com/Code/Jar/a/Downloadandroidsupportv4jar.htm)

# java - mysql数据库更新后如何运行脚本（cronjob）

> ID：10581798
> 
> 赞同：1
> 
> 时间：2012-05-14T10:42:21.647
> 
> 标签：java, php, mysql, cron

我如何在 mysql 数据库更新后立即运行脚本。我在 test.php 中有一个脚本，我想每次都运行，如果在 10:20:56 秒收到按摩，我会收到短信（或你可以说的条目）我的数据库示例脚本应该在 10:20 运行： 57 秒 .. 任何事情都会像 cronjob java php .any 脚本一样

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T10:46:31.580

您可以尝试创建`ON UPDATE`触发器并尝试调用 PHP 脚本。[这里](https://stackoverflow.com/questions/1467369/invoking-a-php-script-from-a-mysql-trigger)有更多关于它的信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T10:44:54.467

结合您的 mysql 数据库查看[触发器。](http://dev.mysql.com/doc/refman/5.0/en/triggers.html)有了它，您可以在每次更新、插入或修改时运行 sql 查询。

简化语法：

```
CREATE
    TRIGGER trigger_name trigger_time trigger_event
    ON tbl_name FOR EACH ROW trigger_body 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-14T10:47:26.410

如果通过您的代码插入值，您可以在插入后添加脚本调用。如果它被插入到代码中，而不是由您管理，那么您应该每 N 秒轮询一次数据库并检查新记录并调用您的 php 脚本。

# file - 通过 mootools 将文件发布到 php

> ID：10581800
> 
> 赞同：0
> 
> 时间：2012-05-14T10:42:32.437
> 
> 标签：file, mootools

我正在使用 mootools 框架来构建我的网站，使用 php 进行编码。现在我想通过 mootools 提交表单，其中包含带有文件上传器的基本 html 标签。那么，如何使用 mootools 请求将此文件发送到“.php”页面？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T13:21:06.733

作为@lorenzo-s 答案的替代方案，如果您要返回 JSON 编码数据，您可能需要考虑使用[Mootools Request](http://mootools.net/docs/core/Request/Request)，或者甚至是[Request.JSON 。](http://mootools.net/docs/core/Request/Request.JSON)

**Javascript**

```
var myRequest = new Request({          // This defines the AJAX call's parameters (url, callback function, etc)
    url: '/url/to/script.php',
    onSuccess: function(returnText) {
        console.log(returnText);
    }
});

myRequest.post({ foo: 'bar' });        // This makes the actual call, sending an object with one property: `foo`. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T12:35:23.167

如果文件上传器是标准`<input type="file">`并且包含在 a 之间`<form enctype="multipart/form-data">`，您可以通过 Javascript 发送表单。

```
<form id="myForm" method="post" enctype="multipart/form-data">
    <input type="file" name="myFile">
</form> 
```

```
$('myForm').submit();

```

# dojo - dojo 1.7，在子类的构造函数中设置 ContentPane 的内容

> ID：10581802
> 
> 赞同：0
> 
> 时间：2012-05-14T10:42:35.213
> 
> 标签：dojo, dijit.layout

我有以下子类，派生自 ContentPane：

```
define([
        "dijit/layout/ContentPane",
        "dojo/_base/declare"
    ],

    function (ContentPane, declare) {
        var view = declare("client.View", ContentPane, {
            html: null,
            constructor: function (args) {
                declare.safeMixin(this, args);
                if (this.html !== null) {
                    this.set("content", this.html);
                }
            }
        });
        return view;
    }
); 
```

现在，以下代码在 "this.set("content", this.html);" 上引发 TypeError 线：

```
var html = "<div>Hello</div>";
var view = View(html); 
```

我应该如何正确设置 ContentPane 的内容？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T03:57:15.583

Ken Benjamin 在 Dojo 社区 (http://dojotoolkit.org/community/) 上回答了我的问题：

您试图在小部件生命周期中过早地设置内容。尝试在 postCreate 而不是构造函数中进行。

在此处阅读有关小部件生命周期的更多信息：http: [//dojotoolkit.org/documentation/tutorials/1.6/understanding_widget/](http://dojotoolkit.org/documentation/tutorials/1.6/understanding_widget/)

# jquery - css3 jquery 转换

> ID：10581806
> 
> 赞同：0
> 
> 时间：2012-05-14T10:42:46.433
> 
> 标签：jquery, css

有没有比这更好的触发 css3 转换的方法，我认为这有点 hacky 或者这是每个人都这样做的方式？

假设我们有一个具有以下 css 的 div：

```
.box{
  position: fixed;
  top: 50%;
  left: 50%;
  margin: -50px 0px 0px -50px;

  width: 100px;
  opacity: 0;
  transition: opacity .3s ease-out;
}

.box.box-visible{
   opacity: 1;
} 
```

现在我们得到了以下 jQuery：

```
$(function(){
    $('.box').addClass('box-visible');
}); 
```

这不会触发动画，所以当我们这样做时：

```
$(function(){
    var transition = setTimeout(function(){
        $('.box').addClass('box-visible');
    }, 1);
}); 
```

然后触发转换，但这不是有点hacky吗？还有其他解决方案吗？

感谢阅读我希望我的回答很清楚。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T11:07:46.100

请将此用于背景动画，它将支持所有浏览器示例：

```
div ul li a{background:url(../images/asso/arow.png) no-repeat left 0;}
div ul li a:hover{ background-position:0 -66px;} 

(function($) {
    $.extend($.fx.step,{
        backgroundPosition: function(fx) {
            if (fx.state === 0 && typeof fx.end == 'string') {
                var start = $.curCSS(fx.elem,'backgroundPosition');
                start = toArray(start);
                fx.start = [start[0],start[2]];
                var end = toArray(fx.end);
                fx.end = [end[0],end[2]];
                fx.unit = [end[1],end[3]];
            }
            var nowPosX = [];
            nowPosX[0] = ((fx.end[0] - fx.start[0]) * fx.pos) + fx.start[0] + fx.unit[0];
            nowPosX[1] = ((fx.end[1] - fx.start[1]) * fx.pos) + fx.start[1] + fx.unit[1];
            fx.elem.style.backgroundPosition = nowPosX[0]+' '+nowPosX[1];

           function toArray(strg){
               strg = strg.replace(/left|top/g,'0px');
               strg = strg.replace(/right|bottom/g,'100%');
               strg = strg.replace(/([0-9\.]+)(\s|\)|$)/g,"$1px$2");
               var res = strg.match(/(-?[0-9\.]+)(px|\%|em|pt)\s(-?[0-9\.]+)(px|\%|em|pt)/);
               return [parseFloat(res[1],10),res[2],parseFloat(res[3],10),res[4]];
           }
        }
    });
})(jQuery);

$(function(){
    $('ul li')
        .mouseover(function(){
            $(this).find('a').stop().animate({backgroundPosition:"(0 -66)"}, {duration:500})
        })
        .mouseout(function(){
            $(this).find('a').stop().animate({backgroundPosition:"(0 0)"}, {duration:500})
            })
        }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T12:09:58.123

你只需要稍微修改你的代码......

```
 .box{
            position: fixed;
            top: 50%;
            left: 50%;
            margin: -50px 0px 0px -50px;
            width: 100px;
            border-width:thin;
            border-style:solid;
            background:red;
            opacity: 0;
            -moz-transition: opacity 3s ease-out;//for firefox  
            -o-transition: opacity 3s ease-out;// for opera  
            -webkit-transition: opacity 3s ease-out;// for chrome
        }  
     .box-visible{  
        opacity:1;
      } 
```

然后在 Jquery

```
 $(document).ready(function(){  
       $(function(){  
           $('.box').addClass('box-visible');  
       });
     }); 
```

**请记住：**设置 div 的高度或在其中放置一些文本以注意更改。

# sql-server - SQL Server：全文目录搜索问题

> ID：10581808
> 
> 赞同：0
> 
> 时间：2012-05-14T10:42:52.470
> 
> 标签：sql-server, full-text-search

我面临一个关于 SQL Server 2005 中的全文目录搜索目录的问题。我创建了一个全文目录，它工作正常，但它不适用于特殊字符，我可以搜索除特殊字符之外的任何字符串。

我试图搜索数据库的文本是“2-（二甲氨基）乙醇”。

谁能帮我？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T11:00:43.570

你在使用 nvarchar(max) 吗？或者你使用什么字段类型？因为使用 nvarchar 和 UTF-8 编码应该不会有问题。

# c# - DDE & WCF & WMI & WFP 有什么区别？

> ID：10581812
> 
> 赞同：-1
> 
> 时间：2012-05-14T10:43:14.763
> 
> 标签：c#, wpf, wcf, wmi, dde

正如我在问题中提到的，DDE & WCF & WMI & WFP 有什么区别？我什么时候应该使用每个人。我在谷歌搜索了很多，但我没有明白这一点。

它们之间是否有任何交集或共同作用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T10:48:38.177

DDE 是 Windows 中用于进程间通信的旧模型。

WCF 是用于构建网络应用程序的 .NET 框架。

WMI 是 Windows 驱动程序模型的扩展，它允许获取有关硬件的通知或信息。

# android - SiP 域演示 (android)

> ID：10581813
> 
> 赞同：3
> 
> 时间：2012-05-14T10:43:37.900
> 
> 标签：android, sip, demo

我正在使用演示[http://developer.android.com/resources/samples/SipDemo/index.html](http://developer.android.com/resources/samples/SipDemo/index.html)并尝试通过 SiP 拨打电话，我有 2 台带有 wi-fi 连接的 android 设备，但这是我的问题 - 什么是 SiP 域？我读过这个，但我不明白 - 我应该在某个地方运行 SiP 服务器还是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T16:24:38.613

在 Linux 服务器上运行 Asterisk 并让两个设备都注册到它。然后你就可以打电话了。如果您将用户名和其他电话 IP 地址指定为域，您也应该能够直接呼叫，但您必须修改演示。

# c# - 使用 WebClient() 计算要下载的总字节数

> ID：10581820
> 
> 赞同：2
> 
> 时间：2012-05-14T10:43:56.950
> 
> 标签：c#, winforms, progress-bar, webclient, progress

变量“totalBytes”始终为 -1，因此我无法正确计算/更新进度条，为什么会发生这种情况？

```
private void button1_Click(object sender, EventArgs e)
{
    WebClient client = new WebClient();
    client.DownloadFileCompleted += new AsyncCompletedEventHandler(Completed);
    client.DownloadProgressChanged += new DownloadProgressChangedEventHandler(ProgressChanged);
    client.DownloadFileAsync(new Uri("http://example.com/test.mp3"), @"E:\Test.mp3");
}

private void ProgressChanged(object sender, DownloadProgressChangedEventArgs e)
{
    double bytesIn = double.Parse(e.BytesReceived.ToString());
    label1.Text = Convert.ToString(bytesIn);

    double totalBytes = double.Parse(e.TotalBytesToReceive.ToString()); //stays at -1
    label2.Text = Convert.ToString(totalBytes);

    double percentage = bytesIn / totalBytes * 100;
    label3.Text = Convert.ToString(percentage);

    progressBar1.Value = int.Parse(Math.Truncate(percentage).ToString());
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-14T11:28:10.743

A在内部`WebClient`使用 a `WebRequest`，问题可能是您从中下载文件的服务器未发送`Content-Length`HTTP 标头，在这种情况下，您应该使用`Indeterminate`ProgressBar 样式（例如 Marquee）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T12:13:54.373

您可以手动检查响应标头中的 Content-Length

```
client.ResponseHeaders["Content-Length"] 
```

# c# - MOQ - 验证增量属性调用

> ID：10581821
> 
> 赞同：1
> 
> 时间：2012-05-14T10:43:58.303
> 
> 标签：c#, .net, unit-testing, tdd, moq

下面的代码片段最好地解释了我想要实现的目标：

```
[Test]
public void ReplayGoalTeamATest()
{
    var stateMachineMock = new Mock<IIceHockeyOddsStateMachine>();

    new IceHockeyActionLogRecord { Event = "goal", Team = "A"}.Replay(stateMachineMock.Object);

    stateMachineMock.Verify(s=>s.TeamAScore++); //Syntax error
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T10:50:27.923

如果您的 IIceHockeyOddsStateMachine 接口上同时具有 getter 和 setter，则可以验证该值是否像这样递增：

```
var stateMachineMock = new Mock<IIceHockeyOddsStateMachine>();

stateMachineMock.SetupAllProperties();

stateMachineMock.Object.TeamAScore = 0;

new IceHockeyActionLogRecord { Event = "goal", Team = "A"}.Replay(stateMachineMock.Object);

Assert.That(stateMachineMock.Object.TeamAScore, Is.EqualTo(1)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-14T12:13:44.530

当你这样做时`s.TeamAScore++`，你有两个不同的动作，你应该设置和验证。第一个动作是从您的依赖项中获取当前分数，第二个动作是设置新分数：

```
int score = stateMachine.TeamAScore;
// other staff
stateMachine.TeamAScore = score + 1; 
```

所以，我会明确定义这种与依赖关系的交互：

```
// Arrange
Mock<IIceHockeyOddsStateMachine> stateMachineMock = new Mock<IIceHockeyOddsStateMachine>();
stateMachineMock.SetupGet(s => s.TeamAScore).Returns(0);
IceHockeyActionLogRecord record = new IceHockeyActionLogRecord { Event = "goal", Team = "A"};
// Act
record.Replay(stateMachineMock.Object);
// Assert
stateMachineMock.VerifySet(s => s.TeamAScore = 1); 
```

在这种情况下，您正在测试 IceHockeyActionLogRecord，它与依赖项交互的方式。测试成为对象之间交互的规范。

当您验证 TeamAScore 值时，您正在测试模拟实现。Callback 的使用也将测试您的代码，而不是测试对象之间的交互。

另外，我会在您的测试中为幻数命名，甚至提供参数：

```
[TestCase(0, 1)]
[TestCase(50, 51)]
public void ShouldIncrementTeamScore(int initialScore, int expectedScore)
{
    var stateMachineMock = new Mock<IIceHockeyOddsStateMachine>();
    stateMachineMock.SetupGet(s => s.TeamAScore).Returns(initialScore);
    IceHockeyActionLogRecord foo = new IceHockeyActionLogRecord();
    foo.Replay(stateMachineMock.Object);
    stateMachineMock.VerifySet(s => s.TeamAScore = expectedScore);            
} 
```

更新：如果您的界面没有属性 getter，那么只需修改 Arrange 部分测试（不要设置属性 getter 调用）：

```
// Arrange
var stateMachineMock = new Mock<IIceHockeyOddsStateMachine>();
var record = new IceHockeyActionLogRecord { Event = "goal", Team = "A"};
// Act
record.Replay(stateMachineMock.Object);
// Assert
stateMachineMock.VerifySet(s => s.TeamAScore = 1); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-14T10:47:15.620

您是否尝试过使用 .CallBack() 方法？不确定验证是否支持上述实现

# c# - 如何在 .cs 文件中找到对 DLL\OCX\EXE 的引用？

> ID：10581823
> 
> 赞同：1
> 
> 时间：2012-05-14T10:44:07.780
> 
> 标签：c#, visual-studio, dll, reference

我正在尝试分支一个开源程序，该程序从另一个分支..问题是我试图从中读取的分支仅提供 .cs 文件，没有参考或文档说明它们的实现方式和参考。

VS 返回错误，指出缺少指令或程序集引用，但程序中使用的命名空间非常模糊（队列、请求、响应、CookieStore），无法在 Google 中找到正确的引用。

有没有办法在 .cs 文件中找到引用？或者，您是否认识有问题的参考文献？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T10:56:31.357

您是否有任何机会预编译了 dll（可能是发布版本）？如果这样做，您可以使用 .NET Reflector 查看它尝试加载的命名空间的名称。这可能有助于更接近找到您的外部参考。

大多数项目应该是连续构建的，所以如果 refs 搞砸了，它应该被打破。

# android - Android：Camera.takePicture 回调并不总是触发

> ID：10581826
> 
> 赞同：3
> 
> 时间：2012-05-14T10:44:15.700
> 
> 标签：android, camera, photo, image

大概 90% 的时间，回调将无法触发。因此我的照片永远不会被保存。

我究竟做错了什么？

```
 @Override
public boolean onTouchEvent(MotionEvent event)
{
    boolean result = super.onTouchEvent(event);

       int action = event.getAction();
       if(action == MotionEvent.ACTION_DOWN)
       {
           takePicture();

           this.finish(); // ERROR IS HERE. Closing down before callback is done.

       }    
       return result;
}

private void takePicture() {
    if (mCamera != null)
        mCamera.takePicture(shutterCallback, null, jpegCallback);     
}

ShutterCallback shutterCallback = new ShutterCallback() {
      public void onShutter() {

          AudioManager meng = (AudioManager) getBaseContext().getSystemService(Context.AUDIO_SERVICE);
            int volume = meng.getStreamVolume( AudioManager.STREAM_NOTIFICATION);

            if (volume != 0)
            {
                    MediaPlayer _shootMP = MediaPlayer.create(getBaseContext(), Uri.parse("file:///system/media/audio/ui/camera_click.ogg"));
                    _shootMP.start();
            }
      Toast.makeText(CameraActivity.this, "Picture Taken", Toast.LENGTH_SHORT).show();
      }
};

PictureCallback rawCallback = new PictureCallback() {
      public void onPictureTaken(byte[] _data, Camera _camera) {
        // TODO Do something with the image RAW data.
          int test = 1;
      }
};

PictureCallback jpegCallback = new PictureCallback() {
  public void onPictureTaken(byte[] _data, Camera _camera) {
      File photo=new File(Environment.getExternalStorageDirectory(), "photo1.jpg");

      if (photo.exists()) {
            photo.delete();
      }

      try {
        FileOutputStream fos=new FileOutputStream(photo.getPath());

        fos.write(_data);
        fos.close();
      }
      catch (java.io.IOException e) {
        Log.e("PictureDemo", "Exception in photoCallback", e);
      }

      SqlDB.SavePhoto(1, _data);      
  }
}; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T11:29:01.103

您可以调试并检查它是否在任何函数 rawCallback 或 jpegCallback 中。您是否正在为您的相机设置 jpeg 格式。我想根据那个回调函数会被调用。所以它应该在 rawCallback 或 jpegCallback 中。能不能试一次。

mCamera.takePicture(shutterCallback, rawCallback, jpegCallback);

如果它失败了，那么它要去的地方可能是你再次打开相机的地方。在这种情况下，我认为您的相机参数将被重置，并可能返回原始回调而不是 jpeg

实际上，我认为如果相机没有崩溃并且它不为空，那么唯一的情况就是您正在使用默认设置重置相机或者您再次打开相机..

# java - bindService() 后未创建（或连接）服务

> ID：10581827
> 
> 赞同：11
> 
> 时间：2012-05-14T10:44:19.253
> 
> 标签：java, android, eclipse, android-service

我有一个广播用户当前位置的简单服务。我想使用绑定机制来控制服务生命周期，但服务只是没有启动。

我做错了什么？

```
public class GPSActivity extends ListActivity {
...
protected void onResume() {
        super.onResume();

        Log.i("Service", "Service bound");
        Intent intent = new Intent(this, LocationService.class);
        bindService(intent, service_connection , Context.BIND_AUTO_CREATE);
    }

protected void onPause() {
        if (dataUpdateReceiver!=null)
            unregisterReceiver(dataUpdateReceiver);
        unbindService(service_connection);
        super.onPause();
    }
class LocationServiceConnection implements ServiceConnection{
        public void onServiceConnected(ComponentName name, IBinder service) {
            Log.i("Service", "Service Connected");
        }
                public void onServiceDisconnected(ComponentName name) {

        }
    }
} 
```

`LocalBinder.java`

```
public class LocalBinder<S> extends Binder {
    private String TAG = "LocalBinder";
    private  WeakReference<S> mService;

    public LocalBinder(S service){
        mService = new WeakReference<S>(service);
    }

    public S getService() {
        return mService.get();
    }
} 
```

`LocationService.java`

```
public class LocationService extends Service {
    public void onCreate() {
        initLocationListener();
        Log.i("Location Service","onCreate()");
    }

    @Override
    public int onStartCommand(Intent intent, int flags, int startId) {
        Log.i("Location Service", "Received start id " + startId + ": " + intent);
        return START_NOT_STICKY;
    }

    private final IBinder mBinder = new LocalBinder<LocationService>(this);
    @Override
    public IBinder onBind(Intent intent) {
        return mBinder;
    }
} 
```

`AndroidManifest.xml`

```
<application
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name" >
    ...

    <service android:name=".LocationService">
    </service>
</application> 
```

**编辑：**感谢 NickT 的回答。

清单条目没有意图过滤器或正确的名称

```
<service
   android:enabled="true"
   android:name="com.android.gps.services.LocationService">
   <intent-filter>
          <action android:name="com.android.gps.services.LocationService" />
   </intent-filter>
</service> 
```

我用于绑定的意图就像您在开始活动时需要使用的意图。正确的是：

```
Intent intent = new Intent("com.android.gps.services.LocationService"); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-14T14:14:29.377

onStartCommand 只有在显式启动服务时才会执行，看起来你只是想绑定到它，这很好。我没有看到您已正确设置服务连接。我正在发布我的存根程序，它展示了如何绑定到服务并通过活页夹调用服务中的方法。您可能希望运行它并查看各种日志消息的顺序。您显然需要添加 BroadcastReceiver 和 onLocationChaged 代码以使其对您有用。

活动

```
package com.servtest.test;

import com.servtest.test.LocationService.LocalBinder;
import android.app.Activity;
import android.content.ComponentName;
import android.content.Context;
import android.content.Intent;
import android.content.ServiceConnection;
import android.os.Bundle;
import android.os.IBinder;
import android.util.Log;

public class ServiceTestActivity extends Activity {

    boolean mServiceConnected = false;
    boolean mBound = false;
    private LocationService mLocnServ;

    ServiceConnection mServconn = new ServiceConnection() {
        @Override
        public void onServiceConnected(ComponentName name, IBinder service) {
            Log.d("SVTEST", "Activity service connected");
            LocalBinder binder = (LocalBinder) service;
            mLocnServ = binder.getService();
            // Can't call this methodInTheService UNTIL IT'S BOUND!
            mLocnServ.methodInTheService();
            mBound = true;
        }

        @Override
        public void onServiceDisconnected(ComponentName name) {
            Log.d("SVTEST", "Activity service disconnected");
            mBound = false;
        }
    };
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
    }
    @Override
    public void onStart() {
        super.onStart();
        Log.d("SVTEST", "Activity onStart");
        mServiceConnected = bindService(new Intent(
                "com.servtest.test.LOCATIONSERVICE"), mServconn,
                Context.BIND_AUTO_CREATE);
    }
    @Override
    protected void onResume() {
        super.onResume();
        Log.d("SVTEST", "Activity onResume");
    }
    @Override
    public void onPause() {
        Log.d("SVTEST", "Activity onPause");
        super.onPause();
    }
    @Override
    public void onStop() {
        Log.d("SVTEST", "Activity onStop");
        if (mBound) {
            unbindService(mServconn);
            mBound = false;
        }
        super.onStop();
    }

} 
```

服务

```
package com.servtest.test;

import android.app.Service;
import android.content.Intent;
import android.location.Location;
import android.location.LocationListener;
import android.os.Binder;
import android.os.Bundle;
import android.os.IBinder;
import android.util.Log;

public class LocationService extends Service implements LocationListener {

    private final IBinder mBinder = new LocalBinder();

    @Override
    public void onLocationChanged(Location arg0) {}
    @Override
    public void onProviderDisabled(String arg0) {}
    @Override
    public void onProviderEnabled(String arg0) {}
    @Override
    public void onStatusChanged(String arg0, int arg1, Bundle arg2) {}

    @Override
    public IBinder onBind(Intent intent) {
        Log.d("SVTEST", "Loc service ONBIND");
        return mBinder;
    }
    @Override
    public boolean onUnbind(Intent intent) {
        Log.d("SVTEST", "Loc service ONUNBIND");
        return super.onUnbind(intent);
    }
    @Override
    public int onStartCommand(Intent intent, int flags, int startId) {
        // Won't run unless it's EXPLICITLY STARTED
        Log.d("SVTEST", "Loc service ONSTARTCOMMAND");
        return super.onStartCommand(intent, flags, startId);
    }
    @Override
    public void onDestroy() {
        super.onDestroy();
        Log.d("SVTEST", "Loc service ONDESTROY");
    }

    public class LocalBinder extends Binder {
        LocationService getService() {
            // Return this instance of LocalService so clients can call public methods
            return LocationService.this;
        }
    }

    public void methodInTheService() {
        // A method you can call in the service
        Log.d("SVTEST", "Loc service EXECUTING THE METHOD");
    }
} 
```

清单

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.servtest.test"
    android:versionCode="1"
    android:versionName="1.0" >
    <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name" >
        <activity
            android:name=".ServiceTestActivity"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />
                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
        <service
            android:enabled="true"
            android:name="LocationService">
            <intent-filter>
                <action android:name="com.servtest.test.LOCATIONSERVICE" />
            </intent-filter>
        </service>
    </application>
</manifest> 
```

希望这可以帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-11T07:50:02.410

当您打电话时，`bindService`您可能会收到此错误：

`ActivityManager java.lang.ClassCastException: android.os.BinderProxy cannot be cast to com.android.server.am.ActivityRecord$Token`

检查 logcat 的输出。

这是安卓的一个bug。

要解决它，请使用*`getApplicationContext().bindService(...)`*

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-14T10:58:04.783

我的`Activity`工具`ServiceConnection`和绑定是这样的：

```
bindService( new Intent( this, Service.class ), this, Context.BIND_AUTO_CREATE ); 
```

然后在我的`onServiceConnected()`和处理回调`onServiceDisconnected()``Activity`

# opencv - 为什么我的 OpenCV ROI 没有改变？

> ID：10581834
> 
> 赞同：0
> 
> 时间：2012-05-14T10:44:45.760
> 
> 标签：opencv, roi

我尝试在图像上循环创建多个 ROI（它们的数量可以更改），但系统似乎只能选择一个。我需要它，因为我将尝试制作一个 LBP 人脸检测器。

这是我的循环和显示（这是我第一次在这里发布东西，所以我希望我没有犯任何错误）：

```
 for (i=0;i<regionPerLine*regionPerLine;i++) {
        if(i%4==0 && i!=0) {
            indexLines=0;
            indexColumns=indexColumns+height/regionPerLine;
        }
        if (i%3==0)
            color=cvScalar(c,0,0,0);
        else if (i%2==0)
            color=cvScalar(0,c,0,0);
        else 
            color=cvScalar(0,0,c,0);
        roi.x=indexLines;
        roi.y=indexColumns;
        printf("\n\n%d\t%d", roi.x, roi.y);     
        cvSetImageROI(img_copy, roi);
        cvRectangle(img_copy, cvPoint(roi.x,roi.y), cvPoint(roi.x+roi.width, roi.y+roi.height), color, CV_FILLED);
        cvResetImageROI(img_copy);
        indexLines=indexLines+width/regionPerLine;
    }
    cvShowImage("img", img);
    cvShowImage("img_copy", img_copy);

    cvWaitKey(0);

    cvDestroyWindow("img");
    cvDestroyWindow("img_copy");
    cvReleaseImage(&img);
    cvReleaseImage(&img_copy);

    return 0;
} 
```

我更改颜色以查看我的 ROI 的变化方式，但是当我尝试显示它们（并获得几个颜色矩形）时，我在图像的左上角只获得一个蓝色，这意味着我认为第一个被选择但是不是其他人。但是，当我在 printf 函数中显示我的索引时，所有需要的索引都会按照我的意愿增加。

如果有人知道会发生什么，请告诉我。

谢谢

# android - 谷歌地图付费或免费

> ID：10581837
> 
> 赞同：2
> 
> 时间：2012-05-14T10:45:04.937
> 
> 标签：android, google-maps, google-play

我正在开发一个将在 Android 市场上付费的 Android 应用程序。我的应用程序正在使用谷歌地图。

为了在 Android 付费应用程序中使用谷歌地图，谷歌地图仍然是免费的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T10:45:53.423

是的。谷歌地图可在任何类型的应用程序中免费使用。

# git - SourceTree 中的 git-blame 在哪里

> ID：10581843
> 
> 赞同：73
> 
> 时间：2012-05-14T10:45:31.283
> 
> 标签：git, atlassian-sourcetree, git-gui, blame, git-blame

我想看看谁贡献了文件的哪一行/更改。git-blame 正是这样做的。那么 SourceTree 有 git-blame 视图吗？

* * *

## 回答 #1

> 赞同：85
> 
> 时间：2012-05-14T15:26:48.700

选择一个文件，无论是在“工作副本”显示中还是在“提交”显示中，然后执行以下三件事之一：

1.  选项-命令-B
2.  菜单栏 :: 操作 :: 责备选择...
3.  上下文菜单 :: Blame Selected...

如果**要怪罪的文件不在修改文件列表中**，则需要将视图更改为文件状态视图（视图 --> 文件状态视图），然后将子菜单设置为“显示全部”

![在 OSX 上显示全部](../Images/56e49f82ef565abd657d8b71f5f991a8.png)

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2018-11-11T17:58:36.867

启动 sourcetree 3.0

右键单击文件>`Annotate Selected`

[![在此处输入图像描述](../Images/39e11f4207b3a4441da9316e37fc7173.png)](https://i.stack.imgur.com/fQDb3.png)

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2012-05-14T10:48:51.713

1.  切换到历史视图并选择一个包含您要指责的文件的提交。
2.  右键单击文件名并选择**Blame Selected**。

或者，您可以右键单击工作树中的文件或已暂存的文件并执行相同的操作。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2017-07-18T15:35:05.587

右键单击文件-> 选择责备。你可以找到每一行的作者。技巧：做一个小的改变，比如在你想在源树中轻松找到文件（文件状态）的文件中添加一个空格。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2021-09-01T12:30:01.593

德文版：

1.  修改文件，使其出现在暂存区域中。
2.  右键点击
3.  单击“Log für Auswahl...”（用于选择的日志...）

# mysql - 如何将 10 GB 数据转储加载到表中

> ID：10581844
> 
> 赞同：0
> 
> 时间：2012-05-14T10:45:31.283
> 
> 标签：mysql

当我运行

```
LOAD DATA LOCAL INFILE 'C:\\Project\\FMCG\\fmcg_event_table_cd.txt'
INTO TABLE fmcg_event_table_cd
FIELDS TERMINATED BY ',' ENCLOSED BY '"'
LINES TERMINATED BY '\r\n' IGNORE 1 LINES; 
```

文件 fmcg_event_table_cd.txt 文件包含 10 GB 的数据，但我们需要获取该文件的一小部分以进行加载。我可以知道一次加载大数据的查询吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T10:47:56.983

尝试使用`mysqlimport`

[http://dev.mysql.com/doc/refman/5.5/en/mysqlimport.html](http://dev.mysql.com/doc/refman/5.5/en/mysqlimport.html)

# plantuml - PlantUML 不同的布局

> ID：10581848
> 
> 赞同：35
> 
> 时间：2012-05-14T10:45:47.270
> 
> 标签：plantuml

我正在使用 PlantUML API 生成活动图。

我之前使用过 GraphViz 并使用 rank 参数来定义布局

```
rank=LR [for left to right] 
```

我试图在 PlantUML 中找到类似的东西，我可以将其方向更改为“从左到右”而不是现有布局，即“从上到下”。

* * *

## 回答 #1

> 赞同：55
> 
> 时间：2012-05-14T17:30:46.840

您可以对状态、类、组件或用例图使用以下命令：

```
left to right direction 
```

（见[https://plantuml.com/use-case-diagram#d551e48d272b2b07](https://plantuml.com/use-case-diagram#d551e48d272b2b07)）

**编辑：** 2012 年的这条评论最初声称该功能计划*在下一个版本中发布*。它现在永远可用。

# c# - 通过 XML 导入数据的通用设计

> ID：10581851
> 
> 赞同：1
> 
> 时间：2012-05-14T10:45:49.867
> 
> 标签：c#, .net, xml

我正在设计一个从 XML 导入对象数据的通用解决方案。在我的应用程序中，类结构如下：

```
class MyObject
{
    public string ID { get; private set; }

    // This may contain large set of values.
    public Dictionary<string, OtherClass> ObjectData { get; set; };

    public MyObject()
    {}
}

class OtherClass
{
    public string SubProperty1 { get; set; }
    public string SubProperty2 { get; set; }
    public string SubProperty3 { get; set; }
} 
```

可能有许多其他类似的类，`MyObject`它们可能具有需要导入的不同类型的属性。

我想到的模式设计会生成以下 XML 结构：

```
<BlobData DataType="MyObjectType">
  <DataValues UniqueID="MyObjectID" Property="SerializedPropertyName">
    <DataValue PointID="Point1" SubProperty="SubProperty1">Value1.1</DataValue>
    <DataValue PointID="Point2" SubProperty="SubProperty1">Value1.2</DataValue>
    <DataValue PointID="Point3" SubProperty="SubProperty1">Value1.3</DataValue>
    <DataValue PointID="Point1" SubProperty="SubProperty2">Value2.1</DataValue>
    <DataValue PointID="Point2" SubProperty="SubProperty2">Value2.2</DataValue>
    <DataValue PointID="Point3" SubProperty="SubProperty2">Value2.3</DataValue>
  </DataValues>
</BlobData> 
```

我仍然很困惑这种结构是否足以应对未来可能出现的任何工作。请建议您是否有设计类似东西的经验。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T10:50:13.357

如果您使用不同的数据（Xml 格式），我在工作中做了以下工作：

*   确保每个 xml 数据都由 XSD（架构）支持
*   然后，您可以使用 XSD.exe 将架构转换为 CS
*   在 C# 中，您可以直接使用该数据模型（通过使用将其从 Xml 反序列化为 C# `XmlSerializer`）
*   这样，您主要专注于 DataModel（C# 等效项），而不是解析 Xml 元素和属性

它不适用于所有场景，但可能适用于大多数模式向后兼容的情况

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T10:51:21.493

如果所有类的结构都相似（例如 ID + 一些子属性），我会使用列表/集合/其他集合而不是字典。该集合将包含具有三个值的通用子属性类型/类：Id (PointID?)、子属性的名称和值。

如果要映射的键是唯一的，则使用字典（我不清楚您的示例中的字符串键是什么）

# javascript - PrimeFaces CommandButton 在第一次单击时不调用托管 bean 方法

> ID：10581852
> 
> 赞同：1
> 
> 时间：2012-05-14T10:45:50.850
> 
> 标签：javascript, ajax, jsf-2, primefaces

我对 PrimeFaces 组件发送的**第一个ajax 请求有疑问。**它发生在很多情况下，所以我尝试做一个非常小的例子。我的 xhtml 文件如下：

```
<html
    xmlns="http://www.w3c.org/1999/xhtml"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:p="http://primefaces.org/ui">

<h:head>
    <title>Remote Command Tutorial</title>
</h:head>
<h:body id="body">
    <h:outputScript library="primefaces" name="jquery/jquery.js" target="head" />

    <h:form id="form">
        <h:inputText  converter="javax.faces.Integer" id="input" value="#{remoteCommandBean.value}"></h:inputText>

        <script type="text/javascript">
            function increment() {
                var value = parseInt($("#form\\:input").val())+1 ;

                $("#form\\:input").val(value) ;
            }
        </script>

        <h:commandButton type="submit"  onclick="increment()" update="input">
            <f:ajax></f:ajax>
        </h:commandButton>

<p:commandButton type="submit"  onclick="increment()" update="input"/>
    </h:form>
</h:body>
</html> 
```

和托管bean：

```
package test;

import java.io.Serializable;

import javax.faces.bean.ManagedBean;
import javax.faces.bean.ViewScoped;

@ManagedBean
@ViewScoped
public class RemoteCommandBean implements Serializable {
    private static final long serialVersionUID = 1L;
    private int value = 0;

    public int getValue() {
        return value;
    }

    public void setValue(int value) {
        this.value = value;
    }
} 
```

因此，小应用程序包含一个绑定到托管 bean 属性的输入字段，并且有两个命令按钮：第一个是标准 JSF 按钮，第二个是 PrimeFaces 命令按钮。他们都调用了一个javascript方法，该方法增加了输入字段中的数字，并且（希望）发送了一个ajax请求以刷新bean属性，然后响应再次刷新该字段，并使用相同的数字。我的问题是，**当我第一次按下 PrimeFaces 按钮时，它没有正确刷新数字，实际上它的值仍然是初始的 0。**第二次单击后，一切正常，标准按钮不会出现此问题。我检查了（在 Chrome 中）第一个请求和以下请求之间的区别，我发现了以下内容：

第一个请求：

```
form:input:1
form_SUBMIT:1
javax.faces.partial.ajax:true
javax.faces.source:form:j_idt9
javax.faces.partial.execute:@all
javax.faces.partial.render:form:input
form:j_idt9:form:j_idt9 
```

第二：

```
form:input:1
form_SUBMIT:1
javax.faces.ViewState:gwzLgZ3SR5M3/fDIK31UOyD+c0iKO3sECDTXWK5efNUCW1nhjIFIHJ1hBXgsLsWhmD8RcmvcpQ6WFJfK4J0UlF4MwrppME+2GOHKXtHiN2cNv/CDDDilTYYsiCXMnv4Soqxkp/+E1MJRUYtvI1YOrKGwy1OdWcxOxPDAQRuuxn8ysu9rPcYIU3mIcQlepNYoBjkJNlcD3dSnIIDWIMXptL6t3un/80S9ojg6aGs46uBRroO8DJyUcTf98MgrfVQ7IP5zSIo7ewRoJpcUPoqlMoVpVy8LNhemxX/9DUXEWzcRzA/gO1iVJsJwyatdxFvFrfCZ3BPn2vlmO7nHLlvqqkOGHOHkHkIu74snZRM8Ax4VJ+Q51YMXnK100Qed9/SuCTydHRdxhCGE95tTNd8IrvkVfglAdxsKUR1ezPzSBqMOJlSnmB4r/jjXy4yQfp6OCgqoNuqifpWt8JncE+fa+Y2hlGz5mZUUcDYWc1XGqkk6keHdKfMedMpAS2syG4krrym2Wv90Cd1e6qr9TqPNM4H9gi3+rcltdP3wMoDjDpPrnLPicLwoOygfy3LTOFZZIJDwEqhhUNlDdzThRmbem2TtElvU6lLmVnlQE2jm60QE8YPot0DFgE5bsrbw/13jF325l3/PTVPDOi6OdAfXotR741TNEC3Hcf9uwQSI6n9ywdUwA3IXeGHQLJioPIuTVhy7gaxkdpJFlp7DfSIHB8E14b1B+jMcKuFRNxJgGuxazx/Wm9TEZwGqslpMW7UWEYGpeYc4c0yqstEvFW5B7keuEOk/pdMrOfKzf7YJzaq4Fyf1+DFIy83mhSw32GSK+RV+CUB3Gwqn1P76CMOaxlAmDiZUro2pmckxiUbFv9J6rMHcmyacyn8hxYYMYkWejiq27Zy9PEwr/eACdw2REJEOIhXJkR2YNvt0KHoZdeMZh/tlhl04F5AORdaERjmUxX/9DUXEWzcoOHYVHLll5GCAxqygioDw+S1vMuP1H8Lbl4HtAQKTEzrzH/O+aPfQ+HNG9jNabMSCP6ITBfjKWGOyMa5NvEp55wx/sHcG8WABRT80UQtBMGUdGrgxAvyjzeaFLDfYZIr5FX4JQHcbCkPF+CIqMf+qVv0TTxFeraUBgFyE3x4tHqI4OmhrOOrgCeeifDBY5qKnIL4j0Ci1MhHH0rAyiS7YYVJ7fW7sBkxV5XUbRnrvZWBm/O+AjV7ibpo/rB0WwdmmBlgTEfpp7DYmm4wcPjOMW5bwd7M7xezqctMYCvk3JN6Siq5sWdWGn4VreRQOOO9pFBH5GiZU0FCUz3RrAPGBKHxGbju7BWpXvUzTQmWJrCEgxxPTLuJO2SrGBckeIFT/1x5I1N6v7XkWfwKJ9i8FUFkBb/BhySLJjYCQz1u+4+4TlcP7bGyZDGcp5kOvAHhnHLg4E2Rwy3mIcQlepNYovKLhSWG9rn29iwkexIKkhfSt47eCGNO9zeaFLDfYZIr5FX4JQHcbCsf2FvzTz1EFMMfWLfJjH/IlaTOYSBL8prfS4Q9o47jZaraj8293AtRTDwwwiBUXgRuA09Z60Sp8mSNBYLlpyppyS6mmDysSHwQSGPG00wnpUw8MMIgVF4Fqx/6UfJysSTvj+gqONixx/ESUOTdonI29FHJ3Xja08lMPDDCIFReB1It73l0DoM4PzY6HrwMKopM+5arsJxXADoeh1VHeTrZZaBltb7M5hm2uQG+hBtCdaD1gDbZo2nZRzrUQJA8KEQuCNwLEqGfiNj5PVLPOe/g/fH8OMd1Zruk0Y45tX8QnqOtRDGU49JMUCTa9DkAcEOZEqwkzxIx/phHj4yUTUL4Yn4pRO1yWghcAhtlbz84dVsNiILV/G8LYcWdAVwfxBSnxRlxArWRam2OWy6Uuyf/TaK40ktnlBYqc/Wo1W6vCSITL5D3ZdErEEKIcz32BsDMWgdMbm1gOW/Vjw/oGVVGMSPj2I+2CeknJb1dPG6y/ba5Ab6EG0J3JLG3yVsAhp7+YveHUvJl31nvIlMZjRYK30uEPaOO42ZSpzbjY47IE6TTfr7cuv1ASRw+ttuqssChLJ2W9gXsGUDm0LXKzr0M8dhCRD2uRYHhYsKivfxRHPRKx72ObNiqJYJGepMokgNdDSd1PRRReX/DmCg==
javax.faces.partial.ajax:true
javax.faces.source:form:j_idt9
javax.faces.partial.execute:@all
javax.faces.partial.render:form:input
form:j_idt9:form:j_idt9 
```

我们使用 Glassfish 3.1.2、PrimeFaces 3.2 和 Apache-MyFaces 2.0.2。

有人可以帮我吗？

烟雾三合会

# extjs4 - ExtJS，无法将我的文本区域滚动到底部

> ID：10581858
> 
> 赞同：1
> 
> 时间：2012-05-14T10:46:15.990
> 
> 标签：extjs4, textarea, scrollbar

我正在使用 extjs 4，并且我有一个 textarea，其中插入了一些文本，滚动条默认设置在顶部，因此当文本超过 textarea 高度时，它会溢出。我希望我的 textarea 滚动条默认设置在其底部，因此当我插入新文本时它会立即显示，而无需手动向下滚动滚动条。

textarea 代码是这样的：

```
items: [{
    xtype: 'textareafield',
    id: 'textarea1',
    autoScroll: true,
    resizable: true,
    name: 'textarea1',
    autorender: true,
    fieldLabel: 'textarea1',
    value: '...'
    },{ 
```

我插入新文本

```
area.setValue(Ext.getCmp('textarea1').getValue()+'\n'+message); 
```

但我找不到任何方法来自动向下滚动它。我已经搜索了文档和谷歌，现在几乎每个人都使用 gwt，但我不能。有没有办法仅使用 extjs 方法来实现相同的目标？在 gwt 中，他们使用类似的方法，`.setScrollTop()`但在 extjs 中没有类似的方法，我找不到它..

非常感谢您提供的任何帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T11:06:20.853

您可以保存区域文本的旧字符串长度，然后用于`selectText()`使光标转到正确的位置。

```
area.selectText(oldStringLength, oldStringLength); 
```

`selectText(start, end)`实际上并非针对此目的，但仍然可以使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-02-08T11:27:19.613

```
var d = area.getEl().down('textarea').dom; 
d.scrollTop = d.scrollHeight - d.offsetHeight; 
```

# sql - 执行 GROUP BY 并获取聚合函数中未使用的附加列？

> ID：10581862
> 
> 赞同：0
> 
> 时间：2012-05-14T10:46:29.317
> 
> 标签：sql, sql-server

在下面的代码中，我有两个表。我加入这些，对“Spot”执行 GROUP BY，然后对通过连接计算的值执行 MIN()。

问题是我还希望为我的结果行获取 Column2 的值。目前我无法立即选择它，因为 Column2 不是 GROUP BY 的一部分，也不是聚合函数的一部分。

此外，我无法对数据执行第三次 JOIN 以获取此列，因为我最终只会绕圈子，因为我的连接条件将在 DerivedValue 上，为了得到这个，我需要生成另一个 GROUP BY。 ....我会绕圈子。

如果它有助于理解- temp4 只是一个包含 1 和 0 的表，执行掩码（因此 MIN() 是在这两个相乘上完成的）.....

编辑：请注意，我加入同一张表的原因是因为我有效地从矩阵中减去了两个值，这是在一行中得到正确值的最简单方法。

```
SELECT temp3.Column1, min(temp3.DerivedValue * Probability) FROM
    (SELECT temp1.Spot AS Spot, temp1.Vol AS Vol, temp1.Value- temp2.Value AS DerivedValue FROM
        (SELECT Spot, Vol, Value FROM My_Table_1) temp1
    INNER JOIN
        (SELECT Spot, Vol, Value FROM My_Table_1) temp2
    ON temp1.Spot = temp2.Spot) temp3
JOIN
    (SELECT Spot, Vol, Probability FROM My_Table_2) temp4
ON temp3.Spot = temp4.Spot AND temp3.Vol = temp4.Vol
GROUP BY temp3.Spot 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T11:26:12.093

您不能选择 GROUP BY 子句或聚合中不存在的列。原因是无法将多行中的值压缩到一个数据单元格中。例如，如果您将 20 行组合为一个，如何决定在该行的结果中选择哪个值？您应该指示查询选择正确的值，或者对其进行分组，或者以某种方式聚合。

否则无法完成。也许考虑改写您的问题，以获得针对您的确切问题的一些解决方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T11:39:08.280

在 SQL Server 2005 中，您可以使用`row_number() over()`获取位于同一行的列数据作为最大值或最小值。

像这样的东西可能对你有用。根据您的计算值进行分区`temp3.spot`和排序。这给你一个`row_number`1 的最小计算值。您需要将整个查询放在派生表或 CTE 中，因为无法`row_number`在 where 子句中使用。

```
WITH C AS
(
  SELECT temp3.Spot,
         temp3.DerivedValue * temp4.Probability AS DerivedValue_Probability,
         ROW_NUMBER() OVER(PARTITION BY temp3.spot ORDER BY temp3.DerivedValue * temp4.Probability) as RN
  FROM   (SELECT temp1.Spot                AS Spot,
                 temp1.Vol                 AS Vol,
                 temp1.Value - temp2.Value AS DerivedValue
          FROM   (SELECT Spot,
                         Vol,
                         Value
                  FROM   My_Table_1) temp1
                 INNER JOIN (SELECT Spot,
                                    Vol,
                                    Value
                             FROM   My_Table_1) temp2
                   ON temp1.Spot = temp2.Spot) temp3
         JOIN (SELECT Spot,
                      Vol,
                      Probability
               FROM   My_Table_2) temp4
           ON temp3.Spot = temp4.Spot
              AND temp3.Vol = temp4.Vol
)
SELECT Spot,
       DerivedValue_Probability
FROM C
WHERE RN = 1; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-14T15:15:39.080

这看起来像一个复杂的查询来给出一个简单的结果。您的初始连接会生成每个 (Spot,Vol) 对的副本，其中包含该对的两个 Value 值之间的每个差异。

(Spot,Vol) 对的可能概率仅为 0 或 1，因此您寻求的最小值是这些值差异中最小值的 0 或 1 倍。

(Spot,Vol) 对的最小值差异必然是该对的 min(Value) - max(Value)。

下面的简单查询应该给您与您发布的查询相同的结果。但是，您可能想要完全不同的东西，并且您发布的查询可能是错误的。

```
select
  V.Spot, V.Vol, min(P.Probability)*(min(V.Value)-max(V.Value)) as minDVtimesProb
from My_Table_1 as V
join My_Table_2 as P
on P.Spot = V.Spot
and P.Vol = V.Vol
group by V.Spot, V.Vol; 
```

# maven-2 - maven-plugin：maven 只下载 pom，而不是来自内部 repo 的 jar 文件

> ID：10581866
> 
> 赞同：2
> 
> 时间：2012-05-14T10:46:43.733
> 
> 标签：maven-2, maven-plugin

我对 maven 很陌生，我在公司**内部**（档案）存储库上编写和发布的插件遇到了一些麻烦。

正如我所见，插件的构建和发布似乎在 repo 的 url 上有效：

*   回购目录已创建
*   该目录包含：
    *   pom 、 pom.sh1 、 pom.md5 文件
    *   jar 、 jar.sh1 、 jar.md5 文件

在我的插件的 pom.xml 文件中，我引用了我们内部 repo 的 url：

```
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd">
  <modelVersion>4.0.0</modelVersion>
  <groupId>com.myorg</groupId>
  <artifactId>myorg-build-info-plugin</artifactId>
  <packaging>maven-plugin</packaging>
  <version>1.0.0</version>
  <name>myorg-build-info-plugin Maven Mojo</name>
  <url>labserver.myorg-domain.com:8380/archiva/repository/internal</url>
.... 
```

十 我在另一个 pom.xml 中引用了这个插件：

```
<plugin>
          <groupId>com.morg</groupId>
          <artifactId>myorg-build-info-plugin</artifactId>
          <version>1.0.0</version>
... 
```

我确实在同一个 pom.xml 中提供了内部仓库：

```
<repositories>
        <repository>
            <id>myorg-repo</id>
            <name>Repository for Myorg Artifacts</name>
            <url>http://labserver.myorg-domain.com:8380/archiva/repository/internal</url>
            <layout>default</layout>
        </repository> 
```

最后，如果我对该 pom 文件执行 maven clean 操作（执行**mvn clean -e**），我收到以下错误：

```
+ Error stacktraces are turned on.
[INFO] Scanning for projects...
[INFO] ------------------------------------------------------------------------
[INFO] Building com.myorg.projectname
[INFO]    task-segment: [clean]
[INFO] ------------------------------------------------------------------------
Downloading: http://repo1.maven.org/maven2/com/myorg/myorg-build-info-plugin/1.0.0/myorg-build-info-plugin-1.0.0.pom
[INFO] Unable to find resource 'com.myorg:myorg-build-info-plugin:pom:1.0.0' in repository central (http://repo1.maven.org/maven2)
Downloading: http://labserver.myorg-domain.com:8380/archiva/repository/internal/com/myorg/myorg-build-info-plugin/1.0.0/myorg-build-info-plugin-1.0.0.pom
1K downloaded  (myorg-build-info-plugin-1.0.0.pom)
Downloading: http://repo1.maven.org/maven2/com/myorg/myorg-build-info-plugin/1.0.0/myorg-build-info-plugin-1.0.0.jar
[INFO] Unable to find resource 'com.myorg:myorg-build-info-plugin:maven-plugin:1.0.0' in repository central (http://repo1.maven.org/maven2)
[INFO] ------------------------------------------------------------------------
[ERROR] BUILD FAILURE
[INFO] ------------------------------------------------------------------------
[INFO] A required plugin was not found: Plugin could not be found - check that the goal name is correct: Unable to download the artifact from any repository

Try downloading the file manually from the project website.

Then, install it using the command: 
... 
```

现在从我所看到的：

*   pom 文件是从我们的内部仓库中正确获取的
*   jar 文件获取失败，因为它试图从 [http://repo1.maven.org/maven2获取它](http://repo1.maven.org/maven2)

我希望所有的回购都被扫描，尤其是文件中声明的内部回购。

显然，情况并非如此。

因此，如果有人对为什么会发生这种情况有任何线索，我将非常感谢您的帮助！

TIA,

PS：我使用 maven 2.2.1 和 JDK 1.6.029 的 debian

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-14T12:02:18.940

我建议的第一件事是使用像[Archiva](http://archiva.apache.org/)、[Artifctory](http://www.jfrog.com)或[Nexus](http://www.sonatype.org/nexus)这样的存储库管理器，此外我建议阅读以下文章： http: [//www.sonatype.com/people/2009/02/why-putting-repositories-in -your-poms-is-a-bad-idea/](http://www.sonatype.com/people/2009/02/why-putting-repositories-in-your-poms-is-a-bad-idea/)。除了前面你需要像这样定义一个 pluginRepository 区域：

```
 <pluginRepositories>
    <pluginRepository>
      <id>central</id>
      <name>Maven Plugin Repository</name>
      <url>http://repo1.maven.org/maven2</url>
      <layout>default</layout>
      <snapshots>
        <enabled>false</enabled>
      </snapshots>
      <releases>
        <updatePolicy>never</updatePolicy>
      </releases>
    </pluginRepository>
  </pluginRepositories> 
```

# wix - MSI 如何确定卸载时要删除的网站

> ID：10581867
> 
> 赞同：2
> 
> 时间：2012-05-14T10:46:54.663
> 
> 标签：wix, windows-installer, uninstallation, wix3.5

我最近遇到了以下情况：

1.  安装通过WiX创建的msi包，在IIS中部署文件并创建+配置网站（六）
2.  该网站是手动修改的。端口从 81 更改为 80。
3.  软件包已卸载。

卸载软件包时，删除的网站不是部署的网站。相反，我看到它删除了默认网站以及其他一些网站。

我想知道的是，包如何确定要删除哪个网站？它显然不是我最初认为的 IIS ID。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T23:19:24.120

我们通过注册表项做到了：

```
 <Property Id="INBOUNDGATEWAY_REGPATH" Value="SOFTWARE\MyCompany\MyApp\$(var.VERSION)\InboundGateway" />

    <Property Id="INSTALLEDWEBSITE">
        <RegistrySearch Id="INSTALLEDWEBSITE" Root="HKLM" Key="[INBOUNDGATEWAY_REGPATH]" Name="WebSite" Type="raw" />
    </Property>

    <iis:WebSite Id='MyWebSite' SiteId='*' Description='[WEBSITENAME]' Directory='FOLDER_VDIR'>
        <iis:WebAddress Id='WebSiteAddress' Port='[WEBPORT]'/>
    </iis:WebSite>

    <Directory Id="TARGETDIR" Name="SourceDir">
    ...
                        <Component Id="CPNT_INBOUNDGATEWAY_REGISTRY" Guid="etc..." DiskId="1">
                            <RegistryValue Id="INBOUNDGATEWAY_REGISTRY_WEBSITE" Type="string" Root="HKLM" Key="[INBOUNDGATEWAY_REGPATH]" Name="WebSite" Value="[WEBSITENAME]">
                                <Permission User="[LOCADMINSGROUP]" GenericAll="yes" />
                                <Permission User="[POOL_IDENTITY_USER]" Read="yes" GenericRead="yes" />
                            </RegistryValue>

    <CustomAction Id="SetToInstalledWebSite" Property="WEBSITENAME" Value="[INSTALLEDWEBSITE]" />

    <InstallExecuteSequence>
        <Custom Action="SetToInstalledWebSite" After="SetWEBSITENAME">Installed And INSTALLEDWEBSITE</Custom> 
```

# c# - 在 AppBarButton 上构建 TextBoxMenu

> ID：10581870
> 
> 赞同：0
> 
> 时间：2012-05-14T10:47:02.830
> 
> 标签：c#, xaml, windows-8, windows-runtime, winrt-xaml

如何创建包含 TextBox 的菜单，如下图所示？ ![win8开始菜单截图](../Images/c8a42681f34377ca78331ce48b274d64.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T12:44:36.037

如果您使用 HTML 和 Javascript 构建应用程序，则此项目称为弹出菜单。请参阅此[快速入门链接：添加 Flyout](http://msdn.microsoft.com/en-us/library/windows/apps/hh465354)。

如果您使用 C#/VB 构建应用程序，则没有可用的 Flyout 控件。建议的方法是使用 Popup 控件，请参阅 MSDN 论坛上的这个问题，其中一些来自 Microsoft 的人正在回答这个问题：[http ://social.msdn.microsoft.com/Forums/en-US/winappswithcsharp/thread/ 6793c93c-072d-4567-b490-812bc5e75c89/](http://social.msdn.microsoft.com/Forums/en-US/winappswithcsharp/thread/6793c93c-072d-4567-b490-812bc5e75c89/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T01:15:04.643

我发现示例[如何向应用栏添加菜单（使用 C#/VB/C++ 和 XAML 的 Windows 应用商店应用）](http://msdn.microsoft.com/en-us/library/windows/apps/xaml/jj150602.aspx)很有用。它使用 IsLightDismissEnabled = true 的 Popup 在 AppBar 上方创建一个菜单。

# jquery - 如何在我的 jQuery FB 之类的插件中添加上限？

> ID：10581872
> 
> 赞同：0
> 
> 时间：2012-05-14T10:47:07.197
> 
> 标签：jquery, jquery-plugins

我有一个 jQuery 插件，当有人滚动页面时，它会在页面的右下角出现带有 Facebook Like 按钮的框 - 这是代码：

```
<script type="text/javascript">

    var counter = 0;
    $(window).ready(function(){

$(window).click(function () { 
    $('#likebox').animate({right: 10, bottom: 10});
    $.cookie("value", counter , {path: "/", expires: 30});  
    counter++;
});

$('#likebox .close').click(function(){
    alert($.cookie("value"));
    $('#likebox').css('visibility', 'hidden');

}); 
```

});

当我在我的页面上滚动它时，它可以完美运行 - 出现该框，但我的问题是，每当我和我的用户转到另一个页面时，该框总是出现在我和我的用户面前。我怎样才能将其限制为 3每天（例如）一个唯一 IP 的次数？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T10:51:03.553

您可以为此添加服务器端检查。并且仅在验证满足时才显示部分代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T10:52:24.383

您可能必须使用一些服务器端代码来执行此操作，或者您可以使用 24 小时后过期的 Javascript cookie

[http://www.electrictoolbox.com/jquery-cookies/](http://www.electrictoolbox.com/jquery-cookies/)

```
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js" type="text/javascript"></script>
<script type="text/javascript">
    $(window).ready(function(){
        if($.cookie("example")<=3){
            $(window).scroll(function () { 
                $('#likebox').animate({right: 10, bottom: 10});
            });

            $('#likebox .close').click(function(){
                $('#likebox').css('visibility', 'hidden');
            });
        }else{
            if($.cookie("example")!="undefined"){
                var newVal = $.cookie("example")+1;
                $.cookie("example", newVal);
            }else{
                $.cookie("example", 1);
            }
        }
    });
</script> 
```

# c++ - posix_fadvise 不工作

> ID：10581874
> 
> 赞同：0
> 
> 时间：2012-05-14T10:47:08.217
> 
> 标签：c++, linux, ubuntu

我有以下用于打开所有文件的代码：

```
int ret= open(zFile, flags, mode);
posix_fadvise (ret, 0, 0, POSIX_FADV_RANDOM); 
```

并且 posix_fadvise 返回 0 表示成功。

但它不能正常工作。

操作系统：Ubuntu 12.04

Strace 显示程序完成的读取是 29088 字节。

我使用以下命令来计算从 strace 日志中读取的内容

```
cat fadvise3.log | grep read | awk '{SUM+=$NF} END {print SUM}' 
```

但 iotop 显示该程序已阅读`2.5 MB.`

1.  有没有办法让我知道它为什么读得这么多？
2.  为什么 iotop O/p 与 strace 不匹配？
3.  为什么 posix_fadvise (ret, 0, 0, POSIX_FADV_RANDOM); 不管用？
4.  如何禁用进程的预读？

有关阅读的更多详细信息：我正在使用 sqlite 库。并修改了他们的函数 posixOpen 来打开一个数据库。读取是由 sqlite 完成的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-14T11:18:47.977

posix_fadvise 将改变内核*内部*完成的预读量。它不会更改用户空间应用程序将传递给读取系统调用的参数。因此，除了在 strace 下运行时读取系统调用的参数会有所不同之外，您不应该这样做。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-14T11:18:30.597

磁盘读取是在磁盘块中完成的，这是硬件限制，`POSIX_FADV_RANDOM`无法更改。如果您阅读的内容少于一个区块，您仍然需要支付该区块的成本。

即便如此，`posix_fadvise`顾名思义，它只是对内核的一个建议。一个提示。不是严格的规定。

# git - 删除 git 分支失去审计

> ID：10581881
> 
> 赞同：2
> 
> 时间：2012-05-14T10:47:57.583
> 
> 标签：git, branch, auditing

如果在 git 中删除了一个分支，是否仍然可以确定是否在该删除的分支上进行了特定的提交？

从我目前发现的情况来看 - git 分支只是指针，因此删除它们会丢失审计历史的特定部分。

希望我能被证明是错误的。

谢谢，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-14T12:02:13.277

> git 分支只是指针

是的，这正是为什么删除它们只会删除指针的原因。

如果您已将分支合并到主线，则不再需要该指针；但是您将始终知道单独对该分支所做的所有提交，除非您通过请求快进合并明确选择不知道特定更改。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-14T12:47:26.397

一旦您合并回另一个分支，您提交的确切分支的详细信息就会丢失。[这在这篇文章](http://jhw.dreamwidth.org/1868.html)和[这篇](http://jhw.dreamwidth.org/2049.html)文章中有详细说明。

您不应该删除运行时间长且希望跟踪的分支。删除分支的行为是一种声明，表示您不关心该路径，而是从那时起，只关心代码。

# mysql - 在mysql中使用循环填充表

> ID：10581884
> 
> 赞同：0
> 
> 时间：2012-05-14T10:48:12.123
> 
> 标签：mysql, loops

我试图将数据从一个表移动到另一个表，因为项目的需求已经改变。我认为 LOOP 可以工作，但我不断收到错误（它让我很恼火非描述性的 mysql 错误消息是如何的）。

这是我的代码：

```
SET @resid := 0;
SET @total := (SELECT COUNT(*) FROM reservations) + 1;
BEGIN
    label1: LOOP
    IF @resid < @total THEN
        SET @resid = @resid + 1
        INSERT INTO reservationbody(reservationid, time_in, time_out, ToLocation, FromLocation, startkm, endkm)
        VALUES(
            (SELECT
                reservationid,
                time_in,
                time_out,
                ToLocation,
                FromLocation,
                startkm,
                endkm
            FROM reservations WHERE reservationid = @resid)
        );
        INSERT INTO reservationbody(reservationid, time_in, time_out, ToLocation, FromLocation, startkm, endkm)
        VALUES(
            (SELECT
                reservationid,
                time_in,
                time_out,
                FromLocation,
                'Home',
                startkm,
                endkm
            FROM reservations WHERE reservationid = @resid)
        );
    END IF;
    LEAVE lable1;
    END LOOP
END; 
```

这应该为reservations 表中的每一行在reservationbody 表中创建2 行。我认为问题出在循环上，但我已经根据[http://dev.mysql.com/doc/refman/5.0/en/loop-statement.html上的 mysql 手动链接构建了这个查询](http://dev.mysql.com/doc/refman/5.0/en/loop-statement.html)

这是错误

```
0 ROW(s) affected

Execution TIME : 0.035 sec
Transfer TIME  : 0.002 sec
Total TIME     : 0.038 sec
---------------------------------------------------

0 ROW(s) affected

Execution TIME : 0.037 sec
Transfer TIME  : 0.001 sec
Total TIME     : 0.039 sec
---------------------------------------------------

QUERY:  BEGIN label1: LOOP IF @resid < @total THEN SET @resid = @resid + 1 INSERT INTO reservationbody(reservationid, time_in, time_out...

Error CODE: 1064
You have an error IN your SQL syntax; CHECK the manual that corresponds TO your MySQL SERVER VERSION FOR the RIGHT syntax TO USE near 'label1: Loop
        if @resid < @total then
            set @resid = @resid + 1
            INSERT INTO' AT line 2

Execution TIME : 0 sec
Transfer TIME  : 0 sec
Total TIME     : 0.039 sec
---------------------------------------------------

QUERY:  INSERT INTO reservationbody(reservationid, time_in, time_out, ToLocation, FromLocation, startkm, endkm) VALUES( (SELECT reserva...

Error CODE: 1136
COLUMN COUNT doesn't match value count at row 1

Execution Time : 0 sec
Transfer Time  : 0 sec
Total Time     : 0.040 sec
---------------------------------------------------

Query:  end if

Error Code: 1064
You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'END IF' at line 1

Execution Time : 0 sec
Transfer Time  : 0 sec
Total Time     : 0.039 sec
---------------------------------------------------

Query:  leave lable1

Error Code: 1064
You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'LEAVE lable1' at line 1

Execution Time : 0 sec
Transfer Time  : 0 sec
Total Time     : 0.038 sec
---------------------------------------------------

Query:  end loop end

Error Code: 1064
You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'END LOOP
    END' at line 1

Execution Time : 0 sec
Transfer Time  : 0 sec
Total Time     : 0.035 sec
--------------------------------------------------- 
```

谁能告诉我怎么了？

在此先感谢您的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T11:00:50.327

您可以简单地执行此操作且无需循环，只需执行两次 INSERT...SELECT 语句 -

```
INSERT INTO reservationbody(reservationid, time_in, time_out, ToLocation, FromLocation, startkm, endkm)
  SELECT reservationid, time_in, time_out, ToLocation, FromLocation, startkm, endkm FROM reservations;

INSERT INTO reservationbody(reservationid, time_in, time_out, ToLocation, FromLocation, startkm, endkm)
  SELECT reservationid, time_in, time_out, FromLocation, 'Home', startkm, endkm FROM reservations; 
```

# c# - 如何将商店标签放入列表 C# asp.net 应用程序？

> ID：10581893
> 
> 赞同：0
> 
> 时间：2012-05-14T10:49:07.663
> 
> 标签：c#, asp.net, list, tags, hyperlink

我想存储**标签列表，**以便以后可以在标签云中使用它。

该列表可以是硬编码的，并且不需要在应用程序运行时填充，当我想添加更多标签时，可以编辑该列表。

**标签是链接正确的吗？**我如何将链接保存为单词？

有人可以告诉我如何做到这一点。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T10:51:27.287

你可以使用字典。

```
Dictionary<string, string> a = new Dictionary<string, string>();
a.Add("tag", "url"); 
```

这不是你想要的吗？

# mysql - IIS 7.5 + Mysql ODBC 3.51 减慢网站速度

> ID：10581895
> 
> 赞同：0
> 
> 时间：2012-05-14T10:49:16.033
> 
> 标签：mysql, odbc, windows-server-2008, iis-7.5

我在 Windows XP PC 上使用 IIS 5.1，该页面用于在几分之一秒内加载。

现在我已经转移到带有 IIS 7.5 和相同数据库的 windows server 2008 R2。我检查了 MySQL，它的工作方式与以前的机器相同。我已经检查了 IIS 7.5 中不涉及 DB 的基本 .Net 页面，即使它工作正常。

我认为问题出在其他地方，这使应用程序变得很慢，请建议我怎样才能提高速度？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T09:38:04.007

问题出在我的 DSN 上，我没有在那里写 IP 地址，所以它正在检查可用的主机，然后使用 localhost。我已经在 DSN 中输入了机器的 IP 地址，一切正常。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T11:23:58.690

好吧，如果没有某种测量（分析器、日志等）很难说，但是您可以使用托管库连接到 mySQL，我相信这会比 ODBC 更快

[http://dev.mysql.com/downloads/dotnet.html](http://dev.mysql.com/downloads/dotnet.html)

**来自 Kitiraj 评论的未来谷歌员工更新：**

> 问题出在我的 DSN 上，我没有在那里写 IP 地址，所以它正在检查可用的主机，然后使用 localhost。我已在 DSN 中输入机器的 IP 地址，一切正常

# php - 如何测试 PHP mail() 是否成功投递邮件

> ID：10581896
> 
> 赞同：19
> 
> 时间：2012-05-14T10:49:19.707
> 
> 标签：php

如何测试是否`mail()`已成功发送邮件？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-05-14T10:52:22.523

好吧`mail()`，根据邮件是否被成功接受传递，简单地返回一个布尔值。从[php.net](http://php.net/manual/en/function.mail.php)网站：

> 如果邮件被成功接受传递，则返回 TRUE，否则返回 FALSE。
> 
> 重要的是要注意，仅仅因为邮件被接受交付，并不意味着邮件实际上会到达预定目的地。

So you can test to see if it's been "sent", however checking if it's been delivered is another story.

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-05-14T11:15:16.840

根据 Ben 的回复，您可以检查是否成功发送电子邮件，如下所示

```
$result = mail('abc@test.com', 'Test Subject', $message);
if(!$result) {   
     echo "Error";   
} else {
    echo "Success";
} 
```

为了获得更好的结果，您可以使用 PHPMailer。单击下面的链接以获取 PHPMailer 的详细文档。

[http://phpmailer.worxware.com/index.php?pg=tutorial](http://phpmailer.worxware.com/index.php?pg=tutorial)

```
if(!$mail->Send()) {
  echo 'Message was not sent.';
  echo 'Mailer error: ' . $mail->ErrorInfo;
} else {
  echo 'Message has been sent.';
} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2018-07-05T13:11:44.980

尝试这个：

```
if(@mail($emailRecipient, $subject, $message, $headers))
{
  echo "Mail Sent Successfully";
}else{
  echo "Mail Not Sent";
} 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-05-14T10:52:24.287

from the docs:

> "Returns TRUE if the mail was successfully accepted for delivery, FALSE otherwise.

It is important to note that just because the mail was accepted for delivery, it does NOT mean the mail will actually reach the intended destination. "

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-05-14T10:52:42.790

来自[http://php.net/mail](http://php.net/mail)

```
Returns TRUE if the mail was successfully accepted for delivery, FALSE otherwise. 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-14T11:01:23.480

单独的 mail() 函数只会通知您您设置的“电子邮件”是合法的，并将发送给我您的电子邮件服务器。

您必须单独检查电子邮件地址是否合法。可以在[这里找到一篇好文章](http://www.linuxjournal.com/article/9585)

如果这两种方法不适合您，您可以使用一些“垃圾邮件”方法，使用图像和服务器的日志文件。

* * *

## 回答 #7

> 赞同：-3
> 
> 时间：2019-01-30T07:34:37.707

if (isset($_POST["btn_emp"])) {

```
//$hid_emp = ($_POST['hid_emp']);
$employee_name = ($_POST['employee_name']);
$department_id = ($_POST['department_id']);
$serial_number = ($_POST['serial_number']);
$employee_address = ($_POST['employee_address']);
$employee_contact = ($_POST['employee_contact']);
$employee_email = ($_POST['employee_email']);

$insert = "INSERT INTO tbl_employee(department_id,serial_number,employee_name,employee_address,employee_contact,employee_email)VALUES('$department_id', '$serial_number', '$employee_name','$employee_address' ,'$employee_contact', '$employee_email')";
//echo $insert;
//die();
if ($conn->query($insert) === TRUE) {
    //CODE FOR SEND MAIL
    $Mail_Admin_Message = '';
            $Mail_Admin_Message .= '
                <table width="700px" border="0" cellpadding="0" cellspacing="0">

                    <tr height="15px"><td colspan="3"></td></tr>
                    <tr>
                        <td colspan="3" style="font-family:Verdana, Arial, Helvetica, sans-serif; font-size:12px;">
                            Date</b> :<b> '. $serial_number .'</b>
                        </td>
                    </tr>
                    <tr height="15px"><td colspan="3"></td></tr>
                    <tr>
                        <td colspan="3" style="font-family:Verdana, Arial, Helvetica, sans-serif; font-size:12px;">
                            Hi</b> <b> '. $employee_name .'</b>
                        </td>
                    </tr>
                    <tr height="15px"><td colspan="3"></td></tr>
                    <tr>
                        <td colspan="3" style="font-family:Verdana, Arial, Helvetica, sans-serif; font-size:12px;">
                          Your Gift Voucher Code is</b> :<b> '. $department_id .'</b>
                        </td>
                    </tr>
                    <tr height="15px"><td colspan="3"></td></tr>
                    <tr>
                        <td colspan="3" style="font-family:Verdana, Arial, Helvetica, sans-serif; font-size:12px;">
                            Gift Amount</b> :<b> '. $employee_address .'</b>
                        </td>
                    </tr>
                    <tr height="15px"><td colspan="3"></td></tr>
                    <tr height="15px"><td colspan="3"></td></tr>
                    <tr>
                        <td colspan="3" style="font-family:Verdana, Arial, Helvetica, sans-serif; font-size:12px; font-weight:bold;">Thanks, <br />DairyKart Team</td>
                    </tr>
                </table>';

            $Mail_To_Admin_ID   = $employee_email;
            $Mail_Admin_Subject = "Employee Details";
            $Mail_Admin_Header  = "MIME-Version: 1.0\n";
            $Mail_Admin_Header .= "Content-type: text/html; charset=iso-8859-1\r\n";
            $Mail_Admin_Header .= "Content-Transfer-Encoding: 8bit\n";
            $Mail_Admin_Header .= "X-Priority: 1\n";
            $Mail_Admin_Header .= "From: Employee-Department Project\r\n";
            $Mail_Admin_Header .= "X-MSMail-Priority: High\n";
            mail($Mail_To_Admin_ID, $Mail_Admin_Subject, $Mail_Admin_Message, $Mail_Admin_Header);
            //echo $serial_number;
            //echo $employee_email;
            //die();
    echo "<script>alert('Successfully Added & Check Your Mail to know your Details.!!!'); window.location='add-employee.php'</script>"; 
```

* * *

## 回答 #8

> 赞同：-11
> 
> 时间：2016-03-05T17:41:00.513

您可以`$_SERVER['REMOTE_ADDR']`在 PHP 中使用来接收用户的远程 IP 地址。

像这样使用：

```
<?php 

    $ip = $_SERVER['REMOTE_ADDR'];
    echo "User's IP address is: ".$ip;

 ?> 
```

# html - webkit 浏览器 a:active 从 a 改变大小

> ID：10581897
> 
> 赞同：1
> 
> 时间：2012-05-14T10:49:24.810
> 
> 标签：html, css

我有一个在 Firefox 中可以正常工作的导航栏，但是在网络浏览器中，最右边的按钮（黑色的）在单击时变大，我无法终生工作，我一直在倾注元素检查器现在已经一个多小时了，任何人都可以看到问题吗？

[http://ar.factoryagency.co.uk](http://ar.factoryagency.co.uk)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T10:18:03.600

```
#top-menu a { border: 0 !important } 
```

将解决这个问题。

# javascript - 获取在 iOS 上使用 youtube javascript api 加载的总视频字节数/视频字节数

> ID：10581898
> 
> 赞同：1
> 
> 时间：2012-05-14T10:49:25.793
> 
> 标签：javascript, ios, api, webview, youtube

我在 iOS 5 上的 UIWebView 中嵌入了 YT 视频，使用 YT Api 将视频嵌入到 iframe 中。一切正常：系统播放器弹出，而我的应用程序继续运行并从 webview 获取回调。但是确定加载了多少字节以及可用的字节数。如何使用嵌入在 UIWebView 和 Javascript youtube API 中的 iframe 来确定特定视频的总字节数和字节数？

这是我初始化播放器的方式：

```
var player;
function onYouTubePlayerAPIReady() {
    player = new YT.Player('player', { height: '120', width: '120', videoId: 'lUj4mYPFW4U', events: {  'onReady': onPlayerReady, 'onStateChange': onPlayerStateChange, 'onPlaybackQualityChange' : onPlaybackQualityChange  } });
} 
```

以及我如何尝试获取有关字节的信息：

```
function getVideoBytesProgress(){
    var s = player.getVideoBytesLoaded() + "/" + player.getVideoBytesTotal();
    return s;
} 
```

getVideoBytesTotal() 总是返回 1000，而 getVideoBytesLoaded() 总是返回 0。有没有办法获得我想要的信息？在桌面浏览器上，这工作正常。我在 ios 上做错了什么？

# php - 如何在用于 PHP 的 HTML_QuickForm 中更改选择选项的文本框中获取记录

> ID：10581899
> 
> 赞同：0
> 
> 时间：2012-05-14T10:49:25.817
> 
> 标签：php

当用户选择客户名称时，我想在运行时从数据库中填写该客户的地址和城市。因为我在更改时调用 javascript 函数，然后我正在调用 php 函数 addfun() 并尝试从中传递查询的键值。我写了下面的代码，但那不起作用。

```
 <script language='javascript' type='text/javascript'>
function ILovePHP(frm, a) {
var formName = frm.name;  
    alert(formName);  
b=<?php addfun(formName,a);?>;  

alert(b);
}
</script>

    <?php 

 $attrs = array("onChange" =>    "ILovePHP(this.form, this.value);");   

require_once "HTML/QuickForm.php";
require_once "HTML/QuickForm/Renderer.php";
  $form = new HTML_QuickForm('customer_master', 'post');  

  $form->addElement('select','custName','Select Customer Name',$cnameAry,$attrs);  
  $form->addElement('text', 'custAdd', 'Customer Address');  
  $form->addElement('text','custCity', 'City'); 
  $form->addElement('text','custState', 'State');  

  $form->display();

  function addfun($frm, $p)
{

$query="Select  Address, City  from entityMaster where eid=$p ";

$link = mysql_connect('localhost', 'root', ''); 
if (!$link) {
    die('Could not connect: ' . mysql_error());
}
mysql_select_db('GenInsurance');
$result=mysql_query($query);

$row=mysql_fetch_array($result);

$frm->setDefaults(array( 'custAdd'   => $row['Address'])); 
$frm->setDefaults(array( 'custCity'   => $row['Address'])); 

print $frm;
return $frm;
}

?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T10:52:36.890

使用 jquery 和 ajax 从 php 文件中获取地址和城市：

创建一个名为 ajax.php 的文件：

```
if(isset($_GET['name']))
{

$p = $_GET['name'];

$query="SELECT Address, City FROM entityMaster WHERE eid=$p ";

$link = mysql_connect('localhost', 'root', ''); 
if (!$link) {
    die('Could not connect: ' . mysql_error());
}
mysql_select_db('GenInsurance');
$result=mysql_query($query);

$row=mysql_fetch_array($result);

$output = array('custAdd' => $row['Address'], 'custCity' => $row['Address']);

echo json_encode($output);

} 
```

Onchange 获取城市和地址：

```
<script src="http://code.jquery.com/jquery-1.7.2.min.js"></script>
$('#custName').change(function(){

    $.getJSON("ajax.php", { name: $(this).val() } , function(data){
        $.each(data, function(key, value) {
            if(key == "custCity"){
                $('#custCity').val(value);
                }
                if(key == "custAdd"){
                $('#custAdd').val(value);
                }   

        });
    });
}); 
```

请阅读更多关于[ajax](https://developer.mozilla.org/en/Ajax)和[jquery](http://www.jquery.com)的内容。

# grails - 运行 Maven 目标时的 Grails 环境配置

> ID：10581900
> 
> 赞同：1
> 
> 时间：2012-05-14T10:49:29.513
> 
> 标签：grails, maven, build, grails-maven

我正在尝试使用 Mavan 和 maven-grails-plugin 构建我的 grails 项目。

我的 pom.xml 文件中的插件配置如下所示：

```
<plugin>
    <groupId>org.grails</groupId>
    <artifactId>grails-maven-plugin</artifactId>
    <version>${grails.version}</version>
    <extensions>true</extensions>
    <executions>
      <execution>
        <goals>
          <goal>init</goal>
          <goal>maven-clean</goal>
          <goal>validate</goal>
          <goal>config-directories</goal>
          <goal>maven-compile</goal>
          <goal>maven-test</goal>
          <goal>maven-war</goal>
          <goal>maven-functional-test</goal>
        </goals>
        <configuration>
            <env>build</env>
        </configuration>
      </execution>
    </executions>
  </plugin> 
```

我的 DataSource.groovy 配置如下所示：

```
environments {
development {
    dataSource {
        dbCreate = "update" // one of 'create', 'create-drop', 'update', 'validate', ''
        url = "jdbc:mysql://localhost/mydb?useUnicode=yes"
        username = "dev"
        password = "dev"
    }
    hibernate {
        show_sql = true
    }
}
build {
    dataSource {
        dbCreate = "update" // one of 'create', 'create-drop', 'update', 'validate', ''
        url = "jdbc:mysql://localhost/mydb?useUnicode=yes"
        username = "remote"
        password = "remote"
    }
} 
```

问题是，当我运行`mvn clean package`它时，它会尝试使用开发环境设置而不是构建环境设置连接到数据库。

如您所见，我尝试使用元素中的标签指定构建环境。根据这个问题-> [Maven Grails 插件环境](https://stackoverflow.com/questions/8220121/maven-grails-plugin-environment)

有谁知道我怎样才能让它使用构建环境设置而不是开发设置？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T19:11:56.133

`-Dgrails.env=build`调用maven时添加命令行参数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T14:22:23.247

不知道是什么版本的插件。也许

```
<grailsEnv>build</grailsEnv> 
```

是更好的配置属性吗？

# php - 自定义wordpress登录页面

> ID：10581903
> 
> 赞同：0
> 
> 时间：2012-05-14T10:49:36.710
> 
> 标签：php, wordpress, login

我需要在 wordpress 登录页面中添加一些静态文本。我怎么能这样做？找了很久，但是所有的教程都只讲了如何克服默认的CSS，却没有办法改变页面布局。任何提示都会受到高度重视。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T13:41:52.107

是的，有可能！

您不需要修改核心文件。您可以将其添加到主题的 functions.php 文件中。

**代码**

```
function custom_login_message() {
$message = "Welcome to my blog, you need to be registered to see content";
return $message;
}
add_filter('login_message', 'custom_login_message'); 
```

此消息将显示在登录和注册屏幕上。

[有关自定义登录屏幕的更多信息](http://codex.wordpress.org/Customizing_the_Login_Form)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T11:07:50.057

您可以使用以下任何插件来更改登录页面的外观：

[自定义登录](http://wordpress.org/extend/plugins/custom-login/)

[BM 自定义登录](http://wordpress.org/extend/plugins/bm-custom-login/)

# windows-ce - 错误 C2065：“MF_BITMAP”：未声明的标识符 - Windows CE 6.0

> ID：10581905
> 
> 赞同：1
> 
> 时间：2012-05-14T10:49:46.907
> 
> 标签：windows-ce

我通过以下方式在菜单中添加了位图，

```
HBITMAP bmSeparator = LoadBitmap(g_hInstance, MAKEINTRESOURCE(IDB_LINE));
fOK = AppendMenu(hmenu, MF_BITMAP,IDM_LINE,(LPCTSTR)bmSeparator); 
```

编译代码时，出现以下错误，

```
error C2065: 'MF_BITMAP' : undeclared identifier 
```

Win CE 不能使用“MF_BITMAP”吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T10:57:08.057

实际上，WinCE 不支持 MF_BITMAP。请参阅[AppendMenu 的文档](http://msdn.microsoft.com/en-us/library/ms936792.aspx)。

# xml - 在使用 XSLT 的结果 xml 中的两个不同元素中使用 xml 属性值

> ID：10581909
> 
> 赞同：1
> 
> 时间：2012-05-14T10:50:21.907
> 
> 标签：xml, xslt

我有一个看起来像这样的源 XML

```
<parent>
      <child id="123456">Child Name
      </child>
      <image name="child.jpg">
</parent> 
```

目标 XML 应该是

```
<data>
     <person id="123456">
        <name>Child Name</name>
     </person>
     <relation id="123456">
        <filename>child.jpg</filename>
     </relation>
</data> 
```

我正在使用 XSLT 来转换它。**问题**是，我什么时候可以使用 XSLT 从目标 XML 中两个不同位置的源 XML 中获取 id 的值（即 123456）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T13:14:52.083

**这是一个简短而简单的解决方案**：

```
<xsl:stylesheet version="1.0"
 xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>
 <xsl:strip-space elements="*"/>

 <xsl:template match="parent">
     <data>
       <xsl:apply-templates/>
     </data>
 </xsl:template>

 <xsl:template match="child">
  <person id="{@id}">
    <name><xsl:value-of select="."/></name>
  </person>
 </xsl:template>

 <xsl:template match="image">
  <relation id="{preceding-sibling::child[1]/@id}">
   <filename><xsl:value-of select="@name"/></filename>
  </relation>
 </xsl:template>
</xsl:stylesheet> 
```

**当此转换应用于提供的 XML 文档时**：

```
<parent>
    <child id="123456">Child Name</child>
    <image name="child.jpg"/>
</parent> 
```

**产生了想要的正确结果：**

```
<data>
   <person id="123456">
      <name>Child Name</name>
   </person>
   <relation id="123456">
      <filename>child.jpg</filename>
   </relation>
</data> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T11:07:14.020

你可以试试这个： **XSL：**

```
<?xml version='1.0'?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
<xsl:output method="xml" indent="yes"/>

<xsl:template match="/">
    <data>
        <xsl:for-each select="parent">
            <!--variable to store @id-->
            <xsl:variable name="id" select="child/@id"/>
            <!--creating a test comment node()-->
            <xsl:comment>Child having id: <xsl:value-of select="child/@id"/></xsl:comment>
            <xsl:element name="person">
                <xsl:attribute name="id"><xsl:value-of select="$id"/></xsl:attribute>
                <xsl:element name="name">
                    <xsl:value-of select="./child/text()"/>
                </xsl:element>
            </xsl:element>
            <xsl:element name="relation">
                <xsl:attribute name="id">
                    <xsl:value-of select="$id"/>
                </xsl:attribute>
                <xsl:element name="filename">
                    <xsl:value-of select="./image/@name"/>
                </xsl:element>
            </xsl:element>
        </xsl:for-each>
    </data>
</xsl:template>

</xsl:stylesheet> 
```

**输入 XML（您的，但稍作修改以使其格式良好）**

```
<?xml version="1.0"?>
<parent>
      <child id="123456">Child Name</child>
      <image name="child.jpg"/>
</parent> 
```

**结果**

```
<?xml version='1.0' ?>
<data>
  <!--Child having id: 123456-->
  <person id="123456">
    <name>Child Name</name>
  </person>
  <relation id="123456">
    <filename>child.jpg</filename>
  </relation>
</data> 
```

# ruby-on-rails - 如何在 Twitter Bootstrap 图标周围设置边框？

> ID：10581912
> 
> 赞同：0
> 
> 时间：2012-05-14T10:50:37.983
> 
> 标签：ruby-on-rails, css, icons, twitter-bootstrap, border

1.  如何在 T-bootstrap 图标周围设置边框？css 边框属性创建一个正方形并且不跟踪图标。

2.  如果操作已经在 Rails 中完成，那么更改图标颜色的最佳方法是什么？例如，我有一个“书签”的星形图标，它通常是浅灰色的（尽管我希望它是带有黑色边框的白色），并且使用 :hover css 属性变成橙色。如果用户已经为其添加了书签，我想让图标永久变为橙色，我会使用 css 还是 ruby​​ 来确定颜色？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T10:55:00.793

对于 1\. CSS 不会为图像像素提供阴影或轮廓，只有框（因此框阴影）。

使用脚本 + 一些图像库在服务器端预处理图标图像。

1.  CSS 是更改项目颜色的最佳方式。只需添加一个自定义图标类，如 icon-orange，然后使用此 CSS 图标类而不是标准图标类。

（同样，最有可能需要将图标预处理为黄色版本）。

# java - sessionContext.getCallerPrincipal() 中的 NullPointerException

> ID：10581921
> 
> 赞同：7
> 
> 时间：2012-05-14T10:51:32.803
> 
> 标签：java, jakarta-ee, glassfish, ejb, cdi

我有一个简单的（webprofile）EJB 3.1 应用程序并尝试确定`@ApplicationScoped`CDI Bean 中的当前用户，所以我使用：

```
Principal callerPrincipal = this.sessionContext.getCallerPrincipal() 
```

效果很好（所以我可以确定当前用户的名称）。

但是在任何（其他）EJB 中出现任何异常之后，此调用不再起作用（我需要重新启动服务器）！该方法不是返回调用者主体，而是抛出此异常。

```
Caused by: java.lang.NullPointerException
at com.sun.ejb.containers.EJBContextImpl.getCallerPrincipal(EJBContextImpl.java:421)
at de.mytest.service.CurrentUserService.getCurrentUserId(CurrentUserService.java:102) 
```

**有人可以给我提示我做错了什么吗？**

* * *

实施细节：

服务器 Glassfish 3.1.2

当前用户服务：

```
@ApplicationScoped
public class CurrentUserService {

    @Resource
    private SessionContext sessionContext;

 public long getCurrentUserId() {

        if (this.sessionContext == null) {
            throw new RuntimeException("initialization error, sessionContext must not be null!");
        }

 /*line 102 */     Principal callerPrincipal = this.sessionContext.getCallerPrincipal(); 
        if (callerPrincipal == null) {
            throw new RuntimeException("callerPrincipal must not be null, but it is");
        }

        String name = callerPrincipal.getName();
        if (name == null) {
            throw new RuntimeException("could not determine the current user id, because no prinicial in session context");
        }

        return this.getUserIdForLogin(name);        
    } 
```

在 Faces Controller 和 CDI 服务之间抵抗的 EJB Facad

```
@Stateless
@RolesAllowed("myUser")
public class TeilnehmerServiceEjb {

    @Inject
    private CurrentUserService currentUserService;

    public long currentUserId() {
        return  = currentUserService.getCurrentUserId();
    }
} 
```

web.xml

```
<security-constraint>
    <web-resource-collection>
        <web-resource-name>All Pages</web-resource-name>
        <url-pattern>/*</url-pattern>
    </web-resource-collection>
    <auth-constraint>
        <role-name>myUser</role-name>
    </auth-constraint>
</security-constraint>

<login-config>
    <auth-method>BASIC</auth-method>
    <realm-name>mySecurityRealm</realm-name>
</login-config> 
```

glassfish-web.xml

```
<security-role-mapping>
    <role-name>myUser</role-name>
    <group-name>APP.MY.USER</group-name>
</security-role-mapping> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-17T13:41:12.197

它不起作用的原因是因为您的 SessionContext 对象被声明为全局变量，并且由于您使用的是@ApplicationScope，因此通过 IoC 对该资源的初始化将仅在构建应用程序时完成一次。

如果您想将 bean 保留为 @ApplicationScope，我建议您尝试在每次需要时从执行操作的方法中手动访问 SessionContext，而不是手动使用 JNDI API 而不是 IoC。请参阅示例如何查看热执行 JNDI 查找以手动访问资源：

```
public long getCurrentUserId() {
      //..
     try {
          InitialContext ic = new InitialContext();
          SessionContext sessionContext=(SessionContext)   ic.lookup("java:comp/env/sessionContext");

          System.out.println("look up injected sctx: " + sessionContext);

     //Now do what you want with the Session context:
         Principal callerPrincipal = sessionContext.getCallerPrincipal();
    //..
      } catch (NamingException ex) {
          throw new IllegalStateException(ex);
      }
//..

} 
```

如果您有兴趣了解更多访问 SessionContext 的方法，请查看此链接，我在该链接中找到了该代码片段：

[http://javahowto.blogspot.com/2006/06/4-ways-to-get-ejbcontext-in-ejb-3.html](http://javahowto.blogspot.com/2006/06/4-ways-to-get-ejbcontext-in-ejb-3.html)

我希望这有帮助

# django - 在 django admin 中按多个字段过滤

> ID：10581922
> 
> 赞同：0
> 
> 时间：2012-05-14T10:51:35.363
> 
> 标签：django, django-admin

是否可以通过多个字段过滤 django 管理界面中的结果？例如在以下模型中

```
class Account(models.model):
    name = model.CharField(max_length=64)

class Row(models.model):
    date = models.DateField()
    account = models.ForeignKey(Account) 
```

是否可以按日期和帐户过滤管理员中的行？

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-14T11:08:39.557

当然，在你的模型管理员中放一些这样的想法：

```
list_filter = ('date', 'account') 
```

# ruby-on-rails-3 - 如何通过 ip 限制访问 ActiveAdmin 登录页面？

> ID：10581923
> 
> 赞同：1
> 
> 时间：2012-05-14T10:51:35.363
> 
> 标签：ruby-on-rails-3, activeadmin

**导轨版本**

导轨 3.2.1

**目标：**

仅访问办公室计算机的 ActiveAdmin 登录页面。

**代码：**

路由.rb

约束(:ip => /(^127.0.0.1$)|(^192.168.10.[0-9]*$)/) 做

```
 match 'admin/' => 'admin#login' 
```

结尾

这不工作，任何suesstion？

===========================

我编辑我的 route.rb 跟随代码

```
 constraints(:ip => /(^127.0.0.1$)|(^192.168.10.[0-9]*$)/) do
    ActiveAdmin.routes(self)
  end
  devise_for :admin_users, ActiveAdmin::Devise.config 
```

这是工作！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-14T10:57:24.337

参考 Rails 指南章节路由（http://guides.rubyonrails.org/routing.html#advanced-constraints）：

```
class WhitelistConstraint
  def initialize
    @ips = Whitelist.retrieve_ips
  end

  def matches?(request)
    @ips.include?(request.remote_ip)
  end
end

TwitterClone::Application.routes.draw do
  match 'admin/' => 'admin#login',
    :constraints => WhitelistConstraint.new
end 
```

我相信这也可以用另一种方式来完成，但我相信你明白了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-03-15T12:12:04.593

我使用这种方式，因为如果路由过于复杂，您可以将一些逻辑移出到一个类中。

这个类必须有火柴？在其上定义的方法，如果用户应该有权访问该路由，则返回 true，如果用户不应该访问，则返回 false。

它可以帮助我在没有正则表达式的情况下将 ips 添加到数组中。

我希望，它可以帮助某人）

更多信息 - [https://api.rubyonrails.org/v5.2.2/classes/ActionDispatch/Routing/Mapper/Scoping.html#method-i-constraints](https://api.rubyonrails.org/v5.2.2/classes/ActionDispatch/Routing/Mapper/Scoping.html#method-i-constraints)

```
class WhitelistConstraint
  IPS = %w[
    143.132.200.43,
  ]

  def self.matches?(request)
    IPS.include?(request.remote_ip)
  end
end

Rails.application.routes.draw do

  constraints(WhitelistConstraint) do
    ActiveAdmin.routes(self)
    mount Sidekiq::Web => '/sidekiq'
  end
end 
```

# asp.net - ASP.Net 中内置身份验证的默认角色

> ID：10581925
> 
> 赞同：0
> 
> 时间：2012-05-14T10:51:48.133
> 
> 标签：asp.net

我正在使用 ASP.Net 中的内置身份验证。我想让它在用户注册时自动添加到我创建的角色中。我该怎么做呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T11:24:58.453

我假设您使用默认的 Asp .Net 成员资格和角色提供程序。如果您使用`CreateUserWizard`, 在`OnCreatedUser`处理程序中，您可以简单地执行如下操作：

```
string userName = Membership.GetUser().UserName;
Roles.AddUserToRole(userName, "<role>"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-10T23:48:26.463

用这个：

```
string user ="";
user = RegisterUser.UserName.ToString();
Roles.AddUserToRole(user, "Employee"); 
```

例子：

```
 protected void RegisterUser_CreatedUser(object sender, EventArgs e)
    {

        FormsAuthentication.SetAuthCookie(RegisterUser.UserName, createPersistentCookie: false);

        string continueUrl = RegisterUser.ContinueDestinationPageUrl;
        if (!OpenAuth.IsLocalUrl(continueUrl))
        {
            continueUrl = "~/";
        }
        string user ="";
        user = RegisterUser.UserName.ToString();
        Roles.AddUserToRole(user, "Employee");
        Response.Redirect(continueUrl);
    } 
```

# iphone - 将 NSArray 的随机对象放入 NSArray 的随机 UIButtons 标题

> ID：10581934
> 
> 赞同：1
> 
> 时间：2012-05-14T10:52:24.917
> 
> 标签：iphone, objective-c, ios, nsarray, random-access

我有一个包含 26 个字母的数组和一个包含 3 个 UIButtons 的第二个数组。我想从数组中随机抽取 3 个字母并将它们随机设置为 3 个 UIButtons 的标题。这里是代码。

```
-(void)placeImages {
     NSMutableArray *alphabetarr=[[NSArray alloc]  
     initWithObjects:@"A",@"B",@"C",@"D",@"E",@"F",@"G",@"H",@"I",@"J",@"K",@"L",
     @"M",@"N",@"O",@"P",@"Q",@"R",@"S",@"T",@"U",@"V",@"W",@"X",@"Y",@"Z",nil];
     NSMutableArray *buttons = [NSArray arrayWithObjects:btn1, btn2, btn3, nil];
     for (UIButton *btn in buttons) {
           int randomIndex= arc4random() % [alphabetarr count];
           NSString* titre = [alphabetarr objectAtIndex:randomIndex];
           [btn setTitle:titre forState:UIControlStateNormal]; 
           [alphabetarr removeObjectAtIndex:randomIndex];                        
    } 
```

通过使用此代码，我在一个 UIButton 中只看到一个字母。请建议任何人如何从数组中选择 3 个随机字母并将这 3 个随机字母设置为数组的 3 个 UIButton 的标题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T11:16:26.060

```
-(void)placeImages {
 NSMutableArray *alphabetarr=[[NSMutableArray alloc]  
 initWithObjects:@"A",@"B",@"C",@"D",@"E",@"F",@"G",@"H",@"I",@"J",@"K",@"L",
 @"M",@"N",@"O",@"P",@"Q",@"R",@"S",@"T",@"U",@"V",@"W",@"X",@"Y",@"Z",nil];
 NSMutableArray *buttons = [NSMutableArray arrayWithObjects:btn1, btn2, btn3, nil];
 for (UIButton *btn in buttons) {
       int randomIndex= arc4random() % [alphabetarr count];
       NSString* titre = [alphabetarr objectAtIndex:randomIndex];
       [btn setTitle:titre forState:UIControlStateNormal]; 
       [alphabetarr removeObjectAtIndex:randomIndex];                        
} 
```

分配的是 NSArray 而不是 NSMutableArray。这应该有效。希望能帮助到你。快乐编码:)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-14T11:16:29.473

试试这个来生成随机字符。无需为此设置数组。

```
char c = (char)('A' + arc4random_uniform(25)) 
```

[参考这里](https://stackoverflow.com/a/10561257/1249546)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-14T10:56:08.110

`removeObjectAtIndex:`是一种`NSMutableArray`方法，而不是`NSArray`'s。改变你的`alphabetarr`类型，问题就会消失。

使用`rand()`或`arc4random()`函数生成数字。[在这里](http://iphonedevelopment.blogspot.com/2008/10/random-thoughts-rand-vs-arc4random.html)您可以看到两者之间的比较。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-14T12:51:33.807

看起来问题在于您每次都用一个新字母覆盖按钮文本的内容。您需要保存按钮中的先前文本并每次都附加新字符，而不是用每个新字母重置它。

```
//gather random letter
NSString *titre = [alphabetarr objectAtIndex:randomIndex];

//gather current string
NSMutableString *currentString = [[btn titleLabel] text];

//append string
[currentString appendString:titre];

//set button text
[btn setTitle:currentString forState:UIControlStateNormal]; 
```

这应该每次都在按钮上附加一个新字母，而不是将其设置为从随机数组返回的最后一个字母。

希望有帮助:)

# jquery - jquery在显示隐藏元素时不同的效果

> ID：10581935
> 
> 赞同：0
> 
> 时间：2012-05-14T10:52:26.920
> 
> 标签：jquery

我想给出不同的过渡效果，例如：

```
 $(div).show("fadeIn")  $(div).show("shake") $(div).show("fold") etc 
```

我怎么能在jquery中做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T10:58:39.513

对于淡入淡出 - [http://api.jquery.com/fadeIn/](http://api.jquery.com/fadeIn/)

`$("div").fadeIn("slow");`

* * *

对于摇 - [http://docs.jquery.com/UI/Effects/Shake](http://docs.jquery.com/UI/Effects/Shake)

```
$("div").click(function () {
  $(this).effect("shake", { times:3 }, 300);
}); 
```

* * *

对于折叠 - [http://docs.jquery.com/UI/Effects/Fold](http://docs.jquery.com/UI/Effects/Fold)

```
$("div").click(function () {
  $(this).hide("fold", {}, 1000);
}); 
```

* * *

您可以在以下位置检查所有默认效果：[http ://docs.jquery.com/UI/Effects/](http://docs.jquery.com/UI/Effects/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T10:59:58.597

使用 JQueryUI lib 有很多可能的转换：http: [//jqueryui.com/demos/effect/](http://jqueryui.com/demos/effect/)

否则，您可以使用标准的 JQuery 动画，例如

```
$(selector).fadeIn(300) /*300 is the duration in miliseconds*/
$(selector).slideUp(300)
... 
```

祝你今天过得愉快

# mysql - 是否可以将 ODBC 连接重定向到另一个 IP 地址

> ID：10581939
> 
> 赞同：0
> 
> 时间：2012-05-14T10:52:42.333
> 
> 标签：mysql, deployment, odbc

我们有一栋充满计算机的大楼，每台计算机都有许多 ODBC 连接设置，指向某个 IP 地址的 MySQL 服务器。

我们想把这个 MySQL 服务器移动到另一台机器上，我们想知道是否有办法在原始 IP 地址设置一些东西，以将指向端口 3306 的任何 ODBC 连接重定向到新机器。

一些背景，新旧服务器都是 Windows Server 2003。MySQL 服务器是遗留系统的一部分，我们正在用 SQL 服务器替换它，但 MySQL 需要在可预见的未来保持运行。

另一种方法是花一天时间在每台计算机上检查并修改 ODBC 连接字符串，如果需要，我会这样做，但我想我会先在这里询问。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T13:07:56.443

您有几个选项，其中大部分与网络相关，而不是软件。

将来，请考虑使用主机名而不是 IP 地址来配置您的 ODBC 设置。这允许您利用 DNS 将主机名解析为您想要的任何 IP 地址。

除此之外，[MySQL 代理](https://launchpad.net/mysql-proxy)可能是您正在寻找的。

# expressionengine - 生成 po 或 xml 文件进行语言翻译

> ID：10581941
> 
> 赞同：0
> 
> 时间：2012-05-14T10:52:44.037
> 
> 标签：expressionengine, language-translation

我只需要专家的许可。我需要用其他语言翻译整个网站。我的网站由 100 篇文章组成。我需要翻译整篇文章。我应该为每篇文章创建 .po 还是 xml 文件

如果以上是唯一的方法，那么让我知道创建 .po 和 xml 文件的有效方法，因为这些不是小消息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T13:17:12.727

我看到你用“表达式引擎”标记了你的帖子，所以我假设你的网站是建立在 EE 上的。在这种情况下，既不是 .po 文件也不是 XML 文件。由于 EE 提供完全可定制的字段和渠道，您可以像管理主要语言内容一样管理辅助语言内容。

EE 中有许多不同的方法，每种方法都有自己的优点和缺点。下面链接的这篇文章对许多方法进行了很好的概述，并提供了许多指向附加阅读的链接。关于 SO 的答案不止一个可以正确涵盖。

*EE Insider 上[ExpressionEngine 的多语言解决方案](http://eeinsider.com/articles/multi-language-solutions-for-expressionengine/)*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T08:12:53.383

导出为 XML： [http](http://devot-ee.com/add-ons/export-it) ://devot-ee.com/add-ons/export-it 或 [http://devot-ee.com/add-ons/ajw-export](http://devot-ee.com/add-ons/ajw-export)

或者，您可以简单地构建一个使用标准 {exp:channel:entries} 标记对输出 XML 的模板，使模板类型为 XML 并为 XML 添加正确的标头和代码。

重新导入： [http ://devot-ee.com/add-ons/datagrab](http://devot-ee.com/add-ons/datagrab)

以上所有内容都将涉及了解您要导出哪些字段以及它们的表和行引用，以便可以轻松地重新导入。

强烈建议您在开始任何翻译过程之前彻底测试您选择的导出和导入工具，以确保其正常工作。

示例 XML 模板（这是为了构建 sitemap.xml，但可以让您开始构建自己的 XML 结构）：

```
<?xml version="1.0" encoding="UTF-8"?>
<urlset xmlns="http://www.google.com/schemas/sitemap/0.84">
{exp:channel:entries channel="pages" entry_id="not 117|104" limit="500" disable="member_data|pagination|trackbacks" rdf="off" dynamic="no" status="Open" sort="asc"}
    <url>
        <loc>{page_url}</loc>
        <lastmod>{gmt_edit_date format='%Y-%m-%dT%H:%i:%s%Q'}</lastmod>
        <changefreq>daily</changefreq>
        <priority>1</priority>
    </url>
{/exp:channel:entries}
</urlset> 
```

# android - Android 3.2 - 在 DialogFragment 中自定义 AlertDialog 按钮

> ID：10581944
> 
> 赞同：2
> 
> 时间：2012-05-14T10:52:58.593
> 
> 标签：android, android-layout, android-widget, android-button, android-dialogfragment

我创建了一个扩展类，它在它的 onCreateDialog 方法`DialogFragment`中返回一个，就像[这里](https://developer.android.com/reference/android/app/DialogFragment.html)一样。 问题是，我想增加标准（正）按钮的高度，但我无法抓住它来改变它的高度。 当我在 onCreateDialog 方法中执行以下操作时`AlertDialog`

`DialogFragment`

```
mAlertDialog = new AlertDialog.Builder(getActivity())
            .setView(messageView)
            .setCustomTitle(titleView)
            .setPositiveButton(R.string.dialog_button,
                new DialogInterface.OnClickListener() {
                    public void onClick(DialogInterface dialog, int whichButton) {
                        ((ContextSwapUserInterface) getActivity()).instructionsAccepted();
                    }
                }
            )
            .create();

mAlertDialog.getButton(AlertDialog.BUTTON_POSITIVE).setHeight(60); 
```

我得到一个异常，上面写着“......无法实例化 ComponentInfo......”
我猜这是因为此时 Button 没有正确实例化。
所以我尝试在我的主要活动中获取按钮，在我创建`DialogFragment`并调用它的 .show 方法之后：

```
// Create and show a new InstructionsDialogFragment
DialogFragment instructionsDialogFragment = InstructionsDialogFragment.newInstance(mInstructions);
instructionsDialogFragment.show(getFragmentManager(), "Instructions Dialog");
((Button) instructionsDialogFragment.getDialog().findViewById(android.R.id.button1)).setHeight(60); 
```

我还尝试了以下内容，而不是上面的最后一行：

```
((AlertDialog) instructionsDialogFragment.getDialog()).getButton(AlertDialog.BUTTON_POSITIVE).setHeight(60); 
```

两个版本都会导致 NullPointerException。有没有什么简单的方法可以`AlertDialog`在使用 时自定义 按钮`DialogFragment`？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-15T14:58:22.350

好的 - 尝试在片段的 onActivityCreated 方法中获取按钮。我为 listfragment 做了这个，但它应该做同样的事情 - 检查你有正确的 ID 等。

```
 @Override
    public void onActivityCreated(Bundle savedInstanceState) {
        super.onActivityCreated(savedInstanceState);

        Button b = (Button)this.getView().findViewById(R.id.buttonID);

        b.setOnClickListener(new View.OnClickListener() {
            public void onClick(View v) {
                Toast.makeText(getActivity(), "Button Clicked",  Toast.LENGTH_SHORT).show();
            }
    }); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-08-21T13:43:31.827

另一种方法是使用 an`onShowListener`来修改我遇到同样问题的按钮，并且在显示对话框之前我无法使用 Buttons `.show()`。我认为 AlertDialog 的 UI 元素不是在之后实例化，`builder.create`而是在`.show()`.

```
mAlertDialog.setOnShowListener(new OnShowListener() {
        @Override
        public void onShow(DialogInterface dialog) {
            ((AlertDialog)dialog).getButton(AlertDialog.BUTTON_POSITIVE).setHeight(60);
        }
    }); 
```

# java - 类似于 Java 的#warning 指令？

> ID：10581945
> 
> 赞同：6
> 
> 时间：2012-05-14T10:53:04.870
> 
> 标签：java, debugging, preprocessor

在我的项目中，我有类似的东西`final boolean Debug.USE_DEBUG_MODE`，然后我总是忘记将其切换回`false`. 我想知道是否可以放置类似于`#warning`C++ 指令的内容，这样我就不会忘记将代码改回来。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-14T10:54:49.280

您可以`//TODO Change this later`在 eclipse 中使用 Task Tag 并配置 Eclipse 以显示所有`TODO`s 的编译时警告。

```
public static void main(String[] args) {
    //TODO Change this line before final build.
    String mode = "DEV"
} 
```

您可以通过在一个地方集体查看所有此类任务标签`Window > Show View > Markers`。

请注意，还有其他的，例如`FIXME`, `XXX`。默认情况下，`TODO`标签的优先级是`NORMAL`，的优先级`FIXME`是`HIGH`。

![在此处输入图像描述](../Images/c69106697fbb67e8216e73f933aba80b.png)

# php - 链接文件（样式表、脚本文件、图像等）

> ID：10581947
> 
> 赞同：0
> 
> 时间：2012-05-14T10:53:23.987
> 
> 标签：php, javascript, jquery, html, css

我在链接样式表、图像、数据库连接文件（db.php）、脚本文件等文件时遇到问题。因为它们位于包含/链接它们的文件之外。

例如，假设这是将调用所有内容的主文件的位置：

```
my website directory/admin/thefilewhereeverythingwillbecalled.php 
```

在中`thefilewhereeverythingwillbecalled.php`，我必须调用位于包含的文件夹之外的 db.php`thefilewhereeverythingwillbecalled.php`

例如`my website directory/-this is the directory where the db.php is located-/thefilewhereeverythingwillbecalled.php`- 同上样式表和脚本。

但是，样式表和脚本位于文件夹 cssandjs（包含所有样式表和脚本文件）中，该文件夹位于`thefilewhereeverythingwillbecalled.php`

例如`my website directory/-here is where the cssandjs folder is located-/thefilewhereeverythingwillbecalled.php`

通常，我只是在链接文件时遇到问题，该文件位于调用这些文件的文件之外。有人可以给我一个想法如何链接它吗？

我试过这个：

`../cssandjs/style.css`但`./cssandjs/jquery.js`它们都不起作用

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T11:09:46.063

尝试使用 $_SERVER['DOCUMENT_ROOT']."/dirName/file.ext"; 引用文件，例如包含目录和文件。

或使用相对路径“../dirnName/file.ext”；

首选第一种方法

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T11:57:23.463

如果我是正确的，它是 2 个目录。尝试这个 ：

```
../../cssandjs/style.css 
```

如果 /cssandjs/ 在您的网站目录中，这将起作用。您应该更具体地使用您的目录名称，而不是-这里是它所在的位置-

似乎无法弄清楚哪些在同一个文件夹中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-14T11:01:07.173

尝试包含文件的完整路径。

# android - 流星如何与android应用程序耦合？

> ID：10581948
> 
> 赞同：10
> 
> 时间：2012-05-14T10:53:44.163
> 
> 标签：android, meteor

流星主页（www.meteor.com）在要点 8（“互操作性”）中说：

> 您可以将任何东西连接到 Meteor，从本地移动应用程序到遗留数据库再到 Arduinos。只需实现简单的 DDP 协议。

问：Android是Java，怎么连接meteor（js）？任何指向有用资源/教程的链接将不胜感激！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-21T19:22:20.123

DDP 代表*分布式数据协议*，专门用于 Meteor。

目前还没有内置的 Android/Java 支持，但这里有一个用 Python 编写的官方 Meteor DDP 客户端，您可以将其用作参考：[https ://github.com/meteor/meteor/tree/devel/examples/unfinished /python-ddp-client](https://github.com/meteor/meteor/tree/devel/examples/unfinished/python-ddp-client)

更多信息：

*   [https://stackoverflow.com/questions/10128430/documentation-or-code-details-on-meteors-ddp-pub-sub-protocol](https://stackoverflow.com/questions/10128430/documentation-or-code-details-on-meteors-ddp-pub-sub-protocol)
*   [如何从 Meteor 集合中获取实时的增量流，以便在 web 应用程序之外使用？](https://stackoverflow.com/questions/10102869/how-do-i-get-a-live-stream-of-deltas-from-meteor-collection-for-use-outside-of/)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-08-01T15:15:57.463

仅供参考，我编写了一个更高级别的 Android DDP 层来处理客户端状态，包括收集处理。

它在 github 上，包括 Maven Central 中的 Maven 工件（我的 java-ddp-client 版本也在 Maven Central 中）： [https ://github.com/kenyee/android-ddp-client](https://github.com/kenyee/android-ddp-client)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-06-26T16:12:47.253

不知道为什么没有人提到这一点，但有一个 Java DDP 客户端库：

[https://github.com/kutrumbo/java-ddp-client](https://github.com/kutrumbo/java-ddp-client)

仅供参考，我已经将它分叉并充实了很多。我开始用它编写一个 Android 应用程序，发现它缺少很多东西来让它正常工作：

[https://github.com/kenyee/java-ddp-client](https://github.com/kenyee/java-ddp-client)

我还在此之上编写了一个 Android 层以使事情变得更容易，并且一旦我弄清楚如何让它在 Eclipse 中使用 Gradle 工作（无法让它识别 android-libraries 插件所以对 Android 库的任何引用都不起作用）-：我确实使用所有这些东西编写了一个 Android 应用程序......在 Play 商店中查找与 Meteor's Party 示例匹配的“Meteor.js Party”。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-03-21T22:46:02.147

客户端可以通过其[DDP 协议](https://www.meteor.com/ddp)（[​​规范](https://github.com/meteor/meteor/blob/devel/packages/ddp/DDP.md)）与 Meteor 进行通信。查看通用平台[的独立 DDP 实现列表。](http://meteorpedia.com/read/DDP_Clients)

# debian-based - 如何在运行 Debian Squeeze 和 LXDE 的 Raspberry Pi 上截屏？

> ID：10581953
> 
> 赞同：6
> 
> 时间：2012-05-14T10:54:05.173
> 
> 标签：debian-based, raspberry-pi

菜鸟问题...

但未安装快门，打印屏幕似乎无法正常工作，未安装屏幕抓取等。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-15T22:09:42.553

这可以通过 ImageMagick 来实现。通过运行命令安装

```
sudo apt-get install imagemagick 
```

要获取所有桌面，只需键入

```
import -window root screen.png 
```

或者你可以延迟 5 秒

```
sleep 5; import -window root screen.png 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-23T23:26:24.720

对于更轻量级的截图工具，使用 scrot

```
sudo apt-get install scrot 
```

要截屏，请在终端输入

```
scrot 
```

要在 5 秒后截取屏幕截图

```
scrot -d 5 
```

# java - 从多个 HashMap 对象创建 SortedSet 的最佳方式

> ID：10581955
> 
> 赞同：3
> 
> 时间：2012-05-14T10:54:27.487
> 
> 标签：java, sorting, collections, hashmap, sortedset

我有许多`HashMap`包含数百个`Comparable`对象（例如 type `MyClass`）的数据结构，需要将所有值（不是键）放在一个数据结构中，然后对其进行排序。

由于`MyClass`物体的体积和到达率，这个过程（至少每毫秒执行一次）需要尽可能高效。

一种方法是使用`SortedSet`，大致如下：

```
HashMap<String, MyClass>[] allMaps = ... // All the HashMaps

SortedSet<MyClass> set = new TreeSet<MyClass>();

Collection<MyClass> c;

for (HashMap<String, MyClass> m:allMaps)
{
    c = m.values();
    set.addAll(c);
} 
```

将已排序的集合传递给 可能会更快，这可能会在每次插入时或在每次插入后`set.addAll()`重新排序。`TreeSet`但是，要这样做，`List`需要将 a 传递给`Collections.sort()`，这意味着必须进行从`Collection`to的转换`List`，即必须维持另一个性能损失。

此外，可能还有另一种更有效的方式来实现相同的目标。

注释？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T11:52:18.593

我认为答案有点取决于 MyClass 数据的变化趋势。例如，如果您在每个时间范围内有几个新值，那么您可能需要考虑保留最后返回的排序集和先前键的副本，以便在下一次运行时，您可以执行更改的增量（即在地图中找到新键并手动将它们插入您上次返回的排序集中）。

如果 MyClass 对象可能会从地图中删除，则此算法会有所不同。但一般的想法是让它更快，你必须找到一种方法来执行增量更改，而不是每次都重新处理整个集合。

# c# - 使用 ASP.NET C# 捕获网络摄像头

> ID：10581958
> 
> 赞同：-4
> 
> 时间：2012-05-14T10:54:37.767
> 
> 标签：c#, asp.net, html, webcam

我想在 ASP.NET C# 中捕获网络摄像头图像。我在 Google 中搜索过，但我只获得 Windows 应用程序的代码。我没有得到 Web 应用程序的解决方案。请帮帮我。。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T10:57:27.113

如果您不使用 HTML5，则必须使用插件。
插件或 html5 将获取图像并将其上传到服务器..您的 asp.net 服务器（IIS）**没有直接的方式**
可以直接与网络摄像头交互

 *** * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-14T11:00:34.847

这对于 C#/ASP.net 来说根本不可能，因为这是在服务器上运行的代码，而不是在网络摄像头所在的客户端计算机上。

**为此，您将需要一个客户端解决方案。**

目前 HTML5 和网络摄像头的排名非常稀缺，似乎没有人正确实施它： [http ://caniuse.com/#search=webcam](http://caniuse.com/#search=webcam)

我会推荐silverlight或flash（我将转向flash，因为它拥有更强大的用户群——但是说，如果SL对开发人员来说更快/更干净，并且你告诉你的用户他们需要SL——它不应该是一个问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-14T10:57:23.797

您可以使用与 Windows 应用程序相同的技术，但它将使用服务器上的摄像头……您需要从浏览器访问用户的摄像头，这很棘手。这是关于 HTML5 的类似问题：[如何从 HTML5 访问网络摄像头？](https://stackoverflow.com/questions/7074230/how-to-access-webcam-from-html5)**

# maven - maven 3.0.3中的surefire 2.7.2

> ID：10581961
> 
> 赞同：0
> 
> 时间：2012-05-14T10:54:47.590
> 
> 标签：maven, maven-plugin

我曾经在 maven2.2.1 中使用“编译”和“打包”我的项目没有问题。但是当我切换到 maven3.0.3 时，我遇到了这个错误：

```
java.lang.NoClassDefFoundError: org/apache/maven/surefire/booter/SurefireExecutionException
    at java.lang.Class.getDeclaredConstructors0(Native Method)
    at java.lang.Class.privateGetDeclaredConstructors(Class.java:2389)
    at java.lang.Class.getDeclaredConstructors(Class.java:1836)
    at com.google.inject.spi.InjectionPoint.forConstructorOf(InjectionPoint.java:243)
    at com.google.inject.internal.ConstructorBindingImpl.create(ConstructorBindingImpl.java:96)
    at com.google.inject.internal.InjectorImpl.createUninitializedBinding(InjectorImpl.java:628)
    at com.google.inject.internal.InjectorImpl.createJustInTimeBinding(InjectorImpl.java:835)
    at com.google.inject.internal.InjectorImpl.createJustInTimeBindingRecursive(InjectorImpl.java:769)
    at com.google.inject.internal.InjectorImpl.getJustInTimeBinding(InjectorImpl.java:254)
    at com.google.inject.internal.InjectorImpl.getBindingOrThrow(InjectorImpl.java:205)
    at com.google.inject.internal.InjectorImpl.getInternalFactory(InjectorImpl.java:843)
    at com.google.inject.internal.InjectorImpl.getProviderOrThrow(InjectorImpl.java:957)
    at com.google.inject.internal.InjectorImpl.getProvider(InjectorImpl.java:990)
    at com.google.inject.internal.InjectorImpl.getProvider(InjectorImpl.java:951)
    at com.google.inject.internal.InjectorImpl.getInstance(InjectorImpl.java:1003)
    at org.sonatype.guice.bean.reflect.AbstractDeferredClass.get(AbstractDeferredClass.java:47)
    at com.google.inject.internal.InternalFactoryToProviderAdapter.get(InternalFactoryToProviderAdapter.java:40)
    at com.google.inject.internal.InjectorImpl$4$1.call(InjectorImpl.java:968)
    at com.google.inject.internal.InjectorImpl.callInContext(InjectorImpl.java:1014)
    at com.google.inject.internal.InjectorImpl$4.get(InjectorImpl.java:964)
    at com.google.inject.Scopes$1$1.get(Scopes.java:59)
    at org.sonatype.guice.bean.locators.LazyBeanEntry.getValue(LazyBeanEntry.java:79)
    at org.sonatype.guice.plexus.locators.LazyPlexusBean.getValue(LazyPlexusBean.java:53)
    at org.codehaus.plexus.DefaultPlexusContainer.lookup(DefaultPlexusContainer.java:243)
    at org.codehaus.plexus.DefaultPlexusContainer.lookup(DefaultPlexusContainer.java:235)
    at org.apache.maven.plugin.internal.DefaultMavenPluginManager.getConfiguredMojo(DefaultMavenPluginManager.java:455)
    at org.apache.maven.plugin.DefaultBuildPluginManager.executeMojo(DefaultBuildPluginManager.java:92)
    at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:209)
    at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:153)
    at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:145)
    at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject(LifecycleModuleBuilder.java:84)
    at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject(LifecycleModuleBuilder.java:59)
    at org.apache.maven.lifecycle.internal.LifecycleStarter.singleThreadedBuild(LifecycleStarter.java:183)
    at org.apache.maven.lifecycle.internal.LifecycleStarter.execute(LifecycleStarter.java:161)
    at org.apache.maven.DefaultMaven.doExecute(DefaultMaven.java:319)
    at org.apache.maven.DefaultMaven.execute(DefaultMaven.java:156)
    at org.apache.maven.cli.MavenCli.execute(MavenCli.java:537)
    at org.apache.maven.cli.MavenCli.doMain(MavenCli.java:196)
    at org.apache.maven.cli.MavenCli.main(MavenCli.java:141)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.codehaus.plexus.classworlds.launcher.Launcher.launchEnhanced(Launcher.java:290)
    at org.codehaus.plexus.classworlds.launcher.Launcher.launch(Launcher.java:230)
    at org.codehaus.plexus.classworlds.launcher.Launcher.mainWithExitCode(Launcher.java:409)
    at org.codehaus.plexus.classworlds.launcher.Launcher.main(Launcher.java:352)
Caused by: java.lang.ClassNotFoundException: org.apache.maven.surefire.booter.SurefireExecutionException
    at org.codehaus.plexus.classworlds.strategy.SelfFirstStrategy.loadClass(SelfFirstStrategy.java:50)
    at org.codehaus.plexus.classworlds.realm.ClassRealm.loadClass(ClassRealm.java:244)
    at org.codehaus.plexus.classworlds.realm.ClassRealm.loadClass(ClassRealm.java:230) 
```

还有这个：

```
[ERROR] Failed to execute goal org.apache.maven.plugins:maven-surefire-plugin:2.7.2:test (default-test) on project yaghut-core: Execution default-test of goal org.apache.maven.plugins:maven-surefire-plugin:2.7.2:test failed: Unable to load the mojo 'test' in the plugin 'org.apache.maven.plugins:maven-surefire-plugin:2.7.2'. A required class is missing: org/apache/maven/surefire/booter/SurefireExecutionException

[ERROR] realm =    plugin>org.apache.maven.plugins:maven-surefire-plugin:2.7.2
[ERROR] strategy = org.codehaus.plexus.classworlds.strategy.SelfFirstStrategy
[ERROR] urls[0] = file:/C:/Program_Files_Java/repository/org/apache/maven/plugins/maven-surefire-plugin/2.7.2/maven-surefire-plugin-2.7.2.jar
[ERROR] urls[1] = file:/C:/Program_Files_Java/repository/org/codehaus/plexus/plexus-utils/1.1/plexus-utils-1.1.jar
[ERROR] Number of foreign imports: 1
[ERROR] import: Entry[import  from realm ClassRealm[maven.api, parent: null]]
[ERROR]
org.apache.maven.surefire.booter.SurefireExecutionException
[ERROR] -> [Help 1]
[ERROR] 
```

有人对这个问题有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T10:57:45.240

更新到更新版本的[maven-surefire-plugin](http://maven.apache.org/plugins/maven-surefire-plugin/)（2.12 最新版本）。2.7.2 有点过时了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T09:52:12.553

我猜这是因为 maven3.0.3 的错误而发生的！我的问题通过升级到mave3.0.4解决了

# jquery - 转换为 jQuery

> ID：10581970
> 
> 赞同：-1
> 
> 时间：2012-05-14T10:55:19.717
> 
> 标签：jquery, asp.net

我正在学习 jquery，并想学习如何将此服务器端代码转换为 jquery 函数。任何帮助表示赞赏。

```
Protected Sub ChartstoDisplay_SelectedIndexChanged(sender As Object, e As System.EventArgs) Handles ChartstoDisplay.SelectedIndexChanged
    For i As Integer = 0 To ChartstoDisplay.Items.Count - 1
        If ChartstoDisplay.Items(i).Selected Then
            ChartstoDisplay.Items(i).Attributes.Add("style", "color:DarkGreen;")
        Else
            ChartstoDisplay.Items(i).Attributes.Add("style", """")
        End If
    Next
End Sub 
```

我试过这个无济于事。

```
function checkboxSelection() {          
    foreach (ListItem li in ChartstoDisplay.Items)
    {
        li.Attributes["class"] = "checkBoxListItems";
    }
    $('#ChartstoDisplayAll').click(function() {
    $(".checkBoxListItems").each(
        function(intIndex) {
            if ($(this).find('input').attr('checked') === true)
                    $(this).attr.add("style","color:DarkGreen;");
        });
    });
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T11:09:02.820

我假设 ChartstoDisplay 这是组合框，并且您想根据选择更改类。[jQuery更改](http://api.jquery.com/change)

```
$(document).ready(function(){
     $("ChartstoDisplay").change(function () {
           $("select option:selected").each(function () {
                    $(this).addClass("Selected") ;
                  });
           }).change();

}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T09:40:02.637

在here和其他人的帮助下，这是解决方案

```
$(document).ready(function () {
      $('#ChartstoDisplayAll').change(
          function () {
              if ($('#ChartstoDisplayAll').is(':checked')) {
                  $(this).next().addClass("selected");
                  $('#buttons').addClass("buttonsshow").removeClass('buttonshide');
                  $("#cbxArea input[type=checkbox]").each(function () {
                      $(this).prop("checked", true);
                      $(this).siblings("label").toggleClass("selected");
                  });
              } else {
                  $('#buttons').addClass("buttonshide").removeClass('buttonsshow');
                  $(this).next().removeClass("selected");
                  $("#cbxArea input[type=checkbox]").each(function () {
                      $(this).prop("checked", false);
                      $(this).siblings("label").removeClass("selected");
                  });
              }
          });
  }); 
```

# ruby-on-rails - 在服务器（Node.js 和 Rails）和客户端上运行 Backbone 进行复杂验证是否明智？

> ID：10581972
> 
> 赞同：3
> 
> 时间：2012-05-14T10:55:49.423
> 
> 标签：ruby-on-rails, node.js, backbone.js

这很冗长，如果不符合当地习俗，我深表歉意。

我正在为 Windows 应用程序编写一个 Web 替代程序，该应用程序用于在消防站之间移动消防员以满足技能要求、进入病假、从服务中撤出救火车等等。Rails 是理想的后端，但我很快意识到我需要一个客户端框架并选择了 Backbone.js。

一次只有一个用户使用它，所以我不必考虑让客户端保持同步。

我已经实现了大部分应用程序并且运行良好。不过，我一直在避免面临一个重大缺点：服务器端验证。我有各种客户端程序，确保无法通过界面进行无效更新；例如，用户不能将今天不工作的人转移到另一个站点。但是没有什么可以阻止恶意用户在 UI 之外创建记录并将其保存到服务器，因此需要进行服务器端验证。

客户端加载接收所有今天的相关记录并处理它们。创建新记录时，将其发送到服务器，如果保存成功，则在客户端进行处理。

确定今天谁在工作的过程很复杂：某人可能被安排工作，但已经去度假，然后被叫进来，然后被送回家生病。在 Ruby/Rails 中解开服务器上的所有这些（*每次负载*？！）似乎是业务逻辑的不幸重复。在涉及根据车站短缺和工会规则计算谁将被临时提升到更高级别的特定情况下，它也会产生大量开销，这可能意味着在每次提升执行时一遍又一遍地重新加载和处理几乎所有今天的数据。

所以，我想，我拥有构建对象模型并限制可以创建哪些模型的所有 Backbone 基础设施，为什么不在服务器端也使用它呢？

这是我的不确定性：

我应该放弃 Rails 并只使用 Node.js 或其他在服务器上运行 Backbone 的方式吗？

或者我可以在 Rails 旁边运行 Node.js 吗？当用户打开应用程序时，我可以将相同的数据提供给浏览器和 Node，Rails 将与服务器端 Backbone 进行检查，以确保提议的新对象在保存并将其返回给浏览器之前是有效的。

一个工厂就是 Rails 在这个应用程序中的根深蒂固。用于创建/删除更改的服务器端 Ruby 并不多，但我制作了一种适配层来加载数据以补偿遗留数据库模型。Rails 主要只提供 JSON、CSS、Javascript 和模板资产。我确实有很多 Cucumber 功能，但也许只有数据创建功能需要更新？

哇！所以，我正在寻找保证：像[这个答案](https://stackoverflow.com/a/8307526/760389)中建议的那样，在服务器上同时运行 Rails 和 Node 并进行某种[进程间通信](https://stackoverflow.com/questions/9352786/how-to-structure-communication-between-nodejs-server-and-rails)是否合理？还是 Rails 的用处缩水了这么多（它几乎*是*[那个答案](https://stackoverflow.com/a/8307526/760389)中提到的单页应用程序），以至于我应该完全摆脱它并遭受对 Node 环境的一些重写？

谢谢阅读。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T13:07:08.190

听起来您不太担心[并发性](http://www.slideshare.net/pgriess/nodejs-concurrency)尽可能多地推送数据，这两个平台都完全有能力执行。如果您现在对 Ruby 代码进行了大量投资，并且没有人抱怨它的使用，那么可能会担心什么？如果您只想使用 Node 进行推送和通过堆栈使用 javascript 的奇异性，那么将代码移到它可能是值得的。从您的评论中，我真的觉得这更多是关于您感兴趣的内容，但您必须支持选择的语言。如果您是团队中唯一的人，那么仅仅因为它很有趣就很容易陷入对节点的重构。只是回到抱怨更多的人，你还是客户。总结一下：Node 让您在代码库中转向单一语言，但您必须担心服务器上的 javascript 当前存在哪些陷阱。

# php - MySQL：使用准备好的语句从表中删除两列

> ID：10581975
> 
> 赞同：0
> 
> 时间：2012-05-14T10:56:03.340
> 
> 标签：php, mysql, prepared-statement

我正在尝试更新两列而不删除整行。这是我正在使用的：

```
$sql='update users set token='',timestamp='' where token=?';
   $stmt=$db_con->stmt_init();
   $stmt->prepare($sql_3);
   $stmt->bind_param('s',$token);
   $stmt->execute(); 
```

但是，它给了我这个错误：T_CONSTANT_ENCAPSED_STRING。现在，当我通过 MySQL CLI 使用它时，查询工作正常，我该`update users set token='',timestamp='' where token='blahblah';`如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T10:58:01.497

用这个

```
$sql="update users set token='',timestamp='' where token=?"; 
```

您可以在此处找到更多信息如何转义字符串。
[http://php.net/manual/en/language.types.string.php](http://php.net/manual/en/language.types.string.php)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-14T10:57:35.817

你应该使用。

```
$sql="update users set token='',timestamp='' where token=?"; 
```

注意字符串开头和结尾的双引号 (")。

因为您在字符串中使用了多个单引号，所以 PHP 不理解这一点，并且会抛出错误。你需要告诉 php 转义引号。你可以通过两种方式做到这一点。

1) 通过在引号前使用 PHP 的`\`转义字符。

```
'update users set token=\'\',timestamp=\'\' where token=?'; 
```

2）对字符串使用双引号而不是单引号。

```
"update users set token=\'\',timestamp=\'\' where token=?"; 
```

两者都应该工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-14T11:02:24.883

在这里我想通知您，由于查询是单引号，并且您在查询字符串中多次使用单引号。PHP 将接受从第一个引号到下一个引号的字符串，这就是您收到错误但在命令行中不会产生错误的原因

```
$sql='update users set token='',timestamp='' where token=?'; to
$sql="update users set token='',timestamp='' where token=?"; 
```

# ruby-on-rails - 使用不同服务器时的 Rails 3 区域设置切换

> ID：10581976
> 
> 赞同：2
> 
> 时间：2012-05-14T10:56:04.313
> 
> 标签：ruby-on-rails, internationalization, webrick, unicorn

我有一个`default_locale`设置为.Rails 3.2.3 的应用程序`:nl`。当我使用 Thin 或 Unicorn 启动应用程序时，应用程序的区域设置为`:en`. 当我使用 Webrick 时，区域设置正确设置为`:nl`.

此更改是由更新多个第三方 gem 的提交触发的，尽管我无法特别挑出任何一个 gem 升级——我可以单独反转它们中的每一个并获得相同的结果。但是，当我检查有问题的提交的父级时，一切都很好。

当我在生产模式下在远程服务器上运行该应用程序时，一切正常，因此它似乎在我的机器上。

我已经删除了每个已安装的 gem 并重新安装了它们，这没有任何区别。

有谁知道什么可能触发这种行为？尤其是为什么使用 webrick 或 unicorn 会有所作为？

**编辑**：我已经确定了通过将 Draper 从 0.11 升级到 0.12 来触发的错误（[Github 上的问题](https://github.com/jcasimir/draper/issues/202)）。不知道是不是也是这个原因。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T13:06:43.007

我设法将此问题归结为我自己的 Rails 应用程序中的一个不良做法，该做法通过升级 Draper gem 导致了一个错误。[Draper 文档中](https://github.com/jcasimir/draper#a-note-on-rails-configuration)有完整的解释。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T11:19:44.183

这个问题在我被“active_admin”gem 触发之前就发生过，你可能想使用早期版本来防止这种情况，我真的不知道是哪个，所以你可以稍微玩一下。

另一种选择是在 before_filter 中设置 active_admin 语言环境，

```
config.before_filter :set_admin_locale 
```

而 set_admin_locale 在 application_controller 中：

```
def set_admin_locale
  I18n.locale = :nl
end 
```

希望它有所帮助

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-14T11:01:14.473

[http://labs.revelationglobal.com/2009/11/13/unicorn_and_i18n.html](http://labs.revelationglobal.com/2009/11/13/unicorn_and_i18n.html)

# java - eclipse galileo的java反编译器插件URL

> ID：10581977
> 
> 赞同：2
> 
> 时间：2012-05-14T10:56:07.720
> 
> 标签：java, eclipse, eclipse-plugin

我正在使用 Eclipse 伽利略。我想将 java 反编译器添加到我的 Eclipse 中。我尝试了多个 URL，但它们与 galileo 不兼容。

请分享 Eclipse galileo 的反编译器 URL 位置。

谢谢，
阿尼尔库马尔 C

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T18:46:10.307

我一直在使用[Java Decompiler](http://java.decompiler.free.fr) JD-GUI，它是一个独立的应用程序，他们确实有一个[JD-Eclipse](http://java.decompiler.free.fr/?q=jdeclipse)版本。如果你喜欢，你可以试试。该工具非常基本，但可以完成它应该做的事情。

# wpf - 从网格中删除的内存中删除按钮

> ID：10581982
> 
> 赞同：0
> 
> 时间：2012-05-14T10:56:14.743
> 
> 标签：wpf, memory, button

在我的应用程序中，我在运行时生成多个按钮并将其添加到网格中，如下所示

```
 for (int i = 0; i < ListOfMainCategories.Count; i++)
            {
                clsMainCategory tempCat = (clsMainCategory)ListOfMainCategories[i];
                ButtonMainMenuCat btn = CreateMainButton(tempCat.CatTitle, i);
                btn.Margin = new Thickness(0, 1, 0, 1); 
                btn.TabIndex = TabIndexNo;
                if (i == 0)
                {
                    buttonHomeMenu = btn;
                }
                btn.AddHandler(ButtonMainMenuSubSubCat.GotKeyboardFocusEvent, new RoutedEventHandler(ButtonMainMenuGotFocus), handledEventsToo: false);
                // stackTableViewMainMenu.Children.Add(btn);
                Grid.SetRow(btn, 1);
                Grid.SetColumn(btn, i + 1);
                gridHeader.Children.Add(btn);

            } 
```

在特定事件之后，我从 Grid 中删除了所有这些按钮。

```
gridHeader.Children.RemoveRange(0, gridHeader.Children.Count); 
```

在这里，我认为我还需要从内存中删除或处置或卸载这些按钮。那么我该怎么做呢？请建议

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T11:06:20.330

Yuo 不能处理经典意义上的按钮，因为没有东西可以处理。您在这里处理托管代码。只要没有引用，内存分配就会被垃圾收集器清除。在上面的代码中，您通过路由事件处理程序保留对按钮的引用，因此`btn.RemoveHandler`在将其从网格中删除之前调用它。

您可以在此处查看有关 WeakEvent 模式的 MSDN 指南：http: [//msdn.microsoft.com/en-us/library/aa970850](http://msdn.microsoft.com/en-us/library/aa970850)

# java - KeyEvent 不适用于 JTextArea，但适用于包含 JTextArea 的 JFrame

> ID：10581985
> 
> 赞同：2
> 
> 时间：2012-05-14T10:56:26.500
> 
> 标签：java, swing, jtextarea, keylistener

我搜索了答案，但我发现的只是解决方法，而不是原因，所以我问这个问题：

我是 GUI 编程新手。在练习一些关于关键事件处理的代码时，我遇到了一个在 JFrame 中包含 JTextArea 的示例。keylistener 接口由 Frame 本身实现。当按下某个键时，一些相关信息会根据按下的键显示在文本区域中。代码工作正常。

但我尝试采取不同的方式，并尝试将 JTextarea 注册到 keyListenr 而不是 JFrame。但是，这不会响应关键事件。这是下面的代码。请帮忙。

```
public class KeyDemoFrame extends JFrame
{
private String line1 = "";
private String line2 = "";
private String line3 = "";
private JTextArea textArea;

public KeyDemoFrame()
{
    super("Demonstrating Keystrong events");
    textArea = new JTextArea(10,21);
    textArea.setText("Press any key on keyboard");
    textArea.setEnabled(false);
    textArea.setDisabledTextColor(Color.BLACK);
    add(textArea);
    //addKeyListener( this );

    KeyEventHandler keyStrokeHandler = new KeyEventHandler();
    addKeyListener(keyStrokeHandler);
}   
    private class KeyEventHandler implements KeyListener
    {
        public void keyPressed(KeyEvent event)
        {
            line1 = String.format("Your pressed the %s key", KeyEvent.getKeyText(event.getKeyCode()));
            setLines2and3(event);

        }
        public void keyReleased(KeyEvent event)
        {
            line1 = String.format("You released %s key", KeyEvent.getKeyText(event.getKeyCode()));
            setLines2and3(event);
        }
        public void keyTyped(KeyEvent event)
        {
            line1 = String.format("You typed %s key",KeyEvent.getKeyText(event.getKeyCode()));
            setLines2and3(event);
        }
        private void setLines2and3(KeyEvent event)
        {
            line2 = String.format("This key is %san action key", (event.isActionKey()?"":"not "));
            String temp = KeyEvent.getKeyModifiersText( event.getModifiers() );
            line3 = String.format( "Modifier keys pressed: %s",( temp.equals( "" ) ? "none" : temp ) );
            textArea.setText( String.format( "%s\n%s\n%s\n",line1, line2, line3 ) );
        }
    } 
```

}

```
import javax.swing.JFrame;

public class KeyDemo
{
public static void main(String[] args)
{
    KeyDemoFrame keyDemoFrame = new KeyDemoFrame();
    keyDemoFrame.setSize(300, 100);
    keyDemoFrame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    keyDemoFrame.setVisible(true);
}
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T10:58:06.643

*   对于[JTextComponents](http://docs.oracle.com/javase/tutorial/uiswing/components/text.html) ，仅使用[DocumentListener](http://docs.oracle.com/javase/tutorial/uiswing/events/documentlistener.html)

*   如果要[过滤或替换某些字符，请使用 Document / DocumentFilter](https://stackoverflow.com/a/9692926/714968)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-14T11:03:17.910

这种行为的原因是`JTextComponent`处理`KeyEvent`. 正如 mKorbel 已经指出的那样，您应该使用 a `DocumentListener`for `JTextComponent`s

# javascript - jQuery prettyPhoto：点击事件不起作用

> ID：10581992
> 
> 赞同：0
> 
> 时间：2012-05-14T10:57:27.007
> 
> 标签：javascript, jquery, jquery-ui, lightbox, prettyphoto

我一直在使用 jQuery [prettyPhoto](http://www.no-margin-for-errors.com/projects/prettyphoto-jquery-lightbox-clone/)插件来显示内联 html 内容。此内容有一个链接，应该关闭 prettyPhoto 弹出窗口并调用自定义脚本。弹出窗口工作正常，但不知何故链接的点击事件没有被触发。这是代码。

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html lang='en' xml:lang='en' xmlns='http://www.w3.org/1999/xhtml'>
<head>
    <meta content='text/html; charset=utf-8' http-equiv='Content-Type' />
    <title>Development</title>
    <script src="js/jquery-1.4.4.min.js" type="text/javascript"></script>
    <script src="js/jquery.prettyPhoto.js" type="text/javascript"></script>
    <link rel="stylesheet" href="css/prettyPhoto.css" type="text/css"/>
    <script type="text/javascript" charset="utf-8">
        $(document).ready(function(){
            $("#closeme").click( function (e){
                e.preventDefault();
                alert("closing popup");
                $.prettyPhoto().close();
                alert("do some othe stuff");
            });

            $("a[rel^='prettyPhoto']").prettyPhoto();

        });
    </script>
</head>
<body>
<a href="#inline-1" rel="prettyPhoto" >popop</a>
    <div id="inline-1" style="display:none;">
        <p>This is inline content opened in prettyPhoto.</p>
        <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.</p>
        <a href="#" id="closeme">close</a>
    </div>
</body>
</html> 
```

如果我删除`$("a[rel^='prettyPhoto']").prettyPhoto();`然后点击内联 html 链接上的事件工作正常。

有人可以帮我找出问题并解决吗？

谢谢，阿米特帕特尔

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T11:16:51.490

修改您的代码如下：

```
$(function () {
    $("a[rel^='prettyPhoto']").prettyPhoto();
    $('#closeme').live('click', function() {
        $.prettyPhoto.close();
        return false;
    });
}); 
```

# python - Python实现类似指针的行为

> ID：10581994
> 
> 赞同：0
> 
> 时间：2012-05-14T10:57:28.080
> 
> 标签：python, jython

我必须编写一个测试模块并具有 c++-Background。也就是说，我知道python中没有指针，但我如何实现以下目标：

我有一个测试方法，它看起来像这样的伪代码：

```
def check(self,obj,prop,value):
    if obj.prop <> value:  #this does not work, 
                           #getattr does not work either, (objects has no such method (interpreter output) 
                           #I am working with objects from InCyte's python interface
                           #the supplied findProp method does not do either (i get 
                           #None for objects I can access on the shell with obj.prop
                           #and yes I supply the method with a string 'prop'
        if self._autoadjust:
            print("Adjusting prop from x to y")
            obj.prop = value #setattr does not work, see above
        else:
            print("Warning Value != expected value for obj") 
```

因为我想在不同的函数中检查许多不同的对象，所以我希望能够保留检查方法。

一般来说，如何确保函数影响传递的对象并且不创建副本？

```
myobj.size=5
resize(myobj,10)
print myobj.size  #jython =python2.5 => print is not a function 
```

我无法调整成员方法的大小，因为`myobj`实现遥不可及，而且我不想`myobj=resize(myobj, 10)`到处打字

另外，我怎样才能使我可以访问传递对象和属性名称的函数中的那些属性？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-14T11:02:33.540

getattr 不是一种方法，您需要像这样调用它

```
getattr(obj, prop) 
```

同样 setattr 是这样调用的

```
setattr(obj, prop, value) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-14T11:04:42.823

> 一般来说，我如何确保函数影响传递的对象并且不创建副本？

Python 不是 C++，除非你明确地这样做，否则你永远不会创建副本。

> 我无法调整成员方法的大小，因为 myobj 实现遥不可及，而且我不想每次都键入 myobj=resize(myobj,10)

我不明白？为什么要遥不可及？如果你有实例，你可以调用它的方法。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-14T11:20:58.053

> 一般来说，如何确保函数影响传递的对象

通过在影响传入对象的函数内部编写代码，而不是*重新分配给 name*。

> 并且不创建副本？

*除非您要求，否则永远不会创建*副本。

Python“变量”是事物的名称。他们不存储对象；它们指的是对象。但是，与 C++ 引用不同，它们可以被用来引用其他东西。

当你写

```
def change(parameter):
    parameter = 42

x = 23
change(x)
# x is still 23 
```

x 仍然是 23 的原因**不是**因为复制了，而是因为**没有**复制。原因是，在函数内部，`parameter`以传入的整数对象的名称开始`23`，然后该行`parameter = 42`导致`parameter`不再是 的名称`23`，而是开始成为 的名称`42`。

如果你这样做

```
def change(parameter):
    parameter.append(42)

x = [23]
change(x)
# now x is [23, 42] 
```

传入的参数会发生变化，因为`.append`在列表上会更改实际的列表对象。

> 我无法创建`resize`成员方法，因为`myobj`无法实现

那**没关系**。当 Python 编译时，没有类型检查步骤，也没有查找插入调用的方法的实现的步骤。所有这些都是在代码实际运行时处理的。代码将直截了当`myobj.resize()`，寻找当前引用`resize`的任何对象的属性`myobj`（毕竟，它甚至无法提前知道它正在处理什么样的对象；变量在 Python 中没有类型，而是对象做），并尝试调用它（如果（a）对象没有那个属性；（b）这个属性实际上不是一个方法或其他类型的函数，则抛出适当的异常）。

> 另外，我怎样才能使我可以访问传递对象和属性名称的函数中的那些属性？/`getattr`也不起作用

如果你正确使用它，它肯定会起作用。它不是一种方法；它是一个内置的顶级函数。与`setattr`.

# cvs - 提交更改后如何恢复从 CVS 中删除的目录？

> ID：10581998
> 
> 赞同：5
> 
> 时间：2012-05-14T10:57:58.790
> 
> 标签：cvs

使用`cvs remove <dir>`and删除目录后`cvs commit`，是否有一种简单的方法可以撤消更改 - 恢复我的工作副本和存储库中的目录？到目前为止，如果我还没有完成提交，或者它是一个文件而不是一个目录，我只能找到一些有用的建议。如果可能的话，我想保留目录内容的历史记录。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-14T20:43:17.160

（在我想出来的时候回答我自己的问题。）

要在提交删除后恢复已删除的目录：

```
cvs update -d -R -j <rev2> -j <rev1> <dir> 
```

在哪里：

`<rev2>`是提交删除导致的修订。

`<rev1>`是 rev2 之前的版本。

`<dir>`是被删除的目录。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T11:07:24.550

假设您提交了一个文件，但这最终破坏了一些可怕的东西。以下是撤消提交的方法：

从提交后获取版本号。您可以在文件中使用 $Id$ 标记或 cvs 状态。假设新版本是1.5。从提交之前获取版本号。通常，这将比当前版本低一个。假设旧版本是 1.4。现在这样做：

```
cvs update -j 1.5 -j 1.4 filename 
```

cvs commit filename 上面是一个合并的例子。您已经要求 cvs 获取版本 1.5 和 1.4 之间的差异并将它们应用到您的工作副本。版本号的顺序很重要 - 将其视为删除更改或在版本历史记录中倒退。