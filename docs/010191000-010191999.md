# StackOverflow 问答 10191000-10191999

# string - JSTL 1.0 字符串函数

> ID：10191001
> 
> 赞同：1
> 
> 时间：2012-04-17T12:12:14.817
> 
> 标签：string, function, jstl

我正在尝试使用一些字符串函数，例如修剪或`concat`使用 JSTL。我尝试了以下。

我尝试添加`<%@ taglib prefix="fn" uri="http://java.sun.com/jsp/jstl/functions" %>`，但最终出现错误。我认为这适用于其他 JSTL 版本，如 1.2 或 1.1

我只需要知道如何在 JSTL 1.0 中使用字符串函数

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T13:08:13.743

`/jsp`JSTL 1.0在 taglib URI中没有该部分。删除那部分。

```
<%@ taglib prefix="fn" uri="http://java.sun.com/jstl/functions" %> 
```

### 也可以看看：

*   [我们的 JSTL 标签 wiki 页面](https://stackoverflow.com/tags/jstl/info)

* * *

**与具体问题*无关***，**[JSTL 函数](http://download.oracle.com/javaee/5/jstl/1.1/docs/tlddocs/fn/tld-summary.html)没有和。您仍然需要为您的具体问题寻找不同的解决方案。例如，自定义 EL 函数。*`trim()``concat()`***

# iphone - Objective-C - 检测用户何时更改应用程序的通知设置

> ID：10191006
> 
> 赞同：16
> 
> 时间：2012-04-17T12:12:27.773
> 
> 标签：iphone, objective-c, push-notification, apple-push-notifications, appsettings

我需要**始终**知道用户在推送通知设置中选择了哪些选项。
（选项是 - 警报、声音和徽章）

因此，当我的应用启动时，我会致电：

```
UIRemoteNotificationType types = [[UIApplication sharedApplication] enabledRemoteNotificationTypes]; 
```

并检测用户选择了什么。

但是如何检测用户是否在应用程序生命周期的后期更改了设置？
当此设置发生更改时，是否有一些委托方法被调用？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-04-17T12:24:55.310

没有代表。您需要定期查询该`UIApplication`属性`enabledRemoteNotificationTypes`，例如在`applicationDidBecomeActive:`.

有关详细信息，请查看以下答案：

[在 iPhone 上确定用户是否启用了推送通知](https://stackoverflow.com/questions/1535403/determine-on-iphone-if-user-has-enabled-push-notifications)

[在锁定屏幕中查看并启用RemoteNotificationTypes - iOS5](https://stackoverflow.com/questions/9276154/view-in-lock-screen-and-enabledremotenotificationtypes-ios5)

**编辑：**
如果您需要重置推送通知设置和权限警报，请查看[Apple 技术说明 TN2265](https://developer.apple.com/library/archive/technotes/tn2265/_index.html)。在*“重置 iOS 上的推送通知权限警报”*部分中，他们解释了如何在 iOS 上重置设置。但是，许多开发人员抱怨该程序不起作用。不确定[此链接](https://devforums.apple.com/message/648200#648200)是否有效，您需要访问 Apple 论坛，但它是有关此确切问题的主题之一。

我自己想知道苹果是否已经删除了 iOS 5.1 中的权限对话框。否则他们为什么会要求应用程序显示警报？根据[2016 年 6 月之前的 AppStore 审核指南](https://web.archive.org/web/20160604100419/https://developer.apple.com/app-store/review/guidelines/)：

> **5.3**未经用户同意就发送推送通知的应用程序将被拒绝

例如，Path（应用程序）要求用户在唱歌过程中选择加入推送通知，而不是在应用程序第一次启动时。

不确定提示的目的是什么，因为应用程序无法查询通知设置的状态。特别是，应用程序可以检查哪些通知类型（使用`enabledRemoteNotificationTypes`）已启用，但不能检查特定应用程序的推送通知是否已启用或禁用（顶部的通知中心 ON/OFF 开关）。至少这是 iOS 5.1 中的行为。即使用户禁用了该应用程序的通知，该应用程序仍然可以注册推送通知（使用`registerForRemoteNotificationTypes`）并且将收到一个 APNS 令牌。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-04-17T12:16:01.310

当您的应用程序变得活跃时检查它，而不仅仅是在启动时。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-01-03T12:50:19.483

这是一个通过 UrbanAirship 实现 Push 的例子。每次当用户选择加入/选择退出推送后委托触发时，使用下面的方法，您可以检查（是/否）。

如果不使用 UrbanAirship，也可以使用 UIApplication 委托来实现。

```
- (void)registrationSucceededForChannelID:(NSString )channelID deviceToken:(NSString )deviceToken
    {
        NSLog(@"registrationSucceededForChannelID : %@",[self appRegisterForPushNotification]?@"YES":@"NO");
    }

    - (BOOL)appRegisterForPushNotification {
        if ([[UIApplication sharedApplication] respondsToSelector:@selector(currentUserNotificationSettings)]) {
            UIUserNotificationType types = [[[UIApplication sharedApplication] currentUserNotificationSettings] types];
            return ((types & UIUserNotificationTypeAlert) || (types & UIUserNotificationTypeSound));
        }
        return NO;
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-03-03T06:48:29.377

除了答案[@Nick Bull](https://stackoverflow.com/users/685730/nick-bull) 订阅您敏感的 ViewController 以 `UIApplicationWillEnterForegroundNotification` 在用户完成设置工作并返回您的应用程序时进行监听：

```
[[NSNotificationCenter defaultCenter] addObserver: self
                                         selector: @selector(appEnterForeground:)
                                             name: UIApplicationWillEnterForegroundNotification object:nil]; 
```

Swift 变体在这里：[如何检查用户是否从设置中返回](https://stackoverflow.com/questions/39464439/how-to-check-that-user-is-back-from-settings)

# android - 在android中从sdcard中删除文件

> ID：10191015
> 
> 赞同：3
> 
> 时间：2012-04-17T12:13:03.670
> 
> 标签：android, file, sd-card, delete-file

我正在制作一个应用程序，我必须在其中删除 sdcard 中最近添加的 mp3 文件。歌曲的保存格式为：

```
Songhello_17_26.amr 
```

其中**17_26**是添加歌曲的时间。谁能帮助我如何删除 SD 卡中最近添加的文件。我的意思是说我要删除时间意味着应该删除最新添加的文件。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-17T12:15:51.600

正如这里所说[，](https://stackoverflow.com/questions/203030/best-way-to-list-files-in-java-sorted-by-date-modified)您不能直接这样做，您首先需要获取文件列表、、、`File.listFiles()`和删除。`Comparator``File.lastModified()``Arrays.sort()`

编辑：

```
File f = new File(path);

File [] files = f.listFiles();

Arrays.sort( files, new Comparator()
{
    public int compare(Object o1, Object o2) {

        if (((File)o1).lastModified() > ((File)o2).lastModified()) {
            return -1;
        } else if (((File)o1).lastModified() < ((File)o2).lastModified()) {
            return +1;
        } else {
            return 0;
        }
    }

}); 
```

要删除最新的：

```
 files[0].delete(); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-17T12:41:25.083

**试试这个方法：

```
public static boolean deleteDirectory(File path) {
    // TODO Auto-generated method stub
    if( path.exists() ) {
        File[] files = path.listFiles();
        for(int i=0; i<files.length; i++) {
    enter code here        if(files[i].isDirectory()) {
                deleteDirectory(files[i]);
            }
            else {
                files[i].delete();
            }
        }
    }
    return(path.delete());
} 
```

或者您可以使用以下代码从 sd-card 中删除文件：

`File folder = Environment.getExternalStorageDirectory(); String fileName = folder.getPath() + "/pass/hello.pdf";` 和

```
 String fileName = Environment.getExternalStorageDirectory() + "/pass/hello.pdf";** 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-17T12:16:34.737

尝试这个

```
 public String[] getDirectoryList(String path) {
     String[] dirListing = null;
     File dir = new File(path);
     dirListing = dir.list();

     Arrays.sort(dirListing, 0, dirListing.length);
     return dirListing;
  }

  String[]  lstFile = getDirectoryList()
 if(lstFile.length > 0){
    File file = new File(lstFile[0]);
    boolean fStatus = file.delete();

  } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-06-13T14:42:14.153

也试试这个：

```
 String root_sd = Environment.getExternalStorageDirectory().toString();
 File file = new File(path) ;       
  File list[] = file.listFiles();
    for(File f:list)
      {
     name =  file.getName();
    filestv.setText(f.getName());
    //add new files name in the list
   //  delete.setText(name ); 
```

该代码您可以看到保存在 sdcard 中的最新文件，我建议您按照本[教程](http://programondaspot.blogspot.com/2015/06/delete-latest-file-from-any-specific.html)进行操作。

# google-docs-api - 有没有办法只为图像查询 Google Documents List API？

> ID：10191027
> 
> 赞同：1
> 
> 时间：2012-04-17T12:13:42.490
> 
> 标签：google-docs-api

假设我只想检索用户上传到其 Google 文档帐户的图像。我知道可以构造一个 API 查询来专门检索特定类别的 Google 文档（例如，集合、文档、电子表格等）。

Google Docs Web 界面中有一个高级搜索选项，仅显示“图像”。我尝试了几个可能的关键字（图片等），但没有找到合适的关键字。有谁知道通过 API 执行此操作的方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T15:06:23.730

您可以使用[全文查询运算符](https://developers.google.com/google-apps/documents-list/#full_text_query_operators)来完成：

```
GET https://docs.google.com/feeds/default/private/full?v=3&q=type:image&prettyprint=true 
```

此查询使用 API 3.0 版和打印精美的响应 XML 请求所有类型为“图像”的文档。

# cakephp - 找不到 CakePHP AclExtras 插件

> ID：10191031
> 
> 赞同：0
> 
> 时间：2012-04-17T12:13:50.853
> 
> 标签：cakephp, acl

我一直在用 CakePHP 框架搞砸。我已经完成了这部分：[http](http://book.cakephp.org/2.0/en/tutorials-and-examples/simple-acl-controlled-application/part-two.html) ://book.cakephp.org/2.0/en/tutorials-and-examples/simple-acl-controlled-application/part-two.html 我已经下载了插件并放置它进入插件文件夹这是我的插件文件夹的样子（C:\xampp\htdocs\nublet\app\plugin）

> -AclExtras(DIR) -AclExtrasShell.php (FILE) --Console(DIR) ---Command(DIR) ----AclExtrasShell.php (FILE)

现在这就是我尝试运行命令时所说的内容。

```
C:\>cake AclExtras.AclExtras aco_sync

Error: Plugin AclExtras could not be found.
#0 C:\xampp\htdocs\Nublet\lib\Cake\Core\App.php(364): CakePlugin::path('AclExtra
s')
#1 C:\xampp\htdocs\Nublet\lib\Cake\Core\App.php(225): App::pluginPath('AclExtras
')
#2 C:\xampp\htdocs\Nublet\lib\Cake\Core\App.php(542): App::path('Console/Command
', 'AclExtras')
#3 [internal function]: App::load('AclExtrasShell')
#4 [internal function]: spl_autoload_call('AclExtrasShell')
#5 C:\xampp\htdocs\Nublet\lib\Cake\Console\ShellDispatcher.php(216): class_exist
s('AclExtrasShell')
#6 C:\xampp\htdocs\Nublet\lib\Cake\Console\ShellDispatcher.php(167): ShellDispat
cher->_getShell('AclExtras.AclEx...')
#7 C:\xampp\htdocs\Nublet\lib\Cake\Console\ShellDispatcher.php(69): ShellDispatc
her->dispatch()
#8 C:\xampp\htdocs\Nublet\app\Console\cake.php(33): ShellDispatcher::run(Array)
#9 {main} 
```

试过这个： [https](https://github.com/markstory/acl_extras/issues/8) ://github.com/markstory/acl_extras/issues/8 http://stackoverflow.com/questions/9887895/cakephp-2-1-authentication-aclextras-does-not-populate-acos-table

我能做些什么？

问候，伤害。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-17T14:52:02.180

在 Windows 上使用烘焙时，我发现您有时需要更具体一些。

```
C:\>cake -app "C:\xampp\htdocs\Nublet\app" AclExtras.AclExtras aco_sync 
```

您总是可以运行`cake`以查看它猜测应该使用哪些目录。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-23T18:24:47.880

@jeremyharris：

我在linux ubuntu中有同样的问题，但你的回答解决了它：

我的 cakephp 路径：/var/www/CMS/cakephp

还：

打开终端并输入代码：

`cd /var/www/CMS/cakephp/lib/Cake`

`Console/cake -app "/var/www/CMS/cakephp/app" AclExtras.AclExtras aco_sync`

# sql-server - SQL Server 2012 上的停用词与兼容性 90

> ID：10191034
> 
> 赞同：0
> 
> 时间：2012-04-17T12:14:02.677
> 
> 标签：sql-server, sql-server-2008, sql-server-2005

如何在兼容级别 90 的 SQL Server 2012 上启用停用词（干扰词）？

我无法创建全文停止列表，因为我们使用兼容级别 90。当数据库从 SQL Server 2005 升级到 SQL Server 2012 时，不再使用干扰词文件。

# ruby - 我如何将这个八球脚本转换为红宝石

> ID：10191037
> 
> 赞同：-3
> 
> 时间：2012-04-17T12:14:19.223
> 
> 标签：ruby

```
<SCRIPT LANGUAGE="JavaScript">
<!-- Begin
var answers = new Array(
"Yes.",
"No.", 
"My sources are pointing toward yes.", 
"It's possible.",
"Very unlikely.", 
"Can you repeat the question?",
"Absolutely not.", 
"Sure.",
"Ask again later."
);
function fortune() {
num = Math.round( (answers.length - 1) * Math.random());
return answers[num];
}
//  End -->
</script> 
```

然后当我调用`fortune('text')`它时，它会从数组中获取一个值

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T12:16:48.380

```
def fortune
  ["Yes.",
   "No.", 
   "My sources are pointing toward yes.", 
   "It's possible.",
   "Very unlikely.", 
   "Can you repeat the question?",
   "Absolutely not.", 
   "Sure.",
   "Ask again later."].sample
end 
```

# php - CodeIgniter 语言选择

> ID：10191040
> 
> 赞同：1
> 
> 时间：2012-04-17T12:14:34.417
> 
> 标签：php, codeigniter

我希望用户从我网站上的任何子页面中选择他的语言。存储每种用户语言的最佳解决方案是会话。

我的网站默认语言是英语，但我应该如何加载用户选择的其他语言？我想我应该这样做：

`$this->lang->load('my_language_file', $this->session->userdata('language'));`

但是这样，我必须在每个控制器中加载语言。有没有办法从全局会话中选择用户语言？所以我可以`$this->lang->line('some-message');`在我网站的每个地方使用？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-17T12:33:56.950

要么做一个

```
$CI =& get_instance();
$CI->lang->load('my_language_file', $CI->session->userdata('language')); 
```

在自定义[**帮助**](http://codeigniter.com/user_guide/general/helpers.html)程序的开头并将其[**自动加载**](http://codeigniter.com/user_guide/general/autoloader.html)到您的 config/autoload.php 中。

否则你可以通过[**hooks**](http://codeigniter.com/user_guide/general/hooks.html)来做到这一点。
基本使用

```
$CI =& get_instance();
$CI->lang->load('my_language_file', $CI->session->userdata('language')); 
```

这里也在 __construct() 内部，并且有 Hook Point `post_controller_constructor`。

这将使您在所有控制器中包含 lang 文件。但是，您要自动加载多少语言文本取决于您，因为即使只是在很小程度上也会耗尽服务器。

# libreoffice-calc - 将 LibreOffice Calc URL 转换为文本

> ID：10191045
> 
> 赞同：13
> 
> 时间：2012-04-17T12:14:51.460
> 
> 标签：libreoffice-calc

我有一个 LibreOffice 3 电子表格（在 Ubuntu 11.04 上），其中有一列包含数百个超链接，这些超链接仅显示为“链接”。

我需要将它们转换为纯文本，或者更糟糕的是显示超链接而不是文本“链接”的超链接。是否有一个函数可以做到这一点，或者可能有一个方法可以在整个电子表格中做到这一点？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-04-23T11:22:50.993

您可以使用宏。

我唯一测试过[的是这个](http://www.oooforum.org/forum/viewtopic.phtml?t=32909)。

如果您没有使用宏的经验，以下是所涉及的步骤：

1.  复制该链接提供的宏。
2.  按`ALT + F11`打开您的宏管理器。
3.  在“我的宏”下选择“模块 1”并点击“编辑”
4.  粘贴您复制的宏代码。
5.  保存并关闭您的宏

现在，您可以访问一个名为“CELL_URL”的宏，您可以按如下方式使用它：

假设您的链接从“SHEET 1”上的“CELL A1”开始，我建议您转到新工作表，并在第一个单元格中输入：`=CELL_URL("SHEET 1",ROW(),COLUMN())`。然后，您可以根据数据的维度拖动该公式。

或者，另一个示例，假设您有一个包含 20 个链接的列，从“SHEET 1”上的“CELL B5”开始，并且您希望 URL 位于它旁边的列中（因此，从“CELL C5 ")，在“CELL C5”中，输入公式如下：`=CELL_URL("SHEET 1", ROW(), COLUMN()-1)`. *注意* `-1`. 这告诉函数从比当前位置少一列的单元格中提取 URL。然后，将公式从“CELL C5”拖到“CELL C24”，链接结束。

* * *

更新：

该 URL 似乎无法解析。幸运的是，有 WayBack 机器：[http ://web.archive.org/web/20120713222701/http://www.oooforum.org/forum/viewtopic.phtml?t=32909](http://web.archive.org/web/20120713222701/http://www.oooforum.org/forum/viewtopic.phtml?t=32909)

我还将宏作为要点发布：[https ://gist.github.com/mrdwab/14c9e81dfbc867351bd3](https://gist.github.com/mrdwab/14c9e81dfbc867351bd3)

`CELL_URL()`正如评论中所指出的，您在使用该功能时可能需要将“SHEET 1”更改为“Sheet1” 。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2017-03-27T09:01:07.927

这是另一种方式，使用 Unix 命令行工具 - 完全绕过 Calc。

首先，解压缩您拥有的 .ods 作为 zip；例子：

```
$ cd /tmp
$ mkdir my_ods_unpack
$ cd my_ods_unpack
$ unzip /path/to/my.ods 
```

解压后，你可以查看`./content.xml`，发现所有的 URL 都用双引号括起来`"`；因此我们可以编写以下`grep`行：

```
$ grep -ro 'http[^"]*' .
./meta.xml:http://www.w3.org/1999/xlink
./meta.xml:http://purl.org/dc/elements/1.1/
./meta.xml:http://openoffice.org/2004/office
... 
```

...一旦到达`./content.xml`，您应该开始看到已放入文档中的 URL。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2022-01-13T19:33:31.263

如果您想将 URL 嵌入到 office calc 中的单元格中，您可以按如下方式访问它：

```
cell1.TextFields.getByIndex(0).URL 
```

cell1 是使用 UNO 获得的单元格对象。

# wcf - 具有 2 个服务的 WCF 主机 - 几个问题

> ID：10191047
> 
> 赞同：0
> 
> 时间：2012-04-17T12:14:56.950
> 
> 标签：wcf, windows-services

我的想法是拥有一个将托管 2 个 WCF 服务的 Windows 服务。

**WCF 服务 A**将用于希望访问数据库并对其执行 CRUD 操作的客户端。它将公开诸如“GetProducts”和“AddProduct”之类的操作。

**WCF 服务 B**将用于 WPF 'admin' 控制台，它将连接到服务，并且能够查看哪些客户端应用程序连接到**WCF 服务 A**，并且它还将公开用于断开客户端与服务的连接的操作，以及查看客户执行了哪些操作。

我的问题是：

**问题 1）**为了维护连接到**WCF 服务 A**的客户端列表- 我可能需要在服务 A 的实例中包含客户端名称的某种列表（每个客户端都有一个唯一的名称）。这是否意味着我需要使用“单实例”模式创建**WCF 服务 A**（否则每个客户端都会生成它自己的服务实例，其中包含只有一个客户端的客户端列表）。**或者是将客户端列表放在所有实例都将使用的WCF 服务 A**之外的某个静态类中的更好方法（可能使用锁？）

**问题 2)**是否有任何聪明的方法可以在某个“管理器”容器中设计这两种服务？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T15:33:01.210

您可以为两个合同（标准和管理员）使用具有两个端点的单个服务。您可以对两个端点应用不同的安全性。

如果您将当前连接的用户列表保留为单例，则可以从任一端点更新和读取它，而无需使用 InstanceContextMode 来控制它。请记住，您很可能会有多个线程尝试操作单例，因此您必须确保在访问它时使用线程同步

# javascript - 未找到 socket.io.js

> ID：10191048
> 
> 赞同：45
> 
> 时间：2012-04-17T12:15:03.753
> 
> 标签：javascript, node.js, express, socket.io

由于某种原因，我的节点服务器无法为路由提供服务`/socket.io/socket.io.js`，我总是收到 404 错误。
我尝试编译不同的节点版本（*当前是 0.6.13，它也在服务器上运行，它实际工作的地方*）。尝试调用socket.io.js时，
我从app.js得到并且没有错误。`info: socket.io started`

我从 localhost 和端口 8000 尝试它，我使用 express 框架

这是来自 app.js 的代码：

```
var express = require('express')
  , app = require('express').createServer()
  , io = require('socket.io').listen(app, { log: true });

app.listen(8000);

app.configure(function() {
    app.use(express.static(__dirname + '/public'));
    app.use(express.errorHandler({ dumpExceptions: true, showStack: true }));
});

io.sockets.on('connection', function (socket) {
   // all other stuff here 
```

* * *

## 回答 #1

> 赞同：95
> 
> 时间：2012-04-17T13:20:31.917

请检查您的 Express 版本。Express 最近更新到 3.0alpha，其中 API 已更改。如果是 3.0，您可以将代码更改为如下所示：

```
var express = require('express')
  , http = require('http');

var app = express();
var server = http.createServer(app);
var io = require('socket.io').listen(server);

...

server.listen(8000); 
```

与连接相同的问题：[https ://github.com/senchalabs/connect/issues/500#issuecomment-4620773](https://github.com/senchalabs/connect/issues/500#issuecomment-4620773)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-01-15T15:57:36.627

**与 Express 3 Web 框架一起使用**：（[来自 socket.io](http://socket.io/#how-to-use)）

*> Express 3 要求您首先实例化 a`http.Server`以将 socket.io 附加到：*

含义 - (1) 你必须创建一个服务器实例：

```
var app = express();
var http = require('http').createServer(app); 
```

（2）将它与socket.io耦合：

```
var io = require('socket.io');
io.listen(http); 
```

然后只有 - (3) 让服务器监听：

```
http.listen(8080); 
```

**确保您遵守此订单！**

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-03T06:33:41.817

安装节点 0.8.1 后，我遇到了同样的问题。我刚刚删除了项目文件夹中的 node_modules 映射并重新安装了 express/socket.io。之后，它再次与您问题中的代码一起正常工作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-17T12:48:29.513

也许这可以帮助你，在我的 Ubuntu 11.10 上我没有正确设置`NODE_PATH`变量，如果你在 linux/mac 上尝试将下面的行添加到你的 .bashrc/.zshrc 文件中。

```
export NODE_PATH=/usr/lib/node_modules:$NODE_PATH 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-02-03T13:10:29.610

**在您的存储库中安装 Socket.io：**

```
npm install socket.io --save 
```

**之后，配置服务器：**

```
 var express = require('express')
   var app     = express();
   var server  = require('http').createServer(app);
   var io      = require('socket.io').listen(server);

   server.listen(app.get('80')); // not 'app.listen' 
```

**在您的档案`HTML/EJS`或您想要的其他档案中，添加：**

```
<script src="/socket.io/socket.io.js"></script> 
```

检查是否适用于`Console`（Chrome/Mozilla 等）。

**在我的示例中，我使用 Chrome（Ctrl + shift + I）：**

[![在此处输入图像描述](../Images/3643a9fc7288e2f421fb418e9d56132b.png)](https://i.stack.imgur.com/zlKbA.jpg)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2022-03-06T01:07:26.813

默认端口 3000 对我不起作用，即使它没有被使用。它失败并出现 404 错误`/socket.io/socket.io.js`（并且没有其他通知或解释）。尝试使用您确定未使用的其他端口，它可能对您有用。

# c++ - 如何解析来自 EDID 的数字数据

> ID：10191049
> 
> 赞同：0
> 
> 时间：2012-04-17T12:15:05.703
> 
> 标签：c++, parsing, string-parsing, edid

我有一种方法可以使用 nVidia API 获取监视器的 EDID 信息，这给了我一个 128 个无符号字符的数组。[但是，在阅读维基百科](http://en.wikipedia.org/wiki/Extended_display_identification_data)上的 edid 数据格式时，我注意到制造商 ID（字节 8-9）中的字母表示为 5 位数字，所以我不知道如何将其作为有意义的数据读入 C++ .

我的计划是定义一个与 edid 格式匹配的结构类型，并将我的 char 数组转换为该结构类型，但我不知道现在是否可行，因为我在 C++ 中知道的最小大小的数据类型是一个字节在尺寸方面。

谢谢。

账单。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T12:19:42.763

为了提取和操作小于一个字节的信息，您需要使用按[位操作](http://en.wikipedia.org/wiki/Bitwise_operation)。

例如，为了提取存储为 a 的第一个（最低有效）5 位的 5 位数字`char`，您可以说：

```
unsigned char x = (BYTE & 0x1F); 
```

它将存储由 in 的右 5 位表示的`BYTE`值`x`。在那个例子中，我使用了一个 AND 运算符（`&`C/C++ 中的运算符），它基本上使用掩码来隐藏值的 3 个最重要（最左边）位，（使用十六进制值 1F，它`00011111`位于二进制）隔离最初的 5 位。

其他按位运算符包括 OR、XOR 和左/右位移，它们在 C++ 中分别使用、 和`|`运算`^`符执行。`<<``>>`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T12:22:51.087

使用位操作（即移位）来提取每个字符的位并使用查找表（为了更好的可移植性）将它们转换为字符。

```
uint16_t EDID_vendor_ID = EDID[8] | EDID[9] << 8;
char char_LUT[]={' ', 'A', 'B', /*...*/ 'Z'};
char ID[3] = { char_LUT[ (EDID_vendor_ID >> 6) & 7 ], 
               char_LUT[ (EDID_vendor_ID >> 3) & 7 ],
               char_LUT[ (EDID_vendor_ID     ) & 7 ] } 
```

# c# - 类库中的 IoC。在哪里引导

> ID：10191060
> 
> 赞同：31
> 
> 时间：2012-04-17T12:15:43.163
> 
> 标签：c#, dependency-injection, inversion-of-control, unity-container

我正在使用一个可以被其他组件重用的类库。在这个类库中，我使用统一进行依赖注入。对于这个类库，我创建了一个测试项目。调用者还会得到一个测试项目。我不确定的一件事是绑定的位置。我应该将其合并到类库中还是应该从调用应用程序中执行此操作？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-09-04T16:49:56.160

我知道已经选择了一个答案，但是我认为 Unity 的一部分被忽略了。由于这是一个特定的 Unity 问题，我想我指出了实现 IUnityContainerExtensionConfigurator 的 UnityContainerExtension 基类。这是为了扩展 API 库，以便拥有 Container 的入口点应用程序可以轻松地确保您的库正确注册到 Container 中，并允许 API 所有者控制注册的内容和如何。

Microsoft 企业库为此目的使用它。

我将简单地使用 Logging 库：

```
public class LoggingUnityExtension : UnityContainerExtension
{
    protected override void Initialize()
    {
        Container.RegisterType<ILogger, Logger>(new ContainerControlledLifetimeManager());
    }
} 
```

然后入口点应用程序执行此操作：

```
public class Bootstrapper : UnityBootstrapper
{
    protected override void ConfigureContainer()
    {
        base.ConfigureContainer();

        Container.AddNewExtension<EnterpriseLibraryCoreExtension>();
        Container.AddNewExtension<LoggingUnityExtension>();
        // ... 
    }

    // ...
} 
```

现在他们已经注册了 Enterprise Library 和 Logging 库的 API。使用这种方法的入口点应用程序非常简单，这是任何库开发人员都应该拥有的目标。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-04-17T12:29:02.390

这是一个有趣的问题。您如何依赖注入没有入口点的可重用程序集。*我真的很想看看其他人的答案。*

依赖注入是*入口点程序集*的职责。但是，如果您有很多类和程序集，每个都需要 DI，那么它们可能会被某些类/程序集遗漏，并且任务变得繁重。

# 解决方案一

使用约定优于配置。你坚持类`Foo`实现`IFoo`等规则。许多 DI 框架都有使用约定来设置它的方法。

# 解决方案二

上述解决方案并不能解决所有问题，因为有时您需要参数化注射设置。这是我解决问题的方法（特别是对于那些由**MEF**加载的程序集，这是针对`AutoFac`）：

**创建了一个接口`IIocInstaller`，其中传递了容器（或构建器）**

```
public interface IIocInstaller
{
    void Setup(ContainerBuilder builder);
} 
```

**创建了一个程序集属性，用于标记需要 DI 的程序集：**

```
[AttributeUsage(AttributeTargets.Assembly)]
public class ExportAssemblyAttribute : Attribute
{
} 
```

**在每个程序集中，我创建一个设置 DI 的类：**

```
[assembly: ExportAssembly]
namespace This.That
{

    [Export(typeof(IIocInstaller))]
    public class IocInstaller : IIocInstaller
    {
        public void Setup(ContainerBuilder builder)
        {
            ....
        }
    }
} 
```

然后在入口点，我有一个通用代码，它查看所有加载的具有程序集属性的程序集（包括 MEFed 程序集），然后查找实现的类型`IIocInstaller`，然后在它们上调用 Setup。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-17T12:24:58.350

从调用应用程序执行此操作会给调用应用程序带来更多负担。留下机会忽略初始化并陷入困境。

我会在类库中进行，例如在静态构造函数中。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-09-17T11:46:16.983

OK 创建一个名为 Project.Ioc 的库。在此处安装 Unity。将其他层引用到 Ioc 库。和 Ioc 库到表示层。创建一个名为 UnityHelper 的类。

```
/// <summary>
/// Bind the given interface in request scope
/// </summary>
public static class IocExtensions
{
    public static void BindInRequestScope<T1, T2>(this IUnityContainer container) where T2 : T1
    {
        container.RegisterType<T1, T2>(new HierarchicalLifetimeManager());
    }

    public static void BindInSingletonScope<T1, T2>(this IUnityContainer container) where T2 : T1
    {
        container.RegisterType<T1, T2>(new ContainerControlledLifetimeManager());
    }
}

/// <summary>
/// The injection for Unity
/// </summary>
public static class UnityHelper
{

    public static IUnityContainer Start()
    {
        var container = BuildUnityContainer();

        DependencyResolver.SetResolver(new Unity.Mvc4.UnityDependencyResolver(container));

        return container;
    }

    /// <summary>
    /// Inject
    /// </summary>
    /// <returns></returns>
    private static IUnityContainer BuildUnityContainer()
    {
        var container = new UnityContainer();

        // register all your components with the container here
        // it is NOT necessary to register your controllers

        // Database context, one per request, ensure it is disposed
        container.BindInRequestScope<IMVCForumContext, MVCForumContext>();
        container.BindInRequestScope<IUnitOfWorkManager, UnitOfWorkManager>();

        //Bind the various domain model services and repositories that e.g. our controllers require         
        container.BindInRequestScope<ITopicService, TopicService>();

        container.BindInRequestScope<ITopicTagRepository, TopicTagRepository>();

        //container.BindInRequestScope<ISessionHelper, SessionHelper>();

        return container;
    }
} 
```

查看 MvcForum 项目。有 MvcForm.Ioc 类库。该库获取其他图层引用。只有一个名为 UnityHelper 的类。

[https://github.com/leen3o/mvcforum](https://github.com/leen3o/mvcforum)

我希望这是你要找的。

# compiler-errors - mingw g++ 以错误的语言给出警告（德语而不是英语）

> ID：10191063
> 
> 赞同：20
> 
> 时间：2012-04-17T12:15:51.577
> 
> 标签：compiler-errors, g++, environment-variables, locale

我的问题如下：
当我在 Windows 7 笔记本电脑上使用 eclipse（Juno，64 位，Java 7u3）编译 C++ 项目时，出现德语错误/警告。这会导致警告在 Eclipse 中显示为错误。

Windows（7、64 位）设置为：
*显示语言：*英语
*格式：*德语（瑞士）
*位置：*瑞士
*非 Unicode 程序的语言：*英语（加拿大）

在我的另一台 Windows 7（64 位）PC 上，我的设置完全相同，没有任何问题。

我试过了：

*   将 -Duser.language=en 添加到我的 eclipse.ini 文件的末尾。
    哪个没用
*   *将格式*更改为英文。
    这实际上有效，但由于其他地方的格式错误，这并不是一个真正的选择
*   许多不同的事情我不记得了（例如 eclipse 中的环境变量等）
    同样，没有任何帮助

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-04-19T21:13:32.320

我终于解决了：D
我刚刚添加了一个新的环境变量。我仍然不知道为什么它可以在一台计算机上运行（因为我没有设置此变量）但至少它最终也可以在我的笔记本电脑上运行并且（我认为）是一个很好的（正确的？）解决方案：

*控制面板*->*系统*->*高级系统设置*->*环境变量...-* >*系统变量*->*新建*..- >变量：**LC_ALL**，值：**en_US.UTF-8**

现在我在编译时出现英语警告/错误，并且 eclipse 的行为应如此。

# android - 通过蓝牙以编程方式传输图像

> ID：10191064
> 
> 赞同：1
> 
> 时间：2012-04-17T12:15:52.893
> 
> 标签：android, bluetooth, file-transfer

如何以编程方式使用 Android 中的蓝牙将图像文件从一台设备发送到另一台设备。我可以正确发送文本文件，但尝试发送图像文件时显示错误。

示例代码在这里：

```
ContentValues values = new ContentValues();

  values.put(BluetoothShare.URI, url);

  values.put(BluetoothShare.DESTINATION, deviceAddress);

  values.put(BluetoothShare.DIRECTION, BluetoothShare.DIRECTION_OUTBOUND);

  Long ts = System.currentTimeMillis();

  values.put(BluetoothShare.TIMESTAMP, ts);

  getContentResolver().insert(BluetoothShare.CONTENT_URI, values); 
```

这里`url`指的是图片的路径。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-09T03:48:54.040

您可以将此代码用于此问题：

```
 File file=new File(imagePath);
 Uri uri=Uri.fromFile(file);

 ContentValues values = new ContentValues();

  values.put(BluetoothShare.URI, uri.toString());

  values.put(BluetoothShare.DESTINATION, deviceAddress);

  values.put(BluetoothShare.DIRECTION, BluetoothShare.DIRECTION_OUTBOUND);

  Long ts = System.currentTimeMillis();

  values.put(BluetoothShare.TIMESTAMP, ts);

  getContentResolver().insert(BluetoothShare.CONTENT_URI, values); 
```

# javascript - 在 Chrome 中最大化弹出窗口

> ID：10191067
> 
> 赞同：0
> 
> 时间：2012-04-17T12:15:58.613
> 
> 标签：javascript, asp.net, google-chrome

我有一段 JavaScript 代码可以最大化 IE 中的浏览器窗口，但是当我使用 Chrome 时我没有做任何更改。

这是我正在谈论的代码。

```
window.moveTo(0, 0);
if (document.all) {
     top.window.resizeTo(screen.availWidth, screen.availHeight);
}
else if (document.layers || document.getElementById) {
     if (top.window.outerHeight < screen.availHeight || top.window.outerWidth < screen.availWidth) {
          top.window.outerHeight = screen.availHeight;
          top.window.outerWidth = screen.availWidth;
     }
} 
```

有谁知道一个好的解决方法或任何其他解决方案来最大化弹出窗口。

感谢您的帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T13:03:53.210

你可以这样尝试：

```
top.window.moveTo(0,0); 
if (document.all)
{ 
    top.window.resizeTo(screen.availWidth,screen.availHeight); 
} 
else if (document.layers || document.getElementById) 
{ 
    if (top.window.outerHeight < screen.availHeight || top.window.outerWidth < screen.availWidth)
    {
        window.resizeTo(top.screen.availWidth, top.screen.availHeight);
    } 
} 
```

注意：浏览器会抱怨它（访问者也很可能），询问访问者是否希望允许被阻止的内容等。但我想这是另一个问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-17T12:21:17.103

Mehmat 如果您正在谈论在 IE 和 Chrome 中最大化窗口，那么我建议您最好使用 ExtJS 或 jQuery 方法。这些是跨浏览器的轻量级 Javascript 库，我想它们可以帮助您以更简单的方式解决您的问题。

# css - HTML 5 - Facebook 评论自定义 css

> ID：10191070
> 
> 赞同：1
> 
> 时间：2012-04-17T12:16:07.877
> 
> 标签：css, facebook

如何将自定义 CSS 添加到 HTML 5 [Facebook 评论](https://developers.facebook.com/docs/reference/plugins/comments/)插件？

```
<div id="fb-root"></div>
<script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) return;
  js = d.createElement(s); js.id = id;
  js.src = "//connect.facebook.net/en_US/all.js#xfbml=1&appId=123456789";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script>

<div class="fb-comments" data-href="http://example.com" data-num-posts="2" data-width="470"></div> 
```

谢谢。乌里

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-06-15T23:33:10.043

尝试将以下内容添加到您的 css 代码中：

```
.fb_iframe_widget, .fb_iframe_widget span, .fb_iframe_widget span iframe[style] {
width: 100% !important;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T06:12:50.570

尝试这个

```
#fb-comments { 
    width: 100%;
    float: left;
    font-family: Arial, Helvetica, sans-serif; 
    color: #ff6600; 
}

#comments a { color: #ff6600; } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-15T01:42:46.587

不幸的是，我没有办法做到这一点。内容通过 javascript 加载到 iframe 中。如果它直接注入到 DOM 中是可能的，但不会自动更新。

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-04-17T12:19:35.513

使用 Firebug 或 WebKit 检查器检查生成的 HTML，并创建相应的 CSS。

# linux - 在 ubuntu 中搜索文件中的文本，然后打印最多 n 行

> ID：10191072
> 
> 赞同：1
> 
> 时间：2012-04-17T12:16:26.583
> 
> 标签：linux, ubuntu, command-line

我在服务器上有一个日志文件，我想检查日志，但它非常大。我怀疑行后有一些错误

`at com.pckname.Classname.methodname(Classname.java:296)`

我想从 ubuntu 的命令行编写一个 serach 命令，在找到上面写的文本的行号后得到 n 行。

有人有什么想法吗？

我试过 'grep "search-string" ' 但这显然不能解决目的。通过上面的命令，我知道出了点问题，但是如果我在文件中得到最多几行的输出，我就会确切地知道问题出在哪里。

干杯

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-17T12:18:14.990

```
grep 'your_search_string' --after-context=N your_log_file 
```

# mongodb - MongoDB——大量数据库

> ID：10191077
> 
> 赞同：2
> 
> 时间：2012-04-17T12:16:37.643
> 
> 标签：mongodb

在我们的网络应用程序中，我们有大量与每个用户相关的数据。所以我们正在考虑为每个用户分配一个单独的数据库。因此，这将需要很大的数量。的数据库。

所以，我的问题是——没有限制。数据库，例如单个数据库中的集合[有 24,000 个限制。](http://www.mongodb.org/display/DOCS/Using+a+Large+Number+of+Collections)

**编辑**

我们决定为每个用户建立一个单独的数据库这一事实——这是否表明设计有任何错误？

实际上，网络应用程序是一种库存系统（比这稍微复杂一点），我们有很多与每个用户相关的小信息（更不用说他们的会话数据）——我们需要存储这些信息数据库。

我们决定使用数据库中的集合来存储与用户相关的不同“类型”信息。而且由于 Mongo DB 没有比“集合”更高级别的抽象，我们被迫使用单独的 DB 来分隔用户。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-17T12:21:10.473

如果每个用户使用一个数据库并且数据库之间没有数据流，那么就没有限制，因为您始终可以将某个胖客户端的数据库放在自己的服务器上。

如果您在谈论分片集群，那么我再次认为您很好。您拥有的数据库越多，配置服务器将使用的内存就越多。当配置服务器超出其机器时，您就知道您有很多数据库。

# ember.js - Ember.ViewState 和事件处理程序

> ID：10191079
> 
> 赞同：0
> 
> 时间：2012-04-17T12:16:40.803
> 
> 标签：ember.js

我尝试使用 Ember.StateManager 并遇到以下问题。我对这样的事件处理程序有一个看法：

```
App.TestView : Ember.View.extend({
   click: function(evt){
      console.log("hello");
   } 
}) 
```

当我手动附加视图时

```
Ember.$().ready(function(){
    var testView = App.TestView.create();
    testView.append();
)} 
```

点击事件有效。

但是当我使用状态管理器时：

```
App.statechart = Ember.StateManager.create({

    start: Ember.ViewState.create({

        view: App.TestView;

    )}
)} 
```

点击事件不再起作用。我的代码有什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T12:23:38.060

除了代码示例中的语法错误外，它还在工作，请参阅[http://jsfiddle.net/pangratz666/c3EY3/](http://jsfiddle.net/pangratz666/c3EY3/)

```
App.TestView = Ember.View.extend({
    templateName: 'testView',
    click: function(evt) {
        console.log("hello");
    }
});

App.statechart = Ember.StateManager.create({
    start: Ember.ViewState.create({
        view: App.TestView
    })
});​ 
```

您使用哪个版本的 Ember.js？您将视图类指定为`view`上的属性`Ember.StateView`，自提交[bc4d813d](https://github.com/emberjs/ember.js/commit/bc4d813d40586332c203312716c72cf6024ac50a)（**2011-01-17**，自版本 v0.9.4 起可用**）**以来支持该属性。以前，您必须指定视图的具体实例。

# php - 将 php 数据发送到 textarea - 编码问题

> ID：10191084
> 
> 赞同：1
> 
> 时间：2012-04-17T12:17:07.547
> 
> 标签：php, ajax, encoding

我使用了两个文本区域和一个按钮。这个想法是当按下按钮时，textarea1 上的所有信息将被发送到 php 函数反转它们，然后在 textarea2 上返回结果（我也在使用 ajax，所以我不必重新加载网站）。

现在的问题是，虽然这可以正常工作，但特殊符号存在问题，因为它们在 textarea2 中返回时显示为 �（虽然不是全部），所以我假设某处的编码存在问题。

这是将结果返回给 textarea2 的简单 php 代码

```
<?php
$data = rawurldecode($_GET["data"]);

//mb_internal_encoding("UTF-8");
//mb_http_output( "UTF-8" );
// ob_start("mb_output_handler");

echo strrev($data);
?> 
```

如您所见，我已经尝试将内部编码设置为 UTF-8，我也尝试在数据发送到 php 并在 php 函数中对其进行解码之前对其进行编码，但效果相同。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T12:18:59.447

`strrev()`将反转字节序列，这对于 UTF-8 等可变字节长度编码来说不是好消息。在 UTF-8 中可以用一个字节表示的字符（例如 ASCII）是安全的，但不能被破坏的字符。

您可以使用启用了 Unicode 标志的正则表达式来绕过`strrev()`.

```
// `u` flag so `.` match Unicode characters and `s` flag so `.` matches `\n`.
preg_match_all('/./us', $str, $matches);
// Reverse the array of matches, and then join the characters back together.
$str = implode(array_reverse($matches[0])); 
```

# eclipse-rcp - 具有两个视图的 RCP 透视图

> ID：10191090
> 
> 赞同：2
> 
> 时间：2012-04-17T12:17:26.583
> 
> 标签：eclipse-rcp

我有一个通过 "extensions" 创建的两个视图的透视图。第一个视图有一个表，第二个视图有一个树。我只想在应用程序打开时显示第一个视图，当用户从表中选择一个项目时，将此项目名称放在第二个视图的文本字段中，并在第二个视图打开时隐藏第一个视图。我想要当用户按下按钮时，还隐藏第二个视图并显示第一个视图。那可能吗？。

我已经设法将项目名称放在第二个视图中，但我无法协调显示和隐藏视图。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T14:33:33.080

是的，可以显示和隐藏视图。

1) 每个视图都必须有一个唯一的 ID。此 ID 必须与 plugin.xml 的视图扩展中的 id 匹配。

这是我的 plugin.xml 视图扩展之一。

```
 <view
        class="gov.bop.rabid.ui.views.PrefetchView"
        icon="icons/folder_user.png"
        id="gov.bop.rabid.ui.views.PrefetchView"
        name="Prefetch"
        restorable="true">
  </view> 
```

这是`PrefetchView`.

```
public static final String ID = "gov.bop.rabid.ui.views.PrefetchView"; 
```

通常，我将 ID 设置为与类名相同。这对我来说不那么混乱。

2）在`Perspective`类中，`createInitialLayout`方法中，你必须定义一个带有占位符的 IFolderLayout。同样，这是我的代码。

```
 IFolderLayout consoleFolder = layout.createFolder(CONSOLE_ID, 
            IPageLayout.BOTTOM, 0.75f, editorArea);
    consoleFolder.addPlaceholder(PrefetchedInmatesView.ID);
    consoleFolder.addPlaceholder(FoundInmatesView.ID);
    consoleFolder.addView(ProcessedInmatesView.ID);

    setClosable(layout, FoundInmatesView.ID, false);
    setClosable(layout, PrefetchedInmatesView.ID, false);
    setClosable(layout, ProcessedInmatesView.ID, false); 
```

3）您需要一个静态方法，允许您从任何其他视图中访问任何视图。我把这个静态方法放在我的`Activator`课堂上，但你可以把它放在任何你想要的地方。

```
public static IViewPart getView(IWorkbenchWindow window, String viewId) {
    IViewReference[] refs = window.getActivePage().getViewReferences();
    for (IViewReference viewReference : refs) {
        if (viewReference.getId().equals(viewId)) {
            return viewReference.getView(true);
        }
    }
    return null;
} 
```

4) 最后，您在事件代码中显示和隐藏视图。这是一个例子。

```
 final PhotoView view = (PhotoView) RabidPlugin.getView(window,
                PhotoView.ID);
        if (view == null)
            return;

                    *** Do stuff with the other view ***

        IWorkbenchPage page = window.getActivePage();
        page.hideView(page.findView(FoundInmatesView.ID)); 
```

# text - Ocaml 中的转义序列

> ID：10191093
> 
> 赞同：5
> 
> 时间：2012-04-17T12:17:32.853
> 
> 标签：text, escaping, ocaml

Ocaml 中是否有一种标准方法，可以将（例如）`a\n`（三字节字符串：）转换为`0x61,0x5c,0x6e`两字节字符串：`0x61,0x0a`？

我的 Ocaml 程序可以接收带有转义字符的字符串，如何“取消转义”它们？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-17T12:55:40.883

[来自http://caml.inria.fr/mantis/view.php?id=3888](http://caml.inria.fr/mantis/view.php?id=3888)的不错的解决方案：

`let unescape s = Scanf.sscanf ("\"" ^ s ^ "\"") "%S%!" (fun u -> u)`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-11-02T04:09:39.273

如果您使用的是 OCaml 4.0.0 或更高版本，则可以使用`Scanf.unescaped`.

例子：

```
# open Scanf
# Scanf.unescaped "a\\n";;
- : bytes = "a\n"      
# Scanf.unescaped "\\n\\t\\\\";;
- : bytes = "\n\t\\" 
```

接口：（[通过 OCaml 文档](http://caml.inria.fr/pub/docs/manual-ocaml/libref/Scanf.html)）

> ```
> val unescaped : string -> string 
> ```
> 
> 遵循 OCaml 的词法约定，返回带有转义序列的参数副本，并替换为相应的特殊字符。如果参数中没有转义序列，仍然返回一个副本，这与 String.escaped 相反。
> 
> 自 4.00.0

# sugarcrm - 显示计数的 sugarcrm 列表视图列

> ID：10191097
> 
> 赞同：0
> 
> 时间：2012-04-17T12:17:53.280
> 
> 标签：sugarcrm

我想在机会的列表视图中显示一列，该列包含每个机会的活动计数 Hw 可以实现这一点，是否有任何支持这一点的逻辑？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-04-18T21:02:18.237

你可以为此做一个 Sugar Logic 汇总：

[http://developers.sugarcrm.com/wordpress/2012/02/13/howto-use-sugar-logic-rollups/](http://developers.sugarcrm.com/wordpress/2012/02/13/howto-use-sugar-logic-rollups/)

# javascript - 在 IE 中调试 JavaScript

> ID：10191099
> 
> 赞同：23
> 
> 时间：2012-04-17T12:18:06.050
> 
> 标签：javascript, internet-explorer, debugging, requirejs

我正在尝试在 IE 中调试我的 JavaScript，但我不知道从哪里开始。有谁能够帮我？我认为这只是一个小错误，但开发人员工具有点没用。

[访问http://songtagapp.com/](http://songtagapp.com/)`unexpected identifier`时出现错误。我认为这与我用于 RequireJS的[插件有关，但我只能说这些。](https://github.com/ZeeAgency/requirejs-tpl)[`tpl!`](https://github.com/ZeeAgency/requirejs-tpl)

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-04-17T12:43:35.303

几个选项：

*   打开 IE 开发者工具（在浏览器中按 F12），并使用提供的 JavaScript 调试器。要更好地了解它，请参阅[有关使用 JavaScript 调试器的 MSDN 参考](http://msdn.microsoft.com/en-us/library/dd565625(v=vs.85).aspx)（以及[更新的参考](https://docs.microsoft.com/en-us/microsoft-edge/devtools-guide/debugger)）。
*   安装[Debug Bar](http://www.debugbar.com/)，它为内置的开发人员工具提供了扩展的功能集。
*   安装模拟各种 IE 实例（版本）的[IE Tester](http://www.my-debugbar.com/wiki/IETester/HomePage)，并使用其内置的调试栏。使用这种方法，您还可以查明特定于版本的问题。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-05-09T12:49:28.433

您可以使用 IE（在浏览器中按 F12）![在此处输入图像描述](../Images/bea22a995f71de38376f78ec773cafba.png)

![在此处输入图像描述](../Images/94a6a5baa1695549df3705201426d614.png)

![在此处输入图像描述](../Images/c41f5ddd2edde051623a5c9f9272fbf7.png)

# sql - 点周围的谷歌地图半径

> ID：10191101
> 
> 赞同：0
> 
> 时间：2012-04-17T12:18:09.953
> 
> 标签：sql, algorithm, google-maps

我有一个关于特定算法的问题，请你们帮我理解下面的代码，我想实现它，但是我想在实现之前理解代码，希望你们明白我的意思。

```
( 3959 * acos( cos( radians(-11232) ) * cos( radians( 21223 ) ) * cos( radians( 21223 ) - radians(23321) ) + sin( radians(-22321) ) * sin( radians( 23321) ) ) ) 
```

我知道它正在寻找半径，但它是如何工作的？如果有一点数学公式，将不胜感激。

提前感谢人们。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T13:49:21.040

此公式用于计算球体上两点之间的距离。

你可以在这里阅读解释：[http](http://en.wikipedia.org/wiki/Great-circle_distance) ://en.wikipedia.org/wiki/Great-circle_distance 。

11232 和 21223 是球体上的坐标（虽然它们看起来有点奇怪），3959 是球体的半径。

# windows - PostgreSQL 9.3 导入转储到表 psql 新手沮丧

> ID：10191105
> 
> 赞同：0
> 
> 时间：2012-04-17T12:18:22.567
> 
> 标签：windows, postgresql, musicbrainz

我正在使用 musicbrainz 数据库转储在 Windows Server 2008 上工作。我解压缩转储没有问题，大约有 60 个没有扩展名的文件，其名称反映了数据库表。

我设法让我在 github 上找到的 createtables sql 脚本工作，并且我有一个数据库模式，其中包含镜像我解压缩的文件的空表。

问题是我在 psql 命令行界面，我想出了如何按照

\lo_import '路径/文件名'

它似乎可以工作，因为文件非常大，并且在我执行 CPU 灯的那一刻开始疯狂地闪烁。刷新我的数据库后，问题又回到了 Postgres 中，表仍然是空的。我不知道这些数据在哪里。

我是一个直接的 Windows 程序员（.NET/SQL/JQuery），所以我需要一个可以从这个角度解释发生了什么的人。恐怕解释在 unix 或 linux 或 Windows 以外的任何东西中有效的方法都无济于事。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T14:48:40.217

导入数据转储的推荐方法是按照 musicbrainz 服务器随附的 INSTALL 文件中的说明进行操作：

[https://github.com/metabrainz/musicbrainz-server/blob/master/INSTALL](https://github.com/metabrainz/musicbrainz-server/blob/master/INSTALL)

您提到的“60 个没有扩展名的文件”是简单的制表符分隔文件，您可以使用 postgresql COPY FROM 命令手动导入这些文件，但同样不建议这样做。

要访问 musicbrainz 数据库，获取我们的虚拟机可能更容易，请参阅[http://wiki.musicbrainz.org/MusicBrainz_Server/Setup](http://wiki.musicbrainz.org/MusicBrainz_Server/Setup)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-01-08T06:25:30.027

您可以简单地将 sql 转储数据导入您的 postgres 数据库。

如果您已经创建了数据库，则无需执行第一步：-

**步=1**

打开终端然后运行以下命令来创建 postgres 数据库和用户：-

`sudo -u postgres psql`

`postgres=# create database mydb;`

`postgres=# create user myuser with encrypted password 'mypass';`

`postgres=# grant all privileges on database mydb to myuser;`

**步=2**

\c 用于选择您的数据库。

`postgres=# \c yourdatabasename`

\i 用于在数据库中导入转储数据。

`yourdatabasename=# \i path_of_your_dump_file`例如：-

`yourdatabasename=# \i /home/developer/projects/django_projects/db_dump.sql`

**如果您在导入数据时遇到此类错误：-**

`ERROR: role "yourusername" does not exist`

因此您可以使用以下命令将超级用户设置为您的“db_user/yourusername”：-

`postgres=# ALTER USER fusion WITH SUPERUSER;`

`ALTER ROLE`

# java - 在 Java 邮件中嵌入图像 - CID 不起作用

> ID：10191109
> 
> 赞同：6
> 
> 时间：2012-04-17T12:18:43.407
> 
> 标签：java, html, image, email

我正在开发一个将邮件发送到列表等的应用程序。它是使用 javax.mail api 用 Ja​​va 编写的。这里的问题是，我无法使用 CID 嵌入图像。

这是发送的邮件的来源：

```
Delivered-To: -@gmail.com
Received: by 10.43.50.4 with SMTP id vc4csp85536icb;
        Tue, 17 Apr 2012 05:08:00 -0700 (PDT)
Received: by 10.204.141.25 with SMTP id k25mr4406030bku.72.1334664479298;
        Tue, 17 Apr 2012 05:07:59 -0700 (PDT)
Return-Path: <-@gmail.com>
Received: from mail-bk0-f43.google.com (mail-bk0-f43.google.com [209.85.214.43])
        by mx.google.com with ESMTPS id ad16si7984294bkc.150.2012.04.17.05.07.58
        (version=TLSv1/SSLv3 cipher=OTHER);
        Tue, 17 Apr 2012 05:07:59 -0700 (PDT)
Received-SPF: pass (google.com: domain of -@gmail.com designates 209.85.214.43 as permitted sender) client-ip=209.85.214.43;
Authentication-Results: mx.google.com; spf=pass (google.com: domain of - designates 209.85.214.43 as permitted sender) smtp.mail=-; dkim=pass header.i=@gmail.com
Received: by mail-bk0-f43.google.com with SMTP id j5so5978375bkw.2
        for <-@gmail.com>; Tue, 17 Apr 2012 05:07:58 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=date:from:to:message-id:subject:mime-version:content-type;
        bh=Xj44O9fBIzirvcquOGxJbYLtbqgBc2Ags7prNUuAtSQ=;
        b=WWTCdrFgs3RCT/g2qXHR0fLCTc73TmNMA15sff0oIDksB6Nn3IwTYAqTVmoGiNrkW5
         08WDpTRADEKAOvjQ5FC9/uBCh1RXWTjxtawfjHc7vfUpqKbXOCj8Ab6GWXQMmX/+WB6T
         KVYLhk3/+GddIJI1XsAX9zprSYVcP6MMJ5/U+idIDlC7xQGGNuvzvpAnlnlGuWzgKc6j
         qPoFSAAaio6zICY9uSaI0deBIYTEQ2hIuBDJG8oaRvGVvpjhzJaBK+ab+rPJEboHPg8S
         3WSCG/Pp212VOw/YXOLUQV0jmMbuqAbsGdeER+Okbwe11sWi+zvPz+jhplB0NB2wq0Fn
         mWzA==
Received: by 10.204.130.13 with SMTP id q13mr4084640bks.128.1334664478358;
        Tue, 17 Apr 2012 05:07:58 -0700 (PDT)
Return-Path: <-t@gmail.com>
Received: from Akoya ([xx])
        by mx.google.com with ESMTPS id z14sm37467763bky.15.2012.04.17.05.07.51
        (version=SSLv3 cipher=OTHER);
        Tue, 17 Apr 2012 05:07:54 -0700 (PDT)
Date: Tue, 17 Apr 2012 05:07:54 -0700 (PDT)
From: BP MM <-@gmail.com>
To: xx xx <-@gmail.com>
Message-ID: <404745073.01334664469900.JavaMail.xx@Akoya>
Subject: TestImage
MIME-Version: 1.0
Content-Type: multipart/mixed; 
    boundary="----=_Part_2_854532868.1334664469871"

------=_Part_2_854532868.1334664469871
Content-Type: multipart/mixed; 
    boundary="----=_Part_1_1457048287.1334664469871"

------=_Part_1_1457048287.1334664469871
Content-Type: image/png; name=logo.png
Content-Transfer-Encoding: base64
Content-Disposition: attachment; filename=logo.png
Content-ID: img_cid

[base64 data]
------=_Part_1_1457048287.1334664469871--

------=_Part_2_854532868.1334664469871
Content-Type: multipart/alternative; 
    boundary="----=_Part_0_1033690582.1334664469858"

------=_Part_0_1033690582.1334664469858
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit

Hello

------=_Part_0_1033690582.1334664469858
Content-Type: text/html; charset=us-ascii
Content-Transfer-Encoding: 7bit

<html>
<body>
<H1>Hello</H1>
<img src="cid:img_cid">
</body>
</html>

------=_Part_0_1033690582.1334664469858--

------=_Part_2_854532868.1334664469871-- 
```

我尝试了不同的 CID，将 < 和 > 添加到 CID，将配置设置为内联，经过验证的 HTML 等。无法使其正常工作，Thunderbird 和 Gmail 使用“死”图像查看邮件。我读过客户端在邮件中查找 cid，所以我认为它应该正确获取图像。发送附件确实有效，但嵌入无效。任何有线索的人？它与Multipart结构有关吗？

用于创建消息的 java 代码（我已经评论了一些试图解决它的行..）

```
 /*
     * The method to create a MimeMessage, this message can be sent with the transport method.
     */
    private Message createMessage(final Mail mail, final Member member, final MailingList list,
            final MailAccount mailAccount, final Session session)
            throws MessagingException, UnsupportedEncodingException {
        // Get attachments
        @SuppressWarnings("unchecked")
        List<File> attachments = (List<File>) mail.getProperty(Mail.ATTACHMENTS_KEY);

        // Create content parts
        String plainContent = templateEngine.replaceTemplateTags(mail, member, list, mailAccount);
        String htmlContent = templateEngine.replaceHTMLTemplateTags(mail, member, list, mailAccount);

        Multipart multiContentPart = new MimeMultipart("alternative");
//      Multipart attachmentsBodyPart = new MimeMultipart();
        Multipart rootBodyPart = new MimeMultipart();

        // Create plain text part
        if (!plainContent.equals("")) {
            BodyPart plainMessageBodyPart = new MimeBodyPart();
            plainMessageBodyPart.setContent(plainContent, "text/plain");
            multiContentPart.addBodyPart(plainMessageBodyPart);
        }

        // Create html part
        if (!htmlContent.equals("")) {
            BodyPart htmlMessageBodyPart = new MimeBodyPart();
            htmlMessageBodyPart.setContent(htmlContent, "text/html");
            multiContentPart.addBodyPart(htmlMessageBodyPart);
        }

        // Create attachments
        if (attachments != null && attachments.size() > 0) {
            for (int i = 0; i < attachments.size(); i++) {
                BodyPart attachmentBodyPart = new MimeBodyPart();
                DataSource source = new FileDataSource(attachments.get(i));
                attachmentBodyPart.setDataHandler(new DataHandler(source));
                attachmentBodyPart.setFileName(attachments.get(i).getName());
                attachmentBodyPart.setHeader("Content-ID", "<img_cid>");
                attachmentBodyPart.setDisposition(Part.INLINE);
//              attachmentsBodyPart.addBodyPart(attachmentBodyPart);
                rootBodyPart.addBodyPart(attachmentBodyPart);
            }
            // Build attachments
//          BodyPart attachmentsWrapper = new MimeBodyPart();
//          attachmentsWrapper.setContent(attachmentsBodyPart);
//          rootBodyPart.addBodyPart(attachmentsWrapper);
        }

        // Build content
        BodyPart contentWrapper = new MimeBodyPart();
        contentWrapper.setContent(multiContentPart);
        rootBodyPart.addBodyPart(contentWrapper);

        // Create message
        Message message = new MimeMessage(session);
        message.setRecipient(Message.RecipientType.TO, new InternetAddress(
                member.getEmail(), member.getName()));
        message.setSubject((String) mail.getProperty(Mail.SUBJECT_KEY));
        message.setContent(rootBodyPart);

        // Add headers
        message.setFrom(new InternetAddress(mailAccount.getFromAddress(),
                mailAccount.getFromName()));
        if (mailAccount.getReplyTo() != "" && mailAccount.getReplyTo() != null)
            message.setReplyTo(InternetAddress.parse(mailAccount.getReplyTo()));

        return message;
    } 
```

不要介意每个附件的 CID 相同，稍后这将是文件名 - 我现在只测试一个附件。希望这可以帮助..

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-18T11:04:38.240

我发现邮件来源没有任何问题。这是邮件客户端处理 CID 的方式。Gmail.com 要求在 < 和 > 之间设置 CID。Thunderbird 还没有显示我的图像。我认为它需要某种独特的东西。仍然没有弄清楚为什么以及如何修复它。[通过使用 java 邮件将图像嵌入到 html 电子邮件中](https://stackoverflow.com/questions/5260654/embedding-images-into-html-email-with-java-mail/)找到它

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-17T19:21:39.493

CID 工作正常，问题是当您向多个电子邮件 ID 发送邮件时，每次您都必须初始化 MimeMessage，否则您不会收到错误

MimeMessage m = new MimeMessage(mailSession);

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-05-06T02:17:47.277

看起来不可思议，但所有的 html 标签必须在同一行。'<' 和 '>' 之间不能有回车。解析器非常糟糕。

# python - 使用 pexpect 自动化 manage.py syncdb 对话

> ID：10191113
> 
> 赞同：0
> 
> 时间：2012-04-17T12:18:59.500
> 
> 标签：python, expect, pexpect

我正在尝试使用 pexpect 来自动化这个对话。下面也是使用 pexpect 的 python 程序。当我运行代码时......它等待输入“你想现在创建一个吗？（是/否）：”然后超时并出现错误。它期待是或否。所以……我哪里做错了？字符串匹配第一个输入？

```
ubuntu@ip-10-142-73-169:/opt/graphite/webapp/graphite$ sudo python manage.py syncdb
Creating tables ...
Creating table account_profile
Creating table account_variable
Creating table account_view
Creating table account_window
Creating table account_mygraph
Creating table dashboard_dashboard_owners
Creating table dashboard_dashboard
Creating table events_event
Creating table auth_permission
Creating table auth_group_permissions
Creating table auth_group
Creating table auth_user_user_permissions
Creating table auth_user_groups
Creating table auth_user
Creating table auth_message
Creating table django_session
Creating table django_admin_log
Creating table django_content_type
Creating table tagging_tag
Creating table tagging_taggeditem

You just installed Django's auth system, which means you don't have any superusers defined.
Would you like to create one now? (yes/no): 
Username (Leave blank to use 'root'): 
E-mail address: 
Password: 
Password (again): 
```

Python脚本：

```
import pexpect
child = pexpect.spawn ('python /opt/graphite/webapp/graphite/manage.py syncdb')
child.expect ('Would you like to create one now? (yes/no):')
child.sendline ('yes')
child.expect ("""Username (Leave blank to use 'root'):""")
child.sendline ('admin')
child.expect ("E-mail address:")
child.sendline ('david@gmail.com')
child.expect ('Password:')
child.sendline ('test')
child.expect ('Password (again):')
child.sendline ('test')

Creating tables ...
Creating table account_profile
Creating table account_variable
Creating table account_view
Creating table account_window
Creating table account_mygraph
Creating table dashboard_dashboard_owners
Creating table dashboard_dashboard
Creating table events_event
Creating table auth_permission
Creating table auth_group_permissions
Creating table auth_group
Creating table auth_user_user_permissions
Creating table auth_user_groups
Creating table auth_user
Creating table auth_message
Creating table django_session
Creating table django_admin_log
Creating table django_content_type
Creating table tagging_tag
Creating table tagging_taggeditem

You just installed Django's auth system, which means you don't have any superusers defined.
Would you like to create one now? (yes/no): Traceback (most recent call last):
  File "test.py", line 5, in <module>
    child.expect ('Would you like to create one now? (yes/no):')
  File "/usr/lib/python2.7/dist-packages/pexpect.py", line 1311, in expect
    return self.expect_list(compiled_pattern_list, timeout, searchwindowsize)
  File "/usr/lib/python2.7/dist-packages/pexpect.py", line 1325, in expect_list
    return self.expect_loop(searcher_re(pattern_list), timeout, searchwindowsize)
  File "/usr/lib/python2.7/dist-packages/pexpect.py", line 1409, in expect_loop
    raise TIMEOUT (str(e) + '\n' + str(self))
pexpect.TIMEOUT: Timeout exceeded in read_nonblocking().
<pexpect.spawn object at 0x7ffb875847d0>
version: 2.3 ($Revision: 399 $)
command: /usr/bin/python
args: ['/usr/bin/python', 'manage.py', 'syncdb']
searcher: searcher_re:
    0: re.compile("Would you like to create one now? (yes/no):")
buffer (last 100 chars): em, which means you don't have any superusers defined.
Would you like to create one now? (yes/no): 
before (last 100 chars): em, which means you don't have any superusers defined.
Would you like to create one now? (yes/no): 
after: <class 'pexpect.TIMEOUT'>
match: None
match_index: None
exitstatus: None
flag_eof: False
pid: 12938
child_fd: 3
closed: False
timeout: 30
delimiter: <class 'pexpect.EOF'>
logfile: <open file '<stdout>', mode 'w' at 0x7ffb876c51e0>
logfile_read: None
logfile_send: None
maxread: 2000
ignorecase: False
searchwindowsize: None
delaybeforesend: 0.05
delayafterclose: 0.1
delayafterterminate: 0.1 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T04:21:18.900

我相信[pexpect](http://www.noah.org/wiki/pexpect#Overview)使用正则表达式语法。

```
child.expect ('Would you like to create one now.*?:') 
```

我猜上面会很好用。
你也可以逃避'？可能还有括号以获得更好的结果。

```
child.expect ('Would you like to create one now\? \(yes\/no\):') 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-03-04T22:44:38.533

正则表达式语法也让我感到困惑。这是对我有用的自动化代码：

```
p = pexpect.spawn("python manage.py syncdb")
p.logfile = sys.stdout 
p.expect(r"Would you like to create one now\? \(yes\/no\): ")
p.sendline("yes")
p.expect(r"Username \(leave blank to use '.*'\): ")
p.sendline("admin")
p.expect(r"Email address: ")
p.sendline("admin@admin.com")
p.expect(r"Password: ")
p.sendline("admin")
p.expect(r"Password \(again\): ")
p.sendline("admin") 
```

# apache - 如何在 apache solr lucene 中的 json 文档中搜索

> ID：10191115
> 
> 赞同：6
> 
> 时间：2012-04-17T12:19:03.580
> 
> 标签：apache, solr, lucene

下面是我导入到 solr 的 json 示例，其中 id 是唯一的，json_doc 字段包含整个 json。

{ "id" : "cust_123", "json_doc" : "{ "\first_name\":\"xyz\", \"last_name\":\"ABC\", \"address\":\"#s3,苹果商店,纽约,美国}\" }" }

现在我想在 json 文档中搜索，例如 Apple store 作为查询或 New york 作为查询或 USA .... 我应该得到该文档 ...

**需要帮助为此类请求定义 schema.xml。**

如果您使用空间标记器，那么它将在空间上标记...所以如果我要搜索“苹果商店”，那么它将不匹配....

请帮我

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-17T12:35:34.023

以下是如何索引 JSON 文档：[http ://wiki.apache.org/solr/UpdateJSON](http://wiki.apache.org/solr/UpdateJSON)

以下是如何在 JSON 文档中获取搜索结果：[http ://wiki.apache.org/solr/SolJSON](http://wiki.apache.org/solr/SolJSON)

另一方面，如果您有一些奇怪的要求将整个文档存储在一个字段中，请告诉...

# javascript - Javascript：优化插入多种颜色的大文本

> ID：10191119
> 
> 赞同：1
> 
> 时间：2012-04-17T12:19:12.793
> 
> 标签：javascript, html

我的 HTML 中有一个 pre 环境，我正在使用 Javascript 向其中插入一个大字符串：

```
$my_environment.innerHTML = my_large_text; 
```

该字符串大约有 100,000 个字符长。当字符串仅由纯文本组成时，一切都很好。但是，当我尝试为许多字符（大约 1/3 左右）添加颜色时，我通过将每个单独的字母包装成

```
<span style="background-color:some-color;"></span> 
```

有一个明显的延迟，在此期间浏览器窗口——如果是 Firefox，整个浏览器——被卡住。

pre 环境本身的大小有限并使用溢出，因此实际上只有一小部分需要在文本更改期间绘制。

是什么导致了延迟，有什么办法可以解决吗？

1.  也许我可以使用其他环境而不是 pre，但我宁愿不这样做。
2.  颜色不是并发的；将必须着色的字母想象成随机分布。
3.  如果可以加快速度，我愿意考虑任何更好的方法来为字母分配颜色，而不是简单地用 span 环境包装它们。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T12:48:07.917

一个优化步骤可能是使用“类”标签而不是“风格”标签。如果您使用预定义的 css 类，您可以根据具体情况减少渲染时间。

另一种方法可能是将所有字母以单色呈现，但在具有 id 的 span 元素中呈现。然后，您可以使用 Javascript 为需要更改的字母着色。

# javascript - jqPlot 调整大小

> ID：10191122
> 
> 赞同：3
> 
> 时间：2012-04-17T12:19:26.607
> 
> 标签：javascript, jquery, jqplot

告诉我是否有人遇到过这个问题：

我使用 jqPlot 在我的页面图上显示

```
<script language="javascript" type="text/javascript">

    $(document).ready(function () {
            $.jqplot.config.enablePlugins = true;
            var chLines = [[['09/30/2010 00:00:00',24.13],['12/31/2010 00:00:00',28.26],['03/31/2011 00:00:00',24.00],['06/30/2011 00:00:00',25.35],['09/30/2011 00:00:00',26.26],['12/31/2011 00:00:00',29.71]]];
            var chSeries = [{       color: '#436277',       label: 'label'  }];
        var mnth;
        var quarter;

        $.jqplot.DateTickFormatter = function(format, val) {
            if (!format) {
                format = '%Y/%m/%d';
            }       

            if(format == '%Q') {
                mnth = $.jsDate.strftime(val, '%#m');
                quarter = parseInt((mnth-1) / 3) + 1;
                return $.jsDate.strftime(val, '%Y') + 'Q' + quarter;
            }
            return $.jsDate.strftime(val, format);
        };

        //$.jqplot.DateAxisRenderer.tickInterval = 86400000*32*3;

        var plot = $.jqplot('content-chart', chLines,
            {
                //animate: !$.jqplot.use_excanvas, // Only animate if we're not using excanvas (not in IE 7 or IE 8)..           
                axes: {
                    xaxis: {
                        tickInterval: 86400000*32*3,
                        renderer: $.jqplot.DateAxisRenderer,
                        borderColor: 'black',
                        borderWidth: 0.5,
                        tickOptions: {
                            showGridline: false,
                            //formatString: '%b %Y',
                            formatString: '%Q',
                            textColor: 'black',
                            fontSize: '11px',
                        }
                    },
                    yaxis: {
                        min: 0,
                        tickOptions: {
                            formatString: '%.2f',
                            textColor: 'black',
                            fontSize: '11px'
                        }
                    }
                },
                highlighter: {
                    show: true,
                    sizeAdjust: 7.5
                },
                seriesDefaults: {
                    lineWidth: 3
                },

                series: chSeries,
                legend: {
                    show: true,
                    location: 'sw',//compass direction, nw, n, ne, e, se, s, sw, w.
                    xoffset: 5,
                    yoffset: 5
                    //placement: 'outside'
                },

                grid:{
                    background: 'white',
                    borderColor: 'white',
                    shadow: false,
                    gridLineColor: '#999999'
                }
            });
            $(window).bind('resize', function(event, ui) {              
                plot.replot( { resetAxes: true } );
            });
    });
</script> 
```

我看到刻度标签在 X 轴上重复![在此处输入图像描述](../Images/0844fb5530c9788ac9dd357ff41e659d.png)

但是当窗口调整大小时， **createTicks函数中 jqplot.dateAxisRenderer.js 中的****this.tickInterval**对象变为空。我还尝试更改函数**createTicks**中的代码，如下所示

 ****```
this.tickInterval = 86400000 * 32 * 3;
var tickInterval = this.tickInterval; 
```

但不幸的是，当调整窗口大小时，刻度标签开始相互碰撞。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T17:02:38.787

要解决您的问题，您必须首先为日期轴（即 X 轴）设置“最小”和“最大”日期。显然，只有在设置了“min”和“max”值时，渲染器才会使用“tickInterval”的值。这种问题实际上已经在堆栈上解决了——请看[这个答案](https://stackoverflow.com/a/4623848/613495)。

因此，使用此建议，您需要设置以下参数，如下所示：

```
tickInterval: "3 months",   
min: chLines[0][0][0],
max: chLines[0][0][chLines[0].length-1] 
```

对于调整大小位，您需要使用以下内容：

```
$(window).bind('resize', function(event, ui) {    
    if (plot) {
        plot.replot();
    }
}); 
```

[这是为您的代码制作的工作代码示例。](http://jsfiddle.net/Boro/B5dBw/)

* * *

**编辑：** 在摆弄样本一段时间后，我观察到仍然存在一些被认为不可见的问题，因为格式覆盖了它。看起来`min`,`max`和的设置`tickInterval`还不够，因为值仍然不是每 3 个月一次，因为每个刻度显示第 30 天，有时应该是 31。

[然后我想出的唯一解决方案是自己设置刻度。](http://jsfiddle.net/Boro/xJdkJ/)在这种情况下，您不需要`min`，`max`并且不再需要`tickInterval`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-01T11:33:02.613

对我来说，更新 jqplot 解决了刻度标签相互碰撞的问题，为了解决刻度间隔不起作用的问题，请参见此处接受的答案：

[jqPlot DateAxis tickInterval 不起作用](https://stackoverflow.com/questions/8467233/jqplot-dateaxis-tickinterval-not-working)****

# hudson - 将哈德逊战争部署到 jboss 6 时出错

> ID：10191126
> 
> 赞同：2
> 
> 时间：2012-04-17T12:19:42.210
> 
> 标签：hudson, jboss6.x

我是哈德逊的新手。我想将 Hudson 与 JBoss6 一起使用。我将 hudson.war 放入 JBoss6 的部署文件夹中，但是当我启动服务器时，它显示下面重现的错误。我应该怎么做才能正确部署？

原因：java.io.FileNotFoundException: D:\jboss-6.0.0.20100429-M3\server\default\deploy\hudson.war（该进程无法访问该文件，因为它正在被另一个进程使用）在 java.io。 FileInputStream.open(Native Method) [:1.6.0_13] at java.io.FileInputStream.(FileInputStream.java:106) [:1.6.0_13] at org.jboss.vfs.spi.RootFileSystem.openInputStream(RootFileSystem.java: 55) [jboss-vfs.jar:3.0.0.CR5] 在 org.jboss.vfs.VirtualFile.openStream(VirtualFile.java:236) [jboss-vfs.jar:3.0.0.CR5] 在 org.jboss。 vfs.VFS.mountZip(VFS.java:459) [jboss-vfs.jar:3.0.0.CR5] at org.jboss.vfs.util.automount.Automounter$RegistryEntry.mount(Automounter.java:237) [jboss -vfs.jar:3.0.0.CR5] 在 org.jboss.vfs.util.automount.Automounter$RegistryEntry.access$000(Automounter.java:208) [jboss-vfs.jar:3.0.0.CR5] 在 org.jboss.vfs.util.automount.Automounter.mount(Automounter.java:117) [jboss-vfs.jar:3.0.0.CR5] 在 org.jboss.vfs.util.automount.Automounter.mount (Automounter.java:77) [jboss-vfs.jar:3.0.0.CR5] at org.jboss.deployers.vfs.plugins.structure.AbstractVFSArchiveStructureDeployer.performMount(AbstractVFSArchiveStructureDeployer.java:145) [:2.2.0.Alpha4 ] 在 org.jboss.deployers.vfs.plugins.structure.AbstractVFSArchiveStructureDeployer.mountArchive(AbstractVFSArchiveStructureDeployer.java:128) [:2.2.0.Alpha4]performMount(AbstractVFSArchiveStructureDeployer.java:145) [:2.2.0.Alpha4] at org.jboss.deployers.vfs.plugins.structure.AbstractVFSArchiveStructureDeployer.mountArchive(AbstractVFSArchiveStructureDeployer.java:128) [:2.2.0.Alpha4]performMount(AbstractVFSArchiveStructureDeployer.java:145) [:2.2.0.Alpha4] at org.jboss.deployers.vfs.plugins.structure.AbstractVFSArchiveStructureDeployer.mountArchive(AbstractVFSArchiveStructureDeployer.java:128) [:2.2.0.Alpha4]

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T20:00:13.760

我从未使用过 JBoss，但问题显然是其他一些应用程序正在持有您的 hudson.war 。看起来您正在 Windows 上运行 JBoss，所以这就是我要做的：

下载并运行[Process Explorer](http://technet.microsoft.com/en-us/sysinternals/bb896653) -> Find -> Find Handle or DLL -> 进入`hudson.war`Handle *or DLL substring* box -> push *Search* 。它可能会显示使用该文件的 JBoss 以外的其他应用程序（或者它可能是您没有正确杀死的 JBoss 应用程序的另一个实例）。看看它是什么以及是否可以关闭它。

（如果您单击该行，它将实际导航到主窗口中的该应用程序，您可以通过右键单击它并选择适当的菜单项来终止它）。

# c# - 使用 WCF 进行身份验证

> ID：10191136
> 
> 赞同：1
> 
> 时间：2012-04-17T12:20:17.280
> 
> 标签：c#, wcf, wcf-security

我有一个 WCF 应用程序，我想向某些人公开，但是为了让他们使用我想以某种方式对他们进行身份验证的服务，是否可以创建我自己的成员资格提供程序来检查用户是否经过验证调用`ValidateUser`方法？另外，我将如何告诉我的绑定/行为使用此会员资格提供程序？

## 编辑

我对此也有一些疑问。例如：如果我调用`QueryStock`从客户端调用的 Web 服务上的方法。它是在触发方法之前首先使用我的会员提供程序验证用户，还是我必须将用户名和密码作为参数传递，然后`Membership.ValidateUser(username, password)`在我的方法中执行代码之前执行？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T14:43:56.387

我也有这个问题： [Authentication in WCF for every call](https://stackoverflow.com/questions/8054166/authentication-in-wcf-for-every-call)

如您所见，您可以使用 ASP.NET 身份验证。

如果您有自己的方法来验证用户，我会尝试使用一种外观来使用用户 + 令牌调用每个服务方法并保持一种“异步会话”。

因此，您可以在用户第一次登录时创建一个新令牌，然后在每次调用中创建一个新令牌，然后在下一次调用中使用它。仅使用带有用户 + 令牌的表来保护您的所有呼叫。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T12:34:48.550

对的，这是可能的。看看**[这篇](http://codebetter.com/petervanooijen/2010/03/22/a-simple-wcf-service-with-username-password-authentication-the-things-they-don-t-tell-you/)**文章，它展示了一个使用自定义提供程序的示例。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-17T12:35:45.023

这一切都可以用 WCF 来完成，我现在将它用于我们拥有的 WCF 服务。

您可以创建自己的成员资格提供程序（就像您为 asp.net 应用程序创建的那样），然后也将其引入 WCF。如果您在谷歌上搜索“WCF 会员资格提供者”，就会有大量相关信息。这篇文章也可能对您有所帮助：[WCF Authentication using SQL Membership Provider](https://stackoverflow.com/questions/3451578/wcf-authentication-using-sql-membership-provider)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-17T12:49:51.600

您需要在配置中定义一个行为，例如：

```
<behaviors>
  <serviceBehaviors>
    <behavior name="Framework.Services.FrameworkBehaviour">
      ...
      <serviceAuthorization principalPermissionMode="UseAspNetRoles" roleProviderName="CustomProvider" />
      <serviceCredentials>
        <serviceCertificate ... />
        <userNameAuthentication userNamePasswordValidationMode="Custom" customUserNamePasswordValidatorType="...." />
      </serviceCredentials>
    </behavior> 
```

这是绑定片段：

```
 <binding name="userNamePassOverSsl" ...>
      <security mode="TransportWithMessageCredential">
        <transport  />
        <message clientCredentialType="UserName" />
      </security>
    </binding> 
```

# symfony - Doctrine2 $em->persist($entity) 在 foreach 循环

> ID：10191139
> 
> 赞同：31
> 
> 时间：2012-04-17T12:20:28.127
> 
> 标签：symfony, doctrine-orm

我目前在一个地方，我需要在 foreach 循环中创建或更新实体。

所以我正在执行以下操作（短代码）：

```
foreach ($dataset as $data) {
    $entity = new Entity();

    // ---- Some setting operations on the entity

    $em->persist($entity);
}

$em->flush(); 
```

我所期待的是 Doctrine 管理实体，然后使用一条语句将实体插入表中。

但它发生了，Doctrine 为每个创建的实体做出一个声明。由于 $dataset 数组可能非常大（创建了很多实体），我希望将它打包到一个语句中。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2015-05-08T15:23:24.187

从 Doctrine 文档中，它说插入最好用批处理执行。它是@AlterPHP 答案的发展。

你可以使用：

```
$batchSize = 20;

for ($i = 1; $i <= 10000; ++$i) {

    $car = new Car();
    // ... set number of wheels, but should always be to 4 right ?

    $em->persist($car);

    if (($i % $batchSize) === 0) {
        $em->flush();
        $em->clear(Car::class); // Detaches all Car objects from Doctrine!
    }
}

$em->flush(); // Persist objects that did not make up an entire batch
$em->clear(Car::class); 
```

PS：我刚从[Doctrine 13.1 中读到。批量插入部分](https://www.doctrine-project.org/projects/doctrine-orm/en/2.6/reference/batch-processing.html#bulk-inserts)。现在您只需要一个更大的停车场！

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2012-04-17T14:20:50.890

正如[greg0ire](https://stackoverflow.com/users/353612/greg0ire)所建议的，此链接描述了 Doctrine 如何优化 INSERT 语句：[https](https://www.slideshare.net/jwage/doctrine-2-not-the-same-old-php-orm/47-sflive2010_Insert_Performance_Inserting_20) ://www.slideshare.net/jwage/doctrine-2-not-the-same-old-php-orm/47-sflive2010_Insert_Performance_Inserting_20 （看看幻灯片#47)。它使用事务但不在唯一语句中对相同对象的 INSERT 进行分组。

如果您确实需要一次划分传递给数据库服务器的数据量，我建议您处理 EntityManager::flush() 每个 x 语句。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-06-06T02:04:58.527

更改此代码：

```
foreach ($dataset as $data) {
    $entity = new Entity();
    // ---- Some setting operations on the entity
    $em->persist($entity);
} 
```

到：

```
foreach ($dataset as $data) {
    $entity = new Entity();
    // ---- Some setting operations on the entity
    $em->persist($entity);
    $em->flush();
    $em->clear();
} 
```

# php - Aptana 3.1.1（2012 年 4 月 17 日）不使用 Git 跟踪更改

> ID：10191149
> 
> 赞同：5
> 
> 时间：2012-04-17T12:20:59.320
> 
> 标签：php, git, aptana

我使用 Aptana Studio 3 已经有一段时间了，并且大量使用了 Git 功能。

自今天（2012 年 4 月 17 日）升级以来，Aptana 不再跟踪我的更改。

通常，当我更改任何文件时，文件名背景会变为红色，并且旁边会出现一个星号，让我知道文件已更改并且需要暂存/提交。

我尝试过的事情：

*   搜索 aptana 错误。
*   通过首选项搜索。
*   恢复到以前的配置。
*   重新启动我的电脑。
*   检查 .git 文件夹是否仍然存在（是）。
*   创建了一个新项目并将所有文件拉到一个新文件夹中（没有帮助）

有谁知道我如何重新启用此功能（如果更新更改了任何设置）或更新更改了文件的跟踪方式？

附加信息：我使用这个版本的 Aptana 越多，我发现被破坏的越多。我想我会提交一份名为 3.1.1 版的错误报告

无论如何，感谢您的建议。

更多信息：

经过数小时在谷歌上搜索与此相关的任何内容后，我决定卸载 Aptana，手动搜索之前安装创建的任何剩余首选项文件并将其删除，获取之前的 3.1 版本，重新安装该版本，创建一个新的 git 存储库并拉文件到我的新文件夹。今天在 Aptana上~~撒尿~~真是浪费时间！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-18T06:36:41.317

这里有同样的错误。我为它创建了新问题：[https ://jira.appcelerator.org/browse/APSTUD-4663](https://jira.appcelerator.org/browse/APSTUD-4663)

[Chris Williams](https://jira.appcelerator.org/secure/ViewProfile.jspa?name=cwilliams)对 Jira 票的评论：

> 经过一些研究，重现了这一点：
> 这在 Mac 上不会发生，而在 Windows 上，IDE 正在从 IDE 外部获取文件事件 - 但 git 支持没有正确地对它们“做出反应”。
> 我的猜测是，由于某些路径问题，强制刷新 git status 的侦听器正在中断（我们获取更改文件的路径，然后尝试从 git repo 中的相对路径中找到相应的文件，然后如果它在 repo 下，请更新我们的 git status - 它可能没有正确生成该相对路径）。
> 
> **发现我在几个位置使用了不正确的实现来生成 repo 相对路径，而不是使用`GitRepository.repoRelativePath()`.
> 用调用来替换它们应该可以为 Windows 用户解决这个问题。**
> 
> 修复版本/秒：
> 
> *   冲刺 2012-08（火山口），
> *   Aptana Studio 3.1.2，
> *   Aptana Studio 3.1.3

所以希望有进展。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T09:01:35.727

这里有同样的问题（Windows 上的 aptana）。对我来说，它首先将 egit 更新到最新版本 1.3.0.201202151440

因为我需要这个版本，我不能回去。也许有这个问题的人可以回到旧版本的 egit

PS：实际上，如果我启动命令，所有文件更改都会显示：Team -> status，如果我重新启动 aptana，更改的文件可以暂存并提交......所以我必须每天重新启动 aptana 几次......

# c# - DropDownList 内容覆盖

> ID：10191150
> 
> 赞同：1
> 
> 时间：2012-04-17T12:21:04.203
> 
> 标签：c#, asp.net

```
 strSQL = "SELECT * FROM User_Reg WHERE User_ID='" + UserId + "'";
           DataTable dataTablerepeaterUserList = null;
           dataTablerepeaterUserList =objSqlDbComm.ExecuteDatasetQuery(strSQL).Tables[0];

foreach (DataRow dr in dataTablerepeaterUserList.Rows)
{   
   ddlTitle.SelectedItem.Text = dr["Title"].ToString();
}

 <asp:DropDownList ID="ddlTitle" runat="server" CssClass="csstextbox" >
      <asp:ListItem>Mr.</asp:ListItem>
      <asp:ListItem>Mrs.</asp:ListItem>
      <asp:ListItem>Miss.</asp:ListItem>
     <asp:ListItem>Dr.</asp:ListItem>
 </asp:DropDownList> 
```

如果，假设，dr["Title"]=Dr. 然后用 Dr. 覆盖 Mr. 并得到如下结果：

```
| Dr.  |
| Mrs. |
| Miss.|
| Dr.  | 
```

我使用查询字符串将 User_ID 从`View_User.aspx`to传递`Create_User.aspx`给编辑用户。Id 变得正确，显示`Create_User.aspx`. 所有控件都正确获取正确的数据。但是当我填充当前用户的标题时，它会用`DropDownList`. （我唯一的问题是`DropDownList`它被覆盖了）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T12:34:27.493

这正是您的代码所做的：

默认情况下，下拉列表的第一个元素是选定的元素，您将覆盖它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T12:40:26.537

当您通过用户 ID 获取特定用户的数据时，您将获得一条记录。所以需要对dataTablerepeaterUserList使用for循环。只需检查行是否存在然后使用它。像

```
if (dataTablerepeaterUserList.rows.count > 0)
{
     ForEach(ListItem  itm  In ddlTitle.Items)
     {
            If (itm.Text = dataTablerepeaterUserList.Rows[0].tostring())
            {
                  itm.Selected = True;
            }
     }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-17T12:49:41.037

您的代码的问题在于， 您只是覆盖`.text`了`ListItem`.`DropDownList`

您要做的是找到`ListItem`您想要的现有，并修改 的`SelectedIndex`属性`DropDownList`以便选择正确的项目。这应该适合你：

```
// Find the correct list item in the drop down based on your data
ListItem theItemYouWant = ddlTitle.Items.FindByText(dr["Title"].ToString());
// Change the selected index to that items index
ddlTitle.SelectedIndex = ddlTitle.Items.IndexOf(theItemYouWant); 
```

* * *

作为旁注，您不应该在 SQL 中连接字符串，就像在您的示例中一样。这使您容易受到 SQL 注入攻击。相反，您应该使用参数，如下所示：

```
strSQL = "SELECT * FROM User_Reg WHERE User_ID = @User_ID"; 
```

然后将“@User_ID”作为参数添加到执行查询的任何位置。

# javascript - 如何防止恶意代码调用我的 javascript

> ID：10191155
> 
> 赞同：1
> 
> 时间：2012-04-17T12:21:26.403
> 
> 标签：javascript, security, spam-prevention

我在位于[http://example.com/analytics.js](http://example.com/analytics.js)的文件中有此代码，并在 HMTL 头中引用。下面的代码是我想做的一种 Javascript 伪代码

```
function collectStatistics(){
    // this function will send the page view to my server
    recordPageView(window.location.href);
} 
```

如何防止恶意代码和垃圾邮件发送者滥用我的 recordPageView 功能？他们能做的最简单的事情就是把它放在浏览器控制台的循环中，如果我限制它，他们可以在循环中放置一个计时器......等等

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-17T12:24:22.713

你不能。客户端代码完全可以破解，句号。`collectStatistics`任何查看该页面的人都可以很容易地触发对、 循环或其他方式的调用。或者他们可以更进一步，查看您发送的内容`recordPageView`，然后直接执行。

你所能做的就是在服务器端跟踪这些东西并寻找滥用模式，这正是谷歌和其他人对他们的广告网络所做的事情。

# java - Java：如果可与两种或多种类型的对象相比，则可与泛型进行比较

> ID：10191156
> 
> 赞同：0
> 
> 时间：2012-04-17T12:21:26.647
> 
> 标签：java

我有一个 TimeParameter 类，它实际上不是 Date 的子类，而是由 Date 等组成。在我的上下文中，日期或经常表示为双精度数（儒略日期）。很多时候，TimeParameter 不是与 TimeParameter 进行比较，而是与 Date、Double 甚至是 String（使用预定义格式编码的 Date）进行比较。原本TimeParameter实现的是Comparable接口，在compareTo(Object o)中，使用o进一步fork

```
if ( o instanceof Date)
    return compareToDate((Date)o);
else if ( o instanceof Double)
    return compareToDouble((Double)o);
else ... 
```

用泛型做到这一点的一种可能性是使用一个辅助类，比如

```
CompareHelper(Double d) {
    jd = d;
    ...
}
CompareHelper(Date d) {
    jd = getJulianDate(d);
    ...
} 
```

然后，使 TimeParameter 实现 Comparable<CompareHelper> 并继续进行。

但我的问题是，是否有办法在*没有*辅助类的泛型中做到这一点，因为调用实例并不总是能够知道它应该将 Date/Double 包装到辅助实例中。

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T12:28:01.093

通常，所有类型都有一个它们都实现的公共接口。与许多没有共同点的事物进行比较是没有意义的。

顺便说一句： a.compareTo(b) == -b.compareTo(a) 意味着您不能对您所使用的类型过于复杂。

# ios - 如何一次只让一个视图获取手势？

> ID：10191157
> 
> 赞同：0
> 
> 时间：2012-04-17T12:21:28.167
> 
> 标签：ios, uikit, uiimageview, uigesturerecognizer

我在我的应用程序中拖动了多个图像视图。我为每个 imageView 添加了一个 pangesture。

有没有一种方法可以在我拖动一个图像时取消其他图像上的手势？

我正在考虑将一些实例变量设置为被拖动的图像。说： imageViewBeingDragged 并检查识别器的视图是否与此匹配，并将此视图设置为开始状态，并在手势状态结束时设置为零。

如果有更简单的方法，请告诉我，因为我觉得我的想法可能不必要地复杂

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T12:34:33.373

UIView的`exclusiveTouch`属性对您来说还不够吗？我不确定它如何与`UIGestureRecognizers`.

# sql - 添加类似于 facebook 和 msn 的新闻源

> ID：10191161
> 
> 赞同：0
> 
> 时间：2012-04-17T12:21:37.087
> 
> 标签：sql, performance

我有一个网站，我需要在其中显示新闻源。我的意思是您的朋友成员的操作，但是通过 sql 查询编写该操作似乎非常慢，因为操作表现在有近 100,000 条记录。无论如何或任何智能技术可以以更好的性能或快速的数据检索来做到这一点？非常感谢。

# c++ - g++排序函数警告

> ID：10191163
> 
> 赞同：4
> 
> 时间：2012-04-17T12:21:45.070
> 
> 标签：c++, sorting, stl, g++

`array subscript is above array bound...`当我编译以下代码 ( `-Wall -O2`)时， g++ 会发出警告

```
#include <iostream>
#include <algorithm>
using namespace std;
int a[10];
int n;
int main(){
    sort(a, a+n);

    return 0;
} 
```

但是这段代码编译时没有任何警告：

```
#include <iostream>
#include <algorithm>
using namespace std;
int a[100];
int n;
int main(){
    sort(a, a+n);

    return 0;
} 
```

为什么会这样？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T19:03:33.643

在网上寻找与`-Warray-bounds`GCC 相关的问题时，似乎偶尔会出现与它有关的问题，但这些问题通常似乎与非常具体的代码场景有关。该功能似乎依赖于优化器 - 这就是为什么`-O2`您需要该选项才能看到问题。（参见[http://gcc.gnu.org/bugzilla/show_bug.cgi?id=35903#c9](http://gcc.gnu.org/bugzilla/show_bug.cgi?id=35903#c9)，其中提到“需要-O2的原因是`-Warray-bounds`需要VRP发出警告”-VRP是值范围传播）。源代码的微小差异很容易导致优化器中的不同行为。

无论如何，我认为这些问题更重要的`-Warray-bounds`是它们似乎也与非常特定的编译器版本相关联。例如，报告了针对 4.4.3 的此错误 (http://gcc.gnu.org/bugzilla/show_bug.cgi?id=43949)（据我所知，此错误可能是导致您发出警告的原因）为 4.2.4、4.5.1 和 4.6.0 工作，而它也在 4.5.0 中被破坏。它的修复显然进入了一些 4.5.x 版本的编译器。

无论如何，底线：如果这对您来说确实是一个问题（即，这不仅仅是一种好奇心），您可能需要考虑以下解决方法/修复之一：

*   迁移到 4.5.1 或更高版本的 GCC
*   通过代码更改解决问题。如前所述，小的更改可能会阻止触发警告
*   关闭警告`-Wno-array-bounds`

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-04-17T17:28:29.377

无论哪一个在没有警告的情况下编译，这两个代码都存在错误。在这两个代码中，您都使用 n 未启动（也是数组 a[10]）。

因此，在排序函数中使用“n”之前，您可能希望在其中存储数组“a”的长度。

这是您的代码的正确版本 -

```
#include <iostream>
#include <algorithm>
using namespace std;
const int n=10;
int a[n]={3,71,4,5,2,8,5,3,34,87};
int main(){
  sort(a,a+n);
  for(int i=0;i<n;i++)
    cout<<a[i]<<endl;
  return 0;
} 
```

# jquery - 使用与@Ajax.ActionLink 任务相同的 jquery onchange 完成任务

> ID：10191165
> 
> 赞同：0
> 
> 时间：2012-04-17T12:21:50.047
> 
> 标签：jquery, ajax, asp.net-mvc

我有以下 ajax 请求，它创建了一个链接，当单击该链接时，将我标记为“testDiv”的 div 替换为我通过方法“ControllerMethod”从控制器返回的一些信息：

```
<div class ="editor-field" id ="clickableAjax">
    @Ajax.ActionLink("Click Here to replace testDiv", "ControllerMethod", new AjaxOptions
                                                    {
                                                        UpdateTargetId = "testDiv",
                                                        HttpMethod="GET",
                                                        InsertionMode= InsertionMode.Replace,
                                                    }))
</div>
<div id="testDiv">
</div> 
```

当用户在下面的下拉列表中选择任何内容时，我将如何以与上述相同的方式进行网页回复：

```
<div>
        @Html.DropDownListFor(x => x.Selected, Model.MyModel, "Custom")
        @Html.ValidationMessageFor(model => model.Courses)
</div> 
```

我已经尝试了一些类似的东西：

```
$(document).ready(function () {
    $("Selected").change(function () {
        $("testDiv").replaceWith('<h2>test text</h2>');
    });
}); 
```

. . . 只是为了在用户在下拉列表中进行选择时尝试让页面执行*任何*操作，但好像什么也没发生 - 用户可以在下拉列表中选择任何内容并且没有任何更改。

注意：我在我的 jquery 中使用 id "Selected" 来尝试选择我的下拉列表，这是不正确的吗？如果我使用上述方法创建下拉列表，我的下拉列表的 ID 是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T12:24:43.947

您的`<div>`元素选择器不正确。由于您尝试根据其`id`属性选择它，因此您需要使用 ID 选择器：

```
$('#testDiv').replaceWith('<h2>test text</h2>'); 
```

`change`尝试绑定事件处理程序时，选择器也有同样的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-17T12:25:11.233

```
$(document).ready(function () {
    $("#Selected").change(function () {
        $("#testDiv").html('<h2>test text</h2>');
    });
}); 
```

# sql-server-2008-r2 - 哪个版本的 SQL Server 2008 用于开发？

> ID：10191166
> 
> 赞同：-2
> 
> 时间：2012-04-17T12:21:58.803
> 
> 标签：sql-server-2008-r2

对于开发，我应该使用哪个版本的 SQL Server 2008？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-17T12:24:31.860

这取决于你在做什么类型的开发，我会推荐 SQL Server 2008 Developer。但是，我通常自己使用 Express。

**SQL Server 2008 开发人员**

> SQL Server 2008 Developer 允许开发人员在 SQL Server 之上构建任何类型的应用程序。它包括 SQL Server 2008 Enterprise 的所有功能，但被许可用作开发和测试系统，而不是用作生产服务器。SQL Server 2008 Developer 是构建和测试应用程序的人的理想选择。您可以升级 SQL Server 2008 Developer 以供生产使用。

**SQL Server 速成**

> SQL Server Express 数据库平台基于 SQL Server 2008。它也是 Microsoft Desktop Engine (MSDE) 的替代品。SQL Server Express 与 Visual Studio 集成，可轻松开发功能丰富、存储安全且部署快速的数据驱动型应用程序。SQL Server Express 是免费的，可以由 ISV 重新分发（根据协议）。SQL Server Express 非常适合学习和构建桌面和小型服务器应用程序。此版本是独立软件供应商、非专业开发人员和构建客户端应用程序的爱好者的最佳选择。如果您需要更高级的数据库功能，SQL Server Express 可以无缝升级到更复杂的 SQL Server 版本。

[你可以在这里](http://msdn.microsoft.com/en-us/library/ms144275%28v=sql.100%29.aspx)找到更多信息

您可以通过[MSDN 许可证“免费”获得许可证](http://msdn.microsoft.com/en-us/sqlserver/aa336270)。如果您是学生，也可以通过[DreamSpark免费获得。](https://www.dreamspark.com/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-17T12:25:30.850

这取决于您的要求。如果您需要企业版的全部功能，您可以尝试开发者版。这是专为开发人员体验 SQL 中的全套功能而设计的，而无需支付获得企业版的高昂成本。

以下是版本列表及其用途：

[http://databases.about.com/od/sqlserver/a/mssql_editions.htm](http://databases.about.com/od/sqlserver/a/mssql_editions.htm)

以下是上述文章的相关引述：

> 需要在非生产环境中使用 SQL Server 2008 Enterprise Edition 的全部功能的开发人员可能会发现 SQL Server 2008 Developer Edition 是适合这项工作的工具。该产品具有与企业版完全相同的功能，只是许可证不同。（哦，顺便说一下，每个许可证只需 50 美元，便宜 24,949 美元！）Microsoft 还提供了将开发人员服务器转换为生产许可证的直接升级途径。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-17T12:28:20.500

对于这样一个模糊的问题，答案是“视情况而定”。您的选择是恕我直言：

*   **Express Edition** - 此版本是免费的，但缺少您可能会为最终部署开发的许多功能。由于它在数据库大小、CPU 和 RAM 方面受到限制，因此可能根本难以构建数据库或充分测试性能。

*   **开发者版**——售价约 49 美元，包含企业版的所有功能。这里的危险在于，如果您正在部署到 Standard 或 Workgroup Edition，您将不知道何时使用了在部署时不起作用的功能。

*   **标准版/工作组版**- 可能不是最适合开发环境，但会确保您只能开发能够在生产中使用的功能。如果您订阅了 MSDN 并且正在部署到这些版本之一，那么它可能是正确的选择。

# serialization - 全局变量的流口水序列化

> ID：10191168
> 
> 赞同：0
> 
> 时间：2012-04-17T12:22:07.690
> 
> 标签：serialization, global-variables, drools

我使用此代码来完全序列化/反序列化 drools (5.4.0.CR1) 状态会话对象：

```
private static void writeObject(ObjectOutputStream out, KnowledgeBase knowledgeBase, StatefulKnowledgeSession session) throws IOException
{
    // out.defaultWriteObject();
    DroolsObjectOutputStream droolsOut = new DroolsObjectOutputStream(out);
    droolsOut.writeObject(knowledgeBase);
    Marshaller marshaller = createSerializableMarshaller(knowledgeBase);
    marshaller.marshall(droolsOut, session);
}

private static Marshaller createSerializableMarshaller(KnowledgeBase knowledgeBase)
{
    ObjectMarshallingStrategyAcceptor acceptor = MarshallerFactory.newClassFilterAcceptor(new String[] { "*.*" });
    ObjectMarshallingStrategy strategy = MarshallerFactory.newSerializeMarshallingStrategy(acceptor);
    Marshaller marshaller = MarshallerFactory.newMarshaller(knowledgeBase, new ObjectMarshallingStrategy[] { strategy });
    return marshaller;
}

private static StatefulKnowledgeSession readObject(ObjectInputStream in) throws IOException, ClassNotFoundException
{
    // in.defaultReadObject();
    DroolsObjectInputStream droolsIn = new DroolsObjectInputStream(in);
    KnowledgeBase knowledgeBase = (KnowledgeBase) droolsIn.readObject();
    Marshaller marshaller = createSerializableMarshaller(knowledgeBase);
    StatefulKnowledgeSession statefulSession = marshaller.unmarshall(droolsIn);

    return statefulSession;
} 
```

它工作正常，唯一的问题是会话的全局变量丢失了。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T20:29:50.240

我相信我在 CR1 发布后解决了这个问题。在发布时尝试当前快照或 CR2。

# haskell - Prelude.writeFile 带有中文文件名

> ID：10191171
> 
> 赞同：2
> 
> 时间：2012-04-17T12:22:12.987
> 
> 标签：haskell, unicode, cjk, writefile

我正在测试一些喜欢将内容输出到文件的东西，它有一个中文名称。

该文件将成功创建，内容正确，但文件名不正确。

我看一下函数`writeFile`[^1](http://www.haskell.org/ghc/docs/latest/html/libraries/base-4.5.0.0/System-IO.html "系统.IO")，它使用 . 表示文件名`String`。所以我怀疑这可能是根本原因。

```
 file :: FilePath
    file = "上海万达影城.html"

    content :: String
    content = "<h1>hello</h1>"

    write2File :: IO ()
    write2File = writeFile file content 
```

谢谢你的帮助！

-西蒙

- - - - - - - - - - - 更新

1.  我身边的 GHC 是 7.0.2
2.  升级前找到的解决方法。请参阅下面的详细信息，代码更改如下

    ```
    import qualified Codec.Binary.UTF8.String as UTF8
    file = UTF8.encodeString "上海万达影城.html" 
    ```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-17T12:30:47.647

String 是 Haskell 中的 unicode 代码点列表。该 unicode 代码点列表的解释取决于系统。（您还需要一个不太旧的 GHC 来支持这一点）。

不过，一般来说，一旦您正确设置了区域设置，一切都会正常工作。

* * *

注意过去有一些警告——例如旧错误：[System.Directory.getDirectoryContents unicode 支持](https://stackoverflow.com/questions/6806686/system-directory-getdirectorycontents-unicode-support)——这可能涉及变通方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T12:32:54.523

同时，您可以使用该`System.Posix.IO.ByteString`模块。这将允许您将文件路径指定为字节字符串，因此您可以自己进行编码/解码。

这是一个已知错误，已在 7.2.1 中修复。

[http://hackage.haskell.org/trac/ghc/ticket/3307](http://hackage.haskell.org/trac/ghc/ticket/3307)

# php - 简化 PHP 代码和正则表达式

> ID：10191172
> 
> 赞同：0
> 
> 时间：2012-04-17T12:22:15.387
> 
> 标签：php, regex

我可以使用一些帮助来简化以下包含正则表达式语句的代码。我只是试图从包含在较大文本中的所有可能的子字符串中获取整数，然后将这些整数推送到数组中。我知道我不应该使用拆分，但我忘记了如何使用正则表达式。

```
 preg_match_all('/bar:foo\(?[0-9]*\);/', $in , $tag);
    for ($i = 0; $i < count($tag[0]); $i++) {
        $parts = explode("(", $tag[0][$i]);           
        $parts2 = explode(")", $parts[1]);
        array_push($myArr, $parts2[0]);
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-17T12:25:58.053

实际上，您可能不需要使用`preg_split`，但您已经可以通过修改当前模式来改进它：

```
$numbers = preg_match_all('/bar:foo\(?([0-9]*)\);/', $in , $matches) 
           ? array_map('intval', $matches[1])
           : array(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-17T12:25:31.120

```
preg_match_all('/bar:foo\(?([0-9]*)\);/', $in , $tags);
print_r($tags); 
```

# birt - 如何通过报表中的超链接将报表导航到 jsp

> ID：10191176
> 
> 赞同：0
> 
> 时间：2012-04-17T12:22:35.043
> 
> 标签：birt

我是一个非常新的 birt 工具，

我的问题是

如何通过报表中的超链接从报表导航到 jsp

高级感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T09:58:53.123

通过使用超链接选项，您可以访问您的应用程序 JSP 页面

步骤：超链接->选择URI单选按钮，您可以在那里传递您的类的参数/方法名称

祝你好运

# refactoring - 重构——从哪里开始

> ID：10191178
> 
> 赞同：1
> 
> 时间：2012-04-17T12:22:44.773
> 
> 标签：refactoring

我被分配了识别重构项目的任务。目的是查看表示层代码并确定那里是否有任何业务逻辑编码。然后确定需要移动到服务/业务层的内容以及呈现中的内容。我按设计查看的代码似乎没有使用任何设计模式；有几乎没有任何或无用注释的单片代码块。对我如何完成这项任务有什么建议 - 哪些方法有效？

目前，我正在尝试进行逆向工程并了解这似乎是完成这项任务的艰难方法。此活动的目的是重用业务逻辑。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T07:09:15.837

摘自 Sandro Mancuso 的这段精彩视频 [1]

1.  开始从最短到最深的分支构建测试。

2.  从最深到最短的分支开始重构，

[1] [http://www.youtube.com/watch?feature=player_embedded&v=_NnElPO5BU0#](http://www.youtube.com/watch?feature=player_embedded&v=_NnElPO5BU0#)！

并且，为了指导您在哪里重构，请考虑责任：“这段代码是否有责任执行/了解另一段代码”？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-17T12:24:53.633

首先构建一个安全网 - 为现有的类和方法编写单元测试，以证明它们的正确操作。如果你成功了，你将能够一次重构一点，并且仍然可以通过单元测试。

单元测试需要您深入了解，这将在您重构事物时派上用场。

分小步进行：重构、测试、重复。

另一个想法是尝试在可能的地方引入接口。如果您可以隔离客户，这些将充当更改的防火线。

获得一个支持重构的好 IDE。如果您正在编写 Java，我建议您使用 IntelliJ。它是目前最好的 IDE，它非常支持重构。

# multithreading - 使用多个 MessageListener 线程重复 JMS 消息处理

> ID：10191184
> 
> 赞同：1
> 
> 时间：2012-04-17T12:22:57.883
> 
> 标签：multithreading, jms, duplicates, message

我正在创建一个侦听队列的 JMS 侦听器应用程序。我正在使用 TIBCO JMS 实现并面临一个问题，即间歇性地多个我的侦听器线程接收相同的消息并导致重复处理。

这是我创建连接的方式：…………

```
Hashtable<String, String> env = new Hashtable<String, String>();
env.put(Context.PROVIDER_URL, url);
env.put(Context.INITIAL_CONTEXT_FACTORY, contextFactoryClass);
env.put(Context.SECURITY_PRINCIPAL, userName);

String decryptedPass = null;
//Decryption logic

try {
    // Look up queue connection factory from naming context.
    if (log.isEnabledFor(Level.DEBUG)) {
        log.debug("Attempting to lookup queue connection factory at '" + 
                    this.url + "' as user '" + userName + "'.");
    }

    Context ctx = new InitialContext(env);

    QueueConnectionFactory factory = 
        (QueueConnectionFactory) ctx.lookup(connectionFactoryName);

    // Create JMS connection using the factory we just looked up.
    if (log.isEnabledFor(Level.DEBUG)) {
        log.debug("Creating queue connection as user '" + userName + "'.");
    }
    connection = factory.createQueueConnection(userName, decryptedPass);
    ...
    ..
    . 
```

然后在这里我使用上面创建的相同连接创建侦听器线程

```
 //This is called in a loop.
                    // Create a JMS session that is non-transacted, but in client
        // acknowledge mode.  This will allow us to control when
        // messages are acknowledged.
        QueueSession session = 
            getQueueConnection().createQueueSession(
                false, Tibjms.EXPLICIT_CLIENT_ACKNOWLEDGE);

        // Create a receiver for the queue we are interested in.  Then
        // set the message listener defined on the outer class.  Messages
        // will be delivered on a dispatcher thread created by the
        // JMS provider.
        Queue queue = session.createQueue(getQueueName());
        session.createReceiver(queue).setMessageListener(getListener());
        ...
        ..
        . 
```

现在让我们假设，创建了 5 个侦听器线程，它们作为接收者在队列中侦听。我看到一种行为，有时不止一个侦听器线程/接收器接收相同的消息，我最终得到重复处理？我如何通过 JMS 配置来处理它？甚至可能吗？还是我不得不求助于一些程序化解决方案？任何建议将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T04:58:49.800

当消息被传递到应用程序时，该消息会从队列中隐藏（或对其他消费者不可用），直到应用程序确认为止。只有在应用程序确认该消息后，该消息才会从队列中删除。如果消费者在没有确认的情况下离开，消息将重新出现在队列中。因此，当一条消息被隐藏时，其他消费者将无法使用该消息。

我在这里要强调的一点是：一条消息不应该同时发送给多个消费者。您可能需要重新检查您的侦听器代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T07:58:04.230

尝试将 Tibjms.EXPLICIT_CLIENT_ACKNOWLEDGE 更改为 javax.jms.Session.AUTO_ACKNOWLEDGE

或确保您的侦听器确认收到消息。

# visual-studio - TFS 2010 - 每晚构建和测试

> ID：10191187
> 
> 赞同：2
> 
> 时间：2012-04-17T12:23:14.273
> 
> 标签：visual-studio, build, configure

我是 StackExchange 的新手，我是一个法国人，很抱歉我的英语......

我搜索了一些东西来帮助我继续在 TFS 网络上集成。事实上，我想在晚上进行构建和测试，因为一些工人在白天进行记忆......

我有一些项目要在夜间构建和测试，我想在早上在 TFS 的 Web 界面上查看结果......

我已经安装了 TFS 2010、构建代理和测试代理，但我没有看到任何关于此配置的教程...

如果有人可以帮助我...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T13:09:11.877

这是在构建定义中配置的。如果您在 Internet 上搜索*TFS 2010 构建定义*，您应该会找到大量信息。这是一个这样的资源：[tfs-2010-the-new-build-definition-window](http://blogs.msdn.com/b/jpricket/archive/2010/01/19/tfs-2010-the-new-build-definition-window.aspx)

*您可以在Trigger*部分指定何时构建： ![在此处输入图像描述](../Images/a54f7041400c52de8f3c7ae6eda9b95e.png) 您可以在*Process*部分指定要运行的测试： ![在此处输入图像描述](../Images/619be8507661251f7a15ae1d3e4241a7.png)

***编辑***如果您使用的是 Visual Studio 2010。

# android - 从不同班级获得经纬度后，无法在地图上显示地点

> ID：10191192
> 
> 赞同：0
> 
> 时间：2012-04-17T12:23:20.953
> 
> 标签：android, google-maps, android-intent, google-places

我在我的应用程序中找到了地点列表，并且我已将纬度和经度传递给另一个类以在地图上显示该位置，但在单击列出的地点后显示“强制关闭应用程序”。

代码是：
使用 onClick 列出地点

```
 ListView lv = getListView();
            // listening to single list item click
    lv.setOnItemClickListener(new OnItemClickListener() {

        public void onItemClick(AdapterView<?> parent, View view,
                int position, long id) {
            // getting values from selected ListItem

            String lat = ((TextView) view.findViewById(R.id.lat)).getText().toString();
            String lng = ((TextView) view.findViewById(R.id.lng)).getText().toString();
            // Starting new intent
            Intent in = new Intent(getApplicationContext(), ViewOnMap.class);

            in.putExtra(KEY_LAT, lat);
            in.putExtra(KEY_LONG, lng);
            startActivity(in);

        }
    }); 
```

然后我创建了另一个类来显示地图上的位置：

```
public class ViewOnMap extends MapActivity {

static final String KEY_LAT = "lat";
static final String KEY_LONG = "lng";

MapView mview;
MapController mcontrol;
LocationManager locmanager;
Location location;
GeoPoint geopoint;

@Override
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    setContentView(R.layout.mapview);

     Intent in = getIntent();

    List<Overlay> mapOverlays = mview.getOverlays();
    Drawable drawable = this.getResources().getDrawable(R.drawable.marker);
    MapOverlay itemizedoverlay = new MapOverlay(drawable, this);

      String lat = in.getStringExtra(KEY_LAT);
      String lng = in.getStringExtra(KEY_LONG);

      int latitude = Integer.parseInt(lat);
      int longitude = Integer.parseInt(lng);

      mview =(MapView)findViewById(R.id.mapv);
      mview.displayZoomControls(true);
      mview.setBuiltInZoomControls(true);
      mcontrol =mview.getController();
      mcontrol.setZoom(9);
      GeoPoint point = new GeoPoint(latitude,longitude);
      OverlayItem overlayitem = new OverlayItem(point, "Hola, Mundo!", "I'm in Mexico City!");

      itemizedoverlay.addOverlay(overlayitem);
      mapOverlays.add(itemizedoverlay);

}

@Override
protected boolean isRouteDisplayed() {
    // TODO Auto-generated method stub
    return false;
} 
```

}

请告诉我是什么错误。这些是 LogCat 中的错误：

> 04-17 18:07:54.509: E/AndroidRuntime(13783): 致命异常: main 04-17 18:07:54.509: E/AndroidRuntime(13783): java.lang.RuntimeException: 无法启动活动 ComponentInfo{com. run.trial/com.run.trial.ViewOnMap}：java.lang.NullPointerException 04-17 18:07:54.509：E/AndroidRuntime(13783)：在 android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1768) 04 -17 18:07:54.509: E/AndroidRuntime(13783): 在 android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1784) 04-17 18:07:54.509: E/AndroidRuntime(13783): 在 android.app .ActivityThread.access$1500(ActivityThread.java:123) 04-17 18:07:54.509: E/AndroidRuntime(13783): 在 android.app.ActivityThread$H.handleMessage(ActivityThread.java:939) 04-17 18: 07:54.509: E/AndroidRuntime(13783): 在 android.os.Handler.dispatchMessage(Handler.java:99) 04-17 18:07:54.509: E/AndroidRuntime(13783): 在 android.os.Looper.loop(Looper.java:130) 04-17 18:07:54.509: E/AndroidRuntime(13783): 在android.app.ActivityThread.main(ActivityThread.java:3835)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T17:55:20.437

问题是您在设置之前尝试访问“mview”。

```
List<Overlay> mapOverlays = mview.getOverlays(); 
```

将这行代码放在 setcontentview 之后

```
mview =(MapView)findViewById(R.id.mapv); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T15:48:30.383

我没有通过意图获取值，而是使用这种方式来执行它......`

> `The class showing list`的地方

```
public void onItemClick(AdapterView<?> parent, View view,
                int position, long id) {
            // getting values from selected ListItem
          //  String name = ((TextView) view.findViewById(R.id.name)).getText().toString();
            String lat = ((TextView) view.findViewById(R.id.lat)).getText().toString();
           // String description = ((TextView) view.findViewById(R.id.description)).getText().toString();
            String lng = ((TextView) view.findViewById(R.id.lng)).getText().toString();
            // Starting new intent
            Intent in = new Intent(getApplicationContext(), ViewOnMap.class);
          //  in.putExtra(KEY_NAME, name);
           // in.putExtra(KEY_DESC, description);
          //  in.putExtra(KEY_LAT, lat);
           // in.putExtra(KEY_LONG, lng);

            latitude = Double.parseDouble(lat);
            longitude = Double.parseDouble(lng);
            ViewOnMap.putLatLong(latitude,longitude);
            startActivity(in); 
```

> 显示地图类中的下一个创建一个新方法来获取值

```
 public class ViewOnMap extends MapActivity {
private static double lat;
private static double lng;
private int latitude;
private int longitude;
MapView mview;
MapController mcontrol;
LocationManager locmanager;
Location location;
GeoPoint geopoint;

@Override
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    setContentView(R.layout.mapview);
    mview =(MapView)findViewById(R.id.mapv);
    //Intent in = getIntent();
    //  String lat = in.getStringExtra(KEY_LAT);
     // String lng = in.getStringExtra(KEY_LONG);

       latitude = (int) (lat*1e6);
       longitude = (int) (lng*1e6);

      //if(in!=null)
     mview =(MapView)findViewById(R.id.mapv);
      mview.displayZoomControls(true);
      mview.setBuiltInZoomControls(true);
      mcontrol =mview.getController();
      int maxZoom = mview.getMaxZoomLevel();
      int initZoom = (int)(0.80*(double)maxZoom);
      GeoPoint point = new GeoPoint(latitude,longitude);
      mcontrol.animateTo(point); 
      mcontrol.setZoom(initZoom);

    List<Overlay> mapOverlays = mview.getOverlays();
    Drawable drawable = this.getResources().getDrawable(R.drawable.marker);
    MapOverlay itemizedoverlay = new MapOverlay(drawable, this);

     OverlayItem overlayitem = new OverlayItem(point, "some school", "some City!");

    itemizedoverlay.addOverlay(overlayitem);
    mapOverlays.add(itemizedoverlay);
}
public static void putLatLong(double latitude, double longitude){
    lat = latitude;
    lng = longitude;
}
@Override
protected boolean isRouteDisplayed() {
    // TODO Auto-generated method stub
    return false;
}

} 
```

`

# sql - 如何在 TSQL 中测试linkedserver 的连接性

> ID：10191193
> 
> 赞同：5
> 
> 时间：2012-04-17T12:23:21.947
> 
> 标签：sql, tsql, connection, linked-server, openquery

我需要编写一个程序来从多个远程服务器收集数据，

我使用linkedservers 和OPENQUERY 从服务器收集数据，但有时我会失去与某些服务器的连接，或者我根本无法连接它们（例如远程服务器离线）——在这些情况下，OPENQUERY 会导致超时。

所以我想先检查linkedservers的连接性，然后如果它成功运行查询，如果不是就移动到下一个远程服务器。

我试图将 OPENQUERY 放在 TRY - CATCH 中，但它仍然返回超时错误，sp_testlinkedserver 过程也返回超时错误。

我真的很感激任何帮助。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-04-17T12:26:44.637

您可以使用以下脚本

[https://web.archive.org/web/20190201090243/https://blogs.msdn.microsoft.com/sqltips/2005/06/07/test-linked-server-connection-settings/](https://web.archive.org/web/20190201090243/https://blogs.msdn.microsoft.com/sqltips/2005/06/07/test-linked-server-connection-settings/)

```
declare @srvr nvarchar(128), @retval int;
set @srvr = 'my_linked_srvr';
begin try
    exec @retval = sys.sp_testlinkedserver @srvr;
end try
begin catch
    set @retval = sign(@@error);
end catch;
if @retval <> 0
  raiserror('Unable to connect to server. This operation will be tried later!', 16, 2 ); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2020-06-11T10:27:18.473

```
USE master;  
GO  
sp_testlinkedserver [LINKED_SERVER_NAME];  
GO 
```

或者

```
SELECT * FROM OPENQUERY(LINKED_SERVER_NAME , 'select name DATABASE_NAME ,SYS_CONTEXT (''USERENV'', ''SESSION_USER'') USERNAME, host_name from v$database, dual, v$instance') ; 
```

# model-view-controller - 使用侦听器在 CDI 中导航

> ID：10191200
> 
> 赞同：0
> 
> 时间：2012-04-17T12:23:46.463
> 
> 标签：model-view-controller, jsf, navigation, el, cdi

参考[Oracle 文档](http://docs.oracle.com/javaee/6/tutorial/doc/bnarf.html#gkbuj)， h:outputText 是否需要[转换器](http://docs.oracle.com/javaee/6/tutorial/doc/bnaus.html#glphb)？我应该使用`f:setPropertyActionListener`而不是`f:actionListener`吗？

单击 id 2564 确实显示在日志末尾：

```
INFO: SingletonNNTP..only once...
INFO: NNTP.loadMessages...
INFO: SingletonNNTP.connect..
INFO: SingletonNNTP.setIndex..2,562
INFO: SingletonNNTP.page..2,572
INFO: SingletonNNTP.setIndex..2,562
INFO: Initializing Mojarra 2.1.6 (SNAPSHOT 20111206) for context '/NNTPjsf'
INFO: WEB0671: Loading application [NNTPjsf] at [/NNTPjsf]
INFO: NNTPjsf was successfully deployed in 7,612 milliseconds.
INFO: Messages..
INFO: Messages..
INFO: MessageBean..
INFO: Messages.postConstruct..
INFO: SingletonNNTP..only once...
INFO: NNTP.loadMessages...
INFO: SingletonNNTP.connect..
INFO: SingletonNNTP.setIndex..2,562
INFO: SingletonNNTP.page..2,572
INFO: SingletonNNTP.setIndex..2,562
INFO: SingletonNNTP.getMessages..
INFO: Messages.getModel..
INFO: Messages.getModel..
INFO: Messages.getModel..
INFO: Messages..
INFO: Messages.postConstruct..
INFO: SingletonNNTP.getMessages..
INFO: Messages.getModel..
INFO: Messages.getModel..
INFO: Messages.getModel..
INFO: Messages.getModel..
INFO: Messages.getModel..
INFO: Messages.getModel..
INFO: Messages.getModel..
INFO: Messages.getModel..
INFO: Messages.getModel..
INFO: Messages.getModel..
INFO: MessageListener.processAction..
INFO: ..MessageListener.processAction
INFO: MessageBean..
INFO: MessageBean.postConstruct..
INFO: SingletonNNTP.setIndex..0
INFO: SingletonNNTP.getMessage..
INFO: MessageBean.setMessage..2564
INFO: MessageBean.setId..2564
INFO: MessageBean.getId..2564
INFO: MessageBean.setPrevious..2563
INFO: MessageBean.getId..2564
INFO: MessageBean.setNext..2565
INFO: MessageBean.setUrl..
INFO: MessageBean.setMessage..2556
INFO: Messages.getModel..
INFO: Messages.getModel..
INFO: Messages.getModel.. 
```

但是，它永远不会从 client.xhtml 导航到 message.xhtml。

MessageListener.processAction() 在这里应该扮演什么角色并不清楚，也不清楚它具体如何影响[导航](http://docs.oracle.com/javaee/6/tutorial/doc/bnavb.html#bnavc)。

客户端.xhtml：

```
<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE composition PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns:ui="http://java.sun.com/jsf/facelets"
                template="./template.xhtml"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:c="http://java.sun.com/jsp/jstl/core"
                xmlns="http://www.w3.org/1999/xhtml"
                xmlns:f="http://java.sun.com/jsf/core">

    <ui:define name="top">
        <div style="float: left">
            <h:form>
                <h:commandLink action="#{messages.back()}">
                    <f:actionListener type="net.bounceme.dur.listeners.BackListener" />
                    <h:outputText value="..back"/>
                </h:commandLink>
            </h:form>
        </div>
        <div style="float: right">
            <h:form>
                <h:commandLink action="#{messages.forward()}">
                    <f:actionListener type="net.bounceme.dur.listeners.ForwardListener" />
                    <h:outputText value="..forward"/>
                </h:commandLink>
            </h:form>
        </div>
    </ui:define>
    <ui:define name="content">
        <h:dataTable value="#{messages.model}" var="m">
            <h:column>
                <f:facet name="id">
                    <h:outputText value="id" />
                </f:facet>
                <h:form>
                    <h:commandLink id="messageLink" action="#{messageBean.setMessage(m)}">
                        <f:actionListener type="net.bounceme.dur.listeners.MessageListener" />
                        <h:outputText value="#{m.messageNumber}"/>
                    </h:commandLink>
                </h:form>
            </h:column>
            <h:column>
                <f:facet name="subject">
                    <h:outputText value="subject" />
                </f:facet>
                <h:outputText value="#{m.subject}"></h:outputText>
            </h:column>
            <h:column>
                <f:facet name="date">
                    <h:outputText value="date" />
                </f:facet>
                <h:outputText value="#{m.sentDate}"></h:outputText>
            </h:column>
        </h:dataTable>
    </ui:define>
</ui:composition> 
```

消息.java：

```
package net.bounceme.dur.beans;

import java.io.Serializable;
import java.net.URL;
import java.util.List;
import java.util.logging.Logger;
import javax.annotation.PostConstruct;
import javax.enterprise.context.ConversationScoped;
import javax.faces.model.DataModel;
import javax.faces.model.ListDataModel;
import javax.inject.Inject;
import javax.inject.Named;
import javax.mail.Message;
import net.bounceme.dur.nntp.SingletonNNTP;

@Named
@ConversationScoped
public class Messages implements Serializable {

    private static final long serialVersionUID = 1L;
    private static final Logger LOG = Logger.getLogger(Messages.class.getName());
    private DataModel messagesDataModel = null;
    private List<Message> messages = null;
    @Inject
    private MessageBean messageBean;

    @PostConstruct
    public void postConstruct() throws Exception {
        LOG.info("Messages.postConstruct..");
        SingletonNNTP nntp = SingletonNNTP.INSTANCE;
        boolean debugNNTP = false;
        messages = nntp.getMessages(debugNNTP);
        messagesDataModel = new ListDataModel(messages);
    }

    public Messages() {
        LOG.info("Messages..");
    }

    public DataModel getModel() throws Exception {
        LOG.info("Messages.getModel..");
        return messagesDataModel;
    }

    public void forward() throws Exception {
        LOG.info("Messages.forward..");

    }

    public void back() throws Exception {
        LOG.info("Messages.back..");
    }

    public MessageBean getMessageBean() {
        return messageBean;
    }

    public void setMessageBean(MessageBean messageBean) {
        this.messageBean = messageBean;
    }

    public void insert(Message message) {
        LOG.info("Messages.insert..");
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T12:44:05.657

为了在 POST 请求中导航到不同的页面，action 方法需要返回您需要导航到的页面的视图 ID。像这样的东西：

```
<h:commandLink action="#{bean.submit}">submit</h:commandLink> 
```

和

```
public String submit() {
    // ...
    return "someViewId";
} 
```

这将去`someViewId.xhtml`。

动作监听器对导航没有影响。如有必要，它们旨在在调用实际操作之前预处理/准备内容。查看您的代码片段，您似乎并不完全了解如何使用动作和动作侦听器。您似乎将动作侦听器与动作混淆了。您在动作侦听器方法中所做的工作实际上应该在动作方法中完成。

在您的特定情况下，例如这个

```
<h:form>
    <h:commandLink id="messageLink" action="#{messageBean.setMessage(m)}">
        <f:actionListener type="net.bounceme.dur.listeners.MessageListener" />
        <h:outputText value="#{m.messageNumber}"/>
    </h:commandLink>
</h:form> 
```

需要替换为

```
<h:form>
    <h:commandLink id="messageLink" action="#{messageBean.setMessage(m)}">
        <h:outputText value="#{m.messageNumber}"/>
    </h:commandLink>
</h:form> 
```

和

```
public String setMessage(Message message) {
    // Do your business job here.

    return "message";
} 
```

这将导航到`message.xhtml`操作完成的时间。

这与转换无关。转换器只是在 a`String`和复杂的 Java 对象之间进行转换，以便复杂的 Java 对象可以在 HTML 中呈现，或者可以作为 HTTP 请求参数处理，这些参数只能是字符串。

### 也可以看看：

*   [action 和 actionListener 的区别](https://stackoverflow.com/questions/3909267/differences-between-action-and-actionlistener)

# jquery - JQGRID 搜索模式窗口没有弹出

> ID：10191205
> 
> 赞同：1
> 
> 时间：2012-04-17T12:24:20.547
> 
> 标签：jquery, jquery-ui, jqgrid

我使用 jquery ui 选项卡，因为我正在使用 jqGrid 显示网格，问题是当我单击搜索/查找选项时，搜索模式窗口没有弹出，页面大小正在增加并且显示在页面顶部，它在 Mozilla 中运行良好，但在 IE 8 中运行良好。

这是脚本：

```
 jQuery("#lDR").jqGrid({ 
            altRows: true,
            altclass: 'alt',
            data: ldReportData, 
            datatype: "local",
            height: 'auto',
            colNames:[ 'PNumber',Number', 'SUpb', 'SP&I', 'FUpb', 'FP&I', 'UDelta'
                        ],

            colModel:[  {name:'pNum', index: 'pNum', width:100},
                        {name:'Nbr', index: 'Nbr', width:100},  
                        {name:'Amt', index: 'Amt', width:100}, 
                        {name:'PImt', index: 'PImt', width:100},
                        {name:'fAmt', index: 'fAmt', width:100}, 
                        {name:'fAmt', index: 'fIAmt', width:100},
                        {name:'deUpb', index: 'deUpb', width:100},
                        ],
            rowNum: 15,                         
            rowList:[50,100,150],
            pager:'#pagerLdr', 
            viewrecords: true, 
            sortname: 'poolNum',
            grouping : true,
            groupingView : {
                            groupField : ['pNum'],
                            groupColumnShow : [false],
                            groupText : ['<b>P Number - {0}</b>']
                            },
            caption: "Loan Details Table"
            }).navGrid("#pagerLdr",{edit:false,add:false,del:false}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T12:11:48.930

谢谢，我已经解决了这个问题，通过点击这个链接并将位置设为绝对

访问[http://www.trirand.com/blog/?page_id=393/help/jqgrid-4-1-1-search-dialog-issues/](http://www.trirand.com/blog/?page_id=393/help/jqgrid-4-1-1-search-dialog-issues/)

# php - Paypal API：购物车项目总金额与订单金额不匹配

> ID：10191209
> 
> 赞同：16
> 
> 时间：2012-04-17T12:24:35.260
> 
> 标签：php, paypal, express-checkout

我正在使用 paypal express checkout API 并且在设置数量时遇到问题。以下是我的 URI 参数：

```
$params = array(
   'METHOD' => 'SetExpressCheckout',
   'PAYMENTREQUEST_0_SHIPPINGAMT' => '0',
   'PAYMENTREQUEST_0_TAXAMT' => '0',
   'PAYMENTREQUEST_0_HANDLINGAMT' => '0',
   'PAYMENTREQUEST_0_AMT' => "50.00",
   'RETURNURL' => $this->_returnUri,
   'CANCELURL' => $this->_cancelUri,
   'HDRIMG' => $this->_logoUri,
   'PAYMENTREQUEST_0_CURRENCYCODE' => 'GBP',
   'L_PAYMENTREQUEST_0_DESC0' => 'Product description',
   'L_PAYMENTREQUEST_0_NAME0' => 'Product name',
   'L_PAYMENTREQUEST_0_AMT0' => "50.00",
   'L_PAYMENTREQUEST_0_QTY0' => "2"
); 
```

如果 L_PAYMENTREQUEST_0_QTY0 设置为 1，则该过程很好。但是，将其更改为 2 并将 'PAYMENTREQUEST_0_ITEMAMT' => "100.00" 添加到数组中会给我以下错误：

```
TIMESTAMP: 2012-04-17T12:11:16Z
CORRELATIONID: da43f6c91254
ACK: Failure
VERSION: 88.0
BUILD: 2808426
L_ERRORCODE0: 10413
L_SHORTMESSAGE0: Transaction refused because of an invalid argument. See additional error messages for details.
L_LONGMESSAGE0: The totals of the cart item amounts do not match order amounts.
L_SEVERITYCODE0: Error 
```

我已经尝试了几个小时来修复它并放弃了。有人可以强调我需要做些什么才能让它工作吗？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-04-18T20:51:05.853

你缺少一个`ITEMAMT`. 另请参阅我在[Paypal Express 结帐中的回答，其中包含运费和错误](https://stackoverflow.com/questions/8280685/paypal-express-checkout-with-shipping-cost-and-error/8289567#8289567)，其中包含一个具有多个数量的工作示例。

```
&L_PAYMENTREQUEST_0_NAME0=10% Decaf Kona Blend Coffee  
&L_PAYMENTREQUEST_0_NUMBER0=623083  
&L_PAYMENTREQUEST_0_DESC0=Size: 8.8-oz 
&L_PAYMENTREQUEST_0_AMT0=9.95  
&L_PAYMENTREQUEST_0_QTY0=2  
&L_PAYMENTREQUEST_0_NAME1=Coffee Filter bags  
&L_PAYMENTREQUEST_0_NUMBER1=623084  
&L_PAYMENTREQUEST_0_DESC1=Size: Two 24-piece boxes  
&L_PAYMENTREQUEST_0_AMT1=39.70  
&L_PAYMENTREQUEST_0_QTY1=2  
&PAYMENTREQUEST_0_ITEMAMT=99.30  
&PAYMENTREQUEST_0_TAXAMT=2.58  
&PAYMENTREQUEST_0_SHIPPINGAMT=3.00  
&PAYMENTREQUEST_0_HANDLINGAMT=2.99  
&PAYMENTREQUEST_0_SHIPDISCAMT=-3.00  
&PAYMENTREQUEST_0_INSURANCEAMT=1.00  
&PAYMENTREQUEST_0_AMT=105.87  
&PAYMENTREQUEST_0_CURRENCYCODE=USD 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-07-04T03:34:49.953

与问题没有**直接**关系，但由于这在通过错误消息搜索时首先出现在 Google 中，这可能对收到此错误的其他人有用。

如果某些字段未设置（空/空白），您可能会收到此错误。

例如在我的情况下是（为清楚起见添加了换行符）：

```
 PAYMENTREQUEST_0_PAYMENTACTION=Sale
    &REQCONFIRMSHIPPING=0
    &RETURNURL=some_url
    &CANCELURL=some_other_url
    &BRANDNAME=Brand
    &L_PAYMENTREQUEST_0_NAME0=
    &L_PAYMENTREQUEST_0_AMT0=1.00
    &L_PAYMENTREQUEST_0_QTY0=1
    &PAYMENTREQUEST_0_AMT=1.00
    &PAYMENTREQUEST_0_CURRENCYCODE=USD 
```

即使金额很好，它也给了我同样的错误。我认为这是一个解析问题，因为如果你在 L_PAYMENTREQUEST_0_NAME0= 之后插入一个空格

```
&L_PAYMENTREQUEST_0_NAME0=&L_PAYMENTREQUEST_0_AMT0=1.00 
```

它工作正常。

所以我的猜测是，在 PayPal 的末尾，它只是将“&L_PAYMENTREQUEST_0_AMT0=1.00”分配给 L_PAYMENTREQUEST_0_NAME0，从而有效地将其从消息中删除并因此触发此错误，因为没有该行，金额确实不会加起来。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-08-22T17:38:32.310

我遇到了同样的问题，并通过参数 L_PAYMENTREQUEST_0_AMT$k 的函数 number_format 在 foreach 中格式化价格来解决它

例子：

```
$items_amount = 0;
foreach ($products as $k => $product) {
    $params["L_PAYMENTREQUEST_0_NAME$k"] = $product['name'];
    $params["L_PAYMENTREQUEST_0_DESC$k"] = $product['desc'];
    $params["L_PAYMENTREQUEST_0_AMT$k"] = number_format($product['priceIVA'], 2);
    $params["L_PAYMENTREQUEST_0_QTY$k"] = $product['count'];
    $items_amount += (floatval($product['priceIVA']) * $product['count']);
}

$params['PAYMENTREQUEST_0_AMT'] = $params['PAYMENTREQUEST_0_ITEMAMT'] = number_format($items_amount, 2); 
```

# jquery-mobile - jQuery Mobile - 更改列表排序顺序的按钮？

> ID：10191211
> 
> 赞同：1
> 
> 时间：2012-04-17T12:24:45.190
> 
> 标签：jquery-mobile

我正在使用 jQuery Mobile。如何创建一个更改列表排序顺序的按钮？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T12:39:28.813

将您的数据放在您排序的单独结构中，例如

```
var mylist = new Array ();
mylist[0] = "entry A";
mylist[1] = "entry B";
.... 
```

从此，您可以动态填充您的`listview`.

在 Button 的 onclick 事件中，您必须执行以下操作：

*   使用您的数据结构 ( `mylist`)
*   清除用于显示数据的列表视图
*   从更新的数据结构中重新填充列表视图。

有关如何清除和重新填充列表的更多详细信息，请参见例如[这个 SO question](https://stackoverflow.com/questions/8091288/how-to-refresh-jquery-mobile-listview-after-ajax-call)。

# php - 更新从变量中减去的字段

> ID：10191214
> 
> 赞同：1
> 
> 时间：2012-04-17T12:24:50.663
> 
> 标签：php, mysql, codeigniter, records

从变量值中减去字段值的正确语法是什么？

例子：

```
field1 = 100
variable1 = 10 
```

我想使用 codeigniter 的活动记录从 field1 中减去 variable1

我当前的代码如下所示：

```
$this->db->set('volume', 'volume'-$r['quantity'], FALSE)
                    ->where('code',$r['ingredient_id'])
                    ->update('tbl_ingredients');
volume is the field
$r['quantity] is the variable 
```

它是否正确？因为我得到错误的结果。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-17T12:29:24.270

试试这个

```
$this->db->set('volume', 'volume-'.$r['quantity'], FALSE) 
```

# c# - Compact Framework 3.5 文本字段设置焦点不起作用

> ID：10191218
> 
> 赞同：3
> 
> 时间：2012-04-17T12:24:54.533
> 
> 标签：c#, compact-framework, focus, textfield

我使用下面的代码将焦点设置到文本字段：

```
public void setFieldInFocus(TabPage tabPage)
    {
        foreach (Control t in tabPage.Controls)
        {
            if (t is TextBox)
            {
                if (t.Name == fieldInFocus)
                {
                    t.Focus();              

                }
            }

        }

    } 
```

光标显示在文本字段中，但是当我尝试使用移动键盘输入文本时，在我单击文本字段之前没有任何反应，即使光标已经在文本字段中。然后我单击文本字段并尝试使用移动键盘输入文本，它可以工作。为什么我仍然必须单击文本字段才能输入文本？我能做些什么来解决这个问题？

请注意，我使用的是紧凑框架 3.5 和 textField.Select(); 不可用。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T19:38:03.983

您发布的代码片段何时执行？是在表单实际显示之前吗？如果是这样，.NET 运行时将覆盖您的手动焦点设置并将其更改为表单上的第一个可聚焦控件。

即使光标出现在文本框内，它也可能不是具有焦点的控件。

我认为不太理想的一种解决方案是在表单加载事件触发时以非常短的间隔（比如 10）在表单上放置一个计时器。在 timer_tick 处理程序中，禁用计时器（确保它只运行一次），然后执行您的代码片段。以这种方式执行代码可确保在执行焦点覆盖代码**之前，Windows 消息泵有机会完全加载和显示您的表单（并在执行它的默认焦点例程的过程中）。**

缓解此问题的更好方法是尝试以使文本框成为第一个可聚焦项目的方式设计表单。默认情况下，表单将以深度优先的方式迭代其子控件树，一旦找到可聚焦的控件，它就会聚焦该控件并退出。

如果您查看表单的设计器代码文件，请尝试手动调整它，以确保：

1.  文本框是添加到标签页的第一个控件
2.  标签页是添加到标签控件的第一个控件
3.  tabcontrol 是添加到表单的第一个控件。

当这三件事为真时，默认情况下文本框将首先聚焦，您无需运行任何其他代码来覆盖它。

希望这可以帮助。

# c++ - 错误 LNK2019：未解析的外部符号 - 未见的问题实例

> ID：10191225
> 
> 赞同：0
> 
> 时间：2012-04-17T12:25:01.550
> 
> 标签：c++

我有一个错误 LNK2019：未解决的外部符号问题。

我有 2 个文件，我将它们移动到共享位置，以便 2 个不同的项目可以使用类。那里还有其他类似的课程。

问题是，当我从我得到的一个项目的主要部分调用课程时

```
error LNK2019: unresolved external symbol "public: __thiscall CProcessCommandLine::~CProcessCommandLine(void)" (??1CProcessCommandLine@@QAE@XZ) referenced in function _main
error LNK2019: unresolved external symbol "public: bool __thiscall CProcessCommandLine::Wait(void)const " (?Wait@CProcessCommandLine@@QBE_NXZ) referenced in function _main
error LNK2019: unresolved external symbol "public: class std::vector<class std::basic_string<char,struct std::char_traits<char>,class std::allocator<char> >,class std::allocator<class std::basic_string<char,struct std::char_traits<char>,class std::allocator<char> > > > const & __thiscall CProcessCommandLine::getTargetNamesVect(void)" (?getTargetNamesVect@CProcessCommandLine@@QAEABV?$vector@V?$basic_string@DU?$char_traits@D@std@@V?$allocator@D@2@@std@@V?$allocator@V?$basic_string@DU?$char_traits@D@std@@V?$allocator@D@2@@std@@@2@@std@@XZ) referenced in function _main
error LNK2019: unresolved external symbol "public: __thiscall CProcessCommandLine::CProcessCommandLine(void)" (??0CProcessCommandLine@@QAE@XZ) referenced in function _main 
```

当我打开头文件并右键单击其中一个函数并转到定义时，它不会转到 .cpp 中的定义。当我右键单击 .cpp 中的函数并说转到定义时，它会显示“符号未定义”。

有谁知道为什么会发生这种情况？.h 和 .cpp 都在同一个位置，并且该位置在项目的附加包含目录中

编辑：

此文件夹中的其他文件中存在以下代码：

```
#ifdef PROJ1
#include "class1.h"
#elif PROJ2
#include "class2.h"
#endif 
```

我以前从未见过这些东西。它们在代码中使用，但仅根据使用的项目包含正确的标头。以上位于此文件夹中其他类的 .cpp 中。所以我把它放在这里。但在其他类中，它不属于的项目是灰色的。当我将它放入 .h 时，它会使正确的标题变灰。但是由于某种原因，这个 .cpp 没有被识别为项目的一部分。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T12:37:14.460

如果您的函数属于与您正在构建的模块不同的模块，则必须导出类：

```
#ifdef THIRD_MODULE
#define DLLIMPEXP _declspec(dllexport)
#else
#define DLLIMPEXP _declspec(dllimport)
#endif

class DLLIMPEXP CProcessCommandLine
{
   //...
}; 
```

您使用已定义来构建定义此类的项目`THIRD_MODULE`。

该项目将生成`.lib`文件，您必须将其添加到主项目的链接器设置中的其他依赖项中。

# php - 如果键存在，则合并 2 数组并添加一个新项目

> ID：10191226
> 
> 赞同：2
> 
> 时间：2012-04-17T12:25:01.897
> 
> 标签：php, arrays

是否可以合并 2 个数组而不重叠相同的键？

如果密钥已经存在，我希望它添加一个新项目。

像那样

```
$a = array(1,2,3,4);
$b = array(3,4,5,6);
merge $a and $b 
```

期望的结果是

```
array(1,2,3,4,3,4,5,6) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-17T12:27:03.403

尝试[`array_merge`](http://php.net/manual/en/function.array-merge.php)：

```
$result = array_merge($a, $b); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T12:27:46.200

使用[array_merge](http://php.net/manual/en/function.array-merge.php)

```
$a = array(1,2,3,4);
$b = array(3,4,5,6);
$c = array_merge($a,$b);
print_r($c); 
```

[这里的工作示例](http://codepad.org/g3EEqLiq)

这是帮助中的关键短语：

> 如果输入数组具有相同的字符串键，则该键的后一个值将覆盖前一个。但是，如果数组包含数字键，则后面的值不会覆盖原始值，而是会被追加。

所以这只有在你有数字键时才有效

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-17T12:28:36.173

您可以`array_merge`为此目的使用该功能。但我想指出，数组的内容是数组的值而不是键。在 PHP**中你不能有重复的键**。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-17T12:31:17.957

尝试

```
<?php
$merged_array = array_merge($a, $b);
?> 
```

还存在函数array_merge_recursive。

# html - 在单行填充空间中显示两个 div - CSS

> ID：10191228
> 
> 赞同：3
> 
> 时间：2012-04-17T12:25:06.087
> 
> 标签：html, css

我有两个 div`diva`和`divb`. 他们有一个固定的高度`30px`。我想在一行中显示它们，一个接一个。这可以通过分别给它们 和 的宽度`10%`和来完成。这工作正常。但是我给了他们一个边界，这扰乱了计算。我给了第二个 div 的宽度并且正在工作。但是那个 div 之后有一个空白区域。`90%``float: left``1 px``88%`

我希望两个 div 都显示在一行中。页面重新调整大小，我希望 div 填充空间，这样我就不能给它们固定宽度。第一个 div 可能有一个固定的宽度，因为我只想要它`150 px`宽。但是第二个 div 必须更宽才能填充空间。

我得到的是这个；

![当前布局](../Images/a0b53fffbabc20fb8e9106ead84b2e02.png)

我想要这个：

![预期布局](../Images/e04c045a227fe76d8682bf1f31229f6f.png)

**[这](http://jsfiddle.net/blasteralfred/76Raj/)**是小提琴。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-17T12:27:12.467

将 a 添加`width: 100%`到正文并`float: left;`在 div1 上指定并`float: left;`在 div2 上删除。

如果您在子元素上使用百分比宽度或高度，则必须在父元素或容器元素上指定百分比宽度或高度。

那应该解决它！:)

[在这里看到这个小提琴](http://jsfiddle.net/76Raj/3/)

祝你好运！

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-17T12:28:56.663

试试这个

```
 body{
     margin: 0;
 }
 #div1{
     height: 30px;
     width: 10%;
     outline: solid 1px #000000;
     background-color: #0066CC;
     float: left;
 }
 #div2{
     height: 30px;
     width: 90%;
     outline: solid 1px #000000;
     background-color: #66CC00;
     float: left;
 }​ 
```

虽然对 IE 来说不是很好

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-17T12:37:06.677

[http://jsfiddle.net/J7mJX/1/](http://jsfiddle.net/J7mJX/1/)

只需添加

```
#div1, #div2 {
    -webkit-box-sizing: border-box;  
    -moz-box-sizing: border-box;  
    box-sizing: border-box;   
} 
```

因此边框包含在宽度计算中。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-04-17T12:29:27.227

设置 box-sizing:border-box; 在具有 % 宽度的浮动 div 上。

[https://developer.mozilla.org/En/CSS/Box-sizing](https://developer.mozilla.org/En/CSS/Box-sizing)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-17T12:37:06.317

或者，您可以添加额外的 div，这些 div 不会影响带有添加边框的父 div 的宽度

[http://jsfiddle.net/ollie/76Raj/9/](http://jsfiddle.net/ollie/76Raj/9/)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-09-28T08:29:22.087

```
<div style="display:table">
    <div style="display: inline-block;width:100px;height:100px;background-color:red;">DIV 1</div>
    <div style="display: inline-block;width:100px;height:100px;background-color:green;">DIV 2</div>
    <div style="display: inline-block;width:100px;height:100px;background-color:blue;">DIV 3</div>
</div>
```

# java - 我不知道使用什么 SecurityContextHolder 策略

> ID：10191232
> 
> 赞同：0
> 
> 时间：2012-04-17T12:25:24.467
> 
> 标签：java, spring, spring-security, security-context

我使用这样的代码进行身份验证：

```
@PreAuthorize("isAnonymous()")
@RequestMapping(value = "/login", method = RequestMethod.POST)
public String doLogin(HttpServletRequest request) {
    try {
        Authentication req = new UsernamePasswordAuthenticationToken(request.getParameter("name"),
                request.getParameter("password"));
        Authentication result = authenticationManager.authenticate(req);
        SecurityContextHolder.getContext().setAuthentication(result);
        logger.debug("Success login");
        logger.debug(SecurityContextHolder.getContext().getAuthentication());
        return "index";
    } catch (AuthenticationException e) {
        e.printStackTrace();
        logger.debug("ACHTUNG! Success failed");
        return "index";
    }
} 
```

我可以登录，它可以工作。我在日志中看到非空身份验证对象。然后我尝试浏览一些像这样的安全页面：

```
@PreAuthorize("hasRole('user')")
@RequestMapping(value = "/user", method = RequestMethod.GET)
public String user(ModelMap modelMap) {
    modelMap.addAttribute("user", SecurityContextHolder.getContext().getAuthentication().getCredentials().toString());
    return "index";
} 
```

由于 getAuthentication()，它会抛出 NullPointerException。当我使用 SecurityContextHolder.MODE_INHERITABLETHREADLOCAL 和 SecurityContextHolder.MODE_INHERITABLETHREADLOCAL 时会发生这种情况，这与使用 SecurityContextHolder.MODE_GLOBAL 不同。

我究竟做错了什么？我不需要 SecurityContextHolder 的 MODE_GLOBAL 行为。

**UPD：**有时会出现问题，有时不会在同一个会话中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T15:46:50.183

Make absolutely sure that the Security Filter is running each time in your request by logging:

```
request.getAttribute("__spring_security_scpf_applied"); 
```

Do not. Do not replace the SecurityContextHolderStrategy unless you absolutely know what your doing. It has to do with finding the SecurityContext based on ThreadLocal. So unless your a very weird Servlet Container the default is almost always correct.

You also need to make an interceptor for your request path. The @PreAuthorize only applies to method calls [http://static.springsource.org/spring-security/site/docs/3.0.x/reference/el-access.html](http://static.springsource.org/spring-security/site/docs/3.0.x/reference/el-access.html) which is not what you want.

Instead you want something like the following in your security application context:

```
<http> ...
        <intercept-url pattern="/user**" access="hasRole('user')" />
</http> 
```

# android - Android在listview中添加视图

> ID：10191237
> 
> 赞同：4
> 
> 时间：2012-04-17T12:25:40.783
> 
> 标签：android, listview

文档说不支持 listViewObj.addView() 方法。我想将视图添加到列表的末尾而不刷新它。如何做到这一点？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-17T12:27:42.300

您可以通过以下方式向 ListView 添加页脚，

```
View footerView = getLayoutInflater().inflate(R.layout.footer_layout, null);
listview.addFooterView(footerView); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-17T12:29:32.233

如果要在列表之外添加视图，请使用 addFooterView，请参阅[http://developer.android.com/reference/android/widget/ListView.html#addFooterView(android.view.View](http://developer.android.com/reference/android/widget/ListView.html#addFooterView(android.view.View) )

如果您希望视图成为列表的一部分，则必须刷新它。必须在适配器中添加新数据并通知数据已更改，参见 [http://developer.android.com/reference/android/widget/BaseAdapter.html#notifyDataSetChanged](http://developer.android.com/reference/android/widget/BaseAdapter.html#notifyDataSetChanged) ()

# javascript - jQuery触发动态加载的内容？

> ID：10191238
> 
> 赞同：0
> 
> 时间：2012-04-17T12:25:45.520
> 
> 标签：javascript, jquery, sharepoint, infopath

我正在处理 Sharepoint 2010 中的信息路径表单，我需要为用户体验添加一些 JS 优点。

问题是，我相信加载 infopath 表单的“webpart”是动态加载的，我无法将任何 jquery 事件附加到表单的内容。我已经尝试过“live”。

我实现 jQuery 的方式是在 Sharepoint Designer 中打开表单，允许我在加载 infopath 表单的 web 部件下方添加一个“内容 webpart”。我通过 googleapi 加载 jQuery，并且可以使用此内容 webpart 中的对象，但无论我做什么，我都无法“访问”加载的 infopath 表单中的内容？

是否有一些神奇的 jquery 方式来“监听”特定的 html 元素，并等待它加载，然后附加我的事件处理程序和其他 jquery 优点？

我可能只是不明白发生了什么，但在我看来，这绝对是一种可能，因为我可以在打开表单后查看源代码，并且我可以清楚地看到所有内容，就在我的脚本块上方在我的内容 web 部件中。

# javascript - 用户脚本是否适用于 localhost html 文件

> ID：10191242
> 
> 赞同：0
> 
> 时间：2012-04-17T12:25:59.583
> 
> 标签：javascript, dom, userscripts

我有一个 html 文件，即“ **[http://localhost:8084/WebApplication1/example.html](http://localhost:8084/WebApplication1/example.html)** ”

该文件有以下内容

```
<html>
<head>
<title></title>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
</head>
<body>
<div>HELLO WORLD</div>
<script type="text/javascript">
    var f = document.createElement("div");
    f.innerHTML="sfsdfsdfsdfsdf";
    document.body.insertBefore(f, document.body.firstChild);
    document.write("<a href='http://www.google.com'>sada</a> ");
   console.log("Program")
</script>
</body>
</html> 
```

[当我使用此](https://stackoverflow.com/questions/10083010/log-a-web-pages-dynamically-created-dom-elements-with-a-userscript)页面中提到的用户脚本时，它没有显示创建的 div 标签。这是我的本地主机的问题吗

我写的用户脚本取自这个[**链接---请通过这个**](https://stackoverflow.com/questions/10083010/log-a-web-pages-dynamically-created-dom-elements-with-a-userscript)你会发现这个`addJS_Node`功能

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T13:27:33.343

除了[Carlos 指出的问题之外](https://stackoverflow.com/a/10191372/331508)，该代码似乎还不够快，无法在一个简单的本地页面上捕获所有内容。对于那个很抱歉。当我测试它时，我使用了我的测试服务器。

如果您将脚本指向[托管在 jsBin 的 Carlos 版本的测试页面，](http://jsbin.com/aracuw)则脚本会在这种情况下捕获`createElement()`调用。

这是一场比赛，而这正是 Greasemonkey 所能做的最好的事情。如前所述[（第 7 条评论）](https://stackoverflow.com/questions/10185588/how-to-retrieve-dynamically-created-tags-from-a-webpage-using-userscript#comment-13078918)，Greasemonkey 不是您尝试做的工作的最佳工具。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-17T12:35:50.687

像这样做：

```
<html>
<head>
    <title></title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
</head>
<body>
    <div>HELLO WORLD</div>
    <script type="text/javascript">
        var f = document.createElement("div");
        f.innerHTML="sfsdfsdfsdfsdf";
        document.body.insertBefore(f, document.body.firstChild);
        document.write("<a href='http://www.google.com'>sada</a> ");
        //document.body.innerHTML="<a href='http://www.google.com'>sada</a> ";
    </script>
</body>
</html> 
```

您需要在某处插入新创建的元素，即在 body 元素内。所以我不得不把剧本往下移一点，这样身体就存在了。另请注意，我用 innerHTML 属性注释掉了您的行，以免覆盖 body 标记中已有的内容。

它将在本地主机上运行，​​因为您的问题与本地运行之间没有联系。

# blackberry - 如何在黑莓的 FocusChanged 上左右滚动图像

> ID：10191245
> 
> 赞同：0
> 
> 时间：2012-04-17T12:26:32.710
> 
> 标签：blackberry

您好我想在水平滚动字段管理器上添加多个图像。

水平场管理器的起始点是水平的屏幕中间。

焦点图像的位置（y 坐标）向上形成另一个图像。

当焦点从图像更改为右侧而不是滚动图像右侧时。

如果焦点从图像更改到左侧，则将图像向左滚动到屏幕左侧的整个宽度。

但图像的起点在屏幕中间水平方向。

这是我的代码

```
public class MainClass extends MainScreen{
private HorizontalFieldManager hManager;
private HorizontalFieldManager[] hBitmap;
int Height = Display.getHeight();
int Width = Display.getWidth();
private PictureScrollField pictureScrollField;
private String footer_images[] = new String[]
               {"ajtak.jpg","assiant.jpg","astha.jpg","fox_news.jpg",
               "cnbc.jpg","india_news.jpg","zee.jpg"};
private Bitmap [] bitmaps;
private ScrollEntry[] entries;
public MainClass()
{
    hManager = new HorizontalFieldManager()
    {
        protected void sublayout(int maxWidth,int maxHeight)
        {
            super.sublayout(maxWidth, maxHeight);
            setExtent(Width, 60);
        }

    };

    bitmaps = new Bitmap[footer_images.length];
    entries = new ScrollEntry[footer_images.length];

    for(int i =0; i < footer_images.length;i++)
    {
        bitmaps[i] = Bitmap.getBitmapResource(footer_images[i]);
        entries[i] = new ScrollEntry(bitmaps[i], "", "");

    }

    pictureScrollField = new PictureScrollField(36, 36);

    pictureScrollField.setData(entries, 0);
    pictureScrollField.setImageDistance(38);
    pictureScrollField
            .setHighlightStyle(HighlightStyle.ILLUMINATE);
    pictureScrollField.setHighlightBorderColor(Color.GREEN);

    pictureScrollField.setBackground(BackgroundFactory
            .createSolidTransparentBackground(0x212424, 150));

    pictureScrollField.setLabelsVisible(false);

    pictureScrollField.setFocusListener(new FocusChangeListener() {

        public void focusChanged(Field field, int eventType) {  
            if (pictureScrollField.isFocus()) {

                switch (pictureScrollField.getCurrentImageIndex()) {
                case 0:
                    setMargin(0, 0, 20, 0);
                    break;

                case 1:
                    setMargin(0, 0, 20, 0);
                    break;

                case 2:
                    setMargin(0, 0, 20, 0);
                    break;

                case 3:
                    setMargin(0, 0, 20, 0);
                    break;

                case 4:
                    setMargin(0, 0, 20, 0);
                    break;

                case 5:
                    setMargin(0, 0, 20, 0);
                    break;

                default:
                    break;
                }

            }

        }

    });
    hManager.add(pictureScrollField);
    add(hManager);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T12:43:49.790

试试这个

```
 private PictureScrollField _pictureScrollField;     

    ScrollEntry[] entries = new ScrollEntry[ 4 ];
    entries[0] = new ScrollEntry(Bitmap.getBitmapResource("image1.jpg"), "BlackBerry", "image 1");
    entries[1] = new ScrollEntry(Bitmap.getBitmapResource("image2.jpg"), "Blue logo", "image 2");
    entries[2] = new ScrollEntry(Bitmap.getBitmapResource("image3.jpg"), "Black logo", "image 3");
    entries[3] = new ScrollEntry(Bitmap.getBitmapResource("image3.jpg"), "Building", "image 4");

    _pictureScrollField = new PictureScrollField(150, 100);
    _pictureScrollField.setData(entries, 0);
    add(_pictureScrollField); 
```

# r - 使用 WDI 包导入区域内所有国家的世界银行数据

> ID：10191246
> 
> 赞同：5
> 
> 时间：2012-04-17T12:26:34.473
> 
> 标签：r

我正在使用允许通过其 API 导入世界银行数据的`R`包。`WDI`问题是我想查看一个地区的所有国家，例如撒哈拉以南非洲。但是为此我需要指定这么多国家（SSH 现在是 49）。

首先这样做效率很低，尤其是考虑到 data.worldbank.org 上的数据浏览器确实允许您选择一个地区。

然而，真正的问题是国家的数量变得难以处理（我猜）世界银行 API，因为过多的国家会产生 HTTP 错误。导致我不得不将请求分成两部分。

但是，当使用更有效的`ALL`值时，即使观察次数要高得多，也不会出现错误。

现在我的代码如下所示：

```
library(WDI)

COUNTRIES1 <- c( "AGO","BEN","BWA","BFA","BDI","CMR","CPV","CAF","TCD","COM","ZAR","COG","CIV","GNQ","ERI","ETH","GAB","GMB","GHA","GNB","GIN","KEN","LSO","LBR","MDG" )
COUNTRIES2 <- c( "MWI","MLI","MRT","MUS","MYT","MOZ","NAM","NER","NGA","RWA","STP","SEN","SYC","SLE","SOM","ZAF","SSD","SDN","SWZ","TZA","TGO","UGA","ZMB","ZWE" )
INDICATORS <- c("NY.GDP.PCAP.KN", "SP.DYN.TFRT.IN", "SP.POP.TOTL")

LONG1 <- WDI( country=COUNTRIES1, indicator=INDICATORS, start=1960, end=2009, extra=FALSE)
LONG2 <- WDI( country=COUNTRIES2, indicator=INDICATORS, start=1960, end=2009, extra=FALSE)

LONG <- merge( LONG1, LONG2, by=intersect( names(LONG1),names(LONG2) ), all=TRUE ) 
```

我曾尝试将`SSH`其用作国家/地区代码，但这给出了所有 SSH 国家/地区的汇总，而不是所有观察结果。

有任何想法吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-17T12:43:03.920

您可以下载所有国家/地区的数据并使用`Region`过滤结果。

```
library(WDI)
indicators <- c("NY.GDP.PCAP.KN", "SP.DYN.TFRT.IN", "SP.POP.TOTL")
d <- WDI("all", indicators, extra=TRUE, start=1960, end=2009)
# Discard unwanted rows
d <- d[ which(d$Region == "Sub-Saharan Africa"), ]
# Discard unwanted columns
d <- d[,1:6]
head(d) 
```

# database - 我在哪里可以找到 soket.io 多房间聊天的高级教程？

> ID：10191249
> 
> 赞同：2
> 
> 时间：2012-04-17T12:26:49.660
> 
> 标签：database, sockets, client-server, chat

有大量的 socket.io “how to”来创建最简单的聊天室，但我没有发现如何将它用于更高级的聊天室。

我从头开始创建了一个具有以下特征的聊天系统（使用 php/mysql/ajax）：

*   高级成员管理（登录名、头像、个人信息、存储伪供独家使用等）
*   用户可以加入现有的聊天室或创建新的聊天室
*   可以在每个公共聊天室中创建私人房间与任何人私下交谈
*   可以通过根据其伪和/或 IP 地址驱逐成员来管理和管理每个聊天室，删除特定消息等
*   ETC...

问题是我创建的系统的可扩展性不是很好，因为它使用了短轮询技术，如果我有太多在线用户，可能会导致服务器崩溃。显然，使用 socket.io 可以解决这个问题，但这意味着在服务器端和客户端都使用从头到尾的 javascript（我不是 javascript 开发人员，只是一个 javascript 用户）。

我在学习新事物方面没有问题，但是网络上的大量教程向您展示如何使用 socket.io 进行聊天仅限于非常简约的（连接、写入、读取，仅此而已），这对于开始来说很好，但是对于更雄心勃勃的项目不是很有用。

它还表明，使用 socket.io，数据库不在图片中，但是如何相应地重新考虑您的系统（永久存储用户和他的个人信息，检索消息历史记录，过滤所有以前的消息，显示 15 条以前的消息当用户连接自己，从私人房间到主要公共房间来回走动，同时仍然可以访问您希望在每个房间上看到的所有先前消息，等等...）。如果没有数据库，即使在纸面上，我也无法弄清楚如何实现所有这些，而且我在任何地方都没有找到任何相关信息。

我不希望找到我的 php 高级聊天室的现有 soket.io 版本，这不是我想要的。我正在寻找综合教程（免费或免费），为我提供使用 socket.io 创建具有上述功能的系统所需的所有背景知识。

我已经在网上搜索了两天，但我仍然不知道如何超越最简单的聊天系统。我知道如何编写一些东西并将其推送到所有用户的浏览器中供他们阅读。它很整洁，但现在呢？

有什么参考或建议吗？

谢谢你（对不起我糟糕的英语）。

PS：我尝试使用“socket.io”和“tutorials”标签，但即使它们存在，无论出于何种原因，我都不允许使用它们......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T08:18:57.200

如果您需要有关基于节点的聊天的高级教程。检查这个：

[Nodechat.js 继续——身份验证、配置文件、小马和更简陋的 socket.io](http://fzysqr.com/2011/03/27/nodechat-js-continued-authentication-profiles-ponies-and-a-meaner-socket-io/)

它是基于 BackBone.Js 构建的 Node.js 和 Socket.Js。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T12:31:22.637

要获得更好的可扩展聊天系统，您是否尝试过 Meteor [(www.meteor.com)](http://www.meteor.com)。它基于 Node.Js 构建，可轻松连接到 MongoDB。

恕我直言，这最适合创建实时 Web 应用程序。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-08T11:19:28.607

[http://udidu.blogspot.co.il/2012/11/chat-evolution-nodejs-and-socketio.html](http://udidu.blogspot.co.il/2012/11/chat-evolution-nodejs-and-socketio.html)

这是一个非常好的教程，即将与可以创建/加入/离开聊天室并相互交谈的用户构建一个应用程序。您可以扩展它，并赋予房间创建者“权力”，将他标记为“**管理员**”，然后理论上他可以向服务器发出**管理员**命令，例如“*静音用户*”、“*禁止用户*”、*删除某条消息*“等等..这很简单，因为您所要做的就是从客户端收听这些消息，然后在服务器上采取行动。

因此，如果某个用户在服务器上被标记为“**管理员**”，然后假设他想删除聊天室中某人的消息，那么您在服务器上执行以下操作：（粗略示例）

```
...
io.sockets.on('connection', function (socket){
    socket.on('deleteMessage', messages.delete );
});

var messages = {
    save : function(msg){
       // saves a message to the DB (which is sorted by rooms)
    },
    remove: function(user, data){
       // check if the 'user' is either an Admin or the person who wrote that message
       ...
       // if it's either one of them, then find that message in the DB, then
       // remove it, and update all clients' sockets.
       socket.emit('messageRemoved', data);
    },
    add: function(msg){
       // update all clients with current message
    },
    ...(more methods)
} 
```

# c# - winforms在listview中选择部分文本

> ID：10191254
> 
> 赞同：1
> 
> 时间：2012-04-17T12:27:18.553
> 
> 标签：c#, winforms, listview

我正在寻找在列表视图中选择 Item.subItemsCollection 中部分文本的方法，例如

```
 item.subitem[0].text = "thats text"; 
```

但我只想突出显示（更改颜色）“thats”字中的字母“ats”。谁能帮我？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T23:37:19.387

当然没有简单的方法可以做到这一点，但是您可以使用其他人的工作:)

[ObjectListView](http://www.codeproject.com/Articles/16009/A-Much-Easier-to-Use-ListView) - 一个围绕 .NET ListView 控件的开源包装器 - 有一个`HighlightTextRenderer`可以做到这一点。[在这里阅读](http://objectlistview.sourceforge.net/cs/recipes.html#highlighttextrenderer)。

在这里，它突出显示“er”：

![在此处输入图像描述](../Images/295a10e1288365fc31b46e307c15100c.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-22T22:53:38.410

您还可以检查[Better ListView](http://www.componentowl.com/better-listview) - 它包含执行此操作的项目突出显示功能（可以通过键入和搜索过滤与搜索相结合）：

![在此处输入图像描述](../Images/5fd37de757db33d993202f90f0880fa1.png)

# vb.net - 错误：从字符串加载报告转换为类型整数失败无效

> ID：10191256
> 
> 赞同：0
> 
> 时间：2012-04-17T12:27:22.123
> 
> 标签：vb.net, crystal-reports

有一个搜索按钮可以使用年份查看关于 datagridview 的报告。所以当数据库中的项目越多时，它对应的年份（比如 2012 年）...上述异常是通过填充 datgridview 引发的，当它尝试时会出现问题连接水晶报表，它显示错误...请记住，只有当我的数据库中有更多记录（正好超过 100 行）时，我才会遇到这个问题...当我从数据库中删除几行时，它工作正常。 .我创建了一个表并将该表添加到数据集中，然后将该表分配为水晶报表的数据源

```
Public Class crystalform1

Dim r As DataRow
Dim t As DataTable
Dim ds1 As New DataSet1()
Sub New()

    ' This call is required by the designer.
    InitializeComponent()

    ' Add any initialization after the InitializeComponent() call.

    t = ds1.Tables.Add("DataTable1")

    t.Columns.Add("invoiceno", Type.GetType("System.Int32"))
    t.Columns.Add("customer_name", Type.GetType("System.String"))
    t.Columns.Add("customer_phonenumber", Type.GetType("System.Int32"))
    t.Columns.Add("date", Type.GetType("System.String"))
    t.Columns.Add("product_item", Type.GetType("System.String"))
    t.Columns.Add("bookno", Type.GetType("System.Int32"))
    t.Columns.Add("serialno", Type.GetType("System.Int32"))
    t.Columns.Add("price", Type.GetType("System.Single"))
    t.Columns.Add("quantity", Type.GetType("System.Int32"))

    t.Columns.Add("discount", Type.GetType("System.Int32"))

    t.Columns.Add("paymentby", Type.GetType("System.String"))
    t.Columns.Add("checkno", Type.GetType("System.Int32"))
    t.Columns.Add("checkdate", Type.GetType(" System.String"))
    t.Columns.Add("total", Type.GetType("System.Single"))
    t.Columns.Add("totalamount", Type.GetType("System.Single"))
End Sub
 Sub formcall(ByVal invoiceno As Integer, ByVal date1 As Date, ByVal customername As String, ByVal customerphone As Integer, ByVal product As String, ByVal bookno As Integer, ByVal serialno As Integer, ByVal price As Single, ByVal quantity As Integer, ByVal discount As Integer, ByVal payment As String, ByVal checkno As Integer, ByVal checkdate As String, ByVal total As Single, ByVal totalamount As Single)
    ' This call is required by the designer.
    If IsDate(checkdate) Then
        CType(checkdate, Date).ToShortDateString()
    End If

    r = t.NewRow()
    r("invoiceno") = invoiceno
    r("customer_Name") = customername
    r("customer_Phonenumber") = customerphone
    r("date") = date1.ToShortDateString
    r("product_item") = product
    r("bookNo") = bookno
    r("serialNo") = serialno
    r("price") = price
    r("quantity") = quantity
    r("discount") = discount
    r("paymentby") = payment
    r("checkno") = checkno
    r("checkdate") = checkdate
    r("total") = total
    r("totalamount") = totalamount

    t.Rows.Add(r)
    Dim objRpt As New CrystalReport2

 Try
            objRpt.SetDataSource(ds1.Tables(1))
            CrystalReportViewer1.ReportSource = objRpt /*exception is showing here*/
        Catch ex As Exception
            MsgBox("Report Error", ex.Message())
        End Try

End Sub 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T14:56:01.560

尝试评论所有这些行

```
r("invoiceno") = invoiceno
r("customer_Name") = customername
r("customer_Phonenumber") = customerphone
r("date") = date1.ToShortDateString
r("product_item") = product
r("bookNo") = bookno
r("serialNo") = serialno
r("price") = price
r("quantity") = quantity
r("discount") = discount
r("paymentby") = payment
r("checkno") = checkno
r("checkdate") = checkdate
r("total") = total
r("totalamount") = totalamount 
```

然后一一取消注释。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-18T15:22:38.070

我自己解决了这个问题，这里的问题是，如果数据库上有更多的数据，我的水晶报表会被加载很多次，因为我在 formcall() 方法中设置了水晶报表的数据源，这个方法调用的次数超过每行添加到表中 100 次，所以同一个报告加载了很多次。我在新方法中声明了“setDatasource（ds.table（1））”，只有在将所有行添加到表中后才会由 click_button 事件调用数据源表..感谢您的帮助

# activemq - 在 OSGI (KARAF) 上使用 ActiveMQ 上的 STOMP 问题

> ID：10191261
> 
> 赞同：0
> 
> 时间：2012-04-17T12:27:36.127
> 
> 标签：activemq, stomp, apache-karaf

我在 Ubuntu Linux 10.04 上安装了 Karaf (2.2.5)。在 Karaf 之上安装了 ActiveMQ 作为功能。使用 stomp 连接器创建了一个自定义代理。现在，当我尝试从 Java 客户端连接到这个 stomp 代理时，我得到“java.net.SocketTimeoutException：读取超时”

如果我将 ActiveMQ 作为独立应用程序启动，则相同的客户端可以正常工作。

提前致谢

这是我的配置：

```
<beans
  xmlns="http://www.springframework.org/schema/beans"
  xmlns:amq="http://activemq.apache.org/schema/core"
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xmlns:osgi="http://www.springframework.org/schema/osgi"
  xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-2.0.xsd
  http://activemq.apache.org/schema/core http://activemq.apache.org/schema/core/activemq-core.xsd   
  http://activemq.apache.org/camel/schema/spring http://activemq.apache.org/camel/schema/spring/camel-spring.xsd
  http://www.springframework.org/schema/osgi http://www.springframework.org/schema/osgi/spring-osgi.xsd">
    <bean class="org.springframework.beans.factory.config.PropertyPlaceholderConfigurer"/>
    <broker xmlns="http://activemq.apache.org/schema/core" brokerName="dios" dataDirectory="${karaf.data}/activemq/dios" useShutdownHook="false">
        <destinationPolicy>
            <policyMap>
              <policyEntries>
                <policyEntry topic=">" producerFlowControl="true" memoryLimit="1mb">
                  <pendingSubscriberPolicy>
                    <vmCursor />
                  </pendingSubscriberPolicy>
                </policyEntry>
                <policyEntry queue=">" producerFlowControl="true" memoryLimit="1mb">
                </policyEntry>
              </policyEntries>
            </policyMap>
        </destinationPolicy> 
        <managementContext>
            <managementContext createConnector="false"/>
        </managementContext>
        <persistenceAdapter>
            <kahaDB directory="${karaf.data}/activemq/dios/kahadb"/>
        </persistenceAdapter>
        <shutdownHooks>
           <bean xmlns="http://www.springframework.org/schema/beans" id="hook" class="org.apache.activemq.hooks.SpringContextHook" />
        </shutdownHooks>
        <transportConnectors>
            <transportConnector name="openwire" uri="tcp://0.0.0.0:61616"/>
            <transportConnector name="stomp" uri="stomp://0.0.0.0:61613?trace=true"/>
        </transportConnectors>
    </broker>
    <bean id="activemqConnectionFactory" class="org.apache.activemq.ActiveMQConnectionFactory">
        <property name="brokerURL" value="tcp://0.0.0.0:61616" />
    </bean>
    <bean id="pooledConnectionFactory" class="org.apache.activemq.pool.PooledConnectionFactory">
        <property name="maxConnections" value="8" />
        <property name="connectionFactory" ref="activemqConnectionFactory" />
    </bean>
    <bean id="resourceManager" class="org.apache.activemq.pool.ActiveMQResourceManager" init-method="recoverResource">
          <property name="transactionManager" ref="transactionManager" />
          <property name="connectionFactory" ref="activemqConnectionFactory" />
          <property name="resourceName" value="activemq.dios" />
    </bean>
    <osgi:reference id="transactionManager" interface="javax.transaction.TransactionManager" />
    <osgi:service ref="pooledConnectionFactory">
        <osgi:interfaces>
            <value>javax.jms.ConnectionFactory</value>
        </osgi:interfaces>
        <osgi:service-properties>
            <entry key="name" value="dios"/>
        </osgi:service-properties>
    </osgi:service>
</beans> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T12:48:50.350

我看不出你的配置有明显的问题......就个人而言，我已经停止在 OSGi 中使用 Spring，因为我一直遇到启动时竞争条件。Spring`<osgi:service>`使用超时，因此启动延迟会使一切变得混乱。在 Karaf 2.2.4 下，以下替代方法对我来说效果很好：

*   将此存储库添加到我的 etc/org.apache.karaf.features.cfg 文件中：`mvn:org.apache.activemq/activemq-karaf/${activemq.version}/xml/features`
*   添加通过蓝图编写的 etc/activemq-broker.xml 文件。我[从 Talend 的示例 XML](https://github.com/Talend/tsf/blob/master/talend-sf/src/main/distribution/text/container/etc/activemq-broker.xml)开始，并根据我的需要对其进行了定制。
*   在我自己的 features.xml 文件中声明对 activemq-blueprint 的依赖，如下所示：`<feature version="${activemq.version}">activemq-blueprint</feature>`
*   在我的 features.xml 中声明该 XML 文件：`<bundle>blueprint:file:etc/activemq-broker.xml</bundle>`

总的来说，我不是 Blueprint 的忠实拥护者，但它使这种配置对我来说真的很容易。

# white-framework - 使用 UIAutomation .NET 在桌面上查找所有窗口

> ID：10191265
> 
> 赞同：9
> 
> 时间：2012-04-17T12:27:51.163
> 
> 标签：white-framework, microsoft-ui-automation

我正在尝试使用 .NET UIAutomation OR White 框架查找所有桌面窗口。我试过 ：

1.)

```
 AutomationElement rootElement = AutomationElement.RootElement;
            var winCollection = rootElement.FindAll(TreeScope.Subtree, Condition.TrueCondition); 
```

2.)

```
 Desktop.Instance.Windows(); 
```

两者都抛出 ArgumentException。请让我知道是否有其他方法可以做到这一点...

更新/回答：Desktop.Instance.Windows(); 工作正常，除了它在使用 VS2010 调试代码时抛出异常。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-17T20:54:22.533

`TreeScope.Children`如果您想访问桌面的直接子元素，使用应该可以工作::

```
 AutomationElement rootElement = AutomationElement.RootElement;
    var winCollection = rootElement.FindAll(TreeScope.Children, Condition.TrueCondition);

    foreach (AutomationElement element in winCollection)
        Console.WriteLine(element.Current.Name); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-01T20:27:28.117

工作中的 UI 自动化项目使用：

```
List<White.Core.UIItems.WindowItems.Window> windows = WindowFactory.Desktop.DesktopWindows(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-19T13:59:07.063

通过 FindAll 调用是不可能的。某些类型的窗口只能通过调用 FindWindow 才能使用。这些可能是 MMC 控制台的子窗口，此时 mmc 的主窗口被隐藏且 UI 自动化不可用。有没有办法让窗口所在的线程，以防窗口不是应用程序的主窗口？答案是枚举线程（通常需要管理权限）并计算出我们感兴趣的窗口属于哪个线程。

一般来说，似乎没有办法像 Spy++ 那样枚举所有窗口。例如，如果 UI 自动化搜索没有结果，Get-UIAWindow 只会调用 FindWindow。

# android - 有没有办法检测通知栏是否已被清除？

> ID：10191266
> 
> 赞同：4
> 
> 时间：2012-04-17T12:27:52.413
> 
> 标签：android, events, notifications

我想在用户清除通知栏时收到通知（单击“清除”按钮）。

我的意思是那个按钮：

![在此处输入图像描述](../Images/91001d6c99c2d4d133f4dc52fa682788.png)

有没有办法做到这一点？通过广播还是什么？

提前致谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-17T12:44:17.887

对于您自己的通知，用于[`deleteIntent`](http://developer.android.com/reference/android/app/Notification.html#deleteIntent)指定`PendingIntent`在用户清除您的通知时执行的。

但是，对于除您自己的通知之外的其他通知，您通常无法确定该按钮是否已被按下。

# java - 重构后保持兼容性而不修改旧版本

> ID：10191267
> 
> 赞同：2
> 
> 时间：2012-04-17T12:27:53.730
> 
> 标签：java, inheritance, compatibility

我需要开发一种模块，它将作为 JAR 提供，使 2 个产品兼容。假设我有一个名为 ProductSource 的产品和另一个名为 ProductDep 的产品。ProductSource 是完全独立的，ProductDep 调用几个方法/类，甚至从 ProductSource 继承一些类。ProductSource (PS) 和 ProductDep (PD) 一样有多个版本。例如，假设一个客户端使用 PD_v3 和 PS_v3，而另一个客户端使用 PD_V1 和 PS_V3。我们的开发有点讨厌，我们无法更改任何版本，我们只能提供一个将在这些之上加载的 jar。问题是，我们开发的 PS_v3 仅考虑了 PD_v3 的后果，PS_v2 与 PD_v2 以及 PS_v1 与 PD_v1。直到现在我们才认为我们的一些客户使用 PS_vY 和 PD_vX 和 X!=Y。

以下是我需要解决的最坏情况：

PS_v3 类 MyClassA ：

```
package com.package.a;
import com.package.xxx.AClass;
[...]

/**
 * MyClassA Version 3
 */

public class MyClassA extends AClass
{

    public AType1 method1(AType2 arg1, AType3 arg2){ return null; //or whatever}
    public void method2(AType1 arg1){}
}

public abstract class AClass
{

    public abstract AType1 method1(AType2 arg1, AType3 arg2);
    public abstract void method2(AType1 arg1);
} 
```

我的 PD_v2 将使用这个类，但它是用 PS_v2 开发的，它具有相同的类，如下所示：

```
package com.some.other.package.a;
import com.some.other.package.xxx.AClass;
[...]
/**
 * MyClassA version 2
 */
public class MyClassA extends AClass
{

    public AType1 method1(AType2 arg1, AType3 arg2, AType4 arg3){ return null; //or whatever}
    public abstract AType1 method2(){}
}

public abstract class AClass
{

    public abstract AType1 method1(AType2 arg1, AType3 arg2, AType4 arg3);
    public abstract AType1 method2();
} 
```

因此，如果我的 PD_V2 想要使用我的 PD_V3 类，他将遇到一些运行时问题。

例子 ：

```
import com.some.other.package.xxx.AClass; //error on this one because he cannot find the package
public class MyClassImpl extends AClass
{
    public AType1 method1(AType2 arg1, AType3 arg2, AType4 arg3){ return null; //or whatever}
    public abstract AType1 method2(){}
} 
```

但他使用 V3 包 def 所以他不会找到 com.package.a.AClass 所以我的想法是寻找每个版本并提供一个包含方法的所有可能签名的 jar。

所以我的想法是提供这样的东西：

```
package com.some.other.package.a;
import com.some.other.package.xxx.AClass;
[...]
/**
 * MyClassA version 2
 */
public class MyClassA extends AClass
{

    public AType1 method1(AType2 arg1, AType3 arg2, AType4 arg3){ 
    try{
        //we try to load our latest version
        //no need to search for the class version in this package it will be loaded automatically if it exists
        Class<?> clazz =  Class.forName("com.package.a.MyClassA");
        clazz.getConstructor(......)
        etc....
    } catch(ClassNotFoundException e){....}
    }
} 
```

我的问题是抽象类......或者如果你有更好的解决方案。现在我正在插入我的兼容性文件夹，该文件夹将包含以前版本使用的所有类以及自新版本以来已删除的所有方法（是的，我的团队不知道注释已弃用 TT）或任何更改甚至更改的方法签名班级搬家了。

# asp.net - 限制 Datalist 的每列中的行数

> ID：10191273
> 
> 赞同：1
> 
> 时间：2012-04-17T12:28:23.373
> 
> 标签：asp.net

有没有办法在 asp.net 数据列表中有五列并且每列只显示 5 行。所以它会导致这种格式

```
1 6
2 7
3 8
4 9
5 10

```

我已经将重复方向设置为“垂直”，并将重复列设置为 5，但每列显示 8 个，共 5 列。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T12:34:54.587

要获得 5 行和 5 列，那么您的 DataSource 需要包含 25 个项目：

## HTML：

```
<!DOCTYPE html>

<html>
<head runat="server">
    <title></title>
    <meta charset="utf-8" />
</head>
<body>
    <form id="form1" runat="server">
        <asp:DataList ID="myDataList" runat="server" 
            RepeatColumns="5" 
            CellPadding="10" 
            ForeColor="#333333" 
            RepeatLayout="Table" 
            ShowFooter="False" 
            ShowHeader="False">
            <AlternatingItemStyle BackColor="White" />
            <ItemStyle BackColor="#EFF3FB" />
            <SelectedItemStyle BackColor="#D1DDF1" 
                Font-Bold="True" ForeColor="#333333" />
            <ItemTemplate>
                <asp:Label ID="myLabel" runat="server" 
                    Text="<%# Container.DataItem.ToString() %>" />
            </ItemTemplate>
        </asp:DataList>
    </form>
</body>
</html> 
```

## C#代码隐藏：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.UI;
using System.Web.UI.WebControls;

public partial class test7 : System.Web.UI.Page
{
    protected void Page_Load(object sender, EventArgs e)
    {
        List<int> myList = new List<int>();

        for(int i=1; i<26; i++) {
            myList.Add(i);
        }

        myDataList.DataSource = myList;
        myDataList.DataBind();
    }
} 
```

## 输出：

![在此处输入图像描述](../Images/0497dab05eff31da4f1fce1aa24509c1.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T12:36:35.927

有多种方法可以通过数据库查询来做到这一点

```
select Top 5 Id,Name from table; 
```

# ibm-rad - IBM Rational Application Developer V8.5 Beta 的优缺点

> ID：10191274
> 
> 赞同：0
> 
> 时间：2012-04-17T12:28:24.090
> 
> 标签：ibm-rad, ibm-rational

我正在对 IBM RAD 8.5beta 进行一些研究。有没有人开始使用 IBM Rational Application Developer V8.5 Beta 进行开发？我一直在谷歌上搜索 RAD 8.5beta 的较新版本，只是想知道它相对于以前版本的优势。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T03:46:20.323

我在 IBM 网站上找到了它，希望这会有所帮助

一些有用的链接

[安装 Rational Application Developer](http://publib.boulder.ibm.com/infocenter/radhelp/v8r5/index.jsp?topic=/com.ibm.rad.install.doc/topics/c_intro_product.html)

[Rational Application Developer for WebSphere Software，版本 8.5 Beta 的已知问题和限制](http://publib.boulder.ibm.com/infocenter/radhelp/v8r5/index.jsp?topic=/com.ibm.rad.install.doc/topics/c_intro_product.html)

[升级和迁移](http://publib.boulder.ibm.com/infocenter/radhelp/v8r5/index.jsp?topic=/com.ibm.rad.install.doc/topics/c_intro_product.html)

**Rational Application Developer for WebSphere Software 的新特性，v 8.5 Beta**

*   Java 7 支持
*   富页面编辑器
*   JSON 验证
*   基于 JavaScript 更改的 HTML 重新验证
*   Dojo 库现在在 Rational Application Developer 和 WebSphere Developer Tools 中是可选的。新的 Dojo 代码辅助模板。
*   JSF 与富页面编辑器的集成
*   支持模块化 EJB 应用程序
*   [分析和代码覆盖工具](https://www.ibm.com/developerworks/wikis/download/attachments/192315438/ProfileAndCodeCoverage.swf?version=1)
*   支持创建 JSF 2.0 portlet。
*   支持使用 Facelets 构建的 Portlet。
*   用于为智能手机和平板电脑创建 portlet 的工具。
*   具有 CSS3 和 HTML5 支持的 Portlet 开发的富页面编辑器功能。
*   将应用程序发布到在 Java 6 或 Java 7 上运行的 WebSphere Application Server v8.5 Beta。
*   WebSphere Application Server Liberty Profile 旨在提高开发人员的工作效率。这个轻量级服务器的启动时间非常快。WebSphere Runtime Explorer 视图帮助您浏览运行时的内容以及创建新的运行时和服务器。特定服务器的运行时和服务器配置可以打包在一个 zip 文件中以供共享。
*   [服务组件架构](http://Service%20Component%20Architecture)

# c# - 搜索等效的 Fluent Nhibernate Mapping - Mapping Map as Dictionary

> ID：10191275
> 
> 赞同：1
> 
> 时间：2012-04-17T12:28:28.083
> 
> 标签：c#, fluent-nhibernate, nhibernate-mapping

我在 NHibernate 2.1 中为以下基于属性的映射搜索等效的 Fluent 映射

```
[Class(typeof(Article), Table = "ARTIKEL")]
public class Article  {

  [Id(0, Name = "Id", Column = "Id")]
  public virtual int Id { get; set; }

  [Map(0)]
  [Key(1, Column = "MainArticle")]
  [IndexManyToMany(2, ClassType = typeof(Article), Column = "ChildArticle")]
  [Element(3, Column = "Amount", NotNull = true)]
  public virtual IDictionary<Article, decimal> Bundle { get; set; }

} 
```

我无法获得适用于 NHibernate 3.0 的流畅映射。

我结束了

```
HasManyToMany<Article>().ParentKeyColumn("MainArticle").ChildKyColumn("ChildArticle").AsMap<int>("Amount"); 
```

这会在访问字典时导致“非法访问加载集合”异常...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T17:02:13.243

最后我得到了一个可行的解决方案：

```
HasMany(x => x.Bundle).Table("bundles").KeyColumn("MainArticle").AsEntityMap("ChildArticle").Element("Amount", part => part.Type<decimal>()); 
```

在我的情况下工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T06:02:09.170

```
HasManyToMany(x => x.Bundle)
    .ParentKeyColumn("MainArticle")
    .ChildKyColumn("ChildArticle")
    .AsEntityMap("ChildArticle")
    .Element("Amount"); 
```

# php - Twitter 从 aouth 令牌和秘密中获取用户访问令牌和访问令牌秘密

> ID：10191276
> 
> 赞同：3
> 
> 时间：2012-04-17T12:28:30.110
> 
> 标签：php, api, twitter

下面是我用来获取 oauth 和 oauth 秘密的内容。如何获取用户访问令牌和访问令牌秘密？

我没有看到文档中提到的任何使用上述令牌的程序

```
 require("twitteroauth/twitteroauth.php");
// The TwitterOAuth instance
$twitteroauth = new TwitterOAuth('YOUR_CONSUMER_KEY', 'YOUR_CONSUMER_SECRET');
// Requesting authentication tokens, the parameter is the URL we will be redirected to
$request_token = $twitteroauth->getRequestToken('localhost.com/…');

// Saving them into the session
$_SESSION['oauth_token'] = $request_token['oauth_token'];
$_SESSION['oauth_token_secret'] = $request_token['oauth_token_secret'];

// If everything goes well..
if($twitteroauth->http_code==200){
// Let's generate the URL and redirect
$url = $twitteroauth->getAuthorizeURL($request_token['oauth_token']); header('Location: '. $url); } else { // It's a bad idea to kill the script, but we've got to know when there's an error.
die('Something wrong happened.');
} 
```

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T12:54:41.393

完整程序（我相信我的 twitterOAuth 库和你的一样）

```
<?php 
/**
 * twitter_go.php -- users opens it and gets redirected to twitter.com
 */

    require (dirname(__FILE__) . '/twoauth/twitterOAuth.php');

    $consumer_key = '123abcd';
    $consumer_secret = '1234567890';

    $to = new TwitterOAuth($consumer_key, $consumer_secret);

    $tok = $to->getRequestToken();

    $token = $tok['oauth_token'];
    $secret = $tok['oauth_token_secret'];
    $time = $_SERVER['REQUEST_TIME'];

    //temporary things, i will need them in next function, so i put them in cookie
    setcookie("ttok", $token, $time + 3600 * 30, '/'); //,'.domain.com'); //migh need to add domain if got problems
    setcookie("tsec", $secret, $time + 3600 * 30, '/'); //,'.domain.com');

    $request_link = $to->getAuthorizeURL($token);

    //die($request_link);
    header('Location: ' . $request_link);

?>

<?php 
    /**
     * twitter_back.php  -- users gets redirected here from twitter (if user allowed you app)
     * you can specify this url in https://dev.twitter.com/
     */

        require (dirname(__FILE__) . '/twoauth/twitterOAuth.php');

        $consumer_key = '123abcd';
        $consumer_secret = '1234567890';

        $oauth_token = $_GET['oauth_token'] //  http://domain.com/twitter_back.php?oauth_token=MQZFhVRAP6jjsJdTunRYPXoPFzsXXKK0mQS3SxhNXZI&oauth_verifier=A5tYHnAsbxf3DBinZ1dZEj0hPgVdQ6vvjBJYg5UdJI

        if(!isset($_COOKIE['ttok'])) {
            die('no cookie, no party');
        }
        $ttok = $_COOKIE['ttok'];
        $tsec = $_COOKIE['tsec'];

        $to = new TwitterOAuth($consumer_key, $consumer_secret, $ttok, $tsec);
        $tok = $to->getAccessToken();
        if(!isset($tok['oauth_token'])) {
            die('try again!');
        }
        $btok = $tok['oauth_token'];
        $bsec = $tok['oauth_token_secret'];

        $to = new TwitterOAuth($consumer_key, $consumer_secret, $btok, $bsec);
        $content = $to->OAuthRequest('http://twitter.com/account/verify_credentials.xml');
        $user = simplexml_load_string($content);
        $userid = $user->id . ''; //typecast to string
        $screen_name = $user->screen_name . '';

        //delete temp. cookies
        setcookie("ttok", '', 0, '/');
        setcookie("tsec", '', 0, '/');

        /**
         * at this point you have everything on this user
         */
         print_r($user);
 ?> 
```

# serialization - Java & EJB3：如何正确地将 @Entity 对象从客户端传递到服务器？

> ID：10191279
> 
> 赞同：2
> 
> 时间：2012-04-17T12:28:47.527
> 
> 标签：serialization, jpa, ejb, entity, rmi

我目前正在尝试通过调用由 Netbeans 自动生成的外观上的业务方法（实体类的会话 Bean 向导）将 @Entity 对象从独立客户端传递到服务器企业应用程序。

@Entity 类由两个字符串字段组成。但是当对象到达服务器端时，所有字段都是“null”，尽管我在调用门面的远程方法之前在客户端正确初始化了实体对象，而门面的远程方法又应该将对象存储到我的 MySQL 数据库中（在事实上它被存储了，但是有那些空引用）。没有错误，除了将 @Entity 对象从客户端传递到服务器之外，一切正常。

反之亦然。我在表中手动添加了一行，并调用了外观的远程业务方法 find(Object id)，以便将 db 的条目返回给客户端。编组在这个方向上工作得很好。

基本上它由 3 个项目组成（附在底部的类）：

1.  Enterprise-App/EJB：持有facade的实现和到MySQL的JDBC连接
2.  Java Class-Library：保存远程业务方法和实体bean的接口（这个由服务器端和客户端共享（引用））
3.  Java Application：构建 InitialContext 并执行 JNDI 查找以获取对外观的远程业务方法的引用

我现在面对这个问题两天了，没有人知道如何解决。互联网搜索完全失败。因此，任何想法都受到高度赞赏 - 提前非常感谢！

任何想法都受到高度赞赏。

A1) EJB/Enterprise-App：这是抽象外观类（由 Netbeans 自动生成）：

```
public abstract class AbstractFacade<T> {
    private Class<T> entityClass;

    public AbstractFacade(Class<T> entityClass) {
        this.entityClass = entityClass;
    }

    protected abstract EntityManager getEntityManager();

    public void create(T entity) {
        getEntityManager().persist(entity);
    }

    public void edit(T entity) {
        getEntityManager().merge(entity);
    }

    public void remove(T entity) {
        getEntityManager().remove(getEntityManager().merge(entity));
    }

    public T find(Object id) {
        return getEntityManager().find(entityClass, id);
    }
} 
```

A2) EJB/Enterprise-App：外观实现（由 Netbeans 自动生成）：

```
@Stateless
public class UserFacade extends AbstractFacade<User> implements UserFacadeRemote {

    @PersistenceContext(unitName = "LawSuiteEE-ejbPU")
    private EntityManager em;

    @Override
    protected EntityManager getEntityManager() {
        return em;
    }

    public UserFacade() {
        super(User.class);
    }

} 
```

B1）共享类库：这是实体类：

```
@Entity
public class User implements Serializable {

    private static final long serialVersionUID = 1L;

    @Id
    @GeneratedValue(strategy = GenerationType.SEQUENCE)
    private Long id;
    private String username;
    private String password;

    public User() { }

    public User(Long id) {
        this.id = id;
    }

    public Long getId() {
        return id;
    }

    public void setId(Long id) {
        this.id = id;
    }

    public Integer getUsername() {
        return username;
    }

    public void setUsername(String username) {
        this.username = username;
    }

    public String getPassword() {
        return password;
    }

    public void setPassword(String password) {
        this.password = password;
    }

} 
```

B2) Shared Class-Library：远程门面接口：

```
@Remote
public interface UserFacadeRemote {
    void create(User user);
    void edit(User user);
    void remove(User user);
    User find(Object id);
} 
```

C) 客户端 Java 应用程序：

```
public class LawSuiteSE {

    private static UserFacadeRemote ctrlUser;

    public LawSuiteSE() {
        try {
            Properties props = new Properties();
            props.put("org.omg.CORBA.ORBInitialHost", "192.168.1.6");
            props.put("org.omg.CORBA.ORBInitialPort", "3700");
            InitialContext ctx = new InitialContext(props);
            ctrlBenutzer = (BenutzerFacadeRemote)ctx.lookup("java:global/LawSuiteEE/LawSuiteEE-ejb/UserFacade!control.UserFacadeRemote");
            User user1 = new User();
            user1.setUsername("testusr");
            user1.setPassword("testpwd");
            ctrlUser.create(user1);
            User user2 = ctrlUser.find(1L);
            System.out.println("username: "+user2.getUsername());
            System.out.println("password: "+user2.getPassword());
        } catch (NamingException ex) {
            System.err.println(ex.getMessage());
        }
    }

    public static void main(String[] args) {
        LawSuiteSE lsse = new LawSuiteSE();
    }

} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-18T12:53:06.247

My guess is it is related to the serialVersionUID you have defined, or the CORBA serializer you are using. Not sure if you can try regular RMI. Try also serializing/deserialing the object just on the client, does it work? Also try just on the server.

My guess is the class versions in your client and server are somehow different. This is most likely related to how JPA weaves the classes on the server. Try disabling weaving in your persistence.xml, does this resolve the issue?

If it does, then try using static weaving of the jar, so both the client and the server share the same jar.

What version of Glassfish and JDK are you using? We have similar tests that call remote session beans from clients in Glassfish, and they do not have any issues.

# android - android中的Wifi三边测量/三角测量

> ID：10191280
> 
> 赞同：1
> 
> 时间：2012-04-17T12:28:49.433
> 
> 标签：android, wifi

我正在使用wifi三边测量进行室内导航应用程序，

我有 3 个接入点，每个接入点都有 lat&lng

```
 //1 
    double Lat0 = 26.0475994;
    double Lng0 = 50.5101893;

            //2 

    double Lat1 = 26.0474428;
    double Lng1 = 50.5096745;

        //3
    double Lat2 = 26.0477956;
    double Lng2 = 50.5097067; 
```

我需要将每个 lat & lng 转换为其 x,y,z 坐标，有人可以帮我解决这个公式吗？[我在这里](https://stackoverflow.com/questions/2813615/trilateration-using-3-latitude-and-longitude-points-and-3-distances)看到了以前的帖子，但我没有得到正确的结果

另外，如果我得到 x,y 是不可能将其转换为它的 lat & lng 吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-03-05T15:25:56.093

要从`latitude`和`longitude`到`x`和`y`坐标转换，您可以使用以下公式：

```
x = (radius of earth) * cos(latitude) * cos(longitude) //radians 
y = (radius of earth) * cos(latitude) * sin(longitude) 
```

要转换回来：

```
lat  = asin(y / (radius of earth)) // degrees
nong = atan(2 * x / y)             // degrees 
```

# ruby - 如何实现这种情况（pointA - pointB）？

> ID：10191291
> 
> 赞同：0
> 
> 时间：2012-04-17T12:30:04.747
> 
> 标签：ruby, algorithm, implementation

目前，我正在实施一项提供集体旅行的交通服务，但我遇到了一个问题：

假设我在下图中得到了点**G** = {A,B,C,D,F,R,W} =>。

![在此处输入图像描述](../Images/77031b5a33c79fd7c384b0d5960e7e22.png)

当用户从(A) -> to(W) 中选择时，它们之间有点：{C,F,R}，我只想提供相互连接的点，如 A->C,C ->F.... 和其他点不应该在选择列表中可见。任何帮助任何提示都会很棒，谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T12:33:38.320

您要问的是像[A*](http://en.wikipedia.org/wiki/A%2a_search_algorithm)这样的寻路算法吗？

# jqgrid - jqGrid使edittype选择适合列宽

> ID：10191296
> 
> 赞同：1
> 
> 时间：2012-04-17T12:31:10.080
> 
> 标签：jqgrid

我有一个 jqGrid，其中包含很多选择编辑器。当一行进入编辑模式时，选择比实际列长。是否可以使网格自动调整选择的大小，以便用户可以（直接）看到它是一个选择？

这是进入编辑模式时的样子：

![在此处输入图像描述](../Images/f42f61f02dfe0241cfda55fa20294bda.png)

它看起来像这样，当下拉时（我已经掩盖了图像中的一些项目）：

![在此处输入图像描述](../Images/fe888c28ed89808b9781b1881b465ac7.png)

这就是我想要的（当然不应该调整列的大小，而是选择）：

![在此处输入图像描述](../Images/eb705635b6e2c451810ba632e48bf631.png)

**编辑：** 我通过为 colModel 中的每个选择设置 editOptions, style: "width: X0px" 部分解决了它。它并不完美，但现在已经足够好了。

# iphone - iOS 邮件客户端中的间歇性图像链接行为

> ID：10191298
> 
> 赞同：4
> 
> 时间：2012-04-17T12:31:18.557
> 
> 标签：iphone, html, ios, email, hyperlink

首先，抱歉，如果这是在错误的站点，这不是专门的开发、管理或其他特定问题。

由于向我报告了一个问题，人们在使用 iPhone 邮件客户端单击这些链接时遇到间歇性问题，因此我不得不在各种平台上测试发送带有“图像链接”的 HTML 电子邮件。

测试邮件非常简单，大致如下：

```
<a href="http://www.google.com">
<img src="something.png"/>
</a> 
```

当邮件到达并单击链接时，我得到以下弹出窗口，而不是客户端跟随链接。如您所见，URL 显示在弹出窗口中，非常清楚地被正确解析。

![弹窗截图](../Images/116685fad41cce28d4c6a0b2eb31caa0.png)

但是，它会**间歇性地**工作！我不能完全确定是什么导致它工作，但大约有 20% 的时间会工作（即使是以前无法工作的同一封电子邮件）。

是什么赋予了？我失去了我的弹珠吗？这是某种 iOS 安全功能来防止垃圾邮件发送者隐藏电子邮件中的链接吗？

邮件通过 Exchange 主动同步帐户传递。

非常感谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-17T21:26:50.117

我可以确认图像映射技术有效....

我以前从未使用过它，但是我们在这里与苹果打交道，所以我们都必须屈服于他们的方式（10 岁的 mac 所有者在这里发言）。

```
<img src="http://cdn2.iconfinder.com/data/icons/web2/Icons/FaceBook_128x128.png" alt="Facbook" usemap="#facebook" /> 
```

只需在 img 标签中引用 usemap="#facebook" ，然后设置地图名称标签和属性...

```
<map name="facebook">
<area shape="rect" coords="0,0,128,128" href="http://www.facebook.com" alt="Facebook" />
</map> 
```

(ps coords="x,y,w,h")

显然不要在同一个文档中重复相同的 usemap 引用。

如此处所述 - [iPhone 上的图片链接不可点击](https://stackoverflow.com/questions/10502045/image-link-on-iphone-is-not-clickable)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-01T10:04:56.413

编辑：由于有关此问题状态的问题已被删除，因此我将参考以下内容进行尝试：[可能的解决方案](https://stackoverflow.com/questions/10502045/image-link-on-iphone-is-not-clickable)

编辑：似乎带有 HTML-Map 的解决方案适用于 iPhone 4（iOS 5.1.1）和 iPad 3。但它似乎不适用于 Android 设备......但这不在范围内无论如何，这个问题在这里。

如果该解决方案也适用于较旧的 iOS 版本，我不知道。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-20T10:05:17.487

我们发现了这个问题的新细节。在我们的邮件中还有“文本链接”。如果我们尝试打开“图像链接”，则会出现保存和复制，但如果我们首先单击“文本链接”，它工作得很好，返回邮件并单击“图像链接”它神秘地工作。似乎邮件客户端无法通过“图像链接”单击打开与 Safari 的连接。如果连接已经打开（通过“文本链接”单击）它可以工作。

# soundcloud - 使用来自链接的不同集合重新加载 soundcloud html 小部件

> ID：10191299
> 
> 赞同：0
> 
> 时间：2012-04-17T12:31:18.757
> 
> 标签：soundcloud

SoundCloud 支持人员建议我在此处发布此内容-希望您能提供帮助。我想在我的网站上使用 html5 小部件并访问不同的集合，但是，我希望能够通过单击页面上的不同链接来重新加载具有不同集合的小部件，而不是在一个页面上有多个小部件。看来你可以使用 API 来做到这一点，我一直在玩 w.soundcloud.com/player/api_playground.html 并通过将 api.soundclound.com url 放在适当的框中并单击“来加载我的设置”重新加载小部件”。

我真的根本不懂javascript，所以我希望从那个页面复制源代码并尝试编辑它来做我想做的事。但是，当它托管在我的网站上时，我什至无法加载该页面：

[http://www.indigomusic.co.uk/SCtest/playground.htm](http://www.indigomusic.co.uk/SCtest/playground.htm)

我下载了 api.js 并将其放在我服务器上的一个文件夹中，但我显然缺少步骤。我已经阅读了[http://developers.soundcloud.com/docs/html5-widget#introduction](http://developers.soundcloud.com/docs/html5-widget#introduction)但它显然假设了我只是没有的 JavaScript 知识水平......

……你能帮忙吗？

非常感谢，

丹·塞尔比

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T21:14:07.677

您不必为此使用 Widget API。这是一个使用 jQuery 和 SoundCloud SDK 执行您描述的简单示例：http: [//dl.dropbox.com/u/12477597/Temporary/dynamic-widget-example.html](http://dl.dropbox.com/u/12477597/Temporary/dynamic-widget-example.html)

希望能帮助到你。

# windows-phone-7 - 在 WP7 中检查纵向或横向

> ID：10191300
> 
> 赞同：2
> 
> 时间：2012-04-17T12:31:20.190
> 
> 标签：windows-phone-7

我正在开发一个显示已拍摄照片的 WP/相机应用程序。有没有办法以某种方式知道您当前如何握住相机，以便图像预览将图片显示为纵向或横向？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-17T12:33:17.370

阅读[如何处理 WP7 中的方向变化](http://msdn.microsoft.com/en-us/library/ff769553%28v=vs.92%29.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T03:48:57.827

只需将以下代码替换或添加到 PhoneApplicationFrame .....

```
SupportedOrientations=”PortraitOrLandscape” 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-17T12:36:38.957

在`PhoneApplicationFrame`你有方向属性

# zend-framework - Zend Mail 2.0 附件

> ID：10191301
> 
> 赞同：6
> 
> 时间：2012-04-17T12:31:20.437
> 
> 标签：zend-framework, zend-mail, zend-framework2

谁能给我提供一些关于如何向 ZF2 Mail 组件添加附件的示例？

我喜欢：

```
$message = new Message;
$message->setEncoding('utf-8');
$message->setTo($email);
$message->setReplyTo($replyTo);
$message->setFrom($from);
$message->setSubject($subject);
$message->setBody($body); 
```

但是在需要添加附件时卡住了。谢谢。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-17T17:13:32.690

要添加附件，您只需创建一个新的 MIME 部分并将其添加到邮件中。

例子：

```
// create a new Zend\Mail\Message object
$message  = new Message;

// create a MimeMessage object that will hold the mail body and any attachments
$bodyPart = new MimeMessage;

// create the attachment
$attachment = new MimePart(fopen($pathToAttachment));
// or
$attachment = new MimePart($attachmentContent);

// set attachment content type
$attachment->type = 'image/png';

// create the mime part for the message body
// you can add one for text and one for html if needed
$bodyMessage = new MimePart($body);
$bodyMessage->type = 'text/html';

// add the message body and attachment(s) to the MimeMessage
$bodyPart->setParts(array($bodyMessage, $attachment));

$message->setEncoding('utf-8')
        ->setTo($email)
        ->setReplyTo($replyTo)
        ->setFrom($from)
        ->setSubject($subject)
        ->setBody($bodyPart);  // set the body of the Mail to the MimeMessage with the mail content and attachment 
```

以下是有关该主题的一些有用文档：[ZF2 - Zend\Mail](http://packages.zendframework.com/docs/latest/manual/en/zend.mail.html#zend.mail.message)

# java - 适用于 Android 或 Java 的 Mono，在 Android 上编写游戏

> ID：10191303
> 
> 赞同：1
> 
> 时间：2012-04-17T12:31:21.363
> 
> 标签：java, android, mono, 2d

正如标题所说，我将开始制作 2D Android 游戏，但我不确定我应该选择哪条路径。

我要么使用.net 和mono，要么使用Java。但我有几个问题：

*   哪一个是更好的选择，为什么？
*   哪个更省时？
*   哪一个面临不同设备问题和崩溃的可能性较低？

我在问一些已经工作过或对两者都有想法的专家的答复。

等待您的回复，非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T06:46:38.687

我不知道你是 C# 还是 Java 更好。但我给你我的意见。我们都知道 C# 非常现代，而且确实比 Java 更好。许多 Microsoft 的 .Net 库可以加快您的开发并提高您的程序质量。

但是既然你想开发一个游戏，那么你是否了解 XNA 真的很重要，因为要进一步熟悉 .Net Framework，你需要熟悉 XNA，并且可能还需要熟悉 Farseer 之类的游戏引擎。

最后一句话：如果您是 .Net 开发人员，我强烈建议您选择 Mono 路径，因为现在您可以使用 C# 开发许多跨平台游戏和应用程序，这是一种非常现代的语言，为您提供了许多可能性。此外，如果您使用 MonoGame，由于您开发了 XNA，您只需更改几行代码即可轻松将其移植到 Xbox、Windows Phone、iOS、MAC OS X、Windows。

回答您的问题：哪个更耗时？C# 和 Mono [如果你是 .net 开发人员] 哪一个更容易面临不同的设备问题和崩溃？C# 和单声道

问候，佩曼·莫尔塔扎维

# msbuild - 如何简化 MSBuild 目标？

> ID：10191307
> 
> 赞同：0
> 
> 时间：2012-04-17T12:31:25.170
> 
> 标签：msbuild

```
<Target Name="ProtobufCompile"
        Inputs="@(ProtocCompile)"
        Outputs="$(IntermediateOutputPath)$([System.Text.RegularExpressions.Regex]::Replace('%(ProtocCompile.RelativeDir)','\.\.[/\\]',''))%(ProtocCompile.Filename).cs">
  <PropertyGroup>
    <protooutdir>$(IntermediateOutputPath)$([System.Text.RegularExpressions.Regex]::Replace('%(ProtocCompile.RelativeDir)','\.\.[/\\]',''))</protooutdir>
  </PropertyGroup>
  <Message Text="%(ProtocCompile.Filename)%(ProtocCompile.Extension)" Importance="high" />
  <MakeDir Directories="$(protooutdir)" />
  <Exec Command="$(ProtobufCompiler) --protoc_dir=${PROTOBUF_PROTOC_EXECUTABLE}/.. --proto_path=%(ProtocCompile.RootDir)%(ProtocCompile.Directory) -output_directory=$(protooutdir) %(ProtocCompile.FullPath)" />
</Target>
<!-- set Intputs and Outputs -->
<Target Name="ProtobufCSharpCompile"
        DependsOnTargets="ProtobufCompile">
  <CreateItem Include="$(IntermediateOutputPath)$([System.Text.RegularExpressions.Regex]::Replace('%(ProtocCompile.RelativeDir)','\.\.[/\\]',''))%(ProtocCompile.Filename).cs">
    <Output TaskParameter="Include" ItemName="Compile"/>
  </CreateItem>
</Target>
<Target Name="ProtobufClean"
        BeforeTargets="Clean">
  <Delete Files="$(IntermediateOutputPath)$([System.Text.RegularExpressions.Regex]::Replace('%(ProtocCompile.RelativeDir)','\.\.[/\\]',''))%(ProtocCompile.Filename).cs" />
</Target> 
```

这是一段目标文件。如何简化这段代码？如何减少以下字符串的重复？

```
$(IntermediateOutputPath)$([System.Text.RegularExpressions.Regex]::Replace('%(ProtocCompile.RelativeDir)','\.\.[/\\]','')) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T14:00:24.377

由于您已经为该值指定了一个属性，如下所示：

```
 <PropertyGroup>
  <protooutdir>$(IntermediateOutputPath)$([System.Text.RegularExpressions.Regex]::Replace('%(ProtocCompile.RelativeDir)','\.\.[/\\]',''))</protooutdir>
  </PropertyGroup> 
```

*您可以使用属性$(protooutdir)*替换对该字符串的引用，如下所示：

```
<CreateItem Include="$(protooutdir)%(ProtocCompile.Filename).cs"> 
```

和

```
<Delete Files="$(protooutdir)%(ProtocCompile.Filename).cs" /> 
```

# java - 如何在网络上发布 rdf 文件

> ID：10191308
> 
> 赞同：3
> 
> 时间：2012-04-17T12:31:25.540
> 
> 标签：java, rdf, jena

我用 JENA 创建了一些 RDF 文件。现在我需要在网上公开这个 RDF 文件，但我不知道怎么做。它可能看起来像这个页面：[http](http://dbpedia.org/page/Berlin) ://dbpedia.org/page/Berlin或只是示例。重要的是其他 RDF 工具可以将这些文件读取为 RDF

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T13:14:24.207

Do you have a website or some webspace somewhere? Just save the file as RDF/XML with `.rdf` file extension, or as Turtle with `.ttl` extension, and upload it to the website. Now it's published on the Web, and you can access it with RDF tools like Marbles and Tabulator, get it indexed in RDF search engines like Sindice, and so on.

If you want the file to work not just in RDF tools but also in normal web browsers, then it's a bit more complicated as you need your server to implement “HTTP content negotiation”. One way to do this is with [Pubby](http://www4.wiwiss.fu-berlin.de/pubby/), as described in [this answer](https://stackoverflow.com/questions/10170588/how-to-display-rdf-file-in-web-browser/10171970#10171970).

# asp.net-mvc-3 - 使用 MVCSiteMapProvider 的 DropDownMenu

> ID：10191312
> 
> 赞同：1
> 
> 时间：2012-04-17T12:31:55.663
> 
> 标签：asp.net-mvc-3, razor, asp.net-mvc-sitemap

我正在使用 asp.net mvc3 razor 引擎并尝试使用 MVCSiteMap 提供程序来呈现菜单，但是当我使用多级站点地图时，菜单控件会在没有和悬停功能的情况下呈现页面上的所有节点。

请告诉，有什么办法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-28T04:38:59.530

这不是很好的措辞，但基本上他要求导航菜单功能。我自己也在寻找同样的东西。基本上，MVC 站点地图提供程序默认模板似乎只是一次显示所有节点，无论它是否是子节点。他正在寻找（以及我自己）只显示顶级节点（您可以轻松完成），但是当您将鼠标悬停在父链接上时，儿童级别节点可见。基本上，旧的 asp:Menu 使用原始站点地图提供程序在 ASP.Net 中工作的方式。

我确信这只是一个模板问题，但如果没有其他人已经这样做了，我会感到震惊。虽然没有太多运气找到它。

# php - php facebook autopost 在我的粉丝页面中对所有成员可见？

> ID：10191316
> 
> 赞同：0
> 
> 时间：2012-04-17T12:32:15.377
> 
> 标签：php, facebook, facebook-graph-api

我已经在 facebook 上看到了很多使用 php 发布的帖子，并且已经使用了一些并设法在我的 facebook 粉丝页面上自动发布.....但是.....只有拥有我的应用程序的用户才能在我的粉丝专页

不是一种在我的粉丝页面上发布并且所有成员都可以看到的方式吗？...我是我页面的管理员...我接受流发布和管理页面的应用程序权限，即使是离线访问，即使它不需要。

有没有人知道我如何自动发布并且所有人都可以看到它们？我更喜欢 php 但我不介意即使它使用 js

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T13:55:57.293

您需要“manage_pages”权限才能在页面墙上发布并检查您的页面是否已发布

```
 $attachment =  array(
            'access_token' => $pageAccessToken,
            'name' => $title,
            'link' => $url,
            'description' => $desc
            );
            }

            $ch = curl_init();
            curl_setopt($ch, CURLOPT_URL,'https://graph.facebook.com/'.$pid.'/feed');
            curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, FALSE);
            curl_setopt($ch, CURLOPT_SSL_VERIFYHOST, 2);
            curl_setopt($ch, CURLOPT_POST, true);
            curl_setopt($ch, CURLOPT_POSTFIELDS, $attachment);
            curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);  //to suppress the curl output 
            $result = curl_exec($ch);
            curl_close ($ch); 
```

# java - 存储数据库密码的最佳实践

> ID：10191317
> 
> 赞同：16
> 
> 时间：2012-04-17T12:32:16.367
> 
> 标签：java, mysql, security, passwords

我正在开发一个将访问数据库的自定义服务器应用程序。我需要决定将凭据（和地址）存储到该服务器的位置。

一个常见的解决方案是将凭证放在配置文件中。但是，我不希望受感染的服务器意味着黑客可以访问数据库（托管在单独的服务器上）。

我可以将凭据存储在环境中，但这只是通过默默无闻的安全性。邪恶先生可以在环境中寻找它。

有人建议加密。但是，如果我将密钥存储在可执行文件中，快速反编译（我们使用的是 Java），我仍然注定要失败。

我还想避免每次启动服务器时都必须输入释义。

有什么建议么？我觉得我错过了一些简单的东西。

谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-17T12:37:40.677

我不认为你错过了一些简单的东西。有问题的服务器可以在没有您帮助的情况下连接到数据库，在这种情况下，它*必须*具有凭据；或者如果没有您提供它们，它就无法连接。您可以采取各种步骤，例如您列出的步骤，以使受感染的服务器*更难*向数据库透露凭据，但归根结底，如果它必须拥有这些凭据并将其提供给数据库服务器要连接，它们必须存储在某个地方——或者至少，它必须有一些获取它们的方法，因此在这个意义上是可以破解的。

你最好的选择是专注于尽快发现入侵（受损的服务器），在最坏的情况下保持良好的异地、离线备份，首先设置大量的入侵障碍，等等。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-17T12:40:48.977

我正在分享，我解决这个问题的方式。

*   构建 API，从外部域查询认证细节。
*   使用公钥和私钥阅读详细信息。

但是，老实说，这样做的唯一一件事就是把简单的事情**复杂化了。**之后，我为数据库创建了几个具有不同权限的用户。

像

*   `guest`只能到`SELECT`
*   `mod`只能`CREATE`,,,, `INSERT`_ `UPDATE`_`DELETE`

等并在经过身份验证的用户出现时切换用户。

> 通过用户和会话的结合，到目前为止我已经能够逃脱威胁。当然，代码漏洞必须经过彻底的测试。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-17T13:05:15.507

把它锁起来。防止邪恶先生扎根。我知道，容易吧？

编写一个安全的应用程序并保持您的应用程序服务器处于锁定状态。遵循那里的最佳实践，这就是大部分工作。

当我在安全环境中设置数据库时，与数据库服务器位于同一物理网络上的唯一服务器是应用程序服务器。访问数据库服务器有两种方式：

1.  应用服务器
2.  安慰

因此，为了破坏数据库服务器，他们必须破坏应用程序服务器。

因此，锁定应用程序服务器。当然，唯一比被妥协更糟糕的是被妥协而不知道它。如果您确实发现了妥协，您需要修复漏洞（如果有的话）。取证在这里很重要（启用日志并监控它们）。您还需要制定恢复计划。

预防、检测、纠正和恢复至关重要。

# iphone - 从 AppDelegate 获取当前位置

> ID：10191318
> 
> 赞同：1
> 
> 时间：2012-04-17T12:32:23.463
> 
> 标签：iphone, ios, cllocationmanager

我的 appDelegate 中有一个方法，它获取纬度和经度并返回一个我可以在任何 viewController 中使用的字符串。

**应用代理**：

```
-(void)StartUpdating
{    
    locManager = [[CLLocationManager alloc] init];
    locManager.delegate = self;
    locManager.distanceFilter = kCLDistanceFilterNone; // whenever we move
    locManager.desiredAccuracy = kCLLocationAccuracyHundredMeters; // 100 m
    [locManager startUpdatingLocation];
}

#pragma mark 
#pragma mark locationManager delegate methods 

- (void)locationManager: (CLLocationManager *)manager
    didUpdateToLocation: (CLLocation *)newLocation
           fromLocation: (CLLocation *)oldLocation
{

    float latitude = newLocation.coordinate.latitude;
    strLatitude = [NSString stringWithFormat:@"%f",latitude];
    float longitude = newLocation.coordinate.longitude;
    strLongitude = [NSString stringWithFormat:@"%f", longitude];
    //[self returnLatLongString:strLatitude:strLongitude];

}

-(NSString*)returnLatLongString
{    
    NSString *str = @"lat=";
    str = [str stringByAppendingString:strLatitude];
    str = [str stringByAppendingString:@"&long="];
    str = [str stringByAppendingString:strLongitude];

    return str;
} 
```

我在应用程序开始时调用**StartUpdating**。现在在我的 viewController 我调用这个方法：

```
AppDelegate *appDelegate=[AppDelegate sharedAppDelegate];
NSString *str = [appDelegate returnLatLongString]; 
```

但是我撞车了

```
str = [str stringByAppendingString:strLatitude]; 
```

在`returnLatLongString`.

我知道我正在崩溃，因为当时**strLatitude**没有价值。但是我该如何解决这个问题？我怎样才能获得更新的纬度和经度值？

另外，我不想在 viewControllers 中使用**locationManager**。为了让我可以在所有视图控制器中获取当前位置，我在 appDelegate 中完成了它。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-17T12:41:23.000

崩溃可能是因为`str`它是一个 NSString，因此它是不可变的。在这种情况下将其分配回自身是有问题的。使用会更简单`stringWithFormat`：

```
NSString *str = [NSString stringWithFormat: @"lat=%@&long=%@", strLatitude, strLongitude]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T12:38:43.540

`AppDelegate`您在创建Class对象时犯了一个错误。

要创建对象，只需编写以下代码：

```
AppDelegate *appDelegate=(AppDelegate *)[[UIApplication sharedApplication] delegate];
NSString *str = [appDelegate returnLatLongString]; 
```

完成..

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-17T12:40:10.030

导入您的 AppDelegate.h 文件。然后
使用以下代码：

```
MyAppDelegate *myAppDelegate = (MyAppDelegate *)[[UIApplication sharedApplication] delegate];
NSString *result = [myAppDelegate returnLatLongString]; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-17T14:55:32.383

我认为您需要在您的 `- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions`方法中初始化这些变量（strLatitude，strLongitude）。如果它第一次达到这一点，它们不会被初始化，所以你会崩溃。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-17T15:08:41.720

您的代码中有两个潜在问题。

首先确保在头文件中声明`strLatitude`和`strLongitude`作为`strong`属性：

```
@property (nonatomic, strong) NSString * strLatitude;    
@property (nonatomic, strong) NSString * strLongitude; 
```

用于`@synthesize`为它们自动生成正确的 getter 和 setter，并为它们分配正确的值：

```
float latitude = newLocation.coordinate.latitude;
self.strLatitude = [NSString stringWithFormat:@"%f",latitude];
float longitude = newLocation.coordinate.longitude;
self.strLongitude = [NSString stringWithFormat:@"%f", longitude]; 
```

确保它们在被赋值后不会被释放，因为`[NSString stringWithFormat:]`返回`autoreleased`对象。

其次，在`[locManager startUpdatingLocation];`系统提供第一次位置更新之前需要一段时间。因此，在尝试用它们构造另一个字符串之前，您需要检查`strLatitude`和`strLongitude`是否已经被赋值。与此类似的东西应该可以完成这项工作：

```
-(NSString*)returnLatLongString
{
    if (self.strLatitude == nil || self.strLongitude == nil)
        return nil;

    NSString *str = @"lat=";
    str = [str stringByAppendingString:strLatitude];
    str = [str stringByAppendingString:@"&long="];
    str = [str stringByAppendingString:strLongitude];

    return str;
} 
```

那么当然要使用的视图控制器`[AppDelegate returnLatLongString]`需要检查返回的值是否不是`nil`.

希望这可以帮助...

# magento - Magento Grid 添加新列

> ID：10191319
> 
> 赞同：0
> 
> 时间：2012-04-17T12:32:31.597
> 
> 标签：magento

```
protected function _prepareCollection()
{
    $collection = Mage::getResourceModel($this->_getCollectionClass());
    $collection->getSelect()->join('sales_flat_order_address', 'main_table.entity_id = sales_flat_order_address.parent_id',array('company'));
    $this->setCollection($collection);
} 
```

我使用上面的代码在订单列表网格上添加公司字段。但它显示“具有相同 ID“1038”的项目（Mage_Sales_Model_Order）已经存在”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T00:13:18.387

也许尝试使用内部连接：

```
$collection->getSelect()->joinInner(
    array(
        'order_address' => 'sales_flat_order_address'
    ),
    'order_address.parent_id = main_table.entity_id'
); 
```

此外，回显您的 SQL 并查看集合返回的内容，然后尝试在您的数据库上运行该 sql。这应该可以帮助您弄清楚您做错了什么。

```
echo $collection->getSelect()->__toString(); 
```

请记住，仅此一项不会将列添加到网格中。您需要在`_prepareColumns()`

编辑：实际上，考虑一下，内部连接可能对您没有帮助。您遇到的问题是 sales_flat_order_address 包含每个 parent_id 的多个条目，因此您需要使用 GROUP BY 或 SELECT DISTINCT 来计算重复项。尝试这样的事情：

```
$collection->getSelect()->joinInner(
    array(
        'order_address' => 'sales_flat_order_address'
    ),
    'order_address.parent_id = main_table.entity_id'
)->group(array('entity_id', 'parent_id')); 
```

它并不完美，但你想要做的事情本质上是不完美的，因为一个订单有很多地址。另一种方法是仅使用帐单地址或仅使用送货地址明确加入。

# mysql - Mysql：如何为现有的主从设置配置 mysql 代理

> ID：10191320
> 
> 赞同：0
> 
> 时间：2012-04-17T12:32:34.587
> 
> 标签：mysql, configuration, mysql-proxy

我想在我的测试环境中配置 mysql 代理以观察以下内容。

```
1\. Behavior of the proxy
2\. How load, CPU usage varies on my test server for read/write distribution. 
```

我用谷歌搜索并能够在我的 ubuntu linux 上安装代理。

但是我没有看到任何关于逐步配置它以及如何启动或停止它的东西。

有人应该对此进行探索，这对我有很大帮助。

提前致谢 问候， UDAY

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T04:10:36.573

默认情况下，如果您在与服务器相同的机器上运行代理，它将侦听端口 4040 并在 msyql 默认端口 3036 上查询后端服务器。其他端口号和服务器位置可以从命令行或使用配置进行配置文件。

要跨服务器分发查询、添加监控、分析等，您需要向 mysql-proxy 提供 Lua 脚本。请参阅安装下载随附的 /usr/local/share/docs 中的示例/教程脚本。生产实施需要做一些工作。

可以在 MySQL Proxy Scripting 下找到有关脚本工作原理[的](http://dev.mysql.com/doc/refman/5.6/en/mysql-proxy.html)[基础](http://dev.mysql.com/doc/refman/5.0/en/mysql-proxy-scripting.html)知识。

不要担心Lua。鉴于教程示例可以使用，语法非常易读。当你需要它时，[lua.org](http://lua.org)有更多关于 Lua 的细节。

# c# - 使用 RSS 提要阅读华尔街日报的文章

> ID：10191325
> 
> 赞同：3
> 
> 时间：2012-04-17T12:32:50.640
> 
> 标签：c#, jquery, html, rss

我需要构建一个使用 RSS 提要阅读 WSJ 文章的应用程序（请参阅下面的提要示例）。

```
<item>
<title>State Street Net Falls 9.3%</title>
<link>
http://online.wsj.com/article/SB10001424052702304432704577349472163975222.html?mod=rss_whats_news_us
</link>
<description>
State Street, one of the largest U.S. trust banks, said first-quarter earnings fell 9.3% on lower fees and revenue from trading services.
</description>
<category>PAID</category>
<pubDate>Tue, 17 Apr 2012 07:56:13 EDT</pubDate>
</item> 
```

我订阅了《华尔街日报》的付费订阅，但我不知道如何以编程方式对《华尔街日报》网站进行身份验证。对于免费的文章，我可以使用选择的技术下载它们。对于试运行，我在 C# 中创建了一个基本的控制台应用程序，以使用 RSS 提要中的链接（使用 .NET 中的 HttpWebRequest 类）获取内容，它工作正常。坦率地说，由于我目前对最终开发应用程序的技术持开放态度（它可以是用于 Web 应用程序的 JQuery+HTML），所以我正在寻找建议。如果您可以指出或分享一个非常有用的示例代码。

正如有人在以下回复中询问的是下载文章的 C# 代码。\

```
public virtual string GetHtml(Uri uri)
        {
            try
            {
                var req = ((HttpWebRequest)(WebRequest.Create(uri)));
                string htmlContent;
                using (var wr = req.GetResponse())
                {
                    var response = wr.GetResponseStream();
                    if (null == this.responseUri ) this.responseUri = wr.ResponseUri;
                    Debug.Assert(response != null, "htmlresponse != null");
                    var sr = new StreamReader(response, Encoding.UTF8);
                    htmlContent = sr.ReadToEnd();
                 }
                return htmlContent;
            }
            catch
            {
                return null;
            }
        } 
```

# c# - AutoFixture 是否生成 2 个不同的列表？

> ID：10191329
> 
> 赞同：1
> 
> 时间：2012-04-17T12:33:04.993
> 
> 标签：c#, autofixture

我是 AutoFixture 的新手，并快速测试了它的功能，但我遇到了一些障碍。下面是我的测试：

```
// Arrange
Fixture.Register(() => Fixture.CreateMany<SyncItemChange>(10));
var syncFolderItemsResult = Fixture.CreateAnonymous<SyncFolderItemsResult>();
ExchangeWebServiceMock
    .Setup(x => x.Sync())
    .Returns(() => syncFolderItemsResult);

// Act
Listener.Begin();

// Assert
var expectedItemIdsToBind = syncFolderItemsResult
    .ItemChanges
    .Select(x => x.ItemId);
ExchangeWebServiceMock.Verify(x => x.BindToItems(expectedItemIdsToBind), Times.Once()); 
```

没有什么花哨。我遇到的问题是，当我第一次创建 的匿名实例时`SyncFolderItemsResult`，`SyncItemsChanges`从我创建它到我断言我正在绑定正确`ItemId`的 's 时，它们是不一样的。因此，使测试失败。

为什么我要生成 2 个不同的列表？

# ruby-on-rails - rails 3.2 中的 f.hidden_ field

> ID：10191331
> 
> 赞同：5
> 
> 时间：2012-04-17T12:33:07.133
> 
> 标签：ruby-on-rails, authentication, devise

我正在尝试将设计中的用户 ID 插入另一个表中，该表收集联系方式和公司名称等，我正在使用 -

```
 <%= f.hidden_field :user_id, current_user.id %> 
```

当我加载它时，我似乎得到的只是页面上的一个错误 -

```
undefined method `merge' for 1:Fixnum 
```

提取的源代码（大约第 46 行）：

我是否遗漏了什么，我是否必须在控制器中放入任何东西才能访问 current_user 信息？

对此的任何帮助将不胜感激。

罗比

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-04-17T12:36:06.973

你可以像这样使用它

```
 <%= f.hidden_field :user_id, :value => current_user.id %> 
```

或者

```
 <%= hidden_field_tag "user_id",nil,:value => current_user.id %> 
```

尝试一下..

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-17T17:22:29.893

你也可以做这样的事情。

`<%= hidden_field_tag('some_object[user_id]', current_user.id)%>`

# java - 单击按钮时设置Android TextView的值

> ID：10191336
> 
> 赞同：0
> 
> 时间：2012-04-17T12:33:34.047
> 
> 标签：java, android, textview, settext

在 Java 中，如果我想在`JLabel`单击 a 时设置 a 的值`JButton`，我可以这样编码...

```
JButton button = new JButton("add");
JButton label = new JLabel();

public void addListenersToButtons(){
    button.addActionListener(this);
}

public void actionPerformed(ActionEvent e) {
    Object src = e.getSource();
    if (src == button) {
        label.setText("this is the number = " + number);
    }
} 
```

我希望能够在 Android 中做类似的事情，我`TextField`在用户单击按钮时设置 a 的值。Android 中的相应代码是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-17T12:38:15.217

这是一个例子：

```
 final Button btn = (Button) findViewById(R.id.btn);

    btn.setOnClickListener(new View.OnClickListener() {
        public void onClick(View v) {
            TextView tv = (TextView) findViewById(R.id.TextView1);
            tv.setText("hellooo");
        }
    }); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-17T12:36:12.807

```
button.setOnCLickListenere(new OnCLickListsner(){

public void onClick(View v){
 text.setText("text"); //assuming you have reference for the TextView and button
}
}); 
```

但是你肯定需要先了解android的基础知识..

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-17T12:41:46.487

```
public static int num=0;
plus.setOnCLickListenere(new OnCLickListsner(){
public void onClick(View v){

num=num+1;
 text.setText("Number "+num); //assuming you have reference for the TextView and button
}
});

minus.setOnCLickListenere(new OnCLickListsner(){
public void onClick(View v){

num=num-1;
 text.setText("Number "+num); //assuming you have reference for the TextView and button
}
}); 
```

希望你想做这样的事情。这里有两个按钮，按下`plus`时会加值，按下`minus`时会减去一个数字。

# workflow-foundation-4 - 从重新托管的设计器表面中删除活动

> ID：10191339
> 
> 赞同：0
> 
> 时间：2012-04-17T12:33:53.260
> 
> 标签：workflow-foundation-4, workflow-rehosting

我的应用程序中有一个重新托管的设计器，它与我的自定义活动都可以正常工作。当用户设计他们的工作流程时，他们会像往常一样将某些活动拖到设计器表面。但是，在用户从下拉框中（不在设计器中）选择某些值后，我想从设计图面上删除某些活动，这样它们就无法保存和执行。

我已经尝试了很多不同的方法来做到这一点，使用 WorkflowInspectionServices 对象来导航 ModelItemTree，获取父序列活动并从它的活动集合中删除自定义活动，但我似乎无法让它工作。

有没有人实际上成功地从代码中重新托管的设计器表面中删除了一个活动（不仅仅是右键单击它并选择删除！！）。

需要明确的是……这不是在执行工作流时，而是在重新托管的设计器中设计时。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T16:51:49.657

我敢打赌，您不会从 ModelItem 中删除子项，而是从 ModelItem 包装的 Activity 树中删除。即，您执行“GetCurrentValue”，将返回值转换为您的 Activity 类型，然后以这种方式删除子项。那是行不通的，[因为 Activity 树的 ModelItem 表示将不同步。](http://blogs.msdn.com/b/mwinkle/archive/2009/10/28/deep-dive-into-the-designer-data-model-modelitem-and-modelproperty.aspx)您必须通过获取包含子项的属性的 ModelItem 来删除子项，然后将其清除。

例如，给定以下活动

```
[Designer(typeof(NativeActivity1Designer))]
public sealed class NativeActivity1 : NativeActivity, IActivityTemplateFactory
{
    public Activity Child { get; set; }

    protected override void Execute(NativeActivityContext context) { }

    Activity IActivityTemplateFactory.Create(System.Windows.DependencyObject target)
    {
        return new NativeActivity1
        {
            Child = new Sequence()
        };
    }
} 
```

和以下设计器（为简洁起见，删除了 ActivityDesigner 节点）

```
<StackPanel>
    <sap:WorkflowItemPresenter
        MinHeight="100"
        HintText="Drop it here"
        Item="{Binding ModelItem.Child}" />
    <Button
        Content="Remove"
        Click="Button_Click" />
</StackPanel> 
```

您可以使用中的代码`Button_Click`从设计器的工作流中删除子项。

```
public partial class NativeActivity1Designer
{
    public NativeActivity1Designer()
    {
        InitializeComponent();
    }

    private void Button_Click(object sender, RoutedEventArgs e)
    {

        ModelProperty child = ModelItem.Properties["Child"];
        child.SetValue(null);
    }
} 
```

# iphone - iPhone中带有CheckBox的TableView行

> ID：10191341
> 
> 赞同：0
> 
> 时间：2012-04-17T12:34:00.317
> 
> 标签：iphone, ios, uitableview, checkbox

我正在开发一个应用程序并被困在一件事上。我试图自己解决我的问题，但无法解决。如果有人知道如何解决这个问题，请帮助我。

我创建了一个 UITableView，每行都有一个复选框。当任何复选框被点击时，我只想选中那个复选框，但目前只选中最后一个复选框。我在下面提供了我当前的代码，如果您看到任何应该更改的内容，请告诉我。

谢谢。

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {
    static NSString *CellIdentifier = @"Cell";
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil) {
        cell = [[[UITableViewCell alloc]initWithStyle:UITableViewCellStyleValue1 reuseIdentifier:CellIdentifier] autorelease];
    }

    cell.textLabel.text = [selectPlayer objectAtIndex:indexPath.row];
    checkboxButton = [[UIButton alloc]initWithFrame:CGRectMake(0, 8, 25, 25)];
    checkboxButton.tag = indexPath.row;
    [checkboxButton setTitle:nil forState:UIControlStateNormal];
    [checkboxButton addTarget:self action:@selector(checkboxButton:)forControlEvents:UIControlEventTouchUpInside];

    [checkboxButton addSubview:checkImage];
    cell.accessoryView = checkboxButton; 
    return cell;
}

-(void)checkboxButton:(id)sender {
    NSIndexPath *indexPath = [selectTableView indexPathForCell:(UITableViewCell *)[[sender superview] superview]];
    switch (indexPath.section) {
        case 0:
            switch (indexPath.row) {
                case 0:
                    [checkImage setImage:[UIImage imageNamed:@"checkbox-checked.png"]];
                    NSLog(@"button pressed at section %d and %d row", indexPath.section, indexPath.row);
                    break;

                case 1:
                    //[checkImage setImage:[UIImage imageNamed:@"checkbox-checked.png"]];
                    NSLog(@"button pressed at section %d and %d row", indexPath.section, indexPath.row);
                    break;

                default:
                    break;
            }
            break;

        default:
            break;
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T14:48:26.543

我认为您的问题是您没有使用正确的方法，我认为您需要实施

```
-(void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *) indexPath{ } 
```

这里你有所选行的 indexPath 和 tableView 的实例，你需要做的就是实例化 TableViewCell 并检查你的复选标记。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-29T13:27:13.417

在方法中声明复选框按钮`cellForRowAtIndexPath`：

`-(UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath`

# perl - 允许 bugzilla 用户和自定义字段？但评论不应禁用

> ID：10191343
> 
> 赞同：1
> 
> 时间：2012-04-17T12:34:14.057
> 
> 标签：perl, bug-tracking, bugzilla

我有一些产品

产品A 产品B

和 bugzilla 中的组。

客户端开发人员

只有开发人员应该能够创建/编辑字段，但客户不应该能够编辑错误。

下面的讨论对我很有帮助。

[http://groups.google.com/group/netscape.public.mozilla.webtools/browse_thread/thread/98efcae88fe84d6d/51c8deb672402e09?lnk=gst&q=permissions+for+all+users#51c8deb672402e09](http://groups.google.com/group/netscape.public.mozilla.webtools/browse_thread/thread/98efcae88fe84d6d/51c8deb672402e09?lnk=gst&q=permissions%20for%20all%20users#51c8deb672402e09)

## 回答：

产品一：

ReadCreateA: Entry/Mandatory/Mandatory/-- EditA: --/NA/NA/Canedit 产品 B 类似。

为此，您需要向开发人员授予 editbugs 权限。如果要限制其他产品中的editbugs权限，则需要为其他产品设置一个他们*不*属于xx/xx/xx/Canedit的组。在您的特定设置中，这已包含在 EditA 和 EditB 组中。

* * *

（工作正常）当我使用上述指南时，除了发表评论外，它工作得很好。我在发表评论时收到以下错误->“您不允许编辑产品 A 中的错误”

但我希望“Group UsersA”的用户不应该编辑错误（这很好），但必须能够发表评论。

该怎么办 ？

# asp.net - 在 Orchard 中创建内容项时不显示内容部分编辑视图

> ID：10191344
> 
> 赞同：2
> 
> 时间：2012-04-17T12:34:16.027
> 
> 标签：asp.net, orchardcms

我创建了一个内容部分，然后将其添加到 Orchard 中的内容类型中。但是当我尝试创建该类型的内容项时，不会显示部件属性的字段。我正在寻找问题可能出在哪里的建议。

UPD：相关代码：

```
using JetBrains.Annotations;
using ArealAds.Models;
using Orchard.ContentManagement;
using Orchard.ContentManagement.Drivers;
using ArealAds.Models;
using ArealAds.Services;
using ArealAds.ViewModels;

namespace ArealAds.Drivers {
    [UsedImplicitly]
    public class AdDriver : ContentPartDriver<AdPart> {
        private readonly IAdService _adService;

        public AdDriver (IAdService adService)
        {
            _adService = adService;
        }

        protected override string Prefix {
            get { return "AdPart"; }
        }

        protected override DriverResult Display(
            AdPart part, string displayType, dynamic shapeHelper) {

            return ContentShape("Parts_Ad", () => shapeHelper.Parts_Ad(
                Title: part.Title,
                Url: part.Url,
                Email: part.Email,
                Phone1: part.Phone1,
                Phone2: part.Phone2,
                AreaName: part.AreaRecord.Name,
                AreaId: part.AreaRecord.Id,
                DistrictName: part.DistrictRecord.Name,
                DistrictId: part.DistrictRecord.Id,
                AllDistricts: part.AllDistricts));
        }

        //GET
        protected override DriverResult Editor(
            AdPart part, dynamic shapeHelper) {

            return ContentShape("Parts_Ad_Edit",
                () => shapeHelper.EditorTemplate(
                    TemplateName: "Parts/Ad",
                    Model: BuildEditorViewModel(part),
                    Prefix: Prefix));
        }
        //POST
        protected override DriverResult Editor(
            AdPart part,
            IUpdateModel updater,
            dynamic shapeHelper) {

            var model = new EditAdViewModel();
            updater.TryUpdateModel(model, Prefix, null, null);

            if (part.ContentItem.Id != 0) {
                _adService.Update(
                    part.ContentItem, model);
            }

            return Editor(part, shapeHelper);
        }

        private EditAdViewModel BuildEditorViewModel(AdPart part) {
            var avm = new EditAdViewModel {
                Title = part.Title,
                Url = part.Url,
                Email = part.Email,
                Phone1 = part.Phone1,
                Phone2 = part.Phone2,
                AllDistricts = part.AllDistricts,
                Areas = _adService.GetAreas(),
                Districts = _adService.GetDistricts()
            };
            if (part.AreaRecord != null) {
                avm.AreaName = part.AreaRecord.Name;
                avm.AreaId = part.AreaRecord.Id;
            }
            if (part.DistrictRecord != null) {
                avm.DistrictName = part.DistrictRecord.Name;
                avm.DistrictId = part.DistrictRecord.Id;
            }
            return avm;
        }
    }
}

using System.ComponentModel.DataAnnotations;
using Orchard.ContentManagement;
using Orchard.ContentManagement.Records;

namespace ArealAds.Models {
    public class AdRecord : ContentPartRecord {
        public virtual string Title { get; set; }
        public virtual string Url { get; set; }
        public virtual string Email { get; set; }
        public virtual string Phone1 { get; set; }
        public virtual string Phone2 { get; set; }
        public virtual AreaRecord AreaRecord { get; set; }
        public virtual DistrictRecord DistrictRecord { get; set; }
        public virtual bool AllDistricts { get; set; }
    }

    public class AdPart : ContentPart<AdRecord> {
        [Required]
        public string Title {
            get { return Record.Title; }
            set { Record.Title = value; }
        }

        public string Url {
            get { return Record.Url; }
            set { Record.Url = value; }
        }

        public string Email {
            get { return Record.Email; }
            set { Record.Email = value; }
        }

        public string Phone1 {
            get { return Record.Phone1; }
            set { Record.Phone1 = value; }
        }

        public string Phone2 {
            get { return Record.Phone2; }
            set { Record.Phone2 = value; }
        }

        public AreaRecord AreaRecord {
            get { return Record.AreaRecord; }
            set { Record.AreaRecord = value; }
        }

        public DistrictRecord DistrictRecord {
            get { return Record.DistrictRecord; }
            set { Record.DistrictRecord = value; }
        }

        [Required]
        public bool AllDistricts {
            get { return Record.AllDistricts; }
            set { Record.AllDistricts = value; }
        }
    }
}

@model ArealAds.ViewModels.EditAdViewModel

<fieldset>
  <legend>Area Fields</legend>

  <div class="editor-label">
    @Html.LabelFor(model => model.Title)
  </div>
  <div class="editor-field">
    @Html.TextBoxFor(model => model.Title)
    @Html.ValidationMessageFor(model => model.Title)
  </div>

  <div class="editor-label">
    @Html.LabelFor(model => model.Url)
  </div>
  <div class="editor-field">
    @Html.TextBoxFor(model => model.Url)
    @Html.ValidationMessageFor(model => model.Url)
  </div>

  <div class="editor-label">
    @Html.LabelFor(model => model.Email)
  </div>
  <div class="editor-field">
    @Html.TextBoxFor(model => model.Email)
    @Html.ValidationMessageFor(model => model.Email)
  </div>

  <div class="editor-label">
    @Html.LabelFor(model => model.Phone1)
  </div>
  <div class="editor-field">
    @Html.TextBoxFor(model => model.Phone1)
    @Html.ValidationMessageFor(model => model.Phone1)
  </div>

  <div class="editor-label">
    @Html.LabelFor(model => model.Phone2)
  </div>
  <div class="editor-field">
    @Html.TextBoxFor(model => model.Phone2)
    @Html.ValidationMessageFor(model => model.Phone2)
  </div>

  <div class="editor-label">
    @Html.LabelFor(model => model.AllDistricts)
  </div>
  <div class="editor-field">
    @Html.CheckBoxFor(model => model.AllDistricts)
    @Html.ValidationMessageFor(model => model.AllDistricts)
  </div>

  <table>
  <tr>
  <td>
  <div class="editor-label">
    @Html.LabelFor(model => model.AreaId)
  </div>
  <div class="editor-field">
    @Html.DropDownListFor(model => model.AreaId,
                          Model.Areas.Select(s => new SelectListItem {
                              Selected = s.Id == Model.AreaId,
                              Text = s.Name,
                              Value = s.Id.ToString()
                          }),
                      "Выберите район...")
    @Html.ValidationMessageFor(model => model.AreaId)
  </div>
  </td>
  <td>или</td>
  <td>
  <div class="editor-label">
    @Html.LabelFor(model => model.DistrictId)
  </div>
  <div class="editor-field">
    @Html.DropDownListFor(model => model.DistrictId,
                          Model.Districts.Select(s => new SelectListItem {
                              Selected = s.Id == Model.DistrictId,
                              Text = s.Name,
                              Value = s.Id.ToString()
                          }),
                      "Выберите округ...")
    @Html.ValidationMessageFor(model => model.DistrictId)
  </div>
  </td>
  </tr>
  </table>

</fieldset>

            SchemaBuilder.CreateTable("AdRecord", table => table
                .ContentPartRecord()
                .Column<string>("Title")
                .Column<string>("Url")
                .Column<string>("Email")
                .Column<string>("Phone1")
                .Column<string>("Phone2")
                .Column<int>("AreaRecord_Id")
                .Column<int>("DistrictRecord_Id")
                .Column<bool>("AllDistricts")
            );

            ContentDefinitionManager.AlterPartDefinition(
                typeof(AdPart).Name, cfg => cfg.Attachable());

            ContentDefinitionManager.AlterTypeDefinition(
                "ArealAds_Ad", cfg => cfg
                .WithPart("CommonPart")
                .WithPart("AdPart")
                .Creatable()
            ); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-19T23:06:19.753

您可能在placement.info 中缺少一个条目。

将此添加到模块中的placement.info 文件中（不是yoru 主题的placement.info，因为当您在仪表板中时主题不活动）：

```
`<Place Parts_Ad_Edit="Content:1" />` 
```

# php - 如果我有一个将文件上传到另一台服务器的服务器端 PHP 脚本，它有什么限制？

> ID：10191347
> 
> 赞同：0
> 
> 时间：2012-04-17T12:34:24.153
> 
> 标签：php, file-upload, vimeo

我有一个客户端（使用 Kohana 框架构建），它有一个分块文件上传器，上传后将文件发布到 vimeo 进行转换。问题是，虽然文件已成功上传到服务器，但在将其发送到 vimeo 时会出错。我怀疑这个发给 vimeo 的帖子达到了第一阶段分块上传者避免的限制。

我应该更改 PHP.ini 中的哪些设置来解决此问题。

视频文件最大为 2GB。

更新：

在回答您的问题时，这是一个 500 错误。我没有更多，因为它只发生在实时服务器上，而不是在登台和测试中。我被告知不要打开 PHP 的 display_errors，因为这将在实时站点上显示错误（显然确实发生了），这也不是我的代码。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T12:39:40.963

**基本帐户**的 vimeo 视频有 500MB 的限制，如此[处](http://vimeo.com/help/faq#file_limitations)所示。我猜您的服务器注册的帐户类型是基本的，即使您的计算机可能注册了一个**plus 帐户**。您需要检查如何使用您的 plus 帐户连接服务器或将视频大小限制为 500MB。

有了更多信息，我们将能够提供更好的答案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-17T12:37:53.150

您可以尝试以下操作，您`.htaccess file`可以相应地增加或减少该值，默认情况下，php 将最大文件上传限制设置为 8M

```
php_value upload_max_filesize 20M
php_value post_max_size 20M
php_value max_execution_time 200
php_value max_input_time 200 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-21T14:06:53.603

好的，谢谢大家的回答。事实证明，问题不在于任何限制，而是文件分块例程的问题以及报告发送到 Vimeo 的块大小的错误。这只是 RedHat 4.1 实时服务器上的问题，而不是任何暂存或测试机器上的问题。在我们发现问题时，已通过删除大小验证来进行临时修复。感谢你的帮助。

# mysql - EC2实例上的Mysql：第一次查询后结果很慢

> ID：10191349
> 
> 赞同：1
> 
> 时间：2012-04-17T12:34:28.940
> 
> 标签：mysql, performance, caching, buffer, my.cnf

我正在尝试在具有 613MB 内存的 Amazon EC2 微型实例上配置 mysql。这个实例将只用于运行 mysql，所以我想使用尽可能多的内存。我们在不同的主机上运行了同一数据库的另一个实例，因此我可以轻松比较结果。

在原始数据库上执行一个普通的查询不到 3 秒。在我对 EC2 进行更改之前，需要 46 秒，但现在，更改设置后，相同的查询只需要 4 秒。但是，再次执行相同的查询，似乎需要很长时间。

这是我在 MySql my.cnf 中使用的设置：

```
[mysqld]
datadir=/var/lib/mysql
socket=/var/lib/mysql/mysql.sock
user=mysql
# Disabling symbolic-links is recommended to prevent assorted security risks
symbolic-links=0

innodb_buffer_pool_size = 128M
query_cache_size = 128M
query_cache_limit = 8M
key_buffer_size = 128M

table_open_cache = 2048
table_definition_cache = 2048
read_buffer_size = 64M
join_buffer_size = 64M
sort_buffer_size = 64M
myisam_sort_buffer_size = 64M

[mysqld_safe]
log-error=/var/log/mysqld.log
pid-file=/var/run/mysqld/mysqld.pid 
```

我不认为应该包含 myisam 参数，因为它应该都使用 innodb，但我只是给了它一些额外的内存以防万一。

如果它在第一次运行时较慢，然后运行得更快，那将是合乎逻辑的，但这似乎不合逻辑。

任何想法都会非常受欢迎。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T14:10:03.197

EC2 micro 的性能通常很糟糕。您可以以相同的价格获得 Linode/Rackspace。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-07T13:06:42.707

Amazon Micro 实例“可能会在有额外周期可用时在短时间内增加 CPU 容量。”

这意味着您被分配了 X 个计算单元，但是当其他 Micro 实例不使用它们的分配时，它可以跳转到 X + N，并且您的实例会自动清除它。

这可能就是您看到性能波动的原因。

# java - Java中的泛型工厂

> ID：10191350
> 
> 赞同：2
> 
> 时间：2012-04-17T12:34:30.670
> 
> 标签：java, generics

任何人都可以发布此 VB.NET 代码的 Java 版本吗？

```
 Public Function FetchDoc(Of T As {New, IRepoDocument})(ByVal docId As String) As IRepoDocument Implements IDocRepository.FetchDoc

        Dim repoDoc As New T

        //some code to init repoDoc

        Return repoDoc

    End Function 
```

此函数接受并创建任何实现的类的实例，`IRepoDocument`并且具有无参数构造函数。

我找到的唯一方法是：

```
public <T extends IRepoDocument> IRepoDocument FetchDoc(String idDoc, Class<T> clazz)
    throws InstantiationException, IllegalAccessException 
{
  return clazz.newInstance();
} 
```

但我想抑制`Class<T> clazz`作为输入参数。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T12:42:27.420

您不能在没有实例的情况下在 Java 中创建`Class`实例来指定实例所属的类——匿名类除外（见下文）。您可以将该类实例作为参数获取，或将其隐藏在岩石下，或将其从海洋中捞出，但您必须*在运行时*拥有它。与泛型关联的类被类型擦除删除，只是不存在。

我不知道 stringbeans 中的 VB.NET，但在某些情况下，您可能正在寻找一个匿名类。

```
new IRepoDocument() { ......fill in code }; 
```

在这种情况下，根本没有`<T>`，返回类型只是 IRepoDocument。

# asp.net-mvc - ASP.NET MVC 模板化控件

> ID：10191352
> 
> 赞同：1
> 
> 时间：2012-04-17T12:34:35.510
> 
> 标签：asp.net-mvc

在 Web 窗体世界工作多年后，我目前正在构建一个 ASP.NET MVC 站点（并且需要一点时间来适应！）。

我有一个管理仪表板，其中有几个区域包含在可以折叠的盒子等中。盒子的基本布局对所有人都是一样的——唯一的区别是盒子里的内容。我真的不想一遍又一遍地重复盒子代码（这里只讨论前端代码）。我通常在 Web 窗体世界中所做的是为内容创建一个带有模板区域的控件（即[http://weblogs.asp.net/scottgu/archive/2006/06/04/Supporting-Templates-with-ASP。 NET-User-Controls.aspx](http://weblogs.asp.net/scottgu/archive/2006/06/04/Supporting-Templates-with-ASP.NET-User-Controls.aspx) )

这个问题与我的场景非常相似[How do build a complex or template control in ASP.Net MVC, or the equivelant？](https://stackoverflow.com/questions/2799827/how-do-build-a-composite-or-template-control-in-asp-net-mvc-or-the-equivelant). 引用问题中的最佳答案指向这篇文章[http://jeffreypalermo.com/blog/asp-net-mvc-and-the-templated-partial-view-death-to-ascx/](http://jeffreypalermo.com/blog/asp-net-mvc-and-the-templated-partial-view-death-to-ascx/)我猜它会起作用但似乎有点黑客。在 MVC 中实现这一目标的最佳方法是什么？其他人如何处理这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T12:38:38.327

如果共享在布局中，请使用**master**（来自 Web 表单的概念）。

如果它在内容中，则使用[Display/Editor Templates](http://bradwilson.typepad.com/blog/2009/10/aspnet-mvc-2-templates-part-1-introduction.html)。

# jquery - 动态限制jQuery timepicker中的时间？

> ID：10191354
> 
> 赞同：2
> 
> 时间：2012-04-17T12:34:39.047
> 
> 标签：jquery, jquery-ui

我的表单中有两个字段。一个是使用 jQuery 日期选择器的日期字段，另一个是 jQuery 时间选择器。现在的问题是，如果我在日期字段中选择今天的日期，那么时间选择器不应该显示过去的时间。例如。如果现在的时间是 17:00，则时间选择器不应将 17:00 之前的时间显示为可选。这是我的代码，

```
$(function() {
    $( ".datepicker" ).datepicker({minDate:'0'});
    $('.timepicker').timepicker();
});

$("#date").click(function(){
    if($("#date").val()=='04/17/2012')
    {
        updatetimefortoday();
    }
});![enter image description here][1]

function updatetimefortoday()
{
    $('.timepicker').timepicker({
        onHourShow: timepickerRestrictHours
    });

    function timepickerRestrictHours(hour)
    {
        if ((hour > 17))
        {
            return true;
        }
        return false;
    }
} 
```

现在的问题是，如果我们调用`updatetimefortoday()`on函数`document.ready`，它会正确显示时间选择器。但是，如果我们在点击代码中显示的日期字段时执行此操作，则它不起作用。

![在此处输入图像描述](../Images/5f3044c60fb0402860966d13fe432478.png)

这是选择日期后的预期输出。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-18T23:11:11.590

在对它进行了更多工作之后，我得出的结论是，最好的方法是始终调用 onHourShow 函数并验证该函数中选定的日期。我认为这更好，因为禁用的时间仍然对用户可见，而不是空白单元格。

```
$('#date').datepicker({
    minDate: 0
});
$('#time').timepicker({
    onHourShow: function( hour ) { 
        var now = new Date();
        // compare selected date with today
        if ( $('#date').val() == $.datepicker.formatDate ( 'mm/dd/yy', now ) ) {
            if ( hour <= now.getHours() ) {
                return false;
            }
        }
        return true;
    }
});​ 
```

这是一个工作示例：http: [//jsfiddle.net/fgelinas/kUFgT/4/](http://jsfiddle.net/fgelinas/kUFgT/4/)

至于Aymad Safadi报告的开始和结束时间问题，我会看看我能做什么，这绝对是一个错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T12:49:16.437

时间选择器已附加到文档就绪功能的输入。我认为您可以通过这种方式更改 onHourShow 属性：

```
$('.timepicker').timepicker( 'option', 'onHourShow', timepickerRestrictHours); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-18T13:31:28.380

尝试@FrancoisGelinas 的方法（这是标准的 jQuery UI 方法），只使用库的选项。在这种情况下：“小时”。

就像是：

```
$('.datepicker').datepicker({
    minDate:'0',
    onSelect: function()
    {

        if($("#date").val()=='04/18/2012')
        {
            $('.timepicker').timepicker( 'option', 'hours', {starts: 05, ends: 23});
        }
        else
        {
            $('.timepicker').timepicker( 'option', 'hours', {starts: 0, ends: 23});
        }
    }
});
$('.timepicker').timepicker();​ 
```

在这里演示：http: [//jsfiddle.net/JbjLg/](http://jsfiddle.net/JbjLg/)

也就是说，timepicker 库本身似乎存在一个错误。如果您选择大于 11 的“开始”小时，则所有小时都将消失。我**强烈**建议您对此进行调查，并通过电子邮件或他的[GitHub](https://github.com/fgelinas/timepicker/issues)网站上的问题通知作者。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-08-02T09:02:46.883

```
 <script>
        $(function() {
        $( ".datepicker" ).datepicker({
          changeMonth: true,
          changeYear: true,
          minDate: 0
        });
        });

        $(function() {
        $( ".timepicker" ).timepicker({
            minTime: { hour: new Date().getHours(), minute: new Date().getMinutes() },
        });
        });

    </script> 
```

不要忘记这些：

```
 <script src="https://code.jquery.com/ui/1.12.0/jquery-ui.js"></script>
    <script src="https://raw.githubusercontent.com/fgelinas/timepicker/master/jquery.ui.timepicker.js"></script> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-08-10T16:26:07.237

你可以用这个——

```
<!DOCTYPE html>
<html>
<head>
    <title></title>
    <link rel="stylesheet" href="styles/kendo.common.min.css" />
    <link rel="stylesheet" href="styles/kendo.default.min.css" />
    <link rel="stylesheet" href="styles/kendo.default.mobile.min.css" />

    <script src="js/jquery.min.js"></script>
    <script src="js/kendo.all.min.js"></script>
</head>
<body>

        <div id="example">
            <div class="demo-section k-content">

                <h4>Start time</h4>
                <input id="start" value="8:00 AM" style="width: 100%;" />

                <h4 style="margin-top: 2em;">End time</h4>
                <input id="end" value="8:30 AM" style="width: 100%;" />

            </div>
            <script>
                $(document).ready(function() {
                    function startChange() {
                        var startTime = start.value();

                        if (startTime) {
                            startTime = new Date(startTime);

                            end.max(startTime);

                            startTime.setMinutes(startTime.getMinutes() + this.options.interval);

                            end.min(startTime);
                            end.value(startTime);
                        }
                    }

                    //init start timepicker
                    var start = $("#start").kendoTimePicker({
                        change: startChange
                    }).data("kendoTimePicker");

                    //init end timepicker
                    var end = $("#end").kendoTimePicker().data("kendoTimePicker");

                    //define min/max range
                    start.min("8:00 AM");
                    start.max("6:00 PM");

                    //define min/max range
                    end.min("8:00 AM");
                    end.max("7:30 AM");
                });
            </script>

            <style>

            </style>
        </div>

</body>
</html>
```

# sql - 为复制中的数据库截断 SQL Server 2008 中的事务日志文件

> ID：10191361
> 
> 赞同：0
> 
> 时间：2012-04-17T12:35:23.747
> 
> 标签：sql, sql-server-2008, replication, truncate

我们使用事务复制将大型 SQL Server 2008 数据库（完全恢复模式）复制到另一台服务器。

由于我们拥有的交易量，交易日志文件正在增长。当前大小约为 300 GB。

我尝试在完整备份和日志备份后缩小日志文件，但仍然认为大小太大。

有什么方法可以在不影响复制的情况下截断日志文件？

谢谢

# c# - 如果没有父节点，如何删除节点

> ID：10191364
> 
> 赞同：3
> 
> 时间：2012-04-17T12:35:27.730
> 
> 标签：c#, asp.net, .net, html-agility-pack

我正在使用 HTML 敏捷包来清理 WYSIWYG 的输入。这可能不是最好的方法，但我正在与接触正则表达式时爆炸的开发人员合作，所以它必须足够了。

我的所见即所得内容看起来像这样（例如）：

```
<p></p>
<p></p>
<p><span><input id="textbox" type="text" /></span></p> 
```

我需要去掉空的段落标签。这是我目前的做法：

```
HtmlNodeCollection nodes = doc.DocumentNode.SelectNodes("//p");
if (nodes == null)
    return;

foreach (HtmlNode node in nodes)
{
    node.InnerHtml = node.InnerHtml.Trim();
    if (node.InnerHtml == string.Empty)
        node.ParentNode.RemoveChild(node);
} 
```

但是，由于 HTML 不是完整的文档，段落标签没有父节点，`RemoveChild`因此会因为`ParentNode`为空而失败。

我找不到另一种删除标签的方法，任何人都可以指出另一种方法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-17T12:55:02.407

从技术上讲，第一级元素是文档根的子元素，所以下面的代码应该可以工作：

```
if (node.InnerHtml == String.Empty) {
    HtmlNode parent = node.ParentNode;
    if (parent == null) {
        parent = doc.DocumentNode;
    }
    parent.RemoveChild(node);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T12:59:47.977

你想从收藏中删除，对吧？

```
HtmlNodeCollection nodes = doc.DocumentNode.SelectNodes("//p");
if (nodes == null)
    return;

for (int i = 0; i < nodes.Count - 1; i++)
{
    nodes[i].InnerHtml = nodes[i].InnerHtml.Trim();
    if (nodes[i].InnerHtml == string.Empty)
        nodes.Remove(i);
} 
```

# regex - 使用 REGEX 替换方法放置千位分隔符

> ID：10191368
> 
> 赞同：4
> 
> 时间：2012-04-17T12:35:36.873
> 
> 标签：regex

我必须在数字之间放置千位分隔符。到目前为止我已经做了：

**输入字符串**

```
1852  
2589653  
586699  
8542.28 
```

**寻找模式**

```
(?<=\d)(?=(?:\d{3})+(?!\d)) 
```

**用。。。来代替**

```
, 
```

**结果**

```
1,852  
2,589,653  
586,699  
8,542.28 
```

* * *

**TODO**
我想从匹配集合中消除从 1700 到 2010 的所有年份范围。

任何人都有任何想法。欢迎所有建议。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T13:00:27.063

这不是使用正则表达式的好方法。

相反，请使用您的语言的字符串格式化功能：

*   如果必须从文本中提取数字，请使用简单的正则表达式查找数字。
*   将它们转换为浮点数或整数（视情况而定）
*   使用字符串格式说明符表示您希望它们使用千位分隔符输出。

例如，这是一个 shell 脚本，我从字符串中提取一个数字并使用逗号千位分隔符对其进行格式化：（Python 2.x）

```
In [12]: import re

In [13]: number_pattern = re.compile(r"\d+(.\d+)") #positive integer or floating point number

In [14]: mystring = "The size of the rocket is 3141592.6."

In [15]: number_string = number_pattern.search(mystring).group() #extract the number as a string

In [16]: number_string
Out[16]: '3141592.6'

In [18]: number = float(number_string) #convert to number

In [19]: '{:,}'.format(number) #format with thousands separator
Out[19]: '3,141,592.6' 
```

这样做也使得消除数字范围变得微不足道。

```
if (number > 1700) or (number < 2100):
    pass #do something 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2021-04-26T12:52:26.667

这是 PowerShell 中的 RegEx 示例：

```
[Regex]::Replace(12345, '[0-9](?=(?:[0-9]{3})+(?![0-9]))', '$0''')
12'345 
```

# eclipse-plugin - 基于透视图在工具栏上显示命令

> ID：10191373
> 
> 赞同：2
> 
> 时间：2012-04-17T12:35:57.633
> 
> 标签：eclipse-plugin

我想根据透视图在工具栏上显示一个命令。我已经使用核心表达式来实现这一点，如下所示。

```
 <extension point="org.eclipse.core.expressions.definitions">
      <definition id="onValidationPerspective">
         <with variable="activeWorkbenchWindow.activePerspective">
               <equals value="com.sample.perspective1"/>
          </with>
      </definition>
   </extension> 
```

我在命令标签中使用了它，如下所示。

```
 <command
        commandId="com.sample.run.root"
        icon="icons/run_exc.gif"
        label="Reset Card"
        style="pulldown">
      <visibleWhen checkEnabled="false">
        <reference
             definitionId="onValidationPerspective">
        </reference>
      </visibleWhen>
   </command> 
```

上面的代码工作正常。

但我想将其扩展到多个视角，即我想以 2 个视角显示工具栏上的命令，即`com.sample.perspective1`和`com.sample.perspective2`。

如何使用核心表达式来实现这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-02-07T09:17:04.867

```
<definition id="onValidationPerspective">
    <with variable="activeWorkbenchWindow.activePerspective">
        <or>
            <equals value="com.sample.perspective1"/>
            <equals value="com.sample.perspective2"/>
        </or>
    </with>
</definition> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-17T14:20:42.680

您可以使用 OR 操作元素：

```
<definition id="onValidationPerspective">
    <or>
        <with ...
        <with ...
    </or>
</definition> 
```

# objective-c - TableView 被委派，填充但不会分组

> ID：10191381
> 
> 赞同：0
> 
> 时间：2012-04-17T12:36:25.070
> 
> 标签：objective-c, ios, uitableview, uinavigationcontroller, uitabbar

我有一个奇怪的问题，我找不到解决方案（或类似的东西）。问题是，我的 UITableView 填充了初始信息（用于测试），但无论我做什么，我似乎都无法将其设置为分组样式（我可以在 UI 上选择它，但它不会显示）

我最初启动了一个 TabBar 项目，并在选项卡中添加了第三个 navigationController 视图。

```
#import <UIKit/UIKit.h>

@interface RootViewController : UITableViewController <UITableViewDelegate, UITableViewDataSource> {
NSMutableArray *tableData;
}

@property (nonatomic, retain) NSMutableArray *tableData;

-(void)initTableData;

@end 
```

这是标题，如您所见，它没有任何异常。以下代码位于我刚刚发布的标头的 .m 文件中（只会发布未注释的代码：

```
@synthesize tableData;

-(void)initTableData
{
    tableData = [[NSMutableArray alloc] init];
    [tableData addObject:@"Cidade"];
    [tableData addObject:@"Veículo"];
    [tableData addObject:@"Ano"];
    [tableData addObject:@"Valor"];
    [tableData addObject:@"Cor"];
    [tableData addObject:@"Combustível"];
}

- (void)viewDidLoad {
    [super viewDidLoad];
    self.title = @"Busca";
    UIBarButtonItem *_backButton = [[UIBarButtonItem alloc] initWithTitle:@"Back" style:UIBarButtonItemStyleDone target:nil action:nil];
    self.navigationItem.backBarButtonItem = _backButton;
    [self initTableData];
}

- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView {
    // Return the number of sections.
    return 1;
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section {
    // Return the number of rows in the section.
    return 6;
}

// Customize the appearance of table view cells.
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {

    static NSString *CellIdentifier = @"Cell";

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil) {
        cell = [[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier] autorelease];
    }

    // Configure the cell...
    cell.textLabel.text = [tableData objectAtIndex:[indexPath row]];

    return cell;
}

- (void)dealloc {
    [tableData release];
    [super dealloc];
} 
```

如您所见，没有什么不寻常的事了……知道可能是什么原因造成的吗？我试过了

```
- (id)initWithStyle:(UITableViewStyle)style {
    // Override initWithStyle: if you create the controller programmatically and want to perform customization that is not appropriate for viewDidLoad.
    self = [super initWithStyle:UITableViewStyleGrouped];
    if (self) {
        // Custom initialization.
    }
    return self;
} 
```

因为我不知道还能做什么。（也没有工作）再次，我将委托和数据源设置为文件的所有者。

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions {    

    // Override point for customization after application launch.

    // Set the tab bar controller as the window's root view controller and display.

    self.window.rootViewController = self.tabBarController;
    RootViewController *rvc = [[RootViewController alloc] initWithStyle: UITableViewStyleGrouped];

    [self.window makeKeyAndVisible];

    return YES;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T12:56:03.147

分组表响应这些部分。您只列出了 1 个部分，因此您只会看到 1 个组。尝试为第二组添加第二个 tableData 并返回 2 个部分。您还必须按部分拆分 -cellForRowAtIndexPath 中的数据，以确保数据进入正确的部分。

```
if (indexpath.section == 0) {
   // first section and first tableData
}
if (indexpath.section == 1) {
   // second section and second tableData
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-17T12:50:30.427

由于您已修改`- (id)initWithStyle:(UITableViewStyle)style`初始化程序以返回`UITableView`具有分组样式的 a，因此在初始化 ? 时是否调用此初始化程序`RootViewController`？

```
RootViewController *rvc = [[RootViewController] alloc] initWithStyle: UITableViewStyleGrouped]; 
```

# unix - 未使用新值设置路径变量

> ID：10191387
> 
> 赞同：2
> 
> 时间：2012-04-17T12:36:50.693
> 
> 标签：unix

我的脚本末尾有以下内容：

```
export PATH=/usr/openwin/bin:/opt/plat/AUTOSYS/4.0/autosys/bin:/usr/kerberos/bin::/usr/local/bin:/bin:/usr/bin:/usr/X11R6/bin:/opt/netezzaClient/bin:/xenv/ant/X/1.8.0/bin:/export/opt/jdk/1.6.0_16/bin:$PATH
export JAVA_HOME=/export/opt/jdk/1.6.0_16
echo "END PATH - $PATH" 
```

打印这个。

```
END PATH - /usr/openwin/bin:/opt/plat/AUTOSYS/4.0/autosys/bin:/usr/kerberos/bin::/usr/local/bin:/bin:/usr/bin:/usr/X11R6/bin:/opt/netezzaClient/bin:/xenv/ant/X/1.8.0/bin:/export/opt/jdk/1.6.0_16/bin:/opt/edtsesn/share/bin:/xenv/cvs/sun4/5.6p4/1.10/bin:/xenv/rationalrose/sun4/5.x/6.0.9242/rose/bin:/opt/netscape/4.70_B2/bin:/opt/SCssh/3.4_C0/bin:/opt/PDolvwm/bin:/usr/kerberos/bin:/bin:/usr/bin:/sbin:/usr/sbin:/usr/local/bin:/usr/X11R6/bin:/usr/ucb:/usr/bin:/usr/local/etc:/bin:/usr/local/bin:/etc:/software/scripts:/usr/5bin:/usr/demo:/usr/openwin/bin:/usr/tran/sparc/lib:/usr/ccs/bin:/opt/sybase/1192/bin:/tmp/wm40824:/opt/edtsdba/bin:/xenv/scripts/bin:/xenv/workshop/sun4/5.8mu4/6.1a/bin:/home/pj03962/1192/bin:/home/pj03962/1192/bin:/xenv/java/X/1.6.0_11/bin:/xenv/cvs/:/xenv/java/X/1.6.0_11/bin:/xenv/cvs/sun4/5.6p4/1.10/bin:/xenv/ant/sun4/5.x/1.6.2/bin:/opt/SCssh/3.7.1_C0/bin:/opt/xemacs/bin:/home/pj03962/125/OCS-12_5/bin:/home/pj03962/125/125/bin:/opt/perforce/bin:/opt/netezzaClient/bin:/opt/netezzaClient/bin 
```

然而

```
bash-3.00$ env $PATH
env: /usr/kerberos/bin:/bin:/usr/bin:/sbin:/usr/sbin:/usr/local/bin:/usr/X11R6/bin: No such file or directory 
```

没有这样的文件，因为我的帐户不存在 /home/usr/ 文件夹。但这仍然没有说明为什么它没有将其他值添加到路径变量中。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-17T12:50:31.693

我猜你在没有采购的情况下调用了你的脚本。例如，如果您的脚本名为“myscript.sh”，您可能已调用“./myscript.sh”或“bash myscript.sh”。您在脚本中对 env var 的修改不会泄露脚本，您需要获取它（首先使用 'source' 或 '.' 调用它）。例如：

```
. ./myscript.sh 
```

myscript.sh 中的更改将修改您当前的环境。

对于 "env $PATH" ：我认为这是一个错误，因为您试图在 "PATH" 变量中运行命令。哪个不存在（/usr/kerberos/bin:/bin:... 不是系统上现有文件的名称！）。您应该改用： echo $PATH

# servlets - web.xml 顺序或过滤器和监听器

> ID：10191388
> 
> 赞同：5
> 
> 时间：2012-04-17T12:36:52.057
> 
> 标签：servlets, servlet-filters, servlet-listeners

对于 Java EE Web 应用程序，我有一个实现 ServletRequestListener 的侦听器和一个过滤器。

有没有办法在 web.xml 指定过滤器应该在侦听器之前调用？

我已经尝试在监听器之前声明过滤器及其映射，但监听器之前仍然执行。

任何想法？

```
 <filter>
    <filter-name>myfilter</filter-name>
    <filter-class>com.example.MyFilter</filter-class>
  </filter>
  <filter-mapping>
    <filter-name>myfilter</filter-name>
    <url-pattern>/*</url-pattern>
  </filter-mapping>
  <listener>
    <listener-class>com.example.MyServletRequestListener </listener-class>
  </listener> 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-29T07:09:04.717

当浏览器（客户端）向服务器请求时，像（Tomcat）这样的容器为客户端请求 HttpServletRequest 和响应对象 HttpServletResponse 创建请求对象，如果您配置任何实现“ServletRequestListener”的侦听器，则“public void requestInitialized(ServletRequestEvent sre)”方法将调用

在容器创建请求和响应对象后，如果请求有任何侦听器，则侦听器将首先执行.....

之后 HttpServletRequest 和 HttpServletResponse 被分配给 Fillter ，如果你已经配置了 Fillter....

意味着 Listener 首先出现在 ServletRequest 中。因此，在 ServletRequest 案例中，无法配置让 Fillter 在 Listener 之前执行......

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-17T12:47:55.810

将 `ServletRequestListener.requestInitialized()`在调用任何过滤器之前以及`ServletRequestListener.requestDestroyed()`所有过滤器和服务方法返回之后进行初始化。

# django - Django admin - 如何在模型字段中存储对模型的引用？

> ID：10191393
> 
> 赞同：0
> 
> 时间：2012-04-17T12:37:09.407
> 
> 标签：django, django-models, django-admin, django-apps

我在 Django Admin 中进行了一些重大更改，需要创建一个应用程序来将各种模型分组，然后在菜单中显示它。我有一个功能可以生成所有可用管理模型的列表，包括权限。所以我制作了 1 个模型来添加组（id、name）。通过内联我想将特定模型添加到组中。存储模型引用的最佳方式是什么？我应该将它存储为字符串并在生成菜单期间我应该解析名称，找到特定模型并在管理员中生成它的 url？

感谢您提供线索。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T12:58:58.670

听起来[内容类型](https://docs.djangoproject.com/en/1.3/ref/contrib/contenttypes/)会对您有所帮助。

# c# - 删除 WinForms 中的 SplitContainer 面板填充

> ID：10191394
> 
> 赞同：3
> 
> 时间：2012-04-17T12:37:10.287
> 
> 标签：c#, .net, winforms, padding, splitcontainer

有没有办法从`Panel`内部删除填充`SplitContainer`？到目前为止，我尝试毫不费力地设置或覆盖填充属性。我也不一定想最终自定义绘制所有内容。

[截图 http://xload.dev-ch.com/6ef9241aba201922/screen397.jpg](http://xload.dev-ch.com/6ef9241aba201922/screen397.jpg)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T13:52:21.620

如果要`TextBox`填充整个`TabPage`控件，则需要将`TextBox` `Dock`属性设置为，将属性`Fill`更改为，然后在属性中确保将设置为。`Margin``0,0,0,0``TabPage``Padding``0,0,0,0`

# c++ - 目标检测 - 算法建议

> ID：10191397
> 
> 赞同：3
> 
> 时间：2012-04-17T12:37:15.557
> 
> 标签：c++, algorithm, image-processing, computer-vision, fft

我正在尝试在 C++ 中进行图像检测。我有两张图片：

图像场景：1024x786 人物：36x49

我需要从现场识别出这个特定的人。我尝试使用相关性，但图像太嘈杂，因此无法给出正确/准确的结果。

我一直在思考/研究最能解决这个任务的方法，这些似乎是最合乎逻辑的：

*   高斯滤波器
*   卷积
*   快速傅里叶变换

基本上，我想移动图像周围的噪音，这样我就可以使用相关性来更有效地找到人。

我知道 FFT 很难实现和/或可能会很慢，尤其是在我使用的图像大小的情况下。

任何人都可以提供解决这个问题的任何指示吗？最好的技术/算法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T12:49:17.497

在 Andrew Ng 的[机器学习课程](http://www.ml-class.org/)中，我们使用神经网络和滑动窗口解决了这个问题：

1.  训练一个神经网络来识别你正在寻找的特定特征，使用带有图像标签的数据，使用 36x49 窗口（或你想要的任何其他大小）。
2.  要识别新图像，请取 36x49 矩形并将其滑过图像，在每个位置进行测试。当您移动到一个新位置时，将窗口向右移动一定数量的像素，称之为`jump_size`（比如 5 个像素）。当您到达图像的右侧时，返回 0 并将`y`窗口的 增加`jump_size`。

神经网络对此有好处，因为噪声不是一个大问题：你不需要移除它。这也很好，因为它可以识别与以前看到的图像相似但略有不同的图像（面部角度不同，光线略有不同等）。

当然，缺点是您需要训练数据才能做到这一点。如果您没有一组预先标记的图像，那么您可能不走运 - 尽管如果您有 Facebook 帐户，您可能可以编写一个脚本来提取您和您朋友的所有标记照片并使用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T12:47:46.883

只有当您已经使用 kd-tree 或分层树对图像进行了排序时，FFT 才有意义。我建议将图像 2d rgb 值映射到 1d 曲线，并在频率分析之前降低一些复杂性。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-07T21:46:21.400

我没有确切的算法可以提出，因为我发现目标检测方法很大程度上取决于具体情况。相反，我有一些提示和建议。这是我的建议：找到目标的特定特征并围绕它设计代码。

例如，如果您可以访问彩色图像，请使用 Wally 没有太多绿色和蓝色的事实。从红色图像中减去蓝色和绿色的平均值，您将有一个更好的起点。（对图像和目标应用相同的操作。）但是，如果噪声与颜色相关（即：每种颜色不同），这将不起作用。

然后，您可以在转换后的图像上使用相关性以获得更好的结果。负面的相关性是它只适用于第一张图像的精确剪切......如果您需要找到目标以帮助您找到目标，这不是很有用！相反，我认为你的目标的平均版本（许多 Wally 图片的组合）在某种程度上会起作用。

我的最后建议：根据我处理噪声图像的个人经验，光谱分析通常是一件好事，因为噪声往往只会污染一个特定的尺度（希望与 Wally 的尺度不同！）此外，相关性在数学上是等价的比较图像和目标的光谱特性。

# mysql - 获取每组的第一个/最后 n 条记录

> ID：10191398
> 
> 赞同：7
> 
> 时间：2012-04-17T12:37:25.910
> 
> 标签：mysql, sql, inner-join, greatest-n-per-group

我有两个表：它们`tableA (idA, titleA)`之间`tableB (idB, idA, textB)`存在一对多的关系。对于 tableA 中的每一行，我想检索 tableB 中对应的最后 5 行（按 idB 排序）。

我试过了

```
SELECT * FROM tableA INNER JOIN tableB ON tableA.idA = tableB.idA LIMIT 5 
```

但这只是限制了 INNER JOIN 的全局结果，而我想限制每个不同 tableA.id 的结果

我怎样才能做到这一点 ？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-17T16:49:51.873

非常简化和更正的 Carlos 解决方案（他的解决方案将返回前 5 行，而不是最后...）：

```
SELECT tB1.idA, tB1.idB, tB1.textB
FROM tableB as tB1
    JOIN tableB as tB2
        ON tB1.idA = tB2.idA AND tB1.idB <= tB2.idB
GROUP BY tB1.idA, tB1.idB
HAVING COUNT(*) <= 5 
```

在 MySQL 中，`tB1.textB`即使是按查询分组，您也可以使用，因为您是按第一个表中的 idB 分组的，所以`tB1.textB`每个组只有一个值...

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-17T13:25:56.870

我认为这是你需要的：

```
SELECT tableA.idA, tableA.titleA, temp.idB, temp.textB
FROM tableA
INNER JOIN
(
    SELECT tB1.idB, tB2.idA,
    (
        SELECT textB
        FROM tableB
        WHERE tableB.idB = tB1.idB
    ) as textB
    FROM tableB as tB1
        JOIN tableB as tB2
            ON tB1.idA = tB2.idA AND tB1.idB >= tB2.idB
    GROUP BY tB1.idA, tB1.idB
    HAVING COUNT(*) <= 5
    ORDER BY idA, idB
) as temp
ON tableA.idA = temp.idA 
```

有关此方法的更多信息在这里：

[http://www.sql-ex.ru/help/select16.php](http://www.sql-ex.ru/help/select16.php)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-17T13:17:31.260

确保您的“B”表在 (idA, idB) 上有一个索引，以便按目的优化顺序，因此对于每个“A”ID，它可以快速使“B”顺序降序，从而将最新的每个“A”放在顶部ID。使用 MySQL 变量，每次“A”ID 更改时，它会将下一个“A”ID 的排名重置为 1。

```
select 
      B.idA,
      B.idB,
      B.textB
      @RankSeq := if( @LastAGroup = B.idA, @RankSeq +1, 1 ) ARankSeq,
      @LastAGroup := B.idA as ignoreIt
   from
      tableB B
         JOIN tableA A
            on B.idA = A.idA,
      (select @RankSeq := 0, @LastAGroup := 0 ) SQLVars 
   having
      ARankSeq <= 5
   order by
      B.idA,
      B.idB DESC 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-17T13:50:07.500

```
select * from tablea ta, tableb tb
where ta.ida=tb.idb and tb.idb in 
(select top 5 idb from tableB order by idb asc/desc) 
```

*   （如果你想要更低的 id，则为 asc，如果你想要更高的 id，则为 desc）
*   更简单，更容易包含更多条件
*   如果 mysql 中不存在 top 子句，请使用 limit 子句（我对 mysql 了解不多）

# multithreading - 为什么这个同步原语能有效地工作？

> ID：10191400
> 
> 赞同：1
> 
> 时间：2012-04-17T12:37:40.047
> 
> 标签：multithreading, winapi, language-agnostic

我们中的许多人可能发现或想出了以下同步原语：

获取锁（代码在 Pascal 中）：

```
while Cardinal(InterlockedExchange(fAccess, 1)) <> 0 do 
  Sleep(0); 
```

并释放它：

```
InterlockedExchange(fAccess, 0); 
```

当我发现它与嵌套调用不兼容时，我决定对其进行改进并实现新的 Aqcuire 变体，如下代码（我们将上面的 Fragment 称为 Acquire/Release）

```
Acquired:=false;
repeat
  Acquire;
    if (fData.Thread = 0) or (fData.Thread = GetCurrentThreadId) then
    begin
      fData.Thread:=GetCurrentThreadId;
      Inc(fData.Level);
      Acquired:=true;
    end
    else
      Inc(fData.Failures);

    SleepAfter:=(not Acquired);
  Release;

  if SleepAfter then
    Sleep(0);
until Acquired; 
```

和新版本

```
 Acquire;
    Dec(fData.Level);
    if fData.Level=0 then
      fData.Thread := 0
  Release; 
```

这行得通，但令我困惑的是失败的数量很少（至少在单核系统上）。对于三个分别增加 10,000,000 次值的测试线程，这段代码无法获得锁的次数约为 72。我很高兴，但另一方面我无法理解背后的机制。因此，任何唤醒线程都会发现所有其他线程大部分时间都在休眠。为什么？如果线程位于不同的内核上，冲突的数量会显着增加吗？

# objective-c - 目标c内存泄漏？

> ID：10191408
> 
> 赞同：0
> 
> 时间：2012-04-17T12:38:11.480
> 
> 标签：objective-c

我有一个关于内存的问题。根据下面的代码和日志，是`0x6868190`泄漏吗？

代码：

```
self.point = [NSString stringWithFormat:@"R"];
NSLog(@"********First********%d",[point retainCount]);
NSLog(@"********First********%p",point);
self.point = [NSString stringWithFormat:@"A"];
NSLog(@"********Second********%d",[point retainCount]);
NSLog(@"********Second********%p",point); 
```

日志：

```
 2012-04-17 20:27:49.838 test_[297:f803] ********First********2
 2012-04-17 20:27:49.838 test_[297:f803] ********First********0x6868190
 2012-04-17 20:27:49.839 test_[297:f803] ********Second********2
 2012-04-17 20:27:49.839 test_[297:f803] ********Second********0x6879500 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T12:48:12.513

不要`retainCount`用于检查内存泄漏，因为内部实现可能会如您所料改变它。

xcode 具有检查泄漏的适当工具，因此我建议您使用它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-17T12:54:20.687

使用 Instruments 检查内存泄漏。保留计数不为零（或者我猜您期望为 1）这一事实并不一定意味着存在泄漏。如有必要，这些对象将在运行循环结束时释放。

stringWithFormat 调用创建了一个保留计数为 1 的对象（将自动释放）。然后你的属性可能被声明为retain/strong，它增加了一个在你的主对象被释放时将被释放的属性。因此是两个。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-17T12:48:20.563

我的网站“[何时使用retainCount？](http://whentouseretaincount.com/) ”涵盖了这一点。见问题七和八。

但总而言之，没有。您的变量是自动释放的，因此它不会泄漏（除非您忘记在 中释放`dealloc`）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-17T12:40:20.543

不，类`NSString`生成的那些`NSString`是`autorealeased`。

# java - 相关组合框

> ID：10191409
> 
> 赞同：0
> 
> 时间：2012-04-17T12:38:11.860
> 
> 标签：java, combobox, jframe

我有两个组合框，它们都有相同的 3 个字符串。当我从第一个 ComboBox 中选择一个字符串时，我希望该字符串在第二个 ComboBox 中消失，这样我就不能再次选择相同的字符串。

```
 final JComboBox comboBox = new JComboBox();  

 comboBox.setModel(new DefaultComboBoxModel(new String[]{"Rome","London","Paris"}));

 final JComboBox comboBox_1 = new JComboBox();

 comboBox_1.setModel(new DefaultComboBoxModel(new String[{"Paris","London","Rome"})); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T12:41:52.143

DefaultComboBoxModel 方法 removeElement(Object anObject) 是您正在寻找的吗？

即向第一个 ComboBox 添加一个侦听器，以便在进行选择时，从另一个 ComboBox 的模型中删除该选择？

# mysql - 多用户的 django db 架构设计

> ID：10191412
> 
> 赞同：0
> 
> 时间：2012-04-17T12:38:29.210
> 
> 标签：mysql, database, django, database-design, schema

我正在 django [mysql] 中创建一个必须可扩展的站点，所以我的问题是对于具有相同类型数据的多个用户来说什么更好

每个用户有一个数据库，还是有一个大的单片数据库？

请为此首选的设计模式提供建议？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T13:14:38.840

单独的数据库几乎从来都不是正确的答案，但在某些情况下它是合适的。除非您有非常特殊的需求，并且没有对您的项目的任何真实描述，否则单个数据库可能是正确的决定。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-17T13:16:41.260

通常，您对具有相同表架构的多个用户使用单个数据库，除非您的要求使您创建多个数据库。特别是，如果每个用户都有相同类型的数据，则必须在应用程序端而不是在数据库端处理访问权限和其他事情。

Django 有一个很好的用户身份验证/授权系统，它可以让您定义权限并让您控制用户访问权限（创建新记录、更新现有记录和删除一个记录），这些数据由系统中的表表示的每种类型的数据。您还可以根据需要定义自定义权限来控制访问权限。

# node.js - 在 couchdb 函数之外调用变量？

> ID：10191414
> 
> 赞同：2
> 
> 时间：2012-04-17T12:38:38.803
> 
> 标签：node.js, couchdb, nowjs-sockets, cradle

我在让 couchdb 的响应处理程序对 node.js 和 now.js 做任何有用的事情时遇到了很多麻烦。我的目标是回电给客户或团体，提供已找到并从客户那里发送的某些信息。

```
everyone.now.login = function(){
var username = this.now.lusername;
var password = this.now.lpassword;
var test;
db.get(this.now.lusername, function (err, doc, test, username) {
    if (err) {
        console.log(+ username + " doesn't exist!");

    } else  {
        console.log('Found user!');
        console.log(doc);
        test = 1;
   }
    });
    console.log(test);
} 
```

我在这里以测试为例。我在 db.get 外部声明它，在内部分配一个值以进行反馈，但是当 console.log 在外部运行时它没有值。

我只是不明白还是有什么问题？

（我确实发布了我可以使用文档。（无论值）但有一个特定的变量我想在此调用之外传递回客户端）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T20:00:48.633

由于 CouchDB 响应尚未到达，因此该`test`变量将没有值。`console.log`您的登录函数执行以下步骤。

1.  设置一些变量（`username`, `password`, 和`test`未定义）
2.  开始一个 CouchDB fetch (for `this.now.lusername`) 并分配一个函数，当它完成时运行
3.  运行`console.log(test)`仍然未定义
4.  CouchDB 响应完成，您的第 2 步中的函数运行

我为这样的事情做的是使用函数调用。

```
everyone.now.login = function(){
  var username = this.now.lusername;
  var password = this.now.lpassword;

  db.get(this.now.lusername, function (err, doc, test, username) {
    if (err) {
        console.log(+ username + " doesn't exist!");

    } else  {
        console.log('Found user!');
        console.log(doc);
        login_complete(doc);
   }
  });

  function login_complete(doc) {
    console.log('The login finished! Doc is ' + doc)
  }
} 
```

这样代码**看起来**仍然正确（代码的“故事”大部分是从上到下流动的），但它也可以正确**执行**`login_complete()`（该函数仅在登录实际完成后才运行）。

# sharepoint-2007 - Sharepoint使用javascript显示列表项附件

> ID：10191419
> 
> 赞同：0
> 
> 时间：2012-04-17T12:38:54.213
> 
> 标签：sharepoint-2007

下面是用于使用 Web 服务显示列表项附件的脚本。

```
<script type="text/javascript" src="/Test/js/SPAPI_Core.js"></script>
<script type="text/javascript" src="/Test/js/SPAPI_Lists.js"></script>
<script type="text/javascript">
function getAttachments(List,ID){
var lists = new SPAPI_Lists('Your File name');
var items = lists.getAttachmentCollection(List,ID);

if (items.status == 200){

var rows = items.responseXML.getElementsByTagName('Attachment');
var str="";
for (var i=0; i<rows.length; i++){
temp=rows[i].childNodes[0].nodeValue;
fileName=temp.substring(temp.lastIndexOf('/')+1);

str+='<a href="'+temp+'" target="_blank">'+fileName+'</a>'+"<br />";
}
document.getElementById("att"+ID).innerHTML = str;
}else{
alert('There was an error: ' + items.statusText);
}
}
</script> 
```

* * *

```
<xsl:if test="normalize-space(@Attachments) != '0'">
  <div id="att{@ID}" style="padding: 10px;"></div>
  <script type="text/javascript">
    getAttachments("Posts",<xsl:value-of select="@ID"/>);
  </script> </xsl:if> 
```

* * *

```
reference URL: http://www.codeproject.com/Articles/31895/Displaying-Attachments-with-the-Data-View-Web-Part 
```

上面的脚本是用来显示附件的……但是没用……

如果我遗漏了什么，请帮助我

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-04T15:49:19.927

我按照您的参考链接中的说明进行操作，并且有效。这就是我所做的。

1.  在 siteassets/js 文件夹下下载了 SPAPI_Core 和 SPAPI_list hs 文件。
2.  将您的脚本放在页面的内容编辑器 Web 部件中。
3.  将上面的 XSL 代码添加到我的 xsl 文件中。

有效。只需确保更改您的站点路径和列表名称即可。

# sql - 案例在 WHERE，SQL Server

> ID：10191424
> 
> 赞同：23
> 
> 时间：2012-04-17T12:39:22.590
> 
> 标签：sql, sql-server, case, where

我正在做一些搜索，用户在下拉列表中选择一些子句。当他们将某些框留空时，我希望查询忽略子句。我知道 CASE，我想到的最好的方法是，如果我将 0 传递给存储过程中的参数，它会忽略该参数，就像这样。

```
WHERE a.Country = (CASE WHEN @Country > 0 THEN @Country ELSE (something else) END) 
```

所以，（其他东西）应该像没有条件一样，它可以是“> 0”，因为国家/地区 ID 都来自 > 1，但我不知道如何在相同的情况下使用 > 和 =。

有什么建议么？

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-04-17T12:44:17.240

几种方法：

```
-- Do the comparison, OR'd with a check on the @Country=0 case
WHERE (a.Country = @Country OR @Country = 0)

-- compare the Country field to itself
WHERE a.Country = CASE WHEN @Country > 0 THEN @Country ELSE a.Country END 
```

或者，使用动态生成的语句并仅在适当的情况下添加 Country 条件。这应该是最有效的，因为您只执行具有实际需要应用的条件的查询，并且如果支持索引到位，则可以产生更好的执行计划。您需要使用参数化 SQL 来防止 SQL 注入。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-17T12:44:10.823

您可以简化为：

```
WHERE a.Country = COALESCE(NULLIF(@Country,0), a.Country); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-17T12:41:56.330

`(something else)`应该`a.Country`

如果可以`Country`为空，则为`(something else)``a.Country OR a.Country is NULL`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-17T12:42:06.023

```
.. ELSE a.Country ... 
```

我想

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-17T12:42:38.140

尝试这个：

```
WHERE a.Country = (CASE WHEN @Country > 0 THEN @Country ELSE a.Country END) 
```

# java - 将创建多少个 Factoryclass 实例

> ID：10191425
> 
> 赞同：0
> 
> 时间：2012-04-17T12:39:27.453
> 
> 标签：java

```
public class Factoryclass
{

public static MyClass returnObject(String str)
{
// Based on the parameter passed it will retrn some class 
}
} 
```

如果在 Web 应用程序中，则有 100 个请求。

现在请告诉我将创建多少个 Factoryclass 对象？？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-17T12:42:59.013

如果你这样做

```
Factoryclass.returnObject() 
```

不会创建任何`Factoryclass`实例，除非您`new Factoryclass()`在`returnObject`方法内创建

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T12:42:35.850

这完全取决于您的方法 returnObject() 的内容。它是一个静态方法的事实仅意味着它是“无状态的”并且不会从非静态实例成员中提取以工作。但是，您可能会在每次调用它时实例化一个新实例。

它是一家工厂的事实使我认为事实就是如此。但是，工厂模式的性质表明它对您来说并不重要。如果你的实现依赖于这个 Factoryclass 返回多个实例或同一个实例的事实，那么有人做出了错误的决定，使它成为一个工厂。

# android - Android：视图层次结构中的重复 ID

> ID：10191427
> 
> 赞同：9
> 
> 时间：2012-04-17T12:39:39.607
> 
> 标签：android, crash, ads

我有一个问题，来自市场的报告 - 应用程序中的巨大崩溃，告诉我：

> java.lang.RuntimeException：无法启动活动 ComponentInfo{com....android/com....android.activities....}：java.lang.IllegalArgumentException：错误的状态类，期望查看状态，但收到类 android .widget.ProgressBar$SavedState 代替。当不同类型的两个视图在同一层次结构中具有相同的 id 时，通常会发生这种情况。这个视图的 id 是 id/0x2。确保其他视图不使用相同的 ID。

所以我知道它通常意味着它所说的 - 我在某处有重复 id 的视图。这很好，但让我担心的是，我认为重复的 id 视图来自我集成的一些**广告网络。**我试图在视图上使用 try/catch 来控制崩溃，该视图包含每个广告，但未能捕捉到它。

所以我的下一个想法是广告视图在这方面仍然有一些作用，但是崩溃发生在另一个（我自己的）视图上，它具有相同的 id。问题是，我不知道那个视图是什么以及在哪里搜索它。你有什么想法可以是 id 0x2 的视图吗？（也是 0x3 - 也有很多关于该 ID 的报告）？您是否偶然发现了与广告网络相关的类似崩溃？

对此真的很沮丧。任何帮助表示赞赏！

谢谢，丹

PS完整的堆栈跟踪：

> java.lang.RuntimeException：无法启动活动 ComponentInfo{com.....android/com.....android.activities....}：java.lang.IllegalArgumentException：错误的状态类，期望查看状态但收到类 android.widget.ProgressBar$SavedState 代替。当不同类型的两个视图在同一层次结构中具有相同的 id 时，通常会发生这种情况。这个视图的 id 是 id/0x2。确保其他视图不使用相同的 ID。在 android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1651) 在 android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1667) 在 android.app.ActivityThread.handleRelaunchActivity(ActivityThread.java:2836) 在 android.app。 ActivityThread.access$1600(ActivityThread.java:117) at android.app.ActivityThread$H.handleMessage(ActivityThread.java:939) at android.os.Handler.dispatchMessage(Handler. java:99) 在 android.os.Looper.loop(Looper.java:130) 在 android.app.ActivityThread.main(ActivityThread.java:3691) 在 java.lang.reflect.Method.invokeNative(Native Method) 在 java .lang.reflect.Method.invoke(Method.java:507) 在 com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:907) 在 com.android.internal.os.ZygoteInit.main(ZygoteInit .java:665) at dalvik.system.NativeStart.main(Native Method) 原因：java.lang.IllegalArgumentException：错误的状态类，期望查看状态，但收到了类 android.widget.ProgressBar$SavedState。当不同类型的两个视图在同一层次结构中具有相同的 id 时，通常会发生这种情况。这个视图的 id 是 id/0x2。确保其他视图不使用相同的 ID。在 android.view.View 的 android.view.View.onRestoreInstanceState(View.java:6355)。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-05-13T11:48:12.073

从一个片段切换到另一个片段时遇到此问题，该片段包含与进度条相同的 id。将ID更改为其他ID并解决了。

# java - Apache Camel：使用 Camel 方法将 JSON 转换为 POJO

> ID：10191429
> 
> 赞同：8
> 
> 时间：2012-04-17T12:39:45.217
> 
> 标签：java, json, apache-camel

我有一个 REST 服务器，它在响应正文中发送 JSON。我最近开始阅读有关 Apache Camel 的内容。我使用以下向我的 REST 服务发送请求。

```
from("direct:start").setHeader("token", simple("234da"))
                            .to("http://localhost:8088/foo/bar/?foo1=bar1"); 
```

现在响应将是一个 JSON，有什么方法可以让我使用之前的某种方法`to()`（类似这样）将这个 JSON 直接放入 POJO 中？

```
to("http://localhost:8088/foo/bar/?foo1=bar1").toPOJO(); 
```

我更喜欢非 Spring 解决方案。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2020-01-27T14:38:06.093

我身边的小细节——虽然晚了

创建 jsonFormatter 然后用你需要的类解组，
`JsonDataFormat jsonDataFormat = new JsonDataFormat(JsonLibrary.Jackson);`
这可以用于编组

`from("direct:consume-rest")`
`.log("calling bean method...")`
`.to("http://localhost:8080/greeting?name=baba")`
`//.process(svProcessor) // any extra process if you want`
`.unmarshal().json(JsonLibrary.Jackson, Greeting.class)`
`.bean(GreetingHelper.class, "print")`
`.log("converted to bean ...")`
`.end()`
`;`

辅助类方法
`public void print (@Body Greeting greeting) {`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-08-10T15:11:21.153

Apache Camel 提供了一个组件来将 POJO 编组到 JSON 和从 JSON 解组。

在您的情况下，它将是：

```
 from("direct:start").setHeader("token", simple("234da"))
 .to("http://localhost:8088/foo/bar/?foo1=bar1")
 .unmarshal().json(); 
```

顺便说一句，您可能需要配置您的 json 库来执行此操作，我建议您查看[官方配置](http://camel.apache.org/json.html)。

# asp.net - ASP.NET 中较新加载的运行时出现无法解释的错误

> ID：10191433
> 
> 赞同：0
> 
> 时间：2012-04-17T12:40:08.407
> 
> 标签：asp.net, .net-3.5, runtime-error

我有一个 ASP.NET 应用程序

我开发了指向**目标框架的应用程序 3.5**。我检查了解决方案中的所有项目，所有项目都指向 3.5。我检查了所有**参考资料**，所有参考资料最多都为**3.5**（有一些 2.0）。

我的网站部署在**IIS 5.0**中。

我总是收到以下错误：

**版本信息：**（Microsoft .NET Framework 版本：2.0.50727.3615；ASP.NET 版本：2.0.50727.3618）：

***无法加载文件或程序集“assembly_name”或其依赖项之一。此程序集由比当前加载的运行时更新的运行时构建，无法加载。***

```
[BadImageFormatException: Could not load file or assembly 'Iceberg.MVC.Data' or one of its dependencies. This assembly is built by a runtime newer than the currently loaded runtime and cannot be loaded.]
   System.Reflection.Assembly._nLoad(AssemblyName fileName, String codeBase, Evidence assemblySecurity, Assembly locationHint, StackCrawlMark& stackMark, Boolean throwOnFileNotFound, Boolean forIntrospection) +0
   System.Reflection.Assembly.nLoad(AssemblyName fileName, String codeBase, Evidence assemblySecurity, Assembly locationHint, StackCrawlMark& stackMark, Boolean throwOnFileNotFound, Boolean forIntrospection) +43
   System.Reflection.Assembly.InternalLoad(AssemblyName assemblyRef, Evidence assemblySecurity, StackCrawlMark& stackMark, Boolean forIntrospection) +127
   System.Reflection.Assembly.InternalLoad(String assemblyString, Evidence assemblySecurity, StackCrawlMark& stackMark, Boolean forIntrospection) +142
   System.Reflection.Assembly.Load(String assemblyString) +28
   System.Web.Configuration.CompilationSection.LoadAssemblyHelper(String assemblyName, Boolean starDirective) +46

[ConfigurationErrorsException: Could not load file or assembly 'Iceberg.MVC.Data' or one of its dependencies. This assembly is built by a runtime newer than the currently loaded runtime and cannot be loaded.]
   System.Web.Configuration.CompilationSection.LoadAssemblyHelper(String assemblyName, Boolean starDirective) +613
   System.Web.Configuration.CompilationSection.LoadAllAssembliesFromAppDomainBinDirectory() +203
   System.Web.Configuration.CompilationSection.LoadAssembly(AssemblyInfo ai) +105
   System.Web.Compilation.BuildManager.GetReferencedAssemblies(CompilationSection compConfig) +178
   System.Web.Compilation.WebDirectoryBatchCompiler..ctor(VirtualDirectory vdir) +163
   System.Web.Compilation.BuildManager.BatchCompileWebDirectoryInternal(VirtualDirectory vdir, Boolean ignoreErrors) +53
   System.Web.Compilation.BuildManager.BatchCompileWebDirectory(VirtualDirectory vdir, VirtualPath virtualDir, Boolean ignoreErrors) +175
   System.Web.Compilation.BuildManager.CompileWebFile(VirtualPath virtualPath) +83
   System.Web.Compilation.BuildManager.GetVPathBuildResultInternal(VirtualPath virtualPath, Boolean noBuild, Boolean allowCrossApp, Boolean allowBuildInPrecompile) +261
   System.Web.Compilation.BuildManager.GetVPathBuildResultWithNoAssert(HttpContext context, VirtualPath virtualPath, Boolean noBuild, Boolean allowCrossApp, Boolean allowBuildInPrecompile) +101
   System.Web.Compilation.BuildManager.GetVirtualPathObjectFactory(VirtualPath virtualPath, HttpContext context, Boolean allowCrossApp, Boolean noAssert) +126
   System.Web.Compilation.BuildManager.CreateInstanceFromVirtualPath(VirtualPath virtualPath, Type requiredBaseType, HttpContext context, Boolean allowCrossApp, Boolean noAssert) +62
   System.Web.UI.PageHandlerFactory.GetHandlerHelper(HttpContext context, String requestType, VirtualPath virtualPath, String physicalPath) +33
   System.Web.UI.PageHandlerFactory.System.Web.IHttpHandlerFactory2.GetHandler(HttpContext context, String requestType, VirtualPath virtualPath, String physicalPath) +40
   System.Web.HttpApplication.MapHttpHandler(HttpContext context, String requestType, VirtualPath path, String pathTranslated, Boolean useAppConfig) +160
   System.Web.MapHandlerExecutionStep.System.Web.HttpApplication.IExecutionStep.Execute() +93
   System.Web.HttpApplication.ExecuteStep(IExecutionStep step, Boolean& completedSynchronously) +155 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T12:46:03.997

IIS 5？如果您使用 Windows 2000 并安装 .NET 3.5，那么预计在 2000 上，没有 .NET 3.5 SP1。您必须针对 .NET 3.5 RTM 编译程序集。2000 已终止支持，那么为什么不迁移到更新的 Windows 版本呢？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T12:44:09.587

如果您有权访问 IIS 实例，请尝试在 IIS 中正确定位您的应用程序，然后右键单击并选择属性选项。您应该会在窗口中看到一个名为“ASP.NET”的选项卡，确保所选版本与您的应用程序设置的目标版本一致。如果您出于某种原因看不到该选项卡，[这里](http://blogs.msdn.com/b/tom/archive/2008/04/17/asp-net-tab-missing.aspx)有一个链接可以帮助您。

# javascript - Google CSE - 在第二页上获取结果标题

> ID：10191435
> 
> 赞同：2
> 
> 时间：2012-04-17T12:40:14.453
> 
> 标签：javascript, jquery, html, google-custom-search

我对 Google CSE 代码有疑问（我承认我对 javascript 也没有太多经验）。

我的问题是我必须将结果的标题传递给第二个网页，在单击我的 CSE 的结果标题时打开

```
<div id="mysite_webResult">
  <div class="gs-webResult gs-result"
    data-vars="{longUrl:function() {
      var i = unescapedUrl.indexOf(visibleUrl);
      return i < 1 ? visibleUrl : unescapedUrl.substring(i);}}">

    <!-- Build the result data structure.-->
    <input type="hidden" id="url" data-attr="{value:unescapedUrl}" />

    <table>
      <tr>
        <td valign="top">
          <div data-if="Vars.richSnippet" data-attr="0"
            data-body="render('thumbnail',richSnippet,{url:unescapedUrl,target:target})"></div>
        </td>
        <td valign="top">

          <!-- Append results within the table cell.-->
          <div class="gs-title">
            <a class="gs-title" data-attr="{href:'linkdetails2.php?url='+unescapedUrl+'?nome='+html(title),target:target}"
              data-body="html(title)"></a>
          </div> 
```

问题出在最后几行，这是：

```
<a class="gs-title" data-attr="{href:'linkdetails2.php?url='+unescapedUrl+'?nome='+html(title),target:target}"
              data-body="html(title)"></a> 
```

即使它呈现正确（标题显示正确），当点击时（在这种情况下，目标页面是：twitter.com/#!/asd）会转到：

```
http://www.asd.com/linkdetails2.php?url=http://twitter.com/#!/asd?nome=[object DocumentFragment] 
```

如您所见，“nome”传递的“html(title)”不是我所期望的，但是：[object DocumentFragment]

有解决办法吗？

感谢大家

# python - 使用单个 python 正则表达式检查主机名和 IP 地址（v4 和 v6）？

> ID：10191442
> 
> 赞同：0
> 
> 时间：2012-04-17T12:40:32.917
> 
> 标签：python, regex

是否可以使用单个正则表达式检查字符串并验证它是否匹配有效的 IPv4 或 IPv6 地址，甚至是没有特殊字符但点 (.) 的主机名？

我对 IPv4 和 IPv6 有单独的正则表达式，但是如何将它们结合起来完成上述工作？

提前致谢，

担

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-17T12:46:14.363

您*可以*使用单个正则表达式，但它会非常难看。任何一个;

*   创建单独的正则表达式作为字符串，然后将它们组合起来。更清晰。或者，
*   分别测试每个正则表达式。也清晰了许多。

Perl 样例：

```
if ( $foo =~ /$ipv4_re/ or $foo =~ /$ipv6_re/ or $foo =~ /$hostname_re/ ) {
    ...
} 
```

话虽如此，Python 中可能有一些库可以为您验证这些东西，我个人更愿意依赖它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T12:47:47.403

尝试：

```
(?:\d{1,3}\.){3}\d{1,3}|                    (?# IPv4 address)
[:a-fA-F0-9]*:[:a-fA-F0-9]*:[:a-fA-F0-9.]*| (?# IPv6 address)
[-a-z0-9A-Z]+\.[-a-z0-9A-Z]*                (?# domain name) 
```

当然，您可以自由地将单个表达式替换为更复杂的表达式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-17T13:39:29.110

```
(?P<ihost>\\[(?:(?:[0-9A-F]{1,4}:){6}(?:[0-9A-F]{1,4}:[0-9A-F]{1,4}|(?:(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)))|::(?:[0-9A-F]{1,4}:){5}(?:[0-9A-F]{1,4}:[0-9A-F]{1,4}|(?:(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)))|[0-9A-F]{1,4}?::(?:[0-9A-F]{1,4}:){4}(?:[0-9A-F]{1,4}:[0-9A-F]{1,4}|(?:(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)))|(?:(?:[0-9A-F]{1,4}:)?[0-9A-F]{1,4})?::(?:[0-9A-F]{1,4}:){3}(?:[0-9A-F]{1,4}:[0-9A-F]{1,4}|(?:(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)))|(?:(?:[0-9A-F]{1,4}:){,2}[0-9A-F]{1,4})?::(?:[0-9A-F]{1,4}:){2}(?:[0-9A-F]{1,4}:[0-9A-F]{1,4}|(?:(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)))|(?:(?:[0-9A-F]{1,4}:){,3}[0-9A-F]{1,4})?::(?:[0-9A-F]{1,4}:)(?:[0-9A-F]{1,4}:[0-9A-F]{1,4}|(?:(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)))|(?:(?:[0-9A-F]{1,4}:){,4}[0-9A-F]{1,4})?::(?:[0-9A-F]{1,4}:[0-9A-F]{1,4}|(?:(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)))|(?:(?:[0-9A-F]{1,4}:){,5}[0-9A-F]{1,4})?::[0-9A-F]{1,4}|(?:(?:[0-9A-F]{1,4}:){,6}[0-9A-F]{1,4})?::|v[0-9A-F]+\\.(?:[a-zA-Z0-9_.~-]|[!$&'()*+,;=]|:)+)\\]|(?:(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?))|(?:(?:[a-zA-Z0-9._~-]|[\xa0-\ud7ff\uf900-\ufdcf\ufdf0-\uffef\U00010000-\U0001fffd\U00020000-\U0002fffd\U00030000-\U0003fffd\U00040000-\U0004fffd\U00050000-\U0005fffd\U00060000-\U0006fffd\U00070000-\U0007fffd\U00080000-\U0008fffd\U00090000-\U0009fffd\U000a0000-\U000afffd\U000b0000-\U000bfffd\U000c0000-\U000cfffd\U000d0000-\U000dfffd\U000e1000-\U000efffd])|%[0-9A-F][0-9A-F]|[!$&'()*+,;=])*) 
```

（来自[rfc3987](http://pypi.python.org/pypi/rfc3987)）

# r - R表修改

> ID：10191445
> 
> 赞同：1
> 
> 时间：2012-04-17T12:40:41.550
> 
> 标签：r, plyr, data.table

如何取一列中的几个条目的平均值，而另一列中的相应条目具有相同的条目？

例如，我有一个大表，有 3 列，时间和价格为 2。让我们说在时间列下的值重复。像 10:30 出现 4 次，那么我需要取相应价格列条目的平均值并将其汇总到 10:30 的单行中，其中包含单个价格。有人可以给我一些见解吗？

样本数据：

```
time      prices     size
10:00        23        1
10:15        12        3
10:30        12        1
10:30        19        4
10:45        12        1 
```

我想修改第 3 行和第 4 行合并为一行，平均价格。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-17T13:16:51.433

你也可以看看`plyr`包裹。我会用`ddply`这个：

```
ddply(df, .(time), summarise, 
   mean_price = mean(prices),
   sum_size = sum(size)) 
```

这假设您的数据位于`df`. 如需更详细的描述`plyr`，请查看Journal of Statistical Software 中的[这篇论文](http://www.jstatsoft.org/v40/i01)。

其他替代方法包括使用`data.table`, 或`ave`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-17T12:44:57.967

像这样的东西怎么样

```
tapply(prices, time, mean) 
```

如需更完整的图片，请参阅`?tapply`

但是你想用这个专栏做`size`什么？

**编辑：**

为了取价格的平均值和大小的最后一个值，这里有一个建议：

```
myDF<-data.frame(time=c("10:00","10:15","10:30","10:30","10:45"),
  prices=c(23,12,12,19,12),size=c(1,3,1,4,1))

theRows <- tapply(seq_len(nrow(myDF)), myDF$time, function(x) {
  return(data.frame(time = head(myDF[x, "time"],1), prices = mean(myDF[x, "prices"]),
    size = tail(myDF[x, "size"], 1)))
  }
)

Reduce(function(...) rbind(..., deparse.level = FALSE), theRows) 
```

ps 这可以很好地使用`ddply`- 也可以参见 Paul 的回答！

# html - 定位 a 时的垂直对齐 在无序列表中

> ID：10191447
> 
> 赞同：2
> 
> 时间：2012-04-17T12:40:43.397
> 
> 标签：html, css, markup

`<ul>`我在元素中添加了一个搜索框作为列表项，如下所示：

```
<nav id="notifications-menu">
    <ul id="display-inline-block">
        <li><a class="normal calendar" onclick="showUserCalendar('/', false);" href="#">My Calendar</a></li>
        <li><a class="normal calendarteam" onclick="showTeamCalendar('/', false);" href="#">Team Calendar</a></li>

        <li><div id="global-search-wrapper">
            <input type="text" class="global-search-box" name="s" value="type search term..." />
            <input type="image" src="/images/general/blank.gif" class="global-search-submit" value="" />
        </div></li>
    </ul>
</nav> 
```

应用以下 CSS 时，我得到以下输出。我想让列表项文本中心对齐（垂直）：

![在此处输入图像描述](../Images/ec8fedd1272eff4a1518289568b25db2.png)

```
nav#notifications-menu  { 
    font-family: 'Adelle', sans-serif;
    float:right;
    height: 52px; 
    width:600px;
    min-width:300px;
    padding: 0px 18px 0px 0px;
    text-align:right;
    font-size:13px;
}

nav#notifications-menu #display-inline-block,
nav#notifications-menu #display-inline-block li {
    /* Setting a common base */
    margin: 0;
    padding: 0;

}

nav#notifications-menu #display-inline-block li {
    display: inline-block;
}

nav#notifications-menu #display-inline-block li a.normal {
    color: #f0f0f0;
    text-decoration:none;
    margin-right:18px;
    padding-left:24px;

    background-repeat:no-repeat;

}
nav#notifications-menu #display-inline-block li a.envelope {
        background-image:url(../images/general/envelope.png);
            background-position: 0px 1px;
}
nav#notifications-menu #display-inline-block li a.calendar {
        background-image:url(../images/general/calendar.png);
            background-position: 0px -2px;
}
nav#notifications-menu #display-inline-block li a.calendarteam {
        background-image:url(../images/general/calendar_team.png);
            background-position: 0px -2px;
}

#global-search-wrapper {
    width: 234px;
    height: 30px;
    background-image: url(../images/general/search-box.png);
    background-repeat: no-repeat;
    padding: 0px;
    margin: 12px 0px 0px 0px;
    position: relative; }

    #searchwrapper form {
        display: inline;
        border: 0px; }

.global-search-box {
    border: 0px;
    background-color: transparent;
    position: absolute;
    top: 1px;
    left: 9px;
    width: 206px;
    height: 28px;
    color: #999999;
    font-style: italic;
    border:0px !important; }

.global-search-submit {
    border: 0px;
    background-color: transparent;
    position: absolute;
    top: 1px;
    left: 200px;
    width: 32px;
    height: 28px; } 
```

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-17T12:49:34.767

只需将 a 添加`vertical-align`到`li`元素，例如

```
nav#notifications-menu #display-inline-block li {
    display: inline-block;
    vertical-align: middle;
} 
```

因为`baseline`是默认对齐方式

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-19T09:14:21.737

看看这个：

[https://stackoverflow.com/a/16299925/1211174](https://stackoverflow.com/a/16299925/1211174)

HTML

```
<div id="parent">
   <div id="child">Content here</div>
</div> 
```

CSS

```
#parent {
   padding: 5% 0;
}

#child {
   padding: 10% 0;
} 
```

**如果父 div 是 li，这也有效**

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-04-17T12:44:18.767

您可以在 li 上添加 padding-bottom 以在其后留出一些空间。

# wcf - AMQP AmqpBinding IIS/WAS 问题？

> ID：10191448
> 
> 赞同：0
> 
> 时间：2012-04-17T12:40:48.670
> 
> 标签：wcf, iis, amqp, was

当前雇主的设置在 Java 平台上具有一组后台功能，在两个独立的基于 .NET 的平台上具有另一组功能。没有整体架构师。

Java 人员决定使用 Apache QPID 和 AMQP 进行消息传递，大概是在他们之间，使用 .NET 系统和其他外部系统。

.NET 体系结构涉及托管在 IIS/WAS 和 Windows Server AppFabric 中的 WCF 服务。

如果有任何可能的陷阱，是否有人对 AmqpBinding 和 IIS/WAS 有任何经验？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-17T14:51:42.790

我认为您的第一个问题将是 IIS/WAS/AppFabric，因为托管在 WAS 中的非 HTTP 服务对基础架构有额外的要求，其中包括通常作为 Windows 服务运行并与工作进程通信的额外进程（侦听器）。这个过程负责接收和发送消息，并允许在 WAS 中激活服务。我不认为 QPID 项目已经创建了侦听器进程。您很可能必须自己实现侦听器 - 检查[此示例](http://msdn.microsoft.com/en-us/library/aa717041.aspx)以获取自定义 UDP 激活器。

# wordpress - Wordpress - 页面停止工作 - 永久链接问题？

> ID：10191453
> 
> 赞同：0
> 
> 时间：2012-04-17T12:41:20.363
> 
> 标签：wordpress, menu, permalinks

我为一家公司开发了一个简单的 wordpress 网站。今天他们打电话给我，说有些页面无法访问。所以我检查了一下，似乎有 3 个菜单选项出于明显的原因刚刚停止工作。他们说他们没有做任何改变。

[http://oi40.tinypic.com/ofqcev.jpg](http://oi40.tinypic.com/ofqcev.jpg)

检查它说“projektledning”的永久链接应该是这样的，并且wordpress拒绝找到该页面。

[http://oi40.tinypic.com/16h9mcg.jpg](http://oi40.tinypic.com/16h9mcg.jpg)

而且我无缘无故地尝试更改永久链接，并且在链接中添加了“-1”并使其正常工作...

我应该怎么做才能使永久链接像正常名称一样工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T13:38:29.633

尝试在`admin - settings - permalinks`. `.htaccess`在执行此操作之前，请确保您的服务器对您的文件具有写入权限。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-20T13:11:44.200

.htaccess 应该是这样的：

```
# BEGIN WordPress
<IfModule mod_rewrite.c>
RewriteEngine On
RewriteBase /
RewriteRule ^index\.php$ - [L]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule . /index.php [L]
</IfModule>
# END WordPress 
```

在最后一行，确保 . 和/还检查您的永久链接是否有任何拼写错误（空格）。

如果你的 url 是 foo.bar/something，让你的 .htaccess 看起来像：

```
# BEGIN WordPress
<IfModule mod_rewrite.c>
RewriteEngine On
RewriteBase /something/
RewriteRule ^index\.php$ - [L]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule . /something/index.php [L]
</IfModule>
# END WordPress 
```

希望这可以帮助！

# jquery-mobile - jQuery Mobile：多行按钮，位于垂直控件组中

> ID：10191461
> 
> 赞同：2
> 
> 时间：2012-04-17T12:41:56.403
> 
> 标签：jquery-mobile

在我的 jQuery Mobile 页面上，我对一些按钮使用了水平控件组。但在某些语言中，这些按钮中的文本太长了。

不是将文本包裹在每个按钮中，而是按钮本身包裹到下一行。

![问题截图](../Images/e17c9800bcbf4541a1cf875ccbc2850a.png)

这是基本代码：

```
<div data-role="controlgroup" data-type="horizontal">
    <a href="#pageVertical" data-role="button">short button</a>
    <a href="#pageVertical" data-role="button">really really really insanely long button is really really insanely long. No really, who makes buttons this big?</a>
</div> 
```

通过这个 css，我们说服它包裹在按钮内。否则，文本将被省略号截断

```
.ui-btn-inner{ 
    white-space: normal !important; 
} 
```

在这个小提琴的第三页上，问题被证明了 [http://jsfiddle.net/koesper/R8Kwe/](http://jsfiddle.net/koesper/R8Kwe/)

任何人有任何想法我可以如何解决这个问题？

在此先感谢，卡斯帕

附言。原始修复的灵感来自于[Jquery Mobile Multiline Button中的 Tosh](https://stackoverflow.com/questions/7453926/jquery-mobile-multiline-button)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-17T16:54:11.707

您可以为控制组中的链接设置宽度：

```
.ui-page .ui-content .ui-controlgroup a {
    width : 49%;
}​ 
```

这将使它们保持在同一条线上。这是一个演示：http: [//jsfiddle.net/R8Kwe/6/](http://jsfiddle.net/R8Kwe/6/)

另外，为了彻底起见，`white-space : normal`实际上需要将其应用于`.ui-btn-text`元素的子`.ui-btn-inner`元素（因此它仍然接收继承的值）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T01:59:48.393

修剪你的长按钮——这是一个可用性问题。如果您的操作按钮名称那么长，这似乎只是违背了操作的目的？除此之外，我不会将控制组用于这样的事情。我会使用自定义数据主题和一些网格来内嵌我的按钮。

# java - Java中对象的线程安全复制

> ID：10191465
> 
> 赞同：1
> 
> 时间：2012-04-17T12:42:11.077
> 
> 标签：java, multithreading, thread-safety, synchronized

我有一个类似于以下的静态类数组：

```
public class Entry {
    private String sharedvariable1= "";
    private String sharedvariable2= "";
    private int sharedvariable3= -1;

    private int mutablevariable1 = -1
    private int mutablevariable2 = -2;

    public Entry (String sharedvariable1, 
                  String sharedvariable2, 
                  int sharedvariable3) {
        this.sharedvariable1 = sharedvariable1;
        this.sharedvariable2 = sharedvariable2;
        this.sharedvariable3 = sharedvariable 3;
    }

    public Entry (Entry entry) {  //copy constructor. 
        this (entry.getSharedvariable1, 
              entry.getSharedvariable2, 
              entry.getSharedvaraible3);
    }
....
/* other methods including getters and setters*/
} 
```

在我的程序中的某个时刻，我访问了该对象的一个​​实例，并使用上面的复制构造函数对其进行了复制。然后我更改上面两个可变变量的值。该程序在多线程环境中运行。 **请注意。所有变量在穿线前都设置了它们的初始值。** 只有在程序被线程化并复制后，变量才会改变。我相信它是线程安全的，因为我只读取静态对象，而不是写入它（即使是共享变量 3，尽管只读取 int 和可变对象）并且我只更改静态对象的副本（以及正在一个线程中制作副本）。但是，我想在这里确认我的想法是正确的。

有人可以评估我在做什么吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-17T12:48:58.260

它不是线程安全的。您需要包装任何*修改*共享变量的内容：

```
synchronized (this) {
    this.sharedvariable1 = newValue;
} 
```

对于二传手，您可以这样做：

```
public synchronized void setSharedvariable1(String sharedvariable1) {
    this.sharedvariable1 = sharedvariable1;
} 
```

然后在你的复制构造函数中，你会做类似的事情：

```
public Entry (Entry entry) {
    this();
    synchronized(entry) {
        this.setSharedvariable1(entry.getSharedvariable1());
        this.setSharedvariable2(entry.getSharedvariable2());
        this.setSharedvariable3(entry.getSharedvariable3());
    }
} 
```

这确保了如果正在对实例进行修改，则复制操作将等到修改完成。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T12:47:27.653

它不是线程安全的，您应该在复制构造函数中同步。您正在从复制构造函数中的原始对象读取三个变量中的每一个。这些操作一起不是原子的。因此，当您读取第一个值时，可能是第三个值被另一个线程更改。在这种情况下，您有一个处于不一致状态的“复制”对象。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-17T13:07:50.467

它不是线程安全的。我的意思是这并不能**保证**`Entry`使用同一实例的多个线程的线程安全。

我在这里看到的问题如下：

1.  `Thread 1`开始构建`Entry`实例。它不会使该实例对其他线程的访问隐藏。
2.  `Thread 2`使用它的复制构造函数访问该实例，而它仍在构造的中间。

`Entry`考虑到的 field的初始值`private int sharedvariable3= -1;`，结果可能是由创建的新“复制”实例`Thread 2`将其`sharedvariable3`字段设置为`0`（java 中 int 类字段的默认值）。

那就是问题所在。

如果它困扰您，您必须进行`synchronize`读/写操作，或处理`Entry`实例发布。意思是，不允许其他线程访问`Entry`正在构建的实例。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-17T13:15:11.867

我真的不明白，为什么你认为私有实例变量是共享的。通常共享字段是静态的而不是私有的——我建议您不要共享私有实例变量。为了线程安全，您应该同步改变变量值的操作。

您可以为此使用 synchronized 关键字，但要选择正确的监视器对象（我认为条目本身应该这样做）。另一种选择是使用 java.util.concurrent 中的一些锁实现。通常锁提供更高的吞吐量和更好的粒度（例如多个并行读取但在任何给定时间只有一次写入）。

您必须考虑的另一件事是所谓的内存屏障。看看这篇有趣的文章[http://java.dzone.com/articles/java-memory-model-programer%E2%80%99s](http://java.dzone.com/articles/java-memory-model-programer%E2%80%99s)

您可以使用 volatile 关键字强制执行发生在语义之前。显式同步（锁或同步代码）也跨越内存屏障并强制在语义之前发生。

最后一条一般建议：您应该不惜一切代价避免共享可变状态。同步是一件令人头疼的事情（性能和维护方面）。错误同步导致的错误非常难以检测。最好针对不变性或孤立的可变性进行设计（例如参与者）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-28T21:39:34.833

答案是它在概述的条件下是线程安全的，因为我只读取处于静态状态的变量并且只更改副本。

# version-control - 使用哪个 SCM 将修订控制添加到配置工具？

> ID：10191474
> 
> 赞同：2
> 
> 时间：2012-04-17T12:42:51.623
> 
> 标签：version-control, configuration

在工作中，我们有一个配置应用程序，它将用户更新保存到一个大而复杂的 XML 文件中。每次管理员更改任何内容时，光盘上的配置文件都会更新。

我在考虑每次管理员保存时，都应该在修订系统中创建一个新修订。我认为“本地文件”-SCM 是首选，必须安装额外的产品并启动和运行通信将是一个不需要的安装步骤。也不需要并发，因为我们的配置应用程序是单个用户（一次）。

我最好的选择是传统的[gnu-RCS](http://www.gnu.org/software/rcs/)。但也许还有其他值得考虑的选择。

（我的老板更喜欢不受限制的选项（如 GPL），但欢迎所有答案。如果这与您的答案相关，该产品也是基于 Web 和 .net 的。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T14:12:57.997

您是否打算在应用程序中显示文件已修订的事实？这样，例如，用户可以“恢复到两周前的配置”，就像一种超级撤消？如果不是，*为什么*要添加 SCM 来跟踪文件？

如果是这样，可用的编程库可能会影响选择，因为您将希望从代码中访问修订历史记录。我想大多数 SCM 系统都可以做到这一点，例如 Git 有[libgit2](http://libgit2.github.com/)，这看起来不错。

我确实感觉为单个文件添加完整的 SCM 在维护和一般复杂性方面可能有点矫枉过正。也许您应该只在文件名上使用某种计数器后缀来存储文件本身，或者`diff`在先前版本和当前版本之间存储一个以节省空间？注意：空间（相当）便宜。

# sql - 以下场景需要sql查询

> ID：10191475
> 
> 赞同：-1
> 
> 时间：2012-04-17T12:42:52.153
> 
> 标签：sql, tsql

表包含：

```
c1   c2   c3   c4   c5
da1  Null Null db1  dc1
da1  dx1  Null db1  dc1
da1  Null dy1  db1  Null 
```

都是`varchar`领域。

我需要一个查询，其结果数据没有任何空值并且在一行中“ `da1 dx1 dy1 db1 dc1`”

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-17T12:51:40.817

```
select 'da1', 'dx1', 'dt1', 'db1', 'dc1' from thattable limit 1 
```

应该完美地工作

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-17T12:49:21.177

交付的详细信息：

```
select max(c1), max(c2), max(c3), max(c4), max(c5)
from yourtable; 
```

请参阅[此处](https://data.stackexchange.com/stackoverflow/query/67035)的 MGA 模拟。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-17T12:50:21.927

尝试这个。

```
select * from (select distinct c1, c2, c3, c4, c5 from mytable) as mytab where c1 is not null and c2 is not null and c3 is not null and c4 is not null and c5 is not null 
```

# c++ - 如何从我的 Visual Studio 静态代码分析中排除库头？

> ID：10191479
> 
> 赞同：14
> 
> 时间：2012-04-17T12:43:10.823
> 
> 标签：c++, qt, visual-c++, static-analysis, visual-c++-2010

我已经设置 buildbot 来使用 /analyze 标志编译我的 Qt/C++ 应用程序。

然而，分析还深入研究了我不关心的 qt 标头：

```
c:\qt\qt-everywhere-opensource-src-4.8.1\src\corelib\tools\qvector.h(547) : warning C6011: Dereferencing NULL pointer 'x.p': Lines: 474, 475, 476, 477, 478, 480, 491, 493, 497, 498, 499, 500, 503, 504, 518, 519, 520, 521, 522, 525, 545, 547 
```

批量排除这些文件的最佳方法是什么？

（请注意我没有使用 IDE，我正在寻找命令行、开关或代码更改）

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-04-17T18:40:46.843

您可以禁用代码中使用的特定代码块的所有代码分析警告`#pragma warning`。MSDN 提供了以下示例：

```
#include <codeanalysis\warnings.h>
#pragma warning( push )
#pragma warning ( disable : ALL_CODE_ANALYSIS_WARNINGS )
#include <third-party include files here>
#pragma warning( pop ) 
```

（有关详细信息，请参阅[“如何：针对特定 C/C++ 警告启用和禁用代码分析”](https://msdn.microsoft.com/en-us/library/zyhb0b82(v=vs.100).aspx)。）

据我所知，仅使用命令行选项无法禁用来自特定头文件的警告。

# hash - 洪流 info_hash 参数

> ID：10191480
> 
> 赞同：4
> 
> 时间：2012-04-17T12:43:16.843
> 
> 标签：hash, bittorrent, url-parameters

如何计算**info_hash 参数**？又名信息字典对应的哈希？

来自官方规格：

> **info_hash** 元信息文件中信息值的编码形式的 20 字节 sha1 散列。请注意，这是元信息文件的子字符串。这个值几乎肯定会被转义。

这是否意味着只需从元信息文件中获取子字符串并对代表字节进行 sha-1 哈希处理？

....因为这是我尝试 12 次但没有成功的方式，这意味着我将生成的哈希与我最终应该得到的哈希进行了比较..它们不同..+跟踪器响应失败，未知洪流...或某物

那么如何计算 info_hash 呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-24T17:48:55.657

元文件已经被编码，所以我不明白你为什么要再次编码？

我终于在Java代码中得到了这个工作，这是我的代码：

```
byte metaData[];  //the raw .torrent file

int infoIdx = ?;  //index of 'd' right after the "4:info" string

info_hash = SHAsum(Arrays.copyOfRange(metaData, infoIdx, metaData.length-1)); 
```

这假设“信息”块是种子文件中的最后一个块（错误？）

不要排序或类似的东西，只需使用原始种子文件的子字符串。

为我工作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-18T05:46:03.547

bdecode 元文件。然后它很简单`sha1(bencode(metadata['info']))` （即再次只对信息字典进行编码，然后对其进行哈希处理）。

# php - 如何使用 PHP Mysql 创建总帐/T-Account

> ID：10191481
> 
> 赞同：2
> 
> 时间：2012-04-17T12:43:18.597
> 
> 标签：php, mysql, codeigniter, accounting

我正在尝试创建一个复式财务会计系统。我已经完成了它的数据库设计，请查看此链接以查看我的数据库图表。[http://i39.tinypic.com/juhbv6.png](http://i39.tinypic.com/juhbv6.png)

我已经尝试了很多来开发 mysql 查询以生成总帐，但我没有接近。我所做的只是为一个帐户创建分类帐，我必须为无限帐户创建。

我尝试过的查询如下：

```
 $this->db->select('*');
    $this->db->from('credit_side');
    $this->db->join('debit_side', ' debit_side.transaction_id_dr = credit_side.transaction_id_cr ');
    $this->db->join('transaction_info', 'transaction_info.transaction_id = credit_side.transaction_id_cr ');
    $this->db->join('accounts', 'accounts.code = credit_side.account_code ');
    $this->db->where('debit_side.account_code', '1001'); 
    $this->db->order_by('voucher_date','ASC'); 
```

在未能编写可以为所有帐户生成分类帐的 mysql 查询后，我写下了创建总帐/T 帐户的逻辑。

现在，你能帮我查询一下mysql吗？

请在执行以下操作之前检查数据库。提前致谢 ：）

1.  从帐户中获取`accounts.name`AS AccountHead `accounts.code`。

2.  转到表格`debit_side`，`get debit_side.account_code`如果`debit_side.account_code`=`accounts.code`则获取`credit_side.account_code`AS AccountName1（但是当我将在 php 中回显时，我想获取名称而不是代码本身）和`credit_side.amount`AS Amount1，`SUM(credit_side.amount)`AS TotalAmount1 来自`credit_side`where `debit_side.transaction_id_dr`=`credit_side.transaction_id_cr` 并且`transaction_info.voucher_date`在 date1 和 date2 之间`transaction_info.transaction_id`=`debit_side.transaction_id_dr`

3.  完成第二步后，转到表中`credit_side`，`get credit_side.account_code`如果
    = `credit_side.account_code`，`accounts.code`则获取`debit_side.account_code`AS AccountName2（但是当我将在 php 中回显时，我想获取名称而不是代码本身）和`debit_side.amount`AS Amount2，`SUM(debit_side.amount)`AS TotalAmount2 从`debit_side`where `credit_side.transaction_id_cr`=`debit_side.transaction_id_dr` 和`transaction_info.voucher_date`在在 date1 和 date2 之间 WHERE `transaction_info.transaction_id`=`credit_side.transaction_id_cr`

现在在视图文件中，我的目标是：

```
 <table width="200" border="0">
     <tr><td colspan="5">Account Head <?echo $AccountHead ; ?> </td> </tr>

    <tr>
           <td>Dr.</td>
           <td>amount.</td>
            <td>&nbsp;</td>
           <td>Cr</td>
          <td>Amount</td>

    </tr>
     <tr>
       <td><?echo $AccountName1 ; ?></td>
       <td><?echo $Ammount1 ; ?></td>
      <td></td>
 <td><?echo $AccountName2 ; ?></td>
     <td><?echo $Ammount2 ; ?></td>

     </tr>

     <tr>
     <td>Total</td>
     <td><?echo $TotalAmount1 ; ?></td>
     <td>&nbsp;</td>
 <td>Total  </td>
 <td><?echo $TotalAmount2 ; ?></td>

     </tr>
     </table> 
```

# 总帐样本

![在此处输入图像描述](../Images/19b76f427a677d63b82137cc67ca134f.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-17T14:37:13.733

```
public function getDebits(){    
    $data   =   array(
                'debit_side.account_code DebitCode',
                'group_concat(distinct accounts.name) as DebitAccount',
                'group_concat(debit_side.amount) as DebitAmount',
                'group_concat(transaction_info.voucher_date) as DebitVoucherDate'
                );
    $this->db->select($data);
    $this->db->from('accounts');
    $this->db->join('credit_side','accounts.code = credit_side.account_code','left');
    $this->db->join('debit_side','debit_side.transaction_id_dr = credit_side.transaction_id_cr','left');
    $this->db->join('transaction_info','transaction_info.transaction_id = credit_side.transaction_id_cr','left');
    $this->db->group_by('debit_side.account_code');
    $this->db->order_by('debit_side.account_code','ASC');
    $query  =   $this->db->get();
    return  $query->result_array();
}

public  function getCredits()
{
    $data   =   array(
                'credit_side.account_code CreditCode',
                'group_concat(distinct accounts.name) as CreditAccount',
                'group_concat(credit_side.amount) as CreditAmount',
                'group_concat(transaction_info.voucher_date) as CreditVoucherDate'
                );
    $this->db->select($data);
    $this->db->from('accounts');
    $this->db->join('debit_side','accounts.code = debit_side.account_code','left');
    $this->db->join('credit_side','debit_side.transaction_id_dr = credit_side.transaction_id_cr','left');
    $this->db->join('transaction_info','transaction_info.transaction_id = credit_side.transaction_id_cr','left');
    $this->db->group_by('credit_side.account_code');
    $this->db->order_by('credit_side.account_code','ASC');
    $query  =   $this->db->get();
    return  $query->result_array();
} 
```

抱歉回复晚了，但这是您在做任何事情之前想要测试的完美东西。我想为此创建一个视图文件，但它似乎很复杂并且需要更多时间，目前我正在湖

已编辑

这个解决方案可能会在我测试过它时让你在视图上苦苦挣扎我曾经尝试过结合这两个查询并成功了。该查询可能看起来很复杂，但它正在获取完美的结果。这里是

```
$data   =   array(
                  'debit_side.account_code    Code',
                  'group_concat(distinct accounts.name) as DebitAccount',
                  'group_concat(debit_side.amount) as DebitAmount',
                  'group_concat(transaction_info.voucher_date) as DebitVoucherDate',
                  '(SELECT group_concat(distinct accounts.name) as CreditAccount FROM (accounts)
                    left JOIN debit_side ON accounts.code = debit_side.account_code
                    left JOIN credit_side ON debit_side.transaction_id_dr = credit_side.transaction_id_cr
                    left JOIN transaction_info ON transaction_info.transaction_id = credit_side.transaction_id_cr
                    group by credit_side.account_code
                    having credit_side.account_code = `Code`) as CreditAccount',
                  '(SELECT  group_concat(credit_side.amount) as CreditAmount FROM (accounts)
                     left JOIN debit_side ON accounts.code = debit_side.account_code
                     left JOIN credit_side ON debit_side.transaction_id_dr = credit_side.transaction_id_cr
                     left JOIN transaction_info ON transaction_info.transaction_id = credit_side.transaction_id_cr
                   group by credit_side.account_code
                   having credit_side.account_code = `Code`) as CreditAmount',  
                  '(SELECT  group_concat(transaction_info.voucher_date) as CreditVoucherDate FROM (accounts)
                    left JOIN debit_side ON accounts.code = debit_side.account_code
                    left JOIN credit_side ON debit_side.transaction_id_dr = credit_side.transaction_id_cr
                    left JOIN transaction_info ON transaction_info.transaction_id = credit_side.transaction_id_cr
                    group by credit_side.account_code
                    having credit_side.account_code = `Code`) as CreditVoucherDate'

                );
    $this->db->select($data);
    $this->db->from('accounts');
    $this->db->join('credit_side','accounts.code = credit_side.account_code','left');
    $this->db->join('debit_side','debit_side.transaction_id_dr = credit_side.transaction_id_cr','left');
    $this->db->join('transaction_info','transaction_info.transaction_id = credit_side.transaction_id_cr','left');
    $this->db->group_by('debit_side.account_code');
    $this->db->order_by('debit_side.account_code','ASC');
    $query  =   $this->db->get();
    return  $query->result_array(); 
```

虽然这个查询工作正常，但这里是这个查询的修改和优化版本我真的从这个查询中学到了东西你也应该看看这个

[Group by 在查询中的奇怪行为需要优化](https://stackoverflow.com/questions/10518718/strange-behaviour-of-group-by-in-query-which-needs-to-be-optimized/10533100#10533100)

# java - maven 是否有能力在没有任何来源的情况下将单个 *.dll 打包到 jar 中？

> ID：10191485
> 
> 赞同：1
> 
> 时间：2012-04-17T12:43:42.840
> 
> 标签：java, maven, dll, jar, jacob

我想将 *.dlls 作为第三方库添加到我的存储库中，并且在打包过程中只需将它们打包到 *.jar，对其进行签名并复制到某个特定文件夹。

* * *

签名和应对都做得很好并且可以正常工作（正如使用 maven-dependency-plugin 和 maven-jarsigner-plugin 所期望的那样）。但是我没有找到任何方法可以自动将单个 dll 打包到 jar 中（没有像 maven-assembly-plugin 这样的任何来源）。

* * *

我当时看到的解决方案：添加到我的存储库不是“纯”dll，而是已经打包到 jar lib（由我自己打包）......但这不是一个好主意，我猜）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T12:51:30.693

我建议通过 maven-assembly-plugin 将您的 dll 打包为 zip 存档，并让该模块将 zip 存档部署为附加到您通常的 pom.xml 文件中。该项目的包装应该是 pom 而不是默认的。如果我下载一个 jar 并在其中找到 dll，我会有点困惑，但如果您愿意，您可以通过 maven-assembly-plugin 或使用 maven-jar-plugin 创建 jar。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-18T04:00:04.057

听起来您已经成功检索了您的 .dll（带有依赖插件）并对其进行了签名（jarsigner 插件），并且它位于您的某个位置`${project.build.directory}`（默认为`target`）。

如果这是正确的，试试这个：

*   将项目的定义`packaging`为`jar`
*   检索 dll
*   确保`jarsigner:sign`目标绑定到`prepare-package`阶段。它默认绑定到`package`，我们需要确保`jarsigner:sign`在`jar:jar`.

    ```
    <plugin>
    <groupId>org.apache.maven.plugins</groupId>
    <artifactId>maven-jarsigner-plugin</artifactId>
    <version>1.2</version>
    <executions>
      <execution>
        <id>sign</id>
        <phase>prepare-package</phase>       <!-- important -->
        <goals>
          <goal>sign</goal>
        </goals>
      </execution>
    </executions>
    </plugin> 
    ```

*   配置`jar`插件以包含签名的 dll

    ```
    <plugin>
    <groupId>org.apache.maven.plugins</groupId>
    <artifactId>maven-jar-plugin</artifactId>
    <version>2.4</version>
    <executions>
      <execution>
        <!-- using this ID merges this config with default -->
        <!-- So it should not be necessary to specify phase or goals -->
        <!-- Change classes directory because it will look in target/classes 
             by default and that probably isn't where your dlls are.  If
             the dlls are in target then directoryContainingSignedDlls is
             simply ${project.build.directory}. -->
        <id>default-jar</id>   
        <configuration>
          <classesDirectory>directoryContainingSignedDlls</classesDirectory>
          <includes>
            <include>**/*.dll</include>
          </includes>
        </configuration>
      </execution>
    </executions>
    </plugin> 
    ```

*   现在，运行`mvn clean package`应该会给你一个包含你签名的 dll 的 jar。

*   如果 JACOB 需要清单配置，则有[文档](http://maven.apache.org/plugins/maven-jar-plugin/examples/manifest-customization.html)解释如何执行此操作。

祝你好运！

# entity-framework - 获取 IOrderedEnumeration 的前一个元素

> ID：10191488
> 
> 赞同：1
> 
> 时间：2012-04-17T12:43:53.567
> 
> 标签：entity-framework, collections

我有一个对象枚举：

```
 public IOrderedEnumerable<RentContract> Contracts {
        get { return RentContracts.OrderByDescending(rc => rc.DateCreated); }
    } 
```

我必须将给定的 RentContract 实例与列表中的前一个 RenContract 实例进行比较，以突出显示两个对象之间的变化，这是获取前一个元素的最正确方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T13:45:51.167

这是不可能的。你可以这样做：

```
var input = new SomeClass[10]; //test data
var zipped = input.Zip(new SomeClass[1].Concat(input), (a, b) => { a, b });
var result = zipped.Where(x => x.b == null || x.a.DateCreated < x.b.DateCreated.AddHours(-1)); //some example 
```

这个解决方案是用自身压缩序列，但偏移一个空元素。

# install4j - 如何禁用 install4j 向导上的“定位”按钮并在未找到 JRE 的情况下显示自定义消息？

> ID：10191489
> 
> 赞同：1
> 
> 时间：2012-04-17T12:43:55.477
> 
> 标签：install4j

我正在尝试创建一个没有捆绑 JRE 的安装程序，它将显示一条消息，告诉用户从 java.com 下载正确的 JRE，而不是在安装程序找不到合适的 JRE 时要求他们找到 JRE，但我找不到任何将允许我这样做。

我尝试在安装程序的启动序列中添加屏幕或添加操作，但它们都只有在 install4j 向导找到合适的 JRE 或要求用户找到合适的 JRE 或要求用户下载 JRE（动态捆绑）后才会执行。

对此的任何见解将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T08:50:32.680

这是在加载 JVM 之前安装程序的本机部分，因此添加屏幕或操作无济于事，因为它们是在 JVM 中执行的。

您可以通过转到常规设置-> 语言来更改错误消息，定义自定义本地化文件并覆盖消息：

exe4j.NoJvmFound=您告诉用户访问 java.com 的消息。

# android - 如何通过 JSON 获取实时更新到 listview

> ID：10191502
> 
> 赞同：5
> 
> 时间：2012-04-17T12:44:24.690
> 
> 标签：android, json, web-services, listview

我找不到通过 JSON 获取实时更新到列表视图的方法。

我的活动是从网页请求 JSON 数据，代码是：

```
public class Second extends Activity {

    static final String Li_nk = "LinkName:";
    static final String Image_name = "ImageName:";
    ListView list;
    public final static String AUTH = "authentication";
    static final String KEY_THUMB_URL = "thumb_image"; // Uri.decode("http://zeesms.info/android_app_images/Koala.jpg");

    @Override
    protected void onCreate(Bundle savedInstanceState) {

        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        Intent i2 = getIntent();
        String wrd = i2.getStringExtra("entrd");
        Log.v("keyis", wrd);

        // if(wrd.equalsIgnoreCase("test")){
        JSONObject j2 = JSONfunctions.getJSONfromURL("/webservice_search.php?keyword=" + wrd + "&format=json");

        ArrayList<HashMap<String, String>> mylist = new ArrayList<HashMap<String, String>>();
        try {
            JSONArray jray = j2.getJSONArray("listings");
            for (int i = 0; i < jray.length(); i++) {
                Log.v("state", "json data being read");
                JSONObject j3 = jray.getJSONObject(i);
                String first = j3.getString("listing");
                Log.v("sublist", first);
                JSONObject j4 = j3.getJSONObject("listing");
                String sec = j4.getString("links");

                int maxLength = (sec.length() < 30) ? sec.length() : 27;
                sec.substring(0, maxLength);
                String cutsec = sec.substring(0, maxLength);
                Log.v("links are", cutsec);
                String img = j4.getString("image_name");
                Log.v("image name is ", img);
                // Uri
                // dimg=Uri.parse("http://zeesms.info/android_app_images/Koala.jpg");
                HashMap<String, String> map = new HashMap<String, String>();

                map.put("Id", String.valueOf(i));
                map.put(Li_nk, cutsec);
                map.put(Image_name, j4.getString("image_name"));

                map.put(KEY_THUMB_URL, "http://zeesms.info/android_app_images/" + img);
                mylist.add(map);

            }

        }
        catch (JSONException e) {
            alertbox();
            Log.e("loG_tag", "Error parsing" + e.toString());
        }

        list = (ListView) findViewById(R.id.lv1);
        this.list.setEmptyView(findViewById(R.id.empty));
        list.setOnItemClickListener(new AdapterView.OnItemClickListener() {

            @Override
            public void onItemClick(AdapterView<?> parent, View view, int position, long id) {

                // Toast.makeText(getApplicationContext(),"Click ListItem Number "
                // + position, Toast.LENGTH_LONG).show();
                Intent myIntent = new Intent(Intent.ACTION_VIEW, Uri.parse("http://www.riffre.com/"));
                startActivity(myIntent);
            }

        });
        LazyAdapter adapter = new LazyAdapter(this, mylist);

        list.setAdapter(adapter);
        list.setItemsCanFocus(false);

        // }
        /*
         * else{ alertbox(); }
         */

    }

    /*
     * public void register(View view) { Log.w("C2DM",
     * "start registration process"); Intent intent = new
     * Intent("com.google.android.c2dm.intent.REGISTER");
     * intent.putExtra("app", PendingIntent.getBroadcast(this, 0, new
     * Intent(), 0)); // Sender currently not used intent.putExtra("sender",
     * "nonsenses@gmail.com"); startService(intent); }
     * 
     * public void showRegistrationId(View view) { SharedPreferences prefs =
     * PreferenceManager .getDefaultSharedPreferences(this); String string =
     * prefs.getString(AUTH, "n/a"); Toast.makeText(this, string,
     * Toast.LENGTH_LONG).show(); Log.d("C2DM RegId", string);
     * 
     * }
     */
    public void alertbox() {

        new AlertDialog.Builder(this).setMessage("Invalid Keyword,No Results found").setTitle("Alert").setCancelable(true).setPositiveButton(android.R.string.ok, new DialogInterface.OnClickListener() {

            public void onClick(DialogInterface dialog, int whichButton) {

                finish();

            }
        }).show();
    }
} 
```

我正在使用带有以下代码的自定义适配器：

```
public class LazyAdapter extends BaseAdapter {
    private Activity activity;
    private ArrayList<HashMap<String, String>> data;
    private static LayoutInflater inflater=null;
    public ImageLoader imageLoader; 

    public LazyAdapter(Activity a, ArrayList<HashMap<String, String>> d) {
        activity = a;
        data=d;
        inflater = (LayoutInflater)activity.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        imageLoader=new ImageLoader(activity.getApplicationContext());
    }

    @Override
    public int getCount() {
        // TODO Auto-generated method stub
        return data.size();
    }

    @Override
    public Object getItem(int position) {
        // TODO Auto-generated method stub
        return position;
    }

    @Override
    public long getItemId(int position) {
        // TODO Auto-generated method stub
        return position;
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {
        View vi=convertView;
        if(convertView==null)

            vi = inflater.inflate(R.layout.custom_row_view1, null);

        TextView title = (TextView)vi.findViewById(R.id.linkname); // merchnts name
        TextView artist = (TextView)vi.findViewById(R.id.imagename); // address
        //TextView duration = (TextView)vi.findViewById(R.id); // distance
       ImageView thumb_image=(ImageView)vi.findViewById(R.id.mClogo); // logo

        HashMap<String, String> jsn = new HashMap<String, String>();
        jsn = data.get(position);

        // Setting all values in listview
       title.setText(jsn.get(Second.Li_nk));
       artist.setText(jsn.get(Second.Image_name));
        //duration.setText(song.get(CustomizedListView.KEY_DURATION));
        imageLoader.DisplayImage(jsn.get(Second.KEY_THUMB_URL), thumb_image);
        return vi;
    }
} 
```

我想要的是应用程序每分钟左右用数据更新列表视图。列表中的最新条目也应位于顶部。

最好的方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T12:53:27.693

好吧，如果您上面的代码正常工作，您应该能够通过以下步骤实现您的目标：

*   将您的 JSON 加载代码提取到 AsyncTask 中，您可以每分钟触发一次。（[异步任务](https://stackoverflow.com/questions/10115403/progressdialog-while-load-activity/10118869#10118869)）
*   使用 AsyncTask 更新您的 ListAdapter。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-17T13:04:58.463

将您的 JSON 解析代码，这可能是您的`try..catch`块放在一个单独的函数中，而不是放在`onCreate()`.

所以可以很容易地每分钟调用那个部分。假设函数名称每次`LoadData()`还添加一行`adapter.notifyDataSetChanged()`来更新适配器/列表。

现在在您的 onCreate() 中，编写此代码以每隔一分钟调用一次该函数，

```
 final Handler handler = new Handler();
    Runnable runable = new Runnable() {

        @Override
        public void run() {

            //call the function
            LoadData();
            //also call the same runnable
            handler.postDelayed(this, 1000);
        }
    };
    handler.postDelayed(runable, 1000); 
```

现在解决第二个问题，在顶部添加新数据..

我现在只想写一件事来编写一个循环，在调用适配器通知更改之前将其添加到您的函数中，例如

```
 ArrayList<HashMap<String,String>> mylist = new  ArrayList<HashMap<String,String>>(); 
     ArrayList<HashMap<String,String>> mylistTemp = new  ArrayList<HashMap<String,String>>();
     for(int i = mylist.size()-1 ; i >=0;i--)
     {
         mylistTemp.add(mylist.get(i));
     }
     mylist = mylistTemp; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-17T13:11:46.117

这是 onCreate() 方法的一个可能实现，它将每分钟运行一次更新任务：

```
public class JSON_AndroidActivity extends Activity {
    /** Called when the activity is first created. */
    private JSONLoaderTask mJSONLoaderTask;
    private Handler mHandler;
    private ArrayAdapter<String> mArrayAdapter;
    private Runnable mRefresher = new Runnable() {

        @Override
        public void run() {
            mJSONLoaderTask = new JSONLoaderTask(JSON_AndroidActivity.this, mArrayAdapter);
            mJSONLoaderTask.execute("");
            mHandler.postDelayed(this, 1000);

        }
    };
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        mHandler.postDelayed(mRefresher, 1000);
    }
} 
```

这是一个可能任务的外壳实现，您可以在其中执行繁重的负载并更新列表的适配器：

```
public class JSONLoaderTask extends AsyncTask<String, String, String> {
    private Context context;
    private ProgressDialog progressDialog;
    private final ArrayAdapter<String> mArrayAdapter;

    public JSONLoaderTask(Context pContext, ArrayAdapter<String> pArrayAdapter) {
        this.context = pContext;
        this.mArrayAdapter = pArrayAdapter;
    }

    @Override
    protected void onPreExecute() {
        progressDialog = new ProgressDialog(context);
        progressDialog.show();
    }

    @Override
    protected String doInBackground(String... params) {
         String result = getJSONStream();
        return result;
    }

    private String getJSONStream() {
        //load your string here
        return "";
    }

    @Override
    protected void onPostExecute(String result) {
        progressDialog.dismiss();
        // Update your ArrayAdapter
    }

} 
```

# ruby-on-rails - 弹出窗口中的咖啡脚本和haml

> ID：10191505
> 
> 赞同：0
> 
> 时间：2012-04-17T12:44:27.017
> 
> 标签：ruby-on-rails, coffeescript, haml

```
popitup = (url) ->
  newwindow = window.open(url, "name", "height=200,width=150")
  newwindow.focus()  if window.focus
  false 
```

这是我的代码，但我想将弹出窗口链接到 haml 文件而不是 URL 以显示在我的弹出窗口中

```
%h1 popup
br
%input{:name => "option1", :type => "checkbox", :value => "Milk"}
Milk                   
%br                   
%input{:name => "option2", :type => "checkbox", :value => "Butter"}                 
Butter                  
%br                   
%input{:name => "option3", :type => "checkbox", :value => "Cheese"}                    
Cheese                      
%br 
```

这是我正在使用咖啡脚本的haml文件

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-22T21:53:08.297

您应该创建一个显示弹出窗口并使用其 url 的操作。

在不相关的注释上，您应该为复选框旁边的文本使用标签，以便单击文本的用户可以切换复选框。

# internet-explorer - 带有 VBA 输入事件的 Internet Explorer 自动化

> ID：10191506
> 
> 赞同：6
> 
> 时间：2012-04-17T12:44:28.933
> 
> 标签：internet-explorer, vba, automation

我正在尝试使用 Microsoft Access 2003 中的自动化来控制 Internet Explorer 9 以使用数据库数据完成表单。

输入会在浏览器中触发一个事件，该事件验证数据并使保存按钮可见。如果我使用 sendkeys 触发事件；但是，我发现 sendkeys 非常不可靠。如果我更改元素的值，然后使用 .fireevent ("onchange")，则不会发生任何事情——甚至不会出现错误。

我的问题是，我如何触发这个事件。或者，我怎样才能找出正在运行的 javascript。是否有用于 IE 的调试类型的插件，它会告诉我触发了什么事件？如果是这样，我可以自己运行脚本吗？

我的代码如下。

```
 Set IE = CreateObject("internetexplorer.application")
IE.Visible = True
IE.Navigate "https://extranet.website.com/Planning/Edition/Periodic?language=en"

Do While IE.ReadyState <> 4 Or IE.Busy = True
    DoEvents
Loop

'log in
If IE.Document.Title = "website- access" Then
    IE.Document.getElementById("login_uid").Value = "username"
    IE.Document.getElementById("login_pwd").Value = "password"
    IE.Document.all("ButSubmit").Click
    Do While IE.ReadyState <> 4 Or IE.Busy = True
        DoEvents
    Loop
End If

Do While Not RstAvailability.EOF
    StartDate = RstAvailability!AvailDate
    IE.Document.getElementById("periodStart").Value = Format(StartDate, "dd mmm yy")
    IE.Document.getElementById("periodEnd").Value = Format(StartDate, "dd mmm yy")
    Set LinkCollection = IE.Document.GetElementsByTagName("A")
    For Each link In LinkCollection
        If link.innertext = "Add" Then
            link.Click
            Exit For
        End If
    Next
    Do While IE.ReadyState <> 4 Or IE.Busy = True
        DoEvents
    Loop

    Set objRows = IE.Document.GetElementsByTagName("tr")
    If RstAvailability!RoomType = "DTW" Then
        n = 0
        While n < objRows.Length
            If Trim(objRows(n).Cells(0).innertext) = "Single Room" Then
                For i = 1 To 7
                    'objRows(n).FireEvent ("onchange")
                    'objRows(n).Cells(i).GetElementsByTagName("input")(0).Focus
                    'SendKeys Format(RstAvailability!roomcount - RstAvailability!RoomsSold, "0") & "{TAB}"
                    objRows(n).Cells(i).GetElementsByTagName("input")(0).Value = Format(RstAvailability!roomcount - RstAvailability!RoomsSold, "0")
                    objRows(n).Cells(i).GetElementsByTagName("input")(0).fireevent ("onchange")
                    Do While IE.ReadyState <> 4 Or IE.Busy = True
                        DoEvents
                    Loop
                 Next i
            End If
            n = n + 1
        Wend
    End If

    Set objButtons = IE.Document.getelementsbyname("savePlanning")
    objButtons(0).Click

    Do While IE.ReadyState <> 4 Or IE.Busy = True
        DoEvents
    Loop

    newtime = Now + TimeValue("0:00:10")
    Do While True
        If Now > newtime Then Exit Do
    Loop

    RstAvailability.MoveNext
Loop 
```

输入字段的html是：

```
<tr class="first" roomId="30494" articleId="0" type="Availability" readonly="False"> 
```

```
<div>

  <span class="roomName">

    Single Room

  </span>

</div> 
```

```
<span class="data"> 
```

```
<input id="Availabilities" name="Availabilities" type="text" value="" /> 
```

```
</span> 
```

```
<span class="data"> 
```

```
<input id="Availabilities" name="Availabilities" type="text" value="" /> 
```

```
</span> 
```

谢谢！

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-04-21T11:11:37.553

经过几天的努力，答案实际上非常简单，但几乎不可能在 MSDN 上的任何文档或网络上的任何其他地方找到。

在更改输入字段的值之前，您需要将焦点设置在该字段上。更改值后，您需要将焦点设置到另一个字段。显然，这些事件是在失去焦点时触发的。因此，代码应如下所示：

```
 n = 0
    While n < objRows.Length
        If Trim(objRows(n).Cells(0).innertext) = "Family Room" Then
            For i = 1 To 7
                objRows(n).Cells(i).GetElementsByTagName("input")(0).Focus
                objRows(n).Cells(i).GetElementsByTagName("input")(0).Value = Format(RstAvailability!roomcount - RstAvailability!RoomsSold, "0")
            Next i
            objRows(n).Cells(1).GetElementsByTagName("input")(0).Focus

        End If
        n = n + 1
    Wend 
```

我发现这一点的方法是查看一些有关 IE9 可访问性的 MSDN 文档。它建议为残疾用户设置焦点。我只是想我会试一试，它奏效了。我希望这对其他人有帮助。

戴夫

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-10-03T23:39:16.437

如果您希望（在 IE9 中）将以下行放在“Next i”行之前。即使你没有失去焦点，它也应该工作？

> objRows(n).Cells(i).GetElementsByTagName("input")(0).Click

# sql-server-2005 - 如何在 SQL Server 2005 中对复杂 XML 使用 openXML()

> ID：10191507
> 
> 赞同：1
> 
> 时间：2012-04-17T12:44:29.167
> 
> 标签：sql-server-2005, openxml

我有以下复杂的 XML

```
<Collection>
 <VOUCHER>
      <DATE TYPE="Date">20110401</DATE>
      <NARRATION TYPE="String">MUNNA CONVENT ROAD</NARRATION>
      <VOUCHERTYPENAME>RETAIL</VOUCHERTYPENAME>
      <VOUCHERNUMBER>R-2-I2-9-6-27751</VOUCHERNUMBER>
      <ALLLEDGERENTRIES.LIST>            
           <LEDGERNAME>U.S.T. CANTEEN</LEDGERNAME>
           <AMOUNT>-2678.9985</AMOUNT>
      </ALLLEDGERENTRIES.LIST>
      <ALLLEDGERENTRIES.LIST>            
           <LEDGERNAME>U.S.T. CANTEEN</LEDGERNAME>
           <AMOUNT>-2678.9985</AMOUNT>
      </ALLLEDGERENTRIES.LIST>
 </VOUCHER>
 <VOUCHER>
      <DATE TYPE="Date">20110401</DATE>
      <NARRATION TYPE="String">MUNNA CONVENT ROAD</NARRATION>
      <VOUCHERTYPENAME>RETAIL</VOUCHERTYPENAME>
      <VOUCHERNUMBER>R-2-I2-9-6-27751</VOUCHERNUMBER>
      <ALLLEDGERENTRIES.LIST>            
           <LEDGERNAME>U.S.T. CANTEEN</LEDGERNAME>
           <AMOUNT>-2678.9985</AMOUNT>
      </ALLLEDGERENTRIES.LIST>
      <ALLLEDGERENTRIES.LIST>            
           <LEDGERNAME>U.S.T. CANTEEN</LEDGERNAME>
           <AMOUNT>-2678.9985</AMOUNT>
      </ALLLEDGERENTRIES.LIST>
 </VOUCHER>
</Collection> 
```

我将凭证详细信息保存在一张表中，将`ALLLEDGERENTRIES.LIST`详细信息保存在另一张表中。

两个表都有关系`VoucherID`。对于特定`VoucherID`的，相关的 x3 值应该被存储。在我使用的存储过程中`openxml()`。

我的SP片段：

```
INSERT INTO SalesVoucher(AbsID,VoucherNumber,VoucherTypeName,Narration,VoucherDate)
    SELECT @AID,VOUCHERNUMBER,VOUCHERTYPENAME,NARRATION,CAST(DATE AS DATETIME)
        FROM OPENXML(@XMLHandle,'ENVELOPE/BODY/DATA/COLLECTION/VOUCHER',3) 
        WITH (    
            VOUCHERNUMBER nVarchar(200),VOUCHERTYPENAME varchar(100),NARRATION varchar(500),DATE DATETIME
            )
    SELECT @VID=@@IDENTITY

INSERT INTO SalesLedger(VoucherID,LedgerName,Amount)
    SELECT @VID,LEDGERNAME,AMOUNT
        FROM OPENXML(@XMLHandle,'ENVELOPE/BODY/DATA/COLLECTION/VOUCHER/ALLLEDGERENTRIES.LIST',3)
        WITH(
            LEDGERNAME varchar(200),AMOUNT decimal(18,0)
            ) 
```

所有值都存储在数据库中，但表中的列`VoucherID`对于`SalesLedger`所有行都是相同的（它不应该......），因为我使用`@@IDENTITY`它只返回最后一个标识值。

请有人帮助我如何在 sql`voucherID`中`SalesLedger`使用表存储相关...`openxml()`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T13:44:30.327

我可能会使用 SQL Server 的本机 XQuery 功能来执行此操作。首先，抓住`SalesVoucher`桌子所需的物品并插入它们。

当您插入详细信息时，您的“父”信息已经存储在`SalesVoucher`表中 - 所以从那里获取必要的信息。

您的代码将是这样的（假设您的 XML 数据位于名为`@input`type的 SQL 变量中`XML`）：

```
-- Insert the "parent" info into SalesVoucher
INSERT INTO dbo.SalesVoucher(VoucherNumber, VoucherTypeName, Narration, VoucherDate)
    SELECT
        v.value('(VOUCHERNUMBER)[1]', 'NVARCHAR(200)'),
        v.value('(VOUCHERTYPENAME)[1]', 'VARCHAR(100)'),
        v.value('(NARRATION)[1]', 'VARCHAR(500)'),
        v.value('(DATE)[1]', 'DATETIME')
    FROM 
        @input.nodes('/Collection/VOUCHER') AS Coll(V) 
```

`SalesVoucher`这会在您的表中插入基本信息。

当您想要解析详细信息时，您需要返回对`VoucherNumber`父级的引用 - 使用该信息，您可以检索`AbsID`from`SalesVoucher`并将适当的值插入`SalesLedger`：

```
INSERT INTO @SalesLedger (VoucherID, LedgerName, Amount)
   SELECT
       sv.AbsID,
       AL.LS.value('(LEDGERNAME)[1]', 'VARCHAR(200)'),
       AL.LS.value('(AMOUNT)[1]', 'DECIMAL(18,4)')
   FROM 
       @input.nodes('/Collection/VOUCHER') AS Coll(V)
   INNER JOIN
       dbo.SalesVoucher sv 
           ON sv.VoucherNumber = v.value('(VOUCHERNUMBER)[1]', 'NVARCHAR(200)')
   CROSS APPLY
       Coll.V.nodes('.//ALLLEDGERENTRIES.LIST') AS AL(LS) 
```

`CROSS APPLY`获取该特定节点的详细信息，从而将详细信息“连接”到上述 XML 中的“父”信息`VoucherNumber`。

正如 PS：数据类型`DECIMAL(18,0)`不适合**像**`-2678.9985`. `DECIMAL(18,0)`将存储最多 18 位数字，但其中小数点后为**0**`-2679` - 因此该值将存储为. 我已将其更改为更有用的数据类型`DECIMAL(18,4)`- 最多 18 位，其中 4 位在小数点之后。

# php - DOMDocument::createElement 本身和与 appendChild 配对的区别

> ID：10191508
> 
> 赞同：1
> 
> 时间：2012-04-17T12:44:51.543
> 
> 标签：php, domdocument

和有什么区别

```
 $table = $doc->createElement('table');
    $doc->appendChild($table);

    $tr = $doc->createElement('tr');
    $table->appendChild( $tr );

    $td = $doc->createElement('td');
    $tr->appendChild($td); 
```

和

```
 $table = $doc->createElement('table');

    $tr = $doc->createElement('tr');
    $table->appendChild( $tr );

    $td = $doc->createElement('td', 'Competition');
    $tr->appendChild($td); 
```

真的有必要拥有第一个附加孩子吗？没有它似乎可以工作，但是当我删除它时，我看不到任何明显的变化。我只是想确认在那种情况下是一样的。

其他单标签呢？

```
$p1 = $doc->createElement('p', 'test text1');
$p2 = $doc->createElement('p', 'test text1'); 
```

是否有必要为每个`$p1`and创建一个附加子项`$p2`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T12:49:31.280

从[文档](http://php.net/manual/en/domdocument.createelement.php)中：

> **`DOMDocument::createElement`**
> 
> 这个函数创建一个新的 class 实例`DOMElement`。除非使用 (eg) 插入此节点，否则该节点**不会**出现在文档中`DOMNode::appendChild()`。

因此，您必须调用[`DOMNode::appendChild()`](http://php.net/manual/en/domnode.appendchild.php)将节点插入到文档中。运行您的第二个代码块不会这样做（*测试在：PHP 5.3.5，libxml 2.7.7 下*）。

# android - Android - 将多种字体样式组合成一种字体（字体）

> ID：10191510
> 
> 赞同：5
> 
> 时间：2012-04-17T12:45:02.213
> 
> 标签：android, android-layout, fonts

我有几种不同风格的字体，比如说：“MyFont_default.otf”、“MyFont_italic.otf”、“MyFont_bold.otf”

通常，我会像这样设置 TextView 的字体：

```
Typeface tf=Typeface.createFromAsset(context.getAssets(), "MyFont_italic.otf");
textView.setTypeface(tf); 
```

我的问题是：是否可以将所有这些字体组合成一种字体，比如“MyFont”，并根据 XML 布局文件中定义的 TextView 样式（斜体、粗体），以适当的方式显示 TextView字体？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-02-12T17:39:08.700

我没有适当的声誉来发表评论，但我可以确认，这种方法是有效的。使用 FontForge（可用于 Windows 的二进制文件）：

1.  使用 FontForge（Regular、Bold、Italic）打开多个 .otf 文件。
2.  确保选择显示字体“常规”版本的窗口
3.  使用该窗口中的 File > Save ttc
4.  看到确实在保存对话框中列出了其他子字体（粗体，斜体）
5.  在 Android 中保存并使用这个 ttc 文件

我使用 TextView 中显示的 html 文本对其进行了测试： `<b>Test</b> Test <i>Test</i>`->“ **Test** Test *Test* ”，这在以前的 Android 2.3.7 中不起作用，并且使用此 ttc 字体，所有三个版本的文本都完美显示。

正如我所说，在导出时选择常规字体很重要，因为这是 Android 用作“默认”的字体（我首先从 Bold 版本进行了导出，并且全部为 Bold）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-17T13:52:56.237

使用某种字体编辑器将字体组合成一个文件。许多字体在一个文件中带有多种样式，这就是您在这种情况下所需要的。

# xml - 查找和替换 XML 标记之间的字符

> ID：10191511
> 
> 赞同：1
> 
> 时间：2012-04-17T12:45:21.697
> 
> 标签：xml, perl

我有一个不受行约束的 XML 文件。它有标签`<tag1>`，`</tag1>`并且有一些从生成它的代码中删除的变量（我现在无法更正）。我希望能够更改这些标签中的字符以更正它们。人物有时很特别。

我有这个 Perl one-liner 来显示标签之间的内容，但现在我希望能够在文件中替换它找到的内容。

```
perl -0777 -ne 'while (/(?<=perform_cnt).*?(?=\<\/perform_cnt)/s) {print $& . "\n";      s/perform_cnt.*?\<\/perform_cnt//s}' output_error.txt 
```

这是 XML 的一个示例。注意标签之间的垃圾字符`perform_cnt`。

```
<text1>120105728</text1><perform_cnt>ÈPm=</perform_cnt>
<text1>120106394</text1><perform_cnt>†AQ;4K\_Ô23{YYÔ@Nx</perform_cnt> 
```

我需要用 0 替换这些。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-17T14:43:28.093

我喜欢[XML::Twig](https://www.metacpan.org/module/XML::Twig)来处理这些事情。这需要一点时间来适应，但是一旦你了解了设计（以及一点关于 DOM 处理的知识），很多事情就会变得非常容易：

```
use XML::Twig;

my $xml = <<'HERE';
<root>
<text1>120105728</text1><perform_cnt>ÈPm=</perform_cnt>
<text1>120106394</text1><perform_cnt>†AQ;4K\_Ô23{YYÔ@Nx</perform_cnt>
</root>
HERE

my $twig = XML::Twig->new(   
    twig_handlers => { 
        perform_cnt   => sub { 
            say "Text is " => $_->text;  # get the current text

            $_->set_text( 'Buster' );    # set the new text
            },
      },
    pretty_print => 'indented',
    );

$twig->parse( $xml );
$twig->flush; 
```

通过缩进漂亮的打印，我得到：

```
<root>
  <text1>120105728</text1>
  <perform_cnt>Buster</perform_cnt>
  <text1>120106394</text1>
  <perform_cnt>Buster</perform_cnt>
</root> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T14:01:27.317

## 使用正则表达式进行 xml 解析是一种不好的做法

无论如何 -**代码**是：

```
#!/usr/bin/perl

use strict;
use warnings;

my $tag = 'perform_cnt';

open my $fh, '<file.txt' or die $!;
foreach (<$fh>) {
  s/(<$tag>)(.*?)(<\/$tag>)/$1$3/g;
  print "$_";
}
close $fh; 
```

**输出**是：

```
<text1>120105728</text1><perform_cnt></perform_cnt>
<text1>120106394</text1><perform_cnt></perform_cnt> 
```

# maven - hbase 和 osgi - 找不到 hbase-default.xml

> ID：10191512
> 
> 赞同：3
> 
> 时间：2012-04-17T12:45:22.097
> 
> 标签：maven, hadoop, osgi, hbase

因为 hbase 不能作为 osgi-ified 包提供，但我设法使用 maven felix 插件（hbase 0.92 和相应的 hadoop-core 1.0.0）创建了包，并且两个包都在 OSGi 中启动:)

hbase-default.xml 也被添加到生成的包中。在生成的 osgi-jar 中，当我打开它时，结构如下所示：

*   组织/
*   元信息
*   hbase-default.xml

这是通过`<Include-Resource>@${pkgArtifactId}-${pkgVersion}.jar!/hbase-default.xml</Include-Resource>`

当我真正想连接到 hbase 时，问题就出现了。找不到 hbase-default.xml，因此我无法创建任何配置文件。

hbase osgi 包在另一个 osgi-bundle 中使用，该包应该用于获取 hbase 连接和查询数据库。此 osgi-bundle 由 RCP 应用程序使用。

我的问题是，我必须将 hbase-default.xml 放在哪里，以便在启动包时找到它？或者为什么它没有意识到文件存在？

谢谢你的任何提示。

- 编辑

我找到了一个反编译器，因此我可以查看执行配置加载的源（hadoop-core，它不通过 maven 提供任何源），现在我看到使用了 Threads contextClassLoader（如果不可用，则配置类本身），所以在我看来它找不到资源，但是，根据描述，它应该也检查父母（但OSGi环境中的父母是谁？）？

我测试了从应该使用 hbase 的 OSGi 捆绑包中获取资源，我将 hbase-default.xml 添加到创建的 jar 文件中（见上文），当我获得线程的 contextClassLoader 时，我得到了一个资源。当我进一步研究代码时，我意识到没有办法为 HBaseConfiguration 设置类加载器（虽然可以为“简单”hadoop-Configuration 设置类加载器，HBaseConfiguration 继承自，但创建过程HBaseConfiguration 不允许这样做，因为它只是在 create() 方法中创建一个新对象。

我真的希望你知道如何启动和运行它:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T19:00:50.617

```
Thread.currentThread().setContextClassLoader(HBaseConfiguration.class.getClassLoader()); 
```

确保`HBaseConfiguration`在 OSGI bundle.hbase 中加载的类将使用线程上下文类加载器，以加载资源（hbase-default.xml 和 hbase-site.xml）。设置 TCCL 将允许您加载默认值并在以后覆盖它们。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-19T07:55:55.923

如果 hbase-default.xml 在 CLASSPATH 中的 .jar 文件中，则该文件通常可以被 java 程序找到。

我已经阅读了 hbase 邮件列表。

检查您的**pom.xml**：在“进程资源”阶段，hbase-default.xml 的“ **@@@VERSION@@@** ”将被实际版本字符串替换。但是，如果此阶段配置设置为“**目标**”而不是“**任务**”，则不会发生替换。你可以看看你的 pom.xml，如果是这样，请将标签更正。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-27T08:47:02.553

面对这个问题，实际上是通过将 hbase-site.xml 放入我从中调用 hbase 的包中来修复它，在[这里](http://camel.apache.org/hdfs.html)找到了建议：

> 在 OSGi 中使用此组件：此组件在 OSGi 环境中具有完整功能，但是，它需要用户执行一些操作。Hadoop 使用线程上下文类加载器来加载资源。通常，线程上下文类加载器将是包含路由的包的包类加载器。因此，默认配置文件需要从包类加载器中可见。处理它的典型方法是在你的包根目录中保留一份 core-default.xml 的副本。该文件可以在 hadoop-common.jar 中找到。

# iphone - 从 iphone 应用程序到 face.com api：上传原始图像

> ID：10191514
> 
> 赞同：1
> 
> 时间：2012-04-17T12:45:30.913
> 
> 标签：iphone, objective-c

我只是测试了 face.com 人脸识别 api，我在 json 请求上取得了成功：

```
NSString *url = @"http://api.face.com/faces/detect.json?api_key=myapi&api_secret=mysecret&urls=http://userserve-ak.last.fm/serve/_/47363849/Christina+Aguilera+HQ+PNG.png";

// Create new SBJSON parser object
SBJsonParser *parser = [[SBJsonParser alloc] init];

NSURLRequest *request = [NSURLRequest requestWithURL:[NSURL URLWithString:url]];

// Perform request and get JSON back as a NSData object
NSData *response = [NSURLConnection sendSynchronousRequest:request returningResponse:nil error:nil];

// Get JSON as a NSString from NSData response
NSString *json_string = [[NSString alloc] initWithData:response encoding:NSUTF8StringEncoding];

// parse the JSON response into an object
// Here we're using NSArray since we're parsing an array of JSON status objects
NSDictionary *obj = [parser objectWithString:json_string];

//
NSString *status = [obj objectForKey:@"status"];

//
NSLog(@"status: %@", status); 
```

当我将 api 密钥、秘密和 WEB 上的图像作为 GET 参数传递时，此方法有效，例如：

```
http://api.face.com/faces/detect.json?api_key=4b4b4c6d54c37&api_secret= &urls= http://farm3.static.flickr.com/2566/3896283279_0209be7a67.jpg 
```

现在，我想从我的应用程序上传原始图像数据......但这在网站上没有很好的记录：

[http://developers.face.com/docs/api/faces-detect/](http://developers.face.com/docs/api/faces-detect/)

那里说：

代码：可选[无名称]照片的原始图像数据（当而不是url，上传图像时）

这就是问题：

如何将原始数据与 apikey 和 secret 一起作为 POST 传递？我知道它必须是 POST，但是如何？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T12:50:45.350

原始数据 = NSData，所以您需要做的就是将 imageData 附加到 URL，如下所示。

```
NSString *url = [NSString stringWithFormat:@"http://api.face.com/faces/detect.json?api_key=myapi&api_secret=mysecret&code=%@", imageData]; 
```

# javascript - ClientSideEvents 中的 ASP.NET 密码和确认

> ID：10191517
> 
> 赞同：0
> 
> 时间：2012-04-17T12:45:45.380
> 
> 标签：javascript, asp.net, devexpress

我有 2 个 ASPxTextBox、ASPxValidationSummary 和 ASPxButton
在 JS 文件中有 OnPasswordValidation 函数
但是当我输入密码然后单击 Tab 按钮时，
txt_password 控件上的 SetIsValid(false) 不起作用但它适用于 txt_ConfirmPassword

为什么 ？

```
<dx:ASPxTextBox ID="txt_password" runat="server" Password="true" AssociatedControlID="txt_password">
    <ClientSideEvents Validation="OnPasswordValidation" />
</dx:ASPxTextBox>

<dx:ASPxTextBox ID="txt_ConfirmPassword" runat="server" Password="true" AssociatedControlID="txt_ConfirmPassword">
    <ClientSideEvents Validation="OnPasswordValidation" />
</dx:ASPxTextBox>

<dx:ASPxButton ID="btnSubmit" runat="server" Text="Submit" ClientInstanceName="btnSubmit" onclick="btnSubmit_Click" AutoPostBack="False">
<ClientSideEvents Click="function(s, e) {onClickBtnSubmit();}"/>
</dx:ASPxButton>

function OnPasswordValidation(s, e) {
    var objpassword = GetObj('txt_password');
    var objConfirmPassword = GetObj('txt_ConfirmPassword');
    var password = aspxGetControlCollection().Get(objpassword.id);
    var ConfirmPassword = aspxGetControlCollection().Get(objConfirmPassword.id);

    if (password.GetValue() == null) {
        password.SetIsValid(false);
        ConfirmPassword.SetIsValid(false);
        return;
    }
    if (ConfirmPassword.GetValue() == null) {
        password.SetIsValid(false);
        ConfirmPassword.SetIsValid(false);
        return;
    }
    if (password.GetValue().length > 5 || ConfirmPassword.GetValue().length > 5) {
        if (password.GetValue() == ConfirmPassword.GetValue()) {
            password.SetIsValid(true);
            ConfirmPassword.SetIsValid(true);
        }
        else {
            password.SetIsValid(false);
            ConfirmPassword.SetIsValid(false);
            password.SetErrorText = "Password must equal with Confirm Password";
            ConfirmPassword.SetErrorText = "Password must equal with Confirm Password";
        }
    }
    else {
        ConfirmPassword.SetIsValid(false);
        password.SetIsValid(false);
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T14:40:55.470

这不是实施验证的正确方法。这种方式`OnPasswordValidation`函数执行两次，每个文本框执行一次。
这是一张带有示例项目的票，应该可以满足您的需求： http: [//www.devexpress.com/Support/Center/p/Q233058.aspx](http://www.devexpress.com/Support/Center/p/Q233058.aspx)

我建议您阅读 DevExpress 控件[验证概述](http://documentation.devexpress.com/#AspNet/CustomDocument11111)，以了解如何在 devex 控件上实现验证。

# javascript - CKEditor、IE9 和 JavaScript

> ID：10191519
> 
> 赞同：1
> 
> 时间：2012-04-17T12:45:53.050
> 
> 标签：javascript, internet-explorer-9, ckeditor

我在我的网站上使用最新版本的 CKEditor（CKEditor 3.6.3，于 2012 年 4 月 17 日发布）。

它无需任何修改即可在 Firefox、Chrome 和 IE9 中完美运行。

当我自定义工具栏时，它在 Firefox 和 Chrome 中完美运行，但随后我在 IE9 中收到以下错误消息（我翻译了它）：

```
"SCRIPT5007: Cannot retrieve the value of property length, the object is null or undefined. 
ckeditor.js, line 11101 token 21" 
```

这就是以下行：

```
var w=o.toolbox.toolbars,x=o.config.toolbar instanceof Array ? o.config.toolbar : o.config['toolbar_'+o.config.toolbar];
    for(var y=0;y<x.length;y++){ 
```

所以不知何故该变量在 IE9`x`中不是一个`Array`：我尝试过 IE7、8 和 9 的各种模式都有相同的错误。

而且似乎IE9也是唯一不执行以下行的浏览器：

```
CKEDITOR.editorConfig = function( config ) {} 
```

这是一个熟悉的问题（如果是，我该如何解决）还是 CKEditor 中的错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T17:01:51.247

如果您的配置有语法错误，例如尾随逗号。

# php - 如何使用 AJAX 返回两个字符串？

> ID：10191520
> 
> 赞同：2
> 
> 时间：2012-04-17T12:45:54.917
> 
> 标签：php, ajax

如何使用 AJAX 返回两个参数？

这就是我所拥有的。这是我的 html 页面上的 2 个文本区域。

```
<textarea name="source" id="source" onkeyup="myfunc(this.value);}"></textarea>
<textarea name="res1" id="res1"></textarea>
<textarea name="res2" id="res2"></textarea> 
```

Onkeyup 事件从**.js 文件中调用****myfunc()**函数。

 ****myfunc()**包含这样的字符串：

```
...
xmlhttp.onreadystatechange=function()
{
    if (xmlhttp.readyState==4 && xmlhttp.status==200)
    {
        document.getElementById("res1").innerHTML=xmlhttp.responseText;
    }
}
xmlhttp.open("POST","ajax_file.php",true);
xmlhttp.setRequestHeader("Content-type","application/x-www-form-urlencoded;charset= UTF-8");
xmlhttp.send("q="+encodeURIComponent(str)); 
```

结果，**ajax_file.php**进行一些计算，计算 q 和 p 并返回 q。字符串 q 返回到 textarea **res1**。一切正常，工作正常。但是，我也想将值**p**传递给**res2**（另一个文本区域）。它是计算出来的，但我不知道如何传回多个参数。这样做的方法是什么？谢谢你。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-17T12:48:00.273

最明显的方式（如果你想发送两个参数）是

```
xmlhttp.send("q="+encodeURIComponent(str)+"&p="+encodeURIComponent(str1)); 
```

如果要返回两个参数，请在 php 中使用数组并将其编码为 json

```
$arr = array();

$arr['str1'] = $str1;
$arr['str2'] = $str2;
header('Content-type: application/json');
echo json_encode($arr); 
```

编辑 - 在回显数组之前还设置正确的标题。完成后，在客户端解析 JSON

```
xmlhttp.onreadystatechange=function()
{
    if (xmlhttp.readyState==4 && xmlhttp.status==200)
    {
        var resp = JSON.parse(xmlhttp.responseText);
        document.getElementById("res1").innerHTML=resp.str1;
        document.getElementById("res1").innerHTML=resp.str2;
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-17T12:50:27.853

研究 JSON，JavaScript 可以原生处理。这比任何类型的字符串拆分都要好，因为它确保输出不包含您将用于分解结果的一个或多个字符。

工作流程是这样的：

*   PHP 将结果写入数组，然后使用 json_encode() 对其进行编码并将其作为响应回显
*   Javascript 使用 array=JSON.parse(result) 将其转换为可用的 JavaScript 对象，其中 result 是 PHP 的结果。

PHP 的 $array['me']='you' 在 JavaScript 中将是 array['me'] 。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-17T13:37:15.243

ajax 返回页面的整个输出，所以你不能用它返回两个字符串，但你可以把那个字符串分成两个

例如页面的输出是：HelloWorld

现在你想把 Hello 和 World 分开，所以输出如下：Hello,World OR Hello-World OR Hello|World

并用那个分隔符分割它

$("PAGE",{"var":"value"},function(response){ response.split(delimiter) })

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-17T12:49:37.247

您可以发送一个分隔字符串“Value1,Value2,Value3”，然后使用 javascript 拆分方法，或者使用 JSON：[http ://www.php.net/manual/en/function.json-encode.php](http://www.php.net/manual/en/function.json-encode.php)**

# javascript - 如何从 JavaScript 中的 SPListItemCollection 获取 ID？

> ID：10191523
> 
> 赞同：0
> 
> 时间：2012-04-17T12:46:05.393
> 
> 标签：javascript, sharepoint-2010

我有一个 Sharepoint 2010 列表。每个项目都可以在第二个列表（“扩展”）中有一个“相关项目”。我使用以下代码来确定该相关项目是否存在（使用 list.getItems）。

如果它确实存在，我想读取该项目的 ID（来自“listCollection”）并使用它来打开该项目的显示表单。但是如何从我的 listCollection 中的对象中获取项目的 ID？

```
 var listCollection;
    function getExtended() {
        try {
            var context = new SP.ClientContext.get_current();
            var web = context.get_web();
            var list = web.get_lists().getByTitle('Extended');
            var query = '<View Scope=\'RecursiveAll\'>'+
                            '<Query>'+
                                '<Where>'+
                                '<Contains>'+
                                    '<FieldRef Name=\'MainId\'/>' +
                                    '<Value Type=\'Integer\'>' + GetId() +'</Value>'+
                                '</Contains>'+
                                '</Where>'+
                            '</Query>'+
                                 '</View>';
            var camlQuery = new SP.CamlQuery();
            camlQuery.set_viewXml(query);

            this.listCollection= list.getItems(camlQuery);
            context.load(this.listCollection, 'Include(MainId, Status, ID)');
            context.executeQueryAsync(Function.createDelegate(this, this.listReceived), Function.createDelegate(this, this.failed));
        }
        catch (e) {
            alert(e);
        }
    }

    function listReceived() {

                   var count=this.listCollection.get_count();
            if (count==0){
                $("#extendButton").html("<input type='button' onclick='NewExt()' value='Create new extended'/>");
            } else {
                $("#extendButton").html("<button>Show extended</button>");
            }

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T08:24:17.630

It's interesting to re-read my question and not be entirely clear what I was asking myself. But the code I used in the end was simply:

```
var listItemEnumerator = this.listCollection.getEnumerator();

while (listItemEnumerator.moveNext()) {    
      var oListItem = listItemEnumerator.get_current();
      childId= oListItem.get_item('ID');
} 
```

Which at least worked, even if I'm handling the (one-item) list in an overly-complex way.

# c# - 水晶报表工具栏按钮不起作用

> ID：10191525
> 
> 赞同：0
> 
> 时间：2012-04-17T12:46:11.137
> 
> 标签：c#, asp.net, crystal-reports

> 当我单击报告中的下一页时，我确定还有另一个页面出现此消息并且没有任何页面出现消息

**“正在处理文档，请稍候”**

这发生在所有工具栏按钮上

[图片](http://i42.tinypic.com/3465g76.png)

```
 protected void Page_Load(object sender, EventArgs e)
   {

    Title = "عرض التقارير";
    if (Session["UserCode"] == null) Response.Redirect("~/Login.aspx");

    if (Request.QueryString["id"] != null)
    {
        oReport = new Cls_Report();
        oReportDocument = new ReportDocument();

        if (!Session["Condition"].Equals(null))
        {
            oReport.Condition = Session["Condition"].ToString();
            Session.Remove("Condition");
        }
        switch (Request.QueryString["id"])
        {

            case "1":
                oReportDocument.Load(Server.MapPath("~/reports/ar1.rpt"));
                oReportDocument.SetDataSource(oReport.ReportAllEmployees(false));
                break;

            case "2":
                oReportDocument.Load(Server.MapPath("~/reports/ar2.rpt"));
                oReportDocument.SetDataSource(oReport.ReportAlljpbs());
                break;

            case "1order":
                oReportDocument.Load(Server.MapPath("~/reports/ar1.rpt"));
                oReportDocument.SetDataSource(oReport.ReportAllEmployees(true));
                break;
            case "3":
                oReportDocument.Load(Server.MapPath("~/reports/ar3.rpt"));
                oReportDocument.SetDataSource(oReport.ReportAlljudges());
                break;
            case "4":
                oReportDocument.Load(Server.MapPath("~/reports/ar4.rpt"));
                oReportDocument.SetDataSource(oReport.ReportAlljudgesindestrict());
                break;

            case "5":
                oReportDocument.Load(Server.MapPath("~/reports/ar5.rpt"));
                oReportDocument.SetDataSource(oReport.ReportAlljudgesRank());
                break;

        }
        ReportViewer.ReportSource = oReportDocument;

    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T04:04:57.817

尝试这个：

```
protected void Page_Load(object sender, EventArgs e) 
{ 

If (!IsPostBack)
{ 
    Title = "عرض التقارير"; 
    if (Session["UserCode"] == null) Response.Redirect("~/Login.aspx");  

    if (Request.QueryString["id"] != null) 
    { 
        oReport = new Cls_Report(); 
        oReportDocument = new ReportDocument(); 

        if (!Session["Condition"].Equals(null)) 
        { 
            oReport.Condition = Session["Condition"].ToString(); 
            Session.Remove("Condition"); 
        } 

        switch (Request.QueryString["id"]) 
        { 

            case "1": 
                oReportDocument.Load(Server.MapPath("~/reports/ar1.rpt")); 
                oReportDocument.SetDataSource(oReport.ReportAllEmployees(false)); 
                break; 

            case "2": 
                oReportDocument.Load(Server.MapPath("~/reports/ar2.rpt")); 
                oReportDocument.SetDataSource(oReport.ReportAlljpbs()); 
                break; 

            case "1order": 
                oReportDocument.Load(Server.MapPath("~/reports/ar1.rpt")); 
                oReportDocument.SetDataSource(oReport.ReportAllEmployees(true)); 
                break; 
            case "3": 
                oReportDocument.Load(Server.MapPath("~/reports/ar3.rpt")); 
                oReportDocument.SetDataSource(oReport.ReportAlljudges()); 
                break; 
            case "4": 
                oReportDocument.Load(Server.MapPath("~/reports/ar4.rpt")); 
                oReportDocument.SetDataSource(oReport.ReportAlljudgesindestrict()); 
                break; 
             case "5": 
                oReportDocument.Load(Server.MapPath("~/reports/ar5.rpt")); 
                oReportDocument.SetDataSource(oReport.ReportAlljudgesRank()); 
                break; 

        } 
        ReportViewer.ReportSource = oReportDocument;
        Session["myReport"] = oReportDocument;
    } 
}
else
{
    ReportViewer.ReportSource = (ReportDocument)Session["oReportDocument"];
}

} 
```

# c# - XML 中的字符串

> ID：10191527
> 
> 赞同：0
> 
> 时间：2012-04-17T12:46:31.630
> 
> 标签：c#, windows-phone-7

我想知道为什么当我在 URL 中写这个时：http://ServerNameRedacted/IISHostedCalcService/FilesService.svc/GetFoldersAndFiles?selectedFolder=FOLDER//SUBFOLDER

我无法获取 XML 格式的信息。

但是当我使用它时，我的函数中的参数与 FOLDER//SUBFOLDER 完全相同，它不起作用......

如果我直接将它写在一个字符串中，它将起作用。所以不知道为什么，因为参数一模一样……

我应该使用 string.format 还是什么？

```
 void listBoxFolders_Tap(object sender, GestureEventArgs e)
    {

        Folder directory = new Folder();

        directory = (Folder)listBoxFolders.SelectedItem;

        // Connexion to the webservice to get the subfolders and also the files
        WebClient wc = new WebClient();
        wc.DownloadStringCompleted += new DownloadStringCompletedEventHandler(wc_DownloadSubFoldersAndFiles);
        wc.DownloadStringAsync(new Uri("http://myserver.net/IISHostedCalcService/FilesService.svc/GetFoldersAndFiles?selectedFolder=" + directory.FullPath.Substring(25) + '/'));
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T12:52:53.770

考虑到您在代码中的 URI 末尾添加了一个正斜杠，我认为它们实际上并不相同。

在方法之外创建 URI 字符串`DownloadStringAsync`，并使用 aa`System.Diagnostics.Debug.WriteLine`查看 URI 字符串的实际内容。

# java - 如何让 java 程序等到用 java 进程执行的批处理文件终止

> ID：10191529
> 
> 赞同：2
> 
> 时间：2012-04-17T12:46:49.010
> 
> 标签：java

我正在执行一系列批处理文件，我只需要我的 java 程序等待第一个批处理文件退出然后执行下一个。发生的事情是每件事都在没有退出之前执行的文件的情况下执行。

这是我的代码，我正在循环运行它

```
String cmd = "cmd /c start /min file1.bat"; 

Process pr = Runtime.getRuntime().exec(cmd);

pr.waitFor(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T13:20:47.397

Though I'm using Linux, this should apply to Windows as well. The below sample code executes a shell process multiple times, waiting for each process to complete before continuing:

```
import java.util.Date;
public class Test {
    public static void main(final String[] args) {
        for (int i = 0; i < 5; i++) {
            System.out.println("Executing command " + i + ": " + (new Date()));
            try {
                final Process p = new ProcessBuilder("sh", "-c", "sleep 2;").redirectErrorStream(true).start();
                p.waitFor();
            } catch (final Throwable t) {
                t.printStackTrace();
            }
        }
    }
} 
```

This outputs:

```
Executing command 0: Tue Apr 17 09:19:55 EDT 2012
Executing command 1: Tue Apr 17 09:19:57 EDT 2012
Executing command 2: Tue Apr 17 09:20:00 EDT 2012
Executing command 3: Tue Apr 17 09:20:02 EDT 2012
Executing command 4: Tue Apr 17 09:20:04 EDT 2012 
```

* * *

Printing the result (exit value) of `Runtime.exec(String)` using a value of `sh -c 'sleep 2;'`, I get `2` (failed execution); but the result of `Runtime.exec(String[])` using `new String[] {"sh", "-c", "sleep 2;"}` returns `0` (successful execution). Looking at the [`Runtime.java`](http://hg.openjdk.java.net/jdk7u/jdk7u4-dev-gate/jdk/file/1a495432b42a/src/share/classes/java/lang/Runtime.java) and [`ProcessBuilder.java`](http://hg.openjdk.java.net/jdk7u/jdk7u4-dev-gate/jdk/file/1a495432b42a/src/share/classes/java/lang/ProcessBuilder.java) sources, `Runtime.exec(String)` splits the string out using a [`StringTokenizer`](http://docs.oracle.com/javase/6/docs/api/java/util/StringTokenizer.html), which uses default delimiters of `" \t\n\r\f"`. So executing `Runtime.exec("sh -c 'sleep 2;'")` will break the command string out as the array `["sh", "-c", "'sleep", "2;'"]`, which contains invalid arguments.

To ensure commands are executed properly, it's best to use `Runtime.exec(String[])` instead of `Runtime.exec(String)`.

Your `cmd /c start /min file1.bat` command string is probably not working when split out to `["cmd", "/c", "start", "/min", "file1.bat"]`. The following should work:

```
Runtime.getRuntime().exec(new String[] {"cmd", "/c", "start /min file1.bat"}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-17T13:02:26.773

`start`接受参数`/WAIT`

检查`start /?`更多有用的参数（你可能想要`/B`而不是`/MIN`）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-17T13:09:28.053

对此没有简单准确的方法。Java 无法控制外部程序（并且您启动了这样的外部程序）。您可以循环尝试从任务管理器中获取任务，如果它失败捕获异常并且您知道它何时终止。

或者你计算你的 batfiles 需要的时间，然后构建一个`Thread.sleep();`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-02-08T04:40:12.597

The comment mark as an answer is not correct because it is related with Linux not Windows

```
import java.util.Date;
public class Test {
    public static void main(final String[] args) {
        for (int i = 0; i < 5; i++) {
            System.out.println("Executing command " + i + ": " + (new Date()));
            try {
                final Process p = new ProcessBuilder("sh", "-c", "sleep 2;").redirectErrorStream(true).start();
                p.waitFor();
            } catch (final Throwable t) {
                t.printStackTrace();
            }
        }
    }
} 
```

# ruby - ActiveRecord 连接警告。（数据库连接不会自动关闭）

> ID：10191531
> 
> 赞同：10
> 
> 时间：2012-04-17T12:46:53.373
> 
> 标签：ruby, activerecord, sinatra

我正在尝试使用 Sinatra 和 ActiveRecord (3.2.3) 创建一个小应用程序。

这是我的主文件的样子：

```
require "sinatra"
require "sinatra/reloader"
require "active_record"
...

ActiveRecord::Base.establish_connection(
  adapter:  'sqlite3',
  database: 'db.sqlite3',
  host:     'localhost',
)

class Post < ActiveRecord::Base
  ...
end

get('/') { ... }
get('/posts') { ... }
... 
```

它可以工作，但有时我会在控制台中收到警告：

> 弃用警告：数据库连接不会自动关闭，请在线程结束时通过调用连接来关闭数据库`close`连接。例如：ActiveRecord::Base.connection.close'

出现警告时，页面刷新需要很长时间。我不明白我应该在哪里关闭连接。我试图放在 `ActiveRecord::Base.connection.close`文件的底部，但它没有帮助。

*更新：*

我忘了提到我还使用来自[sinatra-contrib](https://github.com/xnvrmind/sinatra-contrib) gem 的 sinatra/reloader 插件来查看效果而无需重新启动服务器。

```
require "sinatra/reloader" 
```

如果我将其注释掉，那么问题就会消失。但无论如何，我想知道如何在不禁用重新加载器的情况下解决这个问题。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-04-18T15:03:23.427

您需要在堆栈中添加一个中间件。只需将此行添加到您的 config.ru 机架文件中：

```
use ActiveRecord::ConnectionAdapters::ConnectionManagement 
```

在这里找到答案：[https ://github.com/puma/puma/issues/59](https://github.com/puma/puma/issues/59)

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-12-18T06:43:19.033

在 Sinatra on Thin（线程模式）中，接受的答案对我不起作用。相反，我使用了：

```
after do
  ActiveRecord::Base.connection.close
end 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-05-08T19:46:00.417

```
ActiveRecord::Base.remove_connection 
```

对我来说很好，并列在文档中。

# java - Hibernate：映射文件或注释？

> ID：10191534
> 
> 赞同：8
> 
> 时间：2012-04-17T12:47:12.287
> 
> 标签：java, hibernate

当我几天前开始使用 Hibernate 时，我只是想知道：假设您是从头开始一个项目。您会使用基于注释的映射还是 Hibernate 映射文件来生成数据库模式。

据我了解，Hibernate 映射文件提供了一些您在注释中找不到的功能（至少，不是完全等效的）。但是，我仍然觉得，现在使用 Hibernate 的项目宁愿使用基于注释的项目，也不愿使用 Hibernate 映射文件。

有没有人选择映射文件而不是注释，如果是这样，出于什么原因？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-04-17T13:09:40.127

**我在使用 @Annotations**时看到了哪些优势：

*   编译器安全
*   基于@Entity，您可以轻松区分实体和非实体
*   使用 packagesToScan Spring 的功能实体很容易扫描
*   将实体从包移动到包或类重命名很容易

**我在使用 XML**时看到了哪些优势：

*   它不会乱扔带有不必要的供应商特定注释的 java 类（想象带有 JPA、JAXB、SOLRJ 注释的 java 模型类）
*   一处配置
*   整体更容易维护

我们使用注释，但保留 XML 作为选项。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-17T13:07:56.877

随时进行**注释**。真正过度使用的 XML 配置并将元数据保存在类中是一个很好的可行选择。

**注释将帮助您更好地映射关系，并且它将使您与 JPA 标准保持一致，因为 hibernate 主要使用 JPA 注释**。使用注释没有真正的问题，也没有太多的权衡。与基于 XML 的配置相比，它具有优越的优势。使用注释时可能缺少一些技巧，但它们会随之而来。

甚至可以在具有基于 XML 的映射的遗留项目中为新类使用注释，如此[处](https://stackoverflow.com/a/8313395/507864)所述。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-10-29T19:52:31.803

xml 中的映射不像注释库那样突出。因此，至少对于映射而言，使用注释更优雅。

# mysql - mysql复杂的sql

> ID：10191535
> 
> 赞同：2
> 
> 时间：2012-04-17T12:47:14.410
> 
> 标签：mysql, select

我今天早些时候问了一个问题，并收到了很好的回复。这个问题的第二部分从未得到回应，所以我再试一次。

```
SELECT q.id,q.question,a.question_id,a.answer, a.correct
FROM (SELECT * FROM questions q WHERE q.subject_id = 18
      ORDER BY RAND() LIMIT 5) q
JOIN answers a on q.id = a.question_id GROUP BY q.id, a.id 
```

以上很好，并返回 5 个随机问题以及相应的答案。问题是每个问题有 9 个答案，其中 1 个是正确的（正确 = 1），其他是错误的（正确 = 0）。我不想要所有答案，而是想要正确的一个和 3 个其他随机答案。

我已经玩了几个小时了，却一无所获。

任何帮助，将不胜感激。

谢谢

史蒂夫

PS：也许最好通过php处理它，但我又不确定。对此的任何想法也会有所帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T13:34:22.853

这是每个 Y 示例中 TOP X 记录的另一个示例。对于每个问题，您都需要 4 个答案。实际上需要两次限制...首先限制合格的问题，然后再对答案进行“排名”，以保证每个问题结果集中始终包含“正确”答案。

所以我的方法是首先对问题应用随机数，将其作为子集结果，然后将其加入答案并限制每个 Y 的 X。然后，我们可以把它全部包起来。这里的关键是内部查询必须按问题 ID 排序......并且“正确”答案的限定词始终位于第一位，但之后的任何内容都是随机的，总共包含 4 条记录。

然后，最终查询应用 WHERE 子句仅包括排名序列 <= 4 的位置（可能包含 1 个问题的所有 9 个答案，但随后应用最终的“ORDER BY”子句将问题保持在一起，但随机化答案，因此“正确”不再总是返回第一个位置。您可以删除这个外部“ORDER BY”子句用于测试目的，只是为了确认功能，然后再将其添加回来。

```
select
      FinalQA.*
   from
      ( select 
              QWithAllAnswers.*,
              @RankSeq := if( @LastQuestion = QWithAllAnswers.id, @RankSeq +1, 1 ) ARankSeq,
              @LastQuestion := QWithAllAnswers.id as ignoreIt
           from
              ( SELECT 
                      q.id,
                      q.question,
                      q.RandQuestionResult,
                      a.question_id,
                      a.answer, 
                      a.correct
                   FROM 
                      ( SELECT q.ID,
                               q.Question,
                               q.question_ID,
                               RAND() as RandQuestionResult
                           FROM 
                               questions q 
                           WHERE 
                               q.subject_id = 18 
                           ORDER BY RAND() 
                           LIMIT 5) JustQ
                      JOIN answers a 
                         on q.id = a.question_id
                   ORDER BY
                      JustQ.RandQuestionResult,
                      if( a.correct = 1,0.000000, RAND() 
              ) QWithAllAnswers,

              ( select @RankSeq := 0, @LastQuestion := 0 ) SQLVars

      ) FinalQA

   where
      FinalQA.ARankSeq < 5
   order by
      FinalQA.RandQuestionResult,
      rand() 
```

几个小的变化......确保每个作业`SQLVars`都有`:=`。当我最初发布时，我留下了一个“：”，这可能会引发错误的错误。我还使用“a.correct = 1”（没有别名引用）限定了内部“排序依据”。最后，将外部 WHERE 子句更改为 just`< 5`而不是`<= 4`. 我已经完成了许多这些最棒的 X per Y 分组，并且知道它们有效，只是缺少一些简单的东西，我敢肯定。

此外，将`IF()`随机数调整为将第一个值设为小数，否则所有随机数都设置为 1（整数）并且从不分数...此外，对于应用 ORDERING 时可能出现的问题，我已经预先查询了所有 Q 和预先排序以在第一个位置获得所有正确答案，然后`SQLVars`针对该集合应用，然后最终确定排名顺序和排序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-17T13:05:40.540

试试这个：

```
SELECT q.id,q.question,a.question_id,a.answer, a.correct
FROM (SELECT * FROM questions q WHERE q.subject_id = 18
      ORDER BY RAND() LIMIT 5) q
JOIN answers a on q.id = a.question_id
ORDER BY q.id, a.correct, RAND() 
```

这应该首先让你得到正确的答案，然后是随机顺序的错误答案。这应该使您可以轻松地在 php 代码中选择 1 + 3。

编辑：我删除了您的组，并将其按顺序排列，因为您想要一行公关答案。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-17T13:24:17.573

为什么不使用 UNION 来获得好的答案和随机的错误答案？

```
SELECT q.id,q.question,a.question_id,a.answer, a.correct
FROM (SELECT * FROM questions q WHERE q.subject_id = 18
      ORDER BY RAND() LIMIT 5) q
  JOIN answers a on q.id = a.question_id 
WHERE a.correct = 0
GROUP BY q.id, a.id

UNION

SELECT q.id,q.question,a.question_id,a.answer, a.correct
FROM question q
  JOIN answers a on q.id = a.question_id 
WHERE q.subject_id = 18 
  AND a.correct = 1 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-17T13:03:13.443

您可以尝试使用子查询，例如：

（伪代码）

```
Select a.*, q.*
from questions q join answers a on q.id=a.question_id
where q.id in ( SELECT id FROM questions q1 WHERE q1.subject_id = 18 ORDER BY RAND() LIMIT 5 )
and a.id in ( SELECT id FROM answers a1 WHERE a1.question_id = q.id ORDER BY a1.correct desc, RAND() LIMIT 4) 
```

（结束伪代码）

阅读所有答案并在代码中选择随机答案可能会更有效（不过，它们可以按`correct`降序排列，这样你就知道，第一个是正确的）。

# performance - 我所有的 WP 网站在谷歌浏览器上的加载速度都非常慢，但只有在登录时

> ID：10191537
> 
> 赞同：-1
> 
> 时间：2012-04-17T12:47:17.217
> 
> 标签：performance, wordpress, google-chrome, login

我注意到，当我的互联网连接速度有点慢时，我所有的 wp 网站在我登录时最多需要五分钟来加载谷歌浏览器。我使用的谷歌浏览器版本是 17.0.963.83。

当我注销时，网站再次加载正常。当我登录时，仪表板也可以正常加载，我知道这不是我的主题的问题，因为当我应用默认的 211 主题时也会发生同样的事情。

我已经设置了一个虚拟订户用户，因此您可以自己进行测试（要查看登录状态之间的区别，您需要一个慢速连接：p）

[h2euro.org/wp-admin](http://h2euro.org/wp-admin) u：testuser p：test

有人知道为什么会这样吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T21:04:31.690

登录时，它会加载“aloha.js”，几乎是一兆字节。使用 Chrome 的开发工具“网络”窗格找到。

# jquery - 检查的太多

> ID：10191541
> 
> 赞同：0
> 
> 时间：2012-04-17T12:47:36.337
> 
> 标签：jquery, checkbox

难以置信 - 我的同事给我发了这个脚本 - 我确信我忽略了一些简单的事情

[http://jsfiddle.net/mplungjan/j4m62/](http://jsfiddle.net/mplungjan/j4m62/)

出于某种原因，我无法弄清楚，无论我点击哪个复选框，都会检查所有三个复选框 - 我希望在点击前两个中的任何一个时只检查前两个，然后自行检查第三个

HTML：

```
<input class="check-all" name="checkbox[]"  id="checkbox1" type="checkbox" value="on"/><label for="checkbox1">Check 1&2</label><br/>

<input class="check-allfeatured" name="checkbox[]"  id="checkbox2"  type="checkbox" value="on"/><label for="checkbox2">Check 1&2</label><br/>

<input class="check-alldel" name="deleteids[]"  id="deleteids1"  type="checkbox" value="on"/><label for="deleteids1">Check this only</label> 
```

JavaScript：

```
$(document).ready(function(){
  $('.check-all:checkbox').click(function(event) {
      var group = 'input:checkbox[name=' + $(this).attr('name') + ']';
      console.log(group+':'+event.target.checked);
      $(group).each(function(){
          $(this).attr("checked",event.target.checked);
      });
  });

  $('.check-alldel:checkbox').click(function(event) {
      var group = 'input:checkbox[name=' + $(this).attr('name') + ']';
      console.log(group+':'+event.target.checked);
      $(group).each(function(){
          $(this).attr("checked",event.target.checked);
      });
   });

  $('.check-allfeatured:checkbox').click(function(event) {
      var group = 'input:checkbox[name=' + $(this).attr('name') + ']';
      console.log(group+':'+event.target.checked);
      $(group).each(function(){
          $(this).attr("checked",event.target.checked);
      });
  });
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T12:52:17.717

下面的代码将检查所有复选框，因为`group`变量包含`input:checkbox[name=checkbox[]]`并且将选择您案例中的所有复选框。

```
$(group).each(function() {
  $(this).attr("checked", event.target.checked);
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-17T12:56:14.997

虽然不漂亮，但更正的版本在这里：http: [//jsfiddle.net/j4m62/8/](http://jsfiddle.net/j4m62/8/)

您的问题是您没有在复选框名称断言的名称周围加上引号。

改变：

```
var group = 'input:checkbox[name=' + $(this).attr('name') + ']'; 
```

进入：

```
var group = 'input:checkbox[name="' + $(this).attr('name') + '"]'; 
```

你会得到你所期望的行为。但是您确实有很多重复的代码，因此您可能应该重构，因为无论单击的复选框如何，您都在执行相同的操作。[看看这个](http://jsfiddle.net/j4m62/11/)。

感谢@limelights 指出我忘记明确传递事件。更新的链接。

# javascript - Javascript：表格数据控件 - 如何在时间间隔上使用 movenext

> ID：10191543
> 
> 赞同：0
> 
> 时间：2012-04-17T12:47:46.913
> 
> 标签：javascript, recursion, delay

我已经`.txt`使用表格数据控件从文件中读取数据，但我想做的是在时间间隔内更改数据（最近的数据将被下一个数据替换）。

我想过使用`.moveNext()`和延迟，但似乎我把延迟实现弄错了。

```
var rs2 = CHAR.recordset;
var delay;
function set()
{
    if(!rs2.EOF && !rs2.BOF)
    {
        var temp = "Characters/"+rs2(1);
        document.getElementById('txt').innerHTML = rs2(0);
        document.getElementById('pic').src = temp;     
    }
}
function begin()
{
    rs2.moveFirst();
    set();  
    delay = setTimeout(move(2), 1000);
}
function move(idx)
{
    switch(idx)
    {
        case 1: if (!rs2.BOF) rs2.movePrevious();
                else rs2.moveLast();
                break;
        case 2: if (!rs2.EOF) rs2.moveNext();
                else rs2.moveFirst();
                break;
    }
    set();

    if(delay)
        clearTimeout(delay);
    delay = setTimeout(move(2), 1000);
} 
```

执行时`delay`（我认为），脚本变得无响应。我认为它发生是因为它进行了太多递归，但我不知道如何解决它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T02:55:46.297

i make my another function just for this and i think it's more convenient. it can help `move()` to focus on its own job(which will be called later) while doing the recursive on the right interval.

here's the function:

```
function automove()
{               
    if (!rs2.BOF) rs2.movePrevious();
    else rs2.moveLast();
    set();

    if(delay)
        clearTimeout(delay);
    delay = setTimeout(automove, 2000);
} 
```

# php - 更新标记时 Googlemaps 停止居中

> ID：10191549
> 
> 赞同：1
> 
> 时间：2012-04-17T12:48:07.153
> 
> 标签：php, javascript, sql, google-maps

我对 javascript 和 googlemaps api 都是全新的，但过去几天在这里得到了一些很大的帮助，并且使我的网站取得了很大进展（谢谢！）。现在，我有一个新问题。我想要做的是将一组标记从数据库加载到地图，然后允许用户将值输入到表单中以过滤标记（例如，放置最小和最大长度字段）。

这是我的代码，我希望它可以理解：

```
<script type="text/javascript" src="http://maps.googleapis.com/maps/api/js?sensor=false"></script>
<script type="text/javascript">
//<![CDATA[

var icons = {
    icon: 'http://labs.google.com/ridefinder/images/mm_20_blue.png',
    shadow: 'http://labs.google.com/ridefinder/images/mm_20_shadow.png'
};

function load() {
  var map = new google.maps.Map(document.getElementById("map"), {
    center: new google.maps.LatLng(51.5100, 0.0000),
    zoom: 10,
    mapTypeId: 'roadmap'
  }); 

  var infoWindow = new google.maps.InfoWindow;

  //min and max ride lengths sent from form
  var minlength = document.getElementById("minlength").value;   
  var maxlength = document.getElementById("maxlength").value;

  // Change this depending on the name of your PHP file
  downloadUrl("phpsqlajax_genxml.php", function(data) {
    var xml = data.responseXML;
    var markers = xml.documentElement.getElementsByTagName("marker");
    for (var i = 0; i < markers.length; i++) {

    var length = markers[i].getAttribute("length");

     if (minlength < length && length < maxlength) { 
      var date = markers[i].getAttribute("date");
      var point = new google.maps.LatLng(
          parseFloat(markers[i].getAttribute("lat")),
          parseFloat(markers[i].getAttribute("lng")));
      var html = "<b>Date: " + date + "</b> <br/>Length: " + length;
      var icon = icons;
      var marker = new google.maps.Marker({
        map: map,
        position: point,
        icon: icon.icon,
        shadow: icon.shadow
      });
      bindInfoWindow(marker, map, infoWindow, html);
     }
    }
  });
}

function bindInfoWindow(marker, map, infoWindow, html) {
  google.maps.event.addListener(marker, 'click', function() {
    infoWindow.setContent(html);
    infoWindow.open(map, marker);
  });
}

function downloadUrl(url, callback) {
  var request = window.ActiveXObject ?
      new ActiveXObject('Microsoft.XMLHTTP') :
      new XMLHttpRequest;

  request.onreadystatechange = function() {
    if (request.readyState == 4) {
      request.onreadystatechange = doNothing;
      callback(request, request.status);
    }
  };

  request.open('GET', url, true);
  request.send(null);
}

function doNothing() {}

//]]>

</script>
</head>

<link rel="stylesheet" type="text/css" href="style.css" />
<body onload="load()">
<div id="container">
<div id="maincontent">
<form name="findride">
Min length: <input type="number" id="minlength">(miles)<br>
Max length: <input type="number" id="maxlength">(miles)<br>
<input type="button" value="Update" onClick="load()"/>
<div id="map"></div>
</div>
</div> 
```

我遇到的问题是，在用户填写字段并更新之前，地图不显示点（我尝试设置一些初始 maxlength 和 minlength 值，但这也不起作用）。用户输入此数据后，将显示点，但地图不断重新居中 - 我希望它保持在同一位置，只是让标记发生变化。

好吧，也许这有点超出我的能力范围，但是如果可以简单地完成，我将非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T12:54:52.037

将您的 HTML 更改为：

```
Min length: <input type="number" id="minlength" value="5">(miles)<br>
Max length: <input type="number" id="maxlength" value="5">(miles)<br> 
```

我已经添加`value="5"`到这两个`input`s 这意味着当脚本在加载时运行它应该添加一些标记 - 您可能需要将数字 5 更改为更合适的值

应该修复启动问题的标记。

And by default the map doesnt centre when adding a marker - [see this simple example](http://jsfiddle.net/dXRdc/) I add a marker at the centre point on load and then add another maker 3 seconds later - the map doesnt centre ....

# javascript - 将值从 Servlet 传递到 JSP 中的 onload JavaScript 函数

> ID：10191551
> 
> 赞同：0
> 
> 时间：2012-04-17T12:48:08.747
> 
> 标签：javascript, jsp, servlets, onload

我在我的*Servlet*中使用以下代码来设置属性*confirmMsg*：

```
req.setAttribute("confirmMsg", "Update Values"); 
```

这个我转发给 JSP

```
RequestDispatcher rd = req.getRequestDispatcher("displayDetails.jsp");
rd.forward(req, resp); 
```

在我的 JSP 中，我需要在页面加载时显示消息。

```
<body onload = "showConfirmMsg();">

// .....

</body> 
```

我应该在以下函数中做什么，以便显示消息 onload 本身？

```
function showConfirmMsg() {

// Code to show the alert box onload

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-17T12:53:24.233

使用 jQuery，您可以执行以下操作：

```
<script>
$(function() {
    var msg = "${confirmMsg}";
    // do something with your message :)
});
</script> 
```

`<body onload="">`不是很干净:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T12:51:37.183

只需让 JSP/EL 相应地打印 JS 代码，以便浏览器检索有效的 HTML/JS 代码。

例如

```
<body onload="showConfirmMsg('${confirmMsg}');"> 
```

和

```
function showConfirmMsg(confirmMsg) {
    // ...
} 
```

如果您不能保证`${confirmMsg}`不包含 JS 特殊字符，例如`'`、换行符等，那么您需要预先通过例如 Apache Commons Lang 对其进行转义`StringEscapeUtils#escapeJavaScript()`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-17T13:42:07.783

无需在加载时调用函数，而是使用 JSP 脚本。

```
<body>
<%=request.getAttribute("confirmMsg")%>
</body> 
```

# facebook - 通过应用程序将 Facebook 时间线设置为只读

> ID：10191557
> 
> 赞同：1
> 
> 时间：2012-04-17T12:48:20.803
> 
> 标签：facebook, facebook-timeline, readonly

是否可以使用 Facebook 应用程序只读设置用户时间线（以便没有人可以在用户的​​时间线上发布内容）？[http://dl.dropbox.com/u/13259653/facebook_api.png](http://dl.dropbox.com/u/13259653/facebook_api.png)

我在权限中找不到任何东西，但也许有人可以帮助[https://developers.facebook.com/docs/authentication/permissions/](https://developers.facebook.com/docs/authentication/permissions/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T17:36:09.820

不，api不允许这样的事情，你不能改变用户的隐私设置。

# python - "@" 装饰器（在 Python 中）

> ID：10191561
> 
> 赞同：-2
> 
> 时间：2012-04-17T12:48:23.253
> 
> 标签：python, methods, python-3.x, decorator, setter

> **可能的重复：**
> [理解 Python 装饰器](https://stackoverflow.com/questions/739654/understanding-python-decorators)

“类装饰器”/“方法装饰器”（`@`）有什么作用？换句话说，这和普通评论有什么区别？

另外，在方法之前`setter`使用时会做什么`@previousMethod.setter`？谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-17T13:37:40.267

```
@decorator
def function(args):
    #body 
```

只是语法糖：

```
def function(args):
    #body

function = decorator(function) 
```

就是这样。

如您所见，装饰器被调用，所以它绝不是评论。

# maven-3 - org.sonatype.aether.transfer.ArtifactNotFoundException：找不到工件 - 使用 mvn 3.0.4 时（适用于 mvn 3.0.3！）

> ID：10191564
> 
> 赞同：1
> 
> 时间：2012-04-17T12:48:30.793
> 
> 标签：maven-3, artifactnotfoundexception

对于一些多模块 maven 项目，我们在使用 maven 3.0.4 时遇到以下异常：

```
[ERROR] Failed to execute goal org.codehaus.mojo:gwt-maven-plugin:1.3.2.google:resources (default) on project genericapi: Execution default of goal org.codehaus.mojo:gwt-maven-plugin:1.3.2.google:resources failed: Plugin org.codehaus.mojo:gwt-maven-plugin:1.3.2.google or one of its dependencies could not be resolved: Could not find artifact dom4j:dom4j:jar:1.6.1 in gwt-plugin-repo (http://google-web-toolkit.googlecode.com/svn/2.1.0.M3/gwt/maven) -> [Help 1]
org.apache.maven.lifecycle.LifecycleExecutionException: Failed to execute goal org.codehaus.mojo:gwt-maven-plugin:1.3.2.google:resources (default) on project genericapi: Execution default of goal org.codehaus.mojo:gwt-maven-plugin:1.3.2.google:resources failed: Plugin org.codehaus.mojo:gwt-maven-plugin:1.3.2.google or one of its dependencies could not be resolved: Could not find artifact dom4j:dom4j:jar:1.6.1 in gwt-plugin-repo (http://google-web-toolkit.googlecode.com/svn/2.1.0.M3/gwt/maven)
at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:225)
at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:153)
at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:145)
at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject(LifecycleModuleBuilder.java:84)
at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject(LifecycleModuleBuilder.java:59)
at org.apache.maven.lifecycle.internal.LifecycleStarter.singleThreadedBuild(LifecycleStarter.java:183)
at org.apache.maven.lifecycle.internal.LifecycleStarter.execute(LifecycleStarter.java:161)
at org.apache.maven.DefaultMaven.doExecute(DefaultMaven.java:320)
at org.apache.maven.DefaultMaven.execute(DefaultMaven.java:156)
at org.apache.maven.cli.MavenCli.execute(MavenCli.java:537)
at org.apache.maven.cli.MavenCli.doMain(MavenCli.java:196)
at org.apache.maven.cli.MavenCli.main(MavenCli.java:141)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
at java.lang.reflect.Method.invoke(Method.java:616)
at org.codehaus.plexus.classworlds.launcher.Launcher.launchEnhanced(Launcher.java:290)
at org.codehaus.plexus.classworlds.launcher.Launcher.launch(Launcher.java:230)
at org.codehaus.plexus.classworlds.launcher.Launcher.mainWithExitCode(Launcher.java:409)
at org.codehaus.plexus.classworlds.launcher.Launcher.main(Launcher.java:352)
Caused by: org.apache.maven.plugin.PluginExecutionException: Execution default of goal org.codehaus.mojo:gwt-maven-plugin:1.3.2.google:resources failed: Plugin org.codehaus.mojo:gwt-maven-plugin:1.3.2.google or one of its dependencies could not be resolved: Could not find artifact dom4j:dom4j:jar:1.6.1 in gwt-plugin-repo (http://google-web-toolkit.googlecode.com/svn/2.1.0.M3/gwt/maven)
at org.apache.maven.plugin.DefaultBuildPluginManager.executeMojo(DefaultBuildPluginManager.java:82)
at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:209)
... 19 more
Caused by: org.apache.maven.plugin.PluginResolutionException: Plugin org.codehaus.mojo:gwt-maven-plugin:1.3.2.google or one of its dependencies could not be resolved: Could not find artifact dom4j:dom4j:jar:1.6.1 in gwt-plugin-repo (http://google-web-toolkit.googlecode.com/svn/2.1.0.M3/gwt/maven)
at org.apache.maven.plugin.internal.DefaultPluginDependenciesResolver.resolve(DefaultPluginDependenciesResolver.java:215)
at org.apache.maven.plugin.internal.DefaultMavenPluginManager.createPluginRealm(DefaultMavenPluginManager.java:353)
at org.apache.maven.plugin.internal.DefaultMavenPluginManager.setupPluginRealm(DefaultMavenPluginManager.java:321)
at org.apache.maven.plugin.DefaultBuildPluginManager.getPluginRealm(DefaultBuildPluginManager.java:175)
at org.apache.maven.plugin.DefaultBuildPluginManager.executeMojo(DefaultBuildPluginManager.java:78)
... 20 more
Caused by: org.sonatype.aether.resolution.ArtifactResolutionException: Could not find artifact dom4j:dom4j:jar:1.6.1 in gwt-plugin-repo (http://google-web-toolkit.googlecode.com/svn/2.1.0.M3/gwt/maven)
at org.sonatype.aether.impl.internal.DefaultArtifactResolver.resolve(DefaultArtifactResolver.java:538)
at org.sonatype.aether.impl.internal.DefaultArtifactResolver.resolveArtifacts(DefaultArtifactResolver.java:216)
at org.sonatype.aether.impl.internal.DefaultRepositorySystem.resolveDependencies(DefaultRepositorySystem.java:358)
at org.apache.maven.plugin.internal.DefaultPluginDependenciesResolver.resolve(DefaultPluginDependenciesResolver.java:207)
... 24 more
Caused by: org.sonatype.aether.transfer.ArtifactNotFoundException: Could not find artifact dom4j:dom4j:jar:1.6.1 in gwt-plugin-repo (http://google-web-toolkit.googlecode.com/svn/2.1.0.M3/gwt/maven)
at org.sonatype.aether.connector.wagon.WagonRepositoryConnector$4.wrap(WagonRepositoryConnector.java:947)
at org.sonatype.aether.connector.wagon.WagonRepositoryConnector$4.wrap(WagonRepositoryConnector.java:941)
at org.sonatype.aether.connector.wagon.WagonRepositoryConnector$GetTask.run(WagonRepositoryConnector.java:669)
at org.sonatype.aether.util.concurrency.RunnableErrorForwarder$1.run(RunnableErrorForwarder.java:60)
at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)
at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
at java.lang.Thread.run(Thread.java:679)
[ERROR] 
[ERROR] 
[ERROR] For more information about the errors and possible solutions, please read the following articles:
[ERROR] [Help 1] http://cwiki.apache.org/confluence/display/MAVEN/PluginResolutionException
[ERROR] 
[ERROR] After correcting the problems, you can resume the build with the command
[ERROR]   mvn <goals> -rf :genericapi 
```

注意：我比较了mvn3.0.3/mvn3.0.4的日志，它们看起来是一样的，唯一不同的是只有3.0.4出现的异常，

更重要的是，我检查了 maven trunk 并将 Aether 从 1.13.1 版本更改为 1.12 版本，一切正常！这意味着它可能是 Aether 1.13 及更高版本中引入的错误。

任何帮助将不胜感激！

# c++ - 在 xcode 中配置 freeimage

> ID：10191565
> 
> 赞同：1
> 
> 时间：2012-04-17T12:48:42.113
> 
> 标签：c++, xcode, macos, freeimage

我在做一个学校项目，需要在 OPENGL 中创建一个 2D 多边形，然后将其用作纹理，所以想使用 freeimage 库。

但问题是我不知道如何配置 freeimage 库并将其添加到我的 Xcode 项目中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T04:50:57.653

转到[http://freeimage.sourceforge.net/download.html](http://freeimage.sourceforge.net/download.html)下载并安装您想要支持的格式（png、jpg 等）的所有库，为所有内容选择一个不错的路径......也许 /usr/本地然后开始安装东西......大多数库使用非常相似的构建/安装例程

```
./configure --prefix=/usr/local
make all
sudo make install 
```

类似的东西应该适用于所有事情，那么您需要将库添加到目标的链接器部分，并将头文件包含在源文件中，一切都应该很好。

# html - 如何在宽度 = 100% 的表格中修复单元格宽度

> ID：10191571
> 
> 赞同：0
> 
> 时间：2012-04-17T12:49:08.183
> 
> 标签：html, width, cell, css-tables

我想知道是否有可能在宽度 = 100% 且每列宽度为 % 值的表格中为最后一列获取固定宽度？

如果是怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T12:51:01.053

你可以使用 CSS 来做到这一点：

```
#mytable td:last-child {
  width: 50px; /* change to whatever you want */
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T12:52:22.117

简短的回答是否定的，不是以简单的方式使用 CSS。出于显而易见的原因，混合固定宽度和相对宽度是相当麻烦的。

然而，有一个新的 CSS3 功能[`calc()`](https://developer.mozilla.org/en/CSS/calc)可用于让浏览器计算适当的宽度。

**注意**不幸的是，它仍然只是实验性的，并且对浏览器的支持有限。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-17T13:05:19.203

如果您的网站仍然需要 JavaScript，您可以在渲染后操纵宽度。

1.  让浏览器以接近理想的相对列宽呈现您的表格，但不要将最后一个设置为固定。

2.  读取渲染表格的宽度。

3.  从表格宽度中减去您希望最后一列具有的宽度。

4.  使用 3\. as 100% 中的值按百分比计算剩余列的宽度

5.  以编程方式设置所有列宽

# c++ - FFMPEG：编码后直接解码数据包

> ID：10191576
> 
> 赞同：4
> 
> 时间：2012-04-17T12:49:22.623
> 
> 标签：c++, video, encoding, ffmpeg, h.264

使用 FFMPEG API，我尝试将 x264 视频编码为具有 0 帧延迟的 MP4 文件，并且还实时在屏幕上显示当前编码的帧（带有编码伪影）。文件的编码工作，但到目前为止，我没有在将它们写入文件后立即解码帧。我尝试将从 avcodec_encode_video() 返回的数据包数据直接输入 avcodec_decode_video2() 但函数返回 -1 并且 cmd 输出显示：

```
[h264 @ 00000000025F0710] non-existing PPS 0 referenced
[h264 @ 00000000025F0710] decode_slice_header error
[h264 @ 00000000025F0710] no frame 
```

这是我用于编码的一些代码：

```
AVPacket FFMpegEncoder2::write_video_frame(AVFrame* pic, int &numBytes)
{
    int out_size, ret;

    AVPacket pkt;

    /* encode the image */
    out_size = avcodec_encode_video(m_cctx, m_outbuf,
                                        m_outbufSize, pic);
    /* If size is zero, it means the image was buffered. */
    assert(out_size>0) //0 frame delay

    av_init_packet(&pkt);

    if (m_cctx->coded_frame->pts != AV_NOPTS_VALUE)
          pkt.pts = av_rescale_q(m_cctx->coded_frame->pts,m_cctx->time_base, m_video_st->time_base);
    if (m_cctx->coded_frame->key_frame)
          pkt.flags |= AV_PKT_FLAG_KEY;
    pkt.stream_index = m_video_st->index;
    pkt.data         = m_outbuf;
    pkt.size         = out_size;

    /* Write the compressed frame to the media file. */
    ret = av_interleaved_write_frame(m_fctx, &pkt);

    if (ret != 0) {
        fprintf(stderr, "Error while writing video frame\n");
        exit(1);
    }
    numBytes = out_size;
    return pkt;
} 
```

然后我把这个返回的数据包输入解码器：

```
const AVFrame* FFMpegDecoder2::decode(AVPacket* packet){
    AVPacket pkt;
    av_init_packet(&pkt);
    pkt.size = packet->size;
    pkt.data = packet->data;

    int len=0;
    int got_picture=0;

    while (pkt.size > 0) {
            len = avcodec_decode_video2(m_cctx, m_frame, &got_picture, &pkt);
            if (len < 0) {
                fprintf(stderr, "Error while decoding frame %d\n", m_f);
                exit(1);
            }
            if (got_picture) {
                assert(pkt.size==len);
                m_f++;
            }
            pkt.size -= len;
            pkt.data += len;
        }
    assert(got_picture);
    return m_frame;
} 
```

但如前所述， avcodec_decode_video2() 返回 -1

我究竟做错了什么？我是否需要先以某种方式将一些标头数据输入解码器？

//编辑：

如果我设置

```
m_formatCtx->oformat->flags &= ~AVFMT_GLOBALHEADER;
m_codecctx->flags &= ~CODEC_FLAG_GLOBAL_HEADER; 
```

然后我可以毫无错误地解码返回的数据包，但是写入的 mp4 文件将是黑色的。

//编辑：这就是我设置解码器的方式：

```
FFMpegDecoder2::FFMpegDecoder2(CodecID id)
    : m_codec(NULL)
    , m_cctx(NULL)
{

    /* Initialize libavcodec, and register all codecs and formats. */
    avcodec_register_all();

    m_codec = avcodec_find_decoder(id);
    if (!m_codec) {
        fprintf(stderr, "codec not found\n");
        exit(1);
    }

    m_cctx = avcodec_alloc_context3(m_codec);
    m_cctx->codec = m_codec;
    m_cctx->pix_fmt = PIX_FMT_YUV420P;

    avcodec_open2(m_cctx, m_codec, NULL);

    //alloc frame
    m_frame = avcodec_alloc_frame();
} 
```

这是第一个数据包的内存窗口显示的内容（没有全部复制。第一个数据包的大小是 7859）：

```
0x0000000002E66670  00 00 01 06 05 ff ff 55 dc 45 e9 bd e6 d9 48 b7 96 2c d8 20 d9 23 ee ef 78 32 36 34 20 2d 20 63 6f 72 65 20 31 32 30 20 72 32 31 34 36 20 62  .....ÿÿUÜEé.æÙH·–,Ø Ù#îïx264 - core 120 r2146 b
0x0000000002E6669F  63 64 34 31 64 62 20 2d 20 48 2e 32 36 34 2f 4d 50 45 47 2d 34 20 41 56 43 20 63 6f 64 65 63 20 2d 20 43 6f 70 79 6c 65 66 74 20 32 30 30 33  cd41db - H.264/MPEG-4 AVC codec - Copyleft 2003
0x0000000002E666CE  2d 32 30 31 31 20 2d 20 68 74 74 70 3a 2f 2f 77 77 77 2e 76 69 64 65 6f 6c 61 6e 2e 6f 72 67 2f 78 32 36 34 2e 68 74 6d 6c 20 2d 20 6f 70 74  -2011 - http://www.videolan.org/x264.html - opt
0x0000000002E666FD  69 6f 6e 73 3a 20 63 61 62 61 63 3d 30 20 72 65 66 3d 33 20 64 65 62 6c 6f 63 6b 3d 31 3a 30 3a 30 20 61 6e 61 6c 79 73 65 3d 30 78 33 3a 30  ions: cabac=0 ref=3 deblock=1:0:0 analyse=0x3:0
0x0000000002E6672C  78 31 31 33 20 6d 65 3d 68 65 78 20 73 75 62 6d 65 3d 34 20 70 73 79 3d 31 20 70 73 79 5f 72 64 3d 31 2e 30 30 3a 30 2e 30 30 20 6d 69 78 65  x113 me=hex subme=4 psy=1 psy_rd=1.00:0.00 mixe
0x0000000002E6675B  64 5f 72 65 66 3d 31 20 6d 65 5f 72 61 6e 67 65 3d 31 36 20 63 68 72 6f 6d 61 5f 6d 65 3d 31 20 74 72 65 6c 6c 69 73 3d 30 20 38 78 38 64 63  d_ref=1 me_range=16 chroma_me=1 trellis=0 8x8dc
0x0000000002E6678A  74 3d 31 20 63 71 6d 3d 30 20 64 65 61 64 7a 6f 6e 65 3d 32 31 2c 31 31 20 66 61 73 74 5f 70 73 6b 69 70 3d 31 20 63 68 72 6f 6d 61 5f 71 70  t=1 cqm=0 deadzone=21,11 fast_pskip=1 chroma_qp
0x0000000002E667B9  5f 6f 66 66 73 65 74 3d 30 20 74 68 72 65 61 64 73 3d 31 20 73 6c 69 63 65 64 5f 74 68 72 65 61 64 73 3d 30 20 6e 72 3d 30 20 64 65 63 69 6d  _offset=0 threads=1 sliced_threads=0 nr=0 decim
0x0000000002E667E8  61 74 65 3d 31 20 69 6e 74 65 72 6c 61 63 65 64 3d 30 20 62 6c 75 72 61 79 5f 63 6f 6d 70 61 74 3d 30 20 63 6f 6e 73 74 72 61 69 6e 65 64 5f  ate=1 interlaced=0 bluray_compat=0 constrained_
0x0000000002E66817  69 6e 74 72 61 3d 30 20 62 66 72 61 6d 65 73 3d 30 20 77 65 69 67 68 74 70 3d 32 20 6b 65 79 69 6e 74 3d 32 35 20 6b 65 79 69 6e 74 5f 6d 69  intra=0 bframes=0 weightp=2 keyint=25 keyint_mi
0x0000000002E66846  6e 3d 32 20 73 63 65 6e 65 63 75 74 3d 34 30 20 69 6e 74 72 61 5f 72 65 66 72 65 73 68 3d 30 20 72 63 3d 61 62 72 20 6d 62 74 72 65 65 3d 30  n=2 scenecut=40 intra_refresh=0 rc=abr mbtree=0
0x0000000002E66875  20 62 69 74 72 61 74 65 3d 34 30 30 20 72 61 74 65 74 6f 6c 3d 31 2e 30 20 71 63 6f 6d 70 3d 30 2e 36 30 20 71 70 6d 69 6e 3d 30 20 71 70 6d   bitrate=400 ratetol=1.0 qcomp=0.60 qpmin=0 qpm
0x0000000002E668A4  61 78 3d 36 39 20 71 70 73 74 65 70 3d 34 20 69 70 5f 72 61 74 69 6f 3d 31 2e 34 30 20 61 71 3d 31 3a 31 2e 30 30 00 80 00 00 00 01 65 88 84  ax=69 qpstep=4 ip_ratio=1.40 aq=1:1.00.€....eˆ.
0x0000000002E668D3  11 ef ff f8 22 0f 8a 00 02 09 7e 38 00 08 45 c7 00 01 1d c9 39 3d 87 ff e0 ac 13 03 6d 05 f1 00 10 00 10 12 88 04 00 04 02 60 70 4e 2d cc 38  .ïÿø".Š...~8..EÇ...É9=.ÿà¬..m.ñ.....ˆ....`pN-Ì8
0x0000000002E66902  27 16 e6 07 21 1a e6 1c 84 6b 9f f0 f0 27 15 f2 7b 87 ff c1 58 2a 8a 00 04 b8 80 00 58 00 04 02 62 01 03 c1 c1 04 63 07 04 11 88 90 b1 89 0b  '.æ.!.æ..kŸðð'.ò{.ÿÁX*Š..¸€.X...b..ÁÁ.c...ˆ.±..
0x0000000002E66931  1f 2c 11 02 b1 40 00 87 8f a4 f7 0f ff 82 b0 55 06 93 41 c4 10 51 00 00 40 14 00 04 00 a3 b7 35 b7 30 38 26 1e e6 1c 13 0f 73 f2 c1 10 2b 14  .,..±@...¤÷.ÿ.°U.“AÄ.Q..@....£·5·08&.æ...sòÁ.+.
0x0000000002E66960  1f 1f 1c 32 7f 94 11 82 a1 40 01 f1 00 00 40 14 01 22 00 01 e0 1e 22 0a e3 83 1c 19 3d f8 7f e0 b0 16 03 01 22 0f 88 00 02 00 00 16 20 01 17  ...2.”..¡@.ñ..@.."..à.".ãƒ..=ø.à°...".ˆ..... ..
0x0000000002E6698F  03 84 c2 5c 87 09 84 b9 06 4a e4 a4 ae 08 82 d8 e0 00 20 0f 1d 93 df c3 fe 0b 01 54 50 07 88 a8 80 00 64 09 88 58 88 58 83 84 1d 88 38 41 d8  ..Â\.....Jä¤®..Øà. ..“ßÃþ..TP.ˆ¨€.d.ˆXˆXƒ..ˆ8AØ
0x0000000002E669BE  f2 c1 10 2b 14 00 08 f8 e0 00 62 38 64 ff 08 70 13 0a c1 d2 e9 b5 5d ba 10 80 09 a2 01 2e 07 04 c2 dc 87 04 c2 dc 81 c8 66 b9 0e 43 35 cb 0f  òÁ.+...øà.b8dÿ.p..ÁÒéµ]º.€.¢....ÂÜ..ÂÜ.Èf..C5Ë.
0x0000000002E669ED  ff c1 10 27 2c 00 7e 8e 00 05 64 e4 f6 1f ff 82 28 a0 00 21 99 e3 80 00 99 ac 70 00 11 39 93 93 d8 7f fe 0a c1 40 34 9a 0b e3 40 00 84 40 01  ÿÁ.',.~Ž..däö.ÿ.( .!™ã€.™¬p..9““Ø.þ.Á@4š.ã@..@.
0x0000000002E66A1C  00 01 02 88 fd cd 7d cc 0e 08 a4 dc c3 82 29 37 3f e0 88 14 8b f1 c3 1c 03 27 f0 c3 60 a0 50 62 86 da 36 1f 10 00 0a 80 00 80 14 40 00 20 00  ...ˆýÍ}Ì..¤ÜÃ.)7?àˆ..ñÃ..'ðÃ` Pb.Ú6....€.€.@. . 
```

这是编码器的输出（直到编码第 0 帧之后）：

```
[libx264 @ 00000000005ADAA0] using cpu capabilities: MMX2 SSE2Fast SSSE3 FastShu
ffle SSE4.2
[libx264 @ 00000000005ADAA0] profile High, level 3.0
[libx264 @ 00000000005ADAA0] 264 - core 120 r2146 bcd41db - H.264/MPEG-4 AVC cod
ec - Copyleft 2003-2011 - http://www.videolan.org/x264.html - options: cabac=0 r
ef=3 deblock=1:0:0 analyse=0x3:0x113 me=hex subme=4 psy=1 psy_rd=1.00:0.00 mixed
_ref=1 me_range=16 chroma_me=1 trellis=0 8x8dct=1 cqm=0 deadzone=21,11 fast_pski
p=1 chroma_qp_offset=0 threads=1 sliced_threads=0 nr=0 decimate=1 interlaced=0 b
luray_compat=0 constrained_intra=0 bframes=0 weightp=2 keyint=25 keyint_min=2 sc
enecut=40 intra_refresh=0 rc=abr mbtree=0 bitrate=100 ratetol=1.0 qcomp=0.60 qpm
in=0 qpmax=69 qpstep=4 ip_ratio=1.40 aq=1:1.00
Output #0, mp4, to 'out2.mp4':
    Stream #0:0: Video: h264, yuv420p, 640x480, q=-1--1, 100 kb/s, 90k tbn, 25 t
bc
[mp4 @ 0000000000467570] Encoder did not produce proper pts, making some up. 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-18T09:21:36.033

这是我的数据包数据：

```
00 00 00 01 67 64 00 1F AC 56 24 02 80 DA 10 00 
00 03 00 10 00 00 03 03 C0 F1 83 18 98 00 00 00 
01 68 E8 8E 0B CB 22 C0 00 00 00 01 65 88 82 00 
```

第一个 h264 数据包的前几个字节应该有点像这样。

```
00 00 00 01 ?7 ... 00 00 00 01 ?8 ... 00 00 00 01 ?5

?7 -> sps
?8 -> pps
?5 -> idr picture 
```

可能还有像 6 之类的其他东西，即 sei 等。但是使用 SPS、PPS 和 idr 图片，解码器应该能够正确初始化自己。

另一种情况可能是数据包包含多张图片（00 00 00 01 ?5 或 00 00 00 01 ?1）。据我所知，解码器无法正确处理包含多张图片的 h264 数据包。

# html - Display:table-* 和主要浏览器问题

> ID：10191579
> 
> 赞同：0
> 
> 时间：2012-04-17T12:49:30.397
> 
> 标签：html, css

我正在开发以下网站： [http ://di20studios.com/2012/royalpack/](http://di20studios.com/2012/royalpack/)

在 Mozilla Firefox 和 IE 8 中一切正常，但 Safari、Opera 和 Google Chrome 不喜欢我的`display:table-*`CSS……

位于`display:table-*`标题和底部。

![在此处输入图像描述](../Images/b42ef9c4af5a1a6ec5e678607f27bfa5.png)

我想要的是？连续背景：

![在此处输入图像描述](../Images/8785623427264655a08be08785bd9c69.png)

您可以进入该网站并查看此问题的实际效果吗？我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-17T13:12:03.793

看看[这个](http://www.hyperborea.org/journal/2010/05/webkit-displaytable-cell-problem/)，相信你会发现你的问题是类似的。

这是一个未经证实的 webkit[错误](https://bugs.webkit.org/show_bug.cgi?id=38527)。我唯一的建议是确保您使用的是 HTML5 文档类型：

```
<!DOCTYPE html> 
```

从[约翰雷西格](http://ejohn.org/blog/html5-doctype/)：

> 这个新的 DOCTYPE 的好处在于，所有当前的浏览器（IE、FF、Opera、Safari）都会查看它并将内容切换到标准模式——即使它们没有实现 HTML5。这意味着您可以从今天开始使用 HTML5 编写您的网页，并让它们持续非常非常长的时间。

另外，我可能建议您不要使用此方法（display:table-*），除非它是唯一的解决方案（绝不是：P）。此方法存在许多已知问题，其中一个是 IE7 不支持它。

一个合理的解决方案是使用[浮动](http://jsfiddle.net/HQHE9/1)来实现这一点。您将需要更改图像的透明度，以使 repeat-x 正确叠加。我编辑了图像，以便您可以看到一个工作示例。只要确保在 header-container 之后清除，就不会使用 float 遇到任何问题。PS，这适用于 IE7+ :]

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T13:03:23.897

> 您可以进入该网站并查看此问题的实际效果吗？

如果问题如上，那么我的回答是：是的，是的，我可以。我在 Linux 上使用 Google Chrome 18.0.1025.162。

# asp.net-mvc-3 - 如何在 razor MVC 3 中将新行插入数据库并将值读取到我的 webgrid 中

> ID：10191584
> 
> 赞同：0
> 
> 时间：2012-04-17T12:49:33.673
> 
> 标签：asp.net-mvc-3, webgrid

我正在使用带有 Poco 实体的 Razor、MVC3。

在插入数据库时​​，我使用**Enviroment.NewLine**作为两个文本之间的分隔符。

```
 oldValues += " Name = '" + oldName.Name + "'" + Environment.NewLine ;
  oldValues += " Age = '" + oldName.Age + "'" + Environment.NewLine ; 
```

然后，我将这个**oldValues 字符串对象**分配给我在数据库中的一个列。

但是当我在我的**webgrid**上读取这个值时，格式并没有按预期显示。

这里可能是什么问题？

请建议我一些方法，我也尝试过附加

```
 <br /> 
```

标签也是。

**我的 webgrid 列之一中的预期输出：**

旧值是

姓名 = 亚瑟

年龄 = 24

和新的价值观是

姓名 = 亚瑟 R

年龄=25

**我的 webgrid 列之一中的实际输出：**

旧值是 Name = Yasser Age = 24，新值是 Name = Yasser R Age =25

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T02:29:44.327

这就是 HTML 的行为。你可以用它来包装你的文本，`<pre>Your String Here</pre>`它应该按照你的期望显示文本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T07:17:12.597

在保罗的帮助下，我设法解决了这个问题

这是我现在使用的

```
 logGrid.Column(header: "Message", columnName: "Message", format: @<pre>@item.Message </pre>), 
```

# sharepoint - Sharepoint 2010 日历 Webpart 查看 Powershell

> ID：10191585
> 
> 赞同：1
> 
> 时间：2012-04-17T12:49:34.297
> 
> 标签：sharepoint, powershell, sharepoint-2010, calendar

在基本团队网站模板的主页上，我有一个日历 web 部件，默认情况下它的视图基于日历列表日历视图。我的问题是，在日历列表上应用新的日历覆盖后，主页视图不会自动更新以反映此更改。我必须改为编辑 web 部件，选择日历视图（这是当前默认使用的）并应用该更改。我试图在没有运气的情况下在 powershell 中完成这项任务。

我试图使用的代码是：

```
$web = get-spweb "http://portal/site/testsite1"
$file = $web.getfile("default.aspx")
$manager = $file.getlimitedwebpartmanager([System.web.ui.webcontrols.webparts.personalizationscope]::shared)
$manager.webparts | format-list title, ID

$wp = $manager.webparts["GUID_HERE"]
$doclib = $web.lists["Calendar"]
$view = $doclib.Views["Calendar"]

$wp.ViewGuid = $view.ID.ToString("B").ToUpper()
$manager.SaveChanges($wp) 
```

不幸的是，这在更新视图以反映日历视图中应用的当前覆盖方面没有效果，因此只有手动干预起作用。是否有一些我可以用来完成此任务的 powershell 代码？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T15:22:43.693

这个想法是正确的，但在细节上有一个错误。您不应依赖 ViewGuid。看看[这篇文章](http://spblog.net/post/2011/04/26/Changing-default-view-for-ListViewWebPart-programmatically.aspx)。您可能会发现它很有帮助。然后将 .NET 代码转换为 PowerShell 脚本，您将拥有所需的内容。更好的建议是将此代码和事件接收器放入列表更新时触发的事件中。

# ios - 如何循环显示图像（来自网络）？

> ID：10191587
> 
> 赞同：1
> 
> 时间：2012-04-17T12:49:35.907
> 
> 标签：ios, image, uiimage, slideshow

我需要以 2 秒的时间间隔在我的 imageview 中显示图像。但是，此代码仅显示最后一张图片

```
NSUInteger i,j;
for (i = 1; i <= kNumImages; i++)
{
    NSURL *picUrl=[NSURL URLWithString:[NSString stringWithFormat:@"http://panagtakdo.com/misc/images/%d.jpg",i]];
    NSData *picData=[[NSData alloc] initWithContentsOfURL:picUrl];
    image1.image = [UIImage imageWithData:picData];
    NSLog(@"Image %d Success",i);
    [NSThread sleepForTimeInterval:0.2];    
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T12:57:34.413

首先你不应该那样做。首先创建 NSMutableArray *imageData;

和 initWithContentsOfURL 你所有的图片；

当 imageData 的数量等于您的 kNumImages 时，将其链接到您的 imageView。而不是使用 NSThread sleepForTimeInterval，您可以使用 performSelector: afterDelay 函数来更改图像。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-17T16:19:34.283

只是解释一下，为什么您的代码*不起作用*：

设置图像后，您的线程正在休眠。没有时间重新绘制图像视图（这将导致显示新图像）。因此，在所有循环运行之后，将发生第一次重绘。所以你只看到最后一张图片。

如果您将 Travis 和 mhunturk 的答案结合起来，您就有了如何完成的完美解决方案。但我也建议使用异步方法，从 url 加载图像。

> 你*永远不*应该阻塞主 UI 线程。既不直接调用 sleepForTimeInterval，也不同步加载 web 内容。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-17T15:55:36.607

如果要显示动画图像序列，可以创建一个 UIImage 来执行此操作：

```
NSMutableArray *mImageArray = [NSMutableArray arrayWithCapacity:0];
for(int i = 1; i < 9; i++) {
    NSString *imageFileName = [NSString stringWithFormat:@"0%d.tiff",i];
    UIImage *newImage = [UIImage imageNamed:imageFileName];
    [mImageArray addObject:newImage];
}

UIImage *animatedSequence = [UIImage animatedImageWithImages:mImageArray duration:16];

UIImageView *uiiv = [[UIImageView alloc] initWithImage:animatedSequence];
[self.canvas addSubview:uiiv]; 
```

您可以通过设置 UIImage 的持续时间来控制图像的时间。我将持续时间设置为 16 秒，这变成了 2 秒/图像，因为我在我的序列中使用了 8 个图像。

（在ios模拟器中测试过，效果很好）

PS在我的项目结构中，self.canvas指的是主UIView

# python - 为 Python 包装静态 C++ 数组

> ID：10191588
> 
> 赞同：1
> 
> 时间：2012-04-17T12:49:36.530
> 
> 标签：python, swig, ctypes, cython, boost-python

我正在尝试包装一些 C++ 头文件，这些头文件具有以下两种方式使用指针的类：

1) 作为类的数据成员的数组。
2) 作为一个数组作为函数的参数

这些类将在 Python 中进行子类化，并且方法将被覆盖。

一个示例头文件看起来像这样：

```
struct Array{
    int * array;
    int array size;
}

class A{
    public:
        //Meant to be accessed as an array
        virtual void func( int size, double * array) = 0;
        virtual bool func2(long size1, long size2, float * array1, int * array2) = 0;
} 
```

在所有情况下，数组的大小都是静态的。但是，在某些情况下，数组已被初始化，而在其他情况下，它们尚未初始化（因此指针 = NULL）。

我需要弄清楚的是：

1) 如果 C++ 数组是类的数据成员，你如何包装它？
2) 如何处理作为参数传递给函数的 C++ 数组？
3) 如何在 Python 中分配和初始化包装好的数组？
4) 你如何包装 C++ 数组，以便在 Python 中所做的更改被传递回原始数组，并且对原始数组的更改反映在 Python 中？

编辑：
我不要求针对 SWIG、cytpes、Cython 和 Boost-Python 讨论所有四个问题的答案。对所有四个进行讨论会很好，但是，我意识到这要求有点多。

我偏爱使用 SWIG 的响应。但是，我标记了所有四个，因为在我自己试图找到这个问题的解决方案时，我发现关于如何为任何 Python 扩展系统实现这一点的信息很少。

我的希望是为尝试包装 C++ 代码时反复出现的问题创建一个良好的起点。

# sql - SQL 不喜欢 SplitList 这个词

> ID：10191592
> 
> 赞同：0
> 
> 时间：2012-04-17T12:49:41.583
> 
> 标签：sql, sql-server

为什么 SQL 不协调 SplitList？

这是我的代码，SQL 不喜欢 SplitList 这个词。

消息是“无效的对象名称”

```
Where FirstName IN (Select * from SplitList(@CustomerName, ',')) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-17T12:59:01.680

如果`SplitList`是没有显式模式的表值函数，请以这种方式调用它：

```
Select * from dbo.SplitList(@CustomerName, ',') 
```

如果未提供架构，SQL Server 将假定`dbo`为默认架构。

顺便说一句，您可以通过以下方式更改数据库对象的架构：

```
ALTER SCHEMA [NewSchema] TRANSFER dbo.SplitList 
```

[http://msdn.microsoft.com/en-us/library/ms173423.aspx](http://msdn.microsoft.com/en-us/library/ms173423.aspx)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-17T12:52:09.673

没有什么`SplitList`比 T-SQL 或 ANSI SQL 的内置功能更好的了。

您正在使用的代码示例似乎假设您已经有一个名为`SplitList`.

如果您*已经*有一个用户定义的`SplitList`函数，那么您可能只需要在调用它时指定它的模式：

```
WHERE FirstName IN (SELECT * FROM dbo.SplitList(@CustomerName, ','))
-- or
WHERE FirstName IN (SELECT * FROM yourschema.SplitList(@CustomerName, ',')) 
```

# iphone - Python日期时间与iPhone日期不同

> ID：10191596
> 
> 赞同：0
> 
> 时间：2012-04-17T12:49:55.113
> 
> 标签：iphone, python, objective-c, google-app-engine

在 Google App Engine 中，我有一个带有`(auto_now_add=True)`. 在我 iPhone 上的 Objective-C 中，获取当前时间让我得到了我`2012-04-17 6:55:01`，而在 Python 上`auto_now_add`得到了我`2012-04-17 11:55:01`。

`6:55`是我的当地时间，我不确定 Python 日期的时区或格式。如何通过 Python 或 Objective-C 使两者匹配？

**编辑：**显然 Python 日期是 UTC 格式。但是我的 iPhone 日期是什么格式的？我`[NSDate date]`还以为是UTC？为什么我得到不同的结果？

**编辑2：**好的。需要在 Objective-C 中执行此操作

```
NSTimeZone *timeZone = [NSTimeZone timeZoneWithName:@"UTC"];
[formatter setTimeZone:timeZone]; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T12:54:47.907

这是因为应用程序引擎始终在 UTC 时间运行，您的手机可能处于不同的时区。

> 运行时的 TZ 环境变量设置为 UTC，并且无法更改。例如 time.time() 和 datetime.datetime.now() 返回的时间戳将始终采用 UTC。同样，数据存储中的日期时间属性将始终作为 UTC 存储和返回。
> 
> 您可以使用 astimezone() 方法更改内存中日期时间的时区。

[来源](http://timezones.appspot.com/)

# java - 可以使用 8.4 和 9.0 postgres (hibernate) 库构建一个 .war 文件吗？

> ID：10191598
> 
> 赞同：5
> 
> 时间：2012-04-17T12:49:59.353
> 
> 标签：java, hibernate, postgresql, maven

到目前为止，我们一直在使用 maven 依赖项来指定库，即：

```
<dependency>
  <groupId>org.hibernate</groupId>
  <artifactId>hibernate-core</artifactId>
  <version>3.6.10.Final</version>
</dependency>
<dependency>
  <groupId>org.hibernate</groupId>
  <artifactId>hibernate-c3p0</artifactId>
  <version>3.6.10.Final</version>
  <type>jar</type>
  <scope>compile</scope>
</dependency>
<dependency>
  <groupId>postgresql</groupId>
  <artifactId>postgresql</artifactId>
  <version>8.4-702.jdbc4</version>
</dependency> 
```

但是，我们现在在不同的机器上运行完全相同的 .war 文件，并且希望保持相同的 One-war-file-to-rule-them-all，但不希望通过使用较旧的驱动程序来解决问题在 postgres 9.1 安装上（尤其是当字节数组编码默认值已更改时，例如）。Cliff-Claven 类似的信息可能无关紧要，但无论如何添加：这两种安装的操作系统都是 Mac OS X 服务器，Postgres 8.4 运行在 10.6 上，9.1 运行在 10.7 上。我们不需要升级任何数据（从头开始的单独实例）。

也许这比其他任何问题都更像是一个专家问题，但我似乎看不到任何特定于我的情况的东西。我确实找到[了这个](https://stackoverflow.com/questions/4595118/hibernate-version-jars-maven-what-should-go-together)，但它是较旧的 Hibernate 3.5，不再适用。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-17T15:00:50.477

对于 PostgreSQL，无论服务器的版本如何，都应该使用最新版本的 JDBC 驱动程序，真正非常古老的版本除外。

[http://jdbc.postgresql.org/download.html#current](http://jdbc.postgresql.org/download.html#current)说：

> 这是驱动程序的当前版本。除非您有不寻常的要求（运行旧应用程序或 JVM），否则这是您应该使用的驱动程序。它支持 Postgresql 7.2 或更高版本，并且需要 1.4 或更高版本的 JVM。

对于 PostgreSQL JDBC 驱动程序，由于修复了错误并添加了功能，它们通常只进入最新版本。较新的 JDBC 驱动程序版本可以识别较旧的服务器版本，并将根据服务器版本正确运行。

请注意，较旧的 JDBC 驱动程序*不*知道较新的服务器版本，事实上，使用比服务器版本旧的 JDBC 驱动程序可能会导致安全问题。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-17T14:06:19.247

不确定我是否理解你的问题。我对这个问题的看法略有不同。以下是我的意见/建议：

1.  不要将与驱动程序相关的 jar 直接捆绑到 war 文件中，而是使用由应用程序服务器（tomcat 等）管理**的数据源**
2.  这样就不**会对**驱动程序类产生任何依赖关系。
3.  数据源配置可以在应用程序服务器上完成，您的 Web 应用程序只**需要知道其 JNDI 名称即可**进行查找。
4.  这也将与您的**One-war-file-to-rule-them-all**方法保持一致，因为 war 文件将真正独立于任何与驱动程序相关的依赖项。

这种方法的*缺点*是驱动程序 jar 需要在应用服务器上手动维护，但它只是一次任务，并且与任何应用程序级别的更改完全分离。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-17T13:05:29.360

最好的解决方案可能是将 jdbc 驱动程序放入服务器上的共享 lib 文件夹中，而不是将其打包到 war 中。这可以通过将范围设置为 来完成`provided`。

您可以在 pom 中使用不同的依赖版本定义构建配置文件，但这需要两次调用构建并导致两个不同的 war 文件。

# asp.net - 网格选择禁用/不可见

> ID：10191599
> 
> 赞同：0
> 
> 时间：2012-04-17T12:50:03.283
> 
> 标签：asp.net, css, drag-and-drop, telerik, radgrid

我在我的解决方案中使用了 radgrid。我使用此 radgrid 拖放数据，但无需选择任何内容。因此，当用户单击一行时，该行不应将其布局更改为选定的行。但是当我禁用选择时，拖放将不再起作用。这不是那种问题，但它必须至少对用户来说是不可见的，因为有些用户可能会感到困惑。

有没有办法禁用选择但继续拖放或覆盖/删除选定行的css？

先感谢您！

亲切的问候，韦斯利

![例子](../Images/837a995c78bcebdfa2ccd6ee3f1c1a68.png)

```
<telerik:RadGrid ID="rgData" runat="server" AutoGenerateColumns="False" AllowMultiRowSelection="false" CellSpacing="0" GridLines="None" onrowdrop="rgData_RowDrop">
    <ClientSettings AllowRowsDragDrop="True" EnablePostBackOnRowClick="true">
        <Selecting AllowRowSelect="true" EnableDragToSelectRows="true" />
    </ClientSettings>
</telerik:RadGrid> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T13:29:35.247

你有两个选项可以解决你的问题。您认为应该更改 CSS 而不是尝试禁用选择是正确的。

方法 1（如果您不使用皮肤）是使用 itemStyle 和 SelectedItemStyle 元素，它们具有您需要设置的所有属性。

```
<telerik:RadGrid ID="rgData" runat="server" AutoGenerateColumns="False" AllowMultiRowSelection="false" CellSpacing="0" GridLines="None" onrowdrop="rgData_RowDrop">
    <SelectedItemStyle BackColor="AliceBlue" />
    <ItemStyle BackColor="AliceBlue"  />
    <ClientSettings AllowRowsDragDrop="True" EnablePostBackOnRowClick="true">
        <Selecting AllowRowSelect="true" EnableDragToSelectRows="true" />
    </ClientSettings>
</telerik:RadGrid> 
```

或者，如果您正在使用皮肤，请在 radGrid 集上将`EnableEmbeddedSkins="false"`皮肤目录复制到您的项目中，并为您正在使用的皮肤修改以下样式：

该文件应类似于：RadControls/Grid/Skins/[SkinName]/Styles.css 文件。

```
 .RadGrid_[SkinName] .rgSelectedRow
    {
        background: #e5e5e5 !important;
        height: 22px;
        border: solid 1px #e5e5e5;
        border-top: solid 1px #e9e9e9;
        border-bottom: solid 1px white;
        padding-left: 4px;
    } 
```

# c - C中的字符串怪异

> ID：10191600
> 
> 赞同：0
> 
> 时间：2012-04-17T12:50:05.017
> 
> 标签：c, string

我刚刚遇到了一个奇怪的问题。

此代码有效：

```
int l = strlen(output); // l = 20 (believe me)
char withoutLeadingZeroes[20] = ""; 
```

这不会：

```
int l = strlen(output); // l = 20 (believe me)
char withoutLeadingZeroes[l] = ""; 
```

我收到此错误

> 数组初始值设定项必须是初始值设定项列表或字符串文字

我真的不明白。有什么建议么？来自维也纳的问候:-)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T12:52:27.040

您不能使用变量以这种方式初始化任何类型的静态数组。我相信它必须是常量。

VS2010： `error C2057: expected constant expression`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-17T15:16:13.173

[在线 C99 标准 (n1256)](http://www.open-std.org/jtc1/sc22/wg14/www/docs/n1256.pdf)

> **6.7.8 初始化**
> ...
> 3 要初始化的实体的类型应该是一个未知大小的数组或一个不是可变长度数组类型的对象类型。

该声明`char withoutLeadingZeroes[l] = "";`声明`withoutLeadingZeros`为*可变长度数组*，并且尝试像您在此处所做的那样对其进行初始化是违反约束的。

不过，诊断可能会更清楚一些。

**编辑**

*您能准确*指出哪一行出现错误吗？我使用 gcc 得到了更清晰的诊断，我*认为*XCode 在后台运行 gcc。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-17T12:53:01.400

C 不支持 VLA（可变长度数组），也许 C99 以后不确定 C 标准 VLA 的内容。

建议：

```
int len = strlen(output);
char * wo_zeros = (char *)malloc(len);
strcpy(wo_zeros, "");
//do something with wo_zeros
free(wo_zeros); 
```

# mercurial - 如何从 Mercurial repo 中删除区分大小写的文件夹？

> ID：10191601
> 
> 赞同：0
> 
> 时间：2012-04-17T12:50:06.950
> 
> 标签：mercurial, dvcs

在 BitBucket Mercurial 存储库中，我有两个文件夹：转换器和转换器。

但是当我克隆 repo 时，我只有 Converter 文件夹，其中包含两者（MacOS）的内容。

我想删除 Converter 文件夹。我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T13:36:10.287

您可以在尊重大小写的系统上执行此操作（并且您可以在下次格式化磁盘时将您的 mac 变成一个），但也有一些技巧可以绕过它：

[https://www.mercurial-scm.org/wiki/FixingCaseCollisions](https://www.mercurial-scm.org/wiki/FixingCaseCollisions)

# maven - Maven - 如何设置超级 POM

> ID：10191604
> 
> 赞同：1
> 
> 时间：2012-04-17T12:50:17.053
> 
> 标签：maven

我需要使用公司本地的 Maven 存储库，仅此而已。现在，Super POM 包含 repo1.maven.org/maven2 - 我想关闭它。

现在，[http](http://maven.apache.org/guides/introduction/introduction-to-the-pom.html) ://maven.apache.org/guides/introduction/introduction-to-the-pom.html 说“所有 POM 都扩展了 Super POM，除非明确设置”。

我如何明确设置它？

(Maven 3.0.4)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-17T13:00:56.210

我假设，“本地存储库”是指公司/办公室中可用的存储库，而不是 $HOME/.m2/repository 中的本地存储库。

在用户的 settings.xml 文件中定义您的存储库作为所有存储库的镜像就可以了：

```
 <settings xmlns="http://maven.apache.org/SETTINGS/1.0.0"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://maven.apache.org/SETTINGS/1.0.0
                      http://maven.apache.org/xsd/settings-1.0.0.xsd">

      <mirrors>
        <mirror>
          <id>companyrepo</id>
          <url>http://localrepo.com/repo</url>
          <mirrorOf>*</mirrorOf>
        </mirror>
      </mirrors>
  </settings> 
```

这样每个项目都将从 Super POM 继承，但 Maven 不会连接到 repo1.maven.org

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T13:01:55.380

我的理解是，Super POM 为所有 maven POM 提供了广泛使用的功能，除非项目 POM 明确提供了该功能（例如，有点像 Java 中的 Object 类）。

因此，为避免使用公共存储库，您可以指定要在 POM 中使用的（本地）存储库。但是，更好的方法是在 settings.xml 文件中指定本地存储库 - 这允许您使用密码保护本地存储库，而无需将用户名/密码提交到源代码存储库并手动共享它们。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-17T13:05:00.823

您正在寻找的是 Maven 的离线模式。使用控制台调用 Maven 时，可以通过`-o`或选项启用。`--offline`如果您真的想一直启用它，请添加`<offline>true</offline>`到您的`settings.xml`.

如果您（出于某种原因）不能使用离线模式，最极端的选择是覆盖`central`id 的存储库定义。例子：

```
<repository>
  <id>central</id>
  <url>file://C:\tmprepo</url>
</repository> 
```

我推荐基于离线模式的解决方案。它干净而清晰。

# javascript - 我的 JavaScript 幂函数如何工作？

> ID：10191605
> 
> 赞同：-1
> 
> 时间：2012-04-17T12:50:18.270
> 
> 标签：javascript, function, for-loop, return

```
var power = function (base, exponent) {
  var result = 1;
  for ( i = 0; i < exponent; i++) {
    result = result * base;
  }
  return result;
};

power(2, 2); 
```

我实际上得到了一些，但我没有得到的是——for循环在那里和后面的行做了什么？（函数的力量）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-17T12:54:21.450

循环从`0`(inclusive) 循环到`exponent`(exclusive) 乘以`result`并将`base`结果存储在`result`. 一旦它循环了很多次，它就会返回结果。所以它将数字提高到给定的幂（参见[*指数*](http://en.wikipedia.org/wiki/Exponentiation)）。

* * *

旁注：此代码[*成为隐式全局恐怖的*](http://blog.niftysnippets.org/2008/03/horror-of-implicit-globals.html)牺牲品，因为它未能声明`i`变量。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-17T12:53:54.910

将一个数提高到一定的幂等于将该数乘以自身多次。所以 2 的 2 次方与 2 * 2 相同，2 的 3 次方与 2 * 2 * 2 相同，等等。`for`循环只是实现了这一点。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-17T12:54:34.097

该函数实际上通过将基数乘以自身多次以直接的方式计算幂函数。

该循环实际上将中间结果与到达运行中的基数相乘。从而计算`result = (((1 * base) * base) * base) * ...`得到最终结果。

顺便说一句，为此有一个内置函数：（`Math.pow`有关[详细信息，请参阅 MDN](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Math/pow)）

# jquery - 使用 jQuery 委托 Hammer.js 事件

> ID：10191612
> 
> 赞同：6
> 
> 时间：2012-04-17T12:50:33.533
> 
> 标签：jquery, events, touch, hammer.js

我已经开始使用 Hammer.js ( [https://github.com/eightmedia/hammer.js](https://github.com/eightmedia/hammer.js) )，这是一个很棒的小脚本，但我不确定如何使用 jQuery 的 .on() 事件处理程序委托事件。

我在这里设置了一个小 jsfiddle 示例：http: [//jsfiddle.net/will/3dUKu/1/](http://jsfiddle.net/will/3dUKu/1/)

```
var i = 0;
// How would I apply hammer to this situation?
$('nav').on('click', 'button', function() {
    $('<button id="' + i + '">Extra button ' + i + ' (' + $(this).attr('id') + ')</button>').appendTo('nav');
    i++;
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-07-21T18:39:41.167

不知道您是否曾经找到问题的答案。解决方案很简单，分为两部分。首先，由于您尝试使用 jQuery 调用，您应该使用 Hammer 的 jQuery 插件版本。可以在以下位置找到 jQuery 插件的当前版本：

[http://eightmedia.github.io/hammer.js/dist/jquery.hammer.min.js](http://eightmedia.github.io/hammer.js/dist/jquery.hammer.min.js)

第二部分是您需要使用 Hammer 的方法来选择对象。为此，您可以在选择器和绑定之间插入 Hammer 调用。像这样：

jQuery 对象：

```
$('nav').on('click', 'button', function(){ 
    /* ... */ 
}); 
```

jQuery Hammer 对象：

```
$('nav').hammer().on('click', 'button', function(){
    /* ... */
}); 
```

而已...

# javascript - jQuery .keypress & .keydown .which

> ID：10191621
> 
> 赞同：37
> 
> 时间：2012-04-17T12:50:58.157
> 
> 标签：javascript, jquery, keyboard, keypress, keydown

好的，.keypress 和 .keydown/.keyup 有什么区别？目前我正在使用 .keydown ，它为我的键返回 38 的 .which 值，现在如果我将其更改为 .keypress 它为同一个键返回 109 的值。有什么区别，为什么同一个键的值不同？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-04-17T13:02:27.327

如果你按下一个按钮，它会触发 a`keydown`并释放它会触发 a `keyup`。`keypress`通常介于这两者之间。

`keydown`并`keyup`讨论哪个***键***已更改。`keypress`告诉该键代表哪个***字符。***

请注意，这完全取决于浏览器！

请参阅[这篇文章，了解在各种浏览器上实现的关键事件之间的差异](http://www.quirksmode.org/js/keys.html)。

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2012-04-17T13:24:23.503

我会成为 d$%^@d，keypress 确实有区别，而我一直没有意识到。哈哈

看看我的小提琴并尝试像字母“r”这样的东西

[http://jsfiddle.net/SpYk3/NePCm/](http://jsfiddle.net/SpYk3/NePCm/)

不知怎的，我从来没有注意过这个

> 找到更多信息：
> 
> [http://www.quirksmode.org/js/keys.html](http://www.quirksmode.org/js/keys.html)
> 
> “这两个属性是`keyCode`和`charCode`。简单地`keyCode`说，就是用户按下的实际键盘键，同时`charCode`给出结果字符的 ASCII 值。这些信息位不必相同；例如，小写'a' 和大写的 'A' 具有相同的`keyCode`，因为用户按下相同的键，但`charCode`由于结果字符不同而不同。
> 
> Explorer 和 Opera*不*支持`charCode`。但是，它们在 中提供字符信息`keyCode`，但仅在 中提供`onkeypress`。`onkeydown`并`-up` `keyCode`包含关键信息。”

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2012-04-17T13:00:06.813

您应该阅读以下帖子：http: [//javascript.info/tutorial/keyboard-events](http://javascript.info/tutorial/keyboard-events)

> Keydown 触发任何按键并提供扫描码。Keypress 在 keydown 后触发并提供字符代码，但仅保证字符键。

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2014-07-31T02:51:07.380

在正常情况下，请选择`keyup`：

```
$(document).keyup(function(e){
  console.log(e.which);
}); 
```

原因：

1.  `keydown`当用户按住键时会一直触发，而`keypress`只`keyup`触发一次。
2.  `keypress`不检测特殊键（例如`SHIFT`），`keydown`而是检测`keyup`。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-04-17T12:56:11.710

KeyPress 发生在 KeyDown 之后。因此，您可以使用 KeyDown 来确定它是什么键，然后使用 KeyPress 来禁止该字符。

# android - 在 Android 中显示 Rss 提要

> ID：10191624
> 
> 赞同：1
> 
> 时间：2012-04-17T12:51:05.310
> 
> 标签：android

我的要求是从 RSS 提要中获取数据并将其显示在列表视图中。当我单击列表项时，该项目的详细信息应显示在新活动中。我从 RSS 提要获得的数据大约是 50kb 到 80kb，因此哪个解析器更适合使用 SAX 或 DOM。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T13:35:42.477

我会选择 SAX。如果我没记错的话，SAX 使用更少的内存（甚至更快）。SAX 顺序读取数据，而 DOM 将其全部放入内存，然后在那里解析。

# ruby-on-rails-3 - 捆绑安装后找不到 spork 可执行文件

> ID：10191625
> 
> 赞同：0
> 
> 时间：2012-04-17T12:51:06.177
> 
> 标签：ruby-on-rails-3, bundler, spork

我已经添加`spork-rails`到我的 Gemfile 中，在一个`:test`部分下，然后运行`bundle install`​​. `bundle show spork`现在给`/var/lib/gems/1.9.1/gems/spork-1.0.0rc2`

但是，现在当我这样做时`spork cuc`，bash 会告诉我`The program 'spork' is not currently installed`。如果我尝试`bundle exec spork cuc`，我会得到`bundler: command not found: spork`。

我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T17:03:25.030

尝试将 group :test 替换为 group :test, :development do

# android - 调用 System.loadLibrary("chromium_net"); java.lang.UnsatisfiedLinkError 失败：未知失败

> ID：10191626
> 
> 赞同：0
> 
> 时间：2012-04-17T12:51:06.730
> 
> 标签：android, android-firmware

只是包含在我的代码中的第一行以加载不同的系统库：

```
public class MyWebTestActivity extends Activity {

static {
    System.loadLibrary("ui");
    System.loadLibrary("android");
    System.loadLibrary("chromium_net"); // - fails UnsatisfiedLinkError: unknown failure
}
...etc.. 
```

堆栈跟踪：

```
04-17 14:04:23.121: W/dalvikvm(5041): Shared lib '/system/lib/libchromium_net.so' already opened by CL 0x0; can't open in 0x2bb4b9f0
04-17 14:04:23.121: W/dalvikvm(5041): Exception Ljava/lang/UnsatisfiedLinkError; thrown         while initializing Lmywebtest/MyWebTestActivity;
04-17 14:04:23.121: W/dalvikvm(5041): Class init failed in newInstance call     (Lmywebtest/MyWebTestActivity;)
04-17 14:04:23.121: D/AndroidRuntime(5041): Shutting down VM
04-17 14:04:23.121: W/dalvikvm(5041): threadid=1: thread exiting with uncaught exception (group=0x2b4d61f8)
04-17 14:04:23.121: E/AndroidRuntime(5041): FATAL EXCEPTION: main
04-17 14:04:23.121: E/AndroidRuntime(5041): java.lang.ExceptionInInitializerError
04-17 14:04:23.121: E/AndroidRuntime(5041):     at java.lang.Class.newInstanceImpl(Native Method)
04-17 14:04:23.121: E/AndroidRuntime(5041):     at java.lang.Class.newInstance(Class.java:1319)
04-17 14:04:23.121: E/AndroidRuntime(5041):     at android.app.Instrumentation.newActivity(Instrumentation.java:1023)
04-17 14:04:23.121: E/AndroidRuntime(5041):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1871)
04-17 14:04:23.121: E/AndroidRuntime(5041):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1981)
04-17 14:04:23.121: E/AndroidRuntime(5041):     at android.app.ActivityThread.access$600(ActivityThread.java:123)
04-17 14:04:23.121: E/AndroidRuntime(5041):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1147)
04-17 14:04:23.121: E/AndroidRuntime(5041):     at android.os.Handler.dispatchMessage(Handler.java:99)
04-17 14:04:23.121: E/AndroidRuntime(5041):     at android.os.Looper.loop(Looper.java:137)
04-17 14:04:23.121: E/AndroidRuntime(5041):     at android.app.ActivityThread.main(ActivityThread.java:4424)
04-17 14:04:23.121: E/AndroidRuntime(5041):     at java.lang.reflect.Method.invokeNative(Native Method)
04-17 14:04:23.121: E/AndroidRuntime(5041):     at java.lang.reflect.Method.invoke(Method.java:511)
04-17 14:04:23.121: E/AndroidRuntime(5041):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:787)
04-17 14:04:23.121: E/AndroidRuntime(5041):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:554)
04-17 14:04:23.121: E/AndroidRuntime(5041):     at dalvik.system.NativeStart.main(Native Method)
04-17 14:04:23.121: E/AndroidRuntime(5041): Caused by: java.lang.UnsatisfiedLinkError: unknown failure
04-17 14:04:23.121: E/AndroidRuntime(5041):     at java.lang.Runtime.load(Runtime.java:340)
04-17 14:04:23.121: E/AndroidRuntime(5041):     at java.lang.System.load(System.java:521)
04-17 14:04:23.121: E/AndroidRuntime(5041):     at mytest.MyWebTestActivity.<clinit>(MyWebTestActivity.java:24) 
```

**问题：“共享库 [名称] 已由 CL.. 打开”是什么意思？如何解决？**

PS 我尝试过加载其他系统库（例如 android -/system/lib/libandroid.so、..audioalsa、camera_client 等），所有这些库都可以毫无问题地加载。我使用 Android 4.0.3 运行有根的 Xperia 手机。所有图书馆都在电话上。

# android - 如何在 OpenGL ES 2.0 中设置我的视图以显示正确的坐标数

> ID：10191628
> 
> 赞同：0
> 
> 时间：2012-04-17T12:51:10.447
> 
> 标签：android, opengl-es-2.0

我正在为 Android 编写一个简单的 2D 游戏，游戏区域为 300x200，坐标从（0,0 到 299,199）运行。我希望这个区域尽可能地填充屏幕，同时保持其纵横比。例如，如果 GL 视图填满了设备的全部 800x480，我可以将该区域缩放 2.4x 到 720x480，从而在两侧留下 40 像素的空间。

我不认为许多设备会在两个维度上完全缩放，因此代码必须应对水平或垂直的间隙。

所以问题是我该怎么做。我的游戏区是 2D 的，所以我可以使用正交投影。我只是不明白我需要插入什么值来设置它。我还怀疑因为 ES 2.0 严重依赖着色器，我可能需要将某种缩放矩阵传播到矢量着色器以确保对象被渲染到正确的大小。

有谁知道一个很好的教程，它可能会用对我的需求有意义的术语来说话？我见过的大多数教程似乎都满足于将一个立方体或正方形倾倒到屏幕中间，而不是渲染一个精确尺寸的区域。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T12:42:59.643

这些问题应该很容易使用旧的和熟悉的 Opengl 函数，如 glViewport 和 glProjection。GLM 为 Opengl ES 等环境提供，看看

[http://glm.g-truc.net/](http://glm.g-truc.net/)

# android - 如何从屏幕中心为活动设置动画然后传播到全屏

> ID：10191630
> 
> 赞同：2
> 
> 时间：2012-04-17T12:51:15.233
> 
> 标签：android

我想从屏幕中心对活动进行动画处理，然后打开全屏。（就像一朵花开放）。

我已经尝试过了，但它会滑入。
开始

```
<translate xmlns:android="http://schemas.android.com/apk/res/android"
    android:duration="500"
    android:fromXDelta="50%"
    android:interpolator="@android:anim/accelerate_interpolator"
    android:toXDelta="0%" /> 
```

结尾

```
<translate xmlns:android="http://schemas.android.com/apk/res/android"
    android:duration="500"
    android:fromXDelta="0%"
    android:interpolator="@android:anim/accelerate_interpolator"
    android:toXDelta="-100%" /> 
```

```
Intent detail = new Intent(this, DetailActivity.class);
startActivity(detail);
overridePendingTransition(R.anim.start,R.anim.end); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T13:20:16.883

在 ICS 中，默认打开动画是按比例放大，这是您想要的。我从 ICS 资源目录中获得了这些代码。你可以从你的平台文件中找到另一个例子（android-sdk-macosx\platforms\android-15\data\res\anim\activity_*.xml）

我从以下代码得到`activity_open_enter.xml`。

```
<set xmlns:android="http://schemas.android.com/apk/res/android"
    android:shareInterpolator="false"
    android:zAdjustment="top" >
    <alpha
        android:duration="@android:integer/config_shortAnimTime"
        android:fillAfter="false"
        android:fillBefore="false"
        android:fillEnabled="true"
        android:fromAlpha="0.0"
        android:interpolator="@interpolator/decelerate_cubic"
        android:toAlpha="1.0" />
    <scale
        android:duration="@android:integer/config_shortAnimTime"
        android:fillAfter="false"
        android:fillBefore="false"
        android:fillEnabled="true"
        android:fromXScale="1.1"
        android:fromYScale="1.1"
        android:interpolator="@interpolator/decelerate_quint"
        android:pivotX="50%p"
        android:pivotY="50%p"
        android:toXScale="1.0"
        android:toYScale="1.0" />
</set> 
```

# java - Struts 2 Spring Framework 上的常规 HTML 页面

> ID：10191631
> 
> 赞同：0
> 
> 时间：2012-04-17T12:51:15.420
> 
> 标签：java, javascript, jsp, tomcat, struts2

我个人没有太多在 jsp 和 struts2 tomcat 服务器上工作的经验，但我有一个小任务，我必须处理生产中的服务器。我在互联网上看了两个晚上的信息，但似乎我无法得到答案。

我要做的是从已经存在的jsp页面中打开一些静态的简单html页面弹出。这些 jsp 页面当前位于 /webapps/WEB-INF/tld/mainPage/indexMainPage.jsp

我所做的是：

制作一些javascript函数，以便当他们单击按钮时，我会打开一个弹出窗口

```
function btn_openPopUp()
 {
    window.open("../popUp/test.html");
 } 
```

并将 test.html 页面放在 /webapps/WEB-INF/tld/popUp/test.html

弹出部分工作正常，因为它只是简单的 javascript，但不显示 test.html。

```
Struts Problem Report

Struts has detected an unhandled exception:

Messages:   
There is no Action mapped for namespace / and action name test. 
```

我一直在网上看资料，关于struts的一切都是基于动作的。无论如何我可以像在普通服务器上一样打开页面吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T13:57:58.577

WEB-INF下的页面不能直接被客户端访问；将此类页面放在根目录下的某个地方。

如果有意义的话，它们仍然可以在子目录中，只是不在 WEB-INF 下。如果由于某种原因它们*必须*在 WEB-INF 下（这对非 JSP 页面没有意义），它们可以像任何其他文件一样通过操作流式传输——这对于 HTML 页面来说很奇怪。

# algorithm - 确定性算法的示例？

> ID：10191632
> 
> 赞同：2
> 
> 时间：2012-04-17T12:51:26.447
> 
> 标签：algorithm, deterministic

晚上好，我想知道是否有人可以为我提供一个确定性算法的简单伪代码示例......我将不胜感激，一定会给你加分！！。谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-17T13:37:59.137

对我来说，“确定性”可能意味着很多事情：

*   给定相同的输入，每次都产生相同的输出。
*   给定相同的输入，每次运行都需要相同的时间/内存/资源。
*   `P`可以通过确定性计算机在多项式时间内解决的复杂性类问题，而不是只能`NP`使用*非确定性计算机*在多项式时间内解决的复杂性类问题。

你是指这些中的哪一个？

最简单的确定性算法就是这个[随机数生成器](http://xkcd.com/221/)。

```
def random():
    return 4 #chosen by fair dice roll, guaranteed to be random 
```

它每次都给出相同的输出，展示已知的`O(1)`时间和资源使用情况，并在`PTIME`任何计算机上执行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-17T12:55:46.900

你真的是说 DETERMINISTIC 而不是 NONdeterministic，我的意思是你在任何教程/指南/入门书中看到的几乎所有东西都是确定性的，例如

```
for i from 1 to 9 
    print i 
```

将始终打印 123456789

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-17T12:57:09.640

这是检查给定数字是否为奇数的确定性算法的伪代码：

```
function is_odd(n):
    if n mod 2 = 1
    then return true
    else return false 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-17T13:03:08.300

确定性算法是一种算法，用非正式的术语来说，其行为是可预测的。给定一个特定的输入，它总是会产生相同的输出

```
public struct Point {
   public int x;
   public int y; 

   //other methods

   public override int GetHashCode() {
      return x ^ y;
   }
}

Point P=new Point();
p.x=6;
p.y=3;
int res= p.GetHashCode(); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-17T12:55:39.473

确定性算法只是具有预定义输出的算法。例如，如果您正在对严格排序的元素（不相等元素）进行排序，则输出定义明确，因此算法是确定性的。

事实上，大多数计算机算法都是确定性的。当您有一些并行化或一些仅根据某些非完整标准相等的元素时，通常会出现不确定性。

# aloha-editor - 在 aloha-editor 中删除图像

> ID：10191641
> 
> 赞同：4
> 
> 时间：2012-04-17T12:51:55.403
> 
> 标签：aloha-editor

[Aloha 编辑器](http://aloha-editor.org/)附带一个图像插件，使用户能够内联编辑图像。但是，我还没有找到在编辑器中删除图像的方法。我在 Mac 上，我尝试过：

*   选择图像时按 Backspace
*   当光标在图像前面时按 Backspace

浮动工具栏中也没有“删除图像”按钮。

有没有人找到删除内联图像的方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T05:39:23.587

我有一个类似的问题。在 Windows 上，我可以通过按“Del”键来删除图像。但是，我使用`float:right`css 自动定位图像，在这种情况下我不能再删除它了。

我在我的页面中添加了以下解决方法。可以通过双击删除图像。

```
$(function() {
  $('.aloha img').live('dblclick', function(event) {
    if (confirm("Supprimer l'image?")) {
      event.preventDefault();
      $(this).remove();
    }
    return false;
  });
}); 
```

这似乎适用于Firefox。但是有时我可以看到图像被神奇地恢复了。在 Chrome 上，这种神奇的行为每次都会发生。

我一直在调查，如果我以干净的方式解决此问题，我会及时通知您。

* * *

更新：这已在 aloha-editor 中修复。如果选择图像并清除 src 字段值。见[https://github.com/alohaeditor/Aloha-Editor/issues/513](https://github.com/alohaeditor/Aloha-Editor/issues/513)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-13T10:45:09.053

您可以从单击插入的图像时出现的 URL 字段中删除图像 URL。这使图像对我来说消失了。不过不是很方便。:)

# c# - 我的应用程序在调试模式下卡住了

> ID：10191645
> 
> 赞同：0
> 
> 时间：2012-04-17T12:52:12.970
> 
> 标签：c#, winforms

我构建了winform应用程序。当我尝试调试我的项目时，我会重建和调试。应用程序运行，但在 winform 可见之前卡住了。如果我按下暂停按钮（在 Visual Studio 中）和播放按钮，winform 就会释放。如果我逐行调试应用程序，winform 不会卡住。

我能做些什么？我不知道从哪里开始。

非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T12:54:36.867

1.  在 Visual Studio 中启用[第一次机会异常](http://florianreischl.blogspot.it/2010/01/how-to-enable-first-chance-exceptions.html)（如果尚未启用）并查看是否有任何异常以任何方式干扰*预期*的执行流程。

2.  使用[Eqatec](http://www.eqatec.com/Profiler/)分析器来分析应用程序，以查看启动时会发生什么。

# ios - App Store 提交仅限于某些 iOS 目标设备

> ID：10191657
> 
> 赞同：15
> 
> 时间：2012-04-17T12:52:46.110
> 
> 标签：ios, objective-c, iphone, app-store

由于在 iPhone 4 硬件上运行的问题，我的 iTunes App Store 提交被退回。

基本上，该应用程序被编写为将所有网络活动集中到后台线程，以便 UI 在等待服务器响应慢速（蜂窝）数据连接时不会锁定。这在 iPad 2 + iPhone 4S 等双核设备上运行良好，但在 iPad/iPhone 4 等较旧的单核硬件上会导致响应时间缓慢和错误。

我确实在我的提交中包含了这样的注释，但我想知道是否有一种正式的方法来限制 iTunes Connect 中的目标设备？

干杯!

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-04-27T23:33:02.293

其实可能有办法：

将项目添加到`UIRequiredDeviceCapabilities`您`Info.plist`的要求`bluetooth-le`应将您的应用程序限制为 iPhone 4S/5 和 iPad 3、4 和 mini。如果需要，您还可以`camera-flash`提出将应用程序仅限于 iPhone 的要求。

请参阅[设备兼容性矩阵](https://developer.apple.com/library/ios/documentation/DeviceInformation/Reference/iOSDeviceCompatibility/DeviceCompatibilityMatrix/DeviceCompatibilityMatrix.html#//apple_ref/doc/uid/TP40013599-CH17-SW1)

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-04-17T13:13:06.690

不幸的是，目前没有，有一个选项列表可供您限制用户购买应用程序，但由于内核没有任何限制

列表：http: [//developer.apple.com/library/ios/#documentation/general/Reference/InfoPlistKeyReference/Articles/iPhoneOSKeys.html](http://developer.apple.com/library/ios/#documentation/general/Reference/InfoPlistKeyReference/Articles/iPhoneOSKeys.html)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-09-19T17:56:54.103

我刚刚在调查时发现了以下内容 - 这应该有助于您提交并获得 Apple 的批准，因为它是 Apple 的指导方针。

**设备兼容性**

信息属性列表 (Info.plist) 文件包含有关您的应用配置的关键信息，并且必须包含在您的应用程序包中。您在 Xcode 中创建的每个新项目都有一个默认的 Info.plist 文件，其中配置了有关您的项目的一些基本信息。您可以修改此文件以指定应用程序的其他配置详细信息。

UIRequiredDeviceCapabilities 键允许您声明应用程序运行所需的硬件或特定功能。所有应用程序都必须在其 Info.plist 文件中包含此密钥。App Store 使用此密钥的内容来防止用户将您的应用程序下载到可能无法运行它的设备上。本章中的表格显示了所有 iOS 设备及其功能。

希望它有所帮助。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-07-10T15:41:42.740

您只能在项目设置中`iPhone`或`iPad`在项目设置中限制您的应用，同时在`App Store`.

看看你可以在哪里设置类型。

![在此处输入图像描述](../Images/54ad144be7871f55e3229f6405f14750.png)

要像您一样限制某些模型，`iPhone 4/4s`您应该以编程方式执行此操作，获取大小并重定向到某些`ViewController`通知，告知您的应用在此模型中不受支持。

请参阅此处如何获取屏幕尺寸。

```
CGSize result = [[UIScreen mainScreen] bounds].size;

switch ((int) result.height) {
    case 480: 
        NSLog(@"iPhone 4 / 4s");
        break;

    case 568: 
        NSLog(@"iPhone 5 / 5c / 5s");
        break;

    case 667:
        NSLog(@"iPhone 6 / 6s"); 
        break;

    case 736: 
        NSLog(@"iPhone 6+ / 6s+");
        break;

    default: 
         NSLog(@"Other screen size, could be an iPad or new device model.");        
         break;
} 
```

重要的是要记住，Apple 希望尽可能多地支持您的应用程序，而不支持特定型号可能会拒绝您的应用程序。但是，如果您只是不支持，`iPhone 4/4s`您可能会照常发布。首先尝试调整您的代码以使用自动布局，只有当您无法通过某些设备型号进行限制时。

我有一个已发布的应用程序并限制`iPhone 4s`. 它被批准作为使用。

# eclipse - 将捆绑 jar 添加到基于 p2 的 Eclipse 目标平台的“方法”是什么？

> ID：10191659
> 
> 赞同：2
> 
> 时间：2012-04-17T12:52:49.870
> 
> 标签：eclipse, p2, target-platform

我想知道：将捆绑包添加到基于 p2 的目标平台的最佳方法是什么？我不想使用本地目录，我希望有一个目标平台，可以为我们所有的团队成员“开箱即用”。

现在我做到了，但我觉得我错过了一种更直接的方法。

我的情况如下：

我的目标平台有一堆 p2 位置，托管在我们的现场服务器上。大多数是镜像存储库，但我有一个用于“杂项”捆绑包。

这就是我将捆绑包添加到目标平台的方式。

*   我切换到另一个工作区，它*确实*使用带有 jar 的捆绑目录。
*   我将捆绑 jar 添加到该目录。
*   我将捆绑包添加到我的“第三方”功能
*   我导出功能，并将其上传到我们的服务器，删除旧的
*   我切换回我的正常工作区，并重新加载目标平台链接。

有时 eclipse 会有点困惑并继续使用缓存版本，但总的来说这种方法是有效的。

我的问题：

有没有更简单的方法？有没有更“增量”的方式？我重建了 p2 存储库，而不是使用新版本添加功能。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-09T11:44:10.320

你应该看看 p2 的发布者和镜像工具。发布者创建 p2 元数据，并且通过镜像，您可以将工件复制到现有的 p2 存储库中（假设您具有文件系统访问权限）。

Tycho 项目还提供了这些工具的[Maven 前端](http://wiki.eclipse.org/Tycho/Additional_Tools#tycho-p2-extras-plugin)。

# delphi - 文件搜索和打开word文档算法

> ID：10191660
> 
> 赞同：0
> 
> 时间：2012-04-17T12:52:51.657
> 
> 标签：delphi, delphi-7, file-search, findfirst

使用教程中的代码并进行各种修改我得到了递归过程的工作代码，该过程搜索具有文件名的文件，当参数从另一个过程传递时，用户在给定路径和通过子文件夹输入文件名单击按钮。如下：

```
procedure TfrmProject.btnOpenDocumentClick(Sender: TObject);
begin
FileSearch('C:\Users\Guest\Documents', edtDocument.Text+'.docx');
end;

procedure TfrmProject.FileSearch(const Pathname, FileName : string);
var Word : Variant;
    Rec  : TSearchRec;
    Path : string;
begin
Path := IncludeTrailingBackslash(Pathname);
if FindFirst(Path + FileName, faAnyFile - faDirectory, Rec) = 0
then repeat Word:=CreateOLEObject('Word.Application');
  Word.Visible:=True;
  Word.Documents.Open(Path + FileName);
   until FindNext(Rec) <> 0;
FindClose(Rec);

if FindFirst(Path + '*.*', faDirectory, Rec) = 0 then
 try
   repeat
   if ((Rec.Attr and faDirectory) <> 0)  and (Rec.Name<>'.') and (Rec.Name<>'..') then
     FileSearch(Path + Rec.Name, FileName);
  until FindNext(Rec) <> 0;
 finally
 FindClose(Rec);
end;

end; //procedure FileSearch 
```

在尝试了解正在发生的事情之后，直到第一个 FindClose(Rec) 为止，我已经有了很好的理解，但是这部分代码我仍然不确定：

```
if FindFirst(Path + '*.*', faDirectory, Rec) = 0 then
     try
       repeat
       if ((Rec.Attr and faDirectory) <> 0)  and (Rec.Name<>'.') and (Rec.Name<>'..') then
         FileSearch(Path + Rec.Name, FileName);
      until FindNext(Rec) <> 0;
     finally
     FindClose(Rec);
    end;
    end; 
```

我的猜测是，第一行是检查在给定路径中是​​否找到任何子文件夹，但我不太确定其余的以及它是如何工作的，如果那是正确的。帮助将不胜感激。

# clickonce - 从开始菜单运行时 ClickOnce 应用程序获取最初下载的 URL

> ID：10191668
> 
> 赞同：3
> 
> 时间：2012-04-17T12:53:20.677
> 
> 标签：clickonce

我们的用户从开始菜单/桌面快捷方式运行我们的 ClickOnce [WPF应用程序。](http://en.wikipedia.org/wiki/Windows_Presentation_Foundation)当应用程序每次启动时，我们都需要获取最初下载它的 URL。我尝试使用 ActivationUri，但这仅在直接从网站 setup.exe 而不是桌面/开始菜单快捷方式运行时才有效：

```
string activationUri = "???";
try
{
    if (System.Deployment.Application.ApplicationDeployment.CurrentDeployment == null)
    {
        activationUri = "currentDeployment is null";
    }
    else if (System.Deployment.Application.ApplicationDeployment.CurrentDeployment.ActivationUri == null)
    {
        activationUri = "deployment not null but uri is";
    }
    else if (System.Deployment.Application.ApplicationDeployment.CurrentDeployment.ActivationUri != null)
    {
        activationUri =
            System.Deployment.Application.ApplicationDeployment.CurrentDeployment.ActivationUri.AbsoluteUri;
    }
}
catch (Exception ex)
{
    activationUri = ex.Message;
    //Error getting the URL so put question mark
}

MessageBox.Show(activationUri); 
```

从设置（从网站）运行时，我会得到 URL，每隔一次我会得到“部署不为空，但 URI 是”。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-10-24T07:26:42.417

```
ApplicationDeployment.CurrentDeployment.ActivationUri 
```

如果您激活“发布清单”选项中的“**允许将 URL 参数传递给应用程序**”复选框，则不为空。

否则使用`ApplicationDeployment.CurrentDeployment.UpdateLocation`！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-19T12:44:21.823

尝试[ApplicationDeployment.UpdateLocation](http://msdn.microsoft.com/en-us/library/system.deployment.application.applicationdeployment.updatelocation.aspx)属性。除非您在 Visual Studio 中的项目属性 -> 发布 -> 更新 -> 更新位置中配置了不同的更新 URL，否则它应该返回原始部署 URL。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-17T14:46:58.380

我认为您所能做的就是在应用程序第一次下载和运行时将 URI 保存在某处，然后在应用程序脱机运行时引用此值。

# java - Jackson JSON序列化，通过级别定义避免递归

> ID：10191671
> 
> 赞同：35
> 
> 时间：2012-04-17T12:53:28.153
> 
> 标签：java, json, serialization, jackson

我使用 Jackson 库将我的 pojo 对象序列化为`JSON`表示形式。例如，我有 A 类和 B 类：

```
class A {
  private int id;
  private B b;

  constructors...
  getters and setters
}

class B {
  private int ind;
  private A a;

  constructors...
  getters and setters
} 
```

如果我想从类 A 序列化对象，则在序列化时肯定有可能获得递归。我知道我可以通过使用来阻止它`@JsonIgnore`。

**是否可以通过深度级别限制序列化？**

例如，如果级别为 2，则序列化将这样进行：

*   序列化 a, level = 0 (0 < 2 ok) -> 序列化
*   序列化 ab，级别 =1 (1 < 2 ok) -> 序列化
*   序列化 aba，级别 = 2（2 < 2 不正确）-> 停止

提前致谢。

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-04-17T22:38:52.130

我最近遇到了一个类似的问题：Jackson - [serialization of entity with birectional Relations](https://stackoverflow.com/questions/10065002/jackson-serialization-of-entities-with-birectional-relationships-avoiding-cyc) (avoiding cycles)

所以解决方案是升级到 Jackson 2.0，并在类中添加以下注释：

```
@JsonIdentityInfo(generator = ObjectIdGenerators.IntSequenceGenerator.class, 
                  property = "@id")
public class SomeEntityClass ... 
```

这完美地工作。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-04-17T16:54:49.790

检查以下链接，它可能会有所帮助：

*   [http://wiki.fasterxml.com/JacksonFeatureBiDirReferences](http://wiki.fasterxml.com/JacksonFeatureBiDirReferences)
*   [如何解决休眠双向映射导致的json序列化器中的循环引用？](https://stackoverflow.com/questions/3340485/how-to-solve-circular-reference-in-json-serializer-caused-by-hibernate-bidirecti)

之后的唯一选择是为您的对象类型创建自己的自定义模块以进行序列化/反序列化。看这里：

*   [http://wiki.fasterxml.com/JacksonHowToCustomSerializers](http://wiki.fasterxml.com/JacksonHowToCustomSerializers)
*   [http://wiki.fasterxml.com/JacksonHowToCustomDeserializers](http://wiki.fasterxml.com/JacksonHowToCustomDeserializers)

问候。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-04-17T22:36:14.853

不支持基于级别的忽略。

但是您可以让 Jackson 使用 2.0 处理循环引用，例如，请参阅“ [Jackson 2.0 发布](http://www.cowtowncoder.com/blog/archives/2012/03/entry_466.html)”以了解如何使用`@JsonIdentityInfo`.

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2015-07-02T09:06:55.307

如果您只想将自己限制在一个级别（即：您转到当前对象的子对象而不是进一步），@JsonView 有一个简单的解决方案。

在链接到另一个对象的每个字段上，使用当前类作为您的视图对其进行注释：

```
class A {
  private int id;
  @JsonView(A.class) private B b;

  constructors...
  getters and setters
}

class B {
  private int ind;
  @JsonView(B.class) private A a;

  constructors...
  getters and setters
} 
```

然后，在序列化时，使用对象类作为您的视图。序列化 A 的实例会呈现如下内容：

```
{
  id: 42,
  b: {
    id: 813
  }
} 
```

确保将 DEFAULT_VIEW_INCLUSION 设置为 true，否则将不会呈现没有 @JsonView 注释的字段。或者，您可以使用 Object 类或任何常见的超类使用 @JsonView 注释所有其他字段：

```
class A {
  @JsonView(Object.class) private int id;
  @JsonView(A.class) private B b;

  constructors...
  getters and setters
} 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2014-08-25T09:54:26.007

对于深度序列化，您可以参考此处的示例[https://github.com/abid-khan/depth-wise-json-serializer](https://github.com/abid-khan/depth-wise-json-serializer)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-02-14T21:20:41.483

在某些情况下，您可以使用保持最大深度的线程本地整数来限制序列化深度。看到这个[答案](https://stackoverflow.com/a/21789537/3290316)。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-10-30T04:28:07.177

经过几个月和大量的研究，我实现了自己的解决方案，以使我的域远离杰克逊依赖项。

```
public class Parent {
    private Child child;
    public Child getChild(){return child;} 
    public void setChild(Child child){this.child=child;}
}

public class Child {
    private Parent parent;
    public Child getParent(){return parent;} 
    public void setParent(Parent parent){this.parent=parent;}
} 
```

首先，您必须以如下方式声明双向关系的每个实体：

```
public interface BidirectionalDefinition {

    @JsonIdentityInfo(generator=ObjectIdGenerators.PropertyGenerator.class, property="id", scope=Parent.class)
    public interface ParentDef{};

    @JsonIdentityInfo(generator=ObjectIdGenerators.PropertyGenerator.class, property="id", scope=Child.class)
    public interface ChildDef{};

} 
```

之后，可以自动配置对象映射器：

```
ObjectMapper om = new ObjectMapper();
Class<?>[] definitions = BidirectionalDefinition.class.getDeclaredClasses();
for (Class<?> definition : definitions) {
    om.addMixInAnnotations(definition.getAnnotation(JsonIdentityInfo.class).scope(), definition);
} 
```

# vb.net - 从托管 Iron Python 的 VB 应用程序调用 PythonFunction

> ID：10191674
> 
> 赞同：1
> 
> 时间：2012-04-17T12:53:47.857
> 
> 标签：vb.net, scripting, ironpython, dynamic-language-runtime, hosted

我是一名 C++ 编程人员，曾受邀在 Visual Basic 中编写一个小型应用程序。该应用程序托管 IronPython 运行时，我试图在 python 中定义一些函数，然后从 VB 调用它们。我在python中编写了一个简单的测试函数

```
def test(): 
    print "Test was Called" 
```

然后我使用 Iron python 从 python 文件创建一个 ScriptSource。我可以通过对象操作查找“测试”变量，但我不知道如何调用该对象。例如（在 VB 中）：

```
pyScope = engine.CreateScope()
pySource = engine.CreateSourceFromFile("C:\Some\File\path\test.py")
pySource.Execute(pyScope)
' Now I expect the function test() to be defined in pyScope
Dim tmp as Object
pyScope.TryGetVariable("test", tmp) 
```

此时在我的代码中 tmp 被定义为 PythonFunction 类型的对象。我不知道如何调用这个函数。

```
tmp() 
```

不是有效的 VB 语法。我已经做到了这一点，现在我该如何执行这个看似简单的任务？

编辑：通过调用

```
 pyEngine.Operations.Invoke(tmp) 
```

我能够调用该函数，并且在标准输出中看到了预期的输出。我仍然觉得有一些类似函数指针的类型，我可以将 PythonFunction 类型的对象强制转换为它，这样我就可以直接调用 temp 而无需调用 Python 引擎。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T13:38:04.947

不确定这是否可行，但请尝试将其转换为 Action 类型：

```
DirectCast(tmp, Action)() 
```

* * *

根据评论，试试这个：

```
engine.ObjectOperations.Invoke(tmp, Nothing) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T15:28:43.317

.NET 4 中的 VB 应该具有与 C# 相同的动态支持。根据[http://msdn.microsoft.com/en-us/library/ee461504.aspx#Y5108](http://msdn.microsoft.com/en-us/library/ee461504.aspx#Y5108)（接近底部），你应该能够做到：

```
Dim tmp As Object = scope.GetVariable("test") 
```

...这是您已经在做的事情，因此请确保您的目标是 .NET 4。

如果这不起作用，您应该能够使用以下通用版本进行转换`GetVariable`：

```
Dim tmp As Action = scope.GetVariable(Of Action)("test") 
```

最后，您已经发现`Invoke`了 ObjectOperations。

（您可能需要调整语法，因为我不懂 VB。）

# java - 方法 getTagValue() 在 JAVA 中未定义

> ID：10191676
> 
> 赞同：2
> 
> 时间：2012-04-17T12:53:52.580
> 
> 标签：java, xml

我是 Java 新手。我看到了很多关于阅读 XML 的示例，当我尝试复制到我的代码时，我收到一个错误，即 getTagValue 未定义。我正在使用 Eclipse，JRE 1.6。

以及我了解该方法（getTagValue）是否存在？

这是错误：

```
Exception in thread "main" java.lang.Error: Unresolved compilation problems:

The method getTagValue(String, Element) is undefined for the type WriteXMLFile
The method getTagValue(String, Element) is undefined for the type WriteXMLFile
The method getTagValue(String, Element) is undefined for the type WriteXMLFile
The method getTagValue(String, Element) is undefined for the type WriteXMLFile 
```

这是代码：

```
import java.io.File;
import java.io.ObjectInputStream.GetField;

import javax.xml.parsers.DocumentBuilder;
import javax.xml.parsers.DocumentBuilderFactory;
import javax.xml.parsers.ParserConfigurationException;
import javax.xml.transform.Transformer;
import javax.xml.transform.TransformerException;
import javax.xml.transform.TransformerFactory;
import javax.xml.transform.dom.DOMSource;
import javax.xml.transform.stream.StreamResult;

import org.w3c.dom.Attr;
import org.w3c.dom.Document;
import org.w3c.dom.Element;
import org.w3c.dom.NodeList;
import org.w3c.dom.Node;

public class WriteXMLFile 
  {

public static void main(String argv[])
{

  try {

    DocumentBuilderFactory docFactory = DocumentBuilderFactory.newInstance();
    DocumentBuilder docBuilder = docFactory.newDocumentBuilder();

    // root elements
    Document doc = docBuilder.newDocument();
    Element rootElement = doc.createElement("company");
    doc.appendChild(rootElement);

    // staff elements
    Element staff = doc.createElement("Staff");
    rootElement.appendChild(staff);

    // set attribute to staff element
    Attr attr = doc.createAttribute("id");
    attr.setValue("1");
    staff.setAttributeNode(attr);

    // shorten way
    // staff.setAttribute("id", "1");

    // firstname elements
    Element firstname = doc.createElement("firstname");
    firstname.appendChild(doc.createTextNode("yong"));
    staff.appendChild(firstname);

    // lastname elements
    Element lastname = doc.createElement("lastname");
    lastname.appendChild(doc.createTextNode("mook kim"));
    staff.appendChild(lastname);

    // nickname elements
    Element nickname = doc.createElement("nickname");
    nickname.appendChild(doc.createTextNode("mkyong"));
    staff.appendChild(nickname);

    // salary elements
    Element salary = doc.createElement("salary");
    salary.appendChild(doc.createTextNode("100000"));
    staff.appendChild(salary);

    // write the content into xml file
    TransformerFactory transformerFactory = TransformerFactory.newInstance();
    Transformer transformer = transformerFactory.newTransformer();
    DOMSource source = new DOMSource(doc);
    StreamResult result = new StreamResult(new File("file.xml"));

    // Output to console for testing
    // StreamResult result = new StreamResult(System.out);

    transformer.transform(source, result);

    System.out.println("File saved!");

  } 
  catch (ParserConfigurationException pce) 
  {
    pce.printStackTrace();
  }
  catch (TransformerException tfe) 
  {
    tfe.printStackTrace();
  }

  /////  read
  try {

        File fXmlFile = new File("c:\\file.xml");
        DocumentBuilderFactory dbFactory = DocumentBuilderFactory.newInstance();
        DocumentBuilder dBuilder = dbFactory.newDocumentBuilder();
        Document doc = dBuilder.parse(fXmlFile);
        doc.getDocumentElement().normalize();

        System.out.println("Root element :" + doc.getDocumentElement().getNodeName());
        NodeList nList = doc.getElementsByTagName("staff");
        System.out.println("-----------------------");

        for (int temp = 0; temp < nList.getLength(); temp++) {

           Node nNode = nList.item(temp);
           if (nNode.getNodeType() == Node.ELEMENT_NODE) {

              Element eElement = (Element) nNode;

              System.out.println("First Name : " + getTagValue("firstname", eElement));
              System.out.println("Last Name : " + getTagValue("lastname", eElement));
              System.out.println("Nick Name : " + getTagValue("nickname", eElement));
              System.out.println("Salary : " + getTagValue("salary", eElement));

           }
        }
      } catch (Exception e) {
        e.printStackTrace();
      }

} 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T17:18:01.633

这个方法需要包含在你的类文件中的某个地方

```
private String getTagValue(String sTag, Element eElement) {
    NodeList nlList = eElement.getElementsByTagName(sTag).item(0)
            .getChildNodes();

    Node nValue = (Node) nlList.item(0);

    return nValue.getNodeValue();
} 
```

# android - 可以指定要缩放的 TextView 文本以适应 TextView 吗？

> ID：10191678
> 
> 赞同：2
> 
> 时间：2012-04-17T12:53:53.207
> 
> 标签：android, textview, android-textattributes

是否可以指定 TextView 的任何属性，以便其文本（字体大小）动态缩放以适应 TextView？（类似于 iPhone 的自动收缩功能。）

如果没有，是否有任何人遇到或想出的好的、简单的解决方案来解决这个问题？（这样它也适用于非英语语言。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T10:43:56.680

在 V4l3ri4 的链接和从那里产生的链接之后，我提出了以下基本解决方案，它不断缩小 TextView 中的文本，直到它在 TextView 中的宽度方向适合：

```
public class FontFitTextView extends TextView
{
  private float maxTextSizePx;

  public FontFitTextView(Context context)
  {
    super(context);
    initialise();
  }

  public FontFitTextView(Context context, AttributeSet attrs)
  {
    super(context, attrs);
    initialise();
  }

  public FontFitTextView(Context context, AttributeSet attrs, int defStyle)
  {
    super(context, attrs, defStyle);
    initialise();
  }

  /** Sets the maximum text size as the text size specified to use for this View.*/
  private void initialise()
  {
    maxTextSizePx = getTextSize(); 
  }

  /** Reduces the font size continually until the specified 'text' fits within the View (i.e. the specified 'viewWidth').*/
  private void refitText(String text, int viewWidth)
  { 
    if (viewWidth > 0)
    {
      TextPaint textPaintClone = new TextPaint();
      textPaintClone.set(getPaint());

      int availableWidth = viewWidth - getPaddingLeft() - getPaddingRight();
      float trySize = maxTextSizePx;

      // note that Paint text size works in px not sp
      textPaintClone.setTextSize(trySize); 

      while (textPaintClone.measureText(text) > availableWidth)
      {
        trySize--;
        textPaintClone.setTextSize(trySize);
      }

      setTextSize(TypedValue.COMPLEX_UNIT_PX, trySize);
    }
  }

  @Override
  protected void onTextChanged(final CharSequence text, final int start, final int lengthBefore, final int lengthAfter)
  {
    super.onTextChanged(text, start, lengthBefore, lengthAfter);

    refitText(text.toString(), getWidth());
  }

  @Override
  protected void onSizeChanged(int w, int h, int oldw, int oldh)
  {
    super.onSizeChanged(w, h, oldw, oldh);

    if (w != oldw)
      refitText(getText().toString(), w);
  }
} 
```

一个示例用法如下：

```
<view
  class="com.mycompany.myapp.views.FontFitTextView"
  android:layout_width="0dp"
  android:layout_height="wrap_content"
  android:layout_weight="1"
  android:singleLine="true" /> 
```

我意识到这个实现可以被优化和扩展，但只是试图展示一个简单的解决方案供您根据需要扩展或修改。

Oh and if you need a Button which shrinks text to fit instead of a TextView, simply use the code exact as above but extend Button instead of TextView.

# sql-server-2008 - 在 SQL Server 中按层次结构 ID 排序

> ID：10191680
> 
> 赞同：1
> 
> 时间：2012-04-17T12:53:57.520
> 
> 标签：sql-server-2008

我在 SQL Server 2008 的表上定义了一个 hierarchyid 列

假设在第一行，hierarchyid 是 '/1/7/1/'

假设在第二行，hierarchyid 是 '/1/10/1/'

如果 I `sort by hierarchyid ASC`，那么我将看到第二行，然后是第一行。（排序将按String排序，并且'10'<'7'）

但是我（出于与不同系统的兼容性原因）希望先查看第一行，然后查看第二行（即按 int 排序，并且 7<10）

我已经解决了这个问题，通过定义第二个 hierarchyid 列，然后将其设置为与第一个 hierarchyid 列相同，但用点替换所有内部斜线，然后按此排序。

我只是想知道是否有更优雅的方式。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-07T10:40:13.347

我知道这是一个相当古老的问题，但它是谷歌的第一个结果，所以我想我会添加一个实际的答案，以防其他人遇到这个问题。如果没有看到正在使用的 SQL，很难做到 100%，但我怀疑 OP 将层次结构 ID 作为字符串返回并对其进行排序，而不是对层次结构 id 本身进行排序：

例如..

```
declare @results table (Id int, Hierarchy hierarchyId)

-- :
-- Add your data here
-- :

-- This will not work as it's ordering a string
select Id, Hierarchy.ToString() as SortOrder from @results order by SortOrder

-- This will work as it's ordering the hierarchy id
select Id, Hierarchy.ToString() as SortOrder from @results order by Hierarchy 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T13:06:52.980

您需要隔离两个“/”之间的内容并按其排序。你可以使用这个功能：[http ://www.sqlusa.com/bestpractices2005/nthindex/](http://www.sqlusa.com/bestpractices2005/nthindex/)

获取字符串上的第 n 个索引，所以

```
declare @aux_str varchar(50)
set @aux_str='/1/7/3/'

select dbo.fnNthIndex(@aux_str,'/',2) 
```

返回 3。您必须找出第三个“/”的位置并获取它之间的内容。

不难，但工作量很大

# android - Android片段在几个旋转屏幕后重叠

> ID：10191681
> 
> 赞同：1
> 
> 时间：2012-04-17T12:54:01.730
> 
> 标签：android, android-fragments

我读了一些类似的问题，但我不太明白在我的层次结构中我应该做什么？

我有

```
<fragment
        android:id="@+id/tabs"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_alignParentBottom="true"
        class="com.****.****.ui.TabsFragment" /> 
```

用于屏幕底部的选项卡菜单

和

```
<FrameLayout
        android:id="@+id/details"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:layout_above="@+id/tickerLL"
        android:layout_below="@id/header"
        android:background="@drawable/background" /> 
```

对于其他将创建的片段。

我有 9 个标签菜单，每个人都是一个片段。

一些片段的景观是另一种活动。我把手机转回来，碎片运行良好。但是如果我之后快速旋转，我的片段 Activty、TabsFragment 和其他创建的片段被重新创建并且我的片段重叠。

我在 TabsFragment 中管理我的片段。他们动态地工作，我的抽象片段类，有一个以前的片段和子片段。当我按回时，前一个片段将关闭其子片段并将其归零。

我应该怎么办？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T13:51:36.673

在配置更改期间，Android 会恢复或重新创建旧 Activity 在设置新 Activity 时拥有的所有片段。因此，在使用新的活动实例时，您需要考虑到这一点——不要假设您从零开始。

# java - Java中的KML解析

> ID：10191682
> 
> 赞同：1
> 
> 时间：2012-04-17T12:54:08.527
> 
> 标签：java, android, parsing, kml

谁能帮我一个简单的 java 代码示例，向我展示如何解析 KML 文件这是文件，如果有人想看看它，我知道我应该使用 SAXparser 但我真的不知道如何开始。

[http://montroyal.googlecode.com/files/SUPreview2.kml](http://montroyal.googlecode.com/files/SUPreview2.kml)

谢谢大家

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T13:20:32.550

因为它是一个相当新的东西，所以除了使用 SAXParser 之外没有最好的解决方案。如果您想要更干净的东西，请尝试使用[SimpleXML](http://simple.sourceforge.net/)。请注意，您需要编写每个模型才能使其正常工作。

# javascript - AJAX 调用返回数据但不提示下载

> ID：10191688
> 
> 赞同：0
> 
> 时间：2012-04-17T12:54:35.307
> 
> 标签：javascript, jquery

我有一个 ajax 调用，它成功调用了一个本身可以正常工作的页面。您单击按钮，然后下载 PDF。但是，当我使用相同的请求类型和 url 进行 AJAX 调用时，`data`会返回 ，但不会提示下载。

我的电话：

```
 $("#download-pdf").live('click', function(){
      $.ajax({
        url: $(this).parents('form').attr('action'),
        type: 'POST',
        success: function(data){
          console.log(data);
        }
      });
      return false;
    }); 
```

数据以未解析的 PDF 形式返回。所以我知道信息在那里。它只是不会导致下载。有什么技巧吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-17T12:56:21.423

强制下载的唯一方法是使用“标准”表单提交方法刷新页面。使用 Ajax，您将收到原始输出数据 (PDF)，并且不会弹出保存对话框

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-17T12:57:02.920

使用 AJAX 时无法强制下载。

请阅读：[使用 javascript/ajax/jquery 强制下载 pdf 链接](https://stackoverflow.com/questions/3077242/force-download-a-pdf-link-using-javascript-ajax-jquery)

如果您只是提交表单，那么您可以通过发送适当的标题告诉浏览器下载文件：

```
Response.Clear();
Response.AddHeader("content-disposition", "attachment;filename=file.pdf");

Response.ContentType = "application/pdf";
Response.WriteFile(Server.MapPath(@"~/file.pdf"));

Response.End(); 
```

# c# - 基于流行度的缓存解决方案

> ID：10191691
> 
> 赞同：3
> 
> 时间：2012-04-17T12:54:40.323
> 
> 标签：c#, .net, caching, immutability, popularity

我有一个处理大约 10.000 个不可变对象的 C# 应用程序，每个对象的大小为 50KB - 1MB。该应用程序为每个操作挑选大约 10-100 个对象。选择哪些对象取决于环境和用户选择，但有一些是非常常用的。

将所有对象一直保存在内存中是太多了，但是磁盘访问时间很紧迫。我想使用基于流行度的缓存来减少磁盘活动。缓存将包含最大值。300 个对象。我希望在使用模式期间决定应该缓存哪一个。我可以轻松地为每个对象添加访问计数器。更受欢迎的进入，不太受欢迎的必须离开缓存。有没有一种简单、巧妙的方法来做到这一点，而无需编码我的屁股？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T12:58:40.847

一种现成的解决方案是使用 ASP.NET 缓存的[滑动到期窗口](http://msdn.microsoft.com/en-us/library/cc491414.aspx)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-17T13:04:04.983

那么你可以使用[System.Runtime.Caching](http://msdn.microsoft.com/en-us/library/system.runtime.caching.aspx)。缓存经常使用的对象，如果缓存对象在一段时间后发生变化，您可以指定缓存有效的时间。一旦cahce 无效，您可以在事件处理程序中重建缓存。

确保在重建缓存时使用一些线程同步机制。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-17T13:04:28.467

我会选择[WeakReferences](http://dotnet.dzone.com/news/net-weakreference-gc-knows-bes)：您可以在几分钟内构建一个简单的缓存管理器，然后让 .NET 自己处理实际的内存管理。

如果您需要限制您希望程序使用的内存量，它可能不是最佳解决方案，但除此之外它绝对值得一试。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-17T13:05:10.467

听起来像是 MemCached 的工作！这是一个免费、开源、高性能和灵活的缓存解决方案。您可以在[http://www.memcached.org](http://www.memcached.org)下载它。

要获得广泛的概述，请查看位于[https://en.wikipedia.org/wiki/Memcached](https://en.wikipedia.org/wiki/Memcached)的 Wikipedia 页面。

祝你好运！

# session - 使用 express / redis 进行会话存储时，“会话”未定义

> ID：10191692
> 
> 赞同：21
> 
> 时间：2012-04-17T12:54:41.040
> 
> 标签：session, node.js, redis, express

我正在尝试在我的快速应用程序中使用 redis 进行会话。

我执行以下操作：

```
var express = require('express');
var RedisStore = require('connect-redis')(express);

app.configure('development', function(){     
    app.use(express.session({ secret: "password", 
                            store: new RedisStore({
                                          host: "127.0.0.1",
                                          port: "6379",
                                          db: "mydb"
                                        })  
          })); 
```

稍后，在我的应用程序中，如果我执行以下操作：

```
var whatever = req.session.someProperty; 
```

我得到：

> 无法读取未定义的属性“someProperty”

这表明 req.session 未定义 *（我可以从我的配置部分的 console.log 条目中看到这一点）*

我肯定已经运行了 redis，并且可以看到我的应用程序最初连接到它（使用 redis-cli 监视器）

* * *

## 回答 #1

> 赞同：53
> 
> 时间：2012-04-20T01:43:27.150

除非您按以下顺序使用以下 3 个，否则会话将不起作用：

```
app.use(express.cookieParser());
app.use(express.session());
app.use(app.router); 
```

我不确定路由器是否必须使用会话，但如果将它放在它们之前会破坏它们。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-04-17T13:01:08.853

看起来你失踪了：

```
app.use(express.cookieParser()); 
```

在你`app.use(express.session(...));`打电话之前。

见[这里](http://www.senchalabs.org/connect/session.html "这里")。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2014-03-08T11:06:28.110

有同样的问题，但它是由最新版本的 express 更改引起的。

您现在需要将 express-session 传递给函数 connect-redis 导出以扩展 session.Store：

```
var express = require('express');
var session = require('express-session')
var RedisStore = require('connect-redis')(session); 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2014-04-11T09:34:37.697

Express 3 / Express 4 最近发生了变化。请确认您使用的是版本**4**。

完整的中间件概念发生了变化。您需要手动安装这些中间件。“express-session”是 4.0 中间件之一。

我建议阅读

[http://scotch.io/bar-talk/expressjs-4-0-new-features-and-upgrading-from-3-0](http://scotch.io/bar-talk/expressjs-4-0-new-features-and-upgrading-from-3-0)和[https://github.com/visionmedia/express/wiki/Migrating-from- 3.x 到 4.x](https://github.com/visionmedia/express/wiki/Migrating-from-3.x-to-4.x)

此外，一些用户对[github 存储库](https://github.com/expressjs/session)本身仅命名为“会话”感到困惑，但是

```
npm install express-session 
```

是正确的。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-09-30T21:41:37.400

我有同样的问题。原来redis只是简单的配置到了不同的端口。

# regex - 用于在 Calc 中搜索和替换的正则表达式

> ID：10191694
> 
> 赞同：1
> 
> 时间：2012-04-17T12:54:46.787
> 
> 标签：regex, openoffice-calc

我的数据在 A 列中，从 A1 开始具有以下模式的数据。

```
1.2.3.4:10.abc.something.mydata.somethingelse 
```

该模式将包含一个 IP 地址，后跟端口号和由四个点分隔的单词。我想搜索模式并将每个单元格中的数据替换为“mydata”，即 ip 地址和端口之后的单词，然后是两个点之后。我们如何使用 Open office calc 中的搜索和替换选项正则表达式来做到这一点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T13:13:09.033

搜索 ：`[0-9]+\.[0-9]+\.[0-9]+\.[0-9]+:[0-9]+\.[a-z0-9]+\.[a-z0-9]+\.([a-z0-9]+)\.[a-z0-9]+`

并替换为：`$1`

# php - 单词的 HTML 分页符 - page-break-before：总是不工作

> ID：10191700
> 
> 赞同：1
> 
> 时间：2012-04-17T12:55:16.677
> 
> 标签：php, html, css, ms-word

我为word文档制作了一个HTML并通过`file_put_contents('document.doc', $html_source);`

问题是使用的样式如下：

```
style='page-break-before:always' 
```

什么都不做。

有什么想法或解决方案吗？

这是我正在尝试做的一个例子：http: [//bytes.com/topic/html-css/answers/720863-page-break-html-word-email](http://bytes.com/topic/html-css/answers/720863-page-break-html-word-email)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-06-17T20:28:45.000

只要将其应用于`<br />`元素，Microsoft Word 将仅识别此样式。

```
.pagebreak {
        page-break-before: always;
    } 
```

```
<br class="pagebreak" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-06-15T20:27:51.423

这对我有用：

```
<div class=”WordSection1”&gt;</div> 
```

我正在从 HTML 表格创建一个 word 文档。

# c - GTKSDL - 处理事件

> ID：10191703
> 
> 赞同：2
> 
> 时间：2012-04-17T12:55:27.373
> 
> 标签：c, events, opengl, gtk, sdl

对于 3D 建模项目，我使用 SDL 并包含在 GTK 小部件中（感谢 [GTKSDL]，[http](http://gtksdl.sourceforge.net) ://gtksdl.sourceforge.net “直接链接到 GTKSDL”）。

小部件只是使用 GTK 加载 .obj 文件并使用 OpenGL 对其进行建模，然后将其显示在 SDL 小部件中。到目前为止，一切正常。

当我尝试使用 SDL 事件移动小部件中的对象时，问题就出现了。在 GTK 中集成 SDL 窗口之前，事件可以正常工作。此外，一旦显示 3D 模型，我就无法与 GTK 交互，因为显然 SDL 的事件循环正在等待某些东西，而无论我做什么，它都没有得到它。

我曾想过分叉这两个事件循环，但似乎 GTK 和 SDL 试图同时访问 X 服务器，这会产生多个冲突。我试图删除 SDL 中的无限循环，但它也不起作用。

我在 Devian，我在互联网上搜索了“GTKSdl”的实现，但它似乎已经过时了，有什么想法可以修补它吗？

**更新：**

我已经在使用 SDLPollEvent 和 g_idle add。因此，在我选择了一个文件（使用 GTK）之后，我填充了 struct "t_stage" 并使用 g_idle_add ：

```
g_idle_add((GSourceFunc) &mainloop, stage);

gboolean            mainloop(t_stage *stage)
{
    SDL_Event     evt;

    while (SDL_PollEvent(&evt) != 0)
    {
      if (evt.type == SDL_MOUSEBUTTONDOWN)
       on_mouse_down(stage, &(evt.button));
      else if (evt.type == SDL_MOUSEBUTTONUP)
       on_mouse_up(stage, &(evt.button));
      else if (evt.type == SDL_MOUSEMOTION)
       on_mouse_move(stage, &(evt.motion));
      else if (evt.type == SDL_KEYDOWN)
       handle_key(stage, evt.key.keysym.sym, 1);
      else if (evt.type == SDL_KEYUP)
       handle_key(stage, evt.key.keysym.sym, 0);
    }
   apply_keys(stage);
   draw(stage, 0);
   return (1);
} 
```

但事件仍未收到。有任何想法吗 ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T14:38:06.227

GTKSDL 似乎是 2001 年创建的 alpha 质量小部件，从未维护过（我认为也没有广泛使用）。从那时起 GTK 发生了很大变化，所以我不确定它是否是最适合您的解决方案。

但是，您面临的一个问题是您不能在 GTK 的事件处理程序中使用无限循环（我知道，每个使用消息泵的事件驱动工具包也是如此）。如果你这样做，你只会阻止 GTK 有机会处理未决事件。有关如何解决此问题的更多信息，请查看将[SDL 嵌入 GTK+](https://stackoverflow.com/questions/8145806/embedding-sdl-into-gtk)

**更新：**

[`g_idle_add`](http://developer.gnome.org/glib/stable/glib-The-Main-Event-Loop.html#g-idle-add)允许指定回调和传递给该回调的参数（`gpointer data`参数）。gpointer 只是指向 void 的指针。如果您需要回调以了解多个参数，则可以将结构的地址传递给它以读取/写入。

在您注册的回调中`g_idle_add`，您可以读取 SDL 事件。不要使用[`SDL_WaitEvent`](http://www.libsdl.org/docs/html/sdlwaitevent.html)它，因为它会阻塞直到 SDL 事件发生，使用[`SDL_PollEvent`](http://www.libsdl.org/docs/html/sdlpollevent.html)（检索挂起的事件，如果有）或[`SDL_PeepEvents`](http://www.libsdl.org/docs/html/sdlpeepevents.html)（检索所有挂起的事件，如果有的话）。这些函数是非阻塞的，如果没有事件挂起，它们会返回，而 SDL_WaitEvent 将阻塞，直到收到事件。

然后您可以处理这些事件，确保在您退出空闲处理程序之前不会花费太长时间，否则 GTK UI 将冻结。您可能还喜欢将这些事件转换为 GTK 事件，然后将它们分派给 GTK 以供其处理。

您还有一个[SDL 与 GTK 1.2 集成的旧示例](http://www.libsdl.org/projects/gtk-demo/)。我认为其中大部分都可以与 GTK 2 一起使用，基本思想就在那里，只需要更新代码以替换此后在 GTK 中不推荐使用的符号。

# c# - PostMessage 到隐藏表单第一次不起作用

> ID：10191707
> 
> 赞同：5
> 
> 时间：2012-04-17T12:55:49.473
> 
> 标签：c#, c++, windows-messages

我有一个出现在系统托盘中的 C# WinForms 应用程序。应用程序在加载时隐藏主窗体：

```
private void MainForm_Load(object sender, System.EventArgs e)
{
    Hide();
} 
```

对于同一个主窗体，我重写了 WndProc 以捕获自定义窗口消息（该消息通过`RegisterWindowMessage`Win32 API 调用注册到 Windows）。

```
protected override void WndProc(ref Message m)
{
    if (m.Msg == WM_MYCUSTOM_MESSAGE)
    {
        // Handle custom message
    }
} 
```

从外部 C++ 应用程序中，我使用 PostMessage 广播相同的自定义窗口消息。

```
UINT msg = RegisterWindowMessage(L"WM_MYCUSTOM_MESSAGE");
PostMessage(HWND_BROADCAST, msg, NULL, NULL); 
```

当我在 C# 应用程序首次启动后执行上述代码时，它不会进入 WndProc。显示主窗体后（通过双击系统托盘图标，本质上是一个`Show()`），捕获广播消息工作并在隐藏窗体后继续工作`Hide()`。

`Hide()`谁能解释我为什么在`MainForm_Load`事件处理程序的第一个之后它不起作用？我是否过早隐藏表格？

EDIT1：似乎它与加载时隐藏无关。即使没有最初的隐藏，我的主窗体 WndProc 也只会在隐藏并重新显示后开始接受广播帖子......

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-17T14:22:44.457

在创建了一个小型测试应用程序后，我发现如果设置为while to do， `PostMessage()`to`HWND_BROADCAST`不会到达。`Form.WndProc``Form.ShowInTaskbar``false``SendMessage()``HWND_BROADCAST`

尽管关于向 HWND_BROADCAST 发送或发布消息的 MSDN 注释完全相同。

所以它与表单的隐藏或显示无关，这似乎是 Windows API 的另一个未记录的功能。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-17T13:50:43.723

还有其他事情发生，在表单的 Load 事件处理程序中调用 Hide() 实际上并没有隐藏窗口。用一个小测试 Winforms 应用程序试试看。

如果您实际上没有看到该窗口，那么简单的解释是该窗口没有被创建。这完全解释了为什么没有收到消息。覆盖 OnHandleCreated() 并在其上设置断点以仔细检查此理论。必须调用 Show() 方法来创建本机窗口，显然您的 NotifyIcon 事件处理程序是第一个这样做的。当您调用 Application.Run() 但不传递表单实例时会发生这种情况。

检查[此答案](https://stackoverflow.com/questions/3742709/this-visible-is-not-working-in-windows-forms/3742980#3742980)以确保创建表单但不使其可见。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-17T13:41:33.267

使用广播，消息被发布到系统中的所有顶级窗口，包括禁用或不可见的无主窗口、重叠窗口和弹出窗口。该消息不会发布到子窗口（根据 MSDN）。使用 WinSpy 之类的应用程序确保您的窗口在初始启动和隐藏后立即处于顶级状态。这个[http://blog.paulbetts.org/index.php/2010/07/20/the-case-of-the-disappearing-onload-exception-user-mode-callback-exceptions-in-x64/](http://blog.paulbetts.org/index.php/2010/07/20/the-case-of-the-disappearing-onload-exception-user-mode-callback-exceptions-in-x64/)也可能（或可能不会）提供有关 OnLoad 工作原理的一些见解......似乎它有点复杂。尝试将 MainForm 隐藏在其他地方，而不是 OnLoad 上。

# c# - 在 transactionScope 中运行时的 System.Exception._COMPlusExceptionCode

> ID：10191710
> 
> 赞同：1
> 
> 时间：2012-04-17T12:55:51.913
> 
> 标签：c#, asp.net, ado.net

我正在尝试调用我写的数据库 sp

从 c# transactionScope 中

```
public static void RunInTransaction(Action logic)
{
    var options = new TransactionOptions { IsolationLevel = IsolationLevel.ReadCommitted };
    using (var transaction = new TransactionScope(TransactionScopeOption.RequiresNew, options))
    {
        logic();
        transaction.Complete();
    }
} 
```

`logic`实际上在哪里调用`sp`from `c#`。

我收到以下错误：

> System.Exception._COMPlusExceptionCode

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-04T16:24:06.420

看起来很奇怪，但可能是相关的：如果您有以下代码：

```
private static readonly RegexPattern = "..."; 
```

并且*该模式无效*（我的模式缺少括号），然后`COMPlusExceptionCode`在最初加载包含类时生成 -exceptions。（我管理了这个，我什至没有接触数据库）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-12-10T05:30:20.257

Sql 服务 kapalı。bilgisayar hizmetler bölümünde Sql 服务 > 启动 etmelisiniz

谷歌翻译：Sql 服务已关闭。Sql service> 在计算机服务部分应该启动

# cocoa - 每当打开新邮件时，IMAP 应用程序（使用哑剧）就会崩溃

> ID：10191711
> 
> 赞同：2
> 
> 时间：2012-04-17T12:55:58.300
> 
> 标签：cocoa, imap, pantomime

我能够显示新邮件标题但无法打开新邮件的正文。所以，每次新邮件到来时我都在重建缓存管理器，但是在访问新邮件时应用程序会崩溃。如果我不要在每次收到新邮件时重建缓存，然后本地文件夹中的邮件会增加一倍。这些缓存管理器更改是在**Pantomime 框架**代码中进行的。请建议是否有其他方法可以打开新邮件正文。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-04T06:51:04.907

首先，由于缓存管理器重建，您的应用程序崩溃不是问题，因为对于您的缓存管理器，每封邮件都必须有一个唯一的邮件文件。打开邮件时，您应该使用哑剧的 setMessageInitialized 方法来获取新邮件的正文，然后将该文件附加到本地存储中。

# jquery - jquery replace 函数在 IE 中工作异常

> ID：10191712
> 
> 赞同：1
> 
> 时间：2012-04-17T12:56:00.837
> 
> 标签：jquery, regex, internet-explorer, replace

我有一个文本框（用于价格），我必须在其中验证它只是数字数据。另外，我不能允许前面的数字为零（如 01）。所以我用正则表达式替换方法。用于替换字母：

```
$("#txtPrice").keyup(function(){
    var text=$(this).val();
    $(this).val(text.replace(/[^\d\s\.]/,""));
}); 
```

为了替换前面的零，我使用了

```
$("#txtPrice").keyup(function(){
    var text=$(this).val();
    $(this).val(text.replace(/^0+/, ''));
 }); 
```

它在 Firefox 上运行良好，但在 IE 中它的行为很奇怪。

如果我在数字前面添加一个新数字，它会将新数字添加到数字的末尾。例如，如果我将“56”编辑为“156”，则在末尾添加数字 1，形成“561”。如果尝试将任何数字放在前面，则实际上将其添加到文本字段的末尾。如何解决这种行为？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T14:01:38.943

我相信您所经历的并不是您将 1 放在输入的开头而 IE 在末尾拍打它，而是 IE 实际上并没有让您的光标移向输入的前面。它正在捕获箭头/home键操作并触发keyup，执行两个正则表达式，并替换文本。

您可能需要做的是评估检测到的密钥是什么，并且只有在它与实际字符匹配时才对它进行处理。

[这样](http://jsfiddle.net/tU7vh/2/)的事情是否解决了您的情况？

```
$("#txtPrice").keyup(function(event) {
    // avoid triggering on control characters; FF ignores but IE will execute and possibly confuse
    if (event.which > 40) {
        var text = $(this).val();
        $(this).val(text.replace(/^0+/, ''));
        $(this).val(text.replace(/[^\d\s\.]/,""));
    }
}); 
```

你可能不得不做一些例外`event.which > 40`，我不完全确定你会如何让用户的光标停留在他们刚刚按下一个键的地方，但我认为这对你来说可能是一个足够的解决方案。

**编辑**：我将正则表达式合二为一；请参阅更新[的 jsfiddle](http://jsfiddle.net/tU7vh/4/)。

```
$(this).val(text.replace(/(^0+|[^\d\s\.])/, "")); 
```

**编辑**：如果您想让光标尽可能少地“跳来跳去”，那么当您已经验证该文本匹配时，您可以选择替换非法文本。[这是一个演示](http://jsfiddle.net/tU7vh/6/)。

```
if ($(this).val().match(/(^0+|[^\d\s\.])/)) {
    $(this).val(text.replace(/(^0+|[^\d\s\.])/, ""));
} 
```

您还可以像我在小提琴中所做的那样将正则表达式外推到一个变量中。

# asihttprequest - ASIHTTPRequest 支持的 RestKit 对象映射

> ID：10191714
> 
> 赞同：2
> 
> 时间：2012-04-17T12:56:04.643
> 
> 标签：asihttprequest, restkit

我们必须支持一些使用 ASIHTTPRequest 运行的旧代码，但我们需要 RestKit 提供的对象映射和核心数据支持。有谁知道将这两者“粘合”在一起的任何方式？

我想象使用 ASIHTTPRequest 处理请求，并且有人手动将有效负载转发到 RestKit。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-18T07:04:47.057

好的，所以这毕竟不是太难。这是我为此编写的一个类（没有免责声明，它对我们有用，可能对其他人有用）。您可以将其用作标准 RKObjectLoader 类的直接替代品。

.h 文件

```
#import <RestKit/RestKit.h>
#import "ASIFormDataRequest.h"

@interface ASIHTTPObjectLoader : ASIFormDataRequest <RKObjectMapperDelegate> {
    RKObjectManager* _objectManager;
    RKObjectMapping* _objectMapping;
    RKObjectMappingResult* _result;
    RKObjectMapping* _serializationMapping;
    NSString* _serializationMIMEType;
    NSObject* _sourceObject;
NSObject* _targetObject;
}

@property (nonatomic, retain) RKObjectMapping* objectMapping;
@property (nonatomic, readonly) RKObjectManager* objectManager;
@property (nonatomic, readonly) RKObjectMappingResult* result;
@property (nonatomic, retain) RKObjectMapping* serializationMapping;
@property (nonatomic, retain) NSString* serializationMIMEType;
@property (nonatomic, retain) NSObject* sourceObject;
@property (nonatomic, retain) NSObject* targetObject;

- (void) setDelegate:(id<RKObjectLoaderDelegate>)delegate;
+ (id)loaderWithResourcePath:(NSString*)resourcePath objectManager:   (RKObjectManager*)objectManager delegate:(id<RKObjectLoaderDelegate>)delegate;
- (id)initWithResourcePath:(NSString*)resourcePath objectManager:(RKObjectManager*)objectManager delegate:(id<RKObjectLoaderDelegate>)delegate;             
- (void)handleResponseError;

@end 
```

.m 文件

```
#import "ASIHTTPObjectLoader.h"

@interface ASIFormDataRequest (here)

- (void) reportFailure;
- (void) reportFinished;

@end

@implementation ASIHTTPObjectLoader
@synthesize objectManager = _objectManager;
@synthesize targetObject = _targetObject, objectMapping = _objectMapping;
@synthesize result = _result;
@synthesize serializationMapping = _serializationMapping;
@synthesize serializationMIMEType = _serializationMIMEType;
@synthesize sourceObject = _sourceObject;

- (void) setDelegate:(id<RKObjectLoaderDelegate>)_delegate {
    [super setDelegate: _delegate];
}

+ (id)loaderWithResourcePath:(NSString*)resourcePath objectManager:(RKObjectManager*)objectManager delegate:(id<RKObjectLoaderDelegate>)_delegate {
    return [[[self alloc] initWithResourcePath:resourcePath objectManager:objectManager delegate:_delegate] autorelease];
}

- (id)initWithResourcePath:(NSString*)resourcePath objectManager:(RKObjectManager*)objectManager delegate:(id<RKObjectLoaderDelegate>)_delegate {

    self = [super initWithURL: [objectManager.client URLForResourcePath: resourcePath]];

    if ( self ) {
        self.delegate = _delegate;
        _objectManager = objectManager;
    }

    return self;
}

- (void)dealloc {
    // Weak reference
    _objectManager = nil;

    [_sourceObject release];
    _sourceObject = nil;
    [_targetObject release];
    _targetObject = nil;
    [_objectMapping release];
    _objectMapping = nil;
    [_result release];
    _result = nil;
    [_serializationMIMEType release];
    [_serializationMapping release];

    [super dealloc];
}

- (void) reset {
    [_result release];
    _result = nil;
}

- (void)finalizeLoad:(BOOL)successful error:(NSError*)_error {
    //_isLoading = NO;

    if (successful) {
        //_isLoaded = YES;
        if ([self.delegate respondsToSelector:@selector(objectLoaderDidFinishLoading:)]) {
            [self.delegate performSelectorOnMainThread:@selector(objectLoaderDidFinishLoading:)
                                                                               withObject:self waitUntilDone:YES];            
        }

        [super reportFinished];

        /*
        NSDictionary* userInfo = [NSDictionary dictionaryWithObject:_response 
                                                             forKey:RKRequestDidLoadResponseNotificationUserInfoResponseKey];
        [[NSNotificationCenter defaultCenter] postNotificationName:RKRequestDidLoadResponseNotification 
                                                            object:self 
                                                          userInfo:userInfo];
         */
    } else {
        NSDictionary* _userInfo = [NSDictionary dictionaryWithObject:(_error ? _error : (NSError*)[NSNull null])
                                                             forKey:RKRequestDidFailWithErrorNotificationUserInfoErrorKey];
        [[NSNotificationCenter defaultCenter] postNotificationName:RKRequestDidFailWithErrorNotification
                                                            object:self
                                                          userInfo:_userInfo];
    }
}

// Invoked on the main thread. Inform the delegate.
- (void)informDelegateOfObjectLoadWithResultDictionary:(NSDictionary*)resultDictionary {
    NSAssert([NSThread isMainThread], @"RKObjectLoaderDelegate callbacks must occur on the main thread");

    RKObjectMappingResult* result = [RKObjectMappingResult mappingResultWithDictionary:resultDictionary];

    if ([self.delegate respondsToSelector:@selector(objectLoader:didLoadObjectDictionary:)]) {
        [self.delegate objectLoader: (RKObjectLoader*)self didLoadObjectDictionary:[result asDictionary]];
    }

    if ([self.delegate respondsToSelector:@selector(objectLoader:didLoadObjects:)]) {
        [self.delegate objectLoader: (RKObjectLoader*)self didLoadObjects:[result asCollection]];
    }

    if ([self.delegate respondsToSelector:@selector(objectLoader:didLoadObject:)]) {
        [self.delegate objectLoader: (RKObjectLoader*)self didLoadObject:[result asObject]];
    }

    [self finalizeLoad:YES error:nil];
}

#pragma mark - Subclass Hooks

/**
 Overloaded by ASIHTTPManagedObjectLoader to serialize/deserialize managed objects
 at thread boundaries. 

 @protected
 */
- (void)processMappingResult:(RKObjectMappingResult*)result {
    NSAssert(isSynchronous || ![NSThread isMainThread], @"Mapping result processing should occur on a background thread");
    [self performSelectorOnMainThread:@selector(informDelegateOfObjectLoadWithResultDictionary:) withObject:[result asDictionary] waitUntilDone:YES];
}

#pragma mark - Response Object Mapping

- (RKObjectMappingResult*)mapResponseWithMappingProvider:(RKObjectMappingProvider*)mappingProvider toObject:(id)targetObject error:(NSError**)_error {
    NSString* MIMEType = [[self responseHeaders] objectForKey: @"Content-Type"];
    id<RKParser> parser = [[RKParserRegistry sharedRegistry] parserForMIMEType: MIMEType];
    NSAssert1(parser, @"Cannot perform object load without a parser for MIME Type '%@'", MIMEType);

    // Check that there is actually content in the response body for mapping. It is possible to get back a 200 response
    // with the appropriate MIME Type with no content (such as for a successful PUT or DELETE). Make sure we don't generate an error
    // in these cases
    id bodyAsString = [self responseString];
    if (bodyAsString == nil || [[bodyAsString stringByTrimmingCharactersInSet:[NSCharacterSet whitespaceCharacterSet]] length] == 0) {
        RKLogDebug(@"Mapping attempted on empty response body...");
        if (self.targetObject) {
            return [RKObjectMappingResult mappingResultWithDictionary:[NSDictionary dictionaryWithObject:self.targetObject forKey:@""]];
        }

        return [RKObjectMappingResult mappingResultWithDictionary:[NSDictionary dictionary]];
    }

    id parsedData = [parser objectFromString:bodyAsString error:_error];
    if (parsedData == nil && _error) {
        return nil;
    }

    // Allow the delegate to manipulate the data
    if ([self.delegate respondsToSelector:@selector(objectLoader:willMapData:)]) {
        parsedData = [[parsedData mutableCopy] autorelease];
        [self.delegate objectLoader: (RKObjectLoader*)self willMapData:&parsedData];
    }

    RKObjectMapper* mapper = [RKObjectMapper mapperWithObject:parsedData mappingProvider:mappingProvider];
    mapper.targetObject = targetObject;
    mapper.delegate = self;
    RKObjectMappingResult* result = [mapper performMapping];

    // Log any mapping errors
    if (mapper.errorCount > 0) {
        RKLogError(@"Encountered errors during mapping: %@", [[mapper.errors valueForKey:@"localizedDescription"] componentsJoinedByString:@", "]);
    }

    // The object mapper will return a nil result if mapping failed
    if (nil == result) {
        // TODO: Construct a composite error that wraps up all the other errors. Should probably make it performMapping:&error when we have this?
        if (_error) *_error = [mapper.errors lastObject];
        return nil;
    }

    return result;
}

- (RKObjectMappingResult*)performMapping:(NSError**)_error {
    NSAssert( isSynchronous || ![NSThread isMainThread], @"Mapping should occur on a background thread");

    RKObjectMappingProvider* mappingProvider;
    if (self.objectMapping) {
        NSString* rootKeyPath = self.objectMapping.rootKeyPath ? self.objectMapping.rootKeyPath : @"";
        RKLogDebug(@"Found directly configured object mapping, creating temporary mapping provider for keyPath %@", rootKeyPath);
        mappingProvider = [[RKObjectMappingProvider new] autorelease];        
        [mappingProvider setMapping:self.objectMapping forKeyPath:rootKeyPath];
    } else {
        RKLogDebug(@"No object mapping provider, using mapping provider from parent object manager to perform KVC mapping");
        mappingProvider = self.objectManager.mappingProvider;
    }

    return [self mapResponseWithMappingProvider:mappingProvider toObject:self.targetObject error:_error];
}

- (void)performMappingOnBackgroundThread {
    NSAutoreleasePool* pool = [[NSAutoreleasePool alloc] init];

    NSError* _error = nil;
    _result = [[self performMapping:&_error] retain];
    NSAssert(_result || _error, @"Expected performMapping to return a mapping result or an error.");
    if (self.result) {
        [self processMappingResult:self.result];
    } else if (_error) {
        [self failWithError: _error];
    }

    [pool drain];
}

- (BOOL)canParseMIMEType:(NSString*)MIMEType {
    if ([[RKParserRegistry sharedRegistry] parserForMIMEType: MIMEType]) {
        return YES;
    }

    RKLogWarning(@"Unable to find parser for MIME Type '%@'", MIMEType);
    return NO;
}

- (BOOL)isResponseMappable {
    if ([self responseStatusCode] == 503) {
        [[NSNotificationCenter defaultCenter] postNotificationName:RKServiceDidBecomeUnavailableNotification object:self];
    }

    NSString* MIMEType = [[self responseHeaders] objectForKey: @"Content-Type"];

    if ( error ) {
        [self.delegate objectLoader: (RKObjectLoader*)self didFailWithError: error];

        [self finalizeLoad:NO error: error];

        return NO;
    } else if ([self responseStatusCode] == 204) {
        // The No Content (204) response will never have a message body or a MIME Type. Invoke the delegate with self
        [self informDelegateOfObjectLoadWithResultDictionary:[NSDictionary dictionaryWithObject:self forKey:@""]];
        return NO;
    } else if (NO == [self canParseMIMEType: MIMEType]) {
        // We can't parse the response, it's unmappable regardless of the status code
        RKLogWarning(@"Encountered unexpected response with status code: %ld (MIME Type: %@)", (long) [self responseStatusCode], MIMEType);
        NSError* _error = [NSError errorWithDomain:RKRestKitErrorDomain code:RKObjectLoaderUnexpectedResponseError userInfo:nil];
        if ([self.delegate respondsToSelector:@selector(objectLoaderDidLoadUnexpectedResponse:)]) {
            [self.delegate objectLoaderDidLoadUnexpectedResponse: (RKObjectLoader*)self];
        } else {            
            [self.delegate objectLoader: (RKObjectLoader*)self didFailWithError: _error];
        }

        // NOTE: We skip didFailLoadWithError: here so that we don't send the delegate
        // conflicting messages around unexpected response and failure with error
        [self finalizeLoad:NO error:_error];

        return NO;
    } else if (([self responseStatusCode] >= 400 && [self responseStatusCode] < 500) ||
               ([self responseStatusCode] >= 500 && [self responseStatusCode] < 600) ) {
        // This is an error and we can map the MIME Type of the response
        [self handleResponseError];
        return NO;
    }

    return YES;
}

- (void)handleResponseError {
    // Since we are mapping what we know to be an error response, we don't want to map the result back onto our
    // target object
    NSError* _error = nil;
    RKObjectMappingResult* result = [self mapResponseWithMappingProvider:self.objectManager.mappingProvider toObject:nil error:&_error];
    if (result) {
        _error = [result asError];
    } else {
        RKLogError(@"Encountered an error while attempting to map server side errors from payload: %@", [_error localizedDescription]);
    }

    [self.delegate objectLoader: (RKObjectLoader*)self didFailWithError:_error];
    [self finalizeLoad:NO error:_error];    
}

#pragma mark - RKRequest & RKRequestDelegate methods
- (void) reportFailure {
    [self.delegate objectLoader: (RKObjectLoader*)self didFailWithError:error];

    [super reportFailure];
}

- (void)reportFinished {
    NSAssert([NSThread isMainThread], @"RKObjectLoaderDelegate callbacks must occur on the main thread");

    if ([self isResponseMappable]) {
        // Determine if we are synchronous here or not.
        if (isSynchronous) {
            NSError* _error = nil;
            _result = [[self performMapping:&_error] retain];
            if (self.result) {
                [self processMappingResult:self.result];
            } else {
                [self performSelectorInBackground:@selector(failWithError:) withObject:_error];
            }

            [super reportFinished];
        } else {
            [self performSelectorInBackground:@selector(performMappingOnBackgroundThread) withObject:nil];
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-06T06:33:09.047

我在单元测试代码中执行以下操作以确保我的对象映射正常工作

```
 NSDictionary *headers = [NSDictionary dictionaryWithObjectsAndKeys:@"application/json", @"X-RESTKIT-CACHED-MIME-TYPE",
                             @"200", @"X-RESTKIT-CACHED-RESPONSE-CODE",
                             @"application/json; charset=utf-8", @"Content-Type",
                             nil];

    NSURL *url = [[NSURL alloc] initWithString:@""]; //need a url to create a dummy RKRequest
    RKRequest *request = [RKRequest requestWithURL:url];
    [url release];
    //Create a dummy response with the data payload
    RKResponse *response = [[[RKResponse alloc] initWithRequest:request
                                                           body:myData //myData is NSData loaded from my file on disk in this case
                                                        headers:headers] autorelease];
    RKURL *rkURL = [[RKURL alloc] initWithString:@"https://api.twitter.com"];
    RKManagedObjectLoader *loader = [[RKManagedObjectLoader alloc] initWithURL:rkURL 
                                       mappingProvider:self.objectManager.mappingProvider 
                                       objectStore:self.objectManager.objectStore];
    loader.delegate = self;
    loader.objectMapping = self.objectMapping; //I pass the object mapping to use here.
    [loader didFinishLoad:response]; //Given a response and request, Restkit will parse the response and call the usual delegates 
```

您可能也可以做类似的事情来从 ASIHTTPRequest 获取响应数据并将其传递给 RestKit

# javascript - 我需要的JQuery slideDown（）问题

> ID：10191716
> 
> 赞同：0
> 
> 时间：2012-04-17T12:56:12.553
> 
> 标签：javascript, jquery

我正在设计一个涉及slideDown 的网站。

最初我设置了一个如下图所示的模板![SlideDownBefore](../Images/d37374115d52438d0cea6f3692e5e6c3.png)

当我将鼠标悬停在每个黑色块上时，会显示一个ul列表...但是当我悬停时会出现问题...块下面的所有内容都会向下移动（如下图所示）

![下滑后](../Images/2212e6e4ad4fafd1d963a4df8e5b3796.png)

我不能给出绝对的位置，因为上面和下面的所有内容都是浮动的（它们没有固定的高度）。那么，通过将其余内容保留在那里并在文本上显示悬停内容，还可以做些什么来获得 slideDown 呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T13:22:28.650

为了实现你想要的，你应该 slideDown() 一个内部子菜单元素而不是块本身。考虑这个示例标记：

```
​&lt;div class="item" id="mybox">floating box
    <ul class="submenu" style="display: none;">
        <li>Subitem 1</li>
        <li>Subitem 2</li>
        <li>Subitem 3</li>
    </ul>
</div>
<p>More content... Just to illustrate</p>
<p>More content... Just to illustrate</p>​​​​​​ 
```

CSS 将类似于：

```
.​item {
    position: relative; /* to hold absolutely positioned submenu inside */
    background: #2684b7;
    color: #fff;
    padding: 10px;
    float: left;
}

    .item .submenu {
        position: absolute; /* the menu would go on top of everything */
        background: #2684b7;
        width: 100%;
        left: 0;
    }

p {
    clear: both;
} 
```

最后，JavaScript 很简单，只是不要忘记对动画进行防弹：​</p>

```
$('#mybox').hover(
    function() { /* mouseover */
        $(this).find('.submenu').slideDown();
    }, 
    function() { /* mouseout */
        $(this).find('.submenu').slideUp();
    }​​​​​
); 
```

这是 jsFiddle 上的示例：http: [//jsfiddle.net/zxrvC/](http://jsfiddle.net/zxrvC/)

祝你好运。​</p>

​</p>

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T13:05:27.783

使用 position: relative 和 z-index:55 创建一个 div，并在该 div 内添加一个具有 position: absolute 的新 div 并给出宽度。希望这会解决。

问候

iijb

# c++ - 哪个 C++ 单元测试框架不需要我将应用程序构建为库？

> ID：10191718
> 
> 赞同：0
> 
> 时间：2012-04-17T12:56:21.050
> 
> 标签：c++, visual-studio, unit-testing

我想为 C++ 类编写一些测试代码。因为该类是应用程序的一部分但不是库的一部分我想知道哪个单元测试框架不需要将项目构建为库来运行单元测试代码？

我尝试了 WinUnit，但似乎只能测试一个库。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T13:00:53.553

*我知道的任何*测试框架都允许这样做。这是构建环境设置的问题，而不是测试框架本身。

维护它的最简单方法是为您的应用程序代码设置一个库。

我从未使用过 WinUnit，但我在 VisualStudio 项目中使用过 CppUnit 和 GoogleTest，其中被测代码不在库中，但在单元测试项目中引用（包含）了 SUT 的实现文件并且它成功了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-17T13:03:33.980

默认情况下，可执行文件不导出符号。您需要启用它，`-Wl,--export-dynamic`然后链接到生成的可执行文件，就好像它是一个库一样。这也意味着您需要对要使用的类等进行适当的导入/导出。

# java - 突出显示 JTextArea 中的一个特定行/行

> ID：10191723
> 
> 赞同：0
> 
> 时间：2012-04-17T12:56:45.600
> 
> 标签：java, swing, highlight, jtextarea

我试图仅突出显示 中的一个特定行`JTextArea`，但我不知道该怎么做。我需要获取特定的行，然后突出显示它。我已经阅读了其他帖子，但我仍然不明白如何将它们组合在一起来解决我的问题......非常感谢帮助。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-17T14:11:08.660

试试这个代码示例，并询问是否有不清楚的地方：

```
import java.awt.*;
import java.awt.event.*;
import javax.swing.*;
import javax.swing.text.*;

public class TextHighlight
{
    private JTextArea tarea;
    private JComboBox cbox;
    private JTextField lineField;
    private String[] colourNames = {"RED", "ORANGE", "CYAN"};

    private Highlighter.HighlightPainter painter;

    private void createAndDisplayGUI()
    {
        final JFrame frame = new JFrame("Text HIGHLIGHT");
        frame.setDefaultCloseOperation(JFrame.DISPOSE_ON_CLOSE);

        JPanel contentPane = new JPanel();
        contentPane.setBorder(BorderFactory.createTitledBorder(
                BorderFactory.createEmptyBorder(5, 5, 5, 5), "Highlighter JTextArea"));

        tarea = new JTextArea(10, 10);
        JScrollPane scrollPane = new JScrollPane(tarea);
        contentPane.add(scrollPane);

        JButton button = new JButton("HIGHLIGHT TEXT");
        button.addActionListener(new ActionListener()
        {
            public void actionPerformed(ActionEvent ae)
            {
                int selection = JOptionPane.showConfirmDialog(
                        frame, getOptionPanel(), "Highlighting Options : ", JOptionPane.OK_CANCEL_OPTION
                                                , JOptionPane.PLAIN_MESSAGE);
                if (selection == JOptionPane.OK_OPTION)                             
                {
                    System.out.println("OK Selected");
                    int lineNumber = Integer.parseInt(lineField.getText().trim());
                    try
                    {
                        int startIndex = tarea.getLineStartOffset(lineNumber);
                        int endIndex = tarea.getLineEndOffset(lineNumber);
                        String colour = (String) cbox.getSelectedItem();

                        if (colour == colourNames[0])
                        {
                            System.out.println("RED Colour");
                            painter = new DefaultHighlighter.DefaultHighlightPainter(Color.RED);
                            tarea.getHighlighter().addHighlight(startIndex, endIndex, painter);
                        }
                        else if (colour == colourNames[1])
                        {
                            System.out.println("ORANGE Colour");
                            painter = new DefaultHighlighter.DefaultHighlightPainter(Color.ORANGE);
                            tarea.getHighlighter().addHighlight(startIndex, endIndex, painter);
                        }
                        else if (colour == colourNames[2])
                        {
                            System.out.println("CYAN Colour");
                            painter = new DefaultHighlighter.DefaultHighlightPainter(Color.CYAN);
                            tarea.getHighlighter().addHighlight(startIndex, endIndex, painter);
                        }
                    }
                    catch(BadLocationException ble)
                    {
                        ble.printStackTrace();
                    }
                }
                else if (selection == JOptionPane.CANCEL_OPTION)
                {
                    System.out.println("CANCEL Selected");
                }
                else if (selection == JOptionPane.CLOSED_OPTION)
                {
                    System.out.println("JOptionPane closed deliberately.");
                }
            }
        });

        frame.add(contentPane, BorderLayout.CENTER);
        frame.add(button, BorderLayout.PAGE_END);

        frame.pack();
        frame.setLocationByPlatform(true);
        frame.setVisible(true);
    }

    private JPanel getOptionPanel()
    {
        JPanel panel = new JPanel();
        panel.setLayout(new GridLayout(0, 2, 5, 5));

        JLabel lineNumberLabel = new JLabel("Enter Line Number : ");
        lineField = new JTextField(10);

        JLabel colourLabel = new JLabel("Select One Colour : ");
        cbox = new JComboBox(colourNames);

        panel.add(lineNumberLabel);
        panel.add(lineField);
        panel.add(colourLabel);
        panel.add(cbox);

        return panel;
    }

    public static void main(String... args)
    {
        SwingUtilities.invokeLater(new Runnable()
        {
            public void run()
            {
                new TextHighlight().createAndDisplayGUI();
            }
        });
    }
} 
```

这是它的输出：

![高亮示例](../Images/b5a4479d28dbefb940348b4c614fc3fa.png)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-06T06:11:28.923

如果您无法选择 TextArea 到 TextField 的原因是按钮单击导致 JTextArea 失去焦点，因此不显示其选择。按钮单击事件用于`btnImport.transferFocusBackward();`解决问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-06-26T17:05:48.287

这样做：这是java的文本区域摆动

```
JTextArea area = new JTextArea(); 
int startIndex = area.getLineStartOffset(2);
int endIndex = area.getLineEndOffset(2);
painter = new DefaultHighlighter.DefaultHighlightPainter(Color.RED);
area.getHighlighter().addHighlight(startIndex, endIndex, painter); 
```

# javascript - 如何跨多个文件跨越javascript命名空间？

> ID：10191724
> 
> 赞同：5
> 
> 时间：2012-04-17T12:56:49.370
> 
> 标签：javascript, unit-testing, javascript-namespaces

我永远忽略了javascript。几年前我开始使用 jQuery，这样我就能过得去。但是当我开始更多地做 TDD 时，我昨天决定真正深入研究 javascript（之后可能还有 coffeescript）。

在我的 ASP.NET Web 窗体应用程序中，我有很多页面，目前这些页面中的大多数都没有大量的 javascript。我正在改变这一点。我正在使用 Jasmine 和 Chutzpah 来创建我的测试。

我的测试按预期通过和失败。但后来我想创建一个命名空间，这样我就不会在全局空间中到处乱窜了。

阅读本文后：http: [//enterprisejquery.com/2010/10/how-good-c-habits-can-encourage-bad-javascript-habits-part-1/](http://enterprisejquery.com/2010/10/how-good-c-habits-can-encourage-bad-javascript-habits-part-1/)

我决定尝试使用文章的自执行匿名函数：第 2 部分（公共和私有）部分中的模式。它似乎具有最大的灵活性，并且似乎很好地封装了事物。

我有一个名为 /Scripts 的文件夹。在该文件夹下是我使用的一些框架，例如 jQuery、jasmine、(twitter) bootstrap 和 modernizr。我还有一个名为 /Site 的子文件夹，我将我的站点代码放在基于页面的多个文件中。（product.js、billing.js 等）

在 /Scripts/Site 下，我向 /Tests（或 Specs）添加了一个子文件夹，其中包含文件（product_test.js、billing_tests.js 等）。

没有命名空间一切都很好。我有一个使用*padLeft*辅助函数创建的 utility.js 文件。然后我在另一个 .js 文件中使用了该全局 padLeft。我的测试都成功了，我很高兴。然后我决定找出命名空间并将我的 Scripts/Site/utility.js 更改为如下所示：

```
(function (myns, $, undefined) {
    //private property
    var isSomething = true;

    //public property
    myns.something = "something";

    //public method
    myns.padLeft = function (str, len, pad) {
        str = Array(len + 1 - str.length).join(pad) + str;

        return str;
    };

    //check to see if myns exists in global space
    //if not, assign it a new Object Literal
}(window.myns= window.myns|| {}, jQuery )); 
```

然后在我的 Scripts/Site/Tests/utility_test.js 我有

```
/// <reference path="../utility.js" />

describe("Namespace myns with public property something", function () {
    it("Should Equal 'something'", function () {
        expect(myns.something).toEqual('something');
    });
}); 
```

通过这个极其简单的测试，我期待 myns.something 以字符串值“something”返回。

它没有。它回来了*undefined*。

**那么，如何跨多个文件使用 javascript 命名空间？**

很抱歉介绍了这么长，但我认为这可能有助于解释我这样做的*原因。*我也提出了所有这些，因为我愿意听取有关此设置如何完全错误或部分错误或其他任何想法的想法。

感谢您花时间阅读这个问题。

**更新：已解决** 谢谢大家的帮助。最大的帮助来自评论者@TJ Crowder。我不知道 jsbin 工具的存在，在确信我将上面的代码放入工具中并且结果正确之后，我知道我的环境中必须有一些东西。

已接受答案中的链接也对我有很大帮助。在看到语法和逻辑是一致的并且可以正常工作后，我只需要确定我的设置有什么问题。我很尴尬地说是我传入了 jQuery，但是在我试图让它工作的测试工具中，我实际上并没有使用 jQuery。这意味着该模块实际上并没有被加载 - 所以 myns 从未设置过。

感谢大家。希望这可能对将来的某人有所帮助。如果您使用上述方法，请确保包含 jQuery 对象。另一个选项是不传入 jQuery 并从参数列表中删除 $。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T13:04:18.543

尝试将您的名称空间声明放在函数调用之外：

```
myns = window.myns || {};
(function(myns, $, undefined) {
    ...
}(myns, jQuery)); 
```

您现有的语法似乎完全有效，但打破这一行可能有助于找出您的变量范围出了什么问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T13:02:37.373

Javascript没有命名空间，我猜你在变量范围方面有问题，这与其他语言类似，你所说的是对象。你可以使用

```
window.myns.something 
```

第一个函数已经将您的对象添加到窗口对象，并且可以从任何地方访问窗口对象。

# javascript - 无法通过 Javascript 加载 Twitter 分享按钮

> ID：10191728
> 
> 赞同：1
> 
> 时间：2012-04-17T12:57:09.313
> 
> 标签：javascript, jquery, dom, twitter

我有一个 div，我想通过 jQuery 将 twitter 分享按钮加载到其中。在页面加载时执行脚本时起作用。但在那之后，当我手动执行此操作时，脚本似乎没有加载。

原始按钮：

```
<a href="https://twitter.com/share" class="twitter-share-button" data-via="givestreamuk">Tweet</a>
<script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0];if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src="//platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");</script> 
```

我尝试通过 jQuery 加载整个按钮（链接加脚本），但没有成功，我刚刚获得了链接。相反，我尝试将脚本注入到 DOM 中，如下所示：

这是我的 JS：

```
var twitter = '<a href="https://twitter.com/share" class="twitter-share-button" data-url="http://customer-url" data-via="givestreamuk" data-hashtags="socialgiving">Tweet</a>';
jQuery('#twitter_share').html(twitter);

var jstext = '!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0];if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src="//platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");';

var script   = document.createElement("script");
script.type  = "text/javascript";
script.text  = jstext;
jQuery('#twitter_share').append(script); 
```

我的 DIV 按钮被放置在：

```
<div id="twitter_share"></div> 
```

这在页面加载时执行脚本时有效，但之后手动执行，只有链接出现在 div 中。

谁能建议我如何手动将此按钮加载到 DIV 中并执行脚本以便生成按钮？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T20:23:21.537

您是否在项目中使用 Turbolinks、PJAX 或其他类似的 gem？如果是这样，请参阅此线程：

```
https://github.com/rails/turbolinks/issues/25 
```

这些解决方案：

```
http://www.blackfishweb.com/blog/asynchronously-loading-twitter-google-facebook-and-linkedin-buttons-and-widgets-ajax-bonus

http://reed.github.com/turbolinks-compatibility/facebook.html 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-07-08T15:19:57.287

如果您以动态方式插入内容，则必须修改 Twitter 脚本，因为只有第一个小部件才能正确加载。

对于新的 Twitter 按钮，带有 ID 的脚本标签`twitter-wjs`已经存在并且`if(!d.getElementById(id))`将返回`false`。

只需添加一条`else`语句以`if`强制 Twitter Widget 对象检测新元素：

```
<script>
!function(d,s,id)
{
    var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';

    if(!d.getElementById(id))
    {
       js=d.createElement(s);
       js.id=id;
       js.src=p+'://platform.twitter.com/widgets.js';
       js.parentNode.insertBefore(js,fjs);
    }
    else
    {
        twttr.widgets.load();
    }
}(document, 'script', 'twitter-wjs');
</script> 
```

来源：[https ://dev.twitter.com/web/javascript/initialization](https://dev.twitter.com/web/javascript/initialization)

# c++ - 将 FIX 消息格式化为 c++ 结构或类

> ID：10191732
> 
> 赞同：0
> 
> 时间：2012-04-17T12:57:30.680
> 
> 标签：c++, xml, quickfix, fix-protocol

说我想以 XML 形式（不是 FIXML！）格式化我收到的修复消息，但有点像规范描述，例如那样

```
<message name="Heartbeat" msgcat="admin" msgtype="0">
    <field name="TestReqID" required="N" /> 
</message> 
```

在我的输出中，我需要一个 c++ 结构或一个名为 HeartbeatMsg 的类，其属性是它自己的字段。

因此，在解析了我的 XML 文件之后，我想将这些消息解析为一个对象，稍后我可以通过打印机或格式化类调用该对象，这些类将我的消息对象写入文件中。

所以我认为我想实例化的这个消息对象也许我可以将它创建为一个继承自 QuickFix 库中消息类的新类，所以我的问题是：

我能做到吗？因为我阅读了 QuickFix 消息，它加载了一些函数，这些函数不仅可以用于描述消息，还可以用于提取它，从流输入中序列化它。

所以虽然我的需求远非如此，但我仍然可以使用这个类进行简单的格式化。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T15:31:25.627

您可以使用 Quickfix 库将您从 XML 中获得的内容解析为 FIX 对象。但它会做两次工作。2个地方什么时候可以做

> 当您接收并处理要使用的 XML 消息时，您可以作为并发作业使用 Quickfix 库创建 FIX 消息。但这肯定会减慢您原始申请的处理速度。
> 
> 当您处理 XML 消息并将其转换为您的代码可以理解的格式时，存储您创建的对象并从中创建 FIX 消息，作为完全独立于原始应用程序的辅助任务。这样，您的原始应用程序将按原样运行，并且不关心 FIX 消息的创建。但是您可能必须将对象复制到可以开始创建 FIX 消息的位置。

两者都需要您的原始 API 和 Quickfix 库的组合。所以在集成它们时要小心。

# python - 如何使用 Requests 库执行 HTTP DELETE 请求

> ID：10191733
> 
> 赞同：38
> 
> 时间：2012-04-17T12:57:30.820
> 
> 标签：python, django, httprequest

我正在使用[requests](http://docs.python-requests.org/en/latest/user/quickstart/#response-status-codes)包与 toggl.com API 进行交互。

我可以执行 GET 和 POST 请求：

```
 payload = {'some':'data'}
    headers = {'content-type': 'application/json'}
    url = "https://www.toggl.com/api/v6/" + data_description + ".json"
    response = requests.post(url, data=json.dumps(payload), headers=headers,auth=HTTPBasicAuth(toggl_token, 'api_token')) 
```

但我似乎找不到执行删除请求的方法。这可能吗？

* * *

## 回答 #1

> 赞同：76
> 
> 时间：2012-04-17T13:02:00.283

使用[requests.delete](http://docs.python-requests.org/en/latest/api/?highlight=delete#requests.delete)而不是`requests.post`

```
payload = {'some':'data'}
headers = {'content-type': 'application/json'}
url = "https://www.toggl.com/api/v6/" + data_description + ".json"

response = requests.delete(
    url, 
    data=json.dumps(payload), 
    headers=headers,
    auth=HTTPBasicAuth(toggl_token, 'api_token')
) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-09-13T07:38:18.013

```
import requests
url = 'url.example.ap'
headers = {
    'content-type': "multipart/form-data; boundary=---- ",
    'X-Auth-Token': ""anytoken"",
    'Cache-Control': "no-cache"
    }
r = requests.delete(url, headers=headers)
n = os.write(sys.stdout.fileno(), r.content)
print r.content == r.text 
```

# c# - 实体对象不能被多个 IEntityChangeTracker 实例引用。在 Entity Framework 4.1 中向实体添加相关对象时

> ID：10191734
> 
> 赞同：184
> 
> 时间：2012-04-17T12:57:30.900
> 
> 标签：c#, asp.net, entity-framework, ado.net, foreign-keys

我正在尝试保存与 City 相关的员工详细信息。但是每次我尝试保存经过验证的联系人时，我都会收到异常**“ADO.Net Entity Framework An entity object cannot be referenced by multiple instances of IEntityChangeTracker”**

我已经阅读了很多帖子，但仍然不知道该怎么做......我的保存按钮点击代码如下所示

```
protected void Button1_Click(object sender, EventArgs e)
    {
        EmployeeService es = new EmployeeService();
        CityService cs = new CityService();

        DateTime dt = new DateTime(2008, 12, 12);
        Payroll.Entities.Employee e1 = new Payroll.Entities.Employee();

        Payroll.Entities.City city1 = cs.SelectCity(Convert.ToInt64(cmbCity.SelectedItem.Value));

        e1.Name = "Archana";
        e1.Title = "aaaa";
        e1.BirthDate = dt;
        e1.Gender = "F";
        e1.HireDate = dt;
        e1.MaritalStatus = "M";
        e1.City = city1;        

        es.AddEmpoyee(e1,city1);
    } 
```

和**员工服务代码**

```
public string AddEmpoyee(Payroll.Entities.Employee e1, Payroll.Entities.City c1)
        {
            Payroll_DAO1 payrollDAO = new Payroll_DAO1();
            payrollDAO.AddToEmployee(e1);  //Here I am getting Error..
            payrollDAO.SaveChanges();
            return "SUCCESS";
        } 
```

* * *

## 回答 #1

> 赞同：253
> 
> 时间：2012-04-17T15:35:29.510

因为这两行...

```
EmployeeService es = new EmployeeService();
CityService cs = new CityService(); 
```

...不要在构造函数中使用参数，我猜你在类中创建了一个上下文。当你加载`city1`...

```
Payroll.Entities.City city1 = cs.SelectCity(...); 
```

...您将 附加`city1`到`CityService`. 稍后您添加 a`city1`作为对 new 的*引用，*`Employee` `e1`并在. 结果，您附加了两个不同的上下文，这就是异常所抱怨的。`e1` *`city1`*`EmployeeService``city1`

您可以通过在服务类之外创建上下文并在两个服务中注入和使用它来解决此问题：

```
EmployeeService es = new EmployeeService(context);
CityService cs = new CityService(context); // same context instance 
```

您的服务类看起来有点像只负责单一实体类型的存储库。在这种情况下，当您为服务使用单独的上下文时，一旦涉及实体之间的关系，您总是会遇到麻烦。

您还可以创建一个服务，该服务负责一组密切相关的实体，例如`EmployeeCityService`（具有单个上下文），并将您`Button1_Click`方法中的整个操作委托给该服务的方法。

* * *

## 回答 #2

> 赞同：32
> 
> 时间：2015-01-09T12:32:29.477

重现的步骤可以简化为：

```
var contextOne = new EntityContext();
var contextTwo = new EntityContext();

var user = contextOne.Users.FirstOrDefault();

var group = new Group();
group.User = user;

contextTwo.Groups.Add(group);
contextTwo.SaveChanges(); 
```

没有错误的代码：

```
var context = new EntityContext();

var user = context.Users.FirstOrDefault();

var group = new Group();
group.User = user; // Be careful when you set entity properties. 
// Be sure that all objects came from the same context

context.Groups.Add(group);
context.SaveChanges(); 
```

只用一个`EntityContext`就可以解决这个问题。有关其他解决方案，请参阅其他答案。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2014-11-09T02:57:37.910

这是一个旧线程，但我更喜欢的另一个解决方案是更新 cityId 而不是将洞模型 City 分配给 Employee... 这样做 Employee 应该如下所示：

```
public class Employee{
    ...
    public int? CityId; //The ? is for allow City nullable
    public virtual City City;
} 
```

然后分配就足够了：

```
e1.CityId=city1.ID; 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2015-02-13T11:57:39.520

除了注入和更糟糕的 Singleton，您可以在 Add 之前调用**Detach方法。**

实体框架 6：`((IObjectContextAdapter)cs).ObjectContext.Detach(city1);`

实体框架 4：`cs.Detach(city1);`

还有另一种方法，以防您不需要第一个 DBContext 对象。只需**使用**关键字包装它：

```
Payroll.Entities.City city1;
using (CityService cs = new CityService())
{
  city1 = cs.SelectCity(Convert.ToInt64(cmbCity.SelectedItem.Value));
} 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2012-12-20T17:26:24.643

我遇到了同样的问题，但我对@Slauma 解决方案的问题（尽管在某些情况下很好）是它建议我将上下文传递到服务中，这意味着上下文可以从我的控制器中获得。它还强制我的控制器和服务层之间的紧密耦合。

我正在使用依赖注入将服务/存储库层注入控制器，因此无法从控制器访问上下文。

我的解决方案是让服务/存储库层使用相同的上下文实例——单例。

**上下文单例类：**

参考： http: [//msdn.microsoft.com/en-us/library/ff650316.aspx](http://msdn.microsoft.com/en-us/library/ff650316.aspx)
和[http://csharpindepth.com/Articles/General/Singleton.aspx](http://csharpindepth.com/Articles/General/Singleton.aspx)

```
public sealed class MyModelDbContextSingleton
{
  private static readonly MyModelDbContext instance = new MyModelDbContext();

  static MyModelDbContextSingleton() { }

  private MyModelDbContextSingleton() { }

  public static MyModelDbContext Instance
  {
    get
    {
      return instance;
    }
  }
} 
```

**存储库类：**

```
public class ProjectRepository : IProjectRepository
{
  MyModelDbContext context = MyModelDbContextSingleton.Instance;
  [...] 
```

确实存在其他解决方案，例如将上下文实例化一次并将其传递给服务/存储库层的构造函数，或者我读到的另一个正在实现工作单元模式的解决方案。我敢肯定还有更多...

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2015-03-02T02:40:10.687

就我而言，我使用的是 ASP.NET Identity Framework。我使用内置`UserManager.FindByNameAsync`方法来检索`ApplicationUser`实体。然后，我尝试在不同`DbContext`. 这导致了您最初看到的异常。

我通过`ApplicationUser`仅使用`Id`from`UserManager`方法创建一个新实体并引用该新实体来解决此问题。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2014-06-17T21:19:34.453

我有同样的问题，我可以解决创建一个我试图更新的对象的新实例。然后我将该对象传递给我的存储库。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2018-09-28T15:20:43.877

`IEntityChangeTracker`在这种情况下，错误非常明显：Entity Framework 无法使用`DbContext`. 解决方案是：使用一个实例`DbContext`；通过单个存储库访问所有需要的实体（取决于 的一个实例`DbContext`）；或关闭对通过存储库访问的所有实体的跟踪，而不是抛出此特定异常的实体。

在 .Net Core Web API 中遵循控制模式反转时，我经常发现我的控制器具有依赖关系，例如：

```
private readonly IMyEntityRepository myEntityRepo; // depends on MyDbContext
private readonly IFooRepository fooRepo; // depends on MyDbContext
private readonly IBarRepository barRepo; // depends on MyDbContext
public MyController(
    IMyEntityRepository myEntityRepo, 
    IFooRepository fooRepo, 
    IBarRepository barRepo)
{
    this.fooRepo = fooRepo;
    this.barRepo = barRepo;
    this.myEntityRepo = myEntityRepo;
} 
```

和用法一样

```
...
myEntity.Foo = await this.fooRepository.GetFoos().SingleOrDefaultAsync(f => f.Id == model.FooId);
if (model.BarId.HasValue)
{
    myEntity.Foo.Bar = await this.barRepository.GetBars().SingleOrDefaultAsync(b => b.Id == model.BarId.Value);
}

...
await this.myEntityRepo.UpdateAsync(myEntity); // this throws an error! 
```

由于所有三个存储库都依赖于`DbContext`每个请求的不同实例，因此我有两个选项可以避免该问题并维护单独的存储库：更改 DbContext 的注入以每次调用仅创建一次新实例：

```
// services.AddTransient<DbContext, MyDbContext>(); <- one instance per ctor. bad
services.AddScoped<DbContext, MyDbContext>(); // <- one instance per call. good! 
```

或者，如果子实体以只读方式使用，则关闭对该实例的跟踪：

```
myEntity.Foo.Bar = await this.barRepo.GetBars().AsNoTracking().SingleOrDefault(b => b.Id == model.BarId); 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2019-11-27T01:24:29.177

在为项目（ASP.Net MVC EF6.2）实施 IoC 后，我遇到了同样的问题。

通常我会在控制器的构造函数中初始化一个数据上下文，并使用相同的上下文来初始化我的所有存储库。

然而，使用 IoC 实例化存储库导致它们都具有单独的上下文，我开始收到此错误。

现在我已经回到只是用一个共同的上下文来更新存储库，同时我想一个更好的方法。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2020-06-13T13:25:23.047

这就是我遇到这个问题的方式。首先，我需要保存我`Order`需要引用我的`ApplicationUser`表的内容：

```
 ApplicationUser user = new ApplicationUser();
  user = UserManager.FindById(User.Identity.GetUserId());

  Order entOrder = new Order();
  entOrder.ApplicationUser = user; //I need this user before saving to my database using EF 
```

问题是我正在初始化一个新的 ApplicationDbContext 来保存我的新`Order`实体：

```
 ApplicationDbContext db = new ApplicationDbContext();
 db.Entry(entOrder).State = EntityState.Added;
 db.SaveChanges(); 
```

所以为了解决问题，我使用了相同的ApplicationDbContext，而不是使用ASP.NET MVC内置的UserManager。

而不是这个：

```
user = UserManager.FindById(User.Identity.GetUserId()); 
```

我使用了现有的 ApplicationDbContext 实例：

```
//db instance here is the same instance as my db on my code above.
user = db.Users.Find(User.Identity.GetUserId()); 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2017-07-24T01:54:56.547

在整个事务中使用相同的 DBContext 对象。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2021-07-06T16:58:44.997

对于我的场景，我们有一个解决方案，其中包含多个引用相同上下文的应用程序。我必须更新 unity.config 文件，将生命周期类型添加到上下文中。

```
<lifetime type="PerResolveLifetimeManager" /> 
```

* * *

## 回答 #13

> 赞同：-3
> 
> 时间：2015-09-09T11:50:51.320

错误来源：

```
ApplicationUser user = await UserManager.FindByIdAsync(User.Identity.Name);
ApplicationDbContext db = new ApplicationDbContent();
db.Users.Uploads.Add(new MyUpload{FileName="newfile.png"});
await db.SavechangesAsync();/ZZZZZZZ 
```

希望有人节省一些宝贵的时间

# python - 如何在模板内部检查字典的大小是否大于 0 以及是否大于 0 以获取第一个键值对？

> ID：10191735
> 
> 赞同：0
> 
> 时间：2012-04-17T12:57:33.723
> 
> 标签：python, django, django-templates

我已经从视图字典传递到模板页面。如何在模板内部检查字典的大小是否大于 0 以及是否大于 0 以获取第一个键值对？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-17T13:01:30.517

```
{% if some_dict %}
    Some (k, v) - {{ some_dict.items.0 }}
{% endif %} 
```

请注意，Python dicts 是无序的，因此没有“第一个”kv 对。

你确定模板是这个逻辑的好地方吗？我不是。

# jquery - 使用 CSS 和 jQuery 对组中的单选按钮进行样式化

> ID：10191737
> 
> 赞同：0
> 
> 时间：2012-04-17T12:57:47.360
> 
> 标签：jquery, jquery-selectors

我有一个包含许多单选按钮组的表单，如下所示：

```
<form blah-blah-blah>
    <input type="radio" id="id1_1" name="nam1" value="" class="rad">
      <label for="id1_1" class="kf">label1_1</label>
    <input type="radio" id="id1_2" name="nam1" value="" class="rad">
      <label for="id1_2" class="kf">label1_2</label>
    <input type="radio" id="id1_3" name="nam1" value="" class="rad">
      <label for="id1_3" class="kf">label1_3</label>
    <input type="radio" id="id2_1" name="nam2" value="" class="rad">
      <label for="id2_1" class="kf">label2_1</label>
    <input type="radio" id="id2_2" name="nam2" value="" class="rad">
      <label for="id2_2" class="kf">label2_2</label>
    <input type="radio" id="id2_3" name="nam2" value="" class="rad">
      <label for="id2_3" class="kf">label2_3</label>
</form> 
```

我使用 CSS 来改变收音机的样式。

```
.rad {display:none;}
.kf {padding:2px; background-color:#eaeaea; border:1px solid #dadada; cursor:pointer;}
.kf:hover, .sel {background-color:#3a608e; color:#fff;} 
```

最后，我使用 jQuery 让它工作，但它没有。单击标签即可更改电台。

```
 $(document).ready(function(){
        $(".rad").change(function(){
            if($(this).is(':checked')){      
                $(this).next("label").addClass("sel");
            }else{
                $(this).next("label").removeClass("sel");
            };
        });
    }); 
```

如果选中收音机，标签必须改变颜色。如果收音机丢失“已选中”状态标签，则必须将颜色更改为“未选中”。

怎么了（别忘了几组收音机）？

编辑更新：我将这两个答案结合到最优雅的解决方案中=）

```
$(document).ready(function(){
    $(".rad").change(function(){
        var chk_name = $(this).attr("name");
        if($(this).is(':checked')){
            $(this).parents().find('input[name="'+chk_name+'"]').each(function(){
                $(this).next('label').removeClass('sel');
            });
            $(this).next("label").addClass("sel");
        };
    });
}); 
```

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T13:15:22.460

以下应该工作

```
 $(document).ready(function(){
 var $chk=null;
    $(".rad").change(function(e){
        if($(this).is(':checked')){
            if($chk) $chk.next("label").removeClass("sel");
            $(this).next("label").addClass("sel");
            $chk=$(this);
        }else{
            $(this).next("label").removeClass("sel");
        };
    });
});​ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-17T13:25:15.620

试试这个：

```
$(document).ready(function(){
    $(".kf").click(function() {
        var chk = $(this).prev("input");
        var chk_name = $(chk).attr("name");
        if (!$(chk).is(':checked')) {
            $(this).parent().find('input[name="' + chk_name + '"]').each(function () {
                $(this).removeAttr("checked");
                $(this).next('label').removeClass('sel');
            });
            $(chk).attr("checked", "checked");
            $(this).addClass('sel');
        } else {
            $(chk).removeAttr("checked");
            $(this).removeClass('sel');
        }
    });
}); 
```

[这里](http://jsfiddle.net/7PTep/12/)是一个工作示例

# objective-c - 如何防止您的 Cydia 调整被破解？

> ID：10191738
> 
> 赞同：2
> 
> 时间：2012-04-17T12:57:50.010
> 
> 标签：objective-c, ios, cydia, piracy, anti-piracy

我正在做一个新的 Cydia 调整，它会得到报酬的！我不希望它被破解/盗版/重新分发的问题。我可以在我的调整中使用任何脚本吗？

几个例子：

1.  一个脚本，可以安全地向您发送日志，以了解用户是购买了它还是破解了它。

2.  将在数据库中检查您的付款的脚本，如果存在，则将在设备上激活调整，如果不存在，则禁用调整。

3.  带有 UIAlertView 的脚本检查您是否从 Cydia Store 购买了该软件包，它将激活调整，否则它将打开一个带有 UIAlertView 的弹出窗口，告诉您“您以非法方式获得了这个软件包，Blah Blah Blah..”然后当您单击“确定”按钮时，它将带您进入安全模式，直到您卸载调整或直到您从安全模式购买它。（最重要的一个）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T23:37:41.107

你不能真正保护软件不被破解。越来越强大的 DRM（通常对合法用户来说更烦人）和破解者之间的竞赛始终是一场竞赛，以看到挑战并为乐趣（或成名，或两者兼而有之）进行破解。

我的建议是，与其花大量时间提出 DRM 方案然后实施和测试，不如将时间花在产品的功能上并更彻底地测试它。如果您的产品质量好且价格合理，人们就会购买它。当然，有些人会盗版，这是不可避免的，但你会因为你的工作而获得回报。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-25T20:47:09.660

您可以在函数的不同位置在您的调整中放置一个 MD5 或 SHA1 检查，以确保如果他们修改您的调整，它不会匹配。此外，您可以在经过某种验证后远程下载它，而不是将您的调整打包在 deb 文件中。

前任：

Example.tweak

-/var/root/downloadscript（可以是任何路径）（也可以使用它，这样他们就不能只提取有问题的文件并安装它）

-DEBIAN/control（deb 的配置文件）

-PostInstall（发布 deb 安装脚本）[https://wiki.ubuntu.com/PackagingGuide/Basic#postinst_and_prerm](https://wiki.ubuntu.com/PackagingGuide/Basic#postinst_and_prerm)

从 cydia 下载 Example.tweak

使用 'postinst' 执行 /var/root/downloadscript 您可以使用 /usr/bin/deviceinfo -s 打印出序列号并使用 $POST 到您的服务器发送所述序列号并下载某种许可证，在许可证中，您可以包含 UDID、mac 地址以及一些其他检查，这些检查将通过您的调整进行检查。

# c++ - 仅使用 qt creator 作为编辑器：是否需要 qt 库

> ID：10191739
> 
> 赞同：1
> 
> 时间：2012-04-17T12:57:50.137
> 
> 标签：c++, qt, editor

我想使用 qt creator，仅作为编辑器，它执行代码完成和查找声明等。我不想用它来构建等。有没有办法，我可以规避对 qt 库的需要？我正在使用服务器，我的文件空间有限。此外，如果没有 qt 库，它甚至不允许创建项目。当我尝试安装 qt-libraries 时，它配置得很好，但是在 make 上会出错。

那么，你能推荐一个替代方案吗？谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-17T13:00:34.017

不，您需要 Qt 库，因为编辑器是用 Qt 编码的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-08-28T10:40:01.587

实际上 - 至少在 Windows 下 - 你可以。您只需要取消选择所有 Qt 库版本并只选择编辑器。如果您想在 Windows 上使用调试器，还请选中 CDB 支持复选框。

我已经忘记了它是如何与 Linux 安装程序一起工作的，但我想这同样适用于那里，当然除了 CDB 调试器，它在 Linux 上不可用。相反，您应该能够从 GDB 和其他一些替代方案中进行选择，尽管它可能不在安装期间。

一旦你安装了它并准备建立一个新的“Plain C++”项目，你显然不能在创建一个新工具包时选择一个 Qt 版本。如果你盲目地选择了一个已经存在的工具包，Qt Creator 可能会尝试为你的 vanilla C++ 项目使用 Qt 安装。而不是这样做，您应该单击其中一个现有套件上的“管理...”按钮并添加一个新的自定义套件。在这里，您可以将“Qt 版本”选项设置为“无”。其余的应根据您的需要设置。

# iphone - 将对象存储到 NSMutableArray

> ID：10191740
> 
> 赞同：0
> 
> 时间：2012-04-17T12:57:51.033
> 
> 标签：iphone, objective-c, ios, nsmutablearray, nsarray

请纠正我，我错了（我是初学者）我想将一个类对象存储到 NSArray 中。例如：

```
MySimpleClass *mscObj = [[MySimpleClass alloc] initWithSomething:@"something"];
NSMutableArray *myarr = [[NSMutableArray alloc] init];
[myarr addObject:mscObj];
mscObj = @"somethingelse"; 
```

然后我的 myarr 索引 0 从 @"something" 更改为 @"somethingelse"。为什么？我可以仅将副本存储到数组吗？

编辑：在 MySimpleClass 中：

```
#import <Foundation/Foundation.h>

@interface MySimpleClass : NSObject {
}

@property (strong,nonatomic) NSString *objectName;
@property (strong,nonatomic) NSString *objectTarget;

-(void)addName:(NSString*)name;
-(void)addTarget:(NSString*)target;

@end 
```

.m 文件

```
#import "MySimpleClass.h"

@implementation MySimpleClass

@synthesize objectName;
@synthesize objectTarget;

-(void)addName:(NSString*)name{
    self.objectName = name;
}

-(void)addTarget:(NSString*)target{
    self.objectTarget = target;
}

-(void)flushAll {
    self.objectTarget = nil;
    self.objectName = nil;
}

@end 
```

然后在其他班级我有：

```
 MySimpleClass *mscObj = [[MySimpleClass alloc] initWithSomething:@"something"];

 [myarr addObject:[mscObj copy]];

        int testunit = [myarr count];
        for(int i=0;i<testunit;i++) {
            MySimpleClass *myelement = [myarr objectAtIndex:i];
            NSLog(@"%@ : %@",myelement.objectName,myelement.objectTarget);
        } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-17T13:10:29.920

鉴于您发布的代码，数组中的第一个对象（索引 0）不会因为第四行而改变，`mscObj = @"something else";`. 该行改变了指针`mscObj`本身的值，因此它将指向一个完全不同的对象。如果数组中的对象发生变化，我相信您使用的实际代码与您发布的内容不太匹配——请检查一下。

但是，如果您使用`mscObj`指针更改它指向的对象的*属性*，那么您将更改数组中的对象：

```
mscObj.something = @"somethingelse"; 
```

在这里，您正在更改所引用对象的`something` *属性*`mscObj`，但您并没有更改`mscObj`. 这*将*改变数组中对象的内容，因为它`mscObj`指向的是同一个对象。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-17T13:00:41.463

尝试：

```
[myarr addObject:[[mscObj copy] autorelease]]; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-17T13:07:04.383

当你这样做时

```
[myarr addObject:mscObj]; 
```

myarr 保留对 mscObj 的引用。因此，任何时候 mscObj 更改 myarr 都会反映该更改。

当你这样做时

```
[myarr addObject:[mscObj copy]]; // I've left the autorelease out for simplicity 
```

myarr 保留对 mscObj 新副本的引用。然后更新 mscObj 时， myarr 不会反映更改，因为它的引用指向完全不同的对象。

编辑

为了复制工作你的类** MySimpleClass** 需要实现NSCopying。请参阅此[SO](https://stackoverflow.com/questions/1459598/how-to-copy-an-object-in-objective-c)答案以获取帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-17T13:01:53.553

这是因为指针。您在 index:0 处的对象仍然在内存中的同一位置。它总是会改变。

添加数组后尝试重新释放 mscObj 并使用 @"somethingelse" 创建一个新的 MySimpleClass 对象

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-17T13:03:04.637

mscObj 是一个引用，数组存储的是引用。因此，如果您从容器外部操作对象，则引用会反映更改。考虑参考差异的按价值。

# asp.net - asp.net C#中的参数化顶部子句查询

> ID：10191741
> 
> 赞同：0
> 
> 时间：2012-04-17T12:57:51.190
> 
> 标签：asp.net, sql, c#-4.0, ado.net, parameterized-query

我想在 C# 中使用顶部子句查询

```
objConnection = new SqlConnection(ConfigurationManager.AppSettings["connectionstring"].ToString());
            objConnection.Open();
            objCommand = new SqlCommand("SELECT TOP (@perpage) * FROM user_master", objConnection);
            objCommand.Parameters.AddWithValue("@perpage",objusmspass.strperpage);
            objReader = objCommand.ExecuteReader(); 
```

我正在获取对象引用未设置为行中的对象实例

```
objReader = objCommand.ExecuteReader(); 
```

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T13:09:46.487

检查您的自定义对象 objusmspass 及其属性是否为空，使用 try catch 块查看它是什么类型的异常（sqlException 或其他）

# internet-explorer - JS 滚动事件 - Windows Mobile IE

> ID：10191745
> 
> 赞同：0
> 
> 时间：2012-04-17T12:57:56.687
> 
> 标签：internet-explorer, windows-mobile, onscroll

我正在尝试检测 Windows Mobile IE 6 上的滚动事件 但是，Mobile IE 6 似乎不支持任何类型的滚动事件。我在这里缺少什么吗？这是一些示例代码：

```
$(window).scroll(function(){
      alert('test');
  }); 
```

有什么解决方法吗？看来我将不得不做一个计时器来检查 scrollTop 值的变化。

**编辑** MSIE 6.0 Windows NT 5.1；视窗电话 6.5

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T19:06:29.513

这似乎是不可能的。我确实使用检查 scrollTop 变量更改的 javascript 间隔实现了一种解决方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-11-30T09:18:22.293

移动浏览器不支持“真实”滚动事件。他们将在停止滚动后触发一次“滚动”事件。所以当元素滚动时你不能做任何事情。您可以使用计时器来检查scrollTop，但我的建议是使用像'iscroll' 这样的库来处理'scroll' 事件。 [在 gitHub 中滚动](https://github.com/cubiq/iscroll)

# sql - 递归选择？

> ID：10191746
> 
> 赞同：2
> 
> 时间：2012-04-17T12:58:11.103
> 
> 标签：sql, postgresql

我有以下表结构：

![在此处输入图像描述](../Images/6d1d1f20e7bf768af143dbd47c9f606f.png)

所以每个论坛帖子都有一个父母，他也有一个父母（除了根帖子）等。我需要的是获得一个论坛帖子的孩子总数，包括他的孩子的孩子，孙子的孩子等等。

现在我有一个简单的选择，它返回直接的孩子：

```
select count(*) as child_count 
from forumposts 
where parent_forum_post_id = $criteria.fid 
```

我什至不确定这是否可以通过 sql 实现，但我是 SQL 的初学者，所以我想也许有人可以给出一些想法。

任何帮助表示赞赏。谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-17T13:25:26.193

这应该这样做：

```
with recursive all_posts (id, parentid, root_id) as 
(
  select t1.id, 
         t1.parent_forum_post_id as parentid, 
         t1.id as root_id
  from forumposts t1
  where t1.parent_forum_post_id is null

  union all

  select c1.id, 
         c1.parent_forum_post_id as parentid,
         p.root_id
  from forumposts c1
    join all_posts p on p.id = c1.parent_forum_post_id
)
select root_id, count(*)
from all_posts
order by root_id; 
```

您可以通过修改条件来更改“起点” `where t1.parent_forum_post_id is null`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-17T13:07:37.173

您是否尝试过[使用公用表表达式的递归查询](http://msdn.microsoft.com/en-us/library/ms186243%28v=sql.100%29.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-21T10:35:26.610

```
WITH RecursiveCte AS
(
SELECT 1 AS LEVEL,
       H1.intUserId,
       H1.intReportsTo,
       H1.strUserName
FROM   mstUsers H1
WHERE  id = @intUserId
UNION ALL
SELECT RCTE.level + 1 AS LEVEL,
       H2.intUserId,
       H2.intReportsTo,
       H2.strUserName
FROM   mstUsers H2
       INNER JOIN RecursiveCte RCTE
            ON  H2.intReportsTo = RCTE.
)
SELECT intUserId,strUserName,LEVEL FROM RecursiveCte 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-17T13:09:45.100

在 Postgresql 中是[WITH RECURSIVE](http://www.postgresql.org/docs/9.1/static/queries-with.html)

# python - python中列表的奇怪行为

> ID：10191749
> 
> 赞同：2
> 
> 时间：2012-04-17T12:58:15.987
> 
> 标签：python

> **可能重复：**
> [Python 列表问题](https://stackoverflow.com/questions/1959744/python-list-problem)

我不理解 python 中列表的行为：

```
>>> a1 = [[0,0],[0,0]]
>>> a2 = [[0]*2]*2
>>> a1
[[0, 0], [0, 0]]
>>> a2
[[0, 0], [0, 0]]
>>> a1[0][0] = 1
>>> a2[0][0] = 1
>>> a1
[[1, 0], [0, 0]]
>>> a2
[[1, 0], [1, 0]] 
```

为什么一个元素的分配会影响另一个元素？感谢您的回答！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-17T13:00:06.487

当您将列表相乘时，它会复制对列表的引用，但不会创建列表的副本。由于列表是可变的，因此当您更改它时，所有对它的引用都会更改它。

在 ASCII 艺术术语中：

```
a1 --- [list1, list2] --- list1 = [0, 0]
                      --- list2 = [0, 0]

a2 --- [list3, list3] --- list3 = [0, 0] 
```

您可以清楚地看到更改 list3 会影响这两个位置。

如果你想在不复制引用的情况下创建可变长度列表，你应该这样做：

```
>>> a2 = [[0]*2 for _ in range(2)]
>>> a2[0][0] = 1
>>> a2
[[1, 0], [0, 0]] 
```

在这里，我们使用[列表推导](https://www.youtube.com/watch?v=t85uBptTDYY)来每次创建新元素，而不是复制对旧元素的引用。在更复杂的情况下，如果您有想要重复的现有可变对象，您可能需要[使用`copy`模块](http://docs.python.org/library/copy.html)。

请注意，`[0]*2`操作仍然可以，因为`int`Python 中的 s 是不可变的，并且无法更改，因此您是否引用了同一个对象并不重要。

# sql - 使用 Service Broker 时出现死锁问题

> ID：10191751
> 
> 赞同：1
> 
> 时间：2012-04-17T12:58:26.690
> 
> 标签：sql, sql-server, service-broker

使用 Service Broker 时出现死锁问题

我有一个要求，我必须创建多个更新并插入到一组表中。
为此，将调用一个主存储过程，该过程将
根据接收到的一组数据在嵌套事务中调用多个存储过程以进行处理。一个一个地调用主过程很慢，这就是我们使用Service Broker的原因。
在主存储过程中，它将调用几个存储过程，这些过程将记录插入 3 个表并更新其他 3 个表。
所涉及的所有表都已编入索引。我为此使用 Service Broker，但面临死锁情况。每个 SP 调用将始终处理唯一的记录。

死锁图的详细信息

```
<Column name="TextData" id="1">
<deadlock-list> 
<deadlock victim="process387bab0"> 
<process-list> 
<process id="process387bab0" taskpriority="0" logused="50076" waitresource="KEY: 8:72057599133024256 (53975579c7be)" 
waittime="3458" ownerId="1880362" transactionname="ACTIVATE_ENTITY" lasttranstarted="2012-04-16T12:56:06.713" 
XDES="0x3d5cf590" lockMode="U" schedulerid="1" kpid="7036" status="background" spid="21" sbid="0" ecid="0" 
priority="0" trancount="2"> 
<executionStack> <frame procname="unknown" sqlhandle="0x000000000000000000000000000000000000000000000000"> unknown </frame> 
<frame procname="CMS.dbo.IntOnCaseCreationMessageReceive" line="102" stmtstart="6488" stmtend="6594" 
sqlhandle="0x0300080076459b5a8f92150131a000000100000000000000"> EXECUTE [dbo].MasterSP @MessageBody, 1 </frame> 
</executionStack> <inputbuf> </inputbuf> </process> <process id="process8588388" taskpriority="0" logused="64476" 
waitresource="KEY: 8:72057599261540352 (9fea6888fb07)" waittime="1573" ownerId="1879248" 
transactionname="ACTIVATE_ENTITY" lasttranstarted="2012-04-16T12:56:02.140" XDES="0xc313860" 
lockMode="RangeS-S" schedulerid="1" kpid="7372" status="background" spid="20" sbid="0" ecid="0" 
priority="0" trancount="2"> <executionStack> <frame procname="unknown" sqlhandle="0x000000000000000000000000000000000000000000000000"> unknown </frame> 
<frame procname="CMS.dbo.IndividualSPToBeCalled" line="102" stmtstart="6488" stmtend="6594" 
sqlhandle="0x0300080076459b5a8f92150131a000000100000000000000"> EXECUTE [dbo].IntCreateCases_SB @MessageBody, 1 </frame> </executionStack> 
<inputbuf> </inputbuf> </process> </process-list> <resource-list> <keylock hobtid="72057599133024256" dbid="8" 
objectname="CMS.dbo.TABLE1" indexname="PK_TABLE1" id="lock1e393540" mode="X" associatedObjectId="72057599133024256"> <owner-list> 
<owner id="process8588388" mode="X"/> </owner-list> <waiter-list> <waiter id="process387bab0" mode="U" requestType="wait"/> 
</waiter-list> </keylock> <keylock hobtid="72057599261540352" dbid="8" objectname="CMS.dbo.TABLE2" indexname="IX_TABLE2_ON_ID" 
id="lock42febd80" mode="X" associatedObjectId="72057599261540352"> <owner-list> <owner id="process387bab0" mode="X"/> </owner-list> 
<waiter-list> <waiter id="process8588388" mode="RangeS-S" requestType="wait"/> </waiter-list> </keylock> </resource-list> </deadlock> 
</deadlock-list> </Column> 
```

# asp.net - 哪些 Asp.net 异常可以做什么？

> ID：10191760
> 
> 赞同：3
> 
> 时间：2012-04-17T12:58:53.367
> 
> 标签：asp.net, iis-7, .net-4.0, exception-handling, w3wp

如果我写这段代码

```
 protected void Page_Load(object sender, EventArgs e)
    {
        Page_Load(sender, e);
    } 
```

我得到一个错误（无限递归）：

![在此处输入图像描述](../Images/087dd6d8dca4c2bd528709bbc3aeab67.png)

并且该`w3wp.exe`过程从 终止`task manager`。

**美好的...**

但是，如果我这样做：

```
throw new ApplicationException(); //or SystemException(); 
```

它仅出现在常规异常页面中。（ w3wp.exe 仍在运行）。

问题 ：

*   什么样的异常导致**w3wp.exe**关闭？
*   什么样的异常导致**应用程序池**关闭？

ps *根据我刚才写的，请考虑以下场景：我可以编写一个网页，将我的站点托管在一个站点群中，并且我可以通过创建递归来终止整个w3wp.exe进程..... (其他人也会有麻烦）...*

你能回答我的问题吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T13:09:44.663

这很有可能是大名鼎鼎的[`StackoverflowException`](http://msdn.microsoft.com/en-us/library/system.stackoverflowexception%28v=vs.100%29.aspx)。这是由无限循环引起的，因为您`Page_Load`一次又一次地调用该方法。

来自 MSDN：

> 在 .NET Framework 的早期版本中，您的应用程序可以捕获 StackOverflowException 对象（例如，从无界递归中恢复）。但是，目前不鼓励这种做法，因为需要大量额外的代码才能可靠地捕获堆栈溢出异常并继续执行程序。
> 
> 从 .NET Framework 2.0 版开始，StackOverflowException 对象**无法被 try-catch 块捕获，相应的进程默认终止**。因此，建议用户编写代码来检测和防止堆栈溢出。例如，如果您的应用程序依赖于递归，请使用计数器或状态条件来终止递归循环。请注意，承载公共语言运行时（CLR）的应用程序可以指定CLR卸载发生堆栈溢出异常的应用程序域，并让相应的进程继续进行。有关详细信息，请参阅 ICLRPolicyManager 接口和托管概述。

你可能想看看这个答案：

[https://stackoverflow.com/a/4802309/284240](https://stackoverflow.com/a/4802309/284240)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T13:14:01.253

异常的原因是内存溢出。应用程序如何导致这种情况有很多种方式，没有必要去猜测具体的场景。我应该保护良好的托管服务提供商免受行为不端的应用程序的影响。

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2012-04-17T13:17:15.057

添加到已经可用的答案。你不能关闭整个过程，因为服务器中的每个网站都在单独的 AppDomain 中运行。所以如果你的代码行为不端，只有你的 appdomain 会被杀死。

# android - 根据屏幕分辨率使用适当的布局标记

> ID：10191783
> 
> 赞同：1
> 
> 时间：2012-04-17T13:00:39.503
> 
> 标签：android

我有一个 480x800、1024x600、1280x800 的设计清单。我如何要求 android 根据用户屏幕的分辨率使用精确的标记？据我所知，解决分辨率差异只有抽象手段（hdpi，xdpi）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T13:08:39.343

> 我如何要求 android 根据用户屏幕的分辨率使用精确的标记？

有才华的开发人员不会那样做。有才华的开发人员意识到，只有一部分 Android 设备以上面列出的分辨率运行，就像桌面 Web 浏览器不只以三种窗口大小运行一样。有才华的开发人员与图形设计师合作，为不同的屏幕尺寸（例如 、、`-normal`）提出流畅的布局，这些布局可能会或可能不会以上述分辨率运行。例如，屏幕尺寸从 4" 到 7" 的设备运行在 800x480，屏幕尺寸从 4.5" 到 10.1" 的设备运行在 1280x800（或大约）。`-large``-xlarge`

> 据我所知，解决分辨率差异只有抽象手段（hdpi，xdpi）。

`-hdpi`和`-xhdpi`屏幕分辨率无关。它们用于屏幕密度。密度与分辨率无关，而密度在很大程度上与尺寸无关。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T13:09:59.053

创建基于文件夹的屏幕宽度或高度。例如

res/layout-w480dp, res/layout-w1024dp, res/layout-w1280dp

或者

res/layout-h800dp, res/layout-h600dp

[在此处](http://developer.android.com/guide/topics/resources/providing-resources.html)阅读更多信息，表 2\. 配置限定符名称。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-17T13:10:20.607

Afaik，您可以标记布局文件夹，这是布局所需的最低屏幕分辨率，您可以将 1 设置为 min600，将 1 设置为 min 800。

我认为蜂窝及更高版本支持此标记方案，并且由于这些是平板电脑分辨率，它们无论如何都会有。

看到[这个](http://developer.android.com/guide/topics/resources/providing-resources.html)和[这个](http://developer.android.com/guide/practices/screens_support.html)

# amazon - 查找整数流中的最大元素

> ID：10191785
> 
> 赞同：0
> 
> 时间：2012-04-17T13:00:41.563
> 
> 标签：amazon, puzzle

有一个国王。有一天他在儿子的生日那天，他决定找一个王国里最美丽的女孩嫁给他的儿子。同样，他召唤王国中的所有女孩。所有的女孩都排成一队，一接到电话就出现在国王面前。国王可以留下这个女孩，也可以把它送走。女子一经送出，便不能再召见王。制定一个策略，让国王选择尽可能多的漂亮女孩。不一定是最漂亮的，但他可以选择的最大。

这个问题可以简单地简化为一个更简单的陈述。给定一个整数流，你如何选择最大元素。瞬间你只有一个整数，没有未来的信息可用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T12:13:34.383

见：[秘书问题](http://en.wikipedia.org/wiki/Secretary_problem)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-29T16:23:18.163

我补充一下 Mitchnull 所说的话。您无法确定性地解决此问题。这个问题的解决方案是概率性的。为了证明这一点，只需假设最美丽的可能是最后的。

对于这个问题，我知道的所有解决方案都取决于 N，即女孩的数量，这在许多情况下都是不实际的情况。

这个问题在面试中不是很容易解决的，有一些很好的数学技巧，不是很容易找到的。

# java - Apache Camel：代理代码

> ID：10191789
> 
> 赞同：0
> 
> 时间：2012-04-17T13:01:02.477
> 
> 标签：java, http, proxy, apache-camel

我正在尝试通过我的 java 代码连接到 Google Api，为此我正在使用 apache camel。我必须首先在代理服务器上进行身份验证，然后将请求转发给谷歌。但是，尽管我提供了凭据，但我无法实现身份验证。

```
context.getProperties().put("http.proxyAuthMethod","Digest");
            context.getProperties().put("http.proxyHost", "foo");
            context.getProperties().put("http.proxyPort", "80");
            context.getProperties().put("http.proxyAuthUsername",
                    "bar");
            context.getProperties().put("http.proxyAuthPassword", "foo"); 
```

我也尝试过使用 HTTP Endpoint

```
HttpEndpoint endpoint = (HttpEndpoint) context.getEndpoint("https://foo/bar"); 
Map<String, Object> options = new HashMap<String, Object>();
            options.put("proxyAuthUsername","foo");
            options.put("proxyAuthPassword","bar");
            options.put("proxyAuthMethod","Basic");
            endpoint.configureProperties(options);
            endpoint.setProxyHost("foo");
            endpoint.setProxyPort(80); 
```

我仍然得到 407 响应代码，以及需要从代理进行身份验证的消息。任何人都可以请给我有关此的指示。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-03T06:12:21.333

最后我昨晚得到了代理代码，虽然我不知道为什么上述两种方法不起作用。但是我开始使用 Spring XML 配置文件进行骆驼路由，我可以通过以下配置来实现这一点：

```
<camel:to uri="http://www.google.com/search?proxyAuthMethod=Basic&amp;proxyPort=xx&amp;proxyHost=xxxxxxx&amp;proxyAuthUsername=username&amp;proxyAuthPassword=password" /> 
```

# image - 在 OpenGL 中显示图像数组中的 3D 体积

> ID：10191797
> 
> 赞同：0
> 
> 时间：2012-04-17T13:01:43.210
> 
> 标签：image, opengl, 3d, sequence, volume

我有一个关于使用 OpenGL 显示由一组 2D 灰度图像组成的 3D 体积的问题。

更准确地说，我只想在 x、y 和 z 方向显示体积的中心切片。

我已经成功地做到了这一点，只需在我想要显示的坐标处循环体数据并使用 GL_POINTS 绘制它们，如下所示（显示 z 方向中心切片）：

```
for (x=0; x<sizeX; x++){
  for (y=0; y<sizeY; y++){
    color=volume(x,y,0)
    glBegin(GL_POINTS);
    glColor3f(color,color,color);
    glVertex3f(x,y,0);
    glEnd();
  }
} 
```

我知道体素的真实世界尺寸（以 mm 为单位），所以我正在考虑将体素显示为具有该尺寸的立方体，而不是像我现在正在做的 GL_POINTS。这是一个好方法吗？我在某处读到，将体素显示为立方体通常不是一个好主意。

顺便说一句，该卷包含大约 300 张尺寸为 400x350 像素的图像。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T15:57:30.673

如果您的应用程序要显示密集的体积数据切片，我看不到使用点或体素的好处。对我来说，实现您所要求的最佳方式是使用简单的平面，即您使用图像数据进行纹理映射。你提到了网格数据的维度，如果你想可视化这个事实，你也可以使用盒子而不是平面。与 glPoint 或使用框来表示每个单独的体素相比，使用纹理贴图应该更有效。

网上有很多教程告诉你如何做到这一点（例如[NeHe](http://nehe.gamedev.net/tutorial/texture_mapping/12038/)）。

# c# - 在 FormView 中找不到名为“xxx.yyy”的属性（嵌套属性的双向绑定）

> ID：10191798
> 
> 赞同：7
> 
> 时间：2012-04-17T13:01:47.110
> 
> 标签：c#, asp.net, objectdatasource, formview

当我尝试更新 FormView 时出现此错误

> 在 ObjectDataSource“odsForm”中的 DataObjectTypeName 属性指定的类型上找不到名为“MainContact.FirstName”的属性。

我认为这是因为我在 EditTemplate 中使用了这样的文本框

```
<asp:TextBox Text='<%# Bind("MainContact.FirstName") %>' ID="txtFirstName" runat="server" /> 
```

它在文本框中显示正确的文本，但显然它在更新时不起作用。

这是 FormView 的数据源

```
<asp:ObjectDataSource ID="odsForm" runat="server" DataObjectTypeName="Helpers.BusinessObjects.EntryItem"
    SelectMethod="GetEntryByEmail" TypeName="Helpers.DataAccessers.EntryHelper"
    UpdateMethod="UpdateEntry">
    <SelectParameters>
        <asp:SessionParameter SessionField="email" Name="email" Type="String" />
    </SelectParameters>
</asp:ObjectDataSource> 
```

这是 EntryItem 类

```
 public class EntryItem
    {
        public int Id { get; set; }
        public string Email { get; set; }
        public string Password { get; set; }
        public Person MainContact { get; set; } 
        ...
    } 
```

和 Person 类

```
public class Person
{
    public int Id { get; set; }
    public string FirstName { get; set; }
    public string LastName { get; set; }
    ...
} 
```

调试器进入 FormView`ItemUpdating`事件处理程序，但永远不会进入`Helpers.DataAccessers.EntryHelper.UpdateEntry`.

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-24T07:10:47.807

您可以编写自己的控件，能够根据需要执行绑定，以这种方式使用（我做了一个）：

```
 <ItemTemplate>
      <%# Eval("MainContact.FirstName")%>
    </ItemTemplate>
    <EditItemTemplate>
      <xx:BinderHelper runat="server" DataSource='<%# Bind("MainContact") %>'>
        <ItemTemplate>
          <asp:TextBox Text='<%# Bind("FirstName") %>' ID="txtFirstName" 
             runat="server" />
        </ItemTemplate>
      </xx:BinderHelper>
    </EditItemTemplate> 
```

无论如何，我建议您不要直接在页面中使用域对象，并且总体**上不要使用 ObjectDataSource 编写它们**。问题是，当您更改域时，例如添加一个字段：

```
public class Person
{
    public int Id { get; set; }
    public string FirstName { get; set; }
    public string LastName { get; set; }

    // just added
    public DateTime? BirthDate { get; set; }
} 
```

然后您将需要更改所有 GridViews、FormViews 等以存储 BirthDate，否则框架将调用您的 ObjectDataSource Update 方法放入`null`BirthDate。例如：

```
<asp:GridView runat="server" DataSourceID="odsForm" AutoGenerateColumns="False">
    <Columns>
      <asp:CommandField runat="server" ShowEditButton="True" />
      <asp:BoundField DataField="FirstName" />
      <asp:BoundField DataField="LastName" />
 </Columns>
  </asp:GridView> 
```

它将从数据库中读取您的人员。每个人都会有一个出生日期。保存时，此人将使用 BirthDate 更新为`null`，因为 GridView 不存储新字段。

我认为最好的解决方案是为数据绑定（并将它们留在表示层）和 DataObjects 编写 DTO。在你的情况下：

```
public class EntryItemView
{
    public int Id { get; set; }
    public string Email { get; set; }
    public string Password { get; set; }
    public string MainContactFirstName { get; set; } 
}

[DataObject]
public class EntryItemViewDataObject {
   [DataObjectMethod(DataObjectMethodType.Select)]
   public EntryItemView GetItem(...) {
       // TODO: read from the database, convert to DTO
   }

   [DataObjectMethod(DataObjectMethodType.Update)]
   public void Update( EntryItemView entry) {

      EntryItem domainObject = getById(entry.Id);
      // TODO: use EmitMapper or AutoMapper
      domainObject.MainContact.FirstName = entry.MainContactFirstName;

      // TODO: save
   }
} 
```

这样，对您的域的任何添加对您的视图都是安全的，并且 DataObjects 将仅读取/写入它们需要的字段。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T18:25:40.573

两种可能的方法。

首先，您可以`DataObjectTypeName="Helpers.BusinessObjects.EntryItem"`从您的`ObjectDataSource`. 我从来没有使用过，绑定总是有效的。

但这可能无济于事，因为`Bind/Eval`可能无法遵循参考 ( `Bind("MainContact.FirstName")`)。

相反，将其重写为

```
<%# ((EntryItem)Container.DataItem).MainContract.FirstName #> 
```

缺点是您松开了自动双向绑定，因此您必须稍微帮助粘合剂。只需将`Inserting/Updating`处理程序添加到您的 ObjectDataSource 和内部处理程序：

```
protected void TheObjectDataSource_Updating( object sender, BlahBlahEventArgs e )
{
    // find the control in the data bound parent
    TextBox txt = (TextBox)YourFormView.FindControl( "txtFirstName" );

    // read the value and add it to parameters
    e.Parameters.Add( "nameofyourparameter", txt.Text );
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-21T18:38:26.357

根据一些消息来源，实际上不可能使用嵌套属性进行双向绑定。

这是对 SO 上类似问题的一个答案：[https](https://stackoverflow.com/a/1195119/370671) ://stackoverflow.com/a/1195119/370671 。

此外，[还有一篇博客文章](http://mikeoff.blogspot.ca/2006/07/using-bind-with-nested-properties.html)描述了这个问题：

> 现在，在大多数情况下，`ObjectDataSource`当 [您] 绑定的是一个简单属性（例如客户端名称）时，使用仍然不会给您带来任何问题，即：您有一个绑定到 a 的客户端集合，`GridView`其中一个列显示客户的名称。为此，您使用类似`Bind("Name")`. 当您需要绑定到诸如 in 之类的子属性时，就会出现问题 `Bind("Address.StreetName")`。这行不通

# load - 将html文件的内容加载到div中？

> ID：10191799
> 
> 赞同：1
> 
> 时间：2012-04-17T13:01:51.703
> 
> 标签：load, bind

首先让我说我是一个完整的 javascript 初学者。我正在处理的问题可能很容易解决；）我正在处理一个网页，其中文本内容从外部 html 文件加载到 div 中。这是在用户单击菜单项时完成的。以下 js 代码是从外部文件加载的，并且工作正常：

```
    $(文档).ready(函数(){
        var api = $('.scroll-pane').jScrollPane(
            {
                显示箭头：假，
                维护位置：假
            }
        ).data('jsp');              
        $('#start').bind(
            '点击'，
            功能（）
            {
                api.getContentPane().load(
                    '文本/start.html',
                    功能（）
                    {
                        api.reinitialise();
                    }
                );
                返回假；
            }
        );  
        $('#nurkowanie').bind(
            '点击'，
            功能（）
            {
                api.getContentPane().load(
                    '文本/nurkowanie.html',
                    功能（）
                    {
                        api.reinitialise();
                    }
                );
                返回假；
            }
        );
        $('#noclegi').bind(
            '点击'，
            功能（）
            {
                api.getContentPane().load(
                    '文本/noclegi.html',
                    功能（）
                    {
                        api.reinitialise();
                    }
                );
                返回假；
            }
        );  
        $('#dojazd').bind(
            '点击'，
            功能（）
            {
                api.getContentPane().load(
                    '文本/start.html',
                    功能（）
                    {
                        api.reinitialise();
                    }
                );
                返回假；
            }
        );  
        $('#galeria').bind(
            '点击'，
            功能（）
            {
                api.getContentPane().load(
                    '文本/galeria.html',
                    功能（）
                    {
                        api.reinitialise();
                    }
                );
                返回假；
            }
        );  
        $('#linki').bind(
            '点击'，
            功能（）
            {
                api.getContentPane().load(
                    '文本/linki.html',
                    功能（）
                    {
                        api.reinitialise();
                    }
                );
                返回假；
            }
        );  
        $('#kontakt').bind(
            '点击'，
            功能（）
            {
                api.getContentPane().load(
                    '文本/kontakt.html',
                    功能（）
                    {
                        api.reinitialise();
                    }
                );
                返回假；
            }
        );  
    });

```

问题是页面第一次加载时。我希望具有类 .scroll-pane 的 div 加载来自“texts/start.html”的内容，这是您在单击开始链接时会得到的内容。现在那个 div 是空白的。我尝试使用如下代码：

```
    $(文档).ready(函数(){
        $('.scroll-pane').load('texts/start.html');
    }

```

但我无法让它工作。有人可以给我一些提示吗？

在此先感谢马特

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T13:08:22.043

我不确定你正在做的是最好的方法，但你可以使用：

[http://api.jquery.com/jQuery.get/](http://api.jquery.com/jQuery.get/)

所以像：

```
$.get("texts/start.html", function(data) {
  $(".scroll-pane').html(data);
}) 
```

所以使用 jScrollPane 你可以为每个点击事件做这样的事情：

```
$('#start').bind(
 'click',
 function()
 {
   $.get("texts/start.html", function(data) {
     api.getContentPane().html(data);
     api.reinitialise();
   });
   return false;
  }
); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T13:27:50.833

我不熟悉您正在使用的库，但 load() 似乎是 jScrollPane 对象的函数。所以你需要调用 load 而不是普通的 div。

尝试改用它。

```
api.getContentPane().load(
                    'texts/start.html',
                    function()
                    {
                        api.reinitialise();
                    }
                ); 
```

确保它是在你定义了 api 之后。

# java - Java 从另一个 Jar 运行 TestClass

> ID：10191803
> 
> 赞同：0
> 
> 时间：2012-04-17T13:01:59.757
> 
> 标签：java

我有一个程序可以从一个程序启动其他 JUnit 测试。我将首先告诉您它的作用： 1\. 搜索文件夹中的程序 2\. 找到 jar 并通过它搜索测试类

现在我想运行那个测试类，但是当我用这个开始这个类时，我得到一个错误，他找不到这个类：

```
for (String testclass: arrayList){
    Class cl = Class.forName(testclass);
    Logger.error(TestEnablerViewtool.class, "CL NAME : " + cl.getName());
    JUnitTest test = new JUnitTest(cl.getName());
    test.setTodir(new File(pathToReports));
    task.addTest(test);         
    task.execute(); 
} 
```

我用这段代码找到了这个类：

```
public static List<String> getClasseNamesInPackage(String jarName, String packageName){
    String s = "C:\\CMS\\CMS\\WEB-INF\\lib\\plugin-Login.jar";
    jarName = "Login";
    packageName = "test/" + jarName + "/deploy";
    ArrayList<String> arrayList = new ArrayList<String> ();
    packageName = packageName.replaceAll("\\." , "/");
    try {
            JarInputStream jarFile = new JarInputStream(new FileInputStream(s));
            JarEntry jarEntry;
            while(true) {
                jarEntry=jarFile.getNextJarEntry();         
                if(jarEntry.getName() == null) {
                    break;
                }
                if((jarEntry.getName().startsWith (packageName)) &&
                        (jarEntry.getName().endsWith (".class")) ) {
                    arrayList.add(jarEntry.getName().replaceAll("/", "\\."));
                }
            }
    }
    catch( Exception e){
        e.printStackTrace ();
    }
    return arrayList;
} 
```

我希望问题很清楚..

# javascript - 如何在 coco 中循环生成函数？

> ID：10191806
> 
> 赞同：2
> 
> 时间：2012-04-17T13:02:10.667
> 
> 标签：javascript, coco

我想循环生成函数：

```
for own k, v in t
  ctor::[k] = ->
    v(...)
    @ 
```

然而，coco 似乎只生成一个函数并重用它：

```
var k, v, __ref, __own = {}.hasOwnProperty;
for (k in __ref = t) if (__own.call(__ref, k)) {
  v = __ref[k];
  ctor.prototype[k] = __fn;
}
function __fn(){
  v.apply(this, arguments);
  return this;
} 
```

如何更改 coco 脚本以使输出如下：

```
var k, v, __ref, __own = {}.hasOwnProperty;
for (k in __ref = t) if (__own.call(__ref, k)) {
  v = __ref[k];
  ctor.prototype[k] = function() {
    v.apply(this, arguments);
    return this;
  }
} 
```

澄清：对于可可，我的意思是这种语言：[http](http://satyr.github.com/coco/) ://satyr.github.com/coco/（一个coffeescript fork）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T14:14:43.180

这是一个特点。`function`几乎总是应该避免直接在循环中写入。JSLint 禁止它说“不要在循环中创建函数”。

您的代码特别有一个范围错误（`v`动态创建的方法中的所有方法都将引用相同的值）。你应该`let`在那里使用绑定：

```
for own k, v in t
  let
    ctor::[k] = ->
      v ...
      this 
```

编译为：

```
var k, v, __ref, __own = {}.hasOwnProperty;
for (k in __ref = t) if (__own.call(__ref, k)) {
  v = __ref[k];
  (__fn.call(this, k, v));
}
function __fn(k, v){
  ctor.prototype[k] = function(){
    v.apply(this, arguments);
    return this;
  };
} 
```

# mysql - 限制 GROUP_CONCAT() 或 INNER JOIN 的结果

> ID：10191815
> 
> 赞同：3
> 
> 时间：2012-04-17T13:02:45.327
> 
> 标签：mysql, inner-join, greatest-n-per-group, group-concat

我已经广泛阅读了其他关于 group_concat() 和内部连接限制的线程，但没有找到我的答案，所以我想我会继续问它：

我正在开发一个现有的照片社区网站。我想检索在给定日期（今天）过生日的成员，然后检索每个成员的 5 张评价最高的照片。但我也只想要 10 个“最喜欢”的生日成员（即最喜欢的人数）。这是我所拥有的：

```
SELECT users.user_id, users.user_name, 
       GROUP_CONCAT(CONVERT(photos.photo_id,char(32)) 
                    ORDER BY photos.average_rate) as photo_ids
FROM users 
INNER JOIN photos ON photos.user_id=users.user_id
WHERE users.day_of_birth = DATE_FORMAT('2012-04-17', '%m-%d') 
  AND users.photo_count>0 
GROUP BY users.user_id
ORDER BY users.favorite_count DESC, users.photo_count DESC LIMIT 0,10 
```

这可以满足我的要求，除了我不能将`photo_id`s 的数量限制为 5输出字符串。似乎对我有用的唯一“解决方案”是将服务器变量设置`group_concat_max_len`为合理的值，至少可以容纳 5 个 id，但这非常笨拙且不可靠。有没有办法`photo_id`通过单个查询为每个用户准确返回 5 秒？或者我需要在我的 PHP 中做一个循环吗？

我不一定需要逗号分隔值中的 photo_ids，如果更可行，我也可以完全放弃 group_concat() 方法并进行内部连接。但即使在那里，我也不知道将结果限制为 5 的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T11:35:34.143

这些先进的东西让我喜欢 MySQL :)

```
SELECT user_id, user_name, 
    GROUP_CONCAT(CONVERT(photo_id, char(32)) ORDER BY photos.average_rate) as photo_ids
FROM (  SELECT user_id, user_name, photo_id, favorite_count, photo_count, 
            (case when @user_id = user_id then @rownum := @rownum + 1 else CONCAT(@rownum := 1, @user_id := user_id) end) AS dummy_val
        FROM (  SELECT users.user_id, users.user_name, users.favorite_count, users.photo_count, photos.photo_id
                FROM users 
                INNER JOIN photos
                ON photos.user_id=users.user_id
                WHERE users.day_of_birth = DATE_FORMAT('2012-04-17', '%m-%d') 
                    AND users.photo_count > 0 
                ORDER BY users.id ASC, photos.average_rate ASC
             ) AS h, 
             (  @rownum := NULL, 
                @user_id := NULL
             ) AS vars
        HAVING rownum <= 5) AS h2
GROUP BY user_id
ORDER BY favorite_count DESC, photo_count DESC LIMIT 0, 10 
```

基本上我得到了所有的行，并丢弃了计算出的 rownum 中 6 或更高的所有照片。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T11:16:05.747

```
SELECT u.user_id
     , u.user_name 
     , GROUP_CONCAT(p.photo_id ORDER BY p.average_rate) AS photo_ids
FROM 
    ( SELECT user_id
           , user_name
           , favorite_count 
           , photo_count
      FROM users
      WHERE day_of_birth = DATE_FORMAT('2012-04-17', '%m-%d') 
        AND photo_count > 0 
      ORDER BY favorite_count DESC
             , photo_count DESC 
      LIMIT 10
    ) AS u
  INNER JOIN
    photos AS p
      ON  p.user_id = u10.user_id
      AND p.average_rate >= 
          ( SELECT pp.average_rate 
            FROM photos AS pp
            WHERE pp.user_id = u10.user_id
            ORDER BY pp.average_rate DESC
            LIMIT 1 OFFSET 4
          ) 
GROUP BY u.user_id
ORDER BY u.favorite_count DESC
       , u.photo_count DESC 
```

# jquery - Tinymce 只在 jquery 中加载一次

> ID：10191816
> 
> 赞同：0
> 
> 时间：2012-04-17T13:02:46.653
> 
> 标签：jquery, tinymce

我使用 jquery 读取 html 文件并在 div 中抓取内容并将它们包裹在 a 周围`<textarea>`并将其附加到我正在查看的页面。但不幸的是，我正在阅读的这个页面有两个 div，它们正在抓取内容形式，并且只有一个 div tinymce 正在加载。请帮我解决这个问题。非常感谢帮助。我的代码：

```
$(document).ready(function () {
    var page = "ex/ex2/file.html";
    $.get(page, function (response) {
         //following functions initializes tinymce                          
            tinymce_init();
        $(response).find('.lookingclassname').each(function () {

            var clscontent = $(this).html();
            var cls = $(this).attr('class').toString();
            var clsarr = cls.split(" ");

            $.post("index.php?component=static_content&action=check_contnet&classname="+clsarr[clsarr.length-1],       function(data) {
              if($(data).find(".error").length){
            var topcover = '<textarea name="editlive' + clsarr[clsarr.length - 1] + '" id="editlive' + clsarr[clsarr.length - 1] + '" rows="10" cols="90">';
            var bottomcover = '</textarea><input type="submit" name="btnsavecontent" value="SAVE" onClick="saveContent(' + clsarr[clsarr.length - 1] + ')" id="btnsavecontent" />';
            $('.bodyContent').append(topcover + clscontent + bottomcover);
            }
           });

        });
    });

}); 
```

不管我把tinymce_init()放在哪里；它不工作...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T08:05:14.433

您只需调用`init`一次。导致它多次（在它所在的每个地方）已知会导致奇怪的行为。在添加新内容之后放置它是最合乎逻辑的地方。

# haskell - 将“裸”数字分配给新类型

> ID：10191844
> 
> 赞同：9
> 
> 时间：2012-04-17T13:05:25.570
> 
> 标签：haskell, pragma

请注意此 GHCi 会话中的第二行。允许我使用“裸”数字作为值而不是调用构造函数的 Latitude 类型是什么？我想对我自己的一些类型做类似的事情。

```
λ> :m + Data.Geo.GPX.Type.Latitude                                                                                                   
λ> let t = 45 :: Latitude                                                                                                            
λ> t                                                                                                                                 
45.0 
```

我检查了 Latitude 类型的源代码，但一开始我很难弄清楚。最终我找到了答案，所以我想我会在这里记录下来。请看下面我的回答。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-17T13:08:03.930

使这项工作有效的原因是类型是 Num。最简单的方法是使用“派生 Num”，在这种情况下，我需要语言编译指示 GeneralizedNewtypeDeriving。所以我可以创建一个像下面这样的类型，

```
newtype Seconds = Seconds Double deriving (Eq, Ord, Enum, Num, Fractional, Floating, Real, RealFrac, RealFloat, Show) 
```

然后在 GHCi 中，

```
λ> let s = 5 :: Seconds                                                                                                              
λ> s                                                                                                                                 
Seconds 5.0 
```

或者，我可以显式地实现 Num。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-17T18:32:46.793

根据 Haskell98 标准，数字文字实际上是对`fromInteger`and的调用`fromRational`。这允许将它们转换为实现这些函数的任何类型（[fromInteger](http://hackage.haskell.org/packages/archive/base/latest/doc/html/Prelude.html#v%3afromInteger)在 Prelude.Num 类型类中，而[fromRational](http://hackage.haskell.org/packages/archive/base/latest/doc/html/Prelude.html#v%3afromRational)在 Prelude.Fractional 类型类中）。

> 数字文字的语法在 2.5 节中给出。整数文字表示函数 fromInteger 对 Integer 类型的适当值的应用。类似地，浮动文字代表将 fromRational 应用于 Rational 类型的值（即 Ratio Integer）。鉴于打字：
> 
> fromInteger :: (Num a) => 整数 -> a
> 
> fromRational :: (Fractional a) => Rational -> a
> 
> 整数和浮点字面量的类型分别为 (Num a) => a 和 (Fractional a) => a。数字文字以这种间接方式定义，因此它们可以被解释为任何适当数字类型的值。有关重载歧义的讨论，请参见第 4.3.4 节。

[http://www.haskell.org/onlinereport/basic.html#numeric-literals](http://www.haskell.org/onlinereport/basic.html#numeric-literals)

# algorithm - 排序数组的相对质量

> ID：10191848
> 
> 赞同：1
> 
> 时间：2012-04-17T13:05:32.743
> 
> 标签：algorithm, search, sorting

我有 2 个提供不同结果的排序算法（我按相关性对信息进行排序）。结果，两种方式我都以不同的顺序获得相同的物品。我知道，第一个算法比第二个提供更好的结果。我想获得相对值（从 0 到 1），这意味着“array2 的前 N ​​个值是 array1 的前 N ​​个值的 0.73 质量”（我比较第一个元素，因为用户在没有任何操作的情况下看到它）。首先想到的是使用array1和array2中位置之间的差异之和。例如：

数组1：1 2 3 4 | 5 6 7 8 9

数组2：8 6 2 3 | 7 4 1 5 9 - array1 中的位置

数组2*：5 5 2 3 | （大于 4 替换为 5 以获取 diapasone 0..1 中的相对值）

我想比较前 4 个元素：

S = 1 + 2 + 3 + 4 - 标准具之和，最大偏差

D = |1 - 5| + |2 - 5| + |3 - 2| + |4 - 3| = 9 - 这是绝对偏差

为了计算相对质量，我使用下一个公式：(S - D)/S = 0.1。

有没有标准的算法？这种算法有什么缺点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T13:45:03.777

您正在寻找的可能是[DCG](http://en.wikipedia.org/wiki/Discounted_Cumulative_Gain) [Discounted Cumulative Gain] 和[nDCG](http://en.wikipedia.org/wiki/Discounted_cumulative_gain#Normalized_DCG) [normalized DCG]，它们用于对相关性进行排名。

这假设一个列表 [让它成为`list2`] 是一个基线 - “绝对真理”，并且`list1`应该尽可能接近它。
这个想法是，如果第一个元素乱序 - 如果第 10 个元素乱序则更重要。

[**该解决方案在我在这篇文章**](https://stackoverflow.com/a/9365346/572670)中的回答中描述了更多详细信息和一个示例[对不起，我的自我推销，它似乎很适合这里]。基本思想是评估：

```
DCG(list1)/DCG(list2) 
```

其中每个元素的相关性来源于`list2`其自身，例如：`rel_i = 1/log(1+i)`

笔记：

*   当然`DCG`只能对相关`n`元素进行计算，而不是对整个列表进行计算。
*   此解决方案将产生`1`if`list1 == list2`
*   该解决方案假设重要的是元素出现的位置，而不是元素的数值。它完全无视数值。

# javascript - 咖啡脚本中出现意外的“{”

> ID：10191857
> 
> 赞同：1
> 
> 时间：2012-04-17T13:06:01.030
> 
> 标签：javascript, coffeescript

我写了几行来在咖啡脚本中初始化 jquery-ui 日期选择器

```
#this code is working fine
$(".picktime").datepicker
  numberOfMonths: 1

#this give me an Error: Parse error on line 3: Unexpected '{'
$(".picktime").datepicker
  numberOfMonths: 1
  showButtonPanel: true 
```

谢谢你。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-17T16:40:36.797

发布为答案：

检查你的空白；确保你没有混合制表符和空格。

# sql - Access 中的计数记录

> ID：10191859
> 
> 赞同：1
> 
> 时间：2012-04-17T13:06:12.323
> 
> 标签：sql, ms-access

我无法想出一种计算特定表的不同记录的方法，并且需要一些帮助。例如说我有以下

```
 FIRSTNAME      LASTNAME     STATE
           WILL           SMITH        PA
           JOHN           DOE          PA
           BOB            THOMAS       OH
           TOM            JONES        OH
           MARK           TIMMS        CA 
```

我正在寻找的是该表中不同状态的计数。我正在寻找 3 的计数。

这是我到目前为止所拥有的，但出现语法错误

```
 SELECT COUNT(DISTINCT CONFIG) AS total
   FROM TABLE_NAME 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-17T13:13:58.520

这应该为您提供正确的 3 计数：

```
SELECT Count(*) as Total
FROM 
(
    SELECT DISTINCT State
    FROM yourTable
) 
```

在 MS Access 中，您通常必须先获取 Distinct 记录，然后再获取这些记录的计数。有关 Distinct Counts 的一些提示，请参阅下面的文章。

[Microsoft Access 提示和技巧：不同的计数](http://blogannath.blogspot.com/2010/02/microsoft-access-tips-tricks-distinct.html)

# datetime - 如何将 DateTime 值转换为 Long 数

> ID：10191860
> 
> 赞同：0
> 
> 时间：2012-04-17T13:06:16.053
> 
> 标签：datetime, c#-4.0

有什么方法可以将 DateTime 值转换为 Long 数字？

就像在 Excel 中一样，您将在 2012 年 4 月 17 日获得 41016。

感谢您分享您的时间。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T13:08:46.723

[`DateTime.Now.Ticks`](http://msdn.microsoft.com/en-us/library/system.datetime.ticks.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-17T13:09:23.153

DateTime 有一个 Ticks 属性，它表示 a 中的日期`Long`：

[http://msdn.microsoft.com/en-us/library/system.datetime.ticks.aspx](http://msdn.microsoft.com/en-us/library/system.datetime.ticks.aspx)

根据您的评论进行编辑：

也许你需要这个`ToFileTime`方法？否则我不知道你的意思

[http://msdn.microsoft.com/en-us/library/system.datetime.tofiletime.aspx](http://msdn.microsoft.com/en-us/library/system.datetime.tofiletime.aspx)

# c# - C# .NET 包含文件

> ID：10191865
> 
> 赞同：4
> 
> 时间：2012-04-17T13:06:38.553
> 
> 标签：c#, asp.net, .net, include

我搜索了一种在 Web 应用程序中包含文件的方法（例如菜单，因此在应用更改时我不必在所有页面上编辑它），但还没有找到像

```
<?php include "Menu.html"; ?> 
```

你能帮忙吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-17T13:08:18.453

你看过[母版页](http://msdn.microsoft.com/en-us/library/wtxbf3hh.aspx)吗？它们肯定会帮助您在多个页面中添加相同的布局。

或者您可能想要一个可重用的[用户控件](http://msdn.microsoft.com/en-us/library/26db8ysc%28v=vs.85%29.aspx)（您自己编写）？

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-17T13:08:29.603

我们不在 asp.net 中使用“包含页面”，即使它是可能的（当然使用不同的语法）。相反，请查看母版页概念。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-04-17T13:09:07.813

[MasterPages](http://msdn.microsoft.com/en-us/library/wtxbf3hh.aspx#HowMasterPagesWork)允许您维护母版页之间的父/子关系，该母版页包含环绕任意数量的子内容页面的内容。

同样，[UserControls](http://msdn.microsoft.com/en-us/library/sbz9etab.aspx)允许您在任何页面上重复使用任何内容，无论是 MasterPage 还是 ContentPage：

```
<%@ Page Language="C#" %>
<%@ Register TagPrefix="uc" TagName="Spinner" 
    Src="~/Controls/Spinner.ascx" %>
<html>
<body>
<form runat="server">
    <uc:Spinner id="Spinner1" 
        runat="server" 
        MinValue="1" 
        MaxValue="10" />
</form>
</body> 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2017-03-29T21:25:55.980

# 方法 (C#)

**可执行代码：**

页面包括

```
<!--#include file="a.aspx"--> 
```

在页面内独立执行

```
<% Server.Execute("a.aspx"); %> 
```

**不可执行的代码：**

```
<% Response.WriteFile("a.inc"); %> 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-04-17T13:38:32.620

我相信这就是您正在寻找的。

```
<!--#include file="wisdom.aspx"--> 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2014-01-23T14:59:11.237

我使用 C#.net

```
 <% Response.WriteFile("YourPage.aspx"); %> 
```

这对我来说真的很好！

我也用你的线，

```
 <!--#include file="wisdom.aspx"--> 
```

当我处于 HTML 模式时。

# resharper - Resharper 自动添加分号

> ID：10191866
> 
> 赞同：7
> 
> 时间：2012-04-17T13:06:47.353
> 
> 标签：resharper

嗨，可以强制 resharper 自动添加分号吗？例如 int.Pa 我看到 int.Parse 所以我点击回车我有 int.Parse(|) 而我仍然需要添加；后。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-04-17T14:28:45.513

Ctrl+Shift+Enter 可以解决问题。

# php - 找不到 PHPUnit 类 'mysqli'

> ID：10191869
> 
> 赞同：8
> 
> 时间：2012-04-17T13:06:49.820
> 
> 标签：php, mysqli, phpunit

我刚开始使用[PHPUnit](https://phpunit.de/)。我写的一些简单的测试是有效的。所以一般来说 PHPUnit 是启动并运行的。但是 MySQLi 类有问题。

在我的代码中它工作正常。这是行：

```
$this->mysqli = new \mysqli($this->host, $user->getUser(), $user->getPwd(), $this->db); 
```

当运行 phpunit 解析此行时，我收到以下错误消息（指向该行）：

```
PHP Fatal error:  Class 'mysqli' not found in /opt/lampp/htdocs/... 
```

两种可能性（如我所见）：

1) 我缺少一些功能/扩展/配置步骤/与正确设置 PHPUnit 与 MySQLi 扩展一起使用的其他内容。

**编辑**

如果我测试扩展名`extension_loaded('mysqli')`，它会`true`在我的正常代码中返回。如果我在测试中执行以下操作，它将跳过测试（即它返回`false`）：

```
if (!extension_loaded('mysqli')) {
    $this->markTestSkipped(
        'The MySQLi extension is not available.'
    );
} 
```

**/编辑**

2）我的代码可能有问题。我正在尝试模拟用户对象以建立测试连接。所以这里是：

```
<?php
class ConnectionTest extends \PHPUnit_Framework_TestCase
{
    private $connection;

    protected function setUp()
    {
        $user = $this->getMockBuilder('mysqli\User')
                     ->setMethods(array('getUser', 'getPwd'))
                     ->getMock();
        $user->expects($this->once())
             ->method('getUser')
             ->will($this->returnValue('username'));
        $user->expects($this->once())
             ->method('getPwd')
             ->will($this->returnValue('p@ssw0rd'));

        $this->connection = new \mysqli\Connection($user);
    }

    public function testInternalTypeGetMysqli()
    {
        $actual   = $this->connection->getMysqli();
        $expected = 'resource';

        $this->assertInternalType($expected, $actual);
    }

    protected function tearDown()
    {
        unset($this->connection);
    }
} 
```

测试的 Connection 类如下所示：

```
<?php
namespace mysqli;

class Connection
{
    protected $mysqli;
    protected $host = 'localhost';
    protected $db   = 'database';

    public function __construct(\mysqli\User $user)
    {
        $this->mysqli = new \mysqli($this->host, 
                                    $user->getUser(),
                                    $user->getPwd(),
                                    $this->db);
        if (mysqli_connect_errno()) {
            throw new \RuntimeException(mysqli_connect_error());
        }
    }

    public function getMysqli()
    {
        return $this->mysqli;
    }
} 
```

**解决方案**

这整个事情是/是一个安装问题。我正在使用提供我的 PHP的[XAMPP安装。](https://www.apachefriends.org/index.html)独立安装*PHPUnit*使其使用不同的设置！所以在我的浏览器（XAMPP 驱动）中一切都很好，但是在我的命令行中 MySQLi 扩展已经全部丢失了！Debian 提供了一个名为*php5-mysqlnd*的软件包。安装后一切正常！（出现的其他错误除外:-)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-17T16:12:46.573

PHPUnit 通常在 CLI - 命令行界面中运行。

您所拥有的 PHP 与网络服务器不同。不同的二进制文件，通常也是不同的配置。

```
$ php -r "new mysqli();" 
```

应该给你同样的错误。验证二进制文件和配置的位置：

```
$ which php 
```

和

```
$ php -i | grep ini 
```

确保您已安装并启用[该类](http://www.php.net/manual/en/mysqli.requirements.php)[的扩展。`mysqli`](http://www.php.net/manual/en/mysqli.requirements.php)配置完成后，您应该能够完美地运行单元测试。

# android - 将位图转换为 byteArray android

> ID：10191871
> 
> 赞同：51
> 
> 时间：2012-04-17T13:07:00.930
> 
> 标签：android, bitmap, bytearray, base64

我有一个位图，我想通过将其编码为 base64 将其发送到服务器，但我不想以 png 或 jpeg 压缩图像。

现在我以前做的是。

```
ByteArrayOutputStream byteArrayBitmapStream = new ByteArrayOutputStream();
bitmapPicture.compress(Bitmap.CompressFormat.PNG, COMPRESSION_QUALITY, byteArrayBitmapStream);
byte[] b = byteArrayBitmapStream.toByteArray();
//then simple encoding to base64 and off to server
encodedImage = Base64.encodeToString(b, Base64.NO_WRAP); 
```

现在我只是不想使用任何压缩，也不想使用任何格式的简单字节 [] 来自我可以编码并发送到服务器的位图。

任何指针？

* * *

## 回答 #1

> 赞同：135
> 
> 时间：2012-04-17T13:21:00.243

您可以使用[`copyPixelsToBuffer()`](http://developer.android.com/reference/android/graphics/Bitmap.html#copyPixelsToBuffer%28java.nio.Buffer%29)将像素数据移动到 a `Buffer`，或者您可以使用[`getPixels()`](http://developer.android.com/reference/android/graphics/Bitmap.html#getPixels%28int%5B%5D,%20int,%20int,%20int,%20int,%20int,%20int%29)然后将整数转换为具有位移位的字节。

`copyPixelsToBuffer()`可能是您想要使用的，所以这里有一个关于如何使用它的示例：

```
//b is the Bitmap

//calculate how many bytes our image consists of.
int bytes = b.getByteCount();
//or we can calculate bytes this way. Use a different value than 4 if you don't use 32bit images.
//int bytes = b.getWidth()*b.getHeight()*4; 

ByteBuffer buffer = ByteBuffer.allocate(bytes); //Create a new buffer
b.copyPixelsToBuffer(buffer); //Move the byte data to the buffer

byte[] array = buffer.array(); //Get the underlying array containing the data. 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2015-04-23T06:27:37.157

而不是@jave 答案中的以下行：

```
int bytes = b.getByteCount(); 
```

使用以下行和函数：

```
int bytes = byteSizeOf(b);

protected int byteSizeOf(Bitmap data) {
if (Build.VERSION.SDK_INT < Build.VERSION_CODES.HONEYCOMB_MR1) {
    return data.getRowBytes() * data.getHeight();
} else if (Build.VERSION.SDK_INT < Build.VERSION_CODES.KITKAT) {
    return data.getByteCount();
} else {
      return data.getAllocationByteCount();
} 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2017-04-21T16:11:55.530

```
BitmapCompat.getAllocationByteCount(bitmap); 
```

有助于找到所需的 ByteBuffer 大小

# pyqt - 如何用 PyQt 做 Q_INTERFACES？（目标：实现QTextObjectInterface）

> ID：10191872
> 
> 赞同：0
> 
> 时间：2012-04-17T13:07:02.183
> 
> 标签：pyqt, pyqt4

我正在尝试通过在 QTextEdit 中放置具有自定义渲染的对象来实现类似于 Cocoa 的 NSTokenField 和 Qt 的东西。

Qt 的文本系统通过实现 QTextObjectInterface 的子类来封装自定义绘图代码来实现这一点。然而，除了子类化之外，该类还必须使其实现的接口为元对象系统所知。在 C++ 中，这是通过标题中的 Q_INTERFACES 宏完成的：

Q_INTERFACES(QTextObjectInterface)

我查看了 moc 的 C++ 原型输出，它最终会生成一个对接口名称有用的 qt_metacast() 实现。

我找不到使用 PyQt 模拟它的方法。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T13:21:40.023

使用 QtGui.QPyTextObject 作为自定义文本对象的基类。有关如何执行此操作的示例，请参阅 PyQt 存档中的富文本/文本对象示例。

# c++ - CRTP 中间类也需要成为 final

> ID：10191874
> 
> 赞同：0
> 
> 时间：2012-04-17T13:07:04.447
> 
> 标签：c++, templates, crtp

我有一个 CRTP 类的继承链。CRTP 类相互派生，直到“最终”派生类将自身作为 CRTP 参数传递并最终确定继承链。

```
template <class W>
struct Base
{
    .....
};
template <class W>
struct Derived_inheritable: public Base<W>
{
....
}

template <class W>
struct Derived2_inheritable: public Derived_inheritable<W>
{
....
}

... 
```

我想要做的是能够在 CRTP 继承链的每个级别都有这样的“最终”最终用户类，不涉及模板：

```
typedef Derived1_inheritable<Derived1> Derived1; 
```

你可以猜到，这个 typedef 不起作用，因为它引用了自己定义的类型。问题是如何实现这一目标？我能想到的方法是：

```
struct Derived1: public Derived1_inheritable<Derived1>
{
   //not convenient, need to redefine at least a forwarding constructor
} 
```

正如代码中的注释所说，这不是一个非常优雅的解决方案 - 我需要重新定义构造函数以转发到基本构造函数。有谁知道更优雅的方式？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T13:12:52.057

~~typedef Derived1_inheritable Derived1;~~

~~那行没有意义，模板的参数是一个*类型*，但您试图传递一个*模板*（顺便说一下，您正在实例化的模板是同一个模板，但除了那个额外的怪癖之外，事实是您的模板将一个*类型*作为参数，而您正在传递非类型）~~

从问题中并不清楚您要达到什么目标。你应该努力陈述你的*目标*，而不是你解决这个目标的*方法。*

> 我想为每个非模板的 DerivedX_inheritable 创建一个“最终”类，并将自身作为 W 参数传递。

这正是在您生产的代码中完成的：

```
struct Derived1: public Derived1_inheritable<Derived1> {} 
```

这是一个类型定义（*创建一个“最终”类*）。您的 CRTP 基础需要最终用户必须提供的参数以及转发构造函数的需要这一事实只是您设计的副作用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T09:40:25.330

我想我找到了一个优雅的解决方案：

```
template <class W>
struct Base
{
   .....
};
template <class W>
struct Derived_inheritable: public Base<W>
{
....
}

//solution
struct Derived2_dummy;

template <class W=derived2d_ummy>
struct Derived2_inheritable: public Derived_inheritable<W>
{
....
}
struct derived2_dummy: public: Derived_inheritable<>{};
typedef Derived2_inheritable<> Derived2; 
```

# php - 解析带有 .php 扩展名和 php 标头的 xml 文件

> ID：10191875
> 
> 赞同：1
> 
> 时间：2012-04-17T13:07:06.520
> 
> 标签：php, xml-parsing

我有一个小问题。我需要解析一个文件并用结果填充一个网页横幅。问题是，该文件名为：“_banner_products.php”，其内容如下：

```
<?php header('Content-Type:text/xml'); ?><?php echo '<?xml version="1.0" encoding="UTF-8"?>'; ?>
<carouselle>
 <firstLayer>
   <layerName>Leica Disto X310</layerName>
   <layerProduct>Disto X310</layerProduct>
   <layerPic>http://www.leicaestonia.ee/extensions/boxes_design/flashpics/1334482548.jpg</layerPic>
   <layerPrice>0,-</layerPrice>
   <layerPriceOld></layerPriceOld>
   <layerLink>http://www.leicaestonia.ee/index.php?id=11627</layerLink>
   <layerTimer>01.05.2012 00:00</layerTimer>
 </firstLayer>
 <firstLayer>
   .....
   .....
</firstLayer>
</carouselle> 
```

我怎样才能循环通过这个文件将所有“firstLayer”子级组合成一个等等..如果我只是使用：

```
$file = fopen("_banner_products.php", "r");
while (!feof($file)){
    $line = fgets($file);
} 
```

simplexml_load_file 抛出这个-“_banner_products.php:1：解析器错误：需要开始标记，'<'”

然后我只得到 <...> 标签的内容，这意味着如果我已经超出范围，我无法区分。

感谢任何人的回应。如果有任何不清楚的地方，我会尝试解释更多。

编辑。感谢您的解决方案，确实使用完整的 URL 有效：

```
simplexml_load_file("http://localhost/MySite/_banner_products.php"); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T13:09:57.540

您遇到问题是因为`simplexml_load_file`将您的文件视为本地 xml 文件..您需要做的是添加完整的 URL

例子

```
 simplexml_load_file("http://localhost/web/_banner_products.php"); 
```

用例获取`layerName`例如

`_banner_products.php`

```
<?php
header ( 'Content-Type:text/xml' );
echo '<?xml version="1.0" encoding="UTF-8"?>';
?>
<carouselle>
 <firstLayer>
   <layerName>Leica Disto X310</layerName>
   <layerProduct>Disto X310</layerProduct>
   <layerPic>http://www.leicaestonia.ee/extensions/boxes_design/flashpics/1334482548.jpg</layerPic>
   <layerPrice>0,-</layerPrice>
   <layerPriceOld></layerPriceOld>
   <layerLink>http://www.leicaestonia.ee/index.php?id=11627</layerLink>
   <layerTimer>01.05.2012 00:00</layerTimer>
 </firstLayer>
 <firstLayer>
   <layerName>Leica Disto X310</layerName>
   <layerProduct>Disto X310</layerProduct>
   <layerPic>http://www.leicaestonia.ee/extensions/boxes_design/flashpics/1334482548.jpg</layerPic>
   <layerPrice>0,-</layerPrice>
   <layerPriceOld></layerPriceOld>
   <layerLink>http://www.leicaestonia.ee/index.php?id=11627</layerLink>
   <layerTimer>01.05.2012 00:00</layerTimer>
 </firstLayer>
</carouselle> 
```

**查看详情**

```
$xml = simplexml_load_file("http://localhost/lab/stockoverflow/_banner_products.php");

echo "<pre>" ;
foreach($xml as $key => $element)
{
    echo $element->layerName , PHP_EOL ;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-17T13:09:35.757

最明显的方法是去掉第一行，然后在代码中重新添加 XML 声明。

您也可以使用 PHP 解析文件`eval()`，但要**非常**确定您正在解析什么，因为这可能是一个非常大的安全漏洞。

# iphone - 加载包含来自 sqlite3 的数据的表时出现异常

> ID：10191876
> 
> 赞同：0
> 
> 时间：2012-04-17T13:07:09.647
> 
> 标签：iphone, objective-c, ios, exception

我正在开发 iPhone 应用程序，我创建了一个视图控制器，其中包含一个按钮和 tableViewController，它必须显示数据表单 sqlite3，我正在使用 xcode 3.4 我希望 viewController 中的按钮打开 TableViewController ，当我尝试打开该表时本身没有按钮我去情节提要并将原始数据放在 TableViewController 上，它正常加载 sqlite 的数据但是当我将原始数据放在 viewController 上并将按钮连接到 TableViewController 并使连接模式然后运行..当我按下按钮，它给了我以下异常： `NSInvalidArgumentException', reason: '-[NSIndexPath isEqualToString:]: unrecognized selector sent to instance ...`

例外是指 ( `cellForRowAtIndexPath`)中的一行

这是我的代码：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
static NSString *CellIdentifier = @"Cell";
UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

if (cell == nil) {
    cell = [[[UITableViewCell alloc] initWithFrame:CGRectZero reuseIdentifier:CellIdentifier] autorelease];
}

Books *temp= (Books *)[self.books objectAtIndex:indexPath.row];

// [cell setText:temp.bo_name];
[cell setText:[NSString stringWithFormat:@"%d - %@ - %d - %d - %d - %d - %@ - %f - %f - %@ - %f - %d - %@ - %d",temp.bo_id, temp.bo_name, temp.bo_au_id, temp.bo_pub_id, temp.bo_num_pages, temp.bo_publish_year, temp.bo_about, temp.bo_price, temp.bo_currency, temp.bo_cover_img, temp.bo_recomended, temp.bo_sec_id, temp.bo_path, temp.bo_sort]];

return cell;

} 
```

**编辑**以添加在我的答案 - JeremyP 的评论中指定的实例变量的类型。

```
int bo_id; 
NSString *bo_name; 
int bo_au_id; 
int bo_pub_id; 
int bo_num_pages; 
int bo_publish_year; 
NSString *bo_about; 
double bo_price; 
double bo_currency; 
NSString *bo_cover_img; 
double bo_recomended; 
int bo_sec_id; 
NSString *bo_path; 
int bo_sort; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T13:13:46.570

`setText` is deprecated. Instead of `[cell setText:[NSString stringWithFormat:@"%d...`, try

```
cell.textLabel.text =[NSString stringWithFormat:@"%d... 
```

The error might be somewhere in the length of `%d - %@ - %d - %d - %d - %d - %@ - %f - %f - %@ - %f - %d - %@ - %d` causing an argument mismatch (`NSInvalidArgumentException`). Carefully walk through the list to find out the error. It's difficult to tell without seeing what are the data types of the individual elements.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T14:51:05.853

不可能肯定地说出问题是什么，但几乎可以肯定的是，您的参数`stringWithFormat:`与其格式说明符之间存在不匹配。

检查所有对应的东西`%d`实际上是整数，而不是长整数或短整数。检查指定为 %@ 的东西是否真的是对象指针。此外，如果您已经覆盖`-description`了此处使用的任何类，请确保您没有在那里犯错。

实际错误是由发送`-isEqualToString:`到 an引起的，`NSIndexSet`因此您可能会`NSIndexSet`在某处意外地将 an 视为字符串。

# imagemagick - Alfresco Transformer - Ubuntu 脚本多页 PDF 到 OCR

> ID：10191877
> 
> 赞同：0
> 
> 时间：2012-04-17T13:07:12.700
> 
> 标签：imagemagick, ocr, alfresco, tesseract

我在调用脚本进行转换时遇到问题。我在 ubuntu 中有一个脚本，可以将多页 pdf 拆分为单页 pdf 文件，然后使用 convert（来自 imagemagick）将其转换为 tif，然后使用 tesseract ocr 生成 html，使用文本层将其转换回 pdf，然后合并一切都回到带有文本层的单个pdf中。这些脚本在控制台中运行良好，但在 Alfresco 中，由于路径中的环境变量不同，请使用不同的转换 (/opt/alfresco-3.4.d/common/bin/convert) 而不是 /usr/bin/convert。结果是 pdf 1.3 而不是 tiff，因此 tesseract 不会什么都不做。servlet 是 tomcat，我试图将 /usr/bin/convert 复制到 catalina home，并复制到 alfresco common directory ，将 convert 重命名为 conv 并调用它等，但没有任何反应。

我怎么能告诉 Alfresco 使用正确的转换而不是他的 /opt/alfresco-3.4.d/common/bin/convert

谢谢

# java - Spring 集成 http:inbound-gateway 有效负载类型

> ID：10191884
> 
> 赞同：1
> 
> 时间：2012-04-17T13:07:45.733
> 
> 标签：java, spring, spring-integration

我有一个 HTTP 入站网关

```
<int-http:inbound-gateway name="/purchase"
    supported-methods="GET" request-channel="purchaseRequest"
    reply-channel="purchaseReply"
    request-payload-type="com.myapp.PurchaseRequest" /> 
```

我必须调用 URL 以填充 PurchaseRequest 对象而不是提交`LinkedMultiValueMap`.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T14:05:08.830

这

```
request-payload-type 
```

属性不适用于 GET、HEAD 和 OPTIONS 方法。

如果您可以升级到 2.1，并且您的 PurchaseRequest 对象上有适当的构造函数，则可以使用

```
payload-expression="new com.myapp.PurchaseRequest(#requestParams['param1'], #requestParams['param2'], ...)" 
```

# c++ - c++位域和-Wconversion

> ID：10191886
> 
> 赞同：10
> 
> 时间：2012-04-17T13:07:53.733
> 
> 标签：c++, g++, warnings, bit-fields

`-Wconversion`当我使用 g++ 为位字段赋值时会产生警告。

源文件：

```
struct Foo
{
public:
    unsigned int x : 4;
    unsigned int y : 9;
    unsigned int z : 17;
};

int main(int, char**)
{
    int a = 12;
    Foo f;
    f.x = a;
    f.x = (unsigned int)a;
    f.x = (unsigned char)a;
    f.x = (unsigned short)a;
    f.x = (unsigned)a;

    f.y = a;
    f.y = (unsigned int)a;
    f.y = (unsigned char)a; // no warning, sizeof(char) < 9
    f.y = (unsigned short)a;
    f.y = (unsigned)a;

    f.z = a;
    f.z = (unsigned int)a;
    f.z = (unsigned char)a; // no warning, sizeof(char) < 17
    f.z = (unsigned short)a; // no warning, sizeof(char) < 17
    f.z = (unsigned)a;
} 
```

编译输出：

```
$ g++ --version
g++ (Ubuntu/Linaro 4.6.1-9ubuntu3) 4.6.1
<snip>
$ g++ -Wconversion test.cpp
test.cpp: In function ‘int main(int, char**)’:
test.cpp:13:8: warning: conversion to ‘unsigned char:4’ from ‘unsigned int’ may alter its value [-Wconversion]
test.cpp:14:22: warning: conversion to ‘unsigned char:4’ from ‘unsigned int’ may alter its value [-Wconversion]
test.cpp:15:23: warning: conversion to ‘unsigned char:4’ from ‘unsigned char’ may alter its value [-Wconversion]
test.cpp:16:24: warning: conversion to ‘unsigned char:4’ from ‘short unsigned int’ may alter its value [-Wconversion]
test.cpp:17:18: warning: conversion to ‘unsigned char:4’ from ‘unsigned int’ may alter its value [-Wconversion]
test.cpp:19:8: warning: conversion to ‘short unsigned int:9’ from ‘unsigned int’ may alter its value [-Wconversion]
test.cpp:20:22: warning: conversion to ‘short unsigned int:9’ from ‘unsigned int’ may alter its value [-Wconversion]
test.cpp:22:24: warning: conversion to ‘short unsigned int:9’ from ‘short unsigned int’ may alter its value [-Wconversion]
test.cpp:23:18: warning: conversion to ‘short unsigned int:9’ from ‘unsigned int’ may alter its value [-Wconversion]
test.cpp:25:8: warning: conversion to ‘unsigned int:17’ from ‘unsigned int’ may alter its value [-Wconversion]
test.cpp:26:22: warning: conversion to ‘unsigned int:17’ from ‘unsigned int’ may alter its value [-Wconversion]
test.cpp:29:18: warning: conversion to ‘unsigned int:17’ from ‘unsigned int’ may alter its value [-Wconversion] 
```

我想`-Wconversion`为我的项目的其他部分启用（包括在这个文件中）。如何在此处“修复”赋值语句，以免收到警告？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-04-17T13:16:25.273

确保转换不会溢出。这是一种方法：

```
struct Foo
{
public:
    unsigned int x : 4; 
    unsigned int y : 9; 
    unsigned int z : 17;
};

int main(int, char**)
{
    int a = 12;
    Foo f;
    f.x = static_cast<unsigned int>(a & 15);    
    f.y = static_cast<unsigned int>(a & 511);   
    f.z = static_cast<unsigned int>(a & 131071);
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-04-17T13:23:46.070

**每当您的隐式转换可能会改变您的值**时，Wconversion 都会发出警告。话虽如此，您的代码没有问题。

`static_cast<usigned_int>`如上所述使用将解决您的问题。

[更多信息](http://gcc.gnu.org/bugzilla/show_bug.cgi?id=34198)

# javascript - 参考错误：“标签未定义”

> ID：10191890
> 
> 赞同：1
> 
> 时间：2012-04-17T13:08:00.873
> 
> 标签：javascript, node.js, express, pug

我已经操作了[这个应用程序](https://github.com/dtryon/clog)中的代码，并在views/layout.jade 文件中放入了一个侧边栏。在侧边栏中，我剪切/粘贴了处理来自 views/index.jade 的标签的代码：

```
 ul.tags
        each tag in tags
            a(href='/tag/' + tag._id.toHexString())
                li.tag= tag.name 
```

这些标签按应有的方式从数据库中获取，并在侧边栏中呈现出来，但是当我单击其中一个时（应该显示一个新页面，其中所有帖子都带有该标签），我收到一条错误消息：

```
500 ReferenceError: ... layout.jade:10 8| p 9| ul.tags > 10| each tag in tags 11|   
  a(href='/tag/' + tag._id.toHexString()) 12| li.tag= tag.name tags is not defined 
```

这是文件“tagcontroller.js”中调用的函数（处理标签的逻辑）：

```
app.get('/tag/:id', function(req, res){

    model.Tag.findById(req.params.id, function (err, tag){
        if (err) {
            console.log(err);
            // do something
        }

        var query = blogModel.BlogPost.find( { _id: { $in : tag.blogs } } );
        query.where('date').lte(new Date());

        query.exec(function (err, blogs) {
            if (err) {
                console.log(err);
                // do something
            }

            var query = model.Tag.find({});

            query.exec(function (err, tags) {
                if (err) {
                    console.log(err);
                    // do something
                }
                res.render('tags/detail', { title: tag.name, blogs: blogs, tagList: tags, dateFormatter: dateFormatter });  
            }); 
        });
    });
}); 
```

如果我将代码放回views/index.jade，一切正常。但我需要将它放在 layout.jade 中，以便能够在每个页面上显示它，而不仅仅是在 Home (index.jade) 上。

我真的很感激一些帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T16:17:04.117

现在，你有：

```
res.render('tags/detail', { title: tag.name, blogs: blogs, tagList: tags, dateFormatter: dateFormatter }); 
```

但是如果你正在做 a `each tag in tags`，那么你应该有类似的东西

```
{ title: tag.name, blogs: blogs, tags: tags, dateFormatter: dateFormatter } 
```

# solr - SOLR中的过滤器和复杂查询有什么区别？

> ID：10191894
> 
> 赞同：1
> 
> 时间：2012-04-17T13:08:06.677
> 
> 标签：solr, filter, lucene, solr-query-syntax

假设我想获取属于组织编号 2 并且其中包含字符串“baba”的所有用户。我可以这样做：

```
q=baba AND org:2 
```

或者

```
q=baba&fq=org:2 
```

我不确定有什么区别。有人能遮住一些光。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-17T13:12:42.077

过滤器对评分没有影响，它只是过滤部分。在 a) 匹配文档的数量很高和 2) 结果经常被重用的情况下，过滤器的性能也更高。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-17T14:46:35.097

过滤还允许标记方面。
您可以标记构面以包括为查询返回的所有构面，而不考虑 FQ。
例如，如果您将 org 作为构面返回，并且有 10 个值为 1 和 10 个值为 2，则“q=baba AND org:2”将返回 q 2(10) 的构面，但如果您执行 q= baba&fq=org:2 并用 q 1(10) 2(10) 标记你会得到的构面。

希望这是有道理的

# visual-c++ - 将 RGB24 样本保存到位图

> ID：10191897
> 
> 赞同：1
> 
> 时间：2012-04-17T13:08:16.230
> 
> 标签：visual-c++, ms-media-foundation

我正在使用 Windows Media Foundation 来处理我的网络摄像头。我已经能够成功地从网络摄像头检索数据样本并确定格式为 RGB24。现在我想将单个帧保存为位图。下面是我用来从网络摄像头读取样本的一小段代码。

```
IMFSample *pSample = NULL;

hr = pReader->ReadSample(
   MF_SOURCE_READER_ANY_STREAM,    // Stream index.
   0,                              // Flags.
   &streamIndex,                   // Receives the actual stream index. 
   &flags,                         // Receives status flags.
   &llTimeStamp,                   // Receives the time stamp.
   &pSample                        // Receives the sample or NULL.
 ); 
```

因此，一旦我用 IMFSample 填充了 pSample，我该如何将其保存为位图？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T11:10:24.043

下面是我用来从 IMFSample 保存位图的代码片段。我采取了很多捷径，我很确定我只能以这种方式逃脱，因为我的网络摄像头默认返回 RGB24 流和 640 x 480 像素缓冲区，这意味着没有条纹在 pData 中担心。

```
 hr = pReader->ReadSample(
    MF_SOURCE_READER_ANY_STREAM,    // Stream index.
    0,                              // Flags.
    &streamIndex,                   // Receives the actual stream index. 
    &flags,                         // Receives status flags.
    &llTimeStamp,                   // Receives the time stamp.
    &pSample                        // Receives the sample or NULL.
    );

wprintf(L"Stream %d (%I64d)\n", streamIndex, llTimeStamp);

HANDLE file;
BITMAPFILEHEADER fileHeader;
BITMAPINFOHEADER fileInfo;
DWORD write = 0;

file = CreateFile(L"sample.bmp",GENERIC_WRITE,0,NULL,CREATE_ALWAYS,FILE_ATTRIBUTE_NORMAL,NULL);  //Sets up the new bmp to be written to

fileHeader.bfType = 19778;                                                                    //Sets our type to BM or bmp
fileHeader.bfSize = sizeof(fileHeader.bfOffBits) + sizeof(RGBTRIPLE);                                                //Sets the size equal to the size of the header struct
fileHeader.bfReserved1 = 0;                                                                    //sets the reserves to 0
fileHeader.bfReserved2 = 0;
fileHeader.bfOffBits = sizeof(BITMAPFILEHEADER)+sizeof(BITMAPINFOHEADER);                    //Sets offbits equal to the size of file and info header

fileInfo.biSize = sizeof(BITMAPINFOHEADER);
fileInfo.biWidth = 640;
fileInfo.biHeight = 480;
fileInfo.biPlanes = 1;
fileInfo.biBitCount = 24;
fileInfo.biCompression = BI_RGB;
fileInfo.biSizeImage = 640 * 480 * (24/8);
fileInfo.biXPelsPerMeter = 2400;
fileInfo.biYPelsPerMeter = 2400;
fileInfo.biClrImportant = 0;
fileInfo.biClrUsed = 0;

WriteFile(file,&fileHeader,sizeof(fileHeader),&write,NULL);
WriteFile(file,&fileInfo,sizeof(fileInfo),&write,NULL);

IMFMediaBuffer *mediaBuffer = NULL;
    BYTE *pData = NULL;

pSample->ConvertToContiguousBuffer(&mediaBuffer);

hr = mediaBuffer->Lock(&pData, NULL, NULL);

WriteFile(file, pData, fileInfo.biSizeImage, &write, NULL);

CloseHandle(file);

mediaBuffer->Unlock(); 
```

我在[这里](http://blog.sipsorcery.com/building-a-video-softphone-part-iii/)做了一些讨论。

# java - 如何在过滤器中获取 ServletConfig 对象

> ID：10191904
> 
> 赞同：2
> 
> 时间：2012-04-17T13:08:39.400
> 
> 标签：java, servlets, servlet-filters

有没有办法在应用于`ServletConfig`该 servlet 中获取 servlet 的对象？`Filter`

编辑-> 场景是我在 web.xml 中的 serlvet 声明的“init-param”中提到了角色的名称（谁可以访问 servlet）

应用的过滤器将检查（使用 ServletConfig）试图访问 servlet 的人是否被授权（在角色中）访问它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T13:12:15.893

你不能。`ServletConfig`与特定的 servlet 相关联，就像`FilterConfig`过滤器一样。

您想在过滤器中访问哪个 servlet 配置？请注意，过滤器不一定需要直接委托给底层 servlet。它可以将请求传递给另一个servlet，根据某些条件选择servlet，甚至可以完全处理请求而不接触任何servlet。

话虽如此，这两个抽象在彼此内部是不可访问的。

# eclipse - Eclipse 多模块项目中缺少 Maven 依赖项

> ID：10191914
> 
> 赞同：3
> 
> 时间：2012-04-17T13:09:24.390
> 
> 标签：eclipse, maven, dependencies, m2e

我正在使用 STS 2.9.1（基于 Eclipse 3.7.2 构建）和与 STS 捆绑在一起的 m2e 插件（v1.0.200.20111228-1245）。
我有一个关于缺少包含多个模块的 Eclipse 项目中的依赖项的问题，或者我可能不完全理解它应该如何工作。

这是一个 Maven 项目。
在我的项目 > 属性 > Java 构建路径 > 库中，我有“Maven 依赖项”库，但它是空的（这就是问题所在）。
主 POM 没有任何依赖关系，但其中声明了几个模块。将依赖项添加到模块的 POM 不会将其添加到“Maven 依赖项”库（这是我的期望），并导致 Eclipse 在源文件中显示错误。
向主 POM 添加依赖项会将其添加到“MD”库中，但当然我不想将所有模块的依赖项添加到主 POM 中，只是为了将其添加到“MD”库中并添加每个依赖项构建路径似乎不正确也不实用。

我试过了：

*   项目 > 清洁，
*   Maven > 更新依赖，
*   Maven > 更新项目配置，
*   取消选中复选框：Project > Properties > Maven > Resolve dependencies from Workspace 项目。

以上似乎都没有奏效。

**示例：**
*简化的项目结构：*

*   简单的项目

    *   ...
    *   示例模块

        *   ...
        *   pom.xml
    *   pom.xml

*simple.project/pom.xml：*

```
<project ...>
    <modelVersion>4.0.0</modelVersion>
    <groupId>test</groupId>
    <artifactId>simple.project</artifactId>
    <version>0.0.1-SNAPSHOT</version>
    <packaging>pom</packaging>
    <modules>
        <module>sample-module</module>
    </modules>
    <dependencies>
        <dependency><!-- This dependency is present in "MD" lib. -->
            <groupId>javax.servlet</groupId>
            <artifactId>servlet-api</artifactId>
            <version>2.5</version>
            <scope>provided</scope>
        </dependency>
    </dependencies>
</project> 
```

*simple.project/sample-module/pom.xml：*

```
<project ...>
    <modelVersion>4.0.0</modelVersion>
    <parent>
        <artifactId>simple.project</artifactId>
        <groupId>test</groupId>
        <version>0.0.1-SNAPSHOT</version>
    </parent>
    <groupId>test</groupId>
    <artifactId>sample-module</artifactId>
    <version>0.0.1-SNAPSHOT</version>
    <dependencies>
        <dependency><!-- I've expected this dependency also to appear in "MD" lib. -->
            <groupId>junit</groupId>
            <artifactId>junit</artifactId>
            <version>3.8.1</version>
            <scope>test</scope>
        </dependency>
    </dependencies>
</project> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T18:50:44.400

It is not supposed to work. A project only imports a dependency from another one if it depends on that project (using `dependency`) or if it inherits from it (using `parent`). The `module` element only represents an [aggregation](http://maven.apache.org/pom.html#Aggregation).

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T07:57:38.883

问题是从很久以前开始的，但我解决了这个问题，创建了一个 Maven 项目并添加了 Maven 模块：右键单击项目和“新建 > 项目...> Maven > Maven 模块”。之后，代码中不再显示错误。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-17T20:44:06.903

我看到的第一件事是您在 pom 父级中定义依赖项。在那里，我希望看到一个`<dependencyManagement>`（[请参阅此处的文档](http://maven.apache.org/guides/introduction/introduction-to-dependency-mechanism.html#Dependency_Management)）结构。通过这种方式，子模块将正确继承那些公共依赖项。

除此之外，让我们开始最简单的测试。尝试从命令行中的 maven 实用程序编译您的项目。如果它有效，那么您的 Eclipse 配置有问题，否则问题出在您定义项目的方式上。

如果您的项目从命令行正确编译，让我们看看还会发生什么。

Maven 依赖库为空的事实意味着 Eclipse Maven 插件无法正确解析您的 pom。我对嵌入式 STS maven 插件的体验非常糟糕。尝试将其降级到 m2e 0.10 版本。您只需要打开 STS DashBoard / Find Updates / Install m2e 0.10

我希望这些技巧中的一些可以帮助你。

# windows - 在 Windows XP SP3 中的 USB 上自动启动 exe

> ID：10191918
> 
> 赞同：0
> 
> 时间：2012-04-17T13:09:34.367
> 
> 标签：windows, usb, autorun, windows-xp-sp3, autoplay

一旦我将应用程序插入运行 Windows XP SP3 的 PC，我想在 USB 上自动启动我的应用程序。我制作了一个 autorun.inf （有下面的书面代码），还尝试使用批处理文件（autorun.bat）启动设置，但这些似乎都不起作用。

我还读到某个特定的 Windows 更新 (KB971029) 禁用了 USB 的自动运行/自动播放功能。我怎样才能克服它？（我不能要求我的客户卸载 Windows 安全更新以使用我的产品..）

## autorun.inf 文件的代码

```
[autorun]
UseAutoPlay=1
icon=setup.exe
Open=setup.exe
action="Start my application"
Label=setup

[Autoplay]
shellexecute=autorun.bat
Icon=setup.exe 
```

我的产品也包含一些媒体（视频）文件，因此在插入 USB 时我会弹出一个询问以下选项 1.) 在资源管理器中打开文件 2.) 使用媒体播放器播放文件 3.) 不采取任何行动

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T13:11:16.660

如果禁用自动运行，则不能使用自动运行。就是这么简单。

# ruby-on-rails-3 - 我应该在 Rails 3.2 数据库中存储什么类型的 csv 文件？

> ID：10191920
> 
> 赞同：0
> 
> 时间：2012-04-17T13:09:35.897
> 
> 标签：ruby-on-rails-3, csv

作为我的应用程序的一部分，我需要在数据库中存储一个 csv 文件，但是我应该在模型中设置什么字段类型来存储 csv 文件。它是字符串类型还是其他类型？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T13:38:12.787

简单的回答：不要。

将其存储在文件系统中，并将对该路径的引用作为字符串字段放入数据库中。当您需要加载文件时，对其执行 a `File.read`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T13:35:10.420

您可能希望将其存储在某种数组中。

例如，`arr_of_arrs = CSV.read("path/to/file.csv")`返回一个数组数组 ( [docs](http://www.ruby-doc.org/stdlib-1.9.3/libdoc/csv/rdoc/CSV.html#method-i-read) )。

您可以使用该方法将其存储在数据库中`serialize`。这要求您使用`text`rails 数据类型。

# iphone - 导航栏方向问题

> ID：10191922
> 
> 赞同：1
> 
> 时间：2012-04-17T13:09:42.260
> 
> 标签：iphone, ios, sdk, orientation

我搜索了每个地方，但没有找到解决方案我是 iphone 中的新手。在我设置导航高度的每个地方，或者我的视图没有像问题一样按方向旋转。我的视图正在旋转，但我的导航栏在相同如果您有解决方案，请有人帮助我。谢谢，我已经在下面显示了一些我用于方向的代码。当我点击我的标签栏时，我的模拟器是自动旋转的，我希望标签栏也旋转，但仅使用此代码模拟器是旋转而不是标签栏和导航栏，对不起我的英语不好。

```
CGAffineTransform transform = CGAffineTransformIdentity;

switch ([[UIApplication sharedApplication] statusBarOrientation]) 
{

    case UIInterfaceOrientationPortrait:
        transform = CGAffineTransformMakeRotation(M_PI_2);
        break;

    default:
        break;
}

[[UIApplication sharedApplication]setStatusBarOrientation:UIInterfaceOrientationPortrait];

[UIView animateWithDuration:0.2f animations:^ {

    [self.navigationController.view setTransform:transform];

}];

[self.view setFrame:CGRectMake(0, 0, 320, 480)];
[self.view setNeedsLayout]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T04:41:15.957

这段代码，无意冒犯，非常好奇。我不确定您要做什么。你想解决什么问题？如果您不是很小心，使用 CGAffineTransform 肯定会产生奇怪的结果，就像您所描述的那样。

如果您只想确保您的应用成功支持横向和纵向，您可以`shouldAutorotateToInterfaceOrientation`在视图控制器中实现。执行此操作时，所有各种控件都会相应地重新定向。

```
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    // Support all orientations on iPad
    if (UI_USER_INTERFACE_IDIOM() == UIUserInterfaceIdiomPad) 
        return YES;

    // otherwise, for iPhone, support portrait and landscape left and right

    return ((interfaceOrientation == UIInterfaceOrientationPortrait) ||
        (interfaceOrientation == UIInterfaceOrientationLandscapeLeft) ||
        (interfaceOrientation == UIInterfaceOrientationLandscapeRight));
} 
```

但是，如果我误解了您想要做的事情，即，您正在尝试做一些比仅支持横向和纵向方向更复杂的事情，请告诉我。

* * *

我很抱歉，因为我不记得我最初从哪里得到这段代码（但它在 SO [here](https://stackoverflow.com/questions/181780/is-there-a-documented-way-to-set-the-iphone-orientation)中被引用），但以下可用于强制横向：

首先，确保您的 shouldAutoRotateToInterfaceOrientation 应如下所示：

```
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    if ((interfaceOrientation == UIInterfaceOrientationLandscapeLeft) ||
        (interfaceOrientation == UIInterfaceOrientationLandscapeRight))
        return YES;
    else
        return NO;
} 
```

二、在viewDidLoad中，添加如下代码：

```
if (UIDeviceOrientationIsPortrait([[UIDevice currentDevice] orientation]))
{
    UIWindow *window = [[UIApplication sharedApplication] keyWindow];
    UIView *view = [window.subviews objectAtIndex:0];
    [view removeFromSuperview];
    [window addSubview:view];
} 
```

出于某种原因，从主窗口中删除视图然后重新添加它会强制它查询 shouldAutorotateToInterfaceOrientation 并正确设置方向。鉴于这不是 Apple 认可的方法，也许人们应该避免使用它，但它对我有用。你的旅费可能会改变。但是[那个 SO 讨论](https://stackoverflow.com/questions/181780/is-there-a-documented-way-to-set-the-iphone-orientation)也提到了其他技术。

# php - Error handling "URL file-access is disabled..."

> ID：10191934
> 
> 赞同：0
> 
> 时间：2012-04-17T13:10:27.393
> 
> 标签：php, error-handling

I'm getting these 2 errors:

> **Warning**: file_get_contents() [function.file-get-contents]: URL file-access is disabled in the server configuration in /home/content/.../wp-content/themes/mytheme/functions.php on line 4035
> 
> **Warning**: file_get_contents(http://www.mysite.net/...y-1.7.2.min.js) [function.file-get-contents]: failed to open stream: no suitable wrapper could be found in /home/content/.../html/wp-content/themes/mytheme/functions.php on line 4035

Here's line 4035

```
$myFile=file_get_contents(get_bloginfo('template_directory')."/js/jquery-1.4.2.min.js"); 
```

Is this just a permissions issue on the server? How might I wrap this function to prevent the error and exit out to a useful message?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T13:12:56.177

您需要在 php.ini 配置文件中启用`allow_url_fopen`和`allow_url_include`（如果您想使用 加载远程资源`include`）。此外，您可以尝试将其添加到，`.htaccess`但如果您将 php 作为 apache 模块运行，我认为它不会起作用 - 它不应该覆盖此设置...

```
php_value allow_url_fopen On 
```

# c# - 从数据库返回多行

> ID：10191935
> 
> 赞同：0
> 
> 时间：2012-04-17T13:10:29.093
> 
> 标签：c#, arrays, web-services

我在 Web 服务中使用以下方法返回一组数据 -

```
int T = 0;
res.rows = new users[1];
        int cnt = 0;

        while (reader.Read())
        {

            if (T == 0)
            {

                res.rows[T] = new users();

                res.rows[T].age = (String)reader["age"];
                res.rows[T].height = (String)reader["height"];

                T = T + 1;

            }
            cnt = cnt + 1;               
        }

        return res; 
```

我目前已将其设计为返回一行数据，在此处设置`res.rows = new users[1];`然后`j==0`带回第一行数据。

我的问题是如何修改它以恢复多行/所有数据行？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T09:37:26.993

```
public class User
{
    private string m_Age;
    private string m_Height;

    public User() { }

    public string Age
    {
        get { return m_Age; }
        set { m_Age = value; }
    }

    public string Height
    {
        get { return m_Height; }
        set { m_Height = value; }
    }

} 
```

* * *

```
var rows = new List<User>();
while (reader.Read())
{

     var row = new User();
     row.Age = reader["age"];
     row.Height = reader["height"];
     rows.Add(row);
}

res.rows = rows; //if the res.rows property is an array then you can change this line to res.rows = rows.ToArray();

return res; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T09:44:59.027

试图在代码中保持最小的变化，它看起来像这样，

```
int T = 0;
res.rows = new List<User>();
    int cnt = 0;

    while (reader.Read())
    {

        //if (T == 0)
        {
            User u =new users();
            res.rows.Add(u);

            res.rows[T].age = (String)reader["age"];
            res.rows[T].height = (String)reader["height"];

            T = T + 1;

        }
        cnt = cnt + 1;               
    }

    return res; 
```

# jquery - jQuery.unique 在字符串数组上

> ID：10191941
> 
> 赞同：43
> 
> 时间：2012-04-17T13:10:43.377
> 
> 标签：jquery

状态描述[`jQuery.unique()`](http://api.jquery.com/jQuery.unique/)：

> 对 DOM 元素数组进行就地排序，删除重复项。请注意，这只适用于 DOM 元素的数组，而不适用于**字符串**或数字。

考虑到描述，有人可以解释为什么下面的代码有效吗？

```
<div></div>
<div></div>​ 
```

* * *

```
var arr = ['foo', 'bar', 'bar'];

$.each(arr, function(i, value){
    $('div').eq(0).append(value + ' ');
});

$.each($.unique(arr), function(i, value){
    $('div').eq(1).append(value  + ' ');
});
​ 
```

[http://jsfiddle.net/essX2/](http://jsfiddle.net/essX2/)

谢谢

编辑：可能的解决方案：

```
function unique(arr) {
var i,
    len = arr.length,
    out = [],
    obj = { };

for (i = 0; i < len; i++) {
    obj[arr[i]] = 0;
}
for (i in obj) {
    out.push(i);
}
return out;
}; 
```

* * *

## 回答 #1

> 赞同：103
> 
> 时间：2012-04-17T13:31:56.773

虽然它有效，但您可能应该考虑功能描述。如果创建者说它不是为过滤除 dom 元素之外的任何数组而设计的，那么您可能应该听听他们的意见。
此外，此功能很容易复制：

```
function unique(array){
    return array.filter(function(el, index, arr) {
        return index === arr.indexOf(el);
    });
} 
```

（[演示页面](http://jsfiddle.net/essX2/4/)）

## 更新：

为了让这段代码在所有浏览器（包括不支持某些数组功能的 ie7 - 例如`indexOf`or `filter`）中工作，这里使用 jquery 功能重写：

*   使用[`$.grep`](http://api.jquery.com/jQuery.grep/)而不是`Array.filter`
*   使用[`$.inArray`](http://api.jquery.com/jQuery.inArray/)而不是`Array.indexOf`

现在这是*翻译*后的代码的样子：

```
function unique(array) {
    return $.grep(array, function(el, index) {
        return index === $.inArray(el, array);
    });
} 
```

（[演示页面](http://jsfiddle.net/essX2/5/)）

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2012-04-17T13:18:37.420

它**可能**适用于数组字符串等，但它不是为这种用途而设计的......

请注意，代码`unique()`隐藏在 Sizzle 中`uniqueSort`：[github 源](https://github.com/jquery/sizzle/blob/feebbd7e053bff426444c7b348c776c99c7490ee/sizzle.js#L174-189)

虽然其中一些额外的代码看起来可能适用于任何数组，但请密切注意`sortOrder` [此处定义的](https://github.com/jquery/sizzle/blob/feebbd7e053bff426444c7b348c776c99c7490ee/sizzle.js#L955-1049)内容。它做了很多额外的工作来把东西放在“文档顺序”中——因此文档说明它应该只用于 DOM 元素的数组。

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2013-11-14T14:04:50.180

我知道 DOM 的独特作品，但这适用于 int 数组：

```
$.unique(arr.sort()); 
```

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2016-03-28T20:16:47.460

如果不限制使用 jQuery，请考虑使用 ES6 中的 Set。

```
var arr = ['foo', 'bar', 'bar'];
Array.from(new Set(arr)); // #=> ["foo", "bar"] 
```

适用于 Firefox 45、Safari 9 和 Chrome 49。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2012-04-17T13:15:17.473

`$.unique`将删除*重复*的 DOM 元素，而不是*相同*的DOM 元素。当您尝试在字符串上使用它时，您会得到不可预测的行为，并且排序将（可能）失败。

这是一个仅供 jQuery 内部使用的函数，对像你我这样的凡人没有用处。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2014-05-28T19:15:38.380

有一种快速的方法可以扩展 jQuery.unique() 函数以处理包含任何类型元素的数组。

```
(function($){

    var _old = $.unique;

    $.unique = function(arr){

        // do the default behavior only if we got an array of elements
        if (!!arr[0].nodeType){
            return _old.apply(this,arguments);
        } else {
            // reduce the array to contain no dupes via grep/inArray
            return $.grep(arr,function(v,k){
                return $.inArray(v,arr) === k;
            });
        }
    };
})(jQuery);

// in use..
var arr = ['first',7,true,2,7,true,'last','last'];
$.unique(arr); // ["first", 7, true, 2, "last"]

var arr = [1,2,3,4,5,4,3,2,1];
$.unique(arr); // [1, 2, 3, 4, 5] 
```

[http://www.paulirish.com/2010/duck-punching-with-jquery/](http://www.paulirish.com/2010/duck-punching-with-jquery/) - 示例 #2

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-11-01T14:12:43.057

$.unique 只会删除重复的 DOM 元素，如果您需要它用于数组：

```
var result=[] ;
$.each([12,1,2,4,3,1,4,3,3,2,111], 
        function(i,e){ if($.inArray(e,result)===-1) result.push(e) ;});
result; 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2019-11-14T08:45:25.273

```
var array=['a','b','c','a'];

    function unique(array)
    {
    var unique_arr=[];
    array.forEach(function(i,e)
    {
    if(unique_arr.indexOf(i)===-1) unique_arr.push(i);
    });
    return unique_arr;
    }
    console.log(unique(array)); 
```

# php - XML：在 MacOs 上剪切 xmlns

> ID：10191942
> 
> 赞同：0
> 
> 时间：2012-04-17T13:10:52.150
> 
> 标签：php, xml, macos, xml-namespaces

我有一个生成 xml 的脚本。

在我的电脑上 php 5.3.6、Ubuntu 11.10、libxml 2.7.8

在其他计算机上 php 5.2.10、libxml 2.7.3、MacOS 10.7.3

并且在我的计算机上使用 xmlns 属性生成了正确的 xml。在其他 xml 中几乎与需要相同，但没有 xmlns 属性。

PS我有一个属性数组，循环生成xml并从数组中添加属性。请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T15:31:10.133

php版本的问题。必须是 5.3.6

# c# - Jquery 取消绑定事件处理程序

> ID：10191943
> 
> 赞同：0
> 
> 时间：2012-04-17T13:10:53.810
> 
> 标签：c#, iframe, jquery

我有一个必须加载到 iframe 中的文档。在该文档中，有几个事件与不同的元素绑定，例如（带有锚标记的 onclick 事件），还有一些插件还与（循环插件，fancybox 插件）等元素绑定。现在我希望当文档加载到 iframe 中时，所有事件都解除绑定。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T16:42:08.157

例如，如果您想取消绑定 div 中的所有内容，您可以执行以下操作：

```
$('div').unbind(); 
```

伟大的。

# unity3d - 加载下一个级别

> ID：10191945
> 
> 赞同：0
> 
> 时间：2012-04-17T13:11:02.730
> 
> 标签：unity3d

我正在 Unity 中制作游戏。目前有两个级别。我数到30秒，当时间变为0时，我想自动加载下一个级别。但是当加载下一个级别时，游戏屏幕冻结，我无法移动任何东西。我用来加载下一个关卡的函数如下（这个函数在一个脚本中，其中一个空的游戏对象在加载新关卡时不会被销毁）：

```
function loadNextlvl(){
        var cur_level = Application.loadedLevel;
        yield WaitForSeconds(5.0);
        Application.LoadLevel(cur_level + 1);
    } 
```

我应该怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T13:35:17.063

我使用 Unity 的工作只是出于爱好，但每当我使用 Application.LoadLevel 时，我都会向它传递关卡名称的字符串，而不是指针。我从 API 中看到它也重载了一个 int，但可能出于测试目的，按名称调用它以查看它是否有效。

此外，您需要告诉 Unity 您将要使用的关卡。您可以在文件菜单的“构建设置”中执行此操作。

最后，您可以尝试使用`Application.levelCount`来查看您是否在关卡范围内。

# wordpress - 在 Wordpress 中显示帖子数

> ID：10191950
> 
> 赞同：0
> 
> 时间：2012-04-17T13:11:44.323
> 
> 标签：wordpress, post, counter

是否可以获得每个帖子的确切计数器以显示在我正在制作的主题中？例如，如果我有 100 个帖子，最后一个帖子将有 100 个，之前的一个：99，依此类推。我不能在这上面使用帖子的 ID，因为它总是递增 2（大多数时候），这使得它非常不适合作为计数器。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T14:00:59.883

试试这个，看看结果你就会明白了。
不要忘记数组以 0 而不是 1 开头。

每个数组项都将包含帖子 ID。因此如果 Item(key) nr 15 与当前页面 ID 相同，则当前项目为 #16(15+1)

```
<?php
global $wpdb;
$query = "SELECT `ID`
    FROM `$wpdb->posts`
    WHERE `post_status` = 'publish'
    AND `post_type` = 'post'
    ORDER BY `post_date` ASC
    "
;
$count = $wpdb->get_col($query);

var_dump($count); 
```

moar info: [wpdb](http://codex.wordpress.org/Class_Reference/wpdb#SELECT_a_Column)
如果您同意我的命令，请查看查询。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T12:37:57.367

您必须在那里使用“计数器”，如下所示：

```
$i=1;

while(have_posts):

  ....
  <h2><?php echo $i.' - ';?><?php the_title();?>
  ...
  $i++;

endwhile; 
```

# java - 接口中方法的java泛型类型参数

> ID：10191952
> 
> 赞同：5
> 
> 时间：2012-04-17T13:11:51.277
> 
> 标签：java, generics, inheritance, interface

我想在这里实现的是由子类决定是否要将 java.lang.String 或 java.util.HashMap 作为参数传递给 query() 方法。接口只需要声明子类必须实现查询方法，但我不关心子类要传入什么类型的参数。

我有一个类似的界面：

```
interface A<T>{
    public void query(T type);
} 
```

两个子类，如：

```
public class B implements A<String> {
    public void query(String type);
}

public class C implements A<HashMap> {
    public void query(HashMap type);
} 
```

然后我有一个工厂类来生产 B 或 C：

```
public class AFactory {
    public static A<?> getType(String type)  {
        if(type.equals("B")){
            return new B();
        } else if(type.equals("C")) {
            return new C();
        } 
   }
} 
```

这个想法是客户端可以使用如下接口而不依赖于B，C，例如：

```
A instance = AFactory.getType("B");
String a = "test";
instance.query(a); 
```

我在这里遇到的问题是：eclipse在instance.query（a）的行上给了我错误：

*类型 A 中的方法 query(capture#2-of ?) 不适用于参数 (String)*。

我认为问题在于接口契约不知道查询应该期待 String 或 HashMap。我只能想到解决这个问题的方法是，我必须将结果转换为：

```
B instance = (B)AFactory.getType("B");
String a = "test";
instance.query(a); 
```

但是通过这样做，我将依赖于 B 而不仅仅是 A（接口），这是我一开始就想避免的。知道如何在不依赖子类（在本例中为 B 和 C）的情况下做到这一点。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-17T13:23:19.127

正如 Ernest 所说，您需要转换返回的值——`A<String>`比`A<?>`.

如果您愿意更改工厂方法的签名，则可以使用泛型来避免自己强制转换：

```
public static A<T> getType(Class<T> type) {
    if (type.equals(String.class)) {
        return new B();
    } else if (type.equals(HashMap.class)) {
        return new C();
    }
} 
```

然后您的调用代码可能如下所示：

```
A<String> instance = AFactory.getType(String.class);
String a = "test";
instance.query(a); 
```

如果你不能这样做，那么调用者`getType()`将不得不强制转换。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-17T13:17:41.870

您不必强制转换为`B`-- 强制转换为`A<String>`. 这会给你`query(String)`，但没有引入`B`你的来源：

```
@SuppressWarnings("unchecked")
A<String> instance = (A<String>) AFactory.getType("B");
String a = "test";
instance.query(a); 
```

我添加了`@SuppressWarnings`注释，因为没有它你会得到一个“不安全”的警告；你知道警告是虚假的，所以注释是可以的。

# python - 将postgres数据导入mysql

> ID：10191955
> 
> 赞同：0
> 
> 时间：2012-04-17T13:11:56.770
> 
> 标签：python, mysql, postgresql, postgresql-9.1

我有一个要求，我需要将 postgres 数据插入 mysql。假设我在 postgres 中有用户表。我在mysql中也有用户表。我试图做这样的事情：

```
gts = 'cd '+js_browse[0].js_path #gts prints correct folder name/usr/local/myfolder_name 
os.system(gts)
gts_home = 'export GTS_HOME='+js_browse[0].js_path  
os.system(gts_home)
tt=gts+'&& sh bin/admin.sh User --input-dir /tmp/import'
#inside temp/import i import store my postgres user table data
#bin is the folder inside myfolder_name 
```

在 mysql 中，如果我使用命令它工作得很好：

```
cd /usr/local/myfolder_name
bin/admin.sh User -account=1 user=hamid -create' 
```

我无法以这种方式将数据存储在 mysql 中。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T13:22:13.113

你并没有给我们太多的信息。为什么会从 postgres 转到 mysql？

但是你可以使用其中一种工具——我看到人们对它们说得很好

[pg2mysql](http://www.lightbox.ca/pg2mysql.php "pg2mysql")或[pgs2sql](http://www.convert-in.com/pgs2sql.htm "pg2sql")

希望它成功。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-17T14:19:25.473

PostgreSQL 提供了使用[`COPY`](http://www.postgresql.org/docs/current/interactive/sql-copy.html)命令将数据转储为 CSV 格式的可能性。

最简单的方法是花时间将模式对象从 PostgreSQL 复制到 MySQL，您可以[`pg_dump -s`](http://www.postgresql.org/docs/current/interactive/app-pgdump.html)在 PostgreSQL 端使用它。恕我直言，正确移动模式将是最大的挑战。

然后你应该将 CSV 格式的数据转储导入 MySQL，[检查这个](http://dev.mysql.com/doc/refman/5.5/en/mysqlimport.html)以供参考。向下滚动到评论，您还可以找到适用于 Windows 的食谱。像这样的东西应该可以解决问题（相应地调整参数）：

```
LOAD DATA LOCAL INFILE C:\test.csv
INTO TABLE tbl_temp_data 
FIELDS TERMINATED BY ','
LINES TERMINATED BY '\n'; 
```

# ruby-on-rails-3 - 尝试部署时难以获得主动支持

> ID：10191961
> 
> 赞同：2
> 
> 时间：2012-04-17T13:12:27.640
> 
> 标签：ruby-on-rails-3, amazon-ec2, activesupport

我有一个我正在尝试部署到互联网上的 Rails 应用程序。我已经在 Amazon EC2 云上设置了一个服务器，我知道它可以工作，因为我已经在同一台机器上部署了另一个站点。

当我尝试通过“rails 控制台”或运行“rake db:seed”或尝试浏览应用程序时运行这个新应用程序时，rails 崩溃说它找不到 activiesupport：

> /home/ec2-user/.gem/ruby/1.9.1/gems/activesupport-3.2.2/lib/active_support/core_ext/big_decimal/conversions.rb:1:in `require'：无法加载这样的文件——bigdecimal （加载错误）

我的 Rails 版本是 3.2.2，我使用的是 ruby​​ 1.9.3p0 (2011-10-30) [x86_64-linux]。我的数据库是通过 Mongoid 访问的 MongoDB。我使用Passenger 和Apache 作为服务器。

有没有我错过的任何配置步骤或类似的东西？

PS我知道我不应该使用ec2-user，我还在试验。而且，我从来没有对 RVM 有过好运。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-22T10:22:24.757

我在我的 Amazon EC2 实例上使用 Rails 3.2.3 和 Ruby 1.9.3p0 遇到了同样的问题，其中 Ruby 安装了 ruby​​19 yum 包。就我而言，问题似乎是我使用 gem 命令手动安装了 bigdecimal gem，而不是使用 Bundler。为了解决这个问题，我手动卸载了 gem，添加了这一行

宝石'bigdecimal'

到我的应用程序的 Gemfile，然后重新运行捆绑安装。这重新安装了 gem，然后我的应用程序能够成功加载它。

即使我运行的是 Ruby 1.9.3p0，我的 gem 也安装在 ~/.gem/ruby/1.9.1/ 中。这似乎不是问题。

# selenium - 播放自动测试 selenium 测试失败，没有生成测试结果 TEST-{testname}.xml 文件

> ID：10191962
> 
> 赞同：0
> 
> 时间：2012-04-17T13:12:30.590
> 
> 标签：selenium, playframework, playframework-1.x

我们有一个 Play (1.2.4) 应用程序，它通过我们的 Teamcity 服务器自动测试。使用时，常规 (JUnit) 测试会在 /test-result/ 目录中返回一个 Test-{classname}.xml 数据文件

*play.bat 自动测试*

但硒测试没有。他们只生成*/test-result/{testname}.test.html.failed.html*或 ...succes.html

这很烦人，因为我无法轻松显示 Teamcity 中哪个硒测试失败。我必须查看日志文件/工件并查看存在哪个 failed.html 文件，打开它并查看哪个测试用例失败。恼人的！

我如何让 play 1.2.4 生成一个数据文件/xml，我可以解析它以查看哪个 selenium 测试失败？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T12:00:00.860

由于我找不到任何信息，也不知道如何完成它，我编写了自己的 Selenium HTML testresult 文件解析器。我已经在 GPL 下使用源代码在 github 上发布了它：[https ://github.com/crunchie84/play-seleniumresults-parser](https://github.com/crunchie84/play-seleniumresults-parser)

# java - 带有动态 Web 项目的 Hibernate ClassNotFoundException

> ID：10191963
> 
> 赞同：0
> 
> 时间：2012-04-17T13:12:35.067
> 
> 标签：java, hibernate, classnotfoundexception

向使用 Hibernate 的类路径添加了另一个项目（Java 项目），我收到此错误：java.lang.ClassNotFoundException: org.hibernate.cfg.Configuration

我的项目是一个动态 Web 项目。当我对 java 项目进行同样的尝试时，它起作用了。两者都包含 hibernate.cfg.xml，所以不要忘记这一点。与动态 Web 项目类路径及其特性有关。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T13:46:56.377

类路径（引用的库或 WebContent/WEB-INF/lib）中缺少休眠 jar。

# php - PHP mysql 变量

> ID：10191964
> 
> 赞同：0
> 
> 时间：2012-04-17T13:12:35.710
> 
> 标签：php, mysqli

昨天我在做 php mysql 我写了一个查询

```
mysql_query("INSERT INTO `first` (`firstName`, `lastName`, `address1`,  `city`, `state`, `zip`, `country`, `amount`, `date`) VALUES ('$firstName','$lastName','$address1','$city','$state','$zip','$country','$amount','$date')") 
```

它对我不起作用，然后我的老板在下面写了查询

```
mysql_query("INSERT INTO `first` (`firstName`, `lastName`, `address1`,  `city`, `state`, `zip`, `country`, `amount`, `date`) VALUES ('".$firstName."','".$lastName."','".htmlentities($address1)."','".$city."','".$state."','".$zip."','".$country."','".$amount."','".$date."')"); 
```

它有效！

第一次查询有什么问题吗..请帮帮我..

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-17T13:18:09.470

第一个查询应该可以工作，但是您的变量内容中可能有引号。此外，始终至少使用 mysql_real_escape_string。 [http://nl3.php.net/mysql_real_escape_string](http://nl3.php.net/mysql_real_escape_string)

或者更好的是，使用 PDO [http://php.net/manual/en/book.pdo.php](http://php.net/manual/en/book.pdo.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T13:18:09.183

此函数在所有方面都与[htmlspecialchars()](http://in.php.net/manual/en/function.htmlentities.php)相同，除了 htmlentities() 之外，所有具有 HTML 字符实体等效项的字符都将转换为这些实体。

# c# - 将 DispatchTimers 更改为其他计时器以解决性能问题。无法更新 UI，程序正在关闭

> ID：10191965
> 
> 赞同：1
> 
> 时间：2012-04-17T13:12:41.280
> 
> 标签：c#, wpf, multithreading, backgroundworker, dispatcher

**编辑＃1**：我已将 worker.RunWorkerAsync() 放在我的计时器循环中，并且我的应用程序不再关闭。虽然现在似乎什么都没有发生。

出于性能原因，我需要将 DispatcherTimers 替换为在不同线程中运行的其他计时器。有很多延迟/冻结，所以 DispatcherTimer 不再是一个选项。

*我在实际更新我的 GUI 线程时遇到问题，我的应用程序似乎总是在没有任何警告/错误的情况下关闭。* 我主要一直在尝试使用 BackGroundWorker 来解决我的问题。当我启动它时，一切都会导致我的应用程序关闭。

一些代码示例将非常受欢迎。

**旧代码调度程序代码：**

```
 public void InitializeDispatcherTimerWeging()
    {
        timerWegingen = new DispatcherTimer();
        timerWegingen.Tick += new EventHandler(timerWegingen_Tick);
        timerWegingen.Interval = new TimeSpan(0, 0, Convert.ToInt16(minKorteStilstand));
        timerWegingen.Start();
    }

    private void timerWegingen_Tick(object sender, EventArgs e)
    {
        DisplayWegingInfo();
        CaculateTimeBetweenWegingen();
    } 
```

应每 5 秒调用一次 DisplayWegingInfo() 和 Calculate 方法。

GUI 更新发生在Calculate 方法中。有一个按钮被**动态**创建并添加到observerableCollection。

**按钮创建（短版）：**

```
 public void CreateRegistrationButton()
    {
        InitializeDispatcherTimerStilstand();

        RegistrationButton btn = new RegistrationButton(GlobalObservableCol.regBtns.Count.ToString());
        btn.RegistrationCount = GlobalObservableCol.regBtnCount;
        btn.Title = "btnRegistration" + GlobalObservableCol.regBtnCount;
        btn.BeginStilstand = btn.Time;

        GlobalObservableCol.regBtns.Add(btn);
        GlobalObservableCol.regBtnCount++;

        btn.DuurStilstand = String.Format("{0:D2}:{1:D2}:{2:D2}", 0, 0, 0);         
    } 
```

**使用线程计时器的新代码在与 GUI 不同的线程中运行**

```
 public void InitializeDispatcherTimerWeging()
    {
        worker = new BackgroundWorker();
        worker.DoWork += new DoWorkEventHandler(Worker_DoWork);
        worker.RunWorkerAsync();
    }

    void Worker_DoWork(object sender, DoWorkEventArgs e)
    {
        TimerCallback callback = MyTimerCallBack;
        timerWegingen = new Timer(callback);

        timerWegingen.Change(0, 5000);
    }

    private void MyTimerCallBack(object state)
    {
        DisplayWegingInfo();
        CaculateTimeBetweenWegingen();
    } 
```

我的计时器在一个单独的线程中运行，然后是 GUI 线程（即 dispatcherTimer 使用的）。但我似乎无法将此更新发送到 UI 线程本身，因此更新实际上在 UI 中实现。

*该按钮通过另一个计时器每 1 秒重新填充一次新值。“DuurStilstand”是一个依赖属性*

```
 private void FillDuurStilstandRegistrationBtn()
    {
        TimeSpan tsSec = TimeSpan.FromSeconds(stopWatch.Elapsed.Seconds);
        TimeSpan tsMin = TimeSpan.FromMinutes(stopWatch.Elapsed.Minutes);
        TimeSpan tsHour = TimeSpan.FromMinutes(stopWatch.Elapsed.Hours);

        if (GlobalObservableCol.regBtns.Count >= 1
                    && GlobalObservableCol.regBtns[GlobalObservableCol.regBtns.Count - 1].StopWatchActive == true)
        {
            GlobalObservableCol.regBtns[GlobalObservableCol.regBtns.Count - 1].DuurStilstand =
                            String.Format("{0:D2}:{1:D2}:{2:D2}", tsHour.Hours, tsMin.Minutes, tsSec.Seconds);
        }
    } 
```

我需要在上述方法中使用来自 Dispatcher 的调用吗？如果是这样，具体如何？

在初始化BackGroundWorker的doWork方法后不确定如何调用ui线程，我的应用程序在启动后一直关闭。我已经尝试在几种方法中使用 Dispatcher.BeginInvoke，但到目前为止都失败了。目前我不知道如何实现它。

上面所有的代码都写在一个单独的 c# 类中。

最好的问候，杰克兹

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T13:41:42.183

当我运行我的代码示例时，DisplayWegingInfo() 试图访问 UI 组件时抛出异常。我们需要从 Timer 线程调用 Invoke() 来更新 UI。请参阅下面的 DisplayWegingInfo()。注意：这假设 CaculateTimeBetweenWegingen() 不与 UI 交互。

```
 void Worker_DoWork(object sender, DoWorkEventArgs e)
    {
        TimerCallback callback = MyTimerCallBack;
        timerWegingen = new System.Threading.Timer(callback);
        timerWegingen.Change(0, 3000);

    }

    private void MyTimerCallBack(object state)
    {
        DisplayWegingInfo();
        CaculateTimeBetweenWegingen();
    }

    private void DisplayWegingInfo()
    {
        if (this.InvokeRequired)
        {
            this.Invoke(new Action(DisplayWegingInfo));
            return;
        }

        // at this point, we are on the UI thread, and can update the GUI elements
        this.label1.Text = DateTime.Now.ToString();
    }

    private void CaculateTimeBetweenWegingen()
    {
        Thread.Sleep(1000);
    } 
```

# asp.net - write a string contain html tag on the page to create a html table in asp.net mvc

> ID：10191980
> 
> 赞同：0
> 
> 时间：2012-04-17T13:13:29.673
> 
> 标签：asp.net, html, asp.net-mvc

I use this code to return an string from my action :

```
 public ActionResult Index()
    {

        string List = "";       
        List = "<table><tr><td>Ali</td></tr></table>";
        ViewData["List"] = List;
        return View();

    } 
```

and this is my view :

```
<body>
<%: ViewData["List"] %>
</body> 
```

but instead to create a table when i browse the page , i see that the string `"<table><tr><td>Ali</td></tr></table>"` wrote on it. I use the firebug and see its html code . but i saw something like this :

```
&lt;table&gt;&lt;tr&gt;&lt;td&gt;Ali&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt; 
```

Is there any body out there to help me?

Thansk Regards

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T13:14:38.327

This is because you use the HtmlEncode tag

Change the `<%:` to `<%=`

will be come

```
<body>
<%= ViewData["List"] %>
</body> 
```

and do not forget to HtmlEncode your data only to avoid any injection.

# c - memcpy_s and strcpy_s error but manual for loop works

> ID：10191981
> 
> 赞同：2
> 
> 时间：2012-04-17T13:13:31.213
> 
> 标签：c, visual-studio-2010, memcpy, strcpy

In my example, strcpy_s and malloc_s throw an error while manual copying seems to work. here's the code. This works:

```
hookaddrinfoluacode=(char *)malloc(16384);
// This works           
for(i=0;i<strlen(this_token);++i){
   hookaddrinfoluacode[i]=this_token[i];
}                       
hookaddrinfoluacode[i+1]='\0'; 
```

This doesn't

```
memcpy_s(hookaddrinfoluacode,sizeof(char),this_token,strlen(this_token)); 
```

And neither does this:

```
strcpy_s(hookaddrinfoluacode,strlen(this_token),this_token); 
```

The error seems to be thrown from this code line in standard library:

```
 _VALIDATE_RETURN_ERRCODE(dst != NULL, EINVAL); 
```

this_token is obtained from `this_token=strtok_s(NULL,":",&next_token);` call.

I'm confused :)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T13:20:42.663

`memcpy_s` throws an exception if the source won't fit in destination. `sizeof(char)` is 1\. Both also validate pointers are not NULL, so you must have one.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T13:26:31.287

您看到的错误似乎是在验证接收到的目标指针不为空。你在使用它之前分配它吗？正如你所展示的，你是手动做的吗？除此之外，您应该将目标缓冲区的大小作为第二个参数，并在第四个参数中给出要复制的字节数。它应该是这样的：

```
hookaddrinfoluacode=(char *)malloc(16384);
memcpy_s(hookaddrinfoluacode, 16384 * sizeof(char),this_token,strlen(this_token) ); 
```

# svn - svn 更新而不移动到该目录

> ID：10191982
> 
> 赞同：2
> 
> 时间：2012-04-17T13:13:32.810
> 
> 标签：svn

我需要在服务器上进行一些 svn 更新。是否可以在`svn update`不进入该目录的情况下进行操作？

只是想保持整洁，而不是在服务器上到处乱跑 :-)

先感谢您

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-17T13:14:38.977

是的，只是

```
svn update /path/to/dir/to/update 
```

工作得很好。更新时无需在目录中。

同样，您可以更新单个文件。

```
svn update /path/to/dir/to/update/config.ini 
```

（在 Subversion 1.6.17 上测试）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-17T13:16:56.477

```
$ svn help update

update (up): Bring changes from the repository into the working copy.
usage: update [PATH...]

  If no revision is given, bring working copy up-to-date with HEAD rev.
  Else synchronize working copy to revision given by -r.

  For each updated item a line will start with a character reporting the
  action taken.  These characters have the following meaning: 
```

所以，像

> svn更新/home/naishe/workspace

将工作

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-17T13:17:55.023

给你一个额外的，因为我喜欢你的问题。假设您正在处理的目录列表是 a、b、c ... z。

您可以这样做以节省一些额外的行：

对于 abc ... z 中的 DIR；做 svn 更新 $DIR; 完毕

（Bash 语法）。

如果您很着急，并且希望这些更新同时发生（将要求目录位于单独的树中，即它们在任何父目录中都没有共同的 .svn），那么您将运行更新在后台！

对于 abc ... z 中的 DIR；做 svn 更新 $DIR**并** 完成

# java - debug.keystore does not exist

> ID：10191984
> 
> 赞同：3
> 
> 时间：2012-04-17T13:13:49.200
> 
> 标签：java, android, google-maps, cmd, md5

I'm trying to generate an MD5 fingerprint but the problem is that everytime i try typing in the whole code, it says debug.keystore does not exist. I've seem multiple different threads on the same thing but none of them seemed to really help my issue.

What i type in is

```
C:\Program Files\Java\jdk1.7.0_01\bin>keytool -v -list -alias
androiddebugkey -keystore debug.keystore -storepass android -keypass android 
```

Can sombody please help me debug this problem? thank you.

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-04-17T13:22:34.097

如果您使用的是 Eclipse，您可以使用以下命令找到调试密钥库的位置：

Window > Preferences > Android > 点击“Android”左侧的三角形打开子菜单 > Build

这将告诉您调试密钥库的位置，并让您设置自定义调试密钥库。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T14:29:40.003

幸运的是，有一个新的 Eclipse 插件。

*   按`Help > Install New Software`。
*   按`Add`。
*   为您的工具输入一个名称，我将其命名为 keytool。
*   对于位置粘贴以下链接： `http://keytool.sourceforge.net/update`

然后检查 Keytool 并按 Next 然后安装

它会询问您是否信任此证书。按确定。

安装后，eclipse 将重新启动，然后您将在工具栏上看到一个新按钮，称为 Keytool（它将有一个钥匙图标）。按下它，填写您的姓名、密码等，它会给您您的 md5 指纹。它对我有用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-15T12:08:06.583

C:\Program Files\Java\jdk1.6.0_25\bin>keytool -list -alias androiddebugkey -keystore "c:\documents and settings\ndotdes65.android\debug.keystore" -storepass android -keypass android

试试这样...

为 debug.keystore.... 放置正确的路径

希望它会工作..！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-30T08:12:56.743

安装开发环境后，还没有定义虚拟设备。如果没有创建虚拟设备，则不会构建此 debug.keystore 文件。因此，首先创建您的虚拟设备。

# c# - 检测在 Page_Load 中点击了哪个按钮？

> ID：10191992
> 
> 赞同：1
> 
> 时间：2012-04-17T13:14:14.780
> 
> 标签：c#, jquery, asp.net

在我的 asp.net 网页中，有一些按钮和复选框。它们都可能导致回发。我可以检测到单击了哪个控件吗？因为我会为如果单击一个按钮然后做某事添加代码。我看到一些例子是用 Jquery 完成的。我们可以在 C# 中完成吗？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T13:19:54.113

为什么你不只是使用按钮的点击行为：

**ASPX**

```
<asp:Button id="Button1"
       Text="Click here for greeting..."
       OnClick="GreetingBtn_Click" 
       runat="server"/> 
```

**CS**

```
void GreetingBtn_Click(Object sender,EventArgs e)
{
} 
```

参考[这里](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.button.click.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-17T13:17:44.317

您可以检查`Request.Form["_EVENTTARGET"]`生成回发的控件

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-17T13:18:56.937

好吧，如果每个按钮都向帖子提交一个键值或获取参数，并且它们都不同，那应该很容易！:)

```
localhost/home.html?button=clicked&link=selected 
```

上面是一个获取参数 url 的示例，您可以使用 jquery 来获取它们，或者如果它是一个帖子，您可以以类似的方式访问它们……但上一页必须是一个表单。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-17T13:18:50.377

您最终可以通过检查 Request.Form["_EVENTTARGET"] 来做到这一点，但这是非常不寻常的，当然也没有必要。

无论您需要做什么，都可以在给定控件的 Click 事件处理程序中完成。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-17T13:22:14.703

您可以使用 javascript 设置服务器隐藏控件，指定操作（复选框/文本框/按钮单击）并在页面加载中检索该服务器控件以检查其操作并为该操作添加代码

# c# - How to Downgrade/Upgrade multiple columns in multiple tables

> ID：10191996
> 
> 赞同：0
> 
> 时间：2012-04-17T13:14:27.680
> 
> 标签：c#, entity-framework, entity-framework-4, entity-framework-migrations

I am able to Upgrade/downgrade recent changes in my database by using below commands

For Upgrade : In Package Manager Console used below command

```
pm > Add-Migration <Column Name> 
```

For Downgrade : In Package Manager Console used below command

```
pm > Update-Database –TargetMigration:"ColumnName" 
```

Can any one help how to Upgrade/Downgrade multiple columns in multiple tables.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-13T11:15:57.230

如果您想对多个更改进行多个更改，只需创建一个包含所有更改的迁移步骤。

1.  将生成新列的新属性添加到您的实体类中。
2.  跑`add-migration BunchOfColumns`

查看`BunchOfColumns`迁移步骤，您应该会看到将所有新列添加到类的代码。要降级，只需迁移`BunchOfColumns`作为目标迁移。